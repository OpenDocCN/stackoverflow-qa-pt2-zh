# StackOverflow 问答 13195000-13195999

# eclipse - JBoss Eclipse - 使用 Jar 部署战争

> ID：13195008
> 
> 赞同：1
> 
> 时间：2012-11-02T12:11:48.467
> 
> 标签：eclipse, jboss

我正在将 JBoss AS 7 与 Eclipse Indigo 一起使用，但我在部署 WAR 时遇到了问题。

事实上，我有 2 个项目：

*   首先包含“***逻辑部分***”：不同的EJB（Session Bean + Entity Bean）
*   第二个包含“ ***Web 部分***”：与 Web 应用程序相关，其中有一些 JSF、xhtml 和 backing bean 的东西。

所以基本上，我添加到我的第二个项目类路径，第一个（构建路径-> 项目-> 添加）。

然后我尝试制作一个基本的 xhtml 文件（表单），与支持 bean 交互，与我的第一个项目的会话 Bean 交互。

但是当我尝试部署我的应用程序时，出现以下异常：

```
catching: org.jboss.weld.resources.spi.ResourceLoadingException: Error loading class MY_BACKINGBEAN_CLASS
Caused by: java.lang.NoClassDefFoundError: MY_SESSIONBEAN_CLASS 
```

我不明白为什么会发生这个错误，因为我在我的类路径中包含了包含所有会话 bean 的项目。

我知道部署战争有很多事情，但我没有找到任何好的解决方案。

谢谢。

# workflow-foundation-4 - 这是一个错误还是我错过了 WF Designer 的某些内容

> ID：13195009
> 
> 赞同：1
> 
> 时间：2012-11-02T12:11:54.867
> 
> 标签：workflow-foundation-4, activitydesigner

这是在尝试解决自托管设计器中的相同问题时发现的场景。创建一个包含类型的库项目。我的是这个。

```
namespace RaceEventLibrary
{
    public class Registration
    {
        public string Name { get; set; }
        public int Age { get; set; }
        public string EventName { get; set; }
    }
} 
```

现在创建一个 Workflow 4.5 控制台应用程序（或服务，这似乎无关紧要）。引用库项目。在设计器上放置一个序列，然后制作一个这种库类型的 InArgument，在我的例子中是注册。一切都很好，设计师很高兴。

接下来创建另一个相同的项目，引用相同的库。现在只需从第一个项目中打开 xaml 文件。砰，它找不到类型。

System.Xaml.XamlException：“无法解析属性“registration”的类型“InArgument(r:Registration)”。

这在 xaml 中是：

```
 <x:Members>
        <x:Property Name="registration" Type="InArgument(r:Registration)" />
    </x:Members>

preceded by 
    xmlns:r="clr-namespace:RaceEventLibrary;assembly=RaceEventLibrary" 
```

对于自托管设计器，我发现了这个问题的许多变体，并尝试了各种方法将库程序集加载到设计器中，但没有任何乐趣。

有关如何纠正此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:25:36.377

WF4 有自己的加载程序集的方式，这些方式并不总是与标准 .NET 框架完全相同。Ron Jacobs 对此发表了许多有趣的帖子，请参阅[此处](http://blogs.msdn.com/b/rjacobs/archive/2011/01/07/wf4-spike-activity-versioning-gac-and-loose-xaml.aspx)。

您没有提到您如何将工作流实际加载到 WorkflowDesigner 中。有几种方法可以做到这一点。使用 ActivityXamlServices.CreateBuilderReader() 时，您可以使用[XamlSchemaContext](http://msdn.microsoft.com/en-us/library/system.xaml.xamlschemacontext.aspx)指定需要哪些程序集。那应该让您加载工作流程。

# spring - 使用 SQLite 和 Tomcat 的 Web 应用程序的响应性注意事项

> ID：13195011
> 
> 赞同：0
> 
> 时间：2012-11-02T12:12:01.230
> 
> 标签：spring, tomcat, web-applications

我正计划为我的客户创建一个基于 Web 的餐厅计费应用程序。该技术是Spring，hibernate。由于我的客户不喜欢任何浏览器，我会要求他使用 Firefox。计划在他的本地机器上的 Tomcat 实例中部署我的应用程序。这是我的第一次实时部署。我计划在 Firefox 中使用 SQLite，以提供至少 70% 的桌面应用程序响应时间。我如何使我的应用程序更稳定，因为他将全天候使用它？我的应用程序的响应能力会在几天内恶化吗？我对此没有任何明确的预测。

# jquery - 如何在我的手风琴中配置速度选项

> ID：13195012
> 
> 赞同：0
> 
> 时间：2012-11-02T12:12:05.017
> 
> 标签：jquery, accordion, duration, jsfiddle

我创建了一个脚本来使我的 div 可扩展。

```
$('.expandable').find('h2').on('click', function(){
      $(this).parent().css({height: (parseInt($(this).parent().css('height')) > 50)?'25px':'auto'});
      $(this).find('i').toggleClass('icon-plus-sign icon-minus-sign', 300);
  }) 
```

如何配置可扩展 div 的速度或持续时间，我希望它下降得更慢更平稳。

谢谢

这是我的[手风琴](http://jsfiddle.net/Manna/JSG9A/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:23:01.960

如何使用[slideToggle()](http://api.jquery.com/slideToggle/)：

```
$('.expandable').find('h2').on('click', function(){
      $("#myList").slideToggle('slow');
}) 
```

在列表中添加一个 id 以便我们可以轻松找到它：

```
<ul id="myList"> 
```

并从 css 开始隐藏它：

```
#myList {
    display: none;
}

/* And remove the height on the div */
.expandable{
    /*height: 25px;*/
    overflow: hidden;
    width: 200px;
    background-color: #2C2C2C;
    border-radius: 5px;
    color: #fff;
} 
```

见更新：http: [//jsfiddle.net/JSG9A/2/](http://jsfiddle.net/JSG9A/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:25:42.873

使用`animate`代替`css`来改变高度：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# php - 使用ajax动态添加一行很热？

> ID：13195013
> 
> 赞同：1
> 
> 时间：2012-11-02T12:12:07.780
> 
> 标签：php, javascript, html, ajax

我有两个使用 AJAX 存储在数据库中的文本框。但我想返回表结构中新添加的行。

我在添加产品来销售时使用这个概念。当我想添加一个项目时，它将以表格网格格式显示。

这是我的 AJAX 代码。

```
 var xmlHttp
    function newVendorGridInital()
    {
    //alert("HI");
    xmlHttp=GetXmlHttpObject()
    if (xmlHttp==null)
     {alert ("Browser does not support HTTP Request"); return } 

    var  item= document.getElementById('itemcode').value;
    var url="ajax_NewVendorGrid.php"
    url=url+"?itm="+item; // For multiple value send.

    url=url+"&sid="+Math.random()

    xmlHttp.onreadystatechange=newVendorGrid
    xmlHttp.open("GET",url,true)
    xmlHttp.send(null)
} 

function newVendorGrid() 
{ 
if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
 {
    document.getElementById("GridRuntimeData").innerHTML=xmlHttp.responseText;
           > > > I didn't understand how to target the id field > > > GridRuntimeData 
 } 
} 
```

在我的 html 页面中，我创建了一个表结构，即头部。

在我的 PHP 文件中，我使用 echo 语句以 html 行格式返回整个插入的行。

```
 <?php   
     echo "<tr><td>".$item."</td></tr>";
    ?> 
```

我的疑问是如何在表格中显示该行。如果我用 php 代码编写整个表结构，那么它将正常工作。但我不想一直返回整行。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:27:02.097

您可以使用 Javascript 将行动态添加到表中，如下所示：

```
 var table = document.getElementById("mytable");

    var td = document.createElement('td');
    td.innerHTML = 'new row';

    var tr = document.createElement('tr');
    tr.appendChild(td);

    table.appendChild(tr); 
```

[jsFiddle 演示在这里](http://jsfiddle.net/bCkjy/)

# oracle - 设置序列currval的函数

> ID：13195015
> 
> 赞同：0
> 
> 时间：2012-11-02T12:12:15.220
> 
> 标签：oracle, oracle11g

我编写了这个函数来将我的序列的 currval 设置为最大 id+1。但我收到如下错误：

```
ORA-14552: cannot perform a DDL, commit or rollback inside a query or DML 
```

请帮我解决这个问题。

```
CREATE OR REPLACE Function createcurrentid (
   model_in IN varchar2,
   primarykey_in IN VARCHAR2,
   seq_name IN VARCHAR2)
  RETURN number
IS
  cnumber number;
  c2      sys_refcursor;
  c3      sys_refcursor;
  c6      sys_refcursor;
  c7      sys_refcursor;
  c8      sys_refcursor;
  c9      sys_refcursor;
  c4 number;
  c5 number;
  type result_rec is record (
    id      number,
   currvalvalue  number
 );
 l_result_rec result_rec;
BEGIN
 open c2 FOR 'SELECT max('||primarykey_in||') AS id FROM '||model_in;
 fetch c2 into c4;
 close c2;
 open c3 FOR 'select '||seq_name||'.currval AS currvalvalue from dual';
 fetch c3 into c5;
 close c3;
 cnumber:=c4-c5;
 open c6 FOR 'alter sequence'||seq_name||' increment BY'||cnumber;
 commit;
 open c8 FOR 'select '||seq_name||'.nextval from dual';
 commit;
 open c9 FOR 'select '||seq_name||'.CURRVAL from dual';
 commit;
 open c7 FOR 'alter sequence'||seq_name||' increment BY 1';
 commit;
 RETURN cnumber;
 END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:49:05.713

所有返回单行或根本不返回单行的语句的所有打开游标似乎都不是很有用，并且可能是您担心的根源。

尝试以下操作：

```
create or replace function createcurrentid (
   model_in in varchar2,
   primarykey_in in varchar2,
   seq_name in varchar2)
  return number
is
  maxval  number;
  lastval number;
  delta   number;
  nextval number;
begin
 execute immediate 'select max('||primarykey_in||') as id from '||model_in
  into maxval;
 execute immediate 'select '||seq_name||'.nextval from dual'
  into lastval;
 delta:=maxval-lastval;

 execute immediate 'alter sequence '||seq_name||' increment by '||delta;
 execute immediate 'select '||seq_name||'.nextval from dual'
  into nextval; -- this var needs to be read for the sequence to increment
 execute immediate 'alter sequence '||seq_name||' increment by 1';
 return delta;
end; 
```

请记住，DDL 执行隐式提交，因此您拥有的显式提交是多余的。

我相信这本质上是活泼的，但对于一次性修复它可能没问题。

# css - 停止填充 DIV 的背景颜色

> ID：13195016
> 
> 赞同：0
> 
> 时间：2012-11-02T12:12:28.033
> 
> 标签：css

我有一个带有透明区域的 PNG 图像。这有点像锯齿形边缘的结帐收据撕裂。它将位于具有白色背景的 div 的底部以模拟收据。我已经尝试如下。

```
 background: #ffffff url("../images/zigzag.png") bottom right no-repeat; 
```

但是背景白色填充到图像的边缘

![在此处输入图像描述](../Images/b173fdffc6184dd85ec57b7813c1710f.png)

除了创建另一个 div 之外，还有没有办法阻止背景颜色进入图像下方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:29:03.877

使背景色透明：

```
#foo {
  background: transparent url(yourzig-zagImage) no-repeat 0 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:38:51.063

添加另一个`div`可能是最干净的解决方案。

但是，如果您的高度`div`有限，您可以改为使`div`透明的背景，并用白色像素扩展“不规则边缘”图像的顶部，直到它足够高，它总是为主要部分提供白色背景`div`. _

# php - 使用php为WP电子商务中的循环数据添加类

> ID：13195017
> 
> 赞同：0
> 
> 时间：2012-11-02T12:12:37.363
> 
> 标签：php, wordpress, loops, e-commerce

在 WP 电子商务中，我的产品页面模板中有以下内容：

```
<ul id="product-categories">
            <?php $counter = 1; ?>
            <?php wpsc_start_category_query(array('category_group'=>get_option('wpsc_default_category'), 'show_thumbnails'=> get_option('show_category_thumbnails'))); ?>
                    <li class="four columns<?php if ($counter % 4 == 1){echo ' alpha';}else if ($counter % 4 == 0){echo ' omega';} ?>">
                    <?php $counter++ ; ?>
                        <a title="<?php wpsc_print_category_name(); ?>" href="<?php wpsc_print_category_url();?>">
                            <?php wpsc_print_category_image('auto', 'auto'); ?>
                            <span><?php wpsc_print_category_name(); ?></span>
                        </a>
                    </li>
                    <p><?php echo $counter ?></p>
            <?php wpsc_end_category_query(); ?>
</ul> 
```

如您所见，对于每`4n-3`一项，我都在尝试添加一个`alpha`类，对于每`4n`一项，我都在尝试将一个`omega`类添加到我的列表项中，以便显示与网格框架一起使用。

我的问题是，`start_wpsc_category_query`似乎不像标准 WP 循环那样“循环”，因为我的回显计数器值`2`对于每个项目都保持不变，因此没有添加任何类。

有谁知道如何修复此代码以使计数器值每次都增加，或者如果您以前处理过 WP 电子商务，有更好的（PHP）方法来解决问题吗？

如果有人知道如何执行此操作，另一种方法是为 WP 电子商务类别编写一个 foreach 循环。

提前一百万谢谢。

# java - 是否可以从 Apache POI 中的 FuncVarPtg 获取操作数？

> ID：13195020
> 
> 赞同：1
> 
> 时间：2012-11-02T12:12:42.927
> 
> 标签：java, apache-poi

我想从某个单元格开始计算 Excel 电子表格的切片（ [http://en.wikipedia.org/wiki/Program_slicing ）。](http://en.wikipedia.org/wiki/Program_slicing)这意味着我需要找出单元格中引用了哪些单元格并递归地遵循这些引用。到现在为止还挺好。

现在我遇到了 if 语句的问题（我也假设其他更复杂的语句），因为我得到了一个 FuncVarPtg 类型的 Ptg，我不知道如何获取操作数和其中包含的引用。

FormulaParser.parse("IF(C2>D2,A1,B1)") 产生*if 条件*中引用的单元格，但不是*then*和*else*分支中的单元格。这是一些示例性输出（单元格 C2 保持值 1.0，单元格 D2 保持值 0.0，即使用 RefPtg.getRow() 和 RefPtg.getColumn() 解决并遵循这些引用没有问题）

```
fromCell IF(C2>D2,A1,B1)
ptg org.apache.poi.ss.formula.ptg.RefPtg [C2]
fromCell 1.0
ptg org.apache.poi.ss.formula.ptg.RefPtg [D2]
fromCell 0.0
ptg org.apache.poi.ss.formula.ptg.FuncVarPtg [IF nArgs=3] 
```

简而言之，我的问题是：有没有办法从 FuncVarPtg 中获取引用的操作数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:16:59.783

好吧，我的错误是我认为 POI 会以不同的方式处理这个问题。无需访问 FuncVarPtg 即可获取嵌套操作数（以及我的应用程序所需的 RefPtgs 和 AreaPtgs）。FormulaParser.parse() 返回公式中出现的所有 Ptg（包括嵌套的）的数组。因此，对于我的应用程序，过滤该数组以获取 RefPtgs 和 AreaPtgs 就足够了。

# javascript - 来自 asp.net 和 HTML5 的 Validationgroup 功能

> ID：13195024
> 
> 赞同：1
> 
> 时间：2012-11-02T12:13:08.453
> 
> 标签：javascript, jquery, html

我们如何仅使用 HTML5 实现 asp.net 中的验证组功能？我正在使用这个库：[http ://afarkas.github.com/webshim/demos/demos/webforms/4-webforms-custom-validity.html](http://afarkas.github.com/webshim/demos/demos/webforms/4-webforms-custom-validity.html)

基本上我有一个文本框和按钮，我希望这个文本框和这个按钮进入一个组，其余的可以在不同的组中。所以这个按钮应该只验证单个文本框而不是整个表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:36:02.927

您可以调用[`checkValidity()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#dom-cva-checkvalidity)各个表单元素，然后采取您认为合适的任何操作。 [这是一个简单的例子](http://jsfiddle.net/robertc/6pHGE/)：

```
<div id="d1">
    <input type="text" required id="i1">
    <button onclick="if (document.getElementById('i1').checkValidity())
        {document.getElementById('d1').className = 'va'} 
      else 
        {document.getElementById('d1').className = 'in'}; return false;">Check 1</button>
</div> 
```

显然，在现实生活中，您不会使用 hacky 内联事件处理程序，但原理是相同的。

# sql - 从 SQL 中的字段返回子字符串

> ID：13195025
> 
> 赞同：1
> 
> 时间：2012-11-02T12:13:08.417
> 
> 标签：sql, stored-procedures

我希望你们中的一个知识渊博的人可以帮助我解决这个问题......

我的数据库中有一个包含 HTML 的字段。在此 HTML 中，每条记录中都有一个包含参数的链接。

例如。

```
<a href='http://mysite.com/clickme.aspx?ctid=31' title='Click Here !' target='_blank'>Click this link</a> 
```

我只想返回记录的 ID，以及参数 CTid 的值（CTid 可以是 2 位到 12 位之间的任何值）

所以，我想要返回的是：

```
ID ¦ CTid ¦
73 ¦ 31   ¦ 
```

我试过使用 PATINDEX 但它对我没有用（因为我必须指定返回的字符串的长度）

```
SELECT id, SUBSTRING(content, PATINDEX('%CTid%', content), 12) AS CTid
FROM ARTICLES
WHERE content LIKE '%CTid%' 
```

返回：

```
 ID ¦ CTid         ¦
   73 ¦ ctid=31' tit ¦ 
```

任何人都可以阐明这样做的好方法吗？

我将返回数千行，因此如果可能的话，我宁愿远离游标和密集操作。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:31:09.103

```
SELECT ID, SUBSTRING(content, PATINDEX('%CTid%', content) + 5, PATINDEX('%[^0-9]%', SUBSTRING(content, PATINDEX('%CTid%', content) + 5, 12)) - 1) AS CTid       
FROM ARTICLES
WHERE content LIKE '%CTid%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:36:22.343

这个查询怎么样，在 ms sql server 中工作：

```
SELECT ID, SUBSTRING(CTid, 0, PATINDEX('%''%', CTid))
FROM(
    SELECT ID, SUBSTRING(content, PATINDEX('%CTid%', content)+5, 12)+'''' AS CTid
    FROM ARTICLES
    WHERE content LIKE '%CTid%'
)X 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:31:38.460

> SELECT PARSENAME(REPLACE(PARSENAME(REPLACE(yourSQLString, "=", "."), 2),"'", "."),1)

这要求**yourSQLString在****=**之前至少 1 位开始，并在**'**之后完成至少 1 位

# flex4 - Flex 应用程序中的亚洲字符性能问题

> ID：13195029
> 
> 赞同：2
> 
> 时间：2012-11-02T12:13:17.407
> 
> 标签：flex4

我们在我们的 flex 应用程序中嵌入 Arial Unicode 字体（仅限有限范围）以支持英语、日语、中文和韩语语言，早些时候我们使用 Verdana 系统字体来表示英语，我们在输入/显示非英语时观察到一些应用程序缓慢字符，我不确定这是否真的是因为我们上面提到的 css 更改或其他原因，是否有人知道 Flex 应用程序（MX 组件）中嵌入字体的应用程序性能有任何限制。

请建议/建议。如果有人知道任何仅支持英文、日文、中文和韩文的轻量字体文件，也请告知。

谢谢阿布舍克

# java - mac 上的 logback 返回问号而不是单词

> ID：13195037
> 
> 赞同：8
> 
> 时间：2012-11-02T12:14:04.393
> 
> 标签：java, macos, logging, glassfish, logback

我刚刚开始使用 logback 来记录我在 glassfish3 AS 上运行的 Java 项目，我注意到一些奇怪的事情。这串代码

```
LOG.error("Вычисление {} уже произведено.", calc); 
```

如果我在 Windows 上运行我的应用程序，则会生成正常的预期输出。但是，如果我在 Mac 上使用相同的配置，我会使用问号而不是单词，如下所示：

```
15:37:29.083 ERROR r.g.g.c.TotalNachController - ?????????? [id=8871] ??? ???????????. 
```

我的 logback 配置是：

```
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>../logs/logback.log</file>
    <encoder>
        <pattern>%d{HH:mm:ss.SSS} %-5level %logger{35} - %msg%n</pattern>
    </encoder>
</appender> 
```

有人可以告诉我，我做错了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T14:09:01.690

尝试为编码器定义字符集：

```
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>../logs/logback.log</file>
    <encoder>
        <charset>utf-8</charset>
        <pattern>%d{HH:mm:ss.SSS} %-5level %logger{35} - %msg%n</pattern>
    </encoder>
</appender> 
```

遗憾的是它没有在文档中描述，但您始终可以在源代码中查找属性。Specyfing **<encoder>**实例化 PatternLayoutEncoder。向上到它的父**LayoutWrappingEncoder**你可以找到方法**setCharset()**。[指定时使用它，如您在http://logback.qos.ch/xref/ch/qos/logback/core/encoder/LayoutWrappingEncoder.html#120](http://logback.qos.ch/xref/ch/qos/logback/core/encoder/LayoutWrappingEncoder.html#120)中所见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:25:17.757

您需要检查使用的文本编辑器是否支持您的字符集。此外，使用的终端也可能会影响显示的字符。

我建议使用应支持您的字符集的应用程序中`more`的`less`UNIX 命令`Terminal`来验证字符是否打印正常。

# iphone - 如何在 Iphone (Titanium Studio) 中使用 Flurry Analytics

> ID：13195042
> 
> 赞同：1
> 
> 时间：2012-11-02T12:14:37.340
> 
> 标签：iphone, titanium-mobile

我是 Flury 分析的新手。需要在我的 Iphone 应用程序中添加 Flury 分析。我没有找到任何网站来解释钛 Iphone 的 Flurry 分析。

如果有人已经这样做了..请帮助我..

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:55:34.793

我为苹果和安卓产品找到[了 appcelerator-flurry-module-for-iphone-ipad-and-android](http://www.softgravity.com/articles/blog/7-appcelerator-flurry-module-for-iphone-ipad-and-android)。

这是[github 上的 Titan-android 的 Flurry](https://github.com/aaronksaunders/titanium_flurry/blob/master/android/dist/sg.flurry-android-2.0.zip)模块。

# linux - 如何获取较旧的 Chrome Dev（不稳定）或 Beta 版本？

> ID：13195044
> 
> 赞同：2
> 
> 时间：2012-11-02T12:14:39.420
> 
> 标签：linux, google-chrome, beta

> **可能重复：**
> [下载适用于 Linux 的旧版 Google Chrome](https://stackoverflow.com/questions/11408325/download-older-versions-of-google-chrome-for-linux)

我需要一个旧版本的 Chrome Dev 或 Beta 的项目，因为一些代码已经损坏，在早期版本中工作。（代码仅用于演示）

所以要让演示运行，我需要旧版本的 chrome dev 或 beta 版本。

有人知道他们是否是 Linux (.deb) 的预构建版本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:10:01.970

尝试以下位置

*   [Ubuntu 更新](http://www.ubuntuupdates.org/pm/google-chrome-stable)
*   [铬每日 PPA](http://ppa.launchpad.net/chromium-daily/)
*   [Debian Chromium 快照](http://snapshot.debian.org/package/chromium-browser/)

或者，如果可以接受使用 Chromium 而不是 Chrome，则按照[Chromium How to Get the Code的说明获取源代码，然后使用位于](http://dev.chromium.org/developers/how-tos/get-the-code)[Ubuntu Chromium Build](https://wiki.ubuntu.com/Chromium/Build)的说明构建到 deb 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:13:47.353

至少有一些 deb 包版本（4、10、11，...）可在

[http://www.afterdawn.com/software/network/browsers/google_chrome_linux.cfm/v4_0_249_43_beta#all_versions](http://www.afterdawn.com/software/network/browsers/google_chrome_linux.cfm/v4_0_249_43_beta#all_versions)

不过，我不确定是否存在一些未满足的依赖关系。

# c# - 从 FTP 服务器下载文件：不支持给定路径的格式

> ID：13195045
> 
> 赞同：-1
> 
> 时间：2012-11-02T12:14:40.933
> 
> 标签：c#

我已经编写了这段代码来从 FTP 服务器下载文件，但它显示了不支持给定路径格式的错误消息。

```
 WebClient web = new WebClient();
 byte[] filedata = web.DownloadData("ftp://localhost/images/" 
                                    + "/" + "aaaasa.txt");
 FileStream file = File.Create("ftp://localhost/images/"+"/"+"aaaasa.txt");
 file.Write(filedata, 0, filedata.Length);
 file.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:16:55.940

网址中的双斜杠看起来很可疑。

例如：

```
"ftp://localhost/images/"+"/"+"aaaasa.txt" 
```

给

```
ftp://localhost/images//aaaasa.txt 
```

这是你的意思吗？

也`File.Create`仅适用于本地文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:35:44.180

为此，您必须使用[FtpWebRequest 。](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)跟随链接。“示例”部分中有许多有用的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:18:42.317

除了其他人所说的关于您的FTP路径中的双斜杠（“//”），请注意本地文件不能包含协议：

```
File.Create("ftp://localhost/images/"+"/"+"aaaasa.txt") 
```

那是行不通的。请提供一个本地文件名，如下例所示：

```
FileStream file = File.Create(@"C:\Temp\aaaasa.txt");
file.Write(filedata, 0, filedata.Length);
file.Close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:19:05.187

我认为，您遇到的问题是由于您现在写的“/”太多而导致您给出的路径不正确：

```
web.DownloadData("ftp://localhost/images/" + "/" + "aaaasa.txt") 
```

结果是“ftp://localhost/images//aaaasa.txt”

如果您删除+“/”，我认为您可能会没事。
这也适用于 file.create 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T12:19:54.427

摆脱双斜线。此外，File 类适用于本地文件系统，这似乎是您尝试将数据写入的内容。为什么你在那个路径中有 ftp://？

# javascript - 从页面顶部滚动 100px 后显示 div

> ID：13195048
> 
> 赞同：16
> 
> 时间：2012-11-02T12:14:48.020
> 
> 标签：javascript, jquery, html

我找到了这个，但它在页面底部之前 100 像素处执行。我需要它距离页面顶部 100 像素。我知道如何实现它，我已经完成了其他 jquery 动画，只是不需要在这个动画中。

```
$(window).scroll(function(){
  if($(window).scrollTop() + 100 > $(document).height() - $(window).height() ){

    alert("at bottom");

  }
}); 
```

而且，我需要知道如何扭转这一点，这样当用户在 100px 之前向上滚动时，div 就会消失。

这将用于导航栏。

Edit2> 这也有效：

```
$(window).scroll(function(){
  if($(window).scrollTop() > 100){
      $("#div").fadeIn("slow");
  }
});
$(window).scroll(function(){
  if($(window).scrollTop() < 100){
      $("#div").fadeOut("fast");
  }
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-02T12:16:17.610

试试这个：

```
$(window).scroll(function() {
    if ($(window).scrollTop() > 100) {
        // > 100px from top - show div
    }
    else {
        // <= 100px from top - hide div
    }
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-02T12:42:03.137

试试这个：

```
var menu = $("nav");
$(window).scroll(function(){
  //more then or equals to
  if($(window).scrollTop() >= 100 ){
       menu.show();

  //less then 100px from top
  } else {
     menu.hide();

  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-12T14:42:44.767

我建议这样做：

```
$("#divname").hide();
$(window).scroll(function() {
    if ($(window).scrollTop() > 100) {
        $("#divname").fadeIn("slow");
    }
    else {
        $("#divname").fadeOut("fast");
    }
}); 
```

现在，当您访问您的页面时，该 div 已被隐藏。

没有这个：

```
$("#divname").hide() 
```

它会显示然后执行淡出。这不是你想要的。

# visual-studio-2010 - 无法生成数据合约代码

> ID：13195052
> 
> 赞同：1
> 
> 时间：2012-11-02T12:14:59.313
> 
> 标签：visual-studio-2010, xsd, wscf.blue

这是我尝试生成的代码示例：

```
<xs:simpleType name="IVL">
    <xs:restriction base="xs:duration"/>
</xs:simpleType>

<xs:complexType name="SF">
    <xs:attribute name="varde" type="xs:boolean"/>
</xs:complexType> 
```

生成了复杂类型，但省略了简单类型。

我是否缺少设置或其他东西，或者 WSCF.Blue 不能处理简单类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:14:35.363

我不知道任何常用的 XSD 到代码的绑定方法在 .NET 上会为简单类型生成类，除非 XSD simpleTypes 使用枚举方面受到限制。

[这篇文章](http://msdn.microsoft.com/en-us/library/vstudio/ms733112%28v=vs.100%29.aspx)几乎代表了 WSCF，至少在类型/基元映射领域也是如此。

只是为了琐事，JAXB - 一种将 XML 绑定到 Java 类的基于 Java 的方法 - 内置了这个选项（即，即使为简单类型也可以生成类）。

# android - 应用批处理操作后获取 id(s)

> ID：13195057
> 
> 赞同：2
> 
> 时间：2012-11-02T12:15:06.473
> 
> 标签：android, android-contentprovider, bulkinsert, android-sqlite

我在我的提供者上应用了一批 ContentProviderOperations：

```
ContentProviderResult[] result = resolver.applyBatch(...) 
```

一切都按预期工作，数据被插入到数据库中，但是如果我想提取 id(s)，则应该是 id 的 uri 的最后一个元素始终为空。

这是因为我已将表的 _id 设置为自动递增（换句话说，如果我不自动递增 id 并用我的代码中的手动 uid 填充它，它会起作用吗）。

如果没有，谁能告诉我是什么导致了这种行为。

**更新**：这是创建表的字符串：

```
 private static final String CREATE_TABLE_WORKFLOWSTATES =
        "CREATE TABLE " + Tables.WORKFLOWSTATES + " (" 
        + BaseColumns._ID + " INTEGER PRIMARY KEY AUTOINCREMENT,"
        + WorkflowStatesColumns.NAME + " TEXT NOT NULL,"
        + "UNIQUE ("+ WorkflowStatesColumns.NAME + ") ON CONFLICT IGNORE)"; 
```

如果我查看表格，我可以看到列 _ **id**和**name**，可见的插入数据表明自动增量工作正常。

**更新 2：**这就是我构建 ContentProviderOperation 的方式：

这是我的带有 ContentProviderOperations 的 ArrayList（CollectionUtils 是一个自定义类，用于实例化 Arraylist）：

```
ArrayList<ContentProviderOperation> batch = CollectionUtils.newArrayList(); 
```

这是实际操作：

```
batch.add(ContentProviderOperation
    .newInsert(InvoiceContract.addCallerIsSyncAdapterParameter(WorkflowStates.CONTENT_URI))
    .withValue(WorkflowStates.NAME, task.getWFS()).build()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:45:04.483

在插入的情况下（我猜你在数据库中插入一行），`result[i].uri`包含新插入行的 URI，其中 i 是操作数组中相应操作的索引。尝试打印此 URI，您将查看它是否对应于真实 id。

如果您的操作之一是 UPDATE 或 DELETE，则相应的结果 URI 将为空，但`result[i].count`将包含更新/删除的行数。

**更新**

我想问题是您在 NAME 上有一个唯一索引。也许，您已经插入了同名的行？

**更新2**

问题是 ContentProvider 中的插入函数没有正确返回 id。

# javascript - 这个 javascript 语法在做什么？

> ID：13195058
> 
> 赞同：0
> 
> 时间：2012-11-02T12:15:09.213
> 
> 标签：javascript

我无法在我的 java 脚本代码中识别出这种语法实际上是做什么的，你能帮我解决这个问题吗？

```
var bal=Array(2, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:17:07.903

`bal`这只是创建了一个名称为和两个元素的数组：`2`和`1`。

这将与

```
 var bal = [ 2, 1 ]; 
```

如果您将多个参数传递给`Array`构造函数，则这些参数将被解释为创建的数组的元素。

另一方面，单个参数指定数组的大小。

有关更多信息，请查看[相应的 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Syntax)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:18:20.167

`var bal=Array(2, 1);`是以下的简写：

```
var bal = new Array(); 
bal[0]=2;       
bal[1]=1; 
```

因此它创建了一个包含 2 个整数对象的数组，其值为`2`& `1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:22:13.733

它将创建一个 javascript 的一维数组对象。所以如果你想访问数组的第一个元素 iebal[0] 会分别给你 2 和。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:20:18.183

声明一个包含值 2 和 1 的变量数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T12:18:28.280

这是`Array`使用参数 = [2, 1] 调用函数。这本质上等同于为变量分配参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T12:19:10.770

`Array(2,1)`创建一个包含两个成员的数组，整数 2 和 1。

需要注意的是，这种数组声明语法无法声明具有单个元素的数组。那是：

```
Array(5); 
```

创建一个长度为 5 且成员未定义的数组。请改用`[2,1]`语法，因为它的行为一致。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T12:22:33.280

根据[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Array_instances)：

> 使用给定元素初始化 JavaScript 数组，除非将单个参数传递给 Array 构造函数并且该参数是数字。（见下文。）请注意，这种特殊情况仅适用于使用 Array 构造函数创建的 JavaScript 数组，不适用于使用括号语法创建的数组字面量。

所以你的代码相当于这个：

```
var bal = new Array(); 
bal[0] = 2;
bal[1] = 1; 
```

但[首选的符号](https://stackoverflow.com/questions/2280285/what-does-mean-in-javascript/2280295#2280295)是这样的：

```
var bal = [2, 1]; 
```

# jquery - 为什么 jQuery .one 没有在 Internet Explorer 中触发？

> ID：13195059
> 
> 赞同：1
> 
> 时间：2012-11-02T12:15:16.827
> 
> 标签：jquery, internet-explorer

这在所有其他浏览器中都可以正常工作，但在 Internet Explorer 中不起作用，有什么想法吗？

```
jQuery(document).ready(function () {
    jQuery('img').one('error', function() { not being run });
}); 
```

# zend-framework - 通过 Zend Rest 服务获取发送数据的进度

> ID：13195061
> 
> 赞同：0
> 
> 时间：2012-11-02T12:15:23.753
> 
> 标签：zend-framework, rest, service, frameworks

我有以下情况。我们正在使用**Zend Framework创建一个 Web 应用程序，该应用程序通过****REST 服务**与其数据库进行通信。我面临的问题是，例如，当用户尝试上传**大视频文件**时，该服务需要一些时间（有时是几分钟）来接收请求（这也是发送使用**base64_encode** PHP 函数编码的视频文件.) 并返回成功保存或错误的响应。

我的想法是跟踪发送了多少数据并向用户显示 JS 进度条，这在这些情况下将很有用。有谁知道，我如何跟踪通过服务发送的数据量，并在此基础上显示进度条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:52:04.860

Zend 提供了可能与一些 javascript/jquery 客户端配对的进度条功能。

您会很容易地找到一些像这样的示例实现：

[https://github.com/marcinwol/zfupload](https://github.com/marcinwol/zfupload)

但是，我不认为 REST 服务是上传视频的最佳解决方案，因为 base64 编码会使文件更大且上传速度更慢。

查看可能更适合您需求的**Zend_File_Transfer ：**

[http://framework.zend.com/manual/1.12/en/zend.file.transfer.introduction.html](http://framework.zend.com/manual/1.12/en/zend.file.transfer.introduction.html)

# php - 我的用于检测包含多个单词的字符串的 PCRE 正则表达式模式不起作用

> ID：13195062
> 
> 赞同：0
> 
> 时间：2012-11-02T12:15:28.963
> 
> 标签：php, regex, string

我只想检测以下字符串：

```
pets ok
pets yes
pets allowed
pets accepted
pets is/are allowed
pets is/are accepted
pets will be considered
pets will considered
pets is/are considered
pet friendly 
```

反过来也是一样的：

```
ok pets
yes pets
... 
```

*（同上，只是“pets”/“pet”从头到尾）*

我想不通。

请，如果你能帮助我改进我目前显然不起作用的模式：

```
/\\b(pet(?:s)?\\s[negotiable|ok|o\\.k|friendly|accept|allow|possible]+|[ok|yes|accept]+\\spet(?:s)?|pet(?:s)?\\s[will|will\\sbe]+\\s[consider|allow|accept|possible]+)\\b/i" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:23:57.840

尝试

```
"/\\bpets?\\s[ok|is\\/are allowed]/i" 
```

和类似的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:03:09.133

这是一个超严格的正则表达式，它只匹配您列出的示例（并且没有完成列出）：

```
\b(?:(?:pets (?:ok|yes|(?:(?:is\/are )?(?:allowed|accepted))|(?:(?:will(?: be)?|is\/are) considered)))|(?:(?:ok|yes|(?:(?:is\/are )?(?:allowed|accepted))|(?:(?:will(?: be)?|is\/are) considered))) pets|pet friendly|friendly pet)\b​ 
```

# [在 Rubular 上查看](http://rubular.com/r/wNxkXpOX1W)

我基本上将其分为“允许/接受”的变体和“考虑”的变体。然后我只是以相反的方式复制它。

最人类可读的形式仍然是：

```
\b(?:pets ok|pets yes|pets allowed|pets accepted|pets is\/are allowed|pets is\/are accepted|pets will be considered|pets will considered|pets is\/are considered|pet friendly|ok pets|yes pets|allowed pets|is\/are allowed pets|accepted pets|is\/are accepted pets|will be considered pets|will considered pets|is\/are considered pets|friendly pet)\b 
```

此外，在您的正则表达式中，您似乎使用字符类 ( `[ ]`) 来分隔单词，而实际上您应该使用非捕获组 ( `(?: )`)

# jquery - 服务器不支持 JSONP 时的跨域请求

> ID：13195063
> 
> 赞同：1
> 
> 时间：2012-11-02T12:15:33.753
> 
> 标签：jquery, json, get, cross-domain, jsonp

我试图解决这个问题几个小时。我有一个[wikia 网站](http://leagueoflegends.wikia.com)，我想从中获取东西，但它只支持 json，甚至不支持 xml 或 jsonp。

我什么都试过了。如果我将其称为 jsonp，我的客户端会返回错误“SyntaxError: invalid label”，因为服务器根本不会将其返回为 jsonp 或 json。如果我添加“回调=？” 到 url 并将其保留为 json，返回相同的错误。

这是我的代码的一部分（我修改了太多次，到目前为止没有任何效果）

```
$('#searchBox').keydown(function() {
    $.ajax({
        type: "GET",
        url: "http://leagueoflegends.wikia.com/index.php?callback=?",
        data: {
            action: "ajax",
            rs: "getLinkSuggest",
            format: "json",
            query: "jungl"
        },
        success: function(json){
            alert("Success");
        },
        error: function(){
            alert("Error");
        },
        dataType: "json"
    });
}); 
```

**更新** 这是我的解决方案，它有效：（使用 YQL）

```
 var url = "http://leagueoflegends.wikia.com/index.php?action=ajax&rs=getLinkSuggest&format=json&query=jung"
    url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + url + '"') + '&format=xml';
    $.ajax({
        type: "GET",
        url: url,
        success: function(text){
            text = text.split("<p>")[1].split("</p>")[0];
            alert(text);
        },
        error: function(){
            alert("Error");
        },
        dataType: "text"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:19:34.733

如果远程服务器不支持 JSONP 或不允许 CORS，那么您必须在服务器端反弹请求以绕过同源规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:19:13.723

如果没有 JSONP 或 CORS，您将无法进行跨域 AJAX。

不过，您可以在后端编写一个 HTTP 代理来在后端而不是用户（= js）中进行请求。

# android - Android：将阴影应用到 ImageView 的底部

> ID：13195068
> 
> 赞同：0
> 
> 时间：2012-11-02T12:15:57.143
> 
> 标签：android, android-layout

我想在 ImageView 的引导处应用阴影，如下图所示。

在android中实现这一点的任何技巧？

![在此处输入图像描述](../Images/d857a0c74506b6cd173f77f09ca8b4b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:18:53.640

我见过的最简单的方法是创建一个只是投影的图像，然后将其设置为图像容器的背景。

[这](https://stackoverflow.com/questions/3693234/custom-imageview-with-drop-shadow)是一个关于如何做到这一点的非常棒的 SO 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:26:09.113

**不**，你必须创建一个有阴影和边框的图像。所以，在那之后你必须`set padding`对你的图像，所以它看起来像这个框架。

# jquery - 如何使 div 弹出而不是'中的选项? 我需要实现以下控件：组合框也必须是可编辑的；我需要下拉滑块而不是选项列表。是否有任何库/代码片段来实现这种功能？谢谢。我不确定是否存在具有相同功能的任何库或代码片段，但是，如果我是你并且我找不到任何东西，那么我会制作一个用于输入数字的文本框，后跟一个箭头图标，就像您的屏幕截图一样。然后在 $("#arrow").click(... 我会切换 Slider 以显示和消失。我想应该可以。

> ID：13195072
> 
> 赞同：1
> 
> 时间：2012-11-02T12:16:14.537
> 
> 标签：jquery, html, jquery-ui, controls

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:27:12.687

我不确定是否存在具有相同功能的任何库或代码片段，但是，如果我是你并且我找不到任何东西，那么我会做一个`textbox`用于输入数字，后跟一个`arrow`图标，喜欢你的截图。然后`$("#arrow").click(...`我会切换`Slider`出现和消失。我想这应该可行。

# licensing - 为我的有损图像压缩算法选择什么许可证？

> ID：13195077
> 
> 赞同：0
> 
> 时间：2012-11-02T12:16:33.710
> 
> 标签：licensing, image-compression

我正在尝试以良好的比率实现有损图像压缩算法，并且（我希望）jpeg 具有的伪像更少。我计划首先发布编码器/解码器工具。我听说 jpeg2000 的使用存在一些与许可和专利相关的问题。所以我想用我的算法避免这些问题（我提到 jpeg2000 只是作为许可证问题的例子，我的算法与 jpeg2000 有很大不同）。我也听说过使用 GPL 许可的一些东西的问题。所以主要的问题是关于选择什么许可证来让每个人都可以访问我的作品，并禁止一些坏人对它做坏事以使其不那么容易被访问。我也想知道 GPL 对图像压缩算法有什么缺点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:31:52.713

您可以选择一系列许可证 - 有关详细信息，请参阅[Open Source Initiative](http://opensource.org/)站点。你选择哪一种取决于你对开源的感觉与你的软件尽可能广泛地采用的程度。

[GPL](http://www.gnu.org/licenses/gpl.html)许可证可确保您库的所有用户发布他们对您的代码所做的任何更改。除了少数例外，它还迫使他们免费提供所有产品源代码。这意味着 GPL 代码可能对某些商业产品没有吸引力，因此如果您想鼓励最大限度地采用您的库，则 GPL 许可证可能并不理想。

在光谱的另一端，[MIT](http://opensource.org/licenses/MIT)许可证非常自由，有效地允许用户对您的库做任何他们想做的事情。它适用于开源和商业项目，因此是扩大图书馆用户群的不错选择。您库的用户没有义务发布他们对您的库所做的任何更改，因此此许可证可能无法通过您的“坏人”测试。

一个折衷的选择可能是[LGPL](http://www.gnu.org/licenses/lgpl-2.1.html)许可证。用户有义务发布他们对您的库所做的任何更改，但通常可以将他们的代码保密。（这通常适用于桌面应用程序；对于嵌入式或某些移动应用程序来说，这样做要困难得多）。

# html - 如何删除html中单击的元素周围的虚线

> ID：13195081
> 
> 赞同：118
> 
> 时间：2012-11-02T12:16:44.017
> 
> 标签：html, css

我发现如果`a`页面中有一个链接没有链接到新页面，那么当用户点击它时，元素周围会有一条虚线，只有当用户点击页面中的其他任何东西时它才会消失，如何删除这个？

例子：

![在此处输入图像描述](../Images/b0ca94a384f9ea00f909c0cdf76a8f3e.png)

注意元素周围的虚线`Section 2`。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-11-02T12:17:35.563

用于`outline:none`锚定标签类

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-02T12:26:26.990

就像@Lo Juego 说的，阅读文章

```
a, a:active, a:focus {
   outline: none;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-02T12:20:03.240

```
a {
    outline: 0;
  } 
```

但在更改之前阅读此内容：

[去除虚线轮廓](http://css-tricks.com/removing-the-dotted-outline/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-10T04:40:02.137

尝试使用`!important`in `css`。

```
a {
  outline:none !important;
}
// it is `very important` that there is `no` `outline` for the `anchor` tag.  Thanks! 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-07-15T19:31:46.427

删除所有虚线轮廓，包括`bootstrap`主题中的轮廓。

```
a, a:active, a:focus, 
button, button:focus, button:active, 
.btn, .btn:focus, .btn:active:focus, .btn.active:focus, .btn.focus, .btn.focus:active, .btn.active.focus {
    outline: none;
    outline: 0;
}

input::-moz-focus-inner {
    border: 0;
} 
```

> 注意：您应该在主 css 之前添加引导 css 的链接 href，因此引导程序不会覆盖您的样式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-27T16:44:16.023

删除`outline`会损害网站的可访问性。因此我只是将其留在那里但使其不可见。

```
a {
   outline: transparent;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-26T17:17:12.957

就我而言，它是一个按钮，显然，对于按钮，这只是 Firefox 中的一个问题。解决方案在[这里](https://stackoverflow.com/a/199319/1599699)找到：

```
button::-moz-focus-inner {
  border: 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-28T18:56:18.180

它的简单尝试下面的代码 -

```
a{
outline: medium none !important;
} 
```

如果开心干杯！再会

# qt - qt sdk 1.2.1 不能再下载了

> ID：13195083
> 
> 赞同：4
> 
> 时间：2012-11-02T12:16:48.947
> 
> 标签：qt, qt4

似乎无法从 [http://qt-project.org/downloads](http://qt-project.org/downloads)下载 qt sdk 版本 当我尝试下载 64 位 linux 离线变体时，我将被重定向到

[http://www.developer.nokia.com/dp?uri=http%3A%2F%2Fsw.nokia.com%2Fid%2F14b2039c-0e1f-4774-a4f2-9aa60b6d5313%2FQt_SDK_Lin64_offline](http://www.developer.nokia.com/dp?uri=http%3A%2F%2Fsw.nokia.com%2Fid%2F14b2039c-0e1f-4774-a4f2-9aa60b6d5313%2FQt_SDK_Lin64_offline)

我成为那里的会员，但我无法下载 sdk。有谁知道其他地方可以下载 qt sdk 1.2.1 for linux（或 windows）

# algorithm - 旅行推销员（只需要访问节点的子集）：窃听

> ID：13195089
> 
> 赞同：2
> 
> 时间：2012-11-02T12:17:17.323
> 
> 标签：algorithm, graph-theory, shortest-path

我需要有关旅行推销员问题代码的帮助。它被窃听了......我知道，因为它是一项学校作业并且有测试用例。就这样吧。

给定一个连接图，我需要访问一个节点子集。如何计算最短路径？

![在此处输入图像描述](../Images/f0f3f9619bf37fdea29a6e3e927f91b6.png)

例如，请参阅上图。我需要从 0 开始并访问一些/所有节点然后回到零。在这个过程中，我需要计算最短路径。

假设我需要访问所有节点，我将从`0 -> 1 -> 2 -> 3 -> 0`=开始`20 + 30 + 12 + 35 = 97`。假设现在我只需要访问节点 2，我将从`0 -> 3 -> 2 -> 3 -> 0`它给出最短路径 94（如果它可以给出最短路径，我可以访问我不必访问的节点）。

基本上，我做了：

1.  计算任意 2 对所需节点与源 (0) 之间的最短路径。这给了我一个最短路径的 2D 表，例如（我使用了 dijkstra 的）：

    ```
     |  0  1  2  3
    --+--------------
    0 | 
    1 |
    2 | 
    3 | 
    ```

2.  现在，我修改了购物推销员算法（又名 Floyd Warshall 或 APSP）以使用此表。当前的 Java 源代码（TSP 和 dijkstra 的）如下所示：

    ```
    int TSP(int source, int visited) {
       if (visited == (int)(Math.pow(2, K)-1)) { // all required visited
        return sssp.get(source).get(0); // return to source (0)
      } else if (memo.containsKey(source) && memo.get(source).containsKey(visited)) {
        return memo.get(source).get(visited);
      } else {
        int item;
        if (!memo.containsKey(source)) {
          memo.put(source, new HashMap<Integer, Integer>());
        }
        memo.get(source).put(visited, 1000000);
        for (int v = 0; v < K; v++) {
          item = shoppingList[v];
          if (!hasVisited(visited, item)) {
            memo.get(source).put(visited, Math.min(
              memo.get(source).get(visited),
              sssp.get(source).get(item) + TSP(item, visit(visited, v))
            ));
          }
        }
        return memo.get(source).get(visited);
      }
    }

    int dijkstra(int src, int dest) {
      PriorityQueue<IntegerPair> PQ = new PriorityQueue<IntegerPair>();
      HashMap<Integer, Integer> dist = new HashMap<Integer, Integer>(); // shortest known dist from {src} to {node}
      // init shortest known distance
      for (int i = 0; i < N+1; i++) {
        if (i != src) {
          dist.put(i, Integer.MAX_VALUE); // dist to any {i} is big(unknown) by default
        } else {
          dist.put(src, 0); // dist to {src} is always 0
        }
      }
      IntegerPair node;
      int nodeDist;
      int nodeIndex;

      PQ.offer(new IntegerPair(0, src)); 
      while (PQ.size() > 0) {
        node = PQ.poll();
        nodeDist = node.first();
        nodeIndex = node.second();

        if (nodeDist == dist.get(nodeIndex)) {
          // process out going edges
          for (int v = 0; v < N+1; v++) { // since its a complete graph, process all edges
            if (v != nodeIndex) { // except curr node
              if (dist.get(v) > dist.get(nodeIndex) + T[nodeIndex][v]) { // relax if possible
                dist.put(v, dist.get(nodeIndex) + T[nodeIndex][v]);
                PQ.offer(new IntegerPair(dist.get(v), v));
              }
            }
          }
        }
      }
      return dist.get(dest);
    } 
    ```

    1.  `visited`用作位掩码以指示是否已访问节点
    2.  `sssp`是一个`HashMap<Integer, HashMap<Integer, Integer>>`其中第一个哈希图的键是源节点，第二个哈希图的键是目标。所以它基本上代表了你在第 1 点看到的二维表。
    3.  `memo`给定访问的位图，这正是我在动态编程中用作先前计算的节点最短路径的“缓存”。

完整来源： http: **[//pastie.org/5171509](http://pastie.org/5171509)**

通过的测试用例：

```
1

3 3
1 2 3
0 20 51 35
20 0 30 34
51 30 0 12  
35 34 12 0 
```

其中第一行是测试用例的数量。第三行（`3 3`）。第一个`3`是节点数，第二个 3 是所需节点数。第 4 行是所需节点的列表。然后剩下的就是边权重表。

失败的测试用例是：

```
9 9
1 2 3 4 5 6 7 8 9
0 42 360 335 188 170 725 479 359 206
42 0 402 377 146 212 767 521 401 248
360 402 0 573 548 190 392 488 490 154
335 377 573 0 293 383 422 717 683 419
188 146 548 293 0 358 715 667 539 394
170 212 190 383 358 0 582 370 300 36
725 767 392 422 715 582 0 880 704 546
479 521 488 717 667 370 880 0 323 334
359 401 490 683 539 300 704 323 0 336
206 248 154 419 394 36 546 334 336 0 
```

我得到了 3995，但答案是 2537 ......对不起，我知道这很难调试......我有同样的问题，测试用例太大了......至少对于人类来说......所以我正在创建更小的测试用例进行测试，但它们似乎通过了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:46:02.103

也许不是一个完整的答案，但我认为它至少指向正确的方向：您的代码似乎给出了遵循路径 0->1->2->...->N->0 的结果。似乎没有发生真正的优化。

我稍微修改了你的代码以获得一个小的失败测试用例：

```
int[][]mat=new int[N+1][N+1];
//original
//mat[0]=new int[]{0,20,51,35};
//mat[1]=new int[]{20,0,30,34};
//mat[2]=new int[]{51,30,0,12};
//mat[3]=new int[]{35,34,12,0};
//switched order of nodes, node 2 is now node 1
mat[0]=new int[]{0,51,20,35};
mat[1]=new int[]{51,0,30,12};
mat[2]=new int[]{20,30,0,34};
mat[3]=new int[]{35,12,34,0}; 
```

这会产生 146 作为最佳路径，表明它遵循路径 0->1->2->3->0（47+30+34+35，47 是使用节点 4 的 0 到 1 的最短路径）（所有节点号与我的订单开关有关）。

**编辑**：我又快速浏览了一下，找到了罪魁祸首。您可以`if (!hasVisited(visited, item))`检查您是否已经访问过 node `item`。但是，visited 是由 构建的`visit(visited, v)`，其中`v`是 的索引`shoppinglist`。`item =shoppinglist[v]`但是如果您要移动访问的向量，则应该使用相同的方法。

你应该使用`if (!hasVisited(visited, v))`而不是`if (!hasVisited(visited, item))`

在不相关的说明中，我不确定找到最短路径的第一步是否必要或会影响您的结果。如果从 A 到 B 的直接链接比通过其他节点（例如 C）的时间长，则它在距离表中被替换。如果您随后在最终解决方案中使用该链接从 A 到 B，那么您实际上将通过 C，它已经在您的路径中（因为该路径是完整的 TSP 解决方案）。如果一个节点只能访问一次，那么这可能是一个问题。

# javascript - 菜单点击更改精灵和颜色

> ID：13195093
> 
> 赞同：0
> 
> 时间：2012-11-02T12:17:38.637
> 
> 标签：javascript, jquery, html, css

我正在尝试更改我的菜单图标和点击时的文本颜色。

在我的菜单中每个 `<li>`元素都有一个超链接标签，它下面有 2 个子元素，`<span class="icon">`我`<div class="icon">`想要实现的是单击该类必须更改为

`<span class="icon active">` `<div class="icon active">`并且当单击下一个菜单项时，必须删除此活动类

[JS菲德尔](http://jsfiddle.net/daneuchar/VLXxR/)

**代码**

```
<div id="grid">
    <div id="menuBase">
      <div id="menu">
      <ul>
        <li><a href="#Page1" ><span class="icon" id="home"></span><div class="icon" id="mtext">Menu1&nbsp;&nbsp;</div></a></li>
        <li><a href="#aboutPage"><span class="icon" id="about"></span><div class="icon" id="mtext">Menu2</div></a></li>
        <li><a href=""><span class="icon" id="soln"></span><div class="icon" id="mtext">Menu 3</div></a></li>
        <li><a href="#"><span class="icon" id="lab"></span><div class="icon" id="mtext">Menu4</div></a></li>
        <li><a href="#"><span class="icon" id="port"></span><div class="icon" id="mtext">Menu5</div></a></li>
        <li><a href="#"><span class="icon" id="contact"></span><div class="icon" id="mtext">Menu6</div ></a></li>
      </ul>
      </div>
    </div>
</div>
​ 
```

**CSS 代码**

```
#grid{
    width: 750px;
    margin:0 auto;   
}
#menuBase{
    background: #fff;
    width:100%;
    height:44px;
    -webkit-border-radius: 90px 90px 0 0;
    -moz-border-radius: 90px 90px 0 0;
    border-radius: 90px 90px 0 0;
    border-right:2px solid #fff;

}

#menu{
    background: #E1E1E3;
    width:100%;
    height:100%;
    -webkit-border-radius: 99px 99px 0 0;
    -moz-border-radius: 99px 99px 0 0;
    border-radius: 99px 99px 0 0;
    border-right: 1px #fff solid;
    border: 2px    #ccc solid;
    border-right: none;
    border-bottom: none;
}

#hrhead{
    background: #cccccc;
    height: 3px;
    -webkit-margin-before:0;
    -webkit-margin-after:0;
    border-bottom: 1px #ffffff solid;
}

#hrfoot{
    background: #cccccc;
    height: 3px;
    -webkit-margin-before:0;
    -webkit-margin-after:0;
    border-top: 1px #ffffff solid;
}

#menu ul{
    float:left;
    width:100%;
    padding-left:43px;
    margin:0;
    list-style-type:none;
}

#menu li{
    display: block;
    float: left;
    width:40px;
    height: 25px;
    margin-right: 68px;
    margin-top: 11px;
}

#menu li:last-child{
    margin-right: 0px;
}

.icon{
    height:25px;
    width: 40px;
    display: block;
    color:#777777;
}

#mtext{
    height:27px;
    width: 80px;
    display: block;
    margin: 11px 0 0 -20px;
    text-align: center;

}
#menu li a{
    text-decoration:none;
}
#menu li a:hover #mtext{
    color:#DC0000;
}
#menu li a:hover .icon{
    background-position-y:24px;
}

#home{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

#about{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

#soln{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

#lab{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

#port{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

#contact{
    background: url(http://i47.tinypic.com/2nroe9k.png)0 0;
}

.active{
    background-position-y:24px !important;
    color:#DC0000 !important;
}
​ 
```

**Jquery [该死我迷路了]：**

```
$("#menu > ul > li > a").click(function(e){
    e.preventDefault(); 

});

​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:33:52.267

演示：http: [//jsfiddle.net/VLXxR/8/](http://jsfiddle.net/VLXxR/8/)

```
$("#menu > ul > li > a").click(function(e){
     e.preventDefault(); 
     $("#menu .icon").removeClass("active");
     $(this).children(".icon").addClass("active")

  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:26:36.587

你的js应该是这样的，[FIDDLE](http://jsfiddle.net/uWEwJ/)

```
 $("#menu > ul > li > a").click(function(e){
     e.preventDefault();
     $("#menu > ul > li > a > div,#menu > ul > li > a > span").removeClass('active');

     $('div',this).addClass('active');
     $('span',this).addClass('active');
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:22:21.630

演示：http: [//jsfiddle.net/VLXxR/7/](http://jsfiddle.net/VLXxR/7/)

```
 $("#menu > ul > li > a").click(function(e){
     e.preventDefault(); 
     $("#menu .icon").removeClass("active");
     $(this).find(".icon").addClass("active")

  }); 
```

查看 removeClass 的文档 - [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

# ruby-on-rails - 更改 rake 任务以在测试环境中工作

> ID：13195097
> 
> 赞同：2
> 
> 时间：2012-11-02T12:17:53.770
> 
> 标签：ruby-on-rails, testing, rake, fixtures

```
 namespace :fixtures do
    namespace :load do 
      task :prepare => :environment do
        ENV['FIXTURES_PATH'] = "spec/fixtures"
        ENV['RAILS_ENV'] ||= "test"
        puts ENV.inspect
        Rake::Task["db:fixtures:load"].invoke
      end
    end
  end 
```

我已将此添加到 ./lib/tasks 中的 special.rake 文件中，以使 rake db:fixtures:load 命令应用于 spec/fixtures 目录中的夹具，并应用于测试环境。

它不工作。我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:21:44.223

您需要重新连接到数据库。就像是

```
ActiveRecord::Base.establish_connection(ActiveRecord::Base.configurations["test"]) 
```

在环境已经加载后更改 ENV['RAILS_ENV'] 不会做任何事情。

如果您在更改 ENV 后加载环境任务，也许它也会起作用，但不确定：

```
 task :prepare do
    ENV['RAILS_ENV'] ||= "test"
    Rake::Task["environment"].invoke
    Rake::Task["db:fixtures:load"].invoke
  end 
```

# if-statement - 我的 if 语句总是返回 true

> ID：13195106
> 
> 赞同：0
> 
> 时间：2012-11-02T12:18:42.503
> 
> 标签：if-statement

```
 if ((x != A) || (x != a )|| ( x != B) || (x != b) || ( x != C) || (x != c) || (x != D) || (x != d) || ( x != F) || (x != f))
    {
    System.out.println("Points: -1");
     return true;
    }
    else
    {
    System.out.println("hi");
     return false;
    } 
```

出于某种原因，我无法让它返回除真实之外的任何其他内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:22:58.980

取前两个条件：`(x != A) || (x != a )`。

您在这里所说的是，`true`如果`x`不等于`A`或不返回，则返回`a`。

假设`x == A`，第一个条件将返回假，第二个条件将返回真。因此，您的整个 if 条件将返回 true。

同样对于`x == a`. 这里第一个条件产生`true`，if 条件也产生。

您可能的意思是使用`AND`or`&&`代替`OR`( `||`) 连接所有这些条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:25:05.500

```
if ((x != 'A') || (x != 'a' ) ....
          ^ missing quotes 
```

但即便如此，x 也可以是“A”或“a”，或者两者都不是。使用**OR评估，您将始终以****TRUE**结束，因为 x 将始终**不是**您正在测试的其他值之一。

做`(x != 'A') && (x != 'a' ) ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:48:43.957

看看这个小提琴[http://jsfiddle.net/CtCqe/2/](http://jsfiddle.net/CtCqe/2/)

使用正则表达式可能会更好，不确定用户的输入是否只是单个字符。

html

```
<div id="result">Result</div>
<input type='text'/>
<div id="pressed"></div> 
```

jQuery

```
$('input').on('change input', function(){

   var x = $(this).val();

if((x == 'A') || (x == 'a' )|| ( x == 'B') || (x == 'b') || ( x == 'C') || (x == 'c') || (x == 'D') || (x == 'd') || ( x == 'F') || (x == 'f')){
    $('#result').html('False');
    $(this).val('');
}else{
    $('#result').html('True');
    $(this).val('');
}

$('#pressed').html(x);

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:45:43.617

是的，这将永远是真的让我们只考虑你表达的一部分`((x != A) || (x != a ) ...`

如果 x=A，那么第一个陈述是假的，但另一个是真的，因为你有析取，所以你总是会得到真实的。

要获得错误，您需要 x=A 和 x=a，这可能有点不可能

# powershell - 如何使用 WMI 和 powershell 列出 IIS6 网站的所有虚拟目录？

> ID：13195107
> 
> 赞同：4
> 
> 时间：2012-11-02T12:18:42.643
> 
> 标签：powershell, iis-6, wmi

我看过这个问题[Getting all virtual directorys for a IIS6 web site using WMI](https://stackoverflow.com/questions/3575442/getting-all-virtual-directories-for-a-iis6-web-site-using-wmi)但它没有回答我的问题。

我可以获得网站列表，但不能获得其中的应用程序或虚拟目录。我试过以下。

```
Get-WmiObject  -class "IIsWebServerSetting" -namespace "root\microsoftiisv2" | select-object __SERVER, ServerComment, Name 
Get-WmiObject  -class "IIsWebVirtualDir" -namespace "root\microsoftiisv2" | select-object __SERVER, ServerComment, Name, Path, DefaultDoc
Get-WmiObject  -class "IIsWebVirtualDirSetting" -namespace "root\microsoftiisv2" | select-object __SERVER, ServerComment, Name, Path, DefaultDoc 
```

这些都不检索虚拟目录列表。

我可以在 metabase.xml 文件中看到虚拟目录

```
<IIsWebVirtualDir   Location ="/LM/W3SVC/1653786949/root/PBSNET2005/GUI"
        AccessFlags="AccessExecute | AccessRead | AccessScript"
        AppFriendlyName="ClientServicesGUI" 
```

我需要这个的原因是因为我想使用绿色/蓝色部署过程。要确定要更新哪个版本，我需要找出当前版本是什么。我将使用虚拟目录的物理路径来执行此操作。

有没有人有另一种方法来获取虚拟目录的物理路径？有没有人直接查询或更新过 metabase.xml 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:49:55.483

尝试这个：

```
gwmi -Namespace "root/MicrosoftIISv2" -Query "SELECT * FROM IIsWebVirtualDirSetting" | select name,path,AppFriendlyName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:26:36.977

您需要指定虚拟目录的路径。WMI 不返回文件夹树下方的虚拟目录。如果有人需要，这是 powershell 功能。

```
function Get-VirtualDirectoryPhysicalPathUsingWMI ([string]$server,[string]$siteName,[string]$vDirName,[string]$pathToVDir)
    {
        Invoke-Command $server -Script { param($siteName,$vDirName,$pathToVDir) 
            $iisWmiObj = Get-WmiObject -Namespace 'root\MicrosoftIISv2' -Class IISWebServerSetting -Filter "ServerComment = '${siteName}'"
            $objIIS = new-object System.DirectoryServices.DirectoryEntry("IIS://localhost/" + $iisWmiObj.Name + $pathToVDir )
            $directories = $objIIS.psbase.children
            $vDir = $directories.find($vDirName, "IIsWebVirtualDir")

            return $vDir.path
            } -Args $siteName,$vDirName,$pathToVDir

       #Get-VirtualDirectoryPhysicalPathUsingWMI  "pbsdevmaintws02" "Default Web Site" "GUI" "/Root/PBSNET2005"
    } 
```

# gcc - Matlab Kalman /usr/bin/ld：找不到-lstdc++

> ID：13195110
> 
> 赞同：26
> 
> 时间：2012-11-02T12:18:53.127
> 
> 标签：gcc, matlab-compiler

我正在关注帮助中的`Matlab`编码器`kalman`教程`Matlab`。使用`codegen`时出现如下错误：

> /usr/bin/ld: 找不到 -lstdc++
> 
> collect2: ld 返回 1 个退出状态

但是有`libstdc++.so.6`在`/lib/`和`/usr/lib`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-22T01:22:40.587

对于 Fedora 16 使用：

```
sudo yum install libstdc++-static 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-24T04:58:39.847

您可以将库软链接到正在寻找的名称

`ln -s /usr/lib/libstdc++.so.6 /usr/lib/libstdc++.so`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-08T16:51:34.137

**`sudo apt-get install g++-4.7`** 我为matlab做了它为我工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-14T16:02:12.780

如果您在**64 位 CentOS 7上编译****32 位**应用程序：

 **```
sudo yum install libstdc++-devel.i686 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-22T08:14:54.073

对于**CentOS**，请确保您已安装 gcc-c++ 软件包（它包括 libstdc++-devel 依赖项）：

```
sudo yum install gcc-c++ 
```**

# google-app-engine - pycrypto 开发服务器错误“来自 Crypto.Cipher 导入 blockalgo”

> ID：13195115
> 
> 赞同：0
> 
> 时间：2012-11-02T12:19:10.947
> 
> 标签：google-app-engine, encryption, cryptography, pycrypto

我已经安装了 pycrypto 2.6 版，我收到了这个错误

```
from Crypto.Cipher import blockalgo
ImportError: cannot import name blockalgo 
```

我已经阅读了很多帖子，但我无法解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:54:44.157

如果您根本无法从 Crypto.Cipher 导入任何内容，这可能是由于文件夹、加密和相应的鸡蛋信息，在站点包下使用小写“c”创建

```
/Library/Python/2.7/site-packages/crypto
/Library/Python/2.7/site-packages/crypto-1.0.0-py2.7.egg-info 
```

导入时使用相同案例时导入成功

```
from crypto.Cipher import AES 
```

或重命名文件夹

```
/Library/Python/2.7/site-packages/Crypto-1.0.0-py2.7.egg-info
/Library/Python/2.7/site-packages/Crypto 
```

我选择了后者，以与其他人保持一致。

我使用 Eclipse 并且能够使用上述解决方案之一克服这个问题。有时我们很容易忽略这些细节。这是一个很长的镜头，希望这有帮助！

# java - 具有缩放功能的 Java android ImageView

> ID：13195116
> 
> 赞同：0
> 
> 时间：2012-11-02T12:19:12.070
> 
> 标签：java, android, android-layout, zooming

我一直在寻找可以处理这个问题的视图。我想要的是允许用户放大/缩小图像。现在我找不到任何预先构建的解决方案，除了`WebView`. 有人可能会争辩说，谷歌实际上应该提供这个而不必求助于`WebView`（那个限制了布局的可能性）。我想拥有与 for 相同的内置功能`iPhones/iPads`。

所以问题是，有哪些用户构建的视图可以处理缩放图像？

我已经测试了 2 种不同的定制解决方案，但都没有按预期工作。一个设法重新调整大小，但一次只能在一个方向（水平或垂直），而另一个甚至不起作用。

更新：应该可以在 Android 2.3+ 中使用该解决方案。（大部分用户都在这个范围内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:21:32.257

有几个 Android 视图库可以处理您要查找的内容。

看看这些

[https://github.com/chrisbanes/PhotoView](https://github.com/chrisbanes/PhotoView)
[http://code.google.com/p/android-pinch/](http://code.google.com/p/android-pinch/)
[https://github.com/jasonpolites/gesture-imageview](https://github.com/jasonpolites/gesture-imageview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:09:17.443

几天前我发现了一个非常有趣的东西。我认为这是我见过的最好的。您可以通过双击、捏合、移动加速等进行缩放。

看看[这里](https://github.com/MikeOrtiz/TouchImageView)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:35:07.083

我用这个库取得了很好的效果：http: [//blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/](http://blog.sephiroth.it/2011/04/04/imageview-zoom-and-scroll/)

它不是完全替代 imageview，但它也适用于 Viewpager，其中 Viewpager 处理页面更改的水平滑动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:38:18.393

从 Android 3.0（API 级别 11）开始，您可以使用`setScaleX()`、`setScaleY()`、`setPivotX()`等`setPivotY()`或仅使用`setMatrix()`.

# mysql - MySQL thread_concurrency，innodb_thread_concurrency，我应该使用还是不使用？

> ID：13195129
> 
> 赞同：2
> 
> 时间：2012-11-02T12:20:15.640
> 
> 标签：mysql, database-performance

我有一个带有 24 个 CPU 和 32GB 内存的专用服务器。

该服务器服务于网站和 mysql。

我不知道这两个变量之间有什么区别，如果有的话。

我不知道我是否应该使用它们，因为在 Google 上阅读后有人说这些变量可能会被忽略，具体取决于操作系统或 MySQL 版本。

那么我应该使用它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:02:55.493

请仔细阅读[Mysql 性能博客](http://www.mysqlperformanceblog.com/)，选择合适的初始值，在一天中的繁忙时间监控服务器的性能并进行相应的调整。

没有简单的答案，因为您的工作量是您独有的。

在我的脑海中，你的 CPU 和 RAM 的平衡似乎是错误的。我认为 1~4 核用于 64GB 内存，或者 24 核用于最大内存，也许 192GB？需要为查询速率提供 CPU，而为活动/热数据集大小提供 RAM。我可以想象一个奇怪的工作负载，你的 CPU/RAM 是有意义的，但我不确定 innodb 实际上是这种工作负载的最佳解决方案。

回到您的问题：简而言之[，“线程并发没有达到您的预期”](http://www.mysqlperformanceblog.com/2012/06/04/thread_concurrency-doesnt-do-what-you-expect/)，您很可能不应该使用。[innodb_thread_concurrency](http://www.mysqlperformanceblog.com/2011/12/02/kernel_mutex-problem-cont-or-triple-your-throughput/)只是一个截止，我会说如果你的工作负载很热（即mysql不使用太多磁盘（？）），它不应该高于核心数。请阅读博客，这些设置并不像看起来那么简单。

您还可能需要注意：线程缓存、innodb 缓冲池、添加内存池、堆表大小、排序/键缓冲区大小、tx 提交时刷新日志、日志文件大小。可能还有一些我现在想不出来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-14T17:12:09.587

MySQL 中的 thread_concurrency 选项主要针对 Solaris 系统，在 5.6 版本中也会贬值，因此调整它可能是浪费时间。

```
thread_concurrency 
```

另请阅读：[https ://www.percona.com/blog/2012/06/04/thread_concurrency-doesnt-do-what-you-expect/](https://www.percona.com/blog/2012/06/04/thread_concurrency-doesnt-do-what-you-expect/)

innodb_thread_concurrency 可以针对性能进行调整，但我发现使用它并没有提高性能。

[我从https://www.percona.com/blog/](https://www.percona.com/blog/)找到了最好的信息。所有其他建议和提供建议的人都可能认为 MySQL 无法运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T14:14:35.173

（根据手动“thread_concurrency”变量仅可用于 Solaris OS）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T14:12:31.073

这将取决于许多问题、操作系统、调度程序选项、I/O 子系统、CPU 的数量和类型，以及正在运行的查询的类型和数量。

您可以在系统上确定的唯一方法是调整 innodb_thread_concurrency 的值并运行典型的工作负载以进行基准测试。一个合理的起点是从 0 到 48（在您的情况下）x2 乘以可用的 CPU 内核数。然后，您可以增加此值，直到您开始看到系统受 CPU 限制并稍微限制它。

这没有考虑您的事务将产生的磁盘活动，然后您可以从那里查看磁盘 I/O 并从那里进行调整。

将此设置为 0 将其设置为无限制 ** 以便默认情况下对并发执行的线程数没有限制

[http://dev.mysql.com/doc/refman/5.5/en/innodb-performance-thread_concurrency.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-performance-thread_concurrency.html)

# java - 如何在 JTextArea 中使用 html 标签

> ID：13195131
> 
> 赞同：12
> 
> 时间：2012-11-02T12:20:22.850
> 
> 标签：java, html, swing, jtextarea, jtextcomponent

当我尝试使用更改 JTextArea 的颜色时

```
textArea.setText("<html> <font color=\"red\"> Hi </font></html>") 
```

，显示的文本基本上是在 setText 方法中编写的整个文本。但类似的事情适用于 JLabel、JButton 等。

我怎样才能为 JTextArea 做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T12:30:59.490

*   不要`JTextArea`用于`Html`格式化`Object`（甚至是可能的，但为什么要打扰）

*   使用`JTextPane`/`JEditorPane`代替（[setContentType("text/html")](http://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html#setContentType%28java.lang.String%29)）

*   注意，今天的 Java 和在`Official API by Oracle`支持中实现的方法只减少了`Html syntax with css <= Html 3.2`

*   `JavaFX`在您想要/需要使用今天的情况下使用`Html5`，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T18:50:29.073

JavaFX WebView 在渲染 HTML 方面非常强大，您可以使用 JFXPanel 在 Swing 应用程序中轻松显示 javafx 组件（WebView）。对于在 Swing 中嵌入 fx 的教程是来自 oracle 的教程：http: [//docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)

谢谢

# heroku - 为 Heroku 购买 SSL 证书

> ID：13195133
> 
> 赞同：0
> 
> 时间：2012-11-02T12:20:37.353
> 
> 标签：heroku, ssl-certificate

我打算在 Heroku 上的应用程序中添加 SSL 证书。为此，我打算购买通配符 ssl[证书](http://www.namecheap.com/ssl-certificates/comodo/essential-ssl-wildcard-certificate.aspx)。该证书的要求是我需要有一个“专用 IP 地址”。

Afaik，我认为我没有专用的 IP 地址，因为我使用 Heroku 托管我的代码，我认为我不能保证我可以保证该机器的 IP 地址。

我错过了什么吗？我应该查看另一种 SSL 证书吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:55:19.420

如果您的域名已注册并按照 Heroku 文档的建议指向 Heroku，那么您应该能够获得该域名的 SSL 证书。您的 SSL 证书颁发机构不应要求您输入 IP 地址。我只能推测它可能会说您需要一个“专用 IP 地址”以阻止人们尝试为其住宅电缆调制解调器等获取 SSL 证书。

# c# - App.Config 解析失败

> ID：13195135
> 
> 赞同：0
> 
> 时间：2012-11-02T12:20:49.767
> 
> 标签：c#, .net, wpf, app-config, enterprise-library

我有一个遇到奇怪问题的 C# WPF 应用程序。该应用程序使用使用 app.config 配置的 MS 企业库（日志记录）。因此，我部署的文件是：

（名称已更改，文件名长度正确）

XXXXXXXXXXXX.EXE

XXXXXXXXXXXX.EXE.CONFIG

通常这工作得很好。然而，在一个奇怪的情况下，该应用程序是由另一个程序启动的，该程序根据它的短名称 (XXXXXX~X.EXE) 调用 EXE。EXE 启动，但随后继续查找不存在的 app.config (XXXXXX~X.EXE.CONFIG )，并且 Logging 类无法初始化。

我无法更改启动我们的程序，所以我试图在我的 WPF 代码中找出防止这种情况的方法。想法是...

1）重命名我的EXE并在EXE中间创建一个人。

2) 检测我的 EXE 是如何启动并正确重新启动的。

3）某种AppDomain / ConfigurationManager重新指向（这可能吗？）

4）使用安装程序将App.Config克隆为短文件名版本（确认有效）

有没有人以前见过这个并且有任何建议/见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:07:57.977

```
string realAppName = Process.GetCurrentProcess().MainModule.FileName;
System.AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", realAppName + ".config"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:30:45.873

如果您可以更改 exe 以启动然后调用

```
start.exe XXXXXXXXXX.exe 
```

# ios - 模糊的@2x 图像和 ios Web 服务数据

> ID：13195137
> 
> 赞同：-2
> 
> 时间：2012-11-02T12:20:54.723
> 
> 标签：ios

为什么@2x 图像上有网络服务数据时会变得模糊？Web 服务数据看起来也像素化了。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:26:14.217

您的意思是，您正在从网络服务中检索图像？如果是这样，它与名称约定无关。从 WS 检索到的图像必须调整为适当的大小。或者只是向您的 WS 添加一个参数，您可以在其中选择图像的大小。

@2x 参数仅适用于捆绑的图像。如果您正在下载它们，那将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:40:06.820

在您的图像视图中，尽量不要使用“缩放填充”或“纵横比填充/适合”来检查这些外部图像是否具有正确的分辨率。如果它们看起来比应有的小 - 它们在升级时会变得模糊。尝试提供更好的分辨率图像并使用 Aspect Fill/Fit（取决于您的需要），它们会在视网膜前显示器中很好地缩小。

# facebook - 图形 API 请求失败/facebook dns？

> ID：13195138
> 
> 赞同：1
> 
> 时间：2012-11-02T12:20:57.103
> 
> 标签：facebook, facebook-graph-api

facebook graph api (graph.api.com) 几乎每次都解析为 173.252.101.18。但是，在某些情况下，DNS 结果会在 69.171.228.44 中结束。后一个主机不响应，不能 ping，因此有时 API 请求会失败。

一位朋友（也是 Facebook 应用程序开发人员）通过他的服务器确认了这种行为。另一个朋友的DNS根本没有解析到69.171.228.44，所以他没有问题。

我能做什么？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:54:42.710

您可以尝试拦截失败的情况并重试解决，或者仅使用静态预编程 IP（如果您发现失败）。这只是权宜之计，但在我看来，问题出在 Facebook 的（DNS）服务器上，因此很难完全解决您身边的问题

# wpf - 使用 Open XML 将 RTF 字符串插入 Ms Word

> ID：13195139
> 
> 赞同：1
> 
> 时间：2012-11-02T12:20:56.840
> 
> 标签：wpf, openxml-sdk, wordprocessingml

我在 SQL Server 中有一个表，其中包含这样的 RTF 代码：

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Tahoma;}}
\viewkind4\uc1\pard\f0\fs17 Lintel Inspection
\par } 
```

然后我有一个模板 word 文档，我需要将其插入其中，只是想知道如何使用 OpenXML SDK 来做到这一点？

我知道有点像“altChunks”，但不确定如何使用。

任何编码参考也有效。我四处寻找，但没有运气。

# java - base 64 编码的有效字符范围

> ID：13195143
> 
> 赞同：58
> 
> 时间：2012-11-02T12:21:09.667
> 
> 标签：java, regex, base64, apache-commons

我对以下内容感兴趣：
是否有一个**永远不会**作为 base 64 编码字符串的一部分出现的字符列表？
例如`*`. 我不确定这是否会发生。如果原始输入实际上`*`是其中的一部分，那么它的编码方式会有所不同吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-11-02T12:25:43.887

这是我可以找到的：[RFC 4648](http://www.rfc-editor.org/rfc/rfc4648.txt)

它包括这个方便的表：

```
 Table 1: The Base 64 Alphabet

 Value Encoding  Value Encoding  Value Encoding  Value Encoding
     0 A            17 R            34 i            51 z
     1 B            18 S            35 j            52 0
     2 C            19 T            36 k            53 1
     3 D            20 U            37 l            54 2
     4 E            21 V            38 m            55 3
     5 F            22 W            39 n            56 4
     6 G            23 X            40 o            57 5
     7 H            24 Y            41 p            58 6
     8 I            25 Z            42 q            59 7
     9 J            26 a            43 r            60 8
    10 K            27 b            44 s            61 9
    11 L            28 c            45 t            62 +
    12 M            29 d            46 u            63 /
    13 N            30 e            47 v
    14 O            31 f            48 w         (pad) =
    15 P            32 g            49 x
    16 Q            33 h            50 y 
```

因此，匹配任何不应出现在 Base 64 编码中的字符的正则表达式**将**是：

```
[^A-Za-z0-9+/=] 
```

但是，正如 kapeps 回答指出的那样，这只是建议。具体实现可能会选择不同的 64 个字符集。（事实上​​，即使是链接的 RFC 也包含一个用于 URL 和文件名安全编码的替代表，它将字符 62 和 63 分别替换为`-`and `_`）。所以我想这真的取决于创建编码的实现。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-02T12:26:14.043

在大多数情况下，其他答案可能是安全的，但根据[关于 Base64 的维基百科文章，](http://en.wikipedia.org/wiki/Base64#Design)不应该有一个可以依赖的明确列表：

> 为基本所需的 64 个字符选择的字符集的特定选择因实现而异。

[RFC 4648](http://www.rfc-editor.org/rfc/rfc4648.txt)提到了其他字母，例如*“URL 和文件名安全”Base 64 Alphabet*，其中`+`和`/`被替换为`-`and `_`。

有一张使用不同字符[的 Base64 变体表。](http://en.wikipedia.org/wiki/Base64#Variants_summary_table)请记住，有关于行分隔符的实现特定规则，您可以在同一张表中找到这些规则。[像Mime](http://en.wikipedia.org/wiki/Base64#MIME)这样的一些实现甚至允许（并忽略）不在字母表中的字符。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-02T12:24:59.473

Base64 只包含`A–Z`, `a–z`, `0–9`, `+`,`/`和`=`. 所以不使用的字符列表是：所有可能的字符减去上面提到的字符。

出于特殊目的`.`，`_`也是可能的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T12:27:42.360

[https://en.wikipedia.org/wiki/Base64#Design](https://en.wikipedia.org/wiki/Base64#Design)

> MIME 的 Base64 实现对前 62 个值使用 A–Z、a–z 和 0–9

因此，在大多数情况下，您应该只期待字母数字字符。本文中的示例表还显示了“+”和“-”；您不太可能看到“*”。

例如，您可以使用[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)转换为 Base64，对于 '*' 这将返回 "Kg=="

# java - 可以不用MyBatis生成Dynamic SQL而不执行吗？

> ID：13195144
> 
> 赞同：16
> 
> 时间：2012-11-02T12:21:09.343
> 
> 标签：java, dynamic-sql, mybatis

我有一些复杂的查询要使用一些可选的过滤器来构建，MyBatis 似乎是生成动态 SQL 的理想候选者。

但是，我仍然希望我的查询在与应用程序的其余部分（不使用 MyBatis）相同的框架中执行。

所以我希望做的是严格使用 MyBatis 来生成 SQL，但从那里使用我的应用程序的其余部分来实际执行它。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T18:00:41.313

虽然 MyBatis 被设计为在构建后执行查询，但您可以利用它的配置和一点“内部知识”来获得您需要的内容。

MyBatis 是一个非常好的框架，不幸的是它在文档方面缺乏，所以源代码是你的朋友。如果您仔细研究，您应该会遇到这些类：`org.apache.ibatis.mapping.MappedStatement`它们`org.apache.ibatis.mapping.BoundSql`是构建动态 SQL 的关键参与者。这是一个基本的使用示例：

`user`包含此数据的MySQL 表：

```
name    login
-----   -----
Andy    a
Barry   b
Cris    c 
```

`User`班级：

```
package pack.test;
public class User {
    private String name;
    private String login;
    // getters and setters ommited
} 
```

`UserService`界面：

```
package pack.test;
public interface UserService {
    // using a different sort of parameter to show some dynamic SQL
    public User getUser(int loginNumber);
} 
```

`UserService.xml`映射器文件：

```
<mapper namespace="pack.test.UserService">
    <select id="getUser" resultType="pack.test.User" parameterType="int">
       <!-- dynamic change of parameter from int index to login string -->
       select * from user where login = <choose>
                                           <when test="_parameter == 1">'a'</when>
                                           <when test="_parameter == 2">'b'</when>
                                           <otherwise>'c'</otherwise>
                                        </choose>   
    </select>
</mapper> 
```

`sqlmap-config.file`：

```
<configuration>
    <settings>
        <setting name="lazyLoadingEnabled" value="false" />
    </settings>
    <environments default="development"> 
        <environment id="development"> 
            <transactionManager type="JDBC"/> 
            <dataSource type="POOLED"> 
                <property name="driver" value="com.mysql.jdbc.Driver"/> 
                <property name="url" value="jdbc:mysql://localhost/test"/> 
                <property name="username" value="..."/> 
                <property name="password" value="..."/> 
            </dataSource> 
        </environment> 
      </environments>
    <mappers>
        <mapper resource="pack/test/UserService.xml"/>
    </mappers>
</configuration> 
```

`AppTester`显示结果：

```
package pack.test;

import java.io.Reader;
import org.apache.ibatis.io.Resources;
import org.apache.ibatis.mapping.BoundSql;
import org.apache.ibatis.mapping.MappedStatement;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

public class AppTester {
    private static String CONFIGURATION_FILE = "sqlmap-config.xml";

    public static void main(String[] args) throws Exception {
        Reader reader = null;
        SqlSession session = null;
        try {

            reader = Resources.getResourceAsReader(CONFIGURATION_FILE);
            session = new SqlSessionFactoryBuilder().build(reader).openSession();
            UserService userService = session.getMapper(UserService.class);

            // three users retreived from index
            for (int i = 1; i <= 3; i++) {
                User user = userService.getUser(i);
                System.out.println("Retreived user: " + user.getName() + " " + user.getLogin());

                // must mimic the internal statement key for the mapper and method you are calling
                MappedStatement ms = session.getConfiguration().getMappedStatement(UserService.class.getName() + ".getUser");
                BoundSql boundSql = ms.getBoundSql(i); // parameter for the SQL statement
                System.out.println("SQL used: " + boundSql.getSql());
                System.out.println();
            }

        } finally {
            if (reader != null) {
                reader.close();
            }
            if (session != null) {
                session.close();
            }
        }
    }
} 
```

结果：

```
Retreived user: Andy a
SQL used: select * from user where login =  'a'

Retreived user: Barry b
SQL used: select * from user where login =  'b'

Retreived user: Cris c
SQL used: select * from user where login =  'c' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-08T17:08:36.767

大家都知道如何使用BoundSql.getSql()从MyBatis获取参数化查询字符串，像这样：

```
// get parameterized query
MappedStatement ms = configuration.getMappedStatement("MyMappedStatementId");
BoundSql boundSql = ms.getBoundSql(parameters);
System.out.println("SQL" + boundSql.getSql());
// SELECT species FROM animal WHERE name IN (?, ?) or id = ? 
```

但现在您需要等式的另一半，即与问号对应的值列表：

```
// get parameters
List<ParameterMapping> boundParams = boundSql.getParameterMappings();
String paramString = "";
for(ParameterMapping param : boundParams) {
    paramString += boundSql.getAdditionalParameter(param.getProperty()) + ";";
}
System.out.println("params:" + paramString);
// "Spot;Fluffy;42;" 
```

现在，您可以将其序列化以发送到其他地方以运行，或者您可以将其打印到日志中，这样您就可以将它们拼接在一起并手动运行查询。

*代码未经测试，可能是次要类型问题或类似问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-25T06:32:24.063

mybatis版本是3.4.5

## 实用类

要将mapper转换为sql，需要mapper接口类、方法名、参数和sqlSession。

```
 package util;

        import java.lang.reflect.Method;
        import java.text.DateFormat;
        import java.time.LocalDateTime;
        import java.time.format.DateTimeFormatter;
        import java.util.Date;
        import java.util.List;
        import java.util.Locale;
        import java.util.regex.Matcher;
        import org.apache.ibatis.binding.MapperMethod.MethodSignature;
        import org.apache.ibatis.mapping.BoundSql;
        import org.apache.ibatis.mapping.MappedStatement;
        import org.apache.ibatis.mapping.ParameterMapping;
        import org.apache.ibatis.reflection.MetaObject;
        import org.apache.ibatis.session.Configuration;
        import org.apache.ibatis.session.SqlSession;
        import org.apache.ibatis.type.TypeHandlerRegistry;
        import org.springframework.util.CollectionUtils;

        /**
         * @author zwxbest - 19-4-25
         */
        public class SqlUtil {

            public static String showSql(SqlSession sqlSession, Class mapperInterface, String methodName,
                Object[] params) {
                Configuration configuration = sqlSession.getConfiguration();
                MappedStatement ms = configuration.getMappedStatement(
                    mapperInterface.getName() + "." + methodName);

                Method sqlMethod = null;

                //find method equals methodName
                for (Method method : mapperInterface.getDeclaredMethods()) {
                    if (method.getName().equals(methodName)) {
                        sqlMethod = method;
                        break;
                    }
                }
                if (sqlMethod == null) {
                    throw new RuntimeException("mapper method is not found");
                }

                MethodSignature method = new MethodSignature(configuration, mapperInterface, sqlMethod);
                Object paramObject = method.convertArgsToSqlCommandParam(params);
                BoundSql boundSql = ms.getBoundSql(paramObject);
                Object parameterObject = boundSql.getParameterObject();
                List<ParameterMapping> parameterMappings = boundSql
                    .getParameterMappings();
                String sql = boundSql.getSql().replaceAll("[\\s]+", " ");
                if (!CollectionUtils.isEmpty(parameterMappings) && parameterObject != null) {
                    TypeHandlerRegistry typeHandlerRegistry = configuration
                        .getTypeHandlerRegistry();
                    if (typeHandlerRegistry.hasTypeHandler(parameterObject.getClass())) {
                        sql = sql.replaceFirst("\\?",
                            Matcher.quoteReplacement(getParameterValue(parameterObject)));
                    } else {
                        MetaObject metaObject = configuration.newMetaObject(
                            parameterObject);
                        for (ParameterMapping parameterMapping : parameterMappings) {
                            String propertyName = parameterMapping.getProperty();
                            if (metaObject.hasGetter(propertyName)) {
                                Object obj = metaObject.getValue(propertyName);
                                sql = sql
                                    .replaceFirst("\\?", Matcher.quoteReplacement(getParameterValue(obj)));
                            } else if (boundSql.hasAdditionalParameter(propertyName)) {
                                Object obj = boundSql.getAdditionalParameter(propertyName);
                                sql = sql
                                    .replaceFirst("\\?", Matcher.quoteReplacement(getParameterValue(obj)));
                            } else {
                                sql = sql.replaceFirst("\\?", "missing");
                            }
                        }
                    }
                }
                return sql;
            }

            /**
             * if param's type is `String`,add single quotation<br>
             *
             * if param's type is `datetime`,convert to string and quote <br>
             */
            private static String getParameterValue(Object obj) {
                String value = null;
                if (obj instanceof String) {
                    value = "'" + obj.toString() + "'";
                } else if (obj instanceof Date) {
                    DateFormat formatter = DateFormat
                        .getDateTimeInstance(DateFormat.DEFAULT, DateFormat.DEFAULT, Locale.CHINA);
                    value = "'" + formatter.format(new Date()) + "'";
                } else if (obj instanceof LocalDateTime) {
                    value = "\'" + ((LocalDateTime) obj)
                        .format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")) + "\'";
                } else {
                    if (obj != null) {
                        value = obj.toString();
                    } else {
                        value = "";
                    }

                }
                return value;
            }
} 
```

## 调用示例

sqlSession 由 Spring 注入。

```
@Autowired
private SqlSession sqlSession;

    String sql = SqlUtil
        .showSql(sqlSession, PromotionCodeMapper.class, "selectByPromotionCodeForUpdate",
            new Object[]{"111"});
    log.warn(sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T14:50:16.213

`getBoundSql()`只是添加到 Bogdan 的正确答案：如果您的接口具有更复杂的签名，则需要将 JavaBean 传递给带有 getter 的接口参数。

假设您要根据登录号和/或用户名查询用户。您的界面可能如下所示：

```
package pack.test;
public interface UserService {
    // using a different sort of parameter to show some dynamic SQL
    public User getUser(@Param("number") int loginNumber, @Param("name") String name);
} 
```

我省略了 Mapper 代码，因为它与本次讨论无关，但您在 AppTester 中的代码应变为：

```
[...]
final String name = "Andy";
User user = userService.getUser(i, name);
System.out.println("Retreived user: " + user.getName() + " " + user.getLogin());

// must mimic the internal statement key for the mapper and method you are calling
MappedStatement ms  = session.getConfiguration().getMappedStatement(UserService.class.getName() + ".getUser");
BoundSql boundSql = ms.getBoundSql(new Object() {
   // provide getters matching the @Param's in the interface declaration
   public Object getNumber() {
     return i;
   }
   public Object getName() {
     return name;
   }

});
System.out.println("SQL used: " + boundSql.getSql());
System.out.println();
[...] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-19T06:09:02.813

```
public static void main(String[] args) throws Exception {

    String script = "<script>select * from table where 1 = 1<if test='id != null'>and id = ${id} </if></script>";

    System.out.println(buildSql(script));

}

private static String buildSql(String script) {

    LanguageDriver languageDriver = new XMLLanguageDriver();

    Configuration configuration = new Configuration();

    SqlSource sqlSource = languageDriver.createSqlSource(configuration, script, Object.class);

    Map<String, String> parameters = new HashMap<>();
    parameters.put("id", "1");

    BoundSql boundSql = sqlSource.getBoundSql(parameters);

    return boundSql.getSql();

} 
```

使用 ${id} 而不是 #{id}

结果是： select * from table where 1 = 1 and id = 1

# unit-testing - Visual Studio 2012 中的单元测试问题

> ID：13195151
> 
> 赞同：22
> 
> 时间：2012-11-02T12:21:37.670
> 
> 标签：unit-testing, visual-studio-2012

每当我尝试从 Visual Studio 2012 中的测试套件运行任何测试时，我都会得到

> 测试失败 - [测试方法名称]
> 
> 消息：无法设置执行上下文来运行测试

而且我的测试甚至没有开始（即测试失败的根源指向测试方法的开头：

> 这里--> TEST_METHOD([测试方法名称]) {
> 
> }

这条消息是什么意思，它出现的原因是什么，我应该怎么做才能让我的测试正常运行？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-03T11:24:44.127

经过更多研究后，我意识到我忽略了这样一个事实，即我更改了包含被测方法（这是一个 .dll）的项目的“输出目录”，并且与我的测试项目库不在同一个文件夹中，因此给了我消息：

> 消息：无法设置执行上下文来运行测试

因此，通过确保包含被测方法的 .dll 与我的测试项目库位于同一文件夹中，以便在运行时我的测试项目可以找到 .dll，解决了问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-08T02:18:26.080

我有同样的问题，前面提到的建议并没有为我解决这个问题。我的项目使用了一些第三方库，并且在我的 VS 项目的编译器和链接器设置中正确设置了这些库的路径。

原来VS测试引擎找不到库，所以我将这些库的路径添加到PATH环境变量中。这为我解决了这个问题。

提示：尝试使用 VSTest.Console.exe 从命令行运行单元测试。错误消息帮助我更轻松地调试我的问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-17T16:38:12.770

对于那些寻找其他答案的人来说，找到所有需要的 DLL 是一个问题。我按照上面的建议将测试 dll 和要在同一位置进行测试的 dll 都放在同一位置，但仍然出现此错误。

我的测试 DLL 在其本机环境之外找不到它的子 DLL。[您可以通过运行depends.exe](http://www.dependencywalker.com/)找出缺少的内容。将这些其他 DLL 的位置添加到我的路径解决了问题，现在一切正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-25T09:51:39.393

在我的项目中包含第三方 dll (OpenCV) 后出现此错误。将 dll 添加到路径或将其放在 system32 目录中确实有效，但我有一个更好的解决方案。

测试从名为 AppX 的目录运行。就我而言，它在这里：.......OneDrive\Documents\Visual Studio\Projects\TutorialOcr\x64\Debug\OcrTesting\AppX

我只是将 dll 放在那里，测试成功了！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-25T17:37:29.597

我收到此错误，这是因为我使用的是调试 DLL，并且没有可以找到它们的调试 c++ 运行时。我将调试 c++ 运行时复制到同一目录中，问题已解决。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-22T23:21:36.923

为测试创建的 .dll 从其构建所在的文件夹中运行。在我的情况下，“x64\UnitTests\Tests.dll”。我的应用程序的其余部分位于“x64\Debug\App.exe”和“x64\Release\App.exe”中。我的应用程序依赖于位于项目根文件夹中的外部 dll，这也是为调试启动指定的“工作目录”。

但是测试资源管理器测试启动器会忽略该设置并始终使用工作目录“x64\UnitTests”启动 Tests.dll，然后找不到我依赖的 dll。例如，添加`SetCurrentDirectory("..\\..");`测试类构造函数并不能解决问题，因为如果找不到静态依赖项，甚至无法将 dll 加载到内存中。

我通过将 UnitTests 配置的“输出目录”设置为“$(SolutionDir)”来解决它。这会导致在根文件夹中创建 Tests.dll。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-10T09:50:22.080

我也仅在发布配置中遇到此错误，因为我不小心将调试库用作我的测试项目的库依赖项之一。（与 bmann 的帖子相同的问题）

为了找出导致问题的库，我注释掉了所有测试代码及其包含，添加了一个空测试，并一个一个地删除了我的依赖库，直到测试成功。

# iphone - iOS 应用程序在客户设备上崩溃，如何反应，收集数据

> ID：13195154
> 
> 赞同：0
> 
> 时间：2012-11-02T12:21:50.010
> 
> 标签：iphone, ios

应用程序在客户设备上崩溃。不幸的是，该应用程序没有提供错误日志来确定根本原因。

我想知道可以从客户设备收集哪些信息以便开始解决问题。例如，是否有可用的核心文件？还有哪些其他数据可以帮助我们理解问题？

两种情况：

1.  客户可以将设备交给开发商
2.  客户不能将设备交给开发商

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:33:10.623

Malke the Customer 获取崩溃日志（使用 iTunes），在 google 上搜索有关如何操作的教程。当您在 Xcode 管理器中导入并将其与您分发的存档匹配时。您应该会看到一个易于理解的崩溃日志。

[技术笔记苹果](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:25:11.890

我们正在使用试飞。测试飞行安装了自己的异常处理程序，它在调试崩溃时提供了一些不错的数据（回溯、设备类型、ios 版本等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:39:12.760

您可以在设备上查看日志：

```
Settings -> General -> About -> Diagnostics & Usage -> Diagnostics & Usage Data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:44:14.897

在给客户 IPA 和配置文件的同时，还给他 .dSYM 文件，并逐步向他发送通过 iTunes 发回崩溃日志的程序。这将帮助您找到您的应用程序崩溃的确切位置。

# perl - 在 perl 的变量名中使用 :

> ID：13195155
> 
> 赞同：1
> 
> 时间：2012-11-02T12:21:51.600
> 
> 标签：perl, escaping, xml-simple

我对 perl 真的很陌生，并且有一个问题，我使用 XML::Simple 加载 XML，并且我将标签名称作为哈希名称。我想获取以名称“xsd:schema”存储的哈希，但显然 $xsd:schema 不起作用。我花了很长时间在谷歌上搜索它，但找不到怎么做。

如何获得该哈希值以便找出键值？

编辑：

对不起，我没有很好地解释自己。我想在几个级别的哈希中找出这些键的键和值，但是名称 xsd:schema 导致语法错误：

```
foreach my $attributes (keys %{ $data{$xsd:schema}{$xsd:element}}){
    print "$attributes : ${$data}{$xsd:schema}{$xsd:element}{$attributes}\n";
} 
```

编辑2：这是我的做法。

```
$schemaData = $data->{'xsd:schema'}->{'xsd:element'}->{'xsd:complexType'}->{'xsd:sequence'}->{'xsd:element'}->{'xsd:complexType'}->{'xsd:sequence'}->{'xsd:element'};

print Dumper($schemaData);

foreach my $fieldName (keys %{ $schemaData}){

    $fieldType =  $schemaData->{$fieldName}->{'type'};
    print "$fieldType\n";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T12:44:14.197

使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)可视化复杂的数据结构。

XML::Simple 不创建新变量，它创建一个引用。请参阅[Perl 数据结构说明书](http://p3rl.org/perldsc)。

```
use Data::Dumper;
use XML::Simple;

my $x = XMLin(q(<r xmlns:xsd="xsd"><xsd:schema atr="a">a</xsd:schema></r>));
print Dumper $x;
print $x->{'xsd:schema'}{content}; 
```

输出：

```
$VAR1 = {
          'xsd:schema' => {
                          'content' => 'a',
                          'atr' => 'a'
                        },
          'xmlns:xsd' => 'xsd'
        };
a 
```

# javascript - livejquery 不工作

> ID：13195162
> 
> 赞同：0
> 
> 时间：2012-11-02T12:22:27.673
> 
> 标签：javascript, jquery

我正在使用[livequery](http://docs.jquery.com/Plugins/livequery)在动态添加的元素上应用[jquery 选择的插件（用于添加标签） 。](http://harvesthq.github.com/chosen/)我试过了 ：

```
$(".chz").livequery(function () {
    $(this).chosen();
}); 
```

通过上面的代码，选择插件不适用。但如果我尝试这个：

```
$(".chz").livequery('click', function () {
    $(this).chosen();
}); 
```

比它正常工作。但在我的情况下，我不能使用点击事件，因为在用户点击元素之前，插件不会被应用。在第一种情况下我在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:31:39.207

尝试这样的事情

```
 $("body").on('click', '.chz'function () {
    $(this).chosen();
 }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T12:30:38.863

当我们使用选择的插件时，我们会像这样设置类

```
 class ="chzn-select" 
```

然后

```
$(function() {
    $("chzn-select").chosen();
}); 
```

我想这会对你有所帮助

# android - 如何阻止软键盘在android中自动出现

> ID：13195163
> 
> 赞同：2
> 
> 时间：2012-11-02T12:22:31.770
> 
> 标签：android

> **可能重复：**
> [Android 屏幕键盘自动弹出](https://stackoverflow.com/questions/2496901/android-on-screen-keyboard-auto-popping-up)

我制作了一个 android 应用程序，其中有两个文本字段和几个按钮。当我点击另一个文本字段时，android 内置软键盘会自动出现，但我在应用程序中有自己的按钮，所以我不需要软键盘。那么，我怎样才能阻止软键盘出现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T12:26:36.010

在你的`AndroidManifest.xml`：

```
<activity android:name="com.your.package.ActivityName"
          android:windowSoftInputMode="stateHidden"  /> 
```

更多细节`windowSoftInputMode`可以在[这里](http://developer.android.com/guide/topics/manifest/activity-element.html)找到。

此设置将在用户输入新 Activity 时隐藏软键盘（即使 EditText 控件获得焦点）。只有当用户单击编辑框控件时，才会显示软键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:35:03.373

下面的代码可以帮助你隐藏你的软键盘

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:26:36.883

`onCreate()`在 Activity 的方法中尝试这行代码。

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

# r - R 一元运算符重载：风险？

> ID：13195165
> 
> 赞同：19
> 
> 时间：2012-11-02T12:22:40.553
> 
> 标签：r, operator-overloading

在我不断寻求避免在一些简单命令中使用括号的过程中，我编写了以下运算符来创建一个新的图形窗口。我的问题是：除了明显无法对变量“newdev”执行“not”函数之外，我是否有“破坏”R 中的任何内容的风险？

```
# function to overload "!" for one purpose only
#this is adapted  from the sos package code for "???", credited to Duncan Murdoch.
# Example of how to create a specialized unary  operator that doesn't require
# parentheses for its argument.  So far as I can tell,  
#the only way to do this is to overload an existing function or
# operator which doesn't require parentheses.  "?" and "!" meet this requirement.
`!` <- function (e1, e2)  { 
call <- match.call()
#  match.call breaks out each callable function in argument list (which was "??foo" for the sos package "???",
 #  which allows topicExpr1 to become  a list variable w/ callable function "!"  (or "?" in sos) 
original <- function() { 
    call[[1]]<-quote(base::`!`)
    return(eval(call, parent.frame(2)))
}

   # this does preclude my ever having an actual
   # variable called "newdev" (or at least trying to create the actual NOT of it) 
if(call[[2]] =='newdev') {
    windows(4.5,4.5,restoreConsole=T)
}else{
    return(original())  # do what "!" is supposed to do 
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:08:28.717

我执行`"!" = function(a){stop("'NOT' is used")}`并执行了`replications`函数，它使用 ! 运营商，这工作得很好。所以看起来覆盖“！”是安全的。

您仍然可能想要使用类，您可以执行以下操作：

```
# Create your object and set the class
A = 42
class(A) = c("my_class")

# override ! for my_class
"!.my_class" = function(v){ 
  cat("Do wathever you want here. Argument =",v,"\n")
}

# Test ! on A
!A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T08:24:39.003

和

```
makeActiveBinding 
```

您可以将 ls() 替换为例如不需要一元运算符的 LS

# salesforce - 从控制器检查 Apex 单选按钮

> ID：13195166
> 
> 赞同：0
> 
> 时间：2012-11-02T12:22:45.403
> 
> 标签：salesforce, apex-code

我有一个场景，我无处可去：

1.  我有 20 条记录，我通过标准控制器使用分页，我的页面大小为 1。屏幕上显示一条一条记录，我有一个列表或单选按钮来选择选项。

2.  当用户选择一个单选按钮时，我得到它的值并用记录填充地图，值进行一些处理。

3.  我想要做的是，当用户点击后退按钮时，他在单选按钮中选择的选项必须在那里可见。但它不是因为每次我在单选按钮列表中填充新值，所以旧值不会持续。

我想要的是当用户点击后退按钮时，他应该能够看到旧的单选按钮被选中。我怎样才能做到这一点：

1.有没有办法通过控制器检查单选按钮列表的值。2.我是否需要使用 wrapperclass 来执行此操作。

需要帮助。！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:35:23.200

如果您的单选按钮字段已经是对象的一部分，则不需要包装类，但如果单选按钮不需要成为对象的一部分，则使用包装类来保持对象简单。

查看[这个](http://wiki.developerforce.com/page/Wrapper_Class)带有复选框的包装类示例。

包装类不必很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T23:04:09.800

将此字段放入对象中会更容易。如果您的 sObject 中没有这样的字段，那么我建议您在控制器中创建包装器类并显示此包装器的列表而不是您的本机 sObject。

# ruby-on-rails - 如何隐藏表单字段并仍然提交所有字段？

> ID：13195169
> 
> 赞同：0
> 
> 时间：2012-11-02T12:22:52.863
> 
> 标签：ruby-on-rails, twitter-bootstrap, erb

我有这个轨道形式的部分：

```
<%= form_for @ptab, :remote => true, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :name, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :name, :class => 'text_field', :placeholder => 'Enter a name...' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :address, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :address, :class => 'text_field', :placeholder => 'Paste a link...' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :sequence, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :sequence, :class => 'number_field', :placeholder => 'Enter an order number...' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :gtab_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :gtab_id, :class => 'number_field' %>
    </div>
  </div>

    <div class="modal-footer">
                <%= f.submit nil, :class => 'btn btn-primary' %>
                <!-- <%= link_to t('.cancel', :default => t("helpers.links.cancel")), ptabs_path, :class => 'btn' %> --> <!-- this was the original cancel button -->
                <a data-dismiss="modal" class="btn" href="#">Close</a>
     </div>

<% end %> 
```

我想将最后一个 .control-group 中的字段变成隐藏字段，但我仍然希望将其提交给控制器。

我应该将其更改为：

```
<div class="control-group">
        <%= f.label :gtab_id, :class => 'control-label' %>
        <div class="controls">
          <%= f.number_field :gtab_id, :class => 'number_field' %>
        </div>
      </div> 
```

为了让它不在呈现的表单中显示但仍与表单一起提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:31:25.757

使用`hidden_field`? 还是我错过了什么？

```
<%= f.hidden_field :gtab_id %> 
```

当然，删除它周围的 div 以及`label`. hidden_​​field 作为常规字段提交，不用担心

# c# - 将使用 try { } catch 包装类中的所有方法的属性

> ID：13195171
> 
> 赞同：6
> 
> 时间：2012-11-02T12:22:53.953
> 
> 标签：c#, .net

我想创建一个属性`HandleError`，我会放在这样的类上：

```
[HandleError]
public class Foo
{
   public void Do(){}
...
   public void Don(){}
} 
```

它会将所有方法包装在try catch中，所以我相信它应该是这样的：

```
public class HandleErrorAttribute : Attribute
{
    public void Execute()
    {    
        try
        {
            method.Execute();
        }
        catch(Exception ex)
        {
            //log
        }
    }
} 
```

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:26:40.533

您正在寻找类似 PostSharp 的东西，它非常值得实施。但是，实现远远超出了这个问题的范围。看看这个[链接](http://www.sharpcrafters.com/blog/post/Day-6-Your-code-after-PostSharp.aspx)，你会发现它正在做你想做的事。

因此，下载 PostSharp，开始使用它，如果您有更多关于它的问题，我们将能够为您提供帮助。但是，他们的文档非常好，实施起来很容易。

```
[Serializable]
public class MyExceptionHandling : OnMethodBoundaryAspect
{
    public override void OnException(MethodExecutionArgs args)
    {
        // here you would perform the logging
    }
} 
```

然后在您的方法上，您将使用新属性对其进行标记：

```
public class Foo
{
    [MyExceptionHandling]
    public void Do(){}
    [MyExceptionHandling]
    public void Don(){}
} 
```

# css - CSS和绝对垂直对齐问题

> ID：13195176
> 
> 赞同：0
> 
> 时间：2012-11-02T12:23:02.960
> 
> 标签：css, image, vertical-alignment

我遇到了一些 CSS 问题，似乎无法正确处理。

我认为这是：

```
<div class="loginPartialWrapper">
    @(User.Identity.Name)
    @Html.ActionLink("My Account", "Details/" + Api.Security.SecurityClient.GetUserId(User.Identity.Name), "UserProfile", routeValues: null, htmlAttributes: new { @class = "username", title = "View / Edit your profile" })
    <img class="user-profile-small absoluteCenter" src="../../Images/160px-Anon.png" />
    @Html.ActionLink("Log off", "LogOff", "Account")
</div> 
```

我有以下CSS：

```
.user-profile-small {
width: 20px;
height: 20px;
}

.loginPartialWrapper {
position:relative;
height:20px;
line-height:20px;
}

.absoluteCenter {
margin:auto;
position:absolute;
top:0;
bottom:0;
}

.absoluteCenter {
max-height:100%;
max-width:100%;
} 
```

如何更好地进行设置，以使图像不会与注销链接重叠？我已经尝试了很多方法，但我无法确定它。图像是从具有绝对定位的文档流中提取的，但连锁反应是它重叠......我是否认为这是因为它不再是“显示：块”元素？

我怎样才能“恢复”它在文档中的不动产？还是我应该使用完全不同的方法来排列所有元素？

TIA,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:28:48.910

尝试添加`position:relative;`到`.absoluteCenter`

```
.absoluteCenter {
margin:auto;
position:relative;
top:0;
bottom:0;
} 
```

# javascript - Javascript 前导零函数参数

> ID：13195187
> 
> 赞同：2
> 
> 时间：2012-11-02T12:23:50.440
> 
> 标签：javascript

我正在为我的一个 JavaScript 函数遇到的问题而摸不着头脑。

我有以下代码：

```
 function getdetails(id) 
{
$('#details').load('load.php?id='+id);
} 
```

问题是，id 通常以前导零或一系列前导零开头，这意味着它们被切断了。我知道它把它当作一个八位字节，这很好。

所以我尝试添加以下内容

```
function getdetails(id) 
{
var id = parseInt(id,10);
$('#details').load('load.php?id='+id);
} 
```

然而，这仍然切断了零。我已经看到了人们建议的一些填充函数，但是对于一个我无法预测会有多少个零，据我所知，一旦作为参数传递，零就会被删除。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:27:17.550

您的代码很好 - 这是需要更改的调用代码。而不是使用整数参数调用您的方法：

```
getdetails(0011); 
```

消费者应使用字符串参数调用该方法：

```
getdetails('0011'); 
```

# django - Django中的JSON序列化和Jquery中的JSON解析

> ID：13195189
> 
> 赞同：0
> 
> 时间：2012-11-02T12:23:55.093
> 
> 标签：django, json, jquery

所以我有这个代码：

```
def success_comment_post(request):
    if "c" in request.GET:
        c_id = request.GET["c"]
        comment = Comment.objects.get(pk=c_id)
        model = serializers.serialize("json", [comment])
        data = {'message': "Success message", 
                'message_type': 'success',
                'comment': model }
        response = JSONResponse(data, {}, 'application/json')
        return response
    else:        
        data = {'message': "An error occured while adding the comment.", 
                'message_type': 'alert-danger'}
        response = JSONResponse(data, {}, 'application/json') 
```

回到 jQuery 中，我执行以下操作：

```
$.post($(this).attr('action'), $(this).serialize(), function(data) {
    var comment = jQuery.parseJSON(data.comment)[0];
    addComment($("#comments"), comment);

 }) 
```

现在......在Django函数中，为什么我必须把注释放在**[]** --> **model = serializers.serialize("json", [comment])**

回到 jQuery，为什么我必须做 jQuery.parseJSON(data.comment) **[0]**？

无论如何我不必这样做？我觉得很奇怪我必须硬编码**[0]**

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:36:11.710

好吧，serializers.serialize 只接受带有 django 模型实例的查询集或迭代器，但使用 Comment.objects.get 将返回一个对象而不是迭代器，这就是为什么你需要将它放在 [] 中以使其成为迭代器的原因。

由于它是一个列表，因此您也必须像 javascript 中的数组一样访问它。我建议不要使用序列化程序并使用 simplejson 将字段值转换为 json。

示例代码：

```
from django.utils import simplejson as json
from django.forms.models import model_to_dict

comment = Comment.objects.get(pk=c_id)
data = {'message': "Success message", 
        'message_type': 'success',
        'comment': model_to_dict(comment)}
return HttpResponse(json.dumps(data), mimetype='application/json') 
```

我只提到了您代码的相关部分。希望这可以解决您的问题

# algorithm - 插入、选择、带反演的冒泡排序分析 Robert Sedgewick

> ID：13195198
> 
> 赞同：0
> 
> 时间：2012-11-02T12:25:00.630
> 
> 标签：algorithm, sorting

我正在阅读 Robertsedwick 的 C++ 排序算法

> 属性1：插入排序和冒泡排序使用线性数量的比较和交换文件，每个元素对应的反转次数最多为常数。

在另一种类型的部分排序文件中，我们可能已经将一些元素附加到排序文件中，或者编辑了排序文件中的一些元素以更改它们的 kesy。插入排序是此类文件的有效方法；冒泡排序和选择排序不是。

> 属性 2：插入排序使用线性数量的比较，并交换最多具有恒定数量的元素的文件，这些元素具有超过恒定数量的相应反转。

我对上述属性的问题是

1.  我无法区分属性 1 和属性 2？任何人都可以在这里解释我吗？

2.  上面提到的属性 2 作者提到插入排序是最好的而不是冒泡排序和选择排序的依据是什么？

如果举例说明就好了。

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:44:02.897

`<`因此，存在排序顺序的反转，`i < j`但是`a[i] > a[j]`.

*   属性 1\. 考虑序列`2 1 4 3 6 5 8 7 10 9...`。每个元素相对于其左侧或右侧的邻居都是无序的，但相对于所有其他元素是有序的。所以每个元素都有一个恒定数量的反转，在这种情况下是一个。该属性表示所有元素都可能有点乱序。

    冒泡排序和插入排序都将在线性时间内运行。冒泡排序将只需要一次通过来更正顺序，因为它交换相邻元素并通过另一次确认。插入排序只需对每个元素进行一次比较和交换。

*   属性2.这个属性更强。除了能够让所有元素有点乱序之外，现在你还可以拥有一些非常乱序的元素。考虑与之前相同的序列，但最小元素和最大元素移动到相反的两端：`n 2 4 3 6 5 8 7 10 9...1`. 现在`1`和`n`所有其他元素都出现故障。

    插入排序仍将在线性时间内执行。和以前一样，大多数元素只需要很少的比较和交换，但是有一些可以进行顺序`n`比较和交换。在这个例子中，第一个`n-1`元素需要几个比较和交换（好的，所以`2`只有一个）才能到位，最后一个元素需要`n-1`比较和交换 -`2*(n-1) + 1*(n-1)`是 order `n`。

    Bubble sort has a much harder time in this example. Each pass through can only move the `1` a single step backwards. Thus it will take at least `(n-1)` passes in which `(n-1)` comparisons are done before completion -- this is multiplicative `(n-1)*(n-1)` is order `n^2`. (You could also run bubble sort in the opposite direction, in which case the largest element at the beginning would slowly move to the other end instead.)

# python - 为什么Python前面有一个0的时候会改变一个整数的值？

> ID：13195202
> 
> 赞同：3
> 
> 时间：2012-11-02T12:25:06.030
> 
> 标签：python, integer, python-2.x

我实现了一个将整数转换为字符串表示形式的函数`intToStr()`（下面的代码）。

为了进行测试，我传入了一些值并观察到了意外的输出：

```
print intToStr( 1223) # prints 1223 as expected
print intToStr(01223) # prints  659, surprisingly 
```

现在，我尝试调试它，我传入的整数确实是`659`.

为什么会发生这种情况，我怎样才能让 python 忽略整数文字的前导零？

* * *

这是我的功能的代码：

```
def intToStr(i):
    digits = '0123456789'
    if i == 0:
        return 0
    result = ""
    while i > 0:
        result = digits[i%10] + result
        i /= 10
    return result 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T12:26:35.093

以 0 开头的整数文字被解释为[八进制数，以 8 为底](http://docs.python.org/2/reference/lexical_analysis.html#integer-and-long-integer-literals)：

```
>>> 01223
659 
```

这在 Python 3 中已更改，其中带有前导 0 的整数被视为错误：

```
>>> 01223
  File "<stdin>", line 1
    01223
        ^
SyntaxError: invalid token
>>> 0o1223
659 
```

您永远不应该指定带有前导零的整数文字；如果您打算指定一个八进制数，请使用`0o`它来启动它，否则去除那些零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T12:33:57.663

正如其他人所说，这是因为八进制数。但我强烈建议您将功能更改为：

```
>>> from functools import partial
>>> force_decimal = partial(int, base=10)
>>> force_decimal("01")
1
>>> force_decimal("0102301")
102301 
```

这样，您将明确强制转换为以 10 为底。并且 int 不会为您推断它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:26:57.910

以 a 开头的数字`0`被解释为[八进制数](http://en.wikipedia.org/wiki/Octal)。`0x`如果它以十六进制开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:31:15.197

前导零会导致 Python 将您的数字解释为八进制（base-8）。

要去除零（假设 num 是一个字符串），请执行以下操作：

```
num.lstrip("0") 
```

# c - ncurses 基本示例 - 在调试中我得到：“错误打开终端：未知。”

> ID：13195203
> 
> 赞同：6
> 
> 时间：2012-11-02T12:25:06.900
> 
> 标签：c, linux, eclipse, gcc, ncurses

在 ncurses 库上做一些基本示例，我遇到了一些问题。

实际上，我没有得到我所期望的（打印的消息），并且在调试中，从 Eclipse 中，我得到（在控制台区域）“错误打开终端：未知。”

遵循代码：

```
#include <unistd.h>
#include <stdlib.h>
#include <ncurses.h>

int main() {

    initscr();

    move(5,15);
    printw("%s", "Hello world!");
    refresh();

    endwin();
    exit(EXIT_SUCCESS);
} 
```

编译器选项，如 Eclipse 控制台中“构建项目”命令中提供的那样：

```
make all 
Building file: ../source/Curses_01.c
Invoking: GCC C Compiler
gcc -Incurses -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"source/Curses_01.d"     -MT"source/Curses_01.d" -o"source/Curses_01.o" "../source/Curses_01.c"
Finished building: ../source/Curses_01.c

Building target: Curses_01
Invoking: GCC C Linker
gcc  -o"Curses_01"  ./source/Curses_01.o   -lcurses
Finished building target: Curses_01 
```

提前谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:07:27.717

你确实得到了打印的字符串。问题是程序立即退出。这将清除屏幕并将其恢复到以前的状态。当然，这发生得非常快，所以你什么也看不到。

解决方案是在退出之前等待按键。你可以这样做`getch()`：

```
/* ... */
refresh();
getch();
endwin();
exit(EXIT_SUCCESS); 
```

Eclipse 问题的出现是由于 Eclipse 向应用程序提供的终端。NCurses 无法识别它。我不使用 Eclipse，所以我不知道该怎么做，但你应该搜索一些设置，允许你在一个完整的终端中运行应用程序（比如在 xterm、Konsole、Gnome 终端等中）

# ffmpeg - PHPVideoToolkit getFFmpegInfo() 返回一个带有空编解码器的数组

> ID：13195208
> 
> 赞同：4
> 
> 时间：2012-11-02T12:25:13.517
> 
> 标签：ffmpeg, centos

我已经安装了 ffmpeg 并`ffmpeg -codecs`返回了大量的编解码器。但输出以下代码：

```
 $ffmpeg = $toolkit->getFFmpegInfo(FALSE);
    print_r($ffmpeg); 
```

这是：

```
 ...
  [codecs] => Array
        (
            [video] => Array
                (
                )

            [audio] => Array
                (
                )

            [subtitle] => Array
                (
                )

        ) 
```

它没有找到任何编解码器。有什么建议吗？（我已经从源代码安装了ffmpeg）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:56:41.027

也许您没有配置（或者您配置错误）**PHPVIDEOTOOLKIT_FFMPEG_BINARY**常量；它应该设置为`ffmpeg`命令的完整路径。例如：

```
define('PHPVIDEOTOOLKIT_FFMPEG_BINARY', '/usr/bin/ffmpeg'); 
```

要确定正确的路径，请执行命令`which ffmpeg`。
如果您使用的是 PHP5，您可以在[examples/php5/example09.php](http://code.google.com/p/phpvideotoolkit/source/browse/trunk/phpvideotoolkit/examples/php5/example09.php)脚本中找到该`getFFmpegInfo()`函数的使用示例。 在运行示例脚本之前，您必须编辑配置文件[examples/example-config.php](http://code.google.com/p/phpvideotoolkit/source/browse/trunk/phpvideotoolkit/examples/example-config.php)并使用适合您系统的正确路径调整各种。 查看[DEMOS](http://code.google.com/p/phpvideotoolkit/source/browse/trunk/phpvideotoolkit/DEMOS)文件以了解每个示例的作用。
`define`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:10:45.380

我发现我使用的 FFMPEG 版本以不同的格式输出编解码器，在 getFFmpegInfo 方法中，我必须修改以下正则表达式：

原来的：

```
/ ((?:[DEVAST ]{6})|(?:[DEVASTFB ]{8})|(?:[DEVASIL\.]{6})) ([A-Za-z0-9\_]+) (.+)/ 
```

对于我的服务器：

```
/([DEVASI\.]{4}) ([A-Za-z0-9\_]+) (.+)/ 
```

# c# - 发送后删除附件文件

> ID：13195209
> 
> 赞同：1
> 
> 时间：2012-11-02T12:25:14.953
> 
> 标签：c#, asp.net, email, smtp, email-attachments

> **可能重复：**
> [删除附件文件](https://stackoverflow.com/questions/2857107/delete-attachment-file)

我正在尝试使用以下代码发送文件后自动删除文件：

```
 protected void btnSend_Click(object sender, EventArgs e)
        {
            //  Inserting attachment to the email
                using (Attachment data = new Attachment("C:\\local\\vCardGenerator.Website\\" + "FirstName_LastName.vcf", MediaTypeNames.Application.Octet))
            {

            //  add Send E-mail class
                SendvCard smtp = new SendvCard();

            //  Calls method to class
                smtp.MailvCard("anonymous@domain.com", "C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
            }

            //  Status label + Delete file
            lblStatus.Text = "vCard Send to:" + " " + txtMail.Text;

//Delete file after being send as an attachment with the mail
            FileInfo DeleteFileInfo = new FileInfo("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
            if (DeleteFileInfo.Exists)
                File.Delete("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf"); 
```

没有“自动删除”的调试运行非常顺利，它甚至发送带有附件的电子邮件，但是当我在发送后尝试删除附件时，我收到以下错误弹出窗口：

> 该进程无法访问该文件。(~\"Path") 因为它正被另一个进程使用。

有没有人知道为什么会发生这个错误？
我需要先 Dispose 文件吗？

如果需要，愿意提供任何其他/更多信息。

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:42:35.147

如果您处理邮件消息，它将关闭其中的资源并解锁文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:45:42.677

`SendvCard`不是 .NET 框架的一部分，所以我不能肯定地告诉你，但是，我会冒险猜测它在内部创建了一个`MailMessage`对象，该对象将锁定附件直到它被释放。此外，您似乎在不必要地创建一个新`Attachment`对象，因为据我所知，它没有被使用。

您需要做的是在尝试删除附件*之前*`smtp`处理您的对象，因此如果实现您的代码可能类似于：*`SendvCard``IDisposable`*

 *```
using (var smtp = new SendvCard())
{
    //  Calls method to class
    smtp.MailvCard("anonymous@domain.com", "C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");

}

//  Status label + Delete file
lblStatus.Text = "vCard Send to:" + " " + txtMail.Text;

//Delete file after being send as an attachment with the mail
FileInfo DeleteFileInfo = new FileInfo("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf");
if (DeleteFileInfo.Exists)
    File.Delete("C:\\local\\vCardGenerator.Website" + "\\" + "FirstName_LastName" + ".vcf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:39:36.447

我使用了一个不需要文件开始的附件构造函数。我写了一个 MemoryStream，倒带它，然后将它提供给附件。

之后我收到另一个错误，这将是一个新线程。

我感谢大家的帮助和回答，即使我不需要他们。*

# ios - Facebook即使在拒绝后也授予权利

> ID：13195213
> 
> 赞同：2
> 
> 时间：2012-11-02T12:25:32.220
> 
> 标签：ios, facebook, authorization

我有一个应用程序可以让用户在他的墙上发布。为此，他单击一个按钮，如果他尚未登录，该按钮将要求他通过 web 视图登录。然后，他将被要求接受申请（并因此提供他的基本信息），然后是发布权（publish_stream）。

问题来了：

*   如果我授权应用程序以我的名义发布，我将获得授权。这是正常的。
*   但是如果我不接受它，应用程序仍然会获得授权并能够在用户的墙上发布。

有关信息，我使用：`OpenActiveSessionWithPublishPermissions:defaultAudience:allowLoginUI:completionHandler:`

在里面

`openSessionWithAllowLoginUI:`

并检查授权

`[FBSession.activeSession.permissions indexOfObject:@"publish_stream"] != NSNotFound`

所以我的问题是：**为什么我拒绝了这些权利？**

* * *

**编辑：** [错误修复](https://developers.facebook.com/x/bugs/510659758953661/)

# php - PHP数组根本不排序

> ID：13195214
> 
> 赞同：1
> 
> 时间：2012-11-02T12:25:32.967
> 
> 标签：php, arrays, sorting

我对数组的排序有问题。$infoGroup 是之前调用 'ldap_get_entries' 的结果。当我逐步浏览这个数组时，我将结果放入数组 $names 中。然后我想按字母顺序对 $names 进行排序，我尝试了多种不同的方法，但无济于事。数组始终保持与构造相同的顺序。

我错过了什么？

```
foreach($infoGroup[$i]['member'] as $member) {
 //echo "<li>".$member;
 $go = stripos($member, "n");
 unset($names);
 $ai++;
 if ( $go == 1 ) {
  // extract member name from string
  $temp = substr($member, 0, stripos($member, ","));
  // Strip the CN= and change to lowercase for easy handling
  $temp = str_replace("cn=", "", $temp);                                
  $names[$ai] = ($temp);
 }
 if (natsort($names)){
  foreach ($names as $key => $val) {
   echo "<li>";
   echo "$key $val";
  }
 }
}
$ai = 0; 
```

这是结果，但是我尝试对 $names 数组进行排序：

1.  亨利克·林德博姆
2.  克劳斯·罗德
3.  行政
4.  伯恩德·布兰德施泰特
5.  代理用户
6.  帕特里克·洛夫斯特伦
7.  安德烈亚斯·加利奇
8.  马丁·斯塔德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:32:52.203

嗯..有点难以解释，但问题是因为您在该`foreach()`循环内对数组进行排序。本质上，由于您在第一个循环的迭代中创建数组元素，因此`natsort()`只有 1 个元素要排序，而您的嵌套`foreach()`循环仅输出该 1 个元素，然后在第二次和进一步迭代中为 unset() ...

提取`foreach()`排序和输出的第二个，并`unset()`从第一个循环的顶部删除。这应该输出您想要的结果。

像这样的东西...

```
foreach($infoGroup[$i]['member'] as $member) {
 //echo "<li>".$member;
 $go = stripos($member, "n");
 $ai++;
 if ( $go == 1 ) {
  // extract member name from string
  $temp = substr($member, 0, stripos($member, ","));
  // Strip the CN= and change to lowercase for easy handling
  $temp = str_replace("cn=", "", $temp);                                
  $names[$ai] = ($temp);
 }
}

 if (natsort($names)){
  foreach ($names as $key => $val) {
   echo "<li>";
   echo "$key $val";
  }
 }
$ai = 0; 
```

# xml - 在记事本++中使用正则表达式替换

> ID：13195217
> 
> 赞同：1
> 
> 时间：2012-11-02T12:25:42.253
> 
> 标签：xml, regex, notepad++

我想用 xyz 替换标记的 XML 文件中的所有名称。换句话说，替换标签之间的所有内容（包括空格）。我究竟做错了什么？

```
Search: (<name>)(.*)(</name>)
Replace: \1xyz\3 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T12:29:45.110

您正在尝试[使用正则表达式解析 XML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

但是，无论如何，您做错的是使用贪婪的重复。这将从第一个`<name>`到最后一个`</name>`（即使它们不属于一起）一直进行，因为`.*`它将尝试在满足匹配条件的同时尽可能多地消耗.. 改用这个：

```
Search: (<name>).*?(</name>)
Replace: \1xyz\2 
```

或者为了安全起见，您也可以转义`<`and `>`，因为它们在某些特定情况下是元字符（虽然不是在这个情况下）：

```
Search: (\<name\>).*?(\</name\>)
Replace: \1xyz\2 
```

在这两种情况下，这都会导致`.*`不贪婪，即它会尽可能少地消耗。

并确保升级到 Notepad++ 6，因为在此之前 Notepad++ 的正则表达式引擎存在一些问题。

最后，正如 hoombar 在评论中指出的那样，`.`默认情况下匹配**除**换行符之外的每个字符。在 Notepadd++ 中，您可以通过勾选复选框来更改此行为`. matches newline`。

# php - 有没有办法追踪类自动加载触发的位置？

> ID：13195224
> 
> 赞同：0
> 
> 时间：2012-11-02T12:26:06.120
> 
> 标签：php, namespaces, autoload

有没有办法追踪类自动加载触发的位置？我的意思是我想知道哪个文件，行是指类/接口。它开始使用的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:34:05.423

我很确定如果你`debug_print_backtrace()`在你的自动加载函数中使用 or 这样的，这应该会告诉你它是从哪里被调用的，让你可以追踪第一次使用的位置。

# c# - 将excelsheet字段转换为日期时间数据类型并插入sql表

> ID：13195229
> 
> 赞同：0
> 
> 时间：2012-11-02T12:26:20.987
> 
> 标签：c#, .net

我有一个包含一个字段名称记录日期的 excel 文件。现在我正在将数据从 excel 表传输到 sql 表，但是有一个问题。

如何在sql表的日期时间数据类型中转换excel表的记录日期字段。

我想将该 Excel 工作表数据存储在使用数据类型 datetime 归档的 sql 表中。这是代码。

```
 string strFileName = Path.GetFileName(ddlExcelFile.SelectedValue);
    OleDbConnection oconn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Server.MapPath("~/ExcelSheets/" + strFileName) + ";Extended Properties='Excel 12.0;HDR=YES';");
    try
    {
        //After connecting to the Excel sheet here we are selecting the data
        //using select statement from the Excel sheet
        OleDbCommand ocmd = new OleDbCommand("select * from [System Users$]", oconn);
        oconn.Open(); //Here [Sheet1$] is the name of the sheet
        //in the Excel file where the data is present
        OleDbDataReader odr = ocmd.ExecuteReader();
        string LoginID = "";
        string FirstName = "";
        string LastName = "";
        string Email = "";
        string IsActive="";
        string LastUpdateOn;
        string ProjectAccess = "";
        while (odr.Read())
        {
            LoginID = valid(odr, 0);//Here we are calling the valid method
            FirstName = valid(odr, 1);
            LastName = valid(odr, 2);
            Email = valid(odr, 3);
            IsActive = valid(odr, 4);
            LastUpdateOn = valid(odr, 5);
            ProjectAccess = valid(odr, 6);
            //Here using this method we are inserting the data into the database
            insertdataintosql(LoginID, FirstName, LastName, Email, IsActive, LastUpdateOn, ProjectAccess);
        }
        oconn.Close();
    }
    catch (DataException ee)
    {
        lblmsg.Text = ee.Message;
        lblmsg.ForeColor = System.Drawing.Color.Red;
    }
    finally
    {
        lblmsg.Text = "Data Inserted Sucessfully";
        lblmsg.ForeColor = System.Drawing.Color.Green;
    }
}

protected string valid(OleDbDataReader myreader, int stval)//if any columns are
//found null then they are replaced by zero
{
    if(stval==4)
    {
        object val = myreader[stval];

        if (Convert.ToInt32(val)==1)
            return Convert.ToString(true);
        else
            return Convert.ToString(false);
    }        
    else
    {
        object val = myreader[stval];
        if (val != DBNull.Value)
            return val.ToString();
        else
            return Convert.ToString(0);
    }
}

public void insertdataintosql(string LoginID, string FirstName, string LastName, string Email, string IsActive, string LastUpdateOn, string ProjectAccess)
{//inserting data into the Sql Server
    SqlConnection conn = new SqlConnection("Data Source=NET07;Integrated Security=False;Initial Catalog=IrisDevon; User Id=sa; password=kk;");
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = conn;
    cmd.CommandText = "insert into ImportSystemUsers(UserName,FirstName,LastName,Email,IsActive,LastUpdateOn)values(@UserName,@FirstName,@LastName,@Email,@IsActive,@LastUpdateOn)";
    cmd.Parameters.Add("@UserName", SqlDbType.NVarChar).Value = LoginID;
    cmd.Parameters.Add("@FirstName", SqlDbType.NVarChar).Value = FirstName;
    cmd.Parameters.Add("@LastName", SqlDbType.NVarChar).Value = LastName;
    cmd.Parameters.Add("@Email", SqlDbType.NVarChar).Value = Email;
    cmd.Parameters.Add("@IsActive", SqlDbType.Bit).Value =Convert.ToBoolean(IsActive);
    string dt1 = Convert.ToDateTime(LastUpdateOn.Trim()).ToString();
    cmd.Parameters.Add("@LastUpdateOn", SqlDbType.DateTime).Value = dt1;//error here
    cmd.Parameters.Add("@ProjectAccess", SqlDbType.NVarChar).Value = ProjectAccess;
    cmd.CommandType = CommandType.Text;
    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close();
} 
```

正如我在发生错误的代码中提到的那样。

# ios - UITabBarController/UINavigationController 旋转问题

> ID：13195230
> 
> 赞同：1
> 
> 时间：2012-11-02T12:26:22.823
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, orientation, uiinterfaceorientation

我的问题如下：我只想在我的所有视图控制器上允许纵向方向，除了 1 个视图控制器，它应该允许纵向和横向左/右。我现在花了将近 2 天的时间来研究如何在 IOS 中为不同的幻灯片/视图控制器设置方向。经过一番搜索，我在堆栈中找到了这个线程：[UITabBarController Rotation Issues in ios 6](https://stackoverflow.com/questions/12522903/uitabbarcontroller-rotation-issues-in-ios-6/12526152#12526152)

**我在该线程中遵循了 Kunani 的示例，我将在此处发布以节省所有读者的时间：**

*扎克，我遇到了同样的问题。这是因为您将 viewController 嵌入在 TabBar 控制器或 UINavigationController 中，并且对这些方法的调用发生在这些方法中，而不是您的普通视图（在 iOS6 中更改）。我遇到了这个问题，因为我在所有具有导航到不同视图（注册过程、登录等）的模态视图上都呈现了一个嵌入 UINavigationController 的视图控制器。我的简单解决方法是为包含这两种方法的 UINavigationController 创建一个 CATEGORY。我有 shouldAutorotate 无论如何都返回 NO，因为我不希望我的模态视图旋转。你的修复可能就是这么简单，试一试。希望能帮助到你。我创建了一个类别并将其命名为 autoRotate 并选择了 UINavigationController 选项。M+H 文件如下。*

```
#import "UINavigationController+autoRotate.h"

@implementation UINavigationController (autoRotate)

-(BOOL)shouldAutorotate {
return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
}

@end 
```

...和类别.h：

```
 #import <UIKit/UIKit.h>

 @interface UINavigationController (autoRotate)

-(BOOL)shouldAutorotate;
- (NSUInteger)supportedInterfaceOrientations;

@end 
```

我照他说的做了，并尝试为我的 UITabBarController 设置类别，它有效，所有连接到 tabBar 的类现在只允许orientationPortrait。但是如果你看下面的图片

![在此处输入图像描述](../Images/37e94882c64f055078fe176907ec85d8.png)

（来自我的项目的屏幕截图）StoryBoard 中间有一个名为 ShowTaskView 的类。这个类通过 UINavigationController 连接到大多数类（直接连接到 UITabBarController）。即使我将 UITabBarController 设置为仅允许 Portrait，ShowTaskView 似乎也受到该规则的影响，我无法使其旋转。我项目中的方案也可以这样描述：

```
TabBarController ----> UINavigationController -------> class X ----------> class ShowTaskView 
```

如果我希望我的类连接到 tabBarController 以仅允许orientationPortrait 并且其余类根据我的项目的构建方式允许纵向和横向，我可以从这里做什么？我对这个问题感到非常沮丧，因为它很难解决：/

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:35:22.873

请参考我在类似线程中的回答：[Navigation controller stack in landscape mode, but modally present view controller view always in portrait frame size](https://stackoverflow.com/questions/13108198/navigation-controller-stack-in-landscape-mode-but-modally-presented-view-contro/13108273#13108273)

iOS6 通过导航堆栈控制旋转，因此将可旋转视图包装到单独的导航控制器中以便能够在那里控制它。

# sql-server-2005 - SQL Server 中所有列中的字符串匹配计数

> ID：13195243
> 
> 赞同：0
> 
> 时间：2012-11-02T12:26:51.813
> 
> 标签：sql-server-2005

> **可能重复：**
> [使用 SQL 在字符串中搜索字数](https://stackoverflow.com/questions/7766959/search-count-of-words-within-a-string-using-sql)

我有一个表 TABLE1 如下

```
Col1 Col2
1 海你好海
2 你好海海海
3 RR
4 RR
5 你好你好你好

```

现在，如果我正在搜索工作的“Hai”，我希望结果如下

```
Col1 Col2 Cout_of_Stirng_Match
1 海你好海 2
2你好海海海3

```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:35:27.180

```
select col1, len(replace(col2, @word, @word + @not_used_char)) 
- len(col2) where len(replace(col2, @word, @word + @not_used_char)) 
- len(col2) > 0 as Cout_of_String_Match 
```

请参阅[使用 SQL 搜索字符串中的单词数](https://stackoverflow.com/questions/7766959/search-count-of-words-within-a-string-using-sql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:36:32.077

如下创建一个函数，rest是一个简单的查询，自己做

```
 CREATE FUNCTION [dbo].[ufn_CountString]
    ( @pInput VARCHAR(8000), @pSearchString VARCHAR(100) )
    RETURNS INT
    BEGIN

        RETURN (LEN(@pInput) - 
                LEN(REPLACE(@pInput, @pSearchString, ''))) /
                LEN(@pSearchString)

    END
    GO 
```

# javascript - 来自nodeJS的用户定义的javascript函数

> ID：13195250
> 
> 赞同：1
> 
> 时间：2012-11-02T12:27:07.350
> 
> 标签：javascript, node.js

我是 NodeJS 的新手。如何从 NodeJS 执行我自己的 javascript 函数。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:28:59.050

创建 js 文件，然后从命令提示符： node -js 文件路径-

示例：节点 C:\app.js

# java - Spring Integration - FTP下载后立即发送消息

> ID：13195256
> 
> 赞同：1
> 
> 时间：2012-11-02T12:27:44.450
> 
> 标签：java, spring, amazon-s3, amazon-web-services, spring-integration

有没有办法让 Spring Integration 的 FTP 入站通道适配器（实际上我使用的是 S3 入站通道适配器，但它们非常相似）在下载后立即为它下载的每个文件触发一条消息？我有一个非常大的目录，我想在文件到达我的本地文件系统后立即处理它们，而不是等待整个目录被下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:13:30.530

我认为 s3 项目尚不支持它，但在 FTP 中，可以使用 ftp-outbound-gateway，它允许诸如 、 等命令`ls`。`get`这`rm`将允许您列出文件夹、拆分列表并发出每个文件都有一个单独`get`的文件，如示例中所示。

[https://github.com/garyrussell/spring-integration-samples/tree/master/basic/ftp](https://github.com/garyrussell/spring-integration-samples/tree/master/basic/ftp)

# java - Android：由于外部操作而显示通知

> ID：13195263
> 
> 赞同：0
> 
> 时间：2012-11-02T12:28:10.940
> 
> 标签：java, android, android-activity, notifications, lifecycle

当我的 MainActivity 为 onPause() 时，我必须显示通知，所以我在 MainActivity 上编写下面的代码，所以 onPAuse() 我的意思是 Activity 由于外部操作（未接来电、屏幕锁定）而中断，但我有一个问题，即使当我移动到另一个活动时，也会显示通知，有人可以帮助我吗？

```
private void createNotify(){
    NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);        
    Notification notification = new Notification(R.drawable.ic_launcher, "Radio Jawhara en cours...", System.currentTimeMillis());  
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, FragmentsSliderActivity.class), 0);
    String titreNotification = "Radio Jawhara en cours...";
    String texteNotification = "Retour à la radio...";   
    notification.setLatestEventInfo(this, titreNotification, texteNotification, pendingIntent);
    notification.vibrate = new long[] {0,200,100,200,100,200};
    notificationManager.notify(ID_NOTIFICATION, notification);
}

private void cancelNotify(){
    NotificationManager notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.cancel(ID_NOTIFICATION);
}

@Override
protected void onResume() {
    super.onResume();
    cancelNotify();
}
@Override
protected void onPause() {
    super.onPause();
    createNotify();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:32:30.440

`FLAG`在您的代码中创建一个并修改`onPause()`如下：

```
@Override
protected void onPause() {
    super.onPause();
    if(FLAG) {
        createNotify();
    }
} 
```

将此标志的默认值设置为`false`，并将其设置为`true` **仅当您**想离开此标志时`Activity`。（例如，当您开始另一个`activity`时`startActivity()`）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:53:30.900

我认为这里的问题是你在几个活动中管理它，你应该在更高的层次上管理它。

如果我要解决这个问题，我会创建一个单例类来管理通知。我所有的活动都会（在他们的 onPause() 方法中）告诉单身人士他们已经暂停，我所有的活动也会告诉单身人士他们已经恢复（在他们的 onResume() 方法中）。

我的单例暂停方法不会立即创建通知；相反，它会为我的下一个活动设置一个合理的时间（可能是 1 秒）。我的单身人士的恢复方法会简单地取消该计时器。如果计时器到期（这将在出于某种外部目的而暂停一秒后发生），它将创建通知。

为了使这更容易，我可能会使用具有静态详细信息的类而不是使用单例来扩展 Activity，并且我的其他活动将从该类扩展而不是扩展 Activity。这将使创建和维护适当协调的活动变得更加容易。

# .net - WCF 服务仅在 Fiddler 开启时可访问

> ID：13195265
> 
> 赞同：2
> 
> 时间：2012-11-02T12:28:21.330
> 
> 标签：.net, wcf, proxy, fiddler

我在一台机器上的客户端应用程序正在尝试访问另一台机器上的 WCF 服务。

客户端应用程序只有在客户端机器上的 Fiddler 开启时才能访问 Web 服务。当后者关闭时，我收到以下错误：

> System.ServiceModel.EndpointNotFoundException：在[http://ourServer.com/ProductDataServiceV1.svc](http://ourServer.com/ProductDataServiceV1.svc)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。---> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: 无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8888

在我的主机文件中

> 192.168.33.55 ourServer.com

我查看了 Windows 资源管理器中的代理设置，并且所有复选框都已关闭。我还在客户端机器上搜索了“127.0.0.1:8888”，但找不到任何值得注意的东西。

此外，我能够在 Web 浏览器中“看到”服务[http://ourServer.com/ProductDataServiceV1.svc 。](http://ourServer.com/ProductDataServiceV1.svc)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:42:51.930

文本：

> 无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8888

...几乎可以肯定意味着客户端正在尝试将其流量发送到未运行的 Fiddler 实例。通常，.NET 应用程序会在启动时获取代理设置，并且在重新启动之前不会刷新它们。因此，如果您运行了 Fiddler，然后启动了 .NET 应用程序，然后关闭了 Fiddler，则需要重新启动 .NET 应用程序。

现在，还有其他可能性。例如，有人可以自定义 machine.config 或 app.config 文件 (http://www.fiddler2.com/fiddler/help/hookup.asp#Q-DOTNET) 甚至源代码中的 WebProxy 对象以指向直接在 Fiddler 进行故障排除。

# python - 如何在 Python 中使用网站的用户名和密码进行网页抓取

> ID：13195269
> 
> 赞同：2
> 
> 时间：2012-11-02T12:28:37.420
> 
> 标签：python, python-2.7, web-scraping

嗨，我正在使用此代码从[timeanddate.com](http://timeanddate.com)站点获取数据。但我需要使用我的用户名和密码为我的 Facebook 帐户做同样的事情，并抓取我墙上的评论并将其写入文本文件。我可以用 python 做到这一点吗？怎么做？

```
import urllib2
from BeautifulSoup import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.timeanddate.com/worldclock/astronomy.html?n=78').read())

for row in soup('table', {'class' : 'spad'})[0].tbody('tr'):
tds = row('td')
print tds[0].string, tds[1].string 
```

谢谢....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T12:31:02.313

使用[请求 API](http://docs.python-requests.org/en/latest/)。它也处理身份验证。

# sql - SQL 混合数字和字符类型

> ID：13195279
> 
> 赞同：0
> 
> 时间：2012-11-02T12:29:07.150
> 
> 标签：sql

我在 sqlite3 数据库中有许多具有`cost INT`属性的表。

我现在的情况是，在我的一张表中，成本有三个可能的有效值：`NULL`、数字或“X”。

有没有办法允许在属性中输入数字和字符。

我曾考虑过使成本 a`CHAR(1)`和：

```
CONSTRAINT ck_cost CHECK (ISNUMERIC(cost) OR cost = 'X') 
```

但是我将无法将成本值设置为文字整数，它们必须放在引号中（`'1'`而不是`1`）。这与我的其他表格不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:00:38.513

*促进我的评论按要求回答:)*

只需添加另一个字段（“属性”），指示成本为 X。将数字保存为文本仅比将日期保存为文本好一点——这两种方法迟早都会失败。

# iphone - 如何从 iPhone 中的应用程序文件夹中将图像保存到我的设备图像库文件夹中？

> ID：13195282
> 
> 赞同：0
> 
> 时间：2012-11-02T12:29:23.067
> 
> 标签：iphone, objective-c, ios, xcode, image

我从网络服务接收一些图像并将它们存储到我的应用程序文件夹中。现在我已经在 iPhone 设备中创建了一个带有我的应用程序名称的图像库。现在。我想在这个图像库中显示图像。

为了保存系统映像，我正在使用此代码 -

```
[self.library1 addAssetURL:url toAlbum:@"My_App_Name" withCompletionBlock:^(NSError *error) {
                if (error!=nil) {
                    NSLog(@"Big error: %@", [error description]);
                }
            }]; 
```

但是当我获得我的文件夹图像的 url 时，这不起作用。帮助我或给出任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:36:12.633

**iOS5**在框架中包含了新的 API `AssetsLibrary`，让您有机会在用户的照片库中管理应用程序自己的相册。

我认为这很容易。您的应用程序应该创建一个`UIImage`并且只需将其与专辑名称和要处理的块一起传递给下面的方法。

```
-(void)saveImage:(UIImage*)image
         toAlbum:(NSString*)albumName
withCompletionBlock:(SaveImageCompletion)completionBlock; 
```

您可以[**在此处查看更多详细信息**](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)

# mongodb - Mongodb，获取新推送的嵌入对象的id

> ID：13195283
> 
> 赞同：10
> 
> 时间：2012-11-02T12:29:24.110
> 
> 标签：mongodb, mongoose

我在帖子模型中嵌入了评论。我正在使用猫鼬。在帖子中推送新评论后，我想访问新添加的嵌入式评论的 id。不知道如何得到它。

这是代码的样子。

```
var post = Post.findById(postId,function(err,post){

   if(err){console.log(err);self.res.send(500,err)}

   post.comments.push(comment);

   post.save(function(err,story){
       if(err){console.log(err);self.res.send(500,err)}
           self.res.send(comment);
   })

}); 
```

在上面的代码中，没有返回评论的id。请注意，在数据库中创建了一个 _id 字段。

架构看起来像

```
var CommentSchema = new Schema({
  ...
})

var PostSchema = new Schema({
    ...
    comments:[CommentSchema],
    ...
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T12:46:35.630

文档的`_id`值实际上是由客户端而不是服务器分配的。因此`_id`，新评论在您致电后立即可用：

```
post.comments.push(comment); 
```

推送到的嵌入式文档将在添加时`post.comments`为其`_id`分配，因此您可以从那里拉取它：

```
console.log('_id assigned is: %s', post.comments[post.comments.length-1]._id); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-10-29T16:27:51.230

您可以手动生成 _id，然后您不必担心以后将其拉回。

```
var mongoose = require('mongoose');
var myId = mongoose.Types.ObjectId();

// then set the _id key manually in your object

_id: myId

// or

myObject[_id] = myId

// then you can use it wherever 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:15:14.910

`_id`字段在客户端生成，您可以通过以下方式获取嵌入文档的 id`comment.id`

样本

```
 > var CommentSchema = new Schema({
     text:{type:String}
  })

 > var CommentSchema = new mongoose.Schema({
     text:{type:String}
 })

 > var Story = db.model('story',StorySchema)
 > var Comment = db.model('comment',CommentSchema)
 > s= new Story({title:1111})
   { title: '1111', _id: 5093c6523f0446990e000003, comments: [] }
 > c= new Comment({text:'hi'})
   { text: 'hi', _id: 5093c65e3f0446990e000004 }
 > s.comments.push(c)
 > s.save() 
```

在 mongo db shell 中验证

```
 > db.stories.findOne()
{
    "title" : "1111",
    "_id" : ObjectId("5093c6523f0446990e000003"),
    "comments" : [
        {
            "_id" : ObjectId("5093c65e3f0446990e000004"),
            "text" : "hi"
        }
    ],
    "__v" : 0
} 
```

# java - 从抽象类调用方法

> ID：13195284
> 
> 赞同：2
> 
> 时间：2012-11-02T12:29:25.323
> 
> 标签：java, spring, hibernate, inheritance

我有以下抽象类

```
public abstract class ReturnAgentFromTab extends BasePage{

    @Persist("session")
    public abstract Agent getAgent();
    public abstract void setAgent(Agent agent);

    @InjectObject("spring:agentApplicationModeResolver")
    public abstract AgentApplicationModeResolver getAgentApplicationModeResolver();

    .... more @InjectObject()

    public void nextPage(IRequestCycle cycle) {

        setApplicationModeUsingAgentStatus(getAgent());

        AgentSearchNavigationManager navManager = getAgentSearchNavigationManagerFactory().getAgentSearchNavigationManager();
        FlowStage stage = getFlowStage();
        if (stage == null) {
            setApplicationModeUsingAgentStatus(getAgent());
            stage = getUserDefaultFlowStageService().getDefaultFlowStage(UserHolder.getUser(), getVisitClass().getApplicationMode());
        }

        Class nextPageClass = navManager.getNextPage(getUserDefaultFlowStageService());

        String nextPageQualifier = getUserDefaultFlowStageService().getPageQualifier(getAgent(), nextPageClass, getVisitClass().getApplicationMode());
        IPage nextPage = getPageUtils().getPage(nextPageClass, nextPageQualifier);
        if ((getFlowStage() instanceof PSDFlowStage)) {
            nextPageQualifier = getFlowStage().getValue();
        }
        nextPage = getPageUtils().getPage(nextPageClass, nextPageQualifier);
        if (navManager instanceof NameBasedAgentSearchNavigationManager && nextPageClass != SignOffStatusPage.class) {
            NameBasedAgentSearchNavigationManager nameBasedNavManager = (NameBasedAgentSearchNavigationManager) navManager;
            String nextPageName = nameBasedNavManager.getNextPageName(stage); 
            if (!nextPageName.equals(nextPageClass.getSimpleName())) {
                nextPage = getPageUtils().getPage(nextPageName, nextPageQualifier);
            }
        }

        if (isNextPageActivateAgentGeneral(nextPage)) {
            initialisePageLink(nextPageClass, nextPage);
        }
        ((WuamsBasePage) nextPage).init(getAgent().getAgentId());
        getPageUtils().navigateTo(nextPage);

    }

    private void setApplicationModeUsingAgentStatus(Agent agent) {
        getVisitClass().setApplicationMode(getHomeLinksFactory().getRegionHomeLinksService().getApplicationMode(agent));
    }

    private boolean isNextPageActivateAgentGeneral(IPage nextPage) {
        return nextPage instanceof ActiveAgentGeneralPage;
    }

    private void initialisePageLink(Class nextPageClass, IPage nextPage) {
        if (getVisitClass().getPageLink() == null) {
            getVisitClass().setPageLink(PageLinkUtil.getPageLinkMessageKeyFromPageClass(nextPageClass, 
                    getUserDefaultFlowStageService().getDefaultFlowStage(UserHolder.getUser(), getVisitClass().getApplicationMode()).getValue()));
        }
    }

} 
```

我想做的是`nextPage(cycle)`从另一个抽象和扩展的类中调用我的`ReturnAgentFromTab`，但是当我尝试时

```
public abstract class DoSomethingWithAgent extends ReturnAgentFromTab {

@Persist("session")
public abstract ReturnAgentFromTab getReturnAgentFromTab();
public abstract void setReturnAgentFromTab(ReturnAgentFromTab returnAgentFromTab);
....
getReturnAgentFromTab().nextPage(cycle); 
```

我得到一个空指针异常，我知道这是因为我实际上并没有在任何地方设置 ReturnAgentFromTab，但我不明白如何使用抽象类来设置它。有人可以帮忙吗？

如果您需要更多代码，请询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:32:27.430

抽象类的要点是简单地不实现某些东西，例如提供某些对象。该方法`getReturnAgentFromTab()`是一个完美的例子：类本身并不关心该对象来自哪里，因为这是子类的唯一责任。所以扩展那个类，编写那个方法，突然之间，基类就完成了它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:32:59.927

好吧，您不能初始化抽象类，唯一的方法是让其他一些具体类扩展您的抽象类，并使用具体类实例调用非抽象方法。

```
abstarct class ABS1 {
   //abstract methods
   //concreate method
   public void concMethod() {
      }
 }

public class ABS1Impl extends ABS1 {
 //implement all the abstract methods
 }
public abstract class ABS2 {
   ABS1 abs = new ABSImpl();
   abs.concMethod // 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:36:23.110

我认为这可能只是因为两个原因。

1.  可能是`getReturnAgentFromTab()`正在回归`null`。或者
2.  `cycle`的值为`null`。

# bash - 将多个命令通过管道传输到单个命令，无需 EOF 信号等待

> ID：13195285
> 
> 赞同：3
> 
> 时间：2012-11-02T12:29:32.483
> 
> 标签：bash, shell, grep, pipe

如何将多个命令的标准输出通过管道传输到单个命令？就像是：

```
(cat my_program/logs/log.*;tail -0f my_program/logs/log.0) | grep "filtered lines" 
```

我想使用管道在单个命令行上运行以下所有命令，并且不重定向到临时文件（如果可能）。有一个细微差别意味着我不能使用括号；我希望最后一个命令是尾馈，所以我希望 grep 在 std-in 接收到每一行之后发生 - 而不是等待 EOF 信号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T20:47:10.213

尝试使用当前 shell 而不是子 shell：

```
{ cat file1; tail -f file2; } | grep something 
```

右大括号前的分号是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:42:23.553

如果命令不必并行执行，则可以使用 cat 将输出统一为单个连续流，如下所示：

```
tail -0f log.0 | cat - log.* | grep "filtered lines" 
```

魔术位是cat的*-*参数；它告诉 cat 获取标准输入并将其添加到要连接的输入列表（在这种情况下，其他输入是日志文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:09:21.320

好的，我有一个混乱的解决方案（它是一个脚本 - 遗憾的是这对于命令行来说是不切实际的）：

```
#!/bin/bash  

ProcessFIFO(){
    while [[ -p /tmp/logfifo ]]; do
    grep "filtered lines" < /tmp/logfifo
    done
}
OnExit(){
    rm -f /tmp/logfifo
    echo 'temp files deleted'
    exit
}
    # Create FIFO
    mkfifo /tmp/logfifo
    trap OnExit SIGINT SIGTERM
    ProcessFIFO &

    cat log.* > /tmp/logfifo
    tail -0f log.0 > /tmp/logfifo 
```

我已经习惯了@itsbruce 建议的 FIFO 方法，而且我还不得不使用 while 循环来阻止 grep 在 EOF 信号处结束：

```
while [[ -p /tmp/logfifo ]] 
```

我还包括一个删除 FIFO 的陷阱：

```
trap OnExit SIGINT SIGTERM 
```

# ruby-on-rails - Heroku - 如何在每次请求后刷新 Rails 日志

> ID：13195291
> 
> 赞同：0
> 
> 时间：2012-11-02T12:30:04.670
> 
> 标签：ruby-on-rails, logging, heroku

我在 Heroku 上运行 Rails 3 应用程序。

这是输出`heroku logs --tail --source app`： [https ://gist.github.com/4000998](https://gist.github.com/4000998)

这些`Started GET "/"`行在发出 HTTP 请求时实时显示。但是，这些`Processing by Controller`行会被缓冲，然后一次全部转储到日志中。

这使得调试应用程序中的问题变得非常困难，因为很难将控制器日志与应用程序的其余日志匹配。如何在每次请求后刷新缓冲日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:10:02.310

将以下行添加到您的`config.ru`：

```
$stdout.sync = true 
```

# couchdb - CouchDB - 过滤复制 - 速度可以提高吗？

> ID：13195302
> 
> 赞同：9
> 
> 时间：2012-11-02T12:30:54.013
> 
> 标签：couchdb, replication

我有一个数据库（300MB 和 42,924 个文档），包含来自大约 200 个用户的大约 20 种不同类型的文档。文档的大小范围从几个字节到许多 KiloBytes（150KB 左右）。

卸载服务器后，以下复制过滤器功能大约需要 2.5 分钟才能完成。加载服务器时，需要 >10 分钟。

任何人都可以评论这些时间是否是预期的，如果不是，建议我如何优化事情以获得更好的性能？

```
function(doc, req) {
    acceptedDate = true;
    if(doc.date) {
        var docDate = new Date();
        var dateKey = doc.date;
        docDate.setFullYear(dateKey[0], dateKey[1], dateKey[2]);

        var reqYear = req.query.year;
        var reqMonth = req.query.month;
        var reqDay = req.query.day;
        var reqDate = new Date();
        reqDate.setFullYear(reqYear, reqMonth, reqDay);

        acceptedDate = docDate.getTime() >= reqDate.getTime();
    }

    return doc.user_id && doc.user_id == req.query.userid && doc._id.indexOf("_design") != 0 && acceptedDate; 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T13:06:15.973

过滤复制工作缓慢，因为每个获取的文档都会运行复杂的逻辑来决定是否复制它：

1.  CouchDB 获取下一个文档；
2.  因为必须应用过滤功能，所以文档被转换为 JSON；
3.  JSON 化的文档通过 stdio 到查询服务器；
4.  查询服务器处理文档并从 JSON 中解码；
5.  现在，查询服务器查找并运行您的过滤器函数，该函数返回`true`或`false`值给 CouchDB；
6.  如果结果是`true`要复制文档；
7.  转到第 1 页并循环查看所有文档；

对于未过滤的复制，请使用此列表，丢弃 p.2-5 并让 p.6 始终有`true`结果。这种开销会减慢整个复制过程。

为了显着提高过滤复制速度，您可以通过[Erlang native server](http://wiki.apache.org/couchdb/EnableErlangViews)使用 Erlang 过滤器。它们在 CouchDB 中运行，不通过任何 stdio 接口，也没有应用 JSON 解码/编码开销。

**注意，Erlang 查询服务器不像 JavaScript 那样在沙箱中运行，因此您需要真正信任您使用它运行的代码。**

另一种选择是优化您的过滤器功能，例如减少对象创建、方法调用，但实际上您不会因此获得太多好处。

# android - JSONObject 在 Android 中被截断

> ID：13195307
> 
> 赞同：0
> 
> 时间：2012-11-02T12:31:04.307
> 
> 标签：android, json, salesforce

我的应用程序正在尝试连接到 Salesforce API 并下拉其中存在的所有联系人。响应 json 对象有一个名为“totalSize”的键，它表示 33231 条记录。当我尝试以 JSONArray 的形式访问记录时，我的 JSONArray 仅包含 2000 条记录。jsonobject 可能在某处被截断。你能帮忙吗？以下是我的代码。

```
JSONObject asJSONObject = new JSONObject(new JSONTokener(result));
int totalRecordsSize = Integer.parseInt(asJSONObject.getString("totalSize"));
System.out.println("JSON_RESULT_SIZE : "+totalRecordsSize);
JSONArray array = (JSONArray)asJSONObject.get("records");
int count = array.length();
System.out.println("JSON_ARRAY_SIZE : "+count); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:27:59.537

Salesforce 服务器以 2000 行块发送结果，响应结构的一部分是`nextRecordsUrl`包含指向下一页结果的 URL，您需要对其执行 GET 以获取下一组记录，依此类推，直到您获取您的整个结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:36:40.173

通常，当您的服务器配置为（可能是默认情况下）响应有限数量的数据以响应网络调用时，就会出现此类问题。例如，如果您使用的是**ASP.NET** Web 服务，则默认 Json 响应长度限制为*100kb*。但是，您可以通过简单地增加 web.config 中的响应长度来覆盖此限制：

```
<system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="5242880"/>  <!-- 5MB -->
      </webServices>
      <scriptResourceHandler enableCompression="true" enableCaching="true" />
    </scripting>
</system.web.extensions> 
```

使用上述配置，我的 json 响应将达到 5MB，但请确保在处理大量数据时也增加 HTTP 连接超时值。例如：

```
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, 60000);  //1 minute
HttpConnectionParams.setSoTimeout(httpParams, 60000);          //1 minute
HttpClient client = new DefaultHttpClient(httpParams); 
```

# iis - 将所有裸域 url 重定向到保留 url 的子域 (www) url，IIS/ASP.NET 上的一页除外

> ID：13195315
> 
> 赞同：5
> 
> 时间：2012-11-02T12:31:27.507
> 
> 标签：iis, iis-7.5, asp.net-4.0, httpmodule

实现上述目标的最佳方法是什么？我知道它可以在 HttpModule 级别实现。是否可以仅通过 web.config （代码执行更容易和更快）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:00:43.640

通过 web.config 使用 URL 重写模块很容易做到这一点：

```
<rewrite>
    <rules>
        <clear />
        <rule name="Redirect naked domains to www.domain.com" stopProcessing="true">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{HTTP_HOST}" negate="true" pattern="^www\." />
                <add input="{REQUEST_URI}" negate="true" pattern="^noredirect/forthis/page\.aspx$" />
                <add input="{REQUEST_URI}" negate="true" pattern="^noredirect/forthis/page-as-well\.aspx$" />
                <add input="{REQUEST_URI}" negate="true" pattern="^noredirect/forthis/page-as-well-too\.aspx$" />
            </conditions>
            <action type="Redirect" url="http://www.{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

或者，如果您真的只有一个不需要重定向的页面，它甚至可以缩短为：

```
<rewrite>
    <rules>
        <clear />
        <rule name="Redirect naked domains to www.domain.com" stopProcessing="true">
            <match url="^noredirect/forthis/page\.aspx$" negate="true" />
            <conditions logicalGrouping="MatchAll">
                <add input="{HTTP_HOST}" negate="true" pattern="^www\." />
            </conditions>
            <action type="Redirect" url="http://www.{HTTP_HOST}{REQUEST_URI}" appendQueryString="false" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

# php - 使用命名空间找不到类

> ID：13195316
> 
> 赞同：1
> 
> 时间：2012-11-02T12:31:36.663
> 
> 标签：php, namespaces, zend-framework2

使用 ZF1，当我创建数据库连接字符串时，它可以正常工作。但是在 ZF2 数据库适配器中似乎 BUG 永远不会起作用，它总是给出以下内容：

错误：

```
[Fri Nov 02 13:26:25 2012] [error] [client 127.0.0.1] PHP Fatal error:  Class 'Application\\Controller\\Zend\\Db\\Adapter\\Adapter' not found in /var/www/html/org/module/Application/src/Application/Controller/TestController.php on line 17 
```

代码：

```
<?php
namespace Application\Controller;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Db\Adapter\Adapter;
//use Zend\Db\Adapter\Platform\PlatformInterface;
//use Zend\Db\ResultSet\ResultSet;
class TestController extends AbstractActionController {
  public function indexAction() {
    $driverArray = array(
    'driver' => 'Pdo_Mysql',
    'database' => 'web145',
    'username' => 'web145',
    'password' => 'meandmypassword',
    'host'=>'localhost'
    );
    $adapter = new Zend\Db\Adapter\Adapter($driverArray);
    //Zend\Db\Adapter\Adapter::query('SELECT * FROM `sh_operaor`');
    //var_dump ($adapter->query('SELECT * FROM `sh_operaor`'));
    exit;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:38:42.290

由于您已经使用了命名空间 Zend\Db\Adapter\Adapter，您应该这样称呼它：

```
$adapter = new Adapter($driverArray); 
```

或者您可以从以反斜杠开头的根名称空间调用它

```
$adapter = new \Zend\Db\Adapter\Adapter($driverArray); 
```

# c# - 如何从 datalist 中的 datakey 字段中获取值

> ID：13195331
> 
> 赞同：2
> 
> 时间：2012-11-02T12:32:40.707
> 
> 标签：c#, asp.net

我有一个数据列表，我设置了 DataKeyField

```
 <asp:DataList ID="lstItems" runat="server" RepeatDirection="Horizontal"  DataKeyField="itemid" >
  <ItemTemplate>
  //contents in the datalist here
  </ItemTemplate>
   </asp:DataList> 
```

我在页面中还有一个图像按钮说 imgADD。我的问题是如何在 imgADD 单击服务器端获取 datakey 的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:39:09.780

```
<asp:DataList ID="DataList_projects" runat="server" RepeatColumns="1" DataKeyNames="ID"
         RepeatDirection="Horizontal" onitemcommand="DataList_projects_ItemCommand" >

        <HeaderStyle ForeColor="Red" />
    <ItemTemplate>
        <hr style="color:" />
     <asp:Label ID="ltlproject" ForeColor="#cc0000"  runat="server" text="PROJECT:"></asp:Label>  &nbsp;<b><u><asp:Label ID="lblProject" runat="server" Text='<%# Eval("TITLE")%>' ></asp:Label></u></b> &nbsp;  <asp:LinkButton ID="lnkEdit" ForeColor="Red"  CommandName="Edit" runat="server">Edit</asp:LinkButton><br />

    </ItemTemplate>
    </asp:DataList> 
```

在你后面的代码中

```
protected void DataList_projects_ItemCommand(object source, DataListCommandEventArgs e)
    {

        if (e.CommandName == "Edit")
        {

           string strId = DataList_projects.DataKeys[e.Item.ItemIndex].ToString();

        }

    } 
```

我想这会对你有所帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:43:42.540

## **ASP 代码：**

```
//In the DataList ItemTemplate: 
.. 
.. 
<asp:ImageButton ID="imgADD" runat="server" ImageUrl="uri" ToolTip="Add" 
CommandName="Add" /> 
```

## **代码隐藏：**

```
protected void DataList1_ItemCommand(object source, 
DataListCommandEventArgs e) 
{ 
  if(e.CommandName == "Add") 
  { 
    string keyID; 

    // Get the index of the row from which this event was raised. 
    int idx = e.Item.ItemIndex; 

    // Get the DataKey with the same index. 
    object thisKey = DataList1.DataKeys(idx); 
    if(thisKey != null) 
    { 
      keyID = thisKey.ToString(); 
      // do something here 
    } 
 } 
```

}

# java - Netbeans项目Linux部署

> ID：13195332
> 
> 赞同：0
> 
> 时间：2012-11-02T12:32:44.463
> 
> 标签：java, linux, netbeans, deployment

我使用 NetBeans 7.2 在 linux 中创建了一个 Java 应用程序。构建项目会创建 .jar 文件，但现在我需要将它部署在多台 PC 上。

我想创建一个带有桌面快捷图标的可执行文件。我该怎么做呢？？

谢谢

# memory-management - 如何释放视图控制器保留的所有内容？

> ID：13195336
> 
> 赞同：1
> 
> 时间：2012-11-02T12:32:51.667
> 
> 标签：memory-management, memory-leaks, uiviewcontroller, ios6, ipad-3

我有 5 个视图控制器，每次点击它们时都会重新加载它们。我想减少内存分配，所以在 viewDidDisappear 我将所有 IBOutlets 设为 nil ，但我仍然想减少更多内存，这是控制器保留的所有内存。我必须单独做吗，还是有什么方法可以为我带来魔力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:48:25.347

设置`IBOutlets`为`nil`in`viewDidDisappear`版本没有任何内容，因为这些仍将由`view`.

你可以释放你的其他对象，然后重新创建，`viewDidAppear`但很难理解你为什么要这样做，只是在`didReceiveMemoryWarning`方法中询问时这样做。

*   将您的 IBOutlets 声明为弱，并让系统在需要时决定何时释放视图（以及与它一起的 outlet）。

*   在方法内的低内存条件下释放您想要删除的任何其他对象`didReceiveMemoryWarning`。系统再次决定何时需要。

# api - 在google maps api中为邮政编码区域着色？

> ID：13195337
> 
> 赞同：4
> 
> 时间：2012-11-02T12:32:56.743
> 
> 标签：api, google-maps, area, postal

我想通过在其周围设置边框并在其区域内设置颜色来以不同的方式显示每个邮政编码。我在 js 中使用谷歌地图 api 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-06T13:31:17.120

Google API 不提供直接在任何类型的地区（无论是邮政编码还是城市）周围建立边界的功能。因此，您必须手动从某个第三方获取表示区域边界的*lat lng 数组并绘制**折线*。以下链接可能会有所帮助。

[谷歌地图按颜色区域和子区域划分](https://stackoverflow.com/questions/6455917/google-map-divided-in-regions-with-color-and-in-subregions)

[谷歌地图 v3 - 突出显示州或州的地区](https://stackoverflow.com/questions/7734875/google-maps-v3-highlight-states-or-regions-of-states)

[如何添加或显示邮政编码边界谷歌地图 v3](https://stackoverflow.com/questions/13051149/how-to-add-or-show-zip-code-boundary-google-maps-v3)

[http://www.quora.com/How-do-I-show-the-boundaries-of-postcodes-on-google-maps](http://www.quora.com/How-do-I-show-the-boundaries-of-postcodes-on-google-maps)

[http://www.quora.com/Is-there-a-way-to-get-boundaries-of-neighborhoods-in-Google-maps-api](http://www.quora.com/Is-there-a-way-to-get-boundaries-of-neighborhoods-in-Google-maps-api)

# redis - 如何使用 Redis 批量插入？

> ID：13195341
> 
> 赞同：18
> 
> 时间：2012-11-02T12:33:20.393
> 
> 标签：redis

我已经阅读了 redis.io 提供的[mass-insert](http://redis.io/topics/mass-insert)，但这真的让我很困惑。我尝试制作一个文件，然后使用“cat data.txt | redis-cli --pipe”插入：

 **```
 SET Key0 Value0
    SET Key1 Value1
    SET Key2 Value3 
```* 

*然后我得到了这个：*

 ***```
 All data transferred. Waiting for the last reply...
    ERR wrong number of arguments for 'set' command
    ERR unknown command '$4'
    ERR wrong number of arguments for 'echo' command
    ERR unknown command '$20' 
```* 

*我也试过*

 ***```
 *3<cr><lf>
    $3<cr><lf>
    SET<cr><lf>
    $3<cr><lf>
    key<cr><lf>
    $5<cr><lf>
    value<cr><lf> 
```* 

*然后我得到了这个： ERR 协议错误：无效的多批量长度*

 *这真的让我很困惑。谁能给我一个简单的例子？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T12:50:22.383

这里是：

```
echo -n '*3\r\n$3\r\nset\r\n$3\r\nkey\r\n$5\r\nvalue\r\n' | ./redis-cli --pipe
All data transferred. Waiting for the last reply...
Last reply received from server.
errors: 0, replies: 1 
```

您的问题可能来自 cr+lf 分隔符。您可以使用 hexdump -C 命令检查这一点：

```
echo -n '*3\r\n$3\r\nset\r\n$3\r\nkey\r\n$5\r\nvalue\r\n' | hexdump -C
00000000  2a 33 0d 0a 24 33 0d 0a  73 65 74 0d 0a 24 33 0d  |*3..$3..set..$3.|
00000010  0a 6b 65 79 0a 0d 24 35  0d 0a 76 61 6c 75 65 0d  |.key..$5..value.|
00000020  0a                                                |.|
00000021 
```

此外，您可能想检查您的目标是最近的 Redis 实例，而不是 1-2 之前的版本（不支持“[统一协议](http://redis.io/topics/protocol)”）。

**注意：**上述行适用于 zsh。如果使用 bash，则需要在引号前添加 $ 以触发 ANSI-C 引用：

```
echo -n $'*3\r\n$3\r\nset\r\n$3\r\nkey\r\n$5\r\nvalue\r\n' | hexdump -C 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-02T03:08:05.763

你可以这样做：

```
echo -e "$(cat data.txt)" | redis-cli --pipe 
```

希望对你有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-28T16:20:31.400

我能够使用`SET Key0 Value0`表格。

请查看[https://stackoverflow.com/a/30511742/2613942](https://stackoverflow.com/a/30511742/2613942)

回复是关于`LPUSH`命令的。它也适用于`SET`.

总而言之，双引号参数

```
SET "mykey" "myval" 
```

使用以下命令将文件格式从 unix 更改为 windows `unix2dos`：

```
unix2dos myfile.txt 
```

然后使用导入

`cat myfile.txt | src/redis-cli --pipe`

这对我有用。******

# jquery - 使用asp.net scriptmanager在webview中加载站点时jquery document.ready不会触发

> ID：13195343
> 
> 赞同：3
> 
> 时间：2012-11-02T12:33:25.440
> 
> 标签：jquery, asp.net, uiwebview, webview, scriptmanager

我在 asp.net 4 中为客户端建立了一个网站，该网站大量使用 jQuery (1.7.2)。该网站在所有现代浏览器、移动客户端等中都能正常工作。

客户有一个用于其业务的 Twitter 帐户，当有人关注他们时，他们会收到一条包含指向该站点的链接的自动响应消息。他提出了一个问题，即当客户在 iOS 设备上使用 Twitter 应用程序单击该链接时，该网站无法正常运行。

我已经将其归结为 twitter 使用 webview 来显示站点而不是 safari 的事实，并且当我尝试通过 javascript 获取 asp.net scriptmanager 实例时，似乎在这个 webview 中出现了某种错误，因此文档永远不会准备就绪，因此不再触发 jQuery document.ready 事件！如果我放入后续脚本，`window.load`那么它们可以正常工作。

我创建了一个非常简单的页面来测试它，它的整体看起来像这样：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    </head>
    <body>
        <form id="form1" runat="server">

            <asp:ScriptManager ID="sm" runat="server"></asp:ScriptManager>

            <script type="text/javascript">

                $(document).ready(function () {
                    if (typeof (Sys) === "object") {
                        var manager = Sys.WebForms.PageRequestManager.getInstance();
                    }
                });

                $(document).ready(function () {
                    alert("staging1");
                });
                $(window).load(function () {
                    alert("staging2");
                });
            </script>
        </form>
    </body>
</html> 
```

因此，如果我在 webview 中加载该页面，我只会从 window.load 中获得第二个警报。如果我取出声明变量的行`manager`。当第二个 document.ready 事件触发时，我收到两个警报。

如果我在任何浏览器中运行该页面，我总是会收到两个警报。

有没有人遇到过这个或有任何理由为什么这不起作用？

非常欢迎任何帮助/专业知识！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:43:44.663

你必须这样做：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

     <script type="text/javascript">

    $(document).ready(function() {
        if (typeof (Sys) === "object") {
        var manager = Sys.WebForms.PageRequestManager.getInstance();
        }
    });

         $(document).ready(function () {
             alert("staging1");
         });
         $(window).load(function () {
             alert("staging2");
         });
    </script>
</head>
<body>
    <form id="form1" runat="server">

    <asp:ScriptManager ID="sm" runat="server"></asp:ScriptManager>

    </form>
</body>
</html> 
```

# google-ajax-api - 谷歌搜索 Ajax API 更多结果

> ID：13195345
> 
> 赞同：0
> 
> 时间：2012-11-02T12:33:35.740
> 
> 标签：google-ajax-api

根据：[http](http://code.google.com/apis/ajaxsearch/documentation/#fonje) ://code.google.com/apis/ajaxsearch/documentation/#fonje 我用它在谷歌上搜索。但它只返回给我 4 个结果。

我需要更多结果，有什么想法吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T04:21:06.123

您可以添加`rsz=[1-8]`到您的查询。例如：`http://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=gates&rsz=8`

# c++ - 如何从字符串中找到子字符串？

> ID：13195353
> 
> 赞同：19
> 
> 时间：2012-11-02T12:34:12.280
> 
> 标签：c++, c

如何使用 C/C++ 从字符串路径“/user/desktop/abc/post/”中找到子字符串？我想检查该路径中是否存在文件夹“abc”。

路径是字符指针`char *ptr = "/user/desktop/abc/post/";`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-02T12:35:16.060

使用`std::string`和`find`。

```
std::string str = "/user/desktop/abc/post/";
bool exists = str.find("/abc/") != std::string::npos; 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-02T12:35:35.383

在 C 中，使用`[strstr()](http://linux.die.net/man/3/strstr)`标准库函数：

```
const char *str = "/user/desktop/abc/post/";
const int exists = strstr(str, "/abc/") != NULL; 
```

注意不要意外找到太短的子字符串（这就是开始和结束斜线的用途）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-06T16:19:06.200

[`std::string`使用find 方法](http://www.cplusplus.com/reference/string/string/find/)的示例：

```
#include <iostream>
#include <string>

int main (){
    std::string str ("There are two needles in this haystack with needles.");
    std::string str2 ("needle");

    size_t found = str.find(str2);
    if(found!=std::string::npos){ 
        std::cout << "first 'needle' found at: " << found << '\n';
    }

    return 0;
} 
```

结果：

```
first 'needle' found at: 14. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:36:59.987

使用`strstr(const char *s , const char *t)` 和`include<string.h>`

您可以编写自己的函数，其行为相同`strstr`，也可以根据您的要求进行修改

```
char * str_str(const char *s, const char *t)
{
int i, j, k;
for (i = 0; s[i] != '\0'; i++) 
{
for (j=i, k=0; t[k]!='\0' && s[j]==t[k]; j++, k++);
if (k > 0 && t[k] == '\0')
return (&s[i]);
}
return NULL;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T16:52:14.727

正如 user1511510 所指出的，当 abc 位于文件名的末尾时，存在一种不寻常的情况。我们需要寻找其中一个`/abc/`或`/abc`后跟一个 string-terminator `'\0'`。一种天真的方法是检查是否`/abc/`是`/abc\0`子字符串：

```
#include <stdio.h>
#include <string.h>

int main() {
    const char *str = "/user/desktop/abc";
    const int exists = strstr(str, "/abc/") || strstr(str, "/abc\0");
    printf("%d\n",exists);
    return 0;
} 
```

但`exists`即使 abc 后面没有空终止符，也会为 1。这是因为字符串文字`"/abc\0"`等价于`"/abc"`. 更好的方法是测试是否`/abc`是子字符串，然后查看该子字符串后面的字符（使用由返回的指针进行索引`strstr()`）是 a`/`还是 a `'\0'`：

```
#include <stdio.h>
#include <string.h>

int main() {
    const char *str = "/user/desktop/abc", *substr;
    const int exists = (substr = strstr(str, "/abc")) && (substr[4] == '\0' || substr[4] == '/');
    printf("%d\n",exists);
    return 0;
} 
```

这应该适用于所有情况。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-02T14:12:30.040

如果您过多地使用数组，那么您应该包括在内`cstring.h`，因为它有太多的功能，包括查找子字符串。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-06-26T04:17:00.433

在 C++ 中

```
using namespace std;

string my_string {"Hello world"};
string element_to_be_found {"Hello"};

if(my_string.find(element_to_be_found)!=string::npos)
   std::cout<<"Element Found"<<std::endl; 
```

# scala - SBT 子项目中的 Akka 应用程序特定设置

> ID：13195355
> 
> 赞同：2
> 
> 时间：2012-11-02T12:34:28.450
> 
> 标签：scala, configuration, sbt, akka

我有一个带有子项目（这是一个库）的 SBT 项目，它与 akka 演员一起做一些事情。

就像在[akka 文档](http://doc.akka.io/docs/akka/snapshot/general/configuration.html#Application_specific_settings)中一样，**我正在尝试**从子项目的`reference.conf`.
在一个*不*包含子项目的简单 SBT 项目中，这是可行的。**那么为什么不用于子项目呢？**

我如何加载配置：

```
val config = ConfigFactory.load()
implicit val system:ActorSystem = ActorSystem("MyLibSystem", config.getConfig("library-project-conf").withFallback(config)) 
```

我的`reference.conf`

```
library-project-conf {
  akka {
    loglevel = DEBUG
    # some more stuff
  }
} 
```

如果我将配置放在 akka 的配置设置`akka`之外，*则会*读取。`library-project-conf`

 *我跑`sbt library-project/test`。
如果我[记录 akka 的配置](http://doc.akka.io/docs/akka/snapshot/general/configuration.html#Logging_of_Configuration)，`akka.log-config-on-start = on`我会得到很多我无法充分利用的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:19:54.167

这很可能与您没有为 ConfigFactory.load() 方法指定一个时使用的类加载器有关。

确保您使用可以访问配置文件的类加载器。

另外，我认为您想要一个 application.conf 而不是 reference.conf，因为 reference.conf 用于添加新的默认值，而不是更改现有的。*

# apache - 使用多个参数重写 Mod

> ID：13195357
> 
> 赞同：1
> 
> 时间：2012-11-02T12:34:36.397
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试设置一个重写规则，以便任何代替子域的文本都将是参数一，而第一个正斜杠之后的任何文本都将是参数二，但我正在努力使用正则表达式并且不确定重写术语。

例如，如果有人要求：

```
joebloggs.mydomain.com 
```

我希望他们看到：

```
mydomain.com/index.php?site=joebloggs 
```

另外，如果有人要求：

```
joebloggs.mydomain.com/contact 
```

我希望他们看到：

```
mydomain.com/index.php?site=joebloggs&page=contact 
```

“看到”我的意思是看到页面，而不是看到 URL——它是一个类似 CMS 的项目，所以你可能会看到我要去哪里。另外，我还想出了如何删除 www。所以这不是问题:)

* * *

编辑

当前的 .htaccess 是：

```
RewriteEngine On

# Remove trailing slash
RewriteRule ^(.+)/$ $1 [L]

# Remove www
RewriteCond %{HTTP_HOST} ^www.richardmjenkins.com$ [NC]
RewriteRule ^(.*)$ http://richardmjenkins.com/$1 [R=301,L]

# Rewrite for site/page pair
RewriteCond %{HTTP_HOST} ^(.*)\.richardmjenkins\.com$ [NC]
RewriteCond %{REQUEST_URI} !p.php
RewriteRule ^(.+/)?([^/]*)$ p.php?s=%1&p=$2 [QSA,L,NC]

RewriteCond %{HTTP_HOST} ^(.*)\.richardmjenkins\.com$ [NC]
RewriteCond %{REQUEST_URI} !p.php
RewriteRule ^$ p.php?s=%1 [QSA,L,NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:41:43.740

**1.**在您的主机面板中：添加一个名称`*`为的子域：启用所有子域

**2.**这是你的 htaccess 代码：

```
RewriteEngine On
Options +Followsymlinks

RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteRule ^$ index.php?site=%1 [QSA,L,NC]

RewriteCond %{HTTP_HOST} ^(.*)\.mydomain\.com$ [NC]
RewriteRule ^([^/]+)/?$ index.php?site=%1&page=$1 [QSA,L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:44:07.910

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^((?!www)[^.]+)\.(mydomain\.com)$ [NC]
RewriteRule ^$ index.php?site=%1 [L,QSA]

RewriteCond %{HTTP_HOST} ^((?!www)[^.]+)\.(mydomain\.com)$ [NC]
RewriteRule ^(.+)$ index.php?site=%1&page=%2 [L,QSA] 
```

# sql - 第二个 ResultSet.next() 报告为 true 但 while 循环存在

> ID：13195360
> 
> 赞同：0
> 
> 时间：2012-11-02T12:34:55.933
> 
> 标签：sql, jdbc

在使用 JDBC 连接时，我正在尝试执行 2 个 SELECT 语句。第一个从表 (SQL_IBGN) 返回单个记录，第二个旨在使用第一个查询中的列 (BGNREF) 从另一个表 (SQL_ITXN) 返回多个记录。

每个查询都有单独的 Statement 和 ResultSet 对象。

查询 1 的代码：

```
 Statement stmt = con.createStatement();
    String sql = "SELECT BGNREF..... FROM SQL_IBGN WHERE BGNREF LIKE '2306009';";
    ResultSet rs = stmt.executeQuery(sql);
    String bgnref = null;
    while (rs.next()) {
        G1SQL_IBGN g1rec = new G1SQL_IBGN();
        bgnref = rs.getString(1);
        g1rec.setBGNREF(bgnref);
    } 
```

查询 2 的代码：

```
 if (bgnref != null) {
        Statement stmt1 = con.createStatement();
        String sql1 = "SELECT ACT_DESC...... SQL_ITXN WHERE BGNREF LIKE '"
                + bgnref + "';"; // Execute the SELECT statement ResultSet
        ResultSet rs1 = stmt1.executeQuery(sql1); // Get result of first five records
        while (rs1.next()) {
            G1SQL_ITXN g1itxn = new G1SQL_ITXN();
            g1itxn.setACT_DESC(rs1.getString(1));
        }
    } 
```

第一个查询返回单个记录，但是即使 rs1.next() = true，第二个 while 循环 while (rs1.next()) 也不会执行。

# c# - 如何监听进程对 Windows API 的访问

> ID：13195363
> 
> 赞同：0
> 
> 时间：2012-11-02T12:34:56.740
> 
> 标签：c#, .net, winapi

我想制作一个简单的程序，它监视对函数`.Net`的访问（例如文件系统），它让我知道哪个进程可以访问哪个 API。`Win API``System.IO.FileSystemWatcher`

是否有任何中断方法或每个构建组件`.Net Framework`来执行此操作？

# c++ - 如何在 C++ 中发送两个元组作为参数

> ID：13195367
> 
> 赞同：3
> 
> 时间：2012-11-02T12:35:13.263
> 
> 标签：c++, function, c++11, tuples, typedef

您好，我是 C++ 新手，我正在尝试制作一个程序，该程序需要两个复数，对它们进行汇总并返回总和。

我打算做的是将两个元组发送到一个函数中并返回一个元组。

```
typedef tuple<float, float> complex_tuple;
  complex_tuple a_tuple(a, b);
  complex_tuple b_tuple(c, d);

    cout << sum(a_tuple, b_tuple); 
```

这是我的功能：

```
tuple<float,float> sum(tuple<float, float>a, tuple<float, float>b){
  float a_real= get<0>(a);
  float a_imag= get<1>(a);
  float b_real= get<0>(b);
  float b_imag= get<1>(b);
  return tuple<float, float>(a_real+b_real, a_imag+b_imag);
} 
```

我得到的错误是：

```
0.cc:28:31: Error: no match for "operator<<" in "std::cout << sum(std::tuple<float, float>, std::tuple<float, float>)(b_tuple)" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:39:17.423

您想说您想将 sum 打印到`cout`，但`cout`不知道如何处理 type 的值`complex_tuple`。

提供一个重载`operator<<(ostream&, const complex_tuple&)`以允许代码编译：

```
ostream& operator<<(ostream& os, const complex_tuple& tuple) {
    os << get<0>(tuple) << "+" << get<1>(tuple) << "i";
    return os;
} 
```

[更多信息](http://www.learncpp.com/cpp-tutorial/93-overloading-the-io-operators/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T12:36:46.417

您认为存在过载的假设`std::cout`是`operator<<(std::tuple)`错误的。错误信息很清楚。

您需要单独打印元组的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:36:55.073

错误说`operator<<`。您发布的代码没有任何问题，只是您尚未编写此函数。

```
ostream& operator<<(ostream& out, const complex_tuple& x); 
```

编写该函数，错误就会消失。

# java - 休眠 buildSessionFactory ClassFormatError:

> ID：13195369
> 
> 赞同：1
> 
> 时间：2012-11-02T12:35:14.763
> 
> 标签：java, hibernate, jakarta-ee

ClassFormatError：类文件 javax/persistence/InheritanceType 中非本机或抽象方法中的缺失代码属性

尝试构建 sessionFactory 我的 hibernate.cfg.xml 文件时出现此错误：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.username">mateusz</property>
        <property name="hibernate.connection.password">mateusz123</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/carpool</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="show_sql">true</property>
        <mapping class="org.mathew.data.User"></mapping>
    </session-factory>
</hibernate-configuration> 
```

我的 HibernateUtil 类：

```
public class HibernateUtil {

    private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            return new AnnotationConfiguration().configure().buildSessionFactory();

        }
        catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public static void shutdown() {
        // Close caches and connection pools
        getSessionFactory().close();
    }

} 
```

堆栈跟踪：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at org.mathew.hibutil.HibernateUtil.buildSessionFactory(HibernateUtil.java:19)
    at org.mathew.hibutil.HibernateUtil.<clinit>(HibernateUtil.java:8)
    at org.mathew.mysql.MySqlQueries.<init>(MySqlQueries.java:16)
    at org.mathew.test.AppMain.main(AppMain.java:8)
Caused by: java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/persistence/InheritanceType
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at org.hibernate.cfg.InheritanceState.extractInheritanceType(InheritanceState.java:51)
    at org.hibernate.cfg.InheritanceState.<init>(InheritanceState.java:21)
    at org.hibernate.cfg.AnnotationBinder.buildInheritanceStates(AnnotationBinder.java:2146)
    at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:492)
    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:277)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1319)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:915)
    at org.mathew.hibutil.HibernateUtil.buildSessionFactory(HibernateUtil.java:13)
    ... 3 more 
```

我的图书馆：

```
cglib
commons-collections
commons-logging
dom4j
hibernate3
hibernate-annotations
hibernate-commons-annotations
hibernate-core
java-api-6.0
javassist
jta
log4j
mysql-connector-java
persistence-api
slf4j
slf4j-log4j 
```

我不能上传图片:)

如果有人可以提供帮助，我将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:16:46.983

您似乎在手动管理您的依赖项，您确实应该使用依赖项管理器（maven、ivy 和 ant 等）来确保您获得正确的依赖项（所有库都*在其预期版本中*）。由于您没有指定您正在使用的库的版本，因此可能存在几个问题：

*   不兼容的持久化 API 版本与休眠
*   hibernate jar 的不兼容组合：您显然有一个 hibernate3 jar 和 hibernate-core，这似乎不正确。它看起来像是一个旧版本的 Hibernate 与更新的 jars 混合在一起。因此，如果 jar 在类路径中首先出现，则仅存在于最新版本中的类可能正在访问旧版本中的类。

# mysql - 删除电子邮件不是已知电子邮件客户端的位置

> ID：13195373
> 
> 赞同：1
> 
> 时间：2012-11-02T12:35:28.417
> 
> 标签：mysql, sql

我正在尝试从收到大量垃圾邮件的表中删除记录。因此，我们的想法是删除所有没有来自 hotmail、gmail 或 yahoo 的电子邮件的记录。但我的 sql 看起来像是在返回一些 hotmail 记录：

```
SELECT *
FROM `users`
WHERE email NOT LIKE '*hotmail.com*'
AND email NOT LIKE '*gmail.com*'
AND email NOT LIKE '*ymail.com*' 
```

应用`OR`条件返回相同的结果。你能指引正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:37:33.200

查询应如下所示

```
SELECT *
FROM `users`
WHERE email NOT LIKE '%hotmail.com%'
AND email NOT LIKE '%gmail.com%'
AND email NOT LIKE '%ymail.com%' 
```

你必须替换`*`为`%`

> 如果 SQL LIKE 子句与 % 字符一起使用，那么它将像 Unix 中的元字符 (*) 一样工作，同时在命令提示符下列出所有文件或目录。

[这是](http://www.tutorialspoint.com/mysql/mysql-like-clause.htm)关于 MySQL 中 LIKE 的文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:39:27.850

```
SELECT  *
FROM    users
WHERE   email NOT RLIKE '\\@(hotmail|gmail|ymail)\\.com$' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:42:15.737

您的查询还会返回 gmail 和 ymail

在 mysql 中你必须使用 % 而不是 *

所以只需替换它，一切都会好起来的。

# android - 如何从 android 的 google play store 获取已安装应用程序的列表？

> ID：13195379
> 
> 赞同：1
> 
> 时间：2012-11-02T12:35:48.960
> 
> 标签：android, apk

我想要从 google play 或任何外部存储安装的应用程序列表，而不是预安装的系统应用程序。

我只是使用下面的代码.....

```
 class PInfo {
    private String appname = "";
    private String pname = "";
    private String versionName = "";
    private int versionCode = 0;
    private Drawable icon;
    private void prettyPrint() {
        Log.v("", "*** appname = " + appname + " *** \n" + " packagename = " + pname + "\n" + " version name =  " + versionName + "\n" + " version code = " + versionCode + " \n\n\n\n");
    }
}

private ArrayList<PInfo> getPackages() {
    ArrayList<PInfo> apps = getInstalledApps(true); /* false = no system packages */
    final int max = apps.size();
    int i = 0; 
    for (i=0; i<max; i++) {
        apps.get(i).prettyPrint();
    }
    Log.v(TAG, "Total APPs = "+i);
    return apps;
}

private ArrayList<PInfo> getInstalledApps(boolean getSysPackages) {
    ArrayList<PInfo> res = new ArrayList<PInfo>();        
    List<PackageInfo> packs = getPackageManager().getInstalledPackages(PackageManager.GET_META_DATA);
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);
        if ((!getSysPackages) && (p.versionName == null)) {
            continue ;
        }
        PInfo newInfo = new PInfo();
        newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        newInfo.pname = p.packageName;
        newInfo.versionName = p.versionName;
        newInfo.versionCode = p.versionCode;
        newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
        res.add(newInfo);
    }
    return res; 
} 
```

但是这段代码也给了我系统应用程序的信息.....

任何人都可以知道如何只获取已安装的应用程序，除了已安装的系统应用程序吗？

谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:23:21.843

要发现您的应用程序是否是系统应用程序，您可以使用以下代码：

```
PackageManager pm = getPackageManager();
List<ApplicationInfo> installedApps = pm.getInstalledApplications(0);

for (ApplicationInfo aInfo: installedApps) {

    if ((aInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
        // system application
    } else {
        //user application
    }
} 
```

如果您需要发现应用程序是否从市场安装，您需要使用[以下](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)Package: 方法`getInstallerPackageName`。它将返回安装您的应用程序的应用程序的 packageName。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:46:18.917

```
public class AppList extends Activity {
 private ListView lView;
 private ArrayList results = new ArrayList();

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);
  lView = (ListView) findViewById(R.id.list1);
  PackageManager pm = this.getPackageManager();

  Intent intent = new Intent(Intent.ACTION_MAIN, null);
  intent.addCategory(Intent.CATEGORY_LAUNCHER);

  List list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
  for (ResolveInfo rInfo : list) {
   results.add(rInfo.activityInfo.applicationInfo
     .loadLabel(pm).toString());
   Log.w("Installed Applications", rInfo.activityInfo.applicationInfo
     .loadLabel(pm).toString());
  } 
  lView.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, results));
    }
} 
```

# php - Symfony2 应用结构最佳实践

> ID：13195382
> 
> 赞同：0
> 
> 时间：2012-11-02T12:36:18.880
> 
> 标签：php, symfony

在过去的两个月里，我一直在开发一个 Symfony2 Web 应用程序。现在我一直在回顾并尝试解决它的一些问题，因为它有点失控，我想让它易于维护。

我的应用程序被构造成一系列这样的包：

```
src/AppName/HelpBundle
src/Appname/InterfaceBundle
src/AppName/ProductBundle
src/AppName/UserBundle 
```

InterfaceBundle 只包含几个用于主布局的 twig 模板，而其他每个 bundle 都只是对其进行了扩展，例如：

```
{% extends 'AppNameInterfaceBundle::layout.html.twig' %} 
```

* * *

对于控制器，每个控制器目录有两个子目录：User和Admin，例如：

```
src/AppName/ProductBundle/Controller/Admin/ProductCategoryController.php
src/AppName/ProductBundle/Controller/User/ProductCategoryController.php 
```

这是构建 Symfony 应用程序的适当方式，还是应该以不同的方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:25:15.427

问题不是很详细，但就我所见，我认为您可以做的是以 AdminBundle 和 UserBundle 包含一组通用服务的方式组织事物，这些服务允许您构建控制器重用它们。

然后，您可以拥有一系列像 ProductBundle 这样的捆绑包，这些捆绑包可以重用/与这些服务交互。在你的控制器中使用依赖注入而不是扩展 Symfony 的 Controller 类；通过这种方式，您可以利用服务继承并在 AdminBundle 和 UserBundle 中构建抽象控制器，并使用它们来派生您的特定控制器。

更一般地说，我喜欢以这样一种方式来构建 Symfony 应用程序，即对于横切应用程序域的每个关注点（例如，搜索引擎中的实体索引、日志记录、URL 的生成等）我喜欢创建一个捆绑包提供一些抽象来处理它；对于领域的每个领域（例如产品管理、用户管理等），我喜欢拥有一个实现抽象接口中提供的接口并注册要在提供的抽象中使用的特定服务的包。在这种情况下，可以通过容器的配置和标记系统来完成接口。

这个问题很笼统，所以我的回答也是如此，如果您想了解更多详细信息，请随时为您的问题提供更多详细信息。

# ubuntu - AWS EC2 Ubuntu 12.04.1 LTS：未找到 deb 命令

> ID：13195385
> 
> 赞同：57
> 
> 时间：2012-11-02T12:36:22.500
> 
> 标签：ubuntu, amazon-web-services, deb

当我尝试在我的 AWS EC2 Linux 实例中安装 mongoDb 时：Ubuntu 12.04.1 LTS，

```
deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen 
```

我收到以下错误，这意味着找不到 deb 命令。

```
$ deb Sorry, command-not-found has crashed! Please file a bug report
at: https://bugs.launchpad.net/command-not-found/+filebug Please
include the following information with the report:

command-not-found version: 0.2.44 
```

有人可以帮我了解如何在我的 AWS 实例中安装 deb 吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-11-02T12:40:28.453

Deb 不是命令。您需要编辑`/etc/apt/sources.list`文件并添加以下行

```
deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen 
```

到文件的末尾。

然后，更新您的系统，然后安装 MongoDB。假设 mongodb 是您需要的包，然后运行以下命令：

```
sudo apt-get update
sudo apt-get install mongodb 
```

# php - SQL 查询：添加总小时数

> ID：13195387
> 
> 赞同：0
> 
> 时间：2012-11-02T12:36:23.153
> 
> 标签：php

我目前在 MySQL 数据库中有 5 个表。其中一些共享外键并且相互依赖。我根据他们的专业显示课程。我有两个专业：计算机工程师和信息系统。它们的值存储在名为major 的表中。他们各自的 ID 是 1 和 2。我在计算所有课程的时间时遇到了困难。如何添加每个课程的学时并在页面底部显示专业的总学时？

```
<?

try {

    $pdo = new PDO ("mysql:host=$hostname;dbname=$dbname","$username","$pw");
    } catch (PDOException $e) {
    echo "Failed to get DB handle: " . $e->getMessage() . "\n";
    exit;
  }
      $query = $pdo->prepare("SELECT course.name, course.code, course.description, course.hours, 
                             CASE semester.semester
                             WHEN 0 THEN 'Spring'
                             WHEN 1 THEN 'Fall'
                             WHEN 2 THEN 'All-year'
                             END semester, semester.year
                             FROM course
                             LEFT JOIN major_course_xref ON course.id = major_course_xref.course_id
                             LEFT JOIN major ON major.id = major_course_xref.major_id
                             LEFT JOIN course_semester_xref ON course.id = course_semester_xref.course_id
                             LEFT JOIN semester ON course_semester_xref.semester_id = semester.id
                             Where major.id = '1'
                             ");
      $query->execute();

     if ($query->execute()){

      while ($row = $query->fetch(PDO::FETCH_ASSOC)){  
        print "<b>" . $row['name'] . "</b><br>";
        print $row['code'] . "<br>";
        print $row ['description'] . "<br>";
        print $row['hours'] . " hrs. <br>";
        print $row['semester'] . "<br>";
        print $row['year'] . "<br>";
         print "------------------------------<br />";
    }

    }
else
    echo 'Could not fetch results.';

      unset($pdo); 
      unset($query);

?> 
```

**电流输出**

```
Computer Programming I
CPSC1400
Introduction to disciplined, object-oriented program development.
4 hrs. 
Spring
2013
------------------------------
Computer Programming II
CPSC1500
This course builds upon the topics covered in Computer Science I and provides experience developing complex applications. 
4 hrs. 
Fall
2013
------------------------------
Database Programming
CPSC2100
Study of relational database management systems and information storage and retrieval techniques. 
4 hrs. 
Spring
2014 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:43:27.877

您可以添加一个变量，例如`$tothours`然后在`while`子句中添加`$row['hours']`它。

可能比 sql 语句中的另一个查询/连接更好。

**例子**

```
$tothours = 0;

while ($row = $query->fetch(PDO::FETCH_ASSOC)){  
    print "<b>" . $row['name'] . "</b><br>";
    print $row['code'] . "<br>";
    print $row ['description'] . "<br>";
    print $row['hours'] . " hrs. <br>";
    print $row['semester'] . "<br>";
    print $row['year'] . "<br>";
    print "------------------------------<br />";
    $tothours += $row['hours']; <-- this line
}

print "<p>Total hours for Major: " . $tothours . ".</p>" 
```

对不起，如果我的语法不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:47:10.030

此查询显示按专业分组的课程时间总和：

```
select major.id, sum(course.hours)
from course, major, major_course_xref
where course.id = major_course_xref.course_id
      and major.id = major_course_xref.major_id
group by major.id 
```

# iis - IIS：为每个站点配置文档根目录？

> ID：13195390
> 
> 赞同：0
> 
> 时间：2012-11-02T12:36:31.560
> 
> 标签：iis, webforms, document-root

我正在使用 ASP.NET Web 窗体并有一个引用视图脚本资源的母版页：

```
<script type="text/javascript" src="/Resources/Scripts/jquery.placeholder.min.js"></script>
<script type="text/javascript" src="/Resources/Scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="/Resources/Scripts/helper.js"></script> 
```

问题是文档根目录“/”在开发框中工作得很好，但破坏了 IIS 上的引用，因为该站点不再处于根级别。解决此问题的最佳方法是什么？

也想过这样的事情

```
<script type="text/javascript" src="<% Server.MapPath("~"); %>/Scripts/jquery-ui-1.9.0.min.js"></script> 
```

或者

```
<script type="text/javascript" runat="server" src="~/Scripts/jquery-ui-1.9.0.min.js"></script> 
```

但两者都抛出错误。我认为这是一个典型的场景，我想知道你们是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:39:02.277

用户这个

```
 <script type="text/javascript" src='<%= ResolveUrl("~/Scripts/jquery-1.4.1.js")%>'></script> 
```

这是一篇可能对您有所帮助的帖子。[ResolveUrl 不能内联工作](https://stackoverflow.com/questions/6732490/resolveurl-not-working-inline)

# hadoop - 如何处理 MapReduce 中可拆分 lzo 文件的记录/行边界？

> ID：13195397
> 
> 赞同：0
> 
> 时间：2012-11-02T12:37:00.000
> 
> 标签：hadoop, mapreduce

我有一些 MapReduce 输出的 lzo 压缩文件，它们将用于另一项工作。所有这些文件都已编入索引，并且我已将 LzoTextInputFormat 设置为 inputformat 类。

我的问题是：

在使用这些 lzo 文件时，如何处理记录/行边界？

一个记录/行可以被截断成两个相邻的压缩块。如果将两个相邻的块在逻辑上拆分为不同的 Mapper，则很难确定不完整的记录/行并将两部分组合起来。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:11:21.820

使用序列文件。SequenceFile 写入带有同步标记的压缩块。因此，seqfile 是可拆分的。

# android - Android：无法获取字符串资源

> ID：13195398
> 
> 赞同：1
> 
> 时间：2012-11-02T12:37:05.070
> 
> 标签：android, sqlite, android-cursoradapter

我正在尝试使用 cursorAapter 将两个字符串绑定到 textView。但是，我似乎得到了资源未找到异常。我不明白为什么，因为它们都是 2 种字符串类型，而且我在程序的开头输入了一个条目，所以会有一些东西要显示。

日志猫

```
10-21 19:44:51.042: E/AndroidRuntime(14930): Uncaught handler: thread main exiting due to uncaught exception
10-21 19:44:51.062: E/AndroidRuntime(14930): android.content.res.Resources$NotFoundException: String resource ID #0x1
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.content.res.Resources.getText(Resources.java:200)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.TextView.setText(TextView.java:2813)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at com.example.mycoursetimetable.TestCursorAdapter.bindView(TestCursorAdapter.java:28)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.support.v4.widget.CursorAdapter.getView(CursorAdapter.java:256)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.AbsListView.obtainView(AbsListView.java:1274)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.ListView.makeAndAddView(ListView.java:1668)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.ListView.fillDown(ListView.java:637)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.ListView.fillFromTop(ListView.java:694)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.ListView.layoutChildren(ListView.java:1521)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.AbsListView.onLayout(AbsListView.java:1113)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.View.layout(View.java:6830)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.View.layout(View.java:6830)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.View.layout(View.java:6830)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.View.layout(View.java:6830)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.View.layout(View.java:6830)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.ViewRoot.performTraversals(ViewRoot.java:996)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.os.Looper.loop(Looper.java:123)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at android.app.ActivityThread.main(ActivityThread.java:4363)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at java.lang.reflect.Method.invokeNative(Native Method)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at java.lang.reflect.Method.invoke(Method.java:521)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
10-21 19:44:51.062: E/AndroidRuntime(14930):    at dalvik.system.NativeStart.main(Native Method)
10-21 19:44:51.082: I/dalvikvm(14930): threadid=7: reacting to signal 3 
```

主要活动

```
public class MyCourses extends Activity {

    static final String TEST = "com.example.mycoursetimetable.TEST";
    database MODULEDATABASE;  
    ListView listContent;
    Cursor cursor;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_my_courses);

       listContent =(ListView)findViewById(R.id.list);
       MODULEDATABASE = new database(MyCourses.this);

       MODULEDATABASE.createEntry("TestCode", "TestName");

       MODULEDATABASE.openToRead(); // don't forget this part!
       cursor = MODULEDATABASE.getData();

       listContent = (ListView)findViewById(R.id.list);
       TestCursorAdapter ca = new TestCursorAdapter(this, cursor, 0);
       listContent.setAdapter(ca);

        }

} 
```

光标适配器

```
public class TestCursorAdapter extends CursorAdapter {

    private LayoutInflater viewInflater;

    public TestCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
        // TODO Auto-generated constructor stub
        viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
        TextView text_moduleId = (TextView)v.findViewById(R.id.labelDay);
        TextView text_modulecode = (TextView)v.findViewById(R.id.labelModuleCode);
        TextView text_modulename = (TextView)v.findViewById(R.id.labelEditModuleFull);

        //text_moduleId.setText(c.getString(c.getColumnIndex(database.KEY_ROWID)));
        text_modulecode.setText(c.getColumnIndex(database.KEY_MODULECODE));
        text_modulename.setText(c.getColumnIndex(database.KEY_MODULENAME));
    }

    @Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View v = viewInflater.inflate(R.layout.listcourses, parent, false);
        return v;
    }

} 
```

数据库片段

```
 public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + DATABASE_TABLE +  " (" +
                        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                        KEY_MODULECODE + " TEXT, " +
                        KEY_MODULENAME + " TEXT); "
                    );
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABEL IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

    public database(Context c){
        myContext = c;
    }

    public  database openToWrite()throws SQLException{
        myHelper = new DbHelper(myContext);
        moduleDatabase = myHelper.getWritableDatabase();
        return this;
    }

    public  database openToRead()throws SQLException{
        myHelper = new DbHelper(myContext);
        moduleDatabase = myHelper.getReadableDatabase();
        return this;
    }
    public void close(){
    myHelper.close();
    }

    public long createEntry(String moduleCode, String moduleName) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_MODULECODE,moduleCode);
        cv.put(KEY_MODULENAME,moduleName);
        return moduleDatabase.insert(DATABASE_TABLE,null,cv);
        // TODO Auto-generated method stub

    }

    public Cursor getData() {

        String[] columns = new String [] {KEY_ROWID,KEY_MODULECODE, KEY_MODULENAME};
        Cursor c = moduleDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

        return c;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:47:27.187

我猜这条线是问题所在：

```
 text_modulecode.setText(c.getColumnIndex(database.KEY_MODULECODE)); 
```

columnIndex 很可能是一个 int，它被解释为一个 resourceId。这就是它搜索资源 ID 1（列索引）的原因。采用

```
....setText(String.valueOf(c.getColumnIndex(database.KEY_MODULECODE))); 
```

确保您使用采用字符串的方法。

# symfony - 事件侦听器未在 Doctrine Event 上注册或调用

> ID：13195402
> 
> 赞同：6
> 
> 时间：2012-11-02T12:37:27.863
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我已按照说明书中的说明进行操作：http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html[但](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html) 不幸的是我的 EventListener 没有被调用。

服务.yml

```
services:
      strego.acl.eventlistener:
        class: Strego\TippBundle\EventListener\AclUpdater
        tags:
            - { name: doctrine.event_listener, event: prePersist, connection: default } 
```

这是我要执行的事件监听器：

```
namespace Strego\TippBundle\EventListener;
use Doctrine\ORM\Event\LifecycleEventArgs;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

class AclUpdater implements ContainerAwareInterface
{

    protected $container;

    public function prePersist(LifecycleEventArgs $args) {
        $args->idonotexist(); // should crash if called
        }
    }

    public function setContainer(ContainerInterface $container = null) {
        $this->container = $container;
    }
} 
```

现在我的控制器代码，我想用它来测试它：

```
public function testAction($id){
        $em = $this->getDoctrine()->getEntityManager();
        $entity = $em->getRepository('StregoTippBundle:BetGroup')->find($id);
        $entity->setUpdatedAt(new \DateTime());
        $entity->setTitle('update Name! #2');
        $em->persist($entity);
        $em->flush();         
        return new \Symfony\Component\HttpFoundation\Response("done");
    } 
```

我不知道为什么不调用我的 prePersist Action。有人看到我的代码有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T19:37:47.103

`prePersist`第一次保存实体时调用。在控制器中，您正在更新现有的控制器。

放置`preUpdate`并尝试将其或在控制器中从编辑更改为创建新实体。您可能不需要连接：config.yml 中的默认值。

# .net - 有没有办法检查脚本是否由 PowerShell ISE 运行？

> ID：13195406
> 
> 赞同：23
> 
> 时间：2012-11-02T12:37:32.727
> 
> 标签：.net, powershell, powershell-3.0

如果 PowerShell 脚本由 Powersehll ISE 运行，我想跳过 Start-Transcript、Stop-Transcript 行。

这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-02T12:40:59.313

你可以做：

```
if ($host.name -eq 'ConsoleHost') # or -notmatch 'ISE'
{
  .. do something .. 
}
else
{
  .. do something else..
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-10T01:57:13.447

知道这是很久以前问过的，并且已经标记为已回答，但还有另一种方式：

```
function Test-IsISE {
# try...catch accounts for:
# Set-StrictMode -Version latest
    try {    
        return $psISE -ne $null;
    }
    catch {
        return $false;
    }
} 
```

$psISE 在 ISE 中可用：

[http://technet.microsoft.com/en-us/library/dd819500.aspx](http://technet.microsoft.com/en-us/library/dd819500.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-18T12:13:43.583

`$psISE`这是一个在不生成异常的情况下查找存在的方法：

```
if (Test-Path variable:global:psISE)
{
...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T12:48:37.127

另一种选择...

```
Try {
    Start-Transcript -Path <somepath> | Out-Null
}

Catch [System.Management.Automation.PSNotSupportedException] {
    # The current PowerShell Host doesn't support transcribing
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-09T21:38:41.347

这些都是很好的答案！这是我使用 $host.name 的一种方式

我需要一种方法：

在我的脚本中使用 ReadKey（这在 ISE 中不起作用），但仍然可以通过 Powershell ISE 使用（和运行）该脚本。有办法让脚本知道它是在控制台还是 ISE 中，并分别激活 ReadKey 或 Read-Host。

这是代码：

```
IF ($host.name -eq 'Windows Powershell ISE Host') {$K = Read-Host "Please make your choice"} #Used when you are in ISE.  Will necessitate an ENTER Key.
IF ($host.name -eq 'ConsoleHost') {$KeyPress = [System.Console]::ReadKey();$K = $KeyPress.Key} #Used when running in Console. This will NOT necessitate an ENTER Key. BUT, it ## will NOT work ## in ISE 
```

# heroku - 构建服务对象时出现 AccessTokenRefreshError

> ID：13195407
> 
> 赞同：0
> 
> 时间：2012-11-02T12:37:35.807
> 
> 标签：heroku, oauth-2.0, google-bigquery

我有以下已部署到 Heroku 的代码：

```
credentials = SignedJwtAssertionCredentials(
    settings.SERVICE_ACCOUNT, KEY,
    scope='https://www.googleapis.com/auth/bigquery')
self.http = credentials.authorize(httplib2.Http())
self.service = build('bigquery', 'v2', http=self.http)
self.job_runner = self.service.jobs() 
```

在构建服务对象时，我经常会收到 AccessTokenRefreshError。在这些情况下，我将中止请求，并在稍后重试。但是，我有时会连续 10-15 次出现此错误。我能做些什么来避免这个错误吗？我可以以某种方式手动刷新令牌吗？我在运行查询时也遇到了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T23:00:23.300

Just to start wrapping up this thread, I believe that [using Memcache](https://devcenter.heroku.com/articles/memcache#using-memcache-from-python) is the best way to store OAuth2 authorization credential information that is accessible to all in a instances in a Heroku Dyno.

# ios - facebook ios api问题

> ID：13195411
> 
> 赞同：1
> 
> 时间：2012-11-02T12:37:50.170
> 
> 标签：ios, facebook

我正在为 ios 使用 facebook api，但是当我登录时，我收到了这个错误消息

```
Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:28:01.983

问题是您的应用程序正在使用以下方法之一，这些方法在 iOS 5.0 中已被弃用：

```
didAnimateFirstHalfOfRotationToInterfaceOrientation:
willAnimateFirstHalfOfRotationToInterfaceOrientation:duration:
willAnimateSecondHalfOfRotationFromInterfaceOrientation:duration: 
```

您需要修改视图控制器以替代`willAnimateRotationToInterfaceOrientation:duration:`，而不是覆盖任何“HalfOfRotation”方法。

# c++ - 如何隐藏 CBCGPPropList 的描述区域？

> ID：13195412
> 
> 赞同：0
> 
> 时间：2012-11-02T12:37:51.687
> 
> 标签：c++, uitableview, mfc, controls, cwnd

现在我在 MFC 中使用 CBCGToolBar 的 CBCGPPropList，但我不知道如何将 CBCGPGridCtrl 添加到 CBCGPPropList 中，所以我必须将其留在外面。但是它们之间的描述区域看起来很丑::(

![在此处输入图像描述](../Images/c21da434f1936ac2595a6823e22e34af.png)

**有什么方法可以将类似表格的小部件添加到 CBCGPPropList 中，或者我可以隐藏 CBCGPPropList 的描述区域吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:47:10.463

可能对你有`CBCGPPropList::EnableDescriptionArea(FALSE)`帮助吗？

# configuration - Nginx 错误位置处理

> ID：13195414
> 
> 赞同：1
> 
> 时间：2012-11-02T12:37:53.107
> 
> 标签：configuration, web, nginx

如何正确处理 php 站点的 nginx 配置中所有不存在的位置？我可以找出此类位置的 5 种可能情况。

1.  不正确的文件：*example.com/notexist.jpg*

2.  不正确的文件夹：*example.com/notexist*

3.  嵌套不正确的文件夹：*example.com/notexist1/notexist2/..../notexist10000*

4.  (3)和(1)的组合：*example.com/notexist1/notexist2/..../notexist10000 /not.exist.jpg*

5.  不存在的 php 文件：*example.com/notexist.php*

是否有涵盖所有这些情况的微小而强大的解决方案？还需要避免检查任何文件和目录（使用 -d 和 -f），因为它会增加 CPU 和 IO 开销。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:05:21.280

**try_files**完全为我解决了这个问题

```
location / {
    try_files $uri $uri/index.html $uri.html =404;
} 
```

在 not_found_page 中包含绝对路径也非常重要，否则页面布局将被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:25:30.017

在所有 5 种情况下，通常会返回 404，因此您可以通过以下方式添加对所有这些情况的特殊处理：

1.  创建命名位置
2.  将该命名位置称为 404 错误页面：

这将产生：

```
server {      
  error_page 404 = @errors;

  location @fallback {
    # do whatever you want to do on faulty reqeusts
  }
} 
```

# java - 不断地将来自不同类的数据写入文本文件

> ID：13195420
> 
> 赞同：0
> 
> 时间：2012-11-02T12:38:31.093
> 
> 标签：java, android

我有 3 个不同的类，1 个监视加速度计数据，1 个跟踪 GPS，一个用于写入文件。

我正在使用此代码写入加速和 GPS 类中的文件：

全球定位系统

`file.write(Latitude + "," + Longitude);`

加速

`file.write(sensorEvent.values[0] + ", " + sensorEvent.values[1] + ", " + sensorEvent.values[2]);`

转到文件类中的 write 方法；

```
public void write(String message) {
    try {
        if (out == null) {
            FileWriter datawriter = new FileWriter(file);
            out = new BufferedWriter(datawriter);
        }
        if (file.exists()) {
            out.append(message);
            out.flush();

        }
    } catch (IOException e) {
        Log.e("Error", "fail to write file");
    }
} 
```

我遇到的问题是它只写了一行加速度值，没有 GPS。

如何编写包含加速度和 GPS 值的行，并将这些值写入同一个文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:43:48.080

new FileWriter(file) 创建一个新的空文件，所以你只写了最后一行，之前的所有行都被删除了。您应该将第二个参数 append=true 添加到 FileWriter 构造函数

```
FileWriter datawriter = new FileWriter(file,true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:45:47.410

您可以将两个类的输出连接到一个字符串并将其传递给您的写入函数：

```
myString = yourGpsClassExecute
myString += yourAccelExecute
write(myString) 
```

# php - 谁在线具有高性能的时间戳

> ID：13195426
> 
> 赞同：1
> 
> 时间：2012-11-02T12:38:50.950
> 
> 标签：php, performance

我刚刚创建了一个带有 php 会话的用户登录系统，现在用户可以注册并登录到站点并做其他事情......

现在我想创建 online.php 它将获取所有在线用户。我几乎在 google 和 stackoverflow 中搜索所有内容，但没有成功。

好的，现在我想描述我想以高性能创建的系统。当用户登录时，我们只需更新表`user`。`lastlogin`这是一个时间戳，然后在 online.php 中我们选择 * 每个时间间隔 < 5 分钟的用户。为此，我可以`lastlogin`在用户加载每个页面时更新数据库中的这个时间戳字段，这需要很多 mysql 查询来完成这项工作......然后在每个页面加载中我必须更新

> 更新`user`集`last`=now()

这将花费我很多 mysql 查询。现在我正在寻找另一种方式，比如使用会话或我在[这个链接中找到的东西](https://stackoverflow.com/questions/6385880/how-to-handle-user-online-status-when-he-she-close-the-browser?answertab=votes#tab-top)

> “通常的解决方案是在表中存储一个时间戳，每次用户执行某项操作时都会更新该时间戳。具有最近时间戳（例如五分钟）的用户显示为已登录，其他所有人都已注销。
> 
> 它甚至不必在每次页面加载时都更新。在会话中保留最后一次更新时间的时间戳，并且仅在数据库标志即将到期时更新表。”

但不幸的是，答案并没有太大帮助，我需要一个示例或更多关于此的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:20:18.733

**1.)**如果您需要更快的会话速度，例如**memcache**。一个简单的键值存储来保存您的会话或密钥。您可以将 Apache 配置为所有会话将自动存储在 memcache 中。

**2.)**另一种解决方案是制作一个MySQL 保存在 RAM 中的**MEMORY 表。**问题是当您重新启动服务器时，此表中的数据会丢失。但我认为在你上次登录的情况下没有问题。

**3.)** PHP 共享内存： http: [//php.net/manual/de/ref.shmop.php](http://php.net/manual/de/ref.shmop.php)用于小数据。

当您实施了解决方案时，我更喜欢**MEMORY Table**或 SHM 解决方案。

**编辑：**在 HDD 上搜索的最后一段与顶部的评论有关：[Find Number of Open Sessions](https://stackoverflow.com/questions/679657/find-number-of-open-sessions)

# ios - iPhone双高状态栏导致布局问题

> ID：13195428
> 
> 赞同：2
> 
> 时间：2012-11-02T12:38:51.433
> 
> 标签：ios

由于 iPhone 上的双高状态栏，我在布局方面遇到了很多问题。我的布局以一种为所有 UI 元素提供所需大小的方式组织，调整它们的大小以处理双高状态栏使我的应用程序布局在正常使用中看起来很丑。

请任何人都可以建议当双高状态栏出现时是否有任何替代方法来处理被向下推到屏幕外的布局？并且在正常使用中（没有双高状态栏）UI看起来还不错？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:17:59.910

通常为了处理屏幕大小的变化，自动调整大小规则非常重要（自动布局在 iOS 6 中更加灵活）。

这些规则定义了元素的位置和大小如何根据父视图的大小变化而变化。它们是通用规则，会影响顶部/左侧/底部/右侧边距和宽度/高度，但在大多数情况下适用于大多数人。

你需要决定你希望你的视图看起来像什么高度缩短，并在实现你的视图时考虑到这一点。如果 Autoresize 可以为您处理这个问题，那就太好了！您可以在 IB 中应用它们（在选择视图时在标尺选项卡下），或通过代码：

```
view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

如果您的目标是 iOS 6 及更高版本，您还可以使用 AutoLayout 及其约束系统。

如果这不合适，那么您可以在状态栏更改高度时按需执行自己的转换。这可以通过以下任一方式完成：

1.  在您的 App Delegate 中实现这些委托方法：

    ```
    application:willChangeStatusBarFrame:
    application:didChangeStatusBarFrame: 
    ```

2.  观察这些通知

    ```
    UIApplicationWillChangeStatusBarFrameNotification
    UIApplicationDidChangeStatusBarFrameNotification 
    ```

# sql-server-2008 - 在 SQL Server 中使用游标更新

> ID：13195431
> 
> 赞同：0
> 
> 时间：2012-11-02T12:39:01.277
> 
> 标签：sql-server-2008, tsql, cursor

我有两张桌子`department`和`employee`.

在`department`表中，我有三个列：`DEP_ID, NAME, HIKEINPERCENT`

在`employee`表中，我有四列：`EMP_ID, DEP_ID, EMP_NAME, SALARY`

现在，如果我更新表`HIKEINPERCENT`中的`department`，它应该使用 SQL Server 中的 CURSOR更新表`SALARY`中员工的。`employee`

请带解释的指南..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:59:17.897

不要使用游标。如果您更新部门 HIKEINPERCENT 字段，您应该拥有 DEP_ID 来执行此操作，例如：

```
update department set HIKEINPERCENT = @someNewValue where DEP_ID = @DepartementId 
```

然后，您应该使用以下内容更新员工表中的 SALARY：

```
update employee set SALARY = @SomeCrazyNewValue where DEP_ID = @DepartmentId 
```

如果这对您没有帮助，请在 OP 中提供更具体的信息。

# html - Jquery移动应用程序中闪烁的页面转换

> ID：13195433
> 
> 赞同：3
> 
> 时间：2012-11-02T12:39:02.217
> 
> 标签：html, cordova, jquery-mobile

如何克服 Web 应用程序中移动页面转换期间的闪烁转换/白闪/跳跃？我使用 Jquerymobile 和 Phonegap 的 (.js) 文件。[在https://github.com/jquery/jquery-mobile/issues/4024](https://github.com/jquery/jquery-mobile/issues/4024)或其他网站上发布的解决方案都不 适合我。我不使用单独的 jqueryTransition.js 文件。任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:26:38.193

防止“闪烁”的唯一真正方法是完全禁用 jQuery Mobile 页面转换。在`<head>`您的文档中，放置以下代码：

```
// load jQuery
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

// load your custom jQuery Mobile Defaults
<script type="text/javascript" src="mobile/js/mobile-site-custom-jqm-defaults.js"></script>

// load jQuery Mobile
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

// load your scripts.js (your javascript & functions, etc.)
<script type="text/javascript" src="mobile/js/script.js"></script> 
```

要禁用转换，请在`mobile-site-custom-jqm-defaults.js`文件内放置以下代码：

```
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
   defaultPageTransition: 'none'
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:34:43.517

我只是在使用 LimeJS 框架时遇到了闪烁的过渡，他们通过在过渡之前将对象的不透明度设置为 0 来克服这个问题。从那里开始，过渡效果通过增加不透明度来接管，但也许您的功能不支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:04:41.403

我和你有同样的问题，通过禁用硬件加速解决了。

我在这里报告：http: [//community.phonegap.com/nitobi/topics/disable_hardwareacceleratdisable_hardwareacceleration_on_android_ion_on_android](http://community.phonegap.com/nitobi/topics/disable_hardwareacceleratdisable_hardwareacceleration_on_android_ion_on_android)

简而言之，我的解决方法是在 AndroidManifest.xml 中声明：

```
<application android:hardwareAccelerated="false"/> 
```

另见：http: [//developer.android.com/guide/topics/manifest/application-element.html#hwaccel](http://developer.android.com/guide/topics/manifest/application-element.html#hwaccel)

高温高压

# android - Android OPEN GL ES 多纹理不绘制任何内容

> ID：13195441
> 
> 赞同：2
> 
> 时间：2012-11-02T12:39:31.983
> 
> 标签：android, opengl-es, opengl-es-1.1, multitexturing

我是这个 OpenGL ES 的新手，我正在尝试使用多纹理绘制一个矩形，但它没有显示任何东西，我不知道这有什么问题。任何建议或想法都会对我很有帮助。

这是我的代码：

我所做的是将一些在网上找到但尚未成功获得任何结果的代码汇集在一起​​​​。我可以分两次绘制这个，例如绘制两个具有不同纹理的矩形并产生所需的结果。

我使用了一些`GL11`并`GL10`结合起来可能是一个错误。:PI 不知道对不对。我这样做是因为某些常量不支持使用`GL10`.

```
public void draw(GL10 gl) {
    if(status_flag == DISPLAYING_EYES) {                        
        vertexPointer(gl);          

        firstGanColorVert.position(0);
        gl.glColorPointer(4, GL11.GL_FLOAT, VERTEX_SIZE, firstGanColorVert);        
        //gl.glBindTexture(GL10.GL_TEXTURE_2D, firstGaneshaTexture);            

        gl.glActiveTexture(GL11.GL_TEXTURE0);
        gl.glEnable(GL11.GL_TEXTURE_2D);
        gl.glBindTexture(GL11.GL_TEXTURE_2D, firstGaneshaTexture);
        //Simply sample the texture
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_REPLACE);
        //------------------------
        gl.glActiveTexture(GL11.GL_TEXTURE1);
        gl.glEnable(GL11.GL_TEXTURE_2D);

        fadeAnimation();         
        secondGanColorVert.position(0);
        gl.glColorPointer(4, GL11.GL_FLOAT, VERTEX_SIZE, secondGanColorVert);        
        gl.glBindTexture(GL11.GL_TEXTURE_2D, secondGaneshaTexture);

        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_TEXTURE_ENV_MODE, GL11.GL_COMBINE);
        //Sample RGB, multiply by previous texunit result
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_RGB, GL11.GL_MODULATE);   //Modulate RGB with RGB
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_RGB, GL11.GL_PREVIOUS);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_RGB, GL10.GL_TEXTURE);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_RGB, GL11.GL_SRC_COLOR);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND1_RGB, GL11.GL_SRC_COLOR);
        //Sample ALPHA, multiply by previous texunit result
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_COMBINE_ALPHA, GL11.GL_MODULATE);  //Modulate ALPHA with ALPHA
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC0_ALPHA, GL11.GL_PREVIOUS);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_SRC1_ALPHA, GL11.GL_TEXTURE);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND0_ALPHA, GL11.GL_SRC_ALPHA);
        gl.glTexEnvf(GL11.GL_TEXTURE_ENV, GL11.GL_OPERAND1_ALPHA, GL11.GL_SRC_ALPHA);

        gl.glMatrixMode(GL11.GL_MODELVIEW);
        gl.glLoadIdentity();            
        gl.glTranslatef(this.x,this.y ,0);          
        textCordPointer(gl);        
        gl.glDrawElements(GL11.GL_TRIANGLES, 6, GL11.GL_UNSIGNED_SHORT, indices); 
    }
} 
```

这是对我有用的代码，但我想使用多纹理而不是这个：

```
firstGanColorVert.position(0);
gl.glColorPointer(4, GL10.GL_FLOAT, VERTEX_SIZE, firstGanColorVert);        
gl.glBindTexture(GL10.GL_TEXTURE_2D, firstGaneshaTexture);          

gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity();            
gl.glTranslatef(this.x,this.y ,0);  

textCordPointer(gl);        
gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indices);   

fadeAnimation();

secondGanColorVert.position(0);
gl.glColorPointer(4, GL10.GL_FLOAT, VERTEX_SIZE, secondGanColorVert);
gl.glBindTexture(GL10.GL_TEXTURE_2D, secondGaneshaTexture);         

gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity();            
gl.glTranslatef(this.x,this.y ,0);          
textCordPointer(gl);        
gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, indices); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:46:59.683

1) 如果某些常量不被 GL10 支持，那么它们的功能也不受支持。只需使用 GL11 即可。无论如何，GL11 扩展了 GL10。GL10 将看到 GL11 常量，并且可能最终什么都不做，或者至少什么都不做。

2）我不确定是什么`fadeAnimation()`，但有些东西告诉我你想在你开始用你的第二个纹理做任何事情之前把它放好。也就是说，把它放在`//------------------------`. 无论如何，这就是您在第二个代码块中完成的方式。

3）您不需要第二次致电`gl.glEnable(GL_TEXTURE_2D)`after `gl.glActiveTexture(GL11.GL_TEXTURE1)`。

# r - R中的移动方差

> ID：13195442
> 
> 赞同：30
> 
> 时间：2012-11-02T12:39:35.363
> 
> 标签：r

我知道`filter()`R 中的函数计算移动平均线。我想知道是否存在返回移动方差或标准差的函数，以便将其与函数的输出并排显示在图中`filter()`。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-02T12:52:25.653

考虑**zoo**包。例如`filter()`给出：

```
> filter(1:100, rep(1/3,3))
Time Series:
Start = 1 
End = 100 
Frequency = 1 
  [1] NA  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
 [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
 [51] 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75
 [76] 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 NA 
```

而`rollmean()`在**动物园里**给出：

```
> rollmean(1:100, k = 3, na.pad = TRUE)
  [1] NA  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
 [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
 [51] 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75
 [76] 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 NA 
```

这是相同的（在此示例中为 3 点移动平均线）。

虽然**zoo**没有 a`rollsd()`或`rollvar()`它有`rollapply()`，但它的工作方式类似于`apply()`将任何 R 函数应用于指定窗口的函数。

```
> rollapply(1:100, width = 3, FUN = sd, na.pad = TRUE)
  [1] NA  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 [26]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 [51]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1
 [76]  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1  1 NA
Warning message:
In rollapply.zoo(zoo(data), ...) : na.pad argument is deprecated 
```

或者更有趣的事情：

```
> rollapply(vec, width = 3, FUN = sd, na.pad = TRUE)
  [1]        NA 0.3655067 0.8472871 0.5660495 0.3491970 0.4732417 0.9236859
  [8] 0.8075226 1.8725851 1.1930784 0.6329325 1.1412416 0.8430772 0.5808005
 [15] 0.3838545 1.1738170 1.1655400 1.3241700 0.6876834 0.1534157 0.4858477
 [22] 0.9843506 0.6002713 0.6897541 2.0619563 2.5675788 6.3522039 6.0066864
 [29] 6.2618432 5.1704866 2.1360853 2.5602557 1.0408528 1.0316396 4.9441628
 [36] 5.0319314 5.7589716 3.2425000 4.8788158 2.0847286 4.5199291 2.5323486
 [43] 2.1987149 1.8393000 1.2278639 1.5998965 1.5341485 4.4287108 4.4159166
 [50] 4.3224546 3.6959067 4.9826264 5.3134044 8.4084322 9.1249234 7.5506725
 [57] 3.8499136 3.9680487 5.6362296 4.9124095 4.3452706 4.0227141 4.5867559
 [64] 4.7350394 4.3203807 4.4506799 7.2759499 7.6536424 7.8487654 2.0905576
 [71] 4.0056880 5.6209853 1.5551659 1.3615268 2.8469458 2.8323588 1.9848578
 [78] 1.1201124 1.4248380 1.7802571 1.4281773 2.5481935 1.8554451 1.0925410
 [85] 2.1823722 2.2788755 2.4205378 2.0733741 0.7462248 1.3873578 1.4265948
 [92] 0.7212619 0.7425993 1.0696432 2.4520585 3.0555819 3.1000885 1.0945292
 [99] 0.3726928        NA
Warning message:
In rollapply.zoo(zoo(data), ...) : na.pad argument is deprecated 
```

`fill = NA`您可以通过使用参数来消除警告，如

```
> rollapply(vec, width = 3, FUN = sd, fill = NA) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-02T14:20:40.467

TTR 包`runSD`包括：

```
> library(TTR)
> ls("package:TTR", pattern="run*")
 [1] "runCor"    "runCov"    "runMAD"    "runMax"    "runMean"  
 [6] "runMedian" "runMin"    "runSD"     "runSum"    "runVar" 
```

`runSD`将比`rollapply`因为它避免进行许多 R 函数调用要快得多。例如：

```
rzoo <- function(x,n) rollapplyr(x, n, sd, fill=NA)
rttr <- function(x,n) runSD(x, n)
library(rbenchmark)
set.seed(21)
x <- rnorm(1e4)
all.equal(rzoo(x,250), rttr(x,250))
# [1] TRUE
benchmark(rzoo(x,250), rttr(x,250))[,1:6]
#           test replications elapsed relative user.self sys.self
# 2 rttr(x, 250)          100    0.58    1.000      0.58     0.00
# 1 rzoo(x, 250)          100   54.53   94.017     53.85     0.06 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-02T12:47:40.337

`rollapply`在`zoo`包中采用任意函数。它与默认情况下`filter`不包括s 不同。`NA`

话虽如此，但为一个很容易自己滚动的函数加载一个包并没有多大意义（双关语）。

这是右对齐的：

```
my.rollapply <- function(vec, width, FUN) 
    sapply(seq_along(vec), 
           function(i) if (i < width) NA else FUN(vec[i:(i-width+1)]))

set.seed(1)
vec <- sample(1:50, 50)
my.rollapply(vec, 3, sd)
 [1]        NA        NA  7.094599 12.124356 16.522712 18.502252 18.193405  7.234178  8.144528
[10] 14.468356 12.489996  3.055050 20.808652 19.467922 18.009257 18.248288 15.695010  7.505553
[19] 10.066446 11.846237 17.156146  6.557439  5.291503 23.629078 22.590558 21.197484 22.810816
[28] 24.433583 19.502137 16.165808 11.503623 12.288206  9.539392 13.051181 13.527749 19.974984
[37] 19.756855 17.616280 19.347696 18.248288 15.176737  6.082763 10.000000 10.016653  4.509250
[46]  2.645751  1.527525  5.291503 10.598742  6.557439

# rollapply output for comparison
rollapply(vec, width=3, sd, fill=NA, align='right')
 [1]        NA        NA  7.094599 12.124356 16.522712 18.502252 18.193405  7.234178  8.144528
[10] 14.468356 12.489996  3.055050 20.808652 19.467922 18.009257 18.248288 15.695010  7.505553
[19] 10.066446 11.846237 17.156146  6.557439  5.291503 23.629078 22.590558 21.197484 22.810816
[28] 24.433583 19.502137 16.165808 11.503623 12.288206  9.539392 13.051181 13.527749 19.974984
[37] 19.756855 17.616280 19.347696 18.248288 15.176737  6.082763 10.000000 10.016653  4.509250
[46]  2.645751  1.527525  5.291503 10.598742  6.557439 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-27T18:10:31.963

`runner`[runner](https://gogonzo.github.io/runner/articles/apply_any_r_function.html)包中的函数在运行的窗口上应用任何 R 函数。可以通过`runner`设置长度`k`或指定简单窗口`lag`。下面`sd`按照 OOP 在 4 元素窗口上的建议移动。

[![在此处输入图像描述](../Images/93e0516bc676ce8261c233ad80f6b78c.png)](https://i.stack.imgur.com/plzfy.png)

```
library(runner)

set.seed(1)
x <- rnorm(20, sd = 1)
runner(x, sd, k = 4, na_pad = TRUE)

#[1]        NA        NA        NA 1.1021597 0.9967429 1.1556947 0.9884053 0.6902835 0.7180483 0.4647160
#[11] 0.7454670 0.7489618 0.9449882 1.5821988 1.4459037 1.3889432 1.3954101 0.6193867 0.5296744 0.4266423 
```

* * *

要在日期窗口上应用运行函数，应该指定`idx`. 的长度`idx`应与日期或整数类型相同，`x`并且应为日期或整数类型。下面的示例说明了大小`k = 4`滞后的窗口`lag = 1`。每个窗口的括号中的索引范围。

[![在此处输入图像描述](../Images/ad7754f109022fa6d158abda424de0e1.png)](https://i.stack.imgur.com/pxRKA.png)

```
idx <- c(4, 6, 7, 13, 17, 18, 18, 21, 27, 31, 37, 42, 44, 47, 48)
runner::runner(x = 1:15, 
               k = 5,
               lag = 1,
               idx = idx,
               f = function(x) mean(x))

# [1]   NA  1.0  1.5   NA  4.0  4.5  4.5  6.0   NA  9.0   NA 11.0 12.0 12.5 13.5 
```

[文档和小插图](https://gogonzo.github.io/runner/index.html)中的更多信息

# mysql - 从 GROUP BY 组中选择具有特定内容的行

> ID：13195447
> 
> 赞同：0
> 
> 时间：2012-11-02T12:39:47.957
> 
> 标签：mysql, if-statement, group-by, row, exists

我有两个表允许用户请求歌曲。当然，多个用户可以请求一首歌曲：

```
| Id | Song_Name |       | Requested_Id |  By_IP  |
+====+===========+       +==============+=========+
| 1  |   song1   |       |      1       | 1.1.1.1 |
| 2  |   song2   |       |      1       | 2.2.2.2 |
| 3  |   song3   |       |      1       | 3.3.3.3 |
                         |      2       | 2.2.2.2 | 
```

为了防止一个用户多次请求一首歌曲（滥用），我需要检查某首歌曲是否已经被只是试图再次请求的用户请求。所以我`LEFT JOIN`在第一个和第二个表之间做 a 和 a `GROUP BY`by the row's `Id`，它为每首歌曲返回一行。

**问题**：`GROUP BY`在未分组的字段上返回不可预测的值。这是众所周知的。但是，如果此 IP 存在于该组中，如何确保`SELECT`返回包含特定 IP 的行？如果 IP 不存在，则可以返回组的任何其他行`SELECT`。

非常感谢！

**更新：**我需要在列表中显示这首歌，与有多少用户（甚至根本没有）请求它无关。所以 SELECT 肯定需要为每首歌曲返回一行。但是，如果 IP 3.3.3.3 的用户尝试请求歌曲 1（他已经请求过），我希望查询返回以下内容：

```
| Id | Song_Name |  By_IP  |
+====+===========+=========+
| 1  |   song1   | 3.3.3.3 |  (3.3.3.3 in case it exists, otherwise anything else)
| 2  |   song2   | 2.2.2.2 | 
```

我还需要与其他请求 (IP) 进行分组，因为我还需要获取每首歌曲的全部请求数。因此我使用 Count()。

**变通方法：**由于做我需要的事情似乎很复杂（如果可能的话），我现在正在使用一种变通方法。我正在使用 GROUP_CONCAT() 聚合函数。这为我提供了该组的所有 IP，以“，”分隔。所以我可以搜索我正在搜索的那个是否已经存在。唯一的缺点是，这个返回字符串的（默认）最大长度是 1024。这意味着我无法处理大量用户，但现在应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:59:00.853

目前还不清楚你想要什么？表中没有要求的日期。没有日期，您如何知道何时请求了特定歌曲。

```
选择 Songs.id、Songs.Song_name、requested_songs.By_IP
从歌曲
 INNER JOIN 请求_歌曲
    在 Songs.id = requested_songs.Requested_id
    Group BY requested_songs.Requested_id
按 request_songs.Requested_id ASC 排序
;

```

**[SQLFiddle 演示：](http://www.sqlfiddle.com/#!2/06d5b/6)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:58:08.447

只需按 Song_Name 和 By_IP 分组即可。像这样

```
SELECT * FROM  `songs` JOIN users GROUP BY song_name, ip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:03:42.827

你确定你没有过度思考你的解决方案吗？如果您只想消除重复项，只需`UNIQUE`在第二个表的两列上都放置一个索引。

如果您尝试对此进行更复杂的操作`GROUP BY`，请按照 Quassnoi 的要求提供示例结果集。

# php - 我的 mysql_fetch_assoc 中的一些错误

> ID：13195448
> 
> 赞同：-5
> 
> 时间：2012-11-02T12:39:50.703
> 
> 标签：php

我正在尝试创建一个基于谣言的网站。在网站的一部分中，有一个工作功能，您可以在其中发布谣言并显示谣言。

但是我正在主页上工作，以便将两个最新的谣言放在一个表格中。使用下面的代码，有一个没有行的表，尽管数据在 mysql 表中，并且此错误消息：

> 警告：mysql_fetch_assoc()：提供的参数不是第 212 行 /websites/123reg/LinuxPackage22/th/eq/li/theqlick.com/public_html/leeds.php 中的有效 MySQL 结果资源

任何想法？我的代码如下：

```
$query = "SELECT * FROM rumour ORDER BY id DESC";
$row = mysql_fetch_assoc($query); 
$id = $row['id'];
$name = $row['name'];
$description = $row['description'];

echo "<table class ='rumour' border='1'>";
echo "<tr>";
echo "<td style = 'font-size:18pt;font-family:Noteworthy-Bold;'> Hot Rumours  </td>";
echo "<tr>";
echo "<td class = 'td1'>". text2link($row['description']). "</td>";
echo "</tr>";
echo "<tr>";
echo "<td class = 'td1'>". text2link($row['description']). "</td>";
echo "</tr>";
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:41:51.107

您将字符串发布到 mysql_fetch_assoc，而不是 mysql_query ...

```
$query = "SELECT * FROM rumour ORDER BY id DESC"; 
```

应该

```
$query = mysql_query("SELECT * FROM rumour ORDER BY id DESC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:42:29.577

该[功能的手册](http://php.net/mysql_fetch_assoc)说：

```
array mysql_fetch_assoc ( resource $result ) 
```

您传递给它的是一个包含查询的字符串，而不是运行查询的结果。

你需要先通过它[`mysql_query`](http://php.net/mysql_query)。

… 至少如果你继续使用`mysql_*`，你会这样做，这是你不应该的。它已[过时](https://stackoverflow.com/q/12859942/19068)，您应该使用[现代替代品](http://php.net/manual/en/mysqlinfo.api.choosing.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T12:44:52.677

使用是在字符串类型的 mysql_fetch_assoc($query) 中直接使用 $query。你忘了得到结果。改用这个：

```
$query="Your query here";
$result=msqyl_query($query);
$row = mysql_fetch_assoc($query); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T12:45:24.050

您忘记使用`mysql_query`函数执行查询

试试这个代码可能对你有帮助

```
$query = "SELECT * FROM rumour ORDER BY id DESC";
$result=mysql_query($query);
$row = mysql_fetch_assoc($result); 
```

# html - div中真正的透明空间。没有文字，只有背景可见

> ID：13195449
> 
> 赞同：0
> 
> 时间：2012-11-02T12:39:56.143
> 
> 标签：html, css

我有一个带背景的 DIV，其中有一个文本和另一个 FIXED DIV，它放在第一个带背景的 DIV 上。我给 FIXED DIV 一个颜色，文本在它后面，我不给 DIV 颜色（希望它透明）并且文本在上面，我给 DIV 透明度，背景和文本都是可见的。

```
<div id="transparent"></div> <!-- fixed -->
<div id="content"> <!-- content with background and text -->
  content content content content content content content content content content content content content content content content content content 
</div> 
```

我想实现有主背景、主文本和一个 FIXED DIV，它将只显示没有任何文本的背景（但是我不想在其上应用另一个被裁剪的背景图像）

这是我想要实现的目标： ![在此处输入图像描述](../Images/921ff402cc2725bba3f4271ecc82710e.png)

这是 jsFiddle 看看现在的情况：http: [//jsfiddle.net/9ggvD/](http://jsfiddle.net/9ggvD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:54:36.950

见我的小提琴：

[http://jsfiddle.net/9ggvD/2/](http://jsfiddle.net/9ggvD/2/)

我`#transparent`将 div css 编辑为：

```
#transparent
{
    position:fixed;
    background:url('http://c.dryicons.com/files/graphics_previews/blue.jpg') no-repeat top left;
    background-attachment: fixed;
    left:45px;
    top:300px;
    width:400px;
    height:30px;
} 
```

# django - Sublime Text - 将项目类型设置为 Django

> ID：13195450
> 
> 赞同：0
> 
> 时间：2012-11-02T12:40:04.393
> 
> 标签：django, sublimetext2, sublimetext

有点困惑。试图在 Sublime Text 中创建一个 Django 项目。

我遵循了这个 [netuts 指南](http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-project-bliss/) 所以我添加了一个文件夹并将一个项目设置为 django.sublime-project

我安装了 Djaniero 插件。所以我的问题是我现在如何把它变成一个 django 项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T14:45:47.763

Djaniero 只是 Django 的片段集合。

如果您正在寻找可以为 Python 等提供自动完成功能的插件，请查看[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)或[SublimeRope](https://github.com/JulianEberius/SublimeRope)。

# android - 一个接一个地同时流畅地播放视频[没有可见的从一个切换到另一个]

> ID：13195455
> 
> 赞同：14
> 
> 时间：2012-11-02T12:40:30.720
> 
> 标签：android, video-streaming, android-videoview

我是 android 新手，想一个接一个地同时播放视频，让它看起来像连续的视频。

我发现 stackoverflow 上的这个链接非常有帮助。[How-to-play-videos-one-after-another-simultaneously](https://stackoverflow.com/questions/11560445/how-to-play-videos-one-after-another-simultaneously) 当我使用它时，虽然我可以一个接一个地播放视频， **但是从一个片段切换到另一个片段会导致*视频暂停一秒钟，然后再播放下一个一*。** 因此，它看起来不像是连续的视频。

请帮我解决我的问题。这是我的代码。

```
public class VideoActivity extends Activity{

     VideoView videoView, videoView1;
     MediaController mc;
     int count = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video);

        videoView = (VideoView) findViewById(R.id.VVSimpleVideo);
        setup();
        videoView.setOnCompletionListener(completionListener);

    }

    public void setup() {

        String _path = "/mnt/sdcard/Video/"+count+".mp4";
        videoView.setVideoPath(_path);
        videoView.start();
        count++;
    }

    private OnCompletionListener completionListener=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            setup();
        }
    };

} 
```

**现在我尝试通过使用 VideoView 类的两个实例来播放。** 尝试播放第一个播放器的第一个视频和第二个播放器的第二个视频，第一个播放器的第三个视频和第二个播放器的第四个视频，依此类推。

但是我仍然无法流畅地播放视频，并且存在同样的问题。

这是我的双人播放器代码。

```
public class VideoActivity extends Activity{

     VideoView videoView, videoView1;
     MediaController mc;
     int count = 0;
     String _path;
     String _path1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video);

        videoView = (VideoView) findViewById(R.id.VVSimpleVideo);
        _path = "/mnt/sdcard/Video/"+count+".mp4";
        videoView.setVideoPath(_path);
         videoView.start();
        //setup();
        videoView.setOnCompletionListener(completionListener);

        videoView1 = (VideoView) findViewById(R.id.VVSimpleVideo);

        videoView1.setOnCompletionListener(completionListener1);
        count++;
        _path1 = "/mnt/sdcard/Video/"+count+".mp4";
        videoView1.setVideoPath(_path1);
    }

    public void setup() {

        videoView.start();
        count++;
        _path1 = "/mnt/sdcard/Video/"+count+".mp4";
        videoView1.setVideoPath(_path1);
    }

    public void setup1() {

        videoView1.start();

        count++;
        _path = "/mnt/sdcard/Video/"+count+".mp4";
        videoView.setVideoPath(_path);
    }

    private OnCompletionListener completionListener=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            setup1();       

        }
    };

    private OnCompletionListener completionListener1=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();

            setup();        

        }
    };

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:12:53.150

你根本没有真正使用两个`VideoViews`，你同时分配了`VideoView`和`VideoView1`，`R.id.VVSimpleVideo`所以它们是同一个对象。这意味着每次您点击 时`onCompletion`，它都会重新设置自己，而不是设置一个并播放另一个。

尝试`VideoView`在布局中创建两个单独的对象。将`VISIBLE`一组设置为`GONE`/设置一组`INVISIBLE`，并在您想要更改时交换。

不过，我不能保证它会使其“无缝”，因为这几乎是不可能完成的任务。即使是大多数桌面媒体播放器也不是真正无缝的。这仅取决于您对接缝的容忍度。

# sql - 我可以在 Oracle Instant Client 中使用直接路径加载吗？

> ID：13195457
> 
> 赞同：0
> 
> 时间：2012-11-02T12:40:35.650
> 
> 标签：sql, oracle, instantclient

我在 Oracle 完整客户端中使用 SQL*LOADER 使用 ctl 文件进行批量上传。但我计划转移到 SQL*LOADER 不起作用的即时客户端。我从 Oracle OCI 参考资料[http://oracle.su/docs/11g/appdev.112/e10646/oci13obn.htm#BAJJGACH](http://oracle.su/docs/11g/appdev.112/e10646/oci13obn.htm#BAJJGACH)中发现我可以在 OCI 中使用直接路径加载。这是否意味着，我将能够使用 Oracle Instant Client 使用直接路径加载？你能告诉我一些好的链接\教程如何使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:37:10.647

Oracle 即时客户端不包含 sql*loader。有些人设法通过将 sqlldr 可执行文件复制到即时客户端目录中来使其工作，因为 sqlldr 不依赖任何服务器端组件。问题是：值得麻烦吗？当然：Oracle 不支持它。

查看此线程： [https ://forums.oracle.com/forums/thread.jspa?threadID=460097](https://forums.oracle.com/forums/thread.jspa?threadID=460097)

# simpledateformat - 如何将 JDateChooser 字段的输出解析为有用的内容？

> ID：13195462
> 
> 赞同：1
> 
> 时间：2012-11-02T12:41:25.440
> 
> 标签：simpledateformat, parseexception, jdatechooser

当我从我的 JDateChooser 获得日期时，我得到如下信息：

2012 年 11 月 2 日星期五 23:20:32 EST

我试过使用 SimpleDateFormat 但我收到一个错误，说它无法解析。

我需要格式的日期：“yyyy-MM-dd”

这是我正在使用的 JDateChooser 的 API：[http ://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html](http://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T03:19:38.853

我似乎一直在错误地使用 SimpleDateFormat。

解决方案是：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
String startDateString = dateFormat.format(projectStartDateJDateChooser.getDate()); 
```

# javascript - jquery，找到不属于任何祖先的最近的div

> ID：13195463
> 
> 赞同：0
> 
> 时间：2012-11-02T12:41:32.010
> 
> 标签：javascript, jquery

HTML：

```
<div class="find_div" id="some_id_1"></div>

<!-- other divs -->

<div class="find_div" id="some_id_2"></div>

    <!-- other divs -->

<div class="find_div" id="some_id_3"></div>

<!-- other divs -->

    <div class="target_div"></div>

<div class="find_div" id="some_id_4"></div>

<!-- other divs -->

<div class="find_div" id="some_id_5"></div>

    <!-- other divs -->

<div class="find_div" id="some_id_6"></div>

<!-- other divs --> 
```

1）找到 `find_div`最接近的方法是`target_div`什么？

2）如何找到其他`find_div`不那么接近的 div ？

请注意，在所讨论的案例中没有祖先关系。因此，我认为 jaquery`closest()`在这里无效。

[在我之前在这里](https://stackoverflow.com/questions/13137404/jquery-find-div-class-name-at-a-certain-position-while-scrolling)提出了一个相关问题的问题后，我提出了这个问题。希望不要做任何重复。

**编辑：**在该行之前添加了几行代码`target_div`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:47:24.047

尝试[.nextAll()](http://api.jquery.com/nextAll/) - 抓取与给定选择器匹配的所有后续兄弟

```
$('.target_div').nextAll('.find_div').first();// gets closest one after

$('.target_div').nextAll('.find_div').eq(0) // <-- index of where they are in the collection 
```

**编辑**

您将不得不对上一个和下一个 div 进行一些计算..并通过获取它们的位置来查看哪个更接近。

```
var $tdiv = $('.target_div');
var $prev = $tdiv.prevAll('.find_div').first();// prev .find_div div
var $nex = $tdiv.nextAll('.find_div').first();// next .find_div div
var closest;
// get distance between bottom of prev div and top of target div
var $prevDistance = $tdiv.position().top - ($prev.position().top + $prev.height());
// get distance between bottom of target div and top of next div
var $nexDistance = $nex.position().top - ($tdiv.position().top + $tdiv.height());

// if prev div distance is less than next div - closest == prev div
if ($prevDistance < $nexDistance) {
    closest = $prev;
} else {
    closest = $nex;
}
// now you can do whatver you want with the closest element
closest.dowhatever
// or if you want to do something to all others except closest
$('.find_div').not(closest).dowhatever 
```

[小提琴](http://jsfiddle.net/c5gD9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:48:22.070

您可以使用`nextAll:`

1)

```
$('.target_div').nextAll(".find_div").first() 
```

2)

```
$('.target_div').nextAll(".find_div").not(':first') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:11:50.677

由于任何横向 DOM 方法都有“单向方向”，因此您最好的选择似乎是从“body”标签元素开始，然后在 DOM 中下降以获取所有元素。这应该进行优化，但为了让您了解总体思路，请查看以下[jsFiddle](http://jsfiddle.net/ZsCFL/)：（如果相等，则返回 2 个 DOM 元素）

```
 var domElems = $('body').find('*'),
    index = 0,
    targetIndex, prevIndex, nexttIndex, grabbedElems = [],
    results = [];

for (var i = 0, z = domElems.length; i < z; i++) {
    index++;
    if ($(domElems[i]).is('.find_div')) grabbedElems[index] = $(domElems[i]);
    else if ($(domElems[i]).is('.target_div')) targetIndex = index;
}

for (var i = 0, z = grabbedElems.length; i < z; i++) {
    if (grabbedElems[i]) {
        if (i < targetIndex) prevIndex = i;
        else if (i > targetIndex) {
            nextIndex = i;
            break;
        }
    }
}

if (Math.abs(prevIndex - targetIndex) <= Math.abs(nextIndex - targetIndex)) results.push(grabbedElems [prevIndex]);

if (Math.abs(nextIndex - targetIndex) <= Math.abs(prevIndex - targetIndex)) results.push(grabbedElems [nextIndex]);

if (results.length > 0) console.log(results[0]);
if (results.length > 1) console.log(results[1]);​ 
```

# php - 在选定的时间后停止执行循环

> ID：13195464
> 
> 赞同：2
> 
> 时间：2012-11-02T12:41:33.150
> 
> 标签：php, loops

我想在选定的时间后停止执行循环。意味着循环时它将尝试执行一个参数并花费很长时间，然后它将完成工作并转到下一个参数。如 ：

```
for ($i=2 ; $i <= 100 ; $i++) 
```

在这里，假设它将循环 3,4,5,6,7,8,9,10 并且在 11 中将需要很长时间才能执行。所以我只想在（即 10 秒）之后停止它并采取下一个选项，我的意思是 12、13、14 ......等等。所以，我该怎么做。我设置了这个`set_time_limit(10);`，但它在这里不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:52:12.567

您可以使用[microtime()](http://php.net/manual/en/function.microtime.php)来测量经过的时间。请注意，这只会在迭代完成后中断。

```
$start = microtime(true);
$limit = 10;  // Seconds

for ($i=2 ; $i <= 100 ; $i++) {
  if (microtime(true) - $start >= $limit) {
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:45:48.330

那是相当复杂的。您必须创建一个单独的线程来进行处理，以便您的主线程可以检查它是否已经运行了太长时间。

这些线程在 PHP 中称为“分叉”。

您必须研究[过程控制功能](http://www.php.net/manual/en/book.pcntl.php)，尤其是`[pcntl_fork][2]`. 然后，使用[pcntl_sigtimedwait](http://www.php.net/manual/en/function.pcntl-sigtimedwait.php)，您可以在给定的超时期间等待分叉的进程。返回时`pcntl_sigtimedwait`，可以查看它的返回值，看看进程是否超时。

# jenkins - 构建稳定性插件无法从声纳仪表板上的詹金斯获取数据

> ID：13195465
> 
> 赞同：0
> 
> 时间：2012-11-02T12:41:35.247
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我已经下载了构建稳定性 1.1.2 并将其安装到我的声纳 v3.2 中。但是，在为詹金斯设置 Cimanagement 和用户 ID/密码后，没有显示构建稳定性图表，知道吗？那里没有数据..

谁能帮我解决这个问题？？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:06:31.350

我找到了解决方案。实际上我使用的是“Hudson:hudson.glassfish.org/job/hudson/”；POM.xml 中 Cimanagement 属性中的 URL 此 URL 作为“docs.codehaus.org/display/SONAR/Build+Stability+Plugin”的示例给出；链接，而我必须在 jenkins 中使用我自己的工作 URL，即“Hudson:localhost:8080/jenkins/job/Maven_SVN_Trial_1/”

# java - java：如何同步对数据库的访问？

> ID：13195472
> 
> 赞同：1
> 
> 时间：2012-11-02T12:42:17.053
> 
> 标签：java, concurrency

我从几个 url 解析一些东西并在数据库中插入数据。我现在想并行执行此操作。我创建了一个线程池并在单独的线程中运行链接。但这并不安全。我决定从网络获取数据并将其保存到数据库的同步方法，如下所示：

```
 synchronized (this) {
                Parser parser = new Parser(link);
                feeds = parser.parse();
                model.insertFeeds(feeds, link);
            } 
```

但是这种方法阻止了其他线程对 web 和数据库的访问，直到当前线程解析数据并插入（这是他工作的 99%），所以它们似乎不止一个一个地执行，而不是并行执行。

你能告诉这样的事情更好的解决方案是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:47:56.910

您应该让 DB 为您处理并发，控制的方式是通过[JDBC 事务隔离级别](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzaha/transiso.htm)

# c# - BlockingCollection 多个消费者

> ID：13195474
> 
> 赞同：7
> 
> 时间：2012-11-02T12:42:26.557
> 
> 标签：c#, multithreading, thread-safety, consumer, blockingcollection

我有以下代码，其中包含一个生产者线程和多个消费者线程。你知道多个消费者是否是线程安全的。例如，线程 1 是否有可能正在消耗，而线程 2 是否并行消耗并更改线程 1 中使用的项目的值？

```
namespace BlockingColl
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            for (int i = 0; i < 3; i++)
            {

                ThreadPool.QueueUserWorkItem((x) =>
                   {
                       foreach (var item in bc.GetConsumingEnumerable())
                       {
                           Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - " + item + " - " + DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));
                       }
                   });
            }
        }
        catch (Exception)
        {

            throw;
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 3; i++)
        {

            ThreadPool.QueueUserWorkItem((x) =>
               {
                   Cache.Consume();
               });
        }

        for (int i = 0; i < 50000; i++)
        {
            Cache.bc.TryAdd(new Client() { ClientId = i, ClientName = "Name" + i });
        }
    }
}

static class Cache
{
    public static BlockingCollection<Client> bc = new BlockingCollection<Client>();

    public static void Consume()
    {
        foreach (var item in bc.GetConsumingEnumerable())
        {
            Console.WriteLine(Thread.CurrentThread.ManagedThreadId + " - " + item + " - " + DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff tt"));
        }
    }
}

public class Client
{
    public int ClientId { get; set; }
    public string ClientName { get; set; }
}
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:11:46.243

一旦你消费了一个元素，它就会从集合中删除，所以没有其他线程能够访问它（至少通过集合）。

那个 Cache 对我来说更像是一个缓冲区。无论如何，它在阻塞集合之上添加了什么？缓存能够使用自己的元素，这很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:41:14.037

BlockingCollection 仅阻止集合本身。不是列表中的对象。

# c# - 您如何实际实施搜索合同？（C＃）

> ID：13195477
> 
> 赞同：1
> 
> 时间：2012-11-02T12:42:47.050
> 
> 标签：c#, search, windows-8, windows-store-apps

我在理解和让搜索合同在我的商店应用程序中工作时遇到了一些麻烦。我一直找不到任何类型的文档或指南来解释使用合同的结构。（我查看了 MSDN 上的快速入门、搜索合同示例和构建视频，但这仅涉及 javascript）

到目前为止，我已经能够运行查询并在我的搜索合同页面中获取（自定义对象）列表，然后我尝试将其分配给 defaultviewmodel.results，但无论我输入什么查询，我都没有显示在页面上。还有什么我需要设置的吗？到目前为止，我所拥有的如下（摘录）：

应用程序.xaml.cs

```
protected override void OnSearchActivated(Windows.ApplicationModel.Activation.SearchActivatedEventArgs args)
        {
            SearchCharmResultsPage.Activate(args.QueryText, args.PreviousExecutionState);
            SearchCharmResultsPage.ProcessSearchQuery(args.QueryText);
        }    

public async static void ProcessSearchQuery(string queryString)
        {
            try
            {
                StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync("recipeCustomObject                  Debug.WriteLine("Database exists, connecting");
                SQLiteAsyncConnection connection = new SQLiteAsyncConnection("CustomObject_db");
                List<CustomObject> resultsList = new List<CustomObject>();
                string query = "SELECT * FROM CustomObjectDB";
                resultsList =  await connection.QueryAsync<RecipeRecord>(query);  
            }
            catch (FileNotFoundException fnfExc)
            {
                Debug.WriteLine("FNFEXC: " + fnfExc.ToString());
            }
        } 
```

我认为这可能是问题所在，尽管我不确定是否是这样，或者如何改变它。resultsList 列表是在这里创建的，但是因为它的方法是异步的，所以我无法从该方法返回。因此，我猜测当我尝试`this.DefaultViewModel[Results] = resultsList;`在 LoadStateMethod 中分配时，该对象不存在（认为程序不会引发错误）。当我尝试在`ProcessSearchQuery`方法中添加同一行时，我被告知这`this`在静态方法中无效，但我认为我需要该方法是静态的？我的问题可能只是一个基本的逻辑错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:56:43.910

终于明白了！在这里找到了解决方案：http: [//jeffblankenburg.com/2012/11/06/31-days-of-windows-8-day-6-search-contract](http://jeffblankenburg.com/2012/11/06/31-days-of-windows-8-day-6-search-contract)

对于那些在未来寻找答案的人来说，关键是确保您在`Filter_SelectionChanged`方法中拥有搜索逻辑，这是我没有做的事情。查看上述链接中的指南以了解结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:49:18.813

你看过开发者中心的[搜索合同样本吗？](http://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5)那里也有一个 C#/XAML 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:25:38.320

我的开源 Win8 RSS 阅读器框架实现了搜索（和分享）看看源代码，如果你还有问题，我很乐意帮助[http://win8rssreader.codeplex.com/](http://win8rssreader.codeplex.com/)

# html - 如何使用边框折叠折叠突出显示表格单元格的 4 个边框

> ID：13195478
> 
> 赞同：5
> 
> 时间：2012-11-02T12:42:50.747
> 
> 标签：html, css, html-table

我想突出显示具有类的单元格的边界`active`。

问题是表格的`border-collapse`属性设置为 `collapse`，这将隐藏单元格的`top`和`left`边框（最左边和顶行单元格除外）。这导致了一个问题，即突出显示类（`active`）没有突出显示`top`和`left`边框。

你可以在[这里](http://jsfiddle.net/arunpjohny/2ahfP/)找到问题。

**HTML**

```
<div style="padding: 10px">
    <table>
        <tr>
            <td>1.1</td>
            <td>1.2</td>
            <td>1.3</td>
            <td>1.4</td>
            <td>1.5</td>
        </tr>
        <tr>
            <td>2.1</td>
            <td>2.2</td>
            <td class="active">2.3</td>
            <td>2.4</td>
            <td>2.5</td>
        </tr>
        <tr>
            <td>3.1</td>
            <td>3.2</td>
            <td>3.3</td>
            <td>3.4</td>
            <td>3.5</td>
        </tr>
        <tr>
            <td>4.1</td>
            <td>4.2</td>
            <td>4.3</td>
            <td>4.4</td>
            <td>4.5</td>
        </tr>
        <tr>
            <td>5.1</td>
            <td>5.2</td>
            <td>5.3</td>
            <td>5.4</td>
            <td>5.5</td>
        </tr>
    </table>
</div> 
```

**CSS**

```
table {
    table-layout: fixed;
    border-spacing: 0;
    border-collapse: collapse;
}

td {
    border: 1px solid lightgrey;
    height: 60px;
    width: 60px;
    text-align: center;
    vertical-align: middle;
}

td.active {
    border: 1px solid blue;
}

td.brdr-b-hide {
    border-bottom: none;
}
td.brdr-r-hide {
    border-right: none;
} 
```

**Javascript**

```
$('table').on('click', 'td', function(e){
        var target = $(e.currentTarget);

        if(e.ctrlKey && target.hasClass('active')){
            target.removeClass('active');
        } else if(e.ctrlKey) {
            target.addClass('active');
        } else {
            $('table td.active').removeClass('active');
            target.addClass('active');
        }
    }); 
```

我正在研究的解决方案之一是隐藏`border-right`单元格左侧的`active`单元格和`border-bottom`顶部的单元格。

我对解决方案不太满意，因为`active`单击单元格时会应用和删除该类。在这里，我的解决方案需要找到`prev`单元格和顶部单元格，并向它们应用/删除相应的类。

您可以在[此处](http://jsfiddle.net/arunpjohny/2ahfP/27/)找到建议的解决方案。

我的问题是，有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T12:59:53.670

定义**边框样式：双**。像这样写：

```
td.active {
    border: 1px solid blue;
    border-style:double;
} 
```

检查这个[http://jsfiddle.net/2ahfP/18/](http://jsfiddle.net/2ahfP/18/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T12:52:37.013

试试这个：

```
td.active {
    outline: 1px solid blue;
} 
```

轮廓和边框之间的区别在于轮廓不会添加到元素的总宽度或高度。此外，border-collapse 属性不会影响轮廓。

# javascript - 使用fabric js时获取canvas对象

> ID：13195481
> 
> 赞同：17
> 
> 时间：2012-11-02T12:43:02.210
> 
> 标签：javascript, jquery, html5-canvas, fabricjs

我正在使用 Fabric.js，并且在一个地方创建了一个织物画布对象。

```
var x = new fabric.Canvas("mycanvas"); 
```

现在在另一个地方，我想访问这个“x”不可用的对象。那么我怎样才能获得相同的织物画布对象。

我不想更改 x 的范围或将 x 作为 arg 传递。

另外，如何从织物画布对象中获取 toDataURL？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T12:47:33.553

假设这`mycanvas`是 Canvas 元素的 ID，您可以将对 fabric 对象的引用存储在 Canvas 元素本身上：

```
var x = new fabric.Canvas("mycanvas");
document.getElementById("mycanvas").fabric = x; 
```

然后，您可以随时使用以下方法检索该对象：

```
var y = document.getElementById("mycanvas").fabric;
var url = y.toDataURL("png", 1); 
```

# java - 休眠中的连接代理错误

> ID：13195487
> 
> 赞同：1
> 
> 时间：2012-11-02T12:43:20.170
> 
> 标签：java, hibernate

当我们通过休眠获得连接时，我们在使用多个连接时出现错误**连接代理错误**

错误消息类似于以下语句

```
SEVERE: Servlet.service() for servlet action threw exception org.hibernate.HibernateException: connnection proxy not usable after transaction completion at org.hibernate.jdbc.BorrowedConnectionProxy.invoke(BorrowedConnectionProxy.java:66) at $Proxy0.prepareStatement(Unknown Source) at com.indiamoney.api.advisor.dashboard.dao.impl.AdvisorDashboardDAOImpl.getCustemerRequestsCount(AdvisorDashboardDAOImpl.java:571) at com.indiamoney.api.advisor.dashboard.bo.AdvisorDashboardBO.getCustemerRequestsCount(AdvisorDashboardBO.java:226) at com.indiamoney.advisor.dashboard.action.AdvisorDashboardAction.dashboardDetails(AdvisorDashboardAction.java:307) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269) at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170) at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:425) at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:228) at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913) at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449) at javax.servlet.http.HttpServlet.service(HttpServlet.java:690) at javax.servlet.http.HttpServlet.service(HttpServlet.java:803) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Unknown Source) Nov 1, 2012 9:18:37 PM org.apache.tomcat.util.http.Parameters processParameters WARNING: Parameters: Invalid chunk ignored. Nov 1, 2012 9:18:37 PM org.apache.tomcat.util.http.Parameters processParameters WARNING: Parameters: Invalid chunk ignored. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T12:15:33.893

在使用 hibernate 3.2.7/Spring 3.0.5 和 ope-session-in-view 过滤器的更棘手的用例中，我遇到了异常。大概是因为分离的实体作为参数传递给新线程并在单独的事务中更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:21:38.363

我们的系统几天前遇​​到了这个异常。我跟踪了 BorrowedConnectionProxy.java 发现这个问题是由于在休眠使用它之前关闭连接引起的：

我们使用 Session.connection() 来获取会话中寄生的连接并手动关闭它。在这种情况下，当调用 Session 上的任何与 db 相关的方法时，将抛出异常。

因此，请检查并确保休眠/会话获取有效连接（处于正确状态）。希望这对您的情况有效。

# c# - 如何让我的控制台应用程序返回一个整数？

> ID：13195491
> 
> 赞同：1
> 
> 时间：2012-11-02T12:43:28.700
> 
> 标签：c#, .net, console-application, exit-code

> **可能重复：**
> [如何在 .net 中指定控制台应用程序的退出代码？](https://stackoverflow.com/questions/155610/how-do-i-specify-the-exit-code-of-a-console-application-in-net)

我需要一个控制台应用程序，它向调用者返回一个值（我将通过 PowerShell 脚本调用它）。

如何更改控制台应用程序的入口点？（这是否足以能够使用控制台应用程序的返回值？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:47:36.563

好吧，返回信息有三个明显的选择：

*   通过进程的退出代码。这很简单，因为您可以声明该`Main`方法返回`int`，并且您从该方法返回的任何内容都将是该进程的退出代码。不过这有点不寻常，因为约定是用 0 以外的任何值表示某种错误。
*   通过控制台输出，由调用进程消费
*   通过文件输出，例如调用进程指定一个文件名，然后您的进程写入该文件。

如果您从 PowerShell 中使用它，为什么不编写[Cmdlet](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714395%28v=vs.85%29.aspx)呢？那应该更顺利地与PS集成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:52:54.567

您可以更改 main 方法以返回一个 int。

查看示例

```
 static int Main()
    {
        return 1;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T12:46:44.143

您必须使用整数返回值来实现 Main 方法

```
static int Main(string[] args) {
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:06:31.207

您可以尝试[%ERRORLEVEL%](http://csharp.2000things.com/2010/06/27/the-return-value-from-main-sets-errorlevel-variable-in-windows/)环境变量。

# android - 在 android 4.0 驱动的设备（如 Galaxy s3）上使用 Surfaceview 使用自定义相机拍摄的图像显示分辨率较低

> ID：13195492
> 
> 赞同：1
> 
> 时间：2012-11-02T12:43:32.617
> 
> 标签：android, camera, android-camera, surfaceview

我正在开发一个应用程序，因为我正在使用 Surfaceview 和 Camera api 拍照。我的问题是使用 Galaxy S3 拍摄的图像的分辨率仅显示 640x480。但在其他设备中，它会根据相机显示分辨率。因此，当我显示图像时它变得模糊，仅在 S3 中，在其他设备中完美显示。

我不知道这背后的问题是什么。其他设备在 2.3 上运行，s3 在 4.0 上运行。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:31:16.987

不同的设备有不同的可用分辨率。

在扩展 Surfaceview 的类中设置相机时，您可以找到支持的图片尺寸：

```
public void setCamera(Camera camera) {
    this.mCamera = camera;
    if (mCamera != null) {
        List<Camera.Size> mSupportedPictureSizes = Camera.getParameters().getSupportedPictureSizes();
        //Iterate over list and find the size you want.
        Camera.Parameters parameters = mCamera.getParameters();
        parameters.setPictureSize(chosenPictureSize.width, chosenPictureSize.height);
        mCamera.setParameters(parameters);
    }

} 
```

# clojure - 具有 -ve 值的 Core.logic 有限域

> ID：13195493
> 
> 赞同：3
> 
> 时间：2012-11-02T12:43:35.897
> 
> 标签：clojure, clojure-core.logic

我不确定为什么使用 -5 作为域值之一时下面的代码不返回任何结果

```
user=> (run* [q] (infd q (domain -5 5)) (*fd q q 25))
()
user=> (run* [q] (infd q (domain 0 5)) (*fd q q 25))
(5) 
```

注意：此代码指的是 core.logic 0.8.0 beta 中的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:20:33.780

目前 core.logic 0.8.0 测试版中根本不支持负值域。如果它起作用，那完全是偶然的。我不打算在不久的将来亲自添加对此的支持，尽管在 0.8.0 获得适当的版本之后会欢迎一个全面的补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:46:39.230

看起来`*fd`约束的实现只适用于所有正值的域。它基于乘积域的下限/上限除以右手因子域的上限/下限来计算左手因子的上限和下限，反之亦然。您可以看到将底片放入混合中将如何导致它不起作用：

```
 (run* [q]
   (fresh [r]
     (infd q (domain 1 2 3 4 5))
     (infd r (domain 20 25))
     (*fd q q r)))

 Product = [20..25], RHS = [1..5] => LHS = [20/5..25/1] = [4..25]

 (run* [q]
   (fresh [r]
     (infd q (domain -1 0 1 2 3 4 5))
     (infd r (domain 20 25))
     (*fd q q r)))

 Product = [20..25], RHS = [-1..5] => LHS = [20/5..25/-1] = [4..-25] 
```

由于标志已关闭，因此 LHS 的区间最终无法满足，因为下限大于上限。

具有负值的有限域确实适用于`+fd`约束：

```
 (run* [q] (fresh [a b] (infd a b (domain -1 0 1)) (+fd a b 0) (== q [a b])))
 => ([-1 1] [0 0] [1 -1]) 
```

# c# - 如何创建具有可变数量 StackPanel 的 StackPanel 的 DataTemplate

> ID：13195494
> 
> 赞同：1
> 
> 时间：2012-11-02T12:43:38.390
> 
> 标签：c#, wpf, datatemplate, stackpanel

我正在尝试创建一个 DataTamplate，它应该包含一个具有一定数量 StackPanel 的 StackPanel。

```
 <DataTemplate x:Key="DataTemplate">
        <StackPanel Orientation="Vertical">
            <StackPanel Orientation="Horizontal">
                <Rectangle Fill="Aqua" Margin="2" Height="100" Width="50"  VerticalAlignment="Top" HorizontalAlignment="Left"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate> 
```

上面的代码片段只是为了更好地理解我想要的结果，因为叠瓦 StackPanel 中的元素将被绑定。

这会生成以下错误消息： ItemsPanelTemplate 的 VisualTree 必须是单个元素。

任何可行的替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T14:23:01.820

您应该绑定到您的源列表`ItemsControl`。`ItemsSource`您可以在`ItemsControl.ItemsPanel`其中设置要用于项目的面板。在您的情况下，您应该使用`StackPanel`with `Orientation=Vertical`as `ItemsPanel`。请参阅[此处的第一个示例](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)。但是垂直`StackPanel`已经是默认的`ItemsPanel`，所以你可以省略它。

内部`StackPanel`应指定为`ItemTemplate`您的`ItemsControl`.

您的 XAML 应如下所示：

```
<ItemsControl ItemsSource="...">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <!-- properties of your object should go here -->
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# django - Git repos 意外挂断

> ID：13195498
> 
> 赞同：2
> 
> 时间：2012-11-02T12:43:47.080
> 
> 标签：django, git

有一件奇怪的事情..我可以克隆小文件回购，但是当它开始需要一些时间时，它就挂断了。喜欢：

```
$ pip install -e git+https://github.com/django/django.git#egg=Django
Obtaining Django from git+https://github.com/django/django.git#egg=Django
Cloning https://github.com/django/django.git to ./virtualenvs/prp/src/django
error: RPC failed; result=56, HTTP code = 0
fatal: The remote end hung up unexpectedly
Complete output from command /usr/bin/git clone -q https://github.com/django/django.git /home/mamber/virtualenvs/prp/src/django:

----------------------------------------
Command /usr/bin/git clone -q https://github.com/django/django.git     /home/mamber/virtualenvs/prp/src/django failed with error code 128 in None
Storing complete log in /home/mamber/.pip/pip.log 
```

我已经尝试过其他一些公共回购并得到相同的结果。我也尝试只克隆 repo，没有 virtualenv 和 pip，结果相同：

```
$ git clone https://github.com/django/django.git
Cloning into 'django'...
error: RPC failed; result=56, HTTP code = 0
fatal: The remote end hung up unexpectedly 
```

也许我需要更改一些超时配置。等待时，我的系统监视器中没有看到任何流量。

我在全新安装的 Linux Mint 中执行此操作，并使用全新安装的 apt-get install git（没有配置）。

有任何想法吗？

# mysql - 使用两个表的 mySQL 查询

> ID：13195501
> 
> 赞同：-1
> 
> 时间：2012-11-02T12:43:54.097
> 
> 标签：mysql, sql

我有一个带有“type”字段的表（配置）和另一个带有“status”字段的表（users）。

“状态”字段的某些值是空白的。

仅当另一个表中的字段“类型”等于“3”时，我才想将字段“状态”更改为“已应用”。

你能解释一下如何做这个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:49:42.557

尝试这个

```
update table2
inner join table1 on table1.id=table2.id 
and  table1.type=3 
set status=applied 
```

id 是两个表中的公共字段

# performance - 重写 __setattr__ () 的成本太高

> ID：13195510
> 
> 赞同：2
> 
> 时间：2012-11-02T12:44:47.673
> 
> 标签：performance, python-3.x, double-underscore

我想节省时间并将对象标记为已修改，因此我编写了一个类并覆盖了它的`__setattr__`功能。

```
import time

class CacheObject(object):
    __slots__ = ('modified', 'lastAccess')
    def __init__(self):
        object.__setattr__(self,'modified',False)
        object.__setattr__(self,'lastAccess',time.time())

    def setModified(self):
        object.__setattr__(self,'modified',True)
        object.__setattr__(self,'lastAccess',time.time())

    def resetTime(self):
        object.__setattr__(self,'lastAccess',time.time())

    def __setattr__(self,name,value):
        if (not hasattr(self,name)) or object.__getattribute__(self,name)!=value: 
            object.__setattr__(self,name,value)
            self.setModified()

class example(CacheObject):
    __slots__ = ('abc',)
    def __init__(self,i):
        self.abc = i
        super(example,self).__init__()

t = time.time()
f = example(0)
for i in range(100000):
    f.abc = i

print(time.time()-t) 
```

我测量了处理时间，它花了 2 秒。当我注释掉被覆盖的函数时，处理时间是 0.1 秒，我知道被覆盖的函数会更慢，但几乎 20 倍的差距太大了。我想我一定是搞错了。

接受 cfi 的建议

1.消除if条件

```
 def __setattr__(self,name,value):
#        if (not hasattr(self,name)) or object.__getattribute__(self,name)!=value: 
            object.__setattr__(self,name,value)
            self.setModified() 
```

运行时间降低到 1.9，略有改进，但如果不更改则标记对象已修改会在其他进程中花费更多，所以不是一个选项。

2.将self.func改为classname.func(self)

```
def __setattr__(self,name,value):
    if (not hasattr(self,name)) or object.__getattribute__(self,name)!=value: 
        object.__setattr__(self,name,value)
        CacheObject.setModified(self) 
```

运行时间是 2.0 。所以没有什么真正改变

3)提取集修改函数

```
def __setattr__(self,name,value):
    if (not hasattr(self,name)) or object.__getattribute__(self,name)!=value: 
        object.__setattr__(self,name,value)
        object.__setattr__(self,'modified',True)
        object.__setattr__(self,'lastAccess',time.time()) 
```

运行时间降低到 1.2 ！太好了，它确实节省了将近 50% 的时间，尽管成本仍然很高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:33:16.617

不是一个完整的答案，但有一些建议：

1.  你能消除价值比较吗？当然，这是您的实现的功能更改。但是，如果比整数更复杂的对象存储在属性中，则运行时的开销会更加严重。

2.  对方法的每次调用 via`self`都需要经过完整的方法解析顺序检查。我不知道 Python 是否可以自己做任何 MRO 缓存。可能不是因为类型存在动态原则。因此，您应该能够通过将 any 更改`self.method(args)`为`classname.method(self, args)`. 这消除了呼叫中的 MRO 开销。这适用`self.setModified()`于您的`settattr()`实施。在大多数地方，您已经通过引用`object`.

3.  每个函数调用都需要时间。您可以消除它们，例如 move`setModified`的功能`__setattr__`本身。

让我们知道每一个的时间如何变化。我把实验分开了。

编辑：感谢您的计时数字。

开销可能看起来很大（似乎仍然是 10 倍）。但是，从整体运行时间的角度来看。换句话说：你有多少整体运行时间将用于设置那些被跟踪的属性，有多少时间花在其他地方？

在单线程应用程序中，[阿姆达尔定律是一个简单的规则](http://en.wikipedia.org/wiki/Amdahl%27s_law)，可以直接设置期望。举例说明：如果 1/3 的时间花在设置属性上，而 2/3 的时间花在做其他事情上。那么将属性设置减慢10倍只会减慢30%。花在属性上的时间百分比越小，我们就越不需要关心。但是，如果您的百分比很高，这可能对您毫无帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:22:02.537

在这里覆盖`__setattr__`似乎没有任何作用。您只有两个属性，modified 和 lastAccess。这意味着这是您可以设置的唯一属性，那么您为什么要覆盖`__setattr__`？直接设置属性就好了。

如果您希望在设置属性时发生某些事情，请将其设置为具有 setter 和 getter 的属性。它更容易，也不那么神奇。

```
class CacheObject(object):
    __slots__ = ('modified', 'lastAccess')

    def __init__(self):
        self.modified = False
        self.lastAccess = time.time()

    def setModified(self):
        self.modified = True
        self.lastAccess = time.time()

    def resetTime(self):
        self.lastAccess = time.time()

class example(CacheObject):
    __slots__ = ('_abc',)
    def __init__(self,i):
        self._abc = i
        super(example,self).__init__()

    @property
    def abc(self):
        self.resetTime()
        return self._abc

    @abc.setter
    def abc(self, value):
        self.setModified()
        self._abc = value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T21:38:59.627

老问题，但值得更新。

我使用 python 3.6遇到了与[pydantic相同的问题。](https://github.com/samuelcolvin/pydantic)

`object.__setattr__(self, name, value)`只是比通常在类上设置属性慢。没有明显的办法。

`object.__setattr__(self, name, value)`如果性能很重要，唯一的选择是在需要覆盖的类中将调用保持在绝对最小值`_setattr_`。

# android - GestureOverlayView 正在阻止触摸事件

> ID：13195514
> 
> 赞同：0
> 
> 时间：2012-11-02T12:45:05.860
> 
> 标签：android, events, touch

我希望为我的手势创建一个自定义视图，我希望自己绘制它们。

但是我没有得到触摸事件，或者我得到了它们而 GestureOverlayView 没有。

你能帮我让我们都得到所有的触摸事件吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-20T07:05:45.330

我想你可能犯了我以前做的一个愚蠢的错误。不要将gestureOverlayView 与您想要可触摸的视图并行使用，而是将这些视图作为gestureOverLayView 的子视图。

你不应该做什么

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <android.gesture.GestureOverlayView
            android:id="@+id/gOverlay"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:eventsInterceptionEnabled="true"
            android:fadeOffset="1000"
            android:gestureColor="@color/gesture_color"
            android:gestureStrokeType="multiple"
            android:uncertainGestureColor="@color/gesture_color" >
        </android.gesture.GestureOverlayView>
        <LinearLayout
            android:id="@+id/customtab"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:weightSum="3" >
        </LinearLayout>
    </RelativeLayout> 
```

你应该怎么做。。

```
 <android.gesture.GestureOverlayView
        android:id="@+id/gOverlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:eventsInterceptionEnabled="true"
        android:fadeOffset="1000"
        android:gestureColor="@color/gesture_color"
        android:gestureStrokeType="multiple"
        android:uncertainGestureColor="@color/gesture_color" >
        <LinearLayout
            android:id="@+id/customtab"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:weightSum="3" >
        </LinearLayout>
    </android.gesture.GestureOverlayView> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T12:49:25.563

您可以像这样覆盖 onTouchEvent 方法

```
@Override
public boolean onTouchEvent(MotionEvent event) {
// Your code here
} 
```

# php - CakePHP 用户订阅

> ID：13195520
> 
> 赞同：-4
> 
> 时间：2012-11-02T12:45:27.623
> 
> 标签：php, cakephp

我正在开发一个社交网络类型的应用程序，并且想要一个像订阅这样的功能。

例子：

如果用户 A 订阅了用户 B，那么用户 A 应该只能查看用户 B 发布的帖子，而不能查看其他用户发布的帖子。

在我看来，将有一个订阅表，其中包含 ID、UserFrom、UserTo 字段。

现在我被困在一个条件允许用户只查看订阅用户的帖子。

需要一点帮助请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:55:44.203

获取登录用户订阅`beforeFilter`功能的所有用户 ID 列表，以便您可以在控制器中的任何位置使用它。

例如： `UserA subscribe UserB ,UserD` 然后签到`post view action If post author id is in subscribe array then allow to view else redirect to another action with message`。

谢谢

# php - 使用 cURL 和 PHP 更改 http ref

> ID：13195521
> 
> 赞同：-1
> 
> 时间：2012-11-02T12:45:32.863
> 
> 标签：php, curl

我正在使用 cURL 更改站点的 HTTP 引用，如果它来自搜索引擎，则只允许您查看其内容：

我能够做到这一点！

但问题是：网站获取的访问者的IP地址不是我的！这是我用来更改 ref 的网站的 IP 地址！，这里是代码：

```
echo geturl('http://example.com', 'http://referring-site.com');

function geturl($url, $referer) { 

    $headers[] = 'Accept: image/gif, image/x-bitmap, image/jpeg, image/pjpeg,text/html,application/xhtml+xml'; 
    $headers[] = 'Connection: Keep-Alive'; 
    $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8'; 
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)'; 

    $process = curl_init($url); 
    curl_setopt($process, CURLOPT_HTTPHEADER, $headers); 
    curl_setopt($process, CURLOPT_HEADER, 0); 
    curl_setopt($process, CURLOPT_USERAGENT, $useragent);
    curl_setopt($process, CURLOPT_REFERER, $referer);
    curl_setopt($process, CURLOPT_TIMEOUT, 30); 
    curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 

    $return = curl_exec($process); 
    curl_close($process); 
  return $return;
} 
```

假设我使用该代码

> mysite.com

所以 example.com 将 si refering-site.com 作为 HTTP ref，但它认为访问者 IP 与 mysite.com 相同！

何我可以得到它来获取访问者的真实 IP 地址而不是我使用代码的站点的 IP 地址吗？

我试图更换

```
 return $return; 
```

和

```
return "<?php 
header( 'Location: http://example.com' ) ;
?>"; 
```

或者

```
echo '<META HTTP-EQUIV='Refresh' Content='0; URL=http://example.com'>'; 
```

但它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:48:21.273

您正在做的是代理请求并对引用者撒谎。由于请求来自您的服务器，因此它在您的控制之下，因此可能会进行某种不正当的欺骗。

网站没有办法诱使浏览器制造这种谎言。

# xml - 用于比较结果的 XPath 查询在数值范围内

> ID：13195526
> 
> 赞同：3
> 
> 时间：2012-11-02T12:45:46.063
> 
> 标签：xml, xslt

我有以下 XML：

```
<items>
    <item>
        <locations>
            <location>
                <latitude>-100</latitude>
                <longitude>10</longitude>
            </location>
            <location>
                <latitude>10</latitude>
                <longitude>10</longitude>
            </location>
        </locations>
    </item>
    <item>
        <locations>
            <location>
                <latitude>10</latitude>
                <longitude>10</longitude>
            </location>
            <location>
                <latitude>10</latitude>
                <longitude>10</longitude>
            </location>
        </locations>
    </item>
<items> 
```

我需要计算纬度或经度值无效的项目。

有效纬度介于 -90 和 90 之间。有效经度介于 -180 和 180 之间。

为了方便发布，让我们试着让它计算纬度大于-90。

我尝试了以下方法，但均无效：

```
count(//item[locations/location[number(latitude) &gt; -90])
count(//item[locations/location[number(latitude)] &gt; -90)
count(//item[locations/location/*[number(latitude) &gt; -90])
count(//item[locations/location/*[number(latitude)] &gt; -90)
count(//item[locations/location/*[number(name() = latitude)] &gt; -90)
count(//item[locations/location/*number([name() = latitude]) &gt; -90)
count(//item[number(deal/locations/location/*[name()=latitude]) &gt; -90]) 
```

有谁知道这是否可能？如果不是，谁能想到一个巧妙的解决方法？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:52:31.690

我认为您需要使用小于，而不是大于-您希望纬度*小于*-90。

例如运行这个 xslt

```
<xsl:template match="/">
    <GoodItems>
        <xsl:value-of select="count(//item[not(locations/location[number(latitude) &lt; -90 
                                                           or number(latitude) &gt; 90
                                                           or number(longitude) &lt; -180
                                                           or number(longitude) &gt; 180])])" />
    </GoodItems>
    <LatTooSmall>
        <xsl:value-of select="count(//item[locations/location[number(latitude) &lt; -90]])" />
    </LatTooSmall>
    <LatTooBig>
        <xsl:value-of select="count(//item[locations/location[number(latitude) &gt; 90]])" />
    </LatTooBig>
    <LongTooSmall>
        <xsl:value-of select="count(//item[locations/location[number(longitude) &lt; -180]])" />
    </LongTooSmall>
    <LongTooBig>
        <xsl:value-of select="count(//item[locations/location[number(longitude) &gt; 180]])" />
    </LongTooBig>
</xsl:template> 
```

针对这个测试用例 xml 文档：

```
<items>
    <item>
        <locations>
            <location>
                <latitude>10</latitude>
                <longitude>10</longitude>
            </location>
        </locations>
    </item>
    <item>
        <locations>
            <location>
                <latitude>-100</latitude>
                <longitude>10</longitude>
            </location>
        </locations>
    </item>
    <item>
        <locations>
            <location>
                <latitude>123</latitude>
                <longitude>10</longitude>
            </location>
        </locations>
    </item>
    <item>
        <locations>
            <location>
                <latitude>0</latitude>
                <longitude>-200</longitude>
            </location>
        </locations>
    </item>
    <item>
        <locations>
            <location>
                <latitude>0</latitude>
                <longitude>500</longitude>
            </location>
        </locations>
    </item>
</items> 
```

返回以下内容：

```
<GoodItems>1</GoodItems>
<LatTooSmall>1</LatTooSmall>
<LatTooBig>1</LatTooBig>
<LongTooSmall>1</LongTooSmall>
<LongTooBig>1</LongTooBig> 
```

如果你有 xslt 2，你也可以使用`abs()`，尽管 Dimitre 在 1.0[这里有一个解决方法](https://stackoverflow.com/questions/804421/how-can-i-calculate-the-absolute-value-of-a-number-in-xslt)

# jquery - 在日期选择器有焦点时阻止验证

> ID：13195530
> 
> 赞同：0
> 
> 时间：2012-11-02T12:45:52.447
> 
> 标签：jquery, jquery-validate, jquery-ui-datepicker

我将 jQuery-ui [datepicker](http://jqueryui.com/datepicker/)与 Jörn Zaefferer 的[validate](http://docs.jquery.com/Plugins/Validation)插件一起使用。

众所周知，验证不会在日期选择器更改输入字段的内容*后自动触发。*

我觉得好奇的是，当点击年份下拉菜单、点击月份下拉菜单和点击日期时，验证*确实会触发。*而且，在这些情况下，输入字段的值都没有改变。您可以在这里自己尝试：http: [//jsfiddle.net/ECku3/12/](http://jsfiddle.net/ECku3/12/)有 console.log 事件显示何时调用验证方法以及何时`$.validator.showErrors()`调用验证字段的值。

## tl;博士

我想找到一种在日期选择器有焦点时防止验证的方法。但是当用户键入日期而不是使用日期选择器时，我不想阻止验证。所以我不能只是设置`$.validator.settings.onfocusout = false`。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:41:27.010

我已经像这样使用了[jquery.ui.datepicker.validation.js](http://keith-wood.name/uiDatepickerValidation.html)插件：

```
$(document).ready(function() {
    $.datepicker.setDefaults({
        dateFormat: 'yy-mm-dd',
        firstDay: 1,
        showOn: 'button',
        changeMonth: true,
        changeYear: true,

    });

    $("#mydate").datepicker();
    $('#myform').validate({ 
        errorPlacement: $.datepicker.errorPlacement, 
        rules: { 
            mydate: { 
                required: true, 
                dpDate: function(){traceBack(); return true;},
                dpCompareDate: 'notBefore 2011-01-01' 
            } 
        }, 
        messages: { 
            mydate: 'Please enter a valid date (yyyy-mm-dd) after 2011-01-01'
        }});

    function traceBack() {
        console.log("Firing?");
    }
});​ 
```

**编辑**

如果您真的不希望在 datepicker 小部件中导航时触发任何验证事件，您可以在 datepicker 小部件可见时关闭 onfocusout 设置：

```
$(document).ready(function() {
    $.datepicker.setDefaults({
        dateFormat: 'yy-mm-dd',
        firstDay: 1,
        showOn: 'button',
        changeMonth: true,
        changeYear: true,
        beforeShow: function () {$("#myform").validate().settings.onfocusout = false; },
        onClose: function () {$("#myform").validate().settings.onfocusout = true;}
    });

    $("#mydate").datepicker();
    $('#myform').validate({ 
        errorPlacement: $.datepicker.errorPlacement, 
        rules: { 
            mydate: { 
                required: true, 
                dpDate: function(){traceBack(); return true;},
                dpCompareDate: 'notBefore 2011-01-01' 
            } 
        }, 
        messages: { 
            mydate: 'Please enter a valid date (yyyy-mm-dd) after 2011-01-01'
        }});

    function traceBack() {
        console.log("Firing?");
    }

});​ 
```

看到这个小提琴：http: [//jsfiddle.net/mccannf/Bn7gy/24/](http://jsfiddle.net/mccannf/Bn7gy/24/)

# javascript - 绑定到视图中的路由事件

> ID：13195533
> 
> 赞同：0
> 
> 时间：2012-11-02T12:45:59.947
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

如果我在初始化方法中绑定到路由器事件，则调用回调：

```
var View = Backbone.View.extend({   
    initialize: function() { 
        router.on("route:test", this.update);
    },

    update: function() {
        console.log('This works');
    }
}); 
```

但这不起作用：

```
var View = Backbone.View.extend({
    events: {
        "route:test": "update"
    },  

    initialize: function() { },

    update: function() {
        console.log('This never gets called');
    }
}); 
```

在第二种情况下我做错了什么，还是我误解了什么？

`events`仅在 DOM 级事件的视图内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:57:56.197

是的，`events`在视图中仅用于该视图元素内的 DOM 事件。

> 使用 jQuery 的委托函数为视图中的 DOM 事件提供声明性回调

文档在[这里](http://backbonejs.org/#View-delegateEvents)

# php - symfony 和教义得到 500 错误

> ID：13195534
> 
> 赞同：0
> 
> 时间：2012-11-02T12:46:02.553
> 
> 标签：php, symfony, doctrine

我在本地服务器上开发了网站。然后我将文件传输到网络服务器。但是当我测试该网站时，它报告了 500 Internal Server Error。我检查了数据库参数和配置文件。万事皆安。有人知道这个错误吗？

以下代码导致此问题：

```
$restarant = $this->getDoctrine()->getRepository("LeoFoodRadarBundle:Restaurant")->find($id); 
```

我检查了日志，发现问题是学说无法连接到数据库：

```
SQLSTATE[42S02]: Base table or view not found: 1146 Table 'mayifann_foodradar.timeTable' doesn't exist (uncaught exception) at /home/mayifann/domains/test/vendor/doctrine/dbal/lib/Doctrine/DBAL/DBALException.php line 47 [] [] 
```

实际上，我在数据库中有一个名为 timetable 的表，它在本地服务器上运行得很好。造成这个问题的原因是什么？我应该将表名称从时间表更改为时间表吗？

# python - 在 Python 中执行异步测试

> ID：13195536
> 
> 赞同：1
> 
> 时间：2012-11-02T12:46:07.127
> 
> 标签：python, unit-testing, sockets, simplehttpserver

我需要做以下测试：

*   向服务器发送 GET 请求（http://remote/...）
*   等待服务器发送 POST 请求作为响应（http://local/...）
*   解析 POST 数据并做一些断言

Selenium 不适合这种情况：它不能监听连接，我也可以在没有 Selenium 的情况下发送 GET。

所以，我做了一个单元测试：

```
class MobiMoneyTestCase(TestCase):
def test_can_send_response(self):
    resp = requests.post('http://url/api/', data={'callback': 'http://localhost:8000'})

    class Handler(SimpleHTTPRequestHandler):
        def do_GET(self):
            assert self.path == '...'

    httpd = SocketServer.ThreadingTCPServer(('localhost', 8000),Handler) 
```

测试必须等待 5 秒等待 POST 请求，如果什么也没发生，则测试失败。如何在测试中合并这些项目？如果我`sleep(5)`输入`test_can...`，则`httpd`处理程序在倒计时结束之前不会回复。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-02T13:13:05.537

基本上你想超时一个过程，如果它太长？在这种情况下，您应该检查信号模块。

这里有一个简洁的实现（带有装饰器）：[超时功能，如果完成时间太长](https://stackoverflow.com/questions/2281850/timeout-function-if-it-takes-too-long-to-finish)

# javascript - 向使用 svg 路径生成的条形图添加工具提示

> ID：13195540
> 
> 赞同：1
> 
> 时间：2012-11-02T12:46:17.313
> 
> 标签：javascript, svg, d3.js, crossfilter

如何向使用 svg 路径生成的条形图中的每个条形添加工具提示...是否可以使用引导工具提示...？我在下面提供了我的 svg 路径

```
 <path class="foreground bar" clip-path="url(#clip 0)" d="M36,100V68h20V100M108,100V29h20V100M180,100V71h20V100M252,100V-4h20V100M324,100V87h20V100"/> 
```

[我在下面的小提琴http://jsfiddle.net/mfAc4/6/](http://jsfiddle.net/mfAc4/6/)中提供了 svg 生成的条形图...如何向每个条形添加工具提示？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:17:33.257

Not sure what you mean by bootstrap, but most UAs will turn a title element child into a tooltip. E.g.

```
<path class="foreground bar" clip-path="url(#clip 0)" d="M36,100V68h20V100M108,100V29h20V100M180,100V71h20V100M252,100V-4h20V100M324,100V87h20V100">
    <title>tooltip text</title>
</path> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:18:47.863

看看：[http ://bl.ocks.org/2973775](http://bl.ocks.org/2973775)

请注意，在您的 jsFiddle 中，您实际上并没有使用 d3。但是您可以轻松添加它以获得工具提示，请参见[此处](http://jsfiddle.net/Vn8MK/)：

```
var svg = d3.select("svg").attr("width", 400).attr("height", 400);

var vis = svg.append('g');

var txt = vis.append('text')
    .attr({ transform: 'translate(5,20)', fill:'red'})
    .text("Node Info");

d3.selectAll('.bar')
    .on("mouseover", function(d) { 
        var mousePos = d3.mouse(this);
        txt.text(mousePos);
        txt.attr({transform: 'translate(' + mousePos + ')'});
    })
    .on("mousemove", function(d) { 
        var mousePos = d3.mouse(this);
        txt.attr({transform: 'translate(' + mousePos + ')'}); 
    }); 
```

​ 要确定哪个栏，您必须查看鼠标 x 位置。您应该考虑为此使用[d3 比例](https://github.com/mbostock/d3/wiki/Scales)（它将在两个方向上映射 - 检查反转功能）。

# ruby-on-rails - 从 Rails 中的数据库获取路线

> ID：13195542
> 
> 赞同：4
> 
> 时间：2012-11-02T12:46:33.727
> 
> 标签：ruby-on-rails, routes

如何从数据库加载路由？我有带有列：url的表**Post 。**本栏目有部分url，例如：

*   关于
*   前卫/我们
*   progs/我们/信息
*   空的
*   等等

如何为此设置路线？结果示例：

```
http://mysite.com/progs/us for the page http://mysite/posts/2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T21:24:47.987

您可以通过此路线拦截任何网址：

```
 # routes.rb
    get '*url' => 'posts#show', format: false 
```

注意：这条路线应该在你的配置中最后声明

控制器如下所示：

```
 # posts_controller.rb
    class PostsController < ApplicationController
      def show
        @post = Post.find_by_url!(params[:url])
        # by default "show" view is rendered with "post" variable
      end
    end 
```

# ajax - 使用 rails 3、carrierwave 和 jquery 从模型中删除图像

> ID：13195546
> 
> 赞同：0
> 
> 时间：2012-11-02T12:47:04.177
> 
> 标签：ajax, ruby-on-rails-3, file-upload, carrierwave

我正在使用 Carrierwave 添加图像并将其上传到 Amazon S3。这工作正常，一旦表单被保存，我会显示图像和一个 x 框来删除它。

我想使用 ajax 在单击时处理“x”图像上的单击事件我想删除图像并清除表单上的字段，以便再次显示输入字段

图像字段是我在表单中编辑的模型类的一个属性。

```
Person < ActiveRecord
 attr_accessible: image 
```

我的表单这部分的部分显示图像（如果存在），否则显示输入 file_field（如果不存在）

```
<div class="field">
    <%= image_tag @pass.background_image_url(:thumb) if @pass.background_image? %>
    <%= f.file_field :background_image if @pass.background_image.to_s == '' %>
    <%= content_tag :div, '', class: "delete_image_fields" if @pass.background_image? %>
</div> 
```

我有一些 jquery，我可以成功隐藏图像字段。

```
jQuery ->

  $('.field .delete_image_fields').click ->
  $(this).parent().find('img').hide()
  event.preventDefault() 
```

图像字段被隐藏没问题

我想要发生的是

a) 从 pass 对象中清除输入字段 b) 提交更改（远程） c) 删除 S3 上的远程图像 e) 重新显示图像的 file_input 字段，以便在需要时重新选择它

任何帮助或指示将不胜感激

更新

我已经部分工作以显示正确字段并调整输入链接。但我不确定如何从模型属性中实际删除文件

我已将部分更新为以下内容，其中显示图像或创建文件按钮

```
<div class="field">
  <%= f.label :background_image %><br />
  <% if @pass.background_image?%>
     <%= image_tag @pass.background_image_url(:thumb)  %>
     <%= f.file_field :background_image , style: "display:none"%>
     <%= content_tag :div, '', class: "delete_image_fields" %> 
  <% else %>
     <%= f.file_field :background_image%>       
  <% end %> 
```

并将我的 jquery 更新为此

```
$('.field .delete_image_fields').click ->
  $(this).parent().find('img').hide()
  $(this).hide()
  $(this).parent().find('input').val('')
  $(this).parent().find('input').show()
  event.preventDefault() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:24:03.260

要删除文件，您可以利用`remove_mounted_field_url` [carrierwave 创建](https://github.com/jnicklas/carrierwave#removing-uploaded-files)的.

从这里我看到了两种解决方案，要么在控制器中创建一个只会删除文件的新动作，要么使用该`update`动作。我喜欢尽可能多地使用原始操作（index/new/create ...），所以我将使用第二种解决方案。

单击 X 框时，您需要执行[AJAX PUT 请求。](http://en.wikipedia.org/wiki/Ajax_%28programming%29)它看起来像这样：

```
$('.field .delete_image_fields').click ->
  $(this).parent().find('img').hide()
  $(this).hide()
  $(this).parent().find('input').val('')
  $(this).parent().find('input').show()
  event.preventDefault()
  $.ajax
    url: $(this).getParents('form').first().attr('action')
    method: 'PUT'
    data:
      person:
        remove_image: 1 # This will trigger the carrier wave function that remove the uploaded file
  .done (data) ->
      # You can do plenty if things here, for instance notify the user it's been correctly deleted 
```

请注意，这仅适用于版本表单，因为必须针对更新操作的 AJAX 查询的 url 取自表单。我不认为这是一个问题，因为在创建表单上还没有上传照片，所以没有什么可以删除的。

最后一件事，您可以使用[兄弟姐妹方法](http://api.jquery.com/siblings/)来查找输入和图像

# php - 图表已显示，但带有带有图表的通知 使用 Fusion Chart

> ID：13195549
> 
> 赞同：2
> 
> 时间：2012-11-02T12:47:16.920
> 
> 标签：php, javascript, fusioncharts

我是第一次使用 Fusion Chart。我在使用它显示数据时遇到了一些问题。即使图形得到显示，但文件中存在一些错误。

我无法检测到**“通知”**。请帮帮我。附加屏幕截图和代码。

```
 function renderChart($DB, $value, $parameter)
    {
        # Create Object of FusionCharts class

**// Error Over here**

        if ($value["chart_category"] == "S")
        {
            $FC=new FusionCharts($value["CHART_TYPE"],$value["DASHLET_WIDTH"] - 75,225,"NewChart");
        }
        else
        {
            $FC=new FusionCharts($value["CHART_TYPE"],$value["DASHLET_WIDTH"] - 75,225,"NewChart");
        }
        # set SWF Path
        $FC->setSWFPath("FusionCharts/");
        # Set Chart Parameter
        $strParam  = "caption=" . Base::replacePlaceholders($parameter, $value["DASHLET_NOTE"], false) . ";paletteThemeColor=6699FF;palette=1; animation=1;formatNumberScale=0;numberPrefix=" . $value["SERIES_PREFIX"] . ";labeldisplay=WRAP;slantLabels=1;seriesNameInToolTip=1; sNumberSuffix= pcs.;showValues=0;plotSpacePercent=0";
        # Set Chart Parameter
        $FC->setChartParams($strParam);
        # Add some styles to increase caption font size
        $FC->defineStyle("CaptionFont","font","color=black;size=10");
        $FC->defineStyle("SubCaptionFont","font","bold=0");
        # apply style to Chart�s CAPTION and SUBCAPTION
        $FC->applyStyle("caption","CaptionFont");
        $FC->applyStyle("SubCaption","SubCaptionFont");
        # Set Register With JS true
        $FC->setInitParam("registerwithjs",true);

        //Get Dashboard Query to execute
        $strSQL = Base::replacePlaceholders($parameter, $value["DASHLET_QUERY"]);

        $chartdata = $this->FetchAll($DB, $strSQL) ;

        //echo '<pre>' ;
        //print_r($chartdata) ;
        //for single series chart
        switch ($value["CHART_CATEGORY"])
        {
            case "S":
                if (count($chartdata) > 0) {
                    //Initialize datasets
                    foreach($chartdata as $key => $ors) {
                       # add chart values and  category names
                      $FC->addChartData($ors[$value["VALUE_COLUMN"]],"label=" . $ors[$value["X_AXIS_COLUMN"]]);
                    }
                }   
                break ;
            case "M":
                $strPrevCategory = "" ;
                $strSeriesValues = "" ;
                //Initialize datasets
                foreach($chartdata as $key => $ors) {
                    if ($strPrevCategory == "" OR $strPrevCategory != $ors[$value["X_AXIS_COLUMN"]]) 
                    {
                        $strCategory[] = $ors[$value["X_AXIS_COLUMN"]] ;
                        $strPrevCategory = $ors[$value["X_AXIS_COLUMN"]] ;
                    }

                    if ($strSeriesValues == "" OR strpos($strSeriesValues, "," . $ors[$value["Y_AXIS_COLUMN_1"]] . ",") === false)
                    {
                        $strSeries[] = $ors[$value["Y_AXIS_COLUMN_1"]] ;
                        $strSeriesValues = $strSeriesValues . "," . $ors[$value["Y_AXIS_COLUMN_1"]] . "," ;
                    }
                }

                foreach($strCategory as $key=>$Category)
                {
                    $FC->addCategory($Category);
                    //echo "Category ",$Category,"<br>";
                }

                foreach($strSeries as $key =>$Series)
                {
                    $FC->addDataset($Series) ;
                    //echo "Series ",$Series,"<br>" ;
                    foreach($strCategory as $key=>$Category)
                    {
                        $data = "0" ;
                        foreach($chartdata as $key => $ors) {
                            if ($Series == $ors[$value["Y_AXIS_COLUMN_1"]] AND $Category == $ors[$value["X_AXIS_COLUMN"]])
                            {
                               $data = $ors[$value["VALUE_COLUMN"]] ;
                               break ;
                            }
                        }
                        //echo "Data ",$data,"<br>" ;
                        $FC->addChartData($data) ;
                    }
                }
                break ;
            case "B":
                if ($chartdata) {
                    //Initialize datasets
                    foreach($chartdata as $key => $ors) {
                        $strCategory[] = $ors[$value["X_AXIS_COLUMN"]] ;
                        $strSeries1[] = $ors[$value["VALUE_COLUMN"]] ;
                        $strSeries2[] = $ors[$value["Y_AXIS_COLUMN_1"]] ;
                        if ($value["Y_AXIS_COLUMN_2"] != "") $strSeries3[] = $ors[$value["Y_AXIS_COLUMN_2"]] ;
                        if ($value["Y_AXIS_COLUMN_3"] != "") $strSeries4[] = $ors[$value["Y_AXIS_COLUMN_3"]] ;
                    }

                    foreach($strCategory as $Key => $Value)
                    {
                            $FC->addCategory($Value);
                    }

                    $FC->addDataset($value["VALUE_LABEL"]) ;
                    foreach($strSeries1 as $Key => $Value)
                    {
                            $FC->addChartData($Value);
                    }

                    $FC->addDataset($value["Y_AXIS_LABEL_1"]) ;
                    foreach($strSeries2 as $Key => $Value)
                    {
                            $FC->addChartData($Value);
                    }

                    if (count($strSeries3) > 0)
                    {
                        $FC->addDataset($value["Y_AXIS_LABEL_2"]) ;
                        foreach($strSeries3 as $Key => $Value)
                        {
                                $FC->addChartData($Value);
                        }
                    }

                    if (count($strSeries4) > 0)
                    {
                        $FC->addDataset($value["Y_AXIS_LABEL_3"]) ;
                        foreach($strSeries4 as $Key => $Value)
                        {
                                $FC->addChartData($Value);
                        }
                    }
                }

                break ;
            }
        $FC->renderChart(true, false);
    }
} 
```

# facebook - 是否可以在没有电子邮件 ID 的情况下在 Facebook 注册？

> ID：13195556
> 
> 赞同：9
> 
> 时间：2012-11-02T12:47:33.210
> 
> 标签：facebook, email

我有一个关于 Facebook 注册的问题。我需要知道在不提供电子邮件 ID 的情况下使用任何手机号码或任何其他方式注册的可能性。这很重要，因为我正在开发一个用户电子邮件是必须的 fb 应用程序。或者是否可以使用电子邮件 ID 注册，然后从帐户中删除该 ID？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T18:06:34.710

移动注册页面允许用户在没有电子邮件地址的情况下注册：http: [//touch.facebook.com/r.php](http://touch.facebook.com/r.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T07:51:50.587

现在可以在没有电子邮件的情况下注册 Facebook：[https](https://developers.facebook.com/docs/facebook-login/permissions/v2.2#reference-email) ://developers.facebook.com/docs/facebook-login/permissions/v2.2#reference-email 。

# java - 在 JavaFX 中显示复杂的印度孟加拉语字体

> ID：13195563
> 
> 赞同：3
> 
> 时间：2012-11-02T12:47:50.320
> 
> 标签：java, fonts, javafx-2, javafx, indic

在我的程序中，我正在从 UTF-8 文件中读取孟加拉语（印度语）文本并显示在 JavaFx 的文本组件中。尽管正在显示字符，但它们的位置不正确。

在这种类型的复杂脚本语言中，一些元音应该在左右两侧环绕字母，但在一些计算机中它以错误的方式显示，即先是元音，然后是字母。

例如，包含“分裂元音”ো 的单词无法正确显示。 [https://bug686225.bugzilla.mozilla.org/attachment.cgi?id=559780](https://bug686225.bugzilla.mozilla.org/attachment.cgi?id=559780)

在系统中它得到了修复[http://www.tariquemahmud.net/?p=35](http://www.tariquemahmud.net/?p=35)修复的系统中，但在 JavaFx 程序中，问题仍然存在。

显示错误 ![显示错误](../Images/5a5f18231a2ce648f749b15e8bce9b1c.png)

正确的显示 ![正确的显示](../Images/280816be99aeab4e8682d550f707fca3.png)

您可以根据计算机中的上述屏幕截图检查以下可执行文件是否正确或错误

[http://dl.dropbox.com/u/655237/share/BanglaTest.zip](http://dl.dropbox.com/u/655237/share/BanglaTest.zip)

我正在使用以下代码

```
package banglatest;

import java.io.File;
import java.io.FileNotFoundException;
import java.net.MalformedURLException;
import java.util.Scanner;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class BanglaTest extends Application {

    @Override
    public void start(Stage primaryStage) throws MalformedURLException {
        Text text = new Text();
        File file = new File("data.txt");
        StringBuffer sb = new StringBuffer();
        try {
            Scanner scanner = new Scanner(file,"UTF-8");
            while (scanner.hasNextLine()) {
                String line = scanner.nextLine();
                sb = sb.append(line);
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        text.setText(sb.toString());
        Font font = Font.loadFont(new File("bangla.ttf").toURL().toExternalForm(), 20);
        text.setFont(font);
        StackPane root = new StackPane();
        root.getChildren().add(text);
        Scene scene = new Scene(root, 300, 250);
        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:37:18.443

最后，这种支持出现在 JDK 8 (FX 8) 中。使用相同的开发人员预览重新编译并且它工作。

# c++ - 在 C++ 中将堆栈中的数组复制到堆中的数组

> ID：13195564
> 
> 赞同：0
> 
> 时间：2012-11-02T12:47:52.073
> 
> 标签：c++, pointers

好的，所以我有一个模型类，其中包含指向（将是）point3 对象数组的指针：

```
point3* _vertices_colors; 
```

Point3 具有以下 typedef：

```
typedef GLfloat point3[3]; 
```

本质上使 point3 对象数组成为数组数组。然后在派生类的构造函数中，我为要存储的顶点数和颜色分配内存，如下所示：

```
_vertices_colors = new point3[16]; 
```

这意味着我的对象有 8 个顶点并存储了自己的颜色。然后我在准备复制到指针的堆栈上定义以下数组：

```
point3 verticesColors[] = {
                            {1.0, 1.0, 1.0}, {1.0, 0.0, 0.0},
                            {-1.0, 1.0, 1.0}, {1.0, 0.0, 0.0},
                            {-1.0, -1.0, 1.0},{1.0, 0.0, 0.0},
                            {1.0, -1.0, 1.0},{1.0, 0.0, 0.0},
                            {1.0, 1.0, -1.0}, {1.0, 0.0, 0.0},
                            {-1.0, 1.0, -1.0}, {1.0, 0.0, 0.0},
                            {-1.0, -1.0, -1.0},{1.0, 0.0, 0.0},
                            {1.0, -1.0, -1.0},{1.0, 0.0, 0.0}
                        }; 
```

然后，我使用 for 循环复制到堆上的数组：

```
for(int i = 0; i < 16; i++)
{
    *_vertices_colors[i,0] = *verticesColors[i, 0];
    *_vertices_colors[i,1] = *verticesColors[i, 1];
    *_vertices_colors[i,2] = *verticesColors[i, 2];

    printf("%15f", *_vertices_colors[i,0]);
    printf("\t");
    printf("%15f", *_vertices_colors[i,1]);
    printf("\t");
    printf("%15f", *_vertices_colors[i,2]);
    printf("\n");
} 
```

但是，这似乎将 1.0、1.0、-1.0 分配给数组的 16 行中的每一行。我尝试了其他将指针分配给数组的方法，例如以下行：

```
_vertices_colors = verticesColors; 
```

由于 verticesColors 是指向数组的常量指针，我认为这会起作用，但是它会产生相同的结果。我也尝试过使用 memcpy：

```
memcpy(_vertices_colors, verticesColors, sizeof(_vertices_colors)); 
```

但这似乎会产生一些不可控的结果。它将第一列中的每一列分配为 1.0，将其余列分配为非常大的负整数。谁能明白为什么我的第一种方法不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T12:50:56.517

这

```
*_vertices_colors[i,0] = *verticesColors[i, 0];
*_vertices_colors[i,1] = *verticesColors[i, 1];
*_vertices_colors[i,2] = *verticesColors[i, 2]; 
```

相当于

```
*_vertices_colors[0] = *verticesColors[0];
*_vertices_colors[1] = *verticesColors[1];
*_vertices_colors[2] = *verticesColors[2]; 
```

您在数组订阅中使用序列运算符`,`，它产生序列的最后一个值。在本例中为 0、1 和 2。

多维数组被访问为

```
_vertices_colors[i][0] = verticesColors[i][0]; 
```

# iframe - 如何通过 selenium webdriver 访问动态加载的 iframe 内容

> ID：13195567
> 
> 赞同：1
> 
> 时间：2012-11-02T12:48:01.777
> 
> 标签：iframe, selenium, selenium-webdriver

我有一个最初为空的 iframe，然后在页面上的交互过程中将元素动态加载到 iframe 中。我需要访问其中一个元素才能进入工作流的下一步。我使用以下代码：-

```
driver.switchTo().frame(iframeElement);  
Wait wait = new FluentWait(driver).withTimeout(30,TimeUnit.SECONDS).
 pollingEvery(2,TimeUnit.SECONDS).ignoring(NoSuchElementException.class);

WebElement pluginTwitterButton = wait.until(new Function() {
  public WebElement apply( WebDriver driver ) { 
    return driver.findElement( By.id("twitter") ); 
  } 
}); 
```

稍后我需要做 pluginTwitterButton.click();

但我收到以下错误 - org.openqa.selenium.TimeoutException: Timed out after 30 seconds waiting for xxx.xxx.TestCaseSampleReply$1@1217e615 Build info: version: '2.25.0', revision: '17482', time: ' 2012-07-18 21:08:56' 系统信息：os.name：'Linux'，os.arch：'amd64'，os.version：'3.2.0-32-generic'，java.version：'1.6 .0_24' 引起：org.openqa.selenium.NoSuchElementException：无法定位元素：{"method":"id","selector":"twitter"} 命令持续时间或超时：30.03 秒

我使用 firefox 驱动程序，selenium webdriver jar v.2.25.0 - 当 firefoxdriver 执行时，需要单击的元素是肉眼可见的，但 iframe 变量由于某种原因没有被刷新。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T15:02:43.910

从[这篇文章](https://stackoverflow.com/questions/12858972/how-can-i-ask-the-selenium-webdriver-to-wait-for-few-seconds)，你可以试试这个：

```
driver.switchTo().frame(iframeElement);
Thread.sleep(2000); // time to load new iframe DOM
WebElement myElement = fluentWait(By.cssLocator(myLocator)); 
```

使用这种方法：

```
public WebElement fluentWait(final By locator) {
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(30, TimeUnit.SECONDS)
            .pollingEvery(5, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class, StaleElementReferenceException.class );

    WebElement foo = wait.until(new Function<WebDriver, WebElement>() {
        public WebElement apply(WebDriver driver) {
            return driver.findElement(locator);
        }
    });

    return  foo;
}; 
```

# imap - 多个发件人的 Gmail IMAP 搜索

> ID：13195569
> 
> 赞同：3
> 
> 时间：2012-11-02T12:48:19.963
> 
> 标签：imap, gmail-imap

这个搜索查询对我来说似乎有效：

```
UID SEARCH OR ( OR ( OR (FROM "def@gmail.com") (FROM "abc@gmail.com")) (FROM "ghi@gmail.com")) (FROM "jkl@gmail.com") 
```

但是在尝试将该命令查询到 Gmail IMAP 时出现“无法解析命令”错误。

我试过了

> UID 搜索 OR OR OR FROM "def@gmail.com" FROM "abc@gmail.com" FROM "ghi@gmail.com" FROM "jkl@gmail.com"

和

> UID 搜索或（来自“jkl@gmail.com”）（或（来自“ghi@gmail.com”）（或（来自“abc@gmail.com”）（来自“def@gmail.com”）））

和

> UID 搜索 OR OR OR FROM def@gmail.com FROM abc@gmail.com FROM ghi@gmail.com FROM jkl@gmail.com

一切都因“无法解析命令”而失败。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:36:30.067

首先，确保您选择了一个邮箱，否则它将无法工作。其次，确保您在命令前加上标签，否则 IMAP 会将您的 UID 命令解释为标签，并实际执行 SEARCH 命令而不是 UID 命令。

*最后，尝试慢慢*构建您的搜索查询。以下命令对我有用：

```
tag UID SEARCH FROM "def@gmail.com"
tag UID SEARCH OR FROM "def@gmail.com" FROM "abc@gmail.com"
tag UID SEARCH OR OR FROM "def@gmail.com" FROM "abc@gmail.com" FROM "blah@hotmail.com"
tag UID SEARCH OR OR OR FROM "def@gmail.com" FROM "abc@gmail.com" FROM "blah@hotmail.com" FROM "dah@bah.com" 
```

# text - 使用 ADODB 连接使用 vba 将来自两个不同服务器上的两个不同数据库的两个表左连接

> ID：13195573
> 
> 赞同：2
> 
> 时间：2012-11-02T12:48:24.423
> 
> 标签：text, excel, database-connection, vba

我有一个数据库，其中包含我可以连接和查询的所有订单。另外，我有一个文本文件，其中包含我可以连接和查询的最后一个数据库查询的命令。我需要能够在 VBA 中加入两者。我的数据库没有任何问题，因为它在连接字符串中，但我似乎无法将文本文件路径传递给 SQL 字符串，而不会出现无效对象错误。我是 SQL 新手并连接到文件。任何帮助，将不胜感激。

我正在尝试执行以下操作：

```
Sub Comp2TablesFrom2Databases()

Dim rs As ADODB.Recordset
Dim strSQL As String, strCon As String

Set rs = New ADODB.Recordset
rs.CursorLocation = adUseClient
strCon = "Connection string to database" 'works fine in test code that only connects to the database

strSQL = "SELECT * " _
& "FROM Database LEFT JOIN [TextFilePath] " _
& "ON Database.[Order No] = [TextFilePath].[Order No] " _
& "WHERE [TextFilePath].[Order No] IS NULL;"

rs.Open strSQL, strCon

'do stuff

rs.Close
Set rs = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:50:22.650

你之前忘记了一个空格`"`

试试这个

```
strSQL = "SELECT * " _
& "FROM Database LEFT JOIN [TextFilePath] " _
& "ON Database.[Order No] = [TextFilePath].[Order No] " _
& "WHERE [TextFilePath].[Order No] IS NULL;" 
```

所以你的查询看起来像：

```
SELECT * FROM Database LEFT JOIN [TextFilePath] ON Database.[Order No] = [TextFilePath].[Order No]WHERE [TextFilePath].[Order No] IS NULL; 
```

所以`[Order No]WHERE`应该做一个错误

[这是](http://www.exceluser.com/explore/msquery2_4.htm)对文本文件的查询示例

我认为你应该添加路径

![在此处输入图像描述](../Images/f847acbaf4fdb1a648a5f576b8127d2b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:26:21.290

我快速而肮脏的解决方案是创建一个包含两张纸的辅助 XL 文件。一张查询文本文件，另一张查询数据库。每次打开辅助 XL 文件时都会运行查询。我在主 XL 文件中的两个辅助表上有一个左连接查询，我想要过滤数据。这是一种解决方法，但它有效。我认为我遇到的问题是 Jet OLEDB 提供程序不支持查询 SQL 服务器，而 SQL OLEDB 不支持查询文本文件。如果有人知道同时提供这两种服务的提供商，我将不胜感激。

# scala - Scala - 应用于隐式参数选择的 Co/Contra-Variance

> ID：13195574
> 
> 赞同：11
> 
> 时间：2012-11-02T12:48:29.143
> 
> 标签：scala, typeclass, contravariance, implicits

我有这样的特点：

```
trait CanFold[-T, R] {
  def sum(acc: R, elem: T): R
  def zero: R
} 
```

使用这样的功能：

```
def sum[A, B](list: Traversable[A])(implicit adder: CanFold[A, B]): B = 
  list.foldLeft(adder.zero)((acc,e) => adder.sum(acc, e)) 
```

目的是做这样的事情：

```
implicit def CanFoldSeqs[A] = new CanFold[Traversable[A], Traversable[A]] {
  def sum(x: Traversable[A], y: Traversable[A]) = x ++ y
  def zero = Traversable()
}

sum(List(1, 2, 3) :: List(4, 5) :: Nil)
//=> Traversable[Int] = List(1, 2, 3, 4, 5) 
```

因此，对于环境已经知道如何折叠并且可以为 Ints、Strings 等定义的类型，它是一个类型类。

我的问题是我还希望有更具体的隐式优先，如下所示：

```
implicit def CanFoldSets[A] = new CanFold[Set[A], Set[A]] {
  def sum(x: Set[A], y: Set[A]) = x ++ y
  def zero = Set.empty[A]
}

sum(Set(1,2) :: Set(3,4) :: Nil)
//=> Set[Int] = Set(1, 2, 3, 4) 
```

但是，该方法调用会产生冲突，因为存在歧义：

```
both method CanFoldSeqs in object ...
and method CanFoldSets in object ...
match expected type CanFold[Set[Int], B] 
```

所以我想要的是让编译器在 Any 和我的类型之间搜索最具体的隐式。目的是为基类型提供默认实现，可以轻松地为更具体的子类型覆盖这些实现，而不会出现丑陋的阴影。

我可能在这里一厢情愿，但只能希望:-)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T13:26:53.907

在这种情况下，通常的方法利用了隐式按继承优先级的方式：

```
trait LowPriorityCanFoldInstances {
  implicit def CanFoldSeqs[A] = new CanFold[Traversable[A], Traversable[A]] {
    def sum(x: Traversable[A], y: Traversable[A]) = x ++ y
    def zero = Traversable()
  }
}

object CanFoldInstances extends LowPriorityCanFoldInstances {
  implicit def CanFoldSets[A] = new CanFold[Set[A], Set[A]] {
    def sum(x: Set[A], y: Set[A]) = x ++ y
    def zero = Set.empty[A]
  }
}

import CanFoldInstances._ 
```

现在该`Set`实例将在适用时使用，但 for`Traversable`在不适用时仍然可用。

# python - Python & mechanize：如何连续翻页？

> ID：13195575
> 
> 赞同：2
> 
> 时间：2012-11-02T12:48:32.883
> 
> 标签：python, screen-scraping, web-scraping, mechanize, mechanize-python

我的问题如下：我正在尝试编写一个贯穿机票网站订购流程的刮板。所以我想根据之前页面的结果抓取几页（我希望你明白我的意思）。我现在到目前为止：

```
 import mechanize, urllib, urllib2

    url = 'any url'
    br = mechanize.Browser()
    br.set_handle_robots(False)
    br.addheaders = [('User-agent', 'Mozilla/5.0 (Windows NT 5.2; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11')]
    br.open(url)
    response = br.response().read()

    br.select_form(nr=1)
    br.form.set_all_readonly(False)

    ## now I am reading out the variables of form(nr=1)

    for control in br.form.controls:
           if not control.name:
               print " - (type) =", (control.type)
               continue  
           print " - (name, type, value) =", (control.name, control.type, br[control.name])

    ## now I am modifying the variables
    br['fromdate'] = '2012/11/03'
    br['todate'] = '2012/11/07'

    ## now I am submitting the form and saving the output in the variable bookingsite
    response = br.submit()
    bookingsite = response.read() 
```

这是我的问题：如何使用变量 bookingsite，它再次包含我要修改和提交的表单，就像普通 URL 一样？只需通过设置

```
 br.open(bookingsite) 
```

？？？还是有另一种修改和提交输出的方法（然后再次提交输出并接收新的输出页面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T14:50:57.370

初始响应后`response = br.submit()`从响应对象中选择表单：

```
response.select_form() 
```

更改表单中字段的值后，提交表单：

```
response.submit() 
```

PS 如果您正在自动化预订网站，他们很可能有大量的 Javascript。Mechanize 不处理 Javascript。我建议改用 Requests 。你会很高兴你做到了。

# c# - RemoteWebDriver & IE8 挂起 下载图片 res://ieframe.dll/background_gradient_red.jpg

> ID：13195576
> 
> 赞同：0
> 
> 时间：2012-11-02T12:48:36.880
> 
> 标签：c#, internet-explorer, webdriver, selenium-webdriver

我已经设法处理了 IE8 中缺少的安全证书，但是在加载“正在下载图片 res://ieframe.dll/background_gradient_red.jpg...”时浏览器经常会挂起，并且节点上的任何以下 IE 测试也会失败.

我正在与 ops 团队合作解决证书问题，但与此同时还有其他人看到这个问题吗？

万一这有帮助，这就是我创建驱动程序的方式...

```
DesiredCapabilities capabilities = DesiredCapabilities.InternetExplorer();
capabilities.SetCapability(CapabilityType.AcceptSslCertificates, true);
capabilities.SetCapability(CapabilityType.HandlesAlerts,true);
capabilities.SetCapability("ignoreProtectedModeSettings",true);
driver = new RemoteWebDriver(new Uri(GridHubUrl), capabilities);
driver.Manage().Cookies.DeleteAllCookies();
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(60));
driver.Manage().Timeouts().SetScriptTimeout(TimeSpan.FromSeconds(60)); 
```

这个位处理点击覆盖......

```
public static void Handle()
    {
        if (driver.ToString() == "OpenQA.Selenium.IE.InternetExplorerDriver" ||
            driver.Url.Contains("res://ieframe.dll/invalidcert.htm"))
        {
            try
            {
                driver.Navigate().GoToUrl("javascript:document.getElementById('overridelink').click()"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:40:50.600

今天我遇到了同样的问题，但通过这样做解决了 -

## 浏览器设置：

在您的浏览器中转到：
**设置-> Internet 选项-> 安全-> 受信任的站点->“站点”按钮-> 添加您的站点**

```
System.setProperty("webdriver.ie.driver","C:\\Users\\XXXXXX\\Desktop\\selenium jars\\Eclipse Jars\\IEDriverServer_x64_2.29.0\\IEDriverServer.exe");
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS,true);

driver = new InternetExplorerDriver();

driver.get(baseUrl + "/content/");
    driver.navigate().to("javascript:document.getElementById('overridelink').click()");
    driver.findElement(By.id("edit-acct")).clear(); 
```

# networking - 为软件的多个客户端使用不同的代理

> ID：13195578
> 
> 赞同：1
> 
> 时间：2012-11-02T12:48:41.103
> 
> 标签：networking, proxy, network-programming, socks

我有一种情况，我需要运行 20 个可执行文件的客户端。我必须为这些客户端分配不同的代理以进行测试。我有一个代理软件，它为不同的客户端分配不同的代理，ieaexe，b.exe。但在这种情况下，所有可执行文件都必须同名。

是否有任何代理软件或代码可以将不同的 SOCKS 代理分配给特定的客户？也许使用 PID 或代理池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:05:18.713

您可以通过 java.net.Proxy*为每个连接*分配不同的代理和代理类型。

# asp.net-web-api - ASP .NET Web API Post 模型绑定问题

> ID：13195580
> 
> 赞同：1
> 
> 时间：2012-11-02T12:48:45.587
> 
> 标签：asp.net-web-api

我是一个 Web API 新手，正在尝试我的第一个 POST 到 API（我所有的 GET 都很好）。而且无论我尝试什么，模型绑定似乎都不起作用。路由很好，因为我看到控制权进入了正确的方法，但模型对象引用始终为空。我尝试使用一个简单的类作为模型（两个属性，两个字符串），仍然没有运气。关于我所缺少的任何建议？我正在使用提琴手发帖。eg：请求正文有

```
{"Name":"Test","Description":"Test"} 
```

在开始时尝试使用 =，在开始时尝试了 method-argument-variable=，但没有运气。始终为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T06:17:30.427

通过请求体发送参数时，必须使用方法体中的 [FromBody] 属性。[FromBody] 表示它将请求中的参数绑定到模型类。检查您是使用 [FromBody] 还是通过 url ？

```
[System.Web.Http.HttpPost]
public List<PortalUser> GetPortalUsers([FromBody]PortalUser PortalUser)
{ } 
```

# javascript - Adobe 空气透明 Windows 系统托盘图标显示为黑色块

> ID：13195581
> 
> 赞同：0
> 
> 时间：2012-11-02T12:48:46.240
> 
> 标签：javascript, air, adobe

在 Windows 中，我的 Adob​​e air 应用程序需要一个 100% 透明的托盘图标。但它始终显示为黑色块。我尝试加载 100% 透明图像并创建 100% 透明`BitmapData`，但没有人工作。

创建一个 100% 透明的`BitmapData`：

```
var transparentImage = new air.BitmapData(16, 16, true, 0); 
```

并将托盘图标图像设置为此新图像。

```
air.NativeApplication.nativeApplication.icon.bitmaps = [transparentImage]; 
```

事实上，我加载了另一个不是 100% 透明的图像，它看起来很正常。

那么我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:01:37.957

刚才我编辑了我的 PNG 图像以使我的应用程序运行良好。

起初图像是 100% 透明的，我用 Photoshop 打开它并用 90% 透明的颜色填充它。

然后系统托盘图标正常出现。

# string - 将字符串拆分为字符数组？

> ID：13195583
> 
> 赞同：34
> 
> 时间：2012-11-02T12:48:56.890
> 
> 标签：string, vba, char

如何将 VBA 字符串拆分为字符数组？

我试过`Split(my_string, "")`了，但这没有用。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-02T12:58:39.863

最安全和最简单的就是循环；

```
Dim buff() As String
ReDim buff(Len(my_string) - 1)
For i = 1 To Len(my_string)
    buff(i - 1) = Mid$(my_string, i, 1)
Next 
```

如果您保证只能使用 ansi 字符，则可以；

```
Dim buff() As String
buff = Split(StrConv(my_string, vbUnicode), Chr$(0))
ReDim Preserve buff(UBound(buff) - 1) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-02T14:10:05.730

您可以将字符串分配给字节数组（也可以反过来）。结果是每个字符有 2 个数字，因此 Xmas 转换为包含 {88,0,109,0,97,0,115,0} 的字节数组，
或者您可以使用 StrConv

```
Dim bytes() as Byte
bytes = StrConv("Xmas", vbFromUnicode) 
```

这将为您提供 {88,109,97,115} 但在这种情况下，您无法将字节数组分配回字符串。
您可以使用 Chr() 函数将字节数组中的数字转换回字符

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-02T12:58:15.420

这是在 VBA 中执行此操作的另一种方法。

```
Function ConvertToArray(ByVal value As String)
    value = StrConv(value, vbUnicode)
    ConvertToArray = Split(Left(value, Len(value) - 1), vbNullChar)
End Function
Sub example()
    Dim originalString As String
    originalString = "hi there"
    Dim myArray() As String
    myArray = ConvertToArray(originalString)
End Sub 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-16T18:27:58.703

根据[Gaffi 的这个代码打高尔夫球解决方案](http://gaffiprog.blogspot.com/2013/04/golfing-tip-vba-split-string-into.html)，以下工作：

```
a = Split(StrConv(s, 64), Chr(0)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T04:41:11.667

问题是在 vb 中没有内置方法（或者至少我们都找不到）来做到这一点。但是，有一个可以在空格上拆分字符串，所以我只是重建字符串并添加到空格中......

```
Private Function characterArray(ByVal my_string As String) As String()
  'create a temporary string to store a new string of the same characters with spaces
  Dim tempString As String = ""
  'cycle through the characters and rebuild my_string as a string with spaces 
  'and assign the result to tempString.  
  For Each c In my_string
     tempString &= c & " "
  Next
  'return return tempString as a character array.  
  Return tempString.Split()
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-23T21:15:33.467

要将字符串拆分为任意长度的子字符串数组：

```
Function charSplitMulti(s As Variant, splitLen As Long) As Variant

        Dim padding As Long: padding = 0
        Dim l As Long: l = 0
        Dim v As Variant

        'Pad the string so it divides evenly by
        ' the length of the desired sub-strings
        Do While Len(s) Mod splitLen > 0
            s = s & "x"
            padding = padding + 1
        Loop

        'Create an array with sufficient
        ' elements to hold all the sub-strings
        Do Until Len(v) = (Len(s) / splitLen) - 1
            v = v & ","
        Loop
        v = Split(v, ",")

        'Populate the array by repeatedly
        ' adding in the first [splitLen]
        ' characters of the string, then
        ' removing them from the string
        Do While Not s Like ""
            v(l) = Mid(s, 1, splitLen)
            s = Right(s, Len(s) - splitLen)
            l = l + 1
        Loop

        'Remove any padding characters added at step one
        v(UBound(v)) = Left(v(UBound(v)), Len(v(UBound(v))) - padding)

        'Output the array
        charSplitMulti = v

    End Function 
```

您可以将字符串作为字符串传递给它：

```
Sub test_charSplitMulti_stringInput()

    Dim s As String: s = "123456789abc"
    Dim subStrLen As Long: subStrLen = 4
    Dim myArray As Variant

    myArray = charSplitMulti(s, subStrLen)

    For i = 0 To UBound(myArray)
        MsgBox myArray(i)
    Next

End Sub 
```

…或者已经声明为变体：

```
Sub test_charSplitMulti_variantInput()

    Dim s As Variant: s = "123456789abc"
    Dim subStrLen As Long: subStrLen = 5

    s = charSplitMulti(s, subStrLen)

    For i = 0 To UBound(s)
        MsgBox s(i)
    Next

End Sub 
```

如果所需子字符串的长度不等于字符串的长度，则数组的最上面的元素会更短。（它将等于 strLength Mod subStrLength。这可能很明显。）

我发现我最常使用它来将字符串拆分为单个字符，所以我添加了另一个函数，这样我就可以偷懒并且在这种情况下不必传递两个变量：

```
Function charSplit(s As Variant) As Variant

    charSplit = charSplitMulti(s, 1)

End Function

Sub test_charSplit()

    Dim s As String: s = "123456789abc"
    Dim myArray As Variant

    myArray = charSplit(s)

    For i = 0 To UBound(myArray)
        MsgBox myArray(i)
    Next

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T13:20:55.537

试试这个来自 Rara 的 minicode：

```
Function charSplitMulti(TheString As Variant, SplitLen As Long) As Variant
    'Defining a temporary array.
    Dim TmpArray() As String
    'Checking if the SplitLen is not less than one. if so the function returns the whole string without any changing.
    SplitLen = IIf(SplitLen >= 1, SplitLen, Len(TheString))
    'Redefining the temporary array as needed.
    ReDim TmpArray(Len(TheString) \ SplitLen + IIf(Len(TheString) Mod SplitLen <> 0, 1, 0))
    'Splitting the input string.
    For i = 1 To UBound(TmpArray)
        TmpArray(i) = Mid(TheString, (i - 1) * SplitLen + 1, SplitLen)
    Next
    'Outputing the result. 
    charSplitMulti = TmpArray
End Function 
```

# magento - Magento 表以及它们如何与数据库一起使用

> ID：13195585
> 
> 赞同：0
> 
> 时间：2012-11-02T12:49:00.477
> 
> 标签：magento

我一直在尝试理解 Magento，并且在 wiki 上阅读了很多东西，但我无法弄清楚 Magento 如何与数据库表一起工作？因为我没有看到任何 SQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:12:03.017

我建议阅读 Alan Storm 的这篇博文：http: [//alanstorm.com/magento_models_orm](http://alanstorm.com/magento_models_orm)

他对 Magento ORM 系统做了相当多的解释，在我看来，整个网站对于任何 Magneto 开发人员来说都是一个很好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:36:25.823

从[知识库](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)开始阅读第 5 章。

你并不是真的在问一个问题，所以没有人可以帮助具体问题，我总是发现你通过实践学习得最好，我发现搞乱magento的最好方法是使用以下内容创建一个`test.php`文件`shell/`：（例如）

```
<?php
require('abstract.php');

class Test extends Mage_Shell_Abstract
{
    function run(){ //call your functions here
        echo 'running ..';
        $this->database();
    }

    function database() { //you can create as many functions as you like
        $entityId = '4449'; //product id

        $product=Mage::getModel("catalog/product")->load($entityId);
        var_dump($product->getAttributeText('size'));
    }
}

$test = new Test();
$test -> run(); 
```

然后你可以从控制台运行： `php test.php`

它在我的例子中返回 `running ..string(11) "Extra Large"`

希望对你有帮助，下次再具体点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T01:02:25.230

如果您查看您的 MySQl 日志，magento 进行的调用有时可能长达 500 行或更长......这些调用是使用 XML 文件动态构建的。手动操作 Magento 数据的最佳方法是使用`MAGE::`调用或使用直接数据库连接，方法是：

```
$read = $resource->getConnection('core_read');
$sql = "select * from [YOUR_TABLE] where 1 limit 1";
$result = $read->query($sql); 
```

要么是这样，要么是这样的调用：

```
$value = 'some value';
$item->setData('some_key', $value);
$item->save(); 
```

Magento 是面向对象的，因此这些是在 Magento 中检索/设置数据的最普遍接受和使用的方法。我希望这会有所帮助。

# php - 如何使用 MySQLi 获得正确实例化的对象

> ID：13195588
> 
> 赞同：1
> 
> 时间：2012-11-02T12:49:10.560
> 
> 标签：php, mysqli

有一个[bug](https://bugs.php.net/bug.php?id=61843 "漏洞")说如果你***使用****它*`fetch_object('classname')`会**在*******_构造**。那么如何在调用**__set**方法之前实例化对象。***

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:17:58.297

这个 Bug/Feature 是一个有趣的 PHP 缺陷。在这样的情况下很方便：

```
class MyModel {

    public $id;
    public $column2;
    public $column3;

    public function __construct() {
        //work with prefilled properties from database here
    }
}

$model = $mysqli->query()->fetch_object('MyModel'); 
```

它甚至在这种情况下也有效：

```
class MyModel {

    public $data;

    public function __construct() {
        //work with $this->data here
    }

    public function __set($name, $value) {
        $this->data[$name] = $value;
    }
}

$model = $mysqli->query()->fetch_object('MyModel'); 
```

但在这种情况下它会咬你：

```
class MyModel {

    public $data;

    public function __construct($someOtherService) {
        $this->service = $someOtherService;
    }

    public function __set($name, $value) {
        $this->service->workWith($name, $value);
        $this->data[$name] = $value;
    }
}

$model = $mysqli->query()->fetch_object('MyModel'); 
```***

# php - .htaccess - 使用子文件夹名称作为变量将子文件夹重定向到 index.php

> ID：13195590
> 
> 赞同：0
> 
> 时间：2012-11-02T12:49:18.323
> 
> 标签：php, html, .htaccess

这让我发疯。我正在尝试使用 .htaccess 将子文件夹（不存在）重定向到索引页面，使用子文件夹名称作为变量。IE：

[http://www.website.com/john/](http://www.website.com/john/)

重定向到：

[http://www.website.com/index.php?name=john](http://www.website.com/index.php?name=john)

我试过这个（和其他各种）没有运气：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^(.*)$ index.php?name=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:52:36.713

这是一个示例，您可以如何执行此操作：

```
# turn mod_rewrite engine on
RewriteEngine On

# rewrite a physical existing file or folder
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d

# allow things that are certainly necessary
RewriteCond %{REQUEST_URI} "/layout/" [OR]
RewriteCond %{REQUEST_URI} "/javascript/"

# rewrite rules
RewriteRule .* - [L]
RewriteRule (.*) index.php?_route=$1 [QSA] 
```

这也拒绝访问您不想公开的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T12:52:42.690

试试这个：

```
RewriteRule ^([^/]*)/$ /?name=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:33:00.987

```
RewriteRule ^([^.]*)$ /index.php?name=$1 [L,QSA] 
```

# c++ - 对象什么时候被销毁？

> ID：13195594
> 
> 赞同：1
> 
> 时间：2012-11-02T12:49:23.487
> 
> 标签：c++, oop, class, object

我想确认在以下情况下会发生的行为。假设我有一些函数定义为：

```
std::vector<Object*> FuncA()
Result FuncB() 
```

result 是一个带有构造函数的类

```
Result(const std::vector<Object*>& result)
{
    this->result = result;
} 
```

现在，FuncB 执行以下操作：

```
Result FuncB() {
 ... some stuff here ...
return Result(FuncA())
} 
```

FuncA 返回的向量何时会被销毁（调用其析构函数）？当结果超出范围时会是这样吗？持有对它的引用的结果是否会延长其生命周期？如果不能，您能否解释一下原因以及实现我所追求的方法？

谢谢

编辑：这是结果类

```
class Result
    {
    private:
        std::vector<Object*> result;

        void SetData(const Result& other);
        void Free();

        // Constructs the result and takes ownership of the memory.
        Result(const std::vector<Object*>& result);

        Result();

    public:
        Result(const Result& other);
        Result& operator=(const Result& rhs);
        ~Result();

        const Object& operator [] (int index);
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:51:48.463

如果`Result`持有参考，那么你就有问题了。返回的对象`FuncA`将在对象返回之前被销毁`Result`。

现在，`Result`按价值持有。这意味着 的返回值`FuncA`将被复制到构造函数中。当`Result`对象存在时，向量将被销毁。

如果要避免复制，[请在构造函数中按值获取对象](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)：

```
Result(std::vector<Object*> result) 
    : result(std::move(result))
{} 
```

或者，如果您不使用 C++11（参见 @Steve Jessop 的评论）

```
Result(std::vector<Object*> result) 
{
    this->result.swap (result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:52:25.700

这很可能是做你想做的事情的错误方法。当`Result`超出范围时，向量会被破坏。向量中的指针指向的内存没有。

因此，您可以返回一个向量并仍然使用它，但如果该向量副本中的指针被释放，您将遇到 UB。

有一个`std::vector<std::shared_ptr<Object>>`代替会为你省去很多麻烦。

# lucene - 如何根据 RavenDB LuceneQuery 中的零个或多个术语过滤查询？

> ID：13195598
> 
> 赞同：1
> 
> 时间：2012-11-02T12:49:34.017
> 
> 标签：lucene, ravendb

我需要通过用户最喜欢和被阻止的标签来过滤 LicenseeQuery。当用户有一些最喜欢和被阻止的标签时，我已经完成了这项工作，但我正在努力解决用户没有最喜欢或被阻止的标签的情况。我相信我需要使用 MatchAllDocsQuery 的等价物，但我看不到如何通过 RavenDB 客户端 API 实现这一点。

当用户有一个或多个收藏夹和一个或多个被屏蔽的标签时，这可以正常工作：

```
string favesQuery = String.Join(" OR ", user.FavouriteTags.Select(x => String.Format("Tags:{0}", x)));
string blockedQuery = String.Join(" AND ", user.BlockedTags.Select(x => String.Format("-Tags:{0}", x)));
var articles = RavenSession.Advanced
                           .LuceneQuery<Article>("AllDocs/ByTags")
                           .Include(x => x.Author)
                           .Where(favesQuery)
                           .Boost(0.5m)
                           .Where(blockedQuery)
                           .OrderByDescending(x => x.DatePublished); 
```

我得到的直接问题是`Missing where clause`，但这是因为`String.Join`当为空时返回一个空字符串`user.FavouriteTags`。我可以在 and 前面加上一些东西`favesQuery`吗`blockedQuery`？

用 SQL 术语思考，我正在寻找相当于`WHERE 1=1 AND ...`

相关问题[https://groups.google.com/forum/?fromgroups=#!topic/ravendb/JKTpHiFRJLc](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/JKTpHiFRJLc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:24:16.213

重新考虑 LINQ 方法的结构。

```
var articles = RavenSession.Advanced
                           .LuceneQuery<Article>("AllDocs/ByTags")
                           .Include(x => x.Author);
if (user.FavouriteTags.Any()) {
    string favesQuery = String.Join(" OR ", user.FavouriteTags.Select(x => String.Format("Tags:{0}", x)));
    articles = articles.Where(favesQuery).Boost(0.5m);
}
if (user.BlockedTags.Any()) {
    string blockedQuery = String.Join(" AND ", user.BlockedTags.Select(x => String.Format("-Tags:{0}", x)));
    articles = articles.Where(blockedQuery);
}
articles = articles.OrderByDescending(x => x.DatePublished); 
```

# php - 如果服务器空闲，则第一次尝试 php 会话失败

> ID：13195604
> 
> 赞同：0
> 
> 时间：2012-11-02T12:50:00.993
> 
> 标签：php, session

由于某种原因，如果服务器空闲了一段时间，例如几个小时，第一次登录尝试将失败。

这就是发生的事情：

1.  用户导航到登录脚本
2.  该脚本设置会话变量并重定向到主页
3.  主页应该能够读取会话变量（但在这种情况下会失败）

PHP错误日志中没有备注，第二次尝试正常。它仅发生在第一个用户在空闲期后访问该页面。例如，如果另一个用户在 5 秒后尝试登录，则一切正常。

这是在使用 FastCGI 的带有 PHP 5.3 的 IIS7 上。

任何想法这里有什么问题或我可以做些什么来找到解决方案？

脚本大致是这样设置 login.php 的：

```
@session_start();
$_SESSION['userid'] = $userid;
session_write_close();
session_unset();
usleep(200000);     
header('Location:index.php'); 
```

主脚本

```
session_start();
if (isset($_SESSION['userid'])) {
   // Login successful
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:45:45.680

删除三行。

```
session_write_close();
session_unset();
sleep(200000); 
```

# xml - XML 架构 XSD 文件错误

> ID：13195605
> 
> 赞同：1
> 
> 时间：2012-11-02T12:50:05.297
> 
> 标签：xml, xsd, schema

我有下面的示例 XML，我想针对下面的架构进行验证。我收到有关 extraImages 的错误。错误是：

> 错误 3033：元素“{http://www.w3.org/2001/XMLSchema}sequence”：内容无效。预期是（注释？，（元素|组|选择|序列|任何）*）。

谁能看到我做错了什么？当我在单独的模式中拥有 extraImages 复杂类型时，它可以工作，但当我将它添加到产品模式时它不起作用。

```
<products>
<product>
<productImageURL>imgp9241.jpg</productImageURL>
<productDescription>blah blah blah</productDescription>
<productName>Test Extra</productName>
<extraImages>
<extraImages>
<fileName>textextra.jpg</fileName>
<sequence>10</sequence>
</extraImages>
<extraImages>
<fileName>textextra.jpg</fileName>
<sequence>10</sequence>
</extraImages>
</extraImages>
</product>
</products>

<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<xsd:element name="products">
   <xsd:complexType>
      <xsd:sequence>
         <xsd:element name="product" minOccurs = "1" maxOccurs="1" type="productType"/>
      </xsd:sequence>
   </xsd:complexType>
</xsd:element>

    <xsd:complexType name="productType">
       <xsd:sequence>

           <xsd:element name="productImageURL">
              <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="0" />
                    <xsd:maxLength value="450" />
                    <xsd:whiteSpace value="collapse" /> 
                </xsd:restriction>
              </xsd:simpleType>
            </xsd:element>

           <xsd:element name="productDescription">
              <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"/>
                    <xsd:whiteSpace value="collapse"/> 
                </xsd:restriction>
              </xsd:simpleType>
            </xsd:element>

           <xsd:element name="productName">
              <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"/>
                    <xsd:maxLength value="150"/>
                    <xsd:whiteSpace value="collapse"/> 
                </xsd:restriction>
              </xsd:simpleType>
            </xsd:element>

            <xsd:element name="extraImages">
               <xsd:complexType>
                  <xsd:sequence>
                     <xsd:element name="extraImage" minOccurs = "1" maxOccurs="100" type="imgType"/>
                  </xsd:sequence>
               </xsd:complexType>
            </xsd:element>

                <xsd:complexType name="imgType">
                   <xsd:sequence>

                         <xsd:element name="fileName">
                          <xsd:simpleType>
                            <xsd:restriction base="xsd:string">
                                <xsd:maxLength value="25"/>
                                <xsd:whiteSpace value="collapse"/> 
                            </xsd:restriction>
                          </xsd:simpleType>
                        </xsd:element>

                        <xsd:element name="sequence" type="xsd:integer" default="0"/>

                   </xsd:sequence>
                </xsd:complexType>          

       </xsd:sequence>
    </xsd:complexType>  

</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:48:37.937

错误消息告诉您**XSD**无效。*除了schema*或*redefine*之外，您不能将**命名**类型嵌套在任何其他内容中。

 **更正后的 XSD：

```
<?xml version="1.0"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="products">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="product" minOccurs = "1" maxOccurs="1" type="productType"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
    <xsd:complexType name="productType">
        <xsd:sequence>
            <xsd:element name="productImageURL">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:minLength value="0"/>
                        <xsd:maxLength value="450"/>
                        <xsd:whiteSpace value="collapse"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="productDescription">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:minLength value="1"/>
                        <xsd:whiteSpace value="collapse"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="productName">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:minLength value="1"/>
                        <xsd:maxLength value="150"/>
                        <xsd:whiteSpace value="collapse"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="extraImages">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="extraImage" minOccurs = "1" maxOccurs="100" type="imgType"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="imgType">
        <xsd:sequence>
            <xsd:element name="fileName">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:maxLength value="25"/>
                        <xsd:whiteSpace value="collapse"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="sequence" type="xsd:integer" default="0"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

它显示了这种布局：

![在此处输入图像描述](../Images/465aa46d112a74191ae0bd0fe9bdd5cc.png)

修复 XSD 后，您可以尝试验证您显示的 XML。在将其与 XSD 进行比较时查看其结构时...

![在此处输入图像描述](../Images/ca7054761588ebfb6f0642c0b6f82648.png)

您可以看到**嵌套在*****extraImages*** 中的 extraImages 应该没有.**`s`**

 **```
Error occurred while loading [], line 7 position 5
The element 'extraImages' has invalid child element 'extraImages'. List of possible elements expected: 'extraImage'. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:03:46.120

在 XSD 中，您使用了两个不同的元素：**extraImages**和**extraImage**
但是在您的 XML 中，您使用了**extraImages**两次，而不是每次使用 extraImages 和 extraImage 一次****

# css - Less 是一个单一的编译过程吗？

> ID：13195606
> 
> 赞同：0
> 
> 时间：2012-11-02T12:50:07.190
> 
> 标签：css, less

Less 对文件执行一次传递还是多次传递？

主要是，我担心如果我包含另一个重新定义变量/混合的文件，变量/混合是原始的还是用于生成的覆盖值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:21:05.553

是的，稍后在代码中声明的 mixins 变量会覆盖之前的代码，就像在 css 中一样，如果您在两个地方声明同一个类，则后面的属性值将生效。

# android - 尝试使用真正的 Android 设备访问我的服务器上的本地数据库时出错

> ID：13195612
> 
> 赞同：0
> 
> 时间：2012-11-02T12:50:52.087
> 
> 标签：android, android-layout, android-intent, android-emulator

我创建了一个应用程序，它将与我的服务器上的本地数据库同步数据，我使用 jdbc 代码实现了这一点。它在我的模拟器上运行良好。

这是我用来连接到我的数据库的示例代码。我正在使用 jtds.jdbc 添加的 jar 文件来访问本地数据库。

```
String driver = "net.sourceforge.jtds.jdbc.Driver";
            Class.forName(driver).newInstance();
            Connection conn = DriverManager
                    .getConnection(
                            "jdbc:jtds:sqlserver://195.169.100.1:1433/dbname",
                            "username", "password");
            Log.w("Connection", "open");
            Statement stmtUserDetails = conn.createStatement();
            //Fetching Data From Tbl
            ResultSet resetUserDetails = stmtUserDetails
                    .executeQuery("select UserName,Password,Priviledges from TblmyTable"); 
```

当我尝试在调试模式下使用设备连接时。我的 LogCat 出现以下错误

```
11-02 13:19:05.249: D/SntpClient(73): request time failed: java.net.SocketException: Address family not supported by protocol 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:58:47.757

~~dbname 似乎不是有效的套接字。~~

尝试修复 jdbc 连接字符串

```
 .getConnection( "jdbc:jtds:sqlserver://195.169.100.1:1433/dbname",
                        "username", "password"); 
```

~~更新~~

 ~~你在评论中给我的数据库连接

```
 //192.165.100.3:1433/myTestDatabase", "aadi", "test123" 
```

无法从普通互联网访问（我只是试图打开数据库），因此不能从物理设备访问。是否有防火墙阻止访问？~~

# magento - wget --mirror 不创建清漆缓存

> ID：13195613
> 
> 赞同：4
> 
> 时间：2012-11-02T12:50:55.190
> 
> 标签：magento, wget, varnish, varnish-vcl

我在我的服务器上的 80 端口安装了清漆缓存，Apache 作为 8080 端口上的内容服务器。如果我运行 wget --mirror example.com 它应该爬过我的整个网站并创建清漆缓存，对吗？它不是。例如，通过运行 wget --mirror example.com，我可以在输出中看到它已通过 example.com/abc.html。但是当我从浏览器访问 example.com/abc.html 时，从我的响应头中我可以看到它正在返回 Varnish MISS（而且它也需要很长时间）。但是，如果我这次通过浏览器再次访问相同的 url，则缓存已生成，因为我可以在响应标头中看到 Varnish HIT

这是另一个有趣的事实：如果我只运行 wget example.com/abc.html 它将创建清漆缓存！另一个有趣的事实：如果我运行 wget --mirror example.com/abc.html 它将为 abc.html 创建清漆缓存，但不会创建更多页面

因此，出于某种原因，使用 --mirror example.com 会为第一页创建清漆缓存，但不会为其他页面创建清漆缓存。

如果有任何不同，我正在使用 Magento

我试过： wget --mirror --no-http-keep-alive example.com 但它不起作用

这是我的清漆 vcl

```
# This is a basic VCL configuration file for PageCache powered by Varnish for Magento module.

# default backend definition.  Set this to point to your content server.
backend default {
  .host = "127.0.0.1";
  .port = "8080";
}

# admin backend with longer timeout values. Set this to the same IP & port as your default server.
backend admin {
  .host = "127.0.0.1";
  .port = "8080";
  .first_byte_timeout = 18000s;
  .between_bytes_timeout = 18000s;
}

# add your Magento server IP to allow purges from the backend
acl purge {
  "localhost";
  "127.0.0.1";
}

sub vcl_recv {
    if (client.ip ~ purge) {
      set req.hash_always_miss = true;
    }

if (req.restarts == 0) {
    if (req.http.x-forwarded-for) {
        set req.http.X-Forwarded-For =
        req.http.X-Forwarded-For + ", " + client.ip;
    } else {
        set req.http.X-Forwarded-For = client.ip;
    }
}

if (req.request != "GET" &&
  req.request != "HEAD" &&
  req.request != "PUT" &&
  req.request != "POST" &&
  req.request != "TRACE" &&
  req.request != "OPTIONS" &&
  req.request != "DELETE" &&
  req.request != "PURGE") {
    /* Non-RFC2616 or CONNECT which is weird. */
    return (pipe);
}

# purge request
if (req.request == "PURGE") {
    if (!client.ip ~ purge) {
        error 405 "Not allowed.";
    }
    ban("obj.http.X-Purge-Host ~ " + req.http.X-Purge-Host + " && obj.http.X-Purge-URL ~ " + req.http.X-Purge-Regex + " && obj.http.Content-Type ~ " + req.http.X-Purge-Content-Type);
    error 200 "Purged.";
}

# switch to admin backend configuration
if (req.http.cookie ~ "adminhtml=") {
    set req.backend = admin;
}

# we only deal with GET and HEAD by default    
if (req.request != "GET" && req.request != "HEAD") {
    return (pass);
}

# normalize url in case of leading HTTP scheme and domain
set req.url = regsub(req.url, "^http[s]?://[^/]+", "");

# static files are always cacheable. remove SSL flag and cookie
if (req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$") {
    unset req.http.Https;
    unset req.http.Cookie;
}

# not cacheable by default
if (req.http.Authorization || req.http.Https) {
    return (pass);
}

# do not cache any page from
# - index files
# - ...
if (req.url ~ "^/(index)") {
    return (pass);
}

# as soon as we have a NO_CACHE cookie pass request
if (req.http.cookie ~ "NO_CACHE=") {
    return (pass);
}

# normalize Aceept-Encoding header
# http://varnish.projects.linpro.no/wiki/FAQ/Compression
if (req.http.Accept-Encoding) {
    if (req.url ~ "\.(jpg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|swf|flv)$") {
        # No point in compressing these
        remove req.http.Accept-Encoding;
    } elsif (req.http.Accept-Encoding ~ "gzip") {
        set req.http.Accept-Encoding = "gzip";
    } elsif (req.http.Accept-Encoding ~ "deflate" && req.http.user-agent !~ "MSIE") {
        set req.http.Accept-Encoding = "deflate";
    } else {
            # unkown algorithm
            remove req.http.Accept-Encoding;
        }
    }

    # remove Google gclid parameters
    set req.url = regsuball(req.url,"\?gclid=[^&]+$",""); # strips when QS = "?gclid=AAA"
    set req.url = regsuball(req.url,"\?gclid=[^&]+&","?"); # strips when QS = "?gclid=AAA&foo=bar"
    set req.url = regsuball(req.url,"&gclid=[^&]+",""); # strips when QS = "?foo=bar&gclid=AAA" or QS = "?foo=bar&gclid=AAA&bar=baz"

    return (lookup);
}

# sub vcl_pipe {
#     # Note that only the first request to the backend will have
#     # X-Forwarded-For set.  If you use X-Forwarded-For and want to
#     # have it set for all requests, make sure to have:
#     # set bereq.http.connection = "close";
#     # here.  It is not set by default as it might break some broken web
#     # applications, like IIS with NTLM authentication.
#     return (pipe);
# }
# 
# sub vcl_pass {
#     return (pass);
# }
# 
sub vcl_hash {
    hash_data(req.url);
    if (req.http.host) {
        hash_data(req.http.host);
    } else {
        hash_data(server.ip);
    }
    if (!(req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$")) {
        call design_exception;
    }
    return (hash);
}
# 
# sub vcl_hit {
#     return (deliver);
# }
# 
# sub vcl_miss {
#     return (fetch);
# }

sub vcl_fetch {
    if (beresp.status == 500) {
       set beresp.saintmode = 10s;
       return (restart);
    }
    set beresp.grace = 5m;

    # add ban-lurker tags to object
    set beresp.http.X-Purge-URL = req.url;
    set beresp.http.X-Purge-Host = req.http.host;

    if (beresp.status == 200 || beresp.status == 301 || beresp.status == 404) {
        if (beresp.http.Content-Type ~ "text/html" || beresp.http.Content-Type ~ "text/xml") {
            if ((beresp.http.Set-Cookie ~ "NO_CACHE=") || (beresp.ttl < 1s)) {
                set beresp.ttl = 0s;
                return (hit_for_pass);
            }

            # marker for vcl_deliver to reset Age:
            set beresp.http.magicmarker = "1";

            # Don't cache cookies
            unset beresp.http.set-cookie;
            } else {
                # set default TTL value for static content
                set beresp.ttl = 4h;
            }
        return (deliver);
    }

    return (hit_for_pass);
}

sub vcl_deliver {
    # debug info
    if (resp.http.X-Cache-Debug) {
        if (obj.hits > 0) {
            set resp.http.X-Cache = "HIT";
            set resp.http.X-Cache-Hits = obj.hits;
        } else {
           set resp.http.X-Cache = "MISS";
        }
        set resp.http.X-Cache-Expires = resp.http.Expires;
    } else {
        # remove Varnish/proxy header
        remove resp.http.X-Varnish;
        remove resp.http.Via;
        remove resp.http.Age;
        remove resp.http.X-Purge-URL;
        remove resp.http.X-Purge-Host;
    }

    if (resp.http.magicmarker) {
        # Remove the magic marker
        unset resp.http.magicmarker;

        set resp.http.Cache-Control = "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";
        set resp.http.Pragma = "no-cache";
        set resp.http.Expires = "Mon, 31 Mar 2008 10:00:00 GMT";
        set resp.http.Age = "0";
    }
}

# sub vcl_error {
#     set obj.http.Content-Type = "text/html; charset=utf-8";
#     set obj.http.Retry-After = "5";
#     synthetic {"
# <?xml version="1.0" encoding="utf-8"?>
# <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
#  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
# <html>
#   <head>
#     <title>"} + obj.status + " " + obj.response + {"</title>
#   </head>
#   <body>
#     <h1>Error "} + obj.status + " " + obj.response + {"</h1>
#     <p>"} + obj.response + {"</p>
#     <h3>Guru Meditation:</h3>
#     <p>XID: "} + req.xid + {"</p>
#     <hr>
#     <p>Varnish cache server</p>
#   </body>
# </html>
# "};
#     return (deliver);
# }
# 
# sub vcl_init {
#   return (ok);
# }
# 
# sub vcl_fini {
#   return (ok);
# }

sub design_exception {
} 
```

**编辑，回答：**

我不知道添加 --no-cookies 是否修复了它（不知道 wget --mirror 是否存储 cookie，如果有，那么它会修复它）或者添加标题是否修复了它，但这有效并且创建我可以通过浏览器看到的清漆缓存：

```
wget --spider --recursive --no-cookies --header "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" --header "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3" --header "Accept-Language: en-US,en;q=0.8" --header "Cache-Control: max-age=0" --header "Connection: keep-alive" --header "Host: www.example.com" --header "User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/10.04 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19" www.example.com 
```

**第二次编辑，与先前的答案相关。重要的**

任何使用 Magento 的人，都不要使用我上面的解决方案。由于 --no-cookies，Magento 最终会在 var/session 文件夹下为每个请求创建一个新的会话文件。这导致每次运行上述命令的 wget 都会填充我的会话文件夹中的 250,000 个文件！这导致文件夹已满，因为 Magento 无法为他们创建更多会话文件，我的客户实际上都无法向他们的购物篮添加任何内容。我正在寻找更多解决问题的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:26:54.467

你应该看两点：

*   所有现代浏览器都会发送一些`Accept-Encoding ~ 'gzip'`标头，因此如果您的蜘蛛不使用此缓存条目，则不会使用缓存条目（一个不错的后端生成 gzip 压缩响应会添加一个 vary:`Accept-Encoding`标头）。
*   您的后端会为每个没有 cookie 的用户生成 cookie。您的脚本应保留其 cookie，但如果它们无关紧要，您的缓存规则应忽略 cookie。但是，如果您的响应包括购物车或其他东西（非常依赖于用户/状态/cookie），则您无法缓存此响应，并且每次都必须重新创建此响应。您可以使用 javascript/iframes 分解我们的可变部分，但您需要（重新）设计您的应用程序以使其可缓存。

# html - JSF Trinidad Image 标记替换损坏的图像

> ID：13195615
> 
> 赞同：0
> 
> 时间：2012-11-02T12:51:02.757
> 
> 标签：html, jsf, trinidad

我正在使用带有特立尼达标签的 JSF

我想知道如何在 html img 标签中捕获错误事件

```
<img src="someimage.png" onerror="imgError(this);"/> 
```

这是我的代码：

```
<tr:image source="/../myImage.png"> 
```

所以，我将能够用错误图像替换图像。

谢谢，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:17:55.513

在我看来，最好的解决方案是将`source`属性指向[servlet](https://stackoverflow.com/tags/servlets/info)或 bean 上的方法，并在那里执行一些逻辑。

# xcode - 用于缓慢移动视频的轮形滚动视图

> ID：13195617
> 
> 赞同：1
> 
> 时间：2012-11-02T12:51:11.493
> 
> 标签：xcode, uiscrollview, ios6, avplayer

谁能告诉我如何创建一个轮形滚动视图，以便像在 Coach Eye 应用程序和 uber Sense 应用程序中那样缓慢地逐帧移动视频……在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:10:39.160

创建 UIScrollView 像 UINavigationBar 大小。使用 AVAssetImageGenerator 插入 ScrollView 获取视频断言分割帧/秒，获取滚动视图当前内容播放器时间设置 avplayer 当前时间。

# c# - 如何手动设置 ListView 项目的总数

> ID：13195618
> 
> 赞同：0
> 
> 时间：2012-11-02T12:51:12.057
> 
> 标签：c#, asp.net, listview

我想在我的 asp.net 页面中实现分页功能。所以我为此制作了 ListView 和 DatePager。

```
<div class="pagination">
                    <div class="numeric">
                    <asp:DataPager ID="resultListPager" runat="server"
                       PagedControlID="resultList">
                       <Fields>
                          <asp:NextPreviousPagerField ButtonType="Link" ShowNextPageButton="False" PreviousPageText="< Prev" />
                          <asp:NumericPagerField ButtonType="Link" NumericButtonCssClass="numericLink" />
                          <asp:NextPreviousPagerField ButtonType="Link" ShowPreviousPageButton="false" ShowNextPageButton="False" ShowLastPageButton="True" />
                          <asp:NextPreviousPagerField ButtonType="Link" ShowPreviousPageButton="false" NextPageText="Next >" />
                       </Fields>
                    </asp:DataPager>
                    </div>
                </div>

                <asp:ListView ID="resultList" runat="server" ItemPlaceholderID="itemPlaceholder" OnPagePropertiesChanging="ChangePage">

                <LayoutTemplate>
                <ul class="items_list5">
                    <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
                </ul>
                </LayoutTemplate>

                <ItemTemplate>
                <li class="cat_item">
                <div class="item_image">
                                <a href="#"><img src="<%#Eval("Image")%>" alt="" /></a>
                            </div>
                            <div class="item_description">
                                <%#Eval("Name")%>
                            </div>
                </li>
                </ItemTemplate>

                <EmptyDataTemplate>
                <div>Sorry - no items found.</div>
                </EmptyDataTemplate>
                </asp:ListView> 
```

问题是，由于我只从数据库中获取前 10 个元素，因此分页只显示一页。

```
int totalCount;
List<GiftVoucher> vouchers = GiftVoucher.Search(querystring, pageNumber, count, out totalCount);
resultList.DataSource = vouchers;
resultList.DataBind(); 
```

例如，如果我的 totalCount 是 50，我想用 5 页进行分页...现在它只显示一页，因为我只从数据库中获取前 10 条记录？

那么，如何手动将 listview 的项目总数设置为我的 totalCount 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:05:35.593

切换到 ObjectDataSource 并设置 SelectMethod 和 SelectCountMethod。这样，列表不仅会获得当前页面，还会获得项目总数。

# javascript - 在其他操作强制之前，组过渡不会绘制到画布上

> ID：13195622
> 
> 赞同：1
> 
> 时间：2012-11-02T12:51:24.440
> 
> 标签：javascript, kineticjs, transition

我正在尝试过渡到一个组并且它做到了，但是只有当其他东西迫使舞台被绘制时，我才能看到过渡。过渡本身不会在进行时更新画布。组内有 4 个 Kinetic.Image 和 4 个 Kinetic.Text。知道如何让它工作吗？

假设#score group x: 1000

```
var points = self.stage.get('#scoreGroup')[0];
points.transitionTo({
    x: 800,
    duration: 5
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:56:18.197

恐怕需要更多代码才能真正说明可能缺少的内容，但我的猜测是您将元素添加到组中，该组已经在一个层中，并且已经在舞台上。您的 transitionTo 正在缓冲区中呈现，但由于元素从未在舞台上“绘制”，因此动画不会被翻译到可视舞台。也许如果您提供更多代码或创建一个 jsFiddle，我可以提供更多见解。

同时，在调用 transitionTo 之前确保你的 4 个图像和 4 个文本对象出现在舞台上（暂时注释掉过渡），然后再试一次。

```
var stage = new Kinetic.Stage({container : 'container', width : 800, height : 600});
var layer = new Kinetic.Layer();
var group = new Kinetic.Group({id : 'scoreGroup', x : 0, y : 0});
layer.add(group);
stage.add(layer);
// add images and text as usual
var imageObj = new Image();
imageObj.onload = function() {
    var image = new Kinetic.Image({x : 20, y : 20, width : 100, height : 100, image : imageObj});
    group.add(image);
};
imageObj.src = '[path_to_image]';
layer.draw();
group.transitionTo({x : 600, y : 400, duration : 3}); 
```

让我知道你想出了什么。

# android - ListView中有不同行时如何使用View Holder

> ID：13195624
> 
> 赞同：3
> 
> 时间：2012-11-02T12:51:35.393
> 
> 标签：android, listview

通常一个适配器会有这个来优化列表视图的性能：

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("getView " + position + " " + convertView);
            ViewHolder holder = null;
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.item1, null);
                holder = new ViewHolder();
                holder.textView = (TextView)convertView.findViewById(R.id.text);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder)convertView.getTag();
            }
            holder.textView.setText(mData.get(position));
            return convertView;
        } 
```

视图持有者是：

```
public static class ViewHolder {
    public TextView textView;
} 
```

但是如果我有不同类型的行，比如 1 带有 ImabeView，1 带有 CheckBox，1 带有 EditText

第一件事将是：

```
@Override
public int getViewTypeCount() {

    return 3;
}

@Override
public int getItemViewType(int position) {

         //if something
         return 0
         //if something else
         return 1
         //if something different
         return 2
} 
```

并在 getView();

```
getView(int position, View convertView, ViewGroup parent){

    //if convetView == null, getItemViewType(position) and depending on the type inflate respective layout
    convertView.setTag(holder);
   //else
    holder = (ViewHolder)convertView.getTag();
} 
```

但是 ViewHolders 呢，我应该有 3 个不同的 ViewHolders 并且取决于各自的 Holder 的类型........setTag？

我可以找到任何这样的例子。实际上我还没有看到使用超过 1 个 ViewHolder 的 ListView。

我做对了吗？

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T13:19:24.943

没有什么能阻止您从`ListView`一个`ViewHolder`类中的所有布局中声明所有可能的视图（因此`ViewHolder`将持有对 an 的引用`ImageView`，`CheckBox`并且`EditText`来自您的示例）。

在`getView`方法中，`convertView`您`null`将`ViewHolder`只为该类型的行设置视图，所有其他视图引用都`ViewHolder`将是`null`。当需要使用视图时，`ViewHolder`只需查看您使用哪种类型的行，并仅从`ViewHolder`属于该行的视图中获取视图。

您还可`ViewHolder`以为每种类型的行使用三个类（并在膨胀时为每个特定行设置它们），但我认为第一个版本更好。最后，只要您正确实施多行类型机制，您就可以采用任何一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T12:58:19.087

**-**我相信它**不是**3 `rows`，而是具有 3 个**不同组件的****Single** 。`row`

 ****-**您需要的是`holder class`具有**3 个不同组件**的单一组件。

**请参阅以下链接中的此示例：**

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:27:07.073

我第二个 Kumar Vivek Mitra。您需要有 1 行包含另一行下方的所有 3 个视图。但是，如果您想要不同的行，请尝试以下操作：

```
- create a custom row and put all the 3 views in it.
- set the visibility of all these views to GONE
- get the reference of all three views in ViewHolder.
- when setting the list, change the visibility of those views which you want to show to VISIBLE. 
```**

# php - PHP - 类忘记设置变量

> ID：13195626
> 
> 赞同：2
> 
> 时间：2012-11-02T12:51:57.310
> 
> 标签：php, class, scope, global

我尝试创建某种设置类，例如页面的全局值。

**PHP代码**

```
class globals
{
    public $page;

    public function __construct()
    {
    }

    public function set_page($value)
    {
        $this->page = $value; // Maybe from a database
    }
}

class get
{
    public function page()
    {
        $globals = new globals();
        return $globals->page;
    }
}

$globals = new globals();
$globals->set_page('My value');

echo get::page(); // Short function to be in a template 
```

**问题**

*   我的班级忘记了我设置的值。这是为什么？
*   我必须使用全局变量吗？
*   这是解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:53:37.430

变量设置在对象上，而不是类上。

对于每个类，您可以实例化多个对象。每个都有自己的变量范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:01:43.903

*编辑：*
我忘了为您的问题提供最简单、最不冗长的解决方案。AFAIK，您正在寻找一种方法来检查您所在的页面。常量将做到这一点：

```
defined('MY_CURRENT_PAGE') || define('MY_CURRENT_PAGE','My Value');
//use anywhere like so:
echo 'Currently on page: '.MY_CURRENT_PAGE; 
```

* * *

> 我的班级忘记了我设置的值。这是为什么？

很简单：您的`page`成员函数不是静态的，但您将其称为：`get::page()`. 即使您要解决此问题，您也会在`page`方法中创建一个新实例，但您并没有在任何地方保留引用，因此每次`page`调用都会创建一个`globals`没有设置的新实例。

> 我必须使用全局变量吗？

不，除非你*真的很*绝望，否则永远不要使用全局变量

> 这是解决问题的正确方法吗？

不，如果它不起作用，那是不正确的（恕我直言）。

好吧，你可能会问，是什么。有几种方法可以解决这个问题：

```
class globals
{
    public static $page = null;//make this static, meaning all instances will share this var

    public function set_page($value)
    {
        self::$page = $value; // Maybe from a database
    }
}

class get
{
    private $_globalsInstance = null;
    public function __construct(globals $instance = null)
    {
        $this->_globalsInstance = $instance;
    }

    private function _getGlobals()
    {
        if (!$this->_globalsInstance instanceof globals)
        {
            $this->_globalsInstance = new globals();
        }
        return $this->_globalsInstance;
    }

    public function page()
    {
        return $this->_getGlobals()::$page;
    }
} 
```

然而，就我个人而言，我不会这样工作，我只是将我的实例传递到我需要它们的任何地方（作为函数/方法的参数，或者只是在可访问的范围内实例化它们：

```
class globals
{
    public $page = null;//make this static, meaning all instances will share this var

    public function set_page($value)
    {
        $this->page = $value; // Maybe from a database
    }
}
$page = new globals();
$page->set_page('foobar');
someFunction($page);
$someObject->renderPage($page);
require_once('specificScript.php');
//inside required script:
echo $page->page; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:01:19.273

`$globals`那里

```
class get
{
    public function page()
    {
        $globals = new globals();
        return $globals->page;
    }
} 
```

那里

```
$globals = new globals();
$globals->set_page('My value'); 
```

是不同的`globals`类。

解决方案之一是使`$page`var 静态

```
public static $page; 
```

我希望这有帮助

**升级版：**

您也可以将 Singleton 应用于全局类并请求其实例，而不是直接创建新的：

```
globals::getInstance()->setPage('Page'); 
```

和

```
return globals::getInstance()->getPage(); 
```

在这种情况下`$page`，不必是静态的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T13:07:45.960

我不确定其他答案是否非常清楚。您已经创建了 2 个类。因此，它们具有不同的范围。正如所写的那样，您无法从 get 类访问原始变量 $page ，因为它超出了范围。您的 page 函数实际上创建了对象 $globals 的新版本，而没有设置 $page 。通常，您会将 set 和 get 函数都放在初始对象/类中。虽然可以通过从第二个类调用第一个类并设置页面来使用两个类。我不确定你为什么要这样做。

如果我正在写这门课，它会是这样的。

```
class globals
{
    public $page;

    public function __construct()
    {
    }

    public function set_page($value)
    {
        $this->page = $value; // Maybe from a database
    }

    public function get_page()
    {
        return $this->page;
    }
} 
```

实际上，我可能会将页面设置为私有而不是公开。作为公众，我猜你不需要 get 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T13:00:08.040

> 我必须使用全局变量吗？

不，如果您可以使用 PHP 5.3

> 这是解决问题的正确方法吗？

最好为此使用泛型类，或使用对象的静态属性

```
<?php

class globals
{
    public static $page;

    public function __construct()
    {
    }

    public function set_page($value)
    {
        self::$page = $value; // Maybe from a database
    }
}

class get
{
    public static function page()
    {
        return globals::$page;
    }
}

$globals = new globals();
$globals->set_page('My value');

echo get::page(); // Short function to be in a template 
```

PS但这不是一个好方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T12:56:56.420

要使用没有对象的类的方法，您必须使用**静态**定义。但无论如何，你为一个类对象赋值并尝试从另一个类对象中获取它......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T13:16:13.213

也许这会帮助你继续你的粗略：

```
 class globals
     {
        public static $page;

        public function set_page($value)
        {
           self::$page = $value; // Maybe from a database
        }
     }

    class get extends globals
   {
      public function page()
     {
        $globals = new globals();
        return parent::$page;
     }
   }

   $globals = new globals();
   $globals->set_page('My value');

   echo get::page(); 
```

?>

# c# - Application.Run()、Application.Exit() 和计时器

> ID：13195629
> 
> 赞同：1
> 
> 时间：2012-11-02T12:52:08.650
> 
> 标签：c#, timer, scheduled-tasks, message-loop

我有一个 winforms 应用程序，我将通过任务调度程序调用它来下载文件并将它们插入数据库。但是，文件何时可用是不可预测的，因此我使用 timer ( `System.Windws.Forms.Timer`) 来轮询文件。

```
 static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main(string[] args)
        {
            if (args != null && args.Length > 0)
            {

                Form1 f1 = new Form1();
                if (f1.IsLive)
                {
                    f1.OnLaunch(); // tests DB connection and reads and updates the expiry date list.

                    if (args[0] == "FullStats")
                        f1.FullStatsDataPump();
                    else if (args[0] == "OptionsStats")
                    {
                        f1.OptionsStatsTimer_Tick(null, null);
                        f1.OptionsStatsTimer.Start();
                    }
                    else if (args[0] == "OptionsTraded")
                    {
                        f1._optionsTradedTimer_Tick(null, null);
                        f1.OptionsTradedTimer.Start();
                    }
                    else
                    {
                        EmailManager.InvalidInputArgument(args[0]);
                        Application.Exit();
                    }

                    Application.Run();
                }

            } 
```

在上面的代码片段中，`OptionsTradedTimer`/`OptionsStatsTimer`都轮询文件，然后开始以 . 结尾的进程`Application.Exit()`。这运行得很完美，但之后它陷入了无限的消息循环。我认为这`Application.Run()`会在第一个计时器滴答后立即被调用，因此当`Application.Exit()`最终被调用时，它将结束消息循环。但是，如果我单步执行代码，然后`Application.Exit()`程序将返回到它起源的 timer.tick()，然后继续`Application.Run()`到底部。底部的`Application.Run()`是必要的，因为没有它，计时器只会滴答一次，然后应用程序将退出。

那么如何正确地告诉应用程序退出呢？或者我应该在哪里打电话`Application.Run()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:25:09.133

这听起来有点奇怪——也许你应该简单地将 Application.exit 移动到一个单独的过程中，如果你需要退出程序，只需更改一些布尔变量。在您的主程序中，您可以等待布尔值更改然后退出程序一次。此外，您可以在开始时将布尔变量设置为 false，这样您就不需要运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:26:33.967

我认为您不需要使用 Application.Exit()。您的 Main() 方法是应用程序的入口点；当它返回时，应用程序退出。一般来说，Application.Run() 用于启动一个一直运行到关闭的 Windows 窗体。试试这个代码 - 我没有测试过它，但它应该做你想要的。

```
using System.Linq;
using System.Threading;

class MyApplication
{
    [STAThread]
    static void Main(string[] args)
    {
        const string ARG_SHOWFORM = "ShowForm";
        const string ARG_STATS = "OptionsStats";
        const string ARG_TRADED = "OptionsTraded";

        if (args.Contains(ARG_SHOWFORM) || args.Length == 0) {
            Application.Run(new Form1());  //This will block until the form is closed.

            //Make sure all your supporting logic is placed into the Form.Loaded event on the form (i.e.
            //get it out of the Main() method).

            return;
        }

        if (args.Contains(ARG_STATS))
            OptionsStatsMethod();

        else if (args.Contains(ARG_TRADED))
            OptionsTradedMethod();

        else
            EmailManager.InvalidInputArgument(args[0]);

    }

    private void OptionsTradedMethod()
    {
        while (true) {
            if (downloadSuccessful) //Use a method here that returns a boolean if the download succeeded.
                break;
            else
                Thread.Sleep(DEFAULT_WAIT_TIME_MS);
        }
    }

    private void OptionsStatsMethod()
    {
        while (true) {
            if (downloadSuccessful)  //Use a method here that returns a boolean if the download succeeded.
                break;
            else
                Thread.Sleep(DEFAULT_WAIT_TIME_MS);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:17:18.253

不能删除问题所以还不如回答它。

仅当计时器`Application.Exit()`第一次运行时到达线路时才会出现问题。（即如果程序运行时文件已经可用）。在这种情况下，在第一次运行时定时器未达到（即文件尚不可用）`Application.Exit()`之前调用，然后被调用并且仅在稍后被调用。`Application.Run()``Application.Exit()``Application.Run()``Application.Exit()`

所以为了解决这个问题，我只是在计时器的刻度方法中添加了一个条件，以确保它们在第一次运行时不会发生任何事情。

我不同意将程序重组为它所代表的方式我可以通过任务调度程序运行它以每天下载文件而无需表单和轮询功能，我也可以通过 VS 将其作为带有按钮的普通 winforms 应用程序运行用于在出现问题时进行测试、调试和下载文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T13:48:30.363

为了保持你的主方法运行（保持它的线程活跃），你可以使用 Thread.Sleep 而不是 Application.Run()。尝试这个：

```
Thread.Sleep(System.Threading.Timeout.Infinite); 
```

而不是 Application.Exit() 使用：

```
Process.GetCurrentProcess().Kill(); 
```

这种方式可以工作，但请考虑为此使用 Windows 服务。

# jquery - 你能告诉我为什么 jquery settimeout 不适用于 ajax keyup 事件吗

> ID：13195636
> 
> 赞同：0
> 
> 时间：2012-11-02T12:52:35.003
> 
> 标签：jquery

我的 html 代码中关于 setTimeout 的问题我再次使用带有 jquery 的 ajax 和我的代码。我使用 primefaces jsf。为什么我将 jquery settimeout 与 ajax keyup 事件一起使用

这是我的 jquery 代码，它现在可以工作，但是当我添加 settimeout 时它不起作用。

```
$ = jQuery;

$(document).ready(function()  
{
    setTimeout(function()
    {
        refreshHook();
    },1000)

});

function refreshHook()
{
    $(".numberonly").keydown(function(event) 
    {  
        // Allow: backspace, delete, tab and escape
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode==190 || event.keyCode == 9 || event.keyCode == 27 || 

        // Allow: Ctrl+A
        (event.keyCode == 65 && event.ctrlKey === true) || 

        // Allow: home, end, left, right
        (event.keyCode >= 35 && event.keyCode <= 39)) {

        // let it happen, don't do anything
        return;
    }
    else 
    {
        // Ensure that it is a number and stop the keypress
        if (  event.shiftKey|| (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 ) ) 
        {
            event.preventDefault(); 
        } 
    }

   });
  } 
```

这是我的html代码。

```
<p:fieldset legend="Fieldset" style="background-color: lightsteelblue" >
    <h:panelGrid columns="5">
    <strong>LandAmoutn(Ha):</strong>
    <p:inputText id="spinner1" type="text" styleClass="numberonly"  value="#{carbonController.model.meyvebahcesidikimi}"  style="background-color: lightgrey" >
    <p:ajax event="keyup" process="@this" update="birdikim"  listener="#{carbonController.doMeyveBahcesiDikimHesabı}"/>

    </p:inputText>
    <p:row><strong>=</strong></p:row>
    <p:inputText id="birdikim" value="#{carbonController.model.meyvebahcesidikimsonuc}" readonly="true" style="background-color:lightgrey">
    <f:convertNumber integerOnly="true"/>
    </p:inputText>
    <p:row><strong>Mg C/Ha</strong></p:row>
    </h:panelGrid>
</p:fieldset> 
```

谁能告诉我我的错误在哪里。我花了很多时间。我想发送我的图像，但 stackoverflow 不允许发送:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:04:48.303

尝试这个

```
$(document).ready(function() {
    setTimeout(refreshHook, 1000);
}); 
```

这似乎正在工作[http://jsfiddle.net/cQjmx/5/](http://jsfiddle.net/cQjmx/5/)

**编辑**-不确定这是否是您所追求的，但由于没有其他人发布任何内容，请尝试一下[http://jsfiddle.net/cQjmx/37/](http://jsfiddle.net/cQjmx/37/)

# c# - 使用 Image 类在 c# 中丢失图像质量（减少颜色数量）

> ID：13195642
> 
> 赞同：4
> 
> 时间：2012-11-02T12:52:57.650
> 
> 标签：c#, image, save, bpp

我有一个 ac# 程序，它打开一个 .tif 图像，然后提供保存它的选项。但是，保存图像时质量总是会下降。

***（编辑：我在保存图像时传递了一些参数，以便质量为 100% 并且没有压缩，但实际唯一颜色的数量从 254 变为 16，即使图像属性显示 8bpp）***

***（EDIT2：有问题的图像是每像素 8 位的灰度图像 - 256 种颜色/灰色阴影 - 这不会发生在我测试的所有颜色都保留的每像素 24 位彩色图像中。我开始认为图像类可能只支持 16 种灰度）***

我该如何避免这种情况？

这是打开图像的代码：

```
public Image imageImport()
{
    Stream myStream = null;
    OpenFileDialog openTifDialog = new OpenFileDialog();
    openTifDialog.Title = "Open Desired Image";
    openTifDialog.InitialDirectory = @"c:\";
    openTifDialog.Filter = "Tiff only (*.tif)|*.tif";
    openTifDialog.FilterIndex = 1;
    openTifDialog.RestoreDirectory = true;
    if (openTifDialog.ShowDialog() == DialogResult.OK)
    {   
        try
        {
            if ((myStream = openTifDialog.OpenFile()) != null)
            {
                using (myStream)
                {
                    String tifFileName= openTifDialog.FileName;
                    imgLocation = tifFileName;
                    Bitmap tifFile = new Bitmap(tifFileName);
                    return tifFile;
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
        }
    }
    return null;
} 
```

这是我保存图像的方式：

```
private void saveImage(Image img)
{
    SaveFileDialog sf = new SaveFileDialog();
    sf.Title = "Select File Location";
    sf.Filter = " bmp (*.bmp)|*.bmp|jpeg (*.jpg)|*.jpg|tiff (*.tif)|*.tif";
    sf.FilterIndex = 4;
    sf.RestoreDirectory = true;
    sf.ShowDialog();

    // If the file name is not an empty string open it for saving.
    if (sf.FileName != "")
    {
        // Saves the Image via a FileStream created by the OpenFile method.
        System.IO.FileStream fs =
           (System.IO.FileStream)sf.OpenFile();

        // Saves the Image in the appropriate ImageFormat based upon the
        // File type selected in the dialog box.
        // NOTE that the FilterIndex property is one-based.
        switch (sf.FilterIndex)
        {
           case 1:
               img.Save(fs,
                   System.Drawing.Imaging.ImageFormat.Bmp);
           break;

           case 2:
               img.Save(fs,
                   System.Drawing.Imaging.ImageFormat.Jpeg);
           break;

           case 3://EDITED -STILL DOES NOT RESOLVE THE ISSUE
               ImageCodecInfo codecInfo = ImageClass.GetEncoderInfo(ImageFormat.Tiff);
               EncoderParameters parameters = new EncoderParameters(2);
               parameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality,100L);
               parameters.Param[1] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionNone);
               img.Save(fs,codecInfo, parameters);
           break;
       }
       fs.Close();
    }
} 
```

即使我不以任何方式调整图像大小或更改图像，我也会遇到质量损失。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:05:06.563

System.Drawing 对 8 位图像的支持很差。从 24 位或 32 位图像转换为 8 位时；它将始终使用固定的默认调色板。该默认调色板仅包含 16 种灰色阴影，其他条目是各种颜色。

保存为“.bmp”时是否有同样的问题？如果是，那么转换到 8 位格式之前已经发生了，您必须弄清楚您的程序在哪里执行此操作并在那里解决问题。如果只有 tiff 编码器转换为 8 位，则必须先在单独的步骤中进行 8 位转换。创建一个 8 位图像，`Image.Palette`用灰度调色板填充，然后将位图数据复制过来。

但是 System.Drawing 对 8 位图像的支持很差，在处理此类图像时，有几种方法（例如`SetPixel`）会抛出异常。`InvalidOperationException`您可能必须使用不安全的代码（with `LockBits`etc.）来复制位图数据。如果我是你，我会看看是否有可以使用的替代图形库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:10:58.550

我在使用 .NET 库来找到图像质量和大小的良好平衡时遇到了问题。我放弃了自己的滚动并尝试了一些成像库。我发现[http://imageresizing.net/](http://imageresizing.net/)能产生始终如一的好结果，比我能做的要好得多。

只是把它作为 B 计划扔出去，以防你自己的方法最终不能在一致的基础上为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:31:47.963

`Image.Save`默认情况下使用 75% 的质量设置。您可以尝试使用允许您指定质量设置参数的方法的其他重载之一。看到[这个问题。](https://stackoverflow.com/q/3957477/935052)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T18:56:16.397

真的只有一个建议....加载您使用的图像时`new Bitmap(fileName)`...您是否考虑过使用位图而不是位图

```
Image tiffImage = Image.FromFile(tiffFileName, true); 
```

true 告诉它使用“嵌入式颜色管理”，并且使用 Image 而不是 Bitmap 可以避免任何可能在幕后发生的图像投射。

# primefaces - Primefaces DynaForm 周边组件

> ID：13195644
> 
> 赞同：1
> 
> 时间：2012-11-02T12:53:11.990
> 
> 标签：primefaces

我有一个问题 - 也许你可以为我提供解决方案。

我需要创建如下结构：

```
<div class="header">
    <h:outputText value="#{model.header1}" />
    <h:outputText value="#{model.label1}" />
    <p:inputText value="#{model.value1}" />
    <h:outputText value="#{model.label2}" />
    <p:inputText value="#{model.value2}" />
</div>
<div class="header">
    <h:outputText value="#{model.header2}" />
    <h:outputText value="#{model.label3}" />
    <p:inputText value="#{model.value3}" />
    <h:outputText value="#{model.label3}" />
    <p:inputText value="#{model.value3}" />
</div>
... 
```

问题是这些标题 DIV 也是动态添加的，并且也包含动态组件（因此类似于 DynaForm 嵌套在 DynaForm 中）。

我正在考虑创建两个 DynaFormControls：headerstart with opening`<div>`和 headerend with`</div>`但这无效（关于未关闭标签的异常）。

我会很高兴听到任何帮助。

# linq - 使用 Linq.Dynamic 或 Expressions 创建一个新的匿名对象

> ID：13195646
> 
> 赞同：0
> 
> 时间：2012-11-02T12:53:15.137
> 
> 标签：linq, dynamic, casting, anonymous-types

我有以下代码：

```
public class C
{
  public string Field {get; set;}
  public string Data {get; set;}
}

var x = new C { Field = "F", Data = "Data 1" };
var y = new C { Field = "G", Data = "Data 2" }; 
```

我想把它转换成一个匿名对象，比如：

```
var x_a = new { F = "Data 1" };
var y_a = new { G = "Data 2" }; 
```

请注意，属性名称（F 或 G）是内容，因此可以动态更改。我目前正在为此使用 System.Linq.Dynamic 'Select' 方法：

```
public static object CastToAnonymous(this C source)
{
  var objects = new List<C>(new [] {source}).AsQueryable().Select("new (Data as " + source.Field + ")") as IEnumerable<object>;
  return objects.First();
} 
```

我想知道是否有更简单的方法来实现这一目标？

# c# - 检测外部程序是否创建文件/文件夹

> ID：13195647
> 
> 赞同：1
> 
> 时间：2012-11-02T12:53:18.460
> 
> 标签：c#, process, detection

我正在构建一个 Windows 窗体应用程序，它启动一个外部程序（通过 process.start 等）。有没有办法检测这个外部程序是否创建了任何文件/文件夹，如果是，在哪里？我已经查看了 process.StandardOutput，但这似乎不是它（除非我做错了......）

任何帮助，将不胜感激

# c# - 每 1000 个数字之间的 String.Format C# 间距

> ID：13195648
> 
> 赞同：1
> 
> 时间：2012-11-02T12:53:23.840
> 
> 标签：c#, asp.net, string-formatting

> **可能重复：**
> [在 C# 中使用自定义千位分隔符](https://stackoverflow.com/questions/752145/use-a-custom-thousand-separator-in-c-sharp)

我想要一个字符串格式来格式化我的数字，如下所示：

```
Input: 1000 Ouput: 1 000.00
Input: 10000 Output: 10 000.00 
Input: 100000 Output: 100 000.00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T12:58:31.737

完全按照您的要求工作，无需额外的格式化

```
String.Format("{0:# ###.00}", 40000);
output - "40 000.00"
String.Format("{0:# ###.00}", 400000);
output - "400 000.00"
String.Format("{0:# ###.00}", 4000);
output - "4 000.00" 
```

检查有关此的博客文章：[**格式化数字以显示**](http://pranayamr.blogspot.ca/2012/06/format-number-to-display.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:01:17.543

这将起作用

```
String.Format("{0:### ### ### ###.##}", 10000.00) 
```

**结果：**

```
"  10 000.00" 
```

您将需要修剪结果以删除多余的空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:07:57.350

你可以使用`NumberFormatInfo`类来做到这一点。查看示例代码。

```
NumberFormatInfo numberFormatInfo = (NumberFormatInfo)CultureInfo.InvariantCulture.NumberFormat.Clone();          
numberFormatInfo.NumberGroupSeparator = " ";

int a = 1000;

Console.WriteLine(a.ToString("n", numberFormatInfo)); // 1 000.00 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:15:38.420

来吧朋友：

```
var formatInfo = new NumberFormatInfo();
formatInfo.CurrencyGroupSeparator = " ";
formatInfo.CurrencySymbol = string.Empty;

Console.WriteLine(1000.ToString("C", formatInfo));
Console.WriteLine(10000.ToString("C", formatInfo));
Console.WriteLine(100000.ToString("C", formatInfo)); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T12:59:19.477

提供输入是您可以使用的整数。

```
input.ToString("F"); 
```

编辑：我的错，没有看到格式中的空格，以为它只是用于十进制值

另一种可能不是最好的快速方法是将其转换为货币字符串并删除前面的货币符号并将“，”替换为“。”

例如

```
input.ToString( "C" );
input.Replace( "," , "." );
input.Remove( 0, 1 ); //or the amount of characters in currency symbol if more than one 
```

# olap - 查询非 SQL 多维存储

> ID：13195652
> 
> 赞同：1
> 
> 时间：2012-11-02T12:53:46.663
> 
> 标签：olap, mondrian

我有一个包含多维数组的数据存储，我想向蒙德里安公开。就目前而言，Monrian 只能使用 SQL 数据库，这对吗？

我的数组很小，所以我可以轻松地将它们加载到内存中——也许我可以在我的方言实现中以某种方式用它们填充蒙德里安缓存？这样，蒙德里安就不必发出任何 SQL 查询，因为所有数据都将被加载到缓存中。

这是可行的吗？可以使用现有的 API，还是我必须更改一些核心 Mondrian 类来实现它？

# php - 从 xml 中删除 metaData 节点

> ID：13195653
> 
> 赞同：0
> 
> 时间：2012-11-02T12:54:03.433
> 
> 标签：php, xml, xml-parsing

这是我正在工作的 xml 输出

```
 <adamContent projectTypeID="10" genContentID="000002">
        <metaData>
            <keywordList>
                      <keyword>
                            <word>#27</word>
                            <relevancy>120</relevancy>
                      </keyword>
                      <keyword>
                            <word>#43</word>
                            <relevancy>114</relevancy>
                      </keyword>
             </keywordList>
            <taxonomy type="CPT">
               <code>99374</code>
            </taxonomy>
        </metaData>
         <textContent title="Description" ordinal="0" group="0">
             <p>An in-depth report on the causes, diagnosis, and treatment of Alzheimer's disease.</p>
        </textContent>
</adamContent> 
```

我需要这样的输出（**我想删除整个元数据节点**）

```
<adamContent projectTypeID="10" genContentID="000002">
         <textContent title="Description" ordinal="0" group="0">
             <p>An in-depth report on the causes, diagnosis, and treatment of Alzheimer's disease.</p>
        </textContent>
</adamContent> 
```

这是我到目前为止尝试的 php 代码

```
<?php
$xmldoc = new DOMDocument();
$atvID =   $xmldoc->load('000002.xml', LIBXML_NOBLANKS);
foreach($atvID as $id){
    $delnode = $xmldoc->getElementsByTagName('metaData');
    $xmldoc->firstChild->removeChild($delnode->item($id));
}
$xmldoc->save('000002.xml');
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:06:47.660

```
$xmldoc = new DOMDocument();
$xmldoc->load('000002.xml');
$metadatas = $xmldoc->getElementsByTagName('metaData');
foreach ($metadatas as $metadata) {
    $metadata->parentNode->removeChild($metadata);
}
$xmldoc->save('000002.xml'); 
```

# android - Android TextVIew 在按钮保持按下状态时滚动

> ID：13195654
> 
> 赞同：1
> 
> 时间：2012-11-02T12:54:04.597
> 
> 标签：android

我想滚动一段`textview`时间`button`处于按下状态。一旦用户释放`button`，我想停止滚动。我`setOnTouchListener`在按钮上使用。但我无法做到这一点。谁能帮助我并分享一些代码来做到这一点。

```
arrow_up.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    lastDown = System.currentTimeMillis();
                    System.out.println(System.currentTimeMillis());
                flag = true;
                method();
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    System.out.println(System.currentTimeMillis() - lastDown);
                    flag = false;
                    method();
                }
                return false;
            }
        });

public void method() {
        while(flag == true){

            try {
                Thread.sleep(500);
                System.out.println("Flag === " + flag);
                tv.scrollBy(0, -20);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:58:32.313

您可以通过为按钮创建 OnFocusChangeListener 来实现。

```
mButton.setOnFocusChangeListener(new View.OnFocusChangeListener() 
        { 
            @Override 
            public void onFocusChange(View v, boolean hasFocus) 
            { 
                if (hasFocus) 
                { 
                    //code
                }
                else
                {
                    //code
                }
            } 
        }); 
```

# bash - Bash set +x 不打印

> ID：13195655
> 
> 赞同：112
> 
> 时间：2012-11-02T12:54:12.877
> 
> 标签：bash, shell

有谁知道我们是否可以`set +x`在不打印的情况下用 bash 说：

```
set -x
command
set +x 
```

痕迹

```
+ command
+ set +x 
```

但它应该只打印

```
+ command 
```

Bash 是版本 4.1.10(4)。这让我困扰了一段时间 - 输出中充满了无用`set +x`的行，使得跟踪工具没有它应该的那么有用。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-10-07T13:21:30.140

我有同样的问题，我能够找到一个不使用子shell的解决方案：

```
set -x
command
{ set +x; } 2>/dev/null 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-11-02T12:56:29.510

您可以使用子shell。退出子shell后，设置`x`将丢失：

```
( set -x ; command ) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-01T18:32:39.717

最近，当我对此感到恼火时，我破解了一个解决方案：

```
shopt -s expand_aliases
_xtrace() {
    case $1 in
        on) set -x ;;
        off) set +x ;;
    esac
}
alias xtrace='{ _xtrace $(cat); } 2>/dev/null <<<' 
```

这允许您启用和禁用 xtrace，如下所示，我正在记录如何将参数分配给变量：

```
xtrace on
ARG1=$1
ARG2=$2
xtrace off 
```

你会得到如下所示的输出：

```
$ ./script.sh one two
+ ARG1=one
+ ARG2=two 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-07-26T23:11:00.843

基于@user108471的简化版本的解决方案怎么样：

```
shopt -s expand_aliases
alias trace_on='set -x'
alias trace_off='{ set +x; } 2>/dev/null'

trace_on
...stuff...
trace_off 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-18T20:24:31.860

这是一些想法的组合，可以包含代码块并保留退出状态。

```
#!/bin/bash
shopt -s expand_aliases
alias trace_on='set -x'
alias trace_off='{ PREV_STATUS=$? ; set +x; } 2>/dev/null; (exit $PREV_STATUS)'

trace_on
echo hello
trace_off
echo "status: $?"

trace_on
(exit 56)
trace_off
echo "status: $?" 
```

执行时：

```
$ ./test.sh 
+ echo hello
hello
status: 0
+ exit 56
status: 56 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-23T18:05:08.127

这是另一个。通常您只想跟踪脚本中的特定命令。那为什么不写一个函数呢？

```
> call() { set -x; "$@"; { set +x; } 2>/dev/null; }
> call uname -a
+ uname -a
CYGWIN_NT-6.1-WOW W530 3.1.7(0.340/5/3) 2020-08-22 19:03 i686 Cygwin
> call make -j8 *.mak
+ make -j8 some_name.mak 
```

我们可以通过返回（并跟踪）被调用命令的退出代码来进一步改进这一点：

```
> call() { local rc; set -x; "$@"; rc=$?; { set +x; } 2>/dev/null; return $rc; }
> call true && echo yes
+ true
+ rc=0
yes
> call false && echo yes
+ false
+ rc=1 
```

这是一个真实的例子，它调用 Rhapsody CLI 程序从带有命令行选项的 .rcl 文件生成源代码：

```
die() {
    local c=${1:--1} m=${2:-'Died'}
    echo "$m at ${BASH_SOURCE[1]}:${FUNCNAME[1]} line ${BASH_LINENO[0]} (exit $c)" >&2
    exit $c
}
call() { local rc; set -x; "$@"; rc=$?; { set +x; } 2>/dev/null; return $rc; }

call "$opt_rhapsodycl" -f $rclfile || die $? 'Rhapsody license server not reachable' 
```

例如，在失败的情况下打印类似：

```
 + path/to/RhapsodyCL.exe -f configuration.rcl
 + rc=127
 Rhapsody license server not reachable at ./Build:main line 167 (exit 127) 
```

或者在成功的情况下脚本继续。使用这两个函数 (`call`和`die`)，我们可以编写非常紧凑且可读的单行代码，同时也可以产生很好的跟踪输出。

# javascript - jqGrid treegrid 在提供 xml 数据时忽略展开状态

> ID：13195656
> 
> 赞同：1
> 
> 时间：2012-11-02T12:54:15.387
> 
> 标签：javascript, jqgrid, treegrid

我有这个问题，jqGrid中的treegrid在通过xml传递数据时忽略了最后一个选项（扩展节点或不扩展节点）。有人遇到过这个吗？有解决办法吗？也许是我的数据？这是产生问题的示例数据：

```
<rows>
    <page>1</page>
    <total>0</total>
    <records>4</records>
    <row id='2'>
            <cell>2</cell>
            <cell>Parent</cell>
            <cell>0</cell>
            <cell>NULL</cell>
            <cell>false</cell>
            <cell>true</cell>
          </row>
    <row id='1'>
            <cell>1</cell>
            <cell>Child 1</cell>
            <cell>1</cell>
            <cell>2</cell>
            <cell>true</cell>
            <cell>false</cell>
          </row>
    <row id='3'>
            <cell>3</cell>
            <cell>Child 2</cell>
            <cell>1</cell>
            <cell>2</cell>
            <cell>true</cell>
            <cell>false</cell>
          </row>
    <row id='4'>
            <cell>4</cell>
            <cell>Child 3</cell>
            <cell>1</cell>
            <cell>2</cell>
            <cell>true</cell>
            <cell>false</cell>
          </row>
</rows> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:50:23.960

在我看来，它更像是 TreeGrid 中的一个错误。**不过，您可以通过向需要扩展的节点****添加`loaded: true`**属性来轻松解决问题。[代码行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.treegrid.js#L68)和上面的一些行（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.treegrid.js#L53-59)）中的原因，其中`loaded`属性（和`ldat[loaded]`）将是`undefined`，因此对于所有未定义的项目，`ldat[expanded]`将更改为。`undefined``loaded`

[演示](http://www.ok-soft-gmbh.com/jqGrid/LocalAdjacencyTreeXml1_.htm)演示了解决方案。它使用您发布的 XML，但在项目`<cell>true</cell>`定义的末尾添加了额外的内容`"Parent"`：

```
...
<row id='2'>
    <cell>2</cell>
    <cell>Parent</cell>
    <cell>0</cell>
    <cell>NULL</cell>
    <cell>false</cell>
    <cell>true</cell>
    <cell>true</cell> <!-- added the element for loaded: true -->
</row>
... 
```

**更新**：我认为修复错误（最初在[此处](http://www.trirand.com/blog/?page_id=393/treegrid/jqgrid-4-adjacency-model-expanded_field-problem/#p23012)描述）的最简单方法是更改​​代码[行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.treegrid.js#L68)`setTreeNode`

```
ldat[expanded] = ((ldat[expanded] == "true" || ldat[expanded] === true) ? true : false) &&
    ldat[loaded]; 
```

到以下

```
ldat[expanded] = ((ldat[expanded] == "true" || ldat[expanded] === true) ? true : false) &&
    (ldat[loaded] || ldat[loaded] === undefined); 
```

请参阅使用固定代码[的相应演示。](http://www.ok-soft-gmbh.com/jqGrid/LocalAdjacencyTreeXml1__.htm)

# android - 布局和应用标题之间的填充不同

> ID：13195658
> 
> 赞同：1
> 
> 时间：2012-11-02T12:54:31.817
> 
> 标签：android, layout, padding, title

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:orientation="vertical"
android:padding="6dp"
android:weightSum="1.0" >

<Button
    android:id="@+id/btnCreateNewMonth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center"
    android:layout_weight="0.5"
    android:onClick="btnCreateNewMonth_clickHandler"
    android:paddingBottom="5dp"
    android:text="@string/btn_create_new_month" />

<Button
    android:id="@+id/btnLoadExistingMonth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical|center"
    android:layout_weight="0.5"
    android:onClick="btnLoadExistingMonth_clickHandler"
    android:text="@string/btn_load_existing_month" />

   </LinearLayout> 
```

所有边的填充应为 6dp。但是在顶部，在应用标题和布局之间有一个较小的填充？！那有什么解决办法？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:45:52.550

问题不在于填充，

如果深入了解布局，您会发现按钮占用区域和布局区域的差异。

1.  Button 的背景源没有完全占据右、左、下角的空间。

2.  但是 Button 的 Background 源已经被覆盖并完全占据在顶部。

3.  请注意，Button 的背景源是具有透明背景的 9 个补丁图像。

4.  在这种情况下，例如如果按钮的背景源未占用的间隙为2dp，则表示，

    Right , Left, Bottom 会有一个额外的 2dp 空间。但不在顶部。

    因此，使用 6dp 的填充，您将获得 2dp 的额外背景可见性，用于右、左、下角的两个按钮。

因此，如果您的填充值是 6dp ，那么您的布局背景可见性将在右、左、下角为 8dp，在顶部为 6dp。

这是实际的问题。

1.  如果更改按钮的背景颜色，您可以看到所有 4 个角的填充值均匀。

2.  如果您要为按钮创建图像背景，那么它应该同样被创建，这与 android 默认按钮背景不同。

所以解决方案是，您可以为按钮创建渐变背景，也可以为按钮创建新的图像文件。

希望你能得到它，它将对你有用。

# javascript - JQuery循环根据它的类和php数组改变div背景

> ID：13195660
> 
> 赞同：1
> 
> 时间：2012-11-02T12:54:38.197
> 
> 标签：javascript, jquery, html, background-color

我有 2 个数组，1 个具有十六进制索引和颜色（不带 #），另一个具有相应的索引和练习类型。

我想要实现的是生成一个时间表，该时间表向包含指定锻炼类型的 div 添加一个类“ExerciseType”+ 来自数组的锻炼索引。就像这样，例如“ExerciseType0”或“ExerciseType1”（完成并工作）。然后我尝试使用 jQuery 将背景颜色更改为具有与索引对应的类的 div。

为此，我尝试编写一个函数 $ColorIndex - 索引数组作为键和十六进制颜色作为值的 .ExerciseType0 等之前没有样式。

```
<script type=\"text/javascript\" src=\"jquery-1.8.2.js\"></script>
<script type=\"text/javascript\">
    $(document).ready(function(){
        var ColorIndexJS = <?php echo json_encode($ColorIndex) ?>;
        var ColorIndexLength = ColorIndexJS.length;
        var counter = 0;
        while(counter<ColorIndexLength){
            $('.ExerciseType' + counter.toString()).css("background-color", "#"+ColorIndexJS[counter]);
            counter++;
        }
    });
</script> 
```

我在 firebug 中从这段代码得到的结果是

```
$(document).ready(function(){
var ColorIndexJS = ["FF4040","EEC591","FF7F24"];
var ColorIndexLength = ColorIndexJS.length;
document.write("ExerciseType");
var counter = 0;
while(counter<ColorIndexLength){
$('.ExerciseType' + counter.toString()).css("background-color", "#"+ColorIndexJS[counter]);
counter++;
}
}); 
```

如此处所示 php_array 已成功转换，但函数本身只是不想工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:58:09.257

为什么不让 php 写出 CSS 类并且涉及的 JavaScript 为零？

```
<style>
    .ExerciseType0{background-color:#FF4040;}
    .ExerciseType1{background-color:#EEC591;}
    .ExerciseType2{background-color:#FF7F24;}
</style> 
```

您的代码失败的原因是 document.write，它替换了页面内容，因为它发生在加载文档之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:00:43.107

你的 js 代码是正确的，因为`document.write`它似乎覆盖了你的代码。

尝试取消注释`document.write`at [DEMO](http://jsfiddle.net/USQ49/)，您就会明白我的意思。

# android - 启动两个 AsyncTask 进行并行计算，并在它们完成后继续

> ID：13195666
> 
> 赞同：2
> 
> 时间：2012-11-02T12:54:52.610
> 
> 标签：android, multithreading, android-asynctask

我必须编辑巨大的位图文件，所以我想使用我设备的所有内核来加速这个过程。我认为这将是一个很好的解决方案：

*   计算可用核心数
*   将图像拆分为 [numberofcores] 个部分
*   为每个核心创建一个新线程并让该线程处理图像的一部分

在继续执行其他任务（例如保存图片或返回位图已完全处理的消息）之前，如何确保所有线程都已完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:57:26.670

启动所有工作线程后[加入每个工作线程。](http://developer.android.com/reference/java/lang/Thread.html#join%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:16:06.020

我认为您应该制作另一个`AsyncTask`等待所有其他线程完成的线程，因此在`doInBackground()`等待的方法中您`AsyncTask`可以执行以下操作：

```
while( task1.getStatus()!=AsyncTask.Status.FINISHED
         || task1.getStatus()!= AsyncTask.Status.FINISHED){
    Thread.sleep(500);
} 
```

然后在`onPostExecute()`您的“等待任务”的方法中，您可以继续执行其他任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:32:06.517

使用一个数组扩展一个`Handler.Callback`类，该数组跟踪处理特定图像的线程（可能也需要扩展`Thread`，以便您可以指定`Bitmap`特定线程正在处理的部分），每个线程处理的结束`sendMessage`到`Handler`您创建的对象与您的扩展类实例。

在扩展类中重写`handleMessage`，以接收特定线程的结果，从处理特定线程的数组存储结果中删除线程。当处理数组大小为0时，将结果放在一起。

# java - 在 Ubuntu（Java 应用程序）下监控对 Firebird 的 SQL 调用

> ID：13195672
> 
> 赞同：5
> 
> 时间：2012-11-02T12:55:21.990
> 
> 标签：java, sql, ubuntu, firebird, monitor

刚刚将平台从 mySQL 迁移到 firebird 后，我发现很难找到一种可接受的方法来捕获从 Java .jar 应用程序传递到数据库服务器 (Firebird) 的 SQL 命令。我需要分析命令以及在执行时间等方面传递的查询的“成本”。

使用 MySQL 可以使用[maatkit 工具包](http://www.maatkit.org/)，但不幸的是，这似乎不适用于 Firebird。

有没有人对火鸟的 maatkit 有适当且可比较的方法？还是使用 strace 或类似的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:56:30.813

您可以使用 Firebird 跟踪工具及其 API 来生成此信息。有关详细信息，请参阅Firebird 2.5 发行说明中的[​​跟踪和审计服务](http://www.firebirdsql.org/rlsnotesh/rlsnotes25.html#rnfb25-trace)以及 Firebird 2.5 中的[审计和跟踪服务](http://www.ibphoenix.com/resources/documents/general/doc_3)。

您可以配置写入日志文件的服务器端跟踪会话，或使用服务 API 执行用户跟踪会话（取决于您的权限，您只会看到自己的查询或所有内容）。

firebird 安装包括一个用于访问用户跟踪 API (fbtracemgr.exe) 的命令行工具。Jaybird 2.2 包含对用户跟踪 API 的基本访问，但老实说，它还不是真正的用户友好（而且有点脆弱）。有几个（商业）第三方工具可以以更加用户友好的方式访问 Trace API：

*   [FB 跟踪管理器](http://upscene.com/products.misc.fbtm.php)
*   [IB专家](http://www.ibexpert.net/ibe/)

# c#-4.0 - 如果列在整个列中包含 (All) 成员，则在使用 ADOMD 适配器检索数据后将其删除

> ID：13195679
> 
> 赞同：1
> 
> 时间：2012-11-02T12:56:23.950
> 
> 标签：c#-4.0, mdx, adomd.net

我正在使用以下 C# 代码片段使用 MDX 查询和 ADOMD 适配器从多维数据集检索数据：

```
public DataTable GetDataTable(string query, string connectionString)
{
    DataTable data = new DataTable();
    using (AdomdConnection cubeConnection = new AdomdConnection(connectionString))
    {
        cubeConnection.Open();
        try
        {
            using (AdomdDataAdapter adapter = new AdomdDataAdapter(query, cubeConnection))
            {
                adapter.Fill(data);
            }
        }
        catch (Exception)
        {
            throw new Exception("An error occurred while retrieving the data");
        }
    }
    return data;
} 
```

我编写的查询在 SSMS 中返回以下结果：

![在此处输入图像描述](../Images/4af17702350f0ab32405af748ad1b17d.png)

使用上述代码检索数据后，将删除整个列，如下所示（截取自 Visual Studio 中的数据表可视化工具的屏幕截图）：

![在此处输入图像描述](../Images/ee140b4e12ec9b0745c622a8332844ad.png)

如上所示，正在删除第二列。任何人都有将列放入数据表的解决方案？

附加信息：

AdomdClient Dll 名称：Microsoft.AnalysisServices.AdomdClient

AdomdClient Dll 版本：11.0.0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:24:42.197

这是设计使然，尽管有些违反直觉。返回的维度列数将基于返回的级别减一。

由于您只返回一个级别（即全部），ADOMD 将显示零列。如果您返回二维级别（即全部 + 名称），那么您将在结果中看到名称列。

# css - 兼容 IE7 的 CSS 框架

> ID：13195682
> 
> 赞同：0
> 
> 时间：2012-11-02T12:56:46.093
> 
> 标签：css, internet-explorer-7, css-frameworks

有没有完全支持 IE7 的 css 框架？类似 Twitter Bootstrap 的东西，但是当我在 IE7 中使用它时，我没有圆角，并且选项卡被破坏了。Popover 插件失败，所以 IE 显示“这个脚本执行时间过长，你会停止它吗？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:47:22.313

[Inuit.css](http://inuitcss.com/)支持 IE7（甚至还有一个提供 IE6 支持的选项，尽管我希望没有人会使用它）。

而且 inuit.css 恰好是目前最好的框架。

# eclipse - IContributionItem 列表中的菜单对象

> ID：13195684
> 
> 赞同：0
> 
> 时间：2012-11-02T12:56:54.393
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我需要`org.eclipse.swt.widgets.Menu`从`org.eclipse.jface.action.ContributionItem`. 我遵循了以下方式，但它返回了空值。

```
MenuManager m = new MenuManager();
m.add(contributionitem1);
m.add(contributionitem2);
....
....
m.add(contributionitem9); 
```

我打过电话

```
m.getMenu(); 
```

这使我返回null。任何指针都会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:36:45.157

它返回 null 因为正在创建菜单。您需要先创建它，从 MenuManager 看一下这个方法，您需要传入一个 SWT 控件才能真正创建菜单。

```
 public Menu createMenuBar(Decorations parent) {
    if (!menuExist()) {
        menu = new Menu(parent, SWT.BAR);
        menu.setData(MANAGER_KEY, this);
        update(false);
    }
    return menu;
} 
```

# c# - 通过 c#.net 代码打印 pdf 时出现线程问题？

> ID：13195692
> 
> 赞同：0
> 
> 时间：2012-11-02T12:57:42.033
> 
> 标签：c#, itextsharp, printdocument

我正在尝试使用`iTextSharp`dll 从我的项目中的 Windows 应用程序打印 pdf ..

但是，到目前为止我使用的方法似乎并不可靠。**（有时有效，有时无效）**

我将整个过程组合在一个 Process 类中并编写以下代码。

```
 printProcess = new Process[noOfCopies];
 // Print number of copies specified in configuration file
                            for (int counter = 0; counter < noOfCopies; counter++)
                            {
                                printProcess[counter] = new Process();

                                // Set the process information
                                printProcess[counter].StartInfo = new ProcessStartInfo()
                                {
                                    CreateNoWindow = true,
                                    Verb = "Print",
                                    FileName = pdfFilePath,
                                    ErrorDialog = false,
                                    WindowStyle = ProcessWindowStyle.Hidden,
                                    UseShellExecute = true,
                                };

    // Start the printing process and wait for exit for 7 seconds
                                    printProcess[counter].Start();

                                    // printProcess[counter].WaitForInputIdle(waitTimeForPrintOut);
                                    printProcess[counter].WaitForExit(waitTimeForPrintOut); //<--**This is line for discussion**

                                    if (!printProcess[counter].HasExited)
                                    {
                                        printProcess[counter].Kill();
                                    }
                                }
   // Delete the file before showing any message for security reason
                        File.Delete(pdfFilePath); 
```

问题是，如果没有打开 pdf，则该过程可以正常工作...（打印效果很好）。但是如果打开`WaitForExit(..)`了任何 pdf，则方法不会等待该过程退出..因此该过程也运行快速并且当我在打印后删除文件时，如果打印报告的计数器（次数..）不止一次，它会给出错误..

我也曾经`Timer`放慢这个过程，但它不起作用。我不知道为什么。也使用了睡眠命令..但它使主线程进入睡眠状态，因此也不适合我。

请建议我一些非常可靠的方法来做到这一点..:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:28:09.923

我不知道您尝试从哪种应用程序打印，但打印文档或 pdf 的一种真正简单的方法是将文件复制到打印机队列，它会为您处理一切。非常可靠。只需在机器上安装 adobe reader 和正确的打印机驱动程序即可。示例代码：

```
 var printer = PrinterHelper.GetAllPrinters().FirstOrDefault(p => p.Default);
        PrinterHelper.SendFileToPrinter("C:\\Users\\Public\\Documents\\Form - Career Advancement Request.pdf", printer.Name); 
```

打印机助手代码：

```
 public static class PrinterHelper
    {
        public class PrinterSettings
        {
            public string Name { get; set; }
            public string ServerName { get; set; }
            public string DeviceId { get; set; }
            public string ShareName { get; set; }
            public string Comment { get; set; }
            public bool Default { get; set; }
        }

    /// <summary>
    /// Sends the file to printer.
    /// </summary>
    /// <param name="filePathAndName">Name of the file path and Name of File.</param>
    /// <param name="printerName">Name of the printer with Path. E.I. \\PRINT2.company.net\P14401</param>
        public static void SendFileToPrinter(string filePathAndName, string printerName)
        {
            FileInfo file = new FileInfo(filePathAndName);
            file.CopyTo(printerName);
        }

        /// <summary>
        /// Gets all printers that have drivers installed on the calling machine.
        /// </summary>
        /// <returns></returns>
        public static List<PrinterSettings> GetAllPrinters()
        {
            ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_Printer");
            ManagementObjectSearcher mos = new ManagementObjectSearcher(query);
            List<PrinterSettings> printers = new List<PrinterSettings>();

            foreach (ManagementObject mo in mos.Get())
            {
                PrinterSettings printer = new PrinterSettings();
                foreach (PropertyData property in mo.Properties)
                {
                    if (property.Name == "Name")
                        printer.Name = property.Value == null ? "" : property.Value.ToString();

                    if (property.Name == "ServerName")
                        printer.ServerName = property.Value == null ? "" : property.Value.ToString();

                    if (property.Name == "DeviceId")
                        printer.DeviceId = property.Value == null ? "" : property.Value.ToString();

                    if (property.Name == "ShareName")
                        printer.ShareName = property.Value == null ? "" : property.Value.ToString();

                    if (property.Name == "Comment")
                        printer.Comment = property.Value == null ? "" : property.Value.ToString();

                    if (property.Name == "Default")
                        printer.Default = (bool)property.Value;
                }
                printers.Add(printer);
            }

            return printers;
        }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:13:54.723

试试这个，你需要 .net 4 或更高版本。和 System.Threading.Tasks

```
 printProcess = new Process[noOfCopies];
  // Print number of copies specified in configuration file
  Parallel.For(0, noOfCopies, i =>
  {
    printProcess[i] = new Process();

    // Set the process information
    printProcess[i].StartInfo = new ProcessStartInfo()
    {
      CreateNoWindow = true,
      Verb = "Print",
      FileName = pdfFilePath,
      ErrorDialog = false,
      WindowStyle = ProcessWindowStyle.Hidden,
      UseShellExecute = true,
    };

    // Start the printing process and wait for exit for 7 seconds
    printProcess[i].Start();

    // printProcess[counter].WaitForInputIdle(waitTimeForPrintOut);
    printProcess[counter].WaitForExit(waitTimeForPrintOut); //<--**This is line for discussion**

    if(!printProcess[i].HasExited)
    {
      printProcess[i].Kill();
    }
  });
  // Delete the file before showing any message for security reason
  File.Delete(pdfFilePath); 
```

# android - 更改 Jelly Bean 上的布局边距时出现意外动画

> ID：13195694
> 
> 赞同：0
> 
> 时间：2012-11-02T12:57:43.563
> 
> 标签：android, android-layout, animation, android-4.2-jelly-bean

自从我升级到 Jelly Bean 4.1.1 后，每当以编程方式更改任何 RelativeLayout 的边距时，都会出现意外的滑动动画。例如，如果我将边距从 (10, 10, 200, 200) 更改为 (20, 20, 220, 220)，就会发生这种情况，这意味着由于边距，布局实际上会改变位置。

我用于开发的型号是三星 Galaxy SIII。

这是谷歌在这个版本上实施的新东西吗？还是三星的特定产品？我在 API 上找不到任何关于此的参考。

任何人都知道如何覆盖这个我实际上根本没有设置的滑动动画？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:28:50.410

从 3.0 开始，有一个 LayoutTransition 属性 android:animateLayoutChanges，您可以在视图上设置它。请参阅此处[动画布局更改](http://developer.android.com/training/animation/layout.html)

奇怪的是它会在你没有设置的情况下自动完成。如果没有明确设置，这可能是 S3 的默认行为。

尝试`android:animateLayoutChanges="false"`在活动的 xml 布局中的父视图中设置？

# sql - ADODB/Excel query error

> ID：13195696
> 
> 赞同：1
> 
> 时间：2012-11-02T12:57:57.480
> 
> 标签：sql, excel, adodb

When I try to use ADODB to connect on an Excel DB, it says:

```
you try to execute a query without a specified expression <Destinataire> 
```

Here's my code:

```
MyQuery = "Select Destinataire, SUM(" & Entete & ") AS NombreTotal FROM [Feuil1$] " _
                         & "WHERE [DateMad] Between #" _
                         & Format(date_deb, "yyyy/mm/dd") _
                         & "# And #" & Format(date_fin, "yyyy/mm/dd") & "#" & Query3 & ""

                    objRecordSet.Open MyQuery, objConnection, adOpenStatic, adLockOptimistic 
```

What's wrong with it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:06:17.960

You forgot the `group by`

The query should look like this

```
Select Destinataire, SUM(NbCompteurElec) AS NombreTotal FROM [Feuil1$] 
WHERE [DateMad] Between #2012/10/22# And #2012/10/26# And [Destinataire] = 'REL12'
Group By Destinataire 
```

In your code it should be like this

```
MyQuery = "Select Destinataire, SUM(" & Entete & ") AS NombreTotal FROM [Feuil1$] " _
                         & "WHERE [DateMad] Between #" _
                         & Format(date_deb, "yyyy/mm/dd") _
                         & "# And #" & Format(date_fin, "yyyy/mm/dd") & "#" & Query3 & " Group By Destinataire" 
```

[Here's](http://www.w3schools.com/sql/sql_groupby.asp) a tuto about the GROUP BY clause

# python - 如何为使用 scons 函数和变量的 scons 制作 python 脚本

> ID：13195697
> 
> 赞同：0
> 
> 时间：2012-11-02T12:58:00.837
> 
> 标签：python, scons

我想制作我将在所有 sconscripts 中使用的“通用”脚本 这个脚本必须使用一些 scons 函数，如 Object() 或 SharedObject() 是否有任何我可以导入的 scons 文件或者可能是另一个有用的 hack。我是 python 和 scons 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:43:15.560

我已经完全按照你的解释做了。如果您的 SConstruct 和/或 SConscript 脚本只是导入您的通用 Python 代码，那么您无需做任何特别的事情，除了在您的 Python 代码中导入适当的 SCons 模块。

另一方面，如果您有一个 Python 脚本，您想从中调用 SCons（而不是从命令行启动 scons），则需要付出更多的努力。我最初考虑这样做，但后来认为这不值得。

# java - 如何显示最后六个日期，java.util.Date？

> ID：13195698
> 
> 赞同：2
> 
> 时间：2012-11-02T12:58:04.813
> 
> 标签：java, date

我去显示当前日期和最后六 (6) 个日期

例子 ：

```
02/11/2012
01/11/2012
31/10/2012
30/10/2012
29/10/2012
28/10/2012 
```

为了在 JAVA 中获取当前日期，我使用了：

```
Date date = Calendar.getInstance().getTime();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
System.out.println("current day : "+sdf.format(date)); 
```

但是我如何减少天数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:02:16.780

您可以使用该`Calendar#add`方法减去一天，例如：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
Calendar cal = Calendar.getInstance();
Date date=cal.getTime();
System.out.println(sdf.format(date)); //remove line to display only the last 5 days 
for (int i=0;i<5;i++){
   cal.add(Calendar.DAY_OF_MONTH,-1);
   date=cal.getTime();
   System.out.println(sdf.format(date));
} 
```

就像 Jon Skeet（很快 500k 先生 :) 建议的那样，我也发现 Joda Time API 更干净、更合适，即使对于这样简单的任务：

```
DateTime dt = new DateTime();                     
for (int i = 0; i < 6; i++) {                     
    System.out.println(dt.toString("yyyy/MM/dd"));
    dt = dt.minusDays(1);                         
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:02:46.680

```
Calendar c = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
System.out.println("current day : "+sdf.format(c.getTime()));

// decrement 1 day
c.add(Calendar.DAY_OF_MONTH, -1);

// getTime() returns a java.util.Date
System.out.println("the day before : "+sdf.format(c.getTime()));

// getTimeInMillis() returns a long, which can be used to construct a java.sql.Date
System.out.println("the day before : "+sdf.format(new java.sql.Date(c.getTimeInMillis())); 
```

等等...

# xslt - 将动态 XML 解析为 html 表

> ID：13195702
> 
> 赞同：0
> 
> 时间：2012-11-02T12:58:09.410
> 
> 标签：xslt

将动态 xml 数据解析为 html 表时出现问题。XML如下。

```
<results>
  <result id="1" desc="Voltage and current">
    <measure desc="VOLT" value="1.0" />
    <measure desc="AMPERE" value="2.0" />
  </result>
  <result id="2" desc="Current-1">
    <measure desc="AMPERE" value="5.0" />
  </result>
</results> 
```

我想要一个像这样的html表：

```
ID   DESC                VOLT   AMPERE
1    Voltage and current 1.0    2.0
2    Current-1                  5.0 
```

注意第二个电压列的空单元格。ID 和 DESC 取自 result/@id 和 result/@desc，其余列名应来自 measure/@desc

列名不应该重复，我设法编写了这么远的代码，但是当我开始添加我的度量时，我需要匹配每个度量/@desc 以更正表中的列。我尝试了双嵌套循环来首先匹配所有唯一的列名，然后再次循环所有度量以匹配列标题。但是 xslt 解析器向我抛出了 NPE！抱歉，我无法在未连接的计算机上显示任何代码。

我在 SO 上浏览了很多 Q/A，但对我的具体问题没有帮助。

提前致谢

注意：如果有人提出更简洁的格式，我可以以任何方式更改 XML 格式以使解析更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:43:54.113

如果您使用的是 XSLT1.0，您可以使用一种称为“Muenchian”分组的技术来获取不同的度量描述，这将构成您的头行的基础，也可用于输出每一行的值。

**首先，您定义一个键来通过它们的@desc**属性查找**度量**元素

 **```
<xsl:key name="measures" match="measure" use="@desc" /> 
```

然后，要获得不同的度量描述，您可以遍历组中首先出现的**度量元素，以获取它们的给定****@desc**属性

```
<xsl:apply-templates 
   select="result/measure[generate-id() = generate-id(key('measures', @desc)[1])]"
   mode="header" /> 
```

然后，对于您的标题，您只需有一个模板来输出描述。

```
<xsl:template match="measure" mode="header">
   <th>
      <xsl:value-of select="@desc" />
   </th>
</xsl:template> 
```

对于每个**结果**行，都会做类似的事情，并遍历所有不同的度量值，但唯一的区别是您必须将当前**结果**元素作为参数传递，以供以后使用。

```
<xsl:apply-templates 
   select="/results/result/measure[generate-id() = generate-id(key('measures', @desc)[1])]" 
   mode="data">
  <xsl:with-param name="result" select="." />
</xsl:apply-templates> 
```

然后，在这次与度量匹配的模板中，您可以使用匹配的**@desc属性访问****结果**元素中的度量**（**并且 id 没有这样的属性，单元格不输出任何内容）

 ****```
<xsl:template match="measure" mode="data">
   <xsl:param name="result" />
   <td>
      <xsl:value-of select="$result/measure[@desc = current()/@desc]/@value" />
   </td>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="measures" match="measure" use="@desc" />

   <xsl:template match="/results">
      <table>
         <tr>
            <th>ID</th>
            <th>DESC</th>
            <xsl:apply-templates select="result/measure[generate-id() = generate-id(key('measures', @desc)[1])]" mode="header" />
         </tr>
         <xsl:apply-templates select="result" />
      </table>
   </xsl:template>

   <xsl:template match="result">
      <tr>
         <td><xsl:value-of select="@id" /></td>
         <td><xsl:value-of select="@desc" /></td>
         <xsl:apply-templates select="/results/result/measure[generate-id() = generate-id(key('measures', @desc)[1])]" mode="data">
            <xsl:with-param name="result" select="." />
         </xsl:apply-templates>
      </tr>
   </xsl:template>

   <xsl:template match="measure" mode="header">
      <th>
         <xsl:value-of select="@desc" />
      </th>
   </xsl:template>

   <xsl:template match="measure" mode="data">
      <xsl:param name="result" />
      <td>
         <xsl:value-of select="$result/measure[@desc = current()/@desc]/@value" />
      </td>
   </xsl:template>
</xsl:stylesheet> 
```

请注意**模式属性的使用，因为您有两个与****度量**元素匹配的模板，它们以不同的方式起作用。

当应用于您的输入 XML 时，将输出以下内容

```
<table>
   <tr>
      <th>ID</th>
      <th>DESC</th>
      <th>VOLT</th>
      <th>AMPERE</th>
   </tr>
   <tr>
      <td>1</td>
      <td>Voltage and current</td>
      <td>1.0</td>
      <td>2.0</td>
   </tr>
   <tr>
      <td>2</td>
      <td>Current-1</td>
      <td/>
      <td>5.0</td>
   </tr>
</table> 
```******

# android - SQLiteDatabase 在可写数据库上抛出 SQLiteReadOnlyDatabaseException

> ID：13195703
> 
> 赞同：0
> 
> 时间：2012-11-02T12:58:12.423
> 
> 标签：android, android-sqlite

以下代码片段应该从 SQLite 表中删除重复项：

```
public int removeDuplicates(String table, String column, String idcolumn) {
    if (mDB.isReadOnly()) return -1;
    String idcol = idcolumn == null ? "_id" : idcolumn;
    String sql = String.format(Locale.US, "DELETE from %s where %s in " + "(select %s from %s JOIN "
            + "(select min(%s) as id_keep,%s,count(*) as dups from %s group by %s) AS A "
            + "ON A.%s=%s.%s where %s<>id_keep)", table, idcol, idcol, table, idcol, column, table, column, column,
            table, column, idcol);
    SQLiteStatement sqlcmd = mDB.compileStatement(sql);
    int result = sqlcmd.executeUpdateDelete();
    return result;
} 
```

问题是 a`SQLiteReadOnlyDatabaseException`被抛出，即使它通过了`!db.isReadOnly()`测试。

我认为这个问题与这个问题无关，[因为](https://stackoverflow.com/questions/12990391/sqlitereadonlydatabaseexception-but-the-database-is-writable)所有内容都是针对 ICS 编译的；和其他应用程序（使用 ContentProvider 驱动查询）能够写入数据库。

数据库位于 SD 卡上的公用文件夹中。

堆栈跟踪是：

```
11-02 14:48:24.596 E/AndroidRuntime(12324): android.database.sqlite.SQLiteReadOnlyDatabaseException: attempt to write a readonly database
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteStatement.native_executeSql(Native Method)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:90)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1899)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1839)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:661)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteDatabase.beginTransactionNonExclusive(SQLiteDatabase.java:576)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:247)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
11-02 14:48:24.596 E/AndroidRuntime(12324):     at za.co.nimbus.druids.DatabaseTools.removeDuplicates(DatabaseTools.java:139) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:39:08.353

为了写入位于 SD 上的数据库，您需要具有写入外部存储器的权限。只需将以下内容添加到您的清单中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# php - 结合 PHP 和 Jquery Mobile 重定向返回到之前的页面

> ID：13195709
> 
> 赞同：1
> 
> 时间：2012-11-02T12:58:27.433
> 
> 标签：php, jquery, redirect, header

在我正在构建的移动网络应用程序中，我一遍又一遍地遇到同样的问题。在我的 index.php 中，如果我的会话中没有设置任何值，我会重定向到 login.php。用户登录后，我重定向回 index.php。我已经通过 PHP 以及通过 JQuery 的 $.mobile.changePage() 方法尝试了标头重定向。

两种方式都会发生什么是首先加载#home的页面划分。当我使用我的导航栏在同一个多页面中更改为新的页面分区时，它会再次加载 login.php。

索引.php

```
session_start();
require "init.inc"; 
$email = $_SESSION['email'];
if(!isset($email)){header("Location: login.html");}
else{
    echo
    '<!DOCTYPE hmtl>
    <html lang="en">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
            <meta name="apple-mobile-web-app-capable" content="yes">
            <meta name="apple-mobile=web-a-status-bar-style" content="black">

            <!-- link naar icons-->
            <link rel="apple-touch-icon" sizes="114x114" hrf="apple-touch-icon.png"/>

            <title>Loyalty Barcode</title>

            <!-- link naar stylesheet -->
            <link rel="stylesheet" href="css/mobile.css" />
            <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css"/>
            <link rel="stylesheet" href="css/themes/loyalty.css" />

            <!-- link naar de jquery en javascript -->
            <script src="/js/functions.js"></script>
            <script src="/js/Jquery.loadphp.js"></script>
            <script src="http://code.jquery.com/jquery-1.6.3.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.js"></script>
        </head>
        <body>

        <!--/////////////////////////////////// #home (barcode) \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-->
        <div data-role="page" id="home">    
            <!-- header -->
            <header data-role="header" data-theme="a">
                <h1>Loyalty Home</h1>
                <a href="#instellingen" data-role="button" data-mini="true" data-theme="b" data-inline="true" data-iconpos="notext" data-icon="gear" class="ui-btn-right"></a>
            </header>
            <!-- einde header -->

            <article id="barcode">
                <!-- Content -->
                <div class="content">
                    <p>Hier vind u, uw Loyalty barcode. Met deze barcode kunt u de passen die u van winkels heeft gekregen aanmelden.</p>
                    <br/>
                    <img src="images/barcode.png" height="150px" width="200px"/>
                </div>
                <!-- Einde Content -->
                <article id="leeg">
                </article>
                <!-- Footer -->
                <footer data-role="footer">
                    <nav data-role="navbar">
                        <ul>
                            <li><a href="#kortingen-algemeen" data-icon="star" data-theme="b" >Kortingen</a></li>
                            <li><a href="#barcode" class="ui-btn-active ui-btn-persistent" data-icon="home" data-theme="b">Barcode</a></li>
                            <li><a href="#boodschappen-lijstje" data-icon="grid" data-theme="b">Boodschappen</a></li>
                        </ul>
                    </nav>
                </footer>
                <!-- Einde footer -->
            </article>
        </div>
    <!--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ Einde van #home /////////////////////////////////////-->

    <!--/////////////////////////////////// #kortingen-algemeen \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\-->
            <div data-role="page" id="kortingen-algemeen">
            <!-- header -->
            <header data-role="header" data-theme="a">
                <a data-rel="back" data-role="button" data-theme="b" data-inline="true" data-iconpos="notext" data-icon="arrow-l" class="ui-btn-left"></a>
                <h1>Loyalty Kortingen</h1>
                <a href="#instellingen" data-role="button" data-theme="b" data-inline="true" data-iconpos="notext" data-icon="gear" class="ui-btn-right"></a>
            </header>
            <!-- einde header -->
            <article id="kortingen">
            <!-- Content -->
                <div class="content">
                    <div data-role="collapsible-set" data-theme="b" data-content-theme="d" data-inset="true">   

                        <ul data-role="listview" data-split-icon="plus" data-split-theme="c" data-inline="true">
                            <li>
                                <img src="images/ah-logo.png" />
                                <h3>Albert Heijn</h3>
                            </li>
                        </ul>
                        <ul data-role="listview" data-split-icon="plus" data-split-theme="c" data-inline="true">
                            <li>
                                <img src="images/ah-komkommers.jpg" />
                                <h3>Komkommers, 0,39 cent</h3>
                            </li>
                        </ul>
                    </div>
                </div>
            <!-- Einde content -->
                <article id="leeg">
                </article>
            <!-- Footer -->
                <footer data-role="footer">
                    <nav data-role="navbar">
                        <ul>
                            <li><a href="#kortingen-algemeen" class="ui-btn-active ui-btn-persistent" data-icon="grid" data-theme="a">Algemeen</a></li>
                            <li><a href="#kortingen-persoonlijk" data-icon="check" data-theme="a">Persoonlijk</a></li>
                        </ul>
                    </nav>
                </footer>
            </article>
            <!-- Einde footer -->
            </div>
            <!--\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ Einde van #kortingen-algemeen /////////////////////////////////////-->

                <!-- ***********************************  #kortingen-persoonlijk ************************************* -->
                <div data-role="page" id="kortingen-persoonlijk">
                    <!-- header -->
                    <header data-role="header" data-theme="b">
                        <a data-rel="back" data-role="button" data-theme="b" data-inline="true" data-iconpos="notext" data-icon="arrow-l" class="ui-btn-left">Terug</a>
                        <h1>Loyalty Kortingen</h1>
                        <a href="#instellingen" data-role="button" data-theme="b" data-inline="true" data-iconpos="notext" data-icon="gear" class="ui-btn-right">Instellingen</a>
                    </header>
                    <!-- einde header -->
                    <article id="kortingen">
                    <!-- Content -->
                        <div class="content">
                        Hier komen de verschillende persoonlijke kortingen te staan.
                        </div>
                    <!-- Einde content -->
                        <article id="leeg">
                        </article>
                    <!-- Footer -->
                        <footer data-role="footer">
                            <nav data-role="navbar">
                                <ul>
                                    <li><a href="#kortingen-algemeen" data-icon="grid" data-theme="a">Algemeen</a></li>
                                    <li><a href="#kortingen-persoonlijk" class="ui-btn-active ui-btn-persistent" data-icon="check" data-theme="a">Persoonlijk</a></li>
                                </ul>
                            </nav>
                        </footer>
                    </article>
                    <!-- Einde footer -->
                </div>
<!--*********************************** Einde #kortingen-persoonlijk *********************************** -->
                           </body>  
   </html>   
?> 
```

登录.php

```
session_start();
require "init.inc";

$email=$_POST['email']; 
$wachtwoord=$_POST['wachtwoord']; 

    if (($email&&$wachtwoord) && (isset($_POST['wachtwoord'])))
{
$query = mysql_query("SELECT * FROM user WHERE email='$email'");
$numrows = mysql_num_rows($query);
if ($numrows!=0)//als het aantal rijen niet 0 is
    {
        while($row = mysql_fetch_assoc($query))//zolang er rijen zijn
        {
            $dbid = $row['userId'];
            $dbemail = $row['email']; /
            $dbwachtwoord = $row['wachtwoord']; 
        }

        if ($email==$dbemail&&$wachtwoord==$dbwachtwoord)
        {

                $_SESSION['email']=$dbemail;
                echo'
                    <header><link rel="stylesheet" href="http://code.jquery.com/mobile/1.0b3/jquery.mobile-1.0b3.min.css"/></header>
                    <body><script>$.mobile.changePage( "index.php");</script></body>
                ';
                exit;
        }
        else 
        {
            echo"Verkeerd wachtwoord ingevuld. Probeer het opnieuw a.u.b.";
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:52:16.270

您在此处发布的代码存在多个问题。如果我在这里陈述显而易见的事情，请原谅我。

首先，当您提到 login.php 时，您将重定向到 login.html。

改变

```
if(!isset($email)){header("Location: login.html");} 
```

到

```
if(!isset($email)){header("Location: login.php");} 
```

其次，不要忘记删除 login.php 中的“/”错字：

```
 $dbemail = $row['email']; / 
```

顺便说一句，最好不要回显您所有的 HTML 布局代码，我看到您在 index.php 中使用它。

最后：你可以使用

```
header("Location: index.php"); 
```

在您的登录页面和索引页面之间导航没有任何问题。我已经修改了您的代码，它目前位于以下 URL：[单击此处进行演示](http://www.rustigereigers.nl/stackoverflowtest)

供您参考，请在下面找到我的（工作）修改后的 login.php 代码：

* * *

**登录.php**

注意：我添加了一个表单来演示功能

```
<?php
session_start();
require "init.inc";
if(isset($email)){header( "Location: index.php" ); }
$email=$_POST['email']; 
$wachtwoord=$_POST['wachtwoord']; 

/*****************************************************************************************************
 * 2-11-2012 Shinigami: I'm checking only if the session variable "email" and "wachtwoord" is set,   *
 * I'm not using any database verification at the moment, you should implement that further yourself *
 * Uncommenting the code below should work for you I suppose                                         *
 *****************************************************************************************************/
if (($email&&$wachtwoord))
{

/*
$query = mysql_query("SELECT * FROM user WHERE email='$email'");
$numrows = mysql_num_rows($query);
if ($numrows!=0)//als het aantal rijen niet 0 is
    {
        while($row = mysql_fetch_assoc($query))//zolang er rijen zijn
        {
            $dbid = $row['userId'];
            $dbemail = $row['email']; 
            $dbwachtwoord = $row['wachtwoord']; 
        }

        if ($email==$dbemail&&$wachtwoord==$dbwachtwoord)
        {

    if ($email){ //not neccessary
                */

                /*******************************************************
                * 2-11-2012 Shinigami: This is where the magic happens *
                ********************************************************/
                $_SESSION['email']=$email;
                header( "Location: index.php" );

            /*  

                }
        }
      else 
       {
         echo"Verkeerd wachtwoord ingevuld. Probeer het opnieuw a.u.b.";
       }  */ 
    //}
}

?>
<html>
<head>
<title>Login page</title>
</head>
<body>
<form method="post" action="login.php">
<input type="text" name="email"></input>
<input type="text" name="wachtwoord"></input>
<input type="submit">
</form>
</body>
</html> 
```

* * *

# javascript - JavaScript 警报“页面显示”

> ID：13195713
> 
> 赞同：2
> 
> 时间：2012-11-02T12:58:39.537
> 
> 标签：javascript, alert

我有一个表格，我正在使用 JavaScript 来验证表格，所以如果我们将一个字段留空，它会提醒“请输入您的姓名”。

如果我直接去链接，它工作得很好。但我正在使用 iFrame 将其嵌入到其他站点中。当我嵌入它时，点击提交并显示一个空字段：

> [http://www.domain.com](http://www.domain.com)上的页面显示：请输入您的姓名

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:01:39.333

这是一项安全措施，可防止框架站点显示似乎来自父站点的消息。

如果不避免使用`alert()`.

您可以通过修改 DOM 以将其显示为页面的一部分来向用户显示信息。

# django - Django中的循环依赖

> ID：13195715
> 
> 赞同：3
> 
> 时间：2012-11-02T12:58:43.920
> 
> 标签：django

我知道SO中有类似的问题，但没有人回答我的问题。

我有以下型号：

```
class Style(models.Model):      
    featured_item = models.ForeignKey(Item)

class Item(models.Model):      
    style = models.ForeignKey(Style) 
```

这不是一对一的关系，因为多个项目可以具有相同的样式。但是，一个项目只能是一种 Style 的 features_item。

我可以在我的模型中添加一个`is_featured_item`布尔字段`Item`，但这会使我的管理员更加复杂。

有没有办法解决这种循环依赖？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:22:43.260

您可以使用模型的名称（[请参阅文档](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ForeignKey)），而不是模型对象本身：

```
class Item(models.Model):      
    style = models.ForeignKey('app_name.Style') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:26:17.137

如果 in`Item`只能是`featured_item`一种样式，那么这意味着在`featured_item`整个`Style`表中必须是唯一的。

关于什么：

```
class Style(models.Model):      
    featured_item = models.ForeignKey(Item, unique = True) 
```

这相当于做：

```
class Style(models.Model):      
    featured_item = models.OneToOneField('Item', related_name = 'featured_in') # Style -> Item relationshio

class Item(models.Model):      
    style = models.ForeignKey(' Style') # Items -> Style relationship 
```

除了告诉您它属于哪种风格的前向关系之外，它还为您提供了每个`Item`告诉您它的特色的向后关系。`Style`

我猜你可能会想要使用一个`limit_choices_to`子句，以便 an`Item`只能出现在`Style`它所属的部分中。

# iphone - 检测无线网络名称

> ID：13195717
> 
> 赞同：4
> 
> 时间：2012-11-02T12:58:56.997
> 
> 标签：iphone, ios, xcode

是否可以运行返回用户连接的无线网络名称的方法？在我的应用程序内部，我希望能够返回用户连接到的无线网络的名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T14:44:37.820

这对我来说很完美：

```
#import <SystemConfiguration/CaptiveNetwork.h>

CFArrayRef myArray = CNCopySupportedInterfaces();
CFDictionaryRef myDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));
//    NSLog(@"SSID: %@",CFDictionaryGetValue(myDict, kCNNetworkInfoKeySSID));
NSString *networkName = CFDictionaryGetValue(myDict, kCNNetworkInfoKeySSID);

if ([networkName isEqualToString:@"Hot Dog"])
{
    self.storeNameController = [[StoreDataController alloc] init];
    [self.storeNameController addStoreNamesObject];
}
else {
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Connection Failed"
                                                   message: @"Please connect to the Hot Dog network and try again"
                                                  delegate: self
                                         cancelButtonTitle: @"Close"
                                         otherButtonTitles: nil];

    [alert show]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T13:00:32.123

从 [Developer.apple](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html#//apple_ref/doc/uid/TP40009770-CH101-SW4)中，您可以使用**CNCopyCurrentNetworkInfo**

它返回给定网络接口的当前网络信息。

```
CFDictionaryRef CNCopyCurrentNetworkInfo (
   CFStringRef interfaceName
); 
```

它包含一个包含接口当前网络信息的字典。所有权遵循创建规则。

**注意**：***在 iOS 4.1 和更高版本中可用***。

**例子：**

**这个例子在真实设备上可以正常工作，它可能会在模拟器中崩溃。**

添加**SystemConfiguration.framework**

**导入** `CaptiveNetwork`头如下

`#import <SystemConfiguration/CaptiveNetwork.h>`

然后编写下面的代码。

```
 CFArrayRef myArray = CNCopySupportedInterfaces();
    // Get the dictionary containing the captive network infomation
    CFDictionaryRef captiveNtwrkDict = CNCopyCurrentNetworkInfo(CFArrayGetValueAtIndex(myArray, 0));    
    NSLog(@"Information of the network we're connected to: %@", captiveNtwrkDict);    
    NSDictionary *dict = (__bridge NSDictionary*) captiveNtwrkDict;
    NSString* ssid = [dict objectForKey:@"SSID"];
    NSLog(@"network name: %@",ssid); 
```

或者

使用**Bonjour**，应用程序既在本地网络上宣传自己，又在网络上显示该应用程序的其他实例的列表

查看示例[Witap](http://developer.apple.com/library/ios/#samplecode/WiTap/Listings/Networking_BrowserViewController_m.html#//apple_ref/doc/uid/DTS40007321-Networking_BrowserViewController_m-DontLinkElementID_6)应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T17:45:52.827

坏消息：'CNCopyCurrentNetworkInfo' 已弃用：**在 iOS 9.0 中首次弃用**- 对于强制网络应用程序，它已完全被 <NetworkExtension/NEHotspotHelper.h> 取代。对于其他应用程序，没有直接替代。请提交描述您使用此 API 的错误，以便我们可以随着这种情况的发展考虑您的要求。

好消息：虽然已被弃用，但它在 iOS 9 中仍然有效，并且在 iOS 10 中未被弃用。

它在 iOS 13 中仍然有效，但前提是应用程序实现了定位服务并且用户授权了它们的使用。

# ios6 - 通过在 MKMapview 上添加折线（路径）使 ios6 中的应用程序崩溃

> ID：13195728
> 
> 赞同：1
> 
> 时间：2012-11-02T13:00:04.773
> 
> 标签：ios6, mkmapview, polyline

我需要在两个注释引脚之间的 MKMapview 中添加路径。ios 5 或更早版本没有问题，但是当我尝试在 ios 6 中运行应用程序时，应用程序出人意料地退出了。下面是我的代码。如果我的代码中有任何更正，请建议我。

1.所以我的问题是建议如何在我的以下代码中确定内存的最佳方法，以便我可以解决我的应用程序中的崩溃。

```
- (void)viewDidLoad 
{
NVPolylineAnnotation *annotation = [[NVPolylineAnnotation alloc] initWithPoints:pathArray mapView:_mapView];
[_mapView addAnnotation:annotation];
        [annotation release];
        [pathArray removeAllObjects];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id  <MKAnnotation>)annotation
{
    NSLog(@"%s",__FUNCTION__);
if ([annotation isKindOfClass:[NVPolylineAnnotation class]]) 
{
    NSLog(@"=========ANOTATION=========NVPolylineAnnotationView START");

    //ann=[ann initWithAnnotation:annotation mapView:_mapView];
    NVPolylineAnnotationView *ann=[[NVPolylineAnnotationView alloc] init];
    return [[ann initWithAnnotation:annotation mapView:_mapView]     autorelease];//[[[NVPolylineAnnotationView alloc] initWithAnnotation:annotation    mapView:_mapView] autorelease];

}
else if([annotation isKindOfClass:[MapViewAnnotation class]])
   {

        MKPinAnnotationView *annView=[[MKPinAnnotationView alloc]     initWithAnnotation:annotation reuseIdentifier:@"pointers"] ;
//      annView.rightCalloutAccessoryView = [UIButton buttonWithType:    UIButtonTypeDetailDisclosure];
       annView.animatesDrop=NO;
       annView.canShowCallout = TRUE;
      return [annView autorelease];
}
   else if([annotation isKindOfClass:[PlacePin class]])
   {
       {
        MKPinAnnotationView *pinView = nil; 
        if(annotation != mapView.userLocation) 
           {
            static NSString *defaultPinID = @"com.invasivecode.pin";
            pinView = (MKPinAnnotationView *)[mapView    dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
            if ( pinView == nil ) 
                pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation    reuseIdentifier:defaultPinID] autorelease];
            pinView.pinColor = MKPinAnnotationColorGreen;
            pinView.canShowCallout = YES;
            pinView.animatesDrop = NO;
            } 
            else {
            [mapView.userLocation setTitle:@"I am here"];
           }
        return pinView;
       }
}

return nil;
}

 - (void) mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views 
 {

   NSLog(@"%s",__FUNCTION__);

// fixes that some marker are behind the polyline
    for (int i=0; i<[views count]; i++) 
    {
    MKAnnotationView *view = [views objectAtIndex:i];
    if ([view isKindOfClass:[NVPolylineAnnotationView class]]) 
    {
        [[view superview] sendSubviewToBack:view];

        /* In iOS version above 4.0 we need to update the polyline view     after it
         has been added to the mapview and it ready to be displayed. */
        NSString *reqSysVer = @"4.0";
        NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
        if ([currSysVer compare:reqSysVer options:NSNumericSearch] !=     NSOrderedAscending) 
        {
            [self updatePolylineAnnotationView];
        }
    }
}
NSLog(@"----------didAddAnnotationViews");
 }

- (void)updatePolylineAnnotationView 
{
NSLog(@"%s",__FUNCTION__);

 MKAnnotationView *annotationView = [views objectAtIndex:0];
 id <MKAnnotation> mp = [annotationView annotation];
 [mapView selectAnnotation:mp animated:NO];
 */
for (NSObject *a in [_mapView annotations]) 
{
    if ([a isKindOfClass:[NVPolylineAnnotation class]]) 
    {
        NVPolylineAnnotation *polyline = (NVPolylineAnnotation *)a;

        NSObject *pv = (NSObject *)[_mapView viewForAnnotation:polyline];
        if ([pv isKindOfClass:[NVPolylineAnnotationView class]]) 
        {
            NVPolylineAnnotationView *polylineView =
            (NVPolylineAnnotationView *)[_mapView viewForAnnotation:polyline];

            [polylineView regionChanged];

        }
    }       
}
} 
```

# javascript - 如何检测调用 jquery 脚本的内容

> ID：13195730
> 
> 赞同：0
> 
> 时间：2012-11-02T13:00:09.227
> 
> 标签：javascript, jquery

抱歉没有代码。但我没有这个问题的起点。

我已经搜索了 jquery 和 javascript 文档，但我必须使用错误的术语，因为我没有得到任何结果。

我希望根据调用脚本的内容在 jquery 脚本中采取行动。

即我在几个php 文件中有相同的jquery 脚本。我不想为每个 php 文件创建单独的脚本。我想知道哪个 php 文件调用了该脚本并相应地改变它的行为。

这似乎是一件非常合理的事情，所以我希望这是一个非常简单的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:03:44.153

查看`window.location`对象 - 它会告诉您包含 HTML 页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:10:26.320

让 PHP 文件回显一个配置对象来告诉 JS 如何表现（例如，它在什么类型的页面上执行）：

```
<script type="text/javascript">
    config = <?php
        $config = array("page" => …, "state" => …);
        echo json_encode($config);
    ?>;
</script>
<script type="text/javascript" src="/common.js"></script> 
```

# r - 如何从 R 工作区中删除垃圾收集未删除的不可见对象？

> ID：13195733
> 
> 赞同：8
> 
> 时间：2012-11-02T13:00:28.583
> 
> 标签：r, memory-management

我正在使用 mboost 包中的 blackboost 函数来估计 Windows 7 64 位、8gb RAM 机器上大约 500mb 数据集的模型。在执行期间，R 几乎使用了所有可用内存。计算完成后，即使在使用 gc() 调用垃圾收集或将工作区保存并重新加载到新的 R 会话后，仍有超过 4.5gb 分配给 R。使用 .ls.objects ( [1358003](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session) ) 我发现所有可见对象的大小约为 550mb。

gc() 的输出告诉我大部分数据都在向量单元格中，尽管我不确定这意味着什么：

```
 used   (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells   2856967  152.6    4418719  236.0   3933533  210.1
Vcells 526859527 4019.7  610311178 4656.4 558577920 4261.7 
```

这就是我正在做的事情：

```
> memory.size()
[1] 1443.99
> model <- blackboost(formula, data = mydata[mydata$var == 1,c(dv,ivs)],tree_control=ctree_control(maxdepth = 4)) 
```

...加载了一堆包...

```
> memory.size()
[1] 4431.85
> print(object.size(model),units="Mb")
25.7 Mb
> memory.profile()
     NULL      symbol    pairlist     closure environment     promise    language 
        1       15895      826659       20395        4234       13694      248423 
  special     builtin        char     logical     integer      double     complex 
      174        1572     1197774       34286       84631       42071          28 
character         ...         any        list  expression    bytecode externalptr 
   228592           1           0       79877           1       51276        2182 
  weakref         raw          S4 
      413         417        4385 
```

mydata[mydata$var == 1,c(dv,ivs)] 有 139593 行和 75 列，其中大部分是因子变量和一些逻辑或数值变量。*公式*是以下类型的公式对象：“dv ~ var2 + var3 + .... + var73”。*dv*是一个变量名字符串，*ivs*是一个包含所有自变量 var2 ... var74 的字符串向量。

为什么要为 R 分配这么多内存？如何让 R 释放额外的内存？任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T23:41:26.377

我曾与其中一位包作者交谈过，他告诉我与模型对象关联的大部分数据都保存在环境中，这解释了为什么 object.size 不能反映由 blackboost 函数引起的 R 的完整内存使用情况。他还告诉我，mboost 包并没有在速度和内存效率方面进行优化，而是以灵活性为目标，所有的树都被保存了，因此数据也被保存了，这解释了生成的大量数据（我仍然发现尺寸显着..)。他建议使用 gbm 包（我还无法复制我的结果）或通过执行以下操作进行序列化：

```
### first M_1 iterations
mod <- blackboost(...)[M_1]
f1 <- fitted(mod)
rm(mod)
### then M_2 additional iterations ...
mod <- blackboost(..., offset = f1)[M_2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:55:44.523

据我所知，问题不是 R 中的 gc() ，而是内存没有完全返回给操作系统的事实。

[这个帖子](http://r.789695.n4.nabble.com/garbage-collection-amp-memory-leaks-in-R-it-seems-td2292189.html)没有提供答案，但它揭示了问题的本质。

# ruby-on-rails - Rails 中的参数错误

> ID：13195737
> 
> 赞同：1
> 
> 时间：2012-11-02T13:00:50.153
> 
> 标签：ruby-on-rails, controller, arguments, argument-error

我想连接两个实体（项目和问题），Rails 说一些错误消息，但我不知道该怎么办。请你帮我修一下好吗？非常感谢。

![错误画面](../Images/9d7ccb0bfa127e02f9534fe17e17d943.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:05:22.127

不确定您要做什么，但看起来您有一个嵌套资源，因此想要将一个数组传递给`form_for`，但实际上您传递的是两个单独的对象。改变：

```
<%= form_for(@project, @project.issues.build) do |f| %> 
```

到：

```
<%= form_for([@project, @project.issues.build]) do |f| %> 
```

通过此更改，您将传递一个数组 for `form_for`，而不是两个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:01:34.487

我认为您使用过这样的嵌套资源：

```
resources projects do
  resources issues
end 
```

如果您使用它，请尝试使您的表单如下所示：

```
<%= form_for([@project, @issue]) do |f| %> 
```

在您的 IssueController 中：

```
def new
  @project = Project.new
  @issue = @project.issues.build(params[:issue])
end

def create
  @project = Project.find(params[:project_id]
  @issue = @project.issues.create(params[:issue]
end 
```

并再次运行以查看发生了什么。希望这有帮助。

# c# - 避免随机重复

> ID：13195738
> 
> 赞同：4
> 
> 时间：2012-11-02T13:00:52.873
> 
> 标签：c#, arrays

```
System.Random generator = new Random(DateTime.Now.Millisecond);
int[] lotteryNumber = new int[7];

Console.WriteLine("Your lottery numbers: ");
for (int i = 0; i<7; i++)
{
    lotteryNumber[i] = generator.Next(1, 37);
    Console.Write("{0} ",lotteryNumber[i]);
}
Console.ReadLine(); 
```

我需要制作一个打印 7 个彩票号码但没有重复号码的程序。上面的代码打印了 (1-37) 范围内的 7 个随机数，但重复了 appaer。我需要一种方法来防止出现重复的数字。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T13:03:22.530

IMO 最简单的方法是生成*所有*可能数字的序列（即 1-37），将集合打乱，然后取前七个结果。

在 Stack Overflow 上搜索“Fisher-Yates shuffle C#”会发现很多示例。

实际上，您可以修改 Fisher-Yates shuffle 以在获取结果时产生结果，因此您可以编写如下方法：

```
var numbers = Enumerable.Range(1, 37).Shuffle().Take(7).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:06:36.923

您可以使用字典，但要确保防止重复键插入。字典的键将作为您需要的唯一数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:03:02.333

你可以把它们扔进一个`HashSet<int>`. 如果您`Add`和它返回 false，则生成一个新数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:03:21.313

如果您试图从一个范围内选择*没有重复*的数字，您需要创建一个包含所有可能数字的数组，然后“洗牌”一个随机选择：

```
int[] allPossibleNumbers = Enumerable.Range(1, 37).ToArray();
int[] lotteryNumber = new int[7];
for (int i = 0; i < 7; i++)
{
    int index = r.Next(i, 37);
    lotteryNumber[i] = allPossibleNumbers[index];
    allPossibleNumbers[index] = allPossibleNumbers[i];
    // This step not necessary, but allows you to reuse allPossibleNumbers
    // rather than generating a fresh one every time.
    // allPossibleNumbers[i] = lotteryNumber[i];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T13:04:16.293

生成包含 37 个项目的列表。然后在你的for中，选择一个并删除选中的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T13:09:49.333

也许这可能会有所帮助，如果您获得现有号码，只需尝试找到不在数组中的新号码：

```
static void Main(string[] args)
        {
            System.Random generator = new Random(DateTime.Now.Millisecond); int[] lotteryNumber = new int[7];

            Console.WriteLine("Your lottery numbers: ");
            for (int i = 0; i < 7; i++)
            {
                int lNumber = 0;
                do
                {
                    lNumber = generator.Next(1, 37);
                }
                while (lotteryNumber.Contains(lNumber));
                lotteryNumber[i] = lNumber;

                Console.Write("{0} ", lotteryNumber[i]);
            }
            Console.ReadLine();
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T13:10:14.803

```
HashSet<int> set = new HashSet<int>();
System.Random generator = new Random(DateTime.Now.Millisecond);

while(set.Count < 7){
    set.Add(generator.Next(1,37);
} 
```

这应该可行，因为 HashSet 会自动忽略重复项。只需循环直到集合达到您需要的单位数量。唯一潜在的问题是它有可能（不太可能）循环很长时间，但它最终应该会响应。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-02T13:54:15.143

所以我拿了你的原始代码......发现了一些逻辑错误并添加了你正在寻找的修复程序以防止随机数重复。

享受！

```
 System.Random generator = new Random(DateTime.Now.Millisecond);
            int[] lotteryNumber = new int[7];
            int lowerBounds = 1;
            int upperBounds = 8;
            int maxNumberLotteryValues = 7;

            if ( ( upperBounds - lowerBounds ) < (maxNumberLotteryValues))
            {
                Console.Write("Warning: Adjust your upper and lower bounds...there are not enough values to create a unique set of Lottery numbers! ");

            }
            else
            {
                Console.WriteLine("Your lottery numbers: ");
                for (int i = 0; i < maxNumberLotteryValues; i++)
                {
                    int nextNumber = generator.Next(lowerBounds, upperBounds);
                    int count = lowerBounds;  //Prevent infinite loop

                    while ((lotteryNumber.Contains(nextNumber))
                        && (count <= upperBounds))
                    {
                        nextNumber = generator.Next(lowerBounds, upperBounds);
                        count++;  //Prevent infinite loop
                    }

                    lotteryNumber[i] = nextNumber;
                    Console.Write("{0} ", lotteryNumber[i]);
                }
            }

            Console.ReadLine(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-05T13:18:34.390

```
const int nBalls = 37;
const int nPicks = 6;
int[] balls = new int[nPicks];
Random rnd = new Random(DateTime.Now.Millisecond);

int remainingBalls=nBalls;
int remainingPicks=nPicks;
for (int i = 1; i <= nBalls; i++)
{
    if (rnd.Next(1, remainingBalls+1) <= remainingPicks)
        balls[--remainingPicks]=i;
    remainingBalls--;
}

Console.WriteLine(string.Join(",",balls)); 
```

随着 nPicks/nBalls 变大，将优于 Shuffle 和 HashSet 方法。

# jquery - jQuery 的 beforeunload 事件

> ID：13195740
> 
> 赞同：0
> 
> 时间：2012-11-02T13:00:58.270
> 
> 标签：jquery, asp.net

这些是我的 javascript 函数，用于检查用户是否在不保存数据的情况下退出应用程序

```
 <script src="jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="JScript.js" type="text/javascript"></script>
<script src="JScript2.js" type="text/javascript"></script>
<script src="jquery.alerts.js" type="text/javascript"></script>
<link href="jquery.alerts.css" rel="stylesheet" type="text/css" media="screen" />

<script type="text/javascript">
    var isDirty;
    isDirty = 0;

    function setDirty() {
        var form = document.getElementById('form1');
        var inputs = form.getElementsByTagName('input');
        var e = document.getElementById("ddl");
        var strUser = e.options[e.selectedIndex].value;
        var elems = document.getElementsByTagName('input');
        for (var i = 0; i < elems.length; i++) {
            if (elems[i].type == 'text' || elems[i].type == 'checkbox' || elems[i].type == 'radio') {
                is_checked = elems[i].checked;
                is_checked1 = elems[i].checked;
                if (elems[i].value == '' && !(is_checked) && !(is_checked1) && strUser == '0') {
                    isDirty = 0;
                    //alert("In");
                }
                else {
                    isDirty = 1;
                }
            }
        }
    }
    $(document).ready(function f() {
        alert("In");
        $("#Button1").click(function () {
            if (isDirty == 1) {
                jConfirm('Can you confirm this?', 'Confirmation Dialog', function (r) {
                    if (r == true) {
                        //var link = '<%=btnDelete.UniqueID %>'
                        //__doPostBack('<%=btnDelete.UniqueID%>', "");
                    }
                    else
                        return false;

                });
                //return false;
                return false;
            }
            else {
                // __doPostBack('<%=btnDelete.UniqueID%>', "");
            }
        });
    });

</script>
<script type="text/javascript">

    $(window).bind('beforeunload', function () {
        if (isDirty == 1) {
            alert("Hi");
            jConfirm('Can you confirm this?', 'Confirmation Dialog', function (r) {
                if (r == true) {
                    //var link = '<%=btnDelete.UniqueID %>'
                    //__doPostBack('<%=btnDelete.UniqueID%>', "");
                }
                else
                    return false;

            });
            //return false;
            return false;
        }
        else {
            // __doPostBack('<%=btnDelete.UniqueID%>', "");
        }
    });

</script> 
```

这是我的设计

```
<div>
    <table>
        <tr>
            <td>
                <asp:TextBox ID="txt" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            </td>
            <td>
                <asp:RequiredFieldValidator ID="Rqrd" runat="server" ValidationGroup="g" ControlToValidate="TextBox1"
                    ErrorMessage="Required"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td>
                <asp:CheckBox ID="chk" runat="server" Text="Check Me" />
            </td>
        </tr>
        <tr>
            <td>
                <asp:RadioButton ID="radio" runat="server" Text="Radio" />
            </td>
        </tr>
        <tr>
            <td>
                <asp:DropDownList ID="ddl" runat="server">
                    <asp:ListItem Text="--Select--" Value="0"></asp:ListItem>
                    <asp:ListItem Text="One" Value="1"></asp:ListItem>
                    <asp:ListItem Text="Two" Value="2"></asp:ListItem>
                </asp:DropDownList>
            </td>
        </tr>
        <tr>
            <td>
                <input id="Button2" type="button" value="Submit" />
            </td>
            <td style="display: none; font-size: 0px; width: 0px;">
                <asp:LinkButton ID="btnDelete" runat="server" Text="Ok" ValidationGroup="g" OnClick="btn1_Click" />
            </td>
            <td>
                <asp:Button ID="Button1" runat="server" Text="Cancel" OnClick="Button1_Click" />
            </td>
        </tr>
    </table>
    <%--<asp:Button ID="btn1" runat="server" Text="Ok" onclick="btn1_Click" />--%>
</div> 
```

在取消点击时，我得到了我需要的警报，当我关闭出错的标签时没有得到同样的警报，有人可以帮助我吗

我的自定义警报需要这种场景

[http://www.mkyong.com/wp-content/uploads/jQuery/jQuery-stop-page-from-exit.html](http://www.mkyong.com/wp-content/uploads/jQuery/jQuery-stop-page-from-exit.html)

![在此处输入图像描述](../Images/df807f91fcf4066ae8778e089c9895b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:59:39.313

**EDITED**删除了两行测试代码

```
 function checkit(){

    if (isDirty == 1) {

            jConfirm('Can you confirm this?', 'Confirmation Dialog', function (r) {

                if (r === true) {

                //var link = '<%=btnDelete.UniqueID %>';
                //__doPostBack('<%=btnDelete.UniqueID%>', "");

                }else{

                return false;

                }

            });

    return false;

    }else{

       // __doPostBack('<%=btnDelete.UniqueID%>', "");

    }

} 
```

然后用这些中的每一个调用函数？

```
 $("#Button1").click(checkit);

 $(window).bind('beforeunload',checkit); 
```

# php - SQL 查询 - WHERE 不工作

> ID：13195741
> 
> 赞同：1
> 
> 时间：2012-11-02T13:01:03.123
> 
> 标签：php, mysql, sql

我有这个工作正常的查询：

```
SELECT p.design_id, p.product_id, t.account_id, p.name, p.width, p.height, 
 p.price, t.email 
 FROM designs AS p
 INNER JOIN ( SELECT user_id, email, account_id FROM users ) AS t
 USING(user_id) ORDER BY p.design_id LIMIT 0, 300 ); 
```

现在我正在尝试修剪结果：

```
SELECT p.design_id, p.product_id, t.account_id, p.name, p.width, 
 p.height, p.price, t.email 
 FROM designs AS p
 INNER JOIN ( SELECT user_id, email, account_id FROM users 
 WHERE account_id = 0) AS t
 USING(user_id) ORDER BY p.design_id LIMIT 0, 3 ); 
```

但是第二个查询结果和第一个完全一样。

请问有人可以对此有所了解吗？

//更新

我删除了 php 变量以阻止不必要的混淆 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:11:04.070

*你为什么不尝试在 where 条件下使用占位符，如下所示，或者它是一个错字。*

```
"SELECT p.design_id, p.product_id, t.account_id, p.name, p.width, p.height, p.price, t.email 
 FROM designs AS p
 INNER JOIN ( SELECT user_id, email, account_id FROM users WHERE account_id = **".$ind."**) AS t
 USING(user_id) ORDER BY p.design_id LIMIT ".$from.", ".$howMany ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:16:45.377

试试这个

```
"SELECT   p.design_id, p.product_id, t.account_id, 
          p.name, p.width, p.height, p.price, t.email 
 FROM     designs AS p
          INNER JOIN  users AS t
              ON p.user_id = t.user_ID AND
                 t.account_id = $ind
 ORDER BY p.design_id LIMIT " . $from . ", " . $howMany 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T13:42:49.373

您尚未从**设计中选择列****user_id**。您的 JOIN 根本不起作用。从手册：

 **> USING(column_list) 子句命名必须存在于两个表中的列列表。

或者所有用户的 account_id = 0（或至少所有有设计的用户）。

如果两者都不是，请尝试在嵌套选择表“t”之前删除单词“AS”。

您也可以不使用 USING 进行尝试，使用“ON t.user_id = p.user_id”而不是“USING(user_id)”**

# php - 使用 Malsup 的 jQuery 文件上传进度条在 PHP 中上传失败

> ID：13195742
> 
> 赞同：10
> 
> 时间：2012-11-02T13:01:04.860
> 
> 标签：php, jquery, jquery-forms-plugin

我正在使用[Malsup 的 jQuery File Upload Progress Bar](http://www.malsup.com/jquery/form/progress2.html)在将文件上传到服务器时可视化进度条。我目前正在使用它。我对这个插件有以下疑问：

1) 即使进度条没有达到 100% 也会上传文件

2) 如果文件大小超过 10 MB，它会在进度条中加载到 100% 并回显 Upload failed！信息。

这是代码：

```
<!doctype html>
<head>
<title>Uploads</title>
<style>
body { padding: 30px }
form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

.progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
.bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
.percent { position:absolute; display:inline-block; top:3px; left:48%; }
</style>
</head>
<body>
    <h1>File Upload</h1>
    <form action="file.php" method="post" enctype="multipart/form-data">
        <input type="file" name="myfile[]" multiple><br>
        <input type="submit" value="Upload File to Server">
    </form>

    <div class="progress">
        <div class="bar"></div >
        <div class="percent">0%</div >
    </div>

    <div id="status"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script>
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('form').ajaxForm({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    complete: function(xhr) {
        status.html(xhr.responseText);
    }
}); 

})();       
</script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">
_uacct = "UA-850242-2";
urchinTracker();
</script> 
```

表单操作 -> file.php 代码：

```
<?php
$upload_directory = "../users/Files/";
if (move_uploaded_file($_FILES['userfile']['tmp_name'], $upload_directory . $_FILES['userfile']['name'])) {
    print "<br><br>";
    print "<font color='black'>File Uploaded Successfully</font>";
    print "<br><br>";
    print "<font color='black'>Uploaded File is {$_FILES['userfile']['name']} and its size is {$_FILES['userfile']['size']} bytes </font>";
} else {
    print "Upload failed!";
}
?> 
```

我的文件上传服务器设置：

```
post_max_size            1050M   1050M

upload_max_filesize  1050M   1050M

upload_tmp_dir           /tmp    /tmp 
```

php.ini 中的设置：

```
max_execution_time = 30 ; Maximum execution time of each script, in seconds

max_input_time = -1

memory_limit = 2000M ; Maximum amount of memory a script may consume (8MB) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:36:30.647

有`php.ini`一个最大尺寸限制，我`file.php`为此替换了：

```
<?php
set_time_limit(0);
$allowedExts = array("jpg", "jpeg", "gif", "png", "rar", "zip", "tgz", "iso", "gz",         "img", "exe", );
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "application/rar")
|| ($_FILES["file"]["type"] == "application/octet-stream")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 200000000000000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("/var/www/file/upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "/var/www/file/upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "/file/upload/" . $_FILES["file"]["name"];

     }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:23:48.540

您的文件名有错误...即：

```
<input type="file" name="myfile[]" multiple><br> 
```

当你在 php 代码中以`$_FILES["file"]["type"]`. 将名称更改为`file`而不是`myfile[]`。改成 ：

```
<input type="file" name="file" multiple><br> 
```

虽然还有一些错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:05:28.630

在您的 php 页面中，在 php 标记之后添加此行。

```
<?php
set_time_limit(0); 
```

# html - 我的页面中的类名重复 - 使用 cssSelector 获取文本

> ID：13195743
> 
> 赞同：0
> 
> 时间：2012-11-02T13:01:06.107
> 
> 标签：html, css-selectors

下面是我的 html 的样子，我的页面的问题是，我有重复`class names`，所以对于我的页面中的一个示例，我`class="inner"`在同一页面中有多次。

我的问题是：如何获取`Get this text`使用 cssSelector 的文本？

```
<div class="tools-col-right">
       <div class="subcr">
       <div .....</div>
       <div .....</div>
       <div .....</div>
       <div class="main-inner">
       <div class="inner"> 
            <div class="t"></div>
            <h3> additional information</h3>
        <div class="subcolumns">
        <div class="subject">
            <ul>
             <li>....</li> 
             <li>....</li>
             <li>....</li>
             <li>....</li>
            </ul>
       </div>
     </div>
     </div>
     </div> 
```

我正在尝试获取文本`div class='subject'`

尝试过这样的事情：`div[class='tools-col-right .subject']` 但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:45:46.737

有无数种方式。哪个可能有效取决于您的整个页面标记（您只提供了页面的摘录，没有其他`.inner`元素）。

```
#ctl00_ctl00_ContentControl3_phContent .inner {…}

.about .inner {…}

.main-inner .inner {…}

#top-container .inner {…} 
```

* * *

**更新代码后**编辑：****

 **现在类中只有一个元素`subject`。同样，如果没有您的整个标记（包含具有相同类的其他元素），就不可能给您一个安全的答案。在您的示例中，以下每个选择器都应该起作用：

```
.subject {…}
.subcolumns .subject {…}
.inner .subject {…}
.main-inner .subject {…}
.subcr .subject {…}
.tools-col-right .subject {…} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:12:17.980

此选择器将选择该元素：

```
.tools-col-right > .subject 
```**

# css - 嵌套块？在块底部添加文本

> ID：13195744
> 
> 赞同：1
> 
> 时间：2012-11-02T13:01:10.127
> 
> 标签：css, block

我需要在块的底部添加一些单词。.label 是块。里面是一个.label_title，下面是图片/链接，也是一个块。在图片/链接下需要一个简短的描述，但我希望它留在 .label 块中。我试着用

.label 但它没有显示。我不确定这是因为 css 还是我不能嵌套块（

) 在块 (.label_seo1_1) 下方的块 (.label) 内。抱歉，如果这令人困惑，我不知道该怎么说。基本上我想在.label_seo1_1 下的.label 块底部添加一个段落。我粘贴了我当前使用的 css 代码和 html。

尝试图形化描述。

```
*********.label*********************
*    .label_tile                   *
*   **Link/picture(block**         *  
*   ****************               *
*      ****Want to add text****    *
************************************

 .label {
display: block;
float: left;
width: 160px;
height: 200px;
}

 .label_title {

font-size: 12px;
line-height: 14px;
height: 15px;
text-align: center;
font-weight: bold;
color: #fff;
}

 .label_seo1_1{
width: 150px;
height: 155px;
display: block;
margin: 0 auto;
}

 .label_seo1_1 {
background: url('images/label_seo1_1.png') no-repeat;   
}

 <div class="label">
<div class="label_title">6000 Blog Comments</div>
      <a class="label_seo1_1" href="<?php echo esc_url( home_url( '/6000-blog-           comments/' ) ); ?>"></a>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:34:31.537

为 .label 使用垂直对齐属性

```
vertical-align:text-bottom; 
```

[小提琴](http://jsfiddle.net/elen/Hrx2C)

# ios - iOS SDK和模拟器的区别

> ID：13195745
> 
> 赞同：0
> 
> 时间：2012-11-02T13:01:11.660
> 
> 标签：ios, ios-simulator

我的应用程序以 iOS 5.1 为目标。我正在针对**iPhone 5.1 Simulator**运行，但我注意到我的项目被列为**1 target, iOS SDK 6.0**。

部署目标列为 5.1。

SDK和模拟器目标有什么区别？我应该使用 5.1 SDK，如果是，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:11:28.890

SDK 代表您可以使用的 API。部署目标是您证明它将在其上运行的最低版本号。

如果 SDK 和部署目标不同，那么您需要注意不要使用旧版本上不可用的任何 API（或者如果该功能不存在，则禁用该功能）。

# java - SPARQL 选择查询在 JENA 中返回意外结果

> ID：13195750
> 
> 赞同：2
> 
> 时间：2012-11-02T13:01:30.113
> 
> 标签：java, sparql, jena

我在我的研究项目中使用 Jena 已经有一段时间了，但是我最近一直在尝试使用 SPARQL 查询来帮助我的程序更有效地完成一些任务。

[我使用 Twinkle ( http://www.ldodds.com/projects/twinkle/](http://www.ldodds.com/projects/twinkle/) )测试了一组查询并得到了想要的结果 - 但是在 Jena 中实现它们时返回了额外的结果。

例如在闪烁

```
SELECT ?x WHERE { ?x rdfs:domain ns:Area .  ?x rdfs:range ns:Structure } 
```

在闪烁时返回 1 个结果（ ns:Contains ），而当在我的程序中使用 Jena 运行时，它会返回另一个属性（ ns:testProperty ），因为范围和域不匹配。我无法弄清楚为什么会出现这种差异，任何指针都将不胜感激。

我的Java代码如下：

```
Query q = sparqlQueryGetProperties(s, o);

QueryExecution qexec = QueryExecutionFactory.create(q, m);

try {
    Iterator<QuerySolution> rs = qexec.execSelect();

    for (; rs.hasNext();) {
        QuerySolution soln = rs.next();
        if(soln.contains("x")){
            RDFNode r = soln.get("x");

            Resource rss = r.asResource();

            props.add(rss.getLocalName());
        }
    }
} finally {
    qexec.close();
} 
```

其他信息：Sparql v1.0 Jena Core 2.7.4 Jena ARQ 2.9.4

用于测试的完整查询：

```
PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>  
PREFIX rdfs:<http://www.w3.org/2000/01/rdf-schema#>
PREFIX ns:<http://www.semanticweb.org/ontologies/2012/1/Ontology1328444427428.owl#>   
PREFIX owl: <http://www.w3.org/2002/07/owl#> 

SELECT ?x WHERE { ?x rdfs:domain ns:Area .  ?x rdfs:range ns:Structure } 
```

**更新**

不幸的是，我仍然从 TWINKLE 的测试用例中返回了额外的资源

这是在 Twinkle 和 Jena 上运行的确切 SPARQL 查询：

```
PREFIX  rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX  ns:   <http://www.semanticweb.org/ontologies/2012/1/Ontology1328444427428.owl#>
PREFIX  owl:  <http://www.w3.org/2002/07/owl#>
PREFIX  rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

SELECT  ?prp ?x
WHERE
  { ns:cathedral  ?prp  ?x .
?x        rdf:type  owl:NamedIndividual .
FILTER ( ?prp != ns:hasShape )
} 
```

闪烁的结果：

```
?prp = ns:within ?x = ns:Campus 
```

耶拿的结果：

```
(?prp -> ?x)
sameAs -> cathedral
disjoin -> cathedral
differentFrom -> Cath_point_4  //This particular relationship seems completely random.
topObjectProperty -> cathedral
within -> Campus 
```

这是我正在使用的数据（这是我开发的仅用于测试的本体）：

[http://cgi.csc.liv.ac.uk/~roscminni/ontResources/spatialOntCopy.owl](http://cgi.csc.liv.ac.uk/~roscminni/ontResources/spatialOntCopy.owl)

考虑到 Twinkle 似乎已过时，是否有更好的工具来测试 Twinkle 的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:36:30.780

不同之处在于，在您的 Jena 代码中，您使用`OntModel`while Twinkle 仅使用普通`Model`

在 Jena 内部，对 a 的 SPARQL 查询`Model`转换为`find()`对`Model`. 使用`OntModel`这些`find()`调用将包括推断的三元组，因此会产生额外的结果。

您获得的额外结果`OntModel`取决于您在创建模型时选择的规则集。

# android - 搜索自定义列表视图不起作用

> ID：13195751
> 
> 赞同：0
> 
> 时间：2012-11-02T13:01:36.133
> 
> 标签：android

我正在尝试在自定义 listView 上构建搜索功能，但它不起作用..list 没有根据 EditText 单词更改而更改..

列表占位符.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<EditText 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/edtSearch"
    android:hint="Search"/>
    <ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />
</LinearLayout> 
```

my_custom_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:padding="5dp" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:src="@drawable/icon" />

<FrameLayout
    android:id="@+id/frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Button"
        />

    <LinearLayout
        android:id="@+id/ll1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/a"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/from_user"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/from_user_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>
</FrameLayout>

</LinearLayout> 
```

主.java

```
public class Main extends ListActivity {
/** Called when the activity is first created. */
ImageView img, img1;
private AdapterClass adapter;
private String reviewImageLink;

private static final String TAG = "PRANJAL";
private boolean isImage = false;

String fileName[] = new String[10];
private String imgurl;

ArrayList<HashMap<String, String>> searchResult;
private EditText edtSearch;
private ListView list;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listplaceholder);
    edtSearch = (EditText) findViewById(R.id.edtSearch);
    list = (ListView) findViewById(android.R.id.list);
    // list = (LinearLayout) findViewById(R.id.list);
    final ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String,        String>>();

    JSONObject json = JSONfunctions
            .getJSONfromURL("http://23.21.228.8/PlutoApp_Beta/consumer_dash/"
                    + "checkIn_confirmation_related_record.php?lat=18.535787&lng=73.891889");
    try {

        JSONArray earthquakes = json.getJSONArray("Display");
        for (int i = 0; i < earthquakes.length(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();

            JSONObject e = earthquakes.getJSONObject(i);

            map.put("Name", e.getString("name"));
            map.put("Vicinity", e.getString("vicinity"));

            map.put("logo", e.getString("logo"));

            imgurl = e.getString("logo");

            // Toast.makeText(getApplicationContext(), imgurl,
            // Toast.LENGTH_SHORT).show();

            imgurl = e.getString("logo");

            // Toast.makeText(getApplicationContext(), imgurl,
            // Toast.LENGTH_SHORT).show();

            DownloadFromUrl(imgurl, i + ".jpg");
            reviewImageLink = imgurl;// getString(R.string.ImageURI);
            URL reviewImageURL;
            fileName[i] = reviewImageLink.substring(reviewImageLink
                    .lastIndexOf("/") + 1);

            // map.put("profile_image_url", fileName[i]);

            map.put("logo", i + ".jpg");

            list.setTextFilterEnabled(true);
            mylist.add(map);
        }
    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    /*final ListView lv = getListView();
    lv.setTextFilterEnabled(true);*/

    searchResult = new ArrayList<HashMap<String, String>>(mylist);

    // adapter = new AdapterClass(Main.this, R.layout.main, mylist);
    adapter = new AdapterClass(Main.this, R.layout.my_custom_layout, mylist);

    // list.setAdapter(adapter);
    setListAdapter(adapter);

    edtSearch.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // get the text in the EditText
            String searchString = edtSearch.getText().toString();
            int textLength = searchString.length();
            searchResult.clear();

            for (int i = 0; i < mylist.size(); i++) {
                String playerName = mylist.get(i).get("Name").toString();

                if (textLength <= playerName.length()) {
                    // compare the String in EditText with Names in the
                    // ArrayList
                    if      (searchString.equalsIgnoreCase(playerName.substring(
                            0, textLength)))
                        Toast.makeText(getApplicationContext(),
                                "Inside if of : " +    playerName, 1000)
                                .show();
                    searchResult.add(mylist.get(i));
                }

            }
            adapter.notifyDataSetChanged();

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }

    });

    /*
     * final ListView lv = getListView(); //lv.setTextFilterEnabled(true);
     * lv.setOnItemClickListener(new OnItemClickListener() { public void
     * onItemClick(AdapterView<?> parent, View view, int position, long id)
     * {
     * 
     * @SuppressWarnings("unchecked") HashMap<String, String> o =
     * (HashMap<String, String>) lv .getItemAtPosition(position);
     * 
     * } });
     */
}

public void DownloadFromUrl(String DownloadUrl, String fileName) {

    try {
        File dir = new File("/sdcard/pluto");

        if (dir.exists() == false) {
            dir.mkdirs();
        }

        URL url = new URL(DownloadUrl); // you can write here any link
        File file = new File(dir, fileName);

        long startTime = System.currentTimeMillis();
        Log.d("DownloadManager", "download begining");
        Log.d("DownloadManager", "download url:" + url);
        Log.d("DownloadManager", "downloaded file name:" + fileName);

        /* Open a connection to that URL. */
        URLConnection ucon = url.openConnection();

        /*
         * Define InputStreams to read from the URLConnection.
         */
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */
        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();
        Log.d("DownloadManager",
                "download ready in"
                        + ((System.currentTimeMillis() - startTime) / 1000)
                        + " sec");

    } catch (IOException e) {
        Log.d("DownloadManager", "Error: " + e);
    }

}

} 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:20:06.250

您没有在 onTextChange 中再次设置适配器。最后在 onTextChange 中添加：

```
setListAdapter(searchResult); 
```

并删除

```
adapter.notifyDataSetChanged(); 
```

# entity-framework-4 - RIA 服务中的时间戳

> ID：13195755
> 
> 赞同：1
> 
> 时间：2012-11-02T13:02:05.480
> 
> 标签：entity-framework-4, concurrency, wcf-ria-services, silverlight-5.0

RIA 服务是否自动处理时间戳属性的更新？即，当我插入或更新时，是否会在不编写任何额外代码的情况下更新时间戳？我认为我所要做的就是在 sql server 中定义时间戳属性和然后在相应的实体数据模型中使用 TimeStamp 属性标记该属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:50:26.440

您描述的场景应该可以工作（如果实体框架配置正确）但是，TimeStamp 属性的更新不是 WCF Ria 服务的责任。该信息应该从您的数据层更新。[但是，WCF Ria 服务将在调用 SubmitChanges 时将使用RoundTripOriginalAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.roundtriporiginalattribute.aspx)或[ConcurrencyCheckAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.concurrencycheckattribute.aspx)或[TimestampAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.timestampattribute.aspx)
修饰的任何属性的原始值往返返回到服务器，因此允许 EF（或您的 orm/数据层对象是否）使用此并发检查信息

# wpf - 以编程方式突出显示组合框项

> ID：13195759
> 
> 赞同：0
> 
> 时间：2012-11-02T13:02:40.330
> 
> 标签：wpf, combobox, highlight

有没有办法以编程方式突出显示组合框项？

属性 IsHighlighted 没有 setter((。改变样式是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:18:39.780

If you goal is to select rather than highlight (the IsHighlighted property is used to indicate a selected item), you can just set the `IsSelected` property or the `SelectedItem` or `SelectedValue` of the parent ComboBox.

# java - 如何在收到 FIN 数据包后强制 CXF 客户端断开连接

> ID：13195760
> 
> 赞同：1
> 
> 时间：2012-11-02T13:02:43.097
> 
> 标签：java, networking, tcp, cxf, mule

我有一个 CXF 生成的客户端，它成功调用了 Web 服务并接收到响应，但是客户端坐下来等待并且在读取超时到期之前不会断开连接。

使用wireshark我发现服务器发送一个TCP FIN数据包并返回一个ACK然后断开连接，但是我的客户端然后发送它的FIN数据包并坐下来等待一个永远不会出现的ACK响应。

有没有办法配置 cxf 客户端来处理这种情况？

我已经使用 .NET 客户端对此进行了测试，它似乎无需等待即可处理它。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:52:18.170

似乎是正在使用的 CXF 版本（2.5.1）中的一个错误。

它已在更高版本 2.5.6 及更高版本中解决..

# c# - 在通过按键盘上的 Enter 触发单击事件之前，我可以使用哪个事件来触发对标签的更新？

> ID：13195761
> 
> 赞同：2
> 
> 时间：2012-11-02T13:02:44.810
> 
> 标签：c#, .net, xaml, button, click

我有一个应用程序在单击按钮时会进行一些非常复杂的计算。我仍在努力提高此代码的效率，但与此同时，我想通过更新 UI 上的标签向用户提供反馈，以显示该按钮已被单击并且计算正在进行中。

在点击事件完成之前，UI 不会更新，因此我必须将代码放入一个事件中，该事件在触发点击事件的代码之前被调用。

到目前为止，我正在使用在`PreviewMouseLeftButtonDown`执行 click 事件之前调用的事件来更新标签。这适用于鼠标单击。
但是，如果用户在按钮处于焦点时按 Enter 键，则似乎从未触发`PreviewKeyDown`AND`KeyDown`事件，或者至少在触发 Click 事件之前未触发。

当按下回车键时，我可以使用什么事件来更新标签，或者您知道在运行 Click Event 的代码之前我可以让标签更新的另一种方法吗？

更新：我注意到`PreviewKeyDown`事件是在事件之前触发的，但是在事件代码运行`click`之前我没有看到标签更新。`click`我看不出我的代码有什么问题。

```
 private void Button1_KeyDown(object sender, KeyEventArgs e)
    {
        try
        {
            if (e.Key == Key.Return || e.Key == Key.Enter)
            {
                lblMessage.Content = "Loading...";
            }
        }
        catch (Exception)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:31:45.623

我理解您的困境，我听起来好像您正在将您的用户界面线程与业务逻辑捆绑在一起。更有效的解决方案是创建一个新线程并在那里运行您的计算。您创建计算类，订阅执行代码中的完成事件并启动线程。这样，您可以在执行期间的任何时候设置标签，因为您的业务逻辑在与用户界面不同的线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:25:08.403

为什么不使用按钮的命令属性而不是事件？

该命令由鼠标点击或回车键触发。

[指挥概述](http://msdn.microsoft.com/en-us/library/ms752308.aspx)

[命令绑定](http://msdn.microsoft.com/en-us/library/system.windows.input.commandbinding.aspx)

xml:

```
 <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Button Grid.Row="0" Command="{Binding CalculationCommand}" Content=" Calculate" />
        <Label Grid.Row="1" Content="{Binding StateText}" />
    </Grid> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    private string _stateText;

    public RelayCommand CalculationCommand { get; set; }

    public string StateText
    {
        get { return _stateText; }
        set { _stateText = value;  OnPropertyChanged("StateText");}
    }

    public ViewModel()
    {
        CalculationCommand = new RelayCommand(OnCalculate);
        StateText = string.Empty;
    }

    private void OnCalculate(object obj)
    {
        StateText = "Please wait, calculating.";

        var context = TaskScheduler.Current;

        Task.Factory.StartNew(() =>{
                                        //Calculating Logic goes here   
                                   }).ContinueWith(x =>
                                                       {
                                                           StateText = "Done.";
                                                       },context);

    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

我正在使用 Josh Smith[文章中的 RelayCommand](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:28:12.860

您可以尝试使用[`.Refresh()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)来强制标签在编辑后更新。然后您无需担心绑定不同的事件 - 只需更改您需要的任何内容，调用`.Refresh()`，然后开始主要处理。

# cuda - GPU 2D 共享内存动态分配

> ID：13195766
> 
> 赞同：8
> 
> 时间：2012-11-02T13:03:00.360
> 
> 标签：cuda, gpu, gpgpu, nvidia

我知道使用 1D 数组时的动态分配，但是使用 2D 数组时如何做到这一点？

```
myKernel<<<blocks, threads,sizeofSharedMemoryinBytes>>>();
         ....

__global__ void myKernerl(){
 __shared__ float sData[][];
     .....
} 
```

假设我要分配一个 2D 共享内存数组：

```
__shared__ float sData[32][32]; 
```

如何动态完成？将会：

```
myKernel<<< blocks, threads, sizeof(float)*32*32 >>>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:49:19.367

正如您正确编写的那样，您必须在每个内核调用执行配置之前指定动态分配的共享内存的大小（在 中`<<<blocks, threads, sizeofSharedMemoryinBytes>>>`）。这指定了共享内存中除了静态分配的内存之外，为此调用动态分配的每个块的字节数。恕我直言，没有办法访问二维数组这样的内存，你必须使用一维数组并像二维一样使用它。最后想想，不要忘记 qualifier `extern`。所以你的代码应该是这样的：

```
 sizeofSharedMemoryinBytes = dimX * dimY * sizeof(float);

   myKernel<<<blocks, threads,sizeofSharedMemoryinBytes>>>();
     ....

   __global__ void myKernerl() {

       extern __shared__ float sData[];
       .....
       sData[dimX * y + x] = ...
   } 
```

# java - 如何使maven构建依赖项目

> ID：13195767
> 
> 赞同：5
> 
> 时间：2012-11-02T13:03:00.767
> 
> 标签：java, maven, build, dependencies

我有几个依赖于其他项目的项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>group1</groupId>
<artifactId>artifact1<artifactId>
<name>RealtyRegistry</name>
<packaging>war</packaging>
<version>1.0.0-SNAPSHOT</version>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>group1</groupId>
        <artifactId>artifact2</artifactId>
        <version>1.0.0</version>
    </dependency>
    <dependency>
        <groupId>group1</groupId>
        <artifactId>artifact3</artifactId>
        <version>1.0.0</version>
    </dependency>
</dependencies> 
```

它们都是我同时开发的。我将版本添加到所有项目的文件中，我需要与依赖项目一起构建主项目。对于没有树结构的项目如何做到这一点？

项目层次结构可以有 2 个或更多覆盖树，例如：A 依赖于 B、C；D取决于C，E；A 和 D 是独立的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:47:16.953

您可以使用“模块”一起构建多个项目。通常，您可以通过创建一个“母”项目并使用标签`<packaging>pom</packaging>`将您的真实项目添加为模块来完成此操作。`<modules>`然后，当您构建“母亲”项目时，所有模块都会以正确的顺序自动构建。

这是[Maven by Example](http://www.sonatype.com/books/mvnex-book/reference/multimodule-sect-simple-parent.html)一书中的一个示例：

```
<groupId>org.sonatype.mavenbook.multi</groupId>
<artifactId>simple-parent</artifactId>
<version>1.0</version>
<packaging>pom</packaging>

<modules>
    <module>simple-weather</module>
    <module>simple-webapp</module>
</modules> 
```

请注意，这要求您将模块放在相应命名的子文件夹中。例如，您将在某个文件夹中有“母亲”pom：

```
/.../my-project/ 
```

和模块：

```
/.../my-project/simple-weather/
/.../my-project/simple-webapp/ 
```

如需更多信息，请阅读本书的[第 6 章。一个多模块项目](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)，可在 Sonatype 网站上免费获取。

# c# - MVC 文件上传 UnauthorizedAccessException

> ID：13195770
> 
> 赞同：1
> 
> 时间：2012-11-02T13:03:16.257
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我有这个代码：

```
[HttpPost]
    public ActionResult Edit(Photograph photo, HttpPostedFileBase image)
    {

        if (ModelState.IsValid)
        {
            if (image != null)
            {
                byte[] imageData = new byte[image.ContentLength];
                image.InputStream.Read(imageData, 0, image.ContentLength);
                System.IO.File.WriteAllBytes(HttpContext.Server.MapPath("~/Content/Images"), imageData);
            }

            repository.SavePhotograph(photo);
            TempData["message"] = string.Format("{0} has been saved", photo.Name);
            return RedirectToAction("Index");
        }
        else
        {
            return View(photo);
        }
    } 
```

它的目的是从表单上传照片并将其保存在服务器（本地服务器）中。我给了文件夹“Visual Studio 2010”，所有项目都保留了网络服务用户权限和 IIS_IUSRS 组权限。我还以管理员身份运行 Visual Studio。

出于某种原因，它仍然不允许我将文件保存到该位置。该位置位于 {Project_Name\Content\Images} 下的项目文件夹中。我如何让它在那里保存文件？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:57:33.820

它给我这个错误的原因是因为方法：

```
System.IO.File.WriteAllBytes() 
```

获取文件和数据的路径。

我正在传递一个文件夹

```
System.IO.File.WriteAllBytes(HttpContext.Server.MapPath("~/Content/Images"), imageData); 
```

我应该传递一个文件：

```
System.IO.File.WriteAllBytes(String.Format("{0}{1}", HttpContext.Server.MapPath("~/Content/Images"), image.FileName), imageData); 
```

现在我的存储库出现错误，所以我正在调查：）我非常喜欢编码....；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:33:09.067

> 出于某种原因，它仍然不允许我将文件保存到该位置。

你有任何错误吗？如果是，请在此处发布完整的错误。

**案例 I：**如果您使用 Visual Studio 运行 MVC 应用程序，请确保使用“**以管理员身份运行**”选项运行 Visual Studio。

**案例二：**如果您在 IIS 上运行 MVC 应用程序。转到保存图像的文件夹。即授予“IIS_IUSRS”用户~~完全控制~~“修改”权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:41:22.030

RE：带有“System.IO.File.WriteAllBytes”的行...您是否要保存到目录中？它在哪里为上传的文件选择文件名？

# javascript - 使用 jquery .parent() 选择元素

> ID：13195782
> 
> 赞同：0
> 
> 时间：2012-11-02T13:03:51.580
> 
> 标签：javascript, jquery, dom-traversal

我有这个标记，如下所示：

```
<div id="content_area">
<table width="100%" cellspacing="0" cellpadding="0" border="0" align="center">
<tbody>
  <tr>
    <td width="100%" valign="top">
      <div id="some_id"> </div>
    </td>
  </tr>
   </tbody>
</table>
</div> 
```

现在我想使用 id 为**“some_id”的 div 获取 id 为****“content_area”**的 div，并使用 jquery设置**“content_area”**的样式。在这种情况下，我如何使用**“.parent()**遍历 upwars ？表结构会成为障碍吗？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:07:24.227

id 是唯一的。如果不是，请将其更改为类。

如果它们是：

```
$('#content_area').css(); 
```

如果您将其更改为类：

```
$('#some_id').parent('.content_area').css(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:10:30.643

[最接近的 jQuery API](http://api.jquery.com/closest/)

> **`.closest( selector )`返回：jQuery**
> 
> 描述：对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:06:55.820

[jQuery.parent()](http://api.jquery.com/parent/)

```
$("#some_id").parent(); 
```

将返回元素`<td width="100%" valign="top">`

* * *

[jQuery.parents()](http://api.jquery.com/parents/)

```
$("#some_id").parents("#content_area"); 
```

将返回元素`<div id="content_area">`

* * *

[jQuery.css()](http://api.jquery.com/css/)

```
$("#some_id").parents("#content_area").css({ color: "#333", height: "100%" }); 
```

将使用其父元素`<div id="content_area">`的字体颜色`#333333`和 100% 的高度来设置元素的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:06:12.217

很确定它很简单

```
$("#some_id").parent().parent().parent().css("some-style", "value"); 
```

不知道为什么你不想这样做：

```
$("#content_area").css("some-style", "value"); 
```

如果是因为您有多个具有相同 ID 的 div，请考虑切换到使用类。每个 ID 在任何给定页面上只能出现一次。******

# java - 使用 jsf 追加问题的计算器应用程序

> ID：13195784
> 
> 赞同：2
> 
> 时间：2012-11-02T13:04:01.810
> 
> 标签：java, jsf

我使用 jsf 和一个类制作了这个计算器程序

我想附加输入的值，例如点击 1 三次得到 111

此处输入的值显示为 1，而附加值始终相同 (1) 我在课堂上有 @ApplicationScoped

```
<h:inputText value="#{mbcalculator.result}"/>
    <h:commandButton value="1" action="#{mbcalculator.setNumber}">
        <f:setPropertyActionListener target="#{mbcalculator.enteredvalue}"
            value="1" />

       //mbcalculator class

    public String setNumber() {
    appendNumber(enteredvalue);

    return null;
}

public void appendNumber(String x) {
    StringBuffer buffer = new StringBuffer();
    buffer.append(x + "");
    String str = buffer.toString();
    appendedvalue = Integer.parseInt(str);
            result = appendedvalue;

    System.out.println("enter"+enteredvalue);
    System.out.println("append"+appendedvalue);
    System.out.println("result"+result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:18:22.633

在`appendNumber()`你覆盖整个`result`而不是附加到它。

```
result = appendedvalue; 
```

通过真正附加到`result`.

```
public void appendNumber(String x) {
    result = Integer.parseInt(result + x);
} 
```

# sql - 触发器是否有可能不触发？

> ID：13195785
> 
> 赞同：0
> 
> 时间：2012-11-02T13:04:05.930
> 
> 标签：sql, sql-server, sql-server-2005, triggers

在三个不同的表上，我有单独`INSERT`的`UPDATE`和`DELETE`触发器。

我肯定知道它们按预期工作（尝试添加、删除、更新并确认更改到日志表）。但是，恰好删除或添加了行，而我的日志表没有任何内容。

所以我的问题是：例如，是否可以在不触发启用的 INSERT 触发器的情况下添加记录？

这是在 SQL Server 2005 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:23:48.123

如果执行的查询禁用了特定触发器的使用，例如通过使用

```
DISABLE TRIGGER { [ schema_name . ] trigger_name [ ,...n ] | ALL }
ON { object_name | DATABASE | ALL SERVER } [ ; ] 
```

此外，正如 Damien 指出的那样，在某些情况下，您的触发器可能仅适用于单个记录。错误（简化示例：

```
 UPDATE table SET field = value WHERE PK = (SELECT PK FROM inserted) 
```

更好的：

```
 UPDATE table SET field = value WHERE PK IN (SELECT PK FROM inserted) 
```

向我们展示您的触发器，我们会弄清楚的。

# java - 从整数的Iterable中获取排序数组的最快方法

> ID：13195787
> 
> 赞同：3
> 
> 时间：2012-11-02T13:04:08.660
> 
> 标签：java

> **可能重复：**
> [形成和排序正整数数组的最快策略](https://stackoverflow.com/questions/12063849/fastest-strategy-to-form-and-sort-an-array-of-positive-integers)

从未排序的整数迭代中获取排序数组的最快方法是什么？目前，我通过迭代可迭代的 n 次（其中 n 是列表的大小）每次从可迭代中获得最高值并将其放入数组中来做到这一点。但我正在寻找清理它并让一些好的图书馆为我做这件事。

可能我不介意为此目的使用任何流行的库，如 Guava 等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T14:32:53.677

*它与assylias*已经提供的答案基本相同，但如果您在类路径中有 Google Guava，您可以将其缩短为：

```
import java.util.Collections;
import java.util.List;

import com.google.common.collect.Lists;

...

List list = Lists.newArrayList(iterable);
Collections.sort(list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:56:43.600

正如所评论的，最简单且可能最快的方法是填充集合并对其进行排序 - 在这种情况下，我将简单地使用 ArrayList：

```
List<Integer> sortedList = new ArrayList<>();
for (Integer i : yourIterable) {
    sortedList.add(i);
}
Collections.sort(sortedList); 
```

如果您事先知道 Iterable 的大小，则可以使用正确的大小初始化 arraylist 以提高效率：

```
List<Integer> sortedList = new ArrayList<>(size); 
```

# php - SQL Select，根据结果编号不同颜色

> ID：13195789
> 
> 赞同：1
> 
> 时间：2012-11-02T13:04:14.433
> 
> 标签：php, sql, css, select, html

我有一个 SQL SELECT 语句，执行此语句后，我有一个 While 语句来显示 div 中的每条记录。这些 div 都在彼此之下，我希望这些 div 的颜色交替出现。所以像这样：

```
Result 1 = white div
Result 2 = grey div
Result 3 = white div
Result 4 = grey div. 
```

我实际上不知道如何做到这一点，有人可以帮助我吗？谢谢！

编辑：我实际上可以提出这个理论，偶数白色，奇数灰色，但是我该如何编码呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:07:26.487

你可以用 css 来做，像这样：

```
.resultdiv:nth-child(odd) {
   background-color: white;
}

.resultdiv:nth-child(even) {
   background-color: grey;
} 
```

这将起作用，只需确保您添加`class="resultdiv"`到您在 while 循环中创建的所有 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:36:48.087

您可以在 while 循环中有一个布尔变量，您可以在其中获取结果集以确定该行是偶数还是奇数，并根据该变量更改 DIV 的颜色。

例子：

```
$alt_row = false;

while ($row = $query->fetch_assoc())
{

    $alt_row = (!$alt_row) ? true : false;

    if ($alt_row) {
        echo '<div class="alt">Content</div>';  
    } else {
        echo '<div>Content</div>';
    }
} 
```

不过，我不喜欢混合我的逻辑和表示代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:06:36.753

使用变量来改变颜色。

从白色开始，在打印结果时使用变量上的颜色并将其更改为另一种颜色（当它是灰色时将其更改为白色，当它是白色时将其更改为灰色）。

# python - Plone 中的异步任务查询 Python 包索引

> ID：13195791
> 
> 赞同：0
> 
> 时间：2012-11-02T13:04:17.443
> 
> 标签：python, asynchronous, plone, zope, pypi

我想定期（每小时？）从 Plone 查询 Python Package Index API。相当于：

```
$ for i in `yolk -L 24 | awk '{print $1}'` # get releases made in last 24 hours
do
  # search for plone classifier
  results=`yolk -M $i -f classifiers  | grep -i plone`
  if [ $results ]; then
    echo $i
  fi
done 
```

结果：

```
collective.sendaspdf
gocept.selenium
Products.EnhancedNewsItemImage
adi.workingcopyflag
Products.SimpleCalendarPortlet
Products.SimpleCalendar 
```

然后我想在模板中显示这些信息。我很乐意，至少在最初，避免不得不坚持结果。

如何在模板中显示结果而无需等待查询完成？我知道有一些可用的异步包，例如：

*   [plone.app.async](http://pypi.python.org/pypi/plone.app.async)

但我不确定一般方法应该是什么（假设我可以安排一个异步任务，我可能需要将结果存储在某个地方。如果我必须存储结果，我更喜欢“轻量级”，例如注释)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:27:06.187

低，低技术版本怎么样？

使用 cron-job 运行查询，将其放入临时文件中，然后将文件移动到已知位置，文件名中带有时间戳。

然后，当有人请求相关页面（显示新包）时，只需读取该位置的最新文件：

```
filename = sorted(os.listdir(location))[-1]
data = open(os.path.join(location, filename)).read() 
```

通过使用移动，您可以保证指定位置的最新文件始终是完整文件，避免读取部分结果。

# java - 删除目录（但不是目录）中的所有文件 - 一个班轮解决方案

> ID：13195797
> 
> 赞同：245
> 
> 时间：2012-11-02T13:04:49.957
> 
> 标签：java, file-io, apache-commons-io

我想删除 ABC 目录中的所有文件。

当我尝试使用它时，`FileUtils.deleteDirectory(new File("C:/test/ABC/"));`它也会删除文件夹 ABC。

是否有一种单一的解决方案，我可以删除目录内的文件但不能删除目录？

* * *

## 回答 #1

> 赞同：417
> 
> 时间：2012-11-02T13:10:39.843

```
import org.apache.commons.io.FileUtils;

FileUtils.cleanDirectory(directory); 
```

在同一个文件中可以使用此方法。这也将递归地删除它们下的所有子文件夹和文件。

文件：[`org.apache.commons.io.FileUtils.cleanDirectory`](http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#cleanDirectory(java.io.File))

* * *

## 回答 #2

> 赞同：294
> 
> 时间：2012-11-02T13:09:33.913

你的意思是喜欢吗？

```
for(File file: dir.listFiles()) 
    if (!file.isDirectory()) 
        file.delete(); 
```

这只会删除文件，而不是目录。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-11-18T08:49:18.847

彼得劳里的答案很棒，因为它很简单，不依赖于任何特殊的东西，这是你应该这样做的方式。如果您还需要删除子目录及其内容的内容，请使用递归：

```
void purgeDirectory(File dir) {
    for (File file: dir.listFiles()) {
        if (file.isDirectory())
            purgeDirectory(file);
        file.delete();
    }
} 
```

要备用子目录及其内容（您的问题的一部分），请修改如下：

```
void purgeDirectoryButKeepSubDirectories(File dir) {
    for (File file: dir.listFiles()) {
        if (!file.isDirectory())
            file.delete();
    }
} 
```

或者，因为您想要一个单行解决方案：

```
for (File file: dir.listFiles())
    if (!file.isDirectory())
        file.delete(); 
```

使用外部库来完成这样一个微不足道的任务并不是一个好主意，除非你需要这个库来做其他事情，在这种情况下，最好使用现有的代码。无论如何，您似乎都在使用 Apache 库，因此请使用它的`FileUtils.cleanDirectory()`方法。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2016-11-21T19:15:28.603

# Java 8 流

这只会删除**ABC**中的文件（子目录不变）：

```
Arrays.stream(new File("C:/test/ABC/").listFiles()).forEach(File::delete); 
```

* * *

这只会删除**ABC**（和子目录）中的文件：

```
Files.walk(Paths.get("C:/test/ABC/"))
                .filter(Files::isRegularFile)
                .map(Path::toFile)
                .forEach(File::delete); 
```

^ 此版本需要处理 IOException

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-05-22T21:35:59.490

或者在 Java 8 中使用它：

```
try {
  Files.newDirectoryStream( directory ).forEach( file -> {
    try { Files.delete( file ); }
    catch ( IOException e ) { throw new UncheckedIOException(e); }
  } );
}
catch ( IOException e ) {
  e.printStackTrace();
} 
```

遗憾的是异常处理如此庞大，否则将是单行...

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-06-13T13:25:33.640

```
public class DeleteFile {
    public static void main(String[] args) {
        String path="D:\test"; 
        File file = new File(path);
        File[] files = file.listFiles(); 
        for (File f:files) 
        {if (f.isFile() && f.exists) 
            { f.delete();
system.out.println("successfully deleted");
            }else{
system.out.println("cant delete a file due to open or error");
} }  }} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-10-16T19:59:20.120

### `rm -rf`比. *_* _`FileUtils.cleanDirectory`

不是单线解决方案，但经过广泛的基准测试后，我们发现 using`rm -rf`比 using 快几倍`FileUtils.cleanDirectory`。

当然，如果您有一个小的或简单的目录，那没关系，但在我们的例子中，我们有多个千兆字节和深度嵌套的子目录，`FileUtils.cleanDirectory`使用`rm -rf`.

这是我们的粗略 Java 实现：

```
// Delete directory given and all subdirectories and files (i.e. recursively).
//
static public boolean clearDirectory( File file ) throws IOException, InterruptedException {

    if ( file.exists() ) {

        String deleteCommand = "rm -rf " + file.getAbsolutePath();
        Runtime runtime = Runtime.getRuntime();

        Process process = runtime.exec( deleteCommand );
        process.waitFor();

        file.mkdirs(); // Since we only want to clear the directory and not delete it, we need to re-create the directory.

        return true;
    }

    return false;

} 
```

如果您正在处理大型或复杂的目录，则值得尝试。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-12T12:56:55.423

我认为这会起作用（基于 NonlinearFruit 先前的答案）：

```
Files.walk(Paths.get("C:/test/ABC/"))
                .sorted(Comparator.reverseOrder())
                .map(Path::toFile)
                .filter(item -> !item.getPath().equals("C:/test/ABC/"))
                .forEach(File::delete); 
```

干杯!

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-25T13:48:13.340

另一个 Java 8 Stream 解决方案删除文件夹的所有内容，包括子目录，但不删除文件夹本身。

用法：

```
Path folder = Paths.get("/tmp/folder");
CleanFolder.clean(folder); 
```

和代码：

```
public interface CleanFolder {
    static void clean(Path folder) throws IOException {

        Function<Path, Stream<Path>> walk = p -> {
            try { return Files.walk(p);
        } catch (IOException e) {
            return Stream.empty();
        }};

        Consumer<Path> delete = p -> {
            try {
                Files.delete(p);
            } catch (IOException e) {
            }
        };

        Files.list(folder)
            .flatMap(walk)
            .sorted(Comparator.reverseOrder())
            .forEach(delete);
    }
} 
```

涉及 Files.walk 或 Files.delete 的每个流解决方案的问题在于，这些方法会引发 IOException，这在流中处理起来很痛苦。

我试图创建一个尽可能简洁的解决方案。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-12-24T06:57:40.740

要从目录中删除所有文件，请说“C:\Example”

```
File file = new File("C:\\Example");      
String[] myFiles;    
if (file.isDirectory()) {
    myFiles = file.list();
    for (int i = 0; i < myFiles.length; i++) {
        File myFile = new File(file, myFiles[i]); 
        myFile.delete();
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-24T18:43:16.990

```
package com;
import java.io.File;
public class Delete {
    public static void main(String[] args) {

        String files; 
        File file = new File("D:\\del\\yc\\gh");
        File[] listOfFiles = file.listFiles(); 
        for (int i = 0; i < listOfFiles.length; i++) 
        {
            if (listOfFiles[i].isFile()) 
            {
                files = listOfFiles[i].getName();
                System.out.println(files);
                if(!files.equalsIgnoreCase("Scan.pdf"))
                {
                    boolean issuccess=new File(listOfFiles[i].toString()).delete();
                    System.err.println("Deletion Success "+issuccess);
                }
            }
        }
    }
} 
```

如果要删除所有文件，请删除

```
if(!files.equalsIgnoreCase("Scan.pdf")) 
```

声明它将起作用。

# regex - VS 2010 的 RegEx 查找 #XXXXXX 其中 X 是十六进制数

> ID：13195800
> 
> 赞同：0
> 
> 时间：2012-11-02T13:05:09.593
> 
> 标签：regex, visual-studio-2010

我应该为 VS 2010 使用什么正则表达式来查找任何“#12345A”字符串 - 6 个符号（十六进制颜色），两边都带有“”？

我已经尝试 [^0-9]#[0-9]{6}[^0-9] 找到至少 6 个符号，但如果失败...

我正在尝试在项目中查找所有自定义颜色（非自定义颜色之前有 8 个带有 # 的符号）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:08:57.840

那么首先，您需要包含十六进制字母，其次为什么不使用`"`而不是`not a digit`. 此外，VS 的量词与平常有些不同，因此您需要转义`#`（因为否则它等同于`+`量词）并且重复的工作方式如下`^6`：

```
"\#[0-9a-fA-F]^6" 
```

[看到这个。](https://stackoverflow.com/a/3350929/1633117)

# ios - 无法应用 iOS MDM 配置文件

> ID：13195801
> 
> 赞同：1
> 
> 时间：2012-11-02T13:05:20.283
> 
> 标签：ios, mdm

这可能是一个非常愚蠢的问题，但现在已经让我难住了好几天。我已经设置了一个 MDM 服务器。然后通过 iPCU（iPhone 配置实用程序），我推送带有相关签入和服务器 URL 的配置文件。我还添加了安装在我的机器上的凭据证书并将其指定为身份。

但是，将配置文件推送到设备后，出现以下错误...

```
MDM: Cannot Authenticate. Error: NSError:

Desc   : A transaction with the server at https://heshang.abc.lk/MDMServer/checkin has 
failed with the status 404.
US Desc: A transaction with the server at https://heshang.abc.lk/MDMServer/checkin has failed with the status 404.
Domain : MCHTTPTransactionErrorDomain
Code   : 23001
Type   : MCFatalError
Params : (
    "https://heshang.abc.lk/MDMServer/checkin",
    404
) 
```

我检查了签入网址是否可以通过设备访问，并且可以。那么是什么导致我得到这个身份验证错误？这也不是 SSL 错误，因为我已经通过设备（iPad）访问了 MDM 服务器，并且这样做时我没有收到 HTTPS 错误。

是什么导致此身份验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:28:35.170

设备`HTTP PUT`在联系 MDM 服务器时使用。您能否验证您的 Web 服务器已配置为`HTTP PUT`正确处理/路由请求？

# google-api - NoMethodError：Google::APIClient:Class 与 google-api-client v0.5.0 的未定义方法“JWTAsserter”

> ID：13195804
> 
> 赞同：1
> 
> 时间：2012-11-02T13:05:35.150
> 
> 标签：google-api

我正在尝试授权应用程序拥有的（服务）用户。我在控制台中这样做：

```
client = Google::APIClient.new
key = Google::APIClient::PKCS12.load_key('/path/to/privatekey.p12', 'notasecret')
service_account = Google::APIClient::JWTAsserter('me@developer.gserviceaccount.com','https://www.googleapis.com/auth/prediction',key) 
```

最后一步失败：

> NoMethodError：Google::APIClient:Class 的未定义方法“JWTAsserter”

我看到版本 < 0.44 中报告了类似的问题，但我使用的是 v 0.5.0

# mysql - 在 Spring MVC 中使用 Spring 表单向多个表添加数据

> ID：13195806
> 
> 赞同：0
> 
> 时间：2012-11-02T13:05:42.277
> 
> 标签：mysql, spring, hibernate, spring-mvc, jspx

我有以下数据库架构，我需要使用单个视图[http://i.stack.imgur.com/3HXhC.png](http://i.stack.imgur.com/3HXhC.png)将数据添加到所有三个表中（由于 stackoverflow 规则，我无法直接链接图像）。

我希望实现的是创建一个订单，为其提供一个 Workshop 订单 ID，并将其链接到 LineItems，这将让用户从 Inventory 表中指定要添加到订单中的项目数量。

我可以在我的数据库中创建一个车间订单，并使用车间订单 id 创建一个 lineitem，并将库存项目中的 id 和数量添加到 lineitem 表中，然后使用附加的代码显示每个 lineitem 订单行，总计商品数量，订单中的商品，总价，客户名称等。

如何创建一个视图，让我以这种方式创建订单？我想象的流程是：创建车间订单->从库存中添加行项目->保存订单。

在 Spring 和 Hibernate 上工作了几周，我还没有真正想出一个聪明的方法来解决这个问题，但希望这里有人知道。无论如何，请随意批评我的数据库方案、我的课程和其他任何事情。这可能是一个愚蠢的设计，不太适合实际的生产系统。

我已经附上了与此相关的主要课程。

LineItems.java

```
@Entity
@Table(name = "LINE_ITEMS")
@AssociationOverrides({
@AssociationOverride(name = "pk.inventory", 
    joinColumns = @JoinColumn(name = "INVENTORY_Id")),
@AssociationOverride(name = "pk.workshop", 
    joinColumns = @JoinColumn(name = "WORKSHOP_ORDERS_Id"))
})
public class LineItems implements Serializable {

private static final long serialVersionUID = 5703588914404465647L;

@EmbeddedId
private LineItemsPK pk = new LineItemsPK();

private int quantity;

public LineItems() {

}

public LineItemsPK getPK() {
    return pk;
}

public void setPK(LineItemsPK pk) {
    this.pk = pk;
}

@Column(name = "WORKSHOP_ORDERS_Id", nullable=false, updatable=false,    
    insertable=false)
public Long getWorkshopOrdersId() {
    return getPK().getWorkshop().getId();
}

@Column(name = "Id")
@JoinColumn(name="INVENTORY_Id", nullable=false, updatable=false, insertable=false)
public Long getInventoryId() {
    return getPK().getInventory().getId();
}

@ManyToOne
public Workshop getWorkshop() {
    return getPK().getWorkshop();
}

public void setWorkshop(Workshop workshop) {
    getPK().setWorkshop(workshop);
}

@ManyToOne
@JoinColumn(name = "INVENTORY_Id")
public Inventory getInventory() {
    return getPK().getInventory();
}

public void setInventory(Inventory inventory) {
    getPK().setInventory(inventory);
}

public int getQuantity() {
    return this.quantity;
}

public void setQuantity(int quantity) {
    this.quantity = quantity;
}

public boolean equals(Object o) {
    if (this == o) {
        return true;
    }

    if (o == null || getClass() != o.getClass()) {
        return false;
    }

    LineItems that = (LineItems) o;

    if (getPK() != null ? !getPK().equals(that.getPK())
            : that.getPK() != null) {
        return false;
    }

    return true;
}

public int hashCode() {
    return (getPK() != null ? getPK().hashCode() : 0);
}
} 
```

LineItemsPK.java

```
@Embeddable
public class LineItemsPK implements Serializable {

private static final long serialVersionUID = -4285130025882317338L;

@ManyToOne
private Inventory inventory;
@ManyToOne
private Workshop workshop;

public Workshop getWorkshop() {
    return workshop;
}

public void setWorkshop(Workshop workshop) {
    this.workshop = workshop;
}

public Inventory getInventory() {
    return inventory;
}

public void setInventory(Inventory inventory) {
    this.inventory = inventory;
}

@Override
public boolean equals(Object o) {
    if(this == o) {
        return true;
    }

    if(o == null || getClass() != o.getClass()) {
        return false;
    }

    LineItemsPK that = (LineItemsPK) o;

    if(workshop != null ? !workshop.equals(that.workshop) : that.workshop != null) {
        return false;
    }

    if(inventory != null ? !inventory.equals(that.inventory) : that.inventory != null) {
        return false;
    }

    return true;
}

@Override
public int hashCode() {
    int result;
    result = (workshop != null ? workshop.hashCode() : 0);
    result = 31 * result + (inventory != null ? inventory.hashCode() : 0);

    return result;
}
} 
```

Workshop.java

```
@Entity
@Table(name = "WORKSHOP_ORDERS")
public class Workshop implements Serializable {

private static final long serialVersionUID = -8106245965993313684L;

public Long id;
public Long inventoryItemId;
public String workshopService;
public String workshopNotes;
public Long customersId;
public Long paymentId;

private Customer customer;
private Payment payment;

private Set<LineItems> lineItems = new HashSet<LineItems>(0);

public Workshop() {

}

public Workshop(Long inventoryItemId, String workshopService, String workshopNotes,
        Customer customer, Payment payment) {

    this.inventoryItemId = inventoryItemId;
    this.workshopService = workshopService;
    this.workshopNotes = workshopNotes;
    this.customer = customer;
    this.payment = payment;
}

public Workshop(Long inventoryItemId, String workshopService, String workshopNotes,
        Customer customer, Payment payment, Set<LineItems> lineItems) {

    this.inventoryItemId = inventoryItemId;
    this.workshopService = workshopService;
    this.workshopNotes = workshopNotes;
    this.customer = customer;
    this.payment = payment;

    this.lineItems = lineItems;
}

@OneToMany(mappedBy = "pk.workshop", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Set<LineItems> getLineItems() {
    return this.lineItems;
}

public void setLineItems(Set<LineItems> lineItems) {
    this.lineItems = lineItems;
}

@ManyToOne
@JoinColumn(name="CUSTOMERS_Id", nullable = false, insertable = false, updatable = false)
public Customer getCustomer() {
    return customer;
}

public void setCustomer(final Customer customer) {
    this.customer = customer;
}

@OneToOne(cascade = CascadeType.ALL)
@JoinColumn(name="PAYMENT_Id", insertable = false, updatable = false, nullable = false)
public Payment getPayment() {
    return payment;
}

public void setPayment(final Payment payment) {
    this.payment = payment;
}

@Id
@GeneratedValue(strategy = IDENTITY)
@Column(name = "Id", nullable = false)
public Long getId() {
    return id;
}

@Column(name = "InventoryItemId")
public Long getInventoryItemId() {
    return inventoryItemId;
}

@Column(name = "WorkshopService")
public String getWorkshopService() {
    return workshopService;
}

@Column(name = "WorkshopNotes")
public String getWorkshopNotes() {
    return workshopNotes;
}

@Column(name = "CUSTOMERS_Id")
public Long getCustomersId() {
    return customersId;
}

@Column(name = "PAYMENT_Id")
public Long getPaymentId() {
    return paymentId;
}

public void setId(Long id) {
    this.id = id;
}

public void setInventoryItemId(Long inventoryItemId) {
    this.inventoryItemId = inventoryItemId;
}

public void setWorkshopService(String workshopService) {
    this.workshopService = workshopService;
}

public void setWorkshopNotes(String workshopNotes) {
    this.workshopNotes = workshopNotes;
}

public void setCustomersId(Long customersId) {
    this.customersId = customersId;
}

public void setPaymentId(Long paymentId) {
    this.paymentId = paymentId;
}

public String toString() {
    return "Customer id: " + this.customersId + "Notes: " + workshopNotes;
}
} 
```

库存.java

```
@Entity
@Table(name = "INVENTORY")
public class Inventory implements Serializable {

private static final long serialVersionUID = -8907719450013387551L;

private Long id;
private String itemName;
private String itemVendorName;
private Long itemInventoryStatus;
private Double itemBuyPrice;
private Double itemSellPrice;

private Set<LineItems> lineItems = new HashSet<LineItems>(0);

public Inventory() {

}

public Inventory(String itemName, String itemVendorName, Long itemInventoryStatus,
        Double itemBuyPrice, Double itemSellPrice) {
    this.itemName = itemName;
    this.itemVendorName = itemVendorName;
    this.itemInventoryStatus = itemInventoryStatus;
    this.itemBuyPrice = itemBuyPrice;
    this.itemSellPrice = itemSellPrice;
}

public Inventory(String itemName, String itemVendorName, Long itemInventoryStatus,
        Double itemBuyPrice, Double itemSellPrice, Set<LineItems> lineItems) {
    this.itemName = itemName;
    this.itemVendorName = itemVendorName;
    this.itemInventoryStatus = itemInventoryStatus;
    this.itemBuyPrice = itemBuyPrice;
    this.itemSellPrice = itemSellPrice;

    this.lineItems = lineItems;
}

@OneToMany(mappedBy = "pk.inventory", fetch = FetchType.LAZY, cascade = CascadeType.ALL)
public Set<LineItems> getLineItems() {
    return this.lineItems;
}

public void setLineItems(Set<LineItems> lineItems) {
    this.lineItems = lineItems;
}

@Id
@Column(name = "Id", nullable = false)
@GeneratedValue(strategy = IDENTITY)
public Long getId() {
    return this.id;
}

@Column(name = "ItemName")
public String getItemName() {
    return this.itemName;
}

@Column(name = "ItemVendorName")
public String getItemVendorName() {
    return this.itemVendorName;
}

@Column(name = "ItemInventoryStatus")
public Long getItemInventoryStatus() {
    return this.itemInventoryStatus;
}

@Column(name = "ItemBuyPrice")
public Double getItemBuyPrice() {
    return this.itemBuyPrice;
}

@Column(name = "ItemSellPrice")
public Double getItemSellPrice() {
    return this.itemSellPrice;
}

public void setId(Long id) {
    this.id = id;
}

public void setItemName(String itemName) {
    this.itemName = itemName;
}

public void setItemVendorName(String itemVendorName) {
    this.itemVendorName = itemVendorName;
}

public void setItemInventoryStatus(Long itemInventoryStatus) {
    this.itemInventoryStatus = itemInventoryStatus;
}

public void setItemBuyPrice(Double itemBuyPrice) {
    this.itemBuyPrice = itemBuyPrice;
}

public void setItemSellPrice(Double itemSellPrice) {
    this.itemSellPrice = itemSellPrice;
}

public String toString() {
    return "Item id:" + this.id + " ItemName: " + this.itemName +
            " ItemInventoryStatus: " + this.itemInventoryStatus +
            " ItemBuyPrice: " + this.itemBuyPrice + " ItemSellPrice " + this.itemSellPrice;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:12:43.920

This isn't really a question as it is more of a "how would I do this"

What have you tried already? Where are you running into trouble? etc.

Your view logic should not be coupled with your domain layer, what I mean is, you write your forms to be as usable as possible yet, still get the information you need. Once you post the information to the backing Controller, you do the required business logic in order to line up how the entities persist, etc.

Continuing this line of thinking, your controller should only be worried about web layer exceptions, and passing information on to the Business / Service Layer. From the Business / Service layer you execute required logic, and pass on to the Domain / Repository layer. This gives a clear separation of concerns allowing for easier testing.

# git - 尝试 git pull 时出现错误：无法打开 .git/FETCH_HEAD：权限被拒绝

> ID：13195814
> 
> 赞同：261
> 
> 时间：2012-11-02T13:06:07.877
> 
> 标签：git, github, pull

请帮助我，我正在尝试在我的终端中运行它：

```
asgard@asgard-A7N8X2-0:~/CollegePortal$ git pull
error: cannot open .git/FETCH_HEAD: Permission denied 
```

然后我试试这个

```
asgard@asgard-A7N8X2-0:~/CollegePortal$ sudo git pull
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

帮帮我，我不明白这个问题。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2012-11-02T13:09:09.127

似乎第一个不起作用，因为您的用户没有更改该目录的权限，第二个是因为您的 root 用户没有正确的 SSH 密钥来访问该 git 存储库。

根据您要执行的操作，最好将存储库克隆到其他目录，或者`chown`将当前目录克隆到您的用户具有完全访问权限

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2012-11-02T13:10:24.323

`.git/`检查您是否对该目录有足够的权限。你应该有写权限。您可以使用以下命令设置它们。

转到您的项目文件夹：

```
chown -R youruser:yourgroup .git/ 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-03-23T18:07:19.877

如果您想授予该组的权限，

```
sudo chmod g+w .git -R 
```

最适合我。

对于 MacOS

```
sudo chmod -R g+w .git 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2012-11-02T13:10:26.783

这是一个 UNIX 权限问题。不要`sudo`用于克隆存储库。您没有与 root 相同的 ssh 密钥，而且您也不应该以 root 身份工作。尝试`ls -la`找到文件的权限并使用`chmod`（或`sudo chown`）修复它们。希望有帮助。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2015-03-23T09:07:22.470

在我的情况下工作正常：

```
rm -f .git/FETCH_HEAD

git branch -u 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2018-05-15T16:32:21.600

像这样试试

**第1步：**首先检查你是谁？它将返回当前用户名，例如**ubuntu**

```
$ whoami 
```

**第2步：**然后为您当前的用户设置权限，在这种情况下，**ubuntu** by

```
sudo chown -R ubuntu .git/ 
```

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2014-12-22T22:54:56.670

此问题的答案确保 .git/FETCH_HEAD 具有写入权限，您将一切就绪。

我在 Windows 上遇到了这个问题，通过授予写入权限解决了这个问题。

在 unix 中，可以`chmod a+rw .git/FETCH_HEAD`从项目存储库运行，之后它应该可以工作。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2014-03-11T18:42:44.597

就我而言，我只有 .git/FETCH_HEAD 文件的读取权限。为了能够执行拉取请求，我必须执行“sudo chmod g+w .git/FETCH_HEAD”。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-07-24T15:17:14.373

我在 Windows 上遇到了第一个问题（FETCH_HEAD 权限被拒绝）。

我通过以管理员身份运行 Git Bash 来修复它（右键单击，以管理员身份运行）。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-07-11T12:31:33.487

通过运行命令为当前用户设置权限

`$ sudo chown -R <username> .git/`

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2016-07-03T01:26:33.437

如果您还没有将自己添加到拥有 的组中`.git/`，那么您应该这样做。

```
sudo usermod -a -G $(stat -c '%G' .git) $USER
sudo chmod g+u .git -R
sudo chmod g+u .gitignore
su - $USER 
```

这是做什么的：

1.  找出哪个组拥有`.git/`并将您的用户添加到该组。
2.  确保组成员具有与所有者相同的权限`.git/`。
3.  重复此操作`.gitignore`，您可能需要
4.  注销并重新登录以刷新您的组成员文件权限

如果您最近刚刚做了这样的事情（将自己添加到拥有 的组`.git/`），那么您需要注销并重新登录，然后才能`.git/FETCH_HEAD`在`git pull`.

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2019-10-11T12:45:22.033

这将解决文件夹中的所有权限

```
sudo chown -R $(whoami) ./ 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2015-06-20T17:52:33.460

运行 Windows 7，当我遇到这个问题时，是因为我隐藏了 .git 文件夹。权限很好，只是被隐藏了。显示文件夹解决了它。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2018-11-02T10:57:58.157

只需转到您的**根文件夹**并运行以下命令：

```
chmod a+rw .git/FETCH_HEAD 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2021-09-29T17:52:25.390

使用这个命令，它对我有用。

> 须藤 chown -R $USER: .

参考：[https ://techoverflow.net/2019/05/07/how-to-fix-git-error-cannot-open-git-fetch_head-permission-denied/](https://techoverflow.net/2019/05/07/how-to-fix-git-error-cannot-open-git-fetch_head-permission-denied/)

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-09-30T17:14:02.467

## 这对我有用：

1.  右键单击 .git 文件夹
2.  点击获取信息
3.  为您的用户设置权限
4.  单击 Cog 图标，然后单击应用于随附的项目

**git 中没有更多的权限被拒绝错误。**

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-07-03T06:04:01.830

这个错误的原因可能是多重的，但在我的情况下，我用 root 更新了分支，然后当我尝试用普通用户更新它时，它给了我错误。

尝试两种解决方案，一个应该适合你

```
1- sudo chmod g+w .git -R 
```

如果它不起作用，请尝试下一个解决方案希望它能解决您的问题

```
2 - rm -f .git/FETCH_HEAD 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-12-24T06:07:43.343

**错误：无法打开 .git/FETCH_HEAD：权限被拒绝**

这对我有用：

1.  默认情况下 .git 文件夹是隐藏的。
2.  取消隐藏 .git 文件夹及其子文件夹和文件并尝试拉取请求。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-11-18T13:41:04.587

当 .git 文件夹被隐藏并且其中的所有文件也被隐藏时遇到了这个问题。仅隐藏 .git 文件夹而不更新递归文件，它将起作用。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-05-12T10:23:43.677

当您没有为 .git 文件夹提供足够的权限时，就会出现此问题。为了解决这个问题——

1.  首先导航到您的工作目录。
2.  输入这个命令——

    > sudo chmod a+rw .git -R

希望能帮助到你..！！

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2016-01-11T06:17:31.717

`.git`使用 (首先转到 .git 的父目录)查看目录的所有者和组`ll .git`，查看目录的组和所有者，使用 将您的用户添加到所有者组`sudo usermod -a -G yourusername groupsofonwner`，然后注销 => 登录，一切正常.

所以在夏天

1.  转到 git 的父目录

    ```
    $cd your path 
    ```

2.  查找目录的组`.git`所有者

    ```
    $ll .git 
    ```

3.  将您的用户添加到该组

    ```
    $usermod -a -G yourusername ownergroupofgit 
    ```

4.  注销并登录系统以使此更改生效。

5.  好好享受 ;）

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-11-25T20:11:55.090

就我而言，我有一个双启动系统（Windows 10 和 Linux），项目文件夹位于 NTFS 磁盘上。事实证明，在另一个更新中，Windows 10 在其设置中自行启用了“快速启动”。在我在 Windows 中取消选中它之后 - Linux 中的“错误：无法打开 .git/FETCH_HEAD：权限被拒绝”消失了。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-03-07T07:36:38.257

我在为 windows 使用 git 扩展时收到此消息。我的解决方法是简单地关闭 git 扩展，然后以管理员身份再次打开

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2018-11-30T04:48:48.487

就我而言，

> 须藤 chmod ug+wx .git -R

这个命令有效。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-11-07T05:17:02.397

我遇到了完全相同的错误，但就我而言，问题是升级到 PHP 版本后重建 Apache 的结果。长话短说，我忘了安装 Apache 模块“suexec”。

它与团体或所有权无关。这才花了我两天时间才弄明白，有人开枪打死我……

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-04-19T07:07:31.070

对于 MacOS 用户（如果是 High Sierra 或更高版本），请使用：

```
sudo chown -R $(whoami) $(brew --prefix)/* 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-09-08T15:43:59.713

这里有很多答案，很多人建议做一个 chown。对我来说，将用户更改为拥有该文件夹的用户（在我的情况下为 tomcat）要容易得多，因为所有者被允许写入： `sudo su tomcat` 并且 `git pull` 不需要更改权限。我更喜欢这个，因为完成后我不必记得更改权限。

要查找拥有该文件夹的用户，请执行`ls -la`

注意：不要对所服务的文件夹授予非 sudo 写入权限！

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-05-07T21:17:36.520

我得到这个是因为我的盒子上有超过 1 个用户帐户。我以用户 A 的身份登录，并且位于用户 B 的目录中。用户 A 没有权限访问用户 B 的内容。一旦我意识到我不是我认为我在文件系统中的位置，这个错误就有意义了。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-04-26T19:23:50.970

当我这样做时，`bundle install`我得到了：

```
Following files may not be writable, so sudo is needed:
  /Library/Ruby/Gems/2.6.0
  /Library/Ruby/Gems/2.6.0/bin
  /Library/Ruby/Gems/2.6.0/build_info
  /Library/Ruby/Gems/2.6.0/bundler
  /Library/Ruby/Gems/2.6.0/cache
  /Library/Ruby/Gems/2.6.0/doc
  /Library/Ruby/Gems/2.6.0/extensions
  /Library/Ruby/Gems/2.6.0/gems
  /Library/Ruby/Gems/2.6.0/specifications
Fetching gem metadata from https://rubygems.org/.........
error: cannot open .git/FETCH_HEAD: Permission denied 
```

我已经按照[这里](https://stackoverflow.com/a/12150580/5175709)的步骤更新了我`bash_profile`的添加`rbenv`垫片。

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

但由于一些未知的原因，我让他们评论了。一旦我取消注释，我就能够`bundle install`成功运行。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-01-27T20:11:34.730

`sudo chmod -R 777 .git`或者如果您只想为自己添加 rw 权限，您可以使用`sudo chmod -R +rw .git`

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2018-10-28T03:57:10.260

如果你在windows server中发现同样的问题，那么你需要以足够的权限运行命令行，比如管理员权限。

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2020-06-29T09:42:39.870

**在我的情况下工作：**我刚刚`sudo`在命令之前写了：

```
sudo npm run deploy 
```

# automapper - 为什么使用 Automappers ValueResolver？

> ID：13195815
> 
> 赞同：2
> 
> 时间：2012-11-02T13:06:08.363
> 
> 标签：automapper

为什么这样做

```
Mapper.CreateMap<MyObject, AnotherObject>().
ForMember(x => x.DateAsString, m => m.ResolveUsing<StringToDateTimeFormatter>());

private class StringToDateTimeFormatter : ValueResolver<DateTime, string>
{
    protected override string ResolveCore(DateTimesource)
    {
        return source.ToString("yyyy-MM-dd");
    }

 } 
```

你什么时候能做到

```
Mapper.CreateMap<MyObject, AnotherObject>().
ForMember(x => x.DateAsString, m => m.MapFrom(x => x.Date.ToString("yyy-MM-dd"))); 
```

？？？

**更新**

这是一个关于如何做更复杂的业务逻辑的例子

```
Mapper.CreateMap<MyObject, AnotherObject>().
ForMember(x => x.DateAsString, m => m.MapFrom(n => MyMethod(n.DateAsString)));

    private object MyMethod(string dateTime)
    {
        if(!MyDomainObjectIsValid(dateTime))
        {
            throw new MyValidationException();
        }

        // do more stuff
    } 
```

我仍然认为不需要 ValueResolver ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:18:18.093

显然，对于您的示例，使用 just 更合理`MapFrom`。更复杂的情况需要 ValueResolvers。例如，当您需要进行一些验证并相应地引发异常时。

**EDIT** ValueResolvers 提供对目标类型和值的访问。这是一个小例子。

```
public class FakeResolver : IValueResolver
{
    public ResolutionResult Resolve(ResolutionResult source)
    {
        if (source.Context.DestinationType == typeof(string) && source.Context.DestinationValue == "test")
            throw new Exception();
        return source;
    }
} 
```

# c# - Visual Studio 2010 - UnitTest - 使用泛型和 AssemblyInitialize 时出现异常

> ID：13195821
> 
> 赞同：5
> 
> 时间：2012-11-02T13:06:35.333
> 
> 标签：c#, visual-studio-2010, unit-testing, generics

我在 Visual Studio 2010 中的单元测试有问题。我粘贴了下面的简化代码。

```
[TestClass]
public class TestClassA<T>
{
    [AssemblyInitialize()]
    public static void Initialize(TestContext testContext) {}
}

[TestClass]
public class TestClassB : TestClassA<String>
{
    [TestMethod]
    public void TestMethod()
    {
       Assert.IsTrue(true);
    }
} 
```

当我运行时`TestMethod()`，我得到以下异常：

```
Assembly Initialization method TestProject.TestClassA`1.Initialize threw exception. System.InvalidOperationException: System.InvalidOperationException: Late bound operations cannot be performed on types or methods for which ContainsGenericParameters is true.. Aborting test execution.

at System.Reflection.RuntimeMethodInfo.ThrowNoInvokeException()
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod() 
```

当我用谷歌搜索这个错误时，我可以找到如何修复使用反射调用[[AssemblyInitialize]](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx)方法的代码的建议。但是那个代码不是我的，它是：

```
Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestExecuter.RunAssemblyInitializeMethod() 
```

我可以使用[[ClassInitialize]](http://msdn.microsoft.com/en-us/library/ms245248%28v=vs.90%29.aspx)方法而不是[[AssemblyInitialize]](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.90%29.aspx)并且它可以工作，但我仍然想使用 [AssemblyInitialize] 方法。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T11:31:00.260

您实际上并不需要继承。您可以在包含 AssemblyInit 和 AssemblyCleanUp 属性方法的测试项目/程序集中放置一个单独的类。像这样：

```
[TestClass]
public static class AssemblyInitializer
{
    [AssemblyInitialize]
    public static void AssemblyInit(TestContext context)
    {

    }

    [AssemblyCleanup]
    public static void AssemblyCleanup()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:34:41.400

如果您`[TestClass]`从中删除，问题是否仍然存在`TestClassA<T>`？

~~[测试类]~~

```
 public class TestClassA<T>
 {
 } 
```

# forms - Lazarus pascal/Delphi - 子表单不可编辑

> ID：13195827
> 
> 赞同：0
> 
> 时间：2012-11-02T13:06:58.797
> 
> 标签：forms, delphi, parent-child, lazarus

我正在创建一个表单的新实例，并试图从面板上将其显示为一个孩子。但表格似乎不可用。我的意思是我不能编辑任何文本框。但是还有其他控件，例如**看起来**可以点击的树和按钮。

这是代码：

```
procedure TForm1.ProcfrmSetupItemCategories;
var
  NewForm: TfrmSetupItemCategories;
begin
  NewForm:=TfrmSetupItemCategories.Create(BodyPanel);

  NewForm.Parent := BodyPanel;
  NewForm.Top:=5;
  NewForm.Left:=5;
  NewForm.Show;
end; 
```

但是，如果我删除该行`NewForm.Parent := BodyPanel;`，表单是可编辑的，但它会超出父表单/面板。

同样，当设置了父级时，子窗体不活动（查看标题栏）

我错过了什么吗？请指教。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:31:29.057

表单需要是其他表单或 TApplication 的子级。TPanel 不知道如何管理表单，因此您的表单将不会被激活并且其组件将不会获得焦点。

相反，您可以使用普通表格并编写一个程序来对齐您的表格。现在在主窗体中添加一个计时器，并从 ontimer 事件中调用对齐过程。当用户移动或调整主窗体的大小时，其他窗体会重新对齐。

戴夫·彼得斯 DP 软件

# numpy - 用于掩码数组的 Numpy.ma polyfit 函数在整数输入时崩溃

> ID：13195832
> 
> 赞同：0
> 
> 时间：2012-11-02T13:07:05.383
> 
> 标签：numpy, curve-fitting, polynomial-math, maskedinput

用于掩码数组的 numpy 多项式拟合函数`ma.polyfit`在整数输入时崩溃：

```
import numpy.ma as ma
x = ma.arange(2)
y = ma.arange(2)
p1 = ma.polyfit(np.float32(x), y, deg=1)
p2 = ma.polyfit(           x , y, deg=1) 
```

最后一行导致错误：

```
ValueError: data type <type 'numpy.int64'> not inexact 
```

为什么我不能用整数 x 值拟合数据（普通`numpy.polyfit`函数没有问题），这是一个（已知的）错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:38:21.580

这确实是一个错误`numpy.ma`：（`rcond`排除某些值的参数）`len(x)*np.finfo(x.dtypes).eps`作为默认值，并且`np.int32`没有任何`eps`字段（因为 int 没有相对精度）。

```
import numpy.ma as ma
eps = np.finfo(np.float32).eps 

x = ma.arange(2)
y = ma.arange(2)
p1 = ma.polyfit(np.float32(x), y, deg=1, rcond = len(x)*eps)
p2 = ma.polyfit(           x , y, deg=1, rcond = len(x)*eps) 
```

我已经快速查看了 numpy 的问题，但似乎并没有发现这个错误。提出一个新问题可能是个好主意：[新问题](https://github.com/numpy/numpy/issues/new)

# c - 使用talloc时编译错误

> ID：13195838
> 
> 赞同：2
> 
> 时间：2012-11-02T13:07:27.193
> 
> 标签：c, memory, compiler-errors

我编写下面的代码来测试talloc：

```
#include "talloc.h"

typedef struct linklist
{
    char* str;
    struct linklist* next;
}LinkList;

int main(int argc,char* argv[])
{
    LinkList* lptr=talloc(NULL,LinkList);
    lptr->str=talloc_strdup(lptr,"Test ptr");

    talloc_free(lptr);

    return 0;
} 
```

但得到**编译错误**：

```
talloctest.c:(.text+0x21): undefined reference to `talloc_named_const(void const*, unsigned int, char const*)'
talloctest.c:(.text+0x39): undefined reference to `talloc_strdup(void const*, char const*)'
talloctest.c:(.text+0x4d): undefined reference to `talloc_free(void*)'
collect2: ld returned 1 exit status 
```

然后我找到了相关宏和函数的定义：“talloc.h”中的定义：

```
#define talloc(ctx, type) (type *)talloc_named_const(ctx, sizeof(type), #type)
char *talloc_strdup(const void *t, const char *p); 
```

“talloc.c”中的实现：

```
void *talloc_named_const(const void *context, size_t size, const char *name)
{
    return _talloc_named_const(context, size, name);
}

char *talloc_strdup(const void *t, const char *p)
{
    if (unlikely(!p)) return NULL;
    return __talloc_strlendup(t, p, strlen(p));
} 
```

有人能告诉我为什么吗？我已经尝试过talloc-1.3.0 和talloc-2.0.7，但得到了相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:10:28.393

您是使用talloc 作为单独的库还是将其编译到可执行文件中？如果您将它用作单独的库，则需要链接到它 - 通过添加`-ltalloc`到您的构建命令来猜测。

# ruby-on-rails-3 - image_tag 不正常

> ID：13195839
> 
> 赞同：0
> 
> 时间：2012-11-02T13:07:30.970
> 
> 标签：ruby-on-rails-3

好的，我们在这里都不知所措。尝试使用 image_tag 显示图像。路径存储在 sqlite3 varchar(64) 字段中，并带有引号。该字段称为图像路径。

在展示页面...

这个：<%=@invitem.imagepath%> 给了我这个：“/images/5585L.jpg””

这：<%=image_tag(@invitem.imagepath) %>

给我这个：5585l（注意小写 L）

这： <%=image_tag("/images/6287L.jpg")%> 渲染我想要的图像。

有人有线索吗？斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:17:51.760

Try this:

```
<%= image_tag("#{@invitem.imagepath}") %> 
```

# java - 如何访问从 JAVA 代码索引的列？

> ID：13195841
> 
> 赞同：0
> 
> 时间：2012-11-02T13:07:43.753
> 
> 标签：java, sql, oracle10g

> **可能重复：**
> [如何在选择语句中使用索引？](https://stackoverflow.com/questions/6593765/how-to-use-index-in-select-statement)

让我具体一点：

我在 oracle 10g 数据库中创建了某些表 x 和 y。我已经为表中的某些列建立了索引，以便使用`CREATE INDEX`语句更快地检索记录。

我有访问这些表以使用准备好的语句对象检索数据的 Java 代码。但是我不清楚如何从这些索引表中检索数据。请帮忙。代码片段将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:14:21.477

数据库旨在选择最快的方式自行回答问题。假设您使用类似的东西`WHERE indexed_column = 'value'`，Oracle 将决定使用任何可以自行提供帮助的索引；无需明确指定。

# java - DTO 可以有实例格式数据方法吗？

> ID：13195845
> 
> 赞同：0
> 
> 时间：2012-11-02T13:07:51.700
> 
> 标签：java, methods, format, instance, dto

我的问题是：DTO 可以有实例格式数据方法吗？

例如：

```
public class CosasDTO{

  String cosa_nombre;
  String cosa_apellido;
  String cosa_fecha;

   ///-------------------------Constructor

    public CosasDTO(CosaExtrema cExtrema) {

        cosa_nombre = cExtrema.getName();
        cosa_apellido = cExtrema.getApellido();
        cosa_fecha = formatDate(cExtrema.getDate());
    }

    private String formatDate(Timestamp fechaHora) {

    String horaFechaFormateadas = new SimpleDateFormat("yyyyMMddhhmmss").format(fechaHora);

        return horaFechaFormateadas;
    }
} 
```

在 DTO 中实例化格式化方法是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:10:50.783

格式化/本地化是表示（端点）层的责任，所以通常没有。在持久化过程中，您将日期/时间保存为 UTC，并根据用户的偏好在表示层中对其进行格式化。

# javascript - 通过 NodeJS 运行 Javascript 代码

> ID：13195847
> 
> 赞同：2
> 
> 时间：2012-11-02T13:07:56.067
> 
> 标签：javascript, xml, node.js, dom

我需要有关通过 NodeJS 运行 javascript 代码的帮助。到目前为止，我有以下代码；

```
txt="<bookstore><book>";
txt=txt+"<title>Everyday Italian</title>";
txt=txt+"<author>Giada De Laurentiis</author>";
txt=txt+"<year>2005</year>";
txt=txt+"</book></bookstore>";

parser=new DOMParser();
xmlDoc=parser.parseFromString(txt,"text/xml");
x=xmlDoc.getElementsByTagName("title")[0].childNodes[0];
x.nodeValue="Diffrent Title"; 
```

我将它作为 test.js 并在命令提示符下运行它

```
node test.js 
```

但它给出了以下错误：

```
ReferenceError: DOMParser is not defined 
```

我在这里做错了什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:10:17.533

Node.js 独立于浏览器运行，因此您不会获得任何浏览器提供的功能。`DOMParser`是浏览器提供的类，由于 Node.js 在服务器上运行，因此没有浏览器提供它。如果您想与您的文档进行交流，您将不得不使用另一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:14:40.107

NodeJS 不在浏览器中运行，因此 DOMParser 不可用。但是，您可以使用**jsdom**。它由nodejs提供。[它](https://npmjs.org/package/jsdom)在节点包管理器中可用。

```
var jsdom = require("jsdom");
jsdom.env({
    html: txt,
    scripts: ["http://code.jquery.com/jquery.js"],
    done: function(errors, window) {
        x = window.getElementsByTagName("title")[0].childNodes[0];
        x.nodeValue="Diffrent Title";
    }
}); 
```

# php - 在 magento 中移动“最近查看的产品”小部件

> ID：13195851
> 
> 赞同：0
> 
> 时间：2012-11-02T13:08:06.117
> 
> 标签：php, xml, magento, widget, product

我用于小部件布局的 xml 代码是这样的：

```
 <reference name="left">
            <block type="catalog/product_compare_sidebar" before="cart_sidebar" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
            <block type="core/text_list" name="left.permanent.callout" template="callouts/left_col.phtml">
                <!--<action method="setImgSrc"><src>images/media/col_left_callout.jpg</src></action>
                <action method="setImgAlt" translate="alt" module="catalog"><alt>Our customer service is available 24/7\. Call us at (555) 555-0123.</alt></action>-->
                <block type="cms/block" name="left_callout">
                    <action method="setBlockId"><block_id>left_callout</block_id></action>
                </block>
                <action method="setLinkUrl"><url>checkout/cart</url></action>
            </block>
    </reference> 
```

我得到的相应输出是产品显示在菜单下方和产品上方。我希望最近查看的产品小部件位于主要产品下方，如果可能的话，位于“您可能还喜欢”部分下方。页面布局为1列布局。请帮忙。该怎么办？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:38:02.980

我不是 100% 确定，但据我所知，你可以做这样的事情：

xml 文件（我认为是 catalog.xml）

```
<reference name="content"><block type="catalog/product_compare_sidebar" after="" name="catalog.compare.sidebar" template="catalog/product/compare/sidebar.phtml"/>
        <block type="core/text_list" name="left.permanent.callout" template="callouts/left_col.phtml">
            <block type="cms/block" name="left_callout">
                <action method="setBlockId"><block_id>left_callout</block_id></action>
            </block>
            <action method="setLinkUrl"><url>checkout/cart</url></action>
        </block></reference> 
```

在 after="" 标签上，输入相关产品的区块名称（您可能也喜欢）。您也可以在 xml 文件中的某个位置找到它。这将告诉最近查看的块仅在您可能还喜欢之后出现。

然后，在您的 1 列 html 中，使用 $this->getChildHtml('left.permanent.callout'); 调用它 就在调用其他子 html 的位置之后。

# android - 如何在android中删除edittext错误并请求焦点？

> ID：13195852
> 
> 赞同：8
> 
> 时间：2012-11-02T13:08:06.020
> 
> 标签：android, android-2.2-froyo

当我在 edittext 上设置错误并请求焦点时，它会设置错误并请求焦点，但是如何删除错误并删除焦点？

```
mEditTextSearchOrAdd.setError("Error");
mEditTextSearchOrAdd.requestFocus(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T13:10:10.953

您应该执行以下操作：

```
mEditText.setError(null);//removes error
mEditText.clearFocus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T11:55:31.863

```
Example
=======
xml
---
 <EditText
                        android:id="@+id/name"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        />

java
-----
private EditText EditText1;
username = (EditText) findViewById(R.id.name);
username .setError(null); 
```

# tsql - T-SQL 在复杂连接方面需要帮助

> ID：13195855
> 
> 赞同：1
> 
> 时间：2012-11-02T13:08:18.517
> 
> 标签：tsql, join, insert-update

我真的不知道如何解决这个问题，需要一些帮助——不仅是解决方案，而且是如何解决的想法都会受到欢迎。

我有下表：

```
TABLE Data
( 
     RecordID
    ,DateAdd
    ,Status
) 
```

示例日期如下：

```
11  2012-10-01 OK
11  2012-10-04 NO
11  2012-11-05 NO
22  2012-10-01 OK
33  2012-11-01 NO
33  2012-11-15 OK 
```

此表具有以下示例数据：

```
TABLE Periods
(
    PeriodID
   ,PeriodName
   ,DateStart
   ,DateEnd
)

1 Octomer  2012-10-01 2012-10-31
2 November 2012-11-01 2012-11-30 
```

我需要做的是填充一个新表：

```
TABLE DataPerPeriods
(
    PeriodID,
    RecordID,
    Status
) 
```

这将存储 PeriodID 和 RecordID 的所有可能组合以及 period 的最新状态（如果可用）。如果给定期间的状态不可用，则为以前期间的状态。如果根本没有以前的状态 - 那么状态为 NULL。

例如，对于以下数据，我需要这样的东西：

```
1 11 NO //We have status "OK" and "NO", but "NO" is latest for the period
1 22 OK 
1 33 NULL//Because there are no records for this and previous periods
2 11 NO //We get the previos status as there are no records in this periods
2 22 OK //There are not records for this period, but record for last periods is available
2 33 NO //We have status "OK" and "NO", but "OK" is latest for the period 
```

编辑：我已经在最后一个表中填充了期间 id 和记录 id，我需要更多关于状态更新的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:35:55.520

可能有更好的方法来做到这一点。但这是我所知道的最直接的途径，可以得到你正在寻找的东西，看起来非常规。对于较大的数据集，您可能必须更改方法：

```
SELECT p.PeriodID, td.RecordID, statusData.[Status] FROM Periods p
CROSS JOIN (SELECT DISTINCT RecordID FROM Data) td
OUTER APPLY (SELECT TOP 1 [Status], [DateAdd] 
         FROM Data 
         WHERE [DateAdd] <= p.DateEnd 
         AND [RecordID] = td.RecordID 
         ORDER BY [DateAdd] DESC) statusData
ORDER BY p.PeriodID, td.RecordID 
```

CROSS JOIN 为您提供了 RecordIDs 和 DISTINCT Periods 的所有可能组合。

OUTER APPLY 选择每个周期结束之前的最新状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:23:52.280

查看我对另一个问题的回答，了解如何获取第一个或最后一个状态：[Aggregate SQL Function to grab only the first from each group](https://stackoverflow.com/questions/773417/aggregate-sql-function-to-grab-only-the-first-from-each-group/10111071#10111071)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T14:51:01.787

好的，这是一个想法。没有人喜欢光标，包括我在内，但有时它们确实会派上用场。

这个想法是这个游标循环遍历每个数据记录，提取 ID 作为标识符。在循环内，它会找到一条数据记录并获取满足您条件的连接计数。

如果@count = 0，则不满足条件，您不应插入该期间的记录。

如果@Count=1，则满足条件，因此插入该期间的记录。

如果这些条件需要经常更新，您可以查询作业并每分钟或每小时运行一次......你有什么。

希望这可以帮助。

```
DECLARE @ID int
DECLARE merge_cursor CURSOR FAST_FORWARD FOR 
select recordID
from data 
OPEN merge_cursor
FETCH NEXT FROM merge_cursor INTO @ID

WHILE @@FETCH_STATUS = 0
BEGIN

--get join if record is found in the periods
    declare @Count int
    select @Count= count(*) 
    from data a inner join periods b 
    on a.[dateadd] between b.datestart and b.dateend  
    where a.recordID = @ID 

    if @count>0

        --insert into DataPerPeriods(PeriodID, RecordID, Status)
        select b.periodid, a.recordid, a.status 
        from data a inner join periods b on a.[dateadd] between b.datestart and b.dateend --between beginning of  month and end of  month
        where a.recordid = @ID  
    else
        --insert into DataPerPeriods(PeriodID, RecordID, Status)
        select b.periodid, a.recordid, a.status 
        from data a inner join periods b on a.[dateadd] < b.dateend 
        where a.recordID = @ID --fix this area

FETCH NEXT FROM merge_cursor INTO @ID
END

CLOSE merge_cursor 
DEALLOCATE merge_cursor 
```

# vim - 在显示质量低的投影仪上演示的最佳 vim 配色方案是什么

> ID：13195860
> 
> 赞同：2
> 
> 时间：2012-11-02T13:08:42.817
> 
> 标签：vim, colors

我们需要不时在会议室中进行代码审查，业主需要通过投影仪（分辨率非常低，如 1024x768）在屏幕上显示他的更改（主要通过**终端**上的 vim ），问题是，没有好的vim 的配色方案，使代码更改看起来很漂亮。

问题是，我们失去了各种文件类型插件的语法高亮等优点，因为它们中的大多数都是基于深色背景颜色的。对于深色主题，语法元素上的许多装饰都变得不可见。

任何人都可以提出一个很好的方案来适应这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:27:25.813

对于投影仪来说，最重要的是*字体*的可读性，即不能太细。Windows GVIM (Fixedsys) 上的默认字体可以很好地完成这项工作。您可能希望临时增加字体大小以获得更好的可读性（`:set guifont=...`；甚至有插件允许通过键映射快速动态字体缩放）。

此外，白色背景上的深色字母通常是最好的。任何高对比度的配色方案都应该起作用（即使是默认的配色方案，虽然它肯定不漂亮）。最后，我认为，这取决于投影仪的质量和房间设置（阴影绘制，良好的投影区域）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:17:37.987

I like the [Solarized](http://ethanschoonover.com/solarized) color scheme. It is probably not the best for use on a projector, but you would have to try that. I found it via the [spf13 distribution](https://github.com/spf13/spf13-vim).

example: ![Solarized dark in gnome-terminal](../Images/6a458e41ee6a2d9eea8cde6263fcdab5.png)

# mysql - 生成更新脚本 MySQl 表

> ID：13195861
> 
> 赞同：2
> 
> 时间：2012-11-02T13:08:44.907
> 
> 标签：mysql

我有包含 250 个字段的 MySql 表，我需要进行更新，手动编写整个更新可能需要几个小时。

在**SQL SERVER**中，我可以选择“**生成更新脚本**”，我正在寻找类似的选项。

我尝试了 Phpmyadmin 和 Navicat，但我没有找到这样的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:29:27.760

使用**描述表名**并将字段复制到 Excel 表中，然后填充更新语句。

# jquery - 在 MVC3 中使用 Jquery 时无法导航

> ID：13195862
> 
> 赞同：0
> 
> 时间：2012-11-02T13:08:49.423
> 
> 标签：jquery, asp.net-mvc-3, hide, show

大家好，

当用户单击_Layout.cshtml 中的登录链接（div id =“_login”）时，我试图显示/隐藏我的登录屏幕。我的登录屏幕也在 _Layout.cshtml 的一个 div (id ="_logInScreen") 内。

```
$(document).ready(function() {
               $('#_logInScreen').hide();
               $('#_login').click(function () {                  
                  $('#_logInScreen').show(400);
                    return false;
               });
               $('#_closeLogIn').click(function () {
                   $('#_logInScreen').hide(500);
                   return false;
               });
               $('body').click(function () {
                   $('#_logInScreen').hide(500);
                   return false;
               });
               $('#_logInScreen').click(function () {                   
                   $('#_logInScreen').show();
                   return false;
               });
           }); 
```

它工作正常。

但是这样做时，我无法导航使用的菜单链接

```
@Html.ActionLink("Home","Index", "Home")

@Html.ActionLink("Help","Index", "Help") 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:17:49.310

```
 $('body').click(function () {
               $('#_logInScreen').hide(500);
               return false;
           }); 
```

remove the `return false;` line.

# reporting-services - Reporting Services - 对齐从右到左的矩阵

> ID：13195867
> 
> 赞同：4
> 
> 时间：2012-11-02T13:09:09.733
> 
> 标签：reporting-services, ssrs-2008, right-to-left, ssrs-tablix

在 RS 报告中，我有一个矩阵，其 LayoutDirection 属性设置为 RTL（因为它是希伯来语）。我通过从数据集字段列表中拖动一个字段并将其放到矩阵的列标题中来创建一个列组。所以列数是可变的（没关系）。

当我查看报告时，列的顺序是正确的（从右到左）。但问题是矩阵向右增长并且总是向左对齐。报告是 RTL，所以我需要解决方法，即我希望矩阵向右对齐并向左增长。

我找不到修复它的方法。你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:07:17.933

解决方法是将“ReportViewer”控件中名为“RightToLeft”的属性设置为“Yes”。

报表查看器是托管和呈现 RDL 的控件。默认情况下，报表查看器设置为从左到右，而不是 RTL。

我在公司用过，效果很好！

有关更多详细信息，请查看此[帖子](http://www.hightechtalks.com/dotnet-framework-winforms-controls/reportviewer-right-left-223960.html)

# excel - 如何用相应的图像替换文本

> ID：13195868
> 
> 赞同：0
> 
> 时间：2012-11-02T13:09:15.873
> 
> 标签：excel, excel-2010

我有一个包含 300 多条记录的 Excel 文档。

在每条记录的第一行中，有一个用户图像变量。此记录将始终为`username.jpg`空。

我有一个包含相应图像的文件夹，所有图像都以完全相同的方式命名。

有什么方法可以自动将第一行中的文本替换为相关图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:49:29.687

如果您的用户图像变量在 A 列中，则此代码会将图片插入 A 列并将行高调整为图片的高度。您可能需要稍微调整代码。

```
Sub insertPic()

Dim pic As String
Dim url As String
Dim r As Integer
Dim he As Integer

url = "C:\User\Pictures\" ' This is the variable to the folder

For r = 1 To 300
pic = Sheets("Sheet1").Range("A" & r).Value ' This is your username file
pic = url & pic

With ActiveSheet.Pictures.Insert(pic) ' Insert picture into active sheet
    .Left = ActiveSheet.Range("A" & r).Left ' left and top align the left and top of the picture with the specified cell
    .Top = ActiveSheet.Range("A" & r).Top
    he = .Height ' get height of image

End With
Sheets("Sheet1").Range("A" & r).Select
    Selection.RowHeight = he ' match row height to picture height
Next r

End Sub 
```

# azure - Windows Azure 和 SFTP

> ID：13195871
> 
> 赞同：7
> 
> 时间：2012-11-02T13:09:44.430
> 
> 标签：azure, cloud, sftp

我对 Azure 知之甚少，但我正在寻找一个云服务器，我可以让客户端通过 SFTP 将他们的文件发送给我们。它将主要用于数据存储。唯一的要求是文件通过 SFTP（不是 FTP）发送。

有人对这个有经验么？这设置有多难？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:29:51.537

您可以在此处找到有关如何在 Windows Azure VM 上设置常规 FTP 站点的分步说明 - [http://nicoploner.blogspot.com/2010/12/ftp-server-on-windows-azure-from.html](http://nicoploner.blogspot.com/2010/12/ftp-server-on-windows-azure-from.html)

以下是在 Windows Server 上设置 SFTP 的方法（也适用于 Azure VM）- [http://www.digitalmediaminute.com/article/1487/setting-up-a-sftp-server-on-windows](http://www.digitalmediaminute.com/article/1487/setting-up-a-sftp-server-on-windows)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:05:13.530

是的，您可以设置 Azure VM 角色，然后为 Windows 服务器安装 SFTP 服务器。

您还可以设置 Linux VM 角色并使用本机 sftp 命令。

根据您正在执行的操作，您可能希望使用指向 Blob 存储的 RESTful 服务（这不是 SFTP），但它确实通过 HTTPs 并且您可以直接获得 Azure Blob 存储的所有好处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-11T14:15:07.877

以下是几个选项和其他资源：

1) 您可以在 Windows Server 上安装 SFTP

[https://winscp.net/eng/docs/guide_windows_openssh_server](https://winscp.net/eng/docs/guide_windows_openssh_server)

这使用了来自 Microsoft 的 GitHub 上的 OpenSSH 包。

2) 您可以使用 Ubuntu 虚拟机

正如[@Bart Czernicki](https://stackoverflow.com/users/54410/bart-czernicki)所提到的，OpenSSH 内置在 Linux 中，并且 SFTP 开箱即用。使用 /etc/ssh/sshd_config 文件自定义您的实现。

3) SFTP 网关

我们在 Azure 市场上有一个名为[SFTP 网关](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/thorntechnologiesllc.sftpgateway)的产品可能会有所帮助。（披露：我为 Thorn Technologies 工作。）

这是启动 SFTP 服务器而无需从头开始构建它的好选择。它还有一个用于管理用户的 Web 界面，以帮助最大限度地减少在 SSH 终端上花费的时间。

顺便说一句，虽然在原始问题中没有提出这个问题，但您可能需要考虑将数据移动到持久存储层（Azure Blob 存储）。一种方法是使用 incron 来监听文件事件。通过 SFTP 完成文件传输后，使用 Azure CLI 将文件复制到 Azure Blob 存储，然后在成功时从磁盘中删除文件。这是我们用来构建 SFTP 网关的方法。

希望这可以帮助！

# objective-c - 如何解决 iPhone 中 imageWithContentsofffile 函数的内存问题

> ID：13195877
> 
> 赞同：4
> 
> 时间：2012-11-02T13:10:13.327
> 
> 标签：objective-c, ios, memory-management, uibutton, uiimage

将 a 添加`UIButton`到`UITableView`. 下面是我设置`UIButton`图像的代码：

```
UIImage *image = [UIImage imageWithContentsOfFile:imagePath];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:image forState:UIControlStateNormal]; 
```

但是当我使用`imageName:`方法而不是`imageWithContentsOfFile:`方法时，它工作得很好。有人对这个问题有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:26:40.183

**imageWithContentsOfFile:**与**imageNamed:**

据我所知，

**imageNamed**将图像加载到一个特殊的系统缓存中，然后使用该图像路径的未来调用将返回缓存中的图像，而不是从磁盘重新加载它。

**imageWithContentsOfFile**只是在您指定的路径上加载图像，但不进行缓存。对同一图像多次调用 imageWithContentsOfFile 将导致内存中有多个副本。

关于内存泄漏，我不确定在编程中使用大量图像时哪一个更适合使用...

# android - Android：无法通过 ToyVpn 应用连接到 VPN 服务器；获取端口不可达异常

> ID：13195879
> 
> 赞同：5
> 
> 时间：2012-11-02T13:10:14.420
> 
> 标签：android, vpn

我正在尝试在 android 上创建一个 VPN 客户端。我查看了 android 示例应用程序“ToyVpn”，我试图从这个应用程序连接到我的 PC（Windows 7），但我遇到了端口无法访问的异​​常。

```
E/ToyVpnService(2302): Got java.net.PortUnreachableException: 
E/ToyVpnService(2302): Got java.net.SocketException: sendto failed: ECONNREFUSED (Connection refused) 
```

但是，当我通过 Android 的默认 vpn 客户端连接到我的 PC 时，它会成功连接。通过在命令行中输入“netstat”，我观察到我的电脑的 1723 端口连接到手机的 36302 端口。因此，可以访问离线端口。

它是示例应用程序，它应该可以工作......但我也看到了一些其他链接，其中提到他们无法通过此应用程序连接到服务器。

这个样本是否有效？这个 API 需要 root 手机吗？

除此之外，我没有找到任何示例或教程来显示正确使用“android.net.VpnService”。

谁能指导我这个..？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T10:55:03.817

ToyVpnService 是一个简单的自定义 VPN 的示例实现。它不符合标准。如果你想要一个符合标准的 VPN，你应该使用内置的。

如果您想测试示例，有一个 linux 服务器可以理解与 ToyVPN 示例一起打包的 ToyVPN 协议。

[https://github.com/android/platform_development/tree/master/samples/ToyVpn](https://github.com/android/platform_development/tree/master/samples/ToyVpn)

它被称为ToyVPN，因为它就是这样。

*   它没有加密
*   它没有相互认证
*   它以纯文本形式发送预共享的身份验证密钥
*   它不会优雅地处理意外的数据包
*   它不保证数据包的完整性或来源

它只展示了 VpnService API 如何从手机上的应用程序中捕获发往 Internet 的数据包并将它们推送到隧道中。同样，如何将数据包注入应用程序，就好像它们来自网络一样。

其余的由开发人员来实现。

# triggers - Oracle 11g：插入前检查数据

> ID：13195887
> 
> 赞同：1
> 
> 时间：2012-11-02T13:10:34.053
> 
> 标签：triggers, insert, oracle11g, check-constraints

我有三张桌子，电影，表演和房间。我想在给定的房间里为一部电影插入新的节目，我想我可以用一个触发器来做到这一点，如果没有与现有的时间冲突，我可以用一个触发器来完成。

我写了这个：

```
CREATE OR REPLACE TRIGGER insert_new_show
BEFORE INSERT ON show
FOR EACH ROW
DECLARE
   -- pragma autonomous_transaction;
   collisioni varchar(40);
   runtime INT;
   error1 EXCEPTION;
   error2 EXCEPTION;
BEGIN
   IF  :new.time < CURRENT_TIMESTAMP THEN
      RAISE error1;
   END IF;  

   SELECT runtime INTO runtime 
     FROM film 
    WHERE title = deref(:new.di_film).title;

   SELECT film.title INTO collisioni 
     FROM show JOIN film ON deref(show.di_film).title=film.title
    WHERE DEREF(room).nome = DEREF(:NEW.room).nome 
      AND ( (:new.time < show.time AND :new.time + runtime + 10 > show.time) 
            OR (:new.time > show.time 
                 AND :new.time < show.time + runtime + 10));

   IF NOT SQL%NOTFOUND THEN
      INSERT INTO show
       SELECT to_timestamp(:NEW.orario,'yyyy-mm-dd hh24:mi:ss')
            , :NEW.max_n_spot,:NEW.costo, REF(s), NULL, REF(f)
         FROM film f, room s
        WHERE f.title=deref(:NEW.di_film).title 
          AND s.nome=deref(:NEW.room).nome;     
   ELSE
      RAISE error2; 
   END IF;

EXCEPTION 
   WHEN error1 THEN
      RAISE_APPLICATION_ERROR(-20491,'Error');
   WHEN error2 THEN
      RAISE_APPLICATION_ERROR(-20491,'Error');

END; 
```

如果我不使用“pragma automatic_transaction”，我会收到`table s%s is mutating`错误消息。但是，当然对于事务，触发器看不到`:new`值。我还想用 CHECK CONSTRAINT 进行检查，但我不知道它是否有效。你能帮我找到解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:47:50.730

这是经典的“使用包/过程”情况。

`ORA-04091: table name is mutating, trigger/function may not see it`当您查询当前正在对其执行 DML 操作的触发器中的表时，您会得到。Oracle 不允许这样做以维护数据的读取一致性视图。有多种方法可以避免这种情况，其中大多数涉及尝试做一些有点时髦的事情；包括您已经注意到的自主事务。

但是，它们不会影响错误的根本原因；也就是说，你做错了什么。此错误通常表示以下两种情况中的一种或两种：

*   您将太多逻辑放入触发器中
*   您的数据模型有缺陷。

解决方案是将逻辑移动到包或过程中，这具有消除混淆层和帮助调试的额外好处。

我在这里看不到检查约束是如何可能的，因为您仍然需要知道 FILM 的运行时间，这需要查询第二个表。

### 进一步阅读：

*   [复合触发器](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#LNPLS743)- 官方文档
*   [避免变异表异常](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)- AskTom
*   [“修复”Oracle 变异表触发器错误](http://www.dba-oracle.com/t_avoiding_mutating_table_error.htm)- dba-oracle.com（我自己的双引号）。

# c# - 为什么我可以在该实例之外调用另一个相同类型的实例的私有方法？

> ID：13195891
> 
> 赞同：6
> 
> 时间：2012-11-02T13:10:41.920
> 
> 标签：c#, access-modifiers

如果我有 ObjectA，它有一个私有方法`GetPrice()`并且还有一个相同类型的“父”字段，为什么我可以`GetPrice()`从子实例中调用父实例？

例子：

```
private decimal GetPrice()
{
    ObjectA parent = Parent;

    if(parent != null)
    {
        return parent.GetPrice(); // Why is this OK?
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T13:15:49.870

因为私有意味着“其他*类型无法访问”，而不是“其他**实例*无法访问”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T13:16:20.153

因为`private`范围仅限于*类*，而不是[C# 规范](http://go.microsoft.com/fwlink/?LinkId=199552)中定义的*实例*：

> 1.6.2 可访问性 类的每个成员都有一个关联的可访问性，它控制能够访问该成员的程序文本区域。有五种可能的可访问性形式。这些总结在下表中。
> 
> ```
> 可访问性含义   
> 
> 公共访问不受限制   
> protected 访问仅限于此类或从此类派生的类  
> 仅限此程序的内部访问   
> 受保护的内部访问仅限于该程序或从该类派生的类    
> 私人访问仅限于此类
> 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:19:05.703

访问修饰符与其实现的类/类型有关，而不是与该类的实例有关

# c# - c# CheckBoxes 并指向它们

> ID：13195892
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:10:48.750
> 
> 标签：c#, checkbox, for-loop

我正在尝试制作物理计算器左右。

我不能指向循环来检查是否`checkBox`已检查。

我试过 ：

```
for (int cb = 0; cb <= 31; cb++)
{
    if(*checkBox1.checked* == true){}
} 
```

我用什么代替 : `*checkbox[cb].checked*`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:16:17.297

我们在这里需要更多信息，checkbox 是 CheckBoxList 吗？

```
for (int cb = 0; cb <= 31; cb++)
{
    CheckBox check = (CheckBox)checkbox[cb];
    if(check.Checked) { 

    }
} 
```

或者，如果动态名称...

```
for (int cb = 0; cb <= 31; cb++)
{
    CheckBox check = (CheckBox)Page.FindControl("checkbox" + cb);
    if(check.Checked) { 

    }
} 
```

这些方面的东西应该可以为您的场景解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:19:29.167

如果您想查看控件/面板/等中的所有复选框，则可以使用 LINQ 来发挥您的优势...

```
// Filter the controls collection for checkboxes
foreach(var cb in this.Controls.OfType<CheckBox>()) 
{
  if(cb.checked)
  {
    // do something
  }  
} 
```

如果您可以使用的所有复选框都在一个 中`Panel`，那么您可以做类似的事情，`Panel1.Controls.OfType<CheckBox>()`这样您就只抓住您想要的那些。

# r - 所有列的简单 z 变换

> ID：13195898
> 
> 赞同：0
> 
> 时间：2012-11-02T13:11:11.370
> 
> 标签：r, transformation, sapply

我刚刚为所有列的矩阵中的 z 转换编写了一个非常基本的函数。它看起来像这样：

`sapply(MyObject, function(x){(x-mean(x))/sd(x)})`

我随机检查了矩阵中某些单元格的函数，它似乎工作正常。我仍然想确认这个功能是好的，因为我对 R 很陌生，我在互联网上找不到任何好的例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:25:10.603

你应该看看`scale()`哪个为你做这件事。

您的功能接近正确；您应该添加`na.rm = TRUE`到`sd()`和`mean()`函数调用中。

我会写（如果不使用`scale()`）函数使用`sweep()`而不是`sapply()`. 例如

```
ztran <- function(x, na.rm = TRUE) {
    mns <- colMeans(x, na.rm = na.rm)
    sds <- apply(x, 2, sd, na.rm = na.rm)
    x <- sweep(x, 2, mns, "-")
    x <- sweep(x, 2, sds, "/")
    x
} 
```

在使用中我们有

```
> df <- data.frame(matrix(1:9, ncol = 3))
> ztran(df)
  X1 X2 X3
1 -1 -1 -1
2  0  0  0
3  1  1  1
> scale(df)
     X1 X2 X3
[1,] -1 -1 -1
[2,]  0  0  0
[3,]  1  1  1
attr(,"scaled:center")
X1 X2 X3 
 2  5  8 
attr(,"scaled:scale")
X1 X2 X3 
 1  1  1 
```

`sweep`对于此类操作，它是一个非常有用的矢量化工具。另请注意，这`sapply()`简化为矩阵，这可能不是您想要的。`sweep()`不这样做：

```
> class(ztran(df))
[1] "data.frame"
> class(sapply(df, function(x){(x-mean(x))/sd(x)}))
[1] "matrix" 
```

# eclipse - 如何查看被 Spring 隐藏的嵌套异常跟踪？

> ID：13195899
> 
> 赞同：0
> 
> 时间：2012-11-02T13:11:16.227
> 
> 标签：eclipse, spring, debugging, exception, output

当我在 Eclipse 中调试 Spring 应用程序时，我得到了很长的异常链。例如，我有

```
创建文件 [...Tester.xml] 中定义的名称为“...”的 bean 时出错：设置属性值时出错；嵌套异常是 org.springframework.beans.PropertyBatchUpdateException；嵌套的 PropertyAccessExceptions (1) 是：
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property '...' 抛出异常；嵌套异常是 java.lang.IllegalArgumentException: ...

```

等等。Spring内部的多个堆栈异常，这很无趣。下面的某个地方应该是我的例外，但 Spring 没有显示它们。

而且我无法像往常一样单击异常并导航到问题位置。

怎么说Spring输出所有异常？

**更新**

下面是完整的输出。可以看出，发生的地方`IllegalArgumentException`很可能被截断了。

```
线程“主”org.springframework.beans.factory.BeanCreationException 中的异常：创建文件 [D:\mypath\myconfig.xml] 中定义的名称为“mybean”的 bean 时出错：设置属性值时出错；嵌套异常是 org.springframework.beans.PropertyBatchUpdateException；嵌套的 PropertyAccessExceptions (1) 是：
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'myproperty' 抛出异常；嵌套异常是 java.lang.IllegalArgumentException：我的异常消息
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1361)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    在 org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    在 org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    在 org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    在 org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    在 org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    在 org.springframework.context.support.FileSystemXmlApplicationContext.(FileSystemXmlApplicationContext.java:140)
    在 org.springframework.context.support.FileSystemXmlApplicationContext.(FileSystemXmlApplicationContext.java:84)
    在 springtests.SpringRunner.main(SpringRunner.java:8)
引起：org.springframework.beans.PropertyBatchUpdateException；嵌套的 PropertyAccessExceptions (1) 是：
PropertyAccessException 1: org.springframework.beans.MethodInvocationException: Property 'target.partner' 抛出异常；嵌套异常是 java.lang.IllegalArgumentException: Illegal frame length 1 in显式构造函数
    在 org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:102)
    在 org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
    在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues（AbstractAutowireCapableBeanFactory.java:1358）
    ... 13 更多

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:36:31.910

由于可能存在多个异常，因此您需要捕获`PropertyBatchUpdateException`并调用`getPropertyAccessExceptions()`以检查特定异常的堆栈跟踪。

编辑

其实我不太确定这里发生了什么

这是`PropertyBatchUpdateException`的`printStackTrace`方法：

```
public void printStackTrace(PrintWriter pw) {
        synchronized (pw) {
            pw.println(getClass().getName() + "; nested PropertyAccessException details (" +
                    getExceptionCount() + ") are:");
            for (int i = 0; i < this.propertyAccessExceptions.length; i++) {
                pw.println("PropertyAccessException " + (i + 1) + ":");
                this.propertyAccessExceptions[i].printStackTrace(pw);
            }
        }
    } 
```

它应该包括嵌套的堆栈跟踪。您使用的是最新版本的 Spring 吗？

编辑：

我可以建议的最好的方法是在调试模式下运行，然后在处设置断点`AbstractAutowireCapableBeanFactory.java:1361`并查看发生了什么。

# c# - 使用 c# 和 BigQuery 进行身份验证和执行查询的简单步骤

> ID：13195902
> 
> 赞同：0
> 
> 时间：2012-11-02T13:11:36.877
> 
> 标签：c#, google-bigquery

使用 c# 和 BigQuery 进行身份验证和执行查询的简单步骤是什么。任何代码都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:25:34.643

最好的起点是这里：[https ://developers.google.com/bigquery/](https://developers.google.com/bigquery/)

该文档足以让您入门，所有 API 代码示例都在 Java 中，这应该是有意义的。

至于 C#，我将您引向另一个问题，其中包含要进行身份验证的工作示例。不过，我们还不需要以编程方式查询。

[Google OAuth2 服务帐户访问令牌请求给出“无效请求”响应](https://stackoverflow.com/questions/11939026/google-oauth2-service-account-access-token-request-gives-invalid-request-respo)

# php - 在处理数组时确定文件是否正在通过表单提交

> ID：13195903
> 
> 赞同：0
> 
> 时间：2012-11-02T13:11:47.563
> 
> 标签：php, arrays, file, upload

首先对令人困惑的主题标题感到抱歉。我想不出更好的了。

我使用关联数组作为表单元素的名称，以便在处理表单时更轻松地运行插入查询。就像是：

```
<input type="text" name="v[fname]" />
<select name="v[location]">
    <option val="1">ABC</option>
    <option val="2">DEF</option>
</select>
<textarea name="v[comments]"></textarea> 
```

这样我就可以简单地做：

```
$v = $_POST[v];

// single line execution for insert    
"INSERT INTO ".$tableName." ( ". implode( ',', array_keys( $v) ) .") VALUES( '". implode( "','", $v ) . "')" 
```

现在有时，我处理的表单必然包含`<input type="file" />`元素。我想知道是否有办法：

*   检测文件是否正在上传
*   如果是，则将文件的路径存储在其中，`$v`以便我可以以与上面指定的相同方式使用该数组

所以，简而言之，我正在寻找这样的东西：

```
if(isset($_POST['add'])) // when submit button is clicked
{
   $v = $_POST['v']; // store other element values
   if(condition to check if a file is being uploaded through the form)
   {
      $path = 'get the path where it will be uploaded'; //This part I can handle. What I'm having trouble with is finding a way to get into **this** if condition
      $v['path'] = $path; // store the path inside $v
   }

   //proceed with the insert statement as usual

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:17:59.180

你能检查 $_FILES 的内容吗？

```
if(!empty($_FILES)) {
  //do what you need to do
} 
```

文档：[http ://www.php.net/manual/en/reserved.variables.files.php](http://www.php.net/manual/en/reserved.variables.files.php)

# java - JApplet 在浏览器中缺乏完整的功能

> ID：13195905
> 
> 赞同：1
> 
> 时间：2012-11-02T13:11:56.563
> 
> 标签：java, swing, clipboard, jbutton, japplet

我有一个 Java JApplet，当 eclipse 运行它时它运行良好，但在浏览器中却令人失望。小程序在浏览器中运行良好，直到按下唯一的 JButton。此时，应该会发生一些事情，但是在浏览器中，除了按钮显示它已被按下之外，什么都没有发生。eclipse运行它时不会发生这种情况。

这是代码：

```
import java.awt.Color;
import java.awt.GridLayout;
import java.awt.HeadlessException;
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JTextArea;

import org.bukkit.configuration.ConfigurationSection;
import org.bukkit.configuration.InvalidConfigurationException;
import org.bukkit.configuration.file.YamlConfiguration;

public class OverviewGenerator extends JApplet {

    int state = 0;
    JTextArea label = new JTextArea();
    JButton button = new JButton();

    String pluginYML;

    YamlConfiguration yml = new YamlConfiguration();

    String page;

    public ActionListener buttonListener = new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            if(state == 0) {

                try {
                    pluginYML = (String) Toolkit.getDefaultToolkit().getSystemClipboard().getData(DataFlavor.stringFlavor);
                } catch (HeadlessException e1) {
                    e1.printStackTrace();
                } catch (UnsupportedFlavorException e1) {
                    e1.printStackTrace();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
                try {
                    yml.loadFromString(pluginYML);
                } catch (InvalidConfigurationException e1) {
                    e1.printStackTrace();
                }
                state = 1;

            }else {

                generatePage();

                Toolkit toolkit = Toolkit.getDefaultToolkit();
                Clipboard clipboard = toolkit.getSystemClipboard();
                StringSelection strSel = new StringSelection(page);
                clipboard.setContents(strSel, null);

                state = 0;

            }

            refreshComponents();

        }

    };

    /**
     * 
     */
     private static final long serialVersionUID = 3470279389867972761L;

     public void init() {

         makeGui();

     }

     private void makeGui() {

         label.setWrapStyleWord(true);
         label.setLineWrap(true);
         label.setBackground(Color.CYAN);
         label.setEditable(false);

         GridLayout layout = new GridLayout();
         layout.setRows(2);
         layout.setColumns(1);

         getContentPane().setLayout(layout);

         refreshComponents();

         getContentPane().add(label);
         getContentPane().add(button);

         button.addActionListener(buttonListener);

     }

     private void refreshComponents() {

         if(state==0) {

             label.setText("Copy your plugin.yml into the clipboard then press done!");
             button.setText("Done");

         }else if(state == 1) {

             label.setText("Now press the button to copy your template BukkitDev overview into your clipboard!");
             button.setText("Copy");

         }

     }

     private void generatePage() {

         page = "";

         page += "== "+yml.getString("name")+" ==\n";

         if(yml.contains("description")) {

             page += "\n//"+yml.getString("description")+"//\n\n\n";

         }

         if(yml.contains("commands")) {

             page += "== Commands ==\n";

             for(String command : yml.getConfigurationSection("commands").getKeys(false)) {

                 page += "\n=== "+command+" ===\n\n";

                 if(yml.contains("commands."+command+".description")) {

                     page += "//"+yml.getString("commands."+command+".description")+"//\n";

                 }

                 if(yml.contains("commands."+command+".usage")) {

                     page += "Usage: "+yml.getString("commands."+command+".usage")+"\n";

                 }

             }

             page += "\n";

         }

         if(yml.contains("permissions")) {

             YamlConfiguration editedYml = new YamlConfiguration();
             try {
                editedYml.loadFromString(pluginYML.replace(".", "≠"));
            } catch (InvalidConfigurationException e) {
                e.printStackTrace();
            }

             ConfigurationSection permissions = editedYml.getConfigurationSection("permissions");

             page += "== Permissions ==\n";

             for(String permission : permissions.getKeys(false)) {

                 page += "\n=== "+permission.replace('≠', '.')+" ===\n\n";

                 if(editedYml.contains("permissions."+permission+".description")) {

                     page += "//"+editedYml.getString("permissions."+permission+".description").replace('≠', '.')+"//\n";

                 }

             }

             page += "\n\n\n";

         }

         page += "//Got any suggestions?//";

     }

} 
```

上面的代码有点过时了，我现在已经在'invoke later'代码中添加了！我在显示 Java 控制台时遇到问题，但我相信错误可能是在访问剪贴板时出现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T09:45:19.373

出于安全原因，小程序可以通过两种方式访问​​剪贴板。

1.  小程序由开发人员进行数字签名，并受到最终用户的信任。
2.  小程序使用 JNLP API 的服务来访问剪贴板。这在最近的 JRE 中可用，例如 Sun 的 1.6.0_10+。

可能有第三种方法可以将数据获取到涉及的小程序

*   让用户直接粘贴到 HTML 表单字段中
*   然后使用JS将数据传输到小程序。

这可以在沙盒小程序中完成，并且在支持 JNLP API 服务的 JRE 之前完成。OTOH 这意味着用户的点击次数更多，设置也更多。

> //有什么建议吗？//

除了“问一个更具体的问题”之外，我还可以建议：

*   启用[Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)。该信息对于调试小程序至关重要。
*   阅读[沙盒应用中的复制。在 1.6.0_24+](https://forums.oracle.com/forums/thread.jspa?threadID=2197433)中获取有关小程序中剪贴板访问问题的更多详细信息，以及使用 JS 和其他技术从小程序中复制数据的策略***。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:04:26.957

Oracle 于 2011 年 2 月发布了 Java 6 Update 24，以修复 21 个漏洞。作为此安全版本的一部分，从计算机剪贴板复制和粘贴到 Java 小程序的功能已被禁用。

要解决此问题，有 2 个解决方案：

1.  为小程序创建数字签名。
2.  解决方法：如果您不想使用数字签名，请在您的 java.policy 文件中添加以下行：permission java.awt.AWTPermission "accessClipboard"

如果您想查看使用签名证书的 Java Applet 示例，您可以在此处查看（小程序接受来自剪贴板的粘贴操作，不允许未签名的小程序）：[http ://sqlinform.com/free_online_sw.html](http://sqlinform.com/free_online_sw.html)

# javascript - 使用 jshint 在我的函数中出现错误？

> ID：13195907
> 
> 赞同：-3
> 
> 时间：2012-11-02T13:12:09.403
> 
> 标签：javascript

这是我的功能：-

```
function setLangCookie() {
  "use strict";
    var value = "FR";
    var expiredays = 1825;
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = "lang=" + escape(value) + ((expiredays == null) ? "" : ";path=/;expires=" + exdate.toGMTString());
} 
```

错误：

> 第 7 行：`document.cookie = "lang=" + escape(value) + ((expiredays == null) ? "" : ";path=/;expires=" + exdate.toGMTString());`
> 
> 期待`'==='`，反而看到了`'=='`。
> 
> 第 7 行：`document.cookie = "lang=" + escape(value) + ((expiredays == null) ? "" : ";path=/;expires=" + exdate.toGMTString());`

`'escape'`没有定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:13:43.350

你在`strict mode`。您必须使用前缀访问窗口对象的属性`window.`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:14:57.103

它希望您使用`window.escape`而不仅仅是`escape`.

如果您使用默认设置，我还假设它会因为您不使用带有空值检查的三等号而对您大喊大叫。

```
function setLangCookie() {
  "use strict";
    var value = "FR";
    var expiredays = 1825;
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = "lang=" + window.escape(value) + ((expiredays === null) ? "" : ";path=/;expires=" + exdate.toGMTString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:18:25.223

Aside from escape not being defined, the complaint about seeing '==' instead of '===' relates to the way that Javascript treats equality. '===' requires the two compared values to be of the same type, where '==' will do type coercion to get equality.

In most cases you really want to use '===' instead because it prevents subtle bugs, such as `0` being treated as `false`.

# c# - LINQ to XML 节点选择无法按预期工作

> ID：13195908
> 
> 赞同：0
> 
> 时间：2012-11-02T13:12:19.123
> 
> 标签：c#, linq, linq-to-xml

> **可能重复：**
> [了解 Linq To Xml - 后代不返回任何结果](https://stackoverflow.com/questions/2338512/understanding-linq-to-xml-descendants-return-no-results)

所以我一直在看微软的例子：

[http://msdn.microsoft.com/en-us/library/bb387061.aspx](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

在那里，他们这样做：

```
IEnumerable<string> partNos =
from item in purchaseOrder.Descendants("Item")
select (string) item.Attribute("PartNumber"); 
```

他们使用“后代”来处理 purchaseOrder 中实际上是 3 层深的项目。

现在，当我尝试用我的 XML 做同样的事情时，我什么也得不到。

我的 XML：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<name>Roulette</name>

<modules>
    <module>application</module>
    <module>test</module>
</modules> 
```

我的代码：

```
XDocument mainPOM = XDocument.Load(above_xml);
List<string> pomLocations = (from loc in mainPOM.Descendants("module") select (string)loc.Name.LocalName).ToList();
Console.WriteLine(pomLocations.Count); 
```

不幸的是， pomLocations 的长度为 0 :(。

有人可以告诉我我到底在哪里搞砸了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:15:40.230

您的根元素包含以下内容：

```
xmlns="http://maven.apache.org/POM/4.0.0" 
```

这是为后代元素及其本身设置默认命名空间。所以元素的名称不仅仅是“项目”——它是该命名空间中的“项目”。你要：

```
XNamespace ns = "http://maven.apache.org/POM/4.0.0";
var locations = mainPOM.Descendants(ns + "project")
                       .Select(...); 
```

我将`Select`子句保留为“...”，因为我认为您并不是真正想要`loc.Name.LocalName`的，由于查询，它始终是“项目”。

此外，尚不清楚您是否真的想要`Descendants`- 如果`project`是根元素，为什么不直接使用`mainPOM.Root`?

# objective-c - 自定义滑动手势

> ID：13195910
> 
> 赞同：0
> 
> 时间：2012-11-02T13:12:37.007
> 
> 标签：objective-c, macos, cocoa

是否可以在系统范围内添加三指滑动手势，例如热键？是的，就像通知中心的手势一样，只是来自另一边。（沙盒）

也许通过使用桌面大小的透明覆盖窗口并捕获滑动手势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:06:24.877

创建手势识别器并使用`setNumberOfTouchesRequired = 3`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:46:40.490

如果您要使用透明的、桌面大小的覆盖窗口， Github 上的[CocoaNavigationGestures](https://github.com/oscardelben/CocoaNavigationGestures "Cocoa导航手势")可能用于在 Leopard 和 Lion 上获取左右滑动的代码。

# mongodb - MongoDB OR 条件索引

> ID：13195912
> 
> 赞同：3
> 
> 时间：2012-11-02T13:12:43.337
> 
> 标签：mongodb, indexing

我有一个 OR 查询，我目前正在使用它进行半大型更新。本质上，我的收藏分为两个数据集；

1 个主存储库和 1 个主存储库的子集。这只是为了允许更快地搜索一小部分数据。

但是，我发现我创建的用于将事物拉入子集的查询正在超时..当查看说明时，看起来实际上正在发生两个查询。

```
PRIMARY> var date = new Date(2012,05,01);
PRIMARY> db.col.find(
  {"$or":[
      {"date":{"$gt":date}},
      {"keywords":{"$in":["Help","Support"]}}
   ]}).explain(); 
```

这会产生：

```
{
"clauses" : [
    {
        "cursor" : "BtreeCursor ldate_-1",
        "nscanned" : 1493872,
        "nscannedObjects" : 1493872,
        "n" : 1493872,
        "millis" : 1035194,
        "nYields" : 3396,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
            "ldate" : [
                [
                    ISODate("292278995-01--2147483647T07:12:56.808Z"),
                    ISODate("2012-06-01T07:00:00Z")
                ]
            ]
        }
    },
    {
        "cursor" : "BtreeCursor keywords_1 multi",
        "nscanned" : 88526,
        "nscannedObjects" : 88526,
        "n" : 2515,
        "millis" : 1071902,
        "nYields" : 56,
        "nChunkSkips" : 0,
        "isMultiKey" : false,
        "indexOnly" : false,
        "indexBounds" : {
            "keywords" : [
                [
                    "Help",
                    "Help"
                ],
                [
                    "Support",
                    "Support"
                ]
            ]
        }
    }
],
 "nscanned" : 1582398,
 "nscannedObjects" : 1582398,
 "n" : 1496387,
 "millis" : 1071902
} 
```

有什么我可以更好地索引以使其更快吗？似乎只是慢慢来...

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:40:20.367

[`$or`查询](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)将分别评估每个子句并组合结果以删除重复项..因此，如果您想优化查询，您应该首先尝试单独[解释（）](http://www.mongodb.org/display/DOCS/Explain)每个子句。

看起来问题的一部分是您正在检索大量文档，同时积极写入该集合，如高`nYields`(3396) 所示。[`mongostat`](http://docs.mongodb.org/manual/reference/mongostat/)在查询运行时检查输出以考虑页面错误、锁定百分比和读/写队列等其他因素是值得的。

如果您想对大量文档和非常活跃的集合更新加快查询速度，可以考虑以下两种最佳实践方法：

1)**预聚合**

本质上，这是在插入/更新文档时更新聚合统计信息，以便您可以进行快速实时查询。MongoDB 手册更详细地描述了这个用例：[预聚合报告](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/)。

2）**增量映射/减少**

[增量 Map/Reduce](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce)方法可用于计算连续批次中的聚合统计信息（例如，来自每小时或每天的 cron 作业）。使用这种方法，您可以使用`reduce`输出选项执行 Map/Reduce 以将结果保存到新集合中，并包含一个`query`过滤器，该过滤器仅选择自上次运行此 Map/Reduce 作业以来已创建/更新的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:18:31.980

我认为您应该在日期和关键字上创建一个复合索引。根据您的用例，请参阅以下帖子以获取更多详细信息

[如何在mongodb中构建复合索引](https://stackoverflow.com/questions/9901787/how-to-structure-a-compound-index-in-mongodb)

# php - 如何将我的搜索框连接到烂番茄 API 搜索

> ID：13195914
> 
> 赞同：0
> 
> 时间：2012-11-02T13:12:51.540
> 
> 标签：php, html, rest, search, rotten-tomatoes

如何让我的搜索框与烂番茄 API 连接，以便我可以在我的网页中进行搜索并返回烂番茄的结果？

我`$userSearch`在 PHP 部分添加了变量。我把那个变量放在`urlencode`函数中。我对如何进行有点迷茫。我想我需要使用 AJAX jQuery，我是否需要创建一个 JavaScript 文件，其中包含用于访问 API 的代码并在我的搜索框定义中有一个“动作”？我对如何解决这个问题有点困惑，并且很难找到一个例子。我正在构建这个 [烂番茄 PHP 示例](http://developer.rottentomatoes.com/docs/read/json/v10/examples)。

这是我的代码，带有硬编码的“鼠标”搜索：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>

        <form method="post" action="www.websitehere.com/folderhere/"
              name="searchform" id="searchform">

            <label for="Search"> Search: </label>
            <input type="text" id="search" name="myName" placeholder="Search for movie" 
                   required="required" style="width: 520px" />

            <label for="category" id="category">Category</label>
            <select>
                <option value="title" selected="selected">Movie Title</option>
                <option value="director">Director</option>
                <option value="genre">Genre</option>
            </select>
            <input type="submit" value="Search" id="searchbtn">
            <input type="submit" value="Add" id="searchbtn">
            <p></p>
            <div id="search_results">Local Search results</div>

        </form>

        <?php
        $userSearch = 'Mouse';
        $apikey = 'myapikeyhiddenforprivacy';
        $q = urlencode($userSearch); // make sure to url encode an query parameters
// construct the query with our apikey and the query we want to make
        $endpoint = 'http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=' . $apikey . '&q=' . $q;

// setup curl to make a call to the endpoint
        $session = curl_init($endpoint);

// indicates that we want the response back
        curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

// exec curl and get the data back
        $data = curl_exec($session);

// remember to close the curl session once we are finished retrieveing the data
        curl_close($session);

// decode the json data to make it easier to parse the php
        $search_results = json_decode($data);
        if ($search_results === NULL)
            die('Error parsing json');

// play with the data!
        $movies = $search_results->movies;
        echo '<ul>';
        foreach ($movies as $movie) {
            echo '<li><a href="' . $movie->links->alternate . '">' . $movie->title . " (" . $movie->year . ")</a></li>";
            echo '<img src="' . $movie->posters->detailed . ' "/><br>';
        }
        echo '</ul>';
        ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:17:36.217

There is no need for PHP in this scenario. Why make an AJAX call to your server side code to make a call to the API when you can call to the API directly from JavaScript?

Take a look at the example JavaScript code on the page you shared a link to:

[http://developer.rottentomatoes.com/docs/read/json/v10/examples#JavaScript](http://developer.rottentomatoes.com/docs/read/json/v10/examples#JavaScript)

# asp.net - 使用敏捷包保存文档后上传文档失败

> ID：13195918
> 
> 赞同：1
> 
> 时间：2012-11-02T13:13:13.027
> 
> 标签：asp.net, html-agility-pack, ftpwebrequest

在使用 Html Agility 包保存文档后，我一直在努力解决文档上传（通过 FtpWebRequest）的一些问题。我正在尝试编辑一个 html 文件，然后将其保存到 stringWriter，然后将其上传到服务器。我正在像这样保存文档...

```
doc.OptionAutoCloseOnEnd = True
doc.OptionWriteEmptyNodes = True
Dim sr As New StringWriter
doc.Save(sr) 
```

然后使用 asyncFtpUpload sub 上传它，就像 msdn 上的那样，但只有一些更改（而不是文件名，我使用字符串）

[http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx#Y3024](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx#Y3024)

这样做的结果是上传的文件被截断了最后一个字节。当我在服务器上看到该文件的源代码时，它错过了 <\html> 标记。我已经调试了代码并且在 doc.save() 上创建的字符串是正确的，然后在上传例程中，当我使用 getBytes() 时它仍然是正确的，并且 requestStream 写入方法写入了正确的流长度。我无法弄清楚这段代码发生了什么。

谁能帮我解决这个问题？

这是代码：

```
Dim outStream As MemoryStream = New MemoryStream(ASCIIEncoding.Default.GetBytes(str))
Dim uploader As AsynchronousFtpUpLoader = New AsynchronousFtpUpLoader
uploader.startUpload(pag, outStream) 
```

和班级：

公共类 AsynchronousFtpUpLoader

```
Public Sub startUpload(ByVal pag As FtpPage, ByVal stream As Stream)
    Try
        Dim waitObject As ManualResetEvent

        Dim target As New Uri(pag.currentUrl)
        Dim state As New FtpState()
        Dim request As FtpWebRequest = DirectCast(WebRequest.Create(target), FtpWebRequest)
        request.Method = WebRequestMethods.Ftp.UploadFile
        request.UseBinary = False
        request.Credentials = New NetworkCredential(pag.login, pag.password)

        state.Request = request
        state.stream = stream
        ' Get the event to wait on.
        waitObject = state.OperationComplete

        ' Asynchronously get the stream for the file contents.
        request.BeginGetRequestStream(New AsyncCallback(AddressOf EndGetStreamCallback), state)

        ' Block the current thread until all operations are complete.
        waitObject.WaitOne()

        ' The operations either completed or threw an exception. 
        If state.OperationException IsNot Nothing Then
            Throw state.OperationException
        Else

        End If
    Catch ex As Exception

    End Try

End Sub

Private Shared Sub EndGetStreamCallback(ByVal ar As IAsyncResult)
    Dim state As FtpState = DirectCast(ar.AsyncState, FtpState)

    Dim requestStream As Stream = Nothing

    Try
        requestStream = state.Request.EndGetRequestStream(ar)

        Const bufferLength As Integer = 2048
        Dim buffer As Byte() = New Byte(bufferLength) {}
        Dim readBytes As Integer = 0
        Dim stream As MemoryStream = state.stream
        Do
            readBytes = stream.Read(buffer, 0, bufferLength)
            If readBytes <> 0 Then
                requestStream.Write(buffer, 0, readBytes)
            End If
        Loop While readBytes <> 0

        requestStream.Flush()
        state.stream.Close()
        requestStream.Close()
        state.Request.BeginGetResponse(New AsyncCallback(AddressOf EndGetResponseCallback), state)
    Catch e As Exception
        state.OperationException = e
        state.OperationComplete.[Set]()
        Return
    End Try

End Sub

Private Shared Sub EndGetResponseCallback(ByVal ar As IAsyncResult)
    Dim state As FtpState = DirectCast(ar.AsyncState, FtpState)
    Dim response As FtpWebResponse = Nothing
    Try
        response = DirectCast(state.Request.EndGetResponse(ar), FtpWebResponse)
        response.Close()
        state.StatusDescription = response.StatusDescription
        state.OperationComplete.[Set]()
    Catch e As Exception
        state.OperationException = e
        state.OperationComplete.[Set]()
    End Try
End Sub 
```

# mysql - 使用 pdo 获取行数

> ID：13195920
> 
> 赞同：12
> 
> 时间：2012-11-02T13:13:19.207
> 
> 标签：mysql, pdo, rows

我有一个简单的 pdo 准备查询：

```
$result = $db->prepare("select id, course from coursescompleted where person=:p"); 
$result ->bindParam(':p', $q, PDO::PARAM_INT);
$result->execute();
$rows = $result->fetch(PDO::FETCH_NUM);
echo $rows[0]; 
```

回声似乎是返回记录的ID值，而不是查询返回的记录数？

对此有任何想法或解释吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T13:16:26.380

您已经执行了一个从数据库返回行的查询，将结果中的第一行提取到变量中，然后回显该行的第一列。

如果要计数，请执行 SQL count()

```
$result = $db->prepare("select count(*) from coursescompleted where person=:p"); 
$result->bindParam(':p', $q, PDO::PARAM_INT);
$result->execute();
$rowCount = $result->fetchColumn(0);
echo $rowCount; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T13:15:40.030

[**PDO::FETCH_NUM：**](http://php.net/manual/en/pdostatement.fetch.php) 返回一个数组，由结果集中返回的列号索引，从第 0 列开始

您根本没有获取行数。

```
SELECT COUNT(*) FROM coursescompleted where person=:p 
```

此查询将返回总行数`$rows[0];`

**编辑：** 请参阅@ray 的回答。using`count(id)`比`count(*)`InnoDB 更好。

* * *

您可以从之前的查询中以下列方式获取行数。

```
$row_count = $result->rowCount(); 
```

**但请注意：**

> 如果关联 PDOStatement 执行的最后一条 SQL 语句是 SELECT 语句，则某些数据库可能会返回该语句返回的行数。但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。

[**文档**](http://php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T13:24:52.367

假设`id`是主键使用：

```
 SELECT COUNT(id) FROM coursescompleted WHERE person=:p; 
```

避免计数（*）。如果您的存储引擎是 InnoDB（可能是除 MyIsam 之外的其他引擎），您的性能会受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:15:13.883

尝试`echo count($rows);`作为`$rows`一个数组。

编辑：

使用结果

```
$rows = $result->fetchAll(/* nothing here */);
if(count($rows) > 0) {
  // Show results, perhaps using a foreach($rows as $row)
} else {
 echo "Sorry, no results found";
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-02-16T10:22:50.217

你可以用这个

```
<?php
$result = $db->prepare("select id, course from coursescompleted where person=:p"); 
$result ->bindParam(':p', $q, PDO::PARAM_INT);
$result->execute();
$rows = $result->rowCount();
echo $rows;
?> 
```

这有时不适用于`SELECT`查询。但是根据个人经验，由于您没有提到将其移植到其他数据库系统，因此它应该可以在 MySQL 上运行。

[更多信息](http://php.net/manual/en/pdostatement.rowcount.php)在 PHP 手册中

# xml - 如何在 tsql 中查询 xml 列

> ID：13195922
> 
> 赞同：33
> 
> 时间：2012-11-02T13:13:24.680
> 
> 标签：xml, sql-server-2008, tsql, xquery

我在 SQL Server 2008 上有一个 T1 表，它有一个 XML 列 EventXML。我想查询某个节点包含特定值的所有行。更好的是，我想检索不同节点中的值。表T1：

```
T1:
   EventID, int
   EventTime, datetime
   EventXML, XML 
```

这是一个示例 XML 层次结构：

```
<Event>
   <Indicator>
      <Name>GDP</Name>
   </Indicator>
   <Announcement>
      <Value>2.0</Value>
      <Date>2012-01-01</Date>
   </Announcement>
</Event> 
```

1.  如何查找与“GDP”指标相关的所有行；
2.  如何获取“GDP”指标的所有值；

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-02T13:21:21.500

这个怎么样？

```
SELECT 
    EventID, EventTime,
    AnnouncementValue = t1.EventXML.value('(/Event/Announcement/Value)[1]', 'decimal(10,2)'),
    AnnouncementDate = t1.EventXML.value('(/Event/Announcement/Date)[1]', 'date')
FROM
    dbo.T1
WHERE
    t1.EventXML.exist('/Event/Indicator/Name[text() = "GDP"]') = 1 
```

它将找到所有`/Event/Indicator/Name`等于的行，`GDP`然后它将显示这些行的`<Announcement>/<Value>`和`<Announcement>/<Date>`。

请参阅[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/aaf6f/1)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T13:22:45.177

```
DECLARE @t XML = '
<Event>
   <Indicator>
      <Name>GDP</Name>
   </Indicator>
   <Announcement>
      <Value>2.0</Value>
      <Date>2012-01-01</Date>
   </Announcement>
</Event>
<Event>
   <Indicator>
      <Name>Other</Name>
   </Indicator>
   <Announcement>
      <Value>3.0</Value>
      <Date>2012-01-01</Date>
   </Announcement>
</Event>
'

SELECT  node.value('.', 'NUMERIC(20, 2)')
FROM    @t.nodes('/Event[Indicator/Name/node()=''GDP'']/Announcement/Value') t(node) 
```

# javascript - Dart js-interop 与 jquery ui

> ID：13195924
> 
> 赞同：6
> 
> 时间：2012-11-02T13:13:28.937
> 
> 标签：javascript, jquery-ui, dart

我是 Dart 新手，在开始使用 js-interop 库时遇到了麻烦。我想将 jquery ui 中的滑块添加到我的页面，但我无法弄清楚如何从 Dart 进行滑块（）设置调用。js-interop 是正确的方法吗？对此的一些帮助将不胜感激。

```
void main() {
  js.scoped(() {
    var slider = query('#slider-range');
    var options = js.map({
      'range': true,
      'values': [ 17, 67 ]
    });
    // This doesn't work. Element has no method named slider.
    slider.slider(options);

    // In javascript it's done like this:
    // $( "#slider-range" ).slider({
    //   range: true,
    //   values: [ 17, 67 ]
    // });

    // This alert works.
    js.context.alert('Hello from Dart via JS');
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:28:30.983

在您的情况下，您必须使用*js.context.$('#slider-range')*而不是*query('#slider-range')*。基本上，*js.context*允许访问任何 Javascript 变量。通过使用*js.context.$*您可以访问 dart 端的*jQuery* javascript 对象（即*$*）。

```
import 'dart:html';
import 'package:js/js.dart' as js;

void main() {
  js.scoped(() {
    var slider = js.context.$('#slider-range');
    var options = js.map({
      'range': true,
      'values': [ 17, 67 ]
    });
    slider.slider(options);
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T10:07:27.660

另一个示例代码：

```
import 'package:js/js.dart' as js;

js.context.jQuery();
var context = js.context;  
var param = js.map({ 'modal': true, "width":1000, "height":600});
js.context.jQuery("#dialog").dialog(param); 
```

在 HTML 中

```
<script src="packages/browser/interop.js"></script> 
```

上面的代码使用 jQuery 打开一个 div 作为对话框。

# c++ - 将当前对象传递给方法、引用或指针

> ID：13195929
> 
> 赞同：0
> 
> 时间：2012-11-02T13:13:49.907
> 
> 标签：c++, reference, pass-by-reference

我有一个`Track`包含`Note`对象的 multimap 成员的类。`Note`该类的方法之一是：

```
float Note::getValue(){
    float sample = generator->getSample(this); // not working
    return sample;
} 
```

`Note`也有一个`Generator`类型的成员，我需要调用`getSample`该类的方法，该方法需要一个`Note`作为参数。我需要传递当前`Note`对象并尝试使用关键字这样做，`this`但这不起作用并给我错误`Non-const lvalue reference to type 'Note' cannot bind to a temporary of type 'Note *'`。

这是方法定义的`getSample`样子：

```
virtual float getSample(Note &note); 
```

正如你所看到的，我使用了一个引用，因为这个方法被非常频繁地调用并且我不能复制对象。所以我的问题是：有什么想法可以完成这项工作吗？或者也许将我的模型更改为可以工作的东西？

**编辑**

我忘了提到我也尝试过使用`generator->getSample(*this);`，但这也不起作用。我收到此错误消息：

```
Undefined symbols for architecture i386:
  "typeinfo for Generator", referenced from:
      typeinfo for Synth in Synth.o
  "vtable for Generator", referenced from:
      Generator::Generator(Generator const&) in InstrumentGridViewController.o
      Generator::Generator() in Synth.o
      Generator::Generator(Generator const&) in InstrumentGridViewController.o
      Generator::Generator() in Synth.o
  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是我的`Generator`类的样子（getSample 方法在子类中实现）：

```
class Generator{
public:
    virtual float getSample(Note &note);

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:15:36.693

`this`是一个指针，你的代码需要一个引用。试试这个

```
float sample = generator->getSample(*this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:15:34.747

`this`是 C++ 中的一个指针，所以你需要

```
float sample = generator->getSample(*this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:18:27.673

传递引用，而不是指向 getSample() 的指针。也就是这样写：

```
float Note::getValue(){
    float sample = generator->getSample(*this);
    return sample;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:59:43.337

你必须将你的`Generator`类声明为抽象类，试试这个声明：

```
virtual float getSample(Note &note)=0; 
//this will force all derived classes to implement it 
```

但是如果你不需要它，你必须在基类中实现虚函数：

```
virtual float getSample(Note &note){} 
```

# jquery - 滑动面板jQuery

> ID：13195930
> 
> 赞同：0
> 
> 时间：2012-11-02T13:13:53.853
> 
> 标签：jquery

我的网站设计顶部有一个滑动面板，但它的默认设置是在页面加载时打开 - 我怎样才能让它默认关闭，然后单击切换打开，而不是反转它现在正在做什么？jQuery如下：

```
$(document).ready(function(){

    $("#toggle").click(function(){

        $(".panel").toggle("slow");

        $(this).toggleClass("active");

        return false;

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:26:41.600

使用类面板并将显示属性设置为无，这在加载页面时不会显示。

.面板{显示：无；}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T13:31:30.147

使用此类并将 display 属性设置为 none ，它不会在窗口加载时显示。

.面板{显示：无；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:21:44.270

如果您想防止在文档加载时看到该面板从“可见”“闪烁”到隐藏，而不是最初使用 CSS 隐藏它：

```
.panel{display:none;} 
```

# java - 判断一个sql查询是否修改了数据库

> ID：13195935
> 
> 赞同：7
> 
> 时间：2012-11-02T13:14:06.257
> 
> 标签：java, sql, sql-server, regex

我有一个包含有效`SQL`表达式的字符串列表。
我只需要执行那些不修改数据库的。
最好的方法是什么？只是做类似的事情：

```
if(sqlQuery.contains("DELETE")){  
  //don't execute this
} 
```

似乎是一个糟糕的黑客

**更新：**
我会让这个更具体。
我已经有一个`SQL`允许的查询列表。我想确保只执行这些。
与这些匹配的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:42:58.303

执行此操作的最简单和最好（最全面）的方法是创建一个只读用户并仅使用该用户连接到数据库。在 SQLServer 中，最简单的方法是创建用户并将其添加到内置的**“db_datareader”**角色中。这将只允许选择。

And you have to worry about more than just DELETEs, INSERTs or UPDATEs. You also have to be careful about calling any stored procedures, so to be safe you'd also want to remove execute rights, ALTER rights, GRANT rights, etc...

EDIT: Just execute this...

```
CREATE LOGIN [user] WITH PASSWORD='password', DEFAULT_DATABASE=[your_db], CHECK_POLICY=OFF
GO
CREATE USER [user] FOR LOGIN [user]
EXEC sp_addrolemember N'db_datareader', N'your_db'
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:19:40.773

`DELETE`不是唯一可能修改数据库的 SQL 指令；`INSERT`肯定会这样做，并且`UPDATE`可能（取决于您的确切查询）。因此，仅分析字符串可能很难做到这一点。

只要性能不是真正的问题，您就可以启动一个事务，一条一条地运行您的指令，检查每条指令的受影响行数，最后回滚您的事务。之后，您只运行那些影响 0 行的语句。

此外，请检查您的数据库文档：一些 RDBMS-es（如 Oracle）不支持回滚 DDL 语句，如`ALTER TABLE`，`DROP TABLE`等等......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T13:33:52.917

我不认为通过简单地检查给定 SQL 的内容来防止更改记录的防弹方法。例如，您可能有一个字段，其值为“update”，并且某个用户试图查询包含该值的所有行，但 SQL 不会被执行，因为它包含一个“黑名单”字符串。我想唯一安全的方法是与根本无权更改记录的用户一起执行 SQL。

# javascript - Chrome 开发工具正则表达式测试每次调用时都会返回不同的结果

> ID：13195939
> 
> 赞同：3
> 
> 时间：2012-11-02T13:14:15.600
> 
> 标签：javascript, regex

我不知道为什么，但 Chrome 开发工具正则表达式测试每次调用都会返回不同的结果。我将此作为要测试的字符串：

```
SELECT tbl_school.id AS tbl_school_id, school, tbl_students.id AS tbl_students_id, name, hobby, school_id, course_id FROM tbl_school, tbl_students WHERE tbl_school.id = 's' dd
ORDER BY tbl_school.id ASC 
```

where 正则表达式是：

```
var where_regex = /where/ig 
```

这是结果的屏幕截图，您可以看到它每次调用时都会发生变化，但我没有更改字符串中的任何内容。我真的很感激对此的解释

![在此处输入图像描述](../Images/35845ee80431cfa68201e2deda606631.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:20:55.987

这是因为`/g`标志和使用相同的正则表达式对象的事实。引用文档 ( [**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test) )

> 与`exec`（或与之结合）一样，`test`在同一个全局正则表达式实例上多次调用将超过前一个匹配项。

考虑一下：

```
var r = /w/g;
console.log( r.test('Awa') ); // true
console.log( r.test('Awa') ); // false
console.log( r.test('Awa') ); // true
console.log( r.test('Awa') ); // false

console.log( /w/ig.test('Awa') ); // true
console.log( /w/ig.test('Awa') ); // true
console.log( /w/ig.test('Awa') ); // true
console.log( /w/ig.test('Awa') ); // true 
```

在第一组语句中（使用存储在`r`变量中的相同正则表达式对象），第二个匹配从第一个匹配完成的地方开始（即，*之后* `w`）。请注意，`//g.test`在失败后使用将重置它 - 因此匹配将从该行的开头开始。

但是在第二组语句中，每次创建一个新的正则表达式对象时，其中的每一个（显然）都分别存储了最后一次匹配的位置。因此，`true`那里有四个。

最重要的是，使用`/g`with`test`方法非常……很奇怪——当然，除非你想让模式越过字符串。请记住，`test`返回`true`或`false`（并且不捕获任何内容），因此在正常情况下启用正则表达式全局模式是多余的，至少可以这么说。

# optimization - QtCreator with MinGW：如何进行编译器优化

> ID：13195940
> 
> 赞同：0
> 
> 时间：2012-11-02T13:14:16.593
> 
> 标签：optimization, mingw, qt-creator

我在 Windows 上使用 QtCreator，我想知道如何让我的编译器优化输出。

我的理解是MinGW是GCC的一个端口。所以，我应该能够使用诸如**-O2**之类的参数。但是，在“项目”栏中，我看到的唯一内容是：

*   qmake 的构建步骤（可能不在此处，qmake 是关于 .pro 文件 / MOC / Qt 的东西......）
*   mingw32-make 的构建步骤（可能）
*   清洁步骤（可能不是）

所以，我尝试在“Make arguments”框中添加 -O2，但不幸的是，我收到错误“invalid option --O”

* * *

对于任何有兴趣的人，我都在尝试实现[Ackermann 函数](http://en.wikipedia.org/wiki/Ackermann_function)，因为我读到了：

> Ackermann 函数，由于其在极深递归方面的定义，可以用作编译器优化递归能力的基准

代码（实际上并不使用 Qt）：

```
#include <QtCore/QCoreApplication>
#include <QDebug>
#include <ctime>

using namespace std;

int nbRecursion;
int nbRecursions9;

int Ackermann(int m, int n){
    nbRecursion++;
    if(nbRecursion % 1000000 == 0){
        qDebug() << nbRecursions9 << nbRecursion;

    }
    if(nbRecursion == 1000000000){
        nbRecursion = 0;
        nbRecursions9++;
    }

    if(m==0){
        return n+1;
    }
    if(m>0 && n>0){
        return Ackermann(m-1,Ackermann(m, n-1));
    }
    if(m>0 && n==0){
        return Ackermann(m-1,1);
    }
    qDebug() << "Bug at " << m << ", " << n;

}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    nbRecursion = 0;
    nbRecursions9 = 0;

    int m = 3;
    int n = 13;

    clock_t begin = clock();
    Ackermann(m,n);
    clock_t end = clock();
    double elapsed_secs = double(end - begin) / CLOCKS_PER_SEC;

    qDebug() << "There are " << CLOCKS_PER_SEC << " CLOCKS_PER_SEC";
    qDebug() << "There were " << nbRecursions9 << nbRecursion << " recursions in " << elapsed_secs << " seconds";

    double timeX = 1000000000.0*((elapsed_secs)/(double)nbRecursion);
    if(nbRecursions9>0){
        timeX += elapsed_secs/(double)nbRecursions9;
    }

    qDebug() << "Time for a function call : " << timeX   << " nanoseconds";

    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:20:40.707

`-O2`在您进行发布构建时默认使用。只有调试版本不使用优化。无论如何，如果您想使用特定的编译器选项，您可以在项目文件 ( `*.pro`) 本身中执行此操作，方法是将您的选项附加到`QMAKE_CFLAGS_RELEASE`（对于 C 文件）和`QMAKE_CXXFLAGS_RELEASE`（对于 C++ 文件）。例如：

```
QMAKE_CFLAGS_RELEASE += -O3 -march=i686 -mtune=generic -fomit-frame-pointer
QMAKE_CXXFLAGS_RELEASE += -O3 -march=i686 -mtune=generic -fomit-frame-pointer 
```

如果您真的想始终使用某些特定选项，无论它是调试版本还是发布版本，然后追加到`QMAKE_CFLAGS`and`QMAKE_CXXFLAGS`代替。但通常，您只需要发布版本中的优化选项，而不是调试选项。

# delphi - 使用 TStringGrid 的 OnDrawCell 事件绘制进度条

> ID：13195941
> 
> 赞同：-1
> 
> 时间：2012-11-02T13:14:19.603
> 
> 标签：delphi, delphi-2010

> **可能重复：**
> [网格进度条或动画](https://stackoverflow.com/questions/5149432/grid-progressbar-or-animation)
> [将图形条添加到 StringGrid col](https://stackoverflow.com/questions/13032146/add-graphical-bar-to-a-stringgrid-col)

使用 Delphi 2010，我有一个 5 列的 TStringGrid

ID、开始、结束、持续时间和用于在每个单元格中绘制进度条的列。

第 5 列的宽度（例如：60）由选项对话框中的条形宽度旋转编辑字段设置。

鉴于持续时间是（结束 - 开始）* 1440（例如：0.39 分钟），我需要将进度条绘制为总条宽度的百分比。（即 39/60 = 65%）因此，应在整个单元格上涂上 65%。它还需要显示居中的百分比。（海军蓝条和白色文字）。

谁能帮我画这个进度条？

```
procedure Tphasedata.grdMainDrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  LStrCell: string;
  LRect: TRect;
begin
 with (Sender as TStringGrid) do
  begin
    // Don't change color for first Column, first row
    if (ACol = 0) or (ARow = 0) then
      Canvas.Brush.Color := clBtnFace
    else
    begin
      case ACol of
        0: Canvas.Font.Color := clBlack;
        1: Canvas.Font.Color := clBlue;
        2: Canvas.Font.Color := clBlue;
        3: Canvas.Font.Color := clRed;
      end;
      // Draw the Band
      if ARow mod 2 = 0 then
        Canvas.Brush.Color := $00E1FFF9
      else
        Canvas.Brush.Color := $00FFEBDF;
      Canvas.TextRect(Rect, Rect.Left + 2, Rect.Top + 2, cells[acol, arow]);
      Canvas.FrameRect(Rect);

      //center the duration text
      if ACol = 3 then
      begin
        LStrCell := Cells[ACol, ARow]; // grab cell text
        Canvas.FillRect(Rect); // clear the cell
        LRect := Rect;
        LRect.Top := LRect.Top + 3; // adjust top to center vertical
        // draw text
        DrawText(Canvas.Handle, PChar(LStrCell), Length(LStrCell), LRect, DT_CENTER);
      end;

     i ACol = 4 then
     begin
      // draw progress bar here 
     end; 
    end;
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:11:49.663

```
var
   percent:Double;

procedure DrawTheText(const hDC: HDC; const Font: TFont; var Text: string; aRect:TRect);
var
 lRect:Trect;
begin
  with TBitmap.Create do
    try

      Width := aRect.Right - aRect.Left;
      Height := aRect.Bottom - aRect.Top;
      LRect :=Rect(0,0,width,height);
      Canvas.Font.Assign(Font);
      Canvas.Brush.Color := clBlack;
      Canvas.FillRect(Lrect);
      Canvas.Font.Color := clWhite;
      Canvas.TextRect(Lrect,Text,[tfCenter ,tfVerticalCenter,tfSingleLine]);
      BitBlt(hDC, aRect.Left, aRect.Top, Width, Height, Canvas.Handle, 0, 0, SRCINVERT);
    finally
      Free;
    end;
end;

procedure TForm3.DrawGrid1DrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: TRect; State: TGridDrawState);
var
  LRect:Trect;
  s:String;
  c:TCanvas;
begin
   //.....yout code
      percent := 0.5;//Random(2) / 60;
   //.... case of wished Colum
   c := DrawGrid1.Canvas;
   LRect := Rect;
   LRect.Right := Round(LRect.Left + (LRect.Right - LRect.Left)*percent);
   inflaterect(LRect,-1,-1);
   c.Brush.Color := clNavy;
   c.Brush.Style := bsSolid;
   c.Pen.Color := clBlack;
   C.FillRect(LRect);
   s := FormatFloat('0.00 %' , percent * 100 );
   DrawTheText(c.Handle,DrawGrid1.font,s,rect);
end; 
```

# jscript - 重新加载 jscript 文件的快捷方式

> ID：13195943
> 
> 赞同：0
> 
> 时间：2012-11-02T13:14:21.493
> 
> 标签：jscript, testcomplete

我正在使用`notepad++ for jscript`文件编辑和`TestComplete`使用 JScript 文件的自动化测试，但每次我退出并启动 TestComplete 时，只要我更改 Jscript 文件中的任何内容。

有没有`short-cut-Key`可以在不关闭的情况下重新加载`TestComplete`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:45:41.423

因此，您正在创建一个脚本扩展。谢谢你的澄清。我已经检查了**工具 | 自定义键盘...对话框，无法为****重新加载脚本扩展**操作分配快捷方式。因此，您只能通过手动单击“**脚本扩展**”对话框中的“**重新加载**”按钮来执行此操作。**Alt-FE**快捷方式只是打开此对话框（文件**|安装脚本扩展...**）。

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:17:16.520

[http://www.philnicholas.com/2009/05/11/reloading-your-javascript-without-reloading-your-page/](http://www.philnicholas.com/2009/05/11/reloading-your-javascript-without-reloading-your-page/)

这个页面解释了你在找什么，我想。您需要做的就是将事件更改为按下快捷键的时间。******

# c++ - C++ 在多个文件中包含一个文件

> ID：13195944
> 
> 赞同：1
> 
> 时间：2012-11-02T13:14:26.300
> 
> 标签：c++, inheritance, include, c-preprocessor

我正在尝试将某个类继承到 C++ 中的两个子类中。我希望子类并排运行，但它们都继承了超类`entity.hpp`：

```
#include "../entity.hpp"
class Npc : public Entity
{}

#include "../entity.hpp"
class Human : public Entity
{} 
```

当然，当我这样做时

`#include "Npc.hpp"`

`#include "Human.hpp"`

在同一个文件中，我遇到了一个问题，因为`entity.hpp`它包含了两次。我将如何解决这个问题？

**编辑**： .cpp 文件是一个错字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:16:29.533

要么在你的头文件中使用包含保护，要么使用`#pragma once`指令（它没有被广泛支持）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T13:17:07.220

您应该在以下位置使用[包含警卫](http://en.wikipedia.org/wiki/Include_guard)`entity.hpp`：

```
#ifndef ENTITY_HPP_
#define ENTITY_HPP_

// code

#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:17:17.813

将代码包装在头文件中，如下所示：

```
#ifndef ENTITY_HPP
#define ENTITY_HPP

<body of entity.hpp goes here>

#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:18:43.817

您应该只包含“.h”或“.hpp”文件。如果您使用 Visual Studio，请添加

```
#pragma once 
```

到每个头文件的顶部。如果你使用其他编译器，那么

```
#ifndef MY_HEADER_FILE_NAME
#define MY_HEADER_FILE_NAME

class Human : public Entity
{}

#endif 
```

# hibernate - 在 websphere 7 中持久化实体时出现 Nullpointer 异常，ear 在 Jboss 上开发和构建

> ID：13195945
> 
> 赞同：0
> 
> 时间：2012-11-02T13:14:31.827
> 
> 标签：hibernate, jboss, migration, entitymanager, websphere-7

我们有一个正在 JBoss 环境中构建和测试的应用程序。(Hibernate (Entity Beans) + Oracle DB)...当它部署在 websphere 7 中时，选择工作正常；但是当实体管理器尝试持久化一个实体时，我们得到一个 NullPointerException

```
BusinessExcep E   CNTR0020E: 
EJB has an unexpected (non-declared) exception when the method "saveOrUpdate" 
for bean "BeanId (application-ear # application-ejb-4.0.1-SNAPSHOT.jar #    
WorkEditServiceBean, C1104BFD-013A -4000-E000-172CA114A197) " 
is triggered.Exception data: java.lang.NullPointerException. 
```

被持久化的实体有一些布尔字段，它们在数据库中对应的数据类型是 varchar2(1)。该代码在 jboss 环境中运行良好。

任何线索。

堆栈跟踪：

```
11/2/12 14:33:08:083 MET] 0000003d FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on /app/WAS/dyn/was70/1.0.0.0/profiles/Node_Mit02/logs/ffdc/as_appi_ea320c1_12.11.02_14.33.06.446701466325468961692.txt com.ibm.ejs.container.BusinessExceptionMappingStrategy.setUncheckedException 506
[11/2/12 14:33:10:195 MET] 0000003d FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on /app/WAS/dyn/was70/1.0.0.0/profiles/Node_Mit02/logs/ffdc/as_appi_ea320c1_12.11.02_14.33.08.0887194928887482275608.txt com.ibm.ejs.container.EJSContainer.postInvoke 2326
[11/2/12 14:33:10:199 MET] 0000003d application   E   javax.ejb.EJBTransactionRolledbackException: nested exception is: javax.ejb.EJBException: See nested exception; nested exception is: java.lang.NullPointerException
                                 javax.faces.el.EvaluationException: javax.ejb.EJBTransactionRolledbackException: nested exception is: javax.ejb.EJBException: See nested exception; nested exception is: java.lang.NullPointerException
        at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:108)
        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
        at javax.faces.component.UICommand.broadcast(UICommand.java:387)
        at org.ajax4jsf.component.AjaxViewRoot.processEvents(AjaxViewRoot.java:329)
        at org.ajax4jsf.component.AjaxViewRoot.broadcastEventsForPhase(AjaxViewRoot.java:304)
        at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:261)
        at org.ajax4jsf.component.AjaxViewRoot.processApplication(AjaxViewRoot.java:474)
        at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
        at com.ibm.ws.cache.servlet.ServletWrapper.serviceProxied(ServletWrapper.java:307)
        at com.ibm.ws.cache.servlet.CacheHook.handleFragment(CacheHook.java:576)
        at com.ibm.ws.cache.servlet.CacheHook.handleServlet(CacheHook.java:250)
        at com.ibm.ws.cache.servlet.ServletWrapper.service(ServletWrapper.java:259)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
        at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:530)
        at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
        at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
        at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
        at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
        at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
        at com.vendo.ams.logic.lead.lead.DownloadCsvFilter.doFilter(DownloadCsvFilter.java:150)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at com.vendo.ams.logic.framework.servlet.RichFacesFirefox11Filter.doFilter(RichFacesFirefox11Filter.java:30)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:89)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
        at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
        at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
        at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
        at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
        at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:984)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
Caused by: javax.ejb.EJBTransactionRolledbackException: nested exception is: javax.ejb.EJBException: See nested exception; nested exception is: java.lang.NullPointerException
Caused by: javax.ejb.EJBException: See nested exception; nested exception is: java.lang.NullPointerException
Caused by: java.lang.NullPointerException
        at com.vendo.ams.logic.framework.template.base.InheritEntity.saveOrUpdateValidated(InheritEntity.java:32)
        at com.vendo.ams.logic.framework.template.base.InheritEntity.saveOrUpdateValidated(InheritEntity.java:1)
        at com.vendo.ams.logic.framework.template.custom.AbstractEditCustomEntity.saveOrUpdate(AbstractEditCustomEntity.java:77)
        at com.vendo.ams.logic.entity.EntityEditServiceBean.saveOrUpdate(EntityEditServiceBean.java:119)
        at com.vendo.ams.logic.entity.EJSLocal0SFEntityEditServiceBean_96f7c97b.saveOrUpdate(EJSLocal0SFEntityEditServiceBean_96f7c97b.java)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
        at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
        at org.jboss.seam.intercept.ClientSideInterceptor$1.proceed(ClientSideInterceptor.java:76)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
        at org.jboss.seam.ejb.RemoveInterceptor.aroundInvoke(RemoveInterceptor.java:43)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
        at org.jboss.seam.intercept.ClientSideInterceptor.invoke(ClientSideInterceptor.java:54)
        at org.javassist.tmp.java.lang.Object_$$_javassist_seam_14.saveOrUpdate(Object_$$_javassist_seam_14.java)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:280)
        at org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59)
        at org.jboss.el.parser.AstMethodSuffix.invoke(AstMethodSuffix.java:65)
        at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
        at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
        at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
        at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:94)
        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
        at javax.faces.component.UICommand.broadcast(UICommand.java:387)
        at org.ajax4jsf.component.AjaxViewRoot.processEvents(AjaxViewRoot.java:329)
        at org.ajax4jsf.component.AjaxViewRoot.broadcastEventsForPhase(AjaxViewRoot.java:304)
        at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:261)
        at org.ajax4jsf.component.AjaxViewRoot.processApplication(AjaxViewRoot.java:474)
        at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
        at com.ibm.ws.cache.servlet.ServletWrapper.serviceProxied(ServletWrapper.java:307)
        at com.ibm.ws.cache.servlet.CacheHook.handleFragment(CacheHook.java:576)
        at com.ibm.ws.cache.servlet.CacheHook.handleServlet(CacheHook.java:250)
        at com.ibm.ws.cache.servlet.ServletWrapper.service(ServletWrapper.java:259)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
        at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:530)
        at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
        at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
        at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
        at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
        at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
        at com.vendo.ams.logic.lead.lead.DownloadCsvFilter.doFilter(DownloadCsvFilter.java:150)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at com.vendo.ams.logic.framework.servlet.RichFacesFirefox11Filter.doFilter(RichFacesFirefox11Filter.java:30)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:89)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
        at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
        at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
        at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
        at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
        at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
        at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
        at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:984)
        at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

# algorithm - 阶乘的最后一个非零数字

> ID：13195946
> 
> 赞同：8
> 
> 时间：2012-11-02T13:14:37.630
> 
> 标签：algorithm, math

我想确定阶乘的最后一个非零数字。

我尝试使用除法来解决它：将数字除以 10 或其倍数。

```
Ex : 7! = 5040 => 4 
```

所以我将 5040 除以 10 得到 4 作为结果。

但是，让我们说，我们应该在逻辑中使用数字 7 而不是阶乘 (5040) 的值。

请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T14:21:51.877

1.  计算 n! 的素数分解！如下：
    *   对于每个素数`p`<= `n`， p 的指数是
        ![](../Images/7a882cca9b27e2ba1abd2c7754ac3477.png)
2.  从素数分解的指数中减去指数`5`并`2`丢弃所有的五。
3.  将剩余的素数分解模 10 相乘。注意，这样做时，您可以使用以下等式：（![](../Images/4e6d809af898ff307b90283ef4de546b.png)对于 i ≥ 0）。如有必要，也可以对单个产品进行 mod 10。

* * *

我利用一些空闲时间在 bash 中实现了这个解决方案。（bash？好吧，为什么不呢？）：

```
last_nonzero () { 
    local n=$1
    local d=$(power_mod_10 3 $(count_factors $n 3))
    d=$((d * $(power_mod_10 2 $(($(count_factors $n 2)
                               - $(count_factors $n 5))))))
    for p in $(primes 7 $n)
    do
        d=$((d * $(power_mod_10 $p $(count_factors $n $p)) % 10))
    done
    echo $d
}

count_factors () { 
    local n=$1 p=$2
    local d=$((n/p))
    local q=$d
    while ((q >= p)); do
        q=$((q/p)) d=$((d+q))
    done
    echo $d
}

power_mod_10 () { 
    local mods=..........0161000101012300070901490009010187000309
    local p=$(($1%10)) exp=$(($2%4+1))
    echo ${mods:$exp$p:1}
} 
```

是的，最后一个是hack。

另外：还有一个更好的递归解决方案。搜索[http://math.stackexchange.com](http://math.stackexchange.com)，甚至 google。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T16:42:17.480

假设 D(N) 表示阶乘的最后一个非零数字，那么

D(N)=4*D[N/5]*D(N的个位)[如果N的十位为奇数] D(N)=6*D[N/5]*D(N的个位)[如果N的十位是偶数]; 其中 [N/5] 是最大整数函数并且 D(1)=1 D(2)=2 D(3)=6 D(4)=4 D(5)=2 D(6)=2 D(7 )=4 D(8)=2 D(9)=8

例如 D(26)=6*D[26/5]*D(6)=6*D(5)*D(6)=6*2*2=4[D(5) 表示最后一个非零位5!=120 即 2，与 D(6) 相同] D(33)=4*D[33/5]*D(3)=4*D(6)*D(3)=4*2* 6=8

参考：http: [//quantomania.blogspot.in/2011/08/last-non-zero-digit-of-factorial.html](http://quantomania.blogspot.in/2011/08/last-non-zero-digit-of-factorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T13:51:28.280

当下一个（修改的）数字以 5 结尾时，需要保留**1 个以上的数字。**

第一个这样的位置出现在 15！，当 14！= 87178291200 和 2*15=30 但 15！= 1307674368000。而是 12*15 = 180，这给出了正确的结果。

编辑：但即使将数字加到 2 也不足以满足 25 的一般情况！一个需要 24 的最后 3 位数字！= 936 才能得到正确答案，这意味着最终这种方法经不起推敲。

# php - 来自 PHP 的 Ajax 调用以执行单独的 PHP；有什么危险吗？

> ID：13195949
> 
> 赞同：0
> 
> 时间：2012-11-02T13:14:40.583
> 
> 标签：php, javascript, ajax

我正在尝试在后台执行 php 脚本，因此用户不必等待处理完成。

在 PHP 中，我可以调用 javascript：

```
?>
<script>
window.top.hdReq();
</script>
<? 
```

它调用 javascript XMLHttpRequest 来触发 php 脚本。我对该脚本的任何响应都不感兴趣。

我知道这可能是一种解决方法，但是......它现在就像一个魅力:-)而且由于我不知道网站最终在什么样的服务器上，我必须寻找一种方法适用于所有场合。

我的问题是，在我编写整个 php 脚本之前：以这种方式执行它是否存在任何危险或问题？（除了用户不允许使用 javascript，但在这种情况下，整个网站都无法工作:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:17:23.507

There is no real danger in doing it this way...

Be sure to sanitize any input you post/send to the php script and be sure to pass a token to ensure it's actually your code sending the requests to it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:23:25.640

没有危险。但是想想这个脚本会做什么。如果它会做一些需要很多时间的事情，那么当使用关闭页面并且脚本没有完成他的工作时，它**可能会**被 Apache 杀死，直到工作没有完成。

# java - JEdi torPane 和字体比例

> ID：13195952
> 
> 赞同：0
> 
> 时间：2012-11-02T13:15:04.930
> 
> 标签：java, swing, fonts, graphics2d, jeditorpane

我有一些 Graphics2D 区域，我在其中绘制几何图元。它可以使用 g2.scale(x, y) 轻松缩放。现在我想在我的可扩展区域中绘制一些文本并直接在其中编辑文本。它也有效，但不幸的是有一个问题，可以说明。这是它以 100% 的比例查看监视器的方式： ![在此处输入图像描述](../Images/e1473fb849fb42a873e494cf192fea9b.png)

这就是 300% 发生的情况：

![在此处输入图像描述](../Images/eaeb915c594c3feb42b7ee38e945f8e5.png)

字母“A”的位置几乎可以，但字母B的位置左右跳跃。我想 JEditorPane 只是采用最近的字体来呈现缩放字体。不同字体的空间大小可能会略有不同（以像素为单位）。这在字符串的开头并没有真正产生问题，但在结尾处错误会累积。

我怎样才能实现 JEditorPane 在任何 g2.scale() 的完全相同的位置呈现字体？（例如，OpenOffice 工作正常，同样的问题）。

升级版：sscce

```
class Canvas extends JPanel {
    @Override
    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        g.translate(p.x, p.y);
        g2.scale(scale, scale);
        g2.setColor(Color.GRAY);
        g2.fill(g2.getClip());

        JEditorPane pane = new JEditorPane();
        pane.setFont(pane.getFont().deriveFont(22f));
        pane.setText("A                                                                                              B");
        pane.setBounds(new Rectangle(100, 100, 700, 30));
        g2.translate(100, 100);
        pane.paint(g2);
        g2.translate(-100, -100);

        g2.setColor(Color.BLACK);
        g2.draw(new Rectangle(100, 100, 700, 30));

        g2.scale(1 / scale, 1 / scale);
        g.translate(-p.x, -p.y);
        g2.setColor(Color.GREEN);
        g2.setFont(g2.getFont().deriveFont(33f));
        g2.drawString("Scale (mouse wheel): " + new DecimalFormat("#.##").format(scale * 100) + "%", 2, 768-66);
        g2.drawString("(Drag mouse to move)", 2, 768-33);
    }

// +++++++++++++++++++++++++++ GUI +++++++++++++++++++++++++++++++++++++

    public Canvas() {
        addMouseWheelListener(new MouseWheelListener() {
            @Override
            public void mouseWheelMoved(MouseWheelEvent e) {
                scale += e.getWheelRotation() * 1.0 / 10;
                repaint();
            }
        });

        addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent e) {
                p.x = e.getPoint().x - startDrag.x;
                p.y = e.getPoint().y - startDrag.y;
                repaint();
            }
        });

        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                startDrag = e.getPoint();
                startDrag.x -= p.x;
                startDrag.y -= p.y;
            }
        });
    }

    public static double scale = 1.0;
    public static Point p = new Point();
    public static Point startDrag = new Point();
}

public class Main {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new Canvas());

        frame.setSize(1024, 768);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:50:19.497

看到有[http://java-sl.com/articles.html](http://java-sl.com/articles.html)文章关于 JEditorPane 缩放。“使用自定义 GlyphPainter 和分数测量支持进行缩放”一文解释了字体缩放和测量问题。您可以使用基于 TextLayout 或基于 GlyphVector 的绘画来修复分数 fnt 测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:51:22.110

我和同一个战斗了一段时间。当您尝试右对齐文本并使用较小的字体（因此行上有很多字符）时，问题会更大。缩放只是乘以错误并使其易于可见。

使用上面提到的“使用自定义 GlyphPainter 和分数测量支持进行缩放”文章和代码将有助于从 int 切换到 float 消除舍入误差。它几乎可以正常工作，但不完全是，即那里正在发生其他事情。

在 ScaledGlyphPainter.getTabbedTextWidth 我替换了实际测量

```
nextX += metrics.getStringBounds(txtStr, n - charCount, n, painterGr).getWidth(); 
```

和

```
FontRenderContext  frc = new FontRenderContext(new AffineTransform (), true, true);
TextLayout layout = new TextLayout (text, metrics.getFont(), frc);
nextX += layout.getBounds().getWidth(); 
```

显然，两种测量都会在同一文本上返回不同的结果！！！！如果以一种方式进行测量并以另一种方式进行绘制，则会出现绘图错误。一旦我将上面的代码更改为使用 TextLayout 测量，所有问题都消失了，并且可以根据需要进行调整。

# c# - 我们可以使用 List.Except 来确认一个列表是另一个列表的子集吗

> ID：13195954
> 
> 赞同：1
> 
> 时间：2012-11-02T13:15:08.727
> 
> 标签：c#, .net

我有 2 个长类型列表。

List1 带有值`{1,2,3,4,5}`， List2 带有`{1,4,5,6}`.

我可以`List2.Except(List1)`用来知道 List2 是否是 List1 的子集吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:17:09.007

只要`List2`不包含重复项，当且仅当是 的子集时`List2.Except(List1))`才会为空。`List2``List1`

如果您的列表可能包含重复项，请注意这将考虑`{1, 1}`的子集`{1, 2}`，这可能是您想要的，也可能不是。

注意，您可以使用`.Any()`它轻松检查结果是否`Except`为空：`x.Any()`当且仅当`x`非空时为真。

# php - 如何在 CakePHP 中嵌入 swf 文件

> ID：13195958
> 
> 赞同：1
> 
> 时间：2012-11-02T13:15:19.880
> 
> 标签：php, html, cakephp, flash

如何`.swf`在 CakePHP 应用程序中嵌入文件？

是否有任何简单的方法可以将 swf 文件嵌入到我的 CakePHP`.ctp`文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:22:13.397

只需忽略它是 CTP 文件这一事实，并像在任何其他 php/html 文件中一样添加它。CTP 只是一个扩展，但归结为只是一个 PHP 文档。

一些演练：

[如何在 HTML 页面中嵌入 SWF 文件？](https://stackoverflow.com/questions/137326/best-way-to-embed-a-swf-file-in-a-html-page)

[http://www.yofla.com/flash/embedding-swf/](http://www.yofla.com/flash/embedding-swf/)

...等（可以谷歌“如何嵌入 swf”并获得大约 600 万个示例 :)

# c# - Wcf - 异常前重试3次？

> ID：13195959
> 
> 赞同：3
> 
> 时间：2012-11-02T13:15:23.430
> 
> 标签：c#, .net, wcf, .net-4.0, request

我被要求在生成请求异常之前建立 3 次重试机制。

我们有这个拓扑：

![在此处输入图像描述](../Images/a8b6de698a8779f67d7035100736189a.png)

`Service1`来电`Service2`。

如果连续 3 次失败 - 生成异常。

中是否有任何重试机制`WCF`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:50:14.350

解决此问题的 WCF 技术是**Reliable Messaging**。我认为**MaxRetryCount**是您正在寻找的属性。

[这](https://stackoverflow.com/a/1968874/233095)是一个使用 MaxRetryCount 进行自定义绑定的示例。

# c# - 有哪些模板引擎允许在 Microsoft Word 中创建模板？

> ID：13195973
> 
> 赞同：3
> 
> 时间：2012-11-02T13:16:00.830
> 
> 标签：c#, .net, templates, ms-word, template-engine

在我正在进行的项目中，我们（很可能）需要以下功能：用户上传一个 word 文档（我相信可以限制为 DOCX），这是一个带有占位符的模板。然后系统获取该文档，用数据填充占位符，并生成最终的 Word 文档（也可选择将其转换为 PDF）。

在最坏的情况下，我可以自己挖掘 DOCX 的内容，我们在另一个项目中使用 XLSX 进行了此操作（使用 Microsoft 提供的低级库），但这很痛苦，我想知道是否有一些预制的东西。

**补充：**完全忘记了 - 我们正在使用 Visual Studio 2012，C# 4.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:26:15.913

您还没有提到您使用的语言/平台肯定会影响您可用的解决方案的范围。 [Docmosis](http://www.docmosis.com)是一个文档引擎，您可以为模板（doc、docx、odt）提供占位符并生成各种格式的文档（doc、docx、pdf、rtf、odt）。有一个 java 库版本以及一个基于 REST 的 api 版本。请注意，我为创建 Docmosis 的公司工作。

另一种选择可能是[JODReports](http://jodreports.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T04:29:50.527

DevExpress 有一个富文本编辑器，它几乎具有 Microsoft Word 的所有功能。我们在相同的场景中使用过它，它比使用 Microsoft Word 容易得多。

看看[这个](http://www.devexpress.com/Products/NET/Controls/WinForms/Rich_Editor/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T04:12:46.270

有许多预先存在的解决方案；您可以尝试谷歌搜索“c# 文档汇编或自动化”

有几点需要考虑：

*   谁将创作模板？您可能需要一个易于使用的创作工具
*   文档可能包含条件文本或重复内容（例如表格行）

这些系统以不同的方式工作，包括文档中的魔术字符串、Word 字段和内容控件。我个人喜欢使用内容控件。

# ios - 使用第 5 代或第 4 代 iPod Touch 进 行开发？

> ID：13195974
> 
> 赞同：0
> 
> 时间：2012-11-02T13:16:04.113
> 
> 标签：ios, ios5, ios6, ipod-touch

我正在为一个学校项目开发一个 iOS 应用程序。

我的应用程序需要一些功能：

*   JSON数据交换
*   照片上传

在我看来，iOS5 或 iOS6 都适合我的要求。

**我的问题是：**

1.  关于未来的发展，买 iPod Touch 第 5 代而不是第 4 代更好吗？
2.  如果我为第 5 代 iPod Touch 开发。如果屏幕更高，我的应用程序是否会向后兼容以前的 iOS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:30:22.657

iPod Touch 4 和 5 都可以很好地为您的开发服务。

如果 iPod Touch 4 仍然安装了 iOS 5，那么您可以在手机上测试 iOS 5，在模拟器中测试 iOS 6。但是即使您的设备安装了 iOS 6，您仍然可以为 iOS 5 进行开发。使用模拟器，您可以测试其他 iOS 版本。

屏幕尺寸类似。您可以编写与两种屏幕尺寸兼容的应用程序，并且可以使用模拟器对它们进行测试。

当然，您不能在 iPod 上测试电话功能。但这似乎不是一个要求。

# java - 在哪里可以找到异常列表及其发生时间

> ID：13195988
> 
> 赞同：0
> 
> 时间：2012-11-02T13:16:51.977
> 
> 标签：java, database, spring

我正在使用`SimpleJdbcTemplate`连接到数据库。我在哪里可以找到所有异常以及它们何时被抛出？我只知道几个，例如：

```
org.springframework.jdbc.BadSqlGrammarException 
```

当 SQL 查询语法错误时发生。但我需要了解更多，例如当数据库无法访问或存在锁定等时会引发什么异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:20:59.277

看[一下`SimpleJdbcTempate`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html). 我发现这个例外：

*   [`DataAccessException`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/dao/DataAccessException.html)

它有这些已知的子类：

*   [`NonTransientDataAccessException`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/dao/NonTransientDataAccessException.html)与子类：
    *   `CleanupFailureDataAccessException`
    *   `DataIntegrityViolationException`
    *   `DataRetrievalFailureException`
    *   `DataSourceLookupFailureException`
    *   `InvalidDataAccessApiUsageException`
    *   `InvalidDataAccessResourceUsageException`
    *   `NonTransientDataAccessResourceException`
    *   `PermissionDeniedDataAccessException`
    *   `UncategorizedDataAccessException`
*   [`RecoverableDataAccessException`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/dao/RecoverableDataAccessException.html)
*   [`TransientDataAccessException`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/dao/TransientDataAccessException.html)与子类：
    *   `ConcurrencyFailureException`
    *   `QueryTimeoutException`
    *   `TransientDataAccessResourceException`

也阅读Spring 指南中的[文档。`JdbcTemplate`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-JdbcTemplate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:21:27.180

参考 Spring API

```
http://static.springsource.org/spring/docs/3.0.x/javadoc-api/ 
```

几个例外列表...

```
BadSqlGrammarException 
CannotGetJdbcConnectionException 
IncorrectResultSetColumnCountException 
InvalidResultSetAccessException 
JdbcUpdateAffectedIncorrectNumberOfRowsException 
LobRetrievalFailureException 
SQLWarningException 
UncategorizedSQLException 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:21:44.453

您将在该框架的 JavaDoc 中找到这些详细信息。[这](http://static.springsource.org/spring/docs/3.1.3.RELEASE/javadoc-api/)是 3.0.x 文档。如果你查看 org.springframework.jdbc 包，你会发现列出了几个例外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T13:20:32.820

通常，您正在寻找[`DataAccessException`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/dao/DataAccessException.html)从: 和 RecoverableDataAccessException 开始[`TransientDataAccessException`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/dao/TransientDataAccessException.html)的[`NonTransientDataAccessException`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/dao/NonTransientDataAccessException.html)所有[子](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/dao/RecoverableDataAccessException.html)类。继续寻找子类。

有很多这样的异常，您必须阅读 JavaDocs 以了解它们何时被抛出。Spring 在将特定于数据库的异常转换为标准层次结构方面做得很好。

# python - 使用当前类实例的属性作为方法参数的默认值

> ID：13195989
> 
> 赞同：60
> 
> 时间：2012-11-02T13:16:59.157
> 
> 标签：python, function, default, default-parameters

> **可能重复：**
> [参数的默认值作为实例方法的结果](https://stackoverflow.com/questions/13075044/default-value-of-parameter-as-result-of-instance-method)

虽然可以在 python 中为函数参数设置默认值：

```
def my_function(param_one='default')
    ... 
```

似乎无法访问当前实例（self）：

```
class MyClass(..):

    def my_function(self, param_one=self.one_of_the_vars):
        ... 
```

我的问题：

*   我无法访问当前实例来设置函数中的默认参数，这是真的吗？
*   如果不可能：原因是什么？是否可以想象这在未来的 python 版本中是可能的？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-02T13:18:48.700

It's written as:

```
def my_function(self, param_one=None): # Or custom sentinel if None is vaild
    if param_one is None:
        param_one = self.one_of_the_vars 
```

And I think it's safe to say that will never happen in Python due to the nature that `self` doesn't really exist until the function starts... (you can't reference it, in its own definition - like everything else)

For example: you can't do `d = {'x': 3, 'y': d['x'] * 5}`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-02T13:22:55.583

它比你想象的要多得多。考虑默认值是*静态*的（=指向*一个*对象的常量引用）并存储在定义中的某处；在方法定义时进行评估；作为*类*的一部分，而不是实例。由于它们是恒定的，因此它们不能依赖于`self`。

这是一个例子。这是违反直觉的，但实际上非常有意义：

```
def add(item, s=[]):
    s.append(item)
    print len(s)

add(1)     # 1
add(1)     # 2
add(1, []) # 1
add(1, []) # 1
add(1)     # 3 
```

这将打印`1 2 1 1 3`.

因为它的工作方式与

```
default_s=[]
def add(item, s=default_s):
    s.append(item) 
```

显然，如果你修改`default_s`，它会保留这些修改。

有多种解决方法，包括

```
def add(item, s=None):
    if not s: s = []
    s.append(item) 
```

或者你可以这样做：

```
def add(self, item, s=None):
    if not s: s = self.makeDefaultS()
    s.append(item) 
```

然后该方法`makeDefaultS`将有权访问`self`.

另一种变化：

```
import types
def add(item, s=lambda self:[]):
    if isinstance(s, types.FunctionType): s = s("example")
    s.append(item) 
```

这里的默认值`s`是**工厂函数**。

您可以结合所有这些技术：

```
class Foo:
    import types
    def add(self, item, s=Foo.defaultFactory):
        if isinstance(s, types.FunctionType): s = s(self)
        s.append(item)

    def defaultFactory(self):
        """ Can be overridden in a subclass, too!"""
        return [] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T13:20:47.710

参数的默认值在“编译”时评估一次。所以显然你不能访问`self`. 经典示例`list`作为默认参数。如果向其中添加元素，则参数的默认值会更改！

解决方法是使用另一个默认参数，通常是`None`，然后检查并更新变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T13:24:07.937

您在这里做出了多个错误的假设 - 首先，函数属于一个类而不是一个实例，这意味着所涉及的实际函数对于一个类的任何两个实例都是相同的。其次，默认参数在编译时评估并且是常量（如常量对象引用 - 如果参数是可变对象，您可以更改它）。因此，您无法访问`self`默认参数，也永远无法访问。

# java - 构建项目时如何构建和安装 Maven 依赖项？

> ID：13195992
> 
> 赞同：0
> 
> 时间：2012-11-02T13:17:11.200
> 
> 标签：java, maven

我有两个 maven 项目 A 和 B，A 依赖于 B。当 B 更新时，我需要执行以下步骤（构建 A）：

1.  构建 B
2.  安装 B
3.  建个

是否可以将步骤 1 和 2 组合在一起，并自动构建并提供项目 B 的 jar 给 A？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:20:17.607

您可以尝试使用[多模块父 pom](http://maven.apache.org/pom.html#Aggregation)一次构建两者。这并不完全是一回事，但是在使用多个 pom 时它会变得更加容易。父 pom 上的 build clean install 将对它的每个孩子执行相同的操作，他们将看到可用的最新版本。

实际上，对于您的情况，您可能最好`mvn clean install`将步骤 1 和 2 合并到一个命令行中。`build`如果没有可用的源，将安装。如果您有多个 pom 的情况（我们的案例 5），则多 pom 会更好。

此外，您可以编写一个快速批处理脚本或单行 PowerShell 或 Bash 来执行批处理脚本可以执行的操作。

# cron - 夏令时和 Cron

> ID：13195999
> 
> 赞同：47
> 
> 时间：2012-11-02T13:17:28.140
> 
> 标签：cron, dst

如果 Cron 有一个工作计划在凌晨 2 点运行，一个在凌晨 3 点运行，那么这些工作将如何受到夏令时的影响？

当时间倒退一小时时，时间是否直接从凌晨 2:59:59 转到凌晨 2:00:00？这意味着凌晨 2 点的作业将运行两次，而凌晨 3 点的作业将运行一次？或者时间是否首先更改为凌晨 3:00:00，然后是凌晨 2:00:00，从而导致两个作业运行两次？

当时间向前移动一个小时时，时间是否从凌晨 1:59:59 变为凌晨 3:00:00 导致凌晨 2 点作业不运行而凌晨 3 点作业运行一次？还是时间从凌晨 2:00:00 转移到凌晨 3:00:00 导致两个作业都运行一次？

简而言之，我想知道的是，当增加一个小时时，凌晨 3 点会发生一次或两次，而失去一个小时，凌晨 2 点是否会发生。在 Google 上查找时，我无法找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-02T15:56:34.113

答案将取决于您使用的 cron 的变体/扩展。某些变体不处理夏令时，导致作业丢失和作业运行两次。

如果您使用的是 Paul Vixie cron，那么它会处理 DST 更改。根据[cron 手册页](https://web.archive.org/web/20130905110602/http://unixhelp.ed.ac.uk/CGI/man-cgi?cron+8)：

> cron 每分钟检查一次它的假脱机目录的 modtime（或 /etc/crontab 上的 modtime）是否已更改

此外，参考夏令时（第 2 段清楚地解释了你的答案）

> 夏令时和其他时间变化
> 
> ```
>  Local time changes of less than three hours, such as  those  caused  by
>    the  start or end of Daylight Saving Time, are handled specially.  This
>    only applies to jobs that run at a specific time and jobs that are  run
>    with  a    granularity  greater  than  one hour.  Jobs that run more fre-
>    quently are scheduled normally.
> 
>    If time has moved forward, those jobs that would have run in the inter-
>    val that has been skipped will be run immediately.  Conversely, if time
>    has moved backward, care is taken to avoid running jobs twice.
> 
>    Time changes of more than 3 hours are considered to be  corrections  to
>    the clock or timezone, and the new time is used immediately. 
> ```

因此，每当时间转移可能是 2:59:59 或 3:00:00 时，cron 会通过处理情况并仅运行错过的作业来处理作业，并避免运行已经运行的作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-25T13:43:45.300

说清楚，这取决于你住在哪里，如何安排你的 cron 作业（你需要照顾的 Unix cron，而 Java 计划程序自己照顾！）。

在美国，时钟在当地时间凌晨 2:00 更改。在春天，时钟从凌晨 1:59 到凌晨 3:00 向前跳；在秋季，时钟从凌晨 1:59 回落到凌晨 1:00

在欧盟，时钟在世界时间凌晨 1:00 更改。在春天，时钟从上午 12:59 到凌晨 2:00 向前跳；在秋季，时钟从凌晨 1:59 回落到凌晨 1:00

示例：如果您在 2020 年 10 月 25 日今天凌晨 1:30 有一个 Unix cron 作业，那么您的作业会运行两次。