# StackOverflow 问答 14401000-14401999

# java - 如何理解我们在哪个操作系统上？

> ID：14401000
> 
> 赞同：0
> 
> 时间：2013-01-18T14:27:25.667
> 
> 标签：java, operating-system, jnotify

我正在使用 JNotify api 在计算机中收听一些路径。但是由于查看文件系统是一个相对较低级别的事情，因此它使用不同的库用于不同的操作系统，例如 linux、mac 或 windows。32、64 位也有区别。我的问题是如何选择要使用的库。当我将它们全部添加到构建路径时，会导致错误。我需要一些我认为的配置，但我不知道如何：/任何帮助将不胜感激。顺便说一句，我在 Eclipse 上使用 java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:29:41.747

```
System.getProperty("os.name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:29:49.827

如果您使用 Maven，您可以为每个目标创建一个配置文件，并为每个目标操作系统构建一个特定的 .jar 文件。

尝试为每个平台创建一个二进制文件是一件复杂的事情。我会为每个目标操作系统分别创建一个分发包，以避免应用程序复杂化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:31:34.023

您可以使用 os.arch/os.name 系统属性找出您正在运行的平台。有关更多详细信息，请参阅类似问题的[此答案。](https://stackoverflow.com/a/808314/252840)

至于加载正确的库，您可以将每个特定于平台的类打包到它们自己的 jar 中并动态加载它们。有关示例，请参[见此问题。](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:34:01.067

您可以使用系统级属性，例如`os.arch`和`os.name`，`os.version`例如：

```
String architecture = System.getProperty("os.arch");
String os = System.getProperty("os.name"); 
```

在我的机器上，它分别返回“amd64”和“Windows 7”。您还可以`file.separator`知道系统属性在 Linux 和 Mac 上应该返回一个正斜杠 ("/")，而在 Windows 上它应该返回一个反斜杠 ("\")/

# android - Google Play 帐户的 Google Checkout 交易

> ID：14401001
> 
> 赞同：1
> 
> 时间：2013-01-18T14:27:36.853
> 
> 标签：android, api, google-play, google-checkout, android-pay

情况：

1.  我们公司在 Google Play 中有一个应用程序。应用程序使用应用内购买和有关支付交易的信息显示在 google checkout 中。

2.  我们公司使用内部分析系统来查看完成了多少付款，我们得到了多少钱等。

3.  我需要创建一些方法来获取有关从 google play/checkout(#1) 到我们的系统 (#2) 的付款信息。

根据互联网研究，我发现以下方法可以做到这一点：

1.  轮询 API
2.  通知历史 API
3.  订单报告 API

所有这些系统都对我有用，但是，我需要以某种方式获取 Merchand Key 以便能够从系统请求数据。

商户密钥应该位于设置 -> 集成中，但是，我们公司的 google checkout 帐户没有“集成选项卡”。根据interenet，原因是我们不是“标准商家而是google play商家”。

问题是：

1.  如何从 google play 获取有关付款的信息？
2.  有没有其他方法可以做这样的事情，例如直接从 google play ？
3.  或者，有没有其他方法可以获得商家密钥？

我是 Android 或 google play 的新手，非常需要帮助。

# jquery - Jquery append 不适用于动态内容？

> ID：14401002
> 
> 赞同：0
> 
> 时间：2013-01-18T14:27:39.327
> 
> 标签：jquery, html

嗨，我正在制作一个 Web 应用程序，并且有设置变量的按钮。我希望将变量添加到我使用行拆分创建的 div 或元素中。我已经尝试过，但现在成功了，我尝试将 div 从“P”更改为 D，但它不起作用。我也尝试过双击，以免干扰单击。

我已经没有想法了。我最初在插入符号处添加了此内容，但我不希望人们在我的文本区域中运行代码。

这是[jsfiddle](http://jsfiddle.net/fergusp/U4phR/2/)

JS

```
$(document).ready(function () {

    var toAdd = "</br>"
    $('input[id="freeSchoolMeals"]').click(function () {
        toAdd = '<div id="fsm">FSM</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="englishAdditional"]').click(function () {
        toAdd = '<div id="eal">EAL</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="giftedTalented"]').click(function () {
        toAdd = '<div id="gt">G&T</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="schoolAction"]').click(function () {
        toAdd = '<div id="sca">ScA</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="schoolActionPlus"]').click(function () {
        toAdd = '<div id="sap">SAP</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="statement"]').click(function () {
        toAdd = '<div id="stm">STM</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="speechLang"]').click(function () {
        toAdd = '<div id="slcn">SLCN</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="specificLearn"]').click(function () {
        toAdd = '<div id="spl">SpLD</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="mildLearn"]').click(function () {
        toAdd = '<div id="mld">MLD</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="behaviour"]').click(function () {
        toAdd = '<div id="besd">BESD</div>';
        alert(toAdd);
        return false;
    });
    $('input[id="autisticSpectrum"]').click(function () {
        toAdd = '<div id="asd">ASD</div>';
        alert(toAdd);
        return false;
    });

    $("p").dblclick(function () {
        var newContent = toAdd;
        $(this).append(newContent);
    });

    $("textarea").keyup(splitLine);

    function splitLine() {
        //$("#opt").empty();
        var lines = $("textarea").val().split(/\n/g);
        for (var i = 0; i < lines.length; i++) {
            var ele;
            if ($("p:eq(" + i + ")").get(0)) {
                ele = $("p:eq(" + i + ")");
                ele.html(lines[i]);
            } else {
                ele = $("<p>");
                ele.html(lines[i]);
                $("#opt").append($(ele).draggable());
            }
        }
    }
    $("#toggleButton").toggle(function () {
        $('#comments').animate({
            height: 650
        }, 200);
    }, function () {
        $('#comments').animate({
            height: 22
        }, 200);
    });

    $(document).keyup(function (e) {
        if (e.keyCode == 13) { // enter
            Search();
            return false; //you can also say e.preventDefault();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:41:26.370

```
$("p").dblclick(function(){ 
```

只会将处理程序附加到`p`您附加处理程序时存在的aragraphs。由于您`p`稍后要添加更多 aragraph，除非您想在创建新元素时动态附加事件处理程序，否则您需要将事件处理委托给其他一些元素，即附加处理程序时存在的一个元素，例如`document`. [`$().on`](http://api.jquery.com/on/)可以执行委托：

```
$(document).on("dblclick", "p", function(){ 
```

如果您使用的是旧版本的 jQuery，请[`delegate`](http://api.jquery.com/delegate/)改用：

```
$(document).delegate("p", "dblclick", function(){ 
```

（除了这一行之外，您无需更改任何其他内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:40:15.463

执行此行时，绑定`$("p").dblclick()`仅绑定到所有**现有元素。** `p`因此，您的函数中所有新创建`p`的元素`spitline`都不会与任何事件绑定。创建时需要为**每个**元素绑定`dblclick`事件。 **`p`**

 **您的代码可以这样修改：

```
function pDblclick()
{
    var newContent = toAdd;
    $(this).append(newContent);
}

/* remove the old binding to all p element $('p').dblclik(...) */

/* This function is modified */
function splitLine() {
    //$("#opt").empty();
    var lines = $("textarea").val().split(/\n/g);
    for (var i = 0; i < lines.length; i++) {
        var ele;
        if ($("p:eq(" + i + ")").get(0)) {
            ele = $("p:eq(" + i + ")");
            ele.html(lines[i]);
        } else {
            ele = $("<p>");
            ele.html(lines[i]);
            ele.dblclick(pDblclick); // binding the event to the created p
            $("#opt").append($(ele).draggable());
        }
    }
} 
```**

# ios - 更新 NSManagedObject 时 EXC_BAD_ACCESS 崩溃

> ID：14401006
> 
> 赞同：1
> 
> 时间：2013-01-18T14:27:56.940
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext, nsoperation

我有一个从服务器提取 JSON 数据的应用程序，将数据解析为 NSManagedObject 子类，然后这些 NSManagedObject 子类用作各种视图控制器中的属性。

我遇到的麻烦是，在未来的某个时候，服务器上的数据会发生变化，这将触发更新拉取请求。当尝试更新 NSManagedObject 子类时，如果用户尝试通过 UI 修改 NSManagedObject，例如回答更新该 NSManagedObject 关系的问题，则应用程序将崩溃。

是否可以使用 NSManagedObject 来向用户显示数据并同时在不同的线程上更新 NSManagedObject 的记录？

这是我在错误之后得到的回溯：

```
* thread #1: tid = 0x1c03, 0x003d5e6d libsqlite3.dylib`sqlite3VdbeExec + 54749, stop reason = EXC_BAD_ACCESS (code=2, address=0x0)
frame #0: 0x003d5e6d libsqlite3.dylib`sqlite3VdbeExec + 54749
frame #1: 0x00343be1 libsqlite3.dylib`sqlite3_step + 3169
frame #2: 0x0071419f CoreData`_execute + 143
frame #3: 0x00714011 CoreData`-[NSSQLiteConnection execute] + 2801
frame #4: 0x007285ce CoreData`-[NSSQLChannel selectRowsWithStatement:] + 94
frame #5: 0x0073128f CoreData`newFetchedRowsForFetchPlan_MT + 1279
frame #6: 0x0071c6e3 CoreData`-[NSSQLCore newRowsForFetchPlan:] + 323
frame #7: 0x0071be07 CoreData`-[NSSQLCore objectsForFetchRequest:inContext:] + 711
frame #8: 0x0071b8f4 CoreData`-[NSSQLCore executeRequest:withContext:error:] + 404
frame #9: 0x0071aa6d CoreData`-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 2445
frame #10: 0x007189c9 CoreData`-[NSManagedObjectContext executeFetchRequest:error:] + 569
frame #11: 0x0002f7a4 TQ`+[QTQCoreDataManager retrieveAllEntriesForEntityName:stringPredicate:orderBy:ascendingOrder:managedObjectContext:] + 532 at QTQCoreDataManager.m:103
frame #12: 0x0002fbcb TQ`+[QTQCoreDataManager retrieveFirstEntryForEntityName:stringPredicate:orderBy:ascendingOrder:managedObjectContext:] + 203 at QTQCoreDataManager.m:149
frame #13: 0x0002faa2 TQ`+[QTQCoreDataManager retrieveFirstEntryForEntityName:stringPredicate:orderBy:ascendingOrder:] + 226 at QTQCoreDataManager.m:129
frame #14: 0x000dd65e TQ`-[QTQTopic latestAnsweredSession] + 238 at QTQTopic.m:228
frame #15: 0x000dca29 TQ`-[QTQTopic isCompleted] + 185 at QTQTopic.m:157
frame #16: 0x000b5362 TQ`-[QTQTopicContainerViewController closeButtonPressed:] + 1442 at QTQTopicContainerViewController.m:376
frame #17: 0x01be2705 libobjc.A.dylib`-[NSObject performSelector:withObject:withObject:] + 77
frame #18: 0x00b19920 UIKit`-[UIApplication sendAction:to:from:forEvent:] + 96
frame #19: 0x00b198b8 UIKit`-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
frame #20: 0x00bda671 UIKit`-[UIControl sendAction:to:forEvent:] + 66
frame #21: 0x00bdabcf UIKit`-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
frame #22: 0x00bd9d38 UIKit`-[UIControl touchesEnded:withEvent:] + 546
frame #23: 0x00b4933f UIKit`-[UIWindow _sendTouchesForEvent:] + 846
frame #24: 0x00b49552 UIKit`-[UIWindow sendEvent:] + 273
frame #25: 0x00b273aa UIKit`-[UIApplication sendEvent:] + 436
frame #26: 0x00b18cf8 UIKit`_UIApplicationHandleEvent + 9874
frame #27: 0x02e47df9 GraphicsServices`_PurpleEventCallback + 339
frame #28: 0x02e47ad0 GraphicsServices`PurpleEventCallback + 46
frame #29: 0x02166bf5 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
frame #30: 0x02166962 CoreFoundation`__CFRunLoopDoSource1 + 146
frame #31: 0x02197bb6 CoreFoundation`__CFRunLoopRun + 2118
frame #32: 0x02196f44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #33: 0x02196e1b CoreFoundation`CFRunLoopRunInMode + 123
frame #34: 0x02e467e3 GraphicsServices`GSEventRunModal + 88
frame #35: 0x02e46668 GraphicsServices`GSEventRun + 104
frame #36: 0x00b1665c UIKit`UIApplicationMain + 1211
frame #37: 0x00005fcd TQ`main + 141 at main.m:16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:38:29.623

有点..不是同一个MO，而是同一个实体。

问题是 MO 不是线程安全的，但 objectID 是

所以...

1.  在 UI 的主线程中获取 MO

2.  获取它的 ObjectID 并在 bg 线程中使用它（在这里再次获取它）

3.  在主线程中完成后更新对象（调用`[context refreshObject:object`]）

# configuration - Monodroid：我应该把配置设置放在哪里？

> ID：14401008
> 
> 赞同：9
> 
> 时间：2013-01-18T14:28:04.873
> 
> 标签：configuration, xamarin.android, xamarin.mobile

从[米格尔德伊卡萨](http://tirania.org/blog/archive/2011/Jan-04.html)：

> 我们使用更适合移动设备的库配置文件，因此我们删除了不必要的功能（如整个 System.Configuration 堆栈，就像 Silverlight 所做的那样）。

经过多年的 .NET 开发，我习惯于将配置设置存储在文件中`web.config`。`app.config`

*   使用 Mono for Android 时，我应该将配置设置放在哪里？
    *   如果重要的话，我还想为不同的构建配置存储不同的配置设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T17:11:08.420

我可能会建议使用共享首选项和编译符号来管理不同的配置。下面是一个示例，说明如何使用首选项文件根据编译符号添加或更改键。此外，您可以创建一个单独的首选项文件，该文件仅适用于特定配置。由于这些密钥并非在所有配置中都可用，因此请确保在使用前始终对它们进行检查。

```
var prefs = this.GetSharedPreferences("Config File Name", FileCreationMode.Private);
var editor = prefs.Edit();

#if MonoRelease
editor.PutString("MyKey", "My Release Value");
editor.PutString("ReleaseKey", "My Release Value");
#else
editor.PutString("MyKey", "My Debug Value");
editor.PutString("DebugKey", "My Debug Value");
#endif

editor.PutString("CommonKey", "Common Value");
editor.Commit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:40:44.940

我们在当前项目中遇到了完全相同的问题。我的第一个冲动是将配置放在一个 sqlite 键值表中，但后来我的内部客户提醒我配置文件的主要原因 -**它应该支持简单的编辑**。
因此，我们创建了一个 XML 文件并将其放在那里：

```
string documentsPath = Environment.GetFolderPath(Environment.SpecialFolder.Personal); 
```

并使用以下属性访问它：

```
public string this[string key]
    {
        get
        {
            var document = XDocument.Load(ConfigurationFilePath);
            var values = from n in document.Root.Elements()
                       where n.Name == key
                       select n.Value;
            if(values.Any())
            {
                return values.First();
            }
            return null;
        }
        set
        {
            var document = XDocument.Load(ConfigurationFilePath);
            var values = from n in document.Root.Elements()
                       where n.Name == key
                       select n;
            if(values.Any())
            {
                values.First().Value = value;
            }
            else
            {
                document.Root.Add(new XElement(key, value));
            }
            document.Save(ConfigurationFilePath);
        }
    }
} 
```

通过我们称为*Configuration*的单例类，因此对于 .NET 开发人员来说，它与使用 app.config 文件非常相似。可能不是最有效的解决方案，但它可以完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-15T03:57:59.050

有一个以 Xamarin 为中心的 AppSetting 阅读器：[https](https://www.nuget.org/packages/PCLAppConfig) ://www.nuget.org/packages/PCLAppConfig 对于持续交付非常有用（因此像章鱼这样的部署服务器允许使用存储在 cd 服务器上的值更改每个环境的配置文件）

[在https://www.nuget.org/packages/PCLAppConfig](https://www.nuget.org/packages/PCLAppConfig)上有一个以 Xamarin 为中心的 AppSetting 阅读器， 它对于持续交付非常有用；

使用如下：

1) 将 nuget 包引用添加到您的 pcl 和平台项目。

2) 在您的 PCL 项目中添加 app.config 文件，然后作为链接文件添加到您的所有平台项目中。对于 android，确保将构建操作设置为“AndroidAsset”，对于 UWP，将构建操作设置为“内容”。添加设置键/值：`<add key="config.text" value="hello from app.settings!" />`

3) 在每个平台项目上初始化 ConfigurationManager.AppSettings，就在“Xamarin.Forms.Forms.Init”语句之后，在 iOS 中的 AppDelegate、Android 中的 MainActivity.cs、UWP/Windows 8.1/WP 8.1 中的 App 上：

```
ConfigurationManager.Initialise(PCLAppConfig.FileSystemStream.PortableStream.Current); 
```

3）阅读您的设置：`ConfigurationManager.AppSettings["config.text"];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T12:48:50.950

ITNOA

也许[PCLAppConfig](https://github.com/soroshsabz/PCLAppConfig)`app.config`可以帮助您在 Xamarin.Forms PCL 项目或其他 Xamarin 项目中创建和读取。

对于不同构建模式下的不同配置，例如发布和调试，您可以使用[Configuration Transform](https://visualstudiogallery.msdn.microsoft.com/579d3a78-3bdd-497c-bc21-aa6e6abbc859) on `app.config`。

# cucumber - 如何让 Rubymine 显示 Cucumber 测试的准确进度条？

> ID：14401014
> 
> 赞同：2
> 
> 时间：2013-01-18T14:28:16.167
> 
> 标签：cucumber, rubymine

使用 Rubymine 运行文件夹中的所有 Cucumber 测试，进度条没有测试总数，所以它一直处于完成的一半。Rspec 测试显示总数和进度条工作正常。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:05:44.927

不幸的是，这是不可能的。RSpec 在运行它们报告实际示例计数之前会计算示例（请参阅[BaseFormatter.start](https://github.com/rspec/rspec-core/blob/master/lib/rspec/core/formatters/base_formatter.rb#L42)）。Cucumber 在运行时报告测试，不计其数，完全依赖 gherkin 解析器。所以在他们全部被处决之前几乎不可能数清他们。

# c# - 获取资源管理器窗口排序的字段

> ID：14401016
> 
> 赞同：0
> 
> 时间：2013-01-18T14:28:21.207
> 
> 标签：c#, c++, sorting, explorer

我想知道是否有办法知道 Windows 资源管理器窗口中的文件是如何排序的。有点像窗口的“ORDER BY”子句。示例：“名称升序”或“修改日期降序”。

这个问题不是关于 Windows 的名称排序算法，而是关于特定打开的 Windows 资源管理器窗口的用户定义的排序标准。

目标是，当我在 Windows 资源管理器中双击图像时，启动我的程序（那里没问题），并找到上一个和下一个图像（对于我的程序的上一个和下一个按钮），就像它在资源管理器窗口。

你知道这是否可能，如果可以，怎么做？

如果它是在 C# 中，那将是完美的，但即使是 C++ 也会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T00:44:06.130

我想您可以使用 shell 扩展将所有 Windows 资源管理器会话的当前排序顺序在它们更改时保存到磁盘，并带有时间戳。然后，当需要决定如何呈现 UI 时，您将该数据读入您的应用程序。

# c++ - 从 const 调用非常量成员版本

> ID：14401017
> 
> 赞同：5
> 
> 时间：2013-01-18T14:28:27.580
> 
> 标签：c++, constants, overloading

> **可能的重复：**
> [如何删除相似的 const 和非常量成员函数之间的代码重复？](https://stackoverflow.com/questions/123758/how-do-i-remove-code-duplication-between-similar-const-and-non-const-member-func)

我有两个成员

```
A &B::GetA (int i)
{
    return *(m_C[m_AtoC[i]]);
}

const A &B::GetA (int i) const
{
    return *(m_C[m_AtoC[i]]);
} 
```

现在我只是复制代码，但可能存在很好的方法来做到这一点。我当然不想处理从 const 到非 const 的类型转换。

编辑：所以我想打电话给另一个成员以避免代码重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:33:24.930

*[注意更正；很抱歉最初弄错了。]*

这是使用 a 的合适情况`const_cast`，它允许您通过将非常量函数的调用转发到相应的 const 函数来删除重复代码：

```
A & B::GetA(int index) 
{
    return const_cast<A &>(static_cast<B const *>(this)->GetA(index));
} 
```

重要的是要注意，这只能在一个方向上完成：您可以`non-const`根据常量实现该方法，但不能反过来：常量调用`GetA()`获取对相关对象的常量引用，但是由于我们有额外的信息表明改变对象*实际上是*可以的，我们可以安全地从结果中去掉常量。

在 Scott Meyer 的*Effective C++*中甚至有一章专门介绍了这种技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:36:38.100

您可以执行以下操作：

```
class B {
public:
    A& GetA (int index) { return GetA_impl(index); }
    const A& GetA (int index) const { return GetA_impl(index); }
private:
    A& GetA_impl (int index) const { return *(m_C[m_AtoC[i]]); }
}; 
```

我不确定在这种情况下是否真的值得付出努力，但如果可能重复的代码变得更加复杂，这可能会很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:05:34.510

您可以通过一些模板元编程来避免 const_cast。

```
// This meta function returns a const U if T is const, otherwise returns just U.
template <typename T, typename U>
make_same_const<T, U>
{
    typedef typename std::conditional<
            std::is_const<T>::value,
            typename std::add_const<U>::type,
            U
        >::type type;
};

// Generic version of a function. Constness of return type depends on
// constness of T.
// This is a static member template of B.
template <typename T>
make_same_const<T, A>::type& B::GetA(T& obj, int i)
{
    return *(obj.m_C[obj.m_AtoC[i]]);
}

A&       B::GetA(int i)       { return B::GetA(*this, i); }
A const& B::GetA(int i) const { return B::GetA(*this, i); } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:48:35.417

`GetA()`假设和的主体`GetA() const`是相同的（这意味着`GetA()`不修改`*this`），您可以安全地使用一个`const_cast`来实现使用非 const 的 const 版本：

```
const A& B::GetA() const {
  return const_cast<B*>(this)->GetA();
} 
```

非常量`GetA()`不会修改对象，因此在对象上调用它`const B`不是未定义的。non-const 返回的非常量引用在从 中返回之前被`GetA()`转换为 a ，因此那里也不存在未定义行为的危险。`const&``GetA() const`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:31:05.060

怎么样

```
const A &B::GetA (int index) const
{
    return *(const_cast<B*>(this)->GetA(index));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T14:37:18.883

IMO 这不是足够的代码（或复杂性）值得去重复。

正如您在两个`const_cast`基于 - 的解决方案中看到的那样，强制转换表达式实际上*比*原始代码长。

但是，如果你有一个更长或更复杂的表达你真的很担心，请展示出来。

# c# - 实体框架 - 具有挑战性的设置包括多个主键，以及与外部表的多个关联

> ID：14401018
> 
> 赞同：1
> 
> 时间：2013-01-18T14:28:31.467
> 
> 标签：c#, .net, entity-framework, orm, ef-code-first

我正在尝试使用实体框架映射几个遗留表。课程看起来像这样......

```
public class Customer
{
    [Key, Required]
    public string Code { get; set; }

    public string Domain { get; set; }

    public virtual Address BillToAddress { get; set; }

    public virtual ICollection<Address> ShipToAddresses { get; set; }
}

public class Address
{
    [Column(Order = 0), Key, Required]
    public string Code { get; set; }

    [Column(Order = 1), Key, Required]
    public string Domain { get; set; }

    public string Type { get; set; }

    public string CustomerReferenceCode { get; set; }
} 
```

每个客户都有一个“ `BillToAddress`”，对应一个地址，该地址`CustomerReferenceCode`包含客户代码，其中类型字段包含文本“ `Customer`”

每个`Customer`都有零个或多个“ `ShipToAddresses`”，对应`Addresses`于其`CustomerReferenceCode`包含客户代码以及其类型字段包含文本“ `Ship-To`”

我可以`BillToAddress`通过添加来引用

```
[Key, Required]
[ForeignKey("BillToAddress"), Column(Order = 1)]
public string Code { get; set; }

[ForeignKey("BillToAddress"), Column(Order = 2)]
public string Domain { get; set; } 
```

但我一直无法弄清楚如何为`ShipToAddresses`客户引用集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:02:22.253

看这个例子（注意它是单独的类）：[Fluent NHibernate automap inherit with subclass relationship](https://stackoverflow.com/questions/5398509/fluent-nhibernate-automap-inheritance-with-subclass-relationship)

一种简单的方法可能是：

```
public class Customer
{
[Key, Required]
public string Code { get; set; }

public string Domain { get; set; }

public virtual ICollection<Address> Addresses{ get; set; }

public virtual Address BillToAddress { get { Addresses.Where(n=>n.Type = Address.BillingAddress)).Single(); }

public virtual ICollection<Address> ShipToAddresses { get { Addresses.Where(n=>n.Type = Address.ShipToAddress)); }
} 
```

一个额外的评论 - 这并不像您开始的示例那样隐式地强制您的一个帐单地址业务逻辑，因此您需要在其他地方使用上述方法强制执行。此外，创建两个类并使用我链接到的示例中描述的 TPH 是无论如何我可能会采用的方法 - 这将直接满足您在上面描述的目标。此外，在两者之间，这可能会起作用，直接在每个属性的 getter 中使用鉴别器。

# javascript - 在 POST 之前等待一个 onload 事件（没有 jQuery！）

> ID：14401023
> 
> 赞同：0
> 
> 时间：2013-01-18T14:28:40.543
> 
> 标签：javascript, ajax, callback, onload

我有一个使用 onload 事件的函数，可以说它看起来像这样

```
var doOnload = function(){
    onload = function(){
        //do stuff and return data
        return data;
    }
    onerror = function(){
        //handle error
        return errormsg;
    }
} 
```

一开始我使用了 console.log 输出，但现在我需要处理数据。doOnload 函数由另一个函数调用。这个其他函数创建一个 iframe 并将数据写入表单，这与其他函数一起工作正常。现在填写表格后，我想通过 POST 发送数据。这也工作正常。只有 doOnload 函数返回“未定义”。

iframe/form-filling 函数看起来像这样：

```
//...

input = this.createInputElement('nameOfField1',
  function1());
form.appendChild(input);

input = this.createInputElement('nameOfField2',
  doOnload());
form.appendChild(input);
// ...
form.appendChild(input);
form.submit(); 
```

并在最后提交表格。

函数 'createInputElement(name, value)' 创建一个具有 name 和 value 属性的输入 DOM 元素并返回该元素。我尝试使用回调，但我没有让它工作/做错了什么。我没有太多使用回调的经验。

这是 createInputElement 函数的样子：

```
this.createInputElement = function(name, value) {
    var input = document.createElement("input");
    input.name = name;
    input.value = value;
    return input;
} 
```

请只在 js 中提示而不是在 jQuery 中提示，谢谢。

那么如何在 onload 事件完成并将数据写入表单元素后发送 Post 呢？

提前致谢！

问候，大卫

# opencv - project1.exe 中 0x52f9e470 处的未处理异常：0xC000001D：非法指令

> ID：14401024
> 
> 赞同：0
> 
> 时间：2013-01-18T14:28:41.403
> 
> 标签：opencv

我正在尝试在 c++ 中使用 opencv 检测对象，但出现错误：project1.exe 中 0x52f9e470 处的未处理异常：0xC000001D：非法指令。

使用 windows 7 32 位，opencv 2.4.3，visual studio (c++) 2010，我的代码是：

```
 #include <opencv\cv.h>
   #include <opencv\highgui.h>
   #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <assert.h>
   #include <math.h>
   #include <float.h>
    #include <limits.h>
   #include <time.h>
   #include <ctype.h>

      // Create a string that contains the exact cascade name
     // Contains the trained classifer for detecting hand
    const char *cascade_name="D:/31dec12/hand.xml";

    //The function detects the hand from input frame and draws a rectangle around the         detected portion of the frame
    void detect_and_draw( IplImage* img )
    {

    // Create memory for calculations
    static CvMemStorage* storage = 0;

    // Create a new Haar classifier
    static CvHaarClassifierCascade* cascade = 0;

   // Sets the scale with which the rectangle is drawn with
   int scale = 1;

   // Create two points to represent the hand locations
   CvPoint pt1, pt2;

    // Looping variable
    int i; 

    // Load the HaarClassifierCascade
    cascade = (CvHaarClassifierCascade*)cvLoad( cascade_name, 0, 0, 0 );

    // Check whether the cascade has loaded successfully. Else report and error and       quit
    if( !cascade )
    {
      fprintf( stderr, "ERROR: Could not load classifier cascade\n" );
     return;
     }

    // Allocate the memory storage
    storage = cvCreateMemStorage(0);

    // Create a new named window with title: result
     cvNamedWindow( "result", 1 );

    // Clear the memory storage which was used before
    cvClearMemStorage( storage );

    // Find whether the cascade is loaded, to find the hands. If yes, then:
    if( cascade )
    {

       // There can be more than one hand in an image. So create a growable sequence of hands.
      // Detect the objects and store them in the sequence
      CvSeq* hands = cvHaarDetectObjects( img, cascade, storage,
                                        1.1, 2, CV_HAAR_DO_CANNY_PRUNING,
                                        cvSize(40, 40) );

      // Loop the number of hands found.
      for( i = 0; i < (hands ? hands->total : 0); i++ )
      {
        // Create a new rectangle for drawing the hand
         CvRect* r = (CvRect*)cvGetSeqElem( hands, i );

          // Find the dimensions of the hand,and scale it if necessary
          pt1.x = r->x*scale;
         pt2.x = (r->x+r->width)*scale;
         pt1.y = r->y*scale;
         pt2.y = (r->y+r->height)*scale;

         // Draw the rectangle in the input image
         cvRectangle( img, pt1, pt2, CV_RGB(230,20,232), 3, 8, 0 );
       }
     }

     // Show the image in the window named "result"
      cvShowImage( "result", img );

    }

    // A Simple Camera Capture Framework
     int main()
    {

     // Gets the input video stream from camera
     CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY );

     // Checks if the input stream is obtained
     if( !capture ) 
  {
    fprintf( stderr, "ERROR: capture is NULL \n" );
    getchar();
    return -1;
  }

   // Show the image captured from the camera in the window and repeat
 while( 1 )
  {

    // Get one frame
     IplImage* frame = cvQueryFrame( capture );

    // Cecks if a frame is obtained
    if( !frame )
    {
    fprintf( stderr, "ERROR: frame is null...\n" );
    getchar();
    break;
   }

  // Flips the frame into mirror image 
  cvFlip(frame,frame,1);

   // Call the function to detect and draw the hand positions
    detect_and_draw(frame);

    //If ESC key pressed, Key=0x10001B under OpenCV 0.9.7(linux version),
   //remove higher bits using AND operator
    if( (cvWaitKey(10) & 255) == 27 ) 
    break;
   }

   // Release the capture device housekeeping
    cvReleaseCapture( &capture );

   return 0;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T00:17:31.253

你用的是什么类型的cpu？上次我遇到错误：0xC000001D：非法指令与代码中使用的 SSE 指令有关。一些新的 SSE 指令未在 AMD 处理器上实现，例如，因此您可以通过在没有 SSE 支持的情况下重建 opencv 来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-28T10:53:07.977

使用 cv::Mat(...) 时我也有这个问题

同样的异常抛出 `size_t esz = CV_ELEM_SIZE(_type), esz1 = CV_ELEM_SIZE1(_type);`

不太清楚为什么，但是在将 Visual C++ Project 浮点模型从精确更改为快速之后，问题就解决了。

# vb.net - 将文本框编号设置为小数

> ID：14401035
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:29:16.663
> 
> 标签：vb.net

我有一个文本框，它基本上只会填充数字，我如何设置它以在以`### ###`[WITH THE SPETWEEN THOUSANDS,ETC]的形式输入后显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:56:32.070

试试下面的编码它会解决你的问题

如果您给出的值为**9786952**

然后将该值显示为**9 786 952**

我在 Button_click 事件中写了这个

```
 Me.TextBox1.Text = String.Format("{0:n0}", CDbl(Me.TextBox1.Text))
    Me.TextBox1.Text = Me.TextBox1.Text.Replace(",", " ") 
```

-潘店

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:05:16.463

如果您使用数据绑定，则可以定义格式。

*   为您的数据创建一个模型，即具有每个文本框、复选框等数据的属性的类，具有正确的数据类型。您的 number 属性必须输入为数字（`int`或`decimal`等）。
*   在“数据源”任务窗格中创建对象数据源。
*   将您的数字字段从数据源拖放到表单中。这将创建一个文本框。A`BindingSource`和一个`BindingNavigator`组件会自动添加到表单中。如果不需要导航，可以删除`BindingNavigator`组件，但保留`BindingSource`.
*   选择您刚刚添加的数字文本框。在属性窗口中打开“（DataBindings）”并单击“（高级）”旁边的三个点（...）。您可以在此处从列表中选择格式类型。如果您选择“自定义”，则会出现一个“自定义格式”字段，您可以在其中输入“000 000”或“### ###”作为格式。
*   将模型的实例分配给`BindingSource`.

```
MyModel _model = new MyModel { Number = 123456 };

MyBindingSource.DataSource = _model; 
```

绑定机制自动将模型中的任何数字转换为文本框中的格式化文本，并将文本框中输入的文本转换回模型中的数字。很实用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:36:02.497

听起来好像您正在寻找[`MaskedTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx).

将其 [ `Mask`property][1] 设置为`### ###`.

* * *

**#**

数字或空格，可选。如果此位置在掩码中为空白，则会在 Text 属性中呈现为空格。允许使用加号 (+) 和减号 (-)。

# grails - 检索一组类别中的所有产品 - 单向并使用分页？

> ID：14401036
> 
> 赞同：0
> 
> 时间：2013-01-18T14:29:25.467
> 
> 标签：grails, grails-orm

在我们的应用程序中，我们有一个单向关系，例如类别/产品

一个Category有很多Products，但是一个product不知道它被放在了哪些category中。现在我想检索一组类别的所有产品并使用参数进行分页我似乎碰壁了，不知道如何实现这一点。

例子：

```
class Category {
    static hasMany = [products: Product]
}

class Product {
} 
```

关于我如何实现这一目标的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:18:50.877

可以使用 HQL 来完成，例如：

```
def query = "select product from Category category join category.products product where     category.name in :categories"
def books = Category.executeQuery(query, [categories:['Fantasy']])

println books 
```

# c# - 如何检测监视器 2 上的空闲状态？

> ID：14401040
> 
> 赞同：0
> 
> 时间：2013-01-18T14:29:37.690
> 
> 标签：c#, .net, windows

我整天/晚上都有一台电视通过 HDMI 连接到我的笔记本电脑。在白天，大部分时间我只是在电视上播放一个广播电台。本质上，我正在尝试为电视制作屏幕保护程序，以防止老化。

我目前有一个随机形状的 SWF 文件，我把它放在全屏上，但这是一个记得把它放在上面的例子；而且，如果我需要在电视上快速演示某些东西，将其取下来有点痛苦。

如何检测监视器 #2 是否空闲 5 分钟？然后，如果鼠标移动到电视上，就会触发一个事件。

如果解决方案需要知道鼠标的 x 位置，则监视器 #1 的宽度为 1366px。

我真的不介意这是用什么语言制作的，但我更喜欢 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:33:43.657

您可以通过 确定当前光标位置[`System.Windows.Forms.Cursor.Position`](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx)。最简单（但也许不是最好）的方法是定期轮询。如果您在一定时间内没有看到鼠标在该屏幕上移动，则可以启动 SWF。此外，当鼠标在该屏幕上移动时，您可以关闭 SWF。

# java - 在 jTable 中执行删除时出现 ArrayIndexOutOfBound 错误

> ID：14401043
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:29:48.000
> 
> 标签：java, sql, swing, defaulttablemodel

我尝试从 jTable 中选择某些行并执行删除，然后 jTable 将使用数据库中的最新数据进行更新。这就是我设置 jTable 的方式：

```
 private JTable getJTableManageReplies() {
    jTableManageReplies.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    jTableManageReplies.getSelectionModel().addListSelectionListener(
            new ListSelectionListener() {
                @Override
                public void valueChanged(ListSelectionEvent e) {
                    if (!e.getValueIsAdjusting()) {
                        int viewRow = jTableManageReplies.getSelectedRow();
                        // Get the first column data of the selectedrow
                        int replyID = Integer.parseInt(jTableManageReplies.getValueAt(
                                viewRow, 0).toString());

                        eForumRepliesAdmin reply = new eForumRepliesAdmin(replyID);
                        replyID = JOptionPane.showConfirmDialog(null, "Are you sure that you want to delete the selected reply? " , "Delete replies", JOptionPane.YES_NO_OPTION);
                        if(replyID == JOptionPane.YES_OPTION){
                        reply.deleteReply();
                        SetUpJTableManageReplies();}
                    }
                }
            });
    return jTableManageReplies;
}

     public void SetUpJTableManageReplies() {

    DefaultTableModel tableModel = (DefaultTableModel) jTableManageReplies
            .getModel();
    String[] data = new String[5];
    db.setUp("IT Innovation Project");
    String sql = "Select forumReplies.reply_ID,forumReplies.reply_topic,forumTopics.topic_title,forumReplies.reply_content,forumReplies.reply_by from forumReplies,forumTopics WHERE forumReplies.reply_topic = forumTopics.topic_id ";
    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    tableModel.getDataVector().removeAllElements();

    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("reply_ID");
            data[1] = resultSet.getString("reply_topic");
            data[2] = resultSet.getString("topic_title");
            data[3] = resultSet.getString("reply_content");
            data[4] = resultSet.getString("reply_by");
            // Add data to table model
            tableModel.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

这是我从数据库中执行删除的代码：

```
 public boolean deleteReply() {
    boolean success = false;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String sql = "DELETE FROM forumReplies where reply_ID = " + replyID
            + "";
    if (db.updateRequest(sql) == 1)
        success = true;
    db.terminate();
    return success;
} 
```

但是，在我在 jDialog 框中添加 SetUpJTableManageReplies 方法后，有一条错误消息是 ArrayIndexOutOfBound。当用户选择某行时，我会尝试这样做，会弹出要求确认删除。然后在他们单击yes 之后，jTable 数据将被刷新。有人可以给我一些指南吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:39:28.007

你的问题在这里：

```
tableModel.getDataVector().removeAllElements(); 
```

更好的：

```
tableModel.setRowCount(0); 
```

更好：编写自己的表格模型并实现 TableModel 接口中定义的所有方法 - 这样您就可以学习如何处理 JTable 组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:40:40.893

使用 TableModel 管理表数据。`DefaultTableModel`将很有用，您应该首先创建 tableModel，然后创建 JTable 并将表的模型设置为先前创建的表模型。

您应该使用模型对表格单元格执行插入/删除/更新，这将自动更新 JTable。使用 DefaultTableModel 管理您的数据。

# python - Numpy - 平均二维数组的多列

> ID：14401047
> 
> 赞同：5
> 
> 时间：2013-01-18T14:30:01.730
> 
> 标签：python, numpy

现在我正在通过迭代来做到这一点，但必须有一种方法可以使用 numpy 函数来完成这项任务。我的目标是一次获取一个二维数组和平均 J 列，生成一个新数组，其行数与原始数组相同，但列数/J 列。

所以我想采取这个：

```
J = 2 // two columns averaged at a time

[[1 2 3 4]
 [4 3 7 1]
 [6 2 3 4]
 [3 4 4 1]] 
```

并产生这个：

```
[[1.5 3.5]
 [3.5 4.0]
 [4.0 3.5]
 [3.5 2.5]] 
```

有没有简单的方法来完成这个任务？我还需要一种方法，如果我永远不会得到一个未平均的余数列。因此，例如，如果我有一个包含 5 列且 J=2 的输入数组，我将平均前两列，然后是最后三列。

你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:40:23.603

```
data.reshape(-1,j).mean(axis=1).reshape(data.shape[0],-1) 
```

如果你的`j`分歧`data.shape[1]`，那就是。

例子：

```
In [40]: data
Out[40]: 
array([[7, 9, 7, 2],
       [7, 6, 1, 5],
       [8, 1, 0, 7],
       [8, 3, 3, 2]])

In [41]: data.reshape(-1,j).mean(axis=1).reshape(data.shape[0],-1)
Out[41]: 
array([[ 8\. ,  4.5],
       [ 6.5,  3\. ],
       [ 4.5,  3.5],
       [ 5.5,  2.5]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:40:57.243

首先，在我看来，您根本没有对列进行平均，您只是一次平均两个数据点。在我看来，你最好的办法是[重塑](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)数组，所以你有一个 Nx2 数据结构，你可以直接提供给`mean`. 如果列数不太兼容，您可能必须先填充它。然后在最后，对填充的余数列和它之前的列进行加权平均。最后重塑回你想要的形状。

使用 TheodrosZelleke 提供的示例：

```
In [1]: data = np.concatenate((data, np.array([[5, 6, 7, 8]]).T), 1)

In [2]: data
Out[2]: 
array([[7, 9, 7, 2, 5],
       [7, 6, 1, 5, 6],
       [8, 1, 0, 7, 7],
       [8, 3, 3, 2, 8]])

In [3]: cols = data.shape[1]

In [4]: j = 2

In [5]: dataPadded = np.concatenate((data, np.zeros((data.shape[0], j - cols % j))), 1)

In [6]: dataPadded
Out[6]: 
array([[ 7.,  9.,  7.,  2.,  5.,  0.],
       [ 7.,  6.,  1.,  5.,  6.,  0.],
       [ 8.,  1.,  0.,  7.,  7.,  0.],
       [ 8.,  3.,  3.,  2.,  8.,  0.]])

In [7]: dataAvg = dataPadded.reshape((-1,j)).mean(axis=1).reshape((data.shape[0], -1))

In [8]: dataAvg
Out[8]: 
array([[ 8\. ,  4.5,  2.5],
       [ 6.5,  3\. ,  3\. ],
       [ 4.5,  3.5,  3.5],
       [ 5.5,  2.5,  4\. ]])

In [9]: if cols % j:
    dataAvg[:, -2] = (dataAvg[:, -2] * j + dataAvg[:, -1] * (cols % j)) / (j + cols % j)
    dataAvg = dataAvg[:, :-1]
   ....:     

In [10]: dataAvg
Out[10]: 
array([[ 8\.        ,  3.83333333],
       [ 6.5       ,  3\.        ],
       [ 4.5       ,  3.5       ],
       [ 5.5       ,  3\.        ]]) 
```

# c# - 在 TreeView 控件中移动的标题文本

> ID：14401048
> 
> 赞同：1
> 
> 时间：2013-01-18T14:30:02.017
> 
> 标签：c#, .net, wpf, treeview

我正在玩 WPF TreeView 控件并遇到奇怪的问题。当我以编程方式添加 TreeView 项目时，所有项目都正常工作，但如果我通过绑定添加项目 - 我的项目在标题中有间隙：

![在此处输入图像描述](../Images/6906bdefc41830771582e7ba4ebdc4dc.png)

此外，这个差距只是 TreeItem 行的一个“敏感”部分。我无法通过单击文本来选择项目，只有单击空白区域才能选择它。这是我的代码：

```
namespace WPFTreeViewExperience
{
    /// <summary>
    /// Data item interface
    /// </summary>
    public interface IMyTree
    {
        string Title { get; set; }
        List<IMyTree> Items { get; set; }
    }

    /// <summary>
    /// Hierarchical data model
    /// </summary>
    public class MyTreeLevel : IMyTree
    {
        public string Title { get; set; }

        public List<IMyTree> Items { get; set; }

        public MyTreeLevel(string Title, params MyTreeLevel[] Items)
        {
            this.Title = Title;

            this.Items = new List<IMyTree>();

            foreach (MyTreeLevel item in Items)
            {
                this.Items.Add(item);
            }
        }
    }

    /// <summary>
    /// Viewmodel
    /// </summary>
    public class MyTreeViewModel : INotifyPropertyChanged
    {

        private void NotifyChanges(string PropName)
        {
            if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(PropName));
        }
    }

    private List<MyTreeLevel> _Tree;

    public List<MyTreeLevel> MyTree
    {
        get
        {
            return _Tree;
        }

        set
        {
            _Tree = value;
            NotifyChanges("MyTree");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public MyTreeViewModel()
    {
        List<MyTreeLevel> simpleTree = new List<MyTreeLevel>();

            simpleTree.Add(new MyTreeLevel("1-0", new MyTreeLevel("1-1"),
                                          new MyTreeLevel("1-2",
                                                                new MyTreeLevel("1-2-1"),
                                                                new MyTreeLevel("1-2-2")
                                                                ),
                                          new MyTreeLevel("1-3")));

            simpleTree.Add(new MyTreeLevel("2-0", new MyTreeLevel("2-1"),
                                          new MyTreeLevel("2-2",
                                                                new MyTreeLevel("2-2-1"),
                                                                new MyTreeLevel("2-2-2"),
                                          new MyTreeLevel("2-3"))));

            MyTree = simpleTree;
        }
    }

    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
        public partial class MainWindow : Window
        {        
            public MainWindow()
            {
                InitializeComponent();

                TreeExample.DataContext = new MyTreeViewModel();
            }
        }
    } 
```

和我的 XAML 代码：

```
<Window x:Class="WPFTreeViewExperience.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WPFTreeViewExperience"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TreeView Name="TreeExample" ItemsSource="{Binding MyTree}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Items}" DataType="{x:Type local:MyTreeLevel}">
                    <TreeViewItem Header="{Binding Title}"/>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>        
    </Grid>
</Window> 
```

我的绑定有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:51:02.683

我认为 ItemTemplate 应该是这样的：

```
 <HierarchicalDataTemplate ItemsSource="{Binding Items}" DataType="{x:Type local:MyTreeLevel}">
        <Grid>
            <TextBlock Margin="0" Text="{Binding Path=Title}" />
        </Grid>
    </HierarchicalDataTemplate> 
```

# ruby-on-rails - 随机显示 .txt 文件中的文本行 | 导轨

> ID：14401050
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:30:04.740
> 
> 标签：ruby-on-rails, arrays, text, random, devise

基本上我想在 .txt 文件中输出随机选择的文本行。到目前为止，这是我想出的，但没有任何东西真正显示在视图中。我已将 questions.txt 文件放在帖子视图文件夹中

**在导轨控制器中：**

```
class PostsController < ApplicationController
  def text_randomize
    t = IO.readlines("questions.txt")
    @random_question = t.sample
  end
end 
```

**在 .TXT 文件中：**

```
How are you?
How is the weather at your place?
How are you my pal?
I wish I was a donkey, do you?
How do you do? 
```

**在导轨视图文件中：**

```
<div id = "questions">
  <%= @random_question %>
</div> 
```

请记住，我使用 Devise 作为身份验证，我告诉你这是因为我已经读到在使用控制器时会发生一些吸引人的事情，但是我并不完全确定，因此我只是提到它。

所以我不确定我是否应该将“ABOVE CONTROLLER”代码放在帖子的帮助文件或帖子的控制器文件中。或者其他地方。除此之外，这里是否有人知道如何从帮助文件或控制器文件中引用数组？

我可以直接从视图中随机输出一行文本，但我想在其他地方，更整洁的地方。就像在文件中或在帮助程序或控制器中或类似的东西中。

```
<%= ["Hello, how are you?", "How is the weather?", "Are you feeling good?"].sample %> 
```

在您回答之前先谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:24:44.520

首先，创建一个模型来执行您的随机问题逻辑。

我假设您要将整个文件读入内存，然后选择一个随机行。以某种方式随机化您将在文件中读取的位置并减少读取文件的内容可能会更有效。但是，我不建议在您遇到问题之前对其进行优化。

因此，假设您确实希望将文件保存在内存中，让我们将其保存在内存中，而不必多次访问磁盘。

```
class Question
  def self.random_question
    @all_questions ||= IO.readlines("questions.txt")
    @all_questions[rand(@all_questions.size)]
  end
end 
```

现在您可以在控制器中调用 Question.random_question 并将其设置在实例变量中，甚至可以从视图中调用它，因为调用已经足够简洁了。

# asp.net-mvc - 在 routes.insert 函数 MVC 中添加路由名称

> ID：14401051
> 
> 赞同：0
> 
> 时间：2013-01-18T14:30:08.267
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

您好我正在创建一个 RouteBase 对象并尝试使用 route.insert `routes.Insert(0, objRoute);`方法插入到路由集合中。在这种情况下，如何为路线指定名称？

喜欢的`routes.add("myfavroute", localizedRoute);`方法

信息：我必须使用 routes.Insert 方法，因为我必须在集合顶部添加路由

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:56:45.533

`Insert`如果使用方法添加路由，恐怕无法提供名称。如果您希望此命名路由成为第一个路由，则必须在任何其他路由注册之前调用 Add 方法。

# python - 替换流中的某些字符

> ID：14401062
> 
> 赞同：3
> 
> 时间：2013-01-18T14:31:04.887
> 
> 标签：python, stream

我有一个将输入流作为输入的方法（一个 .yml 解析器）。问题是它在某些地方遇到某些字符时会引发错误，例如`%`.

我想做的是获取流，用`%`占位符替换所有的，然后将其传递给解析器。

这就是我所拥有的（不适用于当前输入）：

```
 stream = open('file.yml', 'r')
    dict = yaml.safe_load(stream) 
```

但我认为我需要的是：

```
 stream = open('file.yml', 'r')
    temp_string = stringFromString(stream)     #convert stream to string
    temp_string.replace('%', '_PLACEHOLDER_')  #replace with place holder
    stream = streamFromString(temp_String)     #conver back to stream
    dict = yaml.safe_load(stream) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:34:31.353

编辑：显然这里的原始答案似乎不再起作用，并且该库现在需要一个类似文件的对象。

鉴于此，它变得有点尴尬。您可以编写自己的包装器，以类似文件的方式运行（其基础可能是[`io.TextIOBase`](https://docs.python.org/3.7/library/io.html?highlight=stringio#io.TextIOBase)）并在缓冲区中进行替换，但如果您愿意牺牲惰性，最简单的解决方案大致是最初建议的问题：在内存中进行替换。

将字符串转换为类似文件的对象的解决方案是[`io.StringIO`](https://docs.python.org/3.7/library/io.html?highlight=stringio#io.StringIO).

* * *

老答案：

这样做的一个好方法是编写一个生成器，这样它就可以保持惰性（不需要一次读取整个文件）：

```
def replace_iter(iterable, search, replace):
    for value in iterable:
        value.replace(search, replace)
        yield value

with open("file.yml", "r") as file:
    iterable = replace_iter(file, "%", "_PLACEHOLDER")
    dictionary = yaml.safe_load(iterable) 
```

请注意使用`with`语句打开文件 - 这是在 Python 中打开文件的最佳方式，因为它确保文件正确关闭，即使发生异常也是如此。

另请注意，这`dict`是一个糟糕的变量名称，因为它会破坏内置`dict()`并阻止您使用它。

请注意，您的`stringFromStream()`功能本质上是`file.read()`，并且`steamFromString()`是`data.splitlines()`。您所说的“流”实际上只是字符串（文件的行）的迭代器。

# ruby-on-rails - 在 Active Admin 上查看特定于命名空间的工厂

> ID：14401065
> 
> 赞同：0
> 
> 时间：2013-01-18T14:31:15.373
> 
> 标签：ruby-on-rails, namespaces, activeadmin, factory

我需要在活动管理员中实现两个命名空间，并为每个命名空间设计不同的菜单。我的命名空间运行良好，我使用 view_factory 重新定义导航栏，但是当我尝试为特定命名空间设置视图时，此视图是为每个命名空间设置的。

```
ActiveAdmin.setup do |config|
  config.namespace :dashboard do |dashboard|
   dashboard.view_factory.global_navigation = MyNavigation
  end
end

class MyNavigation < ActiveAdmin::Component
  def build menu, options = {}
    # my specific stuff
  end
end 
```

我正在使用 Active Admin 0.5.1，它应该与多个命名空间一起使用[http://reverbhq.com/blog/2012/08/activeadmin-0-5-0-is-released/](http://reverbhq.com/blog/2012/08/activeadmin-0-5-0-is-released/)

如果有人知道我错在哪里:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:21:36.187

刚刚发现一个 hack，需要为每个工作区创建一个新的 ActiveAdmin::ViewFactory.new 并复制公共视图（您不能使用 config.view_factory 为所有工作区创建...）

```
ActiveAdmin.setup do |config|
  config.namespace :dashboard do |dashboard|
    dashboard.view_factory = ActiveAdmin::ViewFactory.new
    dashboard.view_factory.global_navigation = MyNavigation
    dashboard.view_factory.footer = CommonFooter
  end
  config.namespace :dashboard do |admin|
    admin.view_factory = ActiveAdmin::ViewFactory.new
    admin.view_factory.footer = CommonFooter
  end
end 
```

它不是很合适和干燥，但效果很好

# html - 使用 javascript 从 IFRAME 获取非 HTML 数据

> ID：14401073
> 
> 赞同：1
> 
> 时间：2013-01-18T14:31:29.010
> 
> 标签：html, css, ajax, json, iframe

我有一个隐藏的 IFRAME 加载页面的情况。该页面不返回 HTML 数据，而是返回原始 JSON 字符串。由于数据不是 HTML，因此没有“body”标签，我不能使用另一个 SO 问题中给出的以下建议：

```
 iFrameBody = iFrame.contentWindow.document.getElementsByTagName('body')[0]; 
```

IFRAME 的内容类似于：

```
 IFRAME:
   -----------------------------------------------
   |     {"JSON" : "HERE" }                       |
   -----------------------------------------------

   and not

   ------------------------------------------------
   |       <html>                                 |
   |            <body>                            |
   |                 {"JSON" : "HERE" }           |
   |            </body>                           |
   |       </html>                                |
   ------------------------------------------------ 
```

我基本上是在问如何获取 iFrame 的原始内容。添加伪 HTML 标记不是一种选择。不使用 iFrame 不是一种选择。谢谢！

# php - CakePHP 迁移错误

> ID：14401084
> 
> 赞同：1
> 
> 时间：2013-01-18T14:32:04.513
> 
> 标签：php, cakephp, amazon-ec2, xampp

我正在将我的 CakePHP 站点从本地 Xampp 安装迁移到 EC2 ubuntu 环境。我移动了数据库，并将 Web 目录文件复制到了 EC2 实例，但在访问该站点时出现此错误：

```
Fatal error: Class 'AppController' not found in /var/www/cakephp/lib/Cake/Controller/CakeErrorController.php on line 31 
```

我查看了 Apache 错误日志，发现它不喜欢的部分是：

```
$this->Auth->user()['role'] 
```

错误表示 PHP 解析器不期望 '['。这在默认的本地 Xampp 安装中一切正常，所以我假设这是两个安装之间的 PHP 差异？

```
Xampp: PHP 5.4.7
EC2: PHP 5.3.10 
```

任何设置或任何可能导致这种行为的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:33:12.657

这是 php 5.4 中的一个新功能，请参阅[http://docs.php.net/manual/en/migration54.new-features.php](http://docs.php.net/manual/en/migration54.new-features.php)第三个项目。

对于 php 5.3，您需要将其分配给一个变量

```
$user = $this->Auth->user()
$role = $user['role']; 
```

# java - 为什么我会在 Eclipse 中收到已使用变量的“未使用变量”警告？

> ID：14401085
> 
> 赞同：-7
> 
> 时间：2013-01-18T14:32:15.627
> 
> 标签：java, eclipse

这是我的课：

```
private class Node {
    public int[] pivot;
    public int pivotIndex;
} 
```

我在 Eclipse 中收到未使用 pivotIndex 的警告，但事实并非如此，稍后会在同一文件的代码中使用它。这是 Eclipse 中的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T14:36:57.487

**只是在其他地方提到**了您的变量这一事实并不意味着它已被**使用**。展示：

```
public class Test {
  public void x() {
    Node n = new Node();
    n.pivot = null;
    n.pivotIndex = 0;
  }
  private class Node {
    public int[] pivot;
    public int pivotIndex;
  }
} 
```

现在两者`pivot`和`pivotIndex`都被标记为未使用，并且非常合理：程序永远不需要它们的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:33:38.087

可以提及但不一定使用变量的另一个实例是在任何循环或方法中的 if 语句中。

```
public void method(){
  int[] pivot;
  int pivotIndex;

  ... 

  for(int i=0; i<pivot.length; i++){
     pivotIndex=i;
  }
} 
```

在这个例子中，pivot 将被标记为已使用，因为这个循环的条件总是至少检查一次。但是，如果数组的长度 <= 0，则不会执行循环，因此不会看到 pivotIndex。

基本上，如果代码有可能不会进入提到变量的代码块，那么它将被标记为未读。Eclipse 的警告应该被视为任何拼写检查：如果您确定它是正确的并且它说您错了，那么在算法中，检查这种特殊情况被简单地忽略或实施毫无意义。

# asp.net-web-api - 在 ASP.NET Web API 中同时使用匿名和 Windows 身份验证

> ID：14401086
> 
> 赞同：4
> 
> 时间：2013-01-18T14:32:16.273
> 
> 标签：asp.net-web-api, security, windows-authentication

我已经实现了一个 ASP.NET Web API 应用程序，它具有一个常规控制器 (HomeController) 和几个其他 Web API 控制器。我已经为 API 控制器处理了身份验证（使用匿名身份验证和自定义授权属性），但我想使用 Windows 身份验证限制对 MVC 控制器及其所有操作的访问，而不影响其余控制器。

有可能实现这一目标吗？可以在 Web API 应用程序中混合使用 Windows 和匿名身份验证吗？

注意：应用程序将托管在 IIS 中。

# mysql - 使用连接返回同一列的多个值？

> ID：14401089
> 
> 赞同：1
> 
> 时间：2013-01-18T14:32:23.530
> 
> 标签：mysql, sql

问题是我正在使用一个对另一个表有多个引用的表；基本上，我为一首歌曲的原始艺术家存储了三个不同的值，如果它以另一位艺术家为特色，以及它是否是混音。这些链接中的每一个都指向艺术家表，我想要的是能够为这些列中的每一个返回艺术家姓名（没有其他数据）。到目前为止我有这个：

```
SELECT `songName`, `songTrackNumber`, `artist`.`artistName`,
songFeaturingArtist, songRemixByArtist
FROM `song`
LEFT JOIN artist ON songArtist = artistID 
```

我不完全确定如何将其他两个字段从他们的数字 ID 转换为艺术家的名字。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:35:17.493

只需继续添加连接，但通过使用表别名来让 MySQL 满意：

```
SELECT `songName`, `songTrackNumber`, 
    `a1`.`artistName` AS mainArtistName,
    `a2`.`artistName` AS songFeaturingArtistName,
    `a3`.`artistName` AS songRemixByArtistName
FROM `song`
LEFT JOIN artist a1 ON songArtist = a1.artistID
LEFT JOIN artist a2 ON songFeaturingArtist = a2.artistID
LEFT JOIN artist a3 on songRemixByArtist = a3.artistID 
```

为清楚起见，您可以将别名更改为比简单的数字后缀更有用的东西:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:36:15.133

三次加入表`Artist`中的表以获取表中所有其他列的歌曲。`song``artistName`

```
SELECT  a.songName, 
        a.songTrackNumber, 
        b.artistName AS ArtistName,
        c.artistName AS FeaturingArtist,
        d.artistName AS RemixByArtist
FROM    song a
        LEFT JOIN artist b ON a.songArtist = b.artistID
        LEFT JOIN artist c ON a.songFeaturingArtist = c.artistID
        LEFT JOIN artist d ON a.songRemixByArtist = d.artistID 
```

# c# - C# 在 winpe 上获得最大分辨率，无需任何驱动程序

> ID：14401090
> 
> 赞同：-4
> 
> 时间：2013-01-18T14:32:35.113
> 
> 标签：c#, .net, wmi, screen-size, winpe

我正在寻找一种方法来获得最大支持的屏幕分辨率。我需要在没有安装任何驱动程序的情况下找到它。我已经尝试过使用`WMI`和`EnumDisplaySettings`.

是否可以直接从硬件获取此信息，还是我需要在线查找？如果在线，我需要哪些信息才能查找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:49:44.313

EnumDisplaySettings 在循环中为您提供所有屏幕分辨率。您可以选择哪个是“最大”（最宽还是最高？）

我已经用 C++ 完成了：

```
for (i=0;; i++) 
{
    memset(&vimodetmp,0,sizeof vimodetmp);
    vimodetmp.dmSize = sizeof vimodetmp;
    if (!EnumDisplaySettings(DisplayDevice.DeviceName,i,&vimodetmp))
    {
        break;
    }
// store in a array
}
// you can choose in the array 
```

希望能帮到你。

# reporting-services - SSRS 2012 中的 Tablix（表）不允许 CanGrow=false 在 tablix 单元格上

> ID：14401091
> 
> 赞同：1
> 
> 时间：2013-01-18T14:32:37.157
> 
> 标签：reporting-services, ssrs-tablix

![报告，tablix 单元格展开](../Images/5214cde237b46995c1b6305e65ce760b.png) 我在 SSRS 中创建报告时遇到了一个非常奇怪的问题（我使用的是 sql server 2012 企业版）。

这是我的报告的结构：

*   报告列在页眉部分，而不是在 tablix 标题中。（我必须从 tablix 标题中删除报告列，因为我需要我的报告在导出到 excel 后冻结它的标题或其列。只有当列在页眉中时才能在 excel 中冻结）
*   Tablix 具有包含多个分组的字段。

现在会发生什么，当我运行报告时，如果任何字段的字符串值大于 tablix 单元格的大小，它的宽度就会严重增长。这让我的报告看起来很难看。页眉中的列与其在 tablix 中的行不对齐。Tablix 超出报告实际宽度。

为了摆脱这个问题，我尝试制作 `CanGrow=false` tablix 中的每个单元格。然后我尝试部署报告，但失败了。我得到一个错误：`"Report definition is invalid"`。

问题是，我无法`CanGrow=false`在 tablix 中设置单元格，那么我的报告将如何保持稳定。我的列将如何与 tablix 中的数据对齐。

我只是不希望细胞像他们现在正在做的那样变宽。

附上我在单元格中有较大值时看到的报告的屏幕截图。这个值是一个完整的词。

请帮帮我。任何帮助表示赞赏。

# html - 通过 html5 和 css3 调整背景图像的大小

> ID：14401092
> 
> 赞同：2
> 
> 时间：2013-01-18T14:32:41.050
> 
> 标签：html, css

在这个论坛中，我读到我需要使用 JQ 来调整背景图像的大小。但我不知道 JQ 并想通过 css3 调整背景图像的大小。我可以做吗？如果可能的话，请告诉我正确的方向。

我有两个背景图片。一个 - 带有重复的纹理（我不想缩放它），另一个 - 在下面 - 整个图片（这个我不想重复并且想在站点更改分辨率时调整大小（例如在小屏幕上）。

```
 body { 
     padding-top: 60px; 
     padding-bottom: 40px;
     background-color:#ededed;
     background-image:url('http://b.pusku.com/wp-content/uploads/2012/11/textura5.png'), url('http://b.pusku.com/wp-content/uploads/2012/11/fone1.jpg'); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:59:04.063

这是一个例子。**40% 20%**部分是第一个图像的大小，20 **% 15%**是第二个图像的大小。然后，重复规则指定第一个图像不重复，而第二个图像重复。

```
 body { 
     padding-top: 60px; 
     padding-bottom: 40px;
     background-color:#ededed;
     background-image:url('http://upload.wikimedia.org/wikipedia/commons/c/cb/Fighting_kittens-1340.jpg'), url('http://thepersiankittens.com/Persian_Kittens.jpg'); 
     height: 1000px;
     width: 400px;
     background-size: 40% 20%, 20% 15%;
      background-repeat: no-repeat, repeat;
    } 
```

这是一个示例，您可以使用[http://jsbin.com/ojudel/1/edit](http://jsbin.com/ojudel/1/edit)

更改百分比，您将看到它是如何工作的。更多信息可以在[这里](http://www.w3.org/TR/css3-background/#the-background-size)找到。

# c# - double.parse 转换的奇怪问题

> ID：14401099
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:33:12.770
> 
> 标签：c#, textbox, double, currency

我使用的是 Visual Studio 2010，Windows 窗体。

我有这个代码，允许将钱从美元兑换成欧元。这是参考： http: [//www.codeproject.com/Articles/17909/Simple-Class-to-get-Currency-Exchange-Rates](http://www.codeproject.com/Articles/17909/Simple-Class-to-get-Currency-Exchange-Rates)

这是代码：

```
CurrencyConverter2 cc = new CurrencyConverter2();
cc.AdjustToLocalTime = true;

CurrencyData cd = new CurrencyData("USD", "EUR");
// Convert US Dollars to Euros

cc.GetCurrencyData(ref cd);

label5.Text = (5000 / cd.Rate).ToString(); 
```

这种情况下的输出是：3753,75375375375

但是，如果我以这种方式从 texbox 放置值（例如 5000）：

```
double cambiamo = double.Parse(tbxDaConvertire.Text);
tbxConvertito.Text = (cambiamo * cd.Rate).ToString(); 
```

输出为：3752,5

我不明白，因为我得到了这个值！请问我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:42:20.253

正如评论所指出的：

```
 double cdRate = 1.42f;

        var value1 = (5000 / cdRate).ToString();
        var value2 = (double.Parse("5000") / cdRate).ToString();
        var value3 = (5000.0f / cdRate).ToString();

        //    value1 = "3521.12686697913"
        //    value2 = "3521.12686697913"            
        //    value3 = "3521.12686697913" 
```

您的 CD 费率很可能不同。首先，在您使用的第一个示例`5000 / cd.Rate`中，在您使用的第二个示例中，您`5000 * cd.Rate`曾经执行过`cd.Rate = 1/cd.Rate`吗？这可能就是产生差异的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:57:19.253

您的第一次转化使用了 0.75075 的转化率

您的第二次转化使用了 0.75050 的转化率

仅 0.00025 的差异，很容易在过去一周的转换率图表中找到：

![在此处输入图像描述](../Images/e6e6472036160b1b36db5771da35c81e.png)

*注意极端波动，以分钟*为单位的速率变化。或者换句话说，它在您编辑代码时发生了变化。显然，您正在从您的货币兑换服务中获得实时更新。

# php - 使用选项设置更改 xmlhttp.open 值

> ID：14401104
> 
> 赞同：0
> 
> 时间：2013-01-18T14:33:17.140
> 
> 标签：php, javascript, xml, ajax

是否可以使用 javascript 更改 xmlhttp.open 的值？

我用

```
xmlhttp.open("GET","prod.php?category=1"+str,true);
xmlhttp.send(); 
```

但我只从我的 xml 文件中获取第一个元素，因为如果我将类别更改为 2，它会打印出我的第二个元素。

我可以仅使用下拉菜单中的 javascript 更改类别值吗？

这是我的表格

```
<form>
Select a CD:
<select name="cds" onchange="showCD(this.value)">
<option value="">Select a CD:</option>
<option value="item1">item1</option>
<option value="item2">item2</option>
<option value="item3">item3</option>
</select>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:17:49.050

是的，您当然可以通过获取下拉列表的值来做到这一点。

```
// get the value from the dropdown
var dd_value = document.getElementById('dropdown_id');

// now you can append the same to the xml http request object
xmlhttp.open("GET","prod.php?category=" + dd_value + str,true);
xmlhttp.send(); 
```

希望有帮助。

# java - HashMap中的1对1映射

> ID：14401106
> 
> 赞同：0
> 
> 时间：2013-01-18T14:33:41.427
> 
> 标签：java, hashmap

我遇到了一种情况，我将根据`HashMap`. 我`HashMap`的是：

```
HashMap<Key, Path> 
```

最初我`Key`为每个目录创建 s`Path`并将这些条目放入`HashMap`. 在进行处理时，我会`Path`根据`Key`from`HashMap`进行处理。在某些情况下，我会重新计算`Key`一些`Path`，并想`Key`用新`Key`的替换旧的`Path`。我想为唯一路径保留唯一键，并使用其中一个更新 HashMap 中的条目。所以我想执行 HashMap 的反向来更新 Key。什么是最好的技术？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:37:53.387

可能是您正在寻找*Google Guava 的* [`BiMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/BiMap.html).

> 双映射（或“双向映射”）是一种映射，它保留其值的唯一性以及其键的唯一性。此约束使 bimap 能够支持“反向视图”，这是另一个 bimap，包含与此 bimap 相同的条目，但具有相反的键和值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:35:18.430

添加另一个 HashMap 来进行反向映射。使其与原始地图保持同步，仅此而已。我什至会创建一个帮助类来确保所有操作在两个映射之间同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:36:24.167

如果要更新密钥，可以这样做：

```
 String oldKey = "oldKey";
   String newKey = "newKey";

   map.put(newKey, map.remove(oldKey)); 
```

要根据值获取密钥，您可以使用：

*   Bidi地图-> [http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/BidiMap.html](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/BidiMap.html)
*   或者维护两张map，一张以values为key，一张以key为key。

* * *

为了好玩，以下是维护两张地图的方法：

```
 Map<String, String> keyMap = new HashMap<String, String>();
    Map<String, String> valueMap = new HashMap<String, String>();

    String val = "someVal";
    keyMap.put("newKey", keyMap.remove(valueMap.get(val)));
    valueMap.put(val, "newKey"); 
```

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:37:32.607

我会

```
myHashMap.remove(Key); 
```

然后

```
myHashMap.put( newKey, new value); 
```

在 hashMap 的迭代期间，不允许删除选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:40:10.323

如果要设置新密钥，请使用

```
hm.set(newKey, oldPath); 
```

`hm`你在哪里`HashMap`。然后，使用

```
hm.remove(oldKey) 
```

删除旧密钥。

请注意，如果您可能有两个`Path`相同的 s `Key`，那么您必须反转您的`HashMap`to `<Path, Key>`，因为一个`Key`会覆盖另一个。要查找一个值并检索其键，[请使用`entrySet()`and 循环 (update 1 to the linked post)](https://stackoverflow.com/a/1383830/1979005)。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-01T19:01:58.113

假设双向哈希保证为 1 对 1 并且不存在内存使用问题，这是一个*纯 java*解决方案。

```
public class BiHash<K> extends ConcurrentHashMap<K, K>  {

    public void biPut(K k1, K k2)
    {
        super.put(k1, k2);
        super.put(k2, k1);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-28T22:53:51.077

最近需要一个解决方案，但不想依赖插件，所以我扩展了 Java 基类。此实现不允许空值。

```
public class OneToOneMap<K,V> extends HashMap<K,V> {
    public OneToOneMap() {
        super();
    }
    public OneToOneMap(int initialCapacity) {
        super(initialCapacity);
    }
    public OneToOneMap(int initialCapacity, float loadFactor) {
        super(initialCapacity, loadFactor);
    }
    public OneToOneMap(Map<? extends K, ? extends V> m) {
        super(m);
        dedup();
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> m){
        super.putAll(m);
        dedup();
    }

    @Override
    public V put(K key, V value) {
        if( key == null || value == null ) return null;
        removeValue(value);
        return super.put(key,value);
    }

    public K getKey( V value ){
        if( value == null || this.size() == 0 ) return null;
        Set<K> keys = new HashSet<>();
        keys.addAll(keySet());
        for( K key : keys ){
            if( value.equals(get(key) )) return key;
        }
        return null;
    }
    public boolean hasValue( V value ){
        return getKey(value) != null;
    }
    public boolean hasKey( K key ){
        return get(key) != null;
    }

    public void removeValue( V remove ){
        V value;
        Set<K> keys = new HashSet<>();
        keys.addAll(keySet());
        for( K key : keys ){
            value = get(key);
            if( value == null || key == null || value.equals(remove)) remove(key);
        }        
    }
    //can be used when a new map is assigned to clean it up
    public void dedup(){
        V value;
        Set<V> values = new HashSet<>();
        Set<K> keys = new HashSet<>();
        keys.addAll(keySet());
        for( K key : keys ){
            value = get(key);
            if( value == null || key == null || values.contains(value) ) remove(key);
            else values.add(value);
        }
    }
} 
```

# java - 如何在一个线程处于睡眠模式时实现多线程

> ID：14401107
> 
> 赞同：3
> 
> 时间：2013-01-18T14:33:43.053
> 
> 标签：java, multithreading, threadpool

我有一个问题，我的班级正在执行第一个运行方法，之后它没有进入第二个覆盖的运行方法。

程序执行存在于具有 main 方法和线程池的控制器类中：

```
public class RunnableController {
    // Main method
    public static void main(String[] args) throws InterruptedException {
        try {
            RunnableController controller = new RunnableController();
            controller.initializeDb();
            controller.initialiseThreads();
            System.out.println("Polling");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void initialiseThreads() {      
        try {
            threadExecutorRead = Executors.newFixedThreadPool(10);
            PollingSynchronizer read = new PollingSynchronizer(incomingQueue, dbConncetion);
            threadExecutorRead.submit(read);
        } catch (Exception e){
            e.printStackTrace();
        }   
    }
} 
```

我的 poller 类获取新数据并应该模拟更新：

```
public class PollingSynchronizer implements Runnable {
   public PollingSynchronizer(Collection<KamMessage> incomingQueue,
         Connection dbConnection) {
      super();
      this.incomingQueue = incomingQueue;
      this.dbConnection = dbConnection;
   }

   private int seqId;

   public int getSeqId() {
      return seqId;
   }

   public void setSeqId(int seqId) {
      this.seqId = seqId;
   }

   // The method which runs Polling action and record the time at which it is done
   public void run() {
      int seqId = 0;

      while (true) {
         List<KamMessage> list = null;

         try {
            list = fullPoll(seqId);

            if (!list.isEmpty()) {
               seqId = list.get(0).getSequence();
               incomingQueue.addAll(list);
               this.outgoingQueue = incomingQueue;
               System.out.println("waiting 3 seconds");
               System.out.println("new incoming message");
               Thread.sleep(3000);//at this wait I should execute run()

               //when I debug my execution stops here and throws " Class not found Exception "
               // its does not enters the message processor class 
               MessageProcessor processor = new MessageProcessor() {
                  //the run method which should fetch the message processor class.
                  final public void run() {
                     MessageProcessor(outgoingQueue).generate(outgoingQueue);
                  }
               };
              new Thread(processor).start();
            }
         } catch (Exception e1) {
            e1.printStackTrace();
         }
      }
   }
} 
```

我的消息处理器类：

```
public abstract class MessageProcessor implements Runnable {
   private Connection dbConnection;
   Statement st = null;
   ResultSet rs = null;
   PreparedStatement pstmt = null;
   private Collection<KamMessage> outgoingQueue;

   public KamMsg804 MessageProcessor(Collection<KamMessage> outgoingQueue,
         Connection dbConnection) {
      this.outgoingQueue = outgoingQueue;
      this.dbConnection = dbConnection;
      return (KpiMsg804) fetchedMessages;
   }

   public Collection<KamMessage> generate(Collection<KamMessage> outgoingQueue) {
      while (true) {
         try {
            while (rs.next()) {
               KamMessage filedClass = convertRecordsetToPojo(rs);
               outgoingQueue.add(filedClass);
            }

            for (KamMessage pojoClass : outgoingQueue) {
               KamMsg804 updatedValue = createKamMsg804(pojoClass);
               System.out.print(" " + pojoClass.getSequence());
               System.out.print(" " + pojoClass.getTableName());
               System.out.print(" " + pojoClass.getAction());
               System.out.print(" " + updatedValue.getKeyInfo1());
               System.out.print(" " + updatedValue.getKeyInfo2());
               System.out.println(" " + pojoClass.getEntryTime());
            }
            return outgoingQueue;
         } catch (SQLException e) {
            e.printStackTrace();
         }
      }
   }
} 
```

我的问题恰好在第二次运行（9 方法中，我在 MessageProcessor 类中遇到异常，它循环回 Polling。

1.  我如何在这里实现多线程，因为当线程在轮询中休眠 3 秒时，它应该同时更新数据库。
2.  之后，如何将数据馈送并更新回数据库。

我的程序流程 - 我有三个类： 1.Controller 2.PollerSynchro 3.Msgprocessor

我有数据库记录，这些记录被转换为 POJO 形式并存储在 Collection 中。使用这些 POJO，我的课程尝试一次性进行多处理和更新。

1.  控制器 - 拥有线程池，使用 poll 方法启动 poller 类 - 完成

2.  Poller - 应该轮询新的传入消息并将其存储在传入队列中 - 完成

3.  MsgProcessor - 应该寻找新的传入消息并将它们从传出队列传递到传入队列 - 也完成

问题：

现在我的问题是

1.  我必须在轮询线程休眠 3 秒时执行此更新，

2.  在我的 Poller 类中的第二个 void run() 方法的代码中，传出队列没有传递给消息处理器类进行更新。我的执行流程只是循环回到第一个运行方法并得到类异常。

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:31:09.957

我不能粉饰这个，你的代码是一团糟。但是，至于为什么您的消息处理器代码没有被执行，您实际上从未启动使用此代码创建的线程：

```
MessageProcessor processor = new MessageProcessor() {
    // the run method which should fetch the message processor class.
    final public void run() {
         MessageProcessor(outgoingQueue).generate(outgoingQueue);                    
    }
}; 
```

忽略被调用的混淆命名方法，您的代码应该更像这样：

```
Message processor = new MessageProcessor() {
    // the run method which should fetch the message processor class.
    final public void run() {
         MessageProcessor(outgoingQueue).generate(outgoingQueue);                    
    }
};

new Thread(processor).start(); 
```

# maxscript - Maxscript中的停止脚本

> ID：14401115
> 
> 赞同：1
> 
> 时间：2013-01-18T14:34:11.057
> 
> 标签：maxscript

Maxscript 中是否有一个命令可以让您提前停止脚本？例如，脚本依赖于将单个对象作为选择。如果没有什么可供选择，那么它将不起作用。

```
myObj = $
if ($ == undefined) then STOP
-- rest of code 
```

其中 STOP 代表难以捉摸或虚构的停止命令

而不必进行如下测试：

```
myObj = $
if ($ != undefined) then
(
--rest of code
) 
```

这很好，但这确实意味着将大部分脚本放在括号中 - 我发现它使代码变得更难编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:17:13.323

这取决于，您通常可以`return`用来强制提前退出。即使在事件处理程序的情况下，这也可以工作，因为它们基本上只是函数：

```
rollout test "Test"
(
    button btn "Exception"

    on btn pressed do
    (
        if selection.count != 1 do
            return messageBox "Selection count expected to be one."
        if NOT isKindOf selection[1] Editable_poly do
            return messageBox "Object not an Editable Poly."
        btn.text = selection[1].name
    )
)
createDialog test 
```

由于一些实现细节，如果在循环体或其他可能多次执行的地方使用，它会使整个脚本变慢。

如果您只想退出脚本并仅在侦听器中打印信息，则`throw`可能是一个更好的功能。

```
 if selection.count != 1 do
        throw "Selection count expected to be one."
    if NOT isKindOf selection[1] Editable_poly do
        throw "Object not an Editable Poly"
    print selection[1].name 
```

但是，在大多数情况下，您当前使用的是最合适的解决方案。如果您想改进它（特别是如果您发现自己一遍又一遍地编写相同的代码），您可以编写一个自定义结构，例如`Filters`：

```
 #Struct:Filters(
        GetModOrObj:<fn>; Public,
        Is_EditSpline:<fn>; Public,
        CanSwitchTo_Segment:<fn>; Public,
        HasBaseObjectProperty:<fn>; Public,
        ...
        Is_EditPolyMod:<fn>; Public,
        Is_This_EditPolyObj:<fn>; Public,
        Is_EditPatch:<fn>; Public,
        CanSwitchTo_Face:<fn>; Public) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T12:59:11.047

使用exit，这是一个简单的例子：a = 100

```
while True do

(

    a -= 1

    print a

    if a == 20 do

    (

        print "a is equal to 20!" 

        exit

    )

) 
```

# browser - ClearType 字体渲染是否每次都完全相同地绘制相同的字符？

> ID：14401116
> 
> 赞同：0
> 
> 时间：2013-01-18T14:34:29.847
> 
> 标签：browser, fonts, ocr, cleartype

我正在为屏幕上的小字体开发一些 OCR 软件。字体在浏览器中呈现。我注意到它们是使用 ClearType 渲染到屏幕上的，并且无论它们位于屏幕上的哪个位置，单词中的字母似乎都是相同的，尽管我没有检查很多情况，只是一些常见的情况。

例如，在下图中，字母 a 重复了两次，一次在开头，然后从结尾第 3 次重复。字母 a 看起来完全一样，一个像素一个像素。我的问题是，对于 ClearType 渲染中相同的字体和相同的字体大小，字母 a 是否总是相同的？这同样适用于同一字体内的所有字母吗？

![在此处输入图像描述](../Images/2ee3c1a8ccf69c99f142da01e8e68c5a.png)

[ClearType 在这里。](http://en.wikipedia.org/wiki/ClearType)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:21:34.697

它可能会也可能不会，这取决于字体、大小和正在使用的 ClearType 版本（以及应用了哪些应用程序设置进行渲染）。[微软](http://msdn.microsoft.com/en-us/library/ms749295%28v=vs.85%29.aspx)对 ClearType 的解释有点涉及到这一点，甚至显示了一个示例，您可以观察到一个字符的两个实例*不*呈现相同的情况（参见右侧的 'elle'；'e' 和 'l'在第二种情况下渲染不同）。这与使用分数前进宽度有关，它被解析到最接近的 1/64 像素。因此，您可能最终会得到单个字符的许多不同实例（尽管如您所见，差异相当微妙）。

简而言之：我不会写任何*依赖*于一个字符的任何两个实例最终完全相同的东西。它们将非常相似，但并不完全相同。

# xml - 使用 copy-of 从 XSLT 输出添加了额外的 XML 声明？

> ID：14401119
> 
> 赞同：0
> 
> 时间：2013-01-18T14:35:04.637
> 
> 标签：xml, xslt, declaration

我有一块 XSLT，它根据参数对父元素的所有子元素进行复制...

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <!-- Removes the XML tag from begginning of output -->
    <xsl:output omit-xml-declaration="yes" />
    <!-- Include external variables / data -->
    <xsl:namespace-alias stylesheet-prefix="testNS" result-prefix="testNS" />
    <xsl:template match="/">
        <xsl:copy-of select="/hostElement/*[position() > 1]" /> 
            <xsl:element name="anotherElement">
            <xsl:value-of select="count(//hostElement/childElement[position() > 1])"/>
        </xsl:element>
    </xsl:template> 
```

运行后，我在下面得到这个输出......

```
<?xml version="1.0" encoding="UTF-8"?>
<hostElement xmlns=""><?xml version="1.0"?>
<childElement>... 
```

它给出的输出似乎有一个额外的 XML 语句，它没有验证。命名空间也不存在...

有人可以尝试帮助我吗？

谢谢，

灰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:58:03.107

我正在使用一个名为 Cast Iron 的应用程序来进行这些转换。我现在已经找到了答案，Cast Iron 默认添加了这些，因为它在给定的输出中找不到它们。只需添加`<parentElement></parentElement>`修复它，因为这是它所期望的

# python - 如何确保用户在组中

> ID：14401120
> 
> 赞同：0
> 
> 时间：2013-01-18T14:35:08.187
> 
> 标签：python, google-app-engine, google-apps, google-provisioning-api

当用户被添加到组中`client.AddMemberToGroup(group_id, member_id)`时，他们不会出现在其中`groups UI`，运行`cPanel`时也不会报告为成员`client.RetrieveAllMembers(group_id)`。

但是，在`client.RetrieveGroups(member_id)`运行时，它确实会在提要中为相关组返回一个条目。

我如何确定哪个是正确的？该人是否在组中？

如何毫无疑问地验证给定用户是否在组中？

我已经将此作为问题提交到问题跟踪器中，但想知道这里是否有人有任何想法？

[http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3327](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3327)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:47:21.603

如果它是一个非常大的组，则可能需要一些时间来刷新整个组列表并让用户出现在其中。

尝试等待 24 小时并再次检查 CPanel / RetrieveAllMembers() 调用。

同时，您正在使用 RetrieveGroups() 确定用户是否是成员。

**更新：** Google CPanel 和 RetrieveAllMembers() 调用永远不会显示间接组成员，但您的 RetrieveGroups() 调用将 direct_only 设置为 False，这意味着正在返回间接成员。如果您正在测试成员资格的用户是间接成员，那么您的测试结果与我期望看到的一致。

您可以尝试将 direct_only 设置为 True 吗？如果这导致 RetrieveGroups() 不再返回 True，那么我们知道问题在于用户是间接成员。

# iphone - 如何修复 Xcode 预期类型错误

> ID：14401122
> 
> 赞同：4
> 
> 时间：2013-01-18T14:35:10.893
> 
> 标签：iphone, xcode, cocos2d-iphone

今天我打开 Xcode 项目并为 iOS 模拟器构建它。昨天一切正常，但今天早上出现编译错误。

以下行在头文件中以红色突出显示，旁边的消息显示“预期类型”。

```
-(void) addObstacle:(Obstacle*) obstacle; 
```

这段代码几天没有改变，所以我不太确定为什么现在出现错误。

我已经导入了 Obstacle.h，这是 Obstacle 类头文件：

```
#import "kobold2d.h"

@interface Obstacle : CCNode {
    int posXInGrid;
    int posYInGrid;

    CCSprite* sprite;
}

@property (nonatomic) int posXInGrid;
@property (nonatomic) int posYInGrid;
@property (nonatomic, retain) CCSprite* sprite;

@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:49:54.433

从接口 (.h)移动`#import "Obstacle.h"`到实现文件 (.m)。

然后添加@class 障碍；在接口文件的顶部。

如果这解决了问题，您确实有一个循环导入。[请参阅此处](https://stackoverflow.com/questions/322597/class-vs-import)以了解为什么会修复它。在可能的情况下，@class 优于 #importing 类标头。

# c - postgres plpgsql 参数文本最大长度

> ID：14401132
> 
> 赞同：2
> 
> 时间：2013-01-18T14:35:44.167
> 
> 标签：c, postgresql, plpgsql

我有一个将文本作为输入的函数。请注意参数最大长度为 256。如何传递更长的文本？

示例代码：

```
CREATE FUNCTION Test(nameid text)
.... # do something # .... 
```

`\0`如果长度 nameid > 256 因为最后不存在，我有错误。所以我想 postgres 截断（`strcat_s`？）参数。有没有一种**简单**的方法来传递任意长度的参数文本？

我已经尝试过，`varchar(1024)`但`text`它不起作用。结果相同：在 256 个字符处截断。

**编辑**

我正在与**SPI** lib 结合使用。我从 C 代码中调用 plpg 函数。256 的错误是我的（需要休息一下）。我使用了`strcpy_s`256 字符限制：\ **[已解决]**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T14:44:50.177

在 Postgresql 中创建函数时，您只需指定“字符变化”与使用“文本”作为文本参数相同，您应该能够使用超过 256 个字符...

举个例子：

```
CREATE OR REPLACE FUNCTION aaa.function_name(integer, character varying)
RETURNS refcursor AS... 
```

问候

# jqplot - jq绘图。显示系列的子集

> ID：14401140
> 
> 赞同：1
> 
> 时间：2013-01-18T14:36:16.980
> 
> 标签：jqplot

我有一个数组，`fullset(24)`按小时包含过去 24 小时的绘图数据。我将此数组提供给 jqPlot 以创建条形图。工作正常。但我只想显示数据的一个子集，比如营业时间 (8-17)。我这样做相当笨拙，方法是创建一个新数组，其中包含一个子集和一些带有刻度的额外技巧，如下所示：

```
var ticks = [];
var subset = [];
for (i = 8; i < 17; i++)
{
    subset[i - 8] = fullset[i][1];
    ticks.push(sprintf("%d-%d", i, i + 1));
} 
```

但是有更好的方法吗？是否有可能以某种方式告诉 jqPlot 只显示完整集的一个子集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:18:39.247

在轴设置上，我设置了最小值和最大值，但不确定这是否会与您正在寻找的一样。

```
axes: {
    xaxis: {
        min:8,
        max:16,
    },
}, 
```

# xpath - 选择页面上的第 x 个元素，它是其父级的第 y 个子级

> ID：14401146
> 
> 赞同：1
> 
> 时间：2013-01-18T14:36:30.500
> 
> 标签：xpath, css-selectors

有很多类似的问题，但是我无法找到答案。

假设你有一个这样的 HTML 页面：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Page title</title>
    </head>
    <body>
        <div id="content">
            <table>
                <tr>
                    <td>A</td>
                    <td>B</td>
                    <td>C</td>
                </tr>
                <tr>
                    <td>D</td>
                    <td>E</td>
                    <td>F</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

并且您想*选择`<td>`页面上的第二个元素，它是其 parent 的第一个子元素*。在这种情况下，它是 element `<td>D</td>`。

请注意，此措辞应保持不变，例如，它与选择第二个`<tr>`然后选择其第一个子级（导致相同的元素）不同，因为我正在使用的原始页面比这个最小的测试用例复杂得多，并且这种方法在那里行不通。

到目前为止我做了什么：

一个**CSS 选择器** `#content td:first-child`找到了我`A`，`D`现在我可以通过 JS ( `document.querySelectorAll("query")[1]`) 或在 Java 中选择第二个元素（最后我正在使用这些元素）。但是，使用附加代码来完成可以通过选择器完成的工作是非常不一致的。

同样，我可以使用**XPath 表达式**：`id('content')//td[1]`。它相当于上面的 CSS 选择器。它返回一个节点集，所以我认为这`id('content')//td[1][2]`会按我想要的方式工作，但没有运气。

一段时间后，我发现我`( id('content')//td[1] )[2]`正在按照我想要的方式工作，所以我就这么做了，并且对此感到非常满意。

* * *

尽管如此，我还是很失望地看到我无法执行单个查询来获取我的元素，因此存在一个学术问题：是否有任何其他解决方案，无论是使用 CSS 选择器，还是使用 XPath 表达式我的查询？我错过了什么？可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:02:52.057

CSS 选择器目前不提供任何方法来选择一组全局匹配元素中的第 n 个元素或整个 DOM 中某个元素的第 n 个出现。[选择器 3](http://www.w3.org/TR/css3-selectors)和[选择器 4](http://www.w3.org/TR/selectors4)提供的结构`:nth-*()`功能伪类都按其父级匹配条件的第 n 个子级计算，而不是按整个 DOM 中的第 n 个元素计算。

当前的 Selectors 语法没有提供一种直观的方式来表示“这是 DOM 中一组匹配元素中的第 n 个”；即使在 Selectors 4 中`:nth-match()`，`:nth-last-match()`它们目前的语法也很尴尬。所以这确实令人失望。

至于 XPath，要使用的表达式是`(id('content')//td[1])[2]`，正如您已经找到的那样。外部`()`只是意味着“整个子表达式应该在`[2]`谓词之前进行评估”或“`[2]`谓词应该对整个子表达式的结果进行操作，而不仅仅是`//td[1]`.”。没有它们，表达式`td[1][2]`将被集体处理，两个相互冲突的谓词永远不会一起工作（你不能让相同的元素同时成为第一个和第二个！）。

在子表达式周围加上括号并不会使它*本身*成为一个额外的查询；如果是这样，那么您可以考虑每个`id('content')`,和一个“查询”本身，并带有`//td`隐含*的*（或*可选*的）括号。这是很多查询:)`[1]``[2]`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T19:40:34.520

**使用这个简单的 XPath 表达式：**

```
(//td[1])[2] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy-of select="(//td[1])[2]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Page title</title>
    </head>
    <body>
        <div id="content">
            <table>
                <tr>
                    <td>A</td>
                    <td>B</td>
                    <td>C</td>
                </tr>
                <tr>
                    <td>D</td>
                    <td>E</td>
                    <td>F</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
<td>D</td> 
```**

# uitableview - MonoTouch UITableView PushViewController

> ID：14401147
> 
> 赞同：0
> 
> 时间：2013-01-18T14:36:35.433
> 
> 标签：uitableview, xamarin.ios, pushviewcontroller

我正在使用`UITableView`以下设置：

*   普通模式：细节披露按钮
*   编辑模式：披露指标

如果表处于编辑模式并且我选择了行，`pushViewController(nextViewController,animated)`则调用 。

**但现在我的问题**：在视图控制器的动画更改期间，显示按钮**变为详细显示按钮**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:47:50.250

我想你会发现 iOS 在推送下一个视图控制器之前取消了“编辑模式”。

# ios - Facebook 授权对话框没有取消按钮？

> ID：14401149
> 
> 赞同：1
> 
> 时间：2013-01-18T14:36:37.373
> 
> 标签：ios, facebook, legacy

我们正在使用 Facebook iOS SDK (3.1.1) 中的旧标头，因为我们不希望用户能够离开应用程序。这对我们来说是一个特殊的问题，因为我们正在使用 GameKit，而 iOS 在离开应用程序后很快就会终止连接（几秒钟就足够了）

我现在正在做的，显示登录对话框是：

```
m_facebook = [[Facebook alloc] initWithAppId:m_fbAppId andDelegate:self];  
NSArray * permissions =  [NSArray arrayWithObjects:@"publish_stream",nil];
[m_facebook authorize:permissions]; 
```

但是该对话框没有取消按钮，因此用户无法离开它，除非成功登录。有解决办法吗？

最好的，戈姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T13:21:01.997

如果您使用较旧版本的 Facebook SDK，“X”按钮将不会出现在授权对话框的左上角。更新到最新的 SDK 为我解决了这个问题。

# c - -> 令牌之前的错误

> ID：14401151
> 
> 赞同：1
> 
> 时间：2013-01-18T14:36:39.143
> 
> 标签：c

我正在实现算术计算器，但出现错误：

错误：')' 标记之前的预期主表达式错误：'->' 标记之前的预期主表达式

我发布包含错误的行。

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<string.h>
    /*creating stack*/        
    typedef struct stack
    {
    int top;
    char *array;
    int max_size;
    }S;
    /*pushing character to it*/ 
    void push(S *st ,char ch)
    {
    if(st->top==st->max_size)
    {printf("already full..delete some items :)");return ;}
        printf("st->top=%d ",st->top);
        strcpy(&st->array[st->top],&ch);
        st->top++;
        printf("push=%s ",st->array[st->top-1]);
    }
    /*deleting character*/ 
    void pop(S *st)
    {
    if(st->top==0)
    {printf("it's empty..push some items :)");return ;}

        st->top--;
    }
    void fun(S *stack,S *post,char a)
    {
        while(strcmp((&stack->array[stack->top]),&a)!=0)
            {
                pop(stack);
                push(post,stack->array[stack->top+1]);

            }
            pop(stack);
    }
    int main()
    {
    int i,j;
    char str[10000];
    /*initialize 3 stacks*/
    S *st =init(10000);
    S *post=init(10000);
    S *ans=init(10000);
    / *actually code is very big so i am
    giving only lines in which there is error*/
    //some code...
    fun(stack,post,a);
    //some code...
             while(precedence(str[i])>precedence(stack->array[stack->top]))
    //some code...
    push(post,stack->array[stack->top]);
    pop(stack);
    //more code......
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:40:38.263

你有一个同名的结构和一个变量`stack`。这非常糟糕，让您和编译器感到困惑。结构/类名使用大写字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:41:56.640

在您的`void fun(S *stack,S *post,char a)`功能中，您正在使用

```
strcmp((&stack->array[stack->top]),&a)!=0 
```

比较两个`char`s。[`strcmp()`](http://www.cplusplus.com/reference/cstring/strcmp/)用于比较字符串，因此请改用：

```
stack->array[stack->top] != a 
```

# wordpress - 单个自定义帖子页面上的 Wordpress 下一个/上一个帖子？

> ID：14401154
> 
> 赞同：1
> 
> 时间：2013-01-18T14:36:49.377
> 
> 标签：wordpress, custom-post-type

所以我有一个自定义的帖子类型，一切正常。

转到单个作品集，但不会分页。

我不能，无论我如何尝试让分页在单页上工作。

这是我的代码。

```
<?php get_header(); ?>

<div class="main-content">

    <div class="portfoliopost">

    <div class="col-full">
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">

            <div class="port-left-single">
                <h2><?php the_title(); ?></h2>
                    <div class="projecttype">
                                    <ul>
                                     <?php
                                        $posttags = get_the_tags();
                                        if ($posttags) {
                                          foreach($posttags as $tag) {
                                            echo '<li>' .$tag->name. '</li>'; 
                                          }
                                        }
                                        ?>

                                    </ul>   

                    </div>
                <?php the_field('main_portfolio_meta'); ?>
            </div> <!-- end div port-left-single -->

            <div class="port-right-single">
            <?php the_content(); ?>

            </div>  

                <div style="clear:both;"></div>

        </div> <!-- end div post-class -->

                <div class="navigation">
            <div class="next-posts"><?php next_posts_link('Older Posts') ?></div>
            <div class="prev-posts"><?php previous_posts_link('Newer Posts') ?></div>
        </div>

    <?php endwhile; endif; ?>

    </div> <!-- end div col-full -->    
    </div> <!-- end div portfolipost -->    

<div style="clear:both;"></div>

</div> <!-- end div main content -->
<?php get_footer(); ?> 
```

它在循环内部，那么给出了什么？

# emacs - 折叠 s 表达式的部分 - 请求建议

> ID：14401155
> 
> 赞同：2
> 
> 时间：2013-01-18T14:36:52.077
> 
> 标签：emacs, clojure, elisp

我正在使用 clojure-mode 和 clojure.test/with-test，看起来像这样：

```
(with-test
  (def... some expression defining a var)

  ;; comment for a test
  (is (= 0 (- 1 1)))
  (is ...)) 
```

其中 (with-test ...) 中第一个表达式之后的表达式是第一种形式的测试用例。这很有用，因为它使测试靠近其相关代码。

然而，测试用例的列表可能会很长，掩盖了“真实”代码的其余部分。我希望有某种方法可以将所有测试代码隐藏在缓冲区中。类似于大纲/组织模式的折叠能力：

```
(with-test
  (def some expression defining a var)
  ...) 
```

甚至

```
(def some expression defining a var) 
```

用某种标记来显示隐藏的测试用例。

棘手的部分是我想要关注的 (def...) 表单位于我想要隐藏的 (with-test ...) 表单内。

我环顾四周，据我所知，我无法使用大纲模式或隐藏显示模式来完成这项工作。我假设我需要一些能够感知表达式的折叠库才能让这样的东西工作。这样的事情是否已经存在，我是不是想错了，你有什么建议吗？

**更新**

我能够使它与 hideshow 一起工作。`hs-hide-all-clojure-tests`在[我的 emacs 配置仓库](https://github.com/joodie/emacs-config/blob/master/hideshow-clojure-tests.el)中查看

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:17:38.257

我相信，你可以使用[HideShow](http://emacswiki.org/emacs/HideShow)包来完成这个任务，但是你需要添加一些配置，所以它只会隐藏测试......

# joomla - 子域下的 Joomla 安装的一部分

> ID：14401161
> 
> 赞同：0
> 
> 时间：2013-01-18T14:37:04.480
> 
> 标签：joomla, joomla2.5, subdomain

我不认为这是可能的，但我会问一下以防万一。

假设我有一个在 domain.com 上运行的 Joomla。是否可以以使菜单项及其子项位于子域上的方式配置 Joomla 和设置菜单项？因此，假设我设置了一个“博客”菜单项，该菜单项通常指向 domain.com/blog，但其地址却是 blog.domain.com。

我知道我可以进行另一个子域安装，但这正是我想要避免的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:35:16.320

是的，你可以这样做。您显然需要在子域上安装另一个 Joomla，一旦完成，创建一个菜单项并将类型设置为“**外部链接**”。然后只需在参数中输入您选择的链接。

# java - 就休眠中的性能而言，哪个持久上下文更好？

> ID：14401164
> 
> 赞同：2
> 
> 时间：2013-01-18T14:37:19.590
> 
> 标签：java, hibernate

正如我们所知，hibernate 中有两个 Persistent 上下文，即**org.hibernate.Session**和**javax.persistent.EntityManager** 但 Session 中的一些方法在 EntityManager 中不存在，
例如
**session.delete(entity);** 是否在 Session 中
，但在 EntityManager 中没有删除，因为我们必须使用
**entityManager.remove(entity);** 所以哪个上下文用于在数据库中持久化实体，哪个在两者之间更快。

据我所知，不同之处在于
传递给 org.hibernate.Session 删除方法的实体实例可以处于托管状态或分离状态，而传递给 javax.persistence.EntityManager 上的删除方法的实体实例必须处于托管状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:45:29.623

没有性能差异；Hibernate 只是通过 JPA 公开它的服务`EntityManager`，除了原生的`Session`. 如果您不关心 JPA 兼容性（我看不出有什么好的理由），请使用本机`Session`来利用 Hibernate 的完整功能集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:59:48.667

非常好的问题
许多 Persistent API 都委托给 org.hibernate API
，所以我认为直接使用 org.hibernate API 更好

# c# - for 循环遍历 ms sql 列

> ID：14401165
> 
> 赞同：1
> 
> 时间：2013-01-18T14:37:22.513
> 
> 标签：c#, razor, asp.net-webpages

我正在使用 MS SQL 数据库在网页/剃须刀上使用 c# 进行编码

我有一个包含以下列的表格

*   星期六1
*   Sat2
*   Sat3
*   Sat4
*   ...
*   Sat25

我想遍历每一个，并将值分配给`satAvail`

我有以下

```
for (var i = 1; i < 26; i++)
{
    satWeek = "Sat" + i;
    satAvail = item.satWeek;
} 
```

我想要相当于`satAvail = item.Sat1;` 我尝试了几条不同的线但没有快乐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:27:08.723

目前尚不清楚您使用的是 ORM 还是 ADO，但假设 ADO，您可以使用以下内容：

```
DataTable dt = new DataTable();

        foreach (DataRow row in dt.Rows)
        {
            foreach (DataColumn column in dt.Columns)
            {
                var satAvail = row[column];
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:40:00.137

使用反射

```
var value = item.GetType().GetProperty("Sat" + i).GetValue(item, null); 
```

如果你想要一个总和（假设 Sat1... Sat2 是整数）

```
var sum = 0;
for (var i = 1; i < 26; i++) {
  sum +=(int)item.GetType().GetProperty("Sat" + i).GetValue(item, null);
}
satAvail = sum; 
```

或 linq 方式：

```
var sum = Enumerable.Range(1, 25)
                     .Select(x => (int)item.GetType().GetProperty("Sat" + x).GetValue(item, null))
                     .Sum(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:31:08.187

我不确定我是否清楚您的实际要求，但总的来说，在使用[Database helper](http://msdn.microsoft.com/en-us/library/webmatrix.data.database%28v=vs.111%29.aspx)时，如果您想访问由 a `Database.Query`or`Database.QuerySingle`调用产生的列值，您可以使用点表示法或索引器来完成.

例如，您可能会通过以下方式获取数据：

```
var db = Database.Open("MyDatabase");
var item = db.QuerySingle("SELECT * FROM Mytable WHERE ID = 1"); 
```

如果您知道要访问名为 的列的值`Sat1`，则可以使用`item.Sat1`. 但是，如果列名表示为变量，则需要使用索引器：

```
var satWeek = "Sat" + "1";
var satAvail = item[satWeek]; 
```

# javascript - Onclick 单选按钮不起作用

> ID：14401167
> 
> 赞同：0
> 
> 时间：2013-01-18T14:37:26.693
> 
> 标签：javascript, html

所以我在表单中有这个单选按钮和文本字段。当页面加载时，禁用字段方法被调用并禁用文本字段。我接下来要做的是通过激活单选按钮重新启用文本字段。因此，我在调用 enablefield 方法的单选按钮上有一个 onclick 事件。但它拒绝重新激活文本字段。这是您认为的语法吗？

```
<form>
<input type="radio" name="asiinternship" value="Tadween Publishing" onclick="enableField(applyingforother)" />Other <input type="text" name="applyingforother" maxlength="56" style="width:143px;margin-bottom:20px;" />
</form>

<script>
        function enableField(myField)
            {
            myField.disabled = false
            return true
            }   

        function disableField(myField)
            {
            myField.disabled = true
            return true
            }       

        disableField(document.forms["contact_form"].applyingforother)

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:38:41.887

您缺少引号：

```
 onclick="enableField(applyingforother) 
```

应该：

```
 onclick="enableField('applyingforother') 
```

# asp.net-mvc-3 - JSON 和 ASP.Net MVC 控制器没有绑定对象列表的属性

> ID：14401171
> 
> 赞同：2
> 
> 时间：2013-01-18T14:37:36.743
> 
> 标签：asp.net-mvc-3, jquery, data-binding

我正在使用 jQuery 进行 AJAX 调用：

```
 var topic = new Array();

        $('.container-topico').each(function (i) {
            topic.push(
            {
                "TopicsModel":
            {
                begins: $(this).find('.HoursStart').val(),
                ends: $(this).find('.HoursEnd').val(),
                texts: $(this).find('.input-topic').val()
            }
            }
                );
        });

        var data = JSON.stringify({
            videoId: '<%=Url.RequestContext.RouteData.Values["id"]%>',
            topics: topic
        });

        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            url: '<%= Url.Action("SubmitTopics") %>',
            traditional: true,
            data:
            data
        ,

            beforeSend: function (XMLHttpRequest) {
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
            },
            success: function (data, textStatus, XMLHttpRequest) {
                $(data).each(function () {
                });
            }
        }); 
```

它以以下格式发送 JSON（例如）：

```
{"videoId":"1","topics":

[{"TopicsModel": {"begins":"00:00:33","ends":"00:01:00","texts":"1\. Primeiro tema"}},
    {"TopicsModel": {"begins":"00:01:00","ends":"00:01:33","texts":"2\. Segundo tema"}},    
    {"TopicsModel": {"begins":"00:01:33","ends":"00:02:00","texts":"3\. Terceiro tema"}},
    {"TopicsModel": {"begins":"00:02:00","ends":"00:00:21","texts":"dasdasdsa ada as das s"}},
    {"TopicsModel": {"begins":"0","ends":"0","texts":""}}]} 
```

在服务器端它有模型：

```
 public class TopicsModel
    {
        public string begins;
        public string ends;
        public string texts;
    } 
```

和控制器：

```
public ActionResult SubmitTopics(int videoId, List<TopicsModel> topics) 
```

发生的事情是：

它具有正确数量的对象，但**没有绑定**每个元素的属性，如下所示：

![它具有正确数量的对象，但没有绑定属性](../Images/5d8ea5a72d008fa76be23e62b6bf543c.png)

为什么它不绑定到属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:42:40.677

绑定无法`TopicsModel`在您的对象中找到该属性`TopicsModel`，因此无法绑定该值。

试试这个：

```
{"videoId":"1","topics":

[{"begins":"00:00:33","ends":"00:01:00","texts":"1\. Primeiro tema"},
    {"begins":"00:01:00","ends":"00:01:33","texts":"2\. Segundo tema"},    
    {"begins":"00:01:33","ends":"00:02:00","texts":"3\. Terceiro tema"},
    {"begins":"00:02:00","ends":"00:00:21","texts":"dasdasdsa ada as das s"},
    {"begins":"0","ends":"0","texts":""}]} 
```

然后绑定应正常恢复。

* * *

您还必须以这种方式更改模型：

```
public class TopicsModel
    {
        public string begins { get; set; }
        public string ends { get; set; }
        public string texts { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:42:56.510

`List<TopicsModel> topics`尝试在控制器参数列表中重命名为`List<TopicsModel> model`

# c# - 如何访问本机 Objective C 属性？

> ID：14401172
> 
> 赞同：2
> 
> 时间：2013-01-18T14:37:41.797
> 
> 标签：c#, objective-c, macos, mono, monomac

我目前正在使用 Mono 在 C# 中为 Mac OSX 编写应用程序。我想做的是确定程序运行的 OSX 版本。

我找到了`NSAppKitVersionNumber`适合我需要的常数。

但是，我不知道如何访问它...

我相信这是可能的，因此您的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T02:07:43.137

像这样的东西：

```
 [DllImport("/System/Library/Frameworks/CoreServices.framework/CoreServices")]
    internal static extern short Gestalt(int selector, ref int response);
    static string m_OSInfoString = null;
    static void InitOSInfoString()
    {
        //const int gestaltSystemVersion = 0x73797376;
        const int gestaltSystemVersionMajor = 0x73797331;
        const int gestaltSystemVersionMinor = 0x73797332;
        const int gestaltSystemVersionBugFix = 0x73797333;

        int major = 0;
        int minor = 0;
        int bugFix = 0;

        Gestalt(gestaltSystemVersionMajor, ref major);
        Gestalt(gestaltSystemVersionMinor, ref minor);
        Gestalt(gestaltSystemVersionBugFix, ref bugFix);

        if (major == 10 && minor == 5)
            RunningOnLeopard = true;
        else
        {
            RunningOnLeopard = false;
            if (major == 10 && minor == 7)
                RunningOnLion = true;
        }

        m_OSInfoString = string.Format("Mac OS X/{0}.{1}.{2}", major, minor, bugFix);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:28:27.190

在 Windows 上的 .NET 中，您有 Environment.OSVersion 方法。你可以试试看它在 Mac OS 上能给你带来什么：

```
// Sample for the Environment.OSVersion property 
using System;

class Sample 
{
    public static void Main() 
    {
    Console.WriteLine();
    Console.WriteLine("OSVersion: {0}", Environment.OSVersion.ToString());
    }
}
/*
This example produces the following results:

OSVersion: Microsoft Windows NT 5.1.2600.0
*/ 
```

# asp.net - 仅当通过框架内的链接加载时，iframe 内页面的 OnLoad 功能才用“'”替换单引号，src 从父项更改

> ID：14401173
> 
> 赞同：0
> 
> 时间：2013-01-18T14:37:45.913
> 
> 标签：asp.net, vb.net, iframe

在我的 asp.net 应用程序（后面的 vb 代码）中，我有一个页面，右侧有一个 iframe。页面左侧（将这里称为父页面，iframe将是iframe）有几个表格，当单击某些单元格时，它会使用javascript更改iframe的src以显示里面的详细帐户他们点击的条目的 iframe。在顶部的 iframe 内，有一个面包屑路径，显示必须遵循的条目才能到达此条目（它有点像一棵树，有不同级别的条目，下面的每个条目都链接到父条目上等）。这些链接只是使用 VB 端的函数创建的简单 html 链接。我的问题是，当我单击父页面中的条目时，一切都正确加载，但是当我单击 iframe 中面包屑路径中的链接时 - 将鼠标滚动到某些图像上时，处理鼠标悬停的 javascript 函数出现错误。两种方式（更改 src 或单击框架中的链接）都调用相同的页面和函数。我相信我已经找到了问题 - 从父窗口单击时 - 鼠标悬停的 javascript 调用看起来像这样。

```
onmouseover="imgOv(this, '../images/modify.gif')" 
```

单击 iframe 中的链接时，鼠标悬停看起来像这样。

```
onmouseover="imgOv(this, &#39;../images/level_over.gif&#39;)" 
```

这是生成此 html 的代码。谁能看到为什么我的单引号变成了 ' 而不是像更改框架 src 时那样的引号？

编码：

这是 navSpot - 详细信息页面中的占位符。这里的信息是从另一个 VB 库加载的

```
<asp:PlaceHolder id="NavSpot" Runat="server"></asp:PlaceHolder> 
```

加载详情页（详情页是iframe中的页面，如果从父级点击，框架的src会变成详情页，如果从链接点击，它只是使用href调用页面）。这是处理 navSpot 的代码

```
 Dim myCtrl As UserControl = LoadControl("../include/NavDetailScreens.ascx")
    myCtrl.ID = "navControl"
    NavSpot.Controls.Add(myCtrl) 
```

这是调用 NavDetailScreens.ascx 时调用的函数 - 我很肯定将相同的确切参数传递到 SP，并且更改 src 或单击 iframe 中已有的链接没有区别（在关于用于存储过程的参数）。错误部分似乎在最后，特别是在子末尾的三行，在以“If DS.Item("activity_enable") = 1 Then”开头的 if 内 - 似乎这是单曲的时候引号变成了 & # 39; （使用空格，因此它不会自动调整为单引号 - JS 函数中的实际字符串中没有空格）

```
 Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'Put user code to initialize the page here
    If Request.QueryString("standalone") <> "true" Then
        Dim strConn As String
        strConn = WebConfigurationManager.AppSettings.Item("ConnectionString")
        Dim objConn As SqlConnection
        objConn = New SqlConnection(strConn)
        Dim myCmd As SqlCommand
        myCmd = New SqlCommand
        myCmd.Connection = objConn
        myCmd.CommandType = CommandType.StoredProcedure
        myCmd.CommandText = "SPNavigation"
        Dim lnChildCat As Integer
        Dim prmEntityID As New SqlParameter("@entityID", SqlDbType.BigInt)
        prmEntityID.Value = Request.QueryString("taskgrpid")
        Dim prmEntityCat As New SqlParameter("@entityCat", SqlDbType.Int)

        If Request.QueryString("taskgrpid") = "" Then
            prmEntityCat.Value = 35
            lnChildCat = 26
            prmEntityID.Value = DBNull.Value
        ElseIf Request.QueryString("taskgrpcategory") = Request.QueryString("ptaskgrpcategory") Then
            If Request.QueryString("taskgrpcategory") = 26 Then
                prmEntityCat.Value = 34
                lnChildCat = 34
            ElseIf Request.QueryString("taskgrpcategory") = 10 Then
                prmEntityCat.Value = 11
                lnChildCat = 11
            ElseIf Request.QueryString("taskgrpcategory") = 11 Then
                prmEntityCat.Value = 12
                lnChildCat = 12
            ElseIf Request.QueryString("taskgrpcategory") = 12 Then
                prmEntityCat.Value = 13
                lnChildCat = 13
            ElseIf Request.QueryString("taskgrpcategory") = 35 Then
                prmEntityCat.Value = 35
                lnChildCat = 26
            ElseIf Request.QueryString("taskgrpcategory") = 34 Then
                prmEntityCat.Value = 10
                lnChildCat = 11
            End If
        Else
            If Request.QueryString("taskgrpcategory") = 26 Then
                prmEntityCat.Value = 26
                lnChildCat = 34
            Else
                prmEntityCat.Value = Request.QueryString("taskgrpcategory")
                lnChildCat = Request.QueryString("taskgrpcategory")
            End If
        End If

        Dim prmIsMilestone As New SqlParameter("@isMilestone", SqlDbType.Int)
        If Request.QueryString("milestone") = "true" Then
            prmIsMilestone.Value = 1
        Else
            prmIsMilestone.Value = 0
        End If

        Dim prmResID As New SqlParameter("@resid", SqlDbType.Int)
        prmResID.Value = Session.Item("user_id")
        myCmd.Parameters.Add(prmEntityID)
        myCmd.Parameters.Add(prmEntityCat)
        myCmd.Parameters.Add(prmResID)
        myCmd.Parameters.Add(prmIsMilestone)
        Dim DS As SqlDataReader
        objConn.Open()
        DS = myCmd.ExecuteReader
        Dim objRow As TableRow
        objRow = New TableRow
        Dim objCell As TableCell
        Dim lc As LiteralControl
        Dim dynImg As Image
        While DS.Read
            objCell = New TableCell
            lc = New LiteralControl
            lc.Text = "<br>" & DS.Item("act_name")
            dynImg = New Image
            If Request.QueryString("mode") = "create" Then
                If IsDBNull(DS.Item("act_frm_params")) = False Then
                    If Request.QueryString("milestone") = "true" Then
                        If DS.Item("act_frm_params") = "&mode=create&milestone=true" And CInt(lnChildCat) = CInt(DS.Item("act_task_category")) Then
                            dynImg.ImageUrl = DS.Item("act_img_name_edit")
                        Else
                            dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                        End If
                    Else
                        If DS.Item("act_frm_params") = "&mode=create" And CInt(lnChildCat) = CInt(DS.Item("act_task_category")) Then
                            dynImg.ImageUrl = DS.Item("act_img_name_edit")
                        Else
                            dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                        End If
                    End If
                Else
                    dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                End If
            ElseIf Request.QueryString("mode") = "edit" Then
                If IsDBNull(DS.Item("act_frm_params")) = False Then
                    If Request.QueryString("milestone") = "true" Then
                        If DS.Item("act_frm_params") = "&mode=edit&milestone=true" Then
                            dynImg.ImageUrl = DS.Item("act_img_name_edit")
                        Else
                            dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                        End If
                    Else
                        If DS.Item("act_frm_params") = "&mode=edit" And CInt(Request.QueryString("taskgrpcategory")) = CInt(DS.Item("act_task_category")) Then
                            dynImg.ImageUrl = DS.Item("act_img_name_edit")
                        Else
                            dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                        End If
                    End If
                Else
                    dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                End If
            Else
                If DS.Item("activity_enable") = 1 Then
                    dynImg.ImageUrl = DS.Item("act_img_name")
                    dynImg.Style.Add("cursor", "hand")
                    dynImg.Attributes.Add("onmouseover", "imgOv(this, '" & DS.Item("act_img_name_over") & "')")
                    dynImg.Attributes.Add("onmouseout", "imgOu(this, '" & DS.Item("act_img_name") & "')")
                    dynImg.Attributes.Add("onclick", "imgclick('" & DS.Item("act_frm_name") & "', '" & DS.Item("act_frm_params") & "" & "', " & DS.Item("act_task_category") & ")")
                Else
                    dynImg.ImageUrl = DS.Item("act_img_name_disabled")
                End If
            End If
            objCell.Controls.Add(dynImg)
            objCell.Controls.Add(lc)
            objCell.CssClass = "infotext2"
            objCell.VerticalAlign = VerticalAlign.Top
            objCell.Width = Unit.Pixel(50)
            objRow.Cells.Add(objCell)
        End While
        DS.Close()
        objConn.Close()
        tlbNav.Rows.Add(objRow)
    End If
End Sub 
```

再次感谢你的帮助。

编辑：将单引号更改为常规引号时，它们被替换为 & quote 而不是 & # 39 - 所以这不是一个解决方案。

编辑 2：似乎这是 .net 4.0 和安全更新的原因 - 回滚到 3.5 可以解决此问题，但这不是一个选项。还有其他解决方案可以阻止这种转换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:46:00.403

能够通过单击带有 href 的链接而不是单击链接来解决此问题，将它们更改为在父页面中调用 javascript 函数，这会更改 iframe 的 src，并且逗号不会以这种方式转换。

# image - MATLAB 中的背景提取

> ID：14401174
> 
> 赞同：0
> 
> 时间：2013-01-18T14:37:46.897
> 
> 标签：image, matlab, image-processing, edge-detection

我正在 MATLAB 中开发一个项目，该项目将从图像中提取背景，就像这是一个图像

![示例图像](../Images/ba938e10569a83655b86f4e4e58e12e1.png)

它应该给我背景（蓝色部分）或人像的位置/坐标，到目前为止我已经计算过了

1) 使用精明的边缘

2) 连接组件

有没有详细的工作、算法或论文？所以我可以做到。

**编辑**

我面临的问题是如果我检测到边缘，它会给我`binary`图像，所以如果我假设所有具有值`0`（黑色）的像素都是我的背景，那么我将如何区分*I(r,c)*是人的一部分还是背景的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:58:34.293

请注意，这只是一种方法，但它应该可以工作。

假设您可以制作具有以下值的矩阵：

```
1 if it is (in the range of) your background color
0 otherwise 
```

并且假设背景只是在人的“外部”（尽管如果背景周围只有一点头发，它可能仍然有效），那么检查某物是否是背景的简单方法是

1.  观察矩阵中每个像素的邻域
2.  如果平均值足够高（比如超过 0.2），则假设它是背景像素，否则假设它是非背景像素。
3.  将结果存储在你的新矩阵中，你就有了背景像素的所有位置

到目前为止，它非常简单，甚至没有使用您已经计算边缘的事实。现在有了这些优势，您可以进行以下改进：

如果一个像素在边缘“内部”足够远（更简单：离边缘中心足够近），则不要将其视为背景的候选者。如果有人有蓝色的大眼睛，这应该会有所帮助。

# java - 日食代码格式化程序

> ID：14401179
> 
> 赞同：1
> 
> 时间：2013-01-18T14:38:01.093
> 
> 标签：java, eclipse, formatting

我正在使用格式不正确的现有代码。Eclipse 格式化程序格式化失败，我是配置格式化程序的新手。因此，经过一段时间的尝试，我失败了。内置模板不起作用。无论如何，我想使用 Eclipse Formatter，而不是插件。

我想获得以下代码...

```
/** Class A
  */
public class A
{  
    /** An int */
    int i;

    /** An A */
    A(int i)
    {  this.i = i;
    }

    /** Gets i */
    int getI()
    {   int b = i *2;
        if(check())
        {   try { doIt(); } catch (Exception e) {doIt();}
            if (check())
            {   if (check()) doIt();
                else return i;
            }
        }
        return b;
    }

    private void doIt() {}

    private boolean check() {return false;}
} 
```

...格式化为...

```
/** 
 * Class A
 */
public class A {  

    /** 
     * An int 
     */
    int i;

    /** 
     * An A 
     */
    A(int i){  
        this.i = i;
    }

    /** 
     * Gets i 
     */
    int getI(){ 
        int b = i *2;
        if(check()){    
            try { 
                doIt(); 
            } catch (Exception e) {
                doIt();
            }
            if (check()){
                if (check()){
                    doIt();
                }else{
                    return i;
                }
            }
        }
        return b;
   }

    private void doIt() {}

    private boolean check() {return false;}

} 
```

* * *

有没有办法配置格式化程序来处理我的问题？

任何帮助都非常感谢，因为它有很多代码:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:45:49.357

首先，您的代码不可编译。您首先需要修复编译错误，然后 Eclipse 将不再无法按照您期望的方式格式化代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:43:24.280

在 Window / Preferences 中：检查 Java / Code Style / Formatter。然后“编辑”活动配置文件。

然后寻找“大括号”选项卡。例如，您可以在那里将方法、构造函数等配置为“在同一行”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T14:54:14.787

Java (Sun) 代码样式在右侧有大括号，而不是在新行。我建议你习惯这种代码风格。除了许多程序员喜欢新行上的大括号之外，大多数 Java 代码都使用[java 标准约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

许多程序员并不完全遵守这些准则（我是少数不喜欢遵循第 80 列的人之一），因此必须根据您的感觉调整这些约定。但总体方向是 Java 代码用于在同一行打开花括号（例如，与 C 不同）。

保持一般风格是个好主意，也有助于您阅读其他人的代码。

顺便说一句，Eclipse 格式化程序是完全可定制的，如果你觉得这样，你可以在新行上加上大括号：

![在此处输入图像描述](../Images/d81a09e3c846446c77cd8176ebc5428c.png)

这在我看来是 C 代码:)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T15:01:36.120

使用[Clean Up](http://www.ibm.com/developerworks/library/os-eclipse-clean/) ( `Source -> Clean Up...`) 代替格式化程序。Clean Up 可以选择使用 、 和 语句的块`if`以及`while`格式`do`选项`for`，因此您可以获得非常接近您想要的格式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T14:44:44.433

我认为 Eclipse 中的 Ctrl + Shift + F 可以做到这一点

# jquery - onClick 不显示 div

> ID：14401184
> 
> 赞同：0
> 
> 时间：2013-01-18T14:38:25.383
> 
> 标签：jquery, html, css, onclick

[我的 jquery 没有在http://jsfiddle.net/jspence29/a3BQR/1/](http://jsfiddle.net/jspence29/a3BQR/1/)上显示我想要的 div

我希望当您单击按钮时出现大 div 并在您再次单击时消失，但它只是没有出现。谢谢

此外，更推荐使用 css 更改 jquery 或仅使用此显示和隐藏查询？

```
$(".first1").onClick(
  function () {
    $('#suitsyou').show();
  },
  function () 
    $('#suitsyou').hide();
  }); 
```

或类似的东西

```
$("div").click(function () {
  var color = $(this).css("background-color");
  $("#result").html("That div is <span style='color:" +
                     color + ";'>" + color + "</span>.");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:42:52.877

尝试[切换](http://api.jquery.com/toggle/)

```
$(".first1").on('click', 
  function () {
    $('#suitsyou').toggle();
  });
$(".last1").on('click', 
  function () {
      $('#dealsandoffers').toggle() 
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:07:56.227

```
$(function(){
    $('div').hide()
$('li.first1').click(function(){
    $('div').hide()
   $('#suitsyou').slideToggle();
});
$('li.last1').click(function(){
   $('div').hide()
   $('#dealsandoffers').slideToggle();
});    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:43:32.390

您有大量错误，我已在此处更正：http: [//jsfiddle.net/a3BQR/4/](http://jsfiddle.net/a3BQR/4/) - 请注意，`.toggle`以这种方式使用已在 jQuery 1.9 中删除。我只是为了方便而在这里做的。

1.  `.onClick`不是函数
2.  您`function ()`在第二个函数之后缺少左括号。
3.  你没有在 jsfiddle 中选择 jQuery 作为你的框架

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:46:10.557

```
$(function(){
  $('li.first1').click(function(){
   $('#suitsyou').toggle();
  });
}); 
```

并将 div 隐藏在您的 html 中

```
<div id="suitsyou" style='display:none'> 
```

[http://jsfiddle.net/A6Uvx/](http://jsfiddle.net/A6Uvx/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:43:17.323

您的代码无效，如果您查看了浏览器的开发人员工具，您就会知道（控制台中会出现错误）。

jQuery 中没有`onclick()`函数，它被简单地调用，并且在触发该事件时`.click()`需要一个*函数来执行。*您不能传递两个函数以在交替单击时执行，尽管 jQuery 确实为此提供了一个函数：（[`.toggle()`](http://api.jquery.com/toggle-event/)不要与切换一组元素的可见性的函数混淆）

用法：

```
$(".first1").toggle(
    function () {
        $('#suitsyou').show();
    },
    function () {
        $('#suitsyou').hide();
    }); 
```

# html - 固定图像最大宽度

> ID：14401186
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:38:33.280
> 
> 标签：html

`<img>`我在标签中有一个图像`<td></td>`，我想设置最大固定宽度，因为当图像很大时，它会从布局中消失并且我的表格变得很大。如果图像宽度小于最大宽度，它应该具有原始大小参数。没有javascript我怎么能做到这一点？

```
<table>
  <tr>
    <td>
      <img>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:46:11.743

你可以这样做：

```
 <img src="..." class="img" /> 
```

CSS：

```
.img {
 max-width: 100px;
} 
```

# javascript - HTML5 画布：只有外阴影

> ID：14401187
> 
> 赞同：2
> 
> 时间：2013-01-18T14:38:34.787
> 
> 标签：javascript, html, canvas

如果我在画布上绘制一个矩形，并启用阴影，那么也会创建内阴影和外阴影，但我只想要外阴影。

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

ctx.shadowColor = 'black';
ctx.shadowBlur = 5;

ctx.strokeRect(20,30,150,75); 
```

我找到的唯一方法是`ctx.clearRect(20,30,150,75);`. 但这并不是我真正想要的，因为我的rect下可能有东西，我不想删除它。

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:42:56.277

您可以获取矩形内的像素，进行绘画并将这些像素放回原处。这样，矩形内的像素不会改变：http: [//jsfiddle.net/dkAKE/](http://jsfiddle.net/dkAKE/)。

```
var imgdata = ctx.getImageData(20, 30, 150, 75);
ctx.strokeRect(20, 30, 150, 75);
ctx.putImageData(imgdata, 20, 30); 
```

要保留边框，`(21, 31, 148, 73)`请用作区域（假设笔划宽度为 1px）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:57:32.197

您也可以使用`.fillRect()`代替`.strokeRect()`. 这将创建一个实心矩形，其内部颜色定义为`.fillStyle()`

```
ctx.shadowColor = 'black';
ctx.fillStyle = 'white';
ctx.shadowBlur = 5;
ctx.fillRect(20,30,150,75); 
```

您仍然会遇到覆盖矩形下方的任何内容的问题，因此您仍然需要 pimvdb 的解决方案来解决该问题。

# asp.net-mvc-4 - html.beginform 不回发到控制器，错误加载页面消息？

> ID：14401190
> 
> 赞同：0
> 
> 时间：2013-01-18T14:38:42.900
> 
> 标签：asp.net-mvc-4, html.beginform

我一直在尝试将值发布回控制器，以便我可以在其他地方更新余额，但我无法让它工作。我收到一条消息

> *加载页面时出错*

我想要的只是一个`double`值，但老实说，我只想在第一个实例中将代码放入控制器中。

我`.cshtml`的就像：

```
@using (Html.BeginForm("Deposit", "AccountController", FormMethod.Post))
{
       <fieldset>
        <legend>Deposit Amount</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.UserName)
        </div>
       <div class="editor-field">
           @Html.TextBoxFor(model => model.UserName)
            @Html.ValidationMessageFor(model => model.UserName)
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>

        </fieldset>

} 
```

控制器是：

```
 [HttpGet]
    public ActionResult Deposit()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Deposit(LoginModel model)
    {

        // do things

        return View(model);
    } 
```

我是 MVC 的新手。我知道视图代码没有我最终想要使用的数量值，或者我可以将它添加到模型中并传递它，但我根本无法将它传递给控制器​​。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:45:03.730

我认为你只是稍微偏离了 MVC 的命名约定。假设您的控制器类的名称是`AccountController`，您应该指定减去`BeginForm()`方法中的“控制器”部分：

```
@using (Html.BeginForm("Deposit", "Account", FormMethod.Post))
{
    ...
} 
```

# xml - 循环遍历完整的 XML 文档

> ID：14401193
> 
> 赞同：6
> 
> 时间：2013-01-18T14:38:45.440
> 
> 标签：xml, vba, ms-access, recursion

我正在寻找一种方法来遍历我的 XML 文档的所有节点。

**XML 文件示例**

```
<root>
    <llnode created="2005-05-24T15:26:24" createdby="42912153" createdbyname="" description="" id="107810306" modified="2008-06-05T16:07:44" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810295" size="4">
        <Nickname domain=""/>
        <MajorMinorContainer>false</MajorMinorContainer>
        <llnode created="2005-05-06T12:54:03" createdby="42912153" createdbyname="" description="" id="107815681" modified="2006-12-04T14:39:51" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810306" size="0">
            <Nickname domain=""/>
            <MajorMinorContainer>false</MajorMinorContainer>
        </llnode>
        <llnode created="2005-05-06T12:54:31" createdby="42912153" createdbyname="" description="" id="107815683" modified="2006-12-04T14:39:53" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810306" size="0">
            <Nickname domain=""/>
            <MajorMinorContainer>false</MajorMinorContainer>
        </llnode>
    </llnode>
    <llnode created="2005-05-24T15:26:24" createdby="42912153" createdbyname="" description="" id="107810306" modified="2008-06-05T16:07:44" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810295" size="4">
        <Nickname domain=""/>
        <MajorMinorContainer>false</MajorMinorContainer>
        <llnode created="2005-05-06T12:54:03" createdby="42912153" createdbyname="" description="" id="107815681" modified="2006-12-04T14:39:51" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810306" size="0">
            <Nickname domain=""/>
            <MajorMinorContainer>false</MajorMinorContainer>
        </llnode>
        <llnode created="2005-05-06T12:54:31" createdby="42912153" createdbyname="" description="" id="107815683" modified="2006-12-04T14:39:53" name="" objname="" objtype="0" ownedby="42912153" ownedbyname="" parentid="107810306" size="0">
            <Nickname domain=""/>
            <MajorMinorContainer>false</MajorMinorContainer>
        </llnode>
    </llnode>
</root> 
```

文档始终具有相同的结构。每个*llnode*代表一个文件夹。这可以非常深入（对于上面的示例，范围只有 2，但可以达到 10）。

如何遍历所有记录？我不想将一个循环放入一个循环中，然后再放入另一个循环并这样做 20 次以确保处理每个节点。有没有办法只做一个循环？

以下是我到目前为止所得到的，仅适用于实际的 XML 文档（范围 = 2），需要随着范围的增加添加尽可能多的循环（它不应该超过范围 = 10）

**原始 VBA**（来自原始问题）

```
xmlExportDoc = "myXmlDoc.xml"

Set xmlDoc = New MSXML2.DOMDocument
xmlDoc.Load (xmlExportDoc)

Set xmlNodeList = xmlDoc.SelectNodes("//llnode")

For Each Node In xmlNodeList
   MsgBox "Listing the EXISTING nodes"
   MsgBox Node.nodeName & " " & Node.NodeValue & " " & Node.NodeType

   If Node.HasChildNodes() Then
      MsgBox Node.nodeName & "has child nodes"
      Set xmlNodeList2 = Node.ChildNodes

      For Each Node2 In oNodeList2
          MsgBox Node2.nodeName & " " & Node2.NodeValue & " " & Node2.NodeType

          If Node2.HasChildNodes() Then
             MsgBox Node2.nodeName & "has child nodes"
          End If
      Next
   End If
Next 
```

**更新的 VBA**

```
Private Function xmlParse(n As MSXML2.IXMLDOMNode)
    Dim n2 As MSXML2.IXMLDOMNode
    MsgBox n.nodeName & " " & n.NodeValue & " " & n.NodeType

    If n.HasChildNodes() Then
        MsgBox n.nodeName & " has child nodes"

        For Each n2 In n.ChildNodes
            xmlParse (n2)
        Next

        MsgBox "Done listing child nodes for " & n.nodeName
    End If
End Function 
```

以及事件的代码：

```
 Dim xmlExportDoc As String
    Dim xmlDoc As MSXML2.DOMDocument
    Dim xmlNodeList As MSXML2.IXMLDOMNodeList, xmlNodeList2
    Dim Node As MSXML2.IXMLDOMNode

    xmlExportDoc = "http://myserver.com/myDoc.xml"

    Set xmlDoc = New MSXML2.DOMDocument
    xmlDoc.async = False
    xmlDoc.Load (xmlExportDoc)

    Set xmlNodeList = xmlDoc.SelectNodes("//llnode")

    For Each Node In xmlNodeList
        Call xmlParse(Node)
    Next 
```

这仍然不起作用，在进行递归`xmlParse()`调用时出错，因为`MSXML2.IXMLDOMNode.ChildNodes`它似乎不是一种`MSXML2.IXMLDOMNode`类型。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T15:09:00.697

我认为你需要的是一个递归函数。我真的不知道 VBA 语法所以原谅伪代码，但你应该能够做这样的事情：

```
Set xmlNodeList = xmlDoc.SelectNodes("/*/llnode")
For Each node in xmlNodeList
    ListNodes(node)
Next

Function ListNodes(n As Node) 
     MsgBox n.nodeName & " " & n.NodeValue & " " & n.NodeType
     If n.HasChildNodes() Then
        MsgBox n.nodeName & "has child nodes"
        For Each n2 in n.ChildNodes
           ListNodes(n2)
        Next
        MsgBox "Done listing child nodes for " & n.nodeName
     End If   
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T17:55:56.530

到目前为止，这是我带来的：

```
xmlExportDoc = "http://www.mysite.com/myDoc.xml"

Dim xmldoc As MSXML2.DOMDocument
Dim xmlNode As MSXML2.IXMLDOMNode
Dim xmlNodeList As MSXML2.IXMLDOMNodeList
Dim myNode As MSXML2.IXMLDOMNode

Set xmldoc = New MSXML2.DOMDocument
xmldoc.async = False
xmldoc.Load (xmlExportDoc)
Set xmlNodeList = xmldoc.getElementsByTagName("*")
On Error Resume Next
For Each xmlNode In xmlNodeList
    For Each myNode In xmlNode.ChildNodes
        'Debug.Print xmlNode.Attributes(0).Text
    Next myNode
Next xmlNode
Set xmldoc = Nothing 
```

如果层次结构不重要，它就可以工作，因为这个脚本只是循环遍历节点，无论它是什么级别。如果层次结构很重要，请查看 JLRishe 的答案。

# .net-4.0 - 程序集版本冲突.net 4

> ID：14401194
> 
> 赞同：0
> 
> 时间：2013-01-18T14:39:07.223
> 
> 标签：.net-4.0, gac

有谁知道解决这个错误？

“Microsoft.Reporting.WebForms.ReportViewer”类型存在于“c:\Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms**9.0.0.0**__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll”和“c: \Windows\assembly\GAC_MSIL\Microsoft.ReportViewer.WebForms**10.0.0.0**__b03f5f7f11d50a3a\Microsoft.ReportViewer.WebForms.dll'

我参考了 v10，当我检查我的 GAC 时，我发现了三个版本的 Microsoft.ReportViewer.WebForms。v9，v10，v11..！甚至无法从 GAC 中删除旧版本的程序集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:15:39.513

我已经用跟踪和错误方法解决了这个问题。由于某些原因，配置文件中的程序集版本未更新。像这样手动将版本更改为 10：

```
<httpHandlers> 
   <add path="Reserved.ReportViewerWebControl.axd" verb="*" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false"/>
</httpHandlers> 
```

# javascript - 我想在css3中的每次点击都为图像制作动画

> ID：14401197
> 
> 赞同：0
> 
> 时间：2013-01-18T14:39:19.280
> 
> 标签：javascript, html, css

我想在每次点击 change_photo 按钮时移动 div 但这段代码只运行一次，我不需要无限循环，我希望每次点击时 div 移动。

这是CSS：

```
<style>
      @-webkit-keyframes myfirst
{
0%   {left:0px}
100% {left:100%}
}
#images {
  width: 1000px;
  height: 300px;
  overflow: hidden;
  position: relative;
  margin: 20px auto;
}
#im{ position:relative;}
    </style> 
```

这是html代码：

```
<div id="images" style="">
  <img id="im" src="images/banner.jpg" 
            style="width: 833px; height: 179px;" />
            </div>
            <input type="button" value="change_photo" onclick="animate();" />
    </div>

<script>
function animate() {
        var im = document.getElementById("im");
        im.style.webkitAnimation = "myfirst 3s";
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:43:20.687

使用 css3 过渡 -

```
#image{
-webkit-transition:all 2s;
}
#image:hover{
left:100px;
} 
```

删除 Javascript 和关键帧规则，这将起作用
编辑：
[jsfiddle](http://jsfiddle.net/svineet/vQA55/) using [jquery.animate()](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:08:24.587

```
@-webkit-keyframes myfirst
{
    0%   {left:0}
   50%   {left:100%}
  100%   {left:0}
} 
```

# camera - 如何在 OpenSceneGraph 中构建根据屏幕分辨率调整大小的平视显示器？

> ID：14401198
> 
> 赞同：0
> 
> 时间：2013-01-18T14:39:24.543
> 
> 标签：camera, 2d, screen-resolution, openscenegraph, hud

我对 OpenSceneGraph 很陌生，我有以下问题：

我正在尝试用几张图像构建一个 2D 平视显示器，以便它可以根据屏幕的分辨率调整大小。这意味着我有额外的角落图像和连接角落的条形图等等。嗯，就是这样。但我不知道如何在 OpenSceneGraph 中做到这一点。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T02:40:28.097

因此，当窗口调整大小时，您会从 osgViewer 收到一个事件，告诉您有关更改的信息。

当窗口大小发生变化时，您需要调整视口的大小，因此您的 HUD 几何图形对显示器的像素大小有一些了解（大多数 HUD 示例设置为标称 1024x768 屏幕，然后让它伸展为窗口被调整大小，假装新视口仍然是 1024x768）。

一旦你调整了 viewpoer 的大小，你需要重新排列你的几何图形。您的角块需要以您希望它们始终出现的固定像素大小布置，然后您需要连接元素水平或垂直更改大小，以填充角块之间的空间。当几何图形被拉伸时，您通常依靠纹理拉伸或重复来填充空间。

如果这些都没有任何意义，我可以描述更多。

# hadoop - datanode 可用：安装 hadoop 时为 0

> ID：14401199
> 
> 赞同：0
> 
> 时间：2013-01-18T14:39:26.387
> 
> 标签：hadoop

我想在单节点上安装hadoop-0.23.5，但是启动namenode和datanode后，显示可用的datanode为0：

```
Configured Capacity: 0 (0 KB) Present Capacity: 0 (0 KB) DFS Remaining: 0 (0 KB) DFS Used: 0 (0 KB) DFS Used%: ï¿½% Under replicated blocks: 0 Blocks with corrupt replicas: 0 Missing blocks: 0

Datanodes available: 0 (0 total, 0 dead) 
```

我检查了datanode日志文件，这是错误：

```
FATAL org.apache.hadoop.hdfs.server.datanode.DataNode: Exception in secureMain
java.io.IOException: Incorrect configuration: namenode address dfs.namenode.servicerpc-address or dfs.namenode.rpc-address is not configured. 
```

我在 hdfs-site.xml 中设置了 dfs.namenode.rpc-address ，但我不明白问题出在哪里。有人知道我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:44:04.887

您可能遇到了影响版本 0.23的[问题](https://issues.apache.org/jira/browse/HDFS-2595)

您需要做的是更新`fs.default.name`core-default.xml

# ruby-on-rails - 在 Amazon Elastic Beanstalk 上部署 rails 项目时如何自动重启 delay_job？

> ID：14401204
> 
> 赞同：15
> 
> 时间：2013-01-18T14:39:43.070
> 
> 标签：ruby-on-rails, deployment, amazon-web-services, delayed-job, amazon-elastic-beanstalk

我在[Amazon Elastic Beanstalk](http://aws.amazon.com/en/elasticbeanstalk/)上托管了一个 rails 项目，我尝试配置一个[容器命令](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-container_commands)以在每次部署后自动重新启动服务器上的[延迟作业工作程序。](https://github.com/collectiveidea/delayed_job)

我试过这个：

```
container_commands:
  restartdelayedjob:
    command: "RAILS_ENV=production script/delayed_job --pid-dir=/home/ec2-user/pids start"
    cwd: /var/app/current 
```

但是，似乎推送版本是在重新启动工作人员后部署的，因此工作人员无法处理作业。

当我通过 ssh 连接到我的实例时，终止工作进程并从已部署的版本文件夹中重新启动一个新进程，一切正常。

你对我如何处理这个有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-29T09:58:59.520

根据[亚马逊文档`container_commands`](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-container_commands)：

> 它们在应用程序和 Web 服务器已设置并且应用程序版本文件已提取，但**在应用程序版本部署之前运行**。

（强调我的）

这意味着在`/var/app/current`您设置为`cwd`for 您的命令的那一点仍然指向以前的版本。但是，默认情况下，再次从文档中`cwd`：

> 是解压后的应用目录。

这意味着如果您想`delayed_job`从刚刚提取（但尚未部署）的应用程序的目录运行，请不要覆盖`cwd`，它应该为即将部署的应用程序启动延迟作业。

参考：[http ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-container_commands](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html#customize-containers-format-container_commands)

## 更新：

我现在自己进行了设置，发现通过标准执行此操作存在限制`container_commands`- 基本上，delayed_job 将在它仍在`/var/app/ondeck`目录中时启动。通常这没问题，但我在某些工作中遇到了一些问题，因为该路径卡在它周围会导致错误，因为应用程序现在位于`/var/app/current`.

我发现了一种未记录的（非常警告！）方法，您可以添加要在应用服务器重新启动后运行的脚本（并且您的新部署位于 中`/var/app/current`）。

基本上，Elastic Beanstalk 将`/opt/elasticbeanstalk/hooks/appdeploy/post`在 Web 服务器重新启动后执行任何脚本。这意味着如果您将 shell 脚本放在此目录中，它们将被运行。

我创建了一个这样的shell脚本：

```
#!/usr/bin/env bash
. /opt/elasticbeanstalk/support/envvars
cd $EB_CONFIG_APP_CURRENT
su -c "RAILS_ENV=production script/delayed_job --pid-dir=$EB_CONFIG_APP_SUPPORT/pids restart" $EB_CONFIG_APP_USER 
```

我将此脚本上传到 S3 存储桶，并确保它是“公开的”。然后，您可以使用`.ebextensions`目录中的选项脚本（例如`99delayed_job.config`）将此脚本部署为应用程序部署的一部分，请注意该`post`目录可能不存在：

```
commands:
  create_post_dir:
    command: "mkdir /opt/elasticbeanstalk/hooks/appdeploy/post"
    ignoreErrors: true
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_restart_delayed_job.sh":
    mode: "000755"
    owner: root
    group: root
    source: http://YOUR_BUCKET.s3.amazonaws.com/99_restart_delayed_job.sh 
```

当你部署时，你应该在你的`/var/log/eb-tools.log`：

```
2013-05-16 01:20:53,759 [INFO] (6467 MainThread) [directoryHooksExecutor.py-29] [root directoryHooksExecutor info] Executing directory: /opt/elasticbeanstalk/hooks/appdeploy/post/
2013-05-16 01:20:53,760 [INFO] (6467 MainThread) [directoryHooksExecutor.py-29] [root directoryHooksExecutor info] Executing script: /opt/elasticbeanstalk/hooks/appdeploy/post/99_restart_delayed_job.sh
2013-05-16 01:21:02,619 [INFO] (6467 MainThread) [directoryHooksExecutor.py-29] [root directoryHooksExecutor info] Output from script: delayed_job: trying to stop process with pid 6139...
delayed_job: process with pid 6139 successfully stopped.

2013-05-16 01:21:02,620 [INFO] (6467 MainThread) [directoryHooksExecutor.py-29] [root directoryHooksExecutor info] Script succeeded. 
```

正如我所说，将内容放在这个“post”目录中是未记录的——但希望亚马逊在某个时候为`.options`脚本添加实际支持以在部署后运行命令，在这种情况下，您可以将其移至官方支持的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-13T19:08:00.427

在**运行 Ruby 2.1 (Passenger Standalone) 的 64 位 Amazon Linux 2014.09 v1.1.0 上**，感谢[这篇文章](http://www.dannemanne.com/posts/post-deployment_script_on_elastic_beanstalk_restart_delayed_job)。

请注意，此脚本以 root 身份运行，但您的工作人员应以 webapp 用户身份运行。

```
# Adds a post-deploy hook such that after a new version is deployed
# successfully, restarts the delayed_job workers.
#
# http://stackoverflow.com/questions/14401204/how-to-automatically-restart-delayed-job-when-deploying-a-rails-project-on-amazo
# http://www.dannemanne.com/posts/post-deployment_script_on_elastic_beanstalk_restart_delayed_job
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/50_restart_delayed_job.sh":
    mode: "000755"
    owner: root
    group: root
    encoding: plain
    content: |
      #!/usr/bin/env bash

      EB_SCRIPT_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k script_dir)
      EB_APP_CURRENT_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k app_deploy_dir)
      EB_APP_USER=$(/opt/elasticbeanstalk/bin/get-config container -k app_user)
      EB_SUPPORT_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k support_dir)
      EB_APP_PIDS_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k app_pid_dir)

      . $EB_SUPPORT_DIR/envvars
      . $EB_SCRIPT_DIR/use-app-ruby.sh

      cd $EB_APP_CURRENT_DIR

      # Switch to the webapp user.  Worker shouldn't be run as root.
      su -s /bin/bash -c "bundle exec bin/delayed_job --pid-dir=$EB_APP_PIDS_DIR restart" $EB_APP_USER 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-28T13:29:36.750

如果有人希望在最新的 ElasticBeanstalk（运行 Ruby 2.1 (Puma) 的 64 位 Amazon Linux 2014.09 v1.0.9）中获得延迟作业：我使用以下代码使其工作（感谢[damontorgerson](https://gist.github.com/damontorgerson/2231f42302da9f9f078b)）。该文件位于 .ebextensions 文件夹中的 ruby​​.config 中。

```
# Install git in order to be able to bundle gems from git
packages:
yum:
  git: []

files: 
  "/opt/elasticbeanstalk/hooks/appdeploy/post/50_restart_delayed_job":
    mode: "000777"
    owner: root
    group: root
    content: |
      EB_SCRIPT_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k script_dir)
      EB_APP_STAGING_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k app_staging_dir)
      EB_CONFIG_APP_CURRENT=$(/opt/elasticbeanstalk/bin/get-config container -k app_deploy_dir)
      EB_CONFIG_APP_LOGS=$(/opt/elasticbeanstalk/bin/get-config container -k app_log_dir)
      EB_APP_USER=$(/opt/elasticbeanstalk/bin/get-config container -k app_user)
      EB_SUPPORT_DIR=$(/opt/elasticbeanstalk/bin/get-config container -k support_dir)
      EB_CONFIG_APP_PIDS=$(/opt/elasticbeanstalk/bin/get-config container -k app_pid_dir)

      . $EB_SUPPORT_DIR/envvars
      . $EB_SCRIPT_DIR/use-app-ruby.sh

      cd $EB_CONFIG_APP_CURRENT

      . $EB_SUPPORT_DIR/envvars.d/sysenv

      bin/delayed_job --pid-dir=/var/tmp restart 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-08T20:49:08.923

我让我的“守护进程”宝石像这样工作：

```
commands:
  create_post_dir:
    command: "mkdir /opt/elasticbeanstalk/hooks/appdeploy/post"
    ignoreErrors: true
  webapp_pids:
    command: "mkdir /home/webapp/pids"
    ignoreErrors: true
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_restart_delayed_job.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      . /opt/elasticbeanstalk/support/envvars
      chown webapp:webapp /home/webapp/pids
      su -l -c "$EB_CONFIG_APP_CURRENT/bin/delayed_job --pid-dir=/home/webapp/pids restart" $EB_CONFIG_APP_USER
      echo "worker starting" >> /var/log/directory-hooks-executor.log 
```

# .net - .Net Framework 4.5 在 4.0 中停止工作 WCF Restful 应用程序

> ID：14401205
> 
> 赞同：2
> 
> 时间：2013-01-18T14:39:57.033
> 
> 标签：.net, wcf, rest, .net-4.0, .net-4.5

我们在 .Net 框架 4.0 的 WCF-Rest 服务中有应用程序，安装 .net 框架 4.5 应用程序停止运行后，应用程序事件查看器中记录了异常。如果我们卸载 .Net Framework 4.5，应用程序将按预期工作。任何人都知道.Net 4.5 for WCF Rest in 4.0 有什么问题吗？

[我们在 .Net 4.5 安装后](https://stackoverflow.com/questions/12643113/wcf-conflicting-endpoints-after-net-4-5-installation)尝试 了 WCF - Conflicting endpoints，但无助于解决问题。

## 事件查看器应用程序日志

WebHost 未能处理请求。发件人信息：System.ServiceModel.Activation.HostedHttpRequestAsyncResult/13495405 异常：System.Web.HttpException (0x80004005)：没有通道在“ [http://XYS/ABC/EmployeeService/GetEmployee?ID=](http://XYS/ABC/EmployeeService/GetEmployee?ID=) “11”'处主动监听。这通常是由不正确的地址 URI 引起的。确保将消息发送到的地址与服务正在侦听的地址相匹配。---> System.ServiceModel.EndpointNotFoundException: 没有通道在' [http://XYS/ABC/EmployeeService/GetEmployee?ID=](http://XYS/ABC/EmployeeService/GetEmployee?ID=)“11”'。这通常是由不正确的地址 URI 引起的。确保将消息发送到的地址与服务正在侦听的地址相匹配。在 System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult 结果) 在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest() 在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest() 在 System.Runtime.AsyncResult.End[TAsyncResult]( IAsyncResult 结果）在 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End（IAsyncResult 结果） 进程名称：w3wp 进程 ID：1600

# svn - TortoiseSVN 缩小本地仓库

> ID：14401210
> 
> 赞同：2
> 
> 时间：2013-01-18T14:40:09.613
> 
> 标签：svn, version-control, tortoisesvn, repository

我正在开发一个非常大的存储库，其中存储了很多二进制数据。我只编辑一小部分文件。

有什么办法可以从我的本地存储库中删除所有二进制文件和某些目录并拥有它，这样它就不会在 SVN 更新时重新下载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:23:12.700

如果您使用 TortoiseSVN 1.7，是的，有一种可能性：在对话框内的初始结帐时，有“结帐深度”选项，您可以单击“选择项目...”。它会打开存储库的视图，您可以取消选中所有不需要的文件。

即使在更新时，它们也不会再次下载。

# apache - 如何调用 example.domain.com 而不是 www.domain.com/example

> ID：14401212
> 
> 赞同：0
> 
> 时间：2013-01-18T14:40:12.890
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我见过很多网站这样做，例如在地址栏中：我们可以输入：someuser.twitter.com，它会自动将我们重定向到 twitter.com/someuser

我知道这可以使用 HTACCESS 来完成。有人可以帮我在 htaccess 文件上写什么以便调用 example.domain.com 而不是 domain.com/example 吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:53:08.813

看看这个解释清楚的主题：

```
http://stackoverflow.com/questions/586129/create-subdomains-on-the-fly-with-htaccess-php 
```

# android - 与 Bitmap 使用相关的 Android Fragments 内存泄漏

> ID：14401214
> 
> 赞同：1
> 
> 时间：2013-01-18T14:40:15.440
> 
> 标签：android, bitmap, android-fragments, out-of-memory, android-memory

我正在尝试创建一些相册应用程序。但是在创建新的 Fragment 时，旧的 Fragment 会留下来，并且它包含的 Bitmaps 会迅速填满我的内存，从而导致内存不足错误。

这是我正在尝试做的事情：

假设我有 3 个类别。婚纱照、暑假等。单击每个类别后，我想在其旁边的片段中显示照片。

对于主视图，我使用 MasterDetailFlow 模板中的 FragmentActivity（当您在 Eclipse 中创建新的 Android 项目时）。所以基本上它有一个带有 listView 的片段（这里是我的类别）和 framelayout 来放置我的另一个片段。

因为我想为图片创建 ViewPager，所以我创建了 Fragment

```
android.support.v4.view.ViewPager 
```

在框架布局内（在 Activity onItemSelected :) 中：

```
fragment = new PagerFragment();
fragment.setArguments(arguments);
getSupportFragmentManager().beginTransaction()
     .replace(R.id.item_detail_container, fragment).commit(); 
```

这个片段基本上只是用来设置：

```
onCreateView ....
rootView = inflater.inflate(R.layout.pager, container, false);

    myFragmentStatePagerAdapter = new MyFragmentStatePagerAdapter(
            getActivity().getSupportFragmentManager(), pictures);
    mViewPager = (ViewPager) rootView.findViewById(R.id.pager);
    mViewPager.setAdapter(myFragmentStatePagerAdapter);

    return rootView; 
```

另一方面，适配器在 getItem 方法中创建新的 PictureFragment。

PictureFragment 使用 BitmapFactory 和 LruCache 来获取图片。我将 WeakReference 存储到 PictureFragment 和 onDestroyView() 中的位图我调用：

```
if (bitmapReference !=null){
        bitmapReference.get().recycle();
        bitmapReference = null;
    } 
```

现在来解决问题。在一个 PagerFragment 中看起来一切正常。图片片段被创建和销毁。记忆似乎得到了控制。但是当我单击其他列表元素上的活动时，问题就开始了。我可以在日志中看到正在为 pager View 创建两个新片段，我可以看到在 PagerFragment 上调用了 onDestroyView() 方法，但在 PictureFragment 上没有调用方法，我认为这会导致位图未被回收。因此内存不足错误。那么我做错了什么？如何去除里面的PicturesFragment和位图？

感谢帮助

W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:07:51.440

不确定这是否是同一个问题，但前段时间我遇到了 viewpager 的问题，其中片段生命周期方法从未被调用，而问题出在片段管理器上。

因此，当您在以下位置创建适配器时：

```
myFragmentStatePagerAdapter = new MyFragmentStatePagerAdapter(
        getActivity().getSupportFragmentManager(), pictures); 
```

尝试使用 childFragmentManager 而不是 supportFragmentManager 并查看它是否可以解决您的问题。

# matlab - 等待gui完成

> ID：14401217
> 
> 赞同：0
> 
> 时间：2013-01-18T14:40:22.730
> 
> 标签：matlab, user-interface

正如在这个问题中或多或少地问过的那样：[https ://stackoverflow.com/questions/14397729/working-with-multiple-guis-in-matlab](https://stackoverflow.com/questions/14397729/working-with-multiple-guis-in-matlab)

我想要输出参数并等待 gui 完成。

我现在使用`waitfor`，但输出总是只有一个句柄

```
handle = uiConfigureCalibration('uiMain', handles.figure1);
waitfor(handle);
display(handle); 
```

然而，输出函数`uiConfigureCalibration`传递了几个参数：

```
function varargout = uiConfigureCalibration_OutputFcn(hObject, eventdata, handles) 
varargout{1} = handles.output;
if isfieldRecursive(handles, 'handles.files.calibration')
   varargout{2} = handles.files.calibration;
   varargout{3} = handles.calibration;
end 
```

有没有机会在调用函数中以某种方式获取这些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:04:17.210

你必须做

```
[output,FilesCalibration,Calibration] = uiConfigureCalibration('uiMain', handles.figure1); 
```

获取额外的输出——你只在你的函数调用中要求一个输出，所以你总是得到一个输出。但是，如果您输出单个参数，这将失败。

由于输出的数量是可变的，我认为最好返回包含所有输出的结构：

```
function output = uiConfigureCalibration_OutputFcn(hObject, eventdata, handles) 
output.output = handles.output;
if isfieldRecursive(handles, 'handles.files.calibration')
   output.files.calibration = handles.files.calibration;
   output.calibration = handles.calibration;
end 
```

现在函数本质上返回句柄结构的子集，包含 1 或 3 个字段，具体取决于句柄的结构

# c - c中的声明错误

> ID：14401223
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:40:37.697
> 
> 标签：c, pointers, declaration

我正在编写一个程序来读取文件。而且我一直有运行时错误，这取决于我是否放在`int i`主函数的第三行。

我认为没有理由对我的程序产生影响。但确实如此。那么为什么会这样呢？而且，至少在原则上，我们不应该能够在我们想要的任何地方声明变量吗？

这是我的代码

**得到答案**

故事的道德：在使用它们之前总是初始化你的指针。

```
#include <stdio.h>
#include <stdlib.h>

char read_char(FILE ** fp);    

int main()
    {
        char * str;
        str = (char *) malloc(sizeof(char));

        FILE * f;
        // int i                     <---------Problem here

        f = fopen("txt.txt", "r");

        *str = read_char(&f);
        putchar(*str);

        return 0;
    }

    char read_char(FILE ** fp)
    {
        char * c;
        c = malloc(sizeof(char));

        if ((*fp) == NULL)
        {
             printf("Error accessing file");
             exit(0);
        }

        (*c) = getc((*fp));
        return((*c));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:44:59.583

切勿在未将其设置为 NULL 的情况下创建指针变量。采用：

```
char* str = NULL;
FILE* f = NULL; 
```

你很快就会发现你的错误。

你的问题的答案是：你正在写入未分配的内存，所以任何事情都可能发生。像这样的奇怪的事情经常发生。

作为旁注，在这里使用指针是没有意义的。采用：

```
char someChar;
...

someChar = read_char(... 
```

read_char 也是如此：

```
char  c;
...
c = getc((*fp)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:46:43.343

你已经定义了

```
 char * str; 
```

你已经使用它了

```
*str = read_char(&f); 
```

并且`str`尚未指向内存空间

这`*str`意味着内存空间中第一个字节的内容（指针指向的）将用函数`str`返回的 char 值填充`read_char()`

实际上，您所做的是未定义的行为。所以添加 i 定义会给出一种行为。删除 i 定义给出另一种行为

在你的代码修复之后

```
#include <stdio.h>
#include <stdlib.h>

char read_char(FILE *fp);    

int main()
{
    char * str = malloc(sizeof(char)); 
    FILE * f;
    int i;

    f = fopen("txt.txt", "r");

    *str = read_char(f);
    putchar(*str);

    return 0;
}

char read_char(FILE * fp)
{
    char c;

    if (fp == NULL)
    {
         printf("Error accessing file");
         exit(0);
    }

    c = getc(fp);
    return c;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:01:06.393

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:42:11.533

分号。

```
int i 
```

应该

```
int i; 
```

# iphone - UITableview 的滚动改变 UIButton 的图像，UITableview 滚动问题

> ID：14401231
> 
> 赞同：3
> 
> 时间：2013-01-18T14:41:11.317
> 
> 标签：iphone, ios, objective-c, xcode

我正在做的是，我有一个`UITableview`并且我添加`UIButton`为自定义视图。我为每个按钮提供标签，并在操作方法中收到**标签。**当我按下按钮时，它会更改选定和未选定按钮的图像，但是当我滚动它时，它将进入正常状态。

**这是我在索引方法中的行单元格**

```
static NSString *CellIdentifier = @"Cell4";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [self tableviewCellWithReuseIdentifierFollowing:CellIdentifier];
}
followingButton = [UIButton buttonWithType:UIButtonTypeCustom];
[followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];
[followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);
[cell.contentView addSubview:followingButton];
NSLog(@"row--%d",indexPath.row);
followingButton.tag=indexPath.row;
NSLog(@"followingButton.tag--%d",followingButton.tag);
[self configureCellFollowing:cell forIndexPath:indexPath];
return cell;
}

==================

//Here is the action method

-(void)followingButtonpressed:(id)sender
{
    NSLog(@"sender tag --%d",[sender tag]);
    UIButton *btnPly = (UIButton *)sender;
    if([btnPly isSelected])
    {
        [btnPly setSelected:NO];
        [btnPly setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
    }
    else
    {
        [btnPly setSelected:YES];
        [btnPly setImage:[UIImage imageNamed:@"following_off12.png"] forState:UIControlStateNormal];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:00:41.480

**注意：此代码为每行数据创建单元格（不重用单元格）**

您只需要按照描述进行更改，可能对您有帮助

```
NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

**可能会解决你的问题:)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:55:45.613

您的按钮“重置”的原因是因为 tableView:cellForRowAtIndexPath 被多次调用（每当一个单元格即将可见时）。

每次调用它时，您都会重新初始化按钮并将图像重置为 following12.png（默认状态）。这就是为什么当您滚动按钮时出现重置的原因。

您不能依赖单元格本身来保存状态，因为单元格每次都会被重置。您需要将状态移动到其他地方（例如在数组实例变量中）。然后，当您必须在 tableView:cellForRowAtIndexPath 中配置一个新单元格时，您可以将其初始化为正确的状态（基于数组）。

因此，创建一个名为 myStateArray （或其他）的 NSMutableArray 实例变量来存储您的按钮状态，那么您的 cellForRowAtIndexPath 应该看起来更像：

```
static NSString *CellIdentifier = @"Cell4";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [self tableviewCellWithReuseIdentifierFollowing:CellIdentifier];
}
followingButton = [UIButton buttonWithType:UIButtonTypeCustom];
[followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];

// -- Fetch the state from your array
BOOL buttonPressed = [[self.myStateArray objectAtIndex:indexPath.row] boolValue];

// -- Initialize the button state correctly
[followingButton setSelected:buttonPressed];
if (buttonPressed) {
    [followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
} else {
    [followingButton setImage:[UIImage imageNamed:@"following_off12.png"] forState:UIControlStateNormal];
}

followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);
[cell.contentView addSubview:followingButton];
NSLog(@"row--%d",indexPath.row);
followingButton.tag=indexPath.row;
NSLog(@"followingButton.tag--%d",followingButton.tag);
[self configureCellFollowing:cell forIndexPath:indexPath];
return cell;
} 
```

然后在您的按钮按下确保保存状态：

```
-(void)followingButtonpressed:(id)sender
{
    // -- Save the state
    [self.myStateArray insertObject:[NSNumber numberWithBool:[btnPly isSelected]] atIndex:[sender tag]];

    NSLog(@"sender tag --%d",[sender tag]);
    UIButton *btnPly = (UIButton *)sender;
    if([btnPly isSelected])
    {
        [btnPly setSelected:NO];
        [btnPly setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
    }
    else
    {
        [btnPly setSelected:YES];
        [btnPly setImage:[UIImage imageNamed:@"following_off12.png"] forState:UIControlStateNormal];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:20:06.147

正如我从代码中了解到的那样，每次 UITableView 要求单元格时，您都会创建 UIButton 。在这两种情况下，如果您创建一个新单元格或使用出列单元格。然后，您每次在已创建的按钮上创建并添加一个按钮。将按钮创建移动到单元格创建`if`所以你的`cellForRowAtIndexPath`方法应该看起来像

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell4";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [self tableviewCellWithReuseIdentifierFollowing:CellIdentifier];
        followingButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];
        [followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
        followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);
        [cell.contentView addSubview:followingButton];
    }
    NSLog(@"row--%d",indexPath.row);
    followingButton.tag=indexPath.row;
    NSLog(@"followingButton.tag--%d",followingButton.tag);
    [self configureCellFollowing:cell forIndexPath:indexPath];
    return cell;
} 
```

但这不会是您问题的竞争解决方案。您可能知道 UITableView 使用“可重用”单元格来减少系统内存使用量。它仅使用当前需要显示的单元格数量。因此，在具有 100 个单元格的表格中，它实际上会创建大约 10 个。并且所有这些单元格都不会存储所有按下/未按下按钮的正确状态。为了实现正确的行为，您必须拒绝使用标签并改用一些模型逻辑。最简单的方法 - NSMutableArray，您将在其中存储按钮状态。在 `followingButtonpressed:`方法中，您将正确的对象设置为 YES/NO，然后`cellForRowAtIndexPath`您将读取此值。检查下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell4";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [self tableviewCellWithReuseIdentifierFollowing:CellIdentifier];
        followingButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];
        [followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
        followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);
        [cell.contentView addSubview:followingButton];

        BOOL isSelected = [[statesArray objectAtIndex:btnPly.tag] boolValue];
        [self setState:isSelected forButton:followingButton];
    }
    NSLog(@"row--%d",indexPath.row);
    followingButton.tag=indexPath.row;
    NSLog(@"followingButton.tag--%d",followingButton.tag);
    [self configureCellFollowing:cell forIndexPath:indexPath];
    return cell;
}

-(void)followingButtonpressed:(id)sender
{
    NSLog(@"sender tag --%d",[sender tag]);
    UIButton *btnPly = (UIButton *)sender;

    BOOL isSelected = [[statesArray objectAtIndex:btnPly.tag] boolValue];
    [statesArray replaceObjectAtIndex:btnPly.tag withObject:[NSNumber numberWithBool:!isSelected]];

    if(isSelected)
    {
        [self setState:NO forButton:btnPly];
    }
    else
    {
        [self setState:YES forButton:btnPly];
    }
}

- (void) setState:(BOOL)state forButton:(UIButton *)button
{
    if(state)
    {
        [button setSelected:NO];
        [button setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];
    }
    else
    {
        [button setSelected:YES];
        [button setImage:[UIImage imageNamed:@"following_off12.png"] forState:UIControlStateNormal];
    }
} 
```

`statesArray`在哪里

```
NSMutableArray *statesArray = [NSMutableArray new]; 
```

你必须在你班级的某个地方创建和初始化它。中的对象`statesArray`计数必须与单元格 int tableView 的计数相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:48:31.197

这是因为每次滚动时都会调用此代码

```
[followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal]; 
```

所以现在检查

```
static NSString *CellIdentifier = @"Cell4";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [self tableviewCellWithReuseIdentifierFollowing:CellIdentifier];

followingButton = [UIButton buttonWithType:UIButtonTypeCustom];
[followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];

[followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];

followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);
[cell.contentView addSubview:followingButton];

[self configureCellFollowing:cell forIndexPath:indexPath];
}
return cell;
} 
```

# python - 如何从字符串中删除垃圾数据

> ID：14401232
> 
> 赞同：0
> 
> 时间：2013-01-18T14:41:11.960
> 
> 标签：python, string, parsing, eeprom

我处于必须使用 Python 读取和写入嵌入式设备上的 EEPROM 的情况。第一页（256 字节）用于非易失性数据存储。我的问题是变量的长度可能不同，我需要读取一个固定的数量。

例如，一个字符串存储在地址 30，长度可以是 6 到 10 个字节。我需要阅读最大可能的长度，因为我不知道它在哪里结束。这样做是在字符串中给了我多余的垃圾。

```
data_str = ee_read(bytecount)
dbgmsg("Reading from EEPROM: addr = " + str(addr_low) + " value = " + str(data_str))

> Reading from EEPROM: addr = 30 value = h11c13���� 
```

我对 Python 相当陌生。有没有办法在读入字符串后自动切断字符串中的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:45:37.270

你的意思是这样的：

```
>>> s = 'Reading from EEPROM: addr = 30 value = h11c13����'
>>> s
'Reading from EEPROM: addr = 30 value = h11c13\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd\xef\xbf\xbd'
>>> filter(lambda x: ord(x)<128,s)
'Reading from EEPROM: addr = 30 value = h11c13' 
```

在 python3 上，您需要对`join`字符串：

```
''.join(filter(lambda x: ord(x)<128,s) 
```

适用于 python2 和 python3 的版本是：

```
''.join(x for x in s if ord(x) < 128) 
```

* * *

最后，可以想象多余的垃圾可能包含打印字符。在这种情况下，您可能只想获取字符，直到您阅读非打印字符，`itertools.takewhile`这可能会有所帮助......

```
import string #doesn't exist on python3.x, use the builtin `str` type instead.
from itertools import takewhile

printable = set(string.printable)  
''.join(takewhile(lambda x: x in printable, s)) 
```

# css - 相同的字体在 Chrome 与 Firefox、IE 和 Safari 中看起来不同

> ID：14401235
> 
> 赞同：3
> 
> 时间：2013-01-18T14:41:20.240
> 
> 标签：css, google-chrome, firefox, safari, webfonts

该问题与在不同浏览器中呈现字体有关。我很惊讶地看到这个问题只在 Chrome 中重现。它在 Firefox、IE8、Safari 甚至 IE6 中运行良好。

样本来了。

![在此处输入图像描述](../Images/0ab39ffd785b224e7d3102cbdea9e6cc.png)

这里是代码本身：

```
<div style="position:absolute;bottom:2px;padding-top: 1px;width:100%;">
   <span style="float:left;">
      <div id="saveCustomizationButton" class="smallBlueButton">
         <span>Speichern</span>
      </div>
   </span>
   <span style="float:right;padding-right:1px;">
      <div id="downloadOrPrintButton" class="smallGreenButton smallGreenButtonSmallLetterSpace">
         <span>Downloaden oder drucken</span>
      </div>
   </span>
</div>

div.smallGreenButton span, div.smallGreenButton a {
    display: block;
    line-height: 14px;
    padding: 1px 7px 2px 13px;
}
div.smallGreenButton {
    font-family: arial,sans-serif;
    font-size: 12px;
    font-weight: 600;
}
div.smallBlueButton {
    font-family: arial,sans-serif;
    font-size: 12px;
    font-weight: 600;
} 
```

这就对了。我已经阅读了有关 css 重置的信息，并且已经尝试过了。任何奇迹——一切都没有改变。我考虑使用的另一种方法是固定容器标签的宽度。但是由于需要维护多个本地化，我不能使用这种方法。

我希望 smb 会提出一个解决方案。或者我需要实现一些特定于浏览器的行为。

静候你的评价。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:50:55.670

文本渲染**确实因浏览器而异。**有时无论我们如何尝试更改渲染，我们都不会得到它。如果你愿意，你可以阅读[这篇](http://css-tricks.com/font-rendering-differences-firefox-vs-ie-vs-safari/)文章。它没有为这个问题提供解决方案（我认为没有解决方案），但它突出了差异。

# iframe - 在 javascript 中创建 iframe 时让 iframe 在 youtube 上使用 https？

> ID：14401238
> 
> 赞同：0
> 
> 时间：2013-01-18T14:41:32.613
> 
> 标签：iframe, youtube-api

Youtube 允许使用简单的 https 前缀通过 ssl 下载视频。如果我使用 youtube api 创建播放器，代码如下所示：

```
player = new YT.Player('player', {
                height: '350',
                width: '400',
                videoId: 'ut-WpR',
                playerVars: { 'controls': 1, 'fs': 1, 'autoplay': 1, 'autohide': 0, 'modestbranding': 1, 'rel': 0, 'showinfo': 0},
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                } 
```

我看不到放置 https 的地方。有吗？此外，在相关主题上，Internet Explorer 与 iframe 不可靠。有时您必须“刷新”才能看到它们。这个论坛上的一个人建议我每次都在 iframe 的 URL 上附加一个随机字符串，这样可以防止它被缓存。（假设这是问题所在）。但是给定上面的代码，你如何附加任何东西——我看不到附加一个假的随机字符串。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:34:06.130

YouTube 目前实际上并未将 HTTPS 用于视频流。这篇旧博文中的信息仍然适用：[http ://apiblog.youtube.com/2011/02/https-support-for-youtube-embeds.html](http://apiblog.youtube.com/2011/02/https-support-for-youtube-embeds.html)

话虽如此，您可以通过 HTTPS 加载播放器 HTML 和 JS（而不是视频流）。如果主机页面使用 HTTPS，YT.Player 构造函数应该自动创建一个带有 HTTPS src 的 iframe——如果它没有这样做，请告诉我们。

# android - 安卓设备支持的 LED

> ID：14401241
> 
> 赞同：4
> 
> 时间：2013-01-18T14:41:38.470
> 
> 标签：android, led

有没有办法知道 android 设备支持的 LED 数量。例如，某些设备支持通知和充电 LED，而某些设备仅支持充电 LED。有没有办法让应用程序知道设备中存在的 LED 数量（类似于告诉 Android 设备中存在多少摄像头的 API）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:55:12.967

> 有没有办法知道 android 设备支持的 LED 数量

不，对不起。

> 有没有办法让应用程序知道设备中存在的 LED 数量

不，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:57:43.150

远未达到 100% 可靠，但您通常可以通过在 /sys/class/leds 中查找节点来获得一些线索。不过，您将无权通过该界面设置它们。解释你在那里发现的东西可能需要一些经验。虽然这通常是它们的设置方式，但这并不是制造商可以选择实施它们的唯一方式。

建立设备数据库可能是另一种选择。

# vb.net - 我是 Visual Basic 的新手，并试图了解如何在一个字节中设置各个位

> ID：14401242
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:41:39.967
> 
> 标签：vb.net, binary

嗨，我是 Visual Basic 的新手，我有一个项目需要能够操作值中的各个位。

我需要能够在 1 和 0 之间切换这些位，并将多次出现的位组合到我的代码中的一个变量中。

每个位将代表一个 TRUE / FALSE 值，因此我不是在寻找如何在一个变量中执行单个 TRUE / FALSE 值，而是在一个变量中寻找多个 TRUE / FALSE 值。

有人可以向我解释一下我如何做到这一点。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:52:07.413

它必须是一位吗？

为什么不为此使用实际内置的 VB 数据类型 Boolean。

[http://msdn.microsoft.com/en-us/library/wts33hb3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/wts33hb3(v=vs.80).aspx)

它存在的唯一原因是您可以定义具有 2 种状态（真或假）的变量。

```
Dim myVar As Boolean
myVar = True
myVar = Flase
if myVar = False Then
  myVar = True
End If 
```

## 更新 (1)

在阅读了 OP 的各种答案和评论后，我现在了解了 OP 试图实现的目标。

正如其他人所说，在这些语言中可以使用的最小单位是 8 位字节。根本没有比这更小的数据类型的顺序。

但是，通过一些创造性思维和少量二进制操作，您可以将该字节的内容称为单个位。

但是，首先您需要了解二进制数系统：

二进制中的所有数字都是 2 的幂，从右到左。

每列都是其前身的两倍，所以：

1 变成 2，2 变成 4，4 变成 8，依此类推

纯粹以二进制数查看此列，您的列将被标记为：

**128 64 32 16 8 4 2 1**（记住从右到左）

这给了我们以下信息：

```
The bit at position 1 = 1;
The bit at position 2 = 2;
The bit at position 3 = 4;
The bit at position 4 = 8; 
```

等等。

在您拥有的最小数据类型（字节）上使用此方法，您可以将 8 位打包成一个值。也就是说，您可以使用一个变量来保存 8 个单独的值 1 或 0

因此，虽然您不能小于一个字节，但您仍然可以通过将 8 个值打包到 1 个变量中来减少内存消耗。

你如何读取和写入这些值？

还记得列位置吗？好吧，您可以使用称为位移位和位掩码的东西。

位移是使用

```
<< 
```

和

```
>> 
```

运营商

移位操作将要移位的列数作为参数。

例如：

```
Dim byte myByte
myByte = 1 << 4 
```

在这种情况下，变量“myByte”将等于 16，但您实际上会将位位置 5 设置为 1，如果我们说明这一点，它会更有意义：

```
mybyte = 0  = 00000000 = 0
mybyte = 1  = 00000001 = 1
mybyte = 2  = 00000010 = (1 << 1)
mybyte = 4  = 00000100 = (1 << 2)
mybyte = 8  = 00001000 = (1 << 3)
mybyte = 16 = 00010000 = (1 << 4) 
```

如果您注意到 0 到 16 等于我上面提到的从右到左的列值。

鉴于我刚才解释的内容，如果您想将位 5、4 和 1 设置为等于 1，其余设置为 0，您可以简单地使用：

```
mybyte = 25(16 + 8 + 1) = 00011001 = (1 << 4) + (1 << 3) + 1 
```

为了让你的位回来，变成一个单例，你只需换个方向

```
retrieved bit = mybyte >> 4 = 00000001 
```

然而不幸的是，移位方法存在一个小缺陷。

通过来回移动，您很可能会从您可能已经设置的任何位中丢失信息，为了防止这种情况发生，最好将您的位移操作与位掩码和布尔操作（例如“与”和“或者'

要了解这些，您首先需要了解以下简单的逻辑原理：

***和***

如果 A 和 B 输入均为 1，则输出为 1

以图形方式说明这一点

```
A  B | Output
-------------
0  0 | 0
0  1 | 0
1  0 | 0
1  1 | 1 
```

如您所见，如果我们的输入数字中的位位置为 1，并且我们的输入数字 B 中的相同位置为 1，那么我们将在输出数字中保留该位置，否则我们将丢弃该位并将其设置为 0 ，举个例子：

```
00011001 = Bits 5,4 and 1 are set
00010000 = Our mask ONLY has bit 5 set 
```

如果我们执行

```
00011001 AND 0010000 
```

我们会得到一个结果

```
00010000 
```

然后我们可以向下移动 5

```
00010000 >> 5 = 00000001 = 1 
```

因此，通过使用 AND，我们现在可以检查字节中的单个位是否为 1：

```
if ((mybyte AND 16) >> 1) = 1 then
  'Bit one is set
else
  'Bit one is NOT set
end if 
```

通过使用不同的掩码，如前所示，从右到左的列中使用不同的 2 值，我们可以轻松地从我们的字节中提取不同的奇异值并将它们视为简单的位值。

设置一个字节同样简单，除非您使用“或”以相反的方式执行操作

***或者***

如果 A 或 B 输入为 1，则输出为 1

以图形方式说明这一点

```
A  B | Output
-------------
0  0 | 0
0  1 | 1
1  0 | 1
1  1 | 1 
```

例如：

```
00011001 OR 00000100 = 00011101 
```

如您所见，位置 4 的位已设置。

但是，要回答开始这一切的基本问题，您不能在 VB 中使用任何分辨率小于 1 字节的数据类型，我怀疑您是否需要绝对的位精度，我猜您必须编写压缩算法或某种加密系统。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:35:42.167

01010100 01110010 01110101 01100101，是单词“TRUE”的字符串值

您想要的是将信息存储在布尔值中

```
Dim v As Boolean

v = True
v = False 
```

或者

```
If number = 84 Then ' 84 = 01010100 = T
    v = True
End If 
```

**其他信息**

从技术上讲，你不能存储任何东西，最小值是一个 8 位的字符。您需要学习如何进行按位运算。或者使用[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:08:03.543

VB.NET（也不是我知道的任何其他 .NET 语言）具有“位”数据类型。您可以使用的最小的是`Byte`. （不是 a `Char`，它们的大小是两个字节）。因此，虽然您可以读取值 84 的字节并将其转换为值为 1 的字节表示真，并将值 101 的字节转换为值 0 的字节表示假，但您并没有节省任何内存。

现在，如果您有少量且固定数量的这些标志，您可以将它们中的几个存储在其中一种整数数据类型中（在 .NET 中，最大的整数数据类型是 64 位）。或者，如果您有大量这些标志，您可以使用`BitArray`该类（它使用相同的技术，但使用数组支持它，因此存储容量更大）。

# sql - SQL If 条件

> ID：14401246
> 
> 赞同：0
> 
> 时间：2013-01-18T14:41:49.803
> 
> 标签：sql, sql-server, if-statement

我有一个`Train`用这个示例数据调用的表：

```
train_id strt_stn_id  end_stn_id    direction
---------------------------------------------
1         1             10            D         
2         1             21            D         
3        10             1             U         
4         1             5             D         
5         1            15             D 
```

以及`Station`包含此数据的表格：

```
stn_id    stn_name
---------------------
1         Churchgate
2         Marine Lines
3         Charni Road
4         Grant Road
5         Mumbai Central
6         Mahalaxmi
7         Lower Parel
8         Elphinstone Road
9         Dadar
10        Matunga Road
11        Mahim
12        Bandra
13        Khar Road
14        Santacruz
15        Vile Parle 
```

我想要根据条件的站名。如果`strt_stn_id > end_stn_id`，我要站名，`end_stn_id`否则站名`strt_stn_id`。

那么如何在 SQL 查询中使用 if 条件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:44:30.707

尝试这个：

```
SELECT T.*, S.stn_name
FROM Train T
INNER JOIN Station S
    ON  CASE WHEN T.strt_stn_id > T.end_stn_id 
        THEN T.end_stn_id ELSE T.strt_stn_id END = S.stn_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:44:19.063

利用`case`

[http://www.tizag.com/sqlTutorial/sqlcase.php](http://www.tizag.com/sqlTutorial/sqlcase.php)

举例说明如何使用

```
    '站' = 案例
    当 (strt_stn_id > end_stn_id) 那么 (end_stn_id)
    否则（strt_stn_id）
        结尾

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:40:19.543

虽然您绝对可以将逻辑放在`on`子句中，但我更喜欢做两个单独的连接并将逻辑放在`select`子句中：

```
SELECT T.*,
       (case when t.strt_stn_id > t.end_stn_id then starts.stn_name
             else ends.stn_name
        end) as TheName
FROM Train T INNER JOIN
     Station Starts
     ON T.strt_stn_id = Starts.stn_id inner join
     Station ends
     on T.end_stn_id = ends.stn_id 
```

通常，子句`case`中的语句或函数会`on`阻止引擎使用索引。如果表有合理的索引（例如在它们的主键上），这个版本会更好。顺便说一句，我也认为条款中的逻辑`select`更容易理解，但我承认其他人可能不同意。

# lua - Lua Socket：如何发送异步 http.request？

> ID：14401253
> 
> 赞同：3
> 
> 时间：2013-01-18T14:42:08.097
> 
> 标签：lua, luasocket

> **可能重复：**
> [Lua 套接字异步调用](https://stackoverflow.com/questions/5795419/lua-socket-asynchronous-calls)

我想我的问题很清楚。又怎样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:42:50.943

在 Lua 编程（[非抢占式多线程](http://www.lua.org/pil/9.4.html)）和 SO [here](https://stackoverflow.com/questions/5795419/lua-socket-asynchronous-calls)和[here](https://stackoverflow.com/questions/13333108/how-do-i-deal-with-lua-libraries-that-dont-coroutine-yield/13352683#13352683)中讨论。

# vb.net - 避免在每一列上检查 DataRow.IsDBNull？

> ID：14401264
> 
> 赞同：4
> 
> 时间：2013-01-18T14:43:00.523
> 
> 标签：vb.net, dataset, datarow, dbnull

我的代码比我可以自动设置或简单地翻转它而没有错误的时间长 2`IsDBNull`倍`""`。

这是我的代码：

```
Dim conn As New SqlConnection
conn.ConnectionString = Module1.DBConn2
Dim sqlCommand = New SqlCommand("SELECT * FROM table", conn)
conn.Open()
Dim sqlDataset As DataSet = New DataSet()
Dim sqlDataAdapter As SqlDataAdapter = New SqlDataAdapter(sqlCommand)
sqlDataAdapter.Fill(sqlDataset)
conn.Close()

For Each rs As DataRow In sqlDataset.Tables(0).Rows
    If Not IsDBNull(rs("column")) Then
        Response.Write(rs("column"))
    Else
        Response.Write("")
    End If

    Response.Write("some stuff to write")

    If Not IsDBNull(rs("column2")) Then
        Response.Write(rs("column2"))
    Else
        Response.Write("")
    End If
Next 
```

在那种情况下，我只想输入`Response.Write(rs("column"))`而不是`If`语句，`column` `IsDBNull`然后输出一个空字符串。

我怎样才能做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:45:09.470

您可以简单地使用[`String.Join`](http://msdn.microsoft.com/en-us/library/dd988350.aspx)并通过[`row.ItemArray`](http://msdn.microsoft.com/en-us/library/system.data.datarow.itemarray.aspx)：

```
For Each row As DataRow In sqlDataset.Tables(0).Rows
    Response.Write(String.Join("", row.ItemArray))
Next 
```

这有效，因为[`DBNull.ToString`](http://msdn.microsoft.com/en-us/library/zkbzs85t.aspx)返回一个空字符串。

如果你想处理每一列，你可以使用[`DataRowExtensions.Field`](http://msdn.microsoft.com/en-us/library/system.data.datarowextensions.field.aspx)支持 nullables 的强类型方法并返回`null`/`Nothing`用于字符串。然后你可以使用`null-coalescing operator`（`??`在 C# 中，`If`在 VB 中）。

```
Dim rowInfo = String.Format("{0}{1}{2}",
                            If(row.Field(Of String)("Column1"), ""),
                            If(row.Field(Of String)("Column2"), ""),
                            If(row.Field(Of String)("Column3"), "")) 
```

但是，请注意，无论如何`String.Format`都会将`null`/转换`Nothing`为`""`隐式，因此 the`If`是多余的，*仅供参考*。

[MSDN](http://msdn.microsoft.com/en-us/library/b1csw23d%28v=vs.80%29.aspx)：

> 如果 index 指定的对象是空引用（在 Visual Basic 中为 Nothing），则格式项将替换为空字符串 ("")。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T14:49:15.200

这是一个单行：

```
Response.Write(rs.IsNull("column") ? "" : rs("column")); 
```

或使其成为扩展方法：

```
public string GetValueOrBlankString(this DataRow rs, string column)
{
    return rs.IsNull(column) ? "" : rs(column).ToString();
} 
```

然后将其称为：

```
Response.Write(rs.GetValueOrBlankString("column")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:29:55.650

数据集扩展为您提供了一种干净的方式，而且它也是强类型的。该类型必须与数据库中的列类型匹配。如果数据库列可以为空，则使用如下可为空的类型。对于返回的可空类型，空值变为 Nothing。

```
For Each rs As DataRow In sqlDataset.Tables(0).Rows

    'If string, you can use this. Null becomes nothing for the string.
    Response.Write(rs.field(of String)("column"))

    'if it's another type
    Response.Write(rs.field(of Integer?)("column"))

Next 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T17:50:01.230

Ceres 的答案可能是最好的，因为它避免了任何类型的空测试，但值得注意的是，“IIF”功能也可以很好地工作。它仍然会为 null 进行测试，但它比 Joe 最初的做法要紧凑得多。这样的事情应该可以解决问题：

```
For Each rs As DataRow In sqlDataset.Tables(0).Rows

    Response.Write( IIF( IsDBNull(rs("column")), "", rs("column") ) )

Next 
```

这样做的好处是，如果该值实际上为空，您可以将“”替换为您想要输出的任何内容（这是一个不错的额外奖励。）

对于那些不知道它是什么的人，这里有一些关于“IIF”功能的信息：

[http://msdn.microsoft.com/en-ca/library/27ydhh0d(v=vs.71).aspx](http://msdn.microsoft.com/en-ca/library/27ydhh0d(v=vs.71).aspx)

# java - 支持包“com.ibm.misc”及其类

> ID：14401265
> 
> 赞同：0
> 
> 时间：2013-01-18T14:43:08.550
> 
> 标签：java, xpages, lotus-notes

我想在我使用`sun.misc.BASE64Decoder`类的 XPage 中解码 Base64 字符串。但根据 Java[开发人员的说法，不应编写调用“sun”包的程序](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)。当我偶然发现`com.ibm.misc.BASE64Decoder`. 它对我有用，结果与`sun.misc.BASE64Decoder`. 所以我想知道开发人员使用这个包及其类是否可以？还是像“sun”包一样要避免？

我也知道我可以将[Apache Commons](http://commons.apache.org/codec/)用于 Base64，但我想尽量减少对外部 JAR 的依赖。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T14:56:48.850

你会遇到与with`com.ibm.misc.BASE64Decoder`完全相同的问题`sun.misc.BASE64Decoder`：它是一个内部类，只存在于特定的 JVM 实现中，在这种情况下是 IBM 的 JVM。

注意`com.ibm.misc.BASE64Decoder`Oracle 的JVM 中没有，所以如果你使用这个类，你的程序就不能在Oracle 的JVM 上运行；它将失败并带有`NoClassDefFoundError`.

您可以使用 mre 在他的评论中引用的方法，该方法位于类中`javax.xml.bind.DatatypeConverter`- JAXB API 的一部分，它是标准 Java API 的一部分（自 Java SE 6 起）。

# java - 从按钮调用 JSP 中的 bean

> ID：14401267
> 
> 赞同：2
> 
> 时间：2013-01-18T14:43:13.827
> 
> 标签：java, jsp, jakarta-ee

单击按钮时如何从jsp调用方法？

我写了这段代码，但不工作..

```
<%@page import="my.package.class.MyClass" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

</head>
<body>
<input type="submit" name="myButton" value="button" onclick="callMethod()"/>
</body>
</html>

<%! 
void callMethod(){ 
new MyClass().print();} %> 
```

有没有更简单的方法？或者这是正确的做法？

ps：我不想用javascript

编辑：我的班级只有一个方法“print”，在 system.out.println 中打印类似“test”的东西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T16:21:48.600

您需要一个[servlet](https://stackoverflow.com/tags/servlets/info)（<--单击链接，它不包括仅用于装饰）。

至此，假设您的目标是 Servlet 3.0 容器（Tomcat 7、Glassfish 3 等），那么只需创建此类：

```
@WebServlet("/hello")
public class HelloServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        new MyClass().print();
    }

} 
```

`<body>`并按如下方式修复您的 JSP （前提是 JSP 文件放置在 Web 内容的根目录中，而不是放在子文件夹中）：

```
<form action="hello" method="post">
    <input type="submit" name="myButton" value="button" />
</form> 
```

就是这样。

servlet 通过`@WebServlet`注册以侦听`/hello`相对于上下文根的 URL。指示 HTML 表单准确地提交到相对于 JSP 页面本身的 URL 的那个 URL。这`method="post"`将调用 servlet 的`doPost()`方法，您可以在其中自由地写下所需的 Java 代码。

如果您想要根据按下的按钮进行更细粒度的控制，请为按钮指定一个唯一的名称。

```
<form action="hello" method="post">
    <input type="submit" name="myButton1" value="button1" />
    <input type="submit" name="myButton2" value="button2" />
    <input type="submit" name="myButton3" value="button3" />
</form> 
```

`doPost()`那么您可以在 servlet 的方法中检查按下的按钮，如下所示：

```
if (request.getParameter("myButton1") != null) {
    // button1 is pressed.
}
else if (request.getParameter("myButton2") != null) {
    // button2 is pressed.
}
else if (request.getParameter("myButton3") != null) {
    // button3 is pressed.
} 
```

一个完全不同的选择是使用现有的 MVC 框架，该框架高度抽象所有这些样板，例如[JSF](https://stackoverflow.com/tags/jsf/info)、[Spring MVC](https://stackoverflow.com/tags/spring-mvc/info)、[Struts2](https://stackoverflow.com/tags/struts2/info)等。

使用 JSF，它看起来像这样（您只需用其后续的 Facelets 替换旧版 JSP；Facelets 的外观在有点理智的 JSF 教程中进行了解释，再次单击上一段中的“JSF”链接以获取详细信息）：

```
<h:form>
    <h:commandButton value="button1" action="#{bean.button1}" />
    <h:commandButton value="button2" action="#{bean.button2}" />
    <h:commandButton value="button3" action="#{bean.button3}" />
</h:form> 
```

只有这个类没有丑陋的 if/else：

```
@ManagedBean
@RequestScoped
public class Bean {

    public void button1() {
        System.out.println("button1 invoked");
    }

    public void button2() {
        System.out.println("button2 invoked");
    }

    public void button3() {
        System.out.println("button3 invoked");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:18:55.940

为什么不使用 servlet 和 MVC 模式，您无需在 JSP 中编写 java 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:03:29.457

您会混淆 JSP 中涉及的代码位和浏览器显示的结果 HTML 是在哪里运行的。

在处理 HTTP 请求并从 JSP 生成 HTML 时，JSP 内部可访问的 bean 位于 servlet 容器中（在服务器上），而触发 onclick 事件的按钮位于客户端浏览器内部 -因此按钮不能直接调用 bean。

为了在单击按钮时调用服务器端逻辑，您需要对服务器进行 AJAX 回调（除非您要刷新整个页面，这有点废话）。

# c# - 在 C# 中读取大端数据的有效方法

> ID：14401270
> 
> 赞同：11
> 
> 时间：2013-01-18T14:43:22.620
> 
> 标签：c#, endianness, binaryreader

我使用以下代码来读取 BigEndian 信息，`BinaryReader`但我不确定这是否是有效的方法。有没有更好的解决方案？

这是我的代码：

```
// some code to initialize the stream value
// set the length value to the Int32 size
BinaryReader reader =new BinaryReader(stream);
byte[] bytes = reader.ReadBytes(length);
Array.Reverse(bytes);
int result = System.BitConverter.ToInt32(temp, 0); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T14:46:25.123

`BitConverter.ToInt32`首先不是很快。我会简单地使用

```
public static int ToInt32BigEndian(byte[] buf, int i)
{
  return (buf[i]<<24) | (buf[i+1]<<16) | (buf[i+2]<<8) | buf[i+3];
} 
```

您也可以考虑一次读取超过 4 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-05T16:14:31.347

截至 2019 年（实际上，从 .net core 2.1 开始），现在有

```
byte[] buffer = ...;

BinaryPrimitives.ReadInt32BigEndian(buffer.AsSpan()); 
```

[文档](https://docs.microsoft.com/en-us/dotnet/api/system.buffers.binary.binaryprimitives.readint32bigendian)

[执行](https://github.com/dotnet/runtime/blob/65dc73a6018d4e694e3ddb5d403ef6de1e1138eb/src/libraries/System.Private.CoreLib/src/System/Buffers/Binary/ReaderBigEndian.cs#L30)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:45:35.130

您可以使用[IPAddress.NetworkToHostOrder](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.networktohostorder.aspx)，但我不知道它是否真的更有效。您必须对其进行概要分析。

# iphone - 如何将现有应用程序日志复制到 TestFlight 并使用宏

> ID：14401277
> 
> 赞同：2
> 
> 时间：2013-01-18T14:43:41.670
> 
> 标签：iphone, ios, objective-c, nslog, testflight

我目前正在集成试飞SDK。目前我有一个名为 DebugLog 的日志记录宏：

```
#ifdef DEBUG
    #define DebugLog(s,...) NSLog(@"Thread:%@  [%@ %@] %@", [[NSThread currentThread] name], NSStringFromClass([self class]), NSStringFromSelector(_cmd), [NSString stringWithFormat:s,##__VA_ARGS__])
#else
    #define DebugLog(s,...)
#endif 
```

我现在想将 Testflight 的 TFLog 集成到我们的项目中：

```
#define NSLog(__FORMAT__, ...) TFLog((@"%s [Line %d] " __FORMAT__), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__) 
```

我的问题是，有没有办法将日志从 DebugLog 重定向到 TFLog，即 DebugLog 触发并记录到控制台，它也记录到 TFLog？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:56:05.440

用这个

```
//Here I have added NSLog followed by TFLog
#define DebugLog(s,...) NSLog(@"Thread:%@  [%@ %@] %@", [[NSThread currentThread] name], NSStringFromClass([self class]), NSStringFromSelector(_cmd), [NSString stringWithFormat:s,##__VA_ARGS__]);TFLog(s,##__VA_ARGS__)
//You can use this within  #ifdef #endif construct 
```

# command-line - 从命令行在模拟器中安装 .app 文件

> ID：14401278
> 
> 赞同：0
> 
> 时间：2013-01-18T14:43:43.540
> 
> 标签：command-line, continuous-integration, ios-simulator

如何从命令行在模拟器中安装 .app 文件。还是我需要从 .ipa 文件安装它，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:25:40.797

要在模拟器中运行应用程序，您需要一个第三方库，如waxsim [https://github.com/square/waxsim](https://github.com/square/waxsim)

您可以设置他们的 KIF 库以进行验收测试

然后你可以做一个命令行构建并像这样运行它......

蜡模 -f "ipad" "${MY_PATH}/MyApp.app" > $OUT_FILE 2>&1

另一种选择是使用 Frank 库[http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/](http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/)这些非常容易安装并且有内置的启动方式模拟器并运行测试！

# reporting-services - 更改堆叠列中系列项目的顺序 (Report Builder 3.0)

> ID：14401279
> 
> 赞同：3
> 
> 时间：2013-01-18T14:43:45.357
> 
> 标签：reporting-services, reportbuilder3.0

我在 Report Builder 3.0 中有一个图表，它使用堆积的列来显示数据。系列组中的每个项目在堆叠列上都有自己的块。因为我在系列组中有大量元素，所以我想更改这些块的显示顺序，以便用户更容易分辨哪些部分更重要。谁能帮我制作一个堆叠列更改其元素“堆叠”的顺序？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-07T04:42:29.020

单击图表的列。右侧将出现一个小部分，其中包含“值”、“类别组”和“系列组”部分。您可以右键单击类别组或系列组，转到排序选项卡，然后根据需要对数据进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:51:13.703

尝试为您的“系列组”设置自定义表达式？

请参阅[对数据区域中的数据进行排序（报表生成器和 SSRS）](http://technet.microsoft.com/en-us/library/dd255193.aspx)。

# python - 从列表中的元组压缩字符串子集

> ID：14401291
> 
> 赞同：1
> 
> 时间：2013-01-18T14:44:35.873
> 
> 标签：python, string, zip

有这样的结构

```
hapts = [('1|2', '1|2'), ('3|4', '3|4')] 
```

我需要`zip`它（有点......）来获得以下信息：

```
end = ['1|1', '2|2', '3|3', '4|4'] 
```

我开始使用以下代码：

```
zipped=[] 
for i in hapts:    
    tete = zip(i[0][0], i[1][0]) 
    zipped.extend(tete)
    some = zip(i[0][2], i[1][2])
    zipped.extend(some) 
```

...并像这样压缩它：

```
zipped = [('1', '1'), ('2', '2'), ('3', '3'), ('4', '4')] 
```

关于如何继续的任何建议？此外，我确信应该有一种更优雅的方式来做到这一点，但很难将问题的准确定义传递给谷歌；）谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:52:42.060

你已经非常接近解决这个问题了，我认为这里最好的解决方案是一个简单[`str.join()`](http://docs.python.org/2/library/stdtypes.html#str.join)的[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
["|".join(values) for values in zipped] 
```

这还有一个好处是可以很好地处理（可能）更多的值，而无需修改。

如果您想要元组（这不是您请求的输出显示的内容，因为括号不构成元组，逗号可以），那么添加它是微不足道的：

```
[("|".join(values), ) for values in zipped] 
```

另请注意，`zipped`也可以更有效地产生：

```
>>> zipped = itertools.chain.from_iterable(zip(*[part.split("|") for part in group]) for group in hapts)
>>> ["|".join(values) for values in zipped]
['1|1', '2|2', '3|3', '4|4'] 
```

并展示我之前关于优雅地处理更多值的意思：

```
>>> hapts = [('1|2|3', '1|2|3', '1|2|3'), ('3|4|5', '3|4|5', '3|4|5')]
>>> zipped = itertools.chain.from_iterable(zip(*[part.split("|") for part in group]) for group in hapts)
>>> ["|".join(values) for values in zipped]
['1|1|1', '2|2|2', '3|3|3', '3|3|3', '4|4|4', '5|5|5'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:55:36.587

在这种情况下的问题是

*   展开列表
*   重新格式化它
*   折起来

这是您解决问题的方法

```
>>> reformat = lambda t: map('|'.join,  izip(*(e.split("|") for e in  t)))
>>> list(chain(*(reformat(t) for t in hapts)))
['1|1', '2|2', '3|3', '4|4'] 
```

在这种情况下，您不需要工作代码

相反，如果您需要处理您的输出，只需重新扫描它并使用“|”加入它

```
>>> ['{}|{}'.format(*t) for t in zipped]
['1|1', '2|2', '3|3', '4|4'] 
```

**笔记**

括号在您的输出中是多余的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:47:30.550

```
end = []
for groups in hapts:
    end.extend('|'.join(regrouped) for regrouped in zip([group.split('|') for group in groups])) 
```

这也应该继续适用于 n 长度的 n 长度管道分隔字符组和 n 长度组组，尽管它会将重新分组的值截断为每组字符组中最短的字符组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:50:14.030

您的代码基本上可以工作，但这是一种更优雅的方法。

首先定义一个转置函数，它接受一个条目`hapts`并翻转它：

```
>>> transpose = lambda tup: zip(*(y.split("|") for y in tup)) 
```

然后将该函数映射到`hapts`：

```
>>> map(transpose, hapts)
... [[('1', '1'), ('2', '2')], [('3', '3'), ('4', '4')]] 
```

然后如果你想把它展平成一个列表

```
>>> y = list(chain.from_iterable(map(transpose, hapts)))
... [('1', '1'), ('2', '2'), ('3', '3'), ('4', '4')] 
```

最后，将它重新加入到字符串中：

```
>>> map("|".join, y)
... ['1|1', '2|2', '3|3', '4|4'] 
```

# java - 多平台使用选择哪种数字签名算法？

> ID：14401294
> 
> 赞同：1
> 
> 时间：2013-01-18T14:44:40.303
> 
> 标签：java, security, sign

我有一个 Java 编写的 Web 服务，通过公钥验证数字签名的请求。客户端可以用不同的语言编写，例如 PHP。所以我想明智地选择一个密钥/签名算法......例如，关于签名的官方 Java[教程](http://docs.oracle.com/javase/tutorial/security/apisign/index.html)提供了`DSA`密钥和`SHA1withDSA`签名，但是对于将后者与 PHP 一起使用存在一些[抱怨](http://mark.koli.ch/2009/03/howto-using-sha1withrsa-signing-in-php.html)。

我可以选择哪种签名算法？

1.  通常被认为足够强大
2.  在 Linux 上对标准 Java 有很好的支持
3.  在其他公认的编程平台上获得良好的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:46:28.653

RSA。Java 有大量的库，它是使用最广泛的。也不应该使用 SHA1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T15:15:43.430

真正确认您以这些平台支持的方式进行操作的唯一方法是自己验证。即使您使用理论上应该可以使用的东西，它们的实现也可能会有所不同，从而使其无法正常工作。

你可以研究谷歌和 Facebook 是如何做的。您可以阅读人们使用的库中的代码，这些代码用于使用不同平台与这些服务进行通信，以了解您希望如何实现您的服务。

# c - 分配数组并从函数 C 赋值

> ID：14401301
> 
> 赞同：3
> 
> 时间：2013-01-18T14:44:56.947
> 
> 标签：c, arrays, function, pointers, segmentation-fault

## C题

你好，

我将一个双指针传递给一个函数以分配一个双精度数组并用 10.10 初始化函数内部的数组；

我执行以下操作，但是当我在 main 中访问数组时出现分段错误；

```
void function(double **array, int size){

    *array = (double*) malloc(size * sizeof(double)); 
    int i;
    for(i=0;i<size;i++){
    *array[i] = 10.10;
    }

}

int main(){

    double *array = NULL;

    function(&array,20);
    printf("array[0] = %lg\n",array[0]);// here is where I get segmentation fault

} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:46:23.740

您违反了运算符优先级。

改变：

```
for(i=0;i<size;i++){
    *array[i] = 10.10;
} 
```

至：

```
for(i=0;i<size;i++){
    (*array)[i] = 10.10;
} 
```

请注意，如果您在编译时启用了警告（例如`gcc -Wall ...`），您的编译器会为您捕捉到这一点。**始终**在启用警告的情况下进行编译，并**始终**注意、理解和修复任何警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:50:48.333

```
*array[i] 
```

并不意味着您认为它做了什么（使用[C 运算符优先级表查找](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)）。

不要使用不可读、丑陋和令人困惑（是的，它只是让您感到困惑）的代码，而是使用临时变量（***看在上帝的份上，不要强制转换 malloc 的返回值！***）：

```
void function(double **array, int size)
{
    if (array == NULL) return;

    double *tmp = malloc(size * sizeof(*tmp)); 
    if (tmp == NULL) {
        *array = NULL;
        return;
    }

    int i;
    for (i = 0; i < size; i++) {
        tmp[i] = 10.10;
    }

    *array = tmp;
} 
```

此外，`return 0;`从`main()`. 真的。

# .net - 增加性能计数器所需的权限

> ID：14401305
> 
> 赞同：10
> 
> 时间：2013-01-18T14:45:07.240
> 
> 标签：.net, performancecounter

我很难确定增加性能计数器所需的权限。尝试在计数器上调用 .Increment 时，我只发生了一次 InvalidOperationException/Access Denied（我认为）。这导致我得到以下信息：

[http://support.microsoft.com/kb/555129](http://support.microsoft.com/kb/555129)

> 将更新性能计数器的 ASP.NET 应用程序移动到生产环境中的最大问题是权限。默认情况下，为了增加性能计数器，用户需要具有管理员或高级用户权限。

从那里我将用户添加到高级用户组并继续我的方式没有问题。后来我发现“高级用户”不再具有 Vista 之外的任何权限，这让我回到了同一篇文章：

> 幸运的是，考虑到这些替代方案，事实证明更新性能计数器所需的权限集比以管理员或高级用户身份运行要小得多。在注册表项 HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib 中，设置访问控制列表，以便必要的用户拥有完全控制权。在我们最初的示例中，ASPNET 用户将被授予完全控制权，但可以将访问权限授予需要更新性能计数器的任何人。

但即使这似乎也不是真的，因为我现在已经返回并从高级用户组中删除了我的测试用户，并且我的应用程序仍在毫无问题地递增计数器。

此外，似乎如果要设置权限，它将位于 HKLM\System\CurrentControlSet\services\ 下的个人计数器上。

我完全承认我的代码可能存在其他问题，导致我最初的权限问题。但是，我需要将其一直部署回 XP，因此确认以上内容是否只是过时的信息或完全不正确对我来说很重要。我很快就能自己确认这一点，但如果有人可以验证信息或向我指出具体的文档，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-08T12:15:15.060

这里有两种类型的权限：

1.  修改性能计数器类别的权限

2.  通过 .NET 代码调用修改性能计数器的权限

对于第一个，您只需要修改注册表项 HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib 的权限（=手动添加或将用户添加到性能日志用户等）以及普通用户拥有的其他一些东西（例如访问 HKLM\SYSTEM\CurrentControlSet\Services），如 KB 中所述。

第二个与代码访问安全（CAS）策略有关。CAS 策略曾经/现在是一种机制，用于确定执行代码是否具有操作权限（通常在资源上，例如文件系统或性能计数器），如果没有，则抛出 SecurityExeption。由于[各种](https://blogs.msdn.microsoft.com/shawnfa/2010/02/24/is-cas-dead-in-net-4/)原因， CAS 策略自 .NET 4 以来已[过时](https://msdn.microsoft.com/en-us/library/dd233103(v=vs.100).aspx)（例如，除了 .NET 代码之外还有本机 Win32 API）。

如果您想了解 CAS 策略，这是一篇不错的文章：[Understanding .NET Code Access Security](http://www.codeproject.com/Articles/5724/Understanding-NET-Code-Access-Security)

启用 CAS 后，可以创建有关计算机上运行的代码的策略，并设置它是否可以递增或设置计数器的原始值，或者是否可以引发安全异常（性能计数器的可能权限在[PerformanceCounterPermissionAccess](https://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounterpermissionaccess(v=vs.110).aspx)中找到）。

基本上，如果你有 .NET 4，你可以忽略 CAS 策略（它已被关闭），以前的版本使用 mscorcfg.msc 检查程序的权限。

# php - MySQL IF 语句，当 this 下降 n% 时记录一个值

> ID：14401306
> 
> 赞同：1
> 
> 时间：2013-01-18T14:45:07.147
> 
> 标签：php, mysql, if-statement

我需要一些关于 MySQL 查询的支持。我真的不知道是否只能通过 MySQL 查询来做到这一点，因为我想跳过一个复杂的 PHP 函数。

我在一个 PHP 脚本中有这个查询，它每 5 分钟（通过 CRON）从解析的 XML 提要更新我的数据库：

```
INSERT INTO $jackpot->gameId (gameId,gameName,amount,currency,date,hit,hit_date) VALUES (\"$jackpot->gameId\", \"$jackpot->gameName\" , \"$jackpot->amount\", \"$jackpot->currency\",CURRENT_DATE(),0,NULL) ON DUPLICATE KEY UPDATE amount=$jackpot->amount 
```

现在，我将“增强”这个查询。当“数量”值下降（例如）之前值的 90% 时，我需要更新“命中”和“命中日期”列。

像这样，用两个词（无疑问）

```
Execute query-->update rows-->check if 'amount' value is down 90%--> if yes --> update hit (set to 1) and update hit_date (CURRENT_DATE()). 
```

是否可以通过 MySQL 来做到这一点，或者我必须编写一个更复杂的 php 脚本？

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:54:02.873

你几乎没有提供任何代码在这里，所以我猜你正在使用，`mysqli`否则请适应：

```
$query = mysqli_query("SELECT amount FROM " . mysqli_real_escape_string($jackpot->gameId) . " WHERE gameId = '" . mysqli_real_escape_string($jackpot->gameId) . "' ORDER BY hit_date DESC LIMIT 1");
$current = mysqli_fetch_array($query, MYSQLI_ASSOC);

// run the insert here

if((($current['amount'] - $new['amount'])/100) <= 0.9) {
    // UPDATE table SET hit = 1, hit_date = CURRENT_DATE() WHERE gameId = $jackpot->gameId
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:19:48.520

您可以使用这样的查询：

```
INSERT INTO games (
  gameId,
  gameName,
  amount,
  currency,
  date,
  hit,
  hit_date
) VALUES (
  NULL,
  "test",
  91,
  "€",
  CURRENT_DATE(),
  IF(amount > 90, 1, 0),
  IF(amount > 90, CURRENT_DATE(), NULL)
)
ON DUPLICATE KEY UPDATE
 amount = 91,
 hit = IF(amount > 90, 1, 0),
 hit_date = IF(amount > 90, CURRENT_DATE(), NULL) 
```

# c++ - Visual C++ 无法推断出在 ctor 中用作默认值的函数的给定（！）模板参数

> ID：14401308
> 
> 赞同：4
> 
> 时间：2013-01-18T14:45:09.040
> 
> 标签：c++, templates, visual-c++

我正在尝试使用模板函数在模板类的构造函数中返回参数的默认值。函数的模板参数也是类的模板参数。我在下面提供了一个示例。

**背景** 该示例显示了确切的用例和依赖关系，因为它们也出现在我的应用程序中。X 类实际上是一个相当大的类，它管理一个大数据块，该大数据块被分成更小的块。Class Helper 是一个内存管理器，它分配和释放较小块大小的内存。实际上，GetHelper 函数会在运行时尝试推导出 Helper 的一些构造函数参数，所以这就是我使用这种设计的原因。

**实际问题** 当两个宏 USE_NS 和 SHOW_ERROR 都定义时，代码不会编译，在第 66 行给出错误 *C2783 could not deduc template argument*。这是我尝试使用模板函数 GetHelper 初始化构造函数参数的地方（提供模板参数！）。请记住，GetHelper 来自与类 X 不同的命名空间。还请注意，在第 72 行使用相同的函数调用来初始化 ctor 主体内的 Helper 对象。怎么了？有解决方案或解决方法吗？

我正在使用 Visual Studio 2008 Pro，并提升 1.47。

```
#include <iostream>
#include <boost/shared_ptr.hpp>

// 1 means macro is defined
// USE_NS 1 and SHOW_ERROR 1 -> Compileerror
// USE_NS 0 and SHOW_ERROR 1 -> Works, Output: 8 and 16.5
// USE_NS 1 and SHOW_ERROR 0 -> Works, Output: 3
// USE_NS 0 and SHOW_ERROR 0 -> Works, Output: 3

#define USE_NS
#define SHOW_ERROR

#ifndef USE_NS
#define NH 
#define NX
#endif

#ifdef USE_NS
namespace NH
{
#endif

template< typename TNumAtH, size_t TSizeAtH>
class Helper
{
public:
    TNumAtH* x;

    Helper()
    {
        x = new TNumAtH[TSizeAtH];
        x[0] = static_cast< TNumAtH >( 8 );
    }

    ~Helper()
    {
        delete [] x;
    }
};

template <typename TNumAtF, size_t TSizeAtF >
boost::shared_ptr< Helper< TNumAtF, TSizeAtF > > GetHelper()
{
    return boost::shared_ptr< Helper< TNumAtF,TSizeAtF > > ( new Helper< TNumAtF, TSizeAtF >() );
}

#ifdef USE_NS
}

namespace NX
{
#endif

template< typename TNumAtX, size_t TSize >
class X
{
public:
    boost::shared_ptr< NH::Helper< TNumAtX, TSize > > a;

#ifdef SHOW_ERROR
    //this produces an error if namespace are used, if no namespaces are used
    //NH is reduced to a blank (see macros at line 17 and 18
    X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() );
#endif

    X( TNumAtX firstElem )
    {
        //this works with namespaces and without namespaces
        a = NH::GetHelper< TNumAtX, TSize >();
        a->x[0] = firstElem;
    }

    TNumAtX GetNum()
    {
        return a->x[0];
    }

};

#ifdef SHOW_ERROR
template< typename TNumAtX, size_t TSize >
X<TNumAtX, TSize>::
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h ) : a( h )
{
}
#endif

#ifdef USE_NS
}
#endif

int main( int argc, char** argv )
{
    std::cout << "Hello at TestTemplateFunction" << std::endl;
    //use case one
#ifdef SHOW_ERROR
    NX::X<int, 5> x1;
#else
    NX::X<int, 5> x1( 3 );
#endif
    std::cout << "Use case 1: " << x1.GetNum() << std::endl;

    //use case two
#ifdef SHOW_ERROR
    typedef float T;
    size_t const N = 9;
    boost::shared_ptr< NH::Helper<T, N> > h( new NH::Helper<T, N> );
    h->x[0] = 16.5f;
    NX::X<T, N> x2( h );
    std::cout << "Use case 2: " << x2.GetNum() << std::endl;
#endif

    std::cout << "Hit the any key" << std::endl;
    getchar();
    return 0;  
} 
```

这是 CMakeLists.txt 文件

```
PROJECT(TestTemplateFunction)
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

FIND_PACKAGE( BOOST )

INCLUDE_DIRECTORIES( ${Boost_INCLUDE_DIR} )

ADD_EXECUTABLE( TestTemplateFunction main.cpp  ) 
```

*编辑：*编译错误

```
main.cpp(65) : error C2783: 'boost::shared_ptr<NH::Helper<TNumAtH,TSizeAtH>>    NH::GetHelper(void)' : could not deduce template argument for 'TNumAtF'
main.cpp(44) : see declaration of 'NH::GetHelper'
main.cpp(65) : error C2783: 'boost::shared_ptr<NH::Helper<TNumAtH,TSizeAtH>>       NH::GetHelper(void)' : could not deduce template argument for 'TSizeAtF'
main.cpp(44) : see declaration of 'NH::GetHelper' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:29:23.913

**爆炸新闻**

在 Clang 3.2 上报告该问题后，看来这实际上是一个 C++ 缺陷。[您在 clang 数据库中](http://llvm.org/bugs/show_bug.cgi?id=13657)看到错误讨论错误讨论。

引用理查德·史密斯的话：

> 这是 C++ 本身的一个缺陷：
> 
> [http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#325](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#325)
> 
> Clang 在这里匹配所有其他 C++ 编译器的行为；这不是一个错误（尽管取决于解决该问题的方式，我们可能需要重新审视这一点）。
> 
> 解决方法是在默认参数表达式周围添加括号。

问题之一是模棱两可。例如，通过查看：

```
int = a < b, c < d > ( e ) 
```

... 是一个参数，并且 ...

```
int = a < b, c < d > ( e ) = 0 
```

我们可以意识到模板参数不容易区分，正则`<`调用以及因此构成默认参数的内容并不容易。

如果我们遵循 Richard 的建议并添加括号，那么我们将不再受制于编译器的奇思妙想。或者至少，[我可以保证 Clang 做对了](http://liveworkspace.org/code/34xEuP%246)（修订版 6）：

```
 X( boost::shared_ptr< NH::Helper<T, N> > h = (NH::GetHelper<T, N>()) ); 
```

* * *

在我看来，它就像一个编译器错误。

[我在 liveworkspace 上](http://liveworkspace.org/code/34xEuP%241)测试了您的代码（感谢您顺便发布了一个完整的示例），gcc 4.7.2 产生以下输出：

```
Hello at TestTemplateFunction
Use case 1: 8
Use case 2: 16.5 
```

而 clang 3.2 产生：

```
Compilation finished with errors:
source.cpp:65:86: error: unknown type name 'TSize'
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() );
                                                                                 ^
source.cpp:65:92: error: expected ')'
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() );
                                                                                       ^
source.cpp:65:6: note: to match this '('
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() );
 ^
source.cpp:65:84: error: expected '>'
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() );
                                                                               ^
source.cpp:85:1: error: out-of-line definition of 'X<TNumAtX, TSize>' does not match any declaration in 'X<TNumAtX, TSize>'
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h ) : a( h )
^
4 errors generated. 
```

我以两种方式稍微修改了示例（更改 5）：

*   `static boost::shared_ptr<Helper> Get() { return boost::shared_ptr<Helper>(new Helper()); }`在`Helper`模板中引入inline

*   制作了一个`typedef NH::Helper< TNumAtX, TSize > Helper`并将`X`其用于构造函数`X(boost::shared_ptr<Helper> h = Helper::Get());`

现在clang设法编译代码。

我设法将错误（clang）减少到：

```
template <typename T, unsigned N>
struct Helper {};

template <typename T, unsigned N >
Helper< T, N > GetHelper() { return Helper< T, N > (); }

template < typename T, unsigned N >
struct X {
    X( Helper< T, N > h = GetHelper<T, N>() ) {}
}; 
```

你可以[在这里看到](http://liveworkspace.org/code/3EALA5%2427)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T11:12:07.423

这是一个非常奇怪的情况，我仍然不明白为什么在给定名称空间时它会以这种方式运行。

但是，我找到了您可能会使用的解决方法。
只需声明您正在使用命名空间，并在函数之前删除命名空间范围。

```
namespace NX
{
using namespace NH;
#endif

template< typename TNumAtX, size_t TSize >
class X
{
public:
    boost::shared_ptr< NH::Helper< TNumAtX, TSize > > a;

#ifdef SHOW_ERROR
    //this produces an error if namespace are used, if no namespaces are used
    //NH is reduced to a blank (see macros at line 17 and 18
            X( std::shared_ptr< NH::Helper< TNumAtX, TSize > > h = GetHelper<TNumAtX, TSize> () );
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:07:50.573

您的编译器抛出此问题的原因是您在模板参数之间存在歧义。助手类需要模板参数，x 也是如此。编译器不知道如何构建 Helper，因为提供的参数是另一组模板参数。

您的 x 构造函数：

```
X( boost::shared_ptr< NH::Helper< TNumAtX, TSize > > h = NH::GetHelper< TNumAtX, TSize >() ); 
```

正在尝试为模板成员分配默认值。它不知道向 Helper 和 GetHelper 提供了哪些模板参数。即使模板相同，您也必须明确声明来自 x 的模板参数作为 Helper 和 GetHelper 的模板参数传入。

在这篇文章中有一些关于模板模板参数的有见地的答案： [模板模板参数](https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c/ "模板模板参数")

另外，基于msdn网站，有关于C2783的声明： [MSDN](http://msdn.microsoft.com/en-us/library/az5wkwaw%28v=vs.80%29.aspx)

> 编译器无法确定模板参数。默认参数不能用于推断模板参数。

# ruby-on-rails - 安装 RMagick Gem Rails 3

> ID：14401311
> 
> 赞同：1
> 
> 时间：2013-01-18T14:45:21.310
> 
> 标签：ruby-on-rails, gem, installation, bundle, rmagick

```
Fetching gem metadata from https://rubygems.org/...........
Fetching gem metadata from https://rubygems.org/..
Could not find gem 'rmagick v 2.13.1 (>= 0) x86-mingw32' in the gems available o
n this machine. 
```

嗨，我在运行 bundle install 时收到消息，下面是我的 gemsfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

gem 'carrierwave'
gem 'rmagick v 2.13.1'
# Gems used only for assets and not required
# in production environments by default.
group :assets do
 gem 'sass-rails',    '~> 3.2.3'
gem 'coffee-rails',  '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platforms => :ruby

gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
 gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
 # gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

 # To use debugger
# gem 'debugger'

gem 'will_paginate','~> 3.0' 
```

是否有另一种方法可以在 Rails 3 中安装 RMagick gem？我安装了carrierwave，需要使用rmagick。我可以在没有 rmagick 的情况下使用carrierwave吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:01:15.217

你需要改变你`Gemfile`的一点点。

```
gem 'rmagick', '2.13.1' 
```

您还需要`imagemagick`在系统上安装。`rmagick`需要`imagemagick`

您可以通过或您的操作系统使用`yum`的`apt-get`任何包管理器进行安装。

需要注意的是，`imagemagick`在 OSX 上安装有点棘手。我建议使用`homebrew`

```
brew install -f imagemagick --disable-openmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:01:18.287

Gemfile 中的行应该是：

```
gem "rmagick", "~> 2.13.1" 
```

另外，我建议使用`mini_magick`，因为它在处理时占用更少的内存：

```
gem "mini_magick", "~> 3.4" 
```

> 我可以在没有 rmagick 的情况下使用carrierwave吗？

是的，但您将无法进行图像处理（调整大小等）。上传将正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T14:58:27.983

从 Stackoverflow 找到了一个很好的答案。为我工作。可以为你工作。

> `cd /usr/local/Cellar/imagemagick/6.8.0-10/lib`
> `ln -s libMagick++-Q16.7.dylib libMagick++.dylib`
> `ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib`
> `ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib`

[在 Mountain Lion 上安装 Rmagick 时出错](https://stackoverflow.com/questions/13942443/error-installing-rmagick-on-mountain-lion/13960185#13960185)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T02:33:32.753

```
gem 'mini_magick', '~> 4.8'

bundle 
```

# iphone - 如果已安装，如何从 google+ 应用程序启动和共享

> ID：14401312
> 
> 赞同：3
> 
> 时间：2013-01-18T14:45:29.497
> 
> 标签：iphone, ios, ipad, ios6, google-plus

我刚刚使用 google+ SDK 实现了 google+ 的共享功能。

我刚刚使用了类似这里的代码[https://developers.google.com/+/mobile/ios/share#basic_sharing](https://developers.google.com/+/mobile/ios/share#basic_sharing)

当我尝试分享某些东西时，它会启动 safari 并分享。一切都好。

但是，如果已安装，我想启动 google+ 应用程序。我在文档中找不到任何关于它的信息。

有人知道 google+ 应用的 URLScheme 吗？如果是，可以使用哪些参数？谷歌官方支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:57:57.800

不幸的是，目前这是不可能的。但是您始终可以在我们的问题跟踪器中请求这样的功能，您可以在[http://developers.google.com/+/support](http://developers.google.com/+/support)找到它。

我还建议阅读上面评论中链接的问题，因为它确实提供了有关更一般用例的信息。

# jquery - 删除父 div 如果 标签返回空

> ID：14401314
> 
> 赞同：2
> 
> 时间：2013-01-18T14:45:33.073
> 
> 标签：jquery, html, css

如果 p 标签为空，我希望能够删除 ap 标签的父 div。我已经给出了 p 和 id 并使用了这行代码。

```
$('#contentempty:empty').parent().remove(); 
```

我已经阅读了很多文档，这看起来应该是正确的，但是当我 jsfiddle 它[http://jsfiddle.net/timwilks13/78uQm/](http://jsfiddle.net/timwilks13/78uQm/)它不起作用。有谁知道我错过了什么？！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:48:08.533

您不能在同一页面上多次使用相同的 id，请改用类：

```
<div>
  <p class="contentempty">
    Hello
  </p>
</div>
<div>
  <p class="contentempty">
  </p>
</div> 
```

和 JavaScript：（使用单个选择器`.contentempty`然后与[jQuery.fn.filter](http://api.jquery.com/map/)链接更快）

```
$('.contentempty').filter(":empty").parent().remove(); 
```

* * *

您可以使用 [jQuery.fn.map][2] 自己检查是否为空，然后检查 DOM 节点的 innerHTML 的修剪版本是否等于空字符串`""`：

```
$(".contentempty").map(function() {
     return !$.trim(this.innerHTML);
}).parent().remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:51:16.853

1.  使用类而不是 ID（ID 必须是唯一的）
2.  如果有空格，则段落不为空。

[http://jsfiddle.net/UNZTV/](http://jsfiddle.net/UNZTV/)

```
<div>
  <p class="contentempty">
    Hello
  </p>
</div>
<div>
  <p class="contentempty"></p>
</div> 
```

JS：

```
$('.contentempty:empty').parent().remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:50:58.740

虽然 @NULL 可能对 id 是正确的，但它只能在`<p>`实际为空的情况下工作：

[http://jsfiddle.net/sBPCB/](http://jsfiddle.net/sBpCB/)

```
<div>
  <p id="contentempty">
    Hello
  </p>
</div>
<div>
  <p id="contentempty"></p>
</div> 
```

# c# - 错误 1 非静态字段、方法或属性 'temperature_conversion.Program.Celsius(int)' 需要对象引用

> ID：14401318
> 
> 赞同：1
> 
> 时间：2013-01-18T14:45:37.940
> 
> 标签：c#

```
class Program
    {
        static void Main(string[] args)
        {
            int temp;
            string choice;
            int finalTemp;
            Console.WriteLine("Enter a temperature");
            temp = Convert.ToInt16(Console.ReadLine());

            Console.WriteLine("Convert to Celsius or Fahrenheit?" + "\n" +"Enter c or f");
            choice = Console.ReadLine();

            if (choice == "c")
            {
                Celsius(temp);
            }

            Console.ReadLine();//to keep open

        } //Main End

        public int Celsius(int t)
        {
            int c;
            c = 5 / 9 * (t - 32);
            return c;
        }
    } 
```

我知道答案很简单，我似乎无法弄清楚我做错了什么。

我正在尝试将温度传递给摄氏度方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:46:51.580

将您的方法标记为静态：

```
public static int Celsius(int t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:47:10.323

问题是该`Celsius`方法不是静态的，例如`Main`.

你可以解决这两种方法。

制作`Celsius`静态：

```
public static int Celsius(int t) 
```

创建一个实例，`Program`然后调用`Celsius`：

```
var program = new Program();   
program.Celsius(temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:47:43.317

尝试使用[`static`](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)您的`Celcuis`方法。如果你想用你的调用者方法调用同一个类中的一个方法，并且如果你想直接调用你应该`static`在你的方法上使用关键字。像这样;

```
static public int Celsius(int t)
{
    int c;
    c = 5 / 9 * (t - 32);
    return c;
} 
```

对于其他选项，您可以创建一个类实例并在 if 条件下调用您的方法。像这样;

```
if ( choice == "c" )
{
   Program p = new Program();
   p.Celsius(temp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:49:28.243

一种可能性是使摄氏度方法静态`public static int Celsius(int t)`。
另一个，是创建一个新实例`Program`并调用`Celsius`它：

```
new Program().Celsius(temp); 
```

# mysql - InnoDB：创建具有显式索引名称的外键

> ID：14401319
> 
> 赞同：2
> 
> 时间：2013-01-18T14:45:38.580
> 
> 标签：mysql, innodb

我正在尝试同时创建一个带有索引的外键，并明确指定它们的名称。

[手册](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)说：

```
[CONSTRAINT [symbol]] FOREIGN KEY
    [index_name] (index_col_name, ...)
    REFERENCES tbl_name (index_col_name,...)
    [ON DELETE reference_option]
    [ON UPDATE reference_option] 
```

> index_name 表示外键 ID。如果给定，如果明确定义了外键的索引，则忽略它。否则，如果 InnoDB 为外键创建索引，**它使用 index_name 作为索引名称。**

所以我尝试了以下方法：

```
ALTER TABLE MyTable
ADD CONSTRAINT FK_MyTable_Zone FOREIGN KEY
IDX_MyTable_Zone (zoneId)
REFERENCES Zone (id); 
```

但是`SHOW CREATE TABLE`说明`IDX_MyTable_Zone`没有考虑索引名，索引名也使用了外键名：

```
CREATE TABLE `MyTable` (
  `zoneId` int(10) unsigned NOT NULL,
  KEY `FK_MyTable_Zone` (`zoneId`),
  CONSTRAINT `FK_MyTable_Zone` FOREIGN KEY (`zoneId`) REFERENCES `Zone` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:51:33.823

我从来没有使用过这种语法。为了控制名称，我总是与外键分开创建索引。

这应该适合你：

```
ALTER TABLE MyTable
ADD KEY IDX_MyTable_Zone (zoneId),
ADD CONSTRAINT FK_MyTable_Zone FOREIGN KEY (zoneId) REFERENCES Zone (id); 
```

# android - 在基于画布的游戏上创建“关卡/地图”？

> ID：14401324
> 
> 赞同：0
> 
> 时间：2013-01-18T14:45:50.520
> 
> 标签：android

我目前正在开发一款突围风格的游戏，但是到目前为止，我只使用以下方法对一个级别进行了硬编码：

```
for (int i = 0; i < 6; i++) {
            for (int j = 0; j < 7; j++) {
                int y_coordinate = (i * (blockHeight + spacing)) + topOffset;
                int x_coordinate = j * (blockWidth + spacing); 
```

所以基本上它在屏幕的宽度上放置 7 个块，然后向下放置 6 层，形成一个“方块方块”，但这对用户来说远非有趣或吸引人，我希望能够做到这一点。实现某种级别的进展，这应该通过外部文件来完成吗？以及我将如何确保将项目放置在与屏幕尺寸/密度相关的正确坐标的屏幕上，其次，我的主要问题是，我如何才能用块制作某些形状，即脸，没有为每个屏幕硬编码个人坐标？？

一个问题只是两种说法，如果这太模糊了，抱歉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:51:58.240

如果您只是希望级别不同，那么您可以随机生成它们。对于每个区块位置，有一个随机机会在那里会有一个区块。永远不要两次（或多或少）相同的级别。如果你想要特定模式的方块，比如一张脸，那么你必须想出一些方法将关卡的方块布局存储在一个文件中，然后当关卡开始时，游戏会加载文件以供当前级别，读取块位置并以正确的排列创建它们。否则没有真正的方法可以做到这一点，除非您想提出数学公式来描述您的关卡形状并使用它们以程序方式生成它们。

[编辑] 至于坐标问题，你说的对，不同的设备有不同的屏幕分辨率、像素密度等。然而，这并不一定会对你的游戏产生太大影响。

解决此问题的一种常见方法是有两个坐标集：“世界”坐标，表示对象在游戏世界中的位置，以及“屏幕”坐标，表示对象所在的位置。被绘制。你所有的物理和游戏逻辑代码都应该使用世界坐标，它可以是你喜欢的任何比例（我建议选择一个大于你的游戏将显示的最大屏幕的像素尺寸的尺寸）。我之前提到的关卡文件当然也应该在世界坐标中。您对屏幕坐标感兴趣的唯一时间是您在屏幕上绘制某些东西时。此时，您有一个小函数可以将一个坐标集映射到另一个坐标集。通常它只是一个简单的比例因子。所以，当你的游戏启动时，它询问手机或平板电脑的屏幕分辨率，计算此特定实例的比例因子，并将其存储，然后您只需在绘制内容时查找它，并使用它进行转换。例如，如果您的游戏使用跨度为 10,000 点的坐标集，并且您的游戏在跨度为 768 像素的屏幕上运行，则游戏将计算比例因子为 10,000 / 768 = 13.021ish。然后每当你画球时，你就知道它的屏幕 x 坐标是它的实际 x 坐标除以 13.021ish。并且您的游戏在 768 像素的屏幕上运行，游戏将计算比例因子为 10,000 / 768 = 13.021ish。然后每当你画球时，你就知道它的屏幕 x 坐标是它的实际 x 坐标除以 13.021ish。并且您的游戏在 768 像素的屏幕上运行，游戏将计算比例因子为 10,000 / 768 = 13.021ish。然后每当你画球时，你就知道它的屏幕 x 坐标是它的实际 x 坐标除以 13.021ish。

这不仅使您的游戏不受屏幕大小的影响，还意味着您可以在内部使用更准确的位置，从而实现更准确的行为（碰撞检测等）。只要您的内部“世界”坐标集大于屏幕上的像素数，但又不会大到需要大量内存（如果您必须存储有关每个位置的数据）或处理能力（如果您正在对每个循环的许多位置进行连续碰撞检测）然后它会正常工作。对于 Android 游戏，考虑到普通 Android 设备的功能和它们倾向于拥有的屏幕类型，我会说你应该没问题的“世界”坐标集跨越两三千点。那么你唯一需要决定的就是当道具没有时该怎么办' t 匹配 - 例如，您的游戏有一个边长比例为 4:3 的网格，并且在屏幕为 16:9 的手机上播放。您可以切掉边缘（并记住在此处添加障碍物，以使球不会离开屏幕）或只是将其扭曲以匹配（这不适用于某些东西，但在 Breakout 中可能不明显式游戏）。也许两者都试一下，看看你最喜欢哪个。

# php - 当具有特定字符串时，使用 php 计算 mysql 中的行数

> ID：14401328
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:46:04.367
> 
> 标签：php, mysql, count

我的数据库中有一个名为`visitor_table`. 在表中，我有一列名为`visitor_affiliate`. 我想在`visitor_affiliate = "someurer"`.

我想将计数作为数字。我已经有了这段代码，但我不知道如何仅获取包含字符串的行的计数。我目前得到所有行的数量，

```
$result = mysql_query("SELECT * FROM visitor_table");   
$num_rows = mysql_num_rows($result);    
echo "$num_rows Rows\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:51:52.653

1.  您可以要求 MySQL 返回计数：

    ```
    SELECT COUNT(*) FROM visitor_table WHERE visitor_affiliate = 'someurer' 
    ```

2.  您不应该使用古老的（自 PHP v5.5.0 起已弃用，很快将被完全删除）的 MySQL 扩展来编写新代码——改用[改进的 MySQLi 扩展](http://php.net/manual/en/book.mysqli.php)或[PDO 抽象层](http://php.net/manual/en/book.pdo.php)，这两者都可以让您传递变量以[一种安全的、参数化的方式](https://stackoverflow.com/a/60496)向数据库发送数据，以确保它们不会针对 SQL 进行评估（因此可以防止 SQL 注入攻击）：

    ```
    $dbh = new PDO("mysql:dbname=$dbname", $username, $password);
    $dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);
    $qry = $dbh->prepare('
      SELECT COUNT(*) FROM visitor_table WHERE visitor_affiliate = ?
    ');
    $qry->execute(['someurer']);
    echo $qry->fetchColumn(), ' rows'; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:48:54.557

```
$result = mysql_query("SELECT * FROM visitor_table WHERE `visitor_affiliate` = 'someurer'");
$num_rows = mysql_num_rows($result);
echo $num_rows . " Rows\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:49:52.300

根据您提供的少量信息，请尝试以下操作-

```
$result = mysql_query("SELECT * FROM visitor_table Where visitor_affiliate like '%someurer%'");
$num_rows = mysql_num_rows($result);
echo "$num_rows Rows\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:57:23.983

已弃用的 MySQL：

```
$res = mysql_query('SELECT * FROM visitor_table');
echo 'Number of rows:'.mysql_num_rows($res); 
```

程序 MySQLi：

```
$tu = mysqli_prepare($DBH,'SELECT * FROM visitor_table');
mysqli_execute($tu);
$num_rows = mysqli_num_rows($tu);
echo $num_rows.' rows\n'; 
```

mysql 已被弃用。请使用 mysqli。使用 MySQLi bind_param 得到你的结果：

```
$someuser = 'Dave';
$DBH = mysqli_connect('localhost','user','pass','database');
$query = mysqli_prepare($DBH,'SELECT * FROM visitor_table WHERE user = ?');
mysqli_bind_param($query,'s',$someuser);
mysqli_execute($query);
mysqli_bind_result($id,$user,$tabCol1,$tabCol2);
while(mysqli_fetch_result){
    $row = $row +1;
    echo $user.': was found in the record with ID of: '.$id;
}
echo 'total records found:'.$row; 
```

这是一种方法，因为我不能完全 100% 确定`mysqli_num_row()`在上面的查询中使用 a 。

# android - 通过 WiFi 将视频从一部 Android 手机实时传输到另一部

> ID：14401340
> 
> 赞同：119
> 
> 时间：2013-01-18T14:46:24.640
> 
> 标签：android, video, streaming, video-streaming, live-streaming

我已经在互联网上搜索了几天关于如何通过 WiFi 连接实现从安卓手机到另一部安卓手机的视频流功能，但我似乎找不到任何有用的东西。我在 android 开发人员那里寻找示例代码、stackoverflow、google、android 博客，但什么也没有。我所能找到的只是某种用于流式传输的电话到桌面或桌面到电话的解决方案，但在我的实现中没有任何东西可以借用。

我需要使用 arduino ADK 控制机器人，所以我使用 2 部手机，一部将安装在机器人上，另一部将接收来自机器人的视频流。我之所以提到这一点，是因为我试图在广播时间和观看时间之间实现最小的延迟。

我正在编写 2 个应用程序，一个主应用程序用于控制机器人（来自手持电话），它将控制从属应用程序并接收流，第二个从属应用程序将在机器人捆绑电话上运行，控制电机/执行器/streaming 到主应用程序。不幸的是，我无法使用第三方应用程序。我需要将视频流代码集成到我的 2 个应用程序中。

有哪些选择可以实现这一目标？也很难做到，因为我从未使用过视频流，很难，我在 Java 和 Android 开发方面都做得很好。我应该如何编码/解码流，如何启动连接，我需要使用 UDP 而不是 TCP/IP 吗？我真的不知道从哪里开始，任何地方都没有示例代码。我很确定这是可以实现的。我只是找不到任何有用的东西来让我朝着正确的方向开始。

我偶然发现了[spydroid](http://code.google.com/p/spydroid-ipcamera/) ，但它在桌面上使用 VLC，所以它对我没有好处。

* * *

**编辑：**查看 Cagney Moreau 的[博客](http://cagneymoreau.com/stream-video-android/)。他详细介绍了如何实现这一点。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-21T05:04:59.630

如果您不需要应用程序中的录制和播放功能，则使用现成的流媒体应用程序和播放器是一个合理的选择。

但是，如果您确实需要它们在您的应用程序中，则必须查看[MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html) API（用于服务器/相机应用程序）和[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)（用于客户端/播放器应用程序）。

服务器的快速示例代码：

```
// this is your network socket
ParcelFileDescriptor pfd = ParcelFileDescriptor.fromSocket(socket);
mCamera = getCameraInstance();
mMediaRecorder = new MediaRecorder();
mCamera.unlock();
mMediaRecorder.setCamera(mCamera);
mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
// this is the unofficially supported MPEG2TS format, suitable for streaming (Android 3.0+)
mMediaRecorder.setOutputFormat(8);
mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
mediaRecorder.setOutputFile(pfd.getFileDescriptor());
mMediaRecorder.setPreviewDisplay(mPreview.getHolder().getSurface());
mMediaRecorder.prepare();
mMediaRecorder.start(); 
```

在播放器方面它有点棘手，你可以试试这个：

```
// this is your network socket, connected to the server
ParcelFileDescriptor pfd = ParcelFileDescriptor.fromSocket(socket);
mMediaPlayer = new MediaPlayer();
mMediaPlayer.setDataSource(pfd.getFileDescriptor());
mMediaPlayer.prepare();
mMediaPlayer.start(); 
```

不幸的是 mediaplayer 往往不喜欢这样，所以你有几个选择：要么（a）将数据从套接字保存到文件，并且（在你有一些数据之后）从文件中使用 mediaplayer 播放，要么（b）制作一个很小的 ​​http本地运行的代理，可以接受媒体播放器的 GET 请求，回复 HTTP 标头，然后将数据从远程服务器复制到它。对于 (a) 您将使用文件路径或文件 url 创建媒体播放器，对于 (b) 给它一个指向您的代理的 http url。

也可以看看：

[使用套接字 fd 将实时视频从手机流式传输到手机](https://stackoverflow.com/questions/6116880/stream-live-video-from-phone-to-phone-using-socket-fd/)

[MediaPlayer 在 mp3 播放开始时卡顿](https://stackoverflow.com/questions/5343730/mediaplayer-stutters-at-start-of-mp3-playback/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T16:37:33.880

我曾经做过这样的事情，但是发送视频并实时播放是一件非常复杂的事情。我建议你只使用PNG。在我的实现中，我所做的是使用主机摄像头捕获 PNG，然后通过网络将它们发送到客户端，客户端将在收到图像后立即显示图像并从主机请求下一张图像。由于您使用的是 wifi，因此通信速度将足以每秒获得大约 8-10 张图像（仅近似值，我在蓝牙上工作）。所以这看起来像一个连续的视频，但工作量要少得多。对于通信，您可以使用 UDP 套接字（更快且更简单）或 DLNA（不确定它是如何工作的）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-18T14:56:12.263

您可以使用[IP 网络摄像头](https://play.google.com/store/apps/details?id=com.pas.webcam&hl=en)，也可以使用 DLNA。例如，三星设备带有一个名为 AllShare 的应用程序，它可以共享和访问网络上支持 DLNA 的设备。不过，我认为 IP 网络摄像头是您最好的选择。您应该能够使用 MX 视频播放器或类似的东西打开它创建的流。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-27T03:28:51.680

您可以查看可以流式传输和播放视频的[android VLC](http://www.videolan.org/vlc/download-android.html)，如果您想了解更多，可以查看他们的[GIT](http://wiki.videolan.org/Git)以分析他们的工作。祝你好运！

# c++ - 比较 C++ 字符串

> ID：14401342
> 
> 赞同：3
> 
> 时间：2013-01-18T14:46:26.080
> 
> 标签：c++, string, compare

```
class Song {

public:
    const string getAutherName();
}

void mtm::RadioManager::addSong(const Song& song,const Song& song1) {

    if (song.getAutherName() == song1.getAutherName())

} 
```

我收到此错误：

```
Invalid arguments ' Candidates are: std::basic_string<char,std::char_traits<char>,std::allocator<char>> getAutherName() ' - passing 'const mtm::Song' as 'this' argument of 'std::string mtm::Song::getAutherName()' discards qualifiers [- fpermissive] 
```

为什么它使用`basic_string`而不是`string`！如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:52:32.250

您的`getAutherName()`函数不是`const`，因此不能通过 a 调用它`const Song&`。像这样更改函数声明：

```
class Song {

public:
    const string getAutherName() const;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:53:06.067

您正在调用`getAutherName()`const `Songs`，因此您需要使用该方法`const`：

```
const string getAutherName() const; 
```

目前尚不清楚您为什么返回`const string`. 要么返回 a `string`，要么返回一个 const 引用：

```
const string& getAutherName() const;
string getAutherName() const; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:51:37.800

`std::string`是一个 typedef `basic_string<char, std::char_traits<char>, std::allocator<char> >`，编译器只是在错误消息中扩展 typedef。

但是，为什么代码不起作用我不知道。您似乎已经删除了 ' 所在的错误消息的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T22:53:00.510

您需要添加一个`const`限定以`getAutherName`允许在 const`Song`对象上调用它：

```
//| -- Returns a `const` `string` (this is bad practice
//v    because it inhibits optimization)
const string getAutherName() const;
// Can be called on a `const`    ^
// `Song`. This is good practice |
// because it it allows `getAutherName()`
// to be used in more places, and it encourages
// const-correctness. 
```

# javascript - 在选择框中选择值取决于其他选择框中的第一个选择

> ID：14401344
> 
> 赞同：0
> 
> 时间：2013-01-18T14:46:26.977
> 
> 标签：javascript, ajax, drop-down-menu

在第一个选择框中选择了一个值后，我试图在选择框中选择一个值。现在我只是替换了整个选择框，但它们是使用 javascript 设置样式的，它调用了一些 css，所以我试图避免使用 'eval()'; 并且只是更改选择选项。

在第一个选择框中，用户选择了一个产品。之后，查询应该找到与计费有关的附加号码，并且必须在第二个选择框中自动选择该号码。但他们必须能够改变它，所以它必须是一个选择框，而不仅仅是一个文本框。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:08:28.217

我在这里创建了一个演示[http://jsbin.com/adidus/1/edit](http://jsbin.com/adidus/1/edit)

希望这能给你一个建议:)

# intellij-idea - Intellij Idea 如何为类添加接口实现？

> ID：14401347
> 
> 赞同：12
> 
> 时间：2013-01-18T14:46:39.127
> 
> 标签：intellij-idea, editor, code-completion, automated-refactoring

例如，我有很多类而不是实现我的接口。在接口中添加新方法定义后，如何为所有类快速添加空白接口实现？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-22T10:12:42.723

`Alt`+`Enter`关于接口中的新方法，**实现方法**：

![在此处输入图像描述](../Images/902ba08f983c1a67e7287720ee2d1955.png)

按`Enter`，将显示实现类列表，使用`Shift`+ 箭头键选择所需的类或按`Ctrl`+`A`选择所有类，然后`Enter`再次按确认选择。存根实现将添加到所有选定的类中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-18T14:50:03.363

我认为您能做的最好的事情来自他们的[代码生成教程](http://www.jetbrains.com/idea/features/code_generation.html)，尤其是通过使用

> Ctrl+O

在实现类中。否则我不知道生成整个类的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-25T22:17:35.357

您可以通过**将插入符号移动到接口名称**并按`option`+ `return`（在 Mac 上）或`ALT`+ `Enter`（在 PC 上），然后将鼠标悬停在上面`Implement interface`并按`return`/来生成接口的实现`Enter`：

[![实现接口](../Images/a3303ee068c3004f001d9bda36175e2b.png)](https://i.stack.imgur.com/MqByD.png) **请注意，我的插入符号看不到，但它位于`h`和`a`之间`Shape`**

然后 IntelliJ 会提示您输入类名以及要在实现中包含哪些方法，然后生成一个类，如下所示：

[![在此处输入图像描述](../Images/b1a3820b07c347e2dccbd53497a3a3f3.png)](https://i.stack.imgur.com/IVAsz.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-12T14:11:16.120

在 IntellyJ IDEA 12 中，您可以使用 Push Members Down 对话框：

```
Refactor -> Pull Members Down... 
```

然后选择要推送到子类的方法并单击“重构”： [http ://clip2net.com/s/i6DK41](http://clip2net.com/s/i6DK41)

请注意，它不会按基类生成存根方法 - 它只是按原样移动它。因此，您需要自己在父（根）类中实现存根，例如：

```
public boolean getRequiredDatabaseNameWhenPartitioned() {
  return true;
} 
```

然后使用“下推成员”，重构，最后手动抽象父类的方法

# tridion - 富文本字段的使用规则？

> ID：14401348
> 
> 赞同：16
> 
> 时间：2013-01-18T14:46:43.510
> 
> 标签：tridion

在 Tridion 组件上使用富文本字段时，谁能指出一些要遵循的规则？我注意到您可以直接在 Source 选项卡上输入 mark up，但如果您输入不完整的 html，则 tridion 会为您完成它，如下所示：

```
<!--Enter this-->
<td>test</td>

<!--And it becomes this-->
<table>
<tr>
<td>test</td>
</tr>
</table> 
```

如果您输入了无效的标记，那么您会看到一个验证结果弹出窗口，告诉您您的语法无效：

```
<!--Generates Validation Results popup -->
<badtag> 
```

好像给RTF html添加id和class这样的属性是没有问题的，只要html是合法的，但是大家的经验是什么呢？谁能指出我应该和不应该在组件 RTF 字段中尝试和做的其他最佳实践？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T15:14:01.327

好问题。最佳实践取决于客户对客户，至少基于我对 Tridion 的经验。

我见过一些客户非常适应并且在 RTF 领域做得更多（几乎构建了数据捕获表单之类的所有东西——天哪..），并且看到一些对编辑器不太适应的客户（例如；从 word doc 复制和粘贴） ETC..）。

我还没有看过最佳实践文档，我不认为一个适合所有的文档，因为这取决于组织或代理的技能和舒适度。

根据经验，**XHTML 投诉**是必须的，这就是 Tridion RTF 编辑器所做的（好事）。这就是您注意到清理有效/无效 html 格式的原因。

下面这个来自 Alvin 的链接涉及一些主题，但可能不是您正在寻找的内容。

[http://www.tridiondeveloper.com/rich-text-format-area-css-classes-vs-custom-xml-nodes](http://www.tridiondeveloper.com/rich-text-format-area-css-classes-vs-custom-xml-nodes)

如果你找到了，请与我们分享。我也在找一个。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T10:14:31.773

确实是个好问题，虽然不是那么容易回答。我相信@Ram 是正确的，那里没有任何最佳实践，猜测其中大部分是通过内容建模培训传递的（[请参阅可用的培训轨道](http://sdl.com/services/education-certification/training-product/web-content-management/sdltridion-templatedevelopers.html)），但我不得不承认，您的问题的答案是那里没有详细讨论。

根据经验，我发现富文本字段是 SDL Tridion 中被滥用最多的选项之一。我称之为典型滥用的事情是例如具有单个富文本字段的文章架构，旨在让编辑者直接在页面上输入 HTML。虽然这显然不是大多数人的方式（我希望 ;o），但它确实很大程度上取决于客户的要求，一个人应该走多远以及您应该在富文本字段使用中允许什么。

总是出现的第一个讨论是您是否应该允许编辑对内容进行格式化。我总是想说内容和布局应该分开，但你会直接与表格、强调文本、列表和链接等内容发生冲突。这就是富文本字段发挥作用的地方。

我赞成尽可能地限制富文本字段的使用，因此使用可用的 XSLT 去除不需要的标签和（样式）属性。首先要考虑的事情之一是在富文本字段中使用图像，其次是脚本和表单标签。如果您不想在富文本输出中允许它们，请调整 XSLT 以删除它们。但最终它（不幸的是）主要归结为客户要求。尽管您确实有责任向他们提供建议，当然，什么是有意义的，什么是没有意义的。

# php - php标头位置在我的vps中不起作用

> ID：14401350
> 
> 赞同：0
> 
> 时间：2013-01-18T14:46:44.060
> 
> 标签：php

我最近从共享主机升级到 vps。

在我的 php 脚本中，我有一个如下的标头重定向：

```
header("Location: index.php?success"); 
```

问题是，它成功重定向到 index.php 但

```
?success 
```

在 index.php 的末尾丢失。

我很确定我的代码是正确的，因为相同的脚本在共享主机中运行良好。

所以帮忙？？？

我必须对我的 vps 进行任何更改吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:51:42.190

`Location`根据[RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.30) ， HTTP标头必须是绝对路径。

# c++ - MFC ListView 更改项图像

> ID：14401355
> 
> 赞同：1
> 
> 时间：2013-01-18T14:46:56.073
> 
> 标签：c++, mfc

我已将项目添加到 ListControl，它们有图像。现在我想改变它们，我试图做 GetItem 和 SetItem，但我做不到。至少我不知道如何获得我想要的物品。如何更改 ListView 中项目的图像？

谢谢

附言

我已经设法解决了。这是解决方案：

这是如何循环

```
LVITEMW pitem;
ZeroMemory(&pitem, sizeof(pitem));

pitem.mask  = LVIF_TEXT | LVIF_IMAGE;
pitem.iItem = <SET INDEX OF YOUR ITEMS HERE, YOU CAN LOOP HERE>;
pitem.iSubItem = 0;
pitem.pszText = new wchar_t[256];
pitem.cchTextMax = 255;
mlist.GetItem(&pitem); 
```

选择一个项目后，您可以像这样更改它的图像：

```
pitem.iImage = newindex;
mlist.SetItem(&pitem); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:57:45.027

使用`CListCtrl::SetItem`是对的。您必须将`nMask`参数设置为**LVIF_IMAGE**并在参数的图像列表中提供图像的索引`iImage`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-06T08:33:55.757

第一篇文章中强调的解决方案对我不起作用。简要查看 Microsoft 文档后，SetItem 函数的签名是：

> BOOL SetItem(const LVITEM* pItem);

pItem 应该是指向**LVITEM**的指针，它是**const**，在这种情况下并非如此......

但是，下一个解决方案对我有用：

```
 // Let's say my CListCtrl is named m_listCtrl

  // Loop on items of CListCtrl
  for( int i = 0; i < m_listCtrl.GetItemCount(); i++ )
  {
     // And then you define a new image with the index iImage for the item i
     m_listCtrl.SetItem(i, 0, LVIF_IMAGE, NULL,
     iImage, 0, 0, 0);
  } 
```

# php - preg_match words shorter than 5 characters

> ID：14401361
> 
> 赞同：2
> 
> 时间：2013-01-18T14:47:13.697
> 
> 标签：php, regex, preg-match

Using PHP's preg_match() function, how would I go about matching words that are between 2 and 5 characters? In this case the letters are guaranteed to be uppercase A-Z and there is only one word in each $word variable.

It must reject a word of 6 characters:

```
preg_match("/[A-Z]{2,5}/", $word); 
```

...does not appear to work, presumably because a 6 character $word will match based on the first 2-5 characters.

This is a simplified version of my actual problem which cannot be solved with a strlen() test.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:00:07.800

Your post was not clear if you wanted the string to be exactly A-Z between 2 and 5 characters. This will match all words in a string between 2-5 characters:

```
preg_match('/\b[A-Z]{2,5}\b/', $string, $matches);
var_dump($matches); 
```

If you just the string to be exactly between 2 and 5 characters and only consisting of A-Z:

```
preg_match('/^[A-Z]{2,5}$/', $word); 
```

# mysql - Mysql连接两个表

> ID：14401362
> 
> 赞同：-1
> 
> 时间：2013-01-18T14:47:19.100
> 
> 标签：mysql, sql, join

我在两个不同的数据库中有两个表。

1.  `Kalix2`-->我有一张桌子`ph_Companies`
2.  `Asterisk`--> 这里我有一个叫做`cdr`.

在 ph_Companies 中，我有 CompanyName 列，公司名称采用这种格式。

```
 CompanyName
  AccuWebHosting 
```

在另一个表中，我有另一个列 clid，它以以下格式存储公司名称。

```
 clid
   "AccuWebHosting-EN" <6618083563> 
```

现在，我的问题是如何根据此列在这两个表之间进行连接。在这两个表中，这些是唯一具有一些共同数据的列。没有其他列具有类似的数据。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:52:56.627

```
SELECT  a.*, b.*
FROM    ph_Companies a
        INNER JOIN otherTable b
            ON b.clid LIKE CONCAT('%', a.CompanyName, '%') 
```

注意，如果您需要大型数据库，则此查询非常慢，因为它需要全表扫描。原因是您的架构设计“糟糕”。我会建议你像这样改变表格，

```
CREATE TABLE ph_Companies
(
    ID INT PRIMARY KEY,
    CompanyName VARCHAR(20),
    -- OTHER COLUMNS HERE
);

CREATE TABLE otherTable 
(
    ID INT AUTO_INCREMENT PRIMARY KEY,
    CompanyID INT,
    CompanyName VARCHAR(20),
    clid VARCHAR(50),
    -- OTHER COLUMNS HERE
    CONSTRAINT tb_fk FOREIGN KEY (CompanyID)
        REFERENCES ph_Companies (ID)
); 
```

你会有这样的查询，

```
SELECT  a.*, b.*
FROM    ph_Companies a
        INNER JOIN otherTable b
            ON a.ID = b.CompanyID 
```

这比上面的查询要好得多**。**

# perl - 无法在 perl 脚本中以更短的时间打印多条记录

> ID：14401365
> 
> 赞同：0
> 
> 时间：2013-01-18T14:47:31.183
> 
> 标签：perl

我有 perl 脚本，用于按日期显示信息。我根据日期获取数据并将其保存为具有字段分隔符“AaBbCc”的平面文件。

文件名是

```
18-01-13_REPORT
17-01-13_REPORT 
```

记录将是

```
111 AaBbCc 2222 AaBbCc 3333 AaBbCc etc(each two lines forms a single record) 
```

ETC

每个文件有超过 5000 条记录。使用我的代码，我可以成功打印记录。但是打印所有记录需要15分钟。现在我想优化代码以在更短的时间内打印这些记录。

请找到我的代码

```
open (FILE,"$filename/$val_REPORT_DATE") 
    or die "Could not read from $filename, program halting.";
local $/ = undef; #get the whole file in to picture
while(<FILE>) {
    chomp $_;
    @fields = split('AaBbCc', $_);
    for ( $i=0 ; $i<$count ; ) {
        print "<tr><td>" . $fields[$i+0] .
              "</td><td>". $fields[$i+1] .
              "</td><td>". $fields[$i+2] .
              "</td><td>". $fields[$i+3] .
              "</td><td>". $fields[$i+4] .
              "</td><td>". $fields[$i+5] .
              "</td><td>". $fields[$i+6] .
                           $fields[$i+7] ."</td></tr>";
        $i = $i + 8;
    }
} 
```

请帮我在短时间内打印所有记录以提高性能

提前致谢 ！！！维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:47:58.437

您的代码运行缓慢有几个原因：

1.  使用的文件格式是无脑的。
2.  对于您在 中查找的每个元素`@fields`，您执行一个加法。虽然这在低级语言中不会过于昂贵，但 Perls 标量相当昂贵。

    这是您的操作码树中执行数组元素查找的众多部分之一

    ```
    35               <2> aelem sK/2 ->36
    31                  <1> rv2av sKR/1 ->32        # get actual array
    30                      <#> gv[*fields] s ->31  # get global typeglob
    34                  <2> add[t63] sK/2 ->35      # create new scalar here
    -                       <1> ex-rv2sv sK/1 ->33  # get actual scalar
    32                         <#> gvsv[*i] s ->33  # get global typeglob
    33                      <$> const[IV 7] s ->34 
    ```

    将此与使用词法变量的元素查找进行比较，并且不添加：

    ```
    c        <2> aelem sK/2 ->d
    a           <0> padav[@fields:47,49] sR ->b     # beautiful
    b           <0> padsv[$i:48,49] s ->c           # beautiful 
    ```

3.  有一些最佳实践可以产生更高性能的代码，例如使用带有`my`. 全局变量的查找方式不同，而且速度要慢得多（见上文）。此外，没有必要一次啜饮整个文件。如果可以在恒定空间中完成，为什么还要使用那么多内存？

.

```
#!/usr/bin/perl
use strict; use warnings; # every good script starts with these
use 5.010;

open my $file, "<", $filename or die qq(Couldn't open "$filename": $!):
until (eof $file) {
  # read two lines at a time
  my $line1 = <$file>;
  my $line2 = <$file> // die qq(uneven number of lines in "$filename");
  ...
} 
```

现在我们可以填写两种可能的解决方案。这是强调数据流编程的一个（从下往上阅读）：

```
print
    "<tr>" . (
       join "" =>
       map  "<td>$_</td>",
       map  {chomp; split /AaBbCc/}
            ($line1, $line2)
    ) . "</tr>\n"
    ; 
```

相同的算法可以编码为

```
chomp($line1, $line2);
my $string = "";
$string .= "<td>$_</td>" for split(/AaBbCc/, $line1), split(/AaBbCc/, $line2);
print "<tr>$string</tr>\n"; 
```

我们还可以滥用特殊变量：

```
chomp($line1, $line2);
my @fields = split(/AaBbCc/, $line1), split(/AaBbCc/, $line2);
local $" = "</td><td>"; # list seperator
print "<tr><td>@fields</td></tr>\n"; 
```

或者，没有命名数组：

```
chomp($line1, $line2);
local $" = "</td><td>";
print "<tr><td>@{[split(/AaBbCc/, $line1), split(/AaBbCc/, $line2)]}</td></tr>\n"; 
```

我不做的是手动计算索引或展开循环。

现在虽然不能保证这些变体运行得更快，但您有一些材料可以试验。要*真正*优化您的代码，您应该使用[Devel::NYTProf](https://metacpan.org/module/Devel%3a%3aNYTProf)分析器。它会生成非常详细的逐行报告，显示每条语句的执行次数以及平均花费的时间。

* * *

假设您的所有字段都不包含选项卡，这是一个将您的数据转换为理智的选项卡分隔输出的脚本：

```
#!/usr/bin/perl
use strict; use warnings; use feature 'say';

# usage perl convert.pl filenames...

for my $filename (@ARGV) {
  open my $oldfile, "<", $filename       or die qq(Can't open "$filename": $!);
  open my $newfile, ">", "$filename.new" or die qq(Can't open "$filename.new": $!);
  until (eof $oldfile) {
     my $line1 = <$oldfile> // die qq(unexpected eof in "$filename");
     my $line2 = <$oldfile> // die qq(unexpected eof in "$filename": uneven number of lines);
     chomp( $line1, $line2 );
     my @fields = map {split /AaBbCc/, $_, 4} $line1, $line2;
     say $newfile join "\t" => @fields;
  }
  rename $filename       => "$filename.bak" or die qq(Can't back up "$filename");
  rename "$filename.new" => $filename       or die qq(Can't replace "$filename" with transformed data);
} 
```

# xaml - 在本地计算机（Windows 8 桌面）中运行时 Metro 应用程序的屏幕分辨率问题？

> ID：14401368
> 
> 赞同：0
> 
> 时间：2013-01-18T14:47:44.917
> 
> 标签：xaml, windows-8, microsoft-metro, winrt-xaml, screen-resolution

您好我正在开发一个 Windows 8 C#/Xaml Metro 应用程序。我采用了网格模板项目并根据我的设计要求进行了定制。

当我在 Windows 8 模拟器中测试应用程序时，它工作正常，但是当我使用 VS2012 本地机器选项在 Windows 8 桌面上运行应用程序时，我遇到了很多问题。

如果我使用 1366 * 768 的标准分辨率，它可以正常工作。如果我使用 1280 * 720 等低分辨率（低端分辨率），屏幕在很多情况下会缩小，这会导致很多问题，包括不规则和不一致的外观。

我的疑问是：

1.  据我所知，Metro 的独特功能是以相同的方式以不同的分辨率缩放/渲染，那为什么它不能正确实现呢？

2.  我是否遗漏了有关 Windows 8 Metro 屏幕分辨率的任何重要信息？

3.  如何使 Metro 应用程序以相同的方式在不同分辨率的桌面上工作并提供一致的外观？

请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:24:15.427

这篇 MSDN 文章是关于如何扩展您的应用程序的绝佳来源： [Scaling To different Screens](http://blogs.msdn.com/b/b8/archive/2012/03/21/scaling-to-different-screens.aspx)

文章中可能与您相关的要点：

*   应用程序的最低屏幕分辨率为 1024 x 768。您的上述分辨率 (1280 x 720) 不符合此最低要求。

*   对于网格图形 - 如果您提供建议的尺寸（100%、140% 和 180%），可能会有所帮助。例如，对于标准网格尺寸 (250 x 250)，您应该提供尺寸为 250 x 250 (100%)、350 x 350 (140%) 和 450 x 450 (180%) 的图像。您必须为您的应用程序使用两种命名方案（文件名方案或文件夹名称方案）之一来自动选择大小。例如，如果您在 xaml 中的图形名为“mygraphic.jpg”，那么您可以提供名为“mygraphic.scale-100.jpg”、“mygraphic.scale-140.jpg”和“mygraphic.scale”的缩放图像-180.jpg”。

*   由于您在指出错误方面不是很具体，因此很难提出其他建议。一定要看看文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:00:07.167

将您的内容面板包装在 Viewbox 中。它将缩放内容以填充可用空间。

# c# - 多周每天动态金额的图表生成

> ID：14401369
> 
> 赞同：1
> 
> 时间：2013-01-18T14:47:49.377
> 
> 标签：c#, winforms, visual-studio-2010

我想制作一个可以从 2 个给定日期（开始日期和结束日期）生成的图表。我在msdn上研究了一段时间的图表控件，想出了一个开始。但是我遇到了一些问题。

它是一个图表，表示一周中的每一天（可能数周）的某事计数。y 轴代表金额，x 轴代表周数。

所以这个系列是一周中的日子，从周一到周日。还有一个小例子来完成解释，让你知道我的意思：开始日期：1-1-2013 结束日期：1-18-2013

将从数据库中获取信息，每行返回一个日期。使用 DateTime 拆分日期以获取日期名称。

假设 2013 年 1 月 1 日的金额是 26，所以我们得到了 26 行，日期为 2013 年 1 月 1 日。我们使用 DateTime 来查看它是一个星期二，然后它应该在意甲星期二放在图表中。这适用于每天，当新的一周开始时，它不能在第一个星期二添加，而是在本周的星期二添加。

这是我目前拥有的代码（测试已删除）

```
 string ksubConnectionString = @"Data Source=xx.xx.x.x\xxxxxx;Initial Catalog=xxxxxxxxxxxx;
        User ID=xxxxxxx;Password=xxxxxxxxxxxx;";
        SqlConnection connection = new SqlConnection(ksubConnectionString);
        SqlCommand cmd = connection.CreateCommand();
        connection.Open();

        // Query for data graph
        cmd.CommandText = "SELECT closedDateTime FROM kasadmin.SDIncident WHERE closedDateTime < '" + textBox2.Text + " 23:59:59.000' AND closedDateTime > '" + textBox1.Text + " 00:00:00.001' ORDER BY closedDateTime ASC";
        richTextBox1.Text = "";
        SqlDataReader rdr = cmd.ExecuteReader();
        if (rdr.HasRows)
        {
            List<string> ArrayDates = new List<string>();

            for (int i = 0; rdr.Read(); i++)
            {
                ArrayDates.Add(rdr.GetDateTime(0).ToString());
            }
            string[] SplittedDate;
            string[] DatetimeSplit;
            int Jaar;
            int Maand;
            int Dag;
            for (int k = 0; k <ArrayDates.Count;k++ )
            {
                SplittedDate = ArrayDates[k].Split(' ');
                DatetimeSplit = SplittedDate[0].Split('-');
                Jaar = Convert.ToInt32(DatetimeSplit[2].ToString());
                Maand = Convert.ToInt32(DatetimeSplit[1].ToString());
                Dag = Convert.ToInt32(DatetimeSplit[0].ToString());
                DateTime dt = new DateTime(Jaar, Maand, Dag);

                if (dt.DayOfWeek.ToString() == "Monday")
                {
                    this.chart1.Series[0].Points.AddY(1);
                }
                if (dt.DayOfWeek.ToString() == "Tuesday")
                {
                    this.chart1.Series[1].Points.AddY(1);
                }
                if (dt.DayOfWeek.ToString() == "Wednesday")
                {
                    this.chart1.Series[2].Points.AddY(1);
                }
            }
        }
        else
        {
            richTextBox1.Text = "No rows found.";
        }

        rdr.Close();
        connection.Close(); 
```

# github - Google 在 Github Pages 上找不到分析代码段

> ID：14401370
> 
> 赞同：11
> 
> 时间：2013-01-18T14:47:50.833
> 
> 标签：github, google-analytics, github-pages

一段时间以来，我一直无法让 Google Analytics 在我生成的 Github 页面上正常工作。我使用了谷歌提供的默认代码段，但我认为正在寻找代码段的爬虫会在 url victorbjelkholm.github.com 中查找而不是 victorbjelkholm.github.com/2012-I-Bilder/。但是，我在 Google Analytics 配置文件中的默认网址是[http://victorbjelkholm.github.com/2012-I-Bilder/](http://victorbjelkholm.github.com/2012-I-Bilder/)，所以应该没问题。

有人在 Github Pages 上的网站上添加 Google Analytics 有类似的经历吗？

有没有人有什么可以解决这个问题的建议，所以我可以从我的网站上获得一些统计数据？

网址是[http://victorbjelkholm.github.com/2012-I-Bilder/](http://victorbjelkholm.github.com/2012-I-Bilder/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T17:17:00.930

我进入`Profile Settings`活动配置文件并更改`Default page`为`index.html`。现在可以正确找到我的跟踪代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:37:06.277

您是否在 UA-20806824-11 Google Analytics 配置文件中有任何过滤器可以过滤掉来自 Github 的数据？

我查看了您的网站：GA 代码看起来不错，并且我看到页面视图的跟踪数据被发送到分析服务器。

# jquery - 将枚举值传递到 jquery 网格过滤器

> ID：14401371
> 
> 赞同：0
> 
> 时间：2013-01-18T14:48:01.523
> 
> 标签：jquery, grails, enums, grid

这似乎很容易，但一直没能做到。

目前我有一个枚举：

```
enum LocationCodes{
  USA(3), Canada(4), Carribean(5), USPacific(6)
  NANPCodeGroup(int value) {this.value = value}
  private final int value
  public int value() {return value}
} 
```

我的 gsp 中有一个 jquery 网格，它有一个用于搜索的下拉菜单

```
 <!-- table tag will hold our grid -->
        <table id="customer_list" class="scroll jqTable" cellpadding="0" cellspacing="0"></table>
        <!-- pager will hold our paginator -->
        <div id="customer_list_pager" class="scroll" style="text-align:center;"></div>

<script type="text/javascript">
        /* when the page has finished loading.. execute the follow */
        $(document).ready(function () {
            jQuery("#customer_list").jqGrid({
              url:'jq_customer_list',
              datatype: "json",
              colNames:['customer','location','id'],
              colModel:[
                {name:'customer'},
                {name:'location',stype:'select', searchoptions:{value:':All;USA:USA;Canada:Canada;Carribean:Carribean;USPacific:USPacific;'}},
                {name:'id', hidden:true}
              ],
              rowNum:2,
              rowList:[1,2,3,4],
              pager: jQuery('#customer_list_pager'),
              viewrecords: true,
              gridview: true
            });
            $("#customer_list").jqGrid('filterToolbar',{autosearch:true});
        });
        </script> 
```

对于我想放入枚举值的位置。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:07:50.380

这应该给出由';'分隔的枚举列表

```
${LocationCodes?.values()?.collect{it.toString() + ':' + it.toString()}?.join(';')} 
```

所以你可以尝试这样的事情：

```
searchoptions: {
    value: ":All;${LocationCodes?.values()?.collect{it.toString() + ':' + it.toString()}?.join(';')}" 
} 
```

仔细检查引号的转义，但它应该可以工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:55:59.567

这行得通吗？（假设它是普惠制）

```
{ name:'location',
  stype:'select',
  searchoptions:{ value:'":All;${LocationCodes.values().collect { "$it:${it.value()}" }.join(';')};"'}}, 
```

那*应该*给你

```
':All;USA:3,Canada:4,Carribean:5,USPacific:6;' 
```

但我还没有测试过：-/

# c - y 组合器和 C 预处理器

> ID：14401377
> 
> 赞同：3
> 
> 时间：2013-01-18T14:48:22.427
> 
> 标签：c, functional-programming

据我所知，如果您想编写递归函数而不显式使用递归，则 y 组合器很有用。C 预处理器不支持递归。我们可以在 C 预处理器中实现 y 组合器以支持递归吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-29T03:24:54.383

事实上这是完全可能的，请看我的项目[CSP Git Repo](https://github.com/BlueFlo0d/CSP)，这是一个完全在 C 宏预处理器上实现的 LISP 解释器，当然你也可以在它上面实现 Y 组合器。

如果您对它感兴趣，希望您能和一些测试/示例。

这是最相关的部分。（来自 csp.h）它成功地实现了闭包和 lambda，这为实现定点组合器提供了支持。

```
#define EVAL_e(x) x
#define _be(y) y)
#define ZIP(x)   _n() (x,_be

#define _PAIR(x,y) _e( __PAIR(x,y))
#define __PAIR(x,y) _E COND((NULL SAFE_CDR(x)((SAFE_CAR(x) SAFE_CAR(y))))((T)((SAFE_CAR (x) SAFE_CAR (y)) _e(_PAIR2(_e SAFE_CDR(x),_e SAFE_CDR(y))))))

#define _PAIR2(x,y)  _E COND((NULL SAFE_CDR(x)((SAFE_CAR(x) SAFE_CAR(y))))((T)((SAFE_CAR (x) SAFE_CAR (y)) _e(_PAIR3(_e SAFE_CDR(x),_e SAFE_CDR(y))))))

#define _PAIR3(x,y)  _E COND((NULL SAFE_CDR(x)((SAFE_CAR(x) SAFE_CAR(y))))((T)((SAFE_CAR (x) SAFE_CAR (y)) _e(_PAIR4(_e SAFE_CDR(x),_e SAFE_CDR(y))))))

#define _PAIR4(x,y)  _E COND((NULL SAFE_CDR(x)((SAFE_CAR(x) SAFE_CAR(y))))((T)((SAFE_CAR (x) SAFE_CAR (y)) _e(DELAY_INT_54(__PAIR_R) ()(SAFE_CDR(x) SAFE_CDR(y))))))
#define __PAIR_R() _$pair
#define TEST_R() TEST
#define TEST(x) test
#define _PAIR_e(x) x
#define _$pair(x) _PAIR_e(_PAIR ZIP x)
#define PAIR_EVAL(...) PAIR_EVAL2(PAIR_EVAL2(PAIR_EVAL2(__VA_ARGS__)))
#define PAIR_EVAL2(...) PAIR_EVAL3(PAIR_EVAL3(PAIR_EVAL3(__VA_ARGS__)))
#define PAIR_EVAL3(...) PAIR_EVAL4(PAIR_EVAL4(PAIR_EVAL4(__VA_ARGS__)))
#define PAIR_EVAL4(...) PAIR_EVAL_E(PAIR_EVAL_E(PAIR_EVAL_E(__VA_ARGS__)))
#define PAIR_EVAL_E(...) __VA_ARGS__
#define $pair(x) PAIR_EVAL(_$pair(x))

#define $zipped_evlis_R() $zipped_evlis
#define EVLIS_e_R() EVLIS_e
#define EVLIS_e(x) x
#define _EVLIS_ZIP(...) _n() (__VA_ARGS__,_BE
#define _BE(...) __VA_ARGS__)
#define _EVLIS_R() _EVLIS
#define _EVLIS_E(...) __VA_ARGS__
#define _EVLIS_N(...)
#define _EVLIS_B _EVLIS_E (_EVLIS_N,_EVLIS_E(_EVLIS_N,_EVLIS_N))
#define ___EVLIS(a,b,k,...) k($zipped_eval((b),(a)) DELAY_INT_2(_EVLIS_R)()(a))
#define __EVLIS(a,b,...) ___EVLIS(a,b,__VA_ARGS__ _EVLIS_E)
#define _EVLIS_EVAL_E(...) __VA_ARGS__
#define _EVLIS_EVAL_5(...) _EVLIS_EVAL_E(_EVLIS_EVAL_E(_EVLIS_EVAL_E(__VA_ARGS__)))
#define _EVLIS_EVAL_4(...) _EVLIS_EVAL_5(_EVLIS_EVAL_5(_EVLIS_EVAL_5(__VA_ARGS__)))
#define _EVLIS_EVAL_3(...) _EVLIS_EVAL_4(_EVLIS_EVAL_4(_EVLIS_EVAL_4(__VA_ARGS__)))
#define _EVLIS_EVAL_2(...) _EVLIS_EVAL_3(_EVLIS_EVAL_3(_EVLIS_EVAL_3(__VA_ARGS__)))
#define _EVLIS_EVAL(...) _EVLIS_EVAL_2(_EVLIS_EVAL_2(_EVLIS_EVAL_2(__VA_ARGS__)))

#define _EVLIS(x) __EVLIS _EVLIS_ZIP(x)
#define $zipped_evlis(x,y) _EVLIS_EVAL(_EVLIS y x (_EVLIS_B))

#define $zipped_eval_R() $zipped_eval
#define $zipped_eval(e,a) /**sth irrelevant**/
        ($eq(SAFE_CAR SAFE_CAR e (lambda))\
        (DELAY_INT_26(EVAL_e_R)() DELAY_INT_23($zipped_eval_R)()(\
        EVAL_e(EVAL_e(EVAL_e(EVAL_e(SAFE_CAR SAFE_CDR SAFE_CDR SAFE_CAR e)))),\
        EVAL_e(APPEND DELAY_INT_13($pair_R)()(EVAL_e(EVAL_e(EVAL_e(SAFE_CAR SAFE_CDR SAFE_CAR e)))\
                                              (DELAY_INT_19($zipped_evlis_R)()(EVAL_e(_e EVAL_e(SAFE_CDR e)), a)))a)))\
        /**end of eval recursion**/

#define $pair_R() $pair
#define EVAL_e_R() EVAL_e
#define $eval_E(...) __VA_ARGS__
#define $eval_expand5(...) $eval_E($eval_E($eval_E(__VA_ARGS__)))
#define $eval_expand4(...) $eval_expand5($eval_expand5($eval_expand5(__VA_ARGS__)))
#define $eval_expand3(...) $eval_expand4($eval_expand4($eval_expand4(__VA_ARGS__)))
#define $eval_expand2(...) $eval_expand3($eval_expand3($eval_expand3(__VA_ARGS__)))
#define $eval_expand(...) $eval_expand2($eval_expand2($eval_expand2(__VA_ARGS__)))
#define $zeval(x,y) $eval_expand($zipped_eval(x,y)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T21:53:56.283

Y 组合器是一个高阶函数，它需要语言中的高阶函数支持来实现显式递归替换。因此，对于特定任务，这可以用 Scheme、SML 和其他功能语言完成。

我们稍后再谈 C 预处理器，但 C 本身呢？可以在 C 中使用高阶函数，因为我们可以将函数引用作为函数参数传递并返回它们以模拟高阶函数。然而，语言中缺乏对闭包的支持不允许实现 Y 组合器。

由于预处理器比 C 更具限制性，因此无法实现基于 lambda 演算概念的 Y 组合器。Y组合子的应用只能在完全支持高阶函数的函数式编程语言中实现。

C 预处理器非常简单，因为它只在文本中进行字符串替换。我不会尝试将 lambda 演算和函数式编程中的任何概念应用于它。

# c# - 从 PHP 调用 C# Web 服务的最佳方式

> ID：14401378
> 
> 赞同：1
> 
> 时间：2013-01-18T14:48:27.727
> 
> 标签：c#, php, json, web-services, soap

我在 PHP 中有表单，我应该从表单生成一些数据并将其发送到 c# web 服务。从 PHP 网站调用我的 c# web 服务方法的最佳方法是什么？这是我的 C# 网络服务

```
public string Methode1(string Par1, int Par2, List<String> par3) 
```

我的列表 Par3 应该包含几千个元素。我应该使用 JSON 还是应该在 PHP 中创建一个数组并通过 SOAP 调用将其发送到 C#？我应该如何创建请求？

如果连接断开，JSON 或 SOAP 中的请求会发生什么情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:51:31.403

两者都会发生同样的情况。请求只是一个 HTTP 请求。响应的*内容*包含 SOAP 消息或任何其他内容，可能是 JSON。如果您收到半条消息，您可能无法解析它，无论它包含 JSON 还是 SOAP XML 消息。

就我个人而言，我不是 SOAP 的忠实拥护者，我宁愿选择基于 JSON 的 REST 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:55:56.480

我最近使用 PHP 来调用 C# ServiceStack 服务。它是这样的：

```
$content = json_encode($yourServiceMethodsArgumentShapeInstance);

$curl = curl_init($endpointUrl);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER, array("Content-type: application/json"));
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

$jsonResponse = curl_exec($curl);

$status = curl_getinfo($curl, CURLINFO_HTTP_CODE);
curl_close($curl); 
```

# java - Android Facebook sdk Session.OpenRequest(myFragment) 未定义？

> ID：14401379
> 
> 赞同：0
> 
> 时间：2013-01-18T14:48:28.257
> 
> 标签：java, android, facebook, session, sdk

由于某种原因，我看不到代码行：

```
session = new Session.OpenRequest(this).setCallBack(statusCallBack) 
```

它给了我一个`Session.OpenRequest(myFragment)`未定义的错误。有谁知道这是为什么以及我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:25:23.953

发现我做错了什么。它必须是来自支持库的片段。我正在扩展常规片段类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:51:58.710

显然，`Session.OpenRequest(Fragment fragment)`构造函数应该工作。假设您已在项目中正确添加 Facebook SDK，请在您的类中组织导入以导入`Session.OpenRequest`该类。此构造函数似乎对您的代码不可见。

如果您使用的是 Eclipse IDE，请按`Ctrl`++组织`Shift`导入`O`。

# asp.net-mvc - asp.net mvc razor - 如何突破 C#

> ID：14401388
> 
> 赞同：10
> 
> 时间：2013-01-18T14:48:52.483
> 
> 标签：asp.net-mvc, razor

如果我正在 Razor 中处理视图，并且我当前处于代码块中并且想要输出某些内容，我该怎么做？为了说明我的问题，我在`echo`下面使用 PHP：

```
<p>
  @if (Model.NumberOfWidgets > 100)
  {
    echo(Model.NumberOfWidgets);
  }
  else
  {
    echo("There are loads of widgets.");
  }
</p> 
```

所以我使用`echo`了我想告诉 Razor 我不再使用 C# 的地方，我的意思是这应该被写入输出。我该怎么做呢？

编辑：我尝试了 Response.Write，但它是在页面顶部的视图标记之前编写的！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T14:52:02.750

```
<p>
  @if (Model.NumberOfWidgets > 100)
  {
    @Html.DisplayFor(m => m.NumberOfWidgets)
  }
  else
  {
    @:There are loads of widgets  //or <text>Thera are loads of widgets</text>
  }
</p> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T14:52:59.753

以此开始你的行将`@:`告诉 Razor，它实际上是你想要显示的输出，而不是 C# 代码。

```
<p>
  @if (Model.NumberOfWidgets > 100)
  {
    @: @Model.NumberOfWidgets
  }
  else
  {
    @: There are loads of widgets.
  }
</p> 
```

# service - Installshield 在次要升级期间未停止服务

> ID：14401392
> 
> 赞同：3
> 
> 时间：2013-01-18T14:48:58.717
> 
> 标签：service, installshield, installshield-2008

在我的安装程序中，我有一个安装 NT 服务的组件。我有一个问题，在小升级期间服务没有停止。我观察到 installshield 在升级过程中生成的日志，它报告它正在执行 StopServices 操作，它的返回码是 1。我还启动了[进程黑客](http://processhacker.sourceforge.net/)来记录服务启动/停止事件，但在升级过程中服务从未停止过。我还验证了在卸载过程中服务停止然后删除。知道为什么会这样吗？

我正在使用 installshield 2008，但任何与 installshield 相关的答案都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:09:32.903

最终我无法克服这个问题。花了几天时间试图弄清楚到底发生了什么，但无法弄清楚为什么服务在小升级期间既没有停止也没有启动。我被迫编写执行此操作并用于`sc.exe`它们的自定义操作。这不是我被迫通过自定义操作修复的 installshield 中第一个无法解决的问题。希望这个答案可以为某人节省几天时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-07T14:31:17.797

它可以通过安装脚本和执行它的自定义操作来完成。

停止/启动服务的示例（我在 IS2016 中使用过）：

```
#include "ifx.h"

//Function to stop the service
export prototype stopService(HWND);
function stopService(hMSI)
begin
    ServiceStopService ( "my service name" );
end;

//Function to start the service
export prototype startService(HWND);
function startService(hMSI)
begin
    ServiceStartService ( "my service name" ,"");
end; 
```

为了仅在次要升级期间运行自定义操作，请将其条件设置为：

```
REINSTALLMODE=vomus 
```

# php - 修改此 URL 验证正则表达式以接受 .com 部分之后的内容

> ID：14401393
> 
> 赞同：0
> 
> 时间：2013-01-18T14:49:01.177
> 
> 标签：php, regex

多年来，我使用这个正则表达式来验证 url，它做得很好。问题是，它不会在`.com`零件之后验证。它只会验证`http://www.domain.com`. 再多的话，它会抛出一个错误。

```
function theUrl($rUrl)
    {
        if (preg_match('/^((http|https):\/{2})([w]{3})([\.]{1})([a-zA-Z0-9-]+)([\.]{1})((a[cdefgilmnoqrstuwxz]|aero|arpa)|(b[abdefghijmnorstvwyz]|biz)|(c[acdfghiklmnorsuvxyz]|cat|co.in|com|coop)|d[ejkmoz]|(e[ceghrstu]|edu)|f[ijkmor]|(g[abdefghilmnpqrstuwy]|gov)|h[kmnrtu]|(i[delmnoqrst]|info|int)|(j[emop]|jobs)|k[eghimnprwyz]|l[abcikrstuvy]|(m[acdghklmnopqrstuvwxyz]|mil|mobi|museum)|(n[acefgilopruz]|name|net)|(om|org)|(p[aefghklmnrstwy]|pro)|qa|r[eouw]|s[abcdeghijklmnortvyz]|(t[cdfghjklmnoprtvwz]|travel)|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw])$/i', $rUrl))
        {
            return true;
        }       
    } 
```

你能帮我解决后面的部分`.com`应该如何获得最佳效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:01:40.110

我鼓励您使用原生 PHP 函数之一，而不是自定义正则表达式，例如：

*   [`parse_url()`](http://php.net/manual/en/function.parse-url.php)
*   [`filter_var()`](http://php.net/manual/en/function.filter-var.php)使用`FILTER_VALIDATE_URL`类型。

# postgresql - ST_Covers：地理实施不工作，几何实施耗时太长

> ID：14401395
> 
> 赞同：2
> 
> 时间：2013-01-18T14:49:17.447
> 
> 标签：postgresql, postgis

我有一个查询：（此查询使用 ST_Covers 函数的地理实现）

```
SELECT ST_Covers(ST_GeoGraphyFromText('MULTIPOLYGON(((179 -89,179 89,-179 89,-179 -89,179 -89)))'),ST_GeographyFromText('POINT(20 30)')); 
```

当我运行此查询时，它**应该返回 true，但它返回 false。**我不知道 PostGIS（或此查询）有什么问题

当我用几何改变地理实现时，**将查询重新排列如下：**

```
SELECT ST_Covers(ST_ASTEXT(ST_GeoGraphyFromText('MULTIPOLYGON(((179 -89,179 89,-179 89,-179 -89,179 -89)))')),text('POINT(20 30)')); 
```

**它可以正常工作，返回true：**

我可以使用下面的查询来满足，但**问题是当数据库太大时，它需要太多时间**

请有人告诉我

如何使查询 1 正常工作（按预期返回 true），或

如何使查询 2 在大表中快速工作

（请不要建议我应该删除 *ST_GeoGraphyFromText('MULTIPOLYGON(((179 -89,179 89,-179 89,-179 -89,179 -89)* ，因为它只表示将被来自列中的数据替换的地理数据桌子 ）

查询 1 不起作用的其他值是 (5 5) (10 10) (-10 -10) 等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T23:16:55.167

第一个查询失败，因为您使用的`geography`类型宽度 >180°。如果它是更真实的东西，例如`'MULTIPOLYGON(((100 0,100 50,0 50,0 0,100 0)))'`，它将返回 TRUE。

没有直接的方法可以找到 MultiPolygon 地理类型的外环的最大直径，但是您可以尝试通过以下方式来寻找这些特殊情况：

```
SELECT ST_XMax(geog::geometry) - ST_XMin(geog::geometry) AS width,
       ST_YMax(geog::geometry) - ST_YMin(geog::geometry) AS height
FROM polygons 
```

检查大于 180 的部分，并查看每个部分是否也大于 180。如果是，则应将这些视为无效地理。

* * *

第二个查询返回 TRUE 的唯一原因是因为 ST_AsText 转换为 WKT，然后将其重新解释回 WKB 作为`geometry`类型（并隐式调用`ST_Covers(geometry, geometry)`，而不是`ST_Covers(geography, geography)`）。这个查询很慢，因为它从 WKB 转换为 WKT 再到 WKB，在转换之间可能会丢失精度。一个更快的版本是使用 将地理列转换为几何`::geometry`，例如：

```
SELECT ST_Covers(geog::geometry, ST_SetSRID(ST_MakePoint(20, 30), 4326))
FROM polygons 
```

几何类型对 ST_Covers 使用简单的“平地”笛卡尔逻辑，这就是为什么您会看到 TRUE 符合您的预期。地理类型使用不同的“圆形地球”逻辑，该逻辑使用更复杂的球形逻辑，但很容易看出您是否有手边的地球仪。

# c - 在 C 中：传递和打印函数的变量参数

> ID：14401397
> 
> 赞同：1
> 
> 时间：2013-01-18T14:49:30.650
> 
> 标签：c

我正在尝试编写一个使用具有可变数量参数的函数的程序。另一个任务是分别打印每个函数调用的所有参数。代码如下：-

```
#include<stdio.h>
#include<stdarg.h>
#include<string.h>
int mul(int x,...);
int main()
{
int a=1,b=2,c=3,d=4,x;
printf("The product of %d is :%d\n",a,mul(1,a));
printf("The product of %d, %d is :%d\n",a,b,mul(2,a,b));
printf("The product of %d, %d, %d is :%d\n",a,b,c,mul(3,a,b,c));
printf("The product of %d, %d, %d, %d is :%d\n",a,b,c,d,mul(4,a,b,c,d));
return 0;
}
int mul(int x,...)
{
    int i,prod=1;
    va_list arglist;
    va_start(arglist, x);
    for(i=0;i<x;i++)
    {   
        prod*=va_arg(arglist,int);
    }
    printf("\n");
    for(i=0;i<x;i++)
    {   
        printf("The argument is %d\n",va_arg(arglist,int));
    }
    va_end(arglist);
    return prod;
} 
```

该程序的输出如下：-

![上述程序的输出](../Images/47281412dd6e256c122aa79544d59952.png)

另一段代码是：-

```
#include<stdio.h>
#include<stdarg.h>
#include<string.h>
int mul(int x,...);
int main()
{
int a=1,b=2,c=3,d=4,x;
printf("The product of %d is :%d\n",a,mul(1,a));
printf("The product of %d, %d is :%d\n",a,b,mul(2,a,b));
printf("The product of %d, %d, %d is :%d\n",a,b,c,mul(3,a,b,c));
printf("The product of %d, %d, %d, %d is :%d\n",a,b,c,d,mul(4,a,b,c,d));
return 0;
}
int mul(int x,...)
{
    int i,prod=1;
    va_list arglist;
    va_start(arglist, x);
    for(i=0;i<x;i++)
    {   
        prod*=va_arg(arglist,int);
    }
    printf("\n");
    va_end(arglist);
    va_start(arglist,x);
    for(i=0;i<x;i++)
    {   
        printf("The argument is %d\n",va_arg(arglist,int));
    }
    va_end(arglist);
    return prod;
} 
```

输出如下：-

![第二个输出](../Images/e4e81445cf801f10d49087e6f7b811ee.png)

为什么会有这种差异？有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:51:55.100

在第一个示例中，您缺少两行：

```
va_end(arglist);
va_start(arglist,x); 
```

这意味着在进行乘法之后，您正在读取参数末尾的内容。显示的值是堆栈上发生的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:18:30.160

va_arg(va_list ap, type) 检索参数列表中的下一个参数。因此，在第一个代码中，您在一个循环之后使用参数。您可以使用以下代码代替第二个代码，该代码打印参数并在单个循环中维护乘法

```
int mul(int x,...)

{
    int i,m,prod=1;
    enter code here
    va_list arglist;
    enter code here
    va_start(arglist, x);
    for(i=0;i<x;i++)
    {   
        m=va_arg(arglist,int);
        prod*=m
        printf("The argument is %d\n",m);
    }
    printf("\n");

    return prod;
} 
```

# python - 如何使用 Django 清除 cookie

> ID：14401398
> 
> 赞同：29
> 
> 时间：2013-01-18T14:49:33.593
> 
> 标签：python, django, cookies, web, session-cookies

我正在尝试为网站开发登录页面。我正在使用 Django 1.4.2。我将正确登录到 cookie 的用户使用`set_cookie`. `clear_cookie`但我在 Django 的文档中没有找到。如何清除 cookie 以使用户注销？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-09-03T12:38:15.723

设置cookies：

```
 def login(request):
        response = HttpResponseRedirect('/url/to_your_home_page')
        response.set_cookie('cookie_name1', 'cookie_name1_value')
        response.set_cookie('cookie_name2', 'cookie_name2_value')
        return response 
```

删除 cookie：

```
 def logout(request):
        response = HttpResponseRedirect('/url/to_your_login')
        response.delete_cookie('cookie_name1')
        response.delete_cookie('cookie_name2')
        return response 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:57:36.213

您可以简单地删除您存储在 cookie 中的任何内容 - 这样，即使 cookie 存在，它也不再包含会话跟踪所需的任何信息，并且用户需要再次授权。

（另外，这似乎是[Django logout(redirect to home page) .. Delete cookie? 的副本？](https://stackoverflow.com/questions/1275357/django-logoutredirect-to-home-page-delete-cookie)）

# python - 在python中使用手动构造函数注入传递依赖项的依赖项

> ID：14401402
> 
> 赞同：0
> 
> 时间：2013-01-18T14:49:51.940
> 
> 标签：python, dependency-injection, inversion-of-control, manual

# 我的情况

我目前正在写一个 python 项目，我想用它来学习更多关于软件架构的知识。我已经阅读了一些文本并观看了一些关于依赖注入的讨论，并学会了喜欢构造函数注入如何清晰地显示对象的依赖关系。但是，我有点挣扎如何将依赖项传递给对象。我决定不使用 DI 框架，因为：

1.  我没有足够的 DI 知识来指定我的要求，因此无法选择框架。
2.  我想让代码没有更多“神奇”的东西，因为我觉得引入一个很少使用的框架会大大降低可读性。（要阅读的更多代码仅使用了一小部分）。

因此，我使用自定义工厂函数来创建对象并显式传递它们的依赖项：

```
 # Business and Data Objects
class Foo:
    def __init__(self,bar):
        self.bar = bar
    def do_stuff(self):
        print(self.bar)

class Bar:
    def __init__(self,prefix):
        self.prefix = prefix
    def __str__(self):
        return str(self.prefix)+"Hello"

# Wiring up dependencies
def create_bar():
    return Bar("Bar says: ")

def create_foo():
    return Foo(create_bar())

# Starting the application
f = create_foo()
f.do_stuff() 
```

或者，如果`Foo`必须自己创建多个`Bar`s，它会通过其构造函数获取创建者函数：

```
# Business and Data Objects
class Foo:
    def __init__(self,create_bar):
        self.create_bar = create_bar
    def do_stuff(self,times):
        for _ in range(times):
            bar = self.create_bar()
            print(bar)

class Bar:
    def __init__(self,greeting):
        self.greeting = greeting
    def __str__(self):
        return self.greeting

# Wiring up dependencies
def create_bar():
    return Bar("Hello World")

def create_foo():
    return Foo(create_bar)

# Starting the application
f = create_foo()
f.do_stuff(3) 
```

虽然我很想听听关于代码的改进建议，但这并不是这篇文章的重点。但是，我觉得需要这个介绍才能理解

# 我的问题

`Bar`虽然上面对我来说看起来相当清晰、可读和易于理解，但当每个对象的上下文中要求前缀依赖项相同`Foo`并因此与`Foo`对象生命周期耦合时，我遇到了一个问题。作为一个例子，考虑一个实现计数器的前缀（有关实现细节，请参见下面的代码示例）。我有两个想法如何实现这一点，但是，它们对我来说似乎都不完美：

## 1) 通过 Foo 传递前缀

第一个想法是添加一个构造函数参数，`Foo`并使其在每个`Foo`实例中存储前缀。

明显的缺点是，它混淆了`Foo`. 它控制业务逻辑并为`Bar`. 一旦`Bar`不再需要依赖，`Foo`必须修改。对我来说似乎是不行的。因为我真的不认为这应该是一个解决方案，所以我没有在这里发布代码，而是[在 pastebin](http://pastebin.com/DMWM3pSD)上为非常感兴趣的读者提供了它；）

## 2) 使用带状态的函数

不是将`Prefix`对象放置在`Foo`这种方法中，而是尝试将其封装在`create_foo`函数中。`Prefix`通过为每个对象创建一个`Foo`并在无名函数中使用 引用它`lambda`，我将细节（又名存在前缀对象）远离`Foo`并保留在我的布线逻辑中。当然，命名函数也可以工作（但 lambda 更短）。

```
# Business and Data Objects
class Foo:
    def __init__(self,create_bar):
        self.create_bar = create_bar
    def do_stuff(self,times):
        for _ in range(times):
            bar = self.create_bar()
            print(bar)

class Bar:
    def __init__(self,prefix):
        self.prefix = prefix
    def __str__(self):
        return str(self.prefix)+"Hello"

class Prefix:
    def __init__(self,name):
        self.name = name
        self.count = 0
    def __str__(self):
        self.count +=1
        return self.name+" "+str(self.count)+": "

# Wiring up dependencies
def create_bar(prefix):
    return Bar(prefix)

def create_prefix(name):
    return Prefix(name)

def create_foo(name):
    prefix = create_prefix(name)
    return Foo(lambda : create_bar(prefix))

# Starting the application
f1 = create_foo("foo1")
f2 = create_foo("foo2")
f1.do_stuff(3)
f2.do_stuff(2)
f1.do_stuff(2) 
```

这种方法对我来说似乎更有用。但是，我不确定常见的做法，因此担心不建议在函数内部使用状态。来自 java/C++ 背景，我希望一个函数依赖于它的参数、它的类成员（如果它是一个方法）或一些全局状态。因此，不使用全局状态的无参数函数每次调用时都必须返回完全相同的值。这不是这里的情况。一旦返回的对象被修改（这意味着`counter`in`prefix`已增加），该函数返回一个对象，该对象的状态与第一次返回时的状态不同。这个假设是否只是由于我在 python 方面的有限经验引起的，我是否必须改变我的心态，即不要考虑函数而是考虑*可调用*的东西？*或者为函数提供状态是对 lambda 的无意滥用？*

 *## 3) 使用可调用类

为了克服我对有状态函数的疑虑，我可以使用可调用类，其中`create_foo`方法 2 的函数将被替换为：

```
class BarCreator:
    def __init__(self, prefix):
        self.prefix = prefix
    def __call__(self):
        return create_bar(self.prefix)

def create_foo(name):
    return Foo(BarCreator(create_prefix(name))) 
```

虽然这对我来说似乎是一个可用的解决方案，但它太冗长了。

## 概括

我不确定如何处理这种情况。虽然我更喜欢 2 号，但我仍然有疑问。此外，我仍然希望有人提出更优雅的方式。

请发表评论，如果您认为任何内容过于模糊或可能被误解。我会在我的能力允许的范围内改进这个问题:) 所有示例都应该在 python2.7 和 python3 下运行 - 如果您遇到任何问题，请在评论中报告它们，我会尝试修复我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:37:43.930

如果您想注入一个可调用对象但不希望它具有复杂的设置——如果像在你的示例中那样，它实际上只是绑定到单个输入值——你可以尝试使用[functools.partial](http://docs.python.org/2/library/functools.html)来提供一个函数<> 值对：

```
def factory_function(arg):
    #processing here
    return configurted_object_base_on_arg

class Consumer(object):
   def __init__(self, injection):
      self._injected = injection

   def use_injected_value():
      print self._injected()

injectable = functools.partial(factory_function, 'this is the configuration argument')
example = Consumer(injectable)
example.use_injected_value() # should return the result of your factory function and argument 
```

顺便说一句，如果您正在创建像选项 3 一样的依赖注入设置，您可能希望将有关如何进行配置的知识放入工厂类中，而不是像您在这里所做的那样内联。这样，如果您想在策略之间进行选择，您可以更换工厂。它在功能上并没有太大的不同（除非创建比这个例子更复杂并且涉及持久状态）但是如果代码看起来像这样，它会更加灵活

```
factory = FooBarFactory()
bar1 = factory.create_bar()
alt_factory = FooBlahFactory(extra_info)
bar2 = alt_factory.create_bar() 
```*

# c++ - Qt/Win 创建应用快捷方式

> ID：14401404
> 
> 赞同：5
> 
> 时间：2013-01-18T14:49:53.460
> 
> 标签：c++, windows, qt, lnk

在 Qt 中，我知道您可以使用以下方法创建快捷方式（lnk）

```
QFile::link("myapp.exe", "myapp.exe.lnk"); 
```

这工作正常，但我想创建一个在目标路径中也有一些参数的 lnk。无论如何要在Qt中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:07:36.727

[我在Qt-interest 邮件列表](http://lists.qt.nokia.com/public/qt-interest/2010-January/017337.html)中找到了来自 Constantin Makshin 的以下答案：

> QFile::link() 函数创建符号链接（就
> 类 Unix 系统而言），Windows 快捷方式只是一个或多或少相等的
> 解决方案。而且由于符号链接不支持命令行参数
> （它们只是“具有不同名称的相同文件”），QFile::link()
> 也不支持它们。
> 
> 因此，您必须依靠本机 API 来创建此类快捷方式/链接。

除了使用本机 API 之外，您还可以创建一个`.bat`文件并将命令行调用存储在其中。

# php - 在 PHP 5.4.9 (x64) 上安装 libssh2-php

> ID：14401407
> 
> 赞同：1
> 
> 时间：2013-01-18T14:50:07.820
> 
> 标签：php, linux, ubuntu-12.04, apt, libssh2

我对 php 5.4.9 的更新有疑问（我使用 ppa "ppa:ondrej/php5" 安装它）

现在我遇到了无法安装 libssh2-php 的问题（这是我的项目所必需的）

我找到了一些 .deb 文件，但它仅适用于 32 位系统。

因此，当我尝试安装 libssh2-php 时，我与“libssh2-php:i386”发生冲突，并且我有以下依赖消息：

```
ucf:i386 libc6:i386 (>= 2.4) libssh2-1:i386 (>= 1.0) and phpapi-20090626+lfs:i386 
```

**系统：** Ubuntu Server 12.04 LTS x64 | PHP 5.4.9

我在运行“php -v”时也收到了警告

> PHP 警告：PHP 启动：无法加载动态库 '/usr/lib/php5/20100525/ssh2.so' - /usr/lib/php5/20100525/ssh2.so：无法打开共享对象文件：没有这样的文件或目录在第 0 行的未知中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:06:31.223

问题是/是 libssh2 不适用于 PHP5.4.x 和 x64 系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:17:08.543

我在尝试将 ondrej 的 ppa 用于 ubuntu 10.04 LTS 时遇到了同样的问题。似乎他没有包含 sssh 扩展。

Apt-get 尝试从与当前安装的版本发生冲突（取决于 phpapi-20090626+lfs）的默认包安装版本，不是吗？

只有我的备份 php cli 脚本需要此扩展程序才能运行。在尝试解决依赖但没有成功后，我切换到了 shell_exec('ssh ...@...') 解决方案作为解决方法。

我只是一个具有高级管理知识的开发人员，没有 apt-get 或 linux 打包管理专业人员。也许有其他解决方案可以通过打包管理来解决这个问题，或者可能从源代码构建所需的版本？

编辑：会有另一个更好的解决方案 :-) 你可以使用 pecl 安装/构建扩展，这是我所做的：

```
$ sudo pecl install ssh2
Failed to download pecl/ssh2 within preferred state "stable", latest release is version 0.12, stability "beta", use "channel://pecl.php.net/ssh2-0.12" to install
install failed

$ sudo pecl install channel://pecl.php.net/ssh2-0.12
downloading ssh2-0.12.tgz ...
Starting to download ssh2-0.12.tgz (26,223 bytes)
[...]
Build process completed successfully
Installing '/usr/lib/php5/20100525+lfs/ssh2.so'
install ok: channel://pecl.php.net/ssh2-0.12
configuration option "php_ini" is not set to php.ini location
You should add "extension=ssh2.so" to php.ini 
```

之后我将 extension=/usr/lib/php5/20100525+lfs/ssh2.so 添加到 php 配置中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T20:37:45.873

做就是了：

```
sudo aptitude purge php5-suhosin 
```

这里有详细描述：[bugs.debian.org](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=666911)

# .net - 空引用异常并非所有路径都在退出函数中返回值

> ID：14401412
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:50:27.273
> 
> 标签：.net, vb.net

在下面的代码中，它下面有`Exit Function`一条绿线，上面写着

空引用异常并非所有路径都返回值。

我如何退出并在退出时让它返回一些东西？

你能帮忙吗？

```
 Protected Sub Page_Load()

        test()

    End Sub

    Function test() As String

        Exit Function

        Return ""

    End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:51:58.797

只需删除该`Exit Function`行并返回您想要的。或者你想完全退出程序？它们是两种不同的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:03:55.337

您通常只使用[`Return`](http://msdn.microsoft.com/en-us/library/2e34641s%28v=vs.80%29.aspx)退出 a `Function`or`Sub`并从 a 返回值`Function`。

```
Function MyMethod() As String
    Return "Some Stuff"
End Function 
```

如果你想用来[`Exit`](http://msdn.microsoft.com/en-us/library/t2at9t47%28v=vs.80%29.aspx)从 a 返回一个值`Function`，你必须给你的“赋值”一个值`Function`（实际上，编译器将在内部创建一个将返回的变量）：

```
Function MyMethod() As String
    MyMethod = "Some Stuff"

    Exit Function
End Function 
```

但是，您应该只使用`Return`. 该`Exit`声明只是旧的、已弃用的 VB6 遗产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:02:55.887

调用`Return`也会退出函数。你不需要调用（实际上，你不应该调用）退出函数。此外，如果要使用函数，则需要将函数的结果分配给变量。

```
Protected Sub Page_Load()

    Dim result As String = test()
    'Do something with result

End Sub

Function test() As String

    Return "test string"

End Function 
```

# algorithm - 二叉树x轴上的最大投影

> ID：14401415
> 
> 赞同：3
> 
> 时间：2013-01-18T14:50:37.850
> 
> 标签：algorithm, data-structures, language-agnostic, binary-tree

给定坐标平面中的二叉树，其根坐标为 (x,y) 。我们需要找到这棵树在 x 轴上的最大投影。也就是说，基本上我们需要找到这棵树的最大宽度。树也可以倾斜。

例子 ：

```
 1
   / \
  2   3
 /   / \
4   5   6 
```

`Width = 5`

```
 1
   / \
  2   3
 /  
4 
```

`Width = 4`

```
 1
   / 
  2  
 /   
4 
```

`Width = 3`

我的逻辑是基本上找到最左边的节点和最右边的节点并减去它们的 x 坐标。从根到左子树`x`变为`x-1`y 变为`y+1`并且在右子树`x`变为`x+1`。找到这两个坐标 xLeft 和 xRight 后，我​​们可以找到最大宽度。但是我在编码时遇到了麻烦。

谁能告诉我该怎么做？这不是一个家庭作业问题，而是我在某处读到的一个编程难题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:06:26.017

这是一个水平顺序遍历问题。当您按级别顺序遍历树时，跟踪最大级别的宽度。完成后，该级别的最左侧节点和最右侧节点将为您提供您正在寻找的最终投影。

编辑：

mbeckish：上述解决方案假设问题是关于最大横截面的。但如果不是这种情况，级别顺序仍然有效。除了代码必须在遍历期间`minX`和期间进行跟踪。将跟踪最左边的节点并跟踪最右边的节点。那么答案将是。`maxX``minX``maxX``maxX-minX+1`

[该站点](http://www.geekviewpoint.com/java/bst/levelorder)有许多文档齐全的 bst 遍历代码，您可以对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:15:29.070

您可以通过执行标准树遍历算法来解决此问题，同时保持当前节点的 x 坐标。每当你向左走，你就减少 x，每当你向右走，你就减少 x。这显示在这里：

```
void ExtremalNodes(Node* curr, int x, int& maxX, int& minX) {
    if (curr == nullptr) return;
    maxX = std::max(x, maxX);
    minX = std::min(x, minY);
    ExtremalNodes(curr->left, x - 1, maxX, minX);
    ExtremalNodes(curr->right, x + 1, maxX, minX);
}
int TreeProjection(Node* root) {
    if (root == nullptr) return 0;

    int maxX = 0;
    int minX = 0;
    ExtremalNodes(root, 0, maxX, minX);
    return maxX - minX + 1;
} 
```

希望这可以帮助！

# android - 如何更改编辑文本字段中的开始位置

> ID：14401417
> 
> 赞同：0
> 
> 时间：2013-01-18T14:50:38.240
> 
> 标签：android, android-layout

我的登录屏幕锁是这样的

[http://pbrd.co/UVekFg](http://pbrd.co/UVekFg)

用那个代码

```
 <TextView
        android:id="@+id/login_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="20dp"
        android:text="@string/login_label_text" />

    <EditText
        android:id="@+id/username"
        android:layout_width="@dimen/textfield_width"
        android:layout_height="@dimen/textfield_height"
        android:background="@drawable/textfeld"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/login_password_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/password" />

    <EditText
        android:id="@+id/login_password"
        android:layout_width="@dimen/textfield_width"
        android:layout_height="@dimen/textfield_height"
        android:background="@drawable/textfeld"
        android:inputType="textPassword" /> 
```

实际上，第一个字符直接从edittextfield 的左边框开始。有没有一个选项可以让我的文本框的第一个字符和左边框之间有一点填充？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:27:07.907

你会想要设置`android:padding`

但是，如果您打算在`EditText`整个应用程序中使用此自定义，您可能需要创建一个`style`并将所有自定义部分存储在其中。

因此，例如在您的 中`styles.xml`，您将拥有：

```
<style name="Custom.EditText.Style" parent="@android:style/Widget.EditText">
    <item name="android:background">@drawable/textfeld</item>
    <item name="android:paddingLeft">6dp</item>
    <item name="android:paddingTop">4dp</item>
    <item name="android:paddingBottom">4dp</item>
</style> 
```

然后在您的 xml 布局中，您只需要：

```
<EditText 
   ...
   style="@style/Custom.EditText.Style"
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:03:01.697

`android:padding = 5dp`您可能应该通过在 EditText 中声明属性来为小部件的所有四个边缘提供填充。

从我在您的屏幕截图中看到的，最好使用`android:layout_margin`属性在小部件之间提供喘息空间。

# sql - “业务对象”如何生成 SQL？

> ID：14401423
> 
> 赞同：0
> 
> 时间：2013-01-18T14:51:00.853
> 
> 标签：sql, join, business-objects, sql-generation

是否有一组 Business Objects 用于生成 SQL 的规则？我刚刚遇到了连接顺序实际上严重影响性能的情况，很高兴知道 BOBJ 使用哪些参数来决定如何对表进行排序。

# javascript - 简单模式不起作用

> ID：14401427
> 
> 赞同：0
> 
> 时间：2013-01-18T14:51:11.737
> 
> 标签：javascript, jquery, simplemodal

我正在尝试使用 iframe 创建模式，但代码不起作用。什么都没发生。

我已经发布了一条`alert`消息，以查看是否正在调用该函数，但未创建模态。

这是我的 JavaScript 代码：

```
function iframe(src){
    alert("Message");
    $.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
        closeHTML: "",
        containerCss: {
            backgroundColor: "#fff", 
            borderColor: "#fff", 
            height: 450, 
            padding: 0, 
            width: 830
        },
        overlayClose:true
    });
} 
```

我试图包含一个名为的文件`jquery.simplemodal-1.4.3.js`，`jquery.simplemodal-1.4.3.min.js`但它仍然无法正常工作。

# c# - c# FindFirstDevice 编组

> ID：14401432
> 
> 赞同：1
> 
> 时间：2013-01-18T14:51:29.690
> 
> 标签：c#, windows-ce, marshalling

我有在 winCE 6.0 版本上运行的 ac# 应用程序。我需要在运行时卸载/重新加载 SD 卡驱动程序。我试图通过调用 FindFirstDevice，然后调用 DeactivateDevice/ActivateDeviceEX 来做到这一点。我的问题是 FindFirstDevice() 调用总是失败。我认为这是我将第二个参数编组到它的方式的问题。谁能告诉我我做错了什么？这是代码：

```
 [DllImport("coredll.dll", SetLastError = true)]
  public static extern int FindFirstDevice(DeviceSearchType
  searchType, IntPtr searchParam, ref DEVMGR_DEVICE_INFORMATION pdi);

  public bool MountSDCardDrive(string mRegPath)
  {
     const int INVALID_HANDLE_VALUE = -1;

     int handle = INVALID_HANDLE_VALUE;
     DeviceSearchType searchType = DeviceSearchType.DeviceSearchByDeviceName;

     DEVMGR_DEVICE_INFORMATION di = new DEVMGR_DEVICE_INFORMATION();
     di.dwSize = (uint)Marshal.SizeOf(typeof(DEVMGR_DEVICE_INFORMATION));

     string searchParamString = "*";
     IntPtr searchParam = Marshal.AllocHGlobal(searchParamString.Length);
     Marshal.StructureToPtr(searchParamString, searchParam, false);

     handle = FindFirstDevice(searchType, searchParam, ref di);
     if (handle == INVALID_HANDLE_VALUE)
     {
        // Failure - print error
        int hFindFirstDeviceError = Marshal.GetLastWin32Error();

        using (StreamWriter bw = new StreamWriter(File.Open(App.chipDebugFile, FileMode.Append)))
        {
           String iua = "DevDriverInterface: error from FindFirstDevice: " + hFindFirstDeviceError.ToString();
           bw.WriteLine(iua);
        }
        return false;
     }

... (rest of code) 
```

如果我将行更改`Marshal.StructureToPtr(searchParamString, searchParam, false);`为`searchParam = Marshal.StringToBSTR(searchParamString);`“我最终得到错误 1168 (ERROR_NOT_FOUND) 而不是 18（没有更多文件）。

`searchParamString`请注意，当我开始工作时，我的意图是使用“SDH1”。我目前正在使用`searchParamString`“*”来查看返回的内容并排除特定的字符串值。

感谢您提供的任何帮助 - Lynn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:12:28.430

FindFirstDevice 必须与 FindNextDevice 一起使用（它使用 FindFirstDevice 返回的句柄作为其第一个参数，如果找到另一个设备则返回 TRUE），因为您必须迭代所有设备以找到好的设备......并且为了这您必须比较结构中的 szLegacyName 值。

消除：

```
IntPtr searchParam = Marshal.AllocHGlobal(searchParamString.Length); 
```

并且仅使用：

```
IntPtr searchParam = Marshal.StringToBSTR(searchParamString); 
```

由于该方法已经提供分配必要的内存（请记住在 finally 块中使用 Marshal.FreeBSTR() 以释放该内存空间）。

您的结构应如下所示：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)] 
public struct DEVMGR_DEVICE_INFORMATION 
{ 
    public UInt32 dwSize; 
    public IntPtr hDevice; 
    public IntPtr hParentDevice; 

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 6)] 
    public String szLegacyName; 

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)] 
    public String szDeviceKey; 

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)] 
    public String szDeviceName; 

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 260)] 
    public String szBusName; 
} 
```

# .net - 适用于 Windows 7.0 的蓝牙低功耗 API

> ID：14401435
> 
> 赞同：17
> 
> 时间：2013-01-18T14:51:35.617
> 
> 标签：.net, windows-7, bluetooth, driver, bluetooth-lowenergy

Windows 8 公开了一个 API 来与蓝牙低功耗（智能）设备进行通信，但该 API 在以前的 Windows 版本中不可用，那么如何在 Windows 7 上与 BLE 加密狗进行通信？

我目前使用的 BLE 加密狗 (BLED112) 公开了一个虚拟串行端口，您可以通过它使用他们的自定义专有 API 发送命令，但如果我在我的软件中实现这一点，它将无法与其他制造商的加密狗一起使用。

那么有没有一种方法可以与制造商无关的 Windows 7 上的 BLE 设备进行通信？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-04T11:57:18.883

所以事实证明，有些人找到了解决方法。基本上，这个想法是*不*使用 Windows BLE API（在 Windows 7 上不起作用），而是直接与加密狗对话。您可以使用 WinUSB（用户空间 USB 驱动程序）来实现。可以使用 Zadig 安装该驱动程序。

这是一个例子：

[https://github.com/sandeepmistry/node-bluetooth-hci-socket#windows](https://github.com/sandeepmistry/node-bluetooth-hci-socket#windows)

它具有 C++ 代码，可让您发送 HCI 命令。还有一个关于如何将 HCI 用于更高级别 BLE 的 Node 库：

[https://github.com/sandeepmistry/bleno](https://github.com/sandeepmistry/bleno)

我不知道是否有任何非 JS 库可以做到这一点，但我认为无论如何将 Bleno 转换为 C++ 并不难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T14:22:42.893

BLE 是必需的吗？大多数 BLE 设备可能是双模式的，因此您可以在旧版本的 Windows 上回退到非 LE 模式。

关于专有 API，您看过[https://32feet.codeplex.com/](https://32feet.codeplex.com/)吗？

该文档建议大多数加密狗的驱动程序可以替换为 Microsoft 类驱动程序。但是，如果替换不可行，API 也可以与其他堆栈一起使用（根据堆栈的一些注意事项[即，需要额外的 DLL]）。

切换到 MS 堆栈

[https://32feet.codeplex.com/wikipage?title=Switching%20any%20dongle%20to%20the%20Microsoft%20stack&referringTitle=Documentation](https://32feet.codeplex.com/wikipage?title=Switching%20any%20dongle%20to%20the%20Microsoft%20stack&referringTitle=Documentation)

一般文件

[https://32feet.codeplex.com/documentation](https://32feet.codeplex.com/documentation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-16T11:40:53.567

据我所知，目前没有办法做到这一点。

*   Broadcom 的 WIDCOMM 蓝牙堆栈的 SDK 自 2009 年以来一直没有更新，并且不支持 BLE。
*   Microsoft 的堆栈仅支持 Windows 8 中的 BLE。

您*也许*可以让开源[BTstack](https://code.google.com/p/btstack/)工作，但他们的 BLE 实现只是“开始”，并且没有在 Windows 上构建它的说明。他们的 wiki 表明没有人尝试过。

如果有人以这种方式取得任何成功，那么有关如何做到这一点的完整说明会很棒！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T19:42:45.643

实际上，如果您的 PC 中的 BT 芯片组（安装了 Windows 7）支持 BT 4.0（我的是 AR3012）并且您已经安装了正确的 BT 芯片组驱动程序，您可以采取一些解决方法来将您的 BLE（BT 低能耗又名智能）设备与您的 PC（我的设备是 Microsoft Designer 键盘）。我点击托盘中的 BT 图标并选择“添加设备”（键盘处于发现模式），然后点击发现的键盘图标进行配对并选择“输入密码”。然后在我的 android 手机（三星 Galaxy S5）上的蓝牙/可用设备菜单中，我点击发现的键盘进行配对 - 它向我显示了在键盘上输入的密码，但我已经在 PC 上输入了此代码，然后在我的键盘 - 瞧！它就像一个魅力。键盘驱动程序已安装，键盘现在可以正常工作。

# tomcat - 如何在 Tomcat 中恢复主机管理器

> ID：14401438
> 
> 赞同：0
> 
> 时间：2013-01-18T14:51:51.947
> 
> 标签：tomcat, tomcat7

我意外地取消了主机管理器的部署。我可以将主机管理器文件夹复制到tomcat吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:43:55.813

是的，它只是一些jsp和一些资源。将其粘贴到 webapps/host-manager 并重新启动您的 tomcat。

我做到了，它有效。

HIH

# excel - 如何使用apache POI在excel页面上设置标题？

> ID：14401439
> 
> 赞同：4
> 
> 时间：2013-01-18T14:51:51.563
> 
> 标签：excel, header, apache-poi

我有一个标题，我需要在打印在动态 Excel 表上的每一页上设置它。

有什么方法可以获取页码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-23T22:10:17.207

根据[swamy 的评论](https://stackoverflow.com/questions/14401439/need-to-set-a-header-on-excel-page-using-apache-poi#comment20163370_14401439)，解决方案是[**`HSSFHeader`**](https://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFHeader.html)从`HSSFSheet`

```
HSSFHeader header = sheet.getHeader(); 
```

然后您可以设置左、中、右文本，包括字体、字体样式、字体大小、页码、日期、时间等。

**例子**

```
header.setCenter(HSSFHeader.font("Calibri", "regular") + 
       HSSFHeader.fontSize((short) 14) + "My " + HSSFHeader.startBold() + "Styled" + 
       HSSFHeader.endBold() + " Text with page number " + HSSFHeader.page()); 
```

**结果**

[![在此处输入图像描述](../Images/836da523373db20a007313d2273ce66e.png)](https://i.stack.imgur.com/bOzWX.png)

# java - Java拆分CSV忽略HTML字符

> ID：14401452
> 
> 赞同：0
> 
> 时间：2013-01-18T14:52:14.377
> 
> 标签：java, regex, csv, split

我需要通过分号来拆分字符串，忽略可能作为 HTML 字符出现的分号。例如，给定字符串：

```
id=com.google.android;keywords=Android&#59;Operating System&#59;Phone;versions=Gingerbread&#59;ICS&#59;JB 
```

我需要将其拆分为：

```
id = com.google.android
keywords=Android&#59;Operating System&#59;Phone
versions=Gingerbread&#59;ICS&#59;JB 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:00:53.330

像`(?<!&#?[0-9a-zA-Z]+);`这样的正则表达式可能会做到这一点。这将阻止匹配终止实体引用或字符引用的分号，尽管它也捕获了一些在技术上不是规范的情况（例如，它不会匹配`&#foo;`or末尾的分号`&123;`）。

`(?<!...)`是一个“负向后看”，因此您可以将此正则表达式读取为匹配一个分号，该分号前面没有匹配的子字符串`&#?[0-9a-zA-Z]+`（即＆符号、可选哈希和一个或多个字母数字）。但是，lookbehinds 必须对它们可以匹配的字符数有一个上限，而这`+`没有，因此您必须使用有界重复计数，`{1,5}`而不是 unbounded `+`。上限必须至少与您可能看到的最长实体引用一样长，如果您的数据可能包含任意实体引用，那么您将不得不使用字符串长度之类的东西作为上限。

```
String[] keyValuePairs = theString.split(
    "(?<!&#?[0-9a-zA-Z]{1," + theString.length() + "});"); 
```

如果您*可以*指定更小的界限，那么这可能会更有效。

* * *

编辑：Android 显然不喜欢这种向后看，即使有限制的重复，所以你可能无法使用单个正则表达式`String.split`来做你所追求的，你必须自己做循环，例如

```
Pattern p = Pattern.compile("(?:&#?[0-9a-zA-Z]+)?;");
Matcher m = p.matcher(theString);
List<String> splits = new ArrayList<String>();
int lastEltStart = 0;
while(m.find()) {
  if(m.end() - m.start() > 1) {
    // this match was an entity/character reference so don't split here
    continue;
  }
  if(m.start() > lastEltStart) {
    // non-empty part
    splits.add(theString.substring(lastEltStart, m.start()));
  }
  lastEltStart = m.end();
}
if(lastEltStart < theString.length()) {
  // non-empty final part
  splits.add(theString.substring(lastEltStart));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:06:39.713

由于 HTML 实体在 '&#' 和 ';' 之间只有两个或三个数字 我使用了以下正则表达式：

```
(?<!&#\d{2,3}); 
```

# css - 仅适用于悬停时的边框，但不适用于背景

> ID：14401454
> 
> 赞同：18
> 
> 时间：2013-01-18T14:52:15.257
> 
> 标签：css, hover, css-transitions, pseudo-element, pseudo-class

**这里我有一些 CSS：**

```
 #image-edges-beneath:hover{
    background-color: blue;
    }

    #image-edges:hover{
      background-color: blue;
    }

    #image-edges-beneat:hover:after{
    -webkit-transition: all 1s ease;
         -moz-transition: all 1s ease;
           -o-transition: all 1s ease;
          -ms-transition: all 1s ease;
              transition: all 1s ease;
      border: 2px solid #F1FD6D;
    }

    #image-edges:hover:after{
    -webkit-transition: all 1s ease;
         -moz-transition: all 1s ease;
           -o-transition: all 1s ease;
          -ms-transition: all 1s ease;
              transition: all 1s ease;
      border: 2px solid #F1FD6D;
    } 
```

但是，这不起作用。唯一发生的是背景颜色有一个过渡，而我希望它只在悬停时改变，而边框我想有一个过渡，所以基本上边框淡入颜色，而背景颜色在悬停时立即改变颜色. 这就是我想要完成的，但这不起作用。:( 有什么想法用户吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-18T15:02:24.857

您需要做的是设置要正确转换的属性。目前，您将其作为“全部”，但它需要是“背景颜色”或“边框颜色”，基于您想要进行转换。

```
 transition: border-color 1s ease; 
```

[http://jsfiddle.net/u3Ahk/](http://jsfiddle.net/u3Ahk/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-17T05:31:21.913

您可以通过多种方式制作边框效果。将以下 css 应用于您将应用边框效果并在任何事件发生时更改边框样式的类。

```
 -webkit-transition:  border 3s ease;
 -moz-transition:  border 3s ease;
 -o-transition:  border 3s ease;
 -ms-transition: border 3s ease;
 transition: border 3s ease; 
```

另请参阅这些链接以获取高级边界效果

[https://codepen.io/giana/pen/yYBpVY](https://codepen.io/giana/pen/yYBpVY)

[http://cssdeck.com/labs/10-crazy-effects-with-css3-border-transitions](http://cssdeck.com/labs/10-crazy-effects-with-css3-border-transitions)

# iphone - iOS 按添加日期对文件夹中的文件进行排序

> ID：14401456
> 
> 赞同：3
> 
> 时间：2013-01-18T14:52:22.577
> 
> 标签：iphone, ios, file, attributes, add

我的应用程序从 Internet 下载文件。应用程序将它们存储在 Documents 文件夹中。应用程序使用 iTunes 共享功能，用户可以通过 iTunes 将文件存储在 Documents 文件夹中（当我的应用程序启动时和我的应用程序未启动时）。在我的应用程序的一个表视图中，我想显示 Documents 目录中按添加日期排序的文件（日期，文件添加到 Documents 目录的时间）。iOS上是否有像“添加日期”这样的文件属性？我怎样才能找回它？我搜索了这个，但我现在找不到答案。

我想我可以使用 DirectoryWatcher 保存下载文件和在我的应用程序启动时通过 iTunes 添加的文件的日期。但是我不知道在我的应用程序未启动时如何获取通过 iTunes 存储在 Documents 中的文件的“添加日期”。我怎样才能做到这一点？

我知道 Mac OS 10.7 上的 Finder 中添加了按日期排列。他们是怎么做到的？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:13:27.760

是的，您可以使用 NSFileManager 来执行此操作，您可以给它一个文件路径来请求属性字典，其中一个是修改日期

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/fileModificationDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/fileModificationDate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:59:48.410

我发现该文件的属性中不包含添加日期。通过 iTunes Connect 将文件从 mac 复制到应用程序创建日期和修改日期后保持不变（就像在 mac 上一样）。我还发现 Mac 上的 Finder 使用外部 sqlite 数据库 ~/Library/Preferences/com.apple.dock.db 来存储添加日期属性。

因此，出于我的需要，我决定使用某种外部数据库来存储“添加日期”值。我想我会使用 NSUserDefaults，我会使用文件名和 inode 号作为键。

# excel - 如果另一个单元格匹配，则合并唯一值

> ID：14401463
> 
> 赞同：2
> 
> 时间：2013-01-18T14:52:44.903
> 
> 标签：excel, excel-formula, countif, excel-match

如果另一个单元格匹配，则合并所有唯一值。我已经知道如何合并单元格，但现在有些信息是双倍的。所以我想要实现的是：

> 如果 A 列具有相同的名称，则 B 列中为该名称给出的所有值必须在新列中仅给出一次。

例如，我的数据有一行`names`和一行`mode`（第 1 行是标题）

```
 A      B    
2  Brenda   a
3  Brenda   a
4  Joey     a
5  Joey     b 
```

所以我想要：

```
 E      
2    a
3  
4   a,b
5 
```

我已经合并了第 3 列中的模式：

```
=IF(A1<>A2;B2;C1&","&B2) 
```

所以我得到了这个例子：

```
 C      
2    a
3   a,a
4    a
5   a,b 
```

然后，我已经这样做了，只有第一条记录在第 4 列中获得了附加模式：

```
=IF(A1=A2;"";INDEX(Sheet1!$C:$C;COUNTIF(Sheet1!$A:$A;$A2)+MATCH($A2;Sheet1!$A:$A;0) -1)) 
```

所以我得到了这个例子

```
 D      
2    a,a
3  
4    a,b
5 
```

现在我需要一个为每个名称只给出唯一值的列。所以在这个例子中：

```
 E      
2    a
3  
4    a,b
5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:39:17.373

如果我了解您的数据的结构，请尝试以下操作：

添加一个新列，例如 G 列，以便于解释，它将每行中的名称和模式连接起来。因此，单元格 G2="Brendaa"、G3="Brendaa"、G4="Joeya"、G5="Joeyb" 等。

在合并步骤中，您将测试该列单元格中的当前值是否与该列中的任何先前值匹配：如果不匹配，则执行合并；如果是，你不知道。

您的合并公式将更改为如下所示：

```
 =IF(A1<>A2,B2,IF(ISERROR(VLOOKUP(G2,G$1:G1,1,0)),C1&","&B2,"")) 
```

然后你会像以前一样进行下一步。

# c# - 当 IsHandleCreated = true 时，C# Form Load 方法不会触发

> ID：14401464
> 
> 赞同：0
> 
> 时间：2013-01-18T14:52:48.967
> 
> 标签：c#, winforms, designer

我有一个主窗体，上面有一个按钮，单击时会打开一个新窗体 ( `MyForm`)。

```
 MyForm f = new MyForm();
 f.Method();
 f.Show(); 
```

如果我设置`MyForm`为局部变量，则该`MyForm_Load()`方法不会触发。但是，如果我做类似的事情

```
new MyForm.method(); 
```

该`MyForm_Load()`方法确实触发（使用断点测试）。

我知道，如果我创建一个变量，`MyForm`那么该`IsHandleCreated`属性是真实的，这会干扰`MyForm_Load`被解雇。有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:57:39.300

```
MyForm_Load() 
```

在表单完全加载时引发，这意味着它也必须显示。只需拨打电话

```
MyForm.Show(); 
```

展示它并引发事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:58:30.130

验证`f.Method()`没有触发异常。

（最初是评论，因为您说这解决了问题，所以转而回答）。

# php - 用户名作为laravel上的子域

> ID：14401468
> 
> 赞同：9
> 
> 时间：2013-01-18T14:52:57.313
> 
> 标签：php, .htaccess, mod-rewrite, laravel, laravel-3

我已经设置了一个通配符子域 *.domain.com 并且我正在使用以下 .htaccess：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !www\.
RewriteCond %{HTTP_HOST} (.*)\.domain\.com
RewriteRule .* index.php?username=%1 [L] 
```

一切都很完美。

我想在 laravel 中实现这个方法。主要是我希望在您访问 username.domain.com 时显示我的用户个人资料。关于实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-22T13:57:44.650

这很简单。首先 - 不要更改`.htaccess`Laravel 提供的默认文件。默认情况下，对您的域的所有请求都将被路由到您的`index.php`文件，这正是我们想要的。

然后在您的`routes.php`文件中使用“之前”过滤器，该过滤器在完成其他任何操作之前过滤对您的应用程序的所有请求。

```
Route::filter('before', function()
{
    // Check if we asked for a user
    $server = explode('.', Request::server('HTTP_HOST'));

    if (count($server) == 3) 
    {
        // We have 3 parts of the domain - therefore a subdomain was requested
        // i.e.  user.domain.com

        // Check if user is valid and has access - i.e. is logged in
        if (Auth::user()->username === $server[0])
        {
            // User is logged in, and has access to this subdomain

            // DO WHATEVER YOU WANT HERE WITH THE USER PROFILE
            echo "your username is ".$server[0];
        }
        else
        {
            // Username is invalid, or user does not have access to this subdomain
            // SHOW ERROR OR WHATEVER YOU WANT
            echo "error - you do not have access to here";
        }

    }
    else
    {
        // Only 2 parts of domain was requested - therefore no subdomain was requested
        // i.e. domain.com

        // Do nothing here - will just route normally - but you could put logic here if you want
    }
}); 
```

编辑：如果您有国家/地区扩展名（即 domain.com.au 或 domain.com.eu），那么您将需要更改计数（$server）以检查 4，而不是 3

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-23T16:32:49.037

Laravel 4 开箱即用了这个功能：

```
Route::group(array('domain' => '{account}.myapp.com'), function() {

    Route::get('user/{id}', function($account, $id) {
        // ...
    });

}); 
```

[来源](http://laravel.com/docs/routing#sub-domain-routing)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T16:44:31.493

虽然我不能说出您的情况的完整解决方案是什么，但我将从请求中的 SERVER_NAME 值开始（PHP：$_SERVER['SERVER_NAME']），例如：

```
$username = str_replace('.domain.com', '', Request::server('SERVER_NAME')); 
```

确保您还清理/清理了用户名，然后您可以从那里从用户名中查找用户。就像是：

```
$user = User::where('username', '=', $username)->first(); 
```

如果 SERVER_NAME 不是 www.domain.com 或 domain.com，您可以在路由文件中的某个位置有条件地定义一个路由，但我相信其他人可以为此部分想出一个更有说服力的方法......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:51:46.450

能够添加子域，如子域 *。domain.com 应该由您的托管服务提供商切换，在 .htaccess 中您不能配置对子域的支持

# android - Android 奇怪的对象行为

> ID：14401469
> 
> 赞同：0
> 
> 时间：2013-01-18T14:52:58.280
> 
> 标签：android, oop

我有我创建的这个 FacebookUser 对象：

```
 private String  id,name, status;    
    private double distance = -1, longitude, latitude;
    private transient Drawable profilePicture,gender;
    private boolean isFacebookFriend = false, isApplicationFriend = false, isClicked = false, isOnline = false, isLoaderChecked=false;

    public FacebookUser()
    {

    }

    public FacebookUser(String id, String name) {
        this.setId(id);
        this.setName(name);     
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        if (isApplicationFriend())
            return name;
        else
            return "";
    }

    public void setName(String name) {
        this.name = name;
    }

    public boolean isApplicationFriend() {
        return isApplicationFriend;
    }

    public void setApplicationFriend(boolean isApplicationFriend) {
        this.isApplicationFriend = isApplicationFriend;
    }   
} 
```

我的问题是 getName() 方法。

在 ListView 中显示 FacebookUser 的 ArrayList 时，我使用 FacebookUser.getName() 在 TextView 中显示名称。

现在，我 100% 确定 isApplicationFriend() 返回 true - 我什至在 TextView 文本插入附近记录了它。

那么为什么 getName() 一直返回 "" ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:09:08.653

你是对的你是对的……我太傻了……

该方法之前被调用并清空了 name 属性...

对不起...

# jquery - jQuery：为函数调用设置字符串

> ID：14401474
> 
> 赞同：0
> 
> 时间：2013-01-18T14:53:18.130
> 
> 标签：jquery

我的代码似乎有缺陷，我在里面设置了两个具有相同代码的函数。我可以将它们合二为一吗？

```
// remove sets
$('body').on("click", "span.remove", function() {

    var self  = $(this),
        total = self.parents('ul').children('li').size(); // grab total number of li's

    // remove (set) li if total greater than 1, else remove exercise
    if(total > 1)
        self.parent('li').fadeOut('slow', function() {

            // remove clicked .li and reset list order
            $(this).remove();
            reset();

        });

    else
        self.parents('section').fadeTo('slow', 0.33).slideUp('slow', function() {

            // remove clicked .li and reset list order
            $(this).remove();
            reset();

        });

}); 
```

是否可以执行以下操作：

```
if(total > 1)
    var f = self.parent('li').fadeOut('slow', function()

else
    var f = self.parents('section').fadeTo('slow', 0.33).slideUp('slow', function()

f {

    // remove clicked .li and rest list order
    $(this).remove();
    reset();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:01:02.640

诀窍是创建一个命名函数，而不是匿名函数。然后可以通过引用传递命名函数，包括作为其他方法的参数。有两种方法可以做到这一点，表达式 ( `function someName(){..}`) 或赋值 ( `var someName = function() {..}`)。您选择哪个主要是个人喜好，它们实际上是相同的。

一个示例（使用函数表达式），继您的问题之后：

```
$('body').on("click", "span.remove", function() {

    function removeAndReset() {
            // remove clicked .li and reset list order
            $(this).remove();
            reset();
    }

    var self  = $(this),
        total = self.parents('ul').children('li').size(); // grab total number of li's

    // remove (set) li if total greater than 1, else remove exercise
    if(total > 1)
        self.parent('li').fadeOut('slow', removeAndReset);

    else
        self.parents('section').fadeTo('slow', 0.33).slideUp('slow', removeAndReset);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:01:01.500

```
$('body').on("click", "span.remove", function() {

    var self  = $(this),
        total = self.parents('ul').children('li').size(); // grab total number of li's

    function remove() {
        $(this).remove();
        reset();
    }
    // remove (set) li if total greater than 1, else remove exercise
    if(total > 1)
        self.parent('li').fadeOut('slow', remove);

    else
        self.parents('section').fadeTo('slow', 0.33).slideUp('slow', remove);

}); 
```

# hibernate - 如何结合手动插入和 JPA Id 生成？

> ID：14401475
> 
> 赞同：3
> 
> 时间：2013-01-18T14:53:29.397
> 
> 标签：hibernate, jpa, jpa-2.0, jboss-arquillian

我正在使用 arquillian 进行容器内测试。我正在通过向`import.sql`部署添加一个来预填充数据库。在测试期间，我想创建更多实体。

不幸的是，这失败了`PersistenceException`：

> javax.persistence.PersistenceException：org.hibernate.exception.ConstraintViolationException：唯一索引或主键违规：“PRIMARY_KEY_BE ON PUBLIC.KVS_MIPO_DOWNLOAD(ID)”

如果我不预先填充数据库，或者不保留新实体，一切都会顺利进行。

id 是唯一唯一的字段，所以我强烈怀疑它一定是使用序列的 id 生成。

```
@Entity
@Table(name = "KVS_MIPO_DOWNLOAD")
@Inheritance(strategy = InheritanceType.JOINED)
@DiscriminatorColumn(name = "type", discriminatorType = DiscriminatorType.STRING)
public abstract class DownloadResource implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    protected Integer id; 
```

该实体是另一个具体实体的超类，它不添加任何唯一属性。

可以做些什么来适应这两种可能性 - 手动插入并使用生成的 id？

谢谢

我在 JBoss 7.1.1 中通过 Hibernate 4.0.1 使用 JPA 2。数据库是 Sybase ASE 15。

**编辑**：到目前为止我发现的一种解决方法是将手动添加的实体的 ID 设置得足够高以避免冲突。但这对于生产来说还不够好——太多的员工对数据库有写访问权，并且可能会想手动添加东西。我希望应用程序足够健壮，不会在这种情况下死亡和爆炸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T18:36:30.193

为您的手动 ID 使用负值。Hibernate 不应该产生负数。

或者，使用您自己的 id 生成器跳过特定范围（或跳过可被 7 整除的数字；一些这样的方案）。

样本 ID 生成器：

```
import org.hibernate.HibernateException;
import org.hibernate.engine.SessionImplementor;
import org.hibernate.id.IdentifierGenerator;

public class MyGenerator implements IdentifierGenerator {

    public Serializable generate(SessionImplementor session, Object object)
            throws HibernateException {
        return 1; // TODO: Your scheme to create an Integer;
    }
} 
```

要使用此注释，如下所示：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO, generator = "myid")
@GenericGenerator(name = "myid", strategy = "com.x.y.z.MyDGenerator")
public int getId() {
    return _id;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T18:49:00.457

您还可以将 UUID 用作 id 或序列。手动添加的数据也可以引用序列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T20:34:53.497

如果您使用[Fastnate](http://fastnate.org)，您可以`import.sql`使用正确的 ID 创建，足以满足您的 JPA 模型和数据库的需要。

例如，您可以通过以下方式创建实体：

```
EntitySqlGenerator generator = new EntitySqlGenerator(new FileWriter("import.sql"));
List<DownloadResource> resources = createDownloadResources();
generator.write(resources); 
```

有更多的选项可以创建`import.sql`，但一开始就足够了。

Fastnate 目前没有对 Sybase 的特殊支持，但对于大多数情况，默认方言 (H2) 也可以使用。

# javascript - 高图表中的交互式基准测试和系列选择

> ID：14401477
> 
> 赞同：0
> 
> 时间：2013-01-18T14:53:39.573
> 
> 标签：javascript, highcharts, frontend

在过去的一周里，我一直在为一个客户项目玩弄高图表。多么强大的工具啊，多么棒的资源啊！

手头的问题是，我对生产支出的简单年度分析毕竟不是他们想要的，现在我需要一个超级快速的周转来将所需的产品推出市场。因此我的帖子。

我需要弄清楚如何做是让用户与图表（列）进行交互，以便他们可以从多个生产者中进行选择，并选择一个作为 90、75 或 50 个百分位基准测试。然后，该基准将是该系列的最后一个（最右边），因为其他基准（已选择，无论是只有 1 个还是其他 4 个）填充。

这是我的全部内容：http: [//jsfiddle.net/UBYqY/](http://jsfiddle.net/UBYqY/)

这是其中更相关的代码块：

```
plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 1,
            borderColor: ['#5e9a88', '#FF0000'],
            color: '#6ba896',
            shadow: false,
            series: {
                colorByPoint: true
            },

            events: {
                legendItemClick: ' ',
                checkboxClick: function (event) {
                    if (event.checked) {
                        this.show();
                    } else {
                        this.hide();
                    }
                }
            },

            showCheckbox: true

        },

    },
    series: [{
        name: "Faruqh",
        data: [360.85, 380.90],
        borderColor: "#dc7539"

    }, {
        name: "Debra",
        data: [551.59, 500.29],
        borderColor: "#dc7539"

    }, {
        name: "Dennis",
        data: [266.24, 282.28],
        borderColor: "#dc7539"

    }] 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:51:06.347

你看过这个例子[http://jsfiddle.net/UBYqY/7/](http://jsfiddle.net/UBYqY/7/)吗？

```
 $("select").change(function(){
    chart.xAxis[0].setCategories(["Awesome"]);
    chart.addSeries({
        name: "75%",
        data: [400] 
    });

}); 
```

# java - java中的高效空值评估

> ID：14401480
> 
> 赞同：-3
> 
> 时间：2013-01-18T14:54:00.673
> 
> 标签：java

我得到了以下方法

```
public Person findByAdd(String add) {
    try {
        final String queryString = "select p from Destinations p where p.address = :add";
        Query query = em.createQuery(queryString);
        query.setParameter("add", add);
        return (Person) query.getSingleResult();

    } catch (RuntimeException re) {
        throw re;
    }
} 
```

如果 Person 对象不存在，则会引发空指针异常，并且我想做这样的事情

```
if(person.getAdd !=null){
   system.out.println ("address exist");    
}
else
{
system.out.println ("please enter address ");   
} 
```

但是如果人不存在，这会引发异常，我如何有效地评估如果人为空

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:55:13.957

```
if (person != null && person.getAdd() != null)
   System.out.println ("address exist");    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:57:23.950

`getSingleResult()`如果要返回`null`值，请勿使用。用这个：

```
TypedQuery<Person> query = em.createQuery(queryString, Person.class);
List<Person> list = query.getResultList();
if (list.isEmpty()){
    return null;
}
return list.get(0);
//or inlined: return list.isEmpty() ? null : list.get(0); 
```

# html - HTML 中文本周围的颜色

> ID：14401495
> 
> 赞同：5
> 
> 时间：2013-01-18T14:55:13.747
> 
> 标签：html, css, text, border

我需要在我的 HTML 页面中的文本周围显示颜色，我尝试了边框属性，但它在文本周围给出了方形框。如何达到以下要求

![在此处输入图像描述](../Images/a5fa3afd9c81941c2cf58067e5ae2dc0.png)

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:57:31.757

我会在这里写代码......但是这个链接[http://line25.com/articles/using-css-text-shadow-to-create-cool-text-effects](http://line25.com/articles/using-css-text-shadow-to-create-cool-text-effects)很好地解释了它。

**示例演示**：[http ://codepen.io/anon/pen/CDsFb](http://codepen.io/anon/pen/CDsFb)

这个其实好多了...

```
text-shadow: 3px 3px 0 #000,
    /* Simulated effect for Firefox and Opera and nice enhancement for WebKit */
   -3px -3px 0 #000,  
    3px -3px 0 #000,
   -3px  3px 0 #000,
    3px  3px 0 #000; 
```

这将确保它**看起来像**您想要的适当边框，而不是文本周围的简单发光。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T14:59:21.470

您正在寻找`text-shadow`CSS 属性

```
text-shadow: 0px 0px 3px orange; 
```

[http://jsfiddle.net/NGPhL/](http://jsfiddle.net/NGPhL/)

[http://www.quirksmode.org/css/textshadow.html](http://www.quirksmode.org/css/textshadow.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:58:20.007

您可以使用

```
text-shadow: 0px 0px 4px #1d1dab;
filter: dropshadow(color=#1d1dab, offx=0, offy=0); 
```

[http://css3generator.com/](http://css3generator.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:58:48.260

您可以使用[CSS3 text-shadow 属性](http://www.w3schools.com/cssref/css3_pr_text-shadow.asp)。只要浏览器支持 webkit，这应该会出现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T14:59:23.980

如果浏览器不支持 CSS3：

使用可以使用字体大小分别为 17px 和 18px 的两个文本节点（例如），并通过 CSS 第一个在第二个（位置：绝对，z-index：100，左，上等）以不同的颜色进行定位。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T15:06:00.453

谢谢你的建议，我在这里找到了一个例子来满足这个要求

[http://gazpo.com/2011/02/text-shadow/](http://gazpo.com/2011/02/text-shadow/) 7\. 文字周围的边框

```
text-shadow: 0 -4px #00468C,4px 0 #00468C,0 4px #00468C,-4px 0 #00468C,4px -4px #00468C,-4px 4px #00468C,4px 4px #00468C,-4px -4px #00468C; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-23T08:39:11.363

```
main-heading h2{

    -webkit-text-stroke: 2px #42a6e1;
} 
```

文本阴影无法正常工作。所以使用文本描边而不是文本阴影。文字阴影在不同的设备上也有困难。

您可以在下面给出的屏幕截图中看到
[![您可以在下面给出的屏幕截图中看到](../Images/b7e75b42ec01df5ba05e9608dd49b2ac.png)](https://i.stack.imgur.com/DaUiS.png)

# javascript - Flash & Backbone.js - 如何在不刷新页面的情况下使路由链接工作？

> ID：14401501
> 
> 赞同：0
> 
> 时间：2013-01-18T14:55:29.793
> 
> 标签：javascript, actionscript-3, flash, backbone.js, actionscript-2

假设我有一个使用 Backbone.js 的页面（**“A.php”**），并定义了以下路由：

```
routes: {
    'item/:num': 'showItem'
} 
```

还有一个 Flash SWF 会嵌入到**A.php**和**B.php**（另一个页面，没有任何 Backbone 结构）中。

是否有办法做到这一点，以便当单击此 SWF 中的按钮时，如果 SWF 在**A.php**`'item/:num': 'showItem'`上，它将调用与路由绑定的方法而无需重新加载页面，但如果在**B.php**上则执行正常的链接行为?

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:05:07.960

您需要在 A.php 和 B.php 中设置同名的 JavaScript 函数 - 例如，两个页面都有 Javascript 来定义`goToShowItem()`函数。

A 的函数将调用 Backbone 路由代码，B 的函数将简单地设置`window.location`为正常的链接地址。

您的 Flash 项目中的按钮将调用`getURL("javascript:goToShowItem();");`以调用当前页面的`goToShowItem()`功能。****

# c# - 如何在 SQL Server 2008 中存储多行文本以跟踪 asp.net 中的新行

> ID：14401503
> 
> 赞同：2
> 
> 时间：2013-01-18T14:55:38.393
> 
> 标签：c#, asp.net, sql-server-2008, newline, multilinestring

我正在开发一个 Intranet ASP.NET 网站。我将用户评论从 asp.net 多行文本框保存到 SQL Server 数据库中，并完全按照用户在 Gridview 中编写的方式显示。

假设用户输入以下字符串：

```
1.Task1
2.Task2
3.Task3 
```

那么在 gridview 中检索到的数据应该与用户在保存之前输入的数据相同。

在调试时，我尝试替换`\r\n`为，`<br/>`但 gridview 显示`<br/>`为原样..不分配新行。

我正在使用 c#。

我找到了使用文字控制的解决方案。

现在，有一个新问题我没有使用 Gridview。我将评论生成为 html 并将其作为邮件正文发送，假设用户输入以下字符串：

```
1.Task1
   a.T1
   b.T2
   c.T3
2.Modules
  a.Module A
  b.Module B
  c.Module C 
```

`<br />`替换为时`/n`的换行符仅将内容带到新行而不是自动为第二行占用空格。并且邮件正文 html 正在生成它，如下所示：

```
 1.Task1  
 a.T1  
 b.T2  
 c.T3  
 2.Modules  
 a.Module A  
 b.Module B  
 c.Module C 
```

这不是我所期望的。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:13:48.040

保存文本时可以使用回车，在网格中显示时可以将其替换为

```
'<%# Eval("TheName").ToString().Replace("\n", "<br />") %>' 
```

# git - 使用 scm-maven-plugin 时如何在 pom 中指定提交消息？

> ID：14401504
> 
> 赞同：3
> 
> 时间：2013-01-18T14:55:44.003
> 
> 标签：git, maven-3, commit, system-properties, maven-scm

我正在尝试使用 maven [SCM 插件](http://maven.apache.org/scm/maven-scm-plugin/)在自动构建期间将一些文件提交到 git repo，该插件需要将提交消息设置为系统属性，我不想在命令上传递它行（我也在使用发布插件，这会导致问题）。

我已经尝试了所有我想通过 pom 添加消息系统属性的方法，但没有运气，这是我的 pom 的精简版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.monkeys.coding</groupId>
    <artifactId>project</artifactId>
    <packaging>js</packaging>
    <version>1.0.4-SNAPSHOT</version>

    <name>Some Project</name>
    <description>Some Project where I want to add files to git during build</description>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <projectVersion>${project.version}</projectVersion>
    </properties>

    <scm>
        <connection>scm:git:http://some.git.repo:9080/git/module.git</connection>
        <developerConnection>scm:git:http://some.git.repo:9080/git/module.git</developerConnection>
        <url>http://some.git.repo:9080/git/module.git</url>
    </scm>

    <build>
        <finalName>${project.artifactId}</finalName>
        <!-- Package as js -->
        <extensions>
            <extension>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>javascript-maven-plugin</artifactId>
                <version>2.0.0-alpha-1</version>
            </extension>
        </extensions>
    ...
    </build>

    <profiles>
        <!-- run this profile when releasing the library -->
        <profile>
            <id>release</id>
            <properties>
                <message>Add version files to git</message>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-scm-plugin</artifactId>
                        <version>1.8.1</version>
                        <configuration>
                            <message>Add version files to git</message>
                            <systemProperties>
                                <systemProperty>
                                    <name>message</name>
                                    <value>[Add Version to git]</value>
                                </systemProperty>
                            </systemProperties>
                        </configuration>
                        <executions>
                            <execution>
                                <id>add-version-to-git</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>add</goal>
                                    <goal>checkin</goal>
                                </goals>
                                <configuration>
                                    <basedir>./</basedir>
                                    <includes>versions/*</includes>
                                    <systemProperties>
                                        <systemProperty>
                                            <name>message</name>
                                            <value>[Add Version to git]</value>
                                        </systemProperty>
                                    </systemProperties>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

通过配置文件属性添加消息似乎有效，文件已提交获取并且消息出现在存储库中，但构建失败并出现以下错误：

```
 [ERROR] Provider message:
    [ERROR] The git-commit command failed.
    [ERROR] Command output:
    [ERROR] 
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 28.637s
    [INFO] Finished at: Fri Jan 18 12:59:40 GMT 2013
    [INFO] Final Memory: 19M/81M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-scm-plugin:1.8.1:checkin (add-version-to-git) on project: Command failed.The git-commit command failed. -> [Help 1] 
```

关于我做错了什么的任何想法？

干杯抢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:45:53.287

尝试将 更改`pom.xml`为如下所示：

```
...
    <executions>
        <execution>
            <id>add-version-to-git</id>
            <phase>package</phase>
            <goals>
                <goal>add</goal>
                <goal>checkin</goal>
            </goals>
            <configuration>
                <basedir>./</basedir>
                <includes>versions/*</includes>
                <message>[Add Version to git]</message>
            </configuration>
        </execution>
    </executions>
... 
```

尝试使用`message`属性而不是`systemProperties`.

或者您可以随时在命令行中执行此操作，例如：

```
mvn -Dmessage="<commit_log_here>" scm:checkin 
```

[如此处](http://maven.apache.org/scm/maven-scm-plugin/usage.html#Committing_and_updating_changes_through_Maven)所述

# ruby-on-rails - 轨道子文件夹中的模型/控制器？

> ID：14401513
> 
> 赞同：0
> 
> 时间：2013-01-18T14:55:57.730
> 
> 标签：ruby-on-rails, model

我试图使应用程序尽可能整洁，因为它可能会变得非常大。几天后，我注意到模型中的以下模式：

```
models/
    prefix_file.rb
    prefix_file2.rb
    prefix_file3.rb
    file.rb
    prefix2_file.rb
    prefix2_file2.rb 
```

无论如何将模型目录组织到子文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:59:24.023

您可以在目录中命名您的文件并使用模块。

例如

```
models/
  prefix/
    file.rb
    file2.rb
    file3.rb
  prefix2/
    file.rb
    file2.rb
  file.rb 
```

然后在目录中的文件中，您将拥有类似

**模型/前缀/file.rb**

```
module Prefix
  class File < ActiveRecord::Base

  end
end 
```

要使用它们，您需要有这样的代码`Prefix::File.some_method`

# php - 在 Magento 1.7/1.12 版本中更改仪表板图

> ID：14401516
> 
> 赞同：1
> 
> 时间：2013-01-18T14:55:58.920
> 
> 标签：php, zend-framework, magento, magento-1.7

在以前版本的 Magento（CE 为 1.6 及之前版本，EE 为 1.11 及之前版本）中，管理仪表板上的图表将反映所接受的总订单数。自 1.7/1.12 起，这已更改为反映已开票的订单。我们使用自定义状态，并且喜欢将仪表板图表作为关于销售的快速心跳类型报告。但是，由于我们处理后端订单处理的方式（不是通过 Magento），我们的订单都没有达到发票状态

如何更改仪表板图表以报告订单的处理、已开票和我们的自定义状态？我们的自定义状态已与处理相关联，因此我可能只需要查询处理和发票。根据 Magento Support 的说法，这种修改是可能的，但除了 /app/design/Adminhtml/default/default/template/dashboard/graph.phtml 文件之外，我不确定从哪里开始寻找。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:17:05.367

Oleg Ishenko 的回答为您指明了正确的方向，但并不全面。
1.在您创建的模块中，您需要覆盖`Mage_Reports_Model_Resource_Order_Collection`：所以在您的`config.xml`放置中：

```
...
    <global>
        <models>
            <yourmodule>
                <class>Namespace_Yourmodule_Model</class>
            </yourmodule>

            <reports_resource>
                <rewrite>
                    <order_collection>Namespace_Yourmodule_Model_Reports_Resource_Order_Collection</order_collection>
                </rewrite>
            </reports_resource>
        </models>
    </global>
... 
```

2.然后创建类（尊重路径），在这个类中你需要重写2个方法：

```
<?php
/**
 * Show all orders, not only the invoiced one
 */
class Namespace_Yourmodule_Model_Reports_Resource_Order_Collection extends Mage_Reports_Model_Resource_Order_Collection
{

    protected function _prepareSummaryLive($range, $customStart, $customEnd, $isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $adapter = $this->getConnection();

        /**
         * Reset all columns, because result will group only by 'created_at' field
         */
        $this->getSelect()->reset(Zend_Db_Select::COLUMNS);

        $expression = sprintf('%s - %s - %s - (%s - %s - %s)',
            $adapter->getIfNullSql('main_table.base_total_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_tax_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_shipping_invoiced', 0),
            $adapter->getIfNullSql('main_table.base_total_refunded', 0),
            $adapter->getIfNullSql('main_table.base_tax_refunded', 0),
            $adapter->getIfNullSql('main_table.base_shipping_refunded', 0)
        );
        if ($isFilter == 0) {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(
                    sprintf('SUM((%s) * %s)', $expression,
                        $adapter->getIfNullSql('main_table.base_to_global_rate', 0)
                    )
                 )
            ));
        } else {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(sprintf('SUM(%s)', $expression))
            ));
        }

        $dateRange = $this->getDateRange($range, $customStart, $customEnd);

        $tzRangeOffsetExpression = $this->_getTZRangeOffsetExpression(
            $range, 'created_at', $dateRange['from'], $dateRange['to']
        );

        $this->getSelect()
            ->columns(array(
                'quantity' => 'COUNT(main_table.entity_id)',
                'range' => $tzRangeOffsetExpression,
            ))
            //BOF modification
//            ->where('main_table.state NOT IN (?)', array(
//                Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
//                Mage_Sales_Model_Order::STATE_NEW)
//            )
            //EOF modification
            ->order('range', Zend_Db_Select::SQL_ASC)
            ->group($tzRangeOffsetExpression);

        $this->addFieldToFilter('created_at', $dateRange);

        return $this;
    }

    protected function _calculateTotalsLive($isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $this->removeAllFieldsFromSelect();

        $adapter = $this->getConnection();

        $baseTotalInvoiced    = $adapter->getIfNullSql('main_table.base_grand_total', 0);
        $baseTotalRefunded    = $adapter->getIfNullSql('main_table.base_discount_refunded', 0);
        $baseTaxInvoiced      = $adapter->getIfNullSql('main_table.base_tax_amount', 0);
        $baseTaxRefunded      = $adapter->getIfNullSql('main_table.base_tax_refunded', 0);
        $baseShippingInvoiced = $adapter->getIfNullSql('main_table.base_shipping_amount', 0);
        $baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0);

        $revenueExp = sprintf('%s - %s - %s - (%s - %s - %s)',
            $baseTotalInvoiced,
            $baseTaxInvoiced,
            $baseShippingInvoiced,
            $baseTotalRefunded,
            $baseTaxRefunded,
            $baseShippingRefunded
        );
        $taxExp = sprintf('%s - %s', $baseTaxInvoiced, $baseTaxRefunded);
        $shippingExp = sprintf('%s - %s', $baseShippingInvoiced, $baseShippingRefunded);

        if ($isFilter == 0) {
            $rateExp = $adapter->getIfNullSql('main_table.base_to_global_rate', 0);
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $revenueExp, $rateExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $taxExp, $rateExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $shippingExp, $rateExp))
                )
            );
        } else {
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM(%s)', $revenueExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM(%s)', $taxExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM(%s)', $shippingExp))
                )
            );
        }

        $this->getSelect()->columns(array(
            'quantity' => 'COUNT(main_table.entity_id)'
        ));
        //BOF modification
//        ->where('main_table.state NOT IN (?)', array(
//            Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
//            Mage_Sales_Model_Order::STATE_NEW)
//         );
        //EOF modification

        return $this;
    }

} 
```

在这个例子中，我已经注释了按订单状态进行的过滤，但是您可以轻松地取消它并放置您不想计入的订单状态。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:45:09.183

我做了一些挖掘，看起来这个集合正在内置`Mage_Reports_Model_Resource_Order_Collection::_prepareSummaryLive()`。在 Magento 1.7.0.2 中，限制基于订单，这些订单不在 stati`Mage_Sales_Model_Order::STATE_PENDING_PAYMENT`或`Mage_Sales_Model_Order::STATE_NEW`.

无论如何，可以在这里操作集合过滤器（另[见 github 上的类文件](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/code/core/Mage/Reports/Model/Resource/Order/Collection.php#L134 "在 GitHub 上查看")）：

```
$this->getSelect()
            ->columns(array(
                'quantity' => 'COUNT(main_table.entity_id)',
                'range' => $tzRangeOffsetExpression,
            ))
            ->where('main_table.state NOT IN (?)', array(
                Mage_Sales_Model_Order::STATE_PENDING_PAYMENT,
                Mage_Sales_Model_Order::STATE_NEW)
            )
            ->order('range', Zend_Db_Select::SQL_ASC)
            ->group($tzRangeOffsetExpression); 
```

当然，任何提议的操作都是类重写:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:51:12.170

我找到了一种建议的解决方案，但应用它并没有取得多大成功。如果其他人可以验证这是一个可能的解决方案，我将修改此答案以反映这一点。我还将更改答案以正确应用更改而不修改核心文件。

* * *

打开 /app/code/core/Mage/Adminhtml/Block/Dashboard/Orders/Grid.php 并添加

```
$collection->addAttributeToFilter('state', Mage_Sales_Model_Order::STATE_PROCESSING); 
```

后

```
$collection = Mage::getResourceModel('reports/order_collection')
            ->addItemCountExpr()
            ->joinCustomerName('customer')
            ->orderByCreatedAt(); 
```

# java - 如何推送代码以使用尽可能多的 CPU 资源？

> ID：14401519
> 
> 赞同：1
> 
> 时间：2013-01-18T14:56:02.320
> 
> 标签：java, multithreading, performance, mapreduce

我有大量的文本文件。任务是计算这个庞大语料库中所有术语（唯一）的文档频率（包含某个术语的文档数量）。简单地从第一个文件开始并以序列化的方式计算所有内容似乎是一件愚蠢的事情（我承认我这样做只是为了看看它有多么灾难性）。我意识到，如果我以 Map-Reduce 方式进行此计算，这意味着将我的数据聚集成更小的部分并最终聚合结果，我会更快地获得结果。

我的 PC 有 4 个内核，所以我决定将我的数据分成 3 个不同的子集，并将每个子集提供给一个单独的线程，等待所有线程完成它们的工作并将它们的结果传递给另一个方法来聚合所有内容。

我用一组非常小的数据对其进行了测试，效果很好。在我使用实际数据之前，我用更大的数据集对其进行了测试，以便更好地研究它的行为。我启动了 jvisualvm 和 htop 来看看 cpu 和内存是如何工作的。我可以看到 3 个线程正在运行，并且 cpu 内核也很忙。但这些核心的使用率很少超过 50%。这意味着我的应用程序并没有真正使用我 PC 的全部功能。这与我的代码有关，还是应该如此。我的期望是每个线程都使用尽可能多的 cpu 核心资源。

我使用 Ubuntu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:58:29.253

听起来你有一个 IO 绑定应用程序。您在各个线程上花费更多时间从磁盘*读取*数据，然后您实际上是在处理读取的信息。

您可以通过将程序迁移到具有 SSD 的另一个系统来测试这一点，以查看 CPU 性能是否发生变化。您还可以读入所有文件，然后稍后处理它们，看看这是否会在处理期间改变 CPU 曲线。我怀疑会的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:03:31.447

如前所述，您可能受到磁盘 IO 的限制。尝试将从磁盘读取的代码与处理数据的代码分开，并为每个代码使用单独的线程池。之后，快速扩展线程池以适合您的资源的一种好方法是使用其中一个[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html)线程池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:58:41.937

您在单台机器上遇到此类问题的 IO 绑定，而不是 CPU 绑定。您是否正在积极阅读文件？只有当所有文件都在内存中时，CPU 才会开始饱和。这就是 map-reduce 有效的原因。它比 CPU 扩展了总 IO 吞吐量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:12:41.440

如果您在 Linux 上并使用 tmpfs 将数据存储在内存中而不是磁盘上，您可能会加快这一速度。

# c#-4.0 - 如何以编程方式在 Ms Sharepoint 2010 Workspace 中添加文件？

> ID：14401520
> 
> 赞同：1
> 
> 时间：2013-01-18T14:56:04.203
> 
> 标签：c#-4.0, sharepoint

是否可以使用 C# 并在 MS Sharepoint 2010 Workspace 的脱机文件夹中添加文件？

C# 控制台应用程序不需要检查连接并可能等待重新启动或其他任何事情，因为一旦建立连接，Ms Sharepoint Workspace 就会自动 snycs。

我无法使用谷歌或 MS Sharpoint Workspace SDK 找到任何线索。

# c++ - 如果包含的对象也继承，我如何定义相互继承的容器？（以 QObject 为基础）

> ID：14401522
> 
> 赞同：2
> 
> 时间：2013-01-18T14:56:08.967
> 
> 标签：c++, visual-studio-2008, inheritance, qobject

背景：

*   我有我的类`ObjectListModel`，它继承`QAbstractListModel`并包含一个`QObjectList`. 对象是行，它们的属性是列（使用 a 设置`QMetaObject`），并且通知更改会传播到视图。还有一些容器助手（开始/结束/迭代器/大小），以便我可以遍历存储的 QObject。
*   我也有一个`TypedObjectListModel<T>`，它提供类型安全（主要是通过覆盖`push_back`et.al. 并定义对 T起作用的新`iterator`类型）。`static_cast`

当我只有一种类型的对象时，这一切都很好。我只是创建新类 (f.ex. `FruitsModel`，其中包含`Q_OBJECT`并继承`TypedObjectListModel<Fruit>`。这只能包含 Fruits 或 Fruit-subobjects。

但是，我现在有一个可以在两种不同状态下运行的应用程序。在第二种状态下，模型应该只包含 Apples，而不是 Bananas（或 Fruits，这是一个具体的基类）。

所以，我想创建一个`ApplesModel`类型，它应该继承`FruitsModel`并只是改变 T 的类型。这让我遇到了麻烦，因为我得到了继承钻石**OF DEATH**：

```
 QObject
       |
 QAbstractListModel
       |
 ObjectListModel -------------------
       |                           |
 TypedObjectListModel<Fruit>     TypedObjectListModel<Apple>
       |                           |
 FruitsModel  -------------------ApplesModel 
```

这在概念上也是错误的，因为 FruitsModel::push_back(Fruit*) 在 ApplesModel 中是非法的。但是，应该可以读取/迭代 Fruits（不仅仅是 Apples）。

此外，我在 FruitsModel ( `findFruitById`) 中有一些函数应该被覆盖，并且只返回 ApplesModel 中的 Apples。

**在 C++ 中解决这个问题的首选设计模式是什么？**

*我怀疑（希望）我不是第一个尝试做类似事情的人。*

我尝试了很多想法，但我陷入了各种死胡同。你会认为 ObjectListModel 的虚拟继承可以解决这个问题，但后来我得到了这个`QObject::findChild`：

```
error C2635: cannot convert a 'QObject*' to a 'ApplesModel*'; conversion from a virtual base class is implied 
```

上述问题可以通过我自己的 findChild 实现来解决，改用 dynamic_cast，但仍有一些死胡同。

```
template<typename T>
inline T myFindChild(const QObject *parent, const QString &name = QString())
{ 
    return dynamic_cast<T>(qt_qFindChild_helper(parent, name, reinterpret_cast<T>(0)->staticMetaObject)); 
} 
```

**更新**

geekp 有以下建议：

> 从 Fruit 继承 Apple 不打扰 ApplesModel

然后我如何强制只有苹果在 FruitsModel 中？另外，每次我拿一个苹果（作为水果）时，我都需要沮丧。

> 不要从 FruitsModel 继承（如果你不使用它的方法，你为什么要这样做？）

我正在使用一些方法，尤其是那些用于阅读的方法。

> 不要从 Apple 的 TypesObjectListModel 继承，只继承 FruitsModel。

与不使用 AppleModel 的缺点相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:31:22.897

因此，读取和写入操作在继承方面是根本不同的。

回到 OOP 101，还记得关于正方形和长方形的比喻吗？人们常说正方形是长方形的一种，但只有在阅读时才如此。

写的时候，正方形不是长方形的种类，但长方形是正方形的种类！

IE：

```
bool test( Rectangle* r ) {
  int old_height = r->GetHeight();
  int old_width = r->GetWidth();
  r->SetWidth(old_width+100);
  return old_height == r->GetHeight();
} 
```

上述函数返回`true`所有“真实”矩形，但`Squares`可能不会。`SetWidth`因此，对于 合理 的周围的合同`Rectangle`被违反`Square`。

另一方面，每个`Rectangle`只读接口都由`Square`.

这可能会给你带来这样的混乱：

```
struct IRectangleRead { ... };
struct ISquareRead { ... };

struct ISquareWrite: virtual ISquareRead { ... };
struct IRectangleWrite:ISquareWrite, virtual IRectangleRead { ... };

struct ConstRectangle: virtual IRectangleRead { ... };
struct ConstSquare: virtual ISquareRead, virtual IRectangleRead { ... };

struct Rectangle: ConstRectangle, IRectangleWrite { ... };
struct Square: ConstSquare, ISquareWrite { ... }; 
```

这会产生一团糟的继承层次结构，但是可以在每个方法上放置限制性契约，并且实现该方法的每个对象都将遵守它们。

现在，您应该注意，如果您的对象是不可变的，那么上述操作会变得非常容易。那么唯一的写作形式就是通过工厂函数，事情就变得整洁了。

所以这里的具体课程 - 拆分代码的阅读和修改部分。通用修改部分（适用于基类）未公开公开，因为该操作在子类情况下无效。

普通阅读部分是公开的，亚型阅读部分也是如此。

子类型编写代码转发到私有公共基类编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:17:44.370

多种选择：

*   从 Fruit 继承 Apple 不打扰 ApplesModel
*   不要从 FruitsModel 继承（如果你不使用它的方法，你为什么要这样做？）
*   不要从 Apple 的 TypesObjectListModel 和子类继承 FruitsModel

# mysql - MySQL 排除和要求

> ID：14401527
> 
> 赞同：2
> 
> 时间：2013-01-18T14:56:18.790
> 
> 标签：mysql, sql, left-join

我想将此问题转换为查询。估计应该是三个leftjoin和两个select

```
exercises
+-----+---------+
|  id | require | 
+-----+---------+
|  1  |         |
|  2  |    1    |
|  3  |    2    |
|  4  |    3    |
|  5  |         |
|  6  |    5    |
|  7  |         |
+-----+---------+

done
+-----+
|  id |
+-----+
|  1  |
|  2  |
+-----+ 
```

做完功法一和二，我现在可以做哪些功法？
解：3,5,7

我的逻辑流程，一步一步：（
全部）-SELECT（必需-完成）-（完成）
（1,2,3,4,5,6,7）-SELECT（（1,2,3,5）- (1,2)) - (1,2)
(1,2,3,4,5,6,7) - SELECT(3,5) - (1,2)
(1,2,3,4,5 ,6,7) -(4,6) - (1,2)
(3,5,7)

如何编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:59:30.890

```
select id 
from exercises
where require in (select id from done)
   or require is null
minus
select id from done; 
```

您的设置是：“需要完成或不需要完成的练习，执行那些完成的练习”。

更新：没有减号（可能吓到你了）：

```
select id 
from exercises
where (require in (select id from done)  or require is null)
   and id not in  (select id from done); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:27:24.893

这是一种方法。

```
SELECT * FROM `exercises`
WHERE `id` NOT IN (SELECT `id` FROM `done`)
AND (
    `require` IS NULL OR
    `require` IN (SELECT `id` FROM `done`)
)
ORDER BY `id` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T18:08:21.797

没有子选择的另一种解决方案

```
SELECT e.id FROM exercises e 
LEFT JOIN done d ON d.id = e.id 
LEFT JOIN done d_req ON d_req.id=e.require 
WHERE (d.id IS NULL AND d_req.id IS NOT NULL) 
         OR (e.require IS NULL AND d.id IS NULL) 
```

可以`WHERE`简化（分布性）

```
WHERE d.id IS NULL AND (d_req.id IS NOT NULL OR e.require IS NULL ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T18:18:06.987

这是一个显示 LIVE 输出的有效 SQL 小提琴： [http ://sqlfiddle.com/#!2/0726b/29/0](http://sqlfiddle.com/#!2/0726b/29/0)

我也在此处粘贴查询：

```
SELECT id FROM 
(
  SELECT e1.* FROM exercises e1 
  LEFT JOIN done d1 ON e1.id = d1.id
  WHERE d1.id IS NULL

) AS r1

WHERE r1.`require` IS NULL OR r1.`require` IN (SELECT id from done) 
```

# c++ - Google Test (gtest)：ASSERT_PREDx 和类成员函数

> ID：14401528
> 
> 赞同：0
> 
> 时间：2013-01-18T14:56:22.597
> 
> 标签：c++, assert, googletest, class-members

好的，所以我正在使用 gtest 进行单元测试，并且我有一些我想做的事情：

```
class A {
    /* Private members */
public:
    bool function_to_test(int index);
} 
```

在测试功能中，我想使用：

```
A testEntity;
const int b = 40;
ASSERT_PRED1(testEntity.function_to_test, b); 
```

这似乎不起作用，因为它`ASSERT_PREDx`似乎是为全局范围功能设计的。我收到一条消息

> ```
> argument of type ‘bool (A::)(int) {aka bool (A::)(int)}’ does not match ‘bool (A::*)(int)’ 
> ```

我想知道是否有一个很好的解决方法？我总是可以使用带有全局变量的函数，但我不确定是否有一种单行方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T06:15:48.947

第一个参数[`ASSERT_PRED1(pred1, val1);`](http://code.google.com/p/googletest/wiki/AdvancedGuide#Predicate_Assertions_for_Better_Error_Messages)应该是一个可调用对象；一元函数或函子。

例如，如果您可以使用 C++11 lambda，您可以这样做：

```
ASSERT_PRED1([&testEntity](int i) { return testEntity.function_to_test(i); }, b); 
```

或者，如果您想使用一元函数助手：

```
struct TesterA : public std::unary_function <int, bool> {
  explicit TesterA(A& a) : a_(a) {}
  bool operator()(int i) { return a_.function_to_test(i); }
  A& a_;
};

ASSERT_PRED1(TesterA(testEntity), b); 
```

# c - 开机自动启动过程

> ID：14401529
> 
> 赞同：2
> 
> 时间：2013-01-18T14:56:25.820
> 
> 标签：c, windows, regedit

我正在为我的大学制作一个 Cloud Drive 程序（例如 Dropbox，但要简单得多），它可以让用户自动将文件上传到服务器上并与其他用户共享

我想做一个选项，这样如果有人启动机器，该过程将自动启动我认为我必须做的是在注册表中添加一个条目在键：HKEY_LOCAL_MACHINE/sofware/Windows/CurrentVersion/Run 和我写了这几行代码：

```
system("REG ADD HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Run /v uCloud.exe /t REG_SZ /d \"C:\\Desktop\\uCloud\\uCloud.exe\" /f"); 
```

我还尝试了以下功能：RegOpenKeyEx 和 RegSetValueEx

问题是在这两种情况下我都需要管理员权限

如果我编辑 HKEY_CURRENT_USER 程序会在启动时自动启动，但它根本不起作用（我的意思是我看到了该进程，但它什么也没做。我必须关闭该进程并手动再次打开它，然后它开始下载并更新东西）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:21:44.530

使用任务调度器时，可以使用管理员权限；见这里：[http ://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616](http://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616)

# python - 每 2 个字母解析一次字符串

> ID：14401543
> 
> 赞同：0
> 
> 时间：2013-01-18T14:57:24.080
> 
> 标签：python, parsing

我如何解析来自**.txt**文件的长字符串

> 2 个字符

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:04:40.230

尝试

```
print re.findall(r'[\S]{1,2}', "The quick brown fox jumped over the lazy dog")

>>
['Th', 'e', 'qu', 'ic', 'k', 'br', 'ow', 'n', 'fo', 'x', 'ju', 'mp', 'ed', 'ov', 'er', 'th', 'e', 'la', 'zy', 'do', 'g'] 
```

或者

```
print re.findall(r'.{1,2}', "The quick brown fox jumped over the lazy dog")

>>
['Th', 'e ', 'qu', 'ic', 'k ', 'br', 'ow', 'n ', 'fo', 'x ', 'ju', 'mp', 'ed', ' o', 've', 'r ', 'th', 'e ', 'la', 'zy', ' d', 'og'] 
```

**更新**

对于您的具体要求：

```
>>> print re.findall(r'[\S]{1,2}', "08AB78UF")
['08', 'AB', '78', 'UF']
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:12:17.787

您可以只压缩两个字符串，间隙为一个偏移量

```
>>> data = "foobar"
>>> map(''.join, zip(data, data[1:]))
['fo', 'oo', 'ob', 'ba', 'ar'] 
```

以及使用 itertools.izip 的类似解决方案

```
>>> from itertools import izip
>>> map(''.join, izip(data, data[1:]))
['fo', 'oo', 'ob', 'ba', 'ar'] 
```

如果您使用的是 Py3.X，请将地图转换为 LC

```
>>> [''.join(e) for e in  izip(data, data[1:])]
['fo', 'oo', 'ob', 'ba', 'ar'] 
```

正如@Duncan 提到的，子字符串会重叠。如果您想要不重叠的子字符串，请参考@Duncan 的答案，或@Duncan 的评论或石斑鱼配方

```
>>> [''.join(e) for e in list(izip_longest(*[iter(data)] * 2,fillvalue=''))]
['fo', 'ob', 'ar'] 
```

您可以轻松地将结果列表加入字符串

```
>>> ' '.join(''.join(e) for e in  izip(data, data[1:]))
'fo oo ob ba ar' 
```

# html - 在css中为文件上传按钮添加样式

> ID：14401550
> 
> 赞同：10
> 
> 时间：2013-01-18T14:57:45.617
> 
> 标签：html, css

我有一个带有以下css的文本字段和按钮：

JS 小提琴链接：http: [//jsfiddle.net/Tdkre/](http://jsfiddle.net/Tdkre/)

```
.submit {
      -moz-box-shadow:inset 0px 1px 0px 0px #cae3fc;
      -webkit-box-shadow:inset 0px 1px 0px 0px #cae3fc;
      box-shadow:inset 0px 1px 0px 0px #cae3fc;
      background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #79bbff), color-stop(1, #4197ee) );
      background:-moz-linear-gradient( center top, #79bbff 5%, #4197ee 100% );
      filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#79bbff', endColorstr='#4197ee');
      background-color:#79bbff;
     -moz-border-radius:6px;
     -webkit-border-radius:6px;
     border-radius:6px;
     border:1px solid #469df5;
     display:inline-block;
     color:#ffffff;
     font-family:arial;
     font-size:14px;
     font-weight:bold;
     padding:5px 14px;
     text-decoration:none;
     text-shadow:1px 1px 0px #287ace;
    cursor:pointer;
}
.submit:hover {
     background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #4197ee), color-stop(1, #79bbff) );
     background:-moz-linear-gradient( center top, #4197ee 5%, #79bbff 100% );
     filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#4197ee', endColorstr='#79bbff');
     background-color:#4197ee;
}
 .submit:active {
   position:relative;
   top:1px;
}

 .text-input {
    padding: 6px;
    font-size: 13px;
    border: 1px solid #d5d5d5;
    color: #333;
    border-radius: 4px 4px 4px 4px !important;
 }

<form>
    <input type="text" class="text-input" size="40"/>
    <input type="button" value="Upload" id="upload" class="submit"/>
</form> 
```

我想在文件上传输入类型中添加相同的样式。我是一个CSS初学者。我如何使用这种样式来文件上传按钮？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T15:35:57.743

试试这个解决方案：http: [//jsfiddle.net/JJRrc/1/](http://jsfiddle.net/JJRrc/1/)

**html**

```
<p class="form">
  <input type="text" id="path" />
  <label class="add-photo-btn">upload
    <span>
       <input type="file" id="myfile" name="myfile" />
    </span>
  </label>
</p> 
```

**CSS**

```
.form input[type="file"]{
  z-index: 999;
  line-height: 0;
  font-size: 50px;
  position: absolute;
  opacity: 0;
  filter: alpha(opacity = 0);-ms-filter: "alpha(opacity=0)";
  cursor: pointer;
  _cursor: hand;
  margin: 0;
  padding:0;
  left:0;
  }
 .add-photo-btn{
   position:relative;
   overflow:hidden;
   cursor:pointer;
   text-align:center;
   background-color:#83b81a;
   color:#fff;
   display:block;
   width:197px;
   height:31px;
   font-size:18px;
   line-height:30px;
   float:left;
 }
 input[type="text"]{
   float:left;
 } 
```

**jQuery**

```
$('#myfile').change(function(){
  $('#path').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T16:27:11.667

我试过这个，它对我来说看起来很不错。这有什么缺陷吗？这是 jsfiddle 链接[http://jsfiddle.net/Tdkre/1/](http://jsfiddle.net/Tdkre/1/)

```
#FileUpload {
    position:relative;
}

#BrowserVisible {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 1;
    background:url(upload.png) 100% 1px no-repeat;
    width:345px;
    height:30px;
}

#FileField {
    width:250px;
    margin-right:85px;
    padding: 6px;
    font-size: 13px;
    background: #fff url('bg-form-field.gif') top left repeat-x;
    border: 1px solid #d5d5d5;
    color: #333;
    border-radius: 4px 4px 4px 4px !important;
}

#BrowserHidden {
    position:relative;
    width:345px;
    height:30px;
    text-align: right;
    -moz-opacity:0;
    filter:alpha(opacity: 0);
    opacity: 0;
    z-index: 2; 
}

<div id="FileUpload">
<input type="file" size="24" id="BrowserHidden" onchange="getElementById('FileField').value = getElementById('BrowserHidden').value;" />
<div id="BrowserVisible"><input type="text" id="FileField" /></div> 
```

这是图片 ![在此处输入图像描述](../Images/44091c7b1809582414a1bbed37e614b2.png) ![在此处输入图像描述](../Images/d5e97d4f29b99b9e233ca844bd40366b.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-14T15:09:40.017

你也可以使用 jQuery，像这样：

```
<img id="image" style="cursor:pointer;" src="img.jpg" />
<input type='file' style="display:none;" name="photosubmit" id="photosubmit"/> 
```

而这个jquery代码

```
$("#image").click(function(){
 $("#photosubmit").click();
}); 
```

希望这对某人也有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-25T06:41:02.230

试试这个：

在您的 css 文件中，将其放在文件末尾或其他地方：`input[type="file"]::-webkit-file-upload-button`. 此语法仅适用于按钮样式。

如果你只放在那里：`input[type="file"]`你可以在你有文件名的地方设置数组的样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T15:46:03.960

众所周知，文件上传按钮的样式很难，但如果你愿意使用 jQuery 和一个插件，我发现[这个](http://blueimp.github.com/jQuery-File-Upload/)非常有用。

它使您可以在任何 DOM 元素上“伪造”文件上传按钮功能，因此您可以以任何您想要的方式对其进行样式设置。适用于所有主流浏览器，包括旧版 IE。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-23T17:44:12.750

我在包含一个或多个未更改的 html`<input type="file">`元素的页面上运行这个相对较短的 jQuery。

jQuery 将隐藏元素并在适当的地方插入模仿相同行为的新元素。

此答案与页面上的其他答案相似，但已在 IE 浏览器以及开发人员实际上花时间支持仔细考虑的 Web 标准的浏览器中进行了测试。

```
$(document).ready(function(){

  // replace all file upload elements for styling purposes
  $('input[type="file"]').each(function(){
    var btn = $('<button class="file">Browse...</button>');
    var txt = $('<span class="file"></span>');
    $(this).after(txt).after(btn);
    $(this).css({display:'none'});
    var target = this;
    $(btn).click(function(ev){ 
      ev.preventDefault(); 
      $(target).click(); 
    })
    $(target).change(function(){
      // IE uses a stupid renaming scheme that includes "fake-path"
      var fname = $(target).val()
      $(txt).html(fname.substr(fname.lastIndexOf('\\')+1));
    });
  });
}); 
```

现在，您只需要根据自己的喜好设置样式`button.file`，`span.file`就可以开始了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-27T10:31:55.087

这是一个[链接](http://jsfiddle.net/milankyada/h9h3xj4a/)。您可以更改按钮的样式。

HTML

```
<button>upload</button>
<input type="text" id="f" disabled="disabled" />
<input id="html_btn" type='file' " /><br> 
```

CSS

```
button {
    border-radius:10px;
    padding:5px;
}
#html_btn {
    display:none;
} 
```

Javascript

```
$('button').bind("click", function () {
    $('#html_btn').click();

});
$('#html_btn').change(function () {
    document.getElementById("f").value = $('#html_btn').val();
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-16T07:16:25.160

简单的解决方案：仅带有 css 的自定义文件上传按钮

```
.fileUpload input[type=file]{
                display:none;
            }
            .btn{
                background-color:#e3e3e3;
                color:#333;
                border:1px solid #e6e6e6;
                border-radius:3px;
                padding:6px 12px;
                font-size:16px;
            }
```

```
<label class="btn fileUpload btn-default">
       Browse <input type="file" hidden="">
</label>
```

# javascript - 点击 li 左动画

> ID：14401551
> 
> 赞同：2
> 
> 时间：2013-01-18T14:57:46.847
> 
> 标签：javascript, jquery, html, css

我有一个菜单结构：

```
<ul id="creamenu" class="menuHolder">
                    <li><a id="news-1-menu" href="#/creative-events">news 1</a></li>
                    <li><a id="news-2-menu" href="#/creative-ajans">news 2</a></li>
                    <li><a id="news-3-menu" href="#/incentive-travel">news 3</a></li>
                </ul>
                <ul id="mainmenu" class="menuHolder">
                    <li><a id="about1-menu" href="#/hakkimizda">about 1</a></li>
                    <li><a id="about2-menu" href="#/haberler">about 2</a></li>
                    <li><a id="about3-menu" href="#/galeri">about 3</a></li>
                    <li><a id="about4-menu" href="#/referanslar">about 4</a></li>
                    <li><a id="about5-menu" href="#/iletisim">about 5</a></li>
</ul> 
```

我在同一个 HTML 文件中有一个内容结构：

```
 <div id='news-1'>
        <!-- content -->
        <!-- content -->
</div>

    <div id='news-2'>
        <!-- content -->
        <!-- content -->
</div> 
```

我想，当我单击一个项目时，例如 creamenu 项目，转到 div。例如

单击 news-1 项目，转到 news-1 div。像这样：[http ://codecanyon.net/item/fancyscroll/full_screen_preview/370241](http://codecanyon.net/item/fancyscroll/full_screen_preview/370241)

纯jQuery可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:07:55.133

这是绝对可能的。试试这个：

```
$('#creamenu a').click(function(e) {
    var splitId = $(this).attr('id').split('-'),
        contentId = splitId[0] + '-' + splitId[1];

    e.preventDefault();

    $('html, body').animate({
      scrollTop: $('#' + contentId).offset().top
    }, 'slow');
}); 
```

使用这种特定方法，您需要确保#creamenu 中链接的 id 以相应内容的 id 开头（就像您现在所做的那样）。

将您的内容的 id 放在 #creamenu 链接的 href 中也会更加健壮。这样，如果用户没有激活 JS，它仍然会跳转到内容，尽管没有动画。例如：

```
<li><a id="news-1-menu" href="#news-1">news 1</a></li> 
```

然后，您的 JS 将如下所示：

```
$('#creamenu a').click(function(e) {
    e.preventDefault();

    $('html, body').animate({
      scrollTop: $($(this).attr('href')).offset().top
    }, 'slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:00:51.643

是的，只需将您的`href`属性更改为元素的 ID：

```
<li><a id="news-1-menu" href="#news-1">news 1</a></li> 
```

要平滑滚动，请尝试：

```
$('a[href^=#]').on('click',function(e) {
  e.preventDefault();
  var id = $(this).attr('href'),
      top = $(id).offset().top;
  $('html,body').animate({'scrollTop':top}, function() {
    window.location = id;
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:01:24.310

```
<li><a id="news-1-menu" href="#news-1">news 1</a></li> 
```

使用 id 作为 href 页面只是跳转到目标框。使用像[scrollTo](http://flesler.blogspot.de/2007/10/jqueryscrollto.html)这样的插件来使其滚动流畅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:02:28.733

你可以，但你需要对你的代码做一些小的改动。

```
$('#creamenu li a').click(function(event){
   event.preventDefault();
   $position = $( $(this).attr('href') ).offset().top;
   $('html, body').animate({scrollTop:$position}, 'fast');
}); 
```

并更改链接结构，因此 href 是您想要滚动到的元素的 id。

您还可以使链接看起来像这样：

```
<li><a id="news-1-menu" href="#/creative-events" rel="#news-1">news 1</a></li> 
```

并使用 rel 属性查找元素，您想滚动到：

```
$('#creamenu li a').click(function(event){
       event.preventDefault();
       $position = $( $(this).attr('rel') ).offset().top;
       $('html, body').animate({scrollTop:$position}, 'fast');
}); 
```

如果您正在寻找视差效果： http: [//jessandruss.us/](http://jessandruss.us/)，请在此处查看教程：[http](http://www.ianlunn.co.uk/blog/code-tutorials/jquery-vertical-parallax-background/) ://www.ianlunn.co.uk/blog/code-tutorials/jquery-vertical-parallax-background/或在这里：[http ://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/)

# android - 在 imageviews 中创建动画

> ID：14401555
> 
> 赞同：1
> 
> 时间：2013-01-18T14:58:08.597
> 
> 标签：android, image, animation, imageview

我有一个带有默认图像的图像视图。现在，当我尝试单击它时，我希望它动画显示 4 帧图像。我怎么能做到这一点，我尝试了一种更简单的方法（更愚蠢的方法），将 imageresource 更改了 4 次，正如预期的那样，图像变化如此之快以至于动画图像效果不可见。有任何想法吗？

我尝试了这种方法：

```
Gem = (ImageView)v;
    Gem.setImageResource(com.example.gems.R.drawable.bd1);
    Gem.postDelayed(new Runnable() {
        public void run() {
            Gem.setImageResource(com.example.gems.R.drawable.bd2);
            Gem.postDelayed(new Runnable() {
                public void run() {
                    Gem.setImageResource(com.example.gems.R.drawable.bd3);
                    Gem.postDelayed(new Runnable() {
                        public void run() {
                            Gem.setImageResource(com.example.gems.R.drawable.bd4);
                            Gem.postDelayed(new Runnable() {
                                public void run() {
                                }
                            }, 500);
                        }
                    }, 500);
                }
            }, 500);
        }
    }, 500); 
```

它起作用了，但是有没有更好的方法而不用编码太多行？我有 25 种图像，每张图像有 4 帧。

编辑：

我尝试使用 xml 转换文件：

Java 文件：

```
Resources res = this.getResources();
    Gem = (ImageView)v;
    TransitionDrawable transition;

    transition = (TransitionDrawable)
            res.getDrawable(R.drawable.blue_diamond_animation);
    Gem.setImageDrawable(transition);
    transition.startTransition(3000); 
```

xml文件：

```
 <transition xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:drawable="@drawable/bd1"></item>
  <item android:drawable="@drawable/bd2"></item>
  <item android:drawable="@drawable/bd3"></item>
  <item android:drawable="@drawable/bd4"></item>
  <item android:drawable="@drawable/invi"></item>
 </transition> 
```

这似乎可行，但我不想在过渡中绘制这些图像。我想在过渡中更改背景。我尝试将其更改`android:drawable`为，`android:drawable`但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:24:17.673

事实证明，有一个确切的类：[AnimationDrawable](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)

基本上，只需将要在动画中使用的其他图片的帧添加到`AnimationDrawable`对象，并指定它们应该显示多长时间`addFrame(Drawable frame, int duration)`

然后设置`ImageView`显示它应该开始的任何图像并将背景设置为`AnimationDrawable`您刚刚使用`setBackgroundDrawable(Animation)`

最后，在`onClick`监听器中启动动画

**编辑：例如**

```
AnimationDrawable ad = new AnimationDrawable();
ad.addFrame(getResources().getDrawable(R.drawable.image1), 100);
ad.addFrame(getResources().getDrawable(R.drawable.image2), 500);
ad.addFrame(getResources().getDrawable(R.drawable.image3), 300);

ImageView iv = (ImageView) findViewById(R.id.img);
iv.setBackgroundDrawable(animation); 
```

然后在你的 onClick 监听器中，调用`ad.start`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:19:52.407

这取决于您要完成的工作。你没有提供足够的信息来继续

viewproperty animator 真的是最容易使用的东西，看看。它也可以与使用 Nineoldandroids jar 的旧 API 一起使用（google it）

[http://developer.android.com/reference/android/view/ViewPropertyAnimator.html](http://developer.android.com/reference/android/view/ViewPropertyAnimator.html)

ObjectAnimator 和 ValueAnimator 也可用，但实现起来稍微困难一些

[http://developer.android.com/reference/android/animation/ObjectAnimator.html](http://developer.android.com/reference/android/animation/ObjectAnimator.html) http://developer.android.com/reference/android/animation/ValueAnimator.html

查看示例包中的 APIdemos，其中有几个示例主要使用 ValueAnimator。 [http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

也有 Sprites 需要考虑，但它基本上是一个位图，你可以使用计时器来编排

# mysql - 以自动增量 id 为键的 MySQL 性能缺失值

> ID：14401559
> 
> 赞同：1
> 
> 时间：2013-01-18T14:58:20.017
> 
> 标签：mysql, performance, primary-key, auto-increment

示例：我有一个标签“books”，其中“id”（int autoincrement）作为主键、名称、作者、价格等......（不重要）。有 5 本书，我删除了 id=3 的书。当我添加其他书籍时，自动增量值将从 6 开始，并且 id 序列中缺少 3（1 2 4 5 6）。因此，如果我没有设置自动增量值或者我没有将 id 重新分配给书籍，那么多次删除/添加可以创建一个缺少 id 值的选项卡。

id 中缺少数字的情况会降低查询的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:05:43.760

您无需担心缺少自动增量值的性能。

只需确保为自动增量列选择正确的[数据类型](http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html#integer-types)，这样您就不会用完值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:18:21.993

自动增量没问题。一个普通的整数字段可以处理大量数据。您可以使用“未签名”选项来增加此金额。

# android - 当我在模拟器中播放 youtube rtsp url 数据时，ReadDevice 显示如下

> ID：14401564
> 
> 赞同：0
> 
> 时间：2013-01-18T14:58:30.267
> 
> 标签：android, video-streaming, rtsp

当我播放 youtube rtsp 数据时显示此图像。相同的 rtsp-url 数据适用于移动设备，但不适用于 Soney-S Tab。请帮助我。

![在此处输入图像描述](../Images/e1e2dc8846acd5d140c502454786e81d.png)

# forms - Access 2010 - 无法编辑由记录集填充的未绑定形式的文本框

> ID：14401566
> 
> 赞同：1
> 
> 时间：2013-01-18T14:58:35.200
> 
> 标签：forms, textbox, edit, recordset

我正在将 Access 2010 与 SQL Server 2008 中的链接表一起使用。我有一个使用记录集填充的表单，并且此表单中文本框的控制源设置为记录集中的一个字段。我发现虽然我可以浏览表单上的所有 16 条记录，并且表单加载正确，但我无法编辑 Notes 文本框。它需要是可编辑的。文本框的 Enabled=True 和 Locked=False。表单的 AllowEdits 属性设置为 true。查询中的所有表都有主键。那么，这是我的查询吗 - 因为它有正确的和内部的连接？所以问题是我无法在文本框中输入。

只是一点背景知识，我尝试使用查询作为此表单的记录源，但发现 Access 的自动保存功能将不完整的记录插入到我的结果表中，以及我的保存按钮事件完成的更新和插入。如果避免这种情况的唯一方法是在每次导航时询问用户他/她是否愿意保存更改，那么这对最终用户来说太令人沮丧了。所以，我不得不使用一个未绑定的表单，我使用 VBA 使用 ADO 记录集来填充它。

顺便说一句，我可以编辑 DocID 和 DocumentType 列，这是无法更改的查询字段（QCNote）

这是来自我的 Form_Open 事件的代码。我还有一个 Form_Current 事件，它禁用了不适用类别的提交按钮。

```
Private Sub Form_Open(Cancel As Integer)

Dim cn As ADODB.Connection
Dim rs As ADODB.Recordset 

Set cn = CurrentProject.AccessConnection
Set rs = New ADODB.Recordset
With rs
Set .ActiveConnection = cn

DocID = [Forms]![QCDocAttributes]![DocID]

DocumentType = [Forms]![QCDocAttributes]![Document Type]

strSQL = "SELECT " & DocID & " AS DocID,'" & DocumentType & "' AS DocumentType,     QC_QCDecisionPoint.Description, QC_QCDecisionPoint.QCDecisionPointID , QC_QCResultDecisionPoint.QCNote FROM QC_QCResultDecisionPoint RIGHT JOIN ((QC_QCAttribute INNER JOIN QC_QCAttributeDecisionPointAsc ON QC_QCAttribute.QCAttributeID = QC_QCAttributeDecisionPointAsc.QCAttributeID) INNER JOIN QC_QCDecisionPoint ON QC_QCAttributeDecisionPointAsc.QCDecisionPointID = QC_QCDecisionPoint.QCDecisionPointID) ON QC_QCResultDecisionPoint.QCDecisionPointID = QC_QCDecisionPoint.QCDecisionPointID WHERE (((QC_QCAttribute.Description)= '" & [Forms]![QCDocAttributes]![AttributesDropdown] & "' ));"

.Source = strSQL
.LockType = adLockOptimistic
.CursorType = adOpenKeyset
.Open
End With
Set Me.Recordset = rs

Set rs = Nothing
Set cn = Nothing

End Sub 
```

# shellcode - 注入shellcode

> ID：14401569
> 
> 赞同：0
> 
> 时间：2013-01-18T14:58:40.953
> 
> 标签：shellcode

我在网络服务器上有一个带有变量 user="..." 的 .cmd 文件，容易受到缓冲区溢出的影响。我可以通过 ssh 或 web 执行 .cmd 文件。现在我有了这个shellcode：

```
#include <stdio.h>

char sc[] =
         "
          ...
             ";

void main(void)
{

       void(*s)(void);
       printf("size: %d\n", sizeof(sc));
       s = sc;
       s();
} 
```

我的问题是，我不知道这一切是如何一起发挥的。我知道汇编程序和 C 代码的作用，但是如何将代码注入正在运行的 cmd 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T17:25:04.110

```
cat "shellcode "  | nc host cmd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T18:23:39.713

您通常必须插入足够的数据，以便您的写入最终进入程序执行的部分内存。如何做到这一点完全取决于溢出程序的结构。

但是，想象一下如果这个 ASM 清单指定了程序：

```
[SECTION .text]

global _start

_start:
;;...
jmpagain: 
jmp next

uname db "username"
next:
mov eax,uname
;;...
jmp jmpagain 
```

该字符串`"username"`在内存中紧邻指令指针访问的地址。如果程序在没有检查边界的情况下将一些数据写入该内存区域，它将覆盖代码，并且只要指令指针重新访问该`next`函数，机器就会执行该内存部分中溢出的任何数据。假设您正在利用的写入从字符串的开头开始，并在某些为您注入 shellcode 提供足够空间的条件下停止写入，您将`"username"`在输入中添加一个与您的 shellcode 长度相同的字节字符串。那么你的 shellcode 的开头将是`next`标签的地址。

但这只是基本原理的简单示例演示。实际上，将数据放入指令指针访问的内存区域可能会更加棘手。如果您有权访问有问题的命令文件，则可以对其进行调试并转储内存并跟踪内存区域的写入方式，以查看您需要如何溢出缓冲区才能到达 IP 可访问内存。

重要的是要重申，您的 shellcode 不仅需要将其放入指令指针传递的内存中，还需要在该内存中正确对齐才能以您期望的方式执行。如果指令指针位于代码中间的某个位置而不是第一条指令的开头，那么它显然不会按照您的预期执行。

# sql-server - Sql Server 项目：部署后脚本

> ID：14401574
> 
> 赞同：0
> 
> 时间：2013-01-18T14:58:56.870
> 
> 标签：sql-server, database-project

我有一个数据库项目，我想知道添加预定数据（如状态、类型等）的最佳实践是什么......

*   每种状态/类型都有 1 个部署后脚本吗？或者
*   我是否有 1 个`:r someStatus.sql`用于每个状态/类型脚本的部署后脚本？

我想第三种选择可能是将所有插入都放在一个巨大的脚本中，但这对我来说似乎很糟糕。过去，我使用过选项 2，但我不确定为什么要这样做。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:02:05.333

有工具可以打包您的数据。我愉快地使用了 RedGate SQL Packager（不是免费的）和从开发环境中提取的 DBUnit XML 数据文件，并通过 Ant`<dbunit>`任务发送到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T15:49:11.437

对于我们的场景，我们使用#3 和#2 的组合。如果我们有一个新的构建，我们会填充空数据库，将我们通常使用的部署后插入设置为不运行，然后在整个构建/发布之后填充数据。我也倾向于批量处理相关的插入，所以如果我要插入 15 个状态，我会将它们添加到一个脚本中。这样做的缺点是您需要确保您的脚本可以重新运行并且不会导致问题，因此插入临时表，然后对您的实际表进行左连接可能是最好的解决方案。它将脚本的数量减少到更易于管理的大小。

对于增量发布，我倾向于按 Story（使用 Scrum）批量插入，以便相关脚本放在一起。它还可以帮助我了解脚本何时在生产中运行并且可以安全地从项目中删除。

您可能还想查看某种“参考”数据库，您只存储参考值，然后可能需要使用诸如 Red-Gate 的数据比较之类的工具来提取适当的数据集。专业版可以自动化/脚本化，因此您可以更轻松地提取新数据进行测试。从长远来看，这可能是您的最佳解决方案，因为您可以轻松设置要复制的表并设置数据过滤器。

# php - Soap 客户端/服务器“无效参数（stdClass）”

> ID：14401578
> 
> 赞同：2
> 
> 时间：2013-01-18T14:59:02.503
> 
> 标签：php, soap, apache2, soap-client

下面我包含了我的 PHP 客户端尝试与服务器通信的堆栈跟踪。客户端和服务器都读取 WSDL 文件文件，因此这部分无关紧要。

正如您在第二个堆栈跟踪数组项中看到的那样，我正在传递一个二维数组，但是当 SoapServer 执行它的`__doRequest()`功能时，该数组已被连接成一个单一的、无法管理的字符串。任何有关如何解决此问题的解决方案将不胜感激。

```
Internal Server ErrorArray
(
[0] => Array
    (
        [function] => __doRequest
        [class] => SoapClient
        [type] => ->
        [args] => Array
            (
                [0] => 
1Colby Meiertruetrue5510.517.55601000250020100151502015302000true10false0true23true12false152002020023.51031000.345231003.25520152.45258.52011.255152012

                [1] => http://192.168.1.120/test_soap/Client_Billing.php
                [2] => 
                [3] => 1
                [4] => 0
            )

    )

[1] => Array
    (
        [file] => /var/www/test_soap/client_avid_new.php
        [line] => 92
        [function] => __call
        [class] => SoapClient
        [type] => ->
        [args] => Array
            (
                [0] => CreatePlan
                [1] => Array
                    (
                        [0] => Array
                            (
                                [session-id] => 1
                                [plan] => Array
                                    (
                                        [name] => Colby Meier
                                        [is-public] => 1
                                        [active] => 1
                                        [country-id] => 5
                                        [setup-fee] => 5
                                        [base-rate] => 10.5
                                        [quarterly-per-month-rate] => 17.5
                                        [bi-annual-per-month-rate] => 56
                                        [annual-per-month-rate] => 0
                                        [blast-limit] => 1000
                                        [social-limit] => 2500
                                        [keyword-limit] => 20
                                        [vote-limit] => 100
                                        [auto-response-limit] => 15
                                        [text-2-screen-limit] => 150
                                        [survey-limit] => 20
                                        [trivia-limit] => 15
                                        [text-2-win-limit] => 30
                                        [mobile-website-limit] => 2000
                                        [enable-ftp] => 1
                                        [ftp-fee] => 10
                                        [enable-contact-manager] => 
                                        [contact-manager-fee] => 0
                                        [enable-mobile-website] => 1
                                        [mobile-website-fee] => 23
                                        [enable-listrak] => 1
                                        [listrak-fee] => 12
                                        [enable-url-qr] => 
                                        [url-qr-fee] => 15
                                        [mt-quota] => 200
                                        [mt-overage] => 20
                                        [mo-quota] => 200
                                        [mo-overage] => 23.5
                                        [keyword-quota] => 10
                                        [keyword-overage] => 3
                                        [mobile-website-quota] => 100
                                        [mobile-website-overage] => 0.3
                                        [keyword-campaign-quota] => 45
                                        [keyword-campaign-overage] => 23
                                        [vote-quota] => 100
                                        [vote-overage] => 3.25
                                        [auto-response-quota] => 5
                                        [auto-response-overage] => 20
                                        [text-2-screen-quota] => 15
                                        [text-2-screen-overage] => 2.45
                                        [survey-quota] => 25
                                        [survey-overage] => 8.5
                                        [trivia-quota] => 20
                                        [trivia-overage] => 11.25
                                        [text-2-win-quota] => 5
                                        [text-2-win-overage] => 15
                                        [social-quota] => 20
                                        [social-overage] => 12
                                    )

                            )

                    )

            )

    )

[2] => Array
    (
        [file] => /var/www/test_soap/client_avid_new.php
        [line] => 92
        [function] => CreatePlan
        [class] => SoapClient
        [type] => ->
        [args] => Array
            (
                [0] => Array
                    (
                        [session-id] => 1
                        [plan] => Array
                            (
                                [name] => Colby Meier
                                [is-public] => 1
                                [active] => 1
                                [country-id] => 5
                                [setup-fee] => 5
                                [base-rate] => 10.5
                                [quarterly-per-month-rate] => 17.5
                                [bi-annual-per-month-rate] => 56
                                [annual-per-month-rate] => 0
                                [blast-limit] => 1000
                                [social-limit] => 2500
                                [keyword-limit] => 20
                                [vote-limit] => 100
                                [auto-response-limit] => 15
                                [text-2-screen-limit] => 150
                                [survey-limit] => 20
                                [trivia-limit] => 15
                                [text-2-win-limit] => 30
                                [mobile-website-limit] => 2000
                                [enable-ftp] => 1
                                [ftp-fee] => 10
                                [enable-contact-manager] => 
                                [contact-manager-fee] => 0
                                [enable-mobile-website] => 1
                                [mobile-website-fee] => 23
                                [enable-listrak] => 1
                                [listrak-fee] => 12
                                [enable-url-qr] => 
                                [url-qr-fee] => 15
                                [mt-quota] => 200
                                [mt-overage] => 20
                                [mo-quota] => 200
                                [mo-overage] => 23.5
                                [keyword-quota] => 10
                                [keyword-overage] => 3
                                [mobile-website-quota] => 100
                                [mobile-website-overage] => 0.3
                                [keyword-campaign-quota] => 45
                                [keyword-campaign-overage] => 23
                                [vote-quota] => 100
                                [vote-overage] => 3.25
                                [auto-response-quota] => 5
                                [auto-response-overage] => 20
                                [text-2-screen-quota] => 15
                                [text-2-screen-overage] => 2.45
                                [survey-quota] => 25
                                [survey-overage] => 8.5
                                [trivia-quota] => 20
                                [trivia-overage] => 11.25
                                [text-2-win-quota] => 5
                                [text-2-win-overage] => 15
                                [social-quota] => 20
                                [social-overage] => 12
                            )

                    )

            )

    ) 
```

)

这是我调用客户端的代码：

```
$test = $client->CreatePlan(array("session-id"=>"1", "plan"=>$pa)); //$pa variable shown in stack trace 
```

这是服务器上的相关代码：

```
 public function _checkArguments($arguments, $validParameters) {
    $variables = "";
    foreach ($arguments as $arg) {
        $type = gettype($arg);
        echo "type is ".$type;
        if ($type == "object") {
            $type = get_class($arg);
        }
        $variables .= "(".$type.")";
    }
    if (!in_array($variables, $validParameters)) {
        throw new Exception("Invalid parameter types: ".str_replace(")(", ", ", $variables));
    }
    return true;
}

/**
 * Service Call: CreatePlan
 * Parameter options:
 * (CreatePlan) parameters
 * @param mixed,... See function description for parameter options
 * @return CreatePlanResponse
 * @throws Exception invalid function signature messages
 */
public function CreatePlan($mixed = null) {
    $validParameters = array(
        "(CreatePlan)",
    );
    $args = func_get_args();
    echo "<pre>Args are: ".print_r($args)."</pre>";

    $this->_checkArguments($args, $validParameters);
    return $this->__soapCall("CreatePlan", $args);
} 
```

如您所料，该功能在`func_get_args()`. 在过去的几天里，这一直让我完全发疯，所以任何建议都将不胜感激。

**编辑**：当我说它失败时，`func_get_args`我的意思是我得到一个空变量返回。所以在 的情况下`$args = func_get_args()`，`$args`为空。

**编辑 2**：如果它有助于解决我的问题，这是来自 Apache 服务器日志的错误。

`[error] [client 192.168.1.120] PHP Fatal error: Uncaught exception 'Exception' with message 'Invalid parameter types: (stdClass)' in /var/www/test_soap/Client_Billing.php:2200\nStack trace:\n#0 /var/www/test_soap/Client_Billing.php(2220): Client_Billing->_checkArguments(Array, Array)\n#1 [internal function]: Client_Billing->CreatePlan(Object(stdClass))\n#2 /var/www/test_soap/Client_Billing.php(2642): SoapServer->handle()\n#3 {main}\n thrown in /var/www/test_soap/Client_Billing.php on line 2200`

**编辑 3**：根据请求，这是相关类型的 WSDL 片段。

```
<complexType name="CreatePlanType"><!-- ns__CreatePlanType -->

   <sequence>
     <element name="name" type="xsd:string" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::name -->
     <element name="is-public" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::is_public -->
     <element name="active" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::active -->
     <element name="country-id" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::country_id -->
     <element name="setup-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::setup_fee -->
     <element name="base-rate" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::base_rate -->
     <element name="quarterly-per-month-rate" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::quarterly_per_month_rate -->
     <element name="bi-annual-per-month-rate" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::bi_annual_per_month_rate -->
     <element name="annual-per-month-rate" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::annual_per_month_rate -->
     <element name="blast-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::blast_limit -->
     <element name="social-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::social_limit -->
     <element name="keyword-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::keyword_limit -->
     <element name="vote-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::vote_limit -->
     <element name="auto-response-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::auto_response_limit -->
     <element name="text-2-screen-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_screen_limit -->
     <element name="survey-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::survey_limit -->
     <element name="trivia-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::trivia_limit -->
     <element name="text-2-win-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_win_limit -->
     <element name="mobile-website-limit" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mobile_website_limit -->
     <element name="enable-ftp" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::enable_ftp -->
     <element name="ftp-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::ftp_fee -->
     <element name="enable-contact-manager" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::enable_contact_manager -->
     <element name="contact-manager-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::contact_manager_fee -->
     <element name="enable-mobile-website" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::enable_mobile_website -->
     <element name="mobile-website-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mobile_website_fee -->
     <element name="enable-listrak" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::enable_listrak -->
     <element name="listrak-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::listrak_fee -->
     <element name="enable-url-qr" type="xsd:boolean" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::enable_url_qr -->
     <element name="url-qr-fee" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::url_qr_fee -->
     <element name="mt-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mt_quota -->
     <element name="mt-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mt_overage -->
     <element name="mo-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mo_quota -->
     <element name="mo-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mo_overage -->
     <element name="keyword-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::keyword_quota -->
     <element name="keyword-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::keyword_overage -->
     <element name="mobile-website-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mobile_website_quota -->
     <element name="mobile-website-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::mobile_website_overage -->
     <element name="keyword-campaign-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::keyword_campaign_quota -->
     <element name="keyword-campaign-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::keyword_campaign_overage -->
     <element name="vote-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::vote_quota -->
     <element name="vote-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::vote_overage -->
     <element name="auto-response-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::auto_response_quota -->
     <element name="auto-response-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::auto_response_overage -->
     <element name="text-2-screen-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_screen_quota -->
     <element name="text-2-screen-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_screen_overage -->
     <element name="survey-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::survey_quota -->
     <element name="survey-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::survey_overage -->
     <element name="trivia-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::trivia_quota -->
     <element name="trivia-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::trivia_overage -->
     <element name="text-2-win-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_win_quota -->
     <element name="text-2-win-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::text_2_win_overage -->
     <element name="social-quota" type="xsd:int" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::social_quota -->
     <element name="social-overage" type="xsd:float" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlanType::social_overage -->
   </sequence>
  </complexType>
<element name="CreatePlan">
   <complexType>
    <sequence>
     <element name="session-id" type="xsd:string" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlan::session_id -->
     <element name="plan" type="ns:CreatePlanType" minOccurs="1" maxOccurs="1"/><!-- ns__CreatePlan::plan -->
    </sequence>
   </complexType>
  </element> 
```

运行soap服务器的代码：

```
$server = new SoapServer("http://192.168.1.120/Client_Billing.wsdl");
$server->setClass("Client_Billing");
$server->handle(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:03:24.260

您是否正在使用`var_dump()`并查看浏览器中的输出？可能是浏览器隐藏了实际存在的 XML 标记！尝试页面上的“查看源代码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:39:45.933

我认为它抓住了 PHP SoapServer 中对动态对象的特殊支持。如果可以，请尝试用描述的类替换数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T09:30:57.147

多次遇到肥皂和 PHP 问题后，我使用以下方法进行调试：首先尝试回显您的响应：

```
echo htmlentities(var_dump($test,true)); 
```

如果没有，请继续执行此步骤：查找soap错误的最佳方法是使用嗅探器和soapUI进入安装soap UI，然后创建第一个项目非常简单： http: [//www.soapui.org/Getting-Started/your-第一个soapui-project.html](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)

安装数据包嗅探器

创建项目并输入 WSDL 后，您将能够调用 soap 服务方法，当您调用这些方法时，您必须手动输入参数。输入它们并运行函数，如果运行正常，则表示 PHP 端某处存在错误，或者隐藏在 HTML 注释中。为了更好地了解错误在哪里，您必须使用嗅探器来捕捉您从肥皂服务获得的响应，运行嗅探器。然后你将不得不分析你得到的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:11:15.780

根据我的经验，在 PHP 中调试 web 服务是一件痛苦的事情……但如果可以的话，我会尽力为您提供一些帮助。

您正在使用的 WSDLInterpreter 是什么？那是您开发的某个第三方类或某些包装器，只是为了在您创建客户端时做一些额外的事情吗？你有什么理由不使用[SoapClient](http://php.net/manual/en/class.soapclient.php)吗？

您是否尝试过用您正在使用并在 WSDL 中提及的类的对象的实际实例替换您发送的那些数组？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T23:07:42.150

所以万一有人还在关注这个帖子。我发现了问题所在，我希望我可以说我也不是一个完全没有看到它的白痴，但我不倾向于养成撒谎的习惯。

整个问题源于我的“服务器”类正在扩展我的“客户端”类，并`__soapCall()`在soap调用本身中递归调用。

# objective-c - 在子视图上按下按钮时从子视图调用超级视图的方法

> ID：14401584
> 
> 赞同：1
> 
> 时间：2013-01-18T14:59:18.477
> 
> 标签：objective-c

我有一个视图控制器，我在上面绘制 uiview，在这个 uiview 上有一个按钮。我想在按下此按钮时在父视图控制器上调用一个方法，该方法将在 viewcontroller 上绘制一个 tablview

```
calenderView = [[UIView alloc] initWithFrame:CGRectMake(405, 230,[UIImage imageNamed:@"calendar.png"].size.width, [UIImage imageNamed:@"calendar.png"].size.height)];
calenderView.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"calendar.png"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:09:26.113

```
[[self.view superview] methodname]; 
```

希望这可以帮助...

# python - 简单选择查询中的 Python sqlite3 OperationalError

> ID：14401586
> 
> 赞同：0
> 
> 时间：2013-01-18T14:59:20.263
> 
> 标签：python, sqlite

我在sqlite（python sqlite3）中有一个非常简单的查询有一个奇怪的行为

这是一个有效的查询

```
cursor = self.con.cursor()
cursor.execute("SELECT * FROM vpro1 ORDER BY :orderby DESC LIMIT 1", {"table": "vpro1", "orderby": self.unit_timestamp}) 
```

但是这个给我一个错误

```
cursor = self.con.cursor()
cursor.execute("SELECT * FROM :table ORDER BY :orderby DESC LIMIT 1", {"table": "vpro1", "orderby": self.unit_timestamp}) 
```

例外是

```
sqlite3.OperationalError: near ":table": syntax error 
```

因此，当我尝试将 qmark 用于表名时，它会引发错误，如果我在查询中对其进行硬编码，它会起作用，:orderby 可以使用我使用的任何东西（qmark，硬编码，命名）...与 qmark 样式相同的行为（ ?,? 带元组）

谢谢你的建议 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:09:35.020

您不能使用 DB API 来完成表名。我不确定这是什么原因，但我过去也遇到过同样的问题。它不适用于 SQLite 或 MySQL 以及其他可能。

有关解决方法，请参阅[Donald Miner](https://stackoverflow.com/a/3247553/1901658)对另一个问题的回答。

```
def scrub(table_name):
    return ''.join( chr for chr in table_name if chr.isalnum() )

scrub('); drop tables --')  # returns 'droptables' 
```

然后将其作为格式字符串传入。

```
table = "vpro1"
cursor.execute("SELECT * FROM {0} ORDER BY :orderby DESC LIMIT 1".format(scrub(table)), {"orderby": self.unit_timestamp}) 
```

# android - CursorLoader - 获取有关 db 中已更改内容的信息

> ID：14401594
> 
> 赞同：1
> 
> 时间：2013-01-18T14:59:35.820
> 
> 标签：android, android-contentprovider, loader, android-cursorloader

我使用支持库中的标准 android ContentProvider 和 CursorLoader。我正在寻找最佳方法来获取有关数据库更改的信息。

我知道我可以在函数中读取和比较光标：

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
} 
```

但阅读所有记录可能不是一个好的解决方案。

你知道这个问题的好解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:16:28.080

如果您使用内容提供者，您可以通过实现 CRUD 方法在数据库中插入、更新、删除或检索项目来抽象出对底层数据库所做的所有更改。

从您感兴趣的方法发送广播将是获取数据库更改通知的一种选择。

我记得我曾使用这种方法来计算在刷新周期中添加到数据库中的项目数。

或者，您可以发送更改项目的 Uri 作为额外的意图，以获取对数据库中已更改行的引用。

此外，您可以声明一个全局变量，以启用或禁用这些广播仅在我们感兴趣的情况下触发。

# javascript - 自动清除和重新填充文本区域值

> ID：14401595
> 
> 赞同：0
> 
> 时间：2013-01-18T14:59:36.043
> 
> 标签：javascript, html, forms, autofill

我有一个使用 Value 的简单表单来通知用户他们要在每个文本区域中放置什么。我已经能够使用这个 javascript 使文本区域自动清除：

```
<script type="text/javascript">
function setValue(field)
{
    if(''!=field.defaultValue)
    {
        if(field.value==field.defaultValue)
        {
            field.value='';
        }
        else if(''==field.value)
        {
            field.value=field.defaultValue;
        }
    }
}
</script> 
```

如果用户没有填写文本区域并且他们不再选择它，我需要添加什么才能重新出现值？这是表单标记，如果有帮助的话：

```
<form method="post" action="<?php echo $PHP_SELF; ?>">
<input type="text" name="first" value="First Name" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)">
<input type="text" name="last" value="Last Name" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)"> <br>
<input type="text" name="address" value="Address" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)">
<input type="text" name="city" value="City" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)"><br>
<input type="text" name="state" value="State" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)">
<input type="text" name="zip" value="Zip" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)"><br>
<input type="text" name="phone" value="Phone" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)">
<input type="radio" name="day" value="Day"> Day  
<input type="radio" name="evening" value="Evening"> Evening <br>
<input type="text" name="email" value="Email" class="slide-form-input" onfocus="setValue(this)" onblur="setValue(this)">
<input type="submit" name="submit" value="Send Request" class="push_button blue"> 
```

（抱歉措辞不佳，现在还早！）

谢谢！对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:06:53.033

您正在寻找`placeholder`html5 属性

```
<input type="text" palceholder="First Name" /> 
```

[http://jsfiddle.net/MesvN/](http://jsfiddle.net/MesvN/)

[http://davidwalsh.name/html5-placeholder](http://davidwalsh.name/html5-placeholder)

# ios - iTunes 中的 App Localizations 部分，用于本地化已在 appstore 中的应用的元数据

> ID：14401596
> 
> 赞同：0
> 
> 时间：2013-01-18T14:59:37.303
> 
> 标签：ios, localization, app-store-connect

我可以从 itunes connect 的 App Localizations 部分向已在 appstore 中的应用程序的元数据添加额外的本地化（状态 - 准备出售）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:14:16.197

不，不幸的是，Apple 要求您的应用程序处于*可编辑*状态。在 iTunes Connect 指南中，Apple 解释说，一旦您的应用准备好销售，您只能对应用进行以下更改：

> **编辑应用级信息，例如权利和定价、Game Center 和 iAd 网络设置以及应用内购买**
> 
> **编辑版本级别信息，例如应用元数据和评级**

这意味着您只能编辑现有元数据。例如，如果您已经添加了德语本地化，您可以更新这些关键字或应用说明。但是，您不能添加新语言。为此，您必须创建应用程序的新版本并提交更新。

[有关添加应用程序描述的新本地化，](http://www.ibabbleon.com/add-localized-app-store-description-tutorial.html)请参阅此分步教程

# ruby - Sinatra 文件流的内容长度

> ID：14401598
> 
> 赞同：1
> 
> 时间：2013-01-18T14:59:41.563
> 
> 标签：ruby, apache, sinatra, passenger

我试图在将文件流式传输到客户端之前设置 Content-Length 标头。我将其设置为：

```
response.headers['Content-Length'] = "12341234" 
```

然后我做类似的事情：

```
steam do |out|
   file_chunks.each do |chunk|
     out << chunk
   end
   out.close
end 
```

但是，当我尝试在浏览器中下载文件时，Content-Length 标头为空白。有谁知道这是 Sinatra 问题还是乘客/Apache 问题？

我假设发生的事情是这个代码块之间的某个层，当实际发送响应时，它看到它首先发送标头并且数据块是空的，因此即使我明确设置它，它也假定内容长度为 0。

还有另一种方法可以告诉浏览器我发送的文件有多大？

**编辑**

看起来是乘客问题而不是 Sinatra 问题。如果我以薄的方式运行服务器，则 Content-Length 将正确传递。我猜如果已经设置了 Content-Length ，问题会更改为不更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-23T11:06:11.420

这里的问题是，当使用 Transfer-Encoding:chunked 时，Content-Length 标头被省略了。

见： http: [//greenbytes.de/tech/webdav/rfc2616.html#rfc.section.4.4](http://greenbytes.de/tech/webdav/rfc2616.html#rfc.section.4.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T18:51:45.153

这是一个 Sinatra 问题。它的流 API 仅支持基于 EventMachine 的服务器。也就是说，API 只支持 Thin。使用Passenger 时，您应该绕过Sinatra 流API，并且应该使用Phusion Passenger 支持[的Rack 套接字劫持API直接流式传输HTTP 响应。](http://blog.phusion.nl/2013/01/23/the-new-rack-socket-hijacking-api/)[这是一个示例](https://github.com/phusion/passenger-ruby-server-sent-events-demo)，它演示了如何使用机架套接字劫持 API 在 Phusion 乘客上流式传输服务器发送的事件。

# c# - C#：在 Excel 中打印日期值时出错

> ID：14401606
> 
> 赞同：0
> 
> 时间：2013-01-18T15:00:11.357
> 
> 标签：c#, excel, datetime

我正在构建一个`winform`基于桌面的应用程序。作为应用程序的一部分，我正在生成 Excel 输出。

当我尝试输入日期值时出现错误。

在 C# 中，日期值为`"11-10-12"`. 但是，在 Excel 中，它打印为`10-11-2012`.

这是代码，它做到了：

```
String Date1 = "11-10-12";
oSheet.Cells[i + 2, 1] = DateTime.ParseExact(Date1, "dd-MM-yy", CultureInfo.InvariantCulture).ToString("dd-MM-yyyy"); 
```

知道什么可能是错的吗？

**编辑**

Excel 中的单元格格式默认为常规。但是，当输入值时，它会更改为日期。

![在此处输入图像描述](../Images/ce1b7c42655afea395dd3224e8fe67e0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:06:00.053

尝试使用以下命令更改 excel-Cell 的格式：

```
yourCellRange.NumberFormat = "dd-MM-yy"; 
```

或将字符串格式调整为 excel 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:03:37.943

试试：

```
DateTime.Now.ToString("dd-MM-yy"); 
```

或者：

```
String Date1 = "11-10-12";
var Format = "dd-MM-yy";
var TimeBuff = DateTime.ParseExact(Date1, Format, 
CultureInfo.InvariantCulture).ToString(Format);
oSheet.Cells[i + 2, 1] = TimeBuff; 
```

Parse 和 ToString 都必须包含相同的格式。如果您得到相同的结果，则绝对是 Excel 失败。

编辑：

[![证据](../Images/50fbcfd38b5c88c6ea450b604d333aa8.png)](https://i.stack.imgur.com/9SnfX.png)

只为 DJ KRAZE

[![证据](../Images/5e80191fc7d1ad9233637baf4bd4686b.png)](https://i.stack.imgur.com/44yGq.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:09:42.013

尝试这样做

```
worksheet.get_Range(Cell1, Cell2 + worksheet.Rows.Count).NumberFormat = "dd-mmm-yyyy"; 
```

当您添加值时，您可以尝试

```
worksheet.Cells[row, column] = String.Format("{0:dd-MMM-yyyy}", Date1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T16:15:26.517

不幸的是，这些建议都没有帮助。所以，我禁用了 Excel 中的自动格式化：

因此，这里是禁用 Excel 中的自动（日期）格式的代码片段：

```
String Date1 = "11-10-12";
oSheet.Cells[i + 2, 1] = "'" + Date1; 
```

所以，诀窍是在字符串前面加上一个有效的撇号。

谢谢

# android - 替代已弃用的 AudioManager.isWiredHeadsetOn？

> ID：14401611
> 
> 赞同：15
> 
> 时间：2013-01-18T15:00:37.720
> 
> 标签：android, android-audiomanager

[AudioManager.isWiredHeadsetOn()](http://developer.android.com/reference/android/media/AudioManager.html#isWiredHeadsetOn%28%29)方法已从 api 级别 14 中弃用，我们现在如何检测是否连接了有线耳机？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-08-17T03:57:42.577

这是我的解决方案：

```
private boolean isHeadsetOn(Context context) {
    AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);

    if (am == null)
        return false;

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.M) {
        return am.isWiredHeadsetOn() || am.isBluetoothScoOn() || am.isBluetoothA2dpOn();
    } else {
        AudioDeviceInfo[] devices = am.getDevices(AudioManager.GET_DEVICES_OUTPUTS);

        for (AudioDeviceInfo device : devices) {
            if (device.getType() == AudioDeviceInfo.TYPE_WIRED_HEADSET
                    || device.getType() == AudioDeviceInfo.TYPE_WIRED_HEADPHONES
                    || device.getType() == AudioDeviceInfo.TYPE_BLUETOOTH_A2DP
                    || device.getType() == AudioDeviceInfo.TYPE_BLUETOOTH_SCO) {
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-18T15:03:12.283

文档的弃用消息指出：

> 仅用于检查是否连接了耳机。

所以我想继续使用它来检查是否连接了有线耳机是可以的，但不能检查音频是否被路由到它或通过它播放。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-11-20T06:24:32.883

试试这个解决方案。它在我的情况下工作。可能这对你有帮助！

```
IntentFilter iFilter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
Intent iStatus = context.registerReceiver(null, iFilter);
boolean isConnected = iStatus.getIntExtra("state", 0) == 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T22:20:29.130

它对我有用：

```
if(context.registerReceiver(null, new IntentFilter(Intent.ACTION_HEADSET_PLUG)).getIntExtra("state", 0)==1){
//if(audioManager.isWiredHeadsetOn()){
    System.out.println("Headset is wiredOn");
}
else{
    System.out.println("Headset is not wiredOn");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-15T01:12:56.570

```
IntentFilter iFilter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
Intent iStatus = context.registerReceiver(null, iFilter);
boolean isConnected = iStatus.getIntExtra("state", 0) == 1; 
```

我知道这段代码可以在哪个andorid平台版本上使用。它在 Android 8 上对我不起作用。结果 iStatus 为空。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-25T08:11:41.813

我们必须使用广播接收器来查找蓝牙连接的状态。

这是一个很好的[例子](https://stackoverflow.com/questions/13610258/how-to-detect-when-a-user-plugs-headset-on-android-device-opposite-of-action-a?answertab=oldest#tab-top)

# c++ - 让 CppUnit 读取 netbeans 7.2 上的应用程序类

> ID：14401617
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:00:49.643
> 
> 标签：c++, netbeans, netbeans-7, cppunit

我正在使用 netbeans 7.2 同时学习 C++ 和 CppUnit。

我创建以下文件

```
#include <cstdlib>

using namespace std;

/*
 * 
 */
class Subtract{
public:
    int minus(int a, int b){
        return a-b;
    }
};

int main(int argc, char** argv) {

    return 0;
} 
```

然后我右键生成如下cppunit测试文件

```
#include "newtestclass.h"

CPPUNIT_TEST_SUITE_REGISTRATION(newtestclass);

newtestclass::newtestclass() {
}

newtestclass::~newtestclass() {
}

void newtestclass::setUp() {
}

void newtestclass::tearDown() {
}

int Subtract::minus(int a, int b);

void newtestclass::testMinus() {
    int a=89;
    int b=55;
    Subtract subtract;
    int result = subtract.minus(a, b);
    CPPUNIT_ASSERT_EQUAL(34,result);
} 
```

当我尝试运行测试时，它会出现以下错误

```
g++    -c -g -I. -MMD -MP -MF build/Debug/GNU-MacOSX/tests/tests/newtestclass.o.d -o build/Debug/GNU-MacOSX/tests/tests/newtestclass.o tests/newtestclass.cpp
tests/newtestclass.cpp:25: error: 'Subtract' has not been declared
tests/newtestclass.cpp: In member function 'void newtestclass::testMinus()':
tests/newtestclass.cpp:30: error: 'Subtract' was not declared in this scope
tests/newtestclass.cpp:30: error: expected `;' before 'subtract'
tests/newtestclass.cpp:31: error: 'subtract' was not declared in this scope
make[1]: *** [build/Debug/GNU-MacOSX/tests/tests/newtestclass.o] Error 1
make: *** [.build-tests-impl] Error 2 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T03:06:56.527

在 C++ 中，约定是在头文件（.h 文件）中声明类和函数，并在源文件（.cpp 文件）中实现它们。

您的 Subtract.h 文件（声明）应该只有这个：

```
class Subtract {
public:
    int minus(int a, int b);
}; 
```

你的 Subtract.cpp 文件（实现）应该有这个：

```
#include "Subtract.h"

int Subtract::minus(int a, int b)
{
    return a-b;
} 
```

然后在 newtestclass.cpp 文件中 #include "Subtract.h"。

# mysql - 在 MySQL 中存储时间

> ID：14401626
> 
> 赞同：0
> 
> 时间：2013-01-18T15:01:18.120
> 
> 标签：mysql, datetime

我的数据格式为“2013-01-17 18:46:47 -0800”和“1358477089”...我想知道将其存储在 mysql 数据库中的最佳方法是什么，这让我可以使用mysql自己的功能选择某个月，周，日等内的结果。

目前我的创建表代码是这样的..“时间戳”需要更改。

可见的

```
CREATE TABLE IF NOT EXISTS `votes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `from` varchar(32) NOT NULL,
  `username` varchar(32) NOT NULL,
  `address` varchar(16) NOT NULL,
  `timestamp` varchar(32) NOT NULL,
  PRIMARY KEY (`id`)) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:03:56.983

最好的方法是使用 MySQL 内置的[DATETIME](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)类型。

MySQL 提供了许多功能，可让您在某个月、周、日内选择任何您需要的结果。

在此处查看功能列表：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

正如**hek2mgl 和其他人**提到的，还有**TIMESTAMP**。

*MySQL 将 TIMESTAMP 值从当前时区转换为 UTC 进行存储，并从 UTC 转换回当前时区进行检索。（这不会发生在其他类型，例如 DATETIME。）
如果您存储一个 TIMESTAMP 值，然后更改时区并检索该值，则检索到的值与您存储的值不同。*

我喜欢并建议您使用**DATETIME**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:09:57.427

如果您使用时间戳，您的字段应该是“整数”而不是 varchar。这提供了更好的性能（例如，如果您为此列使用索引）。

如果您不需要 1970 年之前的日期，我建议使用时间戳，而不是日期时间。它更容易使用。

PHP

```
$timestamp = date('U'); 
```

MySQL

```
INSERT INTO table SET timestamp = UNIX_TIMESTAMP() 
```

# android - 错误“异步任务”

> ID：14401630
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:01:25.943
> 
> 标签：android, database, json

我正在制作这个应用程序，它有一个允许用户登录的活动，程序检查数据库中的信息，然后将用户发送到仪表板屏幕。它一直运行良好，但现在我遇到了一些奇怪的错误，我无法弄清楚它们来自哪里。

这是日志猫：

```
01-18 14:54:22.160: E/AndroidRuntime(2621): FATAL EXCEPTION: AsyncTask #5
01-18 14:54:22.160: E/AndroidRuntime(2621): java.lang.RuntimeException: An error occured while executing doInBackground()
01-18 14:54:22.160: E/AndroidRuntime(2621):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.lang.Thread.run(Thread.java:856)
01-18 14:54:22.160: E/AndroidRuntime(2621): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=192.168.0.2/android_login/
01-18 14:54:22.160: E/AndroidRuntime(2621):     at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:591)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:293)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at com.example.androidbasic12.library.JSONParser.getJSONFromUrl(JSONParser.java:42)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at com.example.androidbasic12.library.UserFunctions.loginUser(UserFunctions.java:40)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at com.example.androidbasic12.MainActivity$LoginTask.doInBackground(MainActivity.java:78)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at com.example.androidbasic12.MainActivity$LoginTask.doInBackground(MainActivity.java:1)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-18 14:54:22.160: E/AndroidRuntime(2621):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-18 14:54:22.160: E/AndroidRuntime(2621):     ... 4 more 
```

任何人都可以看到这里的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:03:44.930

我认为您不能拥有带下划线的 URL，请尝试将其删除。请参阅此帖子的已接受答案：[目标主机不得为空，或在参数中设置](https://stackoverflow.com/questions/8759108/target-host-must-not-be-null-or-set-in-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:08:05.617

如日志：

> IllegalStateException：目标主机不能为空，或在参数中设置

表示您尚未在 URL 中添加协议（http 或 https）。尝试将 URL 更改为：

```
String yoururl="http://xxx.xxx.x.x"; 
```

# plsql - EXECUTE IMMEDIATE 插入多行列

> ID：14401631
> 
> 赞同：4
> 
> 时间：2013-01-18T15:01:30.307
> 
> 标签：plsql, insert, concatenation, execute-immediate

只是想知道这是否是使用多列和多行执行 EXECUTE IMMEDIATE 并将其分配给变量的正确方法？我尝试查看示例，但不确定我是否正确连接了这些行？

```
sql_stmt        VARCHAR2(200);

sql_stmt:='INSERT INTO (STORECODE, TILLID, TRANSACTIONNR, TRADINGDATE, TRANSTYPE, ' ||
          'OPERATORCODE TRAININGMODE, VOIDED, VALUEGROSS, VALUENETT, VALUEDUE) ' ||
          ‘VALUES (:1,:2,:3,:4,:5,:6,:7,:8,:9,:10)’;
          EXECUTE IMMEDIATE sql_stmt USING sSTORECODE………………………………………..fGROSS_AMOUNT,
      ‘0’; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T15:47:14.393

Oracle 中的字符串可以是多行的。因此，您可以简单地编写：

```
sql_stmt := 'INSERT INTO (STORECODE, TILLID, TRANSACTIONNR, TRADINGDATE, 
                          TRANSTYPE, OPERATORCODE TRAININGMODE, VOIDED, 
                          VALUEGROSS, VALUENETT, VALUEDUE) 
                  VALUES (:1,:2,:3,:4,:5,:6,:7,:8,:9,:10)';

EXECUTE IMMEDIATE sql_stmt USING p1, p2... p10; 
```

当然，使用连接 ( `||`) 和几个子字符串也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:42:35.793

```
set serveroutput on size unlimited;

declare
str_   varchar(1000 char);
date_ date;

begin
  --str_ := 'select sysdate' || chr(10);
  --str_ := str_ || 'from dual';
  str_ := 'select sysdate /* ''comment'' */
           from dual';

  execute immediate str_
  into date_;

  dbms_output.put_line(date_);

end; 
```

# java - Camel ActiveMQ 性能调优

> ID：14401632
> 
> 赞同：11
> 
> 时间：2013-01-18T15:01:32.613
> 
> 标签：java, performance, jms, activemq, apache-camel

### 情况

目前，我们在 ActiveMQ 库之上使用一些自定义代码来进行 JMS 消息传递。我一直在考虑改用 Camel，因为它易于使用、易于维护和可靠性。

### 问题

在我目前的配置下，Camel 的 ActiveMQ 实现比我们的旧实现慢得多，无论是在发送和接收每条消息的延迟方面，还是在发送和接收大量消息所花费的时间方面。我尝试调整一些配置（例如最大连接数），但无济于事。

### 测试方法

我有两个应用程序，一个使用我们的旧实现，一个使用 Camel 实现。每个应用程序都将 JMS 消息发送到本地 ActiveMQ 服务器上的主题，并侦听有关该主题的消息。这用于测试两个场景： - 在循环中向主题发送 100,000 条消息，并查看从开始发送到结束处理所有消息需要多长时间。- 每 100 毫秒发送一条消息，并测量从发送到处理每条消息的延迟（以 ns 为单位）。

### 问题

我可以改进下面的实现，就发送时间到处理大量消息和单个消息的时间而言？理想情况下，改进将涉及调整我错过的一些配置，或者提出更好的方法来做到这一点，而且不要太老套。改进的解释将不胜感激。

**编辑：**现在我异步发送消息，我似乎有一个并发问题。`receivedCount`没有达到 100,000。看ActiveMQ的web界面，10万条消息入队，10万条出队，所以大概是消息处理端的问题。我已更改`receivedCount`为 an`AtomicInteger`并添加了一些日志记录以帮助调试。这可能是 Camel 本身（或 ActiveMQ 组件）的问题，还是消息处理代码有问题？据我所知，只有约 99,876 条消息通过`floodProcessor.process`.

### 测试实施

**编辑：**更新了异步发送和日志记录以解决并发问题。

```
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;

import org.apache.activemq.ActiveMQConnectionFactory;
import org.apache.activemq.camel.component.ActiveMQComponent;
import org.apache.activemq.pool.PooledConnectionFactory;
import org.apache.camel.CamelContext;
import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.ProducerTemplate;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.component.jms.JmsConfiguration;
import org.apache.camel.impl.DefaultCamelContext;
import org.apache.log4j.Logger;

public class CamelJmsTest{
    private static final Logger logger = Logger.getLogger(CamelJmsTest.class);

    private static final boolean flood = true;
    private static final int NUM_MESSAGES = 100000;

    private final CamelContext context;
    private final ProducerTemplate producerTemplate;

    private long timeSent = 0;

    private final AtomicInteger sendCount = new AtomicInteger(0);
    private final AtomicInteger receivedCount = new AtomicInteger(0);

    public CamelJmsTest() throws Exception {
        context = new DefaultCamelContext();

        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");

        PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory(connectionFactory);

        JmsConfiguration jmsConfiguration = new JmsConfiguration(pooledConnectionFactory);
        logger.info(jmsConfiguration.isTransacted());

        ActiveMQComponent activeMQComponent = ActiveMQComponent.activeMQComponent();
        activeMQComponent.setConfiguration(jmsConfiguration);

        context.addComponent("activemq", activeMQComponent);

        RouteBuilder builder = new RouteBuilder() {
            @Override
            public void configure() {
                Processor floodProcessor = new Processor() {
                    @Override
                    public void process(Exchange exchange) throws Exception {
                        int newCount = receivedCount.incrementAndGet();

                        //TODO: Why doesn't newCount hit 100,000? Remove this logging once fixed
                        logger.info(newCount + ":" + exchange.getIn().getBody());

                        if(newCount == NUM_MESSAGES){
                            logger.info("all messages received at " + System.currentTimeMillis());
                        }
                    }
                };

                Processor spamProcessor = new Processor() {
                    @Override
                    public void process(Exchange exchange) throws Exception {
                        long delay = System.nanoTime() - timeSent;

                        logger.info("Message received: " + exchange.getIn().getBody(List.class) + " delay: " + delay);
                    }
                };

                from("activemq:topic:test?exchangePattern=InOnly")//.threads(8) // Having 8 threads processing appears to make things marginally worse
                    .choice()
                        .when(body().isInstanceOf(List.class)).process(flood ? floodProcessor : spamProcessor)
                    .otherwise().process(new Processor() {
                        @Override
                        public void process(Exchange exchange) throws Exception {
                            logger.info("Unknown message type received: " + exchange.getIn().getBody());
                        }
                    });
            }
        };

        context.addRoutes(builder);

        producerTemplate = context.createProducerTemplate();
        // For some reason, producerTemplate.asyncSendBody requires an Endpoint to be passed in, so the below is redundant:
//      producerTemplate.setDefaultEndpointUri("activemq:topic:test?exchangePattern=InOnly");
    }

    public void send(){
        int newCount = sendCount.incrementAndGet();
        producerTemplate.asyncSendBody("activemq:topic:test?exchangePattern=InOnly", Arrays.asList(newCount));
    }

    public void spam(){
        Executors.newSingleThreadScheduledExecutor().scheduleWithFixedDelay(new Runnable() {
            @Override
            public void run() {
                timeSent = System.nanoTime();
                send();
            }
        }, 1000, 100, TimeUnit.MILLISECONDS);
    }

    public void flood(){
        logger.info("starting flood at " + System.currentTimeMillis());
        for (int i = 0; i < NUM_MESSAGES; i++) {
            send();
        }
        logger.info("flooded at " + System.currentTimeMillis());
    }

    public static void main(String... args) throws Exception {
        CamelJmsTest camelJmsTest = new CamelJmsTest();
        camelJmsTest.context.start();

        if(flood){
            camelJmsTest.flood();
        }else{
            camelJmsTest.spam();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:21:03.943

从您当前`JmsConfiguration`的情况来看，您只使用单个线程来消费消息。这是故意的吗？

如果没有，您需要将该`concurrentConsumers`属性设置为更高的值。这将创建一个 JMS 侦听器线程池来为您的目的地提供服务。

例子：

```
JmsConfiguration config = new JmsConfiguration(pooledConnectionFactory);
config.setConcurrentConsumers(10); 
```

这将创建 10 个 JMS 侦听器线程，它们将同时处理来自您的队列的消息。

**编辑：**

对于主题，您可以执行以下操作：

```
JmsConfiguration config = new JmsConfiguration(pooledConnectionFactory);
config.setConcurrentConsumers(1);
config.setMaxConcurrentConsumers(1); 
```

然后在您的路线中：

```
from("activemq:topic:test?exchangePattern=InOnly").threads(10) 
```

此外，在 ActiveMQ 中，您可以使用[虚拟目标](http://activemq.apache.org/virtual-destinations.html)。虚拟主题将充当队列，然后您可以使用与普通队列相同的 concurrentConsumers 方法。

**进一步编辑（用于发送）：**

您当前正在执行阻塞发送。你需要做`producerTemplate.asyncSendBody()`。

* * *

**编辑**

我刚刚用你的代码构建了一个项目并运行了它。`floodProcessor`我在你的方法中设置了一个断点，`newCount`达到了 100,000。我认为您可能会被您的日志记录以及异步发送和接收的事实所困扰。在我的机器上，newCount 达到了 100,000，`"all messages recieved"`消息在执行后不到 1 秒就被记录了下来，但是程序在被缓冲后又继续记录了 45 秒。您可以`newCount`通过减少记录来查看记录对您的号码与您的身体号码的接近程度的影响。我将日志记录转为`info`，关闭了骆驼日志记录，两个数字在日志记录结束时匹配：

```
INFO  CamelJmsTest - 99996:[99996]
INFO  CamelJmsTest - 99997:[99997]
INFO  CamelJmsTest - 99998:[99998]
INFO  CamelJmsTest - 99999:[99999]
INFO  CamelJmsTest - 100000:[100000]
INFO  CamelJmsTest - all messages received at 1358778578422 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T22:17:07.620

我从原始海报中接手将其视为另一项任务的一部分，并发现丢失消息的问题实际上出在 ActiveMQ 配置中。

我们有一个设置 sendFailIfNoSpace=true，如果我们发送的速度足够快以填满发布者缓存，这会导致消息被丢弃。玩弄 policyEntry 主题缓存大小，我可以改变消失的消息数量，其可靠性与这种竞争条件所期望的一样高。设置 sendFailIfNoSpace=false（默认），我可以拥有任何我喜欢的缓存大小，并且永远不会接收到所有消息。

理论上 sendFailIfNoSpace 应该在丢弃消息时抛出 ResourceAllocationException ，但这要么没有发生（！），要么被某种方式忽略。同样有趣的是，尽管吞吐量测试比 Camel 运行得更快，但我们的自定义 JMS 包装器代码并没有遇到这个问题。也许该代码更快，这意味着发布缓存被更快地清空，或者我们在连接代码中我还没有找到的地方覆盖了 sendFailIfNoSpace。

关于速度问题，到目前为止，我们已经实现了这里提到的所有建议，除了虚拟目的地，但是在我的机器上使用 100K 消息的 Camel 版本测试仍然在 16 秒内运行，而我们自己的包装器需要 10 秒。如上所述，我偷偷怀疑我们（隐式或以其他方式）在包装器中的某个位置覆盖了配置，但我怀疑这是否会导致 ActiveMQ 中的性能大幅提升。

gwithake 提到的虚拟目的地可能会加速这个特定的测试，但在大多数情况下，对于我们的实际工作负载，它并不是一个合适的解决方案。

# javascript - 可以在不分配内存的情况下存储值吗？

> ID：14401637
> 
> 赞同：3
> 
> 时间：2013-01-18T15:01:45.430
> 
> 标签：javascript, memory-management, garbage-collection

我一直在这里阅读

[https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management#Allocation_via_function_calls](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management#Allocation_via_function_calls)

这些行让我有点困惑：

```
var s = "azerty";
var s2 = s.substr(0, 3); // s2 is a new string
// Since strings are immutable value, JavaScript may decide 
// to not allocate memory, but just store the [0, 3] range. 
```

所以评论说，JavaScript 可能决定不分配内存而只存储范围 [0,3] ，现在在存储之前不必分配内存吗？万一不是，正如评论所暗示的那样，究竟会发生什么，以便存储的范围被存储在可用空间中，而不是已经被其他值占用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:03:51.733

注释意味着`s2`不必专门为这三个字符分配内存`"aze"`。相反，它可以使用已经分配给`"azerty"`by的内存，`s`并且记住它自己的长度只有三个字符。

不变性部分也很重要：如果`s`不是不可变的，那么它可以决定在不告诉任何人的情况下将其值从`"azerty"`to更改`"foobar"`，从而也间接更改`s2`to的值`"foo"`——这将是灾难性的。

当然，这并不意味着根本不会分配任何*内存*；我们仍然需要分配内存来存储可以找到字符串内容的位置以及字符串的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:18:11.450

该评论正在谈论为字符串的字符数据分配空间。

当您创建一个新变量时，它自然必须为其分配空间，但这不一定是堆上的新对象，它可以是预先分配的变量数组中的一个项目。

让两个变量指向相同的字符数据的好处是，即使子字符串的长度很长，获取子字符串也会占用很少的内存，缺点是原始字符串将保留在内存中，只要它的任何子字符串被使用。

# ios6 - 光标自动从一个 uitextfield 移动到 ios 中的另一个文本字段？

> ID：14401645
> 
> 赞同：0
> 
> 时间：2013-01-18T15:02:13.380
> 
> 标签：ios6, uitextfield

如果文本字段长度为 1，则我有 4 个 uitextfield 控件移动到下一个 uitextfield 并按退格键以相反的方向一个接一个地删除文本字段文本。

就像 ipad 在启动时解锁密码一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:11:08.260

您可以使用 UITextField 委托方法移动到下一个文本字段：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if (textField == textFieldA) {
      [textField resignFirstResponder];
      [textFieldB becomeFirstResponder];
    } else if (textField == textFieldB) {
      // etc...
    }
return YES;
} 
```

对于 Delete 或 Backspace 键，您可以尝试以下操作：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

除此之外，我不知道在 iOS 中捕获键盘事件的任何其他方法。

# apache2 - Apache 2.4.x 带宽配额/节流/速度

> ID：14401647
> 
> 赞同：4
> 
> 时间：2013-01-18T15:02:15.627
> 
> 标签：apache2, apache2-module

我正在寻找允许我配置带宽配额的新 Apache 2.4.x 模块或解决方案。很久以前，我使用 mod_throttle，它只适用于 1.3，并且不再维护。我也一直在使用我已经修补的 mod_cband 与 Apache 2.4 一起工作，它似乎正在做这项工作，但我担心未来的 Apache 升级可能会导致该软件也消失。它也似乎不再维护 mod_cband 。

我看过 mod_bandwidth 但这似乎只适用于 1.3.x 并且 mod_ratelimit 并不完全符合我的要求。

具体来说，我正在寻找一种为每个虚拟主机设置最大配额的方法，当达到该限制时，连接速度会变慢或显示错误。配额应配置为根据预定义的密钥自动重置自身，IE：30 天、2 小时等...

任何指导都会很好。付费软件对我来说也可以，只要我可以演示它。开源解决方案当然是最好的 =)

我应该补充一下，这应该适用于 Unix/Linux，而不是 Windows！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-18T15:42:39.043

尝试使用这个 [http://dembol.org/blog/mod_cband](http://dembol.org/blog/mod_cband) manges banwidth 和 qouta + 适用于 linux

# php - 您还可以在哪里指定 PHP 中的内存限制？

> ID：14401650
> 
> 赞同：0
> 
> 时间：2013-01-18T15:02:29.207
> 
> 标签：php, memory

我遇到一个常见错误：

```
Fatal error: Allowed memory size of 262144 bytes exhausted (tried to allocate 1369 bytes) 
```

但是，我在 php.ini、.htacess 和文件开头使用 ini_set('memory_limit', '512M'); 将内存限制设置为 512MB；

错误消息中允许的内存大小不应该远高于0.25MB吗？还有其他地方可能会覆盖此设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:05:48.863

如果 PHP 的内存限制较低，则服务器的限制（Apache？）会超过它，因此它可能在您的 Web 服务器配置中。

另请注意，尤其是在 Windows 中，可以有多个 PHP.ini 文件（一个在 Windows 文件夹中）。确保编辑正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:12:02.697

如果你在 php.ini 中设置它，你总是可以放入`<?php phpinfo(); ?>`一个文件并确保 memory_limit 是你所期望的。如果没有，您可能更新了错误的 php.ini，或者如果您在共享主机上，他们可能不允许您通过 php.ini 进行更新。您还可以通过添加使用 .htaccess 进行更新`php_flag memory_limit 512M`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T22:40:17.630

出于某种原因，我的 php.ini 和我的 .htaccess 之间的内存限制值不同导致了问题......

# validation - 如何在 PrimeFaces oncomplete 中触发 args.validationFailed

> ID：14401652
> 
> 赞同：16
> 
> 时间：2013-01-18T15:02:40.593
> 
> 标签：validation, jsf, primefaces

`Save`按下按钮时，应验证来自*actionsDialog的数据。*如果输入了所需的信息并且有效，则会显示名为*reasonDialog*的第二个对话框。

已保存对象的非 JSF 验证是通过返回错误消息列表的方法完成的。如果验证失败，错误消息将与 FacesMessage 一起显示。我应该怎么做`objectsBean.validate`才能触发 if else 子句`oncomplete`？

```
<p:dialog id="actionsDialog" widgetVar="actionsDialog" dynamic="true" 
    resizable="false" width="800" modal="true">
    <ui:include src="/WEB-INF/flows/custom-flow/genericObject.xhtml"/>
    <f:facet name="footer">
        <p:commandButton value="Save" update="msgs"
            oncomplete="if (args.validationFailed) {reasonDialog.hide()} else {reasonDialog.show()}"
            actionListener="#{objectsBean.validate}"/>
        <p:commandButton value="Cancel" immediate="true" oncomplete="actionsDialog.hide()" />
    </f:facet>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T15:08:05.320

如果由于某种原因使用 JSF 内置验证工具（即仅使用`ValidatorException`以通常方式在其中包含所需面孔消息的验证器）确实不是一种选择（我真的会三思而后行，不，三次关于围绕 JSF 验证工具工作)，那么您总是可以用来[`FacesContext#validationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#validationFailed%28%29)向 JSF 发出验证通常失败的信号，这正是 JSF 验证工具在`ValidatorException`捕获 a 时在幕后所做的事情。

```
FacesContext.getCurrentInstance().validationFailed(); 
```

# castle - 我在哪里可以获得学习城堡的材料？

> ID：14401654
> 
> 赞同：-2
> 
> 时间：2013-01-18T15:02:48.247
> 
> 标签：castle, dynamic-proxy

我在哪里可以获得学习城堡的材料？以及如何为 Castle 使用 DynamicProxy？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:05:46.237

当我学习 Castle 时，我发现他们的文档站点很有帮助：

[http://docs.castleproject.org/default.aspx?AspxAutoDetectCookieSupport=1](http://docs.castleproject.org/default.aspx?AspxAutoDetectCookieSupport=1)

另外，如果您有任何特别的问题，请随时在这里提问，我会尽我所能提供帮助:)

# java - 如何在 GWT 中选择性地打开 JSNI 部分？

> ID：14401657
> 
> 赞同：1
> 
> 时间：2013-01-18T15:02:57.327
> 
> 标签：java, gwt, jsni

我有一些 javascript 脚本。我还在我的应用程序的主页上添加了一个启动这些脚本的按钮。在预发布时，我积极使用此按钮和脚本，但我需要删除此按钮和发布版本的脚本。

在应用程序的预发布（调试）和发布版本上添加/删除 UI 元素是否有任何做法？也许通过 gwt.xml 中的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:33:12.163

您可以引入一个可以在 GWT 中设置和查询的配置属性，以检测您是在构建发布版本还是调试版本。

在您的 gwt.xml 文件中：

```
<define-configuration-property name="yourkey" is-multi-valued="false" />
<set-configuration-property name="yourkey" value="yourvalue" /> 
```

然后，您可以使用绑定规则将不同的实现绑定到一个类。

（参见延迟绑定）：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred)

# ios - 同时为多个 UIView 设置动画

> ID：14401658
> 
> 赞同：4
> 
> 时间：2013-01-18T15:02:57.823
> 
> 标签：ios, animation, uiview

我有三个`UIButton`对象在视觉上堆叠在一起。当用户点击一个按钮时，下面的按钮应该向下移动一定距离。我正在使用以下动画块：

```
// Assuming button 1 was clicked...
[UIView animateWithDuration:0.25f
                      delay:0.0f
                    options:UIViewAnimationOptionCurveLinear
                 animations:^(void) {
                   self.button2.frame = CGRectOffset(self.button2.frame, 0.0f, 20.0f);
                   self.button3.frame = CGRectOffset(self.button3.frame, 0.0f, 20.0f);
                 }
                 completion:^(BOOL finished) { NSLog(@"Finished"); }]; 
```

如果我增加动画持续时间，例如从`0.25`到`0.75`，按钮不会保持在一起，但它们会开始以不同的时间间隔移动。我已经尝试过使用 Core Animation 方法，通过对动画和其他内容进行分组，但还没有找到任何解决方案。

你有什么想法？现在我保持持续时间，`0.25`直到我想出一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:10:18.083

一种解决方案是将 button2 和 button3 都设置为另一个中的子视图，`UIView`并分别为视图而不是每个按钮设置动画。这是否是一种好方法取决于您尝试使用堆叠按钮完成的任务。

编辑：

由于我的经验是块内的动画是同步的，所以我实现了如下所示的代码。我为动画持续时间尝试了许多值（0.15、0.25、0.75、1.25），并且按钮 2 和按钮 3 同步移动（由于按钮 2 在按钮 3 的顶部，我实际上根本看不到按钮 3，直到我点击按钮 2 ，这会导致按钮 3 从按钮 3) 下方移动。

```
- (IBAction)button1Tapped:(id)sender {
    NSLog(@"button1Tapped...");

    [UIView animateWithDuration:0.75f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^(void) {
                         self.button2.frame = CGRectOffset(self.button2.frame, 0.0f, 20.0f);
                         self.button3.frame = CGRectOffset(self.button3.frame, 0.0f, 20.0f);
                     }
                     completion:^(BOOL finished) { NSLog(@"Finished"); }];
}

- (IBAction)button2Tapped:(id)sender {
    NSLog(@"button2Tapped...");

    [UIView animateWithDuration:0.75f
                          delay:0.0f
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^(void) {
                         self.button3.frame = CGRectOffset(self.button3.frame, 0.0f, 20.0f);
                     }
                     completion:^(BOOL finished) { NSLog(@"Finished"); }];
}

- (IBAction)button3Tapped:(id)sender {
    NSLog(@"button3Tapped...");
} 
```

# tfs - 有哪些方法可以将 NuGet 与 Team Foundation Server 2012 集成？

> ID：14401669
> 
> 赞同：2
> 
> 时间：2013-01-18T15:03:41.947
> 
> 标签：tfs, nuget

我想知道有哪些方法可以将基于 Team Foundation Server 构建的项目与 NuGet 集成。

特别是，我会非常感兴趣：

*   是否存在用于 NuGet 相关目的（打包或发布）的 TFS 构建任务（例如，我找到了 nugetter，但它自 2011 年 9 月以来没有更新，我想知道它是否已被 TFS 2012 功能取代，或者它是否有效使用 NuGet 2.x);
*   TFS 是否捆绑了 NuGet 服务器（我知道它已经捆绑了（它自己的版本）符号源服务器）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:55:10.560

在将 NuGet 作为一等公民引入开发环境之后，工具团队的落后程度令人遗憾。

有一个用于从 TFS 构建发布 NuGet 包的[扩展。](http://visualstudiogallery.msdn.microsoft.com/f0145bdf-3bd8-46e6-b1ef-1a685d373ae8)[但是，对输出 NuGet 包和双 TFS 作为 NuGet 服务器LIKE TEAMCITY](http://confluence.jetbrains.com/display/TCD7/NuGet)的构建模板的一流支持会很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T12:35:28.603

这个问题有点过于宽泛，但我所拥有的几乎所有信息都在[ALM Rangers Branching and Merging Guide v2.1](http://vsarbranchingguide.codeplex.com/releases/view/96396)中。下载所有指南并查看“高级版本控制指南.pdf”。

# r - R：在 e1071 包中是否有比 libsvm 替代的 SVM 实现？

> ID：14401676
> 
> 赞同：3
> 
> 时间：2013-01-18T15:04:10.813
> 
> 标签：r, svm, libsvm

我尝试比较 R 中 SVM 的不同实现。除了 e1071 包中的 libsvm 实现之外，还有另一种实现吗？

一般来说，libsvm 是否有一个很好的替代方案来实现 nu-SVM 和 epsilon-SVM ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T15:41:38.500

检查[内核实验室](http://cran.r-project.org/web/packages/kernlab/index.html)包：

> kernlab：基于内核的机器学习实验室
> 
> 用于分类、回归、聚类、新奇检测、分位数回归和降维的基于内核的机器学习方法。在其他方法中，kernlab 包括支持向量机、谱聚类、内核 PCA、高斯过程和 QP 求解器。

Kernlabs`ksvm`支持 C-svc、nu-svc、（分类）one-class-svc（新奇）eps-svr、nu-svr（回归）公式以及原生多类分类公式和约束 SVM 公式。 `ksvm`还支持回归的类概率输出和置信区间。

`SVMlight`包[klaR](http://cran.r-project.org/web/packages/klaR/index.html)中提供了实现的接口

另请参阅 CRAN 任务视图*[机器学习和统计学习](http://cran.r-project.org/web/views/MachineLearning.html)*

# javascript - Dojo 选择器语法 - dojo 中的 IE 错误

> ID：14401681
> 
> 赞同：0
> 
> 时间：2013-01-18T15:04:31.983
> 
> 标签：javascript, dojo

我们正在使用 Dojo 1.4（我们希望有一天会升级。）我正在尝试使用迭代的属性列表而不是匹配的选择器找到执行 dojo.query() 的语法。我正在寻找这样的东西：

```
dojo.query("[id=thisDivID, id=thatDivID]") 
```

但我无法正确使用语法。

我有类似于以下示例代码的 HTML：

```
<DIV id='someNameHere'>
    <SPAN id='dontSelectThis'></SPAN>
    <DIV id='thisDivID'> text and code here </DIV>
    <DIV id='thatDivID'> text and code here </DIV>
</DIV> 
```

我试图只选择两个内部 DIV 使用

```
dojo.query("[id$='DivID']") 
```

它在 Chrome 和 Firefox 中运行良好，但在 IE 中返回额外结果。该页面有一个“DOCTYPE”声明（我认为这是一个常见的 IE 问题）。

我已经浏览了在 dojo 网站上可以找到的所有示例，但似乎没有一个可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:20:33.337

我无法用 IE8,9 和 Dojo 1.8.3 重现这个

[http://jsfiddle.net/cswing/JNZXQ/](http://jsfiddle.net/cswing/JNZXQ/)

除了版本，你知道你正在使用的选择器引擎吗？

[http://dojotoolkit.org/reference-guide/1.8/dojo/query.html](http://dojotoolkit.org/reference-guide/1.8/dojo/query.html)

也许你可以试试这个查询

```
dojo.query("div[id$='DivID']") 
```

# google-app-engine - NDB 缓存在 Google App Engine 上不起作用

> ID：14401682
> 
> 赞同：7
> 
> 时间：2013-01-18T15:04:33.000
> 
> 标签：google-app-engine, memcached, app-engine-ndb

我切换到 NDB 以获取一个新应用程序，据我所知，它包括“免费”的 memcache 支持。

所以我在数据存储区中放置了一个实体：

```
class MyStorage(ndb.Model):
    pickled_data = ndb.BlobProperty()

obj = MyStorage(parent=ndb.Key('top_level_key', 'second_level_key'), pickled_data = pickle.dumps(my_attr))
obj.put() 
```

在其他请求中，我然后使用检索

```
obj = pickle.loads(MyStorage.query(ancestor = ndb.Key('top_level_key', 'second_level_key')).get().pickled_data) 
```

但是在应用程序引擎上部署时测试它的延迟告诉我没有缓存正在进行（显然第一次调用没有预期，但后续调用应该显示加速）。

我检查了 Memcache Viewer，果然，每个指标下都为零。所以我显然没有得到关于免费 NDB 缓存的信息。有人能指出它是什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T16:15:05.400

NDB 只会在您使用`.get_by_id()`（或`.get()`在 Key 上）时从缓存中读取。使用时不会使用`.query()`。

# android - 多个自定义帐户与 GCMIntentService 结合使用

> ID：14401683
> 
> 赞同：3
> 
> 时间：2013-01-18T15:04:33.863
> 
> 标签：android, accounts, multiple-accounts, google-cloud-messaging

我在拥有多个我自己的自定义类型的帐户时遇到了问题。
我使用[GCM（Google Cloud Messaging）](http://developer.android.com/google/gcm/gcm.html)从我们的应用服务器接收消息。现在，由于您需要自己实现`GCMIntentService extending GCMBaseIntentService`，因此需要覆盖`onRegistered(Context context, String regId)`，这里的问题在于我想以该方法将帐户上保存的数据（身份验证令牌）发送到我们的应用程序服务器。以便应用服务器知道哪个设备/注册ID属于我们自己数据库中的某个帐户。

我如何在方法中找出我刚刚注册到 GCM 的帐户`onRegistered()`？（我找不到任何类似的问题=（）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:13:17.767

您将不得不手动执行此操作。GCM 不关心用户帐户。它只关心设备本身。在您的情况下，我将向 GCM 注册一次设备，然后为您的所有用户重复使用相同的注册 ID，这意味着在发送 GCM 通知时，您必须包含一些标识数据才能知道您正在为哪个用户发送该特定通知。

简而言之：向 GCM 注册您的设备一次，然后将您收到的注册 ID + 所有自定义用户帐户 ID 发送到您的应用程序服务器。发送通知时，将用户 ID 添加到通知消息中，然后使用它来确定要发送给哪个自定义帐户用户。

# javascript - 将 JSON 转换为对象，将键值对传递给函数

> ID：14401684
> 
> 赞同：0
> 
> 时间：2013-01-18T15:04:34.390
> 
> 标签：javascript, json, html5-audio, popcornjs

看看这个答案：[https://stackoverflow.com/a/10746567/1931288](https://stackoverflow.com/a/10746567/1931288)，它将键值对传递给一个函数，我想以 JSON 格式将数据保存在外部。

这是所需的格式：

```
var wordTimes = {
  "w1": { start: 1, end: 1.5 },
  "w2": { start: 1.9, end: 2.5 },
  "w3": { start: 3, end: 4 }
};

$.each(wordTimes, function(id, time) {
  pop.footnote({
    start: time.start,
    end: time.end,
    text: '',
    target: id,
    effect: "applyclass",
    applyclass: "selected"
  });
}); 
```

我想要做的是解析 JSON 数据以实现类似的格式。有没有方便的方法来做到这一点？

```
var wordTimes = jQuery.parseJSON('{"id": "w1", "time": {"start":1, "end":3}}'); 
```

解析数据后，我不知道该怎么办。

提前致谢。

# google-app-engine - 如何处理通道 api 速率限制？

> ID：14401687
> 
> 赞同：2
> 
> 时间：2013-01-18T15:04:41.207
> 
> 标签：google-app-engine, channel-api, gae-quotas

我需要在我的网站上实现实时通知系统，例如 stackoverflow（当有人向问题添加答案/评论时）。我开始知道通道 API 是在 appengine 上实现它的最简单方法。但我被通道 API 的配额限制所吸引。启用计费后，每分钟只能创建 60 个令牌。

*   当您遇到流量峰值（1000 个新用户/秒）时，如何处理此通道速率限制？
*   如何管理 5000 个用户（在任何时间点）？
*   令牌的最长到期时间是多少？

    *假设每个用户都应该获得一个令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T17:13:48.523

对于通知某人他们正在查看的问题的答案已被添加的简单用例，Channel API 似乎有点过分了。似乎 Channel API 更适合几秒钟延迟会导致不良后果的用例。

如果您需要做的只是每隔几秒钟更新用户他们正在查看的内容发生了什么事情，那么您可能只需要使用最基本的短轮询方法。

页面上是这样的：

```
function doPoll(){
    $.post('ajax/test.html', function(data) {
        alert(data);  // process results here
        setTimeout(doPoll,5000);
    });
} 
```

来源：[jQuery，简单的轮询示例](https://stackoverflow.com/questions/6835835/jquery-simple-polling-example)

每当进行更改时，将其加载到内存缓存中。“ajax/test.html”的帖子将发送到一个处理程序，该处理程序应该检查内存缓存是否有任何更新。这样您就不会访问数据存储。

# mstest - MSTest：似乎没有执行 TestInitialize 方法

> ID：14401688
> 
> 赞同：0
> 
> 时间：2013-01-18T15:04:45.000
> 
> 标签：mstest

这个“问题”是一个奇怪的 MSTest 行为的文档，我已经撞了几次头，希望它对遇到同样问题的其他人有用。考虑以下测试：

```
[TestClass]
public class SomeTest {
    private List<int> _list;

    [TestInitialize]
    public void SetUp() {
        DoSomething();
        _list = new List<int>();
    }

    [TestMethod]
    public void SomeTestMethod() {
        _list.Add(42);
        ...
    }
} 
```

运行它会产生一个`System.NullReferenceException: Object reference not set to an instance of an object.`在线`_list.Add(42);`。看起来`SetUp()`，虽然它具有正确的`public void`签名和`[TestInitialize]`属性，但没有被调用。发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:05:08.383

在这种情况下，进一步的调查表明这`DoSomething()`是抛出异常。由于我无法理解的原因，MSTest（至少在使用 ReSharper 从 Visual Studio 调用时）*会吞下该方法引发的异常，`[TestInitialize]`并继续使用测试方法而不会导致测试失败*。

（如果有人能解释这种行为的理由或如何关闭它，我将不胜感激。）

# scala - 值、类型、种类……作为一个无限序列？

> ID：14401689
> 
> 赞同：52
> 
> 时间：2013-01-18T15:04:47.333
> 
> 标签：scala, haskell, functional-programming, higher-kinded-types

我才刚刚开始熟悉种类的概念，所以如果我没有很好地提出我的问题，请耐心等待......

**值有类型：**

```
3 :: Int
[1,2,3] :: [Int]
('c',True) :: (Char,Bool) 
```

**类型有种类：**

```
the type 'Int' has kind *
the type '[Int]' also has kind *
   but the type constructor [] has kind * -> *
similarly, the type (Char,Bool) has kind  *
   but the type constructor (,) has kind * -> * -> * 
```

**种类有什么？**

它们有同类、流派、品种或品种吗？

这个抽象序列能走多远？我们是因为词穷而停止，还是因为走得更远没有价值而停止？或者，也许是因为我们很快就达到了人类认知的极限，而无法将我们的头脑围绕在更高级别的种类上？

一个相关的问题：语言为我们提供了值构造函数（如 cons 运算符）来生成值。语言还为我们提供了类型构造函数，例如 (,) 或 [] 来创建类型。是否有任何语言公开种类构造函数来制作种类？

另一个我很好奇的极端情况：我们显然有一个没有值的类型，表示为⊥，称为“底部类型”。有没有类型没有类型：底部类型？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-18T19:45:15.063

术语`type`并`kind`不能很好地扩展。自伯特兰·罗素以来的类型理论家就使用了“类型”的层次结构。其中一个版本是`Integer : Type 0, Type 0 : Type 1, Type 1 : Type 2, ..., Type n : Type (n+1), ....` 在像 Coq 和 Agda 这样的依赖类型语言中，经常需要这些“高级排序”。

这样的水平有助于避免[罗素悖论](http://en.wikipedia.org/wiki/Russell%27s_paradox)。使用`Type : Type`往往会导致矛盾（有关替代设计，请参见[Quine ）。](http://plato.stanford.edu/entries/quine-nf/)

这种使用数字是我们需要时的标准符号。一些类型理论有“累积种类”、“累积水平”或“累积种类”的概念，即“如果`t : Type n`那么也`t : Type (n+1)`”。

累积级别 + “级别多态性” 给出了一个几乎与 一样灵活的理论`Type : Type`，但避免了悖论。Coq 使级别主要是隐式的，尽管 sort`Set`和`Prop`都是 typed `Type`，`Type {1} : Type {2}`. 也就是说，您通常看不到这些数字，而且大多数时候它只是有效。

Agda 有一个提供级别多态性的语言编译指示，使事情变得非常灵活，但可能有点官僚主义（然而，在其他领域，Agda 通常不像 Coq 那样“官僚主义”）。

另一个好词是“宇宙”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T20:05:04.377

您可能应该阅读 Tim Sheard 关于 Omega 的论文，这是一种 Haskell 方言，具有无限的类型/种类/种类，但没有成熟的依赖类型。它解释了为什么你想要这个，并提到“排序”之上的级别在实践中（至少到目前为止）并没有直接使用。

# php - $_FILES 数组，但只上传第一个文件

> ID：14401697
> 
> 赞同：0
> 
> 时间：2013-01-18T15:05:23.217
> 
> 标签：php, javascript, file-upload, image-uploading

我正在尝试上传多个图像文件。如果图像名称是“icon.jpg”，那么它会被移动到与任何其他图像不同的位置 - 这似乎工作正常，但是只有第一张图像被上传和移动。

脚本在第一张图片后停止并显示“查询为空”，即使我尝试上传至少 4 或 5 张其他图片。

```
$id = '01';
foreach($_FILES['file']['name'] as $n => $image) 
if(!empty($image)) {
{
 if ($image == 'icon.jpg'){
  $target_path = "../images/articles/".$id."_small.jpg";
  } else {
  $target_path = "../images/galleries/".$id."/pk_hb" . $id.".jpg";
  }
  move_uploaded_file($_FILES['file']['tmp_name'][$n], $target_path);
$id++;
 }
} 
```

我已经包含了我正在使用的动态 JS 上传表单，以防出现以下问题：

```
<form action="<? echo $_SERVER['PHP_SELF'];?>" enctype="multipart/form-data" method="post" name="add">
Image 1: <input name='file[]' type='file' accept="image/*" />
<div id='file_tools'>
    <img src='../images/top/file_add.png' id='add_file' title='Add new input'/>
    <img src='../images/top/file_del.png' id='del_file' title='Delete'/>
</div>

<script type='text/javascript'>
$(document).ready(function(){
var counter = 2;
$('#del_file').hide();
$('img#add_file').click(function(){
    $('#file_tools').before('Image '+counter+': <input name="file[]" type="file" accept="image/*" />');
    $('#del_file').fadeIn(0);
counter++;
});
$('img#del_file').click(function(){
    if(counter==3){
        $('#del_file').hide();
    }   
    counter--;
    $('#f'+counter).remove();
});
});
</script>
    <input class="submit" type="submit" name="add" value="Submit" />
</form> 
```

添加了 var_dump($_FILES) 的内容

```
array(1) { 
["file"]=> array(5) 
{ 
 ["name"]=> array(1) { [0]=> string(11) "cooley1.jpg" } 
 ["type"]=> array(1) { [0]=> string(10) "image/jpeg" } 
 ["tmp_name"]=> array(1) { [0]=> string(18) "/var/tmp/phpLYaj7U" } 
 ["error"]=> array(1) { [0]=> int(0) } 
 ["size"]=> array(1) { [0]=> int(106241) } 
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:52:35.787

**更新**

与 不同`$_POST`的是，您不能通过将of all`$_FILES`设置为来发送文件数组。自动包含您在数组中上传的所有文件:)，其中键是文件元素的。`name``input``file[]``$_FILES``name``input`

您必须将每个文件的名称更改`input`为`file_1`, `file_2`, ...`file_n`以使脚本了解您有多个要上传的文件。

您还必须检查`max-file-uploads`您是否`php.ini`具有有效值[http://php.net/manual/en/ini.core.php#ini.max-file-uploads](http://php.net/manual/en/ini.core.php#ini.max-file-uploads)。

# jquery - jquery根据输入字段总数隐藏/显示提交按钮

> ID：14401698
> 
> 赞同：2
> 
> 时间：2013-01-18T15:05:26.493
> 
> 标签：jquery

我有一个包含大约 4 个输入字段的表单，即：`cash`、、和。如果三个字段（ ）的总和不等于输入字段（ ） ，我想隐藏提交按钮。我想我快到了，但我的问题在于当我尝试减少总和时，它不起作用。`credit_card``gift_cert``total``cash, credit_card, gift_cert``total``addClass`

这是[jsfiddle](http://jsfiddle.net/GFkSv/12/)。

HTML

```
<form>
    <input type="text" name="cash" value="0.00">
    <br />
    <input type="text" name="credit_card" value="0.00">
    <br />
    <input type="text" name="gift_cert" value="0.00">
    <br />
    <input type="text" name="total" value="100">
    <br />
    <input type="submit" name="submit" class="test" value="Save">
</form> 
```

JS：

```
$(':input').bind('keypress keydown keyup change', function () {

    var total = parseFloat($(':input[name="total"]').val(), 10),
        cash = parseFloat($(':input[name="cash"]').val(), 10),
        credit_card = parseFloat($(':input[name="credit_card"]').val(), 10),
        gift_cert = parseFloat($(':input[name="gift_cert"]').val(), 10),
        payment = (cash + credit_card + gift_cert);

    if (payment >= total) {
        $(".test").removeClass("test");
    } else if (payment < total) {
        $(".test").addClass("test");
    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:12:48.690

使用`show`和`hide`：http: [//jsfiddle.net/GFkSv/18/](http://jsfiddle.net/GFkSv/18/)

```
$(':input').bind('keypress keydown keyup change',function(){

        var total = parseFloat($(':input[name="total"]').val(),10),
            cash = parseFloat($(':input[name="cash"]').val(),10),
            credit_card = parseFloat($(':input[name="credit_card"]').val(),10),
            gift_cert = parseFloat($(':input[name="gift_cert"]').val(),10),
            payment = (cash+credit_card+gift_cert);

        if(payment >= total){
            $('.test').show();
        }else if(payment<total){
            $('.test').hide();
        }       

}); 
```

**编辑**

考虑到页面加载后预先填写的字段，只需触发`keypress`事件 afetr `DOM`is ready：http: [//jsfiddle.net/GFkSv/30/](http://jsfiddle.net/GFkSv/30/)

```
$(document).ready(function(){
    $(':input').trigger('keypress');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:15:37.973

```
$('input').on('keyup change', function(){
        var total = parseFloat($('input[name="total"]').val()),
            cash = parseFloat($('input[name="cash"]').val()),
            credit_card = parseFloat($('input[name="credit_card"]').val()),
            gift_cert = parseFloat($('input[name="gift_cert"]').val()),
            payment = (cash+credit_card+gift_cert);

        $(".test").toggle(payment >= total);
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/GFkSv/22/)

Radix 在 parseFloat 中不需要，`on()`优先于`bind()`，`:input`应该只是`input`这些天，只有名称才能真正满足您的选择器，并且同时绑定到所有按键事件只是开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:15:56.667

这是因为您删除了“.test”类。下次您不能再次查询 $(".test") 。尝试改用显示/隐藏

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:15:21.793

或更改选择器：http: [//jsfiddle.net/GFkSv/21/](http://jsfiddle.net/GFkSv/21/)

```
$(':input').bind('keypress keydown keyup change',function(){

        var total = parseFloat($(':input[name="total"]').val(),10),
            cash = parseFloat($(':input[name="cash"]').val(),10),
            credit_card = parseFloat($(':input[name="credit_card"]').val(),10),
            gift_cert = parseFloat($(':input[name="gift_cert"]').val(),10),
            payment = (cash+credit_card+gift_cert);

        if(payment >= total){
        $("input[name=submit]").removeClass("test");    
        }else if(payment<total){
        $("input[name=submit]").addClass("test");
        }       

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T15:22:10.577

另一种方法是使用 $.each() 总结所有内容；

```
$(':input').bind('keypress keydown keyup change', function () {
    var total = parseFloat($(':input[name="total"]').val(), 10);
    var payment=0;
    $(':input[name="cash"],:input[name="credit_card"],:input[name="gift_cert"]').each(
        function() {
            payment+=parseFloat($(this).val(),10);            
        }
    )
    console.log(payment,total);
    if (payment >= total) {
        $(".test").hide();
    } else if (payment < total) {
        $(".test").show();
    }

}); 
```

# java - 火狐驱动詹金斯

> ID：14401700
> 
> 赞同：1
> 
> 时间：2013-01-18T15:05:29.613
> 
> 标签：java, selenium, groovy, jenkins, geb

我对 jenkins/ 的测试有问题

```
go to create new company(CBNPortalRegNewCompSpec)  Time elapsed: 2.365 sec  <<< ERROR!
org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"tag name","selector":"html"}
Command duration or timeout: 730 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:18'
System info: os.name: 'Linux', os.arch: 'i386', os.version: '2.6.32-5-686', java.version: '1.6.0_18'
Session ID: 89dde50d-9812-4d77-a2d1-4b4eae055566
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=LINUX, acceptSslCerts=true, javascriptEnabled=true, browserName=firefox, rotatable=false, locationContextEnabled=true, version=17.0, cssSelectorsEnabled=true, databaseEnabled=true, handlesAlerts=true, browserConnectionEnabled=true, nativeEvents=false, webStorageEnabled=true, applicationCacheEnabled=true, takesScreenshot=true}]
Command duration or timeout: 817 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 15:53:30'
System info: os.name: 'FreeBSD', os.arch: 'amd64', os.version: '8.3-STABLE', java.version: '1.6.0_32'
Session ID: 26cb6541-71ce-43a8-83e6-980a6b7a8e51
Driver info: org.openqa.selenium.remote.RemoteWebDriver
Capabilities [{platform=LINUX, acceptSslCerts=true, javascriptEnabled=true, browserName=firefox, rotatable=false, locationContextEnabled=true, webdriver.remote.sessionid=26cb6541-71ce-43a8-83e6-980a6b7a8e51, version=17.0, cssSelectorsEnabled=true, databaseEnabled=true, handlesAlerts=true, browserConnectionEnabled=true, webStorageEnabled=true, nativeEvents=false, applicationCacheEnabled=true, takesScreenshot=true}]
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:302)
    at org.openqa.selenium.remote.RemoteWebDriver.findElementByTagName(RemoteWebDriver.java:355)
    at org.openqa.selenium.By$ByTagName.findElement(By.java:320)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:294)
    at org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(EventFiringWebDriver.java:101)
    at org.openqa.selenium.support.events.EventFiringWebDriver.findElement(EventFiringWebDriver.java:180)
    at org.openqa.selenium.remote.server.handler.FindElement.call(FindElement.java:47)
    at org.openqa.selenium.remote.server.handler.FindElement.call(FindElement.java:1)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:167)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
Results :
Tests in error: 
  CBNPortalRegNewCompSpec.go to create new company:49->GebSpec.methodMissing:51 � NoSuchElement 
```

但在我的本地机器上（win XP sp3、firefox ver 17.0.1、webdriver 2.28.0、java 1.7_10）测试有效。

# python - 为什么我不能规范化这个随机的 unicode 字符串？

> ID：14401703
> 
> 赞同：3
> 
> 时间：2013-01-18T15:05:36.947
> 
> 标签：python, unicode, normalization, python-unicode, unicode-normalization

我需要评估 unicode 字符串上的 levenshtein 编辑距离，这意味着需要对包含相同内容的两个字符串进行归一化以避免编辑距离产生偏差。

以下是我为测试生成随机 unicode 字符串的方法：

```
def random_unicode(length=10):
    ru = lambda: unichr(random.randint(0, 0x10ffff))
    return ''.join([ru() for _ in xrange(length)]) 
```

这是失败的简单测试用例：

```
import unicodedata
uni = random_unicode()
unicodedata.normalize(uni, 'NFD') 
```

这是错误：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128) 
```

我检查以确保它`uni`确实是一个 unicode 对象：

```
u'\U00020d93\U000fb2e6\U0005709a\U000bc31e\U00080262\U00034f00\U00059941\U0002dd09\U00074f6d\U0009ef7a' 
```

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:10:27.747

您已切换 的参数`normalize`。从[相关文档](http://docs.python.org/2/library/unicodedata.html#unicodedata.normalize)：

> `unicodedata.normalize(form, unistr)`
> 
> 返回 Unicode 字符串 * unistr* 的范式*形式*。*form*的有效值为“NFC”、“NFKC”、“NFD”和“NFKD”。

第*一个*参数是形式，*第二个*是要规范化的字符串。这工作得很好：

```
unicodedata.normalize('NFD', uni) 
```

# winforms - 从另一个线程更新 WinForms (NOT WPF) UI

> ID：14401704
> 
> 赞同：3
> 
> 时间：2013-01-18T15:05:37.803
> 
> 标签：winforms, powershell

编辑：示例代码与最初的目标相去甚远，但我实际提出的问题有一个合理的答案，所以我编辑了问题和标题。

我正在使用 WinForms GUI 编写多线程 PowerShell 脚本，并希望从脚本中的其他线程之一更新 GUI。我做这件事一点运气都没有。事实上，我什至不能`BeginInvoke`去上班。

这是一个非常精简的示例。这是示例代码，而不是生产，所以它不是很漂亮，但它正在复制问题：

```
$script:SynchronizedUIHash = [Hashtable]::Synchronized(@{});

[reflection.assembly]::LoadWithPartialName( "System.Windows.Forms")
$form= New-Object Windows.Forms.Form
$label = New-Object Windows.Forms.Label
$label.Text = 'original'
$script:SynchronizedUIHash.label = $label

$form.Controls.add($label)
$form.show()
[System.Windows.Forms.Application]::DoEvents()

Read-Host

$label.BeginInvoke(
    [Action[string]] {
        param($Message)
        [Console]::Beep(500,300)
        $l = $SynchronizedUIHash.label
        $l.Text = $Message
        [System.Windows.Forms.Application]::DoEvents()
    },
    'changed'
)

Read-Host

$form.close() 
```

我什至没有听到控制台哔哔声，所以好像`BeginInvoke`代码根本没有被执行。

`[System.Windows.Forms.Application]::DoEvents()`如果我在之后投入 a ，`Read-Host`那么我会看到变化，所以这似乎是一个时间问题，但我不想进入自旋循环或类似的愚蠢 - 我想开火并忘记`BeginInvoke`并得到结果视情况可见。我看到了其他答案，例如[PowerShell: Job Event Action with Form not executed](https://stackoverflow.com/questions/7414187/powershell-job-event-action-with-form-not-executed) but that need to be in a check, sleep, check loop。

必须有一种更简单的方法，我错过了......它是什么？

什么是正确的解决方案？

编辑：基思的评论让我意识到我错过了从生产到剥离示例代码的关键点——启动工作确实是多进程的，但示例代码不是，所以示例不能反映现实生活，我将不得不重新考虑整个事情。话虽如此 - 示例代码不使用作业，它也不能按我的预期工作，所以我想了解原因，即使在这种特定情况下这对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:00:05.497

您不能真正让控制台和 Windows 在同一个线程上运行。我建议您创建另一个线程来托管窗口，如下所示（这是一个 C# 控制台应用程序，但应该很容易翻译）：

```
class Program
{
    static void Main(string[] args)
    {
        Form form = new Form();
        Label label = new Label();
        label.Text = "original";
        form.Controls.Add(label);

        // run this form on its own thread, so it can work properly
        Thread t = new Thread((state) => Application.Run((Form)state));
        t.Start(form);

        Console.ReadLine();

        // note you *could* do label.Text = "other" here, but BeginInvoke is always recommended
        label.BeginInvoke((Action)delegate() { label.Text = "other"; });

        Console.ReadLine();
        Application.Exit();
    }
} 
```

**编辑**：我花了一些时间来制作 Powershell 版本，但它就在这里。诀窍是：您不能从 Powershell 环境中创建标准的 .NET 线程。时期。一旦你尝试这样做，你就会使 Powershell 崩溃。导致崩溃的根本错误是：

> System.Management.Automation.PSInvalidOperationException：没有可用于在此线程中运行脚本的运行空间。您可以在 System.Management.Automation.Runspaces.Runspace 类型的 DefaultRunspace 属性中提供一个

而且，您不能真正尝试从另一个线程设置此 DefaultRunspace 变量，因为它被标记为 threadstatic（每个线程一个副本）！现在，如果你 google 多线程 Powershell，你会发现很多关于 Powershell Jobs 的文章。但是这些允许多任务处理，但它不是真正的多线程，它更重量级。

所以...原来解决方案是真正使用 Powershell 功能，即：Powershell 运行空间。这里是：

```
[reflection.assembly]::LoadWithPartialName( "System.Windows.Forms")
$form = New-Object System.Windows.Forms.Form
$label = New-Object System.Windows.Forms.Label
$label.Text = 'original'
$form.Controls.add($label)

$ps = [powershell]::create()
$ps.AddScript(
     {
     [System.Windows.Forms.Application]::Run($form)
     })
$ps.Runspace.SessionStateProxy.SetVariable("form", $form)
$ps.BeginInvoke()

Read-Host

$label.BeginInvoke(
    [Action[string]] {
        param($Message)
        $label.Text = $Message
    },
    'changed'
)

Read-Host

[System.Windows.Forms.Application]::Exit()
$ps.Dispose() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:10:17.333

Invoke()-ing 跨*线程*工作。您的 PowerShell 脚本将获得它自己的*进程*。在那个级别上，您正在查看进程间通信解决方案，例如远程处理或消息队列，而不是 Invoke() 之类的线程间通信工具。

在 Powershell 中，其中最简单的可能是您自己的小“消息队列”，其中 powershell 将某些内容写入 winforms 应用程序正在监视的文本文件中，并且知道数据出现时要做什么。

# git - 如何在没有活动 git 安装的情况下使用 ANT 在 git 中获取当前签出分支的最新提交 ID？

> ID：14401711
> 
> 赞同：3
> 
> 时间：2013-01-18T15:05:59.723
> 
> 标签：git, version-control, ant

我已使用以下 ant 详细信息来检索签出分支的最新提交 ID，使用此方法我应该注意哪些注意事项？

是否存在我无法检索预期值的极端情况？

```
<scriptdef name="substring" language="javascript">
    <attribute name="text" />
    <attribute name="start" />
    <attribute name="end" />
    <attribute name="property" />
    <![CDATA[
       var text = attributes.get("text");
       var start = attributes.get("start");
       var end = attributes.get("end") || (text.length() - 1);
       project.setProperty(attributes.get("property"), text.substring(start, end));
     ]]>
</scriptdef>

<loadfile property="head.branch" srcfile="${basedir}/.git/HEAD" />
<substring text="${head.branch}" start="5" property="branch" />
<loadfile property="head.commitId" srcfile="${basedir}/.git/${branch}"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:55:12.783

您可以读取 的内容`.git/HEAD`，然后读取从中获得的文件的内容。

您将遇到的警告是，您从上述步骤获得的 SHA-1 可能位于一个包文件中（git 将多个更改压缩在一起以节省空间的方式）。我建议使用 git 而不是自己尝试操作 .git 文件夹的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T04:36:13.727

[JGIT](http://wiki.eclipse.org/JGit/User_Guide)可用于在您的构建中提供 git 客户端

# 例子

```
$ ant clone print-latest-commit-id
..
..
clone-repo:
[git-clone] Cloning repository https://github.com/myproj/myrepo.git

resolve:

get-commit-id:

print-commit-id:
     [echo] head.commitId = 9e3e8358f2b31507b13f5def69627da422e1656b 
```

## 构建.xml

```
<project name="build" default="clone" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve" description="Resolve 3rd party dependencies">
        <ivy:cachepath pathid="build.path">
            <dependency org="org.codehaus.groovy" name="groovy-all" rev="2.1.0-rc-2" conf="default"/>
            <dependency org="org.eclipse.jgit" name="org.eclipse.jgit.ant" rev="2.1.0.201209190230-r" conf="default"/>
            <exclude org="org.apache.ant"/>
        </ivy:cachepath>
    </target>

    <target name="clone-repo" depends="resolve" description="Pull code from SCM repository">
        <taskdef resource="org/eclipse/jgit/ant/ant-tasks.properties" classpathref="build.path"/>

        <git-clone uri="https://github.com/myproj/myrepo.git" dest="build/repo" branch="???"/>
    </target>

    <target name="get-commit-id" depends="resolve" description="Print git log">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

        <groovy>
            import org.eclipse.jgit.api.Git

            Git git = Git.open(new File("build/repo"))

            properties["head.commitId"] = git.log().call().first().name()
        </groovy>
    </target>

    <target name="print-commit-id" depends="get-commit-id" description="Print commit id">
        <echo message="head.commitId = ${head.commitId}"/>
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="build"/>
    </target>

</project> 
```

笔记：

*   [Apache ivy](http://ant.apache.org/ivy/)用于管理 3rd 方 jars
*   我更喜欢将[Groovy](http://groovy.codehaus.org/The+groovy+Ant+Task)用于嵌入式脚本

# c# - 添加新行后如何刷新datagridview

> ID：14401714
> 
> 赞同：1
> 
> 时间：2013-01-18T15:06:11.187
> 
> 标签：c#

嗨，我是 c# 的学生，在 winform 工作我在这里遇到问题，用新值刷新 datagridview 我有一个主窗体，其中我有一个 datagridview datagridview 中的数据填充了代码

我有第二个表单，它是从主表单上的一个按钮调用的，`showdialog`主表单在后面运行，第二个表单上还有一个按钮，即提交按钮。从那时起，第二个表单上有一些控件，数据被插入到数据库表中，该表连接到主表单的datagridview，所以我希望在打开第二个表单并填充数据时，然后按下提交按钮当`this.hide();`主窗体可见之后，提交的数据应该在我搜索过的datagridview中，发现更改数据源会导致datagridview刷新新数据，所以我尝试了这个

```
MAINSOFTWARE ms = new MAINSOFTWARE();
                ms.dataGridView1.DataSource = null;
                ms.dataGridView1.DataSource = ms.bindingSource1;
                this.Hide(); 
```

但它没有用新提交的数据刷新gridview，所以现在有什么方法可以刷新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:10:40.837

当您应该处理原始实例时，您正在创建 MainForm 的新实例

`Datatable`您可以在第二个窗体中创建一个属性，并在其关闭时将其绑定`Datatable`到`DataGridView`MainForm 中。

此代码应位于按钮单击事件处理程序中的 MainForm 中：

```
SecondForm.ShowDialog();

//After closing the SecondForm

this.DataGridView1.DataSource = SecondForm.MyDatatable(); 
```

在 SecondForm 中声明 DataTable 属性：

```
private DataTable _MyDatatable = new DataTable ();

    public DataTable  MyDatatable
    {
        get {
            return _MyDatatable ; 
        }
        set { 
            _MyDatatable = value; 
        }
    } 
```

# arrays - Bash：将字符串拆分为数组

> ID：14401719
> 
> 赞同：2
> 
> 时间：2013-01-18T15:06:21.823
> 
> 标签：arrays, bash, split

首先，让我声明我对 Bash 脚本非常陌生。我试图为我的问题寻找解决方案，但找不到任何对我有用的方法。
假设我想使用 bash 解析如下所示的文件：

```
variable1 = value1
variable2 = value2 
```

我使用以下代码逐行拆分文件：

```
cat /path/to/my.file | while read line; do
    echo $line      
done 
```

从`$line`变量中，我想创建一个数组，我想将其拆分`=`为分隔符，这样我就可以从数组中获取变量名称和值，如下所示：

```
$array[0] #variable1
$array[1] #value1 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T15:11:52.267

将 IFS 设置为 '=' 以便拆分行中 = 符号上的字符串，即：

```
cat file | while IFS='=' read key value; do
    ${array[0]}="$key"
    ${array[1]}="$value"
done 
```

您也可以使用 -a 参数来指定要写入的数组，即：

```
cat file | while IFS='=' read -a array; do
    ...
done 
```

bash 版本取决于。

*后代完全错误的旧答案：*

将论点添加`-d =`到您的`read`陈述中。然后你可以这样做：

```
cat file | while read -d = key value; do
    $array[0]="$key"
    $array[1]="$value"
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T15:24:14.337

```
while IFS='=' read -r k v; do
   : # do something with $k and $v
done < file 
```

IFS 是“内部字段分隔符”，它告诉 bash 在“=”符号上分割行。

# c# - 在 EF 4 中更新记录时的乐观并发

> ID：14401720
> 
> 赞同：0
> 
> 时间：2013-01-18T15:06:23.293
> 
> 标签：c#, asp.net-mvc, entity-framework-4, insert-update, optimistic-concurrency

我在 VS 2012 中调试时收到此异常

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

```
//_dbSet declaration: 

    private readonly IDbSet<T> _dbSet;

//Method parameter

    public virtual void Update(T entity)

//method fragment   

 public virtual void Update(T entity)
    {
        if (Entities == null) return;

        var entry = Entities.Entry(entity);

        switch (entry.State)
        {
            case EntityState.Modified:
                var currentValues = entry.CurrentValues.Clone();
                entry.Reload();
                switch (entry.State)
                {
                    case EntityState.Detached:
                        Entities.Entry(entry).State = EntityState.Modified;
                        break;
                    default:
                        entry.Reload();
                        entry.CurrentValues.SetValues(currentValues);
                        break;
                }
                break;
            case EntityState.Detached:
                _dbSet.Attach(entity); /*Here is the thing*/
                entry.CurrentValues.SetValues(entity);
                break;
        }
        Entities.Commit();
    } 
```

我花了将近一周的时间尝试使用以下模式解决乐观并发问题：DbFactory、工作单元、DI、通用存储库，但没有得到结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:34:59.193

我要感谢所有为我的头疼付出了宝贵时间的人。这是一篇新文章，阐明了我对通用存储库模式中并发更新方法的最终解决方案。这篇文章没有丢失任何东西： [Seeking Entity's Key by Attribute Also](https://stackoverflow.com/questions/9284055/how-to-retrieve-an-ef-4-code-first-entitys-key-by-the-attribute-alone-before)

> 这非常有用：[RoccoC5](https://stackoverflow.com/users/181483/roccoc5)

* * *

```
private object GetKeyValue(T entity)
    {
        var key =
            typeof(T).GetProperties().FirstOrDefault(
                p => p.GetCustomAttributes(typeof(KeyAttribute), true).Length != 0);
        return (key != null) ? key.GetValue(entity, null) : null;
    } 
```

公共虚拟无效更新（T实体）{如果（实体==空）返回；

```
 var key = GetKeyValue(entity);
        var originalEntity = _dbSet.Find(key);
        Entities.Entry(originalEntity).CurrentValues.SetValues(entity);
        Entities.Commit();
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:15:56.617

我相信异常消息很清楚：

具有相同键的实体（即映射到同一数据库记录的实体）已加载并附加到目标中`DbSet`。

在这种情况下，您决定做什么完全取决于您：

*   您可以获取已加载的等效条目并修改附加等效项的值以匹配`entity`实例（或任何更复杂的）；
*   您可以分离等效的加载条目并附加您的参数`entity`；
*   你可以跳过它；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:16:53.357

代码闻起来很糟糕；

第一条`switch`语句使用`entry.State`and 检查实体是处于修改状态还是处于分离状态；然后在修改后的情况下，创建一个新的 switch 语句来检查实体是分离的还是处于其他状态。

该异常没有说明乐观并发。相反，它表明您正在尝试将实体附加到对象上下文，并且上下文中已经存在具有相同键的实体。

# ms-access - Microsoft.Jet.OleDb 和 Microsoft.Ace.OleDb 之间的区别

> ID：14401729
> 
> 赞同：54
> 
> 时间：2013-01-18T15:07:01.967
> 
> 标签：ms-access, ms-office, ms-access-2010

自从我使用 Classic ASP 和 Microsoft Access 进行一些编程以来，已经有很多年了，我们使用“Microsoft.Jet.Oledb”驱动程序来访问和显示数据。

我被要求做一些使用“Microsoft.Ace.Oledb”访问 MS Excel 数据的工作。我发现这是“Microsoft Access 2010 Engine Redistributable”下载的一部分。

我想知道“Microsoft.Jet.OleDb”是否已取代“Microsoft.Ace.Oledb”驱动程序并且本质上是相同的还是完全不同的东西？

另外，您在购买 MS Access 2010 时通常会获得“Microsoft.Ace.Oledb”驱动程序吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-18T15:14:38.990

这主要是历史问题，ACE实际上已经取代了JET：

[维基百科非常详细地回答了您的问题](http://en.wikipedia.org/wiki/Microsoft_Jet_Database_Engine)。

最相关的部分是：

> 从 2007 版开始，Access 包括一个特定于 Office 的 Jet 版本，最初称为 Office Access 连接引擎 (ACE)，但现在称为 Access 数据库引擎。此引擎与以前版本的 Jet 引擎完全向后兼容，因此它可以从早期 Access 版本中读取和写入 (.mdb) 文件。它引入了一种新的默认文件格式 (.accdb)，它为 Access 带来了多项改进，包括复杂的数据类型，例如多值字段、附件数据类型和备忘录字段中的历史跟踪。它还带来了安全和加密方面的改进，并支持与 Microsoft Windows SharePoint Services 3.0 和 Microsoft Office Outlook 2007 的集成

另外，ACE 提供了 64 位驱动程序，因此可以在 64 位机器上使用，而 JET 不能。

> 该驱动程序不是 Windows 操作系统的一部分，但可作为可再发行版本使用。 [11] 以前，Jet 数据库引擎只有 32 位，不能在 64 位版本的 Windows 下本机运行。

至于你问题的第二部分，我最近安装了 Office 2010，我不得不单独下载 ACE 组件。我从链接[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)获得它们。这可能是因为我在 64 位 Windows 下安装了 32 位版本的 Office；无论如何，必要的文件很容易从 Microsoft 获得。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-12T22:18:48.037

驱动程序在用于基本操作时基本相同，并且与更复杂的东西（联合、嵌套查询等）显示出显着差异。

根据个人经验，ACE 不提供完全向后兼容的结果。它可能会打开和读取/写入以前的 .mdb 格式，但完全相同查询的**数据类型转换会发生变化。**

例如，当在 TEXT 字段上使用 UNION 时，JET 曾经返回 TEXT(255) 结果，ACE 返回 MEMO ?!

与 BI 或 Crystal Reports 等报告工具结合使用时，这会产生很多麻烦。

# iis - IIS 重定向和 url 字符串替换

> ID：14401735
> 
> 赞同：0
> 
> 时间：2013-01-18T15:07:46.260
> 
> 标签：iis, redirect

有没有办法编写重定向规则，以便 URL 中任何位置的任何出现，例如“newyork”，都可以重定向到以“new-york”作为字符串替换的相同 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:17:54.930

您可以使用此 IIS 扩展来实现此目的： [http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

它与 Apache 中的 mod_rewrite 完全一样。

# php - 按月分组记录

> ID：14401737
> 
> 赞同：0
> 
> 时间：2013-01-18T15:07:54.323
> 
> 标签：php, mysql

我希望显示按月分组的一堆记录的数量、月份和年份。我正在使用以下查询，然后使用 PHP 来显示数据。

```
SELECT COUNT(*), YEAR(award_date) AS award_date_year, MONTH(award_date) AS award_date_month
FROM projects_sell
GROUP BY YEAR(award_date),MONTH(award_date) ASC 
```

使用以下查询并使用 PHP 从日期时间中提取月份和年份会更好吗？我强烈倾向于这样做，我将解释我对“更好”的解释。我一次只显示 100 条记录，所以只要两种解决方案都合理接近，速度就不是问题。我的主要原因是因为我有时也会将 Award_date 显示为格式化日期，我希望使用 PHP 而不是 MySQL 来格式化日期，并希望将所有格式保存在一个位置。我不使用这种方法的唯一原因是，如果 Award_date 不属于给定的月份/年份，或者没有在 Award_date 上使用某种聚合函数会导致某种问题。

```
SELECT COUNT(*), award_date
FROM projects_sell
GROUP BY YEAR(award_date),MONTH(award_date) ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:13:40.267

由于年份和月份是从 中提取的`award_date`，`award_data`因此将始终落在该年份和月份内。

但是，由于您只按年和月分组，MySQL 可能会选择任何日期。因此，如果 2012 年 5 月的每一天都有奖励，`award_date`则可以是结果查询中这 30 个日期中的任何一个。没有办法告诉它会是哪一个。

所以我认为在查询中返回年份和月份更清晰，因为查询结果仅基于这些而不是确切日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:16:36.367

使用 PHP DATE() 并存储通过该函数的值。

```
<?php
function myAwardDate($myDate)
{
  echo date("Y/m/d",$myDate) . "<br>";
  echo date("Y.m.d",$myDate) . "<br>";
  echo date("Y-m-d",$myDate);
}
?> 
```

将您的 Award_Date 字符串传递到此日期函数中，然后您将获得任何日期格式。

# sql-server - 使用 PATINDEX 删除字符

> ID：14401740
> 
> 赞同：1
> 
> 时间：2013-01-18T15:08:05.187
> 
> 标签：sql-server, user-defined-functions

我正在使用我在这里和互联网上找到的一个函数来尝试从字段中删除非法字符。

```
 Create Function [epacube].[StripSpecs](@myString varchar(500),
  @invalidChars varchar(100)) RETURNS varchar(500) AS Begin

   While PatIndex(@invalidChars, @myString) > 0
      Set @myString = Stuff(@myString, PatIndex(@invalidChars, @myString), 1, '')
   Return @myString End 
```

在我的表中，我将字段值设置为： set DATA_NAME = 'Pro$d)uc^t'

如果我运行此查询：

```
SELECT epacube.StripSpecs (
   DATA_NAME
  ,'%$%') FROM TABLE_DATA 
```

它有效，我得到了 Prod)uc^t 的返回值

但是，如果我添加另一个特殊字符，它将不再起作用：

```
SELECT epacube.StripSpecs (
   DATA_NAME
  ,'%$)%') FROM TABLE_DATA 
```

返回我的原始值 Pro$d)uc^t

有人对完成我需要做的事情有任何建议吗？

**编辑** 根据下面的答案，这里是有效的代码：

```
Create Function [epacube].[StripSpecs](@myString varchar(500), @invalidChars varchar(100))
RETURNS varchar(500) AS
Begin

  While PatIndex('%[' + @invalidChars + ']%', @myString) > 0
    Set @myString = Stuff(@myString, PatIndex('%[' + @invalidChars + ']%', @myString), 1, '')
  Return @myString
End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:11:43.050

与 一样`LIKE`，如果要指定一*组*字符中的一个字符应该匹配，请使用`[]`括起来。

```
SELECT epacube.StripSpecs (
   DATA_NAME
  ,'%[$)]%') FROM TABLE_DATA 
```

Although, personally, given the descriptions of the function and parameters, I'd add the `%[` and `]%` in `StripSpecs`, and let the caller just give a list of characters (if you don't want to support any other type of pattern being specified)

# regex - 正则表达式验证 HHMM 字符串

> ID：14401744
> 
> 赞同：0
> 
> 时间：2013-01-18T15:08:13.950
> 
> 标签：regex

我有一个正则表达式来验证包含“HHMM”或“HHMM，HHMM”的字符串这就是我正在使用的：

```
^[0-2][0-9][0-5][0-9],[0-2][0-9][0-5][0-9]$ 
```

可以的这种作品`1247`不是`3247`。同样`1247,2200`可以，但`1247,2290`不是。

但是，允许 24 小时制等时钟值`2500`是不允许的。有没有办法在正则表达式中进行检查，如果第一部分时间是`2`第二部分只能是`0-4`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:12:29.613

是的，用于`|`将`0x`and 与`1x`case分开`2y`：

```
^(?:[01][0-9]|2[0-4])[0-5][0-9],(?:[01][0-9]|2[0-4])[0-5][0-9]$ 
```

`(?:...)`创建一个非捕获组，限制了操作符的范围`|`。如果您确实想要捕获该`HH`值（例如，稍后在替换中使用它或其他东西），请`(...)`改用。

**更新：**允许`2400`但避免所有其他无效时间，例如`2411`可以用另一个来完成`|`：

```
(?:(?:[01][0-9]|2[0-3])[0-5][0-9]|2400) 
```

但是，我认为最好完全禁止任何`24MM`（包括`2400`），因为它确实应该写成`00MM`. 在这种情况下，正则表达式就变成了：

```
^(?:[01][0-9]|2[0-3])[0-5][0-9],(?:[01][0-9]|2[0-3])[0-5][0-9]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:11:30.080

您可以在正则表达式中使用 OR 表达式`(2[0-4]|[01][0-9])`

所以看起来像`^(?:2[0-4]|[01][0-9])[0-5][0-9],(?:2[0-4]|[01][0-9])[0-5][0-9]$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:13:59.953

[您可以在此处](http://www.asiteaboutnothing.net/regex/regex-conditionals.html)使用条件[正则表达式](http://www.regular-expressions.info/conditional.html)和教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:14:18.633

是的，

```
^([0-1][0-9]|2[0-4])([0-5][0-9])(,([0-1][0-9]|2[0-4])([0-5][0-9]))?$ 
```

我希望它对你有用。

# api - 使用 Task.Run 制作异步 API

> ID：14401746
> 
> 赞同：2
> 
> 时间：2013-01-18T15:08:18.423
> 
> 标签：api, asynchronous, async-await

有什么（反模式）可以阻止我像这样进行 API 调用的异步版本吗？

```
public IItem GetItem(int id)
{
    var result = SomeLengthyServiceCall(id);
    return result;
}

public async Task<IItem> GetItemAsync(int id)
{
    return await Task.Run(() => this.GetItem(id));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:28:30.003

是的，这是一种反模式；[请参阅 Stephen Toub关于同步方法的异步包装器](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)的优秀博文。

简而言之，只有自然异步的方法才应该有异步 API。

# c# - 使用 ajax 后返回同一控制器的另一个 MVC3 视图

> ID：14401750
> 
> 赞同：0
> 
> 时间：2013-01-18T15:08:48.923
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3, asp.net-mvc-routing

如何返回同一控制器的另一个视图？我对应用程序进行了一些调试：ajax 方法调用控制器操作，传递参数，执行指令。在

```
return View("GetEmployeeDays", model);, 
```

“ `GetEmployeeDays`”视图从模型接收值并被填充，但最终在浏览器中我收到初始视图（来自我提出的请求） - 而不是`GetEmployeeDays`视图

来自 Global.asax 的路由代码：

```
public static void RegisterRoutes(RouteCollection routes)
 {
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
  routes.MapRoute(
      "Default", // Route name
      "{controller}/{action}/{id}", // URL with parameters
       new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );          
  } 
```

调用动作控制器并传递参数的 JQuery 代码：

```
<script type="text/javascript">
  $(document).ready(function () {
  $('li').click(function () {
  $.ajax({
    url: '@Url.Action("GetEmployeeDays", "ApproveWork")',
    type: 'GET',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: { userCode: $(this).attr('id') }
   })
  });
}); 
```

应该呈现`GetEmployeeDays`视图的控制器操作：

```
 [HttpGet]
   public ActionResult GetEmployeeDays(string userCode)
   {
      .....
    return View("GetEmployeeDays", model);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:24:12.887

您不能通过 ajax 请求重定向。尝试一个简单的 GET 请求：

```
<script type="text/javascript">
$('li').on('click', function()
{
   document.location.href = '@Url.Action("GetEmployeeDays", "ApproveWork")' + '?param1=val1&param2=val2';
});
</script> 
```

控制器很好，就像现在一样。

**已编辑：**按要求更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:24:17.627

在不知道要重新渲染的原始视图是什么的情况下，我想说您的问题很可能是您应该将其作为 PartialView 返回，因为您正在发出 Ajax 请求。此外，看起来您实际上并没有在任何地方渲染结果。你的提琴手反应是什么？它是否显示返回的 HTML？如果是这样，您可能只需使用 $.ajax 中的 .done 回调将其转储到页面上。

```
<script type="text/javascript">
$(document).ready(function () {
$('li').click(function () {
$.ajax({
    url: '@Url.Action("GetEmployeeDays", "ApproveWork")',
    type: 'GET',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    data: { userCode: $(this).attr('id') }
    }).done(function() {
       $(this).addClass("done");
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:45:22.770

如果您只想将某些内容加载到页面的一部分而不重新加载到新页面，则应在 ajax 函数的回调中更新页面的特定部分。

```
$(function(){
 $('li').click(function () {
     var uCode=$(this).attr("id");
     $.get("@Url.Action("GetEmployeeDays","ApproveWork")?userCode="+uCode,
                                                          function(response){
       $("#DivToBeUpdated").html(response);
     });
 });
}); 
```

如果你想重定向到一个新的视图，你应该通过更新`location.href`属性值来实现。

```
$(function(){
 $('li').click(function () {
     var uCode=$(this).attr("id");
     var url="@Url.Action("GetEmployeeDays","ApproveWork")?userCode="+uCode;
     window.location.href=url;         
     });
 });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:39:26.290

？从@David Diez 构建，您可以将参数附加到您的请求中，如下所示：

```
<script type="text/javascript">
$('li').on('click', function()
{
   document.location.href = '@Url.Action("GetEmployeeDays", "ApproveWork", new { caseSensativeParamName = "foo" })';
});
</script> 
```

当然，您也可以使用 JavaScript 路由。像这样的东西应该工作：

```
<script type="text/javascript">
$('li').on('click', function()
{
   var targetUrl = '@Url.Action("GetEmployeeDays", "ApproveWork")';
   var yourParam = $("#input-id").val();
   targetUrl = targetUrl + '?yourServerParamName=' + yourParam;
   document.location.href = targetUrl;
});
</script> 
```

干杯。

# css - 加载时固定大小的图片在 chrome 中折叠

> ID：14401753
> 
> 赞同：0
> 
> 时间：2013-01-18T15:08:57.147
> 
> 标签：css, image, google-chrome, collapse

我必须解决一个问题，即固定大小的图片向左浮动，但是虽然图像尚未加载但它“折叠”（这意味着它不占用它应该的宽度。

我为此做了一个 jsfiddle，但在小提琴上，一切都工作得很好。（图像加载速度可能如此之快，但我对此表示怀疑，因为在我的系统上它非常明显。

我的布局：

```
<div class="wrap">
  <a href="#somewhere">
    <img width="110" height="110" class="img" src="http://placehold.it/110x110" alt="Picture" />
  </a>
  <div class="bd">
    <h3>
      <a href="#somewhere">Lorem Ipsum</a>
    </h3>
    <div class="description">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris vitae sodales lectus. Suspendisse massa ipsum, tempor eget pharetra ac, gravida eu ipsum. Nam sit amet neque vitae dolor consequat volutpat quis et neque. Vestibulum ut purus in quam tincidunt ultricies. In consectetur eleifend dolor, fringilla dignissim lectus dapibus sit amet. Integer nec velit nisl. Cras quis molestie leo. Cras eget odio vel velit eleifend auctor ut a lacus. Suspendisse auctor tincidunt enim eu posuere. Cras dui magna, laoreet sit amet interdum nec, rutrum sit amet turpis. Donec mattis velit eu lectus condimentum luctus.</p>
    </div>
  </div>
</div> 
```

相关的CSS：

```
.wrap {
    padding: 10px;
    margin: 10px 0px;
    overflow: hidden;
}

.img {
  float: left;
  margin-right: 10px;
}

.bd {
  min-width: 200px;
  overflow: hidden;
  zoom: 1;
} 
```

在jsfiddle上：

[http://jsfiddle.net/PT4ST/1/](http://jsfiddle.net/PT4ST/1/)

真实页面（问题实际上是可见的）：

[http://a4team.eu/multimedia-c376597?oldal=5](http://a4team.eu/multimedia-c376597?oldal=5)

如果您使用 chrome 并检查“真实页面”，您会看到尚未加载的图像不保留它的位置，就像该图像上的第二个块：

![图像不适合它的位置](../Images/7915858d760ce5432926145b3dd5e6f0.png)

只需按几个 f5-s。

为什么会这样以及如何使图像在加载过程中占据它的位置？

我不是设计师，但我必须解决这个问题。我一直无法找到问题的根源。

如果我明确地为图像标签指定宽度 =“110”，其他浏览器（FF、IE、Opera）可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:22:15.977

您可以尝试将浮动、宽度和高度分配给图像的容器，在本例中为`<a>`. `block`如果还不是这种情况，您可能必须将容器的显示属性更改为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:21:10.763

chrome 更新后，以下内容足以解决此问题：

```
.wrap .img {
    width: 110px;
    height: 110px;
} 
```

这样即使在加载过程中，图片的大小也会在 chrome 中得到尊重。

# objective-c - 我可以清除 NSDatePicker 吗？

> ID：14401755
> 
> 赞同：1
> 
> 时间：2013-01-18T15:09:05.297
> 
> 标签：objective-c, cocoa

我可以清除 NSDatePicker 吗？

我不想看到任何一天被选中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:12:32.583

简短的回答：不！

但是您可以例如将其子类化并替换 drawInRect 方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T14:41:13.407

下面的 NSDatePicker 子类可以显示一个空的日期状态并表示一个 nil 绑定。

[https://github.com/ThesaurusSoftware/TFDatePicker](https://github.com/ThesaurusSoftware/TFDatePicker)

运行 TFDatePickerTest 以查看其行为方式。

# java - java中的xml utf-8编码错误

> ID：14401759
> 
> 赞同：2
> 
> 时间：2013-01-18T15:09:19.190
> 
> 标签：java, xml, encoding, utf-8

代码如下所示：

```
XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();

        XMLEventWriter eventWriter = outputFactory
                .createXMLEventWriter(new FileOutputStream("output.xml"));

        XMLEventFactory eventFactory = XMLEventFactory.newInstance();
        XMLEvent end = eventFactory.createDTD("\n");
        XMLEvent tab = eventFactory.createDTD("\t");

        StartDocument startDocument = eventFactory.createStartDocument(
                "UTF-8", "1.0");
        eventWriter.add(startDocument);
... 
```

当我打开 xml 文件时，谷歌浏览器在第一个 utf-8 字符处显示“编码错误”，如果我查看 xml 代码，它看起来像：

```
?xml version="1.0"? 
```

里面没有编码部分...

你有什么想法可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:18:59.783

您需要在此处指定编码

```
.createXMLEventWriter(new FileOutputStream("output.xml"), "UTF-8"); 
```

否则它使用平台默认值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:20:15.627

据我了解

```
XMLEvent end = eventFactory.createDTD("\n"); 
```

可能不是你的意思。DTD 是声明实体和标签的文本；非 XML 脚本中的 XML。尝试删除它们。

# c++ - c ++模板和带有方法指针的继承

> ID：14401761
> 
> 赞同：2
> 
> 时间：2013-01-18T15:09:23.433
> 
> 标签：c++, templates, inheritance, function-pointers, member-pointers

如果我声明：

```
class Avoidance : public Schema<std_msgs::String,prog1::Command>{ 
```

我试着

```
 void*(Schema<std_msgs::String,prog1::Command>::*pt)();
    pt=&Avoidance::frontBusy; 
```

编译器报告我

```
error: cannot convert ‘void* (Avoidance::*)()’ 
to 
‘void* (Schema<std_msgs::String_<std::allocator<void> >, prog1::Command_<std::allocator<void> > >::*)()’ in assignment 
```

为什么？避免继承自

```
 Schema<std_msgs::String,prog1::Command> 
```

然后避免是模式<.....>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:16:05.573

这不是成员函数指针的工作方式。如果`frontBusy`是基本函数，则需要适当地键入指针。不过，*调度*仍将按预期工作！

这是一个基本示例：

```
struct A { virtual void f() = 0; };
struct B : A { virtual void f() { } };

void dispatch(void (A::*pf)(), A & a)
{            //    ^^^^^
  (a.*pf)();
}

int main()
{
  B x;
  dispatch(&A::f, x);  // calls x.B::f()
}  //      ^^^^^ 
```

所以，在你的情况下，你想要：

```
void (Schema<std_msgs::String,prog1::Command>::*p)()
                        = &Schema<std_msgs::String,prog1::Command>::frontBusy; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:20:50.383

摆脱模板以简化，假设你有

```
class B {
public:
    void f();
};

class D : public B {
public:
    void g();
}; 
```

一开始可能看起来有点倒退，但您可以`void (B::*)()`转换为`void (D::*)()`，但不能`void (D::*)()`转换为`void (B::*)()`。当您考虑以后如何使用它们时，这是有道理的。

```
void test() {
    void (D::*p)() = &B::f; // OK!
    void (B::*q)() = &D::g; // ERROR!

    B b;
    D d;

    (d.*p)(); // Calls B::f on `d`.  Okay, `B::f` is an inherited member.
    (b.*q)(); // Calls D::g on `b`?? But that's not a member of `b` at all!
} 
```

# python - 从 Wikipedia 创建单词列表

> ID：14401766
> 
> 赞同：0
> 
> 时间：2013-01-18T15:09:39.683
> 
> 标签：python, words

我正在创建一个游戏，我需要一个字典（在这种情况下是一个普通单词列表），其中不仅包含基本形式，还包含所有其他形式。在这种情况下，语言是意大利语，例如，动词也有多种形式和名词。

由于语言非常不规则，我想从一个可能包含所有单词的巨大来源中获取单词。起初我想到了维基百科：我会下载每一篇文章，提取文本，然后过滤单词。

这将花费大量时间，我想知道是否有更好的解决方案，无论是在时间方面还是在列表的完整性方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:15:30.780

如果您使用的是 Linux 系统，您可能需要查看 /usr/share/dict/words。

# ruby-on-rails - 与 attr_accessor 相比，ActiveRecord 是如何定义方法的？

> ID：14401768
> 
> 赞同：6
> 
> 时间：2013-01-18T15:09:42.540
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

ActiveRecord 似乎定义实例方法与 attr_accessor 不同。

**attr_accessor 似乎没有**为我新定义的属性定义一个超级方法：

```
class SomeClass
  attr_accessor :some_attribute

  def some_attribute
    super
  end
end

>> some_class = SomeClass.new
>> some_class.some_attribute
NoMethodError: super: no superclass method `some_attribute' for.. 
```

而**ActiveRecord 明确定义了一个超级方法**：

```
class SomeClass < ActiveRecord::Base
  # some_attribute is now a column in our database

  def some_attribute
    super
  end
end

>> some_class = SomeClass.new
>> some_class.some_attribute
nil 
```

两者的区别在哪里？有没有办法让 attr_accessor 定义一个超级方法？

*编辑：* 我仍然不知道 ActiveRecord 如何定义它的方法，但我知道 attr_accessor 是如何做到的。而不是`super`我可以使用`@some_attribute`，因为它将值存储在同名的全局变量中：[https ://stackoverflow.com/a/4371458/586000](https://stackoverflow.com/a/4371458/586000)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T05:50:59.983

当您在不从另一个类继承的类中使用 attr_accessor 时，根据定义，“父”类中没有同名的方法。因此，super 无处可去寻找同名方法。（好吧，您的类继承自 Object，但 Object 没有定义名为 some_attribute 的方法。）

另一方面，ActiveRecord*确实*为您的属性定义了一个 getter 和一个 setter。因此，当*您在**您的*类（继承自 ActiveRecord::Base）中再次定义它们时，当您调用 super.

对比 attr_accessor 和 ActiveRecord 为您的表列生成的（许多）方法有点像苹果和橘子的问题。ActiveRecord 对基础表上的属性执行各种操作，包括但不限于为表列创建 getter 和 setter。

（注意上面：ActiveRecord 的工作主要是利用 method_missing 的力量，所以在你的表属性上定义的许多或大部分方法实际上是通过 method_missing 方法实现的。super 实际上会在父类中调用 method_missing，如果它存在的话，因此当您从 ActiveRecord::Base 继承时，您可以成功地在 some_attribute 上调用 super。）

# ios - 在 UITextView 上设置语音焦点

> ID：14401772
> 
> 赞同：1
> 
> 时间：2013-01-18T15:10:01.020
> 
> 标签：ios, iphone, accessibility, voiceover

如何`UITextView`在 iOS 6 中将语音焦点设置在我的元素（例如）上。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:18:46.340

很简单。只需这样做：

```
UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification, textView); 
```

请注意，它可能不起作用，具体取决于您使用它的地点和时间。如果您尝试将焦点设置到 中的特定元素`viewDidLoad`，则代码可能无法正常工作。这是因为 VoiceOver 会自己尝试将 VoiceOver 焦点设置在最初的元素上；如果 VoiceOver 在处理您设置焦点的尝试之前执行此操作，则您的代码将起作用。但是，如果 VoiceOver 在处理您的尝试后开始设置初始焦点元素，您的代码将出现失败。

一种更可靠的方法`viewDidLoad`是使用`performSelector:withObject:withDelay:`, 以确保在 VoiceOver 的初始焦点设置之后处理您的呼叫。

# objective-c - Objective C - 链接到按钮和标签

> ID：14401778
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:10:21.920
> 
> 标签：objective-c

我和我的同学试图学习如何将代码与按钮和标签联系起来。但它一直说“不完整的实现”错误。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(IBAction) btClickMe:(id)sender {
    lbTitle.text = @"Hello!";
}

-(IBAction) btWelcome:(id)sender{
    lbTitle.text = @"Welcome";
}

-(IBAction) btGo:(id)sender{
    lbTitle.text = txtName.text;
}

-(IBAction) btTryMe:(id)sender{
    if (x == 0) {
        lbTitle.text = @"Bye! Bye!";
        x = 1;
    } else {
        lbTitle.text = @"Welcome!";
        x = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:16:29.763

不完整的实现通常意味着你已经声明你的类在你的头文件中实现了一个方法，但是你没有在你的实现中提供那个方法。当您声明您的类符合具有所需方法的协议时，这也适用。

# javascript - 为什么此 javascript 计时器代码在 Chrome 调试器中有效，但在正常运行时无效

> ID：14401779
> 
> 赞同：1
> 
> 时间：2013-01-18T15:10:22.730
> 
> 标签：javascript

下面的代码会定期使用新文本更新 div 元素。如果我在 Chrome 调试器中设置断点并以步进模式运行，代码会按预期更新 html。但是，如果在没有设置任何断点的情况下运行，我会看到：

分钟 = 0 秒 = 0

打印然后没有变化。

我究竟做错了什么？

```
<html>
<script type="text/javascript">
var g_t1 = null;
var g_t2 = null;

function StartTimer() {
   g_t1 = new Date();
}

function StopTimer() {
   g_t2 = new Date();
}

function CalcDuration() {
   StopTimer();

   var diff = g_t2.getTime() - g_t1.getTime();
   var place = document.getElementById("here");
   var minutes = Math.floor((diff / 1000) / 60);
   var seconds = Math.floor((diff / 1000) % 60);
   place.innerHTML = "minutes = " + minutes + " seconds = " + seconds;

   window.setTimeout(CalcDuration(), 100);
}

function Poller() {
   if(!g_t1)
     StartTimer();

   window.setTimeout(CalcDuration(), 100);
}

</script>
<body onload="Poller();">
<div id="here"></div>
</body>
</html> 
```

编辑。

对于任何对这两种变体都感兴趣的人：

```
window.setTimeout(CalcDuration, 100); 
```

或者

```
window.setTimeout(function(){CalcDuration()}, 100); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:14:20.123

您需要将计时器函数调用包装在匿名函数中，否则它会立即执行，而不是在计时器范围内。

```
window.setTimeout(function(){CalcDuration()}, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T11:59:59.540

当 setTimeout 在调试模式下工作，但不是在生产中，并且您使用函数引用语法时，例如

```
window.setTimeout(CalcDuration, 100); 
```

那么你应该确保你正在定义这样的函数：

```
CalcDuraction = function() {
   ...
} 
```

而不是

```
function CalcDuration() {
   ...
} 
```

# html - 使用 HTML 5 进行网页设计

> ID：14401781
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:10:23.690
> 
> 标签：html, web

我是网页设计的新手，我想从头开始创建一个网页。我正在使用 Notepad++ 编写我的 HTML，并且想知道如何将其设为“HTML 5”。我真的不明白如何将其定义为 HTML 5 或如何以该格式保存。是您编写代码的方式使其成为 HTML 5 吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:19:41.400

这是一个不错的起点：[html5bones.com](http://html5bones.com) ;-)

这些文件包含许多注释，可帮助您了解如何使用一些更基本的元素。

（这是我的网站 - 但我认为您可能会发现它很有用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:16:54.650

HTML5 具有相同的格式（.html），要使其成为 html5 文档，请添加此 doctype-

```
<!DOCTYPE html> 
```

HTML5 只是带有一些新标签的 html 4。[在这里](http://www.html-5-tutorial.com/)
学习html5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:23:07.660

doctype 是制作 HTML5 文件的第一步。

写`<!DOCTYPE html>`在文件的最开头。

HTML 5 使用与 HTML 4 相同的大部分代码，但 HTML 5 也有许多新代码，`<audio>` `<video>` `<canvas>`以及编写代码的更简单方法，例如`<meta charset="utf-8">`指示文件的编码。

这是您可以开始使用的基本 HTML 5 文件。

```
<!DOCTYPE html>

<html>

<head>

   <meta charset="utf-8">
   <title>HTML 5 file</title>

</head>

<body>

   Write something here

</body>

</html> 
```

[http://www.w3.org/TR/html5/](http://www.w3.org/TR/html5/)是您可以阅读所有详细信息的地方。它不是那么容易理解，但试一试。一旦你开始编码并且需要知道如何使用一个特定的标签或属性，你就去那个链接并查找它并获取所有的细节。

您也可以使用[https://developer.mozilla.org/en-US/](https://developer.mozilla.org/en-US/)和[http://dev.opera.com/](http://dev.opera.com/)之类的地方，它们有工作示例和了解制作内容的好地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:27:01.657

使用一些框架开始您的 HTML5 编码。

[http://html5boilerplate.com/](http://html5boilerplate.com/) [http://www.initializr.com/](http://www.initializr.com/)

这些有预定义的方法、css、javascripts 和 Jquery。它也有助于跨浏览器的兼容性。

Notepad++ 有利于开发。此外，您还可以使用 Dreamweaver CS6 或 Titanium Studio 等。它会在您编码时提供帮助。会得到很多捷径。

HTML5 有很多新的标签、特性等等。你必须参考。[http://www.html5rocks.com/](http://www.html5rocks.com/)和[http://www.w3schools.com/html/html5_intro.asp](http://www.w3schools.com/html/html5_intro.asp)是很好的参考网站。

希望我们能从其他朋友那里得到更多……:)

# php - 关于简单 PHP MVC 示例

> ID：14401783
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:10:27.303
> 
> 标签：php, model-view-controller

[在](https://stackoverflow.com/questions/6022231/simple-php-mvc-example) PHP 中存在一个简单的 MVC 示例。问题是，这个例子只在这个时候起作用

```
$action = $_GET['action'];
if(function_exists($action) && !substr($action,0,1)=="_"){
    $action();
}else{
    echo "<h1>404 Page Not Found</h1><p>The page you requested could not be found</p>";
} 
```

变成：

```
 $action = $_GET['action'];
if(function_exists($action) || !substr($action,0,1)=="_"){
    $action();
}else{
    echo "<h1>404 Page Not Found</h1><p>The page you requested could not be found</p>";
} 
```

**&&**改为**||** . 或完全删除**!substr($action,0,1)=="_" 。**这条线是什么不允许运行**$action**？

========================

编辑：问题是路由器不能与**&&**一起使用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:23:13.117

因为`&&`是`and`

所以这样

```
if(function_exists($action) && !substr($action,0,1)=="_"){ 
```

如果函数`AND`存在`substr`不包含_而不是运行

这表示

`||`所以`or`这意味着

```
if(function_exists($action) || !substr($action,0,1)=="_"){ 
```

如果函数存在但字符串包含`_`它会失败，或者如果函数不存在但字符串不包含`_`它仍然会失败。

所以`&&`检查两者是否正常，`||`无论其中一个是有效还是真实，如果另一个失败或无效，它会给你上面指定的 404

我希望它对你有所帮助，如果不清楚，我会尝试用另一种方式来描述它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:45:36.360

用变化解决

从：

```
if(function_exists($action) && !substr($action,0,1)=="_") 
```

到：

```
if(function_exists($action) && !(substr($action,0,1)=="_")) 
```

# actionscript-3 - 什么是场景？

> ID：14401787
> 
> 赞同：2
> 
> 时间：2013-01-18T15:10:43.083
> 
> 标签：actionscript-3, flash

可能听起来像一个愚蠢的问题，但它不是我曾经需要使用的东西（除非我在脑海中称它为其他东西）。

我知道框架是什么，我一直在使用它们，但什么是场景？

*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay())

    `public function gotoAndPlay(frame:Object, scene:String = null):void`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:16:03.900

在 Flash 的帮助下查看此文档：http: [//help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7eb3a.html](http://help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7eb3a.html)

# android - Android - 使用来自网络的数据更新服务上的小部件。最好的方法？

> ID：14401788
> 
> 赞同：7
> 
> 时间：2013-01-18T15:10:43.903
> 
> 标签：android, networking, service, widget

我有一个关于 Android 小部件，尤其是 Android 服务的问题。这是我想要做的：在手机上，用户应该能够将我的小部件添加到他的主屏幕。小部件从网络获取数据。在阅读了一些关于此的教程后，我发现最好的方法是创建一个从网络（TCP 套接字）获取数据的服务，然后不断更新小部件。这是通过 ScheduledExecutorService 完成的，它在一定的时间间隔内执行 Runnable。Runnable 将连接到服务器，获取数据并更新小部件）。

我现在的问题是，屏幕关闭时不需要更新小部件，因此由于电池耗尽，服务不应该运行。我的问题是：如何做到最好？

**我发现了两种或多或少可以满足我要求的方法：**

1.  当小部件的第一个实例添加到主屏幕时，它将注册一个广播接收器，该接收器接收来自 Android 操作系统的 ACTION_SCREEN_ON 和 ACTION_SCREEN_OFF 意图操作。如果 ACTION_SCREEN_ON 被触发，它将启动更新程序服务，否则将停止它。但我真的不确定这是否是一个好方法，因为广播接收器的生命周期。

2.  在更新程序服务的 Runnable 中，它由 ScheduledExecutorService 定期执行并实际执行网络工作，我通过 PowerManager.isScreenOn() 检查屏幕是否打开。如果是，我执行网络代码，否则不执行。但是当设备处于待机状态时会怎样？这段代码会执行吗？这里的电池耗尽怎么办？

对于我想做的事情，是否有“最佳实践”方法？我读过很多关于 AlarmManager 的文章，它是一个非常强大的工具。你可以用这种方式安排任务，只在显示器打开时执行它们吗？

谢谢你的帮助。

最好的问候 NiThDi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:48:00.800

您的第一个解决方案（小部件处理屏幕打开和关闭广播）是解决问题的方法。启动一个新的[IntentService](http://developer.android.com/reference/android/app/IntentService.html)以与您的应用程序服务器进行后台通信。完成后，发送带有结果的自定义“已完成”广播，然后在您的小部件中处理它。

作为一个额外的好处，它允许您的小部件的多个实例从一个“源”工作，并且在用户没有添加任何小部件的情况下不会消耗任何资源。

**更新**由于不可能将屏幕开/关广播与小部件一起使用，我可能会使用[它](https://stackoverflow.com/a/4545610/181714)（带有`ELAPSED_REALTIME`（非`ELAPSED_REALTIME_WAKEUP`）警报的AlarmManager）来安排（意图）服务运行。这样，当屏幕关闭时，您的服务将不会被安排，而是会在屏幕打开时定期运行。如果屏幕开启和关闭之间的延迟超过了它会在屏幕重新开启时立即运行的时间。

至于您关于广播接收器生命周期的问题，如前所述，请使用 IntentService 执行长时间运行的任务，然后从中广播您的结果。当您启动服务时，调用不会阻塞，因此广播接收器将及时完成。

**更新 2**根据[此](https://groups.google.com/d/msg/android-developers/Airlo3g5luw/OcLEUW2aq6UJ)屏幕，关闭并不意味着设备正在睡眠。您已经有了使用 PowerManager.isScreenOn() 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:36:57.480

我认为 ELAPSED_REALTIME 方法可以工作，但奇怪的是它不适用于我创建的小型测试应用程序。基本上，测试应用程序是一个小部件和一个 IntentService。小部件仅显示当前时间，而 Intent Service 获取当前时间并发送广播，小部件在 onReceive() 方法中使用该广播并更新自身。小部件当然是自定义广播操作的注册接收器。在小部件的 onEnabled() 方法中，我为 AlarmManager 初始化了警报。现在一些代码：

**小部件 onEnabled()：**

```
@Override
public void onEnabled(Context c) {
    super.onEnabled(c);

    Intent intent = new Intent(c.getApplicationContext(), SimpleIntentService.class);

    PendingIntent intentExecuted = PendingIntent.getService(c.getApplicationContext(), 45451894, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    AlarmManager alarmManager = (AlarmManager) c.getApplicationContext().getSystemService(Context.ALARM_SERVICE);
    alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME, 0, 3000, intentExecuted);
} 
```

**小部件 onReceive()：**

```
@Override
public void onReceive(Context context, Intent intent) {
    super.onReceive(context, intent);
    if (intent.getAction().equals(ACTION_RESP)) {
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);

        ComponentName thisWidget = new ComponentName(context.getApplicationContext(), Widget.class);
        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        for (int appWidgetId : allWidgetIds) {
            RemoteViews remoteViews = new RemoteViews(context.getApplicationContext().getPackageName(), R.layout.widget);

            String s = "";

            if (intent.hasExtra("msg")) s = intent.getStringExtra("msg");

            // Set the text
            remoteViews.setTextViewText(R.id.textView1, s);

            appWidgetManager.updateAppWidget(allWidgetIds, remoteViews);
        }
    }
} 
```

**SimpleIntentService onHandleIntent():**

```
@Override
protected void onHandleIntent(Intent intent) {
    Log.w("TestService", "SimpleIntentService onHandleIntent called.");
    String msg = new Date().toGMTString();

    Intent broadcastIntent = new Intent();
    broadcastIntent.setAction(Widget.ACTION_RESP);
    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
    broadcastIntent.putExtra("msg", msg);
    sendBroadcast(broadcastIntent);
} 
```

因此，我在运行 Android 4.2.1 的 Nexus 4 和运行 Android 4.0.4 的模拟器上对此进行了测试。在这两种情况下，SimpleIntentService 都会被创建，并且每 3 秒调用一次 onHandleIntent()，即使我手动关闭了显示器也是如此。我完全不知道为什么 AlarmManager 仍然安排警报，你有吗？！

谢谢！

# python - 带有记忆的子集和

> ID：14401790
> 
> 赞同：0
> 
> 时间：2013-01-18T15:10:58.230
> 
> 标签：python, recursion, sum, subset, memoization

对于家庭作业，我为子集总和编写了一个递归函数，但我找不到字典的正确键，我一直收到键错误。不是在寻找解决方案，只是可以帮助我理解磨损的解释：

```
def subset_sum(s, numbers):
    memo={}
    return subset_sum_memo(s, numbers, 1, memo)

def subset_sum_memo(s, numbers, i, memo):
    key= (len(numbers))
    if key not in memo:
        if s==0:
            memo[key]= True
        elif s<0 or numbers==[]:
            memo[key]= False
        for n in range(len(numbers)):
            if subset_sum_memo(s - numbers[n], numbers[:n] + numbers[n+1:], n, memo):
                memo[key]= True
    return memo[key] 
```

我得到的错误是：

```
if subset_sum_memo(s - numbers[n], numbers[:n] + numbers[n+1:], n, memo): 
File "C:\Users\Yarden\Desktop\Python\302154513_ex11_q1.py", line 17, in subset_sum_memo return memo[key] KeyError: 6 
```

**更新 1**

这是我的新代码：

```
def subset_sum(s, numbers):
    memo={}
    return subset_sum_memo(s, numbers, 1, memo)

def subset_sum_memo(s, numbers, i, memo):
    key= (len(numbers))
    if s==0:
        memo[key]= True
    if s<0 or numbers==[]:
        memo[key]= False
    if key not in memo:
        for n in range(len(numbers)):
            if subset_sum_memo(s - numbers[n], numbers[:n] + numbers[n+1:], n, memo):
                memo[key]= True
            else:
                memo[key]=False
    return memo[key] 
```

还是有问题，不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:27:25.853

change `elif s<0 or numbers==[]:` to `elif s<0 or isinstance(numbers,list):`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:22:04.203

这是你的代码：

```
if key not in memo:
    if s==0:
        memo[key]= True
    elif s<0 or numbers==[]:
        memo[key]= False
    for n in range(len(numbers)):
        if subset_sum_memo(s - numbers[n], numbers[:n] + numbers[n+1:], n, memo):
            memo[key]= True
return memo[key] 
```

问题是，您正在检查是否`key`不在`memo`并进入该块。然后你有多个条件但不是默认情况。

如果所有条件都是`false`，则不会为 设置值`memo[key]`。

# php - PHP：确定参数类型

> ID：14401792
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:11:03.070
> 
> 标签：php, arrays, parameters

> **可能重复：**
> [PHP 数组：检查数组是关联数组还是数字数组的好方法？](https://stackoverflow.com/questions/173400/php-arrays-a-good-way-to-check-if-an-array-is-associative-or-numeric)

我的一个函数的一个参数采用以下类型的值：

```
null,

'*','',

array('domain1','domain2'),

array('domain1'=>'*','domain2'=>'group1','domain3'=>array('group1','group2')), 
```

我在尝试确定参数的类型时遇到问题。特别是在确定它是否是一个数组及其关键参数时。

基本如何确定参数类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:13:43.783

您可以使用`is_array`函数来确定参数是否为数组。您能给我们您的代码以提供更多详细信息吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:13:54.103

PHP [gettype](http://www.php.net/manual/en/function.gettype.php)函数应该做你想做的事。要检查特定类型，您可以使用 is_* 函数，例如 is_array。您可以[在此处](http://www.php.net/manual/en/ref.var.php)找到有关它们的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:14:05.603

php为此提供了大量的功能。

[这](http://php.net/manual-lookup.php?pattern=is_%2a&scope=quickref)是其中大部分（如果不是全部）的搜索。

您将主要使用以`is`( `is_array()`, `is_null()`, `isset()`)开头的函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T15:18:47.160

如果您想要一个简单的方法来确定类型，您可能根本不想使用数组。您可能会发现将数据填充到特定类的对象中会更有用。

然后您可以使用`instanceof`或测试对象类型`is_a()`。

使用对象还可以使您能够为数据结构提供附加功能。`foreach()`通过使其成为迭代器，它仍然可以被视为一个数组（例如 with等）。

如果您更喜欢使用数组，并且想要区分键控数组和数字数组，您可以查看[此问题](https://stackoverflow.com/questions/173400/php-arrays-a-good-way-to-check-if-an-array-is-associative-or-numeric)的答案。

最好的答案是一个简短的函数，如下所示：

```
function array_isassoc(array $array) {
    return array_keys($array) !== range(0,count($array)-1);
} 
```

这将返回`true`键控数组或`false`数值数组。

这可能是您可以使用的最可靠的方法，尽管如果您有一个数字数组并从中删除元素而不重新编号键，它将停止工作。

# sql - 在 where 子句中使用 Oracle SQL 变量时遇到问题

> ID：14401795
> 
> 赞同：1
> 
> 时间：2013-01-18T15:11:07.737
> 
> 标签：sql, oracle, plsql, oracle10g

我正在尝试编写一个脚本来帮助处理众多“此操作列表发生了什么”类型的调用，但我遇到了一些最简单的操作。

我正在尝试声明一个变量并在查询的 where 子句中使用它。我已经删除了与查询无关的所有内容，试图让这个核心功能发挥作用。

id 通常是 18 位数字，但偶尔会包含字母数字，因此它是 varchar。我试图与之比较的列是一个 18 字节的 varchar 字段。

```
declare
  id_to_check VARCHAR(18);  

begin
  id_to_check := '549576015500000109';

select 
  txn_timestamp, exception_type
from cut.event
where irn_id = id_to_check;

end; 
```

每次它抛出一个错误：'在这个选择语句中需要一个 INTO 子句'。我了解 INTO 的工作原理，即如果我想将选择的结果分配给变量，但我不明白在这种情况下这将如何应用，因为我没有将查询结果分配给变量？

另一个令人沮丧的事情是我实际上正在关注 docs.oracle.com 上的文档。

[http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/overview.htm#LNPLS001](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/overview.htm#LNPLS001)。

我也查看了各种谷歌结果，但我不知道如何在不先选择变量的情况下与变量进行比较，但正如你所看到的，我无法选择，因为我只需要它比较原因？

亲切的问候，伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:47:10.143

如果您在 PL/SQL 中做某事，Raphaël Althaus 的回答适用，但我不确定这是否真的是您想要的。听起来您想要一个普通的 SQL 查询，但您希望能够向它传递一个值？假设您在 SQL*Plus 或 SQL Developer 中运行它，您有几种方法来声明和使用固定值。（类似的方法将在其他客户端中可用；PL/SQL 开发人员似乎喜欢这两种方法，至少在命令窗口中，但不确定 Toad 或其他任何东西）。

1）使用[替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#autoId19)：

```
define id_to_check = 549576015500000109

select txn_timestamp, exception_type
from cut.event
where irn_id = '&id_to_check'; 
```

2）使用[绑定变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#autoId30)：

```
variable id_to_check varchar2(18)

exec :id_to_check := '549576015500000109';

select txn_timestamp, exception_type
from cut.event
where irn_id = :id_to_check; 
```

是小型匿名 PL/SQL 块的`exec`简写，但除了将值分配给变量的步骤之外，它是纯 SQL，因此查询不需要包装在 a`begin ... end`中，您不必担心选择`into`变量。

无论哪种情况，您都可以将 ID 值[作为参数传递](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#autoId24)，或者在脚本运行时将[其作为脚本的一部分请求。](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#autoId26)例如，您可以编写一个`query.sql`脚本：

```
define id_to_check = &1

select txn_timestamp, exception_type
from cut.event
where irn_id = '&id_to_check'; 
```

...并运行它：

```
sqlplus -l -s <user>/<password> @query 549576015500000109 
```

...或作为：

```
accept id_to_check prompt 'Enter the ID to check: '

select txn_timestamp, exception_type
from cut.event
where irn_id = '&id_to_check'; 
```

...并在运行时提示用户输入 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:16:01.797

问题不是“您要将结果放入变量中吗”。

在 Oracle 过程的“主体”中，您不能使用`SELECT`没有`INTO`子句的 a。

（实际上你可以拥有，但在光标中）。

所以

```
declare
  id_to_check VARCHAR(18);
  event_timestamp cut.event.txn_timestamp%TYPE;
  event_exception cut.event.exception_type%TYPE;

begin
  id_to_check := '549576015500000109';

select 
  txn_timestamp, exception_type
  INTO event_timestamp, event_exception
from cut.event
where irn_id = id_to_check;

end; 
```

注意：如果没有找到结果，这将引发 NO_DATA_FOUND 异常。

你可以管理它

```
begin
  id_to_check := '549576015500000109';

  BEGIN
  select 
    txn_timestamp, exception_type
    INTO event_timestamp, event_exception
    from cut.event
    where irn_id = id_to_check;

   EXCEPTION WHEN NO_DATA_FOUND THEN 
   --...something
  END

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:49:05.327

你真正的问题不是关于使用变量（你说得对），而是关于从 PL/SQL 块返回游标。

您似乎相信在过程结束时的一个简单的选择应该以某种方式使其返回结果或至少显示它们。虽然有些数据库是这样工作的，但 Oracle 却没有。如果您希望任何数据离开任何类型的块（如函数或过程），则必须显式传递它们。通常这是通过使用游标引用类型的 in 参数来完成的。

如您所见，没有 into 的 select 在 Oracle 中没有意义。即使您设法使其工作并选择数据，您也无法访问结果。

# ruby-on-rails - Rails 引擎：rake 路由显示其路由，但在 rspec 执行时抛出“无路由匹配”

> ID：14401797
> 
> 赞同：9
> 
> 时间：2013-01-18T15:11:14.737
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec

我正在尝试测试我的应用程序正在使用的引擎内部的控制器。规范不在引擎中，而是在应用程序本身中（我尝试在引擎中进行测试，但也遇到了问题）。

我的引擎有以下 routes.rb：

```
Revision::Engine.routes.draw do
  resources :steps, only: [] do
    collection { get :first }
  end
end 
```

引擎通常安装在应用程序 routes.rb 上：

```
mount Revision::Engine => "revision" 
```

当我运行`rake routes`时，在最后几行我得到：

```
Routes for Revision::Engine:
first_steps GET /steps/first(.:format) revision/steps#first
       root     /                       revision/steps#first 
```

在我的引擎控制器 ( `lib/revision/app/controllers/revision/steps_controller.rb`) 上，我有：

```
module Revision
  class StepsController < ApplicationController
    def first
    end
  end
end 
```

在 Rspec 上，我使用以下方法测试此控制器：

```
require 'spec_helper'
describe Revision::StepsController do
  it "should work" do
    get :first
    response.should be_success
  end
end 
```

然后当我运行这个规范时，我得到：

```
ActionController::RoutingError:
   No route matches {:controller=>"revision/steps", :action=>"first"} 
```

为了确保该路线并不真正存在，我将其添加到规范中：

```
before do
  puts @routes.set.to_a.map(&:defaults)
end 
```

结果是这样的：

```
[...]
{:action=>"show", :controller=>"devise/unlocks"}
{:action=>"revision"} 
```

它只有`:action`参数。

可能有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T22:17:14.303

当您尝试测试引擎的控制器时，您需要指定您希望控制器测试使用的路由集，否则它将针对主应用程序运行它。为此，请传递`use_route: :engine_name`给该`get`方法。

```
require 'spec_helper'
describe Revision::StepsController do
  it "should work" do
    get :first, use_route: :revision # <- this is how you do it
    response.should be_success
  end
end 
```

# forms - 仅当表单中的值已更改时才启用“提交”按钮

> ID：14401803
> 
> 赞同：1
> 
> 时间：2013-01-18T15:11:30.680
> 
> 标签：forms, button

我有一个网站的 php 表单，其中包含显示从我的数据库中检索到的值的文本字段以及一个提交按钮。我希望默认情况下禁用提交按钮，并且只有在用户对表单中的文本字段之一进行了更改时才能单击。但是，如果他们将其更改回默认值，则该按钮将再次自动禁用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:14:30.250

您需要使用 javascript。对于每个字段，您必须创建一个事件处理程序来检查值，然后启用或禁用您的提交按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:20:30.057

*   为每个文本框 声明一个**变量**
*   然后将您从数据库中检索的值分配给文本框和变量...
*   在 Button_Click 时，将文本框的值与变量进行比较
*   如果**两者都相同**，则不会发生编辑

就这样

# javascript - Javascript 在 IE 中有 StackOverflow，但在 Chrome/Firefox 中没有

> ID：14401809
> 
> 赞同：0
> 
> 时间：2013-01-18T15:11:57.877
> 
> 标签：javascript, internet-explorer

我有一个基本上是原生 Javascript 数组的类，但它会在添加或删除项目时引发事件。

```
hb.extend( {
Classes: {
    Collection: hbClass.inherit({
        init: function (arr) {
            // get the functions we want to retain
            var _on = this.on,
                _trigger = this.trigger,
                _push = this.push,
                _remove = this.remove,
                _reset = this.reset,
                _from = this.fromArray,
                _watch = this.watch;

            // Set the object up as an Array
            this.__proto__ = Array.prototype;

            // get the Array functions we want to use
            this.arrPush = this.push;

            // reapply the old functions
            this.push = _push;
            this.remove = _remove;
            this.reset = _reset;
            this.fromArray = _from;
            this.on = _on;
            this.trigger = _trigger;
            this.watch = _watch;

            if (arr && (arr.length && typeof arr !== "string")) this.fromArray(arr, true);
        },

        fromArray: function (arr, stopEvent) {
            this.reset();
            for (var i = 0, len = arr.length; i < len; i++) {
                this.arrPush(arr[i]);
            }
            if (!stopEvent) this.trigger('change', this);
        },

        push: function () {
            this.arrPush.apply(this, arguments);
            this.trigger('add', this);
            this.trigger('change', this);
            return this;
        },

        remove: function (from, to) {
            var rest = this.slice((to || from) + 1 || this.length);
            this.length = from < 0 ? this.length + from : from;

            this.arrPush.apply(this, rest);
            this.trigger('remove', this);
            this.trigger('change', this);
            return this;
        },

        reset: function () {
            this.length = 0;
            this.trigger('change', this);
            this.trigger('remove', this);
        }
    })
}
}); 
```

可能有更好的方法来做到这一点，但它适用于我.......除了在 IE 中。
在 IE 中的方法`this.arrPush.appy(this, arguments);`下的行中`push`，它会遇到 Stack Overflow 错误。
具体来说：

> SCRIPT28：堆栈空间不足

但这不会发生在 Firefox 或 Chrome 中。
有人有什么建议吗？
***编辑***
触发代码：

```
this.hbClass.prototype.trigger = function(type, data, context) {
    var listeners, handlers, i, n, handler, scope;
    if (!(listeners = this.listeners)) {
        return;
    }
    if (!(handlers = listeners[type])){
        return;
    }
    for (i = 0, n = handlers.length; i < n; i++){
        handler = handlers[i];

        if (handler.method.call(
            handler.context, this, type, data
        )===false) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:25:36.147

问题可能是这一行：

```
this.__proto__ = Array.prototype; 
```

`__proto__`某些版本的 IE 不支持as 。它已被编入 ES6 规范，但在某些版本的 IE 中并未实现。我不完全了解您的代码是如何工作的，但是设置原型的安全方法是这样的：

工作演示：http: [//jsfiddle.net/jfriend00/ff99G/](http://jsfiddle.net/jfriend00/ff99G/)

```
function myClass() {
    // add new methods to this instance in the constructor
    this.fromArray = function() {};
};
// become an array and get all its methods
myClass.prototype = Array.prototype;

var x = new myClass(); 
```

`.prototype`这是您在 IE 中使用的那种事情的示例：

```
function log(msg) {
    var result = document.getElementById("result");
    var div = document.createElement("div");
    div.innerHTML = msg;
    result.appendChild(div);
}

function myClass() {
    var _push = this.push;
    this.count = function() {
        return this.length;
    }
    this.trigger = function(type, name) {
        var str = type;
        if (name) {
            str += ", " + name;
        }
        log(str);
    }
    this.push = function() {
        var retVal = _push.apply(this, arguments);
        this.trigger("change", "push");
        return retVal;
    }
};

// become an array and get all its methods
myClass.prototype = Array.prototype;

var x = new myClass();

x.push("foo");
x.push("whatever");
log(x.count()); 
```

# javascript - 条件语句不响应结果

> ID：14401821
> 
> 赞同：1
> 
> 时间：2013-01-18T15:12:45.790
> 
> 标签：javascript, jquery

在我的页面上可能填充了任意数量的 UL，每个最多 3 个 LI。我已经设置了这个条件语句来处理左边距，这取决于可能有​​多少个 LI。它记录了正确的结果，但它总是应用 css 就好像结果是 1，即使结果是 2 或 3 ......我对此很陌生，所以也许我错过了一些对更有经验的人来说显而易见的东西. 每个 LI 有一个 40px 的宽度和高度以及一个背景图像。文本是缩进的，所以它不显示。

```
$("ul.links").each(function(){    
    var num = $(this).children().length;
    if (num == 1) {
        $('ul.links li:first-child').css('margin-left','125px');
    }
    else if (num == 2) {
        $('ul.links li:first-child').css('margin-left','96px');
    }
    else {
        $('ul.links li:first-child').css('margin-left','71px');
    }
    //console.log(num);
});

<ul class="links">
  <li><a href="#">First</a></li>
  <li><a href="#">Second</a></li>
  <li><a href="#">Third</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:19:28.937

你的问题在这里：

```
$('ul.links li:first-child').css('margin-left','71px'); 
```

您再次选择所有 ul.links 并将边距应用于所有这些（或者更确切地说是他们的第一个孩子）。您需要将它应用到您正在迭代的那个上，使用`this`.

试试这个（没有双关语）：

```
$("ul.links").each(function(){    
    var num = $(this).children().length;
    if (num == 1) {
        $(this).children().first().css('margin-left','125px');
    }
    else if (num == 2) {
        $(this).children().first().css('margin-left','96px');
    }
    else {
        $(this).children().first().css('margin-left','71px');
    }
    console.log(num);
}); 
```

在这里看到一个[小提琴](http://jsfiddle.net/fJxHH/2/)。

正如 epascarello 指出的那样，为了提高效率，您应该缓存您的 jQuery 对象，而不是重新创建它两次。所以添加：

```
var $elem = $(this); 
```

然后无论你有什么`$(this)`，你都可以用`$elem`. 这样做的原因是每次使用时`$(something)`都会创建一个新的 jQuery 对象，这会产生一些开销。因为`$(this)`它非常小，但如果您使用复杂的选择器，开销可能会很大。

此外，正如 epascarello 所做的那样，您可以通过为边距创建一个变量然后在条件块的末尾应用它来在源代码中节省几个字节。此外，如果您决定更改选择器（也许您决定将其应用于第二个孩子而不是第一个）或更改您想要摆弄的属性，这确实会使它变得更容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:19:44.350

您的代码不起作用，因为您正在处理所有 uls 而不是当前的。下面是一种使用当前 url 的方法，并且每个方法都可以在不复制和粘贴同一行的情况下进行多次。相同的行复制和粘贴 3 次的原因意味着将来您需要更改它，您必须在三个地方而不是一个地方更新。

```
$("ul.links").each(function(){
    var currentUL = $(this),
        num = currentUL.children().length,
        margin;  //use a variable instead of pasting the same jq line over and over
    switch(num){  //switch is cleaner
        case 1 : 
            margin=125;
            break;
        case 2 : 
            margin=96;
            break;
        default : 
            margin=71;
            break;
    }
    currentUL  //Work off the current ul
        .find(">li:first-child")  //select the first li
            .css("margin-left",margin + "px");   
}); 
```

# java - 提取html代码的特定部分

> ID：14401823
> 
> 赞同：0
> 
> 时间：2013-01-18T15:12:50.087
> 
> 标签：java, html, extract

我正在做我的第一个 Android 应用程序，我必须获取 html 页面的代码。

实际上我正在这样做：

```
 private class NetworkOperation extends AsyncTask<Void, Void, String > {
    protected String doInBackground(Void... params) {
        try {
            URL oracle = new URL("http://www.nationalleague.ch/NL/fr/");
            URLConnection yc = oracle.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
            String inputLine;
            String s1 = "";
            while ((inputLine = in.readLine()) != null)
                s1 = s1 + inputLine;
            in.close();

            //return
            return s1;
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

但问题是它需要太多时间。如何以从第 200 行到第 300 行的 HTML 为例？

对不起我的英语不好：$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:30:51.537

您通过 HTTP 获取 HTML 文档。HTTP 通常依赖于 TCP。所以......你不能只是“跳过线”！服务器将始终尝试向您发送您感兴趣的部分之前的所有数据，并且您的通信方必须确认收到此类数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:33:31.823

最好的情况下使用而不是`readLine()`使用`read(char[] cbuf, int off, int len)`。另一种肮脏的方式

```
int i =0;
while(while ((inputLine = in.readLine()) != null)
i++;
if(i>200 || i<300 )
DO SOMETHING
in.close();) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:34:50.677

1.  不要逐行阅读 [使用`read(char[] cbuf, int off, int len`)]
2.  不要连接字符串 [使用`StringBuilder`]

打开缓冲阅读器（就像你已经做的一样）：

```
 URL oracle = new URL("http://www.nationalleague.ch/NL/fr/");
    BufferedReader in = new BufferedReader(new InputStreamReader(oracle.openStream())); 
```

不是逐行读取，而是读取 a `char[]`（我会使用大小约为 8192 的一个），而不是使用 a`StringBuilder`来附加所有 read `char`。

阅读 HTML 源代码的特定行有点冒险，因为 HTML 页面源代码的格式可能会改变。

# javascript - 使用 Clients.Group 时 SignalR Javascript 客户端回调未触发

> ID：14401825
> 
> 赞同：2
> 
> 时间：2013-01-18T15:13:03.377
> 
> 标签：javascript, signalr, signalr.client

我正在使用 SignalR RC2，这是我的集线器

```
public class ImgHub : Hub
{
    public void Create(string guid)
    {
        Groups.Add(Context.ConnectionId, "foo");
    }

    public void SendMsg(string msg)
    {
        Clients.Group("foo").send(msg);
    }
} 
```

我有一个控制台应用程序和一个连接到这个集线器的 web 应用程序（asp.net webforms）。控制台应用程序正如我所期望的那样工作，问题出在 Javascript 部分。当我在 SendMsg 中使用 Clients.Group 时，如果我将 SendMsg 更改为此，“发送”回调不会触发

```
public void ShareImage(byte[] image, string guid)
{
    Clients.All.ReceiveImage(image);
} 
```

有用。这是Javascript代码

```
<script src="Scripts/jquery-1.7.1.min.js"></script>
<script src="Scripts/jquery.signalR-1.0.0-rc2.min.js"></script>
<script src="http://localhost:4341/signalr/hubs/" type="text/javascript"></script>
<script type="text/javascript">
    var mainHub;
    $(function () {
        $.connection.hub.url = 'http://localhost:4341/signalr';
        // Proxy created on the fly
        mainHub = $.connection.imgHub;

        mainHub.client.send = function (msg) {
            alert(msg);
        };

        // Start the connection
        $.connection.hub.start(function() {
            mainHub.server.create('vanuit den JS');
        })
            .done(function() {
                $('#msgButton').click(function() {
                    mainHub.server.sendMsg("msg from JS");
                });
            });
    });

</script> 
```

正如您在 JS 代码中看到的那样，我在页面上还有一个调用 SendMsg 函数的按钮，消息确实到达了控制台应用程序，所以我猜想 JS 客户端已在 SignalR 组中正确注册。

我不是 JS 专家，所以我希望知道更多关于它的人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T18:55:10.813

这是因为您需要在全局 asax 中启用重新加入组。

```
GlobalHost.HubPipeline.EnableAutoRejoiningGroups(); 
```

这里有更多详细信息： [http ://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)

此方法调用将在 1.0 RTM 中消失，但现在您需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:18:16.690

您的发送函数可能未执行的原因之一是，当您允许在客户端上调用 sendMsg 时，客户端可能尚未在组“foo”中。

在您的 $.connection.hub.start 中，您正在注册一个要在 start 完成时调用的函数，但是您还要注册另一个要在 start 完成后通过 .done 调用的函数。因此，发生的事情是两个函数几乎同时触发。因此，当 sendMsg 函数可供调用时，您可能尚未成功添加到组中。

以下是解决该问题的方法：

```
$.connection.hub.start().done(function() {
    mainHub.server.create('vanuit den JS').done(function() {
        $('#msgButton').click(function() {
            mainHub.server.sendMsg("msg from JS");
        });
    });
}); 
```

本质上，我一直在等待组加入成功完成，直到允许 sendMsg 通过。

我知道这是一个长期的答案，因为您可能在连接开始后等待了很长时间，但仍然没有任何东西通过电线，但我无法复制我的行为。

如果我上面的修复不起作用，您应该确保通过设置断点来调用您的服务器端函数。

# c#-4.0 - Azure 存储 - CloudBlob.UploadFile - 如何验证上传成功？

> ID：14401826
> 
> 赞同：1
> 
> 时间：2013-01-18T15:13:08.710
> 
> 标签：c#-4.0, azure-storage, azure-blob-storage

我正在编写自动测试，我需要检查上传是否成功。我怎么做？为什么没有 FileExist 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T21:10:51.303

[新的 Storage Client Library 2.0 版本中添加了 Blob 的Exists](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.icloudblob.exists.aspx)方法。由于您使用的是较旧的库版本，因此您可以改用[FetchAttributes](http://msdn.microsoft.com/en-us/library/windowsazure/ee741755.aspx)。如果 blob 不存在，它将引发异常。

另一方面，正如 Magnus 也提到的，Upload* 方法如果不成功就会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T19:07:43.447

我建议检查文件大小，例如在完成数据传输之前关闭与服务器的连接。

```
public bool WriteDocumentStream(String documentId, Stream dataStream, long length)
{
  CloudBlobContainer container = BlobClient.GetContainerReference(ContainerName);
  CloudBlob blob = container.GetBlobReference(documentId);
  blob.UploadFromStream(dataStream);

  blob.FetchAttributes();
  bool success = blob.Properties.Length == length;
  if (!success)
    blob.Delete();

  return success;
}

//length should be like this: context.Request.ContentLength 
//(if request have ContentLength defined at headers) 
```

# java - util.list 不删除所有元素

> ID：14401828
> 
> 赞同：-1
> 
> 时间：2013-01-18T15:13:24.750
> 
> 标签：java, list

从列表中删除元素时我遇到了非常不寻常的问题。这是我的代码：

```
for (int i = 0; i < offers.size(); i++) {
                if(offers.get(i).isSpecialOffer()){
                    offers.remove(i);

                }
        }
  return offers; 
```

当我打印出测试报价时，我得到了正确的结果，每个人都是正确的。但是当我尝试使用真正的布尔值删除元素时，我得到了错误的结果。它打印出带有假布尔值的报价。我不知道问题出在哪里？感谢帮助

更新：我有从列表中删除 specialOffers 的功能。我总是得到一些真正有价值的报价。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:15:34.693

如果您在使用调用*之前*`remove`包含（当前已注释掉），那么您将打印出与您删除的值*不同的值。*例如：*`System.out.println`*

 **拆除前：

```
0 - Foo
1 - Bar
2 - Baz 
```

现在如果`i`是一，我们会打电话`remove(1)`，离开

```
0 - Foo
1 - Baz 
```

...所以我们已经*删除了* `Bar`，然后我们会*打印* `Baz`

然后你也不会检查`Baz`，因为你会`i`在再次测试之前增加到 2。

要正确执行此类操作，您应该使用如下循环：

```
for (Iterator<Offer> iterator = offers.iterator(); iterator.hasNext() ;) {
    Offer offer = iterator.next();
    if (offer.isSpecialOffer()) {
        iterator.remove(); // Must remove using the iterator!
        System.out.println(offer.isSpecialOffer() + ".." + offer.getName());
    }
} 
```

或者，如果您真的想使用索引，最好*向后*工作以避免出现问题：

```
for (int i = offers.size() - 1; i >= 0; i--) {
    Offer offer = offers.get(i);
    if (offer.isSpecialOffer()) {
        offers.remove(i);
        // Use offer, not offers.get(i)
        System.out.println(offer.isSpecialOffer() + ".." + offer.getName());
    }
} 
```**

# java - org.hibernate.ObjectNotFoundException 使用 list() 的问题

> ID：14401838
> 
> 赞同：2
> 
> 时间：2013-01-18T15:13:54.883
> 
> 标签：java, hibernate, jakarta-ee

以下查询引发异常：

```
 Query query = session.createQuery("from Associate as a order by a.username asc");
 associates = query.list(); 
```

> org.hibernate.ObjectNotFoundException：不存在具有给定标识符的行：[ca.mypkg.model.Associate#0]

如果我在数据库中创建一个条目，`id`它就`0`可以了。我真的不明白，因为我只是想加载数据库中的所有条目，而不仅仅是一个特定的条目。

我发现的类似问题与尝试加载一个给定的对象有关，`ID`我没有做这样的事情。

副班：

```
@Table(name = "user")
@XmlRootElement(name = "associate")
public class Associate implements Serializable {

private String username;
private String password;
private String firstName;
private String lastName;
private String userType;
private int id;
private String email;
private String isActive;
private Department dept;
private String lastUpdated;
private String associate_type;
// ...
@Id
@GeneratedValue
public int getId() {
    return id;
}

@OneToOne
@JoinColumn(name = "dept")
public Department getDept() {
    return dept;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:27:49.963

From my experience this type of error message usually means it does not find joined entity by mentioned id, and not the entity requested in the query (Associate, in your case). My guess is that Associate class contains a join entity which has primitive type primary key.

# android - 如何在Android中创建这样的按钮

> ID：14401840
> 
> 赞同：0
> 
> 时间：2013-01-18T15:13:59.693
> 
> 标签：android

有没有一种简单的方法来创建一个看起来或多或少像 Android 中的按钮，使用边距或类似的东西？（我不想创建位图）

![在此处输入图像描述](../Images/16ccc2676aee1ed6cba6075987456b5e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:17:41.543

> 有没有一种简单的方法来创建一个看起来或多或少像 andorid 中的按钮

是的，创建一个看起来像这样的图像资源（也许是 png 文件）并将其设置为按钮的背景。

> （我不想创建位图）

我不完全确定您不想创建位图是什么意思。但是，如果您的意思是您不想使用实际的图像文件，那么如果您能解释为什么您不想使用它可能会有所帮助。但是，如果不是这种情况，则没有“简单的方法”来做到这一点。您必须手动创建 xml 形状对象来制作灰色的“L”形状，然后可能使用一些自定义字体来创建字母。然后你必须调整填充/边距，直到它按照你想要的方式排列（记住它在不同的设备上可能看起来不同）

# xcode4.5 - 在选择或单个文件中查找和替换 - Xcode 4.5

> ID：14401845
> 
> 赞同：7
> 
> 时间：2013-01-18T15:14:07.643
> 
> 标签：xcode4.5

我遇到了一个 Xcode 难题：如何在我所做的选择中查找和替换，或者至少在单个文件中查找和替换？

根据以下主题，有一种方法可以按住选项键，并且 Replace All 应该更改为 Replace in Selection：

[如何在 Xcode 的选择中查找和替换？](https://stackoverflow.com/questions/5254650/how-can-i-find-and-replace-inside-a-selection-in-xcode4?answertab=active#tab-top)

这要么不会在 Xcode 4.5 中发生，要么我不知道该怎么做。现在我可以在左侧的搜索导航器中调出查找/替换选项，然后点击返回搜索，或点击预览以调出要更改的文件。

作为一种解决方法，我可以在选定的组中搜索（通过右键单击文件导航器中的组），但是能够在我所做的选择中进行替换，并且在单个文件中将非常有帮助。

提前致谢 ;-）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T03:27:53.717

在 Xcode 4.6 中（我的系统上没有 4.5 来检查它），如果您在编辑器窗口中并按 Cmd-F 在编辑器顶部调出 Find 视图（而不是全局您所指的搜索检查器），并使用其中的替换选项，按住选项键将“全部替换”更改为“在选择中”。这似乎是合理的，因为全局搜索检查器跨越多个文件，而选择“In Selection”的选项只有在您引用单个文件时才有意义。

# c - 从编译的搜索程序中提取记录，C

> ID：14401846
> 
> 赞同：1
> 
> 时间：2013-01-18T15:14:10.163
> 
> 标签：c, database, record, binary-search, brute-force

有人知道如何从已编译的记录搜索程序中提取所有信息吗？

我认为该程序通过使用二进制搜索来工作。它被编译并且数据库在程序中。查看记录的唯一方法是进行正确的搜索。

有什么方法可以暴力破解程序并提取所有信息吗？通过以 1 和 10 位长 [ 1xxxxxxxxx ] 开头的 ID 搜索记录。如果你想试试，1112700303 可以，但我没有其他号码。

我试过一些反编译器，但我不知道我在做什么。

该程序可以从这里下载： [https ://docs.google.com/file/d/0B9fwDRGBsrxBT3FiSFdaTnJZcUk/edit](https://docs.google.com/file/d/0B9fwDRGBsrxBT3FiSFdaTnJZcUk/edit)

感谢您的帮助，因为它将增加我的知识并在这里学到新的东西：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:49:58.313

虽问。有没有办法获取源代码（问作者，搜索程序名称，...）？

在 Unix/Linux 上，程序字符串从二进制文件中提取可打印字符串。在 x86 可执行文件上执行此操作会给出一长串字符串，这些字符串只是恰好是 ASCII 字符串、程序使用的函数名称以及其他垃圾的指令。它在某处列出了程序的初始化文本数据（printf(3) 格式，使用的常量字符串），在本例中显示了一堆看起来像阿拉伯文的名称和一些目录名称。也许寻找那些可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T02:25:11.480

This can probably be achieved by using [Snowman](https://derevenets.com/). It might not get the exact source code you are looking for but enough to extract all the data you need such has the constant strings.

# css - 如何使用相对定位的第二级修复这个基于 CSS 的垂直菜单？

> ID：14401848
> 
> 赞同：1
> 
> 时间：2013-01-18T15:14:18.860
> 
> 标签：css, submenu, css-position

我有这个简单的 CSS`ul li`菜单，它有一个二级菜单，它应该在其父级下方弹出并按下其余部分。

像这样：

```
Option 1 <---- no positioning on UL
  Sub 1  <----- relative positioned UL
  Sub 2
Option 2
Option 3 
```

出于某种原因，相对定位`UL`不会影响选项 2。

我试着把它放在 jsFiddle 中。[http://jsfiddle.net/hxQRt/](http://jsfiddle.net/hxQRt/)

我的 HTML

```
<!-- SUBMENU  -->
<div id="" class="sidemeny_undersida"><ul class="menu"><li class="first current"><a href="miljorivning.aspx" title="Miljörivning" class="stylized">Miljörivning</a><ul>
<li><a href="rivning_av_vaggar_och_mattor.aspx">Rivning av väggar och mattor</a></li>
<li><a href="rivning_och_borttagning_av_golvbelaggning.aspx">Rivning och borttagning av golvbeläggning</a></li>
<li><a href="brokkar_med_bilningshammare.aspx">Brokkar med bilningshammare</a></li>
<li><a href="rivning_av_stora_byggnader.aspx">Rivning av stora byggnader</a></li>
</ul>
</li><li class=""><a href="miljosanering.aspx" title="Miljösanering" class="stylized">Miljösanering</a></li><li class=""><a href="haltagning121108.aspx" title="Håltagning" class="stylized">Håltagning</a></li><li class=""><a href="stambyten.aspx" title="Stambyten" class="stylized">Stambyten</a></li><li class=""><a href="golvslipning.aspx" title="Golvslipning" class="stylized">Golvslipning</a></li><li class="last "><a href="ventilationsrengoring121108.aspx" title="Ventilationsrengöring" class="stylized">Ventilationsrengöring</a></li></ul></div>
<!-- / SUBMENU  --> 
```

我的 CSS

```
/* Level 1 */ 

.sidemeny_undersida,
.sidemeny_undersida li,
.sidemeny_undersida li a { margin: 0; padding: 0; float: none;  }

.sidemeny_undersida { display: block; width:200px; min-height:33px; margin: 20px 0 0 20px; float:left; }

.sidemeny_undersida li { display: block; width: 200px; padding: 4px 0 6px 0; margin: 0 0 5px 0; background: url(../images/sub_nav_bg.png) no-repeat bottom left; }

.sidemeny_undersida li a { color: #000; padding: 0 0 0 10px; }

.sidemeny_undersida li a:hover, 
.sidemeny_undersida li.current a  { color: #25a8de; }

.sidemeny_undersida li:last-child { background: none; }

/* Level 2 */

.sidemeny_undersida li.current ul { display: block; position: relative !important; width: 250px; min-height: 150px; margin: 0 0 0 0; padding: 0;   }

.sidemeny_undersida li li { width: inherit; height: 15px; margin-left: 10px; background: none; padding: 2px 0 0 0;  }

.sidemeny_undersida li li a,
.sidemeny_undersida li.current li a { font-size: 12px; color: #000; text-transform: none; padding: 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:11:16.527

您没有添加二级`ul`标签。您的 html 应如下所示：

```
<ul>
<li>One
    <!-- This is the html tag you're missing -->
    <ul>
        <li>OneDotOne</li>
        <li>OneDotTwo</li>
    </ul>
</li>
<li>Two</li>
<li>Three</li>
</ul> 
```

除此之外，您的 CSS 适用于基本功能。您的基本示例：http: [//jsfiddle.net/DANqg/1/](http://jsfiddle.net/DANqg/1/) 您的初始菜单示例：http: [//jsfiddle.net/hxQRt/2/](http://jsfiddle.net/hxQRt/2/)

# node.js - Socket.IO console.log 未正确触发

> ID：14401851
> 
> 赞同：0
> 
> 时间：2013-01-18T15:14:22.673
> 
> 标签：node.js, express, socket.io

使用以下代码片段，console.log 显式定义和回调仅在从 127.0.0.1 建立连接时触发。

```
 service.sockets.on('connection',function(socket){
        console.log("Incoming Socket Connection -> ",socket.id);
        if(typeof fn === 'function'){fn(socket);}
    }); 
```

任何其他机器都不会触发，但它们会接收连接并提供页面。NodeJS 是否只显示来自 127.0.0.1 的连接的控制台输出？我对此感到非常困惑，这使测试变得非常困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:43:30.383

它指向 127.0.0.1，因此它指向其他开发人员机器上的本地套接字实例。问题解决了。

# cron - 导入/导出每个主机帐户的 cron 作业列表的最简单方法？

> ID：14401853
> 
> 赞同：1
> 
> 时间：2013-01-18T15:14:25.353
> 
> 标签：cron, cpanel

我有一个 WHM/cPanel 帐户，并且创建的每个托管帐户都需要在 cPanel 中输入一个 cron 作业列表。

是否有一种更简单的方法来每次创建这些 cron 作业，而不是在每次创建新的 cPanel 帐户时手动将每个作业输入 cPanel >> Cron Jobs？

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:54:53.183

您可以在 /scripts/postwwwacct 上使用 shell 脚本和命令 crontab 每次创建帐户后，此脚本 (/scripts/postwwwacct) 在用户 cron 上插入您想要的 cron 作业。

人 cron 和人 crontab

```
crontab -u user file_with_cronjobs 
```

在 file_with_cronjobs 上的用户内容 cronjobs 的这个 cron 之后

# c - 如何最好地使用 C 中的 const 关键字？

> ID：14401856
> 
> 赞同：16
> 
> 时间：2013-01-18T15:14:33.027
> 
> 标签：c, constants

我试图了解我应该如何`const`在 C 代码中使用。首先，我并没有真正费心使用它，但后来我看到了很多`const`贯穿始终的例子。我应该努力回去并虔诚地制定合适的变量`const`吗？还是我只是在浪费时间？

我想它可以更容易地阅读哪些变量预计会发生变化，尤其是在函数调用中，无论是对于人类还是编译器。我是否遗漏了其他重要的点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T15:17:58.503

`const`是*类型化*的，`#define`宏不是。

`const`由 C 块限定，`#define`适用于文件（或更严格地说，是编译单元）。

`const`对于参数传递最有用。如果您`const`在带有指针的原型上看到 used，您就知道传递数组或结构是安全的，因为函数不会改变它。不`const`，它可以。

查看诸如此类的定义，`strcpy()`您就会明白我的意思。一开始就将“const-ness”应用于函数原型。改造`const`并不像“大量工作”那么困难（但如果你按小时计酬的话就可以了）。

还要考虑：

```
const char *s = "Hello World";
char *s = "Hello World"; 
```

哪个是正确的，为什么？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-18T15:17:27.847

> 如何最好地使用 C 中的 const 关键字？

`const`当您想将其设为**“只读”**时使用。就这么简单:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T15:16:34.447

使用`const`不仅是一种好的做法，而且可以提高代码的可读性和可理解性，并有助于防止一些常见错误。一定要在适当的地方使用 const 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-10T16:38:31.183

除了在尝试修改常量并将常量作为非常量参数传递时产生编译器错误，因此充当编译器保护，它还使编译器能够执行某些优化，知道值不会改变，因此它可以缓存该值而不必从内存中重新读取它，因为它不会更改，并且它允许立即在代码中替换它。

**C 常量**

`const`和`register`基本上相反，`volatile`使用`volatile`将覆盖文件和块范围的 const 优化以及块范围的`register`优化。`const register`并且`register`将产生相同的输出，因为 const 在 gcc C -O0 的块范围内对 C 没有任何作用，并且在 -O1 及以后是冗余的，因此只有`register`优化适用于 -O0，并且从 -O1 开始是冗余的。

```
#include<stdio.h>

int main() {
    const int i = 1;
    printf("%d", i);
} 
```

```
.LC0:
  .string "%d"
main:
  push rbp
  mov rbp, rsp
  sub rsp, 16
  mov DWORD PTR [rbp-4], 1
  mov eax, DWORD PTR [rbp-4] //load from stack isn't eliminated for block-scope consts on gcc C unlike on gcc C++ and clang C, even though value will be the same
  mov esi, eax
  mov edi, OFFSET FLAT:.LC0
  mov eax, 0
  call printf
  mov eax, 0
  leave
  ret 
```

在这种情况下，使用 -O0,`const`和`volatile`都`auto`产生相同的代码，只有`register`不同的[cf](https://stackoverflow.com/questions/578202/register-keyword-in-c/61141973#61141973)

```
#include<stdio.h>
const int i = 1;
int main() {
    printf("%d", i);
} 
```

```
i:
  .long 1
.LC0:
  .string "%d"
main:
  push rbp
  mov rbp, rsp
  mov eax, DWORD PTR i[rip] //load from memory
  mov esi, eax
  mov edi, OFFSET FLAT:.LC0
  mov eax, 0
  call printf
  mov eax, 0
  pop rbp
  ret 
```

改为`const int i = 1;`：

```
i:
  .long 1
.LC0:
  .string "%d"
main:
  push rbp
  mov rbp, rsp
  mov eax, 1  //saves load from memory, now immediate
  mov esi, eax
  mov edi, OFFSET FLAT:.LC0
  mov eax, 0
  call printf
  mov eax, 0
  pop rbp
  ret 
```

**C++ 常量**

```
#include <iostream>

int main() {
    int i = 1;
    std::cout << i;
} 
```

```
main:
  push rbp
  mov rbp, rsp
  sub rsp, 16
  mov DWORD PTR [rbp-4], 1 //stores on stack
  mov eax, DWORD PTR [rbp-4] //loads the value stored on the stack
  mov esi, eax
  mov edi, OFFSET FLAT:_ZSt4cout
  call std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
  mov eax, 0
  leave
  ret 
```

* * *

```
#include <iostream>

int main() {
    const int i = 1;
    std::cout << i;
} 
```

```
main:
  push rbp
  mov rbp, rsp
  sub rsp, 16
  mov DWORD PTR [rbp-4], 1 //stores it on the stack
  mov esi, 1               //but saves a load from memory here, unlike on C
                           //'register' would skip this store on the stack altogether
  mov edi, OFFSET FLAT:_ZSt4cout
  call std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
  mov eax, 0
  leave
  ret 
```

* * *

```
#include <iostream>
int i = 1;
int main() {

    std::cout << i;
    } 
```

```
i:
  .long 1
main:
  push rbp
  mov rbp, rsp
  mov eax, DWORD PTR i[rip] //load from memory
  mov esi, eax
  mov edi, OFFSET FLAT:_ZSt4cout
  call std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
  mov eax, 0
  pop rbp
  ret 
```

* * *

```
#include <iostream>
const int i = 1;
int main() {

    std::cout << i;
    } 
```

```
main:
  push rbp
  mov rbp, rsp
  mov esi, 1 //eliminated load from memory, now immediate
  mov edi, OFFSET FLAT:_ZSt4cout
  call std::basic_ostream<char, std::char_traits<char> >::operator<<(int)
  mov eax, 0
  pop rbp
  ret 
```

`const`如果 a未初始化（在文件范围和块范围内），C++ 具有产生编译器错误的额外限制。`const`在 C++ 上也有默认的内部链接。仍然`volatile`覆盖`const`并结合了 C++ 上的两种优化。`register`[`const register`](https://stackoverflow.com/questions/3207018/register-keyword-in-c/61150733#61150733)

尽管上述所有代码都是使用默认的隐式 -O0 编译的，但当使用 -Ofast 编译时，`const`令人惊讶的是，在 C 或 C++ 上的 clang 或 gcc 上对于 file-scoped 仍然不是多余的`consts`。除非使用，否则不会优化来自内存的负载`const`，即使文件范围变量未在代码中修改。[https://godbolt.org/z/PhDdxk](https://godbolt.org/z/PhDdxk)。

# matlab - 将对象传递给 MATLAB 中的其他对象

> ID：14401860
> 
> 赞同：1
> 
> 时间：2013-01-18T15:14:47.853
> 
> 标签：matlab, object, constants

我从 MATLAB 中的面向对象编程开始，我对如何最好地将对象传递给其他对象感到困惑，因为 MATLAB 没有静态类型定义。

我有三个不同的类，它们都包含一些常量。现在，我想在第三个类的方法中使用两个类中定义的常量——我应该怎么做？这些类没有层次结构。

所以，我在 C++ 中寻找类似#include 的东西。

问题如下图所示。如何编写“*Object1”和“*Object2”引用来访问 const1 和 const2？

```
classdef Object1

    properties (Constant)
        const1 = 100;
    end

    methods
        function Obj1 = Object1()
        end
end

classdef Object2

    properties (Constant)
        const2 = 200;
    end

    methods
        function Obj2 = Object2()
        end
end

classdef Object3

    properties (Immutable)
        property3
    end

    methods
        function Obj3 = Object3()
            Obj3.property3 = *Object1.const1 + *Object2.const2;
        end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:13:43.070

只需删除星号，我认为你有你需要的东西。

您的代码中还有一些其他语法错误（替换`Immutable`为`SetAccess = immutable`，并将缺少`end`的 s 添加到`classdef`s），但是一旦我进行了这些更改，我得到：

```
a = Object3
a = 
  Object3

  Properties:
    property3: 300
  Methods 
```

一般来说，要引用`Constant`另一个类的属性，只需在属性前面加上类名（如果类在包中，还可能是包名）。

# version-control - 如何撤消 hg init？

> ID：14401862
> 
> 赞同：9
> 
> 时间：2013-01-18T15:14:54.757
> 
> 标签：version-control, mercurial

我输入`hg init`了一个目录，但后来改变了主意：我宁愿不在版本控制之下。那么我该如何撤消`hg init`呢？

我想除了删除目录之外还有另一种解决方案`.hg`，但我找不到该命令。或者 mercurial 不可能从项目中移除自己？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-18T15:16:24.957

为什么不使用

`rm -rv .hg/`在 Linux/Unix 系统或 MacOS 下

或者

`rmdir /S .hg`在 WINdows 系统上（使用良好的 ol' cmdline，第一个示例也可以在 PowerShell 下工作）。

它简单有效，可以满足您的需求：从项目中删除 Mercurial。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T15:16:36.537

唯一要做的`hg init`就是添加`.hg`目录及其内容。

因此，撤消 a`hg init`确实可以通过简单地删除`.hg`目录来完成。真的不能比这更容易了！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-18T15:16:26.773

只需删除`.hg`目录（它只是一个，位于存储库的根目录）。没有什么了。

# sitecore - JW播放器播放/暂停按钮刷新浏览器

> ID：14401865
> 
> 赞同：2
> 
> 时间：2013-01-18T15:15:07.943
> 
> 标签：sitecore, jwplayer

JW Player 有一个恼人的问题。如果我点击视频，它会暂停并播放通常很好，但是如果我使用暂停和播放按钮，它会刷新我的浏览器。似乎影响使用 HTML5 的浏览器，在 Flash 中很好。找不到任何人报告同样的问题。从 Sitecore 媒体库中的视频运行文件。我在 IE9 中遇到问题，说“加载媒体时出错：无法播放文件”我有时会在尝试恢复播放视频后在 Chrome 中得到这个。有任何想法吗？已将 Handbrake 中的视频编码为 iphone4 和通用 MP4，并勾选了网络优化。

没有使用 Javascript 和使用默认皮肤做任何特别的事情。

# jboss - 我可以在没有支持许可证的情况下使用 JBoss EAP 6 吗？

> ID：14401873
> 
> 赞同：23
> 
> 时间：2013-01-18T15:15:38.617
> 
> 标签：jboss, jboss7.x

JBoss Application Platform 有 2 个发行版，一个社区版和一个企业版，社区版就像企业版的 Beta 版，JBoss 7.0 实际上是 EAP 6 beta 1，7.0.1 是 beta 2，7.1.0 是 beta 3 和 7.1。 1 是 rc 1。

JBoss AS 7.1.2 和 7.1.3 会发生什么？这是一个非常有用的链接：[http ://henk53.wordpress.com/2013/01/09/the-curious-case-of-jboss-as-7-1-2-and-7-1-3/](http://henk53.wordpress.com/2013/01/09/the-curious-case-of-jboss-as-7-1-2-and-7-1-3/)

所以我的问题是：我可以在没有支持许可证的情况下使用 JBoss EAP 6 吗？

可从 access.redhat.com/downloads 下载下载，您必须从中单击“Evaluations and Demos”，然后单击“JBoss Enterprise Application Platform Evaluation”。

我已经读到 JBoss EAP 仍然是开源的，你可以自由使用它，但前提是你必须从源代码编译它，这不是一件容易的事，他们也不希望这样。

所以如果我在生产中使用我从“评估和演示”下载的版本，这是否违法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-13T10:59:29.730

TLDR；是的，您可以在没有支持订阅的情况下使用，但是不，如果您只是下载最新的 EAP 二进制文件，则不允许在生产中使用它。

这里有三个案例来考虑如何在没有支持订阅的情况下运行 JBoss EAP，其中两个也允许生产使用：

**一、开发使用**

您可以将任何 JBoss EAP*二进制版本*用于开发目的而无需付费订阅。您不会以这种方式获得补丁或支持，也无法在生产中运行它。来自[“供开发使用的下载”](http://www.jboss.org/products/eap/download/)：

> 要下载 JBoss EAP，您必须有一个帐户。您还需要接受 JBoss 开发者计划的条款和条件，该计划提供 0 美元订阅，仅供开发使用。

**2\. EAP 6.x alpha 版本**

所有 alpha 版本，例如 JBoss EAP 6.1 Alpha，都可以以任何方式或形式免费使用，*也可以在生产环境中*使用。从[这个消息](https://developer.jboss.org/message/819862#819862)：

> 6.1 Alpha 二进制文件免费提供给整个社区（开发和生产使用）。

而[这个线程](https://developer.jboss.org/message/819862)：

> 但是，此开发限制不适用于 EAP alpha 版本。如果您愿意，可以在生产环境中运行 EAP alpha 版本。至于它们的质量，6.1.0.Alpha 与社区最终版本的质量相当。但是，Alpha 是开始进行广泛测试和强化的地方，因此如果您对使用 EAP 感兴趣，我们建议将 GA 或更高版本用于生产。

[JBoss FAQ](https://web.archive.org/web/20150323081629/http://jbossas.jboss.org/faq)中的条目也证实了这一点，说

> Q：如果EAP 6.1.0.Alpha和社区7.2.0.Final一样，为什么叫Alpha？答：EAP 具有更加保守和严格的版本强化流程，包括广泛的质量测试和合作伙伴认证。从历史上看，每个 EAP 版本都从我们最近的社区决赛开始，然后随着强化工作的执行分阶段发布。第一个 EAP 阶段 Alpha 与社区最终版本具有同等或更好的质量。
> 
> 问：我如何使用 EAP 6.1.0 Alpha 有什么限制吗？A. 不——它与 AS 版本具有相同的许可和条款，但是由于它是 Alpha 版本，我们不建议在生产中使用它。

这两篇 redhat 知识库文章确认 EAP 6.3.Alpha 也可供所有人在生产环境中运行（仅对付费订阅者可见）：

*   [“红帽 JBoss EAP 6.3 Alpha 可用性”](https://access.redhat.com/solutions/762773)
*   [“在生产中使用 JBoss EAP alpha 版本，无需支持订阅”](https://access.redhat.com/solutions/1331263)

编辑：现在[负责 Red Hat JBoss EAP 6 的高级经理](http://www.redhat.com/summit/speakers/session.html)John Doyle[确认](https://developer.jboss.org/message/936151#936151)了

> 先前关于 EAP 6.1 Alpha 的声明适用于所有 EAP 6 Alpha 版本。它们可以在生产中运行。

**3\. 自编译版本**

EAP 也可作为源代码分发，如果您自己编译它们，删除任何 Red Hat 商标，在生产中运行它们应该是合法的。当然，你完全靠你自己来支持他们。[为了使编译更容易，这个 github 帐户](https://github.com/hasalex/eap-build)上有一个脚本，使用该脚本构建您自己的 EAP 就像

```
git clone git://github.com/hasalex/eap-build.git
cd eap-build
./build-eap.sh 
```

有关详细信息，请参阅项目自述文件。[还对其关于构建的法律地位的问题之一进行了](https://github.com/hasalex/eap-build/issues/41)扩展讨论，这是指WildFly 项目负责人[Jason Greene 的声明](https://developer.jboss.org/thread/197780?start=75&tstart=0#jive-22575526718439150544)，称合法使用该产品的方法之一是

> 3.  自建和支持 EAP - 您可以获得企业版本的一些好处（例如旧主要版本的补丁等），但您必须投入时间和精力来构建和维护/验证您的应用服务器分发位。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T04:30:51.890

我认为答案是：有点。如果您同意 $0 开发人员许可证并同意仅将其用于开发目的，您可以获得最新 JBoss EAP 6.1.0.Alpha 的二进制版本。但是，您不会获得补丁或支持。

此外，它是在 LGPL 下开源的，在这种情况下，您不必同意 LGPL 之外的任何内容。但诀窍是获取源代码。而且你不会得到修补的源代码。这里一个重要的考虑是二进制包是经过仔细配置的（例如，关于安全默认值），而如果你从可用源编译它，你就得靠你自己了。

底线：如果您将许可证用于任何重要的商业目的，请购买许可证，以免处于源演变中的某个任意固定点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-11T17:47:47.357

红帽在这里。如果您使用 JBOSS 二进制文件，它们是红帽知识产权。您必须订阅 Red Hat 才能使用该软件，费用可能为 0 美元（仅限开发人员使用）或更多，具体取决于您的需求和/或订阅合规性（非开发人员使用，如非生产或生产）。

详情请参阅[http://www.jboss.org/terms-and-conditions/](http://www.jboss.org/terms-and-conditions/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T14:16:38.820

回答原始问题“我可以在没有支持许可证的情况下使用 JBoss EAP 6 吗？”：

根据 2015 年 9 月发布的官方“Red Hat JBoss Middleware 订阅指南”（[https://www.redhat.com/en/resources/subscription-guide-red-hat-jboss-middleware](https://www.redhat.com/en/resources/subscription-guide-red-hat-jboss-middleware)），您可以使用 JBoss EAP 6 仅在以下情况下没有支持许可证：

a) 仅由一个人使用的环境，例如开发人员、测试用例开发人员、架构师

b) 开发人员台式机/笔记本电脑或

c) 服务器上的单用户开发实例（物理或虚拟）

因此，您必须为测试/QA 和生产环境付费。

PS：比较计算器中提到了“EAP 平台”支持许可证的价格 - [https://www.redhat.com/en/eap-calculator](https://www.redhat.com/en/eap-calculator)

PS2：有一个项目包含 JBoss EAP 的脚本自定义构建 - [https://github.com/hasalex/eap-build](https://github.com/hasalex/eap-build)

# azure - 每天早上的 Azure WebRole 计划任务

> ID：14401878
> 
> 赞同：2
> 
> 时间：2013-01-18T15:16:01.470
> 
> 标签：azure, azure-web-roles

我试图找出一个解决方案，让 WebRole 每天早上 5 点运行任务。我查看了 Quartz.Net 和 stackoverflow 上的示例，但它们都将任务安排为每 10 分钟运行一次。是否有任何示例显示我如何安排它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T16:26:05.447

您可能还想查看 Windows Azure Store 中的 Scheduler 插件（登录到 manage.windowsazure.com 的门户，前往 Add-Ons，然后点击 App Services 并选择 Scheduler）。

每月最多 5,000 个预定作业是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:10:51.900

Quartz.Net 应该对你有好处。尝试使用[CronTrigger](http://quartznet.sourceforge.net/tutorial/lesson_6.html)（或2.x 版本中的[CronTriggerImpl](http://quartznet.sourceforge.net/apidoc/2.0/html/topic2161.html)）。

cron 表达式的示例 - `"0 0 5 * * ?"`- `run every day at 5 AM`。

cron触发子表达式位置含义：

1.  **秒**-`0`为您服务（以 0 秒运行）
2.  **分钟**-`0`给你（在 0 分钟运行）
3.  **小时**-`5`为您服务（以 5 小时运行；*它使用 24 小时制*）
4.  **月中日**- `*`- 每天运行
5.  **月**-`*`为您服务（每月运行）
6.  **Day-of-Week** - `?`- 未为您指定（已使用 Day-of-Month）
7.  **年份**（可选字段）-*未使用*

# sql-server-2008 - 以数据库名称为变量的动态 SQL 中的语法错误

> ID：14401880
> 
> 赞同：-2
> 
> 时间：2013-01-18T15:16:02.853
> 
> 标签：sql-server-2008, tsql, stored-procedures

> **可能重复：**
> [SQL Server：如何在存储过程中获取数据库名称作为参数](https://stackoverflow.com/questions/3943823/sql-server-how-to-get-a-database-name-as-a-parameter-in-a-stored-procedure)

在下面的存储过程中，我将数据库名称作为参数传递，但目前为了测试，我是通过在过程中声明的字符串的数据库名称。

请告知，因为我收到语法错误`SET`并且它无法识别我正在传递的数据库名称。

```
USE [smtpFetch]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER Procedure [dbo].[checkForUpdateV]
(
    @ctsCode Varchar(100)
)
As

BEGIN

Declare @dbName varchar(100)
Declare @stDB TABLE
(
change_version_state varchar(max),
change_version_status varchar(200),
uniqueid  varchar(20),
Country_code  varchar(15),
Research_date  varchar(15),
data_date  varchar(15),
Make  varchar(50),
Model  varchar(50),
Versions varchar(255),
Model_year varchar(15),
doors varchar(5),
body varchar(5)
);
DECLARE @number_days as INT
DECLARE @DATAD as nvarchar(max)
DECLARE @DATAD2 as varchar(max)
SET @number_days = 5
SET @ctsCode=@ctsCode
SET @dbName='SSCRUS_CS2002'
SET @DATAD =N'Delete from ' + @ctsCode
select @DATAD
--print @dbName;
set @DATAD2=@DATAD2
INSERT INTO @stdb
set @DATAD2 = "SELECT  
  STUFF(
              (     SELECT ', ' + st105.full_text 
                    FROM"  + @dbName + ".dbo.version v2 
                    JOIN " + @dbName + ".dbo.equipment e105
                    ON e105.vehicle_id = v2.vehicle_id AND e105.schema_id = 105 
                    JOIN " + @dbName + ".dbo.schema_text st105  
                    ON st105.schema_id = 105 AND st105.data_value = e105.data_value AND    st105.language_id = 19 
                    WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime, CONVERT(char(8), v2.id_103))) > - @number_days) AND 
                                v.vehicle_id = v2.vehicle_id
                    FOR XML PATH('')
              ),1,1,''
              ) AS Change_version_state,

  STUFF(
              (     SELECT ', ' + st106.full_text 
                    FROM " + @dbName + ".dbo.version v3 
                    JOIN " + @dbName + ".dbo.equipment e106
                    ON e106.vehicle_id = v3.vehicle_id AND e106.schema_id = 106 
                    JOIN " + @dbName + ".dbo.schema_text st106  
                    ON st106.schema_id = 106 AND st106.data_value = e106.data_value AND st106.language_id = 19 
                    WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime,  CONVERT(char(8), v3.id_103))) > - @number_days) AND 
                                v.vehicle_id = v3.vehicle_id
                    FOR XML PATH('')
              ),1,1,''
              ) AS Change_version_status,
  v.id_101 AS [Unique ID], 
  v.id_109 AS Country, 
  v.id_103 AS [Research Date], 
  v.id_104 AS [Data Date],
  v.id_128 AS Make, 
  v.id_129 AS Model, 
  v.id_131 AS Version, 
  v.id_108 AS [Model Year], 
  v.id_605 AS Doors, 
  v.id_606 AS Body

  FROM " + @dbName + ".dbo.version v   
  WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime, CONVERT(char(8), v.id_103))) >  - @number_days)
  ORDER BY [Unique ID], Change_version_status, Change_version_state"
  execute sp_executesql @DATAD2
  --select * from @stdb
  END 
```

上面的存储过程报错

```
Msg 156, Level 15, State 1, Procedure checkForUpdateV, Line 41
Incorrect syntax near the keyword 'set'.

Msg 103, Level 15, State 4, Procedure checkForUpdateV, Line 45
The identifier that starts with '.dbo.equipment e105
ON e105.vehicle_id = v2.vehicle_id AND e105.schema_id = 105 
' is too long. Maximum length is 128.

Msg 103, Level 15, State 4, Procedure checkForUpdateV, Line 47
The identifier that starts with '.dbo.schema_text st105  
ON st105.schema_id = 105 AND st105.data_value = e105.data_value 
AND st105.lang' is too long. Maximum length is 128.

Msg 103, Level 15, State 4, Procedure checkForUpdateV, Line 58
The identifier that starts with '.dbo.equipment e106
ON e106.vehicle_id = v3.vehicle_id AND e106.schema_id = 106 
' is too long. Maximum length is 128.

Msg 103, Level 15, State 4, Procedure checkForUpdateV, Line 60
The identifier that starts with '.dbo.schema_text st106  
ON st106.schema_id = 106 AND st106.data_value = e106.data_value 
AND st106.lang' is too long. Maximum length is 128.

Msg 103, Level 15, State 4, Procedure checkForUpdateV, Line 78
The identifier that starts with '.dbo.version v   
WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime, 
CONVERT(char(8), v.id_103))) > - @number_days)
ORDER ' is too long. Maximum length is 128. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:35:29.420

您的语法有一些问题。

您不能将 SET 操作作为 INSERT 语句的一部分。

```
INSERT INTO @stdb
set @DATAD2 = "SELECT 
```

不要对动态 SQL 使用双引号

```
set @DATAD2 = "SELECT 
```

应该

```
set @DATAD2 = 'SELECT 
```

使用 + 语法时注意间距：

```
FROM"  + @dbName + ".dbo.version v2 
```

应该

```
FROM '  + @dbName + '.dbo.version v2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:40:23.973

以下代码解析“命令已成功完成”。在 mu ssms 上。我已从您的代码中删除所有 sysntext 错误。希望这有帮助

```
USE [smtpFetch]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER Procedure [dbo].[checkForUpdateV]
(
    @ctsCode Varchar(100)
)
As

BEGIN

Declare @dbName varchar(100)
Declare @stDB TABLE
(
change_version_state varchar(max),
change_version_status varchar(200),
uniqueid  varchar(20),
Country_code  varchar(15),
Research_date  varchar(15),
data_date  varchar(15),
Make  varchar(50),
Model  varchar(50),
Versions varchar(255),
Model_year varchar(15),
doors varchar(5),
body varchar(5)
);
DECLARE @number_days as INT
DECLARE @DATAD as nvarchar(max)
DECLARE @DATAD2 as varchar(max)
SET @number_days = 5
SET @ctsCode=@ctsCode
SET @dbName='SSCRUS_CS2002'
SET @DATAD =N'Delete from ' + @ctsCode
select @DATAD
--print @dbName;
set @DATAD2=@DATAD2
--INSERT INTO @stdb
Select @DATAD2 = '  INSERT INTO @stdb SELECT  
  STUFF(
              (     SELECT '',''  st105.full_text 
                    FROM '  + @dbName + '.dbo.version v2 
                    JOIN ' + @dbName + '.dbo.equipment e105
                    ON e105.vehicle_id = v2.vehicle_id AND e105.schema_id = 105 
                    JOIN ' + @dbName + '.dbo.schema_text st105  
                    ON st105.schema_id = 105 AND st105.data_value = e105.data_value AND    st105.language_id = 19 
                    WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime, CONVERT(char(8), v2.id_103))) > - @number_days) AND 
                                v.vehicle_id = v2.vehicle_id
                    FOR XML PATH('')
              ),1,1,''
              ) AS Change_version_state,

  STUFF(
              (     SELECT '', '' + st106.full_text 
                    FROM ' + @dbName + '.dbo.version v3 
                    JOIN ' + @dbName + '.dbo.equipment e106
                    ON e106.vehicle_id = v3.vehicle_id AND e106.schema_id = 106 
                    JOIN ' + @dbName + '.dbo.schema_text st106  
                    ON st106.schema_id = 106 AND st106.data_value = e106.data_value AND st106.language_id = 19 
                    WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime,  CONVERT(char(8), v3.id_103))) > - @number_days) AND 
                                v.vehicle_id = v3.vehicle_id
                    FOR XML PATH('')
              ),1,1,''
              ) AS Change_version_status,
  v.id_101 AS [Unique ID], 
  v.id_109 AS Country, 
  v.id_103 AS [Research Date], 
  v.id_104 AS [Data Date],
  v.id_128 AS Make, 
  v.id_129 AS Model, 
  v.id_131 AS Version, 
  v.id_108 AS [Model Year], 
  v.id_605 AS Doors, 
  v.id_606 AS Body

  FROM ' + @dbName + '.dbo.version v   
  WHERE   (DATEDIFF(day, { fn NOW() }, CONVERT(datetime, CONVERT(char(8), v.id_103))) >  - @number_days)
  ORDER BY [Unique ID], Change_version_status, Change_version_state'
  execute sp_executesql @DATAD2
  --select * from @stdb
  END 
```

-- 临时表

```
Create table #@stDB (
change_version_state varchar(max),
change_version_status varchar(200),
uniqueid  varchar(20),
Country_code  varchar(15),
Research_date  varchar(15),
data_date  varchar(15),
Make  varchar(50),
Model  varchar(50),
Versions varchar(255),
Model_year varchar(15),
doors varchar(5),
body varchar(5)
) 
```

# android - AIR Actionscript 3 添加 facebook 分享按钮

> ID：14401884
> 
> 赞同：2
> 
> 时间：2013-01-18T15:16:20.843
> 
> 标签：android, facebook, actionscript-3, mobile, air

基本上，我目前正在使用 Actionscript 3.0 和 AIR (Flash Pro 6) 构建手机游戏。我想添加一个 facebook 分享按钮，用户可以将他们的成就发布到他们的墙上。

该帖子将包含一些文字和图像。

我不知道从哪里开始。有人可以帮忙吗？谢谢b4...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:58:14.953

这应该会有所帮助： [http ://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

这里还有文档： [http ://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Documentation_1_8_1.zip&can=2&q=](http://code.google.com/p/facebook-actionscript-api/downloads/detail?name=GraphAPI_Documentation_1_8_1.zip&can=2&q=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-20T11:46:11.330

您可以使用此 AS3 代码来使用 FB 分享按钮。

```
fbShareBtn.addEventListener(MouseEvent. CLICK, shareapp)
 function shareapp(evt:Event):void
            {

            var req:URLRequest = new URLRequest();
            req.url = "http://www.facebook.com/dialog/feed";
            var vars:URLVariables = new URLVariables();
            vars.app_id = "xxxxxxxxxxxx"; // your application's id
            vars.link = "http://youromainhere";
            vars.picture = "http://yourimage";
            vars.name = "My Game";
            vars.caption = "My Score ";
            //vars.description = "My score is " + String(score) + " Try and you!";
            vars.redirect_uri = "http://yourdomainhere";
            req.data = vars;
            req.method = URLRequestMethod.GET;
            navigateToURL(req, "_blank");

            } 
```

# mysql - 根据列中的逗号分隔值从 MySQL 表中获取记录

> ID：14401892
> 
> 赞同：2
> 
> 时间：2013-01-18T15:16:51.637
> 
> 标签：mysql, sql, codeigniter

我从名为 的表中获取记录`Pizza_Table`。

`Pizza_table`架构

```
id | pizza name | pizza_topping_ids
1  | pizza1     |1,2,3
2  | pizza2     |2,3
3  | pizza3     |4,5,6 
```

实际上，我的功能是根据`pizza_topping_ids` 我在此搜索中分配的工作来搜索披萨。但我找不到合适的解决方案。.

我不能使用`IN`子句来获取记录。

我试过了：

1)

```
 SELECT * 
 FROM `pizza_table` 
 WHERE `pizza_topping_id` REGEXP '[[:<:]]2[[:>:]]' 
```

问题：获取所有有价值的记录`2`

2)

```
SELECT * 
FROM `pizza_table` 
WHERE `pizza_topping_id` REGEXP '[[:<:]]1,2,3,4[[:>:]]' 
```

但是 MySQL 返回了一个空的结果集，

如果逗号分隔的值与任何记录都不匹配，则返回`topping_id`列中最有价值的结果。

例如：如果我已经运行了上面的查询以找出具有 1、2、3、4 topping_id 的比萨饼，但是在数据库中不存在具有这样的 topping_id 组合的比萨饼，那么结果将是最覆盖的 id 应该显示为 'pizza1' `pizza_topping_id 1,2,3`。

抱歉英语和格式不好，但请尝试理解我的问题。提前致谢。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:18:58.590

试试这个-

```
SELECT * FROM `pizza_table` WHERE  FIND_IN_SET(2,pizza_topping_id) 
```

或正则表达式

```
SELECT * FROM `pizza_table` WHERE pizza_topping_id REGEXP '^2,|,2$|,2,' OR pizza_topping_id =2 
```

请看演示：[演示](http://sqlfiddle.com/#!2/12801f/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:19:10.127

RegEx 在非常大的数据集上速度很慢。

MySQL 有一个[`FIND_IN_SET(value, column)`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T17:00:51.493

这可能不会直接回答您的问题，而只是一个建议`:D`

首先，表上的行`pizza_topping`不需要用逗号分隔值。使用当前设计很难搜索这样的值。这些值应该存储在行中而不是列中。

考虑以下模式，

```
CREATE TABLE PIZZA 
(
    PizzaID INT PRIMARY KEY,
    NAME VARCHAR(50) UNIQUE,
    PRICE DECIMAL(10,2)
);

INSERT INTO PIZZA VALUES (1,'Sunny Side Up Pizza', 120);
INSERT INTO PIZZA VALUES (2,'BBQ Chicken Pizza', 200);
INSERT INTO PIZZA VALUES (3,'Muffuletta Pizza', 175);
INSERT INTO PIZZA VALUES (4,'Caramelized Onion Pizza', 135);
INSERT INTO PIZZA VALUES (5,'Broccoli Deep Dish Pizza', 150);

CREATE TABLE TOPPINGS 
(
    ToppingID INT PRIMARY KEY,
    NAME VARCHAR(50) UNIQUE
);

INSERT INTO TOPPINGS VALUES (1,'Pepperoni');
INSERT INTO TOPPINGS VALUES (2,'Mushroom');
INSERT INTO TOPPINGS VALUES (3,'Sausage');
INSERT INTO TOPPINGS VALUES (4,'Cheese');
INSERT INTO TOPPINGS VALUES (5,'Garlic');
INSERT INTO TOPPINGS VALUES (6,'Ham');
INSERT INTO TOPPINGS VALUES (7,'Tomato Sauce'); 
```

并且每个的记录`PIZZA_TOPPING`应该有多行。`ToppingID``PizzaID`

```
CREATE TABLE PIZZA_TOPPINGS
(
    PizzaID INT,
    ToppingID INT,
    CONSTRAINT tb_fk1 FOREIGN KEY (PizzaID)
        REFERENCES Pizza(PizzaID),
    CONSTRAINT tb_fk2 FOREIGN KEY (ToppingID)
        REFERENCES TOPPINGS(ToppingID),
    CONSTRAINT tb_UQ UNIQUE (PizzaID, ToppingID)
);

INSERT INTO PIZZA_TOPPINGS VALUES (1,1);
INSERT INTO PIZZA_TOPPINGS VALUES (1,2);
INSERT INTO PIZZA_TOPPINGS VALUES (1,3);
INSERT INTO PIZZA_TOPPINGS VALUES (2,4);
INSERT INTO PIZZA_TOPPINGS VALUES (2,5);
INSERT INTO PIZZA_TOPPINGS VALUES (2,6);
INSERT INTO PIZZA_TOPPINGS VALUES (2,7);
INSERT INTO PIZZA_TOPPINGS VALUES (3,1);
INSERT INTO PIZZA_TOPPINGS VALUES (3,3);
INSERT INTO PIZZA_TOPPINGS VALUES (3,5);
INSERT INTO PIZZA_TOPPINGS VALUES (4,2);
INSERT INTO PIZZA_TOPPINGS VALUES (5,1);
INSERT INTO PIZZA_TOPPINGS VALUES (6,7);
INSERT INTO PIZZA_TOPPINGS VALUES (6,1); 
```

这种搜索记录的技术称为[**关系除法**](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

例如，您想搜索具有以下成分的比萨饼：`Pepperoni`、`Mushroom`、`Sausage`。

```
SELECT  a.PIZZAID, a.NAME, a.PRICE
FROM    Pizza a
        INNER JOIN Pizza_Toppings b
            ON a.PizzaID = b.PizzaID
        INNER JOIN Toppings c
            ON b.ToppingID = c.ToppingID
WHERE   c.Name IN ('Pepperoni', 'Mushroom', 'Sausage')
GROUP   BY a.PIZZAID, a.NAME, a.PRICE
HAVING  COUNT(*) = 3 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b4e19/1)

或至少包含以下内容的比萨饼：`Pepperoni`, `Mushroom`,

```
SELECT  a.PIZZAID, a.NAME, a.PRICE
FROM    Pizza a
        INNER JOIN Pizza_Toppings b
            ON a.PizzaID = b.PizzaID
        INNER JOIN Toppings c
            ON b.ToppingID = c.ToppingID
WHERE   c.Name IN ('Pepperoni', 'Mushroom')
GROUP   BY a.PIZZAID, a.NAME, a.PRICE
HAVING  COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b4e19/3)

论文比使用任何其他函数（如`FIND_IN_SET`,`REGEXP`等）要好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T19:51:54.087

尝试在这种结构中有用的mysql的find_in_set

```
$id = 2;
$query = $this->db->query("
                         SELECT * 
                         FROM `pizza_table` 
                         WHERE FIND_IN_SET($id,pizza_topping_id)";
return $query->result(); 
```

# jquery - 升级到 jquery 1.9，获取 HTTP 405.0 加载 html 文件

> ID：14401895
> 
> 赞同：1
> 
> 时间：2013-01-18T15:16:54.180
> 
> 标签：jquery, ajax

如标题所示，我有一个运行良好的 asp.net 4.0 Web 表单项目。当我尝试将 jquery 从 1.7.2 移动到 1.9.0 时，我得到

HTTP 405.0 - 不允许的方法

当我尝试通过 ajax 加载 htm 文件时。导致错误的示例代码

```
$("#samplediv").load("/htmlParts/ComunicazioniAlerts.htm?p=" + now(), function () {
    alert('loaded');
}); 
```

与旧 jquery 版本完美配合的代码。

我将升级置于备用状态，这似乎是一个方法/动词问题，但仅在升级 jquery 时才显示，就好像他们改变了他们需要页面的方式一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:54:02.017

成立。我在我的应用程序中使用了许多 ajax 调用，为了避免重复我把这个放在我的应用程序之上

```
$.ajaxSetup({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: "{}",
    dataType: "json"
}); 
```

在 1.7.2 中，这不适用于一直使用 GET 方法的 $.load() 。
现在在 1.9.0 中，$.load 也会考虑 $.ajaxsetup，使用 POST 方法为 htm 文件发送请求，而 IIS 拒绝该请求。

可能的解决方法：
- 在 IIS 上启用静态元素上的 POST 动词（我不知道该怎么做，这是一个技巧，可以安装我可能使用的所有 iis。糟糕）
- 从 $.ajaxsetup 中删除 POST，再次添加到所有$.ajax 请求（无聊且冗长）
- 将所有 $.load 替换为 $.get，必须编写代码将生成的 html 添加到所需的 div（同样，无聊且冗长）。

任何解决方法表示赞赏。

# ios - Monotouch：如何为新消息添加/删除收件人气球/气泡

> ID：14401897
> 
> 赞同：2
> 
> 时间：2013-01-18T15:16:59.390
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我想创建自定义电子邮件撰写对话框，我需要实现“添加联系人”功能。就像在标准的 iOS 应用程序中一样。我还没有找到任何漂亮的控件，所以它应该手动实现。所以我想知道如何在 MT.D 元素内动态绘制这样的元素？

[UPD：让我从这里](https://stackoverflow.com/questions/5247072/recreate-recipient-bubble-behaviour-in-mail-app-three20)展示一张图片： ![在此处输入图像描述](../Images/097ba14d91bcf4ea1fc3b2d5384edb48.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:51:10.940

> 我还没有找到任何漂亮的控件，所以它应该手动实现。

查看Apple[文档](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW1)中的**New-Person View Controller**。它们都可以从 MonoTouch 应用程序中使用。

# iphone - 将字符串转换为时间（不是日期）

> ID：14401898
> 
> 赞同：1
> 
> 时间：2013-01-18T15:17:02.647
> 
> 标签：iphone, ios, objective-c, cocoa, time-format

> **可能重复：**
> [小时分钟秒到秒 ios](https://stackoverflow.com/questions/13879328/hours-minutes-seconds-to-seconds-ios)

我有一个这样格式化的时间

```
// format: HH:mm:ss,AAA
// example for 2 hours, 35 minutes, 15 seconds, and 207 milliseconds
02:35:15,207 
```

我正在尝试将其转换为秒作为双精度数。上面的例子会变成：

```
// 2 hrs * 3600 + 25 min * 60 + 15.207
9315.207 
```

我想我可以用扫描仪分离每个元素，但我认为可能有更简单的方法。我尝试使用`NSDateFormatter`，但我需要它作为双精度，而不是作为`NSDate`. 有什么建议么？谢谢。

***进一步仅供参考***

这是用于`MPMoviePlayer`和`currentTime`属性是双重的。对于我有数据要显示的任何给定部分，我正在检查是否`dataStartTime <= playerTime < dataEndTime`. 所以我正在使用`double`，因为那是`currentTime`已经的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:00:00.617

这是解决方案，这个想法很简单，得到两个日期，一个是你的时间，一个是 00:00:00,000 时间，然后取他们的时间差。

```
- (double)secondsFromString:(NSString*)str {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss,SSS"];
    NSString *dateString = @"1970-01-01";
    NSDate *date = [formatter dateFromString:[NSString stringWithFormat:@"%@ %@",dateString,str]];
    NSDate *refDate = [formatter dateFromString:[NSString stringWithFormat:@"%@ 00:00:00,000",dateString]];
    double time = [date timeIntervalSince1970] - [refDate timeIntervalSince1970];
    return time;
} 
```

# xcode - 图像并非全部显示在模拟器上，而是显示在情节提要中

> ID：14401900
> 
> 赞同：12
> 
> 时间：2013-01-18T15:17:07.257
> 
> 标签：xcode, uiviewcontroller, uiimageview, storyboard

我对 iOS 开发还很陌生，我在 Xcode 4.5.2 的情节提要中四处游荡。我开始了一个新的选项卡栏项目（5 个选项卡），然后将一些图像（UIImageViews 对象）放入它们，一切看起来都很好，并且在模拟器上构建出来的效果很好，但并不是所有的图像都显示出来。相同的图像将显示在 Firstviewcontroller 上，但不会显示在另一个 viewcontroller 上。而且我似乎无法将新的图像对象添加到第一个中（这意味着我可以将它放在情节提要中，但新的图像对象不会出现在模拟器上），它几乎似乎正在显示缓存的屏幕。例如，我只是将图像随机放置在一个视图控制器上，然后移动它们并再次运行模拟器，但位置不匹配。

有人在 Storyboard 上对此有任何信息或经验吗？

提前致谢。射线

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-25T13:26:38.677

就我而言，当我在其中创建新项目时，`Xcode 6`我无法在模拟器和设备中显示图像。我已经导入了图像资产中的所有图像，并在其中创建了一个文件夹。现在我已经导入了所有图像，现在一切正常。现在显示所有图像。

按着这些次序：

步骤1：

![步骤1：](../Images/b8e29fe10b6cd26d554e7bbc7adab5fc.png)

第2步：

![第2步](../Images/9072309837e85af24a34085d8e928d16.png)

第 3 步：

![第 3 步](../Images/e6a9a46bd5063e469cfae343bcac41fc.png)

然后导入您需要的图像。参考链接： [StackOverflow 链接](https://stackoverflow.com/a/27127738/2905967)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-02T12:22:44.250

我有一个类似的问题。但后来发现这是因为我把图片放在了app目录下的一个真实文件夹中。所以有我的项目文件夹，其中包含另一个名为“资产”的文件夹，其中包含图像。当我将图像移出文件夹并将它们放入项目的根文件夹时，这个问题得到了解决。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-30T19:43:09.383

在我的情况下，图片是 JPG 而不是 PNG。将 xcasset 中的图像替换为转换为 PNG 的相同图像是诀窍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-24T08:22:03.487

当您更改故事板或图像的文件夹时会发生这种情况。（可能是从另一个项目复制的故事板）。

在项目导航器中找到您的图像，选择它并将其位置更改为（相对于项目）

[![在此处输入图像描述](../Images/ba119326aade009ac0e090e62a7bebb7.png)](https://i.stack.imgur.com/tpa4u.jpg)

如有必要，您需要重新链接您的图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-06T07:58:09.027

我重构故事板后遇到了这个问题。可能的解决方案： - 转到 Storyboard 并选择您在模拟器中看不到的图像。- 转到属性检查器并再次重新选择图像。

在 Storyboard 重构之后，有时 Xcode 会分配`Unknown image`给 UIImageView。

重新选择图像解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-30T06:18:39.447

重新启动模拟器解决了我的问题。我认为这是一个缓存问题。

**注意：**我正在使用带有 xcode 8 的 iOS 10

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-20T18:51:06.477

@PressRay，我一直在玩弄东西并提出一些建议。我已将此移至答案，因为如果我们继续前进，他们会让我们聊天。但希望这会做到。首先，我认为您应该从界面生成器中制作标签栏，也许您输入了一些错误的代码。您可以从创建新项目的第一个屏幕开始，也可以从库中拖入一个。但它是一个标签栏控制器。然后，对于您的五个视图中的每一个，您都可以在屏幕上为其放置一个视图控制器。然后，您可以从标签栏控制器拖动到五个新视图控制器中的每一个，并选择关系标签栏控制器。这将为您设置每个 vc。

接下来，我建议您在进入自动布局和约束之前先关闭自动布局以了解故事板。这就是为什么我认为你的 png 没有出现。由于某些约束移动它们，这两条线看起来太靠近了。为此选择视图控制器，确保它只是视图控制器，然后在右侧视图中，转到文件检查器，它看起来像一个页面图标。在 Interface Builder Document 下应该是 Use Autolayout 的复选框。单击此按钮，以便没有复选标记。现在您将在您关闭它的每个 vc 上使用 struts 和 spring。因此，继续将其全部关闭。

接下来，您需要放入一些 png 文件。将您的图像视图拖到任何您想要在任何 vc 中的任何位置。然后通过选择图像视图来连接 png 文件，然后再次在右侧视图中选择属性检查器，并在图像的下拉菜单下找到所需的 png。然后，您可以将图像视图移动到所需的 vc 中的任何位置。我认为这将解决您的问题。让我知道会发生什么，或者如果您有任何问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-04T05:05:59.703

For xcode beta (swift 4) converted the jpg to a png file, and created a folder called images.xcassets, added the png file to the folder. It worked going to try adding the jpeg to the folder and see if the image shows up. I just tried the jpeg and its not showing up. So my conclusion is to use png files and create a folder to hold the png files. Add the folder right after the Main.storyboard. Hope this helps.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-16T01:56:31.280

我只是更改了图像/文件名。有时，如果存在连续模式，xcode 会被难住。所以如果你有image_1，image_2....改为3_image。这解决了我的问题。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-08-14T08:02:11.123

如果您没有设置它们，请尝试检查项目中的图像属性 [![尚未设置](../Images/c2032eecea529371640ae8a8f0bef46f.png)](https://i.stack.imgur.com/hjOtD.png)

至

[![设置后](../Images/3fdc36c9afd56cc84ca4e3bbc09feac9.png)](https://i.stack.imgur.com/RGhsy.png)

# javascript - 在 Firefox 和 Chrome 中获取不同的偏移值

> ID：14401901
> 
> 赞同：1
> 
> 时间：2013-01-18T15:17:10.400
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 获取单个元素的 offset().top 值：

```
var offset = $('#some_id').offset().top; 
```

我在 webkit 中获得了相同的价值，但在 Firefox 中获得了不同的价值，后者更高。这正常吗？

# fonts - 设置 RTF 文档的字体样式

> ID：14401902
> 
> 赞同：4
> 
> 时间：2013-01-18T15:17:16.970
> 
> 标签：fonts, rtf

无法将此文档的文本字体样式设置为 Times New Roman。我希望所有的测试都是新罗马大小的 10 倍。我生成了一个字体表，其中包含我的文档的类型及其唯一类型。我希望所有的文本都是新罗马的，但是每当生成文档时，它都会说由于某种原因它已损坏，但是如果我没有将字体样式设置为默认的快递文本，并且它没有损坏。

```
{\fonttbl{\f1\froman\fprq0\fcharset0 Times New Roman;}
\par
Hi <#name#>
\par\par

Welcome to New York \par\par

\b New iPad\'ae App Is Available \b0 \par 
These are all the exciting things you cna do during your stay. \par \par
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T21:16:14.283

您在上面的示例中缺少很多格式。例如，从写字板或其他应用程序（Word 放入太多元数据）保存一个非常简单的 RTF 文件，然后查看您丢失的所有内容。

首先，[这是最新的 RTF 规范 1.9.1](https://www.microsoft.com/en-us/download/details.aspx?id=10725)。这将帮助您完成任何与 RTF 相关的工作。

其次，任何 RTF 文档都*必须*以`\rtf*N*`其中*N*是 RTF 版本（当前为 1）开头。您在示例中缺少此内容。这是它说文件已损坏的众多原因之一。

第三，你在字体表中定义了一些东西，然后不使用定义，`f1`. [这是 RTF 1.6 的旧规范，但请查看字体表是如何定义的。](http://msdn.microsoft.com/en-us/library/office/aa140301%28v=office.10%29.aspx#rtfspec_10)

还有很多其他的东西，但我认为您使用 RTF 就像使用 HTML 或带有标签的东西一样。我会阅读规范以了解 RTF 是如何工作的。这是一个非常小的 RTF 文档：

```
 {\rtf1\ansi\ansicpg1252\uc1\htmautsp\deff2
{\fonttbl{\f0\fcharset0 Times New Roman;}{\f2\fcharset0 Tahoma;}}
{\colortbl\red0\green0\blue0;\red255\green255\blue255;}
\loch\hich\dbch\pard\plain\ltrpar\itap0{\lang1033\fs16\f2\cf0 \cf0\ql
{\f2 {\ltrch This is a test of RTF.}\li0\ri0\sa0\sb0\fi0\ql\par}}} 
```

# c# - 如何使用打开的 XML SDK 在 Word 中创建水平线？

> ID：14401909
> 
> 赞同：3
> 
> 时间：2013-01-18T15:17:42.430
> 
> 标签：c#, ms-word, openxml

如何使用打开的 XML SDK 在 Word 中创建水平线？

使用 C# 4.5 打开 XML SDK 2.0

我正在寻找某种`paragraph.append(new HorizontalRule())`命令，但似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T22:16:16.210

正如所建议的，反射代码生成器提供了答案：

```
using DocumentFormat.OpenXml;
using DocumentFormat.OpenXml.Wordprocessing;

...

Paragraph newParagraph = new Paragraph();
ParagraphProperties paraProperties = new ParagraphProperties();
ParagraphBorders paraBorders = new ParagraphBorders();
BottomBorder bottom = new BottomBorder() { Val = BorderValues.Single, Color = "auto", Size = (UInt32Value)12U, Space = (UInt32Value)1U };
paraBorders.Append(bottom);
paraProperties.Append(paraBorders);
newParagraph.Append(paraProperties); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T16:40:18.073

“Microsoft Office 生产力工具”（Open XML SDK 2.0 的一部分）带有一个名为“Reflected Code”的功能，可以从实际生成该文档的现有文档中生成 .NET 代码。

我建议您在 Word 中格式化您需要的内容，使用此工具并查看 .NET 代码是如何完成的。

# java - 组件之间的巨大空间

> ID：14401920
> 
> 赞同：1
> 
> 时间：2013-01-18T15:18:07.827
> 
> 标签：java, swing, user-interface, jdialog, grid-layout

请看下面的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class GridLayoutTest2
{
    private final JDialog msgDisplayer;
    public GridLayoutTest2()
    {
        JLabel maleLabel = new JLabel("Male",JLabel.CENTER);
            maleLabel.setBorder(BorderFactory.createEmptyBorder());
            JLabel femaleLabel = new JLabel("Female",JLabel.CENTER);
            femaleLabel.setBorder(BorderFactory.createEmptyBorder());

            JLabel fmaleIcon = new JLabel();
            fmaleIcon.setIcon(new ImageIcon(getClass().getResource("/images/TESTING-Image.gif")));
            fmaleIcon.setBorder(BorderFactory.createEmptyBorder());

            JLabel maleIcon = new JLabel();
            maleIcon.setIcon(new ImageIcon(getClass().getResource("/images/TESTING-Image.gif")));
            maleIcon.setBorder(BorderFactory.createEmptyBorder());

            msgDisplayer = new JDialog();
            msgDisplayer.setLayout(new GridLayout(4,1,1,1));
            msgDisplayer.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

            msgDisplayer.setTitle("Body Fat Percentage Classification");

            msgDisplayer.add(femaleLabel);
            msgDisplayer.add(fmaleIcon);
            msgDisplayer.add(maleLabel);
            msgDisplayer.add(maleIcon);

            msgDisplayer.pack();
            msgDisplayer.setVisible(true);
            msgDisplayer.setLocationRelativeTo(null);
    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new GridLayoutTest2();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

此代码包含标签和附加的图像屏幕截图之间的巨大差距（空间）。我不想在标签和图像之间有这个空间。我怎样才能消除它？我知道我可以`GridBagLayout`去做，但是，有什么办法`GridLayout`吗？请帮忙！

![在此处输入图像描述](../Images/8e08fc68b3970010f93ce8d43135e6fd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:27:16.323

`GridLayout` allocates an equals amount of space for all components based on the largest component in the container. If you don't wish to use a complex layout manager such as `GridBagLayout`, you could use **[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)**, which uses the component's preferred sizes. A `BoxLayout` with `Y_AXIS` alignment would be suitable here.

[Example](http://www.java2s.com/Tutorial/Java/0240__Swing/YAxisAlignment.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T15:27:18.523

Thats not the gap space, its real size of `JLabel`'s (maleLabel, fmaleLabel). Size of image determines size of parent `JLabel` and in `GridLayout`, all components will take size of largest component. Gap between components is 1 as you defined when setting layout. So solution of your problem lays in finding suitable layout manager.

Reimeus gave you an example of `GridBagLayout` and `BoxLayout`, and I would like to recommend you [MiGLayout](http://www.miglayout.com/) which is quite easy to use.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:38:16.340

最`Layout`重要的是！！在这里，我用我的 GUI builder 做了一个简短的 EG，以显示空白的调整（或 的大小`JLabel`）：

![在此处输入图像描述](../Images/b24bdb4b1fc6b9f09c26f74679c611ca.png)

更多空白：

![在此处输入图像描述](../Images/e6a3db1b82c3f4a9c828c667fb1b1242.png)

代码：

```
public class udyfash extends javax.swing.JFrame {

public udyfash() {
    initComponents();
}

@SuppressWarnings("unchecked")

private void initComponents() {

    jLabel1 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/images.jpg"))); // NOI18N
    jLabel1.setText("yooo!!");
    jLabel1.setBorder(javax.swing.BorderFactory.createCompoundBorder(null, javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0))));

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addComponent(jLabel1, javax.swing.GroupLayout.DEFAULT_SIZE, 405, Short.MAX_VALUE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(44, 44, 44)
            .addComponent(jLabel1)
            .addContainerGap(39, Short.MAX_VALUE))
    );

    pack();
 }

 public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new udyfash().setVisible(true);
        }
    });
 }

 private javax.swing.JLabel jLabel1;
 } 
```

我们说 GridBag 很复杂，但是使用您可以的布局管理器。

# c# - 获取重叠灯具列表

> ID：14401922
> 
> 赞同：1
> 
> 时间：2013-01-18T15:18:11.463
> 
> 标签：c#, box2d, farseer

我有一个小型 2D 平台游戏，我想跟踪玩家是否接触地面（由一些身体和固定装置组成）。我认为可以检查与播放器夹具重叠的夹具列表，但是还有其他更有效的方法吗？如果没有，我怎样才能得到那个列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:27:18.863

could you use a hittest method? like [here](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.hittest.aspx) or by using AABBQuery/ HitTest (polygon/quad)

# algorithm - 具有顶点权重和边缘操作的多边形算法

> ID：14401923
> 
> 赞同：3
> 
> 时间：2013-01-18T15:18:15.637
> 
> 标签：algorithm, language-agnostic, polygon

我正在考虑以下问题的算法（在 carrercup 上找到）：

给定一个具有 N 个顶点和 N 个边的多边形。每个顶点上都有一个 int 数（可能是负数），每条边上都有一个 set(*,+) 中的操作。每次，我们从多边形中删除一条边 E，将由边（V1，V2）链接的两个顶点合并为一个新顶点，其值为：V1 op(E) V2。最后一种情况是两个顶点有两条边，结果是更大的一个。返回可以从给定多边形获得的最大结果值。

我认为我们可以使用贪婪的方法。即对于具有 k 边的多边形，找到一对 (p, q)，它在折叠时产生最大数量： (p ,q) = max ({i operation j : i, j - 相邻边)

然后只需对多边形调用递归： 1\. 让函数 CollapseMaxPair( P(k) ) - 获取具有 k 个边的多边形并返回具有 k-1 个边的“折叠”多边形 2\. 然后我们的递归：

```
 P = P(N);
 Releat until two edges left
     P =  CollapseMaxPair( P )
 maxvalue = max ( two remained values) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T07:55:51.233

我在这里回答了这个问题：[Google Interview : Find the maximum sum of a polygon](https://stackoverflow.com/questions/14412112/google-interview-find-the-maximum-sum-of-a-polygon/14412259)，有人向我指出这个问题是这个问题的副本。由于还没有人完全回答这个问题，所以我决定也在这里添加这个答案。

正如您正确识别（标记）的那样，这确实与矩阵乘法问题非常相似（我以什么顺序将矩阵相乘以便快速完成）。

这可以使用动态算法以多项式方式求解。

我将改为解决一个类似的、更经典（和相同）的问题，给定一个带有数字、加法和乘法的公式，用什么括号括起来它会给出最大值，例如 `6+1 * 2`变成`(6+1)*2`大于`6+(1*2)`.

让我们表示我们的输入`a1 to an`实数和 o(1),...o(n-1)`*`或`+`。我们的方法将如下工作，我们将观察表示 a1,...aj 的最大公式（在括号化之后）的子问题 F(i,j)。我们将创建一个此类子问题的表，并观察 F(1,n) 正是我们正在寻找的结果。

定义

```
F(i,j)

 - If i>j return 0 //no sub-formula of negative length
 - If i=j return ai // the maximal formula for one number is the number
 - If i<j return the maximal value for all m between i (including) and j (not included) of:
     F(i,m) (o(m)) F(m+1,j) //check all places for possible parenthasis insertion 
```

这经历了所有可能的选择。正确性的证明是通过对大小 n=ji 的归纳来完成的，而且非常简单。

**让我们通过运行时分析：**

如果我们不为较小的子问题动态保存值，则运行速度会很慢，但是我们可以使该算法在`O(n^3)`

我们创建了一个 *n 表 T，其中索引 i,j 处的单元格包含 F(i,j) 填充 F(i,i) 和 F(i,j) 对于 j 小于 i 在 O(1) 中完成每个单元格，因为我们可以直接计算这些值，所以我们沿对角线填充 F(i+1,i+1) （我们可以快速完成，因为我们已经知道递归公式中的所有先前值），我们重复这个 n n 对角线的时间（实际上是表中的所有对角线）并填充每个单元格需要 (O(n))，因为每个单元格有 O(n) 个单元格，我们在 O(n^2) 中填充每个对角线，这意味着我们填充了所有O(n^3) 中的表。填写表格后，我们显然知道 F(1,n) 是您问题的解决方案。

![我们填表的顺序](../Images/51348fa9d9f595cb578573b648afea04.png)

**现在回到你的问题**

如果您将多边形转换为`n`不同的公式（一个用于从每个顶点开始）并在其上运行公式值的算法，您将得到您想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T17:02:09.007

这是您的贪心算法失败的情况：

想象你的多边形是一个正方形，顶点为 A、B、C、D（左上、右上、右下、左下）。这给了我们边缘（A，B），（A，D），（B，C）和（C，D）。

让权重为 A=-1、B=-1、C=-1 和 D=1,000,000。

```
A (-1) ------ B (-1)  
|             |  
|             |  
|             |  
|             |  
D(1000000) ---C (-1) 
```

显然，最好的策略是折叠 (A,B)，然后折叠 (B,C)，这样你最终可能会得到 D。但是，您的算法将从 (A,D) 或 (D,C) 开始，这不是最优的。

结合最小和的贪心算法也有类似的弱点，所以我们需要考虑别的。

我开始看到我们希望如何尝试将所有正数放在一边，而将所有负数放在另一边。

如果我们将初始多边形完全视为一个状态，那么我们可以将所有可能的子状态想象为后续图，即边折叠。这将创建一个树状结构。BFS 或 DFS 最终会给我们一个最佳解决方案，但代价是在最坏的情况下遍历整个树，这可能没有你想要的效率。

您正在寻找的是一种贪婪的最佳优先方法来搜索这棵可证明是最优的树。也许您可以通过它创建类似 A* 的搜索，尽管我不确定您可以接受的启发式是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:38:26.800

我不认为贪心算法有效。设顶点为 A = 0, B = 1, C = 2，边为 AB = a - 5b, BC = b + c, CA = -20。贪心算法首先选择 BC 进行评估，值 3。然后选择 AB，值，-15。但是，有一个更好的顺序可以使用。首先评估 AB，值为 -5。然后评估 BC，值为 -3。虽然我不知道更好的算法。

# jquery-mobile - jQuery Mobile 页面未加载，图标永远旋转

> ID：14401924
> 
> 赞同：0
> 
> 时间：2013-01-18T15:18:17.000
> 
> 标签：jquery-mobile

所以基本上我一直在制作一个 jQuery Mobile 网站，我遇到了很多减速带，但是一旦我开始取得进展，就会发生这种情况！

罪魁祸首：[http ://www.ehustudent.co.uk/cis21318140/cis3104/cw2/find-your-nearest-jospice.html](http://www.ehustudent.co.uk/cis21318140/cis3104/cw2/find-your-nearest-jospice.html)

每当您单击链接时，它就会永远旋转。当我真正让地图工作时，它就开始发生了！地图是内联的，所以我把它放在自己的文件中，它仍在发生。

当我删除这行代码时它停止发生

```
<script src="map-kensington.js"></script> 
```

请帮助我:(。我需要将那行代码放在正文中，否则地图将无法加载，但是当我将其放入其中时，页面将无法加载！

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Find Your Nearest Jospice | Jospice Charity Shops</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=yes">

<!-- Start of jQuery External Links -->
<link rel="stylesheet" href="CSS/jospice2.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<!-- End of jQuery External Links -->

<link rel="stylesheet" href="CSS/custom.css" />
</head>

<body>
    <div data-role="page" id="homePage" data-theme="b">

        <div data-role="header" data-theme="b">
            <a href="index.html" data-role="button" data-icon="grid">Menu</a>
            <h1>Jospice</h1>
            <a href="contact-jospice.html" data-role="button" data-icon="info">Contact</a>
        </div>

        <div data-role="content" data-theme="b">
            <h2>Find Your Nearest...</h2>
            <p>Use the list below to find your Jospice Store of choice! Click on the button to be provided with information and directions to the store.</p>
            <a href="map-kensington.html" data-role="button">Furniture Store (Kensington)</a>
            <a href="map-allerton.html" data-role="button">Allerton</a>
            <a href="map-crosby.html" data-role="button">Crosby</a>
            <a href="map-kensington.html" data-role="button">Kensington</a>
            <a href="map-maghull.html" data-role="button">Maghull</a>
            <a href="map-netherton.html" data-role="button">Netherton</a>
            <a href="map-old-swan.html" data-role="button">Old Swan</a>
            <a href="map-southport.html" data-role="button">Southport</a>
            <a href="map-walton-vale.html" data-role="button">Walton Vale</a>
        </div>
</body>
</html> 
```

每一页都是一样的，还有7个小时完成网站，请帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:24:18.517

您的脚本因“未定义谷歌”错误而失败。

您需要将谷歌脚本引用添加到各个地图页面

像这样的东西：

```
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=SET_TO_TRUE_OR_FALSE">
</script> 
```

# c# - 处理具有许多子控件的用户控件的双击事件

> ID：14401931
> 
> 赞同：4
> 
> 时间：2013-01-18T15:18:46.863
> 
> 标签：c#, .net, winforms, events, user-controls

我有一个由许多子控件组成的用户控件，我需要处理用户控件的双击事件。所以我添加了事件处理程序，但它从未被触发。

我发现最快的解决方案是遍历子控件并订阅它们的双击事件。这真的是正确的方法吗？有没有更好的方法？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T15:37:45.007

以下仅适用于添加到用户控件的第一级子控件。它不适用于随后添加到这些子项的控件。例如，它适用于双击第一级`Panel`子控件，但不适用于`Label`添加到面板的子控件。

**测试.cs**

```
public partial class Test : UserControl
{
    public Test()
    {
        InitializeComponent();
    }

    protected override void OnControlAdded(ControlEventArgs e)
    {
        e.Control.DoubleClick += Control_DoubleClick;
        base.OnControlAdded(e);
    }

    void Control_DoubleClick(object sender, EventArgs e)
    {
        MessageBox.Show("User control clicked");
        OnDoubleClick(e);
    }
} 
```

**Form1.cs**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        var test = new Test();
        var label = new Label();
        label.Text = "test";
        test.Controls.Add(label);
        Controls.Add(test);
    }
} 
```

要解决另一种情况，当控件中包含控件时，可以使用以下代码。在向其添加任何其他子控件之前，请确保将用户控件添加到其父控件。完成此操作后，请遵循与控制层次结构相同的原则。

更简单地说，在控件层次结构中的任何位置添加控件之前，请确保它的父级已添加到控件集合中。

**测试.cs**

```
protected override void OnControlAdded(ControlEventArgs e)
{
    e.Control.DoubleClick += Control_DoubleClick;
    e.Control.ControlAdded += OnControlAdded; // add this line
    base.OnControlAdded(e);
}

// add this method
private void OnControlAdded(object sender, ControlEventArgs e)
{
    e.Control.DoubleClick += Control_DoubleClick;
    e.Control.ControlAdded += OnControlAdded;
} 
```

**Form1.cs**

```
private void Form1_Load(object sender, EventArgs e)
{
    var test = new Test();
    var panel1 = new Panel();
    panel1.BackColor = Color.AliceBlue;
    var panel2 = new Panel();
    panel2.BackColor = Color.AntiqueWhite;

    var label1 = new Label();
    label1.Text = "test 1";
    label1.BackColor = Color.Aquamarine;

    var label2 = new Label();
    label2.Text = "test 2";
    label2.BackColor = Color.Azure;

    // !!! order is important !!!
    // first add at least one child control to the test control

    // this works as expected
    //Controls.Add(test);
    //test.Controls.Add(panel1);
    //panel1.Controls.Add(panel2);
    //panel2.Left = 50;
    //panel1.Controls.Add(label1);
    //panel2.Controls.Add(label2);

    // this works as expected
    //test.Controls.Add(panel1);
    //Controls.Add(test);
    //panel1.Controls.Add(panel2);
    //panel2.Left = 50;
    //panel1.Controls.Add(label1);
    //panel2.Controls.Add(label2);

    // this doesn't work for panel2 and it's children
    Controls.Add(test);
    panel1.Controls.Add(panel2); // panel2 & children will not trigger the events

    // all controls added to control collections 
    // prior to this line will not trigger the event
    test.Controls.Add(panel1); 

    panel2.Left = 50;
    panel1.Controls.Add(label1);
    panel2.Controls.Add(label2); // will not trigger the event
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-19T22:08:44.120

要创建一个漂亮的 UI，使用（面板）父控件和许多子控件（内部）很有帮助。例如，一个面板（父级）带有许多标签（子级）。

当我想将 MouseEnter 事件（和任何其他事件）添加到特定父控件及其所有子控件时，我会使用此代码。

当您从面板和标签构建自己的按钮以及将其作为单个控件处理以处理 MouseOver 或其他东西时，它是完美的。

我还添加了一些将 MouseEnter 事件（和任何其他事件）添加到所有其他控件及其子控件的代码。希望它可以帮助某人...

```
// ------------ WINDOWS FORM'S CLASS ------------------------------------
public partial class WFEvent : Form
{

    // ------------ CONSTRUCTOR -----------------------------------------
    public WFEvent()
    {
        // Create Events for Control
        CreateEventsControl(pnlParent);

        // Create Events for Other Controls
        CreateEventsOtherControls(this);
    }

    // ------------ PRIVATE METHODS -------------------------------------
    // Create Events for Parent Control (e.g. a Panel) and Child Controls...
    private void CreateEventsControl(Control control)
    {
        // Create Events for Parent Control
        control.MouseEnter += (sender, e) => { CtlMouseEnter(control); };
        control.Click += (sender, e) => { CtlClick(control); };

        // Create Events for Child Controls...
        CreateEventsControlChildControls(control);
    }

    // Create Events for Parent Control's Child Controls...
    private void CreateEventsControlChildControls(Control control)
    {
        foreach (Control childControl in control.Controls)
        {
            // Create Events for Parent Panel's Child Control
            childControl.MouseEnter += (sender, e) => { CtlMouseEnter(control); };
            childControl.Click += (sender, e) => { CtlClick(control); };

            // Create Events for Child Control's Child Controls...
            CreateEventsControlChildControls(childControl);
        }
    }

    // Create Events for Other Control's Parent and Child Controls...
    private void CreateEventsOtherControls(Control control)
    {
        // Create Event for Other Control's Parent Control
        control.MouseEnter += (sender, e) => { CtlOtherMouseEnter(control); };
        //control.Click += (sender, e) => { CtlOtherClick(control); };

        // Create Event for Other Control's Child Control...
        CreateEventsOtherControlsChildControls(control);
    }

    // Create Event for Other Control's Child Controls...
    private void CreateEventsOtherControlsChildControls(Control control)
    {
        foreach (Control childControl in control.Controls)
        {
            if (childControl != pnlParent)
            {
                // Create Events for Other Control's Child Control
                childControl.MouseEnter += (sender, e) => { CtlOtherMouseEnter(control); };
            //childControl.Click += (sender, e) => { CtlOtherClick(control); };

                // Create Events for Other Control's Child Controls's Child Control...
                CreateEventsOtherControlsChildControls(childControl);
            }
        }
    }

    // MouseEnter for Controls
    private void CtlMouseEnter(Control control) 
    {
            Code...
    }

    // Click for Controls
    private void CtlClick(Control control) 
    {
            Code...
    }

    // MouseEnter for Other Controls
    private void CtlOtherMouseEnter(Control control) 
    {
            Code...
    }

    // Click for Other Controls
    //private void CtlOtherClick(Control control) 
    //{
    //        Code...
    //}
} 
```

# html - php邮件功能（两个按钮？）

> ID：14401935
> 
> 赞同：1
> 
> 时间：2013-01-18T15:18:53.533
> 
> 标签：html, forms

我的表单中有以下代码：

```
<form action="mail.php" method="POST"> 
```

有没有办法添加另一个提交按钮并让 php 知道如果使用 button1 它将数据发送到**mail.php**而使用按钮 2 它将数据发送到**mail2.php**？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:42:23.573

使用单选按钮的值并传递参数选项是正确的，例如：

```
<input type="radio" name="how" value="mail1" id="radio1"><label for="radio1">Name of parameter1</label>
<input type="radio" name="how" value="mail2" id="radio2"><label for="radio2">Name of parameter2</label> 
```

在服务器上：

```
$mail = $_POST['how']==mail1?'mail1':'mail2';
include($mail.'.php'); 
```

# qt - 如何通过对话框编辑 Qt 树节点？

> ID：14401939
> 
> 赞同：0
> 
> 时间：2013-01-18T15:19:05.400
> 
> 标签：qt, tree, model-view

我用Qt建了一棵树，双击树中的一个节点，弹出一个对话框，编辑它然后点击ok。树是否会自动显示更改，例如节点上更改的显示（角色）名称？还是我需要一些“重绘”方法来做到这一点？以及如何设置标志？因为我通过（F2）重命名以外的对话框编辑它，所以它不能编辑吗？非常感谢。

# mysql - 在具有共享 MySQL 的不同 VM 上安装 WSO2 greg 和 API 管理器

> ID：14401942
> 
> 赞同：0
> 
> 时间：2013-01-18T15:19:14.817
> 
> 标签：mysql, wso2, wso2-am

我正在使用此配置安装 greg 和 APi 管理器：

1 台用于 MySQL 的虚拟机

1 个用于 API 的 VM

1 个用于 BAM 的 VM

1 台用于 greg 的虚拟机

所有最新的当前版本

我在徘徊哪个是最好的配置。

我的想法是拥有将数据放置在 MySQL 中的所有工具，但我正在徘徊如何在各种配置文件中获取所有数据库 APi 应该指向他的 VM 上运行的注册表和 BAM 实例，但是查看注册表moaster-datasource.xml 我也发现了这个：

```
<datasource>
        <name>WSO2AM_DB</name>
        <description>The datasource used for API Manager database</description>
        <jndiConfig>
            <name>jdbc/WSO2AM_DB</name>
        </jndiConfig>
        <definition type="RDBMS">
            <configuration>
                <url>jdbc:h2:repository/database/WSO2AM_DB;DB_CLOSE_ON_EXIT=FALSE</url>
                <username>wso2carbon</username>
                <password>wso2carbon</password>
                <driverClassName>org.h2.Driver</driverClassName>
                <maxActive>50</maxActive>
                <maxWait>60000</maxWait>
                <testOnBorrow>true</testOnBorrow>
                <validationQuery>SELECT 1</validationQuery>
                <validationInterval>30000</validationInterval>
            </configuration>
        </definition>
    </datasource> 
```

这意味着注册表可以访问 API 管理器数据库……为什么？

我还必须添加 ESB 和 BPS，因此这个部署架构变得复杂。任何提示谢谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:37:31.123

WSO2 服务器使用默认提供的 H2 数据库。因此，如果您启动一个将在其自己的数据库实例上运行的新包。

为了在服务器之间共享注册表数据，您必须配置注册表挂载。[这](http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html)将有助于创建 JDBC 挂载。但是如果你有一个服务器实例，那么你可以从文章中省略集群部分。您也可以对其他服务器（BAM、API 管理器和 BPS）遵循相同的配置来配置 JDBC 挂载。这样您的所有数据都将存储在 MySql 中并在服务器之间共享。

如果您还需要在 JDBC 中存储用户信息并在服务器之间共享它，那么您必须将另一个数据源添加到 master-datasource.xml 并在 CARBON-HOME/repository/conf/user-mgt.xml 中使用它而不是默认数据源。

API 管理器有几个不同的数据源用于自己的目的。这并不意味着与注册表有任何关系。默认情况下，“WSO2CarbonDB”仅用于注册表和用户管理器目的，如每个数据源的描述中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T06:25:18.440

您可以使用挂载的数据库来解决您的问题。有关如何安装指南，请参阅 [1]。

[1]。[http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html](http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html)

谢谢你，达沙纳

# asp.net-mvc - .Net MVC 4 空白页

> ID：14401943
> 
> 赞同：0
> 
> 时间：2013-01-18T15:19:17.113
> 
> 标签：asp.net-mvc, iis, deployment, asp.net-mvc-4

我正在尝试从 .Net MVC 4 部署默认的空 Internet 应用程序模板，我的应用程序给出了同样的问题，所以我想从最简单的应用程序开始。

服务器是运行 .Net 4 的 2008 R2（应用程序已从 4.5 更改为 4）。我在那台机器上运行了其他站点，使用 .Net 4 和 MVC 3，但 MVC 4 应用程序只显示一个空白页面。我已确认已安装 HttpRedirection 和 HttpErrors（并且 MVC 3 应用程序运行良好）。

我在这里尝试了 Michel van Engelen 的解决方案，[我在 IIS 上部署 MVC 应用程序时得到一个空白页，](https://stackoverflow.com/questions/557730/i-am-getting-blank-page-while-deploying-mvc-application-on-iis)并确认它可以在我的机器上运行，但仍然是一个空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:39:39.003

我最终添加了 ELMAH 以尝试获取有关导致问题的异常的信息并且该站点开始工作，我不确定安装 ELMAH 的 web.config 的哪些更改导致该站点启动但对我的其他站点做了同样的事情原始应用程序，现在一切都很好。

# asp.net - 在 C# 中引用虚拟目录

> ID：14401945
> 
> 赞同：3
> 
> 时间：2013-01-18T15:19:25.573
> 
> 标签：asp.net, iis-7

我在 iis 中有一个名为 WebServer 的网络服务器设置，位于 ex 位置。C:\inetpub\WebServer\ 我创建了一个名为 virtualdir 的虚拟目录，其中物理路径位于我的网络服务器路径之外，例如虚拟目录指向 C:\inetput\virtualdir，一切正常，我可以访问文件去 www.myserver.com/virtualdir/test.txt，但是我想知道是否可以从我的 default.aspx 页面中引用虚拟目录作为我项目的一部分，就像这样

```
File.Exists("~/virtualdir/test.txt) 
```

还是我必须像这样引用虚拟目录的完整路径

```
File.Exists("C:/inetpub/virtualdir/test.txt") 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:29:20.657

您需要将包含“~”的基于 Web 的相对路径转换为 ​​file.exists 可以处理的路径。为了做到这一点，调用服务器映射路径将一个转换为另一个。请参阅 [http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath(v=vs.100).aspx)

# php - 计算在线时间并计算硬币

> ID：14401946
> 
> 赞同：0
> 
> 时间：2013-01-18T15:19:28.420
> 
> 标签：php, session

我尝试在用户登录时设置在线时间和硬币。

用户每人必须获得 1 个硬币。他们在线小时，我以秒为单位计算了在线时间，但我怎样才能正确计算硬币？

也许它必须每 35 秒更新一次硬币的数量？

```
<?php
session_start();

// Set the session if not set.
if ( !isset ( $_SESSION['startOnlineTime'])):
    $_SESSION['startOnlineTime'] = time();
endif;

$secondsOnline = (time() - $_SESSION['startOnlineTime']);
?> 
```

我试过类似的东西（没有运气）：'

```
<?php
    //if updates every 35 secs, then i calculate it like: 1 (per hour) / 35 (seconds) - 1/35? correct?
    $prHour = (Double) 0.028571428571429; 
    $SQL = "UPDATE users SET coins=coins+0.15 WHERE id = '@session_id()'";
    mysql_query($SQL) or die ( mysql_error() );
?> 
```

但是好像不太对。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:27:55.263

这可能是您问题的一种解决方案。创建一个单独的 php 文件调用`counter.php`，其内容如下。该文件将定期调用，在本例中，每小时调用一次。

**计数器.php**

```
<?php
if(session_id() == '') {
    sesstion_start();
    if (!isset($_SESSION['userid'])
         return;
         // I use 'userid' to save the user info, you can use others like ip, session_id, ...

    // verify that this file is called hourly
    $t = time();
    if (isset($_SESSION['lastcheck']) && $t - $_SESSION['lastcheck'] < 3550)
         return;
         // if this script is call in the previous 1 hour (3600s), ignore this call.

    $_SESSION['lastcheck'] = time();
    /* update your database here, increment 1 coin in this user record */

}
?> 
```

在您要向用户收费的**每个**`counter.php`页面中，使用 JavaScrip每小时调用一次。这个例子使用 jQuery 库来帮助：

```
 function charge() {
      var waitingTimes = 3600; //1 hours
      $.get("absolute/url/to/counter.php");
      setInterval(charge,waitingTimes)
 }
 $(document).ready(function(){
      charge();          
 }); 
```

# php - jQuery - 将数据发布到 iframe 并在 iframe 完成加载后重定向

> ID：14401951
> 
> 赞同：0
> 
> 时间：2013-01-18T15:19:36.290
> 
> 标签：php, jquery, ajax, post, iframe

这是我到目前为止所拥有的：

```
<?php

// Simulating some post values for test proposes
$_POST['test'] = 'testing values';

// POST contents (originally from a form in another page)
$query = http_build_query( $_POST );

?>
<!DOCTYPE HTML>
<html>
<head>
 <meta http-equiv="content-type" content="text/html" />
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script type="text/javascript">
  $(function() { $("#myiframe").load(function(){ window.location.replace('after.php'); }); });
 </script>
 <title>iFrame Load POST</title>
</head>
<body>
<iframe id="myiframe" src="load.php" width="0" height="0"></iframe>
</body>
</html> 
```

我需要的是能够将最初从另一个页面中的表单发送的 $_POST 数据发送到 iframe，并在 iframe 加载和处理发布数据后重定向页面。

**- - 编辑 - -**

事实上，它不需要 iframe，但我仍然需要对 load.php 进行 post 调用并等待它加载以进行重定向。在 load.php 完成加载请求之前，我无法重定向。这就是我使用 iframe 方法并且之前使用 GET 而不是 POST 的原因。

**--------------**

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:31:42.240

只需使用 jQuery AJAX 调用。它允许您附加一个处理程序，一旦请求成功完成，该处理程序就会执行。

```
$.ajax({
    url: 'load.php',
    data: {foo: 'bar'},
    type: 'post', // you can use get if you want to.
    success: function(response) {
        window.location.replace('after.php'); 
    }
}); 
```

# android - 没有为 TextView 显示阴影

> ID：14401956
> 
> 赞同：4
> 
> 时间：2013-01-18T15:19:52.623
> 
> 标签：android, textview, drop-shadow

我尝试了以下代码，但阴影不会出现，它只是显示为常规的白色文本。

```
TextView newsTitle = new TextView(mCtx);
newsTitle.setText(newsitems[position].getTitle());
newsTitle.setTextAppearance(mCtx, R.style.TextWithDropShadow);
RelativeLayout.LayoutParams newsTitleParams = 
        new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
newsTitleParams.addRule(RelativeLayout.ABOVE, linLayout.getId());
newsTitleParams.addRule(RelativeLayout.CENTER_HORIZONTAL);
newsTitle.setLayoutParams(newsTitleParams);
relLayout.addView(newsTitle); 
```

样式文件是

```
<style name="TextWithDropShadow">
    <item name="android:textColor">#ffffff</item>
    <item name="android:textStyle">bold</item>
    <item name="android:shadowColor">#000000</item>
    <item name="android:shadowDx">2</item>
    <item name="android:shadowDy">2</item>
    <item name="android:shadowRadius">2</item> 
```

相对布局和阴影是否存在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:31:09.397

尽管这并不能解决手头的问题，但可以采用不同的方法。

添加这一行

```
newsTitle.setShadowLayer(15, 0, 0, Color.BLACK); 
```

知道我在使用样式时做错了什么仍然会很有趣。

# php - 更改当前站点语言的最佳方法

> ID：14401962
> 
> 赞同：0
> 
> 时间：2013-01-18T15:20:14.290
> 
> 标签：php

我正在用两种语言用 php 创建一个网站。要更改页面的语言，我创建这样的链接：

```
<a href="/?lang=fa">FA</a>|<a href="/?lang=en">EN</a> 
```

这两个链接位于名为***header.php***的页面上，该页面包含在某些页面上。但在某些页面中是一些通过 URL 发送的参数。所以这两个链接不正确，它们应该如下：

```
<a href="aPage.php?id=1&lang=en">FA</a>|<a href="aPage.php?id=1&lang=en">EN</a> 
```

我的问题是我如何为所有页面创建动态链接，即使有一些参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:26:55.870

您需要将值存储在全局键中，最好是 php`$_SESSION`

在页面的开头，您可以检查以下内容：

```
session_start(); // if not started already
$possible_languages = array('en', 'fr');
$default_language   = 'fr';

$_SESSION['lang'] = ( isset($_GET['lang']) && in_array($_GET['lang']) ? $_GET['lang'] : $default_language ); 
```

从现在开始，您可以`$_SESSION['lang']`在需要的地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:27:19.880

你可以使用：

```
<?
$params = $_GET;
$params['lang'] = 'EN';
$qs = '?';
foreach($params as $k=>$v)
  $qs .= $k.'='.urlencode($v).'&';
$url = substr($_SERVER['PHP_SELF'].$qs, 0, -1);

echo $url; //EN

$params['lang'] = 'FR';
$qs = '?';
foreach($params as $k=>$v)
  $qs .= $k.'='.urlencode($v).'&';
$url = substr($_SERVER['PHP_SELF'].$qs, 0, -1);

echo $url; //FR
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:38:12.803

首先，将语言存储在会话或 cookie 中。

Second, build link creation mechanism for your website using the current language setting, do not `echo` the internal links directly. Important internal links should be created from functions so that they format can be change quickly later.

# java - Webdriver Backed Selenium，缺少确认对话框

> ID：14401964
> 
> 赞同：1
> 
> 时间：2013-01-18T15:20:20.270
> 
> 标签：java, selenium, junit, webdriver, confirmation

尝试在 JUnit 中使用 Webdriver Backed Selenium 测试确认弹出窗口时，我遇到了与一些奇怪行为相关的问题。

我的测试用例中有以下代码块：

```
assertTrue(isElementPresent(By.xpath("//input[@title='Delete Site']")));
selenium().click("//input[@title='Delete Site']");
//assertTrue(selenium().isConfirmationPresent());
//assertEquals(selenium().getConfirmation(), "Are you sure want to delete this item?");
selenium().waitForPageToLoad("30000"); 
```

上面的行指的是以下元素：

```
<input onclick="return confirm('Are you sure want to delete this item?');" value="Delete Site" type="image" title="Delete Site" src="/workthru-web/resources/images/delete.png" class="image" alt="Delete Site"> 
```

但是，测试在注释行上失败。当我手动执行相同操作时，会按预期出现提示。运行 WebDriver 时是否可能禁用弹出窗口？我使用创建我的驱动程序`new FirefoxDriver()`，没有额外的参数存在。我需要额外的配置吗？还是我在这里错过了其他东西？

# javascript - 使用 pdf.js 打印 PDF

> ID：14401965
> 
> 赞同：6
> 
> 时间：2013-01-18T15:20:21.250
> 
> 标签：javascript, pdf, printing, pdf.js

我正在使用 pdf.js 在页面中嵌入单页 PDF，并且我希望能够仅打印 PDF，而不是整个 HTML 页面。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-03T21:25:10.683

我之前使用 pdf.js 将 pdf 文档加载到画布上。

画布仅包含一页。所以这对我来说是单页的：

```
 var canvas = document.getElementById('pdfPage');
  var win = window.open('', '', '');
  var html = "<img src='" + canvas.toDataURL() + "'>";
  win.document.write(html);
  win.document.close();
  win.focus();
  win.print();
  win.close(); 
```

我仍然需要找出多个页面需要什么。如果我这样做，我会编辑这个答案。

我不得不说这种方法不是最佳的，因为它不会打印“相机就绪”的 pdf 页面，或者换句话说，它的原始形式。它打印pdf页面的图像。区别在于不应存在的页边距和不应存在的页眉/页脚，因为它们不在原始文档中。因此，我将寻找一种方法来打印它，就像 pdf.js 查看器打印它一样——以原始形式，忠实于原始文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T10:22:48.853

我们可以将以下代码放在**viewer.js**文件的末尾，它将自动打印 pdf：

```
(function () {
    function printWhenReady() {
        try{
            if (PDFViewerApplication.initialized) {
                window.print();
            }
            else {
                window.setTimeout(printWhenReady, 3000);
            }
        }catch(ex){
            window.setTimeout(printWhenReady, 3000);
        }
    };

    printWhenReady();
})(); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-22T21:51:30.930

我终于解决了。

我不能在这里发布我的代码，但这是我所做的：

我将 PDF 渲染到 2 个画布上，一个用于缩略图，一个用于打印（隐藏）。然后我有一个打印按钮，它打开一个新窗口，其中包含一个`img`标签，其中包含使用`toImageURL()`. `print()`在新窗口上调用该函数，然后`close()`在打印后自动关闭它。

这导致了几乎全尺寸的 PDf 打印，尽管使用浏览器中通常的页码和日期戳。

# c++ - 将互斥锁放在 C/C++ 中 Windows 上的内存映射文件中

> ID：14401973
> 
> 赞同：3
> 
> 时间：2013-01-18T15:21:10.587
> 
> 标签：c++, windows, mutex, memory-mapped-files

Windows 是否提供可以放置在内存映射文件中并跨多个进程使用的任何类型的互斥锁？

理想情况下，它必须是完全独立的，这样它就可以在文件中独立存在，即使在重新启动时也是如此。此外，如果我只是在没有进程运行的情况下手动删除文件，则不会泄露任何资源。

如果可能，该解决方案还应提供随附的“条件”概念，该概念也应该是可以位于共享内存映射文件中的对象。

简而言之，我需要类似于具有 SHARED 属性的 PTHREADS 互斥锁。

据我了解，无法简单地使用 PTHREADS 互斥锁，因为 PTHREADS 的 Windows 端口不支持 SHARED 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:47:15.283

要共享同步对象，请在创建对象时为其命名并在每个进程中使用相同的名称。

以下同步对象可以通过这种方式在进程之间共享：

*   [互斥体](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)
*   [信号](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682438%28v=vs.85%29.aspx)
*   [事件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)

[关键部分](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683472%28v=vs.85%29.aspx)不能共享，但速度更快。

测试或等待这些对象是通过 wait 系列函数完成的，通常是[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:34:28.037

将文件用作自己的互斥锁：使用该`LockFileEx`功能并让每个人都同意在他们想要声明互斥锁时锁定文件的字节 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:48:08.833

那是不可能的。互斥对象本身存在于内核空间中，以保护它免受用户代码干扰其状态。您获得的句柄仅对获得它的进程有效。从技术上讲，您可以使用 DuplicateHandle() 并将返回的句柄放入 mmf 中，但前提是您拥有访问内存部分的其他进程的句柄。这是相当脆弱的。

这就是您可以在 CreateMutex() 函数中为互斥锁指定*名称的原因。*另一个进程通过在 OpenMutex 调用中使用相同的名称来访问它。

# ruby-on-rails - 自动测试失败，标题错误

> ID：14401975
> 
> 赞同：0
> 
> 时间：2013-01-18T15:21:22.507
> 
> 标签：ruby-on-rails

我正在关注 ruby​​ on rails 教程。我正在运行自动测试并出现无法修复的错误。我可能已经重新检查了我的工作 15 次，但一切仍然与视频中的单词一字不差。

这是错误。

```
4 examples, 1 failure

Failed examples:

rspec ./spec/controllers/pages_controller_spec.rb:12 # PagesController GET 'home' should have the right title 
```

这是 pages_controller_spec 文件[https://gist.github.com/4565204](https://gist.github.com/4565204)和 home_html 文件[https://gist.github.com/4565209](https://gist.github.com/4565209)

任何人都知道我该如何解决这个错误？因为“家”在这些文件中有正确的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:49:42.733

在第 14 行中，您应该使用 :text 而不是 :content

```
response.should have_selector('title', text: '...') 
```

# vb.net - Visual Basic 数据集未使用 mdb 文件更新

> ID：14401978
> 
> 赞同：0
> 
> 时间：2013-01-18T15:21:37.703
> 
> 标签：vb.net, vba, ms-access

我有一个在我的 VB 程序中使用的 .mdb (Access) 文件。该程序基本上只是从文件中查询出数据。我更喜欢通过访问来更新数据库，然后我的 vb 程序将在保存 .mdb 文件时自动更新。我有一个连接到 .mdb 文件并使用表单上的数据集的数据连接。由于某种原因，当我更新 .mdb 文件时，程序不会用新项目更新....即使我右键单击并刷新数据连接和数据集。有没有办法可以解决这个问题，这样当我不必担心删除连接并在 VB 中重新保存并创建可执行文件时。我希望我的最终结果总是在更新 .mdb 文件时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:44:06.017

添加连接和数据集时，有一部分会提示您它是本地文件，如果需要，您可以将副本保存到项目目录中。单击否将确保将使用本地文件，而不是项目文件夹中的副本。

# php - 斯堪的纳维亚字符和 file_get_contents()

> ID：14401980
> 
> 赞同：1
> 
> 时间：2013-01-18T15:21:56.940
> 
> 标签：php

我正在从 URL 加载内容；URL 的格式为 www.example.com/?keyword=something。我根据用户的关键字得到具体的内容，如下所示：

```
$url = 'www.example.com/?';
$url = $url."keyword=$something";

function getData ($url) {

    $data = file_get_contents($url);

    return $data;
} 
```

原始数据包含像 Ö 或 Å 这样的斯堪的纳维亚字符。加载后，这些字符不再可读。如何解决这个特殊字符问题？

更新：

我以这种方式更改了代码：

```
function getData ($url) {

   $data = urlencode(file_get_contents($url));
   $data = urldecode($data);

    return $data;
} 
```

也没有帮助。也 `$data = utf8_decode(urldecode($data));`不要`echo utf8_decode(urldecode(getData($keyword)));`帮助。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:48:39.787

`file_get_contents`不知道字符集。它返回提供的确切字节。这意味着，如果 url 返回 UTF-8，并且您将其显示为 iso-8859-1，那么事情就会看起来不对。很可能是这种情况（但也可能反过来）。转换为 ISO-8859-1，或更改您的应用程序以使用 UTF-8。前者可能是最简单的更改 - 通过管道传输内容`utf8_decode`，从 UTF-8 转换为 ISO-8859-1。

例如：

```
function getData ($url) {
    $data = file_get_contents($url);
    $data = utf8_decode($data);
    return $data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:42:59.527

您需要使用 将文本转换为正确的编码`mb_convert_encoding`。

```
$data = mb_convert_encoding($data, 'UTF-8', mb_detect_encoding($data)); 
```

如果您使用的是其他编码，请将其替换为`'UTF-8'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:24:08.033

使用`urlencode`（在通过 get 传递数据之前）和`urldecode`（解码先前编码的字符串）

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php) 和 [http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

PS：文件和目录不应包含任何变音符号或特殊字符！

# spring - Spring 3.1 ConfigurableWebApplicationContext 属性@Value 未解析

> ID：14401981
> 
> 赞同：1
> 
> 时间：2013-01-18T15:22:03.590
> 
> 标签：spring, properties

我需要在启动时添加一堆支持在数据库中的属性。为了测试整个事情是否有效，我从这个开始（下面的 ds.username 属性来自 catalina.properties。它只是为了验证我没有破坏任何东西）：

```
public class PropertiesInitializer implements ApplicationContextInitializer<ConfigurableWebApplicationContext> {
@Override
public void initialize(ConfigurableWebApplicationContext ctx) {
try {
    props.put("hello", "goodbye");
    MutablePropertySources propertySources = ctx.getEnvironment().getPropertySources();
    propertySources.addFirst(new MapPropertySource("dbProps", props));
}
catch(Exception e) {
        e.printStackTrace();
    }
} 
```

我有一个@Controller，我正在这样做：

```
@Autowired
Environment env;
@Value( "${hello}" )
public String hello;
@Value( "${ds.username}" )
public String un;
... 
```

所以，当我打印这些时，'hello' 和 'un' 是空的，但 env.getProperties 实际上返回正确的值。

为什么？

谢谢

杰拉尔多·布兰科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:42:04.197

`${...}`默认情况下不启用属性，您需要声明[`PropertySourcesPlaceholderConfigurer`](http://static.springsource.org/spring/docs/3.2.0.RELEASE/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html)为 bean 才能启用它们。

`Environment`开箱即用，因为它不需要特殊配置。

# javascript - 数数不停止

> ID：14401985
> 
> 赞同：0
> 
> 时间：2013-01-18T15:22:13.077
> 
> 标签：javascript

需要的是，计数器应该在按钮单击后启动，开始计数时 - 开始按钮必须处于非活动状态，计数完成后 - 按钮必须处于活动状态并具有某人功能。

```
var refDate = new Date("2013 01 18 16:41");
var prepend = "This is a message ";
var append = new Date(refDate).toLocaleString();
var refValue = "1,100.00";

function insertCommas(nAmt) {
var currAmt = nAmt.toFixed(2);
while (/(\d+)(\d{3})/.test(currAmt)) {
currAmt = currAmt.replace(/(\d+)(\d{3})/, "$1,$2");
}
return currAmt;
}

function dispCounter() {
var currDate = new Date();
var elapsedSeconds = Math.round((refDate - currDate) / 100);
var elapsedValue = elapsedSeconds / 100;
var nRef = refValue.replace(/\,/g, "");
var result = insertCommas(nRef - elapsedValue);
document.getElementById('upCount').innerHTML = prepend + " $" + result + " since " + append;
setTimeout("dispCounter()", 1500);
}

navigator.appName == "Microsoft Internet Explorer" ? attachEvent('onload', dispCounter, false) : addEventListener('load', dispCounter, false); 
```

# javascript - 如何从变量更新 JQuery 进度条值

> ID：14401988
> 
> 赞同：1
> 
> 时间：2013-01-18T15:22:16.510
> 
> 标签：javascript, jquery

我对 JQuery 进度条有疑问。

我需要使用存储在 Javascript 变量中的值来设置进度条的值。

```
 $(document).ready(function () 
{
    var text = $('.Gadget').find('input[name="Percentage"]').val();

 $(function() 
{
    $( ".ProgressBar" ).progressbar({
    value: 59
});

}); 
```

});

上面的代码工作正常，但是因为有值 59，所以值始终是常量。

我真正需要的是文本变量的值而不是 59。

注意：如果我输入值：文本，进度条会消失

谢谢你，安德鲁·博格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T15:25:33.930

您需要在单个 document.ready 处理程序中执行此操作。用于`parseInt()`使其成为数字：

```
$(document).ready(function () {
    var text = $('.Gadget').find('input[name="Percentage"]').val();

    $( ".ProgressBar" ).progressbar({
       value: parseInt(text)
    });

}); 
```

# sql - 在 C# 中为 Windows 8 Store 应用程序发送参数到 Windows azure 移动服务器脚本

> ID：14401989
> 
> 赞同：0
> 
> 时间：2013-01-18T15:22:18.767
> 
> 标签：sql, windows-8, windows-store-apps, azure-mobile-services

我修改了我的 Windows Azure 移动服务预览表（名为“项目”）上的“读取”操作，如下所示：

Javascript：

```
function read(query, user, request) 
{

var howRead;

if(howRead == "unique")
{
    var sqlUnique = "SELECT DISTINCT ? FROM Item WHERE qProjectCode = ?";
    mssql.query(sqlUnique)
    request.execute();
}
else if (howRead == "column")
{
    var sqlColumn = "SELECT ? FROM Item WHERE qProjectCode = ?";
    mssql.query(sqlColumn)
    request.execute();
}
else if (howRead == "all")
{
   var sqlAll = "SELECT * FROM Item WHERE qProjectCode = ?";
    mssql.query(sqlAll)
    request.execute();
}

} 
```

当我想要返回单列值的唯一列表、单列中的所有项目或所有列的唯一列表时，这很简单，同时将读取限制为具有给定项目代码的那些记录。

现在，这在 C# 中有效，但会扫描整个表（以及其他项目代码）并始终返回所有列。这本质上是低效的。

C＃

```
var client = new MobileServiceClient("[https path", "[key]");

var table = client.GetTable<Item>();

var query1 = table.Where(w => w.QProjectCode == qgv.projCode && w.QRecord == (int)lbRecord.Items[uStartRecordIndex]);

var query1Enum = await query1.ToEnumerableAsync();

foreach (var i in query1Enum)
     {
     // process data
     } 
```

如何更改 c# 代码以处理 Javascript 代码？随意批评整体方法，因为我不是一个伟大的程序员，总是可以使用建议！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T22:06:03.807

一些东西：

*   在您的服务器代码中，`mssql`调用没有做任何事情（有用）。如果你想得到他们的结果，你需要向它传递一个回调（调用是异步的）。
*   您的大多数场景都可以在客户端完成。唯一需要服务器代码的是带有`DISTINCT`修饰符的代码。
*   对于这种情况，您需要将自定义参数传递给服务器脚本。您可以使用对象中的`WithParameters`方法`MobileServiceTableQuery<T>`来定义要传递给服务的参数。

假设这个数据类：

```
public class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Other { get; set; }
    public string ProjectCode { get; set; }
} 
```

下面的代码仅可用于在客户端完成场景 2 和 3（服务器端不需要脚本）。另一个需要一些脚本，我稍后会介绍。

```
Task<IEnumerable<string>> ReadingByColumn(IMobileServiceTable<Item> table, string projectCode)
{
    return table
        .Where(i => i.ProjectCode == projectCode)
        .Select(i => i.Name)
        .ToEnumerableAsync();
}

Task<IEnumerable<Item>> ReadingAll(IMobileServiceTable<Item> table, string projectCode)
{
    return table.Where(i => i.ProjectCode == projectCode).ToEnumerableAsync();
}

Task<IEnumerable<string>> ReadingByColumnUnique(IMobileServiceTable<Item> table, string projectCode)
{
    var dict = new Dictionary<string, string>
    {
        { "howRead", "unique" },
        { "projectCode", projectCode },
        { "column", "Name" },
    };
    return table
        .Select(i => i.Name)
        .WithParameters(dict)
        .ToEnumerableAsync();
} 
```

现在，为了支持最后一种方法（它接受参数，我们需要在服务器脚本上执行此操作：

```
function read(query, user, request) 
{
    var howRead = request.parameters.howRead;
    if (howRead) {
        if (howRead === 'unique') {
            var column = request.parameters.column; // WARNING: CHECK FOR SQL INJECTION HERE!!! DO NOT USE THIS IN PRODUCTION!!!
            var sqlUnique = 'SELECT DISTINCT ' + column + ' FROM Item WHERE ProjectCode = ?';
            mssql.query(sqlUnique, [request.parameters.projectCode], {
                success: function(distinctColumns) {
                    var results = distinctColumns.map(function(item) {
                        var result = [];
                        result[column] = item; // mapping to the object shape
                        return result;
                    });

                    request.respond(statusCodes.OK, results);
                }
            });
        } else {
            request.respond(statusCodes.BAD_REQUEST, {error: 'Script does not support option ' + howRead});
        }
    } else {
        // no server-side action needed
        request.execute();
    }
} 
```

# git - 适用于多个操作系统的 Git 存储库

> ID：14401993
> 
> 赞同：0
> 
> 时间：2013-01-18T15:22:37.257
> 
> 标签：git

我正在编写一个程序，该程序将直接调用 Windows/Linux API 进行图形处理。所有的非图形代码都是一样的。我希望能够将非图形代码推送到两个分支，并仅提取一个操作系统的代码。组织存储库的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:41:42.773

您可以使用[git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)并为您的平台特定代码使用子模块。

# memory - iphone将视图绘制到UIImage中（内存警告）

> ID：14401998
> 
> 赞同：0
> 
> 时间：2013-01-18T15:22:56.930
> 
> 标签：memory, uiimageview

我想通过 UIImageView 绘制图像和混合，它工作正常。但是，当我在循环中运行此函数时，它会显示内存未释放。我不知道为什么会发生这种情况以及如何解决它。我尝试了两种方法 1.UIGraphicsGetImageFromCurrentImageContext
2.CGBitmapContextCreate 它们都会增加每次运行的内存使用量。大约运行 30 次后，它可能会显示内存警告。我花了很多时间，但我无法解决它。请帮忙，谢谢。

```
 -(int) affineImage2:(UIImage *)image initAffineTransform:(CGAffineTransform)initTransform AffineTransform:(CGAffineTransform)transform Caption:(NSString*)caption Center:(CGPoint)center Path:(NSString*)path FrameImage:(UIImage*) frameImage
{

int jpgbyte;
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

if ([NSThread isMainThread]) {
    NSLog(@"YES if ([NSThread isMainThread])");
}else{
     NSLog(@"NOT if ([NSThread isMainThread])");
}
@autoreleasepool
{

    UIImageView* view1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0,frameImage.size.width,frameImage.size.height)];
    view1.contentMode=UIViewContentModeTop;
UIImageView* imageView = [[UIImageView alloc] initWithImage:image];
    NSLog(@"[image release];");

UIImageView* frameView   = [[UIImageView alloc] initWithImage:frameImage];
    NSLog(@"[image release];");
frameView.alpha = 1;//0.5;  // Customize the opacity of the top image.

float angle=atan2(transform.b, transform.a);
float scale = sqrt(transform.a*transform.a + transform.c*transform.c);
float initScale = sqrt(initTransform.a*initTransform.a + initTransform.c*initTransform.c);
CGAffineTransform t = CGAffineTransformIdentity;

CGRect fullScreenRect = [[UIScreen mainScreen] bounds];
    float centery;
    if((int)fullScreenRect.size.height==568)
    {  NSLog(@"1");
        centery=PREVIEW_RECT_CEN_Y+44.0;
    }else{
        centery=PREVIEW_RECT_CEN_Y;
    }

float imageScale;
    NSLog(@"image=w %f h=%f",image.size.width,image.size.height);
if(image.size.width>image.size.height)
{   imageScale=FULL_RECT_WD/image.size.height;
}else{
     imageScale=FULL_RECT_WD/image.size.width;
}
t = CGAffineTransformConcat(t, CGAffineTransformMakeScale(imageScale*scale/initScale,imageScale*scale/initScale));//
t = CGAffineTransformConcat(t, CGAffineTransformMakeRotation(angle));

imageView.transform=t;
    imageView.center=CGPointMake( (center.x-PREVIEW_RECT_CEN_X)*640/320.0*FULL_RECT_WD/PREVIEW_RECT_WD+ FULL_RECT_CEN_X ,(center.y-centery)*960/480.0*FULL_RECT_WD/PREVIEW_RECT_WD+FULL_RECT_CEN_Y);
[view1 addSubview:imageView];
[imageView release];

 UILabel *editCaption=[[UILabel alloc] initWithFrame:CGRectMake(FULL_RECT_CEN_X-FULL_RECT_WD/2, FULL_RECT_CEN_Y+FULL_RECT_HT/2*0.9, FULL_RECT_WD, FULL_RECT_HT/2.4)];
NSString *title = [NSString stringWithFormat:@"UILabel Sample 1111"];

[editCaption setText:caption];
[editCaption setNumberOfLines:3];
[editCaption setFont:[UIFont fontWithName:@"STHeitiTC-Medium" size:CAPTION_FONT_SIZE*(FULL_RECT_WD/PREVIEW_RECT_WD)*2  ]];
[editCaption setTextColor:[UIColor blackColor]];
[editCaption setBackgroundColor:[UIColor clearColor]];
[frameView addSubview:editCaption];
[editCaption release];

[view1 addSubview:frameView];

#if 0

   // CGSize size = CGSizeMake(width, height);

    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(view1.frame.size, NO, 1);
    else
        UIGraphicsBeginImageContext(view1.frame.size);

[view1.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* blendedImage =
    UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

 #else
    size_t width = view1.bounds.size.width;
    size_t height = view1.bounds.size.height;

    unsigned char *imageBuffer = (unsigned char *)malloc(width*height*4);
    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef imageContext =
    CGBitmapContextCreate(imageBuffer, width, height, 8, width*4, colourSpace,
                          kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Little);

    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0,height);
    CGContextConcatCTM(imageContext, flipVertical);

    CGColorSpaceRelease(colourSpace);

    [view1.layer renderInContext:imageContext];

    CGImageRef outputImage = CGBitmapContextCreateImage(imageContext);
     UIImage* blendedImage = [UIImage imageWithCGImage:outputImage];
    CGImageRelease(outputImage);
    CGContextRelease(imageContext);
    frameView.layer.contents=nil;
    imageView.layer.contents=nil;
    view1.layer.contents=nil;

    free(imageBuffer);

#endif

    for (UIView *view2 in view1.subviews)
    {  [view2 removeFromSuperview];
        view2=nil;
    }

[frameView release];       frameView=nil;

     imageView=nil;
    view1.layer.contents=nil;        
    frameView.layer.contents=nil;
    imageView.layer.contents=nil;

[view1 release]; view1=nil;

// save to disk

 NSData* nsData1 = UIImageJPEGRepresentation(blendedImage,jpeg_quality);

  //  [blendedImage release];
   jpgbyte=nsData1.length;
    NSLog(@"jpgbyte=%d",jpgbyte);

if(![nsData1 writeToFile:path atomically:YES])
{
}

}
//[pool drain];

[pool release];
pool = nil;

return jpgbyte; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:10:44.683

使用仪器（泄漏）运行它，它会让您更好地了解哪个对象是泄漏内存的对象。查看代码很难确定问题出在哪里。

# c - 使用另一个指针 C 指向地址的指针

> ID：14401999
> 
> 赞同：1
> 
> 时间：2013-01-18T15:22:59.123
> 
> 标签：c

我有一个接收指向字符串的指针的函数。现在我想复制这个指针，所以我可以用一个指针在字符串上运行，并用另一个指针保存字符串的开头。我希望我的问题很清楚，我不想创建一个指向指针的指针（它指向第一个指针指向的位置并随之改变），我想要一个指向第一个指针指向的地址的指针.

我尝试了许多不同的方法，但都没有奏效，这是我最近的尝试，我不断收到“初始化从整数生成指针而不进行强制转换”

```
int move_chars (char *str, int start, int end, int dist){
    int strsize = end - start + 1;
    char *p =  *str; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T15:24:15.070

由于`p`is 是 type`char *`并且`str`也是 type `char *`，你只需要这样做：

```
char *p = str; 
```

`p`指向与`str`.

你的代码：

```
char *p = *str; 
```

尝试在指向的内存位置复制到`p`first 的值，并且由于期望另一个内存位置而不是 a ，因此会出现错误。`char``str``p``char`

您的错误说“初始化使指针从整数而不进行强制转换”。这告诉你发生了什么：编译器认为你手动指向`p`一个特定的内存位置，使用`char` `*str`返回的值作为一个整数。这在技术上是可行的，但是您需要手动将整数转换为指针，这样很明显您正在做您想做的事情，而且这不是您的情况下的错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T15:24:07.803

采用

```
char *p =  str; 
```

声明一个指向 char 的指针并用另一个 char 指针的值对其进行初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T15:43:14.597

```
char *p = str 
```

这将声明一个指向字符的指针并使**p指向****str**指向的内存位置