# StackOverflow 问答 14631000-14631999

# c# - 创建具有可变列数的gridview

> ID：14631001
> 
> 赞同：0
> 
> 时间：2013-01-31T16:52:40.330
> 
> 标签：c#, silverlight

我必须根据一段时间生成列数的网格视图，然后将大约 10 行数据绑定到网格

有时，我需要查看一年中的每一天 -> 365 列

或一个月中的每一天 -> 30,31 列

或每周每小时 -> 168 列

或者有时从 1 月 15 日到 3 月 23 日，我必须计算天数。

我的想法是创建尽可能多的对象类型来处理每种可能的情况，当被问到时我会调用正确的类型。

然而，这似乎很麻烦，因为创建一个具有 365 个属性的对象，然后是一个具有 168 个属性的对象，等等……似乎没有优化。

我应该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:46:11.943

生成列应该很容易。可以使用[ICustomTypeProvider](http://blogs.msdn.com/b/silverlight_sdk/archive/2011/04/26/binding-to-dynamic-properties-with-icustomtypeprovider-silverlight-5-beta.aspx)接口在运行时动态创建类。

本质上，您可以创建具有任何您想要的属性的动态类型。与使用 IL 生成类型不同，您还可以随时动态添加属性。

# c++ - const 对和 const 对之间的区别

> ID：14631005
> 
> 赞同：19
> 
> 时间：2013-01-31T16:52:58.410
> 
> 标签：c++, constants

`std::pair<const T, const U>`在 C++ 中，和之间的行为有什么区别`const std::pair<T, U>`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T17:21:49.850

核心区别在于它们是不同的不相关类型（它们之间有一些隐式转换）。

```
void f(std::pair<std::string,std::string> const &);
std::string longstring();
int main() {
   std::pair<const std::string,const std::string> pc
        = std::make_pair(longstring(),longstring());
   f(pc);
   const std::pair<std::string,std::string> cp
        = std::make_pair(longstring(),longstring());
   f(cp); 
} 
```

虽然存在允许`f(pc)`编译的隐式转换，但该行涉及一个*转换*，并且该转换涉及制作s的*副本*`longstring()`。另一方面，该调用`f(cp)`仅在类型匹配时将常量引用绑定到现有对，而不需要任何副本。

编译器让你编写类似代码的事实并不意味着编译代码是为了做同样的事情。对于具有隐式转换的类型尤其如此，例如`std::pair`

这是编写函子以对存储在地图中的元素进行操作时的常见缺陷，其中函子的参数不匹配将导致不必要的对象数据复制：

```
std::map<int,std::string> m = create_map();
std::for_each(m.begin(),m.end(),
              [](std::pair<int,std::string> const &r) { 
                    std::cout << r.second << " ";
              }); 
```

上面的 lambda 没有正确的参数类型（`std::pair<int,std::string`vs. `std::pair<const int,std::string>`），这会导致每次调用都复制索引和值（即，所有字符串都将被复制到 an `std::pair<int,std::string>`，然后将引用绑定到 lambda 的参数） . 在这种情况下，简单的建议是使用`std::map<int,std::string>::value_type const &`参数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:57:50.870

从我所做的测试来看，行为是相同的。

```
#include <utility>

int main() {
   std::pair<const int, const int> p = std::make_pair(2,3);
   p = std::make_pair(3, 4); // error
   p.first = 5; // also error

   const std::pair<int, int> p2 = std::make_pair(4,5);
   p2 = std::make_pair(4, 5); // error
   p2.first = 0; // error

   return 0;
} 
```

# python - python外循环从内循环继续

> ID：14631006
> 
> 赞同：2
> 
> 时间：2013-01-31T16:52:59.600
> 
> 标签：python, loops, for-loop

1我在一系列数字上循环寻找数字范围（例如<100）。

例如：列表 = [1, 2, 3, 125, 7, 8, 9, 200]。我想进入一个文件：1-3、7-9。我面临的问题是外循环会重复内循环中的项目，所以我得到的输出是：1-3、2-3、3、7-9、8-9、9。

我目前有效的策略：

```
counter = 1

for i in range(len(list)):  # outer loop
    if counter > 1: # prevents the outer loop from iterating the numbers iterated in inner loop
        counter -= 1
        continue
    elif counter <=1:
        while list[i] < 100:
            i +=1
            counter +=1
            if list[i] > 100:
                print list[i-counter], '-', list[i]
                break 
```

我想知道是否有一种更 Pythonic 的方式让外循环跳过已在内循环中迭代的项目，而不是使用额外的计数器（就像我上面所做的那样）。谢谢。

编辑：很少有回复关注连续数字。我的错误，数字不必是连续的。我只需要该范围内的第一个和最后一个数字，例如 list = [1,4,8, 12, 57, 200, 4,34, 300]。输出：1 - 57、4 - 34。列表和标准取决于用户。条件将始终是带有比较运算符“<”的数字。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:58:33.143

你不需要两个循环。一个就足够了：

```
def ranges(seq):
  it = iter(seq)
  start = end = next(it)
  for val in it:
    if val == end + 1:
      end = val
    else:
      if end - start > 1:
        yield start, end
      start = end = next(it)

for start, end in ranges([1, 2, 3, 125, 7, 8, 9, 200]):
  print('%d-%d' % (start, end)) 
```

逻辑与您的逻辑略有不同：它查找由连续数字组成的子序列（`1 2 3`在`7 8 9`您的示例中）。如果需要，可以很容易地更改逻辑以打破任意数量的序列`>= 100`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:18:48.460

另一种方法，基于 while 循环：

```
def print_ranges(given_list, limit):
    while given_list:
        start = end = given_list.pop(0)
        if start < limit:
            while given_list and (given_list[0] < limit):
                end = given_list.pop(0)
            if (end != start):
                print "%d-%d"%(start,end)  # or save it in another list 
```

一些测试：

```
>>> print_ranges([1,4,8, 200, 4,34, 72, 300], 100)
1-8
34-72

>>> print_ranges([1, 4, 8, 12, 57, 200, 4, 34, 300], 100)
1-57
4-34

>>> print_ranges([1, 4, 8, 12, 57, 200, 4, 34, 300], 250)
1-34 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:24:32.000

使用`zip()`：

`zip(lis,lis[1:])`返回类似：

```
 [(0, 1),
 (1, 2),
 (2, 3),
 (3, 5),
 (5, 6),...] 
```

现在您可以遍历此列表以检查差异是否为 1。

**代码：**

```
In [103]: def ranges(lis):
    ans=[]
    z=zip(lis,lis[1:])
    for x,y in z:
        if y-x==1:
            ans.extend([x,y])
        else:    
            if ans:
                yield "{0}-{1}".format(min(ans),max(ans))
                ans=[]
    if ans:        
          yield "{0}-{1}".format(min(ans),max(ans))
   .....:         

In [104]: lis=[0,1,2,3,5,6,7,8,10,11,2,3,4]

In [105]: list(ranges(lis))
Out[105]: ['0-3', '5-8', '10-11', '2-4'] 
```

# jqmobi - jqmobi 应用中的当前面板

> ID：14631009
> 
> 赞同：0
> 
> 时间：2013-01-31T16:53:13.280
> 
> 标签：jqmobi

我正在将一个移动应用程序从 jQueryMobile 移植到 jqMobi，并且正在寻找一种方法来确定当前查看的面板。在 jQuery 中，他们有

```
$.mobile.activePage 
```

jqMobi 有类似的东西，还是我需要自己跟踪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:10:31.140

您可以使用一个名为“activeDiv”的属性 - 它是原始 DOM 节点。

```
$.ui.activeDiv 
```

# c++ - 如何捕获一般异常并显示其派生的 what()

> ID：14631011
> 
> 赞同：2
> 
> 时间：2013-01-31T16:53:17.597
> 
> 标签：c++, exception, try-catch

问题发生在这样的代码中：

```
#include <cstdlib>
#include <iostream>
#include <stdexcept>

using namespace std;

int main(int argc, char** argv) {

try {
    throw  runtime_error("Message");
} catch (exception e) {
    cout << e.what();
}
return 0;
} 
```

我期待`Message`出现。但结果是`std::exception`。我认为`virtual functions`可以从超类引用中调用子类。如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T16:55:35.503

C++ 明确区分了引用和值副本。采用

```
catch (const std::exception& e) 
```

通过引用而不是值来捕获。

# c# - 如何列出没有映射驱动器的逻辑驱动器

> ID：14631013
> 
> 赞同：5
> 
> 时间：2013-01-31T16:53:26.347
> 
> 标签：c#

我想用逻辑驱动器列表填充组合框，但我想排除任何映射驱动器。下面的代码给了我一个没有任何过滤的所有逻辑驱动器的列表。

```
comboBox.Items.AddRange(Environment.GetLogicalDrives()); 
```

是否有可用的方法可以帮助您确定物理驱动器和映射驱动器之间的关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:58:20.757

您可以使用[DriveInfo](http://msdn.microsoft.com/en-us/library/abt1306t%28v=vs.80%29.aspx)类

```
 DriveInfo[] allDrives = DriveInfo.GetDrives();
    foreach (DriveInfo d in allDrives)
    {
        Console.WriteLine("Drive {0}", d.Name);
        Console.WriteLine("  File type: {0}", d.DriveType);
        if(d.DriveType != DriveType.Network)
        {
            comboBox.Items.Add(d.Name);
        }
    } 
```

`DriveType`当属性是时排除驱动器`Network`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:57:19.823

使用[DriveInfo.GetDrives](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)获取驱动器列表。然后，您可以按其[DriveType](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.drivetype.aspx)属性过滤列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T16:58:06.537

你可以 `DriveType`在`DriveInfo`类中使用属​​性

```
 DriveInfo[] dis = DriveInfo.GetDrives();
 foreach ( DriveInfo di in dis )
 {
     if ( di.DriveType == DriveType.Network )
     {
        //network drive
     }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:55:58.420

想到的第一件事是映射的驱动器将具有以开头的字符串`\\`

此处详细介绍了另一种更广泛但更可靠的方法：[如何以编程方式发现系统上映射的网络驱动器及其服务器名称？](https://stackoverflow.com/questions/1088752/how-to-programmatically-discover-mapped-network-drives-on-system-and-their-serve)

* * *

或者尝试调用`DriveInfo.GetDrives()`which 将为您提供具有更多元数据的对象，这些元数据将帮助您之后进行过滤。这是一个例子：

[http://www.daniweb.com/software-development/csharp/threads/159290/getting-mapped-drives-list](http://www.daniweb.com/software-development/csharp/threads/159290/getting-mapped-drives-list)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T20:08:42.787

这对我有用：

```
DriveInfo[] allDrives = DriveInfo.GetDrives();
foreach (DriveInfo d in allDrives)
{
    if (d.IsReady && (d.DriveType == DriveType.Fixed || d.DriveType == DriveType.Removable))
    {
        cboSrcDrive.Items.Add(d.Name);
        cboTgtDrive.Items.Add(d.Name);
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T19:39:14.770

我在这个主题上找到的最完整的信息（在 Internet 上进行了长时间搜索后）可在 Code Project 上找到：[Get a list of physical disks and the partitions in VB.NET the easy way](http://www.codeproject.com/Tips/399828/Get-a-list-of-physical-disks-and-the-partitions-on)

（这是一个 VB 项目。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T16:59:51.610

尝试使用[`System.IO.DriveInfo.GetDrives`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)：

```
comboBox.Items.AddRange(
       System.IO.DriveInfo.GetDrives()
                          .Where(di=>di.DriveType != DriveType.Network)
                          .Select(di=>di.Name)); 
```

# python - 在 C++ 中嵌入 python：分配 C++ 和 python 变量

> ID：14631018
> 
> 赞同：2
> 
> 时间：2013-01-31T16:53:38.930
> 
> 标签：python, embedding

我正在编写一个将 python 嵌入到 C++ 代码中的小程序（下面的那个）。

```
#include <Python.h>

int main()     
{

    int x;
    Py_Initialize();

    const char* pythonScript = "print 'Start'"
    PyRun_SimpleString(pythonScript);

    /*
    assign a python variable 'n' to 'x' i.e n=x
    */

    Py_Finalize();
    return 0; 

} 
```

我的要求是我将python变量'n'分配给C++变量'x'的值。有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:40:40.237

以下片段应该可以工作（未经测试）：

```
PyObject *main = PyImport_AddModule("__main__"); // borrowed
if (main == NULL)
    error();
PyObject *globals = PyModule_GetDict(main); // borrowed
PyObject *value = PyInt_FromLong(x);
if (value == NULL)
   error();
if (PyDict_SetItemString(globals, "n", value) < 0)
   error();
Py_DECREF(value); 
```

# html - IE 8 的随机渲染问题

> ID：14631020
> 
> 赞同：0
> 
> 时间：2013-01-31T16:53:43.730
> 
> 标签：html, css, jsp, internet-explorer-8

我在试图复制和修复的 jsp 中有一个遗留代码错误。他们使用带有 div 的框架，java 1.6。JBoss 4.3、jQuery 1.6.2 和 scriptlet（无 JSTL）。这是旧与新的混合。

有两列的主框架使用 CSS 进行布局是问题所在。左列是用 3 个 gif 创建的树，每行都有一个 span。有点像 Windows 资源管理器类型的树，但在加载时它只有一个级别。

布局是这样的：

主机架

div 两列

div 左列
表单 1
表单 2 具有 14 个隐藏表单输入和一个资源管理器类型树

div 右列

链接

CSS（我更改了一些名称并省略了右侧的列项）。

```
body, html {
    background: none repeat scroll 0 0 #FFFFFF;
    color: #000000;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    height: 100%;
    margin: 0;
    padding: 0;
    white-space: nowrap;
}
#outer {
    background: none repeat scroll 0 0 #FFFFFF;
    height: 100%;
    margin: 0;
    width: 100%;
}
#leftTree {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px none;
    cursor: pointer;
    float: left;
    margin-left: 20px;
    margin-top: 10px;
    width: 45%;
}
#rightColumnDiv {
    background: none repeat scroll 0 0 #FFFFFF;
    float: left;
    margin: 0;
    width: 50%;
}
.treeMenuSelected {
    background-color: #0033CC;
    color: #FFFFFF;
    float: left;
    font-size: 12px;
    margin: 0;
}
.treeMenuNormal {
    background-color: #FFFFFF;
    color: #0033CC;
    cursor: pointer;
    float: left;
    font-size: 12px;
    margin: 0;
}
.treeMenuDisabled {
    background-color: #FFFFFF;
    color: #0033CC;
    cursor: pointer;
    float: left;
    font-size: 12px;
    margin: 0;
}

.header {
    color: #000000;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-size: 14px;
    font-weight: bold;
}
h1 {
    color: #000000;
    display: inline;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-size: 14px;
    font-weight: bold;
    line-height: 130%;
}
h2 {
    color: #000000;
    display: inline;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-size: 12px;
    font-weight: bold;
}
h3 {
    color: #000000;
    display: inline;
    font-family: Verdana,Arial,Helvetica,sans-serif;
    font-size: 13px;
    font-weight: normal;
}
a:link {
    color: #3C5E9E;
    text-decoration: none;
}
a:visited {
    color: #3C5E9E;
    text-decoration: none;
}
a:hover {
    color: #3C5E9E;
    text-decoration: underline;
} 
```

scriptlet 用于从 bean 获取树以显示到页面：

```
<%=page.getTree().toString()%> 
```

逐行通过jsp我从bean中获取所有数据，然后它只首先显示树。然后调用一个 javascript 函数来填充右列信息。

**问题：**

在较旧的机器上（不确定硬件），左列随机显示树对角线，在屏幕上层叠，而不是垂直；但是，另一列正常显示。我已经花了两天时间，无法复制它。我也没有截图可以通过。它只发生在使用这棵树的页面上。

我正在使用 IE 工具以及带有 FF 的 firebug（即使它是 IE 问题）来尝试查明问题所在并复制它。

*   删除隐藏字段中的一些数据会导致树根本不显示。
*   制作输入文本将水平移动第一棵树，但其余显示正常。
*   我已经查看了 CSS 本身，没有看到任何可能导致这种情况的东西。
*   我认为这可能是页面加载的时间问题，但是所有数据都从后端返回到 bean，然后在完成后传递给页面。

主要问题是确定问题发生在哪里，而我无法做到这一点。我不知道它是否与IE错误，CSS或什么有关？关于如何解决此问题的任何想法？

**更新：**

我确实发现当问题发生时，页面加载正常，然后树重新加载，这就是问题出现的时候。似乎 CSS 渲染的时间可能是原因，因为这些列是使用 CSS 构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:05:01.863

这是一件很奇怪的事。我永远无法复制该错误，但由于它似乎是 CSS 渲染问题，我通过使用代码控制 CSS 进行了修复。

使用链接指向 blank.css 文件，然后使用 jQuery：

`$('html').hide();`

当页面完全加载时，指向常规的 css。添加了一个检查 IE 以使用其专有方法。

```
$(document).ready(function() {
    if (document.createStyleSheet) {
        document.createStyleSheet("/... <path>/blank.css");
    }else{
        $("head").append($("<link type='text/css' href='/... <path> /blank.css' rel='stylesheet' /> "));
    }

    $('html').show();
}); 
```

然后在一切准备就绪后使用 document ready 来显示正确的页面。

**后果：** 由于测试服务器上的网络问题，我能够实际查看错误，发生了大约 1/2 秒，然后我的修复确实有效！

但是，由于 jQuery 和 IE8 之间的另一个问题，document.ready() 没有按预期触发，这需要针对该问题进行另一个修复。这是有关 document.ready() 问题的[链接。](https://stackoverflow.com/questions/13185689/ie8-how-to-run-jquery-code-after-content-loads)

我能够通过特征检测代码和使用 load() 来解决这个问题，它一直等到所有图像、帧等都完全加载，而不是 document.ready 的交互状态：

```
$(window.load(function(){
...
}); 
```

这适用于 IE 和 Safari，但对于 FF 和 Chrome，我必须使用：

`$(document).ready()...`

我还为 IE8 提供了条件注释，由于不再需要它们而将其删除，并且我将隐藏/显示更改为使用 HTML 而不是正文，我也在上面的代码中进行了更改，这解决了我的其余问题曾经有。我把它拿出来是希望它能帮助别人，因为我花了很多时间在这上面。由于它是遗留代码，我不得不使用我所拥有的，而不是放入 jquery 树的更好的解决方案。

**最终的：**

**实际错误仅出现在 IE 8.0.6 中。有一个 CSS 错误，而不是忽略它，IE 将停止渲染 CSS，这会产生错误。**

# c# - 我想用任意索引创建一个 IEnumerable 继承稀疏数组

> ID：14631022
> 
> 赞同：2
> 
> 时间：2013-01-31T16:53:46.207
> 
> 标签：c#, arrays, ienumerable, ienumerator

我正在尝试创建：

*   具有任意索引的稀疏数组和
*   有稀疏数组继承 IEnumerable。

到目前为止，我有索引...... IEnumerable 部分我不知道该怎么做。

```
class SparseArray : IEnumerable
{
    private Dictionary<object[], object> Items = new Dictionary<object[], object>();
    private int Counter = -1;
    public object this[params object[] Key]
    {
        set { Items.Add(Key, value); }
        get { object B; bool Tau = Items.TryGetValue(Key, out B); return B; }
    }
    public IEnumerator GetEnumerable()
    {
        ///
    }
}
class Program
{
    static void Main(string[] args)
    {
        uint W = 5;
        Potato P = new Potato(W, "Spudz");
        Potato Q = new Potato(W+2, "Super Spudz");
        SparseArray Pile = new SparseArray();
        Pile[1,2,3,4,5,Q] = "String";
        Pile["String",P] = "Strung";
        Pile[1.2030,"pi"] = true;
        foreach ( object Val in Pile)
        {
            Console.WriteLine(Val);
        }
        Console.ReadKey();
    }
}
struct Potato
{
    private string _Name;
    private uint _Weight;
    public string Name
    {   set { _Name = value; }
        get { return _Name; }
    }
    public uint Weight
    {
        set { _Weight = value; }
        get { return _Weight; }
    }
    public Potato(uint weight, string name)
    {
        _Weight = weight;
        _Name = name;
    }
} 
```

如何让稀疏数组对象在 foreach 循环中遍历其字典？

**编辑更新**

由于大家的意见，我对代码进行了轻微的修改：

```
public class ObjectArrayComparer : IEqualityComparer<object[]>
{
    // Determines whether x and y are equal or not
    public bool Equals(object[] x, object[] y)
    {
        return object.ReferenceEquals(x, y) // Returns true if they are the same array instance
            || (x != null && y != null && x.SequenceEqual(y));  // Returns true if x and y are not null and have the same elements (order dependent)
    }

    // Function that allow to fastly determine if an element is in a set of not.        
    // This function must have the following property:
    //   x.Equals(y) implies GetHashCode(x) == GetHashCode(y)
    public int GetHashCode(object[] obj)
    {
        if (obj == null)
            return 0;

        // Unchecked sum of the Hash Codes of all elements in obj
        return unchecked(obj.Select(o => o != null ? o.GetHashCode() : 0).Aggregate(0, (a, b) => a + b));
    }
}
class SparseArray : IEnumerable
{
    private Dictionary<object[], object> Items = new Dictionary<object[], object>(new ObjectArrayComparer());
    private int Counter = -1;
    public object this[params object[] Key]
    {
        set { Items.Add(Key, value); }
        get { 
                object B;
                if (Items.TryGetValue(Key, out B) == true)
                {
                    return Items[Key];
                }
                else
                {
                    //In computer science, a sparse array is an array in which most of the elements have the same value (known as the default value—usually 0 or null).
                    //So If the key does not exist, return null.   
                    return null;
                }

            }
        //get { object B; bool Tau = Items.TryGetValue(Key, out B); return B; }
    }
    public IEnumerator GetEnumerator()
    {
        return Items.Values.GetEnumerator();
    }
}
class Program
{
    static void Main(string[] args)
    {
        uint W = 5;
        Potato P = new Potato(W, "Spudz");
        Potato Q = new Potato(W+2, "Super Spudz");
        SparseArray Pile = new SparseArray();
        Pile[1,2,3,4,5,Q] = "String";
        Pile["String",P] = "Strung";
        Pile[1.2030,"pi"] = true;
        foreach ( object Val in Pile)
        {
            Console.WriteLine(Val);
        }
        Console.WriteLine(Pile[1.2030, "pi"]);
        Console.WriteLine(Pile["String", P]);
        Console.WriteLine(Pile["String", P]);
        Console.WriteLine(Pile["String", Q]);
        Console.ReadKey();
    }
}
struct Potato
{
    private string _Name;
    private uint _Weight;
    public string Name
    {   set { _Name = value; }
        get { return _Name; }
    }
    public uint Weight
    {
        set { _Weight = value; }
        get { return _Weight; }
    }
    public Potato(uint weight, string name)
    {
        _Weight = weight;
        _Name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:55:39.603

最简单的方法是：

```
public IEnumerator GetEnumerator()
{
    return Items.GetEnumerator();
} 
```

或者，如果您只想要这些值：

```
public IEnumerator GetEnumerator()
{
    return Items.Values.GetEnumerator();
} 
```

不要忘记为您的字典使用自定义比较器：

```
 private Dictionary<object[], object> Items = new Dictionary<object[], object>(new ObjectArrayComparer()); 
```

和：

```
public class ObjectArrayComparer : IEqualityComparer<object[]>
{
    // Determines whether x and y are equal or not
    public bool Equals(object[] x, object[] y)
    {
        return object.ReferenceEquals(x, y) // Returns true if they are the same array instance
            || (x != null && y != null && x.SequenceEqual(y));  // Returns true if x and y are not null and have the same elements (order dependent)
    }

    // Function that allow to fastly determine if an element is in a set of not.        
    // This function must have the following property:
    //   x.Equals(y) implies GetHashCode(x) == GetHashCode(y)
    public int GetHashCode(object[] obj)
    {
        if (obj == null)
            return 0;

        // Unchecked sum of the Hash Codes of all elements in obj
        return unchecked(obj.Select(o => o != null ? o.GetHashCode() : 0).Aggregate(0, (a, b) => a + b));
    }
} 
```

为什么？

尝试这个：

```
var a = new int[] { 0 };
var b = new int[] { 0 };
Console.WriteLine(a == b);  // Returns false 
```

因为数组上的默认比较器是参考比较。作为`a`和`b`的两个实例`int[]`，它们具有不同的引用。

要更改此行为，您必须在字典中指定要如何比较`object[]`.

# asp.net-mvc-3 - NHibernate 3.0 单 SessionFactory

> ID：14631023
> 
> 赞同：3
> 
> 时间：2013-01-31T16:53:50.090
> 
> 标签：asp.net-mvc-3, nhibernate, fluent-nhibernate

现在，我的会话工厂存在于我的控制器中，并且被一遍又一遍地创建。如何创建一个在控制器之间共享的控制器？

```
 public class AccountsController : Controller
{
    private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
           .Database(MySQLConfiguration.Standard.ConnectionString(
           c => c.FromConnectionStringWithKey("DashboardModels")
       ))
   .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Accounts>())
   .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Notes>())
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Sales_Forecast>())
     .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ChangeLog>())
      .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Tasks>())

   .BuildSessionFactory();
    }
    ISessionFactory sessionFactory = CreateSessionFactory();
    ...
    ... 
```

**编辑**我已经像这样添加了 SessionController 类：

```
 public class SessionController : Controller
{
    public HttpSessionStateBase HttpSession
    {
        get { return base.Session; }
    }

    public new ISession Session { get; set; }
} 
```

并创建了一个新的 SessionFactory 实用程序类

```
 public class NHibernateActionFilter : ActionFilterAttribute
{
private static readonly ISessionFactory sessionFactory = BuildSessionFactory();

private static ISessionFactory BuildSessionFactory()
{
    return new Configuration()
        .Configure()
        .BuildSessionFactory();
}

public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var sessionController = filterContext.Controller as SessionController;

    if (sessionController == null)
        return;

    sessionController.Session = sessionFactory.OpenSession();
    sessionController.Session.BeginTransaction();
}

public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var sessionController = filterContext.Controller as SessionController;

    if (sessionController == null)
        return;

    using (var session = sessionController.Session)
    {
        if (session == null)
            return;

        if (!session.Transaction.IsActive)
            return;

        if (filterContext.Exception != null)
            session.Transaction.Rollback();
        else
            session.Transaction.Commit();
    }
 }
} 
```

问题/疑虑：使用 FluentNhibernate，我应该如何配置我的新 SessionFactory 类，以及如何在我的控制器中创建和使用事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:21:58.707

您需要将 SessionFactory 设为静态，以便所有控制器都使用相同的实例。Ayende 有一篇[很好的博客文章](http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions)，其中举例说明了如何做到这一点以及如何在事务中包装操作。

```
public class SessionController : Controller
{
    public HttpSessionStateBase HttpSession { get { return base.Session; } }
    public new ISession Session { get; set; }
}

//you could put this class in the same physical file as the SessionController.cs 
//since they are tightly coupled to each other
public class NHibernateActionFilter : ActionFilterAttribute
.... 
```

然后将您的 AccountController 更改为...

```
public class AccountsController : SessionController
{
    public ActionResult Index()
    {
         //Session is primed and ready for use
    }
} 
```

最后确保在 global.asax 中注册动作过滤器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:33:32.627

这就是我个人解决问题的方式（在 DotJoe 和本网站上的其他人的帮助下）

**全球.asax.cs**

```
 public static ISessionFactory SessionFactory =
             SessionProvider.BuildSessionFactory();

    protected void Application_Start()
    {       
        SessionFactory.OpenSession();
    } 
```

**控制器**

```
 public ActionResult ReadAccounts([DataSourceRequest] DataSourceRequest request)
    {
        DataSourceResult result;

        using(ISession session = TRX.CRM.Dashboard.Web.UI.MvcApplication.SessionFactory.OpenSession())
        {
            using (ITransaction tx = session.BeginTransaction())
            {
                var customers = session.Query<Accounts>().Where(a => a.Deleted == false).AsNoTracking();
                //from customer in session.Query<Accounts>().AsNoTracking()
                //                where !customer.Deleted
                //                select customer;
                result = customers.ToDataSourceResult(request);
                tx.Commit();
            }
        }
        return Json(result, JsonRequestBehavior.AllowGet);
    } 
```

然后我在一个名为 Utilities 的文件夹中创建了一个类：

**会话工厂.cs**

```
public class SessionProvider  
{
   public static ISessionFactory BuildSessionFactory()
   {
     return Fluently.Configure()
          .Database(MySQLConfiguration.Standard.ConnectionString(
          c => c.FromConnectionStringWithKey("DashboardModels")
      ))
     .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Accounts>())
     .BuildSessionFactory();

    }
} 
```

我希望这段代码可以帮助其他需要从 EF 转换为 NHibernate 的人。

这使我的内存管理在一个拥有 145 个用户的相当大的应用程序中保持在略高于 450,000kb 的范围内。（从使用 EF 的 600,000kb 减少）证明了 NHibernate 的可扩展性。

强烈推荐NHProf。它有很好的建议，并将为您的特定问题提供资源。

如果您要使用 Mono，我认为这是要走的路。

# mysql - 如何从字段中删除尾随空格

> ID：14631024
> 
> 赞同：0
> 
> 时间：2013-01-31T16:53:50.297
> 
> 标签：mysql

我遇到了一个问题，表中的某些字段有一个尾随空格。我能想到如何删除它们的唯一方法是用 CSV 导出它，然后用 Excel 来做，这有点麻烦。我怎样才能通过纯 sql 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:53:50.297

**解决方案**

```
 UPDATE table SET field=TRIM(TRAILING ' ' FROM field) WHERE field LIKE '% ' 
```

有关 TRIM 函数的更多信息，请查看[http://www.w3resource.com/mysql/string-functions/mysql-trim-function.php](http://www.w3resource.com/mysql/string-functions/mysql-trim-function.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:58:46.830

```
Select RTRIM(yourcolumn)
FROM yourtable; 
```

您可以使用[`RTRM()`](http://www.w3resource.com/mysql/string-functions/mysql-rtrim-function.php).

# php - 定义具有任意数量引用的函数的语法是什么？

> ID：14631030
> 
> 赞同：1
> 
> 时间：2013-01-31T16:53:57.100
> 
> 标签：php, function, syntax, mysqli

> **可能重复：**
> [具有无限数量参数的 PHP 函数](https://stackoverflow.com/questions/1577383/php-function-with-unlimited-number-of-parameters)

### 原始问题：

*（向下滚动得出结论。）*

我正在尝试围绕`mysqli_stmt::bind_param`and创建一个简单的包装器`mysqli_stmt::bind_result`。基本上，调用该函数，并返回有关收到的任何错误的一些信息，所以我不必一次又一次地重写这几行。

由于这两个 mysqli 函数都将其参数作为引用而不是副本，因此我需要让我的函数将其参数作为引用。`mysqli_stmt::execute`（如果我绑定到副本而不是引用，这也会迫使我每次调用时都重新绑定。）

所以，理想情况下，我希望能够定义一个采用任意数量引用的函数，就像 mysqli 函数本身一样：

```
public function foo(&$var1, &$var2, ...)
{
    ...
} 
```

如果做不到这一点，我将需要定义一个带有引用数组的函数。我知道引用的语法如上所示。是否有引用数组的语法，

```
public function foo($var[&$i])
{
    ...
} 
```

像这样？

### 未来尝试相同事物的人的结论/信息：

基本上，您不能定义一个接受任意数量参数的函数，这些参数是通过引用来的。从答案、评论和其他问题来看，[PHP 函数具有无限数量的参数](https://stackoverflow.com/questions/1577383/php-function-with-unlimited-number-of-parameters)，看起来几乎是不可能完成的任务。

一个廉价的 hack，在技术上可行，将定义一个像这样的函数：

```
function foo(&$arg1, &$arg2 = null, &$arg3 = null, ...)
{
    echo $arg1;
    if ($arg2 != null)
        echo br() . $arg2;

    ...

    return 0;
} 
```

基本上，定义一个函数，假设有一百个参数，通过引用传递，除了第一个默认为空。然后，您可以使用从 1 到 100 的任意数量的参数调用它，所有参数都通过引用传递。诀窍是你不想自己编写这个怪物。编写一个脚本来生成这个函数，并将其粘贴在它自己的*my-horribly-long-function.php*文件中。

# ruby-on-rails - 将 CSV 列映射到 Rails 中的模型

> ID：14631031
> 
> 赞同：1
> 
> 时间：2013-01-31T16:53:59.610
> 
> 标签：ruby-on-rails

我已经看到了很多关于如何使用 FasterCSV、SmarterCSV 或默认 CSV 库导入 CSV 的示例。所有这些示例都假设 csv 采用某种格式。

我会有一个包含地址字段（街道、hsno、城市等）的固定模型，但我无法控制正在上传的数据。

我正在寻找一种在将数据加载到模型之前将 CSV 数据（按标题名称）映射到我的模型的方法。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:42:28.617

也许您可以使用模型属性创建一个组合框，并让用户选择列应匹配的属性。

查看“映射字段”部分的[MailChimp 导入](http://kb.mailchimp.com/article/how-do-i-create-and-import-my-list)以获取直观示例。

（对不起广告，但这是我记得的一个例子）

# fft - IFFT 与 WebAudio Analyzer

> ID：14631032
> 
> 赞同：1
> 
> 时间：2013-01-31T16:54:02.977
> 
> 标签：fft, inverse, web-audio-api, ifft

有没有办法使用 WebAudio Analyzer 节点执行 IFFT？我注意到有一个 getByteTimeDomainData 方法，但我将如何为其提供幅度和相位数组？我是否将包含交错的 mag 和相位值的 AudioBuffer 源连接到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:40:03.563

对 IFFT 使用 PeriodicWave 节点。[你可以在这里](http://www.w3.org/TR/webaudio/#PeriodicWave)找到更多信息

# sql-server - 如何解决与实体框架的排序规则冲突？

> ID：14631035
> 
> 赞同：5
> 
> 时间：2013-01-31T16:54:19.367
> 
> 标签：sql-server, linq, entity-framework, linq-to-entities, collation

我的 EF 模型从具有从链接服务器获取数据的视图的数据库中获取数据。链接服务器中数据库的排序规则已更改为 SQL_Latin1_General_CP1_CI_AS 而不是服务器。我假设这就是排序规则冲突的来源。每次我加入该视图时，我都会收到此错误：

> “无法解决等于操作中 \"SQL_Latin1_General_CP1_CI_AS\" 和 \"Modern_Spanish_CI_AS\" 之间的排序规则冲突。”

我发现使用 COLLATE 在 SQL 中很容易解决排序规则问题。我似乎找不到使用 LINQ 的方法。可以使用 LINQ 来处理这个问题，还是我应该以不同的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:20:29.130

我的理解是 EF 不支持这个功能。

您可以创建一个新视图来解决冲突并使用 EF 查询新视图。

# wpf - WPF DataGridColumn HeaderStyle 中的绑定

> ID：14631038
> 
> 赞同：0
> 
> 时间：2013-01-31T16:54:20.887
> 
> 标签：wpf, wpfdatagrid

我将以下样式应用于我的 DataGridColumns（通过它们的`HeaderStyle`属性）：

```
 <Style x:Key="MyHeaderStyle" TargetType="DataGridColumnHeader">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <TextBlock Text="???" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

相同的样式应用于每一列，但我需要一些方法来改变内容（例如 TextBlock 文本），具体取决于它是哪一列。我相信 DataGridColumnHeader 没有自己的绑定，那么我该如何实现呢？列数会有所不同，因此我不能简单地为每个列创建单独的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:34:52.933

使用 TemplateBinding - 它允许您使用 ControlTemplate 获取有关使用此控件模板的实际控件的信息。我的示例会将文本块绑定到以正常方式为 DataGridColumHeader 声明的内容。

```
<Style x:Key="ColumnHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="DataGridColumnHeader">
                <TextBlock Text="{TemplateBinding Content}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# android - 如果在美国境外启动，则退出应用程序

> ID：14631041
> 
> 赞同：0
> 
> 时间：2013-01-31T16:54:28.960
> 
> 标签：android, geolocation

> **可能重复：**
> [用户当前在哪个国家/地区？](https://stackoverflow.com/questions/4044356/what-country-is-the-user-currently-in)
> [如何在不使用 GPS 的情况下以编程方式检测 android 设备当前位于哪个国家/地区？](https://stackoverflow.com/questions/10755534/how-to-programmatically-detect-in-which-country-the-android-device-is-located-cu)

是否可以根据用户设备所在的国家/地区阻止在用户设备上下载的应用程序启动？如何准确确定用户所在的国家/地区？

我的应用程序将在基于 WiFi 和运营商 (GSM/CDMA) 的设备上可用。

我知道我可以将应用程序限制在 Google Play 上的某些地区，但没有什么可以阻止用户在美国下载该应用程序，然后前往他们自己的国家并使用该应用程序。因此，我想在知道用户在美国境外后立即退出该应用程序。我可以想到这些确定位置的机制，但不确定这些是否是万无一失的：

1.  IMEI - 没用，我可以在美国购买设备，但可以在任何地方使用
2.  SIM - 我可以使用美国的 SIM 并进行漫游等
3.  WiFi - 不要以为我可以准确地告诉用户的地理
4.  日期/时间设置 - 我总是可以假装我在美国
5.  [TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html) - 我不知道这里的任何方法是否有助于准确确定位置

我有哪些选择？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:56:45.337

如果您的应用需要连接，我会说 IP 地理位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:01:07.110

如果用户可以访问设备，他/她总是可以伪造位置。

您必须决定要花费多少精力来阻止人们使用您的应用程序。在您的努力和在美国以外使用您的应用程序的难度之间需要权衡取舍。你永远不会排斥所有人；）

因此，我建议实施一些简单的机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:07:51.177

首先，获取 LocationManager。然后，调用 LocationManager.getLastKnown 然后，创建一个 GeoCoder 并调用 GeoCoder.getFromLocation 。这样做是一个单独的线程！这将为您提供地址对象的列表。调用 Address.getCountryName 就可以了。

这可能有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:10:43.523

您可以在应用程序启动时通过 GPS 获取位置。您可以检查国家/地区，如果不是美国，则用户无法打开应用程序。我认为你应该看看这个：http: [//developer.android.com/reference/android/location/Address.html](http://developer.android.com/reference/android/location/Address.html)

# nginx - 基于 nginx 中的动态 Content-Type 的过期标头

> ID：14631044
> 
> 赞同：3
> 
> 时间：2013-01-31T16:54:36.907
> 
> 标签：nginx, http-headers, content-type, http-caching, expires-header

我有一个 PHP 网站，其中一些内容是用户生成的。例如，用户可以上传调整大小并可以请求的照片。我想在我的 nginx 配置中根据 MIME 类型（响应头）指定一个`Expires`头（用于缓存） 。`Content-Type`

这是我当前的配置（我的主机自动添加`http{}`and `server{}`）：

```
charset utf-8;

types {
    text/css            css;
    text/javascript     js;
}

gzip on;
gzip_types text/html text/css text/javascript application/json image/svg+xml;

location / {
    if (!-e $request_filename) {
        rewrite  .  /index.php last;
        break;
    }

    set $expire 0;

    if ($upstream_http_content_type = image/jpeg) { set $expire 1; }
    if ($upstream_http_content_type = image/png) { set $expire 1; }
    if ($upstream_http_content_type = image/gif) { set $expire 1; }
    if ($upstream_http_content_type = image/svg+xml) { set $expire 1; }
    if ($upstream_http_content_type = text/css) { set $expire 1; }
    if ($upstream_http_content_type = text/javascript) { set $expire 1; }

    if ($expire = 1) {
        expires max;
    }
} 
```

这适用于静态文件（如`.png`文件——它们得到正确的`Expires`标题），但它对动态生成的内容`index.php`（根本没有`Expires`标题）没有影响。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:58:46.350

在您的`location`块中，当您将请求传递给 php Web 应用程序时无处可去，因此我可以假设您在其他地方执行此操作，例如`location`像这样的块：

```
location /index.php {
   # your code
} 
```

使用您的配置，当用户请求存在的静态文件时，`if`不会计算第一个指令并且一切顺利。当用户请求动态文件然后 nginx 输入您的第一个`if`块时，问题就开始了：

```
if (!-e $request_filename) {
    rewrite  .  /index.php last;
    break;
} 
```

这里发生了什么？您正在使用`last`带有指令的标志`rewrite`以及 nginx 的文档对此有何评论？

*last - 完成当前重写指令的处理并重新启动该过程（包括重写），并从所有可用位置搜索 URI 上的匹配项。*

根据此规范，当文件是动态的时，您进行了重写`index.php`并且执行留下了`if`块，甚至整个`location`块和`if`用于检查的后续块`content-type`都没有被检查。我想它会`location`为 url找到然后`/index.php`你没有设置`expires max`.

你明白这个对你的问题的解释吗？

对此的解决方案是移动/复制您的顺序`if`块，以检查`content-type`您的配置将执行传递给 php web 应用程序 (index.php) 的位置......或者如果它没有造成任何其他麻烦，`last`则从指令中删除标志。`rewrite`

好的，所以我承诺对您的 conf 文件进行一些修复：`location`用这两个更改您的块：

```
location /index.php {
   if ($upstream_http_content_type ~ "(image/jpeg)|(image/png)|(image/gif)|(image/svg+xml)|(text/css)|(text/javascript)") {
      expires max;
   }
   if ($sent_http_content_type ~ "(image/jpeg)|(image/png)|(image/gif)|(image/svg+xml)|(text/css)|(text/javascript)") {
      expires max;
   }
}

location / {
   if ($upstream_http_content_type ~ "(image/jpeg)|(image/png)|(image/gif)|(image/svg+xml)|(text/css)|(text/javascript)") {
      expires max;
   }
   if ($sent_http_content_type ~ "(image/jpeg)|(image/png)|(image/gif)|(image/svg+xml)|(text/css)|(text/javascript)") {
      expires max;
   }
   try_files $uri /index.php =404;
} 
```

第一个`location`块用于您的`index.php`动态响应，而第二个块用于静态文件。在第二个中，我们将标头添加`expires max`为上游标头和标准标头（只是为了确定）。我在这里`if`为您在配置中使用正则表达式模式匹配定义的所有类型使用一个块。最后，我们使用`try_files`指令，这意味着如果可以基于 url 获取静态文件，它将被获取，并且以其他方式尝试 url /index.php 或仅返回 http 404。第一个位置块仅适用于 url `/index.php`。我在您的配置指令中找不到`root`应该指向您应用程序的根文件夹的位置。尝试添加它（[root doc](http://wiki.nginx.org/HttpCoreModule#root)）。

# ruby - 将类方法添加到 ruby 中的现有模块

> ID：14631048
> 
> 赞同：2
> 
> 时间：2013-01-31T16:54:54.693
> 
> 标签：ruby, module

我有一个模块，可以在包含到类中时添加类方法。

我想通过编写将包含在第一个模块中的另一个模块来强制该模块扩展新方法。

下面的代码给出了一个我想做但不起作用的例子：如果能够覆盖第一个模块的“self.included”函数来用我的方法扩展基础，那就太好了。

到目前为止，我能够覆盖第一个模块的 self.included 函数，但调用 super 不起作用，所以我放弃了第一个模块的类方法：

```
module SomeModule

  def self.included(base)
    base.send(:extend, ClassMethods)
  end

  module ClassMethods

    # Some methods

  end

end

module MyNewModule

 def self.included(base)
    base.class_eval do
      def self.included(base)
        base.send(:extend, ClassMethods)
        super(base)
      end
    end
  end

  module ClassMethods

    def my_method
    end

  end

end

SomeModule.send(:include, MyNewModule)

class Pouet

  include SomeModule

  my_method # undefined local variable or method `my_method' for Pouet:Class (NameError)

end 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:01:21.093

在包含的块中使用 instance_eval。

在 instance_eval 块中，您可以访问包含它的对象，因此您应该能够在其中包含额外的模块。

编辑：

您必须将字符串传递给 instance_eval，因为该块将存储您当前的上下文。

对于我做过类似的例子：[https ://github.com/JoePym/UndergroundFootball/blob/master/app/models/player.rb#L14](https://github.com/JoePym/UndergroundFootball/blob/master/app/models/player.rb#L14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:26:20.043

终于设法让它自己工作。

请告诉我这是一个好还是坏的做法：

```
module SomeModule

  def self.included(base)
    base.send(:extend, ClassMethods)
  end

  module ClassMethods

    def my_original_method
    end

    # Some methods

  end

end

module MyNewModule

  def self.included(base)
    base.class_eval do

      class << self

        alias_method :old_included, :included

        def included(base)
          old_included(base)
          base.send(:extend, ClassMethods)
        end

      end

    end
  end

  module ClassMethods

    def my_method
    end

  end

end

SomeModule.send(:include, MyNewModule)

class Pouet

  include SomeModule

  my_original_method
  my_method

end 
```

# php - 使用 php 从 mysql 中仅以日期格式选择年份

> ID：14631049
> 
> 赞同：0
> 
> 时间：2013-01-31T16:54:55.057
> 
> 标签：php, mysql

嘿伙计们，我正在尝试从 mysql 中选择一个日期，格式是 date("F j, Y"); 但我只是选择日期的年份，我的字段是 varchar 类型，这是我的 php：

```
session_start();
$school_id = $_SESSION['school_id'];
$section_id = $_POST['section_id'];
$today  = date("F j, Y");

$select_grades_deped = "SELECT * 
                        FROM deped_grade_archive 
                        WHERE school_id='$school_id'
                        AND section_id='$section_id'
                        AND submission_date ='$today' ";

$query_check_grades= mysql_query($select_grades_deped) or die (mysql_error());

$check_count = mysql_num_rows($query_check_grades);

if($check_count == 0){
    $return['checked'] = "0";
}
else{
    $return['checked'] = "1";
}

echo json_encode($return); 
```

它返回 0，有没有办法只从 mysql 中选择一年？我在选择日期方面是菜鸟，所以请帮忙，我知道 mysql 已被弃用，并且在这个项目之后将切换到 mysqli，所以请帮助大家。tnx 提前 [https://stackoverflow.com/posts/19491573/edit](https://stackoverflow.com/posts/19491573/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:58:54.587

如果该字段的最后 4 位数字是您可以执行的年份：

```
RIGHT(FIELDNAME, 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:58:58.747

我将假设您有一个名为 my_date 的字段并且该字段是日期（或日期时间），那么您可以这样做：

```
SELECT year(my_date) AS my_year FROM my_table; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:02:24.130

试试这个（未经测试）：

```
WHERE STR_TO_DATE(submission_date ,'%Y') = 2013 
```

这应该适合您将日期存储为 varchar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:59:56.067

你可以使用`"SELECT RIGHT('name_of_date_column_that_is_varchar', 4) FROM table_name"`

这将为您提供正确的 4 个字段字符，从而为您提供所需的年份。

# c++ - 如何在数学软件中抽象出整数类型

> ID：14631053
> 
> 赞同：6
> 
> 时间：2013-01-31T16:55:19.013
> 
> 标签：c++, design-patterns, template-meta-programming

我正在设计一个数学软件，其算法适用于通用整数类型，例如机器整数或 GMP 整数。对于性能，通常希望使用机器整数，但如果出现溢出，则可能需要尝试切换到 GMP；理想情况下在运行时。到目前为止，整个程序都是作为整数类型的模板编写的。随着图书馆的发展，痛苦也在增加：

*   编译时间和内存消耗正在失控。
*   编译时的错误消息不太有用。
*   调试更痛苦。
*   整个代码在头文件中。

我可以想到以下解决方案。重构代码以依赖于通过编译时宏定义的固定类型。然后制作该库的多个副本，每个整数类型一个，并将它们链接到可执行文件中。缺点似乎是我需要库本身的接口。

简短的问题是：对于几乎整个程序都依赖于一种类型的情况，设计模式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:10:11.777

GNU多[精度算术](http://gmplib.org/)库

> 精心设计为尽可能快，无论是对于小操作数还是对于大操作数。

换句话说，如果您使用 GMP 库，那么它将为您解决这些困难，并为您节省大量精力！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:21:51.137

In my own mathematical software, I use GMP by default but I want to provide a fallback if it is not available. I also didn't enjoy the huge gmpxx header file which slows down the compilation on my slow machine.

So I essentially wrote a wrapper class over an undefined integer (with pimpl using `std::aligned_storage`). The back end can be chosen during compilation time.

This gets rid of the templates and gives enough flexibility for me.

# c# - 从 PDF iTextSharp 中删除字体

> ID：14631060
> 
> 赞同：1
> 
> 时间：2013-01-31T16:55:39.233
> 
> 标签：c#, pdf, itextsharp, itext, embedded-fonts

我在 Visual Studio 2010 中使用带有 C# 的 iTextSharp，我最近遇到了以下情况。我收到了几本分成许多 PDF 文件的电子书，这些文件的边框中包含厨房标记，我使用以下代码将它们删除：

```
 x = reader.GetPageSize(i).Width;
    y = reader.GetPageSize(i).Height;
    iTextSharp.text.Rectangle tRect = 
      new iTextSharp.text.Rectangle(x - 52, y - 52);
    Document document = new Document(tRect);
    PdfWriter writer = PdfWriter.GetInstance(document, 
      new FileStream(dest, FileMode.OpenOrCreate));

    document.Open();
    PdfContentByte content = writer.DirectContent;
    PdfImportedPage page = writer.GetImportedPage(reader, i);

    content.AddTemplate(page, -offset, -offset);

    document.NewPage();

    document.SetMargins(0, 0, 0, 0);
    document.Close();
    reader.Close(); 
```

当然，这包含在以 i 为序数的 For 循环中。在我遍历我正在处理的部分中的每个页面之后，我使用以下代码将它们合并在一起：

```
 private void mergePDF(string fName, string folderPath)
    {
        string[] files = Directory.GetFiles(folderPath);
        iTextSharp.text.Document tDoc = new iTextSharp.text.Document();
        iTextSharp.text.pdf.PdfCopy copy = 
          new iTextSharp.text.pdf.PdfCopy(tDoc, 
            new FileStream(fName, FileMode.Create));
        tDoc.Open();
        iTextSharp.text.pdf.PdfReader reader;
        int n = 0;
        for (int i = 0; i < files.Length; i++)
        {
            reader = new iTextSharp.text.pdf.PdfReader(files[i]);
            n = reader.NumberOfPages;
            for (int page = 0; page < n; )
            {
                copy.AddPage(copy.GetImportedPage(reader, ++page));
            }
            copy.FreeReader(reader);
            reader.Close();
        }
        tDoc.Close();
    } 
```

完成后，我发现我的文件大小翻了一番（特别是一个文件在处理前重达 20,180KB，处理后重达 41,322KB）！

我做了一些挖掘，似乎在使用 iTextSharp 拆分 PDF 时，程序将完整 PDF 的所有字体嵌入到每个拆分的 PDF 中，显然这可以占文件大小的 50-80%。

话虽如此，有谁知道使用 iTextSharp 从 PDF 中删除嵌入字体的方法。我的计划是仅将它们包含在第一个 PDF 文件中，然后当重新编译 PDF 时，文档中将只有一个字体副本，我的尺寸会更合适。

另外值得注意的是，这段代码与我的实际代码非常接近——逻辑是相同的，但出于大小和流量的考虑，添加了一些变量。

# c# - AutoMapper 映射可空值类型

> ID：14631066
> 
> 赞同：2
> 
> 时间：2013-01-31T16:55:47.877
> 
> 标签：c#, .net, automapper

AutoMapper 似乎没有映射可空值。如果可以为空值，它只会映射属性。

如何告诉 AutoMapper 始终将空值（任何类型）从源映射到目标？

**编辑：**

[https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/Mappers/MapperRegistry.cs](https://github.com/AutoMapper/AutoMapper/blob/master/src/AutoMapper/Mappers/MapperRegistry.cs)

AssignableMapper 在 NullableMapper 之前，如果源为空，则可防止映射可空类型。

我在开头添加了这段代码以插入 NullableMapper。

```
container.RegisterSingle(() =>
            {
                // we need to add a nullable mapper to ensure Nullable<value> gets mapped correctly
                var mappers = AutoMapper.Mappers.MapperRegistry.AllMappers().ToList();
                mappers.Insert(0, new AutoMapper.Mappers.NullableMapper());
                return mappers.AsEnumerable();
            }); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T11:22:09.337

我相信这不能那么容易配置。我试过这个：

```
var r = (IObjectMapper[])typeof(MappingEngine).GetField("_mappers", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(((MappingEngine)(AutoMapper.Mapper.Engine)));

Array.Resize(ref r, r.Length + 1);
Array.Copy(r, 0, r, 1, r.Length - 1);
r[0] = new NullableMapper();

typeof(MappingEngine).GetField("_mappers", BindingFlags.NonPublic | BindingFlags.Instance).SetValue(((MappingEngine)(AutoMapper.Mapper.Engine)), r); 
```

甚至这样：

```
MapperRegistry.AllMappers = () => new IObjectMapper[]
{
    new NullableMapper(),
    new TypeMapMapper(TypeMapObjectMapperRegistry.AllMappers()),
    new StringMapper(),
    new FlagsEnumMapper(),
    new AssignableMapper(),
    new EnumMapper(),
    new PrimitiveArrayMapper(),
    new ArrayMapper(),
    new EnumerableToDictionaryMapper(),
    new DictionaryMapper(),
    new ReadOnlyCollectionMapper(),
    new CollectionMapper(),
    new EnumerableMapper(),
    new NullableSourceMapper(),
    new ImplicitConversionOperatorMapper(),
    new ExplicitConversionOperatorMapper(),
}; 
```

这对我没有帮助。当它应该将 null 映射到属性时，它仍然会抛出错误的 null 类型映射异常。

# verilog - 如何创建可执行的 PrimeTime 脚本？

> ID：14631070
> 
> 赞同：0
> 
> 时间：2013-01-31T16:55:56.413
> 
> 标签：verilog, hdl

在为 Synopsys PrimeTime 创建脚本时，我发现的教程通过加载工具 (pt_shell) 然后获取脚本来执行脚本。

要运行脚本：

```
pt_shell
source power.scr 
```

示例脚本：

```
#power.scr
set power_enable_analysis TRUE
set target_library "/home/syedh/iit_stdcells/lib/tsmc018/lib/iit018_stdcells.db"
set link_library "/home/syedh/iit_stdcells/lib/tsmc018/lib/iit018_stdcells.db *"

read_db $target_library
read_verilog top_syn.v
current_design top
link
read_vcd dmp_top.vcd -strip_path tb_top/uut
create_power_waveforms –output vcd

report_power 
```

如何制作将启动 PrimeTime (pt_shell) 然后运行命令的可执行脚本？

例子来自[这里](https://computing.ece.vt.edu/wiki/Synopsys_Tutorial%3a_Power_Estimation)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:30:47.927

`pt_shell -h`显示`-file`可以满足您需要的选项：

```
pt_shell -file power.scr 
```

# iphone - 在运行应用程序的设备之间传输大量数据

> ID：14631071
> 
> 赞同：0
> 
> 时间：2013-01-31T16:55:56.250
> 
> 标签：iphone, ios

我的游戏需要我在玩的设备之间传输大量数据。我一直在使用游戏套件通过蓝牙传输，但它根本跟不上。我可以使用哪些其他方法在 iOS 设备之间（在我的游戏内）传输数据？

所以我想连接两个在同一个 wifi 网络上的设备。我正在考虑将一台设备作为主设备并运行 ssh 服务器，但我找不到任何 iOS ssh 服务器库。

第二个选项是一个很好的 'ol 套接字连接，但我也找不到任何东西（有用的）。

除了使用服务器或游戏套件之外，还有其他标准方法吗？任何实际的快速对等 2 对等方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T05:17:42.397

我刚刚开始通过 GameKit 实现传输大量数据。我强烈推荐分块，看看这个项目： [https](https://github.com/borealkiss/BKSessionController) ://github.com/borealkiss/BKSessionController 。我的项目是通过分块移动图像和数据（存储在核心数据中）。我意识到这是一个老问题，但我认为最终回馈社区会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:58:03.003

有一个点对点框架，它刚刚添加了名为 Alljoyn 的 ios 功能。[https://www.alljoyn.org/](https://www.alljoyn.org/)我没用过，但听说过好东西

# gps - 取消注释代码时的奇怪行为

> ID：14631073
> 
> 赞同：1
> 
> 时间：2013-01-31T16:55:59.200
> 
> 标签：gps, arduino, gprs

我正在尝试让我的 arduino 与 gps 和 gprs shield 一起工作。到现在为止还挺好。我的代码在我注释了注释行时有效，如果我取消注释它们就停止工作。

甚至更早的事件也失败了。例如，我必须输出`GPRS Registered`，`GPRS AT Ready`但它不会发生。

我的arduino有可能损坏吗？

这是代码。

请注意，我使用实际屏蔽测试了我发送到 gprs 屏蔽的命令，并且它可以工作。

```
#include <SoftwareSerial.h>
#include <TinyGPS.h>

#define BUFFSIZ 90

int GPRS_Registered;
int GPRS_AT_Ready;

char incoming_char = 0;
char buffidx;
char at_buffer[BUFFSIZ];

int firstLoop = 1;

TinyGPS gps;
SoftwareSerial cell(2,3);
SoftwareSerial uart_gps(0,1);

void sendSMS(char *msg){
  cell.println("AT+CMGF=1");
  cell.print("AT+CMGS=");
  cell.write(34);
  cell.print("A number here");
  cell.write(34);
  cell.println("");
  delay(500);
  cell.println(msg);
  cell.write(26);
  delay(15000);
}

void readATString(){
  char c;
  buffidx = 0;

  while(true){
    if(cell.available() > 0){
      c = cell.read();
      if(c == -1){
        at_buffer[buffidx] = '\0';
        return;
      }

      if(c == '\n'){
        continue;
      }

      if((buffidx == BUFFSIZ - 1) || (c == '\r')){
        at_buffer[buffidx] = '\0';
        return;
      }

      at_buffer[buffidx++] = c;
    }
  }
}

void processATString(){
  if(strstr(at_buffer, "+SIND: 8") != 0){
    GPRS_Registered = 0;
    Serial.println("GPRS Network Not Available");
  }

  if(strstr(at_buffer, "+SIND: 11") != 0){
    GPRS_Registered = 1;
    Serial.println("GPRS Registered");
  }

  if(strstr(at_buffer, "+SIND: 4") != 0){
    GPRS_AT_Ready = 1;
    Serial.println("GPRS AT Ready");
  }

}

void setup(){
  Serial.begin(115200);

  cell.begin(9600);
  uart_gps.begin(4800);

  cell.listen();
  Serial.println("Starting SM5100 Communication...");

  delay(5000);
}

void loop(){
  bool dataReady = false;
  unsigned long chars, prev_chars = 0;
  unsigned short sentences, failed;

  if(firstLoop){
    firstLoop = 0;
    while(GPRS_Registered == 0 || GPRS_AT_Ready == 0){
      readATString();
      processATString();
    }
    Serial.println("Everything is working");
  }

  uart_gps.listen();
  for (unsigned long start = millis(); millis() - start < 1000;){
    while (uart_gps.available()){
      char c = uart_gps.read();
      if (gps.encode(c))
        dataReady = true;
    }
  }

  if (dataReady)
  {
    float flat, flon;
    unsigned long age;
    gps.f_get_position(&flat, &flon, &age);
    Serial.print("flat: ");
    Serial.print(flat, 6);
    Serial.print("flon: ");
    Serial.println(flon, 6);

    cell.listen();

      // HERE IS THE PROBLEM
//    cell.println("AT+CGDCONT=1,\"IP\",\"internet\"");
//    delay(3000);
//    cell.println("AT+CGACT=1,1");
//    delay(3000);
//    cell.println("AT+SDATACONF=1,\"TCP\",\"my.server.com\",8080");
//    delay(3000);
//    cell.println("AT+SDATASTART=1,1");
//    cell.println("AT+SSTRSEND=1,\"testing arduino gprs\"");

    Serial.println("Sent data to server");

  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:29:06.607

我会将屏蔽 TX 和 RX 直接连接到 PC 的串行端口，然后手动发出命令并查看响应。因为答复将阐明您的问题和解决方案。这可以简单地通过在 Arduino 上跳几下来完成

1.  将RST跳到GND
2.  跳到 0 到 2 和 1 到 3。（我可能会向后跳到 0 到 3 和 1 到 2。）

RST 关闭 ATmega328，其他的将 TX/RX 跳转到 Cell 设备和基础 FTDI 芯片到 PC 的 USB 串行端口之间。

如果您使用 Arduino 的 IDE 串行监视器，请注意正确设置 LineFeed。

* * *

您正在尝试使用三个设备：

1.  软件串行单元（2,3）；
2.  SoftwareSerial uart_gps(0,1);
3.  串行打印

您实际上只使用了 2 对 Tx 和 Rx 引脚，而不是 3 对。请注意，串行类已经由 Arduino 核心定义为在引脚 0 和 1 上使用硬件 UART。但是您正在为 GPS 在 0,1 上定义一个 SoftwareSerial（又名 UART）。因此，使用相同引脚的两件事 - 问题。

SMS 工作初始为 uart_gps.begin 禁用 Serial.begin 使用的硬件 uart。所以你的 cell.prints 工作。但是随后您的 Serial.prints 与您的 uart_gps 冲突，事情就变糟了。

不确定您的确切症状，但需要先清除资源问题。看着我看到的 GPS 和 GPRS 防护罩，您可以在 0,1 和 2,3 之间选择移动。其中0,1是将我的原始建议用复位卡入arduino cpu，然后将三种状态使用引脚0和1，允许屏蔽选择到0,1以将无线电的UART路由到FTDI以进行直接电脑控制。而这可以用于 Arduino 的 CPU，但 FTDI 需要处于三态。

解决方案是屏蔽板上的一些跳线，将 0,1 以外的引脚用于未使用的引脚，并将相应的 SoftwareSerial 移动到这些引脚。在确保 0,1 引脚未在屏蔽之间连接的同时，可能会在堆叠时将它们弯曲。

# bash - 为什么这个脚本在采购或直接执行时会发出不同的结果？

> ID：14631074
> 
> 赞同：0
> 
> 时间：2013-01-31T16:56:01.203
> 
> 标签：bash, command-line-arguments

我有一个`my_mv.sh`如下所示的包装脚本（我正在使用 bash）：

```
#/bin/bash
function my_mv(){   
FILE="${@: -1}" # bash or ksh,zsh 
echo $FILE
if [ -f $FILE ];   
then   
    mv -i $@                                                                                                                                                                     
else   
    mv $@   
fi   
} 
```

当我将它作为脚本使用并像 一样直接运行时`./my_mv.sh file1 file2`，结果符合预期。但是，当我将**函数 my_mv**放入`~/.bashrc`并*获取*它时，将出现无限循环。那么这两种方法有什么区别呢？如何更改脚本以便正确获取它？

顺便说一句，当使用 zsh 时，这两种方法的结果相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:13:55.547

您实际上是`my_mv`在 .bashrc 中命名它，还是实际上命名它`mv`来覆盖默认值？

如果是这样，请使用`command mv`而不是仅`mv`在您的函数中调用系统版本而不是递归。

如果您只是将其作为 运行`./my_mv.sh file1 file2`，它不会做任何事情，因为该函数已定义但未调用。

# c - 通过动态分配内存来更改字符指针中的字符

> ID：14631078
> 
> 赞同：1
> 
> 时间：2013-01-31T16:56:33.103
> 
> 标签：c, string

在这里，我动态地为 p 分配内存，以便我可以更改字符串的特定字符，但是这段代码挂在中间

```
 int main()
 {
  char *p;
  p=malloc(10*sizeof(char));
  p="string";
  p[0]='d';
  printf("%s",p);
 } 
```

我尝试`p="string"`在第 5 行替换，`strcpy(p, "string")`并且代码运行良好。谁能告诉我这背后的原因。

```
 int main()
 {
   char *p;
   p=malloc(10*sizeof(char));
   strcpy(p, "string");
   p[0]='d';
   printf("%s",p);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:58:56.390

指针可以拥有资源 (malloc) 或指向已由另一个实体拥有的资源。当你这样做时`p="string";`，你正在创建一个`const char *`你分配字符指针的对象`p`，通过在前一行中泄漏 malloc'd 内存，在后者中，你只是替换 malloc'd 内存中的内容；前者是错误/问题，后者不是。需要注意的是，虽然泄漏资源/内存是不好的做法，但这不是挂起的原因。

您遇到问题的原因是您在 C 代码中所做的编辑试图编辑您是程序的只读内存空间（`const char *`变量在程序内存的这一[部分](http://en.wikipedia.org/wiki/Code_segment)中创建为不可变的字节数组）。[c++ 何时分配/解除分配字符串文字](https://stackoverflow.com/questions/1971183/when-does-c-allocate-deallocate-string-literals)对此进行了进一步解释。

至于将所需的字节传递给`malloc`，避免在表达式中使用 type 的好习惯：

```
const size_t count_required = 10;
char *p = malloc(sizeof(*p) * count_required);
// changing p's type to int* would also work without editing the malloc argument 
```

当 p 的类型更改为，例如`float`，`int`或任何其他类型时，表达式将继续正常工作而无需任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:57:48.557

线

```
 p="string"; 
```

更改`p`为指向只读字符串文字，从而泄漏进程中先前分配的内存。您不能写入字符串文字，因此`p[0]='d';`可能会导致段错误。

你的第二个版本，使用

```
strcpy(p, "string"); 
```

将只读字符串文字的内容复制到您之前分配的内存中。您仍在使用您在此处动态分配的缓冲区，因此可以安全地在以后的代码中更改其内容。

另一个非常小的点，`sizeof(char)`保证为 1，因此您可以简化`malloc`对

```
 p=malloc(10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:00:08.053

在 C 中，字符串不是值。不能使用赋值 ( `=`) 复制字符串，但可以分配指针（指针是“真实”值）。

要将字符串复制到新分配的内存中，您需要：

```
strcpy(p, "string"); 
```

您编写它的方式是`malloc()`用静态字符串常量的地址覆盖返回的指针。这会导致[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)；避免它们是使 C 成为一种有价值的编程语言的挑战之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:59:54.383

首先，您的第一个程序中存在内存泄漏。然后`malloc`将指针分配给另一个常量字符串。

其次，在第一个程序中，您正在修改一个 CONSTANT 字符串。但是第二个“正确”程序，您正在复制该常量字符串并将其复制到分配的内存中。哪个，你可以自由改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T17:05:33.377

`char amessage[] = "now is the time"; /* an array */`

`char *pmessage = "now is the time"; /* a pointer */`

"`amessage`是一个数组，大到足以容纳字符序列并`'\0'`对其进行初始化。数组中的各个字符可能会更改，但消息将始终引用相同的存储。另一方面，`pmessage`是一个指针，初始化为指向一个字符串常量；该指针随后可能会被修改为指向别处，但如果您尝试修改字符串内容，则结果未定义。”

礼貌K&R

# php - getOneToMany 返回存储库

> ID：14631085
> 
> 赞同：0
> 
> 时间：2013-01-31T16:56:47.950
> 
> 标签：php, symfony, doctrine, doctrine-orm, entity

执行下面的代码会出现以下错误：

> 警告：为 foreach() 提供的参数无效

```
$stock = $offerDetail->getStock();
foreach($stock as $s)
{
    ...
} 
```

返回的股票是类**offerDetailRepository**

这是我在 offerDetail 中定义的关系：

```
/**
* @ORM\OneToMany(targetEntity="OfferDetailStock", mappedBy="offerDetail", cascade={"remove"})
 */
protected $stock; 
```

在 OfferDetailStock 中

```
/**
* @ORM\ManyToOne(targetEntity="Powershop\ApplicationBundle\Entity\OfferDetail", inversedBy="stock")
*/
protected $offerDetail; 
```

我在 OfferDetail 中生成的一些函数：

```
public function getStock()
{
    return $this->stock;
}

public function setStock($stock)
{
    $this->stock = $stock;
}

public function addStock($stock)
{
    $this->stock[] = $stock;
} 
```

在 OfferDetailStock 中

```
public function getOfferDetail() {
    return $this->offerDetail;
}

public function setOfferDetail($offerDetail) {
    $this->offerDetail = $offerDetail;
} 
```

有人有线索吗？据我所知，这些关系已正确定义。我不得不提一下，最初与 Stock 类存在 ManyToMany 关系，后来我将 OfferDetailStock 作为介于两者之间的表。我确实清除了缓存并更新了方案。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:00:10.870

在您的控制台中输入：

```
php app/console doctrine:generate:entities PowershopApplicationBundle:OfferDetail 
```

它将生成缺少的构造函数：

> ```
> public function __construct()
> {
>     $this->stock = new \Doctrine\Common\Collections\ArrayCollection();
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:12:32.670

在您的 OfferDetail 实体构造函数中添加：

```
public function __construct()
{
    $this->stock = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

也许 offerdetails 没有股票，而 getStocks 返回 null。

# asp.net - 如何调用编译好的asp文件

> ID：14631088
> 
> 赞同：-2
> 
> 时间：2013-01-31T16:56:55.537
> 
> 标签：asp.net

我有一个要部署的网站并且我已经编译了它，但是请让我知道当页面有请求时如何调用编译后的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:01:35.313

使用 INCLUDE FILE 语句

```
<!--#include file="config.asp"--> 
```

# java - ListView 未在较小的屏幕上显示项目

> ID：14631089
> 
> 赞同：0
> 
> 时间：2013-01-31T16:56:58.560
> 
> 标签：java, android, xml, layout, screen-size

我有一个屏幕更大的模拟器，一切正常。`ListView`显示一切正常，所以它不在java代码中。我现在尝试在 3.2 屏幕上对其进行测试，`ListView`但没有显示任何内容。我尝试使用较小的屏幕（3.2）模拟器，它也没有显示任何内容，所以我想这与他们的布局有关。

我的 listview.xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="150dp" >

    </ListView>

</LinearLayout> 
```

行xml文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="match_parent"        
        android:gravity="center"
        android:layout_height="30dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:06:56.537

永远不要将 android:layout_width 和 android:layout_height 设置为 ListView 的 wrap_content。

# c# - 滑块最大值 = textbox1.text

> ID：14631090
> 
> 赞同：1
> 
> 时间：2013-01-31T16:57:03.190
> 
> 标签：c#, winforms, slider

我查遍了谷歌，没有人问过这个问题，或者没有任何答案。我想要做的是使`slider`我的文本的最大值`textbox`，我试图这样做：

**此代码在我的`textBox1_TextChanged`活动中**

```
textBox1.Text = slider1.Maximum.ToString(); 
```

和这个：

```
this.slider1.Maximum = textBox1.Text; 
```

还有其他一些，但它不起作用，它说：

```
Cannot Implicitly Convert 'String' to 'Int' 
```

如果有人知道如何执行此操作，请在此处发布或告诉我在哪里可以找到代码。

* * *

**第二个问题**

我有另一个问题，我有这个代码：

```
private void slider1_ValueChanged(object sender, EventArgs e)
    {
        textBox1.Text = slider1.Value.ToString();
    } 
```

它很好地显示了滑块的值，但你抓住的滑块留在最后，如果这太令人困惑，这是我的问题：

当我抓住滑块时，textBox1 中的文本是滑块的值。问题是您用来更改值的滑块部分停留在最后。有谁知道如何以实际价值而不是结尾显示抓取器部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:59:07.357

您应该使用[Int32.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)：

```
int sliderValue = 0;
Int32.TryParse(textBox1.Text, out sliderValue); 
```

如果尝试解析失败提供错误消息解释原因..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:58:55.093

您可以使用`Parse`或在此处找到`TryParse`

```
this.slider1.Maximum = int.Parse(textBox1.Text); 
```

但是为了更正并让您的输入始终是一个数字，请使用`TryParse`：

```
int maxValue;
int.TryParse(textBox1.Text, out maxValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:00:43.883

```
const int defaultMaximumSlider = 0; // Default value for slider maximum
int value;

if(int.TryParse(textBox1.Text, out value)) //Try to get our value
{
    this.slider1.Maximum = value;
}
else // and if it isn't successful assign our default
{
    this.slider1.Maximum = defaultMaximumSlider;
} 
```

# javascript - 动态添加类的jQuery if else语句

> ID：14631092
> 
> 赞同：0
> 
> 时间：2013-01-31T16:57:10.593
> 
> 标签：javascript, jquery, function

我试图编写一个函数，根据 div 的当前类显示 2 个可能的工具提示中的 1 个，但我似乎无法让它工作。

两个课程都不断显示...

我做了一个小提琴来解释我的问题，因为代码非常庞大......

[http://jsfiddle.net/QfrGc/](http://jsfiddle.net/QfrGc/)

```
$('.row').hover(function(){
    if(!$(this).hasClass('active')) {

            $(this).hover(function(){

                //Click to expand
                tip = $('.t1');
                tip.show(); 

            });

    } else {

        $(this).hover(function(){

                //Click to drag
                tip = $('.t2');
                tip.show(); 

            });

    };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:01:52.710

`hover`如果存在课程，您将附加第二个事件。这会发生一次 - 不是每次都像您期望的那样悬停。

只需在第一次悬停时进行检查并做出正确的行为

```
$('.row').hover(function(){
  var tipSelector = $(this).hasClass('active') ? '.t1' : '.t2';
  $(tipSelector).show();
}); 
```

现场示例：http: [//jsfiddle.net/QfrGc/1/](http://jsfiddle.net/QfrGc/1/)

您可能还打算在鼠标移出时隐藏工具提示。如果是这样，这可以扩展到

```
$('.row').hover(function(){
  var tipSelector = $(this).hasClass('active') ? '.t1' : '.t2';
  $(tipSelector).show();
},function(){
  var tipSelector = $(this).hasClass('active') ? '.t1' : '.t2';
  $(tipSelector).hide();
}); 
```

现场示例：http: [//jsfiddle.net/QfrGc/2/](http://jsfiddle.net/QfrGc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:01:45.090

您不需要附加新的悬停事件。我修改了你的代码：

```
$('.row').hover(function(){
    if(!$(this).hasClass('active')) {
        //Click to expand
        tip = $('.t1');
        tip.show(); 
    } else {
        //Click to drag
        tip = $('.t2');
        tip.show(); 
    };
}); 
```

# java - 实现 Remove 方法 Java

> ID：14631093
> 
> 赞同：1
> 
> 时间：2013-01-31T16:57:11.200
> 
> 标签：java, object, junit, arraylist

我正在处理一些类的实现，但我似乎无法让它的一部分工作。我`Junit`用来检查我的实现是否正确，我只剩下一个错误需要纠正。

这是我似乎无法正确处理的部分，如描述中所述，我应该实现一个`remove`方法，但据我所知，它实际上并没有删除`x`：

```
/**
 * Removes the specified element from this set if it is present. 
 * post: x is removed if it was present
 * @param x the element to remove - if present
 * @return true if the set contained the specified element
 */
public boolean remove(Object x) {
    return false;
} 
```

这是我当前的代码：

```
public boolean remove(Object x) {
    if(super.remove(x)){
        if( maxElement == x ){ 
            updateMax();
        }
        return true;
    }
    return false;
}

private void updateMax() {
    E newMax = set.get(0);
    for ( E x : set){
        if (x.compareTo(newMax) > 0) {
            newMax = x;
        }
    }
    maxElement = newMax;
} 
```

但它不会按预期工作。

我正在从另一个类实现这个类，这就是我使用 super 的原因。另一个具有相同删除部分的类使用相同的代码片段。

这是所有的源代码：

我正在尝试实现的 MaxSet 类：

```
package set;

import java.util.NoSuchElementException;

public class MaxSet<E extends Comparable<E>> extends ArraySet<E> {
private E maxElement;

public MaxSet() {
    super();
}

public E getMax() {
    if (isEmpty()) {
        throw new NoSuchElementException();
    }
    return maxElement;
}

public boolean add(E x) {
    if (isEmpty()) {
        maxElement = x;
    } else if (x.compareTo(maxElement) > 0) {
        maxElement = x;
    }
    return super.add(x);
}

public boolean remove(Object x) {
        if(set.contains(x)){
            set.remove(x);
            return remove(x); // true if the set contained the specified element
        }
        return super.remove(x);
    }

public boolean addAll(SimpleSet<? extends E> c) {
    return super.addAll(c);
}
} 
```

ArraySet 父类：

```
package set;
import java.util.ArrayList;
import java.util.Iterator;

public class ArraySet<E> implements SimpleSet<E> {
protected ArrayList<E> set;

public ArraySet() {
    set = new ArrayList<E>();
}

public boolean add(E x) {
    if(!set.contains(x)) {
        return set.add(x);
    }
    return false;

}

public boolean remove(Object x) {   
    if(set.contains(x)){ 
        return set.remove(x);
    }
    return false; //?
}

public boolean contains(Object x) { 
    if(set.contains(x)){
        return true;
    }
    return false;
}

public boolean isEmpty() {
    if(set.isEmpty()){
        return true;
    }
    return false;
}

public int size() {
    return set.size();
}

public Iterator<E> iterator() {
    return set.iterator();
}

public boolean addAll(SimpleSet<? extends E> s) {
    Iterator<? extends E> it = s.iterator();
    boolean changed = false;
    while (it.hasNext()) {
        changed = changed || add(it.next());
    }
    return changed;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:17:51.080

你其实很好。只是一个错字，您不会在删除时减少/更新您的“max”变量。这就是为什么你得到“错误的最大值”assertionError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:19:40.400

我会去做这样的事情：

```
public boolean remove(Object x) {
    if(super.remove(x)){
        if( maxElement == x ){ /* find new maxElement here */ }
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:01:19.737

我觉得你的逻辑有问题，试试这个

```
public boolean remove(Object x) {
    if(set.contains(x)){
        set.remove(x);
        return true; // true if the set contained the specified element
    }
    return super.remove(x);
} 
```

# excel - jxls #价值！VLOOKUP 错误

> ID：14631097
> 
> 赞同：0
> 
> 时间：2013-01-31T16:57:22.393
> 
> 标签：excel, vlookup, jxls

我`#VALUE! error`在 Excel 中获取包含此公式的单元格：

```
VLOOKUP(O14;Sheet2.A1:AL1000;HLOOKUP(K14;Sheet2.A2:AL3;2;0);1) 
```

我使用 Excel 工作表作为模板，并使用`jxls`. 当我在 Excel 中打开生成的文件时，我得到`#VALUE! error.` 如果我然后更新单元格而不进行任何更改（F2 + Enter），它会显示正确的值。

如何在打开文件时看到正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T15:48:17.677

In the template, you should use the formula like this:

```
$[VLOOKUP(O14;Sheet2.A1:AL1000;HLOOKUP(K14;Sheet2.A2:AL3;2;0);1)] 
```

Then jXLS will evaluate correctly.

Or you can use the `setForceFormulaRecalculation(true)` method from the POI Sheet object (HSSFSheet, XSSFSheet, and so on...). This will force all formulas to be recalculated when the workbook is opened.

# c++ - Qt：将撤消框架与 QGraphicsScene 正确集成

> ID：14631098
> 
> 赞同：6
> 
> 时间：2013-01-31T16:57:25.420
> 
> 标签：c++, qt, undo, qgraphicsscene

我正在编写一个基于`QGraphicsScene`带有可移动形状的画布的 Qt 应用程序，并且我正在尝试集成撤消重做功能。对于大多数功能，例如创建和删除形状，在其`QGraphicsScene`自身上实现相当简单，但我希望元素是可移动的并且移动是可撤销的。现在我在场景中使用橡皮筋拖动模式，在项目上使用`ItemIsSelectable`和`ItemIsMovable`标志。问题是似乎没有好地方来创建`QUndoCommand`表示形状运动的。如果我在`QGraphicsScene::itemChange`方法中执行此操作，则选择和移动两个或多个形状会导致不同对象的单独撤消命令交错，因此无法合并，因此撤消会导致意外行为。中没有事件`QGraphicsScene`当我可以看到它的项目四处移动时会调用它，所以我有点卡住了。

我看到的最坏情况是我禁用了`ItemIsMovable`自定义对象上的标志`QGraphicsItem`并完全在`QGraphicsScene`鼠标事件中处理移动，但是正确地重新实现该功能似乎相当复杂（我检查了 Qt 在内部是如何做到的，并且有很多代码用于处理复杂的情况，例如同时选择一个对象及其一些子对象）。这似乎是撤消堆栈最明显的用例（以至于撤消框架的示例程序`QGraphicsScene`与我的程序非常相似，只是没有多对象移动支持）所以没有内置方法似乎很奇怪在不重新实现核心功能的重要部分的情况下做到这一点。有没有人对这样做的程序有任何见解或示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:14:46.750

我认为我解决了这个问题。`preMovePoint`我在自定义形状中添加了一个属性，在`mousePressedEvent`中`QGraphicsScene`，我将`preMovePoint`每个选定形状的 设置为它们各自的当前位置，并在 中`mouseReleaseEvent`，创建了从每个形状`preMovePoint`的当前位置的复合移动命令`pos`。我仍然有兴趣知道是否有更好的方法。

# javascript - 为什么“3 [1, 2];” 在 JavaScript 中返回未定义？

> ID：14631105
> 
> 赞同：15
> 
> 时间：2013-01-31T16:57:43.877
> 
> 标签：javascript, json, jsonp

我正在查看 GMail 执行的一些 AJAX 调用，我注意到有时调用的返回值以数字开头。示例：（注意第一行后面没有分号）

```
3 
[1, 2]; 
```

如果我将它输入到 JavaScript 控制台，我会得到 undefined 返回。但是，如果第二个参数是数字或字符串，我会返回第二个参数。例子：

```
3
4 
```

返回 4。

我的猜测是他们这样做是为了阻止 jsonp 类型的攻击，但是，有谁知道正在进行什么基础评估？在第二种情况下，我相信在第一行之后“插入”一个分号，这将使返回 4 有意义。但是，我想不出第一个表达式返回未定义的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T17:03:57.373

这是因为 ASI（自动分号插入）的工作原理。第一条语句被解释为

```
3[1,2]; 
```

就是这样`undefined`。ASI 将第二个解释`3;4;`为`4`.

ASI 规则在某些情况下是违反直觉的，例如您可能想知道为什么数字和括号之间没有分号？嗯，这是有原因的。阅读这些资源以获取更多详细信息：

[JavaScript 的自动分号插入 (ASI) 的规则是什么？](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion)

[http://bclary.com/2004/11/07/#a-7.9.1](http://bclary.com/2004/11/07/#a-7.9.1)

谷歌可能会给你更多的结果。:) 这就是为什么我们有无休止*的无分号 JavaScript*战争。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T17:01:37.427

这是为了防止 Ajax JSON hack 更改 Array 构造函数。这是一个旧错误，与现代浏览器无关，但必须处理。

hack 覆盖了 Array 构造函数，因此当读取 JSON 时，代码将执行构造函数的操作。更多解释：http: [//haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)

顺便说一句，这就是 ASP.NET 总是发回此类对象的原因：`{d: []}`.

# ios - MPMoviePlayerController 未完成加载且不播放流

> ID：14631108
> 
> 赞同：0
> 
> 时间：2013-01-31T16:57:55.860
> 
> 标签：ios, mpmovieplayercontroller, m3u8

我正在尝试使用 MPMoviePlayerController 通过 HTTP Live Streaming（使用 Adob​​e Media Server）播放视频。

```
- (void) viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    [self playVideo];
}

- (void) playVideo{
    NSURL *url = [NSURL URLWithString:@"http://192.168.10.27/hls-vod/test.mp4.m3u8"];
    MPMoviePlayerController *moviePlayer =
    [[MPMoviePlayerController alloc] initWithContentURL:url];
    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];
    [moviePlayer play];
} 
```

播放器正常启动，但仍在加载且未开始播放视频。我在我的设备下的 Safari 上尝试了一些链接，它可以正常工作！

你对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:52:20.527

我找到了解决方案！我只需要在控制器的界面中声明 moviePlayer 并启动它的 playVideo 方法就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:18:44.947

1.  您是否在真实设备上尝试过？有时 MPMoviePlayerControllers 无法在模拟器中正常播放。

2.  您是否一次创建多个 MPMoviePlayerController？您只能实例化一个 MPMoviePlayerController，因此如果您需要播放第二个视频，则必须销毁或重用第一个视频。

3.  文件是播放列表，而`m3u8`不是视频文件，因此请查看文件并确保它指向 MPMoviePlayerController 支持的文件类型。

**另外：**请注意，您正在 viewDidAppear 方法中播放视频。请注意，任何时候用户在 MPMoviePlayerController 上退出全屏时都会调用它，因此您可能希望在此处包含更多逻辑来决定是否显示它。（除非你总是想永远展示它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T09:34:45.997

（固定的！！！！！）

我之前遇到过这个问题。

问题是由于静态播放器。尝试使用 MPMoviewPlayer 的属性

示例代码如下所示：

```
@interface YourViewController ()
@property (nonatomic, strong) MPMoviewPlayer *mp;
@end

@implementation YourViewController
- (void)playVideo {
    NSURL *movieURL = [NSURL URLWithString:@"http://the/url/playlist.m3u8"];
    self.mp = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];

    if (self.mp)
    {
        self.mp.view.frame = self.view.bounds;
        [self.view addSubview:self.mp.view];

        // save the movie player object
        [self.mp setFullscreen:YES];

        // Play the movie!
        [self.mp play];
    }
}

@end 
```

# python - 如何使用 APSW 更新字段

> ID：14631109
> 
> 赞同：0
> 
> 时间：2013-01-31T16:57:56.283
> 
> 标签：python, sqlite, python-2.7

我正在尝试更新数据库条目上的时间戳，当我使用它时，我似乎无法让 Update 语句工作

```
 import apsw
    from datetime import datetime

    def updateTimestamp(primary, timestamp):
        tableName = 'Images'

        connection = apsw.Connection('Images')
        cursor = connection.cursor()

        sql = "UPDATE %s SET timestamp = %s WHERE id = %s" %(tableName, timestamp, primary)
        print "ok so far"
        cursor.execute(sql)

        if connection:
            connection.close()

    currentTime = datetime.now()
    #remove spaces from timestamp
    currentTime = str(currentTime).replace(' ', '')
    updateTimestamp(1, currentTime) 
```

我正在使用 apsw 尝试更新字段，但它不起作用我收到错误消息

```
"apsw.SQLError: SQLError: near ":05": syntax error" 
```

我的桌子看起来像：

```
sql = 'CREATE TABLE IF NOT EXISTS ' + tableName + '(id INTEGER PRIMARY KEY 
    AUTOINCREMENT, Name TEXT, Metadata TEXT, Mods TEXT, Certification TEXT, 
    Product TEXT, Email TEXT, notes TEXT, timestamp TEXT, ftpLink TEXT)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:06:16.413

您正在构建这样的 SQL 命令：

```
UPDATE Images SET timestamp = 2013-01-3121:59:00.427408 WHERE id = 1 
```

正确的语法应该是这样的：

```
UPDATE Images SET timestamp = '2013-01-31 21:59:00.427408' WHERE id = 1 
```

但是，为避免字符串格式问题，您应该使用参数：

```
sql = "UPDATE %s SET timestamp = ? WHERE id = ?" % (tableName)
cursor.execute(sql, (timestamp, primary)) 
```

# r - 通过统计软件拟合 ARMA 模型

> ID：14631110
> 
> 赞同：-3
> 
> 时间：2013-01-31T16:57:59.947
> 
> 标签：r, matlab

在拟合数据以获取 ARMA 模型的系数估计值时，软件生成的 MA 项如何拟合数据。每次我尝试拟合时，我不会得到不同的值，因为 MA(1) 项是白噪声并且每次模拟都会重新生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:09:45.990

MA(1) 的系数是衡量系列的当前值受（包括）纯随机过程和纯随机过程的先前值影响程度的量度。正是这些系数是在假设数据生成为 MA(1) 的情况下从数据中估计出来的。数据不会随运行而变化，因此 MA 系数的估计值不会随运行而变化。

换句话说，假设**数据**来自具有未知系数 $\beta_0$ 和 $\beta_1$ 的 MA(1)，并且 ARMA 拟合软件旨在估计这些系数的总体值。

在模型与数据的拟合中没有任何伪随机发生。这是一个优化过程，其中通过初始值导出系数值并用于拟合模型。这样做后，分配了新的系数值并改善了拟合。这一直持续到不能通过改变系数的值来实现拟合的进一步改进。此时模型已经收敛。

也许您将 MA 过程的理论定义与 ARMA 与固定时间序列的拟合混淆了？

# macos - Oracle JDK 7 for Mac 安装不一致，如何干净地摆脱旧的Apple JDK？

> ID：14631117
> 
> 赞同：3
> 
> 时间：2013-01-31T16:58:20.130
> 
> 标签：macos, java

在 Apple 摆脱“Java Preferences”工具之后，是否有一种干净的方法来解决仍然指向旧 Apple JDK 的 Java 工具的符号链接留下的混乱？

我已经设置了我的 JAVA_HOME=$(/usr/libexec/java_home)

当我执行“which java”时，它看起来不错

```
gubatrons-macbook-pro-3:frostwire-desktop gubatron$ which java
/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home/bin/java 
```

但是当我尝试执行java时，它仍在使用/usr/bin/中的java

```
gubatrons-macbook-pro-3:frostwire-desktop gubatron$ java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

有没有一种干净的方法来摆脱旧的 Apple JDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:15:26.633

正确的答案是了解软链接和指针是如何工作的，而不仅仅是删除版本。乍一看似乎有点绕圈子，但它非常简单。[在这里](http://hints.macworld.com/article.php?story=20060121171126988)解释。这是一个更好的解释：[Mac OS X 10.6.7 Java Path Current JDK混淆](https://stackoverflow.com/questions/6141180/mac-os-x-10-6-7-java-path-current-jdk-confusing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T01:29:02.830

欢迎来到史蒂夫乔布斯的最后一笑：java in`/usr/bin`实际上是一个指向真正 java 的存根；**实际上只有一个版本的 JVM 在使用中**。

在此处查看链接的答案：[需要帮助了解 Mac 上的 Oracle 的 Java](https://stackoverflow.com/a/15133344/41688)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:12:30.690

到目前为止，这对我有用：

```
JAVA_HOME=`/usr/libexec/java_home -v 1.6` 
```

这会强制使用系统上安装的最新版本的 Java 1.6。

有关更多详细信息，请参见`java_home`手册页。

# quotes - SugaCRM - 如何将某些字段的计数器重置为零？(报价单号)

> ID：14631127
> 
> 赞同：0
> 
> 时间：2013-01-31T16:58:44.810
> 
> 标签：quotes, increment, sugarcrm

我有报价编号字段，因此在打印 PDF 编号时采用格式`55-JD-2012, 56-JD-2012,57-JD-2012`等。因此 55、56,57 是自动生成的报价编号。我有兴趣重置第一个值，即报价编号值，当然是来自报价模块。我希望它在今年将其重置，因此在打印 PDF 时，我将能够将其作为输出：`55- JD -2013, 56 -JD -2013`等等。目前，我得到的输出编号比我目前超过 500 的上一个报价编号大 1。

如何在哪个文件或何处重置此计数器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:57:27.130

SugarCRM 中的 Quote Number 字段是一个自动递增字段（递增不是发生在 SugarCRM 本身，而是发生在数据库中）。它还在具有`unique`约束的字段上具有索引。

因此，不能简单地重置该字段。报价单编号必须是唯一的，并且必须自动递增。

为了在 SugarCRM 中有一个可重置的报价编号字段，您需要创建一个具有一些特殊逻辑的新字段和/或创建一个 SugarCRM 包，以自定义默认报价编号字段或新但等效字段的行为，并使用串联函数中的报价编号字段更新其他任何内容以使用新字段。

这将是最好的方法，尽管它需要做最多的工作。如果您使用 SugarCRM On Demand，而不是将其托管在您自己的服务器上，这也是完成您需要的最佳方式。这是执行此操作的唯一安全升级方式。可能已经有一个包可以让你这样做，所以你应该看看[SugarExchange](http://www.sugarexchange.com/)。

或者，您需要更改 Quotes 数据库表 vardefs，删除`unique`对 index 的约束`quote_num`，然后重置数据库表的自动增量值以使其从您想要的任何数字开始计数。

要做到这一点，尽管不推荐（因为它**破坏**了与未来 SugarCRM 更新的兼容性，并且可能对依赖于报价编号字段的此特定行为的任何内容产生意外的副作用），修改，请按照以下步骤操作。

这假设您将 SugarCRM 实例托管在您自己的服务器上，而不是在 SugarCRM On Demand 上，并且您使用的是 MySQL。还有几种不同的方法可以最终使报价编号可重置；这只是其中之一 - 它可能不是最好的。

1.  备份您的数据库和 SugarCRM 实例。当然，无论如何，您都应该定期进行这些备份。

2.  编辑`{SugarCRM root}/modules/Quotes/vardefs.php`以删除对索引的`unique`约束。`quote_num`您可以在文件底部的数组`indices`元素中找到它。`$dictionary['Quote']`

    **前：**

    `array('name' =>'quote_num', 'type'=>'unique', 'fields'=>array('quote_num', 'system_id'))`

    **后：**

    `array('name' =>'quote_num', 'type'=>'index', 'fields'=>array('quote_num', 'system_id'))`

3.  执行快速修复和重建。为此，您可以转到 SugarCRM 管理页面，单击修复，然后单击快速修复和重建。第一遍结束后，您将在页面底部看到一个文本框，其中包含一两条 SQL 语句。单击“执行”按钮将应用您对 Quotes vardefs 索引条目所做的更新。

4.  重置`quotes`表格的自动增量值。如果你的数据库是 MySQL，你可以通过执行：（ `ALTER TABLE quotes AUTO_INCREMENT=1`如果你想从 1 开始计数）。

完成这些步骤后，您的报价编号将再次从 1 开始（或您在`ALTER TABLE`声明中指定的任何数字），并且您将来可以通过重新执行该`ALTER TABLE`声明再次重置该数字。

# vb.net - 播放 wav 文件时遇到问题 vb net

> ID：14631135
> 
> 赞同：0
> 
> 时间：2013-01-31T16:59:11.370
> 
> 标签：vb.net

我正在使用一个函数来返回一个字符串，其中包含我想播放的 *.wav 文件的路径。

这是用于确定当用户单击某物等时播放哪种声音的函数......

```
Function GetSoundPath() As String
    Dim theme As String, appPath As String, soundPath As String
    theme = GetUserTheme()
    appPath = LCase(Application.StartupPath & "\themes\" & theme & "\sounds\click.wav")

    Return soundPath

End Function 
```

上述函数获取需要播放的 *.wav 文件的正确路径。问题是当我将我的函数与“My.Computer.Audio.Play(GetSoundPath)”一起使用时，我收到一个错误消息：

> 创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：表单在构造过程中从默认实例引用自身，导致无限递归。在表单的构造函数中，使用“我”来引用表单。

我检查了 application.vb 文件，没有找到对我的表单的引用，因为它的名称为“wisealarm”。该表格应该被称为“我”。更奇怪的是，当我在命令中手动输入路径时，它可以正常工作.. ex My.Computer.Audio.Play("c:\users\sound.wav")

任何见解将不胜感激。如果需要任何进一步的代码或详细信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:39:35.740

表单的初始化中有些东西会导致错误，例如类的初始化。如果此函数中发生错误，您可以将调用（或使用“New”初始化）移到 Dim（或等效）语句之外以进行更正常的调试。这可能在 form_load 函数中。

此外，您将返回一个未定义的变量 SoundPath——也许您应该在赋值语句中将 appPath 替换为 SoundPath。

# asp.net - 如何避免两个 div 之间的内容重叠？

> ID：14631137
> 
> 赞同：0
> 
> 时间：2013-01-31T16:59:23.010
> 
> 标签：asp.net, html

我有两个 html div 来分隔网页母版页的各个部分。它们的定位都是相对的。Div 1 包含内容占位符，内容高度可能会有所不同。Div 2 用于页脚，仅包含一个标签，这是页脚中唯一的内容。标签的定位是相对的。

我的问题有时是 Div 2 的内容（在母版页内的 contentplaceholder 内）太长，因此与我设置页脚的位置（标签）重叠。内容主要是一个不同大小的表格。

如何设置 Div 2 的位置以自动调整到 Div 1 的大小以防止重叠？

Div 1 的内容占位符的内容是一个带有动态创建表的 aspx 页面，因此不要删除 asp.net 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:26:16.707

将以下内容添加并编辑到现有的，并根据您的 Div 更改类名。

```
 .Div1 {
      overflow: auto;
    }

.Div2 {
  clear: both; /* remove position: relative; */ 
```

我不知道你的css，所以我只是猜测这些都会导致问题，如果它不尝试在你的 div 1 上添加边距以防止重叠，并添加浮动。

# python - 滑动窗口上的 Pandas 滚动计算（不均匀间隔）

> ID：14631139
> 
> 赞同：12
> 
> 时间：2013-01-31T16:59:30.023
> 
> 标签：python, pandas

考虑到您有一些不均匀的时间序列数据：

```
import pandas as pd
import random as randy
ts = pd.Series(range(1000),index=randy.sample(pd.date_range('2013-02-01 09:00:00.000000',periods=1e6,freq='U'),1000)).sort_index()
print ts.head()

2013-02-01 09:00:00.002895    995
2013-02-01 09:00:00.003765    499
2013-02-01 09:00:00.003838    797
2013-02-01 09:00:00.004727    295
2013-02-01 09:00:00.006287    253 
```

假设我想在 1ms 窗口内进行滚动求和来得到这个：

```
2013-02-01 09:00:00.002895    995
2013-02-01 09:00:00.003765    499 + 995
2013-02-01 09:00:00.003838    797 + 499 + 995
2013-02-01 09:00:00.004727    295 + 797 + 499
2013-02-01 09:00:00.006287    253 
```

目前，我将所有内容都转换为 longs 并在 cython 中执行此操作，但这在纯熊猫中是否可行？我知道您可以执行类似 .asfreq('U') 之类的操作，然后填充并使用传统功能，但是一旦您获得的行数超过玩具 #，这将无法扩展。

作为参考，这里有一个 hackish，不是快速的 Cython 版本：

```
%%cython
import numpy as np
cimport cython
cimport numpy as np

ctypedef np.double_t DTYPE_t

def rolling_sum_cython(np.ndarray[long,ndim=1] times, np.ndarray[double,ndim=1] to_add, long window_size):
    cdef long t_len = times.shape[0], s_len = to_add.shape[0], i =0, win_size = window_size, t_diff, j, window_start
    cdef np.ndarray[DTYPE_t, ndim=1] res = np.zeros(t_len, dtype=np.double)
    assert(t_len==s_len)
    for i in range(0,t_len):
        window_start = times[i] - win_size
        j = i
        while times[j]>= window_start and j>=0:
            res[i] += to_add[j]
            j-=1
    return res 
```

在一个稍大的系列中证明这一点：

```
ts = pd.Series(range(100000),index=randy.sample(pd.date_range('2013-02-01 09:00:00.000000',periods=1e8,freq='U'),100000)).sort_index()

%%timeit
res2 = rolling_sum_cython(ts.index.astype(int64),ts.values.astype(double),long(1e6))
1000 loops, best of 3: 1.56 ms per loop 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-14T15:31:30.667

您可以使用 cumsum 和二进制搜索来解决大多数此类问题。

```
from datetime import timedelta

def msum(s, lag_in_ms):
    lag = s.index - timedelta(milliseconds=lag_in_ms)
    inds = np.searchsorted(s.index.astype(np.int64), lag.astype(np.int64))
    cs = s.cumsum()
    return pd.Series(cs.values - cs[inds].values + s[inds].values, index=s.index)

res = msum(ts, 100)
print pd.DataFrame({'a': ts, 'a_msum_100': res})

                            a  a_msum_100
2013-02-01 09:00:00.073479  5           5
2013-02-01 09:00:00.083717  8          13
2013-02-01 09:00:00.162707  1          14
2013-02-01 09:00:00.171809  6          20
2013-02-01 09:00:00.240111  7          14
2013-02-01 09:00:00.258455  0          14
2013-02-01 09:00:00.336564  2           9
2013-02-01 09:00:00.536416  3           3
2013-02-01 09:00:00.632439  4           7
2013-02-01 09:00:00.789746  9           9

[10 rows x 2 columns] 
```

您需要一种处理 NaN 的方法，并且根据您的应用程序，您可能需要滞后时间的现行值（即使用 kdb+ bin 与 np.searchsorted 之间的差异）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-16T02:49:41.350

这是一个老问题，但对于那些从谷歌偶然发现的人：在 pandas 0.19 中，这是内置的函数

[http://pandas.pydata.org/pandas-docs/stable/computation.html#time-aware-rolling](http://pandas.pydata.org/pandas-docs/stable/computation.html#time-aware-rolling)

所以要获得 1 毫秒的窗口，看起来你通过做得到一个滚动对象

```
dft.rolling('1ms') 
```

总和是

```
dft.rolling('1ms').sum() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:02:15.753

也许使用更有意义[`rolling_sum`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.stats.moments.rolling_sum.html#pandas.stats.moments.rolling_sum)：

```
pd.rolling_sum(ts, window=1, freq='1ms') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T01:53:05.213

像这样的东西怎么样：

创建 1 ms 的偏移量：

```
In [1]: ms = tseries.offsets.Milli() 
```

创建一系列与时间序列长度相同的索引位置：

```
In [2]: s = Series(range(len(ts))) 
```

应用从 ts 系列索引当前时间的 lambda 函数。该函数返回 之间的所有 ts 条目的总和`x - ms and x`。

```
In [3]: s.apply(lambda x: ts.between_time(start_time=ts.index[x]-ms, end_time=ts.index[x]).sum())

In [4]: ts.head()
Out[4]:
2013-02-01 09:00:00.000558    348
2013-02-01 09:00:00.000647    361
2013-02-01 09:00:00.000726    312
2013-02-01 09:00:00.001012    550
2013-02-01 09:00:00.002208    758 
```

上述函数的结果：

```
0     348
1     709
2    1021
3    1571
4     758 
```

# java - 使用来自 html 页面的信息作为输入数据的一部分进行编程？

> ID：14631142
> 
> 赞同：0
> 
> 时间：2013-01-31T16:59:49.007
> 
> 标签：java, apache-flex, web-scraping

是否有规则、框架或工具集用于使用来自 html 页面的信息作为输入数据的一部分进行编程？类似于元搜索引擎的东西。你如何解析网页？

我更喜欢 java 或 flex/flash，或者一些阅读的指针。

谢谢！

**2013 年 2 月 7 日更新**

谢谢您的回答！网络抓取是我一直在寻找的术语！

从这篇文章[Web scraping with Java](https://stackoverflow.com/questions/3202305/web-scraping-with-java)中找到了这个很棒的 java 库： http: [//jsoup.org/](http://jsoup.org/)。

正在寻找 flex 的，我一找到它就会更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:08:00.173

我认为您的问题对于获得好的答案有点含糊，而且我自己没有 Java/Flex 经验，但是大多数语言都有库支持向相关资源发出 HTTP 请求（并且很可能是某种支持将 HTML/XML 解析为某种数据结构，您可以从中提取数据。）

根据您试图摆脱它的方式，您可能只需要对 HTTP 响应进行简单的字符串搜索即可找到所需的内容。这基本上是@pablochan 在建议关于网络抓取的 wiki 页面时所推荐的。

请注意，某些服务/网站旨在混淆您尝试对其数据进行页面抓取的尝试，并且可能确实将此类行为列为违反其服务条款的行为。如果您成功执行此操作但过于频繁，您可能会发现您的 IP 被阻止或采取了其他类型的措施来阻止您这样做。

大多数静态站点不会有这样的保护，但大型服务可能会很好。

# hadoop - 使用 s3distcp 将文件从 amazon s3 复制到 hdfs 失败

> ID：14631152
> 
> 赞同：6
> 
> 时间：2013-01-31T17:00:09.377
> 
> 标签：hadoop, amazon-s3, hdfs, elastic-map-reduce

我正在尝试使用 EMR 中的工作流将文件从 s3 复制到 hdfs，当我运行以下命令时，作业流成功启动，但在尝试将文件复制到 HDFS 时出现错误。我需要设置任何输入文件权限吗？

**命令：**

./elastic-mapreduce --jobflow j-35D6JOYEDCELA --jar s3://us-east-1.elasticmapreduce/libs/s3distcp/1.latest/s3distcp.jar --args '--src,s3://odsh /input/,--dest,hdfs:///用户

**输出**

任务 TASKID="task_201301310606_0001_r_000000" TASK_TYPE="REDUCE" TASK_STATUS="FAILED" FINISH_TIME="1359612576612" ERROR="java.lang.RuntimeException: Reducer 任务无法复制 1 个文件：s3://odsh/input/GL_01112_20121019.dat 等在 com.amazon.external.elasticmapreduce.s3distcp.CopyFilesReducer.close(CopyFilesReducer.java:70) 在 org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:538) 在 org.apache.hadoop.mapred.ReduceTask .run(ReduceTask.java:429) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject。 doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132) at org.apache.hadoop.mapred.Child.main(Child.java:249)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-04T22:11:05.780

我得到了同样的例外。看起来该错误是由`CopyFilesReducer`使用多个`CopyFilesRunable`实例从 S3 下载文件时的竞争条件引起的。问题是它在多个线程中使用相同的临时目录，并且线程在完成后会删除临时目录。因此，当一个线程在另一个线程之前完成时，它会删除另一个线程仍在使用的临时目录。

我已经向 AWS 报告了这个问题，但与此同时，您可以通过`s3DistCp.copyfiles.mapper.numWorkers`在作业配置中将变量设置为 1 来强制减速器使用单个线程来解决该错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-02T04:44:23.293

调整工人数量对我不起作用；s3distcp 在小型/中型实例上总是失败。增加任务作业的堆大小（通过`-D mapred.child.java.opts=-Xmx1024m`）为我解决了这个问题。

示例用法：

```
hadoop jar /home/hadoop/lib/emr-s3distcp-1.0.jar 
    -D mapred.child.java.opts=-Xmx1024m 
    --src s3://source/
    --dest hdfs:///dest/ --targetSize 128
    --groupBy '.*\.([0-9]+-[0-9]+-[0-9]+)-[0-9]+\..*' 
    --outputCodec gzip 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-12T22:17:06.830

我看到了由竞争条件引起的同样问题。通过`-Ds3DistCp.copyfiles.mapper.numWorkers=1`有助于避免问题。

我希望亚马逊能修复这个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-01T08:06:48.560

问题是地图 - 减少作业失败。Mapper 执行完美，但 reducer 在集群内存中创建了一个瓶颈。

这为我解决了**-Dmapreduce.job.reduces=30**如果它仍然失败尝试

将其减少到 20 即**-Dmapreduce.job.reduces=20**

为了便于理解，我将添加整个论点：

在 AWS 集群中：

*JAR 位置*：command-runner.jar

*主要课程*：无

*参数*：s3-dist-cp -Dmapreduce.job.reduces=30 --src=hdfs:///user/ec2-user/riskmodel-output --dest=s3://dev-quant-risk-model/2019_03_30_SOM_EZ_23Factors_Constrained_CSR_Stats /输出--multipartUploadChunkSize=1000

*对失败采取的行动*：继续

**在脚本文件中：**

aws --profile $AWS_PROFILE emr add-steps --cluster-id $CLUSTER_ID --steps Type=CUSTOM_JAR,Jar='command-runner.jar',Name="Copy Model Output To S3",ActionOnFailure=CONTINUE,Args= [s3-dist-cp,-Dmapreduce.job.reduces=20,--src=$OUTPUT_BUCKET,--dest=$S3_OUTPUT_LARGEBUCKET,--multipartUploadChunkSize=1000]

# c# - 我的 Visual Studio 应用程序在 vista、Win7 但不是 xp 上运行

> ID：14631153
> 
> 赞同：-5
> 
> 时间：2013-01-31T17:00:14.433
> 
> 标签：c#, .net, winforms, visual-studio-2010

我在 vs 2010 上创建了一个应用程序。它在我的 vista 上运行，我认为是 win7，但它不会无缘无故地在 xp 上打开？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:42:41.983

[http://en.wikipedia.org/wiki/.NET_Framework_version_history#.NET_Framework_4.5](http://en.wikipedia.org/wiki/.NET_Framework_version_history#.NET_Framework_4.5)

.NET 4.5 仅在 Vista 或更高版本上受支持。

**编辑：**

您可能希望将“目标框架”更改`Project > Properties > Application > Target framework`为更早的版本，例如 .NET 4（并确保在不知道为什么它仍然无法工作之前安装 .NET 4）

# python - 使用 re.split 拆分字符串时的附加空元素

> ID：14631157
> 
> 赞同：8
> 
> 时间：2013-01-31T17:00:30.620
> 
> 标签：python, regex, python-2.6

我正在尝试使用 re.split 在 Python 中拆分一个看起来像这样的字符串：

```
#NAME="Foo" NAME2="foobar" NAME3="BAR BAR"
comp = "NAME=\"Foo\" NAME2=\"FOO BAR\" NAME3=\"BAR BAR\"" 
```

这就是我的拆分函数（包括正则表达式）的样子：

```
re.split('(\s\w+\=\".*?\")', comp) 
```

结果如下所示：

```
['NAME="Foo"', 'NAME2="foobar"', '', 'NAME3="BAR BAR"', ''] 
```

虽然这是正确的，但我想摆脱所有空元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T17:07:37.057

这是你要找的：

```
In [10]: re.findall(r'\w+=".*?"', comp)
Out[10]: ['NAME="Foo"', 'NAME2="FOO BAR"', 'NAME3="BAR BAR"'] 
```

?

这听起来不像`re.split()`是适合这项工作的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:12:38.483

您还可以使用列表推导并直接对其进行过滤

```
l = [x for x in re.split('(\s\w+\=\".*?\")', comp) if x != ''] 
```

结果看起来像您期望的那样：

```
print l
['NAME="Foo"', ' NAME2="FOO BAR"', ' NAME3="BAR BAR"'] 
```

# ios - 如何在 iOS 中更改 titleForHeader 背景颜色？

> ID：14631163
> 
> 赞同：0
> 
> 时间：2013-01-31T17:00:44.590
> 
> 标签：ios, cocoa-touch, uitableview

我想更改`titleForHeader`iOS 中的背景颜色。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
     return @"A";
} 
```

此方法显示 .title 中的 titleHeader 部分`UITableView`。

默认情况下，它的背景颜色是浅蓝色。

我想改变这些背景的黑色。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:11:37.190

看看 Alex Reynolds 在这里的回答

[UITableView - 更改部分标题颜色](https://stackoverflow.com/questions/813068/uitableview-change-section-header-color)

```
 - (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
    {
      UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)] autorelease];
      if (section == integerRepresentingYourSectionOfInterest)
         [headerView setBackgroundColor:[UIColor redColor]];
      else 
         [headerView setBackgroundColor:[UIColor clearColor]];

 return headerView;
} 
```

如果您只是获得背景颜色但没有文字

看DoctorG对同一个问题的回答

```
 UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(10, 3, tableView.bounds.size.width - 10, 18)] autorelease];
    label.text = @"Section Header Text Here";
    label.textColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.75];

label.backgroundColor = [UIColor clearColor];
[headerView addSubview:label]; 
```

# php - 无法使用 PHP file_get_contents 打开我知道的文件

> ID：14631167
> 
> 赞同：-2
> 
> 时间：2013-01-31T17:00:50.603
> 
> 标签：php

我浏览了整个 Internet 和 Stack Overflow，但我无法找到解决问题的方法。

我基本上有一个 PDF 文件，如果我在网络浏览器中点击，我可以通过网址访问该文件。不用了，它是：[http](http://url.com/manage/pdf/file.pdf?id=172) ://url.com/manage/pdf/file.pdf?id=172 ）。我知道这看起来很不寻常，但相信我，点击这个地址会给我一个 PDF 文件。

但是，如果我尝试使用 file_get_contents 命中它，我会得到一个错误：

*无法打开流：连接超时*（显然我已经删除了文件名和行号）。

我不想抑制错误（我已经可以做到这一点），也不想寻找处理错误的方法。我想知道为什么会发生错误，以便阻止它发生。

特别是因为同一行代码以类似方式获取其他文件没有问题。

由于我无法控制的限制，我无法使用 cURL。

该文件小于 1MB，并且 php.ini 中的所有相关设置都已检查（我不记得它们，但允许打开套接字和套接字超时）。

任何人都可以给我一个我还没有看到的答案，它实际上会起作用！如果您需要更多详细信息，请告诉我。

提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:03:06.207

你不能`file_put_contents`访问这样的网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:08:50.360

您正在尝试从网址打开文件！这不能用`file_put_contents()`.

请参阅**[此处](http://php.net/manual/en/function.file-put-contents.php)**以获取参考。

***如果您尝试将数据添加到文件中，则该文件必须位于本地服务器上的可写目录中。***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:11:56.137

您不能将文件放到远程服务器上。如果您尝试从该站点**打开**PDF，您需要使用`file_get_contents()`.

[http://url.com/manage/pdf/file.pdf?id=172](http://url.com/manage/pdf/file.pdf?id=172)

您的链接包含“管理”一词。如果您需要登录才能看到该文件，那么是的，您的浏览器会看到它，但 PHP 不能，因为它没有登录到服务器。第二个问题是，如果我查看该链接，我将被重定向到[http://www.coolchaser.com/?id=172](http://www.coolchaser.com/?id=172)。如果您正在处理可能具有重定向的链接，您应该切换到 CURL 并在 curl 选项中告诉它重定向以及允许的重定向级别数。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://url.com/manage/pdf/file.pdf?id=172');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
$result = curl_exec($ch);
curl_close($ch); 
```

# php - 复杂的应用程序堆栈重构/重新设计策略

> ID：14631168
> 
> 赞同：6
> 
> 时间：2013-01-31T17:00:52.413
> 
> 标签：php, javascript, xquery

我参与了一项涉及重大重构或完全重新设计的项目维护计划。我们有一个非常复杂的现有技术堆栈，在五年内有机地发展。我本人是三年前加入的，当时“陷入”了疯狂之中。该堆栈是根据客户不断变化的需求组合而成的，并且正在迅速成为一个由许多技术和无法控制的数据收集组成的无法管理的庞然大物。

我们的主要目标是使堆栈更易于使用和管理，并在未来提出更好的系统来管理数据。我们希望将主要用 PHP 编写的紧密集成的业务模型和 REST 控制器系统转换为连贯的 REST API。

我们的 PHP 业务模型依赖于包含大部分数据的 eXist XML 数据库和支持我们的两个子应用程序数据的 MySQL。我们有一个 SQL 和 XQuery 源代码库来动态管理数据存储中的数据。还有一些业务模型依赖于 Java 代码，通过使用 PHP-Java 桥和 SAXON 和 FOP 来创建存储在 XML 数据库中的文档的 PDF 传真。由于这是一个 Web 应用程序，我们使用 PHPTAL、XSLT、CSS、XHTML 和 JavaScript 的组合来简化客户端 UI。最后，我们有一堆管理脚本，用于管理 PHP、Apache、用 Perl 编写的函数，这些函数使用 Ant 任务进行管理。

堆栈的基本功能是为各种用户模型提供电子表格。多年来，由于客户摆弄、最终用户过度牵手、缺乏系统分析监督、糟糕的测试方法以及缺乏未来目标和明确定义的项目范围，这些年来，应用程序背后的简单理念遭到破坏。

我们目前正计划阻止任何进一步的开发，更好地描述可能包含或不包含更好的单元测试计划的系统，并为使用相同技术组件的 API 创建基础。我的直觉反应是提出一个可靠的范围并使用支持良好的编程语言和框架重新设计系统，这些语言和框架非常适合编写 Web API，可能会丢失一些功能，但保留最重要的功能。我还建议将现有数据迁移到单独的“只读”平台。

我对那些处于类似情况的人的问题是：

*   你是如何摆脱这种局面的？
*   在这种情况下采用什么样的计划步骤会很有用？
*   这些堆栈有源代码管理技术吗？我要寻找什么？- 搜索关键字

我意识到没有完美的解决方案，要回答这些问题，我需要进一步说明我们的项目问题。由于各种原因，我不能真正做到这一点。我在寻找有用的资源来帮助我解决这个问题时遇到了问题，我将不胜感激有关如何进行的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:36:51.643

如果我在你的鞋子里，我会问或考虑以下一些问题：

数据库设计：

*   您需要捕获哪些信息？
*   这一切需要如何捆绑在一起？
*   你需要做什么样的报告？
*   你想收集什么样的指标？
*   何时应将旧数据永久清除以进行长期存档？

应用设计：

*   您现在可以在系统中设计什么来减少客户需要“手持”的可能性？
*   目前缺少或缺乏哪些功能？
*   您是否可以进行任何简单的更改来扩大您的客户群？
*   你有正式的编码标准吗？是否强制执行？
*   您需要进行什么样的测试？（单元测试、正式 QA 等）
*   您需要什么样的文件？（源代码、最终用户等）
*   您使用什么样的指标来确定应用程序的运行情况？
*   回首三年，当你开始时 - 知道你现在知道什么，你希望你当时实施了哪些设计决策？

软件：

*   是否可以使用较少的技术集在同一级别提供相同的服务？
*   您现有的员工最熟悉哪些技术？
*   如果您需要雇用更多的人，哪些技术最容易在永久或顾问的基础上引入？

硬件：

*   您现有的硬件是否满足您的需求？如果没有，你需要什么？更多服务器？更大的服务器？负载均衡器？等等
*   您目前是否正在利用虚拟化？

人员：

*   你是否得到了所有利益相关者的“买进”？如果不是全部，您是否至少从决策者那里获得了支持？
*   利益相关者是否了解这将是一项艰巨的任务？

防灾/恢复：

*   如果主服务器/网络不可用，您将如何提供冗余？
*   您将如何备份数据（现场、异地、短期、长期）？
*   您需要设置什么样的监控？出现问题时应如何通知您？应该通知谁？

抱歉，我无法将其纳入评论 :-) 而且我没有时间详细说明其中的任何内容，我只是在消磨时间等待会议。

# ios - 无法设置 UICollectionViewFlowLayout headerReferenceSize

> ID：14631178
> 
> 赞同：3
> 
> 时间：2013-01-31T17:01:10.370
> 
> 标签：ios

设置 layout.headerReferenceSize 时得到以下信息

```
Assertion failure in -[HLEventCollectionView _createPreparedSupplementaryViewForElementOfKind:atIndexPath:withLayoutAttributes:], 
```

甚至在设置数据源之前就发生了崩溃。collectionView is frame 是为 viewControllers 边界设置的。除了 headerReferenceSize 之外，flowLayout 没有设置任何属性。

代码示例：

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.headerReferenceSize = CGSizeMake(0.0f, 30.0f);

UICollectionView *collectionView = [[UICollectionView alloc] initWithFrame:self.view.bounds collectionViewLayout:flowLayout];
[self.view addSubview:collectionView]; 
```

}

无论我是否设置了数据源，它都会发生。

# spring - Spring Batch：不可解决的父 POM 错误

> ID：14631180
> 
> 赞同：0
> 
> 时间：2013-01-31T17:01:13.870
> 
> 标签：spring, spring-batch, sts-springsourcetoolsuite

我正在尝试导入 Spring Batch Samples。我已经添加了 Spring Web 站点上所述的所有 Maven groupids/artifacts/version...但是我无法构建项目。我搜索了 Jarfinder 试图找到所有的导入，但 POM 仍然存在这个问题。因为它是在我添加 Maven 时为我生成的，所以我不知道该怎么做。谢谢。

我得到错误：

不可解析的父 POM：未能在 repo1.maven.org/maven2 中找到 org.springframework.batch:org.springframework.batch.parent:2.0.0.RELEASE 已缓存在本地存储库中，直到更新完成后才会尝试解析强制和 'parent.relative.PATH' 指向错误的 POM。

我正在使用 SpringSource 工具套件。

这是显示错误的代码。

```
<parent>
    <groupId>org.springframework.batch</groupId>
    <artifactId>org.springframework.batch.parent</artifactId>
    <version>2.0.0.RELEASE</version>
    <relativePath>../spring-batch-parent</relativePath>
</parent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:42:34.600

我认为这`artifactId` `org.springframework.batch.parent`是错误的，应该替换为`spring-batch-parent`（参见 maven 存储库，例如：[http](http://search.maven.org/#browse|301637886) ://search.maven.org/#browse|301637886 ）

# arrays - 在每第 n 个元素后填充一个数组

> ID：14631182
> 
> 赞同：2
> 
> 时间：2013-01-31T17:01:17.410
> 
> 标签：arrays, matlab

如何在数组中的每个第 n 个元素之后添加让我们说 [someVal,someVal]

所以例如假设我有

```
p = [0,1,2,3,4,5] 
```

现在我想在每 2 个元素之后插入 [9,9] 一些东西，所以我的结果应该是

```
ans = [0 1 9 9 2 3 9 9 4 5 9 9] 
```

如果你有

```
p = [1,2,3] 
```

那么你应该最终得到

```
p = [1 2 9 9 3] 
```

我想知道如何解决这个问题，如果你能告诉我我应该在哪里看，那就太好了，因为我是 MatLab 的新手。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:47:32.773

这是一个向量化的解决方案，用于在每个元素之后将向量`q`插入向量：`p``n`

```
N = numel(p);
M = mod(N, n);
p_pad = [p(:); zeros((n - M) * (M > 0), 1)];
res = [reshape(p_pad, n, []); repmat(q(:), 1, numel(p_pad) / n)];
res = res(1:N + numel(q) * fix(N / n)); 
```

您可以通过添加以下内容来保留输出的输入向量行/列属性：

```
if isrow(p)
    res = res';
end 
```

### 解释

用一个例子来解释这一点是最容易的。我们从向量开始`p`，我们想把它重塑成一个矩阵，每列都有`n`元素。如果元素的数量`p`不是 的倍数`n`，我们需要“填充”它（例如，用零）。例如，对于`p = [1 2 3 4 5 6 7], n = 3`，我们将重塑`p`为以下矩阵：

```
1    4    7
2    5    0
3    6    0 
```

现在我们使用`repmat`复制向量`q`并生成另一个具有相同列数的矩阵，其中每列是`q`：

```
9    9    9
9    9    9 
```

然后我们垂直连接这两个矩阵（在我的代码中，新矩阵被称为`res`）：

```
1    4    7
2    5    0
3    6    0
9    9    9
9    9    9 
```

在我们再次把这个矩阵变成一个向量，将列连接在一起之后，我们应该得到想要的结果。请注意，我们还想丢弃尾随`0 0 9 9`（由于填充而形成），因此让我们计算`L`结果中的预期元素数量：

```
L = N + length(q) * fix(N / n) 
```

然后提取我们将只`L`从我们的`res`.

对列进行操作通常最容易，因为[MATLAB 的线性索引](http://www.mathworks.com/help/matlab/math/matrix-indexing.html?s_tid=doc_12b#f1-85511)是列主要的。

### 例子

让我们把它放到一个函数中：

```
function y = insertn(p, q, n)
    N = numel(p);
    p_pad = [p(:); zeros((n - mod(N, n)) * (mod(N, n) > 0), 1)];
    y = [reshape(p_pad, n, []); repmat(q(:), 1, numel(p_pad) / n)];
    y = y(1:N + numel(q) * fix(N / n));

    if isrow(p)
        y = y';
    end 
```

现在让我们针对不同的输入对其进行测试：

```
>> insertn(0:5, [9 9], 2)
ans =
    0    1    9    9    2    3    9    9    4    5    9    9

>> insertn(1:3, [9 9], 2)
ans =
    1    2    9    9    3

>> insertn(1:7, [9 9], 3)
ans =
    1    2    3    9    9    4    5    6    9    9    7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:03:16.807

直到现在，我看到给出的解决方案尝试在正确的位置添加 [9 9]。

这是一个从不同角度看待事物的解决方案。它不是将填充向量放入原始向量中，而是创建一个填充为 9 的背景并将向量插入正确的位置。

我没有测试它，但它应该非常有效：

```
p = 0:5; %Suppose this is your vector
N = length(p);
v = zeros(N+2*floor(N/2),1)+9; %Start with the `background` of the right size
v(1:4:end) = p(1:2:end);
v(2:4:end) = p(2:2:end); 
v' 
```

请注意，此解决方案很容易扩展到 P 是矩阵的情况，您可以在任何地方添加一个维度。

# c++ - 在 C++ 中正确使用“接口”？

> ID：14631187
> 
> 赞同：1
> 
> 时间：2013-01-31T17:01:23.447
> 
> 标签：c++, interface, coding-style

自从大约 5 年前切换到 C# 以来，我还没有在 C++ 中进行过硬核开发。我非常熟悉在 C# 中使用接口并且一直在使用它们。例如

```
public interface IMyInterface
{
   string SomeString { get; set; }
}

public class MyClass : IMyInterface
{
   public string SomeString { get; set; }
}

// This procedure is designed to operate off an interface, not a class.
void SomeProcedure(IMyInterface Param)
{
} 
```

这一切都很棒，因为您可以实现许多类似的类并传递它们，并且没有人比您实际使用不同的类更明智。但是，在 C++ 中，你不能传递接口，因为当它看到你试图实例化一个没有定义其所有方法的类时，你会得到一个编译错误。

```
class IMyInterface
{
public:
   ...
   // This pure virtual function makes this class abstract.
   virtual void IMyInterface::PureVirtualFunction() = 0;
   ... 
}

class MyClass : public IMyInterface
{
public:
   ...
   void IMyInterface::PureVirtualFunction();
   ... 
}

// The problem with this is that you can't declare a function like this in
// C++ since IMyInterface is not instantiateable.
void SomeProcedure(IMyInterface Param)
{
} 
```

**那么在 C++ 中感受 C# 风格接口的正确方法是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:02:56.797

当然可以，但是您需要传递引用或指针，而不是按值传递（好吧，从迂腐的角度讲，指针也是按值传递的）：

```
void SomeProcedure(IMyInterface& Param) 
```

我认为它在这方面类似于 C#，只是 C# 默认情况下传递对类的引用，而在 C++ 中，你必须明确地说你想通过引用传递它。

按值传递将尝试创建对象的副本，并且抽象类型（接口）的对象没有意义，因此错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:03:07.190

> 但是，在 C++ 中，您不能传递接口......

您可以将*指针*或*引用*传递给抽象类，例如：

```
void SomeProcedure(IMyInterface& Param) { ... } 
```

或者

```
void SomeProcedure(const IMyInterface& Param) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:13:30.380

您不能将抽象（接口类）传递给函数的原因是需要知道对象的大小何时进行复制。

如果所有类的大小都相同，这显然不会有什么不同，但是编译器通常无法知道您的意图是什么，并且实现实际上具有基数中不存在的成员变量是很常见的/接口类[事实上，一个干净的实现根本不应该包含任何数据]。

为了避免必须知道大小，我们传递一个指向或引用的指针。现在编译器只需要知道指针的大小——这是编译器随时都可以知道的。

因此，正如其他答案所说，您传递了一个引用、const 引用或指向接口的指针，并且可以传入实现对象，而无需确切知道它是哪一个。

类似地，如果要存储同一基类的一些实现，则存储对基类的引用或指针，然后让它们引用/指向实现类的实际对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:49:04.347

问题中的当前代码：

```
class IMyInterface
{
public:
   ...
   // This pure virtual function makes this class abstract.
   virtual void IMyInterface::PureVirtualFunction() = 1;
   ... 
} 
```

这有**太多的错误**。

*   这`IMyInterface::`是一个语言扩展，如果它用任何编译器编译（类似的东西用于用 Visual C++ 编译）。

*   这`= 1`是一个语法错误。大概是作者的意思`= 0`。

*   没有分号的`}`会导致后面的解析错误。

因此，正如迄今为止的现有答案所做的那样，将后面的代码中的特定事物诊断为 OP 问题的原因纯粹是猜测。有道理，是的。但是，嘿，当 OP 写道问题是

> “因为你会得到一个编译错误”

他或她*已经*通过上面的幻想代码得到了它。

继续问题的代码：

```
class MyClass : public IMyInterface
{
public:
   ...
   void IMyInterface::PureVirtualFunction();
   ... 
}

// The problem with this is that you can't declare a function like this in
// C++ since IMyInterface is not instantiateable.
void SomeProcedure(IMyInterface Param)
{
} 
```

应用超长距离迭代收敛心灵感应电路，我猜可能是下面这样的代码：

```
class IMyInterface
{
public:
   // ...
   virtual void pureVirtualFunction() = 0;
};

class MyClass
    : public virtual IMyInterface
{
public:
   // ...
   void PureVirtualFunction();
};

void SomeProcedure( IMyInterface const& param )
{
} 
```

然后，纠正了无数的语法错误等，只是为了*编译*代码，没有明显的问题需要处理：没问题。

免责声明：不受编译器的影响。另外，既然没有问题，就没有讨论。我只是提出，编程需要智能，不能简化为适合机器的规则，因此不要将上述作为绝对规则来遵循。

# c# - 我可以让我的线程池将其线程创建为前台吗？

> ID：14631195
> 
> 赞同：11
> 
> 时间：2013-01-31T17:01:40.673
> 
> 标签：c#, .net, multithreading, threadpool

默认情况下，.NET 中的线程池使用后台线程。

我无法将其更改为前台运行。

如何将其更改为作为前台线程运行？

编辑：

我需要使用它，因为我正在更改我的应用程序由于大量处理（在此之前我手动处理线程，默认情况下是前台线程），我不想更改我的应用程序只是为了使其适应背景线程场景..

我想知道为什么线程池默认不是前台

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T17:55:10.623

“后台线程”的概念在 .NET 中意义不大*。*Thread.IsBackground 属性只是一个简单的标志，它帮助 CLR 在 AppDomain 卸载时决定是否应该粗鲁地中止线程，或者是否应该等待线程自愿退出。

如果您希望线程池线程在程序退出时继续运行，您可以更改该属性。这个片段显示了这是如何可能的：

```
using System;
using System.Threading;

class Program {
    static void Main(string[] args) {
        var sync = new ManualResetEvent(false);
        ThreadPool.QueueUserWorkItem((_) => {
            Console.WriteLine("Running");
            Thread.CurrentThread.IsBackground = false;
            sync.Set();
            Thread.Sleep(5000);
            Console.WriteLine("Done, should exit now");
            Thread.Sleep(250);
        });
        sync.WaitOne();  // Ensures IsBackground is set
    }
} 
```

请注意这里的球。如果这对您很重要，那么您很可能做错了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T23:24:57.050

您**可以**将线程池​​线程设置为前台。

```
class Program
{
    static void Main(string[] args)
    {
        new Action(() => Worker()).BeginInvoke(null,null);

        Thread.Sleep(1000);
        Console.WriteLine("Main ends here");
    }

    static void Worker()
    {
        Thread.CurrentThread.IsBackground = false;

        Console.WriteLine("Worker started. Bg {0} Tp {1}.", 
            Thread.CurrentThread.IsBackground, 
            Thread.CurrentThread.IsThreadPoolThread);

        Thread.Sleep(5000);
        Console.WriteLine("Worker ends here"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:13:06.547

我不相信你可以，你必须想出一个自定义的 ThreadPool 才能做到这一点。

> 托管线程池中的线程是后台线程。也就是说，它们的 IsBackground 属性为真。这意味着 ThreadPool 线程不会在所有前台线程都退出后保持应用程序运行。
> 
> **何时不使用线程池线程**
> 
> 有几种情况适合创建和管理自己的线程而不是使用线程池线程：
> 
> *   您需要一个前台线程。

[从这个链接](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.threadpool%28v=vs.90%29.aspx) [和这个](http://msdn.microsoft.com/en-us/library/vstudio/0ka9477y%28v=vs.90%29.aspx)

# snmp - 如何在 pysnmp 中加载和遍历自定义 mib？

> ID：14631199
> 
> 赞同：2
> 
> 时间：2013-01-31T17:02:04.457
> 
> 标签：snmp, pysnmp

我是 SNMP/pysnmp 的新手，我正在尝试实现一个使用自定义 MIB 的代理。我正在[pysnmp](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v3-alternative-mib-controller.html)网站上查看以下示例，但我似乎无法让它工作。以下是我正在采取的步骤：

1.  使用 build-pysnmp-mib 将我的 MIB 文件转换为 pysnmp 模块（成功且没有错误）
2.  设置 MIB 源并使用 MibBuilder() 加载 MIB 模块
3.  使用上面引用的示例来设置代理（我唯一添加的是 mibBuilder）
4.  使用 net-snmp 的 snmpwalk 查看加载的 MIB：

snmpwalk 命令是：

```
snmpwalk -v3 -u usr-md5-none -l authNoPriv -A authkey1 -E 8000000001020304 -n my-context 127.0.0.1 .1.3.6 
```

snmpwalk 返回一个超时错误，在分析通信时（通过在 pysnmp 中启用 I/O 调试），我可以看到代理接收到请求，但从不回复。我认为这可能与上下文有关，目前我可能无法正确理解。非常感谢任何关于我可能做错了什么的指示。我正在使用[以下示例 MIB](http://msdn.microsoft.com/en-us/library/aa914975.aspx)进行测试。代码如下。谢谢。

```
#!/usr/local/bin/python

from pysnmp.smi import builder
from pysnmp.smi import view

from pysnmp.entity import engine
from pysnmp.entity import config
from pysnmp.entity.rfc3413 import cmdrsp
from pysnmp.entity.rfc3413 import context
from pysnmp.smi import instrum
from pysnmp.carrier.asynsock.dgram import udp
from pysnmp.proto.api import v2c

from pysnmp import debug

# Create SNMP engine
snmpEngine = engine.SnmpEngine()

# Transport setup

# UDP over IPv4
config.addSocketTransport(
    snmpEngine,
    udp.domainName,
    udp.UdpTransport().openServerMode(('127.0.0.1', 161))
)

# SNMPv3/USM setup

# user: usr-md5-none, auth: MD5, priv NONE
config.addV3User(
    snmpEngine, 'usr-md5-none',
    config.usmHMACMD5AuthProtocol, 'authkey1'
)

# Allow full MIB access for each user at VACM
config.addVacmUser(snmpEngine, 3, 'usr-md5-none', 'authNoPriv',
                   (1,3,6,1,2,1), (1,3,6,1,2,1)) 

# Create an SNMP context with ContextEngineId = 8000000001020304
snmpContext = context.SnmpContext(
    snmpEngine, contextEngineId=v2c.OctetString(hexValue='8000000001020304')
)

# load mibs
MIBDIR = '/usr/local/share//mibdata'
mibBuilder = builder.MibBuilder()
mibSources = mibBuilder.getMibSources() + (builder.DirMibSource(MIBDIR),)
mibBuilder.setMibSources(*mibSources)
mibBuilder.loadModules('TOASTER-MIB')

# pass mib to Management Instrumentation Controller and register at SNMP Context
# under ContextName 'my-context'
snmpContext.registerContextName(
    v2c.OctetString('my-context'),            # Context Name
    instrum.MibInstrumController(mibBuilder)  # Managed Objects - loading my custom TOASTER-MIB
)

# Register SNMP Applications at the SNMP engine for particular SNMP context
cmdrsp.GetCommandResponder(snmpEngine, snmpContext)
cmdrsp.SetCommandResponder(snmpEngine, snmpContext)
cmdrsp.NextCommandResponder(snmpEngine, snmpContext)
cmdrsp.BulkCommandResponder(snmpEngine, snmpContext)

# Register an imaginary never-ending job to keep I/O dispatcher running forever
snmpEngine.transportDispatcher.jobStarted(1)

# Run I/O dispatcher which would receive queries and send responses
try:
    snmpEngine.transportDispatcher.runDispatcher()
except:
    snmpEngine.transportDispatcher.closeDispatcher()
    raise 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:58:26.060

你真的需要使用非默认的 ContextEngineId 和 ContextName 吗？如果没有，我建议改用[这个例子](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v3-multiple-users.html)。您可以将自定义 MIB 加载到默认 SnmpEngine 的 MIB 树 (mibBuilder) 中，该树可通过以下调用获得：

```
snmpContext = context.SnmpContext(snmpEngine)
mibBuilder = snmpContext.getMibInstrum().getMibBuilder() 
```

还要确保您允许经理使用`config.addVacmUser()`函数访问您的 OID。

另一个需要意识到的重要事情是，编译的 pysnmp MIB 在其初始状态不包含MIB 变量的*实例*，而只是向管理器提供有关代理内容的提示。因此，要使您的代理生效，您必须将托管对象的*实例*添加到您的 MIB中，这[在另一个示例中进行了说明](http://pysnmp.sourceforge.net/examples/current/v3arch/agent/cmdrsp/v2c-custom-scalar-mib-objects.html)。

# javascript - 为什么 url-encoding 域后的第一个斜杠会破坏 url？

> ID：14631200
> 
> 赞同：5
> 
> 时间：2013-01-31T17:02:08.830
> 
> 标签：javascript, url, hyperlink, urlencode

救命！我发现某种 url 编码方式会破坏链接。对于记录`%2f`表示正斜杠字符：`/`

现在，考虑一下：原始链接：`http://dottech.org/95285/this-is-the-pacific-barreleye-a-fish-with-a-transparent-head-amazing-photo-of-the-day`

javascript ( `encodeURIComponent`) urlencoded 链接：`http://dottech.org%2f95285%2fthis-is-the-pacific-barreleye-a-fish-with-a-transparent-head-amazing-photo-of-the-day`

现在，如果您将编码的链接粘贴到浏览器的地址栏中，它就会损坏（Firefox、Chrome、IE）。

但是，如果您不对**第一个**正斜杠进行 url 编码，它可以完美地工作：'`http://dottech.org/95285%2fthis-is-the-pacific-barreleye-a-fish-with-a-transparent-head-amazing-photo-of-the-day`

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T03:13:51.260

是`/`保留字符。它*不*等于`%2f`. 如果您需要*没有*定义含义的斜线，您将使用编码形式。

请参阅[RFC 3986：“保留字符”](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)：

> 保留字符的目的是提供一组可与 URI 中的其他数据区分开来的定界字符。在用相应的百分比编码八位字节替换保留字符方面不同的 URI 是不等价的。对保留字符进行百分比编码，或对与保留字符相对应的百分比编码八位字节进行解码，将改变大多数应用程序解释 URI 的方式。

如果您不使用`/`第二个斜杠的保留字符，则提及 URL 仍然有效的原因：他们的 CMS 只是在 URL 中查找 ID 部分。因此，您可以在 URL 中添加任何您想要的内容，例如以下内容应该仍然有效：

```
http://dottech.org/95285/hey-this-URL-got-featured-at-stackoverflow 
```

（但是，它似乎仍然必须是`/`或`%2f`在他们的情况下。）

如果您尝试使用 Wikipedia 文章，它会重定向到首页：

```
http://en.wikipedia.org/wiki%2fStack_Overflow 
```

# linux - rhel 5.5上的tomcat 7启动错误

> ID：14631202
> 
> 赞同：1
> 
> 时间：2013-01-31T17:02:14.567
> 
> 标签：linux, tomcat, redhat

我正在尝试在 red hat 5.5 上设置 tomcat 7.0.35。

当我尝试启动 tomcat 时，在 catalina.out 中出现此错误

 `````
WARNING: error instantiating 'org.apache.juli.ClassLoaderLogManager' referenced by java.util.logging.manager, class not found
java.lang.ClassNotFoundException: org.apache.juli.ClassLoaderLogManager not found
   <<No stacktrace available>>
WARNING: error instantiating '1catalina.org.apache.juli.FileHandler,' referenced by handlers, class not found
java.lang.ClassNotFoundException: 1catalina.org.apache.juli.FileHandler,
   <<No stacktrace available>>
Exception during runtime initialization
java.lang.ExceptionInInitializerError
   <<No stacktrace available>>
Caused by: java.lang.NullPointerException
   <<No stacktrace available>> 
````  `我正在使用 JDK 1.7.0_01 并设置了 JAVA_HOME 和 PATH

我对tomcat 6有同样的错误

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:27:42.737

*   安装完整，兼容`JDK from Oracle (SUN) or IBM`
*   将`JAVA_HOME`环境变量设置为兼容 JDK 的根目录

> $`JAVA_HOME=/usr/java/jdk1.6.0_01`
> 
> $`export JAVA_HOME`

*   将兼容的 JDK 的 bin 目录放在`PATH` 环境变量的前面。

> `$ PATH=$JAVA_HOME/bin:$PATH`
> 
> `$ export PATH`

*   找到不兼容的 JDK 的 java 可执行文件，通常 `/usr/bin/java`并将其移开，如下所示：

> $`cd /usr/java`
> 
> $`mv java java.moved`

*   然后，检查以确保您的 java 可执行文件指向您已安装的 JDK：

> `$ which java`
> 
> `/usr/java/jdk1.6.0_01/bin/java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T09:46:12.360

我有同样的问题，我通过指定正确的 JRE_HOME 解决了它。基本上我使 JRE_HOME 与 JAVA_HOME 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-30T18:54:14.767

在 catalina.sh 中包含以下属性

-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager``

# ios - 在 Xcode 中查找未使用的文件

> ID：14631204
> 
> 赞同：21
> 
> 时间：2013-01-31T17:02:16.227
> 
> 标签：ios, xcode

我最近开始开发一个新应用程序，它基本上是我之前制作的应用程序的副本，只是做了一些更改。为了制作这个新应用，我复制了旧应用并删除了一些不需要的东西。

我想知道，有没有办法告诉 Xcode 中使用了哪些类文件？或有关如何查找未使用文件的任何提示？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T19:49:37.670

Xcode 中没有内置任何这样的功能，但是未使用的类/文件等问题并不像人们想象的那么简单。

人们创建了脚本来尝试确定未使用的文件。我使用了[位于此处的脚本](https://github.com/arun80/xcodeutils)，它搜索您的所有源文件，并尝试配对资源文件。该脚本还尝试检查项目中未包含的源文件。

它不那么微不足道的原因是 Obj-C 是一种非常动态的语言。很多事情都是在运行时确定的。因此，有时很难静态地找出未使用的文件。例如，可以根据用户输入动态确定图像名称。

我不知道您的应用程序有多大，但您可以尝试使用依赖图，并检查孤儿类。有关更多信息，请参阅[此博客文章。](http://maniacdev.com/2011/12/tool-objective-c-dependency-graphing-script-for-easily-improving-program-design/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-09T08:00:30.360

Jetbrains的[AppCode](http://www.jetbrains.com/objc/) IDE 有一些非常不错的代码检查功能。它可以指出未使用的类和其他资源，并声称完全兼容 Xcode。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-18T06:55:26.453

查看有用的工具。用于检查 Xcode 项目中未使用资源的 Mac 应用程序 [http://jeffhodnett.github.io/Unused/](http://jeffhodnett.github.io/Unused/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-28T07:59:00.110

此工具查找未使用的导入/类：[fui](https://github.com/dblock/fui)。

从自述文件页面：

> 查找未使用的 Objective-C 导入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-28T00:09:49.227

另请参阅此 shell 脚本[http://mfaizanshaikh.wordpress.com/2012/12/17/how-to-remove-unused-images-from-xcode-project/](http://mfaizanshaikh.wordpress.com/2012/12/17/how-to-remove-unused-images-from-xcode-project/)

基本上，下面的 shell 脚本会查找`png`项目中未在任何文件中使用的所有`xib`文件。当然，如果您`png`以其他方式使用过该文件（故事板、加载代码），此脚本仍会将它们显示为未使用。
作为参考，我也将脚本粘贴在这里：

```
#!/bin/sh
PROJ=`find . -name '*.xib' -o -name '*.[mh]'`

for png in `find . -name '*.png'`
do
    name=`basename $png`
    if ! grep -q $name $PROJ; then
        echo "$png is not referenced"
    fi
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-15T07:49:34.117

Martiancraft 有一个名为 Slender 的应用程序，可以很好地推荐可能未使用的图像。

[http://martiancraft.com/products/slender.html](http://martiancraft.com/products/slender.html)

我相信 Faux Pas 对类文件做了类似的事情，但我会检查一下。该应用程序还会查找未使用的方法、翻译和资源。

[http://fauxpasapp.com/rules/#rule-UnusedResource](http://fauxpasapp.com/rules/#rule-UnusedResource)

我最近没有使用过这两个应用程序，但我记得以前对这两个应用程序印象深刻。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-27T09:06:19.027

我今天花了很多时间来寻找工具，这在几个月前帮助了我很多。这里是： [https ://github.com/peripheryapp/periphery](https://github.com/peripheryapp/periphery)

它可以在 Swift 代码中找到未使用的类、函数、属性等。

PS 它在 Github 上有超过 3000 颗星。所以奇怪的是这里没有列出。

# jquery - 同位素无限滚动在第 2 页上丢失漂亮照片 jquery

> ID：14631207
> 
> 赞同：1
> 
> 时间：2013-01-31T17:02:24.050
> 
> 标签：jquery, prettyphoto

我正在将同位素无限滚动与画廊一起使用，我在第 1 页上的 prettyPhoto 工作正常，但是一旦加载第 2 页，prettyPhoto 就无法正常工作。有谁知道我如何在第 2 页调用 jquery。如果我将第 2 页视为独立页面，prettyPhoto 可以正常工作。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:13:49.070

PrettyPhoto 需要一些在加载文档时执行的初始化代码，并对 DOM 中的适当元素发挥作用。当同位素无限滚动将更多内容从后续页面拉入 DOM 时，您将不会获得文档就绪事件，因此 PrettyPhoto 不会被告知对新内容执行其操作。

您需要将 PrettyPhoto 初始化代码包装在一个函数中，并在 document.ready 和拉入新内容时调用该函数。Isotope 允许您指定在拉入新项目时执行的函数，以便您可以调用那里的 PrettyPhoto 代码。

# ios - Fetch 从一对多关系对象中不返回任何内容

> ID：14631211
> 
> 赞同：0
> 
> 时间：2013-01-31T17:02:33.507
> 
> 标签：ios, core-data, one-to-many

我在以下关系中设置了两个对象：

新闻 <->> 链接

链接包含两个属性，一个是 URL，另一个是一些关联的文本。我最初创建了 News 并用信息填充它：

```
NSManagedObject *newsData = [NSEntityDescription
                                         insertNewObjectForEntityForName:@"News"
                                         inManagedObjectContext:context];
        [newsData setValue:[object objectForKey:@"username"] forKey:@"username"];
        [newsData setValue:message forKey:@"content"];
        [newsData setValue:[object objectForKey:@"when"] forKey:@"date"];
        [newsData setValue:imgUrl forKey:@"img"];

        NSMutableSet *links = [launchTicker mutableSetValueForKey:@"links"]; 
```

然后在 for 循环中，我创建了一个链接：

```
NSManagedObject *linkInfo = [NSEntityDescription
                                                          insertNewObjectForEntityForName:@"Link"
                                                          inManagedObjectContext:context];
                    [linkInfo setValue:[object objectForKey:@"id"] forKey:@"id"];
                    [linkInfo setValue:[[item firstChild] content] forKey:@"text"];
                    [linkInfo setValue:[[item attributes] valueForKey:@"href"] forKey:@"url"];
                    [links addObject:linkInfo]; 
```

在 for 循环完成后，我将创建的一组 Link 放入 News 对象：

```
[newsData setValue:links forKey:@"links"]; 
```

当我获取数据时，我可以很好地获取新闻的信息，但是当我获取链接时，我什么也得不到：

```
for (NSManagedObject *info in fetchedObjects) {

    [fetchRequest setReturnsObjectsAsFaults:NO];
    [fetchRequest setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"links", nil]];

    NSMutableArray *url = [[NSMutableArray alloc] init];
    NSMutableArray *text = [[NSMutableArray alloc] init];

    NSSet* links = [info valueForKey:@"links"];
    NSArray *arrayLinks = [links allObjects];

    for(NSManagedObject *link in arrayLinks) {
        [url addObject:[link valueForKeyPath:@"url"]];
        [text addObject:[link valueForKeyPath:@"text"]];
    } 
```

当我尝试访问我的相关对象时，任何人都可以就我为什么返回 0 个对象提供他们的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:35:25.750

为什么不直接使用

```
NSSet *setOfLinks = newsObject.links; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:12:49.370

我用以下代码解决了它：

```
NSEntityDescription *linkEntity = [NSEntityDescription entityForName:@"Link"inManagedObjectContext:context]; 
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY id == %@", [info valueForKey:@"id"]]; 
[fetchRequest setEntity:linkEntity]; 
[fetchRequest setPredicate:predicate]; 
NSArray *results = [context executeFetchRequest:fetchRequest error:&error]; 
```

# python - QTableView，经过修改

> ID：14631213
> 
> 赞同：0
> 
> 时间：2013-01-31T17:02:36.547
> 
> 标签：python, pyqt

我的程序有一个 QTableView，它显示来自 sqlite 数据库的数据。由于我的程序将用于对视频文件进行排序，而不是太多，我修改了模型的 select 方法，将所有数据库加载到内存中，而不是 255 个条目（默认情况下）。它运作良好，但是：

我还有一个个人标题，我可以单击它以按修改日期、姓名和投票对条目进行排序。让我们承认，我通过修改数据对数据进行排序，而没有尝试修改任何内容：它有效，所有内容都已排序。但是如果修改一个单元格，例如名称，会发生以下情况：

*   该程序加载 255 个条目，按日期对它们进行排序，然后显示它们
*   它加载 255 个其他条目，按日期对它们进行排序，然后显示它们
*   ETC

修改后，再次尝试按数据排序，一切正常。但在每次修改时，程序只加载 255 个条目。基本上，我错过了一个回调（在您更新某些内容后被调用的回调）。

我不知道我是否必须修复视图或模型。你有想法吗 ？

在我的应用程序中，我可以使用视图的一些功能来修复它：

```
column_sorted = self.tableau.horizontalHeader().sortIndicatorSection()
order = self.tableau.horizontalHeader().sortIndicatorOrder()

if column_sorted is not None:
    self.tableau.sortByColumn(column_sorted, order)
else:
    pass 
```

但我更喜欢更通用的方法。

这是对我的数据库进行修改的一段代码：

```
def voter(self):

    self.bdd.close()
    liste.vote(self.current_video)
    self.bdd.open()
    self.modele.select() 
```

但是每个修改数据库的函数都会出现问题。我想补充一点，我使用的是 QSortProxyFilter：

```
self.proxy = QtGui.QSortFilterProxyModel()
self.proxy.setSourceModel(self.modele) 
```

对不起，如果我不清楚，但很难描述这个错误，我的应用程序开始变大（~3000 行）。

# security - 加密例程将 8 位字段加密为 16 个（或更多）字符

> ID：14631214
> 
> 赞同：0
> 
> 时间：2013-01-31T17:02:37.263
> 
> 标签：security, encryption

我有一个 8 位字段，我想将它加密（我不担心解密它）成一个 16 个字符（或更多）的字段。我需要这个，所以我可以使用加密字段发送给报告机构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:18:42.667

由于您不需要解密，因此可以（不可逆地）对其进行哈希处理，而不是使用加密。在 PHP 中，您可以使用[散列](http://www.php.net/manual/en/function.hash.php)和`fnv164`散列算法来执行此操作，该算法返回 16 个字符的散列。

此外，还有其他几种哈希算法会产生超过 16 个字符。您可以使用[hash_algos](http://php.net/manual/en/function.hash-algos.php)查看系统上可用的内容。[这是](https://stackoverflow.com/a/8330160/1024808)一个执行此操作的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:34:50.817

在不太了解这种“加密”背后的目的的情况下，这就是我的建议（基于一些关于您的目标的保守和安全假设）：

1.  选择一个随机数。调用它`R`。该数字最好至少为 32 位长。
2.  对于您拥有的每个 8 位标识符，形成字符串“ `<digits of R><8 digit identifier>`”。
3.  使用一些加密安全的散列算法来获取在步骤 2 中形成的字符串的散列。
4.  将步骤 3 中的哈希格式化为十六进制字符串。
5.  使用步骤 4 中的十六进制字符串作为向“报告机构”报告的标识符。

这种方案的好处是，只要您记住该值`R`，您就可以始终将每个 8 位标识符映射到相同的十六进制字符标识符。这在您的应用程序中可能很重要，也可能不重要。

当然，此方案假定您永远不需要执行反向映射，并且该机构不想解密标识符。换句话说，它假设您的目标只是不给代理机构标识符 I，而是给代理机构一个等效标识符 I'。

# html - 替代 HTML 或 css 中的 colspan

> ID：14631222
> 
> 赞同：1
> 
> 时间：2013-01-31T17:03:24.147
> 
> 标签：html

我想知道是否可以对 HTML 中的 colspan 使用任何替代方法。我有一张带 colspan 的桌子。该表转到后端进行处理以转换为 pdf。但是，当我尝试转换为 pdf 时，它无法按预期处理 colspan。我想知道是否有任何解决方法？

谢谢。

# android - 在谷歌地图上绘制文本不再可能？

> ID：14631223
> 
> 赞同：6
> 
> 时间：2013-01-31T17:03:27.107
> 
> 标签：android, google-maps-android-api-2

我正在将 Android 应用程序从版本 1 升级到 android google maps API 的版本 2。在我的版本 1 代码中，我能够通过覆盖 draw() 方法直接在 ItemizedOverlay 子类的地图上绘制文本，如下所示。我要绘制的文本是动态的，是我想在每个地图标记旁边显示的附加文本项，因此当绘制/删除不同的符号时，将频繁添加/删除文本。

```
@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
    if (!shadow) {              
            canvas.drawText("some text", (float) point.x + TextOffsetX , (float) point.y + TextOffsetY, m_paint);
     }

    return super.draw(canvas, mapView, shadow, when);
} 
```

但是，这在 API 的第 2 版中似乎是不可能的。这并不是 ItemizedOverlays 的真正概念，并且没有任何东西可以被子类化。有什么方法可以在新 API 版本的 GoogleMap 上绘制文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T12:10:28.407

我有同样的问题，试图从 v1 升级到 v2。最后我使用了一个标记，用文本创建了一个位图，并将其用作标记的图标。

首先，您必须使用文本创建 de Bitmap。*注意：使用文本属性（颜色、字体、文本对齐...）配置paintText*

```
Rect boundsText = new Rect();
paintText.getTextBounds(strText, 0, strText.length(), boundsText);
Bitmap.Config conf = Bitmap.Config.ARGB_8888;
Bitmap bmpText = Bitmap.createBitmap(boundsText.width(), boundsText.height(), conf); 
```

然后，使用 Canvas 绘制文本。用画布尺寸修复文本有点疯狂。

```
Canvas canvasText = new Canvas(bmpText);
canvasText.drawText(strText, canvasText.getWidth() / 2, canvasText.getHeight(), paintText); 
```

最后在 MarkerOption 中使用 Bitmap 创建图标

```
MarkerOptions markerOptions = new MarkerOptions()
    .position(latlngMarker)
    .icon(BitmapDescriptorFactory.fromBitmap(bmpText))
    .anchor(0.5f, 1); 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-05T13:32:00.033

您可以使用以下代码从视图创建标记：

```
public static Bitmap createDrawableFromView(Context context, View view) {
    DisplayMetrics displayMetrics = new DisplayMetrics();
    ((Activity) context).getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    view.measure(displayMetrics.widthPixels, displayMetrics.heightPixels);
    view.layout(0, 0, displayMetrics.widthPixels, displayMetrics.heightPixels);
    view.buildDrawingCache();
    Bitmap bitmap = Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(), Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);

    return bitmap;
} 
```

来源： http: [//www.nasc.fr/android/android-using-layout-as-custom-marker-on-google-map-api/](http://www.nasc.fr/android/android-using-layout-as-custom-marker-on-google-map-api/)

编辑：如果您使用多个标记，请确保您不为每个标记执行 DisplayMetrics 并查看设置内容（位图位图上方的所有内容 =.....）。这会大大降低您的应用程序的速度。

# c - if-ifelse-else 语句中的两个条件如何起作用？

> ID：14631227
> 
> 赞同：4
> 
> 时间：2013-01-31T17:03:38.963
> 
> 标签：c, if-statement

我的教授在 C 中展示了以下示例：

```
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>

int main() {
   pid_t pid;

   /* fork another process */
   pid = fork();
   if (pid < 0) { /* error occurred */
         fprintf(stderr, "Fork Failed");
         return 1;
   }
   else if (pid == 0) { /* child process */
         execlp("/bin/ls", "ls", NULL);
   }
   else { /* parent process */
        /* parent will wait for the child */
        wait (NULL);
        printf("Child Completed its execution\n");
   }

return 0;
} 
```

我编译并运行它。我在这段代码中看到了一个奇怪的行为：

打印“ls”程序/命令的结果，它在 else if 条件中，但也打印了字符串“Child Completed its execution\n”，它在 else 中。

这不是一种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:05:08.030

不，你把它分叉了。有两个进程正在运行。一个报告了 ls，另一个报告了 printf()。

具体来说，子进程/分叉进程执行 /bin/ls，父进程调用 printf()，即您看到的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:05:32.320

这是因为`fork`创建了一个子进程，它从代码中的同一点继续执行，但`pid`设置为 0。您看到的是父进程执行该`printf`行，而子进程正在执行`ls`命令。

# java - FacebookSDK 示例示例无法在 Android 手机上运行

> ID：14631228
> 
> 赞同：4
> 
> 时间：2013-01-31T17:03:39.233
> 
> 标签：java, android, facebook-authentication, facebook-android-sdk

无论是我还是我的手机或我的 Facebook 帐户问题。我今天下载了 Faecbook SDK。以为我今天将从示例文件夹中运行几个示例应用程序。我尝试在模拟器中运行`SessionLoginSample`示例。`Scrumptious example`两者都在那里工作正常。我可以使用 Facebook 登录并转移到其他意图。

但是，一旦我在我的 Android 手机 (S3) 上安装了该应用程序。没有一个应用程序在我的手机上运行。我在手机上看到 Facebook 登录屏幕，通过提供我的用户名和密码成功登录后，我总是得到 Facebook 已停止工作。然后我得到`Scrumptious`应用程序已强制关闭。我没有对代码进行任何更改。

一段时间后，我的控制台上出现异常，因为-

```
01-30 11:06:08.400: E/AndroidRuntime(7463): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=null} to activity {com.facebook.samples.sessionlogin/com.facebook.LoginActivity}: java.lang.NullPointerException 
```

有没有人也遇到过类似的问题？如果是的话，有人可以在这里帮助我吗？有什么方法可以将这个问题也发布到 Facebook 开发者网站上吗？

**注意：-**在我的 Android 手机上安装应用程序之前，我需要更改代码或某些键吗？我不确定。如果它在模拟器中运行，它也应该在 Android 手机上运行。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:16:04.090

我认为这个问题与 Android SDK 的一个已知错误有关。
我建议关闭设备*设置的**开发人员选项中的***不保留活动**选项。就我而言，它帮助我解决了这个问题。

 **[您可以在此页面](http://developers.facebook.com/bugs/517427168282297)上找到有关该错误的更多信息。**

# c# - T4 引擎无法识别当前项目命名空间

> ID：14631233
> 
> 赞同：2
> 
> 时间：2013-01-31T17:04:01.880
> 
> 标签：c#, .net, entity-framework-5, t4, self-reference

我正在使用 VS 2010 (C#) T4 模板来生成代码。

我需要遍历我的项目中的所有类型，将实体 poco 类列入候选名单并生成包装器。问题是，项目名称空间未被识别。

这是解决方案的结构：

```
namespace MySolution.Entities
{
    public class Employee { ... }
    public class Department { ... }
}

// Seperate project referenceing MySolution.Entities.
namespace MySolution.Database
{
    public partial class Context { ... }

    // Should generate Context.cs as a partial class with after iterating Syste.Types available in MySolution.Entities.
    Context.tt
} 
```

这是文本模板：

```
<#@ template language="C#" #>
<#@ Output Extension=".cs" #>

namespace MySolution.Database
{
    public partial class Context:
        System.Data.Entity.DbContext
    {
<#
System.Type [] types = typeof(MySolution.Entities).Assembly.GetTypes();
for (int i=0; i < types.Count; i++)
#>
        public <#= types[i].Name; #> <#= types[i].Name; #> { get; set; }
    }
} 
```

上面的代码生成错误：找不到类型或命名空间“MySolution”。您是否缺少 using 指令或程序集引用？然后我将以下代码行包含在程序集中：

```
<#@ Assembly Name="..\MySolution.Entities\bin\x86\Release\MySolution.Entities.dll" #> 
```

现在它给了我一个不同的错误：主机在尝试解析程序集引用“..\..\..TrafficMonitor.Core\bin\x86\Release\TrafficMonitor.Library.dll”时抛出异常。转换将不会运行。引发了以下异常：System.IO.FileLoadException：给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）

关于如何克服这个限制的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:38:23.087

该错误是因为 T4 模板处理器无法找到您的程序集。

如果您在 T4 模板的 Assembly 指令中使用程序集的完整路径，它应该会找到该程序集。使用完整路径的更好方法是使用 Visual Studio 宏变量之一，例如 $(SolutionDir)，它会在执行 T4 模板时展开。

```
<#@ Assembly Name="$(SolutionDir)MySolution.Entities\bin\x86\Release\MySolution.Entities.dll" #> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:26:15.410

您不能静态引用尚未编译的程序集（请记住，T4 在编译程序集之前运行）有一篇不错的文章，您可以参考[How to use T4 to generate Decorator classes](http://www.olegsych.com/2007/12/how-to-use-t4-to-generate-decorator-classes/)

您也不应该通过 引用程序集`<#@ Assembly Name`，因为 T4 将对您已经编译的程序集进行操作，但 T4 在编译之前操作。因此，您的工作流程将是 - 编译应用程序，运行 t4，使用来自 t4 的新源重新编译应用程序。而这在每次更改源代码后，都在运行T4。

# xslt - xslt 2.0 是否适用于主流浏览器

> ID：14631236
> 
> 赞同：1
> 
> 时间：2013-01-31T17:04:25.110
> 
> 标签：xslt

> **可能重复：**
> [哪些浏览器已经支持 XSLT 2.0？](https://stackoverflow.com/questions/6282340/which-browsers-support-xslt-2-0-already)

我正在 xslt 2.0 上进行研究，需要知道它将在哪些浏览器上运行。我尝试广泛查找并找到有关 2.0 与许多浏览器不兼容的旧信息。现在还是这样吗？我查看了“从 XSLT 1.0 升级到 2.0 涉及什么？” 但它没有提到 2.0 目前是否被主流浏览器广泛使用和接受。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T22:53:00.037

主流浏览器都没有将 XSLT 2.0 实现作为标准实现，但 Saxon-CE 产品现在提供了可移植的实现，可以与任何能够运行 Javascript 的浏览器一起使用。

# python - python中的正则表达式模式：InvalidMatch

> ID：14631237
> 
> 赞同：1
> 
> 时间：2013-01-31T17:04:29.567
> 
> 标签：python, regex

我正在尝试在文件列表中找到以下标题并将其替换为我自己的。

```
/*************************************************************************************
 * Company: XXX
 * File Name: myfile1.c
 * Author: MyName
 * Date: 30/12/2011
 * Operating Environment: XXX
 * Compiler with Version Number:
 * Description: This file contains an array which returns a structure having API characteristics.
 * Version:
 ***********************************************************************************/ 
```

基本上我正在尝试编写一个python程序来遍历目录列表并在所有文件中进行字符串替换。以下是我的程序的代码：

```
import sys
import os
import re
correctlicheader = r'''
/* <MY-HEADER>
 *
 */
'''

def changelic():
   startdir = sys.argv[1]
   for root, dirs, files in os.walk(startdir):
      for file in files:
         actualfilename =  os.path.join(root, file)
         print("Reading file: %s" %(actualfilename))
         f = open(actualfilename, 'r')
         read_data = f.read()             
         #try replacing the incorrect header
         p = re.compile("<MY-REGULAREXPRESSION-HERE>")
         changed_data = p.sub(correctlicheader, read_data, 1)
         f.close()
         f= open(actualfilename, 'w')
         f.write(changed_data)
         f.close()
    print("End")

if __name__ == '__main__':
   changelic() 
```

问题是没有得到 ' **MY-REGULAREEXPRESSION-HERE** ' 的权利。我试过

```
p = re.compile("/\*[\*]*\r\n[ *[a-zA-Z0-9:/\.]+\r\n]*\*/") 
```

以及上述的各种排列。但我不断得到

```
matched = p.match(read_data)
None 
```

有什么建议可以替换“MY-REGULAREXPRESSION-HERE”吗？另外，如果没有 open(read-mode)-close-open(write-mode)-write ，有没有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:31:08.397

[http://ostermiller.org/findcomment.html](http://ostermiller.org/findcomment.html)有用于查找 c++ 注释的正则表达式。

更改`<MY-REGULAREXPRESSION-HERE>`为`/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/`将做正确的事情。

我已经在我的机器上运行了你的代码，它确实如预期的那样。

*感谢@Wilduck 的推动。:)*

# javascript - 将字符串传递并返回到 VB.NET Web 方法

> ID：14631238
> 
> 赞同：0
> 
> 时间：2013-01-31T17:04:30.820
> 
> 标签：javascript, ajax, vb.net

我正在尝试使用 AJAX 从 Javascript 向 VB.NET Web 方法发送和返回一个简单的字符串。这是我正在使用的 Javascript/jQuery 脚本：

```
function jQuerySerial() {
//I SET A VARIABLE TO THE STRING I WANT TO PASS INTO MY WEB METHOD
var str = "Hello World";

//AND TRY TO PASS IT INTO MY VB.NET WEB METHOD
$.ajax({
    type: "POST",
    url: "test_WebService.asmx/testWebService",
    data: str,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (e) {
        alert("It worked: " + e);
    },
    error: function (e) {
        alert("There was an error retrieving records: " + e);
    }
});
}//END jQuerySerial 
```

这是非常简单的 VB.net Web 方法。Web 方法除了获取字符串然后将其传回 Javascript 之外什么都不做：

```
 <WebMethod( )> _
Public Function testWebService(str As String) As String
    Return str
End Function 
```

当我尝试运行这个错误：函数触发并返回一条消息说：

```
"There was an error retrieving records: [object Object]" 
```

我在同一个 Web 服务类中有很多很多其他的 Web 方法来操作数据库记录，它们都可以工作。但是，这是我第一次尝试使用 $.ajax 语法编写并将某些内容返回给调用 Javascript，所以我完全不知道这里有什么问题。

任何有关如何使这项工作的建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:18:42.377

看起来这里的问题是当它需要一个 JSON 对象时，您正在将一个简单的字符串传递给 Web 服务。有关 jQuery 和 ASP.NET Web 服务的常见问题（特别是第 2 项），请参阅这篇文章：

[http://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/](http://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/)

# javascript - 读取共享点站点的数据或标签？

> ID：14631239
> 
> 赞同：0
> 
> 时间：2013-01-31T17:04:30.513
> 
> 标签：javascript, sharepoint, sharepoint-2010, sharepoint-2013

大家好！我的问题是我想读取 SP 站点的任何数据。因此，我尝试使用添加到站点的内容编辑器 webart 运行 javascript 代码。我尝试使用：

```
var name = document.getElementById("labelName").value; 
alert(name); 
```

但是警报没有显示我的价值。它总是显示“未定义”。

所以我想问是否可以在 WebPart 中使用 javascript 代码读取标签或其他内容的数据。如果可能的话，我是如何做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:14:14.927

是的，但 id 可能并不完全符合您的预期。

进入该元素所属的列表/库。右键单击列名称。在 IE 中，您将单击属性。

该值的结尾是您想要的。例如：'Percent%5Fx0020%5FComplete'

这是一篇很好的文章

[http://sympmarc.com/2009/12/11/staticname-versus-displayname-on-sharepoint-lists/](http://sympmarc.com/2009/12/11/staticname-versus-displayname-on-sharepoint-lists/)

# java - 基于对象的所有公共 getter 生成哈希的代码 - Java

> ID：14631241
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:04:41.200
> 
> 标签：java, reflection

我有一个应该读取所​​有公共方法（包括超类）并为每个非空属性存储它的 hashCode 的方法。

```
private static String reflect(Object o) {
    StringBuilder key = new StringBuilder();

    try {
        for (Method m : o.getClass().getMethods()) {
            if (m.getName().startsWith("get") || m.getName().startsWith("is")) {
                Object result = m.invoke(o, new Object[]{});
                key.append(result != null ? result.hashCode() : "-");
            }
        }
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    return key.toString();
} 
```

这段代码可以吗，还是我忘记了与我的需求相关的重要内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:09:18.460

我能看到的唯一明显的事情是，如果您使用哈希码来识别对象中的更改，您应该知道[getMethods() 返回的方法的顺序](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getMethods())是“没有任何特定的顺序”，所以不能保证它们将在另一个 JVM 中以相同的顺序返回，甚至从一个调用到另一个调用。

# javascript - 如何用 JavaScript 构建一个数组？

> ID：14631252
> 
> 赞同：0
> 
> 时间：2013-01-31T17:05:21.803
> 
> 标签：javascript, jquery, arrays

我的输出应该是这样的：（例如数据）

```
myArray = [ [otherArray0], [otherArray1], [otherArrayN] ] 
```

我的尝试：

```
var myArray = [];
var num = 50;
for (i=0; i<num;i++)
{

    var a = 0;
    $('#divID .class select[value!=""]').each(function() //get values from a select
    {
        var otherArray+i = []; //each for cycle is a new "sub array"
        otherArray+i[a] = $(this).val(); //store in array the values from select
        a++
     })
} 
```

我想好了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T17:08:02.893

首先

```
otherArray[i] = []; // create a new array 
```

然后

```
otherArray[i][a] = $(this).val(); 
```

但是您的代码可以变得更简单

```
var myArray = [];
var num = 50;
for (i=0; i<num;i++)
{
    myArray.push($.map($('#divID .class select[value!=""]'),function(e){
        return e.val();
    }));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:12:14.957

设置一个空数组`[]`（`push``push`

```
var myArray = [];
for (int i=0; i<50; i++)
{
    var otherArray = [];
    $(/*...*/).each(function()
    {
       var val = /*...*/;
       otherArray.push(val);
    });
    myArray.push(otherArray);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:43:49.730

在很多行之间阅读，我认为这就是你想要的：

```
var myArray = [];
$("#divID .class select").each(function() {
    var subarray = [];
    $("option[value!='']", $(this)).each(function() {
        subarray.push($(this).val());
    });
    myArray.push(subarray);
} 
```

`myArray`然后将包含：

```
[[sel1Opt1, sel1Opt2, sel1Opt3, ...], [sel2Opt1, sel2Opt2, sel3Opt3, ...], ...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:12:59.180

```
var num = 50;
for (i=0; i<num;i++)
{
var myArray[i] = array ();
var a = 0;
$('#divID .class select[value!=""]').each(function() //get values from a select
{
    myArray[i].push( $(this).val()); //store in array the values from select

})
} 
```

# sql - 从oracle sql表中获取祖先

> ID：14631253
> 
> 赞同：1
> 
> 时间：2013-01-31T17:05:26.887
> 
> 标签：sql, oracle

我有一个具有以下结构的表：

```
CHILD_ID | PARENT_ID 
```

两列都是整数。

我正在尝试获取给定“节点”的所有祖先。我有最高的 id，我想选择一个包含所有孩子的 id 的表。

```
CHILD_ID | PARENT_ID
1          2
6          12
2          3
3          4
9          82 
```

寻找祖先为`4`

应该返回

```
ID
3
2
1 
```

这将如何在 oracle 中完成？

可以在没有存储过程的情况下完成吗？

与往常一样，感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:12:58.000

为了满足您的输出期望，查询可能是这样的：

```
-- sample of data
SQL> with t1(CHILD_ID, PARENT_ID) as(
  2    select 1,  2  from dual union all
  3    select 6,  12 from dual union all
  4    select 2,  3  from dual union all
  5    select 3,  4  from dual union all
  6    select 9,  82 from dual
  7  ) -- actual query
  8  select child_id
  9    from t1
 10  start with parent_id = 4
 11  connect by parent_id = prior child_id
 12  ;

  CHILD_ID
----------
         3
         2
         1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:09:45.550

最好的解决方案是做邻接树或嵌套集合树。然后，您可以执行从单个查询返回子树的超快速操作。最糟糕的解决方案是使用游标并逐步浏览记录并尝试通过每个记录的父母进行递归。

嵌套的集合树非常棒，唯一的缺点是它们在更改时需要重新编号。但是，如果您需要计算聚合，例如，它们的速度完全是香蕉。

[嵌套集模型上的维基百科](http://en.wikipedia.org/wiki/Nested_set_model)
[Joe Celko 的解释（优秀）](http://www.ibase.ru/devinfo/DBMSTrees/sqltrees.html)

# java - 在崩溃之间保留数据

> ID：14631258
> 
> 赞同：1
> 
> 时间：2013-01-31T17:05:51.323
> 
> 标签：java

我们将构建一个管理多种类型队列的应用程序。如果应用程序因任何原因崩溃，我正在寻找不丢失数据的最佳方法。我使用“持久”一词进行了一些谷歌搜索，这导致我一遍又一遍地使用 JPA。我对 JPA 有一些经验。我不是在发生崩溃时 Java 的“关闭序列”方面的专家，我想知道持久化队列涉及什么。是否有提供某些此类功能的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:11:00.210

崩溃期间没有一致的“关闭顺序”，这就是为什么它被称为崩溃。有人可以将插头从墙上的插座中拔出，或者不小心通过计算机驾驶一辆怪物卡车。

您最好的选择是使用轻量级嵌入式数据库（例如 Berkeley DB Java 版）来存储您的应用程序状态。当然，如果您的应用程序状态非常大（例如，您有成千上万的并发用户），您可能需要一个更详细的解决方案。

请注意，您仍然不可避免地会丢失一些应用程序状态，基本上是自上次保存以来的所有状态。

# javascript - 如何在javascript中编写操作顺序

> ID：14631259
> 
> 赞同：0
> 
> 时间：2013-01-31T17:05:53.087
> 
> 标签：javascript, operators

我正在做一个课堂项目，我被困在如何编写操作顺序的问题上。导师给了我们这样的信息：

```
 <table class="table">
    <tr>
        <td class="subTitle" colspan="7">
            Order of Operations
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" id="ooo1" value="12">
        </td>
        <td>
            <input type="text" id="ooo2" value="22">
        </td>
        <td>
            <input type="text" id="ooo3" value="378">
        </td>
        <td>
            <input type="text" id="ooo4" value="45">
        </td>
        <td>
            <input type="text" id="ooo5" value="2">
        </td>
        <td>
            =
        </td>
        <td>
            <div id="oooResult">000000000</div>
        </td>
    </tr>
    <tr>
        <td colspan="7" class="buttonTD">
            <input type="button" value="Add First & Third, Subtract   
            Fifth, 
            Multiply by Second, then Divide by Fourth" onclick="">
        </td>
    </tr> 
```

我应该在一个外部 java 脚本文件中进行编程，这样当我打开 HTML 页面并单击按钮时，就会出现答案。他要我们将第一个和第三个数字相加，减去第五个，乘以第二个，然后除以第四个。

这是我的外部 java 脚本文件，其中包含该项目的加法和减法部分。

```
 function Add()
    {
      var firstNum = document.getElementById('add1').value;
      var secondNum = document.getElementById('add2').value;
      var total = parseInt(firstNum) + parseInt(secondNum);
      document.getElementById('addResult').innerHTML = total;
    }
    function Subtract()
    {
      var firstNum = document.getElementById('sub1').value;
      var secondNum = document.getElementById('sub2').value
      var total = parseInt(firstNum) - parseInt(secondNum);
      document.getElementById('subResult').innerHTML = total;
    } 
```

我只需要帮助开始操作顺序，以便我可以完成它。我只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:13:41.003

一些提示：

*   您忘记将第二个参数传递给`parseInt`
*   不要使用 DOM 来存储中间值。从函数中返回它们。
*   所以首先读取输入，然后进行所有计算（如@bfavaretto 建议的那样），然后进行输出。

# gwt - Highcharts - GWT 应用程序中的 Java 导出服务器

> ID：14631263
> 
> 赞同：0
> 
> 时间：2013-01-31T17:06:31.513
> 
> 标签：gwt, highcharts, highstock

我正在处理 HighStock 图表的导出功能的 GWT 应用程序中编写一个 java servlet。我使用了 ExportController 并为 GWT 修改了它。我已将客户端 javascript 上的导出 url 指向这个新的 servlet。我可以看到，当我单击下载 png 时，浏览器对这个新的 servlet 进行了 post 调用，但我在请求中没有得到任何参数。请求参数（svg、选项等）都是空值。有人可以指出我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:53:58.657

实际上，highcharts 导出模块发送一个“multipart/form-data”请求。我试图将参数解析为获取请求。这就是您可以解析 multipart/formdata 请求的方式 -

```
if (!ServletFileUpload.isMultipartContent(req)) {
            throw new ServletException("Not a file upload request");
        }

        ServletFileUpload upload = new ServletFileUpload();
        FileItemIterator iter;

        iter = upload.getItemIterator(req);
        while (iter.hasNext()) {
            FileItemStream item = iter.next();
            InputStream stream = item.openStream();
            if (item.isFormField()) {
                if (item.getFieldName().equalsIgnoreCase("svg")) {
                    svg = Streams.asString(stream);
                } 
```

... ... } }

[https://gist.github.com/4695345](https://gist.github.com/4695345)

# openxml - 使用 MainDocumentPart.GetXDocument 和 MainDocumentPart.Document 在概念上有什么区别？

> ID：14631266
> 
> 赞同：3
> 
> 时间：2013-01-31T17:06:53.313
> 
> 标签：openxml

我正在使用 OpenXML 和[PowerTools for Open XML](http://powertools.codeplex.com/)来处理 MSWord 文档，用于自定义转换（到 HTML）和就地修改（例如创建样式目录）。

我很难理解何时使用 MainDocumentPart.GetXDocument XML 导航方法（由 PowerTools 使用）和 MainDocumentPart.Document（似乎是官方示例）。

我在 XDocument 上使用了 LINQ，但您似乎可以同时使用它。MainDocumentPart.Document 方法似乎更具类型性。

我是否缺少某种强烈的概念差异？我可以在一个中做但在另一个中不能做的事情？固有限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T15:09:36.173

使用 MainDocumentPart.GetXDocument XML 基本上与执行 XDocument.Load(MainDocumentPart.GetStream()) 相同，您将返回一个 XDocument 类型，然后您可以使用命名空间和节点名称遍历该类型。MainDocumentPart.Document 为您提供了一个强类型的对象，您可以使用该对象具有适当的属性并说明对象位置的差异。后者的好处在于它内置了枚举和类型检查，因此您不会破坏文档。我是类型化模型的粉丝，但请记住，CustomXML 包的某些部分是此对象模型中未涵盖的示例，您必须使用 XDocument。

# matlab - matlab中的strcmp函数

> ID：14631270
> 
> 赞同：1
> 
> 时间：2013-01-31T17:07:24.453
> 
> 标签：matlab, strcmp

假设我们有以下存储参与实验的受试者的姓名和性别的元胞数组：

```
Names = { 'Amy' , 'Chris' , 'John' , 'Karin' , 'Juan' };
Gender = { 'Female' , 'Male' , 'Male' , 'Female' , 'Male' }; 
```

假设实验还测量了许多试验的响应时间。我们将此信息存储在以下矩阵中，其中每一列对应一个人，每一行对应于实验中的一个试验：

```
ResponseTimes = [ 2.4 2.2 2.9 2.7 2.7;
                  1.6 1.7 1.9 1.5 1.0;
                  2.1 2.2 0.9 2.5 1.9;
                  1.7 2.4 1.6 2.1 1.4 ]; 
```

如何使用该`strcmp`函数创建一个列出所有男性姓名的 Matlab 命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:42:55.267

你可以试试

```
Names(strcmp(Gender, 'Male')) 
```

这导致

```
ans = 
    'Chris'    'John'    'Juan' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:35:42.070

只是猜测，您可能还需要相应的响应时间：

```
idx = strcmp(Gender, 'Male');
maleNames = Names(idx);
maleResponseTimes = ResponseTimes(:,idx); 
```

对于女性使用`Names(~idx)`和`ResponseTimes(:,~idx)`

# ios - 找出superview的类名

> ID：14631273
> 
> 赞同：1
> 
> 时间：2013-01-31T17:07:33.877
> 
> 标签：ios, objective-c

我的视图控制器 StartViewController 由其他两个视图控制器（RootViewController 或 TelnetAddressbookViewController）之一打开/添加（addSubview）。我试图找出这两个中的哪一个是启动 StartViewController 的那个。

```
NSLog(@"superview %@",self.view.superview.description);
NSLog(@"superview %@",self.superclass);

if ([self.view.superview isKindOfClass:[RootViewController class]]) {

    NSLog(@"launched by RootViewController");

}else if ([self.view.superview isKindOfClass:[TelnetAddressbookViewController class]]) {

    NSLog(@"launched TelnetAddressbookViewController");
}

[self.view removeFromSuperview]; 
```

第一个 NSLOG (self.view.superview.description) 输出：

> 超级视图 UIView: 0x81d6710; 帧 = (0 0; 748 1024); 变换 = [0, 1, -1, 0, 0, 0]; 自动调整大小 = RM+BM；层=>

它的引用是我需要的（0x81d6710），但它的类是 UIViewController 而不是我的自定义视图控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:27:28.543

代替

```
NSLog(@"superview %@",self.view.superview.description); 
```

你要...

```
#import <objc/runtime.h>
NSLog(@"superview %s",class_getName([self.view.superview class]) );
/* or if you want an NSString */
NSLog(@"superview %@", NSStringFromClass([self.view.superview class]) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:30:05.187

如果您搜索视图的控制器，您可能需要这样做：`[self.view.superview nextResponder];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:51:54.683

解开你的问题，我想你想要两件事之一......无论哪种方式，最好的答案似乎都涉及一个代表......

(1) 创建视图控制器的视图控制器 将钩子返回到创建视图控制器的最佳方法是在`StartViewController`. 然后，无论哪个 viewController 创建它都可以将自己设置为委托。然后，`StartViewController`您将获得所需的参考。

(2) 从你所在的视图的角度来看，self.view 的 UIViewController 位于视图层次结构的顶层。然后你试图找出 UIViewController 的子类。

从观点来看：

```
self.window.rootViewController 
```

将为您提供当前屏幕内容的顶级 viewController。

然后你可以检查它的类，例如

```
if ([self.window.rootViewController isKindOfClass:[RootViewController class]]) {

    NSLog(@"superview RootViewController");

}else if ([self.view.rootViewController isKindOfClass:[TelnetAddressbookViewController class]]) {

    NSLog(@"superview TelnetAddressbookViewController");
} 
```

但这变得非常混乱，因为现在您的视图需要知道两个 viewController 类，这会破坏 MVC。

您最好为您的视图创建一个委托，并让各自的视图控制器处理委托方法。

顺便说一句，您不应该将您的类之一称为“RootViewController”，因为它是 UIWindow 属性的名称，因此会引起混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:55:20.943

我最终设置了一个属性，它没有回答原始问题（对不起）。确实应该有一种方法，即使我已经通过评估超级视图的框架来做到这一点。

# perl - 使用 Perl 进行 Kmer 计数

> ID：14631274
> 
> 赞同：2
> 
> 时间：2013-01-31T17:07:32.827
> 
> 标签：perl, bioinformatics

我对 Perl 和脚本非常陌生，但我需要一个代码来进行我的研究。我正在尝试计算存储在 multiFASTA 文件中的 DNA 序列中 11-mers 的频率。通过合并我找到的一些脚本，我写了这个：

```
#!/usr/bin/perl

$k = 11;  @bases = ('A','C','G','T');
@words = @bases; open FILE1, ">kmers.txt" or die $!;
for $i (1..$k-1)  {
   undef @newwords;
   foreach $w (@words)
   {
       foreach $b (@bases)
       {
          push (@newwords,$w.$b);
       }
   }
   undef @words;
   @words = @newwords;  
}
foreach $w (@words) {  
   print FILE1 "$w \n"; 
} 
close FILE1;   
my $input=$ARGV[0]; 
my $output=$ARGV[1];
open(IN,"<$input") || die ("Error opening $input $!"); 
open OUT, ">$output" or die $|; my $line = <IN>;  
print OUT $line; 
while ($line = <IN>) { 
   chomp $line; 
   if ($line=~m/^>/) { 
      print OUT  "\n",$line,"\n"; 
   } else { 
      print OUT $line; 
   } 
} 
print OUT "\n";

chomp $seq; chomp $k;
#obtain all distinct kmers open FILE2, ">out.txt" or die $!;

for $line (@lines) { 
   if ($line=~m/^>/) { next; } 
}
foreach($i=1; length($line) >= $k; $i++)    {   
   $line =~ m/(^.{$k})/;  
   $w{$1}{cnt}++;
   push @{$w{$1}{pos}}, $i;  
   $line= substr($seq, 1, length($line)-1);
   foreach $line (keys %kmers)    {
      print FILE2 "$kmers\n";
   }
   close FILE2; 
   close OUT;    
} 
```

基本上，它读取文件，将所有序列行放在单独文件的一行中，记下所有 11mers 并创建一个“out.txt”文件，我希望他在其中存储具有 11-mer 频率的序列头。这是困难的部分（对我来说）：我如何告诉脚本编写序列标题以及每个序列的 11mer 频率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:47:19.287

在对代码进行了一些修改之后，我产生了这个：

```
use strict;
use warnings;
my $in_file = $ARGV[0];
my $out_tvir = $ARGV[1];
my $k = $ARGV[2];
my %seq_hash; # key = seq_name, value = seq;
{
# redefine the record separator
local $/ = ">";
open IN, "<$in_file";
my $in_line = <IN>; # toss the first record
while ( $in_line = <IN> ) {
    chomp $in_line; # remove the ">" character in the end 
    my ( $seq_name, $seq ) = split( /\n/, $in_line, 2 );
    $seq =~ tr/ \t\n\r//d;    # Remove whitespace
    $seq_hash{$seq_name} = uc $seq;
}
close IN;
}

open OUT, ">$out_file";
open OUT2, ">$out_tvir";
foreach my $seq_name ( sort keys %seq_hash ) {
chomp $k;
%kmers = ();
while (length($seq_hash{$seq_name}) >= $k)
    {
    $seq_hash{$seq_name}=~ m/(^.{$k})/;
    $kmers{$1}++;
    $seq_hash{$seq_name}= substr($seq_hash{$seq_name}, 1,         length($seq_hash{$seq_name})-1);
    }
    $num_kmers = keys %kmers;
$px=();
$logpx=();
my $H=();
foreach $str (keys %kmers)
{
    my $px=$kmers{$str}/$num_kmers;
    $logpx=log($px);
    $H -= $px * log($px);
    if ($H <= 18) {print OUT2 ">$seq_name\t$H\n";}
}
}
close OUT; 
```

...哪种工作，如果我省略最后一个“if（$ H ...”部分，只是让脚本通过列出与每个序列关联的所有 H 值来完成工作。我不知道为什么，尽管。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:32:29.767

user2029917，您在未声明的变量方面遇到了一些问题，这会阻止脚本在`use strict;`打开的情况下运行；我做了一些修改并清理了一下。

```
#!/usr/bin/perl
use strict;
use warnings;

my $in_file = $ARGV[0];
my $out_tvir = $ARGV[1];
my $k = $ARGV[2];

my %seq_hash; # key = seq_name, value = seq;
{
    # redefine the record separator
    local $/ = ">";
    open IN, "<", $in_file or die "Can't open ${in_file}: $!";
    my $in_line = <IN>; # toss the first record
    while ( $in_line = <IN> ) {
        chomp $in_line; # remove the ">" character in the end 
        my ( $seq_name, $seq ) = split( /\n/, $in_line, 2 );
        $seq =~ tr/\t\n\r//d;    # Remove whitespace
        $seq_hash{$seq_name} = uc $seq;
    }
    close IN;
}

open OUT, ">", $out_tvir or die "Can't open ${out_tvir}: $!";
foreach my $seq_name ( sort keys %seq_hash ) {
    chomp $k;
    my %kmers;
    while (length($seq_hash{$seq_name}) >= $k) {
        $seq_hash{$seq_name}=~ m/(^.{$k})/;
        $kmers{$1}++;
        $seq_hash{$seq_name}= substr($seq_hash{$seq_name}, 1, length($seq_hash{$seq_name})-1);
    }
    my $num_kmers = keys %kmers;
    my $px;
    my $logpx;
    my $H;
    foreach my $str (keys %kmers) {
        my $px=$kmers{$str}/$num_kmers;
        $logpx=log($px);
        $H -= $px * log($px);
        if ($H <= 18) {print OUT ">$seq_name\t$H\n";}
    }
}

close OUT;

exit; 
```

它现在应该运行，但我不确定这个脚本是否会产生您想要的输出。例如，对于给定的 k-mer，它将打印它出现的每个 FASTA 条目的 H' 值（无论 FASTA 条目如何，它始终是相同的值，因为它是用总出现次数和总数计算的k-mers)。目前，它不打印所指的是哪个 k-mer。这可以通过将最后一位更改为 来解决`print OUT ">$seq_name\t$str\t$H\n";`，但我不确定这是否是您所追求的行为。如果您可以提供有关所需输出的更多详细信息，我们可能会提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T21:18:56.710

你不需要创建一个中间文件来强制每个序列是一行，你的循环计数 11mers 可以更简单，我不明白你为什么要创建带有所有可能的 11mers 的 kmers.txt，因为你没有'不要使用它。此外，还有许多语法错误和未使用的变量。而且您不需要 substr 的第三个参数。如果您将其关闭，则默认值将结束。

除了这些问题，请注意可能存在 4^11 个可能的 11mer，这几乎是 420 万个可能性。您的定义将是巨大的（取决于您正在分析的序列的长度）。我猜一个典型的基因会超过一千个 11mer，除非你正在分析重复序列。您可能会考虑在定义中仅包含任意数量的最丰富的 11mer（除非您计划以编程方式处理输出 - 但即便如此，有这么长的行可能会有问题）。

您提交的答案有一些额外的意图，这不在您的问题中，但暂时搁置一旁，这就是我将如何编写脚本以在您的序列中包含前 5 个 11mer 频率（任意选择第 5 位的任何关系）。我不会解决其他人建议您的正确编码实践问题 - 但您应该注意这些建议。

```
my $input=$ARGV[0]; 
my $output=$ARGV[1];

my $defline = '';
my $seq = '';
my $topkmers = '';

open(INPUT,$input);
open(OUTPUT,">$output");
select(OUTPUT);

while(<INPUT>)
  {
    chomp;
    if(/^>/)
      {
        if($seq ne '')
          {
            $topkmers = getTopKMers($seq,11,5);
            print("$defline $topkmers\n$seq\n");
          }
        $defline = $_;
        $seq = '';
      }
    else
      {$seq .= $_}
  }
#Take care of the last record
if($seq ne '')
  {
    $topkmers = getKMers($seq);
    print("$defline $topkmers\n$seq\n");
  }

close(INPUT);
close(OUTPUT);

sub getTopKMers
  {
    my $seq = uc($_[0]);
    my $size = $_[1];
    my $top = $_[2] - 1;   #Submit a 0 to get all kmers
    my $hash = {};

    #Create the abundance hash
    for(my $p = 0;$p < (length($seq) - $size);$p++)
      {push(@{$hash->{substr($seq,$p,$size)}},$p}

    #Sort by abundance
    my @sorted = sort {scalar(@{$hash->{$b}}) <=> scalar(@{$hash->{$a}})} keys(%$hash);

    #Get the top few most abundant kmers
    my @toplist = $top > -1 ? @sorted[0..$top] : @sorted;

    #Creates a string like "ATGCATGCCAA[20]=1,2,... CGTAGCTCTAG[18]=6,23,..."
    my $str = join(' ',
                   map {
                        "$_\[" .
                        scalar(@{$hash->{$_}}}) .
                        "]=" .
                        join(',',@{$hash->{$_}})
                       } @toplist);

    return($str);
  } 
```

这可以消除排序并合并几个步骤以使其更高效，但是为了更易于阅读代码，还有一些话要说。

注意：我没有运行此代码，所以请原谅我忽略的任何错误。

# asterisk - 我可以用 Asterisk “取消转移” 2 个现有频道吗？

> ID：14631275
> 
> 赞同：1
> 
> 时间：2013-01-31T17:07:34.313
> 
> 标签：asterisk, transfer, unlink, disconnect

我在转移操作后连接了 2 部手机，现在我想“取消转移”它们并让它们暂停听背景音乐。我试过停车、拨打虚拟号码等。但每次第二部电话（不执行该操作的电话）都会挂断。

我可以在没有电话会议的情况下做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:58:53.587

最后我做到了！@arheops 用他的笔记给了我钥匙。我必须这样做： 用 A 和 B 说话 将两个频道重定向到等待：

```
Action: Redirect    
ActionID: 1234  
Channel: Channel1  
ExtraChannel: Channel2  
Exten: 000000001  
ExtraExten: 000000001  
Context: default  
ExtraContext: default  
Priority: 1  
ExtraPriority: 1 
```

在 extensions.conf 我写了一个名为“on_hold”的“等待”扩展：

```
[on_hold]  
exten =>s,1,Answer()  
exten =>s,2,BackGround(onholdmusic)  
exten =>s,3,goto(on_hold,s,2)  
exten =>h,1,HangUp() 
```

现在 A 和 B 正在听音乐（onholdmusic），那么您可以呼叫 C 并与 C 桥接 B。A 一直等待听音乐，直到完成另一个桥接/挂断/其他操作。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:10:31.337

是的，您可以使用 ami 操作“转移”，它不会将第二个转移到 n+1 个优先级，因此您已经创建了特殊的上下文。

首先阅读此 [http://www.voip-info.org/wiki/view/Asterisk+manager+API](http://www.voip-info.org/wiki/view/Asterisk+manager+API)

之后咨询这个：

[http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Transfer](http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Transfer)

[http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Redirect](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Redirect)

请注意，要在 1.6+ 中同时执行 2 个通道，您必须使用 ExtraChannel 变量。

# sql - 如何计算分组的记录？

> ID：14631277
> 
> 赞同：0
> 
> 时间：2013-01-31T17:07:37.347
> 
> 标签：sql

我想计算满足此查询条件的行数：

```
Select DISTINCT(projects.project_id)
    , projects.project_name
    , CONVERT(char(11), projects.kickoff_date, 102) AS kickoff_date
    , status_phase.status_name
    , eal.eal_abbrv
    , tech_types.tech_name
from projects
INNER JOIN tech_assigned
    ON projects.project_id = tech_assigned.project_id
INNER JOIN tech_types
    ON tech_assigned.tech_id = tech_types.tech_id
inner join status_phase
    on projects.status_phase_id=status_phase.status_phase_id
inner join eal
    on projects.eal_id=eal.eal_id
where status_phase.status_id <= 2 
    order by eal.eal_abbrv 
```

我想要按 eal.eal_name 列分组的计数，但是当我尝试这样做时，我得到了可怕的“列`'projects.project_id'`在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。” 错误信息。我可以使用`Select COUNT(*)`or`COUNT(1)`函数对记录进行计数，但我需要在组内计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:42:04.093

我在 eal.eal_name 列中添加，因为您的查询中没有它。因此，您需要做的是在要为其获取#s 的列上计数（），再次添加该列，然后您需要添加 GROUP BY 子句并添加您选择的每一列。

```
Select DISTINCT(projects.project_id)
, projects.project_name
, count(eal.eal_name)
, eal.eal_name
, CONVERT(char(11), projects.kickoff_date, 102) AS kickoff_date
, status_phase.status_name
, eal.eal_abbrv
, tech_types.tech_name
from projects
INNER JOIN tech_assigned
ON projects.project_id = tech_assigned.project_id
INNER JOIN tech_types
ON tech_assigned.tech_id = tech_types.tech_id
inner join status_phase
on projects.status_phase_id=status_phase.status_phase_id
inner join eal
on projects.eal_id=eal.eal_id
where status_phase.status_id <= 2 
group by projects.project_id
, projects.project_name
, eal.eal_name
, CONVERT(char(11), projects.kickoff_date, 102)
, status_phase.status_name
, eal.eal_abbrv
, tech_types.tech_name
order by eal.eal_abbrv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:46:27.967

尝试使用窗口函数...

像这样...

```
 declare @table table (a int, b int)
    insert into @table
    values (0,0),(0,1),(0,1),(1,2)

    select *
    ,COUNT(*) over () as [count all]
    ,COUNT(*) over (partition by a) as [count as grouped by a]
    ,COUNT(*) over (partition by a,b) as [count as grouped by a and b]
    from @table T 
```

我的结果集是

```
 a   b   count all   count as grouped by a   count as grouped by a and b
    0   0   4           3                       1
    0   1   4           3                       2
    0   1   4           3                       2
    1   2   4           1                       1 
```

在您的查询中应该是

```
 Select DISTINCT(projects.project_id)
                    , count(*) over (partition by eal.eal_name) as [count by eal_name]
        , projects.project_name
        , CONVERT(char(11), projects.kickoff_date, 102) AS kickoff_date
        , status_phase.status_name
        , eal.eal_abbrv
        , tech_types.tech_name
    from projects
    INNER JOIN tech_assigned
        ON projects.project_id = tech_assigned.project_id
    INNER JOIN tech_types
        ON tech_assigned.tech_id = tech_types.tech_id
    inner join status_phase
        on projects.status_phase_id=status_phase.status_phase_id
    inner join eal
        on projects.eal_id=eal.eal_id
    where status_phase.status_id <= 2 
        order by eal.eal_abbrv 
```

# android - android intentfilter 类别的用途

> ID：14631286
> 
> 赞同：1
> 
> 时间：2013-01-31T17:07:59.623
> 
> 标签：android, categories, intentfilter

我从几个来源阅读了有关 IntentFilter 中使用的类别的信息。但是，我似乎无法理解它们的目的是什么，各种类别类型的含义以及它们与动作有何不同。有人可以解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T03:20:13.250

整个意图过滤器机制只是 android 让您告诉系统您的应用程序能够做什么的方式。类别只是该过程的一部分。可以从主屏幕启动的活动将具有“启动器”类别。可以从网络打开文件的活动将具有“可浏览”类别。

有关类别列表，请参阅...

[http://developer.android.com/reference/android/content/Intent.html#CATEGORY_LAUNCHER](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_LAUNCHER)

动作和类别略有不同。我认为操作是您的应用程序可以做什么的特定声明。我认为类别是应用程序功能的广泛声明。

名为 CATEGORY_DEFAULT 的类别对我来说是最令人困惑的（我认为其他所有人也是如此）。android 文档说“活动通常需要支持 CATEGORY_DEFAULT，以便 Context.startActivity() 可以找到它们”。另一个引用是“还要注意此处提供的 DEFAULT 类别：这是 Context.startActivity 方法在未明确指定其组件名称时解析您的活动所必需的。”。我尽量不关注 CATEGORY_DEFAULT 的确切含义，只要记住，如果你想调用 startActivity 来正常工作，你就需要它。

# netbeans - 按名称在 netbeans 文件之间切换

> ID：14631290
> 
> 赞同：0
> 
> 时间：2013-01-31T17:08:12.847
> 
> 标签：netbeans, netbeans-7, netbeans-plugins

Netbeans 或插件中是否有一种方法可以按名称在文件之间切换？例如，输入文件的名称或名称的一部分，并获得一个动态缩小的匹配文件列表？

我想在启用 ido flex-matching 模式的情况下重现 Cx b 的 Emacs 行为，但即使是没有模糊匹配的东西也会受到欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:09:43.450

您可能希望使用可通过以下方式访问的“**转到文件...** ”功能`SHIFT + ALT + O`

它会打开一个框，您可以在其中搜索允许使用通配符按名称搜索的文件。

编辑：在另一个[SO 答案](https://stackoverflow.com/a/10994297/1606729)中找到这个插件[快速打开文件](http://plugins.netbeans.org/plugin/16495/open-file-fast)

# javascript - 使用 jQuery Mobile 和 Cordova 调整 webview 大小时 iPhone 模拟器中的高度错误

> ID：14631292
> 
> 赞同：4
> 
> 时间：2013-01-31T17:08:16.287
> 
> 标签：javascript, iphone, cordova, jquery-mobile

我试图将 AdMob 添加到 Cordova 项目中，所以我在应用加载时修改了 webview 大小。

```
- (void)viewWillAppear:(BOOL)animated
{
    // View defaults to full size.  If you want to customize the view's size, or its subviews (e.g. webView),
    // you can do so here.

    /*add admob*/
    CGSize sizeOfScreen = [[UIScreen mainScreen] bounds].size;
    CGSize sizeOfView = self.view.bounds.size;
    CGRect statusBarFrame = [[UIApplication sharedApplication] statusBarFrame];

    if  (UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
    {
        //landscape view code
        CGPoint origin = CGPointMake(0, sizeOfScreen.width - CGSizeFromGADAdSize(kGADAdSizeSmartBannerLandscape).height-statusBarFrame.size.width);
        bannerView_ = [[[GADBannerView alloc]initWithAdSize:kGADAdSizeSmartBannerLandscape origin:origin] autorelease];
    }else{
        //portrait view code
        CGPoint origin = CGPointMake(0, sizeOfScreen.height - CGSizeFromGADAdSize(kGADAdSizeSmartBannerPortrait).height-statusBarFrame.size.height);
        bannerView_ = [[[GADBannerView alloc]initWithAdSize:kGADAdSizeSmartBannerPortrait origin:origin] autorelease];
    }

    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];
    GADRequest *request = [GADRequest request];

    request.testing = YES;
    [bannerView_ loadRequest:request];

    /*resize webview*/
    CGRect webViewFrame = [ [ UIScreen mainScreen ] applicationFrame ];
    CGRect windowFrame = [ [ UIScreen mainScreen ] bounds ];

    webViewFrame.origin = windowFrame.origin;

    if  (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)){
        webViewFrame.size.height = sizeOfScreen.width-CGSizeFromGADAdSize(kGADAdSizeSmartBannerLandscape).height-statusBarFrame.size.width;
        webViewFrame.size.width = sizeOfScreen.height;

    }else{
        webViewFrame.size.height = windowFrame.size.height-CGSizeFromGADAdSize(kGADAdSizeSmartBannerPortrait).height-statusBarFrame.size.height;
        webViewFrame.size.width = sizeOfScreen.width;
    }

    self.webView.frame = webViewFrame;

    [super viewWillAppear:animated];
} 
```

现在 webview 的大小应该是 320X410。但是，加载时页面底部会有更多大约 10px 的空白块。同样的问题也出现在横向视图中。

这是执行截图。 ![这是执行截图](../Images/20f0b19f2b1729b938b3f280542f2792.png)

仅当 webview 调整大小时才会出现此问题，并且内容超出屏幕没有问题。此问题将出现在 iphone 5.0 5.1 6.0 模拟器中，而不会出现在 Retina 4 英寸纵向视图中，也不会出现在 ipad 模拟器中。

这是html代码：

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8">
    <title>Single page template</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
</head>
<script type="text/javascript">
  $(document).ready(function() {
    alert($(window).height());
    alert($(document).height());
    alert($("body").height());
  });
</script> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Single page</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>This is a single page boilerplate template that you can copy to build your first jQuery Mobile page. Each link or form from here will pull a new page in via Ajax to support the animated page transitions.</p>      
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

配置文件

```
<preference name="KeyboardDisplayRequiresUserAction" value="true" />
<preference name="SuppressesIncrementalRendering" value="false" />
<preference name="UIWebViewBounce" value="false" />
<preference name="TopActivityIndicator" value="gray" />
<preference name="EnableLocation" value="false" />
<preference name="EnableViewportScale" value="false" />
<preference name="AutoHideSplashScreen" value="true" />
<preference name="ShowSplashScreenSpinner" value="false" />
<preference name="MediaPlaybackRequiresUserAction" value="false" />
<preference name="AllowInlineMediaPlayback" value="false" />
<preference name="OpenAllWhitelistURLsInWebView" value="false" />
<preference name="BackupWebStorage" value="cloud" /> 
```

应用程序初始化

```
self.window = [[[UIWindow alloc] initWithFrame:screenBounds] autorelease];
self.window.autoresizesSubviews = YES;
self.viewController = [[[MainViewController alloc] init] autorelease];
self.viewController.useSplashScreen = NO;
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html"; 
```

Cordova 2.3.0 Xcode 4.5.2 jQuery Mobile 1.3.0 beta1, 1.2.0

我应该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:32:31.840

在 html 头中使用 viewport 标签

```
<meta name="viewport" content="user-scalable=yes, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densityDpi=device-dpi" /> 
```

还要确保`EnableViewportScale`桅杆是`true`启用规模。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:14:06.880

提出这个问题的原因是jquery-mobile限制了屏幕的最小高度。纵向屏幕`min-height`为 420px，横向屏幕`min-height`为 300px。当webview高度修改为410px时，底部多了10px左右的空白块。

jquery.mobile-1.2.0.min.css

```
media screen and (orientation: portrait){
  .ui-mobile, .ui-mobile .ui-page {
    min-height: 420px;
  }
}
media screen and (orientation: landscape){
  .ui-mobile, .ui-mobile .ui-page {
    min-height: 300px;
  }
} 
```

覆盖或删除 css 规则可以解决此问题。

```
<html style="min-height:0px"> 
```

或者

```
html{
  min-height: 0px !important; 
} 
```

# c# - 如何从实例化的 POCO 类中检索上下文？

> ID：14631297
> 
> 赞同：0
> 
> 时间：2013-01-31T17:08:41.657
> 
> 标签：c#, ef-code-first, repository-pattern, entity-framework-5

我正在使用`Code-First`和`Entity Framework 5`。`Repository Pattern`

我需要从一些扩展方法中获取上下文，以访问无法通过属性访问的其他实体。

例子：

```
public static class MyClassExtensions
{
    public static void DoSomething(this MyClass mClass)
    {
        // This is what I want to do
        // GetContextSomeWay() is what I need
        // GetRepository is method from my context
        mClass.GetContextSomeWay().GetRepository<SomeRepository>().Where(...);
    }
}

public class MyService
{
    public void DoSomethingOnService(int id)
    {
        MyContext ctx = new MyContext();
        MyClass cl = ctx.GetRepository<MyClass>().Single(c => c.Id == id);
        cl.DoSomething();
    }
} 
```

我想了两个解决方案。

1.  将上下文作为参数传递给扩展方法
2.  `ObjectMaterialized`使用事件为每个实体设置上下文

尽管第一种方法很容易工作，但我不能停止认为这不是一个好的做法。

对于第二个，除了为我的每个类添加一个新属性之外，我想知道这是否会成为性能问题。这是过度关注，还是有效？

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:18:25.533

添加 Unity 并将您的存储库放置在那里可能是一个解决方案。你只有一个容器，里面存放着你需要的东西，充其量是在组合根。

然后，您可以通过 Unity 容器访问它们。

这是一个很好的教程，展示了所需的技术： [Jason Dollinger on MVVM](http://blog.lab49.com/archives/2650)。它主要是关于 MVVM，但也显示了 unity 的用法。

源代码可在此处获得： [MVVM Demo 客户端源代码](http://blog.lab49.com/archives/2689)

以下是有关这些的更多信息：

[统一](http://unity.codeplex.com/)

[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)

# mysql - MySQL，我如何在 group_concat 上分组？

> ID：14631300
> 
> 赞同：1
> 
> 时间：2013-01-31T17:08:54.793
> 
> 标签：mysql, group-concat

这是我当前的查询（为简单起见，替换了机密数据并删除了 where 子句）：

```
select a.id, group_concat(v.value) from asset a, values v where a.id=v.id group by a.case_id; 
```

当前结果显示为：

a.id v.value
123 a,b
234 a
456 a,b,c
789 d,e
237 a

我想要它做的是分组并计算group_concat的结果，所以它应该看起来像：

v.value 计数
a,b 1
a 2
a,b,c 1
d,e 1

我尝试对我提供给 group_concat 的字段名称进行分组，但它一直在说“无法按“名称”分组

我必须直接在查询中而不是在代码中执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:13:55.280

```
SELECT gc_values
     , COUNT(*)
  FROM 
     ( SELECT a.id
            , GROUP_CONCAT(v.value) gc_values
         FROM asset a
         JOIN `values` v 
           ON v.id = a.id
        GROUP
           BY a.id
     ) x
 GROUP
    BY gc_values; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:15:23.867

你可以这样做：

```
select grouped_values, count(*) from [subselect aliasing group_concat] group by grouped_values 
```

# matlab - 如何在matlab中的整个可能范围内生成均匀分布的随机浮点数

> ID：14631303
> 
> 赞同：2
> 
> 时间：2013-01-31T17:08:59.127
> 
> 标签：matlab, random, floating-point, numbers

我正在尝试在 MATLAB 中以单精度生成一组均匀分布的浮点值。

我想生成 +/- (2-2^-23)*2^127 范围内的所有数字，它表示基于 IEEE-754 标准的可能 32 位浮点数的范围。问题是只生成了大数量级的数字，我希望也包括小幅度的数字（接近并包括 0）。如果我们取所有生成的数字的绝对值然后找到最小值（我已经复制了代码下面的输出），就会看到这一点。

到目前为止，我在 MATLAB 中有这段代码：

```
numtogenerate = 20000;

% Preallocate for speed
generatednumber(numtogenerate) = 0;

for i = 1:numtogenerate
   generatednumber(i) =  rand*(2-2^-23)*2^127*2 - 2^127*(2-2^-23); 
end

minimum = min(generatednumber)
smallest = min(abs(generatednumber))
maximum = max(generatednumber)

hist(generatednumber) 
```

这是输出：

```
minimum =

 -3.4026e+038

smallest =

  8.4046e+033

maximum =

  3.4027e+038 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:01:56.760

（以上帝和小青苹果的名义，你为什么要循环执行此操作？）

我的观点是，使用 MATLAB 的功能来实现。学习使用向量和数组。将操作应用于整个数字数组。这就是像 MATLAB 这样的工具的闪耀之处。在您这样做之前，您还不如使用较低级别的语言，但没有使用该较低级别工具获得的速度优势。

好吧，吐槽一下，那么我们如何解决这个问题呢？

使用三个不同的随机值生成每个数字。

1.  随机符号
2.  随机指数
3.  随机尾数

使用矢量操作完成所有操作。

```
numtogenerate = 20000;

% the sign
S = (rand(numtogenerate,1) < 0.5)*2 - 1;

% The exponent
E = floor(rand(numtogenerate,1)*256) - 128;

% The mantissa
M = rand(numtogenerate,1)*2 - 2^-23;

% bring it all together
R = S.*M.*2.^E; 
```

它们是否涵盖整个范围？似乎是这样。

```
min(abs(R))
ans =
      7.44202895026248e-41

max(R)
ans =
      3.17337113940593e+38

min(R)
ans =
      -3.3810631675676e+38 
```

假设我得到了每个部分的正确范围，这基本上应该在所需范围内生成每个可能的值。

顺便说一句，这些不是均匀分布的数字，至少不是该术语通常在数学中应用的方式。

# python - 单元测试 GAE Blobstore（带鼻子）

> ID：14631306
> 
> 赞同：1
> 
> 时间：2013-01-31T17:09:05.040
> 
> 标签：python, google-app-engine

我们使用nose 和nose-gae 对我们的控制器和模型进行单元测试。我们现在有代码可以访问 blob 存储和文件 API。由于缺乏测试代理/模拟，我们很难测试这些。有没有对这些服务进行单元测试的好方法，或者缺少单元测试有没有办法对这些 API 进行自动化验收测试？TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T19:11:34.527

为 blobstorage 测试尝试这样的事情：

```
from google.appengine.ext import testbed
from google.appengine.api.blobstore import file_blob_storage

testbed.Testbed()
testbed._blob_storage = file_blob_storage.FileBlobStorage('/tmp/', 'testing')
testbed.init_blobstore_stub()
testbed.init_files_stub() 
```

在我的测试中效果很好（虽然我不使用鼻子，但我使用 webtest）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T22:20:29.973

我有同样的问题，所以我研究了鼻子代码，然后研究了实际的测试平台代码。

您需要做的就是设置`nosegae_blobstore = True`您设置所有其他存根的位置。这将设置一个 dict 支持的 blobstore 存根。

# c# - 更新实体框架 6 中的多对多导航属性，未保存更改

> ID：14631309
> 
> 赞同：9
> 
> 时间：2013-01-31T17:09:16.633
> 
> 标签：c#, .net, sql-server, database, entity-framework

我已经把头发拉出来大约 2 天了，因为每当我向现有实体添加多对多实体时，我根本无法让 EF 保存更改。

我的结构很简单：

*   我有一个名为 的表`Person`，它有一个 ID（主要、身份）和一些其他字符串字段

*   `Keyword`使用 ID（Primary，identity）和字符串字段调用的表`Value`

*   and a `PersonKeywordRelation`, with a `PersonId`, and a`KeywordId`字段

当我生成了我的实体（首先是数据库）时，我得到了一个`Person`带有`ICollection<Keyword>`- 一切都很好的类，可以按预期工作。

`Person`当我尝试使用修改后的关键字列表保存现有的 时，就会出现问题。只保存标量属性（字符串），而不是我的关键字！

*   我试过禁用延迟加载，没有效果。
*   我尝试再次从数据库中加载每个单独的关键字，但没有效果。
*   我尝试将所有关键字加载到上下文中以查看这是否有助于 EF 检测更改，但没有。

我很确定我不是唯一一个遇到这个问题的人，（事实上我完全确定，因为我已经在这里看到了几个关于同一主题的问题，但我无法找到一个有效的答案。 ..)，主要用于旧版本的 EF，这是我为什么开始另一个问题的另一个很好的理由：没有任何改变可以解决这个问题吗？

这是我的代码，用于更新（和创建）人员。您会注意到我尝试相应地进行 EF 保存更改。

```
 public void SavePersons(IList<Person> persons)
    {
        // Create a EF Context
        using (var ctx = new MyDbEntities())
        {
            foreach (var person in persons)
            {
                // Attach
                ctx.Persons.Attach(person);

                // Insert or update?
                ctx.Entry(person).State = person.Id == 0 ? EntityState.Added : EntityState.Modified;

                // Get current keywords before clearing from entity
                var keywords = new List<Keyword>(person.Keywords);

                // Clear keywords from entity, so we can add fresh ones, hopefully
                // EF will have an easier time handling this..
                person.Keywords.Clear();

                // Add keywords
                keywords.ForEach(kw =>
                {
                    ctx.Keywords.Attach(kw);
                    ctx.Entry(kw).State = EntityState.Modified;
                    person.Keywords.Add(kw);
                });            
            }

            // Save
            ctx.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T20:10:18.060

终于..终于可以休息了！我找到了解决方案！这不是一个漂亮的，但它的工作原理！

这是代码 - 共享是关怀。

这绝对是我最后一次使用实体框架。带来的痛苦和痛苦多于好处。

```
 public void SavePersons(IList<Person> persons)
    {
        // Create a EF Context
        using (var ctx = new MyDbEntities())
        {
            // Iterate
            foreach (var person in persons)
            {
                // Get current keywords
                var keywords = new List<Keyword>(person.Keywords).ToList();

                // Fetch Person from DB (if its not a NEW entry). Must use Include, else it's not working.
                var newPerson = ctx.Persons
                                       .Include("Keywords")
                                       .FirstOrDefault(s => s.Id == person.Id) ?? person;

                // Clear keywords of the object, else EF will INSERT them.. Silly.
                newPerson.Keywords.Clear();

                // Insert or update?
                ctx.Entry(newPerson).State = newPerson.Id == 0 ? EntityState.Added : EntityState.Modified;

                // Apply new scalar values
                if(newPerson.Id != 0)
                {
                    person.Id = newPerson.Id;
                    ctx.Entry(newPerson).CurrentValues.SetValues(person);

                }

                // Iterate through all keywords
                foreach (var kw in ctx.Keywords)
                {
                    // If the current kw exists in OUR list, add it
                    // - if not, remove the relation from the DB.
                    if (keywords.Any(k => k.Id == kw.Id))
                    {
                        //ctx.Entry(kw).State = EntityState.Unchanged;
                        ctx.Keywords.Attach(kw);
                        newPerson.Keywords.Add(kw);
                    }
                    else
                        newPerson.Keywords.Remove(kw);
                }
            }

            // Save
            ctx.SaveChanges();

        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:48:10.267

尝试添加**.ToList()**：

```
var keywords = new List<Keyword>(person.Keywords).ToList();//generate list sepereate from .Keywords 
```

我怀疑您的关键字列表永远不会被填充，因为您在补水之前将其清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:49:37.643

因此，以下内容未经测试，但是，在*您*修复了我的错误之后；）它应该可以解决问题。我不知道您的其余代码，所以我选择创建输入数据的克隆并以特定顺序将对象附加到上下文中。

**编辑：**重命名方法

```
 // get unique list of Keywords from all Persons
    private List<Keyword> getUniqueKeywords(IEnumerable<Person> oxygenThiefs) {
        var result = new List<Keyword>();

        foreach (var thief in oxygenThiefs) {
            foreach (var keyword in thief.Keywords) {
                if (!result.Contains(keyword)) {
                    result.Add(keyword);
                }
            }
        }

        return result;
    }

    // shallow clone of Person
    private Person clonePerson(Person target) {

        return new Person {
            Id = target.Id,
            Name = target.Name,
            ..
            ..

        };
    }

    public void SavePersons(IList<Person> persons) {
        // Create a EF Context
        using (var ctx = new MyDbEntities()) {

            // add all Keywords to the Context so that they are tracked
            foreach (var keyword in getUniqueKeywords(persons)) {
                ctx.Keywords.Attach(keyword);
                // if value of Keyword has actually changed then uncomment line
                // ctx.Entry(keyword).State = EntityState.Modified
            }

            foreach (var person in persons) {

                // hehe
                var shallowPerson = clonePerson(person);

                // Attach Person
                ctx.Persons.Attach(shallowPerson);

                // Establish relationship (however shallow and meaningless)
                foreach (var keyword in person.Keywords) {
                    shallowPerson.Keywords.Add(keyword);
                }

                // Insert or update?
                ctx.Entry(shallowPerson).State = person.Id == 0 ? EntityState.Added : EntityState.Modified;

            }

            // Save
            ctx.SaveChanges();
        }
    } 
```

# ios - 更改 UIbutton ios 失去边框的 Imagebackground

> ID：14631311
> 
> 赞同：0
> 
> 时间：2013-01-31T17:09:22.310
> 
> 标签：ios

当我将选择设置为 NO 时，为什么第一个按钮的边框会消失？以下是 foreach 按钮的两个操作。

```
- (IBAction)onehourbtn:(id)sender
{
    [btnonehour setSelected:YES];
    [btntwohour setSelected:NO];
    [btnthreehour setSelected:NO];
} 
```

和

```
(IBAction)twohourbtn:(id)sender
{
    [btnonehour setSelected:NO];
    [btntwohour setSelected:YES];
    [btnthreehour setSelected:NO];
} 
```

![单击的按钮移开](../Images/52b02fa91775d3d5e2dd75f55af27c02.png)

![单击另一个按钮，边框从第一个按钮中删除](../Images/13fe53105858d7a71cc35ff04e5d46b3.png)

# knockout.js - KnockoutJS 中价值转换的最佳方法？

> ID：14631314
> 
> 赞同：7
> 
> 时间：2013-01-31T17:09:30.590
> 
> 标签：knockout.js, valueconverter

我一直在尝试找出在 Knockout-JS 中显示/编辑百分比值的正确方法（更一般地说，我应该如何创建像这样的可重用组件）。

我的 ViewModel 有一个可观察值，它是存储为小数的百分比，例如 0.5 表示 50%。我想以百分比格式（例如'50'）显示**和**编辑值，这样用户就不会感到困惑（他们很容易感到困惑）。

## 可写计算

通过设置一个可写的计算函数，我可以得到一个简单的版本：见[http://jsfiddle.net/Quango/fvpjN/](http://jsfiddle.net/Quango/fvpjN/)

但是，这不是很可重用，因为它需要为每个值重新实现。我尝试了一个扩展器，但这有效地掩盖了底层价值，因此使其无法使用。

## 绑定处理程序

我*认为*我需要的是一个绑定处理程序，所以不要写

```
<input data-bind="value: commission" /> 
```

我会写

```
<input data-bind="percentage: commission" /> 
```

我查看了 knockout.js 中“值”bindingHandler 中的代码，但是那里有很多用于绑定的代码，我不想复制它。

所以我的问题是：

1.  有没有一种好的/标准/模板方式来进行这种价值转换？

2.  如果没有，有没有办法重新使用“值”绑定而不必复制和粘贴现有代码？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T18:01:59.167

我一直想写一个扩展程序。因此，您的问题的另一个答案是通过淘汰赛扩展器实现的。

我还没有决定是我喜欢这个还是百分比类更好。

## HTML

```
<input data-bind="value: p1.percentage, valueUpdate: 'afterkeydown'"></input>%
= <span data-bind="text: p1"></span> 
```

## JavaScript

```
ko.extenders.percentage = function(target, option) {
    target.percentage = ko.computed({
        read: function() {
            return this() * 100;
        },
        write: function(value) {
            this(value/100);
        },
        owner: target
    });
    return target;
};

var model = {
    p1: ko.observable(0.5).extend({'percentage': true})
}

ko.applyBindings(model) 
```

## 现场演示

[http://jsfiddle.net/DWRLr/](http://jsfiddle.net/DWRLr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:43:28.513

如何将分数值和百分比值包装在一起，使其成为可重用的组件：

## HTML

```
<input data-bind="value: p1.value, valueUpdate: 'afterkeydown'"></input>
<h1><span data-bind="text: p1.frac"></span> = <span data-bind="text: p1"></span></h1> 
```

## JavaScript

```
function Percentage(frac) {
    this.frac = ko.observable(frac);
    this.value = ko.computed({
        read: function() {
            return this.frac() * 100;
        },
        write: function(value) {
            this.frac(value/100);
        },
        owner: this
    });
}

Percentage.prototype.toString = function() {
    return this.value() + '%';
}

var model = {
    p1: new Percentage(0.5)
}

ko.applyBindings(model) 
```

## 现场演示

[http://jsfiddle.net/9kCkm/1/](http://jsfiddle.net/9kCkm/1/)

# vba - Outlook 2007 发送后打开电子邮件

> ID：14631315
> 
> 赞同：1
> 
> 时间：2013-01-31T17:09:31.803
> 
> 标签：vba, outlook

我正在寻找一种方法让 Outlook 2007 在我发送电子邮件后打开它（即实际发送的电子邮件，而不是草稿）。

我已经有一个宏设置来在发送电子邮件后打开类别选项，但我需要打开实际的电子邮件。

我们使用插件将我们的电子邮件上传到服务器，但它仅适用于已发送的电子邮件（即不在撰写窗口中的电子邮件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:19:31.320

使用已`Items.ItemAdd`发送邮件文件夹上的事件（使用检索`Namespace.GetDefaultFolder(ilFolderSentMail)`）

# android - Android SQLiteException：无法将 db 的语言环境更改为“en_US”

> ID：14631316
> 
> 赞同：17
> 
> 时间：2013-01-31T17:09:33.427
> 
> 标签：android, sqlite, sqliteopenhelper

我最近更新了我的一个（开源）Android 应用程序，我的用户遇到了一个我无法复制的异常。关键部分是：

`android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5)`

接着

`Caused by: android.database.sqlite.SQLiteException: Failed to change locale for db '/data/data/com.airlocksoftware.hackernews/databases/hacker_news_cache.db' to 'en_US'.`

这发生在具有 Android 2.3 - 4.2.1 的设备上，以及我尝试连接到数据库的应用程序中的多个位置。使用后我将关闭数据库。

我找不到有关“无法更改数据库的语言环境”异常的太多信息。当我查看[SQLiteConnection 的源代码（第 386 行）](http://bitgrind.com/android/android-4.1.1_r4/android/database/sqlite/SQLiteConnection.html)时，“android_metadata”表或“使用新语言环境更新索引”似乎有问题。

[这是导致异常的代码（在 Github 上）。](https://github.com/bishopmatthew/HackerNews/blob/master/src/com/airlocksoftware/hackernews/loader/StoryLoader.java#L61)

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.support.v4.content.ModernAsyncTask$3.done(ModernAsyncTask.java:137)
at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
at java.util.concurrent.FutureTask.run(FutureTask.java:239)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856) Caused by: android.database.sqlite.SQLiteException: Failed to change locale for db '/data/data/com.airlocksoftware.hackernews/databases/hacker_news_cache.db' to 'en_US'.
at android.database.sqlite.SQLiteConnection.setLocaleFromConfiguration(SQLiteConnection.java:386)
at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:218)
at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:854)
at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:229)
at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
at com.airlocksoftware.database.DbInterface.(DbInterface.java:28)
at com.airlocksoftware.hackernews.loader.StoryLoader.loadStories(StoryLoader.java:62)
at com.airlocksoftware.hackernews.loader.StoryLoader.loadInBackground(StoryLoader.java:54)
at com.airlocksoftware.hackernews.loader.StoryLoader.loadInBackground(StoryLoader.java:1)
at android.support.v4.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:240)
at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:51)
at android.support.v4.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:40)
at android.support.v4.content.ModernAsyncTask$2.call(ModernAsyncTask.java:123)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
... 3 more Caused by: android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5)
at android.database.sqlite.SQLiteConnection.nativeExecute(Native Method)
at android.database.sqlite.SQLiteConnection.execute(SQLiteConnection.java:548)
at android.database.sqlite.SQLiteConnection.setLocaleFromConfiguration(SQLiteConnection.java:364)
... 24 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-27T08:09:37.477

检查您的数据库内容，特别是“android_metadata”。这是一个带有这个 DDL 的表：

```
CREATE TABLE android_metadata ( 
    locale TEXT 
); 
```

其中应包含至少一条具有以下内容的记录：

```
en_US 
```

这解决了我自己的问题。

有关更多详细信息：使用[SQLiteStudio](http://sqlitestudio.pl)
等 SQLite 编辑器打开您的数据库文件，然后打开**android_metadata**表（如果它不存在，请创建它。（您可以使用查询编辑器创建它（工具>打开查询编辑器）并复制/粘贴 DDL上面的代码）

 **要插入记录，您可以在查询编辑器中复制/粘贴这一行：

```
insert into android_metadata values ('en_us'); 
```

提示：要在 SQLiteStudio 中运行查询，您应该按下工具栏中带有![闪电](../Images/d51c0eb48220f8f32f657f6ec5a0451b.png)图标的按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-09T05:59:31.497

关键是`android.database.sqlite.SQLiteDatabaseLockedException`。

我遇到了同样的问题，并且随着数据库锁定的增加而不断增加。

**该怎么办？**- 消除数据库锁定。

**如何？**- 确保没有并发的写调用发生，并且

您可以阅读更多关于避免数据库锁定[的信息](https://stackoverflow.com/questions/7930139/android-database-locked)，以及在这个很好解释的[SO 答案](https://stackoverflow.com/a/3689883/2520215)中。

我建议将所有写调用转移到一个线程上，这样可以避免锁定。您可以为此使用[AsyncQueryHandler](https://developer.android.com/reference/android/content/AsyncQueryHandler.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T03:08:41.323

这并不能完全回答这个问题，但您可能还想查看这篇文章，看看是否可以将它用于您的`DbHelperSingleton`，因为它似乎与您面临的错误相同：

[无法将 db '/data/data/my.easymedi.controller/databases/EasyMediInfo.db' 的区域设置更改为 'en_US'](https://stackoverflow.com/questions/19491675/failed-to-change-locale-for-db-data-data-my-easymedi-controller-databases-easy)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T06:03:41.210

如果您要更改应用程序中的区域设置，请确保在打开数据库之前更改它。

当我在打开数据库后切换区域设置时，我的应用程序中遇到了同样的问题，并且它试图根据不存在的区域设置切换到不同的数据库。**

# c# - 是否可以在抽象类的工厂方法中覆盖泛型类型？

> ID：14631319
> 
> 赞同：2
> 
> 时间：2013-01-31T17:09:41.380
> 
> 标签：c#, generics, abstract-class

我有一个工厂类，它返回从抽象类型继承的具体实例。这些具体实例还具有其数据类型的通用属性，因为每个实例都需要不同的数据类型。Data 属性也存在于抽象类型上，因为它是在工厂中设置的。

```
public static class FactoryClass 
{
  public static TType CreateNewClass<TType>(object data) 
        where TType : AbstractClass<object>, new()
  {
    var newClass = new TType {Data = data};
    // do some stuff
    // keep track of all created types in a list
    List.Add(newClass);
    return newClass;
  }

  private List<AbstractClass<object>> MyList = new List<AbstractClass<object>>()
}

public abstract class AbstractClass<TData>
{
  internal AbstractClass()
  {
    // do constructor things
  }

  protected SomeCommonFunction()
  {
    // common code for abstract base class
  }

  public abstract void DoSomethingToData();

  TData Data;
}

public class ExampleClass : AbstractClass<string[]>
{
  public override void DoSomethingToData()
  {
    // sort the strings or something
    // call the abstract code
  }
} 
```

当我尝试打电话时，`FactoryClass.CreateNewClass<ExampleClass>(myStringArray)`我收到一个错误，需要将其转换为`AbstractClass<object>`

有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:13:21.177

好吧，这就是问题所在：

```
where TType : AbstractClass<object> 
```

该约束正是编译器所抱怨的。

在我看来，你真的想要这样的东西：

```
public static TContainer CreateNewClass<TContainer, TData>(TData data) 
    where TContainer : AbstractClass<TData>, new() 
```

不幸的是，这需要您为该方法指定*两个*类型参数 - 但至少就您使用的数据类型而言它是安全的。您可以通过创建两个泛型方法和在它们之间使用的单独类来解决此问题，允许您编写如下内容：

```
FactoryClass.For(myStringArray).CreateNewClass<ExampleClass>(); 
```

该`For`方法将返回一个类型参数为 的泛型类型`string[]`，然后`CreateNewClass`将是一个实例方法，它将容器类型作为数据类型。

但是，您的列表根本无法以其当前形式工作。您可能希望为以下内容创建一个*非泛型*基类`AbstractClass`：

```
public abstract class AbstractClass
{
    // Anything which doesn't use TData
} 
```

然后：

```
public abstract class AbstractClass<TData> : AbstractClass 
```

那时，您工厂中的列表将是`List<AbstractClass>`; 您不会以编译时安全的方式知道每个条目的数据类型......这是完全有意义的，因为每个元素都可以使用不同的类型。

（哦，如果您想从静态方法访问它，您的列表字段当然需要是静态的......）

# android - 在最低 API 级别 14 的应用中使用 Roboto 字体

> ID：14631326
> 
> 赞同：19
> 
> 时间：2013-01-31T17:09:52.760
> 
> 标签：android, typeface

我有一个应用程序，其最低 API 级别为 14。我认为所有兼容设备都应该默认安装 Roboto 字体是否正确？如果我将 textView 字体设置为 Roboto 或 Roboto Light，它似乎默认为普通的 sans 字体。

有没有办法在不包含 Roboto 字体作为资产的情况下使用 Roboto？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-31T18:53:33.157

> 有没有办法在不包含 Roboto 字体作为资产的情况下使用 Roboto？

不，对于 API 11<，没有其他方法可以做到这一点。

我通常为 Robot 字体创建一个自定义 TextView：

```
public class TextView_Roboto extends TextView {

        public TextView_Roboto(Context context, AttributeSet attrs, int defStyle) {
                super(context, attrs, defStyle);
                createFont();
        }

        public TextView_Roboto(Context context, AttributeSet attrs) {
                super(context, attrs);
                createFont();
        }

        public TextView_Roboto(Context context) {
                super(context);
                createFont();
        }

        public void createFont() {
                Typeface font = Typeface.createFromAsset(getContext().getAssets(), "robo_font.ttf");
                setTypeface(font);
        }
} 
```

现在您可以像这样在布局中使用它：

```
<com.my.package.TextView_Roboto>
  android:layout_width="..."
  android:layout_height="..."
  [...]
</com.my.package.TextView_Roboto> 
```

当然你可以创建一个 TextView 布局。一个用于 Pre HC，一个用于 HC 及更高版本（您必须使用 layout 和 layout-v11 文件夹）。现在您可以使用`<include>`标签将 TextView 包含在您的布局中。你只需要这样做然后使用这个：

```
if (android.os.Build.VERSION.SDK_INT >= 11){
    TextView txt = (TextView) findViewById(R.id.myTxtView);
}
else{
    TextView_Roboto txt = (TextView_Roboto) findViewById(R.id.myTxtView);
} 
```

**编辑：**

您可以像这样从 Android 4.1+ 本地使用 Roboto：

```
android:fontFamily="sans-serif"           // roboto regular
android:fontFamily="sans-serif-light"     // roboto light
android:fontFamily="sans-serif-condensed" // roboto condensed 
```

# c# - DataContext 更改时 WPF ObservableCollection 未更新

> ID：14631328
> 
> 赞同：1
> 
> 时间：2013-01-31T17:09:55.913
> 
> 标签：c#, wpf, entity-framework, mvvm, observablecollection

我有`Data = new ObservableCollection<DATA>(dataContext.DATA);`

`dataContext`是我的实体。`DATA`是 SQL Server 表。

现在我运行 Import 方法，它填充`DATA`SQL Server 上的表：

```
 public static void Import(DataTable table)
    {
        var dataContext = DataContext.Instance.Entities;

        foreach (DataRow row in table.Rows)
        {
            .......

            var dataRow = new DATA
            {
               .........
            };

            dataContext.AddToDATA(dataRow);
        }
        dataContext.SaveChanges();
    } 
```

但我的 ObservableCollection`Data`仍然是空的。我该如何更新它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:18:13.770

[`ObservableCollection<T> Constructor (IEnumerable<T>)`](http://msdn.microsoft.com/en-us/library/cc679169.aspx)：

> 初始化包含从指定集合复制的元素的 ObservableCollection 类的新实例。

这里的关键字是它从集合中**复制元素。**之后，它不会与您传入的枚举保持任何同步。您的代码正在更新`dataContext`对象，而不是您的`Data`对象（ObservableCollection）。您要么必须构建自己的 ObservableCollection 同步版本，要么创建方法以使它们保持同步。

如果您不关心保持`dataContext`对象同步并且只想在一次性加载中使用它，那么在您的 ObservableCollection 的构造函数中使用它之前，您必须在该枚举中拥有所有适当的对象。

我的猜测是你做了类似于以下的事情：

```
Data = new ObservableCollection<DATA>(dataContext.DATA)

// Afterwards...
Import(foobar); 
```

它应该是：

```
Import(foobar);

// Afterwards...
Data = new ObservableCollection<DATA>(dataContext.DATA) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:17:59.503

您需要从 datacontext 中重新获取数据并将其添加到此时的 observable 集合中。

```
public static void Import(DataTable table)
{
    var dataContext = DataContext.Instance.Entities;

    foreach (DataRow row in table.Rows)
    {
        .......

        var dataRow = new DATA
        {
           .........
        };

        dataContext.AddToDATA(dataRow);
    }
    dataContext.SaveChanges();

    var data = datContext.whateverretreval();

    Data = data;
} 
```

# freebase - 将 Freebase 完整转储加载到 OWLIM-SE

> ID：14631329
> 
> 赞同：1
> 
> 时间：2013-01-31T17:09:58.570
> 
> 标签：freebase, sesame

我已经从这个链接[http://download.freebaseapps.com/下载了完整的 RDF Freebase 转储文件 'freebase-rdf-2012-12-09-00-00.gz'(7.5GB)](http://download.freebaseapps.com/)

此数据转储使用此处定义的 Turtle RDF 语法[http://wiki.freebase.com/wiki/Data_dumps](http://wiki.freebase.com/wiki/Data_dumps)

如何将此 .gz 文件中的数据加载到 OWLIM-SE (Windows) 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:05:45.370

我收到了来自 [freebase-discuss] 邮件列表的回复：

这个 Freebase 转储应该被解压、拆分并通过修复脚本运行。更多细节在这里

```
 http://people.apache.org/~andy/Freebase20121223 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:51:55.267

要加载到 OWLIM，可以使用交付中的“入门”应用程序

```
 c:\owlim-se-5.3.5777\getting-started>example.cmd 
       url=http://localhost:8080/openrdf-sesame repository=myrepId
       preload=C:/baseKBLite queryfile=none 
```

# c# - c# TcpClient 和 java ServerSocket

> ID：14631332
> 
> 赞同：1
> 
> 时间：2013-01-31T17:10:03.563
> 
> 标签：c#, java, sockets

你好，我正在制作一个服务器，它将在端口 6112 上侦听并说如果客户端连接到它，我已经尝试用两种语言进行操作..但是它侦听连接并且没有检测到任何东西..有什么帮助吗？

继承人的代码例如：

```
public static ServerSocket Start() throws Exception
{
    System.out.println("Initializing Network Listener");
    Config.Initialize();
    int netport = Config.netport;
    String netip=Config.netadress;
    ServerSocket Listener = new ServerSocket(netport);
    System.out.println("Done initializing Network Listener");
    Listener.setSoTimeout(0);
    return Listener;
}

public static void ListenForClient() throws Exception
{
    ServerSocket Listener = Start();
     Listener.setSoTimeout(0);
    Socket Client = Listener.accept();
    Client.setSoTimeout(120000);
    System.out.println("Client Connected on port: ");        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:16:02.603

=== 更新 ===

*   对于 Java 服务器套接字客户端，这里有两个很好的示例：

> ```
> * http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html
> 
> * http://www.cs.uic.edu/~troy/spring05/cs450/sockets/EchoServer.java 
> ```

2) 对于 C# 服务器套接字客户端，请看这里：

> *   [http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx)

3）一种简单的测试方法是：

> a) 启动命令提示符
> 
> b)`telnet localhost 6112`
> 
> <= 这也应该连接到您的服务器，而不必担心任何 Java 客户端编程

4) 如果在 Windows 上“找不到 telnet”，只需进入控制面板，添加/删除程序，添加/删除 Windows 功能。例如：

> *   [如何在 Windows 7 中启用 Telnet 客户端](http://social.technet.microsoft.com/wiki/contents/articles/910.how-to-enable-telnet-client-in-windows-7.aspx)

... 但 ...

5) 也许整个问题可能是 Windows 防火墙阻止了您的测试端口 (6122)。尝试这个：

> *   [在 Windows 防火墙中阻止/取消阻止程序](http://www.technipages.com/blockunblock-programs-in-windows-firewall.html)

# nhibernate - Nhibernate 二级缓存在哪些情况下会提升性能？

> ID：14631333
> 
> 赞同：2
> 
> 时间：2013-01-31T17:10:10.210
> 
> 标签：nhibernate, second-level-cache

我对 NHibernate L2 缓存的了解越多，在我*看来*，您主要从以下场景中受益的越多：

*   您主要是通过 Id 查询，并且...
*   您主要是查询静态数据，和/或
*   您希望经常运行相同的查询（这实际上让我们回到按 Id 查询，因为查询缓存只存储返回的 Id 集）。

我的理解错了吗？如果是这样，它还能在哪些其他情况下产生巨大的性能提升？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:34:43.503

您的问题似乎与缓存模式有关，而不是与 NHibernate 二级缓存有关。请参阅[缓存（计算）](http://en.wikipedia.org/wiki/Cache_%28computing%29)。

> ...缓存是透明存储数据的组件，以便可以更快地处理未来对该数据的请求...

就是这样。如果您的应用程序正在执行任何对性能要求严格的操作，二级缓存可以帮助您更快地为它们提供服务。

NHibernate 通过其完整的参数集（分页、排序、过滤器...）缓存查询，因此即使在简单的场景中，也可以为主页或起始页提供所有文章、员工、任务的列表...所有用户...您可以节省时间和资源。

每当底层数据发生变化时，缓存就会（可能）被清除，并重新加载新数据。

而且因为有非常聪明的缓存提供者，你甚至可以在网络农场中使用 NHibernate 和缓存。这是您应该阅读的第一篇文章：[NHibernate 中的一级和二级缓存](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)

*SO：不仅用于通过 id 或静态数据获取。即使在具有高流量的事务性应用程序上，二级缓存也可以提高性能。因为即使在很短的时间内，您也可以从缓存（例如 memeora）中获取数据并节省一些毫秒...*

# android - Android 使用方位映射 V2 newLatLngBounds

> ID：14631334
> 
> 赞同：24
> 
> 时间：2013-01-31T17:10:10.303
> 
> 标签：android, android-maps-v2

我正在使用具有此布局的新 Android 地图 V2：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:map="http://schemas.android.com/apk/res-auto"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.SupportMapFragment"
  map:cameraBearing="270"/> 
```

我正在尝试使用方法 newLatLngBounds (LatLngBounds bounds, int padding) 来缩放和查看地图中的所有标记，但是相机方位设置为 0。

谷歌开发者文档上的描述说：

> public static CameraUpdate newLatLngBounds (LatLngBounds bounds, int padding) (...) 。返回的 CameraUpdate 的方位角为 0，倾斜角为 0。(...)"。

如何更改轴承值？

在调用 newLatLngBounds 后，我尝试以编程方式设置新方位，如下所示：

```
mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bounds, 100));
mMap.moveCamera(CameraUpdateFactory.newCameraPosition(new CameraPosition.Builder()
.target(mMap.getCameraPosition().target)
.zoom(mMap.getCameraPosition().zoom)
.bearing(270)
.build())); 
```

但是当我这样做时，一些标记不会出现。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-15T17:57:33.030

我有一个替代方案，我有同样的问题。我将展示如何将边界转换为缩放，然后我们将简单地使用 CameraPosition.builder() 来创建正确的位置。

```
private static final double LN2 = 0.6931471805599453;
    private static final int WORLD_PX_HEIGHT = 256;
    private static final int WORLD_PX_WIDTH = 256;
    private static final int ZOOM_MAX = 21;

    public int getBoundsZoomLevel(LatLngBounds bounds, int mapWidthPx, int mapHeightPx){

        LatLng ne = bounds.northeast;
        LatLng sw = bounds.southwest;

        double latFraction = (latRad(ne.latitude) - latRad(sw.latitude)) / Math.PI;

        double lngDiff = ne.longitude - sw.longitude;
        double lngFraction = ((lngDiff < 0) ? (lngDiff + 360) : lngDiff) / 360;

        double latZoom = zoom(mapHeightPx, WORLD_PX_HEIGHT, latFraction);
        double lngZoom = zoom(mapWidthPx, WORLD_PX_WIDTH, lngFraction);

        int result = Math.min((int)latZoom, (int)lngZoom);
        return Math.min(result, ZOOM_MAX);
    }

    private double latRad(double lat) {
        double sin = Math.sin(lat * Math.PI / 180);
        double radX2 = Math.log((1 + sin) / (1 - sin)) / 2;
        return Math.max(Math.min(radX2, Math.PI), -Math.PI) / 2;
    }
    private double zoom(int mapPx, int worldPx, double fraction) {
        return Math.floor(Math.log(mapPx / worldPx / fraction) / LN2);
    } 
```

然后您可以使用此代码并添加带有边界的方位/和/或倾斜：

```
 LatLngBounds bounds = LatLngBounds.builder()
                    .include(swCorner)
                    .include(neCorner).build();
            CameraPosition cp = new CameraPosition.Builder()
                    .bearing(randomBearing())
                    .tilt(randomTilt())
                    .target(latLng)
                    .zoom(getBoundsZoomLevel(bounds, findViewById(R.id.map).getMeasuredWidth(), findViewById(R.id.map).getMeasuredHeight()))
                    .build();
            CameraUpdate cu = CameraUpdateFactory.newCameraPosition(cp);
            mMap.animateCamera(cu); 
```

这将起作用（您必须将 mMap 更改为您的实际地图变量，并将 id 更改为您的地图 id）。

祝你好运！我从帖子中获得了 boundZoomLevel：[如何在使用 map.fitBounds 之前确定 LatLngBounds 的缩放级别？](https://stackoverflow.com/questions/10620515/how-do-i-determine-the-zoom-level-of-a-latlngbounds-before-using-map-fitbounds) 如果你有时间，也去喜欢那个答案！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-03T09:58:23.410

是的你可以！只需使用： [https](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap#animateCamera(com.google.android.gms.maps.CameraUpdate) ://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap#animateCamera (com.google.android.gms.maps.CameraUpdate, int, com.google.android .gms.maps.GoogleMap.CancelableCallback)

并实现 CancelableCallback 并放入 onFinish() 方法： [https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.CancelableCallback#onFinish()](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.CancelableCallback#onFinish())

更换轴承的代码。当然，您不会得到一个动画，而是两个动画链，但它会起作用！

```
mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 100)/*,DURATION_IN_MS_IF_NEEDED*/,new GoogleMap.CancelableCallback(){
    @Override
    public void onCancel() {
        //DO SOMETHING HERE IF YOU WANT TO REACT TO A USER TOUCH WHILE ANIMATING
    }
    @Override
    public void onFinish() {
        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(new CameraPosition.Builder()
/*.target(mMap.getCameraPosition().target)
.zoom(mMap.getCameraPosition().zoom)*/
.bearing(270)
.build()));
    }
}); 
```

**我认为您不需要目标和缩放，我将它们注释掉，因为它应该由以前的动画管理**

**编辑** 更好地查看 API，我有一个可行的方法（我现在无法测试它，请看一下：拥有 LatLngBounds 你可以获得最适合该区域的缩放级别（这取决于在设备尺寸上，因此您必须在运行时获取视图尺寸），然后，当您进行缩放时（您还有 LatLngBounds 的中心），您可以使用一个独特的动画进行相机更新： [https:// developers.google.com/android/reference/com/google/android/gms/maps/model/CameraPosition](https://developers.google.com/android/reference/com/google/android/gms/maps/model/CameraPosition)，构造函数允许设置值，或者您可以使用之前看到的构建器。

您可以在网上找到各种方法来做到这一点，例如（只需在线快速搜索即可获得 javascript 版本[https://stackoverflow.com/a/13274361/4120431](https://stackoverflow.com/a/13274361/4120431)）

希望这可以帮助您解决您的问题！

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-08-30T09:35:04.947

Google 的 CameraUpdateFactory 上的坏问题我用时间解决了，时间跨度很小！

```
public void zoomToBounds() {
    LatLngBounds latLngBounds = getBoundsOfInput(inputPoints);
    final int PADDING = 20;

    final CameraPosition now = map.getCameraPosition();
    final float tilt = map.getCameraPosition().tilt;
    final float bearing = map.getCameraPosition().bearing;
    final LatLng[] target = new LatLng[1];
    final float[] zoom = new float[1];

    map.animateCamera(CameraUpdateFactory.newLatLngBounds(latLngBounds, PADDING), 1, null);

    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            target[0] = map.getCameraPosition().target;
            zoom[0] = map.getCameraPosition().zoom;
        }
    }, 10);
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            map.animateCamera(CameraUpdateFactory.newCameraPosition(now), 1, null);
        }
    }, 30);

    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            map.animateCamera(CameraUpdateFactory.newCameraPosition(new CameraPosition(target[0], zoom[0], tilt, bearing)));
        }
    }, 60);
} 
```

看起来很脏，但有效

3 Handler 做事，每一个postdelay必须大于前一个

# javascript - ExtJS散点图，根据数据中的flag高亮某些点

> ID：14631336
> 
> 赞同：2
> 
> 时间：2013-01-31T17:10:13.203
> 
> 标签：javascript, extjs, charts, extjs4, series

我想找出一种方法来突出我的散点图中的某些点。我花了一些时间研究它，但没有找到简单的方法。如果我正在绘制如下所示的数据：

*   numberOne：50，numberTwo：45，高亮：0
*   numberOne：65，numberTwo：30，高亮：0
*   numberOne：35，numberTwo：50，highlight：1
*   numberOne：25，numberTwo：45，高亮：1
*   numberOne：60，numberTwo：75，高亮：0

因此，代表上面第三行和第四行的点将显示为不同的形状、颜色或大小。有人对此有任何见解吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T01:51:28.097

想出了如何使用该系列中的渲染器来做到这一点，这是我的代码：

```
 renderer:function(sprite, record, attr, index){
                    console.log(record.get('highlight'));
                    console.log(sprite);
                    var highlight = record.get('highlight');
                    var color = null;
                    if (highlight == 1) {
                            color = "#1BE01B";
                    }else{
                            color = "#E81717";
                    }
                            return Ext.apply(attr, { fill: color });
            } 
```

# servlets - 我可以使用 servlet api 3.0 和 jetty 8 吗？

> ID：14631339
> 
> 赞同：4
> 
> 时间：2013-01-31T17:10:26.317
> 
> 标签：servlets, servlet-3.0, jetty-8

我想在 Jetty 8 中使用 3.0 servlet-api。目前在我的 web.xml 中定义了 2.4 servlet-api。并在 webdefault.xml 2.5 servlet-api 中定义。其他人设置了这个，所以他们很可能做错了什么。我实际使用的是哪个 servlet-api 版本？2.4 还是 2.5？我的类路径中已经有 3.0。我需要在 web.xml 和/或 webdefault.xml 中进行哪些更改才能使其正常工作？

先感谢您。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T17:50:39.793

您通常不自己提供 Servlet API。这通常由目标 servlet 容器本身提供。Servlet 3.0 兼容容器的示例有[Tomcat 7.x](http://tomcat.apache.org)、[Glassfish 3.x](http://glassfish.java.net)、[JBoss AS 6.x/7.x](http://jboss.org/jbossas)，没错，还有[Jetty](http://www.eclipse.org/jetty/) 8.x。

您只需声明 的`<web-app>`根元素`web.xml`以符合目标容器支持的最高版本。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

</web-app> 
```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

# php - 按钮的php编码逻辑

> ID：14631342
> 
> 赞同：0
> 
> 时间：2013-01-31T17:10:38.813
> 
> 标签：php

php代码

```
if(isset($_POST['txtLocation']))
{
    $choice_loc = $_POST["txtLocation"];
}
elseif(!isset($_POST['txtLocation']))
{
    $message = "Please select the desired location or click on default";
}
elseif($choice_loc == "txtSetXY")
{
    $x = $_POST["txtXLocation"];
    $y = $_POST["txtYLocation"];
    if($x == "")
    {
        $message = "You forget to enter X location.";
    }
    elseif($y == "")
    {
        $message = "You forget to enter Y location.";
    }
    else
    {
        $choice_loc = $x . "," . $y;
    }
} 
```

这是html表单

```
<div class="formText">
  <input type="radio" name="txtLocation" value="txtSetXY"/> Specify Location<br />
  <div style="padding-left:20px;">
       X: <input type="text" id="locField" name="txtXLocation">
       Y: <input type="text" id="locField" name="txtYLocation">
   </div>
   <input type="radio" name="txtLocation" value="Default" checked="checked"/>Default
</div> 
```

逻辑有什么错误？？

value "default" is entered into database, but when selected `value="txtSetXY"`radio and entering x and y values in textfields it is not entering into database?

这是我的数据库输入查询

```
$insert = "INSERT INTO dbform (dblocation) VALUES ('{$choice_loc}')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:12:46.247

您的测试无法进入第三个选择：

```
elseif($choice_loc == "txtSetXY") 
```

因为

```
if(isset($_POST['txtLocation']))
{
...
}
elseif(!isset($_POST['txtLocation']))
{
...
} 
```

涵盖所有可能的路径，并且可以替换为

```
if(isset($_POST['txtLocation']))
{
...
}
else
{
...
} 
```

你会看到你不能添加另一个测试用例。

也许您应该尝试颠倒测试中的顺序：

```
if(isset($_POST['txtLocation']))
{
    $choice_loc = $_POST["txtLocation"];
}
elseif($choice_loc == "txtSetXY")
{
    $x = $_POST["txtXLocation"];
    $y = $_POST["txtYLocation"];
    if($x == "")
    {
        $message = "You forget to enter X location.";
    }
    elseif($y == "")
    {
        $message = "You forget to enter Y location.";
    }
    else
    {
        $choice_loc = $x . "," . $y;
    }
}
else
{
    $message = "Please select the desired location or click on default";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:15:13.867

`elseif`您在第一个逻辑部分中的 's有点过火了。您应该尝试以下方法：

```
if(!empty($_POST['txtLocation']))
{
    $choice_loc = $_POST["txtLocation"];
}
else
{
    $message = "Please select the desired location or click on default";
}
if(isset($choice_loc) && $choice_loc == "txtSetXY")
{
    if(!empty($_POST["txtYLocation"]))
        $y = $_POST["txtYLocation"];
    else
        $message = "You forget to enter Y location.";

    if(!empty($_POST["txtXLocation"]))
        $x = $_POST["txtXLocation"];
    else
        $message = "You forget to enter X location.";

    if(isset($x) && isset($y))
    {
        $choice_loc = $x . "," . $y;
    }
} 
```

# qt - 在 qt 中创建一个插槽以响应单击按钮

> ID：14631345
> 
> 赞同：0
> 
> 时间：2013-01-31T17:10:43.843
> 
> 标签：qt, tabwidget, qpushbutton

我有一个开始/停止按钮，我想控制哪个选项卡显示在 tabWidget 中。

这就是我的做法。

```
// Control START/STOP actions
void gui::start_stop()
{
    if (acquisition == 0)
    {
        acquisition = 1;
        ui->pushButton->setText("STOP \nACQUISITION");
        ui->pushButton->setStyleSheet("background-color: #8090d0; border-radius: 5px; color : #ffffff;");
        ui->tab_acquisition->raise();

    }

    else
    {
        acquisition = 0;
        ui->pushButton->setText("START \nACQUISITION");
        ui->pushButton->setStyleSheet("background-color: #6673a6; border-radius: 5px; color : #ffffff;");
        ui->tab_settings->raise();

    }
} 
```

问题是 tab_acquisition 和 tab_settings 没有得到提升

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:25:37.887

您应该告诉我们您是否对此方法有疑问，如果您尝试将其连接到 clicked 信号，请确保使用*插槽*访问说明符声明它。

# java - Java JDBC 准备语句最大参数标记

> ID：14631346
> 
> 赞同：15
> 
> 时间：2013-01-31T17:10:46.960
> 
> 标签：java, jdbc, prepared-statement

我使用`PreparedStatement`具有 2000 多个参数标记的大型数据库调用。

我收到这个错误

```
Caused by: java.sql.SQLException: Prepared or callable statement has more than 2000 parameter markers.
    at net.sourceforge.jtds.jdbc.SQLParser.parse(SQLParser.java:1139)
    at net.sourceforge.jtds.jdbc.SQLParser.parse(SQLParser.java:156)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.<init>(JtdsPreparedStatement.java:107)
Caused by: java.sql.SQLException: Prepared or callable statement has more than 2000 parameter markers. 
```

我尝试搜索 API Docs 和谷歌，但找不到如何配置它。

有谁知道是否有可能提高这个限制？我知道这将是一个缓慢的数据库调用，但现在这很好。

从长远来看，这也会给我带来任何问题，我最好分批运行它吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T17:37:56.387

像你一样被困在 2000 的接缝。这是驱动程序源的一个切口。

```
if (params != null && params.size() > 255
     && connection.getPrepareSql() != TdsCore.UNPREPARED
     && procName != null) {
  int limit = 255; // SQL 6.5 and Sybase < 12.50
  if (connection.getServerType() == Driver.SYBASE) {
    if (connection.getDatabaseMajorVersion() > 12 ||
        connection.getDatabaseMajorVersion() == 12 &&
        connection.getDatabaseMinorVersion() >= 50) {
      limit = 2000; // Actually 2048 but allow some head room
    }
  } else {
    if (connection.getDatabaseMajorVersion() == 7) {
      limit = 1000; // Actually 1024
    } else if (connection.getDatabaseMajorVersion() > 7) {
      limit = 2000; // Actually 2100
    }
  }
  if (params.size() > limit) {
   throw new SQLException(
       Messages.get("error.parsesql.toomanyparams",
       Integer.toString(limit)),
       "22025");
  }
} 
```

[这](http://pdhawale.blogspot.no/2010/12/javasqlsqlexception-prepared-or.html)是一个博客，其中包含有关如何解决它的示例。

# java - 如果您想创建一个包含表示查询字符串的参数和参数的对象，那么哪种对象最适合此任务？

> ID：14631348
> 
> 赞同：0
> 
> 时间：2013-01-31T17:10:48.227
> 
> 标签：java, map, hashmap, query-string, hashtable

在 .net 中有一个名为 WebClient 的类，它有一个名为“QueryString”的属性，其类型为 NameValueCollection（键/值对的集合，其中每个键可以有一个或多个值）。

但由于我正在使用 java，并实现了很多默认情况下不存在的功能，我想知道我应该使用哪个类来创建将用于保存将用于创建的键/值对的对象查询字符串。我是否正确假设 java.util.Hashtable 是我要使用的类？还是有更合适的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:12:30.783

实际上，我以为您正在尝试封装请求本身。

好的，对于查询，有很多示例。查看休眠或休眠搜索。当然，拥有一个真正的类而不只是 HashMap 是个好主意。该类可能在参数内部有一个映射，但该类可能有一个 toString() 来进行替换，例如 HQL 查询字符串：

```
from Users where name = :name 
```

当变成最终字符串时，将进入地图并找到键为名称的条目（：名称），将其拉出并将其插入查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:36:43.430

这取决于你想要做什么。

就个人而言，我认为我从未创建过这样的课程。当我想组合一个查询字符串时，我有一组要放入其中的特定字段，我只需使用 StringBuilder 或字符串“+”将它们组合在一起。也就是说，我没有 Hashtable 或任何其他类型的结构：我只有几个单独的字段，无论它们是什么。通常，我看不到将字段放入集合然后将它们取出的价值。

也就是说，我敢肯定在某些情况下，您想要围绕构建 URL 进行一些通用函数。在这种情况下，确定一个 Hashtable——或者更可能是一个 Hashmap，也可以使用较新的集合——可以正常工作。

或者，我的第一个想法是创建一个新类来保存每个参数，这样它就可以有两个不同的字段用于名称和值。然后你可以把函数放在类中，用等号把它们放在一起，然后做 URL 编码。然后制作这些对象的 ArrayList。ArrayList 将比 Hashtable 更小更快，尽管从规模上看，任何节省都可能微不足道。

但我开始的重点是：你想用这些参数做什么？如果只是：将参数添加到集合中，然后在某个时候将它们全部拉出以构建查询字符串，这就是所有发生的事情，ArrayList 就可以了，Hashtable 就可以了，几乎任何集合都可以。

你还有什么想做的吗？您是否需要能够从集合中随机检索元素？合并两个集合？使用同一个类来保存用于其他目的的参数，例如数据库查询，这样您就可以构建列表，然后将其传递到任何一个地方？等等等等。

如果调用者尝试添加两个同名的参数，你想做什么。第二个应该默默地覆盖第一个吗？这是一个错误吗？或者是什么？

等等。

# php - 邮寄 $_POST 数组的所有值

> ID：14631350
> 
> 赞同：0
> 
> 时间：2013-01-31T17:10:53.797
> 
> 标签：php, html

我想通过 $_POST 数组中的表单发送所有值。

我遍历每个元素的数组并将其存储在另一个变量中，例如 $results 连接结果。

但是当我邮寄它们时，它们被组合在一起

我用了

`foreach($_POST as $key=> $value){ $results .= $key .":".$value."\n"; }`

我什至用`<br/>`\n 代替了相同的结果，al 值在同一行。我应该用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:12:52.810

标准邮件格式使用`\r\n`not `\n`。尝试使用那种风格的新线。

# java - 在番石榴中，为什么只使用“T”，而“？super T”是可能的？

> ID：14631353
> 
> 赞同：8
> 
> 时间：2013-01-31T17:11:18.763
> 
> 标签：java, generics, guava, bounded-wildcard

为什么实用程序工厂方法经常使用特定的泛型参数（如`T`）而不是有界通配符参数（如`? super T`）？

例如，[Functions#forPredicate](http://guava-libraries.googlecode.com/svn-history/r46/trunk/javadoc/com/google/common/base/Functions.html#forPredicate%28com.google.common.base.Predicate%29)的签名是：

```
public static <T> Function<T, Boolean> forPredicate(Predicate<T> predicate) 
```

为什么不使用：

```
public static <T> Function<T, Boolean> forPredicate(Predicate<? super T> predicate) 
```

哪个会使类似以下的事情成为可能？

```
Predicate<Number> isPositivePredicate = ...
Function<Integer, Boolean> isPositiveInteger = Functions.forPredicate(isPositivePredicate);
// above line is compiler error:
//   Type mismatch: cannot convert from Function<Number,Boolean> to Function<Integer,Boolean> 
```

是不是因为*消费者*`Function`并且`Predicate`被期望有必要的有界通配符参数来使这变得不必要？例如，[Iterables#find](http://guava-libraries.googlecode.com/svn-history/r46/trunk/javadoc/com/google/common/collect/Iterables.html#transform%28java.lang.Iterable,%20com.google.common.base.Function%29)上的通用边界将允许 a`Predicate<Number>`用于 a `Iterable<Integer>`：

```
public static <T> T find(Iterable<T> iterable,
                         Predicate<? super T> predicate) 
```

还有其他原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:50:37.967

是的，我们期望消费者拥有正确的有界通配符参数是绝对准确的，但我想到了另外几个原因：

*   一般来说，除非我们有特定的理由，否则我们不会扩大泛型方法的类型。这项政策已多次获得回报。
*   Java 的类型推断并不总是能够自动找出更高级的泛型，因此保留较窄的泛型可以减少需要显式指定`T`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T22:03:25.913

在`find()`示例中，`T`总是可以明确地推断出来。

在这个`forPredicate[1]()`例子中，T 也可以被明确地推断出来。

在`forPredicate[2]()`示例中，不确定`T`应该是什么。如果方法的结果被赋值给一个目标类型，`T`则可以从目标类型中确定。否则会有点头疼：

```
forPredicate(isPositive).apply(42);  // T is a subtype of Number, but which one? 
```

在 java5/6 中，它不应该编译。（好吧，我在 java 6 上对其进行了测试，它确实可以编译，但这可能是一个错误，因为 java 6 也可以编译`forPredicate(p).apply("str")`）

Java 7 做了一点改进，而新规则恰好规定了`T=Number`. 它有效，但感觉更像是为了它而进行的仲裁。

* * *

理想情况下，我们不需要担心通配符。如果我的整数需要谓词，我应该声明一个`Predicate<Integer>`参数。`Predicate<Number>`争论也可以接受的事实是另一回事。转换应该是编译器的工作`Predicate<Number>`——`Predicate<Integer>`我们可以在不彻底检查现有的 java 泛型类型系统的情况下做到这一点，只需要一个新的转换规则。也可以提供转换库

```
Predicate<Number>  pn = ...;
Predicate<Integer> pi = convert(pn);

Iterable<Integer> iter1 = ...;
Iterable<Number>  iter2 = convert(iter1); 
```

所有`convert()`方法都可以机械生成。

* * *

Java 8 让事情变得更容易一些。我们仍然做不到

```
Predicate<Number>  pn = n -> n.intValue()>0;
Predicate<Integer> pi = pn;  // error! 
```

但我们可以

```
Predicate<Integer> pi = pn::test;  // ok
// it means        pi = (Integer i)->pn.test(i) 
```

还

```
Function<Integer, Boolean> f = pn::test;   // ok 
```

这相当于`f = forPredicate[2](pn)`。在 java 8 中，我们很少需要`forPredicate()`etc 在函数类型之间进行转换。

# vb.net - 通过 DataGridViewColumn 标题的每个循环

> ID：14631357
> 
> 赞同：2
> 
> 时间：2013-01-31T17:11:27.917
> 
> 标签：vb.net, string, foreach, indexof

我有一个包含 2012 到 1900 的列的`DataGridView`调用`DataGridViewHistorical`。我正在尝试遍历列标题并使用年份在字符串中查找特定日期。所以在下面的例子中，我会寻找`2012-01-03, 2011-01-03, 2010-01-03 ... 1900-01-03.`

```
For Each columnYear As DataGridViewColumn In DataGridViewHistorical.Columns
  MessageBox.Show(strBuffer.IndexOf(columnYear & "-01-03"))
Next 
```

当我运行此代码时，出现错误“未为类型定义运算符'&'`'System.Windows.Forms.DataGridViewColumn' and 'String'."`

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:17:51.470

我认为您正在寻找的`HeaderText`财产`DataGridViewColumn`：

```
MessageBox.Show(strBuffer.IndexOf(columnYear.HeaderText & "-01-03")) 
```

# r - 使用部分时间戳信息合并数据帧

> ID：14631358
> 
> 赞同：1
> 
> 时间：2013-01-31T17:11:34.787
> 
> 标签：r, merge, timestamp, dataframe

您好，我有两个数据帧，每个数据帧都有不同的时间戳格式。 组织`DF1`为`m/d/YYYY H:M`和`DF2`。`YYYYmmdd`我想根据日期（月、日和年）的时间戳合并这些数据帧，我不关心合并的时间。当我尝试合并时，结果是一个包含 NA`ts`列的数据框。我认为这是因为时间不匹配，虽然`DF2`不显示时间，但我认为它被识别为 00:00:00，因此合并不起作用。有没有办法忽略时间戳中的时间？

我尝试了以下方法。

```
DF1 <- read.csv("DF1.csv",header=T)
DF2 <- read.csv("DF2.csv",header=T)

DF1$ts <- strptime(DF1$ts, "%m/%d/%Y %H:%M)
DF2$ts <- strptime(DF2$ts, "%Y%m%d")

DF1$ts <- as.POSIXct(DF1$ts)
DF2$ts <- as.POSIXct(DF2$ts)

try <- merge(DF1, DF2, by="ts")

#dput DF1 (sample)
DF1 <- structure(list(LENGTH = c(40, 33.6, 30, 30, 40, 43.5, 50, 40, 
62.5, 30), pLENGTH = c(0, 0.297619048, 0, 1, 0, 0, 1, 0, 0.16, 
0.666666667), LENGTH2 = c(30.7, NA, 30, NA, 25.1, 39.6, 50, 
NA, NA, NA), BURN = c(1L, NA, 1L, NA, 1L, 1L, 1L, NA, NA, 
NA), pBURN = c(0.7675, NA, 1, NA, 0.6275, 0.910344828, 1, NA, 
NA, NA), ts = structure(c(1344916800, NA, 1339819200, NA, 
1339646400, 1345003200, 1340769600, NA, NA, NA), class = c("POSIXct", 
"POSIXt"), tzone = "")), .Names = c("LENGTH", "pLENGTH", "LENGTH2", 
"BURN", "pBURN", "ts"), row.names = c(135L, 242L, 154L, 
56L, 265L, 151L, 328L, 160L, 90L, 364L), class = "data.frame")

#dput DF2 (sample)
DF2<- structure(list(TIMESTAMP = structure(c(1325883600, 1330030800, 
1337371200, 1339876800, 1339531200, 1350590400, 1325797200, 1341950400, 
1335556800, 1340827200), class = c("POSIXct", "POSIXt")), P = c(0, 
0, 0, 0, 1.3, 0, 0, 0, 0, 0), WS = c(4.023, 5.364, 4.917, 
3.129, 4.023, 4.023, 3.576, 4.023, 2.235, 2.682), WD = c(165, 
217.5, 34.5, 292.75, 167.75, 172.75, 319.25, 129.5, 148, 196)), .Names = c("ts", 
"P", "WS", "WD"), row.names = c(6L, 54L, 139L, 286L, 
164L, 292L, 5L, 192L, 118L, 121L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:57:58.560

你可以试试这个：

```
> DF1$ts1 <- format(DF1$ts,'%Y-%m-%d')
> DF2$ts1 <- format(DF2$ts,'%Y-%m-%d')
> merge(DF1,DF2,by.x='ts1',by.y ='ts1')
         ts1 LENGTH pLENGTH LENGTH2 BURN pBURN                ts.x                ts.y P    WS     WD
1 2012-06-16     30       0      30    1     1 2012-06-16 06:00:00 2012-06-16 22:00:00 0 3.129 292.75
2 2012-06-27     50       1      50    1     1 2012-06-27 06:00:00 2012-06-27 22:00:00 0 2.682 196.00 
```

# ms-access - MS Access CurrentDb.execute 不工作

> ID：14631361
> 
> 赞同：2
> 
> 时间：2013-01-31T17:11:40.650
> 
> 标签：ms-access, vbscript

我目前正在 MS Access 2010 中运行一个 vbscript，它从 MS Outlook 中检索一些附件并将该数据插入到 MS Access 数据库中的表中。我遇到的问题是，我正在尝试使用 CurrentDb.Execute 在插入这些记录后（使用 TransferText）更新这些记录，不幸的是，这段代码似乎不起作用（没有抛出错误，没有警告，什么都没有）：

```
Set Db = CurrentDb
DoCmd.SetWarnings True
With Db
  .Execute "UPDATE HOURLY_ENTITY_STATS SET TIMESTAMP = 'statDate'"
Debug.Print .RecordsAffected & " were updated" 
```

因此，每次执行此查询时，都应将一个新值添加到 TIMESTAMP（文本类型）列中，但到目前为止没有任何反应。

在在这里发布问题之前我做了自己的研究，找不到任何有类似问题的人。

如果你能想到什么，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:24:27.643

我不知道为什么我以前没有见过这个，但感谢 HansUp 我让它工作了。问题是我在 SQL 查询中使用了保留字，因此必须将列名封装在括号中 [TIMESTAMP]

谢谢你们。

# testing - Webdriver 测试自动化

> ID：14631362
> 
> 赞同：-3
> 
> 时间：2013-01-31T17:11:44.690
> 
> 标签：testing, selenium, automation, webdriver

我正在使用 webdriver 与 Junit 一起自动执行 webapp 的测试。我不断收到以下错误：

> “NoHttpResponseException：目标服务器未能响应”以非常不规则的方式。

这可能是什么原因，我该如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:43:45.867

我遇到的问题是由于 Chromedriver，不知道出了什么问题，但是当我转移到 IEDriverServer 时，我不再收到异常。

# vb.net - SQL Server 中的更新语句

> ID：14631363
> 
> 赞同：1
> 
> 时间：2013-01-31T17:11:52.007
> 
> 标签：vb.net, sql-server-2008, records

在插入未更新的新记录并且我没有收到任何错误后，我正在尝试更新一些记录。

这是我的代码：

```
 If txtSearch.Text <> txtUserID.Text Then
        Try
            Dim connectionString As String = "Data Source=.\SqlExpress;Initial Catalog=Subscription;Integrated Security=True"
            Using cn As New SqlConnection(connectionString)
                cn.Open()
                cmd.CommandText = "INSERT INTO Customers (UserID, RegisteredDate, ExpiryDate, FirstName, LastName, Address, State, City, Phone, Mobile, Email) VALUES(@UserID, @RegisteredDate, @ExpiryDate, @FirstName, @LastName, @Address, @State, @City, @Phone, @Mobile, @Email)"

                Dim param1 As New SqlParameter()
                param1.ParameterName = "@UserID"
                param1.Value = txtUserID.Text.Trim()
                cmd.Parameters.Add(param1)

                Dim param2 As New SqlParameter()
                param2.ParameterName = "@RegisteredDate"
                param2.Value = RegisteredDate.Value
                cmd.Parameters.Add(param2)

                Dim param3 As New SqlParameter()
                param3.ParameterName = "@ExpiryDate"
                param3.Value = ExpiryDate.Value
                cmd.Parameters.Add(param3)

                Dim param4 As New SqlParameter()
                param4.ParameterName = "@FirstName"
                param4.Value = txtFirstName.Text.Trim()
                cmd.Parameters.Add(param4)

                Dim param5 As New SqlParameter()
                param5.ParameterName = "@LastName"
                param5.Value = txtLastName.Text.Trim()
                cmd.Parameters.Add(param5)

                Dim param6 As New SqlParameter()
                param6.ParameterName = "@Address"
                param6.Value = txtAddress.Text.Trim()
                cmd.Parameters.Add(param6)

                Dim param7 As New SqlParameter()
                param7.ParameterName = "@State"
                param7.Value = cboState.SelectedItem.ToString
                cmd.Parameters.Add(param7)

                Dim param8 As New SqlParameter()
                param8.ParameterName = "@City"
                param8.Value = cboCity.SelectedItem.ToString
                cmd.Parameters.Add(param8)

                Dim param9 As New SqlParameter()
                param9.ParameterName = "@Phone"
                param9.Value = txtPhone.Text.Trim()
                cmd.Parameters.Add(param9)

                Dim param10 As New SqlParameter()
                param10.ParameterName = "@Mobile"
                param10.Value = txtMobile.Text.Trim()
                cmd.Parameters.Add(param10)

                Dim param11 As New SqlParameter()
                param11.ParameterName = "@Email"
                param11.Value = txtEmail.Text.Trim()
                cmd.Parameters.Add(param11)

                cmd.Connection = cn
                cmd.ExecuteNonQuery()
                cn.Close()
            End Using
            Successlbl.Show()
            Successlbl.ForeColor = Color.DarkBlue
            Successlbl.Text = "Record Saved Successfully!."

        Catch
            Successlbl.Show()
            Successlbl.ForeColor = Color.Red
            Successlbl.Text = "Error in creating record!"
        End Try
    Else
        Try
            Dim connectionString As String = "Data Source=.\SqlExpress;Initial Catalog=Subscription;Integrated Security=True"
            Using cn As New SqlConnection(connectionString)
                cn.Open()
                cmd.CommandText = "UPDATE Customers SET (UserID, RegisteredDate, ExpiryDate, FirstName, LastName, Address, State, City, Phone, Mobile, Email) VALUES(@UserID, @RegisteredDate, @ExpiryDate, @FirstName, @LastName, @Address, @State, @City, @Phone, @Mobile, @Email) WHERE UserID=" & txtUserID.Text & ""

                Dim param1 As New SqlParameter()
                param1.ParameterName = "@UserID"
                param1.Value = txtUserID.Text.Trim()
                cmd.Parameters.Add(param1)

                Dim param2 As New SqlParameter()
                param2.ParameterName = "@RegisteredDate"
                param2.Value = RegisteredDate.Value
                cmd.Parameters.Add(param2)

                Dim param3 As New SqlParameter()
                param3.ParameterName = "@ExpiryDate"
                param3.Value = ExpiryDate.Value
                cmd.Parameters.Add(param3)

                Dim param4 As New SqlParameter()
                param4.ParameterName = "@FirstName"
                param4.Value = txtFirstName.Text.Trim()
                cmd.Parameters.Add(param4)

                Dim param5 As New SqlParameter()
                param5.ParameterName = "@LastName"
                param5.Value = txtLastName.Text.Trim()
                cmd.Parameters.Add(param5)

                Dim param6 As New SqlParameter()
                param6.ParameterName = "@Address"
                param6.Value = txtAddress.Text.Trim()
                cmd.Parameters.Add(param6)

                Dim param7 As New SqlParameter()
                param7.ParameterName = "@State"
                param7.Value = cboState.SelectedItem.ToString
                cmd.Parameters.Add(param7)

                Dim param8 As New SqlParameter()
                param8.ParameterName = "@City"
                param8.Value = cboCity.SelectedItem.ToString
                cmd.Parameters.Add(param8)

                Dim param9 As New SqlParameter()
                param9.ParameterName = "@Phone"
                param9.Value = txtPhone.Text.Trim()
                cmd.Parameters.Add(param9)

                Dim param10 As New SqlParameter()
                param10.ParameterName = "@Mobile"
                param10.Value = txtMobile.Text.Trim()
                cmd.Parameters.Add(param10)

                Dim param11 As New SqlParameter()
                param11.ParameterName = "@Email"
                param11.Value = txtEmail.Text.Trim()
                cmd.Parameters.Add(param11)

                cmd.Connection = cn
                cmd.ExecuteNonQuery()
            End Using
            Successlbl.Show()
            Successlbl.ForeColor = Color.DarkBlue
            Successlbl.Text = "Record updated Successfully!."

        Catch
            Successlbl.Show()
            Successlbl.ForeColor = Color.Red
            Successlbl.Text = "Error in updating record!"
        End Try
    End If 
```

谁能告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:19:47.343

对于 SQL Server / T-SQL，您的`UPDATE`陈述完全错误。您不能使用与`INSERT`语句相同的语法。`UPDATE`在[MSDN SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms177523.aspx)中阅读有关详细语法的更多信息。

您需要指定：

```
UPDATE dbo.Customers 
SET 
   RegisteredDate = @RegisteredDate, 
   ExpiryDate = @ExpiryDate, 
   FirstName = @FirstName, 
   LastName = @LastName, ...... -- and so on for all relevant columns
WHERE UserID = @UserID 
```

另外：您在任何地方都使用参数（+1！），但**不是**子句....`WHERE`改变它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T07:55:41.183

```
 Try
        If con.State = ConnectionState.Open Then con.Close()
        con.Open()
        global_command = New SqlCommand("UPDATE products_tbl set running_no = '" & txt_running.Text & "' where template_code = 'n'and prod_no = '" & txt_product.Text & "'", con)
        global_command.ExecuteNonQuery()
        global_command.Dispose()

        MsgBox("Successfully updated!", MsgBoxStyle.Information, "Message")
        where = vbNullString

    Catch ex As Exception
        MsgBox("Trace No 4: System Error or Data Error!" + Chr(13) + ex.Message + Chr(13) + "Please Contact Your System Administrator!", vbInformation, "Message")
    End Try

End Sub 
```

# android - 如何解决这个空指针异常？

> ID：14631364
> 
> 赞同：0
> 
> 时间：2013-01-31T17:11:52.347
> 
> 标签：android, android-emulator

我遇到了一个错误，`principal==0.0`我不明白为什么会这样。

```
if(et1.getText()!=null) {
    try {
        principal = Double.valueOf(et1.getText().toString());
}
catch(Exception e) {
    message = "Incorrect value";
}
}
// The problem is in the if statement below!
if(principal==0.00) {
    message = "value cannot be zero";
    title = "error";
} 
```

我得到的错误如下：

```
 01-31 22:21:37.700: E/AndroidRuntime(985): FATAL EXCEPTION: main
   01-31 22:21:37.700: E/AndroidRuntime(985):
   java.lang.NullPointerException 01-31 22:21:37.700:
   E/AndroidRuntime(985):   at
   com.compoundinterest.MainActivity$1.onClick(MainActivity.java:65)
   01-31 22:21:37.700: E/AndroidRuntime(985):   at
   android.view.View.performClick(View.java:2485) 01-31 22:21:37.700:
   E/AndroidRuntime(985):   at
   android.view.View$PerformClick.run(View.java:9080) 01-31
   22:21:37.700: E/AndroidRuntime(985):     at
   android.os.Handler.handleCallback(Handler.java:587) 01-31
   22:21:37.700: E/AndroidRuntime(985):     at
   android.os.Handler.dispatchMessage(Handler.java:92) 01-31
   22:21:37.700: E/AndroidRuntime(985):     at
   android.os.Looper.loop(Looper.java:123) 01-31 22:21:37.700:
   E/AndroidRuntime(985):   at
   android.app.ActivityThread.main(ActivityThread.java:3683) 01-31
   22:21:37.700: E/AndroidRuntime(985):     at
   java.lang.reflect.Method.invokeNative(Native Method) 
```

这个错误的原因可能是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:24:11.517

Try this :

```
// Declaration on top
Double principal=0.00; 
```

Use this :

```
EditText et1 = (EditText) findViewById(R.id.myEdit);

if(!et1.getText().toString().equals("")) {
    try {
        principal = Double.parseDouble(et1.getText().toString());
    }
    catch(Exception e) {
        message = "Incorrect value";
    }
}

if(principal==0.00) {
    message = "value cannot be zero";
    title = "error";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:25:04.747

似乎主体为空。

当你做这个检查。

```
if(principal==0.00) 
```

它实际上是

```
if(principal.doubleValue() ==0.00) 
```

这会导致 nullPointer 因为主体为空。

所以改成：

```
if(principal ==null)
//return or do something
else if(principal ==0.00) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:15:20.813

不知道更多，很难说。我的猜测是，如果 et1.getText() == null 那么主体永远不会被初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:17:42.180

`valueOf`当您的变量期间发生异常时，`principal`不会设置。并且比较会抛出 NullPointerException，因为它会自动拆箱`principal`为不能为 null 的 double。

因此应该是

```
if (principal == null) {
  // error handling
} else if (principal==0.00) { 
```

并在`valueOf`.

* * *

我知道这是您对同一问题的第四个问题，您只是从[Kovge 的答案](https://stackoverflow.com/a/14569435/199048)中复制了您的代码。如果您尝试理解给定的答案，您将学到更多。

以下是您的复制粘贴方法的一些变体：

1.  显式忽略空值：

    ```
    if (principal == null && principal==0.00) { 
    ```

2.  使用 Doubles 忽略空值：

    ```
    if (Double.valueOf(0.0).equals(principal)) { 
    ```

# javascript - 使用 Firebug 或其他工具查找导致某些操作的 Javascript 文件和行号

> ID：14631369
> 
> 赞同：1
> 
> 时间：2013-01-31T17:12:09.903
> 
> 标签：javascript, debugging, firebug

是否可以使用 Firebug（或其他一些工具）来找出一些 JS 动作来自哪里......即哪个文件和行。

例如，我有一个导致下拉/幻灯片的按钮，我想找到影响该下拉的 Javascript。我知道我可以通过做大量的侦探工作来找到它；但如果它是我正在寻找的 CSS，那么我所要做的就是查看 Firebug，它会给我文件和行号。有没有办法为 Javascript 获得类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:17:04.413

使用 firefox 的[firequery](http://firequery.binaryage.com/)插件，您可能能够找到有关哪些事件附加到某些元素的一些信息。

除此之外，您解决问题的最佳方法是使用控制台日志来查明哪个元素正在触发事件。也许通过在该元素上搜索类名或 id 将是一个不错的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:20:20.053

在 Chrome 的开发者工具中，在元素选项卡上，您会在右侧看到一列，其中包含有关所选元素的信息。其中一个面板称为事件侦听器，它显示绑定到元素和源位置的事件。

# django - 循环依赖南方

> ID：14631371
> 
> 赞同：0
> 
> 时间：2013-01-31T17:12:19.547
> 
> 标签：django, postgresql, migration, django-south

我有一个初始迁移的应用程序，它的外键指向第二个没有南迁移的应用程序。现在我正在尝试将迁移添加到第二个应用程序，但我面临循环依赖错误。

我能够迁移我的生产数据库，但是我的数据库上的 syncdb --migrate 遇到了问题。

那是我试过的：

```
./manage.py convert_to_south app2

./manage.py app2 --auto 
```

我想在此之后恢复我的数据库，什么时候再试一次

```
./manage.py syncdb --migrate 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:46:20.083

首先运行这个命令：

```
python manage.py schemamigration app_name --auto 
```

然后：

```
python manage.py migrate 
```

因为您已经有一个现有的迁移，所以您必须删除文件并运行一些东西 --delete--ghost--fake （我忘记了确切的命令）来删除现有的。

# c# - 必须同时包含数字和字母的文本框？

> ID：14631373
> 
> 赞同：1
> 
> 时间：2013-01-31T17:12:32.943
> 
> 标签：c#, textbox, alphanumeric

我想知道有没有办法确保用户在文本框中输入数字和字母，如果没有提示消息？我有它如下：

```
if(!Regex.IsMatch(string, @"^[a-zA-Z]+$") && !Regex.IsMatch(string, @"^[1-9]+$"))
{  
    MessageBox.Show("Please Enter both numbers and letters");
    return;
} 
```

所以我在这里想说的是，如果字符串没有字母并且如果字符串没有数字，则提示错误。但是，如果你输入所有字母（或数字），没有错误提示，所以我想知道是否有办法做到这一点。我研究了这些问题，除了如何允许某些字符之外没有发现任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:15:07.917

目前，您的代码说

> 如果字符串不完全由字母组成，也不完全由数字组成，则显示消息

这几乎与您所追求的完全相反。

要修复它，您需要将“不完全由”更改为“不包含”，并将“和”更改为“或”：

```
if(!Regex.IsMatch(string, @"[a-zA-Z]") || !Regex.IsMatch(string, @"[1-9]"))
{  
    MessageBox.Show("Please Enter both numbers and letters");
    return;
} 
```

`and`正则表达式现在只查找单个字母或数字，而`or`.

如果您想确保您的输入*仅*包含字母和数字，您可以单独执行以下步骤：

```
if(Regex.IsMatch(string, @"[^a-zA-Z0-9]"))
{  
    MessageBox.Show("Please Enter only numbers and letters");
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:15:09.627

简单的想：

`[a-zA-Z0-9]+`是您可能想尝试的正则表达式。

`[a-zA-Z0-9\s]+`是单词/数字之间允许有空格的正则表达式。

在这里试试你的正则表达式：[http ://regexhero.net/](http://regexhero.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:18:31.777

您要做的是在字符串没有任何字母或没有任何数字时显示消息。

您也不需要正则表达式：

```
if(!str.Any(Char.IsLetter) || !str.Any(Char.IsDigit)) {  
  MessageBox.Show("Please Enter both numbers and letters");
  return;
} 
```

注意：[检查 Char.IsLetter](http://msdn.microsoft.com/en-us/library/yyxz6h5w.aspx)的规范，以便字符集对于您想要执行的操作是可接受的。

# java - 确保方法在当时运行

> ID：14631376
> 
> 赞同：1
> 
> 时间：2013-01-31T17:12:41.600
> 
> 标签：java, multithreading

我用线程制作了一个java程序，有时线程使用静态方法，问题是该方法一次只能运行一次。因此，如果该方法已经在运行，它不应该再次启动，而是等待然后重新启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:14:09.007

您可以简单地将该静态方法标记为`synchronized`，它将确保互斥：2 个线程将无法同时运行它，其中一个线程必须等到另一个线程完成该方法的执行：

```
public static synchronized void method() {
    //this part can only be executed by one thread at a time
} 
```

这种表示法等同于使用你的类的监视器作为操作的锁，即：

```
class YourClass {
    public static void method() {
        synchronized(YourClass.class) {
            //this part can only be executed by one thread at a time
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:17:02.930

“词”`synchronized` 会帮助你

```
public static synchronized void method() {
....code here 
notify();} 
```

# iphone - 来自 Xcode 的选项卡式应用程序起点 shell 在 5.1/5.0 中不起作用

> ID：14631379
> 
> 赞同：0
> 
> 时间：2013-01-31T17:12:54.620
> 
> 标签：iphone, ios, xcode

当我使用 Xcode 版本 4.5.2 (4G2008a) 为通用应用程序 5.0 及更高版本创建新的“选项卡式应用程序”时，它在 6.0 模拟器上运行良好，但在 5.1 或 5.0 上运行良好。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1;
    UIViewController *viewController2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil];
        viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil];
    } else {
        viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPad" bundle:nil];
        viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController_iPad" bundle:nil];
    }

    self.tabBarController = [[UITabBarController alloc] init];
    **self.tabBarController.viewControllers = @[viewController1, viewController2];**
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是断点捕获的地方 **self.tabBarController.viewControllers = @[viewController1, viewController2];**

我没有改变苹果设置的任何内容。我看过，但也许我在谷歌上搜索错误的东西。

![在此处输入图像描述](../Images/e4d3f00cbdd29223b5625c07b9780d89.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:23:32.220

Its because of the auto layout property in the xib files. Go to both of the xib files and in the right menu click the first tab at the top while the view is selected and un-tick the use auto layout text box.

![enter image description here](../Images/61c44857972729c870da7b703ff09f61.png)

Hope this Helps.

Sam

# python - Python中的类使用__slots__时如何获取属性的名称？

> ID：14631381
> 
> 赞同：0
> 
> 时间：2013-01-31T17:12:55.983
> 
> 标签：python, inheritance, reflection, slots

当我在 Python 中定义一个新样式的类时，我可以使用 -Attribute 获取定义的属性（名称和值）`__dict__`，其中包含事物的字典。

我想在我的类及其子类中使用插槽，因为我将创建数十万个实例并希望节省一些内存。但是，确实使用的类`__slots__`将没有`__dict__`-Attribute，因此我不能以这种方式反射性地访问它们的值。

还有另一种方法，更可取的是保留为此类定义的属性的顺序？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:16:02.450

您应该使用[`dir()`内置函数](http://docs.python.org/2/library/functions.html#dir)来列出对象的成员，而不是直接访问`__dict__`或访问`__slots__`。

实例`__dict__`只会列出直接在实例上设置的属性，同时`dir()`也会列出类和该类的基类的属性（包括方法）。它还将列出任何定义为插槽的内容。

您可以使用该[`inspect`模块](http://docs.python.org/2/library/inspect.html)来帮助您过滤`dir()`; 如果您对方法不感兴趣，例如`inspect.ismethod()`可以提供帮助。

# java - 如何使用 Gson 以十六进制表示整数？

> ID：14631387
> 
> 赞同：4
> 
> 时间：2013-01-31T17:13:17.060
> 
> 标签：java, json, hex, gson

我有一个对象列表，比方说：

```
List<Timestamp> 
```

每个“Timestamp”对象包括其他对象，特别是它有一个“Tag”对象。

```
class Timestamp {
    String time;
    ...
    Tag tag;
    ...
} 
```

现在，每个 Tag 对象都由“Integer”类型的 ID 标识。

```
class Tag {
    Integer id;
    ...
} 
```

由于一些原因，我必须使用 Gson 库将整个时间戳列表的 JSON 表示形式写入文件。在某些情况下，我需要每个标签的 ID 的十进制表示，而在其他情况下，我需要十六进制格式的 ID。

如何在两种格式之间“切换”？考虑到要编写 Timestamp 对象的整个列表，我使用以下指令：

```
ps.println(gson.toJson(timestamps)); 
```

而且我不能在 Tag 类中添加其他字段/类型/对象，因为 JSON 表示会不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:38:48.273

我认为这是答案：

1.  为 Tag 类编写一个自定义的 gson 序列化程序。
2.  向 Tag 添加一个标志变量，指示何时以十六进制输出 id 以及何时以十进制输出 id。
3.  在关注新添加的标志的 Tag 类上创建一个 toString() 方法。

自定义序列化程序（来自 gson doc 示例的变体）

```
private class TagSerializer implements JsonSerializer<Tag>
{
  public JsonElement serialize(Tag src, Type typeOfSrc, JsonSerializationContext context)
  {
    return new JsonPrimitive(src.toString());
  }
} 
```

注册自定义序列化程序

```
GsonBuilder gson = new GsonBuilder();
gson.registerTypeAdapter(Tag.class, new TagSerializer()); 
```

标签更新

```
boolean displayIdInHex = false;

public void setDisplayIdInDecimal()
{
  displayIdInHex = false;
}

public void setDisplayIdInHex()
{
  displayIdInHex = true;
}

public String toString()
{
  ... stuff ...
  if (displayIdInHex)
  {
    ... output id in hex.
  }
  else
  {
    ... output id in decimal.
  }
} 
```

时间戳更新 public void setDisplayIdInDecimal() { tag.setDisplayIdInDecimal(); }

```
public void setDisplayIdInHex()
{
  tag.setDisplayIdInHex();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:30:14.370

An`Integer`本身没有格式，它只是一个数字。
如果你想用十六进制格式，你必须使用 a`String`而不是`Integer`.

# jquery - Padrino 控制器流程

> ID：14631394
> 
> 赞同：0
> 
> 时间：2013-01-31T17:13:45.307
> 
> 标签：jquery, ruby, sinatra, padrino

我一直在使用 padrino 框架制作 AJAX 进度条。使用 jQuery，我向一个特殊页面发出 GET 请求，该页面将返回状态更新。但是实际的渲染和处理发生在 POST 页面上。这是我的控制器的精简版本：

```
#Starting page
get :index do
 render 'start'
end
#returns a status string to jquery request
get :statusPage do
 return getStatus()
end
#Confirmation page
get :confirmation do
  render 'confirmComplete'
end
#Problem route not rendering before working!
post :title do
  render 'progress'
  mainProcessing()
end 
```

这个想法是进度页面可以监视主要方法并更新其图形以向用户显示一些进度。问题是，Padrino 总是首先运行所有辅助方法，最后渲染，这会立即跳转到我的确认页面。有没有强制帕德里诺按照我指定的顺序运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:29:45.677

我不知道，但您可以开始使用检查器并添加正确的内容类型：

IE

```
get :statusPage, :provides => :js do
  myFunction()
end

# /statusPage.js 
```

# java - Java - 未被调用的覆盖方法

> ID：14631404
> 
> 赞同：3
> 
> 时间：2013-01-31T17:14:12.207
> 
> 标签：java, class, derived

我正在做一个 Java 练习，但不知道我做错了什么。我创建了一个电影类（带有变量：评级、标题、movieId 和 FEE_AMT 的常量），然后扩展了该类：动作、喜剧和戏剧。这些派生类没有其他变量，只是不同的 FEE_AMT。

在电影（和派生类）中有一种计算滞纳金的方法：

```
/**
* Returns the late fee due on a Movie rental
*   @param  days the number of days for late fee calculations
*   @return   true or false depending on the evaluation of the expression
**/ 
public double calcLateFees(int days){
    return(days * FEE_AMT);
} 
```

如果我只是用对象直接调用该方法，例如：`comedy1.calcLateFees(2)` - 它将根据派生方法中不同的常量值生成正确的费用金额。

现在我需要创建一个`Rental`类并`main()`创建一个类型为rental 类的数组来保存Rental 对象（由Movie 对象、renterId 和daysLate 组成）。这是接收一组 Rental 对象并返回数组中所有租金的滞纳金的方法：

```
/**
 * lateFeesOwed returns the amount of money due for late fees on all movies 
 *  which are located in an array of Rentals.
 *
 *  @return feeDue the amount of money due for late fees.
 */
public static double lateFeesOwed(Rental[] rentalArray){
    double feeDue = 0;

    for(int i = 0; i < rentalArray.length; i++)
    {
        feeDue += rentalArray[i].calcFees();  //This is part of the problem??

    }

    return feeDue;
} 
```

这个方法调用：

```
/**
 * CalcFees returns the amount of money due for late fees on a movie rental.
 *
 *  @return feeDue the amount of money due for late fees.
 */
public double calcFees(){
  double feeDue = rentalName.calcLateFees(this.daysLate);  
  return feeDue;
} 
```

但问题是该`calcFees()`方法正在调用`calcLateFees()`，但不是调用派生类，而是调用 Movie 类并返回不正确的数量。

我不确定我的问题在哪里阻止了被覆盖的方法`calcLateFees()`被调用。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:16:30.033

> 这些派生类没有其他变量，只是不同的 FEE_AMT。

这就是问题。数据成员不是多态的。您需要做的是`FEE_AMT`变成一个方法，并在派生类中覆盖该方法。

```
// Movie

public double calcLateFees(int days){
    return(days * getFeeAmt());
}

protected abstract double getFeeAmt(); // or implement if you wish

// Action etc

@Override
protected double getFeeAmt() { return ...; } 
```

# html - 节省 HTML5 to PNG or image

> ID：14631408
> 
> 赞同：14
> 
> 时间：2013-01-31T17:14:23.853
> 
> 标签：html, svg, export

我有使用 D3 Javascript 库生成的图表，我需要将它们保存到 PNG 或 SVG 文件中。

是否有一些图书馆可以完成这项工作？

我发现了这个[https://github.com/sampumon/SVG.toDataURL](https://github.com/sampumon/SVG.toDataURL)但在我的 html5 上不起作用，在 Firefox 控制台中我收到了这个错误：

NS_ERROR_NOT_AVAILABLE：组件不可用 [Interrompi per questo errore]

ctx.drawImage(img, 0, 0);

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-09T13:52:47.913

[developer.mozilla.org](https://developer.mozilla.org/pl/docs/Web/API/Canvas_API/Drawing_DOM_objects_into_a_canvas)中的示例，展示了如何使用 canvas 元素将 svg 导出为 png。

```
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

var data = '<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">' +
           '<foreignObject width="100%" height="100%">' +
           '<div xmlns="http://www.w3.org/1999/xhtml" style="font-size:40px">' +
             '<em>I</em> like ' + 
             '<span style="color:white; text-shadow:0 0 2px blue;">' +
             'cheese</span>' +
           '</div>' +
           '</foreignObject>' +
           '</svg>';

var DOMURL = window.URL || window.webkitURL || window;

var img = new Image();
var svg = new Blob([data], {type: 'image/svg+xml'});
var url = DOMURL.createObjectURL(svg);

img.onload = function () {
  ctx.drawImage(img, 0, 0);
  DOMURL.revokeObjectURL(url);
  var png_img = canvas.toDataURL("image/png");
}

img.src = url; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-09T14:50:49.507

# 服务器端脚本方法

这是将 svg 元素保存到 png 的简单方法（尽管它使用服务器端脚本，这可能与您的期望不同）： Checkout [this page](http://d3export.cancan.cshl.edu/)。

正如作者所记录的，客户端提取 svg 元素（使用 XMLSerializer.serializeToString）并将其发送到服务器；服务器将其转换为 png 并将其发送回客户端。服务器可以使用任何方便的程序（在这种情况下为 rsvg-convert）。

# Canvg 库

您可以使用这个库在客户端执行此操作[（检查一下！）](https://code.google.com/p/canvg/)：

> canvg 是一个 SVG 解析器和渲染器。它获取 SVG 文件的 URL 或 SVG 文件的文本，在 JavaScript 中对其进行解析，并将结果呈现在 Canvas 元素上

像这样使用它：

```
//load a svg snippet in the canvas with id = 'drawingArea'
canvg(document.getElementById('drawingArea'), '<svg>... </svg>') 
```

然后你可以使用 toDataURL 方法： `document.getElementById('drawingArea').toDataURL('image/png');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-09T15:25:15.907

此扩展程序适用`<svg>`于页面中的所有标签：[https ://chrome.google.com/webstore/detail/svg-export/naeaaedieihlkmdajjefioajbbdbdjgp?hl=en-GB](https://chrome.google.com/webstore/detail/svg-export/naeaaedieihlkmdajjefioajbbdbdjgp?hl=en-GB)

# jquery - 使用 Javascript 或 JQuery 在点击时显示/隐藏，以及更改图像

> ID：14631414
> 
> 赞同：0
> 
> 时间：2013-01-31T17:14:46.633
> 
> 标签：jquery, css, onclick

我正在尝试通过单击网页侧面的栏来显示菜单。

我有一个可点击的 div，它已经隐藏或显示了内容。

但是，我也希望图像在点击时也能改变，但我不知道如何同时做到这一点。目前我在 CSS 代码中声明了背景图像，但我知道这可能需要更改。

这是我到目前为止的javascript：

```
function toggle_visibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == 'block')
        e.style.display = 'none';
    else
        e.style.display = 'block';
} 
```

[jsfiddle 在这里，其中包含 html 和 css。](http://jsfiddle.net/KWxV2/)

我希望它在解释方面比我做得更好。带着问题发火，因为我在解释我要道歉的时候惨遭失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:21:21.260

你或多或少想要这样的东西：

```
function toggle_visibility(id) {
    var e = document.getElementById(id);
    if(e.style.display == 'block'){
        e.style.display = 'none';
        e.style.background-image = "url('path')";
    }else{
        e.style.display = 'block';
        e.style.background-image = "url('path')";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:40:29.777

如果您使用 jquery 询问解决方案：

```
function toggle_visibility(content, current) {
  var e = $(content);
  var curr = $(current);
  if (e.css('display') == 'block') {
      e.css('display', 'none');
      curr.css('background','red');
  } else {
      e.css('display', 'block');
      curr.css('background','#3E3E3E');
  }
}

$('#float a').click(function () {
    toggle_visibility($('#contents'), $(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:47:07.673

jquery方法...

```
<div id="float" style="background-color: Red">
        <a id="linkID" href="#">link</a>
    </div>
    <div id="contents" style="background-color: Blue">
        contents
    </div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#linkID").click(function () {
            $("#contents").toggle();
            if ($("#contents").is(':visible') === true) {
                $("#float").css("background-color", "green");
            } else {
                $("#float").css("background-color", "black");
            }
        });

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:32:20.377

我无法得到任何这些响应，这是我的错，而不是给我的代码。我可能还不够了解它。

相反，我找到了不同的解决方案。我的图像现在在 HTML 中声明，而不是在 CSS 中，如下所示：

```
<script type="text/javascript">
function toggleVisibility(divID, imgID)
{
    if (document.getElementById(divID).style.display == "block") 
    {
        document.getElementById(divID).style.display = "none";
        document.getElementById(imgID).src = "images/contents2.png";
    } 
    else 
    {
        document.getElementById(divID).style.display = "block";
        document.getElementById(imgID).src = "images/contents1.png";
    }
} 
```

```
<div id="float">
    <a href="#" onclick="toggleVisibility('contents','contentsImg')">
    <img id="contentsImg" src="images/contents2.png" onclick="toggleVisibility('showDiv',this.id)"/></a>
</div>

<div id="contents">
    contents
</div> 
```

感谢你的帮助。:)

# android - Android 和 ADB 上的 PAW 服务器/BeanShell

> ID：14631426
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:15:25.150
> 
> 标签：android, apk, adb, beanshell

我需要远程安装 APK 并想使用 PAW Server。我知道 PAW Server 本身不能直接安装 APK，但我可以在设备上启用 ADB 并使用 PAW Server 的 BeanShell 脚本来执行 adb install。不幸的是，我是 BeanShell n00b，并没有任何关于一起使用 BeanShell 和 ADB 的文档。有谁知道这是否可能以及我如何从 BeanShell 调用 ADB？

编辑澄清：该设备将位于另一个物理位置，我可以通过 VPN 访问，因此我可以通过 IP 而非 USB 寻址平板电脑。这就是为什么我需要 PAW Server 或类似的东西，而不仅仅是来自 PC 的标准 ADB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:11:08.910

如果您有权访问 adb - 您不需要任何其他东西来安装软件包。您可以使用`adb install <apk>`或者如果软件包文件已经下载到设备 -`adb shell pm install <apk>`命令

# php - laravel 基本路径

> ID：14631436
> 
> 赞同：15
> 
> 时间：2013-01-31T17:16:07.037
> 
> 标签：php, laravel

我使用 URL::base(); 我得到这个网址：

```
http://www.kp.com.mx/sis_colgate/public 
```

但我需要的是这条完整的路径：

```
/home/belendez/public_html/sis_colgate/public 
```

有谁知道我怎样才能得到那条路？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2019-12-10T11:38:27.457

Laravel 有路径[助手](https://laravel.com/docs/master/helpers#paths)：

```
base_path();    // '/var/www/mysite'
app_path();     // '/var/www/mysite/app'
storage_path(); // '/var/www/mysite/storage' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-31T17:20:27.480

您要使用的是`path`助手。

URL 助手用于生成 HTTP URL。

尝试`path('public')`Laravel 3 中的功能，

或`public_path()`Laravel 4 中的函数。

编辑：更新了 Laravel 4 的答案，感谢 Erin

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T08:45:54.633

您可以在文档中找到有关路径的信息：

*   [拉拉维尔 6](https://laravel.com/docs/6.x/helpers#paths)
*   [拉拉维尔 5](https://laravel.com/docs/5.0/helpers#paths)
*   [拉拉维尔 4](https://laravel.com/docs/4.2/helpers#paths)

# node.js - 将内容注入的 Express 中间件

> ID：14631443
> 
> 赞同：0
> 
> 时间：2013-01-31T17:16:49.640
> 
> 标签：node.js, express, connect, middleware

我想创建一些 Express 中间件，将内容注入服务器返回的每个 HTML 文档的 <head> 部分。这是可能的还是可取的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:08:39.463

~~[快递文档/res.set](http://expressjs.com/api.html#res.set)~~

例子：

```
app.all("*", function(req,res,next){
    res.set({
        "Myheader1":"Data1",
        "MyHeader2":"Data2"
    });
    next();
}); 
```

 ~~您应该使用像[JADE](http://jade-lang.com/)这样的模板引擎，它允许布局，您可以定义基本继承。我建议您查看 Jade 文档中的[模板继承](https://github.com/visionmedia/jade#template-inheritance)。我敢打赌大多数模板语言都有这个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T07:55:58.447

您可以使用[ejs](http://ejs.co)作为视图引擎。`server.js`在您的示例中设置视图引擎：

```
// Set the view engine to ejs (JS templating)
app.set('view engine', 'ejs'); 
```

在您的视图（.ejs）中，您可以通过这种方式添加您的部分：

```
<%include ../partials/head %> 
```~~

# php - xdebug 安装

> ID：14631445
> 
> 赞同：0
> 
> 时间：2013-01-31T17:16:55.800
> 
> 标签：php, xdebug

这是我在模块设置下的 php.ini 文件中的内容：

```
[xdebug]
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

在文件末尾的某处：

```
[PHP_XDEBUG]
extension=php_xdebug-2.2.1-5.3-vc9.dll 
```

当我从 netbeans 调试一些 php 文件时，脚本不会在断点处停止。但是在我单击停止按钮后，我看到：**DEBUG SESSION ENDED**，所以没有错误。

以下是来自 phpinfo() 的一些我认为可能有用的信息：

```
PHP Version 5.3.14

System  Windows NT TUGAY-PC 6.1 build 7601 (Windows 7 Home Premium Edition Service Pack 1) i586
Build Date  Jun 13 2012 18:50:12
Compiler    MSVC9 (Visual C++ 2008)
Architecture    x86
QUERY_STRING    XDEBUG_SESSION_START=netbeans-xdebug
REQUEST_URI /Framework/index.php?XDEBUG_SESSION_START=netbeans-xdebug
SCRIPT_NAME /Framework/index.php
xdebug

xdebug support  enabled
Version 2.2.1
IDE Key netbeans-xdebug
XDEBUG NOT LOADED AS ZEND EXTENSION
Directive   Local Value Master Value
xdebug.auto_trace   Off Off
xdebug.cli_color    0   0
xdebug.collect_assignments  Off Off
xdebug.collect_includes On  On
xdebug.collect_params   0   0
xdebug.collect_return   Off Off
xdebug.collect_vars Off Off
xdebug.coverage_enable  On  On
xdebug.default_enable   On  On
xdebug.dump.COOKIE  no value    no value
xdebug.dump.ENV no value    no value
xdebug.dump.FILES   no value    no value
xdebug.dump.GET no value    no value
xdebug.dump.POST    no value    no value
xdebug.dump.REQUEST no value    no value
xdebug.dump.SERVER  no value    no value
xdebug.dump.SESSION no value    no value
xdebug.dump_globals On  On
xdebug.dump_once    On  On
xdebug.dump_undefined   Off Off
xdebug.extended_info    On  On
xdebug.file_link_format no value    no value
xdebug.idekey   no value    no value
xdebug.max_nesting_level    100 100
xdebug.overload_var_dump    On  On
xdebug.profiler_aggregate   Off Off
xdebug.profiler_append  Off Off
xdebug.profiler_enable  Off Off
xdebug.profiler_enable_trigger  Off Off
xdebug.profiler_output_dir  \   \
xdebug.profiler_output_name cachegrind.out.%p   cachegrind.out.%p
xdebug.remote_autostart Off Off
xdebug.remote_connect_back  Off Off
xdebug.remote_cookie_expire_time    3600    3600
xdebug.remote_enable    On  On
xdebug.remote_handler   dbgp    dbgp
xdebug.remote_host  localhost   localhost
xdebug.remote_log   no value    no value
xdebug.remote_mode  req req
xdebug.remote_port  9000    9000
xdebug.scream   Off Off
xdebug.show_exception_trace Off Off
xdebug.show_local_vars  Off Off
xdebug.show_mem_delta   Off Off
xdebug.trace_enable_trigger Off Off
xdebug.trace_format 0   0
xdebug.trace_options    0   0
xdebug.trace_output_dir \   \
xdebug.trace_output_name    trace.%c    trace.%c
xdebug.var_display_max_children 128 128
xdebug.var_display_max_data 512 512
xdebug.var_display_max_depth    3   3 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:19:25.957

它需要作为 zend_extension 加载，我建议添加一个 ide 密钥：

```
[xdebug]
zend_extension="/usr/lib64/php/modules/xdebug.so"
xdebug.remote_enable = 1
xdebug.idekey=xdebug 
```

# javascript - 从 javascript 链接到 .cshtml 视图

> ID：14631447
> 
> 赞同：7
> 
> 时间：2013-01-31T17:16:59.063
> 
> 标签：javascript, asp.net-mvc, angularjs, angularjs-directive

如何从 javascript 文件中直接指向 .cshtml 视图？例如，为什么我不能将 .cshtml 视图与 angular.js 一起使用？就像在这个例子中：

```
 .directive('encoder', ($timeout) => {
        return {
            restrict: 'E',
            transclude: true,
            scope: 'isolate',
            locals: { service: 'bind' },
            templateUrl: 'encoderTemplate.cshtml' // <-- that's not possible?
        }
    }); 
```

当然可以有一个返回任何你想要的操作方法，但我很好奇是否可以直接引用剃刀视图。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T17:44:05.470

如评论中所述，您不能直接提供 .cshtml 文件，但是，如果您愿意，可以使用控制器来呈现内容：

```
public class TemplateController : Controller
{
    // create a ~/Views/Template/Encoder.cshtml file
    public PartialViewResult Encoder()
    {
        return PartialView();
    }
} 
```

然后像你一样引用它`@Url.Action`：

```
{
    ....
    templateUrl: '@Url.Action("Encoder", "Template")'
} 
```

* * *

*来自评论*

如果您的大部分 JavaScript 代码都在具有 Razor 访问权限的内容之外（例如外部 .js 文件），您仍然可以利用 Url 构建器，只需稍作不同。例如，我可能会做类似的事情：

```
public class TemplateController : Controller
{
    // Add a child method to the templates controller that outputs default
    // configuration settings (and, since it's a child action, we can re-use it)
    [ChildActionOnly]
    public PartialViewResult Index()
    {
        // You could build a dynamic IEnumerable<ConfigRef> model
        // here and pass it off, but I'm just going to stick with a static view
        return PartialView();
    }
} 
```

**~/Views/Template/Index.cshtml**

```
<script type="text/javascript">
  if (typeof window.App === 'undefined'){
    window.App = {};
  }
  App.Templates = {
    Encoder: '@Url.Action("Encoder", "Template")',
    Template1: '@Url.Action("Template1", "Template")',
    Template2: '@Url.Action("Template2", "Template")'
  };
</script>
@*
   the template files would then reference `App.Templates.Encoder`
   when they need access to that template.
*@
@Scripts.Render("~/js/templating") 
```

**Index.cshtml**（或任何视图）

```
@* ... *@
@{ Html.RenderAction("Index", "Template"); }
@* ... *@ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-02T12:59:29.867

另一种选择是：

1.添加带有EncoderTemplate视图的TemplatesController

```
public class TemplatesController : Controller
{

     public ActionResult EncoderTemplate()
     {

           return View();
     }

} 
```

2.将 Layout = null 添加到 EncoderTemplate.schtml 视图

```
@{
    Layout = null;
}

<div>Your html goes here</div> 
```

3.指向EncoderTemplate.schtml，如下图

```
.directive('encoder', ($timeout) => {
    return {
        restrict: 'E',
        transclude: true,
        scope: 'isolate',
        locals: { service: 'bind' },
        templateUrl: '/Templates/EncoderTemplate' // you should not add .schtml
    }
}); 
```

# java - TreeMap put() 静默删除其他条目？

> ID：14631450
> 
> 赞同：6
> 
> 时间：2013-01-31T17:17:03.480
> 
> 标签：java, map, key, treemap, comparable

我经历了一些非常诡异的 TreeMap 行为，并且在缩小一个小测试用例时遇到了一些麻烦，所以请耐心等待。

我想从运行时提供的文件中将大量键值对读入 Map。我正在使用自定义键类。后来，当我去拉回条目时，我发现其中一个或多个丢失了。使用调试器和一些测试用例，我确定丢失的条目在读取阶段肯定会消失，但我不确定是什么原因造成的。

基本上：

```
Map<MyKey,Double> map = new TreeMap<MyKey,Double>();
map.put(key1,value1);

// ... put another ~500 entries into the map ...

assertTrue(map.containsKey(key1)); // passes
if (!map.containsKey(keyN)) { 
    map.put(keyN, valueN); // this code executes
}
assertTrue(map.containsKey(key1)); // FAILS 
```

...因此，从本质上讲，向地图添加一个全新的键会导致一个不相关的条目从其中脱落。

*   如果我只添加 key1 和 keyN，key1 会保留在地图中——中间的 500 个条目在某种程度上很重要
*   如果我从 2..(N-1) 中删除一个或两个任意键，则在添加 keyN 时仍会启动 key1
*   如果我从 2..(N-1) 中删除大量键，则在添加 keyN 时 key1 仍然存在，但在添加（比如说）keyQ 时会消失，大约 300 个键进一步向下
*   不幸的是，keyN 踢出 key1 时的地图大小与 keyQ 踢出 key1时的地图大小不同，所以这可能**不是**一个有限大小的问题
*   如果我改用 HashMap，key1 会保留在地图中
*   自定义键类 MyKey 对 Comparable、equals 和 hashCode 使用相同的逻辑。

我最初使用 TreeMap 是因为我希望使用大型数据集，而 TreeMap 的内存效率更高一些。HashMap 将是一个不错的选择，但是看到 TreeMap 以这种方式运行仍然令人担忧——有人对这里发生的事情有想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T17:20:11.230

如果比较时结果为 0，TreeMap 认为两个条目相等。因此，如果 key1 和 keyN“比较”为 0，则 key1 将被 put() 中的 keyN 覆盖。这是真的**，即使** `!key1.equals(keyN)`。因此，虽然您可能认为这两个键不相等，因此插入一个不应覆盖另一个，但`TreeMap`如果您的相等和比较函数彼此不一致，则会认为不同。

请注意，此行为可能会根据地图中元素的数量而有所不同，因为它取决于实际比较两个元素，而比较方法的计算结果为 0。基本上，正如您所说，事情会表现得“诡异”。

从[TreeMap javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)：

> ...map 使用其 compareTo（或 compare）方法执行所有键比较，因此从排序映射的角度来看，此方法认为相等的两个键是相等的...

并来自[Comparable javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)（感谢@Brian）：

> 强烈建议（尽管不是必需的）自然排序与 equals 一致。之所以如此，是因为没有显式比较器的排序集（和排序映射）在与自然顺序与等于不一致的元素（或键）一起使用时表现“奇怪”。特别是，这样的排序集合（或排序映射）违反了集合（或映射）的一般合同，该合同是根据 equals 方法定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:19:48.390

向我们展示`MyKey`. 我的猜测是你的`compareTo`方法有问题。更具体地说，您`compareTo`与`equals`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:18:55.083

您确定 keyN 在任何情况下都不会覆盖 key1 吗？因为在我看来那是你的幻影案例。

# tfs - TFS Azure 服务与本地 TeamCity

> ID：14631452
> 
> 赞同：1
> 
> 时间：2013-01-31T17:17:13.523
> 
> 标签：tfs, teamcity-7.0, azure-devops

是否可以将本地 TeamCity 构建服务器连接到 Microsoft 的 TFS 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:12:42.313

**更新**：[JetBrains 发布了一个新版本，现在支持 Team Foundation Service](http://blogs.jetbrains.com/teamcity/2013/02/07/teamcity-7-1-4-build-24331-is-ready/comment-page-1/#comment-38321)。版本是 7.1.4。

* * *

目前没有。[TeamCity 不支持新的基本身份验证](https://stackoverflow.com/a/14143020/736079)。[版本 8](http://confluence.jetbrains.com/display/TCD8/Supported+Platforms+and+Environments)应该解决这个问题。

# ios - UIActivityIndi catorView 从不动画

> ID：14631453
> 
> 赞同：4
> 
> 时间：2013-01-31T17:17:17.440
> 
> 标签：ios, objective-c, uiviewcontroller, lifecycle, cs193p

我有一`PhotoViewController`堂课`@property UIActivityIndicatorView* spinner`。 `FlickrPhotoViewController`是`PhotoViewController`从 Flickr 下载照片并告诉微调器何时开始和停止动画的子类。每次为视图控制器提供 Flickr 照片时都会调用“updatePhoto”：

```
- (void)updatePhoto { // Download photo and set it
    NSLog("updatePhoto called");
    if (self.spinner) NSLog(@"Spinner exists in updatePhoto");
    dispatch_queue_t downloadQueue = dispatch_queue_create("downloader",
                                                           NULL);
    [self.spinner startAnimating];

    dispatch_async(downloadQueue, ^{
        // Download the photo
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.spinner stopAnimating];
            // Set the photo in the UI
            }
        });
    });
} 
```

上述方法正是我在下载表格内容时在表格视图控制器中显示旋转轮的方法，并且它始终在那里工作。

`updatePhoto`如果存在，您会在我打印一条消息的开头注意到`UIActivityIndicatorView`。`awakeFromNib`我在、`viewDidLoad`和中放置了类似的声明`viewWillAppear`。当我运行它时，这是我得到的确切输出：

```
2013-01-31 21:30:55.211 FlickrExplorer[1878:c07] updatePhoto called
2013-01-31 21:30:55.222 FlickrExplorer[1878:c07] Spinner exists in viewDidLoad
2013-01-31 21:30:55.223 FlickrExplorer[1878:c07] Spinner exists in viewWillAppear 
```

为什么不`spinner`存在于`awakeFromNib`？文档指出“当一个对象收到一个 awakeFromNib 消息时，它保证已经建立了它的所有出口和动作连接。” IBOutlet 可以在它连接的对象不存在的情况下连接吗？在这种情况下， IBOutlet 是否可以在不分配的情况下`spinner`连接到情节提要？`spinner`

除此之外，我覆盖了 getter`spinner`以便它在不存在时实例化。结果，打印输出现在如下所示：

```
2013-01-31 21:48:45.646 FlickrExplorer[2222:c07] Spinner exists in awakeFromNib
2013-01-31 21:48:45.647 FlickrExplorer[2222:c07] updatePhoto called
2013-01-31 21:48:45.647 FlickrExplorer[2222:c07] Spinner exists in updatePhoto
2013-01-31 21:48:45.649 FlickrExplorer[2222:c07] Spinner exists in viewDidLoad
2013-01-31 21:48:45.650 FlickrExplorer[2222:c07] Spinner exists in viewWillAppear 
```

这是我之前期望看到的。尽管如此，我仍然没有得到任何动画。

我已经排除的可能问题：

*   微调器[与背景颜色相同](https://stackoverflow.com/questions/10145045/uiactivityindicatorview-not-appearing-ios-5)，使其不可见。在我的项目中，背景是黑色的，微调器是白色的。
*   我正在尝试制作动画，`UIActivityIndicatorView` [而一些昂贵的方法正在阻塞主线程](https://stackoverflow.com/questions/4586665/cant-get-a-spinner-to-appear)。在我的项目中，我所有的文件系统 I/O 和下载方法都在非主`dispatch_async`队列中调用。
*   微调器的[IBOutlet 未连接](https://stackoverflow.com/questions/11884423/ios-uiactivityindicatorview-spinner-not-showing-up)。在我的项目中，我已经多次检查了这一点。从情节提要和 PhotoViewController.h 文件都可以看出它是连接的。

所有这三种可能性都被排除在外，因为它可以在整个下载过程中成功地制作动画`[self.spinner startAnimating];`。`viewWillAppear`

如果你喜欢，你可以下载[这个项目。](https://github.com/thoughtadvances/cs193pFlickrExplorer)只需转到任何尝试显示大照片的屏幕，您就会看到微调器没有出现。这个项目有很多问题，但这是我现在关注的一个。

编辑1：

*   我在 Git 上添加了项目缺少的依赖项，因此项目现在将为您编译

编辑 2（2013 年 2 月 2 日）：

*   `updatePhoto`由于另一个视图控制器将`prepareForSegue`照片设置在`FlickrPhotoViewController`. 这可能会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:52:09.980

在你调用 updatePoto 方法之前尝试启动 uiactivityindictor 动画，Tru 调用这个 i 而不是全部调用 UpdatePhoto：

```
[self startAnimatingAndThenUpdatePhoto];

-(void)startAnimatingAndThenUpdatePhoto{
 if (self.spinner) NSLog(@"Spinner exists in updatePhoto");
  [self.spinner startAnimating];
 [self performSelector:@selector(updatePhoto) withObject:nil afterDelay:0.01];
}
 - (void)updatePhoto { // Download photo and set it
        NSLog("updatePhoto called");
        dispatch_queue_t downloadQueue = dispatch_queue_create("downloader",
                                                               NULL);

        dispatch_async(downloadQueue, ^{
            // Download the photo
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.spinner stopAnimating];
                // Set the photo in the UI
                }
            });
        });
    } 
```

不是世界上最好的方法，但它会做的工作

# java - 静态与动态绑定逻辑

> ID：14631454
> 
> 赞同：3
> 
> 时间：2013-01-31T17:17:33.857
> 
> 标签：java

我有以下代码：

```
import java.lang.*;

public class Program
{
    public static void main(String [] args) 
    { 
        B a = new A(); 

        a.p(10);  
        a.p(10.0); 
    } 
} 
    class B { 
        public void p(double i) 
        { 
            System.out.println(i*2); 
        } 
    }

    class A  extends B{ 
        public void p(int i) 
        { 
            System.out.println(i); 
        } 
    } 
```

当我使用 执行此代码时`B a = new A()`，在这两种情况下都得到 20.0，这是有道理的，因为重载是编译期间的句柄，编译器查看声明的类型并适当地调用函数。由于我们声明的类型是 B 类，因此在这两种情况下都调用了 B 类的方法。现在，如果我这样做`A a = new A();`，我应该在两个答案中都得到 10，但我不是。我得到 10`a.p(10)`和 20.0 `a.p(10.0)`。基于静态绑定的概念和由静态绑定完成的重载的整个概念，它着眼于声明的类型而不是实际的类型，为什么结果会这样？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:21:36.750

An`int`可以扩大到 a `double`，但不能反过来。这意味着`10`can call `B.p(double)`or `A.p(int)`but `10.0`is a`double`并且不会被隐式转换为`int`ie 只会`B.p(double)`被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:23:42.597

这是因为您的方法`p`不是被覆盖的方法，它只是在您使用时继承在您的子类中

```
Super sup = new Sub();
sup.p(int);
sup.p(double); 
```

在这种情况下，因为您的 Super 类有一个方法，该方法将 double 作为参数，并且 aa 一个**int**可以**适合**您的`double`Super-class 的方法被调用接受 double 的方法。

```
Sub sup = new Sub();
sup.p(int);
sup.p(double); 
```

但是，在这种情况下，由于您的子类没有采用 double 的方法，因为`sup.p(double) call`如果您将 double 作为参数传递，它将使用从超类继承的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:24:48.090

当您编写时，`A a = new A()`您会创建一个新的 type 对象`A`，它将有 2 个方法。`A.p(int)`和`B.p(double)`，当你调用 时`A.p(10.0)`，它会`B.p(double)`因为缺乏转换而调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T17:25:54.187

这个反例可能会有所帮助：

```
import java.lang.*;

public class X
{
    public static void main(String [] args) 
    { 
        B c = new A(); 

        c.p(10);  
        c.p(10.0); 
        c.p("AAA");
        ((A)c).p(10);
    } 
} 
    class B { 
        public void p(String s) 
        { 
            System.out.println("B: my string is " + s); 
        } 

       public void p(double i) 
        { 
            System.out.println("B: twice my double is: " + i*2); 
        } 
    }

    class A  extends B{ 
        public void p(int i) 
        { 
            System.out.println("A: my number is " + i); 
        } 
    } 
```

输出：

```
C:\temp>java X
B: twice my double is: 20.0
B: twice my double is: 20.0
B: my string is AAA
A: my number is 10 
```

问题是：

1）您将类型声明为“B”（而不是“A”）

2) Bp(10)*可以*接受一个 int 作为浮点参数

3）因此，这就是你得到的

这实际上是一个可以隐式转换的参数类型的问题，而不是重载或覆盖哪些方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T17:29:48.227

当对象声明了 type`B`时，将`double`调用版本，因为它与`int`参数兼容，因为在 Java`int`中是`double`.

当对象被声明为 a`A`时，它的方法`p()`重载了两个版本：

```
p(int arg);
p(double arg); 
```

因此，当您通过 时`int`，会选择第一个版本，因为它更准确，而当您通过`double`第二个时，因为它是最具体的签名。

如需参考，请参阅第[15.12.2 节中的相关 JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html)和[Gilad Bracha 的这篇文章](http://gbracha.blogspot.it/2009/09/systemic-overload.html)。*顺便说一句，不要试图根据您认为最合乎逻辑*的方式来弄清楚该语言的行为方式，因为每种编程语言都是一项工程工作，这意味着您要为所采取的任何方式付出代价。Java 的主要信息来源是 JLS，如果您仔细阅读它，您会（出乎意料地？）发现源代码中的行甚至存在歧义且无法编译的情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T17:31:46.953

在您的情况下，您正在进行重载，这将在编译时绑定（静态绑定。）。静态绑定发生在引用类型而不是引用指向的对象类型上。在您的第一种情况下，您使用 B 的引用变量并将 A 的对象分配给它。由于您的引用是 B，即使您使用 int，来自 B 的方法 p(double) 也会静态绑定（因为 int 可以扩大到两倍）。

在第二种情况下，您将引用用作 A 本身。在这种情况下，您有两个可用的 p() 方法。一个是来自 B 的 p(double)，另一个是来自 A 的 p(int)。所以 p(10) 将调用 p (int) 和 p(10.0) 将调用 p(double)

试试这个：

```
class B { 
    public void p(String i) 
    { 
        System.out.println("parent:"+i); 
    } 
}

class A  extends B{ 
    public void p(int i) 
    { 
        System.out.println(i); 
    } 
} 
public class Test1 {
    public static void main(String args[]) {

         A a = new A(); //arg
            a.p(10);  
            a.p("sample"); 
    }
} 
```

如果将标记为 arg 的行更改为 B a = new A()，您将看到编译器在这两种情况下都试图调用父 p。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-26T13:38:29.183

为了使 int 扩大到 double 的效果更加生动，我创建了另一个值得一看的例子。在这里，`double`我创建了一个名为的类`Parent`，而不是创建了`int`一个`Child`类。

因此，
double ~ Parent
int~Child

显然子对象可以扩大到父引用。

```
package test;
public class OOPs {
    public static void main(String[] args) {
        Child ch = new Child(); // like int 10
        Parent pa = new Parent();// like double 10.0

        B a = new A(); // case 2 : A a = new A();

        a.p(ch);// 10
        a.p(pa);// 10.0
    }
}

class B {
    public void p(Parent i) {
        System.out.println("print like 20");
        System.out.println(i.getClass().getName());
    }
}

class A extends B {
    public void p(Child i) {
        System.out.println("print like 10");
        System.out.println(i.getClass().getName());
    }
}

class Parent {
    String name;

    Parent() {
        name = "Parent";
    }

    public String getName() {
        return name;
    }
}

class Child extends Parent {
    String name;

    Child() {
        name = "Child";
    }

    public String getName() {
        return name;
    }
} 
```

**案例 1 - 输出** `(B a = new A();)`
打印如 20
test.Child
打印如 20
test.Parent

**案例 2 - 输出** `(A a = new A();)`
打印如 10
test.Child
print like 20
test.Parent

# objective-c - 容器视图控制器不转发外观方法

> ID：14631455
> 
> 赞同：0
> 
> 时间：2013-01-31T17:17:40.370
> 
> 标签：objective-c, xcode, uiviewcontroller

我正在尝试创建一个容器视图控制器来将 UINavigationController 和自定义 UIViewController 一起保存在屏幕上。

我把它放在一个测试程序中，它工作得很好，但是当我试图在我的真实项目中实现它时，包含视图控制器的外观方法永远不会被调用。

工作测试：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

MasterStatusViewController *master = [[MasterStatusViewController alloc] init];
[self.window setRootViewController:master];

self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
}

- (void)viewDidLoad {

[super viewDidLoad];

InventoryViewController *newInventory = [[InventoryViewController alloc] init];
self.navigation = [[UINavigationController alloc] initWithRootViewController:newInventory];
self.statusRibbon = [[StatusBarViewController alloc] initWithNibName:@"StatusBarViewController" bundle:nil];

[self addChildViewController:self.navigation];
self.navigation.view.frame = self.navigationView.frame;
[self.view addSubview:self.navigation.view];
[self.navigation didMoveToParentViewController:self];

[self addChildViewController:self.statusRibbon];
self.statusRibbon.view.frame = self.ribbonView.frame;
[self.view addSubview:self.statusRibbon.view];
[self.statusRibbon didMoveToParentViewController:self];
} 
```

失败的项目：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.backgroundColor = [UIColor whiteColor];

MasterViewController *master = [[MasterViewController alloc] init];
self.centerController = master;

[self.window setRootViewController:master];

[self.window makeKeyAndVisible];
return YES;
}

- (void)viewDidLoad {

[super viewDidLoad];

LoginViewController *login = [[LoginViewController alloc] init];
self.navigation = [[UINavigationController alloc] initWithRootViewController:login];
self.statusRibbon = [[StatusRibbonViewController alloc] init];

[self addChildViewController:self.navigation];
self.navigation.view.frame = self.navigationView.frame;
[self.view addSubview:self.navigation.view];
[self.navigation didMoveToParentViewController:self];

[self addChildViewController:self.statusRibbon];
self.statusRibbon.view.frame = self.ribbonView.frame;
[self.view addSubview:self.statusRibbon.view];
[self.statusRibbon didMoveToParentViewController:self];
} 
```

视图排列正确并按预期执行，除了外观方法永远不会被调用。我很困惑。手动调用这些方法似乎不是一个解决方案，因为这些调用也没有通过。

**编辑：**外观方法是指 viewWillAppear、viewDidAppear 等。

**第二次编辑：**

～剪断～

**第三次编辑：**经过进一步检查，我相信没有调用外观生命周期方法的原因是因为它们也没有在容器视图控制器上被调用。我添加了

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    NSLog(@"MasterViewController VIEW WILL APPEAR");
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    NSLog(@"MasterViewController VIEW DID APPEAR");
} 
```

to the `masterViewController`and nothing，由于某种原因，它们从未被调用过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T19:21:13.193

解决了。我不知道为什么没有调用主外观方法，一些 xcode 的清理似乎解决了这个问题。

但是，这些方法仍然没有被转发到我的其他视图控制器。然后我遇到了[这个链接](http://davidebenini.it/2009/01/03/viewwillappear-not-being-called-inside-a-uinavigationcontroller/)，并了解到无论如何你都必须将外观呼叫转发给他们。我能够通过添加来修复它：

```
- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    [self.navigation beginAppearanceTransition: YES animated: animated];
}

- (void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];
    [self.navigation endAppearanceTransition];
}

-(void) viewWillDisappear:(BOOL)animated {

    [super viewWillDisappear:animated];
    [self.navigation beginAppearanceTransition: NO animated: animated];
}

-(void) viewDidDisappear:(BOOL)animated {

    [super viewDidDisappear:animated];
    [self.navigation endAppearanceTransition];
}

- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-11T22:19:00.037

我有一个类似的问题，我正在使用 UIViewController 的包含功能，每当我向视图添加新的子视图控制器时，外观方法都不会被转发。

事实证明，您需要在添加子视图和 endApperanceTransition 之前调用 beginAppearanceTransition:animated: 。当您添加子视图以及删除它以触发外观方法时，您将需要执行此操作。

对于你的情况，我会尝试这样的事情：

```
self.navigation.view.frame = self.navigationView.frame;
[self addChildViewController:self.navigation];
[self.navigation didMoveToParentViewController:self]
[self.navigation beginAppearanceTransition:YES animated:NO];
[self.view addSubview:self.navigation.view];
[self.navigation endAppearanceTransition];

self.statusRibbon.view.frame = self.ribbonView.frame;
[self addChildViewController:self.statusRibbon];
[self.statusRibbon didMoveToParentViewController:self]
[self.statusRibbon beginAppearanceTransition:YES animated:NO];
[self.view addSubview:self.statusRibbon.view];
[self.statusRibbon endAppearanceTransition]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:15:52.260

“外观方法”到底是什么意思？你的意思是，视图没有出现？

在您的工作示例中，您正在从 nib 文件加载功能区视图：

```
self.statusRibbon = [[StatusBarViewController alloc] initWithNibName:@"StatusBarViewController" bundle:nil]; 
```

而您只是`init` 在第二个代码示例中：

```
self.statusRibbon = [[StatusRibbonViewController alloc] init]; 
```

后者只是创造了一个“新鲜”的观点，这可能会导致你认为它没有出现。

# c# - 我可以避免存储 MS Exchange 凭据，同时仍然能够进行身份验证（针对 EWS）吗？

> ID：14631457
> 
> 赞同：12
> 
> 时间：2013-01-31T17:17:43.773
> 
> 标签：c#, exchange-server, exchangewebservices

我正在构建一个在用户的 Exchange Server 帐户（支持版本 2007-2013）和应用程序之间同步数据的应用程序。

该应用程序不能使用模拟（至少在典型情况下不是），因为用户可以在任意数量的域和交换服务器上。

我知道我最初将不得不询问他们的用户名/电子邮件地址和密码。但是，如果我不需要的话，我真的不想负责存储这些凭据（即使它们是加密的，我也不愿意）。

**我不知道要问什么问题，所以我会用这些：**

Exchange Server 如何进行身份验证？用户的凭据是按原样直接发送到服务器，还是在通过网络发送之前经过哈希处理？如果它们被散列，我如何获取/生成此散列以在连续身份验证中重复使用？

Exchange Server 是否发送某种身份验证令牌，以后可以重复使用（并且永远重复使用，直到密码更改或失效）？

*如果您知道问题的解决方案，但这些问题的答案无法解决，请务必提供。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T20:50:24.623

Active Directory 联合服务正是针对此类任务的。[你可以在那里](http://msdn.microsoft.com/en-us/library/bb897402.aspx)阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T03:06:01.750

正如 Kirill 所说，ADFS 2.0 是完成任务的最佳解决方案之一。您还可以查看其他 SSO 实现。虽然 SSO 实现的主要目标是为多个应用程序维护单个登录状态（从而减少每个应用程序的多个登录提示），但您的一些应用程序目标似乎是相关的。在进行 sso 实现之前，请对所有权衡进行彻底的研究，因为在实现过程中涉及到一定程度的复杂性。如果您正在考虑将来将多个应用程序与交换服务器集成，那么 SSO 最适合。

要回答您的一些问题（以相同的顺序 - 考虑使用 ADFS 2.0 的 SSO 场景）：

1.  交换服务器的身份验证将通过 ADFS 2.0 完成（它提供安全令牌（STS 服务）-在使用 AD/主目录服务进行身份验证后向您的应用程序提供）。所有通信都经过加密，令牌签名证书用于完整性和机密性。
2.  ADFS 2.0 发送的安全令牌的生命周期可以根据需要进行配置和重用。有关详细信息，请参阅[此博客文章。](http://social.technet.microsoft.com/wiki/contents/articles/7681.setting-the-adfs-timeout-for-crm-2011-internet-facing-deployments-ifd.aspx)

您还可以将 ADFS 2.0（联合服务）配置为仅将相关声明值（如用户名和电子邮件地址）发送到应用程序，从而提高数据安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:34:25.617

## 底线

如果您无法在服务器上配置任何内容，则没有自动生成的令牌可供使用。不幸的是，您面临着与网络浏览器相同的普遍问题——保存密码。值得注意的是，任何身份验证都需要通过 SSL（`https`连接）来防止第三方监听身份验证。

## 密码存储思路：

我的建议是在存储密码时要有点创意。您可以使用密钥加密算法，然后使用散列生成密钥，让您任意选择进入密钥的内容。您至少需要 3 条信息：设备独有的信息、应用程序独有的信息以及交换服务器独有的信息。

例如：

*   设备提供的唯一 ID（此值是否特定于应用程序并不重要，只要它是一致的）
*   编译到应用程序中的（长）信息字符串，可能与安装特定值相关，例如首次使用应用程序的时间
*   目的地独有的东西，比如 DNS 名称，也许还有一些更具体的服务器信息

如果您愿意为用户提供选项，您可以拥有某种类型的授权 PIN，该 PIN 也将添加到数据中。

所有这些数据都放在一个字节数组中并进行哈希处理。然后将散列（或其中的一部分，或两次，取决于散列大小与密钥长度）用作密码加密的密钥。

您还可以在密码中包含一些检查信息，以便能够检查客户端密码是否被正确解密。（如果对错误的数据进行哈希处理，就会生成错误的密钥，错误的结果来自于解密）。

值得注意的是，用于放入哈希的所有信息都需要存储在设备上，这就是为什么我建议使用 Pin 来授权帐户的使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T13:40:51.000

也许您应该看一下[通过使用 EWS 托管 API 连接到 EWS 的](http://msdn.microsoft.com/en-us/library/exchange/ff597939%28v=exchg.80%29.aspx)链接，[连接到 Exchange - 入门教程？](https://stackoverflow.com/questions/677041/connect-to-exchange-getting-started-tutorial)希望它会给你一个新的想法来解决你的问题:)

因为如果我正确理解信息，您可能会过度思考问题，但我没有任何经验，所以我也可能绝对错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T20:44:34.773

`System.Net.CredentialCache`应该可以满足您的需求。`WebCredentials`是`System.Net.NetworkCredential`. _ 根据连接类型/域等，您应该能够使用`System.Net.CredentialCache.DefaultNetworkCredentials`或`System.Net.CredentialCache.DefaultCredentials`

# c++ - Qt Scroll Area 不添加滚动条

> ID：14631462
> 
> 赞同：1
> 
> 时间：2013-01-31T17:18:04.300
> 
> 标签：c++, qt, qt4, scrollbar, scrollview

大家好，我必须根据用户输入动态创建按钮，因此，如果用户输入较大的输入数字，则包含按钮的小部件必须能够上下滚动。出于这个原因，我正在使用 QScrollArea。我在 Qt 设计器中生成模板，UIC 为我生成代码，然后我在我的部分中添加应该处理按钮的动态创建。但是，我似乎无法让垂直滚动条出现。这是代码的相关部分。

```
 verticalWidget = new QWidget(FWHMWorkflowDialog);
    verticalWidget->setObjectName(QString::fromUtf8("verticalWidget"));
    verticalWidget->setMinimumSize(QSize(150, 0));
    verticalWidget->setMaximumSize(QSize(150, 16777215));
    verticalLayout_5 = new QVBoxLayout(verticalWidget);
    verticalLayout_5->setObjectName(QString::fromUtf8("verticalLayout_5"));
    scrollArea = new QScrollArea(verticalWidget);
    scrollArea->setObjectName(QString::fromUtf8("scrollArea"));
    scrollArea->setMaximumSize(QSize(150, 16777215));
    scrollArea->setWidgetResizable(true);
    scrollAreaWidgetContents = new QWidget();
    scrollAreaWidgetContents->setObjectName(QString::fromUtf8("scrollAreaWidgetContents"));
    scrollAreaWidgetContents->setGeometry(QRect(0, 0, 130, 432));

    numberOfSlices = numberSlices;
    for (int i = 0; i < numberOfSlices; i++)
    {
        QWidget *horizontalWidget = new QWidget(scrollAreaWidgetContents);
        horizontalWidget->setMaximumSize(150,40);
        horizontalWidget->setGeometry(QRect(0, i*40, 150, 40));
        hWidgetList.push_back(horizontalWidget);

        QHBoxLayout *hLayout = new QHBoxLayout(horizontalWidget);
        hLayoutList.push_back(hLayout);
        hLayout->setSizeConstraint(QLayout::SetMinimumSize);
        hLayout->setContentsMargins(-1, 1, -1, 1);

        QPushButton *pushButton = new QPushButton(horizontalWidget);
        pushButtonList.push_back(pushButton);
        QString temp = QString("m_sliceButton").arg(i);
        pushButtonList[i]->setObjectName(temp);
        pushButtonList[i]->setGeometry(QRect(10, 20+i*40, 98, 27));
        hLayout->addWidget(pushButton);

        QCheckBox *checkBox = new QCheckBox(horizontalWidget);
        checkBoxList.push_back(checkBox);
        temp =  QString("m_checkBox").arg(i);
        checkBoxList[i]->setObjectName(temp);
        checkBoxList[i]->setEnabled(true);
        checkBoxList[i]->setGeometry(QRect(110, 20+i*40, 21, 22));

        hLayout->addWidget(checkBox);

    }

    scrollArea->setWidget(scrollAreaWidgetContents);
    //scrollArea->setWidgetResizable(true);

    verticalLayout_5->addWidget(scrollArea); 
```

输出窗口始终如下所示。

![在此处输入图像描述](../Images/f1702fe5f225fb077ece4b67307456df.png)

在此示例中，用户输入的是 25，但是您可以看到第 21 个按钮被切断，其他 4 个按钮不可见。

滚动功能开始工作后出现的大小窗口问题。

![在此处输入图像描述](../Images/ed68a76933f6aa0cfcfe78078ee988ea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:25:26.710

您需要将您的水平小部件添加到垂直小部件，如下所示：

```
QVBoxLayout* vLayout = new QVBoxLayout();

for (int i = 0; i < numberOfSlices; i++)
{
    QWidget *horizontalWidget = new QWidget();
    vLayout->addWidget(horizontalWidget);
    ....
}
scrollAreaWidgetContents->setLayout(vLayout); 
```

你的第二个问题看起来来自这一行：

```
scrollArea = new QScrollArea(verticalWidget); 
```

您将scrollArea 直接添加到verticalWidget，但要让它按照您想要的方式布局，您需要将其放入布局中。请尝试以下操作：

```
QVBoxLayout* l = new QVBoxLayout();
l->addWidget(sliceLabel); // or whatever you call it
l->addWidget(scrollArea);
l->addWidget(clearButton); // again, your name here
verticalWidget->setLayout(l); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:33:44.490

尝试使用 QScrollBarPolicy。

[http://doc.qt.digia.com/qt/qabstractscrollarea.html#horizo​​ntalScrollBarPolicy-prop](http://doc.qt.digia.com/qt/qabstractscrollarea.html#horizontalScrollBarPolicy-prop)

我猜默认行为不起作用，因为布局发生了一些奇怪的事情。

# c# - C# WPF：从动态生成的图像文件加载数据

> ID：14631470
> 
> 赞同：0
> 
> 时间：2013-01-31T17:18:36.753
> 
> 标签：c#, wpf, file-io, dynamic-data

我想知道如何从动态生成的文件中加载信息？

例如：每 10 秒将生成 20 张图像；图像文件将保存在 下`D:\ drive`，例如：

```
D:\image1.tif is generated at 1s, 
D:\image2.tif is generated at 11s and
D:\image3.tif is generated at 21s, 
```

依此类推。

然后，一旦生成了新图像，我想立即从图像中加载一些信息，例如像素强度。但我想在图像生成完成后这样做。

然后，我将把刚刚检索到的信息显示到我的 WPF 表单中。

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:21:10.697

可以使用[FileSystemWatcher Class](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)监视文件系统更改。当然，您可以通过自己轮询（检索列表）某个文件系统目录来实现一些更简单的文件系统更改检测机制。

因此，当检测到文件系统更改时，加载有关文件的信息并显示它。

更新：

是的，要检测文件修改是否完成（定期尝试打开文件），请看问题：[FileSystemWatcher triggers for filestream open](https://stackoverflow.com/questions/2226892/filesystemwatcher-triggers-for-filestream-open)。

# ruby-on-rails - Rails 没有拾取 css 特定文件，但可以很好地拾取 sass

> ID：14631471
> 
> 赞同：0
> 
> 时间：2013-01-31T17:18:38.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这不是阻止我，但我真的很好奇发生了什么。

我的 application.css 中有：

```
*= require_self
*= require conversations 
```

并在我的*conversations.css*中定义了一些样式，但它们不会被拾取！

一次偶然的机会，我重命名为*conversations.css.scss*，然后它突然开始工作了。我重命名回 .css 并且它停止了。

我以为您可以拥有 .css 或 .scss 文件，它们会被 rails 拾取（我的版本是 3.2.11）

**编辑**：我也试过这个 .js 文件和相同的行为。一旦我将 .coffee 添加到任何 .js 文件中，它就会被拾取并使用，否则它不会。

有没有人见过这种行为？如果是这样，发生了什么？

# sql-server - 只需使用 T-SQL 将消息添加到 SQL Server Service Broker 队列？

> ID：14631474
> 
> 赞同：1
> 
> 时间：2013-01-31T17:18:43.053
> 
> 标签：sql-server, tsql, service-broker

我因此创建了一个队列：

```
CREATE QUEUE log_line_queue
WITH RETENTION = ON, --can decrease performance
    STATUS = ON,
    ACTIVATION (
        MAX_QUEUE_READERS = 1, --number of concurrent instances of sp_insert_log_line
        PROCEDURE_NAME = sp_insert_log_line,
        EXECUTE AS OWNER
        ); 
```

我可以在 SSMS 中快速做些什么来使用 T-SQL 将项目添加到我的队列中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:30:21.987

在 SSMS 中，在对象资源管理器中选择所需的数据库。然后找到该数据库的Service Broker，右键单击它并选择“New Service Broker Application...”命令。这将为您创建模板以快速开始使用 Service Broker。您还将看到实现和运行您自己的应用程序所需的最少推荐配置。

至于使用一个队列 - 如果这是您第一次使用 Service Broker，为什么不从一开始就遵循惯例呢？在运行几个示例和/或您自己的原型之后，您决定使用多少队列并且您知道如何去做。

# ios - 如何将 40000 条记录快速插入 iPad 中的 sqlite 数据库

> ID：14631477
> 
> 赞同：7
> 
> 时间：2013-01-31T17:18:47.720
> 
> 标签：ios, objective-c, performance, ipad, sqlite

我想将我从 Web 服务获得的 40000 条记录插入到我的 iPad 应用程序的 sqlite 数据库中。

我写了以下代码，但是大约需要 20 分钟，有没有更快的方法？

```
- (NSArray *)insertPriceSQLWithPrice:(Price *) price
{

SQLiteManager *dbInfo = [SQLiteManager sharedSQLiteManagerWithDataBaseName:@"codefuel_catalogo.sqlite"];

sqlite3 *database;

NSString *querySQL=[self formatStringQueryInsertWithTable:@"prices_list" andObject:price];

if(sqlite3_open([dbInfo.dataBasePath UTF8String], &database) == SQLITE_OK)
{
    sqlite3_stmt * compiledStatement;

    const char *query_stmt = [querySQL UTF8String];

    int result = sqlite3_prepare_v2(database, query_stmt, -1, &compiledStatement, NULL);

    if (result == SQLITE_OK)
    {
        int success = sqlite3_step(compiledStatement);

        NSLog(@"el numero de success es -> %i",success);
        if (success == SQLITE_ERROR)
            NSLog(@"Error al insertar en la base de datps");

    }
    else
        NSLog(@"Error %@ ERROR!!!!",querySQL);

    sqlite3_finalize(compiledStatement);
}

sqlite3_close(database);
return nil;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T17:34:15.587

为了加快插入速度，您需要做三件事：

*   **将调用`sqlite3_open`移到循环外。**目前，没有显示循环，所以我假设它在您的代码片段之外
*   **添加`BEGIN TRANSACTION`和`COMMIT TRANSACTION`**调用 - 您需要在插入循环之前开始事务，并在循环结束后立即结束。
*   **`formatStringQueryInsertWithTable`真正参数化**- 目前看来您没有充分使用准备好的语句，因为尽管使用了**，**`sqlite3_prepare_v2`但您的代码中没有调用 of `sqlite3_bind_XYZ`。

这是[一篇不错的帖子，向您展示了如何完成上述所有操作](http://blog.quibb.org/2010/08/fast-bulk-inserts-into-sqlite/)。它是普通的 C，但它可以作为 Objective C 程序的一部分正常工作。

```
char* errorMessage;
sqlite3_exec(mDb, "BEGIN TRANSACTION", NULL, NULL, &errorMessage);
char buffer[] = "INSERT INTO example VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7)";
sqlite3_stmt* stmt;
sqlite3_prepare_v2(mDb, buffer, strlen(buffer), &stmt, NULL);
for (unsigned i = 0; i < mVal; i++) {
    std::string id = getID();
    sqlite3_bind_text(stmt, 1, id.c_str(), id.size(), SQLITE_STATIC);
    sqlite3_bind_double(stmt, 2, getDouble());
    sqlite3_bind_double(stmt, 3, getDouble());
    sqlite3_bind_double(stmt, 4, getDouble());
    sqlite3_bind_int(stmt, 5, getInt());
    sqlite3_bind_int(stmt, 6, getInt());
    sqlite3_bind_int(stmt, 7, getInt());
    if (sqlite3_step(stmt) != SQLITE_DONE) {
        printf("Commit Failed!\n");
    }
    sqlite3_reset(stmt);
}
sqlite3_exec(mDb, "COMMIT TRANSACTION", NULL, NULL, &errorMessage);
sqlite3_finalize(stmt); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-22T19:18:42.813

对我来说，调用 BEGIN TRANSACTION 然后加载大约 20 个插入，然后调用 COMMIT TRANSACTION 可以将性能提高 18 倍 - 很棒的提示！缓存准备好的语句几乎没有帮助。

# vb6 - Visual basic 6.0 安装工具包已停止工作

> ID：14631486
> 
> 赞同：0
> 
> 时间：2013-01-31T17:19:14.693
> 
> 标签：vb6

我在 Visual Basic 中创建了一个应用程序。之后，我使用**打包和部署向导**进行设置 但是当我尝试安装它时，我收到一个错误“ **Visual basic 6.0 setup toolkit has stop working** ”有人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:38:13.507

旧的安装工具包使安装程序在现代版本的 Windows 中几乎不受支持 - 最好使用 WiX ( [http://sourceforge.net/projects/wix/](http://sourceforge.net/projects/wix/) ) 之类的东西来创建适当的 msi 安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-20T05:25:44.183

我曾经遇到过这样的问题。这是因为 Pack/De[loy 向导使用了错误版本的 setup.exe。早些时候我犯了某种错误（不知道它是什么），它导致 VB6 丢失了 Pack/Deploy 安装文件的位置，所以它问我“找不到文件......”浏览它“ . 好吧，当我浏览时，我选择了错误的 Setup.exe（Windows\system32\setup.exe 中的那个），从那以后它一直保持在路径上。我似乎无法找到一种方法来将其更改为更正一个.我通过手动将正确的设置复制到包中来解决这个问题。

# ruby-on-rails-3 - 在 Rails 中下载文件的链接

> ID：14631487
> 
> 赞同：0
> 
> 时间：2013-01-31T17:19:24.070
> 
> 标签：ruby-on-rails-3, amazon-s3

我想发送一封电子邮件，其中包含一些从我的 s3 存储桶下载的链接。我将文件的 url 存储在表中。如何使用 link_to 助手？

```
<%= link_to "Download File x", @profile.document %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:33:36.877

因为我认为这`@profile.document`是一个完整的 url，你不需要`link_to`帮助，只需使用：

```
<a href="<%= @profile.document %>">doc</a>`. 
```

`link_to`当您有在文件中定义的资源实例（可能像 Profile）时使用`config/routes.rb`。例如：

```
resources :profile 
```

那么当你使用

```
<%= link_to 'download', @profile %> 
```

你将会有

```
http://test.com/profiles/34234 
```

# r - 在 Win7 上加载 rJava 包时出现问题

> ID：14631494
> 
> 赞同：7
> 
> 时间：2013-01-31T17:19:41.730
> 
> 标签：r, windows-7, rjava

我已经安装了最新版本的 R (2.15.2) 和 Java (7.11)，并且通过 RStudio (0.97.310) 我正在尝试加载 rJava 包。它似乎安装正确，但是当我打电话时，`library(rJava)`我收到以下错误：

```
 Error : .onLoad failed in loadNamespace() for 'rJava', details:
 call: stop("No CurrentVersion entry in '", key, "'! 
 Try re-installing Java and make sure R and Java have matching architectures.")
 error: object 'key' not found
 Error: package/namespace load failed for ‘rJava’ 
```

rJava 的文档引用了 Java 1.5+，所以我想知道是否需要安装 Java 的旧版本来解决这个问题。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T17:36:20.787

好的，我想通了。我想我应该阅读 rJava 开发网站上的发行说明。我已经安装了 Java，但没有安装 JDK。一旦我安装了它，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-06T04:09:14.143

[我遇到了这个问题，并通过从Java 下载站点](https://www.java.com/en/download/manual.jsp)下载并安装 Java 64 位（如果你有一台现代计算机，你应该选择它）来解决它。

# kinect - 使用深度文件创建骨架数据

> ID：14631499
> 
> 赞同：0
> 
> 时间：2013-01-31T17:19:53.193
> 
> 标签：kinect, openni, kinect-sdk

我有一堆使用 kinect sdk 保存在磁盘上的 jpeg 和深度（原始）文件有没有办法使用这些文件和 openni 来创建骨架数据（关节点）？如果是这样，它怎么能做到？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:19:35.080

OpenNI 不处理骨架跟踪。相反，它是通过插入 OpenNI 的 NITE 中间件层完成的。NITE 和处理骨架生成的算法是封闭源代码，不能用于剖析。

我不知道 API 调用将原始图像推送到骨架进程中以提取骨架数据。我敢打赌，流中的运动实际上在算法中起作用，使得单个图像处理非常不精确。

# android - 滑动菜单的实现 J. Feinstein

> ID：14631501
> 
> 赞同：8
> 
> 时间：2013-01-31T17:20:06.907
> 
> 标签：android, menu, sliding

我正在尝试使用 jeremy feinstein 的 SlidingMenu 库开发一个应用程序，我发现它非常有趣。我已经设置了所有内容并创建了一个示例项目，只是为了检查我是否能够实现滑动菜单，但不幸的是我在我的应用程序中看不到任何滑动菜单。

这些是我所做的，

*   [从HERE](https://github.com/jfeinstein10/SlidingMenu)下载 SlidinMenu并作为 android 现有项目导入 eclipse。更改了其 google api 级别。（现在不再有红色标记了。）

*   创建了一个新项目，并将滑动菜单库添加到其中。

*   正如 jfeinstein 解释的那样，我将以下代码添加到**MainActivity.java**

    ```
    public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setTitle("Title !");

        setContentView(R.layout.activity_main);

        SlidingMenu menu = new SlidingMenu(this);
        menu.setMode(SlidingMenu.LEFT);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidthRes(R.dimen.shadow_width);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.menu);

    } 
    ```

    }

和我的**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

<com.slidingmenu.lib.SlidingMenu
    xmlns:sliding="http://schemas.android.com/apk/res-auto"
    android:id="@+id/slidingmenulayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    sliding:viewAbove="@layout/testing"
    sliding:viewBehind="@layout/testing_two"
    sliding:touchModeAbove="margin"
    sliding:behindWidth="@dimen/shadow_width"
    sliding:behindScrollScale="0.5"
    sliding:shadowDrawable="@drawable/shadow"
    sliding:shadowWidth="@dimen/shadow_width"
    sliding:fadeEnabled="true"
    sliding:selectorEnabled="true"/>

</RelativeLayout> 
```

和**menu_frame.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

**测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Test"/>
</LinearLayout> 
```

我已经将他的 menu.xml 、 shadow.xml 、 dimen.xml 复制**到**我**的**项目**中**。

当我运行它时，我只看到这些错误，

```
01-31 22:18:13.027: E/AndroidRuntime(759): FATAL EXCEPTION: main
01-31 22:18:13.027: E/AndroidRuntime(759): java.lang.RuntimeException: Unable to start activity ComponentInfo{android.demo.com/android.demo.com.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment 
```

我不知道我在哪里做错了。尝试了很多，我无法弄清楚网上的任何东西。非常感谢任何类型的帮助或示例。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:32:40.463

你的问题在这里。你的代码：

```
sliding:viewAbove="@layout/menu_frame"
sliding:viewBehind="@layout/menu_frame" 
```

从文档示例：

```
sliding:viewAbove="@layout/YOUR_ABOVE_VIEW"
sliding:viewBehind="@layout/YOUR_BEHIND_BEHIND" 
```

你必须确定什么在上面，什么在视图后面。

**更新：**我已经测试了你的代码，没有问题。我唯一要做的就是删除`sliding:fadeEnabled="true"`，因为我的编译错误。您可能想查看代码中的其他位置或尝试删除该行并尝试。

# java - jsonrpc4j：如何将类型信息添加到参数？

> ID：14631502
> 
> 赞同：4
> 
> 时间：2013-01-31T17:20:07.750
> 
> 标签：java, json, serialization, jackson, deserialization

我正在使用[jsonrpc4j](http://code.google.com/p/jsonrpc4j/)并卡住了。我做了一个小例子来说明我的问题：

抽象类：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME)
@JsonSubTypes(value = { @JsonSubTypes.Type(value = Walnut.class) })
public abstract class Nut {

} 
```

具体子类：

```
public class Walnut extends Nut {

} 
```

服务接口：

```
public interface ServiceInterface {
    public Nut getNut();
    public void setNut(Nut nut);
} 
```

服务本身：

```
public class Service implements ServiceInterface {
    public Nut getNut() { return new Walnut(); }
    public void setNut(Nut nut) {}
} 
```

服务器：

```
JsonRpcServer rpcServer = new JsonRpcServer(new ObjectMapper(), new Service());
StreamServer streamServer = new StreamServer(rpcServer, 50, 1420,
        50, InetAddress.getByName("127.0.0.1"));
streamServer.start(); 
```

客户：

```
JsonRpcClient jsonRpcClient = new JsonRpcClient(new ObjectMapper());
ServiceInterface remoteService = ProxyUtil.createClientProxy(
        ServiceInterface.class.getClassLoader(),
        ServiceInterface.class, jsonRpcClient,
        new Socket(InetAddress.getByName("127.0.0.1"), 1420)); 
```

如果我调用*remoteService.getNut()*一切都按预期工作，日志将打印：

```
JSON-PRC Request: {"id":"6064348714687420633","jsonrpc":"2.0","method":"getNut"}
JSON-PRC Response: {"jsonrpc":"2.0","id":"6064348714687420633",
        "result":{"@type":"Walnut"}} 
```

如果我调用*remoteService.setNut(new Walnut())*服务器抛出异常，日志打印：

```
JSON-PRC Request {"id":"9194853851254039397","jsonrpc":"2.0",
        "method":"setNut","params":[{}]}
Error in JSON-RPC Service com.fasterxml.jackson.databind.JsonMappingException:
        Unexpected token (END_OBJECT), expected FIELD_NAME:
        missing property '@type' that is to contain type id  (for class Nut) 
```

缺少参数的类型信息，因为代理将所有参数包装到一个对象数组中（请参阅我的最后一个[问题](https://stackoverflow.com/q/14582343/2021412)以了解为什么在这种情况下缺少信息类型）。

我怎样才能实现所需的序列化？我尝试启用默认类型并通过混合注释（使用@JsonTypeInfo）*Object.class*，但都失败了（以下例外）。

启用默认类型 [ *remoteService.getNut()*，服务器端错误]：

```
Exception while handling request
        com.fasterxml.jackson.databind.JsonMappingException:
        Unexpected token (START_OBJECT), expected START_ARRAY:
        need JSON Array to contain As.WRAPPER_ARRAY type information for
        class com.fasterxml.jackson.databind.JsonNode 
```

启用默认类型 [ *remoteService.setNut(new Walnut())*，客户端出错]：

```
Exception in thread "main" java.lang.IllegalArgumentException:
        Unexpected token (START_ARRAY), expected VALUE_STRING:
        need JSON String that contains type id (for subtype of
        com.fasterxml.jackson.databind.JsonNode) 
```

使用混入 [ *remoteService.getNut()*，服务器端出错]：

```
Exception while handling request
        java.lang.IllegalArgumentException:
        Could not resolve type id 'DefaultErrorResolver$ErrorData'
        into a subtype of
        [simple type, class com.fasterxml.jackson.databind.JsonNode] 
```

使用混入 [ *remoteService.setNut(new Walnut())*，客户端出错]：

```
Exception in thread "main" java.lang.ClassCastException:
        [Ljava.lang.Object; cannot be cast to
        com.fasterxml.jackson.databind.JsonNode 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:28:58.353

我通过修补库解决了我的问题。现在它一个一个地序列化所有参数，然后将它们连接起来。错误报告和补丁可以在[http://code.google.com/p/jsonrpc4j/issues/detail?id=49](http://code.google.com/p/jsonrpc4j/issues/detail?id=49)找到。

# templates - JSF 模板与俄语

> ID：14631507
> 
> 赞同：1
> 
> 时间：2013-01-31T17:20:19.983
> 
> 标签：templates, jsf, character-encoding, facelets

我有以下模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
        <ui:insert name="title" />
    </title>
</h:head>
<h:body>
    <div id="header">Some header</div>
    <div id="content">
        <ui:insert name="content" />
    </div>
    <div id="footer">Some Footer</div>
</h:body>
</html> 
```

和以下客户端模板：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="templates/template.xhtml">
    <ui:define name="title">
        English Online
    </ui:define>
    <ui:define name="content">
        <h1>Кириллический шрифт</h1>
    </ui:define>
</ui:composition> 
```

现在的问题是：

当我使用“h1”标签中的西里尔字体从复合材料中调用主模板时，浏览器会给出：

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence. 
```

即使我在主客户端模板中使用西里尔字体也可以。当客户端模板 h1-tag 包含英文时，它也可以工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:54:13.927

如果这些文件未保存为 UTF-8，则可能会发生这种情况。答案取决于用于保存文件的编辑器。如果它是例如 Eclipse（您的问题历史提示您正在使用它或至少熟悉它），那么您需要将*Window > Preferences > General > Workspace > Text file encoding*更改为 UTF-8。

![在此处输入图像描述](../Images/89a8cbd28abbfd3775aa4d9c989f5513.png)

进行此更改后，编辑并重新保存文件。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# c++ - 隐式转换不适用于 BOOST_STRONG_TYPEDEF 和 BOOST_SPIRIT_DEBUG_NODE

> ID：14631508
> 
> 赞同：1
> 
> 时间：2013-01-31T17:20:26.287
> 
> 标签：c++, boost, operator-overloading, boost-spirit

我已经定义了一个 boost::spirit::qi 规则：

```
boost::spirit::qi::rule<Iterator, Identifier()> id; 
```

其中标识符定义为：

```
BOOST_STRONG_TYPEDEF(std::string, Identifier) 
```

但是当我使用

```
BOOST_SPIRIT_DEBUG_NODE(id); 
```

它无法编译并出现以下错误：

```
boost_1_51_0/boost/spirit/home/support/attributes.hpp:1203: error: no match for 'operator<<' in 'out << val' 
```

它列出了 ostream 的重载运算符。

知道 BOOST_STRONG_TYPEDEF 为原始类型定义了一个强制转换运算符，编译器不应该在使用时从 Identifier 隐式强制转换为 std::string`operator<<`吗？或者是否存在阻止编译器在尝试匹配另一个运算符（即`operator<<`）时应用类型的强制转换运算符的限制？

当我定义以下运算符时，它会编译：

```
inline std::ostream& operator<<(std::ostream& os, const Identifier& id)
{
    return os << static_cast<std::string const&>(id);
} 
```

我正在使用 gcc4.4.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:10:30.337

这与 boost、strong_typedef 或精神无关。

It has a lot to do with type deduction for template arguments. In short, when argument types are deduced, implicit conversions *never* take place [1]

Cf.:

```
#include <iostream>
#include <string>
#include <boost/strong_typedef.hpp>

BOOST_STRONG_TYPEDEF(double, X)
int main() { std::cout << X(); } 
```

No problem! Replace `double` by `std::string`, and it doesn't work anymore. What's different?

The declaration of the streaming operator differs.

Contrast

```
ostream& ostream::operator<<(double); 
```

To

```
template<typename _CharT, typename _Traits, typename _Alloc>
   inline basic_ostream<_CharT, _Traits>&
   operator<<(basic_ostream<_CharT, _Traits>&, basic_string<_CharT, _Traits, _Alloc> const&) 
```

The fact that the operator overload is a *function template* disallows any implicit conversions.

* * *

[1] I guess `initializer_list` may look like a bit of an exception here, what with widening/narrowing that it can do. Different subject, though

# javascript - Window.open 正在打开 2 个相等的窗口

> ID：14631512
> 
> 赞同：2
> 
> 时间：2013-01-31T17:20:34.907
> 
> 标签：javascript, jquery

我有以下 html/jquery 代码，应该打开一个新页面，但正在打开 2：

```
$('.div_link').live('click', function(){
    window.open($(this).attr('url'), '_blank', 'toolbar=no,resizable=yes,location=yes,menubar=yes');
});

<div class="div_link" url="/test/as/8888888-888">8888888-888</div> 
```

所以，一切都很好，除了我得到了两个内容完全相同的新窗口。我见过有人暗示在 onclick 事件中返回 false 与此有关，但我认为这里不是这种情况。

另外，我试图做类似的事情：

```
var handler = window.open(...); 
```

**编辑：** 尝试了类似 gdoron 建议的方法，但它没有打开任何窗口，并且没有触发 click 事件。

```
$('div.div_link').on({
    click: function(){
        window.open($(this).attr('url'), '_blank','toolbar=no,resizable=yes,location=yes,menubar=yes');
        return false;
}}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:24:32.260

什么会导致这种情况：

1.  您订阅了两次。
2.  你点击了两次。
3.  您有两个嵌套的 div，其中包含类`div_link`和事件气泡。

关于最后一个选项，使用`on`而不是 deprecated(1.7)-deleted (1.9)`live`函数：

```
$('#containerId').on('click', '.div_link', function(){
    window.open($(this).attr('url'), '_blank', 'toolbar=no,resizable=yes,location=yes,menubar=yes');
    return false;
}); 
```

`on`与 不同，您可以停止冒泡`live`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-01T23:20:15.393

我有这个完全相同的问题，我通过给第二个参数一个固定的名称而不是使用 _blank 来解决。含义如下：

```
$('.div_link').live('click', function(){
    window.open($(this).attr('url'), 'myFixedName', 'toolbar=no,resizable=yes,location=yes,menubar=yes');
}); 
```

此解决方案不会阻止双击，但会提供所需的行为。我希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T19:14:17.467

删除第二行的“_blank”。它解决了我同样的问题。

# jquery - Stop floating sidebar once it reaches the footer. jQuery Waypoints

> ID：14631513
> 
> 赞同：1
> 
> 时间：2013-01-31T17:20:36.703
> 
> 标签：jquery, html, css, jquery-waypoints

I'm using [this jQuery waypoints plugin](http://imakewebthings.com/jquery-waypoints/), to float my sidebar. Everything is working as it should, but i need to set an additional waypoint on the footer so that the sidebar doesn't scroll above it and unfortunately i do not know how to code jQuery.

[I setup a quick jsfiddle](http://jsfiddle.net/adidassj/3Stqt/2/), but please bear with me as this was my first time using jsfiddle.

Any help will be greatly appreciated as i am stuck on how to accomplish this.

Here's the current jQuery code I am using:

```
<script>
    $(document).ready(function() {
        $('.sidebar').waypoint('sticky', {
             offset: 264 // Apply "stuck" class when element 264px from top
        });;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:27:52.707

您不需要为此使用插件，您可以轻松地自己完成此操作。只需调整变量。

[**更新：**这里正在使用 jsFiddle。](http://jsfiddle.net/3Stqt/19/)

```
$(window).scroll(function() {
   var scrollVal = $(this).scrollTop();
    if ( scrollVal >= 0 && scrollVal < 260 ) {
       //between 0 and navigation

        $('.sidebar').removeClass('stuck').css({'margin-top':'0px'});;
        $('.content').css({'margin-left':'0px'});
    }else if ( scrollVal > 260 && scrollVal < 800 ) {
       //between navigation and footer

        $('.sidebar').addClass('stuck').css({'margin-top':'0px'});;
        $('.content').css({'margin-left':'100px'});
    }else if ( scrollVal > 800 ) {
        //beyond footer

        $('.sidebar').removeClass('stuck').css({'margin-top':'540px'});
        $('.content').css({'margin-left':'0px'});
    }
}); 
```

# java - ZeroMQ 的 Java“参考”解决方法，用于通过 ZMQ 套接字发送对象

> ID：14631521
> 
> 赞同：3
> 
> 时间：2013-01-31T17:21:08.593
> 
> 标签：java, reference, zeromq

我有一个使用 ZeroMQ 套接字进行进程间通信的 Java 程序。我有线程工作者做一些昂贵的工作，当他们完成他们的工作时，我想通过 inproc 套接字将该结果对象传递给“发送者”线程，以便它可以将对象发送给客户端。我见过一些例子，在 C++ 中这通常是使用指针来完成的，但在 Java 中没有指针，我不想序列化对象只是为了能够将对象传递给另一个线程。

我有哪些可能性？我只能有效地将“轻量级”值传递给套接字，例如字符串或原始类型。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:23:48.727

无论您传递引用还是指针，它都是一样的。您可以通过数据结构在同一进程中的线程之间传递它，但不能通过套接字传递它并期望它在不同的进程中工作。

即在同一进程中的线程之间传递引用（或指针）不要使用 ZeroMQ，而是使用类似于 BlockingQueue 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:10:55.730

我有类似的情况，但我确实序列化了对象，因为客户端和服务器是在不同平台上用不同语言编写的。它还允许我使用打印它们的简单代理来调试消息。

我使用[XStream](http://xstream.codehaus.org/)将对象序列化/反序列化为 JSON 或 XML 字符串，它非常易于使用。

另一个解决方案是[GSon](https://sites.google.com/site/gson/)，但我发现它会序列化 JVM 时区中的日期，我需要向/从在不同时区运行的计算机发送/接收消息。XStream 使用 GMT 作为默认时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T03:43:37.057

我也有同样的疑问。这不是关于通过 zeromq 对另一个进程的 sendig 引用。那永远行不通。问题是对于 inproc 工作线程，发送消息意味着序列化和反序列化。对于字符串和原始类型，这是微不足道的，但对于大型业务对象，它没有意义（除非我错过了一个技巧）。

另一种解决方法是让工作线程将业务对象（或在您的情况下为结果）存储在缓存中，并将索引传递给“发送者”线程。这个“发送者”线程将从缓存中获取结果并将其发送给“客户端”。

但是我不确定这是否是预期目的。我在同一个论坛上提出了同样的问题。

# r - ggplot2：从纵横比中排除图例

> ID：14631523
> 
> 赞同：4
> 
> 时间：2013-01-31T17:21:14.707
> 
> 标签：r, ggplot2, knitr

我使用`ggplot2`并`knitr`发布带有右侧图例的散点图。图例包含在纵横比中，因此破坏了绘图的“方形”，如[默认主题](https://github.com/hadley/ggplot2/wiki/themes)中所示。当图例文本变得比“a”和“b”长一点时，图形变成“长矩形”而不是“正方形”。

我想保持图表“平方”，因此想从图表的纵横比中排除图例`ggplot2`。My`.Rprofile`有以下信息可以强制`ggplot2`生成具有更大文本和更多围绕轴标题的空间的低色图：

```
theme_set(theme_bw(16))
theme_update(
  axis.title.y = element_text(angle = 90, vjust = -.25),
  axis.title.x = element_text(vjust = -1),
  plot.margin = unit(c(1,1,1,1), "cm")
) 
```

我可以在此处添加任何内容以从纵横比中排除图例吗？到目前为止，使用`coord_equal`和的操作都失败了，以及 和选项也是如此。谢谢你的帮助！`coord_fixed``fig.width``fig.height`

**编辑：**删除了工作示例，下面用完整的示例代码回答了问题（抱歉延迟批准答案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:47:43.407

设置`coord_fixed()`应该可以解决问题：

```
library(ggplot2)
library(gridExtra)  ## for grid.arrange()

## Create some data with one longer label
cars <- transform(mtcars, 
           cyl = factor(cyl, labels=c("4","6","8 is big")))

## Compute ratio needed to make the figure square
## (For a taller narrow plot, multiply ratio by number > 1; 
##  for a squatter plot, multiply it by number in the interval (0,1))    
ratio <- with(cars, diff(range(mpg))/diff(range(wt)))

## Make plots with and without a legend
a <- ggplot(cars, aes(mpg, wt)) + 
     geom_point() + coord_fixed(ratio=ratio)

b <- ggplot(cars, aes(mpg, wt, color=cyl)) + 
     geom_point() + coord_fixed(ratio=ratio)

## Plot them to confirm that coord_fixed does fix the aspect ratio
grid.arrange(a,b, ncol=2) 
```

![在此处输入图像描述](../Images/b066197ded1ead5dc4526f1108f56ed6.png)

# objective-c - 将 UITabBarController 添加到 UIViewController (Xcode 4.6)

> ID：14631527
> 
> 赞同：0
> 
> 时间：2013-01-31T17:21:34.990
> 
> 标签：objective-c, xcode, uiviewcontroller, uitabbarcontroller

我正在学习Objective-C，并在学习的同时开始创建一个应用程序。我创建了一个“单视图应用程序”，其中包含两个名为“ViewController”和“secondViewController”的“视图控制器”，之后我想添加一个“UITabBarController”，所以按照教程我在 AppDelegate.m 中使用了以下代码

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

[self customizeInterface];
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UITabBarController *tabController = [[UITabBarController alloc] init];

UIViewController *viewController1 = [[UIViewController alloc] init];
UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTitle:@"Artists" image:[UIImage imageNamed:@"artist-tab.png"] tag:1];
[viewController1 setTabBarItem:tab1];

UIViewController *viewController2 = [[UIViewController alloc] init];
UITabBarItem *tab2 = [[UITabBarItem alloc] initWithTitle:@"Music" image:[UIImage imageNamed:@"music-tab.png"] tag:2];
[viewController2 setTabBarItem:tab2];

tabController.viewControllers = [NSArray arrayWithObjects:viewController1,
                                 viewController2, nil];

self.window.rootViewController = tabController;

[self.window makeKeyAndVisible];

// Override point for customization after application launch.
return YES;
} 
```

这是 ViewController.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

如果我运行应用程序，标签栏正在工作，但我有一个空白屏幕，而不是我创建的 ViewController。仅仅因为我是一个菜鸟，你能告诉我如何在每个选项卡中分别链接或显示视图控制器吗？

请善意地说出所有显而易见的事情。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:41:10.283

由于您是初学者，我强烈建议您使用故事板，这将有助于更轻松地管理界面，因为您几乎不需要编写任何代码。

[http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

我只是在猜测，但您的问题可能是您直接使用`init`视图控制器，您应该`initWithNibName:`在`didFinishLaunchingWithOptions`. 当`initWithNibName:`您从 nib 文件创建控制器实例时，您会调用它。

所以基本上`initWithNibName:`是在加载和实例化 NIB 时调用的。

我不知道您的 ViewContoller 类名，但您应该更改视图控制器的 init 方法

在您的应用程序 delegate.m

```
#import "ViewController.h"
#import "secondViewController.h" 

    UIViewController *viewController1 = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]]; // make sure on interface builder hat you Nib name is ViewController

    UIViewController *viewController2 = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:[NSBundle mainBundle]];// make sure on interface builder hat you Nib name is secondViewController 
```

并且请使用大写字符和类名的详细名称 secondViewController 不是好的编程习惯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:45:21.717

标签栏控制器显示您在代码中创建的视图。这是预期的行为，因为您正在创建全新的视图。

如果您在 Interface Builder 中创建了“ViewController”和“secondViewController”，那么您将不得不加载 nib——而不是创建新视图——并告诉标签栏控制器使用它们。

基本上你必须改变你的线路：

`UIViewController *viewController1 = [[UIViewController alloc] init];`

类似于

`UIViewController *viewController1 = [[UIViewController alloc] initWithNibName:@"view1" bundle:nil];`

详情请参阅`initWithNibName:bundle:`。

# c++ - Need help compiling jpegtran.c code from libjpeg

> ID：14631530
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:21:41.077
> 
> 标签：c++, eclipse, include, eclipse-cdt, libjpeg

**See bottom for updates**

I am running into a number of odd problems. For starters, I'm using the latest Eclipse CDT and before implementing **do_rot_180**, the compiler linked the folder **projectName/include** but after it now requires specific include/*.h specified below.

Related to that issue, in the project explorer, it seems to think libjpeg.h is missing or invalid despite it being in the folder on the disk.

I am working with libjpeg-9.

![eclipse issue](../Images/9f957b31577f52cd5e71e7e2a3da2ec5.png)

Includes (included what transupp.c and example.c included):

![includes in eclipse](../Images/25aacd8fef9ee645dabf93a6d9413382.png)![hard drive includes](../Images/7a0e0b4e7170d17232f9ab5206421088.png)

Functions (do_rot_180 is from transupp.c and read_JPEG_file is from example.c):

```
See updated code block below under Edit 2 (pretty much just jpegtran.c code)

This is the rotate function which is unused in jpegtran.c:
//LOCAL(void)
    //do_rot_180 (j_decompress_ptr srcinfo, j_compress_ptr dstinfo,
    //      JDIMENSION x_crop_offset, JDIMENSION y_crop_offset,
    //      jvirt_barray_ptr *src_coef_arrays,
    //      jvirt_barray_ptr *dst_coef_arrays)
    ///* 180 degree rotation is equivalent to
    // *   1\. Vertical mirroring;
    // *   2\. Horizontal mirroring.
    // * These two steps are merged into a single processing routine.
    // */
    //{
    //  JDIMENSION MCU_cols, MCU_rows, comp_width, comp_height, dst_blk_x, dst_blk_y;
    //  JDIMENSION x_crop_blocks, y_crop_blocks;
    //  int ci, i, j, offset_y;
    //  JBLOCKARRAY src_buffer, dst_buffer;
    //  JBLOCKROW src_row_ptr, dst_row_ptr;
    //  JCOEFPTR src_ptr, dst_ptr;
    //  jpeg_component_info *compptr;
    //
    //  MCU_cols = srcinfo->output_width /
    //    (dstinfo->max_h_samp_factor * dstinfo->min_DCT_h_scaled_size);
    //  MCU_rows = srcinfo->output_height /
    //    (dstinfo->max_v_samp_factor * dstinfo->min_DCT_v_scaled_size);
    //
    //  for (ci = 0; ci < dstinfo->num_components; ci++) {
    //    compptr = dstinfo->comp_info + ci;
    //    comp_width = MCU_cols * compptr->h_samp_factor;
    //    comp_height = MCU_rows * compptr->v_samp_factor;
    //    x_crop_blocks = x_crop_offset * compptr->h_samp_factor;
    //    y_crop_blocks = y_crop_offset * compptr->v_samp_factor;
    //    for (dst_blk_y = 0; dst_blk_y < compptr->height_in_blocks;
    //   dst_blk_y += compptr->v_samp_factor) {
    //      dst_buffer = (*srcinfo->mem->access_virt_barray)
    //  ((j_common_ptr) srcinfo, dst_coef_arrays[ci], dst_blk_y,
    //   (JDIMENSION) compptr->v_samp_factor, TRUE);
    //      if (y_crop_blocks + dst_blk_y < comp_height) {
    //  /* Row is within the vertically mirrorable area. */
    //  src_buffer = (*srcinfo->mem->access_virt_barray)
    //    ((j_common_ptr) srcinfo, src_coef_arrays[ci],
    //     comp_height - y_crop_blocks - dst_blk_y -
    //     (JDIMENSION) compptr->v_samp_factor,
    //     (JDIMENSION) compptr->v_samp_factor, FALSE);
    //      } else {
    //  /* Bottom-edge rows are only mirrored horizontally. */
    //  src_buffer = (*srcinfo->mem->access_virt_barray)
    //    ((j_common_ptr) srcinfo, src_coef_arrays[ci],
    //     dst_blk_y + y_crop_blocks,
    //     (JDIMENSION) compptr->v_samp_factor, FALSE);
    //      }
    //      for (offset_y = 0; offset_y < compptr->v_samp_factor; offset_y++) {
    //  dst_row_ptr = dst_buffer[offset_y];
    //  if (y_crop_blocks + dst_blk_y < comp_height) {
    //    /* Row is within the mirrorable area. */
    //    src_row_ptr = src_buffer[compptr->v_samp_factor - offset_y - 1];
    //    for (dst_blk_x = 0; dst_blk_x < compptr->width_in_blocks; dst_blk_x++) {
    //      dst_ptr = dst_row_ptr[dst_blk_x];
    //      if (x_crop_blocks + dst_blk_x < comp_width) {
    //        /* Process the blocks that can be mirrored both ways. */
    //        src_ptr = src_row_ptr[comp_width - x_crop_blocks - dst_blk_x - 1];
    //        for (i = 0; i < DCTSIZE; i += 2) {
    //      /* For even row, negate every odd column. */
    //      for (j = 0; j < DCTSIZE; j += 2) {
    //        *dst_ptr++ = *src_ptr++;
    //        *dst_ptr++ = - *src_ptr++;
    //      }
    //      /* For odd row, negate every even column. */
    //      for (j = 0; j < DCTSIZE; j += 2) {
    //        *dst_ptr++ = - *src_ptr++;
    //        *dst_ptr++ = *src_ptr++;
    //      }
    //        }
    //      } else {
    //        /* Any remaining right-edge blocks are only mirrored vertically. */
    //        src_ptr = src_row_ptr[x_crop_blocks + dst_blk_x];
    //        for (i = 0; i < DCTSIZE; i += 2) {
    //      for (j = 0; j < DCTSIZE; j++)
    //        *dst_ptr++ = *src_ptr++;
    //      for (j = 0; j < DCTSIZE; j++)
    //        *dst_ptr++ = - *src_ptr++;
    //        }
    //      }
    //    }
    //  } else {
    //    /* Remaining rows are just mirrored horizontally. */
    //    src_row_ptr = src_buffer[offset_y];
    //    for (dst_blk_x = 0; dst_blk_x < compptr->width_in_blocks; dst_blk_x++) {
    //      if (x_crop_blocks + dst_blk_x < comp_width) {
    //        /* Process the blocks that can be mirrored. */
    //        dst_ptr = dst_row_ptr[dst_blk_x];
    //        src_ptr = src_row_ptr[comp_width - x_crop_blocks - dst_blk_x - 1];
    //        for (i = 0; i < DCTSIZE2; i += 2) {
    //      *dst_ptr++ = *src_ptr++;
    //      *dst_ptr++ = - *src_ptr++;
    //        }
    //      } else {
    //        /* Any remaining right-edge blocks are only copied. */
    //        jcopy_block_row(src_row_ptr + dst_blk_x + x_crop_blocks,
    //                dst_row_ptr + dst_blk_x,
    //                (JDIMENSION) 1);
    //      }
    //    }
    //  }
    //      }
    //    }
    //  }
    //} 
```

On top of that, I can't actually find where **jcopy_block_row** is defined. I've looked through all of the include files and their .c counterparts.

I commented out the error handling stuff in the read_JPEG_file function and want to call do_rot_180 from within but I haven't gotten that far yet.

The only clue I've found is this in transupp.c:

![transupp.c](../Images/86f69cd04b76eda95b09d3e5975fb282.png)

Additional note: jpegtran.exe works separately with the compiled .DLL so it's got to be somewhere.

* * *

Edit - copied jpegint.h over into include/ which resolved the include issues.

```
#ifdef JPEG_INTERNALS
#include "jpegint.h"        /* fetch private declarations */
#include "jerror.h"     /* fetch error codes too */
#endif 
```

Now it's unable to compile even though they all seem to be declared in jpeglib.h or jpegint.h:

![undefined referenced (4)](../Images/ffa022c255e8c7ee9d1eb8a74f55b2b7.png)

* * *

Edit 2 - code now contains jpegtran.c stuff for just being able to rotate 180 degrees. Updated code block:

```
/*********************************************************************************/
/* Defines                                                                       */
/*********************************************************************************/

#define JPEG_INTERNALS

/*********************************************************************************/
/* Includes                                                                      */
/*********************************************************************************/

#include <stdio.h>
#include <iostream>

#include "jinclude.h"
#include "jpeglib.h"
#include "cdjpeg.h"
#include "transupp.h"
#include "jerror.h"

#include <ctype.h>
#include <setjmp.h>

//using namespace std;

static char * infilename;
static char * outfilename;
static JCOPY_OPTION copyoption;
static jpeg_transform_info transformoption;

FILE * infile;
FILE * outfile;

void openFile(char file) {
    if(file == 'i') {
        infile = fopen(infilename, "rb");
    }
    else if(file == 'o') {
        outfile = fopen(outfilename, "wb");
    }
}

/*********************************************************************************/
/* Main Execution Block                                                          */
/*********************************************************************************/

int main() {
    struct jpeg_decompress_struct srcinfo;
    struct jpeg_compress_struct dstinfo;
    struct jpeg_error_mgr jsrcerr, jdsterr;

    jvirt_barray_ptr * src_coef_arrays;
    jvirt_barray_ptr * dst_coef_arrays;
    //int file_index;

    srcinfo.err = jpeg_std_error(&jsrcerr);
    jpeg_create_decompress(&srcinfo);
    dstinfo.err = jpeg_std_error(&jdsterr);
    jpeg_create_compress(&dstinfo);

    jsrcerr.trace_level = jdsterr.trace_level;
    srcinfo.mem->max_memory_to_use = dstinfo.mem->max_memory_to_use;

    //

    outfilename = NULL;
    copyoption = JCOPYOPT_DEFAULT;
    transformoption.transform = JXFORM_NONE;
    transformoption.trim = FALSE;
    transformoption.force_grayscale = FALSE;

    transformoption.transform = JXFORM_ROT_180;

    //

    std::cout << "Enter a filename to rotate 180 degrees." << std::endl;
    std::cin >> infilename;
    openFile('i');
    std::cout << "Enter the output filename." << std::endl;
    std::cin >> outfilename;
    openFile('o');

    //

    jpeg_stdio_src(&srcinfo, infile);
    jcopy_markers_setup(&srcinfo, copyoption);
    (void) jpeg_read_header(&srcinfo, TRUE);

    jtransform_request_workspace(&srcinfo, &transformoption);

    src_coef_arrays = jpeg_read_coefficients(&srcinfo);
    jpeg_copy_critical_parameters(&srcinfo, &dstinfo);

    dst_coef_arrays = jtransform_adjust_parameters(&srcinfo, &dstinfo,
                             src_coef_arrays,
                             &transformoption);

    jpeg_stdio_dest(&dstinfo, outfile);
    jpeg_write_coefficients(&dstinfo, dst_coef_arrays);
    jcopy_markers_execute(&srcinfo, &dstinfo, copyoption);

    jtransform_execute_transformation(&srcinfo, &dstinfo,
                        src_coef_arrays,
                        &transformoption);

    jpeg_finish_compress(&dstinfo);
    jpeg_destroy_compress(&dstinfo);
    (void) jpeg_finish_decompress(&srcinfo);
    jpeg_destroy_decompress(&srcinfo);

    //

    if (infile != stdin)
        fclose(infile);
    if (outfile != stdout)
        fclose(outfile);

    return 0;
}

/*********************************************************************************/
/* End of Program                                                                */
/*********************************************************************************/ 
```

* * *

Edit 3 - Made the changes Jeff mentioned and I am running into this problem when compiling it (in Eclipse):

```
cannot find -lC:\Users\tmp\workspace2\jpegManipulator\lib\libjpeg.a jpegManipulator         C/C++ Problem
Invalid project path: Duplicate path entries found (/jpegManipulator [Include path] base-path:jpegManipulator isSystemInclude:true includePath:include), path: [/jpegManipulator].jpegManipulator pathentry Path Entry Problem 
```

I have workspace directory /lib set as library source and also the specific libjpeg.a library set in the libraries tab - It is definitely in the directory.

If I don't include the specific libjpeg.a file, it complains about missing function references but if I do include it, it complains saying that there is no libjpeg.a to be found. This is for both v9 and v6b.

```
cannot find -lC:\Users\tmp\workspace2\jpeg6bmanip\libs\libjpeg.a    jpeg6bmanip         C/C++ Problem
cannot find -lC:\Users\tmp\workspace2\jpeg6bmanip\libs\libjpeg.la   jpeg6bmanip         C/C++ Problem 
```

Solution to **Edit 3** problem: [https://stackoverflow.com/q/14692302/1666510](https://stackoverflow.com/q/14692302/1666510) but new problem after that. Can't run the program or debug it because **it claims it cannot find jpeglib.h**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:15:01.180

几年前我用 MinGW 开发时也发生过类似的事情。我必须下载 libjpeg 的源代码并在我的机器上构建它才能获得 libjpeg.a 文件。来源可以在这里找到：

[http://www.ijg.org/](http://www.ijg.org/)

我在构建这个库时发现的问题是，当我执行“nm libjpeg.a”时，很明显 cdjpeg.h 和 transupp.h 中的符号没有被编译到库中。我无法通过配置找到一种方法，因为当我执行“配置 --help”时我没有看到任何明显的东西。相反，我编辑了 Makefile.in 文件，它定义了 am__objects_1 .lo 文件列表。我在最后添加了 cdjpeg 和 transupp，如下所示：

```
am__objects_1 = jaricom.lo jcapimin.lo jcapistd.lo jcarith.lo \
    jccoefct.lo jccolor.lo jcdctmgr.lo jchuff.lo jcinit.lo \
    jcmainct.lo jcmarker.lo jcmaster.lo jcomapi.lo jcparam.lo \
    jcprepct.lo jcsample.lo jctrans.lo jdapimin.lo jdapistd.lo \
    jdarith.lo jdatadst.lo jdatasrc.lo jdcoefct.lo jdcolor.lo \
    jddctmgr.lo jdhuff.lo jdinput.lo jdmainct.lo jdmarker.lo \
    jdmaster.lo jdmerge.lo jdpostct.lo jdsample.lo jdtrans.lo \
    jerror.lo jfdctflt.lo jfdctfst.lo jfdctint.lo jidctflt.lo \
    jidctfst.lo jidctint.lo jquant1.lo jquant2.lo jutils.lo \
    jmemmgr.lo cdjpeg.lo transupp.lo @MEMORYMGR@.lo 
```

然后我做了一个“make”和一个“make install”，符号出现在库中。那时我能够构建您的代码。autotools 专家可能会想出一个更好的方法来做到这一点，但这至少会让你继续前进。

# mysql - 如何从“show global status like 'Com_insert'中只选择数字；”

> ID：14631531
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:21:40.770
> 
> 标签：mysql

我正在使用 mysql，如何仅从“显示全局状态，如 'Comm_insert'”中选择数字结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:23:42.767

您可以使用该[`INFORMATION_SCHEMA.GLOBAL_STATUS`](http://dev.mysql.com/doc/en/status-table.html)表：

```
SELECT VARIABLE_VALUE
FROM   INFORMATION_SCHEMA.GLOBAL_STATUS
WHERE  VARIABLE_NAME LIKE 'Com_insert' 
```

# web-services - wsimport fail with maven

> ID：14631540
> 
> 赞同：2
> 
> 时间：2013-01-31T17:22:01.987
> 
> 标签：web-services, jakarta-ee, maven, netbeans

I'm trying to create an ssl webservice client using maven and netbeans(7.2). The webservice is perfectly working and I test it using an ant project.

When I try to build the project and generate webservice stubs I get this error:

```
Failed to execute goal org.jvnet.jax-ws-commons:jaxws-maven-plugin:2.2:wsimport (wsimport-generate-test_project_ws_v1) on project mavenproject3: Error executing: wsimport [-keep, -s, C:\Users\no_name\Documents\NetBeansProjects\mavenproject3\target\generated-sources\jaxws-wsimport, -verbose, -encoding, UTF-8, -extension, -Xnocompile, -catalog, C:\Users\no_name\Documents\NetBeansProjects\mavenproject3\src\jax-ws-catalog.xml, -wsdllocation, https://localhost:8181/test_project_ws_v1/test_project_ws_v1?wsdl, file:/C:/Users/no_name/Documents/NetBeansProjects/mavenproject3/src/wsdl/localhost_8181/test_project_ws_v1/test_project_ws_v1.wsdl]: UndeclaredThrowableException: javax.xml.bind.annotation.XmlElementRef.required() -> [Help 1] 
```

This is my pom (generated by netbeans)

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.procc</groupId>
  <artifactId>mavenproject3</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>mavenproject3</name>
  <url>http://maven.apache.org</url>
  <build>
    <resources>
      <resource>
        <targetPath>META-INF</targetPath>
        <directory>src</directory>
        <includes>
          <include>jax-ws-catalog.xml</include>
          <include>wsdl/**</include>
        </includes>
      </resource>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
    </resources>
    <plugins>
      <plugin>
        <groupId>org.jvnet.jax-ws-commons</groupId>
        <artifactId>jaxws-maven-plugin</artifactId>
        <version>2.2</version>
        <executions>
          <execution>
            <goals>
              <goal>wsimport</goal>
            </goals>
            <configuration>
              <wsdlFiles>
                <wsdlFile>localhost_8181/test_project_ws_v1/test_project_ws_v1.wsdl</wsdlFile>
              </wsdlFiles>
              <wsdlLocation>https://localhost:8181/test_project_ws_v1/test_project_ws_v1?wsdl</wsdlLocation>
              <staleFile>${project.build.directory}/jaxws/stale/test_project_ws_v1.stale</staleFile>
            </configuration>
            <id>wsimport-generate-test_project_ws_v1</id>
            <phase>generate-sources</phase>
          </execution>
        </executions>
        <dependencies>
          <dependency>
            <groupId>javax.xml</groupId>
            <artifactId>webservices-api</artifactId>
            <version>1.4</version>
          </dependency>
        </dependencies>
        <configuration>
          <sourceDestDir>${project.build.directory}/generated-sources/jaxws-wsimport</sourceDestDir>
          <xnocompile>true</xnocompile>
          <verbose>true</verbose>
          <extension>true</extension>
          <catalog>${basedir}/src/jax-ws-catalog.xml</catalog>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.sun.xml.ws</groupId>
      <artifactId>webservices-rt</artifactId>
      <version>1.4</version>
      <scope>compile</scope>
    </dependency>
  </dependencies>
</project> 
```

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:17:02.717

我最近遇到了同样的错误。

似乎这是因为*wsimport*与*jaxb的***2.1**和**2.2**版本混淆了。

 **通过编辑项目pom.xml*`<target>2.1</target>`并向每个导入的 wsdl 的配置添加标签，我能够正确生成 Web 服务源，如下所示：

```
 <execution>
                <goals>
                   <goal>wsimport</goal>
                </goals>
                <configuration>
                   <wsdlFiles>
                      <wsdlFile>path/to/file.wsdl</wsdlFile>
                   </wsdlFiles>
                   <wsdlLocation>http://path/to/webservice?wsdl</wsdlLocation>
                   <staleFile>path/to/file.stale</staleFile>
                   <target>2.1</target>
                </configuration>
                <id>wsimport-generate-WebServiceName</id>
                <phase>generate-sources</phase>
             </execution> 
```

希望它对遇到此问题的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T10:46:56.050

我们有一个类似的问题。在执行 wsimport 时，我们收到一个命令行错误，指出 -encoding 是一个无效参数。

查看 POM 和 jaxws-maven-plugin 的插件部分，存在以下依赖项：

```
<dependencies>
    <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-tools</artifactId>
        <version>2.2.5</version>
   </dependency>
</dependencies> 
```

删除这个解决了这个问题。我们也在使用 2.3 版的 jaxws-maven-plugin

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T10:26:33.520

我可以在一台机器上构建，但不能在另一台机器上构建 - 问题是由环境变量引起的

检查你的 Maven 环境变量，**M2**和**M2_HOME**

**M2_HOME** - “< `Apache-maven-root-directory`>” 例如（“C:\Tools\apach-maven”）

**M2** - "% **M2_HOME** %\bin" (适用于 windows 机器)*

# php - reading a directory of xml files with php

> ID：14631545
> 
> 赞同：0
> 
> 时间：2013-01-31T17:22:24.480
> 
> 标签：php, xml, directory

I have this code that finds every xml file in a directory and then grabs the dates. But I want it instead to echo each line in each xml file in the directory. the xml files look like this

```
<event> 
<day>11</day> 
<month>01</month> 
<year>2013</year> 
<link>link</link> 
<title>Title</title> 
<description></description>
</event> 
```

and my php code

```
$events = array();

// open each xml file in this directory
foreach(glob("*.xml") as $filename) {   
    // get the contents of the the current file
    $xml_file = file_get_contents($filename, FILE_TEXT);

    // create a simplexml object from the contents of the current file
    $xml = simplexml_load_string($xml_file);

    // create a day, link, description, etc.
    $eventDay = (int)$xml->day;
    $eventMonth = (int)$xml->month;
    $eventYear = (int)$xml->year;
    $eventLink = (string)$xml->link;
    $eventDesc = (string)$xml->description;

    if($eventMonth == $month && $eventYear == $year)        
        $events[$eventDay] = array($eventLink,'linked-day');
}
return $events; 
```

}

so for example for each file found it would print out something like

```
 <div class="event"><p>Date: month/day/year</p><p>Title: the xml title</p><p>description: the xml description</p></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:28:53.587

作为一个简单的解决方案，如果您想将事件作为循环的一部分回显，您可以这样做：

```
$events = array();

// open each xml file in this directory
foreach(glob("*.xml") as $filename) {   
    // get the contents of the the current file
    $xml_file = file_get_contents($filename, FILE_TEXT);

    // create a simplexml object from the contents of the current file
    $xml = simplexml_load_string($xml_file);

    // create a day, link, description, etc.
    $eventDay = (int)$xml->day;
    $eventMonth = (int)$xml->month;
    $eventYear = (int)$xml->year;
    $eventLink = (string)$xml->link;
    $eventDesc = (string)$xml->description;
    $eventTitle = (string)$xml->title;        

    if($eventMonth == $month && $eventYear == $year)        
        $events[$eventDay] = array($eventLink,'linked-day');

    echo "<div class=\"event\">
            <p>Date: {$eventMonth}/{$eventDay}/{$eventYear}</p>
            <p>Title: {$eventTitle}</p>
            <p>description: {$eventDesc}</p>
          </div>";

}
return $events; 
```

唯一的补充是`$eventTitle`和`echo`部分。

# jquery - 发现任何元素是否在 jQuery 中具有任何类

> ID：14631547
> 
> 赞同：6
> 
> 时间：2013-01-31T17:22:30.707
> 
> 标签：jquery, html, class, loops

我继承了一些 jQuery 和 HTML，需要找出是否有任何 HTML 元素具有任何值的类名。我已经阅读了一些主题并用谷歌搜索，但找不到任何有用的东西。所以在伪代码中我想要的是：

```
Loop through all HTML elements

If any of them have any class at all:
    Get their class name as a string 
```

希望这是有道理的！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T17:23:48.910

尝试：

```
$('*').each(function() {
    if ($(this).hasClass()) {
        var class_name = $(this).attr('class');
        // do something
    }
}); 
```

你为什么要这样做，我不知道。这是**非常**低效的

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-20T20:47:42.387

物有所值：

```
$(this).hasClass() 
```

总是返回*false*。

```
$("[class]") 
```

也不起作用，因为它返回像

```
<p class=""> my p </p> 
```

jsfiddle 在这里：http: [//jsfiddle.net/JZ8LV/1/](http://jsfiddle.net/JZ8LV/1/)

**解决方案**：

```
$(this).hasClass('') 
```

*对没有*类的元素返回*true*，包括表单中的元素

 *```
<p class=""> my p </p> 
```

所以

```
$('*').each(function() {
    if ($(this).hasClass('') === false) {
        $("body").append($(this).prop("tagName") + " has a proper class defined <br/>");
    }
}); 
```

**返回所有定义了适当类的标签**。

jsfiddle：http: [//jsfiddle.net/2Rtj5/](http://jsfiddle.net/2Rtj5/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T17:28:51.630

你可以使用这样的东西：

```
$("[class]").each(function(){
   var className = $(this).attr("class");
}) 
```

[有属性选择器](http://api.jquery.com/has-attribute-selector/)

演示： http: [//jsfiddle.net/L5WAV/1/](http://jsfiddle.net/L5WAV/1/) （查看控制台中的结果 - 应该找到两个 div）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T17:30:57.800

要使用类获取所有元素，您可以使用`$('*[class]')`：

```
$('*[class]').each(function(){
    // do what you want
}); 
```

您甚至可以使用 轻松计算它们`$('*[class]').length`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T17:27:36.883

```
var classObj = {};

$('*').each(function(){
    var cNames = this.className.split(' ');
    for(var i=0, l=cNames.length; i<l; i+=1){
        classObj[cNames[i]] = true;
    }
}); 
```

这将为您提供一个 Object ( `classObj`)，其中每个出现的文档类都作为属性，因此如果文档中存在具有相同类的元素，则类名不会多次显示。不过，我真的不会这样做，也不会看到任何用例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-10T22:10:45.437

不是一个直接的问题，但我需要它，所以它适用于未来的用户。

如果您想查找*任何*元素是否具有*特定*类，您可以使用此函数：

```
function find_any_element(className) {
    var found = false;
    $('*').each(function() {
        if ($(this).hasClass(className)) {
            var class_name = $(this).attr('class');
            alert("There is an element with this class: " + class_name);
            found = true;
        }
    });
    if(!found) {
        alert("No element with className '" + className + "' found.");
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-15T07:24:51.643

无需循环您的元素：

```
if( jQuery( ".myClass" ).is( ":visible" ) )
{
    // do your thing
} 
```

缺点是您的元素不能将`display`-property 设置为`none`*

# r - 将计数转换为百分比和指数分数的效率

> ID：14631548
> 
> 赞同：1
> 
> 时间：2013-01-31T17:22:33.237
> 
> 标签：r

我目前有以下代码可以产生我想要的结果（`Data_Index`和`Data_Percentages`）

```
Input_Data <- read.csv("http://dl.dropbox.com/u/881843/RPubsData/gd/2010_pop_estimates.csv", row.names=1, stringsAsFactors = FALSE)
Input_Data <- data.frame(head(Input_Data))

Rows <-nrow(Input_Data)
Vars <-ncol(Input_Data) - 1

#Total population column
TotalCount <- Input_Data[1]

#Total population sum
TotalCountSum  <- sum(TotalCount)
Input_Data[1]  <- NULL
VarNames       <- colnames(Input_Data)
Data_Per_Row   <- c()
Data_Index_Row <- c()

for (i in 1:Rows) {

    #Proportion of all areas population found in this row
    OAPer <- TotalCount[i, ] / TotalCountSum * 100

    Data_Per_Col   <- c()
    Data_Index_Col <- c()

    for(u in 1:Vars) {
        # For every column value in the selected row 
        # the percentage of that value compared to the 
        # total population (TotalCount) for that row is calculated
        VarPer <- Input_Data[i, u] / TotalCount[i, ] * 100

        # Once the percentage is calculated the index 
        # score is calculated by diving this percentage 
        # by the proportion of the total population in that 
        # area compared to all areas
        VarIndex <- VarPer / OAPer * 100

        # Binds results for all columns in the row
        Data_Per_Col   <- cbind(Data_Per_Col, VarPer)
        Data_Index_Col <- cbind(Data_Index_Col, VarIndex)
    }

    # Binds results for completed row with previously completed rows
    Data_Per_Row   <- rbind(Data_Per_Row, Data_Per_Col) 
    Data_Index_Row <- rbind(Data_Index_Row, Data_Index_Col) 
}
colnames(Data_Per_Row)   <- VarNames
colnames(Data_Index_Row) <- VarNames

# Changes the index scores to range from -1 to 1
OldRange   <- (max(Data_Index_Row) - min(Data_Index_Row))  
NewRange   <- (1 - -1)  
Data_Index <- (((Data_Index_Row - min(Data_Index_Row)) * NewRange) / OldRange) + -1
Data_Percentages <- Data_Per_Row

# Final outputs
Data_Index
Data_Percentages 
```

我遇到的问题是代码非常慢。我希望能够在具有 200,000 行和 200 列的数据集上使用它（目前使用代码大约需要 4 天）。我确信必须有一种方法可以加快这个过程，但我不确定具体如何。

代码所做的是（在此示例中）将人口计数表划分为年龄段和不同区域，并将其转换为百分比和指数分数。目前有 2 个循环，以便单独选择所有行和列中的每个值，并对它们执行计算。我认为正是这些循环使它运行缓慢，是否有任何替代方案可以产生相同的结果，但速度更快？谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:43:13.247

摆脱“i”循环使用 apply 来计算 OAPer

```
 OAPer<-apply(TotalCount,1,
                   function(x,tcs)x/tcs*100,
                   tcs = TotalCountSum) 
```

同样，您也可以对“u”循环内的工作进行矢量化，希望您的代码中有一些注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:07:08.603

这是您的整个代码。for 循环不是必需的。也是如此`apply`。除法可以通过完全潜水矩阵来实现。

```
df <- Input_Data

total_count <- df[, 1]
total_sum   <- sum(total_count)

df <- df[, -1]

# equivalent of your for-loop
oa_per <- total_count/total_sum * 100
Data_Per_Row <- df/matrix(rep(total_count, each=5), ncol=5, byrow=T)*100
Data_Index_Row <- Data_Per_Row/oa_per * 100
names(Data_Per_Row) <- names(Data_Index_Row) <- names(df)

# rest of your code: identical
OldRange = max(Data_Index_Row) - min(Data_Index_Row)
NewRange = (1 - -1)
Data_Index = (((Data_Index_Row - min(Data_Index_Row)) * NewRange) / OldRange) + -1
Data_Percentages <- Data_Per_Row 
```

# php - Javascript isn't parsing PHP

> ID：14631551
> 
> 赞同：-5
> 
> 时间：2013-01-31T17:23:01.770
> 
> 标签：php, javascript

> **Possible Duplicate:**
> [Parse a JavaScript file through PHP](https://stackoverflow.com/questions/3943198/parse-a-javascript-file-through-php)
> [PHP no longer working inside javascript](https://stackoverflow.com/questions/14630386/php-no-longer-working-inside-javascript)

I am running .php files on my localhost and yesterday they worked and today they have errors, but I haven't changed the code. Here is a test file that has the same error as my longer actual code:

```
<html>
  <script type="text/javascript">
    <? $message = "Hello"; ?>
  </script>
  <? echo $message; ?>
</html> 
```

I know this is a silly way to write Hello, but it demonstrates what error I am getting when I try to use php inside javascript. It was working perfectly fine yesterday and none of the code has changed. When I run this, it says "unexpected token <" on line 3\. I think it is a problem with apache/php/mysql but I'm lost trying to fix it. Any suggestions would be great. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:24:53.577

我猜，您禁用了短标签。您需要启用 PHP 短标签才能使其正常工作。检查这是否有效：

```
<html>
  <script type="text/javascript">
    <?php $message = "Hello"; ?>
  </script>
  <?php echo $message; ?>
</html> 
```

在我看来，我不知道为什么要打开一个`<script>`标签并在那里声明一个 PHP 服务器端语句。你知道吗？它不输出任何东西。无论如何，上述代码的输出将是这样的：

```
<html>
  <script type="text/javascript">

  </script>
  Hello
</html> 
```

所以没有必要拥有`<script>`标签，因为它是客户端，PHP 并不关心这一点。你可以在任何你想要的地方给出它，只要它们在`<?php ?>`标签内，它们就不会被浏览器解析。:)

* * *

如果您在自己的系统中执行此操作，要在 PHP 中启用短标签，请执行以下操作：

1.  找到`php.ini`文件。
2.  找到这个：

    ```
    short_open_tag = Off 
    ```

3.  将其更改为：

    ```
    short_open_tag = On 
    ```

* * *

*从手册：*

> **short_open_tag：告诉 PHP 是否** *应该允许 PHP 的 open 标记**的缩写形式。`(<? ?>)`如果您想将 PHP 与 XML 结合使用，您可以禁用此选项以使用`<?xml ?>`内联。否则，您可以使用 PHP 打印它，例如：`<?php echo '<?xml version="1.0"?>'; ?>`. 此外，如果禁用，您必须使用 PHP open tag 的长格式`(<?php ?>)`。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:28:59.097

它不是有效的javascript。

运行 php 后，你最终会得到一个 dom，`<script type="text/javascript"></script>`因为你没有写任何东西。

尝试：

```
<script>
var hello = "<?php echo 'hello' ?>"
</script>
<script type="text/javascript">
document.writeln(hello)
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T17:30:10.503

脚本对我来说很好用。您的问题中发布的代码是否完整？我能够重现该问题的唯一方法是使用以下代码：

```
<?php
<html>
  <script type="text/javascript">
    <? $message = "Hello"; ?>
  </script>
  <? echo $message; ?>
</html>
?> 
```

如果我错了，请纠正我，但我假设您发布的代码在 *.php 文件中和 php 标签之间。如果是这种情况，请删除所述标签，它应该可以工作。

# php - 获取表格中的相关行并创建一组文本框以进行编辑和重新提交

> ID：14631553
> 
> 赞同：0
> 
> 时间：2013-01-31T17:23:14.313
> 
> 标签：php, arrays, submit

考虑以下表结构：TBL“lease_rates”：

```
id   lease_year   classes_letter   lease_rate
01      2010            A              123
02      2010            B              129 
..      2010            E              145
06      2011            A              131 
```

等等

我想要做的是将所有这些值放入文本框中进行编辑和重新提交，如下所示：

```
 A     B     C     D     E      
2011  131   ...   ...   ...   ...
2010  123   129   ...   ...   145

      [Add a row]  [Submit Edits] 
```

我觉得我必须做的第一件事是根据lease_year 和classes_letter 创建一个值数组，对其进行排序，然后填充文本框。

我有点坚持如何做到这一点。一旦全部填充完毕，提交按钮需要使用新值更新表。

我从这里开始： [http](http://www.phpeasystep.com/mysql/10.html) ://www.phpeasystep.com/mysql/10.html 但它并没有太大帮助，因为我有重复的值，我想要排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:20:45.727

你可以使用三个数组，`$years`（排序的），另一个`$classes`（排序的）和最后一个这样的`$arr[$year][$class] = $rate`。然后像这样浏览它：

```
foreach ($years as $year) {
    foreach ($classes as $class) {
        if ($arr[$year][$class] == null) {
            echo '...';
        } else {
            echo $arr[$year][$class];
        }
    }
} 
```

如果您需要跟踪其 ID，而不是直接在二维数组中存储费率，请存储一个数组，或者更好的是，存储一个对象（来自 LeaseRate 类之类的东西）。

# c++ - error C2244 on templated member variable with templated argument function, only happens on Visual Studio

> ID：14631554
> 
> 赞同：2
> 
> 时间：2013-01-31T17:23:15.597
> 
> 标签：c++, visual-studio, templates, arguments, member

I ran into an interesting, yet extremely annoying, bug on Visual Studio, below is the simplest repro: (uncomment the #define will allow VS to build the code)

```
#include <iostream>
using namespace std;

//#define BUILD_ON_VS

class CC
{
public:
   template<typename T>
   struct Foo
   {
      template<T foo>
      void bar()
      {
         cout << "VC likes this!\n";
      }
#ifndef BUILD_ON_VS
      template<T foo>
      void bar1();
#endif
   };

   Foo<int> m_foo;
};

#ifndef BUILD_ON_VS
template<typename T>
template<T foo>
void CC::Foo<T>::bar1()
{
   cout << "VC doesn't like this...\n";
}
#endif

int main()
{
   CC cc;
   cc.m_foo.bar<-1>();
#ifndef BUILD_ON_VS
   cc.m_foo.bar1<2>();
#endif
   return 0;
} 
```

Basically, I cannot put the definition of the function bar outside of the class in Visual Studio. bar and bar1 are exactly the same otherwise. Test on VS 2010 and VS 2012, both failed with errors:

```
error C2244: 'CC::Foo<T>::bar1' : unable to match function definition to an existing declaration
definition
'void CC::Foo<T>::bar1(void)'
existing declarations
'void CC::Foo<T>::bar1(void 
```

It, however, works on all online compilers, such as compileonline and ideone.

I want to keep everything inside the cpp file, not in the .h to keep the code base clean.

```
Setting var1 to:
{
   template<typename TT, TT foo>
   void bar1();
}

template<typename T>
template<typename TT, TT foo>
void CC::Foo<T>::bar1()
{
} 
```

Also works, but it makes the code looks idiotic by redefining the same template parameter and much more prone to bugs. It also makes the interface messy.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T17:18:26.067

通过随机输入找到一个修复，看看它是否编译，哈哈！看起来有点傻……

```
#include <iostream>
using namespace std;

//#define BUILD_ON_VS

class CC
{
public:

   template<typename T>
   struct Foo;

   Foo<int>* m_foo;

   template<typename T>
   struct Foo
   {
      template<T foo>
      void bar();
   };
};

template<typename T>
template<T foo>
void CC::Foo<T>::bar()
{
   cout << "VC happen to like this...\n";
}

int main()
{
   CC cc;
   cc.m_foo = new CC::Foo<int>;
   cc.m_foo->bar<2>();
} 
```

我需要创建一个抽象类并使用模板参数对其进行实例化；

想知道为什么 VC 不能像 GCC 那样自动执行此操作。

# java - 将对象分配给直到运行时才知道的类型

> ID：14631556
> 
> 赞同：1
> 
> 时间：2013-01-31T17:23:20.817
> 
> 标签：java

我正在尝试编写一个方法，该方法将接收一个数组并返回另一个相同类型的数组，大小加倍并具有相同的内容。但是，我需要一种将数组类型分配给直到运行时才知道的东西的方法。例子：

```
public object[] doubleArray(object[] array) {
---[] arrayCopy = new ---[array.length*2];
//copy content
for (int i = 0; i < array.length; i++) {
        arrayCopy[i] = array[i];
}
return arrayCopy;
} 
```

传入的数组要到运行时才能知道。感谢任何帮助将不胜感激

PS 我意识到可以使用 ArrayLists 等来管理数组大小，但出于此目的，将事物保存在数组中会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:32:33.353

如果您使用[`Arrays.copyOf(T[] original, int newLength)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)的是 Java 1.6 或更高版本，则可以使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:32:10.520

你可以为一个通用数组做的是

```
public static <A> A doubleArray(A array) {
    int length = Array.getLength(array);
    Class<?> componentType = array.getClass().getComponentType();
    A copy = (A) Array.newInstance(componentType, length * 2);
    System.arraycopy(array, 0, copy, 0, length);
    return copy;
} 
```

注意：这适用于所有数组，包括原始数组。

```
int[] ints = doubleArray(new int[4]);
String[] strings = doubleArray("a,b,c,d,e,f".split(",")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:47:09.073

就像 Peter Lawrey 的答案的变体一样，只要您知道您正在处理某个引用类型的数组（而不是一些原始数字类型，例如`byte[]`），您就可以这样做：

```
public static Object[] doubleArray(Object[] array) {
    Object[] ret = (Object[])Array.newInstance(src.getClass().getComponentType(), src.length * 2);
    System.arraycopy(src, 0, ret, 0, src.length);
    return(ret);
} 
```

它的优点是不包含任何未经检查的泛型转换，因此不会产生任何警告。

# c# - IoC Registration differences between Unity and Simple Injector

> ID：14631558
> 
> 赞同：4
> 
> 时间：2013-01-31T17:23:30.817
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, simple-injector

I have one project functioning perfectly using Unity. I try switching to use Simple Injector instead and now NO changes ever get saved in my database. I believe it has to do with the lifetime of the registered components. Here is the Unity container registration:

```
private IUnityContainer GetUnityContainer()
{
    IUnityContainer container = new UnityContainer()
        .RegisterType<IDatabaseFactory, DatabaseFactory>(
            new HttpContextLifetimeManager<IDatabaseFactory>())
    .RegisterType<IUnitOfWork, UnitOfWork>(
        new HttpContextLifetimeManager<IUnitOfWork>())
    .RegisterType<ICategoryRepository, CategoryRepository>(
        new HttpContextLifetimeManager<ICategoryRepository>())
    .RegisterType<ICategoryService, CategoryService>(
        new HttpContextLifetimeManager<ICategoryService>());

    return container;         
} 
```

And here is the new Simple Injector registration.

```
container.Register<IDatabaseFactory, DatabaseFactory>();
container.Register<IUnitOfWork, UnitOfWork>();
container.Register<ICategoryRepository, CategoryRepository>();
container.Register<ICategoryService, CategoryService>(); 
```

I'm not sure how the `HttpContextLifetimeManager` comes into play with Simple Injector. MVC is the client for the unity example, but I'm changing to a WPF project and Simple Injector. Any suggestions are much appreciated. Thanks.

* * *

@Steven. Thanks for your comment. I just discovered that since my RepositoryBase and my UnitOfWork inject an IDatabaseFactory in their constructors that I needed to use `container.RegisterSingle<IDatabaseFactory, DatabaseFactory>()`. This resolved one issue. I still have a problem with lifetime though. Since my consuming app is WPF, how will the RegisterPerWebRequest work?

My project has a DataLayer >> BusinessLayer >> WcfService >> WPF Front end. Simple Injector is set on the WcfService project and the business layer has Boostrapper to register items there. As of now, my WPF client will GetAllCountries() and display in a grid. If I change the name of one and try to update, I get the "An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key." error. I've done some debugging and find that after the GetCountries service call in the WPF client, when I go back to try to update, I see ALL of the countries are attached to the context via dbContext.ChangeTracker.Entries(). At this point I should have NO entities being tracked as my context should have been disposed after the first unit of work.

In an MVC app the RegisterPerWebRequest fixes that, but what is the equivalent for WPF? I'm going to install the extension now and try it anyway but I have a feeling it isn't the solution I'm looking for.. or is it? Thanks again for the help.

* * *

OK. I did a bit more digging and found a solution that works. I'm just not sure if it's the correct one. Anyway, now in my BLL where there is a bootstrapper to register things, I can register like this:

```
container.RegisterPerWcfOperation<IDatabaseFactory, DatabaseFactory>();
container.RegisterPerWcfOperation<IUnitOfWork, UnitOfWork>();
container.RegisterPerWcfOperation<ICountryRepository, CountryRepository>(); 
```

That gives me what I was looking for. Only a single instance of DatabaseFactory is ever created and thus my repository and unit of work share it like they should. Also, after GetCountries() on the client, when I do my second call to the service to perform and update, I check the dbContext.ChangeTracker.Entries() and see that there are NO entities being tracked, which is correct. I can now attach, set to modify, and call SaveChanges without getting the duplicate key error. Does this seem ok? Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:29:44.797

`Register`Simple Injector 上的重载使用*瞬态*生活方式注册类型（这意味着没有缓存）。每次您请求实例（或注入实例）时，都会创建一个新实例。在 Unity 中也是如此；默认的生活方式是*短暂*的。

似乎使用*Per Web Request*生活方式注册这些类型是非常必要的。当在 上进行这些提交`IUnitOfWork`的类与实际对`IUnitOfWork`.

与 Unity 等效的 Simple Injector`HttpContextLifetimeManager`是[WebRequestLifestyle](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html#web-request)。这种生活方式不是核心库的一部分，但可以[作为 NuGet 包](https://nuget.org/packages/SimpleInjector.Integration.Web)使用。

将其包含在项目中后，您可以进行以下注册：

```
container.Options.DefaultScopedLifestyle = new WebRequestLifestyle();

container.Register<IDatabaseFactory, DatabaseFactory>(Lifestyle.Scoped);
container.Register<IUnitOfWork, UnitOfWork>(Lifestyle.Scoped);
container.Register<ICategoryRepository, CategoryRepository>(Lifestyle.Scoped);
container.Register<ICategoryService, CategoryService>(Lifestyle.Scoped); 
```

或等价物：

```
Lifestyle lifestyle = new WebRequestLifestyle();

container.Register<IDatabaseFactory, DatabaseFactory>(lifestyle);
container.Register<IUnitOfWork, UnitOfWork>(lifestyle);
container.Register<ICategoryRepository, CategoryRepository>(lifestyle);
container.Register<ICategoryService, CategoryService>(lifestyle); 
```

的默认行为`WebRequestLifestyle`是在 Web 请求结束时释放创建的实例。不需要为此进行特殊注册（Simple Injector`HttpModule`在应用程序启动时为您连接）。

* * *

更新：

我很抱歉没有把你的问题读到最后一行。我错过了您想使用 WPF 客户端对其进行配置的事实。

您可能知道，由于您的客户端与 WCF 服务是不同的应用程序，因此您的系统中有两个[组合根](http://freecontent.manning.com/dependency-injection-in-net-2nd-edition-understanding-the-composition-root/)；一份给客户，一份给服务。他们的注册可能会完全不同。从 Simple Injector v4.1 开始，对于[WCF 服务](https://simpleinjector.readthedocs.io/en/latest/wcfintegration.html)，您确实需要[AsyncScopedLifestyle](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html#async-scoped-async-await)，或者当您遵循[dotnetjunkie/solidservices上的参考架构时，您会发现使用](https://github.com/dotnetjunkie/solidservices)[ThreadScopedLifestyle](https://simpleinjector.readthedocs.io/en/latest/lifetimes.html#per-thread)`Execute`并在两种方法中显式定义范围很容易.

我发现管理两层应用程序（客户端 -> 数据库）的客户端中对象的生命周期相当困难，因为很难为某个范围定义一个工作单元。由于您使用的是命令/处理程序 + 查询/处理程序方法，因此事情会变得容易得多。客户端上不会有任何工作单元。就在服务器上。你的演示者可以只依赖几个`IQueryHandler<TQuery, TResult>`和`ICommandHandler<TCommand>`接口，你就完成了。查询不会改变状态，命令应该是原子操作。换句话说，一个工作单元只需要在执行命令的边界内。

# ios - XCode, LLVM, and Code Optimization - Fastest,Smallest vs None

> ID：14631568
> 
> 赞同：4
> 
> 时间：2013-01-31T17:24:08.657
> 
> 标签：ios, objective-c, xcode, llvm

There some very good descriptions on SO, as well as all over the web, about how LLVM optimizes code. But these fail to answer my specific question.

In Xcode, there are various options for code optimization in the project and target settings. I understand the need for no optimization during development, but why would one choose anything other than `Fastest,Smallest[-Os]` when compiling a release build.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:53:29.603

在大多数情况下，-Os 是一个不错的选择。它很好地结合了空间优化和速度优化。

但是，其他选项确实有一些吸引力：

*   -O/-O1：“我希望能够多一点调试优化代码的能力”
*   -O2：（好吧，老实说，我不确定为什么会选择 -O2 而不是 -Os。也许如果特定的代码大小优化 -Os 确实会严重损害性能？）
*   -O3：“这部分代码需要快速，并且对激进的内联和循环展开响应足够好，以抵消代码大小的损失”

# php - 无法让按钮附加到 textarea

> ID：14631570
> 
> 赞同：2
> 
> 时间：2013-01-31T17:24:12.983
> 
> 标签：php, javascript, html

我正在用 PHP 和 JavaScript 构建一个餐厅菜单应用程序并且在下订单时我似乎无法获得附加文本区域的按钮......（目前这只是测试代码）这是我的代码：

```
$test = mysql_query("SELECT * FROM main_stock");
while($row = mysql_fetch_array($test)){
echo "<div id='".$row["RCode"]."'><a href='javascript:addTo(".$row["Name"].",".$row["RCode"].")'>".$row["Name"]."</a></div>";} 
```

我的javascript函数如下：

```
function addTo(name, Rcode) {
document.getElementById('order').value += name;
} 
```

HTML表单如下：

```
 <form id="OrderForm" name="OrderForm" method="post" action="">
  <p>
    <label>
      <textarea name="order" id="order" cols="35" rows="20" readonly="readonly">test</textarea>
    </label>
  </p><table>
  <tr><td>Subtotal:</td><td><input type="text" id="subtotal" readonly="readonly" value="2.00" /></td></tr>
    <tr><td>Tax:</td><td><input type="text" id="tax" readonly="readonly" value="2.00"/></td></tr>
    <tr><td>Total:</td><td><input type="text" id="total" readonly="readonly" value="4.00"/></td></tr>
    <tr><td></td><td><input type="submit" id="submit" value="Send Order To Kitchen"/></td></tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:47:06.947

看起来`echo`可能会导致无效的 JavaScript 语法。例如：

```
addTo(Something, Inc.,STI) 
```

而不是：

```
addTo("Something, Inc.","STI") 
```

您需要输出额外的引号以供 JavaScript 使用。而且，由于您已经在使用`"`PHP 字符串和`'`HTML 属性，这将需要转义 - 或编码：

```
echo "... href='javascript:addTo(&quot;".$row["Name"]."&quot;,&quot;".$row["RCode"]."&quot;)'>..."; 
```

另一个选项可能是使用[`json_encode`](http://php.net/json_encode)，因为 JSON 基于 JavaScript 语法：

```
echo "... href='javascript:addTo(".json_encode($row["Name"]).",".json_encode($row["RCode"]).")'>..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:26:20.993

`TEXTAREAs`没有`.value`，他们有`.innerHTML`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:27:14.987

尝试

```
document.getElementById('order').innerText += name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:35:53.930

`'order'`在您的示例中，ID 没有任何内容。

而不是`document.getElementById('order')`，尝试`document.getElementById(Rcode)`。

# php - Do I need to modify links throughout my webpages once I use MOD_REWRITE?

> ID：14631571
> 
> 赞同：0
> 
> 时间：2013-01-31T17:24:21.247
> 
> 标签：php, .htaccess

I'm in process of cleaning my URLs.

Say I have a URL [http://www.example.com/index.php?id=12345&name=some-name](http://www.example.com/index.php?id=12345&name=some-name)

I just changed it to look better using mod_rewrite

[http://www.example.com/blog/12345/some-name](http://www.example.com/blog/12345/some-name)

Now the pain is the page index.php is not loading any images, css files and the anchor links are all broken.

Location of my image is [http://www.example.com/images/12345/some-image.jpg](http://www.example.com/images/12345/some-image.jpg)

I have used relative paths through out my site.

Now do I need to change links on all my pages ? Can .htaccess do some trick for me ? Please help.

Here is my .htaccess-

```
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d

RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^blog/(.*)/$ index.php?id=$1 [NC,L]

RewriteRule ^blog/(.*)/(.*)$ index.php?id=$1&name=$2 [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:34:38.703

看看我添加的第二行。

```
RewriteEngine On
RewriteRule \.(css|jpe?g|gif|png|js|css|htm|html|mp3|wav|ico)$ - [L]
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^blog/(.*)/$ index.php?id=$1 [NC,L]
RewriteRule ^blog/(.*)/(.*)$ index.php?id=$1&name=$2 [NC,L] 
```

这基本上是说如果您在 URL 中看到此扩展名，只需将其直接传递给文件即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:35:16.827

RewriteCond 仅适用于下一条规则，而不适用于以下所有规则。您的第二条规则不是要避免存在的目录和文件。尝试这个

```
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^blog/(.*)/$ index.php?id=$1 [NC,L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^blog/(.*)/(.*)$ index.php?id=$1&name=$2 [NC,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:37:44.290

啊……！

我刚刚在我的标题中添加了这条小线，它解决了我所有的问题:)

```
<base href="http://example.com/ /> 
```

现在我想......为什么我的大脑花了这么长时间才想到这个:)

# xml - 如何重构这个有 // 的 xslt？

> ID：14631577
> 
> 赞同：0
> 
> 时间：2013-01-31T17:24:46.713
> 
> 标签：xml, parsing, xslt, xpath

我正在重构 word xml 的 xslt，以按照[此处](https://stackoverflow.com/questions/14488207/should-we-rewrite-the-xsl-in-cduce)的建议提高性能。我对 xslt 比较陌生。为什么以下陈述不等价？

**表格1**

```
<xsl:value-of select="//w:style[@w:styleId = $styleName][ancestor::pkg:part/@pkg:name='/word/styles.xml']"/> 
```

**表格2**

```
<xsl:value-of select="/pkg:package/pkg:part[@pkg:name='/word/styles.xml']/child::w:style[@w:styleId = $styleName]" /> 
```

请注意， pkg:package 是根， pkg:part 是直接子级。

Form1 声明获取 w:style 元素，其属性为 equaling `$styleName`，其祖先为`pkg:part`attribute `@pkg:name='/word/styles.xml'`。

表格 2 状态获得 w:style 元素，其属性等于`$styleName`who are children`pkg:package/pkg:par@pkg:name='/word/styles.xml'`

我试图重写的实际语句是这样的：

```
<xsl:value-of select="//w:style[@w:styleId = $styleName][ancestor::pkg:part/@pkg:name='/word/styles.xml']/w:pPr/w:numPr/w:numId/@w:val"/> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:37:36.357

您的第二个 XPath 在正确的轨道上，但它只会匹配（轴在这里是多余的）`w:styles`的直接子级，我认为它们不是。这应该有效：`pkg:part``child::`

```
/pkg:package/pkg:part[@pkg:name='/word/styles.xml']//w:style[@w:styleId = $styleName] 
```

我认为这是对原始 XPath 的改进，但它仍然有一个`//`。我对wordprocessingML的了解不是很广，但是是不是所有`<w:style>`的s都是元素的子`<w:styles>`元素，都是元素的子`<pkg:xmlData>`元素呢？如果是这样，这应该可以工作（为了便于阅读，分成两行）：

```
/pkg:package/pkg:part[@pkg:name='/word/styles.xml']
                               /pkg:xmlData/w:styles/w:style[@w:styleId = $styleName] 
```

提高性能的另一种可能性是使用密钥。在您的 XSLT 中，您可以像这样定义一个键：

```
<xsl:key name="kStyle" match="w:style" use="@w:styleId" /> 
```

然后你会像这样访问你想要的样式：

```
<xsl:value-of select="key('kStyle', $styleName)
                               [ancestor::pkg:part/@pkg:name = '/word/styles.xml']
                               /w:pPr/w:numPr/w:numId/@w:val" /> 
```

键查找通常非常有效，因此第二个选项在性能方面可能更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:50:46.283

不要假设以“//”开头的表达式总是不好的。这在早期是正确的，对于自早期以来没有太大进步的处理器可能仍然如此，但是包括现代版本的 Saxon 在内的一些处理器非常有效地处理“//”。如果您要进行此类更改，请确保您进行的测量表明更改是有效的。对于这种表达方式，使用键更有可能产生积极的影响——尽管有些处理器甚至会自动为您做到这一点。

# c++ - 专门实现内部类

> ID：14631586
> 
> 赞同：1
> 
> 时间：2013-01-31T17:25:08.517
> 
> 标签：c++, templates

我正在尝试专注`Outer<P>::Inner`于如下所示的类型`P`，并且它似乎可以工作（在 gcc 4.5.3 和 Visual Studio 2008 上），直到`Inner i`在`Outer<P>`. 有没有一种方法可以在`Inner i`没有专门的情况下声明`Outer<P>`？

```
#include <cstdlib>
#include <iostream>

template<typename T>
struct Outer
{
    Outer()
    {
        Inner();
    }

    struct Inner;   
    //Inner i;      // compilation error
};

template<>
struct Outer<bool>::Inner
{
    Inner()
    {
        std::cout << "Specialization ..." << std::endl;
    }
};

template<typename T>
struct Outer<T>::Inner
{
    Inner()
    {
        std::cout << "Generic version ..." << std::endl;
    }
};

int main()
{
    Outer<char> o2;
    Outer<bool> o1;
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:31:19.217

专业化必须在命名空间级别完成。所以最简单的方法是`Inner`在命名空间级别声明：

```
template <typename T>
struct Outer_Inner
{
  Outer_Inner()
  {
    std::cout << "Generic version ..." << std::endl;
  }
};

template <>
struct Outer_Inner<bool>
{
  Outer_Inner()
  {
    std::cout << "Specialization ..." << std::endl;
  }
};

template<typename T>
struct Outer
{
  Outer() : i()
  {
  }

  Outer_Inner<T> i;      // no error anymore
}; 
```

在 C++11 中，有一种解决方法可以在类中定义所有内容，但我不推荐它。

```
template<typename T>
struct Outer
{
  Outer() : i()
  {
  }

  struct generic_inner
  {
    generic_inner()
    {
      std::cout << "Generic version ..." << std::endl;
    }
  };

  struct special_inner
  {
    special_inner()
    {
      std::cout << "Specialization ..." << std::endl;
    }
  };

  typename std::conditional<std::is_same<T, bool>::value,
                            special_inner, generic_inner>::type i;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:08:16.780

制作`i`（共享）指针似乎有效

```
template<typename T>
struct Outer
{
    Outer() : i( new Inner() )
    {
    }

    struct Inner;   
    boost::shared_ptr<Inner> i;
}; 
```

这就是我认为正在发生的事情。在原始代码`Inner`之后声明`Outer`，它应该。因此，它的大小在`i`声明时是未知的。在上面的代码片段`i`中是一个指针，它的大小是已知的，尽管`Inner`尚未定义。

在声明之前，在 Visual Studio 2008 中“工作”但在 gcc 4.5.3 中失败，因为标准禁止这样做，所以在`Inner`内部进行专门化。`Outer``i`

但是，该标准允许在类范围内进行部分专业化。这使得有一个非指针成员成为可能，`i`尽管模板化为一个 dummy parameter `T2=T1`，如下所示，尽管我认为我会使用（智能）指针版本。

```
template<typename T1>
struct Outer
{
    template<typename T2,bool>
    struct Inner; 

    template<typename T2>
    struct Inner<T2,true>
    {
        Inner()
        {
            std::cout << "# Specialization ..." << std::endl;
        }
    };

    template<typename T2>
    struct Inner<T2,false>
    {
        Inner()
        {
            std::cout << "# Generic version ..." << std::endl;
        }
    };  

    Outer()
    {
    }

    Inner<T1,boost::is_same<T1, bool>::value> i;
}; 
```

# python - Key 类构造函数是否接受 kind 参数的随机字符串？

> ID：14631588
> 
> 赞同：1
> 
> 时间：2013-01-31T17:25:17.147
> 
> 标签：python, google-app-engine, python-2.7

我正在阅读此页面上 NDB 数据存储的 GAE 文档。

[https://developers.google.com/appengine/docs/python/ndb/overview#storing](https://developers.google.com/appengine/docs/python/ndb/overview#storing)

在下面的代码中，

```
greeting = Greeting(parent=ndb.Key("Book", guestbook_name or "*notitle*"),
                    content = self.request.get('content')) 
```

Greeting 有一个 Key 集作为它的父级。此外，该 Key 是由一个“Book”字符串构成的，它看起来只是一个随机字符串。

Key 类构造函数是否接受 kind 参数的随机字符串？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:53:16.877

当您设置父级时，它实际上不必存在。

所以是的，在某种程度上它是一个随机字符串。但是如果你**有**一个模型叫做`Book`

```
class Book(ndb.Model):
  content = ndb.StringProperty() 
```

本来可以这样写的：

```
greeting = Greeting(parent=ndb.Key(Book, guestbook_name or "*notitle*"),
                    content = self.request.get('content')) 
```

[文档](https://developers.google.com/appengine/docs/python/ndb/overview#storing)说明：

> 或者，您可以使用模型类对象本身而不是其名称来指定实体的种类

这就是我在这里所做的。两者等同于同一件事。

# .htaccess - 301重定向与重写

> ID：14631589
> 
> 赞同：9
> 
> 时间：2013-01-31T17:25:24.543
> 
> 标签：.htaccess, redirect, rewrite

我有一个由其他人托管的网站，所有网页都是 .html 文件。我现在托管该站点并将其更改为 wordpress 站点。域没有改变，但显然所有页面都有。将所有 .html 页面重定向到主 url 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T17:37:27.080

`301 Redirect`在一个`.htaccess`不需要 mod_rewrite 库。这是一种更简单的重定向方式，但它不具备使用重写规则所获得的灵活性和强大功能。如果您有一个带有显式 url 的 1-1 映射，您可以使用重定向：

```
Redirect 301  /path/file.html http://new.site.com/newpath.php 
```

如果您尝试使用正则表达式对许多类似模式进行通配符匹配，则需要使用 Rewrite。

```
RewriteRule ^(.*).html$ http://new.site.com/$1.php [R=301,NC,L] 
```

这是对这两种方法的一个很好的概述：[http ://www.ksl-consulting.co.uk/301-redirect-examples.html](http://www.ksl-consulting.co.uk/301-redirect-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T03:01:27.673

还有 RedirectMatch 也使用正则表达式对相似模式进行通配符匹配。选择取决于您需要做什么。

重写是复杂的 - 学习曲线 - 但您可以提供替代 url 而无需提供 HTML 代码和看起来不可能的东西。但是强大的功能带来了复杂性和大量错误。

如果您只是做一个简单的重定向 - 可能匹配一些 url - 重定向是要走的路。

当您无法使用 Redirect 时，您可能想开始学习 Mod_Rewrite。

# html - 使用 XPath 获取 HTML 元素的文本内容？

> ID：14631590
> 
> 赞同：28
> 
> 时间：2013-01-31T17:25:25.807
> 
> 标签：html, xml, xpath, html-parsing

看到这个 html

```
<div>
    <p>
    <span class="abc">Monitor</span> <b>$300</b>
    </p>
    <a href="/add">Add to cart</a>
</div>
<div>
    <p>
    <span class="abc">Keyboard</span> $20 
    </p>
    <a href="/add">Add to cart</a>
</div> 
```

使用 xpath 我想解析`Monitor $300`和`Keyboard $20`. 我使用这个 xpath

```
 //div[a[contains(., "Add to cart")]]/p/text() 
```

但它选择`<span class="abc">Monitor</span> <b>$300</b>`. 我不想要标签。如何仅获取文本？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-31T17:35:08.740

您要选择所有*后代*文本，而不仅仅是子文本：

```
//div[a[contains(., "Add to cart")]]/p//text() 
```

`p`注意和`text()`那里的双斜线。

不过，这可能还会包含大量标签间空白，您需要将其清理干净。使用示例`lxml`：

```
>>> import lxml.etree as ET
>>> tree = ET.fromstring('''<div>
... <div>
...     <p>
...     <span class="abc">Monitor</span> <b>$300</b>
...     </p>
...     <a href="/add">Add to cart</a>
... </div>
... <div>
...     <p>
...     <span class="abc">Keyboard</span> $20 
...     </p>
...     <a href="/add">Add to cart</a>
... </div>
... </div>''')
>>> tree.xpath('//div[a[contains(., "Add to cart")]]/p//text()')
['\n    ', 'Monitor', ' ', '$300', '\n    ', '\n    ', 'Keyboard', ' $20 \n    ']
>>> res = _
>>> [txt for txt in (txt.strip() for txt in res) if txt]
['Monitor', '$300', 'Keyboard', '$20'] 
```

# jquery - 检测 chrome 上的自动填充

> ID：14631592
> 
> 赞同：4
> 
> 时间：2013-01-31T17:25:29.733
> 
> 标签：jquery, google-chrome, autocomplete

好了，故事到此为止。

我有一个带有标签覆盖的登录表单，在输入值时会隐藏。
这一切都很好，但在 chrome 上，自动填充不会触发任何东西。

所以我发现了以下解决方法，但是当我尝试删除警报时它停止工作？？？

```
$(window).load(function(){
   alert();
   if($('input:-webkit-autofill').val()){
      $("label[for='user'], label[for='pass']").css("visibility", "hidden");   
   }        
}); 
```

我已经修补了一个或两个小时，但什么也没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T14:54:24.360

```
$(document).ready(function (e) {
    setTimeout(function () {
        if ($('input#username:-webkit-autofill').val()) {
            console.debug($('input#username:-webkit-autofill').val());
        }
    }, 25);
}); 
```

这是我的解决方法 =]
希望这会有所帮助。

# git - 克隆 git 存储库失败

> ID：14631594
> 
> 赞同：7
> 
> 时间：2013-01-31T17:25:32.110
> 
> 标签：git, url, git-clone

当我尝试从存储库克隆以下内容时：

```
git clone git://gitorious.org/qt/qt5.git qt5 
```

我收到此错误：

```
fatal: Unable to look up gitorious.org (port 9418) (This is usually a temporary error         during hostname resolution and means that the local server did not receive a response from an authoritative server. ) 
```

**有什么问题？**

我的网络使用代理的另一件事，我已经设置了它：

```
 git config --global http.proxy http://192.168.0.7:8080 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T21:28:20.287

首先尝试使用 https 地址，而不是 git 地址（需要特殊端口）

```
https://git.gitorious.org/qt/qt5.git 
```

替代方案可能很复杂（如[ssh 端口转发](https://stackoverflow.com/a/10711946/6309)）

# installation - 如何让用户浏览到要使用 Inno Setup 复制的文件

> ID：14631597
> 
> 赞同：3
> 
> 时间：2013-01-31T17:25:46.923
> 
> 标签：installation, inno-setup

我需要用户浏览到一个文件，选择它，然后将此文件从选定的源复制到应用程序文件夹。

在这篇文章之后 [如何在 Inno Setup 的 InputDirPage 中显示/使用用户选择的应用程序路径 {app}？](https://stackoverflow.com/questions/4638306/how-to-show-use-the-user-selected-app-path-app-in-inputdirpage-in-inno-setup) 和 Inno Setup 文档，我来到了这段代码：

```
[Files]
Source: {code:GetDBPath}; DestDir: "{app}"; Flags: confirmoverwrite uninsneveruninstall;

[Code]
var
  SelectDBPage: TInputDirWizardPage;  
  DBPath: String;

procedure InitializeWizard;
begin
  SelectDBPage := CreateInputDirPage(wpSelectDir, 'Select file', 'Select file',    'Select file', False, '');
  SelectDBPage.Add('');
  SelectDBPage.Values[0] := ExpandConstant('{src}\DB.FDB');
  DBPath := SelectDBPage.Values[0];
end;

function GetDBPath():String;
begin
    Result := DBPath;
end; 
```

我的问题是检索文件路径。在指令“源：{code:GetDBPath}”中，我收到“未知文件名前缀 {code:”错误。如何在 [File] 部分引用选定的文件路径？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:46:09.637

您需要将`external`标志添加到`[Files]`条目中。这意味着源将在运行时进行评估，并且 CAN 包含`{code:...}`常量。

您也没有在`GetDBPath()`函数中获得正确的值。您返回的值`DBPath`在创建页面后未更新，而不是从`SelectDBPage.Values[0]`.

# vb.net - 如何找到多维数组的最小值和最大值？

> ID：14631599
> 
> 赞同：4
> 
> 时间：2013-01-31T17:26:04.710
> 
> 标签：vb.net, multidimensional-array

我想找到这个数组的最小值和最大值。在某些时候，它被设置为`(512, 512)`UShorts。对于这么多点，For 循环将非常耗时，并且正在寻找更清洁的东西。我想到了 SelectMany，但我不知道如何实现它。

```
Dim usResult As UShort(,) 
```

编辑：我试过

```
Dim minValue As UShort = UShort.MaxValue
Dim maxValue As UShort = UShort.MinValue
Dim sw As New Stopwatch()
sw.Start()
For i As Integer = 0 To 511 Step 1
    For j As Integer = 0 To 511 Step 1
        minValue = Math.Min(usResult(i, j), minValue)
        maxValue = Math.Max(usResult(i, j), maxValue)
    Next
Next
sw.Stop()
Console.WriteLine(sw.ElapsedMilliseconds)
' This takes 2 to 3 milliseconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:47:29.280

获取多维数组的最小值/最大值的最简单方法是执行以下操作：

```
Dim max As UShort = usResult.Cast(Of UShort).Max()
Dim min As UShort = usResult.Cast(Of UShort).Min() 
```

虽然它没有提供比 for 循环更好的性能。您需要使用专门的数据结构来保持元素排序或跟踪最小/最大元素，以获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:03:15.580

for 循环可能比您预期的要少得多。尝试对其计时，以查看使用嵌套循环找到最小和最大 100,000 次需要多长时间。

# visual-studio-2010 - CMake 错误“无法链接到标准数学库”

> ID：14631600
> 
> 赞同：1
> 
> 时间：2013-01-31T17:26:08.250
> 
> 标签：visual-studio-2010, linker, cmake

在尝试使用 CMake 配置我的 c++ 项目时，我遇到了以下错误消息：

> C 编译器标识未知 CXX 编译器标识未知 CMake 错误在 nestk/deps/eigen/CMakeLists.txt:71（消息）：无法链接到标准数学库。请向 Eigen 开发人员报告，告诉他们您的平台。配置不完整，出现错误！

有没有人提示如何解决这个问题？

任何帮助深表感谢。

我正在使用：Windows 7 x64、CMake 2.8.10.2、VS2010 Ultimate

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T21:57:40.207

This happens because

```
#include <cmath> 
```

does not compile on your machine. You will have to get this on your path to get around the standard math library error (I am working in ubuntu, but I had to install the gcc compiler). Try compiling and running this program:

```
#include<cmath>
#include<iostream>
int main() { std::cout << std::sin(0.0) << std::endl; std::cout << std::log(0.0f) << std::endl; } 
```

Once you can do that, then make sure to remove the build directory you were running cmake in and try to build again.

# c# - 使用 queryover 转换此 NHibernate 查询

> ID：14631603
> 
> 赞同：0
> 
> 时间：2013-01-31T17:26:17.343
> 
> 标签：c#, nhibernate

我有一些问题将这个 NHibernate 查询转换为左连接查询

```
var query = session.Query<T>.Join(
    Session.Query<RecordOrder>(),
    q=>q.MiniDbName,
    o=>o.DatabaseName,
    (q,o)=>new{Record = q, Order = o.OrderValue}) 
```

任何人都可以帮助我，我希望这个查询支持左连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:21:03.820

默认联接是内部联接。可以使用 .Inner、.Left、.Right 或 .Full 方法指定每个附加连接类型。例如，要在小猫上使用左外连接：

```
IQueryOver<Cat,Kitten> catQuery =
session.QueryOver<Cat>()
    .Left.JoinQueryOver(c => c.Kittens)
        .Where(k => k.Name == "Tiddles"); 
```

在你的情况下：

```
 var list =
    session.QueryOver<RecordOrder>()
    .Left.JoinQueryOver(c => c.Orders).ToList() 
```

# python - 安装 python-scitools 和 matplotlib 依赖项

> ID：14631606
> 
> 赞同：0
> 
> 时间：2013-01-31T17:26:28.677
> 
> 标签：python, matplotlib, installation, ubuntu-12.04

我正在尝试通过“sudo apt-get install python-scitools”安装 python-scitools。它给出以下输出

```
The following extra packages will be installed:
python-matplotlib
Suggested packages:
python-excelerator python-matplotlib-doc python-traits python-wxgtk2.8octave
The following NEW packages will be installed:
python-matplotlib python-scitools
0 upgraded, 2 newly installed, 0 to remove and 203 not upgraded.
Need to get 0 B/2,596 kB of archives.
After this operation, 9,250 kB of additional disk space will be used.
Do you want to continue [Y/n]? 
```

关键是我已经手动安装了 python-matplotlib（因为我需要最新版本 1.2.0）。

如果我提示'matplotlib. **path** ' 在 ipython 中，它返回

```
['/usr/local/lib/python2.7/dist-packages/matplotlib'] 
```

我的问题是，我怎样才能告诉系统，matplotlib 已安装？

正如你猜到的，我对这件事很业余。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:39:55.477

你有没有尝试过：

```
 sudo apt-get remove python-matplotlib 
```

要通过 apt-get 删除 matplotlib 安装？完成后，您需要确保您的系统可以找到您手动安装的 matplotlib，但我怀疑您在安装过程中已经这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:02:06.197

手动安装与通过包管理器安装并不能很好地结合在一起。*你总是可以在包之上*构建你想要的任何东西，但你不能（轻易地）走另一条路。

正在做的依赖检查`apt`是针对它的内部数据库的，它*正确地*认为`matplotlib`没有安装。这是一个特性，而不是错误，因为它允许打包系统非常快速地确定是否安装了依赖项。您可能可以自己构建`.deb`来安装，但这可能有点麻烦（因为它涉及到了解 debian 构建系统）。

您也许可以安装打包版本，只需确保您手动安装的版本高于`PYTHONPATH`系统版本。它浪费了一点硬盘空间，但是嗯。（您可以通过 设置安装路径的位置`setupy.py install --prefix=/path/to/where/ever`）。

`PYTHONPATH`是一个环境变量，因此您可以使用多种方法对其进行设置。

```
PYTHONPATH=/your/path:$PYTHONPATH ipython 
```

将为一个进程设置变量。您还可以添加

```
PYTHONPATH=/your/path:$PYTHONPATH
export PYTHONPATH 
```

到你的`.bashrc`（或者`.bash_profile`，我总是把这两个角色混在一起），每次你启动一个 shell 时都会运行它。

如果这不起作用，您可能需要使用打包版本`matplotlib`（这可能需要删除您当前的安装），或者手动安装您想要的一切，这取决于`matplotlib`.

# java - 在任何计算机中存储文件的相对路径 - Java

> ID：14631609
> 
> 赞同：0
> 
> 时间：2013-01-31T17:26:42.640
> 
> 标签：java, file

我已使用[此参考](https://stackoverflow.com/questions/2395737/java-relative-path-of-a-file-in-a-java-web-application)来读取我项目中的文件。但我需要同样存储我不知道该怎么做？请帮我。

为了读取文件，我从链接中获取了代码

```
InputStream csv = 
             SomeClassInTheSamePackage.class.getResourceAsStream("filename.csv"); 
```

像这样任何人都可以帮我写一个文件

目前我正在使用此代码：

```
 Writer output = null;
 output = new BufferedWriter(new FileWriter("./filename.csv")); 
```

但它在运行时抛出 FileNotFound Exception

问题在于定位文件路径。如果我给出绝对路径，它工作正常。但它需要在任何计算机上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:40:58.910

FileWriter 将根据需要创建文件。它不必已经存在。

出现此错误的唯一方法是当前工作目录不再存在或您无权在该目录中创建文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:41:32.413

检查您的权限：

```
Writer output = null;
if (new File("./filename.csv").canWrite()) {
   System.out.println("You have not permissions");
} else {
   output = new BufferedWriter(new FileWriter("./filename.csv"));
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:59:00.637

OK..使用以下代码获取文件路径：

```
String path = System.getProperty("user.dir");
FileWriter fw = new FileWriter(path+File.separator+"filename.csv"); 
```

**编辑**

这是一个`"pqr.txt"`在 package中创建文件的演示代码`myPackage`。鉴于我正在使用命令执行类文件，`java myPackage.AccessCheck`即来自 mypackage 上方的一个目录。

```
package myPackage;
import java.io.FileWriter;
import java.io.File;
public class AccessCheck
{
    protected void callme()
    {

        try
        {
            String name = System.getProperty("user.dir")+File.separator+AccessCheck.class.getPackage().getName()+File.separator+"pqr.txt";
            System.out.println(name);
            FileWriter fw = new FileWriter(name);
        }catch(Exception ex){ex.printStackTrace();}
    }
    public static void main(String st[])
    {
        AccessCheck asc = new AccessCheck();
        asc.callme();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:20:59.307

而不是调用`getResourceAsStream()`，调用`class.getResource()`或`classLoader.getResource()`。这些函数返回一个给出资源位置的 URL。如果资源是文件系统上的普通文件，则 URL 将是`file:`URL。

获得 URL 后，您可以将其转换为 a`URI`并将其传递给`File`采用 URI 的构造函数。然后您可以使用该`File`对象打开文件。

请注意，它`getResource()`可以返回`File`构造函数无法处理的 URL。例如，如果在 jar 文件中找到资源，则 URL 可能如下所示：

```
jar:file:/C:/path/to/JDK/lib/vm.jar!/java/lang/Object.class 
```

`File`构造函数不能处理这样的 URL 。这可能会或可能不会让您担心。

# java - Android ListView 选定状态和 setBackground

> ID：14631611
> 
> 赞同：2
> 
> 时间：2013-01-31T17:26:52.977
> 
> 标签：java, android, android-listview

是否可以在单击/选定的列表项（用于多屏/平板电脑）上设置背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:41:11.793

是的，使用 SetOnItemClickListener。

```
list  = (ListView)findViewById(R.id.listView1);

list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    //ListView parent, View v, int position, long id 
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        arg1.setBackgroundColor(Color.RED);
    }
}); 
```

# visual-studio - 查看 aspx - 钛文件？

> ID：14631615
> 
> 赞同：0
> 
> 时间：2013-01-31T17:27:19.963
> 
> 标签：visual-studio, titanium

我正在做一个钛合金项目。我想在 Visual Studio aspx 页面中创建此应用程序的一部分，并将 ajax 作为此页面的一部分。那么是否有可能将它包含在钛中以查看它并与之交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:14:31.027

是的。您可以使用 Web 视图查看网页。

[http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.WebView](http://docs.appcelerator.com/titanium/3.0/#!/api/Titanium.UI.WebView)

# sql - 如果基于另一列中的值求和

> ID：14631625
> 
> 赞同：8
> 
> 时间：2013-01-31T17:28:04.533
> 
> 标签：sql, sum

在下面的代码中，我希望`AdminDuration`and`BreakDuration`根据 value 的值求和`UserID`。目前我无法弄清楚，它将所有`Duration`s 的值与`ReasonCode`7 相加。结果每个`UserId`都有相同的`Duration`（不是我想要的！）。

```
Select SkillTargetID AS UserID,
(SELECT sum(Duration) 
   from [t_Agent_Event_Detail] 
   where ReasonCode = 7
   and DateTime > convert(DATETIME, '2013-01-31 08:00', 21)) as AdminDuration,
(SELECT sum(Duration) 
   from [t_Agent_Event_Detail] 
   where ReasonCode = 6
   and DateTime > convert(DATETIME, '2013-01-31 08:00', 21) 
   and SkillTargetID = [t_Agent_Event_Detail].SkillTargetID) as BreakDuration 
from [t_Agent_Event_Detail]
GROUP BY SkillTargetID 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T17:34:34.540

如果我理解正确的话，应该是：

```
SELECT SkillTargetID AS UserID,
       sum(CASE WHEN ReasonCode = 7 THEN Duration ELSE 0 END) as AdminDuration,
       sum(CASE WHEN ReasonCode = 6 THEN Duration ELSE 0 END) as BreakDuration
FROM [t_Agent_Event_Detail]
WHERE DateTime > convert(DATETIME, '2013-01-31 08:00', 21)
GROUP BY SkillTargetID 
```

# java - Jackson - 用根对象包装对象列表

> ID：14631635
> 
> 赞同：6
> 
> 时间：2013-01-31T17:28:59.243
> 
> 标签：java, jackson, object-object-mapping, mongo-jackson-mapper

我的控制器返回一个 MyObj 对象列表（使用@ResponseBody）

```
public MyObj 
{
   int a;
   int b;
} 
```

返回的 JSON 如下所示：

```
[{"a":1,"b":2},{"a":2,"b":2}] 
```

我想包装这个 JSON，所以它会返回如下内容：

```
{ "data": [{"a":1,"b":2},{"a":2,"b":2}]} 
```

根据我的阅读，我需要启用 SerializationConfig.Feature.WRAP_ROOT_VALUE 或（？）在我的控制器顶部使用 @JsonRootName("data") 。

还尝试了@XmlRootElement，似乎没有任何效果。知道用根名称包装对象列表的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-22T17:16:47.923

听起来您是在谈论放入`@JsonRootName`列表而不是对象，这不会完成您想要做的事情。

如果您想使用`@JsonRootName`，您需要像上面提到的那样启用`SerializationFeature.WRAP_ROOT_VALUE`并将注释添加到类中：

```
@JsonRootName("data")
public MyObj {
    int a;
    int b;
} 
```

这将包装对象本身，*而不是*列表：

```
{
    "listName": [
        {
            "data": {"a":1, "b":2}
        },
        {
            "data": {"a":2, "b":2}
        }
    ]
} 
```

如果您想将列表包装在一个对象中，也许创建一个通用对象包装器是最好的解决方案。这可以通过这样的类来完成：

```
public final class JsonObjectWrapper {
    private JsonObjectWrapper() {}

    public static <E> Map<String, E> withLabel(String label, E wrappedObject) {
        return Collections.singletonMap(label, wrappedObject);
    }
} 
```

然后，在您将您的列表连同回复一起发回之前，只需将其包装起来，`JsonObjectWrapper.withLabel("data", list)`其余的由杰克逊负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-12T22:12:15.273

这应该做的工作：

```
 List<MyObj> myList;

    ObjectWriter ow = mapper.writer()
            .with(SerializationFeature.WRAP_ROOT_VALUE)
            .withRootName("data");

    System.out.println(ow.writeValueAsString(myList)); 
```

# java - Android 中的 FTP 下载极慢（仅 Java 中的速度很快）

> ID：14631639
> 
> 赞同：3
> 
> 时间：2013-01-31T17:29:12.437
> 
> 标签：java, android, apache, apache-commons, ftp-client

我正在从 FTP 服务器下载 MP3 文件。它适用于将下载并播放 MP3 文件的 Android 应用程序。下载是使用 apache commons 库在 Java 中实现的，代码主要基于另一个教程。下载在我的运行 Java 的桌面上运行非常快，大约需要 5 秒来下载大约 10mb 的文件，但是在 Android 设备上运行的相同代码（我尝试过 2）上下载速度慢得离谱，需要 5-10 分钟同一个文件。（两项测试都是通过 Wifi 完成的）。

代码基于：[http ://androiddev.orkitra.com/?p=28&cpage=2#comment-40](http://androiddev.orkitra.com/?p=28&cpage=2#comment-40)

下面的代码显示了使用的两种方法：连接和下载。

```
 public boolean connect(String host, String username, String pass, int port){
    try{

        mFTPClient.connect(host, port);

        if(FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
                boolean loginStatus = mFTPClient.login(username,  pass);

                mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
                mFTPClient.enterLocalPassiveMode();
                mFTPClient.setKeepAlive(true);

                return loginStatus;
        }

    } catch (Exception e){
        System.err.println("Error: Could not connect to: " + host);
        e.printStackTrace();
    }

    return false;
}

    public boolean download(String srcFilePath, String dstFilePath) {
    boolean downloadStatus = false;
    try {
        FileOutputStream dstFileStream = new FileOutputStream(dstFilePath);
        downloadStatus = mFTPClient.retrieveFile(srcFilePath,   dstFileStream);
        dstFileStream.close();
        return downloadStatus;
    } catch (Exception e) {
        System.err.println("Error: Failed to download file from " + srcFilePath + " to " + dstFilePath);
    }
    return downloadStatus;
} 
```

希望我已经提到了所有需要的细节，如果有人能解释为什么它这么慢，以及如果我能在合理的时间内下载它，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T19:06:24.493

偶然发现类似的问题，通过更改下载缓冲区大小解决了它。

奇怪的是相同的代码在 Android 模拟器 x86 上非常快，但在真实设备上却慢得令人痛苦。

因此，在调用下载函数**retrieveFile**之前 添加如下一行：

```
mFTPClient.setBufferSize(1024*1024); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T18:44:52.560

因此，在调用下载函数之前`retrieveFile`添加如下一行：

```
mFTPClient.setBufferSize(1024*1024); 
```

这是正确的解决方案。我的应用在 20 分钟内下载 10 个文件很慢。使用此修改缓冲区需要 1 分钟。和蔼可亲。非常感谢你。

# java - osmdroid-packager 找不到或加载主类

> ID：14631643
> 
> 赞同：0
> 
> 时间：2013-01-31T17:29:27.903
> 
> 标签：java, android, osmdroid

这主要是一个 java 问题，很可能是我忽略的问题。

我一直在尝试使用 osmdroid-packager ( [http://code.google.com/p/osmdroid/wiki/HowToUsePackager](http://code.google.com/p/osmdroid/wiki/HowToUsePackager) ) 在 Ubuntu Linux 上为我的 android 应用程序打包地图图块。我一直按照上面网站上的说明进行操作，但遇到了一些问题。

我在当前目录中有 osmdroid-android-3.0.8.jar、osmdroid-packager-3.0.8.jar 和 slf4j-android-1.6.1-RCq.jar。我已经设置了类路径，并尝试使用下面的命令运行给我错误

> '无法找到或加载主类 org.osmdroid.mtp.OSMMapTilePackager'

我还尝试了设置类路径的不同变体（设置类路径、CLASSPATH、到罐子、到当前目录，使用-classpath），结果相同。我能想到的最好的办法是这个类不在罐子里。

我从上面的网站尝试的命令是：

```
set classpath='osmdroid-android-3.0.8.jar;osmdroid-packager-3.0.8.jar;slf4j-android-1.6.1-RC1.jar;sqlitejdbc-v056.jar'

java org.osmdroid.mtp.OSMMapTilePackager -u http://tile.openstreetmap.org/%d/%d/%d.png -t Mapnik -d haarlem.zip -zmax 18 -n 52.4244 -s 52.3388 -e 4.6746 -w 4.594

java -cp . org.osmdroid.mtp.OSMMapTilePackager 
```

也给出了同样的错误。

我还没有下载 sqlitejdbc 的副本，但我很确定这不是问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T18:25:46.067

使用 osmdroid-packager 的 3.0.3 版本，例如 osmdroid-packager

对此提示命令使用相同版本的库

set classpath=osmdroid-android-3.0.3.jar;osmdroid-packager-3.0.3.jar;slf4j-android-1.5.8.jar;sqlitejdbc-v056.jar java org.andnav2.osm.mtp.OSMMapTilePackager -u [http://tile.openstreetmap.org/%d/%d/%d.png](http://tile.openstreetmap.org/%d/%d/%d.png) -t Mapnik -d haarlem.zip -zmax 18 -n 52.4244 -s 52.3388 -e 4.6746 -w 4.5949

# objective-c - 解析 JSON 后从 NSMutableArray 中删除对象

> ID：14631645
> 
> 赞同：0
> 
> 时间：2013-01-31T17:29:29.550
> 
> 标签：objective-c, arrays, json, parsing, nsmutablearray

**使用 jsonviewer.stack.hu 格式化的 JSON 源代码：**

![Json 格式化程序](../Images/d2d40b23a97b7b8736ec479c0e86e81a.png)

**我的解析方法（简化）：**

```
- (void)parseMethod {

    // OTHER STUFF

    arrayList = [[NSMutableArray alloc] init];    

    NSURL *url2 = // THE URL SOURCE OF JSON OBJECT, ON A REMOTE SERVER

    NSURLRequest *request2 = [NSURLRequest requestWithURL:url2 cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:5.0];

    AFJSONRequestOperation *operation2 = [AFJSONRequestOperation
                                         JSONRequestOperationWithRequest:request2
                                         success:^(NSURLRequest *request2, NSHTTPURLResponse *response2, id JSON)
                                         {
                                             arrayList = [JSON objectForKey:@"list"];

                                             // HERE I TRIED TO WRITE [arrayListPrev removeObjectAtIndex:0];

                                             NSMutableArray *arrayList1 = [arrayList valueForKey:@"list1"];
                                         }
                                         failure:^(NSURLRequest *request2, NSHTTPURLResponse *response2, NSError *error2, id JSON2) { 
                                         }];
    [operation2 start];

} 
```

**问题：** 解析后我想删除名为“list”的数组的第一个对象，因为我必须用数组中 list1 的所有值填充 UITableView 的行，除了第一个（列表数组->数组编号 0- >list1 值为 0 )。我已经尝试过代码：

```
[arrayList removeObjectAtIndex:0]; 
```

在几个位置，但应用程序因错误而崩溃：**'-[__NSCFArray removeObjectAtIndex:]: mutating method sent to immutable object'** ... 那么在解析后从 NSMutableArray *list 中删除第一个对象（数组编号 0）的最佳方法是什么，要 ELIMINATE 0 对象的 list1 值吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:40:06.800

尽管你写`arrayList = [[NSMutableArray alloc] init];`

在这里，我猜，您分配简单的不可变数组实例

`arrayList = [JSON objectForKey:@"list"];`

你可以这样做：

```
arrayList = [[JSON objectForKey:@"list"] mutableCopy];
[arrayList removeObjectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:35:45.057

问题是您使用的是 an`NSArray`而不是`NSMutableArray`. 这可能是由于您的解析器返回不可变对象的事实。你需要做的是拿那个`NSArray`，用它创建一个`NSMutableArray`，然后删除第一个对象

```
NSMutableArray *_arrayList = [NSMutableArray arrayWithArray:arrayList];
[_arrayList removeObjectAtIndex:0];
// dont forget to store your array wherever you need it 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T17:35:52.477

错误表明您的数组具有不可变类型的值。使用可变副本或使用方法初始化您的 arrayList `-arrayWithArray:`。希望它能解决问题。

注意：分配`NSMutableArray`用`initWithCapacity`方法初始化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:42:43.083

正如其他人所建议的那样，您正在使用一个 NSArray，它不是可变的（可编辑的）。我将使用新功能添加我的输入：

```
NSMutableArray *mutableArrayList = [arrayList mutableCopy]; 
```

这将创建数组的可变副本。

# machine-learning - weka 是否在交叉验证中平衡跨类的训练/测试集？

> ID：14631646
> 
> 赞同：0
> 
> 时间：2013-01-31T17:29:40.620
> 
> 标签：machine-learning, weka, cross-validation

当我对 m 个类执行 n 折交叉验证时，在每一折中，训练集和测试集是否平衡？通过平衡，我的意思是询问训练和测试集中每个班级是否（几乎）有相同的样本集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:41:21.277

如果我正确理解这部分：

> 我的意思是问训练和测试集中每个班级是否有（几乎）相同的样本集。

...我认为您指的是*分层*交叉验证：每个折叠的类比例与整个数据集的类比例相同。

是的，在 Weka 中当然可以，但您可能需要查阅文档。这些可能有帮助吗？

[http://weka.wikispaces.com/Primer](http://weka.wikispaces.com/Primer)

[http://weka.wikispaces.com/Generating+cross-validation+folds+(Java+approach)](http://weka.wikispaces.com/Generating+cross-validation+folds+(Java+approach))

[http://weka.sourceforge.net/doc/weka/filters/supervised/instance/StratifiedRemoveFolds.html](http://weka.sourceforge.net/doc/weka/filters/supervised/instance/StratifiedRemoveFolds.html)

# elasticsearch - Elasticsearch 方面的性能

> ID：14631647
> 
> 赞同：2
> 
> 时间：2013-01-31T17:29:46.583
> 
> 标签：elasticsearch, facets

我有一个奇怪的情况：在我的多面查询中，其中一个方面导致查询的执行速度比任何其他方面都要慢得多。一般来说，如果存在这个特定方面，无论有多少其他方面，查询都会慢约 5 倍。用于计算方面的所有字段的映射完全相同。

有没有人有任何想法可能导致这种行为？

慢速方面（取回数据大约需要 1400 毫秒）：

```
{
  "facets": {
   "postal_code": {
    "terms": {
      "field": "postal_code_untouched"
  }
}
  },
    "query": {
      "match_all": {}
  }
} 
```

快速方面（大约需要 300 毫秒才能得到结果）：

```
{
  "facets": {
   "category": {
    "terms": {
      "field": "category_description_untouched"
  }
}
  },
    "query": {
      "match_all": {}
  }
} 
```

映射：

```
category_description_untouched: {
  type: string
  analyzer: keyword_lowercase
  include_in_all: false
}

postal_code_untouched: {
  type: string
  analyzer: keyword_lowercase
  include_in_all: false
} 
```

类别描述只是自由文本；邮政编码是英国邮政编码，因此类似于“GU51 4BE”。索引中的文档总数为 4,156,339。

# c++ - 创建任意大小的多维向量

> ID：14631657
> 
> 赞同：1
> 
> 时间：2013-01-31T17:30:27.853
> 
> 标签：c++, multidimensional-array

我正在尝试使用多维向量创建多维直方图，但我不知道提前的维度大小。关于如何在 C++ 中执行此操作的任何想法？

穆斯塔法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:34:13.503

编写自己的类。对于初学者，您可能需要以下内容：

```
class MultiDimVector
{
    std::vector<int> myDims;
    std::vector<double> myData;
public:
    MultiDimVector( std::vector<int> dims )
        : myDims( dims )
        , myData( std::accumulate( 
            dims.begin(), dims.end(), 1.0, std::multiplies<int>() )
    {
    }
}; 
```

对于索引，您必须将 a`std::vector<int>`作为索引，并自己计算。基本上是这样的：

```
int MultiDimVector::calculateIndex(
    std::vector<int> const& indexes ) const
{
    int results = 0;
    assert( indexes.size() == myDims.size() );
    for ( int i = 0; i != indexes.size(); ++ i ) {
        assert( indexes[i] < myDims[i] );
        results = myDims[i] * results + indexes[i];
    }
    return results;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:34:27.650

您可以使用[std::vector](http://www.cplusplus.com/reference/vector/vector/)，例如：

```
std::vector<std::vector<yourType> > 
```

（或者如果你使用一个框架，你可以搜索它的文档以获得更好的集成数组替换；））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-10T21:04:40.837

```
vector<vector<int>> mutli_dim_vector_name(num_rows, (vector<int>(num_cols, default_value))); 
```

// 您可以使用此格式进一步嵌套到您想要的尺寸。

# wpf - 不清楚如何实现依赖注入

> ID：14631660
> 
> 赞同：2
> 
> 时间：2013-01-31T17:30:34.290
> 
> 标签：wpf, design-patterns, mvvm, dependency-injection

假设我有一个 LoginView，它的数据上下文 LoginViewModel 需要注入一个可以根据用户名/密码对用户进行身份验证的服务。

现在假设应用程序的状态是有人已经登录，但现在他们正在注销，我需要为下一个用户重新显示登录屏幕。所以此时我需要一个我的 LoginViewModel 的实例，但我不确定如何获取它。

我是否应该将 LoginViewModel 注入我的 ShellViewModel 并持有并重用它？这看起来很奇怪，因为我为什么要在不使用它的时候将它保存在内存中（当然，在这种情况下没什么大不了的，但可能适用于其他情况）。

我是否应该将身份验证服务注入 ShellViewModel 以在需要创建 LoginViewModel 时保留？这看起来很奇怪，因为我的 ShellViewModel 不需要对这个服务做任何事情，如果这是答案，那么我会为它显示的所有其他 ViewModel 注入各种东西到我的 ShellViewModel 中。

而且我知道我不应该在我的应用程序根以外的任何地方引用我的 DI 容器，否则我将实施服务定位器模式。

诚然，我现在感觉很愚蠢，当我听到答案时，我敢肯定我会扇自己耳光……那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:34:34.057

在过去几个小时里除了查看关于这个主题的各种博客、问题和答案之外什么都没做，我开始得出结论，像 Asp.net MVC 这样的框架可以实现一个纯粹主义者（也就是像 Mark Seemann 这样的人） ) 方法相当可行。

这样的框架倾向于使这成为可能，因为框架本身利用了（喘气！！！）服务定位器模式。不幸的是，在像 WPF 这样的平台上使用 MVVM 设计并不那么容易，因为在内置服务定位器的帮助下，您的视图并不总是从根目录提供服务。

但是，我确实有一个 ShellViewModel 负责显示我需要的大部分视图，所以我认为这里最实用的答案是让我将 ShellViewModel 视为组合根的一部分，并将我对 DI 容器的依赖扩展到它.

不过，除了我的 ShellViewModel 之外，我相信 500 的答案是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:41:16.290

在这样的场景中，我通常会在您的情况下注入与 LoginViewModel 工厂相对应的内容。这样，您的逻辑可以根据需要制造一个新的（或可能由工厂缓存的）实例。

# javascript - 打印时将元素设置为内联显示，该元素设置为无

> ID：14631662
> 
> 赞同：1
> 
> 时间：2013-01-31T17:30:39.387
> 
> 标签：javascript, css, dom

我有一个表格，最初在列中隐藏了一些（历史）数据。当我打印表格时，会打印隐藏的数据。这很好。当我单击`show-history`历史列中的链接时，表格会展开并显示隐藏的数据。如果我然后打印这个视图，我会得到隐藏的数据。这也是需要的。但是，当我单击`hide-history`链接然后打印时，我没有得到隐藏的数据。不是很好！

这是我的 showHide javascript

```
function showHide(shID) {
if (document.getElementById(shID)) {
  if (document.getElementById(shID+'-show').style.display != 'none') {
     document.getElementById(shID+'-show').style.display = 'none';
     document.getElementById(shID).style.display = 'block';
  }
  else {
     document.getElementById(shID+'-show').style.display = 'inline';
     document.getElementById(shID).style.display = 'none';
  }
}
} 
```

在我的jsp中：

```
 <a href="#" id="cID${comment.comment_id}-show" class="showLink" onclick="showHide('cID${comment.comment_id}');return false;">show history</a>

<TBODY id="cID${comment.comment_id}" class="more">
 .... hidden content
 <a href="#" id="cID${comment.comment_id}-hide" class="hideLink" onclick="showHide('cID${comment.comment_id}');return false;">hide history</a>
 </TBODY> 
```

样式屏幕.css

```
.more {
  display: none;
} 
```

StylePrint.css（尝试设置 TBODY 样式的此尝试和其他尝试均无效）

```
.more {
  display: block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:43:14.130

您的 JavaScript 将以内*联方式*设置（隐藏/显示）元素的样式。拥有两个带有`media="screen"`and的 css 文件`media="print"`将不起作用。

您需要（在“屏幕”CSS 中）：

```
.more {
    display: none;
}

.more.show {
    display: block;
} 
```

...并使用 JS，改为更改元素的类（添加/删除“显示”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:26:10.750

由于您将`.more`'s inline-style 更改为`display:none`然后该样式胜过`StylePrint.css`. 这意味着，您不能使用`StylePrint.css`.

修理：

`.more`尝试从with中删除内联样式`document.getElementById(shID).style.display = '';`。

这应该默认`.more`返回状态，并允许您在打印模式下`hidden`覆盖隐藏状态。`StylePrint.css`

# javascript - 比较 2 个数组的相似性并在控制台中显示差异

> ID：14631672
> 
> 赞同：0
> 
> 时间：2013-01-31T17:31:10.717
> 
> 标签：javascript, arrays, nested-loops

```
$(function(){

var x = new Array("a", "b", "c", "d", "e");
var y = new Array("a", "b", "3", "d", "e");
var str = "";

for (var i = 0; i < x.length; i++) {
    for (var j = 0; j < y.length; j++) {
        if (x[i] == y[j]) {
            break;
        } else {
            //Check if reach the last element in the array 2
            //If yes, then display that element in array 1 b/c not in array 2

              if (y[j] == y.length - 1) {
                str += x[i];
            }
        }
    }
}

console.log(x[i]);

}); 
```

x[i] 返回 undefined ，它实际上应该显示在两个比较数组中都没有找到的不同值。我如何从 x[i] 中获取值？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:39:48.983

更改`if (y[j] == y.length - 1)`为，`if (j == y.length - 1)`以便您检查当前迭代器位置而不是 y 数组值。

并更改`console.log(x[i]);`为`console.log(str);`以便输出`str`您在循环中设置的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:39:41.470

我认为显示差异的变量`str`不是`x`. `x`woudl 仍然保留您最初定义的数组，因为它没有被更改。 `x[i]`正在返回未定义，因为`i`未在循环外定义。

# java - 在 JSP 中循环映射失败

> ID：14631673
> 
> 赞同：0
> 
> 时间：2013-01-31T17:31:14.743
> 
> 标签：java, jsp, map, iteration, aem

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

我遵循此解决方案无效：[https ://stackoverflow.com/a/1835742/666468](https://stackoverflow.com/a/1835742/666468)

我正在尝试输出此地图：

```
//protected Map<String,String> getImageTagAttributes()
Image image = new Image(resource);
for (Map<String, String> foo : image.getImageTagAttributes()) {
        String key = foo.getKey();
        String value = foo.getValue();

        //output here
    } 
```

但是我收到了这个错误：**Can only iterate over an array or an instance of java.lang.Iterable**

我也导入了*java.util.Iterator*，但没有运气。

ps 我希望我可以安装和使用 JSTL，但这不是我的决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:43:02.873

不知道你从哪里得到的那`Image`门课，但如果`image.getImageTagAttributes()`返回，`Map<String, String>`那么也许试试这种方式

```
Image image = new Image(resource);
Map<String, String> map = image.getImageTagAttributes();
for (Map.Entry<String,String> foo : map.entrySet()) {
    String key = foo.getKey();
    String value = foo.getValue();

    //output here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:36:06.143

您不能为每个循环迭代 Map。

获取地图对象键集，然后对其进行迭代。

然后在 for 循环中尝试从映射中检索每个键的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:36:22.697

因为这不是迭代 Map 的正确方法：

```
 Image image = new Image(resource);
    Map<String, String> foo =  image.getImageTagAttributes();
    Set<String> key = foo.keyset(); 
     for ( k : keys ) {
           String value = foo.get(k);
        //output here
    } 
```

或者你可以这样交互：

```
 Image image = new Image(resource);
    Map<String, String> foo =  image.getImageTagAttributes();
    Set<Map.Entry<String,String>> entries = foo.entrySet();

    for(Map.Entry<String, String> e : entries){
       String key  = e.getKey();
       String value = e.getValue();
        //output
    } 
```

在我的回答中，我想这会`image.getImageTagAttributes();`返回一个`Map<String,String>`

# android - 将画布添加到 LinearLayout

> ID：14631679
> 
> 赞同：0
> 
> 时间：2013-01-31T17:31:25.710
> 
> 标签：android, canvas, android-linearlayout, compass-geolocation

我正在编写一个指南针 android 应用程序现在我面临一个问题，我想在主 XML 文件中添加一个画布，并带有一个后退按钮，我设计用于让用户返回菜单

我`addview()`尝试将画布指南针添加到 main.xml 但仍然出错，错误是“mainLayout.addView(compassView);”上的 NULLPOINTEREXCEPTION 在 MAIN.JAVA 代码处

这是我的代码

**主.java**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    compassView = new MyCompassView(this);
    setContentView(compassView);
    LinearLayout mainLayout = (LinearLayout)findViewById(R.id.compasslayout);
    LayoutParams imageViewLayoutParams = new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    compassView.setLayoutParams(imageViewLayoutParams);

    mainLayout.addView(compassView); 
```

**我的CompassView.java**

```
public class MyCompassView extends View {

  private Paint paint;
  private float position = 0;

  public MyCompassView(Context context) {
      super(context);

      init();
  }

  private void init() {
      paint = new Paint();
      paint.setAntiAlias(true);
      paint.setTextSize(25);
      paint.setStyle(Paint.Style.STROKE);    
      paint.setColor(Color.BLACK);
      paint.setStrokeMiter(position);
  } 
```

**文件**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".Compass" >

  <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:paddingLeft="10dp"
      android:paddingTop="10dp"
      android:id="@+id/compasslayout">

      <Button
         android:id="@+id/buttona"
         android:layout_width="200dp"
         android:layout_height="50dp"
         android:background="@drawable/b_select" />

     </LinearLayout>

  <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:paddingLeft="10dp"
      android:paddingTop="10dp">

    </LinearLayout>
</LinearLayout> 
```

请帮助我，我已经坚持了一天，如果没有完成这项任务我就无法继续

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:36:29.137

问题在这里：

```
compassView = new MyCompassView(this);
setContentView(compassView);
LinearLayout mainLayout = (LinearLayout)findViewById(R.id.compasslayout); 
```

您正在设置一个新`MyCompassView`的内容视图而不是您的 XML 文件。这意味着当你调用 时，找不到`findViewById()`id 的 View 。`R.id.compasslayout`你的电话`setContentView()`应该是`setContentView(R.layout.mylayout)`。

# python - 为什么 is_(a,b) 函数在 python 2.7.3 中比 eq(a,b) 工作得更快？

> ID：14631681
> 
> 赞同：3
> 
> 时间：2013-01-31T17:31:30.813
> 
> 标签：python, python-2.7

我搜索答案为什么`a is None`比`a == None`. 我使用以下代码测量时间：

```
>>> timeit.timeit("1 is None", number=10000000)
0.4035069934390217
>>> timeit.timeit("1 == None", number=10000000)
0.8190256083633187 
```

[该文档](http://docs.python.org/2/library/operator.html)说，`a is b`具有功能等价`is_(a, b)`和`a == b`具有功能等价`eq(a, b)`。那么，为什么`is_`函数比`eq`?

我读过一些`is_()`只比较对象标识符`eq()`并进行“深度比较”的文章。但我在文档中找不到此信息。这些信息是否正确？我可以在哪里阅读更多相关信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T17:39:26.930

身份测试 ( `is`) 就像简单的指针比较（两个值是否是同一个对象）。

测试平等需要做的工作不止于此；例如，对于列表，它确实需要测试两个列表中每个元素的相等性，直到某些东西对相等性测试为阴性或最短列表中的所有元素都经过测试。

请注意，这两个运算符的测试内容*完全*不同：

```
>>> lsta = []
>>> lstb = lsta
>>> lsta is listb
True
>>> lstc = []
>>> lsta is listc
False
>>> lsta == listc
True 
```

仅仅因为两个对象相等并不意味着它们是同一个对象；`is`测试后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:52:00.947

以下是实现比较的 Python 源代码（`is`、`==`、`<=`等）：

[Python/ceval.c:4501](http://hg.python.org/cpython/file/e6cc582cafce/Python/ceval.c#l4501)

```
static PyObject *
cmp_outcome(int op, register PyObject *v, register PyObject *w)
{
    int res = 0;
    switch (op) {
    case PyCmp_IS:
        res = (v == w);
        break;
    ...
    default:
        return PyObject_RichCompare(v, w, op); 
```

`is`仅在一行代码中实现，一个简单的 C 指针比较。根据这个，一些 Python 原语比较相等（因为实习，或者因为它们是单例，如`True`,`False`和`None`）。

另一方面，`eq`使用`PyObject_RichCompare`辅助函数实现的uses [`do_richcompare`](http://hg.python.org/cpython/file/e6cc582cafce/Objects/object.c#l539)：

```
richcmpfunc f;
PyObject *res;
int checked_reverse_op = 0;

if (v->ob_type != w->ob_type &&
    PyType_IsSubtype(w->ob_type, v->ob_type) &&
    (f = w->ob_type->tp_richcompare) != NULL) {
    checked_reverse_op = 1;
    res = (*f)(w, v, _Py_SwappedOp[op]);
    if (res != Py_NotImplemented)
        return res;
    Py_DECREF(res);
}
if ((f = v->ob_type->tp_richcompare) != NULL) {
    res = (*f)(v, w, op);
    if (res != Py_NotImplemented)
        return res;
    Py_DECREF(res);
}
if (!checked_reverse_op && (f = w->ob_type->tp_richcompare) != NULL) {
    res = (*f)(w, v, _Py_SwappedOp[op]);
    if (res != Py_NotImplemented)
        return res;
    Py_DECREF(res);
} 
```

`__eq__`这会检查参数类型，并可能在确定答案之前尝试多个比较函数（方法）。比较方法可能会做无限的工作（例如`list.__eq__`，必须检查列表的每个元素，可能是递归的），但即使在简单的情况下`x == None`，类型检查和所有额外的工作都会比`is`.

# android - 创建和使用用户不可见的片段视图

> ID：14631682
> 
> 赞同：7
> 
> 时间：2013-01-31T17:31:33.090
> 
> 标签：android, android-fragments, android-view

**原因**

我需要这样做，因为我想获取片段视图的可绘制缓存，然后从该视图创建一个位图。该位图随后将用于在 Facebook 上发布。

**问题**

当我创建我的片段时，没有创建视图，因为它们没有通过片段事务添加，并且因为它们包含的视图对用户不可见。

我也不想手动绘制这些视图，因为我不会得到屏幕的精确副本。

**我的问题**

有没有办法让 Fragment 具有完整的功能（与通过 FragmentTransaction 添加它的功能相同）而不实际显示 Fragment？

当片段不可见时，我需要能够访问片段的视图。

**提前致谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T23:42:08.503

Another question addresses how to [render activities into offscreen buffers](https://stackoverflow.com/questions/5604125/android-taking-screenshot-of-offscreen-page). You can use this technique to render a fragment into an offscreen buffer.

The technique involves:

*   launching the new activity with startActivityForResult() instead of startActivity()
*   setup a drawing cache
*   use getDrawingBitmap() once layout is finished

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:58:36.797

Is there any way you can just add your Fragments to a hidden layout? Example XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/GoneFragmentContainer"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical"
  android:visibility="gone" /> 
```

Then in your code:

```
MyFragment myFragment = new MyFragment();
getSupportFragmentManager().beginTransaction()
  .add(R.id.GoneFragmentContainer, myFragment)
  .commit();
myFragment.getView().callMethodsOnMyNonVisibleFragment(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T19:01:42.073

[我在这里](https://stackoverflow.com/a/11061913/642680)给出的答案是否也适用于您的情况？基本上它使用不同的 FragmentTransaction 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:10:46.143

我会尽量避免`Bitmap`从 a中`View`获取，而是以其他方式获取它。然后，您可以在片段的`onAttach()`方法中进行所需的任何处理，当您在其父活动中实例化片段时会调用该方法，并且它会在它可见之前执行此操作。

# c++ - 没有纯虚函数的 C++ 抽象类？

> ID：14631685
> 
> 赞同：28
> 
> 时间：2013-01-31T17:32:00.560
> 
> 标签：c++, polymorphism, abstract-class, pure-virtual

我有一个基类

```
class ShapeF
{
public:
    ShapeF();
    virtual ~ShapeF();

    inline void SetPosition(const Vector2& inPosition) { mPosition.Set(inPosition); }

protected:
    Vector2 mPosition;
} 
```

显然有一些省略的代码，但你明白了。我将其用作模板，并带有一些有趣的（省略的）枚举，这是一种确定我正在使用的形状的方法

```
class RotatedRectangleF : public ShapeF
{
public:
    RotatedRectangleF();
    virtual ~RotatedRectangleF();
protected:
    float mWidth;
    float mHeight;
    float mRotation;
} 
```

ShapeF 通过定位和定义类型的枚举来完成其工作。它有访问器和修改器，但没有方法。

我可以让 ShapeF 成为一个抽象类，以确保没有人尝试实例化 ShapeF 类型的对象吗？

通常，这可以通过在 ShapeF 中使用纯虚函数来实现

```
//ShapeF.h
virtual void Collides(const ShapeF& inShape) = 0; 
```

但是，我目前正在处理一个单独的类中的碰撞。我可以把所有东西都移过来，但我想知道是否有办法让一个类抽象......没有纯虚函数。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-31T17:33:18.393

您可以声明*并实现*一个纯虚拟析构函数：

```
class ShapeF
{
public:
    virtual ~ShapeF() = 0;
    ...
};

ShapeF::~ShapeF() {} 
```

这是您已经拥有的一小步，并且会阻止`ShapeF`直接实例化。派生类不需要更改。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-31T17:36:12.807

尝试使用受保护的构造函数

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-11-20T18:42:22.657

如果您的编译器是 Visual C++，那么还有一个“抽象”关键字：

```
class MyClass abstract
{
    // whatever...
}; 
```

虽然 AFAIK 它不会在其他编译器上编译，但它是 Microsoft 自定义关键字之一。

# javascript - 关于 Date.now 的一些解释

> ID：14631687
> 
> 赞同：0
> 
> 时间：2013-01-31T17:32:02.257
> 
> 标签：javascript, date

有人可以向我解释这个返回号码是什么意思吗？以及它是如何得出的？

```
console.log(Date.now() - 24 * 60 * 60 * 1000); 
```

如果我想使用上面的公式来显示接下来的 15 分钟而不是 24 小时？我将如何改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:33:37.847

[`Date.now()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)返回：

> 自 1970 年 1 月 1 日 00:00:00 UTC 以来经过的毫秒数。

`24 * 60 * 60 * 1000`以毫秒为单位表示 24 小时^*。因此，您基本上会从现在开始获得过去 24 小时的时间戳。请注意，由于 DST，这不一定会计算过去一天的时间戳。过去是 24 小时。

此外，为了获得一些有意义的输出，您应该将结果数字包装在`Date`：

```
console.log(new Date(Date.now() - 24 * 60 * 60 * 1000)); 
```

finally在算术表达式中使用时`Date.now()`可以替换为。`new Date()`

^(* - 24（小时）乘以 60（分钟）乘以 60（秒）乘以 1000 毫秒（秒）)。

# c++ - 我想与 POCO HTTP 服务器建立持久的 TCP 连接

> ID：14631697
> 
> 赞同：4
> 
> 时间：2013-01-31T17:32:35.277
> 
> 标签：c++, connection, poco, persistent, httpserver

我正在使用 POCO C++ lib 1.4.3 版来实现 HTTP 服务器。在我的用例中，只有两个或三个客户端，我希望有持久连接。客户端使用 put 请求发送数据，服务器使用“HTTP/1.1 201 Created”回答。客户端打开多个连接。其中一个客户端可以同时打开 20 个连接。

我使用 HTTPServerParams 和 Poco::Net::ServerSocket (myPort) 中的默认值，并且我使用的是 Poco::ThreadPool (16,48)。

客户端发送一个 http put 请求，服务器回答：

```
Server:
HTTP/1.1 201 Created
Connection: Close
Date: Thu, 31 Jan 2013 15:21:50 GMT 
```

我在 WireShark 的 PCAP 文件中看到了这个结果。

如果我不希望服务器在 put 请求后关闭连接，我该怎么办？

--- 编辑和插入源代码：

```
HTTPServer::HTTPServer(uint16_t port, 
                       Poco::Net::HTTPRequestHandlerFactory* handlerFactory):
m_port(port),
m_wasStarted(false)
{
    // HTTPServer takes ownership
Poco::Net::HTTPServerParams*   options = new Poco::Net::HTTPServerParams; 

try
{
    m_threadPool.reset(new Poco::ThreadPool (16,48));

    std::cout << "HTTPServerParams.keepAlive: " 
                  << options->getKeepAlive() << std::endl;

    std::cout << "HTTPServerParams.keepAliveTimeout: " 
                  << options->getKeepAliveTimeout().totalSeconds() << std::endl;

    std::cout << "HTTPServerParams.MaxKeepAliveRequests: " 
                  << options->getMaxKeepAliveRequests()<< std::endl;

    std::cout << "HTTPServerParams.Timeout: " 
                  << options->getTimeout().totalSeconds() << std::endl;

    m_server.reset(new Poco::Net::HTTPServer(handlerFactory,  
                                                 *m_threadPool,
                                                 Poco::Net::ServerSocket(m_port),
                                                                         options)
                                                );
}
catch (const Poco::Exception& e)
{
       //some code ...
}
} 
```

HTTPServer 类的私有成员：

```
 uint16_t                                m_port;
 bool                                    m_wasStarted;
 std::auto_ptr<Poco::ThreadPool>         m_threadPool;
 std::auto_ptr<Poco::Net::HTTPServer>    m_server; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:38:28.463

您是否尝试过对[类](http://pocoproject.org/docs/Poco.Net.HTTPServerParams.html)`setKeepAlive(true);`的实例使用成员函数调用？[`HTTPServerParams`](http://pocoproject.org/docs/Poco.Net.HTTPServerParams.html)

顺便看看`setKeepAliveTimeout()`同一个类的成员函数。

# 更新

我发现了一些有趣的事情：如果该`sendBuffer()`函数用于发送响应，那么响应包含`Connection: Keep-Alive`值；但是当使用该`send()`函数时，响应包含该`Connection: Close`值。

所以，有趣的实现细节在这里：[poco/Net/src/HTTPServerResponseImpl.cpp](https://github.com/pocoproject/poco/blob/develop/Net/src/HTTPServerResponseImpl.cpp)。请参阅实现`send()`和`sendBuffer()`成员函数。

# python - 如何限制对 djangopypi2 的读取访问？

> ID：14631708
> 
> 赞同：0
> 
> 时间：2013-01-31T17:33:15.447
> 
> 标签：python, django, pip, pypi, cheeseshop

我需要设置一个私有 PyPI 存储库。我意识到它们有很多可供选择，在四处浏览之后，我选择了[djangopypi2](http://djangopypi2.readthedocs.org/) ，因为我发现它们的安装说明最清晰并且项目处于活动状态。

我以前从未使用过 Django，所以这个问题可能真的是一个 Django 问题。我按照说明使用以下命令启动了应用程序：

```
$ gunicorn_django djangopypi2.website.settings 
```

该存储库正在按我的意愿工作。配置“~/.pypirc”后，我可以使用以下方式上传包：

```
$ python setup.py sdist upload -r local 
```

在使用 'extra-index-url' 配置 '~/.pip/pip.conf' 后，我可以使用以下方法安装软件包：

```
$ pip install <package-name> 
```

但是，任何人都可以浏览和下载我的包。似乎仅在上传包时才需要身份验证。我尝试使用此示例要求登录所有页面： [Best way to make Django's login_required the default](https://stackoverflow.com/questions/2164069/best-way-to-make-djangos-login-required-the-default/2164224#2164224)

并设置：

```
LOGIN_REQUIRED_URLS = (
    r'/(.*)$',
)

LOGIN_REQUIRED_URLS_EXCEPTIONS = (
    r'/users/login(.*)$', 
    r'/users/logout(.*)$',
) 
```

现在 webgui 需要在所有页面上登录，因此该部分按预期工作，但我无法再从命令行使用 pip 和上传实用程序。

我尝试使用'pip.conf'中的extra-index-url设置'pip install xxx'，如下所示：

```
extra-index-url = http://username:password@127.0.0.1:8000/simple/ 
```

但它说“根本找不到 xxx 的发行版”

'python setup.py sdist upload' 给出：

```
Submitting dist/xxx-0.0.1.tar.gz to http://127.0.0.1:8000/
Upload failed (302): FOUND 
```

所以问题是，如何使身份验证能够从“pip”和“python setup.py register/upload”工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:12:41.217

我没有按我的意愿设置 djangopypi2。我尝试设置许多其他 pypi 服务器，例如 PloneSoftwareCenter、mypypi、djangopypi、chishop、pypi-server、ClueReleaseManager、eggbasket 等。但它们要么没有我需要的功能，要么安装失败，因为依赖关系坏了，要么他们没有我可以遵循的安装说明，要么没有文档如何使用它，所以我最终制作了一个更简单的解决方案，适合我。

我真的不需要“python setup.py upload -r private”部分来为我工作，因为我正在使用包装脚本来发布我的 python 包。因此，我只是在脚本中添加了一个 -p （私有）选项，它只是将包构建并 scp 到我的服务器的包目录中。

为了使 pip install 正常工作，我创建了一个 cgi 脚本，它按照 pip 想要的方式创建指向包的链接。在此之后，为了从我的私有存储库安装 pip install，我只需将以下内容添加到我的 pip.conf 中：

```
$ cat ~/.pip/pip.conf
[global]
extra-index-url = https://username:password@pypi.example.com/simple/ 
```

这对我有用，但是如果有一个像 pypi.python.org 这样的界面会很好，但是你也可以在其中限制用户他们应该有权访问哪些模块。因此，如果有人使用像这样工作的现有 pypi 服务器软件设置了解决方案，我仍然会感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:49:14.910

如果它真的是你希望它运行的本地主机，而不是使用访问控制，我会将 gunicorn_django 绑定到环回接口：

```
gunicorn_django -b 127.0.0.1:80 djangopypi2.website.settings 
```

这样，没有其他机器可以访问该服务。

我怀疑您是否可以让 pip 进行身份验证，请参阅[此问题](https://stackoverflow.com/questions/643756/does-pythons-pip-support-http-authentication)。

# c# - 用一种方法收集捕获处理

> ID：14631709
> 
> 赞同：0
> 
> 时间：2013-01-31T17:33:18.003
> 
> 标签：c#, exception-handling

.Net 框架版本：3.5

我有一个程序可以处理所有可以生成的异常。这会导致大量的 catch 块，其中许多是从一种方法到另一种方法的重复。我想将所有捕获处理收集到一个方法中。例如：

```
string catch_processing ( Exception  e )
    {

    } 
```

在此示例中，该方法将返回 the`e.Message`和 the`e.StackTrace`以及任何其他相关信息。我的问题是“其他信息”。我想区分异常，例如

```
switch ( e )
    {
    case PathTooLongException:
        :
        break;

    case DirectoryNotFoundException:
        :
        break;

    default:
        :
        break;
    } 
```

我不确定如何实现此方法，希望得到一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:16:58.977

一个[`TryCatchLog`](https://codereview.stackexchange.com/questions/11999/)静态方法已发布到 CodeReview，它可以完成我认为您正在尝试做的事情；`exceptionSubscriber.TryCatchLog(Statements...)`将捕获由 抛出的任何异常`Statements...`，将它们记录到`exceptionSubscriber`并重新抛出。

但是，在复制该代码之前，请停下来解释一下您要完成的工作。“程序要求报告所有异常”是一个非常可疑的声明，因为运行时已经报告未处理的异常，而您无需执行任何操作。另一个非常可疑的事情是，`throw`您的`catch_processing`.

在抛出任何异常后，您不会尝试继续，是吗？把它从一个错误的时代的老手那里拿来`ON ERROR GOTO`；尝试在异常后继续的程序往往会失败并且很难调试。他们会抛出异常，继续运行，显示错误结果，继续运行，损坏数据，继续运行，然后启动一连串错误，这些错误都会被记录下来，继续运行，填满磁盘，继续运行，锁定机器，继续运行，直到他们最终进入无限循环。玩得开心调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:31:43.977

如果报告异常是您的唯一目标，您或许可以尝试以下方法

```
public class Foo
{
  static void Main(string[] args)
  {
     var domain = AppDomain.CurrentDomain;
     domain.FirstChanceException += new EventHandler<FirstChanceExceptionEventArgs>(CurrentDomain_FirstChanceException);
  }

   static void CurrentDomain_FirstChanceException(object sender, FirstChanceExceptionEventArgs args)
    {
       //If you are not putting this inside a try finally block then this would become an infinite recursion.
        try
        {
            var actualException = args.Exception;
            Console.WriteLine(actualException.ToString());
            //Do whatever with actualException

        }
        finally
        {

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:42:31.087

使用 instanceof 来确定它是什么类型的异常。就像其他人评论的那样，我认为您需要重新考虑您的异常处理策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:24:16.443

你真的不需要任何这些：

`AppDomain.CurrentDomain.UnhandledException += SomeExceptionHandler;`

将处理范围内发生的所有异常`AppDomain`（如果您不处理多个`AppDomain`s.

然后，不要尝试以强类型的方式（例如强制转换为`"System.XXXXException`or `"System.YYYYException"`）获取异常类型，而是使用反射来获取异常对象的整个对象图，然后您可以记录它（或执行任何您想要的错误报告） .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T19:13:09.257

在@Soundarajan 之后，我将答案实现为：

```
 static string catch_processing ( Exception  e )
        {
        StringBuilder   sb = new StringBuilder ( );

        try 
            { 
            throw e; 
            } 
        catch ( PathTooLongException )
            {
            sb.Append (
                "Supplied path is longer than the system-" +
                "defined maximum length" );
            }
        catch ( ArgumentException )
            {
            sb.Append (
                "Supplied path contains invalid characters, " +
                "is empty, or contains only white spaces" );
            }
        catch ( UnauthorizedAccessException )
            {
            sb.Append (
                "The caller does not have the " +
                "required permission" );
            }
        : other catch blocks

        sb.AppendFormat ( "{0}{1}{2}{3}",
                          Environment.NewLine,
                          e.Message,
                          Environment.NewLine,
                          e.StackTrace );

        return ( sb.ToString ( ) );
        } 
```

# ruby - 我是否在滥用 Ruby on Rails 布局

> ID：14631713
> 
> 赞同：0
> 
> 时间：2013-01-31T17:33:22.330
> 
> 标签：ruby, jquery-ui, twitter-bootstrap, ruby-on-rails-3.2

编辑：

好的，所以使用单元格我已经让它运行了，确实需要由单元格脚本创建的 rb 文件：

```
helper ApplicationHelper 
```

这克服了下面评论中的错误，但现在在我的应用程序助手中，我有一个方法：

```
 def hr_user_past
    @current_year = current_year
    @hr_user_past ||= Employee.where("username=? and year < ?", session[:hr_user].username, @current_year).order("Year DESC") if session[:hr_user]
    @past_times = @current_year - 2011
    @blart = 'test'
  end 
```

唉，现在在我的 application_controller.rb 中找不到`current_year`哪个是 def 方法，所以我认为我的流程都搞砸了，不知道我需要在哪里拥有一个好的可靠“包含”。

来自应用程序控制器的 current_year 的 Def

```
 class ApplicationController < Actioncontroller::Base

            helper_method :current_year

  ... 
  ...
      def   current_year

         OpenPeriod.maximum :year
      end
 end 
```

我也担心所有这些工作仍然无法解决我在从布局中调用 twitter bootstrap 模态对话框并且不会随着数据一路淡入的问题（我将相同的代码放在视图中，它工作正常） ...但我想一次一个问题...

*结束编辑*

试图在这里提出一个客观的问题。一些背景：

我有一个导航布局，上面有很好的登录、主页按钮和其他一些按钮。它工作得很好，最近客户想要添加一些更多的功能，即一个智能按钮，可以动态下拉并填写数据（我们使用的旧表单中的过去几年的东西）。

因此，该应用程序在其他地方使用了 twitter 引导模式。我刚刚在这里发布了这个问题：

[twitter 引导模式在 rails3 布局中不起作用？](https://stackoverflow.com/questions/14629893/twitter-bootstrap-modal-does-not-work-in-rails3-layout)

我在布局中遇到此模式正常工作的问题。然后我开始思考，这个下拉的模式通常有一些来自特定控制器的大量数据，但他们希望随时查看这些数据。这样做的布局方式不是这样吗，我是否应该构建一个应用程序帮助程序 .rb 代码来填写部分内容并将该部分内容包含在应用程序的每个页面上？（似乎它应该修复我的模态显示奇怪，比如不断褪色的问题）。我认为我对 ruby​​ on rails 的绿色态度是错误的。我知道它很棒，而且有很多内容，这是我在其中完成的第一个项目。所以我不确定这里的正确解决方案是什么，我认为这是一个词汇问题。比如我在找什么？

表单助手、模板、部分等……这里最适合什么？我意识到在编码中有很多方法可以给猫剥皮，但我不知道在哪里问。重读这篇文章越来越主观了。基本上

我有一个主页控制器，可以在主页上设置内容，结果表明用户需要在任何给定时刻从应用程序的任何页面查看这些数据。试图将其移至我们的导航布局，但效果不佳。这是正确的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:59:42.733

一种方法是使用[Cells](http://cells.rubyforge.org/)。本质上，单元是一个微型控制器，负责获取数据和渲染视图。它不是一个完整的视图，它是一个组件，类似于部分视图，它可以包含在应用程序的其他视图中 - 甚至是布局，当您在每个页面上都出现某些内容时，这很有用。

一个典型的例子（他们在他们的主页上实现）是一个购物车——它出现在你的应用程序中，但它需要有一些数据集；把它变成一个单元格将查询和渲染都提取到一个很好分离的 MVC 单元中。

# css - CSS动画和关键帧

> ID：14631717
> 
> 赞同：1
> 
> 时间：2013-01-31T17:33:35.023
> 
> 标签：css, animation, keyframe

我正在尝试使用 css 动画和关键帧使立方体出现在页面顶部。但他出现在动画的开头，只有在动画之后才出现。我如何让它从上面出现？

我想要加载页面，两秒钟后立方体出现了。

```
<div id="cube"></div>

cube{
    position: relative;
    left:60px;
    width:100px;
    height:200px;
    background:red;     
    -webkit-animation-name: cube;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-delay: 2s;
    -webkit-animation-duration: 0.8s;  
}
@-webkit-keyframes cube {
    0% {top: -200px;}
    100% {top: 0;}
} 
```

这是我的例子

[http://jsfiddle.net/hmmatos/epZJB/](http://jsfiddle.net/hmmatos/epZJB/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:49:19.933

对不起，如果我误解了你的问题，但我不太确定你的意思，所以我做了两个不同的例子，希望其中至少一个能帮助你。

[演示一](http://jsfiddle.net/epZJB/3/)

我在这里所做的是添加`-webkit-animation-fill-mode: forwards;`了它将保持动画的最后状态，使 div 在您设置的位置保持可见。

[演示二](http://jsfiddle.net/epZJB/4/)

在这个演示中，我用动画`opacity`代替了位置。

因此，将 div 从滑动`top: -80;`到`top: 0;`div 填充只是淡入到位。此示例还使用`-webkit-animation-fill-mode: forwards;`.

如果您想了解 CSS 动画，这里是一个很好的资源。 [http://www.w3.org/TR/css3-animations/](http://www.w3.org/TR/css3-animations/)

希望这可以帮助！

# jpa - 从播放框架表单调用 JPA 实体中的 getter 方法会调用 setter 函数

> ID：14631725
> 
> 赞同：0
> 
> 时间：2013-01-31T17:33:53.650
> 
> 标签：jpa, playframework-2.0

我正在编写一个简单的带有身份验证的游戏框架应用程序，其中密码使用 BCrypt 进行哈希处理。

简而言之，我的问题是：我观察到在 JPA 实体中，当您调用属性的 get 方法时，它的 set 方法也会以某种方式被调用。如果我在其中执行非幂等操作，这是一个问题设置方法。

我将在这里描述我的问题的简化示例

**这是我的登录视图**

```
 @helper.form(routes.Application.authenticate) {
        <h3>Login</h3>
        <ul id="login_box">
            <li>
                <span class="loginbox_label">Username : </span>
                <input type="text" class="login_input" id="usernm-input" name="email" value='@form("email").value' placeholder="Enter Username..." />
            </li>
            <li>
                <span class="loginbox_label">Password : </span>
                <input type="password" class="login_input" id="passwd-input" name="password" placeholder="Enter Password..." />
            </li>
            <li>
            @if(form.hasGlobalErrors) { 
                <p class="error">
                    @form.globalError.message
                </p>
            }   
            </li>
        </ul>            
        <hr />
        <a href="#" onclick="javascript:window.location.href = '@routes.Application.forgotpwd()?usr='+$('#usernm-input').val()" class="forgotpwdlink">Retrieve Forgotten Password</a>
        <input type="submit" class="alt_btn login_btn" value="Login" />     
        <hr />
} 
```

在提交时，它进入身份验证功能

```
@play.db.jpa.Transactional
public static Result authenticate(){  

Form<Login> loginForm = form(Login.class).bindFromRequest();    

    if(loginForm.hasErrors())
    {
        return badRequest(index.render(loginForm));
    } 
    else 
    {
        //Save Email to session
        session("email", loginForm.get().email);

        //Redirect to dashboard
        return redirect(routes.Application.showDashboard());
    }
} 
```

**这是我的登录类**

```
public static class Login 
{   
public String email;
public String password;

public String validate() 
{      
  User usr = User.findByEmail(email);

  if(usr == null)
    return MessageStrings.USER_NOT_FOUND; //User Not Found

  if(usr.getPassword().equals(this.password))
  {
      return MessageStrings.NO_ERROR; //NO ERROR
  }
  else
  {
      return usr.getPassword();//MessageStrings.PASSWORD_MISMATCH; //Wrong Password
  }
 }      
} 
```

如您所见，我无处调用 usr.setPassword 方法。另外，我在 else 部分返回 usr.getPassword() 以返回它并在页面上显示它而不是错误消息。

**最后，这是我的用户类，一个 JPA 实体**

```
@Transient
@Constraints.Required
@Formats.NonEmpty
private String password;

@Access(AccessType.PROPERTY)
@Column(name = "password")    
public String getPassword(){
    return this.password;
}

public void setPassword(String password){       
    this.password = password + "1";//BCrypt.hashpw(password, BCrypt.gensalt());
} 
```

链接到完整的 JPA 实体： http: [//pastebin.com/HZDEyYHZ](http://pastebin.com/HZDEyYHZ)

我这里只添加了代码的相关部分。现在查看代码，您会发现每次提交表单时，它必须只返回存储的密码（因为我在 else 部分返回 usr.getPassword()）。注意**this.password = password + "1";** .

现在，如果我继续使用错误的密码提交..这就是我得到的 ![捕获](../Images/538ea14766f404b125539526b8fb53a1.png)

**显然，每当我提交登录表单时，都会重复调用 setPassword**

为什么会这样？

**一个很长的帖子，我知道**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:29:32.180

您明确地为您的实体选择了属性访问权限。这意味着调用 setter 来填充您的实体。但是您的二传手并不是真正的二传手。因此，将此方法重命名为其他名称，并添加一个真正的 setter，或者使用字段访问而不是属性访问。

恕我直言，散列密码不应该由实体完成，更不用说由设置者完成。预期的行为是 getter 应该返回由 setter 设置的值。

# javascript - Google Maps API v3 的问题 - Javascript

> ID：14631726
> 
> 赞同：1
> 
> 时间：2013-01-31T17:33:53.680
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我已经忘记了我在 Javascript 中学到的所有东西，所以我开始了一个项目来记住一些东西。但是我遇到了一个问题：

这是我的 Javascript 代码：

```
 var peru = new google.maps.LatLng(-9, -75);
    var browserSupportFlag =  new Boolean();
    function initialize() {
        var ubicacion;  
        var mapOptions = {

            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP,

            mapTypeControl: true,
            mapTypeControlOptions: {
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
                position: google.maps.ControlPosition.BOTTOM_LEFT
            },
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.LARGE,
                position: google.maps.ControlPosition.LEFT_CENTER
            },

            panControl: false,
            scaleControl: false,
            streetViewControl: false,

        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
                mapOptions);

        if (navigator.geolocation) {
            browserSupportFlag = true;
            navigator.geolocation.getCurrentPosition(function(position) {
                ubicacion = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                map.setCenter(ubicacion);
                }, function() {
                    handleNoGeolocation(browserSupportFlag);
                }
            );

        } else {
            browserSupportFlag = false;
            handleNoGeolocation(browserSupportFlag);
        }

        function handleNoGeolocation(errorFlag) {
            if (errorFlag == true) {
                alert("No se han otorgado permisos de Geolocalización, o el servicio falló. Utilice Google Chrome para mayor compatibilidad.");
                ubicacion = peru;
                } else {
                    alert("Su navegador no soporta Geolocalización. Puede continuar de igual forma, pero le sugerimos utilizar el navegador Google Chrome.");
                    ubicacion = peru;
                }

            map.setCenter(ubicacion);
        }

        function downloadUrl(url,callback) {
            var request = window.ActiveXObject ?
            new ActiveXObject('Microsoft.XMLHTTP') :
            new XMLHttpRequest;

            request.onreadystatechange = function() {
                if (request.readyState == 4) {
                    request.onreadystatechange = doNothing;
                    callback(request, request.status);
                }
            };

            request.open('GET', url, true);
            request.send(null);
        }

        function doNothing() {}

        downloadUrl("phpsqlsearch_genxml.php?lat="+ubicacion.lat()+"&lng="+ubicacion.lng()+"&r=250", function(data) {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");

            var infoWindow = new google.maps.InfoWindow;

            function bindInfoWindow(marker, map, infoWindow, html) {
                google.maps.event.addListener(marker, 'click', function() {
                infoWindow.setContent(html);
                infoWindow.open(map, marker);
                });
            }

            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute("nombre");
                var address = markers[i].getAttribute("direccion");

                var point = new google.maps.LatLng(
                    parseFloat(markers[i].getAttribute("lat")),
                    parseFloat(markers[i].getAttribute("lng")));
                var html = "<b>" + name + "</b> <br/>" + address;

                var marker = new google.maps.Marker({
                  map: map,
                  position: point,

                });

                bindInfoWindow(marker, map, infoWindow, html);
            }
        });
    } 
```

我的麻烦在于这部分：

```
 downloadUrl("phpsqlsearch_genxml.php?lat="+ubicacion.lat()+"&lng="+ubicacion.lng()+"&r=250", function(data) {...} 
```

我想获取纬度和对数变量并将它们放入“下载网址（网址，...”上的“网址”中。

例如，如果我的位置是 -9.123792,-78.517313，你想为它捕获这个 url：phpsqlsearch_genxml.php?lat=-9.123792&lng=-78.517313&r=250

我还希望可以选择搜索的收音机...通过输入数字或类似的东西。

我真的不知道我是如何做到这一切的，以及我将如何做我想做的一切：S

PS.：对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:49:41.247

我假设您正在尝试修改 Google 的[Store locator](https://developers.google.com/maps/articles/phpsqlsearch_v3)。它具有您需要的所有功能。

出现问题的地方是您没有将坐标传递给`downloadUrl()`

在演示中，该函数在调用`searchLocationsNear(center)`之前将要加入的坐标（中心）发送到 url `downloadUrl()`。

我建议您遵循演示并确保您在修改之前理解它。

`phpsqlsearch_genxml.php`建议在不推荐使用`mysql`功能时使用 PDO

# android - Android 谷歌加，深度链接

> ID：14631727
> 
> 赞同：1
> 
> 时间：2013-01-31T17:33:55.133
> 
> 标签：android, google-plus, deep-linking

我正在使用图片库创建本机 android 应用程序。

我想为我的每张图片创建一个 Google 加号按钮。当用户按 +1 时，我想在他的墙上发布帖子：

```
user_name like's image_name on my_app 
```

我希望当点击这篇文章时，它会执行以下操作：

*   单击`user_name`将带您进入用户页面。
*   单击`image_name`将带您进入我的应用程序并向您显示此图像。
*   单击`my_app`将带您进入我的应用程序主页。

*如果您没有安装该应用程序，它会将您发送到 Google Play 商店进行下载。

我该怎么做呢？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:59:21.127

使用新的 Google+ 登录，您现在可以为您的用户创建交互式帖子。这与普通分享的行为非常相似，但是，您可以添加一个号召性用语按钮（允许用户“收听”或“回复”）和一个深层链接，这会将用户从他们的 Google+ 流中带到您的应用中. 此外，这些帖子可以使用预填充文本和最多 10 个预填充收件人进行自定义。

了解更多信息：[https](https://developers.google.com/+/features/interactive-posts) ://developers.google.com/+/features/interactive-posts 。

# android - 网络位置提供商的状态永远不会改变？

> ID：14631731
> 
> 赞同：0
> 
> 时间：2013-01-31T17:34:27.567
> 
> 标签：android, geolocation

注册后`LocationManager`，即使在注册期间打开/关闭数据或网络，也不会调用`LocationManager.NETWORK_PROVIDER`回调 。`onStatusChanged()`这种方法对基于网络的提供商无效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:10:48.403

尝试这个 ：

```
package com.mytest;

import android.R;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.Bundle;
import android.widget.TextView;

public class NetworkTest extends Activity {

    private LocationManager locationManager;
    private TextView textView;
    private final LocationListener networkLocationListener=new LocationListener(){

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            switch (status) {
            case LocationProvider.AVAILABLE:
                textView.setText(textView.getText().toString()
                        + "Network location available again\n");
                break;
            case LocationProvider.OUT_OF_SERVICE:
                textView.setText(textView.getText().toString()
                        + "Network location out of service\n");
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                textView.setText(textView.getText().toString()
                        + "Network location temporarily unavailable\n");
                break;
            }
        }

        @Override
        public void onProviderEnabled(String provider) {
            textView.setText(textView.getText().toString()
                    + "Network Provider Enabled\n");
        }

        @Override
        public void onProviderDisabled(String provider) {
            textView.setText(textView.getText().toString()
                    + "Network Provider Disabled\n");
        }

        @Override
        public void onLocationChanged(Location location) {
            textView.setText(textView.getText().toString()
                    + "New network location: "
                    + String.format("%9.6f", location.getLatitude()) + ", "
                    + String.format("%9.6f", location.getLongitude()) + "\n");
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activitynetwork);
        textView = (TextView) findViewById(R.id.textview);
        locationManager = (LocationManager)
                getSystemService(Context.LOCATION_SERVICE);
    }

    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 5000, 0,
                networkLocationListener);
    }

    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(networkLocationListener);
    }
} 
```

这个对我有用。

# delphi - 在 Delphi 中更新 TMemo 文本后保留否定/反向字符串选择？

> ID：14631735
> 
> 赞同：2
> 
> 时间：2013-01-31T17:34:32.193
> 
> 标签：delphi

在Delphi中，我在保存`SelStart`和`SelLength`备忘录中遇到困难，该备忘录在选择为负/反向时每5秒更新文本。

对于负/反向选择，我的意思是我已经在某处开始选择，并且在按住 shift 的同时按了左箭头键几次。

代码：

```
var
  caret: TPoint;
  sel_start, sel_length: Integer;
begin
  sel_start := Memo1.SelStart;    //          =  5
  sel_length := Memo1.SelLength;  //          = 10
  caret := Memo1.CaretPos;        // caret.x  = 15

  //'adi and bl' selected
  caret.x := sel_start;
  Memo1.Lines.Clear;
  Memo1.Lines.Add('laditadi and blah blah');
  Memo1.SelStart := sel_start;
  Memo1.SelLength := sel_length;

  Memo1.CaretPos := caret;
end; 
```

问题是设置 SelLength 似乎实际上移动了插入符号。`SelLength`并在设置后设置插入符号`SelLength := 0;`。由于文本不断变化，我不能在前后使用`TMemo.SelText`/ 。`TMemo.SetSelText`

我找不到保存插入符号位置的方法……有任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:10:05.277

如果 sel_start 的值与插入符号的字符位置相同，则通过将 selstart 设置为 selstart+sellength 并将 sellength 设置为 -sellength 来反转选择。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  caret: TPoint;
  sel_start, sel_length,CharFromPos: Integer;
begin
  Memo1.SetFocus;
  GetCaretPos(Caret);
  CharFromPos := SendMessage(Memo1.Handle, EM_CHARFROMPOS, 0 ,Caret.Y*$FFFF + Caret.X) AND $FFFF;
  sel_start := Memo1.SelStart;    //          =  5
  sel_length := Memo1.SelLength;  //          = 10

  Memo1.Lines.Clear;
  Memo1.Lines.Add('laditadi and blah blah'#13#10'laditadi and blah blah');
  if  sel_start<>CharFromPos then
      begin
       Memo1.SelStart := sel_start;
       Memo1.SelLength := sel_length;
      end
    else
      begin
       Memo1.SelStart := sel_start + sel_length;
       Memo1.SelLength := - sel_length;
      end;

end;
procedure TForm1.Timer1Timer(Sender: TObject);
var
 p:Tpoint;
 b:Boolean;
 CharFromPos:Integer;
begin
   b := GetCaretPos(p);
   CharFromPos := SendMessage(Memo1.Handle, EM_CHARFROMPOS, 0 ,p.Y*$FFFF + p.X) AND $FFFF;
   Caption := Format('SelStart %d CharFromPos %d',[Memo1.SelStart,CharFromPos])
end; 
```

# asp.net - ListView - ItemTemplate 表格样式

> ID：14631739
> 
> 赞同：3
> 
> 时间：2013-01-31T17:34:38.673
> 
> 标签：asp.net, html, css

我正在尝试使用 4x3 表创建 ItemTemplate。我希望第一列包含图像，其他列中的单元格包含有关图像的信息。我正在使用下面的代码，但第一行呈现在图像底部，第二行呈现在图像下方。我究竟做错了什么？

提前致谢。

```
<LayoutTemplate>
        <table runat="server" cellpadding="2" id="tblBooks" style="">
          <tr runat="server">
              <td runat="server">
                  <table ID="itemPlaceholderContainer" runat="server" border="0" style="">
                      <tr ID="itemPlaceholder" runat="server">
                      </tr>
                  </table>
              </td>
          </tr>
            <tr runat="server">
                <td runat="server" style="">
                    <asp:DataPager ID="DataPager1" runat="server">
                        <Fields>
                            <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                                ShowNextPageButton="False" ShowPreviousPageButton="False" />
                            <asp:NumericPagerField />
                            <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" 
                                ShowNextPageButton="False" ShowPreviousPageButton="False" />
                        </Fields>
                    </asp:DataPager>
                </td>
            </tr>
        </table>
    </LayoutTemplate>
<ItemTemplate>
         <tr runat="server">
            <td rowspan="4">
                <asp:Image ID="Image1" runat="server" ImageUrl='<%# String.Format("~\\Static\\Images\\BookCovers\\{0}", Eval("CoverImageSmall")) %>' Height="120" Width="90"/>
            </td>
            <td colspan="2" style="font-size:large; padding-bottom:5px; padding-left:10px; color:Black;">
                <asp:Label runat="server" ID="TitleLabel" Text='<%# Eval("Title") %>' />
            </td>  
         </tr>
         <tr runat="server">
            <td colspan="2" style="padding-left:10px;">
                <asp:Label runat="server" ID="FirstNameLabel" Text='<%# Eval("FirstName") %>' />
                <asp:Label runat="server" ID="LastNameLabel" Text='<%# Eval("LastName") %>' />
            </td>
         </tr>
         <tr runat="server">
            <td colspan="2" style="padding-left:10px;">
            </td>
         </tr>
         <tr runat="server">
            <td>
            </td>
            <td>
            </td>
         </tr>
    </ItemTemplate> 
```

**编辑：**更清楚地说，我追求的结果是这样的：

```
______________________________________________
|               |___________Title_____________|
|    Image      |____________Name_____________|
|               |______Value_____|____Value___|
|_______________|______Value_____|____Value___| 
```

但我得到的是：

```
______________________________________________
| _____________ |                             |
||   Image    | |                             |
||            | |                             |
||____________| |___________Title_____________|
|               |____________Name_____________|
|               |______Value_____|____Value___|
|_______________|______Value_____|____Value___| 
```

CSS 被重置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:45:01.150

行跨度自动生成列，所有其他行/单元格将被添加到它周围。您可以删除所有 colspan 和最后一行中的第二个 td。

```
<ItemTemplate>
     <tr runat="server">
        <td rowspan="4">
            <asp:Image ID="Image1" runat="server" ImageUrl='<%# String.Format("~\\Static\\Images\\BookCovers\\{0}", Eval("CoverImageSmall")) %>' Height="120" Width="90"/>
        </td>
        <td style="font-size:large; padding-bottom:5px; padding-left:10px; color:Black;">
            <asp:Label runat="server" ID="TitleLabel" Text='<%# Eval("Title") %>' />
        </td>  
     </tr>
     <tr runat="server">
        <td style="padding-left:10px;">
            <asp:Label runat="server" ID="FirstNameLabel" Text='<%# Eval("FirstName") %>' />
            <asp:Label runat="server" ID="LastNameLabel" Text='<%# Eval("LastName") %>' />
        </td>
     </tr>
     <tr runat="server">
        <td style="padding-left:10px;">
        </td>
     </tr>
     <tr runat="server">
        <td>
        </td>
     </tr>
</ItemTemplate> 
```

更新：根据提供的 jsfiddle，它表明问题在于使用了重置 css 样式表应用的垂直对齐：基线属性。如果该 CSS 属性被删除，或者标题单元格被覆盖为类似于 vertical-align:bottom 的内容，它会按预期显示。见[http://jsfiddle.net/9HsvF/10/](http://jsfiddle.net/9HsvF/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:41:50.893

我写了一个简单的代码：
`<tr>`
  `<td>Image Code</td>`
  `<td colspan="2">Title</td>`
`</tr>`
`<tr>`
  `<td rowspan="3"><td>`
  `<td colspan="2">Name</td>`
`</tr>`
`<tr>`
  `<td>Value1<td>`
  `<td>Value2</td>`
`</tr>`
`<tr>`
  `<td>Value1<td>`
  `<td>Value2</td>`
`</tr>`
用你的代码试试这个。希望它能如你所愿。

# wpf - Expression Blend - 复制对象和关键帧？

> ID：14631746
> 
> 赞同：1
> 
> 时间：2013-01-31T17:35:26.687
> 
> 标签：wpf, xaml, expression-blend, expression-blend-4, expression-blend-5

有没有办法复制粘贴控件并保留其所有关键帧？

我尝试过的所有操作都将复制控件并为复制的控件提供完全空白的动画。这似乎可以通过手动编辑 Xaml 轻松完成，但有没有办法从 Blend UI 中做到这一点？

我正在使用新的[VS 2012 Blend Preview+Sketchflow](http://www.microsoft.com/en-us/download/details.aspx?id=30702)，但我在 VS 2012 Blend 和 Blend 4 中尝试过也没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:44:38.133

当您复制控件时，您只是在复制对象，如果您想要动画（“StoryBoard”），您必须将那些与`Resources`未出现在对象和时间线面板中的动画分开抓取，以便它们可以'不要像标准对象一样被选中。

但是，您可以做的是，如果您尝试`StoryBoard`在多个地方重复使用相同的内容，请将其`StoryBoard`放在全局可用的资源字典中，然后您不必担心将其复制到每个实例。希望这可以帮助。

# javascript - javascript正则表达式：提取变量

> ID：14631748
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:35:31.667
> 
> 标签：javascript, regex

我有一个 javascript 变量列表，例如 var_111、var_222、var_132、var_122bb ...

下划线后面的字符串是来自远程服务器的响应，所以我不能事先指定它们。

我想运行一个循环遍历所有 var_* 变量。例如console.log 中的所有变量。

我想它可以用正则表达式来完成，但我真的还没学过。希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:38:29.007

```
str.match(/var_\d+/g).forEach(function(v)
{
    console.log(v); // v here is a variable such as var_111
}); 
```

根据下面的说明，假设实际发生的是服务器正在设置一堆您无法控制其名称的全局变量，您想要的是：

```
for (var k in window)
   if (window.hasOwnProperty(k) && k.match(/^var_\d+$/))
      console.log(k) 
```

这将遍历所有全局变量并将它们与正则表达式进行比较以获取 var_### 类型的变量，并为您打印出来。您可以使用 获取值`window[k]`。这是有效的，因为所有全局变量实际上都是`window`对象的属性。

# javascript - 我收到此错误“无模块：ngResource”

> ID：14631749
> 
> 赞同：25
> 
> 时间：2013-01-31T17:35:39.390
> 
> 标签：javascript, jquery, angularjs

尝试使用 Angular $resource，但它不是一种方法。浏览稀疏的文档，我能够找到这个：

```
angular.module('productServices', ['ngResource']). 
```

您应该将其包含在您的应用程序模块中。很公平，我把它扔进去并得到：

```
Uncaught Error: No module: ngResource 
```

嗯..这不是 Angular.js 及其单独的插件附带的吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-31T17:36:30.373

从 1.0.0rc3 版本开始，它是一个单独的文件，您需要将其包含在您的项目中（[请参阅 GitHub 上的更改日志](https://github.com/angular/angular.js/blob/master/CHANGELOG.md#100rc3-barefoot-telepathy-2012-03-29)）。

前往[http://code.angularjs.org](http://code.angularjs.org) - 在此版本之后的任何版本的文件夹下，您应该会看到`angular-resource.js`可供下载并包含在项目中的文件。

# mysql - Mysql 使用插入条件和来自选择语句的值

> ID：14631754
> 
> 赞同：0
> 
> 时间：2013-01-31T17:36:03.040
> 
> 标签：mysql, sql

我有一个表 m4zbv_mt_cfvalues 并且如果在 cf_id 和 link_id 中不存在具有相同值的记录，我想插入一条记录

我喜欢对 select 语句中的所有记录执行此插入操作，link_id 应该用于第一个条件和插入。

```
INSERT INTO m4zbv_mt_cfvalues (cf_id, link_id,value) 
 SELECT 87, link_id ,1
 FROM dual 
 WHERE NOT EXISTS
    ( SELECT *
      FROM m4zbv_mt_cfvalues
      WHERE cf_id = 87
        AND link_id = link_id
    )
    SELECT link_id from from m4zbv_mt_links where Upper(link_name) like'%APPLIANCE  DEFAULT PASSWORDS%' ; 
```

如果我提供所有值，则插入工作。当我添加 Select link_id 语句时它停止工作。我不知道如何从表 m4zbv_mt_links 中获取有关选择条件和 link_id 的所有记录

谢谢你的帮助

曼弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:40:12.477

你的代码是这样的

```
 SELECT link_id from from 
```

只需删除一个`FROM`

尝试这个

```
 INSERT INTO m4zbv_mt_cfvalues (cf_id, link_id,value) 
    SELECT 87, link_id ,1
    FROM dual 
    WHERE NOT EXISTS
             ( SELECT *
              FROM m4zbv_mt_cfvalues
              WHERE cf_id = 87
              AND link_id = (SELECT link_id from m4zbv_mt_links where Upper(link_name) like'%APPLIANCE  DEFAULT PASSWORDS%')
)
 ; 
```

# c# - 使用 SSIS 或 C# 删除数据或 CSV 文件

> ID：14631756
> 
> 赞同：-3
> 
> 时间：2013-01-31T17:36:09.433
> 
> 标签：c#, ssis

我试着：

1.  使用或从`CSV`文件中删除数据。如果我不能删除数据，那么，`SSIS``C#`
2.  至少使用or删除`CSV`文件。`SSIS``C#`

如果可能的话，我想知道如何做#1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:03:45.060

## C＃

要从平面文件中删除行，您需要读取该文件并将其写入另一个文件，不包括您不想要的任何行。

看了这两篇文章，很短

*   [一次读取一行文本文件](http://msdn.microsoft.com/en-us/library/aa287535%28v=vs.71%29.aspx)
*   [写入文本文件](http://msdn.microsoft.com/en-us/library/aa287548%28v=vs.71%29.aspx)

可能有更聪明的方法可以压缩到特定位置。如果它是一个固定宽度的文件，那么您可以计算去哪里以及要剥离多少，但由于它是一个 CSV，所以您会对此感到困惑。

## SSIS

我假设在 SQL Server 2012 不能很好地处理这些行之前，删除这些行的愿望是作为 SSIS 的标题或预告片。在这种情况下，您将需要建立 2 个连接管理器。将在单个列中读取整个文件。第二个将是您格式良好的文件输出。相同的工作流程将在这里发生。

在数据流任务中，添加一个`Flat File Source`并将其配置为使用 1 列连接管理器。添加 a`Derived Column component`或 a`Script Component`以使您能够确定该行是否为保持器。添加一个`Conditional Split`关闭它并仅将好的行分流到`Flat File Destination`使用您的强类型定义的 a 。

然后在您的下一个数据流中，使用`Flat File Source`连接到强类型定义和 bob 的您的叔叔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:47:44.723

如果您想使用 C# 删除 CSV 文件中的所有行...然后按照以下代码...

```
System.IO.File.WriteAllText(@"D:/filename.csv",string.Empty); 
```

它删除所有行并将文件保持为空...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:12:37.453

```
using System.IO;     
string path = @"c:\temp\a.txt";

if (File.Exists(path))
{
   File.Delete(path);
} 
```

# c++ - 在多种编程语言（例如 C/C++、D、Go）中寻找具有相似精度的数据类型

> ID：14631761
> 
> 赞同：0
> 
> 时间：2013-01-31T17:36:29.453
> 
> 标签：c++, c, go, d, floating-accuracy

我正在尝试使用两种或多种编程语言来实现一个带有浮点数的程序。该程序确实说了 50k 次迭代以最终将错误降低到非常小的值。

为了确保我的结果具有可比性，我想确保在不同语言中使用相同精度的数据类型。请问C/C++的float/double与D和Go中的float/double是否有对应关系。我希望 C/C++ 和 D 在这方面非常接近，但不确定。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:47:23.937

一般来说，对于编译语言，浮点格式和精度归结为两件事：

1.  用于实现硬件不直接支持的浮点函数的库。
2.  运行系统的硬件。

它还可能取决于您提供的编译器选项（以及编译器通常的复杂程度） - 许多现代处理器都有向量指令，结果可能与使用“常规”浮点指令（例如 FPU 与x86 处理器上的 SSE）。有时，您可能还会看到差异，因为 x86 FPU 上的内部计算是 80 位的，计算完成后存储为 64 位。

但一般来说，给定相同的硬件和类​​似类型的编译器，我希望从两种不同的[足够相似的]语言获得相同的结果[和大致相同的性能]。

大多数语言要么只有“双”（通常是 64 位）或“单双”（例如浮点 - 通常是 32 位和双 - 在 C/C++ 中通常是 64 位 - 也可能是 D，但我不是那个进入D）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:01:18.537

在 Go 中，浮点类型遵循 IEEE-754 标准。

直接来自规范（[http://golang.org/ref/spec#Numeric_types](http://golang.org/ref/spec#Numeric_types)）

```
float32     the set of all IEEE-754 32-bit floating-point numbers
float64     the set of all IEEE-754 64-bit floating-point numbers 
```

我不熟悉 D，但这个页面可能很有趣：[http](http://dlang.org/float.html) ://dlang.org/float.html 。

对于 C/C++，该标准不需要 IEEE-754，但在 C++ 中，您可以使用它`is_iec559()`来检查您的编译器是否使用 IEEE-754。看到这个问题：[如何检查 C++ 编译器是否使用 IEEE 754 浮点标准](https://stackoverflow.com/questions/5777484/how-to-check-if-c-compiler-uses-ieee-754-floating-point-standard)

# ssis - 合并连接转换 - 匹配多个列

> ID：14631774
> 
> 赞同：0
> 
> 时间：2013-01-31T17:36:55.643
> 
> 标签：ssis

我有两个 OLE DB 数据源。一个有列

身份证，保费

另一个有

ID、保费、成本

它们都在同一个数据流中并且都已排序。

我将它们都用作合并连接转换的来源。我已经告诉它 ID 和 Premium 都是匹配的。

我希望这个合并连接的输出只有 ID 和 Premium 都匹配的行。相反，我似乎得到的是与 ID 或 Premium 匹配的行。

它被设置为内部连接，因为我不想让带有空值/不匹配的列在闲逛。

有谁知道如何实现所需的输出？我是否使用正确的转换工具来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:04:47.950

您正在使用正确的转换。但是，默认情况下，合并连接转换将 NULL 值视为相等。`TreatNullsAsEqual`您可以通过将转换的属性设置为 false来关闭它。这样，您应该得到与常规 SQL 查询相同的结果。

# python - 计算轨迹（路径）中的转折点/枢轴点

> ID：14631776
> 
> 赞同：29
> 
> 时间：2013-01-31T17:37:23.733
> 
> 标签：python, algorithm, matlab, signal-processing

我正在尝试提出一种算法来确定 x/y 坐标轨迹中的转折点。下图说明了我的意思：绿色表示起点，红色表示轨迹的终点（整个轨迹由约 1500 个点组成）： ![弹道](../Images/06f4a68b6f31022f3ad7ccebba1f04a0.png)

在下图中，我手动添加了算法可能返回的可能（全局）转折点：

![具有可能转折点的轨迹](../Images/ba2d9e5c39c976c2ef5a6b30f5feda12.png)

显然，真正的转折点总是值得商榷的，并且将取决于人们指定的必须位于两点之间的角度。此外，可以在全球范围内定义转折点（我试图用黑色圆圈做的事情），但也可以在高分辨率局部范围内定义。我对全球（整体）方向的变化很感兴趣，但我很想看到关于人们用来区分全球和本地解决方案的不同方法的讨论。

到目前为止我已经尝试过：

*   计算后续点之间的距离
*   计算后续点之间的角度
*   看看后续点之间的距离/角度如何变化

不幸的是，这并没有给我任何可靠的结果。我可能也计算了沿多个点的曲率，但这只是一个想法。我真的很感激任何可能对我有帮助的算法/想法。代码可以是任何编程语言，首选matlab或python。

**编辑**这里的原始数据（以防有人想玩它）：

*   [垫文件](http://www.speedyshare.com/8CgN2/bla.mat)
*   [文本文件](http://www.speedyshare.com/nx8Er/bla.data)（x 坐标在前，y 坐标在第二行）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-31T21:55:19.960

您可以使用[Ramer-Douglas-Peucker (RDP) 算法](http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm)来简化路径。然后，您可以计算沿简化路径的每一段的方向变化。对应于最大方向变化的点可以称为转折点：

RDP 算法的 Python 实现可以[在 github](https://github.com/sebleier/RDP/)上找到。

```
import matplotlib.pyplot as plt
import numpy as np
import os
import rdp

def angle(dir):
    """
    Returns the angles between vectors.

    Parameters:
    dir is a 2D-array of shape (N,M) representing N vectors in M-dimensional space.

    The return value is a 1D-array of values of shape (N-1,), with each value
    between 0 and pi.

    0 implies the vectors point in the same direction
    pi/2 implies the vectors are orthogonal
    pi implies the vectors point in opposite directions
    """
    dir2 = dir[1:]
    dir1 = dir[:-1]
    return np.arccos((dir1*dir2).sum(axis=1)/(
        np.sqrt((dir1**2).sum(axis=1)*(dir2**2).sum(axis=1))))

tolerance = 70
min_angle = np.pi*0.22
filename = os.path.expanduser('~/tmp/bla.data')
points = np.genfromtxt(filename).T
print(len(points))
x, y = points.T

# Use the Ramer-Douglas-Peucker algorithm to simplify the path
# http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm
# Python implementation: https://github.com/sebleier/RDP/
simplified = np.array(rdp.rdp(points.tolist(), tolerance))

print(len(simplified))
sx, sy = simplified.T

# compute the direction vectors on the simplified curve
directions = np.diff(simplified, axis=0)
theta = angle(directions)
# Select the index of the points with the greatest theta
# Large theta is associated with greatest change in direction.
idx = np.where(theta>min_angle)[0]+1

fig = plt.figure()
ax =fig.add_subplot(111)

ax.plot(x, y, 'b-', label='original path')
ax.plot(sx, sy, 'g--', label='simplified path')
ax.plot(sx[idx], sy[idx], 'ro', markersize = 10, label='turning points')
ax.invert_yaxis()
plt.legend(loc='best')
plt.show() 
```

![在此处输入图像描述](../Images/7c772f1e0d076e8d90ada2983e2b17f4.png)

上面使用了两个参数：

1.  RDP 算法采用一个参数，`tolerance`表示简化路径可以偏离原始路径的最大距离。越大`tolerance`，简化路径越粗略。
2.  另一个参数是`min_angle`定义什么是转折点。（我将转折点设为原始路径上的任何点，其简化路径上的进入和退出向量之间的角度大于`min_angle`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T20:57:28.373

我将在下面给出 numpy/scipy 代码，因为我几乎没有 Matlab 经验。

如果您的曲线足够平滑，您可以将您的转折点识别为[曲率](http://en.wikipedia.org/wiki/Curvature#Local_expressions)最高的转折点。以点索引号作为曲线参数，采用[中心差分方案](http://en.wikipedia.org/wiki/Finite_difference#Forward.2C_backward.2C_and_central_differences)，可以用以下代码计算曲率

```
import numpy as np
import matplotlib.pyplot as plt
import scipy.ndimage

def first_derivative(x) :
    return x[2:] - x[0:-2]

def second_derivative(x) :
    return x[2:] - 2 * x[1:-1] + x[:-2]

def curvature(x, y) :
    x_1 = first_derivative(x)
    x_2 = second_derivative(x)
    y_1 = first_derivative(y)
    y_2 = second_derivative(y)
    return np.abs(x_1 * y_2 - y_1 * x_2) / np.sqrt((x_1**2 + y_1**2)**3) 
```

您可能希望先平滑曲线，然后计算曲率，然后确定最高曲率点。以下函数就是这样做的：

```
def plot_turning_points(x, y, turning_points=10, smoothing_radius=3,
                        cluster_radius=10) :
    if smoothing_radius :
        weights = np.ones(2 * smoothing_radius + 1)
        new_x = scipy.ndimage.convolve1d(x, weights, mode='constant', cval=0.0)
        new_x = new_x[smoothing_radius:-smoothing_radius] / np.sum(weights)
        new_y = scipy.ndimage.convolve1d(y, weights, mode='constant', cval=0.0)
        new_y = new_y[smoothing_radius:-smoothing_radius] / np.sum(weights)
    else :
        new_x, new_y = x, y
    k = curvature(new_x, new_y)
    turn_point_idx = np.argsort(k)[::-1]
    t_points = []
    while len(t_points) < turning_points and len(turn_point_idx) > 0:
        t_points += [turn_point_idx[0]]
        idx = np.abs(turn_point_idx - turn_point_idx[0]) > cluster_radius
        turn_point_idx = turn_point_idx[idx]
    t_points = np.array(t_points)
    t_points += smoothing_radius + 1
    plt.plot(x,y, 'k-')
    plt.plot(new_x, new_y, 'r-')
    plt.plot(x[t_points], y[t_points], 'o')
    plt.show() 
```

一些解释是有序的：

*   `turning_points`是您要识别的点数
*   `smoothing_radius`是在计算曲率之前应用于数据的平滑卷积的半径
*   `cluster_radius`是与选择作为转折点的高曲率点的距离，在该转折点不应将其他点视为候选点。

您可能需要稍微调整一下参数，但我得到了这样的结果：

```
>>> x, y = np.genfromtxt('bla.data')
>>> plot_turning_points(x, y, turning_points=20, smoothing_radius=15,
...                     cluster_radius=75) 
```

![在此处输入图像描述](../Images/8fc81e8d0c2737463ea718232b1ed9ca.png)

对于全自动检测可能还不够好，但它非常接近您想要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T20:20:44.733

一个非常有趣的问题。这是我的解决方案，它允许可变分辨率。虽然，微调它可能并不简单，因为它主要是为了缩小范围

每k个点，计算凸包并将其存储为一个集合。遍历最多 k 个点并删除任何不在凸包中的点，以使这些点不会丢失其原始顺序。

这里的目的是凸包将充当过滤器，删除所有“不重要的点”，只留下极值点。当然，如果 k 值太高，你最终会得到一些太接近实际凸包的东西，而不是你真正想要的。

这应该从一个小的 k 开始，至少 4，然后增加它直到你得到你想要的。您也应该只包括角度低于一定量的每 3 个点的中点，d。这将确保所有转弯都至少为 d 度（未在下面的代码中实现）。然而，这可能应该逐步完成以避免信息丢失，就像增加 k 值一样。另一个可能的改进是实际重新运行已删除的点，并且仅删除不在两个凸包中的点，尽管这需要更高的最小 k 值至少为 8。

以下代码似乎运行良好，但仍可以使用改进来提高效率和消除噪音。它在确定何时应该停止方面也相当不雅，因此代码实际上只在 k=4 到 k=14 左右有效（就目前而言）。

```
def convex_filter(points,k):
    new_points = []
    for pts in (points[i:i + k] for i in xrange(0, len(points), k)):
        hull = set(convex_hull(pts))
        for point in pts:
            if point in hull:
                new_points.append(point)
    return new_points

# How the points are obtained is a minor point, but they need to be in the right order.
x_coords = [float(x) for x in x.split()]
y_coords = [float(y) for y in y.split()]
points = zip(x_coords,y_coords)

k = 10

prev_length = 0
new_points = points

# Filter using the convex hull until no more points are removed
while len(new_points) != prev_length:
    prev_length = len(new_points)
    new_points = convex_filter(new_points,k) 
```

这是上面 k=14 的代码的屏幕截图。61 个红点是过滤器后剩余的红点。

![凸过滤器示例](../Images/7b73cf947daf7024654c9cb8922cc2e5.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T17:58:16.127

您采用的方法听起来很有希望，但您的数据严重过度采样。您可以先过滤 x 和 y 坐标，例如使用宽高斯然后下采样。

在 MATLAB 中，您可以使用`x = conv(x, normpdf(-10 : 10, 0, 5))`然后`x = x(1 : 5 : end)`. 您必须根据所跟踪对象的内在持久性和点之间的平均距离来调整这些数字。

然后，您将能够非常可靠地检测方向的变化，使用您之前尝试过的相同方法，基于标量产品，我想。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T20:35:27.483

另一个想法是检查每个点的左右环境。这可以通过在每个点之前和之后创建 N 个点的线性回归来完成。如果点之间的相交角度低于某个阈值，那么你就有一个角。

这可以通过保持当前在线性回归中的点的队列并用新点替换旧点来有效地完成，类似于运行平均值。

您最终必须将相邻的角合并为一个角。例如选择具有最强角属性的点。

# netbeans - 在 Netbeans 中对齐/缩进函数参数

> ID：14631777
> 
> 赞同：0
> 
> 时间：2013-01-31T17:37:26.860
> 
> 标签：netbeans, indentation, code-formatting

在 Netbeans PHP 中，我希望下一个参数与上一行的第一个参数的开头对齐，但自动缩进只给我以下格式：

```
my_function( $a,
        $b,
        ... ); 
```

我想要的是：

```
my_function( $a,
             $b,
             ... ); 
```

Netbeans 可以设置为执行此操作吗？到目前为止，我所看到的只是能够设置固定数量的空格以在参数继续时缩进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:53:31.297

我不在 Netbeans 中编写 PHP，但是对于 Java，您可以`Options > Editor > Formatting > Java > Alignment > check Method Parameters`在执行`Source > Format`. 我想你可以为 PHP 编辑器做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T19:33:41.200

在 NetBeans 8.2 中，它位于选项 > 编辑器 > 格式：语言：php - 类别：包装 - 方法参数：始终 -（方法调用参数：始终）

# xamarin.android - 在带有 Mono Droid 的 PCL 中使用 Microsoft.bcl.async？

> ID：14631781
> 
> 赞同：5
> 
> 时间：2013-01-31T17:37:40.477
> 
> 标签：xamarin.android, portable-class-library

我有一个针对 Profile158（Windows Store、.NET 4.5、Silverlight 5、Windows Phone 8）的可移植类库 (PCL)。我可以轻松地使用返回一种任务类型的方法，并且一切都按我的预期工作。每当我访问 Result 属性时，它都会完成异步代码的运行并返回结果。

但是，如果我在 PCL 内的方法中使用 async/await 关键字，我会返回一个任务。但是，当我尝试访问 Result 属性时，它会阻塞并且永远不会返回。

在这两种情况下查看 Visual Studio 中的调试输出窗口，我看到相同的文本：

```
Thread started: 
Thread started: 
Loaded assembly: Mono.Security.dll [External]
Thread started: 
Thread started: 
```

所以看起来好像代码正在运行，但它永远不会返回到 UI 线程。有没有其他人尝试在 PCL 中使用带有 Microsoft.bcl.async 的 PCL？

我的 Mono Droid 项目针对的是 Android 2.1。

谢谢，--约翰

**更新：**
这里有一些关于不同场景的附加信息。首先，这是在 UI 代码中编写时在 Mono Droid 上运行的代码：

```
var task = request.GetResponseAsync();
string html = task.Result.GetResponseText(); 
```

然后我在 PCL 中创建了以下方法：

```
public async Task<string> Test()
{
    IHttpResponse responce = await GetResponseAsync();
    return responce.GetResponseText();
} 
```

并使用 Mono UI 代码中的以下代码调用它：

```
string html = request.Test().Result; 
```

它永远不会回来......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:46:03.317

正如我在博客中所描述的，这是一个[典型的死锁场景。](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)

默认情况下，`await`将捕获一个“上下文”并使用它来恢复`async`方法。这个“上下文”是当前的`SynchronizationContext`，除非它是`null`，在这种情况下它是当前的`TaskScheduler`。

因此，您正在`async`从 UI 线程（提供`SynchronizationContext`）调用方法，然后通过调用`Result`. 该`async`方法无法完成，因为它试图在被阻塞的 UI 线程上完成。

要解决此问题，请遵循以下准则：

1.  一直使用`async`下去。不要在方法返回的 s上调用`Result`或；改为使用。`Wait``Task``async``await`
2.  `ConfigureAwait(false)`尽可能在您的库代码中使用。

您可能还会发现我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

# cpu-usage - 估算过程或工作产生的热量

> ID：14631786
> 
> 赞同：3
> 
> 时间：2013-01-31T17:38:04.583
> 
> 标签：cpu-usage

是否可以估计运行时单个进程产生的热量。

处理器的温度读数很容易获得，但我需要的是处理特定信息。

是否可以映射诸如 cpu 利用率、io、运行时间、内存使用等信息来获得某种估计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:07:33.643

我会说不。因为您的系统组件的整体温度不是一个简单的数学方程式，所有事物都在移动和切换。

计算机产生的热量和内部产生的热量取决于许多外部因素，例如硬件设置、房间的环境温度、组件的使用年限、它们或风扇上是否有灰尘、冷却膏是否正确涂抹在 CPU 上或其他地方，哪里有散热器，如何散热等等。简而言之，再次，没有。

此外，您的计算机在任何给定时间运行大量进程，除了您控制的进程（并且“控制”是一个相对术语）。即使可以访问单个组件的某些感官数据（就像您在某种程度上可以在 BIOS 中看到的那样），那么将单个进程生成的温度相对于总温度进行插值也是不可能的。

在最低级别（门网络、控制信号等），外部个体不再有任何手段来观察或测量正在发生的事情，但同样，事物处于不断变化的状态，正在使用可变数量的电力，并且因此产生的热量是可变的。

关于您的第二个问题：这基本上就是您的任务管理器所做的。互联网上有无数的例子和文章，介绍了如何用过多的编程语言完成这项工作。

也就是说，除非这个快乐的敲击键盘者和屏幕观察者社区中的一些*真正*聪明的人说这实际上是可能的，否则我会彻底惊讶......

**编辑：**监控流程是您正在寻找的第一步。看看[如何在 Windows 中使用 c# 检测进程的开始和结束？](https://stackoverflow.com/questions/8455873/how-to-detect-a-process-start-end-using-c-sharp-in-windows)并确保跟进 Hans 提到的重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:20:24.100

您可以查看[PowerTOP](https://01.org/powertop/)或其他一些监控电源使用情况的工具。我不确定它在不同系统中的准确度如何，但功率估计应该至少提供一些相关信息，因为假设您正在比较的进程在硬件上以类似方式运行时产生的热量。实际上，预测功率的因素太多了，有效的热量要少得多，但您可能能够了解使用情况。

# c++ - 第三方库和同名类的 C++ 命名空间问题

> ID：14631787
> 
> 赞同：0
> 
> 时间：2013-01-31T17:38:12.030
> 
> 标签：c++, class, namespaces, sfml

我在我的项目中定义了一个 Vector2 类

```
class Vector2
{
public:
    Vector2();
    ~Vector2();
protected:
    float mX;
    float mY;
} 
```

我开始使用一个名为[SFML的库](http://www.sfml-dev.org/)

除此之外，它还为我处理绘制形状和图像。

SFML[定义了它自己的 Vector2](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Vector2.php)类。显然，这会导致一些命名空间问题。这是我解决它的方法：

```
// Using an SFML Vector2
sf::Vector2 sfmlVector;

// Using my Vector2
::Vector2 myVector; 
```

我希望“Vector2”始终被假定为我的 vector2，而“sf::Vector2”始终是 SFML 的 vector2，而不是必须将命名空间放入我的 vector2 或使用更混乱的全局 :: 命名空间。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:51:02.093

我仍然会将您自己的`Vector2`类放入您自己的命名空间中，以避免污染全局。但是，在使用该类时，如果每次都指定命名空间很麻烦，您可以使用[using 声明](http://msdn.microsoft.com/en-us/library/was37tzw%28v=vs.71%29.aspx)，如下所示：

```
using mynamespace::Vector2; 
```

告诉编译器解析`Vector2`文件其余部分（翻译单元）的向量类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:40:30.890

只要您不在`sf`命名空间内添加代码，查找就不会尝试`Vector2`在该命名空间内查找，而是会找到全局命名空间之一。如果您在`sf`命名空间内添加代码，那么它将`sf::Vector2`首先找到......但我认为库中的代码*应该*使用库*中*的类型。

# mysql - 在休眠中，错误的值用作获取集合的参数

> ID：14631789
> 
> 赞同：0
> 
> 时间：2013-01-31T17:38:14.237
> 
> 标签：mysql, sql, hibernate, foreign-keys, hibernate-mapping

我必须使具有一对多关系的实体和表休眠。一个是用户，另一个是汽车对象。我相信差异在哪里，是我试图加入除父表的主键和子表的外键之外的字段。

例如，我的表格如下所示：

```
CREATE TABLE `User` (
  `userId` int(32) NOT NULL,
  `serial` varchar(32) NOT NULL,
  PRIMARY KEY (`userId`) USING BTREE,
  UNIQUE KEY `serial` (`serial`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

 CREATE TABLE `Car` (
      `carId` int(32) NOT NULL,
      `serial` varchar(32) NOT NULL,
      PRIMARY KEY (`carId`) USING BTREE,
      KEY `FK_USER_serial` (`serial`),
      CONSTRAINT `FK_USER_serial` FOREIGN KEY (`serial`) REFERENCES `User` (`serial`) ON DELETE CASCADE ON UPDATE CASCADE
    ) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

我的映射是这样的：

用户映射：

```
<hibernate-mapping>
    <class name="User" table="User">
        <id name="userId" type="int">
            <generator class="native" />
        </id>
        <property name="serial" type="string"></property>
          <set name="cars" table="Car" 
                inverse="true" lazy="true" fetch="select">
            <key>
                <column name="serial" not-null="true" />
            </key>
            <one-to-many class="Car" />
        </set>
    </class>
</hibernate-mapping> 
```

汽车测绘：

```
<hibernate-mapping>
    <class name="Car" table="Car">
        <id name="id" type="int">
            <generator class="native" />
        </id>
        <property name="serial" type="string"></property>
    </class>
</hibernate-mapping> 
```

我在这些表中的值如下：

用户：userId=172 序列号=1

汽车：carId=159 序列号=1

carId=160 序列号=1

我在 log4j 中启用了跟踪级别日志记录，发现休眠尝试通过“串行”字段检索汽车，但在 172 的 where 子句中使用“userId”，而不是实际带回孩子的 1。

我可以在我的表或映射中更改什么以使休眠使用串行外键而不是 Car 表甚至没有的 userId。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:44:03.497

JB Nizet 的评论是正确的解决方案。我将主键更改为串行。它已经是唯一索引，更适合作为主键。

# unix - 检查文件是否在 Unix 中包含一些文本（不是正则表达式）

> ID：14631794
> 
> 赞同：12
> 
> 时间：2013-01-31T17:38:26.767
> 
> 标签：unix, grep

我想检查多行文本是否与输入匹配。`grep`接近了，但我找不到将模式解释为纯文本而不是正则表达式的方法。

我怎样才能做到这一点，只使用 Unix 实用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T17:41:08.047

使用`grep -F`：

> `-F, --fixed-strings`
> 
> 将 PATTERN 解释为固定字符串的列表，由换行符分隔，其中任何一个都将被匹配。（`-F`由 POSIX 指定。）

编辑：最初我对这个问题的理解不够好。如果模式本身包含换行符，请使用`-z`选项：

> ```
>  -z, --null-data
>           Treat  the  input  as  a set of lines, each terminated by a zero
>           byte (the ASCII NUL character) instead of a newline.   Like  the
>           -Z  or --null option, this option can be used with commands like
>           sort -z to process arbitrary file names. 
> ```

我已经测试过了，多行模式有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:40:37.093

从[`man grep`](http://linux.die.net/man/1/grep)

```
-F, --fixed-strings
       Interpret  PATTERN  as  a  list  of  fixed strings, separated by
       newlines, any of which is to be matched.  (-F  is  specified  by
       POSIX.) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:23:30.640

如果您尝试匹配的输入字符串不包含空行（例如，它没有两个连续的换行符），您可以执行以下操作：

```
awk 'index( $0, "needle\nwith no consecutive newlines" ) { m=1 }
    END{ exit !m }' RS= input-file && echo matched 
```

如果您需要查找具有连续换行符的字符串，请将 RS 设置为文件中不存在的某个字符串。（请注意，如果您将 RS 设置为多个字符，则 awk 的结果是未指定的，但大多数`awk`会允许它是一个字符串。）如果您愿意将搜索的字符串设置为正则表达式，并且您的 awk 支持将 RS 设置为不止一个字符，你可以这样做：

```
awk 'END{ exit NR == 1 }' RS='sought regex' input-file && echo matched 
```

# hibernate - 休眠查询：无法解析属性

> ID：14631801
> 
> 赞同：1
> 
> 时间：2013-01-31T17:38:48.077
> 
> 标签：hibernate, coldfusion, hql

尝试运行此 Hibernate 查询时出现以下错误：

```
could not resolve property: candidateID of: result [select SUM(A.Points) from answer A Left Join A.Results R where R.candidateID = '465b4eb2-c306-4092-8914-d272b5a70b11']
QueryString     select SUM(A.Points) from answer A Left Join A.Results R where R.candidateID = '465b4eb2-c306-4092-8914-d272b5a70b11' 
```

**代码**

```
select SUM(A.Points)
 from answer A
 Left Join A.Results R 
 where R.candidateID = '1234' 
```

但是，candidateID 在结果中，所以我不明白这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:50:32.710

除了 Java 类和属性的名称之外，HQL 查询不区分大小写。所以 org.hibernate.eg.FOO 不是 org.hibernate.eg.Foo。尝试更改查询类和属性的大小写。还要验证candidateID 的情况。

```
select SUM(A.points) from Answer A Left Join A.results R where R.candidateID = '465b4eb2-c306-4092-8914-d272b5a70b11'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:50:10.077

实体`Results`没有名为 的字段`candidateID`。在 HQL 查询中，应使用持久属性的名称（类中的~字段）而不是数据库列的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T17:51:34.567

我不知道hibernate，但如果那是正常的sql，这条线是不完整的：

```
Left Join A.Results R 
```

您必须指定一个加入条件，例如

```
Left Join A.Results R on a.candidateID = R.candidateID 
```

# php - PHP：对象的最后一个键

> ID：14631804
> 
> 赞同：5
> 
> 时间：2013-01-31T17:38:58.643
> 
> 标签：php, json, object

我知道一些数组函数，比如array_rand，只要你把(array)放在对象前面，就可以为对象工作。在这种情况下，我正在尝试获取

```
 $this->id = end($this->log->r); 
```

这将返回最后一个元素中的所有元素。我只想知道那个元素的关键是什么。这是一个 JSON_decoded 对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T18:15:47.607

`end()`将指针设置为对象中定义的最后一个属性并返回其值。

当指针移动时，可以调用`key()`函数获取属性名

```
<?php
$object = new stdClass();
$object->first_property = 'first value';
$object->second_property = 'second value';
$object->third_property = 'third value';
$object->last_property = 'last value';

// move pointer to end
end($object);

// get the key
$key = key($object);
var_dump($key);
?> 
```

输出

`string 'last_property' (length=13)`

此功能与数组相同[如何获取数组中的最后一个键](https://stackoverflow.com/questions/2348205/how-to-get-last-key-in-an-array)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-09-30T12:49:23.530

您可以在对对象应用 end() 方法之前强制转换数组：

```
# $menu_items is an object returned by wp_get_nav_menu_items() wordpress method
$menu_items = wp_get_nav_menu_items('nav_menu');
$last_item = (array) end($menu_items);
print_r($last_item['title']); 
```

# c# - 如何在本地为程序存储大量数据

> ID：14631805
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:39:10.210
> 
> 标签：c#, database

我目前正在（在 C# 中）为乌干达当地社区构建一个相当基本的销售点程序，用于跟踪其葵花籽压榨机的业务。我在想我需要某种数据库（比如 SQL 数据库），但我以前从未设置过数据库，所以我想知道最好的方法是什么。也许数据库不是最好的方法。该程序将无法访问 Internet，因此必须在计算机上本地完成所有操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:46:28.663

我认为您的第一步应该是设计出您需要存储的数据。建立一个[实体关系模型](http://en.wikipedia.org/wiki/Entity_relationship_model)并决定你的领域模型将是什么。您可以使用许多不同的数据库引擎，它们具有不同的功能、安装要求等。数据库引擎可以安装在本地，也可以安装在要连接的远程计算机上。如果您正在编写 C# 应用程序，您可能希望使用[System.Data 命名空间](http://msdn.microsoft.com/en-us/library/system.data.aspx)。您可以使用普通的 ADO .NET，或使用 Linq To Enttiies 之类的东西来帮助为您的数据表创建代理类。

无论使用何种数据库引擎，您都可以使用相同的 API 访问 SQL 数据库以进行查询/记录提取。在某些情况下，您可能需要使用提供实现（或更好的实现）的单独库，例如 Oracle 数据库和 Oracle 数据访问组件。从一开始，.NET 就可以很好地与 Microsoft SQL Server 配合使用，但其他选项也可以使用。

什么数据库引擎的细节不如定义一组好的数据表来表示您的数据重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:42:06.300

是的。如果它有很多数据，您必须考虑使用数据库。不管你有没有互联网，只要你有本地网络，你就可以轻松地做数据库。

1.  设置数据库服务器（可能是 sql）

2.  做你的数据库并将其安装在数据库服务器上

3.  执行您的应用程序并通过连接字符串连接到您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:48:12.700

您在使用数据库存储数据的正确轨道上。这很容易实现。您的计算机不需要连接到互联网。

[SQL Server Express Edition](http://www.microsoft.com/web/platform/database/free-database.aspx)是免费的，数据限制为 10 GB。这可能会比您需要的空间多得多。

在 C# 中，使用 ADO.NET。如果您了解一些 SQL，这非常简单。代码示例[在这里](http://msdn.microsoft.com/en-us/library/dw70f090.aspx)。

# mysql - 子查询返回超过 1 行的更新

> ID：14631814
> 
> 赞同：0
> 
> 时间：2013-01-31T17:39:40.307
> 
> 标签：mysql, sql, database

我一直在努力解决这个问题几个小时无济于事。我一直在查看与返回多行的子查询相关的许多 stackoverflow.com 问题，但未能找到对我的情况有帮助的问题。

我有两张桌子：**客户**和**职位**。我正在尝试使用**clients.id** WHERE **clients.file_name** = **position.file_name更新****position.client_id**。

 ******基本上我有一个需要分配给客户的职位列表。每个客户都有多个职位，但每个职位都分配给一个客户。换句话说，**client_id在****position**中不是唯一的，但**id在****clients**中是唯一的（主键）。

这是我一直在尝试不同的变化：

```
UPDATE positions 
SET client_id = (SELECT clients.id 
FROM clients 
WHERE clients.file_name = positions.file_name) 
```

它返回。

> # 1242 - 子查询返回多于 1 行

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:40:35.007

使用[LIMIT 子句](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)。这会将结果数量限制为一行。

```
UPDATE positions 
SET client_id =
    (
     SELECT clients.id 
     FROM clients 
     WHERE clients.file_name = positions.file_name
     LIMIT 1
    ) 
```

请记住，最佳实践通常是不使用子查询来实现您想要的 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-07T16:04:17.410

如果你有多行，你可以像这样使用

```
UPDATE table1 a JOIN table2 b 
ON a.field1 = b.field1 
SET 
a.field2 = b.field2,
a.field3 = b.field3,
a.field4 = b.field4 
```

其他方式

```
UPDATE table1 a JOIN table2 b 
ON a.field1 = b.field1 
SET 
a.field2 = b.field2,
a.field3 = b.field3,
a.field4 = b.field4 
```******

# javascript - Javascript/HTML5 乒乓球游戏仅适用于 Chrome

> ID：14631816
> 
> 赞同：1
> 
> 时间：2013-01-31T17:39:46.443
> 
> 标签：javascript, html, pong

我目前完成了一项 Pong 游戏作为大学作业，但它只能在 Google Chrome 中运行。我在 Google 上搜索了几个小时，但似乎找不到问题所在。

它不适用于最新的 Firefox，也不适用于 IE9。

这是代码：

```
 <script type="text/javascript">
            var canvas;
            var ctx;  

            var score1 = 0;
            var score2 = 0;

            // beginpositie plankjes
            var x = 200;
            var y = 380;
            var x2 = 200;
            var y2 = 10;

            // beginpositie en grootte van het balletje
            var x3 = 100;
            var y3 = 200;
            var size = 5;

            // snelheid balletje
            var sx = 0;
            var sy = 0;

            // snelheid plankjes
            var dx = 7;
            var dy = 7;

            // canvas afmeting
            var BREEDTE = 500;
            var HOOGTE = 400;

            function hervatSpel(){
                if(sx == 0 && sy == 0){
                    x3 = 100;
                    y3 = 200;
                    sx = 2;
                    sy = 2;
                }
            }

            function stopSpel(){
                if(sx != 0 || sy != 0){
                    x3 = 100;
                    y3 = 200;
                    sx = 0;
                    sy = 0;
                }
            }

            function resetScore(){
                score1 = 0;
                score2 = 0;
            }

            function rect(x,y,w,h){
                ctx.beginPath();
                ctx.rect(x,y,w,h);
                ctx.closePath();
                ctx.fill();
            }            

            function circ(){
                ctx.beginPath();
                ctx.fillStyle="#ffffff";
                ctx.arc(x3,y3,size,0,Math.PI*2,true);
                ctx.closePath();
                ctx.fill();

                // collision detection zijkanten
                if(x3<(size/2) || x3>(BREEDTE-size)){
                    sx = -sx;
                }

                // collision detection plankjes  
                if(y3 > (HOOGTE-20) && x3 > x && x3 < (x+100)){
                    sy = -sy;
                }

                if(y3 < 20 && x3 > x2 && x3 < (x2+100)){
                    sy =-sy;
                }

                // collision detection onder- en bovenkant
                if(y3<size){
                    // onderste speler scoort
                    // reset balletje
                    x3 = 100;
                    y3 = 200;
                    sx = 0;
                    sy = 0;
                    // reset plankjes
                    x = 200;
                    y = 380;
                    x2 = 200;
                    y2 = 10;
                    // update score
                    score2 += 1;
                }  
                if(y3>(HOOGTE-size)){
                    // bovenste speler scoort
                    x3 = 100;
                    y3 = 200;
                    sx = 0;
                    sy = 0;

                    x = 200;
                    y = 380;
                    x2 = 200;
                    y2 = 10;

                    score1 += 1;
                }

                x3+=sx;
                y3+=sy;
            }

            function clear(){
                ctx.clearRect(0,0,BREEDTE,HOOGTE);
            }

            function init(){
                canvas = document.getElementById("canvas");
                ctx = canvas.getContext("2d");
                return setInterval(draw, 10);
            }

            function draw(){
                clear();
                ctx.fillStyle = "9CC8F7";
                rect(0,0,BREEDTE,HOOGTE);
                ctx.fillStyle = "1A6CC4";
                rect(x,y,100,10);
                rect(x2,y2,100,10);
                circ();
                ctx.font="18px Trebuchet MS";
                ctx.fillText('Speler 1:',10,30);
                ctx.fillText('Speler 2:',10,380);
                ctx.fillText(score1,100,30);
                ctx.fillText(score2,100,380);
            }

            function doKeyDown(evt){
                switch (evt.keyCode) {
                    case 37:  /* linker pijltje wordt ingedrukt */
                    if (x > 0){
                        x -= dx;
                    }
                    break;
                    case 39:  /* rechter pijltje wordt ingedrukt */
                    if (x + 100 < BREEDTE){
                        x += dx;
                    }
                    break;
                    case 87: /* w-toets wordt ingedrukt */
                    if (x2 > 0){
                        x2 -= dx;
                    }
                    break;
                    case 83: /*s-toets wordt ingedrukt */
                    if (x2 + 100 < BREEDTE){
                        x2 += dx;
                    }
                    break;
                    case 13: /* ENTER wordt ingedrukt */
                    if(sx == 0 || sy == 0){
                    sx = 2;
                    sy = 2;
                    }
                }
            }

            init()
            window.addEventListener('keydown',doKeyDown,true);
        </script> 
```

其中一些是荷兰语，但我认为这无论如何都无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:51:17.823

看起来你的颜色需要有一个开始`#`：

```
 ctx.fillStyle = "9CC8F7";
               rect(0,0,BREEDTE,HOOGTE);
               ctx.fillStyle = "1A6CC4"; 
```

应该：

```
 ctx.fillStyle = "#9CC8F7";
               rect(0,0,BREEDTE,HOOGTE);
               ctx.fillStyle = "#1A6CC4"; 
```

**[例子](http://jsbin.com/ufepux/2/edit)**

# jquery - Jquery UI 对话框，也是灰显的

> ID：14631819
> 
> 赞同：19
> 
> 时间：2013-01-31T17:39:53.400
> 
> 标签：jquery, asp.net, jquery-ui

我正在使用 jquery UI 对话框来修改 ASP.NET 网站中的数据行，当打开对话框时，我将对话框附加到底层表单，这使我可以使用回发。`$('#' + id).parent().appendTo($("form"));`

但是当我设置对话框属性时，`modal: true`不仅背景是灰色的，对话框也是灰色的，无法访问。

如果我删除`$('#' + id).parent().appendTo($("form"));`它，它就像应该的那样工作，但是我不能使用回发。

我做错了什么还是我错过了让它发挥作用的一点？

.aspx 顶部的 Javascript

```
<script type="text/javascript">
    $(document).ready(function () {

        $('#workDialog').dialog({
            autoOpen: false,
            draggable: true,
            resizable: false,
            width: 800,
            height: "auto",
            modal: true
        });
    });

    function showDialog(id) {
        $('#' + id).parent().appendTo($("form"));
        $('#' + id).dialog("open");
    }

    function closeModalDiv(id) {
        $('#' + id).dialog("close");
    }
</script> 
```

包含对话框的 div

```
<div id="workDialog" title="Basic dialog">
    <asp:UpdatePanel ID="upWorkDialog" runat="server" UpdateMode="Conditional">  <ContentTemplate>
        <table id="Table1" class="item">
        <tr>
            ...
        </tr>
        <tr>
            <td><asp:TextBox ID="txt...></asp:TextBox></td>
            <td><asp:TextBox ID="txt...></asp:TextBox></td>
            <td><asp:TextBox ID="txt...></asp:TextBox></td>
            <td><asp:TextBox ID="txt...></asp:TextBox></td>
        </tr>
        </table>
        <asp:Label ID="lblWorkEditError" runat="server" Text=""></asp:Label>

        <asp:Button ID="btnSave" runat="server" Text="Gem" OnClick="btnSave_Click" />
        <asp:Button ID="btnCancel" runat="server" Text="Annuller" OnClientClick="javascript:closeModalDiv('workDialog');" />
    </ContentTemplate></asp:UpdatePanel>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-09T10:13:02.310

这是 1.10.0 中的一个已知错误，在旧版本中工作正常，但我通过更改 ui-dialog 样式的 z-index 解决了它

在样式表或页面上添加以下样式

```
.ui-dialog
{
    z-index: 101;
} 
```

或在 jquery-ui-1.10.0 css 中找到 .ui-dialog 类并添加“z-index: 101;” 风格规则

现在重新加载页面和它的工作...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T12:05:45.520

这是 1.10.0 中的一个已知错误。我通过更改叠加层的 z-index 解决了这个问题。

```
$('#workDialog').dialog({
            modal: true,
            width: 400,
            height: 200,
            appendTo: $("form:first")
        });
        var dz = $(".ui-front").css("z-index")
        $(".ui-widget-overlay").css({ "z-index": dz - 1 });
        $(".ui-widget-overlay").appendTo($("form:first")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-09T12:23:40.347

对话框创建后不允许移动。我认为最简单和最好的解决方法是将**appendTo**移动到对话框的初始化中。

```
<script type="text/javascript">
$(document).ready(function () {

    $('#workDialog').dialog({
        autoOpen: false,
        draggable: true,
        resizable: false,
        width: 800,
        height: "auto",
        modal: true,
    appendTo: "#aspnetForm" // moved append to where the dialog i created
    });
});

function showDialog(id) {
    $('#' + id).dialog("open");
}

function closeModalDiv(id) {
    $('#' + id).dialog("close");
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T11:34:48.237

看起来在 1.10.0 版本之后，模态变通方法不再起作用。通过将 jQuery UI 版本降级到 1.9.2，它应该可以再次工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T22:38:20.013

我已经尝试过了，它应该可以工作。你能试着注释掉这条线吗

```
 $('#' + id).parent().appendTo($("form")); 
```

修改初始化对话框的位置以将对象放入变量 dlg2

```
var dlg2 = $("#dialog1").dialog({
    autoOpen: false,
    draggable: true,
    resizable: false,
    width: 800,
    height: "auto",
    modal: true,
    open: function (type, data) { $(this).parent().appendTo("form"); }
}); 
```

初始化对话框后立即添加此行。

```
$(dlg2).parent().appendTo($("form")); 
```

你只有一个对话框吗？您可以尝试在添加打开代码的对话框声明中对其进行初始化：

```
$("#dialog1").dialog({
    autoOpen: false,
    draggable: true,
    resizable: false,
    width: 800,
    height: "auto",
    modal: true,
    open: function (type, data) { $(this).parent().appendTo("form"); }
}); 
```

链接：[带有 ASP.NET 按钮回发的 jQuery UI 对话框](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-27T06:40:06.587

下面的代码显示解决您的问题，为我工作：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('#workDialog').dialog({
            autoOpen: false,
            draggable: true,
            resizable: false,
            width: 800,
            height: "auto",
            modal: true,
            appendTo: "form"
        });
    });

    function showDialog(id) {
        $('#' + id).dialog("open");
    }

    function closeModalDiv(id) {
        $('#' + id).dialog("close");
    }
</script> 
```

在 jQuery UI v1.10 中，他们添加了一个 appendTo 属性，这似乎与调用 .parent().appendTo($("form")) 做同样的事情。该对话框出现在灰色背景的顶部。并且回发确实有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-23T15:42:24.903

在 showDialog 函数的第二行，为 z-index 添加一个 css 集。应该是这样的：

```
function showDialog(id) {
    $('#' + id).parent().appendTo($("form"));
    $('#' + id).dialog("open").css({"z-index":"101"});
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-04T15:07:17.230

卡斯滕的回答对我有用，只是稍作调整。我必须`$('#workDialog').dialog...`搬家`$(".ui-widget-overlay").appendTo($("form:first"));`

# javascript - 将谷歌图表转换为图像

> ID：14631821
> 
> 赞同：2
> 
> 时间：2013-01-31T17:40:00.250
> 
> 标签：javascript, jquery, google-visualization

我正在尝试将 Google Chart 转换为类似[此链接](https://gist.github.com/1333906)的图像，但我不了解这条线

`var chartArea = chartContainer.getElementsByTagName('iframe')[0].contentDocument.getElementById('chartArea');`

Google Chart 生成的代码不会创建任何`iFrame`名为`chartArea`

有人能帮我吗 ？

**更新**

按照图表生成的来源，当我将他转换为图像时

```
http://chart.googleapis.com/chart?cht=lc&amp;chs=500x200&amp;chtt=Acessos%20ao%20im%C3%B3vel%20dos%20ultimos%20sete%20dias&amp;chxt=x%2Cy&amp;chxl=0%3A%7C24%2F01%7C25%2F01%7C26%2F01%7C27%2F01%7C28%2F01%7C29%2F01%7C30%2F01%7C1%3A%7C%7C0%7C&amp;chdlp=r&amp;chdl=San%7CSite%7CAtendimento&amp;chco=ff8a00%2C585857%2C5501ff&amp;chd=e%3Af.f.f.f.f.f.f.%2Cf.f.f.f.f.f.f.%2Cf.f.f.f.f.f.f. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T02:25:42.470

这可以通过遵循[此页面](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)上的步骤来完成。请注意，本文中的代码基于使用 iframe 的旧版 Google 可视化，并且不会像发布的那样工作。但是，您可以使用以下代码（在注释中找到）执行相同操作：

```
var svg = $(chartContainer).find('svg').parent().html();
var doc = chartContainer.ownerDocument;
var canvas = doc.createElement('canvas');
canvas.setAttribute('style', 'position: absolute; ' + '');
doc.body.appendChild(canvas);
canvg(canvas, svg);
var imgData = canvas.toDataURL("image/png");
canvas.parentNode.removeChild(canvas);
return imgData; 
```

注意：我没有创建此代码，它最初由上述网站的作者（Riccardo Govoni）创建，并由用户 Thomas 在评论部分更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T14:11:38.563

您可以使用`chart.getImageURI()`以下方法获取图表的 PNG 版本：

需要在图表绘制好之后，所以在`ready`事件中！

```
var my_div = document.getElementById('my_div');
var my_chart = new google.visualization.ChartType(chart_div);

google.visualization.events.addListener(my_chart, 'ready', function () {
  my_div.innerHTML = '<img src="' + chart.getImageURI() + '">';
});

my_chart.draw(data); 
```

# selenium - 要在 QTP 中使用的 Selenium 脚本

> ID：14631823
> 
> 赞同：1
> 
> 时间：2013-01-31T17:40:07.520
> 
> 标签：selenium, qtp

目前我们项目中有2个自动化工具，一个是Selenium，一个是QTP。现在，我们想将 Selenium 上的测试（用 JAVA 开发）迁移到 QTP。所以我想知道是否有可能为我做这件事，它不是在任何情况下......

提前致谢。

艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:25:13.533

无法将用 Selenium(Java) 编写的脚本迁移到 QTP(vbscript)....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T11:11:48.650

根据以前的经验，我会考虑相反的情况；）

从 QTP 到硒。

我当然知道，如果您为许可证付费，则几乎没有机会走另一条路……但是……管理管理管理……；）

无论如何，您可以对两种语言进行某种“移植”，但是是的，它不会比从头开始做更快。

# scala - 如何在 scala Play 中执行启动代码！框架应用？

> ID：14631827
> 
> 赞同：8
> 
> 时间：2013-01-31T17:40:28.983
> 
> 标签：scala, playframework-2.0, scheduled-tasks, startup

我需要执行允许在应用程序启动时启动计划作业的代码，我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T17:47:21.840

使用[`Global`](http://www.playframework.org/documentation/2.0/ScalaGlobal)必须在默认包中定义的对象（如果使用）：

```
object Global extends play.api.GlobalSettings {

  override def onStart(app: play.api.Application) {
    ...
  }

} 
```

请记住，在开发模式下，应用程序仅在第一个请求时加载，因此您必须触发请求才能启动进程。

* * *

**自 Play 框架 2.6x**

正确的方法是使用带有急切绑定的自定义模块：

```
import scala.concurrent.Future
import javax.inject._
import play.api.inject.ApplicationLifecycle

// This creates an `ApplicationStart` object once at start-up and registers hook for shut-down.
@Singleton
class ApplicationStart @Inject() (lifecycle: ApplicationLifecycle) {

  // Start up code here

  // Shut-down hook
  lifecycle.addStopHook { () =>
    Future.successful(())
  }
  //...
} 
```

```
import com.google.inject.AbstractModule

class StartModule extends AbstractModule {
  override def configure() = {
    bind(classOf[ApplicationStart]).asEagerSingleton()
  }
} 
```

请参阅[https://www.playframework.com/documentation/2.6.x/ScalaDependencyInjection#Eager-bindings](https://www.playframework.com/documentation/2.6.x/ScalaDependencyInjection#Eager-bindings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T23:40:32.223

我遇到了类似的错误。就像@Leo 所说，在 app/ 目录中创建全局对象。

我唯一需要确保的是将“app：Application”更改为“app：play.api.Application”。

app：应用程序引用控制器包中的类应用程序。

# django - Django相关名称向后

> ID：14631840
> 
> 赞同：0
> 
> 时间：2013-01-31T17:40:48.220
> 
> 标签：django

我在 Django 中有以下模型：

```
class Feedback(models.Model):
    solution=models.ForeignKey(Solution, related_name='solution1')
    idea=models.ForeignKey(Idea,null=True, blank=True,related_name='idea1')
    idea2=models.ForeignKey(Idea, related_name='idea2') 
```

给定解决方案的 ID，我如何编写一个查询来检索该解决方案反馈中的所有想法2。我想知道在 Django 中是否有可能。非常感谢！我试过这样的事情，但我怎么能指定我正在寻找idea2，而不是idea1？

```
ideas2= Idea.objects.filter(feedback_solution1=solutionID) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:02:10.970

```
feedbacks = list(Feedback.objects.filter(solution=solutionID).values_list('idea2__pk', flat=True))
ideas2 = Idea.objects.filter(pk__in=feedbacks) 
```

或者

```
feedbacks = list(Feedback.objects.filter(solution=solutionID).values_list('idea2__pk', flat=True))
ideas2 = Idea.objects.in_bulk(feedbacks) 
```

查看[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)中的性能注意事项部分。

# php - 更改行值 onclick html 表，如 phpMyAdmin

> ID：14631841
> 
> 赞同：1
> 
> 时间：2013-01-31T17:40:50.153
> 
> 标签：php, html, mysql, ajax

我基本上是在尝试使用一种简单的方法来编辑存储在 mySQL 数据库中的表，但不想通过不同的编辑页面，所以我的理论是：

像往常一样在 HTML 表格中显示所有数据，如下所示。

```
<table class="table table-bordered sortable">
<thead>
        <tr>
                <th>Marchant</th>
                <th>URL</th>
                <th>Status</th>
                <th>Sold</th>
                <th>Deals</th>
                <th>Sites</th>
                <th>Found</th>
                <th>Seen</th>
        </tr>
</thead>

<tbody>
        <tr>
                <td>value</td>
                <td></td>
                <td></td>
                <td>Sold here</td>
                <td>Deals here</td>
                <td>Sites here</td>
                <td>null</td>
                <td>null</td>
        </tr>
</tbody> 
```

我希望能够即时编辑数据，只需单击显示的值并进行更改即可。

问题是我将如何去做，这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T17:50:20.177

如果您使用 jQuery，请查看[就地编辑插件](https://www.google.com/search?q=edit-in-place)（[jEditable](http://www.appelsiini.net/projects/jeditable)是一个不错的插件）。

这背后的想法是在表格单元格上设置一个单击事件侦听器，您可以在其中附加一个带有 TD 内容的可编辑文本区域/表单。

在更改或提交时，数据通过 ajax 请求发送到服务器，服务器更新数据库并最终返回经过清理的数据（您使用它更新 TD 内容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T18:28:19.177

是的，有可能。

它主要是前端。

这是单击单元格后创建输入的示例。(jQuery)

```
// once page is loaded
$(document).ready(function() {

    // adding an event when the user clicks on <td>
    $('td').click(function() {

        // create input for editing
        var editarea = document.createElement('input');
        editarea.setAttribute('type', 'text');

        // put current value in it
        editarea.setAttribute('value', $(this).html());

        // rewrite current value with edit area
        $(this).html(editarea);

        // set focus to newly created input
        $(editarea).focus();

    });

}); 
```

在此之后，您可以将事件添加到新创建的输入中。（例如当用户按 Enter 时）

然后您执行 AJAX 请求并将新值发送到**.php**脚本。

您还需要将**id**添加到新创建的元素，这样您就可以确切地知道在通过 AJAX 发送数据后需要更改哪些单元格。

另外，不要忘记在放入 MySQL 之前验证数据。

因此，无论一切顺利与否，您都返回值，并根据您编写 JavaScript 代码的值从单元格中删除元素/放置已编辑的值或弹出消息。

希望这可以帮助。

# har - 项目 src 文件夹中的 har 文件不起作用

> ID：14631842
> 
> 赞同：0
> 
> 时间：2013-01-31T17:40:51.607
> 
> 标签：har

我正在尝试从我的项目 src 文件夹访问 har 文件，但它不工作。它没有将文件存储到指定的路径。但是当我尝试将文件保存在本地驱动器中时，我能够存储并从文件中获取值。

```
 import java.io.*;
     import java.util.concurrent.TimeUnit;
     import java.util.concurrent.*;
     import java.lang.InterruptedException;
     import org.openqa.selenium.By;
     import org.openqa.selenium.WebDriver;
     import org.openqa.selenium.WebElement;
     import org.openqa.selenium.firefox.FirefoxDriver;
     import org.openqa.selenium.firefox.FirefoxProfile;

     import org.openqa.selenium.support.ui.Wait;
     import org.openqa.selenium.support.ui.WebDriverWait;

     public class Example  {
           public static void main(String[] args) {
           FirefoxProfile profile = new FirefoxProfile();

    File firebug = new File("firebug-1.10.0a11.xpi");
    File netExport = new File("netExport-0.8b22.xpi");

    try
    {
        profile.addExtension(firebug);
        profile.addExtension(netExport);
    }
    catch (IOException err)
    {
        System.out.println(err);
    }

    // Set default Firefox preferences
    profile.setPreference("app.update.enabled", false);

    String domain = "extensions.firebug.";

    // Set default Firebug preferences
    profile.setPreference(domain + "currentVersion", "2.0");
    profile.setPreference(domain + "allPagesActivation", "on");
    profile.setPreference(domain + "defaultPanelName", "net");
    profile.setPreference(domain + "net.enableSites", true);

    // Set default NetExport preferences
    profile.setPreference(domain + "netexport.alwaysEnableAutoExport", true);
    profile.setPreference(domain + "netexport.showPreview", false);
    profile.setPreference(domain + "netexport.defaultLogDir", "C:\\Downloads\\_har\\");

    WebDriver driver = new FirefoxDriver(profile);

    try
    {
        // Wait till Firebug is loaded
        Thread.sleep(5000);

        // Load test page
        driver.get("http://www.janodvarko.cz");

        // Wait till HAR is exported
        Thread.sleep(10000);
    }
    catch (InterruptedException err)
    {
        System.out.println(err);
    }

    driver.quit();
} 
```

}

而不是 C:\Downloads\_har\ 我需要将它放在我的 src 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T06:56:31.017

```
 path = File.join(File.join(Dir.pwd), 'new_har')
  if  Dir.exists? path
    FileUtils.rm_rf(path)
  end
  Dir.mkdir(path)
  profile['extensions.firebug.netexport.defaultLogDir'] = path.gsub('/', '\\')
  profile['update_preferences'] = true 
```

您可以使用上面的代码保存到您的源文件夹。

# javascript - 文件输入：比较文件类型，只接受图片格式（jpg、bmp等）

> ID：14631843
> 
> 赞同：1
> 
> 时间：2013-01-31T17:40:53.090
> 
> 标签：javascript, jquery

我目前正在尝试找到一种方法来使用 jquery 来验证 aa 文件是否为图片格式`(jpeg,jpg,bmp,gif,etc)`。`.length`通过简单的比较，我已经能够确定输入是否为空。我如何能够检查文件类型并只接受有效的图片格式。

**空或不输入：**

```
if ($.trim($('#textInput').val()).length == 0) {
    alert("Should Not Be Empty!");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:44:05.347

给定一个文件输入：

```
var extension = $('#file_input').val().split('.').pop();
if (['bmp', 'gif', 'png', 'jpg', 'jpeg'].indexOf(extension) > -1) {
    console.log('validated');
} else {
    console.log('invalid extension');
} 
```

对于更广泛的文件类型过滤，您最好使用服务器端验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T17:45:24.083

您可以制作一个简单的函数来提取文件的扩展名：

```
function getExtension(file) {
    return file.split('.').pop();
} 
```

然后您可以检查输入值：

```
var file = $.trim($('#textInput').val());
if (['gif','png', ...].indexOf(getExtension(file)) > - 1) {
     ...
} 
```

并检查这篇文章，也许有用：

[如何在 HTML5 中验证以仅允许在“输入类型 =“文件””中使用 JPG、GIF 或 PNG？](https://stackoverflow.com/questions/11097272/how-to-validade-in-html5-to-only-allow-in-input-type-file-jpg-gif-or-png?rq=1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:01:19.027

出于安全原因，您不应使用 javascript 测试有效的文件类型。Javascript 只是客户端，因此您的脚本很容易被规避，或者用户可以简单地使用单独的扩展名重命名他们的文件，您的检查点将失败。

查看用户上传文件的[MIME 类型](http://en.wikipedia.org/wiki/MIME)和服务器端验证。这是一个复杂的主题，由您决定要花多少时间在上面。更彻底的检查会增加安全性。

我使用的检查是文件大小、MIME 类型和上传位置（以确保没有人试图从远程站点上传脚本）。PHP 中的这些函数是[`filesize`](http://php.net/manual/en/function.filesize.php)、[`fileinfo`](http://www.php.net/manual/en/ref.fileinfo.php)、[`mime_content_type`](http://www.php.net/manual/en/function.mime-content-type.php)和[`is_uploaded_file`](http://www.php.net/manual/en/function.is-uploaded-file.php)。类似的功能也存在于其他语言中。

例如，您可以进一步测试文件的位，以确保它不是恶意代码或伪装成 JPEG 的文件，例如通过欺骗 MIME 标头。

# javascript - Toastr JS 设置淡入淡出值

> ID：14631844
> 
> 赞同：26
> 
> 时间：2013-01-31T17:40:56.817
> 
> 标签：javascript, alert, toastr

我正在使用一个很酷的警报 js 库项目：[https ://github.com/CodeSeven/toastr](https://github.com/CodeSeven/toastr)

我想在一段时间后淡出下面的变化。查看 toastr.js 文件，我确实看到了选项。我只是不知道如何访问“fadeAway”属性

```
toastr.info('Processing...'); 
```

我试过

```
toastr.info('Processing...', fadeAway:1000); 
```

如何通过传入参数来使用淡入淡出？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-08-24T08:15:24.827

在 2.0.3 版本中，您可以执行以下操作以延长 toastr 的显示时间：

```
toastr.success('Hello World', 'New Message', { timeOut: 9500 }); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-02-02T03:41:21.403

在调用 toastr.info 之前，请设置您选择的选项。例如：

```
toastr.options.fadeOut = 2500; 
```

您可以在此处看到演示中的许多选项：[toastr demo](http://codeseven.github.com/toastr/)

这些是默认值。您可以覆盖其中的许多：

```
options = {
  tapToDismiss: true,
  toastClass: 'toast',
  containerId: 'toast-container',
  debug: false,
  fadeIn: 300,
  fadeOut: 1000,
  extendedTimeOut: 1000,
  iconClass: 'toast-info',
  positionClass: 'toast-top-right',
  timeOut: 5000, // Set timeOut to 0 to make it sticky
  titleClass: 'toast-title',
  messageClass: 'toast-message'
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-03T11:06:17.623

您还可以在参数中传递任何选项。但是参数必须是一个对象。对于您的示例，您可以使用以下命令：

```
toastr.info('Processing...', { fadeAway: 1000 }); 
```

PS：还要记住，fadeAway 在当前版本（2.0.3）中已被弃用。

# ruby-on-rails - 如何在 Ruby on Rails 中的 Ajax 请求期间保持语言环境？

> ID：14631848
> 
> 赞同：0
> 
> 时间：2013-01-31T17:41:05.430
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, ruby-on-rails-3.2

我在 Rails 中有一个 Ajax 函数，其中选择框的选定值会更改另一个框内的可用选项：

```
# application.js
$("#project_person_id").change(function() {
    $.ajax({
        url: '/projects/get_billing_address_types',
        data: 'person_id=' + this.value,
        dataType: 'script'
    })
});

# get_billing_address_types.js.erb
$('#project_billing_address_type').html("<%= escape_javascript(options_for_select(@types)) %>"); 
```

不幸的是，这不起作用，因为我将我的应用程序本地化为两种不同的语言。

当我现在更改第一个选择框的值时，在另一个选择框内出现错误：

```
<option value="h">translation missing: en.views.home</option> 
```

有没有办法将语言环境传递给javascript？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:02:12.847

您如何在非 XHR 请求中保留 URL？您可以简单地将其作为查询字符串参数传递给 url。然后使用 before_filter 将 I18n 语言环境设置为传递的参数。

```
class ApplicationController < ActionController:Base

  before_filter :select_locale

  def select_locale
    I18n.locale = params[:locale] || "en"
  end 
```

应用程序控制器通常是我做这类事情的地方，但如果你愿意，你可以把它放在一个特定的控制器中来限制使用。

# linux - 从未知格式转换音频

> ID：14631859
> 
> 赞同：0
> 
> 时间：2013-01-31T17:41:39.530
> 
> 标签：linux, audio, reverse-engineering, codec, wav

我想在 PHP 或 Perl 中创建一个实用程序，将由 Nortel 的 Callpilot 语音邮件系统创建的音频文件转换为波形文件。问题是具有 .vbk 文件扩展名的格式对于几乎所有音频播放器都是未知的。迄今为止，我还没有找到可以播放 .vbk 文件的软件。我查看了 CPAN 中的音频文件转换库并尝试了很多，它们无法识别该文件。我也没有成功处理 PHP 的音频格式。北电确实提供了转换器，但是，它不适合我的需要。我想在 CentOS 系统上通过 cron 运行它。我不知道如何对这种格式进行逆向工程。网络上似乎只有一些关于这种格式的信息。此页面表示它是“基于 H.232 格式”： [https://www.odesk.com/o/jobs/job/Reverse-Engineer-Nortel-VBK-Audio-Format_~~f501f11679f3f6bb/](https://www.odesk.com/o/jobs/job/Reverse-Engineer-Nortel-VBK-Audio-Format_~~f501f11679f3f6bb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:06:08.997

嗯，这就是封闭专有系统的乐趣。但他们有机会打得很好。尝试联系 Callpilot，看看他们是否会给您格式规范。值得一试。

至于逆向工程，您需要能够生成已知内容。就像 60Hz 的恒定音调持续 1 秒。然后在 50Hz。然后在 10 秒。比较它们。将数据与元数据隔离。会涉及到[压缩](http://en.wikipedia.org/wiki/Audio_compression_%28data%29#Audio)，所以尝试一些常见的压缩方案，也许对北电实践的研究可能会告诉你更多。如果您可以将其反馈给玩家并恢复音调，那么您就在路上。

可能有更明智和结构化的方法来进行逆向工程，但根据我的经验，这是很多试验和错误。

# c# - 收集 DAG 的所有路径

> ID：14631861
> 
> 赞同：3
> 
> 时间：2013-01-31T17:41:45.053
> 
> 标签：c#, algorithm

我有一个有向无环图，其中每个节点都由一个状态表示

```
public class State{
   List<State> ForwardStates;
   string stateName;
} 
```

where`ForwardStates`是当前状态的下一个状态列表。

我有两个特殊状态

```
State initialState (name=initial)
State finalState (name=final) 
```

我希望找到从**初始状态**开始到**最终状态**的所有路径，并填充

```
List<List<string>> paths 
```

例如给出如下图

![在此处输入图像描述](../Images/f478570a36f6ec92ad71274ee348efd0.png)

`paths`应该包含值 {{"initial","a","final"},{"initial","b","final"}}

我应该如何在没有递归的情况下在 C# 中轻松实现这一点（因为图表可能很大）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:47:42.413

您的算法可能如下所示：

*   创建一个队列`Tuple<State, List<String>>`。
*   入队`{ InitialState, new List<string> { InitialState.Name } }`
*   当队列有任何项目时，
    *   出列第一项
    *   对于所有处于出队状态的非最终前向状态，入队 `{ ForwardState, DequeuedList.ToList().Add(ForwardState.Name) }`
    *   如果最终状态是前向状态，请添加`DequeuedList.ToList().Add(FinalState.Name)`到您的输出列表中。

您应该得到一个空队列和一个您想要的字符串列表列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:12:58.723

感谢您的评论，我也在这里使用了建议 [https://stackoverflow.com/a/9535898/1497720](https://stackoverflow.com/a/9535898/1497720) （关键是在 BFS/DFS 期间**未使用已访问状态）**

这是一个没有访问状态的使用 DFS 的版本

```
 List<List<string>> paths= new List<List<string>>();
            Stack<Tuple<State, List<string>>> working = new Stack<Tuple<State, List<string>>>();
            working.Push(new Tuple<State,
                List<string>>(initialNode,
                new List<string> { initialNode.stateName }));
            do
            {
                Tuple<State, List<string>> curr = working.Pop();

                if (currNexts.stateName == "final")
                {
                    res.Add(curr.Item2);
                }
                else
                {
                    foreach (State currNext in curr.Item1.ForwardStates)
                    {
                        working.Push(new Tuple<State,
                        List<string>>(rnext, curr.Item2.Union(new[] { rnext.stateName }).ToList()));
                    }
                }
            } while (working.Count != 0); 
```

# c# - 具有隐藏状态的类的单元测试对象创建（查询对象模式）

> ID：14631863
> 
> 赞同：1
> 
> 时间：2013-01-31T17:41:54.583
> 
> 标签：c#, unit-testing, tdd, nunit

我有以下代码：

```
public class Foo
{
    public string Name { get; set; }
}

//query object pattern
public class FooQuery
{
    private string _startsWith;

    public FooQuery NameStartsWith(string startsWith)
    {
        _startsWith = startsWith;
        return this;
    }

    public List<Foo> Execute(IQueryable<Foo> someContext)
    {
        if (!string.IsNullOrWhiteSpace(_startsWith))
            someContext = someContext.Where(f => f.Name.StartsWith(_startsWith));
        return someContext.ToList();
    }
}

public interface IFooService
{
    List<Foo> FindByNameStartsWith(string startsWith);
}

public class FooService : IFooService
{
    private readonly IFooRepository _fooRepository;

    public FooService(IFooRepository fooRepository)
    {
        _fooRepository = fooRepository;
    }

    public List<Foo> FindByNameStartsWith(string startsWith)
    {
        var query = new FooQuery().NameStartsWith(startsWith);
        return _fooRepository.Find(query);
    }
}

public interface IFooRepository
{
    List<Foo> Find(FooQuery query);
}

public class FooRepository : IFooRepository
{
    public List<Foo> Find(FooQuery query)
    {
        var someContext = new List<Foo>().AsQueryable(); //would be EF/Mongo, etc
        return query.Execute(someContext);

    }
} 
```

基本上，我有一个服务“FooService”，它更新一个查询对象“FooQuery”并根据传递给它的方法参数设置它的状态。然后，该服务将查询传递给存储库“FooRepository”，在该存储库中进行数据访问。FooQuery 故意不通过属性公开其状态。相反，它公开了用于更好控制的方法。我需要对 FooService 已正确创建查询对象进行单元测试。

这是一个挑战，因为 FooQuery 的状态对于单元测试是不可见的。我看到了几个选项，但似乎都闻起来：

1.  将 FooQuery 的状态公开为只读属性，并在单元测试中检查这些属性在传递到存储库时是否有效。（检查查询的状态在技术上可以通过带有回调的模拟框架。）我不喜欢这样，因为我们现在必须打开状态并修改代码只是为了测试目的。

2.  保持代码不变，并测试服务方法生成的结果与查询对象的结果是否相同。我不喜欢这样，因为它使单元测试变得更大、更无定论且更冗余（在检查结果时，我必须对查询对象本身进行非常相似的测试）

3.  将 FooQuery 包装在一个接口中并创建一个要注入 foo 服务的工厂。然后我可以测试在模拟查询上调用的正确方法。但是，这仍然给我留下了对工厂本身的挑战性测试。

任何有关测试/重构此代码以使其更易于测试的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:24:53.847

你可以实现`Equals`然后`FooQuery`验证我`FooQuery`通过一个 mock'ed得到了预期`IFooRepository`。这是您的选项#1 的有限形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T18:40:08.320

您似乎有两个职责：从数据源获取 IQueryable，并对其执行查询。也许更简单的设计有意义？

```
public interface IFooRepository
{
     IQueryable<Foo> GetFoo();
}

public FooService : IFooService
{
     public List<Foo> FindByNameStartsWith(string startsWith)
     {
          return new FooQuery().StartsWith(startsWith).Execute(_fooRepo.GetFoo());
     }
} 
```

现在 FooService 易于测试，并且数据库特定逻辑与所有其他逻辑分离。

```
[Test]
public void StartsWithFiltersFooFromRepository()
{
    var fooFromRepository = new List<Foo> { new Foo {Name="yes1"}, new Foo {Name="no"}, new Foo {Name="yes2"} };
    _fooRepMock.Setup(r=>r.GetFoo()).Returns(fooFromRepository);

    var actual = _fooService.FindByNameStartsWith("yes");

    Assert.That(actual, Is.EquivalentTo(new [] { fooFromRepository[0], fooFromRepository[2] }));
} 
```

# node.js - nodeJS路由所有请求

> ID：14631865
> 
> 赞同：2
> 
> 时间：2013-01-31T17:42:02.920
> 
> 标签：node.js, express, routes

我正在编写一个 nodejs 应用程序。我想将所有请求路由到一些通用 API。为此我正在使用

```
 app.get('*', function(req, res) {
   /* Do Something */
 }); 
```

在“做某事”部分，我想检索 req.route.regexp，然后在此基础上进行处理。我期待 req.route.regexp 应该是我们来到这里的确切 URL 正则表达式。但是因为我在'*'中处理这个，所以正则表达式没有给我等效的req.route.params。

那么有什么方法可以根据所有路由（*）的 app.get 中的 req.route.params 获取正则表达式。

例如：我的网址为：“/:val”，因为我期待正则表达式“/^/(?:([^/]+?))/?$/i”，但我得到的正则表达式为“* “，那么我怎么能做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:35:24.743

当`app.get('*', ...)`调用 的处理程序时，最终路由尚未匹配，并且 express 不可能告诉您后续路由。

我看到的唯一解决方案是在所有路由中手动调用处理程序：

```
app.get('/:val', function (req, res) {
   if(!myGlobalHandler(req, res))
     return;
});

function myGlobalHandler(req, res) {
  if(somethingWrong(req)) {
    res.send({error: 'uh oh...'});
    return false;
  }

  return true;
} 
```

如果你告诉我更多关于你的用例，也许有一个更优雅的解决方案。

# java - 使用 Mockito 在 Java Play 框架中单元测试服务类

> ID：14631868
> 
> 赞同：4
> 
> 时间：2013-01-31T17:42:12.027
> 
> 标签：java, junit, playframework, mockito

我正在使用 Mockito 对一些用于连接到我的数据存储的服务类进行一些测试。我现在想确定为它编写测试的最佳实践方式。原则是对于每个实体，都有一种方法可以从特定实体的数据存储（mongo/mysql 等）中列出、添加、删除等一行。

参加这门课，让我与存储公司列表的数据库交谈

```
public class CompanyService extends Service{
    public CompanyService() {
        ...
    }

    public saveCompany(Company company) {
         ...
    }

     // get a list of all companies
    public List<Company> getCompanies() {

         List<Company> companies = new ArrayList<Company>();

         try {
             CompanyResult<Rows<String, String>> rows = db.query(....); 

             for (Row<String, String> row : rows.getResult()) {
                 companies.add(row.getColumns());
             }
         catch (Exception e){
            logger.warn("Error retrieving companies", e);
         }

    }

} 
```

我究竟应该在 getCompanies 方法中测试什么以及如何使用 Mockito 来测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:03:07.687

您的被测系统是公司服务。您想要测试它，假设它的所有依赖项/协作者正常运行，它运行正常。

该`db`对象看起来是您在方法中需要担心的唯一依赖项/协作者 `getCompanies()`。使用 Mockito 模拟调用`db.query()`

您可以像这样设置测试方法：

```
@Test
public void testGetCompanies() {
  /*** Arraign ***/
  CompanyService cs = new CompanyService();

  // Setup mock db
  DB mockDb = mock(DB.class);

  // Setup fake results for query
  CompanyResult<Rows<String, String>> sampleResults = ... // build sample results here

  // Have query on mock return fake results
  when(db.query(/* match arguments */)).thenReturn(sampleResults);

  // Tell your System Under Test to use the mock collaborator
  cs.setDB(mockDb);

  /*** Act ***/
  CompanyResult<Rows<String, String>> results = cs.getCompanies();

  /*** Assert ***/
  ... // Test that results and sampleResults are effectively the same
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:02:05.260

您可以测试如果 db 查询返回并且结果为空、null 或者行具有空值或意外值，您的代码将如何工作。您可以模拟 db 类以返回这些值。您还可以模拟 db 类以引发异常，以查看您的代码如何反应。

# php - 使用请求的 URI 重定向到不同的 url

> ID：14631869
> 
> 赞同：-2
> 
> 时间：2013-01-31T17:42:20.993
> 
> 标签：php, .htaccess

嗨，我想将每个请求的 URI 重定向到具有相同 URI 的另一个 URL :) 像这样

```
http://www.fb.com/everything 
```

重定向到

```
http://www.facebook.com/everything 
```

和

```
http://www.fb.com/anotherthing 
```

重定向到

```
http://www.facebook.com/anotherthing 
```

我想要动态的

使用 php 或 htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:01:51.813

您只需要一个[重定向指令](https://httpd.apache.org/docs/2.2/mod/mod_alias.html#Redirect)：

```
Redirect 301 / http://www.facebook.com/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:57:48.263

要重定向来自您的 htaccess 的所有流量，请使用以下代码

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_URI} ^/$
    RewriteRule ^(.*)$ http://domain.tld/$1 [R=301,L]
</IfModule> 
```

# css - CSS背景图像不显示

> ID：14631871
> 
> 赞同：0
> 
> 时间：2013-01-31T17:42:34.783
> 
> 标签：css, hover, anchor

我对使用 CSS 使用空`<a>`元素显示图像感到困惑。

```
<a class="header" href="#"></a> 
```

确实创建了以下css中指定的可点击区域：

```
.header { width: 50px; height 50px; background-image:url('images/picture.png') } 
```

但是，不会显示图片。如果我还包括：

```
.header:hover { background-image:url('images/picture.png'); } 
```

然后它将显示图片。我的目标是使用 CSS 来使用[这种](http://kyleschaeffer.com/user-experience/pure-css-image-hover/)图像到图像替换的方法，但我似乎还没有理解基础知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:51:06.223

你的 CSS 走在正确的轨道上。您必须添加 display:block 以允许锚标记拾取高度。

```
.header { width: 50px;
          height 50px; 
          background:url('images/picture.png'); 
          display:block;
} 
```

# ios - 我的协议不起作用

> ID：14631872
> 
> 赞同：0
> 
> 时间：2013-01-31T17:42:39.653
> 
> 标签：ios, objective-c, xcode, protocols

我已经尝试实施这个协议几个小时了，但由于某种原因它似乎不起作用。基本上我有一个拆分视图，它有一个视图控制器和一个表控制器，一个类将这两者结合在一起。主类创建表的一个实例并完美运行，但如果我选择一个单元格，我希望视图控制器做出反应。因此，我想创建一个协议，以便在选择表单元时会在主类中执行某些操作。

TableSplitViewController，这是主类：

```
 @interface TableSplitViewController : UIViewController <updateView>
    {
            ChildrenTableViewController *firstController;
            IBOutlet UITableView *firstTable;
        IBOutlet UITableViewCell *tablecell;
        NSString *name;
    }
    @property (nonatomic, strong) NSString *name;
    @property (nonatomic, strong) IBOutlet UILabel *childnamelabel;

    @end 
```

这是 TableSplitViewController.m：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (firstController == nil) {
        firstController = [[ChildrenTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    }
        [firstTable setDataSource:firstController];
        [firstTable setDelegate:firstController];
        firstController.view = firstController.tableView;

    // Do any additional setup after loading the view.
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowChildrenDetails"]) {
        ChildrenDetailViewController *detailViewController = [segue destinationViewController];

        NSIndexPath *myIndexPath = [firstController.tableView indexPathForSelectedRow];

        detailViewController.childrenDetailModel = [[NSArray alloc]
                                                    initWithObjects: [firstController.childname objectAtIndex:[firstController.index row]], nil];
    }
}
- (void) setNameLabel:(NSString *)sender
{
   // self.name = sender;
    NSLog(@"ran");
} 
```

这是 ChildrenTableViewController.h：

```
@protocol updateView <NSObject>
@required
- (void) setNameLabel:(NSString *)sender;
@end

@interface ChildrenTableViewController : UITableViewController
{
    NSIndexPath *index;
    id <updateView> delegate1;

}
@property (nonatomic, strong) NSMutableArray *childname;
@property (nonatomic, strong) NSIndexPath *index;

@property (retain) id delegate1;

@end 
```

这是 ChildrenTableViewController.m 的关键部分：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [[self delegate1] setNameLabel:[self.childname objectAtIndex:[indexPath row]]];
    NSLog(@"rannn"); 
```

正如您在最后一个代码中看到的那样，我正在尝试使用协议函数调用该方法。由于某种原因，它似乎不起作用，我已经输入了 NSLOG，它甚至根本没有运行 setNameLabel 方法。:( 将不胜感激提供的任何帮助 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:49:34.847

在上面的代码中，我看不到您将委托设置为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (firstController == nil) {
        firstController = [[ChildrenTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    }

    [firstTable setDataSource:firstController];
    [firstTable setDelegate:firstController];
    firstController.view = firstController.tableView;

    // Set up the delegate for the controller
    [firstController setDelegate1:self];

    // Do any additional setup after loading the view.
} 
```

此外，委托属性通常应该是（弱）而不是（保留）。

# javascript - javascript变量赋值核心

> ID：14631876
> 
> 赞同：2
> 
> 时间：2013-01-31T17:42:44.360
> 
> 标签：javascript

假设我有这个

```
var x={};    //x is an address in the memory where object is stored
var z=x;     //z=x after execution is equal to z={} right? 
```

现在 z 与 x 无关或执行后与 x 无关，所以当，

```
x={name:"Maizere"};
z!=x        //true 
```

但当

```
x.name="maizere";
alert(z.name)//maizere why? 
```

我们没有设置 z 的值，但 x 和 z 与 x 的关系不应再退出

实际代码：

```
 x={};
 y=x;
 x.name="maizere";
 alert(y.name)//maizere 
```

我真的不知道这是如何工作的。有人可以详细解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:51:57.127

您最初的假设是错误的；`z`是指向与 相同的对象的指针`x`。

```
var x = {}; 
var z = x;

alert( z === x );    // true 
```

当你这样做时，`x = { name: "Maizere" };`你正在将一个*新*对象分配给`x`. `z`仍然指向*原始*对象。

```
x = { name: "Maizere" };
alert( z !== x );    // true 
```

在后一个示例中，您不是创建新对象，而是更改原始对象的属性。

```
var x = {}; 
var z = x;

x.name = "maizere";
alert( z === x );    // true 
```

混淆可能源于的另一个示例：括号语法创建一个新对象而不是修改原始对象。

```
var x = { name: "Maizere" };
var y = { name: "Zaimere" };

x = { age: 20 };
y.age = 30;

console.log( x );  // {age: 20}                  <-- original object is replaced
console.log( y );  // {name: "Zaimere", age: 30} <-- original object is modified 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:53:00.113

在这两个语句之后：

```
x={};
y=x; 
```

内部表示是这样的：

```
 +---- x
      |
{} <--+
      |
      +---- y 
```

因此，任何更改`x`都反映在`y`：

```
 x.name="maizere";
 alert(y.name)//maizere 
```

更新：

```
 +---- x
                     |
{name: 'maizere'} <--+
                     |
                     +---- y 
```

一旦您将任一变量分配给其他变量，这种情况就会消失：

```
x = { name: "Maizere" } 
```

表示：

```
{name: 'Maizere'} <------- x

{name: 'maizere'} <------- y 
```

# java - JDOPersistenceManagerFactory 需要很长时间才能创建 PersistencManager

> ID：14631878
> 
> 赞同：2
> 
> 时间：2013-01-31T17:42:50.367
> 
> 标签：java, google-app-engine, jdo, datanucleus

我在 appengine 上创建了一个应用程序，但遇到了问题。在我看来，PersistenceManagerFactory 正在为每个请求创建一个到数据存储的新连接。我的数据存储读取通常需要 4 到 5 秒才能读取大约 10 个对象！（它是一个获取所有实体级别的查询）。

在查看 appstats 之后，看起来请求在调用数据存储之前已经在那里停留了大约 3 秒。实际的数据存储时间很小，4-10ms。

然后，我将获取所有查询更改为使用低级别的 DatastoreService api。我创建了一次服务，并在 get all 方法中使用它。这几乎消除了等待时间（除了第一次调用该方法）。所以我猜测 PMF 每次读取都会获得与数据存储的新连接！这似乎很疯狂。

有谁知道如何最小化 PersistenceManager 实例的启动时间？
jdoconfig.xml

```
 <persistence-manager-factory name="transactions-optional">
       <property name="javax.jdo.PersistenceManagerFactoryClass"
           value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory"/>
       <property name="javax.jdo.option.ConnectionURL" value="appengine"/>
       <property name="javax.jdo.option.NontransactionalRead" value="true"/>
       <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
       <property name="javax.jdo.option.RetainValues" value="true"/>
       <property name="datanucleus.appengine.autoCreateDatastoreTxns" value="true"/>
       <property name="datanucleus.appengine.singletonPMFForName" value="true"/>
   </persistence-manager-factory> 
```

getAll 方法（使用 jdo）

```
 @Override
    public ArrayList<CrudObject> getAll(String className) {
        List results = null;
        PersistenceManager pm = pmf.getPersistenceManager();
        try{
            Query q = pm.newQuery(Class.forName(className));
            results = (List)q.execute();
            return new ArrayList<CrudObject>(pm.detachCopyAll(results));
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }finally
        {
            pm.close();
        }
        return null;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:06:59.683

该问题是由于 AppEngine Datastore 平台上的延迟问题造成的。这个问题是暂时的，并且已经修复。这个问题恰好与我第一次使用 JDO 部署到 AppEngine 相吻合，所以我认为这是我的代码。我今天重新测试，它运行得更快。

# maven - 如何从本地 Maven 仓库中删除项目工件？

> ID：14631882
> 
> 赞同：22
> 
> 时间：2013-01-31T17:43:07.000
> 
> 标签：maven, maven-3

在本地多模块项目上运行`mvn install`时，它会构建项目工件并将其安装到本地存储库中。`mvn clean`似乎清理了我的项目特定目标目录。

我在 maven 中使用什么命令让它从本地 repo 中卸载我的项目模块？例如，我的项目输出 foo-0.1.jar 和 bar-0.2.jar 我希望将它们从我的本地仓库中删除，而不必亲自去那里删除它们。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-02-19T02:51:13.077

```
mvn build-helper:remove-project-artifact 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T10:04:19.393

您可以从本地存储库中清除工件，但您为什么喜欢这样做？除此之外，您可以通过[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/purge-local-repository-mojo.html)做到这一点：

这将清除所有项目和依赖项工件

```
mvn dependency:purge-local-repository -DreResolve=false 
```

这可能会受到补充命令行参数的影响（请参阅文档）以获取更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:17:41.017

最好是实施发布策略，即只要正在开发的工件附加带有`SNAPSHOT`. 然后，当您运行 install 时，Maven 会自动更新本地存储库中的工件。完成开发后，您删除*SNAPSHOT*并发布版本（即通过部署）。如果需要进一步开发，您可以增加版本号并使用 SNAPSHOT 再次附加它。

# django - django - 只显示选择框值，没有选择框

> ID：14631883
> 
> 赞同：0
> 
> 时间：2013-01-31T17:43:12.840
> 
> 标签：django, django-forms

我有一个代表所选产品列表的表格，其中每个产品都是从选择框中选择的。选择框选择产品的 PK，但*显示*PK + 产品名称，例如：`E12 - Valve`或`E58 - Rotary nozzle`。现在，我的具体情况是我为用户选择了一组预定义的产品，用户不能偏离这个产品选择。因此，用户不能改变选择的产品。此外，这种产品形式是一种`inlineformset_factory`，而不是主要形式。

我这样显示我的产品表单：

```
<table class="field_container" id="prodTable">
  <tr><th></th><th>CID</th><th>Qty</th></tr>
  {{ pform.management_form}}
  {% for form in pform %}
    <tr class="pform_set">
      {% for field in form %}
        <td class="product-item">{{ field }} {% if field.errors %} {{ field.errors }} {% endif %} </td>
      {% endfor %}
    </tr>
  {% endfor %}
</table> 
```

如果我换成`{{ field }}`那`{{ field.value }}`我得到的只是`E12`国外模型的PK。但是，我需要它来显示`E12 -- Valve`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:22:25.040

听起来像[自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)可能会起作用。就像是 -

```
from your_module import Product

def get_product_string(value):
    try:
        product = Product.objects.get(pk=value);
        return value + " -- " + product.name
    except DoesNotExist:
        return value 
```

然后改变你的模板，而不是`{{ field.value }}`你可以做`{{ field.value|get_product_string }}`

# php - 在 PHP 中使用动态正则表达式的骨干路由器

> ID：14631885
> 
> 赞同：6
> 
> 时间：2013-01-31T17:43:12.987
> 
> 标签：php, regex, backbone.js, router

我已经编写了一个 PHP 控制器，但是我正在重写我的代码，这样我就可以拥有类似于 Backbone Router 的 JSON 路由，将 URI 模式映射到 PHP Class::method 组合，或者直接映射到 HTML 文档，然后将其传递给客户端，像这样：

```
{
  "/home" : "index.html",
  "/podcasts": "podcasts.html",
  "/podcasts/:param1/:param2": "SomeClass::someMethod"
} 
```

Backbone 动态创建正则表达式来匹配路由与 URL。我查看了主干代码，并提取了以下代码（稍作修改）：

```
function _routeToRegExp (route) {
  var optionalParam = /\((.*?)\)/g;
  var namedParam    = /(\(\?)?:\w+/g;
  var splatParam    = /\*\w+/g;
  var escapeRegExp  = /[\-{}\[\]+?.,\\\^$|#\s]/g;
  route = route.replace(escapeRegExp, '\\$&')
               .replace(optionalParam, '(?:$1)?')
               .replace(namedParam, function(match, optional){
                 return optional ? match : '([^\/]+)';
               })
              .replace(splatParam, '(.*?)');
  return new RegExp('^' + route + '$');
} 
```

当我将 , 之类的路线传递给`/podcasts/:param1/:param2`上面的代码时，我得到`/^\/podcasts\/([^\/]+)\/([^\/]+)$/`. 我试图编写一个 PHP 函数来获得完全相同的正则表达式。我试过了：

```
$route = '/podcasts/:param1/:param2';
$a = preg_replace('/[\-{}\[\]+?.,\\\^$|#\s]/', '\\$&', $route); // escapeRegExp
$b = preg_replace('/\((.*?)\)/', '(?:$1)?', $a);                // optionalParam
$c = preg_replace('/(\(\?)?:\w+/', '([^\/]+)', $b);             // namedParam
$d = preg_replace('/\*\w+/', '(.*?)', $c);                      // splatParam
$pattern = "/^{$d}$/";
echo "/^\/podcasts\/([^\/]+)\/([^\/]+)$/\n";
echo "{$pattern}\n";
$matches = array();
preg_match_all($pattern, '/podcasts/param1/param2', $matches);
print_r($matches); 
```

我的输出是：

```
/^\/podcasts\/([^\/]+)\/([^\/]+)$/    // The expected pattern
/^/podcasts/([^\/]+)/([^\/]+)$/       // echo "{$pattern}\n";
Array                                 // print_r($matches);
(
) 
```

为什么我的正则表达式输出不同？我可以处理其余的映射过程，但我还没有弄清楚如何在 PHP 中获得与 Javascript 中完全相同的正则表达式。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T05:00:28.360

JS 版本实际上并没有转义 / 字符，它产生与您的 PHP 版本相同的字符串表示形式， `/podcasts/([^/]+)/([^/]+)`但是，这可能是让您感到困惑的原因，`console.log`返回的正则表达式的 a`_routeToRegExp`显示带有分隔 / 的完整表示形式和内部的转义：

```
//Firefox output
RegExp /^\/podcasts\/([^\/]+)\/([^\/]+)$/ 
```

有关演示，请参见[http://jsfiddle.net/w6zP2/ 。](http://jsfiddle.net/w6zP2/)

@ajshort 在评论中指出的和 Backbone 所做的是相同的解决方案：跳过 / 转义并使用替代语法；Backbone 通过显式调用 Regexp 构造函数来完成此`new RegExp('^' + route + '$')`操作，您可以执行类似的操作`$pattern = "~^{$d}$~";`

还有一个似乎可以按预期工作的 PHP Fiddle [http://phpfiddle.org/main/code/4de-jf3 。](http://phpfiddle.org/main/code/4de-jf3)

请注意，在`$&`替换字符串中的 Javascript 中插入匹配的子字符串¹，而不是在 PHP ²中。escapeRegExp 应该被修改并且可能看起来像：

```
$a = preg_replace('/[\-{}\[\]+?.,\\\^$|#~\s]/', '\\\\$0', $route); 
```

这给了我们一个更新的代码：

```
$a = preg_replace('/[\-{}\[\]+?.,\\\^$|#~\s]/', '\\\\$0', $route); // escapeRegExp
$b = preg_replace('/\((.*?)\)/', '(?:$1)?', $a);                // optionalParam
$c = preg_replace('/(\(\?)?:\w+/', '([^\/]+)', $b);             // namedParam
$d = preg_replace('/\*\w+/', '(.*?)', $c);                      // splatParam
$pattern = "~^{$d}$~";

echo "/^\/podcasts\/([^\/]+)\/([^\/]+)$/\n";
echo "{$pattern}\n";
$matches = array();
preg_match_all($pattern, '/podcasts/param1/param2', $matches);
print_r($matches); 
```

¹请参阅在[string.replace中将](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)*字符串指定为参数*²请参阅[preg_replace](http://www.php.net/manual/en/function.preg-replace.php)中的*替换*

# css - CSS背景色没有效果

> ID：14631888
> 
> 赞同：0
> 
> 时间：2013-01-31T17:43:16.937
> 
> 标签：css, background-color

我试图在灰色背景（主体）上获得一个固定宽度的白色 <div> ，但一切都显示为灰色；白色被忽略。代码在[jsbin](http://jsbin.com/ilesaq/1/edit/)上。有任何想法吗？我在以前的网站上这样做过，一切都很顺利。我看不出我在这里所做的有什么不同。

*PS：我不得不写下 jsbin URL，并在此处手动输入，因为 Firefox 拒绝将其从共享弹出窗口复制到剪贴板。这以前也有效:-(*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:57:25.657

您的容器和侧边栏处于浮动状态，但它们并未“清除”。你所做的是添加一个 div

```
<div class="clearBoth"></div> 
```

在你的侧边栏 div 之后。

然后在你的CSS中：

```
.clearBoth {
   clear:both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:56:32.193

~~花车毁了它。~~ 这是由浮动引起的:-)

基本上`#container`没有维度，因为*里面的所有东西都是浮动的*。没有尺寸=没有背景出现

添加`overflow: auto`到`#container`是解决问题的一种方法（取决于您究竟希望整个布局如何出现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:51:06.023

```
 body {
background-color: #CCCCCC;
font-family: Verdana,Geneva,sans-serif;
font-size: 12px;
text-align: center;}

#container {
background-color: #FFFFFF;
display: inline-block;
margin: 0 auto;
text-align: left;
width: 400px; } 
```

试试这些改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:56:12.617

您的问题是，按照规范，包含的 DIV 已从文档流中取出。因此，兼容的浏览器会认为您的容器 div 为空。

将以下代码放在样式表的底部：

```
.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}

/* Hides from IE-mac \*/
* html .clearfix {height: 1%;}
/* End hide from IE-mac */ 
```

然后像这样对您的容器进行更改：

```
<div id="container" class="clearfix"> 
```

# wcf - 使用 AsyncPattern = true 在 WCF 中公开异步操作

> ID：14631889
> 
> 赞同：1
> 
> 时间：2013-01-31T17:43:17.653
> 
> 标签：wcf

我正在研究使用 WCF 在服务器和客户端之间实现真正异步通信的替代方案。我当然碰到过`AsyncPattern = true`。

折腾了一下，发现`AsyncPattern`是用来做服务*实现*的，而不是*接口*异步的，也就是暴露给客户端的服务还是**同步**的。例如，假设一个名为`BeginMethod`and的异步对`EndMethod`，如下所示：

```
[ServiceContract]
interface IMyService
{
    [OperationContract(AsyncPattern = true)]
    IAsyncResult BeginMyMethod(...);

    MyComplexResult EndMyMethod(...);
} 
```

现在，由此生成的 WSDL 将只公开一个名为 MyMethod 的方法：

```
<wsdl:portType name="IMyService">
    <wsdl:operation name="MyMethod">
         <wsdl:input wsaw:Action="http://tempuri.org/IMyService/MyMethod" message="tns:IMyService_MyMethod_InputMessage"/>
         <wsdl:output wsaw:Action="http://tempuri.org/IMyService/MyMethodResponse" message="tns:IMyService_MyMethod_OutputMessage"/>
    </wsdl:operation>
</wsdl:portType> 
```

**问题是，是否有任何配置会强制 WCF 将[APM](http://msdn.microsoft.com/en-us/library/ms228963.aspx)的两种方法实际公开给客户端？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:34:48.337

您要达到的目的不是此设置的用途。您可以重新制作 WSDL，但这不是一个好方法。

您可以尝试其他消息传递选项，例如 OneWay 和 Duplex，以实现来自客户端的异步调用模式。请参阅MSDN： Juval Lowy 撰写的有关[单向调用、回调和事件的知识。](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)

[有关OperationContractAttribute.AsyncPattern 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.asyncpattern.aspx)的更多详细信息：

“客户端不受影响，因为服务器上的异步方法对是一个实现细节，不会影响操作的底层 Web 服务描述语言 (WSDL) 描述。这些方法对客户端显示为带有相关消息的单个操作。WCF 自动将入站消息路由到 Begin 方法，并将 End 调用的结果路由到出站消息。因此，**客户端通道**可以将方法对表示为单个同步操作或异步操作对。客户端表示在任何情况下都不会以任何方式影响服务器上的异步实现。”

“客户端合同可以使用 AsyncPattern 属性来指示客户端可以用来异步调用操作的异步方法对。**通常，客户端应用程序使用 ServiceModel 元数据实用工具 (Svcutil.exe) 工具和 /async 选项来生成 Begin和 End 方法对，客户端可以使用它来异步调用操作**“。【这个方法对BeginXXXX/EndXXXX是在客户端生成的】

# php - NetBeans IDE 7.2 - 安装 Zend Framework

> ID：14631892
> 
> 赞同：3
> 
> 时间：2013-01-31T17:43:29.493
> 
> 标签：php, zend-framework

我在配置 NetBeans 以使用 Zend 框架时遇到问题。

英文错误：'php.exe' 不是内部或外部命令、可运行程序或批处理文件。

波兰语错误：Nazwa '"php.exe"' nie jest rozpoznawana jakopolecenie wewn©trzne lub zewn©trzne，程序 wykonywalny lub plik wsadowy。

我将此添加到路径：

`;C:\wamp\bin\php\php5.3.5`

![在此处输入图像描述](../Images/8cda42a1a81a060353c2a59728334645.png)

配置 ZendFramework

![在此处输入图像描述](../Images/0bd431c9f50b485c3144b729fe422b86.png)

WampServer v 2.2

![在此处输入图像描述](../Images/7d51b0a9b253f9985c54be0eed6908e8.png)

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T21:35:44.410

您的 NetBeans 版本是多少？在 7.3 RC2 中，您可以更改`PHP -> General`选项卡中的 php.exe 解释器路径，例如：

![更改 PHP 5 解释器](../Images/d4d46b391003a8db3af0e9431dd6b7ab.png)

# c# - 编组的 C 字符串缺少字符

> ID：14631893
> 
> 赞同：2
> 
> 时间：2013-01-31T17:43:32.443
> 
> 标签：c#, marshalling

我在编组 C 字符数组时遇到问题。我有以下 C# 结构：

```
[StructLayout(LayoutKind.Explicit, Size = 16, CharSet = CharSet.Ansi), Serializable]
internal struct Header
{
    [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 4)]
    [FieldOffset(0)]
    public string header;

    [FieldOffset(4)]
    public int version;

    [FieldOffset(8)]
    public int diroffset;

    [FieldOffset(12)]
    public int direntries;
} 
```

以及从流中读取此结构的以下代码：

```
public static T ReadStruct<T>(this Stream stream) where T : struct
{
    var sz = Marshal.SizeOf(typeof(T));
    var buffer = new byte[sz];
    stream.Read(buffer, 0, sz);

    var pinnedBuffer = GCHandle.Alloc(buffer, GCHandleType.Pinned);

    var structure = (T) Marshal.PtrToStructure(
        pinnedBuffer.AddrOfPinnedObject(), typeof(T));

    pinnedBuffer.Free();
    return structure;
} 
```

现在我的问题是在`header`读取结构后该字段丢失了一个字符。从中读取结构的文件包含四个字节`VPVP`，但在`ReadStruct`头字符串读取结构后仅包含`VPV`. 如果我查看调试器中读取函数中的字节数组，则该数组包含值 86、80、86、80，即`VPVP`. 我也尝试使用`LayoutKind.Sequential`for ，`StructLayout`但这并没有改变任何东西。

我做错了什么或者为什么我的字符串中缺少一个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:16:59.747

您遇到的问题在于结构定义，而不是写入字节。

问题就在这里：

```
[MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 4)] 
```

正如您所说，您正在写出 text `VPVP`，您认为它有 4 个字符长。然而，事实并非如此。在 C 中，您可以这样声明字符串：

```
char mystring[] = { 'V', 'P', 'V', 'P', '\0' }; 
```

最后需要那个空字符 ( `\0`) 来标记字符串的结尾。你需要在编组时考虑到这一点，因为你需要为那个“空终止字节”保留空间，如果你不这样做，C#字符串会在可用内存中为你添加它，所以它会吃掉你的最后一个字符. 因此，如果您要使用以 null 结尾的字符串，则必须使其长度为 5。

* * *

**编辑：**这是一个更好的解决方案，您不必担心空终止符，您只需使用 a `char[]`（并且您还保持神奇的 16 字节大小）：

```
[StructLayout(LayoutKind.Explicit, Size = 16, CharSet = CharSet.Ansi), Serializable]
internal struct Header
{
    [MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst = 4)]
    [FieldOffset(0)]
    private char[] headerCharArray;

    public string header
    {
        get { return new string(headerCharArray); }
        set
        {
            if (value.Length == 4)
            {
                headerCharArray = value.ToArray();
            }
            else
            {
                throw new InvalidOperationException("String length was not 4.");
            }
        }
    }

    [FieldOffset(4)]
    public int version;

    [FieldOffset(8)]
    public int diroffset;

    [FieldOffset(12)]
    public int direntries;
} 
```

这样`char[]`存储在内存中，您可以通过属性将其作为字符串访问，该属性不占用结构本身的任何内存。

# php - 烦人的数组标签..想要漂亮的输出

> ID：14631896
> 
> 赞同：0
> 
> 时间：2013-01-31T17:43:36.337
> 
> 标签：php

我想要做的是让我的输出可用于电子表格。

我希望输出中的每个项目都没有数组标签或不混合在一起，而是以星号开头并以 % 符号结尾。

```
<?php

  $file = file_get_contents('aaa.txt'); //get file to string
  $row_array = explode("\n",$file); //cut string to rows by new line
  $row_array = array_count_values(array_filter($row_array));

  foreach ($row_array as $key=>$counts) {
    if ($counts==1)
        $no_duplicates[] = $key; 
  }

  //do what You want
  echo '<pre>';
  print_r($no_duplicates);

  //write to file. If file don't exist. Create it
  file_put_contents('no_duplicates.txt',$no_duplicates); 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:06:10.643

也许这会给你你想要的：

```
$str = "*" . implode("% *", $no_duplicates) . "%";
echo '<pre>';
echo $str;
echo '</pre>'; 
```

# python - Python dict 上的 json.dumps TypeError

> ID：14631898
> 
> 赞同：1
> 
> 时间：2013-01-31T17:43:45.687
> 
> 标签：python, json, typeerror

实现以下类以提供可以通过网络作为 json 编码字典传递的通用对象。我实际上正在尝试对 dict 进行 json 编码（！），但它不起作用。

我知道它可以与自定义编码器类一起使用，但我不明白为什么当我只是编码一个字典时它是必要的。

**有人可以解释 TypeError 或提供一种在不继承 JSONEncoder 的情况下对其进行编码的方法吗？**

这是不良行为。

```
>>> def tree(): return CustomDict(tree)
>>> d = tree()
>>> d['one']['test']['four'] = 19
>>> d.dict
{ 'one' : { 'test': {'four': 19}}}
>>> type(d.dict)
<type 'dict'> 
>>> import json
>>> json.dumps(d.dict)
# stacktrace removed
TypeError: {'one': {'test': {'four': 19}}} is not JSON serializable
>>> normal_d = {'one': {'test': {'four': 19}}}
>>> type(normal_d)
<type 'dict'>
>>> json.dumps(normal_d)
"{'one': {'test': {'four': 19}}}"
>>> normal_d == d
True 
```

我希望能够做到以下几点

```
>>>> json.dumps(dict(d))
"{'one': {'test': {'four': 19}}}" 
```

但我添加了 dict 属性来“强制它”（显然没有用）。现在这是一个更大的谜团。这是 CustomDict 类的代码

```
class CustomDict(collections.MutableMapping):                                
    """                                                                         
    A defaultdict-like object that can also have properties and special methods 
    """                                                                         

    def __init__(self, default_type=str, *args,  **kwargs):                     
        """                                                                     
        instantiate as a default-dict (str if type not provided). Try to update 
        self with each arg, and then update self with kwargs.                                                                

        @param default_type: the type of the default dict                       
        @type default_type: type (or class)                                     
        """                                                                     
        self._type = default_type                                               
        self._store = collections.defaultdict(default_type)                     
        self._dict = {}                                                         

        for arg in args:                                                        
            if isinstance(arg, collections.MutableMapping):                     
                self.update(arg)                                                

        self.update(kwargs)                                                     

    @property                                                                   
    def dict(self):                                                             
        return self._dict                                                       

    def __contains__(self, key):                                                
        return key in self._store                                               

    def __len__(self):                                                          
        return len(self._store)                                                 

    def __iter__(self):                                                         
        return iter(self._store)                                                

    def __getitem__(self, key):                                                 
        self._dict[key] = self._store[key]                                      
        return self._store[key]                                                 

    def __setitem__(self, key, val):                                            
        self._dict[key] = val                                                   
        self._store[key] = val                                                  

    def __delitem__(self, key):                                                 
        del self._store[key]                                                    

    def __str__(self):                                                          
        return str(dict(self._store)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:49:24.613

你真的想让你的类型成为 的子类`dict`，而不是 的子类`collections.MutableMapping`。

更好的是，`collections.defaultdict`直接使用它，它已经是一个子类，`dict`可以用来轻松地实现你的树“类型”：

```
from collections import defaultdict

def Tree():
    return defaultdict(Tree)

tree = Tree() 
```

示范：

```
>>> from collections import defaultdict
>>> def Tree():
...     return defaultdict(Tree)
... 
>>> tree = Tree()
>>> tree['one']['two'] = 'foobar'
>>> tree
defaultdict(<function Tree at 0x107f40e60>, {'one': defaultdict(<function Tree at 0x107f40e60>, {'two': 'foobar'})})
>>> import json
>>> json.dumps(tree)
'{"one": {"two": "foobar"}}' 
```

如果您必须添加自己的方法和行为，那么我将继承`defaultdict`并在该基础上构建：

```
class CustomDict(defaultdict):
    pass 
```

由于这仍然是 的子类`dict`，因此`json`库很乐意将其转换为 JSON 对象而无需特殊处理。

# c# - 实体框架未在数据库中提供正确的名称

> ID：14631899
> 
> 赞同：0
> 
> 时间：2013-01-31T17:43:45.093
> 
> 标签：c#, frameworks, entity, code-first, poco

我正在使用实体框架（用于学习）来创建数据表；但是，当我运行应用程序时，它会将数据库列名称创建为：AnaKategori_ANA_CATEGORY_ID。

为什么要这样做，因为我特别告诉它将该列命名为“ANA_CATEGORY_ID”？

以下是类文件内容。

```
[Table("CATEGORY")]
public class Kategori
{
    [Key]
    public Guid CATEGORY_ID { get; set; }
    [MaxLength(100)]
    public string CATEGORY { get; set; }
    [MaxLength(100)]
    public string CATEGORY_TR { get; set; }
    [Column("ANA_CATEGORY_ID")]
    public virtual AnaKategori AnaKategori { get; set; }

} 
```

我在发布之前尝试了 boindiil 的答案（这是使用 ForeignKey 属性，我收到了这个错误：

```
类型“BusinessListingMVC.Models.Kategori”的属性“AnaKategori”上的 ForeignKeyAttribute 是         
无效。在依赖类型上找不到外键名称“ANA_CATEGORY_ID”
BusinessListingMVC.Models.Kategori'。

Name 值应该是逗号分隔的外键属性名称列表。

说明：执行当前 Web 请求期间发生未处理的异常。
请查看堆栈跟踪以获取有关错误及其来源的更多信息
编码。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:04:13.580

我找到了这个[链接](http://social.msdn.microsoft.com/Forums/eu/adonetefx/thread/35e7438b-ec1f-4d1f-bca0-539ccfb9abb1)，它指出这似乎是一个错误。在这种情况下，您必须使用该`[ForeignKey]` [属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.foreignkeyattribute%28v=VS.103%29.aspx)为其指定所需的名称：

```
[Table("CATEGORY")]
public class Kategori
{
    [Key]
    public Guid CATEGORY_ID { get; set; }
    [MaxLength(100)]
    public string CATEGORY { get; set; }
    [MaxLength(100)]
    public string CATEGORY_TR { get; set; }
    [Column("ANA_CATEGORY_ID")]
    public Guid ANA_CATEGORY_ID { get; set; }
    [ForeignKey("ANA_CATEGORY_ID")]
    public virtual AnaKategori AnaKategori { get; set; }
} 
```

# php - php检查多个字符串的相似度

> ID：14631901
> 
> 赞同：0
> 
> 时间：2013-01-31T17:43:52.223
> 
> 标签：php, database, email, similarity

> **可能重复：**
> [字符串相似性的算法（比 Levenshtein 和similar_text 更好）？php，js](https://stackoverflow.com/questions/5351659/algorithms-for-string-similarities-better-than-levenshtein-and-similar-text)

我有一个网站，允许用户创建帐户来推荐其他朋友。并将这些帐户保存到数据库表中。但我有一个问题是有些人使用电子邮件创建多个帐户，例如 nike@gmail.com、nike1@gmail.com、nike2@gmail.com 等。

有没有办法检查数据库中这些电子邮件是否有超过三个阻止所有这些电子邮件？

我正在为这个应用程序使用 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:52:02.023

好吧，实际上这似乎不是问题。因为，可能有不同的用户，他们的电子邮件 ID 略有不同。

你怎么能告诉用户的电子邮件 id ： nike1@gmail.com 和 nike2@gmail.com 与 nike@gmail.com 相同？

但是如果你想检查一下怎么办：

1）您可以使用 regx 或类似的东西删除最后一个数字 2）然后可以检查原始电子邮件 ID 是否存在于您的数据库中。

# c# - 列表与字典（哈希表）

> ID：14631908
> 
> 赞同：4
> 
> 时间：2013-01-31T17:44:39.537
> 
> 标签：c#, .net

这可能是一个愚蠢的问题，但我正在阅读它`Hashtables`并且`Dictionaries`比列表更快，因为它们使用键索引项目。

我知道 a `List`or`Array`用于没有值的元素，而 a`Dictionary`用于具有值的元素。所以我认为拥有一个`Dictionary`你需要的值作为键并且所有这些值都相等可能是明智的？

**更新**：

根据评论，我认为我需要的是`HashSet`. 这个[问题](https://stackoverflow.com/questions/150750/hashset-vs-list-performance)谈论他们的表现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:55:46.803

“更快”取决于您需要它们做什么。

.NET`List`只是一块连续内存（这*不是*链表），这使得顺序访问（尤其是考虑现代 CPU 的缓存和预取的影响）或通过已知**整数**“随机”访问非常有效指数。搜索或插入元素（尤其是在中间） - 不是那么多。

`Dictionary`是一种关联数据结构 - 键可以是任何可散列的（不仅仅是整数索引），但元素没有以“有意义”的方式排序，并且通过已知键的访问速度不如`List`整数索引。

因此，为工作选择合适的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:52:51.213

字典/哈希表与列表/数组也有一些弱点：

*   您必须在每次查找时计算对象的哈希值。
*   对于小型集合，遍历数组可能比计算哈希更快，特别是因为不能保证哈希是唯一的¹。
*   他们不擅长迭代项目列表。
*   它们不太擅长存储重复条目（有时您合法地希望一个值在数组中显示不止一次）
*   有时一个类型没有一个好的键来关联它

使用适合情况的东西。有时这将是一个列表或数组。有时它会是一个字典。您几乎不应该再使用 HashTable （如果您真的不知道要存储的类型，请选择 Dictionary<KeyType, Object>）。

[¹它通常是唯一的，但由于发生冲突的可能性很小，因此集合必须在计算哈希值后检查存储桶。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T17:50:30.367

您的陈述“列表或数组适用于没有值的元素，而字典适用于有值的元素”，严格来说并不正确。

更准确地说，List 是元素的集合，而 Hashtable 或 Dictionary 是元素的集合以及用于访问每个元素的唯一键。

为极少数元素的集合使用列表，或者当您只需要访问整个集合而不是集合的单个元素时。

当集合很大和/或当您需要查找/访问集合的各个成员时，请使用哈希表或字典。

# android - listView 下方的按钮

> ID：14631909
> 
> 赞同：4
> 
> 时间：2013-01-31T17:44:39.650
> 
> 标签：android, android-layout

我是 Android 新手，我正在做的第一个项目是让玩家加入团队。我有一个从数据库中获取所有玩家的列表视图。每个名称旁边都应该有一个复选框，然后底部有一个按钮应该更新数据库。到目前为止，这就是我得到的。

[http://dyp.im/W79JdmfIk](http://dyp.im/W79JdmfIk)

这是我的活动

```
 package com.example.sqllitetest;

 import android.app.AlertDialog;
 import android.app.ListActivity;
 import android.content.Context;
 import android.content.DialogInterface;
 import android.database.Cursor;
 import android.os.Bundle;
 import android.support.v4.widget.ResourceCursorAdapter;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.*;

public class Tester extends ListActivity {

MyAdapter mListAdapter;
PlayersDBAdapter mDbHelper;
private Button button;
private Context context = this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mDbHelper = new PlayersDBAdapter(this);
    mDbHelper.open();
    Cursor myCur = mDbHelper.fetchAllPlayers();
    startManagingCursor(myCur);
    setContentView(R.layout.playertoteam);

   // registerForContextMenu(getListView());
   // ((Tester) context).setContentView(R.layout.playertoteam);
    //getListView().addFooterView(button);
    mListAdapter = new MyAdapter(Tester.this, myCur);
    setListAdapter((ListAdapter) mListAdapter);

    Button button = (Button) findViewById(R.id.alertBox);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            setResult(RESULT_OK);
            finish();
        }

    });

}

private class MyAdapter extends ResourceCursorAdapter {

    public MyAdapter(Context context, Cursor cur) {
        super(context, R.layout.playertoteam, cur);
    }

    @Override
    public View newView(Context context, Cursor cur, ViewGroup parent) {
        LayoutInflater li = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        return li.inflate(R.layout.playertoteam, parent, false);
    }

    @Override
    public void bindView(View view, Context context, Cursor cur) {
        TextView tvListText = (TextView)view.findViewById(R.id.code);
        CheckBox cbListCheck = (CheckBox)view.findViewById(R.id.checkBox1);

        tvListText.setText(cur.getString(cur.getColumnIndex(mDbHelper.KEY_NAME)));
        cbListCheck.setChecked((cur.getInt(cur.getColumnIndex(mDbHelper.KEY_ID))==1? false:true));
    }

}
} 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="6dip" >

 <Button
    android:id="@+id/alertBox"
    android:layout_alignParentBottom="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/confirm" />
  <RelativeLayout
            android:id="@+id/relativeLayout3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="top" >
            <ListView
                android:id="@android:id/list"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@id/alertBox"
                />
            <TextView
                android:id="@+id/code"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                />

              <CheckBox android:id="@+id/checkBox1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"

                />

  </RelativeLayout>

</LinearLayout> 
```

我想知道如何从行中删除按钮以及主确认按钮下方的复选框。另外我想知道这是否是做这样的事情的最佳方法，因为，再一次，我是新手，我不知道如何搜索正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:09:27.797

ResourceCursorAdapter 为 ListView 的每一行创建视图，这些视图在 newView() 方法中膨胀。由于这个原因，你在每一行都得到了按钮。Soln：创建一个单独的 xml，定义 ListView 的行布局，并在 newView() 方法中扩展这个新布局。并且在主布局中只有按钮和 ListView，即 playertoteam.xml

playertoteam.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:padding="6dip" >

<Button
    android:id="@+id/alertBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="@string/confirm" />

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_above="@id/alertBox" />

</RelativeLayout> 
```

row_layout.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="wrap_content">

  <TextView
    android:id="@+id/code"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_alignParentLeft="true"/>

  <CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:focusableInTouchMode="false" 
    android:layout_alignParentRight="true"/>

 </RelativeLayout> 
```

[您可以在此处](https://github.com/asnehal/ListViewExample.git)找到 ListView 的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:28:03.753

您可以使用 listview 的 addFooterView 方法。

```
View footerView =
((LayoutInflater)
ActivityContext.
getSystemService
(Context.LAYOUT_
INFLATER_SERVICE)).inflate
(R.layout.footer_
layout, null, false);
ListView.addFooterView
(footerView); 
```

# ruby-on-rails - 登录delay_job？

> ID：14631910
> 
> 赞同：43
> 
> 时间：2013-01-31T17:44:41.550
> 
> 标签：ruby-on-rails, ruby, logging, delayed-job, clockwork

我无法从 获得任何日志输出`delayed_job`，而且我不确定我的工作是否开始了。

这是我的Procfile：

```
web:     bundle exec rails server
worker:  bundle exec rake jobs:work
worker:  bundle exec clockwork app/clock.rb 
```

这是工作：

```
class ScanningJob
  def perform
    logger.info "logging from delayed_job"
  end

  def after(job)
    Rails.logger.info "logging from after delayed_job"
  end
end 
```

我看到发条输出到系统输出，我可以看到工作执行程序正在启动，但我从来没有看到我的日志语句被命中。我也试过`puts`了，没有用。

我的时钟文件非常简单：

```
every(3.seconds, 'refreshlistings') { Delayed::Job.enqueue ScanningJob.new } 
```

我只想看到这个工作，缺乏日志记录意味着我不能。这里发生了什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-01-31T18:02:36.340

当我需要延迟作业的日志输出时，我发现[这个问题](https://stackoverflow.com/questions/6183676/delayed-job-not-logging-in-production)很有帮助。

在`config/initializers/delayed_job.rb`我添加行：

```
Delayed::Worker.logger = Logger.new(File.join(Rails.root, 'log', 'dj.log')) 
```

然后，在我的工作中，我输出到这个日志：

```
Delayed::Worker.logger.info("Log Entry") 
```

这导致文件`log/dj.log`被写入。这适用于开发、登台和生产环境。

# c# - 根据正则表达式匹配索引插入字符串

> ID：14631911
> 
> 赞同：0
> 
> 时间：2013-01-31T17:44:50.797
> 
> 标签：c#, .net, regex

我试图在我的每个正则表达式匹配之前插入一个新行。目前我得到一个 ArgumentOutOfRangeException。我意识到对于我插入的所有新行字符（总共 4 个字符），索引需要偏移。

你们知道有什么办法吗？

谢谢！

```
string origFileContents = File.ReadAllText(path);

string cleanFileContents = origFileContents.Replace("\n", "").Replace("\r", "");

Regex regex = new Regex(@"([0-9]{4}-[0-9]{2}-[0-9]{2}_[0-9a-zA-Z]*--)", RegexOptions.Singleline);
MatchCollection matches = regex.Matches(cleanFileContents);

int counter = 0;

foreach (Match match in matches)
{
    cleanFileContents.Insert(match.Index + 4 * counter, Environment.NewLine);
    counter++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:27:51.207

为什么不只是

```
cleanFileContents = regex.Replace(
    cleanFileContents,
    Environment.NewLine + "$0"); 
```

也就是说，您的问题可能是 Environment.NewLine.Length 可能是 2，而不是 4。编辑：另外，正如 Cyborg 所指出的，Insert 不会修改字符串，而是返回一个新字符串。

顺便说一句，如果您尝试匹配文字括号，则需要转义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:34:29.833

我至少看到了这段代码的这些可识别问题。

1.  `"\r\n"`是两个字符，而不是 4。您应该使用`Environment.NewLine.Length * counter`.

2.  `cleanFileContents.Insert(...)`返回一个新字符串，它不会修改“cleanFileContents”。你需要类似的东西`cleanFileContents = cleanFileContents.Insert(...)`

建议的编辑：

```
string origFileContents = File.ReadAllText(path);

// Changed cleanFileContents to a StringBuilder for performance reasons
var cleanFileContents = New StringBuilder( origFileContents.Replace("\n", "").Replace("\r", "") );

Regex regex = new Regex(@"([0-9]{4}-[0-9]{2}-[0-9]{2}_[0-9a-zA-Z]*--)", RegexOptions.Singleline);
MatchCollection matches = regex.Matches(cleanFileContents.ToString());

int counter = 0;

foreach (Match match in matches)
{
    cleanFileContents.Insert(match.Index + Environment.NewLine.Length * counter, Environment.NewLine);
    counter++;
}

var result = cleanFileContents.ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:53:06.793

我不遵循
match.Index + 4 * counter
你知道 * 在 + 之前应用的逻辑？

与 Cyborgx37 类似 - 当我启动此
ReadAllLines 以拆分换行时未发布它可能会更快

```
Regex regex = new Regex(@"([0-9]{4}-[0-9]{2}-[0-9]{2}_[0-9a-zA-Z]*--)", RegexOptions.Singleline);
StringBuilder sbAll = new StringBuilder();
StringBuilder sbLine = new StringBuilder();
foreach (string line in System.IO.File.ReadAllLines("path"))
{
    sbLine.Append(line);
    MatchCollection matches = regex.Matches(line);

    int counter = 0;

    foreach (Match match in matches)
    {
        sbLine.Insert(match.Index + Environment.NewLine.Length * counter, Environment.NewLine);
        counter++;
    }
    sbAll.Append(line);
    sbLine.Clear();
} 
```

# java - 在 Base64 中编码使用 SHA1RSA 签名的 UTF-8 字符串，但未获得正确的结果

> ID：14631912
> 
> 赞同：0
> 
> 时间：2013-01-31T17:44:59.583
> 
> 标签：java, base64, rsa, sha1

我有这个字符串，我必须用证书和 .key 文件签名。在字符串包含拉丁字符（ñ、é、í 等）之前，我从来没有遇到任何问题。该字符串被转换为 UTF-8，然后使用 SHA1RSA 算法进行签名，以 Base64 编码结束。但是签名给了我一个奇怪的答案，并且 Base64 编码以错误的格式结尾

```
cadena = "||3.2|2013-01-25T17:24:00|ingreso|PAGO EN UNA SOLA EXHIBICION|6386.21|MXN|7408.00|No identificado|NAUCALPAN DE JUÁREZ, ESTADO DE MEXICO|CAOS640116HT5|OSCAR MARTIN CARRERA|CTO. ORADORES 33|33|CD. SATELITE|NAUCALPAN DE JUÁREZ|ESTADO DE MEXICO|MÉXICO|53100|CTO. ORADORES 33|33|CD. SATELITE|NAUCALPAN DE JUÁREZ|ESTADO DE MEXICO|MÉXICO|53100|Persona Física con Actividad Empresarial|BAÑ930616R66|BAÑOMOBIL, S.A. DE C.V.|Av. 1° de Mayo|197|San. Lorenzo|TLALNEPANTLA DE BAZ|ESTADO DE MEXICO|MÉXICO|54047|1|NO APLICA|Dominio .com|Dominio por 1 año www.sanitariosportatiles.com|586.21|586.21|1|NO APLICA|Hospedaje 2 Gb|Hospedaje 2 Gb por 1 año www.sanitariosportatiles.com|5800.00|5800.00|IVA|16.00|1021.79|1021.79||";
Signature rsa = Signature.getInstance("SHA1withRSA");
rsa.initSign(pk);

rsa.update(cadena.getBytes("UTF-8"));
signature = rsa.sign();
sello = Base64.encodeBase64String(signature); 
```

我省略了获取密钥和证书，因为此过程适用于没有这些字符的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:55:53.910

结果证明编码和签名是正确的，但是它返回了一个不应该存在的“\r\n”。所需要的只是摆脱它以使其正常工作。

# c# - 当 DropDownList 更改时，MVC2 ActionResult 未执行

> ID：14631914
> 
> 赞同：1
> 
> 时间：2013-01-31T17:45:07.540
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2

我正在学习 ASP.NET MVC 2 并遇到了一个我似乎无法弄清楚的小问题。

基本上我有一个从 Access db 填充的下拉列表，当用户选择一个值时，我想调用一个 ActionResult 将所选值作为参数传递，我试图通过使用来实现这一点`$.post`

下拉列表中填充了数据，我可以确认 javascript 函数已触发，但我的 ActionResult 中的断点仍未被命中，我将不胜感激任何建议：

**模型：**

```
public class SuppliersModel
{
    public SuppliersModel()
    {
    }

    public SuppliersModel(string id)
    {
    }

    private string id;
    public string ID
    {
        get { return id; }
        set { id = value; }
    }

    public SelectList OurSuppliers
    {
        get 
        {
            List<SelectListItem> suppliers = GetSuppliers();
            var list = new SelectList(suppliers, "Value", "Text");
            return list;
        }
    }

    public IEnumerable<string> UniqueSuppliers{get;set;}

    private List<SelectListItem> GetSuppliers()
    {
        var suppliers = new List<SelectListItem>();
        string conn = WebConfigurationManager.ConnectionStrings["connection"].ConnectionString;

        using (var connection = new OleDbConnection(conn))
        {
            connection.Open();
            string commandText = "SELECT [Supplier], [ID] FROM [Suppliers] ORDER BY [Supplier]";
            using (var command = new OleDbCommand(commandText, connection))
            {
                command.CommandType = System.Data.CommandType.Text;
                using (OleDbDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        string id = reader["ID"].ToString();
                        string supplier = reader["Supplier"].ToString();
                        suppliers.Add(new SelectListItem() { Text = supplier, Value = id });
                    }
                }
            }
            connection.Close();
            return suppliers;
        }
    }
} 
```

**控制器：**

```
public class SuppliersController : Controller
{
    public ActionResult Suppliers()
    {
        SuppliersModel model = new SuppliersModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult SuppliersById(string id)
    {
        System.Diagnostics.Debugger.Break();
        SuppliersModel model = new SuppliersModel(id);
        return View(model);
    }
} 
```

**看法：**

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <script type="text/javascript">
        $(function () {
            $('#suppliers').change(function () {
                debugger;
                $.post('@Url.Action("SuppliersById", "Suppliers")', { id: $(this).val() }, 
                function (result) {
                });
            });
        });
    </script>
    <h2>
        Suppliers</h2>
    <div>
        <%= Html.DropDownList("suppliers",Model.OurSuppliers) %>
    </div>
    <% if (Model.ID != null)
       { %>
    <table>
        <tr>
            <th>
                <h2>
                List of suppliers
                </h2>
            </th>
        </tr>
        <% foreach (var item in Model.UniqueSuppliers)
           { %>
        <tr>
            <td>
                <%: Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) %>
                |
                <%: Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })%>
                |
                <%: Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })%>
            </td>
        </tr>
        <% } %>
    </table>
    <% } %>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:13:17.847

我的 javascript 函数中存在语法错误，这修复了它：

```
<script type="text/javascript">
    $(function () {
        $('#suppliers').change(function () {
            $.post('<%=Url.Action("SuppliersById", "Suppliers")%>', { id: $(this).val() }, 
            function (result) {
            });
        });
    });
</script> 
```

# jquery - 为什么 jquery ui 的 (v1.10.0) datepicker 在 Firefox v18.0.1 中不适合我？

> ID：14631916
> 
> 赞同：1
> 
> 时间：2013-01-31T17:45:21.603
> 
> 标签：jquery, firefox, jquery-ui-datepicker, jquery-ui-selectable

我在让 jquery ui datepicker 显示在 jquery ui 可选但仅在 Firefox 中的动态添加元素上时遇到问题。

一旦选择了其中一个可选择项，就会创建一个动态创建的输入并将其附加到可选择项。在动态添加到 dom 之前，该输入被分配为日期选择器。

我用我的问题示例创建了一个[jsfiddle](http://jsfiddle.net/TG4wx/) ......它在 Chrome 中运行良好，但 Firefox 不喜欢它。“不喜欢它”是指在选择一个可选标题后单击输入时不会显示日期选择器。

这是我在上面链接到的 jsfiddle 的原始 javascript：

```
$(document).ready(function(){
    $('.selectable').selectable({
        filter: 'li',
        cancel: 'input',
        stop: function(e, ui){
            var li = $(this).find('li');

            if (li.length > 0){
                $(li).each(function(){
                    if ($(this).hasClass('ui-selected')){
                        if ($(this).find('.start_date').length == 0){
                            var datepicker = $('<input/>').prop({'readonly': true}).datepicker({ minDate: 1 });

                            $('<div/>').attr({'class': 'start_date subtitle'})
                                .append($('<label/>').css({'display': 'inline-block'}).text('Start Date:'))
                                .append(datepicker)
                                .appendTo(this)
                        }
                    } else {
                        $(this).find('.start_date').remove();
                    }
                });
            } else {
                $(this).find('li div.start_date').remove();
            }
        }
    }).disableSelection();
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:41:03.320

我认为问题在于`selectable`行为正在为其子项吞下鼠标事件，这会阻止日期选择器显示。尝试添加显式点击处理程序以显示选择器：

```
var datepicker = $('<input/>')
    .prop({'readonly': true})
    .datepicker({ minDate: 1 })
    .click(function(){ $(this).datepicker("show"); }); 
```

# .net - 找不到 Assert.Fail 和 Assert.Pass 或等效项

> ID：14631923
> 
> 赞同：77
> 
> 时间：2013-01-31T17:45:39.207
> 
> 标签：.net, xunit.net

我曾经在 NUnit 中使用过这些，它们真的很有用。知道如何做这样的事情吗？

编辑，代码示例：

```
 bool condition = false;//would be nice not to have this
        observable.Subscribe(_ =>
        {
            if (real test)
                condition= true;//Assert.Pass()
        });
        StartObservable();
        Assert.True(condition);//Assert.Fail() 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-31T17:48:59.573

该文档包括一个[比较图表](http://xunit.github.io/docs/comparisons.html)，其中包括：

> `Fail`- xUnit.net 替代方案：`Assert.True(false, "message")`

（它没有显示`Assert.Pass`，我自己也从未使用过，但我怀疑替代方法只是从测试中返回。当然，如果你想将它扔到嵌套方法调用中，那也无济于事。我的*怀疑*是它在 NUnit 中不是很常用，因此在比较图中没有。）

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2018-08-21T09:39:46.900

[xUnit docs](https://xunit.github.io/docs/comparisons.html)`Assert.Fail("messsage")`建议的替代方案

> xUnit.net 替代方案：Assert.True(false, "message")

有一个缺点——它的输出是

```
message

Expected: True
Actual:   False 
```

摆脱

> ```
> Expected: True
> Actual:   False 
> ```

不要调用`Assert.True(false, "message")`throw `Xunit.Sdk.XunitException`。
例如，创建一个类似这样的辅助方法：

```
public static class MyAssert
{
    public static void Fail(string message)
        => throw new Xunit.Sdk.XunitException(message);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-12T14:05:35.017

只需抛出一个异常即可满足这两个要求（退出嵌套循环和缺少 Assert.Fail 方法的替代方法）。唯一的问题是没有合适的基本异常（例如TestException）来使用以避免收到有关使用基本异常类的警告，因此像InvalidOperationException 这样更直接的东西可能是一个不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T03:05:22.797

获取 Pass 断言的另一种方法是创建新的断言。

```
public static class ExtraAssert
{
    public static void Pass(this Microsoft.VisualStudio.TestTools.UnitTesting.Assert assert)
    {
        return;
    }
 } 
```

但是有一个问题，因为您只能使用“那个”关键字访问该方法。

```
Assert.That.Pass(); 
```

参考：[https ://www.meziantou.net/mstest-v2-create-new-asserts.htm](https://www.meziantou.net/mstest-v2-create-new-asserts.htm)

# cocoa-touch - 使用触摸事件控制 UIImageview 动画流

> ID：14631927
> 
> 赞同：0
> 
> 时间：2013-01-31T17:45:56.023
> 
> 标签：cocoa-touch, animation, uiimageview, png

我正在使用 UIImageView 通过动画 .png 图像来模拟 3D。是否可以使用触摸事件来控制动画的流程？例如，如果我正在模拟一个盒子，我可以用手指向左还是向右旋转它？如果不能，你能指点我另一个方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:15:25.010

首先有两种方法可以做到这一点，困难的方法是使用核心动画构建立方体并在滑动或触摸时旋转它，第二种（最简单的）是将.png动画序列添加到由 UISwipeGestureRecogniser 触发的 imageView。

首先创建您的手势识别器，通常只需放入 ViewDidLoad

```
 //Implement Swipe Views
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeLeft)];
swipeRight.numberOfTouchesRequired = 1;
swipeRight.direction = UISwipeGestureRecognizerDirectionLeft;
[_imageView addGestureRecognizer:swipeRight]; 
```

然后实现您在@selector(swipeRight) 中声明的swipeRight 方法，以及您想要在滑动时播放的动画...

```
-(void)swipeRight
{
NSMutableArray *animationArray = [[NSMutableArray alloc] init];

    int animationSizeTwo = 30;

    for (int i=0; i< animationSize; i++) {

        NSString *zeros = @"000";

        if ( i >= 1000 ) {

            zeros = @"";

        }
        else if ( i >= 100 ) {

            zeros = @"0";

        }
        else if ( i >= 10 ) {

            zeros = @"00";
        }
        NSString *animationNameTwo = [NSString stringWithFormat:@"(imageName)"];

        NSString *imageName = [NSString stringWithFormat:@"%@%@%d.png", animationNameTwo, zeros, i];

        [animationArrayTwo addObject:[UIImage imageNamed:imageName]];

    }

    _imageView.animationImages = animationArray;
    _imageView.animationDuration = 1;
    _imageView.animationRepeatCount = 1;
    _imageView.image = [_imageView.animationImages lastObject];
    [_imageView startAnimating];

} 
```

现在，每当您向右滑动时，动画就会触发。您可以复制和粘贴 UIGestureRecogniser 代码并更改所有方法，以便可以双向触发。当您实现 swipeLeft 时，只需将动画序列计数更改为：

```
int animationSizeTwo = 0;

    for (int i=30; i> animationSize; i--) { 
```

这将反向旋转你的动画。

希望这对您有所帮助，并让我知道您的进展情况！吨

# c# - 使用属性使用 LINQ 查询 XML

> ID：14631928
> 
> 赞同：0
> 
> 时间：2013-01-31T17:46:01.157
> 
> 标签：c#, linq, linq-to-xml

到目前为止，我在 linq 方面做得不太好，所以试图编写 Linq 查询来检查是否存在子**主题**节点，如果 code="111" && isDisplay="Y" 或不存在。我正在使用。第二种方法中的任何条件，但我仍然是不确定。

```
static void Main(string[] args)
{
    XElement rootElement = XElement.Load("TestXML.xml");
    int StyCode = 1;
    var lv1s = from lv1 in rootElement.Descendants("Class")
               where lv1.Attribute("Code").Value.Equals("001")
               select (from ltd in lv1.Descendants("Subject")
                       where ltd.Attribute("Course").Value.Equals("Engish")
                       select GetChildFromSubject(StyCode, ltd)).FirstOrDefault();

       }

private static bool GetChildFromSubject(int styCode, XElement subject)
{
    if (styCode == 0)
        return subject.Attribute("SpeciaGuest").Value.Equals("Y");
    else
    {
        //Below is the main issue with and condition on attributes.
        return subject.Attribute("AllTeachers").Value.Equals("Y") ||
               subject.Elements("Topic").Attributes("Code")
               .Any(x => x.Value.Equals("111")) &&       subject.Elements("Topic").Attributes("isDisplay")
                        .Any(y => y.Value.Equals("Y"));
    }
} 
```

下面是 XML 文件

```
<Class Code="002">
    <Subject Course="Math" AllTeachers='Y' SpeciaGuest='N'>
      <Topic Code="1" isDisplay="Y">LAW1</Topic>
      <Topic Code="2" isDisplay="Y">
        LAW2
      </Topic>
      <Topic Code="3" isDisplay="N">
        LAW3
      </Topic>
    </Subject>
    <Subject Course="Engish" AllTeachers='N' SpeciaGuest='Y'>
      <Topic Code="111" isDisplay="Y">LAW1</Topic>
    </Subject>
    <Subject Course="History" AllTeachers='Y' SpeciaGuest='Y'></Subject>
  </Class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:06:44.127

根据您的评论：

> Magnum : 如果 code="111" && isDisplay="Y" 我想检查主题节点是否存在

如果您尝试在 code=111 且 isDiaply=Y 的情况下返回 TOPIC 节点，那么这里是一次 LINQ 查询：

```
List<XElement> subjects = template.Descendants("Subject")
            .Elements("Topic")
                .Where(elementNode => elementNode.Attribute("Code").Value == "111" && elementNode.Attribute("isDisplay").Value == "Y").ToList(); 
```

# sharepoint - 我可以从在沙盒（部分信任）模式下运行的 CRM 2011 插件创建共享点文件夹吗？

> ID：14631930
> 
> 赞同：2
> 
> 时间：2013-01-31T17:46:06.580
> 
> 标签：sharepoint, sandbox, crm

我可以从在沙盒（部分信任）模式下运行的 CRM 2011 插件创建共享点文件夹吗？当不在沙盒隔离模式下运行时，有几种方法可以做到这一点，但在部分信任下运行时则不行。

```
WebRequest request = WebRequest.Create(FolderName);
request.Credentials = credentials;
request.Method = "MKCOL";
WebResponse response = request.GetResponse();
response.Close();

SPSite site = new SPSite(url);
SPWeb web = site.OpenWeb();
SPFolder folder = web.GetFolder(url + @"/" + "Contact/");
SPFolder createdFolder = folder.SubFolders.Add(FolderName);

HttpWebRequest httpreq = (HttpWebRequest)WebRequest.Create(FolderName);
httpreq.Credentials = credentials;
httpreq.Method = "MKCOL";
WebResponse response = httpreq.GetResponse();

Dws dwsService = new Dws();
dwsService.Credentials = credentials;
string dwsurl = url + "/_vti_bin/dws.asmx";
dwsService.Url = dwsurl;
string FolderName = "Contact/" + System.Uri.EscapeDataString(listName);
 string result = dwsService.CreateFolder(FolderName); 
```

# tridion - SDL Tridion 中的多页发布

> ID：14631933
> 
> 赞同：2
> 
> 时间：2013-01-31T17:46:15.867
> 
> 标签：tridion, tridion2009

如何使用 SDL Tridion 2009 GUI 一次将一个页面发布到多个子出版物？

这是我想要实现的一个示例：我有一个名为“Global”的出版物，一个名为 home.aspx 的页面，然后是两个子出版物（英国和美国）。我想同时发布两个子 home.aspx 页面，可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:03:52.433

您需要将您的父（全局）发布与子页面也需要发布的发布目标相关联。

不幸的是，这意味着您的“全球”页面也将发布到服务器。您可以围绕此编写一个**自定义解析器**以从已发布的 zip 包中删除该页面，但这需要一些开发工作来实现。

Bart Koopman 写了一篇文章，解释了如何在这里做到这一点：[http ://www.tridiondeveloper.com/no-faking-publish-from-a-parent-publication-without-faking-a-publication-target](http://www.tridiondeveloper.com/no-faking-publish-from-a-parent-publication-without-faking-a-publication-target)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T18:07:47.153

要通过选择发布母版页来发布子出版物中的页面，您可以使用事件系统。由于您使用的是 Tridion 2009，因此您需要使用 COM+ 事件系统（不能使用新的 TOM.NET）。

逻辑应如下所示：您可能希望将发布元数据模式放在父发布上，该模式将指定此级联发布应适用的子发布的 ID（或创建配置组件）。您还需要为子发布指定要发布到的发布目标。

在 OnPublishPre（或 Post）事件中，使用 TOM API 获取子出版物中的页面并执行 page.Publish()。

这里的优点是内容管理者/发布者不必担心必须进入“高级”选项卡并选择其他选项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T17:50:15.743

如果您想在多个子出版物中发布同一页面，请单击发布对话框的高级选项卡，然后选中*“也在子出版物中发布”*复选框。

[在这篇文章http://www.tridiondeveloper.com/no-faking-publish-from-a-parent-publication-without-faking-a-publication-target](http://www.tridiondeveloper.com/no-faking-publish-from-a-parent-publication-without-faking-a-publication-target)中有更多关于这种方法的信息。

根据您的父出版物是否应该实际发布，您可能需要考虑John Winter 或 Nickoli Roussakov 在本页其他答案中提供的*自定义解析器*或*事件系统解决方案之一。*

# asp.net-mvc - 如何在 ASP.NET MVC 中应用条件验证“如果另一个属性为空则需要”？

> ID：14631935
> 
> 赞同：1
> 
> 时间：2013-01-31T17:46:20.020
> 
> 标签：asp.net-mvc, validation, model, conditional

是否有一种方法可以为我的属性实现必需的属性`virtualPassword`，但条件是否`Password`为 null？

这是我的代码。

```
[DataType(DataType.Password)]
[LocalizedDisplayName("UserPassword", NameResourceType = typeof(Languages.Names))]
[Required(ErrorMessageResourceName = "Required", ErrorMessageResourceType = typeof(Languages.Validations))]        
public string Password { get; set; }

private string _virtualPassword = null;
[NotMapped]
[DataType(DataType.Password)]
[LocalizedDisplayName("UserPassword", NameResourceType = typeof(Languages.Names))]
[StringLength(12, MinimumLength = 6, ErrorMessageResourceName = "StringLengthBetween", ErrorMessageResourceType = typeof(Languages.Validations))]
public virtual string virtualPassword { get { return _virtualPassword; } set { _virtualPassword = value; } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:49:00.293

您可以通过在模型中实现 IValidatableObject 来实现自定义验证。

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
var issues = new List<ValidationResult>();
if(issue_exist_in_model) //implement whatever condition is applicable
{
    issues.Add(new ValidationResult("Message for issur that exist"));
}

  return issues;
} 
```

# php - PHP 在“while 循环”进行时侦听按钮/连接

> ID：14631937
> 
> 赞同：0
> 
> 时间：2013-01-31T17:46:24.913
> 
> 标签：php, loops, connection, while-loop, signals

我需要在 PHP 中制作将在 while 循环中工作的应用程序，并监听连接，如果我发送停止信号，它将停止 while 循环。

例如：

```
<?PHP
set_time_limit(0);
$i=0;
while ($i <= 2000){

// Listen for connection = Kill signal
// For example:
//   if signal is received{
//   break; 
//   }

$i++; // Count
usleep(2000);
}

?> 
```

因此，如果我有带有停止按钮的 Web 界面，我希望能够在单击该停止按钮时停止 while 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:47:51.510

PHP 在服务器端进行评估，因此客户端绑定不能在 PHP 中的控制流中发出更改。

您最好的选择是在 Javascript 中实现类似的东西，将按钮按下绑定到一个已定义的事件，该事件将在那里停止循环。

# c++ - typedef & 函数指针

> ID：14631938
> 
> 赞同：0
> 
> 时间：2013-01-31T17:46:26.177
> 
> 标签：c++, typedef

我最近看到一些代码，我特别不清楚类似的函数指针？

以下是函数指针。

我也对以下三个函数感到困惑，参数类型是“cairo_output_stream_t”，但 cairo_output_stream_t 结构包含三个函数指针的成员。我不明白下面的功能在做什么。

```
typedef cairo_status_t
(*cairo_output_stream_write_func_t) (cairo_output_stream_t *output_stream,
                                     const unsigned char   *data,
                                     unsigned int           length);

typedef cairo_status_t
(*cairo_output_stream_flush_func_t) (cairo_output_stream_t *output_stream);

typedef cairo_status_t
(*cairo_output_stream_close_func_t) (cairo_output_stream_t *output_stream);

struct _cairo_output_stream {
    cairo_output_stream_write_func_t write_func;
    cairo_output_stream_flush_func_t flush_func;
    cairo_output_stream_close_func_t close_func;
    unsigned long                    position;
    cairo_status_t                   status;
    int                              closed;
}; 
```

cairo_status_t 是一个枚举

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:50:12.073

基本上正在做的是一种类似 C 的方式来模拟 C++ 的`this`指针......你将一个指针`struct`作为第一个参数传递给函数调用，然后你可以从该指针调用结构的“方法”（在这种情况下，它们是函数指针）和/或访问结构的数据成员。

因此，例如，您可能拥有使用这种编程风格的代码，如下所示：

```
struct my_struct
{
    unsigned char* data;
    void (*method_func)(struct my_struct* this_pointer);
};

struct my_struct object;
//... initialize the members of the structure

//make a call using one of the function pointers in the structure, and pass the 
//address of the structure as an argument to the function so that the function
//can access the data-members and function pointers in the struct
object.method_func(&object); 
```

现在`method_func`可以访问实例的`data`成员，就像 C++ 类方法可以通过指针`my_struct`访问其类实例非静态数据成员一样。`this`

# sql-server - 用于 DACPAC 部署的 SQL Azure 和 Powershell

> ID：14631941
> 
> 赞同：11
> 
> 时间：2013-01-31T17:46:32.607
> 
> 标签：sql-server, powershell, azure-sql-database, dac, azure-powershell

我正在使用 powershell 将基于 Visual Studio 2012 构建的 dacpac 部署到 SQL Azure，并遇到了我认为可能与某些版本不兼容有关的问题。当我从 Visual Studio 执行发布时，发布工作正常，但当我使用 powershell 执行发布时会引发异常。

这是我在 Powershell 中所做的

```
[System.Reflection.Assembly]::Load("Microsoft.SqlServer.Management.Sdk.Sfc, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91") | out-null
[System.Reflection.Assembly]::Load("Microsoft.SqlServer.Smo, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91") | out-null
[System.Reflection.Assembly]::Load("Microsoft.SqlServer.ConnectionInfo, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91") | out-null
[System.Reflection.Assembly]::Load("Microsoft.SqlServer.Management.Dac, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91") | out-null

Trap 
{  
  PrintException($_.Exception);
  $fileStream.Close()  
  return;  
}

$sqlServerFullName = $sqlServerName + ".database.windows.net"
$serverConnection = New-Object Microsoft.SqlServer.Management.Common.ServerConnection($sqlServerFullName, $adminLogin, $admingPwd)
$serverconnection.Connect()

$dacstore = New-Object Microsoft.SqlServer.Management.Dac.DacStore($serverConnection)
$fileStream = [System.IO.File]::Open($dacpacPath,[System.IO.FileMode]::OpenOrCreate)

Write-Host "Reading contents from $dacpacPath..."
$dacType = [Microsoft.SqlServer.Management.Dac.DacType]::Load($fileStream) 
```

上面代码中的最后一行是由于以下错误（内部异常值）而崩溃并且没有继续进行的原因

```
The stream cannot be read to construct the DacType.

There is an error in XML document (2, 2).

<DacType xmlns='http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/0
2'> was not expected. 
```

这是我正在使用的 powershell ISE 的 $PSVersionTable

```
Name                           Value                                           
----                           -----                                           
PSVersion                      2.0                                             
PSCompatibleVersions           {1.0, 2.0}                                      
BuildVersion                   6.1.7601.17514                                  
CLRVersion                     4.0.30319.17929                                 
WSManStackVersion              2.0                                             
PSRemotingProtocolVersion      2.1                                             
SerializationVersion           1.1.0.1 
```

想知道当我使用 Visual Studio 2012 部署它时使用 Powershell 进行部署时可能会导致此问题的原因

PS - 使用相同的脚本和我在互联网上找到的 dacpac 文件，powershell 部署工作正常，该文件显然是针对 SQL 2005 版本的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T17:56:30.150

如果您安装了最新的 SSDT 2015 ( [https://msdn.microsoft.com/en-us/mt186501](https://msdn.microsoft.com/en-us/mt186501) )。我强烈推荐它，因为它有很多有用的发布配置文件选项，可以使用 Visual Studio 生成。

您可以使用以下内容通过 Powershell 将文件发布到 Azure

```
$sqlpackage = "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Microsoft\SQLDB\DAC\120\sqlpackage.exe"

$dbserver = "<Azure DB Location>"  
$database = "<name of DB on Server>"

# UNC Paths

$dbProfile = "<Path to your Publish Profile>"
$mydacpac = "<location of the dacpac>" 

# Publish Command

& $sqlpackage /Action:Publish /tsn:$dbServer /tdn:$database /sf:$mydacpac/pr:$dbProfile /variables:myVariable=1 
```

PS : & 像 Pradebban 提到的 Invoke-Expression 一样工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T16:18:37.543

尝试使用 sqlpackage.exe 和 Publish.xml 发布

```
Invoke-Expression = "C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin\sqlpackage.exe /Action:Publish /Sourcefile:<.dacpac file_path> /pr:'<Publish.xml>'" 
```

# c# - 在负载均衡器后面构建 URL

> ID：14631942
> 
> 赞同：2
> 
> 时间：2013-01-31T17:46:34.347
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用以下方式构建 URL：

```
String url = Url.Action(ViewContext.RouteData.Values["action"].ToString(),
                               ViewContext.RouteData.Values["controller"].ToString(),
                                                             new RouteValueDictionary()
                                                                 {
                                                                     {"x", "val"},
                                                                     {"y", "val2"
                                                                 },
                               Request.Url.Scheme
                                                             ); 
```

生成的 URL 是这样的：http: [//xyz.net :8081/abc/lang/controller/action](http://xyz.net:8081/abc/lang/controller/action)

该环境在负载均衡器后面使用（也使用另一个端口）。

所以应该更改url的“ [http://xyz.net:8081/abc ”部分（该部分可以在web.config中配置）。](http://xyz.net:8081/abc)

解决这个问题的最佳方法是什么？

# c# - Mono.Options：检查是否给出了无效的选项

> ID：14631945
> 
> 赞同：2
> 
> 时间：2013-01-31T17:47:07.320
> 
> 标签：c#, mono

我已经定义

```
var p = new OptionSet () {
 // various options defined
}; 
```

然后我

```
p.Parse(args) 
```

如果我用

```
myprogram --thisOptionIsNotDefined 
```

我想显示帮助消息，而不是继续。但是 Parse() 在遇到无效选项时不会抛出 OptionException。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:33:46.513

您可以查询返回`OptionSet.Parse()`以查找任何无效参数。

从 NDesk 选项集[文档](http://www.ndesk.org/doc/ndesk-options/NDesk.Options/OptionSet.html)：

> OptionSet.Parse(IEnumerable)，返回一个没有被注册的 NDesk.Options.Option 匹配的所有参数的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T19:20:36.047

`OptionSet.Parse()`返回任何未处理的参数。但是请注意，这也可能包括程序的任何实际（非选项）参数，例如输入文件。在这种情况下，您不能只检查是否没有返回任何内容。

例如解析以下`args`将返回`["input.txt", "--thisOptionIsNotDefined"]`。

```
myprogram input.txt --thisOptionIsNotDefined 
```

为了解决这个特殊问题，我写了一个扩展方法`p.ParseStrict(args)`。它只是检查解析后没有未处理的选项（考虑`--`到）。

```
public static class MonoOptionsExtensions
{
    public static List<string> ParseStrict(this OptionSet source, IEnumerable<string> arguments)
    {
        var args = arguments.ToArray();
        var beforeDoubleDash = args.TakeWhile(x => x != "--");

        var unprocessed = source.Parse(beforeDoubleDash);

        var firstUnprocessedOpt = unprocessed.Find(x => x.Length > 0 && (x[0] == '-' || x[0] == '/'));
        if (firstUnprocessedOpt != null)
            throw new OptionException("Unregistered option '" + firstUnprocessedOpt + "' encountered.", firstUnprocessedOpt);

        return unprocessed.Concat(args.SkipWhile(x => x != "--").Skip(1)).ToList();
    }
} 
```

# php - strtotime 翻译

> ID：14631947
> 
> 赞同：0
> 
> 时间：2013-01-31T17:47:09.847
> 
> 标签：php, wordpress, strtotime, strftime

处理我必须将语言环境转换为法语的 Wordpress 主题。

```
 $data_event     = get_post_meta($post->ID, 'event_date_interval', true);
    $time           = strtotime($data_event);
    $pretty_date_yy = date('Y', $time);
    setlocale (LC_ALL, "fr_FR");
    $translate_fr  = strftime("%h", strtotime($data_event));
    $pretty_date_M = htmlentities($translate_fr);
    $pretty_date_d  = date('d', $time); 
```

这工作正常，它显示了所有内容（例如，现在我们在二月，所以它显示了 FÉVR）

但是我的问题在于我希望它显示 FÉV。而不是 FÉVR。这个缩写可以改吗？

**编辑：**解决方案是创建一个数组并设置我想要的特定名称。它没有正确编码 utf8_encode 添加。谢谢菲克斯！

```
 $data_event     = get_post_meta($post->ID, 'event_date_interval', true);
    $time           = strtotime($data_event);
    setlocale (LC_ALL, "fr_FR");
    $pretty_date_yy = date('Y', $time);
    $pretty_date_d  = date('d', $time);
    $id = intval(strftime("%m", strtotime($data_event))) - 1;
    $abr_map = array(
      'Jan',
      'Fév',
      'Mar',
      'Avr',
      'Mai',
      'Juin',
      'Juil',
      'Aout',
      'Sept',
      'Oct',
      'Nov',
      'Déc'
    );
    $translate_fr = htmlentities(utf8_decode($abr_map[$id]));
    $pretty_date_M = $translate_fr; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:08:12.407

一种方法是使用 PHP`substr`函数，如下所示：

```
$translate_fr  = substr(strftime("%h", strtotime($data_event)), 0, 3); 
```

**编辑：** 如果并非所有月份都应缩写为三个字符，则可以使用关联数组作为地图：

```
$abr_map = array(
  'JANV' => 'Jan',
  'FÉVR' => 'Fév',
  'MARS' => 'Mar',
  'AVRI' => 'Avr',
  'MAI'  => 'Mai',
  'JUIN' => 'Juin',
  'JUIL' => 'Juil',
  'AOUT' => 'Aout',
  'SEPT' => 'Sept',
  'OCTO' => 'Oct',
  'NOVE' => 'Nov',
  'DÉCE' => 'Déc'
); 
```

或者使用`intval`and `strftime`s`%m`格式化程序为索引数组提供整数“键”：

```
$id = intval(strftime("%m", strtotime($data_event))) - 1;

$abr_map = array(
  'Jan',
  'Fév',
  'Mar',
  'Avr',
  'Mai',
  'Juin',
  'Juil',
  'Aout',
  'Sept',
  'Oct',
  'Nov',
  'Déc'
); 
```

要在函数中使用地图，您可以使用

```
$translate_fr = htmlentities(utf8_decode($abr_map[$id])); 
```

或者使用`htmlentities`内置编码器：

```
$translate_fr = htmlentities($abr_map[$id], ENT_COMPAT, 'UTF-8'); 
```

# windows - 启动批处理文件后查找 Rar 文件的真实位置

> ID：14631948
> 
> 赞同：0
> 
> 时间：2013-01-31T17:47:12.793
> 
> 标签：windows, batch-file, rar

想想我有一个名为“Target.rar”的压缩文件，它的位置是桌面，里面我放了一个批处理脚本。当我打开 rar 文件（不解压）时，我可以看到里面的文件。如果我双击我的批处理脚本，winRAR首先将所有文件提取到临时文件夹中，然后从那里运行我的批处理脚本，所以根目录将是临时文件夹，但我需要在.rar文件位置上做一些事情（这里是桌面）。

如何获取 Rar 文件的真实位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:05:11.450

如果您确信不会有任何其他同名文件，您可以搜索 rar 文件。

```
dir /b /s C:\Target.rar 
```

显然，如果您知道要查看的深度，则可以缩小搜索路径并节省一些时间。

如果你知道它至少会在下面`C:\Users\%username%`那么你可以使用

```
dir /b /s C:\Users\%username%\Target.rar 
```

# ios - 一个接一个地执行动画，被 KVO 命中（在异步 URLRequest 之后）

> ID：14631949
> 
> 赞同：0
> 
> 时间：2013-01-31T17:47:20.533
> 
> 标签：ios, objective-c, key-value-observing, uiviewanimation

我想`UIViews`根据传入的数据动态插入动画。

我发送两个异步 URLRequest 并从另一个线程取回接收到的数据。

我正在观察一个属性，该属性会动态填充来自不同请求的数据。所以 KVO 给我发消息，可能是直接一个接一个。

使用第一条传入消息，我启动了一些相关动画。在动画期间，它经常发生，新数据到达并向我的观察者发送消息。然后我想等到动画结束并为新数据启动动画。

我正在寻找一个不错的实现，而不是带有 while 循环的东西，等到 bool 发生变化。

编辑： **考虑到我不能说，哪些数据首先出现。所以我不能将动画方法定义为第一个。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:05:46.513

如何创建一个可变数组作为动画的 kvoToDoList。将启动动画所需的任何信息放入其中（例如触发 kvo 的对象）。

然后当观察到 kvo 时，将对象添加到数组中并调用如下动画函数：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    self.kvoToDoList insertObject:object atIndex:0];
    // not sure here what you need to remember in order to do the animation, let's say it's just the object
    [self doAnimations];
}

- (void)doAnimations {

    if (self.kvoToDoList.count == 0) return;
    id object = [self.kvoToDoList lastObject];  // FIFO since we insert at index 0
    [self.kvoToDoList removeLastObject];

    [UIView animateWithDuration:someDuration delay:0.0 options:someOptions animations:^{
        // do animations here based on object
    } completion:^(BOOL finished) {
        // call this recursively, but performSelector so we don't wind up the stack
        [self performSelector:@selector(doAnimations) withObject:nil afterDelay:0.0];
    }];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:00:29.680

如何将传入的视图添加到 mutableArray，然后使用如下内容：

```
-(void) animateView:(UIView *)viewToAnimate{    

    [UIView animateWithDuration:0.5 animations:^{
        viewToAnimate.alpha = 0;
    }
                 completion:^(BOOL finished){
                     [_mutableArrayOfAnimationViews removeObject: viewToAnimate];
                     if ([_mutableArrayOfAnimationViews count] > 0) {
                         UIView *newAnimationView = [_mutableArrayOfAnimationViews objectAtIndex:0];
                         [self animateView: newAnimationView];
                     }
                 }];   
} 
```

然后你还可以检查视图何时进来，数组是否已经为空，如果是，则调用上述方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:19:55.427

用一个好主意回答我自己的问题：
*您如何看待 executionQueue 或 executionBlock？*

我想，当一些动画正在进行时，我将执行代码保存到一个块变量中。在动画完成块中，我查看是否存在有效的执行块。

如果有，执行，如果没有，什么也不做。

当异步消息进来时，我还需要保存要加载的块的动画状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T17:52:52.140

也许在第一个动画的完成例程中发布通知：

```
UIView animateWithDuration:delay:options:animations:completion: 
```

# jquery - 使用浏览器后退按钮反转 AJAX 调用

> ID：14631956
> 
> 赞同：0
> 
> 时间：2013-01-31T17:47:31.853
> 
> 标签：jquery, ajax

我目前正在建立一个新的投资组合网站。我目前正在使用 Isotope 来布局我的投资组合项目，同时使用 AJAX 加载详细信息。我正在利用 CCS3 过渡为“细节”内容添加一些不错的效果/过渡。单击投资组合项会淡出主投资组合网格，然后将其替换为工作详细信息页面。按照我在网上找到的一些东西，这是我目前正在工作的东西。

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('.item-wrapper a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html .work-detail';
        $('.site-container').load(toLoad)
    }                                           
});

$('.item-wrapper a').click(function(){

    var toLoad = $(this).attr('href')+' .work-detail';
    $('.home').addClass('homeFade');
    setTimeout(loadContent, 900);
    $('#load').remove();
    $('.site-container').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn('fast');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('.site-container').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('.work-detail').fadeIn('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('fast');

    }
    setTimeout(workFadeUp, 1300);
    function workFadeUp() {
        $('.work-detail').addClass('work-detail-show');

    }
    return false;

}); 
```

我最初遇到了一些问题，`$('.work-detail').addClass('work-detail-show');`因为我试图将它作为回调函数添加到，`showNewContent()`但它似乎表现得好像`.work-detail` 还不可用，所以经过大量的试验/错误后，我在最后延迟了它.

基本上它的表现是我想要的，但现在是在这一点上，在我头上的部分。我如何才能将其编程到用户按下浏览器后退按钮的位置，这个 AJAX 调用以某种方式被反转......淡出工作细节并淡出投资组合网格......在更新地址栏的同时？

我已经查看了 History.js，但在阅读自述文件时，我有点像头灯中的鹿。

我绝对不是 jQuery/AJAX 大师，但我愿意挖掘……感觉就像我撞到了一块石头。

这是我的开发网站[http://bit.ly/U38SFB的链接](http://bit.ly/U38SFB)

此外，考虑采用非 AJAX 路线，因为 AJAX 并没有真正增强可用性/功能，只是提供了“酷加载”因素，我确实创建了一个假 AJAX 版本，它运行相同的 CSS 转换并实际链接到页面。

```
$(window)
.load(function () {

$('.work-detail')
    .addClass('work-detail-show');
});

$("a.fakeajax")
.click(function () {
$('.home')
    .addClass('homeFade');
var href = $(this)
    .attr('href');
// Delay setting the location for one second
setTimeout(function () {
    window.location = href
}, 700);

return false;
}); 
```

但仍然有同样的问题，当按下浏览器后退按钮时，添加的用于淡出投资组合网格的类仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:36:48.377

你所能做的就是：

```
window.onbeforeunload = function() {
    return "You are leaving the page"
} 
```

您可以放置​​一些其他代码，例如，向服务器发送请求以保存一些数据......但是，最后，所有这些都是通过确认弹出窗口来惹恼客户端。

您无法控制浏览器按钮。他们会抛出保存的 url 的历史并加载它们。此外，您不能修改 window.history 条目。

# asp.net - Style.Add 无法在 asp.net 代码中显示无/内联

> ID：14631958
> 
> 赞同：0
> 
> 时间：2013-01-31T17:47:39.140
> 
> 标签：asp.net, css, vb.net

在单击按钮时，我试图将样式应用于两个按钮以实质上将它们交换出来 - 将一个设置为 display:inline，另一个设置为 display:none，但是，Control.Style.Add("display","none ") 和 Control.Style.Add("display","inline") 不起作用。

但是，如果我设置了看似任何其他样式设置，它就可以工作。Control.Style.Add("background","#ff0000") 有效，Style.Remove("whatever") 和 Style.Clear()

我的功能是用户控件内的一个简单按钮：

```
Protected Sub SimpleButton_Click(sender As Object, e As System.EventArgs)
    Me.AnotherTextBox.Text = ""  ' WORKS!
    Me.SimpleButton.Style.Remove("display")
    Me.SimpleButton.Style.Add("display", "none")
    Me.SimpleButton.Style.Add("background", "#ff0000")  ' WORKS!
    Me.AnotherSimpleButton.Style.Remove("display")
    Me.AnotherSimpleButton.Style.Add("display", "inline")

End Sub 
```

我的页面代码：

```
 <asp:LinkButton CausesValidation="false" Style="padding: 0px 4px; color: GrayText; font-weight: bold;" ID="AnotherSimpleButton" runat="server" Text="Add" Enabled="false"></asp:LinkButton>
           <asp:LinkButton CausesValidation="false" Style="padding: 0px 4px; color: Blue; font-weight: bold;display:none" ID="SimpleButton" runat="server" Text="Add" OnClick="SimpleButton_Click"></asp:LinkButton> 
```

我尝试过使用和不使用上述 Style.Remove("display")，以及使用 Style.Clear() 并重建整个样式 - 仍然没有骰子。展示风格有什么特别之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:59:31.220

第一行没有 Handles 语句，即它应该说：

```
Protected Sub SimpleButton_Click(sender As Object, e As System.EventArgs) Handles SimpleButton.click 
```

可能是在 Page.Load 中设置了 AnotherTextBox.Text 和 Me.SimpleButton.Style.Add ，这就是它们似乎起作用的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:12:31.873

我解决了自己的问题——当然是用户错误。与稍后的页面事件相关联的功能是向这些按钮添加“显示”样式，这就是为什么只有“显示”css 不起作用的原因——它只是被覆盖了。（这是我忽略的一个主要线索......）

# javascript - 由 alert() 修复的 JavaScript 方法处理

> ID：14631967
> 
> 赞同：0
> 
> 时间：2013-01-31T17:48:04.617
> 
> 标签：javascript, swt

我有 SWT 应用程序，它使用[地图服务 API](http://api4.mapy.cz)（特别是[http://mapy.cz](http://mapy.cz)）来获取图像作为基于提供的地图数据的一些附加绘图的背景。

在 SWT GC 实例制作浏览器组件屏幕截图之前，我试图从地图图层中隐藏控件，以使其尽可能干净。此功能由服务的 JS API 以这种方式提供：

```
function hideControls() {
    var controls = map.getControls();
    for (var i = controls.length; i > 0; i--) {
        map.removeControl(controls[i]);
    }
    //alert('test');
} 
```

通过从控制台调用函数，这**在所有桌面浏览器中绝对完美无缺。**`hideControls()`

但是如果该方法是由 SWT 浏览器组件调用的

```
browser.evaluate("hideControls();"); 
```

**它只是在 alert() 函数（如现在所评论的那样）被取消注释**之前不起作用****。**然后显示警报对话框并按应有的方式隐藏控件。**

 **知道为什么`alert()`方法调用会导致该 JavaScript 函数正常工作吗？

**编辑**

一些额外的代码上下文

```
browser.evaluate("hideControls();");
// ugly ie scroll bar force workaround
// calls JS methods which returns size of map content in browser component
Double mapWidth = (Double) browser.evaluate("return getSizeX();");
Double mapHeight = (Double) browser.evaluate("return getSizeY();");
// creates new canvas
GC gc = new GC(browser);
// do the screenshot
capturedImage = new Image(display, mapWidth.intValue(), mapHeight.intValue());
gc.copyArea(capturedImage, 0, 0);
// cleanout
gc.dispose(); 
```

用于地图大小计算的 JavaScript 方法（由地图服务的 JS API 提供）

```
function getSizeX() {
    return map.getSize().x;
}
function getSizeY() {
    return map.getSize().y;
} 
```

**编辑2**

经过一些更深入的调试后，从地图层中删除控件的方法是

```
SMap.prototype.removeControl = function (a) {
    var b = this.controls.indexOf(a); 
    - 1 != b && ((a = a.getContainer()) && this.controlLayer.removeItem(a), this.controls.splice(b, 1))
}; 
```

例如（用于 HUD 控制）

```
SMap.Layer.HUD.prototype.removeItem = function (a) {
    a.parentNode.removeChild(a)
}; 
```

这意味着它直接更改 DOM 树，尽管它不是异步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:10:22.597

这里有一个明显的效果，指向你`alert`有竞争条件的方向，阻塞`alert`调用允许另一个执行的“线程”赶上。

因此，您可能想查看代码执行的顺序，例如使用`console.log`throughout 进行跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:39:06.680

正如 Sean Kinsey 暗示的那样，这确实是浏览器组件的问题，需要停止直到 JavaScript 线程完成所有必要的步骤。

我找到了解决方法，因为在 SWT GUI 组件中必须自己处理它们的事件，尽管有可能在 JavaScript 完成之前停止浏览器。

```
browser.evaluate("hideControls();");
for(int i = 0; i < 20; i++) {
    if(!display.readAndDispatch()); display.sleep();
} 
```

这是一个丑陋的解决方法，但是浏览器进行一些微不足道的 DOM 操作的 20 个“滴答”应该就足够了（我希望如此）。**

# java - 将行添加到 DefaultTableModel

> ID：14631968
> 
> 赞同：1
> 
> 时间：2013-01-31T17:48:08.210
> 
> 标签：java, swing, jtable, defaulttablemodel

[http://codepaste.net/ujhdq2](http://codepaste.net/ujhdq2)

```
 private Connection Econn;
    private DefaultTableModel examTable = new DefaultTableModel();
    public StudentInfoFrame(int eid) {
        initComponents();
        this.e_id = eid;
        try
        {
            jTable2.getParent().setBackground(Color.black);
            SimpleDataSource.init();
            Econn = SimpleDataSource.getConnection();
            jTable2.setModel(examTable);
            retrieveExams();
        }
        catch(SQLException | ClassNotFoundException e)
        {
            System.out.println(e);
        }
    }   

private void retrieveExams()
    {
        try
        {
            Statement stat = Econn.createStatement();
            String query = "SELECT date, name,forename,surname,status,Exam "+
            "FROM studentexam sx INNER JOIN Exam e ON sx.ex_id = e.ex_id " +
            "INNER JOIN employee em ON e.head = em.e_id WHERE st_id = "+this.e_id;
            ResultSet result = stat.executeQuery(query);
            if(result.first())
            {
            while(result.next())
            {
                String headname = result.getString("forename")+" "+result.getString("surname");
                String name = result.getString("name");
                int status = result.getInt("status");
                String pres;
                if(status == 1)
                {
                    pres = "Yes";
                }
                else
                {
                    pres = "No"; 
                }
                String exam;
                if(result.getInt("Exam") == 1)
                {
                    exam = "Yes";
                }
                else
                {
                    exam = "No";
                }
                Date date = result.getDate("date");
                int day = date.getDay();
                int year = date.getYear()+1900;
                int month = date.getMonth()+1;
                String datum = year+"-"+month+"-"+day; 
                int row = examTable.getRowCount()+1;
                examTable.insertRow(row, new Object[] { name,headname,datum, exam,pres });
            }
            }

        } 
```

这给了我这个错误：

线程“AWT-EventQueue-0”java.lang.ArrayIndexOutOfBoundsException 中的异常：1 > 0。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:58:57.620

`DefaultTableModel#insertRow`在给定索引处插入一个条目。无法插入超出模型当前行数的条目

代替

```
examTable.insertRow(row, new Object[] { name,headname,datum, exam,pres }); 
```

和

```
examTable.addRow(new Object[] { name,headname,datum, exam,pres }); 
```

看看这些行：

```
if (result.first()) {
   while(result.next()) { 
```

您`SQL`会建议您期望从查询中返回一条记录。但是，通过调用`ResultSet#first`，光标会前进到第一个可能的行之外，因此您的`while`循环永远不会进入。相反，您可以将这些行替换为：

```
if (result.next()) { 
```

* * *

除此之外，使用 a`PreparedStatement`而不是 a`Statement`来防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T17:59:10.217

代替

```
int row = examTable.getRowCount()+1; 
```

和

```
int row = examTable.getRowCount(); 
```

Java中的一切都是基于0的索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-16T23:25:38.420

旧线程但未答复。我就是为了这个而注册的。
每次更新（添加、插入、删除）表模型时：

```
examTable.addRow(new Object[] { name,headname,datum, exam,pres }); 
```

您需要使用更新的模型刷新表：

```
jTable2.setModel(examTable); 
```

根据我的经验，这不会自动发生。

# json - 在 Apache CXF 中使用动态 Jackson Mix-ins

> ID：14631972
> 
> 赞同：1
> 
> 时间：2013-01-31T17:48:15.340
> 
> 标签：json, rest, cxf, jackson, jax-rs

我使用 Jackson 作为 Apache CXF 的 JSON 提供程序。我想使用 Jackson mix-ins 来塑造 REST 控制器返回的 JSON 结构。混合将应用于域对象（未注释）以在序列化期间忽略某些属性。

所有 mix-ins 示例都处理它们的编程应用程序，您可以在其中创建一个 ObjectMapper 对象并在运行时对其应用 mix-ins。在我的 REST 层中，我没有以编程方式使用 Jackson。它被注册为 CXF 的 JSON 提供程序（通过蓝图 XML - 这是 OSGI 环境）。

我的问题是如何将混音应用到杰克逊，而不必显式创建 ObjectMapper 并在其上调用 writeValue()。此外，如何动态应用混合以允许 REST 控制器根据请求参数返回同一域对象的不同表示？

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:25:06.577

检查[JacksonJsonProvider](http://fasterxml.github.com/jackson-jaxrs-json-provider/javadoc/2.1.1/com/fasterxml/jackson/jaxrs/json/JacksonJsonProvider.html)上的 Javadoc ：

> 可以通过多种方式配置要使用的 ObjectMapper：
> 
> *   通过显式传递映射器以在构造函数中使用
> *   通过显式设置映射器以供 setMapper(com.fasterxml.jackson.databind.ObjectMapper) 使用
> *   通过定义返回 ObjectMappers 的 JAX-RS Provider。
> *   通过不执行上述任何操作，在这种情况下会构造一个默认映射器实例（如果调用配置方法则配置）

# sql - 数组或数组 SQL

> ID：14631974
> 
> 赞同：0
> 
> 时间：2013-01-31T17:48:23.870
> 
> 标签：sql

在我的表中，我有这些行

```
 id   name           description cate_id   ver_id language
    1   producto1   breve descripcion   1       1     es-ES
    2   producto2   otra descripción    1       2     es-ES
    3   producto3   otra cosa           2       1       es-ES 
```

是否可以创建一个 sql 查询以返回例如

```
[1]
 1  producto1   breve descripcion   1       1     es-ES
 2  producto2   otra descripción    1       2     es-ES

[2]
 3  producto3   otra cosa           2       1       es-ES 
```

其中 [1] 和 [2] 是 cate_id？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:52:26.167

如果您实际上是在尝试返回 5 行具有不同列数（第一行中的 1 列，第二行和第三行中的 6 列等），那么不，这是不可能的。如果这是您想要做的事情，请返回您想要排序的结果`cate_id`，然后在业务或显示层中按您希望的方式格式化数据。

# shake-build-system - 如何在 Shake 中定义自定义规则：Development.Shake.Core 被隐藏

> ID：14631978
> 
> 赞同：1
> 
> 时间：2013-01-31T17:48:37.347
> 
> 标签：shake-build-system

我正在尝试使用看起来非常有前途的 Shake，但我碰上了一面小墙。我对haskell很陌生，所以也许我遗漏了一些明显的东西，但这是我的问题：

我想在我的摇动程序中定义一种新的规则。该规则将从依赖项中计算一个值，然后让 Shake 将其存储在其数据库中。因此，如果依赖项是最新的，则shake db 值始终有效。

```
data PrjList = PrjList FilePath deriving (Typeable,Show,Eq,Hashable,Binary,NFData)

instance Rule PrjList [(String,FilePath)] where
    validStored q a = True

-- Generate the dependency
getProjectList :: FilePath -> Action [(String,FilePath)]
getProjectList dir = apply1 $ PrjList dir

-- We want to traverse recursivly all subdir but stop once we find a BuildConfig file
defaultProjectList :: Rules ()
defaultProjectList = defaultRule $ \(PrjList dir) -> Just $ do
     -- blabla...
     return [] 
```

但是，如果我尝试`import Development.Shake.Core`我有

```
Could not find module `Development.Shake.Core'
It is a member of the hidden package `shake-0.7'.
it is a hidden module in the package `shake-0.7'
it is a hidden module in the package `shake-0.8'
Use -v to see a list of the files searched for. 
```

如果我不导入它，我有

```
`validStored' is not a (visible) method of class `Rule' 
```

那么如何定义新规则呢？

额外的问题是：我的想法有趣还是有更好的方法？在考虑如何使用抖动时，我有很多规则会产生这种行为。这样可以避免拥有大量临时文件并利用抖动数据库。事实上，我的下一步是尝试为“文件系统自由规则”定义一个通用规则。用户只需要提供一个`key → Maybe (Action value)`功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:09:53.087

在shake-0.4 及更高版本`validStored`中被从`Rule`类中移除，并替换为：

```
storedValue :: key -> IO (Maybe value) 
```

因此，您无需定义该值是否仍然正确，而是返回存储的值。这使您尝试做的事情变得更加困难，但仍然可能。您可以将`value`类型定义为：

```
data MyValue a = RealResult a | Cheat
instance Eq a => Eq (MyValue a) where
    RealValue a == RealValue b = a == b
    _ == _ = True 
```

现在您可以定义`storedValue _ = return $ Just Cheat`，并且现有值将始终被视为有效。

使这些“缓存”规则更难的原因是因为我认为它们不是一个好主意，原因有以下三个：

1.  如果您在编写构建系统时弄错了这些规则之一，则必须删除 Shake 数据库才能恢复到有效状态。
2.  您不能轻易看到已生成的内容，因此必须求助于在大型多线程系统中很难进行的跟踪。
3.  在构建系统的每次运行中，即使无事可做，Shake 也必须反序列化整个数据库，包括您存储在其中的任何大值。

我发现如果你只使用临时文件，一切都会变得更加简单。

我可以想象有一些缓存文件内容的反序列化的范围，例如，如果您将复杂的结构存储在文件中，但我还没有一个好的 API 来做这件事。

**在 Shake 0.9 及以上**

函数 newCache 提供了一种缓存文件内容反序列化的方法。

# r - R中的堆叠直方图

> ID：14631979
> 
> 赞同：-4
> 
> 时间：2013-01-31T17:48:39.360
> 
> 标签：r, histogram

![Y轴：频率，X轴：比率][1]

[http://i.stack.imgur.com/Xmg3i.png](http://i.stack.imgur.com/Xmg3i.png)

谁能帮助我用合适的语法在 R 中创建这种直方图？输入数据将是与一个人及其年龄范围相对应的比率。样本：

年龄比例
(15-19) 0.97
(65-69) 1.2084
(50-64) 1.3049

等等。

我不知道这些叫什么，你能提一下这种直方图的名字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:06:29.193

我认为您可能对“ggplot2”包有最好的运气，您正在寻找的图表是“堆叠条形图”而不是直方图。

**设置**：创建一些示例数据。

```
data <- data.frame(age=sample(c("15-19", "20-24", "25-29","30-34"),100,rep=TRUE), ratio=rnorm(100,mean=1,sd=0.3)) 
```

**绘制它**：我们可以在这里使用'qplot'函数。

```
library(ggplot2)
qplot(ratio, data=data, geom="bar", fill=age, binwidth=0.1) 
```

在这里，我们告诉 'qplot' 函数使用来自我们的 [data] 数据帧的 [ratio] 数据并将其绘制在条形图几何图形中。数据应按 [age] ( `fill=age`) 分割和着色，每个条形应为 0.1 宽。您应该能够根据自己的需要进行调整。

# android - 动态地将一种布局添加到另一种布局

> ID：14631980
> 
> 赞同：0
> 
> 时间：2013-01-31T17:48:40.520
> 
> 标签：android, layout, onclick

我是 android 新手，我正在尝试在另一个布局下方动态添加 1 个布局。我以前已经看过类似的问题和答案，但我似乎找不到自己的方式。我希望有人可以为我解决问题。

我有要添加第二个布局的主要布局（import_custom_fields）：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
<LinearLayout 
    android:id="@+id/import_custom_field"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="6dp">

        <FrameLayout
         android:clickable="true"   
         android:id="@+id/profile_picture_frame"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_margin="10dp"
         android:foreground="@drawable/selector">

        <ImageView
            android:id="@+id/ProfilePicture"
            android:layout_width="@dimen/profile_picture_size"
            android:layout_height="@dimen/profile_picture_size"
            android:scaleType="centerCrop"
            android:contentDescription="@string/menu_profile_picture_header"
            android:src="@drawable/ic_contact_picture" />

        <ImageView
            android:id="@+id/addPlus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/menu_profile_picture_add"
            android:layout_gravity="bottom|right"
            android:src="@drawable/plus" />

        </FrameLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_toRightOf="@+id/profile_picture_frame"
            android:layout_centerVertical="true">

            <EditText
                android:id="@+id/FirstNameEdit"
                android:tag="@string/vcard_tag_first_name"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:textAppearance="@android:style/TextAppearance.Large"
                android:hint="@string/first_name"
                android:inputType="textPersonName|textCapWords"
                android:lines="1"/>
            <EditText
                android:id="@+id/LastNameEdit"
                android:tag="@string/vcard_tag_last_name"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:textAppearance="@android:style/TextAppearance.Large"
                android:hint="@string/last_name"
                android:inputType="textPersonName|textCapWords"
                android:lines="1" />  
        </LinearLayout>
    </RelativeLayout>
</LinearLayout>
</ScrollView> 
```

第二个布局（fields_to_inflate）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fields_to_inflate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >    

    <Spinner
        android:id="@+id/spinnerPhone"
        android:layout_width="100dip"
        android:layout_marginTop="10dip"
        android:layout_marginLeft="10dip"
        android:layout_height="wrap_content" />

    <EditText
        android:id="@+id/editTextPhone"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/spinnerPhone"
        android:layout_toRightOf="@+id/spinnerPhone"
        android:inputType="phone"
        android:ems="10" >
    </EditText>
</RelativeLayout> 
```

最后，我的活动如下所示：

```
public class ImportCustomFields extends SherlockActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.import_custom_fields);

        Spinner spinner = (Spinner)findViewById(R.id.spinnerPhone);
        ImageView addField = (ImageView)findViewById(R.id.add);
        addField.setClickable(true);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                                                                             R.array.custom_fields,
                                                                             android.R.layout.simple_spinner_item);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        final LinearLayout mainLayout = (LinearLayout)findViewById(R.layout.import_custom_fields);
        final RelativeLayout inflateLayout = (RelativeLayout)View.inflate(this, R.layout.fields_to_inflate, null);

        addField.setOnClickListener(new OnClickListener() {         
            @Override
            public void onClick(View v) {
                mainLayout.addView(inflateLayout);  
            }
        });
    }
} 
```

我在这一行（ mainLayout.addView(inflateLayout) ）收到空异常错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:52:42.470

您应该使用您分配的布局的 id：

```
final LinearLayout mainLayout = (LinearLayout)findViewById(R.id.import_custom_field); 
```

# proxy - 为什么我的 Web Api 代理设置为浏览器代理时收不到 https 请求，但可以正常接收？

> ID：14631981
> 
> 赞同：1
> 
> 时间：2013-01-31T17:48:45.693
> 
> 标签：proxy, asp.net-web-api, http.sys

我已经使用 WebApi[编写了一个 http 代理。](https://github.com/mcintyre321/WebAPI-Proxy)

我在端口 4443 上注册了它，如果我进入`https://localhost:4443`浏览器，并在我的 DelegatingHandler 中设置断点，它将被命中（并且我收到 SSL 警告）。

如果我随后将其设置为 firefox 代理（见图），对于 SSL 请求，并且浏览到`https://somesite.com`它不会被击中 - Web Api 似乎根本不处理调用。

![在此处输入图像描述](../Images/4cbfb4d46f16647356042ea67017811d.png)

浏览器在使用代理时与在直接调用导致 Web Api 无法处理调用时相比有何不同？

# c# - 如何从后面的代码中分配 DataGrid 行标题上的复选框？

> ID：14631985
> 
> 赞同：1
> 
> 时间：2013-01-31T17:49:02.540
> 
> 标签：c#, wpf, datagrid, checkbox

在我的 WPF 应用程序中，我从后面的代码动态创建 Datagrid。但是，我希望在行标题上有一个类似于**[此](http://www.scottlogic.co.uk/blog/colin/2008/11/multiselect-datagrid-with-checkboxes/)的带有复选框的数据网格。**

我知道如何从 XML 中做到这一点，但不知道如何从 cs 代码中做到这一点。有什么想法如何处理这种情况？附言。我的代码很大，我不能放在这里，但是如果您需要更多信息，请在下面发表评论。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:20:11.690

像这样的东西怎么样：

```
var dg = new DataGrid();

var dataTemplate = new DataTemplate();

var gridFactory = new FrameworkElementFactory(typeof(Grid));
var checkboxFactory = new FrameworkElementFactory(typeof(CheckBox));
checkboxFactory.SetBinding(CheckBox.IsCheckedProperty, new Binding("IsSelected") { RelativeSource = new RelativeSource(RelativeSourceMode.FindAncestor,typeof(DataGridRow),1)});
gridFactory.AppendChild(checkboxFactory);

dataTemplate.VisualTree = gridFactory;
dg.RowHeaderTemplate = dataTemplate; 
```

希望这应该能够毫不费力地放入您的代码中，可能只需将`DataGrid`名称从“dg”更改。

# jquery - 谷歌 Chrome 与 jQuery .remove 在 Mac Mountain Lion 上

> ID：14631987
> 
> 赞同：1
> 
> 时间：2013-01-31T17:49:10.667
> 
> 标签：jquery, google-chrome

仅测试了一个 Mountain Lion (Mac)，但在使用 Google Chrome 和 jQuery 的 .remove() 时，该元素会从 dom 中删除，但不会从屏幕中删除。

我的 css 停止处理已删除的标签，但工件仍留在屏幕上。我在搜索中找不到任何关于此的内容。

Chrome 版本 24.0.1312.57 - jQuery v1.7.1

代码，以便您可以重现：

[http://w2r.com/x/](http://w2r.com/x/)

注意：当您在最后一个元素上单击删除时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:46:43.853

我在您的代码中看到了几个问题：

您应该为所有元素使用唯一 ID（如另一个答案中所述）

ID*必须*以字母 (az) 开头才能有效

'spans'（内联元素）不应*是*'divs'（块元素）的父级

jQuery.live() 自 jQuery 1.7 起已弃用，不应再使用，请改用 .on()

使用委托（事件冒泡）而不是在每个元素上分配事件处理程序，这将使您的代码更轻、更快并且（特别是因为您正在从 dom 中*删除*元素，从而降低了内存泄漏的风险）

```
<div class='wrapper-div'>
  <div id="e6" class='day'>
    <div>
      <input type="hidden" name="n_6" value="6" /><div>Label</div>
      <a href="javascript:void(0);" class="remDay">Remove</a>
        </div>
  </div>
  <div id="e7" class='day'>
    <div>
      <input type="hidden" name="n_7" value="7" /><div>Label</div>
      <a href="javascript:void(0);" class="remDay">Remove</a>
        </div>
  </div>
</div>

<script>

 $('.wrapper-div').on('click', '.remDay', function() {
    $(this).closest('div.day').remove();
 });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:28:51.563

您必须为 DOM 元素使用唯一的 ID 标签。

如果您想坚持使用“remDay”，或者使用不同的标签，例如 class。

```
....

<span id="ID6"><div><input type="hidden" name="n_6" value="6" /> <div >Label:</div> TEXT 
<a href="javascript:void(0);" class="remDay">Remove</a></div></span>

....

   $('.remDay').live('click', function() {
        $(this).parents('span').remove(); // Ticket #13359
   }); 
```

ID 也必须包含一个字母，如[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)

# sql-server - 尝试使用 EasyPHP 12 安装 MSSQL 驱动程序

> ID：14631988
> 
> 赞同：1
> 
> 时间：2013-01-31T17:49:10.687
> 
> 标签：sql-server, easyphp

最近，我格式化了我的笔记本电脑并安装了 Windows 7 Home Basic 64bit、EasyPHP 12.1（将 PHP 升级到版本 5.4.6）、Microsoft SQL Server 2012*和*SQL Native Client Interface 64bit 版本的新副本，如 Microsoft 网站上的要求所指定。我已经下载了用于 PHP 的 Microsoft SQL 驱动程序（一个文件 SQLSRV30.exe）并将文件**php_pdo_sqlsrv_54_ts.dll**和**php_sqlsrv_54_ts.dll**复制到**ext**文件夹。

[http://postimage.org/image/mv4dcc3aj/](http://postimage.org/image/mv4dcc3aj/)

还向 php.ini 添加了条目

[http://postimage.org/image/ruwxxeknj/](http://postimage.org/image/ruwxxeknj/)

我根据 EasyPHP 的快照文件使用线程安全版本，上面写着**Build: C:\php-sdk\php54dev\vc9\x86\obj\Release_TS**

那么 phpinfo() 没有显示对 Microsoft SQL Server 的任何支持！我以前做过这个，我知道它有效。任何人都可以在这里帮助我，我是否遗漏了 php.ini 或其他地方的某些内容？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:24:29.817

终于我发现了问题！我正在修改错误的 php.ini 文件！

在 C:\Program files(86)\EasyPHP-12.1 中搜索 php.ini 会发现 4 个文件！我决定在所有这些中将 html_errors 的值从 On 更改为 Off，只是为了查看 php_info() 输出中的效果。通过反复试验，我发现要更改的正确 php.ini 是

C:\程序文件(86)\EasyPHP-12.1\apache\php.ini

那里有一行说

extension_dir = "C:\PROGRA~2\EASYPH~1.1\php\php546x130128105026\ext\"

所以后来我意识到 Apache 的 php.ini 正在从外部文件夹中获取 DLL 文件，而我正在修改目录中的不同 php.ini

C:\Program Files (x86)\EasyPHP-12.1\php\php546x130128105026

其中包含 ext 文件夹！好吧，我做错了。我将这两个 DLL 文件保存在该 ext 文件夹中，并将这两行添加到 Apache 的 php.ini

扩展=php_sqlsrv_54_ts.dll 扩展=php_pdo_sqlsrv_54_ts.dll

所以现在 EasyPHP 可以与 Microsoft 的 SQL 服务器通信，如 php_info() 输出所示。

[http://postimage.org/image/f3psxpnvn/](http://postimage.org/image/f3psxpnvn/)

# spring - Spring 3.2 内容协商类强制转换异常

> ID：14631992
> 
> 赞同：4
> 
> 时间：2013-01-31T17:49:27.743
> 
> 标签：spring, spring-mvc, content-negotiation

我们使用 Spring MVC 开发了一个标准的 Java Web 应用程序，并且最近尝试从 3.0.6 升级到 3.2.0。我们几乎所有的 servlet 响应都是 JSP 或 Json 视图，但也有一些是 pdf 请求，扩展名为“pdf”。

在 Spring 3.0.6 中，我们进行了此设置，取自 Spring MVC 文档。

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
<property name="mediaTypes">
<map>
  <entry key="pdf" value="application/pdf"/>
  <entry key="html" value="text/html"/>
  <entry key="json" value="application/json"/>
</map> 
```

与 XMLViewResolver 结合使用效果很好。

更新到3.2.0后，出现故障：

```
Error creating bean with name' org.springframework.web.servlet.view.ContentNegotiatingViewResolver#0' defined in class path  resource [dispatcher-test-servlet.xml]: Invocation of init method failed; nested exception is 

java.lang.ClassCastException: java.lang.String cannot be cast to                   org.springframework.http.MediaType' 
```

在调查了文档和一些博客之后，这个配置似乎有效：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
   <property name="contentNegotiationManager">
<bean class="org.springframework.web.accept.ContentNegotiationManager">
<constructor-arg>
    <list>
    <!-- These are evaluated in order -->
    <!-- Is there a media type based on suffix? -->
<bean                  class="org.springframework.web.accept.PathExtensionContentNegotiationStrategy">
<constructor-arg>
    <map>
<entry key="html" value="text/html" />
<entry key="json" value="application/json" />
<entry key="pdf" value="application/pdf" />
</map>
</constructor-arg>
</bean>
<!-- Else use request header -->
<bean
            class="org.springframework.web.accept.HeaderContentNegotiationStrategy">

</bean>
</list>
</constructor-arg>
</bean>
</property> 
```

但是，我们已经尝试使用此配置运行新的 Spring MVC 测试框架，并再次获得 ClassCast 异常，所以似乎测试框架没有以与应用程序运行时相同的方式初始化 bean... 有没有人有清楚地解释如何在 Spring 3,2 中以健壮的方式配置 ContentNegotiatingViewResolver？谢谢

理查德

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-18T21:10:12.627

我通过从类中删除重复 `<mvc:annotation-driven/>`的 xml 配置或 `@EnableWebMVC`注释来解决问题，因为 Spring 文档对此发出警告，并且仅通过合同允许一次。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T07:03:22.090

使用 spring 3.2 更好地解决使用`ContentNegotiationManager`. 它对我有用。您可以使用静态字段`org.springframework.http.MediaType.APPLICATION_JSON_VALUE`来提及媒体类型。检查以下代码：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="contentNegotiationManager">
            <bean class="org.springframework.web.accept.ContentNegotiationManager">
                <constructor-arg>
                    <bean class="org.springframework.web.accept.PathExtensionContentNegotiationStrategy">
                        <constructor-arg>
                            <map>
                                <entry key="json">
                                    <util:constant static-field="org.springframework.http.MediaType.APPLICATION_JSON_VALUE" />
                                </entry>
                                <entry key="xml">
                                    <util:constant static-field="org.springframework.http.MediaType.APPLICATION_XML_VALUE" />
                                </entry>
                            </map>
                        </constructor-arg>
                    </bean>
                </constructor-arg>
            </bean>
        </property>

        <property name="defaultViews">
            <list>
               <!-- default views -->
            </list>
        </property>

    </bean> 
```

为此，您必须在 dispatcher-servlet.xml 文件中使用 util 模式，即`xmlns:util="http://www.springframework.org/schema/util"`模式位置 [http://www.springframework.org/schema/util](http://www.springframework.org/schema/util) [http://www.springframework.org/schema/util/spring- util-3.0.xsd](http://www.springframework.org/schema/util/spring-util-3.0.xsd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:09:56.337

我认为您可以使用 ContentNegotiationManagerFactoryBean 更轻松地实现相同的目标。默认情况下，它首先检查 URL 路径扩展名，然后是 URL 中的格式属性（例如 ..../accounts?format=pdf），然后是标准 HTTP Accept 标头属性。格式参数的使用默认是关闭的。

```
<bean id="contentNegotiationManager"
      class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="defaultContentType" value="text/html" />

    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
            <entry key="pdf" value="application/pdf" />
            <entry key="pdf" value="text/html" />
       </map>
    </property>
</bean>

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="contentNegotiationManager" ref=""/>
</bean> 
```

如果您使用 JavaBeans 激活框架 JAF，则不需要 mediaTypes 部分。只需将activation.jar 放在类路径中。

您是否尝试过这个并且您是否也得到了类转换异常？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T19:55:43.950

好吧，您发布的错误基本上是说 Spring 没有办法将您提供的字符串（例如“application/pdf”）转换为 MediaType 对象。我猜 ContentNegotiatingViewResolver 将它的 mediaTypes 映射更改为 Map 到 Map。你可以尝试这样的事情：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
<property name="mediaTypes">
<map>
  <entry key="pdf">
    <value>
      <bean class="org.springframework.http.MediaType">
        <constructor-arg value="application/pdf" />
      </bean>
    </value>
  </entry>
  <entry key="html">
    <value>
      <bean class="org.springframework.http.MediaType">
        <constructor-arg value="text/html" />
      </bean>
    </value>
  </entry>
  <entry key="json">
    <value>
      <bean class="org.springframework.http.MediaType">
        <constructor-arg value="application/json" />
      </bean>
    </value>
  </entry>
</map>
</bean> 
```

注意：我是凭记忆做的，所以我可能打错了。基本上，您需要输入值是 MediaTypes，而不是字符串。

# dart - indexed_db - 使用索引选择一条记录

> ID：14631993
> 
> 赞同：1
> 
> 时间：2013-01-31T17:49:32.727
> 
> 标签：dart

我一直在玩 indexed_db，到目前为止它看起来相当令人印象深刻。

但是，我在选择单个记录时遇到了问题，我可以让它工作的唯一方法是选择整个“表”并处理它，直到遇到我需要的键。(objectStore.openCursor())。我认为 index.getKey() 可以以某种方式使用，但我不知道如何使其工作。我尝试的另一件事是 index.openCursor()。

有人可以发布一个如何做到这一点的工作示例吗？（按键选择单个“记录”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:04:27.060

尝试这样的事情：

```
import 'dart:html';
import 'dart:indexed_db';

void main() {

  List data = [
               {"name":"Chris", "lang":"Dart"},
               {"name":"Tom", "lang": "Java"}
               ];

  OpenDBRequest request = window.indexedDB.open("MyDatabase", 1);

  // create the structure
  request.onUpgradeNeeded.first.then((d) {
    var db = request.result;
    var objectStore = db.createObjectStore("people", { "keyPath":"name" });

    // create an index
    objectStore.createIndex("name", "name", { "unique": false });

    // insert some data
    data.forEach((record) => objectStore.add(record));
  });  

  // query for item with the name="Chris"
  request.onSuccess.first.then((v) {
    var db = request.result;

    var objectStore = db.transaction("people","readwrite").objectStore("people");

    // query for the object where name = "Chris"
    var requestedObject = objectStore.getObject("Chris");

    requestedObject.onSuccess.first.then((val) {
      // we've retrieved the value, print out fields
      print(requestedObject.result["name"]); // Chris
      print(requestedObject.result["lang"]); // "Dart"
    });

  });

} 
```

**References:** I used [this github code](https://github.com/dart-lang/dart-html5-samples/blob/master/web/indexeddb/todo/todo.dart) from todo MVC example, and these [MDN docs](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Using_an_index) to understand IndexedDB (and Dart SDK + Editor 17463)

# c# - 在目标视口中绘制

> ID：14631994
> 
> 赞同：0
> 
> 时间：2013-01-31T17:49:33.243
> 
> 标签：c#, xna, viewport

几天前，我问了一个关于“如何在不重绘所有内容的情况下在第二个视口中显示”的问题。答案之一是“您应该使用 renderTarget2D 并为 spritebatch 提供 Rectangle 源”，此解决方案没有`Matrix`相机。

```
spriteBatch.Draw(
    TheRenderTarget2D, 
    TheViewportTarget.Bounds, 
    TheRectangleSourceFromTheRenderTarget2D, 
    Color.White); 
```

这工作得很好，但我失去了很多渲染质量（因为我的游戏缩放和其他一些事情）。

问题是：如何在第二个视口中绘制`camera.transform()`以保持质量，并进行缩放。

希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:20:59.960

就是这样 ：

```
 Graphics.Device = viewport1;
    spriteBatch.Begin(,,,,,Camera1.transformation);
    DrawScene();
    spriteBatch.End();

    Graphics.Device = viewport2;
    spriteBatch.Begin(,,,,,Camera2.transformation);
    DrawScene();
    spriteBatch.End(); 
```

# android - Android 删除参数以匹配“intent()”

> ID：14631998
> 
> 赞同：3
> 
> 时间：2013-01-31T17:49:38.203
> 
> 标签：android

我正在尝试开始第二个活动，但我收到代码错误。

```
import android.os.Bundle;
import android.content.Intent;
import android.app.Activity;
import android.widget.Button;

import android.view.View;

import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewStub;
import android.widget.AdapterView;
import android.widget.ImageButton;
import android.widget.Toast;

public class MainActivity extends Activity
{
    private static final int ID_SPLASH = 1;
    private static final int ID_MAIN = 2;
    private static final int ID_PROFILE = 3;
    private static final int ID_PLAY = 4;
    private static final int ID_HELP = 5;

    @Override

    protected void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setContentView(R.layout.main);
        ImageButton menuBtn = (ImageButton)findViewById(R.id.iBtn1);
        //Button example1Btn    = (Button) findViewById(R.id.btn1);
        ActionItem splashItem   = new ActionItem(ID_SPLASH, "Splash", getResources().getDrawable(R.drawable.ic_action_about));
        ActionItem mainItem     = new ActionItem(ID_MAIN, "Main", getResources().getDrawable(R.drawable.ic_content_undo));
        ActionItem profileItem  = new ActionItem(ID_PROFILE, "Profile", getResources().getDrawable(R.drawable.ic_social_person));
        ActionItem playItem     = new ActionItem(ID_PLAY, "Play", getResources().getDrawable(R.drawable.ic_hardware_gamepad));
        ActionItem helpItem     = new ActionItem(ID_HELP, "Help", getResources().getDrawable(R.drawable.ic_action_help));

        //use setSticky(true) to disable QuickAction dialog being dismissed after an item is clicked
        helpItem.setSticky(true);

        final QuickAction mQuickAction  = new QuickAction(this);

        mQuickAction.addActionItem(splashItem);
        mQuickAction.addActionItem(mainItem);
        mQuickAction.addActionItem(profileItem);
        mQuickAction.addActionItem(playItem);
        mQuickAction.addActionItem(helpItem);

        //setup the action item click listener
        mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
            @Override
            public void onItemClick(QuickAction quickAction, int pos, int actionId) {
                ActionItem actionItem = quickAction.getActionItem(pos);

                if (actionId == ID_SPLASH) {
                    Intent intent = new Intent(this, SplashActivity.class);
                    startActivity(intent);

                } else if (actionId == ID_MAIN) {
                    Toast.makeText(getApplicationContext(), "Main---> item selected", Toast.LENGTH_SHORT).show();
                } else if (actionId == ID_PROFILE) {
                    Toast.makeText(getApplicationContext(), "Profile---> item selected", Toast.LENGTH_SHORT).show();
                } else if (actionId == ID_PLAY) {
                    Toast.makeText(getApplicationContext(), "Play---> item selected", Toast.LENGTH_SHORT).show();
                } else if (actionId == ID_HELP) {
                    Toast.makeText(getApplicationContext(), "Help---> item selected", Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(getApplicationContext(), actionItem.getTitle() + " selected", Toast.LENGTH_SHORT).show();
                }
            }
        });

        mQuickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
            @Override
            public void onDismiss() {
                Toast.makeText(getApplicationContext(), "Ups..dismissed", Toast.LENGTH_SHORT).show();
            }
        });

        menuBtn.setOnClickListener(new View.OnClickListener() {         
            @Override
            public void onClick(View v) {
                mQuickAction.show(v);
            }
        });

    }
} 
```

它不喜欢从新开始的一切。

我觉得我遵循了 [http://developer.android.com/training/basics/firstapp/starting-activity.html的指示](http://developer.android.com/training/basics/firstapp/starting-activity.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:03:12.473

您试图作为上下文传递的内容实际上是 `onActionItemClickListener()`行不通的。

应该使用`getBaseContext()`.

`Intent intent = new Intent(getBaseContext(), SplashActivity.class);`

**编辑：** 或者你可以做

`Intent intent = new Intent(MainActivity.this, SplashActivity.class);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T18:06:03.543

在 Java 中，`this`是指包含代码的类的当前实例。

这里

```
 mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
        @Override
        public void onItemClick(QuickAction quickAction, int pos, int actionId) {
            ActionItem actionItem = quickAction.getActionItem(pos);

            if (actionId == ID_SPLASH) {
                Intent intent = new Intent(this, SplashActivity.class);
                startActivity(intent); 
```

您正在 onItemClick 内部创建意图，它是 OnActionItemClickListener 类实例的一个方法。这被称为“匿名内部类”。匿名是因为它没有名称（与 不同`public class MyClass`），而内部是因为它只存在于声明它的类实例中。

`this`因此指的是点击监听器的实例。

相反，使用外部类的实例 - 你的 Activity。

```
Intent intent = new Intent(MainActivity.this, SplashActivity.class); 
```

另一种思考方式是，您使用的 Intent 的构造函数需要一个 Context 作为第一个参数。

从文档：

> Intent(Context packageContext, Class cls) 为特定组件创建意图。

由于 Activity 扩展了 Context，因此您的 Activity 是 Context 的一个实例。OnActionItemClickListener 是一个类，因此编译器会生成编译时错误。

# javascript - 我如何“重载” websocket？

> ID：14631999
> 
> 赞同：0
> 
> 时间：2013-01-31T17:49:42.120
> 
> 标签：javascript, android, ios, cordova, websocket

在此页面上的说明中：

[https://github.com/FreakDev/PhoneGap-Android-HTML5-WebSocket](https://github.com/FreakDev/PhoneGap-Android-HTML5-WebSocket)

它指出：在您的 javascript 中，创建一个新的 WebSocket，并重载其方法 'onmessage'、'onopen'、'onerror'、'onclick'；

这是什么意思？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:59:54.837

如果您查看他们的[javascript](https://github.com/FreakDev/PhoneGap-Android-HTML5-WebSocket/blob/master/js/websocket.js)文件，您可以看到他们设置：

```
// listener to overload
this.onopen = null;
this.onmessage = null;
this.onerror = null;
this.onclose = null; 
```

您应该将它们设置为您想要调用的实现。例如

```
their_object.onopen = function (openObject) {
   // Your code here.
} 
```