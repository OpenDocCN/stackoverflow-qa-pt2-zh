# StackOverflow 问答 12714000-12714999

# json - iOS 解析 JSON 问题

> ID：12714004
> 
> 赞同：1
> 
> 时间：2012-10-03T17:48:11.007
> 
> 标签：json, ios5

我一直在用头撞墙。

我有一个将 JSON 返回到我的 iOS 应用程序的 Rails 后端。我正在使用 rails 的默认返回来自动为我呈现 JSON 中的对象。我在处理它返回的错误时遇到了麻烦。

我得到的错误 JSON 是`{"errors":{"email":["can't be blank"],"password":["can't be blank"]}}`.

我使用 ASI 来处理请求。

```
-(void) requestFinished:(ASIFormDataRequest *)request {
  NSDictionary *data = [[request responseString] JSONValue]; 
```

执行上述代码使数据变为：

```
{
  errors =     
  {
    email =         (
        "can't be blank"
    );
    password =         (
        "can't be blank"
    );
  };
} 
```

现在这给了我试图解析它的问题。我希望能够访问错误的每个元素及其相关值。

当我尝试遍历元素时，我会执行以下操作：

```
for (NSDictionary *error in [data objectForKey:@"errors"]) 
```

这会给我`email`和`password`，但它们是类型`__NSCFString`，不是`NSDictionary`。我一直无法找到获取电子邮件或密码值的方法。有谁知道如何解析这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:17:52.770

好吧，我`Mac`现在没有，但如果它不起作用，我会尽力帮助你，让我知道我明天会更正它。

```
-(void) requestFinished:(ASIFormDataRequest *)request 
 {
     NSArray *data = [[request responseString] JSONValue];
     NSDictionary *dict = [data objectAtIndex:0];

     NSDictionary *dict2 = [dict valueForKey:@"errors"];

     NSLog(@"email = %@, password = %@",[dict2 valueForKey:@"email"], [dict2 valueForKey:@"password"]);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:05:00.117

这应该有效，请注意响应与您的“数据”NSDictionary 具有相同的结构。

```
NSDictionary *fields = [[NSDictionary alloc] initWithObjectsAndKeys: [[NSArray alloc] initWithObjects:@"one", @"two", nil],
                                                                @"A",
                                                                [[NSArray alloc] initWithObjects:@"three", @"four", nil],
                                                                @"B",
                                                                nil];

NSDictionary *response = [[NSDictionary alloc] initWithObjectsAndKeys:fields, @"errors", nil];

NSLog(@"Dictionary: %@", [response objectForKey:@"errors"]);

for (NSString *field in [response objectForKey:@"errors"])
    for (NSString* error in [response valueForKeyPath:[NSString stringWithFormat:@"errors.%@", field]])
        NSLog(@"%@ %@", field, error); 
```

输出将如下所示：

```
Dictionary: {
A =     (
    one,
    two
);
B =     (
    three,
    four
);
}

A one
A two
B three
B four 
```

# android - Eclipse中的Android程序if语句不起作用

> ID：12714006
> 
> 赞同：-1
> 
> 时间：2012-10-03T17:48:15.843
> 
> 标签：android, android-intent, if-statement

我在 Android 程序的一部分中编写了以下代码，但它没有按预期工作，它只是在变量 message_2 中打印内容。以下是我的代码

```
public void sendCall(View view){
    Intent intent1 = new Intent(this, DisplayCallActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);

    String message_2 = editText.getText().toString();
    String message = "Mahesh";
    //String message_1 = "Kumar";

    if (message_2 == "M")
    {
        intent1.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent1);
    }
    else
    {
        intent1.putExtra(EXTRA_MESSAGE, "Unknown");
        startActivity(intent1);
    } 
```

对此的任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:50:01.963

使用 java，您无法将字符串与`==`. 您必须使用以下内容：

```
message_2.equals("M") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:50:30.053

像这样改变你的状况`if(message_2.equals("M"))`

# java - xuggler rtcp 流式传输

> ID：12714008
> 
> 赞同：0
> 
> 时间：2012-10-03T17:48:18.370
> 
> 标签：java, video-streaming, xuggler, rtcp

谁能告诉我如何使用 xuggler(without use RED5) 创建一个 rtcp 流。我使用 MEDIATOOL api ant IMEdiaReader 来解码保存的视频容器，但是如何在 rtcp 中进行流式传输？我看到我不能抛出 IMediaWriter。我必须为输出使用新的 IContainer 吗？

谢谢你。

# javascript - 设置和获取表单字段

> ID：12714009
> 
> 赞同：0
> 
> 时间：2012-10-03T17:48:23.440
> 
> 标签：javascript, html, forms

**注意** 如果这是发布我开发的插件信息的错误位置，我很抱歉。我相信这会有所帮助。

我想知道是否有任何方法可以根据对象自动设置表单字段。我的意思是如果我有一个对象

```
 user = {
    text: ['text fields1', 'text fields2'],
    radio: 1,
    checkbox:false,
    select: '4'
} 
```

和一个表格

```
 <form>
<input name='user.text.0' type='text' />
    <input name='user.text.1' type='text' />
<input name='user.radio' type='radio' value='1'/>
<input name='user.radio' type='radio' value='2'/>
<input name='user.checkbox' type='checkbox' />
<select name='user.select'>
<option value='1'> 1 </option>
<option value='2'> 2 </option>
<option value='3'> 3 </option>
<option value='4'> 4 </option>
</select>
</form> 
```

是否有任何 JavaScript 库可以自动填写所有表单字段？

我还想要一个将表单作为对象返回的方法。

我的意思是如果我调用那个方法它应该返回

```
 {
    text: ['text fields1', 'text fields2'],
    radio: 1,
    checkbox:false,
    select: '4'
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:48:23.440

我创建了一个小型[JavaScript 库](https://github.com/anoopchaurasia/Form-Manager)。
[jsfiddle](http://jsfiddle.net/Rn8nW/7/)

它有两种方法`FormManager.setData(Element, data)`和`FormManager.getData(Element)`。您可以使用 FormManager.getData 设置表单字段`FormManager.setData`，也可以将表单字段数据作为对象获取。它使用字段名称来创建对象键，反之亦然。

我开发了这个，以便我不应该一一阅读表单字段。

# iphone - 测试对象是否相等，即相同的物理地址？

> ID：12714013
> 
> 赞同：0
> 
> 时间：2012-10-03T17:48:29.713
> 
> 标签：iphone, objective-c, cocoa-touch

我正在检查我从 NSURLConnectionDataDelegate 返回的对象是否与我最初创建的对象相同。我一直在做的是：

```
// TESTING TO SEE IF THE RETURNED OBJECT IS THE SAME ONE I CREATED
if(connection == [self connectionPartial]) { 
```

但只是好奇这和做的一样：

```
if([connection isEqual:[self connectionPartial]]) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:50:44.097

这**不**一样。

```
if(connection == [self connectionPartial]) { 
```

这将比较对象的**地址**，例如。如果指针指向同一个实例。

```
if([connection isEqual:[self connectionPartial]]) { 
```

这将比较对象的**内容**。例如对于两个单独的实例，只要字符串内容相同`NSString`，这将返回：`YES`

```
NSString *s1 = @"Something";
NSString *s2 = @"Something";
BOOL sameInstances = (s1 == s2);    // will be false, since they are separate objects.
BOOL sameContent = [s1 isEqual:s2]; // will be true, because they both are "Something" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:56:40.353

第一个片段比较指针本身的值，就好像它们是任何原始类型，如`int`. 如果地址相同，则表达式将评估为真。

第二个将消息发送`isEqual:`到连接实例之一。任何类都可以重写`isEqual:`以定义与另一个实例的“平等”。一个类的实现完全有可能`isEqual:`是：

```
- (BOOL)isEqual: (id)obj
{
    return arc4random_uniform(2) ? YES: NO;
} 
```

所以，不，对于几乎所有的类，它们都不等价。( `NSObject`，它具有 的“默认”实现`isEqual:`，使用对象的`hash`es，默认情况下，它是它们的地址。)

听起来`==`在您的情况下使用相等运算符 , 是正确的。

# sql - SQL如何检查记录是否存在？

> ID：12714014
> 
> 赞同：2
> 
> 时间：2012-10-03T17:48:42.247
> 
> 标签：sql, sqlite, insert, primary-key

我有一个 SQLite 数据库并且正在使用该`INSERT OR IGNORE`查询。我有一个表，它的主键是自动递增的 int，还有另一个唯一的列。我的问题是，SQLite 如何检查记录是否已经存在，以便知道是否忽略它？它是否先扫描主键，然后再扫描任何其他唯一列？如果是这样，它是否可以比较某些查询的主键之前的唯一列？此外，如果一列是唯一的，它是否已经被索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:17:15.687

UNIQUE 约束是使用索引实现的，因此 UNIQUE 列已经被索引。

在评估 INSERT OR IGNORE 时，如果表中的*任何*UNIQUE 约束将被 INSERT 语句违反，则使用 OR IGNORE 代替。从功能的角度来看，评估的顺序并不重要，应该对性能产生很小的影响。据推测，评估顺序由查询优化器处理，但如果不是，那么性能损失应该很小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:19:02.447

根据您想深入了解的程度，我可能会建议您[下载 SQLite3 源代码](http://www.sqlite.org/download.html)，然后开始在其中搜索“唯一”和“约束”等术语 - 只需阅读源代码即可提供您问题的一些答案几分钟。

该代码似乎有**很好的文档记录**。如果你打算大量使用 SQLite，至少阅读提供的评论可能不是一个坏主意。我敢打赌，您会从中获得比您预期的更多的洞察力。

# android - OnFling 和其他方法不适用于 ListView 中的 TextView

> ID：12714018
> 
> 赞同：3
> 
> 时间：2012-10-03T17:49:13.917
> 
> 标签：android, android-listview, textview, gesturedetector

我需要帮助... :-) 我的 ListView 有一个自定义适配器。这些项目是 TextViews。我希望能够处理每个 TextView 上的 onSingleTap、onFling 和所有其他事件。但只有 onDown 事件有效！其他都不要！我不明白为什么。在我的其他活动中，TextViews 不是 ListView 的一部分，一切正常......

这就是我所拥有的：

```
public class ListViewAdapter extends BaseAdapter{
 ...
 private GestureDetector txtProductGD;
 private View.OnTouchListener txtProductGL;
 ...

 public ListViewAdapter(Context context, ArrayList<Product> products) {
  ...
  txtProductGL = new View.OnTouchListener() {
   public boolean onTouch(View v, MotionEvent event) {
    txtProductGD = new GestureDetector(new txtProductGestureDetector((TextView) v));

    return txtProductGD.onTouchEvent(event);
   }
  };
  ...
 }

 public View getView(int position, View convertView, ViewGroup parent) {
 ...
 view = inflater.inflate(R.layout.listview_item, null);

 TextView textView = (TextView) view.findViewById(R.id.txtProduct);

 textView.setOnTouchListener(txtProductGL);
 ...
 }

 private class txtProductGestureDetector extends SimpleOnGestureListener {

  private TextView textView;

  public txtProductGestureDetector(TextView textView) {
   this.textView = textView;
  }

  public boolean onDown (MotionEvent e) {
   textView.setText("onDown..."); // IT WORKS!
   return false; 
  }

  public boolean onSingleTapConfirmed (MotionEvent e) {
   textView.setText("onSingleTapConfirmed..."); // IT DOESN'T WORK!
   return false;
  }

  // ALL OTHER METHODS ARE ALSO DON'T WORK!..       
 }                  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T14:53:54.360

我不知道您是否`txtProductGestureDetector`出于其他原因使用自定义类，但如果您只是想覆盖特定视图的方法，请尝试以下操作：

```
TextView textView = (TextView) view.findViewById(R.id.txtProduct);
textView.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        switch(event.getAction()) {
            case (MotionEvent.ACTION_DOWN) :
                Log.d(DEBUG_TAG,"Action was DOWN");
                return true;
            case (MotionEvent.ACTION_MOVE) :
                Log.d(DEBUG_TAG,"Action was MOVE");
                return true;
            case (MotionEvent.ACTION_UP) :
                Log.d(DEBUG_TAG,"Action was UP");
                return true;
            case (MotionEvent.ACTION_CANCEL) :
                Log.d(DEBUG_TAG,"Action was CANCEL");
                return true;     
            default : 
                return true;
            }            
        }
}); 
```

这可以直接放在你的`getView`方法中，并将一个 touchListener 分配给你的 textView。

# sass - 是否可以弃用 sass/scss mixin？

> ID：12714020
> 
> 赞同：6
> 
> 时间：2012-10-03T17:49:31.257
> 
> 标签：sass

在为大型开发团队维护和更新 mixins 时，是否可以弃用 mixins，以便在编译样式时发出某种警告？

我不只是想删除已弃用的 mixins，因为删除所有当前使用需要一些时间，但是如果其他开发人员尝试使用它，则最好警告它正在被删除。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T18:52:42.030

您可以`@warn`为此使用指令。来自[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id9)：

> @warn 指令将 SassScript 表达式的值打印到标准错误输出流。它对于需要警告用户弃用或从轻微的 mixin 使用错误中恢复的库很有用。

你会这样使用它：

```
@mixin old-mixin {
    @warn "This old mixin is deprecated!";

    // mixin definition here
} 
```

# c# - 从派生类型转换为基类型

> ID：12714021
> 
> 赞同：0
> 
> 时间：2012-10-03T17:49:33.840
> 
> 标签：c#, oop, nhibernate

鉴于

```
public abstract class AbstractOrder
{
    //some properties...
}

public class AnonymousOrder:AbstractOrder
{
    //some properties...
}

public class PartnerOrder:AbstractOrder
    {
        //some properties...
    }

public AbstractOrder FindOrderByConfirmationNumber(string confirmationNumber)
{
    ICriteria criteria =
        Session.CreateCriteria(typeof(AbstractOrder))
            .SetMaxResults(10)
            .AddOrder(Order.Desc("PurchasedDate"))
            .Add(Restrictions.Eq("ConfirmationNumber", confirmationNumber));
    var l = criteria.List<AbstractOrder>();
    AbstractOrder ao = l[0] as AbstractOrder;
    return ao as AbstractOrder;
} 
```

有人可以解释为什么

```
PartnerOrder order = repo.FindOrderByConfirmationNumber(confirmationNumber) 
```

返回一个 AnonymousOrder 类型，我如何让它返回一个 PartnerOrder 类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:05:44.137

AbstractOrder 是一个抽象类。没有对象只能是抽象类，它可以作为基类从它继承，但它也总是其他东西。

它返回类型 AnonymousOrder，这是它最具体的类，但它也是一个 AbstractOrder。你可以把它当作一个 AbstractOrder，什么都不应该受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:13:44.467

FindOrder*正在*返回一种`AbstractOrder`; 看看它的声明。它返回的*对象*可能是 的实例`AnonymousOrder`，但所有`AnonymousOrder`实例也是`AbstractOrder`实例，因为`AnonymousOrder`继承自`AbstractOrder`。

我认为您真正的问题是尝试将`AnonymousOrder`实例分配给`PartnerOrder`引用。这是行不通的，因为这两种类型都不是从另一种派生的。

但是，这将起作用：

```
AnonymousOrder order = (AnonymousOrder)repo.FindOrderByConfirmationNumber(confirmationNumber); 
```

或者，您可以测试返回值的类型：

```
AbstractOrder order = repo.FindOrderByConfirmationNumber(confirmationNumber);
PartnerOrder partnerOrder = order as PartnerOrder;
if (partnerOrder != null)
    //... 
```

如果您确实需要一个 PartnerOrder 实例来获得返回 AnonymousOrder 的确认号码，那么您将需要一个采用 AnonymousOrder 实例并返回 PartnerOrder 实例的方法。或者，也许，您应该重新考虑您的设计。

# objective-c - CoreFoundation 中的 NSHomeDirectory() 等价物是什么？

> ID：12714022
> 
> 赞同：8
> 
> 时间：2012-10-03T17:49:36.060
> 
> 标签：objective-c, ios, ios6, sandbox, core-foundation

我有一个 C 库，我正在尽可能少地修改，以添加一个功能并让它在 iOS 上正常运行。它在 iOS 5.1 上运行良好，但在 iOS 6 上中断，因为它需要编写一个小的临时文件，而且我认为它曾经写入的位置（/tmp/some.file）存在权利问题。

我知道 NSHomeDirectory() 会给我来自objectiveC的沙箱根，但它需要objectiveC / Foundation才能运行。如何仅使用 C / CoreFoundation 调用获取沙箱根目录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T22:05:32.357

CoreFoundation 等价于`NSHomeDirectory()`. `CFCopyHomeDirectoryURL()`它从 iOS 5 开始可用，唯一“记录”它的地方是[iOS 4.3 to iOS 5.0 API Differences](http://developer.apple.com/library/ios/releasenotes/General/iOS50APIDiff/index.html)。

如果您想要临时目录而不对`tmp`字符串进行硬编码，那么您可能希望使用`confstr`常量`_CS_DARWIN_USER_TEMP_DIR`并`TMPDIR`在 confstr 调用失败时回退到环境变量：

```
char tmpdir[PATH_MAX];
size_t n = confstr(_CS_DARWIN_USER_TEMP_DIR, tmpdir, sizeof(tmpdir));
if ((n <= 0) || (n >= sizeof(tmpdir)))
    strlcpy(tmpdir, getenv("TMPDIR"), sizeof(tmpdir));
CFURLRef tmp = CFURLCreateFromFileSystemRepresentation(kCFAllocatorDefault, (UInt8 *)tmpdir, strlen(tmpdir), true); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T18:06:16.463

iOS 上没有“主”目录。

您的应用程序位于沙盒中，因此您无权访问`/tmp`.

相反，您`tmp`在应用程序的沙箱中有一个目录。

您可以使用[CFBundle](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFBundleRef/Reference/reference.html)获取应用程序的路径。
然后可以通过添加找到临时文件夹`../tmp/`。

基本上：

```
CFBundleRef         bundle;
CFURLRef            url;
CFStringRef         bundlePath;
CFStringRef         tmpRelPath;
CFMutableStringRef  tmpPath;

bundle      = CFBundleGetMainBundle();
url         = CFBundleCopyBundleURL( bundle );
bundlePath  = CFURLCopyFileSystemPath( url, kCFURLPOSIXPathStyle );
tmpRelPath  = CFSTR( "/../tmp/" );
tmpPath     = CFStringCreateMutable( kCFAllocatorDefault, CFStringGetLength( bundlePath ) + CFStringGetLength( tmpRelPath ) );

CFStringAppend( tmpPath, bundlePath );
CFStringAppend( tmpPath, tmpRelPath );

CFShow( tmpPath );

CFRelease( url );
CFRelease( bundlePath );
CFRelease( tmpPath ); 
```

# php - 保持 PHP 会话安全

> ID：12714023
> 
> 赞同：2
> 
> 时间：2012-10-03T17:49:43.940
> 
> 标签：php, session, security, session-variables

当用户创建帐户时，他会从数据库中获得一个唯一且自动递增的用户 ID。所以第一个用户的用户 id 为 1，创建的第二个用户的用户 id 为 2，依此类推。我正在使用 PHP 会话在他们登录时存储用户 ID，以便他们保持登录状态。在阅读了几篇文章后，我明白你永远不希望 PHP 会话像我所做的那样容易受到攻击（这很容易让黑客确定每个用户的 php 会话用户 ID。所以我的问题是，如果我要使用 md5 或 blowfish 基于他们唯一的用户名来为每个用户生成用户 ID，那会使 PHP 会话安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:51:36.950

一个好的方法总是在登录屏幕上并立即发布登录以强制使用随机数生成新的会话 ID

```
session_start();
$newsessid = somerandomnumberfunction();
session_id($newsessid); 
```

你也可以使用 session_regenerate_id() 函数来生成一个新的 id

```
session_start();
session_regenerate_id(); 
```

**好读**

[PHP 会话安全](https://stackoverflow.com/questions/328/php-session-security)

[PHP 安全指南：会话](http://phpsec.org/projects/guide/4.html)

# javascript - Google Maps Javascript API v3 地图标签和多边形

> ID：12714031
> 
> 赞同：2
> 
> 时间：2012-10-03T17:50:13.300
> 
> 标签：javascript, google-maps-api-3

我在一个项目中使用 Google Maps javascript API v3，我目前无法让地图标签出现在多边形上方。我知道多边形仅相对于它们自身进行 z 索引（无法使用地图标签的 z 索引将地图标签放在其上方）。我想知道是否有一些技巧可以解决这个问题。我还在为 api 使用信息窗口库，我需要标签出现在多边形上方，但在信息窗口下方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T20:14:59.947

**注意：Fusion Tables 已于 2019 年 12 月 3 日关闭，Google Maps Javascript API 版本 3.37 是支持 Fusion Tables 的最后一个版本**

你是否试图做这样的事情：

[http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html)

将 infoBox 用于显示在 FusionTablesLayer 多边形顶部的地图标签。

标签上有白色背景：

[http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map_whiteBg.html](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map_whiteBg.html)

[![地图截图](../Images/37c99767789dfe541b5dda082fd6dc50.png)](https://i.stack.imgur.com/zpj5H.png)

代码片段：

```
google.load('visualization', '1', {
  'packages': ['corechart', 'table', 'geomap']
});
var map;
var labels = [];
var layer;
var tableid = 1499916;

function initialize() {
  geocoder = new google.maps.Geocoder();
  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(37.23032838760389, -118.65234375),
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  layer = new google.maps.FusionTablesLayer(tableid);
  layer.setQuery("SELECT 'geometry' FROM " + tableid);
  layer.setMap(map);

  codeAddress();

  google.maps.event.addListener(map, "bounds_changed", function() {
    displayZips();
  });
  google.maps.event.addListener(map, "zoom_changed", function() {
    if (map.getZoom() < 11) {
      for (var i = 0; i < labels.length; i++) {
        labels[i].setMap(null);
      }
    }
  });
}

function codeAddress() {
  var address = document.getElementById("address").value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
      });
      if (results[0].geometry.viewport)
        map.fitBounds(results[0].geometry.viewport);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });
}

function displayZips() {
  //set the query using the current bounds
  var queryStr = "SELECT geometry, ZIP, latitude, longitude FROM " + tableid + " WHERE ST_INTERSECTS(geometry, RECTANGLE(LATLNG" + map.getBounds().getSouthWest() + ",LATLNG" + map.getBounds().getNorthEast() + "))";
  var queryText = encodeURIComponent(queryStr);
  var query = new google.visualization.Query('https://www.google.com/fusiontables/gvizdata?tq=' + queryText);

  //set the callback function
  query.send(displayZipText);

}

var infowindow = new google.maps.InfoWindow();

function displayZipText(response) {
  if (!response) {
    alert('no response');
    return;
  }
  if (response.isError()) {
    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
    return;
  }
  if (map.getZoom() < 11) return;
  FTresponse = response;
  //for more information on the response object, see the documentation
  //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
  numRows = response.getDataTable().getNumberOfRows();
  numCols = response.getDataTable().getNumberOfColumns();
  for (i = 0; i < numRows; i++) {
    var zip = response.getDataTable().getValue(i, 1);
    var zipStr = zip.toString()
    while (zipStr.length < 5) {
      zipStr = '0' + zipStr;
    }
    var point = new google.maps.LatLng(
      parseFloat(response.getDataTable().getValue(i, 2)),
      parseFloat(response.getDataTable().getValue(i, 3)));
    // bounds.extend(point);
    labels.push(new InfoBox({
      content: zipStr,
      boxStyle: {
        border: "1px solid black",
        textAlign: "center",
        backgroundColor: "white",
        fontSize: "8pt",
        width: "50px"
      },
      disableAutoPan: true,
      pixelOffset: new google.maps.Size(-25, 0),
      position: point,
      closeBoxURL: "",
      isHidden: false,
      enableEventPropagation: true
    }));
    labels[labels.length - 1].open(map);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map_canvas {
  width: 610px;
  height: 400px;
}
```

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/googlemaps/v3-utility-library/07f15d84/infobox/src/infobox.js"></script>
<script type="text/javascript" src=https://cdn.rawgit.com/geocodezip/geoxml3/f43a77ca/polys/geoxml3.js"></script>
<span class="style51"><span class="style49">Show</span>:</span>
<input id="address" type="text" value="07646"></input>
<input id="geocode" type="button" onclick="codeAddress();" value="Geocode" />
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-12T05:26:18.750

`maplabel.js`变化中：

```
mapPane.appendChild(canvas); 
```

至

```
overlayLayer.appendChild(canvas); 
```

[此处](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)描述了 mapPanes 。

然后在 mapLabelOptions 中设置 xIndex 以将标签放在多边形前面。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-28T07:14:04.937

This is probably a late find.. but hope someone would find this useful.

If you don't want to use `infoBox` (geocodezip's Solution) instead of a label, and want to give a custom zIndex.. Edit the **maplabel.js**.

Add the following line just before the end of **MapLabel.prototype.onAdd = function() {**

```
if (canvas.parentNode != null) {
    canvas.parentNode.style.zIndex = style.zIndex;
} 
```

Now you can pass **zIndex** while creating a maplabel:

```
var mapLabel = new MapLabel({
    text: "abc",
    position: center,
    map: map,
    fontSize: 8,
    align: 'left',
    zIndex: 15
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-22T10:15:05.760

这有效：

在 maplabel.js 中更改：

```
mapPane.appendChild(canvas); 
```

至

```
overlayLayer.appendChild(canvas); 
```

# perl - 如何根据模块版本有条件地更改@INC？

> ID：12714032
> 
> 赞同：2
> 
> 时间：2012-10-03T17:50:13.987
> 
> 标签：perl, module

背景：我有一个 perl 模块——我们称它为`Foo::Common`已安装在我们的一个文件服务器上（为简单起见，我将其称为“全局”版本）。该模块包含在大约 1000 个 perl 脚本中，每 15 分钟启动一次。该模块有几个旧版本，但更新它需要几个月的时间进行大量测试。

我正在编写一个新的 perl 脚本，它将在同一处理服务器上运行，但我需要仅包含在最新版本的`Foo::Common`. 如果我只是想使用较新版本的`Foo::Common`，我可以将其放在正在运行脚本`Foo/Common.pm`的目录中，然后使用以下代码：`./lib`

```
my $lib = '';
BEGIN {
    $lib = $ENV{FOO_ENV_HOME} || '';
}
use lib "$lib/core/bin/";
use lib './lib';
use Foo::Common; 
```

因为`use lib`将目录添加到 的开头，所以将首先找到并使用`@INC`较新版本的。`Foo::Common`

这一切都很好，但我不希望我的脚本依赖于本地版本的`Foo::Common`. 全局版本`Foo::Common`有`our $VERSION = '1.1.2'`，我要本地安装的版本是`1.1.7`。如果我部署上面的代码，然后我们将全局版本升级到尚未编写的`1.2.0`，我的脚本会卡在 running `1.1.7`。

根据`perldoc -f require`：

```
`require $filename` Has semantics similar to the following subroutine: 

sub require {
   my ($filename) = @_;
   if (exists $INC{$filename}) {
       return 1 if $INC{$filename};
       die "Compilation failed in require";
   }
   my ($realfilename,$result);
   ITER: {
       foreach $prefix (@INC) {
           $realfilename = "$prefix/$filename";
           if (-f $realfilename) {
               $INC{$filename} = $realfilename;
               $result = do $realfilename;
               last ITER;
           }
       }
       die "Can't find $filename in \@INC";
   }
   if ($@) {
       $INC{$filename} = undef;
       die $@;
   } elsif (!$result) {
       delete $INC{$filename};
       die "$filename did not return true value";
   } else {
       return $result;
   }
} 
```

我不清楚这如何与`use MODULE VERSION`语法交互，尽管在[安装两个版本的模块时 Perl 会做什么的答案中进行了讨论？](https://stackoverflow.com/questions/8914322/what-does-perl-do-when-two-versions-of-a-module-are-installed)表示`use Module Version`还不够。

我假设我要操作@INC，但我不确定如何根据每个模块的来执行此操作`$VERSION`，特别是因为`use`有一个隐式`BEGIN`声明。

我该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:54:45.150

太阳底下没有新鲜事。

`use [only::latest](http://search.cpan.org/perldoc?only%3a%3alatest) 'Foo::Common'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T17:55:34.777

您无法根据版本进行检查，因为`$VERSION`直到它被加载（也就是执行）之后才存在。

* * *

所以你想要使用“全局”版本（如果存在），否则使用本地版本？将本地路径附加到 @INC 而不是预先添加它。

```
BEGIN {
   push @INC, "$ENV{FOO_ENV_HOME}/core/bin";
      if $ENV{FOO_ENV_HOME};
}

use Foo::Common; 
```

* * *

`@INC`如果您因为会影响其他内容而无法重新排列，请尝试在更改之前加载 Foo::Common `@INC`。

```
BEGIN { eval { require Foo::Common; }; }
use lib ...;
use Foo::Common;
use ...; 
```

如果之前已经加载过，则不会加载该`use Foo::Common;`模块，并且它将从已加载的任何版本导入（无论它在何处加载）。

# iphone - 与 Json 帖子一起放松

> ID：12714037
> 
> 赞同：0
> 
> 时间：2012-10-03T17:50:21.693
> 
> 标签：iphone, json, web-services, post

我是 iphone 技术的新手，谁能帮忙，我想使用 POST 方法将 JSON DATA 发送到服务器。

任何人都可以通过提供一些简单的示例应用程序来帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:41:02.177

你必须利用`NSUrlConnection` 这项工作。所以已经有一个很好解释的[问题](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request) 你必须将你的 JSON 数据设置为 http Body 中`NSUrlRequest` 还有其他工具包，如 ASIHTTPRequest（已被废弃但现在也被广泛使用）、RestKit 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:50:02.130

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:requestUrlString]];
    NSMutableDictionary *dict1 =[[NSMutableDictionary alloc] init];
    if ([m_ProductInfoDictonary objectForKey:@"TOKEN"] != nil) {
        [dict1 setObject:[mAppDelegate.m_ProductDictonary objectForKey:@"TOKEN"] forKey:@"token"];
NSMutableDictionary *dict2 =[[NSMutableDictionary alloc] init];
    [dict2 setObject:[mAppDelegate.m_ProductDictonary objectForKey:@"PRODUCTNAME" ] forKey:@"title"];
    [dict2 setObject:[mAppDelegate.m_ProductDictonary objectForKey:@"DESCRIPTION" ] forKey:@"description"];
    [dict2 setObject:[mAppDelegate.m_ProductDictonary objectForKey:@"PRODUCTPRICE" ] forKey:@"price"];
    [dict2 setObject:[mAppDelegate.m_ProductDictonary objectForKey:@"ZIPCODE" ]forKey:@"zipcode"];
NSMutableDictionary *dict =[[NSMutableDictionary alloc] init];
    [dict setObject:dict2 forKey:@"item"];
    [dict setObject:dict1 forKey:@"user"];
    //[dict setObject:dict3 forKey:@"item_images"];
    [dict1 release];
    [dict2 release];
[request setPostValue:[dict JSONRepresentation] forKey:@"item_post"];
[request setPostFormat:ASIMultipartFormDataPostFormat];
[request setTimeOutSeconds:200];
[request setDelegate:self];

[request setDidFinishSelector:@selector(uploadRequestFinished:)];
[request setDidFailSelector:@selector(uploadRequestFailed:)];

[request startSynchronous];
[requestUrlString release]; 
```

# javascript - Jquery缩放不起作用

> ID：12714038
> 
> 赞同：0
> 
> 时间：2012-10-03T17:50:22.847
> 
> 标签：javascript, jquery, joomla, zooming

我正在尝试在目录图像上的 Joomla 驱动网站上实现 Jquery[缩放。](http://www.jacklmoore.com/zoom)我不能让这个东西工作，所以有人可以帮我解决这个问题吗？

我在头部添加了这些脚本：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>
<script src="http://www.myurl.mk/templates/beez_20/javascript/jquery.zoom.js"></script> 
```

这是它给出的错误：

```
Uncaught TypeError: Object #<HTMLDocument> has no method 'ready'
(anonymous function) 
```

[这是指向我的网站示例的链接](http://zasvadba.mk/kategorii/%D1%81%D0%B2%D0%B0%D0%B4%D0%B1%D0%B5%D0%BD%D0%B8-%D1%84%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%B8/%D0%B2%D0%B5%D0%BD%D1%87%D0%B0%D0%BD%D0%B8%D1%86%D0%B0-%D0%B1%D0%B8%D0%B0%D0%BD%D0%BA%D0%B07.html)

这是我的代码：

```
<script>
        $(document).ready(function(){
            $('#ex1').zoom({url: '<?php echo $this->item->imageXLarge; ?>'});
        });
    </script>
      <div class="itemImageBlock" style="float:none;">
          <span class="itemImage" id="ex1">
                <img src="<?php echo $this->item->image; ?>" alt="<?php if(!empty($this->item->image_caption)) echo K2HelperUtilities::cleanHtml($this->item->image_caption); else echo K2HelperUtilities::cleanHtml($this->item->title); ?>" style="width:<?php echo $this->item->imageWidth; ?>px; height:auto;" />
          </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:16:10.833

在您的示例页面上，您在 jquery.js 之前导入 ks2.js。

这应该是您的`<head>`标签之后的第一项：

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:21:19.273

我看到了你的页面，发现你在依赖文件之后加载 jQuery 文件。控制台有很多错误。第一个是 jQuery 未定义。在所有其他脚本文件之前移动您的 jQuery 文件。

将 jQuery 移到顶部后，您的网站看起来不错。我按照你的要求附上了一张快照。 ![在此处输入图像描述](../Images/2fdd741ec2feabb40a636dfa438d3f6d.png)

# emacs - Emacs Lisp - 用变量/可变名称声明函数

> ID：12714039
> 
> 赞同：7
> 
> 时间：2012-10-03T17:50:24.983
> 
> 标签：emacs

我正在开发一个 Emacs Lisp 包，我想添加的一个特殊功能是动态定义函数的能力——它们将遵循相同的命名约定，但这将帮助我不必手动声明它们中的每一个.

举个例子，我有一个名为 exec 的基本函数，它接受一个参数，即要启动的可执行文件的名称：

```
(def exec (cmd)
    (async-shell-command cmd "buffer")) 
```

同时，在这种特殊情况下，我知道我将要使用的可执行文件的列表——或者更准确地说，我知道如何获取它们的列表，因为它会随着时间而改变。因此，鉴于以下可执行文件列表，我想做的是：

```
("a" "b" "c") 
```

是对它们进行迭代，并为每一个创建一个名为 exec-[executable] - exec-a、exec-b、exec-c 的函数。

不幸的是，defun 不评估 NAME 参数，所以我不能动态创建函数名。

PS。exec 命令本身就足够好了——它`completing-read`与提供的可执行文件列表一起使用，但我认为上面的内容会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T18:51:21.750

怎么样

```
(dolist (name name-list)
  (defalias (intern (concat "exec-" name))
   `(lambda () ,(format "Run %s via `exec'." name) (interactive) (exec ,name)))) 
```

# c# - C# Lambda 运算符

> ID：12714042
> 
> 赞同：-10
> 
> 时间：2012-10-03T17:50:28.527
> 
> 标签：c#, lambda

在 C# 中，在编写 lambda 表达式时，是否有 => lambda 运算符的单字符版本？

我知道输入 => 并不难，但仍然...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T17:51:09.890

不可以。两个字符 ( `=>`) 是必需的。这就是语言的编写和设计方式。

心存感激——`delegate { ... }` 在大多数情况下，它比旧语法要短得多。

# mysql - 如何使用 mysql 使用 JDO 将类持久化到数据库，出现错误

> ID：12714045
> 
> 赞同：1
> 
> 时间：2012-10-03T17:50:33.250
> 
> 标签：mysql, persistence, jdo

我正在尝试使用 JDO 3.1 API 从持久类生成表。

这是我的代码：

```
class product

@PersistenceCapable
public class Product{

    @PrimaryKey
    @Persistent(valueStrategy=IdGeneratorStrategy.INCREMENT)
    public  long id;

    public String name = null;
    public String description = null;
    public double price = 0.0;

    public Product(){}

    public Product(String name, String desc, double price)
    {
        this.name = name;
        this.description = desc;
        this.price = price;
    } 
```

这是我的主要内容：

```
public static void main(String[] args) {

        JDOEnhancer enhancer = JDOHelper.getEnhancer();
            enhancer.setVerbose(true);
            enhancer.addClasses(Product.class.getName());
        // enhancer.addPersistenceUnit("OnlineStore");
            // add entities to be enhanced to this list...
            enhancer.enhance();

        Properties properties = new Properties();
        properties.setProperty("javax.jdo.PersistenceManagerFactoryClass",
                        "org.datanucleus.api.jdo.JDOPersistenceManagerFactory");

        properties.setProperty("datanucleus.ConnectionDriverName","com.mysql.jdbc.Driver");
        properties.setProperty("datanucleus.ConnectionURL","jdbc:mysql://localhost/example");
        properties.setProperty("datanucleus.ConnectionUserName","root");
        properties.setProperty("datanucleus.ConnectionPassword","root");    

        PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory(properties);
        PersistenceManager pm = pmf.getPersistenceManager();

        Transaction tx=pm.currentTransaction();
        try
        {
            tx.begin();
            Product product = new Product("Sony Discman", "A standard discman from Sony", 49.99);
            pm.makePersistent(new Product());
            tx.commit();
        }
        finally
        {
            if (tx.isActive())
            {
                tx.rollback();
            }
            pm.close();
        }

    } 
```

我有一个错误：

```
No hay ningun generador de valor para la estrategia "custom" para este base de datos. Por favor, lee en la documentaciï¿½n sobre las estrategias que esta apoyado para este base de datos.
org.datanucleus.exceptions.NucleusUserException: No hay ningun generador de valor para la estrategia "custom" para este base de datos. Por favor, lee en la documentaciï¿½n sobre las estrategias que esta apoyado para este base de datos.
    at org.datanucleus.store.AbstractStoreManager.getStrategyValue(AbstractStoreManager.java:1564)
    at org.datanucleus.state.JDOStateManager.populateStrategyFields(JDOStateManager.java:690)
    at org.datanucleus.state.JDOStateManager.initialiseForPersistentNew(JDOStateManager.java:362)
    at org.datanucleus.state.StateManagerFactory.newForPersistentNew(StateManagerFactory.java:187)
    at org.datanucleus.state.ObjectProviderFactory.newForPersistentNew(ObjectProviderFactory.java:145)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1895)
    at org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1745)
    at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1593)
    at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:731)
    at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:756)
    at com.test.Main.main(Main.java:47) 
```

有没有人使用 JDO 类和 MySQL 进行映射？我在运行时增强类，而不是在构建时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:06:32.913

看不到你在那里尝试的东西是如何工作的。您增强了某些类，但这将返回增强类的字节；它不会神奇地更新已经加载到 CLASSPATH 中的编译类。为此，您必须使用自定义类加载器，根据[http://www.datanucleus.org/servlet/wiki/pages/viewpage.action?pageId=6619188](http://www.datanucleus.org/servlet/wiki/pages/viewpage.action?pageId=6619188)

# javascript - 如果一个 XML 文件包含多个不同级别的同名节点，如何指定要获取的确切节点？

> ID：12714048
> 
> 赞同：3
> 
> 时间：2012-10-03T17:50:44.587
> 
> 标签：javascript, jquery, xml

我在使用 javascript/jquery 读取 XML 文件的节点时遇到了问题。

假设我们有一个这样的 xml 文件

```
<root>
  <people>
    <name>Jack</name>
    <age>18</age>
  </people>
  <name>Rose</name>
</root> 
```

对于这个xml文件，第一层有一个名字，内容为“Rose”，第二层也有一个名字，内容为“Jack”

我曾尝试使用 jquery 的函数来读取文件：

```
var NAME;
$.get('myxml.xml', 'xml', function(d){
    NAME = $(d).find('name').text();
}); 
```

但是这样，每次 NAME 将包含两个节点内容的组合，例如'JackRose'

如果我只想获取第二个节点的内容，即要读取和存储的“Rose”节点，我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:53:07.883

您可以使用`each`方法：

```
$.get('myxml.xml', 'xml', function(d){
    $(d).find('name').each(function(){
        var txt = $(this).text()
    });
}); 
```

或`eq`方法：

```
$.get('myxml.xml', 'xml', function(d){
    var $name = $(d).find('name');
    var first = $name.eq(0).text()        
    var second = $name.eq(1).text()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:01:13.187

由于第二个是元素的直接子`root`元素，因此可以这样找到：

```
var NAME;
$.get('myxml.xml', 'xml', function(d){
    NAME = $(d).find('> name').text();
}); 
```

根据xml，如果根元素不是真正的`root`元素，并且通常有一个`<xml>`元素作为根元素，则选择器将是`('root > name')`！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T18:00:23.423

尝试

```
var NAME;
$.get('myxml.xml', 'xml', function(d){
    NAME = $(d).find('root > name').text();
}); 
```

# ruby-on-rails - 如何验证 form_for 元素和 form_tag 元素？

> ID：12714053
> 
> 赞同：0
> 
> 时间：2012-10-03T17:50:54.703
> 
> 标签：ruby-on-rails, forms, validation

我有一个`form_for`表单，我使用`*_tag`方法向其中添加了自定义字段。

对于普通`form_for`元素，我在模型内部进行了验证，但是我不确定应该如何处理我的`text_field_tag`元素。

验证这些字段的最优雅的方法是什么？

代码更新：

```
<%= form_for(@member, :html => {:class => "generic-form"}) do |f| %>
    <% if @member.errors.any? %>
        <div id="error_explanation">
            <h2><%= pluralize(@member.errors.count, "error") %> prohibited this member from being saved:</h2>
        <ul>
            <% @member.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
    <% end %>
        </ul>
    </div>
  <% end %>
  <%= f.label :username, "Username:" %>
  <%= f.text_field :username %>
  <%= f.label :password, "Password:" %>
  <%= f.password_field :password %>
  <%= label_tag "repeatPassword", "Repeat password:" %>
  <%= password_field_tag "repeatPassword" %>
  <%= f.label :email, "Email:" %>
  <%= f.text_field :email %>
  <button type="submit" name="commit">Register</button>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:13:56.970

我猜你有一个更新/创建成员实例的操作。在此操作中，您可以执行以下操作：

```
def update
  [...]
  if params[:repeatPassword] == params[:member][:password]
    @member.save
  else
    @member.errors.add('password', 'Passwords werent the same')
    redirect_to :action => :update, :id => params[:id]
  end
  [...]
end 
```

希望这可以帮助！

# javascript - 自定义 javascript 正则表达式的问题

> ID：12714055
> 
> 赞同：1
> 
> 时间：2012-10-03T17:51:01.343
> 
> 标签：javascript, regex

我有一个自定义正则表达式，用于检测整数、分数和浮点数。

```
var regEx = new RegExp("^((^[1-9]|(0\.)|(\.))([0-9]+)?((\s|\.)[0-9]+(/[0-9])?)?)$");
var quantity = 'd';
var matched = quantity.match(regEx);
alert(matched); 
```

​（代码也可以在这里找到：http: [//jsfiddle.net/aNb3L/](http://jsfiddle.net/aNb3L/)。）

问题是它匹配一个字母，我不知道为什么。但是对于更多的字母，它会失败（这很好）。

免责声明：我是正则表达式的新手，虽然在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)它不匹配单个字母

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T17:53:34.883

使用直接的正则表达式语法更容易：

```
var regEx = /^((^[1-9]|(0\.)|(\.))([0-9]+)?((\s|\.)[0-9]+(\/[0-9])?)?)$/; 
```

当您使用`RegExp`构造函数时，您必须在反斜杠上加倍。实际上，您的代码只有一个反斜杠，因此`\.`子表达式被视为`.`- 这就是单个非数字字符如何滑过。

因此你的也可以这样工作：

```
var regEx = new RegExp("^((^[1-9]|(0\\.)|(\\.))([0-9]+)?((\\s|\\.)[0-9]+(/[0-9])?)?)$"); 
```

发生这种情况是因为字符串语法*也*使用反斜杠作为引用机制。当您的正则表达式第一次被解析*为字符串常量*时，如果您不将它们加倍，则这些反斜杠将被删除。然后将字符串传递给正则表达式解析器时，它们就消失了。

您真正需要使用`RegExp`构造函数的唯一时间是当您动态构建正则表达式时，或者当它通过 JSON 或其他方式传递到您的代码时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:59:22.243

好吧，对于一个整数，这将是您的正则表达式：

`/^(0|[1-9]\d*)$/`

然后你必须考虑浮动的可能性：

`/^(0|[1-9]\d*)(.\d+)?$/`

然后你必须考虑分数的可能性：

`/^(0|[1-9]\d*)((.\d+)|(\/[1-9]\d*)?$/`

对我来说，这个正则表达式比你原来的更容易阅读，但这当然取决于你。

# java - 热点 JVM 数组分配

> ID：12714064
> 
> 赞同：2
> 
> 时间：2012-10-03T17:51:40.250
> 
> 标签：java, memory-management, jvm

关于分配数组的方式（an），我一直在寻找有关 Hotspot JVM 的正确文档。通过这个，我的意思是数组的实际结构是什么，当在内存中分配时，它是由连续块组成还是树状结构。

我需要这个结构来提出一个大小公式（一个以​​对象大小和数组长度为输入的公式）。根据我运行的测试和我能理解的代码，我想出了数组是连续的结构。像一个对象一样，它们有一个标题，一个用于计数器的 int，然后是用于数据的块。我的测试无法检测到使用树状结构会产生的结构开销，尽管我可以轻松设想这样的事件。

如果这里有人更了解情况，我将不胜感激！我搜索的最佳结果产生了这个链接： [数组内存分配 - 分页](https://stackoverflow.com/questions/7900677/array-memory-allocation-paging) 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T14:35:25.077

可能有点晚了，但它是这样的：

数组被分配为连续的块。大小可以通过使用[sun.misc.Unsafe类（](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/misc/Unsafe.java#Unsafe)[这里](http://robaustin.wikidot.com/how-to-write-to-direct-memory-locations-in-java)有一些很棒的教程）来派生，它使您可以本机访问原始内存。例如，`int`s 数组的分配大小为（以字节为单位）：

`Unsafe.ARRAY_INT_BASE_OFFSET + Unsafe.ARRAY_INT_INDEX_SCALE * length`

由于hotspot-jvm 的实现，所有对象都对齐到8 或4 字节（取决于您的平台：AMD64 或x86_32），因此数组的实际大小增加到8 或4 字节的倍数。

使用 unsafe 类，我们可以检查实际数据：

```
public static void main(String[] args) {
    //Get the unsafe object.
    Unsafe unsafe = null;
    try {
        Field field = sun.misc.Unsafe.class.getDeclaredField("theUnsafe");
        field.setAccessible(true);
        unsafe = (sun.misc.Unsafe) field.get(null);
    } catch (Exception e) {
        throw new AssertionError(e);
    }
    //define our array
    int[] data = new int[]{0,1,2,3,4,5,6,7,8,9};
    //calculate length (ignoring alignment)
    int len = Unsafe.ARRAY_INT_BASE_OFFSET + Unsafe.ARRAY_INT_INDEX_SCALE * data.length;
    //Some output formatting
    System.out.print(" 0| ");
    for(int i = 0; i < len; i++){
        //unsafe.getByte retrieves the byte in the data struct with offset i
        //This is casted to a signed integer, so we mask it to get the actual value
        String hex = Integer.toHexString(unsafe.getByte(data, i)&0xFF);
        //force a length of 2
        hex = "00".substring(hex.length()) + hex;
        //Output formatting
        System.out.print(hex);
        System.out.print(" ");
        if(i%4 == 3 && i != len -1){
            System.out.println();
            if(i < 9){
                System.out.print(" ");
            }
            System.out.print((i+1) +"| ");
        }
    }
    System.out.println();
} 
```

结果是：

```
 0| 01 00 00 00 
 4| 00 00 00 00 
 8| 32 02 8c f5 
12| 08 00 00 00 
16| 00 00 00 00 
20| 01 00 00 00 
24| 02 00 00 00 
28| 03 00 00 00 
32| 04 00 00 00 
36| 05 00 00 00 
40| 06 00 00 00 
44| 07 00 00 00 
```

所以我们可以看到，整数 a 保存在 little-endian 中，从偏移量 16 开始。偏移量 12-16 处的整数是我们数组的长度。0-12 的字节组成了一些幻数，尽管我不太确定它是如何工作的。

***笔记***

我建议不要编写使用 JVM 属性的代码，因为它是高度不可移植的，并且可能会在更新之间中断。不过，我认为您可以放心地假设数组是作为连续块分配的。

# c# - 为什么 Array.BinarySearch() 给出负数？

> ID：12714070
> 
> 赞同：5
> 
> 时间：2012-10-03T17:52:25.507
> 
> 标签：c#

我有一些对我来说没有多大意义的代码。我有一个字符串数组，我正在使用二进制搜索在 foreach() 循环中对它们进行计数。除了排序之外，我尝试输出的代码都完全相同。我不确定为什么我会得到我得到的结果。我认为它应该两次都以相同的方式计算数组值。有什么帮助吗？

代码：

```
using System;
public class Driver {
    public static void Main(string [] args) {
        String [] s = {"Bob", "Jane", "Will", "Bill", "Liz"};

        Console.WriteLine("Before Sorting:\n----------");
        foreach(string item in s) {
            Console.WriteLine("{0}. {1}", Array.BinarySearch(s, item) + 1, item);
        }
        Console.WriteLine("Will is at position {0}", Array.BinarySearch(s, "Will") + 1);

        Console.WriteLine("\n\nAfter Sorting:\n----------");
        Array.Sort(s);
        foreach(string item in s) {
            Console.WriteLine("{0}. {1}", Array.BinarySearch(s, item) + 1, item);
        }
        Console.WriteLine("Will is at position {0}", Array.BinarySearch(s, "Will") + 1);
    }
} 
```

输出：

```
Before Sorting:
----------
1\. Bob
2\. Jane
3\. Will
0\. Bill
-2\. Liz
Will is at position 3

After Sorting:
----------
1\. Bill
2\. Bob
3\. Jane
4\. Liz
5\. Will
Will is at position 5 
```

我敢肯定这完全是愚蠢的，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T17:53:31.997

二进制搜索仅适用于已排序的数组。它没有找到价值：

> 如果未找到 value 并且 value 小于数组中的一个或多个元素，则为负数，它是大于 value 的第一个元素的索引的按位补码。如果未找到 value 并且 value 大于数组中的任何元素，则为一个负数，它是 (最后一个元素的索引加 1) 的按位补码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T17:54:21.293

[Array.BinarySearch](http://msdn.microsoft.com/en-us/library/2cy9f6wb.aspx)要求对数组进行排序。从文档中：

> 此方法不支持搜索包含负索引的数组。在调用此方法之前必须对数组进行排序。

按照设计，它将返回负值：

> 如果未找到 value 并且 value 小于数组中的一个或多个元素，则为负数，它是大于 value 的第一个元素的索引的按位补码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:54:36.027

二进制搜索适用于排序数组。你的数组没有排序，所以你得到了预期的随机结果。

# asp.net-mvc - ASP.NET MVC 4 中的等效用户控件

> ID：12714071
> 
> 赞同：39
> 
> 时间：2012-10-03T17:52:30.633
> 
> 标签：asp.net-mvc

我正在开发一个新的 ASP.NET MVC 4 应用程序。我真的在尝试以“MVC”的方式做事。特别是，我对使用 Razor 视图引擎很感兴趣。请注意，我来自网络表单背景，所以我的问题可能看起来很尴尬。

我正在尝试了解是否有与 MVC 中的用户控件等效的东西？如果有，它们叫什么？如果不是，在 MVC 中创建可重用组件的推荐方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-03T18:04:43.243

您正在寻找`@Html.Action`和`@Html.Partial`。

它们允许您在视图中呈现[部分视图](https://docs.asp.net/en/latest/mvc/views/partial.html)或完整的[控制器操作](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/creating-an-action-cs)。这是 MVC 领域中常见的重用模式。

有时，如果控制器操作太繁重，您可能想要制作[displayFor 或 editorFor 模板。](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)经验法则是，如果您需要在页面上多次执行并且需要以表单形式发布，请考虑在模板中执行。

asp.net 中的控件覆盖了相当大的范围，MVC 将其细化了一点。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-03T17:59:27.627

要在 MVC 中创建可重用的 HTML 组件，您可以在`Views/Shared`文件夹中创建一个局部视图，并将`@HTML.Partial("_PartialViewName")`其包含在任何其他视图或局部视图中。[您可以在本文](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)中找到有关局部视图的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T07:20:56.653

你可以试试：

*   `_ViewStart.cshtml`在共享文件夹中添加查看开始
*   使布局为空（如果需要）`@{ Layout = null; }`
*   在你想喜欢的地方调用这个页面`@Html.Partial("_ViewStart")`

# actionscript-3 - AS3 - 删除父容器中的子容器不会正确重新定位子容器

> ID：12714073
> 
> 赞同：0
> 
> 时间：2012-10-03T17:52:41.910
> 
> 标签：actionscript-3, grid, click, containers

我制作了这个插件，它将容器的所有子对象以网格形式定位。现在我为容器中的子元素添加了一个点击处理程序，当我单击其中一个时，它被删除了。当我在右侧删除一整行（从上到下）时，一切顺利，但是当我在左侧删除一整行时，容器中所有项目的位置都保持在原位，但容器本身将被移动到 x = 0 和 y = 0。我想要的是容器中的所有孩子都被移动到 x:0, y:0 作为一组。

一些关于我得到什么和我想要什么的图片：

**1）我得到什么：**

![我在启动时有什么](../Images/f9b81b9826c5b9eba8ee3c928863b54a.png)

**2）当我删除左侧的一整行时得到什么：**

![当我删除左侧的一整行时得到什么](../Images/a1384c11dad6605f0df2610db496047a.png)

**3）我想要什么：**

![我想要的是](../Images/e6a29d2c3e4713c450052cb5999af994.png)

**我使用的代码：**

```
private function clickHandler(event:MouseEvent):void {

    var name:String = event.currentTarget.name;

    if(container.getChildByName(name) != null)
    container.removeChild(container.getChildByName(name));
    trace(name, "container.width: ", container.width);
    trace(name, "container.width: ", container.height);
    trace(name, "container.x: ", container.x);

    container.graphics.clear();
    container.graphics.beginFill(0x2C2C2C);
    container.graphics.drawRect(container.x ,container.y, container.width, container.height);
    container.graphics.endFill();

} 
```

有人知道如何解决这个问题吗？:)

**编辑：创建网格的代码：**

```
private function generateGrid(rows:int, cols:int, spacing:int):void
    {
        for (var py:int = 0; py <rows; py++)
        {
            for (var px:int = 0; px <cols; px++)
            {
                if(childs.length > 0)
                {
                    var child:* = childs.shift();

                    child.x = (child.width + spacing) * px;
                    child.y = (child.height + spacing) * py;

                } else {
                    break;
                }

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T00:45:05.477

没有什么需要“修复”的，你只是没有编写任何代码来移动这些对象，所以它们没有移动。您正在根据新宽度重绘容器的背景，但实际上并未移动该容器内的任何对象。

有很多方法可以做到这一点。想到的最简单的解决方案是这样的：
- 遍历容器的所有子项并**找到最低的 x 位置**。
- 再次循环并**从每个孩子的 x 位置减去最低 x 值**。

（您可能也想对 y 位置执行此操作，因此当您移除第一行时它们会向上移动。）

每次删除孩子时，您都将运行整个过程。如果最低位置为 0，表示最左边的位置有一个物体，那么什么都不会移动，如果有一个空白行，则最低 x 将大于 0，所有东西都会移动那个量。

**免责声明：**
不要将图形视图与数据结构混为一谈可能会“更好”，但这是我可以提供的最佳建议，而无需查看您的其余代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:29:59.870

```
package  {

    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Grid extends Sprite{

        private var _squ:Square;
        private var _cont:Sprite;

        public function Grid() {
            // constructor code
            _cont = new Sprite();
            addChild(_cont);
            for( var i:uint = 0;i< 20; i++){
                _squ = new Square(50,50,2,Math.random() * 0xFFFFFF);
                _cont.addChild(_squ);
                _squ.name = "square_"+i;
                _squ.x = 100 + 52 * Math.round(i%5);
                _squ.y = 50 + 52 * Math.floor(i/5);
                _squ.buttonMode = true;
            }           
            this.addEventListener(MouseEvent.CLICK, onClickAction);
        }
        public function gridAlign(cont:Sprite):void{
            for( var i:uint = 0;i< cont.numChildren; i++){                              
                _cont.getChildAt(i).x = 100 + 52 * Math.round(i%5);
                _cont.getChildAt(i).y = 50 + 52 * Math.floor(i/5);
            }
        }
        private function onClickAction(e:MouseEvent):void{
            _cont.removeChild(_cont.getChildByName(e.target.name));
            this.gridAlign(_cont);
        }
    }   
} 
```

试试这个。

# javascript - For循环在Javascript中生成多个XML请求

> ID：12714076
> 
> 赞同：0
> 
> 时间：2012-10-03T17:53:05.513
> 
> 标签：javascript, xml, for-loop, xml-parsing, xmlhttprequest

我需要访问一系列 XML 文档，并尝试使用动态生成每个请求的 for 循环来实现：

```
for (i=0;i<routes.length;i++) {
routeRequestURL = "http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=" + routes[i].name + "&terse";
routeRequest.open("GET", routeRequestURL);
routeRequest.send();
routeResponse = routeRequest.responseXML;
route = routeResponse.getElementsByTagName("route")[0];
for (var j = 0; j < route.childNodes.length; j++) {
    if (route.childNodes[j].tagName == "stop") {
        routes[i].stops.push(new Stop(route.childNodes[j].getAttribute("tag"), route.childNodes[j].getAttribute("lat"), route.childNodes[j].getAttribute("lon")));
    }
  }
} 
```

`routes`是一个`route`对象数组，它具有三个变量：`name`、`label`和`stops`，它本身就是一个`stop`对象数组。

我在 Chrome 的 javascript 控制台中试用了该代码，当我使用`routes[0]`. 当我尝试在控制台中运行循环时，我收到以下错误消息：`TypeError: Cannot call method 'getElementsByTagName' of null`.

如果运行每一行代码都`routes[0]`不会产生错误，那么为什么`routeResponse`在 for 循环的第一次迭代中为 null？我在某处错过了关闭错误吗？

**编辑：**我试图包含一个`readystatechange`回调，但是，作为 javascript 的新手，不能完全弄清楚如何去做。我试过了：

```
for (i=0;i<routes.length;i++) {
routeRequestURL = "http://webservices.nextbus.com/service/publicXMLFeed?command=routeConfig&a=sf-muni&r=" + routes[i].name + "&terse";
routeRequest.open("GET", routeRequestURL);
routeRequest.onreadystatechange = function() {
    routeResponse = routeRequest.responseXML;
    route = routeResponse.getElementsByTagName("route")[0];
    for (var j = 0; j < route.childNodes.length; j++) {
        if (route.childNodes[j].tagName == "stop") {
            routes[i].stops.push(new Stop(route.childNodes[j].getAttribute("tag"), route.childNodes[j].getAttribute("lat"), route.childNodes[j].getAttribute("lon")));
        }
      }
    }
routeRequest.send();
} 
```

它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:35:32.140

两件事情：

1.  在`readystatechange`您添加的回调中，您必须检查响应是否已完成加载
2.  回调引入了一个闭包，这将导致您对`i`.

以下代码应解决这两个问题：

```
routeRequest.onreadystatechange = (function(i) { return function() {
    if(routeRequest.readyState == 4 && routeRequest.status == 200) {
        routeResponse = routeRequest.responseXML;
        route = routeResponse.getElementsByTagName("route")[0];
        for (var j = 0; j < route.childNodes.length; j++) {
            if (route.childNodes[j].tagName == "stop") {
                routes[i].stops.push(new Stop(route.childNodes[j].getAttribute("tag"), route.childNodes[j].getAttribute("lat"), route.childNodes[j].getAttribute("lon")));
            }
        }
     }
}})(i); 
```

# c# - 如何读取和编辑 XML 节点

> ID：12714079
> 
> 赞同：1
> 
> 时间：2012-10-03T17:53:13.870
> 
> 标签：c#, xml

我对这一切都很陌生，并且正在努力寻找答案，所以任何指向正确方向的指针都会很棒。

我有一个来自我无法控制的系统的 XML 文件，它会像这样生成它：

```
<?xml version="1.0" ?>
<WatchConfig>
<ProcessList>
    <Process>
        <RunOnDesktop>0</RunOnDesktop>
        <DaysToKeepBackup>10</DaysToKeepBackup>
        <Scheduler>
            <Active>-1</Active>
            <Startup>0</Startup>
            <SelfRepl>0</SelfRepl>
            <MaxPercent>0</MaxPercent>
            <Delay>4</Delay>
            <AsSoon>-1</AsSoon>
            <OneTime>0</OneTime>
            <Period>0</Period>
            <Week>1</Week>
            <Interval>2</Interval>
        </Scheduler>
        <UniqueName>0ZISFZL6O6S5001</UniqueName>
        <Name>Process1</Name>
        <Group/>
        <MetaFileName/>
                 </Process>
    <Process>
        <RunOnDesktop>0</RunOnDesktop>
        <DaysToKeepBackup>10</DaysToKeepBackup>
        <Scheduler>
            <Active>0</Active>
            <Startup>0</Startup>
            <SelfRepl>0</SelfRepl>
            <MaxPercent>20</MaxPercent>
            <Delay>4</Delay>
            <AsSoon>-1</AsSoon>
            <OneTime>0</OneTime>
            <Period>0</Period>
            <Week>1</Week>
            <Interval>2</Interval>
        </Scheduler>
        <UniqueName>00ZJENPXPX1KL07</UniqueName>
        <Name>Process2</Name>
        <Group/>
        <MetaFileName/>
    </Process>
</ProcessList>
</WatchConfig> 
```

我想要做的是通读它并修改调度程序节点下的活动值，理想情况下能够指定我要修改的进程的名称。（因为在这个例子中有两个）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:06:27.967

使用 Xlinq 最简单：

```
var doc = XDocument.Load(fileName);
var p = doc.Descendants("Process")
      .Where(e => e.Element("UniqueName").Value == procName )
      .Single();

var a = p.Element("Scheduler").Element("Active");            
a.Value = "+1";

doc.Save(outFileName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:07:08.370

也许您可以尝试使用 LINQ 之类的东西

你可以这样做来加载 XML

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;
public class EmployeeServices
{
    XElement _empXml = XElement.Load(@"employees.xml");
} 
```

//然后查询信息你可以这样做

```
public List<string> GetDepartments()
{
  //query the XML and group by department
   // select only the departments in the group
   var deptQuery =
   from emp in _empXml.Descendants("Employee")
   group emp by emp.Element("Department").Value
   into empGroup
   select empGroup.First().Element("Department").Value;
   return deptQuery.ToList();
} 
```

这是从 MCTS 书中摘录的示例，希望对您有所帮助。

# html - CSS，浮动和边距

> ID：12714092
> 
> 赞同：1
> 
> 时间：2012-10-03T17:54:23.993
> 
> 标签：html, css

如果我有例如这样的html：

```
<div id="left">
  items
<div>
<div id="right">
  items
</div> 
```

和这样的CSS：

```
#left
{
  float: right;
}
#right
{
  margin-left: 10px;
} 
```

右块的边距从屏幕左侧计算，而不是从左 div 的右边界计算。如何直接从左侧块的右侧边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:21:18.637

***我更喜欢向左***浮动。

HTML

```
<div id="left">
  <!-- Left Content -->
</div>​

<div id="right">
  <!-- Right Content -->
</div>

<div class="clear"></div> <!-- Clear the floats --> 
```

CSS

```
#left
{
  float: left;
}

#right
{
  float: left;
  margin-left: 10px;
}

.clear
{
  clear:both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:57:46.120

翻转你的 div 并应用于`float: right`两者。[工作示例。](http://jsfiddle.net/kBE4K/)

```
<div id="right">
  right
</div>
<div id="left">
  left
</div>​

#left
{
  float: right;
}
#right
{
    float: right;
    margin-left: 10px;
}​ 
```

# android - 调用 thread.start() 时 android-Application 崩溃。使用 AndroidPlot API 的应用

> ID：12714101
> 
> 赞同：0
> 
> 时间：2012-10-03T17:54:53.310
> 
> 标签：android, multithreading, bluetooth, uuid, android-logcat

我正在构建一个应用程序来绘制通过蓝牙接收的动态值。由于我是 android 新手，我使用了[android 开发人员指南上](http://developer.android.com/guide/topics/connectivity/bluetooth.html)的教程，但是当它尝试访问 Thread.start() 方法时应用程序崩溃了。这是代码，我无法发布 LogCat，因为我的模拟器不支持蓝牙。这是代码。 **MainActivity.java**

```
package com.example.enose.sensor;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.LinkedList;
import java.util.Set;
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.MessageQueue;
import android.widget.TextView;
import android.widget.Toast;

import com.androidplot.xy.BoundaryMode;
import com.androidplot.xy.LineAndPointFormatter;
import com.androidplot.xy.LineAndPointRenderer;
import com.androidplot.xy.SimpleXYSeries;
import com.androidplot.xy.XYPlot;
public class MainActivity extends Activity {
    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        }

    private static final int HISTORY_SIZE = 30;
    public static final int MESSAGE_READ = 0;
    private XYPlot aprHistoryPlot = null;
    private SimpleXYSeries alcohol=null;
    private SimpleXYSeries lpg=null;
    private SimpleXYSeries methane=null;
    private SimpleXYSeries quality=null;
    private LinkedList<Number> alcoholHistory;
    private LinkedList<Number> lpgHistory;
    private BluetoothAdapter mBluetoothAdapter;
    //private UUID uid;
    //Thread to initiate connection
    private class ConnectThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;
        public ConnectThread(BluetoothDevice device) {
            // Use a temporary object that is later assigned to mmSocket,
            // because mmSocket is final
            BluetoothSocket tmp = null;
            mmDevice = device;

            // Get a BluetoothSocket to connect with the given BluetoothDevice
            try {

                tmp = device.createRfcommSocketToServiceRecord(UUID.fromString("0000110100001000800000805F9B34FB"));
            } catch (IOException e) { }
            mmSocket = tmp;
        }

        public void run() {
            // Cancel discovery because it will slow down the connection
            mBluetoothAdapter.cancelDiscovery();

            try {
                // Connect the device through the socket. This will block
                // until it succeeds or throws an exception
                mmSocket.connect();
            } catch (IOException connectException) {
                // Unable to connect; close the socket and get out
                try {
                    mmSocket.close();
                } catch (IOException closeException) { }
                return;
            }

            // Do work to manage the connection (in a separate thread)
            //manageConnectedSocket(mmSocket);
        }
        public void manageConnectedSocket(BluetoothSocket socket)
        {
            ConnectedThread data=new ConnectedThread(socket);
            data.start();
        }
        /** Will cancel an in-progress connection, and close the socket */
        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) { }
        }
    }
    public class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the input and output streams, using temp objects because
            // member streams are final
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) { }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            byte[] buffer = new byte[1024];  // buffer store for the stream
            int bytes; // bytes returned from read()
            // Keep listening to the InputStream until an exception occurs
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);
                    // Send the obtained bytes to the UI activity
                //    h.obtainMessage(MESSAGE_READ,bytes,-1,buffer)
                  //          .sendToTarget();

                } catch (IOException e) {
                    break;
                }
            }
        }

        /* Call this from the main activity to send data to the remote device */
        public void write(byte[] bytes) {
            try {
                mmOutStream.write(bytes);
            } catch (IOException e) { }
        }

        /* Call this from the main activity to shutdown the connection */
        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) { }
        }
    }
    private LinkedList<Number> methaneHistory;
    {
        alcoholHistory = new LinkedList<Number>();
        lpgHistory = new LinkedList<Number>();
        methaneHistory = new LinkedList<Number>();

        alcohol = new SimpleXYSeries("Alcohol");
        lpg = new SimpleXYSeries("LPG");
        methane = new SimpleXYSeries("Methane");
        quality = new SimpleXYSeries("Air Quality");
    }
    private class MyHandler extends Handler
    {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            int val=msg.arg1;
            byte[] d=(byte[]) msg.obj;
            Double s1;
            s1=Double.longBitsToDouble(val);
            alcoholHistory.addLast(s1);
            if(alcoholHistory.size()>30)
                alcoholHistory.removeFirst();
            alcohol.setModel(alcoholHistory,SimpleXYSeries.ArrayFormat.Y_VALS_ONLY);
            aprHistoryPlot.redraw();
        }

    }
    //MyHandler h;
    private BluetoothDevice selDevice;
    private Context context;
    private BluetoothSocket tmp;
    private ConnectThread connect;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Handler h=new Handler();
        context=this;
        setContentView(R.layout.activity_main);
        aprHistoryPlot = (XYPlot) findViewById(R.id.aprHistoryPlot);
        alcoholHistory.addFirst(2);
        lpgHistory.addFirst(3);
        methaneHistory.addFirst(4);
        alcoholHistory.addFirst(3);
        lpgHistory.addFirst(2);
        methaneHistory.addFirst(1);

        alcohol.setModel(alcoholHistory, SimpleXYSeries.ArrayFormat.Y_VALS_ONLY);
        lpg.setModel(lpgHistory, SimpleXYSeries.ArrayFormat.Y_VALS_ONLY);
        methane.setModel(methaneHistory, SimpleXYSeries.ArrayFormat.Y_VALS_ONLY);
        aprHistoryPlot.setRangeBoundaries(0, 5,BoundaryMode.FIXED);
        aprHistoryPlot.setDomainBoundaries(0, 30, BoundaryMode.FIXED);
        aprHistoryPlot.addSeries(alcohol, LineAndPointRenderer.class, new LineAndPointFormatter(Color.rgb(0, 100, 200), Color.BLACK,null));
        aprHistoryPlot.addSeries(lpg, LineAndPointRenderer.class, new LineAndPointFormatter(Color.rgb(100, 200, 100), Color.BLACK,null));
        aprHistoryPlot.addSeries(methane, LineAndPointRenderer.class, new LineAndPointFormatter(Color.rgb(200, 100, 100), Color.BLACK,null));
        aprHistoryPlot.setDomainStepValue(1);
        aprHistoryPlot.setTicksPerRangeLabel(3);
        aprHistoryPlot.setDomainLabel("time");
        aprHistoryPlot.getDomainLabelWidget().pack();
        aprHistoryPlot.setRangeLabel("level");
        aprHistoryPlot.getRangeLabelWidget().pack();
        aprHistoryPlot.disableAllMarkup();
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            // Device does not support Bluetooth
            Toast.makeText(context, "Not supported", Toast.LENGTH_LONG).show();
        }
        else{
            //Toast.makeText(context, "test1", Toast.LENGTH_SHORT).show();
        if (!mBluetoothAdapter.isEnabled()) {
            mBluetoothAdapter.enable();
         // Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
         //   startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
        }
        Toast.makeText(context, "test2", Toast.LENGTH_SHORT).show();
        Set<BluetoothDevice> devices=mBluetoothAdapter.getBondedDevices();
        boolean isDeviceSet=false;
        if(devices==null)
        {
            Toast.makeText(context, "No paired devices", Toast.LENGTH_LONG).show();

        }
        else
        {
            //Toast.makeText(context, "test3", Toast.LENGTH_SHORT).show();
            //BluetoothDevice dev=mBluetoothAdapter.getRemoteDevice("006645ffly477");
            for (BluetoothDevice device : devices) {
                // Add the name and address to an array adapter to show in a ListView
                //mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                selDevice=device;
                isDeviceSet=true;
                //TextView tv=(TextView) findViewById(R.id.txtlist);
                //tv.setText("Bluetooth device "+selDevice.getName()+" selected");
                break;
                }
        Message msg=h.obtainMessage();
        //uid=new UUID(7659464,976328762);
        //Toast.makeText(context, "test4", Toast.LENGTH_SHORT   ).show();
            //connect=new ConnectThread(dev);
            //connect.run();
            //dev=mBluetoothAdapter.getRemoteDevice("006645ffly477");
            //if(dev!=null)
                //Toast.makeText(context, "device null", Toast.LENGTH_SHORT).show();
            //else

        //connect=new ConnectThread(selDevice);
          //    connect.run();
            }
        }
        }
    } 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.enose.sensor"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.BLUETOOTH" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.androidplot.xy.XYPlot
    android:id="@+id/aprHistoryPlot"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_marginTop="10px"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    title="eNose Readings"/>
    <TextView 
        android:id="@+id/txtlist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

**日志猫**

```
10-04 16:09:01.508: E/InputDispatcher(62): channel '4074d648 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-04 16:09:01.508: E/InputDispatcher(62): channel '4074d648 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-04 16:12:09.808: E/InputDispatcher(62): channel '405ecbb8 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-04 16:12:09.808: E/InputDispatcher(62): channel '405ecbb8 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-04 21:11:42.588: E/InputDispatcher(62): channel '405a9a88 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-04 21:11:42.588: E/InputDispatcher(62): channel '405a9a88 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-04 21:11:57.488: E/InputDispatcher(62): channel '40746548 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-04 21:11:57.488: E/InputDispatcher(62): channel '40746548 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
10-04 21:39:31.018: E/InputDispatcher(62): channel '4061f108 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
10-04 21:39:31.018: E/InputDispatcher(62): channel '4061f108 com.example.enose.sensor/com.example.enose.sensor.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

如果这行不通。有人可以发布一个关于通过蓝牙连接到具有已知 MAC 地址的设备的简单教程吗？还有人可以解释获取 UUID 的过程及其用途吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:07:39.653

尝试在您的清单中添加此权限：

```
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T06:21:09.357

您无法在模拟器中使用蓝牙，因此它会崩溃。你需要一个真正的蓝牙设备来测试它。

# c# - xaml 中的禁用按钮

> ID：12714106
> 
> 赞同：0
> 
> 时间：2012-10-03T17:55:23.467
> 
> 标签：c#, wpf, xaml

我遇到了 xaml 问题...我创建的按钮未启用。这是 xaml 部分：

```
<Button Margin="0,2,2,2" Width="70" Content="Line" 
        Command="{x:Static local:DrawingCanvas.DrawShape}"
        CommandTarget="{Binding RelativeSource={RelativeSource Mode=FindAncestor, 
            AncestorType={x:Type Window}}, Path=DrawingTarget}"
        CommandParameter="Line">           
</Button> 
```

在构造函数之前：

```
 public static RoutedCommand DrawShape = new RoutedCommand(); 
```

在 ctor 我有：

```
this.CommandBindings.Add(new CommandBinding(DrawingCanvas.DrawShape, DrawShape_Executed, DrawShapeCanExecute)); 
```

然后我有：

```
private void DrawShapeCanExecute(object sender, CanExecuteRoutedEventArgs e)
{
    e.CanExecute = true;  **//Isn't this enough to make it enable?**
    en.Handled = true; 
```

}

```
private void DrawShape_Executed(object sender, ExecutedRoutedEventArgs e)
{
    switch (e.Parameter.ToString())
    {
        case "Line":
            //some code here (incomplete yet)
            break;
    } 
```

当我删除块中的第一行（`Command="{x:Static ...}"`）时，它会再次启用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:56:55.030

确保该`CanExecute`命令的属性返回 true。如果它返回 false，它会自动禁用使用该命令的控件。

可以执行应该返回一个布尔值，我有点惊讶它没有给出编译错误。无论如何尝试将其更改为此。

```
private bool DrawShapeCanExecute(object sender, CanExecuteRoutedEventArgs e) 
{
    return true; 
} 
```

编辑：

好的，因为您刚刚透露了您想要的只是一个执行命令的简单按钮，这里是从我最近的一个项目中复制的一个非常简单的实现。首先在某个地方定义这个类。

```
public class GenericCommand : ICommand
{
    public event EventHandler CanExecuteChanged { add{} remove{} } 

    public Predicate<object> CanExecuteFunc{ get; set; }

    public Action<object> ExecuteFunc{ get; set; }

    public bool CanExecute(object parameter)
    {
        return CanExecuteFunc(parameter);
    }

    public void Execute(object parameter)
    {
        ExecuteFunc(parameter);
    }
} 
```

接下来在您的视图模型中定义一个命令并定义我在通用命令中创建的两个属性（这只是实现 ICommand 接口的基本内容）。

```
 public GenericCommand MyCommand { get; set; }

 MyCommand = new GenericCommand();
 MyCommand.CanExecuteFunc = obj => true;
 MyCommand.ExecuteFunc = obj => MyMethod;

 private void MyMethod(object parameter)
 {
      //define your command here
 } 
```

然后只需将按钮连接到您的命令。

```
<Button Command="{Binding MyCommand}" /> 
```

如果这对您来说太过分了（MVVM 确实需要一些额外的初始设置）。你总是可以这样做...

```
<Button Click="MyMethod"/> 
```

```
private void MyMethod(object sender, RoutedEventArgs e)
{
    //define your method
} 
```

# python - python -regex 匹配和for循环逐行运行文件

> ID：12714108
> 
> 赞同：3
> 
> 时间：2012-10-03T17:55:29.047
> 
> 标签：python, regex, file, loops, for-loop

所以我试图将文件的每一行与正则表达式匹配，我做了以下事情：

```
import re
regex='\S+\s+(\S{6})\s+VAR'
with open('/home/jyt109/humsavar.txt') as humsavar:
    for line in humsavar:
        match=regex.search(line)
        print match.group(1) 
```

预期的输出是每行中的特定 6 个字符，而不是我收到如下错误：

```
Traceback (most recent call last):
  File "exercise.py", line 74, in <module>
    match=regex.search(line)
AttributeError: 'str' object has no attribute 'search' 
```

我发现（从下面的链接）要将正则表达式与文件的每一行匹配，必须首先通过 file.read() 将文件转换为列表

[匹配文件对象中的多行正则表达式](https://stackoverflow.com/questions/2433648/match-multiline-regex-in-file-object)

要重新处理帖子，有没有更简单的方法（最好超过 1 行而不是 2 行）？

```
humsavar=open('/home/jyt109/humsavar.txt')
text=humsavar.read() 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:00:08.063

我想你可能误解了那个链接在说什么。如果您的正则表达式匹配可以跨越多行，那么您需要使用`file.read()`. 如果换行符永远不会成为匹配项的一部分，那么您可以逐行读取文件并尝试分别匹配每一行。

如果要单独检查每一行，可以使用`file.readlines()`获取行列表或仅遍历文件对象，例如：

```
with open('/home/jyt109/humsavar.txt') as f:
    for line in f:
        match = regex.search(line) 
```

假设您仍然想一次读取整个文件内容，您可以像这样在一行中执行此操作：

```
text = open('/home/jyt109/humsavar.txt').read() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T19:42:35.750

这是一个简单的单行。我在下面的数据文件上对其进行了测试。使用正则表达式时，使用[原始字符串表示法](http://docs.python.org/library/re.html#raw-string-notation)很方便，如下所示。我不知道您的数据文件应该是什么样子，但我只是制作了一个与您指定的搜索模式相匹配的文件。

**代码**

```
import re
print re.findall(r'\S+\s+(\S{6})\s+VAR', open('/tmp/test.txt').read()) 
```

**输出**

```
['000001', '000002', '123456'] 
```

**测试.txt**

```
x 000001 VAR
x 000002 VAR
x 123456 VAR 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:00:09.960

`.read()`不会将文件变成列表（`.readlines()`does）；相反，它将整个文件放入一个字符串中。

但即使那样你也可以使用正则表达式：当用 编译它时`re.MULTILINE`，锚点`^`和`$`将匹配各行的开始和结束：

```
>>> regex = re.compile(r"^Match this regex in each line$", re.MULTILINE)
>>> regex.findall(text) 
```

结果将是所有匹配项的列表。

# twitter - 全球 Facebook 赞和推文数量

> ID：12714110
> 
> 赞同：1
> 
> 时间：2012-10-03T17:55:36.677
> 
> 标签：twitter, facebook-like

我开始在 blogspot 上写博客，我想创建社交网络共享选项。我使用 Facebook 和 Twitter 的 API 来点赞文章或推文。但我发现，只有在我的博客页面完成时，点赞或推文计数器才会增加。但有时，人们喜欢我 Facebook 墙上的文章或转发它。但这些赞或转发不算数。有什么办法可以得到总数吗？

我希望我很清楚:-)

# c# - 如何使用 c# 在字符串的特定索引处插入字符？

> ID：12714111
> 
> 赞同：5
> 
> 时间：2012-10-03T17:55:42.927
> 
> 标签：c#, winforms

我在文本框中输入了用户输入的字符串。如果用户未输入，我需要在字符串中插入字符“#”。

```
expected format : aaa#aa#a 
```

这是验证和更正预期格式的代码：-

如果用户输入：aaaaaa，

```
if (enteredtext.Length >= 7 && enteredtext.EndsWith(","))
            {
                if (enteredtext.IndexOf('#', 3, 3) == -1)
                    enteredtext = enteredtext.Insert(3, "#");
                if (enteredtext.IndexOf('#', 6, 6) == -1)
                    enteredtext= enteredtext.Insert(6, "#");
            } 
```

还有其他最好的方法来实现它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T17:59:36.867

而不是`if (enteredtext.IndexOf('#', 3, 3) == -1)`你可以这样做：

```
if(enteredtext[3] != '#')
  enteredtext = enteredtext.Insert(3, "#"); 
```

# c# - 在 C# 中格式化绑定到数据表的列表框项

> ID：12714112
> 
> 赞同：0
> 
> 时间：2012-10-03T17:55:47.813
> 
> 标签：c#, listbox, listboxitem

我有一个数据表，其中包含一个名为“path”的字段，用于存储文件的完整路径。我已将“路径”字段绑定到列表框。列表框显示完整的文件路径，但我想格式化路径，因此它只显示文件名而不是完整的文件路径，但仍与存储完整文件路径的“路径”字段绑定。有什么办法吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:01:03.247

这里的关键是值成员和显示成员。

这可能会有所帮助：[c# listBox DisplayMember](https://stackoverflow.com/questions/4008022/c-sharp-listbox-displaymember)

# php - 如何分解具有级别的php数组？

> ID：12714113
> 
> 赞同：1
> 
> 时间：2012-10-03T17:56:00.577
> 
> 标签：php, multidimensional-array, parent-child, levels

我有一个包含股票信息的 MySQL 表，其中包括股票所属的主要行业和子行业（例如，可口可乐股票属于行业“消费品”和子行业“饮料 - 软饮料”。

```
$SQL = "SELECT name, industrysector, subsector FROM Stocks WHERE economic_indicator_type = 'Stock' GROUP BY industrysector, subsector, name";
$result = mysql_query($SQL) or die ("Error in query: $SQL. " . mysql_error());

while ($row = mysql_fetch_row($result)) {

 $stocks[$i]['name'] = $row[0];
 $stocks[$i]['industrysector'] = $row[1];  
 $stocks[$i]['subsector'] = $row[2]; 

 $i++;
}

$stocksTotals = array();

foreach($stocks as $amount) { 
    $stocksTotals[$amount['industrysector']] = $stocksTotals[$amount['industrysector']].", ".$amount['name']; 
}

foreach($stocksTotals as $name => $amount) {    echo $name.": ".substr($amount,1)."<br>"; } 
```

我的问题是我没有得到处理第三级的代码。我想首先输出所有行业部门（例如基础材料），然后是每个行业部门的所有子行业（例如基础资源），然后是每个子行业对应的所有股票名称。

目前我只得到行业部门，然后是股票名称，因为我不明白如何在数组处理代码中处理这个。

任何建议将不胜感激！我在这里放了一张图片（http://imageshack.us/photo/my-images/853/mysqltophp.gif/）以供更好的参考。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:58:12.093

`foreach`循环需要是这样的：

```
 //considering you want the value as "$amount['industrysector'], $amount['name']" 
foreach($stocks as $amount) { 
// $stocksTotals[$amount['industrysector']] = $amount['industrysector'] .", ".$amount['name']; 
  echo $amount['industrysector'].": "."$amount['industrysector'], $amount['name']"."<br>";
 } 
```

你不需要另一个 foreach 循环。

编辑：您也需要更改获取行的方式，

```
while ($row = mysql_fetch_assoc($result)) {
  $stocks[$i]['name'] = $row['name'];
  $stocks[$i]['industrysector'] = $row['industrysector'];  
  $stocks[$i]['subsector'] = $row['industrysector']; 
  $i++;
 }

foreach($stocks as $amount) { 
 $output = "$amount['industrysector'] : $amount['industrysector'], $amount['subsector']";
 if( $amount['name'] !== '' )
   $output .= "<br>" . $amount['name'];
 ";
} 
```

# coldfusion - ColdFusion XML 文档返回类型

> ID：12714117
> 
> 赞同：1
> 
> 时间：2012-10-03T17:56:29.727
> 
> 标签：coldfusion, coldfusion-9

我创建了一个抽象的`file parser`cfc。听起来，这抽象了我从文件系统读取文件时所需的一些常见任务。

所述组件的一个子组件用于解析 XML 文件并返回一个冷融合 XML 文档。现在这一切都很完美，但是，我无法弄清楚的一件事是**如何明确定义 xml 文档的返回类型**，这是我热衷于执行的。

负责返回 XML 文档的方法如下：

```
public coldfusion.xml.XmlNodeList function parse(string filePath = "", boolean isCaseSensitive = false, string validator = "")
{
  super.parse(arguments.filePath);
  var data = getData();
  if (len(arguments.validator)) {
    setDocument(xmlParse(data, arguments.isCaseSensitive, arguments.validator));
  } else {
    setDocument(xmlParse(data, arguments.isCaseSensitive));
  }
  return getDocument();
} 
```

可以看到返回类型是`coldfusion.xml.XmlNodeList`. 我已经设法通过使用以下客户端代码来解决这个问题。

```
<cfscript>

  factory = new Library.parser.Factory();
  parser  = factory.getParser("XmlFileParser");
  xmlDoc  = parser.parse("/var/www/development/Framework/test/testfile.xml");

  /** XMLDoc is now a coldfusion document object **/

  writeDump(xmlDoc);
  writeDump(getMetadata(xmlDoc).getName()); /** outputs coldfusion.xml.XmlNodeList **/

</cfscript> 
```

这是不正确的，我得到的错误是：

`The value returned from the parse function is not of type coldfusion.xml.XmlNodeList.`

我错过了一些非常简单的东西吗？我应该这么在意吗？

**编辑：**

添加了 getDocument 方法（如您所见，它的返回类型为“any”）

```
public any function getDocument()
{
  return variables.document;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:23:15.207

是的。根据[文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f5c.html)，您想要的 XML 的返回类型是......错误......“XML”。

# objective-c - Apple Maps CalloutAccessoryControlTapped 从不触发

> ID：12714119
> 
> 赞同：1
> 
> 时间：2012-10-03T17:56:31.240
> 
> 标签：objective-c, ios, xamarin.ios

我有一个问题，当用户单击标注时，CalloutAccessoryControlTapped 永远不会被调用。这在 Apple 地图中是否已删除或更改？

在 iOS 5 中，我的调用如下所示：

(图片) 餐厅名称/地址 >

当我点击呼叫时，我会得到一个对话框。在 iOS6 中，我的调用如下所示：

餐厅名称/地址

为什么我在 Apple 地图中的呼叫发生了变化？

这是它在 iOS 6 中的样子：

![Apple 地图是否删除了 CalloutAccessControlTapped 功能？](../Images/ef72fc05243cb63e8a9a9a257b2f1705.png)

这是我的代码：

```
using System;
using System.Drawing;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using MonoTouch.MapKit;
using MonoTouch.CoreLocation;
using System.Linq;
using MenuFinderAN.BusinessLogic.MenuFinderServiceReference;
using System.Collections.Generic;

namespace MenuFinderMT
{
public partial class MapUniversalController : UIViewController
{
    static bool UserInterfaceIdiomIsPhone {
        get { return UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Phone; }
    }

    public AppDelegate AppDelegate { get; set; }

    public List<IGrouping<string, RestaurantLocation>> LocationList { get; set; }

    public MapUniversalController (List<IGrouping<string, RestaurantLocation>> locationList)
        : base (UserInterfaceIdiomIsPhone ? "MapUniversalController_iPhone" : "MapUniversalController_iPad", null)
    {
        LocationList = locationList;
    }

    public override void DidReceiveMemoryWarning ()
    {
        // Releases the view if it doesn't have a superview.
        base.DidReceiveMemoryWarning ();

        // Release any cached data, images, etc that aren't in use.
    }

    MKMapView mapView;

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        AppDelegate = UIApplication.SharedApplication.Delegate as AppDelegate;
        Title = "Locations";

        mapView = new MKMapView (View.Bounds);  
        mapView.AutoresizingMask = UIViewAutoresizing.FlexibleDimensions;       
        //mapView.MapType = MKMapType.Standard; // this is the default
        //mapView.MapType = MKMapType.Satellite;
        //mapView.MapType = MKMapType.Hybrid;
        View.AddSubview (mapView);

        List<RestaurantLocation> locations = LocationList.SelectMany (x => x).ToList ();

        // create our location and zoom 

        double lat = 0;
        double lng = 0;

        foreach (RestaurantLocation loc in locations) {
            if (loc.Latitude > 0 && lat == 0) {
                lat = loc.Latitude;
                lng = loc.Longitude;
            }

            // add a basic annotation
            var annotation = new BasicMapAnnotation (new CLLocationCoordinate2D (loc.Latitude, loc.Longitude), loc.Name, loc.Address + ", " + loc.City);
            mapView.AddAnnotation (annotation);
        }

        CLLocationCoordinate2D coords = new CLLocationCoordinate2D (lat, lng); 

        MKCoordinateSpan span = new MKCoordinateSpan (MilesToLatitudeDegrees (20), MilesToLongitudeDegrees (20, coords.Latitude));

        // set the coords and zoom on the map
        mapView.Region = new MKCoordinateRegion (coords, span);

        // assign the delegate, which handles annotation layout and clicking
        mapView.Delegate = new MapDelegate (this, locations);

    }

    /// <summary>
    /// Converts miles to latitude degrees
    /// </summary>
    public double MilesToLatitudeDegrees (double miles)
    {
        double earthRadius = 3960.0;
        double radiansToDegrees = 180.0 / Math.PI;
        return (miles / earthRadius) * radiansToDegrees;
    }

    /// <summary>
    /// Converts miles to longitudinal degrees at a specified latitude
    /// </summary>
    public double MilesToLongitudeDegrees (double miles, double atLatitude)
    {
        double earthRadius = 3960.0;
        double degreesToRadians = Math.PI / 180.0;
        double radiansToDegrees = 180.0 / Math.PI;

        // derive the earth's radius at that point in latitude
        double radiusAtLatitude = earthRadius * Math.Cos (atLatitude * degreesToRadians);
        return (miles / radiusAtLatitude) * radiansToDegrees;
    }

    public override void ViewDidUnload ()
    {
        base.ViewDidUnload ();

        // Clear any references to subviews of the main view in order to
        // allow the Garbage Collector to collect them sooner.
        //
        // e.g. myOutlet.Dispose (); myOutlet = null;

        ReleaseDesignerOutlets ();
    }
}

// The map delegate is much like the table delegate.
class MapDelegate : MKMapViewDelegate
{
    protected string annotationIdentifier = "BasicAnnotation";
    MapUniversalController mapUniversalController;
    List<RestaurantLocation> locations;

    public MapDelegate (MapUniversalController mapUniversalController, List<RestaurantLocation> locations)
    {
        this.mapUniversalController = mapUniversalController;
        this.locations = locations;
    }

    /// <summary>
    /// This is very much like the GetCell method on the table delegate
    /// </summary>
    public override MKAnnotationView GetViewForAnnotation (MKMapView mapView, NSObject annotation)
    {
        // try and dequeue the annotation view
        MKAnnotationView annotationView = mapView.DequeueReusableAnnotation (annotationIdentifier);

        // if we couldn't dequeue one, create a new one
        if (annotationView == null)
            annotationView = new MKPinAnnotationView (annotation, annotationIdentifier);
        else // if we did dequeue one for reuse, assign the annotation to it
            annotationView.Annotation = annotation;

        // configure our annotation view properties
        annotationView.CanShowCallout = true;
        (annotationView as MKPinAnnotationView).AnimatesDrop = true;
        (annotationView as MKPinAnnotationView).PinColor = MKPinAnnotationColor.Green;
        annotationView.Selected = true;

        // you can add an accessory view, in this case, we'll add a button on the right, and an image on the left
        annotationView.RightCalloutAccessoryView = UIButton.FromType (UIButtonType.DetailDisclosure);

        annotationView.LeftCalloutAccessoryView = new UIImageView (UIImage.FromBundle ("Images/Icons/MenuFinder_Logo-29x29.png"));

        return annotationView;
    }

    public override void CalloutAccessoryControlTapped (MKMapView mapView, MKAnnotationView view, UIControl control)
    {
        var annotation = view.Annotation;
        var coords = (annotation as MKAnnotation).Coordinate;
        RestaurantLocation restaurantLocation = locations.Where (a => a.Latitude == coords.Latitude && a.Longitude == coords.Longitude).FirstOrDefault ();
        UIAlertView alertt = new UIAlertView ("Directions?", "Would you like directions?", null, "Yes", null);
        alertt.AddButton ("No");
        alertt.Clicked += delegate(object sender, UIButtonEventArgs e) {
            if (e.ButtonIndex == 0) {
                double slat = (double)mapUniversalController.AppDelegate.Latitude;
                double slng = (double)mapUniversalController.AppDelegate.Longitude;
                string saddr = slat.ToString () + "," + slng.ToString ();
                string daddr = coords.Latitude.ToString () + "," + coords.Longitude.ToString ();
                NSUrl url = new NSUrl ("http://maps.google.com/maps?saddr=" + saddr + "&daddr=" + daddr);
                UIApplication.SharedApplication.OpenUrl (url);
            } else {
                mapUniversalController.AppDelegate.CurrentRestaurantLocation = restaurantLocation;
                // Pass the selected object to the new view controller.
                mapUniversalController.NavigationController.PushViewController (new RestaurantDetailsUniversalController (), true);
            }
        };
        alertt.Show ();

    }

    // as an optimization, you should override this method to add or remove annotations as the 
    // map zooms in or out.
    public override void RegionChanged (MKMapView mapView, bool animated)
    {
    }
}

class BasicMapAnnotation : MKAnnotation
{
    /// <summary>
    /// The location of the annotation
    /// </summary>
    public override CLLocationCoordinate2D Coordinate { get; set; }

    protected string title;
    protected string subtitle;

    /// <summary>
    /// The title text
    /// </summary>
    public override string Title
    { get { return title; } }

    /// <summary>
    /// The subtitle text
    /// </summary>
    public override string Subtitle
    { get { return subtitle; } }

    public BasicMapAnnotation (CLLocationCoordinate2D coordinate, string title, string subTitle)
        : base()
    {
        this.Coordinate = coordinate;
        this.title = title;
        this.subtitle = subTitle;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:18:28.807

代理处理行为在 iOS 6 中略有改变。请确保在添加任何注释之前分配 MapDelegate。

*编辑：参见[规则#2](http://spouliot.wordpress.com/2012/03/26/events-vs-objective-c-delegates/)：*在设置属性或使用实例之前设置委托或所有事件*（博客详细说明了为什么它很重要，而不仅仅是在 MonoTouch 中）*

# objective-c - UIView clipToBounds 没有停止子视图接收父视图之外的触摸

> ID：12714122
> 
> 赞同：1
> 
> 时间：2012-10-03T17:56:37.507
> 
> 标签：objective-c, ios, uiview, uiview-hierarchy

我有两个 UIView。我正在使用一个来包含另一个，以便我可以将一个滑入另一个。我遇到了一个问题，即使子视图被剪辑到其父视图的边界，它仍然会接收触摸事件并阻止对其他底层视图的访问。

我有三个显示布局的屏幕截图。我已将父级着色为绿色，将子级着色为红色。

![](../Images/2626e83d2e14f9f51f7010226c17ac8c.png) ![](../Images/1e3015154f3e196c30280d6d48242c99.png) ![](../Images/c045c6b52c8dcf320763fc54348c41b9.png)

这个想法是用户单击“查看”并且子视图向上滑动。subView在默认位置时，UITabBar被覆盖，无法点击。您可以在底部出现红色视图的第一张图像中看到这一点。当 subView 移到顶部时，可以单击 UITabBar，因为它现在可见。在第三张图片中，我展示了在绿色 UIView 上启用 clipToBounds 的情况。

我启用了 clipToBounds，所以我不明白为什么 subView 会阻塞底层的 UITabBar。我对 clipToBounds 的理解完全错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:15:27.020

使用 clipToBounds 只会影响 subView 的视觉布局，不会影响逻辑布局。这意味着虽然我的 subView 对眼睛不可见，但触摸可见。

我通过动画 subView 的大小而不是它的位置来解决这个问题。在我下面的代码中，stationProximityView 是 subView。我将其大小设置为 40 像素的动画，以使黑色标题重新出现。

```
[UIView beginAnimations:@"stationProximityBar" context:NULL];
self.stationProximityView.view.frame = CGRectOffset(self.stationProximityView.view.frame, 0, -40);
[UIView commitAnimations]; 
```

当我不再需要它时，我会将其动画化。

```
[UIView beginAnimations:@"stationProximityBar" context:NULL];
self.stationProximityView.view.frame = CGRectMake(0 ,0, 320, 500);
[UIView commitAnimations]; 
```

如果用户点击视图按钮，则显示整个子视图：

```
 [UIView beginAnimations:@"stationProximityBar" context:NULL];
 self.stationProximityView.view.frame = CGRectMake(0,460,320,40);
 [UIView commitAnimations]; 
```

解雇导致视图以与小条相同的方式隐藏。

```
 [UIView beginAnimations:@"hideStationProximityBar" context:NULL];
 self.stationProximityView.view.frame = CGRectMake(0,0,320,500);
 [UIView commitAnimations]; 
```

目前，此代码仅在 iPhone 5 上进行测试，因此 500 的硬编码高度会导致以前的 iPhone 型号出现问题。

# css - 溢出时的边框半径渲染错误：隐藏

> ID：12714130
> 
> 赞同：3
> 
> 时间：2012-10-03T17:57:08.633
> 
> 标签：css

我在所有主要浏览器（测试：IE 9、Chrome、Firefox）下渲染边界半径都有一个错误。

发生的事情是我有一个带有边框半径的菜单栏，其中一些链接宽度为背景颜色。为了使按钮保持在菜单的形状内，我在菜单容器上设置了一个溢出隐藏。直到一切顺利，然后，角落边缘出现了一条小白线。

我在这里做了一个简化的测试用例：http: [//dabblet.com/gist/3828561](http://dabblet.com/gist/3828561)

有人有解决方案来克服这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:12:05.933

一个依赖于尺寸的解决方案......但也许没关系，因为它是一个菜单栏而不是一个内容持有者？无论如何，你可以设置`border-radius`你的内部元素，给父级一个高度，也可以使用这个高度值作为`line-height`内部元素的值。

应用高度/线高后，您不必使用`overflow: hidden`.

由于您的菜单栏的边框半径为`3px`，因此对第一个菜单项的相应角应用相同的舍入，如下所示：

`.outer .inner:first-of-type { border-radius: 3px 0 0 3px; }`

并使栏的相应角更加圆润，将它们隐藏在第一个菜单项下方：

`.outer { border-radius: 10px 3px 3px 10px; }`

[http://dabblet.com/gist/3828755](http://dabblet.com/gist/3828755)

# c++ - 我在这里滥用了模板吗？

> ID：12714132
> 
> 赞同：3
> 
> 时间：2012-10-03T17:57:17.210
> 
> 标签：c++, templates

我试图为 Mesh 类进行通用编程。（我需要 CPU 转换来变形网格，这就是为什么这*不是*在 GPU 中完成的，以防你想问）

A`Mesh<T>`包含 3d 形状的顶点，以及面连接（哪些顶点连接在一起形成三角形）。

这里`T`是顶点的类型，一些类型的模型有 PNCT 类型（位置、法线、颜色、texcoord）而其他的只是 PC（位置、颜色）。

```
struct VertexPNCT {
    Vector3 pos, normal ;
    Vector4 color ;
    Vector2 tex ;
} ;

struct VertexPC {
    Vector3 pos ;
    Vector4 color ;
} ; 
```

当然，**所有**顶点都有一个位置！

但这是我的问题。

`Mesh<T>`必须实现一个`transform`方法。当然，每个顶点格式都有一个位置，如果它的命名一致（`.pos`），那么该方法可以正常工作：

`.pos`由于每个顶点肯定都有一个位置，如果我总是在结构中调用该成员，那么我可以向模板类`Vertex*`添加一个方法：`.transform``Mesh<T>`

```
void transform( Matrix4& mat )
{
    each vertex
      vertex.pos = mat * vertex.pos ; // transform it
} 
```

现在这是搞砸了。 *如果*顶点格式中有法线，那么法线也必须进行转换（通过“法线矩阵”）。现在我的模板中有一个“if 语句”？我必须`.transform`为每种顶点类型编写一个模板特化方法（基本上分为两类，有法线的和没有法线的）？

我在这里滥用了模板吗？错过了一些“编程船”？

这是我真正想做的合乎逻辑的事情：

```
void transform( Matrix4& mat )
{
    each vertex in vertices
    {
      vertex.pos = mat * vertex.pos ; // transform it
      #ifdef vertex.normal
      vertex.normal = mat * vertex.normal ; // transform normal as well*
      #endif
    }
} 
```

[* 假设转换没有尺度（那么你不需要使用“正常矩阵”）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:07:42.617

如果您可以编写一个层次结构，`Vertex`其中 base 仅保存位置（和`.pos`成员），a`VertexWNormal`保存`.normal`然后其余部分从那里继承，那么您只需添加非模板化重载并让编译器处理：

```
void transform( Matrix4& m, VertexBase& v ) {
   // transform only pos
}
void transform( Matrix4& m, VertexWNormal& v ) {
   transform(m,static_cast<VertexBase&>(v));
   // transform normal here
}
void tranform( Matrix4& m ) {
   foreach vertex:
       transform(m,vertex);
} 
```

当然，这对你的设计是否有意义取决于你没有展示的很多东西，这很难说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:54:27.817

如果您只有两种类型的顶点，我建议您按照 David 上面描述的方式进行操作：只需创建两个进行转换的函数，并根据顶点类型使用重载调用它们。这也适用于更多的顶点类型，但是每次添加新的顶点类型时，都需要再次重载该函数。对于此处描述的简单功能，这可能没问题，但如果该功能实际上更复杂，它可能会变得烦人。

部分修复是创建一个特征类，它告诉特定顶点类型是否具有普通成员。可以设置默认值，使其在大多数情况下都是正确的，并且可以选择基于特征的合适函数。您仍然会提供两个版本的代码，但对于每个额外的顶点类型，所有需要的是定义特征：

```
template <typename> struct VertexHasNormal { enum { value = false }; };
template <> struct VertexHasNormal<VertexPNCT> { enum { value = true }; };

template <typename V, template T, template S>
void transform(V& vertices, Matrix4& m, T S::*member) {
    for (auto& v: vertices) {
        v.*member = mat * v.*member;
    }
}

template <bool, typename T>
struct Transform {
    template <typename V>
    void call(V& vertices, Matrix4& m) {
        transform(vertices, m, &T::pos);
    }
};
template <typename T>
struct Transform<bool, T> {
    template <typename V>
    void call(V& vertices, Matrix4& m) {
        transform(vertices, m, &T::pos);
        transform(vertices, m, &T::normal);
    }
};

template <typename T>
void Mash<T>::transform(Matrix4& m) {
    Transform<VertexHasNormal::value>::call(this->vertices, m);
} 
```

函数模板`transform()`是对一系列顶点进行实际变换的函数。我将其分解是因为我认为可以分解但不需要分解它有点可爱。它也不需要使用指向成员的指针`auto`，等等。`Transform`类型只是使用的辅助类型，因为函数模板不能部分特化。它专门用于顶点类型是否具有`normal`成员的特征。最后，`Mash<T>::transform()`只是分派到专门功能的适当版本。

唯一需要做的是`normal`在定义另一个具有成员的顶点时添加新的特征特化。这可能是不可取的。在这种情况下，可以确定结构是否具有`normal`使用类型特征调用的可访问数据成员。但是，我不认为我可以从头顶输入这个。实现它的基本思想是利用替换失败不是错误（“SFINAE”）这一事实，并且如果测试类型确实具有必要的成员，则可以设置事物以在两个潜在成员之间创建歧义。有一个 Boost 组件可以做到这一点，但如果您需要自己创建它，大约需要 10 行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:04:11.803

您可能想要创建结构类并从两个基类派生它们，一个是正常的，一个是没有的。然后，您可以使用模板专业化在这两个基类之间进行选择（而不是所有顶点类）。

# encryption - 哪里可以找到BrowserID本地验证的说明

> ID：12714134
> 
> 赞同：1
> 
> 时间：2012-10-03T17:57:24.463
> 
> 标签：encryption, public-key-encryption, browserid

[常见问题解答](https://developer.mozilla.org/en-US/docs/Persona/FAQ#Can_I_verify_assertions_locally.2C_or_must_I_use_the_remote_verification_service.3F)建议我不要对 BrowserID（角色）安全断言进行本地验证，但是我从来不擅长遵循说明 。

所以...无论如何我都想实施本地验证。看起来客户端库传递给服务器端的唯一东西是一个称为“断言”的加密内容块。大概它是使用一些公钥加密方案加密或签名的，但我很难找到任何细节。

谁能解释一下，或者指点我的细节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:26:49.077

该规范当前没有更新最新的数据格式更改，但这个 Python 库能够自行验证 Persona 断言（即不使用 verifier.login.persona.org）：

[http://pypi.python.org/pypi/PyBrowserID](http://pypi.python.org/pypi/PyBrowserID)

# xcode - 在 html xcode 中检测音频

> ID：12714142
> 
> 赞同：0
> 
> 时间：2012-10-03T17:58:00.127
> 
> 标签：xcode, audio, uiwebview, detect

我在 X Code 中有一个二维码阅读器，当它检测到网页时，它应该打开一个网页视图。它就像一个魅力，虽然它无法检测到音频文件。我有一个链接，它在浏览器中加载音频，并在我的应用程序中重定向到错误。这是[网址](http://net.lib.byu.edu/~mjw243/01_Track_1.html)。

在浏览器中`.html`变成 mp3 并且音频自动播放。

如何检测它是音频还是网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:01:05.617

您所能做的就是点击 URL 并查看`Content-Type`返回的标头。

您可以在受支持的情况下使用`HEAD`请求，并在需要时回退`GET`，并在获得适当的标头后简单地断开连接。

# sql - 比较 2 个不同表格的总和

> ID：12714144
> 
> 赞同：3
> 
> 时间：2012-10-03T17:58:07.030
> 
> 标签：sql, oracle

我正在尝试比较 A.BUSINESS_UNIT_PO、A.PO_ID、A.LINE_NBR 上 2 个表之间的数量总和。下面的查询对我不起作用。你们谁能告诉我这个查询中的问题。

```
SELECT A.BUSINESS_UNIT_PO,
       A.PO_ID, 
       A.LINE_NBR 
 FROM PS_BCT_DTL A
WHERE A.BCT_DET_STATUS=1
  AND SUM(A.QTY) = (SELECT SUM(B.QTY_SH_RECVD) 
                     FROM PS_RECV_LN_SHIP B
                    WHERE A.BUSINESS_UNIT_PO=B.BUSINESS_UNIT_PO
                      AND A.PO_ID= B.PO_ID
                      AND A.LINE_NBR= B.LINE_NBR
                     )
GROUP BY A.BUSINESS_UNIT_PO,A.PO_ID, A.LINE_NBR 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:00:35.133

尝试`having`如下使用：

```
SELECT A.BUSINESS_UNIT_PO,
       A.PO_ID, 
       A.LINE_NBR,
       SUM(A.QTY) 
FROM PS_BCT_DTL A
WHERE A.BCT_DET_STATUS=1    
GROUP BY A.BUSINESS_UNIT_PO,A.PO_ID, A.LINE_NBR
having SUM(A.QTY) =(SELECT SUM(B.QTY_SH_RECVD) 
                 FROM PS_RECV_LN_SHIP B
                 WHERE A.BUSINESS_UNIT_PO=B.BUSINESS_UNIT_PO
                 AND A.PO_ID= B.PO_ID
                 AND A.LINE_NBR= B.LINE_NBR) 
```

[这](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj14854.html)是有关拥有的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:12:27.553

```
select
  A.BUSINESS_UNIT_PO,A.PO_ID,A.LINE_NBR,
  sum(a.qty) sumA,
  sum(b.qty) sumB
from
  a inner join
  b on 
   A.BUSINESS_UNIT_PO=B.BUSINESS_UNIT_PO AND 
   A.PO_ID= B.PO_ID  AND 
   A.LINE_NBR= B.LINE_NBR
group by
 A.BUSINESS_UNIT_PO,A.PO_ID,A.LINE_NBR
having
  sum(a.qty) = sum(b.qty); 
```

# fluent-nhibernate - NHibernate / Fluent NHibernate 中的 ValueObject 持久性

> ID：12714149
> 
> 赞同：1
> 
> 时间：2012-10-03T17:58:20.053
> 
> 标签：fluent-nhibernate, domain-driven-design

我是 ORM 和 DDD 的新手，所以请耐心等待。另外，我不是母语人士，所以用英语表达领域术语会有点困难。

我正在开发一个控制诉讼的系统。

我的域有一个名为 Case 的实体。

```
Public class Case
{
   public virtual int Id { get; set; }
   public virtual List<Clients> Clients { get; set;}
   public virtual LawsuitType LawsuitType { get; set;}
} 
```

根据我的收集，CaseType 是一个值对象。这是一个简单的类型，它只有案例类型描述。例如：“离婚”、“子女抚养费”等。这只是我感兴趣的描述。但我不想成为一个免费的描述符。我想控制呈现给用户的选项，并做一些报告。

所以我想用“LawsuitTypes”表将它映射到数据库上。该表将有一个 int Id 和一个字符串描述符。

我可以使用 ComponentMap 来实现吗？还是我弄错了，CaseType 是一个实体？

谢谢，路易斯安吉洛。

编辑：

建议使用枚举。但这行不通，因为这意味着 LawsuitTypes 是由开发人员设置的，而不是用户设置的。一些用户有权添加/删除 LawsuitTypes，而其他用户则没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T22:51:45.477

恕我直言，您应该将 LawsuitTypes 视为一个自己的实体。请记住，您可能希望有一天使用其他信息来扩展 LawsuitTypes（要求有时变化非常快）。我想到的是“默认”属性或类似的东西......这意味着额外的工作，但这样你就可以更灵活地满足未来的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:09:01.623

如果我正确理解你的问题，`Description("")`属性和简单`enum`应该可以工作。[更多关于这里](https://stackoverflow.com/questions/4367723/get-enum-from-description-attribute)。

```
public enum LawsuitTypes
{
  Divorce,

  [Description("Child Support")]
  ChildSupport,

  [Description("Some Other Element")]
  SomeOtherElement
} 
```

# awk - 打印小值时如何使 awk 不使用科学计数法？

> ID：12714155
> 
> 赞同：43
> 
> 时间：2012-10-03T17:58:48.577
> 
> 标签：awk

在以下 awk 命令中

```
 awk '{sum+=$1; ++n} END {avg=sum/n; print "Avg monitoring time = "avg}' file.txt 
```

我应该改变什么来删除科学计数法输出（显示为 1.5e-05 的非常小的值）？

我无法成功使用 OMFT 变量。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-03T18:01:25.180

您应该使用[`printf`AWK 语句](http://www.gnu.org/software/gawk/manual/html_node/Printf.html)。这样您就可以指定填充、精度等。在您的情况下，[`%f`控制字母](http://www.gnu.org/software/gawk/manual/html_node/Control-Letters.html#Control-Letters)似乎更合适。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-12-01T12:04:30.660

> 我无法成功使用 OMFT 变量。

它实际上是`OFMT`（**o**输出**f**或**m** a **t**），例如：

```
awk 'BEGIN{OFMT="%f";print 0.000015}' 
```

将输出：

```
0.000015 
```

相对于：

```
awk 'BEGIN{print 0.000015}' 
```

哪个输出：

```
1.5e-05 
```

[GNU AWK 手册](https://www.gnu.org/software/gawk/manual/html_node/OFMT.html)说，如果你想符合 POSIX，它应该是*浮点转换规范*。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-09T01:48:31.403

设置`-v OFMT='%f'`（无需将其嵌入到我的 awk 语句中）在我想要从 awk 得到的只是对任意浮点数列求和的情况下对我有用。

正如 OP 所发现的， awk 产生的指数符号非常小，

```
$ some_accounting_widget | awk '{sum+=$0} END{print sum+0}'
8.992e-07  # Not useful to me 
```

将 OFMT 设置为固定的，但也过于激进地四舍五入，

```
$ some_accounting_widget | awk -v OFMT='%f' '{sum+=$0} END{print sum+0}'
0.000001   # Oops. Rounded off too much. %f rounds to 6 decimal places by default. 
```

指定小数位数让我得到了我需要的东西，

```
$ some_accounting_widget | awk -v OFMT='%.10f' '{sum+=$0} END{print sum+0}'
0.0000008992    # Perfect. 
```

# ruby - 如何使用 sinatra 将函数参数传递给 erb 视图？

> ID：12714158
> 
> 赞同：1
> 
> 时间：2012-10-03T17:59:10.703
> 
> 标签：ruby, sinatra, erb

我目前有这个：

```
get '/myapp/get/:func' do
    erb :server, :locals => {:func => params[:func]}
end 
```

然后在我的 server.erb 文件中我有这个：

```
if (func == "myFunc1")
    myFunc1
elsif (func == "myFunc2")
    myFunc2
etc... 
```

定义了 server.erb 中调用的 ruby​​ 函数。

现在我想定义一个新函数，并且我想将一个变量传递给它。所以我在 server.erb 中想要的是这样的：

```
def myNewFunc(param1)
   # do stuff with param1
end 
```

我如何传递`param1`给 sinatra？

注意：我要传入的参数只是0到6之间的一个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:23:16.383

您不必以`params`本地人的身份通过，您可以在代码中的任何位置设置它们——如果您是这个意思的话。

# ios - Facebook 测试用户登录 URL - 清除缓存/cookie 后不起作用

> ID：12714174
> 
> 赞同：1
> 
> 时间：2012-10-03T18:00:12.637
> 
> 标签：ios, safari, mobile-safari, facebook-test-users

我的网站有一个测试用户页面，它加载了一个由 4 个按钮组成的简单网格，单击该按钮时，会启动他们关联的 Facebook 测试用户 login_url。我通过 PHP SDK 获得这些，它们工作得很好......

除非在 Safari（移动设备和桌面设备）中清除 cookie...在这种情况下，测试用户 login_url 将我带到 Facebook 登录页面，提示我登录。

如果我清除 cookie 并首先访问普通的旧 www.facebook.com 主页，然后导航到我的网站，它就可以正常工作。

我知道第 3 方 cookie 设置会阻止我在 iFrame 中成功加载此 login_url，但我不明白为什么当我实际尝试点击链接时它不起作用。

这是一个错误吗？Facebook 测试用户是一个相当粗糙的开发者功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:20:17.867

**免责声明**：我为 Facebook 工作，但我不是平台团队的成员，所以我对这个主题的了解并不比普通开发人员多得多。

该`login_url`机制不是一个成熟的安全登录机制。我冒昧地猜测它会将当前登录用户的身份从普通用户切换到测试用户。但是，如果当前没有登录用户，则无法切换身份，因此需要要求您登录。

但是，测试用户确实有一个用户 ID 和密码（作为对创建 API 的响应返回），您可以使用它们来完成标准 Facebook 登录过程。请注意，据我所知，目前没有使用用户 ID/密码自动登录用户的方法 - 它们旨在用于手动登录场景。

# jquery - 隐藏复选框所在的 ap 标签

> ID：12714179
> 
> 赞同：0
> 
> 时间：2012-10-03T18:00:31.750
> 
> 标签：jquery

如何隐藏我的复选框所在的 ap 标签？

```
<p><input type="checkbox" name="qID5[]" class="required" value="232" id="checkbox"  /> - Answered NO to question 4 </p> 
```

这是一些 jquery，它根据条件隐藏复选框本身，但我实际上想隐藏整个 p。我在下面的 jQuery 中进行了哪些更改以隐藏 p 及其中的所有内容而不仅仅是复选框？

```
if(value == 184){
var $radios = $('input:checkbox[name=qID5[]]');
$radios.filter('[value=232]').attr('checked', true);
$radios.filter('[value=232]').show();
}else{
var $radios = $('input:checkbox[name=qID5[]]');
$radios.filter('[value=232]').attr('checked', false);
$radios.filter('[value=232]').hide();
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:01:44.557

用于`.parent`获取封闭`<p>`标签。见下文。

```
if(value == 184){
   var $radios = $('input:checkbox[name=qID5[]]');
   $radios.filter('[value=232]').attr('checked', true);
   $radios.filter('[value=232]').parent().show();
}else{
   var $radios = $('input:checkbox[name=qID5[]]');
   $radios.filter('[value=232]').attr('checked', false);
   $radios.filter('[value=232]').parent().hide();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:05:18.473

该语句`value == 184`将评估为真或假，因此您可以直接使用该语句来设置真/假，而不是编写两次相同的代码并过滤它的触发时间：

```
var $radios = $('input[type="checkbox"][name="qID5[]"][value=232]');
$radios.prop('checked', (value == 184)).closest('p').toggle(value == 184); 
```

括号也比伪选择器更可取，并且`prop`是设置检查状态的正确方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:01:35.177

您可以使用最接近（'p'）选择器，它将搜索最接近的 p 元素，在这种情况下是立即父元素。

```
$(this).closest('p').hide(); 
```

或者

```
$radios.filter('[value=232]').closest('p').hide(); // To Hide

$radios.filter('[value=232]').closest('p').show(); // To Show 
```

或者

```
$radios.filter('[value=232]').parent('p').hide(); // To Hide

$radios.filter('[value=232]').parent('p').show(); // To Show 
```

# r - R中的字符串字段分组

> ID：12714182
> 
> 赞同：4
> 
> 时间：2012-10-03T18:00:41.140
> 
> 标签：r, grouping, data.table, plyr

我有一个这样的数据框：

```
 date      time userid        status
1  02/25/2012  09:22:10   aabc     logged_in
2  02/25/2012  09:30:10   aabc    logged_out
3  02/25/2012  09:29:20   abbc    logged_out
4  02/25/2012  09:27:30    abc     logged_in
5  02/25/2012  09:26:29    abc  login_failed
6  02/25/2012  09:26:39    abc  login_failed
7  02/25/2012  09:26:52    abc  login_failed
8  02/25/2012  09:27:09    abc  login_failed
9  02/25/2012  09:27:20    abc  login_failed
10 02/25/2012  09:24:10   abdc     logged_in
11 02/25/2012  09:24:12   abdc    logged_out
12 02/25/2012  09:22:10   abhc     logged_in
13 02/25/2012  09:30:10   abuc     logged_in
14 02/25/2012  09:30:14   abuc    logged_out
15 02/25/2012  09:29:40    baa     logged_in 
```

我想要每个用户标识的 login_failures 的用户标识、状态和“计数”。我这样做了：

`ddply(mytbl, c('userid', 'status'), function(x) c(count=nrow(x)))`，但这给出了所有用户标识的计数。我想将我的输出限制为仅那些状态为“login_failed”的用户标识。有任何想法吗？我见过有关按数字字段分组的问题，但没有看到有关字符串的问题。

我对 plyr 的所有功能都不是很熟悉。很高兴看到如何使用汇总、聚合、sqldf、data.table 等来完成此操作。慢慢了解它们中的每一个。

谢谢斯里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:17:11.287

```
require(data.table)
DT = as.data.table(mytbl)

DT[status=="login_failed", .N, by=userid] 
```

要命名列：

```
DT[status=="login_failed", list(failed_logins=.N), by=userid] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:10:58.047

```
ddply(mytbl, .(userid), transform, 
failed_logins = length(which(status=="login_failed"))) 
```

根据 Brian Diggs 的观点，我写了上面的内容，因为我假设您希望将此信息附加到原始数据集中。如果没有，并且您只需要摘要，请替换`transform`为`summarise`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T18:16:26.403

与@Maiasaura 略有不同的方法。我过滤到仅失败的登录，然后进行总结。区别在于那些有登录但没有失败登录的 ' 是否`userid`出现在最终结果中是否为 0。

```
ddply(mytbl[mytbl$status=="login_failed",], .(userid), 
  summarise, failed_logins=length(status)) 
```

这给

```
> ddply(mytbl[mytbl$status=="login_failed",], .(userid), 
+   summarise, failed_logins=length(status))
  userid failed_logins
1    abc             5 
```

要完成这些方法，如果你想要所有`userid`的：

```
ddply(mytbl, .(userid), 
  summarise, failed_logins = sum(status=="login_failed")) 
```

这使

```
> ddply(mytbl, .(userid), 
+   summarise, failed_logins = sum(status=="login_failed"))
  userid failed_logins
1   aabc             0
2   abbc             0
3    abc             5
4   abdc             0
5   abhc             0
6   abuc             0
7    baa             0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-03T18:25:14.513

这是使用的基本 R 解决方案`aggregate()`：

```
setNames(aggregate(status ~ userid,
                   mytbl[mytbl$status == "login_failed", ],
                   function(x) length(x)),
         c("userid", "failed_logins"))
#   userid failed_logins
# 1    abc             5 
```

### 更新

想到的另一个有用的功能是`ave()`您可以通过以下方式使用它：

*   首先，用于`ave()`在数据集中添加一个新列，该列获取每个用户的每个活动的运行计数。（**注意**：我必须确保“userid”和“status”列是*字符*类，而不是让它为我工作的*因素）。*

    ```
    mytbl$status_seq <- ave(mytbl$status, mytbl$userid, 
                            mytbl$status, FUN = seq_along)
    head(mytbl)
    #         date     time userid       status status_seq
    # 1 02/25/2012 09:22:10   aabc    logged_in          1
    # 2 02/25/2012 09:30:10   aabc   logged_out          1
    # 3 02/25/2012 09:29:20   abbc   logged_out          1
    # 4 02/25/2012 09:27:30    abc    logged_in          1
    # 5 02/25/2012 09:26:29    abc login_failed          1
    # 6 02/25/2012 09:26:39    abc login_failed          2 
    ```

*   其次，`aggregate()`如前所述使用，为您感兴趣的条件设置子集，并检索`max`值。

    ```
    aggregate(status_seq ~ userid, 
              mytbl[mytbl$status == "login_failed", ],
              function(x) max(x))
    #   userid status_seq
    # 1    abc          5

    aggregate(status_seq ~ userid, 
              mytbl[mytbl$status == "logged_out", ],
              function(x) max(x))
    #   userid status_seq
    # 1   aabc          1
    # 2   abbc          1
    # 3   abdc          1
    # 4   abuc          1 
    ```

请注意，`ave()`如果您使用，可能会更有趣

```
mytbl$status_seq <- ave(mytbl$status, mytbl$date, mytbl$userid, mytbl$status, 
                        FUN = seq_along) 
```

因为这将重置数据集中每一天的计数器。

最后（冒着分享一个可能*太*明显的解决方案的风险），因为您只对计数感兴趣，您可能想要探索`table()`，它会立即为您提供所有信息：

```
table(mytbl$userid, mytbl$status)
# 
#      logged_in logged_out login_failed
# aabc         1          1            0
# abbc         0          1            0
# abc          1          0            5
# abdc         1          1            0
# abhc         1          0            0
# abuc         1          1            0
# baa          1          0            0 
```

# ruby - 在 Ruby 中将元素重新定位到数组的前面

> ID：12714186
> 
> 赞同：25
> 
> 时间：2012-10-03T18:00:54.297
> 
> 标签：ruby

即使来自javascript，这对我来说也很糟糕：

```
irb
>> a = ['a', 'b', 'c']
=> ["a", "b", "c"]
>> a.unshift(a.delete('c'))
=> ["c", "a", "b"] 
```

有没有更清晰的方法将元素放在数组的前面？

**编辑**我的实际代码：

```
if @admin_users.include?(current_user)
  @admin_users.unshift(@admin_users.delete(current_user))
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T22:25:25.270

也许这对你来说看起来更好：

```
a.insert(0, a.delete('c')) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-03T18:03:03.080

也许[Array#rotate](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-rotate)会为你工作：

```
['a', 'b', 'c'].rotate(-1)
#=> ["c", "a", "b"] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-12T03:20:19.397

这是一个比看起来更棘手的问题。我定义了以下测试：

```
describe Array do
  describe '.promote' do
    subject(:array) { [1, 2, 3] }

    it { expect(array.promote(2)).to eq [2, 1, 3] }
    it { expect(array.promote(3)).to eq [3, 1, 2] }
    it { expect(array.promote(4)).to eq [1, 2, 3] }
    it { expect((array + array).promote(2)).to eq [2, 1, 3, 1, 2, 3] }
  end
end 
```

`sort_by`@Duopixel 提出的建议很优雅，但`[3, 2, 1]`可以用于第二次测试。

```
class Array
  def promote(promoted_element)
    sort_by { |element| element == promoted_element ? 0 : 1 }
  end
end 
```

@tadman 使用`delete`，但这会删除所有匹配的元素，因此第四个测试的输出是`[2, 1, 3, 1, 3]`.

```
class Array
  def promote(promoted_element)
    if (found = delete(promoted_element))
      unshift(found)
    end

    self
  end
end 
```

我尝试使用：

```
class Array
  def promote(promoted_element)
    return self unless (found = delete_at(find_index(promoted_element)))
    unshift(found)
  end
end 
```

但这在第三次测试中失败了，因为`delete_at`无法处理 nil。最后，我决定：

```
class Array
  def promote(promoted_element)
    return self unless (found_index = find_index(promoted_element))
    unshift(delete_at(found_index))
  end
end 
```

谁知道一个简单的想法`promote`会如此棘手？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-03T18:14:31.390

如果“优雅”意味着即使以非标准为代价也更具可读性，那么您始终可以编写自己的方法来增强 Array：

```
class Array
  def promote(value)
    if (found = delete(value))
      unshift(found)
    end

    self
  end
end

a = %w[ a b c ]
a.promote('c')
# => ["c", "a", "b"] 
a.promote('x')
# => ["c", "a", "b"] 
```

请记住，这只会重新定位值的单个实例。如果数组中有多个，则在删除第一个之前，后续的可能不会移动。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-07-25T08:38:30.433

加上我的两分钱：

```
array.select{ |item| <condition> } | array 
```

优点：

*   可以将多个项目移动到数组的前面

缺点：

*   这将删除所有重复项，除非它是所需的结果。

示例 - 将所有***奇数***移到前面（并使数组唯一）：

```
data = [1, 2, 3, 4, 3, 5, 1]
data.select{ |item| item.odd? } | data
# Short version:
data.select(&:odd?) | data 
```

结果：

```
[1, 3, 5, 2, 4] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-07T18:20:43.257

其他方式：

```
a = [1, 2, 3, 4]
b = 3

[b] + (a - [b])
=> [3, 1, 2, 4] 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-04T04:16:33.040

最后，我认为这是将元素移到前面的最易读的替代方法：

```
if @admin_users.include?(current_user)
  @admin_users.sort_by{|admin| admin == current_user ? 0 : 1}
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-11T20:23:23.700

如果数组中的所有元素都是唯一的，则可以使用数组算术：

```
> a = ['a', 'b', 'c']
=> ["a", "b", "c"]
> a -= "c"
=> ["a", "b"]
> a = ["c"] + a
=> ["c", "a", "b"] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-21T03:56:58.053

建立在上面：

```
class Array
  def promote(*promoted)
    self - (tail = self - promoted) + tail
  end
end

[1,2,3,4].promote(5)
=> [1, 2, 3, 4]
[1,2,3,4].promote(4)
=> [4, 1, 2, 3]
[1,2,3,4].promote(2,4)
=> [2, 4, 1, 3] 
```

# css - 侧边栏在缩小时向下移动

> ID：12714187
> 
> 赞同：0
> 
> 时间：2012-10-03T18:01:02.357
> 
> 标签：css, zooming

我的网站有问题。当我缩小时，侧边栏会移动到我的主要内容下方。这是[网站](http://startupsandfinance.com/cise5/cise_blue/index.html)。这是我的代码，

```
<div id="content_main" >
                    <div id="content_center">
                            <div id="news_spotlight_container">

                                    <div class="news">
                                    <h2 style=" border-bottom: 6px solid #000000; letter-spacing: 2px;color: #565347; ">WELCOME</h2>
                                            <div class="newsitem">
                                            <br class="clear">
                                                    <h3><a href="#" ><img src="CIS_files/cis_view.png" class="image_news" alt="[ Read Story: X-ray laser ]">Message From Chair Person</a></h3>
                                                            <p>Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou is si si sissi iss is is iss i students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou. </p> 
                                            </div>

                                            <br class="clear">
                                             <div class="newsitem">
                                                    <h3><a href="#" ><img src="CIS_files/cis_view.png" class="image_news" alt="[ Read Story: X-ray laser ]">Research</a></h3>
                                                            <p>Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou is si si sissi iss is is iss i students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou.</p> 
                                            </div>
                                            <br class="clear">
                                             <div class="newsitem">
                                                    <h3><a href="#" ><img src="CIS_files/cis_view.png" class="image_news" alt="[ Read Story: X-ray laser ]">Extra Curricular Activities</a></h3>
                                                            <p>Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou is si si sissi iss is is iss i students.Thankyou students.Thankyou students.Thankyou students.Thankyou students.Thankyou.</p> 
                                            </div>
                                            <br class="clear">
                                            </div> <!-- End news -->

                                            <div id="more-stories">
                                                    <div>
                                                            <h2 style="border-bottom: 6px solid #000000; letter-spacing: 2px; margin-bottom: 10px;">Quick Links</h2> 
                                                    </div>
                                                     <ul id="newslinks">
                                                            <li><a href="#">BE Time Table</a></li>
                                                            <li><a href="#">Lab Workbooks</a></li>
                                                            <li><a href="#">Final Year Projects</a></li>
                                                            <li><a href="#">Contact Us</a></li>
                                                    </ul>

                                            </div>
                                              <div id="more-stories">
                                                    <div>
                                                            <h2 style="border-bottom: 6px solid #000000; letter-spacing: 2px; margin-bottom: 10px;">Hall of Fame</h2> 
                                                    </div>
                                                     <ul id="newslinks">
                                                            <li><a href="#">Shams Uddin</a></li>
                                                            <li><a href="#">Fahad Qasim</a></li>
                                                            <li><a href="#">Zain Akhtar</a></li>
                                                    </ul>

                                            </div>
                                            <div id="more-stories">

                                                    <div>
                                                            <h2 style="border-bottom: 6px solid #000000; letter-spacing: 2px; margin-bottom: 10px;">Events</h2> 
                                                    </div>
                                                     <ul id="newslinks">
                                                            <li><a href="#">TechElete</a></li>
                                                            <li><a href="#">Vision</a></li>
                                                            <li><a href="#">Poster Competition</a></li>
                                                            <li><a href="#">Cache</a></li>
                                                    </ul>
                                            </div>  

                                            <p><!-- End more-stories -->
                                              <br class="clear">
                                            </p>
                                            <div style="width:100%; border-right:0px;"  class="news" >
                                                        <h2 style=" border-bottom: 6px solid  #000000 ;
                                                                        letter-spacing: 2px;
                                                                        ">
                                                                    <a href="#">About CISE</a>
                                                        </h2>
                                                      <br class="clear">
                                                      <img class="image_news" src="CIS_files/cis_view.png" alt="cis view" />
                                      <p>The department of Computer Information &amp; Systems Engineering (CISE) was established in July 1997\. The department has been a pioneer at NED University in many respects. We have set trends that have been followed by many other departments. <br><br>Currently, the department offers a four year bachelors program in morning and masters program in morning as well in evening.</p>

                              </div>
                            </div> <!-- End news_spotlight_container -->
                            <br class="clear">
                    </div><!-- End content_center -->
            </div> <!-- End content_main --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:06:08.823

如果你想适应缩放，你需要给浏览器一些像素的余地。例如 - 如果你有一个 1px 的边框并且你缩小了，这些边框在屏幕上仍然必须是 1px，但容器可能会少几个像素。如果您在精确的像素值上计算宽度和位置，浏览器将不得不调整位置以适应狭窄。

对于您的情况，这`border-right: 1px solid #EAE9E6;`是导致宽度过大的原因。

# language-agnostic - 空指针与悬空指针

> ID：12714199
> 
> 赞同：5
> 
> 时间：2012-10-03T18:02:02.140
> 
> 标签：language-agnostic

空指针和悬空指针之间是否存在有意义的区别？似乎这两个术语都用于不指向任何东西的指针。是否认为悬空指针*曾经*指向某物而现在没有——空指针只是一个不指向任何东西的指针（不管它过去指向什么）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T18:10:57.230

指针术语：

*   悬空（或野）指针：指向某处但不指向有效对象的指针。
*   空指针：指向程序永远不会合法存储数据的特别指定的越界位置的指针。悬空指针的特殊类。
*   未初始化的指针：从未分配给某物地址的指针。一种悬空指针。
*   过时的指针：曾经指向某物的指针，但目标已被删除（通过删除操作符、空闲或超出范围）。一种悬空指针。

悬空的指针可以说是指向Hyperspace或Another Dimension，除了空指针，一般称为指向Nothing。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T18:06:43.390

空指针只是意味着指针没有指向任何东西，或者在某些语言中意味着它不知道它指向什么。但是因为是空指针，你知道这个，代码也知道这个，所以没问题。悬空指针是您认为指向某物但实际上已不存在的指针，因此该指针实际上是不准确的，但并不知道。

# objective-c - NSMutableArray 中的对象全部为空

> ID：12714200
> 
> 赞同：0
> 
> 时间：2012-10-03T18:02:06.580
> 
> 标签：objective-c, ios, nsmutablearray

```
UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SudokuCell.png"]];
NSLog(@"%@", image);
[[self.blocks objectAtIndex:row] setObject:image atIndex:col];
NSLog(@"%@", [[self.blocks objectAtIndex:row] objectAtIndex:col]); 
```

是我正在运行的代码。第一个 NSLog 打印 UIImageView 对象，第二个 NSLog 打印 (null)。为什么第二个 NSLog 打印的内容与第一个不一样？

数组 self.blocks 被初始化为：

```
self.blocks = [[NSMutableArray alloc] initWithCapacity: 9];
for (int i = 0; i < 9; i++)
{
    [self.blocks addObject:[[NSMutableArray alloc]initWithCapacity:9]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:06:36.713

`NSMutableArray`没有`setObject:atIndex:`方法。你应该`insertObject:atIndex:`改用。请注意，索引不能高于数组的计数（不是容量），例如。它不会自动用“空”值填充您的数组。

# google-chrome-extension - 无法弄清楚为什么不会发送 AJAX 请求

> ID：12714203
> 
> 赞同：0
> 
> 时间：2012-10-03T18:02:25.063
> 
> 标签：google-chrome-extension

我即将创建我的第一个 Chrome 扩展程序（它是一个弹出窗口），它将 POST 数据到服务器。以为这很容易，但我卡住了。

在 manifest.json 我设置了“http://mypage[dot]com/”和“http://mypage[dot]com/*”的权限，这样我就可以访问“mypage[dot]com/api”数据必须发送到的地方。所以我的 popup.html 看起来像：

```
 <!doctype html>
     <html lang="en">
       <meta charset="UTF-8">
       <title>myExtension</title>
     </head>
     <body>
       <form name="myform">
         <input type="text" name="myText" id="myText"/>
         <input type="submit" name="senden"/>
       </form>
     </body>
       <script src="jquery-1.8.2.min.js"></script>
       <script src="popup.js"></script>
     </html> 
```

所以我的 popup.js 看起来像：

```
 document.forms["myForm"].addEventListener("submit", sendRequest)
      function sendRequest() {
        var myVar= $('#mytext').val();
        var myrequest= $.ajax({
            type: 'POST',
            url: 'http://mypage.com/api/',
            data: {screen_name: 'myname', api_key: 'myKey', var1: myVar},
            success: function(data, textStatus){
                           alert('request successful');
                     },
            error: function(xhr, textStatus, errorThrown){
                        alert(xhr); alert(textstatus); alert(errorThrown);
                     }
            });
       } 
```

现在，当我点击提交按钮时，它只会给我这三个警报，第一个说：[object Object]，第二个：错误，第三个是空的。

我试图解决这个问题，但我不知道错误在哪里。我还读到了一些 background.html 和 content_script.js，但我不知道我必须用它们做什么，我在互联网上找到了一些扩展，只包含 popup.html 和 popup.js，它们工作得和他们一样好应该做（例如 domai.nr-extension）。

所以我很高兴能解释我必须使用什么以及如何在弹出扩展中正确发布数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:23:15.767

**问题**

如果要进行跨域 ajax 调用，则需要[请求适当的权限](http://developer.chrome.com/extensions/xhr.html#requesting-permission)。

**调试**

`alert()`比is更好的调试变量的方法`console.log()`。要查看此方法的输出，您需要打开一个控制台。要为弹出窗口打开控制台：打开一个弹出窗口，右键单击它并选择“检查元素”。当开发人员工具打开时，导航到“控制台”选项卡。您将获得`console.log(xhr)`比从更多的信息`alert(xhr)`。此外，所有权限警告、无效语法警告等都在控制台上打印出来，便于查找错误。

**来自弹出窗口的 AJAX**

从弹出窗口发送 POST 请求有一周的时间点：当弹出窗口关闭时（并且它很容易关闭 - 当用户单击弹出窗口外的某些内容时）请求被取消。你提到的[背景页面](http://developer.chrome.com/extensions/background_pages.html)来了。背景页面在（惊喜，惊喜）背景下工作，不能轻易关闭。您的弹出窗口应该与后台页面[通信](http://developer.chrome.com/extensions/extension.html#method-getBackgroundPage)并要求它进行 ajax 调用。如果您这样做，即使弹出窗口可能已经关闭，后台页面也会执行 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:11:51.383

首先，您关闭 head 标签但不打开它

试着给你的表格一个像

```
<form id="myform"> 
```

然后我会像这样简化js代码

```
$('#myform').submit(function(){

    var myVar= $('#mytext').val();

    $.ajax({
        url: "http://mypage.com/api/", 
        type: "POST",        
        data: {screen_name: 'myname', api_key: 'myKey', var1: myVar},   
        success: function(data, textStatus){
            alert('request successful');
        },
        error: function(xhr, textStatus, errorThrown){
            alert(xhr); alert(textstatus); alert(errorThrown);
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T20:37:04.790

[在http://mypage.com/api/](http://mypage.com/api/)检查您的功能。通过编写这样的简单响应来测试它：

```
function nameOfFunciton(){
    echo "test";
} 
```

如果您看到“请求成功”警报，则说明您的代码中存在问题。

# ios - ipad精灵/图集动画

> ID：12714204
> 
> 赞同：0
> 
> 时间：2012-10-03T18:02:28.237
> 
> 标签：ios, ipad, animation

我有一个 iPad 应用程序，我需要一个全屏动画 - 在透明的 UIView 中运行。

每次用户获胜时都会运行此动画。

问题是，你会选择以非常大的图像作为源的精灵动画，还是选择小视频剪辑？

请记住，它必须是透明的——它开始四处飘荡。

任何有关方向的输入表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:48:28.533

我会使用精灵，每次用户获胜时加载电影比简单地显示精灵要昂贵得多。

此外，要显示具有透明背景的视频，您必须遍历所有播放器控制器子视图并`backgroundColor`像[这样进行更改](https://stackoverflow.com/a/4372507/529363)

# clearcase - Clearcase：将子分支移动到主分支

> ID：12714206
> 
> 赞同：1
> 
> 时间：2012-10-03T18:02:34.643
> 
> 标签：clearcase

在 clearcase 我开始在一个名为`main/release4/release5`. 在我开始工作后，release4 被合并到 main.js 中。我的同事开始在 main/release5 上工作。无论如何我可以将我的`main/release4/release5`工作转移到`main/release5`吗？

到目前为止，我已经尝试从 to 合并`main/release4/release5`，`main/release5`但没有奏效。文件保留在`main/release4/release5`.

它在版本树中的外观示例：

```
main
|   \
|     release 4
|     /      \ 
main        release 5
    \              \
    release 5      *move files from here
         \ 
         *to here 
```

这是我正在使用的原始配置规范。

```
element * CHECKEDOUT
element - directory * /main/LATEST
element * /main/release4/release5/LATEST
element * /main/release4/LATEST -mkbranch release5
element * /main/LATEST -mkbranch release4 
```

这是我的同事在将第 4 版与主线合并后开始使用的配置规范

```
element * CHECKEDOUT
element - directory * /main/LATEST
element * main/release5/LATEST
element * main/LATEST -mkbranch release5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:23:29.210

这些选择规则以 结尾的想法`branchname/LATEST -mkbranch newBranch`是允许*元素*（文件或目录）从碰巧是 LATEST 的任何版本开始新分支，除非上述`newbranch`.

所以它是一个文件一个文件的机制。

为了确保从 release4 开始的所有文件合并到 main 中，在合并之后的*所有*元素上放置一个标签`main/LATEST`（最好使用用于所述合并的*快照视图），然后使用如下配置规范：*

```
element * CHECKEDOUT
element * .../release5/LATEST
element * REL4 -mkbranch release5
element * main/LATEST -mkbranch release5 
```

从*固定*标签开始分支比从开始更安全`/main/LATEST`（可以随时看到新版本）

* * *

OP [Gregory Peck](https://stackoverflow.com/users/1408045/gregory-peck)评论：

> 使用`.../release5/LATEST`固定它！

“三个点”语法起作用的原因（如“[特定分支上文件的 clearcase 最新版本](https://stackoverflow.com/questions/12140611/clearcase-latest-version-of-a-file-on-a-particular-branch/12140897#12140897)”中所示）是某些版本的分支从分支开始`release4`，其他版本从`main`.

使用，无论从哪个分支开始`.../release5/LATEST`，您都可以选择`LATEST`。`release5``release5`

# c# - 在具有可分辨名称的 Active Directory 中移动计算机时出现问题

> ID：12714214
> 
> 赞同：0
> 
> 时间：2012-10-03T18:02:58.217
> 
> 标签：c#, visual-studio-2010, .net-4.0

我能够让我的代码中的帐户禁用部分工作，但为了让我们的 AD 树更加干净，我们有一个专门创建的`!Disabled`OU。我希望我的代码能够禁用计算机帐户并将其移动到`!Disabled`OU 中。

这是我到目前为止所拥有的：

```
string computerName = Environment.MachineName;
using (PrincipalContext domainContext = new PrincipalContext(ContextType.Domain, null, "username", "password"))
{
    ComputerPrincipal computer = ComputerPrincipal.FindByIdentity(domainContext, computerName);

    if (computer != null)
    {
       try
       {
          computer.Enabled = false;
          label3.Visible = true;
          computer.Save();
          label3.Text = "Computer was disabled in Active Directory." + "\n";

          try
          {
             string LdapDomain = "prefix.domain.suffix";
             string distinguishedName = string.Empty;
             string connectionPrefix = "LDAP://" + LdapDomain;
             DirectoryEntry entry = new DirectoryEntry(connectionPrefix);

             DirectorySearcher mySearcher = new DirectorySearcher(entry);
             mySearcher.Filter = "(&(objectClass=computer)(|(cn=" + computerName + ")(dn=" + computerName + ")))";

             SearchResult result = mySearcher.FindOne();

             if (result == null)
             {
                label3.Text += ("Unable to locate the distinguishedName for the object " + computerName + " in the " + LdapDomain + " domain." + "\n");                           
             }
             else if (result != null)
             {
                 DirectoryEntry directoryObject = result.GetDirectoryEntry();
                 distinguishedName = "LDAP://" + directoryObject.Properties["distinguishedName"].Value;
                 label3.Text += ("Distinguished name is " + distinguishedName + "\n");

                 string newLocation = "OU=!Disabled,DC=prefix,DC=domain,DC=suffix";
                 DirectoryEntry nLocation = new DirectoryEntry("LDAP://" + newLocation);
                 string newName = directoryObject.Name;

                 //directoryObject.MoveTo(nLocation, newName);

                 DirectoryEntry moveParent = new DirectoryEntry(newLocation);

                 directoryObject.MoveTo(moveParent); //Comes from Microsoft example, as prior may have been possible cause of errors.

                 label3.Text += ("Successfully moved computer to the !Disabled OU");

                 nLocation.Close();
                 directoryObject.Close();

                 entry.Close();
                 entry.Dispose();
                 mySearcher.Dispose();
             }
             else
             {
                 label3.Text += ("Unexpected error in moving computer.");
             }

             button1.Visible = true;
          }
          catch (Exception p)
          {
              label3.Text += ("Failed to move computer with exception " + p);
              button1.Visible = true;
          }

          /*
          public void Move(string objectLocation, string newLocation)
          {
              //For brevity, removed existence checks
              DirectoryEntry eLocation = new DirectoryEntry("LDAP://" + objectLocation);
              DirectoryEntry nLocation = new DirectoryEntry("LDAP://" + newLocation);
              string newName = eLocation.Name;
              eLocation.MoveTo(nLocation, newName);
              nLocation.Close();
              eLocation.Close();
          }
          */
       }
       catch (Exception x)
       {
          label3.Visible = true;
          label3.Text = "Unable to disable computer with exception " + x;
          button1.Visible = true;
       }
    }
    else if (computer == null)
    {
        label3.Visible = true;
        label3.Text = "Computer was not found in Active Directory.";
        button1.Visible = true;
    }
    else
    {
        label3.Visible = true;
        label3.Text = "Unexpected error in computer search.";
        button1.Visible = true;
    }
} 
```

显示方面相当草率，但它是一个快速而肮脏的 Windows 窗体，可以显示所有正在发生的事情。我遇到的问题是，即使我有专有名称并且可以`DirectoryEntry`从搜索中获取对象，但当我调用该`MoveTo()`方法时，我会收到有关该对象不存在或未找到的错误。有人可以在这里指出我正确的方向吗？

我考虑过绑定到两个不同的 OU 并使用`DirectoryEntry.Children.Add()`and`DirectoryEntry.Children.Remove()`方法作为解决方法，但这并不能解决我在遍历 AD 时遇到的问题。

# node.js - 数据未保存在猫鼬数据库中

> ID：12714216
> 
> 赞同：0
> 
> 时间：2012-10-03T18:02:59.520
> 
> 标签：node.js, mongodb

我正在尝试使用 mongoose.app.post 函数调用 saveLogInfo 函数来保存我的 mongoDB。saveLogInfo 函数中的问题是直到 consoel.log （“savae 内部”）运行之前的代码，但之后我收到一个错误，即字符串不是函数
回调，没有被调用并显示“保存失败”的错误。

架构是： var LoginInfoSchema=new Schema({

```
username:String,
password:String 
```

});

app.post 功能：

var LoginInfo=db.model('LoginInfo',LoginInfoSchema);

```
function saveLogInfo (username , password ,callback){
console.log("saveLogInfo CALLED");
var receivedObj = new LoginInfo({
    username:username ,
    password:password
});
console.log(receivedObj);
receivedObj.save(function(err , data){
    console.log("inside Save "); 
    if(err){
        //res.send(err);
        console.log(err);
    }
    else{
        callback();   // the error is here
    }
}); 
```

}

请指导我这个功能的错误是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:25:35.607

看起来`callback`调用函数时传入的参数是`saveLogInfo`字符串而不是函数。您可以发布正在调用的代码`saveLogInfo`吗？

当您调用 时`saveLogInfo`，您可能将函数的名称作为`callback`参数传递，但错误地将其括在引号中。

# java - 使用正则表达式在字符串（href）中查找片段

> ID：12714218
> 
> 赞同：1
> 
> 时间：2012-10-03T18:03:09.060
> 
> 标签：java, regex

我剪掉了以下内容：

```
<a href="$click_tracking_url$&landing_url=someurl" border="0" alt=""></a> 
```

我想要的只是`someurl`. 但是有如下变化：

```
<a href='$click_tracking_url$&landing_url=someurl' border="0" alt=""></a>

<a target=blank href="$click_tracking_url$&landing_url=someurl" alt=""></a> 
```

我有这个正则表达式，但不适用于变体：

```
<a href=\".*?landing_url=(.*?)\"> 
```

我该如何解决它或者是否有更简单的方法来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:47:29.067

您没有匹配所有变体，因为您没有考虑 和 之间的`href`属性`<a`。试试这个：

`Pattern p = Pattern.compile("<a[^>]+href=[\\'\\\"].+&landing_url=(.+?)[\\'\\\"]");`

# ubuntu - ldd 不同的输出。相同的二进制不同的发行版

> ID：12714219
> 
> 赞同：3
> 
> 时间：2012-10-03T18:03:11.193
> 
> 标签：ubuntu, centos, shared-libraries, ldd

在运行该`ldd`实用程序以查找 的共享库时`httpd`，我发现了以下我无法解释的场景：

在我的`Ubuntu`盒子上：

```
leon@lwaldman-linux:~/Uol/Lxc/py_utils/Container_Builder/_builds/usr/sbin$ ldd  httpd 
    linux-gate.so.1 =>  (0xf77b2000)
    libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xf7712000)
    libpcre.so.0 => not found
    libselinux.so.1 => /lib/i386-linux-gnu/libselinux.so.1 (0xf76f2000)
    libaprutil-1.so.0 => not found
    libcrypt.so.1 => /lib/i386-linux-gnu/libcrypt.so.1 (0xf76c1000)
    libexpat.so.1 => /lib/i386-linux-gnu/libexpat.so.1 (0xf7697000)
    libdb-4.7.so => not found
    libapr-1.so.0 => not found
    libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0xf767b000)
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xf74d6000)
    /lib/ld-linux.so.2 (0xf77b3000)
    libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0xf74d1000) 
```

在一个`CentOS`盒子上：

```
[root@localhost sbin]# ldd httpd 
linux-gate.so.1 =>  (0x008b6000)
libm.so.6 => /lib/libm.so.6 (0x0036f000)
libpcre.so.0 => /lib/libpcre.so.0 (0x00835000)
libselinux.so.1 => /lib/libselinux.so.1 (0x0021f000)
libaprutil-1.so.0 => /usr/lib/libaprutil-1.so.0 (0x00dfa000)
libcrypt.so.1 => /lib/libcrypt.so.1 (0x003de000)
libexpat.so.1 => /lib/libexpat.so.1 (0x00695000)
libdb-4.7.so => /lib/libdb-4.7.so (0x0040e000)
libapr-1.so.0 => /usr/lib/libapr-1.so.0 (0x00110000)
libpthread.so.0 => /lib/libpthread.so.0 (0x00257000)
libc.so.6 => /lib/libc.so.6 (0x00e37000)
/lib/ld-linux.so.2 (0x00aae000)
libdl.so.2 => /lib/libdl.so.2 (0x0096d000)
libuuid.so.1 => /lib/libuuid.so.1 (0x007c8000)
libfreebl3.so => /lib/libfreebl3.so (0x00d94000) 
```

为什么**libuuid**和**libfreebl3**列在`CentOS`盒子上但没有列在`Ubuntu`盒子上？

我知道`httpd ELF`没有将它们列为依赖项：

```
0x00000001 (NEEDED)                     Shared library: [libm.so.6]
0x00000001 (NEEDED)                     Shared library: [libpcre.so.0]
0x00000001 (NEEDED)                     Shared library: [libselinux.so.1]
0x00000001 (NEEDED)                     Shared library: [libaprutil-1.so.0]
0x00000001 (NEEDED)                     Shared library: [libcrypt.so.1]
0x00000001 (NEEDED)                     Shared library: [libexpat.so.1]
0x00000001 (NEEDED)                     Shared library: [libdb-4.7.so]
0x00000001 (NEEDED)                     Shared library: [libapr-1.so.0]
0x00000001 (NEEDED)                     Shared library: [libpthread.so.0]
0x00000001 (NEEDED)                     Shared library: [libc.so.6] 
```

有什么见解吗？

编辑：两个测试中使用的 httpd 二进制文件是相同的（我从 CentOS RPM 解压出来的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:19:01.273

可能 Apache 是在 Fedora 和 Ubuntu 上使用不同的选项构建（编译）的。

也许比较的输出

```
httpd -V 
```

会告诉你更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-04T16:27:19.243

`man ldd(1)`说：

在通常情况下，ldd 调用标准动态链接器（参见 ld.so(8)）并将 LD_TRACE_LOADED_OBJECTS 环境变量设置为 1，这会导致链接器显示库依赖项。但请注意，在某些情况下，某些版本的 ldd 可能会尝试通过直接执行程序来获取依赖关系信息。因此，您永远不应在不受信任的可执行文件上使用 ldd，因为这可能会导致执行任意代码。处理不受信任的可执行文件时，更安全的选择是：

`$ objdump -p /path/to/program | grep NEEDED`

根据我的经验，这可以产生比`ldd`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T13:00:46.313

libapr-1 在 ubuntu 中称为 libapr-1.0。至少，无论如何它是在 12.04 中。

# c# - 如何在 C# 中将 csv 文件的不同行（数值）读取（保存）到不同的数组中

> ID：12714221
> 
> 赞同：0
> 
> 时间：2012-10-03T18:03:35.227
> 
> 标签：c#

我是 C# 的新手，正在尝试构建一种计算器应用程序，该应用程序将从 csv 文件中读取值，然后继续进行所需的操作。

计算器算法工作正常，但我需要从 csv 文件填充数组。我使用 StreamReader 如下，但它将所有值放入一个数组中：

```
FileStream aFile = new FileStream("d:\test.txt", FileMode.Open, FileAccess.Read);
                StreamReader sr = new StreamReader(aFile);
                strLine = sr.ReadLine();
               while (strLine != null)
                {
                    strArray = strLine.Split(charArray);
                    for (int x = 1; x <= strArray.GetUpperBound(0); x++)
                    {
                        Console.WriteLine(strArray[x].Trim()); 
```

我需要将单独的行读入单独的数组，这些行可以是动态的（即 csv 文件可以有 n 行，这需要 n 个数组）。计算器算法如下，工作正常。我只需要如何使用上面的代码将 csv 读入数组并在下面的代码中使用这些数组（下面的代码虽然是摘录，但工作正常）。请提供任何帮助。

```
for (int p = 0; p < n; p++)   
       { 
         for (int j = 0; j < t; j++)
            {
                sum[j] = w[p, j] * a[p, j];
                k[p] = k[p] + sum[j];
            }
        }
        double loa=0;
        for (int i = 0; i < n; i++)
        {
            loa1[i] = k[i] * v[i];
            loa += loa1[i]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:30:08.813

非常感谢大家的评论和帮助-非常感谢。我能够使用以下方法分别读取行：

```
using (TextFieldParser fieldParser = new TextFieldParser(name)) "d:\\test1.txt"))
        {
          parts = fieldParser.ReadFields(); 
```

然后使用以下方法将来自不同行的值保存在双精度数组中：

```
double[] array = Array.ConvertAll(parts, double.Parse); 
```

然后我使用计数器和 EndOfData 属性来管理定义单独数组的线路开关：

```
counter++;
if (fieldParser.EndOfData)
                { 
```

再次感谢。5 月计算器现在正在工作，可在[http://thaddeus-eze.com获得](http://thaddeus-eze.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:09:00.617

[TextFieldParser](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fmicrosoft.visualbasic.fileio.textfieldparser.aspx&ei=rH5sUNbEA-Tm0QH6qYGYCg&usg=AFQjCNE7Y0l9fyFsKpZQCr66e6ZYWWkohw)类非常适合读取 CSV 文件。

```
TextFieldParser parser = new TextFieldParser("filename.txt");
parser.Delimiters = new[] { "," };
while (!parser.EndOfData)
{
    string[] fields = parser.ReadFields();
    //process this line of fields, or store it for later processing
} 
```

然后，您可以使用`int.TryParse`或`double.TryParse`将适当的字符串转换为数值。

# asp.net - 成功登录facebook后需要获取个人资料

> ID：12714225
> 
> 赞同：0
> 
> 时间：2012-10-03T18:03:52.757
> 
> 标签：asp.net, c#-4.0, facebook-authentication

这个 API 完全是新的我正在一个使用 Facebook API 允许他们登录的网站上工作。代码很旧，现在不起作用，所以我正在尝试升级以使用新的 SDK。我正确地让他们使用这个登录：

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function () {
    FB.init({
        appId: '<%= System.Configuration.ConfigurationManager.AppSettings["ApiID"] %>', // App ID
        channelUrl: 'http://<%= Request.ServerVariables["SERVER_NAME"] %>/channel.html', // Channel File
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true  // parse XFBML
    });

    // Additional initialization code here
};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document));
</script> 
```

这个链接：

```
<strong><a href="#" class="sIcoFB" onclick="FB.login(function(response) { if (response.authResponse) { scope: 'publish_stream,email'; parent.location = '<%=Server.UrlDecode(redirectPath)%>'; } else { alert('Please sign in to access the site'); } });">Login using Facebook</a></strong> &nbsp;&nbsp; 
```

这似乎可行，因为您可以打开 facebook.com 并且您已正确登录。但是我似乎找不到如何在 C# 中检查它。到目前为止我有这个：

```
//Facebook Authenticated, created session and API object
_connectSession = new FacebookClient();

//example of getting access code
Dictionary<string, object> parameters = new Dictionary<string, object>();
parameters.Add("client_id", System.Configuration.ConfigurationManager.AppSettings["ApiID"]);
parameters.Add("redirect_uri", Request.Url.AbsoluteUri);
parameters.Add("client_secret", System.Configuration.ConfigurationManager.AppSettings["Secret"]);
parameters.Add("scope", "publish_stream,email");

IDictionary<string, object> result = (IDictionary<string, object>)_connectSession.Get("/oauth/access_token", parameters);

string accessToken = (string)result["access_token"]; 
```

但是我收到此错误：

(OAuthException - #1) 缺少授权码

如果有人能指出我如何在 C# 中获取配置文件信息的方向，因为我们的数据库中已经有了 ID，我只需将他们作为我们的用户之一登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:29:50.887

您缺少`code`获取 access_token 所需的参数 - 异常似乎是正确的。[检查身份验证](https://developers.facebook.com/docs/authentication/)文档中的服务器端流程

您可能只需要包含`code`当用户从身份验证对话框被重定向回您的应用程序时收到的参数 - 您调用中的其他参数以获取访问令牌看起来正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:00:44.843

我在下面有这个测试页面，它是直接来自 Facebook 开发人员的代码。假设提示您登录，然后将您的图片和姓名放入元素中。虽然它使您正确登录，但它不会更新。

** 更新代码，现在可以使用***

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="testfb.aspx.cs" Inherits="testfb" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<head id="Head1" runat="server">
    <title></title>    
    <script type="text/javascript" src="/js/jquery-1.6.1.min.js" charset="utf-8">    </script>        
    <script src="/js/jquery-ui-1.8.custom.min.js" type="text/javascript"></script>        
</head>
<body>                    
   <div id="fb-root"></div>
  <script>
      window.fbAsyncInit = function () {
          FB.init({
              appId: '111081862265698', // App ID
              channelUrl: '//<%= Request.ServerVariables["SERVER_NAME"] %>/channel.html', //     Channel File
              status: true, // check login status
              cookie: true, // enable cookies to allow the server to access the session
              xfbml: true  // parse XFBML
          });
          FB.login(function (response) {
              if (response.authResponse) {
                  alert('Welcome!  Fetching your information.... ');
                  FB.api('/me', function (response) {
                      alert('Good to see you, ' + response.name + '.');
                      var image = document.getElementById('image');
                      image.src = 'http://graph.facebook.com/' + response.id + '/picture';
                      var name = document.getElementById('name');
                      name.innerHTML = response.name
                  });
              } else {
                  alert('User cancelled login or did not fully authorize.');
              }
          });         
      };
      // Load the SDK Asynchronously
      (function (d) {
          var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
          if (d.getElementById(id)) { return; }
          js = d.createElement('script'); js.id = id; js.async = true;
          js.src = "//connect.facebook.net/en_US/all.js";
          ref.parentNode.insertBefore(js, ref);
      } (document));
  </script>

  <div align="center">
    <img id="image"/>
    <div id="name"></div>
  </div>
  <div class="fb-login-button" scope="email">
    Login with Facebook
  </div>

</body>
</html> 
```

# android - 使用 webchromeclient 加载 webview

> ID：12714228
> 
> 赞同：0
> 
> 时间：2012-10-03T18:03:58.450
> 
> 标签：android, webview, android-webview, webchromeclient

我看不到我用下面的新代码打开这个 web 视图。我让它与注释掉的代码一起工作。我需要获取新代码来加载 Web 视图。我使用这个示例代码。如何解决无法打开页面的问题？ [示例代码](http://m0s-programming.blogspot.com/2011/02/file-upload-in-through-webview-on.html)

```
@Override   
 protected void onActivityResult(int requestCode, int resultCode,    
                                    Intent intent) {    
  if(requestCode==FILECHOOSER_RESULTCODE)    
  {    
   if (null == mUploadMessage) return;    
           Uri result = intent == null || resultCode != RESULT_OK ? null   
                   : intent.getData();    
           mUploadMessage.onReceiveValue(result);    
           mUploadMessage = null;    

}    
}    

@Override
public boolean onOptionsItemSelected(MenuItem item) {    
    // Handle item selection    
    switch (item.getItemId()) {        
    case R.id.register:            
        //mWebView2 = (WebView) findViewById(R.id.webview);    
       // mWebView2.getSettings().setJavaScriptEnabled(true);    
       // mWebView2.loadUrl("http://www.Mysite.com/AndroidAddMember.aspx");
        //mWebView2.setWebViewClient(new HelloWebViewClient());   

        wv = new WebView(this);  
        wv.setWebViewClient(new WebViewClient());   
        wv.getSettings().setJavaScriptEnabled(true); 

        wv.loadUrl("http://www.Mysite.com/AndroidAddMember.aspx"); 

          wv.setWebViewClient(new WebViewClient());    
          wv.setWebChromeClient(new WebChromeClient()    
          {    
                 //The undocumented magic method override    
                 //Eclipse will swear at you if you try to put @Override here    

              public void openFileChooser(ValueCallback<Uri> uploadMsg) {    

                  mUploadMessage = uploadMsg;    
                  Intent i = new Intent(Intent.ACTION_GET_CONTENT);    
                  i.addCategory(Intent.CATEGORY_OPENABLE);    
                  i.setType("image/*");    
                  BangMeorNot.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);    

                 }    
        });    
            setContentView(wv);    

        return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:08:59.570

可能是因为您两次初始化同一个 webview，而在第二次中，您没有在其上调用 loadUrl() 方法。

尝试在第二次初始化后设置 url。问题是您将内容视图设置为 webview，但 webview 没有要加载的 url。

# php - 查询字符串变量存在，但 $_GET 为空

> ID：12714233
> 
> 赞同：4
> 
> 时间：2012-10-03T18:04:14.230
> 
> 标签：php

我在我的开发服务器上为客户端开发了一个网站，并将其推送到生产服务器。在这两个站点上，URL 类似于`http://www.siteurl.com/blogs/?m=09&y=2012`

在开发服务器上，如果 I `var_dump($_GET)`，我会得到我期望的值。

在生产服务器上，如果 I `var_dump($_GET)`，我得到一个空数组。

如果有帮助，我会发布，我什至`phpinfo()`不知道哪些设置可能会导致这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:17:57.337

我遇到过同样的问题。

请参阅此论坛讨论：http: [//forum.kohanaframework.org/discussion/734/_get-empty/p1](http://forum.kohanaframework.org/discussion/734/_get-empty/p1)

```
Solved replacing this:
RewriteRule .* index.php/$0 [PT,L]

for this:
RewriteRule .* index.php?$0 [PT,L] 
```

将新规则添加到 .htaccess。它会起作用

```
RewriteRule ^[A-Za-z]+$ index.php?$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:39:37.920

正如我上面所说，您需要`QSA`标志（阅读“查询字符串附加”）将查询字符串传递给 PHP：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /subdir/
    RewriteRule ^index\.php$ - [L,QSA]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /subdir/index.php [L,QSA]
</IfModule> 
```

# web-services - 如何从 web 服务读取和写入消息到 Oracle MQ？

> ID：12714236
> 
> 赞同：0
> 
> 时间：2012-10-03T18:04:31.290
> 
> 标签：web-services, oracle, mq

我收到了一个请求，我需要通过 Web 服务与 Oracle MQ 进行通信。因为我有其他应用程序将与 web 服务交互以将数据发布到 oracle MQ。因为这个应用程序不是 MQ 实现的应用程序。在这种情况下，我需要如何使用 webservice 将数据读取和写入 MQ？有什么技术可以监控消息是否到达Queue并让webservice读取它？请指导我。我更困惑。我是盲目的新手。

此 Web 服务应用程序将托管在需求件应用程序中。Web 服务应用程序读取 Oracle MQ 中的消息，该消息采用 XML 文件的形式，并放入另一个同样采用 xml 形式的消息队列中。Demandware 应用程序定期调用对 Web 服务的请求以从 MQ 队列中获取/放置消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T08:05:05.367

可能这来晚了，但仍然。

Demandware 不适用于通用开发，尤其是在涉及专有协议时。我的建议是在这种情况下使用中间件组件。

# macros - 用于选择 HTML 标签内容的 Textmate 快捷方式/宏？

> ID：12714237
> 
> 赞同：0
> 
> 时间：2012-10-03T18:04:36.350
> 
> 标签：macros, textmate, hotkeys, textmate2

是否有用于选择 HTML 标记内容的 Textmate 快捷方式或宏？

`<p>Everything</p>`

因此，对于上述内容，将选择“一切”。

如果您知道还可以选择*包括*标签在内的所有内容的快捷方式或宏，则可以加分。

很惊讶这些不在 HTML 包中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:45:30.220

这个人有一个捆绑包[http://inquirylabs.com/blog2009/my-textmate-bundle/](http://inquirylabs.com/blog2009/my-textmate-bundle/)可以为你做这件事。

默认热键是 cmd 右箭头...一旦您拥有要突出显示的标签，它就会选择其内容。

# parsing - 使用 awk 打印一定数量的行。并跳过某些行

> ID：12714239
> 
> 赞同：1
> 
> 时间：2012-10-03T18:04:43.270
> 
> 标签：parsing, unix, awk

我有一个简单的问题，在这个论坛或 awk 学习网站上几乎找不到。

我有一些 awk 代码匹配以数字开头的行，并打印该行的第 6 列：

```
/^[1-9]/ {   
print $6 
} 
```

我如何告诉它只打印匹配列的前 50 行？

* * *

## 附加问题

我尝试使用我自己的以下答案版本，并打印了 50 行。但是，现在我正在尝试选择要打印的 50 行。我通过跳过以数字开头并包含“残基”一词的行来做到这一点。然后我跳过以数字开头并包含“w”的 5 行。这种方法的工作方式就像我只是跳过带有残留物的行并从第一行开始打印，然后以数字开头。你知道为什么我的'w'没有被考虑。

```
#!/usr/bin/awk -f

BEGIN {
    line  = 0;
    skipW = 0;
}

# Ignore all lines beginning with a number until I find one I'm interested in.
/^[0-9]+ residue/ { next }

# Ignore the first five lines beginning with a number followed by a 'w'.
/^[0-9]+ w/ { 
    skipW += 1;
    if (skipW <= 5) next
}

# For all other lines beginning with a number, perform the following.  If we are
# "printing", increment the line count.  When we've printed 50 lines turn off
# printing from that point on.
/^[0-9]+/ { 
    ++line
    if ((line > 0) && (line <= 50)) print $6
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:08:15.753

使用匹配计数器作为条件的一部分：

```
/^[1-9]/ && matched < 50 {
    print $6
    matched++
} 
```

您也可以使用*快捷*方式：

```
/^[1-9]/ { print $6; matched++ }
matched == 50 { exit } 
```

但是，如果*生产者*命令不能`SIGPIPE`正常处理，这可能并不总是适用于管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:12:16.403

```
awk '/^[1-9]/ { if (num_printed++ < 50) print $6 }' 
```

`num_printed`每次找到匹配项时都会增加并打印出前 50 行这样的行，无论这些行在输入文件中的什么位置。

这会读取所有输入。如果可以提前退出，那么您可以使用：

```
awk '/^[1-9]/ { print $6; if (++num_printed == 50) exit }' 
```

注意从后增量到前增量的切换。

# java - 关于在执行时在 buld.xml 中出现错误

> ID：12714240
> 
> 赞同：0
> 
> 时间：2012-10-03T18:04:43.693
> 
> 标签：java, web-services, ant, cxf

我正在尝试开发 JAX WS Web 服务，但在运行 WSGEN 实用程序的 ant 工具时出现错误，我的 Web 服务仅包含一种方法添加，下面是我的一段代码..

界面 ：-

```
 package Demo;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.jws.soap.SOAPBinding;
import javax.jws.soap.SOAPBinding.Style;

@WebService
@SOAPBinding(style = Style.DOCUMENT) //optional

public interface Calculator {

    @WebMethod  
    public int add(int a ,int b);

} 
```

其次是服务端点类

```
 package Demo;
import javax.jws.WebService;

//Service Implementation
@WebService(endpointInterface = "Demo.Calculator")

public class CalculatorImpl implements Calculator {

    @Override
    public int  add(int a ,int b) {

        return a+b;
    }
} 
```

build.xml 是..

```
<target name="wsgen" >

  <exec executable="wsgen">

   <arg line="-cp ./bin -keep -s ./src -d ./bin Demo.CalculatorImpl"/>

  </exec>

 </target>

</project> 
```

但是在执行 build.xml 得到以下错误是..

```
Buildfile: D:\saralworkspace\aa\build.xml
wsgen:

BUILD FAILED
D:\saralworkspace\aa\build.xml:5: Execute failed: java.io.IOException: Cannot run program "wsgen": CreateProcess error=2, The system cannot find the file specified 
```

请告知其中出了什么问题以及如何克服它..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:09:20.210

在可执行标签中使用完整的文件名

```
<exec executable="D:\Program Files\Wsge\wsgen"> 
```

或者确保你的 wsgen 程序在你的 CLASSPATH 变量上

# railstutorial.org - RailsTutorial: NoMethodError 'permanent' Rake::Test::CookieJar

> ID：12714242
> 
> 赞同：3
> 
> 时间：2012-10-03T18:04:47.260
> 
> 标签：railstutorial.org

应用程序/helpers/sessions_helper.rb

```
module SessionsHelper
  def sign_in(user)      
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end
  def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
   end
   def signed_in?
     !current_user.nil?
   end
   def current_user=(user)
     @current_user = user
  end
  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end
end 
```

部分中定义的测试`9.2.1 Requiring signed-in users`失败：-起初我找不到sign_in方法，然后我添加了

```
include SessionsHelper 
```

在 spec/utilities.rb 文件中，之后我开始出现以下错误，说`permanent`Rake::Test::CookieJar 中不存在具有名称的方法。

是不是因为某些 Gem 版本问题。

```
1) User Pages edit page 
 Failure/Error: before { sign_in user}
 NoMethodError:
   undefined method `permanent' for #<Rack::Test::CookieJar:0x007ff12c661e88>
 # ./app/helpers/sessions_helper.rb:3:in `sign_in'
 # ./spec/requests/user_pages_spec.rb:55:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:02:25.680

刚刚遇到同样的问题并解决了。

似乎他们指的不是`sign_in`方法，`sessions_helper.rb`而是`sign_in`方法`spec/support/utilities.rb`

在我的情况下，这个辅助方法`utilities.rb`有一个不同的名称，重命名后一切正常:-)

# fitnesse - 如何在 FitNesse 测试中获取 PAGE_NAME 值？

> ID：12714243
> 
> 赞同：1
> 
> 时间：2012-10-03T18:04:52.000
> 
> 标签：fitnesse, fit-framework

我看到有 *PAGE_NAME* 和 *PAGE_PATH* 全局变量，但我找不到在 Fit 页面和 Fit SetUp / SuiteSetUp 页面中获取它们的值的方法 - 我尝试了明显的方法，都作为“未定义变量”返回.

有没有其他方法可以获取当前页面/测试的名称？

任何帮助将不胜感激

谢谢！奥列格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:49:22.907

从您的问题中并不能完全清楚您尝试了什么，但根据[FitNesse 用户指南](http://fitnesse.org/FitNesse.UserGuide.QuickReferenceGuide#VARIABLES)，变量名称需要像这样转义：`${name}`.

在我当地的 FitNesse 中包含`${PAGE_NAME}`或包含在测试或套件中可以正常工作。`${PAGE_PATH}`

# github-api - Github API v3 查询前 10 名

> ID：12714244
> 
> 赞同：2
> 
> 时间：2012-10-03T18:04:53.753
> 
> 标签：github-api

为了自动完成功能，我试图弄清楚是否有可能告诉 github api 按用户名的一部分返回前 10 名用户。我正在尝试使用搜索 api：

> [http://developer.github.com/v3/search/](http://developer.github.com/v3/search/)

我尝试了?top=10 和?limit=10 和?page=0&per_page=10，但它们似乎无法正常工作。有什么办法可以做到这一点，或者我只需要总是过滤 100 个中的 10 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:06:05.353

我没有找到办法，所以我向 GitHub 寻求帮助。似乎没有办法在对遗留 API 的请求中限制它，建议是在客户端限制列表。

# android - 缩小两个活动之间的过渡动 画

> ID：12714248
> 
> 赞同：3
> 
> 时间：2012-10-03T18:05:15.160
> 
> 标签：android, android-animation

我检查了 API 代码附带的过渡动画，我发现动画 zoom_enter 和 zoom_exit 在其中活动 1 下沉以显示活动 2。我需要相反的方式。我需要活动 2 从内部缩小并到达顶部。（我希望你能得到我）。这种类型的动画在 iphone 屏幕转换上是相同的。

下面的代码是我不需要的效果。这是 zoom_enter.xml 的代码

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/decelerate_interpolator">
    <scale android:fromXScale="2.0" android:toXScale="1.0"
       android:fromYScale="2.0" android:toYScale="1.0"
       android:pivotX="50%p" android:pivotY="50%p"
       android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

这是 zoom_exit.xml 的代码

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/decelerate_interpolator"
    android:zAdjustment="top">
    <scale android:fromXScale="1.0" android:toXScale=".5"
       android:fromYScale="1.0" android:toYScale=".5"
       android:pivotX="50%p" android:pivotY="50%p"
       android:duration="@android:integer/config_mediumAnimTime" />
    <alpha android:fromAlpha="1.0" android:toAlpha="0"
        android:duration="@android:integer/config_mediumAnimTime"/>
</set> 
```

然后在 startActivity 之后我调用下面的方法：

```
 overridePendingTransition(R.anim.zoom_enter, R.anim.zoom_exit); 
```

谁能建议我如何更改上述文件以使我解释的屏幕转换？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-12T12:20:21.363

在 zoom_enter.xml 中尝试此操作并从 zoom_exit.xml 中删除动画。你会看到更好的效果。

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/decelerate_interpolator">
    <scale android:fromXScale="0.0" android:toXScale="1.0"
       android:fromYScale="0.0" android:toYScale="1.0"
       android:pivotX="50%p" android:pivotY="50%p"
       android:duration="@android:integer/config_mediumAnimTime" />
</set> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T09:07:26.900

overridePendingTransition(zoom_enter_new, zoom_exit_actual);

第一个参数用于传入的活动（所以是新的）第二个参数是用于传出的活动（实际的）

因此，如果您想制作与视频相同的效果，其中实际活动似乎立即隐藏，而不是第二个参数需要设置为 0（意味着没有动画）

overridePendingTransition(zoom_enter_new, 0);

为了使新活动像视频一样放大，这是解释的动画 xml 资源（res/anim/ dir 中的 zoom_enter_new.xml）

```
 <set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator">
    <!--scale view fromX fromY are the starting point  (.5 is 50% of scale, )-->
    <!--scale view toX and toY are the final state (1 is 100%)-->
    <!--pivot is the center of animation, so in your case the zoomin on the video is from the exact center (50% pivot x, 50% pivot Y)-->
    <scale android:fromXScale=".5" android:toXScale="1"
        android:fromYScale=".5" android:toYScale="1"
        android:pivotX="50%p" android:pivotY="50%p"
        android:duration="@android:integer/config_longAnimTime" />

    <!-- alpha animation is made at the same time of scale animation, and for me make a better and smooth result, alpha 0 is full trasparent, 1 is the normal state. The final alpha state of the activity after this animation is 1, so pay attention toAlpha must be 1 if you don't want glitch-->
    <alpha android:fromAlpha="0.5" android:toAlpha="1"
        android:duration="@android:integer/config_longAnimTime"/>
</set> 
```

overridePendingTransition(R.anim.zoom_enter_new, 0);

托比亚

# css - Bootstrap 侧边栏最小高度与内容相同

> ID：12714255
> 
> 赞同：0
> 
> 时间：2012-10-03T18:05:58.700
> 
> 标签：css, twitter-bootstrap

我正在尝试在引导程序中制作内容和侧边栏布局，并且在使侧边栏与父级 .row 的高度相同时遇到问题（其高度与内容的高度相同）。是否可以在不使用 JS/JQuery 的情况下将侧边栏的高度拉伸到父级的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:21:48.203

恕我直言，最简单的方法是，如果您的侧边栏是绝对定位的，并且您将它的高度设置为 100%，那么包装器当然应该相对定位。

# javascript - 将嵌套的 JSON 数据映射到 Knockout observableArray

> ID：12714256
> 
> 赞同：3
> 
> 时间：2012-10-03T18:05:59.183
> 
> 标签：javascript, knockout.js

我们在 Knockout 中有一个 observableArray，其中包括几个 JSON 对象。在每个 JSON 对象下，我们都有一个需要可观察的嵌套数组。

Knockout 无法在 observableArray 中观察嵌套在每个 JSON 对象中的数组。

是否可以映射已经嵌套在 observableArray 中的数组？

**这是 observableArray 中一个 JSON 对象的示例**。

*注意：我们需要使“attributeValues”数组可观察。*

```
{
    "attribute": {
        "id": 6,
        "name": "Some attribute name",
        "typeID": 5
    },
    "type": {
        "id": 5,
        "typeName": "list"
    },
    "attributeValues": [{
        "id": 10,
        "attributeID": 6,
        "value": "Some attribute value",
        "chosen": false
    }, {
        "id": 11,
        "attributeID": 6,
        "value": "Another attribute value",
        "chosen": false
    }, {
        "id": 12,
        "attributeID": 6,
        "value": "Third attribute value",
        "chosen": false
    }]
} 
```

**这是我们现在使用的代码：**

```
$.ajax({
    type: 'GET',
    url: '/JsonService',
    success: function (data) {
        avm.attributes(data.allAttributes);
    },
    dataType: 'json',
    traditional: true
});

function attributeViewModel() {
    var self = this;

    self.attributes = ko.observableArray([]);
}

var avm = new attributeViewModel();
ko.applyBindings(avm); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:53:26.350

*一种解决方案是再定义一个构造函数来包装属性*数组的每一项。在此函数中，您可以将*attributeValues*数组定义为可观察的，如下例所示：

```
function AttributeValueViewModel (data) {
    var self = this;
    self.attribute = ko.observable(data.attribute);
    self.type = ko.observable(data.type);
    self.attributeValues = ko.observableArray(data.attributeValues);
}

function attributeViewModel() {
    var self = this;
    self.attributes = ko.observableArray([]);
    self.addList = function (list) {
        ko.utils.arrayForEach(list, function(item) {
            self.attributes.push(new AttributeValueViewModel(item));
        });
    };
}

var avm = new attributeViewModel();
ko.applyBindings(avm);
$.getJSON('url', function (list) { avm.addList(list); }); 
```

# rest - 同一个关联模型/表有多个不同名称的关联时的嵌套资源路径

> ID：12714262
> 
> 赞同：0
> 
> 时间：2012-10-03T18:06:37.253
> 
> 标签：rest

在同一 RESTful 资源（模型）以两种或多种不同方式与另一个 RESTful 资源相关联的情况下，无法找到一个好的 URL 路径，例如：

*   指定一个 URL 路径，该路径直观地表示查找与某个培训师关联的培训课程的所有实例的请求，其中 TrainingSession 模型具有与 Employee 模型关联的 trainer_id。
*   指定一个 URL 路径，该路径直观地表示查找与某个受训者关联的所有培训课程实例的请求，其中 TrainingSession 模型具有一个 trainee_id，它也是与 Employee 模型的关联。

在 URL 的路径中包含“trainees”或“trainers”似乎是不对的，因为它们不是真正的资源（只有 TrainingSession 和 Employee 是）：

*   `/trainees/1/training_sessions`
*   `/trainers/1/training_sessions`

但是，使用“员工”过于含糊，可能意味着：

*   `/employees/1/training_sessions`

您对这些路线/路径有何建议，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:12:13.023

实际上使用实习生和培训师并没有错。

您的学员和培训师两个网址都可以映射到员工控制器功能，然后使用提供的 ID 查找学员/培训师数据。我不明白你为什么不能这样做。它只是智能 url 定向。

如果您必须分别存储有关受训者和培训师的信息，那么他们需要自己的模型。但是，如果 TrainingSession 具有直接映射到员工 ID 的学员 ID 和培训师 ID，并且您不必存储有关学员和培训师的任何其他内容，我不明白为什么上述方法不可用。

编辑：以下是哲学问题，因此在很大程度上是有争议的。

我觉得 REST 原则适用于 API 用户。所以只要用户看到有实习生资源和培训师资源并且可以操作它就是REST。你如何在里面实现，比如使用 MVC 是你的选择。一个好的方法是使用 MVC 原则，但原则是指导方针，没有黄金法则可以应用于所有情况。我认为创建虚拟资源很好，它们不必映射到自己的模型/控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:26:53.457

我会将培训课程视为另一种资源，您正在根据搜索参数 searchType 和employeeId 搜索培训课程。
因此`@GET`，
`/trainingsessions?searchby=trainer&employeeId=xyz`应该为培训师
`/trainingsessions?searchby=trainee&employeeId=xyz` 提供课程应该为受训者提供课程。

# python - 使用 Postgresql 进行 CherryPy 会话

> ID：12714265
> 
> 赞同：1
> 
> 时间：2012-10-03T18:06:45.887
> 
> 标签：python, session

我没有看到任何关于如何使用 Cherrypy 设置 postgresql 的文档。

我试过查找如何配置它，但我似乎找不到。有没有人有一些工作代码可以向我展示如何使用 Cherrypy 和 postgresql 进行会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T18:43:44.383

不幸的是，我可能会建议您不要使用内置的 postgresql 后端会话，因为它[显然已损坏](https://bitbucket.org/cherrypy/cherrypy/issue/748/postgresqlsession-is-incomplete-broken-and)。

它只是行不通。如果你能抽出时间，你最好在这种情况下推出你自己的后端会话。

# c++ - 字符串类 C++ 的重载 >> 运算符

> ID：12714266
> 
> 赞同：1
> 
> 时间：2012-10-03T18:06:48.433
> 
> 标签：c++, string, class, overloading, operator-keyword

我在为字符串类重载 >> 运算符时遇到问题；这是我的课：

```
class str
{
    char s[250];
    public:
    friend istream& operator >> (istream& is, str& a);
    friend ostream& operator << (ostream& os, str& a);
    friend str operator + (str a, str b);
    str * operator = (str a);
    friend int operator == (str a, str b);
    friend int operator != (str a, str b);
    friend int operator > (str a, str b);
    friend int operator < (str a, str b);
    friend int operator >= (str a, str b);
    friend int operator <= (str a, str b);
}; 
```

这是重载的运算符：

```
istream& operator >> (istream& in, str& a)
{
    in>>a.s;
    return in;
} 
```

问题是它只将字符串读取到第一个空格（句子中只有一个单词）。

我解决了。在 dreamincode 上找到了答案：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:13:59.943

的行为[`operator>>`](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt2)是读取到第一个空白字符。将您的功能更改为以下内容：

```
istream& operator >> (istream& in, str& a)
{
    in.getline( a.s, sizeof(a.s) );
    return in;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:08:43.390

这就是它的工作原理，您可能想使用[std::getline(std::istream&,std::string&) 的 std::getline(std::istream&,std::string&,char)](http://www.cplusplus.com/reference/string/getline/)。

*编辑*：其他人，建议`istream`的`getline`也是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:13:30.407

istream 类的重载运算符>>() 只接受输入，直到找到任何空格（制表符、换行符、空格字符）。您需要使用 getline 方法。

```
...
istream& operator >> (istream& in, str& a)
{
    in.getline(a.s, 250);
    return in;
}
... 
```

# c# - 根据应用程序的状态使一个按钮执行不同的操作？

> ID：12714271
> 
> 赞同：1
> 
> 时间：2012-10-03T18:07:13.477
> 
> 标签：c#, wpf, .net-4.0

这是我目前的设置：

我有一个 WPF 应用程序，它有一个复制按钮，它接受一个应用程序目录并将其复制到另一个目录。完成后，我有另一个按钮可以从新位置启动应用程序。理想情况下，我希望只有 1 个按钮，在复制完成后，按钮的文本会更改为“启动”，然后单击它会启动应用程序。然而，用户需要能够通过再次单击按钮来重新复制，但这一次，它应该说“复制”。这是可能的，甚至值得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:10:06.183

最简单的方法是将状态存储在可从您的代码隐藏访问的变量中，并`if`在按钮`OnClick`决定做什么时声明。

这可能不值得麻烦，因为改变其含义的按钮可能会让您的最终用户感到困惑。我会做两个单独的按钮，但我会根据应用程序的状态有条件地启用或禁用它们。当复制是唯一有意义的操作时，`[Copy]`按钮将被启用，而`[Run]`按钮将被禁用。当状态发生变化时，这些按钮的启用/禁用状态也会发生变化。这将为您的应用程序的最终用户提供清晰的视觉提示，并使您的应用程序更容易使用各种 UI 测试自动化工具进行自动测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:09:50.583

这绝对是*可能的*，但有两个按钮似乎要简单得多。您可以根据当前状态切换它们的可见性，因此当您希望能够启动时，“启动”按钮可见，而当您想要复制时，“复制”按钮可见。

这将使您的命令更简单（每个命令执行一个操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:11:09.693

一种方法是使用 a `RelayCommand`，然后使用 if 语句调用适当的函数。在[这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)`RelayCommand`定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T18:14:00.930

我会创建两个`CommandViewModels`应该包含一个[`Command`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.aspx)和`Header`。然后你可以有一个包含这样一个模型的属性，[`Button.Content`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content.aspx)然后将绑定到`Header`当前的`CommandViewModel`，并且[`Button.Command`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.command%28v=vs.95%29.aspx)将绑定到`Command`. 然后，您只需将该属性更改为 other `CommandViewModel`。（这甚至可以在第一个`Command`'s中完成[`Execute`](http://msdn.microsoft.com/en-us/library/system.windows.input.icommand.execute.aspx)。）

# jax-ws - 设置 Axis2 Web 服务的 PortType 名称

> ID：12714273
> 
> 赞同：0
> 
> 时间：2012-10-03T18:07:17.690
> 
> 标签：jax-ws, axis2, wso2, porttype

我正在使用 Eclipse 和 WSO2 开发工具创建一个 Axis2 Web 服务。我将 Web 服务导出为“.aar”文件，并将其安装在 WSO2 应用程序服务器中。

WSDL 是自动生成的，并且 Porttype 的名称始终是 [ServiceName]PortType。

有没有办法在将 WS 开发为自定义名称时或在我部署之后更改 PortType？我知道我可以使用一些参数设置 Jax-WS WebService 的 PortType，但是 Jax-WS 不太适合我的用例。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:07:29.197

是的。

通过将 WSDL 文件与您的自定义端口名称相关联，可以覆盖默认端口类型命名约定。

1.  使用 Developer Studio 实现您的 Axis2 服务。

2.  完成服务实现后，右键单击 Axis2 Service Project 并选择“ **Generate WSDL** ”。

    然后它将在**src/main/resources**文件夹中生成 WSDL 文件。

3.  然后，您需要将生成的 WSDL 文件移动（剪切和粘贴）到您的 services.xml 文件所在的**src/main/resoures/META-INF文件夹中。**

4.  然后您可以修改和更新 WSDL 文件的 portType 元素。

5.  完成对 WSDL 文件的修改后，您需要打开**src/main/resoures/META-INF**位置中的 services.xml 文件，并使用以下参数更新 services.xml 文件。

> ```
> <service ...>
>     <parameter name="useOriginalwsdl">true</parameter>
>     .
>     .
>     .
> </service> 
> ```

现在，您可以使用 Developer Studio 将服务导出为 Axis2 存档（aar 文件），并将生成的 Axis2 服务部署到 WSO2 应用服务器或任何其他合适/兼容的 Web 服务容器中。

希望这可以帮助！！

谢谢并恭祝安康，

哈沙娜

# android - Android 4.1 Geocoder.getLocationFromName() throws IOException: Unable to parse response from server only over 3G

> ID：12714274
> 
> 赞同：1
> 
> 时间：2012-10-03T18:07:19.947
> 
> 标签：android, geolocation, geocoding, google-geocoder

我在我的 android 应用程序中使用 Geocoder 将字符串解析为地址。以下代码片段在 Wifi 上正常工作，但在 3G 上不能正常工作。当超过 3G 时，它会抛出一个`IOException: Unable to parse response from server`.

在有关此的其他讨论中，一个常见的答案是可能的原因是地理编码器每分钟使用多次，超过阈值，导致服务暂时抛出异常。我确信这不是我的情况，因为我从未在几周前获得的新手机（Nexus S，android 4.1）上使用该服务。

这是片段：

```
Geocoder gc = new Geocoder(this);
List<Address> newAddresses = gc.getFromLocationName(arg0.toString(), 10); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T19:23:15.010

而不是使用那个 GeoCoder，使用谷歌的 web api，你可以对它进行异步 api 调用，并获得比 android geocoder 给你的信息更多的 json 对象。

最好[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

我已经在几个 android 应用程序中做到了这一点，这也保证你会从跨平台应用程序中获得相同的结果

# gwt - GWT：在服务器端获取常量

> ID：12714278
> 
> 赞同：5
> 
> 时间：2012-10-03T18:07:39.710
> 
> 标签：gwt, properties, constants

我正在尝试获取存储在服务器端客户端中的常量（ConstantsWithLookup），但它无法弄清楚如何去做。我的常量接口和常量属性在同一个文件夹中。

我尝试了其他类似线程的提示，但没有成功。

我使用 ResourceBundle 尝试了 Hermes、gwt-i18n-server、gwt-dmesg、GTWI18N，试图获取源文件属性。

对于前两个，似乎主要原因是对最新 GWT 版本的过时支持。至于 ResourceBundle，它找不到属性文件，因为在部署时，没有属性文件，只有一个 Constants.class。

我试图避免将我的属性文件更改到另一个位置（如 /WEB-INF/constants）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T19:56:18.630

我正在使用带有 GWT 2.5.0.rc1 的[Hermes](https://github.com/MaliciousMonkey/Hermes)，它工作正常。用法：

*   将hermes-1.2.0.jar 放入war/WEB-INF/lib
*   然后在服务器端写类似

```
MyConstantsWithLookup my = Hermes.get(MyConstantsWithLookup.class, "de");
String string = my.getString(key); 
```

*   属性文件`MyConstantsWithLookup.properties` *必须*存在于与 相同的包中`MyConstantsWithLookup.java`，即使该属性文件是空的（如果您使用 @DefaultStringValue 等可能就是这种情况）
*   还添加`MyConstantsWithLookup_de.properties`等。
*   **确保在编译时将**这些属性文件复制到您的类旁边。**Javac 不这样做，因此必须在额外的构建步骤中完成（Eclipse 通常会自动执行此操作，但当您使用 Ant 构建时它不会自行发生）**
***   在编译服务器端时，许多构建设置将跳过“客户端”包中的 java 和属性文件。在这种情况下，将常量文件放在“共享”包中（如果有的话）。**

# javascript - Javascript 光标

> ID：12714282
> 
> 赞同：0
> 
> 时间：2012-10-03T18:08:09.530
> 
> 标签：javascript, wordpress, cursor

我有以下用于光标轨迹的脚本，但是光标图像出现在页面的左上角并且没有显示为光标轨迹？什么可能导致脚本无法正常运行？我从以下位置复制了这个脚本：[http ://www.dynamicdrive.com/dynamicindex13/trailer.htm](http://www.dynamicdrive.com/dynamicindex13/trailer.htm)

我曾尝试编辑图像路径（我最初使用图像的绝对路径），我还尝试禁用以前用于此路径的“插件”

```
<script>
/******************************************
* Cross browser cursor trailer script- By Brian Caputo (bcaputo@icdc.com)
* Visit Dynamic Drive (http://www.dynamicdrive.com/) for full source code
* Modified Dec 31st, 02' by DD. This notice must stay intact for use
******************************************/

A=document.getElementById
B=document.all;
C=document.layers;
T1=new Array("wp-content/uploads/2012/10/meerkat1.gif",77,39,"wp-content/uploads/2012/07/meerkat2.gif",77,39,"wp-content/uploads/2012/10/meerkat3.gif",77,39,"wp-content/uploads/2012/10/meerkat4.gif",77,39,"wp-content/uploads/2012/10/meerkat5.gif",77,39,"wp-content/uploads/2012/10/meerkat6.gif",77,39)

var offsetx=15 //x offset of trail from mouse pointer
var offsety=10 //y offset of trail from mouse pointer

nos=parseInt(T1.length/3)
rate=50
ie5fix1=0;
ie5fix2=0;
rightedge=B? document.body.clientWidth-T1[1] : window.innerWidth-T1[1]-20
bottomedge=B? document.body.scrollTop+document.body.clientHeight-T1[2] : window.pageYOffset+window.innerHeight-T1[2]

for (i=0;i<nos;i++){
createContainer("CUR"+i,i*10,i*10,i*3+1,i*3+2,"","<img src='"+T1[i*3]+"' width="+T1[(i*3+1)]+" height="+T1[(i*3+2)]+" border=0>")
}

function createContainer(N,Xp,Yp,W,H,At,HT,Op,St){
with (document){
write((!A && !B) ? "<layer id='"+N+"' left="+Xp+" top="+Yp+" width="+W+" height="+H : "<div id='"+N+"'"+" style='position:absolute;left:"+Xp+"; top:"+Yp+"; width:"+W+"; height:"+H+"; ");
if(St){
if (C)
write(" style='");
write(St+";' ")
}
else write((A || B)?"'":"");
write((At)? At+">" : ">");
write((HT) ? HT : "");
if (!Op)
closeContainer(N)
}
}

function closeContainer(){
document.write((A || B)?"</div>":"</layer>")
}

function getXpos(N){
if (A)
return parseInt(document.getElementById(N).style.left)
else if (B)
return parseInt(B[N].style.left)
else
return C[N].left
}

function getYpos(N){
if (A)
return parseInt(document.getElementById(N).style.top)
else if (B)
return parseInt(B[N].style.top)
else
return C[N].top
}

function moveContainer(N,DX,DY){
c=(A)? document.getElementById(N).style : (B)? B[N].style : (C)? C[N] : "";
if (!B){
rightedge=window.innerWidth-T1[1]-20
bottomedge=window.pageYOffset+window.innerHeight-T1[2]
}
c.left=Math.min(rightedge, DX+offsetx);
c.top=Math.min(bottomedge, DY+offsety);
}
function cycle(){
//if (IE5) 
if (document.all&&window.print){
ie5fix1=document.body.scrollLeft;
ie5fix2=document.body.scrollTop;
}
for (i=0;i<(nos-1);i++){
moveContainer("CUR"+i,getXpos("CUR"+(i+1)),getYpos("CUR"+(i+1)))
}
}

function newPos(e){
moveContainer("CUR"+(nos-1),(B)?event.clientX+ie5fix1:e.pageX+2,(B)?event.clientY+ie5fix2:e.pageY+2)
}

function getedgesIE(){
rightedge=document.body.clientWidth-T1[1]
bottomedge=document.body.scrollHeight-T1[2]
}

if (B){
window.onload=getedgesIE
window.onresize=getedgesIE
}

if(document.layers)
document.captureEvents(Event.MOUSEMOVE)
document.onmousemove=newPos
setInterval("cycle()",rate)
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-07T04:02:39.290

这将使图像跟随光标。我最初将它用作书签，因此它都是 javascript。

```
var hi = document.createElement("img");
var att = document.createAttribute("src");
var sty = document.createAttribute("style");
var alt = document.createAttribute("onclick");
var ide = document.createAttribute("id");
ide.value = "hi01";alt.value = "alert('Hi')";
att.value = "http://www.picgifs.com/clip-art/cartoons/pokemon/clip-art-pokemon-441770.jpg";
sty.value = "position: absolute;top: 0px;left: 0px;height: 100px;width: 100px;cursor:crosshair;";
 hi.setAttributeNode(att);
hi.setAttributeNode(alt);
hi.setAttributeNode(sty);
hi.setAttributeNode(ide);document.body.appendChild(hi);
var scr = document.createElement("script");
var scratt = document.createAttribute("src");
scratt.value = "http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js";
scr.setAttributeNode(scratt);
document.body.appendChild(scr);
$("body").mousemove(function(e){
    var a = e.pageX - 50;
    var b = e.pageY - 50;
    document.getElementById('hi01').style.left = a+'px';
    document.getElementById('hi01').style.top = b+'px';
}); 
```

# c# - 在不使用 string.Join 的情况下加入字符串 []

> ID：12714288
> 
> 赞同：6
> 
> 时间：2012-10-03T18:08:39.187
> 
> 标签：c#, .net, string, linq

此问题仅用于学术目的。

假设我有以下代码......

```
var split = line.Split(new[] { ',' }, System.StringSplitOptions.RemoveEmptyEntries);
var elem = new XElement("shop");
elem.SetAttributeValue("name", split.Take(split.Length - 1));  <=====
elem.SetAttributeValue("tin", split.Last()); 
```

我希望带箭头的线产生与此相同的结果...

```
string.Join(string.Empty, split.Take(split.Length - 1)); 
```

...不使用`string.Join`.

那可能吗？我似乎找不到一个 LINQ 语句来做到这一点......希望你们都已经知道了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:13:36.500

使用`StringBuilder`O(n) 性能：

```
split
    .Take(split.Length - 1)
    .Aggregate(new StringBuilder(), (sb, s) => sb.Append(s)).ToString(); 
```

如果对象是为了避免组合 LINQ 调用和静态方法的树的尴尬，那么一个直接的解决方案是扩展方法：

```
public static string Join(this IEnumerable<string> self, string separator = "")
{
    return string.Join(separator, self);
} 
```

接着：

```
split.Take(split.Length - 1).Join(); 
```

`string.Join`我发现这比在复杂的表达式中使用要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T18:20:50.607

也不要使用`Split`，只需找到最后一个逗号并使用`Substring`来分隔字符串：

```
int pos = line.LastIndexOf(',');
var elem = new XElement("shop");
elem.SetAttributeValue("name", line.Substring(0, pos).Replace(",", String.Empty));
elem.SetAttributeValue("tin", line.Substring(pos + 1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T18:12:02.797

怎么样

```
split.Take(split.Length - 1).Aggregate((s1,s2)=> s1 + s2); 
```

或非 linq 等价物：

```
string s = "";
for(int i = 0; i < split.Length - 1; i++)
{
   s += split[i];
}
return s; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:15:11.660

```
var strs = new string[100];
...

var result = strs.Aggregate(new StringBuilder(strs.Sum(x => x.Length)),
                            (sb, curr) => sb.Append(s + ", ")).ToString(); 
```

现在只需要从末尾删除最后一个“，”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T18:41:02.827

```
string myString = "Hello World"
var myList= new List<int>();

for (int i = 0; i < 10; i++)
    myList.Add(i);

var newList = myList.Aggregate(string.Empty, (current, num) => current + myString.Substring(num, 1)); 
```

# android - 如何使用动态创建的 textview 元素重新启动活动？

> ID：12714294
> 
> 赞同：0
> 
> 时间：2012-10-03T18:09:06.327
> 
> 标签：android, android-intent, android-activity

基本上，我想重新启动活动，每次文本视图都会显示我存储在向量中的不同文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:23:59.103

你可以使用这个：

公共无效重新创建（）；

注意：导致使用新实例重新创建 Activity。这导致与由于配置更改而创建 Activity 时的流程基本相同——当前实例将经历其生命周期到 onDestroy() ，然后在它之后创建一个新实例。

# applescript - AppleScript 在文本文件文件夹中查找和替换

> ID：12714295
> 
> 赞同：1
> 
> 时间：2012-10-03T18:09:13.390
> 
> 标签：applescript

我需要替换一个充满文本文件的文件夹中的文本。我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:20:43.740

```
tell application "Finder"
    set l to files of desktop as alias list
end tell
repeat with f in l
    set input to read f as «class utf8»
    set text item delimiters to "search"
    set ti to text items of input
    set text item delimiters to "replace"
    set b to open for access f with write permission
    set eof b to 0
    write (ti as text) to b as «class utf8»
    close access b
end repeat 
```

我大多只是在 TextMate 或 Ruby 脚本的项目中使用 find ，如下所示：

```
Dir["#{ENV['HOME']}/Desktop/*"].each do |f|
  input = File.read(f).gsub(/search/, "replace")
  File.open(f, "w") { |f| f.print(input) }
end 
```

你也可以使用 sed：

```
sed -i '' 's/search/replace/g' ~/Desktop/* 
```

# sas - 跨观察累积 SAS 中的文本变量

> ID：12714302
> 
> 赞同：3
> 
> 时间：2012-10-03T18:09:36.997
> 
> 标签：sas

这看起来很简单，但它没有按预期工作：

```
data names;
    input name $12.;
    cards;
John
Jacob
Jingleheimer
Schmidt
;
run;

data names;
    length namelist $100.;
    set names end=eof;
    retain namelist;
    if _n_=1 then namelist=name;
    else namelist = namelist || "|" || name;
    if eof then output;
run; 
```

我希望结果有一个观察结果包含

> 约翰|雅各布|Jingleheimer|施密特

但`namelist`只是`John`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:17:49.907

在连接到列表之前，您需要修剪空白。

```
data names;
    length namelist $100.;
    set names end=eof;
    retain namelist;
    if _n_=1 then namelist=trim(name);
    else namelist = trim(namelist) || "|" || trim(name);
    if eof then output;
run; 
```

您还可以使用cats() 函数（它为您进行修剪和连接）：

```
data names;
    length namelist $100.;
    set names end=eof;
    retain namelist;
    if _n_=1 then namelist=name;
    else namelist = cats(namelist,"|",name);
    if eof then output;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:12:12.810

如果您在作业中添加了 STRIP

```
strip(namelist) || "|" || name 
```

它也可以

（但 CATS 是一个非常好的解决方案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:46:47.943

使用 catx 函数可以指定分隔符...

```
data names;
    length namelist $100.;
    set names end=eof;
    retain namelist;
    namelist = catx("|",namelist,name);
    if eof then output;
run; 
```

# php - url 文件名中的特殊字符会导致问题

> ID：12714303
> 
> 赞同：1
> 
> 时间：2012-10-03T18:09:44.033
> 
> 标签：php, apache2

我有以下 www.mywebsite.com/upload/server/php/files/foto/test/Aston_Martin_DBS_V12_coupé_(rear)_b-w.jpg

该文件通过脚本上传。该文件存在于服务器上。但是，由于 url (é) 中的特殊字符，我遇到了一些问题。

服务器上的文件名是`Aston_Martin_DBS_V12_coup%C3%A9_(rear)_b-w.jpg`，这是正确的。但是不知何故，我的浏览器 (Chrome) 将此页面请求为 ISO-8859-1 而不是 UTF-8。

因此，我得到一个 404。 ![在此处输入图像描述](../Images/4b5cf793ff29051492dd289a6efe080f.png)

我正在使用 jQuery 文件上传插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:14:15.667

我从这里删除了我的答案，我写了新的：

通常网站不包含非标准字符的文件。文件通常会删除非标准字符，有时这些字符会替换为类似的标准字符（波兰语 ą 到 a，ś 到 s）。例如 - 我手动重命名文件，或者当我有很多文件时 - 我只是使用 bash 或 php 脚本来删除/替换服务器上文件名中的字符。

无论如何，如果您必须使用原始文件名 - 您必须从 ISO 解码它们并将它们编码为 UTF8。

看看这里的 php 代码片段：

[如何提供带有特殊字符的 HTTP 文件](https://serverfault.com/questions/153826/how-to-serve-http-filenames-with-special-characters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T07:01:18.863

一些特殊的字符在文件名的 url 中产生问题，例如

```
+ ,#,%,& 
```

对于那些通过 url 访问的文件，生成不包含上述字母的文件 forex

```
str_replace(array(" ","&","'","+","#","%"),"-","filename") 
```

它会正常工作

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T18:12:27.993

如果*文件名*包含`%`字符代码，则需要在 URL 中对这些代码进行编码。尝试访问`Aston_Martin_DBS_V12_coup%25C3%25E9_(rear)_b-w.jpg`

# java - 使用 Jackson 解析 JSON - 跳过的值

> ID：12714309
> 
> 赞同：2
> 
> 时间：2012-10-03T18:10:07.360
> 
> 标签：java, android, json, jackson

我正在尝试解析从对 Facebook 的请求中提供的提要。但是，我的解析器跳过了很多信息。下面是代码的一部分，一个正在解析的内容以及 if 语句中打印的内容的示例。例如，从未找到“消息”。想法？

```
List<FacebookItem> list = new ArrayList<FacebookItem>();

try {
    if (jFactory == null)
        jFactory = new JsonFactory();

    jParser = jFactory.createJsonParser(json);

    FacebookItem o = null;
    while (jParser.nextToken() != null) {
        if ("type".equals(jParser.getCurrentName())) {
            jParser.nextToken();
            o = new FacebookItem();
            o.setType(jParser.getText());
            System.out.println("Found type:   " + jParser.getText());
        }
        if ("from".equals(jParser.getCurrentName()))
            while (!"name".equals(jParser.getCurrentName())) {
                jParser.nextToken();
            }
            jParser.nextToken();
            o.getUser().setUserName(jParser.getText());
            System.out.println("Found name:   " + jParser.getText());
        }
        if ("message".equals(jParser.getCurrentName())) {
            jParser.nextToken();
            o.setText(jParser.getText());
            System.out.println("Found message:   " + jParser.getText());
        }
        if ("created_time".equals(jParser.getCurrentName())) {
            jParser.nextToken();
            o.setTimestamp(jParser.getText());
            System.out.println("Found created_time:   " + jParser.getText());
            list.add(o);
        }
    }
    jParser.close();

} catch (JsonGenerationException e) {
    e.printStackTrace();
} catch (JsonMappingException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

> {"data":[{"type":"photo","link":"http://www.facebook.com/photo.php?fbid=10151331660204305&set=a.299455459304.180838.197394889304&type=1&relevant_count=1"," from":{"name":"FC Barcelona","category":"职业运动队","id":"197394889304"},"message":"普约尔面临八周裁员 http://bit.ly/ QXhOFE\r\n\r\nPuyol, vuit setmanes de baixa http://bit.ly/T1enma\r\n\r\nPuyol, ocho semanas de baja http://bit.ly/T0eaj8","图片" :"http://photos-g.ak.fbcdn.net/hphotos-ak-snc6/246623_10151331660204305_75156416_s.jpg","created_time":"2012-10-03T17:40:06+0000","id":" 197394889304_10151331937599305"},{"type":"checkin",“链接”：“http://www.facebook.com/pages/Hubben-21/249474758405147”，“来自”：{“名称”：“Andreas Rol\u00e9n”，“id”：“575703056”}， message":"En timme in i turneringen och redan chipleader","picture":"http://profile.ak.fbcdn.net/static-ak/rsrc.php/v2/y5/r/j258ei8TIHu.png", "name":"Hubben 2.1","created_time":"2012-10-03T17:24:19+0000","id":"575703056_10151181582028057"},{"type":"photo","link":" http://www.facebook.com/photo.php?fbid=10151445544542786&set=at.10151445533587786.588547.694032785.688088336&type=1&relevant_count=1","from":{"name":"Jens Wilhelmsson","id":"688088336 "},"图片":"http://photos-h.ak.fbcdn.net/hphotos-ak-prn1/72091_10151445544542786_676020840_s.jpg","created_time":"2012-10-03T17:21:40+0000","id" :"688088336_10151111148358337"},{"type":"link","from":{"name":"Eric Lindqvist","id":"648057222"},"created_time":"2012-10-03T17:20 :52+0000","id":"648057222_10151249963167223"}created_time":"2012-10-03T17:20:52+0000","id":"648057222_10151249963167223"}created_time":"2012-10-03T17:20:52+0000","id":"648057222_10151249963167223"}

```
Found type:   photo
Found name:   FC Barcelona
Found name:   Andreas Rolén
Found name:   Hubben 2.1
Found created_time:   2012-10-03T17:24:19+0000
Found type:   photo
Found name:   Jens Wilhelmsson
Found name:   Eric Lindqvist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:14:51.857

我真的不知道你的 JSON 库，但是 Android[在 SDK 本身中提供了一个很好的 JSON API](http://developer.android.com/reference/org/json/package-summary.html)，为什么不使用它呢？

```
JSONArray data = new JSONArray(jsonString);
int itemCount = data.length();
List<MyObject> list = new ArrayList<MyObject>(itemCount);

for (int i=0; i<itemCount; ++i) {
  JSONObject item = data.getJSONObject(i);

  String name = item.getString("name");
  String message = item.optString("message");

  MyObject o = new MyObject(name, message);
  list.add(o);
} 
```

最好的办法甚至是将单个项目的 JSON 解析封装到 MyObject 类中：

```
JSONArray data = new JSONArray(jsonString);
int itemCount = data.length();
List<MyObject> list = new ArrayList<MyObject>(itemCount);

for (int i=0; i<itemCount; ++i) {
  JSONObject item = data.getJSONObject(i);

  MyObject o = new MyObject();
  o.setFromJSON(item);
  list.add(o);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:24:43.783

我真的很喜欢Jackson，它速度很快，而且非常有能力。我从未使用过流 API（您在此处使用的），但它确实看起来很困难。除非您非常关心内存使用情况，否则我建议您不要使用流式 API。由于您使用的是移动设备，因此显然更关心资源，所以这就是您的决定。

如果您决定放弃流式 API，最简单的方法是创建一个映射到 JSON 的 java 对象模型，然后使用 ObjectMapper 将字符串读入该对象模型。您可以使用注释自定义转换，以重命名映射或其他的字段。像下面这样的东西应该可以工作（取决于 FacebookItem 的真正定义。）

```
 import org.codehaus.jackson.map.DeserializationConfig.Feature;
  ....
  ObjectMapper mapper = new ObjectMapper();
  // tell it to not fail on properties that you don't have mapped, that way you
  // only have to map the fields you are interested in and can ignore the rest
  mapper.getDeserializationConfig().set(Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
  ItemContainer itemContainer = mapper.readValue(facebookDataJsonString, ItemContainer.class);

  // where elsewhere you have defined something like:

  class ItemContainer {
    List<FacebookItem> data;
    // getters and setters for data.
  } 
```

以下是 eugen 在评论中指定的选项。如果您的 JSON 包含一个列表，这将起作用（即没有“数据”包装器，而是看起来像`[{...},{...}]`：

```
 ObjectMapper mapper = new ObjectMapper();
  // tell it to not fail on properties that you don't have mapped, that way you
  // only have to map the fields you are interested in and can ignore the rest
  mapper.getDeserializationConfig().set(Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);
  List<FacebookItem> items = mapper.readValue(jsonString, new TypeReference<List<Stuff>>(){}); 
```

最后，第三种选择是如果您没有对象映射，则仅将其读入 Map。那么至少你不必处理 JSONObject 和 JSONArray 的东西。

```
 ObjectMapper mapper = new ObjectMapper();
  Map<String, Object> container = mapper.readValue(facebookDataJsonString, Map.class);
  List<Map<String,Object>> = container.get("data");
  for (Map<String,Object> map : container ) {
    System.out.println( "type is " + map.get("type"));
    System.out.println( "from is " + ((Map<String,Object>)map.get("from")).get("name"));
    System.out.println( "message is " + map.get("message"));
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-06T21:06:22.717

首先 - JSON 字符串不完整 - 最后缺少 ]}。当我附加它时，我的 costom 构建的 JSON 解析器得到以下结果：

```
 data:
    id=197394889304_10151331937599305
    picture=http://photos-g.ak.fbcdn.net/hphotos-ak-snc6/246623_10151331660204305_75156416_s.jpg
    message=Puyol faces eight week layoff http://bit.ly/QXhOFE\r\n\r\nPuyol, vuit setmanes de baixa http://bit.ly/T1enma\r\n\r\nPuyol, ocho semanas de baja http://bit.ly/T0eaj8
    link=http://www.facebook.com/photo.php?fbid=10151331660204305&set=a.299455459304.180838.197394889304&type=1&relevant_count=1
    from:
      id=197394889304
      category=Professional sports team
      name=FC Barcelona
    created_time=2012-10-03T17:40:06+0000
    type=photo
    id=575703056_10151181582028057
    picture=http://profile.ak.fbcdn.net/static-ak/rsrc.php/v2/y5/r/j258ei8TIHu.png
    message=En timme in i turneringen och redan chipleader
    name=Hubben 2.1
    link=http://www.facebook.com/pages/Hubben-21/249474758405147
    from:
      id=575703056
      name=Andreas Rol\u00e9n
    created_time=2012-10-03T17:24:19+0000
    type=checkin
    id=688088336_10151111148358337
    picture=http://photos-h.ak.fbcdn.net/hphotos-ak-prn1/72091_10151445544542786_676020840_s.jpg
    link=http://www.facebook.com/photo.php?fbid=10151445544542786&set=at.10151445533587786.588547.694032785.688088336&type=1&relevant_count=1
    from:
      id=688088336
      name=Jens Wilhelmsson
    created_time=2012-10-03T17:21:40+0000
    type=photo
    id=648057222_10151249963167223
    from:
      id=648057222
      name=Eric Lindqvist
    created_time=2012-10-03T17:20:52+0000
    type=link 
```

我现在的问题 - 这里一切都好吗？有什么错误吗？

# c++ - CRecordset::snapshot 在 VS2012 中不再工作 - 有什么替代方案？

> ID：12714310
> 
> 赞同：4
> 
> 时间：2012-10-03T18:10:09.757
> 
> 标签：c++, winapi, mfc, odbc

显然，在 VS2012 中，不推荐使用 SQL_CUR_USE_ODBC。[更新：游标库似乎已从 VS2012 中完全删除]。

MFC 的 CDatabase 不再使用它（而它是 VS2010 和 MFC 早期版本的默认设置），而是使用 SQL_CUR_USE_DRIVER。

不幸的是，SQL_CUR_USE_DRIVER 不能与 Jet ODBC 驱动程序一起正常工作（我们正在与 Access 数据库交互）。驱动程序最初声称支持位置操作（但不支持位置更新），但是当尝试实际查询数据库时，所有并发模型都会失败，直到 MFC 库下降到与数据库的只读交互（这不会为我们飞）。

问题

*   这是 MS 迫使开发人员远离基于 Jet 的数据源并迁移到 SQL Express（或类似）的最新尝试吗？
*   我们应该使用另一种方式通过 VS 2012 版本的 MFC/ODBC 与我们的 Access 数据库进行交互吗？(1)

另请参阅： [http ://social.msdn.microsoft.com/Forums/kk/vcmfcatl/thread/acd84294-c2b5-4016-b4d9-8953f337f30c](http://social.msdn.microsoft.com/Forums/kk/vcmfcatl/thread/acd84294-c2b5-4016-b4d9-8953f337f30c)

* * *

更新：查看各种选项，似乎游标库已从 VS2012 的 ODBC 库中删除。结合 Jet 不能正确支持位置更新 (2) 的事实，它使“快照”模式无法使用。只要基础表具有主键，它似乎就支持“动态集”。无键表与“动态集”模式 (3) 不兼容。所以 - 我可以坚持使用 VS 2010，或者我可以更改我的表格以包含自动编号或类似的东西，以确保 pkey 可用，以便我可以对记录集使用动态集模式。

* * *

(1) 例如，我们应该为 CRecordset 使用不同的开放类型吗？我们目前使用 CRecordset::snapshot。但我从来没有真正理解快照、动态、动态集的各种模式。一组快速的“尝试每个”未能获得到我们的访问数据库的工作可更新接口......
（2）它在最初查询时声称，但随后返回它之前声称支持的所有并发模式的错误
（3） “动态”也出来了，因为 Jet 根本不支持它（从我的测试中可以看出）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:10:30.557

我找到了一个似乎可行的解决方案。我以与 VS 2012 完全相同的方式覆盖 OpenEx，因为我们需要它来调用 AllocConnect 的子版本，因为它在父版本中不是虚拟的。如前所述，我还覆盖了 AllocConnect。在 CDatabase 的派生版本中，尝试以下代码：

MyCDatabase.h

```
BOOL OpenEx(LPCTSTR lpszConnectString, DWORD dwOptions = 0);
void AllocConnect(DWORD dwOptions); 
```

MyCDatabase.cpp

```
BOOL MyCDatabase::OpenEx(LPCTSTR lpszConnectString, DWORD dwOptions)
{
ENSURE_VALID(this);
ENSURE_ARG(lpszConnectString == NULL || AfxIsValidString(lpszConnectString));
ENSURE_ARG(!(dwOptions & noOdbcDialog && dwOptions & forceOdbcDialog));

// Exclusive access not supported.
ASSERT(!(dwOptions & openExclusive));

m_bUpdatable = !(dwOptions & openReadOnly);

TRY
{
    m_strConnect = lpszConnectString;

    DATA_BLOB connectBlob;
    connectBlob.pbData = (BYTE *)(LPCTSTR)m_strConnect;
    connectBlob.cbData = (DWORD)(AtlStrLen(m_strConnect) + 1) * sizeof(TCHAR);
    if (CryptProtectData(&connectBlob, NULL, NULL, NULL, NULL, 0, &m_blobConnect))
    {
        SecureZeroMemory((BYTE *)(LPCTSTR)m_strConnect, m_strConnect.GetLength() * sizeof(TCHAR));
        m_strConnect.Empty();
    }

    // Allocate the HDBC and make connection
    AllocConnect(dwOptions);
    if(!CDatabase::Connect(dwOptions))
        return FALSE;

    // Verify support for required functionality and cache info
    VerifyConnect();
    GetConnectInfo();
}
CATCH_ALL(e)
{
    Free();
    THROW_LAST();
}
END_CATCH_ALL

return TRUE;
}

void MyCDatabase::AllocConnect(DWORD dwOptions)
{
CDatabase::AllocConnect(dwOptions);

dwOptions = dwOptions | CDatabase::useCursorLib;

// Turn on cursor lib support
if (dwOptions & useCursorLib)
{
    ::SQLSetConnectAttr(m_hdbc, SQL_ATTR_ODBC_CURSORS, (SQLPOINTER)SQL_CUR_USE_ODBC, 0);
    // With cursor library added records immediately in result set
    m_bIncRecordCountOnAdd = TRUE;
}
} 
```

请注意，您首先不想将 useCursorLab 传递给 OpenEx，您需要在 AllocConnect 的黑客版本中覆盖它。

另请注意，这只是一个 hack，但它似乎有效。请测试您的所有代码以确保它按预期工作，但到目前为止它对我来说工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T17:41:19.080

如果其他人遇到这个问题，这似乎是答案：

对于 ODBC 到 Access 数据库，使用 CDatabase mydb 连接；mydb.OpenEx(.., 0)，这样你就要求系统不要加载游标库。

然后对于记录集，使用 dynaset CMyRecordset myrs; myrs.Open(CRecordset::dynaset, ...)。

最后，您必须确保您的表有一个主键才能使用动态集（keysets）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:37:42.110

派生[CDatabase](http://msdn.microsoft.com/en-us/library/z0c68dy1%28v=vs.110%29.aspx)并覆盖[OpenEx](http://msdn.microsoft.com/en-us/library/c689y99f.aspx)。在您的派生类`CMyDatabase`中，替换对 to 的`AllocConnect`调用`MyAllocConnect`。显然，您的`MyAllocConnect`函数应该使用所需的参数调用[SQLSetConnectOption ：](http://msdn.microsoft.com/en-us/library/windows/desktop/ms713564%28v=vs.85%29.aspx)

```
// Turn on cursor lib support
if (dwOptions & useCursorLib)
{
    AFX_SQL_SYNC(::SQLSetConnectOption(m_hdbc, SQL_ODBC_CURSORS, SQL_CUR_USE_ODBC));
    // With cursor library added records immediately in result set
    m_bIncRecordCountOnAdd = TRUE;
} 
```

然后使用您的`CMyDatabase`课程而不是`CDatabase`所有查询。

# javascript - 彩盒帮助！嵌入 youtube 视频

> ID：12714313
> 
> 赞同：1
> 
> 时间：2012-10-03T18:10:25.107
> 
> 标签：javascript, html, embed, colorbox

我对 javascript 和使用 colorbox 完全陌生。我可以根据需要加载和关闭视频。但是，我不知道如何更改框的格式或如何在弹出窗口出现时使背景更加不透明。我有以下代码：

```
{js}

<br>
<br>
<h1>hello world! This is soooooo exciting! </h1>

<p><a href="javascript:void jQuery.colorbox({
            html:'<iframe width=600 height=400 src=http://www.youtube.com/embed/eh-0knDpn5g frameborder=10 allowfullscreen></iframe>'
                })"> <img src="/uploads/features/featured-block-1.jpg" /></a></p> 
```

此外，我在关闭弹出窗口时遇到了这个奇怪的问题，但背景仍然不透明。

如果有人可以发布一些代码示例或向我解释颜色框如何/如果采用参数，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T18:30:40.657

您可以在此页面上找到的所有选项：[ColorBox](http://www.jacklmoore.com/colorbox)

这是示例：

```
$.colorbox({ href: 'http://www.youtube.com/embed/eh-0knDpn5g', width: '600px', height: '400px', iframe: true }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-24T20:39:04.413

```
<a class='youtube' href='http://www.youtube.com/watch?v=VOJyrQa_WR4'>Business Cats</a>
<script>
    $('.youtube').colorbox({iframe: true, width: 640, height: 390, href:function(){
        var videoId = new RegExp('[\\?&]v=([^&#]*)').exec(this.href);
        if (videoId && videoId[1]) {
            return 'http://youtube.com/embed/'+videoId[1]+'?rel=0&wmode=transparent';
        }
    }});
</script> 
```

# google-spreadsheet-api - 无法使用 API 更新特定的电子表格行

> ID：12714324
> 
> 赞同：2
> 
> 时间：2012-10-03T18:11:07.307
> 
> 标签：google-spreadsheet-api

我尝试更新[此处](https://developers.google.com/google-apps/spreadsheets/#updating_a_list_row)给出的电子表格行协议选项卡。几个问题：我如何获得 gd:etag？我的工作簿请求或 /full 请求均不包含有关 eTag 的信息。因此，我尝试发送不带 etag 的 PUT 请求并收到错误消息“意外的资源版本 ID”。有人能指出我哪里做错了吗？

# wpf - 仅部署运行 WPF 应用程序所需的文件？

> ID：12714333
> 
> 赞同：0
> 
> 时间：2012-10-03T18:11:32.960
> 
> 标签：wpf

我创建了一个 WPF 应用程序，当我将它提供给最终用途时，我只想为他们提供运行应用程序所必需的东西，换句话说，没有用于调试的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:12:49.490

当您构建发布应用程序时，这就是生成的（默认情况下）。调试信息（例如 .pdb 文件）不会在发布版本中生成。

# grails - Grails taglib 重置属性

> ID：12714334
> 
> 赞同：0
> 
> 时间：2012-10-03T18:11:33.617
> 
> 标签：grails, taglib

我有以下问题。我创建了一个 TagLibrary，它列出了给定的集合，如果数据如下

```
 class LisTagLib {

        static final CONTEXT = this.class.name
        /**
         * Current data from collection
         */
        def currentData;
        String columnHeaders = "";
        List writtenHeaders = [];

        // draw main table
        Closure listTable = { attrs, body ->

            def writer = getOut()

            writer << "<table>";
            writer << "<thead>"
            writer << "<tr>"
            writer << columnHeaders
            writer << "</tr>"
            writer << "</thead>"
            writer << "<tbody>"

            if(attrs.source){
                attrs.source.each() { value ->
                    writer << "<tr>";
                    writer << body()
                    writer << "</tr>";
                }
            }

            // output the body
            writer << "</tbody>";
            writer << "</table>";
        } 
.
.
.
} 
```

我的问题是每次调用此标记库时都没有创建“columnHeaders”属性。如果我在第 X 页然后在第 Y 页中调用它，则第 Y 页的标题也称为“第 X 页中显示的标题 + 第 Y 页中显示的标题”。我尝试了构造函数，但是这个类在编译时只构造一次。有什么解决方案。每次调用此标记库时如何重置这些值？顺便说一下

```
columnHeaders = ""; 
```

在 listTable 闭包的开头或结尾删除所有 columnHeaders 并且不打印任何标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:41:37.440

Taglibs 是单例的，所以类范围的字段，如`currentData`,`columnHeaders`和`writtenHeaders`由所有请求共享。Spring bean 默认为单例，在 Grails 中就是这种情况，但控制器是按请求创建的并且可以具有状态（但不应该）。

解决方法是将这些字段作为变量移动到您的标签正文中，并在需要时将它们作为参数传递给辅助方法，而不是将它们称为类字段。

ps 去掉分号 :)

# c++ - 将 Coverity SA 与 Visual Studio 2005 集成的步骤以及如何运行它？

> ID：12714335
> 
> 赞同：0
> 
> 时间：2012-10-03T18:11:32.593
> 
> 标签：c++, static-analysis

我无法找到有关将 Coverity SA 工具与 VS 2005 集成然后在代码上运行 SA 的步骤的良好文档....如果您有任何重新分级相同的信息，请告诉我谢谢 GaneshK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:08:29.680

Coverity SA 工具有一个适用于 Visual Studio 的插件。

您可以从 Coverity Integrity Manager 又名 Coverity 平台下载它。

转到 yourcimurl:8080/extras/index.html（如果您使用的是最新版本 6.x）。

这也是您可以找到它的文档的地方。

# java - 如何在 HQL 选择语句中引用 java 日历类型？

> ID：12714337
> 
> 赞同：0
> 
> 时间：2012-10-03T18:11:38.263
> 
> 标签：java, database, hibernate, sqlite, hql

我有一个简单的 HQL 查询，我正在尝试执行以返回日期列表。我的映射将日期定义为日历。映射插入可以毫无问题地成功插入，并使用映射回其属性的正确数据值进行检索。例子：

```
@Entity
@org.hibernate.annotations.Proxy(lazy = false)
@Table(name = "TABLE_T")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public class Table {
  @Column(name = "SOME_ID", nullable = false)
  private Long stdIdNum = null;

  @Column(name = "END_DATE", nullable = true)
  private Calendar endDate; 
```

但是，如果我执行以下 HQL 语句：

```
Query query = hsession.createQuery("select endDate from Table");
results = query.list(); 
```

我得到以下异常：

> java.lang.IllegalStateException：节点没有数据类型：org.hibernate.hql.internal.ast.tree.IdentNode -[IDENT] IdentNode：'end_date' {originalText=end_date}
> 
> 在 org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:154) 在 org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:865) 在 org.hibernate.hql .internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:650) 在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:651) 在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement (HqlSqlBaseWalker.java:287) 在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:235) 在 org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248) 在org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183) 在 org.hibernate.hql.internal.ast.QueryTranslatorImpl。在 org.hibernate.engine.query.spi.HQLQueryPlan.(HQLQueryPlan.java:101) 在 org.hibernate.engine.query.spi.HQLQueryPlan.(HQLQueryPlan.java:80) 在 org.hibernate.engine.query.spi.HQLQueryPlan.(HQLQueryPlan.java:101) 编译(QueryTranslatorImpl.java:136) .hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:119) 在 org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:214) 在 org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java :192) 在 org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1537) 在AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:214) 在 org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:192) 在 org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1537) 在AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:214) 在 org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:192) 在 org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1537) 在

我显然正在使用带有 sqlite 后端 sqlite-jdbc-3.7.2.jar 的休眠版本 4.0.0。这是我的 SQLDialect：

```
import java.sql.Types;

import org.hibernate.dialect.Dialect;
import org.hibernate.dialect.function.NoArgSQLFunction;
import org.hibernate.dialect.function.SQLFunctionTemplate;
import org.hibernate.dialect.function.StandardSQLFunction;
import org.hibernate.dialect.function.VarArgsSQLFunction;
import org.hibernate.type.DateType;
import org.hibernate.type.IntegerType;

public class SQLiteDialect extends Dialect {
    public SQLiteDialect() {
        super();

        registerColumnType(Types.BIT, "integer");
        registerColumnType(Types.TINYINT, "tinyint");
        registerColumnType(Types.SMALLINT, "smallint");
        registerColumnType(Types.INTEGER, "integer");
        registerColumnType(Types.BIGINT, "bigint");
        registerColumnType(Types.FLOAT, "float");
        registerColumnType(Types.REAL, "real");
        registerColumnType(Types.DOUBLE, "double");
        registerColumnType(Types.NUMERIC, "numeric");
        registerColumnType(Types.DECIMAL, "decimal");
        registerColumnType(Types.CHAR, "char");
        registerColumnType(Types.VARCHAR, "varchar");
        registerColumnType(Types.LONGVARCHAR, "longvarchar");
        registerColumnType(Types.DATE, "date");
        registerColumnType(Types.TIME, "time");
        registerColumnType(Types.TIMESTAMP, "longvarchar");
        registerColumnType(Types.BINARY, "blob");
        registerColumnType(Types.VARBINARY, "blob");
        registerColumnType(Types.LONGVARBINARY, "blob");
        // registerColumnType(Types.NULL, "null");
        registerColumnType(Types.BLOB, "blob");
        registerColumnType(Types.CLOB, "clob");
        registerColumnType(Types.BOOLEAN, "integer");
        registerColumnType(Types.NULL, "null");
        registerHibernateType(Types.NULL, "null");

        registerFunction("concat", new VarArgsSQLFunction(IntegerType.INSTANCE, "",
            "||", ""));
        registerFunction("mod", new SQLFunctionTemplate(IntegerType.INSTANCE,
                "?1 % ?2"));
        registerFunction("substr", new StandardSQLFunction("substr",
            IntegerType.INSTANCE));
        registerFunction("substring", new StandardSQLFunction("substr",
            IntegerType.INSTANCE));

        registerFunction("replace", new StandardSQLFunction("replace",
            IntegerType.INSTANCE));

        registerFunction( "current_time", new NoArgSQLFunction( "date('now')", DateType.INSTANCE, false ) );
        registerFunction( "current_timestamp", new NoArgSQLFunction( "date('now')", DateType.INSTANCE, false ) );
        registerFunction( "current_date", new NoArgSQLFunction( "date('now')", DateType.INSTANCE, false ) );
    }

    @Override
    public boolean supportsIdentityColumns() {
        return true;
    }

    /*
     public boolean supportsInsertSelectIdentity() {
     return true; // As specify in NHibernate dialect
     }
     */

    @Override
    public boolean hasDataTypeInIdentityColumn() {
        return false; // As specify in NHibernate dialect
    }

    /*
     public String appendIdentitySelectToInsert(String insertString) {
     return new StringBuffer(insertString.length()+30). // As specify in NHibernate dialect
     append(insertString).
     append("; ").append(getIdentitySelectString()).
     toString();
     }
     */

    @Override
    public String getIdentityColumnString() {
        // return "integer primary key autoincrement";
        return "integer";
    }

    @Override
    public String getIdentitySelectString() {
        return "select last_insert_rowid()";
    }

    @Override
    public boolean supportsLimit() {
        return true;
    }

    // Added fix from bug, http://code.google.com/p/hibernate-sqlite/issues/detail?id=1
    @Override
    public boolean bindLimitParametersInReverseOrder() {
        return true;
    }

    @Override
    public String getLimitString(String query, boolean hasOffset) {
        return new StringBuffer(query.length() + 20).append(query).append(
            hasOffset ? " limit ? offset ?" : " limit ?").toString();
    }

    @Override
    public String getLimitString(final String s, final int min, final int max) {
        String limitString = super.getLimitString(s, min, max);

        return limitString;
    }

    @Override
    public boolean supportsTemporaryTables() {
        return true;
    }

    @Override
    public String getCreateTemporaryTableString() {
        return "create temporary table if not exists";
    }

    @Override
    public boolean dropTemporaryTableAfterUse() {
        return false;
    }

    @Override
    public boolean supportsCurrentTimestampSelection() {
        return true;
    }

    @Override
    public boolean isCurrentTimestampSelectStringCallable() {
        return false;
    }

    @Override
    public String getCurrentTimestampSelectString() {
        return "select current_timestamp";
    }

    @Override
    public boolean supportsUnionAll() {
        return true;
    }

    @Override
    public boolean hasAlterTable() {
        return false; // As specify in NHibernate dialect
    }

    @Override
    public boolean dropConstraints() {
        return false;
    }

    @Override
    public String getAddColumnString() {
        return "add column";
    }

    @Override
    public String getForUpdateString() {
        return "";
    }

    @Override
    public boolean supportsOuterJoinForUpdate() {
        return false;
    }

    @Override
    public String getDropForeignKeyString() {
        throw new UnsupportedOperationException(
                "No drop foreign key syntax supported by SQLiteDialect");
    }

    @Override
    public String getAddForeignKeyConstraintString(String constraintName,
        String[] foreignKey, String referencedTable, String[] primaryKey,
        boolean referencesPrimaryKey) {
        throw new UnsupportedOperationException(
                "No add foreign key syntax supported by SQLiteDialect");
    }

    @Override
    public String getAddPrimaryKeyConstraintString(String constraintName) {
        throw new UnsupportedOperationException(
                "No add primary key syntax supported by SQLiteDialect");
    }

    @Override
    public boolean supportsIfExistsBeforeTableName() {
        return true;
    }

    @Override
    public boolean supportsCascadeDelete() {
        return false;
    }
} 
```

## 更新 - 为什么我不使用日期？

> 好吧，有两个相关的原因。这是日期和时间概念的一个非常糟糕的实现，它被日历类所取代。
> 
> Calendar 类虽然有所改进，但也有很多不足之处，因此对于认真的日期/时间工作，每个人都推荐 JodaTime。在 Java 7 中，可能还会有一个用于日历的替代 API，目前称为 JSR-310。

[为什么大多数 java.util.Date 方法都被弃用了？](https://stackoverflow.com/questions/2901262/why-were-most-java-util-date-methods-deprecated)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:17:00.727

我没有查看您的 SQLDialect，但您是否尝试过使用 Date 而不是 Calendar

```
private Calendar endDate

private Date endDate 
```

我记得 java.util.date 曾经与 hibernate 一起工作，但 java.sql.date 不是。这可能是解决方案。在异常中，它显示 end_date，因此这意味着它正在从您的注释中读取，但在数据库级别您遇到了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:18:26.243

您可以用作`java.util.Date`参考（实际上对象可能来自`java.sql`包）。并使用`@Temporal (TemporalType.TIMESTAMP)`例如，如果它是数据库表中的时间戳。

如果它是日期类型，它应该如下所示 -

```
@Temporal (TemporalType.DATE)
@Column(name = "END_DATE", nullable = true) 
private Date endDate; 
```

**更新**（根据您的评论）

```
select t.endDate from Table as t 
```

# ios - 如何使用 iOS 上的标准 TV Out UI？

> ID：12714339
> 
> 赞同：2
> 
> 时间：2012-10-03T18:11:44.437
> 
> 标签：ios, mpmovieplayercontroller

连接外部显示器时，是否有任何受支持的方式可以使用 MPMoviePlayerViewController 显示标准的“TV Connected”UI？我可能遗漏了一些明显的东西，但似乎没有任何关于它的文档，并且 API 中没有任何内容指向启用此功能。

我们的应用程序已经使用一些（相当讨厌的）自定义代码支持 TV Out，但随着 iOS 6 的发布，这种行为开始变得奇怪。我们修补了现有版本并将其发送给测试人员，但其中一位开始抱怨 UI 看起来不同，令我惊讶的是，他使用普通的“TV Connected”用户界面发送了 iOS 5 上旧应用程序的屏幕截图，（据我所知）第三方开发人员无法使用该用户界面。

我知道有使用 UIWebView 来实现此功能的示例，但这不适合我们，因为我们需要响应来自电影播放器​​的通知，以便向我们的服务器软件报告播放状态和进度。标准 UI 还可以比我们使用自定义代码更优雅地处理某些情况（例如 AirPlay 镜像，我们无法使用公共 API 检测到）。

# asp.net - Web 应用程序项目中具有全局变量的类

> ID：12714347
> 
> 赞同：0
> 
> 时间：2012-10-03T18:12:10.910
> 
> 标签：asp.net, vb.net, visual-studio-2010, webforms

我正在尝试从网站项目样式迁移到使用 Web 应用程序项目。

缺少 App_Code 文件夹，我已经阅读了关于编译为 .dll 等的原因，以及为什么我不应该同时包含和引用类和 dll 的原因。那也行。建议我从 App_Code 中移动我的 .vb 类，或者只是将文件夹重命名为“CodeFolder”。我现在已经做到了。

但是我习惯在 App_Code 文件夹中有一个名为 Globals.vb 的类，其中包含全局变量和函数，我可以在整个站点中访问它们而无需实例化。

例如，我的 Globals.vb 可能如下所示：

```
Public Class Globals
   Inherits System.Web.HttpApplication
         Public Shared Path As String = ConfigurationManager.AppSettings("WebPath")
         Public Shared strSql as String

         Public Shared Function ConvertVBLineBreaksToHTML(Byval s as String) as string
              'Code here
         End Function
 End Class 
```

等等。我如何使用 WAP 实现这一点？另外，我之前的 App_Code 文件夹中的 .xsd 数据集又如何呢？这些数据集也可以从任何地方访问？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:21:46.900

您不需要 Web 应用程序样式中的 App_code。只要您有正确的命名空间引用，就可以引用其他类。

如果您希望以一种有条理的方式将您的代码放在不同的文件夹中，然后为每个文件夹创建不同的命名空间，这样您就可以跟踪每个类的目的/范围并相应地在项目中引用。

因此，假设在 helper 文件夹中，您有一个 webhelper.cs，如下所示

```
namespace helper
{
    //code such as extension method and stuff..
} 
```

并且您有一个带有 sitemodule.cs 的模块文件夹，如下所示

```
namespace modules
{
    // code to handle/manage site module
} 
```

然后在您网页后面的代码中，只需引用这些命名空间即可使用它们：

```
using helper;
using modules;

public class testpage : System.Web.UI.Page
{
  //....
} 
```

对于强类型数据集，可以先使用以下命令行将其转换为类：

```
xsd.exe yourdataset.xsd /dataset 
```

您需要从 .net sdk 工具运行它。请参阅[此处](http://msdn.microsoft.com/en-us/library/x6c1kb0s.aspx)了解更多信息。

# jquery - 简单的 jquery 函数不起作用

> ID：12714351
> 
> 赞同：1
> 
> 时间：2012-10-03T18:12:18.850
> 
> 标签：jquery, jquery-ui

我难住了。我在 wordpress 主题的 footer.php 中添加了一个简单的 jquery 函数，但它似乎没有做任何事情。我尝试了一个更简单的 hide(); 功能，也没有触发。我根本无法触发任何 jquery，但 jquery 库肯定会加载到我的主题中（它基于 211）。这是我的代码：

```
</footer><!-- #colophon -->
</div><!-- #page -->

<script>
jQuery(document).ready(function ($) {
    $(".sub-menu").effect("highlight", {}, 3000);
}); 
</script>

<?php wp_footer(); ?>

</body>
</html> 
```

我通过我的functions.php加载了jquery ui核心效果，并在我使用Chrome检查器时看到它显示在站点的资源中，所以highlight(); 功能应该可以工作。

[这是它应该处理的页面](http://www.mcnettfamily.org/wedding/our-story/)

为什么 jquery 脚本不运行？

谢谢！

肯尼

**编辑**

最终代码如下（遗憾的是，我不知道如何通过`<li>`元素使效果递归，但这可以完成工作）：

```
<script>
jQuery(document).ready(function ($) {
setTimeout(function() {
    $('.sub-menu li:first-child').animate({ marginRight: '15px' }, 500);
    $('.sub-menu li:first-child').animate({ marginRight: '0' }, 500);
    setTimeout(function() {
    $('.sub-menu li:nth-child(2)').animate({ marginRight: '15px' }, 500);
    $('.sub-menu li:nth-child(2)').animate({ marginRight: '0' }, 500);
    }, 400);
    setTimeout(function() {
    $('.sub-menu li:nth-child(3)').animate({ marginRight: '15px' }, 500);
    $('.sub-menu li:nth-child(3)').animate({ marginRight: '0' }, 500);
    }, 800);
    setTimeout(function() {
    $('.sub-menu li:nth-child(4)').animate({ marginRight: '15px' }, 500);
    $('.sub-menu li:nth-child(4)').animate({ marginRight: '0' }, 500);
    }, 1200);
}, 3000);

}(jQuery)); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:09:55.953

看起来“.effect()”对页面上的任何元素都没有任何作用。我还没有弄清楚为什么（我最初认为这是一个 CSS 评估顺序问题，但事实并非如此）。

这是一个可接受的替代方案吗？

```
$('.sub-menu').animate({ backgroundColor: '#ffff99' }, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T05:10:01.023

您的脚本未运行，因为`$`未定义参数。解决方案是`(jQuery)`在右花括号之后添加：

```
jQuery(document).ready(function ($) {
    $(".sub-menu").effect("highlight", {}, 3000);
}(jQuery)); 
```

当存在多个库（可能也使用 的库）时使用此技术`$`。有关详细信息，请参阅[将 jQuery 与其他库一起使用](http://docs.jquery.com/Using_jQuery_with_Other_Libraries#Referencing_Magic_-_Shortcuts_for_jQuery)。

现在，您似乎想要以`sub-menu`400 毫秒的延迟为列表项逐一设置动画。您可以使用[`.each()`](http://api.jquery.com/each/)and来简化代码[`.delay()`](http://api.jquery.com/delay/)：

```
jQuery(document).ready(function ($) {

    // iterate over li in .sub-menu
    // NOTE: the overall initial delay is 3000 ms
    $('.sub-menu li').delay(3000).each(function (i) {

        // the effect sets margin-right to 15px, then to 0 after completion
        // NOTE: the delay increases by 400 ms for each item
        $(this).delay(i * 400).animate({ marginRight: '15px' }, 500, 'linear', function () {
            // this is the 'complete' callback function
            $(this).animate({ marginRight: '0' }, 500);
        });

    });

}(jQuery)); 
```

动画的第二部分（设置`margin-right`为 0）在 的`complete`参数中定义`.animate()`，这消除了一次`.animate()`调用。`i * 400`延迟会产生您想要的级联效果。

# ruby-on-rails - Rails 3.2.1 路由错误 - 没有路由匹配

> ID：12714355
> 
> 赞同：0
> 
> 时间：2012-10-03T18:12:30.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我收到以下错误：

```
Routing Error

No route matches {:controller=>"tasks", :action=>"complete", :list_id=>1, :id=>nil}
Try running rake routes for more information on available routes. 
```

这就是我的 routes.rb 文件中的内容：

```
resources :lists do 
  resources :tasks
end

match 'lists/:list_id/tasks/:id/complete' => 'tasks#complete', :as => :complete_task

root :to => 'lists#index' 
```

在我的任务控制器中：

```
attr_accessor :completed
before_filter :find_list

def create
  @task = @list.tasks.new(params[:task])
  if @task.save
    flash[:notice] = "Task created"
redirect_to list_url(@list)
  else
flash[:error] = "Could not add task at this time."
redirect_to list_url(@list)
  end
end

def complete
  @task = @list.tasks.find(params[:id])
  @task.completed = true
  @task.save
  redirect_to list_url(@list)
end

private
  def find_list
    @list = List.find(params[:list_id])
  end 
```

在 show.html.erb （发生错误的地方）：

```
<%= button_to "Complete", complete_task_path(@list.id,task.id) %> 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:03:19.653

What's causing the problem is that `task.id` in your show view returns nil, while in your routes:

```
match 'lists/:list_id/tasks/:id/complete' => 'tasks#complete', :as => :complete_task 
```

Requires a task id in order to match the url pattern.

You can read more about it in [this blog post](http://railsadventures.wordpress.com/2012/07/29/rails-dead-end-no-route-matches/).

# maven - 编译java类maven exec插件

> ID：12714357
> 
> 赞同：0
> 
> 时间：2012-10-03T18:12:40.130
> 
> 标签：maven

我有一个 Maven 项目。我有一个读取文件并创建 pojo 的 java 类，然后项目使用这个 pojo。

我创建了一个 maven exec 插件来在验证阶段运行 java 类，因为我希望在编译发生时生成的 pojo 存在。

但问题在于验证阶段 maven exec 无法找到创建 pojo 的类，因为它尚未编译。

是否可以在 Maven 项目的验证阶段编译几个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:23:59.390

你不能这样做。您将需要在其自己的项目中运行代码生成来生成代码。最好的办法是为此代码生成创建自己的 maven 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:11:22.693

如果您在“初始化”阶段编译代码生成器，然后在“生成源”阶段使用它生成代码，则可以在一个项目中执行此操作。

请参阅[http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

但我可能会按照 bmargulies 的建议使用两个模块：一个项目用于您的代码生成器，一个项目用于您的代码。但是，不要对这些东西使用验证阶段；那是错误的地方。

# vim - Windows/Unix 行尾问题？

> ID：12714358
> 
> 赞同：3
> 
> 时间：2012-10-03T18:12:41.240
> 
> 标签：vim, newline

我有几个最近在 Windows 上和通过 Cpanel 的文件编辑器编辑过的文件，现在显示为双倍行距（如每行之间的额外行 CR/LF）。Vim 告诉我（通过`:set ff?`）文件格式是`unix`（我正在使用 Mac）。`:set list`如果我通过所有行显示特殊字符，则以`$`. 我尝试设置`:e ++ff=mac`似乎删除当前编辑文档中所有换行符的格式，当我编写文件并重新打开它时，它又回到了双倍行距。我还尝试了搜索和替换`^M`以及各种`\r\n`组合。我知道我遗漏了一些简单的东西，但有人可以说明发生了什么吗？这甚至是行尾问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:03:13.140

这似乎是一个行尾问题。

Vim wiki 对这个主题有这样的说法：

[http://vim.wikia.com/wiki/File_format#Terminator_after_last_line](http://vim.wikia.com/wiki/File_format#Terminator_after_last_line)

但是，为了方便起见，当遇到行尾问题时，我在我的 Mac 上使用 BBEdit 将它们更改为 Unix（我在局域网上与 Macbook Pro 共享我的八个 Linux 机器，所以我使用 Dropbox 中的一个目录来传输跨文件。scp 将执行相同的工作）。

除非你有 BBEdit 的副本，否则你可以下载 Barebones 的免费 Text Wrangler，它会做同样的工作。显然只适用于Mac...

# javascript - 谷歌地图：setCenter 和 panTo 不工作

> ID：12714362
> 
> 赞同：1
> 
> 时间：2012-10-03T18:12:52.470
> 
> 标签：javascript, google-maps-api-3

我有以下 Google Maps v3 JS 代码来更改当前地图中心位置：

```
//current map center:40.714409999999994,-74.00598000000004 (New York, NY)

    //destination map center: 40.765789515305165,-80.32365839672855 Beaver Falls, PA
    var latLng = new google.maps.LatLng(40.765789515305165,-80.32365839672855);
    console.log('center b4:');
    console.log(VZ.MDU.Map.map.getCenter());
    VZ.MDU.Map.map.setCenter(latLng);
    console.log('center after:');
    console.log(VZ.MDU.Map.map.getCenter()); 
```

问题是，当我调用 setCenter 时；地图不会改变位置；它仍然显示纽约市中心而不是宾夕法尼亚州比弗福尔斯。当我在调用 .setMap 之前和之后调用 map.getCenter 时；在 map.setCenter 调用之后，中心保持不变。我也尝试过 panTo，但这也无济于事。我没有收到任何 JS 错误，它只是不会更改地图位置。

任何有用的建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:17:39.617

有一个问题。您在最后一次调用 setCeter（console.log 内）中没有传递任何内容。我将它们更改为字符串。改变了

```
//current map center:40.714409999999994,-74.00598000000004 (New York, NY)

    //destination map center: 40.765789515305165,-80.32365839672855 Beaver Falls, PA
    var latLng = new google.maps.LatLng(40.765789515305165,-80.32365839672855);
    console.log('center b4:');
    console.log("VZ.MDU.Map.map.getCenter()");
    VZ.MDU.Map.map.setCenter(latLng);
    console.log('center after:');
    console.log("VZ.MDU.Map.map.getCenter()"); 
```

# c# - app.config 配置管理 - C#、.net

> ID：12714364
> 
> 赞同：3
> 
> 时间：2012-10-03T18:13:06.073
> 
> 标签：c#, xml, configuration, xsd, app-config

我目前正在寻找管理 app.config 文件的方法。我目前有多个版本的相同软件在不同的环境中运行，其中每个软件都使用特定版本的 app.config 文件。用户在进行配置更改时经常会出错，很难验证当前配置文件对于特定版本的软件是否正确。更新软件时，用户（可能不知道新版本软件中的每个配置更改）手动编辑 app.config 文件。我确信可能会有更好的做法，但我现在坚持使用 app.config 文件/手动编辑（不过，请随时分享更好的配置处理方法，以供将来参考）

我的计划是设计一个工具来为每个软件版本（使用 XSD.exe）自动创建 app.config xml 模式文件，并检测用户配置文件中可能存在的错误/错误（或者尝试建议正确的值）。当它到位时，我希望实现向导来帮助用户更新/安装新版本的软件。

我的问题是，是否有任何现有的工具可以完成类似的工作？我的 google fu 没有产生任何结果；或者，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:25:20.760

我认为您应该查看配置转换。基本思想是为配置数据的每个排列定义不同的解决方案配置，然后在构建/部署时，自动为您的部署上下文注入正确的值。

这最常用于环境隔离，即 DEV、TEST、PROD。在 Web 应用程序中，您将为每个环境定义一个解决方案配置，然后为每个配置添加一个配置转换，这意味着您将从拥有单个 web.config 变为拥有 web.DEV.config、web.TEST.config 和一个 web.PROD.config

现在我知道您没有在 Web 应用程序上工作，因此作为 Visual Studio 的一部分本机提供的配置转换工具将无法工作。

然而，有一个很棒的扩展名为 SlowCheetah，它为任何类型的配置带来了配置转换的力量。

[http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

# java - 使用 Eclipse 和 OSGi 将类动态加载到 Java 类路径

> ID：12714368
> 
> 赞同：2
> 
> 时间：2012-10-03T18:13:16.747
> 
> 标签：java, eclipse, dynamic, osgi, classpath

结合来自该站点上的许多帖子和许多其他帖子的信息，我得到了以下代码来动态添加（在运行时）一个包含类的目录到类路径并在该目录中加载一个类。

**我正在使用 OSGi 包并从 Eclipse 运行“Eclipse 应用程序”（一种运行配置）。**

这是我正在使用的代码：

案例1：（这两种情况都是不同的事情，我试图做同样的事情。）

```
File file = new File("/Users/alek/fastFIX/myJPass/"); 
URL url = file.toURI().toURL(); 
URL[] urls = new URL[]{url}; 
ClassLoader cl = new URLClassLoader(urls); 
Class  cls = cl.loadClass("GuiLauncher");    //the file GuiLauncher.class is in the /Users/alek/fastFIX/myJPass/ directory
Class[] argTypes = new Class[] { String[].class };
Method main = cls.getDeclaredMethod("main", argTypes); //trying to run the main class
main.invoke(null, (Object) args); 
```

我没有收到任何错误，也没有任何反应。我还尝试了以下内容，因为我实际上需要加载的类与其他（已经加载的）类进行交互。

案例二：

```
ClassLoader currentThreadClassLoader = Thread.currentThread().getContextClassLoader();
URLClassLoader urlClassLoader = new URLClassLoader(new URL[] {  new File("/Users/alek/fastFIX/myJPass/").toURL() }, currentThreadClassLoader);
Thread.currentThread().setContextClassLoader(urlClassLoader); 
```

然后我像这样加载：

```
 Class<?> c = Class.forName("GuiLauncher"); 
```

或像这样：

```
Class<?> c = Thread.currentThread().getContextClassLoader().loadClass("GuiLauncher"); 
```

并尝试像这样调用主函数：

```
Class[] argTypes = new Class[] { String[].class };
Method main = cls.getDeclaredMethod("main", argTypes); //trying to run the main class
main.invoke(null, (Object) args); 
```

这里也没有任何反应。

任何可能发生的事情的线索？我已经阅读了这里的所有相关帖子以及其他许多地方，但都没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T14:27:22.260

在 OSGI 框架中，需要将 OSGI 类加载器添加为父类，如下所示： ... ClassLoader cl = new URLClassLoader(new URL[]{file.toURI().toURL()}, this.getClass() .getClassLoader()); ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:19:15.293

在案例 1 中，我怀疑 GuiLauncher 类已经在类路径中，因此可能会被默认类加载器加载。在设置动态类加载器`Class.forName()` *之前*尝试这样做，以确认没有可用的类。如果您在 Eclipse 中，则需要注意该类不包含在 Eclipse 类路径中，这通常会发生。您可能需要编译一次，然后将`.java`和`.class`文件移动到其他地方以将它们隐藏在 Eclipse 中！

情况 2：

```
Class.forName("GuiLauncher"); 
```

不会像您期望的那样工作，因为这将使用系统类加载器。这*应该*失败，因此我在上面怀疑。您需要使用[此方法的其他版本](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)来指定您的动态类加载器：

```
Class.forName("GuiLauncher", true, urlClassLoader) 
```

以下代码适用于我。

```
import java.net.*;
import java.lang.reflect.*;
import java.io.File;

public class Main{

public static void main(String[] args)
{
    try{
      Class  cls = Class.forName("Plugin");
    }
    catch(Exception e){
      System.out.println("Nothing there!");
    }

    try{
      File file = new File("plugin"); 
      ClassLoader cl = new URLClassLoader(new URL[]{file.toURI().toURL()}); 
      Class  cls = Class.forName("Plugin", true, cl);
      Method main = cls.getDeclaredMethod("main", new Class[] { String[].class });
      main.invoke(null, (Object) args);
    }
    catch(Exception e){
      e.printStackTrace();
    }
  }
} 
```

该类`Plugin`在子文件夹中编译`plugin`，因此它不在用于运行的类路径中`Main`，如第一个所示`Class.forName()`。

```
public class Plugin{
  public static void main(String[] args)
  {
    System.out.println("Plugin was invoked!");
  }
} 
```

并打印出：

```
Nothing there! 
Plugin was invoked! 
```

# actionscript-3 - When using TabNavigator how to align content of dynamically added tab

> ID：12714369
> 
> 赞同：0
> 
> 时间：2012-10-03T18:13:17.823
> 
> 标签：actionscript-3, apache-flex, flex3

Given a simple example:

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml">
<mx:Script>
    <![CDATA[
        import com.example.Tab;

        private function addSecondTab(event:Event):void {
            tabs.addChild(new Tab("Second"));
        }
    ]]>
</mx:Script>
<mx:TabNavigator id="tabs" width="100%" height="100%">
    <mx:VBox horizontalAlign="center" verticalAlign="middle" label="#1">
        <mx:Label text="test"/>
    </mx:VBox>
</mx:TabNavigator>
<mx:Button label="Add Second Tab" click="addSecondTab(event)" />
</mx:Application>

package com.example {
import mx.containers.VBox;
import mx.controls.Label;
import mx.events.FlexEvent;

public class Tab extends VBox {
    public function Tab(name:String) {
        label = name;

        setStyle("horizontal-align", "center");
        setStyle("vertical-align", "middle"); 
    }

    override protected function createChildren():void {
        super.createChildren();

        var box:VBox = new VBox();
        box.setStyle("border-style", "solid");
        box.setStyle("border-thickness", 1);
        box.setStyle("border-color", 0xFF0000);

        var l1:Label = new Label();
        l1.text = "Hello!";
        box.addChild(l1);

        var l2:Label = new Label();
        l2.setStyle("fontWeight", "bold");
        l2.text = "This is a line of text...";
        box.addChild(l2);

        addChild(box);
    }
}
} 
```

Why aren't styles (border and alignment) being applied inside the second tab?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:39:14.850

Flex only supports hyphenated style names in CSS. So in MXML or Actionscript statements you should use the camel case versions of the style names:

`horizontalAlign`, `verticalAlign`, `borderStyle`, etc.

You can read more about it in Adobe's [documentation](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf62883-7ff2.html), in particular this [section](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf62883-7ff2.html#WS2db454920e96a9e51e63e3d11c0bf69084-7e88) on CSS selector names.

# c++ - 在 cstring 中搜索运算符

> ID：12714370
> 
> 赞同：2
> 
> 时间：2012-10-03T18:13:20.530
> 
> 标签：c++, character, cstring

对于一个作业，我们给出了一个反向波兰符号的方程。对于这个例子，我将使用：`2 3 8 * + $` is`$`用于表示表达式的结尾。使用堆栈，我们输出答案。

我一直在使用：

```
getline(cin, input, '&');
input.c_str(); 
```

读入方程式，然后将其转换为 c_string，这样我就可以查看输入中的各个元素。

之后，我需要检查一些事情。如果元素是数字，我需要将其推入堆栈。如果是空白，我需要跳过它。

```
if (isdigit(input[i]))
{
    push();
    i++;
}
else if (isspace(input[i]))
{
    i++;
} 
```

现在是什么让我卡住了。如果我点击一个运算符（在这种情况下`*`），我需要从堆栈中弹出顶部的两个元素并“操作它们”并将结果推回堆栈。但是，我不知道有什么可以让我认识到他们是操作员。这可能是一个愚蠢的问题，但我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:22:16.703

您可以创建一个函数[映射](http://cplusplus.com/reference/stl/map/)，并匹配运算符

```
std::map<char, void (*)(char *)> operators;

operators['*'] = &mult;
operators['+'] = &add;
... 
```

在你的条件语句中

```
if (isdigit(input[i]))
    {
       push();
       i++;
    }
else if (isspace(input[i]))
    {
       i++;
    }
else if (operators.find(input[i]) != operators.end())
    {
       operators[input[i]](input);
    } 
```

这样，您将能够轻松地将新运算符添加到您的计算器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:16:01.643

只有大约 4 或 5 个操作员。用类似的东西检查它们：

```
if (input[i] == '*') {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:19:32.733

好吧，没有“内置”方式。我只想写一个 IsOperator(char ch) 函数。然后执行以下操作：

```
int IsOperator(char ch)
{
    // either add more operators or use a table, etc. here
    if (ch == '+' || ch == '-' || ch == '/' || ch == '*')
      return 1;

    return 0;
} 
```

如果你有多字符运算符，比如'=='，它会变得有点复杂，因为你必须往前看，但想法是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:51:56.717

如果您正在编写反向波兰符号计算器，那么在堆栈上您只有数字，或者像您的示例中那样的数字。顺便说一句，您不接受多位数字吗？

考虑两种情况，在这两种情况下你只需要`std::stack<int> numbers;`：

*   你有数字字符`c`- 只需将数字放在堆栈上：

代码：

```
numbers,push(c - '0'); 
```

*   你有运算符，比如说'+'，你用它们的总和替换前两个数字：

代码：

```
 if (numbers.size() < 2) {
     throw std::runtime_error("Too little numbers for +");
 }
 int a = numbers.top(); 
 numbers.pop();
 numbers.top() += a; 
```

*   你有'$'，检查堆栈上是否只有一个数字，结果是：

代码：

```
 if (numbers.size() != 1) {
     throw std::runtime_error("There should be only one!");
   }
   int result = numbers.top();
   numbers.pop(); 
```

# java - 如何在Android的锁定屏幕上显示文字

> ID：12714376
> 
> 赞同：1
> 
> 时间：2012-10-03T18:13:42.503
> 
> 标签：java, android

> **可能重复：**
> [如何与锁屏布局交互以在其中显示文本，例如这个应用程序：](https://stackoverflow.com/questions/7569812/how-can-i-interact-with-the-lockscreen-layout-to-display-text-into-it-like-this)

我想在 Android 锁定屏幕上显示一些文本，就像已经实现的“我喜欢它”Android 应用程序一样。[您可以从https://play.google.com/store/apps/details?id=com.ilikeit.main](https://play.google.com/store/apps/details?id=com.ilikeit.main)在 Google Play 上查看该应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:30:22.027

没有记录，但这会起作用;-)

```
String message = "This is a test";
Settings.System.putString(context.getContentResolver(),
            Settings.System.NEXT_ALARM_FORMATTED, message); 
```

# c++ - 模板类构造函数接受模板类的实例

> ID：12714384
> 
> 赞同：4
> 
> 时间：2012-10-03T18:14:08.113
> 
> 标签：c++, templates

我的情况如下：

```
Class Bar {
...
}

template <class T>
class Foo {
public:
  ...
  Foo(Foo<Bar> bar) {
    ...
  }
  ...
} 
```

因此，类 Foo 的构造函数之一可以采用由 Bar 参数化的类 Foo 的元素。这一切都很好，直到我实例化由 Bar 参数化的类 Foo ，其中这个构造函数被解释为不是我想要的复制构造函数。我想知道如何在不干扰复制构造函数的情况下让构造函数获取这样的元素。例如我可以这样做：

```
template <class T>
class Foo {
public:
  ...
  Foo(Foo<Bar> bar, int unused) {
    ...
  }
  ...
} 
```

它工作正常，因为现在构造函数与复制构造函数不冲突。有没有标准的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:40:14.110

如果您的类模板不需要声明复制构造函数（在一般情况下），则可以将构造函数声明为

```
Foo(Foo<Bar> const& bar); 
```

这通常是一个转换构造函数和一个复制构造函数`Foo<Bar>`。其他特化将在适用的情况下使用隐式声明的复制构造函数。

否则，将构造函数设为模板可确保它不是特殊成员。话虽如此，必须注意该构造函数不要干扰复制构造函数。这不好，但你可以这样做：

```
template<typename U>
Foo(U bar, typename boost::enable_if<boost::is_same<U, Foo<Bar> > >::type* = 0); 
```

这是一个不是复制构造函数的构造函数，并且只会在传递 type 的参数时使用`Foo<Bar>`。请注意，由于重载决议的规则，复制构造函数`Foo<Bar>`将优先于此构造函数。

* * *

前面是针对 C++03 的。这是一个简单的 C++11 解决方案：

```
template<int = 0>
Foo(Foo<Bar>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:27:02.083

这实际上不是一个有效的复制构造函数，因为复制构造函数应该遵循以下四种格式之一：

```
MyClass( const MyClass& other );
MyClass( MyClass& other );
MyClass( volatile const MyClass& other );
MyClass( volatile MyClass& other ); 
```

为了让一切按预期工作，将您的参数作为指针传递：

```
Foo(Foo<Bar>* bar) {
    // Logic
} 
```

如果你通过值传递它，如果你的逻辑模仿一个复制构造函数，你可以很好地创建一个无限循环。

# scala - private[foo] 适用于任何基于 foo 的包？

> ID：12714386
> 
> 赞同：3
> 
> 时间：2012-10-03T18:14:14.010
> 
> 标签：scala, scope, package

一个很长的镜头，但把它放在那里——寻找一种基于通用相对包范围提供隐私的方法。

因此，例如，有没有一种方法可以`private[foo]`用于包`com.company1.foo`，并且`com.company2.foo`每个包都可以根据它们的“foo-ness”访问另一个 foo 包

不太可能，但会很好，`private[model]`在依赖 sbt 项目中使用可以真正受益于这种相对隐私的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:31:55.230

你不可以做这个。从语言规范（2.9）：

> 修饰符可以用一个标识符来限定`C`（例如`private[C]`），它必须表示一个包含定义的类或包

因此，您可以期望的最好的结果是共享的通用包。对于给定的两个示例，`com.company1.foo`，`com.company2.foo`最严格的共享根是`com`; `private[com]`将是你能做的最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:30:52.297

我认为这是不可能的，因为`foo`它只是任何给定范围内一个特定的全名包的别名。

因此，对于名称以 结尾的包来说，与名称中`.foo`包含字母的两个包相比，没有更多的共同点`e`。

# javascript - Bootstrap：页面加载时 Twitter Bootstrap 模式不隐藏

> ID：12714388
> 
> 赞同：1
> 
> 时间：2012-10-03T18:14:17.663
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我从给出的示例中复制了完全相同的代码：

```
<-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

<-- Modal -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">Modal header</h3>
</div>
<div class="modal-body">
<p>One fine body…&lt;/p>
</div>
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
<button class="btn btn-primary">Save changes</button>
</div>
</div> 
```

从

```
http://twitter.github.com/bootstrap/javascript.html#modals 
```

当页面第一次加载时，模态立即出现。我没有 javascript 来触发它。他们网站上的现场演示并非如此。有什么遗漏吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:24:58.423

将`hide`类添加到您的模态中。

**更新**在 B3 中，模式已被彻底改造。你不应该需要这个类。

如果它仍然显示，请确保您在 HTML 中使用了正确的语法。它应该默认隐藏。

# php - 2009 教程代码会与当前版本的 Code Igniter 兼容吗？

> ID：12714392
> 
> 赞同：0
> 
> 时间：2012-10-03T18:14:32.553
> 
> 标签：php, codeigniter, crud

我想学习如何使用**Code Igniter创建一个简单的****CRUD**。

 ****[本教程](http://henrihnr.wordpress.com/2009/04/26/simple-crud-application/)**正是我所需要的，但它是在**2009**年发布的。

本教程的所有代码都与最新的**Code Igniter**版本兼容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:18:50.910

在大多数情况下，是的（通过快速浏览您发布的代码）。

一件重要的事情是，现在主要的 CI 类都以 CI_ 为前缀，因此您的控制器将扩展**CI_Controller**和您的模型**CI_Model**。

一些 DB 方法更改了它们的名称，所以曾经的 getWhere() 变成了 get_where() (IIRC)，并且在放弃对 PHP4 的支持方面发生了很大变化（构造函数现在与 __construct() 方法一起使用，例如。 )，即使没有完全采用 PHP 5（例如，没有命名空间）

[无论如何，您可以在changelog](http://codeigniter.com/user_guide/changelog.html)中找到自该版本（我相信应该是 1.7.x）以来的完整更改列表，您可以通过查看已删除、添加或重命名的内容来解决您可能遇到的任何错误。**

# jquery - JQuery Mobile 动态内容在 Gong 返回时消失

> ID：12714393
> 
> 赞同：3
> 
> 时间：2012-10-03T18:14:52.533
> 
> 标签：jquery, jquery-mobile

我正在使用 JQM 和 AJAX 转换并从 sharethis 加载社交共享按钮。初始加载没有问题：

```
$( '#recipe' ).live( 'pageinit',function(event){
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'http://w.sharethis.com/button/buttons.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    var ss=document.getElementById("social");
    ss.innerHTML="<script type=\"text/javascript\" src=\"http://w.sharethis.com/button/buttons.js\"></script><script type=\"text/javascript\">stLight.options({publisher: \"c06b6443-3837-4409-???????\"});</script><span class='st_pinterest_large' displayText='Pinterest'></span><span class='st_facebook_large' displayText='Facebook'></span><span class='st_twitter_large' displayText='Tweet'></span>";    
}); 
```

当我离开此页面并使用本机后退按钮时，社交按钮不再存在。任何想法为什么 JS 没有被保存在页面中？谢谢你的帮助

**更新**

按照建议尝试了 pageshow - 仍然是同样的问题。这是新的JS

```
$( '#recipe' ).live( 'pageshow',function(event){
    var ga = document.createElement('script');
    ga.src = 'http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-???????';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    var addthis_config = {"data_track_addressbar":true};
    var soc=document.getElementById("social");
    soc.innerHTML="<div class=\"addthis_toolbox addthis_default_style addthis_32x32_style\"><a class=\"addthis_button_preferred_1\"></a><a class=\"addthis_button_preferred_2\"></a><a class=\"addthis_button_preferred_3\"></a><a class=\"addthis_button_preferred_4\"></a><a class=\"addthis_button_compact\"></a><a class=\"addthis_counter addthis_bubble_style\"></a></div>";          
}); 
```

重现问题 1\. url： http: [//19thway.com/cck/recipe.php](http://19thway.com/cck/recipe.php?id=2) ?id= 2 （您将在左上角看到 ss 小部件） 2\. 单击左下角的“定位成分” 3\. 单击“返回”按钮左上角 4\. 没有 ss 小部件！！！

我不想关闭 AJAX 导航，我尝试缓存页面，但是 url 发生了变化，所以这对我也不起作用。还有其他选择可以让 JS 重新启动吗？谢谢。

**另一个更新**

这真让我抓狂。如果您在上面的链接上输入应用程序，一切都很好。请试试这个：

1.  在这里输入：http: [//19thway.com/cck/index.html](http://19thway.com/cck/index.html)
2.  向前导航到食谱页面（一切都很好）
3.  浏览过去的食谱页面，然后使用后退按钮（小部件消失了！！！）

有任何想法吗？

# php - 自动审核评论

> ID：12714396
> 
> 赞同：0
> 
> 时间：2012-10-03T18:14:59.457
> 
> 标签：php, facebook, comments

我正在为我的网站使用“facebook 评论插件”，但我面临一个问题，即所有评论在发布前都必须经过审核，我可以知道如何使其自动审核吗？

我的编码如下： -

```
<html>
<head>
    <meta property="fb:app_id" content="123456789"/>  
    <meta property="fb:admins" content="987654321"/>
</head>

<body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=987654321";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

    <div class="fb-comments" data-href="http://abc.def.com/fb_comment.php" data-num-posts="2" data-width="470" data-colorscheme="light" data-mobile="false"></div>
</body> 
```

除此之外，我还修改了[https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)上的评论插件设置。1 - 审核模式：默认情况下将每个帖子设为公开。2 - 黑名单词：无限制 3 - 其他登录提供者：不允许用户使用其他登录提供者发帖。

编码工作正常，但是有人可以教我如何使其自动审核评论吗？谢谢。

# node.js - Everyauth.js 在第一次身份验证请求时失败

> ID：12714402
> 
> 赞同：0
> 
> 时间：2012-10-03T18:15:15.840
> 
> 标签：node.js, nginx, express, everyauth

**背景**：我使用 nginx 作为我的 express 服务器的反向代理来处理 SSL。我使用everyauth 包来处理facebook oauth。Redis 用于会话存储。

**问题**：在第一个身份验证请求中，每个身份验证都会在`getAccessToken`身份验证步骤中超时。在第二个身份验证请求中，它将完成所有身份验证步骤并返回。

**具体来说**：我已经跟踪执行到了在 getAccessToken 步骤中everyauth 使用*请求*包的地步。*Request*使用 https 模块发出永远不会返回的请求（永远不会执行回调）。

**代码**

```
var express = require('express')
  , RedisStore = require('connect-redis')(express)
  , everyauth = require('everyauth')
  , Promise = everyauth.Promise
  , app = express.createServer()
  , authConfig = require('./auth_config');

// Configure server to allow reverse proxy (nginx) to handle SSL requests
app.enable('trust proxy');
app.set('env', process.env.npm_package_config_env);

//everyauth config
everyauth.facebook
    .appId(authConfig.facebook.appId)
    .appSecret(authConfig.facebook.appSecret)
    .redirectPath(authConfig.facebook.redirectPath)
    .scope(authConfig.facebook.scope)
    .popup(true)
    .findOrCreateUser(function(session, accessToken, accessTokExtra, fbUserMetadata){
        ...
    });

app.configure(function(){
    // Check if behind secure reverse-proxy
    app.use(require('./middleware/secureProxyCheck')());
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({
        secret: 'imnottelling', 
        store: new RedisStore({ host: "127.0.0.1", port: "6379" }),
        cookie: { secure: true }
    }));
    //WARNING: do not change the order of everyauth and router
    app.use(everyauth.middleware());
    app.use(app.router);
    app.use(require("./middleware/dynamicCacheHeaders")("sha256"));
});

/*app.get app.listen beyond this point*/ 
```

**版本**

*   节点：0.8.8
*   快递：2.5.10
*   连接redis：1.4.4
*   Everyauth：0.3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:16:50.287

这个问题实际上与上面提到的任何事情都没有关系。问题是因为我没有仔细阅读[daemon.node](https://github.com/indexzero/daemon.node)上的文档造成的。第一次没有任何效果，因为它们都与节点不再运行的前一个进程相关联。很难调试但很容易修复（阅读文档）。

# jquery - jQuery - 一次拖动/排序两个元素

> ID：12714403
> 
> 赞同：3
> 
> 时间：2012-10-03T18:15:22.003
> 
> 标签：jquery, html

我正在使用一个涉及类别和子类别的有点复杂的联系人列表管理器。我现在正试图在混合中实现排序。我的HTML如下：

```
<li>List item</li>
<ul class="subcategory">
     <li>List item</li>
     <li>List item</li>
     <ul class="subcategory">
          <li>List item</li>
          <li>List item</li>
     </ul>
</ul>
<li>List item</li>
<li>List item</li> 
```

现在，当用户想要移动列表项时，它的子类别也应该随之移动（如果有的话）。到目前为止，我已经尝试`.wrap()`将每个列表项及其子类别放在一个 div 中，然后使该 div 可排序，但是效果并不好。也许在 jQuery 中有更好的解决方案来做到这一点？也许我的 HTML 结构可能不同？

# javascript - 要求 JS 找不到我的应用程序

> ID：12714405
> 
> 赞同：0
> 
> 时间：2012-10-03T18:15:36.323
> 
> 标签：javascript, backbone.js, requirejs

正在找到并加载我的所有部门，但我的应用程序（即 mapApp.js 文件）从未找到，并且在我尝试使用它时总是给我一个未定义的结果。

我究竟做错了什么 ？

这是我的文件夹层次结构

```
Site
  |
  |- JS 
      |- Libs
      |    |- * All my deps *
      |
      |- mapApp.JS
      |
      .
      .
      .
      |- /models
      |- /views
      |- /collections 
```

这是我初始化 require.js 的 Main.js 文件

```
require.config({
  baseUrl: '/ctt-ct/js/'
  ,urlArgs: "ts=" +  (new Date()).getTime()

  ,paths: {
      'jquery': 'libs/jquery.min'
      ,'underscore': 'libs/underscore-min'
      ,'backbone': 'libs/backbone'
      ,'templates': '../templates'
  }

  ,shim: {
    jquery: {
      exports: '$'
    }
    ,underscore: {
      exports: '_'
    }
    ,backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    }
  }
});

require([
  'jquery'
  ,'underscore'
  ,'backbone'
  ,'mapApp'
],
function ($, _, Backbone, App) {
  $;                       // <- working
  _;                       // <- working
  Backbone.View;           // <- working
  var app = new App();     // <- NOT working !!!
}); 
```

mapApp.js

```
require([
  'jquery'
  ,'underscore'
  ,'backbone'
],
function ($, _, Backbone) {
    var App = Backbone.View.extend({

        el : $('#map_canvas')    
        ,initialize : function(){
                 // DO a lot of stuff and don't return anything.
        }

        ,drawData: function(){
                 // Do other stuff. 
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:25:47.103

您必须从函数返回 App ：

```
...
function ($, _, Backbone) {
    var App = Backbone.View.extend({

    });

    return App;
}); 
```

通常，我不会像这样使用它，但我绝对不确定正确的方法（文档不是很友好）。我会经常写：

mapApp.js

```
define([
  'views/otherView' //Other BackboneView
],
function (OtherView) {
    var App = Backbone.View.extend({

        el : $('#map_canvas')    
        ,initialize : function(){
            // stuff ; not too much in a View
        }

        ,render : function(){
             var otherView =  new OtherView();
             ...
             return this;
        }
    });
    return App;
}); 
```

在这种情况下，Backbone、Underscore 和 jQuery 是页面中的全局变量。我认为这是有道理的，因为您总是需要它们。

# .net - 如何在工作流活动中正确使用 Unity？

> ID：12714406
> 
> 赞同：0
> 
> 时间：2012-10-03T18:15:37.710
> 
> 标签：.net, unity-container, workflow-foundation-4, workflow-foundation

可以在工作流活动 (WF 4.0) 中使用 IUnityContainer 作为扩展吗？

```
protected override bool Execute(CodeActivityContext context)
{
    var container = context.GetExtension<IUnityContainer>();
    var db = container.Resolve<IDatabaseContext>();
    // ...
} 
```

请给我一个如何做正确的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:49:26.610

我会避免将容器放在扩展列表中。只需获取您真正需要的扩展，即**IDatabaseContext**在您的情况下。更少通常更好。

关于包含依赖注入框架的最佳方法，一种方法是将 WorkflowApplication 或 WorkflowInvoker 对象包装在支持 Unity 的实用程序类中，并提供所有接口/类型作为内部 WorkflowApplication 的扩展。

另一项建议是在活动的 CacheMetadata 方法中注册所需的扩展。此方法用于在执行工作流之前对其进行验证。

```
public sealed class SampleActivity : CodeActivity
{
    protected override void CacheMetadata(CodeActivityMetadata metadata)
    {
        // Require the IDatabaseContext extension to be defined in the workflow host
        // application. The workflow will fail validation if an extension with this
        // interface is not provided.
        metadata.RequireExtension<IDatabaseContext>();
    }

    protected override void Execute(CodeActivityContext context)
    {
        var dbContext = context.GetExtension<IDatabaseContext>();
    }
}

public interface IDatabaseContext
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:19:09.253

[该线程](https://stackoverflow.com/questions/3825791/dependency-injection-ioc-in-workflow-foundation-4)提供了代码示例和链接，解释了如何实现您正在寻找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:16:03.913

```
public sealed class SampleActivity : CodeActivity
{
    protected override void CacheMetadata(CodeActivityMetadata metadata)
    {
        // Require the IDatabaseContext extension to be defined in the workflow host
        // application. The workflow will fail validation if an extension with this
        // interface is not provided.
        metadata.RequireExtension<IDatabaseContext>();
    }

    protected override void Execute(CodeActivityContext context)
    {
        var dbContext = context.GetExtension<IDatabaseContext>();
    }
}

public interface IDatabaseContext
{
} 
```

# android - Android 文件选择器绝对路径问题

> ID：12714407
> 
> 赞同：4
> 
> 时间：2012-10-03T18:15:50.547
> 
> 标签：android, android-intent, absolute-path, filechooser

我使用意图过滤器来获取用户使用文件选择器选择的文件的路径，不幸的是我在获取绝对路径时遇到了问题，

onActivityResult 的路径总是以各种导致我的应用程序错误的额外数据开始

例如

```
/content/:/myabsolutepath 
```

或者

```
file:///myabsolutepath 
```

额外的属性取决于文件类型、手机上的文件管理器等。

我只需要获取表格中的绝对路径

```
/myabsolutepath 
```

这是我的代码

```
private void openFile() {
        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.setType("file/*");
        startActivityForResult(i, FILE_REQ_CODE);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent i) {
        //String with the path;
        path = i.getDataString();

        super.onActivityResult(requestCode, resultCode, i);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T12:04:58.510

尝试：

```
path = i.getData().getPath(); 
```

# java - 根据变量四舍五入到一定数量的小数位的方法

> ID：12714414
> 
> 赞同：0
> 
> 时间：2012-10-03T18:16:19.320
> 
> 标签：java, math, methods

我目前有一个函数，它将接受输入并将其四舍五入到小数点后 4 位，它看起来像这样：

```
 public static double table_round(double n) {
    return (double) Math.round(n * 10000) / 10000;
} 
```

非常简单的函数，但是我想我可以更改它以允许传递第二个变量，该变量表示要四舍五入的位置，但是我不确定如何在数学中打印正确的 0那里的声明（每个 0 代表将打印的小数点后一位）。关于如何实现这一点的任何想法？这只是我的 java 课的一些额外功劳，我还在学习，所以如果有一个我忽略的简单解决方案，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:39:34.847

```
public static double table_round(double n, int digits) {
    return BigDecimal.valueOf(n).setScale(digits,BigDecimal.ROUND_HALF_UP).doubleValue();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:27:12.973

您可以使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)及其[setScale()](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale%28int,%20int%29)方法来修复小数点后的数字

```
public static double table_round(double n) {

    // No of digits you want after decimal.
    int digitsAfterDecimal = 5;

    BigDecimal bigDecimal = BigDecimal.valueOf(n);

    // BigDecimal.ROUND_FLOOR is Rounding Mode..denote how your value is rounded off
    // Other ways are:- "ROUND_CEILING", "ROUND_DOWN", etc.. 
    bigDecimal = bigDecimal.setScale(digitsAfterDecimal, BigDecimal.ROUND_FLOOR);

    return Double.valueOf(bigDecimal.toString());
} 
```

有关详细信息，请参阅[http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal:_A_Tutorial](http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal:_A_Tutorial)

# python - python相当于sed

> ID：12714415
> 
> 赞同：25
> 
> 时间：2012-10-03T18:16:22.310
> 
> 标签：python

有没有办法，没有双循环来完成以下 sed 命令的作用

输入：

```
Time
Banana
spinach
turkey 
```

`sed -i "/Banana/ s/$/Toothpaste/" file`

输出：

```
Time
BananaToothpaste
spinach
turkey 
```

到目前为止，我所拥有的是一份双重清单，这两个清单都需要很长时间才能完成。

列表 a 有一堆数字 列表 b 有相同的一堆数字，但顺序不同

对于 A 中的每个条目，我想在 B 中找到具有相同数字的行并将值 C 添加到它的末尾。

希望这是有道理的，即使我的例子没有。

我在 Bash 中执行以下操作并且它正在工作但是它非常慢......

```
for line in $(cat DATSRCLN.txt.utf8); do
        srch=$(echo $line | awk -F'^' '{print $1}');
        rep=$(echo $line | awk -F'^' '{print $2}');
        sed -i "/$(echo $srch)/ s/$/^$(echo $rep)/" tmp.1;
done 
```

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-03T18:42:42.960

使用`re.sub()`：

```
newstring = re.sub('(Banana)', r'\1Toothpaste', oldstring) 
```

这会捕获一个组（在第一个括号之间），并将其替换为 ITSELF（\number 部分），后跟所需的后缀。需要使用`r''`(raw string) 以便正确解释转义。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-28T11:49:30.793

比赛迟到了，这是我在 Python 中的 sed 实现：

```
import re
import shutil
from tempfile import mkstemp

def sed(pattern, replace, source, dest=None, count=0):
    """Reads a source file and writes the destination file.

    In each line, replaces pattern with replace.

    Args:
        pattern (str): pattern to match (can be re.pattern)
        replace (str): replacement str
        source  (str): input filename
        count (int): number of occurrences to replace
        dest (str):   destination filename, if not given, source will be over written.        
    """

    fin = open(source, 'r')
    num_replaced = count

    if dest:
        fout = open(dest, 'w')
    else:
        fd, name = mkstemp()
        fout = open(name, 'w')

    for line in fin:
        out = re.sub(pattern, replace, line)
        fout.write(out)

        if out != line:
            num_replaced += 1
        if count and num_replaced > count:
            break
    try:
        fout.writelines(fin.readlines())
    except Exception as E:
        raise E

    fin.close()
    fout.close()

    if not dest:
        shutil.move(name, source) 
```

例子：

```
sed('foo', 'bar', "foo.txt") 
```

将 foo.txt 中的所有 'foo' 替换为 'bar'

```
sed('foo', 'bar', "foo.txt", "foo.updated.txt") 
```

将所有 'foo' 替换为 'foo.txt' 中的 'bar' 并将结果保存在 "foo.updated.txt" 中。

```
sed('foo', 'bar', "foo.txt", count=1) 
```

将仅将第一次出现的 'foo' 替换为 'bar' 并将结果保存在原始文件 'foo.txt' 中

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-29T11:31:13.500

如果您使用的是 Python3，以下模块将为您提供帮助： [https ://github.com/mahmoudadel2/pysed](https://github.com/mahmoudadel2/pysed)

```
wget https://raw.githubusercontent.com/mahmoudadel2/pysed/master/pysed.py 
```

将模块文件放入您的 Python3 模块路径中，然后：

```
import pysed
pysed.replace(<Old string>, <Replacement String>, <Text File>)
pysed.rmlinematch(<Unwanted string>, <Text File>)
pysed.rmlinenumber(<Unwanted Line Number>, <Text File>) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-04-28T21:29:37.147

您实际上可以从 python 调用 sed 。有很多方法可以做到这一点，但我喜欢使用 sh 模块。(yum -y 安装 python-sh)

我的示例程序的输出如下。

```
[me@localhost sh]$ cat input 
Time
Banana
spinich
turkey
[me@localhost sh]$ python test_sh.py 
[me@localhost sh]$ cat input 
Time
Toothpaste
spinich
turkey
[me@localhost sh]$ 
```

这是 test_sh.py

```
import sh

sh.sed('-i', 's/Banana/Toothpaste/', 'input') 
```

这可能只适用于 LINUX。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T19:30:49.140

可以使用系统要求低的 tmp 文件来执行此操作，并且只需一次迭代，而无需将整个文件复制到内存中：

```
#/usr/bin/python
import tempfile
import shutil
import os

newfile = tempfile.mkdtemp()
oldfile = 'stack.txt'

f = open(oldfile)
n = open(newfile,'w')

for i in f:
        if i.find('Banana') == -1:
                n.write(i)
                continue

        # Last row
        if i.find('\n') == -1:
                i += 'ToothPaste'
        else:
                i = i.rstrip('\n')
                i += 'ToothPaste\n'

        n.write(i) 

f.close()
n.close()

os.remove(oldfile)
shutil.move(newfile,oldfile) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-02T16:36:10.387

我发现[Oz123 提供的答案](https://stackoverflow.com/a/40843600/26510)很棒，但似乎没有 100% 有效。我是 python 新手，但对它进行了修改并将其包装起来以在 bash 脚本中运行。这适用于osx，使用python 2.7。

```
# Replace 1 occurrence in file /tmp/1
$ search_replace "Banana" "BananaToothpaste" /tmp/1

# Replace 5 occurrences and save in /tmp/2
$ search_replace "Banana" "BananaToothpaste" /tmp/1 /tmp/2 5 
```

### 搜索替换

```
#!/usr/bin/env python
import sys
import re
import shutil
from tempfile import mkstemp

total = len(sys.argv)-1
cmdargs = str(sys.argv)
if (total < 3):
    print ("Usage: SEARCH_FOR REPLACE_WITH IN_FILE {OUT_FILE} {COUNT}")
    print ("by default, the input file is replaced")
    print ("and the number of times to replace is 1")
    sys.exit(1)

# Parsing args one by one 
search_for = str(sys.argv[1])
replace_with = str(sys.argv[2])
file_name = str(sys.argv[3])
if (total < 4):
    file_name_dest=file_name
else:
    file_name_dest = str(sys.argv[4])
if (total < 5):
    count = 1
else:
    count = int(sys.argv[5])

def sed(pattern, replace, source, dest=None, count=0):
    """Reads a source file and writes the destination file.

    In each line, replaces pattern with replace.

    Args:
        pattern (str): pattern to match (can be re.pattern)
        replace (str): replacement str
        source  (str): input filename
        count (int): number of occurrences to replace
        dest (str):   destination filename, if not given, source will be over written.        
    """

    fin = open(source, 'r')
    num_replaced = 0

    fd, name = mkstemp()
    fout = open(name, 'w')

    for line in fin:
        if count and num_replaced < count:
            out = re.sub(pattern, replace, line)
            fout.write(out)
            if out != line:
                num_replaced += 1
        else:
            fout.write(line)

    fin.close()
    fout.close()

    if file_name == file_name_dest:
        shutil.move(name, file_name) 
    else:
        shutil.move(name, file_name_dest) 

sed(search_for, replace_with, file_name, file_name_dest, count) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-03T16:36:22.990

多亏了上面的 Oz123，这里是 sed，它不是逐行的，因此您的替换可以跨越换行符。较大的文件可能是个问题。

```
import re
import shutil
from tempfile import mkstemp

def sed(pattern, replace, source, dest=None):
"""Reads a source file and writes the destination file.

Replaces pattern with replace globally through the file.
This is not line-by-line so the pattern can span newlines.

Args:
    pattern (str): pattern to match (can be re.pattern)
    replace (str): replacement str
    source  (str): input filename
    dest (str):   destination filename, if not given, source will be over written.
"""

if dest:
    fout = open(dest, 'w')
else:
    fd, name = mkstemp()
    fout = open(name, 'w')

with open(source, 'r') as file:
    data = file.read()

    p = re.compile(pattern)
    new_data = p.sub(replace, data)
    fout.write(new_data)

fout.close()

if not dest:
    shutil.move(name, source) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-31T03:22:29.307

[大众编辑](https://github.com/elmotec/massedit)

您可以将其用作命令行工具：

```
# Will change all test*.py in subdirectories of tests.
massedit.py -e "re.sub('failIf', 'assertFalse', line)" -s tests test*.py 
```

您也可以将其用作库：

```
import massedit
filenames = ['massedit.py']
massedit.edit_files(filenames, ["re.sub('Jerome', 'J.', line)"]) 
```

# java - JTextField getText（）不起作用

> ID：12714418
> 
> 赞同：2
> 
> 时间：2012-10-03T18:16:30.957
> 
> 标签：java, string, swing, io, jtextfield

我一直在寻找，我找不到任何人可以解决这个问题。我正在制作一个游戏，在那个游戏中，我有可编辑的控件。控件窗口是一个单独的 JFrame，当我单击确认按钮时，它应该将 JTextFields（保存控件）中的项目写入文件。但这不起作用，所以我让它打印包含值的arraylist。这是代码：

```
public void writeControls() {
    ArrayList<String> al = new ArrayList<String>();

    al.add(up.getText());
    al.add(down.getText());
    al.add(left.getText());
    al.add(right.getText());
    al.add(jump.getText());
    al.add(duck.getText());
    al.add(attack.getText());

    for (int i = 0; i < al.size(); i++) {
         System.out.println(al.get(i));
    }
    System.exit(0);
} 
```

问题是这样的：如果我更改最终的 JTextField`attack`或任何其他的，然后单击提交，系统会打印出默认控件。例如，如果 JTextField 的值为 w、a、s、d、r、t、q，并且 i 将值 q 更改为 i，它会打印出 q。我究竟做错了什么？提前致谢！

**编辑1：**

文本字段的代码，并且`FILES....`只是存储在不同类中的字符串。该类`setText()`位于文本字段下方。

```
up = new JTextField(setText(FILES.controlsFileFinalDir, 1));
    down = new JTextField(setText(FILES.controlsFileFinalDir, 2));
    left = new JTextField(setText(FILES.controlsFileFinalDir, 3));
    right = new JTextField(setText(FILES.controlsFileFinalDir, 4));
    jump = new JTextField(setText(FILES.controlsFileFinalDir, 5));
    duck = new JTextField(setText(FILES.controlsFileFinalDir, 6));
    attack = new JTextField(setText(FILES.controlsFileFinalDir, 7));

public String setText(String fileDir, int lineNum) {
    String txt = "";
    txt = io.readSpecificLine(fileDir, lineNum);
    txt = switchCase(txt);

    return txt;
} 
```

`switchcase()`只是获取您在文本文件中写入的内容，这些内容从中获取值，并翻译它们。所以如果值为0，则变成空格等`io.readSpecificLine();`，只是从文件中获取文本行。这有帮助吗？

**编辑 2：** 我只是在四处闲逛，发现如果我通过使用设置 JTextField 文本，`setText("");`那么使用`getText();`它就可以了。所以问题是当我手动更改它并使用 getText(); 它不会工作。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:13:57.527

要将文本更新为当前存在的 JTextField，我会将 JTextField 建立为类变量，并创建一个 setter/getter 方法来调整它（我假设您正在这样做）。

根据你的方法，你会使用类似的东西：

```
up.setText(setText(FILES.controlsFileFinalDir, 7)); 
```

编辑：**第一个 setText 是 JTextField.setText，第二个 setText 是您发布的公共方法。我假设您的第二个 getText() 不起作用，因为您可能没有正确设置文本。

如果没有看到更多代码，我真的无法给出更好的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:35:50.613

主要可能性：

(1) 文本字段的可编辑属性设置为 false。

(2) 您正在创建 JTextField 的多个副本，然后在屏幕上编辑一个新副本，但在获得值时引用旧副本。

(3) 您有一个 ValueChanged 或 LostFocus 事件处理程序，它将文本字段重置为其默认值

(4) 它实际上是 JFormattedTextField 而不是 JTextField

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:44:44.487

试试这个：

```
textbox.setText(setFile(args)); // your function for set file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T09:45:42.440

如果我是你，我会尝试调试程序。你可能会在你的代码中犯一些错误，你将无法通过检查代码来看到。

例如你调用函数的顺序等等，也许你这里有问题，或者你有几个线程，所以你尝试读取文本字段甚至没有设置它们等等......很难说没有审查整个代码。

因此，如果您使用 eclipse，您可以点击此链接了解如何调试：[http ://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

Netbeans 或任何其他 IDE 也应该支持调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:06:23.413

这似乎是一件奇怪的事情，但我认为这是指针的问题。如果您在传入之前创建一个新字符串，JTextField 将能够在内部对其进行更改，并在被要求提供修改后的值时返回您期望的内容。

```
down = new JTextField("" + setText(FILES.controlsFileFinalDir, 2));
// or
down = new JTextField(new String(setText(FILES.controlsFileFinalDir, 2))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T04:30:48.740

您可能想尝试以下方法：

创建一个类 Test.java

```
import java.util.ArrayList;
import javax.swing.JTextField;

public class Test implements Runnable {
    private ArrayList<JTextField> textFields = null;
    private ArrayList<String> stringList = null;

    public Test(ArrayList<JTextField> textFields, ArrayList<String> stringList) {
        this.textFields = textFields;
        this.stringList = stringList;
    }

    @Override
    public void run() {
        for ( JTextField textField : this.textFields )
            this.stringList.add( textField.getText() );
    }

} 
```

然后，在您使用“`getText()`方法..”的地方执行以下操作...

```
ArrayList<JTextField> textFields = new ArrayList<JTextField>();
// add all the JTextField to textFields
ArrayList<String> stringList = new ArrayList<String>();

Test test = new Test( textFields, stringList );
SwingUtilities.invokeLater( test );
// check if the stringList is populated. 
```

如果这行得通，那么我相信，由于某种原因，JTextField 还没有完成“设置”文本，并且在它完成之前调用了你的 getText()。我以前遇到过类似的问题，这解决了我的问题，但是，这可能不是完美的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-13T13:40:18.530

首先，您应该将“setText()”方法名称更改为“getTextFromFile()”之类的名称，这样更易​​读

然后，如果您在不同的线程中设置和读取新文本，我敢打赌 setText() 需要很长时间才能返回，因为它正在访问文件系统，而读取值的方法会立即运行

我会尝试做一个小测试：

```
public void test(){ // must be run after the JTextFields be initialized
    up.setText("TEST")
    System.out.println(up.getText());
    up.setText(setText(FILES.controlsFileFinalDir, 1));
    System.out.println(up.getText());
} 
```

如果 test() 打印出正确的值，那么我们可以假设如果您在同一个线程中设置和读取新值，它工作正常

我要做的另一个测试是：

```
public void testThread(){
    new Thread(){
        public void run(){
            while(true){
                if(up!=null){
                    System.out.println(up.getText());
                }
                try{
                    Thread.sleep(1000);
                }catch(Exception e){
                    e.printStackTrace();
                }
            }
        }       
    }.start();
} 
```

它将每 1 秒打印一次 up 的值，以便您查看是否在一段时间后获得新值。如果是，那么答案是：您的 setText() 需要很长时间才能运行，并且您在设置新值之前正在读取该值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-01T17:27:33.877

**解决方案** 以上答案都不适合我，所以我最终决定从那门课重新开始。我改变的几件事是我制作 JTextFields 的方式。我将它们作为一个数组而不是单个对象。其次是我表达他们所说的话的方式。当我初始化它们时，我无法让它们用参数中的文本创建。所以我不得不单独这样做。我更改了一些方法名称，以减少将来的混乱，它奏效了！所以我不确定这是怎么回事，也许这是我做的方式，也许只是侥幸。它有时会发生，所以我很抱歉耽搁和浪费您的时间！无论如何，感谢所有答案！

# vbscript - 将 Excel PublishObjects 与 VBScript 一起使用

> ID：12714419
> 
> 赞同：0
> 
> 时间：2012-10-03T18:16:35.477
> 
> 标签：vbscript

没关系，我想通了。将其留在这里以防其他人遇到此问题并进行搜索。基本上，问题在于 VBScript 想要一个真正的参数列表，并且不喜欢我试图根据参数名称设置值，就像在 VBA 中一样：

```
objWorkbook.PublishObjects.Add(4,"F:\METRICS_TEAM\OSO\New OSO\Net OSO Acceptance Email.html","Destination",objWorkbook.Sheets("Destination").Range("B1:R29").Address,0).Publish (True) 
```

工作正常。有关该问题的详细信息，请参见下文。

* * *

我正在尝试将一些代码从 VBA 移动到 VBScript，并且在尝试将 Excel 范围导出到 HTML 时遇到了 PublishObjects 对象的一些问题。这是VBA中的工作代码：

```
With ActiveWorkbook.PublishObjects.Add(SourceType:=xlSourceRange, _
    fileName:="F:\METRICS_TEAM\OSO\New OSO\Net OSO Acceptance Email.html", _
    Sheet:="Destination", _
    Source:=Sheet3.Range("B1:R29").Address, _
    HtmlType:=xlHtmlStatic)
    .Publish (True)
End With 
```

这是我在 VBScript 中遇到问题的代码：

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("F:\METRICS_TEAM\OSO\New OSO\Net OSO Acceptance Email.xlsm")

With objWorkbook.PublishObjects.Add(SourceType:=4, _
    Filename:="F:\METRICS_TEAM\OSO\New OSO\Net OSO Acceptance Email.html", _
    Sheet:="Destination", _
    Source:=objWorkbook.Sheets("Destination").Range("B1:R29").Address, _
    HtmlType:=0)
    .Publish (True)
End With 
```

当我在 VBScript 中运行它时，我收到一个编译错误，说它在第一行继续之前缺少一个右括号......由于某种原因，它似乎不喜欢 .add 方法中的参数。我尝试删除 with 块和行继续，但我得到了同样的错误。

任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-27T11:53:31.503

请将此与声明一起使用。

`With ActiveWorkbook.PublishObjects.Add(xlSourceRange, "D:\EXCEL_TO_HTML_RANGE.htm", "Sheet1", _ Range("B1:R29").Address, xlHtmlStatic, "Title of the page") .Publish (True) End With`

# jquery - 使用 JQuery 验证时有效插入 Div

> ID：12714423
> 
> 赞同：4
> 
> 时间：2012-10-03T18:16:50.427
> 
> 标签：jquery, html, css

我有一个表单的 Jquery 验证，如下所示：

```
$(this.initVariables.formId).validate({
     errorElement: "div",
     errorPlacement: function(error, element) {
        error.insertBefore(element.parent());
     }
} 
```

问题是当出现错误时，表单会扭曲如下： ![在此处输入图像描述](../Images/6e690d3cd4990f65ff8088f86551fd0e.png)

我想要做的是有效地调整邻居字段与错误字段相同的行，如下所示： ![在此处输入图像描述](../Images/28ec2dc738c826db619aa1d80bdcd1ed.png)

div的HTML代码是：

```
<div class="relatedField>
    <div id="wwgrp_addForm_summaryData_firstName" class="wwgrp" style="float: left; padding-right: 6px;">
          <div id="wwlbl_addForm_summaryData_firstName" class="wwlbl"> 
              <label class="label" for="addForm_summaryData_lastName"> FIRST NAME </label>
          </div>
          <div id="wwctrl_addForm_summaryData_firstName" class="wwctrl">
               <input id="addForm_summaryData_firstName" class="storedPaymentInput_size4 alphabet" type="text" value="" name="summaryData.firstName">
          </div>
    </div>
    <div id="wwgrp_addForm_summaryData_lastName" class="wwgrp" style="float: left; padding-right: 6px;">
          <div id="wwlbl_addForm_summaryData_lastName" class="wwlbl"> 
              <label class="label" for="addForm_summaryData_lastName"> LAST NAME </label>
          </div>
          <div id="wwctrl_addForm_summaryData_lastName" class="wwctrl">
               <input id="addForm_summaryData_lastName" class="storedPaymentInput_size4 alphabet" type="text" value="" name="summaryData.lastName">
          </div>
    </div>
</div> 
```

我如何在不更改表单实现的情况下使用 jquery 做到这一点。除此之外，我还有很多领域。请帮忙。谢谢你。

我的解决方案是

```
 errorPlacement: function(error, element) {
     error.insertBefore(element.parent());
     element.parent().parent().siblings().each( function () {
           var child = $(this).children("div.wwctrl");
        $("<div class='SPACE'>&nbsp;</div>").insertBefore(child);
      });
 } 
```

但正如您所看到的，它并不干净，并且在正确验证后，div 空间不会被删除。

![在此处输入图像描述](../Images/13ec89242565cdc1cc8d295cc19cd2bd.png)

关于如何更好地做到这一点的任何想法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:40:10.607

您实际上可以在输入之上创建一个空白 div 并为它们声明一个宽度/高度。就像您的浏览器从一开始就计算这个“空白空间”一样，您可以通过 $('divname ').html。只是一个想法。有点像这样。。

[http://jsfiddle.net/ng8VQ/72/](http://jsfiddle.net/ng8VQ/72/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:21:20.857

由于您尚未发布该页面的链接，因此别无选择，只能假设并提出可以完成工作的错误答案。

做这个：

```
$(this.initVariables.formId).validate({
     errorElement: "div",
     errorPlacement: function(error, element) {
         error.insertBefore(element.parent());
         error.insertBefore(element.parent().siblings());

         //Insert something here that will overlay all the other errors
         //a div maybe, with opacity=1 leading them to be not visible.

     }
} 
```

请记住使用绝对定位的 div，否则它将使您处于相同的情况。

也许这会让你明白我的意思，[例如](http://jsfiddle.net/rH3Fv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T19:34:59.873

当您检查干净验证时，请查看彼此的错误框并检查 HTML 错误是否为空。如果它是空的，请将其删除。虽然这仍然是一个hacky-work-about。

```
element.parent().parent().siblings.each( CheckEmpty );

function CheckEmpty() {
    if ( $( this ).html()=="&nbsp;" ) {
        $( this ).remove();
    }
} 
```

或者，如果您给每个空的错误消息一个特定的类，您可以简单地删除所有具有该类名称的元素。但是，这可能会更麻烦，因为它将删除所有这些。如果他们在多个场线上有错误，这将不起作用，因为通过修复一个，它将删除所有这些。

```
$( ".blank" ).remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T19:42:27.963

如果您查看“仅限字母！”的高度会怎样？元素，只需在其他输入字段的顶部添加那么多填充/边距以将其向下推这么多？

这样，您将避免创建任何新元素，但是当您摆脱“仅限字母！”时，您必须记住删除此边距/填充。元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T20:35:50.560

把整个东西放在桌子上。`<tr>`在这个`<td>`新的`<tr>`. 我希望我很清楚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-03T18:51:17.923

```
<form id='register_frm' action='' method='post'>
<input id="firstName" type="text" name="firstName" value="">
 <div class='error-div'>  
<label class='error' for='firstName'></label>   
</div>
<input id="lastName" type="text" name="lastName" value="">
 <div class='error-div'>  
<label class='error' for='lastName'></label>    
</div>
<input type='submit' value='Register' />
</form>

$("#register_frm").validate({
    errorClass:'error',
    rules: {
    firstName: "required",
    lastName: "required"
    }
});

<style>
.error{
color:red;
font-size:12px;
}
.error-div{
height:15px;
}
</style> 
```

# c# - EntityFramework 按默认顺序添加行

> ID：12714424
> 
> 赞同：0
> 
> 时间：2012-10-03T18:16:53.793
> 
> 标签：c#, entity-framework-4

> **可能重复：**
> [实体框架中多条记录的插入顺序](https://stackoverflow.com/questions/11521057/insertion-order-of-multiple-records-in-entity-framework)

我有一个表购买的对象，`Purchase(ID_PUR,Name,Quantity,...)`其中`ID_PUR`是一个身份（1,1），所以当我向我的实体添加购买时，`Context.Purchases`它会随机排序对象！！！，

如果我`Context.SaveChanges()`每次保存后都会`.Add`正确重新排序，

那么有没有办法按默认插入顺序对对象进行排序？

# watin - 使用 button.click 登录网站

> ID：12714426
> 
> 赞同：0
> 
> 时间：2012-10-03T18:17:01.197
> 
> 标签：watin

我想使用 watin 模拟登录过程。我用

```
browser.Button(Find.ByClass("button")).Click(); 
```

它工作了几次，然后停止工作。我可以看到页面已刷新，但我没有登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:42:33.037

事实证明 Firefox 在我的环境中效果更好。IE不是很可靠。但是您必须使用 Firefox 4.3。好消息是您可以使用便携式 Firefox。

# c# - 插入具有自动增量列 SQL Server 值的表

> ID：12714429
> 
> 赞同：0
> 
> 时间：2012-10-03T18:17:09.433
> 
> 标签：c#, asp.net, sql-server, sql-server-2008

我有一个带有主键自动递增 ID 列的表。

在某些情况下，我想将自动增量列的值插入到同一个表中的另一列（没有更新语句）。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:23:13.790

这个 ID 值进入时是否进入同一行的另一列？如果是这样，我认为您可以使该其他列成为在某些条件下返回 ID 列的计算列。

除此之外，我想不出任何方法可以在没有某种更新或插入语句的情况下将值放在适当的位置。但是，当您最终使用更新或插入语句执行此操作时，您可以获得使用 SCOPE_IDENTITY() 生成的最后一个 ID，并且您还可以通过添加 OUTPUT 子句来获取插入到其他语句中的值。请参阅[http://msdn.microsoft.com/en-us/library/ms174335.aspx](http://msdn.microsoft.com/en-us/library/ms174335.aspx)。

# javascript - 嵌套 Backbone 集合的 URL

> ID：12714431
> 
> 赞同：0
> 
> 时间：2012-10-03T18:17:14.603
> 
> 标签：javascript, backbone.js

我的骨干模型定义如下：

```
models.Author = Backbone.Model.extend({
    defaults: {
        id: null,
        name: null,
        books: null     // <-- This is another backbone collection with books of the author
    }    
}); 
```

返回作者书籍集合的 URL 是： [http ://example.com/books?author_id=123](http://example.com/books?author_id=123)

所以问题是将 Author.books 的 URL 定义为上述的最佳方法是什么？现在我在Author的类构造函数中设置如下：

```
...
initialize: function(attributes) {
    var bc = new collections.Books();
    bc.url = '/books?author_id' + this.get('id');
    this.set({books: bc});
}
... 
```

我想知道是否有更好或更正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:10:44.013

这对我来说似乎很奇怪。我肯定会寻找像**/authors/{authorId}/books**这样的 url 来查找作者的 Books url。

所以我会创建一个 Books 的 Backbone.Collection 模型：

```
var AuthorCollection = Backbone.Collection.extend({
  model: Book,
  url : function(){
     return this.author.url()+"/books"; // this mean that the AuthorCollection must reference an Author
  }
}); 
```

将其添加到您的作者：

```
initialize: function() {
    this.books = new AuthorCollection();
    this.books.author = this; // setting the author to the collection
    //this.set({books: bc}); nested models are not recommended in attributes
} 
```

现在调用 author24.books.fetch() 应该拍摄 /authors/24/books 网址。

看看[Nested Models FAQ](http://backbonejs.org/#FAQ-nested)，非常有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:37:45.860

它有效吗？

然后它是“正确的”。

就更好的情况而言 - 这是主观的。在大多数情况下，Backbone 没有“正确”或“错误”的方式，所以如果它有效，嘿，去吧。

您可能需要注意的是，如果该作者 ID 更改，您希望更改您的 URL，因此请`change:id`在您的`initialize`

```
this.on('change:id', function(){
    this.set('books', this.get('books').url = '/books?author_id'+this.get('id');
}, this); 
```

或者那种程度的东西。此外，如果您要从服务器中取回附有书籍列表的作者对象，则应定义一个自定义解析方法，该方法使书籍集合并将书籍对象附加到其中。

```
parse: function(resp){
    var books = new collections.Books();
    if(!_.isEmpty(resp.books)){
        _.each(resp.books, function(book){
            var b = new Book();
            b.set(b.parse(book));
            books.add(b, {silent:true});
        });
    }
    resp.books = books;
    return resp;
} 
```

# html - 使下一个 html 元素在 z-index 中低于前一个

> ID：12714433
> 
> 赞同：2
> 
> 时间：2012-10-03T18:17:16.663
> 
> 标签：html, css

正常的 z-index 顺序使`p`这里的元素高于`h1`元素。在我的情况下，两者都有一些背景，并且作为视觉效果有点`h1`重叠。`p`两个元素相对定位。因此，当重叠发生时，`p`隐藏了元素的某些部分`h1`。有没有一种优雅的解决方案可以让`p`元素的 z-index 低于`h1`元素，而不必交换它们并使它们绝对定位？

```
<h1>Title</h1>
<p>description</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:22:22.620

只需添加 z-index。它应该可以正常工作。[工作示例。](http://jsfiddle.net/EDDT2/)

示例 CSS：

```
h1
{
    position: relative;
    top: 20px;
    left: 20px;
    color: blue;
    z-index: 50;
}
p
{
    position: relative;
    top: 0px;
    left: 0px;
    color: red;
    background-color: yellow;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:25:38.960

您可以在相对定位的项目上使用 z-index。您只需要定义位置属性。见这里：[https ://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Adding_z-index)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:24:20.490

简单的。只需将相对位置和 z-index 添加到 H1，并为段落添加负上边距。

示例：[http ://dabblet.com/gist/3828786](http://dabblet.com/gist/3828786)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:29:08.053

在 head 部分添加以下内容：

```
<style type="text/css">
    h1
    {
        z-index:2;
    }
    p
    {
        z-index:2;
    }
</style> 
```

# python - Telnet Server ubuntu - 密码流

> ID：12714434
> 
> 赞同：4
> 
> 时间：2012-10-03T18:17:20.680
> 
> 标签：python, telnet, ubuntu-12.04

我正在尝试在 Ubuntu 12.04 上使用 Python 创建 Telnet 服务器。为了能够以不同的用户身份执行命令，我需要使用`su`命令，然后提示输入密码。现在，我知道提示已发送到 STDERR 流，但我不知道应该将密码发送到哪个流。如果我尝试通过 STDIN 发送它，我会收到错误：`su: must be run from a terminal`. 我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:44:00.610

如果你真的想使用系统的`su`程序，你需要创建一个终端对，看`man 7 pty`，在 python 中，这个`pty.openpty`调用会返回一对文件描述符，一个给你，一个给 su。然后你必须fork，在子进程中将stdin/out/err更改为slave fd并执行su。在父进程中，您向主 fd 发送数据并从主 fd 接收数据。Linux内核将它们连接在一起。

或者，您也许可以效仿`su`？

# c++ - 打开 MP 导致内存泄漏

> ID：12714438
> 
> 赞同：0
> 
> 时间：2012-10-03T18:17:23.323
> 
> 标签：c++, parallel-processing, openmp

我正在尝试使用这种方法在 C++11 中并行化动态编程算法：

```
void buildBaseCases() {
        cout << "Building base cases" << endl;
            for (unsigned int i = 0; i < BOARD_SIZE; ++i)
            {
                buildBaseCase(i);
            }
        cout << "Done building base cases" << endl;
    } 
```

因此，我的并行化版本将类似于：

```
void buildBaseCases() {
        cout << "Building base cases" << endl;
        #pragma omp parallel
        {
            #pragma omp for
            for (unsigned int i = 0; i < BOARD_SIZE; ++i)
            {
                buildBaseCase(i);
            }
        }
        cout << "Done building base cases" << endl;
    } 
```

然而，这导致 valgrind 抱怨内存泄漏。我是否误解了您应该使用 openMP 的方式，还是发生了什么可疑的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:45:17.663

事实证明根本没有问题。这是此处描述的问题的重复：http: //gcc.gnu.org/bugzilla/show_bug.cgi?id= [36298](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36298)

# seo - 在 HTML 中使用规范标签

> ID：12714441
> 
> 赞同：3
> 
> 时间：2012-10-03T18:17:32.310
> 
> 标签：seo

我阅读了 HTML 中的规范标签，据我了解，它用于帮助搜索引擎识别哪些是原始内容。我最近创建的博客中有文章，我已将其粘贴在某些其他流行的网站上。在这些网站中，我返回了一个带有规范标签的原始博客文章的链接。但是我的博客页面在搜索引擎中不可见（其他网站确实显示了我的文章）。在我粘贴到其他网站之前，我的文章已被 google 收录，并且可以在第一页看到。所以我想，我的 SEO 部分没有问题。

有人可以建议一种方法，让我的原始博客对内容有更高的偏好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:00:40.610

您可以使用跨域规范标签。

因此，如果您在其他域上有重复的内容，您可以在这些页面上使用规范标签，指向您网站上的原始页面。

这是处理联合内容的好方法；当然，您需要在这些其他网站上进行代码级访问，以便您可以实施规范标签。

更多信息如下

```
http://googlewebmastercentral.blogspot.com/2009/12/handling-legitimate-cross-domain.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T03:30:03.470

不要只是在互联网上的每个地方复制粘贴您的文章，这对您没有任何好处。写完一篇好文章后，去其他网站写一些关于你的文章的其他内容，比如你的文章是关于什么的，它对某人有什么帮助等等，这样人们和网站就会来到你的网站阅读你的文章。为此，您不需要“规范”

如果您将粘贴文章复制到其他网站，只会产生重复的内容问题，只会损害您的 SEO 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T08:07:45.227

不，您的博客部分不需要执行规范问题。规范意味着 Google 显示具有不同 URL 的相同页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-08T06:56:23.473

正如@moobot 所说，您确实可以使用跨域规范标签让谷歌知道内容的原始来源。您究竟是如何在其他域上添加规范的？

规范链接应位于 html 代码的头部。如果您自己将其添加到正文标签中的某个位置，那对您没有任何好处。

查看这篇文章，了解有关规范标签 [http://googlewebmastercentral.blogspot.nl/2013/04/5-common-mistakes-with-relcanonical.html的其他一些常见错误](http://googlewebmastercentral.blogspot.nl/2013/04/5-common-mistakes-with-relcanonical.html)

@metadice 提到在整个网络上复制您的内容对您的 SEO 不利，我完全同意。如果您这样做是为了获得一些额外的反向链接或其他东西，我建议您停止这样做。

希望我的回答能帮助有同样问题的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-02T12:48:18.717

第一件事是不要在不同的网站上提交您的文章，我不会在您的排名中给您任何好处。如果您撰写了优质的内容，您应该只在一个网站上发布，如果您在不同站点上发布，谷歌将被视为重复内容。因此，您最好可以在社交媒体网站上分享您批准的博客链接，还可以做社交书签、微博。在你不需要规范标签之后。

# ios - 用于关闭正在播放的视频的自动化脚本

> ID：12714442
> 
> 赞同：0
> 
> 时间：2012-10-03T18:17:33.907
> 
> 标签：ios, ios-ui-automation

我正在编写一个 UI 自动化脚本，它需要关闭*MPMoviePlayerViewController*视图。我尝试使用 logElementTree() 记录它，但只有导航栏、工具栏、按钮被记录。任何指针？？？

-曼

# sql - SQL Server 2012 SSAS 特权

> ID：12714451
> 
> 赞同：0
> 
> 时间：2012-10-03T18:18:18.247
> 
> 标签：sql, ssas

如果我仅使用 SSAS 安装实例，如何维护安全性（登录）？我用引擎和 SSAS（维度）创建了一个实例，然后用 SSAS（表格）创建了另一个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:58:21.167

安全性有两个主要级别。

服务器/实例级别安全性，这是针对服务器/实例级别管理员的。这些用户将有权访问服务器/实例级别的配置选项以及所有多维数据集/表格模型。要访问它，只需右键单击 SSAS 实例并选择属性。[链接的](http://technet.microsoft.com/en-us/library/cc304417.aspx)

多维数据集/模型级别安全性这是针对多维数据集/模型用户（将使用信息的人员/应用程序），通常在设计时通过“角色”实现。它也可以在多维数据集/模型部署到服务器/实例后添加/更新。[链接的](http://technet.microsoft.com/en-us/library/ms174840.aspx)

# ruby-on-rails-3 - 我认为简单的“范围”问题：在 rails rspec 测试中，如何在“it ...”块之外的 DRY 方法中访问我的自定义记录器？

> ID：12714456
> 
> 赞同：0
> 
> 时间：2012-10-03T18:18:42.067
> 
> 标签：ruby-on-rails-3, scope

我在我的一个 rspec 集成测试中有一个自定义记录器，当我从and块`speclog = Logger.new('log/rspec.log')`内部调用它时它工作正常。`before(:each) ... end``it ... end`

但是，当我通过将常见的“显示所有内容”例程移动到它自己的方法来干燥一些测试时，在该方法中调用 speclog 会引发错误`undefined local variable or method 'speclog'`

```
#testit_spec.rb
require 'integration_spec_helper' 
speclog = Logger.new('log/rspec.log')

describe FooController do
  before(:each) do ... end 
  it "test1" do ... end # speclog directly inside here works fine
  it "test2" do ... end # but calling log_it_all throws error
  def log_it_all
    speclog.debug "common messages" #  SPECLOG is 'undefined' HERE?
  end
end 
```

当我以上述常用方法访问 speclog 时，是否需要在其前面加上我不知道的 Rspec::Something ？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:34:38.617

解决方案是（a）在描述块内声明speclog变量，（b）将其作为实例变量，例如@speclog

```
#testit_spec.rb
require 'integration_spec_helper' 

describe FooController do
  @speclog = Logger.new('log/rspec.log')
  before(:each) do ... end 
  it "test1" do ... end # @speclog directly is ok
  it "test2" do ... end # and, calling log_it_all is ok
  def log_it_all
    @speclog.debug "common messages" #  SPECLOG is 'undefined' HERE?
  end
end 
```

# jquery - 使用 JQuery onclick 调用防止 Ajax TabPanel 的默认行为？

> ID：12714457
> 
> 赞同：0
> 
> 时间：2012-10-03T18:18:46.603
> 
> 标签：jquery, asp.net, ajax, default, tabpanel

我有代码：

```
 $("[id$='tab_TabContainer1_TabPanel1']").click(function (event) {
        event.preventDefault(); //doesn't work apparently but doesn't error anywhere.
        var container = $find('TabContainer1'); //select the container holding the tabs to set the active tab
        if (Page_IsValid) {
            container.set_activeTabIndex(1); //go ahead to next tab
        }
        else {
            container.set_activeTabIndex(0); //Remain on this tab
        }
    }); 
```

我可以让相同的代码发出警报，但我只是不想能够前进到下一个选项卡，除非页面已经过验证。那有意义吗？

容器和选项卡在 asp.net 中定义为：

```
<ajaxToolkit:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="2"  EnableViewState="False">
 <ajaxToolkit:TabPanel ID="TabPanel1"  runat="server" HeaderText="TabPanel1" > 
```

# python - 从命令行获取字符串参数？

> ID：12714461
> 
> 赞同：6
> 
> 时间：2012-10-03T18:18:53.203
> 
> 标签：python, arguments

运行 Python 脚本时，我需要一个可选参数：

```
python3 myprogram.py afile.json 
```

或者

```
python3 myprogram.py 
```

这是我一直在尝试的：

```
filename = 0
parser = argparse.ArgumentParser(description='Create Configuration')
parser.add_argument('filename', type=str,
                   help='optional filename')

if filename is not 0:
    json_data = open(filename).read()
else:
    json_data = open('defaultFile.json').read() 
```

如果提供了文件名，我希望将文件名存储在名为“文件名”的变量中。显然这是行不通的。有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T18:22:40.690

请仔细阅读教程。[http://docs.python.org/howto/argparse.html](http://docs.python.org/howto/argparse.html)

我相信您需要实际解析参数：

```
parser = argparse.ArgumentParser()
args = parser.parse_args() 
```

然后文件名将可用`args.filename`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-03T18:22:29.440

检查[sys.argv](http://docs.python.org/library/sys.html#sys.argv)。它给出了一个包含脚本名称和任何命令行参数的列表。

示例脚本：

```
import sys
print sys.argv 
```

调用它：

```
> python script.py foobar baz
['script.py', 'foobar', 'baz'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T18:22:34.277

如果您正在寻找第一个参数`sys.argv[1]`就可以了。更多信息[在这里](http://docs.python.org/py3k/library/sys.html?highlight=sys.argv#sys.argv)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T20:31:52.963

试试 argparse 的默认参数，它有据可查。

```
import argparse

parser = argparse.ArgumentParser(description='Create Configuration')
parser.add_argument('--file-name', type=str, help='optional filename', 
       default="defaultFile.json")

args = parser.parse_args()

print(args.file_name) 
```

**输出：**

```
$ python open.py --file-name option1
option1

$ python open.py 
defaultFile.json 
```

**替代库**：

[单击](https://click.palletsprojects.com/en/8.0.x/)库进行 arg 解析。

# c# - 如何通过标记在 ASP.NET WebControl 上设置自定义对象属性

> ID：12714462
> 
> 赞同：0
> 
> 时间：2012-10-03T18:18:53.427
> 
> 标签：c#, asp.net, custom-controls, web-controls

我正在努力如何设置一个自定义属性，该属性应该指向我在 ASP.NET webcontrol 上的自定义类的实例。

示例网页控件：

```
public class CustomControl : System.Web.UI.WebControls.Panel
{
  public IFactory Factory { get; set; }
} 
```

后面的代码：

```
public partial class Main : System.Web.UI.Page
{        
  public IFactory GetFactory { 
    get { return new CustomFactory(); } 
  }
}

public class CustomFactory : IFactory {} 
```

自定义工厂在后面的代码上初始化。在我的标记中（不在代码后面），我需要将 CustomControl 上的 Factory 属性设置为后面代码中的实例。我尝试过的任何内联代码变体都不起作用：

```
<asp:CustomControl ID="MyCustomControl" Factory="<%GetFactory%>" runat="server" />
<asp:CustomControl ID="MyCustomControl" Factory="<%=GetFactory%>" runat="server" /> 
```

谁能帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:32:27.757

您只是不能在控件标记标记上分配它，标记标记呈现为 html 并且没有这样做的逻辑，html 不会解释`GetFactory`. 您可以做的是在您的标记上设置 if，而不是控制标记属性，而是在代码括号内设置，如下所示：

```
<%MyCustomControl.Factory = this.GetFactory;%> 
```

# javascript - 使用变换来正确定位我的形状

> ID：12714470
> 
> 赞同：1
> 
> 时间：2012-10-03T18:19:18.603
> 
> 标签：javascript, d3.js

随机数据

```
var data = [53245];
  var data2 = [28479, 234234];
  var data3 = [19697];
  var data4 = [41123,12313]; 
```

画布的宽度和高度

```
 var w = 960,
      h = 500,
      r = Math.min(w, h) / 2,
      donut = d3.layout.pie().sort(null), 
```

这是我决定我希望弧线有多大的地方

```
arc = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(-2).endAngle(-1.34),
arc2 = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(-1.34).endAngle(-0.68),
arc3 = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(-0.68).endAngle(-0.02),
arc4 = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(-0.02).endAngle(0.64), 
arc5 = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(0.64).endAngle(1.3),
arc6 = d3.svg.arc().innerRadius(r - 100).outerRadius(r - 20).startAngle(1.3).endAngle(1.96), 
```

我尝试过使用变换，但我的形状倒置了。我希望它是弧形而不是 U 形。

```
var svg = d3.select("body").append("svg:svg")
    .append("svg:g")
      .attr("transform", "translate(700,400) scale(1, -1)"); 
```

颜色等的路径

```
 var arcs = svg.selectAll("path")
      .data(donut(data))
         .enter().append("svg:path")
            .attr("fill", function(d, i) { return 'blue'; })
            .attr("d", arc)
      .data(donut(data2))
          .enter().append("svg:path")
              .attr("fill", function(d, i) { return 'green'; })
              .attr("d", arc2)
      .data(donut(data3))
          .enter().append("svg:path")
              .attr("fill", function(d, i) { return 'pink'; })
              .attr("d", arc3)
      .data(donut(data4))
          .enter().append("svg:path")
              .attr("fill", function(d, i) { return 'black'; })
              .attr("d", arc4)

     .data(donut(data4))
          .enter().append("svg:path")
            .attr("fill", function(d,i) {return 'yellow';})
            .attr("d",arc5)

     .data(donut(data4))
          .enter().append("svg:path")
            .attr("fill", function(d,i) {return 'orange';})
            .attr("d",arc6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:05:26.127

我自己解决了：

```
.attr("transform", "translate(700,450) rotate(180) scale(-1, -1)") 
```

只需添加旋转并更改比例:)

# javascript - javascript 中是否不鼓励使用没有“function myFunction() {}”语法的函数声明？

> ID：12714477
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:19:54.480
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

在 Javascript 中声明函数有两种方法：

语法 1：

```
function myFunction() {
    // something awesome
}; 
```

语法 2：

```
var myFunction = function() {
    // somtehing even more awesomer
}; 
```

在我看来，我在遗留代码中遇到的语法 1 比在编写良好的代码中更多（但这纯粹是经验性的）。

**问**：应该prever 一种语法而不是另一种，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:25:21.027

我能想到的唯一区别就在这里：

此代码不运行：http: [//jsfiddle.net/JdCRq/](http://jsfiddle.net/JdCRq/)

```
myFunction();

var myFunction = function() {
    console.log('test');
}; 
```

虽然这段代码确实：http: [//jsfiddle.net/JdCRq/1/](http://jsfiddle.net/JdCRq/1/)

```
myFunction();

function myFunction() {
    console.log('test');
} 
```

`function`在第二个示例的上下文中，块似乎在代码实际运行之前被声明（至少按名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:21:39.363

使用函数声明语句（第一种方式）声明函数将函数名称绑定到函数对象，从而允许调试器在堆栈跟踪中显示名称。`var`在这样的简单情况下，真的没有理由用声明来声明函数。（有时，当然，这是必要的，例如当您使用其他函数创建函数时。）

从语法上讲，函数实例化表达式（第二种方式）*也可以*包含绑定到函数的函数名称。不幸的是，一些 JavaScript 运行时[不能正确处理这种情况](http://kangax.github.com/nfe/)并且表现得有些糟糕，所以这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:33:05.320

第一个示例是声明函数的常规方式。

第二个示例是分配给变量的匿名函数。当您将函数声明为对象的成员或将其分配给类的原型时使用它，并且有时在声明函数的正常方式就足够的情况下分配给常规变量时也会使用它。

示例之间唯一实际的区别是第二种方式是在运行时分配的。如果你重新定义一个函数，那会在解析代码时发生，所以只存在最后一个：

```
console.log(f()); // shows 2

function f() { return 1; }

console.log(f()); // shows 2

function f() { return 2; }

console.log(f()); // shows 2 
```

（尽管您通常不会重新定义这样的函数，因为它使代码难以遵循。）

对于匿名函数，它在分配之前不存在，如果重新分配，它会更改为新函数：

```
condole.log(f); // shows undefined

var f = function(){ return 1 };

console.log(f()); // shows 1

f = function(){ return 2 };

console.log(f)); // shows 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:34:29.890

根据您想要实现的目标，同时使用`var`和可以有一些优势，这里有一些例子；`function`

```
var f1 = function nonUnique () {return true;},
    f2 = function nonUnique () {return false;}; 
```

意思`f1.name === f2.name`但是`f1 !== f2`

* * *

```
function nonUnique () {return true;};
var f1 = nonUnique;
function nonUnique () {return false;}; // this line changes f1 too
var f2 = nonUnique; 
```

表示`f1 === f2`并且`f1`现在将返回`false`。

* * *

```
function nonUnique () {return true;};
var f1 = nonUnique,
    f2 = f1;
f1 = function nonUnique () {return false;}; // this line changes f1 but not f2 
```

手段`f1 !== f2`；`f1`返回`false`但`f2`会返回`true`。`nonUnique()`也会给`true`。

最后一个示例对于重用本机函数名称但保证它们的安全很有用。

* * *

Also note that variables effectively don't exist before the line with `var` whereas function syntax will, and see [**this question**](https://stackoverflow.com/questions/336859/), which your question is a duplicate of.

# wordpress - 在多个 wordpress 站点的同一静态页面中显示最近的 wordpress 帖子

> ID：12714479
> 
> 赞同：0
> 
> 时间：2012-10-03T18:20:22.783
> 
> 标签：wordpress

有没有办法在同一个静态页面中显示最近的 wordpress 帖子，形成多个 wordpress 站点，该站点托管在同一个域下的子目录下。请问有什么办法可以解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:42:37.153

wpmudev.org 有一个“[帖子索引器](http://premium.wpmudev.org/project/post-indexer/)”插件，它可以跨多站点抓取站点范围内的所有帖子。然后，您可以根据需要显示它们。

# mysql - mySQL 在下一次插入中使用新插入行的 id

> ID：12714486
> 
> 赞同：0
> 
> 时间：2012-10-03T18:20:51.083
> 
> 标签：mysql

我正在尝试编写一个查询，将行插入两个表 tableA 和 tableB。tableA 是可以发送给用户的电子邮件列表，而 tableB 包含我们支持的各种语言的所述电子邮件的实际文本。tableA 中的自动增量 ID 存储在 tableB 中，以将电子邮件名称与文本连接起来。

从插入到 tableA 的新行中获取 id 然后在插入到 tableB 的查询中使用的最佳方法是什么？我试过了，但 mySQL 不喜欢它（错误 1064）：

```
INSERT INTO tableA (eID, name, otherStuff) VALUES (NULL, 'emailName', 'otherValues');
INSERT INTO tableB (id, emailId, body, name, langId) VALUES (NULL, select max(tableA.eID) from tableA, 'email text', 'Default', '1');
INSERT INTO tableB (id, emailId, body, name, langId) VALUES (NULL, select max(tableA.eID) from tableA, 'other language text', 'Default', '2'); 
```

关于如何使这项工作的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:23:28.603

使用`LAST_INSERT_ID()`. 它返回`ID`给新行的最后一个（在当前连接处）。

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:22:24.640

mysql 函数 LAST_INSERT_ID() 将返回最后插入行的 id。

所以你可以试试

```
INSERT INTO tableA (eID, name, otherStuff) VALUES (NULL, 'emailName', 'otherValues');
SET @tableA_id = LAST_INSERT_ID();
INSERT INTO tableB (id, emailId, body, name, langId) VALUES (NULL, @tableA_id, 'email text', 'Default', '1');
INSERT INTO tableB (id, emailId, body, name, langId) VALUES (NULL, @tableA_id, 'other language text', 'Default', '2'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:24:22.440

也许[LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)会起作用？

尝试以下形式：

```
insert INTO tableB(...)
  SELECT LAST_INSERT_ID(), 'literals' from TableA 
```

# c# - 属性是只读的，但成员是可访问的

> ID：12714496
> 
> 赞同：3
> 
> 时间：2012-10-03T18:21:43.910
> 
> 标签：c#, .net

为什么我可以像这样实现只读属性...

```
public IList<object> SelectedItems { get; } 
```

...并且当我使用该属性时仍然可以使用它的成员，如添加、删除等？

readonly 不应该是 readonly “一直向下”吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T18:24:34.557

> readonly 不应该是 readonly “一直向下”吗？

1.  这不是“只读”类型。这是一个属性，您可以在其中检索值（`IList<object>`），但不能将值设置为*不同的实例*，`IList<object>`因为没有属性设置器。

2.  不，它不是只读的“一直向下”——属性只有一个 getter 的事实意味着你可以获得价值，但你可以用它做任何你想做的事情。

请注意，我会小心使用“只读”一词。C# 有一个不同的、不同的含义和专用的[`readonly`](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)关键字，它仅适用于*fields*。这不是 C# 含义中的“只读”，而是仅提供 get 操作的属性。

如果您想要一个“只读”列表，一个不错的选择是返回一个[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474%28v=vs.100%29.aspx). 例如，如果您的内部类是 a `List<T>`，您可以使用：

```
public IList<object> SelectedItems { get { return this.selected.AsReadOnly(); } } 
```

如果您要这样做，最好也实际返回`ReadOnlyCollection<T>`：

```
public ReadOnlyCollection<object> SelectedItems { get { return this.selected.AsReadOnly(); } } 
```

这样，用户就不会*期望*调用`.Add()`结果列表是安全的。

# android - Android 库项目可以拥有自己的 SQLite 数据库吗？

> ID：12714501
> 
> 赞同：10
> 
> 时间：2012-10-03T18:21:57.030
> 
> 标签：android, sqlite

我正在开发一个可以跨多个应用程序使用的库。它在每个中都提供完全相同的功能，并且该库的目标之一是尽可能简单易用。这样，我希望使用 SQLite 数据库来存储一些与库相关的重要信息，而不是与主机应用程序相关的信息。我四处搜寻，找不到任何证实或否认图书馆拥有自己的数据库的能力。有谁知道这是否可能？

非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T18:35:57.610

好吧，这取决于您所说的“图书馆拥有自己的数据库的能力”是什么意思。

没有什么可以阻止 Android 库项目——甚至是普通的 Android 编译的 JAR——使用`SQLiteDatabase`、`SQLiteOpenHelper`和 kin。因此，从*代码*的角度来看，库可以拥有自己的数据库。不过，您将需要`Context`来自主机应用程序的对象，至少与 一起使用`SQLiteOpenHelper`。

这是因为，从*文件*的角度来看，该库不存在于其托管应用程序之外。因此，默认情况下，数据库*文件*将存储在应用程序的内部存储部分中。您将需要采取一些措施来尽量减少数据库文件名冲突的可能性（例如，将库的包名更改为文件名），因此主机应用程序不会尝试意外使用您的库数据。主要`Context`是提供给`SQLiteOpenHelper`它，以便它可以调用诸如`getDatabasePath()`找出将数据库文件放在哪里的方法。

此外，请记住主机应用程序可以访问您的数据库，就像它可以访问自己的一样。请确保您记录有关此数据库的规则（例如，不要直接使用它，而是使用库的 API）。

# c# - 在不同的 Windows Phone 应用程序之间共享文件数据库

> ID：12714503
> 
> 赞同：0
> 
> 时间：2012-10-03T18:22:07.947
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

> **可能重复：**
> [Windows Phone7 在应用程序之间共享数据](https://stackoverflow.com/questions/10335632/windows-phone7-share-data-among-applications)

我有一个应用程序，它有两个不同的版本，可以同时安装在 Windows Phone 设备上。为此，我想为两个应用程序共享同一个数据库。那可能吗？我在互联网上搜索了很多，但除了隔离存储文件和本地数据库之外我找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:40:14.880

即使在数据库中，数据也无法在应用程序之间共享。您将需要有一个与数据库一起运行的 Web 服务器/Azure 服务。

服务器上的数据库应该能够测试两个不同版本的应用程序之间的差异，并为每个版本返回适当的数据。

如果您是小型企业用户，您可以申请 BizSpark 计划并获得一些免费的 Azure 托管。

# java - 通过 OS X App Bundle 执行 Oracle JDK 7u10 -- 日志在哪里？

> ID：12714509
> 
> 赞同：0
> 
> 时间：2012-10-03T18:22:26.940
> 
> 标签：java, macos

我正在运行 Oracle JDK 7u10（最新的开发人员预览版）。[我使用Simplericity Java Packaging plugin](http://simplericity.com/2007/09/19/1190234671861.html)将 Java 应用程序打包为 .app 包。当我执行我的应用程序时，我会弹出一个异常：“Main 方法中未捕获的异常：'java.lang.exceptionInInitializerError”，但没有堆栈跟踪。我想查看完整的堆栈跟踪以了解发生了什么。以这种方式启动的应用程序的日志最终会在哪里？我试图将 System.err 重定向到一个文件，但我相信异常是从 Simplericity 代码中抛出的，因此它永远不会到达我的应用程序的 main 方法并重定向输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:07:51.840

an 生成的标准输出被`.app`操作系统捕获。`Console.app`使用或`syslog -C`在终端中运行应该可以看到它。

# java - 错误#1045 使用 Xampp 在 PhpMyAdmin 中拒绝访问

> ID：12714518
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:22:53.117
> 
> 标签：java, mysql, phpmyadmin, xampp

我试图让 phpmyadmin 启动，当我尝试将它与 xampp 一起使用时，访问被拒绝。给出以下错误代码：

```
#1045 - Access denied for user 'root'@'localhost' (using password: NO) 
```

phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

我已阅读相关答案并尝试更改线路

`$cfg['Servers'][$i]['auth_type'] = 'config' to $cfg['Servers'][$i]['auth_type'] = 'cookie'`，但这并没有提供解决方案。有什么想法吗？我正在使用 Windows 7。

这是当前文件：

```
* Authentication type and info */
$cfg['Servers'][$i]['auth_type'] = 'HTTP';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'password';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;
$cfg['Lang'] = '';

/* Bind to the localhost ipv4 address and tcp */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';

/* User for advanced features */
$cfg['Servers'][$i]['controluser'] = 'pma';
$cfg['Servers'][$i]['controlpass'] = '';

/* Advanced phpMyAdmin features */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs'; 
```

/* * 服务器配置结束 */

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:30:27.923

检查此[链接](http://wiki.phpmyadmin.net/pma/Config/Servers)它可能会帮助您解决问题。

```
1\. Open config.inc.php file in the phpmyadmin directory

2\. Find line 21: $cfg['Servers'][$i]['password'] = ''

3\. Change it to: $cfg['Servers'][$i]['password'] = 'your_password';

4\. Restart XAMPP 

The setting you are looking for is "$cfg['Servers'][$i]['auth_type']" - set this to 'HTTP', and you will be able to input a username and password. 
```

# jsp - 编辑jsp并构建显示错误

> ID：12714520
> 
> 赞同：0
> 
> 时间：2012-10-03T18:22:58.907
> 
> 标签：jsp, tomcat

我在 Eclipse 中使用 Java、Struts 2、Spring 和 Hibernate 项目。该项目部署在 Tomcat 上。它工作正常，直到我在 Eclipse 中更改一些 JSP 并使用 Ant 构建进行构建。当我重新启动 Tomcat 时，它显示错误。

```
org.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to compile class for JSP

org.apache.jasper.JasperException: Unable to compile class for JSP

java.io.FileNotFoundException: C:\Program Files\Apache Software Foundation\Tomcat 6.0\work\Catalina\localhost\test\org\apache\jsp\login_jsp.java (Access is denied)
    java.io.FileOutputStream.open(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:08:42.997

尝试项目菜单的构建选项，它会抛出错误，因为它没有找到jsp的类文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T18:37:59.893

确保用于运行 Tomcat 的用户对错误消息中提到的目录具有读写权限。

# asp.net - 类导入生成无限循环？

> ID：12714525
> 
> 赞同：1
> 
> 时间：2012-10-03T18:23:17.103
> 
> 标签：asp.net, vb.net

我最近遇到了一个可能导致整个 Web 服务器瘫痪的错误。我对网络编程比较陌生（2 年经验......有点）。但我想我可能已经缩小了可能发生的事情的范围，并想问这是否可能。我认为是这样。

我在`App_Code`目录中保留了 2 个类。一个处理**日志记录**。另一个处理**电子邮件**。

如果生成了错误日志，我已经设置了日志记录类以发送电子邮件警报。然后我设置电子邮件系统以在发送电子邮件时生成日志。两者都引用另一个类来执行此操作。

这可能是一个“无限循环”的场景吗？

我这样做可能引发了一场“广播风暴”，关闭了整个服务器……这是一组虚拟服务器。所以，这个问题有点重要:)

我确实做了一些环顾四周，搜索“无限循环类参考”，但除了超级技术写作之外什么也没找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:27:01.217

这是绝对的可能。将电子邮件类设置为在发送日志电子邮件时不记录消息，或者将日志类设置为不通过电子邮件发送有关发送电子邮件的日志条目（或两者兼而有之）。

# java - SSRS Web 服务代理不显示渲染类的参数

> ID：12714530
> 
> 赞同：1
> 
> 时间：2012-10-03T18:23:35.200
> 
> 标签：java, wsdl, ssrs-2008

我正在尝试使用 Web 服务从 SAP Portal 环境连接到 SSRS。我从 ReportService2005.asmx 创建了代理类，可以看到列表中有一个 Render 类。问题是它没有我见过的其他示例中描述的任何参数。它看起来像这样：

渲染（渲染 arg0）

我错过了什么？我能够使用 ReportingService2005.asmx 中的 getReportParameters 很好地检索报告参数，因为它具有正确的参数。

代码：

```
 InitialContext itc = new InitialContext();
      Render r = new Render(); // just to fill in the 

      ReportExecutionService exec = (ReportExecutionService)itc.lookup("java:comp/env/SSRS_WS_Proxy_ReportExecution2005");

      ReportExecutionServiceSoap exec_port = (ReportExecutionServiceSoap)exec.getLogicalPort("ReportExecutionServiceSoap", ReportExecutionService.class);

      exec_port.render(r); //obviously not going to work without the correct parameters 
                           // and r is just to show the type of parameter it takes 
```

# windows-8 - TileWidePeekImageCollection - 哪个图像与文本一起显示

> ID：12714534
> 
> 赞同：0
> 
> 时间：2012-10-03T18:24:07.500
> 
> 标签：windows-8, microsoft-metro, windows-runtime, live-tile

在我的 Metro 应用程序中，我有一些构建 TileWidePeekImageCollection06 的代码（我假设这个问题也适用于 TileWidePeekImageCollection05），如下[所示](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx#wide_peek_templates)。

如果我提供 6 张图片，那么第六张图片会与文本一起显示在“peek”中，如果我提供 5 张，那么看起来第五张图片会与文本一起显示。但是，如果我提供的图像少于 5 张，我似乎无法确定显示的是哪张。

这有什么规则？我需要知道，因为“窥视”中显示的带有单个图像的文本需要专门与该图像相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:49:33.013

文档不是很明确，但是您可以通过实验很容易地找到这一点。[或者，您可以使用在 MSDN 上的磁贴示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)中的 NotificationsExtensions 帮助器库中提供友好名称的对象模型（或直接查看将友好名称映射到帮助器库源中的标识符的源：[TileContent.cs](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148/sourcecode?fileId=51004&pathId=150815824)）。

对于您提到的特定模板，下面提供了示例 XML，其中包含有关 alt 标记中提供的每个图像的详细信息。

```
<tile>
  <visual>
    <binding template="TileWidePeekImageCollection06">
      <image id="1" src="image1.png" alt="Main image on top"/>
      <image id="2" src="image2.png" alt="Small image - row 1, column 1"/>
      <image id="3" src="image3.png" alt="Small image - row 1, column 2"/>
      <image id="4" src="image4.png" alt="Small image - row 2, column 1"/>
      <image id="5" src="image5.png" alt="Small image - row 2, column 2"/>
      <image id="6" src="image6.png" alt="Image with text"/>
      <text id="1">Text Header Field 1</text>
    </binding>  
  </visual>
</tile> 
```

# javascript - ContentFlow 插件：更改非活动元素的大小

> ID：12714535
> 
> 赞同：0
> 
> 时间：2012-10-03T18:24:08.073
> 
> 标签：javascript, plugins

对于使用 javascript 插件“ContentFlow”(http://www.jacksasylum.eu/ContentFlow/) 的任何人，您知道如何更改 NON-ACTIVE 元素的大小吗？似乎它们总是中心图像高度的一半，但我想让它接近高度的 75%。

我一直在挖掘 JS 源代码，但我似乎无法确定我调整大小的位置。每次我调整一个值时，它都会调整所有元素的大小，包括活动的中心图像。

请注意，我的“visibleItems”属性设置为 1，因为我只需要在中心图像的任一侧显示一个图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:13:52.803

尝试使用图库插件。插件 JS 中有一个 calcSize 函数可以帮助你计算你想要的大小。

# arrays - Codeigniter - 如何使用多个表列出数据

> ID：12714546
> 
> 赞同：0
> 
> 时间：2012-10-03T18:25:07.043
> 
> 标签：arrays, codeigniter

我有两个数据库表第一个表是： Products *id *brand *model

第二张表是：销售 *id *pid *date

我想创建从两个表中获取数据的列表。

***这是我的模型：***

```
class Sales_model extends CI_Model {
    function getAll() {

        $q = $this->db->get('sales');
        foreach ($q->result() as $row) {    
            $data[] = $row;

            $q2 = $this->db->get_where('products', array('id' => $row->pid));

            foreach ($q2->result() as $row2) {
                $data[] = $row2;
            }

        }
        return $data;
} 
```

--------这是控制器代码------------

```
class Sales extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $this->load->model('sales_model');

        $data['q'] = $this->sales_model->getAll();

        $this->load->view('sales', $data);
    }
} 
```

-------------------- 这是我的查看代码----------------

```
<?php foreach($q as $row) : ?>
    <tr>
        <td><?php echo $row->id; ?></td>
        <td><?php $date = new DateTime("@$row->date"); echo $date->format('D M d, Y'); ?></td>
        <td><?php echo $row->brand; ?></td>
        <td><?php echo $row->model; ?></td>
    </tr>
<?php endforeach; ?> 
```

* * *

任何人都可以帮助我，我想从销售表中获取日期和添加到销售表中的产品详细信息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:10:35.703

我不太确定您需要什么数据，但这可能会有所帮助。

```
$sql = "SELECT products.id, products.brand, products.model, sales.id, sales.date FROM products INNER JOIN sales ON (products.id = sales.pid)";
$query = $this->db->query($sql); 

if($query->num_rows() > 0){
return $query->result_array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:07:05.817

模型 ：

```
$this->db->select('p.*,s.date');
$this->db->from('product p');
$this->db->join('sales s','p.pid = s.pid');
$result = $this->db->get();

if($result->num_rows)
{
return $result->result();
}
return false; 
```

# css - 向 date_select 添加 CSS 类

> ID：12714548
> 
> 赞同：12
> 
> 时间：2012-10-03T18:25:17.043
> 
> 标签：css, ruby-on-rails

我有以下 date_select 助手。我想添加一个类，但它不生成 HTML。

```
<%= date_select :recipient, :birthday, :order => [:day, :month, :year], :start_year => 1920, :end_year => 2013, :class => "input-mini" %> 
```

正如一些解决方案所建议的那样，我也尝试过使用哈希，但出现语法错误：

```
<%= date_select :recipient, :birthday, :order => [:day, :month, :year], :start_year => 1920, :end_year => 2013, {:class => "input-mini"} %> 
```

不确定我是否真的了解何时以及如何使用哈希对其进行格式化。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-31T16:08:22.720

经过验证的答案对我不起作用，起作用的是：

```
<%= date_select
    :recipient,
    :birthday,
    {:order => [:day, :month, :year], :start_year => 1920, :end_year => 2013},
    {:class => "input-mini"}
%> 
```

根据[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)，这更有意义：

```
date_select(object_name, method, options = {}, html_options = {}) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T18:46:41.727

这应该有效：

```
<%= date_select :recipient, :birthday, 
:order => [:day, :month, :year], 
:start_year => 1920, 
:end_year => 2013, 
:html=>{:class => "input-mini"} 
%> 
```

**更新：对于 Rails 5**

```
<%= date_select :recipient, :birthday, 
               {
                :order => [:day, :month, :year], 
                :start_year => 1920, 
                :end_year => 2013
               }, 
               {:class => "input-mini"}  %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T00:17:23.250

正如我们在[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)中看到的，`date_select`助手需要特定的参数：

```
date_select(object_name, method, options = {}, html_options = {}) 
```

对我来说，只是不要添加**方法**选项并将选项散列`{}`留空，效果很好：

```
datetime_select(:recipient, {}, {:class => 'custom-select'}) 
```

或者，如果您想与`:birthday`param 一起使用，您可以简单地使用：

```
datetime_select(:recipient, :birthday, {}, {:class => 'custom-select'}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:29:01.487

尝试

html哈希中的类 `:html=>{:class=>'input-mini'}`

```
<%= date_select :recipient, :birthday, :order => [:day, :month, :year], :start_year => 1920, :end_year => 2013, :html=>{:class => "input-mini"} %> 
```

# c - 在不连接设备的情况下安装 Linux PCI 驱动程序

> ID：12714555
> 
> 赞同：0
> 
> 时间：2012-10-03T18:25:41.597
> 
> 标签：c, linux-device-driver, pci

有什么方法可以在不连接设备的情况下安装 Linux 设备驱动程序？

我可以完全访问驱动程序代码。我正在使用 Linux 内核 2.6.35。

我尝试过 insmod 和 modprobe 无济于事。我正在开发一个自定义驱动程序（我没有编写它），但没有任何文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:28:45.353

Linux 中的设备驱动程序（大部分）是内核模块。所以是的！您需要做的就是加载内核模块。

将代码编译为内核模块，`make install`然后`modprobe <modulename>`.

您的驱动程序的文档应该已经告诉您了。;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:12:15.897

当系统中不存在设备实例时，不应安装正确编写的设备驱动程序（热插拔设备可能是一个例外）。在某些版本的 Unix 中，驱动程序的*probe()*函数会检查设备是否存在。在 Linux 中，探测功能通常包含在 _init() 例程中。当没有检测到硬件时，驱动程序不应该注册自己，如果它是一个模块，则返回将导致它被卸载的状态。

如果您坚持将驱动程序代码放在内存中，则不要将其构建为可加载模块，而是选择 Linux 驱动程序作为内存驻留内核的一部分。通过在程序中键入“M”来选择将驱动程序构建为可加载模块`menuconfig`。要将驱动程序内置到内核中，请使用空格键选择驱动程序。选择将标有星号`*`而不是`M`以指示此差异。

（此`menuconfig`对话框的文本来自`Kconfig`文件。此配置对话框的产物是`.config`文件，其中有配置符号，在`Makefile`s 中用于控制目标文件的编译。前面假设此驱动程序已合并到 Linux 内核中源代码树。如果您只有源代码文件，那么您必须决定该驱动程序在源代码树中的位置。然后您可以手动编辑 a`Makefile`以在相应的子目录中无条件地编译驱动程序. 或者使用此驱动程序的配置变量自定义`Kconfig`和文件。）`Makefile`

要保留所有驱动程序的代码，您必须进行一些小的代码更改。通常初始化代码和数据被放置在与“普通”文本和数据分开的文本和数据部分中，一旦内核完成引导，这个内存部分就会被释放。要防止释放任何驱动程序代码和数据，请删除声明中的`__init`and`__exit`节说明符。

当然，您必须构建一个新的内核二进制文件才能合并此设备驱动程序。`.config`在添加驱动程序之前，您应该尝试使用以前的构建文件。

# mysql - MySQL 内部连接 group_concat

> ID：12714560
> 
> 赞同：1
> 
> 时间：2012-10-03T18:26:29.407
> 
> 标签：mysql, sql, group-concat

我在这里显示了 4 个 MySQL 表：**[SQL Fiddle](http://sqlfiddle.com/#!2/a6efe/2/0)**

我需要为给定集合中的每个站点和给定集合中的燃料类型选择站点名称、品牌、fuel_type 和 fual_price，例如所有使用柴油和天然燃料的壳牌站点。

我想在一行中获得与一个站点相关的所有数据，这意味着我有 1 个站点的例如 5 种燃料类型/价格。

示例输出 -

```
id | name     | brand | fuel-data
---------------------------------------------------------
1  | Brzotice | Shell | Natural95-37.9, Diesel Power-45.8 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:38:21.570

我认为这会给你想要的：

```
select s.id, 
  s.name,
  b.brand,
  group_concat(concat(f.type, '-', fs.price)) Fuel_Data
from sam_fuel f
left join sam_station_fuel fs
  on f.id = fs.id_fuel
left join sam_station s
  on fs.id_station = s.id
left join sam_station_brand b
  on s.brand = b.id
group by s.id, s.name, b.brand 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a6efe/18)

基本上这个查询会[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)你所有的表。然后为了获得`fuel_data`它同时应用 the[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)和[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数的字段

# javascript - Visio 网页

> ID：12714561
> 
> 赞同：1
> 
> 时间：2012-10-03T18:26:35.023
> 
> 标签：javascript, visio

Visio 允许您将 .vsd 保存为 .htm 文件。

我有一个包含 URL 链接的图表元素的 Visio 网页图表。我希望这些链接包含与包含它们的网页相同的 URL 参数。

如果我错了，请纠正我，但 Microsoft Visio 似乎没有任何内置支持，例如读取 URL 参数、添加您自己的客户端 Javascript 交互或 PHP 服务器端脚本。

现在在我看来最好的办法是手动编辑 HTML 版本，添加我自己的 Javascript，并保存文件的备份。这是因为当 Visio 保存为网页时，它会覆盖我的增强。

有没有更好的办法？谢谢

# php - 用数组值替换字符串中的字符

> ID：12714564
> 
> 赞同：2
> 
> 时间：2012-10-03T18:26:44.860
> 
> 标签：php

我有以下数组

```
static public $tabla = array(
            'A'=>2, 'B'=>2, 'C'=>2,
            'D'=>3, 'E'=>3, 'F'=>3,
            'G'=>4, 'H'=>4, 'I'=>4,
            'J'=>5, 'K'=>5, 'L'=>5,
            'M'=>6, 'N'=>6, 'O'=>6,
            'P'=>7, 'Q'=>7, 'R'=>7,
            'S'=>8, 'T'=>8, 'U'=>8,
            'V'=>9, 'W'=>9, 'X'=>9,
            'Y'=>0, 'Z'=>0
            ); 
```

以及几个由字母数字字符组成的字符串，例如：“ **G20513F4561B** ”。根据给定数组，用等价替换字符串中的非数字字符的最有效方法是什么？

我知道这可以使用循环轻松实现，但也许有某种正则表达式可以解决问题。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:29:27.157

你可以很容易地做到这一点[`str_replace`](http://php.net/manual/en/function.str-replace.php)，它接受数组作为它的第一个和第二个参数：

```
echo str_replace(array_keys($tabla), array_values($tabla), $str); 
```

这将创建一个包含原始数组中所有键的数组和另一个包含所有值的数组。元素按照原数组的顺序在对应的位置。当`str_replace`使用数组参数调用时，第一个数组的第一个元素中的字符串被第二个数组的第一个元素替换，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:34:09.003

尝试`strtr()`：

```
echo strtr($str, self::$tabla); 
```

键将替换为其对应的值。

# javascript - 将鼠标悬停在选择器上时Jquery禁用双击

> ID：12714571
> 
> 赞同：1
> 
> 时间：2012-10-03T18:27:13.467
> 
> 标签：javascript, jquery, coffeescript, mouseevent, double-click

当用户双击水平列表时，我有一个功能，该元素被移动到另一个 div。此无序列表中的 li 标签之一是文本输入字段。我只想禁用该特定字段的双击行为。由于输入字段是 ul 元素的一部分，我似乎无法找到一种方法来防止双击该文本框时触发双击事件。这就是我所拥有的。感谢 js2coffee.org，我接受了 coffeescript 或常规 javascript 的答案 :)

如果双击两次，以下代码将水平 ul 元素移动到另一个 div 并返回到原始元素。效果很好。将鼠标悬停在输入字段上时如何暂时禁用它。

```
$(".available_product_shipments").on "dblclick", ".product", ->
  $(this).appendTo ".product_shipments"
$(".product_shipments").on "dblclick", ".product", ->
  $(this).appendTo ".available_product_shipments" 
```

和 JS 等价物：

```
$(".available_product_shipments").on("dblclick", ".product", function() {
  $(this).appendTo(".product_shipments");
});

$(".product_shipments").on("dblclick", ".product", function() {
  $(this).appendTo(".available_product_shipments");
}); 
```

html的结构是这样的

```
<ul>
  <li class="product">
    <ul>
      <li class="avail_qty_field"><input type="text /></li> #Prevent dblclick here
      <li>...</li>
      <li>...</li>
    </ul>
  </li>
  <li class="product">
    <ul>
      <li class="avail_qty_field"><input type="text /></li> #Prevent dblclick here
      <li>...</li>
      <li>...</li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:32:58.670

我不知道如何在咖啡脚本中做到这一点，但你只需要这样做

```
if ($(event.target).is("input")) return; 
```

或类似的东西。

这是非咖啡版：

```
$(".available_product_shipments").on("dblclick", ".product", function(e) {
  if ($(e.target).is("input")) return;
  $(this).appendTo(".product_shipments");
});

$(".product_shipments").on("dblclick", ".product", function(e) {
  if ($(e.target).is("input")) return;
  $(this).appendTo(".available_product_shipments");
}); 
```

这就是咖啡脚本中的样子

```
$(".available_product_shipments").on "dblclick", ".product", (e) ->
  return  if $(e.target).is("input")
  $(this).appendTo ".product_shipments"

$(".product_shipments").on "dblclick", ".product", (e) ->
  return  if $(e.target).is("input")
  $(this).appendTo ".available_product_shipments" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:35:51.543

试试这个

```
$(".available_product_shipments").on("dblclick", ".product", function(e) {
  if( $(e.target.localName === 'input')) return;
  $(this).appendTo(".product_shipments");
});

$(".product_shipments").on("dblclick", ".product", function(e) {
  if( $(e.target.localName === 'input')) return;
  $(this).appendTo(".available_product_shipments");
}); 
```

编辑：更正语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:42:36.327

我不会在事件发生后过滤事件，而是使用“[非选择器](http://api.jquery.com/not-selector/)”过滤器将其过滤掉。从下面的示例中，我没有在“文本”的输入类型上挂钩事件，而是在“密码”的类型上挂钩。

**HTML**

```
<div class="collection">
    <input class="product" type="text" />
    <input class="product" type="password" />
</div> 
```

**咖啡**

```
$(".collection").on "dblclick", ".product:not('input[type=text]')", ->
  alert "double clicked" 
```

**JsFiddle** 在此处查看实际操作：http: [//jsfiddle.net/anAgent/wQsss/](http://jsfiddle.net/anAgent/wQsss/)

# .net - ClickOnce 引导程序不应该包含在 Windows SDK 中吗？

> ID：12714574
> 
> 赞同：0
> 
> 时间：2012-10-03T18:27:40.503
> 
> 标签：.net, sdk, msbuild, clickonce, visual-studio-2012

我已经为 Windows 8 安装了 Windows SDK，其中包含 Microsoft .NET Framework 4.5 SDK。

我希望在服务器上使用 MSBuild 工具构建我的 VS2012 项目。

但是，ClickOnce 应用程序仍然无法编译，我也找不到任何 setup.bin 依赖项来构建 ClickOnce 设置文件。

我应该在构建服务器上安装什么以使其编译 .NET 4.5 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:02:35.350

我不具体了解 2012 年和 SDK 的问题，但您可以通过编辑注册表手动控制引导程序构建过程的源文件，从而绕过 SDK。

```
HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\GenericBootstrapper\{Version} 
```

应包含 PATH 设置。通过更改此设置，您可以重定向 MSBuild 拾取包以用于 Bootstrapper 构建过程的位置。

您应该可以在某处设置此设置，然后从开发机器中复制您的包。MSBuild 应该是框架的一部分，所以如果您实际上没有构建任何东西，那么您需要查看它。

如果您不确定，最好的建议是去看看带有 VS 的开发机器是如何工作的，然后将其复制到服务器上。

# mysql - 显然，我的 MySQL 表已损坏

> ID：12714581
> 
> 赞同：3
> 
> 时间：2012-10-03T18:28:08.493
> 
> 标签：mysql, database, corrupt

我使用 000Webhost。

我刚刚在我的 MySQL 数据库中创建了一个表。

我有这个错误：

“mysql.proc 的列数错误。预期为 20，实际为 16。表可能已损坏”。

我的其他表工作正常。

为什么这张桌子不起作用？

康纳

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T18:54:31.890

有时它是由于不同版本的数据库的导入/导出而发生的。我在谷歌上找到了这个，试试这个命令 `mysql_upgrade --force -uroot -p`

资料来源：[http ://www.tillett.info/2012/02/17/mysql-problem-column-count-of-mysql-proc-is-wrong-expected-20-found-16-the-table-is-可能已损坏/](http://www.tillett.info/2012/02/17/mysql-problem-column-count-of-mysql-proc-is-wrong-expected-20-found-16-the-table-is-probably-corrupted/)

如果这不起作用，请尝试使用其他方式进行导入/导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:33:01.203

如果您在 5.1 服务器上加载了旧的 5.1 之前的 MySQL 系统表，则会出现错误消息“mysql.proc 的列数错误”。这是 MySQL 中的配置问题。

您可以通过运行 mysql_upgrade-command 来修复 MySQL 5.1 服务器上的错误。

如果您使用托管服务提供商，我不确定您对 MySQL 数据库拥有哪些权限。

# ubuntu - wget时间测量

> ID：12714584
> 
> 赞同：18
> 
> 时间：2012-10-03T18:28:16.743
> 
> 标签：ubuntu, time, wget

我正在使用 wget 进行 http 流量测量。由于网络速度快，http 数据量小，wget 无法测量下载会话的时间和速率。那么我该如何测量时间呢？也许有人可以帮助提供能够解决此问题的脚本或其他应用程序。

提前致谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-10-01T10:16:48.820

正如[user1718019](https://stackoverflow.com/users/1718019/user1718019)所提到的， curl 可以为您执行此操作：

```
curl -so /dev/null -w '%{time_total}\n' http://www.example.com/ 
```

`stdout`根据手册，这将打印在 上：

> 完整操作持续的总时间（以秒为单位）。时间将以毫秒分辨率显示。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-03T18:29:11.750

尝试类似的东西`time wget http://whatever.com`。

# java - 无法使用java连接到godaddy MySQL

> ID：12714586
> 
> 赞同：1
> 
> 时间：2012-10-03T18:28:26.550
> 
> 标签：java, mysql, sql, sql-server, database

我正在尝试连接到 mysql 数据库，但我不断收到错误消息： **com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure**

我知道网址应该是：“jdbc:mysql://server-url:3306”

这是代码：

```
import java.sql.Connection;
import java.sql.DriverManager;

public class FT_Database_Connection{
private Connection connection;

public FT_Database_Connection(String url, String username, String password){
    try{
        System.out.println("Loading driver...");
        Class.forName("com.mysql.jdbc.Driver");
        System.out.println("Driver loaded!");

        String user = username;
        String db_pw = password;
        System.out.println(url);
        System.out.println(username);
        System.out.println(password);
        Connection test = DriverManager.getConnection(url, user, db_pw);

    }catch(Exception e){
        System.out.println("Couldn't get database connection.");
        e.printStackTrace();
    }
}

public Connection get_connection(){
    return this.connection;
}

} 
```

有任何想法吗？

另外，Godaddy 询问我是否想要**DSN**。那是什么意思？我需要吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:33:28.567

您需要将数据库名称放在 MySQL 端口 (:3306/DB_name) 之后。这是我的一个连接：

```
import java.sql.Connection;
import java.sql.Driver;
import java.sql.DriverManager;
import java.sql.SQLException;

public class MySQL{

    static Connection connect;
    public static void main(String[] args) throws InstantiationException, IllegalAccessException, ClassNotFoundException, SQLException {
    Credentials();

    Class.forName ("com.mysql.jdbc.Driver").newInstance ();

    String url = "jdbc:mysql://" + host + ":3306/" + datab;

    Driver test = DriverManager.getDriver(url);
    // testing to make sure i'm using the correct
    //driver and further testing host
    System.out.println(test);
    connect = DriverManager.getConnection(url, userName, password);

    System.out.println ("Connected to " + host);
    }
} 
```

您需要提供“host”和“datab”字符串值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:31:30.827

如果没有记忆，GoDaddy 有几个不同的 MySQL DB 实现可供您选择。一种允许远程访问，另一种不允许。你确定你选对了？

您是否尝试过首先使用 MySQL Workbench 进行远程连接？甚至远程登录到端口？这将确保您拥有正确的数据库名称和远程连接权限。一旦你可以确认它有效，让代码工作应该会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T14:38:50.113

我讨厌为这么旧的东西添加新帖子，但我遇到了与 GoDaddy 及其 dbname.db.######.hostedresource.com 实现相同的问题。当然，我浏览了一些溢出帖子，并没有看到直接 IP 方法的提及；希望我不会在这里破坏一些 GoDaddy 代码。

任何人，我能够通过我的 Workbench 和通过 JDBC 进行连接的唯一方法是转到 PHP 管理页面并获取数据库的直接 IP - 在我的情况下：

```
private static final String URL = "jdbc:mysql://11.11.111.11:3306/dbname"; 
```

# asp.net - 如何单击确认框上的确定按钮？

> ID：12714588
> 
> 赞同：1
> 
> 时间：2012-10-03T18:28:30.473
> 
> 标签：asp.net, selenium, webforms, webdriver, selenium-webdriver

我正在测试一个 ASP.NET Web 表单应用程序。对于 IE，当我关闭浏览器时，会`Confirm`弹出一个框，我需要单击`OK`带有 Selenium Web Driver 的按钮。

弹出框的 JavaScript 是：

```
<script type="text/javascript"> 
    //<![CDATA[
    function onBeforeUnloadAction() {return 'Are you sure to leave ALNW? All unsaved data will be discarded.';}
    window.onbeforeunload = function () {if ((window.event.clientX < 0) || (window.event.clientY < 0)) {return onBeforeUnloadAction();}}
    //]]>
</script> 
```

处理`Confirm`盒子的代码是：

```
driver.Close();
var alert = driver.SwitchTo().Alert();
alert.Accept(); 
```

问题是`Confirm`盒子就坐在那里，测试失败了。我确实在以下位置收到以下异常`driver.Close()`：

```
Modal dialog present (UnexpectedAlertOpen) 
```

**编辑**

我现在的解决方法是将事件处理程序设置为 null 并假设单击 OK。

```
var js = driver as IJavaScriptExecutor;
js.ExecuteScript("window.onbeforeunload=null;");
driver.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:53:35.763

如果它是通过浏览器窗口而不是通过您的 javascript 代码出现的确认框，那么您将不会将其作为警报处理。为此，您需要通过任何第三方工具，如**autoit**。

在这里，您可以编写一个 4 到 5 行的脚本来处理该确认框并在该确认框出现之前调用该脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:05:14.710

您看到的问题是因为`onBeforeUnload`事件呈现的对话框与 JavaScript`confirm()`对话框不同。不幸的是，在 Windows API 级别上很难区分这个特定对话框上的这两个按钮。与常规消息框（即 JavaScript`confirm()`对话框）不同，这些按钮没有控件 ID，也不能简单地通过顺序或标题来识别它们。如果你找到修复它的方法，IE 驱动程序的维护者会欢迎补丁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T19:05:50.963

使用 Selenium，在关闭确认框的位置记录测试，然后检查使用的 selenium。

使您的代码适应 Firefox：

```
<script type="text/javascript">
    var posx;var posy;
    function getMouse(e){
       posx=0;posy=0;
       var ev=(!e)?window.event:e;//IE:Moz
       if (ev.pageX){//Moz
          posx=ev.pageX+window.pageXOffset;
          posy=ev.pageY+window.pageYOffset;
       }
       else if(ev.clientX){//IE
          posx=ev.clientX+document.body.scrollLeft;
          posy=ev.clientY+document.body.scrollTop;
       }
       else{
          return false
       }//old browsers
       document.getElementById('myspan').firstChild.data='X='+posx+' Y='+posy;
    }
    document.onmousemove=getMouse
</script> 
```

所以在你的函数中重用`posx`和。`posy``onBeforeUnloadAction()`

# c++ - 使用隐含假设将定义参数化类型的某些成员函数的模板是否错误？

> ID：12714589
> 
> 赞同：5
> 
> 时间：2012-10-03T18:28:32.193
> 
> 标签：c++, templates, members

假设你写了一个非常糟糕的课程

```
template <typename T>
class IntFoo
{
  T container ;
public:
  void add( int val )
  {
    // made an assumption that
    // T will have a method ".push_front".
    container.push_front( val ) ;
  }
} ; 
```

忽略该类假设容器将是`something<int>`的事实，而是注意以下事实

```
IntFoo< list<int> > listfoo ;
listfoo.add( 500 ) ; // works

IntFoo< vector<int> > intfoo;
//intfoo.add( 500 ) ; // breaks, _but only if this method is called_.. 
```

一般来说，*像这样调用参数化类型的成员函数可以*吗？这是糟糕的设计吗？这个（反）模式有名字吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T18:38:26.223

这非常好，称为编译时鸭子类型，并在标准库本身的各种地方使用。说真的，如果不假设模板参数支持某些功能，您将如何使用模板做任何有用的事情？

让我们看一下标准库中的*任何*算法，例如`std::copy`：

```
template<class InIt, class OutIt>
OutIt copy(InIt first, Init last, OutIt out){
  for(; first != last; ++first)
    *out++ = *first;
  return out;
} 
```

这里，`InIt`假设一个类型的对象支持`operator*()`（用于间接）和`operator++()`推进迭代器。对于 类型的对象，`OutIt`假设它也支持`operator*()`，并且`operator++(int)`. 一个普遍的假设也是，从任何收益中返回的任何东西都是`*out++`可分配的（也就是可转换的） 。`*first`另一个假设是`InIt`和`OutIt`都是可复制构造的。

另一个使用它的地方是在任何标准容器中。在 C++11 中，当您使用`std::vector<T>`,时，*当且仅当*您使用任何需要副本的成员函数时，才`T`需要是可复制构造的。

 *所有这些都使得用户定义的类型可以被视为与内置类型相同，即它们是该语言的一等公民。让我们再看一些算法，即那些采用要应用于范围的回调的算法：

```
template<class InIt, class UnaryFunction>
InIt for_each(InIt first, InIt last, UnaryFunction f){
  for(; first != last; ++first)
    f(*first);
  return first;
} 
```

`InIt`假设再次支持与`copy`上面示例中相同的操作。但是，现在我们也有`UnaryFunction`. 假定这种类型的对象支持后缀函数调用表示法，特别是带有*一个参数*（一元）。进一步假设这个函数调用的参数可以从任何`*first`产量转换。

使用该算法的典型示例是使用普通函数：

```
void print(int i){ std::cout << i << " "; }

int main(){
  std::vector<int> v(5); // 5 ints
  for(unsigned i=0; i < v.size(); ++i)
    v[i] = i;
  std::for_each(v.begin(), v.end(), print); // prints '0 1 2 3 4 '
} 
```

但是，您也可以为此使用*函数对象*- 一种重载的用户定义类型`operator()`：

```
template<class T>
struct generate_from{
  generate_from(T first) : _acc(first) {}
  T _acc;
  void operator()(T& val){ val = _acc++; }
};

int main(){
  std::vector<int> v(5); // 5 ints
  // yes, there is std::iota. shush, you.
  std::for_each(v.begin(), v.end(), generate_from<int>(0)); // fills 'v' with [0..4]
  std::for_each(v.begin(), v.end(), print); // prints '0 1 2 3 4 '
} 
```

如您所见，我的用户定义类型`generate_from`可以完全像函数一样对待，它可以像函数一样被*调用*。请注意，我对`T`in做了几个假设`generate_from`，即它需要是：

*   可复制构造（在 ctor 中）
*   后增量（在 中`operator()`）
*   可复制分配（在 中`operator()`）*

# multithreading - vs2010 Debug.WriteLine 停止工作

> ID：12714593
> 
> 赞同：2
> 
> 时间：2012-10-03T18:28:53.907
> 
> 标签：multithreading, visual-studio-2010, debugging

我有这个问题让我在一天中的大部分时间都感到悲伤，然后是一些。
基本上我的 Debug.WriteLine 工作了一段时间，然后神奇地停止输出。调试器仍在工作，因为我可以在行上放一个断点，它会中断，我可以跨过 Debug.WriteLine 并观察它不输出。

现在我已经检查了我能想到的一切。我已经尝试过各种帖子中的东西，例如

[Debug.Writeline 没有打印任何东西](https://stackoverflow.com/questions/7477309/debug-writeline-is-not-printing-anything)

[Debug.Writeline 停止工作](https://stackoverflow.com/questions/5992094/debug-writeline-stops-working)

[Visual Studio 2010 突然停止显示调试输出](https://stackoverflow.com/questions/10128179/visual-studio-2010-suddenly-stops-displaying-debug-output)

但没有任何效果。澄清

*   我正在使用 vs2010 pro sp1。
*   这些项目使用 .net4 框架。
*   我有调试常量集。
*   调试器仍然连接，因为我可以设置断点并且它们被命中。
*   这两个项目都设置为在“任何 CPU”下构建（我尝试将两者都用作 X86，但没有帮助）
*   我在 Windows 7 x64 上运行

在遵循所有建议之后，我没有修复。上面这些帖子都没有真正得到答复。

那么如何解决这个问题呢？

我想我会创建一个单独的解决方案来重现这个问题。

您可以在此处下载我的重现错误的解决方案[https://drive.google.com/uc?export=download&confirm=&id=0B0SLafLeQj5GOGxORThMWWhYV28](https://drive.google.com/uc?export=download&confirm=&id=0B0SLafLeQj5GOGxORThMWWhYV28)

所以我制作了 2 个 Windows 应用程序，并将它们设置为同时启动。在每个应用程序中，我启动一个线程，并在线程中执行 Debug.WriteLine

它似乎出现了某种死锁并停止写入输出。这似乎是 Visual Studio 中的一个错误，对此我感到非常惊讶。我必须相信不可能有 2 个线程同时执行 Debug.WriteLine 的项目吗？

再一次，我非常需要一种方法来解决这个问题并仍然获得调试输出。哦，我也尝试过将输出重定向到即时窗口的选项，但也没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T10:54:51.380

视觉工作室中似乎有一个错误。我使用 .net 反射器深入研究 CLR，发现它所做的锁定似乎只在每个进程级别上起作用。因此，当您只运行 1 个项目时，DefaultTraceListener 似乎可以与多线程一起正常工作，但是一旦您运行多个项目，它就会产生某种死锁并停止工作。

我通过为 Debug.WriteLine 创建一个包装器解决了这个问题，然后我在其中实现了一个全局互斥锁作为写入的锁。Mutex 是 win32 互斥锁的包装器，因此可以跨系统的进程级别工作。

请在此处查看我的代码，该代码放在我在两个项目中引用并使用的类库中，而不是 System.Diagnostics 下的普通 Debug.WriteLine：

```
public class Debug
{
    #if DEBUG
        private static readonly Mutex DebugMutex =new Mutex(false,@"Global\DebugMutex");
    #endif

    [Conditional("DEBUG")]
    public static void WriteLine(string message)
    {
        DebugMutex.WaitOne();
        System.Diagnostics.Debug.WriteLine(message);
        DebugMutex.ReleaseMutex();
    }

    [Conditional("DEBUG")]
    public static void WriteLine(string message, string category)
    {
        DebugMutex.WaitOne();
        System.Diagnostics.Debug.WriteLine(message,category);
        DebugMutex.ReleaseMutex();
    }

} 
```

希望这可以帮助 ！

骏马。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T15:03:28.180

验证输出窗口的上下文菜单是否选中了“程序输出”。我的调试语句没有跟踪。即使我没有取消选中该选项，这也未选中。检查它为我修复了它。

# c++ - 使用没有 arg 列表的类模板（未声明的标识符）

> ID：12714602
> 
> 赞同：0
> 
> 时间：2012-10-03T18:29:53.063
> 
> 标签：c++, templates, data-structures

我是课程模板的新手，遇到了麻烦。我有一个未声明的函数（即作为 int、double 等）。但是在这个函数中声明是没有意义的。因此我收到错误。谢谢您的帮助。

我有以下功能：

```
bool QueType<ItemType>::IsEmpty() const
// Returns true if there are no elements on the queue and false otherwise.
{
    return (front == NULL);
} 
```

这将返回以下错误：

错误 1 ​​错误 C2065：“ItemType”：未声明的标识符 错误 2 错误 C2955：“QueType”：使用类模板需要模板参数列表
错误 3 错误 C2509：“IsEmpty”：“QueType”中未声明成员函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:32:05.840

我想你正在寻找：

```
template <typename ItemType>
bool QueType<ItemType>::IsEmpty() const
// Returns true if there are no elements on the queue and false otherwise.
{
    return (front == NULL);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:32:19.770

`template <typename ItemType>`在你的函数声明之前添加。

# mysql - 网页游戏平台的 Node.js 数据库

> ID：12714613
> 
> 赞同：0
> 
> 时间：2012-10-03T18:30:30.487
> 
> 标签：mysql, database, node.js, store, storage-engines

我正在使用 node.js 构建一个网络游戏平台/商店，并且我一直在研究存储游戏数据的方法。游戏数据将包括基本信息和关键字列表。

我首先研究了 MyISAM 和 InnoDB 存储引擎之间的差异。InnoDB 似乎是最合适的选择，因为我希望操作锁定在行级别而不是表级别。但是，我还发现 FULLTEXT 搜索仅适用于 MyISAM 表。

我的第一个问题是这个。是否有适合我的两个要求的 MySQL 存储引擎（同时操作不同行的能力，以及像在任何商店中搜索特定关键字的表的能力）？

此外，如果第一个问题的答案是否定的，是否有其他数据库软件（MySQL 的替代品）可以满足我的要求并在 node.js 上支持开箱即用或使用插件？

无论我使用什么，它都需要快速执行读取，因为很多人可能同时访问同一个游戏（因此访问表中的同一行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:13:32.590

我认为您过早地进行了优化。选择您想要的任何数据库，然后确保创建一个抽象的数据库层，以便您可以在以后/如果有必要时交换东西而不会太麻烦。

除非您的网络游戏平台超级迅速地变得超级流行（在这种情况下对您有好处！这是一个很好的问题），几乎任何数据库都可以满足您的需求。当它开始成为问题时，您将更好地了解瓶颈在哪里以及您的访问模式是什么样的。

更重要的是刚开始构建，因为在你这样做之前没有人可以使用它:)

# jquery - jQuery 插件共享函数和变量

> ID：12714618
> 
> 赞同：2
> 
> 时间：2012-10-03T18:30:42.640
> 
> 标签：jquery, plugins

我正在开发一个 jQuery 插件，对在同一命名空间内的方法之间共享函数和变量有点困惑。我知道以下将起作用：

```
 (function($){

    var k = 0;
    var sharedFunction = function(){
                //...
                }

    var methods = {

    init : function() { 
      return this.each(function() {
          sharedFunction();
        });
    },

     method2 : function() { 
      return this.each(function() {
          sharedFunction();
        });
    }
  };

$.fn.myPlugin = function(method) {
    // Method calling logic
    if (methods[method]) {
      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || ! method){
      return methods.init.apply(this, arguments);
    } else {
      $.error('Method ' +  method + ' does not exist here');
    }    
  };

})(jQuery); 
```

但是，我想知道是否有更好的方法来做到这一点。虽然我知道变量“k”和函数“sharedFunction”在技术上不是全局的（因为它们不能直接在插件之外访问），但这似乎并不复杂。

我知道 $.data 是一个选项，但是如果您有大量需要通过插件中的多个方法访问的变量和函数，这似乎会变成一团糟。

任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:00:44.833

Javascript 中（可以说）更常见的缺陷之一是`{ }`没有像其他 C 风格语言那样定义范围；功能做。

考虑到这一点，除了使变量全局化之外，有两种方法（我通常使用）在两个单独的函数之间共享变量：

### 在通用函数中声明函数

这就是您在上面演示的内容。您在另一个函数（定义范围）中声明了两个函数。在容器函数的子级中声明的任何内容都可以在其范围内的任何位置使用，包括两个内部函数的范围。

```
// this is a self-calling function
(function () {

    var foo;

    var f1 = function () {
        // foo will be accessible here
    },

    f2 = function () {
        // ... and foo is accessible here as well
    }

})(); 
```

老实说，这根本不是“简单的”，并且通常用来代替无法在 Javascript 中定义函数范围以外的范围。

### 命名空间公共成员

您*可以*在全局范围内定义一个对象，*然后*使用您的变量/函数对其进行扩展。*您确实必须走向全球，但通过确保只进行一次*，您可以最大限度地减少您的足迹。

```
window.app = {
    foo : 'bar'
};

(function () {

    var f1 = function () {
        // app.foo will be accessible here
    };

})();

(function () {

    var f2 = function () {
        // ... and here as well, even though we're 
        // in a totally different (parent) scope
    };

})(); 
```

使用`$().data()`可能看起来可行，但虽然它肯定有它的用途，但我不建议增加额外的开销来提供你描述的功能，因为它可以通过简单的语言机制轻松（和本机）实现（尽管，可读性需要有点习惯）。

# bash - sed -i 后批量重命名文件

> ID：12714622
> 
> 赞同：0
> 
> 时间：2012-10-03T18:30:53.263
> 
> 标签：bash, sed, awk, find, file-rename

此脚本正确找到我需要的文件并用单个空格替换连续空格：

```
find . -type f -iname *-[0-9][0-9][0-9][0-9][0-9]-* ! -iname *.gz ! -iname *_processed -print0 | xargs -0 sed -i  's/ \+ / /g' 
```

我现在需要的是附加`_parsed`到每个文件的**文件名**的末尾，以便下次运行此脚本时忽略这些文件。

有什么好方法可以做到这一点？注意：文件没有扩展名。文件名如下所示：

```
./1923/338810-99999-1923
./1921/999999-41406-1921
./1953/320590-99999-1953
./1911/241360-99999-1911
./1923/307330-99999-1923
./1983/802220-99999-1983 
```

编辑：我使用的是 CentOS 6。基于 Python 的解决方案也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:34:59.797

如果您正在寻找一种将当前脚本*与*附加字符串的能力相结合的方法，您可以将您的结果`find`放入一个`while`循环中并同时执行这两项操作（`while`而不是`for`支持带空格的文件，如果您曾经需要这个条件 - 感谢@TimPote 的提示！）：

```
find . -type f -iname *-[0-9][0-9][0-9][0-9][0-9]-* ! -iname *.gz ! -iname *_processed -print | while read file; do \
    sed -i 's/ \+ / /g' "$file"; \
    mv "$file" "${file}_parsed"; \
done 
```

仅重命名的另一种方法是使用`find`'s`-exec`选项：

```
find . -type f -iname *-[0-9][0-9][0-9][0-9][0-9]-* ! -iname *.gz ! -iname *_processed -exec mv {} "{}_parsed" \; 
```

此命令将遍历您原来的 find+replace 命令找到的相同文件列表，但这次只会根据需要重命名它们。

# youtube-api - 创建频道后无法创建播放列表

> ID：12714624
> 
> 赞同：1
> 
> 时间：2012-10-03T18:30:53.730
> 
> 标签：youtube-api, youtube-channels, json-c

**受影响的 API 名称：**

YouTube 数据 API 2.1

**问题摘要：**

我遇到了未链接的 youtube 帐户的问题。首先，我通过 youtube gdata api 成功为一个帐户创建了一个频道。然后，当我尝试为同一帐户创建播放列表时，它会失败并出现错误 403，youtube_signup_required。如果我等待数小时到一天，那么最终它会起作用。
从关联帐户到我可以使用帐户之间是否存在相当长的延迟？
我可以直接去 youtube 并在那里创建一个播放列表没有问题。
我什至可以在之后立即使用 api 操作该播放列表（添加视频等），而不是创建新的播放列表。

**重现问题的步骤：**

1.  通过 gdata api 为其创建通道来链接帐户
2.  尝试通过 gdata api 为同一帐户创建播放列表

**预期输出：**

为最近关联的帐户成功创建新的播放列表

**实际结果：**

403 youtube_signup_required 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:35:33.683

您可以在 WebView 中使用此移动工作流程让用户在不离开您的应用程序的情况下创建频道：

[https://m.youtube.com/create_channel?chromeless=1&next=/channel_creation_done](https://m.youtube.com/create_channel?chromeless=1&next=/channel_creation_done)

处理完成后会将用户带到 /channel_creation_done，然后您可以关闭 WebView。您可以在此处找到有关工作流程的更多信息：[https](https://developers.google.com/youtube/create-channel) ://developers.google.com/youtube/create-channel 。你可以试试这个吗？

# mysql - MySQL高效查找查询

> ID：12714625
> 
> 赞同：0
> 
> 时间：2012-10-03T18:31:06.400
> 
> 标签：mysql

我有两个表需要组合起来才能获得所需的数据，但是给出所需结果的查询都非常昂贵。

我有一个产品表（id、名称）和一个库存表（id、pid、供应商、库存、价格）。stock.pid 是 products.id 的外键，但每个产品可以有多个供应商，因此在 stock 表中有多个条目。

我需要的是每种产品的最便宜价格和当前库存，结合产品记录中的所有数据，按价格升序排列。

我尝试的是（以及几种变体）：

```
SELECT DISTINCT(pid), MIN(price), stock, p.*
FROM stock s LEFT (INNER) JOIN
     product
     ON pid = s.id
GROUP BY pid
ORDER BY price (LIMIT 100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:39:07.153

嗯

```
Select products.*,stock.stock,cheapest.cheapestprice
From (select id,Min(Price) as cheapestPrice From Stock Group By id) cheapest
inner join Stock on stock.id = cheapest.id
inner join products on product.id = stock.pid
Order by cheapest.cheapestprice 
```

也许

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:34:20.603

你想用一个子查询来做到这一点：

```
select p.*, sumstock, minprice
from products p left outer join
     (select s.pid, sum(stock) as sumstock, min(price) as minprice
      from stock s
      group by s.pid
     ) sp
     on sp.pid = p.id
order by minprice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T09:26:08.407

我已经解决了如下问题，还添加了一个额外的级别，其中考虑了当前时间，因为某些供应商在一天中的某个时间之后无法按时交货。我没有包括的是总和（股票）。我已将该字段作为 sumStock 添加到产品表中，并在库存记录发生更改时始终更新它。

```
SELECT    sp.price
,         p.*
FROM      products p 
LEFT JOIN stock_products sp
USING     (ean)
WHERE     sp.id = IFNULL(
          (SELECT    psi.id
           FROM      stock_products psi 
           JOIN      suppliers sup
           ON        psi.pid = sup.id
           WHERE     psi.ean = p.ean
           AND       psi.stock > 0
           ORDER BY  IF(sup.time>40667, sup.deliveryTime, sup.deliveryTime+86400)
           ,         price
           LIMIT 1)
          ,
          (SELECT    psi.id
           FROM      stock_products psi 
           JOIN      suppliers sup
           ON        psi.pid = sup.id
           WHERE     psi.ean = p.ean
           ORDER BY  IF(sup.time>40667, sup.deliveryTime, sup.deliveryTime+86400)
           ,         price
           LIMIT 1)
ORDER BY  price 
```

请注意，我在产品没有库存的极少数情况下使用 IFNULL。我仍然想展示那些记录。如果没有，查询会短一些，但这是我最终使用的完整解决方案。

此外，40667 是代表当前时间的数字。它应该是自午夜以来的当前秒数。

# c# - HRESULT 异常：0x800A03EC 错误

> ID：12714626
> 
> 赞同：76
> 
> 时间：2012-10-03T18:31:06.790
> 
> 标签：c#, excel, exception, interop, add-in

使用以下代码运行 Excel 加载项时出现“HRESULT：0x800A03EC”错误：

```
Excel.Range rng = ActiveSheet.Cells[x, y] as Excel.Range;                
string before = rng.Value2; 
string cleanV = System.Text.RegularExpressions.Regex.Replace(before, @"\s+", "");
rng.set_Value(cleanV); 
```

发生错误时，X 和 Y 设置为 1，因此不会违反 Excel 范围。我进行了广泛的搜索并尝试了多种设置单元格值的方法（例如 Cells[x,y]、range.set_Value()），但不知道为什么会发生此错误以及如何避免它。

任何帮助是极大的赞赏。

以下是异常详情：

* * *

```
System.Runtime.InteropServices.COMException was unhandled by user code
  HResult=-2146827284
  Message=Exception from HRESULT: 0x800A03EC
  Source=""
  ErrorCode=-2146827284
  StackTrace:
       at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
       at Microsoft.Office.Interop.Excel.Range.set_Value(Object RangeValueDataType, Object value)
       at ImportValidation.ThisAddIn.removeAnySpaces(Int32 x, Int32 y) in c:\Users\dshevelev\Documents\Visual Studio 2012\Projects\ImportValidation\ImportValidation\ThisAddIn.cs:line 354
       at ImportValidation.ThisAddIn.ReadHeaders(Hashtable columnAddress) in c:\Users\dshevelev\Documents\Visual Studio 2012\Projects\ImportValidation\ImportValidation\ThisAddIn.cs:line 123
       at ImportValidation.ThisAddIn.mapColumns() in c:\Users\dshevelev\Documents\Visual Studio 2012\Projects\ImportValidation\ImportValidation\ThisAddIn.cs:line 493
       at ImportValidation.Ribbon1.button6_Click(Object sender, RibbonControlEventArgs e) in c:\Users\dshevelev\Documents\Visual Studio 2012\Projects\ImportValidation\ImportValidation\Ribbon1.cs:line 55
       at Microsoft.Office.Tools.Ribbon.RibbonPropertyStorage.ControlActionRaise(IRibbonControl control)
       at Microsoft.Office.Tools.Ribbon.RibbonPropertyStorage.ButtonClickCallback(RibbonComponentImpl component, Object[] args)
       at Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.Invoke(RibbonComponentCallback callback, Object[] args)
       at Microsoft.Office.Tools.Ribbon.RibbonMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
       at Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.System.Reflection.IReflect.InvokeMember(String name, BindingFlags invokeAttr, Binder binder, Object target, Object[] args, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParameters)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-16T17:54:27.667

在这一行有同样的错误

```
 Object temp = range.Cells[i][0].Value; 
```

使用基于非零的索引解决

```
 Object temp = range.Cells[i][1].Value; 
```

创建这个库的人怎么可能认为使用基于非零的索引是个好主意？

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-15T10:29:07.863

这是一个常见但记录不充分的 Excel COM 错误。我已经看到它记录为“NAME_NOT_FOUND”，这意味着 Excel 的 COM 层被禁用，并且找不到 COM 属性或方法名称。

在 Excel 处于“忙碌”状态时运行 COM 代码时，我一直收到此错误，例如，如果您设置了一个将启动代码的计时器，并且代码在用户编辑单元格或按下鼠标按钮时开始运行，那么你总是会得到这个错误。此错误仅在代码在 Excel 主线程上运行时发生，但似乎等同于错误 VBA_E_IGNORE = 0x800AC472，当 Excel 处于“忙碌”状态时，从另一个线程调用 Excel COM 对象模型时会出现此错误。

唯一的解决方法似乎是重试（稍有延迟）COM 调用，直到它成功 - 当 Excel 不再“忙”时。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-15T10:12:24.383

检查您的开始索引。对于 Microsoft.Office.Interop.Excel 范围对象，它从 1 而不是 0 开始。由于我的循环起始值，我收到了同样的错误。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T18:36:10.513

转到 Excel 选项 > 保存 > 以这种格式保存文件 > 选择“Excel 工作簿 (*.xlsx)”。如果您使用的是旧版本的 excel 文件 (.xls) 而不是 .xlsx，则会出现此问题。旧版本不允许在 excel 表中超过 65k 行。

保存为 .xslx 后，再次尝试执行您的代码。

编辑 - -

深入研究您的问题，似乎问题可能是特定于语言环境的。代码可以在另一台机器上运行吗？细胞有什么价值？是日期时间格式吗？看看这里：

[http://support.microsoft.com/kb/320369](http://support.microsoft.com/kb/320369)

[http://blogs.msdn.com/b/eric_carter/archive/2005/06/15/429515.aspx](http://blogs.msdn.com/b/eric_carter/archive/2005/06/15/429515.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-08T15:31:41.313

也遇到了这个错误......

当保存到文件路径包含无效字符时会发生这种情况，在我的情况下：

```
path = "C:/somefolder/anotherfolder\file.xls"; 
```

`\`注意两者的存在`/`

*如果尝试保存到不存在的目录也可能发生。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-27T09:47:46.723

我们遇到了同样的问题，并为我们找到了解决方案：

> 请制作这个文件夹。C:\Windows\SysWOW64\config\systemprofile\Desktop ·Windows 2008 Server x86
> 请制作此文件夹。C:\Windows\System32\config\systemprofile\Desktop

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-06-07T01:54:47.207

我知道这是旧的，但只是为了介绍我的经验。我今天早上刚碰到它。原来我们的错误与 .xls 行限制或数组索引无关。它是由错误的公式引起的。

我正在从数据库向 Excel 导出一张关于我的客户的表格。有人填写客户名称`=90Erickson-King`，显然这可以作为数据库中的字符串类型字段，但是会导致 Excel 中的公式错误。`#N/A`该程序并没有像您在使用 Excel 时那样显示，而是在一段时间后冻结并溢出了 0x800A03EC 错误。

我通过删除客户名称中的等号和破折号来纠正此问题。之后出口顺利。

我猜这个错误代码有点太笼统了，因为人们看到报告了很多不同的可能原因。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-04T07:08:17.820

尝试导出大型 Excel 文件（~150.000 行）时出现相同的错误使用以下代码修复

```
Application xlApp = new Application();
xlApp.DefaultSaveFormat = XlFileFormat.xlOpenXMLWorkbook; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-31T08:30:21.160

我在使用 Excel 2003 DLL 并尝试写入第 257 列时遇到了同样的错误。Excel 2003 将每个工作表的最大列数限制为 256，因此引发了此异常。

有关 Excel 2003 的详细限制，请参阅 [http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP005199291.aspx](http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP005199291.aspx)

从 Excel 2007 开始，列限制增加到 16384 列，请参阅 [http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP010073849.aspx](http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP010073849.aspx)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-01T19:25:57.317

这一定是世界上最通用的错误消息，因为我今天使用 Excel 互操作通过以下命令得到它：

```
Excel.WorkbookConnection conn;
conn.ODBCConnection.Connection = "DSN=myserver;"; 
```

解决了什么问题是在连接字符串中指定 ODBC：

```
conn.ODBCConnection.Connection = "ODBC;DSN=myserver;"; 
```

万一其他人遇到此错误，我希望它有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-10T06:53:24.163

一段时间前我收到了同样的错误。问题是我的 XLS 文件包含超过 65531 条记录（准确地说是 50 万条）。我试图读取一系列单元格。

```
Excel.Range rng = (Excel.Range) myExcelWorkbookObj.UsedRange.Rows[i]; 
```

当我的计数器（即“i”）超过 65531 条记录的限制时，尝试读取单元格范围时引发异常。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-11-01T20:37:17.833

添加另一个可能导致此问题的问题：公式错误，因为我根据我的语言环境使用了错误的列表分隔符。使用`CultureInfo.CurrentCulture.TextInfo.ListSeparator;`纠正了这个问题。

请注意，异常是在以下代码行中引发的...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-27T16:09:32.097

调用此代码时出现此错误：`wks.Range[startCell, endCell]`Range`startCell`和`endCell`Range 指向不同的工作表，然后是变量`wks`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-20T13:20:23.063

此错误的另一个原因。下面的代码示例在数据表 (dtTable) 具有空白表名时返回错误：

```
 ' Open Excel workbook
  objExcelApp = New Application
  objExcelWorkbook = objExcelApp.Workbooks.Add()
  objExcelSheet = objExcelWorkbook.ActiveSheet
  objExcelSheet.Name = dtTable.TableName 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-12T20:54:09.180

在 2020 年仍然看到这个错误。正如上面[stt106](https://stackoverflow.com/users/3450755/stt106)所述，有很多很多可能的原因。在我的情况下，它是在将数据自动插入工作表期间，并且日期被错误地输入为 1019 年而不是 2019 年。由于我使用数据数组插入，因此很难找到问题，直到我切换到逐行插入。

这是我的旧代码，它“隐藏”了问题数据。

```
 Dim DataArray(MyDT.Rows.Count + 1, MyDT.Columns.Count + 1) As Object
    Try
        XL.Range(XL.Cells(2, 1), XL.Cells(MyDT.Rows.Count, MyDT.Columns.Count)).Value = DataArray
    Catch ex As Exception
        MsgBox("Fatal Error in F100 at 1270: " & ex.Message)
        End
    End Try 
```

一次按单行插入相同的数据时，它会因相同的错误而停止，但现在很容易找到有问题的数据。

多年后我添加了这些信息，以防这对其他人有帮助。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-12-10T16:25:18.340

我遇到了同样的错误，但现在已经排序。在我的例子中，我有标题为“Key1”、“Key2”和“Key3”的列。我已将列名更改为其他名称并对其进行了排序。

这些似乎是保留关键字。

问候， 马赫什

# ruby-on-rails - 如何检查哈希数组中的唯一性

> ID：12714628
> 
> 赞同：1
> 
> 时间：2012-10-03T18:31:10.223
> 
> 标签：ruby-on-rails, ruby

我有一个散列数组，其中每个散列包含一些键。我想检查是否有任何数量的哈希具有相同的 user_id。

一个示例如下所示：

```
[ {:id => 1, :user_id => 2, :location => nil, :facility_id => nil}
  {:id => 3, :user_id => 2, :location => 'China', :facility_id => 20} ] 
```

在这种情况下，我需要它返回 true，其中两个哈希有一个共同的 user_id。我如何以“红宝石方式”做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:40:52.057

```
arr = [ {:id => 1, :user_id => 2, :location => nil, :facility_id => nil},
  {:id => 3, :user_id => 2, :location => 'China', :facility_id => 20} ]
p arr != arr.uniq{|u| u[:user_id]} #=> true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T18:41:52.817

试试这个：

```
a.map{|t| t[:user_id]}.uniq.size == a.size 
```

# android - 上述问题的Android布局

> ID：12714629
> 
> 赞同：2
> 
> 时间：2012-10-03T18:31:13.903
> 
> 标签：android, layout

iam designin new app ，在某些部分我需要两个布局相互叠加，但不使用 arndroid:orientation ，我需要使用 layout_above/layout_below ，但它对我说这是 LinearLayout 的无效参数这里是编码

```
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/menu"
        android:gravity="center">
            <LinearLayout
                android:id="@+id/t1"  
                android:layout_width="80dp"
                android:gravity="center"
                android:layout_height="80dp"
                android:background="#DDDDDD">

            </LinearLayout>
            <LinearLayout
                android:id="@+id/t2"  
                android:layout_width="80dp"
                android:gravity="center"
                android:layout_height="80dp"
                android:background="#DDDDDD">

            </LinearLayout>
            <LinearLayout
                android:id="@+id/t3"  
                android:layout_width="80dp"
                android:gravity="center"
                android:layout_above="@id/t1"
                android:layout_height="80dp"
                android:background="#DDDDDD">

            </LinearLayout>

    </LinearLayout> 
```

所以线性布局 t1 和 t2 彼此相邻，女巫很好，但我希望线性布局 t3 高于 t1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:34:36.287

android:layout_above/layout_below 只允许在 RelativeLayout 上使用，使用 RelativeLayout 而不是 LinearLayout 它将起作用。前任：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout
        android:id="@+id/below_layout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/rev_arrow">
    </LinearLayout>
    <LinearLayout>
        android:id="@+id/above_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        />
</RelativeLayout> 
```

这是一个很好的布局教程： [http ://android.programmerguru.com/android-relativelayout-example/](http://android.programmerguru.com/android-relativelayout-example/)

# concurrency - 为协调写入/读取选择正确的 Clojure 引用类型

> ID：12714635
> 
> 赞同：2
> 
> 时间：2012-10-03T18:31:39.300
> 
> 标签：concurrency, clojure, stm

我正在为 Campfire 开发一个聊天机器人，它将当前用户列表保存在一个原子中，`(defonce users (atom {}))`.

我最初选择这个引用类型是因为它很简单，到目前为止它运行良好，但可能需要改变。

1.  Campfire 向流式 API发送`EnterMessage`和事件。`LeaveMessage`我的机器人通过从 Campfire API 获取当前用户列表来对这些做出反应，然后使用新列表调用`reset!`atom `users`。

2.  那些相同的 Enter/Leave 事件会触发随机交互，例如从`users`atom 中选择一个随机用户并向其提问。

### 问题

上面的数字 2 经常询问刚刚离开的用户，或者从不询问刚进入的用户，因为`users`原子还没有`!reset`。我想我需要使用 a `ref`，但[这些文档](http://clojure.org/refs)说“*作家永远不会阻止通勤者或读者。* ”问题是，我希望那个作家阻止我的读者，对吧？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:56:02.700

`ref`s 主要是为**协调访问多个数据结构**而设计的，如果您只有一个身份（用户列表），那么 refs 的主要优势对您来说并不是真正的优势，尽管它也不是真正的问题。Refs 也有成本，因为事务可能会运行不止一次，因此如果您的操作具有发送消息等副作用，那么消息可能会在事务重试时发送两次。您可以通过同时使用 ref 和代理来解决此问题，因为**从事务发送到代理的消息保证只发送一次**并且仅使用最终提交的值。

在您的情况下，您可以通过以下方式做得很好：

*   继续使用原子
*   使用类似的东西 `(swap! users assoc name user)`来增量构建用户列表。
*   在 atom 上使用[watch 函数来处理状态变化，因为 watch 会捕捉到每一个状态变化。](http://clojuredocs.org/clojure_core/clojure.core/add-watch)

或者

*   切换到参考
*   使用代理将实际消息发送给用户。
*   使用手表可以使这更简单，但不是必需的。

引用“作家永远不会阻止通勤者或读者”。尽管值得解释一下，但可能与您没有直接关系。在单个 ref 的情况下，仅读取 ref 值的线程从不等待，它获取当前值并继续。当有多个 ref 时，它可以在一个事务中读取它们，并保证它会从它们两者中获得一组一致的值，或者将重新运行，直到它确实获得一组一致的值。需要更新值的线程如果没有获得一组一致的值，同样需要重新运行，除非它们使用`commute`函数来更新它们，在这种情况下，STM 会知道即使提交新值也是安全的是不是某个其他线程也对该值进行了相同的（或可交换的）操作。

# jquery - 进入网站时默认链接处于活动状态

> ID：12714640
> 
> 赞同：0
> 
> 时间：2012-10-03T18:32:03.623
> 
> 标签：jquery, html, css

我想让我的默认链接在进入网站时显示为活动状态。CSS可以做到这一点吗？我已经为我的链接使用了 CSS。Jquery 会好吗（jquery 的新手）？

更新：

我的代码中有些东西不起作用，有人可以在这个链接上接受并告诉我我做错了什么吗？[http://jsfiddle.net/2VnXD/7/](http://jsfiddle.net/2VnXD/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:47:00.127

创建一个`active`css 类并提供该类的默认链接：

**HTML：**

```
<a href="#">test 1</a>
<a href="#" class="active">test 2</a>
<a href="#">test 3</a>​ 
```

**CSS：**

```
.active{
 border: 1px dashed blue;
 background-color: #eee;   
}
a{
    padding: 5px;
}
a:hover{ /*Simple Hover effect*/
 border: 1px solid red;
 color: green;    
} 
```

**[例子](http://jsfiddle.net/2VnXD/3/)**

另外，既然您说您对 jQuery 还很陌生，这里有一个处理链接之间切换的简单示例：

```
$("a").on("click", function(){
   $(".active").removeClass("active");
   $(this).addClass("active");
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:45:58.070

//css

```
 .link{font-size:18px; color:black;}
 .defaultLink{font-size:24px; color:blue;} 
```

//你的链接

```
<a class="link" href="#">link 1</a>
<a class="link" href="#">link 2</a>
<a class="link" href="#">link 3</a>
<a class="defaultLink" href="#">link 4</a>​ 
```

# safari - Safari 6 调试器——查看记录的请求/响应标头

> ID：12714642
> 
> 赞同：6
> 
> 时间：2012-10-03T18:32:07.677
> 
> 标签：safari

我不确定我是否遗漏了什么或什么，但即使在 Safari 6.0.1 的调试器中记录网络请求时，除了最近的请求之外，我似乎找不到任何请求/响应标头。

我做了以下事情：

1.  `Recording`在 Instruments 下启用
2.  导航到一个页面
3.  查看了初始文档请求并查看了它的请求/响应标头
4.  在该页面上提交了一个表单，将我重定向到另一个站点

现在，当我查看网络请求时，我可以查看浏览器最近发出的请求的请求/响应标头，但它似乎丢失了之前请求的标头。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-05T09:37:56.713

一个老问题，但这仍然让我有点难过。点击右上角的“资源”按钮，一个侧边栏从右侧滑出，带有标题信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T20:38:06.587

在 Safari 9 中，我发现我的“详细信息侧边栏”隐藏在网络面板右侧的一个小按钮后面。（键盘快捷键：Opt-Cmd-R）

[![在此处输入图像描述](../Images/1ea05aec9276650b2837dbef12ca16f6.png)](https://i.stack.imgur.com/cdC3E.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-29T20:39:41.760

看起来在 Safari 6.0.4 中您可以看到完整的请求/响应标头，您可以双击包含请求的行以查看响应的内容。

# wpf - 为什么我的命令绑定没有触发？

> ID：12714643
> 
> 赞同：2
> 
> 时间：2012-10-03T18:32:09.270
> 
> 标签：wpf, wpf-controls

我在我的 WPF 应用程序中定义了许多自定义命令：

```
public class MyCommands {

    public static RoutedUICommand CopyPlateCommand;

    public static RoutedUICommand PreviousRecordCommand;

    public static RoutedUICommand NextRecordCommand;

    public static RoutedUICommand SearchCommand;

    public static RoutedUICommand SearchPlateCommand;

} 
```

我有一个使用这些命令的其中一些`UserControl`：`ContextMenus`

```
<UserControl x:Class="MyNamespace.UserControl1" 
        . . . > 
    <UserControl.Resources>
        <ContextMenu x:Key="ContextMenu" HorizontalAlignment="Left">
            <MenuItem Header="Copy Plate"   Command="{Binding cs:MyCommands.CopyPlateCommand}" />
            <MenuItem Header="Search Plate" Command="{Binding cs:MyCommands.SearchPlateCommand}" />
        </ContextMenu>
        <ContextMenu x:Key="TextBoxMenu" HorizontalAlignment="Left">
            <MenuItem Header="Copy"            Command="{Binding Copy}" />
            <MenuItem Header="Copy Plate"   Command="{Binding cs:MyCommands.CopyPlateCommand}" />
            <MenuItem Header="Search Plate" Command="{Binding cs:MyCommands.SearchPlateCommand}" />
        </ContextMenu>
    </UserControl.Resources>
                             . . . 
</UserControl> 
```

中没有命令绑定`UserControl1`。

我有另一个`UserControl`包含其中的实例`UserControl1`。它还`CommandBindings`包括上下文菜单中包含的命令`UserControl1`：

```
<UserControl x:Class="MyNamespace.UserControl2" 
        . . . > 
    <UserControl.CommandBindings>
        <CommandBinding Command="Copy"                                    CanExecute="CopyCommand_CanExecute"      Executed="CopyCommand_Executed" />
        <CommandBinding Command="cs:MyCommands.CopyPlateCommand"   CanExecute="CopyPlateCommand_CanExecute" Executed="CopyPlateCommand_Executed" />
        <CommandBinding Command="cs:MyCommands.SearchPlateCommand" CanExecute="CopyPlateCommand_CanExecute" Executed="SearchPlateCommand_Executed" />
</UserControl.CommandBindings>
                             . . . 
    <c:UserControl1 . . . /> 
```

我已经在命令的各种处理程序中放置了断点，但是断点永远不会被命中。我做错了什么？我是否必须将命令绑定放入`UserControl1`？

不，我的程序不使用 MVVM。我在听说 MVVM 之前就开始了这个项目。我打算在将来的某个时候将其转换为 MVVM，但我现在没有时间。我需要修复一些错误，这让我很受挫。

感谢您的理解。

托尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:42:42.623

您的 Command 类需要公开公共属性，而不是公共字段。

您必须绑定到属性而不是字段，因为*大多数*绑定基于 ComponentModel PropertyDescriptor 模型。属性公开绑定引擎启用绑定所需的此元数据。

> **绑定到公共语言运行时 (CLR) 对象：**
> 
> 您可以绑定到任何公共语言运行时 (CLR) 对象的公共属性、子属性以及索引器。绑定引擎使用 CLR 反射来获取属性的值。或者，实现 ICustomTypeDescriptor 或已注册 TypeDescriptionProvider 的对象也可以与绑定引擎一起使用。

取自[绑定源规范](http://msdn.microsoft.com/en-us/library/ms743643.aspx)。

**下面的例子：**

```
public class MyCommands {

    public static RoutedUICommand CopyPlateCommand { get; set; }

    public static RoutedUICommand PreviousRecordCommand { get; set; }

    public static RoutedUICommand NextRecordCommand { get; set; }

    public static RoutedUICommand SearchCommand { get; set; }

    public static RoutedUICommand SearchPlateCommand { get; set; }

} 
```

在调试模式下运行应用程序时，检查“输出”窗口是否存在绑定错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:17:17.860

虽然`RoutedUICommand`我在课堂上创建的对象是字段而不是属性，但这还不足以让程序正常工作。我根本不知道如何在 XAML中将in的`CommandTarget`属性设置为.`MenuItems``UserControl1``UserControl2`

我确实让它工作了，但我最终在代码隐藏中完成了它。我所做的是我编写了一个名为的辅助方法`FixMenuItems`：

```
private void FixMenuItems( FrameworkElement element, Func<MenuItem, bool> condition, FrameworkElement target ) {
    foreach ( MenuItem menuItem in element.ContextMenu.Items ) {
        if ( condition( menuItem ) ) {
            menuItem.CommandTarget = target;
        }
    }
} 
```

然后我写了一个名为的公共方法`SetupCommandTargets`：

```
public void SetupCommandTargets( FrameworkElement target, Func<MenuItem, bool> condition ) {
    FixMenuItems( Control1, condition, target );
    FixMenuItems( Control2, condition, target );        . . .
} 
```

然后，在 and 的构造函数中`UserControl1`，`UserControl2`我根据需要调用公共函数，因为我将一些控件的处理程序移到其中，`UserControl1`因为这些处理程序需要访问该类的私有属性。

我还必须删除`Bindings`. 我能够在 XAML 中完成。只是我无法上班。`Command``MenuItems``CommandBindings``CommandTargets`

进行所有这些更改后，现在一切正常。`MenuItems`全部指向正确的控件，它们会正确启用和禁用。他们每个人都执行适当的操作。我很高兴。

# macos - 如何在 Mac 上列出任何用户访问的文件

> ID：12714646
> 
> 赞同：0
> 
> 时间：2012-10-03T18:32:27.787
> 
> 标签：macos, osx-server

我想通过列出哪个文件或命令或应用程序在哪个时间由谁打开/执行来监视 Mac 服务器的行为。例如，另一个管理员在上午 10:00 执行了一个 bash 命令“sudo rm -fr /etc”，或者另一个用户打开了一个修改过的文件，或者有人启动了磁盘工具应用程序。

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:39:32.010

[fs_usage](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/fs_usage.1.html)（以 root 身份运行）将告诉您正在查看的内容、查看者、查看内容和查看时间。如果您可以访问图形桌面，[fseventer](http://www.fernlightning.com/doku.php?id=software%3afseventer%3astart)可能也值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:01:52.053

BSM 审计就是为此而设计的。请参阅[audit(8) 手册页](http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man8/audit.8.html#//apple_ref/doc/man/8/audit)、[Rich Trouton](http://derflounder.wordpress.com/2012/01/30/openbsm-auditing-on-mac-os-x/)的这篇博文和[Audit Explorer](http://itunes.apple.com/us/app/audit-explorer/id429353921?mt=12)应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T15:28:08.957

Apple 的“活动监视器”可以解决问题。

从“应用程序 > 实用程序”文件夹中打开它，选择您感兴趣的进程，然后按 Cmd-I“检查进程”。

# php - 从浏览器中隐藏 php 文件，但从 flash 中调用它们？

> ID：12714655
> 
> 赞同：0
> 
> 时间：2012-10-03T18:33:09.130
> 
> 标签：php, flash, actionscript

我的网站上有一个 Flash 应用程序，它调用服务器上的某些 php 脚本。

例如，我有一个脚本可以获取我的 Flash 游戏用户拥有的所有项目。该脚本返回由返回代码和返回消息组成的 JSON 编码响应（在这种情况下，消息是一个项目数组）。我从 actionscript 调用 php 脚本，如下所示：

```
var urlReq:URLRequest = new URLRequest("mysite.com/getItems.php");
urlReq.method = URLRequestMethod.GET;

var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.TEXT;
loader.addEventListener(Event.COMPLETE, onResponse);
loader.addEventListener(IOErrorEvent.IO_ERROR, networkError);
loader.load(urlReq); 
```

然而，人们也可以轻松地`mysite.com/getItems.php`在他们的浏览器中导航到，只要他们有一个活动的会话，他们就会看到浏览器中的 JSON 响应。考虑到它显示了我的下划线传输协议的格式，这让我相当不舒服。

是否有任何方法可以“隐藏”我的 php 脚本以防止直接浏览器访问，同时在从 actionscript 调用时仍然可以使用该脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:37:06.220

简而言之，没有。如果在用户计算机上运行的一个程序可以访问您站点的 API，那么另一个程序也可以。您可以尝试使用加密或 cookie/密钥技术，但所有这些都可以被足够敬业的人破解。

*   可以通过反汇编/反编译 Flash 二进制文件来破坏加密。
*   Cookie/密钥技术通常可以通过使用数据包嗅探器（例如[Wireshark](http://wireshark.org) ）很容易地被破解。（使用 HTTPS 可能会使这种方法无效，但反汇编 Flash 二进制文件足以解决使用 HTTPS 的问题。）

我会考虑拥有一个 API，即使是一个未记录的 API，对玩你的游戏的编码类型相当有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:35:54.980

一个简单的方法是在您的应用程序中包含一个键作为请求的 GET 参数。然后在 php 页面中，如果 的值`$_GET['key']`有效，则仅输出 JSON。

监视您应用程序流量的人将能够提取它并在他们的浏览器中使用它以进行直接访问，但是足够高级的用户可能已经在他们的应用程序流量视图中看到了您的 JSON。

您可以进一步扩展并检查通过[`get_browser()`](http://www.php.net/manual/en/function.get-browser.php)or报告给 PHP 的各种客户端信息，[`$_SERVER['HTTP_USER_AGENT']`](http://php.net/manual/en/reserved.variables.server.php)但同样，熟练的用户将能够克服此检查。

# sas - 是否可以在 PROC IMPORT 中使用 IF 语句？

> ID：12714659
> 
> 赞同：1
> 
> 时间：2012-10-03T18:33:28.583
> 
> 标签：sas

我正在使用 PROC IMPORT 导入 Stata 格式的数据集，但我也想使用 IF 语句来创建一些新变量。但是，简单地使用这样的代码会返回“错误 180-322：语句无效或使用顺序不正确”的错误。：

```
PROC IMPORT
    DATAFILE = "myfile.dta"
    DBMS = DTA
    OUT = mydata
    REPLACE;
IF close < 10 THEN val = "low";
ELSE val = "high";
RUN; 
```

即使我使用 ODS TRACE ON，我也没有在我的日志文件中看到任何生成数据步骤的代码。还有另一种使用 IF 语句的方法吗？

更新：如果我在 PROC IMPORT 之后添加一个 DATA 步骤，如图所示：

```
PROC IMPORT
        DATAFILE = "myfile.dta"
        DBMS = DTA
        OUT = mydata
        REPLACE;
RUN;

DATA mydata;
    IF close < 10 THEN val = "low";
    ELSE val = "high";
RUN;

PROC PRINT DATA=mydata;
RUN; 
```

这只会打印出一个像这样的空表：

```
close | val
      | high 
```

检查数据集表明它不包含任何原始数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:39:43.990

正如其他人所说，您不能`if`在`proc import`. 通过将后续数据步骤放入内部，您走在了正确的轨道上`if`- 您只是语法有点错误。它应该如下所示：

```
DATA mydata2;    /* A NEW DATASET CALLED MYDATA2 WILL BE CREATED. NOTE THERE IS NO EQUALS SIGN */
    set mydata;  /* IT WILL BE BASED OFF THE MYDATA DATASET */
    IF close < 10 THEN val = "low";
    ELSE val = "high";
RUN; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:57:54.260

您永远不能在 SAS 过程中使用 IF。IF 属于数据步骤。

**更新**

```
proc import ...;
run;

data mydata;
set mydata;
length val $4; **ensure right length;
if close<10 then val='low';
else val='high';
run; 
```

# c++ - 在 VS2010 中动态链接 Boost 1.51.0 时出现链接器错误 LNK2019

> ID：12714660
> 
> 赞同：4
> 
> 时间：2012-10-03T18:33:28.350
> 
> 标签：c++, visual-studio-2010, visual-studio, boost, linker

我正在使用由 BoostPro Computing 安装程序安装的 boost 库。我在 Windows 7 64 位机器上使用 VS 2010。我想动态链接到 boost，所以我在安装程序中选择了前两个选项（多线程调试 DLL 和多线程 DLL，我相信它们被调用了）。一些已安装库的示例是：

```
boost_bzip2-vc100-mt-1_51.lib
boost_bzip2-vc100-mt-gd-1_51.lib 
```

在我的项目中链接到 boost 时，我还确保定义`BOOST_ALL_DYN_LINK`. 我专门使用该`filesystem`工具集。

当我打开时，`BOOST_LIB_DIAGNOSTIC`我在构建输出中看到以下消息：

```
1>  Linking to lib file: boost_filesystem-vc100-mt-gd-1_51.lib
1>  Linking to lib file: boost_system-vc100-mt-gd-1_51.lib 
```

然而，这些很快被跟进：

```
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const __thiscall boost::filesystem::path::string(void)const " (__imp_?string@path@filesystem@boost@@QBE?BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@XZ) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall boost::filesystem::path::~path(void)" (__imp_??1path@filesystem@boost@@QAE@XZ) referenced in function _main
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) class boost::filesystem::path __cdecl boost::filesystem::detail::unique_path(class boost::filesystem::path const &,class boost::system::error_code *)" (__imp_?unique_path@detail@filesystem@boost@@YA?AVpath@23@ABV423@PAVerror_code@system@3@@Z) referenced in function "class boost::filesystem::path __cdecl boost::filesystem::unique_path(class boost::filesystem::path const &)" (?unique_path@filesystem@boost@@YA?AVpath@12@ABV312@@Z)
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: static class std::codecvt<wchar_t,char,int> const & __cdecl boost::filesystem::path::codecvt(void)" (__imp_?codecvt@path@filesystem@boost@@SAABV?$codecvt@_WDH@std@@XZ) referenced in function "public: __thiscall boost::filesystem::path::path<char const [20]>(char const (&)[20],void *)" (??$?0$$BY0BE@$$CBD@path@filesystem@boost@@QAE@AAY0BE@$$CBDPAX@Z)
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl boost::filesystem::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (__imp_?convert@path_traits@filesystem@boost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void __cdecl boost::filesystem::path_traits::dispatch<class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@path_traits@filesystem@boost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (__imp_?generic_category@system@boost@@YAABVerror_category@12@XZ) referenced in function "void __cdecl boost::system::`dynamic initializer for 'posix_category''(void)" (??__Eposix_category@system@boost@@YAXXZ)
1>main.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) class boost::system::error_category const & __cdecl boost::system::system_category(void)" (__imp_?system_category@system@boost@@YAABVerror_category@12@XZ) referenced in function "void __cdecl boost::system::`dynamic initializer for 'native_ecat''(void)" (??__Enative_ecat@system@boost@@YAXXZ) 
```

不应该`auto-link.hpp`为我处理我的链接吗？我没有特别要求将任何内容链接到该项目，因为自动链接器似乎可以正确识别所有内容。那么我怎么会错过这些东西呢？此外，它们被声明为`dllimport`，所以链接器不应该让它们单独存在并期望它们在运行时被发现吗？

谢谢！

**更新**：我决定深入研究第二个链接器错误。它基本上是说它找不到`path`类的析构函数。`dumpbin`在库上运行后`filesystem`，我注意到这一行在文件中*：*

```
??1path@filesystem@boost@@QEAA@XZ (public: __cdecl boost::filesystem::path::~path(void)) 
```

但这显然与链接器正在寻找的内容不匹配，即：

```
"__declspec(dllimport) public: __thiscall boost::filesystem::path::~path(void)" (__imp_??1path@filesystem@boost@@QAE@XZ) 
```

请注意，链接器正在寻找 DLL 导入版本，但库本身似乎没有提供...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T21:27:54.803

对我来说，这是因为“将 wchar_t 视为内置类型”选项设置为 false，因此`wchar_t`编译为`unsigned short`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T19:29:08.033

假设您已经编译了这些 .lib，您需要确保 .lib 文件位于库路径中（查看 VC++ 目录 -> 库路径）。

编译器将在编译时放置指向 DLL 的链接，使用 .lib 来发现正确的入口点等，因此当 EXE/DLL 在运行时启动时可以有效地加载它们。

您所说的运行时 DLL 发现类型需要 LoadLibrary + GetProcAddress 类型代码，Boost 不支持。

（静态链接实际上将静态编译的 .lib 代码中的代码放入您的 DLL/EXE 中。）

编辑：另外，请检查您是否为您的架构使用了正确的 .lib 文件，例如 32 位或 64 位。这会导致签名出现类似错误。

```
dumpbin /headers 
```

将告诉您.lib 是为哪种“机器”类型构建的（dumpbin 输出的第一部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T17:49:24.610

（从您的未解决列表中）调用约定有所不同。这将导致符号不匹配。我发现如果您尝试使用 _ *cdecl 以外的其他库作为 Windows 上的调用约定进行编译，1.54.0 将不会编译所有库。Windows 喜欢许多不同的调用约定，它们不会匹配（* _cdecl /Gd、__stdcall /Gz、__FASTCALL /Gr）另外，至少在 1.54.0 中，我注意到某些库需要将 wchar_t 视为内置输入类型（Windows VS 选项 /Zc:wchar_t）（肯定是 boost::log 库）。这也会导致未解决的错误，因为在这种情况下 wchar_t 与 unsigned short 不匹配。

# android - 使用 Android 的 OData 时出现运行时异常

> ID：12714661
> 
> 赞同：2
> 
> 时间：2012-10-03T18:33:33.417
> 
> 标签：android, odata, runtimeexception

我正在尝试使用 OData 构建 Android 应用程序。我只想通过使用 OData 建立与 Web 服务器的连接。我正在使用 Eclipse，它在 Android 项目之外运行良好。但是，当使用 Android 项目时，相同的语句会引发异常。调用以下语句：

ODataConsumer c = ODataJerseyConsumer.create("http://services.odata.org/Northwind/Northwind.svc"); List listEntities = c.getEntities("Categories").execute().toList();

仍然会创建 ODataConsumer 的实例，但第二条语句 (c.getEntities..) 会引发运行时异常。如前所述，它在非 Android 项目中运行良好。我正在使用捆绑包“odata4j-0.7.0-clientbundle.jar”和 Android 4.1 (ADT r20)。

构建路径包括： - 构建路径“Android 4.1”的“android.jar” - 路径“Android 依赖项”的 odata4j-0.7.0-clientbundle.jar 和 android-support-v4.jar 仅此而已。

请，不知道这种行为的原因是什么。

谢谢和最好的问候

# java - JTextField 和 JTextArea

> ID：12714664
> 
> 赞同：4
> 
> 时间：2012-10-03T18:33:37.213
> 
> 标签：java

**JTextField 和 JTextArea 有什么区别？这可以在一个班级中与这两个班级一起工作吗？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T18:35:35.220

总之，JTextField 是一个单行文本字段，而 JTextArea 可以跨越多行。

文档中清楚地解释了这些差异：[JTextArea](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html "文本区域") *和* [JTextField](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)

当然，您可以在同一个班级中使用它们。他们之间的冲突将为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:37:20.930

对于此类问题，您始终可以参考[javadocs 。](http://docs.oracle.com/javase/7/docs/api/)

您可以在一个班级中同时使用两个班级。主要区别在于大小，因为 JTextField 是一行，而 JTextArea 有列和行。（这适合大量信息）

# matlab - 下面的代码有什么作用？示例图像转换为 ycbcr

> ID：12714665
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:33:37.037
> 
> 标签：matlab, image-processing

```
nspace1=rgb2ycbcr(ims);
nspace2= rgb2ycbcr(imt);
ms=double(nspace1(:,:,1));
mt=double(nspace2(:,:,1));
m1=max(max(ms));
m2=min(min(ms));
m3=max(max(mt));
m4=min(min(mt));
d1=m1-m2;
d2=m3-m4;

% Normalization
dx1=ms;
dx2=mt;
dx1=(dx1*255)/(255-d1);
dx2=(dx2*255)/(255-d2);
[mx,my,mz]=size(dx2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:06:18.337

您正在以完全相同的方式处理两个图像（`ims`和），我将（尝试）描述每行的作用。`imt`如果您自己查看文档/使用您的大脑/[逐步执行代码](http://www.mathworks.nl/help/simulink/ug/debugging-a-matlab-function-block.html)并检查每一步的变量，您当然也可以自己找到它。

```
nspace1=rgb2ycbcr(ims);
ms=double(nspace1(:,:,1)); 
```

来自[rgb2ycbcr 文档](http://www.mathworks.nl/help/images/ref/rgb2ycbcr.html)：

> ycbcrmap = rgb2ycbcr(map) 将 map 中的 RGB 值转换为 YCbCr 颜色空间。map 必须是 M×3 数组。ycbcrmap 是一个 M×3 矩阵，包含 YCbCr 亮度 (Y) 和色度 (Cb 和 Cr) 颜色值作为列。

因此`nspace1`包含图像中每个 RGB 输入的 YCbCr 值`ims`。第二行提取每个像素，即 YCbCR 三元组的第一个元素，即您可以在上面阅读的亮度。

```
m1=max(max(ms));
m2=min(min(ms)); 
```

第一个`max`找到每一列的最大值，所以它给你留下一行。第二个`max`找到该结果行的最大值，从而为您留下整个矩阵的绝对最大值。同样的事情`min(min(...))`。

```
d1=m1-m2; 
```

然后是亮度的数值范围。

```
dx1=ms;
dx1=(dx1*255)/(255-d1); 
```

正如评论所暗示的那样，应该是规范化，但它肯定看起来不像规范化。我认为这应该是：

```
dx1 = (ms-m2)*255/d1; 
```

它将每个亮度值转换为 0 到 255 之间的值。

```
[mx,my,mz]=size(dx2); 
```

我把最后一个留给你自己弄清楚，应该不会那么难。

# php - 将字符串转换为php数组，jquery在表单上序列化

> ID：12714667
> 
> 赞同：0
> 
> 时间：2012-10-03T18:33:55.083
> 
> 标签：php, jquery

我有一个表单，并且正在使用以下方式将数据发送到后端 php 脚本：

```
var fields = $('#myform').serializeArray(); 
```

然后做一个帖子。我的一些输入被命名为数组，所以当数据被发布时，我有一个如下所示的数组。如何将属性片段转换回一个带有子数组的属性数组？

```
[1]=>
  array(2) {
    ["name"]=>
    string(20) "attribute[26][higher]"
    ["value"]=>
    string(2) "21"
  }
  [2]=>
  array(2) {
    ["name"]=>
    string(20) "attribute[27][higher]"
    ["value"]=>
    string(2) "20"
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:44:54.457

您可以使用`eval`

形成 PHP 文档

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

```
$array = array(array("name" => "attribute[26][higher]","value" => "21"),array("name" => "attribute[27][higher]","value" => "20"));
foreach ( $array as $value ) {
    $value["name"]  = str_replace(array("[","]") ,  array("['","']"),  $value["name"]);
    eval("\$" . $value["name"] . " =  array() ;" );
    eval("\$" . $value["name"] . " = " . $value["value" ] . ";" );
}

var_dump($attribute[26]['higher'] , $attribute[27]['higher']); 
```

输出

```
int 21
int 20 
```

# c# - foreach 是否更喜欢 IEnumerable 或 IEnumerator

> ID：12714679
> 
> 赞同：2
> 
> 时间：2012-10-03T18:34:33.640
> 
> 标签：c#, foreach, iterator

如果集合或列表同时实现 IEnumerable<T> 和 IEnumerator<T>，那么 foreach 使用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:35:52.087

[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)有一个方法`GetEnumerator`- 这将是一个[`IEnumerator<T>`](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)，这是用于迭代的（使用`MoveNext`方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T18:37:43.690

你根本不能使用 a `foreach`on an `IEnumerator<T>`。

您只能`foreach`覆盖具有`GetEnumerator`方法的对象（无论它是否实现`IEnumerable`.

因此，要回答您的问题，它使用`GetEnumerator`来自 的方法`IEnumerable<T>`。

证明很简单。试着编译这个：

```
IEnumerator<char> str = "asdf".GetEnumerator();
foreach (char c in str) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:43:52.880

另请注意，这不是集合实现 IEnumerable/IEnumerator 以便在 foreach 循环中使用的要求。Foreach 使用此处描述的基于模式的方法[Eric Lippert 博客](http://blogs.msdn.com/b/ericlippert/archive/2011/06/30/following-the-pattern.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T19:44:02.300

另一个（更相关的）问题是：如果一个类型`IEnumerable<>`显式实现并且同时具有`GetEnumerator()`合适的常规公共方法怎么办？答：那么使用public方法。

如果该类型*同时实现* `IEnumerable<Foo>` *and* `IEnumerable<Bar>`怎么办？然后，如果没有常规的实例方法`GetEnumerator()`（如果两个接口都显式实现，就会发生这种情况），就会出现编译时错误。

# spring - Spring MVC 控制器继承覆盖处理程序方法

> ID：12714681
> 
> 赞同：1
> 
> 时间：2012-10-03T18:34:45.103
> 
> 标签：spring, inheritance, spring-mvc, controller

我有一个为 /session_auth_uri 配置了会话身份验证的控制器，如下所示：

```
@Controller
@RequestMapping("/session_auth_uri")
public class BaseController {

  @RequestMapping(value = "/do", method = RequestMethod.POST, consumes =    "application/json", produces = "application/json")
  @ResponseBody
  public Result do(@RequestBody Query query) throws SomeException {
    return new Result();
  }

  @RequestMapping(value = "/exec", method = RequestMethod.POST, consumes =    "application/json", produces = "application/json")
  @ResponseBody
  public Result exec(@RequestBody Query query) throws SomeException {
    return new Result();
  }
} 
```

我想扩展 BaseController 以重用 1 个处理程序方法 => do(...) （基本身份验证用于 /basic_auth_uri）：

```
@Controller
@RequestMapping("/basic_auth_uri")
public class SubclassController extends BaseController {
} 
```

问题是我希望在访问/basic_auth_uri/exec 时为 exec(...) 处理程序方法返回 HttpStatus.NOT_IMPLEMENTED。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:04:54.497

除了在 SubclassController 中覆盖它之外，想不出任何其他方法：

```
@Controller
@RequestMapping("/basic_auth_uri")
public class SubclassController extends BaseController {
  @RequestMapping(value = "/exec", method = RequestMethod.POST, consumes =    "application/json", produces = "application/json")
  @ResponseStatus(HttpStatus.NOT_IMPLEMENTED)
  public Result exec(@RequestBody Query query) throws SomeException {
    return null;
  }

} 
```

# sql - 在同一个表上加入多个过滤选择查询？

> ID：12714682
> 
> 赞同：4
> 
> 时间：2012-10-03T18:34:45.003
> 
> 标签：sql

我是一个完整的 sql 菜鸟，所以我为接下来的 sql 屠戮道歉......这是我正在尝试做的伪代码：

```
count( 
   join( 
      select( * from table X where a='stuff' and b='junk' ) as X1
      select( * from table X where a='arg' and b='blarg' ) as X2
      select( * from table X where a='narf' and b='foo' ) as X3
   ) where X1.c = X2.c = X3.c
) 
```

是否有可能在一个查询中获得此结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:38:55.520

```
select count(*) from 

(select * from table X where a='stuff' and b='junk') x1

join

(select * from table X where a='arg' and b='blarg' ) x2

on x1.c=x2.c

join

( select * from table X where a='narf' and b='foo' ) X3

on x2.c=x3.c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:45:30.613

如果我要猜你真正想要什么，那就是“c”的计数，它在`a`and`b`列中具有所有三个条件。如果是这种情况，则以下工作：

```
select count(*)
from (select c
      from table X
      group by c
      having sum(CASE WHEN a = 'stuff' AND b = 'junk' THEN 1 ELSE 0 END) > 0 and
             sum(CASE WHEN a = 'arg' AND b = 'blarg' THEN 1 ELSE 0 END) > 0 and
             sum(CASE WHEN a = 'narf' AND b = 'foo' THEN 1 ELSE 0 END) > 0
     ) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:39:36.717

```
SELECT c,
       SUM(CASE WHEN a = 'stuff' AND b = 'junk' THEN 1 ELSE 0 END) AS X1,
       SUM(CASE WHEN a = 'arg' AND b = 'blarg' THEN 1 ELSE 0 END) AS X2,
       SUM(CASE WHEN a = 'narf' AND b = 'foo' THEN 1 ELSE 0 END) AS X3
    FROM table_X
    GROUP BY c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:55:15.203

> 从表 x

你想要三组记录，每组都是从同一个表中选择的 X

*   X1 过滤表 X 中 a='stuff' 和 b='junk' 的记录
*   X2 过滤表 X 中 a='arg' 和 b='blarg' 的记录
*   X3 过滤表 X 中 a='narf' 和 b='foo' 的记录

到目前为止，我们有三个“逻辑视图”，它们是 X 的独立子集，分别称为 X1、X2、X3

> 加入 ( ... ) 其中 X1.c = X2.c = X3.c

解释可能有点模棱两可，令人困惑，让我们试试：

从字面上看：c 是表 X 的一个字段的名称

*   案例A： c 是一个键（唯一约束），那么 X 的每条记录（因此 X1,X2,X3）都有唯一的 c 值，因此不存在 X1.c = X2.c = X3.c 的任何记录; 这种情况下的解决方案就像 ==> SELECT 0 一样简单
*   case B：c 不是键，而是可能包含重复值的字段；我们可以将这种情况分成两种（或更多）可能的解释
    *   案例 B1：我们只想考虑和计算 X1.c = X2.c = X3.c 的那些记录；这包括来自子集 X1、X2、X3 的仅那些在所有其他子集中具有 c 值的记录。
    *   案例 B2：我们要计算 X1.c、X2.c、X3.c 的所有可能组合

所有这些情况似乎都特别奇怪，所以我提出了另一种解释，一种最常见的情况，但并不完全遵循连接的概念：

我们要计算 X1,X2,X3 的并集；
在这种情况下，解决方案是：

```
SELECT COUNT(*) FROM X
WHERE (a='stuff'AND b='junk') 
   OR (a='arg'  AND b='blarg')
   OR (a='narf' AND b='foo') 
```

**警告**：我完全理解“联合”与“加入”完全不同，因此如果你真的是指加入，这种解释可能是完全错误的，但探索这种含义的可能性似乎很有用。

# android - Android - 动画后将LinearLayout移动到位置

> ID：12714686
> 
> 赞同：0
> 
> 时间：2012-10-03T18:35:04.863
> 
> 标签：android, animation, transform, android-linearlayout, margin

我正在使用此动画为 LinearLayout 设置动画，但我无法让它移动动画结束的方向...

```
TranslateAnimation intro = new TranslateAnimation( Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.0f, Animation.RELATIVE_TO_SELF, 0.8f ); 
```

我现在有这段代码可以让它到正确的位置，但它不起作用：

```
myLinearLayout.setLayoutAnimationListener(
        new AnimationListener() {public void onAnimationEnd(Animation animation) {
                float pixelsInDP = (float) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());

                LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams( LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT );

                int marginLeft = (int) (41 * pixelsInDP);
                int marginTop = (int) ((letter1+3) * pixelsInDP);

                layoutParams.setMargins( marginLeft, marginTop, 0, 0);

                myLinearLayout.setLayoutParams(layoutParams);
                myLinearLayout.invalidate();
            } 
```

myLinearLayout 是 LinearLayout，但由于某种原因，linearlayout 的位置不会改变...... **我在这里做错了什么？**

编辑：经过更多的测试，我发现 onAnimationEnd 事件根本没有被触发......什么......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:02:24.553

原来我不得不改变

```
myLinearLayout.setLayoutAnimationListener 
```

到

```
intro.setAnimationListener 
```

哦，太合乎逻辑了……嗯。现在我只需要修复这些边距：P

# java - 已弃用的 ManagedQuery() 问题

> ID：12714701
> 
> 赞同：116
> 
> 时间：2012-10-03T18:36:41.137
> 
> 标签：java, android, deprecated

我有这个方法：

```
public String getRealPathFromURI(Uri contentUri) {
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(contentUri, proj, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

不幸的是，编译器向我显示了一个问题：

```
Cursor cursor = managedQuery(contentUri, proj, null, null, null); 
```

因为`managedQuery()`已弃用。

我怎么能不使用重写这个方法`managedQuery()`？

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2012-10-03T18:45:17.370

您可以将其替换为`context.getContentResolver().query`and `LoaderManager`（您需要使用兼容性包来支持 API 版本 11 之前的设备）。

但是，您似乎只使用了一次查询：您可能甚至不需要它。也许这会起作用？

```
public String getRealPathFromURI(Uri contentUri) {
    String res = null;
    String[] proj = { MediaStore.Images.Media.DATA };
    Cursor cursor = getContentResolver().query(contentUri, proj, null, null, null);
    if(cursor.moveToFirst()){;
       int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
       res = cursor.getString(column_index);
    }
    cursor.close();
    return res;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T12:55:53.093

```
public void getBrowserHist(Context context) {
        Cursor mCur = context.getContentResolver().query(Browser.BOOKMARKS_URI,
                Browser.HISTORY_PROJECTION, null, null, null);
        mCur.moveToFirst();
        if (mCur != null && mCur.moveToFirst() && mCur.getCount() > 0) {
            while (mCur.isAfterLast() == false) {
                Log.e("hist_titleIdx",
                        mCur.getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
                Log.e("hist_urlIdx",
                        mCur.getString(Browser.HISTORY_PROJECTION_URL_INDEX));
                mCur.moveToNext();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2014-04-01T08:04:59.273

您需要初始化光标，因为它将在方法开始之前或其他地方关闭

```
cursor = null;
public void method(){
// do your stuff here 
cursor.close();
} 
```

# php - SQL查询时间戳日期字段并按日期分组所有结果

> ID：12714702
> 
> 赞同：0
> 
> 时间：2012-10-03T18:36:56.860
> 
> 标签：php, postgresql

我正在尝试创建一个列表，但我被难住了。所以我有一个带有 start_date 字段的表，其中包含日期的 Unix 时间戳。我正在尝试查询表并从时间戳中提取日期，然后具有该日期的任何结果都将低于该日期，依此类推。几乎就像在列表视图中带有事件的日历。

我正在用 PostgreSQL 和 PHP 做这个。不知道如何编写该查询。但是，我看到 PostgreSQL 的 extract、date_part 等函数，仍然不确定如何获得正确的查询。

任何帮助或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:00:48.627

`date('d M Y', $timestamp);`应该为您提供该特定 UNIX 时间戳的日期、月份和年份。

如果您想将它放在列表视图中，`select`请按字段（升序或降序）对数据库运行查询`start_date`，然后在 $row 中获取它。然后在一个一个处理记录的循环中，执行以下操作：

```
$prevDate = ' ';
$currentDate = ' ';

for each ( $row ) //however it goes
{
    $currentDate = date('d M Y',$row['start_date']);
    if($prevDate != $currentDate)
    {
        echo "Day : ".$currentDate;
    }
    echo $row['other-fields'];
    $prevDate = $currentDate;
 } 
```

但是，PostgreSQL 支持`date`数据类型，使用它应该可以简化您的操作。

[http://www.postgresql.org/docs/8.2/static/datatype-datetime.html](http://www.postgresql.org/docs/8.2/static/datatype-datetime.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:11:13.463

`date`从 Unix 纪元中提取 a 的最简单/最快的方法：

```
SELECT to_timestamp(my_epoch_ts)::date; 
```

例子：

```
SELECT to_timestamp(1349118398)::date 
```

结果：

```
2012-10-01 
```

那是利用该[`to_timestamp()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)函数，然后是[迄今为止的演员：`::date`](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-TYPE-CASTS)。

更多详细信息和链接在[此最近相关答案](https://stackoverflow.com/a/12642239/939860)的末尾。

# qt - PyQt QComboBox 下拉方向

> ID：12714703
> 
> 赞同：4
> 
> 时间：2012-10-03T18:37:04.663
> 
> 标签：qt, pyqt, pyqt4, pyside

我正在开发一个 QComboBox 位于窗口底部的应用程序。根据我有限的理解，我认为 Qt 应该根据弹出窗口的可用空间量自动计算下拉列表的方向。但是，就我而言，下拉方向仍处于默认状态（显示在框下方），因此隐藏且无法访问。有人可以帮助我理解为什么会发生这种情况，或者是否有办法强制 Qt 在 QComboBox 上方显示弹出窗口？

### - 编辑 -

下图显示了问题和我的修复。我仍然不确定是否有手动设置方向的方法，但在这种情况下，我不再需要它了。 ![下拉方向错误](../Images/81bcf15638e93e9431e5264cc45c0ec7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:00:21.120

该主题讨论的是同一主题，请查看.http://qt-project.org/forums/viewthread/9111。是的，通过重新实现 showPopup() 你可以做到这一点，我认为。

# java - 带有 size() 的 Iterable 的成语 - 在 Iterable 和 Collection 之间？

> ID：12714709
> 
> 赞同：1
> 
> 时间：2012-10-03T18:37:29.027
> 
> 标签：java, collections, size, idioms, iterable

A`Collection`是`Iterable`具有大小的，您可以检查其包含情况，并添加或删除元素。我有继承`Iterable`并具有大小的对象，但没有集合的其他功能。我不想`Collection`使用“不支持”异常来实现该方法。

是否有一些常用的中间类`Iterable`，`Collection`我可以让我的对象扩展？像“SizedIterable”这样的东西？或者，更一般地说，一个合适的成语？

注意：是的，它确实无法检查成员资格，但有大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:39:29.470

你为什么不创建自己的接口扩展`Iterable`？这样您就可以定义要添加到自定义对象的功能。

可能是这样的

```
public interface SizedIterable<T> extends Iterable<T> {
    int size();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:55:28.067

简短的回答是否定的。

长答案：是否需要此接口？你打算用它做什么？除非您有许多具有相同（相当不寻常）属性的不同类，以及一些依赖它的方法，否则我想不出对这个接口有任何明显的需求。

您是否打算将此对象传递给标准库函数/类？这些方法实际上会调用 size() 吗？

如果是这样，您可能只需要实现 Collection，然后适当地对 add()/remove()/contains()/etc 进行无操作。

如果没有，并且您确实需要这个接口，那么扩展 Iterable 是一个好方法。

例如

```
public interface SizedIterable<T> extends Iterable<T> {
    public int size();
} 
```

# visual-studio-2010 - Visual Studio 2010 局部变量历史

> ID：12714710
> 
> 赞同：3
> 
> 时间：2012-10-03T18:37:29.947
> 
> 标签：visual-studio-2010, history

我正在调试一个具有多个嵌套循环的进程，这些循环会更改几个不同的局部变量。

我可以通过一步一步来观看这些……一次一个迭代，但这很乏味，而且我正在迷失自己的位置。我根本没有时间每次都写下每个变量。

有没有办法可以查看局部变量的历史？插件？如果没有，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:29:56.397

可能对您的情况没有帮助，但[Debugger Canvas](http://msdn.microsoft.com/en-us/devlabs/debuggercanvas.aspx)非常简洁。它直观地向您显示调用链，并允许您“通过每次调用显示一个气泡来了解递归调用的概述”......检查一下:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:59:39.190

[`Debug.WriteLine`](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.writeline.aspx)用or记录循环内的变量怎么样[`Trace.WriteLine`](http://msdn.microsoft.com/en-us/library/149a051x.aspx)？然后您可以在之后检查结果。

如果您只对运行中某些点的值感兴趣，则可以使日志记录依赖于布尔变量的值，在调试器中手动打开和关闭它。

# objective-c - 更新文件而不将其分配到内存中 - IOS

> ID：12714712
> 
> 赞同：2
> 
> 时间：2012-10-03T18:37:36.453
> 
> 标签：objective-c, memory, malloc, fopen, fwrite

我正在尝试顺序覆盖填充 0 的现有文件上的字节。

我只是这样打开文件：

```
File *filePointer = fopen(filePath, "rb+"); 
```

然后我以这种方式写入文件：

```
fwrite(buffer, 1, length, filePointer); 
```

其中 buffer 的类型是 (const uint8_t *)，length 是它要写入的缓冲区的大小。

我面临的问题是，对于大文件（例如 500MB），我得到一个 malloc 错误：

```
 malloc: *** mmap(size=570056704) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug 
```

我认为这是因为 fwrite 试图在内存中加载对于 iphone ram 来说太大的整个文件（相同的代码在模拟器中工作！！）。使用较小的文件，它也可以在真实设备上完美运行！

我可以更新文件而不将它们加载到内存中吗？

谢谢你

安德烈亚

# android - 项目@Override 错误

> ID：12714715
> 
> 赞同：0
> 
> 时间：2012-10-03T18:37:39.457
> 
> 标签：android

> **可能重复：**
> [@Override 注释错误（android 首选项）](https://stackoverflow.com/questions/4761888/override-annotation-error-android-prefs)

我已经将一个项目导入到我的 Eclipse 中并打开它，但是它显示了很多错误（所有错误结果都指向：`remove @Override annotation`。但问题是该项目太大并且周围写了很多 @Override，所以有没有最快的删除注释`ALL`的方法？`@Override`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:40:52.233

将该项目的合规级别更改为 1.6 应该可以解决这些错误：

```
Right click the project > Properties > Java Compiler > Change compiler compliance to 1.6 > Apply 
```

# c# - 使用 async/await 重写多线程等待

> ID：12714717
> 
> 赞同：5
> 
> 时间：2012-10-03T18:37:45.863
> 
> 标签：c#, multithreading, async-await, c#-5.0

我们有一个在后台运行任务列表的网络服务功能。完成所有任务后，它会返回。我重新审视了 C# 5 的函数。我设法使以下代码段正常工作：

```
var result = new List<int>();
var tasks = new List<Task<int>>();

foreach (var row in rowlist)
    tasks.Add(Task.Factory.StartNew(() => DoWork(row)));
foreach (var task in tasks)
    result.Add(task.Result); 
```

`task.Result`等待单个任务完成。我已经通过向该`DoWork`方法添加 3 秒延迟并验证它是否在 5 秒内完成，对 10 个任务的列表进行了测试。

现在我尝试使用新`async / await`语法重写函数。但我似乎无法让它工作。如果它编译，它会同步运行，通过添加等待来验证。

关于如何使用重写上述代码段的任何想法`async / await`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T18:41:51.740

我会这样写：

```
var tasks = rowlist.Select(row => Task.Run(() => DoWork(row)));

var results = (await Task.WhenAll(tasks)).ToList(); 
```

基本上，您仍然按照以前的方式创建任务（不使用`await`），因为您希望它们立即开始。然后，您可以等待它们全部异步完成（通过`await Task.WhenAll`），然后立即提取结果（因为您知道它们都已完成）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T19:30:04.933

根据 Reed Copsey、Servy 和 Stephen Cleary 的回答和评论，我已经改进了这个解决方案：

```
var results = rowlist
    .Select(row => Task.Run(() => DoWork(row)))
    .ToList()
    .Select(t => t.Result); 
```

第二个`Select`将等待任务完成。我`ToList()`在两者之间添加了一个以防止流式传输，但没有它似乎可以工作。

# android - Android强制标准键盘

> ID：12714718
> 
> 赞同：0
> 
> 时间：2012-10-03T18:37:50.970
> 
> 标签：android, keyboard, android-edittext

我正在写一个拼写测验应用程序。我希望用户输入猜测的 EditText 不提供任何拼写提示或建议的单词。我有

```
 android:inputType="textNoSuggestions|textPhonetic" 
```

设置，但我已经看到使用一些键盘（一个是触摸板），你仍然会得到单词提示。顺便说一句，我也试过没有 textPhonetic - 结果相同。另一方面，标准默认键盘看起来确实遵循 inputType。有没有办法强制 app/editText 使用默认键盘？如果没有，有没有办法实用地判断用户是否将键盘设置为非标准？或者有没有办法判断特定用户的键盘是否会遵守 textNoSuggestions 设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T19:24:20.950

> 有没有办法强制 app/editText 使用默认键盘？

没有。此外，Android 中没有单一的“默认”键盘——它可以而且确实因设备而异。

> 如果没有，有没有办法实用地判断用户是否将键盘设置为非标准？

我认为不会有可靠的方法来做到这一点。请记住，用户不仅可以将其默认键盘更改为某些第三方应用程序，还可以随时更改输入法。

> 或者有没有办法判断特定用户的键盘是否会遵守 textNoSuggestions 设置？

不，对不起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:44:27.403

或者，您可以实现自己的应用程序内输入解决方案，例如各种徽标测验应用程序。您基本上可以在应用程序中创建自己的自定义键盘。有关更多详细信息，请参阅此处的答案：[Android 上的应用程序中内置的自定义“键盘”](https://stackoverflow.com/questions/3196511/android-custom-keyboard-built-in-an-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T02:28:04.560

将输入类型设置为“visiblePassword”适用于“textNoSuggestions”不适用于 swyft of fleksy 之类的键盘。

# xna - XNA draw : 在整个游戏中使用一个 spritebatch

> ID：12714720
> 
> 赞同：3
> 
> 时间：2012-10-03T18:37:59.280
> 
> 标签：xna, spritebatch

我正在开发 XNA 游戏。这是我对架构小心的时候了。直到今天，我一直都是这样实现自己的 draw 方法的：

```
public void Draw(SpriteBatch sb, GameTime gameTime)
{
    sb.Begin();
    // ... to draw ...
    sb.End();
} 
```

我正在挖掘 DrawableGameComponent 并看到 Draw 方法以这种方式出现：

```
public void Draw(GameTime gameTime)
{
    // ...
} 
```

首先，我知道 SpriteBatch 可以在 Begin 和 End 之间收集许多 Texture2D，以便对它们进行排序或使用相同的效果进行绘制。

我的问题是关于通过 SpriteBatch 的性能和成本。在 DrawableGameComponent 中，如果 spritebatch 是公共的，则可以调用游戏对象的 spritebatch。

建议什么，xna-game程序员应该做什么？

谢谢指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-30T14:13:07.903

如果您偶然发现了这个问题，您可能正在寻找一个不错的通用解决方案。我建议你看看这个：

[https://gamedev.stackexchange.com/questions/14217/several-classes-need-to-access-the-same-data-where-should-the-data-be-declared/14232#14232](https://gamedev.stackexchange.com/questions/14217/several-classes-need-to-access-the-same-data-where-should-the-data-be-declared/14232#14232)

我觉得有必要纠正这个问题，因为*“最好的方法是将其作为论据传递。其他任何事情都是令人费解的。”* 根本**不正确**。

就我个人而言，我现在在我的 GameBase 类中这样做：

```
 protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        SpriteBatch = new SpriteBatch(GraphicsDevice);
        this.Services.AddService(typeof(SpriteBatch), SpriteBatch);
    } 
```

现在，由于您在 Game 类的 Initialize 方法中添加 DrawableGameComponents，您将能够调用

```
 this.Game.Services.GetService(typeof(SpriteBatch)) 
```

我会说这是解决问题的最干净的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T10:53:04.437

的严重缺点之一`DrawableGameComponent`是您被锁定在其提供的方法签名中。虽然没有什么“错误”，但就其本身而言，`DrawableGameComponent`不要将其视为“*一个真正的架构*”。您[最好](https://gamedev.stackexchange.com/a/9209/288)将其视为可能[架构](https://stackoverflow.com/a/5459955/165500)的示例。

如果您发现自己需要将 a `SpriteBatch`（或其他任何东西）传递给“游戏组件”的 draw 方法 -**最好的方法*是*将其作为参数传递**。其他任何事情都是令人费解的。

显然这意味着你不能使用 XNA 提供的`GameComponent`系统，你必须自己做选择。但这几乎是微不足道的：在最基本的层面上，它只是一些具有适当虚拟方法的基本类型的列表。

* * *

当然，如果你必须使用`GameComponent`——或者你的游戏非常简单（例如：原型）以至于你并不真正关心架构——那么你基本上可以使用*任何*你喜欢的方法来获得`SpriteBatch`你的绘图方法。他们都有缺点。

下一个在架构上最健壮的方法可能是将您的`SpriteBatch`实例传递给每个组件的构造函数。这使您的组件与游戏类分离。

另一方面，如果你把建筑抛在脑后，我建议你做你的`MyGame.spriteBatch`field `public static`。这是允许在任何地方访问它的最简单方法。它很容易实现，并且在以后/如果需要时易于清理。

* * *

回答您关于性能的问题：与传递有关的任何事情`SpriteBatch`对性能的影响几乎可以忽略不计（假设调用`Draw`/ `Begin`/的顺序`End`保持不变）。别担心。

（如果您`SpriteBatch whatever`在代码中看到，它代表一个引用。引用是一个 32 位值（在 32 位程序中，所有 XNA 游戏都是）。它的大小与 an`int`或 a相同`float`。它非常小而且非常便宜传递/访问/等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T19:32:33.670

如果`DrawableGameComponent`应该是父级的一部分`SpriteBatch`，那么只需通过构造函数将其传入并将其存储在私有成员中（或者如果您愿意，将其作为属性公开）。

如果您愿意，您也可以将 公开`SpriteBatch`为您的类的属性`Game`，就像您建议的那样，但是每次您引用`this.Game`时，您都需要将它转换为您的特定`Game`类类型。

```
((MyGame)this.Game).SpriteBatch.Draw(...) 
```

或者你可以只`DrawableGameComponent`创建一个新的`SpriteBatch`. 这没有什么问题（据我所见）。我想这取决于您将创建多少`DrawableGameComponent`s 以及多久创建一次。

还可以浏览[搜索`DrawableGameComponent`](https://stackoverflow.com/search?q=DrawableGameComponent&submit=search)结果——那里有很多很好的建议。

# authentication - Trac 中没有管理按钮

> ID：12714721
> 
> 赞同：1
> 
> 时间：2012-10-03T18:38:14.227
> 
> 标签：authentication, admin, trac

我已经安装`Trac .10.5`、配置了`trac.htpasswd`文件，并且能够登录并获得`view/create`票证。

问题是我目前无法管理票证组件，例如出现在`New Ticket`.

从命令行，我发出了以下命令：

```
trac-admin /foo/bar/trac/ permission add myusername TRAC_ADMIN 
```

用户“myusername”列在 中`/foo/bar/trac/conf/trac.htpasswd`，我可以使用该帐户成功登录。

为了访问系统配置区域，我还缺少另一个步骤吗？（例如，设置版本号）

**编辑：** 我发现 .10.* 及以下版本默认没有安装 Web 管理功能。 [http://trac.edgewall.org/wiki/WebAdmin](http://trac.edgewall.org/wiki/WebAdmin)

我下载了插件源：

```
svn export http://svn.edgewall.com/repos/trac/plugins/0.10/webadmin/ 
```

然后运行`setup.py`，生成了一个`dist/TracWebAdmin-0.1.2dev-py2.6.egg`文件。

然后我发出

```
easy_install TracWebAdmin-0.1.2dev-py2.6.egg. 
```

这是输出：

```
Processing TracWebAdmin-0.1.2dev-py2.6.egg
removing '/usr/lib/python2.6/site-packages/TracWebAdmin-0.1.2dev-py2.6.egg' (and everything under it)
creating /usr/lib/python2.6/site-packages/TracWebAdmin-0.1.2dev-py2.6.egg
Extracting TracWebAdmin-0.1.2dev-py2.6.egg to /usr/lib/python2.6/site-packages
TracWebAdmin 0.1.2dev is already the active version in easy-install.pth

Installed /usr/lib/python2.6/site-packages/TracWebAdmin-0.1.2dev-py2.6.egg
Processing dependencies for TracWebAdmin==0.1.2dev
Finished processing dependencies for TracWebAdmin==0.1.2dev 
```

我的`trac/conf/trac.ini`文件有这个部分：

```
[components]
webadmin.* = enabled 
```

我重新启动了 httpd 服务器（trac 使用 Apache），但仍然没有 Admin 按钮。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T22:39:34.913

你有点太急于求教了。在这里引用我最近对 ​​trac-users 邮件列表的回复：

这很可能是一个权限问题，并且会在任何更新的 Trac 环境中继续存在。执行类似 trac-admin 权限添加 TRAC_ADMIN

授予管理员用户帐户的完全权限，该帐户可用于管理任务。如其他地方所知，您应该为您的日常工作创建一个特权较低的帐户，以便仅使用 Trac。

*但是请注意：*因为你有Python2.6，所以选择Trac-1.0，在这个当前稳定版本之前的任何东西都不敢用于新项目，真的。Trac-0.10 早就被放弃了，0.11 自 2010 年以来也没有变化。

您几乎不会遇到任何可能遇到的问题，而且您会错过一大堆已经引入的强大功能。Trac 0.11 在许多方面都有重大的 API 更改，0.12 支持完整的 i18n，如果你关心的话，1.0 就在边缘，支持新的 db access API 并保留尚未更新插件的兼容性代码（说实话很多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T09:52:26.277

我在 0.11.x 中遇到了类似的问题（减去插件安装），结果证明我通过 shell 登录的用户帐户不是拥有安装的用户帐户。这意味着我所做的更改没有正确的权限 - 要求所有 trac-admin 更改都由安装所有者进行。

假设安装 Trac 的用户是“jim”，我以“bob”身份登录以在交互模式下使用 trac-admin。将预先存在的权限重新应用到 a 将导致 Python 抛出错误并将您踢出 trac-admin。您必须先删除权限，然后以其他 shell 用户身份重新应用它。

解决方案是：

1.  通过 shell 以“bob”身份重新登录（例如“ssh -l bob trac.url.com”）

2.  trac-admin 路径/到/我的/项目

3.  权限删除 TRAC_ADMIN

4.  退出 (trac-admin)

5.  退出（ssh）

6.  通过 shell 以“jim”身份登录（例如“ssh -l jim trac.url.com”）

7.  trac-admin 路径/到/我的/项目

8.  权限添加 TRAC_ADMIN

9.  退出 (trac-admin)

10.  退出（ssh）

现在，当您通过 Web 浏览器登录 Trac 时，希望您应该在右上角看到 Admin 按钮。

# c# - 为对象生成标识符，以便可以将它们添加到我创建的哈希表中

> ID：12714726
> 
> 赞同：1
> 
> 时间：2012-10-03T18:38:25.720
> 
> 标签：c#, hash

我有一个哈希表基类，我通过派生它来创建不同类型的哈希表。我只允许它接受实现我的 IHashable 接口的对象。例如 -

```
class LinearProbingHashTable<T> : HashTableBase<T> where T: IHashable
{
...
...
...
}

interface IHashable
{
    /**
     * Every IHashable implementation should provide an indentfying value for use in generating a hash key.
     */
    int getIdentifier();
}

class Car : IHashable
{
    public String Make { get; set; }
    public String Model { get; set; }
    public String Color { get; set; }
    public int Year { get; set; }

    public int getIdentifier()
    {
        /// ???
    }
} 
```

任何人都可以建议一种为汽车生成标识符的好方法，哈希函数可以使用该标识符将其放入哈希表中吗？

我实际上正在寻找一种通用解决方案来为任何给定的类生成一个 id。我想为所有类 HashableObject 提供一个基类，它实现了 IHashable 及其 getIdentifier 方法。所以我可以从 HashableObject 派生，它会自动为任何实例提供标识符。这意味着我不必为添加到哈希表的每个对象编写不同的 getIdentifier 方法。

```
public class HashableObject : IHashable
{
  public int getIdentifier()
  {
    // Looking for code here that would generate an id for any object...
  }
}

public class Dog : HashableObject
{
  // Dont need to implement getIdentifier because the parent class does it for me
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:43:15.157

您应该使用默认`GetHashCode`方法。它可以满足您的一切需求。[文档](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)。它存在于所有对象并且是虚拟的，因此您可以根据需要选择覆盖它。

我假设您知道如何为原始数据类型（整数、浮点数、字符串、非扩展对象和其他一些）生成散列并组合多个散列，所以我不会对细节感到厌烦。

如果您绝对必须编写自己的通用哈希函数，则可以使用[Reflection](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)。您将递归地散列每个数据成员，直到您到达必须手动处理这些情况的原始类型。某些具有非托管数据的数据类型可能会出现问题。特别是，一个示例是 .net 类，它具有指向具有未指定数据结构的类的指针。反射显然不能处理这种情况，也不能散列类的非托管部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:38:02.680

我会将问题一分为二：

1.  如何生成原始类型的哈希码：字符串、整数等。
2.  如何将多个哈希码组合成一个哈希码

使用 (1) 然后 (2) 您可以生成任何类或结构的哈希码。

对字符串做（1）的天真方法是在字符串中添加所有字符的代码：

```
public static int getStringIdentifier(string str)
{
   int result = 0;
   foreach (char c in str) {
     result += (int)c;
   }
   return result;
} 
```

类似的朴素算法可用于其他基本数据类型（最终都是字节数组......）。

做（2）的天真方法是将各种哈希码与XOR简单地结合起来：

```
public int getIdentifier() 
{ 
  return getStringIdentifier(Make) ^ getStringIdentifier(Model) ^ getStringIdentifier(Color);     
} 
```

这些算法会起作用，但不会产生散列码值的良好分布——即会有冲突。

如果你想要更好的算法，你可以看看 .NET 框架是如何做到的——[这里](http://reflector.webtropy.com/default.aspx/4@0/4@0/untmp/DEVDIV_TFS/Dev10/Releases/RTMRel/ndp/fx/src/xsp/System/Web/Util/HashCodeCombiner@cs/1305376/HashCodeCombiner@cs)是内部用于组合多个哈希码的类的源代码，[这里](http://reflector.webtropy.com/default.aspx/DotNET/DotNET/8@0/untmp/whidbey/REDBITS/ndp/clr/src/BCL/System/String@cs/1/String@cs)是`String`该类的源代码——包括`String.GetHashCode()`.

正如你所看到的，它们是上面简单的变体，具有不同的起始值和更复杂的组合。

如果您想要一个适用于不同类的单一方法，方法是使用反射来检测类中包含的所有原始字段，使用原始函数计算它们的哈希码，然后将它们组合起来。不过，这很棘手，而且是特定于 .NET 的——我的偏好是创建处理原始类型的方法，然后为每个类重新定义`getIdentifier()`。

# silverlight - 绑定 KeyDown 事件 Silverlight

> ID：12714727
> 
> 赞同：0
> 
> 时间：2012-10-03T18:38:35.267
> 
> 标签：silverlight, caliburn.micro, key-bindings

我正在尝试让键绑定导致视图模型中的事件。不幸的是，我已经搜索了一段时间，但到目前为止还没有遇到任何有效的解决方案。

这就是我基本上试图实现的：

```
<i:Interaction.Triggers>  
    <i:EventTrigger EventName="createNew">  
       <cal:ActionMessage MethodName="newCustomer" />  
    </i:EventTrigger>  
</i:Interaction.Triggers> 
```

我想要一种方法来提供“热键”以允许用户在视图模型中实现 newCustomer 事件。到目前为止，它甚至还没有进入视图模型。如果我附加 EventName="KeyDown" 如果按下任何键，它会很好地工作，但我试图针对单个键。

我将添加视图模型中的代码如下所示。

```
public void createNew(object sender, KeyEventArgs e)
     { if (e.Key == Key.F9)
         {
             addCustomer();  
         } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:03:38.673

不太确定您使用的是什么控件，但出于示例目的，我将使用文本框...不完全确定这是否会有所帮助，但我希望它会：

风景：

```
<TextBox x:Name="MyTextBox" TextAlignment="Left" FontSize="10" Width="240" cal:Message.Attach="[Event KeyUp]=[Action ExecuteAction($executionContext)]"/> 
```

ViewModel：
* 例如，我将使用“Enter”作为您希望执行操作的单个键。

```
public void ExecuteAction(ActionExecutionContext context)
    {
        var eventArgs = (KeyEventArgs)context.EventArgs;
        if (eventArgs.Key != Key.Enter) return; 
        //Execute Actions...
    } 
```

这应该在您想要的控件上的每个按键上触发代码，如果键不等于您指定的任何内容，它不会做任何事情......

如果我走开，也许我只是没有正确理解这个问题：D

# c# - 从 XML 创建 WPF 表

> ID：12714729
> 
> 赞同：1
> 
> 时间：2012-10-03T18:38:41.397
> 
> 标签：c#, xml, xaml

我想在我的 WPF 应用程序中创建一个从 XML 动态创建的表。我似乎找不到一种直接的方法来动态创建一个。如何实现？

# mongodb - 使用 mongoose 和 mongodb 创建上限集合不起作用

> ID：12714733
> 
> 赞同：0
> 
> 时间：2012-10-03T18:39:00.580
> 
> 标签：mongodb, mongoose

我正在尝试通过 node.js 在 mongoose（@2.7.1，mongo v2.0.6）中创建一个上限集合。

我已经[从 mongoose 文档中复制了基本代码](http://mongoosejs.com/docs/guide.html#capped)来创建一个测试用例：

```
 var schema = new Schema({'test':String},{capped:1024});
    var model = api.db.model('testcapped',schema);
    var data = new model({'test': 'value'});
    data.save(); 
```

这执行没有错误。但是，当我随后使用 mongo shell 时......

```
> db.testcappeds.isCapped();
false 
```

另一方面，如果我在 node.js 中这样做，它可以工作：

```
model.db.db.executeDbCommand({'convertToCapped': 'testcappeds', size: 1024}, function(e,d){}); 
```

换句话说，绕过 mongoose 直接调用“convertToCapped”命令是成功的，但是 mongoose 没有正确地对集合进行封盖。

我错过了什么吗？我应该只使用工作代码手动限制集合，还是会增加性能开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:00:50.413

[这些](http://www.slideshare.net/aaronheckmann/mongoose-v3-the-future-is-bright)幻灯片表明 Mongoose 2.7.1 还不支持上限集合。我建议要么进入本机驱动程序以使集合上限，要么升级到最新的 Mongoose。

# ios - dequeueReusableCellWithIdentifier:forIndexPath: 的 indexPath 用在哪里？

> ID：12714737
> 
> 赞同：40
> 
> 时间：2012-10-03T18:39:16.143
> 
> 标签：ios, uitableview, ios6

Apple 的文档中提到了该`indexPath`参数：

> 指定单元格位置的索引路径。数据源在被要求输入单元格时会收到此信息，并且应该将其传递。该方法使用索引路径根据单元格在表格视图中的位置进行附加配置。

但`register(Class|Nib):forCellReuseIdentifier:`只指定要使用的重用标识符，而不是节或一组索引路径。

我想也许`UITableViewCell`有某种方法可以将它的手放在索引路径上，所以它可以，比如说，如果在一个部分的第一行，它可以绕过它的角落，但我没有看到它。在创建时，它得到的只是它的样式和重用标识符（`initWithStyle:reuseIdentifier:`）；在重用时，它被告知的只是`prepareForReuse`.

鉴于`dequeueReusableCellWithIdentifier:`仍然支持旧的，如果它不能依靠有机会去做的话，它可能会做什么样的基于索引路径的配置呢？

我查看了 Table View Programming Guide，但它自 iOS 5 以来一直没有更新。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-02T16:40:01.683

`dequeueReusableCellWithIdentifier:`和之间最重要的区别`dequeueReusableCellWithIdentifier:indexPath:`是它们是不同的方法！因此，它们可以表现不同，而且确实如此。这与 indexPath 无关，真的；我们只需要一种方法来区分它们。

### 新方式

特别是，如果您调用`dequeueReusableCellWithIdentifier:indexPath:`，这表明您正在使用新的 iOS 6 注册和出队系统。因此，如果您未能注册此标识符，您将收到一个很好的崩溃和一条解释问题的日志消息。这个方法永远不会返回 nil；它总是返回一个单元格，要么通过创建一个新单元格，要么通过重用一个单元格。

### 老路

另一方面，简单明了`dequeueReusableCellWithIdentifier:`是旧的并且必须向后兼容。如果你没有注册这个标识符，它不会抱怨：它只会返回 nil，让你高高在上。你必须自己创建细胞，就像在过去糟糕的日子里一样。

**编辑：**但另请参阅@svena 的答案！新方法 (with `indexPath:`) 具有我不知道的第二个优势：单元格在返回给您时大小正确。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-02T16:08:18.673

根据*WWDC 2012 Session 200 - What's New In Cocoa Touch*，

如果您使用`- dequeueReusableCellWithIdentifier:forIndexPath:`出列单元格，它将是**正确的大小，您将能够**在单元格的`contentView`.

这几乎是来自 UIKit 工程师 Chris Parker 的一句话。

直到 iOS 6，如果你想进行布局调整，你必须继承你的`UITableViewCell`并覆盖。`- layoutSubviews`从封装的角度来看，这可能仍然是更好的解决方案——但是，有时您只需要进行微小的调整，现在您可以`- tableView:cellForRowAtIndexPath:`改为这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T18:31:03.633

我相信它用于调用该`tableView:heightForRowAtIndexPath:`方法（如果存在），允许正确调整单元格的大小。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-31T18:53:42.387

我一直认为 UIKit 会在分组表格视图中将顶部和底部单元格的角变圆，当`UITableViewDelegate`方法：

`- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath`

叫做。但是，知道索引路径并没有多大用处，除非单元格还知道同一部分中有多少行，因此它可以确定它是否是最后一个单元格。

我假设向该方法添加索引路径`dequeueReusableCellWithIdentifier:`是为了提高性能，也许正如@jrturton 建议的不同重用池或只是确定单元格在分组部分中的位置。

据我从 WWDC 视频中记得，iOS 6 中添加了一些额外的方法来支持单元格的重新排序、插入和删除，所以这可能也是这里的因素吗？

# c++ - C ++中用于删除重复项的通用函数

> ID：12714738
> 
> 赞同：1
> 
> 时间：2012-10-03T18:39:18.200
> 
> 标签：c++, arrays, templates

我必须创建一个通用函数来删除 vectorInt 中的所有重复项，这是我创建的具有 getYear 和 getName 函数的类。我不确定如何制作该函数，因为比较了vectorInt，因为Book 与getName 和getYear 进行了比较。Int 在一个级别上进行比较，而 Book 在两个级别上进行比较。

```
template<class T> vector<T> removeDuplicates(vector<T> n){
for(unsigned int i = 0; i < n.size();i++){
   T current = n.at(i);
   for(unsigned int j = i + 1; j < n.size(); j++){
       T compare = n.at(j);
       if(current == compare)
           n.erase(n.begin() + j);  
  }
} 
return n;
} 
```

谢谢您的帮助

编辑：

试过用这个

```
 template <class T> std::vector<T> removeDuplicates(std::vector<T> vec)
 {
 std::sort( vec.begin(), vec.end() );
 vec.erase( std::unique( vec.begin(), vec.end() ), vec.end() );
 return vec;
 } 
```

但是对于书籍，我不断收到错误

```
class Book { 
public:
Book();
Book(std::string, int);
int getYear() const {
return year;
 }
std::string getName() const {
return name;
}
bool operator==(Book const &);

  private:
  std::string name;
  int year;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:46:08.490

纯 STL 版本：

```
#include <algorithm>

template <class T> std::vector<T> removeDuplicates(std::vector<T> vec)
{
    std::sort( vec.begin(), vec.end() );
    std::vec.erase( std::unique( vec.begin(), vec.end() ), vec.end() );
    return vec;
} 
```

您可以通过获取和返回参考而不是副本来提高效率。

^([[代码无耻地从这个问题的答案中获取了信息。](https://stackoverflow.com/questions/1041620/most-efficient-way-to-erase-duplicates-and-sort-a-c-vector)])

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:41:26.357

只要`Book`有一个可用的`operator ==`实现，这应该可以正常工作。如果没有，那么您将需要为这样的运算符创建一个特化`Book`或添加这样的运算符：

```
class Book
{
    // ...
public:
    bool operator==(Book const &);
};

bool Book::operator==(Book const & other)
{
    return getName() == other.getName() && getYear() == other.getYear();
} 
```

请注意，您的遍历中有一个错误 - 如果您最终删除了一个项目，则将跳过下一个项目。考虑改用这个循环：

```
for (vector<T>::iterator i = n.begin; i != n.end(); ++i) {
    for (vector<T>::iterator j = i + 1; j != n.end(); /* */) {
        if (*i == *j) {
            n.erase(j++);
        } else {
            ++j;
        }
    }
} 
```

# zend-framework2 - ZF2 addChild ViewModel 的另一个模块

> ID：12714739
> 
> 赞同：1
> 
> 时间：2012-10-03T18:39:21.003
> 
> 标签：zend-framework2

我试图在我的布局中添加另一个模块的视图，所以我这样做了：

```
$layoutTestdrive = new ViewModel();
$layoutTestdrive->setTemplate('testdrive6');
$view = new ViewModel();
$view->addChild($layoutTestdrive);
return $view; 
```

在我的 module.config.php 中，我这样做了：

```
'Zend\View\Resolver\TemplateMapResolver' => array(
'parameters' => array(
'map'  => array(
    'testdrive6' => __DIR__ . '/../../Testdrive/view/layout/testdrive6.phtml'
        ),
    ),
), 
```

这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:04:11.570

嗨，我认为您需要先使用 forward

```
public function commentAction(){     

    $list = $this->forward()->dispatch('comment_controrller', array('action' => 'list'));
    $add = $this->forward()->dispatch('comment_controrller', array('action' => 'add'));

    $view =  new ViewModel();
    $view->addChild($list, 'list');
    $view->addChild($add, 'add');
    return $view;
} 
```

我希望这个能帮上忙

或者如果您只想更改模板，请参阅[不同控制器的不同布局文件](https://stackoverflow.com/questions/11921329/different-layout-file-for-different-controllerfor)

# c# - 根据在个人或组类型中选择的值更改共享点列表项权限

> ID：12714741
> 
> 赞同：0
> 
> 时间：2012-10-03T18:39:22.947
> 
> 标签：c#, sharepoint, sharepoint-list

我有一个列表，其中列的类型为人员或组。我的要求是需要将另一个列表项的项目权限更改为上述列中的选定值。

例如，我有两个列表 A 和 B。列表“A”包含“访问”列，其类型为“个人和组”（可以有多个）。我想将列表“B”的项目权限更改为列表 A 的“访问权限”列中的选定值。

指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:23:12.457

```
SPWeb web = SPContext.Current.Web;
SPGroup oGroup = web.Groups.GetByID   (oFieldUserValue.LookupId);   //Look up field value                                     
SPPrincipal principal = (SPPrincipal)oGroup;
SPRoleAssignment roleAssignment = new SPRoleAssignment(principal);                                        
permFolder.Item.BreakRoleInheritance(true);                                        
roleAssignment.RoleDefinitionBindings.Add(web.RoleDefinitions["Contribute"]);
permFolder.Item.RoleAssignments.Add(roleAssignment);
permFolder.Item.Update();
finalItem.Update(); 
```

# html - CSS 多级父选择器

> ID：12714749
> 
> 赞同：1
> 
> 时间：2012-10-03T18:40:04.753
> 
> 标签：html, css

我想选择`.box`这三个兄弟姐妹中的每一个的第一级`.box`，而不是他们的孩子`.box`。（这有意义吗？）

这是我的标记：

```
<div class="box">
    <div class="box">
        test
    </div>
</div>

<div class="box">
    <div class="box">
        test2
    </div>
</div>

<div class="box">
    <div class="box">
        test3
    </div>
</div> 
```

如何使用 CSS 执行此选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:41:16.517

这是不可能的，除非您以某种方式特别提到外框的父级。例如，如果您知道所有这些都将在 inside`#foo`中，那么`#foo > .box`将完成这项工作。

但是，您*可以*`.box > .box`使用或选择位于另一个框中的框`.box .box`，因此通过这种方式，可以使用“撤消更改”的经典解决方法来执行您需要的操作。例如，仅将外框变为蓝色：

```
.box { background: blue } /* make a far-reaching change */
.box .box { background: transparent } /* then undo it partially */ 
```

当然，内盒仍然会显示他们父母的蓝色背景，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T19:44:21.457

只选择第一个的更好的方法是`>`在你的 css 选择器中使用它，所以像这样使用它：

```
body>.box {
    css here
} 
```

# jquery - JQuery.ajax 中的奇怪行为

> ID：12714757
> 
> 赞同：0
> 
> 时间：2012-10-03T18:40:20.883
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

下面的代码是使用 JQuery UI 创建的自动完成输入的一部分。但我的问题仅与 JQuery-AJAX 部分有关。

```
change: function(event, ui){
$.ajax({
type: "POST",
url: "includes/c_t_v_choices.php",
data: { filter: ui.item.value },
//dataType: "JSON",
}).done(function( msg ) {
    c_t_v_choices = msg;
    alert( "Data Saved: " + c_t_v_choices );
    $("#c_t_v").autocomplete("option", "source", c_t_v_choices);
}); 
```

c_t_v.php 文件的最后一行是：

```
echo json_encode($return_arr); 
```

代码当前的方式，我在警报中看到由 php 文件发送的有效数据。一个例子如下所示：

```
Data Saved: [{"label", "value"}, {"label", "value"}...] 
```

但是，当我启用该行时：

```
dataType: "JSON", 
```

我看到类似的东西：

```
Data Saved: [object: Object], [object: Object] 
```

为什么会有这种奇怪的行为？

附带说明一下，为什么 $("#c_t_v").autocomplete 接受我在下面的代码中提供的源代码（这是上面代码的一部分）：

```
$("#c_t_v").autocomplete("option", "source", c_t_v_choices); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:44:32.967

```
Data Saved: [{"label", "value"}, {"label", "value"}...] 
```

像这样在这种情况下记录这些数据`console.log(typeof your_data_var)`——它是一个字符串吗？

当您指定 JSON 时，jQuery 会将返回的 json STRING 转换为对象数组，以便您可以使用点符号轻松访问 json 层次结构，例如`Parent.child.something`.

这是 jQuery 处理 JSON 响应的正常方式，因为它比使用数组更优雅且查找速度更快:)

PS 如果你不是，我建议你使用`console.log`, 并且`console.dir`可以方便地处理数组/对象并使用 Firebug 进行检查，以更好地了解对象及其包含的内容。

# google-maps - 谷歌地图：如何创建包含大量 GPS 路径点的静态图像

> ID：12714759
> 
> 赞同：1
> 
> 时间：2012-10-03T18:40:25.743
> 
> 标签：google-maps, vba, excel

我需要在谷歌地图卫星信息之上创建 GPS 路径图像。最终目标是将这些图像导入到通过用户窗体和 VBA 运行的 Excel 程序中创建的报告中。

我无法想出一种方法来自动生成这些图像。最好用户不必安装额外的软件，并且会有一种使用 VBA 自动执行此过程的方法。我想使用静态 Google Maps API，但这受到 HTML 请求中字符数的限制（据我所知为 2048），并且我的路径数据很容易超过该长度。

现在让我们假设我有一个包含 GPS 路径数据的 KML 文件。

关于使用 VBA 将大型 KML 路径文件转换为静态地图图像文件的方法有什么想法吗？我在想象 VBA 使用动态谷歌地图打开本地 HTML 文件，上传 KML 文件，并以某种方式捕获并保存加载到动态谷歌地图上的 KML 数据的屏幕截图。

仅供参考，我被锁定在使用现有的基于 Excel/VBA 表单的程序来生成这些报告。

（这块板的新手，在编程方面相对较新，所以如果缺少我的描述，请告诉我。谢谢）

# python - 是否可以使用 Yahoo Query Language 下载历史财务数据？

> ID：12714760
> 
> 赞同：3
> 
> 时间：2012-10-03T18:40:29.287
> 
> 标签：python, api, yql

我使用 Yahoo Finance 网站下载历史数据，使用如下查询：

```
http://ichart.finance.yahoo.com/table.csv?s=AAPL&c=1962 
```

以及随附的 Python 代码：

```
import urllib.request
with open("data.csv", "wb") as w:
    url = "http://ichart.finance.yahoo.com/table.csv?s=AAPL&c=1962"
    r = urllib.request.urlopen(url).read()
    w.write(r) 
```

我还使用 Yahoo Query Language 来下载伪实时数据（即延迟几分钟的数据），查询如下：

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22AAPL%22)&env=store://datatables.org/alltableswithkeys 
```

但是，我找不到有关如何使用 YQL（如第二个查询所示）下载历史数据（如第一个查询所示）的文档。我想在 YQL 返回的表包含比简单的开盘/收盘价、交易量等更多的数据之前执行此操作。

有没有办法使用 YQL 下载历史数据，使其包含与伪实时数据相同的细节深度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:30:49.437

不幸的是，YQL 表`yahoo.finance.historicaldata`包含与 CSV 文件相同的字段，特别是开盘价、收盘价、最高价、最低价、成交量等。要使用 YQL 下载此数据，这是正确查询的示例：

```
select * from yahoo.finance.historicaldata where symbol = "IBM" and startDate = "2012-01-01" and endDate = "2012-01-11" 
```

# knockout.js - 为什么 Knockout.js 的默认相等比较器将非原始类型视为不相等？

> ID：12714761
> 
> 赞同：11
> 
> 时间：2012-10-03T18:40:30.163
> 
> 标签：knockout.js

从 Knockout v2.1.0 调试源代码：

```
ko.observable['fn'] = {
    "equalityComparer": function valuesArePrimitiveAndEqual(a, b) {
        var oldValueIsPrimitive = (a === null) || (typeof(a) in primitiveTypes);
        return oldValueIsPrimitive ? (a === b) : false;
    }
}; 
```

这对我来说似乎不直观，但史蒂夫·桑德森（Steve Sanderson）不遗余力地定义这一点肯定是有原因的。为什么会这样？它似乎不必要地触发了更改通知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:24:29.937

这样做是因为如果您有一个包含对象的可观察对象，则 Knockout 不知道子属性是否已更改。

此时，我们会触发通知，以防对象的某个属性发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-05T10:36:44.547

如果您有一个持有对象的可观察对象，您可以制作一个自定义的equalComparer，以根据您的需要返回相等性。只需在要自定义的可观察实例上设置属性。签名是：

```
myObservable["equalityComparer"] = function(a, b){ 
  return a===b;// Or any arbitrary comparison
}; 
```

现在，当函数返回 false 时，您的 observable 只会引发更改事件。

# ajax - 在 AJAX 中创建一个新函数

> ID：12714763
> 
> 赞同：0
> 
> 时间：2012-10-03T18:40:32.977
> 
> 标签：ajax

我在 Javascript 中看到了一些这样的示例代码。这是 AJAX 吗？

```
(function() {
         /*some code*/

})(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:43:33.743

> 这是 AJAX 吗？

不，这就是通常所说的“立即调用的函数表达式”或[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

```
(function() {
    /*some code*/
})();
//^^These parentheses cause the function to be executed 
```

圆括号对导致构造成为表达式，而不是声明。这是必要的，因为你不能有一个匿名函数声明（你会得到一个语法错误）。

它们通常用于引入新范围（产生您可能听说过的称为*闭包*的内容）。

# ajax - 按下按钮时如何触发ajax验证？

> ID：12714776
> 
> 赞同：0
> 
> 时间：2012-10-03T18:41:15.017
> 
> 标签：ajax, yii

我正在使用 Yii CActiveForm 小部件来创建一个表单。在同一页面上，但与表单分开，我有一个按钮，它会弹出一个 JQuery 模式对话框。

这是我想做的事情（但不知道该怎么做）：当按下按钮时，我想在弹出模式对话框之前使用 Ajax 验证表单。如果表单有错误，我想显示所有错误并阻止模式对话框打开。如果没有错误，则应打开模式对话框。

如何从按钮单击事件中调用 Yii ajax 验证？

# android - 从画布上的单个位图多次绘制

> ID：12714783
> 
> 赞同：3
> 
> 时间：2012-10-03T18:41:44.273
> 
> 标签：android, view, bitmap, draw

基本上我有以下位图：位图云；云 = BitmapFactory.decodeResource(getResources(), R.drawable.cloud);

我想要做的是在画布上的不同（随机）位置多次绘制相同的位图（在本例中为云）。我想在我的视图的 OnDraw 方法中执行此操作。

所以最终的产品应该是这样的： ![http://puu.sh/1b4fe](../Images/706dffac2f923c486e9d1f99a9eeb7ee.png)

然而

这是在同一画布上多次绘制位图的代码：

```
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    // canvas.drawColor(Color.BLUE);
    //drawBackground(canvas);

    //objectMovement(canvas);

    for (int i = 0; i < 500; i += 50) {
        canvas.drawBitmap(cloud, 50 + rand.nextInt(350),
                10 + rand.nextInt(350), null);
    }

    invalidate();
} 
```

如您所见，我使用随机生成位图的位置，并且每次将位图绘制在画布上的不同位置。

唯一的问题是，每次调用 invalidate() 时，for 循环中的绘图都会再次发生。正因为如此，看起来图纸（云）在整个地方移动得非常快。

搜索了一会，发现了这个问题： [Draw multiple times from a single bitmap](https://stackoverflow.com/questions/9789316/draw-multiple-times-from-a-single-bitmap)

这与我的问题几乎相同，但不幸的是，那里没有正确的答案。

那么我该如何实现呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:50:46.897

第一个问题是您每帧读取位图 10 次，这是完全没有必要的。当你实例化你的类时，你应该读一次位图。我还添加了一个油漆。我不知道这是否完全有必要，但如果你决定在你的 draw 方法中做更多的事情，它就在那里。

```
public class MyView extends View
{
    private Bitmap _cloud;
    private Paint _paint;

    public MyView(Context context)
    {
        super(context);
        _cloud = BitmapFactory.decodeResource(getResources(),R.drawable.cloud);
        _paint = new Paint();
    }

    protected void onDraw(Canvas canvas) 
    {
        for(int i = 0; i < 500; i += 50) 
        {
            canvas.drawBitmap(_cloud, 50 + rand.nextInt(350rand.nextInt(350)), 10 + i, _paint);
        }
    }
} 
```

# java - 将 Json 反序列化为包含泛型对数组的 Java 实体

> ID：12714785
> 
> 赞同：0
> 
> 时间：2012-10-03T18:41:47.470
> 
> 标签：java, json, serialization, jackson

我正在尝试将 json 反序列化为 java 实体，但我无法让 Jackson 将 json 数组反序列化为 Pair[]。Pair 是一个自定义类，但它遵循[SO](https://stackoverflow.com/questions/521171/a-java-collection-of-value-pairs-tuples)上的标准形式：

```
public class Pair<K, V> {

private final K k;
private final V v;

public Pair(K k, V v) {
    this.k = k;
    this.v = v;
}

public K getKey() {
    return k;
}

public V getValue() {
    return v;
}
...
} 
```

Json 对象可以根据需要进行更改，但我正在尝试使用以下形式：

```
{"priority":1,"account":"012345","tld":"com","name":"domain_check","params":[{"key":"domain","value":"domain.com"}]} 
```

我的“DefaultRequest”实体类包含：

```
@Entity
public class DefaultRequest implements Serializable, Comparable, Request {

//other fields...

private Pair[] params;

@Override
public Pair[] getParams() {
    return params;
}

@Override
public void setParams(Pair[] params) {
    this.params = params;

//other methods...
}
} 
```

如果有人已经回答了这个问题，我很抱歉。诚然，我对使用 jackson 很陌生，但我已经花了将近 3 天的时间，而且我有一个截止日期。我还必须相信有人必须反序列化为包含 Pair[] 的实体。欢迎任何想法。如果有更好的选择，我可以完全灵活地更改 json 格式和实体类。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:48:22.303

问题有点模糊，所以我可能错了，但您可能正在寻找注释来告诉杰克逊如何使用自定义构造函数来传递数据。如果是这样的话：

```
@JsonCreator
public Pair(@JsonProperty("key") K k,
   @JsonProperty("value") V v) {
    ...
} 
```

这将适用于所有类型的类型，而不仅仅是原语，也不会试图猜测去哪里。名称的注解只是因为 JDK 没有在字节码中添加参数名称，所以它们不可用，不像方法名称。

编辑：

看来需要转型了。那么这个怎么样：

```
@JsonCreator
public Pair(Map<String,String> json)
{
   Map.Entry<String,String> en = json.entrySet().iterator().next();
   key = en.getKey();
   value = en.getValue();
}

@JsonValue
public Map<String,String> asMap() {
  Map<String,String> m = new HashMap<String,String>();
  m.put(key, value);
  return m;
} 
```

更多代码，但允许转换为中间类型。对于它的价值，Jackson 2.1 将包括标准的“委托”序列化器/反序列化器，以便定义一个封装此类逻辑的转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:20:52.177

使用 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)它工作正常。

您必须将构造函数的参数重命名为键和值，然后：

```
// this will tell to genson that he can use special debug symbols 
// to guess the constructor parameters :)    
Genson genson = new Genson.Builder().setWithDebugInfoPropertyNameResolver(true).create();
DefaultRequest req = genson.deserialize(json, DefaultRequest.class); 
```

如果您的键类型是字符串并且值是原始类型（或原始包装器），则此方法有效，如果您希望将值作为复杂对象，那么它会更复杂一些。如果您是生成 json 的人，它会起作用。这是有关如何使用 Genson 实现此目的的[链接。](http://code.google.com/p/genson/wiki/GettingStarted#Interface/Abstract_classes_support)

# image - 如何避免 Page_Load 通过单击任何图像按钮重新运行？

> ID：12714790
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:41:58.203
> 
> 标签：image, button

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Default2 : System.Web.UI.Page
{
    public enum Suit
    {
        Club,
        Diamond,
        Heart,
        Spade
    }

    public static int i = 0;

    public class Card
    {
        private Suit suit;
        private int rank;
        private string pictureUrl;

        public Suit Suit
        {
            get { return suit;}
            set { suit = value; }
        }

        public int Rank
        {
            get { return rank; }
            set { rank = value; }
        }

        public string PictureUrl
        {
            get { return pictureUrl; }
            set { pictureUrl = value; }
        }

        public Card(Suit suit, int rank, string pictureUrl)
        {
            this.suit = suit;
            this.rank = rank;
            this.pictureUrl = pictureUrl;
        }
    }

    protected void InitDeck(List<Card> deck)
    {
        for (int suit = 0; suit < 4; suit++)
            for (int rank = 0; rank < 13; rank++)
            {
                string strPath = "Images\\" + (suit * 13 + rank).ToString() + ".png";
                deck.Add(new Card((Suit)suit, rank + 2, strPath));
            }
    }

    protected void InitGameBoard(Card[,] gameBoard, List<Card> deck)
    {
        Random rnd = new Random();
        int rndPosition;

        for(int i = 0; i < 5; i++)
            for (int j = 0; j < 5; j++)
            {
                if (i == 4 && j == 4)
                {
                    gameBoard[i, j] = new Card(0, 100, "Images\\b1fv.png");
                }
                else
                {
                    rndPosition = rnd.Next(0, deck.Count);
                    gameBoard[i, j] = deck[rndPosition];
                    deck.RemoveAt(rndPosition);
                }
            }
    }

    protected void DrawTable(Card[,] gameBoard)
    {
        Table gameTable = new Table();
        gameTable.GridLines = GridLines.Both;
        gameTable.BorderWidth = 4;
        gameTable.ID = "gameTable";

        ImageButton imgBtn = null;

        for (int i = 0; i < 5; i++)
        {
            TableRow tblRow = new TableRow();
            for (int j = 0; j < 5; j++)
            {
                TableCell tblCell = new TableCell();
                tblCell.HorizontalAlign = HorizontalAlign.Center;
                imgBtn = new ImageButton();
                imgBtn.ID = i.ToString() + j.ToString();
                imgBtn.Width = 80;
                imgBtn.Height = 105;
                imgBtn.ImageUrl = gameBoard[i, j].PictureUrl;
                imgBtn.Click += new ImageClickEventHandler(Checking);
                tblCell.Controls.Add(imgBtn);
                tblRow.Cells.Add(tblCell);
            }

            gameTable.Rows.Add(tblRow);           
        }

        Panel1.Controls.Add(gameTable);      
    }

    protected void Checking(System.Object sender, System.EventArgs e)
    {
        ImageButton imgBtn = (ImageButton)sender;
        int imgBtnIdNo = int.Parse(imgBtn.ID);
        Label1.Text = i.ToString();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        List<Card> deck = new List<Card>();
        Card[,] gameBoard = new Card[5, 5];     
        InitDeck(deck);
        InitGameBoard(gameBoard, deck);
        DrawTable(gameBoard);

    }
} 
```

这是一个我正在构建的获胜形式游戏，其中生成了一个随机的 5 X 5 表，其中填充了除空白单元格之外的卡片，您需要在空白单元格周围按下图像按钮，以切换他们的位置并构建扑克牌行，但每次我按下表格不断生成的图像按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:59:01.480

默认情况下，按下按钮会将事件发送到服务器（并重新加载页面）。要在客户端处理它，您需要使用 OnClientClick 属性 (http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)

# ruby-on-rails - 如何向红宝石宝石添加路线

> ID：12714792
> 
> 赞同：2
> 
> 时间：2012-10-03T18:42:15.407
> 
> 标签：ruby-on-rails, ruby, rubygems

我一直在创建一个 gem，我需要创建一个映射到 gem 中的控制器的路由。

我有一个文件（*config/routes.rb*），如下所示：

```
Rails.application.routes.draw do

  match "rest/*path" => "bconnected/apis#rest"

end 
```

我的控制器位于 *app/controllers/bconnected/apis_controller.rb*

我的 gemspecs 文件包含所有这些文件。

我运行 gem build 和 gem install。

我将我的 gem 包含在 rails Gemfile 中，但是当我尝试访问该 URL 时，我得到：

*没有路线匹配 [GET] "/rest/test"* '

我需要为 Rails 做任何特别的事情来从 gem 中读取我的 routes.rb 文件吗？

# tinymce - TinyMCE 拼写检查插件 - Google Spell 模式下的英式英语

> ID：12714793
> 
> 赞同：1
> 
> 时间：2012-10-03T18:42:23.770
> 
> 标签：tinymce, spell-checking

我需要能够在英式英语中使用 tinyMCE 拼写检查插件。ie word color 不应被视为错误。该插件设置为使用 Google Spell。

```
+English=en_GB 
```

没用，而且en只是美国的写法。

先感谢您

# html - 我可以用 CSS 实现这一点吗？

> ID：12714796
> 
> 赞同：0
> 
> 时间：2012-10-03T18:42:37.523
> 
> 标签：html, css

我正在尝试在边框右侧添加一个小**阴影**，类似于下图。

这可以用css实现吗？

![在此处输入图像描述](../Images/8b662d8433ac1f4fbd533c2ce58b07ea.png)

CSS：

```
.border {
    border-right: solid 1px #ddd;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:56:59.707

是的，您可以尝试这些`-moz-box-shadow`功能，尽管我不知道这些功能是否兼容跨浏览器。`box-shadow`是另一种确保它与跨浏览器兼容的方法（以及`-webkit-box-shadow`）。为了安全起见，我通常都使用它们。

有关如何使用它们的详细信息，请查看[http://www.css3.info/preview/box-shadow/](http://www.css3.info/preview/box-shadow/)

IE..

```
.border {
box-shadow: 0 5px 0 0 #000;
-moz-box-shadow: 0 5px 0 0 #000;
-webkit-box-shadow: 0 5px 0 0 #000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:45:47.760

您可以使用 CSS3 `box-shadow`。[这里有一个不错的小游乐场供你涂鸦。](http://box-shadow.info/)

请记住，[这里的浏览器支持不是特别强](http://caniuse.com/#feat=css-boxshadow)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:45:47.733

使用[box-shadow](http://www.css3.info/preview/box-shadow/) CSS3 属性。

```
#Example_H {
  -moz-box-shadow: inset -5px -5px 5px #888;
  -webkit-box-shadow: inset -5px -5px 5px #888;
  box-shadow: inset -5px -5px 5px #888;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:51:40.283

```
<div id="container"></div>​

#container{
    background: #e9e9e9;
    height: 200px;
    width: 50px;
    box-shadow: -5px 0 5px #888;
    margin: 20px 0 0 20px;
}​ 
```

[这里的例子](http://jsfiddle.net/mEHTU/15/)

正如其他人已经提到的，这在 chrome/FF 中可以正常工作，但在 IE 中不太可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T18:59:41.530

```
.sidebar{
    width:200px;
    height:500px;
    background:#F0F0F0;
   -webkit-box-shadow: inset 8px 0px 10px 0px rgba(0, 0, 0, 0.2);
    box-shadow: inset 8px 0px 10px 0px rgba(0, 0, 0, 0.2);
}​

<div class="sidebar">

</div>​ 
```

# google-maps - 如何过滤谷歌地图上的自定义结果？

> ID：12714805
> 
> 赞同：0
> 
> 时间：2012-10-03T18:43:16.167
> 
> 标签：google-maps

我这样做是为了了解这些事情在现实生活中是如何运作的。

我在 UI 上有一些选项，根据这些选项过滤结果，它们需要显示在谷歌地图上。[类似于 padmapper.com](https://www.padmapper.com/)的东西。

深入到旧金山，可以更改 UI 上的预算。随着预算的修改，谷歌地图上的搜索结果也随之修改。

在我有一个简单的滑块（例如预算）并且基础结果随着滑块的移动而更新的情况下，如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T21:20:34.403

没有代码，很难用代码给你举个例子，所以我用英文试试：

基本上，您使用的任何滑块都会在您更改滑块值后触发某种更改事件。在此事件中，捕获值，遍历地图上的标记，如果标记的某些属性落在滑块的值内，则显示它，否则隐藏它。

这假设当您创建 Marker 时，您做了两件事：1) 给它某种自定义属性来存储您要过滤的值，以及 2) 您将每个 Marker 的引用存储在数组中。

很乐意为您提供更多帮助，但您需要发布一些代码。

**更新地址评论：**

要处理“数据过多问题”，您可以调用服务器将地图视图（称为边界框）内的点加载为客户端上的标记。在您的过滤器`change`事件中，您遍历客户端上已经存在的这些标记并根据过滤器显示或隐藏它们，无需调用服务器，除非用户再次导航地图，然后`idle`您可以再次调用服务器并在边界框中再次检索点，但这也符合您的过滤条件。***因此，它只是从服务器检索您需要的数据，并在客户端过滤它们的组合。***您还可以限制从服务器返回的点数，因此在缩小时不会损失性能。

有关处理大量数据的更多信息，请参阅[Google 的这篇文章](https://developers.google.com/maps/articles/toomanymarkers)和[这个特定的实现](http://googlegeodevelopers.blogspot.com/2009/04/markerclusterer-solution-to-too-many.html)。

# c# - dll好像没有被读取，为什么？

> ID：12714806
> 
> 赞同：1
> 
> 时间：2012-10-03T18:43:17.527
> 
> 标签：c#, .net, object, constructor, instantiation

我正在创建一个应用程序表单来查看/更改来自名为 InTouch 的软件的标签。

我添加了 dll 作为参考，我想`Read(string tagName`在 IOM.InTouchDataAccess 中使用 ) fct。VS 在我写的时候看不到 fct Read `InTouchWrapper TagType = new read()`。它只看到我在代码中写的 InTouchWrapper，这给了我错误`IOM.InTouchDataAccess.InTouchWrapper' does not contain a constructor that takes 0 arguments`

我不明白为什么会这样。我在编码时运行 InTouch 软件，可能与软件存在访问冲突。

**我的代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using IOM.InTouchDataAccess;

namespace TagBrowser
{
    public partial class TagBrowser : Form
    {
        public TagBrowser()
        {
            InitializeComponent();
        }

        private void TagBrowser_Load(object sender, EventArgs e)
        {
        }

        private void TagBox_TextChanged(object sender, EventArgs e)
        {
        }

        private void TypeBox_SelectedIndexChanged(object sender, EventArgs e)
        {
            InTouchWrapper TagType = new InTouchWrapper();
        } 
```

**dll**

```
using System;
using System.Collections.Generic;
using System.Text;
using NDde.Client;

namespace IOM.InTouchDataAccess
{
    public class InTouchDdeWrapper : IDisposable
    {
        private int DDE_TIMEOUT = 60000;

        private DdeClient _ddeClient;

        public InTouchDdeWrapper()
        {
            _ddeClient = new DdeClient("View", "Tagname");
        }

        ~InTouchDdeWrapper()
        {
            Dispose();
        }

        public void Initialize()
        {
            _ddeClient.Connect();
        }

        public string Read(string tagName)
        {
            return _ddeClient.Request(tagName, DDE_TIMEOUT).Replace("\0", "");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:18:09.850

*我把它放在这里以防其他人遇到同样的问题：*

> 您确定这是您引用的正确 dll 吗？尝试在反编译器（[JustDecompile](http://www.telerik.com/products/decompiler.aspx) *free*、 [Reflector](http://www.reflector.net/)或[dotPeek](http://www.jetbrains.com/decompiler/) *free*）中打开准确引用的 dll，看看它是否是您期望的代码。

# bash - 如何压缩目录并将软链接转换为硬链接？

> ID：12714807
> 
> 赞同：0
> 
> 时间：2012-10-03T18:43:22.707
> 
> 标签：bash, compression, symlink, tar, rhel

我想压缩一个目录。

```
tar -cvzf mydir.tar.gz mydir 
```

但这保留了符号链接，因此它不能移植到新系统。

如何转换符号链接？

我努力了

```
tar -cvzfh 
```

因为`man tar`说

> -h，--取消引用
> 
> ```
>  don’t dump symlinks; dump the files they point to 
> ```

但这会导致错误

```
tar: Error exit delayed from previous errors 
```

并创建一个名为“zh”的文件

我的文件在 RHEL 服务器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T18:45:24.400

您的 tar.gz 文件名**必须**紧跟在`-f`标志之后，只需重新排序标志即可。

```
tar -cvzhf mydir.tar.gz mydir 
```

# java - 将值从一个 jframe 传递到另一个 jframe？

> ID：12714808
> 
> 赞同：0
> 
> 时间：2012-10-03T18:43:23.830
> 
> 标签：java, user-interface

我创建了两个类，一个类就像表单，另一个类是主类，并且有 jmenu 和 jinternal 框架我想在 jinternal 框架上打印来自表单类的输入，但我不明白我是如何回忆表单类中的 jinternalframe，请在这方面指导我或任何提示或一些可以帮助我的代码或教程这里是这两个类的代码。此外，这两个课程都运行良好。

```
JTextArea text;
     static int openFrameCount = 0;
    public form(){

           super("Insert Form");
        Container panel=getContentPane();
        JPanel  cc    = new JPanel();
        cc.setLayout(new  FlowLayout());

        JButton b=new JButton("print");
     b.setPreferredSize(new Dimension(140,50));
     b.setBounds(1000,500,350,50);
       cc.add(b);
       .......................................................

        JLabel label1=new JLabel(" Question"+(++openFrameCount));

        cc.add(label1);
        text=new JTextArea();
                text.setLineWrap(true);
        text.setWrapStyleWord(true);
        text.setPreferredSize(new Dimension(750,50));
        text.setBounds(80, 60,750,50);
        cc.add(text);
         JLabel symbol=new JLabel("Selection for Option?");
         symbol.setBounds(200, 120,1000,100);
 cc.add(symbol);

  ..................................................

          JLabel op4=new JLabel("4th Option?");
           JTextArea otext4=new  JTextArea();
          otext4.setLineWrap(true);
        otext4.setWrapStyleWord(true);
        otext4.setPreferredSize(new Dimension(750,50));
        otext4.setBounds(10, 40,700,30);
            cc.add( op4 ) ;
          cc.add( otext4 ) ;

          cc.revalidate();
 validate();

  ............................................................  

        }

    @Override
    public void actionPerformed(ActionEvent ae) {
     if ( e.getSource() == b1 ){  

    }

} 
```

和第二类 jinternalframe 是

```
public class Desktop1 extends JFrame
                               implements ActionListener {
    Desktop p=new Desktop();
    JDesktopPane desktop;

static int openFrameCount = 0;
    public Desktop1() {
        super("InternalFrameDemo");

        //Make the big window be indented 50 pixels from each edge
        //of the screen.
        int inset = 50;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(inset, inset,
                  screenSize.width  - inset*2,
                  screenSize.height - inset*2);

        //Set up the GUI.
        desktop = new JDesktopPane(); //a specialized layered pane

        createFrame(); //create first "window"
        setContentPane(desktop);
        setJMenuBar(createMenuBar());

        //Make dragging a little faster but perhaps uglier.
        desktop.setDragMode(JDesktopPane.OUTLINE_DRAG_MODE);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();

        //Set up the lone menu.

       .................................................

        return menuBar;
    }

    //React to menu selections.
    public void actionPerformed(ActionEvent e) {
        if ("new".equals(e.getActionCommand())) { //new
            createFrame();
        } 

        ............................................
        }
    }

    class MyInternalFrame extends JInternalFrame {

        static final int xPosition = 30, yPosition = 30;
        public MyInternalFrame() {
            super("IFrame #" + (++openFrameCount), true, // resizable
                    true, // closable
                    true, // maximizable
                    true);// iconifiable
            setSize(700, 700);
            // Set the window's location.
            setLocation(xPosition * openFrameCount, yPosition
                    * openFrameCount);
        }
    }
    //Create a new internal frame.
    protected void createFrame() {
        Desktop1.MyInternalFrame frame = new Desktop1.MyInternalFrame();

        JPanel panel=new JPanel();//to add scrollbar in jinternalpane insert jpanel
        panel.setBackground(Color.white);//set background color of jinternal frame
        JScrollPane scrollBar=new JScrollPane(panel,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        frame.add(scrollBar);

        frame.setVisible(true); 

        desktop.add(frame);
        try {
            frame.setSelected(true);
           frame.setMaximum(true);
        } catch (java.beans.PropertyVetoException e) {}
    }
    public static void main(String[] args) {
        Desktop1 d=new Desktop1();
         d.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        d.setVisible(true);

}
} 
```

当我点击打印按钮时，我想知道这部分代码中的工作提示，以将表单的值传递给内部框架

```
public void actionPerformed(ActionEvent ae) {
         if ( e.getSource() == b1 ){  

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:09:30.317

只需调用构造函数并传递值

```
ClassName(parameter) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:03:27.183

我猜您想在主窗体单击按钮时将一些文本传递给您的 InternalFrame 类。修改您的 createFrame() 方法以接受字符串值，例如-

```
protected void createFrame(String value){
 //..your code    
} 
```

当您调用 InternalFrame 类时，将此值传递给它的构造函数。例如-

```
 Desktop1.MyInternalFrame frame = new Desktop1.MyInternalFrame(value); 
```

参数化构造函数将解决您的问题。修改您的 InternalFrame 构造函数，例如-

```
public MyInternalFrame(String value){
 //..use this value    
} 
```

# jquery - 从多复选框中删除所有选中的项目

> ID：12714810
> 
> 赞同：0
> 
> 时间：2012-10-03T18:43:38.170
> 
> 标签：jquery

我试图删除复选框名称为 qID5 的所有选中项目

我的查询

```
if(value == 184){
   var $radios = $('input:checkbox[name=qID5[]]');

   $("input:checkbox[name=qID5[]]").removeAttr("checked"); 
```

// 我有 qID6 和 qID7，这一行正在从所有这些中删除 attr 检查，而不仅仅是 qID5？

```
 $radios.filter('[value=232]').attr('checked', true);
   $radios.filter('[value=232]').parent().show();
}else{
   var $radios = $('input:checkbox[name=qID5[]]');
   $radios.filter('[value=232]').attr('checked', false);
   $radios.filter('[value=232]').parent().hide();
}} 
```

我的 HTML

```
<p><input type="checkbox" name="qID5[]" class="required" value="185"  /> - Play </p>

<p><input type="checkbox" name="qID5[]" class="required" value="186" /> - Musical </p>

<p><input type="checkbox" name="qID5[]" class="required" value="187"  /> - Tribute show </p>

<p><input type="checkbox" name="qID5[]" class="required" value="188"  /> - Concert </p>

<p><input type="checkbox" name="qID5[]" class="required" value="189"  /> - Stand-up Comedy </p>

<p><input type="checkbox" name="qID5[]" class="required" value="190"  /> - Youth Production </p>

<p><input type="checkbox" name="qID5[]" class="required" value="191"  /> - Meeting </p>

<p><input type="checkbox" name="qID5[]" class="required" value="192"  /> - Fundraiser </p>

<p><input type="checkbox" name="qID5[]" class="required" value="193"  /> - Other special event </p>

<p><input type="checkbox" name="qID5[]" class="required" value="232"  /> - Answered NO to question 4 </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:48:06.853

`checked`是二元属性，而不是属性。当它包含方括号时，您还应该引用名称。

您需要使用它来检查它们：

```
$("input[name='qID5[]']").attr('checked', 'checked'); 
```

或者这个取消选中

```
$("input[name='qID5[]']").removeAttr("checked"); 
```

# java - Facebook 喜欢使用 JSF 的聊天系统（Prime faces modal dialog）

> ID：12714811
> 
> 赞同：1
> 
> 时间：2012-10-03T18:43:41.303
> 
> 标签：java, jsf, jsf-2, primefaces

是否可以使用 JSF（Primefaces 模态弹出窗口）构建一个类似 facebook 的聊天系统。我设法使用 primefaces 构建了一个模式对话框。我想知道是否可以使用 primefaces 添加多个模式对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:59:11.890

你看过[http://www.primefaces.org/showcase/push/chat.jsf](http://www.primefaces.org/showcase/push/chat.jsf)吗？该功能似乎存在用于构建您想要的东西。

# php - MySQL 语法错误：查看与您的 MySQL 服务器版本对应的手册

> ID：12714812
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:43:42.493
> 
> 标签：php, mysql

我一直在为此烦恼，希望这里有人可以提供帮助。任何帮助将非常感激。

我在本地使用的是64位Win 7平台的WAMP，WAMP打包的MySQL版本是5.0.1a。我还将 smf 嵌入到 Wordpress 模板中。header.php 文件中的代码以及具体错误如下：

“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 'AND xxxx.xxxx_members.ID_MEMBER =' 附近使用正确的语法”

```
 <?php 
                    // Get race image
                    $members = xxxx_FORUM_MEMBERS_TABLE;
                    $forum_id = xxxx_forum_user_id();
                    $sql = "SELECT users.race, {$members}.memberName, ranks.rank
                            FROM 
                                {$members}, users 
                                    LEFT JOIN ranks 
                                    ON users.id = ranks.user_id 
                            WHERE users.forum_id = {$forum_id} 
                            AND {$members}.ID_MEMBER = {$forum_id}";
                    $users = mysql_query($sql) or die (mysql_error());
                    $race = "unknown";
                    $name = "";
                    $rank = null;
                    if ($user = mysql_fetch_object($users)) {
                        $race = $user->race;
                        $name = $user->memberName;
                        $rank = $user->rank;
                        if ($rank != null) {
                            // Prefix 1th, 2nd 3rd, 4th
                            $order = $rank % 10;
                            if ($rank > 10 || $rank < 21) $rank .= 'th';
                            else if ($order == 1) $rank .= 'th';
                            else if ($order == 2) $rank .= 'nd';
                            else if ($order == 3) $rank .= 'rd';
                            else                  $rank .= 'th';
                        }
                    } 
                    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:49:14.037

鉴于您的错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 'AND xxxx.xxxx_members.ID_MEMBER =' 附近使用正确的语法

看来您正在选择`db.table`. 您应该尝试以下语法：

```
SELECT tbl1.col1
FROM db.tbl1
WHERE tbl1.col1 ... 
```

并不是：

```
SELECT tbl1.col1
FROM db.tbl1
WHERE db.tbl1.col1 ... 
```

# java - 绘图面板未激活

> ID：12714813
> 
> 赞同：0
> 
> 时间：2012-10-03T18:43:52.070
> 
> 标签：java, eclipse

我必须学习 Java，我选择了 Eclipse 来编写 Java。不幸的是，有些方法不能正常工作。例如“DrawingPanel”我的问题是我必须做什么来激活这个方法。

![在此处输入图像描述](../Images/16897b3b762acb38d432d7fa30ebf952.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:46:46.053

那是因为您没有`DrawingPanel`类（？）您要么必须创建一个`DrawingPanel`扩展 a 的类，`JPanel`要么导入包含`DrawingPanel`类的包。

**编辑：** 如果您的 DrawingPanel 类位于 Panels 包下。这将是 `import Panels.DrawingPanel`

如果你有一个包 Panels/CoolDrawingPanels 它会转化为 `import Panels.CoolDrawingPanels.DrawingPanel`

# regex - 通过显式文件列表 grep

> ID：12714820
> 
> 赞同：2
> 
> 时间：2012-10-03T18:44:51.020
> 
> 标签：regex, grep

堆，

我们的库中有许多文件从未在后续项目中使用过。我们现在处于开发阶段，我们可以做一些良好的内务处理并小心地删除未使用的库代码。我正在尝试优化我的 grep 命令，它当前的执行速度很慢。

```
grep --include=*.cpp --recursive --files-with-matches <library function name> <network path to subsequent projects> 
```

主要原因是项目路径很宽，大部分时间都花在导航目录树和应用文件掩码上。对同一组项目文件多次调用此 grep 命令。

我不想在每次调用时都导航目录树，而是想用 grep 来引用存储在本地磁盘上的静态文件列表。

类似于这样的东西：

```
grep --from-filelist=c:\MyProjectFileList.txt 
```

将`MyProjectFileList.txt`是：

```
\\server1\myproject1\main.cpp
\\server1\myproject1\func1.cpp
\\server1\myproject2\main.cpp
\\server1\myproject2\method.cpp 
```

Grep 会将模式表达式应用于每个文件的内容。Grep 输出将是使用特定库函数的项目文件的完全限定路径。

不返回项目文件的特定库函数的 Grep 命令是无关的，可以删除。

**您如何强制 grep 从存储在文本文件中的外部文件列表中扫描文件？** （从而删除目录扫描。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:56:24.787

使用“xargs”命令和管道（“|”）尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:06:43.200

尝试以下操作：

```
while read line; do echo -e "$line"; done < list_of_files.txt | xargs -0 grep **YOUR_GREP_ARGS_HERE** 
```

或在安装了 Powershell 的 Windows 环境中尝试...

```
Get-Content List_of_files.txt | Foreach-Object {grep $_ GREP_ARGS_HERE} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T22:55:37.500

我搜索了 windows args 并发现[了这个](http://davidpthomas.wordpress.com/2007/01/04/xargs-in-dos/)：

```
FOR /F %k in (filelist.txt) DO grep yourgrepargs  %k 
```

（但我使用linux，不知道它是否有效）

# jquery - 关于动态图像 id 的 Jquery 工具提示

> ID：12714821
> 
> 赞同：0
> 
> 时间：2012-10-03T18:44:51.800
> 
> 标签：jquery, tooltip

我`qtip2`用来在页面图像上生成工具提示，其中 id 根据用户是处于“创建”还是“编辑”模式而变化。当`id = "how_create"`我想生成一条消息时，如果是`"how_edit"`我想生成一条不同的消息。当我在图像上使用检查器时，我可以看到 id 实际上确实按照预期发生了变化。

但是，我只能在静态模式下生成 qtip。这是我正在使用的代码：

```
$(function() { 

$('#make_tip').qtip({
 content:'Make tip',
 style: {name: 'dark', tip: 'topLeft'}
});

$('#how_create').on(function(){
    $(this).qtip({
        content:'Create',
        style: {name: 'dark', tip: 'topLeft'}
    });
});

$('#how_edit').on(function(){
    $(this).qtip({
        content:'Edit',
        style: {name: 'dark', tip: 'topLeft'}
    });
});

}); 
```

我在静态 img id 上收到“制作提示”消息 - 但它不会更改为链接到动态图像 id 的消息，即使 id 正在更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:49:15.300

嗯，我自己没有尝试过，但似乎您应该在 on() 函数上附加一个事件？像这样：

```
$("#how_edit").on('click', function() {}); 
```

但作为一种解决方案，我建议研究 .live() 函数。
但是试试这个

```
$("#how_edit").live('click', function() {
  //YOUR CODE HERE
}); 
```

基本上，“live”函数将扫描您的 DOM 以查找与传递选择器可能是静态选择的“on”函数不同的选择器。

希望这会有所帮助，祝你好运！

# jquery - 这是一个 jQuery 变量吗？“fadesettings: {overduration: 350, outduration: 100}”

> ID：12714825
> 
> 赞同：0
> 
> 时间：2012-10-03T18:45:00.943
> 
> 标签：jquery, variables

我尝试在 jQuery 中搜索“fadesettings”，但似乎找不到任何内容。我找到了代码：

```
fadesettings: {overduration: 350, outduration: 100} 
```

在 jquery 变量中，我不知道如何解释它。

部分代码看起来像这样

```
var jquerycssmenu={

fadesettings: {overduration: 350, outduration: 100}, //duration of fade in/ out animation, in milliseconds

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:47:43.010

不，它不是 jQuery 变量。

它是一个对象字面量，具有一个对象字面量作为属性。

（从命名上看，它可能用于jQuery库中的一些动画方法，或者一些jQuery插件中的方法。）

您将使用以下代码获得相同的对象：

```
var fade = new Object();
fade.overduration = 350;
fade.outduration = 100;

var jquerycssmenu = new Object();
jquerycssmenu.fadesettings = fade; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:48:20.123

它是一个对象，您可以通过以下方式获取它的值。

`console.log(jquerycssmenu.fadesettings); // {overduration: 350, outduration: 100}` `console.log(jquerycssmenu.fadesettings.overduration); // 350`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T18:50:33.417

它不是 jQuery 库的一部分。它看起来像是来自动态驱动器网站的一些示例菜单代码的一部分。

[http://www.dynamicdrive.com/dynamicindex1/ddlevelsmenu/](http://www.dynamicdrive.com/dynamicindex1/ddlevelsmenu/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T18:55:45.700

这是一个用户定义的 JSON 数组，其中声明了两个变量：`overduration`和`outduration`. 我假设这些会在以后的某个地方使用。它本身并不特定于 jQuery，但当然可以用于将变量传递给 jQuery 函数。像这样的东西：

```
fadeIn(jquerycssmenu.fadesettings.overduration) 
```

哪里`fadeIn`是 jQuery 效果，设置来自`overduration`inside中的数组变量`jquerycssmenu.fadesettings`。

希望有帮助。

# oauth - 使用 cfhttp 发布到 API

> ID：12714826
> 
> 赞同：3
> 
> 时间：2012-10-03T18:45:03.573
> 
> 标签：oauth, coldfusion, cfhttp

我目前正在玩[单 API](https://api.singly.com/)，并且有零个 ColdFusion 示例（据我所知 - 我已经浏览了*很多*谷歌搜索结果！）所以，我试图“捏造”我通过它的方式。

我遇到了一个绊脚石。我怀疑它不是 Singly 特有的，但我只是无法弄清楚语法。我特别坚持[授权](https://singly.com/docs/authorization)。我已经完成了第二次回复，文档指出：

> 然后，您将回帖至：
> 
> ```
> https://api.singly.com/oauth/access_token 
> ```
> 
> 在正文中使用以下参数：
> 
> `client_id`您的 Singly OAuth 2 客户端 ID您的 Singly OAuth 2 客户端将在上面的 URL 中传回的代码
> `client_secret` 保密
> `code`

目前，我不断收到错误“没有这样的应用程序” - 我*怀疑*这是因为我没有正确发送数据，因为如果我手动触发请求（使用相同的详细信息），它工作正常。

我坚持的部分是我如何格式化所有内容，大概是`cfhttpparam`带有 type的 a `body`。我知道我只能在 cfhttp 调用中使用一次正文类型。没有迹象表明数据需要以 JSON 等格式发送

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T19:28:12.373

为了其他搜索者的利益，Matt Busche 建议将它们作为标题发送。那没有用，但确实让我尝试将它们作为 formFields 发送，这确实有效。这是工作代码：

```
<cfhttp method="POST" url="https://api.singly.com/oauth/access_token">
    <cfhttpparam type="formField" name="client_id" value="my_client_id">
    <cfhttpparam type="formField" name="client_secret" value="my_client_secret">
    <cfhttpparam type="formField" name="code" value="#url.code#">
</cfhttp> 
```

# regex - 如何匹配用单个空格分隔的单词与用多个空格分隔的单词

> ID：12714827
> 
> 赞同：3
> 
> 时间：2012-10-03T18:45:14.000
> 
> 标签：regex, perl, regex-greedy, lookbehind, negative-lookbehind

我需要将键和值与如下所示的文本分开

> 学生 ID：0
> 部门 ID = 18432
> 姓名 XYZ

```
Subjects:
Computer Architecture
Advanced Network Security 2 
```

在上面的示例中，Student ID、Department ID 和 Name 是键，0,18432、XYZ 是值。键与值通过 :,= 或多个空格分隔。我尝试了reg ex，例如

```
 $line =~ /(([\w\(\)]*\s)*)([=:\s?]?)\s*(\S.*)?$/;
    $key   = $2;
    $colon=$3;
    $value = $4; 
```

我面临的问题是确定一个单词何时用单个空格分隔以及何时被多个空格分隔。

我得到的输出是 line is Student ID: 0 key is Student ， value is ID: 0 而我想要 key is Student ID 并且 value 是 0\. 对于像 Subjects: 和 Computer Architecture 这样的行，键应该有 Subjects 和 Computer Architecture。稍后当没有值或冒号时我有逻辑，我将字符串附加到前一个键，所以它看起来像 Subjects=Computer Architecture;Advanced Network Security 2

更新：感谢 Ikegami 指出我使用后视运算符。但我似乎仍然无法解决它。

```
$line=~/^(?: ( [^:=]+ ) (?<!\s\s)\s* [:=]\s*|\s*)(.*)$/x; 
```

所以当我说`(?<!\s\s)\s* [:=]\s*|\s*`我的意思是当有两个以上的空间时，消耗所有的空间，当没有两个连续的空间时，寻找 : 或 = 并消耗空间。因此，如果您将下面的行传递给表达式，我不应该得到 $1=Name 和 $2=ABC XYZ 吗？

```
Name         ABC XYZ 
```

我似乎得到的是键是空的，值是名称 ABC XYZ。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:53:55.750

如果

```
Name Eric Brine
Computer Architecture x86 
```

方法

```
key: Name Eric               value: Brine
key: Computer Architecture   value: x86 
```

那么你想要

```
# Requires 5.10
if (/
   ^
   (?: (?<key> [^:=]+ (?<!\s) ) \s* [:=] \s* (?<val> .*  )
   |   (?<key> .+     (?<!\s) ) \s+          (?<val> \S+ )
   )
   \s* $
/x) {
   my $key = $+{key};
   my $val = $+{val};
   ...
} 
```

或者

```
if (/
   ^
   (?: ( [^:=]+ (?<!\s) ) \s* [:=] \s* ( .*  )
   |   ( .+     (?<!\s) ) \s+          ( \S+ )
   )
   \s*
   ( .* )
/x) {
   my ($key,$val) = defined($1) ? ($1,$2) : ($3,$4);
   ...
} 
```

* * *

如果

```
Name Eric Brine
Computer Architecture x86 
```

方法

```
key: Name       value: Eric Brine
key: Computer   value: Architecture x86 
```

那么你想要

```
# Requires 5.10
if (/
   ^
   (?: (?<key> [^:=]+ (?<!\s) ) \s* [:=]
   |   (?<key> \S+ ) \s
   )
   \s*
   (?<val> .* )
/x) {
   my $key = $+{key};
   my $val = $+{val};
   ...
} 
```

或者

```
if (/
   ^
   (?: ( [^:=]+ (?<!\s) ) \s* [:=]
   |   ( \S+ ) \s
   )
   \s*
   ( .* )
/x) {
   my $key = defined($1) ? $1 : $2;
   my $val = $3;
   ...
} 
```

* * *

请注意，您可以删除所有空格和换行符。例如，最后一个片段可以写成：

```
if (/^(?:([^:=]+(?<!\s))\s*[:=]|(\S+)\s)\s*(.*)/) {
   my $key = defined($1) ? $1 : $2;
   my $val = $3;
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:50:31.877

尝试将关键部分指定为两个文本位，中间有一个可选空格；

```
$line =~ /([\w\(\)]*\s?[\w\(\)]*)\s*([=:]?)\s*(\S.*)?$/; 
```

这应该捕获一个单词和两个单词的键。

# android - ViewGroup 在 dispatchDragEvent 中抛出 NullPointerException

> ID：12714833
> 
> 赞同：2
> 
> 时间：2012-10-03T18:45:29.377
> 
> 标签：android, gridview, drag-and-drop, android-view, android-gridview

我正在为 GridViews 编写拖放库。我几乎完成了......但是，我时不时地在 ACTION_DROP 上得到一个恼人的 NullPointerException。它指向 ViewGroup 源代码，第 1147 和 1153 行，表示它在尝试回收拖动事件时得到一个空指针。

我的过程的一些背景知识：我基本上是将 OnDragListener 嵌入到 GridView 的自定义适配器中。我让用户（程序员）实现一个 OnGetViewListener，当他们设置 GridView 适配器时，他们可以选择要膨胀的视图、要包含的图像等。然后，在 DragDropAdapter（这是 GridView 的适配器）中，当调用 getView ，它调用指定的 OnGetViewListener 来获取用户想要的 View。它创建一个空的 LinearLayout 作为拖放的容器。将用户的View添加到容器中，给容器设置一个拖拽监听器，将容器的标签设置为GridView对应的数据集合，然后容器就是getView()返回的View。

拖放 GridView 项目的整个过程是基于容器及其标签的。当交换两个 GridView 项目时（当用户拖动项目时），它基本上会从悬停的单元格中删除视图并将其添加到拖动视图刚刚离开的单元格中。这提供了项目的视觉“交换”。

```
public class DragDropAdapter extends BaseAdapter {
...
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LinearLayout containerView = new LinearLayout(mContext);
        containerView.setLayoutParams(new GridView.LayoutParams(
                GridView.LayoutParams.MATCH_PARENT,
                GridView.LayoutParams.MATCH_PARENT));
        View itemView = mGetViewListener.getView(position, convertView, parent);

        itemView.setTag(mItems.get(position));
        containerView.setTag(mItems.get(position));
        containerView.addView(itemView);
        containerView.setOnDragListener(new ItemDragListener());

        return containerView;
    }

    ...

    View mExitedView = null;

    public class ItemDragListener implements OnDragListener {

        public ItemDragListener() {

        }

        private void swapCards(int startPosition, View viewToSwap) {
            if (mExitedView == null) {
                mExitedView = mGridView.getChildAt(startPosition);
            }

            ViewGroup viewToSwapContainer = (ViewGroup) viewToSwap;
            ViewGroup exitedViewContainer = (ViewGroup) mExitedView;

            View childViewToSwap = viewToSwapContainer.getChildAt(0);
            View childViewExited = exitedViewContainer.getChildAt(0);

            int enteredPosition = ItemCoordinatesHelper
                    .getGridPosition(viewToSwap);
            int exitedPosition = ItemCoordinatesHelper
                    .getGridPosition(mExitedView);

            Object itemToSwap = viewToSwap.getTag();
            Object exitedItem = mExitedView.getTag();

            viewToSwapContainer.setVisibility(View.INVISIBLE);
            viewToSwapContainer.setTag(exitedItem);
            viewToSwapContainer.removeAllViews();
            if (childViewExited.getParent() != null)
                ((ViewGroup) childViewExited.getParent()).removeAllViews();
            viewToSwapContainer.addView(childViewExited);

            exitedViewContainer.setTag(itemToSwap);
            exitedViewContainer.removeAllViews();
            if (childViewToSwap.getParent() != null)
                ((ViewGroup) childViewToSwap.getParent()).removeAllViews();
            exitedViewContainer.addView(childViewToSwap);
            exitedViewContainer.setVisibility(View.VISIBLE);
        }

            ...

        @Override
        public boolean onDrag(View v, DragEvent event) {
            // TODO Auto-generated method stub

            View heldView = (View) event.getLocalState();
            int startPosition = ItemCoordinatesHelper.getGridPosition(heldView);

            switch (event.getAction()) {
            case DragEvent.ACTION_DRAG_STARTED:
                break;
            case DragEvent.ACTION_DRAG_ENTERED:
                swapCards(startPosition, v);
                break;
            case DragEvent.ACTION_DRAG_EXITED:
                mExitedView = v;
                break;
            case DragEvent.ACTION_DROP:
                View view = (View) event.getLocalState();
                v.setVisibility(View.VISIBLE);
                view.setVisibility(View.VISIBLE);
                break;
            case DragEvent.ACTION_DRAG_ENDED:
                commitChangesToAdapter();
                mExitedView = null;
                break;
            default:
                break;
            }

            return true;
        }
    }
} 
```

现在，在 ACTION_DRAG_ENDED 上，NullPointerException 被抛出，因为如果我正确理解源代码，由于某种原因它无法回收拖动事件。

更新：这是引发异常的来源：

```
@Override
1100    public boolean dispatchDragEvent(DragEvent event) {
1101        boolean retval = false;
1102        final float tx = event.mX;
1103        final float ty = event.mY;
1104
1105        ViewRootImpl root = getViewRootImpl();
1106
1107        // Dispatch down the view hierarchy
1108        switch (event.mAction) {
1109        case DragEvent.ACTION_DRAG_STARTED: {
1110            // clear state to recalculate which views we drag over
1111            mCurrentDragView = null;
1112
1113            // Set up our tracking of drag-started notifications
1114            mCurrentDrag = DragEvent.obtain(event);
1115            if (mDragNotifiedChildren == null) {
1116                mDragNotifiedChildren = new HashSet<View>();
1117            } else {
1118                mDragNotifiedChildren.clear();
1119            }
1120
1121            // Now dispatch down to our children, caching the responses
1122            mChildAcceptsDrag = false;
1123            final int count = mChildrenCount;
1124            final View[] children = mChildren;
1125            for (int i = 0; i < count; i++) {
1126                final View child = children[i];
1127                child.mPrivateFlags2 &= ~View.DRAG_MASK;
1128                if (child.getVisibility() == VISIBLE) {
1129                    final boolean handled = notifyChildOfDrag(children[i]);
1130                    if (handled) {
1131                        mChildAcceptsDrag = true;
1132                    }
1133                }
1134            }
1135
1136            // Return HANDLED if one of our children can accept the drag
1137            if (mChildAcceptsDrag) {
1138                retval = true;
1139            }
1140        } break;
1141
1142        case DragEvent.ACTION_DRAG_ENDED: {
1143            // Release the bookkeeping now that the drag lifecycle has ended
1144            if (mDragNotifiedChildren != null) {
1145                for (View child : mDragNotifiedChildren) {
1146                    // If a child was notified about an ongoing drag, it's told that it's over
1147                    child.dispatchDragEvent(event); //<-- NULL POINTER HERE
1148                    child.mPrivateFlags2 &= ~View.DRAG_MASK;
1149                    child.refreshDrawableState();
1150                }
1151
1152                mDragNotifiedChildren.clear();
1153                mCurrentDrag.recycle(); //<-- NULL POINTER HERE
1154                mCurrentDrag = null;
1155            } 
```

有没有高手有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-08T04:05:24.350

我有同样的例外，因为我在`ViewGroup`处理 case 时删除了包含可拖动视图的 a `DragEvent.ACTION_DRAG_ENDED`。

`removeView`我的解决方案：通过使用method来延迟方法的执行`post(runnable)`。

# c# - Visual Studio C# Winform Designer 正在为控件成员创建奇怪的代码？

> ID：12714837
> 
> 赞同：1
> 
> 时间：2012-10-03T18:45:33.100
> 
> 标签：c#, winforms, visual-studio-2010, user-interface, controls

谢谢大家的时间。

我正在使用 C# .Net 4.0 和 Visual Studio 2010 Professional。我在表单上有几个按钮、一个富文本框和一个拆分容器。没有很多代码，目前它并没有真正做太多。解决方案中有两个项目：将它们称为 MyProject 和 MySupportProject。该表单位于 MyProject 项目中。

每隔一段时间，当我尝试运行该程序时，就会出现两个错误：

```
'MySupportProject.Properties.Resources' is inaccessible due to its protection level
'MySupportProject.Properties.Resources' does not contain a definition for String1' 
```

所以我去看看设计器，由于某种原因，它一直在填写以下内容：

```
this.rtbStatus.Text = global::MySupportProject.Properties.Resources.String1; 
```

我不知道为什么。我删除它或将其注释掉，它会继续生成该行。表单中的 RTB (RichTextBox) 没有与之关联的文本。

在解决方案属性中，MySupportProject 被列为 MyProject 的依赖项，但我终其一生都无法弄清楚它试图用那个特定的不可见字符串对这个特定的 RichTextBox 做什么。我稍微查看了 MySupportProject 中的资源并找到了定义：

```
 /// <summary>
    ///   Looks up a localized string similar to .
    /// </summary>
    internal static string String1 {
        get {
            return ResourceManager.GetString("String1", resourceCulture);
        }
    } 
```

看起来上面的定义是由某个工具生成的，但我真的不确定它来自哪里。有人在我之前做过这个项目，所以他们可以把它放进去，但我从头开始制作表格，我没有建立联系。有没有人遇到过类似的问题？如果没有，我还应该尝试阻止这种烦人的偶尔构建失败吗？感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:49:10.657

我不完全知道这背后的原因，但你可以用这个替换该行：

```
this.rtbStatus.Text = ""; 
```

或者：

```
this.rtbStatus.Text = null; 
```

另外，尝试删除您的字符串资源。如果你不能这样做：

1.  检查资源文件中是否存储了任何其他资源。
2.  如果是，则将所有其他资源复制到新资源文件中并删除旧文件。
3.  如果没有，那么只需删除旧的资源文件 (.resx) 并创建一个新的资源文件。

# php - 存储每个资产的自定义参数的最佳方式

> ID：12714840
> 
> 赞同：0
> 
> 时间：2012-10-03T18:45:39.123
> 
> 标签：php, mysql, database

我有一张表格，其中包含有关我拥有的每项资产（笔记本电脑、屏幕、台式机、扫描仪等）的信息。我还有另一个表，其中每个资产都有自定义列（因此对于特定桌面，我可以有一个名为“颜色”的自定义列）...快速说明：

资产表

```
AssetID     Description
---------------------------
1           Desktop HP79801 
```

资产自定义列

```
AssetID     Column1     Column2
-----------------------------------
1           Color       BluRay ? 
```

现在我想存储每一列的值。我目前为每个单元做的方式是：

```
AssetID     UnitID      Column1     Column2
-----------------------------------
1           1           Blue        Yes
1           2           Blue        No
1           3           Black       No
1           4           Blue        Yes 
```

现在我的问题是，有没有更有效的方法来做到这一点，我怎样才能以有效的方式将列数增加到无穷大？可能吗 ？

最后，如何高效存储自定义产品属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:50:04.990

简而言之，是的。

你所拥有的东西根本无法扩展。您想要的是为您的资产提供一个表格、一个用于自定义参数的表格和一个“链接”表格。然后，在链接表中输入多个值而不是多个列。

举个例子：

资产表

```
AssetID     Description
---------------------------
1           Desktop HP79801 
```

属性栏

```
AssetAttr       Column1     
-----------------------------------
1               Color
2               Size 
```

链接表

```
AssetID     UnitID      AttrId        AttrValue 
-----------------------------------
1           1           1             Blue
1           1           2             Big
1           2           1             Orange
1           2           2             Giant 
```

如果您的属性都是特定于模型的，您可能还想在`AssetId`您的资产自定义列中添加一列，但我个人不会这样做，除非您的资产根本没有共享属性。

您可能还想进一步标记它。您可能想用数据类型注释属性表，并且可能有另一个与属性表相关的表，其中包含可能的数据值，然后，在您的链接表中，插入来自上述表的条目的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:54:20.643

另一种解决方案是完全使用模式较少的数据库。我最喜欢的是[Mongo](http://www.mongodb.org/)。另一种选择是[CouchDB](http://couchdb.apache.org/)或众多键值数据库之一。

不要在这里开始一场 noSQL 战争，但这些数据库可以更优雅地处理此类情况 - 单个文档可以存储所有数据并在没有任何连接或视图的情况下进行检索。

# javascript - 无法实例化对象数组

> ID：12714848
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:46:14.713
> 
> 标签：javascript, arrays, javascript-objects

我正在尝试加载一个对象数组，它本身就是一个数组，可以这么说。所以我有一组名称（成员），然后我正在制作一个主列表，其中每个名称的一行都会包含名称、错误、增强等。所以我运行了一个简单的 for 循环来加载主列表，但它告诉我对于 (0) i，masterList[i].name 无法加载，因为它未定义。有没有解决的办法？谢谢

```
 var mem = getMembers();//get a array of members
 var memlen = mem.length;
 var masterList = [memlen]; //set to number of members
 for(i=0; i < memlen; i++){  
    masterList[i].name = mem[i];  //set .name to the members list name at i
    masterList[i].bugs = 0; 
    masterList[i].enhance = 0; 
    masterList[i].epic = 0; 
    masterList[i].dev = 0; 
    masterList[i].high = 0;
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:47:16.070

要创建具有预定义大小的数组，请使用以下命令：

```
masterList = new Array(memlen); 
```

（`masterList = [memlen]`您只是创建了一个数组，其第一项是`memlen`。这不是问题，因为数组在循环中自动增长，但这不是您的意图）

之后，您需要创建每个`masterList[i]`：

```
var masterList = new Array(memlen);
for (var i=0; i < memlen; i++){  
    masterList[i] = {};
    masterList[i].name = mem[i];  //set .name to the members list name at i 
```

如果你不这样做，它就是`undefined`，因此你有错误。

我还在`var`循环声明中添加了以避免意外擦除另一个名为`i`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:51:47.950

正确的版本是：

```
var mem = getMembers();//get a array of members
var memlen = mem.length;
var masterList = []; //set to number of members
for(var i=0; i < memlen; i++){  
    masterList[i] = {
        name: mem[i],  //set .name to the members list name at i
        bugs: 0, 
        enhance: 0, 
        epic: 0, 
        dev: 0, 
        high: 0
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:49:59.970

`var x = [7];`不创建 7 元素数组。它创建一个单元素数组，索引为 0，值为 7。您需要`var x = array(7)`在循环中将这些元素中的每一个初始化为一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T18:51:01.877

这没有设置长度。它只是创建一个新的数组，其中一个成员设置为长度。

```
var masterList = [memlen]; //set to number of members 
```

* * *

由于您似乎已经有一个数组，您可以使用它`.map`来构建一个新数组。

```
 var mem = getMembers();
 var masterList = mem.map(function(item) {
    return {
        name: item.name, bugs: 0, enhance: 0, epic: 0, dev: 0, high: 0
    };
 }); 
```

# jquery - jQuery砌体插入错误

> ID：12714849
> 
> 赞同：0
> 
> 时间：2012-10-03T18:46:15.540
> 
> 标签：jquery, json, append

我正在尝试读取一个包含我的推文的 JSON 文件，并在初始化后将它们插入 Masonry 容器，但我不断收到一个错误，在 Masonry 初始化之前我无法附加。无论如何要解决这个问题？

我也尝试过使用 isotope 和 init 回调调用一个函数，然后拉入推文但仍然得到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:59:56.600

这意味着您必须先设置“舞台”。

```
$('.element').masonry(); 
```

完成后，您可以追加和调用`appended`方法。

但是，如果您的马赛克中没有任何内容，只需附加您的推文和通常的初始化砌体（不调用`appended`方法）。

# python - 使用 np.median() 时出现内存错误

> ID：12714851
> 
> 赞同：2
> 
> 时间：2012-10-03T18:46:41.250
> 
> 标签：python, out-of-memory

我有两个文件，我从中读取数据、进行计算和绘制图表。一个文件非常小~50 KB，脚本没有问题。另一个文件是 ~ 702, 900 KB（这是导致问题的文件）。我能够很好地读取数据，但是当我计算这个特定文件的逐行中位数时，脚本失败并给我一个 MemoryError。它如下所示：

```
 RMSDataS1 = [y01S1, y02S1, y03S1, y04S1, y05S1, y06S1, y07S1, y08S1, y09S1, 
         y010S1, y011S1, y012S1, y013S1, y014S1, y015S1, y016S1, y017S1, 
         y018S1, y019S1, y020S1, y021S1, y022S1, y023S1, y024S1, y025S1,
         y026S1, y027S1, y028S1, y029S1, y030S1, y031S1, y032S1, y033S1,
         y034S1, y035S1, y036S1, y037S1, y038S1, y039S1, y040S1, y041S1, 
         y042S1, y043S1, y044S1, y045S1, y046S1, y047S1, y048S1, y049S1,
         y050S1, y051S1, y052S1, y053S1, y054S1, y055S1, y056S1, y057S1,
         y058S1, y059S1, y060S1, y061S1, y062S1, y063S1, y064S1, y065S1, 
         y066S1, y067S1, y068S1, y069S1, y070S1, y071S1, y072S1, y073S1,
         y074S1, y075S1, y076S1, y077S1, y078S1, y079S1, y080S1, y081S1,
         y082S1, y083S1, y084S1, y085S1, y086S1, y087S1, y088S1, y089S1, 
         y090S1, y091S1, y092S1, y093S1, y094S1, y095S1, y096S1, y097S1,
         y098S1, y099S1, y0100S1, y0101S1, y0102S1, y0103S1, y0104S1, y0105S1,
         y0106S1, y0107S1, y0108S1]

    MediansS1 = []
    MediansS1 = np.median(RMSDataS1, axis = 0) 
```

有什么方便的方法来解决这个问题吗？我相信在计算中位数时尝试对数据进行排序时脚本失败了。

错误：

```
 Traceback (most recent call last):
      File "C:\Python27\Lib\site-packages\xy\RMSTrialOriginal-Aera.py", line 511, in <module>
        MediansS1 = np.average(RMSDataS1, axis = 0)
      File "C:\Python27\lib\site-packages\numpy\lib\function_base.py", line 486, in average
        a = np.asarray(a)
      File "C:\Python27\lib\site-packages\numpy\core\numeric.py", line 235, in asarray
        return array(a, dtype, copy=False, order=order)
    MemoryError 
```

任何帮助将不胜感激！

# .net - 为什么 Visual Studio 2010 要求我更新 2010 年创建的解决方案？

> ID：12714855
> 
> 赞同：3
> 
> 时间：2012-10-03T18:47:04.040
> 
> 标签：.net, visual-studio-2010, visual-studio, .net-4.0, .net-4.5

我正在尝试在另一台计算机上打开 VS 2010 解决方案，VS 提示我更新解决方案。我不明白为什么。

这是故事。

我在计算机 A 上使用 Visual Studio 2010 创建了一个解决方案，将其签入 Mercurial 存储库，然后将其推送到中央服务器。然后我继续使用计算机 B，并提取了 repo。当我尝试打开解决方案时，我得到了更新向导。

计算机 A 具有 VS 2010 SP1，计算机 B 具有 VS 2010 SP1 和 VS 2012。两台计算机都具有所需的 .NET Framework 版本，而计算机 A 没有 .NET 4.5。

有人可以解释为什么我需要将解决方案从 2010 年更新到 2010 年吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:40:13.840

事实证明，它想要更新是因为它是 Excel 2007 插件，而我有 Office 2010。默认情况下，Visual Studio 要求您将 Office 项目升级到当前版本。

解决方案是取消选择工具 > 选项 > Office 工具 > 项目升级 > 始终升级到已安装的 Office 版本。

# javascript - 使用提交按钮时，ajax 调用不起作用

> ID：12714857
> 
> 赞同：2
> 
> 时间：2012-10-03T18:47:08.303
> 
> 标签：javascript, jquery, ajax

我正在尝试使用以下 API 获取实时汇率。

```
"http://www.exchangerate-api.com/INR/USD/1?k=FQRxs-xT2tk-NExQj" 
```

当我点击一个按钮时，它会提醒费率并且工作得很好。我正在使用以下 Ajax 代码。

```
<script type="text/javascript" language="javascript">
    function testCurrencyRate()
    {
        $.ajax({
                datatype:"html",
                type: "GET",
                url: "ajax/LiveCurrencyRate.php",
                data: "t="+new Date().getTime(),
                success: function(response)
                {       
                    alert(response);                    
                },
                error: function(e)
                {
                    alert('Error while fetchig the live currency rate.');                       
                }
            }); 
    }
</script> 
```

Ajax 请求转到`LiveCurrencyRate.php`如下页面。

```
$url="http://www.exchangerate-api.com/INR/USD/1?k=FQRxs-xT2tk-NExQj";               
$result = file_get_contents($url);
echo $result; 
```

并且`<form></form>`其中包含唯一的按钮，单击该按钮会在此 URL 上发出 Ajax 请求`ajax/LiveCurrencyRate.php`。

```
<form id="testForm" name="testForm" action="" method="post">    
    <input type="submit" id="btnTestCurrencyRate" name="btnTestCurrencyRate" value="Test" onclick="testCurrencyRate();"/>
</form> 
```

一切安好。然而，当我将按钮类型从 更改为 时，问题就出现`type="button"`了`type="submit"`，它不起作用。Ajax 函数的错误部分的**警告框只显示了一段时间，然后突然消失了**。我找不到任何可能阻止此请求完成的合理原因。在我以前的项目中，同样的事情对我有用，但我`XMLHttpRequest`用于发出 Ajax 请求。这里出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T18:48:56.323

`type="submit"`导致 Web 浏览器通过回发提交表单（因为您的`method`属性设置为“POST”），从而导致页面刷新。标签的`action`属性`<form>`决定了数据被发送到哪里，然后页面加载提供的数据。发生这种情况时，页面上的所有 javascript 都会终止，因为您实际上要转到另一个页面或重新加载当前页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T18:49:04.900

该页面正在提交，因为您没有取消单击的默认操作。您需要阻止该事件的发生。使用您的代码，您可以将 a 添加`return false`到 onclick，但最好以不显眼的方式添加事件。

```
$("#btnTestCurrencyRate").on("click",function(e){
    testCurrencyRate();
    e.preventDefault();
}); 
```

最好在表单提交时抓住它而不是点击

```
$("#testForm").on("submit",function(e){
    testCurrencyRate();
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T18:50:35.620

当您单击提交按钮时，您的表单将被发布到您的 Web 服务器。您需要使用以下方式阻止表单发布：

```
$("#testForm").submit(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-03T18:50:52.997

因为您的页面正在提交。如果要阻止提交，则需要从 onclick 处理程序返回 false。

HTML：

```
<input type="submit" id="btnTestCurrencyRate" name="btnTestCurrencyRate" value="Test"/> 
```

JS：

```
document.getElementById('btnTestCurrencyRate').onclick = testCurrencyRate;

function testCurrencyRate() {
    ... snip ...
    return false;
} 
```

# java - git java wrapper - git pull 永远不会结束

> ID：12714858
> 
> 赞同：2
> 
> 时间：2012-10-03T18:47:09.890
> 
> 标签：java, git

我正在为 git 可执行文件创建一个简单的 Java 包装器，我想在我的应用程序中使用它。一个小代码示例：

```
public static void main(String[] args) {
        String gitpath = "C:/eclipse/git/bin/git.exe";
        File folder = new File("C:/eclipse/teste/ssadasd");
        try {
            folder.mkdirs();
            Runtime.getRuntime().exec(
                    gitpath + " clone git@192.168.2.15:test.git", null,
                    folder);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

代码永远不会结束执行.. 似乎它已经陷入了内部`exec`。如果我通过命令行运行 git clone，它会按预期工作。如果我从 github 尝试另一个存储库，例如，它也可以工作。

有人知道这里发生了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:55:44.820

`Runtime.getRuntime().exec`返回一个[`Process`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html)对象，您可以使用该对象与进程交互并查看发生了什么。我的怀疑是你只需要做这样的事情：

```
Process p = Runtime.getRuntime().exec(
    gitpath + " clone git@192.168.2.15:test.git", null,
    folder);
p.waitFor(); 
```

如果没有，你也可以做`getErrorStream()`或`getOutputStream()`在过程中查看它写出的内容；这可能有助于调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:57:43.420

这不是对您问题的直接回答，但您可能想看看[JGit](http://www.eclipse.org/jgit/)，它是 Git 操作的直接 Java 实现（不包装命令行 git）。JGit 得到了很多使用和稳定工作，因为它是 EGit（Eclipse Git 集成）的基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:21:12.343

`Runtime.exec()`在各种情况下可能会导致挂起 - 请参阅引用[Javadoc的](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)[这篇文章](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1)，其中说（在 JDK 7 中）：

> 由于一些原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

文章给出了一些示例解决方案，它们消耗了输出和错误流，虽然我认为 ProcessBuilder 类是在文章写完之后引入的，所以可能更令人满意：较新的 Javadoc 增加了：

> 如果需要，[也可以](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirect-input)使用 ProcessBuilder 类的方法重定向子进程 I/O。

# objective-c - Xcode 4：在不同文件的方法中加载 Nib

> ID：12714861
> 
> 赞同：1
> 
> 时间：2012-10-03T18:47:16.323
> 
> 标签：objective-c, xcode, xcode4.3, nib, loadnibnamed

抱歉，如果这个问题很简单，但过去 2 天我一直被困在这个错误上，而且我无法克服它。我正在使用 Xcode 4.3.2

我正在尝试在名为 BController.m 的文件中名为“- (void) process”的方法中加载一个名为 AController.xib 的 nib

为了清楚起见，我将 ./A/AController.xib（这是一个 UIView）、./A/AController.m、./A/AController.h 复制到目录 ./B

我只提到这一点是因为我不确定这对我的问题是否重要。

目前，我的流程作为流程工作（这可能是我的问题）：

*   带有“购买”按钮的视图加载
*   用户单击“购买”按钮，该按钮有一个名为“buyNow”的 IBOutlet
*   “buyNow”调用“buy”，然后调用“process”
*   然后进程尝试使用以下内容（选项 1）加载 nib：

    控制器 *blah; for (id object in bundle){ if ([object isKindOfClass:[AController class]]) blah = (AController *) object; } assert(blah != nil && "blah can't be nil"); [self.view addSubView: blah];

我在这里得到的错误是 main.m 中的“线程 1：信号 SIGABRT”我也尝试过（选项 2），

```
AController *myView = [[AController alloc] initWithFrame:self.view.bounds];
[self.view addSubview:myView];
[AController release]; 
```

和（选项 3）

```
AController * vc = [[AController alloc] initWithNibBundle:@"AController" bundle:nil];    [self.nc pushViewController:vc animated:NO]; 
```

对于所有 3 个选择，我都得到相同的错误。在方法“过程”中尝试了每个选项。“过程”是用 Bm 写的，谁能提供一些帮助，以便我弄清楚这一点？关于这些选项为何失败的任何指导都将非常有助于我的理解，并将不胜感激。感谢您帮助菜鸟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:50:32.560

如果`AController`是`UIView`子类，则无法加载 NIB。验证它实际上是一个控制器，但从`initWithFrame`你将它添加到视图的方式和方式来看，它看起来不是，或者处理不正确。

# ios - 是一种延迟dismissModalViewControllerAnimated的方法吗？

> ID：12714865
> 
> 赞同：0
> 
> 时间：2012-10-03T18:47:43.947
> 
> 标签：ios

我想从完成块内弹出一个显示，但我也想从同一个块内dismissModalViewControllerAnimated（但在弹出窗口完成之后）。请注意，弹出窗口计划并在完成块执行完成后运行，这意味着它永远不会发生，因为解雇是同步的......

因此，一个快速的解决方法是找到一种在弹出窗口后异步安排解雇的方法。有链接方法吗？一种强制保持异步任务运行并等待它们的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:15:03.690

使用`-performSelector:withObject:afterDelay:`. 您需要将解雇包装在与 所需的签名匹配的选择器中`-performSelector:...`，因为`dismissModalViewControllerAnimated:`需要`BOOL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:33:23.633

您可以使用 dispatch_after 代替，它会被动画地关闭。检查这个简单的示例代码：

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [self dismissModalViewControllerAnimated:YES];
}); 
```

# android - 使用 ActionBarSherlock 的基本三选项卡导航

> ID：12714866
> 
> 赞同：2
> 
> 时间：2012-10-03T18:47:49.210
> 
> 标签：android, actionbarsherlock

我刚刚开始使用 ActionBarSherlock，并且很高兴获得一个与演示“选项卡导航”非常相似的样式化的三个选项卡界面。下一步当然是用有用的东西填充这些选项卡。我查看了片段演示，特别是“选项卡”，我试图实现该解决方案，但对于我正在寻找的东西来说似乎太复杂了。我不需要堆叠、节流和自定义加载。我只想在每个选项卡中填写一个基本活动，或者我认为以前会被视为活动的内容。谁能提供有关设置加载 xml 布局文件并具有我熟悉的常规方法的简单片段或片段活动的见解？我什至走在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:19:41.453

[http://vinaygopinath.wordpress.com/2012/05/24/navigation-tabs-with-fragments-using-actionbarsherlock/](http://vinaygopinath.wordpress.com/2012/05/24/navigation-tabs-with-fragments-using-actionbarsherlock/)

结果证明这是一个可靠的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:26:58.357

这是基本 SherlockFragment 的声明

```
public class FirstFragment extends SherlockFragment {

    Button button;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.layout_fragment, null, false);
        button = v.findViewById(R.id.button);
        button.setOnClickListener(....);
        return v;
    }
} 
```

您可以注意到，您已经在 onCreateView 方法内的 Fragment 中膨胀了要显示的布局，您还可以在其中初始化布局组件（例如为按钮设置 onClickListener）。

如果您想了解更多，请查看此页面：http: [//developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

# c++ - Libtool 在构建共享库时丢弃静态库

> ID：12714869
> 
> 赞同：0
> 
> 时间：2012-10-03T18:48:02.590
> 
> 标签：c++, static, shared, automake, libtool

我正在尝试为 gstreamer 构建一个共享对象。我有一个需要链接到它的静态库。

我已经尝试了很多东西，但是无论什么 libtool 都会丢弃我的共享库。

我试过了：

1.  `-Wl,--whole-archive ${EZSDK}/linux-devkit/arm-none-linux-gnueabi/usr/lib/ti/sdo/linuxutils/cmem/lib/cmem.a470MV -Wl,--no-whole-archive` 但是 libtool 只是将其删除并显示 `-Wl,--whole-archive -Wl,--no-whole-archive`

2.  我试图将其添加到，`mylib_la_LIBADD=$(EZSDK)/linux-devkit/arm-none-linux-gnueabi/usr/lib/ti/sdo/linuxutils/cmem/lib/cmem.a470MV`但这也不起作用。libtool 回显显示 cmem.a470MV，但是当它执行链接时，存档消失了。

有人可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:48:56.523

我通过给 libtool 手指并指定

```
-Wl,--whole-archive -Wl,${EZSDK}/linux-devkit/arm-none-linux-gnueabi/usr/lib/ti/sdo/linuxutils/cmem/lib/cmem.a470MV -Wl,--no-whole-archive 
```

或者，您可以：

```
-Wl,--whole-archive,${EZSDK}/linux-devkit/arm-none-linux-gnueabi/usr/lib/ti/sdo/linuxutils/cmem/lib/cmem.a470M,--no-whole-archive 
```

# c - GLib 分配字符串作为哈希表的键

> ID：12714871
> 
> 赞同：1
> 
> 时间：2012-10-03T18:48:10.313
> 
> 标签：c, glib

我使用 malloc 的字符串作为 GLib 哈希表的键。然后我有几个更新要做。每次更新都使用一个新分配的字符串，该字符串在实际字符序列中是相同的。如果我进行插入，旧字符串会被覆盖吗？我怎样才能确保释放它，这样我就不会保留多余的副本？如果它没有被覆盖，我怎样才能确保实现更新而不会太慢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:30:10.117

如果您在创建哈希表时提供了正确的比较器和键/值析构函数`g_hash_table_new_full`，则无需做*任何*额外的事情。该表将*理解*密钥字符串是相同的，即使它们是单独的副本，它也会自动释放相同密钥的重复副本。

这是一个示例（丑陋`printf`的 s 仅用于显示正在发生的事情）：

首先你写一个*析构函数*：

```
void
free_data (gpointer data)
{
  printf ("freeing: %s %p\n", (char *) data, data);
  free (data);
} 
```

然后你实例化并玩弄`GHashTable`：

```
int main (void)
{
  char *key, *val;
  GHashTable *hash_table
  = g_hash_table_new_full (g_str_hash,  /* Hash function  */
                           g_str_equal, /* Comparator     */
                           free_data,   /* Key destructor */
                           free_data);  /* Val destructor */
  /* Insert 'k_1' */
  key = strdup ("k_1");
  printf ("%s %p\n", key, key);
  val = strdup ("v_1");
  printf ("%s %p\n", val, val);

  printf ("inserting\n");
  g_hash_table_insert (hash_table, key, val);
  printf ("insert finished\n");

  /* Insert 'k_1' again using new strings */
  key = strdup ("k_1");
  printf ("%s %p\n", key, key);
  val = strdup ("new_v_1");
  printf ("%s %p\n", val, val);

  printf ("inserting\n");
  g_hash_table_insert (hash_table, key, val);
  printf ("insert finished\n");

  g_hash_table_unref (hash_table);

  return 0;
} 
```

这是测试运行的样子：

```
k_1 0x80cce70
v_1 0x80cce80
inserting
insert finished
k_1 0x80cce90
new_v_1 0x80ccea0
inserting
freeing: k_1 0x80cce90
freeing: v_1 0x80cce80
insert finished
freeing: k_1 0x80cce70
freeing: new_v_1 0x80ccea0 
```

您会看到，如果您创建一个与现有密钥相同的“新”密钥，并尝试插入相应的“新”值，那么“插入”操作会自动销毁“新”密钥（因为它*与*现有的），以及旧值（因为必须用新值替换它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:30:42.987

使用，仅当您在使用 创建哈希表时[`g_hash_table_insert ()`](http://developer.gnome.org/glib/2.31/glib-Hash-Tables.html#g-hash-table-insert)提供了 a 时，才释放键值。如果您使用创建哈希表，则必须在插入后释放您的密钥（如有必要）。`key_destroy_func`[`g_hash_table_new_full`](http://developer.gnome.org/glib/2.31/glib-Hash-Tables.html#g-hash-table-new-full)[`g_hash_table_new`](http://developer.gnome.org/glib/2.31/glib-Hash-Tables.html#g-hash-table-new)

# asp.net-mvc - 剑道，如何使用 mvc4 助手进行网格服务器分页

> ID：12714872
> 
> 赞同：3
> 
> 时间：2012-10-03T18:48:17.593
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 mvc4。在我的一个页面上，它有 Kendo Grid。我想每页显示 5 行。但是，如果我使用的是 mvc 助手，我使用纯 javascript 来做这件事没有问题。我迷路了，在网上找不到任何样品。

这是我的 JavaScript 代码。

```
 <script language="javascript" type="text/javascript">

            $(document).ready(function () {
                $("#grid").kendoGrid({
                    dataSource: {
                        type: "json",
                        serverPaging: true,
                        pageSize: 5,
                        transport: { read: { url: "Products/GetAll", dataType: "json"} },
                        schema: { data: "Products", total: "TotalCount" }
                    },
                    height: 400,
                    pageable: true,
                    columns: [
                            { field: "ProductId", title: "ProductId" },
                            { field: "ProductType", title: "ProductType" },
                            { field: "Name", title: "Name" },
                            { field: "Created", title: "Created" }
                        ],
                    dataBound: function () {
                        this.expandRow(this.tbody.find("tr.k-master-row").first());
                    }
                });
            }); 
```

现在如果我使用 mvc 助手

```
 @(Html.Kendo().Grid(Model)
                .Name("Grid")  //please help me to finish the rest 
```

**更新**：

添加操作代码。

```
 [HttpPost]
    public ActionResult GetAll([DataSourceRequest]DataSourceRequest request, int id)
    {
        var products= ProductService.GetAll(id);

        return Json(products.ToDataSourceResult(request));
    } 
```

服务层的GetAll方法：

```
 public IQueryable<Product> GetAll(int id)
    {
        var products= ProductRepository.Get(p => p.Id== id && p.IsActive == true, null, "ProductionYear")
                    .OrderBy(o => o.Name); //.ToList();

        return Product.Select(p => new ProductVM()
        {
            Name = p.Name,
            ProductionYear= p.ProductionYear.Year.ToString()
            Id = p.Id
        }).AsQueryable();
    } 
```

现在，如果我运行该应用程序，我将收到以下错误：

“LINQ to Entities 无法识别 'System.String ToString()' 方法，并且该方法无法转换为存储表达式。”}

在 GetAll 方法中，我注释掉了“ToList()”。如果我使用 ToList，一切正常。但我将查询所有行，而不是只查询该页面所需的那些行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T19:03:19.180

你可以在[DataSource方法](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding)`PageSize`里面设置。所以你需要类似的东西：

```
@(Html.Kendo().Grid(Model)
     .Name("Grid") 
     .DataSource(dataSource => dataSource.Ajax()
                                    .PageSize(5)
                                    .Read(c => c.Action("GetAll", "Products")
                                    .Model(s => s.Id(m => m.Id)))
     .Columns(columns =>
     {
        columns.Bound(m => m.ProductId).Title("ProductId");
        //other colums
     })
    .Events(g => g.DataBound("somefunction"))
    .Pageable(true)) 
```

[您可以在 KendoUI Grid 的Asp.NET MVC 包装器文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/overview)中找到更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T14:04:09.933

如果您**没有**使用 Kendo 的 ASP.NET MVC 包装器并且直接使用 Kendo JavaScript 对象**并且**您正在尝试进行服务器端分页，那么您需要按如下方式创建数据源：

```
var dataSource = {
    "type":"aspnetmvc-ajax",
    "serverSorting": true,
    "serverPaging": true,
    "page": 1,
    "pageSize": 8,
    "schema": {
      "data":"items",
      "total":"count",
      "errors":"errors"
    }
}; 
```

您的 Read 控制器方法将类似于：

```
 public ActionResult List_Read([DataSourceRequest]DataSourceRequest request) {
        try {
            var model = null /* prepare your model object here contain one page of grid data */;

            // using Json.NET here to serialize the model to string matching the
            // schema expected by the data source
            var content = JsonConvert.SerializeObject(new { count = model.Count, items = model.Items }, Formatting.None);

            return Content(content, "application/json");
        }
        catch (Exception exception) {
            // log exception if you need to

            var content = JsonConvert.SerializeObject(new { errors = exception.Message.ToString() }, Formatting.None);

            return Content(content, "application/json");
        }
    } 
```

`type`，`serverSorting`并且`serverPaging`对于确保分页和排序发生在服务器端很重要。`type` **必须**是`aspnetmvc-ajax`，否则查询数据将无法被 Read 方法中的 [DataSourceRequest] 属性指定的模型绑定器识别。除非您想编写自己的自定义模型绑定器来解析 kendo 数据源发送的查询数据，否则不能省略该属性，这不符合 ASP.NET MVC 中 DefaultModelBinder 使用的模型绑定约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T19:41:10.130

如果您将 Kendo UI 用于 ASP.NET MVC，则另一个答案将起作用。如果不需要，则需要自己实现分页。Kendo DataSource 将在发出请求时发送 pageSize 和当前页面。您可以使用它来进行分页。它还发送“take”和“skip”，让事情变得更容易（提示 Linq）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T02:45:30.230

错误“LINQ to Entities 无法识别方法 'System.String ToString()' 方法，并且此方法无法转换为存储表达式。”} 是不言自明的，要解决这个问题，您应该执行类似的操作

```
return Product.**AsEnumerable**.Select(p => new ProductVM()
        {
            Name = p.Name,
            ProductionYear= p.ProductionYear.Year.ToString()
            Id = p.Id }); 
```

使用 AsEnumerable 会带来数据库中的所有记录，因此最好在任何过滤后使用

```
products.where(x => x.active = true).AsEnumerable 
```

而不是 products.AsEnumerable.where(x => x.active = true)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T14:21:39.140

下载 kendo 示例，然后解压缩并按照 `<your directory>\Kendo UI`ASP.NET MVC Q1`2013\wrappers\aspnetmvc\Examples\Areas\razor\Views\web\grid\` 的视图索引和 `<your directory>\Kendo UI`ASP.NET MVC Q1`2013\wrappers\aspnetmvc\Examples\Controllers` 的 IndexController

在您看来，您可能还希望 .ServerOperation(true) 如下所示，以避免使用 JSON JavaScriptSerializer 在序列化或反序列化期间出错。字符串的长度超过了 maxJsonLength 属性上设置的值。如果您有大数据要获取

```
@(Html.Kendo().Grid(<yourmodel>)
    .Name("Grid")
    .Columns(columns =>
       ...
    })

        .Filterable()
        .Pageable()

        .DataSource(dataSource => dataSource
            .Ajax()
            .PageSize(8)
            .ServerOperation(true) )

            .Model(model =>
            {
                model.Id(p => p.Id);
                ...
            })
        )
    ) 
```

也在控制器中的 ActionResult Products_Read 考虑

```
 DataSourceResult result = GetProducts().ToDataSourceResult(request,  o => new { Id = o.Id, ... } );
  return Json(result , JsonRequestBehavior.AllowGet); 
```

# asp.net - 实体框架：映射没有参照完整性的现有表

> ID：12714875
> 
> 赞同：1
> 
> 时间：2012-10-03T18:48:23.087
> 
> 标签：asp.net, entity-framework, entity-framework-5

在这种情况下，我有一个包含三个模型的现有数据库：

`Address`，它有一个'AddressId'，'ParentId'，'City'，'State'等

`Person`，它有一个“PersonId”、“Name”等。

`Company`，它有一个“CompanyId”、“Name”等。

因为`Address`可以包含更多模型的行而不仅仅是一个表，所以没有外键；“ `Address`ParentId”列将包含“PersonId”或“CompanyId”。

为了生成我的`DbContext`.，我使用了 Entity Framework Power Tools Beta 2。由于缺乏参照完整性，它生成的类`Person`不`Company`包含它们应该包含的地址集合。

我将如何更改这些类以添加到此“地址”属性中，并确保它正确映射到地址表？

目前我正在做这样的事情；如果可能的话，我宁愿有上下文映射：

```
public IEnumerable<Address> Addresses
{
   get 
   {
       IEnumerable<Address> addresses = null;
       using(MyDb db = new MyDb())
       {
            addresses = db.Addresses.Where(a => a.ParentId == this.PersonId)
       }

       return addresses;
   }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:21:53.467

如果可以的话，您应该在地址表中添加一个唯一的 id，然后将该 id 与其所属的实体一起存储，无论是个人、公司、供应商等。

如果由于多地址情况而不能，那么您可以创建一个新表 AddressXRef 表来存储实体（供应商、人员、公司等）的 GUID 和地址的 GUID；所以每个实体都可以有多个地址，并且 EF 会对这个设置非常满意，因为周围会有钥匙。

（我还想要外部参照表上的某种地址类型指示器，这样我就知道它是什么类型的地址，邮寄、运输等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:14:18.417

为两者创建部分类，`Company`并且`Person`它们具有您在其中创建的属性。

```
public partial class Company
{
   public IEnumerable<Address> Addresses { ... }
} 
```

# ruby-on-rails - 在 Rails datetime_select 中将日期/时间留空

> ID：12714877
> 
> 赞同：3
> 
> 时间：2012-10-03T18:48:34.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, scaffolding

`datetime_select`有没有一种简单的方法可以选择不在使用,`date_select`或的 Rails 表单中指定日期或日期时间`time_select`？默认情况下，这些字段设置为当前日期/时间，并且无法不选择日期/时间。

使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:53:05.453

您想要的是`include_blank`选项：（[datetime_select 上的 Nil 值？](https://stackoverflow.com/questions/559584/nil-value-on-datetime-select)）

```
f.datetime_select :attr_name, include_blank: true 
```

# visual-studio-2010 - 如何在 Visual Studio (2010) 项目中使用第三方 SDK/库？(OpenGL/FreeGLUT/GLEW)

> ID：12714878
> 
> 赞同：0
> 
> 时间：2012-10-03T18:48:37.973
> 
> 标签：visual-studio-2010, opengl-es-2.0, glut, freeglut, glew

在过去的两年里，我一直在使用 Java 和 NetBeans，在我的项目中添加一个新的第三方库所需要做的就是放入 .jar 文件，其余的由 NetBeans 完成。

最近我已经切换到 C++ 和 Visual Studio，由于“缺少参考”错误，我很难让项目使用 OpenGL、GLUT 和 GLEW 进行编译。

一些教程告诉我需要下载 GLUT/GLEW 的项目并运行它们（这不起作用），一些教程告诉我需要将 .dll 文件添加到我的 Win32 文件夹中，其他人说只需将头文件放入与您的项目相同的目录，有人说我需要将这些库安装到 Visual Studio 本身，而不仅仅是我的项目。

到目前为止，这些方法都没有奏效。

我想要的只是让这个项目使用这些库。目前，这对我来说是一个重要的工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:08:42.647

对不起，我没有一个简单的答案给你。多年来，我一直在 Windows 上使用 OpenGL，这可能会很痛苦。

MS 甚至（真的）不支持 OpenGL，Windows 附带的头文件是旧的 1.x 头文件——而且他们没有改变它的计划（他们希望你使用 DX）。

所以，我会从小处着手。

首先，运行一个基本为空的 Win32 控制台“Hello World”应用程序。

然后，*只需*添加一个组件，例如 Glut。

然后，做同样的事情——保持编译/链接——逐步添加其他组件。

无论他们告诉您将标头、库、DLL 等放在哪里，都需要在您的项目文件中反映出来。所以：

*   将头文件的位置添加到“C/C++->Additional Include Directories”
*   将 .lib 文件添加到“链接器->输入->附加依赖项”
*   （它仍然找不到它们）将 .lib 文件的位置添加到“链接器->常规->附加库目录”

有了所有这些，它应该可以编译和链接，但可能无法继续运行，因为它找不到 DLL（与 .lib 文件一起使用）。

运行的最短路径可能只是将 DLL 转储到 Windows/System32 文件夹中。但从长远来看，这可能会出现问题，因为其他应用程序可能会覆盖它（或将您视为覆盖他们的应用程序）。

我对特定 DLL 所做的只是在我的应用程序中显式加载它们，这样我就可以确定我得到的是什么 DLL（我没有做太多特定于 Windows 的 GL，但是当我这样做时，我有自己的 \OpenGL 目录我想要的 .h 文件、库和 DLL 的版本）。

祝你好运！

哦，LoadLibrary() 将加载一个 DLL 等。

# c# - 使用 C# 和 ASP.NET 从 Memorystream 保存图像

> ID：12714882
> 
> 赞同：1
> 
> 时间：2012-10-03T18:48:46.510
> 
> 标签：c#, asp.net

我正在使用内存流通过 FileUpload 控件调整图像大小。在它调整大小后，我希望它保存到我的文件系统中`"~/images/2012/" + filename`。

如何从内存流中保存图像？

```
System.Drawing.Image imageLarge = System.Drawing.Image.FromStream(stream);
System.Drawing.Image imageLarge1 = ResizeImage(imageLarge, 200, 300);

MemoryStream memolarge = new MemoryStream();
imageLarge1.Save(memolarge, System.Drawing.Imaging.ImageFormat.Jpeg);
System.Drawing.Image returnImage = System.Drawing.Image.FromStream(memolarge);

Encoder myEncoder;
EncoderParameter myEncoderParameter;
EncoderParameters myEncoderParameters;
myEncoder = Encoder.Quality;
myEncoderParameter = new EncoderParameter(myEncoder, 100L);
myEncoderParameters.Param[0] = myEncoderParameter;

string convertedImage = returnImage.ToString();
returnImage.Save("~/images/2012/" + filename, 
    ImageFormat.Jpeg, myEncoderParameters); 
```

这是我与重载方法错误相处的错误：

> 无法从“System.Drawing.Imaging.ImageFormat”转换为 System.Drawing.Imaging.ImageCodecInfo

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:52:58.033

查看 的重载[`Image.Save`](http://msdn.microsoft.com/en-us/library/8ex6sdew.aspx)。

只有最后两个接受`EncoderParameters`，而且他们都不接受`ImageFormat`- 都接受`ImageCodecInfo`。

能够自己诊断此类问题非常重要：

*   *仔细*看编译错误
**   阅读文档*   检查您拨打的电话是否有意义*

 *这与特别保存到 a 无关`MemoryStream`- 事实上，尚不清楚为什么要保存 an`Image`然后立即`Image`从同一流中加载 an 。`Position`（无论如何，如果您真的想继续这样做，我建议您在这样做之前将其设置为 0。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:51:54.747

试试这条线：

```
returnImage.Save(
    "~/images/2012/" + filename,
    ImageCodecInfo.GetImageEncoders()
        .Where(i => i.MimeType == "image/jpeg")
        .First(),
    myEncoderParameters); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:59:14.467

请参阅[在 c# 中从 memorystream 中保存为 jpeg](https://stackoverflow.com/questions/10661967/saving-as-jpeg-from-memorystream-in-c-sharp)后， 它的功能与您正在寻找的内容非常相似。

还要正确更改编解码器 [http://msdn.microsoft.com/en-us/library/ytz20d80.aspx](http://msdn.microsoft.com/en-us/library/ytz20d80.aspx)*

# version-control - Flyway - 支持同时版本/多个分支

> ID：12714883
> 
> 赞同：7
> 
> 时间：2012-10-03T18:48:47.523
> 
> 标签：version-control, version, flyway

有谁知道允许大型项目（有许多工程师并行工作）使用[Flyway](http://code.google.com/p/flyway/)处理版本控制的好方法？我们经常发现，在合并到 master 期间，我们最终会因为 2-3 个独立项目需要更改数据库，并且使用相同的版本号而导致合并冲突。

在这种情况下，我什至不确定 Rails 样式的版本控制时间戳是否有效，因为您不一定知道合并到 master 的顺序。

除了必须在合并之前重新编号迁移之外，有什么好的技巧可以解决这个问题？

汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:27:14.017

重新编号当然是一种方法。

另一个避免版本号冲突的简单技术是拥有一个白板或一个简单的 wiki 页面，每个开发人员在开始工作时都可以在其中保留一个版本号。

或者，Flyway 1.8 将很快推出，它将包含一个功能，可以选择允许迁移无序运行。然而，这并非在所有情况下都没有风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T20:46:42.850

我见过的克服分支之间的版本控制问题以启用 outOfOrder 并使用时间戳作为版本号的最佳方法

在这里查看我的答案：[使用功能分支时如何使用 Flyway](https://stackoverflow.com/questions/9497035/how-to-use-flyway-when-working-with-feature-branches/34599349#34599349)

# python - python中从列表中查找具有特定属性值的对象的最快方法？

> ID：12714884
> 
> 赞同：2
> 
> 时间：2012-10-03T18:48:54.480
> 
> 标签：python, list, class, uniqueidentifier, loops

从对象列表中找到在特定属性上具有特定值的对象的最快和/或最简单（速度首选）的方法是什么。我得到了一个正在循环的类列表，我还得到了一个对象列表，我需要查看该对象是否是当前正在循环的类的实例。到目前为止，这是我一直在使用的东西，但出于速度目的，这让我很头疼。

```
for cSoldier in soldierlist:
    exists = False
    for soldier in user.soldiers:
        if cSoldier.id == soldier.id:
            exists = True
            break
    if not exists:
        user.soldiers.append(cSoldier()) 
```

`soldierlist`适用于所有不同的士兵类别，例如狙击手类、骑士类等。

`user.soldiers`用于为该游戏的每个用户存储每种士兵类型的一个实例

`id`每个士兵类都有其唯一的 classid，并且它也被赋予该类的每个实例，以识别实例的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:56:49.320

如果你`__hash__`在你的士兵类中定义返回士兵`id`并定义`__eq__`来测试是否`id`相等，你可以尝试这样的事情：

```
user.soldiers = list(set(user.soldiers + soldierlist)) 
```

* * *

所以，在你的士兵班的某个地方：

```
def __hash__(self):
    return self.id

def __eq__(self, other):
    return self.id == other.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:11:47.563

这是一种避免不断重新扫描列表的方法

```
current_ids = set(soldier.id for soldier in user.soldiers)
for soldier_class in soldierlist:
    if soldier_class.id not in current_ids:
         user.soldiers.append( soldier_class() ) 
```

通过将所有 id 存储在集合中，查找它们可以比重新扫描列表快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T12:09:53.077

我知道为时已晚，现在可能没用，但我遇到了同样的问题。所以，为了记录。我的解决方法是制作一个对象列表和一个对象索引：

```
class Soldier:

soldiers = []
soldier_list = []

s_data = {"name":"jim", "id":"foo","type":"bar"}

name = soldier.get("name")
if name not in soldier_list:
    soldiers.append(Soldier(**s_data)) #creates a object with s_data attribs
    soldier_list.append(name) 
```

# java - SurfaceView 和线程已启动异常

> ID：12714887
> 
> 赞同：0
> 
> 时间：2012-10-03T18:49:02.750
> 
> 标签：java, android, multithreading, thread-safety

检查 LunarLander 示例，它使用该代码恢复抽屉线程：

```
public void surfaceCreated(SurfaceHolder holder) {
    // start the thread here so that we don't busy-wait in run()
    // waiting for the surface to be created
    thread.setRunning(true);
    thread.start();
} 
```

最后：

```
public void surfaceDestroyed(SurfaceHolder holder) {
    // we have to tell thread to shut down & wait for it to finish, or else
    // it might touch the Surface after we return and explode
    boolean retry = true;
    thread.setRunning(false);
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {
        }
    }
} 
```

但是当我执行项目时，按下主页按钮并恢复它崩溃的应用程序

```
 java.lang.IllegalThreadStateException: Thread already started.
    at java.lang.Thread.start(Thread.java:1045)
    at com.example.android.lunarlander.LunarView.surfaceCreated(LunarView.java:862)
    at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
    at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:226)
    at android.view.View.dispatchWindowVisibilityChanged(View.java:5839)
    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945)
    at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:945) 
```

我在其他示例中看到了这种处理后台线程的方法，但它崩溃了。它有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T19:06:03.933

您的线程仍在运行，我猜您没有正确停止它。你必须打断你的线程或者我就是这样解决它的。因此，不要使用 setRunning 和布尔值来使您的线程运行，您可以使用以下内容：

开始它：

```
public void surfaceCreated(SurfaceHolder holder) {
    thread.start();
} 
```

在线程中：

```
public void run() {

    try {
        while (true) {
            // code here
        }
    }
    catch (InterruptedException e) {
         //disable stuff here
    }
} 
```

并阻止它：

```
public void surfaceDestroyed(SurfaceHolder holder) {
    thread.interrupt();
} 
```

我只是快速输入了这个，但它应该给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T10:04:49.907

你可以这样做：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    if (!thread.isAlive()) {
        thread.start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-26T03:20:40.330

这就是我解决这个问题的方法。在surfaceCreated 方法中，线程的状态可能已更改为TERMINATED。您需要创建一个新的线程。

```
@Override
 public void surfaceCreated(SurfaceHolder holder) {
     bgSurfaceThread = bgSurfaceThread.getState().equals(Thread.State.TERMINATED) ? bgSurfaceThread : new BackgroundSurfaceThread(BackgroundSurfaceView.this);
    bgSurfaceThread.setRunning(true);
   bgSurfaceThread.start();
} 
```

# c++ - 任意代码的休眠功能

> ID：12714904
> 
> 赞同：0
> 
> 时间：2012-10-03T18:50:09.517
> 
> 标签：c++, serialization

因此，当我考虑数据序列化及其与 Windows 休眠的相似性时，我就想到了这一点。当您休眠系统时，操作系统不关心单个程序以及它们是否可以序列化/反序列化其数据。它只是将整个内容转储到磁盘，然后您可以恢复您一直在做的任何事情。

问题来了：Windows 如何在不关心每个单独程序的情况下做到这一点？是否有可能以某种方式为您的代码模拟它，以便您可以将其“转储”到磁盘并稍后恢复它而无需编写序列化/反序列化方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:59:03.307

Windows 通过暂停每个进程的执行并将活动（分配的）内存页面写入磁盘来实现这一点。当此内存稍后恢复并且内核启动时，它能够从中断的地方恢复所有内容，因为从它的角度来看，内存实际上并没有改变。就好像它只是冻结了很长一段时间。

您可以使用自己的进程执行此操作的唯一方法是在内核中运行一些其他监督代码 - 您需要一种方法来获取进程的内存映射并将其与实际内存页面一起保存以便以后恢复页面时，应用程序内存中的所有现有指针仍然有效。您还需要一种方法来保存其他数据（例如任何打开的文件描述符），以便它们也可以恢复。

这对于大多数应用程序来说是不切实际的。

# sql - 无法从数据库中选择列

> ID：12714905
> 
> 赞同：0
> 
> 时间：2012-10-03T18:50:18.670
> 
> 标签：sql, sql-server-2008

我有 3 张桌子：

*   `[Users]: UserId, Name...`
*   `[Topics]: TopicId, CreatorUserId...`
*   `[Comments]: CommentId, TopicId...`.

现在，我想根据这个机制选择最热门话题的创建者：获取比指定日期更新的评论。按主题的创建者对这些评论进行分组，并按组中的行数排序。

但是，我不确定我的查询是否遵循这个逻辑（根据结果似乎，但我只有几个用户和主题），但主要问题是当我要选择用户的名称时（`Users.Name`） ，我得到一个错误：

> *列 '[TestDatabase].[dbo].[Users].[Name]' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。*

T-SQL 查询：

```
SELECT 
   Users.UserId, Users.Name, COUNT(Users.UserId) as RowCountInGroup
FROM [TestDatabase].[dbo].[Users]
INNER JOIN [TestDatabase].[dbo].[Topics] ON Topics.CreatorUserId = Users.UserId
INNER JOIN [TestDatabase].[dbo].[Comments] ON Comments.TopicId = Topics.TopicId
WHERE 
   Comments.CreationDate > CAST('14 SEPTEMBER 2012' as DateTime)
GROUP BY Users.UserId
ORDER BY RowCountInGroup DESC 
```

谢谢你帮助我。

编辑：我已经复制了原始错误消息。我需要从用户中选择电子邮件、城市等列，所以我不确定将所有这些添加到`group by`子句中是最好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:52:58.207

您需要按您选择的两列（或通常：所有列）（未由`COUNT`聚合运算符聚合）进行分组：

```
SELECT 
   Users.UserId, Users.Name, COUNT(Users.UserId) as RowCountInGroup
FROM [TestDatabase].[dbo].[Users]
INNER JOIN [TestDatabase].[dbo].[Topics] ON Topics.CreatorUserId = Users.UserId
INNER JOIN [TestDatabase].[dbo].[Comments] ON Comments.TopicId = Topics.TopicId
WHERE 
   Comments.CreationDate > CAST('14 SEPTEMBER 2012' as DateTime)
GROUP BY 
   Users.UserId, Users.Name   <=== you need to add "Users.Name" here!
ORDER BY RowCountInGroup DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:52:53.170

您需要在 group by 子句中同时包含 UserId 和 Name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:53:37.310

这是一种方法：

```
SELECT a.UserId, b.Name, a.RowCountInGroup
FROM
    (SELECT Users.UserId, COUNT(Users.UserId) as RowCountInGroup
    FROM [TestDatabase].[dbo].[Users]
    INNER JOIN [TestDatabase].[dbo].[Topics] 
    ON Topics.CreatorUserId = Users.UserId
    INNER JOIN [TestDatabase].[dbo].[Comments] ON
    Comments.TopicId = Topics.TopicId
    WHERE Comments.CreationDate > CAST('14 SEPTEMBER 2012' as DateTime)
    GROUP BY Users.UserId
    ORDER BY RowCountInGroup DESC) a
LEFT JOIN [TestDatabase].[dbo].[Users] b ON b.UserId = a.UserId 
```

任何时候你在聚合中包含一个列，你必须`GROUP BY`该列：

```
SELECT col1, col2, COUNT(col3)
FROM table
GROUP BY col1, col2 
```

# sql-server - 通过从 select 子句中删除子查询来重写此查询的最佳方法是什么？

> ID：12714907
> 
> 赞同：1
> 
> 时间：2012-10-03T18:50:25.323
> 
> 标签：sql-server, performance, tsql

我不知道如何优化此查询，也没有找到类似的查询作为示例。

重写此查询的最佳方法是什么，以便在 select 子句中没有这么多子查询，以实现按月/品牌 ID 分组的相同结果？

DBMS 是 SQL Server。

```
select
    o.brand_id,
    count(o.item_id) as "Total bought items",
    count(o.sell_date) as "Total sold items",
     /* Amount of sold items grouped by month per item */
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 1 and obj.brand_id = b.brand_id) as "Jan",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 2 and obj.brand_id = b.brand_id) as "Feb",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 3 and obj.brand_id = b.brand_id) as "Mar",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 4 and obj.brand_id = b.brand_id) as "Apr",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 5 and obj.brand_id = b.brand_id) as "May",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 6 and obj.brand_id = b.brand_id) as "Jun",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 7 and obj.brand_id = b.brand_id) as "Jul",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 8 and obj.brand_id = b.brand_id) as "Aug",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 9 and obj.brand_id = b.brand_id) as "Sep",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 10 and obj.brand_id = b.brand_id) as "Oct",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 11 and obj.brand_id = b.brand_id) as "Nov",
    (select count(obj.sell_date) from tab_object as obj where month(obj.install_date) = 12 and obj.brand_id = b.brand_id) as "Dec"
from  tab_brand as b
left join tab_object as o on b.brand_id = o.brand_id
                            and year(o.sell_date) = 2012
where b.brand_id in (1234, 1324, 1423, 2314)
group by b.brand_id
order by b.brand_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:57:11.703

您正在寻找`PIVOT` [http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)并将其结果加入查询以提供总数

```
select TotalBought, TotalSold, months.* from
(
select 
    o.brand_id,
    count(o.item_id) as TotalBought, 
    count(o.sell_date) as TotalSold
from tab_object o   
where year(sell_date)=2012
group by brand_id
) totals
    left join
(    
select * 
  from (select brand_id, sell_date, left(datename(month,install_date),3) as InstallMonth 
        from tab_object where brand_id in (1234,1324,1423,2314) and year(sell_date)=2012
  ) src 
  pivot 
  ( count(sell_date) for installmonth in ([Jan],[Feb],[Mar],[Apr],[May],[Jun],[Jul],[Aug],[Sep],[Oct],[Nov],[Dec])) p
) months
    on totals.brand_id = months.brand_id 
```

您似乎也不使用品牌表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:58:00.130

你能用吗

```
select
    o.brand_id,
    count(o.item_id) as "Total bought items",
    count(o.sell_date) as "Total sold items",
    month(install_date) as mo_install,
    count(sell_date)  as count_sell_date
from  tab_brand b
left join tab_object o on 
b.brand_id = o.brand_id and year(o.sell_date) = 2012
where b.brand_id in (1234, 1324, 1423, 2314)
group by b.brand_id, month(install_date)
order by b.brand_id; 
```

# regex - Re.sub python-同时替换更多项目

> ID：12714908
> 
> 赞同：1
> 
> 时间：2012-10-03T18:50:27.053
> 
> 标签：regex

我必须用相应的非重音字母替换字符串中的一系列重音字符。我正在考虑使用 re.sub，但我不知道如何同时替换更多项目（每个项目都有不同的项目）。所以要更清楚：

```
import re
re.sub(r'è|ù|ò|à','e,u,o,a',string). 
```

首先，这在 Python 中是否允许，以避免为每个字母创建单独的行？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:54:55.790

`re.sub()`可以接受一个函数作为替换，因此您可以执行以下操作：

```
reps = dict(zip('èùòà', 'euoa'))
re.sub(r'è|ù|ò|à', lambda m: reps[m.group(0)], some_string) 
```

例子：

```
>>> re.sub(r'è|ù|ò|à', lambda m: reps[m.group(0)], 'à ò ù è')
'a o u e' 
```

# macos - 有没有办法在 Mac OSX 上安装 Rational Rhapsody？

> ID：12714909
> 
> 赞同：0
> 
> 时间：2012-10-03T18:50:28.130
> 
> 标签：macos, rhapsody

是否可以在 Mac OSX 上安装 Rational Rhapsody（直接，而不是通过 Parallels）？制作工作的任何关键调整？

我专门使用 OSX 10.7.4 并查看 Rhapsody 8.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:40:50.100

我相信不可能。Rhapsody 主要建立在 MS .net 对象上；并使用 MS 典型安装程序安装。如果你弄清楚了，我有兴趣知道它。

# python - python内存错误（有足够的可用内存）

> ID：12714921
> 
> 赞同：3
> 
> 时间：2012-10-03T18:51:28.590
> 
> 标签：python, memory

我正在尝试计算文本文件中字符串的出现次数。文本文件看起来像这样，每个文件大约 200MB。

```
String1 30
String2 100
String3 23
String1 5
..... 
```

我想将计数保存到字典中。

```
count  = {}
for filename in os.listdir(path):
    if(filename.endswith("idx")):
        continue
    print filename  
    f = open(os.path.join(path, filename))
    for line in f:
        (s, cnt) = line[:-1].split("\t")
        if(s not in count):
            try:
                count[s] = 0 
            except MemoryError:
                print(len(count))
                exit()
        count[s] += int(cnt)  
    f.close()
    print(len(count)) 
```

我在 时遇到内存错误`count[s] = 0`，但我的计算机中仍有更多可用内存。
我该如何解决这个问题？谢谢！

更新：我在这里复制了实际代码。我的python版本是2.4.3，机器运行linux，内存48G左右，但是只消耗不到5G。代码停在`len(count)=44739243`.

UPDATE2：字符串可以重复（不是唯一的字符串），所以我想将字符串的所有计数相加。我想要的操作只是读取每个字符串的计数。每个文件大约有 10M 行，我有 30 多个文件。我预计这个数字不到 1000 亿。

UPDATE3：操作系统是 linux 2.6.18。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T22:43:24.677

cPython 2.4 可能会出现大内存分配问题，即使在 x64 上也是如此：

```
$ python2.4 -c "'a' * (2**31-1)"
Traceback (most recent call last):
  File "<string>", line 1, in ?
MemoryError
$ python2.5 -c "'a' * (2**31-1)"
$ 
```

更新到最近的 python 解释器（如 cPython 2.7）以解决这些问题，并确保安装 64 位版本的解释器。

如果字符串的大小不平凡（即比您的示例中的 <10 字节长），您可能还想简单地存储它们的哈希值，或者甚至使用概率（但更有效）存储，如[布隆过滤器](http://en.wikipedia.org/wiki/Bloom_filter)。要存储它们的哈希值，请将文件处理循环替换为

```
import hashlib
# ...
for line in f:
    s, cnt = line[:-1].split("\t")
    idx = hashlib.md5(s).digest()
    count[idx] = count.get(idx, 0) + int(cnt)
# ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T22:43:43.790

如果您要做的只是计算唯一字符串的数量，则可以通过散列每个字符串来大大减少内存占用：

```
 (s, cnt) = line[:-1].split("\t")
    s = hash(s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T22:47:38.150

我不确定为什么会发生这种崩溃。您的字符串的估计平均大小是多长？4400 万个字符串，如果它们有点长，你也许应该考虑散列它们，就像已经建议的那样。缺点是，您失去了列出唯一键的选项，您只需检查字符串是否在您的数据中。

关于已经达到 5 GB 的内存限制，可能与您过时的 python 版本有关。如果您可以选择更新，请获取 2.7。相同的语法（加上一些额外的），没有问题。好吧，我什至不知道下面的代码是否仍然与2.4兼容，也许你必须再次踢掉with语句，至少你在2.7中会这样写。

您的版本的主要区别是手动运行垃圾收集。此外，您可以提高 python 使用的内存限制。正如你所提到的，它只使用实际内存的一小部分，所以如果有一些奇怪的默认设置禁止它变大，试试这个：

```
MEMORY_MB_MAX = 30000
import gc
import os
import resource
from collections import defaultdict
resource.setrlimit(resource.RLIMIT_AS, (MEMORY_MB_MAX * 1048576L, -1L))

count  = defaultdict(int)
for filename in os.listdir(path):
    if(filename.endswith("idx")):
        continue
    print filename  
    with open(os.path.join(path, filename)) as f:
        for line in f:
            s, cnt = line[:-1].split("\t")
            count[s] += int(cnt)  
    print(len(count))
    gc.collect() 
```

除此之外，我不明白你的意思`s, cnt = line[:-1].split("\t")`，尤其是`[:-1]`. 如果文件看起来像您记下的那样，那么这将删除您号码的最后一位。这是故意的吗？

# c - 如何在 Linux 中重新绑定 udp 套接字

> ID：12714922
> 
> 赞同：4
> 
> 时间：2012-10-03T18:51:34.667
> 
> 标签：c, linux, sockets, network-programming, bind

我是一位经验丰富的 Linux 套接字程序员，正在编写一个具有许多传出接口的服务器应用程序。现在服务器套接字与 INADDR_ANY 一起在进程开始时绑定到一个随机源端口。

稍后在向特定节点提交响应时，我需要分配一个固定的*源 IP 地址*。执行此操作的标准方法是调用 bind。但是，为端口号调用一次绑定，**连续调用失败并出现无效参数错误。**

创建一个新的套接字并不是一个好的选择，因为我必须经常在响应某些客户时这样做。

我还探索了 SO 和许多套接字选项，例如 IP_FREEBIND，但它并不完全适合我的场景。

也许使用 IP_PKT_INFO 和设置源地址可能会起作用，除非它遇到同样的问题，即不允许曾经绑定到 INADDRANY 的套接字重新绑定到固定的源 ip。

*有没有办法取消绑定现有套接字或在传出数据包中设置源 IP 地址的替代方法？*

```
 int sock = socket(AF_INET, SOCK_DGRAM, 0);

    if(sock < 0)
        printf("Failed creating socket\n");

    struct sockaddr_in addr;
    memset(&addr, 0, sizeof(struct sockaddr_in));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(1500);
    addr.sin_addr.s_addr = INADDR_ANY;

    // first bind succeeds
    if ( (status = bind(sock, (struct sockaddr *) &addr, sizeof(addr))) < 0)
        printf("bind error with port %s\n", strerror(errno));  

    struct sockaddr_in src_addr;
    memset(&src_addr, 0, sizeof(struct sockaddr_in));
    src_addr.sin_family = AF_INET;
    if (inet_aton("10.0.2.17", &(src_addr.sin_addr)) == 0)
        printf("Failed copying address\n");

    // second bind fails
    if((status = bind(sock, (struct sockaddr *)&src_addr, sizeof(src_addr))) < 0)
        printf("re bind error with ip %s\n", strerror(errno)); 
```

在这方面的任何想法都将受到高度赞赏。我已经阅读了大量关于套接字、SO 等的材料，但还没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T17:20:45.367

*我终于自己找到了解决方案，因此接受了我自己的答案（无耻但正确的插件），并补充了代码示例。*

我最初想**重写传出数据包的源地址，而无需再次创建**已绑定套接字的套接字。*在这种情况下，多次调用 bind*失败，并且（在我的特殊情况下），我不能只为每个源 ip 使用单独的套接字并使用它。

我在**IP_PACKET_INFO**中找到了一些参考资料，但让它正常工作很痛苦。以下参考很有帮助。

[设置udp socket的来源](https://stackoverflow.com/questions/3062205/setting-the-source-ip-for-a-udp-socket)

**示例代码**

这是一个简单的应用程序，它创建一个 udp 套接字，将其绑定到本地端口，然后在发送特定消息之前，**它会附加传出源 ip address**。请记住，就我而言，我创建了一个 sudo 接口并为其分配了另一个 ip。如果不是这种情况，发送调用将失败。

```
int status=-1;
int sock = socket(AF_INET, SOCK_DGRAM, 0);

if(sock < 0)
    printf("Failed creating socket\n");

int opt = 1;
setsockopt(sock, SOL_SOCKET, SO_REUSEADDR, &opt, sizeof(opt));

struct sockaddr_in bind_addr;
memset(&bind_addr, 0, sizeof(struct sockaddr_in));
bind_addr.sin_family = AF_INET;
bind_addr.sin_port = htons(44000); // locally bound port

if((status = bind(sock, (struct sockaddr *)&bind_addr, sizeof(bind_addr))) < 0)
    printf("bind error with port %s\n", strerror(errno));

// currently using addr as destination
struct sockaddr_in addr;
memset(&addr, 0, sizeof(struct sockaddr_in));
addr.sin_family = AF_INET;
addr.sin_port = htons(80); // destination port
if (inet_aton("74.125.236.35", &(addr.sin_addr)) == 0)
    printf("Failed copying remote address\n");
else
    printf("Success copying remote address\n");

struct sockaddr_in src_addr;
memset(&src_addr, 0, sizeof(struct sockaddr_in));
src_addr.sin_family = AF_INET;
if (inet_aton("10.0.2.17", &(src_addr.sin_addr)) == 0)
    printf("Failed copying src address\n");
else
    printf("Success copying src address\n");

char cmbuf[CMSG_SPACE(sizeof(struct in_pktinfo))];

char msg[10] = "hello";
int len = strlen(msg);

struct msghdr mh;
memset(&mh, 0, sizeof(mh));

struct cmsghdr *cmsg;
struct in_pktinfo *pktinfo;

struct iovec iov[1];
iov[0].iov_base = msg;
iov[0].iov_len = len;

mh.msg_name = &addr; // destination address of packet
mh.msg_namelen = sizeof(addr);
mh.msg_control = cmbuf;
mh.msg_controllen = sizeof(cmbuf);
mh.msg_flags = 0;
mh.msg_iov = iov;
mh.msg_iovlen = 1;

// after initializing msghdr & control data to 
// CMSG_SPACE(sizeof(struct in_pktinfo))
cmsg = CMSG_FIRSTHDR(&mh);
cmsg->cmsg_level = IPPROTO_IP;
cmsg->cmsg_type = IP_PKTINFO;
cmsg->cmsg_len = CMSG_LEN(sizeof(struct in_pktinfo));
pktinfo = (struct in_pktinfo*) CMSG_DATA(cmsg);

//src_interface_index 0 allows choosing interface of the source ip specified
pktinfo->ipi_ifindex = 0;
pktinfo->ipi_spec_dst = src_addr.sin_addr;

int rc = sendmsg(sock, &mh, 0);
printf("Result %d\n", rc); 
```

关键声明是

```
pktinfo->ipi_spec_dst = src_addr.sin_addr; 
```

我们在其中指定*要使用的源 IP 地址*。**cmsg struct**等其他内容仅用于我们自己编写 ipoktinfo struct

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T23:45:43.003

无法解除绑定和重新绑定现有套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:57:05.627

为什么不为每个接口创建一个套接字呢？由于 UDP/IP 协议是无连接的，因此您可以通过选择用于发送回复的套接字来选择源 IP 地址；不需要使用接收传入数据报的同一个套接字。

缺点是您不能再绑定到通配符地址，并且您必须使用`select()`, `poll()`, 多线程或其他一些机制来同时接收来自多个源的数据报。您还需要一些逻辑来根据客户端 IP 地址有效地选择套接字。

在大多数情况下，我怀疑添加一些路由条目来将每个远程 IP 地址路由到所需的主机 IP 地址，并为每个主机 IP 地址和端口组合使用单独的套接字，可以完美地解决问题——并且使用非常有效的这样做的内核功能。虽然该行为可能是*应用程序*要求，但我怀疑使用网络接口配置更好地解决它。不幸的是，这些需求通常是由更适合体力劳动的半功能白痴编写的，而且你的双手被束缚了……如果是这样，我很同情。

如果您有一个带有多个物理网络接口的工作站的测试网络，我可以提供一个简单的示例 C99 测试程序，您可以使用它来验证设计是否有效。

# objective-c - OS X 图标大小

> ID：12714923
> 
> 赞同：29
> 
> 时间：2012-10-03T18:51:39.957
> 
> 标签：objective-c, xcode, macos, cocoa, retina-display

OS X 的应用程序图标和菜单栏图标应该是什么尺寸？

我可以处理小分辨率显示器，但是 Retina 呢？菜单栏上显示的图标（例如 20 x 20 ）在配备 Retina 显示器的新 MacBook Pro 上会变小或模糊吗？我认为应用程序图标将被缩放，所以如果我准备比常规大两倍，它在 Retina 上应该没问题。

我找到了一个很好的 iOS 开发指南，其中包含尺寸规范，但我找不到类似的 OS X 尺寸规范。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-27T19:09:56.657

NSStatusBar 图标（即菜单栏图标）与常规应用程序图标不同。我还没有找到 NSStatusBar 官方图标指南，但我不得不相信按钮的[工具栏图标指南](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/IconsImages/IconsImages.html#//apple_ref/doc/uid/20000967-TPXREF102%28)非常接近。它建议：

*   创建尺寸不超过 19x19 像素的图标。
*   使轮廓清晰明了。
*   使用直截了当的视角。
*   使用黑色（仅在必要时添加透明度以暗示维度）。
*   使用抗锯齿。
*   使用 PDF 格式。
*   确保图像在控件中视觉居中（注意视觉居中可能与数学居中不同）。

在测试中，我发现：

1.  NSStatusBar 似乎在 18 像素高或更低的情况下看起来最好。[systemStatusBar 的厚度为](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSStatusBar_Class/Reference/Reference.html)22 。
2.  虽然它列出了 PDF 格式，但我一直在使用 png 没有问题。
3.  如果您希望您的图标在被选中时是蓝底白字，您需要提供alternateImage 作为图标的单独白色版本。

代码示例：

```
myStatusItem = [[NSStatusBar systemStatusBar]statusItemWithLength:NSSquareStatusItemLength];
NSImage *statusImage = [NSImage imageNamed:@"Status.png"];
[myStatusItem setImage:statusImage];
NSImage *altStatusImage = [NSImage imageNamed:@"StatusHighlighted"];
[myStatusItem setAlternateImage:altStatusImage];
[myStatusItem setHighlightMode:YES];
[myStatusItem setMenu:self.myStatusMenu]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-16T15:17:52.183

使您的菜单项支持**Retina**显示、**暗模式**和不同**状态**（例如按下）

1.  创建两个大小为 16x16 和 32x32 像素的 PNG 图像
2.  在 Xcode 中创建一个新的图像资源，将*Render As*设置为*Template Image*并添加 1x 和 2x 的图像
3.  从图片资源初始化你的 NSImage 而不改变它的大小：`NSImage(named: "Example")`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T19:02:54.307

[http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Intro/Intro.html#//apple_ref/doc/uid/TP30000894-TP6](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Intro/Intro.html#//apple_ref/doc/uid/TP30000894-TP6)

并且：http: [//developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/IconsImages/IconsImages.html](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/IconsImages/IconsImages.html)

![在此处输入图像描述](../Images/81051040ce2f21640f7f35f1efe79ae4.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-11T16:23:04.637

按照这些步骤，你会得到一个完美清晰的状态栏图标视网膜

1.  在 photoshop 中打开图标的 png 文件，它应该大于 88px x 88px
2.  转到菜单，图像，图像大小
3.  将分辨率设置为 350
4.  将大小设置为 88px x 88px（像素）
5.  将图像保存为 png 添加它 xcode

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-03T18:59:41.233

由于视网膜显示器，苹果现在需要一直到 1024x1024px 的图标。

[http://www.cultofmac.com/179738/apple-now-requires-high-res-1024x1024-icons-for-every-mac-os-x-app/](http://www.cultofmac.com/179738/apple-now-requires-high-res-1024x1024-icons-for-every-mac-os-x-app/)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-03T18:56:51.747

应用程序图标的最大尺寸应为 1024 x 1024。

您必须为 16 x 16、32 x 32、128 x 128、256 x 256、512 x 512 和 1024 x 1024 创建常规和视网膜分辨率图标。

您可以在Apple的[“OS X 高分辨率指南”文档中找到详细信息。](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)

# c - 并行编译一个巨大的 C 文件（最好用 gcc）

> ID：12714925
> 
> 赞同：3
> 
> 时间：2012-10-03T18:51:40.923
> 
> 标签：c, gcc, compilation

我有一个巨大的 C 文件。在文件中，有一个巨大的结构（~> 100 万行）。有没有办法使用额外的内核并行编译这个文件？

编辑：对不起，在查看了我的代码和我的问题之后，真正的大事不是“结构”，而是结构数组......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:05:44.850

如果是超过 100 万行的结构定义，那么您可能不走运。

但是，如果您要声明一个结构变量，它是一个多行结构类型的数组（或者不是一个数组，而只是一个非常大的结构），那么我建议将变量声明单独放在一个单独的 .c 文件中，并且在需要访问它的任何其他 c 文件中使用 extern 关键字。这样，它只需要在更改时重新编译。

例如，如果您有以下情况：

```
//Filename: onefile.c

struct _bigStruct{
  int type;
  char *name;
}bigStruct[] = {
  {  1, "One" },
  {  2, "Two" },
  {  3, "Three" },
  {  4, "Four" },
  ...
};

int someFunction(int j, int x)
{
  if (j == bigStruct[x])
     //do something
} 
```

然后我将其更改为以下内容：

```
//Filename: bigstruct.h
struct _bigStruct{
  int type;
  char *name;
}; 
```

和

```
//Filename: bigstruct.c
struct _bigStruct bigStruct[] = {
{  1, "One" },
{  2, "Two" },
{  3, "Three" },
{  4, "Four" },
...
}; 
```

和

```
//Filename: main.c
#include "bigstruct.h"

extern struct _bigStruct bigStruct[];

int someFunction(int j, int x)
{
  if (j == bigStruct[x].type)
     //do something
} 
```

# spring - 如何在 Spring 注释请求参数中进行绑定？

> ID：12714926
> 
> 赞同：0
> 
> 时间：2012-10-03T18:51:44.620
> 
> 标签：spring, annotations

我有一个控制器，它使用注释进行请求映射和 requestParam。

控制器工作正常。但是，当提交带有数组的命令对象时，spring 会说**array index out of bound**。我猜绑定有问题，但不知道如何解决。

更具体地说，在eclipse中我会在控制器的开头设置调试器，并且在提交表单时（通过点击输入提交按钮）eclipse调试器不会触发，我会看到**数组索引越界**在控制台中

控制器是这样的：

```
@RequestMapping(value = {"/internal/pcsearch.dex", "/external/pcsearch.dex"},
        method = {RequestMethod.POST, RequestMethod.GET})
public ModelAndView executeProductCatalogSearch(
        HttpServletRequest request,             
        @RequestParam(value = "cat" ,required = false) String cat,          
        @RequestParam(value = "brand" ,required = false) String brand,
        @ModelAttribute("command") ProductCatalogCommand cmd
        ){ 
```

[编辑] 和 jsp 就像：

```
<form name="pForm" 
id="pForm" 
action="<c:url value="psearch.dex"><c:param name="cat" value="${cat}"/></c:url>" 
method="POST" 
style="display:inline;">
...
...
<c:forEach var="model" items="${models}" varStatus="modelLinkStatus">
        <script>
            var modelImg<c:out value="${modelLinkStatus.index}"/>Src = '<c:out value="${model.altModelImage}"/>';
        </script>
        <spring:bind path="command.models[${modelLinkStatus.index}].modelSkusDisplayed">
        <input type="hidden" name="<c:out value="${status.expression}"/>" id="<c:out value="${status.expression}"/>" value="<c:out value="${status.value}"/>"/>
        </spring:bind>  
<spring:bind path="command.updateCartButton">
                                        <input type="submit" value="<spring:message code="orderEntryMessages.ecatalog.button.addToCart" text="Add to Cart" htmlEscape="yes" />" name="<c:out value="${status.expression}"/>" id="<c:out value="${status.expression}"/>" class="sub_buttons"/>
                                    </spring:bind> 
```

...

并且命令对象将模型数组声明为：

```
private List<ModelLink> models = new ArrayList<ModelLink>(); 
```

其中 modelLink 是自定义 ds。

第一个 foreach 标记处理模型命令对象，第二部分是我单击的提交按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:22:02.653

我认为您应该使用 AutoPopulatingList 作为模型将列表绑定到视图和控制器。例如，请参考[链接](http://blog.richardadamdean.com/?p=12)。这可能会解决您的索引问题。

# firefox - 如何使用 Vimperator 将当前 URL 放入剪贴板？

> ID：12714930
> 
> 赞同：22
> 
> 时间：2012-10-03T18:51:56.453
> 
> 标签：firefox, vim, keyboard-shortcuts, vimperator

**为什么：**

我刚刚偶然发现了[Vimperator](http://vimperator.org) Firefox 插件，并且从来没有因为使用鼠标上网而感到如此自由（而不必失去 Lynx 的所有眼球；）

Firefox 现在可以更轻松地在全屏模式下使用 ( `F11`)。我保留显示的标签以获得视觉帮助，并且还想摆脱地址和搜索栏。但是，我习惯于快速抓取当前 URL 以复制到剪贴板（例如切换选项卡、抓取另一个选项卡的 URL、切换回并粘贴为[Stack Overflow](http://stackoverflow.com)中的链接）。

当我在 Firefox 中隐藏导航栏时，用于突出显示当前页面/选项卡 URL 的常用`Alt`+`D`不再起作用。

**问题：**

如何使用[Vimperator](http://vimperator.org)将当前 URL 放入剪贴板？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T16:26:27.613

通过猛拉。`y`拉出当前 URL，`Y`获取突出显示的文本。你应该看到类似的东西

> 将文本复制到剪贴板：[https](https://stackoverflow.com/) ://stackoverflow.com/ ...

# ios - 修剪视频而不显示 UIVideoEditorController？

> ID：12714938
> 
> 赞同：12
> 
> 时间：2012-10-03T18:52:52.787
> 
> 标签：ios, xcode, video, uivideoeditorcontroller

目前我正在开发一个处理视频的应用程序。在我的应用程序中，用户可以修剪视频，我有一个用于选择开始时间和结束时间的自定义控件。我需要通过这两个值修剪视频。我尝试`UIVideoEditorController`如下。

```
 UIVideoEditorController* videoEditor = [[[UIVideoEditorController alloc] init] autorelease];
    videoEditor.delegate = self;
    NSString* videoPath = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"MOV"];
    if ( [UIVideoEditorController canEditVideoAtPath:videoPath] )
    {
      videoEditor.videoPath = videoPath;
      [self presentModalViewController:videoEditor animated:YES];
    }
    else
    {
      NSLog( @"can't edit video at %@", videoPath );
    } 
```

但问题是上面的代码将显示苹果的视频编辑器控件，用户可以对该视图进行一些操作。我不想显示此视图，因为我已经显示了视频`MPMoviePlayer`并接收了用户输入（**开始时间**和**结束时间**）以在自定义控件上修剪视频。如何在不显示的情况下修剪视频`UIVideoEditorController`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T17:11:15.613

最后我找到了解决方案。

我们可以`AVAssetExportSession`用于修剪视频而不显示`UIVideoEditorController`。

我的代码是这样的：

```
- (void)splitVideo:(NSString *)outputURL
{

    @try
    {
        NSString *videoBundleURL = [[NSBundle mainBundle] pathForResource:@"Video_Album" ofType:@"mp4"];

        AVAsset *asset = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:videoBundleURL] options:nil];

        NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:asset];

        if ([compatiblePresets containsObject:AVAssetExportPresetLowQuality])
        {

            [self trimVideo:outputURL assetObject:asset];

        }
        videoBundleURL = nil;

        [asset release];
        asset = nil;

        compatiblePresets = nil;
    }
    @catch (NSException * e)
    {
        NSLog(@"Exception Name:%@ Reason:%@",[e name],[e reason]);
    }
} 
```

此方法修剪视频

```
- (void)trimVideo:(NSString *)outputURL assetObject:(AVAsset *)asset
  {

    @try
    {

        AVAssetExportSession *exportSession = [[AVAssetExportSession alloc]initWithAsset:asset presetName:AVAssetExportPresetLowQuality];

        exportSession.outputURL = [NSURL fileURLWithPath:outputURL];

        exportSession.outputFileType = AVFileTypeQuickTimeMovie;

        CMTime start = CMTimeMakeWithSeconds(splitedDetails.startTime, 1);

        CMTime duration = CMTimeMakeWithSeconds((splitedDetails.stopTime - splitedDetails.startTime), 1);

        CMTimeRange range = CMTimeRangeMake(start, duration);

        exportSession.timeRange = range;

        exportSession.outputFileType = AVFileTypeQuickTimeMovie;

        [self checkExportSessionStatus:exportSession];

        [exportSession release];
        exportSession = nil;

    }
    @catch (NSException * e)
    {
        NSLog(@"Exception Name:%@ Reason:%@",[e name],[e reason]);
    }
} 
```

此方法检查修剪的状态：

```
- (void)checkExportSessionStatus:(AVAssetExportSession *)exportSession
  {

    [exportSession exportAsynchronouslyWithCompletionHandler:^(void)
    {

        switch ([exportSession status])
            {

            case AVAssetExportSessionStatusCompleted:

                NSLog(@"Export Completed");
                break;

            case AVAssetExportSessionStatusFailed:

                NSLog(@"Error in exporting");
                break;

            default:
                break;

        }
    }];
} 
```

我`splitVideo`从导出按钮操作方法调用该方法，并将**输出 URL**作为参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T12:01:57.307

我们可以导入 AVFoundation/AVFoundation.h

```
-(BOOL)trimVideofile
{

    float videoStartTime;//define start time of video
    float videoEndTime;//define end time of video
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd_HH-mm-ss"];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
    NSString *libraryCachesDirectory = [paths objectAtIndex:0];
    libraryCachesDirectory = [libraryCachesDirectory stringByAppendingPathComponent:@"Caches"];
    NSString *OutputFilePath = [libraryCachesDirectory stringByAppendingFormat:@"/output_%@.mov", [dateFormatter stringFromDate:[NSDate date]]];
    NSURL *videoFileOutput = [NSURL fileURLWithPath:OutputFilePath];
    NSURL *videoFileInput;//<Path of orignal Video file>

    if (!videoFileInput || !videoFileOutput)
    {
        return NO;
    }

    [[NSFileManager defaultManager] removeItemAtURL:videoFileOutput error:NULL];
    AVAsset *asset = [AVAsset assetWithURL:videoFileInput];

    AVAssetExportSession *exportSession = [AVAssetExportSession exportSessionWithAsset:asset
                                                                            presetName:AVAssetExportPresetLowQuality];
    if (exportSession == nil)
    {
        return NO;
    }
    CMTime startTime = CMTimeMake((int)(floor(videoStartTime * 100)), 100);
    CMTime stopTime = CMTimeMake((int)(ceil(videoEndTime * 100)), 100);
    CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);

    exportSession.outputURL = videoFileOutput;
    exportSession.timeRange = exportTimeRange;
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;

    [exportSession exportAsynchronouslyWithCompletionHandler:^
     {
         if (AVAssetExportSessionStatusCompleted == exportSession.status)
         {
            NSLog(@"Export OK");
         }
         else if (AVAssetExportSessionStatusFailed == exportSession.status)
         {
             NSLog(@"Export failed: %@", [[exportSession error] localizedDescription]);
         }
     }];
    return YES;
} 
```

# flash - 将 FlashDevelop 调试器与 .fla、Actionscript 2 和 Flash Professional 5.5 一起使用

> ID：12714940
> 
> 赞同：2
> 
> 时间：2012-10-03T18:52:52.967
> 
> 标签：flash, debugging, actionscript, flash-cs5, flashdevelop

我有一个由 .fla 和一些相关的 AS2 代码文件组成的 flash 项目。

一般来说，我是 Actionscript 和 Flash 开发的新手，但我正在尝试增加和设置一个方便的开发环境来处理这个项目。

我无法完全控制修改基本项目，我只是进来并对现有代码和资产（主要是代码）进行调整/添加。

当我使用 FlashDevelop 中的“测试项目”按钮构建项目时，当前发生的情况是，该项目是通过 Adob​​e Creative Suite Flash Professional 5.5 [CS5.5] 构建的，它说在构建时导出 Swf 电影，然后在Flash 播放器窗口。输出打印到 CS5.5 输出窗口，并且我的 FlashDevelop 调试器未连接。

我想要发生的是当我点击测试电影（在 FlashDevelop 调试配置中）时，CS5.5 IDE 将构建项目，但是当 Swf 在 Flash 播放器中启动时，FlashDevelop 调试器将附加，我将获得输出和FlashDevelop 中的断点。

这样的事情可行吗？如果这不是默认行为，我需要采取哪些步骤来以这种方式配置 CS5.5 和 FlashDevelop。如果它应该是默认行为，那么是什么导致它按照上述方式行事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T21:27:03.857

FlashDevelop 不能进行交互式 AS2 调试。你所能做的就是在你的代码中使用'trace(value)'来记录可以被FlashDevelop的日志查看器监控的消息： [http://www.ilike2flash.com/2012/03/flashdevelop-not-displaying-trace。 html](http://www.ilike2flash.com/2012/03/flashdevelop-not-displaying-trace.html)

Adobe Flash Pro 是唯一具有 AS2 调试器的环境：http: [//help.adobe.com/en_US/flash/cs/using/WS3e7c64e37a1d85e1e229110db38dec34-7fc2a.html](http://help.adobe.com/en_US/flash/cs/using/WS3e7c64e37a1d85e1e229110db38dec34-7fc2a.html)

# objective-c - iOS - 查找对象逆的最佳方法

> ID：12714945
> 
> 赞同：1
> 
> 时间：2012-10-03T18:53:14.293
> 
> 标签：objective-c, ios, core-data, recursion

我正在编写一个递归方法，它基本上遍历一个 NSManagedObject 对象并将其转换为 JSON 字典。我已经完成了大部分工作，但是我遇到了一个问题，当涉及到对象的逆时，该方法进入无限循环。

例如，假设该方法从一个具有 Job 类的对象开始，并且在该 Job 对象内部有一个名为surveys 的属性。调查是一个包含多个 JobSurvey 对象的 NSSet。每个 JobSurvey 对象都包含一个与原始 Job 对象相反的内容，该属性称为“Job”。

当我通过我的方法运行它时，它通过进入作业开始无限循环并开始处理每个属性。一旦该方法到达调查属性，它将再次被调用以按预期处理每个 JobSurvey 对象。然后该方法处理每个属性，直到它到达 Job（反向）对象。那时它将继续处理该对象，从而创建无限循环。

关于如何解决这个问题的任何想法？我正在尝试编写此方法，而不必使用对象映射创建自定义对象类，因为它需要能够与我传递给它的任何类型的对象一起使用。下面是我到目前为止的代码。

```
- (NSDictionary *)encodeObjectsForJSON:(id)object
{
    NSMutableDictionary *returnDictionary = [[NSMutableDictionary alloc] init];

    // get the property list for the object
    NSDictionary *props = [VS_PropertyUtilities classPropsFor:[object class]];

    for (NSString *key in props) {

        // get the value for the property from the object
        id value = [object valueForKey:key];

        // if the value is just null, then set a NSNull object
        if (!value) {

            NSNull *nullObj = [[NSNull alloc] init];
            [returnDictionary setObject:nullObj forKey:key];

        // if the value is an array or set, then iterate through the array or set and call this method again to encode it's values
        } else if ([value isKindOfClass:[NSArray class]] || [value isKindOfClass:[NSSet class]]) {

            NSMutableArray *retDicts = [[NSMutableArray alloc] init];

            // encode each member of the array to a JSON dictionary
            for (id val in value) {
                [retDicts addObject:[self encodeObjectsForJSON:val]];
            }

            // add to the return dictionary
            [returnDictionary setObject:retDicts forKey:key];

        // else if this is a foundation object, then set it to the dictionary
        } else if ([value isKindOfClass:[NSString class]] || [value isKindOfClass:[NSNumber class]] || [value isKindOfClass:[NSNull class]] || [value isKindOfClass:[NSDate class]]) {

            [returnDictionary setObject:value forKey:key];

        // else this must be a custom object, so call this method again with the value to try and encode it
        } else {

            NSDictionary *retDict = [self encodeObjectsForJSON:value ];
            [returnDictionary setObject:retDict forKey:key];
        }
    }

    return returnDictionary;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:36:38.773

这就是我所做的。它类似于您要实现的目标。

[da代码链接](https://gist.github.com/611157)

它比我认为您正在寻找的要明确一些，但我认为我会建议。

# google-chrome - 如何在 Chrome 上通过 id 获取帧？

> ID：12714947
> 
> 赞同：5
> 
> 时间：2012-10-03T18:53:14.680
> 
> 标签：google-chrome, google-chrome-extension

我正在使用[onBeforeRequest](http://developer.chrome.com/extensions/webRequest.html)

```
chrome.webRequest.onBeforeRequest.addListener(function(object details) {...}); 
```

详细返回

> frameId ( 整数 )

所以我有框架 id，我怎样才能从这个 id 中检索元素框架并访问`src`... `parentId`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:20:49.103

我假设这是为您的背景页面。您可能并不关心实际的选项卡，而是希望将标题信息与该 tabId 相关联。为此，请执行以下操作：1）创建标签容器：“tabs = {}”2）在该容器中存储详细信息：“tabs[details.id].details.push(details);”

看起来像这样：

```
tabs = {};

init=function(){
...
chrome.webRequest.onBeforeRedirect.addListener(beforeRedirect, requestFilter, extraInfo);
...
}

beforeRedirect = function(details){
...
tabs[details.id].details.push(details);
...
} 
```

您还可以选择 chrome.tabs.query 来挂钩到实际的选项卡。如果您只想存储标头信息，您可能不想使用它：

```
chrome.tabs.query({active:true, windowId: chrome.windows.WINDOW_ID_CURRENT}, function(tab){
    var currentTab = tab[0];
    ... 
```

# public-key-encryption - 如何使用证书加密数据？

> ID：12714948
> 
> 赞同：2
> 
> 时间：2012-10-03T18:53:16.227
> 
> 标签：public-key-encryption, certificate, cryptoapi

如何使用Microsoft Crypto API 中的*“证书”加密数据？*

* * *

我知道如何使用 AES 加密使用 Microsoft Crypto API 加密数据：

```
keyBlob.hdr.bType := PLAINTEXTKEYBLOB;
keyBlob.hdr.bVersion := CUR_BLOB_VERSION;
keyBlob.hdr.reserved := 0;
keyBlob.hdr.aiKeyAlg := CALG_AES_128;
keyBlob.cbKeySize := 16;
Move(data[0], keyBlob.key[0], 16);

/*
   Set ProviderName to either
   providerName = "Microsoft Enhanced RSA and AES Cryptographic Provider"
   providerName = "Microsoft Enhanced RSA and AES Cryptographic Provider (Prototype)"  //Windows XP and earlier
*/
MS_ENH_RSA_AES_PROV_W: WideString = 'Microsoft Enhanced RSA and AES Cryptographic Provider';
providerName := MS_ENH_RSA_AES_PROV_W;

CryptAcquireContextW(provider, nil, PWideChar(providerName), PROV_RSA_AES, CRYPT_VERIFYCONTEXT);
CryptImportKey(provider, PByte(@keyBlob), sizeof(keyBlob), 0, 0, importedKey);

mode := CRYPT_MODE_CBC;
CryptSetKeyParam(importedKey, KP_MODE, @mode, 0);

//CryptEncrypt encrypts in-place. Copy stuff to be encrypted into new byte buffer
utf8PlainText := TCrypt.WideStringToUTF8(szPlainText);
dataLen := Length(utf8PlainText);
bufferLen := dataLen+16; //allocate a buffer larger than we need to hold the data we want to encrypt
SetLength(data, bufferLen);
Move(utf8PlainText[1], data[0], dataLen);

if not CryptEncrypt(importedKey, 0, True, 0, @data[0], {var}dataLen, bufferLen) then
begin
   le := GetLastError;
   if le = ERROR_MORE_DATA  then
   begin
      /*
         If the buffer allocated for pbData is not large enough to hold the encrypted data,
         GetLastError returns ERROR_MORE_DATA and stores the required buffer size,
         in bytes, in the DWORD value pointed to by pdwDataLen.
      */
      bufferLen := dataLen;
      SetLength(data, bufferLen);
      CryptEncrypt(importedKey, 0, True, 0, @data[0], {var}dataLen, bufferLen);
   end;
   CryptDestroyKey(importedKey);
   CryptReleaseContext(provider, 0);
end; 
```

现在我需要做同样的事情，除了对称加密之外，我需要使用公钥进行加密，使用私钥进行解密。

* * *

**注意**：这 15 行对称加密代码花了 3 天时间。我希望有人能从我的头撞到墙上一周后和我一样，我最终走错了路，以为我必须安装**OpenSSL**。更糟糕的是，如果我尝试[从本机代码调用](https://stackoverflow.com/questions/11977806/how-to-pass-safearray-to-com-object-through-idispatch#comment15974534_11977806)[**COM 对象**](https://stackoverflow.com/questions/11972829/how-to-call-use-net-rijndaelmanaged-from-native-com)

**注意**：我只包含代码示例作为用无关垃圾填充问题的一种方式。如果某个问题仅包含一行，则有些人会投票结束该问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:20:22.020

Microsoft Crypto API contain high-level functions for asymmetric encryption and decryption with certificates. Look at `CryptEncryptessage` and `CryptDecryptMessage`.

In decryption case your CERT_CONTEXT must have a `CERT_KEY_PROV_INFO_PROP_ID` property.

I can give you an examples of usage:

```
const wchar_t message[] = L"This is a simple test message.";
PCCERT_CONTEXT hCert = NULL;
HCERTSTORE hStore = NULL;

static bool openCertStoreMY(CDialog *parent)
{
    if(!hStore)
    {
        hStore = CertOpenSystemStore(NULL, L"MY");

        if(!hStore)
        {
            parent->MessageBox(L"Cannot open \"MY\"", L"Error", MB_ICONERROR);
            return false;
        }
    }

    return true;
}

void CTestDlg::OnEncryptClicked()
{
    if(!hCert)
    {
        if(!openCertStoreMY(this))
            return;

        hCert = CryptUIDlgSelectCertificateFromStore(hStore, GetSafeHwnd(), NULL, NULL, 0, 0, 0);

        if(!hCert)
            return;
    }

    CRYPT_ENCRYPT_MESSAGE_PARA params;
    memset(&params, 0, sizeof(CRYPT_ENCRYPT_MESSAGE_PARA));
    params.cbSize = sizeof(CRYPT_ENCRYPT_MESSAGE_PARA);
    params.dwMsgEncodingType = X509_ASN_ENCODING | PKCS_7_ASN_ENCODING;
    params.ContentEncryptionAlgorithm.pszObjId = "2.16.840.1.101.3.4.1.2"; //AES128

    DWORD msz;
    DWORD cbMsg = sizeof(message);
    const BYTE *pbMsg = (PBYTE)message;
    if(!CryptEncryptMessage(&params, 1, &hCert, pbMsg, cbMsg, NULL, &msz))
        return;

    PBYTE outBuf = new BYTE[msz];
    if(CryptEncryptMessage(&params, 1, &hCert, pbMsg, cbMsg, outBuf, &msz))
    {
        FILE *fil = _wfopen(filename, L"wb");
        if(fil)
        {
            fwrite(outBuf, 1, msz, fil);
            fclose(fil);
            MessageBox(L"Complete");
        }
        else
            MessageBox(L"Cannot open file", L"Error", MB_ICONERROR);
    }

    delete [] outBuf;
}

void CTestDlg::OnDecryptClicked()
{
    if(!openCertStoreMY(this))
        return;

    CRYPT_DECRYPT_MESSAGE_PARA params;
    params.cbSize = sizeof(CRYPT_DECRYPT_MESSAGE_PARA);
    params.dwMsgAndCertEncodingType = X509_ASN_ENCODING | PKCS_7_ASN_ENCODING;
    params.cCertStore = 1;
    params.rghCertStore = &hStore;
    params.dwFlags = 0;

    DWORD cbMsg;
    PBYTE pbMsg;

    FILE *fil = _wfopen(filename, L"rb");
    if(fil)
    {
        fseek(fil, 0 ,2);
        cbMsg = ftell(fil);
        fseek(fil, 0, 0);
        pbMsg = new BYTE[cbMsg];

        fread(pbMsg, 1, cbMsg, fil);
        fclose(fil);
    } else {
        MessageBox(L"Cannot open file", L"Error", MB_ICONERROR);
        return;
    }

    DWORD msz;
    if(!CryptDecryptMessage(&params, pbMsg, cbMsg, NULL, &msz, NULL))
    {
        delete [] pbMsg;
        return;
    }

    PBYTE outBuf = new BYTE[msz];
    if(CryptDecryptMessage(&params, pbMsg, cbMsg, outBuf, &msz, NULL))
        MessageBox((LPCWSTR)outBuf);

    delete [] pbMsg;
    delete [] outBuf;
} 
```

# php - 雅虎是否支持 oauth 的状态参数？

> ID：12714950
> 
> 赞同：2
> 
> 时间：2012-10-03T18:53:20.657
> 
> 标签：php, oauth, state, yahoo, yahoo-oauth

Google 和 FB 正确支持 oauth 的“状态”参数。雅虎呢？

如何在 Yahoo oauth 进程中跨请求传递自定义数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:04:47.213

就像 Jan 所说，Yahoo 是 OAuth 1 ......并且不需要状态参数。

您会注意到 Google 和 FB 要求每个回调 URL 都在 Google/FB 中显式定义/注册。如果您想偏离这些 URL……您需要使用 state 参数。

雅虎只要求您注册回调 URL 的主机/域。其余部分完全可变，可能包含您想要的任何参数 [http://myregistereddomain.com/whateverpath/?some_param=whatevr&state=heres_your_state&foo=bar](http://myregistereddomain.com/whateverpath/?some_param=whatevr&state=heres_your_state&foo=bar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T13:18:24.763

Yahoo OAuth2 实现支持参数*state*。您可以在主请求中附加它。这是一个基本的 php 示例：

```
https://api.login.yahoo.com/oauth2/request_auth?client_id='.$client_id.'&redirect_uri='.$redirect_uri.'&response_type=code&state='.$state 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T23:02:01.743

Google 和 Facebook 实现了 OAuth 2，这需要提供者支持该`state`参数。由 Yahoo 实现的 OAuth 1*没有*这样的参数。

例如，您可以在用户的​​浏览器中存储一个 cookie 以保存状态。

# android - Android下这个布局的名称是什么？

> ID：12714951
> 
> 赞同：0
> 
> 时间：2012-10-03T18:53:22.560
> 
> 标签：android, android-layout

我想知道Android下是否支持这种布局，它的名字是什么。

说明：应用程序默认显示在主视图中，当从边缘向屏幕中心做出“滑动手势”时会出现一个菜单；通常这种布局必须提供某种回调或设法停止应用程序的底层活动，以便用户可以使用菜单而不会干扰他对应用程序本身所做的事情。

![在此处输入图像描述](../Images/9dd5e51006fd065aa17a6c894ea9225d.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:54:41.340

此行为没有内置功能。你需要自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:14:51.590

如果您正在寻找滑动布局，[这里](https://github.com/jfeinstein10/SlidingMenu)有一个示例：

你可以调用它：

```
<com.slidingmenu.lib.SlidingMenu
    xmlns:sliding="http://schemas.android.com/apk/res-auto"
    android:id="@+id/slidingmenulayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    sliding:viewAbove="@layout/YOUR_ABOVE_VIEW"
    sliding:viewBehind="@layout/YOUR_BEHIND_BEHIND"
    sliding:touchModeAbove="margin|fullscreen"
    sliding:touchModeBehind="margin|fullscreen"
    sliding:behindOffset="@dimen/YOUR_OFFSET"
    sliding:behindWidth="@dimen/YOUR_WIDTH"
    sliding:behindScrollScale="@dimen/YOUR_SCALE"
    sliding:shadowDrawable="@drawable/YOUR_SHADOW"
    sliding:shadowWidth="@dimen/YOUR_SHADOW_WIDTH" /> 
```

没有这样的内置功能，所以你必须使用第三方库

# iphone - UILineBreakMode 与 NSLineBreakMode

> ID：12714956
> 
> 赞同：9
> 
> 时间：2012-10-03T18:53:44.913
> 
> 标签：iphone, ios, nsstring, ios6, sizewithfont

我看到一些 UIStringDrawing 方法已更新为使用 NSLineBreakMode 而不是 iOS 6.0 中的 UILineBreakMode：

例如

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(NSLineBreakMode)lineBreakMode 
```

如何检查这一点以确保我的 iOS 5 及以下用户继续使用 UILineBreakMode？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T18:58:44.010

无需检查。这些只是枚举，它们映射到相同的值

您可以看到这里没有真正的区别：

[UILineBreakMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#)与[NSLineBreakMode](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/c/tdef/NSLineBreakMode)

```
 enum {
   NSLineBreakByWordWrapping = 0,
   NSLineBreakByCharWrapping,
   NSLineBreakByClipping,
   NSLineBreakByTruncatingHead,
   NSLineBreakByTruncatingTail,
   NSLineBreakByTruncatingMiddle
};
typedef NSUInteger NSLineBreakMode

typedef enum {
   UILineBreakModeWordWrap = 0,
   UILineBreakModeCharacterWrap,
   UILineBreakModeClip,
   UILineBreakModeHeadTruncation,
   UILineBreakModeTailTruncation,
   UILineBreakModeMiddleTruncation,
} UILineBreakMode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T04:24:10.227

UILineBrakeMode 在 ios6 中已弃用 [http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/c_ref/UILineBreakMode](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/c_ref/UILineBreakMode)

# c# - (407) 需要代理身份验证（ISA 服务器需要授权才能完成请求。拒绝访问 Web 代理过滤器

> ID：12714957
> 
> 赞同：-1
> 
> 时间：2012-10-03T18:53:45.093
> 
> 标签：c#, web-services, proxy

我知道这个错误很常见，但是我尝试将解决方案应用于这个问题，但无法解决。

那是我的代码：

```
 var endpoint = new EndpointAddress(new Uri("http://www3prz.bancobonsucesso.com.br/Servicos/app.svc"), EndpointIdentity.CreateDnsIdentity("bancobonsucesso.com.br"));
        var binding = new WSHttpBinding();

        binding.UseDefaultWebProxy = true;
        binding.Security.Mode = SecurityMode.Message;
        binding.Security.Message.ClientCredentialType = MessageCredentialType.UserName;
        binding.Security.Message.EstablishSecurityContext = true;
        binding.Security.Message.NegotiateServiceCredential = true;

        var customBinding = new CustomBinding(binding);

        SymmetricSecurityBindingElement security = customBinding.Elements.Find<SymmetricSecurityBindingElement>();
        security.LocalClientSettings.MaxClockSkew = TimeSpan.MaxValue;
        security.LocalClientSettings.DetectReplays = false;

        SecureConversationSecurityTokenParameters secureTokenParams = (SecureConversationSecurityTokenParameters)security.ProtectionTokenParameters;
        SecurityBindingElement bootstrap = secureTokenParams.BootstrapSecurityBindingElement;
        bootstrap.LocalClientSettings.MaxClockSkew = TimeSpan.MaxValue;
        bootstrap.LocalClientSettings.DetectReplays = false;

        ws = new ServicoClient(customBinding, endpoint);
        ws.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
        ws.ClientCredentials.UserName.UserName = "test";
        ws.ClientCredentials.UserName.Password = "test";

        var return = ws.EmitirBoleto("test"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:31:28.797

在 WCF 绑定中使用 useDefaultWebProxy：

```
<bindings>
<basicHttpBinding>
<binding name="bindingName"  useDefaultWebProxy="true">

WebProxy wproxy = new WebProxy("new proxy",true);
wproxy.Credentials = new NetworkCredential("user", "pass");
WebRequest.DefaultWebProxy = wproxy; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T05:44:30.060

此错误可能会导致代理设置出现问题。请使用您的网络浏览器检查代理设置。刚刚更改了连接设置选项->设置->连接设置为**自动检测代理设置**

祝你好运 ...

# unit-testing - 在 Salesforce 中的触发器上编写测试类

> ID：12714959
> 
> 赞同：0
> 
> 时间：2012-10-03T18:53:50.747
> 
> 标签：unit-testing, triggers, salesforce

我是一个完整的代码菜鸟，需要帮助为 Salesforce 中的触发器编写测试类。任何帮助将不胜感激。

这是触发器：

```
trigger UpdateWonAccounts on Opportunity(before Update) {
  Set < Id > accountIds = new Set < Id > ();

  //Collect End user Ids which has won Opportunities
  for (Opportunity o : Trigger.new) {
    if (o.isWon && o.EndUserAccountName__c != null) {
      accountIds.add(o.EndUserAccountName__c);
    }
  }

  List < Account > lstAccount = new List < Account > ();

  //Iterate and collect all the end user records
  for (Account a : [Select Id, Status__c From Account where Id IN : accountIds]) {
    lstAccount.add(new Account(Id = a.Id, Status__c = true));
  }

  //If there are any accounts then update the records
  if (!lstAccount.isEmpty()) {
    update lstAccount;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:29:32.637

阅读[Apex 代码测试方法简介](http://wiki.developerforce.com/page/An_Introduction_to_Apex_Code_Test_Methods)和[如何编写触发器测试](http://teachmesalesforce.wordpress.com/2011/05/07/how-to-write-a-trigger-test/)。

基本上，您想创建一个新的测试方法来更新（插入、删除、取消删除等，具体取决于您的触发条件）记录或 sObject。

它看起来有点像这样：

```
public class myClass {
    static testMethod void myTest() {
       // Add test method logic to insert and update a new Opportunity here
    }
} 
```

# javascript - Datejs：获取星期几

> ID：12714962
> 
> 赞同：0
> 
> 时间：2012-10-03T18:54:06.633
> 
> 标签：javascript

[使用 Datejs - 获取星期几](https://stackoverflow.com/questions/8889339/using-datejs-get-the-day-of-the-week)

我也在使用[http://www.datejs.com](http://www.datejs.com)。我也一定想念它。有没有办法让我获得一周中的**天数**？

我知道我可以使用数组等价，但是图书馆非常好，我想我错过了它，我到处找。

**更新：**

我也知道我可以使用 date getDay 方法，但我认为有一个 datejs 替代方法可以纠正内置日期对象的一些奇怪行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:58:24.420

您可以使用标准`Date`方法获取号码，[`getDay`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)或者[`getUTCday`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getUTCDay)：

```
new Date('2012-10-03').getDay(); // 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:00:04.217

只需在对象上使用内置[`getDay`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)函数`Date`：

```
new Date().getDay(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T07:47:21.883

此代码通过现有的一种算法计算 1700/1/1 之后日期的星期几

```
var weekDay = function(year, month, day) {
                  var offset = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
                  var week   = {0:'Sunday', 
                                1:'Monday', 
                                2:'Tuesday', 
                                3:'Wednesday', 
                                4:'Thursday', 
                                5:'Friday', 
                                6:'Saturday'};
                  var afterFeb = (month > 2)? 0 : 1;
                  aux = year - 1700 - afterFeb;
                  // dayOfWeek for 1700/1/1 = 5, Friday
                  dayOfWeek  = 5;                      
                  // partial sum of days betweem current date and 1700/1/1
                  dayOfWeek += (aux + afterFeb) * 365;
                  // leap year correction
                  dayOfWeek += parseInt(aux / 4) - 
                               parseInt(aux / 100) + 
                               parseInt((aux + 100) / 400);
                  // sum monthly and day offsets
                  dayOfWeek += offset[month - 1] + (day - 1);
                  dayOfWeek = parseInt(dayOfWeek % 7);

                  return [dayOfWeek, week[dayOfWeek]];
              };  

console.log(weekDay(2013, 6, 15)[0] == 6, weekDay(2013, 6, 15)[1] == "Saturday");
console.log(weekDay(1969, 7, 20)[0] == 0, weekDay(1969, 7, 20)[1] == "Sunday");
console.log(weekDay(1945, 4, 30)[0] == 1, weekDay(1945, 4, 30)[1] == "Monday");
console.log(weekDay(1900, 1, 1)[0]  == 1,  weekDay(1900, 1, 1)[1] == "Monday");
console.log(weekDay(1789, 7, 14)[0] == 2, weekDay(1789, 7, 14)[1] == "Tuesday"); 
```

# python - 博托反转流

> ID：12714965
> 
> 赞同：4
> 
> 时间：2012-10-03T18:54:27.130
> 
> 标签：python, stream, twisted, boto

我有一个文件上传到的服务器，我希望能够使用 boto 将这些转发到 s3，我必须在数据上传到 s3 时对数据进行一些处理。

我遇到的问题是他们上传的方式我需要提供一个可写的流，传入数据被写入并上传到 boto 我需要一个可读的流。所以就像我有两个不连接的末端。有没有办法用可写流上传到 s3？如果是这样，那将很容易，我可以将上传流传递给 s3，它的执行将链接在一起。

如果没有我有两个松散的末端，我需要在它们之间有一些缓冲，它可以从上传中读取以保持移动，并公开一个我可以提供给 boto 以便可以读取的读取方法。但是这样做我确定我需要线程化 s3 上传部分，因为我使用的是扭曲的，所以我宁愿避免这样做。

我有一种感觉，我已经把事情复杂化了，但我想不出一个简单的解决方案。这必须是一个常见的问题，我只是不知道如何把它用词很好地搜索它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:12:57.257

boto 是一个带有阻塞 API 的 Python 库。这意味着您必须使用线程来使用它，同时维护 Twisted 为您提供的并发操作（就像您在使用 boto ''without'' Twisted 时必须使用线程来获得任何并发性一样；即，Twisted 没有帮助使 boto 非阻塞或并发）。

相反，您可以使用 txAWS，这是一个面向 Twisted 的库，用于与 AWS 进行交互。 `txaws.s3.client`提供与 S3 交互的方法。如果您熟悉 boto 或 AWS，其中一些应该已经很熟悉了。例如，`create_bucket`或`put_object`。

如果 txAWS 提供流式 API 会更好，这样您就可以在文件上传给您时上传到 S3。我认为这目前正在开发中（基于 Twisted 中的新 HTTP 客户端`twisted.web.client.Agent`），但可能尚未发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T20:07:58.123

您只需要将流包装在像 object 之类的文件中。所以本质上，流对象应该有一个 read 方法，该方法会阻塞直到文件完全上传。

之后，您只需使用 s3 API

```
bucketname = 'my_bucket'
conn = create_storage_connection()
buckets = conn.get_all_buckets()
bucket = None
for b in buckets:
    if b.name == bucketname:
        bucket = b
if not bucket:
    raise Exception('Bucket with name ' + bucketname + ' not found')
k = Key(bucket)
k.key = key
k.set_contents_from_filename(MyFileLikeStream) 
```

# php - Javascript prompt() 输出到 PHP 函数

> ID：12714968
> 
> 赞同：0
> 
> 时间：2012-10-03T18:54:33.900
> 
> 标签：php, javascript, jquery, prompt, .post

我一直在尝试从 Javascript 提示符中获取用户输入到 PHP 函数中，并且在这样做时遇到了很多麻烦。我在尝试 jQuery 的 $.post 方法时不知所措——因为 PHP 根本不想执行，不知道为什么。

无论如何，这是我目前正在做的事情的要点：

1 一个项目及其数据是从数据库加载的 - 此信息显示在表格中。

2 表中的所有数据都可以通过 Javascript prompt() 进行编辑，我为此使用的代码如下：

```
<div id="lvl3"><a href="" onclick="popupprompt(1); return false"><?php echo $fetchdata['name']; ?></a></div> 
```

上面的工作是这样的：lvl3 是字体样式的标签；空白href使其充当链接；popupprompt 是我制作的提示功能，它有一个参数，“类型”或正在编辑的内容（1 为项目名称，2 为项目描述等）；返回 false 所以页面不会重新加载；php echo 在表格中显示项目数据。

3 一旦用户单击上面的对象，它就会执行一个名为 popupprompt 的 javascript 函数，该函数接受一个“类型”参数，或者正在更改的项目信息。该函数的代码如下：

```
 function popupprompt(type) {
        switch(type)
    {
        case 1:
            var name = prompt("Project Name:", "");

            if (name != null && name != "")
            {
                //Change Project Name
                var getname = name;
                var gettype = type;

                $.post("edit.php", { type: gettype, name: getname });
            } else if (name == "") {
                senderror("Please enter a valid Project Name");
            } else {
                //Prompt canceled
                sendnotification('Canceled my ass!');
            }
            break;
        case 2:
                            //Description?
        case 3:
            //Version?
        case 4:
            //Release?
        default:
            alert("There was an error processing your request.");
            break;
    } } 
```

我在这个函数中遇到的问题是 edit.php 中没有任何内容被执行——我一点也不知道为什么。此外，我不得不更改括号，以便它在代码框中正确显示 - 所以不要介意那些。

4 无论如何，现在用户输入已发布到 edit.php- 这不起作用，但我还是会发布它：

```
 <?php
    $type = $_POST['type'];
    $name = $_POST['name'];

    switch($type) {
case 1:

    dbconnect();

    $urlext = geturlext();
    $authenticated = isauthenticated();

    if ($authenticated == false)
    {
        echo("<script>senderror('Access denied');</script>");
    } else {

        //Escape and trim input
        $input = trim($input);
        $input = mysql_real_escape_string($input);

        $update = "UPDATE 'projects' SET 'name' = '$input' WHERE 'name' = '$urlext'";
        $updatequery = mysql_query($update) or die(mysql_error());

        echo("<script>sendnotification('Project Name updated');</script>");
        }
    break;
    default:
    break;
    }
    ?> 
```

再次不得不移动一些括号。但无论如何——这个函数应该更新数据库中的数据——然而，它什么也不做。我已经在开始时放置了警报，但它们从未被调用过。

无论如何，长话短说-如果您知道我做错了什么，请赐教，另外，如果有更好的方法可以做到这一点-请告诉我！

我感谢所有帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:32:01.247

搁置了一周后才弄清楚。在 firebug 中仔细查看了它，找出了导致我的大部分问题以及 MySQL 语法错误的错字。

我不知道为什么，但是当以这种方式从文件调用时，我的自定义错误报告系统不起作用。这可能是我忽略的另一件事，但萤火虫肯定有帮助。

感谢那些试图帮助的人<3

# php - codeigniter 邮件去垃圾邮件任何解决方案

> ID：12714969
> 
> 赞同：0
> 
> 时间：2012-10-03T18:54:37.350
> 
> 标签：php, codeigniter, gmail

> **可能重复：**
> [如何确保以编程方式发送的电子邮件不会被自动标记为垃圾邮件？](https://stackoverflow.com/questions/371/how-do-you-make-sure-email-you-send-programmatically-is-not-automatically-marked)

我正在使用 codeigniter 电子邮件库发送。我正在使用 SMTP 协议。

```
 $this->load->library('email');
    $config = array(
        'mailtype' => 'html',
        'protocol' => 'smtp',
        'smtp_user' => 'xxxx@gmail.com',
        'smtp_pass' => 'xxxx',
        'smtp_port' => '465',
        'smtp_host' => 'ssl://smtp.gmail.com',
        'mail_path' => 'ssl://smtp.gmail.com'
        );
    $this->email->initialize($config);
    $this->email->set_newline("\r\n");
        $this->email->from("xxxx@gmail.com","xxxx");        
        $message = "Dear Admin,<br /><br />";
    $this->email->subject('Notification');
    $this->email->message($message);
    $this->email->send(); 
```

电子邮件发送完美，但它会成为垃圾邮件。我要收件箱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:00:47.330

该示例触发了 gmail 的垃圾邮件过滤器。提供一些带有看起来很重要的措辞的实际内容。或者至少不喜欢垃圾邮件。

```
$message = "Dear firstname lastname,<br /><br />As you have chosen on the setup page, you are receiving this message to indicate that the requested threshold has been reached.";
$this->email->subject('Notification for recurring bill payment');
$this->email->message($message); 
```

# facebook - 检索 facebook 个人资料信息 iOS6

> ID：12714974
> 
> 赞同：0
> 
> 时间：2012-10-03T18:54:49.657
> 
> 标签：facebook, ios6, social-framework

我已成功提示用户通过 SocialFramework 使用以下方法授予 facebook 权限，但似乎无法检索并显示基本个人资料信息（姓名、电子邮件、身份证等......）我想有简单方法，但找不到它们。任何人都可以在这里提供一些帮助吗？谢谢

```
-(IBAction)getInfo:(id)sender{

NSLog(@"FIRING");

ACAccountStore *_accountStore = [[ACAccountStore alloc] init];

ACAccountType *facebookAccountType = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

// We will pass this dictionary in the next method. It should contain your Facebook App ID key,
// permissions and (optionally) the ACFacebookAudienceKey
NSDictionary *options = @{ACFacebookAppIdKey : @"284395038337404",
ACFacebookPermissionsKey : @[@"email"],
ACFacebookAudienceKey:ACFacebookAudienceOnlyMe};

// Request access to the Facebook account.
// The user will see an alert view when you perform this method.
[_accountStore requestAccessToAccountsWithType:facebookAccountType
                                       options:options
                                    completion:^(BOOL granted, NSError *error) {
                                        if (granted)
                                        {
                                            NSLog(@"GRANTED");
                                            // At this point we can assume that we have access to the Facebook account
                                            NSArray *accounts = [_accountStore accountsWithAccountType:facebookAccountType];

                                            // Optionally save the account
                                            [_accountStore saveAccount:[accounts lastObject] withCompletionHandler:nil];
                                        }
                                        else
                                        {
                                            NSLog(@"Failed to grant access\n%@", error);
                                        }
                                    }]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:24:16.493

使用您发布的代码，您只能访问您获得的帐户的非常基本的信息，如屏幕名称或描述，在这种情况下是 facebook...

一个例子：

```
ACAccount *account = [accounts lastObject];
NSString *username = account.username; 
```

为了获得更完整的信息，如真实姓名、电子邮件等，您需要使用 graph facebook api 的 /me 功能进行 SLRequest。

```
NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];
NSString *serviceType = SLServiceTypeFacebook;

NSOperationQueue *queue = [[NSOperationQueue alloc] init];

[queue setName:@"Perform request"];
[queue addOperationWithBlock:^{

    SLRequest *request = [SLRequest requestForServiceType:serviceType requestMethod:SLRequestMethodGET URL:requestURL parameters:nil];

    [request setAccount:account];

    NSLog(@"Token: %@", account.credential.oauthToken);

    [request performRequestWithHandler:^(NSData *data, NSHTTPURLResponse *response, NSError *error) {

        // Handle the response...
        if (error) {
            NSLog(@"Error: %@", error);
            //Handle error
        }
        else {

            NSDictionary* jsonResults = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

            if (error) {

                NSLog(@"Error: Error serializating object");
                //Handle error
            }
            else {

                    NSDictionary *errorDictionary = [jsonResults valueForKey:@"error"];

                    if (errorDictionary) {

                        NSNumber *errorCode = [errorDictionary valueForKey:@"code"];

                        //If we get a 190 code error, renew credentials
                        if ([errorCode isEqualToNumber:[NSNumber numberWithInt:190]]) {

                            NSLog(@"Renewing credenciales...");

                            [self.accountStore renewCredentialsForAccount:account completion:^(ACAccountCredentialRenewResult renewResult, NSError *error){

                                if (error) {
                                    NSLog(@"Error: %@", error);
                                    //Handle error
                                }
                                else {
                                    if (renewResult == ACAccountCredentialRenewResultRenewed) {
                                        //Try it again
                                    }
                                    else {
                                        NSLog(@"Error renewing credenciales...");

                                        NSError *errorRenewengCredential = [[NSError alloc] initWithDomain:@"Error reneweng facebook credentials" code:[errorCode intValue] userInfo:nil];

                                        if (renewResult == ACAccountCredentialRenewResultFailed) {
                                            //Handle error
                                        }
                                        else if (renewResult == ACAccountCredentialRenewResultRejected) {
                                            //Handle error
                                        }
                                    }
                                }
                            }];
                        }
                    }
                    else {
                        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                            NSLog(@"jsonResults: %@", jsonResults);
                        }];
                    }
                }
            }
        }
    }];
}]; 
```

此代码还检查错误的可能性，如果令牌已过期并在后台运行网络进程以不阻塞接口，则进行一些处理。

您将在 jsonResults 字典中找到所有信息，您可以通过以下方式访问：

```
NSString *name = [jsonResults objectForKey:@"first_name"];
NSString *lastName = [jsonResults objectForKey:@"last_name"];
NSString *email = [jsonResults objectForKey:@"email"]; 
```

查看 facebook 文档以获取更多信息： [https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

希望能帮助到你！

# android - 如何通过我的 android 应用程序对用户进行身份验证以获取 Web 服务？

> ID：12714977
> 
> 赞同：2
> 
> 时间：2012-10-03T18:55:05.500
> 
> 标签：android, http, authentication, httpwebrequest

我需要用户能够从我的应用程序登录到 Web 服务。

当然，我可以使用 HTTP Post 将字符串推送到登录页面，但用户是否不必在应用程序上单击“登录”以传递字符串并再次在 Web 服务上实际登录？

我有三个猜测。- 我可以从 Web 服务中获取对象并将它们推回吗？- 我可以将字符串传递给 Web 服务并登录，而不必在该页面上再次选择“登录”（本质上，我可以将字段传递给 Web 服务并“单击”onClick 的 Web 登录按钮）吗？- 或者我是否可以调整 webview 以仅显示我希望用户看到的内容（用户名和密码字段以及登录按钮）？

我希望获得第二次猜测的语法帮助（如何传递字段并“单击”登录 OnClick？），但非常感谢任何建议。
谢谢你，
克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:59:33.257

由于您同时使用基于 Web 的登录和 Web 服务，因此您应该考虑像[OAuth](http://oauth.net/)这样的解决方案。基本上，用户通过网络登录并获得用户令牌。然后，该用户令牌可用于调用后续 Web 服务。

客户端和 Web 服务器之间存在一些反复，但它提供了一种强大的方法，可供 Facebook 和 Twitter 等大牌使用，因此您知道这是一个不错的选择。

[http://en.wikipedia.org/wiki/OAuth](http://en.wikipedia.org/wiki/OAuth)

# node.js - 从代码中获取 node.js 安装路径

> ID：12714979
> 
> 赞同：7
> 
> 时间：2012-10-03T18:55:17.743
> 
> 标签：node.js

我正在尝试为[node.js](http://nodejs.org)编写一个调试框架，并且很难弄清楚如何获取核心模块文件的完整路径，例如`fs.js`.

我听说它在`/lib`节点安装的文件夹中，但是对于各种安装情况（包括 Windows），我需要以一致的方式从代码中获取它。

我尝试查看节点安装路径之类`process`的`process.env`值，但看不到任何立即出现在我身上的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T19:50:53.193

要查找已安装的节点可执行文件所在的位置，您可以查看*[process.execPath](http://nodejs.org/api/process.html#process_process_execpath)*，它给出了节点可执行文件的绝对路径。

要查找某个模块的位置，您可以使用[require.resolve](http://nodejs.org/api/globals.html#globals_require_resolve) (module);

但是，我认为全局模块不能像其他常规模块一样从文件系统直接访问，因为它们似乎缓存在可执行文件中的某个位置。

# iphone - 何时使用单元测试？

> ID：12714980
> 
> 赞同：5
> 
> 时间：2012-10-03T18:55:19.130
> 
> 标签：iphone, ios, unit-testing

我了解如何实施单元测试，我只是在努力弄清楚何时使用它们。

假设我有一个基本的提醒应用程序。用户可以添加/编辑/删除提醒并在表格视图中查看它们。我想为应用程序的哪些部分设置单元测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T19:31:19.593

**理想世界**的答案会说您编写的*每一行*代码都应该进行单元测试。

但是让我们暂时忘记这一点，回到**现实世界**。为重要的代码编写测试并且拥有*另一道防线*是值得的。换句话说，测试简单地为一个字段赋值的构造函数是否有意义？很可能不是。对从客户提供的复杂 XML 中提取帐户数据的解析器进行单元测试是否值得？大概是。

这种差异从何而来？两个主要原因：

*   构造函数代码不太可能遭受不可预测的更改（与*不断发展的*解析器代码相比，以满足不断变化的需求/优化/重构）
*   构造函数代码相当简单，并且您已经多次编写此类代码，测试可能不会为您提供发现问题的巨大优势；快速浏览一下这样的代码，您很可能会知道发生了什么（与复杂的 XML 解析器代码相比）

为什么要区分？为什么要测试这个而不是那个？简单地测试一切会不会更容易（正如*理想世界*的答案所暗示的那样）？

不，因为**时间和金钱**的限制。编写代码需要*两者*。有人愿意为你的产品支付一定数量的钱，就像他只需要一定的时间等待产品交付一样。有些测试根本不值得（再次，构造函数代码示例）。请记住，单元测试无法避免 [收益递减](http://en.wikipedia.org/wiki/Diminishing_returns)（测试覆盖 80% 的代码库可能需要额外 20% 的开发时间，然后节省 20% 的调试/维护时间，而再进行 10% 的测试可能会花费两倍的时间但收益要少得多）。

再次，您可能想问*“线路在哪里？”* 你什么时候决定*“好的，这段代码的单元测试并不是真的需要”*？不幸的是，这种判断来自经验。编写代码，阅读代码，看看其他人（可能更有经验的开发人员）做什么和学习。

如果我要给出几个通用的建议（*单元测试*的内容），那将是：

*   从业务/领域逻辑代码开始
*   确保测试所有类型的转换器/解析器/计算器（它们相当容易测试，往往会经常更改[由于需求变化或重构]，并且它们的性质容易出错）
*   避免测试简单的单行方法，除非那一行在某些方面至关重要
*   为您发现的错误编写测试（并保留它们！）
*   不要盲目地遵循*“好代码必须有 99.99% 的测试覆盖率”*的神奇童话
*   在[programmers.stackexchange.com](http://programmers.stackexchange.com)上阅读[有关](https://softwareengineering.stackexchange.com/questions/159964/how-big-does-my-project-need-to-be-for-me-to-unit-test-it) [主题](https://softwareengineering.stackexchange.com/questions/158052/are-unit-tests-really-that-useful)的问题通常可以为您提供解决问题的不同视角

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:01:08.753

假设您将提醒存储在某个地方，也许在 plist 中。你可以编写一个单元测试来生成一个 Reminder 对象，存储它，检索数据，最后生成一个可用的 Reminder 类对象。

这样你就知道了几件事：

答：您的提醒生成正在工作

B：您存储数据的方法有效

C：从数据转到您的提醒对象正在工作

但是，您不应期望能够对应用程序的实际“功能”进行单元测试。例如触摸事件或导航控件。这些应该留给验收测试，这是一个完全不同的讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T19:04:03.663

测试您编写的所有代码。如果你想变得很酷，[先写测试](http://en.wikipedia.org/wiki/Test-driven_development)。如果您在模型或控制器上有一个方法，您还应该对其进行测试。

在不了解您的代码的情况下，很难给出建议。但听起来你会有一个控制器（如`RemindersController`）和一个模型（如`Reminder`）。这将是我要开始的基本大纲：

*   提醒控制器

    *   应该添加一个新的提醒
    *   应该更新现有的提醒
    *   应该删除现有的提醒
*   提醒

    *   `initWithMessage:atTime:`应该设置一条消息
    *   `initWithMessage:atTime:`应该设定一个时间

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:29:41.507

在选择编写什么类型的测试以及何时编写测试时，我遵循以下原则：

*   **专注于编写端到端测试。**与单元测试相比，您在每个测试中覆盖的代码更多，因此可以获得更多的测试收益。使这些成为整个系统的基本自动验证。

*   **下降到围绕复杂逻辑块编写单元测试。**在端到端测试难以调试或难以编写以获得足够的代码覆盖率的情况下，单元测试是值得的。

*   **等到您正在测试的 API 稳定**后，再编写任一类型的测试。您希望避免重构您的实现和测试。

Rob Ashton 有一篇关于这个主题的[好文章](http://codeofrob.com/entries/uncle-bobs-viewpoint-considered-harmful.html)，我大量引用了这篇文章来阐明上述原则。

# wpf - WPF 全局样式化 DataGrid 内的 TextBlock

> ID：12714982
> 
> 赞同：15
> 
> 时间：2012-10-03T18:55:29.257
> 
> 标签：wpf, c#-4.0, wpfdatagrid

我遇到了一个非常奇怪的问题。我正在尝试将全局样式应用于`DataGrid`. 他们中的大多数人完全按照我的期望工作。但是，`TextBlock`永远不会应用的样式。`ComboBox`, `TextBox`,和其他几个样式`Label`都被应用于各自的控件，但不是`TextBlock`. 我已经尽可能地简化了代码，问题仍然存在。我在下面提供了代码示例。

我需要将样式应用于`TextBlock`并且我不想手动将其应用于`TextBlock`.

```
<DataGrid ItemsSource="{Binding Data}" AutoGenerateColumns="False">
    <DataGrid.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="ANY_TEXTBLOCK_PROPERTY" Value="VALUE" />
        </Style>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Test">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="Globably Applied" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

**更多信息：**

*   `TextBlock`( `TextBox`,`ComboBox`等)以外的任何控件的全局样式都可以正常工作。
*   在内部定义全局样式`DataTemplate`将正常工作。
*   直接将样式分配给`TextBlock`using`x:Key`将起作用。
*   `DataGridCell`使用的全局样式`TextElement.PROPERTY`将应用于`TextBlock`.

虽然其中一些会将样式应用于 . `TextBlock`，但它们也有自己的问题。直接指定样式或在 a 中的某处定义样式`DataGridColumn`意味着我将不得不多次应用该样式。使用`TextElement.PROPERTY`on`DataGridCell`将样式应用到的不仅仅是`TextBlock`控件，并且会限制您可以设置的属性数量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T23:13:50.287

因此，通过更多的挖掘和一点点运气，我发现 WPF 不会在模板中应用隐式样式，除非`TargetType`派生自`Control`. 由于`TextBlock`不派生自`Control`，因此不应用其样式。因此，您要么必须手动将样式应用于每个非`Control`模板，要么定义模板内的隐式样式。

以下 MSDN 博客文章非常详细地解释了它。

[https://docs.microsoft.com/en-us/archive/blogs/wpfsdk/implicit-styles-templates-controls-and-frameworkelements](https://docs.microsoft.com/en-us/archive/blogs/wpfsdk/implicit-styles-templates-controls-and-frameworkelements)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T09:53:23.147

不幸的是，就像 BrianP 所说，WPF 不是那样工作的。但是，可以按如下方式设置单元格样式的 TextElement 属性：

```
<DataGrid ItemsSource="{Binding Data}" AutoGenerateColumns="False" DockPanel.Dock="Top">
    <DataGrid.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="TextElement.Foreground" Value="Green" />
        </Style>
    </DataGrid.CellStyle>
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Test">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="not globably applied" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

# java - 如何在 Piccolo2D 中绘制曲线？

> ID：12714983
> 
> 赞同：1
> 
> 时间：2012-10-03T18:55:30.157
> 
> 标签：java, piccolo

我正在尝试使用 Java 在 Piccolo2D 中创建一条曲线。

这是我的代码

```
public class MyCanvas extends PSwingCanvas{

 private void drawLine(PPath inSocket, PPath outSocket) {
  float startX = (float)inSocket.getX();
  float startY = (float)inSocket.getY()+4;
  float endX = (float)outSocket.getX()+8;
  float endY = (float)outSocket.getY()+4;

  PPath line = PPath.createLine(startX, startY, endX, endY);
  line.curveTo(endX+60,endY,startX-60,startY, startX, startY);
  getLayer().addChild(line);
 }

 public void testGraph(){
   PPath in = PPath.createEllipse(100f, 100f, 8, 8);
   PPath out = PPath.createEllipse(200f, 200f, 8, 8);
   this.getLayer().addChild(in);
   this.getLayer().addChild(out);
   drawLine(out,in);
 }

 public static void main(String[] args){
  final JFrame frame = new JFrame("Testing");
  MyCanvas canvas = new MyCanvas();
  canvas.testGraph();
  frame.getContentPane().add(editor);
  frame.setPreferredSize(new Dimension(600, 400));
  frame.pack();
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
          frame.setVisible(true); 
    }});
  }
 } 
```

我得到的图表是：

![在此处输入图像描述](../Images/bd4e8e8ffbeab34f10f5a1873706270d.png)

如何摆脱两点之间的原始线段，以便只看到曲线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:21:27.170

这可能为时已晚，但无论如何，您可以尝试以下方法：

```
PPath line = new PPath();
line.moveTo(endX, endY);
line.curveTo(endX + 60, endY, startX - 60, startY, startX, startY); 
```

这是基于原始代码示例的结果：

![在此处输入图像描述](../Images/ddc91d85a8341f619f58534ded02d778.png)

# android - 附加图像捕获以发送电子邮件

> ID：12714984
> 
> 赞同：0
> 
> 时间：2012-10-03T18:55:41.193
> 
> 标签：android, email

我在移动 Xperia Mini 中测试了这段代码，它运行成功，但现在我在另一个移动设备上测试，它不起作用，好吧....附加文件的名称是好的，但它没有显示字节在程序中发送电子邮件（gmail）

该文件存在于SD卡上，但我不知道它没有附加的原因......

```
 String a=Environment.getExternalStorageDirectory().getAbsolutePath()+ "myfile.jpg";

Intent emailIntent=new Intent(android.content.Intent.ACTION_SEND);

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailAdresses);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subjectText);
    emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, Uri.parse("file:/"+ a));

emailIntent.setType("plain/text"); // I changed that to image but nothing

startActivityForResult(Intent.createChooser(emailIntent, "Check your app:"),EMAIL_REQUEST); 
```

文件以这种方式保存：

字符串 a=Environment.getExternalStorageDirectory().getAbsolutePath()+ "myfile.jpg";

```
Intent i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
Uri output = Uri.fromFile(new File(a));         
i.putExtra(MediaStore.EXTRA_OUTPUT, output);

startActivityForResult(i,CAMERA_REQUEST); 
```

任何想法 ？谢谢大家...

# asp.net - 如何避免 .aspx .ascx 中的内联代码

> ID：12714988
> 
> 赞同：1
> 
> 时间：2012-10-03T18:55:55.510
> 
> 标签：asp.net, user-controls

我有一个这样的用户控件（.ascx）：

```
<% if (HasAccessMediaPlans) { iPortletCounter++; %>
                <div class="orange-portlet-box">
                    <div class="HomeModulePortletTitle"><a href="<%= (RawHtml)RootPath %>MediaPlanning/Default.aspx">Plans</a></div>
                    <p>Create // Edit // Review</p>
                </div>
                <div style="clear: both;"></div>
<% } %> 
```

其中 HasAccessMediaPlans 是在用户控件的代码后面 (.ascx.cs) 中定义的变量，它是在页面加载中分配的。

```
protected Boolean HasAccessMediaPlans = false;

 protected void Page_Load(object sender, EventArgs e) {
            HasAccessMediaPlans      = SessionState.CurrentUser.HasModuleAccess(MediaString + " Plans");
} 
```

我的问题是：如何避免在我的 usercontrol markup(.ascx) 中嵌入 <% %> 的内联服务器代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:23:51.097

```
<div class="orange-portlet-box" id="dvBox" runat="server">
  <div class="HomeModulePortletTitle">
    <a id="aLink">Plans</a>
  </div>
  <p>Create // Edit // Review</p>
</div>
<div style="clear: both;"></div> 
```

在后面的代码中

```
Boolean HasAccessMediaPlans = false;

protected void Page_Load(object sender, EventArgs e) 
{
  HasAccessMediaPlans = SessionState.CurrentUser.HasModuleAccess(MediaString + "Plans"); 
  dvBox.Visible = HasAccessMediaPlans;
  aLink.HREF = RootPath + "MediaPlanning/Default.aspx";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:58:41.373

您可以使用服务器端容器控件（例如 ）包装这段代码，`<div id="wrapper" runat="server">`并在服务器端以所需的方式分配其可见性属性。

这样可以避免在`.aspx`/`.ascx`文件中乱扔代码，并将代码保留在代码隐藏文件中。

# ruby-on-rails - Rails 加载类的约定

> ID：12714992
> 
> 赞同：0
> 
> 时间：2012-10-03T18:56:20.737
> 
> 标签：ruby-on-rails, conventions, autoload

我一直在了解有关 Rails 的更多信息，并且熟悉以下自动加载约定：

```
A::B::C.new 
```

由于rails自动加载，将创建一种新类型的C而无需它。

我当然可以明确要求`a/b/c`，这似乎不是真正的“导轨方式”。

我想知道 Rails 应用程序中是否有时更适合明确使用 require 而不是自动加载。例如，我可以通过深度嵌套的文件夹路径看到如何`A::B::C::D::E::F.new`打字会很痛苦。出于这个原因，它只是让文件夹目录保持较小深度的 Rails 方式吗？

如果有人可以对此有所了解，那将非常有帮助。

# macos - mdfind 查询奇怪的行为

> ID：12714997
> 
> 赞同：2
> 
> 时间：2012-10-03T18:56:36.417
> 
> 标签：macos, shell, osx-lion, osx-mountain-lion, spotlight

看看这个 mdfind 查询：

```
mdfind 'kMDItemFSName = "Pages.app" || kMDItemFSName = "Keynote.app" || kMDItemFSName = "Numbers.app"' 
```

有什么问题吗？也许合乎逻辑`OR`- `||`Apple 在`mdfind`手册页上没有记录？

在 99% 的情况下，`mdfind`返回每个应用程序的三个文件路径/位置`iwork`（或未安装时不返回任何内容）。

```
/Applications/iWork '09/Pages.app   
/Applications/iWork '09/Keynote.app  
/Applications/iWork '09/Numbers.app 
```

但是在〜1-5％（10.8.2）中，我从`mdfind`：

```
/Applications/iWork '09/Keynote.app  
/Applications/Mail.app  
/Applications/Messages.app  
/Applications/Utilities/Migration Assistant.app  
/Applications/Notes.app  
...  
/Library/Scripts/Printing Scripts/Convert To PDF.scpt  
/Library/Scripts/Printing Scripts/Convert To PostScript.scpt  
/Library/Scripts/Printing Scripts/Print Window With Subfolders.scpt  
/Library/Scripts/Printing Scripts/Print Window.scpt  
...  
/System/Library/Frameworks/GameKit.framework/Versions/A/Resources/GKNavbarBackButtonNormalLandscape.png  
/System/Library/Frameworks/GameKit.framework/Versions/A/Resources/GKNavbarBackButtonNormalLandscape@2x.png*  

------------ List goes on (tons of stuff) ------------ 
```

我的`mdfind`查询有问题吗，或者有什么问题`Spotlight database`吗？

当然有可能：在 Spotlight 中引入`10.7.5`和`10.8.2`更新存在严重错误（检查[https://discussions.apple.com/message/19863234#19863234](https://discussions.apple.com/message/19863234#19863234)）

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:03:35.727

我不知道这里发生了什么。似乎 Spotlight 无法在 kMDItemFS* 上进行 OR 搜索？

我在 Finder 中手动创建了一个基于 OR 的 Spotlight 搜索 - 它失败了。

我下载了 HoudahSpot 并做了一个简单的“文件名”是 Pages.app 或文件名是 Keynote.app 查询并得到了相同的结果 - 超过 50,000

所以它看起来不仅仅是 mdfind 对查询的解释中的一个错误。

作为进一步的线索：名称中带有 FS 的任何项目 - 例如 kMDItemFSName - 都不会存储在 Spotlight 数据库中，因此查询需要更长的时间。

```
 mdfind "kMDItemCFBundleIdentifier == 'com.apple.iWork.Pages'  || kMDItemCFBundleIdentifier == 'com.apple.iWork.Keynote'" 
```

在我的电脑上运行速度提高了大约 1000 倍。

在这个 5 岁左右的指南中，他们提到使用单个 | [对于 OR，但这对我在 10.8.2 http://macdevcenter.com/pub/a/mac/2006/01/04/mdfind.html](http://macdevcenter.com/pub/a/mac/2006/01/04/mdfind.html)上不起作用

# node.js - Nodejs：Express + RedisStore，req.session 未定义

> ID：12714999
> 
> 赞同：5
> 
> 时间：2012-10-03T18:56:48.903
> 
> 标签：node.js, express, connect

我以前做过这个......这次我没有追随我做错了什么，但我已经挣扎了几个小时，现在认为自己精神受阻。对应代码：

```
app.use(express.bodyParser());
app.use(i18next.handle);
app.use(express.methodOverride());
app.use(express.static(__dirname + '/public'));
app.set('views', __dirname + '/views');
app.set('view engine', 'swig');
app.set('view cache', false);
var session_store = new RedisStore({ client : redis_client});
app.use(express.errorHandler({ dumpExceptions : true, showStack : true}));
app.use(express.cookieParser());
app.use(express.session({ store : session_store, secret : SESSION_SECRET, key : "sid" }));
app.use(app.router); 
```

那么在处理请求时，这里只是一个例子：

```
app.get('/session_test', function (req, res, next) {
  console.log(req.session); //undefined
}); 
```

与 redis 的连接工作正常。没有显示错误。然后，当尝试从请求中访问它时， req.session 是未定义的。浏览器正在发送正确的 sid。

我不是请求期间发生的确切流程的专家，但是在调试之后，似乎在会话中间件之前调用了路由器。

提前感谢您提供的任何和所有可能的帮助。我会提供我能提供的任何代码，我不确定你有什么帮助。

这里有更多代码。服务器.js

```
 //Dependency modules
var express = require('express'),
  app = express.createServer(),
  //Application dependency modules
  settings = require('./settings'), //app settings
  routes = require('./routes'), //http routes
  rtroutes = require('./rtroutes'); //real time communication routes (io)

var io = require('socket.io').listen(app);
var appWithSettings = settings.setup(io, app);

routes.settings.setup(appWithSettings);
rtroutes.settings.setup(io, appWithSettings); 
```

在调用 routes.settings.setup 之前不会添加任何路由。设置（这是全局设置）是一个相当大的文件。这就是所有配置完成的地方。在调用 settings.setup 方法之前不会添加设置。这是文件的一部分：

```
//Dependency modules
var express = require('express'),
  redis = require('redis'),
//Important configuration values
var SESSION_SECRET = 'some secret thing which doesnt belong to stackoverflow!',
    insert_other_variables_here = "lalala";

//Computed general objects

var RedisStore = require('connect-redis')(express),
  redis_client = redis.createClient(REDIS_PORT, REDIS_HOST);

exports.setup = function (io, app) {
  app.configure(function () {
    app.use(express.bodyParser());
    app.use(i18next.handle);
    app.use(express.methodOverride());
    app.use(express.static(__dirname + '/public'));
    app.set('views', __dirname + '/views');
    app.set('view engine', 'swig');
    app.set('view cache', false);
    var session_store = new RedisStore({ client : redis_client});
    app.use(express.errorHandler({ dumpExceptions : true, showStack : true}));
    app.use(express.cookieParser());
    console.log("ABOUT TO ADD SESSION STORE MIDDLEWARE");
    app.use(express.session({ store : session_store, secret : SESSION_SECRET, key : "sid" }));
    console.log("AND NOW ADDED THE SESSION STORE MIDDLEWARE");
    app.use(app.router);
  });

  app.configure('development', function () {
     //some things in here, but nothing that affects app. I have commented this
     //for debugging and it changed nothing
  });

  app.configure('production', function () {
    //mostly configuration for io and some caching layers, as well as servers info
    app.use(express.errorHandler());
    app.use(express.logger({ stream : logFile }));
  });
  app.listen(WEB_PORT);
  return {
    app : app,
    //some other stuff that isn't relevant
  }
} 
```

我有 25 条路线分成 4 个不同的文件（不知何故，直到现在我才需要会话，因为我延迟了一些部分，而所需的一切都是用 Mongoose 完成的）。这是一个如何完成的示例（使用假名）：

路线/index.js

```
export.settings = require("./settings"); 
```

路线/settings.js

```
exports.setup = function (app_settings) {
  require("./route1")(app_settings);
  require("./route2")(app_settings);
  require("./route3")(app_settings);
}; 
```

这是一个剥离的“route1”文件（“routes/route1.js”）：

```
module.exports = function (app_settings) {
  var app = app_settings.app;
  console.log("ABOUT TO ADD ROUTES")
  app.get("/signin", function (req, res, next) {
    console.log(req.session); //this will be undefined
  });
  app.get("/register", function (req, res, next) {
  });
  app.get('/language', function (req, res, next) {
  });
  app.post('/settings', function (req, res, next) {
  });
  console.log("ADDED ROUTES NOW!")
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T22:45:19.293

每当您定义路由时，路由器都会自动插入到当时的任何中间件堆栈中（随后故意插入它的尝试将被忽略）。您确定在设置会话处理程序之前没有定义任何路由吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T10:39:55.603

忘了更新这个：Ebohlman 让我走上了正轨。

它是 i18next。当调用其中一个 init 方法时，它会设置路由，并迫使 app.router 更快地进入句柄堆栈。我的错，我没有意识到部分代码正在与应用程序对象交互，并且确实如此。没有办法比他如何根据我提供的信息更好地回答这个问题，所以我将他的回答标记为正确。

我应该试着多睡点vv