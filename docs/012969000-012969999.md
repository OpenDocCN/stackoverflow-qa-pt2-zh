# StackOverflow 问答 12969000-12969999

# mysql - 相同的 MySQL 查询在 MySQL Workbench 中返回的结果与从命令行返回的结果不同

> ID：12969000
> 
> 赞同：1
> 
> 时间：2012-10-19T07:02:06.710
> 
> 标签：mysql, database, function, mysql-workbench

这个查询`

```
delimiter $$

CREATE DEFINER=`root`@`localhost` FUNCTION `calculatePrice`(cheese VARCHAR(50), meat VARCHAR(50), veg VARCHAR(50)) RETURNS decimal(10,0)
    DETERMINISTIC
BEGIN
DECLARE price DECIMAL;
SET price = (SELECT  SUM(x.Price) 
    FROM
    (
        SELECT `priceFactor` AS Price FROM `tblCheese` WHERE `cheeseName` = cheese
        UNION ALL 
        SELECT `priceFactor` AS Price FROM `tblMeat` WHERE `meatName` = meat 
        UNION ALL 
        SELECT `priceFactor` AS Price FROM `tblVeggie` WHERE `veggieName` = veg
    ) x );
RETURN price;
END$$

` 
```

从 MySQL 命令行客户端调用时返回数学上正确的答案，但对于任何其他程序或从 PHP 调用时不正确（无论传递什么参数，它都返回 3。）见下文： ![相同的查询，相同的参数，不同的结果](../Images/1fcd50c8038450445e012c8591a80704.png)

调用语句，如果它是模糊的，是 SELECT calculatePrice('colby', 'sausage', 'black beans');

我以前从未见过这种奇怪的东西。这一切都来自 MySQL 的同一个副本，等等。

编辑添加： phpMyAdmin 也产生查询的正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:30:39.710

我可以告诉你这是怎么回事。

MySQL 发布时间最长的是 latin1_swedish_ce 作为几乎所有内容的默认字符集。现在，您通常在创建数据库时注意字符集，因此风险很小。

但是，通过线路传输数据需要编码，并且在用户端解释数据也需要解释。所以也有相应的设置。MySQL 工具的标准字符集是（因为它们来自同一家公司）latin1_swedish。

这是否会成为查询的问题很大程度上取决于查询运行的所有数据。此外，在查询中使用常量字符串时，它们的解释方式与从数据库到客户端的数据大致相同。

因此，字符编码通常是问题所在，这里也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:00:24.427

@x0cafebabe 击中了它：除了我的一个 character_ 变量之外的所有变量都设置为 UTF8，这是我在安装 MySQL 时指定的，但 character_set_database 设置为瑞典编码。我修复了这个问题，现在 MySQL 功能在各种媒体上都是一致的。为什么这会有所不同，我不知道（我在评论中问过），但确实如此。

我将永远在我曾经做过的每一个 MySQL 安装中检查这一点……对于这样一个微不足道的设置来说，这太让人头疼了！

# node.js - 可以在 Node 和 Windows Azure 上托管 jQuery 吗？

> ID：12969001
> 
> 赞同：0
> 
> 时间：2012-10-19T07:02:10.830
> 
> 标签：node.js, deployment, azure

我很难将节点应用程序部署到 Azure。因为我使用 jQuery 并且它依赖于 Contextify（这似乎与 windows 有问题），所以我只是在绕圈子。

有没有人成功地将使用 jQuery 的节点应用程序部署到 Azure，如果是这样，如何！？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:29:43.983

我猜您正在尝试在 Azure Web 角色上部署您的解决方案。使用 Web 角色可能会遇到问题。尝试将其部署到 Worker Role。

有关如何执行此操作的示例，请参见：[http ://coderead.wordpress.com/2011/09/22/windows-azure-and-node-js/](http://coderead.wordpress.com/2011/09/22/windows-azure-and-node-js/)

# c# - 使用参数从代码后面调用javascript函数

> ID：12969003
> 
> 赞同：2
> 
> 时间：2012-10-19T07:02:14.807
> 
> 标签：c#, javascript, asp.net, html

我正在从后面的代码生成一个锚点，并在其 onclick 函数上我想用字符串作为参数调用 javascript 函数。我正在尝试这个：-

```
 function show(data)
  {
        alert(data);
  } 
```

并致电：-

```
 string data = "<a onclick='show(\""+Task+"\")' >" + anchor inner text + "</a>"; 
```

我将此字符串添加到表格单元格中，我的项目要求是，当用户单击该特定单元格时，弹出窗口会显示我作为参数传递给 javascript 函数的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:11:04.523

```
string data = "<a onclick='show(\""+Task+"\")' >" + anchor inner text + "</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:04:02.093

更简洁的方法是将该值存储在数据属性中：

```
<td data-message='Hello World!'>Click me!</td> 
```

并用 jQuery 替换你的函数：

```
$('td').click(function() {
    alert($(this).data('message'));
});​ 
```

请参阅此[演示](http://jsfiddle.net/BEYK8/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:08:30.613

```
 <a href='' onclick='return check(\""+Task+"\")'>check</a> 

<script type='text/javascript'>  

function check() 
{    
 alert(data); 
}  
</script> 
```

试试这样的东西。代码未经测试可能会出现编译错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:07:03.370

我认为更好的方法是使用 RegisterStartupScript 方法来做到这一点。

```
StringBuilder sb = new StringBuilder();
sb.Append("<script type=text/javascript> alert('Hello World!') </");
sb.Append("script>");
cs.RegisterStartupScript(this.GetType(), "script", sb.ToString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:07:06.050

我想你错过了一句话：

```
 string data = "<a onclick='show(\""+Task+"\") >" + anchor inner text + "</a>"; 
```

至

```
 string data = "<a onclick='show(\""+Task+"\")' >" + anchor inner text + "</a>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T07:07:22.107

你可以使用 jQuery

```
$('td a').click(function(){

  var currLink=$(this);
  alert(currLink.text());//shows the inner text of anchor
  return false;//prevent default
}); 
```

# iphone - 当本地服务器以 JSON 格式返回 NULL 数据（json 对象）时应用程序崩溃？

> ID：12969004
> 
> 赞同：1
> 
> 时间：2012-10-19T07:02:16.587
> 
> 标签：iphone, xcode, json, localserver

*   **这是我调用 Web 服务的代码。**

    `(void)viewDidLoad`

    { [超级 viewDidLoad];

    ```
    //Make this controller the delegate for the location manager.self.mapview.delegate = self; 

    [self.mapview setShowsUserLocation:YES];

    //Instantiate a location object.
    locationManager = [[CLLocationManager alloc] init];

    [locationManager setDelegate:self];

    //Set some parameters for the location object.
    [locationManager setDistanceFilter:kCLDistanceFilterNone];

    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

    firstLaunch=YES; 
    ```

    `NSURL*url = [NSString stringWithFormat:@"http://198.71.54.13/service.php?CategoryID=%@&SubCategoryID=%@&latitude=%@&longitude=%@&radius=100000type=list",_cat_id,_subcat_id,currentCentre.latitude,currentCentre.longitude,app_var.radius];`

    ```
    NSURL *googleRequestURL=[NSURL URLWithString:url];

        // Retrieve the results of the URL.

        dispatch_async(kBgQueue, ^{
            NSData* data = [NSData dataWithContentsOfURL: googleRequestURL];
            // NSValue* data12 = [NSValue dataWithContentsOfURL: googleRequestURL];
            NSLog(@"%@ data",data);

            [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];

        });

    } 
    ```

*   **在这里我正在获取 Json 数据**

    ```
    -(void)fetchedData:(NSData *)responseData 
     {
        NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                                  JSONObjectWithData:responseData                               
                                  options:kNilOptions 
                                  error:&error];

     NSArray* places = [json objectForKey:@"business"]; 
    [self plotPositions:places];
    }

                                             **OUTPUTS** 
    ```

*   当没有来自 json 的数据时，我在控制台中收到以下错误：

    `<5b5d0a> responseData -[__NSArrayI objectForKey:]: unrecognized selector sent to instance 0x910e490 2012-10-19 15:17:56.242 SESpringBoardDemo[1731:13a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI objectForKey:]: unrecognized selector sent to instance 0x910e490'`

*   当有数据并且我得到这样的响应时，如何检查并避免应用程序 <5b5d0a> 响应数据崩溃？

`<7b226275 73696e65 7373223a 5b7b2243 6c69656e 744e616d 65223a22 5061726d 696c6c6f 6e222c22 57656253 69746522 3a226162 63642e63 6f6d222c 22416464 72657373 31223a22 20426f75 6c657661 72642042 72756e6f 20437275 7a222c22 41646472 65737332 223a2223 33323022 2c225a69 70223a22 39343922 2c224c61 74697475 6465223a 2231382e 34343437 222c224c 6f6e6769 74756465 223a222d 36362e32 35313822 2c22436f 6e746163 74506572 736f6e22 3a22526f 62657274 6f204669 67756572 6f222c22 50686f6e 654e756d 62657222 3a223738 372d3235 312d3039 3435222c 224d6f62 696c654e 756d6265 72223a22 3738372d 3334302d 38393337 222c2248 61735072 6f6d6f22 3a225922 2c224369 7479223a 22546f61 2042616a 61222c22 53746174 65223a22 50756572 746f2052 69636f22 2c224275 73696e65 73734944 223a2235 227d2c7b 22436c69 656e744e 616d6522 3a225069 7a7a6120 48757422 2c225765 62536974 65223a22 7777772e 6162632e 636f6d22 2c224164 64726573 7331223a 22524d56 20494920 53746167 65222c22 41646472 65737332 223a2220 53616461 73686976 616e6167 61722022 2c225a69 70223a22 35363030 3738222c 224c6174 69747564 65223a22 31332e30 3133222c 224c6f6e 67697475 6465223a 2237372e 35373522 2c22436f 6e746163 74506572 736f6e22 3a22536d 69746822 2c225068 6f6e654e 756d6265 72223a22 31313131 31313131 31222c22 4d6f6269 6c654e75 6d626572 223a2239 39393939 39393922 2c224861 7350726f 6d6f223a 2259222c 22436974 79223a22 426e6167 6c6f7265 222c2253 74617465 223a224b 6172616e 6174616b 61222c22 42757369 6e657373 4944223a 2232227d 2c7b2243 6c69656e 744e616d 65223a22 50616d69 6c6c706f 6e31222c 22576562 53697465 223a2261 73646640 6173662e 636f6d22 2c224164 64726573 7331223a 2220426f 756c6576 61726420 4272756e 6f204372 757a222c 22416464 72657373 32223a22 23333230 222c225a 6970223a 2230222c 224c6174 69747564 65223a22 31382e34 34343422 2c224c6f 6e676974 75646522 3a222d36 362e3235 32222c22 436f6e74 61637450 6572736f 6e223a22 47656f72 6765222c 2250686f 6e654e75 6d626572 223a2237 38372d32 35312d30 39343522 2c224d6f 62696c65 4e756d62 6572223a 22373837 2d333430 2d383933 37222c22 48617350 726f6d6f 223a2259 222c2243 69747922 3a22746f 61204261 6a61222c 22537461 7465223a 22507565 72746f20 5269636f 222c2242 7573696e 65737349 44223a22 37227d5d 7d0a>responseData`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:42:48.497

尝试添加**-(void)fetchedData:(NSData *)responseData**这个代码行：

```
NSLog(@"responseData: %@", responseData); 
```

并在此处写入 responseData 结果字符串。使用 NSDictionary 和 NSArray 似乎有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:09:23.140

从崩溃你可以清楚地看到。

```
reason: '-[__NSArrayI objectForKey:]' 
```

**您正在尝试`objectForKey`在 NSArray 上触发方法。您将其视为字典，但似乎我是 Array**。

如果仍然不能解决您的问题。请将 responseData 转换为字符串并检查实际响应，它肯定会对您有所帮助。

# java - 如何使用 Python 解析 Java 的语法和代码约定？

> ID：12969008
> 
> 赞同：3
> 
> 时间：2012-10-19T07:02:44.817
> 
> 标签：java, python, parsing

我正在做一个项目，我想就完全初学者编写的 Java 代码提供反馈。换句话说，我需要能够判断代码是否遵循约定，而不仅仅是它是否是有效的 Java 代码。

我研究过[pyparsing](http://pyparsing.wikispaces.com/)、[PLY](http://www.dabeaz.com/ply/ply.html)和[pyPEG](http://fdik.org/pyPEG/)等模块，看起来它们至少可以解析大部分 Java 子集——这很好。但是我对解析不是很有经验，所以我不确定是否可以使用这些工具来检查代码约定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:41:34.843

这取决于您正在谈论的代码约定类型。

*   如果您正在谈论反映在源语法和语义中的约定（例如，检查标识符约定、不分配给参数、正确关闭资源），则可以基于由从正常的Java语法。

*   如果您在谈论缩进、空白、注释等的使用约定，普通的 Java 解析器会忽略这些，并且它们不会记录在解析树中。因此，您需要使用旨在识别和捕获这些内容的解析器（或其他类型的工具）进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:53:12.393

似乎最好的选择是使用 Eclipse JDT，通过 Jython 或编写一个小的 Java 程序，该程序将由 Python 作为单独的进程执行。

# jquery - div覆盖中的jquery链

> ID：12969009
> 
> 赞同：0
> 
> 时间：2012-10-19T07:02:46.490
> 
> 标签：jquery, chaining

我正在尝试“链接”（添加）和附加功能：

原始代码，它激活了 ScrollTo 插件：

```
$('a.scroll').live('click',function(){   
   $.scrollTo(this.hash+"_", 3333, {easing:'easeOutCubic'} ); 
   window.location.hash = this.hash;
   return false;
}); 
```

我想要的是，当页面平滑滚动时，还有一个 div 覆盖淡入，在屏幕上停留几秒钟，然后在平滑滚动结束之前淡出并移除自身。

我已经在正常页面加载时使用了这个名为#preloader 的 div 覆盖，但我还想在 scrollTo 操作期间使用它。（这是一个固定的覆盖 div，里面有一个 css3“加载”动画。）

这是我迄今为止尝试过的一个示例，尝试将其“链接”到：

```
$('a.scroll').live('click',function(){   
    $.scrollTo(this.hash+"_", 3333, {easing:'easeOutCubic'} ); 
        $('#preloader').fadeIn(1234,function(){  // overlay div
            $(this).delay(1234).remove(); 
        });
    window.location.hash = this.hash;
    return false;
}); 
```

有了这个，什么都不会发生。ScrollTo 仍然有效，但没有出现覆盖。

我如何以正确的方式链接它？它需要淡入，然后在设置延迟后淡出。感谢您的帮助，我对 jquery 毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:23:14.983

我无法让它工作，所以我最终得到了不同的效果：

```
$('a.scroll').live('click',function(){  
    $('body').fadeTo('slow', 0.3);
    $.scrollTo(this.hash+"_", 3333, {easing:'easeInOutExpo'}); 
    window.location.hash = this.hash;
    $('body').fadeTo('slow', 1.0);
    return false;
}); 
```

使用它时，ScrollTo 感觉更流畅（不那么跳跃或不流畅）。在平滑滚动发生之前，主体不透明度缩小到 0.3，然后一旦 scrollTo 动画完成，页面内容就会淡入常规的 1.0 不透明度。

这不是我最初想要的，但它确实在使用 scrollTo 时给人一种更平滑的错觉。

# php - php创建然后插入数据错误

> ID：12969010
> 
> 赞同：0
> 
> 时间：2012-10-19T07:02:47.433
> 
> 标签：php, mysql

插入数据库时​​遇到错误，这是我正在使用的代码

```
class DB_Functions 
{

private $db;

//put your code here
// constructor
function __construct() {
    require_once 'DB_Connect.php';
    // connecting to database
    $this->db = new DB_Connect();
    $this->db->connect();
}

// destructor
function __destruct() {

}

/**
 * Storing new user
 * returns user details
 */
public function storeUnit($email, $unit, $maint, $attent, $done) {
    $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD) or die (mysql_error());
    mysql_select_db(DB_DATABASE, $con);
    $var = mysql_query('select 1 from `table_name`');
    if ($var !== FALSE){
        $format = 'Y-m-d G:i:s';
        $date = date($format);
        mysql_query("CREATE TABLE '$email'( Col1 VARCHAR, Col2 VARCHAR,Col3 VARCHAR, Col4 VARCHAR, Col5 VARCHAR),$con");
        $result =  mysql_query("INSERT INTO '$email'(Col1, Col2 ,Col3 , Col4 , Col5) VALUES('$unit', '$done', '$attent', '$maint', '$date')");
    } else {
        $result = mysql_query("INSERT INTO '$email'(Col1, Col2 ,Col3 , Col4 , Col5) VALUES('$var2', '$var3', '$var4', '$var5', '$date')");
    }

    // check for successful store
    if ($result) {
        // get unit details 
        $uid = mysql_insert_id(); // last inserted id
        $result = mysql_query("SELECT * FROM users WHERE Col1 = $var2");
        // return unit details
        return mysql_fetch_array($result);
    } else {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:04:52.560

错误在这里

```
mysql_query("CREATE TABLE '$email'( Col1 VARCHAR, Col2 VARCHAR,Col3 VARCHAR, 
                 Col4 VARCHAR, Col5 VARCHAR),$con");
                                            ^ this one 
```

变量`$con`不应包含在字符串中

```
mysql_query("CREATE TABLE '$email'( Col1 VARCHAR, Col2 VARCHAR,Col3 VARCHAR,
                 Col4 VARCHAR, Col5 VARCHAR)",$con); 
```

另一件事是您创建了一个数据类型的列，`varchar`但您没有指定其容量。它应该是

```
CREATE TABLE '$email'( Col1 VARCHAR(50), .... 
```

关于预防的附加信息`SQL INJECTION`：

[**在 PHP 中防止 SQL 注入的最佳方法**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# deployment - 在静默安装期间替换文件

> ID：12969012
> 
> 赞同：1
> 
> 时间：2012-10-19T07:02:48.953
> 
> 标签：deployment, windows-installer

我用 Installshield 创建了一个安装多个 Office 插件的 MSI。我现在已经创建了这个安装程序的新版本来替换插件。

当我在运行任何 Office 应用程序的 PC 上运行安装时，加载项文件被锁定，安装程序会弹出 FilesInUse 对话框。在那里我可以选择忽略，安装程序会在重新启动时替换文件而不关闭应用程序。

但是，当静默运行时，它会自动关闭应用程序并重新启动它们。

我可以强制静默安装做同样的事情吗？即不关闭应用程序并在下次重新启动时替换文件？

我曾考虑过使用 RunOnce 密钥，但我不想要求登录的用户成为管理员。我们将使用 SCCM 部署此程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:59:44.223

您需要使用 REBOOT 属性

```
REBOOT = ReallySuppress. 
```

它会在安装结束时抑制所有重新启动和重新启动提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T09:53:11.037

Windows 安装程序使用[重新启动管理器](http://msdn.microsoft.com/en-us/library/windows/desktop/cc948910%28v=vs.85%29.aspx)关闭正在运行的应用程序，然后在更新完成后重新启动它们。这是最好的用户体验：无需重新启动系统。重启后所有数据和打开的文件都应该保留在应用程序中（当然应用程序必须正确执行重启）。

当下次系统重新启动时更新文件时，系统实际上处于不稳定状态，直到重新启动。根据加载项的使用方式，可能会在同一进程中同时加载旧版本和新版本，一个应用程序使用旧版本，而另一个应用程序使用新版本。

有关使用重新启动管理器的更多信息，请参阅[将 Windows 安装程序与重新启动管理器一起使用：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372466%28v=vs.85%29.aspx)

> 包作者和管理员可以通过使用[**MSIRESTARTMANAGERCONTROL**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370377%28v=vs.85%29.aspx)、[**MSIDISABLERMRESTART**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370089%28v=vs.85%29.aspx)、[**MSIRMSHUTDOWN**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370380%28v=vs.85%29.aspx)属性和[DisableAutomaticApplicationShutdown](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368298%28v=vs.85%29.aspx)策略来控制 Windows Installer 和重新启动管理器的交互。

# jquery - 将循环结构转换为 JSON .send html 值到控制器

> ID：12969013
> 
> 赞同：2
> 
> 时间：2012-10-19T07:02:50.703
> 
> 标签：jquery, asp.net-mvc, editor

当我想用 ajax 更新我的值时，我在我的页面中使用编辑器我收到此错误：未捕获的类型错误：将循环结构转换为 JSON

这是我的观点：

```
@{
    Layout = null;
}

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Edit</title>

    <script type="text/javascript">
        $(function () {
            $("#editor").kendoEditor({
                value: "@Html.Raw(Model.Content)"
            });
            $("#back").click(function () {
                $.get('@Url.Action("Index", "Editor")', { siteId: "@ViewBag.SiteId", widgetId: "@Model.WidgetId" },
                              function (data) {
                                  $("div[data-role='popup']").remove();
                                  var indexContent = $(data).find("#content");
                                  $(indexContent).fadeIn(101);
                                  $("#content").replaceWith(indexContent);
                              });

            });
            var content = $("#editor").data("kendoEditor");
            $("#save").click(function () {
                var editor = {
                    Id: 1,
                    Content: content,
                    Title: 1,
                };

                $.ajax({
                    url: '@Url.Action("Update", "Editor")',
                    type: "POST",
                    contentType: "application/json charset=UTF-8",
                    dataType: "json",
                    data: JSON.stringify(editor),

                });
    });
        });
    </script>
</head>
<body>
    <div id="editorContainer">
        <div id="editorContent">
            <input type="text"  value="@Model.Title" style="width:300px" id="title"/>
            <textarea id="editor" rows="10" cols="30" style="width: 740px; height: 440px">
</textarea>
        </div>

    </div>
    <button id="save">ذخیره</button>
    <button id="back">بازگشت</button>
</body>
</html> 
```

在我看来，我使用 jquery ajax 发布值，但出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:16:46.767

您不能 JSON 序列化包含循环引用的对象层次结构。JSON 格式根本不支持这一点。您应该使用视图模型并打破对象中存在的循环依赖关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:36:10.840

```
saveButton.click(function () {
                var model = {
                    Id: '@Model.Id',
                    Content: editor.data("kendoEditor").encodedValue(),
                    Title: $('#title').val(),
                };

                $.ajax({
                    url: '@Url.Action("Update", "Editor")',
                    type: "POST",
                    contentType: "application/json charset=UTF-8",
                    dataType: "json",
                    data: JSON.stringify({ editor: model, siteId: '@ViewBag.siteId' }),
                        success: function () {
                            alert('تغییرات مورد نظر با موفقیت اعمال شد.');
                            //window.parent.document.location.replace('@Url.Action("SiteIndex", "Editor")?' + parametrs);
                         },
                    error: function () {
                        alert('متاسفانه خطایی در سیستم رخ داد،دوباره تلاش کنید.');
                    }
                });
            }); 
```

这是对的

# asp.net-mvc-4 - 将值从 ViewBag 传递到部分视图

> ID：12969014
> 
> 赞同：0
> 
> 时间：2012-10-19T07:02:53.640
> 
> 标签：asp.net-mvc-4, partial-views, viewbag

所以我的Controller的代码如下：

```
private CommunityModelsContext dbCommunities = new CommunityModelsContext();

// GET: /Home/
public ActionResult Index()
{
     //retrieve the Communities 
     ViewBag.Communities = dbCommunities.Communities.ToList();
     return View();
} 
```

我的视图有这条重要的线来启动部分视图

```
<div id="LeftView" class="PartialView">@{Html.RenderPartial("CommunitiesPartial");}</div> 
```

在部分视图中，我正在尝试创建一个 DropDownList （我还在学习，这是一个练习应用程序，只是为了看看我是否理解了 asp.net 教程中的概念），然后将使用这个 List实体，显示一个字段，从另一个获取值（“名称”和“id”）

```
@model BuildingManagement.Models.Community.Community

@Html.BeginForm("Index","CommunityController")
{
    <div>
        @Html.LabelFor(x => x.Name)
        @Html.DropDownList("Community" , new SelectList(Model.Name,"id","Name"))
    </div>
} 
```

现在这会引发 NullReference 异常，模型为空。Index 页面中没有模型，也没有绑定到任何东西，但是，数据是通过 ViewBag 发送的。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:09:42.413

您的部分被强类型化为模型 ( `BuildingManagement.Models.Community.Community`)。所以你需要先把这个模型传给主视图：

```
public ActionResult Index()
{
    //retrieve the Communities 
    ViewBag.Communities = dbCommunities.Communities.ToList();
    BuildingManagement.Models.Community.Community model = ... retrieve your model
    return View(model);
} 
```

然后由于您决定使用 ViewBag 而不是视图模型，因此您需要继续使用您在局部视图中定义的值：

```
@Html.DropDownList("Community", new SelectList(ViewBag.Communities, "id", "Name")) 
```

当然，更好的方法是使用视图模型：

```
public class CommunityViewModel
{
    [DisplayName("Name")]
    public int Id { get; set; }
    public IEnumerable<SelectListItem> Communities { get; set; }
} 
```

然后让您的控制器填充视图模型并将此视图模型传递给视图：

```
public ActionResult Index()
{
    //retrieve the Communities 
    var communities = dbCommunities.Communities.ToList().Select(x => new SelectListItem
    {
        Value = x.Id.ToString(), 
        Text = x.Name
    })
    var model = new CommunityViewModel
    {
        Communities = communities
    }
    return View(model);
} 
```

然后将您的视图和部分强类型化为视图模型：

```
@model CommunityViewModel
@using (Html.BeginForm("Index","CommunityController"))
{
    <div>
        @Html.LabelFor(x => x.Id)
        @Html.DropDownListFor(x => x.Id, Model.Communities)
    </div>
} 
```

# javascript - 当我使用选取框和厚框插件时如何解决 jquery 类冲突？

> ID：12969017
> 
> 赞同：2
> 
> 时间：2012-10-19T07:03:12.153
> 
> 标签：javascript, jquery

我正在尝试`marquee`不断滚动图像并添加外部链接，它必须使用`thickbox`机制弹出。我正面临`jquery`阶级冲突问题。请为此提供解决方案。

在`thickbox`JavaScript 中，以

```
$(document).ready(function(){   
    tb_init('a.thickbox, area.thickbox, input.thickbox');//pass where to apply thickbox
    imgLoader = new Image();// preload image
    imgLoader.src = tb_pathToImage;
}); 
```

在选取框 JavaScript 中，以

```
(function ($) {
    $.fn.marquee = function (class) {
        var newMarquee = [],
        ....
    }
}); 
```

我该怎么做才能解决冲突问题`thickbox`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:40:31.680

marquee 的代码似乎在外部调用中缺少一个参数。该函数接收 $ 作为参数，但没有任何东西被传递给函数以别名为 $，将其更改为：

```
(function ($) {
    $.fn.marquee = function (class) {
        var newMarquee = [],
        ....
    }
})(jQuery); //pass jQuery into the function 
```

# android - 从 RAW 资源在文本视图中加载文本

> ID：12969024
> 
> 赞同：1
> 
> 时间：2012-10-19T07:03:27.547
> 
> 标签：android, android-activity, textview

我想在第一个活动中单击按钮，并在第二个活动中将原始资源中的文本加载到 textview 中。我认为它可能通过方法`putextra`。`getextra`我的 textview 文本阅读器代码是这样的。

```
 TextView textView = (TextView)findViewById(R.id.textview_data);

    String data = readTextFile(this, R.raw.books);
    textView.setText(data);
}

public static String readTextFile(Context ctx, int resId)
{
    InputStream inputStream = ctx.getResources().openRawResource(resId);

    InputStreamReader inputreader = new InputStreamReader(inputStream);
    BufferedReader bufferedreader = new BufferedReader(inputreader);
    String line;
    StringBuilder stringBuilder = new StringBuilder();
    try 
    {
        while (( line = bufferedreader.readLine()) != null) 
        {
            stringBuilder.append(line);
            stringBuilder.append('\n');
        }
    } 
    catch (IOException e) 
    {
        return null;
    }
    return stringBuilder.toString();
} 
```

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:14:39.840

请使用以下代码从原始文件夹中读取文件数据。

```
try {
    Resources res = getResources();
    InputStream in_s = res.openRawResource(R.raw.books);

    byte[] b = new byte[in_s.available()];
    in_s.read(b);
    textView.setText(new String(b));
} catch (Exception e) {
    // e.printStackTrace();
    textView.setText("Error: can't show help.");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:12:27.033

因此，在第一个活动中单击按钮时，您将调用一个意图开始第二个活动。如果你想在你的第一个活动中选择资源 ID，那么我建议你使用类似这样的东西

```
Button button = (Button) fragmentView.findViewById(R.id.button_id);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {
            Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
            intent.putExtra("resource_id", R.raw.books); //R.raw.books or any other resource you want to display
            startActivity(intent);
        }
    }); 
```

然后在你的第二个活动中，你会得到这样的数据

```
int resourceId = getIntent().getIntExtra("resource_id"); 
```

你用这个`resourceId`代替`R.raw.books`

# delphi - 如何使用单独的 Label.Caption 更新来装配一些 Control.OnMouseEnter 事件

> ID：12969030
> 
> 赞同：1
> 
> 时间：2012-10-19T07:03:58.023
> 
> 标签：delphi, delphi-xe2

我有12个形状

```
Shape1
Shape2
.....
Shape12 
```

我有 12 个标签

```
Label13
Label14
......
Label24 
```

我想知道是否有办法编写这样的函数，在鼠标输入形状时会将相应的标签分配给不同的标签，例如 Label25：

```
Label25 :=  
OnMouseEnter
shape1 -> label13
shape2 -> label14
...
shape12 -> label24 
```

所以如果鼠标进入Shape1，Label25将等于Label13，如果鼠标进入Shape2，Label25将等于Label14，一直持续到如果鼠标进入Shape12，Label25将等于Label24。

我知道我会写

```
label25 := labelxx 
```

在每个鼠标输入事件。但是认为可能有一种更简单的方法，因为标签的名称和形状对应，其中标签 # 每次都比形状 # 多 12。

添加建议后，我添加了这个

```
procedure TFZone1Mod7.ChangeText(sender: TObject);
var
  ShapeOrderNo: integer;
  FoundComponent: TComponent;
begin
  if TryStrToInt(copy(TShape(Sender).Name,6,MaxInt),ShapeOrderNo) then
    begin
      FoundComponent := FindComponent('label'+inttostr(ShapeOrderNo+12));
      if (FoundComponent is TLabel) then
            Label25.Caption := TLabel(FoundComponent).Caption
      else
          showmessage('not found');
    end;
  showmessage('failed try');

end;

procedure TFZone1Mod7.Shape1MouseEnter(Sender: TObject);
begin
    changetext(self);
end;

end. 
```

但每次它运行我都会失败尝试。我发送的信息有误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T07:18:08.280

我不喜欢这种设计，但是，您可以对所有形状使用通用事件处理程序，并使用该[`FindComponent`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponent.FindComponent)函数在那里按名称查找组件。然后你可能会写出这样的东西（请注意，它未经测试，仅在浏览器中编写）：

```
var
  ShapeOrderNo: Integer;
  FoundComponent: TComponent;
begin
  // first try to convert a text behind "Shape", what should be a shape's order 
  // and if it's convertable to integer, then...
  if TryStrToInt(Copy(TShape(Sender).Name, 6, MaxInt), ShapeOrderNo) then
  begin
    // try to find a component with the name "label" + found shape order number
    // incremented by 12
    FoundComponent := FindComponent('label' + IntToStr(ShapeOrderNo + 12));
    // if the component is found, or to be more specific, if it's TLabel, then...
    if (FoundComponent is TLabel) then
      TLabel(FoundComponent).Caption := 'Hello from ' + TShape(Sender).Name;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:04:07.013

在您的 TShape 上添加一个属性。

```
 TMyShape= class(TShape)
 private
   FLinkLabel: TLabel;
 procedure SetLinkLabel(const Value: TLabel);
 published
   property LinkLabel: TLabel read FLinkLabel write SetLinkLabel;
 end;

 procedure TMyShape.SetLinkLabel(const Value: TLabel);
 begin
   FLinkLabel := Value;
 end;

 procedure TForm1.FormCreate(Sender: TObject);
 var
   oMyShape: TMyShape;
 begin
   oMyShape:= TMyShape.Create(self);
   oMyShape.Parent:= Self;
   oMyShape.LinkLabel:= self.Label1;
   oMyShape.OnMouseEnter:= OnShapeMouseEnter;
 end;

 procedure TForm1.OnShapeMouseEnter(Sender: TObject);
 begin
   if (sender is TMyShape) and
      ( TMyShape(Sender).LinkLabel <>Nil) then
   begin
     TMyShape(Sender).LinkLabel.Caption:= 'Hello';
   end;
 end; 
```

我只是在表单上设置了一个标签并将标签与 TMyShape 链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T08:16:29.993

如果您不在 Forms Designer 中进行控件管理并在运行时创建它们，我会这样做：

声明标签数组和形状数组：

```
const
  ShapesCount = 20;

type
  TForm1 = class(TForm)
    fLabels: array [0..ShapesCount-1] of TLabel;
    fShapes: array [0..ShapesCount-1] of TShape; 
```

在运行时分配给每个形状 a`Tag`及其索引。

```
procedure TForm1.OnFormCreate;
begin
  for I := 0 to ShapesCount - 1 do  
  begin
    fShapes[I] := TShape.Create(..);
    fLabels[I] := TLabel.Create(..);
    fShapes[I].Tag := I;
    fShapes[I].OnMouseEnter := OnShapeMouseEnter;
  end;
end; 
```

然后你可以像这样使用它：

```
procedure TForm1.OnShapeMouseEnter(Sender: TObject);
begin
  Assert(Sender is TShape);
  Label25.Caption := fLabels[TShape(Sender).Tag].Caption;
end; 
```

* * *

编辑：再看一点，您可能已经有一个带有 Lable.Captions 的数组，因此您可以从那里直接获取 Label25.Caption。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T11:21:29.847

如果您不想重新编写标签的创建，请使用 findcomponent：

所有形状的相同处理程序

```
procedure TForm1.Shape1MouseEnter(Sender: TObject);
var
  ActiveShape: TShape;
  StrName: string;
  ActiveLabel: TComponent;
begin
  if Sender is TShape then
  begin
    ActiveShape := TShape(Sender);
// Only works if Shapes are named Shape1..12 and the labels Label1..12 !!
    StrName := 'Label' + copy(ActiveShape.name, 6, length(ActiveShape.name)); 
    ActiveLabel := FindComponent(StrName);
    if ActiveLabel is TLabel then
      Label25.Caption := TLabel(ActiveLabel).Caption;
  end;
end; 
```

如果有点混乱，这将满足您的需求:)

[编辑]我想到有一种简单的方法可以改进这一点并满足您对具有不同“name_number”的标签的需求：

在设计器中，将每个 TShape 的 Tag 属性设置为您希望与之关联的标签编号。因此，将 shape one 的 Tag 设置为 13（以保留问题）然后

```
procedure TForm1.Shape1MouseEnter(Sender: TObject);
var
  ActiveShape: TShape;
  StrName: string;
  ActiveLabel: TComponent;
begin
  if Sender is TShape then
  begin
    ActiveShape := TShape(Sender);
    StrName := 'Label' + IntToStr(ActiveShape.Tag); // find tag numbered label
    ActiveLabel := FindComponent(StrName);
    if ActiveLabel is TLabel then
      Label25.Caption := TLabel(ActiveLabel).Caption;
  end;
end; 
```

# c# - 将 GridView2 添加到 GridView1 行

> ID：12969036
> 
> 赞同：0
> 
> 时间：2012-10-19T07:04:11.597
> 
> 标签：c#, asp.net, gridview

我有两个网格视图`gridview1`和`gridview2`一个 asp.net 页面。为了将数据绑定到`gridview2`必须`gridview1`首先绑定，因为它依赖于它的`values`.

完成绑定后，`gridview2`我想添加一个新行并在最后一行`gridview1`添加整个行。`gridview2`所以不可能做到这一点`onRowDataBound`。`gridview1`

有没有办法做到这一点？。

我尝试了以下但不工作

```
 grdQuestions.DataSource = LoadQuestions();
        grdQuestions.DataBind();

   grdAnswers.DataSource = LoadAnswer(Convert.ToInt32(grdQuestions.Rows[0].Cells[0].Text));
   //GridView2.DataSource = LoadAnswer(2);
   grdQuestions.Rows[0].Cells[0].Controls.Add(grdAnswers);
   grdAnswers.DataBind();
   grdQuestions.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:42:29.507

你可以这样做：

首先创建绑定父网格的函数。

```
 private void BindParentGrid()
 {
    //Get data from database in dataset.
      ParentGrid.DataSource = dataset;
      ParentGrid.DataBind();

 } 
```

然后创建绑定子网格的函数。

```
private void BindChildGrid()
{                       
      //get data from database in dataset2.
       ((GridView)ParentGrid.Rows[i].Cells[1].Controls[1]).DataSource = dataset2;
       ((GridView)ParentGrid.Rows[i].Cells[1].Controls[1]).DataBind();
} 
```

然后先调用`BindParentGrid()`再调用`BindChildGrid().`

此链接也将对您有所帮助：http: [//www.codeproject.com/Articles/22928/GridView-within-GridView](http://www.codeproject.com/Articles/22928/GridView-within-GridView)

# installation - NSIS - 检测安装中发现的错误

> ID：12969040
> 
> 赞同：0
> 
> 时间：2012-10-19T07:04:26.693
> 
> 标签：installation, nsis

我正在使用 NSIS 创建安装程序。但是我想在安装过程中发生错误。由于脚本的长度等原因，在每一行或函数上使用 iferrors 会很困难。那么在 NSIS 中有什么方法可以让我至少通过行号或日志找到安装过程中发生的错误或其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:17:19.310

你所拥有的只是`IfErrors`. 您通常只在`Exec`/`ExecWait`等之后检查。

如果您想在每条`File`指令后检查或您的目标是什么，请创建一个宏......

# iphone - 如何解决线程错误 EXC_BAD_ACCESS？

> ID：12969045
> 
> 赞同：1
> 
> 时间：2012-10-19T07:04:52.107
> 
> 标签：iphone, objective-c, ios, xcode, ios5

我想修复线程 1 EXC_BAD_ACCESS(code=2,address=0x30) 的错误，当我单击按钮时出现此错误，按钮代码如下

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    DBHandler *db = [[DBHandler alloc]init];

    word_id = [[NSString alloc]init];

    NSLog(@"String %@",word_id);

    [db addFavoriteWord:word_id];
    // Do any additional setup after loading the view from its nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)nextView:(id)sender {
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:37:15.347

尝试更改代码：

```
word_id = [[NSString alloc]init]; 
```

在

```
word_id = [NSString stringWithString:@""]; 
```

# scala - 分配scala空数组

> ID：12969048
> 
> 赞同：11
> 
> 时间：2012-10-19T07:05:00.700
> 
> 标签：scala, scala-2.8

我对 Scala 完全陌生。在这里，我尝试将一个空数组分配给一个变量，它成功了。但是，当我尝试将整数元素附加到变量时，出现如下错误：

```
var c=Array()

c: Array[Nothing] = Array()

scala> c=Array(1)

<console>:8: error: type mismatch;
 found   : Int(1)
 required: Nothing
       c=Array(1)
           ^ 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T07:13:08.357

当你这样做时`var c = Array()`，Scala 计算类型为`Array[Nothing]`，因此你不能用`Array[Int]`. 你可以做的是：

```
var c : Array[Any] = Array()
c = Array(1) 
```

或者

```
var c : Array[Int] = Array()
c =  Array(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-20T09:30:43.460

`Nothing`是 Scala 类型层次结构的底层类型。它是所有其他类型的子类型。请参阅[文档](https://docs.scala-lang.org/tour/unified-types.html)。

如果您不决定要将哪种类型的值添加到空数组中，则声明：

```
var c : Array[Any] = Array()
c = Array(1) 
```

如果您正在决定数据类型，那么您声明为：

```
var c : Array[Int] = Array()
c =  Array(1) 
```

# jquery - 完整的日历 jquery 可选 + 上下文菜单

> ID：12969049
> 
> 赞同：0
> 
> 时间：2012-10-19T07:05:01.157
> 
> 标签：jquery, jquery-ui, contextmenu, fullcalendar

在选择方法上，我正在重新处理一个事件。如何获取元素，即 html ELEMENT

```
 $('#calendar').fullCalendar({
            header: {},
 select: function (start, end, allDay, event, resourceId) {
            calendar.fullCalendar('renderEvent',
                        {

                          title: "tttttttt",
                          start: start,
                          end: end,
                          allDay: allDay,
                          resourceId: resourceId
                          },
                           true // make the event "stick"
                                                       );
                        calendar.fullCalendar('unselect');
                         } 
```

我需要在 renderdEvent 上创建一个上下文菜单。为了做到这一点，我需要它的 html 元素。我怎么才能得到它？非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:54:59.017

我在使用 fullCalendar 时遇到了类似的问题。它的一些回调只有 eventObject 作为参数，而不是 htmlElement。

我的解决方案是在 eventAfterRender 时引用 eventObject 中的 htmlElement：

```
eventAfterRender(calEvent, htmlElement, view){
  calEvent.htmlElement = htmlElement;
} 
```

因此，每当您想要获取 htmlElement 并拥有 eventObject 时，您都可以使用“eventObject.htmlElement”来获取它。

# sql - 如果第二个表中不存在条目，则加入

> ID：12969058
> 
> 赞同：7
> 
> 时间：2012-10-19T07:05:20.443
> 
> 标签：sql, sql-server-2005, join

我有两个选择加入的表，

表格1

```
PK    Val1    Val2     FK
1     a       b        10
2     c       d        11
3     e       f
4     g       h        12 
```

表2

```
PK    Val3
10     X
11     Y
12     Z 
```

当我使用内部连接和所有 Val-Columns 对这两个表进行选择时，我得到以下结果：

```
Result
PK    Val1    Val2     Val3
1     a       b        X
2     c       d        Y
4     g       h        Z 
```

如您所见，缺少第三个条目。我想要的是这样的：

```
Result
PK    Val1    Val2     Val3
1     a       b        X
2     c       d        Y
3     e       f
4     g       h        Z 
```

我该如何修改joinquery

```
SELECT ... FROM Table1 INNER JOIN Table2 On Table1.FK = Table2.PK 
```

谢谢你，卡尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T07:06:12.667

使用`LEFT JOIN`而不是`INNER JOIN`

```
SELECT ... FROM Table1 LEFT JOIN Table2 On Table1.FK = Table2.PK 
```

基本上，`INNER JOIN`返回另一个表上至少匹配的记录。While返回*左侧*`LEFT JOIN`指定的表上的所有记录，无论它是否匹配。

 *顺便说一句，`LEFT OUTER JOIN`与`LEFT JOIN`

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/5f63f/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:07:37.360

使用左外连接

```
SELECT ... FROM Table1 LEFT OUTER JOIN Table2 On Table1.FK = Table2.PK 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T07:29:01.253

```
SELECT ... FROM Table1 CROSS JOIN Table2 
```*

# xaml - 在 Metro 应用程序中发送电子邮件？

> ID：12969059
> 
> 赞同：1
> 
> 时间：2012-10-19T07:05:23.357
> 
> 标签：xaml, windows-runtime, windows-store-apps, winrt-xaml

我想在我的 Metro 应用程序中发送一封包含一些内容作为正文的电子邮件：-

1）由于metro应用程序不支持system.net.mail，我决定使用它：-

```
using Windows.System;
//starts the default mail app with a subject, cc, bcc, and body
Launcher.LaunchUriAsync(new Uri("mailto:windows8devs@almostbeta.com?subject=Code Request&cc=kevin@almostbeta.com&bcc=admin@almostbeta.com&body=Hi!")); 
```

但我怀疑我想生成一个内容作为这封电子邮件的正文，但这个内容是 html 类型，我的意思是这个正文是 html 类型（在 html 标签之间指定一些文本或内容）

请让我知道我该怎么做，即设置一个简单的 html 类型正文作为我想通过我的应用程序发送的这封电子邮件的正文。

我错了吗，如果我错了，请告诉我并纠正我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:20:07.800

WinStore 应用程序中的电子邮件故事现在非常糟糕。您可以使用没有内容的 mailto: 或使用没有电子邮件详细信息的共享魅力。我怀疑他们必须在将来的某个时候启用对某些电子邮件文档合同的支持，但我认为它还不可用。

*编辑

如果还没有一个好的网络服务，这听起来也是一个很好的机会，让某人编写一个网络服务来发送电子邮件。你当然可以自己写一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T08:03:25.023

这不是 Win8/Metro 设计语言的正确用法。您希望启用对“共享源”合同的支持。以下是有关如何使用共享合同的示例/支持的链接：

[http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)

它允许您指定正文（内容），尽管用户也可以选择将其共享到邮件以外的其他内容，并且您无需指定电子邮件地址。那里有几种电子邮件发送服务，如果用户不必在发送电子邮件之前对其进行编辑，这可能是一个更好的解决方案。

# user-interface - 在 VisualWorks Smalltalk 中拖放

> ID：12969062
> 
> 赞同：1
> 
> 时间：2012-10-19T07:05:30.650
> 
> 标签：user-interface, drag-and-drop, smalltalk, visualworks

如何检测用户已将链接从 Web 浏览器拖放到`VW window`或`widget`（在`OS X`或通常在 any 上`OS`）？文档提到只能`List widgets`是拖动事件的来源，但也必须有一种方法可以放置外部对象......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:31:50.750

在 os x 上，这并不简单，因为您必须使用 NSView 注册粘贴板类型，然后在您的视图中实现 NSDraggingDestination 协议。有关详细信息，请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html)。尽管整个窗口只有一个nsview，但与visualworks集成并不容易。您可以在捆绑中扩展该类，但这并不容易。

在 Windows 上，你可以用 COM 做同样的事情，但这也不明显，我认为开箱即用。

# java - 使用 Selenium 上传文件

> ID：12969067
> 
> 赞同：0
> 
> 时间：2012-10-19T07:06:06.477
> 
> 标签：java, selenium, selenium-rc, selenium-ide

我是 selenium 的新手。我的要求是使用浏览按钮自动上传 csv 文件。我面临的问题是我有 2 个带有两个浏览按钮的表单，具有相同的名称和相同的值。所以我必须基于单击浏览按钮表单（表单名称不同）。下面是我的示例代码

单击浏览按钮的脚本：

```
#include <IE.au3>
; Internet Explorer is partly integrated in shell.application
$oShell = ObjCreate("shell.application")    ; Get the Windows Shell Object
$oShellWindows=$oShell.windows          ; Get the collection of open shell Windows
$MyIExplorer=""
for $Window in $oShellWindows       ; Count all existing shell windows
  ; Note: Internet Explorer appends a slash to the URL in it's window name
  if StringInStr($Window.LocationURL,"http://") then
      $MyIExplorer=$Window
      exitloop
  endif
next
$oForm = _IEGetObjByName ($MyIExplorer, "document.forms['UploadForm'].elements['browsebutton']")
_IEAction($oForm, "click") 
```

下面是我上传 csv 文件的脚本

```
WinActivate("File Upload");
Local $file ="C:\Work\selenium\abc.csv"
ControlSetText("Choose file", "", "Edit1", $file )
ControlClick("File Upload", "", "Button2") 
```

在我的 java 类中调用如下代码：

```
Process proc = Runtime.getRuntime().exec("C:\\bowsebutton.exe");
Process proc1 = Runtime.getRuntime().exec("C:\\test3.exe"); 
```

当我运行 seleinum 时根本无法单击浏览按钮。但是如果我手动单击浏览按钮，则 csv 会自动上传并提交文件。

我无法弄清楚为什么没有点击浏览按钮。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T22:57:13.313

您必须使用 FindElement 来弹出对话框。我不知道它在 Java 中的样子，但它与 C# 中的相去不远

```
 InternetExplorerDriver driver = new InternetExplorerDriver();

    //Do stuff obviously ....

    driver.FindElement(By.XPath("//input[@type='file']")).SendKeys(@"c:\somefile.txt"); 
```

# c# - 异步日志记录抛出 NullReferenceException

> ID：12969071
> 
> 赞同：11
> 
> 时间：2012-10-19T07:06:40.093
> 
> 标签：c#, .net-4.0, task-parallel-library, tpl-dataflow

我正在尝试使用 AsyncTargetingPack 将一些信息异步记录到针对 .NET 4.0 的 MVC 4 控制器操作内的 SQL Server。我会直接跳到 .NET 4.5，但我的应用程序存在于 Azure 中，[我们仍在等待更新](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8-and-asp-net-4-5-support-in-azure-platform)......

此代码按预期工作（将一行写入我的数据库，没有抛出异常）：

```
public class SystemActionLogger : ISystemActionLogger
{
    private readonly ActionBlock<Tuple<SystemAction, object>> actionBlock;

    public SystemActionLogger(ISystemActionLogEntryRepository repository)
    {
        actionBlock = new ActionBlock<Tuple<SystemAction, object>>(
            entry => TaskEx.Run(async () =>
                {
                    string data = await JsonConvert.SerializeObjectAsync(entry.Item2);
                    await repository.PersistAsync(new SystemActionLogEntry(entry.Item1, data));
                }));
    }

    public void Log(SystemAction systemAction, object data)
    {
        actionBlock.Post(new Tuple<SystemAction, object>(systemAction, data));
    }
} 
```

这段代码抛出了 NullReferenceException：

```
public class SystemActionLogger : ISystemActionLogger
{
    private readonly ActionBlock<Tuple<SystemAction, object>> actionBlock;

    public SystemActionLogger(ISystemActionLogEntryRepository repository)
    {
        actionBlock = new ActionBlock<Tuple<SystemAction, object>>(async entry =>
            {
                string data = await JsonConvert.SerializeObjectAsync(entry.Item2);
                await repository.PersistAsync(new SystemActionLogEntry(entry.Item1, data));
            });
    }

    public void Log(SystemAction systemAction, object data)
    {
        actionBlock.Post(new Tuple<SystemAction, object>(systemAction, data));
    }
} 
```

NullReferenceException：“对象引用未设置为对象的实例。”

```
Server stack trace: 
   at System.Web.ThreadContext.AssociateWithCurrentThread(Boolean setImpersonationContext)
   at System.Web.HttpApplication.OnThreadEnterPrivate(Boolean setImpersonationContext)
   at System.Web.LegacyAspNetSynchronizationContext.CallCallbackPossiblyUnderLock(SendOrPostCallback callback, Object state)
   at System.Web.LegacyAspNetSynchronizationContext.CallCallback(SendOrPostCallback callback, Object state)
   at System.Runtime.CompilerServices.TaskAwaiter.<>c__DisplayClassa.<OnCompletedInternal>b__0(Task param0)

Exception rethrown at [0]: 
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__1(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch() 
```

我看不到异常，因为它都是外部代码。我不明白为什么第二个代码块会失败。这是我最初编写的代码。

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T18:52:43.510

我只是遇到了一个非常相似的问题（使用日志记录任务时来自 AssociateWithCurrentThread 的 NullReference）。

我遇到的问题是原始操作没有等待日志记录任务的完成，因此当日志完成并尝试重新加入原始线程时，会抛出 nullReference，因为原始线程已终止。

通过确保请求控制器等待日志记录功能，我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:32:08.873

数据流仅适用于 .NET 4.5。您在 .NET 4.0 上运行它的事实不受支持，这可能是您看到虚假异常的原因。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-06-06T23:37:33.027

当我的 Web 服务以异步方式调用另一个 WCF 服务时，我遇到了 .net4.5 的这个问题。我只是附加了一个短时间`Wait()`，因为我不关心响应（遥测事件）。

```
public static void Event(string key, string message) {
    Telemetry.Event(key, message).Wait(100);
} 
```

# jquery - HTML 5 如何拖放到服务器

> ID：12969072
> 
> 赞同：0
> 
> 时间：2012-10-19T07:06:41.630
> 
> 标签：jquery, django, html

我有一个 Web 应用程序，其中用户有一个来自服务器的图像列表，如下所示：

```
 <div class="uncat">
        <img src="/static/media/images/2012/1019/zKGsa.jpg" id="12"/>
      </div>
        <div style="float:left;"><a href="/delete/12/">x</a></div>

      <div class="uncat">
        <img src="/static/media/images/2012/1019/vk5au.jpg" id="11"/>
      </div>
        <div style="float:left;"><a href="/delete/11/">x</a></div>

      <div class="uncat">
        <img src="/static/media/images/2012/1019/main-qimg-fa20c3f66a50e7a28c4e425b388303fc.jpeg" id="10"/>
      </div> 
```

然后用户可以使用以下 Javascript 将任何图像拖放到选择区域中：

```
addEvent(bin, 'drop', function(e) {
if (e.stopPropagation)
  e.stopPropagation();

  var csrftoken = getCookie('csrftoken');

  // AJAX call 
  $.post('/image_in_folder/', {

    // figure out better way to retrieve id
      // id not passed from masonry
    image:DRAGSOURCE.id,
    folder:this.id,
    'csrfmiddlewaretoken': csrftoken  
  }, function(data){
      console.log(data);
  });
} 
```

});

我可以发布哪些非客户端信息来识别用户拖动的 meme？目前，我使用 'id' 属性作为临时解决方案。但用户可能会修改数据以劫持拖放。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:09:48.140

> 我可以发布哪些非客户端信息

没有任何。POST 请求来自客户端。您只能发送对客户端可用的信息。

> 目前，我使用 'id' 属性作为临时解决方案。但用户可能会修改数据

因此，对用户进行身份验证，然后检查他们是否有权上传该 ID 的文件。

# javascript - Javascript 对象 - 无法访问包含“-”的键

> ID：12969079
> 
> 赞同：0
> 
> 时间：2012-10-19T07:07:07.470
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [如何引用带有连字符的 javascript 对象属性？](https://stackoverflow.com/questions/7122609/how-do-i-reference-a-javascript-object-property-with-a-hyphen-in-it)

我有以下格式的 Json：

```
var response1="{" +
                        "\"code\":\"200\"," +
                        "\"requestID\":\"1002\"," +
                        "\"body\":\"[{" +
                        "\\\"author\\\":\\\"sumit\\\"," +
                        "\\\"id\\\":\\\"ABX-002\\\"," +
                        "\\\"title\\\":\\\"How to make Android APK in 2 seconds :)\\\"" +
                        "}," +
                        "" +
                        "{" +
                        "\\\"author\\\":\\\"sumit\\\"," +
                        "\\\"id\\\":\\\"ABX-002\\\"," +
                        "\\\"title\\\":\\\"How to make Android APK in 2 seconds :)\\\"" +
                        "}," +
                        "{"+
                        "\\\"author\\\":\\\"sumit\\\"," +
                        "\\\"id\\\":\\\"ABX-002\\\"," +
                        "\\\"title\\\":\\\"How to make Android APK in 2 seconds :)\\\"" +
                        "}" +
                        "]\"," +
                        "\"headers\":{\"Server\":\"Apache-Coyote/1.1\"," +
                                    "\"Content-Type\":\"text/xml\"," +
                                    "\"Content-Length\":\"131\"," +
                                    "\"Date\":\"Thu, 06 Sep 2012 09:10:26 GMT\"" +
                                    "}" +
                        "}"; 
```

我想解析 Content-Type Key 。所以我写了下面的代码来解析这个值：

```
var jsonResponse = jQuery.parseJSON(response1); 
var contentType  = jsonResponse.headers.Content-Type; 
```

我无法获取 Content-Type 和 Content-Length 的值。任何帮助，将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:12:40.777

当 key 不是合法的 token 时，必须使用字符串作为 key，并使用数组语法：

```
var contentType  = jsonResponse.headers['Content-Type']; 
```

注意：这不是“JSON 解析”问题，而是标准的 Javascript 对象访问规则。

# performance - 性能调控器不会将 CPU 频率锁定在最大值

> ID：12969081
> 
> 赞同：5
> 
> 时间：2012-10-19T07:07:09.857
> 
> 标签：performance, cpu, scaling, ondemand

我在专用 X3440 服务器上运行实时应用程序，想知道为什么应用程序性能比我以前的 VPS 盒子差。然后我下载[http://i7z.googlecode.com/svn/trunk/i7z_64bit](http://i7z.googlecode.com/svn/trunk/i7z_64bit)执行一下，正常使用情况下（最高10%cpu左右），所有CPU核心只停留在900Mhz~1200Mhz左右，波动很快并且不一致。

然后我尝试将调节器从按需设置为性能（回显性能 > /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor），我的应用程序性能更好，因为现在所有 CPU 内核都保持在 1700 ~ 1900Mhz 左右（仍在波动） ，但应用程序性能仍然不符合我的标准。

我试图通过键入“service cpuspeed stop”来完全禁用任何缩放，它仍然显示与性能调节器相同的结果。我想知道为什么性能调节器没有将 CPU 频率锁定在最大值。

然后我尝试在每个内核中运行 4 个单独的虚拟低优先级任务： yum install gcc

纳米假人.c

内容：

```
int main() {
    while(1);
} 
```

gcc dummy.c -o 假人

```
nice taskset -c 0 ./dummy & nice taskset -c 1 ./dummy & nice taskset -c 2 ./dummy & nice taskset -c 3 ./dummy & 
```

这样，所有 4 个内核都将保持在 2533mhz 并且不再波动（无论调节器设置如何），现在我的应用程序性能非常出色，没有任何抱怨。但是，我不喜欢这些任务浪费资源的方式，即使它没有干扰主应用程序，因为它的优先级很低。

我的问题：在我的家用台式 Windows 计算机中，不知何故，我的 CPU 速度总是在最大频率下稳定。但是为什么在这个 CentOS 6 2.6.32 x86_64 专用服务器上没有发生呢？有没有办法在不使用任何不错的低优先级任务的情况下将所有 cpu 内核设置为最大频率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:05:21.557

一个简短的谷歌会话给我带来了这篇[文章](http://murty4all.blogspot.co.il/2010/11/changing-cpu-frequency-scaling-governor.html)，它建议需要重新启动 cpuspeed 服务而不是停止它。

# jquery - 使用 cookie 永久更改 CSS

> ID：12969086
> 
> 赞同：3
> 
> 时间：2012-10-19T07:07:44.250
> 
> 标签：jquery, css, cookies

我正在制作一个带有一些 jQuery 实验的小网站（有点“游戏”）。在每个游戏中都有一个目标，当找到目标并单击时，我想对页脚中的心形符号进行永久更改。我正在尝试为此使用cookie插件。

指向其中一个子页面的链接：http: [//www.carlpapworth.com/htmlove/arrows.html](http://www.carlpapworth.com/htmlove/arrows.html)

这是页脚CSS：

```
footer{
position: fixed;
bottom: 0px;
padding: 10px; 
width: 100%;
height: 100px;
background: /*url(../images/bgFooter.png)*/ #dddddd;
z-index: 2000;
}

.heartCollection{
width: 940px;
margin: 0 auto;
text-align: justify;
}

.heartCollection p{
font-size: 13px;
float: none;
width: 100%;
padding: 0;
margin: 0 0 -20px 0;
text-align: center;
position: relative;
}

.heartCollection ul li{
width: auto;
display: inline;
list-style: none;
float: left;
margin: 10px 0 -10px 0;
padding: 0 0 0 98px;
font-size: 70px;
}

.heartCollection ul li a{
font-family: menlo;
color: #cccccc;
}

.found{
color: #ff63ff;
}

.credits{
width: 100%;
height: auto;
margin: 80px auto;
bottom: 0px;
left: -40px;
position: relative;
text-align: right;
} 
```

这是Javascript：

```
$(document).ready(function() {
    //help
    $('#helpInfo').hide();
    $('#help h2').click(function(){
        $('#helpInfo').show(300);
    });
    $('#helpInfo').click(function() {
        $(this).hide(300);
    });
    //reward  
    $('#reward').hide();
    $('#goal a').click(function(){
        $('#reward').fadeIn(1000);
    });
    //Collection
    $.cookie('class','found',{
    });
    var foundHeart = $.cookie('found');
    $('.exit').click(function(){
        $('#collection1').addClass(foundHeart);
    });

}); 
```

那么什么都没有发生，那我做错了什么？编辑：更重要的是，我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:18:25.057

```
 var foundHeart = $.cookie('class'); 
```

您应该按名称而不是按值获取 cookie :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:21:07.293

有两点不对：

第一的，

```
var foundHeart = $.cookie('found'); 
```

您正在尝试使用上述函数按名称检索 cookie。相反，您正在传递值。

cookie 参数设置如下：

```
$.cookie('name', 'value', { options }); 
```

因此，您的 cookie 的名称是“类”，值是“找到”。

换句话说

```
var foundHeart = $.cookie('found'); 
```

应该

```
var foundHeart = $.cookie('class'); 
```

其次，即使您更正了您的代码无法按预期运行。为什么？因为您在加载时设置了 cookie。

此行设置 cookie：

```
$.cookie('name', 'value'); 
```

但是您在文档就绪功能中运行它。

您应该将该行移到此函数中：

```
$('#goal a').click(function(){
    $('#reward').fadeIn(1000);
    // moved set cookie function here
    $.cookie('class', 'found');
}); 
```

所以它只有在你达到目标时才会设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:00:45.047

试试这个插件： [https ://github.com/tantau-horia/jquery-SuperCookie](https://github.com/tantau-horia/jquery-SuperCookie)

如果心脏默认 cookie 不存在，则创建它：

```
//name of the cookie: hearts
//name of the hearts: h1,h2,h3,h4,h5,h6
//values: 1 if active, 0 if inactive
if ( !$.super_cookie().check("hearts") ) {
   $.super_cookie().create("hearts",{h1:"0",h2:"0",h3:"0",h4:"0",h5:"0",h6:"0"});
}; 
```

找到目标时（以目标 1 为例）

```
$("#collection1").addClass('foundHeart');
$.super_cookie().replace_value("hearts","h1","1") 
```

在页面重新加载时记住是否选择了心脏

```
if ( $.super_cookie().read_value("hearts","h1") == "1" ) {
   $("#collection1").addClass('foundHeart');
}; 
```

# java - 当持久性单元处于 EAR 级别时实体未映射

> ID：12969089
> 
> 赞同：2
> 
> 时间：2012-10-19T07:07:51.370
> 
> 标签：java, hibernate, jpa, persistence

我需要一个 EAR java 应用程序，我可以在其中定义一个持久性单元并在不同的组件中使用该持久性单元。例如：我在 application.xml 中定义了 2 个 JAR：my-product.jar 和 my-product-module.jar - 这两个 JAR 文件应该能够使用相同的 PersistenceUnit。这个 PersistenceUnit 是在一个单独的 jar 中定义的，它是我的 EAR 应用程序的 lib 文件夹。在 JAR 文件中，没有其他 persistence.xml。所以在整个 EAR 文件夹中：只有 1 个 persistence.xml。

我目前有以下 EAR 结构。我们在 JBoss 6.1.0.Final 服务器上进行部署。

```
/
-- lib
|    |
|    -- my-persistence.jar
|           |
|           -- META-INF
|                  |
|                  -- persistence.xml
-- my-product.jar
|
-- my-product.war
|
-- my-product-module.jar 
```

我的 persistence.xml 看起来像这样：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="MyPersistenceUnitName">
                <jta-data-source>java:/MyDatasource</jta-data-source>
                <jar-file>../my-product.jar</jar-file>
                <jar-file>../my-product-module.jar</jar-file>    
                <properties>
                    <property name="jboss.entity.manager.factory.jndi.name" value="java:/MyProduct/ManagerFactory" />
                    <property name="jboss.entity.manager.jndi.name" value="java:/MyProduct/EntityManager" />
            </properties>
    </persistence-unit>
</persistence> 
```

所有这些工作正常。持久性单元在 EAR 上下文中被检测和限定。但是，从我们创建 JPA 查询并要求 EntityManager 执行查询的那一刻起，我们收到以下错误：

```
org.hibernate.hql.ast.QuerySyntaxException: MyEntity is not mapped [from MyEntity] 
```

因此，在加载应用程序时，我们所有的实体都没有被映射/检测到。似乎 jar-file 元素没有做它应该做的事情。

我们如何检测我们所有的实体（在我们的两个 JAR 中）？任何人都可以帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:27:45.893

我们的解决方案是创建一个自定义 ANT 任务，该任务获取所有使用 @Entity 注释的类（使用反射）。这将为我们生成带有 和 节点的persistence.xml。因此，您想要映射到 PersistenceContext 的每个类都需要在 persistence.xml 中列出。这个persistence.xml 被放置在一个文件夹META-INF 中，该文件夹被包装到my-persistence.jar 中。这个 jar 放在我的 EAR 的 lib 文件夹中。

# javascript - 模板foreach中未定义的剔除打印

> ID：12969093
> 
> 赞同：0
> 
> 时间：2012-10-19T07:08:18.303
> 
> 标签：javascript, knockout.js

这是一个非常简单的例子，我有一个带有数组的基本 JavaScript 对象，我正在使用敲除映射来使数组可观察等。

但是当我应用我的绑定时，我只会得到未定义。

任何想法为什么？

HTML

```
<div data-bind="with: Data">

    <div class="tab-pane active" id="studydirections">
        <div data-bind="template: { name: studydirectionstemplate, foreach: studydirections }">
        </div>
    </div>

</div>

<script id="studydirectionstemplate" type="text/html">
    <div> <span data-bind="text: Name"> </span> </div> 
</script>​ 
```

JavaScript

```
var viewModel = {};

var data = {
    studydirections: [{
        RecId: 299,
        ColtechCode: 75,
        Name: "FARM",
        Description: "FARMING"},
    {
        RecId: 306,
        ColtechCode: 12,
        Name: "BACC",
        Description: "ACCOUNTING"},
    {
        RecId: 334,
        ColtechCode: 11,
        Name: "BMAN",
        Description: "BUSINESS MANAGEMENT"
    }
]};

viewModel.Data = ko.mapping.fromJS(data);

ko.applyBindings(viewModel);​ 
```

结果是

```
undefinedundefinedundefined 
```

这是一个小提琴的链接来说明问题

[http://jsfiddle.net/armandvdwalt/3Q267/](http://jsfiddle.net/armandvdwalt/3Q267/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:12:48.763

只需更改，将模板名称括在单引号中。

```
<div data-bind="template: { name: 'studydirectionstemplate', foreach: studydirections }"> 
```

检查您更新的**[jsFiddle](http://jsfiddle.net/3Q267/2/)**

# vim - vim替换问题

> ID：12969094
> 
> 赞同：5
> 
> 时间：2012-10-19T07:08:27.943
> 
> 标签：vim

我有如下几行：

```
aaa
bbb
ccc
ddd 
```

我希望他们像这样改变：

```
aaa=$aaa
bbb=$bbb
ccc=$ccc
ddd=$ddd 
```

所以我使用以下命令在vim中执行此操作，但出现错误

```
:s/\(\^*\)/\1=\$\1/ 
```

我意识到`\1`这里不能使用两次，那我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:11:00.013

反向引用`\1`可以根据需要多次使用，但您还有另一个问题。您的正则表达式应如下所示：

```
:%s/^\(.*\)/\1=\$\1/ 
```

解释：`%`告诉 vim 替换所有行；`^`作为行首的标记应该是正则表达式中的第一个字符，并且不应转义。意思是“`.*`任意字符任意次数”。但是，原始表达式`\(\^*\)`将查找任意数量的文字字符重复`^`（包括没有）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T07:42:11.817

当匹配该行的全部内容时，您既不需要`^`锚点，也不需要通过`\(...\)`. 在替换中，您可以使用`\0`或更短的`&`. （另外，你不需要在`$`那里逃脱。）

```
:%s/.*/&=$& 
```

# jquery - ajax水平滚动jquery插件

> ID：12969096
> 
> 赞同：0
> 
> 时间：2012-10-19T07:08:30.107
> 
> 标签：jquery, ajax, scroll

我正在寻找一个可以`div`水平滚动的插件，并且当用户滚动时，内容通过`ajax`. ajaxscroll 插件[链接](http://blog.yctin.com/archives/jquery-plugins-ajaxscroll/)可以做到这一点，除了 - 我需要它在两个方向上工作。这意味着我还需要能够向左滚动，通过`ajax`. 我的`offset`并不总是从零开始。

如果我有 200 张图片要显示`plugin`，我希望能够以 Image #100 为中心，然后启用双向滚动。

那可能吗？有人知道这样的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:22:32.273

可能是的，插件我不知道。

您可以制作一个文件数组，当有人要求提供图片时，它会带回数组键、之前的键和之后的键（如果 key > -1 && key < array.length，当然）。然后用ajax加载这些图片。

您可以创建一个辅助数组来保存已加载的密钥，因此如果有人从 1 跳到 100 然后返回 1，它不会多次重新加载图片。

或者您可以使用 remove() 和 append() 函数添加一张幻灯片并删除您不再需要的幻灯片。

对于水平滑动，您可以使用 jquery .animate() 将幻灯片移动到包含 css overflow:hidden; 的包含元素内。

[在http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)上查看 Nivo 滑块，也许他能做到这一点。我不知道，我不喜欢玩别人的玩具。:P

# javascript - 如何正确使用评论框小部件

> ID：12969102
> 
> 赞同：0
> 
> 时间：2012-10-19T07:09:07.660
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-comments

我已经阅读[了文档](https://developers.facebook.com/docs/reference/plugins/comments/)，但它非常零散且不友好。

**任何人都可以以正确的方式与我联系，以在我的页面上包含 Fb 评论框？我需要了解可用于自定义行为的所有重要选项吗？**

一些精确的问题：

1.  `<fb:comment>`已弃用？(
2.  如何改变外观（`colorscheme=""`是唯一的可能性）？
3.  如何禁用使用其他服务（AOL、Yahoo ...）登录的可能性？

我也会接受指向完整和更新文档的回答（开发用户友好）

这是我当前的实现：

```
<head> 
    <meta property="og:locale" content="<?php echo $locale ?>" />
    <meta property="og:title" content="<?php echo $title ?>"/>
    <!--<meta property="og:description" content="<?php // echo $description    ?>"-->
    <meta property="og:type" content="product"/>
    <meta property="og:url" content="<?php echo $url ?>"/>
    <meta property="og:image" content="<?php echo $imageUrl ?>"/>
    <meta property="og:site_name" content="<?php echo $siteName ?>"/>
    <meta property="fb:app_id" content="<?php echo $appId ?>"/>
    <!--<meta property="fb:admins" content="???????????????"/>--> 
</head>

<body>
  <div id="fb-root"></div>

    <script>
        window.fbAsyncInit = function() {
            // init the FB JS SDK
            FB.init({
                appId      : '<?php echo $appId ?>', // App ID from the App Dashboard
                channelUrl : '//<?php echo $url ?>/channel.html', // Channel File for x-domain communication
                status     : true, // check the login status upon init?
                cookie     : true, // set sessions cookies to allow your server to access the session?
                xfbml      : true  // parse XFBML tags on this page?
            });

            // Additional initialization code such as adding Event Listeners goes here

        };

        // Load the SDK's source Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/<?php echo $locale ?>/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document));
    </script>

    <div class="fb-comments fb_iframe_widget" data-href="<?php echo $url ?>" data-num-posts="<?php echo $comment_limit ?>" data-width="<?php echo $width ?>" colorscheme="<?php echo $colorScheme ?>" reverse="<?php echo $reverse ?>"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:52:29.990

`<fb:comment>`不被弃用。

只是“浅色”和“深色”配色方案。

要禁用雅虎和 AOL 等第三方登录，请确保在[https://developers.facebook.com/tools/comments中未选中“其他登录提供程序”](https://developers.facebook.com/tools/comments)

以下是查找评论设置的方法：

[https://developers.facebook.com/tools/comments](https://developers.facebook.com/tools/comments)

![评论审核](../Images/5c9de324eaca85bc110c5b23c7119b5a.png)

![评论设置](../Images/74d5c0c045ce1bbdd71e220fbb1415fd.png)

确保在加载 js-sdk (all.js) 时将 app_id 作为参数包含在内：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=444088878971084"; 
```

# ios - 在 UITextField 中将 NSNumber 表示为分数

> ID：12969106
> 
> 赞同：1
> 
> 时间：2012-10-19T07:09:31.870
> 
> 标签：ios, uitextfield, nsnumber, nsnumberformatter

我正在研究一个矩阵计算器，它将一个 mxn 矩阵变成行梯形。为了向用户展示矩阵，我设置了一个 UITextField 的 mxn 网格。一切正常，但唯一的问题是我希望能够将一些元素（即 NSNumbers）显示为分数而不是小数。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:13:10.663

分数是带有分数部分的整数，因此只需获取 NSNumber 的整数部分，然后计算分数部分。fe: 2.45 让它成为 2 和 0.45 ，使 0.45 到 45 乘 100，然后简化为 9 乘 20

# eclipse - 脚本文件行中的错误：1 Unexpected token UNIQUE，在语句 [SET DATABASE UNIQUE] 中需要 COLLATION

> ID：12969109
> 
> 赞同：2
> 
> 时间：2012-10-19T07:09:44.950
> 
> 标签：eclipse, hsqldb

每当我从部署在 eclipse Juno 上的应用程序连接到 HSQLDB 时，它都会引发异常：java.sql.SQLException: error in script file line: 1 Unexpected token UNIQUE, requires COLLATION in statement [SET DATABASE UNIQUE]

我已经搜索了解决方案，在 JBoss 5.x 下也解决了同样的问题，但是我无法理解应该用哪个版本的 hsqldb.jar 替换现有的 jar 文件。我正在开发 CentOS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:53:28.157

您需要最新版本的 HSQLDB jar，目前为 2.2.9。

您的数据库文件是 2.x 版本，但您使用的 jar 可能是 1.8.x 或更早版本。使用相同的 jar 版本（major.minor）很重要。

# css - 响应式 Youtube 嵌入导致 Share It 按钮被放置在 Wordpress 中的错误位置

> ID：12969112
> 
> 赞同：1
> 
> 时间：2012-10-19T07:09:54.163
> 
> 标签：css, youtube, wordpress, responsive-design

我已经使用这个 css 使我的 youtube 嵌入响应

```
.video-container {
    position: relative;
    padding-top: 30px; /* IE6 workaround*/
    padding-bottom: 57.25%; /* 16/9 */
    overflow: hidden;
}
.video-container iframe,  
.video-container object,  
.video-container embed {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    position: absolute;
} 
```

jetpack wordpress 插件的共享功能一直给我带来问题。分享按钮浮动在视频上方，而不是显示在视频下方。

有人知道我如何解决css吗？

# php - SQL 查询 SELECT,ORDER

> ID：12969116
> 
> 赞同：1
> 
> 时间：2012-10-19T07:10:23.193
> 
> 标签：php, sql, select, sql-order-by

**SQL 查询 SELECT,ORDER 日期**

嗨，我需要从我的表中选择日期，问题是我有超过 130 行并且每天都会增长。我想缩短它并在查询中选择与今天相等`date=date("Y-m-d")`的日期和从今天开始更大的日期。

它可以是今天的日期的变量，因为我使用日期选择在日期之间进行分页。我知道我可以使用时间戳，但我不知道如何在查询中实现它。

```
 $r = mysql_query("SELECT  date FROM yoman  ORDER BY date ASC,time ASC  ") 
            or die(mysql_error()); 
```

我希望你能理解，[http:](http://attiatech.com/projects/tours/index.php?db=cmVsXzIwMTI=) //attiatech.com/projects/tours/index.php?db=cmVsXzIwMTI=这是链接，试着选择 1.10.2012 看看打印了多少行，我有第二个视图分页选项，但我想在这个查询中过滤它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:19:13.753

你在看这个吗：

```
set @dte=sysdate();

select sysdate()
SELECT  date 
FROM yoman  
where date>=@dte
ORDER BY date ASC,time ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:23:01.023

我假设您将日期存储为字符串“Ymd”。

将其用作表列类型可能会更好：

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

所以例如：

```
$startdate= date("Y-m-d", $day); 
$enddate= date("Y-m-d",strtotime("+1 day", $day)) - 1; 
```

获取一天的 SQL 如下所示：

```
SELECT * 
FROM yoman 
WHERE date BETWEEN $startdate AND $enddate 
ORDER BY date ASC,time ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:25:43.673

如果您想要所有具有今天和未来日期的行，您可以直接使用没有 php 的 sql 查询，只需使用[curdate()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)否则如果您使用`sysdate()` `current_timestamp` `etc`它也会检查时间并且您不想要它，因为如果您在上午 10 点启动查询，您不会在当天上午 10 点之前获得所有行...

`SELECT date FROM yoman WHERE date >= CURDATE() ORDER BY date ASC, time ASC`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-19T07:20:07.310

```
SELECT  date FROM yoman  ORDER BY date,time ASC 
```

# c# - 为什么 MyDate.ToString("dd/MM/yyyy") 返回 "MM/dd/yyyy 格式？

> ID：12969117
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:10:46.067
> 
> 标签：c#, asp.net

我正在转换日期，`MyDate.ToString("dd/MM/yyyy")`但它以`MM/dd/yyyy`格式返回我的日期。

我的代码：

```
cell.InnerText += "Created Between " +
                  this.BetweenAndStrat.ToString("dd/MM/yyyy") + " And " +
                  this.BetweenAndEnd.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:15:32.860

如果您在格式为“MM/dd/yyyy”的字符串中有一个日期，并且想要将其转换为“dd/MM/yyyy”，您可以这样做：

```
DateTime dt = DateTime.ParseExact(dateString, "MM/dd/yyyy", 
                                  CultureInfo.InvariantCulture);
var date = dt.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:12:41.170

尝试这个：

```
String.Format("{0:dd/MM/yyyy}", MyDate); 
```

# three.js - three.js - 旋转几何的特定部分

> ID：12969119
> 
> 赞同：1
> 
> 时间：2012-10-19T07:10:50.237
> 
> 标签：three.js

我创建了一个具有以下功能的管几何图形。

```
function plotPath()
        {                                           
            var obj = getPath();
            var segments = 60;
            var closed = false;
            var debug = false;
            var radiusSegments = 12;
            var tube;
            var points = [];
            var x=0,y=0,z=0;            

            for(var i=0; i<obj.path.length; i++)
            {                               
                console.log(obj.path[i].point);
                points.push(obj.path[i].point);                                                                                 
            }

            extrudePath = new THREE.SplineCurve3(points);
            tube = new THREE.TubeGeometry(extrudePath, segments, 10, radiusSegments, closed, debug);                                

            tubeMesh = new THREE.Mesh(tube ,new THREE.MeshBasicMaterial({
                color: 0x000000, side: THREE.DoubleSide,
                opacity: 0.5, transparent: false, wireframe: true}));

            tubeMesh.add(new THREE.AxisHelper());
            var v = new THREE.Vector3(1,0,0).normalize();           
            tubeMesh.applyMatrix(matrix.makeRotationAxis(v, 0));
            tubeMesh.applyMatrix(matrix.makeTranslation(-500,0,0));

            if ( tube.debug ) tubeMesh.add( tube.debug );                                   
            scene.add(tubeMesh);
            objects.push(tubeMesh);                                         
        } 
```

这里`extrudePath`是用作为参数传递给的点构建的`THREE.SplineCurve3(points)`。点以 JSON 格式存储在外部 javascript 文件中。在这个管几何形状中，我可以旋转/旋转它的初始部分。当我缩小并尝试旋转/旋转管的中间或末端时，我不能。旋转很奇怪。

如何旋转/旋转管几何的特定部分？我需要将它分成一些小部分以使旋转平稳吗？或者是否可以`THREE.AxisHelper`在每个点添加以使旋转/旋转看起来更容易？

![Tube的默认视图](../Images/8c3e348443bb258d8eaec5aa7f1934d4.png) ![缩小管视图](../Images/de2620eba41d6baf8a05493a58fbc817.png)

# java - 自动建议 XML 解析源给出错误

> ID：12969123
> 
> 赞同：1
> 
> 时间：2012-10-19T07:10:58.453
> 
> 标签：java, android, autocomplete, xml-parsing, autosuggest

我正在构建一个应用程序，每当用户键入任何内容时，我都需要在其中使用 autocompletetextview 带来自动建议。

这是我的代码：

```
public List<String> suggest;

HttpURLConnection con = null;
            String newText = key[0];
            newText = newText.trim();
            newText = newText.replace(" ", "+");
            try {
                // Check if task has been interrupted
                if (Thread.interrupted())
                    throw new InterruptedException();
                // Build RESTful query for Google API
                // String q = URLEncoder.encode(original, "UTF-8");
                URL url = new URL(
                        "http://google.com/complete/search?output=toolbar&q="
                                + newText);
                con = (HttpURLConnection) url.openConnection();
                con.setReadTimeout(10000 /* milliseconds */);
                con.setConnectTimeout(15000 /* milliseconds */);
                con.setRequestMethod("GET");
                // con.addRequestProperty("Referer",
                // "http://www.pragprog.com/titles/eband3/hello-android");
                con.setDoInput(true);
                // Start the query
                con.connect();

                // Check if task has been interrupted
                if (Thread.interrupted())
                    throw new InterruptedException();
                // Read results from the query
                XmlPullParser parser = Xml.newPullParser();
                parser.setInput(con.getInputStream(), null);
                int eventType = parser.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    String name = parser.getName();
                    if (eventType == XmlPullParser.START_TAG
                            && name.equalsIgnoreCase("suggestion")) {
                        for (int i = 0; i < parser.getAttributeCount(); i++) {
                            if (parser.getAttributeName(i)
                                    .equalsIgnoreCase("data")) {
                                suggest.add(parser.getAttributeValue(i));
                            }
                        }
                    }
                    eventType = parser.next();
                }

                // Check if task has been interrupted
                if (Thread.interrupted())
                    throw new InterruptedException();

            } catch (Exception e) {

            } 
```

这给了我日志错误：

```
10-22 11:36:46.531: E/AndroidRuntime(22291): FATAL EXCEPTION: main
10-22 11:36:46.531: E/AndroidRuntime(22291): java.lang.NullPointerException
10-22 11:36:46.531: E/AndroidRuntime(22291):    at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at android.widget.AutoCompleteTextView$PopupDataSetObserver$1.run(AutoCompleteTextView.java:1670)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at android.os.Handler.handleCallback(Handler.java:587)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at android.os.Looper.loop(Looper.java:130)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at  android.app.ActivityThread.main(ActivityThread.java:3689)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at java.lang.reflect.Method.invokeNative(Native Method)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at java.lang.reflect.Method.invoke(Method.java:507)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
10-22 11:36:46.531: E/AndroidRuntime(22291):    at dalvik.system.NativeStart.main(Native Method)
10-22 11:36:46.539: E/(1459): Dumpstate > /data/log/dumpstate_app_error 
```

无法弄清楚我在做什么错。请指出我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:43:24.640

首先，让我们初始化对您的列表的引用。现在确实为空。

代替

```
public List<String> suggest; 
```

写这样的东西：

```
public List<String> suggest = new LinkedList<String>(); 
```

这应该可以解决您的 NPE，并且可以提出一些新问题 ;)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T04:48:12.453

谢谢，但我解决了我的问题。我没有使用 XML，而是使用 JSON 解析，这比 XML 解析快得多。我使用了 wikisuggest api 并对其进行了解析，以将建议显示为用户类型。很抱歉，但我认为现在没有赏金。

By the way thank you all for giving it attention and trying to solve my problem, I really appreciate all.

# amazon-web-services - 将战争部署到 AWS

> ID：12969126
> 
> 赞同：3
> 
> 时间：2012-10-19T07:11:07.393
> 
> 标签：amazon-web-services, war

如何将战争文件部署到 AWS（Amezon Web 服务）中，请给我一些指导来做到这一点.. 敦促一个。

Windows 7（64 位）

谢谢和问候， 穆图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-19T06:16:37.803

您可以使用 Elastic Bean Stalk 部署您的战争文件，它是 AWS 的平台即服务产品。它可以帮助您创建一个堆栈，即具有所有必需软件（应用服务器、RDS、Web 服务器、安装软件等）的计算平台。

如果您已有 AWS 环境或正在运行的实例，则可以使用 AWS Code Deploy

[代码部署](http://docs.aws.amazon.com/codedeploy/latest/userguide/welcome.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T13:27:30.090

假设您正在连接到 Windows 实例。

使用 RDP 连接到您的 EC2 实例。下载并安装 Tomcat。配置 server.xml、tomcat-users 并设置用户名、密码和端口。

完成后，您可以将您的 war 文件放在 /webapps 文件夹中。或在 url 中打开您的实例的公共 IP。使用您设置的用户名和密码登录 tomcats 管理。浏览和部署war文件。

启动列表中显示的应用程序。

您的应用程序已准备就绪。

希望能帮助到你.. ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-16T01:22:40.840

如果是 ec2-instance，您可以将您的 war 文件粘贴到 var/lib/tomcat/webapps 文件夹中。tomcat 将自动部署项目，然后您可以从浏览器访问它。如果它没有自动部署，那么您必须设置 autodeploy=true。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T20:32:44.140

您是在询问使用什么工具或步骤吗？我会将服务器添加到 IDE 并使用它来构建/运行。这应该可用于 NetBeans 和 Eclipse。

# facebook - facebook 权限对话框未显示所有必需的权限

> ID：12969127
> 
> 赞同：1
> 
> 时间：2012-10-19T07:11:10.433
> 
> 标签：facebook

我们最近遇到了一个奇怪的错误 - 当用户注册到我们的网站（通过他们的 facebook 帐户）时，他们需要确认应用程序所需的权限，但尽管我们要求用户和朋友权限（电子邮件和 user_location），但权限对话框仅显示请求基本权限。单击管理面板中的“预览验证对话框”链接时，对话框看起来很棒，但在现实世界中，我们的用户没有获得我们所需权限的完整列表。

此外，“默认活动隐私”是用户默认设置，尽管它应该显示为“朋友”（在应用程序权限中设置）。

有人遇到过这个问题吗？（添加了灾难的屏幕截图）

![这是它在预览中的样子](../Images/0de4fea17afd56620c7098c12ecde79c.png) ![这就是它在现实世界中的样子](../Images/69c83a4a3942199b0af9df26bff9f120.png) ![权限设置](../Images/9cb796de2034e736fb20a938c1ec61bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:34:52.577

您将 Authenticated Referrals 与正常登录（由您的应用程序本身触发）混淆了。

Authenticated Referrals 是一项功能，可确保直接从 Facebook 进入您的应用程序的所有流量（用户单击链接以转到您的应用程序等）都已经过身份验证。

您在应用程序设置中指定的权限仅适用于这些权限 - 如果您自己处理登录，则必须通过范围参数以通常的方式请求权限。

（Facebook 最近宣布 Authenticated Referrals 已被弃用，并将很快被删除，因为它让用户感到困惑。对于开发人员来说似乎更令人困惑，因为这个“问题”之前已经出现过很多次。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:29:54.913

你需要通过代码来做到这一点..例如

$url = $facebook->getLoginUrl(array('req_perms' => 'publish_stream,email,friends_location', 'next' =>$next, 'cancel_url' =>$cancel_url
));

# jquery - div 滑动打开然后关闭

> ID：12969129
> 
> 赞同：2
> 
> 时间：2012-10-19T07:11:25.597
> 
> 标签：jquery, html, jquery-animate

我有一个两个盒子，第一个盒子有一个***“打开”*** `<button>`

```
<div id="box1">
    <button id="open" type="button">Open</button>
</div>
<div id="box2"></div>​ 
```

单击***“打开”*** `<button>`时，第一个框将向左滑动 50%，然后将***“打开***”按钮更改为***“关闭”***按钮。我想出了这个 jQuery 解决方案：

```
$(function() {
    $('#open').on('click', function() {
        $('#box1').animate({
            right: '50%'
        }, 500, function() {
            $('#open').text('Close').attr('id', 'close');
        });
    });

    $('#close').on('click', function() {
        $('#box1').animate({
            left: '50%'
        }, 500, function() {
            // alert('done');
        });
    });
});​ 
```

我设法更改了（通过检查元素检查）的`ID`和文本。`<button>`但是，当我单击***“关闭”*** `<button>`时，它不起作用。这里似乎有什么问题？我什至尝试`alert(1)`查看`$('#close')`它是否确实看到了***Close*** `ID`但没有运气。

jsFiddle[在这里](http://jsfiddle.net/QLpVM/1/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:35:34.913

如果你改变你的

```
$('#close').on('click', function(){...}); 
```

对此

```
$('#box1').on('click', '#close', function(){...}); 
```

那么这将像[**这个演示**](http://jsfiddle.net/QLpVM/15/)一样工作，但你也可以让它像[**这个演示**](http://jsfiddle.net/QLpVM/30/)一样以其他方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:20:11.510

您需要使用[live()](http://api.jquery.com/live/)。

也制作近距离动画`right: '20%'`

工作[的jsFiddle](http://jsfiddle.net/Bondye/QLpVM/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:20:17.113

尝试使用`toggle`而不更改它的 id **[演示](http://jsfiddle.net/pintu31/QLpVM/10/)**

```
$('#open').toggle(function() {
    $('#box1').animate({
        right: '50%'
    }, 500, function() {
        $('#open').text('Close');
    });
}, function(){
    $('#box1').animate({
        right: '20%'
    }, 500, function() {
        $('#open').text('Open');
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:20:25.503

[**工作演示**](http://jsfiddle.net/fFEuT/)

另一个演示感谢@Sheikh：[**演示**](http://jsfiddle.net/TXyUM/)

希望它适合你的事业`:)`

**代码**

```
 $(function() {
    $('#open').on('click', function() {
        $('#box1').animate({
            right: '50%'
        }, 500, function() {
            $('#open').text('Close').attr('id', 'close');
        });
    });

    $(document).on('click', '#close', function() {
        $('#box1').animate({
            left: '50%'
        }, 500, function() {
            alert('done');
        });
    });
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T10:48:52.110

在搜索弹出式底部滑动框时，我在 Google 上遇到了这个问题。

我已经修改了上面的代码并创建了一个底部滑块，它会显示一个 iframe，如果你想显示一个关于页面的快速调查，那就完美了。

演示：http: [//jsfiddle.net/redwall/r5FBm/3/](http://jsfiddle.net/redwall/r5FBm/3/)

HTML：

```
<div id="box1">
<button id="open" type="button">Open</button>
<br />
<br />
<br />
<iframe src="http://www.example.com" width="100%" height="170" frameborder="0" scrolling="no">
    <p>Your browser does not support iframes.</p>
</iframe> 
```

爪哇：

```
$(function () {
$('#open').on('click', function () {
    $('#box1').animate({
        height: '230px'
    }, 500, function () {
        $('#open').text('Close').attr('id', 'close');
    });
});

$('#box1').on('click', '#close', function () {
    $('#box1').animate({
        height: '50px'
    }, 500, function () {
        $('#close').text('Open').attr('id', 'open');
    });
}); 
```

});

CSS：

```
 #box1 {
    position:absolute;
    bottom:0;
    height:50px;
    width:100%;
    background:#FF800D;
    overflow:hidden;
}
button {
    position:absolute;
    right:0;
} 
```

# php - 从关联数组输出数据

> ID：12969130
> 
> 赞同：-3
> 
> 时间：2012-10-19T07:11:25.930
> 
> 标签：php

我已将国​​家/地区及其代码存储在如下数组中

```
$countries = array (
    'AF' => 'Afghanistan',
    'AX' => 'Åland Islands',
    'AL' => 'Albania',
    'DZ' => 'Algeria'
); 
```

假设我从表格中得到国家代码“AF”或国家名称“阿富汗”，如何从数组中输出代码和名称？

我想要得到的输出是：阿富汗空军。稍后我将在下面的代码中使用它。

```
echo $countries['AF'] gives me the country name, but how do I output both; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:17:02.617

让您满意`key($countries['AF'])`为您提供 AF 本身的关键 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:17:04.607

如果您知道代码（在这种情况下为“AF”

```
$code = 'AF';
echo 'Country :', $countries[$code], " has code $code\n"; 
```

但是，如果您想以另一种方式（即阿富汗）来获取代码 AF，则必须遍历列表或构造另一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:26:09.463

试试这个 ：）

```
var_dump(array_slice($countries, array_search('AX', array_keys($countries)), 1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:14:30.937

我不确定您的问题，但如果您询问迭代数组以输出代码和名称，您只需在循环中分配键：

```
foreach ($countries as $code => $name) {
       echo "$code : $name";
} 
```

另一种解决方案是翻转数组，如果您只知道您正在谈论的表单中提交的国家/地区名称。

```
$countries = array_flip($countries); // Flips the array so Code => Name is Name => Code
$code = $countries[$_POST['country']]; // Where $_POST['country'] is the name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:14:45.410

也许有一个循环

```
 <?php
     foreach($countries as $key=>$name) {
         echo "<p>$key => $name</p>";
     }
 ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T07:14:53.100

尝试

```
foreach($countries as $key=>value)
{
 echo "Code: ".$key." Country: ".$value;
} 
```

# javascript - 悬停到 div 以更改其他元素的样式

> ID：12969131
> 
> 赞同：0
> 
> 时间：2012-10-19T07:11:26.823
> 
> 标签：javascript, html, css

我创建了一个 div 和一个锚列表。

```
<div id="wrap">
<div id="box1"></div>
<div id="box2"></div>
<ul>
 <li><a href=".." id="a1">text1</a></li>
 <li><a href=".." id="a2">text2</a></li>
</ul>
</div> 
```

我的目标是当我将鼠标悬停时`box1`将`a1`更改文本颜色，当鼠标悬停时它将恢复正常颜色。

我曾尝试使用 javascript 来执行此操作，但问题是当我将鼠标悬停在其中一个 div 框上时，例如我将鼠标悬停在`box1`将`a1`颜色更改为红色但当我鼠标移出时，它不会变为蓝色，它将保留在红色的。

这个mycode看起来像：

```
<script type="text/javascript">
function mouseoverBox1(){
    var myPara = document.getElementById("a1");
    myPara.style.color = "red";
}
function onmouseoutBox1(){
    var myPara = document.getElementById("a1");
    myPara.style.color = "blue";
}
function mouseoverBox21(){
    var myPara = document.getElementById("a2");
    myPara.style.color = "red";
}
function onmouseoutBox2(){
    var myPara = document.getElementById("a2");
    myPara.style.color = "blue";
}
</script>
<style>
a{color:red;}
a:hover{color:blue;}
.box{min-height: 180px;width: 220px;position: absolute;cursor: pointer;}
</style>
    <div id="wrap">
    <div class="box" id="box1" onmouseover="mouseoverBox1()" onmouseout="onmouseoutBox1()" ></div>
    <div class="box"  id="box2" onmouseover="mouseoverBox2()" onmouseout="onmouseoutBox2()"></div>
    <ul>
     <li><a href=".." id="a1">text1</a></li>
     <li><a href=".." id="a2">text2</a></li>
    </ul>
    </div> 
```

有人知道我的案子吗？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:16:46.343

```
<div id="box2" onmouseover="mouseoverBox2()" onmouseout="onmouseoutBox2()" "></div> 
```

这一行有一个额外的 " 。应该是：

```
<div id="box2" onmouseover="mouseoverBox2()" onmouseout="onmouseoutBox2()"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:21:26.150

css

```
#box1:hover ~ ul #a1 {
  color: red;
} 
```

[http://jsfiddle.net/4tduS/](http://jsfiddle.net/4tduS/)

不需要js

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:26:22.573

```
<script type="text/javascript">
function mouseoverBox1(){
    var myPara = document.getElementById("a1");
    myPara.style.color = "red";
}
function onmouseoutBox1(){
    var myPara = document.getElementById("a1");
    myPara.style.color = "blue";
}
function mouseoverBox2(){
    var myPara = document.getElementById("a2");
    myPara.style.color = "red";
}
function onmouseoutBox2(){
    var myPara = document.getElementById("a2");
    myPara.style.color = "blue";
}
</script>
<style>
a{color:red;}
a:hover{color:blue;}
</style>
    <div id="wrap">
    <div id="box1" onmouseover="mouseoverBox1()" onmouseout="onmouseoutBox1()">deve</div>
    <div id="box2" onmouseover="mouseoverBox2()" onmouseout="onmouseoutBox2()">deve</div>
    <ul>
     <li><a href="#" id="a1">text1</a></li>
     <li><a href="#" id="a2">text2</a></li>
    </ul>
    </div>​​​​​ 
```

您拼错了一个类名并在 div 标记的末尾添加了一个引号。

如果您没有编写代码的经验，则此错误很常见；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:36:43.770

.....................

你好现在用来j查询***[直播demo](http://jsfiddle.net/rohitazad/DBpMN/6/)***

```
$(document).ready(function() {
    $("#box1").mouseenter(function(){
        $("#a1").addClass("a1_hover");
    });

    $("#box1").mouseleave(function(){
        $("#a1").removeClass("a1_hover");
        $("#a1").addClass("a1")
    });

        $("#box2").mouseenter(function(){
        $("#a2").addClass("a2_hover");
    });

    $("#box2").mouseleave(function(){
        $("#a2").removeClass("a2_hover");
        $("#a2").addClass("a2")
    });

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:37:47.000

尝试使用 css ：

```
<style type="text/css">
#a1 { color:blue; }
#box1:hover + #a1 { color:red; }
</style>

<div id="box1">Color text 1 to red</div>
<a href="" id="a1">Text1</a> 
```

见[演示](http://jsfiddle.net/ruslyrossi/Dhybu/)

# python - 如何从 Python 列表中获取特定字符，后跟命令行参数变量

> ID：12969133
> 
> 赞同：1
> 
> 时间：2012-10-19T07:11:31.900
> 
> 标签：python

```
mount_list = ['/dev/mapper/vg8-lv8-eSPAN_MAX_d4:eSPAN_MAX_d4:99', '/dev/vg10/lv10:cp:99', '/dev/vg9/lv9:sp:99'] 
```

`mount_list`是一个列表`li[1] = '/dev/vg10/lv10:cp:99'.`

仅当 vg10 或 lv10 包含卷（，是卷）时，如何获取数字后跟**vg10**或**lv10**？这有点令人困惑，所以我将完全解释。`cp``sp`

```
#!/usr/bin/python

import subprocess
import sys

def volumeCheck(volume_name):
    """This function will check volume name is mounted or not.
    """
cmd  = ['cat', '/etc/auto_mount_list']
cmd1 = ['cat', '/etc/mdadm.conf']
cmd2 = ['cat', '/proc/mdstat']

vname = sys.argv[1]

p = subprocess.Popen(['df', '-h'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p1, err = p.communicate()
pattern = p1

p2 = subprocess.Popen(cmd,shell=False,stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p3, err = p2.communicate()
mount_list = p3.split()
#if mount_list.find(vname) != -1 here i need the number of vg or lv only when it conatin sys.argv[1]

p4 = subprocess.Popen(cmd1,shell=False,stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p5, err = p4.communicate()
mdadm_list = p5.split()

p6 = subprocess.Popen(cmd2,shell=False,stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p7, err = p6.communicate()

new_vol = '/VolumeData/' + sys.argv[1] 

#if pattern.find(new_vol) != -1 : this also give the proper output but below code is more efficiant.

if new_vol in p1:
    print 'volume mounted'
else:
    print 'volume not mounted'

if __name__ == '__main__':
   volumeCheck(sys.argv[1]) 
```

这是我的 Python 程序的输出：

```
root@sr-query:/# python volume_check.py cp
['/dev/mapper/vg8-lv8-eSPAN_MAX_d4:eSPAN_MAX_d4:99', '/dev/vg10/lv10:cp:99', '/dev/vg9/lv9:sp:99']
volume mounted
root@sr-query:/# df -h
Filesystem            Size  Used Avail Use% Mounted on
rootfs                938M  473M  418M  54% /
/dev/md0              938M  473M  418M  54% /
none                  250M  4.9M  245M   2% /dev
/dev/md2              9.7M  1.2M  8.0M  13% /usr/config
/dev/md7              961M   18M  895M   2% /downloads
tmpfs                 250M  8.2M  242M   4% /var/volatile
tmpfs                 250M     0  250M   0% /dev/shm
tmpfs                 250M     0  250M   0% /media/ram
/dev/mapper/vg10-lv10
                     1016M   65M  901M   7% /VolumeData/cp
root@sr-query:/# python volume_check.py new_volume
['/dev/mapper/vg8-lv8-eSPAN_MAX_d4:eSPAN_MAX_d4:99', '/dev/vg10/lv10:cp:99', '/dev/vg9/lv9:sp:99']
volume not mounted
root@sr-query:/# 
```

现在很明显`python volume_check.py new_volume`（它的参数）没有安装，也没有在自动安装列表中。但是`python volume_check.py cp`已安装并在自动安装列表中找到...在第二种情况下，我需要**从自动安装列表中获取 vg 和 lv 编号**。

如何更改我的代码以获得此解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:52:21.450

不确定我是否正确理解了您的问题，但我认为您想从`li[1]`字符串中提取数字，对吗？如果是这样，只需使用正则表达式：

```
>>> import re
>>> s = '/dev/vg10/lv11:cp:99'
>>> m = re.search('/vg(?P<vg>\d+)/lv(?P<lv>\d+):\w+:(?P<number>\d+)', s)
>>> print m.groupdict()
{'lv': '11', 'number': '99', 'vg': '10'} 
```

# python - 如何在 Numpy 中对这个双循环进行矢量化？

> ID：12969135
> 
> 赞同：5
> 
> 时间：2012-10-19T07:11:43.523
> 
> 标签：python, numpy, vectorization

我有一些运行缓慢的 Python / Numpy 代码，我认为这是因为使用了双 for 循环。这是代码。

```
def heat(D,u0,q,tdim):
    xdim = np.size(u0)
    Z = np.zeros([xdim,tdim])
    Z[:,0]=u0;
    for i in range(1,tdim):
        for j in range (1,xdim-1):
            Z[j,i]=Z[j,i-1]+D*q*(Z[j-1,i-1]-2*Z[j,i-1]+Z[j+1,i-1])
    return Z 
```

我正在尝试删除双 for 循环并矢量化 Z。这是我的尝试。

```
def heat(D,u0,q,tdim):
    xdim = np.size(u0)
    Z = np.zeros([xdim,tdim])
    Z[:,0]=u0;
    Z[1:,1:-1]=Z[1:-1,:-1]+D*q*(Z[:-2,:-1]-2*Z[1:-1,:-1]+Z[2:,:-1])
    return Z 
```

这不起作用 - 我收到以下错误：

```
operands could not be broadcast together with shapes (24,73) (23,74) 
```

所以在尝试矢量化 Z 的某个地方，我搞砸了。你能帮我找出我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:55:59.867

您不能在问题的时间维度上对扩散计算进行矢量化，这仍然需要一个循环。这里唯一明显的优化是将拉普拉斯计算替换为对`numpy.diff`函数的调用（这是预编译的 C），因此您的热方程求解器变为：

```
def heat(D,u0,q,tdim): 
    xdim = np.size(u0) 
    Z = np.zeros([xdim,tdim]) 
    Z[:,0]=u0; 

    for i in range(1,tdim): 
        Z[1:-1,i]=Z[1:-1,i-1] + D*q*np.diff(Z[:,i-1], 2)

    return Z 
```

对于非平凡的空间大小，您应该会看到相当大的速度提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:59:29.163

您将无法删除两个 for 循环，因为计算列 i 取决于列 i-1 （在您的第二位代码中）除了第一列之外只是零。

你可以做的是：

```
def heat(D,u0,q,tdim):
    xdim = np.size(u0)
    Z = np.zeros([xdim,tdim])
    Z[:,0]=u0;
    for i in range(1,tdim):
        Z[1:-1,i] = Z[1:-1,i-1] + D*q*(Z[:-2,i-1] - 2*Z[1:-1,i-1] + Z[2:,i-1])
    return Z 
```

回到您的代码：您正在用（仅限第一项）Z[1:-1,:-1] 填充 Z[1,1:-1]。形状的不匹配在这里很明显。

忽略第二个索引（因为无论如何您都必须循环），您的矢量化解决方案使用与非矢量化方法不同的假设：在第一个版本中，您有一侧 u0 (Z[:,0]) 和两侧 0 ( Z[0,:] 和 Z[-1,:]) 在矢量化解决方案中，您确实尝试通过填充 Z[1:,i] 将 Z[-1,:] 设置为 0 以外的值。您要模拟哪种情况？！

# applescript - 使用 qlmanage 和 applescript 生成缩略图

> ID：12969142
> 
> 赞同：2
> 
> 时间：2012-10-19T07:12:30.733
> 
> 标签：applescript, posix, quicklook

该资源的长期用户，第一次提问者。我正在尝试编写一个简短的 Applescript，它允许我选择一个 .svg 文件并使用 quicklook (qlmanage) 函数来生成一个快速而肮脏的 .png 转换。我希望它非常灵活，所以安装 ImageMagick 不是一个选项。这是代码：

```
set thefile to POSIX path of (choose file)
do shell script "qlmanage -t -s 640 -o " & thefile as text 
```

非常简单，但根本不起作用（这给了我一个 Applescript 错误，并弹出 qlmanage 帮助对话框）。我尝试了一些变体，我觉得我需要在 -o 之后的第一个参数中声明 FOLDER 并在第二个参数中声明 PATH 。但我一直无法做到这一点。请记住，我是这方面的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:31:00.770

You need to tell the command where to output the file. I.e what Directory. You place the path to the directory after the -o option.

Because of where you placed the -o option, your script was actually missing the path to the source file. Which goes before the -o option.

When dealing with do shell script. You should remember to use *`quoted form of`*

This will escape space in the file/path names. Spaces in unix commands will be interpreted as part of the command. i.e the end of one argument in the command and the start of the next. where you have a file/path with a space in it like **photo copy.jpg**; photo will be seen as the file/path and copy.jpg will be seen as the next part of the command. single quotes around '**photo copy.jpg**' ail correct this.

Try this.

```
 set file_Path to POSIX path of (choose file)
set save_path to POSIX path of (choose folder)
do shell script ("/usr/bin/qlmanage -t -s640 " & quoted form of file_Path & space & " -o " & quoted form of save_path) 
```

Also @regulus6633\. if you use the -h option (displays extensive help.) you will see the part about output to file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:25:59.553

查看 qlmanage 的手册页显示没有“-o”选项。唯一的输出选项是打开的调试窗口。我认为不可能获得 png 输出。但是，我编写了一个名为 qlpreview 的命令行工具来完成此任务。[在这里](http://www.hamsoftengineering.com/codeSharing/qlpreview/qlpreview.html)找到它以及显示如何使用它的 applescript 代码。

# ajax - ajax 的成功

> ID：12969143
> 
> 赞同：1
> 
> 时间：2012-10-19T07:12:32.133
> 
> 标签：ajax, json

```
var url = '<?php echo base_url(); ?>index.php/home_event/view_cal';
 $.ajax({
        type: "POST",
        url: url,
        secureuri      :false,
        dataType: "json",
        data: postData,
           success: function (data,event_name,event_description,start_date,location)    
           {

            $('.heading_bg').html(event_name);
            $('.location_details').html(location);
            $('.date_details').html(start_date);
            $('.event_content').html(event_description);
        }
    });
});  return false;
             }); 
```

在此代码中，成功部分不会替换表单中的值。即我的 event_name 未显示在 heading_bg div 中。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:17:44.153

该`success`函数的第一个参数将包含您的所有数据。尝试类似：

```
success: function(data) {
    $('.heading_bg').html(data.event_name);
    /* ... */
} 
```

或者您可以检查数据：

```
success: function(data) {
    console.dir(data);
} 
```

在此处检查**成功**参数[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# excel - 键入 mismatch ，将 excel 单元格值与数组值进行比较 *FIXED*

> ID：12969149
> 
> 赞同：0
> 
> 时间：2012-10-19T07:12:48.513
> 
> 标签：excel, csv, vbscript, match, type-mismatch

当前问题：

目标是将数据从源 .csv 文件复制到目标 excel 表，基于将 .csv 的每一行中的值与 excel 表列中的值匹配，然后根据该值复制到正确的单元格中excel表。

我正在循环中从 .csv 文件将值收集到数组中，将数组中的一个值与目标 excel 工作表列 A 中的值进行比较，如果发生匹配，则将复制数组中的所有值到 Excel 工作表中的相应行。

尝试将 excel 工作表的单元格值与数组值进行比较时，我现在收到“类型不匹配”错误。

以下是代码的相关位：

```
sfile="\\DFSpath\file1.csv"
smaster="\\DFSpath\file2.xlsx"

set xlapp = createobject("excel.application")

set wbtarget = xlapp.workbooks.open(smaster)

set tgtworksheet = wbtarget.worksheets("sheet1")

set usedRowsXP = tgtworksheet.UsedRange.Rows

dim fs,objTextFile
set fs=CreateObject("Scripting.FileSystemObject")
dim arrStr
set objTextFile = fs.OpenTextFile(sfile)

Do while NOT objTextFile.AtEndOfStream
  arrStr = split(objTextFile.ReadLine,",")

    for each oRow in usedRowsXP   

    Introw = oRow
    If tgtworksheet.cells(Introw,1).value = arrStr(2) Then
    tgtworksheet.cells(Introw,4).value = arrStr(0)
    tgtworksheet.cells(Introw,5).value = arrStr(1)
    tgtworksheet.cells(Introw,6).value = arrStr(2)

    End If
    next
Loop 
```

通过修改代码修复如下：

```
dim fs,objTextFile
    set fs=CreateObject("Scripting.FileSystemObject")
    dim arrStr
    set objTextFile = fs.OpenTextFile(sfile)

'##Replace quotation marks with nothing in .csv##

strText = objtextFile.ReadAll
objTextFile.Close
strNewText = Replace(strText, """", "")

Set objtextFile = fs.OpenTextFile(sfile, 2)
objtextFile.Write strNewText
objtextFile.Close

set objTextFile = fs.OpenTextFile(sfile, 1)

'##Gather array out of line in .csv + compare user's name to name in excel sheet, if matches, copy data, repeat for each line##

Do while NOT objTextFile.AtEndOfStream
arrStr = split(objTextFile.ReadLine,",")     

for each oRow in usedRowsXP   

Introw = oRow.row
If Cstr(tgtworksheet.cells(Introw,1).value) = arrStr(2) Then
tgtworksheet.cells(Introw,4).value = arrStr(0)
tgtworksheet.cells(Introw,5).value = arrStr(1)
tgtworksheet.cells(Introw,6).value = arrStr(2)

End If
next

Loop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:05:51.230

我认为问题出在这一行：

```
for each oRow in usedRowsXP  
Introw = oRow 
```

我不是很擅长VBA，但我认为usedRowsXP是一个范围，它的每一行也将是一个范围。因此 Introw 将是一个范围。尝试使用 oRow 的 Row 属性，它将返回其行号：

```
for each oRow in usedRowsXP  
Introw = oRow.Row 
```

之后，Introw 应该在 Cells(Introw, 1) 等表达式中正常工作。

# arrays - 通过 TCP 发送数字数组

> ID：12969151
> 
> 赞同：0
> 
> 时间：2012-10-19T07:13:06.297
> 
> 标签：arrays, tcp, numbers

我正在尝试通过 TCP 套接字发送一组数字，但它们输出不正确。我无法弄清楚为什么它没有收到正确的数字。这就是我所拥有的...

客户

```
// the number array to be sent
unsigned long numArray[10] = { htonl(1), htonl(2), htonl(3), htonl(4), htonl(5), 
                               htonl(6), htonl(7), htonl(8), htonl(9), htonl(10) };
send(s, &numArray[0], sizeof(numArray), 0); 
```

服务器

```
// get the array of numbers
unsigned long numberArray[10];
int numberData = recv(new_fd, numberArray, sizeof(numberArray), 0);
if(numberData == -1) {
  cout << "ERROR" << endl;
}
unsigned long* num = numberArray;
for(int i = 0; i < sizeOfIncomingData; i++) {
  // this outputs a bunch of huge numbers, none of which are right...
  cout << ntohl(*(num+i)) << endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:22:59.403

从几件事开始；

1）您没有检查不完整的读取或写入的返回值`send()`或`recv()`不完整的读取或写入，它们可能不会发送或接收您给它们的实际字节数，它们返回实际发送/接收的字节数的值。

2)`long`不保证连接两端的大小相同，通常是 32 位或 64 位。`htonl`返回`uint32_t`始终为 32 位，并且您的传输/接收数组也应使用该类型以独立于体系结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:12:53.617

这些数字，转换为十六进制，是：

```
10 0A 40 00
06 00 00 00
40 10 40 00
0A 15 60 00
10 0A 40 00
28 60 A3 4F
C0 11 60 00 
```

这些根本不是你的数字，而是某种数据流。 `10`是 DLE，`0A`是换行符，`40`是“@”。以后的数据也不是你的号码。

TCP 不会像这样插入任何数据。您需要检查没有其他内容被写入您的传出套接字，并且您正在从正确的传入套接字读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T00:31:39.017

原来我的问题来自之前发送的数据。发送的大小和接收的大小不同，因此整个数组搞砸了。谢谢大家的建议，不敢相信我没有早点发现...

# mysql - 使自动增量填充以前删除的号码

> ID：12969161
> 
> 赞同：5
> 
> 时间：2012-10-19T07:13:28.160
> 
> 标签：mysql, sql, auto-increment

> **可能重复：**
> [使用未使用的主键](https://stackoverflow.com/questions/12967588/using-unused-primary-keys)

我创建了一个带有自动增量的 id 列的表现在，当我删除了该表中 id 为 8、12、30 的行时。

现在，当我插入一条新记录时，我想将下一条记录插入 8 然后 12 等等。

有没有办法让 MySQL 自动增量来为我做这件事？

我试图将自动增量设置为某个数字，但我不想那样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:16:31.277

您不想使用自动递增列。如果要填补空白，请将其设置为 int 列并处理存储过程或插入中的逻辑。

## 编辑：

由于它是一个 int 列，因此您可以按数字顺序排列它们。只需执行 a`SELECT Ids FROM Table Order By Ids`即可获取所有 Id 并检查返回数据集中的间隙。

这样做可能有一种更平滑的方法，但是您可以使用游标循环结果并与`INT`在整个循环中递增的变量进行比较。当你找到一个差距（不匹配）时 - 打破循环并将该`INT`值用作你的`INSERT`id。

我不会为您编写代码，但这些是让您朝着正确方向前进的一些步骤。它应该是您应该能够处理的非常基本的编程。

希望这可以帮助。

## 编辑＃2：

正如其他人所指出的，您最好的做法是留下空白。除非桌子上有一些长度上限并且 Ids 必须是 1-30（奇怪），否则不要管它。填补空白没有任何好处。

## 编辑#3：

要考虑的另一件事：如果您确实出于某种原因必须保留 1-30，请不要删除您的行。添加一列以将每一行标记为活动或不活动，然后只需在需要时更新不活动的行，然后将它们标记为活动。这是非常hacky，但你的要求有点hacky，所以......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T07:41:03.033

[http://sqlfiddle.com/#!8/3f071/1](http://sqlfiddle.com/#!8/3f071/1)

设置`@x`为最小的未使用值：

```
SET @x = (
  SELECT MIN(t1.id+1)
  FROM      t t1
  LEFT JOIN t t2 ON t2.id = t1.id + 1
  WHERE t2.id IS NULL
);

INSERT INTO t(id) VALUES (@x); 
```

设置`@x`为间隙中的最小未使用值，否则返回`NULL`使用 MySQL 的自动增量机制：

```
SET @x = (
  SELECT IF( MIN(t1.id-1) = 0, NULL, MIN(t1.id-1) )
  FROM      t t1
  LEFT JOIN t t2 ON t2.id = t1.id - 1
  WHERE t2.id IS NULL
);

INSERT INTO t(id) VALUES (@x); 
```

当然，如果您不想在脚上或任何您喜欢的地方开枪，您必须将这些包装到交易中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:16:32.600

表现得很好`AUTO_INCREMENT`。它不会填补您已删除数据的任何空白。您可以做的最好的方法是创建一个满足您需求的逻辑（*填补空白*）。

# php - 在析构函数中调用 PDO::exec() 会挂起 PHP 进程

> ID：12969163
> 
> 赞同：1
> 
> 时间：2012-10-19T07:13:35.803
> 
> 标签：php, pdo, destructor

在我的测试环境类的析构函数中，我想删除测试数据库。以普通方法执行此代码可以正常工作。

将它放入析构函数（或使用`register_shutdown_function`）也可以，但它会导致我的 php 进程永远无法完成。使用 xdebug reveils 调查代码，这`echo 'finished';`是永远无法实现的。

任何想法为什么这会导致 php 进程挂起？

```
public function __destruct()
{
    $config = $this->getConfiguration();
    if ($config['dbtests']['autogenerate'] && $config['dbtests']['cleanup'] ) {
        /** @var \PDO $dbh  */
        $dbh = new \PDO('mysql:host=' . $config['database']['host'], $config['database']['user'], $config['database']['password']);
        $dbh->exec('DROP DATABASE ' . $config['database']['dbname']);
        echo 'finished';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:36:02.967

如前所述，此代码来自我的测试环境类。这用于测试条令实体。

我发现`EntityManager`在打开与该数据库的其他连接之前，我必须手动关闭该学说的数据库连接。这可能是因为我正在删除连接`EntitiyManager`指向的数据库。

`__destruct`问题与或无关`register_shutdown_function`。我已经能够重现并最终解决了普通用户代码的问题。

# oracle-apex - 在自动完成字段上按下“Enter”时如何提交页面

> ID：12969167
> 
> 赞同：1
> 
> 时间：2012-10-19T07:13:47.627
> 
> 标签：oracle-apex

我的页面上有许多带有提交按钮的自动完成字段。我知道在文本字段中有一个名为“按下 Enter 时提交”的选项，它可以正常工作，但是此选项在这些字段中不可用。

我看过其他几个论坛帖子，这个我觉得我几乎解决了它但是当我按下任何键时触发的动作是错误的..

[https://forums.oracle.com/forums/thread.jspa?threadID=2425583](https://forums.oracle.com/forums/thread.jspa?threadID=2425583)

任何人都可以帮忙吗？如何使用自动完成字段在输入时提交页面？

```
<script type="text/javascript" src="#APP_IMAGES#jquery-1.8.2.min.js">  
$('#P2_DOOR_NUMBER').keyup(function(e) {  
if (e.keyCode == '13')  
    $('#P2_GO').trigger('click');  
});  
</script> 
```

*   Oracle 版本：Oracle 版本 10.2.0.4.0
*   完整 APEX 版本：Application Express 4.1.1.00.23
*   使用的浏览器和版本：Internet Explorer 7 & 8
*   主题：简单红色模板：具有简单红色主题的标准模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T14:13:32.760

你不能简单地使用 JQuery 来绑定你的输入字段吗？：

```
$('#YOUR_ITEM_ID').keyup(function (e) {
    if (e.keyCode === 13) {
        apex.submit({...});
    }
}); 
```

当然，您可以使用动态操作来做到这一点。

# .net - https抛出“找不到远程服务器” windows phone 7

> ID：12969168
> 
> 赞同：0
> 
> 时间：2012-10-19T07:13:50.340
> 
> 标签：.net, windows-phone-7-emulator

我正在调用我们的服务器，它将检查用户的身份验证，如果是有效用户，它将返回一个会话 ID。服务器的网址是https...

我已经对服务器进行了 httpwebrequest 调用（以及尝试过的 webclient）。它工作正常，但最近服务器的证书已经更新，现在我无法访问服务器。它抛出一个找不到服务器的异常。 .

下面是我的代码.......

```
private void LoginRequest()
        {
            try
            {

         var httpLoginRequest = (HttpWebRequest)WebRequest.Create(new Uri("https:xxxxx"                             + "?" +"username=" + UserName_textBox.Text + "&" + "password="+ Password_textBox.Password));
                httpLoginRequest.Method = DisplayMessage.Get_Method;
                Parameters = new Dictionary<string, string>();
                httpLoginRequest.BeginGetResponse(new AsyncCallback(GetLoginCallback), httpLoginRequest);
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
        private void GetLoginCallback(IAsyncResult asynchronousResult)
        {
            try
            {
               HttpWebRequest httpRequest = HttpWebRequest)asynchronousResult.AsyncState;
               HttpWebResponse httpresponse = (HttpWebResponse)httpRequest.EndGetResponse(asynchronousResult);
                Stream streamResponse = httpresponse.GetResponseStream();
                using(StreamReader streamRead = new StreamReader(streamResponse))
                {
                    var response = streamRead.ReadToEnd(); 
                }
         }
catch(WebException ex){}} 
```

我已经参考了很多论坛，但似乎没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:44:28.670

问题的出现是因为服务器证书已更改.....所以我需要手动安装 ssl 证书....我通过在我的移动浏览器中通过邮件下载 ssl 证书 url 作为附件并安装它来实现这一点……

# java - 对 servlet 的两个 jQuery 请求

> ID：12969169
> 
> 赞同：0
> 
> 时间：2012-10-19T07:13:57.187
> 
> 标签：java, jquery, servlets

我有一个 jQuery 请求：

```
handler: function(){
 formp.getForm().submit({
 url: url_servlet+'uploadfile',
 success: function(formp, o) {
  if(o.result.file!=""){
  alert(o.result.file);
 }
   }
  })
} 
```

我 servlet 我收到了这个请求：上传文件并调用 Java 类来读取它：

```
public class Read{
  public static String ReadFile (String filePath) throws IOException, SchemaException, SQLException, ClassNotFoundException{

//****FILE READ PART***//

//****INPUT DATA TO DATA BASE****//
  }
} 
```

所以我的java类有两个阶段。现在在`Reading file`阶段之后，我想在我想得到应答和呼叫`input data to DB`阶段并再次向客户端发送参数之后向客户端发送参数。
有可能吗？

**更新**

我想我会在我的班级中创建另一个方法来读取文件。但我有一个问题：在这个方法工作之后，我向 servlet 发出另一个 jQuery 请求并调用 ly java 类的另一个方法后，我在客户端发送参数。类字段保存它们在第一种方法的工作中所采用的值？

# c# - DSA 和公钥交换

> ID：12969180
> 
> 赞同：0
> 
> 时间：2012-10-19T07:15:11.930
> 
> 标签：c#, .net, dsa

我正在尝试使用 DSA 算法为我的应用程序实施许可解决方案。现在这是我所做的：

1.  生成了一个硬件密钥，获取了它的哈希值。
2.  生成的公钥和私钥。并用私钥加密了我的哈希函数。
3.  我将此加密值与公钥一起转发回客户端。
4.  在客户的系统中，我使用 DSASignatureDeformatter 的 VerifySignature 函数来验证我的加密密钥和我的硬件密钥。如果相等，我验证客户端。

现在我的问题是如何通过网络发送公钥。我试图在文件中存储和转发各种 DSAParameters 值，例如 J、G、P，但由于键的大小发生了变化，所以这是不可行的。看看有没有人可以指导。

更新：当我尝试在客户端机器上执行此操作时

```
 DSAParameters KeyInfo;
    using (DSACryptoServiceProvider DSA = new DSACryptoServiceProvider())
    {

        // Import the key information.
        KeyInfo = DSA.ExportParameters(false);
    } 
```

它为其各种成员生成的密钥大小与我从服务器发回的公钥参数不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T15:55:06.230

好的。有点晚了。但也许其他人也会有同样的问题。

你应该像这样导出你的密钥：

```
string publicKey = DSA.ToXmlString(false); 
```

所以你可以像这样导入它：

```
using (DSACryptoServiceProvider dsa = new DSACryptoServiceProvider())
{
    dsa.FromXmlString(publicKey);
    return dsa.VerifySignature()
} 
```

# css - Rails 和 Twitter Bootstrap css：下划线或连字符

> ID：12969182
> 
> 赞同：2
> 
> 时间：2012-10-19T07:15:17.970
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我注意到 rails 使用下划线作为 css id/类名（“some__class_name”），但引导程序使用连字符（“some-class-name”）。我希望在使用 id/class 名称时保持一致。解决此问题以一致使用下划线或连字符的最佳方法是什么？我似乎找不到任何修改 rails 或 bootstrap 的 css 命名约定的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:16:41.867

我怀疑这里是否可能完全一致。您可能会利用这个机会将自己的 css 类与 twitter-bootstrap 或 rails 分开。我建议在您自己的 css 名称中使用下划线，因为这会将 rails 的命名（Ruby 约定的结果）和您自己的名称放在同一个存储桶中，从而使您的 css 文件更加一致（基于假设一个是不太可能编辑 twitter 引导 css 类）。

另一个原因是某些编辑器不会自动完成以连字符分隔的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:23:02.563

好吧，我没有清楚地考虑这个......一定要迟到了。Rails 正在从符号“:some_variable”中获取我的字段标签中的 id 名称，因此将该名称与下划线一起应用于 id 名称。看起来我只需要确保明确定义 id 名称以使用连字符来符合引导程序的命名约定。

# php - 为 sencha 架构师从 php/mysql 加载 xml

> ID：12969183
> 
> 赞同：0
> 
> 时间：2012-10-19T07:15:22.000
> 
> 标签：php, mysql, xml, ajax, extjs

你好？我正在尝试使用 mysql 数据库中的数据在 sencha 架构师中加载 xml 存储。我正在构建我的xml，如下所示；

```
//AFTER MYSQL QUERY

    $dom = new DOMDocument("1.0");
    $dom->formatOutput = true;

// display document in browser as plain text
 // for readability purposes
    header("Content-Type: text/plain");

// create root element
$root = $dom->createElement("stores");
$dom->appendChild($root);

while ($row = mysql_fetch_array($result)) {

//create child element
$storeitem = $dom->createElement("store");
$root->appendChild($storeitem);

// Company label
$company = $dom->createAttribute("c");
$storeitem->appendChild($company);

// company value
$companyValue = $dom->createTextNode($row['company']);
$company->appendChild($companyValue);

}
// save and display tree
echo $dom->saveXML();

//OUTPUT
<stores>
<store c="company1"/>
<store c="company2"/>
</stores> 
```

输出是结构化的 xml。当我将此 xml 复制并粘贴到 xml 文档（例如 test.xml）中并使用它时，它可以完美运行。但是，尝试使用 php 文件中的回显 xml 不起作用。希望我说清楚了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:24:26.613

试试这样：

```
 header ("content-type: text/xml"); 
```

不要使用普通标题

```
header ("content-type: text/plain"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:15:15.023

**->**将内容类型设置为“XML”：header("Content-type: text/xml");

**->**如果您的 php 程序要返回一个 xml 。检查您的 php 标签之前或之后是否存在任何空格。

```
(check wheather you have left spaces or something else here, if so remove it all)
<?php 
......
....
....
?>
(check wheather you have left spaces or something else here, if so remove it all) 
```

问候，[TechNew.In](http://www.technew.in)

# android - 我的代码中有什么错误

> ID：12969186
> 
> 赞同：0
> 
> 时间：2012-10-19T07:15:37.600
> 
> 标签：android, android-layout

嗨，我有一个布局，其中有 4 个`Button`，`Button`分别放在一个单独的`LinearLayout`. 有`LinearLayout`id 分配给他们。现在在我的包含这个布局的活动中，我正在创建`LinearLayout`变量并为它们分配 id。

现在，当我尝试运行代码时，会显示以下错误。！[在此处输入图像描述][1]

```
10-19 12:36:43.899: E/AndroidRuntime(21774): FATAL EXCEPTION: main
10-19 12:36:43.899: E/AndroidRuntime(21774): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.code.accountmanager/com.code.accountmanager.AccountManagerActivity}: java.lang.NullPointerException 
```

还

```
10-19 12:36:43.899: E/AndroidRuntime(21774): Caused by: java.lang.NullPointerException
10-19 12:36:43.899: E/AndroidRuntime(21774):    at android.app.Activity.findViewById(Activity.java:1825)
10-19 12:36:43.899: E/AndroidRuntime(21774):    at com.code.accountmanager.AccountManagerActivity.<init>(AccountManagerActivity.java:22) 
```

此外，显示错误的行如下：

```
LinearLayout l4 = (LinearLayout) findViewById(R.id.anim_recent_transaction);
LinearLayout l3 = (LinearLayout) findViewById(R.id.anim_view_account);
LinearLayout l2 = (LinearLayout) findViewById(R.id.anim_add_transaction);
LinearLayout l1 = (LinearLayout) findViewById(R.id.anim_add_account); 
```

这是xml代码

```
 <LinearLayout
        android:id="@+id/buttonHolder"
        android:layout_width="120dp"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/anim_add_account"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/addAccount"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:background="@drawable/addaccount_new"
                android:gravity="center" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="10dp" />

        <LinearLayout
            android:id="@+id/anim_add_transaction"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/addTransaction"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:background="@drawable/addtransaction_new"
                android:gravity="center" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="10dp" />

        <LinearLayout
            android:id="@+id/anim_view_account"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/viewAccount"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:background="@drawable/viewaccounts_new"
                android:gravity="center" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="10dp" />

        <LinearLayout
            android:id="@+id/anim_recent_transaction"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <ImageButton
                android:id="@+id/recentTransaction"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:background="@drawable/viewtransaction_new"
                android:gravity="center" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout> 
```

请告诉我我能做些什么来消除错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:38:36.173

您应该`setContentView(R.layout.yourLayoutXML)`在使用前添加`findViewById`. 我认为这可能是你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:27:08.483

如果您提供了布局 xml 文件的完整代码，则最好识别您的错误。

在我看来，识别此类错误的最佳方法是调试您的代码。

这是您可以从中了解最佳调试方式的链接。

[http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)

祝你好运 ！！

# c++ - 如何创建 ifstream 对象数组以及如何使用编号的文本文件填充该数组？

> ID：12969187
> 
> 赞同：4
> 
> 时间：2012-10-19T07:15:41.637
> 
> 标签：c++, file, io, ifstream

我在一个目录中有一堆文本文件，每个文本文件都命名为“info1.txt”、“info2.txt”等。我将如何打开 ifstream 对象数组中的所有文本文件，而不必在其中硬编码所有文本文件名？我知道下面的代码不起作用，但我认为它传达了我想要做什么的想法，如果它确实起作用：

```
ifstream myFiles[5];
for(int i = 0; i < 5; i++){
    myFiles[i].open("info" + i + ".txt");
} 
```

我知道解决方案可能很简单，但经过大量研究、反复试验，我仍然没有弄清楚。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:32:43.003

为了构建文件名，我会使用`std::ostringstream`and `operator<<`。

如果您想使用容器类（例如，因为您在编译时不知道's`std::vector`的数组有多大），因为不可复制，您不能使用*，*但可以使用or ; 例如：`ifstream``std::ifstream`*`vector<ifstream>``vector<shared_ptr<ifstream>>``vector<unique_ptr<ifstream>>`*

 *```
vector<shared_ptr<ifstream>> myFiles;
for (int i = 0; i < count; i++)
{
    ostringstream filename;
    filename << "info" << i << ".txt";
    myFiles.push_back( make_shared<ifstream>( filename.str() ) );        
} 
```

使用`unique_ptr`（和 C++11 移动语义）：

```
vector<unique_ptr<ifstream>> myFiles;
for (int i = 0; i < count; i++)
{
    ostringstream filename;
    filename << "info" << i << ".txt";
    unique_ptr<ifstream> file( new ifstream(filename.str()) );
    myFiles.push_back( move(file) );
} 
```

`unqiue_ptr`比 更有效`shared_ptr`，因为`unique_ptr`它只是一个*可移动*指针，它没有引用计数（因此开销比 少`shared_ptr`）。`unique_ptr`因此，在 C++11 中，您可能希望`ifstream`' 不在`vector`容器外共享。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T07:20:50.650

我猜，问题是关于动态创建文件名的部分。

一个简单的解决方案是使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)来做到这一点：

```
ifstream myFiles[5];
for(int i = 0; i < 5; i++){
    ostringstream filename;
    filename << "info" << i ".txt";
    myFiles[i].open(filename.str());
} 
```

`std::string`如果您的库太旧，无法在调用中接受参数，`open`则使用

```
 myFiles[i].open(filename.str().c_str()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T07:19:43.050

你的想法应该有一个小的改变：

```
myFiles[i].open((std::string("info") + itoa(i) + ".txt").c_str());
             // ^^^^^^^^^^^           ^^^^ 
```

另请注意，您不能使用`std::vector`，因为`ifstream`它不是可复制的对象。所以继续使用数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:21:56.310

我通常使用 std::stringstream：

```
{
  std::stringstream filename;
  filename << "info" << i << ".txt" << std::ends;
  myFiles[i].open(filename.str().c_str());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:29:50.660

你可以有一个 ifstream 对象的数组，但是如果你需要一个动态长度，那么你不能这样做，也不会`std::vector<ifstream>`工作。

所以你需要指针。`std::vector<ifstream*>`会工作，但你可能会使用 shared_ptr 所以`std::vector<shared_ptr<ifstream> >`会工作。如果你`unique_ptr`有空，你可以使用它而不是`shared_ptr`.

然后必须使用创建每个元素`new`。

您还需要正确创建字符串，您可以使用 a`boost::format`或`ostringstream`什至老式的`sprintf`来执行此操作。

顺便说一句，我会搜索 boost 的文件系统库，看看它们是否有更动态的东西`ifstream`，可以在你的向量中愉快地运行，而不会出现 shared_ptr 的混乱。*

# python - 无效的十六进制值

> ID：12969188
> 
> 赞同：1
> 
> 时间：2012-10-19T07:15:46.173
> 
> 标签：python, hex

我正在使用`hex(int('00000000', 2))`将二进制字符串转换为十六进制。

`10`它适用于to的所有（输出）值`FF`，但它不能正确填充`00`，`09`我看到的是`0x0`to`0x9`而不是我期望的`0x00`to 。`0x09`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:24:18.140

`hex()`将返回可能的最短字符串。

一种替代方法是简单地使用：

```
"0x%02x" % int('00000000', 2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T07:21:36.970

为什么你认为`hex(0)`应该返回`0x00`？`0x0`在语义上是正确的，并且是 hexadecimal 的最短表示`0`。考虑一下：当你写十进制零时，它`0`不是`00`。或者例如`0x9`== `00009`== `9`。后者是数字的自然非冗余十进制表示`9`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:27:28.870

`0x9`是一个有效的十六进制数，等于`0x09`。该`hex`方法不知道要添加多少填充）

您可以使用正则表达式来修复填充并从“0x9”获取“0x09”

```
number = re.sub('x(\d)$','x0\1',number) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:29:25.783

使用字符串格式将值转换为十六进制。

```
'0x{:02x}'.format(int('00000110', 2)) 
```

# jquery - 用于重复值检查的 Kendo UI 验证

> ID：12969192
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:16:08.920
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor, kendo-ui

我在验证使用 json 从服务器检查重复值时遇到了问题。我的代码在每次单击时运行良好，但在第二次单击时显示错误消息（单击侧文本框输入值，然后单击文本框外-该时间代码执行但错误消息显示。我再次单击该文本框并再次单击单击侧文本框，再次运行我的代码，这次显示错误消息）。请找出我的错误并帮助我在单次转义或单击文本框时显示验证消息。

## 脚本语言=“javascript”类型=“文本/javascript”

//KendoUi 验证

```
 var validatable = $("#ApplicationNo").kendoValidator({
        onfocusout: true,
        onkeyup: true,
        rules: {
            ApplicationNo: function (input) {
                $.post("/Home/CheckAppNo", { ApplicationNo: $("#ApplicationNo").val() }, function (data) { b1 = data; })
                return b1;
            }

        },

        messages: {
            ApplicationNo: "Already Exist"
        }
    }).data("kendoValidator");

   var validatable = $(".k-content").kendoValidator().data("kendoValidator"); 
```

## C# 代码

```
 public JsonResult CheckAppNo(string ApplicationNo)
    {
        bool IsOk = projectRepository.CheckAppNumber(ApplicationNo);
        return Json(IsOk, JsonRequestBehavior.AllowGet);
        //return new JsonResult { Data = IsOk };
    } 
```

## html

> > < input type="text" id="ReferredBy" name="ReferredBy" class="k-textbox" 必填 />

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-26T09:11:41.083

我只是在 JavaScript 中添加了一行并运行得很好。

> $.ajaxSetup({ async: false });

# c# - 如何停止递归循环？

> ID：12969209
> 
> 赞同：0
> 
> 时间：2012-10-19T07:17:10.787
> 
> 标签：c#

我的意思不是暂停和恢复，而是取消/停止。要暂停和恢复，我在 Form1 的顶部使用它：

```
System.Threading.ManualResetEvent _busy = new System.Threading.ManualResetEvent(true); 
```

然后在按钮中我正在做 _busy.Reset(); 和 _busy.Set(); 暂停和恢复。但是，如果我想完全停止/取消递归循环？

这是递归循环代码：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {
            _busy.WaitOne();
            if (cancel == true)
            {

            }
            this.Invoke(new MethodInvoker(delegate { label3.Text = label3.Text = (Int32.Parse(label12.Text) + Int32.Parse(label10.Text)).ToString(); }));

            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            List<string> csFiles = new List<string>();

            csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
            csFiles.Add("current site name in this level is : " + url);
            try
            {
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, "Level: " + levels.ToString(), Color.Green); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, "   Loading The Url:   " , Color.Red); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, url + "...",Color.Blue); }));
                HtmlAgilityPack.HtmlDocument doc = TimeOut.getHtmlDocumentWebClient(url, false, "", 0, "", "");

                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, " Done " + Environment.NewLine, Color.Red); }));

                    currentCrawlingSite.Add(url);
                    webSites = getLinks(doc);
                    removeDupes(webSites);
                    removeDuplicates(webSites, currentCrawlingSite);
                    removeDuplicates(webSites, sitesToCrawl);
                    if (removeExt == true)
                    {
                       for (int i = 0; i < webSites.Count; i++)
                       {
                           webSites.Remove(removeExternals(webSites));
                       }
                    }
                    if (downLoadImages == true)
                    {
                        webContent.retrieveImages(url);                     }
                    }
                    if (levels > 0)
                        sitesToCrawl.AddRange(webSites)
                    this.Invoke(new MethodInvoker(delegate { label7.Text = sitesToCrawl.Count.ToString(); }));
                    this.Invoke(new MethodInvoker(delegate { label12.Text = currentCrawlingSite.Count.ToString(); }));

                    if (levels == 0)
                    {
                        return csFiles;
                    }
                    else
                    {

                        for (int i = 0; i < webSites.Count(); i++)//&& i < 20; i++)                         {

                            string t = webSites[i];
                            if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true))
                            {
                                csFiles.AddRange(test(t, levels - 1, eve));                                
                            }

                        }
                        return csFiles;
                    }

            }
            catch
            {
                failedUrls++;
                this.Invoke(new MethodInvoker(delegate { label10.Text = failedUrls.ToString(); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, " Failed " + Environment.NewLine, Color.Green); }));
                return csFiles;
            }

        } 
```

我有一个用于取消/停止的按钮单击事件，我有一个设置为 true 的标志，然后在上面的递归循环中我做了：

```
if (cancel == true)
            {

            } 
```

试图添加`break;`但它不是 for or while 所以你不能使用 break;

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:30:34.293

好的，我将发布一个完整的答案 :-)
递归函数的问题是，它们是递归的。只要你不知道什么时候退出它，它就会永远运行。
所以你需要一个条件来完成它。由于该方法一遍又一遍地调用它自己，因此您基本上需要再次向上调用堆栈并返回一些东西，就像您通常在任何其他应该返回一些东西的方法中所做的那样。[此处](http://www.dotnetperls.com/recursion)
发布了一个小示例 因此，为了退出递归循环，您需要一个正确的 return 语句并返回您需要的内容：

```
if (cancel)
{
  return new List<string>();
} 
```

你显然会把你需要的一切都放在你的清单中;-)

# facebook - Facebook Like 在 Visualforce 邮件中

> ID：12969210
> 
> 赞同：0
> 
> 时间：2012-10-19T07:17:14.580
> 
> 标签：facebook, email, salesforce, facebook-like, visualforce

我创建了一封将发送给客户的 Visualforce 电子邮件。在这封电子邮件中，我还希望在以下网站上创建一个类似 Facebook 的按钮。 [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

现在我已经创建了这个，它在 Visualforce Html 示例中看起来很好，完全符合我的要求，但是当我发送测试邮件时，按钮不显示。因此，html 邮件的其余部分可以正常加载，而不是 html 示例中所示的 facebook 按钮。

这是我的代码：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2FDatarecoverynederland%3Ffref%3Dts&amp;send=false&amp;layout=standard&amp;width=400&amp;show_faces=true&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=80"  scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:400px; height:80px;" allowTransparency="true"></iframe> 
```

在阅读了一些论坛和 salesforce 开发人员文档后，我也尝试过`<apex:iframe`

谢谢你，M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:17:51.283

作为安全预防措施，大多数主要电子邮件客户端都会从您的电子邮件中删除 iframe 标签。来自campaignmonitor 的这篇文章允许您查看哪些客户支持它，哪些不支持：

[http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)

您唯一的其他选择是在外部站点上托管喜欢的交互，然后在您的电子邮件中以简单 URL 的形式链接到该交互。

# java - 从 wsdl url 解析目标 targetNamespace 和名称

> ID：12969211
> 
> 赞同：0
> 
> 时间：2012-10-19T07:17:14.723
> 
> 标签：java, web-services, jax-ws

我正在使用 webservices url。我有一个 WSDL url。现在我想解析 WSDL url 以获取 wsdl 的 targetNamespace 和 name 属性。

我的网址是：[http](http://webservices.company.com:9080/WS/WebService?wsdl) ://webservices.company.com:9080/WS/WebService?wsdl 。

我可以从这个位置访问 wsdl 以使用 java 从中获取 targetNamespace 和名称吗？我想要的只是来自 wsdl 的 targetNamespace 和名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:08:13.880

当然这是可能的。我会为此推荐 WSDL4J。

# c# - 将用户名存储在 session['user'] 中是否安全？c#asp.net

> ID：12969213
> 
> 赞同：0
> 
> 时间：2012-10-19T07:17:20.573
> 
> 标签：c#, asp.net, security, session

我使用 C# 在我的 Web 应用程序 asp.net 中有以下代码：

```
 bool isValid = pc.ValidateCredentials(username.Text, password.Text);
            if (isValid == true)
            {
                Session["user"] = username.Text;
            } 
```

`username`实际上是一个文本框。最终用户将键入他们的用户名和密码，这将使用`PrincipalContext pc`.

所以，我想知道它是否安全，或者是否需要对上述代码进行改进以使其更安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T07:18:45.533

是的，将用户名存储在会话中是安全的，因为会话存储在服务器上。另一方面，您可能想阅读有关[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)的信息，以确保您没有重新发明一些轮子。

# iphone - iTunes Connect Vague 应用程序被拒绝 - 拔掉我的头发

> ID：12969214
> 
> 赞同：0
> 
> 时间：2012-10-19T07:17:21.633
> 
> 标签：iphone, objective-c, xcode, app-store-connect

所以，我最近上传了大约 9 个应用程序，它们是原始应用程序的突变，只是内容不同，框架相同......

因此，今天所有 9 个应用程序都在完全相同的时间进行了审核，尽管它们每个应用程序都相隔一天上传，我认为这真的很奇怪。5 小时后，我收到 9 封拒绝电子邮件，同样的拒绝如下：

> 2.2 我们发现您的应用无法在运行 iOS 6 的 iPhone 5 上通过 Wi-Fi 和蜂窝网络启动。我们在主屏幕上选择应用程序时遇到了问题 - 应用程序显示启动图像然后意外退出。这可能是因为 iOS 6 对应用程序使用了看门狗定时器；如果应用程序完成其初始启动的时间过长，操作系统将终止该应用程序。有关看门狗计时器的信息，请参阅技术问答：应用程序在从调试器启动时不会崩溃，但在用户启动时会崩溃。另一种可能是缺少权利。有关详细信息，请参阅技术说明：解决“0x800003A”、应用程序无法启动和“缺少权利”。对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。如果您在重现此问题时遇到困难，请尝试按照 [https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

我之前上传了许多应用程序，但从未收到过此类问题。所以，我听从了他们的建议，这不是 dogwatch 计时器，因为该应用程序在我的 iPhone 4s 和 iOS6 上从 xcode 运行时运行绝对完美，并且当我将其作为临时企业分发并通过 .ipa 文件将应用程序同步到我的 iPhone 上时，它也可以毫无问题地运行...

虽然，在测试任何这些之前，我通过并撤销了我的开发和分发证书，通过我的钥匙串并删除了与应用程序和密钥相关的任何证书的所有实例。然后刷新了一切。我所有的代码签名/配置文件都是有效的，我也将我的设备重新添加到了配置门户。

还有其他人有什么想法吗？我想肯定我在再次上传我的应用程序之前解决了这个问题，等待一周只是再次被拒绝并且必须重新开始。任何帮助或线索将不胜感激！

我还仔细检查了我所有的 info.plist 包标识符，它们都匹配与每个应用程序关联的 dist 和开发配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:17:30.170

我终于找到了一个使用 iPhone 5 的朋友。由于使用了 armv7s 架构，WAS 崩溃了。所以我剥离了所有架构，只使用了 armv7。像魅力一样工作，该应用程序在我的 4s 上运行得和在我朋友的 iphone 5 上一样流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:53:44.903

您是否尝试仅在 armv7 中编译？（忘记 armv7s 的支持）。顺便说一句，是的，没有任何iphone5硬件是不可能测试的，而且模拟器实际上不模拟任何东西。只有 armv7 功能它应该（我真的说“应该”）表现得像 ios6 上的 iPhone 3G/4/4s。

或者您是否有一些取决于设备的运行时行为？你在启动时实际设置了什么？

看这个帖子： [http ://wanderingcoder.net/original-armv7s-psa/](http://wanderingcoder.net/original-armv7s-psa/)

即使它谈论链接器错误，这里的理念是：不要发布你没有的东西，不能测试。仅当您将变得富有并拥有 iPhone 5 时才使用 armv7s

# javascript - socket.io 使用 for 循环添加 socket.on 方法

> ID：12969220
> 
> 赞同：1
> 
> 时间：2012-10-19T07:17:59.903
> 
> 标签：javascript, node.js, sockets, socket.io

认为

```
socketMethods:{
    update:function(data){
        this.emit("test", data);
        console.log("socket.update");
    },
    test:function(data){
        this.emit("test", data);
        console.log("socket.test");
    }
} 
```

以下是可能的，并允许我发出“test”和“update”，并且将调用“test”和“update”

```
socket.on("test", function(data){
    dummy.socketMethods.test.call(socket, data);
});
socket.on("update", function(data){
    dummy.socketMethods.update.call(socket, data);
}); 
```

以下这些是不可能的......如果我发出“测试”或“更新”，每个人都会改为调用“测试”。如果我使用 FOR 循环，所有方法都将成为调用的“最后一个”方法。

也就是说：如果我切换了更新和测试，那么在 socketMethods 对象中测试是第一，更新是第二。无论我要求“测试”还是“更新”，总是会调用“更新”

```
for(key in dummy.socketMethods){
    socket.on(key, function(data){
        dummy.socketMethods[key].call(socket, data);
    });
}

var methods = ["test", "update"];
while(methods.length !== 0){
    var method = methods.pop();
    console.log(method);
    socket.on(method, function(data){
        dummy.socketMethods[method].call(socket, data);
    });
}

var methods = ["test", "update"];
for(var i = 0; i < methods.length; i++){
    console.log(i);
    socket.on(methods[i], function(data){
        console.log(i);
        dummy.socketMethods[methods[i]].call(socket, data);
    });
} 
```

线索：使用'i'的for循环有两个console.logs。第二个 console.log 返回“2”

为什么会这样？我如何使用 for 循环来附加我的 socketMethods？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:11:44.077

您犯了一个常见的错误，即假设闭包在*创建*时“捕获”了外部函数变量的*值*。它没有。它“捕获”对外部函数变量的*引用*，其值将是*执行*闭包时外部变量所具有的任何值。如果您在循环中创建闭包，则该值将是循环结束时的值。

 ***解决这个问题的方法是创建一个使用外部变量值作为参数的“封闭”闭包。一种方法是创建一个帮助函数来生成你的闭包。在你的第一个例子中，你可以做

```
function makeOn(key) {
  return function(data) {
    dummy.socketMethods[key].call(socket, data);
  }
}

for(key in dummy.socketMethods){
  socket.on(key, makeOn(key));
} 
```

现在在每个闭包中，`key`将一个新创建的变量（闭包之间不同）设置为适当的值。

也可以使用立即函数调用（有些人称之为“自执行函数”）更简洁地执行相同的操作，但可读性也有所降低。***

# php - pdo 驱动程序不支持 linux 上的事务

> ID：12969221
> 
> 赞同：2
> 
> 时间：2012-10-19T07:18:05.330
> 
> 标签：php, sql-server, transactions, pdo

我一直在使用 DBLib PDO 驱动程序将我的 PHP Symfony 项目与 MsSQL 数据库连接（我只需要查询 2 个表，Propel 设置为连接 MySQL 数据库，这是主要的）

不幸的是，当需要使用事务时，我遇到了问题。

以下代码

```
$pdo = new PDO('dblib:host=IP;dbname=DBNAME', 'login', 'password');
$pdo -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$pdo -> beginTransaction();
$sql = "INSERT INTO DBNAME (Fields) VALUES (Values) ";
$query = $pdo -> prepare($sql);
$query -> execute();
$sql = "SELECT Field FROM DBNAME";
$query = $pdo -> prepare($sql);
$query -> execute();
$dane1 = $query -> fetchAll();
$pdo -> rollBack();
$sql = "SELECT Field FROM DBNAME";
$query = $pdo -> prepare($sql);
$query -> execute();
$dane2 = $query -> fetchAll(); 
```

我收到这样的错误：

```
PDOException Object ( [message:protected] => This driver doesn't support transactions [string:Exception:private] => [code:protected] => 0 
```

我一直在寻找任何其他支持事务的驱动程序，但不幸的是，除了[Microsoft Drivers 3.0 for PHP for SQL Server](http://www.microsoft.com/en-us/download/details.aspx?id=20098)之外，我什么也找不到，这不适用于我的问题，因为我的项目正在使用 LAMP环境

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:58:42.870

有一个长期存在的错误：[https ://bugs.php.net/bug.php?id=38955](https://bugs.php.net/bug.php?id=38955)

SqlServ 驱动程序确实可以在 Windows 上完美运行。对于 Linux，您应该通过 ODBC（使用 FreeTDS）进行连接，如此处的 php 文档中所述，[尤其是](http://www.php.net/manual/de/ref.pdo-sqlsrv.php)[此处](http://php.net/manual/de/ref.pdo-dblib.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:14:30.223

如果您可以使用 PHP 5.4，则添加了事务支持`PDODblib`

或者，您可以将`pdodblib`文件从 5.4 源复制到 5.3 并编译（它们几乎相同）或执行手动事务查询。

# c# - asp.net Validations 不使用确认框

> ID：12969223
> 
> 赞同：4
> 
> 时间：2012-10-19T07:18:16.203
> 
> 标签：c#, asp.net

我想添加一个确认框。以下代码显示了是/否确认框，但这不负责验证。如果我已将公司名称字段设为必填项，它会输入记录，即使我没有输入公司名称也是如此。

我在 pageload 事件中调用了这个方法：

```
CreateConfirmBox(btnAddEnquiry, "Do You Really Want to Add ?"); 
```

方法定义：

```
public void CreateConfirmBox(System.Web.UI.WebControls.Button btn, string strMessage)
{
    btn.Attributes.Add("OnClick", "return confirm('" + strMessage + "');");
} 
```

.aspx 文件

```
<asp:Button ID="btnAddEnquiry" runat="server" 
     BackColor="#0000FF"
     ForeColor="LightSlateGray"
     OnClick="btnAddEnquiry_Click" 
     Text="Add Enquiry" Width="154px" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:24:02.050

您没有在代码中处理任何验证。

我强烈建议您使用 .NET Validation 控件。它们很好，几乎不需要编写任何代码。

更多信息在这里； [http://msdn.microsoft.com/en-us/library/bwd43d0x%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bwd43d0x%28v=vs.100%29.aspx)

代码示例；

```
<asp:TextBox ID="TextBox1" runat="server" />

<asp:RequiredFieldValidator IdD="RequiredFieldValidator2"
             ControlToValidate="TextBox1"
             Display="Static"
             Width="100%" runat="server">
             *
 </asp:RequiredFieldValidator>

  <asp:Button ID="btn_Save"
             Text="Validate" 
             OnClick="btnSave_Click" 
             runat="server" /> 
```

如果您不想实现验证器并仅使用确认框并因此保持当前拥有的相同功能，您可以使用按钮的 OnCientClick 来实现，如果用户单击否，该按钮将停止 PostBack。

```
 <asp:Button ID="btnAddEnquiry" runat="server" 
              BackColor="#0000FF"
              ForeColor="LightSlateGray"
              OnClick="btnAddEnquiry_Click" 
              OnClientClient="javascript: return confirm('Do You Really Want to Add ?');"
              Text="Add Enquiry" Width="154px" /> 
```

# android - 如何在 Android 中的 Facebook 页面墙上发帖？

> ID：12969224
> 
> 赞同：2
> 
> 时间：2012-10-19T07:18:19.527
> 
> 标签：android, facebook, facebook-graph-api

嗨，我想发布任何消息或链接到 Facebook 页面。我尝试过的是这个。

```
void postInfo()
    {
        try
        {
            Bundle parameters = new Bundle();
            parameters.putString("message", messageFacebook);
            parameters.putString("name", "Test Name");
            parameters.putString("link", "http://www.mylink.com/");
            parameters.putString("picture", imageUrl);
            parameters.putString("display", "page");

            String responsePost = facebook.request("me/feed", parameters, "POST");
            String responsePagePost = facebook.request(FACEBOOK_PAGE_ID+"/feed", parameters, "POST");

            Log.i(TAG, "responsePost = " + responsePost);
            Log.i(TAG, "responsePagePost = " + responsePagePost);
        } catch (MalformedURLException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

我正在做的是发布一个指向用户墙的链接以及我的应用程序的 Facebook 页面。此代码工作正常，但问题出在 Facebook 页面上。我在 Facebook 页面上发布的链接没有出现在页面的墙上，但它出现在页面的时间线上，标题为“ *MyApp 页面上其他人的最新帖子*”。

我希望帖子应该出现在墙上而不是时间线上。

我该怎么办我没有得到请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:25:50.380

Facebook 现在已将其所有个人资料更改为时间线。任何 facebook 页面都会将其他人的帖子显示为“其他人在 MyApp 页面上的最新帖子”。此行为由 facebook 控制，而不是由您的应用程序控制。在这种情况下，您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:37:35.187

尝试这个 ：

```
void postInfo()
  {
    try
    {
        Bundle parameters = new Bundle();
        parameters.putString("message", messageFacebook);
        parameters.putString("name", "Test Name");
        parameters.putString("link", "http://www.mylink.com/");
        parameters.putString("picture", imageUrl);
        parameters.putString("display", "page");

        facebook.dialog(this, "stream.publish", params,
                new DialogListener() {

                    public void onFacebookError(FacebookError e) {
                        e.printStackTrace();
                    }

                    public void onError(DialogError e) {
                        // TODO Auto-generated method stub
                        e.printStackTrace();

                    }

                    public void onComplete(Bundle values) {

                    }

                    public void onCancel() {

                    }
                });
    } catch (MalformedURLException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# jquery - 如何从 C# 添加 Jquery 手风琴标签

> ID：12969226
> 
> 赞同：1
> 
> 时间：2012-10-19T07:18:23.570
> 
> 标签：jquery, asp.net

嗨，我是 J Query 的新手，在我的项目中，我想从 C# 代码后面实现 J Query Accordion，但我不知道如何使用以下代码向 jquery Accordion 添加控件，但这会将控件添加到 Accordion 选项卡而不是内容

下面是aspx的代码

```
<script type="text/javascript">
    $(function () {
        $("#accordion").accordion({
            heightStyle: "content"
        });
    });
</script>

 <div id="accordion" runat="server">
    <asp:Repeater ID="Repeater1" runat="server">
        <ItemTemplate>
            <h3>
                <%# DataBinder.Eval(Container.DataItem, "Mobile_Name")%>
            </h3>
            <div>
                <p>
                    <%# DataBinder.Eval(Container.DataItem, "Description")%>
                </p>
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

以下 .cs 代码

```
TextBox txtEmail = new TextBox();
     txtEmail.ID = "txtEmail";

    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString);
    SqlDataAdapter da = new SqlDataAdapter("select * from Mobile", con);
    DataSet ds = new DataSet();
    da.Fill(ds);
    Repeater1.DataSource = ds;
    Repeater1.DataBind();
    accordion.Controls.Add(txtEmail); 
```

请告诉我解决方案谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:44:26.937

如果您希望您的 txtEmail 成为手风琴的一部分，您必须使用与手风琴兼容的标记。而不是只添加文本框添加以下内容：

```
// First add the header component
accordion.Controls.Add(new HtmlGenericControl("h3") { InnerText = "Email" });
// Then create the div for the accordion content
HtmlGenericControl div = new HtmlGenericControl("div");
// Add your textbox to the content div for the accordion
div.Controls.Add(txtEmail);
// Finally add the div to the accordion completing the accordion tab set
accordion.Controls.Add(div); 
```

注意：代码是手写的，没有编译验证。如果它不编译让我知道:)

# html - 带有固定位置元素的 Chrome 慢速滚动

> ID：12969228
> 
> 赞同：45
> 
> 时间：2012-10-19T07:18:28.293
> 
> 标签：html, css, google-chrome

在我的顶部，我有一个固定的 DIV，3 个固定的选项卡和底部的一个固定的 div（这只会在登录时显示 - 将来）。

我只在 Chrome 上的滚动性能很差 - FF 和 IE 都很好。

我已经准备好一些关于 Chrome、固定定位和滚动的问题报告，想看看是否有人有任何建议？我真的很想在它们的位置修复这些元素，但我也希望在 Chrome 中具有良好的滚动性能。

关于修复的任何想法？

注意：在 chrome 上放大时会更加明显......

更新：我读过其他人有类似的问题并更新[了这个 Chrome 问题](https://code.google.com/p/chromium/issues/detail?id=139305)，后来合并到[136555](https://code.google.com/p/chromium/issues/detail?id=136555)，据称自 Chrome 26 以来已修复。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-28T23:11:44.610

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-11T14:24:19.823

@Corylulu 的第一个解决方案有效，但并不完全（仍然有点口吃，但少得多）。我还必须添加`-webkit-backface-visibility: hidden;`到固定元素才能避免口吃。

所以对我来说，在页面上使用固定元素时，以下内容就像一种魅力，可以防止在 chrome 中向下滚动卡顿：

```
-webkit-transform: translateZ(0);
-webkit-backface-visibility: hidden; 
```

编辑：Webkit-transform 和 webkit-backface-visibility 都会导致字体和图像模糊。因此，请确保仅在悬停状态下同时应用两者。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-04T09:22:41.977

将此规则添加到您的固定元素，

```
will-change: transform; 
```

[从Here](https://medium.com/@kulor/one-small-css-hack-to-improve-scrolling-performance-c5238029e518)阅读解决方案，并从[Here](https://stackoverflow.com/questions/26907265/css-will-change-how-to-use-it-how-it-works)
阅读**will-change**属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-28T20:50:33.387

最近有一个关于这个特别烦人的问题的错误报告： [http ://code.google.com/p/chromium/issues/detail?id=155313](http://code.google.com/p/chromium/issues/detail?id=155313)

它与浮动元素和大图像的组合有关。Chrome Canary 24.0.1310.0 上仍然存在问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T19:44:11.937

有很多方法可以加速这个前端，试试[PageSpeed Insights](https://chrome.google.com/webstore/detail/pagespeed-insights-by-goo/gplegfbjlmmehdoakndmohflojccocli) Chrome 插件以获得一些想法。就个人而言，我建议在[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)之类的框架之上使用相同的设计重建这个前端，但如果你想要这个前端的一些细节：

*   正如您所说，标题栏的位置在 CSS 渲染（[CSS 压力测试结果](http://cl.ly/KIhb/o)）方面占用的时间最多。摆脱那里的[大图像](http://www.datingjapan.co/images/top-banner.png)，并用 1px 宽的背景图像替换它。您还不必要地调整[了您的徽标](http://www.datingjapan.co/images/www.datingjapan.co.header2.png)（以及此标题中的所有其他图像）等图像的大小，替换为实际大小的版本
*   [您可以通过优化](http://www.smushit.com/ysmush.it/)所有内容图像来节省大量传输的字节

# java - 按下 Enter 键后将消息发送到另一个窗口

> ID：12969229
> 
> 赞同：1
> 
> 时间：2012-10-19T07:18:34.917
> 
> 标签：java, android, xml, eclipse

`Enter`我希望我的测试数据在按键后转到另一个窗口，例如单击发送按钮。

我正在使用这段代码：

```
 text1 = ((TextView) findViewById(R.id.textMsg));
    text1.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event){
            // If the event is a key-down event on the "enter" button
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_ENTER)) {
              // Perform action on key press
             Toast.makeText(IMSendData.this, text1.getText(), Toast.LENGTH_SHORT).show();
              return true;
            }

            return false;
        }  
    }); 
```

在我按下键后使用此代码`Enter`，它会继续发送按钮，并且在第二次`Enter`按下键后，测试数据会进入窗口。

我只想按`Enter`一次按钮，然后文本转到窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:05:45.293

```
 you go through this..

            sendData = (EditText) findViewById(R.id.message);
            sendData.setOnKeyListener(new OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {
            // If the event is a key-down event on the "enter" button
            if ((event.getAction() == KeyEvent.ACTION_DOWN) && (keyCode == 
                                      KeyEvent.KEYCODE_ENTER)) {
                // Perform action on key press
                adapter.add(new OneComment(false,  
                                    sendData.getText().toString()));
                sendData.setText("");
                return true;
            }
            return false;
           }
           }); 
```

# cakephp - 调用登录操作时，AppController 中的 beforeFilter 未调用

> ID：12969232
> 
> 赞同：0
> 
> 时间：2012-10-19T07:18:55.860
> 
> 标签：cakephp

当我使用 UserController 登录时，没有从 appController 调用 beforeFilter 操作。

当我在本地主机上开发它时，它工作正常。但是在生产服务器 beforeFilter、beforeRender 等操作没有调用，这就是为什么我无法登录到我的应用程序。

任何机构都有任何解决方案。如何克服这种糟糕的情况？？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:42:28.223

检查您的生产服务器和本地机器的日期/时间。如果您无法登录 opnproduction 系统并且在本地机器上没有问题，那么会话在登录后立即过期是很常见的 - >它在它开始之前就结束了，与本地系统上的时间成本相比，未来的路要走服务器时间...

# c#-4.0 - 如何在窗口应用程序中为文本框添加 LostFocus 事件

> ID：12969237
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:19:16.817
> 
> 标签：c#-4.0

> 如何 为**TextBox添加****LostFocus** 事件 我在 VS10 的编辑器的事件浏览器中找不到它。我发现离开事件而不是 LostFocus

 *** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T07:28:07.883

使用将提供您想要的服务的离开事件**

# php - 翻译 Silex 路线

> ID：12969238
> 
> 赞同：5
> 
> 时间：2012-10-19T07:19:23.080
> 
> 标签：php, symfony, routing, translation, silex

我正在尝试在我的 Silex 应用程序中使网址可翻译。

首先，我尝试覆盖`UrlGenerator`and `RedirectableUrlMatcher`，但这并没有真正奏效。

然后，我尝试覆盖：

```
$app['route_class'] = 'My\Translatable\Route'; 
```

用这样的代码：

```
class Route extends Silex\Route
{
    public function setPattern($pattern)
    {
        return parent::setPattern(str_replace('admin', 'admin2', $pattern));
    }
} 
```

但我得到了[https://gist.github.com/6c60ef4b2d8d6584eaa7](https://gist.github.com/6c60ef4b2d8d6584eaa7)。

实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:36:14.420

所以解决方案是扩展 RedirectableUrlMatcher 并覆盖 match 方法而不是 Route。

Matcher.php

```
class Matcher extends Silex\RedirectableUrlMatcher
{
    public function match($pathInfo)
    {
        return parent::match(str_replace('/admin', '/', $pathInfo));
    }
} 
```

应用程序.php

```
$app['url_matcher'] = $app->share(function () use ($app) {
    return new Matcher($app['routes'], $app['request_context']);
}); 
```

现在，当我访问[http://domain.com/admin](http://domain.com/admin)时， silex 返回[http://domain.com/](http://domain.com/)的内容。希望这是你需要的。

# iphone - 使用 index.html 以外的 HTML 文件启动项目

> ID：12969240
> 
> 赞同：0
> 
> 时间：2012-10-19T07:19:33.003
> 
> 标签：iphone, xcode, cordova

我目前正在使用 Cordova 和 Xcode 为 iPhone 开发一个混合应用程序。

默认情况下，它会创建一个文件 index.html 并将其作为我的应用程序的起点。

我想知道有没有一种方法可以改变这个默认行为并且我的应用程序从我指定的页面开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:36:08.273

您必须在应用程序委托文件中提供应用程序启动文件的引用。执行以下操作 1\. 在 www 文件夹中创建并添加您的 html 页面 2\. 在您的 appDelegate 文件中更改以下代码

```
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"yourFile.html"; 
```

# c# - 不同类型的 Web 服务选项

> ID：12969241
> 
> 赞同：0
> 
> 时间：2012-10-19T07:19:39.637
> 
> 标签：c#, asp.net, wcf, web-services, asmx

对于 Web 服务，我有哪些选择？到目前为止，我一直在使用 .asmx 和 windows 通信基础或 wcf。还有其他值得考虑的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:20:35.127

[Asp.net WebAPI](http://www.asp.net/web-api)是另一种选择，最适合您的客户端是 Web 应用程序，因为它是 Rest 基础，并且从 ajax 调用它相当容易。

# sql-server - SQL Server 数据库连接池？

> ID：12969244
> 
> 赞同：0
> 
> 时间：2012-10-19T07:19:44.533
> 
> 标签：sql-server, vb.net

我在网站中遇到以下异常，该异常在很大程度上涉及数据输入操作。它还在相关数据库中的表上定义了索引。数据库调用是通过`SQLHelper`. 例如`SQLHelper.ExecuteNonQuery()`等。我看不到调用`Close()`or`Dispose()`方法的任何地方。`SQLConnection`所以我假设`SQLHelper`必须照顾它，因为我也在各个网站上阅读过它。此外，结合`Close()`或检查代码`Dispose()`也非常繁琐，因为`SQLHelper`在许多地方都使用过，并且有许多定义了业务逻辑的类。我得到的例外是：

> 记录未更新超时。在从池中获取连接之前超时时间已过。这可能是因为所有池连接都在使用中并且达到了最大池大小。

现在我已经通过放入方法测试了代码，`GC.Collect`到目前为止`Application_EndRequest`一切`Global.asax`正常。但我知道严格不建议使用相同的。

任何帮助都将不胜感激，因为我被困在@present..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:22:47.430

不确定您的 SQLHelper 是哪个版本，但如果您看不到任何 connection.Close() 被调用，那么您需要手动调用它以确保连接关闭。垃圾收集器不会为您关闭连接。

**编辑**

另外关于连接池，它默认由.Net本身启用，您调用connection.Close（）并不意味着您的应用程序与SQL Server之间的连接确实已关闭，它只是将该连接返回到连接池并等待其他人抓住。仅当一段时间后没有人打开新连接时，该连接才会物理关闭，因此您不必担心调用 connection.Close() 太多次，而不是您需要尽快调用它以释放其他资源要使用的线程。

有关更多详细信息，请查看 Microsoft 对连接池的说法：http: [//msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

**另一个编辑** 我建议您找到 SQLHelper 的更新版本或继续更改 SQLHelper 以在其中添加 Close()。即使你发现 GC 帮助你关闭了连接但你不应该那样使用它，GC 不是为释放数据库连接而设计的，而只是内存，也不保证 GC.Collect() 会立即执行以启动垃圾收藏。

此外，您正在编写 Web 应用程序，因此您需要考虑并发性，如果在另一个线程运行时调用 GC.Collect() 会降低您的系统对其他用户的速度吗？

那些有限的资源（如数据库连接、TCP/IP 端口、文件读/写处理程序等）需要尽快释放，这是一个常识。如果您正在寻找一种简单的方法来让您在不使用连接的情况下轻松编码。关闭那么您将走向错误的方向，我知道您只想编写代码而不是在任何地方添加该行，但您至少需要确保 SQLHelper做关闭连接的工作。

# java - 厘米到像素的转换

> ID：12969247
> 
> 赞同：1
> 
> 时间：2012-10-19T07:20:07.433
> 
> 标签：java

如何将 1 cm 转换为 ?px

html解析器中使用的这种转换

`%`转换是->`(allToPx[0]) * 16)/100) px`

`pt`转换是->`(allToPx[0]) * 16)/12) px`

`em`转换是->`(allToPx[0]) * 16)/1) px`

但如何转换`cm`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:23:47.610

您必须计算出您所使用的显示器的像素密度。这可能完全不同。你必须得到这些数据：

*   屏幕宽度
*   屏幕高度
*   垂直像素
*   水平像素

然后你可以计算给定像素在垂直和水平方向上的实际大小......

但获得这种信息并不总是可能的。如果可能的话，您可能必须使用一些依赖于平台的技巧来获得这些……此外，您没有指定您使用哪种 UI 库。这可能对我们能够提供建议有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:23:02.300

没有`cm`转换，因为元素的大小在`cm`很大程度上取决于屏幕密度（每英寸或厘米的像素），您无法在大多数设备上访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:23:31.117

`cm`转换为**不是**不可能的，`px`因为它们的单位类型不同。

 **`cm`是*绝对*长度单位，而`px`是*相对*长度单位

就像说，“我可以将公斤换算成小时吗？”

将此用作参考： http: [//msdn.microsoft.com/en-us/library/ms537660 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537660(v=vs.85).aspx)**

# c# - DotNetNuke 中的 Linq 到实体

> ID：12969254
> 
> 赞同：0
> 
> 时间：2012-10-19T07:20:28.267
> 
> 标签：c#, linq-to-entities, dotnetnuke

可以用`linq-to-entities`在`DotNetNuke`吗？另一方面，可以`c# dotnetnuke development package`使用 a 来开发 a`linq-to-entities dotnetnuke web application`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:44:03.887

[http://dnntechtemplate.codeplex.com/](http://dnntechtemplate.codeplex.com/)上提供了一个模块模板，它演示了在 DotNetNuke 环境中使用实体框架（自动处理`objectQualifier`和`databaseOwner`配置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:04:48.723

DNN 第 7 版将开始使用 PetaPoco 作为 ORM。您绝对应该考虑使用 PetaPoco 而不是 Linq-To-Entities。

[http://www.charlesnurse.com/Blog/tabid/226/EntryId/53/DAL-2-A-New-DotNetNuke-Data-Layer-for-a-New-Decade.aspx](http://www.charlesnurse.com/Blog/tabid/226/EntryId/53/DAL-2-A-New-DotNetNuke-Data-Layer-for-a-New-Decade.aspx)

# objective-c - 如何在 iOS 应用中集成 AMF

> ID：12969258
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:20:43.517
> 
> 标签：objective-c, amfphp

我是 ios 应用程序中 AMFClient 集成的新手。如果有人有好的教程，请与我分享。我提前感谢您的帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:34:35.723

你想使用这个库： [https](https://github.com/nesium/cocoa-amf) ://github.com/nesium/cocoa-amf 我似乎找不到教程。

# linux - centos4/5中如何不限制一个用户的组数

> ID：12969261
> 
> 赞同：0
> 
> 时间：2012-10-19T07:21:00.770
> 
> 标签：linux, centos, nfs

如果一个用户拥有超过 16 个群组，则会导致群组无法进行权限控制。

如何在 Centos4/5 中限制每个用户的组数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:36:16.360

您不能*限制*每个用户的附加组。但是你可以提高限制。请注意，大多数 Unix 系统限制为每个用户 16 个组（参见[http://www.j3e.de/ngroups.html），NFS](http://www.j3e.de/ngroups.html)也是如此，参见 [https://xkyle.com/solving-the-nfs-16- group-limit-problem/](https://xkyle.com/solving-the-nfs-16-group-limit-problem/)和/或[http://nfsworld.blogspot.fr/2005/03/whats-deal-on-16-group-id-limitation.html](http://nfsworld.blogspot.fr/2005/03/whats-deal-on-16-group-id-limitation.html)

每个用户的组数由`NGROUPS_MAX`from定义，`<limits.h>`但应使用`sysconf(_SC_NGROUPS_MAX)`. `sysctl kernel.ngroupmax`您可以使用或更改内核最大组数`/proc/sys/kernel/ngroups_max`。但这需要 C 库、PAM 和登录程序的支持。

# asp.net - 如何设置输入框最大长度属性

> ID：12969273
> 
> 赞同：0
> 
> 时间：2012-10-19T07:22:15.993
> 
> 标签：asp.net

我想添加一个带有`max-length`属性的输入框，但是当我将它的最大长度属性设置为 500 并在输入框中输入最大文本时，它不会占用最大文本。只有当我在输入框中输入限制文本时它才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:24:38.637

在多行文本框中，您不能设置最大长度。您必须通过 javascript 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:00:40.193

您可以设置客户端验证器：

```
<body>
<form id="form1" runat="server">
<div>

    <!-- text box whose length should be limited -->
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>

    <!-- validator to check this -->
    <asp:CustomValidator ID="CustomValidator1" runat="server" 
        ClientValidationFunction="CheckTextLength" ErrorMessage="Too long" />
    <br />
    <br />
    <asp:Button ID="Button1" runat="server" Text="Button" />

</div>
</form> 
```

然后，您可以编写一个名为 CheckTextLength 的 JavaScript 函数来检查文本框 TextBox1 的长度是否超过特定长度。就像是：

```
function CheckTextLength(source, arguments) {
        if (arguments.Value.length < 10) {
            arguments.IsValid = true;
        } else {
            arguments.IsValid = false;
        }
    } 
```

如果我更了解 JavaScript，我会给出确切的答案！但是，这种方法依赖于启用 JavaScript 的用户。

# oracle10g - oracle中的CLOB到varchar2的转换

> ID：12969274
> 
> 赞同：2
> 
> 时间：2012-10-19T07:22:17.593
> 
> 标签：oracle10g, type-conversion

我需要在 varchar2 中获取以下查询的结果以显示在视图中。我尝试使用 dbms_lob.substr 如下，但它给了我错误“ORA-22922：不存在的 LOB 值”。

> dbms_lob.substr((select wm_concat(tr_country) from NEXUS_TRAC_TRAVEL_PLAN_DTL where nexus_year = trdata.nexus_year and nexus_seq_no = trdata.nexus_seq_no),4000,1) ,

选择查询在 CLOB 中返回结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:40:43.057

`WM_CONCAT`返回 a `VARCHAR2`，而不是 a `CLOB`。因此，您可以删除对`DBMS_LOB.SUBSTR`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T07:40:45.170

如果您可以升级到 11.2 或更高版本，该`listagg(...)`功能可能会节省您的时间，如下所述：[https ://stackoverflow.com/a/39325808/1915920](https://stackoverflow.com/a/39325808/1915920)

# asp.net-mvc - 如何在 SQL Server 中为 Asp.Net MVC 4 应用程序或 WebRole 应用程序存储 asp.net 会话状态？

> ID：12969276
> 
> 赞同：5
> 
> 时间：2012-10-19T07:22:22.493
> 
> 标签：asp.net-mvc, session, session-state, azure-web-roles

如何在 SQL Server 中为 Asp.net mvc4 或 Windows Azure Web Role 应用程序存储会话状态？

**编辑**

为什么我会收到此错误？

> *HTTP 错误 500.23 - 内部服务器错误*
> *检测到不适用于集成托管管道模式的 ASP.NET 设置。*

我的`web.config`样子是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="webAssets" type="Telerik.Web.Mvc.Configuration.WebAssetConfigurationSection, Telerik.Web.Mvc" requirePermission="false" />
      <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
      <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <!--
    <connectionStrings>
        <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet2012620142020;Integrated Security=True" providerName="System.Data.SqlClient"/>
    </connectionStrings>
  -->
  <connectionStrings>
    <!--<add name="HotDeployDbContext" connectionString="data source=JOE-WANG\WQ;initial catalog=HotDeploy;user id=sa;password=wq187731" providerName="System.Data.SqlClient"/>-->
    <!--<add name="HotDeployDbContext" connectionString="data source=tcp:z1782cwqws.database.windows.net,1433;initial catalog=HotDeployDB4CloudService;user id=hotdeployadmin@z1782cwqws;password=accela.123;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" providerName="System.Data.SqlClient" />-->
    <add name="HotDeployDbContext" connectionString="data source=tcp:xxxxxxxx.database.windows.net,1433;initial catalog=xxxxx;user idxxxxx@xxxx;password=dddd.123;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="true" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />

  </appSettings>
  <system.web>
    <customErrors mode="Off" />
    <httpRuntime executionTimeout="14400" maxRequestLength="716800" />
    <compilation targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
        <add namespace="Telerik.Web.Mvc.UI" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <!--
    <sessionState mode="InProc" timeout="30" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </sessionState>
    <httpHandlers>
      <add verb="GET,HEAD" path="asset.axd" validate="false" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </httpHandlers>-->
    <!--before I added sessionState element . everything is fine.-->
    <sessionState mode="SQLServer" cookieless="true" 
    sqlConnectionString="data source=10.50.70.81; userid=sa; password=wq187731"
    timeout="300" 
    sqlCommandTimeout="10" />
  </system.web>
</configuration>
  </system.web>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="3000000000" />
      </requestFiltering>
    </security>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <directoryBrowse enabled="true" />
    <handlers>
      <remove name="asset" />
      <add name="asset" preCondition="integratedMode" verb="GET,HEAD" path="asset.axd" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.7.0.0" newVersion="1.7.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>

</configuration> 
```

如果我将应用程序池更改为经典模式。我在下面得到 IIS 错误页面..

> *HTTP 错误 403.14 - 禁止*
> *Web 服务器配置为不列出此目录的内容。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:25:16.483

会话状态提供程序在您的 web.config 中使用[sessionState](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)元素进行配置。对于 SQL 服务器，您设置`mode`并`SQLServer`配置连接字符串。对于 Azure，您可以查看以下涵盖不同选项的[答案。](https://stackoverflow.com/questions/4937544/asp-net-session-state-provider-in-azure/4938023#4938023)

# c# - 我正在使用应用程序将数据从 Excel 表导入 SQL Server 以存储在表中

> ID：12969281
> 
> 赞同：0
> 
> 时间：2012-10-19T07:22:33.570
> 
> 标签：c#, asp.net, sql, excel

我有一张`Excel`表，里面有大量的数据，所以需要将这些数据`SQL server`直接写在表中。我在谷歌搜索但我没有找到适合我要求的解决方案。

My`Excel`按行包含数据，我的意思是数据不是连续提供的。在每个表格结束后写下子标题和有关表格描述的其他一些信息。

希望大家能理解我的要求。请任何人对此问题有想法，或解决的替代解决方案。必须将此excel数据存储到`SQL server`表中。

这里的数据是作为行的列和作为列的行。那么在这种情况下如何阅读。

```
firstname      vijay      vikram     vikek      varun

lastame        kumar      rathod      goshal    kandari

mobile         45425      456546      54656     454615 
```

就像上面我在`excel`表格中的数据一样，如何捕获这种数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:16:07.560

如果您想直接将数据插入到 db 中，没有前端功能，那么您可以使用 SSIS 包或 SQL Server 中可用的导入功能来完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:12:50.750

我尝试将数据从 excel 导入 sql server 表。该过程在sql server中右键单击特定数据库，然后在任务选项卡下选择导入数据选项，然后选择源excel文件和目标表。它对我来说很好。

谢谢文卡特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:26:29.267

您是否尝试过使用 excel 互操作。使用互操作，您甚至可以读取特定的单元格。您可以通过指定范围来读取值并构建数据表或列表。

这些链接可能会有所帮助

[http://sandeep-aparajit.blogspot.in/2008/08/how-to-read-excel-in-c.html](http://sandeep-aparajit.blogspot.in/2008/08/how-to-read-excel-in-c.html)

[C#：使用 Excel.interop 获取单元格的值](https://stackoverflow.com/questions/5714724/c-getting-a-cells-value-with-excel-interop)

# java - JAX-RS 应用程序的初始化

> ID：12969285
> 
> 赞同：7
> 
> 时间：2012-10-19T07:22:48.293
> 
> 标签：java, rest, jax-rs

我有一个用 JAX-RS 实现的 REST 服务。Web 服务旨在用于测试目的。我的应用程序有一个`HashMap`，它管理我要检索的对象。当服务启动时如何初始化它`HashMap`以便`HashMap`有一些我可以检索的对象？我试图`HashMap`在构造函数中添加一些对象，但是在`HashMap`服务启动时是空的。我使用 JAX-RS 的 Jersey 实现并使用该`web.xml`文件配置我的资源。

我的`web.xml`文件有以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
<display-name>OPMSimulator</display-name>

<servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>com.ibm.websphere.jaxrs.server.IBMRestServlet</servlet-class>
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
    <param-value>com.ibm.opm.mobile.prototype.TestApplication</param-value>
    </init-param>
        <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>
</web-app> 
```

而我的资源类有以下内容：

```
public class Test {

    private static HashMap<Integer, Database> databases;

    @GET
    @Produces(MediaType.TEXT_XML)
    @Path("/database/{id}")
    public String database(@PathParam("id")String id) {
        Database database = databases.get(Integer.parseInt(id));
        return XMLGenerator.getXML(database);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T07:31:20.427

在你的 servlet 的构造函数中应该可以工作（它总是在调用`doGet`and之前调用`doPost`），但否则你可以注册一个监听器来初始化你所有的东西：

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;

@WebListener
public class Manager implements ServletContextListener {

    public void contextInitialized(ServletContextEvent event) {
    }

    public void contextDestroyed(ServletContextEvent event) {
    }

} 
```

如果您还没有启动`Servlet 3.0`并且无法升级，因此无法使用`@WebListener`注释，那么您需要手动注册它，`/WEB-INF/web.xml`如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee">
 <display-name>projectName</display-name>
 <listener>
     <listener-class>Manager</listener-class>
  </listener>
  ...
</web-app> 
```

# c# - 以编程方式在显卡中启用立体 3D

> ID：12969290
> 
> 赞同：1
> 
> 时间：2012-10-19T07:23:02.240
> 
> 标签：c#, opengl, xna, stereo-3d

我们有一台 NVIDIA Quadro 5000，想在我们的 C# 程序开始时在显卡中设置以下设置，以便屏幕自动检测 3D 应用程序。

需要设置以下设置：

*   立体设置：启用立体 3D
*   立体声显示模式：Generic Active Stereo
*   启用立体声：开
*   垂直同步：开

这可能吗，甚至可能使用 XNA？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:21:19.493

前段时间我遇到了同样的问题，发现你可以使用 Nvidia 提供的名为 NVAPI 的 API。请看这个话题： [如何防止英伟达的 3D Vision 启动？（如何从 .NET 调用 NVAPI）](https://stackoverflow.com/questions/11956252/how-do-you-prevent-nvidias-3d-vision-from-kicking-in-how-to-call-nvapi-from)

# ruby-on-rails-3 - 我不想要任何特定角色。我想通过复选框从 GUI 为任何用户分配权限。这样该用户就可以执行他拥有的任何权限

> ID：12969293
> 
> 赞同：0
> 
> 时间：2012-10-19T07:23:16.483
> 
> 标签：ruby-on-rails-3, devise, cancan

我只想要一个应用程序，通过它我可以通过复选框为用户动态分配角色。任何答案将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:07:13.917

瑞恩·贝茨（Ryan Bates）有这颗宝石“康康舞”。

[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

它也很好地与 Devise 集成以进行身份​​验证。

阅读此 2 部分教程。

[http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)

```
class Ability
  include CanCan::Ability
  def initialize(user)
if user.admin?
  can :manage, :all
else
  user.permissions.each do |permission|
    can permission.action_name.to_sym, permission.object_type.constantize # Getting the class name
  end
end
end
end 
```

这现在将为用户动态创建权限。这有帮助吗？

# c# - 带有自动完成框的文本框中的项目化（例如，yahoo、hotmail 电子邮件、TO 字段） ASP.NET + jQuery

> ID：12969300
> 
> 赞同：1
> 
> 时间：2012-10-19T07:23:47.073
> 
> 标签：c#, jquery, asp.net, jquery-ui, tags

我想在文本框中创建 Itemization 以获取带有 id 的电子邮件名称，例如 hotmail 和 yahoo 到字段

![在此处输入图像描述](../Images/4cd0f288d36cd60c46fcaf20c0051207.png)

我知道如何使用 jQuery 自动完成框，唯一的问题是如何在文本框中获取 Itemization，例如带有“x”的蓝色矩形的“MAYA”。从自动完成文本框中选择一项后，我想从 c# 代码隐藏中访问名称和 ID。

# jquery - jquery datatable jeditable，编辑字段重置分页

> ID：12969301
> 
> 赞同：1
> 
> 时间：2012-10-19T07:24:00.527
> 
> 标签：jquery, datatables, jeditable

我正在使用带有 jeditable 插件的 jquery 数据表。这些是我的数据表的选项

```
options = {
        "bServerSide" : true,
        "sAjaxSource" : "/javaServlet",
        "bProcessing" : true,
        "sPaginationType" : "full_numbers",
        "bJQueryUI" : true
    }; 
```

和我的可编辑列选项

```
 options = {
        placeholder : '',
        fnOnCellUpdated : function(sStatus, sValue,
                settings) {
            recordUpdated();
        }
}; 
```

问题是，例如，当我在第 4 页中编辑一个值时，数据表会更新并重新加载并将我送回第一页。

检查网络时，更新完成后再次调用“javaServlet”

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:12:44.790

我在[这里](http://datatables.net/forums/discussion/4470/pagination-is-reset-when-using-a-jeditable/p1)找到的解决方案（由[fbatt](http://datatables.net/forums/profile/18642/fabatt)和[allan 提供](http://datatables.net/forums/profile/1/allan)）：

“在 jquery.dataTables.editable.js 文件中，您可以`fnUpdate`在函数中找到命令`_fnApplyEditable`。添加一个 false 参数并停用对`_fnSetDisplayStart();`“的调用

# javascript - 测量方法的执行时间

> ID：12969302
> 
> 赞同：1
> 
> 时间：2012-10-19T07:24:02.867
> 
> 标签：javascript, jquery

假设我们有这个：

```
function myMethod1() {
    ...
} 
```

稍后在代码中：

```
myMethod1();
alert('myMethod1() was executed!'); 
```

我需要为警报设置超时，以便在 myMethod1() 执行后调用它。但是我怎么知道 setTimeout 函数的第二个参数的值呢？如何测量 myMethod1() 执行所需的时间？

MyMethod1() 有一个异步 ajax 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:29:41.070

如果您的方法执行异步任务，通常会像这样传递回调函数：

```
function myMethod(cb)
{
    // some code, such as $.ajax
    $.ajax({
         url: 'example.com',
         complete: function() {
             // we're done, notify callback
             cb();
         }
    });
} 
```

然后，`cb`在执行时像这样传入：

```
myMethod(function() {
    alert('method is done');
});
alert('method returned, but is still doing stuff in the background'); 
```

这是异步设计的口头禅；每个在后台执行任务的方法都会有某种方式通知回调函数其完成。

* * *

但是，如果该方法是同步的，您可以`cb()`在函数体的末尾调用，但保留您所拥有的会容易得多：

```
myMethod();
alert('method is done'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:26:59.727

你不需要。按照您设置的方式，完成**后将**`alert`始终触发。 **`myMethod1()`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:33:37.967

您可以使用时间戳，精确到毫秒。

您将需要 2 个变量，一个用于保存开始时间，一个用于结束时间。并设置那些你想要计算的变量。所以

///下面的编辑版本使其成为全球性的..

把它放在你的 js 代码的顶部：

```
var ts_start;
var ts_stop; 
```

把它放在你想开始计算时间的地方：

```
ts_start =new Date().getTime(); 
```

把它放在你想停止计算时间的地方：

```
ts_stop =new Date().getTime(); 
```

您可以通过在它们之间设置差异来提醒毫秒。

```
alert(ts_stop-ts_start); 
```

或者把它推到一个变量中......**

# android - 动态添加 CheckBox 时遇到困难

> ID：12969303
> 
> 赞同：0
> 
> 时间：2012-10-19T07:24:11.270
> 
> 标签：android, checkbox

我想在下面的代码中动态创建复选框。复选框显示得很好，但它没有显示通过 setText() 添加的与之关联的文本。这是我调用该方法的地方：

```
ArrayList<String> FilesInFolder = GetFiles(Environment.getExternalStorageDirectory()+File.separator+"Naseeb"
,getApplicationContext()); 
```

这是代码：

```
public static ArrayList<String> GetFiles(String DirectoryPath,Context context)
    {
        try
        {
            MyFiles = new ArrayList<String>();
            File f = new File(DirectoryPath);

            boolean checker = SdCardManager.CheckIsFileExists(f);
            if(!checker)
            {
                Toast.makeText(context,"there is some problem in creating File f in GetFiles() method in " +
                        "ShowTheFolderrsInSdCard.java"
                        ,Toast.LENGTH_SHORT).show();    
            }
            Toast.makeText(context,f.getAbsolutePath(),Toast.LENGTH_SHORT).show();

            File[] files = f.listFiles();
            if (files.length == 0)
                return null;
            else {
                for (int i=0; i<files.length; i++)
                {
                    CheckBox cbi = new CheckBox(context);
                //  cbi.setText(files[i].getName());
                    cbi.setText("hello");
                    ll.addView(cbi);
                }
            }
        }
        catch(Exception e)
        {
            System.out.println("");
        }
        return MyFiles;
    } 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:30:24.370

设置背景颜色如

```
cbi.setBackgroundColor(Color.BLACK); 
```

请参阅以下链接以动态添加视图。

[以编程方式添加视图](http://www.mysamplecode.com/2011/10/android-programmatically-generate.html)

# jquery - Facebook 与 phonegap 2.1.0 连接给出初始化错误

> ID：12969304
> 
> 赞同：0
> 
> 时间：2012-10-19T07:24:15.910
> 
> 标签：jquery, facebook, facebook-graph-api, cordova

我下面的代码在 eclipse android 模拟器上运行良好。[但是，当我在https://build.phonegap.com/](https://build.phonegap.com/)上使用 phonegap build 构建一个 android apk并在我难以置信的 2 上打开它时，我收到这个弹出错误“cordova facebook connect plugin fail on init！”

这是我的电话间隙应用程序。你可以下载它。[https://build.phonegap.com/apps/211586/share](https://build.phonegap.com/apps/211586/share)

我在 git 存储库中的代码在这里

[https://bitbucket.org/sunmeet/phonegab2.0_fbapi](https://bitbucket.org/sunmeet/phonegab2.0_fbapi)

此代码基于davejohnson/phonegap-plugin-facebook-connect上的[https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook](https://github.com/davejohnson/phonegap-plugin-facebook-connect/tree/master/example/HackBook)上的 hackbook 示例，并使用 phonegap 2.1.0 运行. 我按照教程中的所有步骤进行操作。

我该如何解决。

# java - 使用 hibernate 的 session.connection() 运行原生 sql 的任何问题

> ID：12969308
> 
> 赞同：1
> 
> 时间：2012-10-19T07:24:26.420
> 
> 标签：java, hibernate, jakarta-ee, jdbc

在我的项目中，他们以下面提到的方式使用 Hibernate 的会话，然后将实体对象保存在**事务**中。

```
Session session = HibernateUtil.getCurrentSession();
session.beginTransaction();

Employee employee = new Employee() ;

employee.setName("someName") ;
employee.setEmailId ("someId")
employee.setID (100000) ;

session.saveOrUpdate(employee) ;

session.getTransaction().commit(); 
```

现在，我决定运行原生 SQL 的一些功能。下面是我用来运行本机 sql 的方式。我想在事务中运行查询，所以我决定按以下方式编写代码

```
String query = "select name from master_employee where id=?"

Session session = HibernateUtil.getCurrentSession();
session.beginTransaction();

Connection connection = session.connection();
PreparedStatement psStmt = connection.prepareStatement(query);
psStmt.setInt(1,id) ;

ResultSet resultSet = psStmt.executeQuery();
// here i will take data from this result set
psStmt.close();
resultSet.close() ;

// I am not closing the connection object since am taking it from hibernate session
// rather i commit hibernate's transaction
session.getTransaction().commit(); 
```

这是正确的方法吗？？交易是否仍会被管理？？无法将会话中的连接对象管理到事务中？？？？

请问这种方式使用有没有问题？？？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T07:37:20.390

是的，这里没有问题。

但是，使用以下命令运行本机查询会容易得多`Session.createSQLQuery()`：

```
Session session = HibernateUtil.getCurrentSession(); 
session.beginTransaction(); 

String name = (String) session
    .createSQLQuery("select name from master_employee where id = ?")
    .setInteger(1, id)
    .uniqueResult();

session.getTransaction().commit(); 
```

**也可以看看：**

*   [第 18 章原生 SQL](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/querysql.html)

# jenkins - 我在 jenkins 中遇到 permgen 大小错误如何增加

> ID：12969312
> 
> 赞同：3
> 
> 时间：2012-10-19T07:24:39.530
> 
> 标签：jenkins

我在使用 jenkins 运行构建时得到这些错误。任何人都可以知道这个错误：线程“通道阅读器线程：通道”中的异常java.lang.outofmemoryerror：*permgenspace* 以及如何增加jenkins中的permgen空间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:04:35.100

您应该详细说明您的错误报告。

无论如何，这是一种内存不足的问题。尝试[此处](http://wiki.hudson-ci.org/display/HUDSON/I%27m+getting+OutOfMemoryError)描述的步骤。

我正在进行一个疯狂的猜测， In `Manage Jenkins`> `Configure System`。有一个选项叫做， `Global MAVEN_OPTS`Under `Maven Project Configuration`section。在那里尝试设置

`MaxPermSize=the_size_you_need`

例如：`MaxPermSize=128m`

# c# - DataReader 中的倍数表

> ID：12969318
> 
> 赞同：53
> 
> 时间：2012-10-19T07:25:07.323
> 
> 标签：c#, asp.net, .net, sqldatareader, datareader

我通常使用`DataSet`它，因为它非常灵活。最近我被分配了代码优化任务，为了减少对数据库的命中，我在一个过程中更改了两个查询。一个查询返回`count`，另一个返回`actual data`。也就是说，My`stored procedure`返回两个表。现在，我知道如何使用 读取两个表`DataSets`，但我需要使用 读取两个表`DataReader`。在搜索中，我找到了[This](http://forums.asp.net/p/708659/708659.aspx)。

我按照这篇文章编写了这样的代码：

```
dr = cmd.ExecuteReader();
while (dr.Read())
{

}
if (dr.NextResult()) // this line throws exception
{
   while (dr.Read())
{ 
```

但是我在 dt.NextResult 遇到了一个异常。例外是：

```
Invalid attempt to call NextResult when reader is closed. 
```

我也搜索了上面的错误，但仍然无法解决问题。任何帮助都感激不尽。我需要使用 读取多个表`datareader`，这可能吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-19T07:27:12.983

试试这个，因为一旦任务结束，这将关闭连接、数据读取器和命令，这样就不会给数据读取器关闭异常

也请像这样检查`if(reader.NextResult())`以检查是否有下一个结果，

```
using (SqlConnection connection = new SqlConnection("connection string here"))
{
    using (SqlCommand command = new SqlCommand
           ("SELECT Column1 FROM Table1; SELECT Column2 FROM Table2", connection))
    {
        connection.Open(); 
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                MessageBox.Show(reader.GetString(0), "Table1.Column1");
            }

            if(reader.NextResult())
            {
               while (reader.Read())
              {
                MessageBox.Show(reader.GetString(0), "Table2.Column2");
              }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-19T07:39:19.837

我试图重现这个问题（也因为我之前没有在阅读器中使用过多个表）。但它按预期工作，因此我假设您已经省略了相关代码。

这是我的测试代码：

```
using (var con = new SqlConnection(Properties.Settings.Default.ConnectionString))
{
    using (var cmd = new SqlCommand("SELECT TOP 10 * FROM tabData; SELECT TOP 10 * FROM tabDataDetail;", con))
    {
        int rowCount = 0;
        con.Open();
        using (IDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                String object1 = String.Format("Object 1 in Row {0}: '{1}'", ++rowCount, rdr[0]);
            }
            if (rdr.NextResult())
            {
                rowCount = 0;
                while (rdr.Read())
                {
                    String object1 = String.Format("Object 1 in Row {0}: '{1}'", ++rowCount, rdr[0]);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-26T17:10:15.227

我建立在 Pranay Rana 的答案上，因为我喜欢让它尽可能小。

```
string rslt = "";
using (SqlDataReader dr = cmd.ExecuteReader())
{
    do
    {
        while (dr.Read())
        {
            rslt += $"ReqID: {dr["REQ_NR"]}, Shpr: {dr["SHPR_NR"]}, MultiLoc: {dr["MULTI_LOC"]}\r\n";
        }
    } while (dr.NextResult());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-24T16:25:29.397

这个问题很老，但我发现答案不正确。这是我的做法：

```
 List<DataTable> dataTables = new();
        using IDataReader dataReader = command.ExecuteReader();
        do
        {
            DataTable dataTable = new();
            dataTable.Load(dataReader);
            dataTables.Add(dataTable);
        }
        while (!dataReader.IsClosed); 
```

# android - 是否有可能以编程方式在 android 中打开 GPS 提供程序？

> ID：12969321
> 
> 赞同：0
> 
> 时间：2012-10-19T07:25:16.740
> 
> 标签：android

由于电池耗尽，我想以编程方式打开/关闭提供程序，即后台模式。以前我做过提供者的设置活动。但我觉得它对用户不友好。

请帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:28:45.357

您无法在系统级别控制它。只有用户被允许这样做。但是您可以使用以下方式停止侦听 GPS 事件：

```
locationManager.removeUpdates(myLocationListener); 
locationManager = null; 
```

您还可以启动设置屏幕，以便用户可以自己使用：

```
if(!LocationManager.isProviderEnabled(android.location.LocationManager.GPS_PROVIDER ))
{
    Intent myIntent = new Intent( Settings.ACTION_LOCATION_SOURCE_SETTINGS );
    startActivity(myIntent);
} 
```

# android - 如何在Activity被销毁后检查由Activity产生的线程是否还活着

> ID：12969324
> 
> 赞同：1
> 
> 时间：2012-10-19T07:25:27.577
> 
> 标签：android

我的应用程序的第一个 Activity 生成一个线程来执行一些 IO 操作。如果在那一刻用户点击后退按钮，活动被破坏（我可以看到 onDestroy 方法被调用）但线程仍在运行（我可以从日志消息中看到它）。

如果用户随后返回应用程序，则再次创建 Activity，此时我想检查 Thread 是否仍在运行，在这种情况下，不要启动新的。

实现这一目标的最佳方法是什么？

否则：这是糟糕的设计吗？在调用 onDestroy 时确保 Activity 启动的所有线程都被杀死会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:36:37.450

离开活动时我会杀死线程（除非它需要运行，然后我会使用服务来做到这一点）

要检查您可以使用的线程

```
thread.getState(); 
```

例子：

```
if (thread.getState() == Thread.State.NEW) 
thread.start();
else
{
    //Do something else here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:01:05.800

您可以在 onDestroy 上检查您的线程是否处于活动状态，如果它是 aLive 可以在离开活动时中断线程

```
public void onDestroy() {
try{
            if(myThread!=null & myThread.isAlive()){
                myThread.interrupt();

        }catch (Exception e) {
            e.printStackTrace();
        }
} 
```

# joomla2.5 - 如何在 Joomla 的模型中自动包含我的帮助文件？

> ID：12969330
> 
> 赞同：0
> 
> 时间：2012-10-19T07:26:00.137
> 
> 标签：joomla2.5

我想知道如何将助手自动包含到组件的所有模型文件中，我只需要从模型文件中的助手类创建对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:00:30.723

避免使用`require_once`, 并使用正确的 Joomla 方法来包含辅助类

```
JLoader::register('ClassName', 'path_to_class'); 
```

将此代码段放在组件入口控制器的开头。Joomla 将仅在需要时自动加载该类。

通过使用常规 PHP `require_once`，您将减慢代码速度，因为文件会立即加载到内存中，即使不需要它也是如此。

# regex - Perl regex match longest sequence

> ID：12969341
> 
> 赞同：0
> 
> 时间：2012-10-19T07:26:29.020
> 
> 标签：regex, perl

I have a string like below

```
atom:link[@me="samiron" and @test1="t1" and @test2="t2"] 
```

and I need a regular expression which will generate the following back references

```
#I would prefer to have
$1 = @test1
$2 = t1
$3 = @test2
$4 = t2

#Or at least. I will break these up in parts later on.
$1 = @test1="t1"
$2 = @test2="t2" 
```

I've tried something like `( and [@\w]+=["\w]+)*\]` which returns only last match `and @test2="t2"`. Completely out of ideas. Any help?

**Edit:** actually the number of `@test1="t1"` pattern is not fixed. And the regex must fit the situation. Thnx @Pietzcker.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:31:26.087

You can do it like this:

```
my $text = 'atom:link[@me="samiron" and @test1="t1" and @test2="t2"]';
my @results;
while ($text =~ m/and (@\w+)="(\w+)"/g) {
  push @results, $1, $2;
}
print Dumper \@results; 
```

Result:

```
$VAR1 = [
          '@me',
          'samiron',
          '@test1',
          't1',
          '@test2',
          't2'
        ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:34:53.860

This will give you hash which maps "@test1" => "t1" and so on:

```
my %matches = ($str =~ /and (\@\w+)="(\w+)"/g); 
```

Explanation: /g global match will give you an array of matches like "@test1", "t1", "@test2", "t2", ...

When hash %matches is assigned to this array, perl will automatically convert array to hash by treating it as key-value pairs. As a result, hash %matches will contain what are you looking for in nice hash format.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:33:49.880

When you use a repeating capturing group, each new match will overwrite any previous match.

So you can only do a "find all" with a regex like

```
@result = $subject =~ m/(?<= and )([@\w]+)=(["\w]+)(?= and |\])/g; 
```

to get an array of all matches.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T10:34:41.113

This works for me:

```
@result = $s =~ /(@(?!me).*?)="(.*?)"/g;
foreach (@result){
    print "$_\n";
} 
```

The output is:

```
@test1
t1
@test2
t2 
```

# mongodb - Trello 如何在 MongoDB 中存储数据？（每板收集？）

> ID：12969344
> 
> 赞同：14
> 
> 时间：2012-10-19T07:26:35.143
> 
> 标签：mongodb, database-design, database-schema, trello

Trello 如何在 MongoDB 中存储他们的数据（卡片）？

我读到（[Trello 如何如此迅速地展示历史？](https://stackoverflow.com/questions/10505431/how-does-trello-show-history-so-quickly)）他们的 Actions 集合是最大的集合。因此，我假设他们不会将所有卡片存储在一个巨大的集合中。

唯一的其他合乎逻辑的解决方案似乎是每个板或每个用户的集合。但是他们有很多用户，我读到（[http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections](http://www.mongodb.org/display/DOCS/Using+a+Large+Number+of+Collections)）收藏的数量有限制，有些人建议不要使用大量的集合。

我希望 Trello 团队的某个人会对此表示赞同，并且我希望也能从一般社区中获得一些解决此类问题的想法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T13:17:45.590

Trello 将所有卡片存储在一个集合中。集合在卡的板 ID 上分片。

# css - 使用 Sprites 作为链接列表上的图标

> ID：12969345
> 
> 赞同：1
> 
> 时间：2012-10-19T07:26:36.417
> 
> 标签：css, css-sprites

我有一个带有常用标记的链接列表

```
 <ul>
        <li>
            <a href="">a link</a>
        </li>
        <li>
            <a href="">a really long link that wraps
                over two or more lines
            </a>
        </li>
        <li>
            <a href="">a link</a>
        </li>
        <li>
            <a href="">a link</a>
        </li>
    </ul> 
```

我想使用精灵在链接的左侧显示图标并将链接文本保持在右侧：

```
ICON    some text that wraps and
        some more text that wraps 
```

我想在不添加更多标记的情况下执行此操作。而且我必须支持 IE8 - 所以我认为这意味着我不能使用背景大小

我尝试使用伪元素 - 将背景添加到伪元素。这不起作用，因为实际内容不在它自己的元素中 - 所以似乎没有办法让它不包裹在图标下。

我错过了什么吗？有没有办法使这项工作以良好的语义方式工作？还是我必须添加一个跨度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:00:57.590

看看这个：

```
li {
    margin-left: 25px; // |n| px must be equal to li a:before margin-left |n| px
    float: left;
    clear: left;
}

li a:before {
    content: ' ';
    margin-left: -25px; // here ...
    width: 25px;
    height: 50px;
    float:left;
    background: url('http://www.google.com/images/srpr/logo3w.png');
} 
```

小提琴：http: [//jsfiddle.net/vhSG6/6/](http://jsfiddle.net/vhSG6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:33:48.553

```
​li a:before {
  content: '-';
  color: transparent;
  width: 20px;
  margin-right: 8px;
  display: inline-block;
  background-image: url('http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5')
}​ 
```

[http://jsfiddle.net/vhSG6/](http://jsfiddle.net/vhSG6/)

# ios - 改进 UITableView 滚动

> ID：12969346
> 
> 赞同：0
> 
> 时间：2012-10-19T07:26:40.240
> 
> 标签：ios, performance, uitableview

我遇到了 UITableView 滚动的一些问题。我知道有很多这个问题和一些解决方案。但是从技术角度来看（如何做到这一点）我找不到解决方案。

好吧，在我的情况下，由于其中的图像，滚动不是那么流畅。从文件加载它需要很多时间。我还创建了自定义 UITableViewCell 并使用 XiB。

这些图像使用的不是 1 次而是多次，最好将它们保存在内存中并从文件中仅加载一次。但是在我的情况下，可能会有很多图像，而应用程序没有那么多内存来保存它们。也许还有其他方法可以加载这些图像？

图像也是PNG，也许我应该将类型更改为JPG？

如果有人能提供其他解决方案来改进这种滚动，我将不胜感激。

谢谢。

# database - Joomla！2.5 使用来自另一个数据库的登录数据

> ID：12969351
> 
> 赞同：1
> 
> 时间：2012-10-19T07:26:53.420
> 
> 标签：database, login, joomla

我有一个很难的问题。我希望 joomla 登录不使用自己的数据库作为用户/密码，但我想将我的数据库用户与我的表字段、密码等一起使用。

我不知道从哪里开始，我想我可以编辑数据库请求以登录我的数据库或创建一个小脚本来自动将用户添加到 joomla 数据库中。

我试图查看 components/com_users/views/login/tmpl/default_login.php 但似乎什么都没有。

有人可以帮我弄清楚要改变什么吗？

也许简单的事情是将我的数据库用户导入数据库用户 joomla，是否有任何插件或其他您知道的东西？

ps 我使用基于Gantry 框架的Clarion 主题，Joomla！2.5.6 稳定版，PHP 5.2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:52:55.453

我建议您找到或创建一个为您执行此操作的身份验证插件。Joomla 可以支持多种身份验证系统。

看看[为 Joomla 1.5 创建一个身份验证插件](http://docs.joomla.org/Creating_an_Authentication_Plugin_for_Joomla_1.5)。那里描述了基本思想。

# jquery - 拦截谷歌搜索的脚本

> ID：12969357
> 
> 赞同：3
> 
> 时间：2012-10-19T07:27:14.663
> 
> 标签：jquery, greasemonkey, tampermonkey

很多时候，我搜索一个我真的只想直接启动到该网站的关键字。

例如，我将在 google 搜索栏中输入“Stack Overflow”，然后单击第一个链接。相反，我想直接访问 stackoverflow.com。显然，地址栏中有书签和打字，但出于习惯和速度的原因，我做谷歌的事情。（通常需要大约 1-2 秒，而不是找到书签或从地址栏下拉菜单中选择）。

是否有一个greasemonkey/tampermonkey脚本可以做到这一点，或者任何人都知道一个简单的方法来做到这一点？我想基本上只是将精确的搜索字符串（不区分大小写）映射到 url。如果我输入诸如“堆栈溢出油脂猴”之类的其他内容，我想要原始搜索。

“stackoverflow”或“stackoverflow”=> stackoverflow.com、“microsoft”=> microsoft.com，或者我想要的任何映射（通过编辑脚本来添加它们）。

这应该是一个相对容易的任务。我想肯定有一些东西可以做到这一点，或者可以修改来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:18:43.970

我已经做了一些，这应该可以在搜索框上按 ENTER 或单击搜索按钮：

```
// ==UserScript==
// @name       Google redirects
// @namespace  http://googleredirects.com/
// @version    0.1
// @description  Make redirects based on google searches
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// @match      http://www.google.com/
// @copyright  2012+, cowboy_kangaroo
// ==/UserScript==

(function () {
    $(document).ready(function(){
        var mapping = [ "stackoverflow", "http://stackoverflow.com",
                       "reddit", "http://www.reddit.com",
                       "slashdot", "http://slashdot.org" ];
        $('input[name=q]').keydown(function(e) {
            if (e.keyCode == 13) {
                e.preventDefault();
                e.stopPropagation();
                v = $(this).val();
               for (i=0;i<mapping.length;i+=2) {
                   if (v == mapping[i]) {
                         window.location.href = mapping[i+1];
                   }
               }
            }
        });
        $("input[name='btnK']").click(function(e) {
            v = $('input[name=q]').val();
            for (i=0;i<mapping.length;i+=2) {
                if (v == mapping[i]) {
                     window.location.href = mapping[i+1];
                }
             }
        });
    });
})(); 
```

我只用 Tampermonkey 在 Chrome 上测试过它。如果您使用的是 google 特定国家/地区的网站，例如 www.google.co.uk 等，请务必调整 @match 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:07:09.543

我认为有一种更简单的方法，至少如果您的浏览器允许您编辑搜索链接：只需将“&btnG=”或“&btnK=”替换为“&btnI=”即可。

这应该模拟使用“我感觉很幸运”按钮进行的​​搜索。

# php - 如何在 yii 模块中添加脚本和样式表

> ID：12969358
> 
> 赞同：3
> 
> 时间：2012-10-19T07:27:23.660
> 
> 标签：php, yii

我是 yii 的新手。我刚刚在yii中创建了一个模块文件结构如下

```
 -yii
  -protected
     -modules
        -admin
           -controller
           -model
           -view
               -layout
                    -main.php
           -css
               -style.css
           -images
               -logo.jpg 
```

我能够将布局设置为这样

```
'modules'=>array(
    // uncomment the following to enable the Gii tool

           'admin'=>array(
                 'layoutPath' => 'protected/modules/admin/views/layouts',  ; 
```

)

现在布局是从管理模块呈现的问题是我无法使用加载样式表

```
<link rel="stylesheet" type="text/css" href="<?php echo Yii::app()->request->baseUrl; ?>/protected/modules/admin/css/reset.css"  media="all"> 
```

有人知道在 yii 中加载样式表的正确方法吗

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T13:42:04.060

受保护文件夹下的所有内容确实是受保护的，并且不可公开访问。

在您的情况下，您正在使用一个模块并且您的文件位于受保护的文件夹中，您需要“发布”它们以供公众访问。Yii 中发布内容的默认公共文件夹称为“资产”。并发布我们将使用[CAssetManager](http://www.yiiframework.com/doc/api/1.1/CAssetManager)。

首先创建一个文件夹，其中包含您需要公开访问的所有 css、js 和图像。随意命名它，但标准是它的“资产”，所以你的文件结构看起来像这样：

```
 -yii
  -protected
     -modules
        -admin
           -controller
           -model
           -view
               -layout
                    -main.php
           -assets
               -css
                   -style.css
               -js
               -images
                   -logo.jpg 
```

在您的模块中创建一个属性，该属性将存储已发布资产的公共 url，以及访问它的方法。

```
private $_assetsUrl;

public function getAssetsUrl()
{
    if ($this->_assetsUrl === null)
        $this->_assetsUrl = Yii::app()->getAssetManager()->publish(
            Yii::getPathOfAlias('admin.assets') );
    return $this->_assetsUrl;
} 
```

然后，您可以像这样访问您的资产：

```
<link rel="stylesheet"
         type="text/css"
         href="<?php echo $this->module->assetsUrl; ?>/css/main.css"/>
   ...
   <div id="logo">
   <?php echo CHtml::link(
                 CHtml::image($this->module->assetsUrl.'/images/logo.png'),
                 array('/xxii')); ?>
   </div> 
```

[进一步阅读](http://www.yiiframework.com/wiki/148/understanding-assets/)

# c++ - 如何在 C++ 编译时计算

> ID：12969361
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:27:28.483
> 
> 标签：c++

如何计算一些数学表达式，即找到 n 的阶乘；在 C++ 编译期间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:29:40.533

[这](http://en.wikipedia.org/wiki/Template_metaprogramming)是一篇关于 C++ 中模板元编程的 wiki 文章。

[这](http://en.wikipedia.org/wiki/Compile_time_function_execution)是另一篇关于编译时函数执行的 wiki 文章。

[这](https://stackoverflow.com/questions/4977715/calculating-and-printing-factorial-at-compile-time-in-c)是一个关于阶乘的 SO 问题。

让我们以编译时计算阶乘的 wiki 示例为例。

```
template <int N>
struct Factorial {
    enum { value = N * Factorial<N - 1>::value };
};

template <>
struct Factorial<0> {
    enum { value = 1 };
};

// Factorial<4>::value == 24
// Factorial<0>::value == 1
const int x = Factorial<4>::value; // == 24
const int y = Factorial<0>::value; // == 1 
```

由于所需的所有参数在编译时都是已知的（例如，它们在 中明确提及`Factorial<4>`），因此编译器能够生成所有需要的代码。之后，`value`结构的`Factorial<4>`24 将在以后使用，就像您自己硬编码一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T07:30:34.223

欢迎来到所谓的模板元编程。

[这个页面](http://en.wikipedia.org/wiki/Template_metaprogramming)描述了它是什么。它有一个具体的例子来计算编译时整数的阶乘。

# algorithm - 重做下Perl中如何打破无限循环（生成随机数）

> ID：12969364
> 
> 赞同：2
> 
> 时间：2012-10-19T07:27:37.403
> 
> 标签：algorithm, perl, loops

我打算通过以下步骤生成随机数：

1.  从文件中读取数据`(<DATA>)`
2.  生成与输入数据线一样多的随机数
3.  随机数不应*生成*两次，例如，如果在第 x 循环中生成的随机数在此之前已创建，则重新创建随机数。

这是我拥有的导致无限循环的代码。我的逻辑有什么问题，我该如何解决？

```
#!/usr/bin/perl -w
use strict;
my %chrsize = ('chr1' =>249250621);

# For example case I have created the
# repository where a value has been inserted.
my %done =("chr1    182881372" => 1);

while ( <DATA> ) {
 chomp;
 next if (/^\#/);

 my ($chr,$pos) = split(/\s+/,$_);
 # this number has been generated before
 # with this: int(rand($chrsize{$chr}));
 # hence have to create other than this one
 my $newst =182881372;

 my $newpos = $chr ."\t".$newst;

 # recreate random number
 for (0...10){
     if ( $done{$newpos} ) {

            # INFINITE LOOP
            $newst = int(rand($chrsize{$chr}));
            redo;
     }
 }

 $done{$newpos}=1;
print "$newpos\n";

}

__DATA__
# In reality there are 20M of such lines
# name  positions
chr1    157705682
chr1    19492676
chr1    169660680
chr1    226586538
chr1    182881372
chr1    11246753
chr1    69961084
chr1    180227256
chr1    141449512 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:16:08.600

你有几个错误：

1.  `$newst`你每次都在你的循环中设置，所以`$newpos`永远不要接受一个新的值。
2.  您的内部`for`循环没有意义，因为`$newpos`在再次检查条件之前您从未真正更改过。
3.  `redo;`正在处理内部循环。

这是一个完全避免的更正版本`redo`。

**更新：**我稍微编辑了算法以使其更简单。

```
 #!/usr/bin/perl -w
use strict;
my $chr1size = 249250621;

my %done;
my $newst;

while ( <DATA> ) {
    chomp;
    next if (/^\#/);
    my ($chr,$pos) = split(/\s+/,$_);

    my $newpos;
    #This will always run at least once
    do {
        $newst = int(rand($chr1size));
        $newpos = $chr ."\t".$newst;
    } while ( $done{$newpos} );

    $done{$newpos}=1;
    print "$newpos\n";
} 
```

**更新 2：**虽然上述算法可以工作，但它在 20,000,000 行上会变得非常慢。这是一种应该更快的替代方法（它生成的随机数有一种模式，但在大多数情况下可能没问题）。

```
#!/usr/bin/perl -w
use strict;
my $newst;

#make sure you have enough.  This is good if you have < 100,000,000 lines.
use List::Util qw/shuffle/;
my @rand_pieces = shuffle (0..10000);

my $pos1   = 0;
my $offset = 1;
while ( <DATA> ) {
    chomp;
    next if (/^\#/);
    my ($chr,$pos) = split(/\s+/,$_);

    $newst = $rand_pieces[$pos1] * 10000 + $rand_pieces[($pos1+$offset)%10000];
    my $newpos = $chr ."\t".$newst;

    $pos1++;
    if ($pos1 > $#rand_pieces) 
    {
        $pos1 = 0;
        $offset = ++$offset % 10000;
        if ($offset == 1) { die "Out of random numbers!"; } 
    }

    print "$newpos\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:38:04.243

像这样在你的循环中添加一个计数器：

```
my $counter = 0;
# recrate
for (0...10){
  if ( $done{$newpos} ) {
    # INFINITE LOOP
    $newst = int(rand($chr1size));
    redo if ++$counter < 100; # Safety counter
    # It will continue here if the above doesn't match and run out
    # eventually
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:57:58.867

要摆脱无限循环，请将**redo**替换为**next**。

[http://www.tizag.com/perlT/perlwhile.php](http://www.tizag.com/perlT/perlwhile.php)：“重做将再次执行相同的迭代。”

然后你可能需要修复其余的逻辑；）。

# android - 捕获双击主页按钮

> ID：12969366
> 
> 赞同：1
> 
> 时间：2012-10-19T07:27:53.457
> 
> 标签：android, android-homebutton

我有三星 Galaxy S2，在这里我可以双击主页按钮来运行应用程序（即语音通话）

我想知道是否可以创建一个应用程序（广播或带有意图过滤器的活动）来捕获双击主页按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:38:50.133

我不确定是否有捕获双击主页按钮的默认功能，但你可以试试这个

1.  捕获主页按钮单击
2.  在第一次主页按钮单击时启动计时器一段固定时间（比如 2 秒）
3.  等待时间段，并监听下一个主页按钮点击
4.  如果在给定时间段内观察到第二次点击，请执行双击功能，否则坚持主页按钮的默认功能

# nginx - 关于 nginx 上游模块中的 ip_hash

> ID：12969372
> 
> 赞同：9
> 
> 时间：2012-10-19T07:28:19.900
> 
> 标签：nginx, load-balancing

我想用 nginx 替换磅作为负载均衡器，到目前为止所有测试看起来都很好。我将做一个典型的上游配置，如下所示：

```
upstream backend {
  ip_hash;
  server   backend1.example.com;
  server   backend2.example.com;
  server   backend3.example.com;
} 
```

现在有 2 个问题悬而未决：

1.  这种粘性会持续多久？是否有要在某处定义的 ttl？
2.  粘性是否在 nginx 的重新启动和/或重新加载后仍然存在？

我在 nginx wiki 中找不到答案。欢迎提供官方文档的链接。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T09:13:02.837

它基于客户端源 IP 地址哈希，只要您有相同的后端集，粘性就会持续存在。

[http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#ip_hash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T11:01:12.133

当您确实需要会话持久性时，它就会出现。场景就像用户应该根据先前的连接被引导到与应用程序需求相同的服务器。

*ip_hash = 键值对散列*[其中 key=**访问者的 ip** , value=**主机服务器**]

# c# - 如何在可移植类库中检索持久 wcf 服务的 instanceId？

> ID：12969373
> 
> 赞同：3
> 
> 时间：2012-10-19T07:28:20.807
> 
> 标签：c#, .net, wcf, portable-class-library

我尝试`WCF service`使用可移植的辅助类从持久化中获取 instanceId `.net assembly`。要检索 id，我需要调用：

```
IClientChannel.GetProperty<IContextManager>()... 
```

但**`IContextManager`不包含**在**可移植类库**中：如何在可移植类库中检索 instanceId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:47:53.963

尝试添加对 System.ServiceModel 的引用。那就是该接口所在的位置。

# javascript - 禁用文本框的文本颜色

> ID：12969375
> 
> 赞同：0
> 
> 时间：2012-10-19T07:28:28.630
> 
> 标签：javascript, asp.net, html

我有一个文本框，其中已启用的属性设置为 false（因为这是我不想让用户关注的总计数字），并且取决于字段中的值（无论是否为负）我设置文本颜色为红色。这是我的 javascript 的一部分，每当禁用的文本框总计的任何文本发生更改时都会调用它

```
if (float < 0) 
obj.style.color = "Red";
}
else {
obj.style.color = "Black";
} 
```

这在 Chrome 中完美运行，但在 IE 中颜色根本不会改变。我在网上查过这个，人们建议设置 Enabled="true" 和 ReadOnly="true"，但是当我这样做时，文本框可以集中在上面，所以它弄乱了我的 tabindex。我可以以某种方式将这些从我的 tabindex 中排除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:32:33.927

您可以使用 CSS 添加适当的样式。

```
if (float < 0) 
obj.CssClass = "Red";
}
else {
obj.CssClass = "Black";
} 
```

在您的 aspx 文件中为其添加样式

```
.Red{background-color: Red;}

.Black{background-color: Black;} 
```

使用 CSS，您可以完全控制客户端样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:32:04.330

您可以通过将其设置为`tabIndex`来解决此问题`-1`；

# iphone - 如何在 ipad 的 cocos2d 中平移（移动）图像？

> ID：12969379
> 
> 赞同：0
> 
> 时间：2012-10-19T07:28:55.473
> 
> 标签：iphone, cocos2d-iphone

你好。我是 cocos2d 的初学者。我想平移图像（不旋转）

![旋转地球](../Images/f410ca0706b44a40085ae9508e457f77.png).

请任何人建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:17:02.053

```
 UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)]; // calling a method **move**
        [panRecognizer setMinimumNumberOfTouches:1]; // set yourself
        [panRecognizer setMaximumNumberOfTouches:2]; // 
        [panRecognizer setDelegate:self];
        [yourImage addGestureRecognizer:panRecognizer];

/*
    CGFloat firstX;
    CGFloat firstY;
*/

   //---method move---//
 -(IBAction)move:(id)sender
        {
            yourImage.clipsToBounds = YES;
            [yourImage bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
            CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

            if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan)
            {

                firstX = [[sender view] center].x;
                firstY = [[sender view] center].y;
            }

            translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

            [[sender view] setCenter:translatedPoint];

            if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded)
            {

                CGFloat finalX = translatedPoint.x + (.20*[(UIPanGestureRecognizer*)sender velocityInView:self.view].x);
                CGFloat finalY = translatedPoint.y + (.20*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

                if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
                {

                    if(finalX < 0)
                    {

                        finalX = 0;
                    }

                    else if(finalX > 260)
                    {

                        finalX = 260;
                    }

                    if(finalY < 0)
                    {

                        finalY = 0;
                    }

                    else if(finalY > 416)
                    {

                        finalY = 416;
                    }
                }

                else
                {

                    if(finalX < 0)
                    {

                        finalX = 0;
                    }

                    else if(finalX > 416)
                    {

                        finalX = 260;
                    }

                    if(finalY < 0)
                    {

                        finalY = 0;
                    }

                    else if(finalY > 260)
                    {

                        finalY = 416;
                    }
                }

                [UIView beginAnimations:nil context:NULL];
                [UIView setAnimationDuration:.5];

                [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
                [[sender view] setCenter:CGPointMake(finalX, finalY)];
                [UIView commitAnimations];
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:04:34.360

我建议`UIPanGestureRecognizer`。[您可以在此处的 RayWenderlich 的文章](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)中找到有关如何执行此操作的精美教程。希望这可以帮助。

# c# - 更新项目目标 .NET 框架

> ID：12969380
> 
> 赞同：0
> 
> 时间：2012-10-19T07:28:56.347
> 
> 标签：c#, .net, project, target

我有一个解决方案，不同的项目，它们都使用 Target .NET Framework 3.5。如果将其中一个项目更新为以 .NET Framework 4 为目标，以便我可以使用 PLINQ，它会在任何方面造成问题吗？

如果是，我该如何避免它们，我应该注意什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:40:45.483

是的，您可以在同一个解决方案中为不同的项目提供不同的配置

解决方案只是让您可以轻松地将所有相关项目放在 Visual Studio 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:33:49.757

.NET Framework 4 使用不同的运行时，因此它可能确实会导致问题。3.5 使用运行时版本 2，并且为了能够使用为 2.0 运行时编译的程序集，您必须编辑主可执行文件的 app.config（必须是 4.0）并将其添加到`configuration`标签（或如果元素已经存在，则编辑它）：

```
 <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup> 
```

4.0 -> 2.0 引用应该以这种方式工作，但可能不是相反。

IMO 最好的解决方案是尽可能将它们全部升级到 4.0。当然，用户需要 .NET Framework 4。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:34:42.023

项目之间的引用可能会成为一个问题，如果可以保持一致，我建议升级所有项目。也看到这个类似的[问题](https://stackoverflow.com/questions/2838503/reference-3-5-assembly-from-4-0-winforms-phail)。

# java - 计算数据的位数。

> ID：12969383
> 
> 赞同：1
> 
> 时间：2012-10-19T07:29:02.037
> 
> 标签：java

实际上我正在研究基于 Java 的医疗保健应用程序。我的 Java 应用程序必须在蓝牙的帮助下与医疗保健传感器设备连接。这个传感器模块由其他人完成，我们使用DatagramPacket传输数据。即使我不知道他们发送给我的数据格式是什么。所以现在我想知道，我怎样才能找到传入的数据是 8 位数据还是 16 位数据。而且我想知道有多少位，意味着我想计算位。请有人帮助我。提前致谢。

# jms - 如何在 Websphere AS 中获取 MQTT 客户端 ID？

> ID：12969386
> 
> 赞同：3
> 
> 时间：2012-10-19T07:29:23.080
> 
> 标签：jms, websphere, ibm-mq, mqtt

我的应用程序通过 Websphere AS 上的 JMS 接收 MQTT 消息。MQTT 端点是一个 Websphere MQ。

有什么方法可以识别消息的发送者（发送设备，而不是 Websphere MQ ;-)）？我在 jms 消息头中找不到匹配的字段...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:41:30.257

创建 MQTT 通道时，可以选择使用 MQTT 客户端 ID 或用户名进行授权检查。如果频道被配置为使用 JAAS 并且选择了使用用户名的选项，我*相信*会`MQMD.UserID`继承用户名。我没有配置 JAAS 身份验证，但是稍后我会测试并更新它。

我能够测试使用 ClientID 进行授权的选项，它*不会*导致客户端 ID 出现在该`MQMD.UserID`字段中。

由于身份传播是一项常见要求，我建议提出[增强请求](http://ibm.co/IBMRFE)(RFE)，说明客户端 ID 或用户名应传播到`MQMD.UserID`，具体取决于通道设置。

# c++ - 是否可以将多态类存储在共享内存中？

> ID：12969391
> 
> 赞同：7
> 
> 时间：2012-10-19T07:29:43.997
> 
> 标签：c++, boost, shared-memory, boost-interprocess

假设我有课`Base`和`Derived : public Base`. 我使用 boost::interprocess 库构建了一个共享内存段。是否有可能有类似这样的代码：

```
Base* b = new Derived(); 
write(b); //one app writes
Base* b2 = read(b); //second app reads
//b equals b2 (bitwise, not the ptr location) 
```

我在这里看到的问题是，例如 Base 派生类所需的空间是未知的（那么要分配多少 shmem？）

**问**：如何在应用程序之间通过指针传递对象？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T07:37:01.000

只需阅读它的[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_region_object_limitations)

尤其是：

> 虚拟禁止
> 
> 虚表指针和虚表是在构造对象的进程的地址空间中，所以如果我们放置一个带有虚函数或虚基类的类，放在共享内存中的虚指针对于其他进程就无效了，他们会崩溃。
> 
> 这个问题很难解决，因为每个进程都需要一个不同的虚拟表指针，并且包含该指针的对象在许多进程之间共享。即使我们在每个进程中将映射区域映射到相同的地址，虚拟表也可以在每个进程中位于不同的地址。要为进程之间共享的对象启用虚函数，需要对编译器进行深度更改，并且虚函数会受到性能影响。这就是为什么 Boost.Interprocess 没有任何计划在进程之间共享的映射区域中支持虚拟功能和虚拟继承。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T08:33:40.460

共享内存最初只允许 POD 结构（本质上，它们可能有构造函数/复制/等...）。

`Boost.Interprocess`通过在共享内存段的偏移量之上模拟指针语义来提高标准。

但是，虚拟指针不是指向*纯数据*的指针，而是指向代码段的指针，这就是事情变得复杂的地方，因为代码段不一定映射到从一个进程到另一个进程的相同地址（即使它们是从相同的二进制文件）。

所以...不，虚拟指针-多态对象不能存储在共享内存中。

* * *

然而，仅仅因为许多 C++ 实现选择使用虚拟指针机制并不意味着这是具有多态行为的唯一方法。例如，在 LLVM 和 Clang 中，它们建立在封闭的层次结构上，以在没有虚拟指针（和 RTTI）的情况下获得多态性，从而降低内存需求。这些对象可以有效地存储在共享内存中。

那么，如何获得与共享内存兼容的多态性：我们不需要*存储*指向表/函数的指针，但是我们可以存储*索引*。

这个想法的例子，但可能会被改进。

```
/// In header
#include <cassert>

#include <vector>

template <class, size_t> class BaseT;

class Base {
    template <class, size_t> friend class BaseT;
public:

    int get() const; //     -> Implement: 'int getImpl() const' in Derived

    void set(int i); // = 0 -> Implement: 'void setImpl(int i)' in Derived

private:
    struct VTable {
        typedef int (*Getter)(void const*);
        typedef void (*Setter)(void*, int);

        VTable(): _get(0), _set(0) {}

        Getter _get;
        Setter _set;
    };

    static std::vector<VTable>& VT(); // defined in .cpp

    explicit Base(size_t v): _v(v) {}

    size_t _v;
}; // class Base

template <class Derived, size_t Index>
class BaseT: public Base {
public:
    BaseT(): Base(Index) {
        static bool const _ = Register();
        (void)_;
    }

    // Provide default implementation of getImpl
    int getImpl() const { return 0; }

    // No default implementation setImpl

private:
    static int Get(void const* b) {
        Derived const* d = static_cast<Derived const*>(b);
        return d->getImpl();
    }

    static void Set(void* b, int i) {
        Derived* d = static_cast<Derived*>(b);
        d->setImpl(i);
    }

    static bool Register() {
        typedef Base::VTable VTable;

        std::vector<VTable>& vt = Base::VT();

        if (vt.size() <= Index) {
            vt.insert(vt.end(), Index - vt.size() + 1, VTable());
        } else {
            assert(vt[Index]._get == 0 && "Already registered VTable!");
        }

        vt[Index]._get = &Get;
        vt[Index]._set = &Set;
    }
}; // class BaseT

/// In source
std::vector<VTable>& Base::VT() {
    static std::vector<VTable> V;
    return V;
} // Base::VT

int Base::get() const {
    return VT()[_v]._get(this);
} // Base::get

void Base::set(int i) {
    return VT()[_v]._set(this, i);
} // Base::set 
```

好的...我想现在您欣赏编译器的魔力了...

关于用法，幸运的是要简单得多：

```
/// Another header
#include <Base.h>

// 4 must be unique within the hierarchy
class Derived: public BaseT<Derived, 4> {
     template <class, size_t> friend class BaseT;
public:
    Derived(): _i(0) {}

private:
    int getImpl() const { return _i; }

    void setImpl(int i) { _i = i; }

    int _i;
}; // class Derived 
```

在[ideone](http://ideone.com/AHsZ3)行动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T07:41:04.820

我相信您正在研究对象的序列化。看看[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

您可以采取的几种方法是：1\. 序列化您的 C++ 类 2\. 将数据发送到另一个应用程序 3\. 反序列化为 C++ 类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T02:10:48.963

```
//While redefining I changed semantics of constnance in getter, 
//and had non-    const Derived pointer used for both getter and setter. 
//But original simantics can be preserved as following:

    int get() const {
         //return impl->get();
        //this enforces that get has to be const
        static_cast<const Derived *> (this)->get() ;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T00:55:24.670

```
//From the example above , I have removed VTable 
// I also removed static variables as per boost::interprocess 
// static variable don't work with shared memory, and also I did not see
// any advantage in actually builting a VTable for all derived classes
#include <vector>
#include <boost/bind.hpp>
#include <boost/function.hpp>

template <class> class BaseT;

class Base {
    template <class> friend class BaseT;
    boost::function< int (void) > _get;
    boost::function< void (int) > _set;
public:

    int get() {
        return _get();
    } //     -> Implement: 'int get() ' in Derived

    void set(int i) {
        _set(i);
    } // = 0 -> Implement: 'void set(int i)' in Derived
}; // class Base

template <class Derived>
class BaseT : public Base {

public:
    BaseT() : Base(), impl(static_cast<Derived *> (this)) {
        Base::_get = boost::bind(&BaseT<Derived>::get, this);
        Base::_set = boost::bind(&BaseT<Derived>::set, this, _1);
    }

    int get() {
        return impl->get();
    }

    void set(int i) {
        impl->set(i);
    }

private:
    Derived * impl;
};

//some A  implementation of Base
struct A : BaseT<A> {

    int get() {
        return 101; //testing implementation
    }

    void set(int i) {
        ; //implementation goes here
    }
};

//some B  implementation of Base
struct B : BaseT<B> {

    int get() {
        return 102; //testing implementation 
    }

    void set(int i) {
        ; //implementation goes here
    }
};

int main() {
    BaseT<A> objectA;
    BaseT<B> objectB;
    Base *a = &objectA;
    Base *b = &objectB;
    std::cout << a->get() << " returned from A class , "
            << b->get() << " returned from B class " << std::endl;
    return 0;
} 
```

# javascript - 在钛手机中打开没有模态属性的新窗口时如何显示标题/导航栏？

> ID：12969394
> 
> 赞同：0
> 
> 时间：2012-10-19T07:29:52.020
> 
> 标签：javascript, titanium, titanium-mobile

我制作了简单的钛移动应用程序。起初我想在按下某个按钮时打开新窗口。当我使用模态窗口时，它可以显示一个标题栏，这样我就可以将返回按钮放在那里，如下所示：

![在此处输入图像描述](../Images/9b8807bd5c2d9aa634b960d100b7e99d.png)

这是我的代码：

```
 var MainMenu = require('ui/common/option2/MainMenu');

    var mainMenuWindow = Titanium.UI.createWindow({
        title:'Main Menu',
        backgroundColor:'white',
        modal:true,
        navBarHidden:Ti.Platform.osname ==='android' ? true : false
    });

    var mainMenu = new MainMenu(mainMenuWindow);
    mainMenuWindow.add(mainMenu);

    mainMenuWindow.open(); 
```

但是如果我清除`modal:true`标题栏不会像这样显示：

![在此处输入图像描述](../Images/f74885005e909d0f54563778193c654f.png)

有谁知道在没有模式的情况下打开新窗口时如何显示/添加标题栏？我试过使用工具栏，但这真的很麻烦，因为我应该定义字体大小，甚至按钮的位置:(有什么建议吗？非常感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:56:54.540

实际上，在不使用模式的情况下显示标题栏存在问题，因此这里是调整。

您必须添加一个选项卡组并将您的窗口添加到它的选项卡，并将该​​窗口的 `tabBarHidden' 设置为 true。

运行应用程序时，您将看到标题栏..

这是它的示例代码

```
var tabGroup = Ti.UI.createTabGroup();

var win = Ti.UI.createWindow({
  backgroundColor:'#fff',
  tabBarHidden:true
});

var tab = Ti.UI.createTab({
   window: win,
  title: 'my win'
});

tabGroup.addTab(tab);

tabGroup.open(); 
```

上述解决方案适用于 iOS。

对于 Android，这是诀窍：

将这些行添加到您的`<app-project-dir>/platform/android/res/layout/titanium_tabgroup.xml`文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@android:id/tabhost"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="0dp">

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="0dp"
        android:layout_weight="1"/>

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0"/>

</LinearLayout>

</TabHost> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-19T11:54:53.917

您已设置`navBarHidden`为 true。尝试这个：

```
var mainMenuWindow = Titanium.UI.createWindow({
    title:'Main Menu',
    backgroundColor:'white',
    modal:true,
    navBarHidden: false // always show nav bar
}); 
```

# r - 方差分析的事后检验

> ID：12969398
> 
> 赞同：3
> 
> 时间：2012-10-19T07:30:21.680
> 
> 标签：r

我试图弄清楚如何对双向方差分析进行事后测试，并发现了以下两种方法：

1.  如果发现方差分析显着，请进行成对 t 检验（bonferroni 校正）。链接- [http://rtutorialseries.blogspot.com/2011/01/r-tutorial-series-two-way-anova-with.html](http://rtutorialseries.blogspot.com/2011/01/r-tutorial-series-two-way-anova-with.html)
2.  在 aov 模型上做 TukeyHSD 链接-http: [//www.r-bloggers.com/post-hoc-pairwise-comparisons-of-two-way-anova/](http://www.r-bloggers.com/post-hoc-pairwise-comparisons-of-two-way-anova/)

在 SPSS 中运行第一个示例中给出的数据集给出了治疗和年龄的显着成对差异（治疗和年龄是自变量），而使用第一个链接中给出的方向并没有给我显着的成对差异治疗（仅给年龄）。

我有几个问题：

1.  第一种方法是否完全不正确，如第二个链接中所暗示的那样？
2.  对 R 中的双向 ANOVA 进行 Bonferroni 校正的事后检验的正确方法是什么？
3.  有谁知道在双向方差分析（单变量分析）的情况下 SPSS 的事后测试如何工作？特别是对于 Bonferroni 校正测试。

我是 R 新手，所以如果我在提出问题时犯了错误，请告诉我；我将尽我所能解释清楚。谢谢你的帮助。

# ruby-on-rails-3 - 设计：加载部分而不是显示未确认成员的通知

> ID：12969403
> 
> 赞同：0
> 
> 时间：2012-10-19T07:30:39.690
> 
> 标签：ruby-on-rails-3, devise

**有没有办法为没有确认登录的用户加载视图？默认行为是显示一条通知：“您必须在继续之前确认您的帐户。”**

我试过了

*   否决用于设计检查 current_user.confirmed_at.blank 的 session#create 方法？
*   在 after_singin_path 检查 current_user.confirmed_at.blank？而是渲染视图

我的目标是呈现自定义视图而不是通知，但无法挂接到正确的位置。谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:00:30.957

我喜欢解决这个问题的 ruby​​ 方法，我猜在您的 UsersController 中，在 POST 请求之后，用户将被返回并使用 Devise 提供的 sign_in(Object) 助手登录。

我还建议使用确认的布尔值而不是时间戳。

为什么不使用红宝石方式使用 if else 语句检查值：

```
user.confirmed ? sign_in(user) : render :partial => 'path/partial' 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:13:39.840

您可以简单地从设计 github 复制代码并将其放入您的控制器/设计中。然后更改您想要的任何操作或方法。

您也可以扩展设计会话控制器并覆盖您想要的任何操作。

```
class Abc < Devise::SessionsController
 # this just reopens the class.
 # Remember classes are never "closed" in ruby!
end 
```

# android - setText 从字符串到 EditText

> ID：12969404
> 
> 赞同：1
> 
> 时间：2012-10-19T07:30:39.467
> 
> 标签：android, android-edittext

我试图在 EditText 内的对象上分配一些文本。它返回一些运行时异常。myObj.address 有值，我可以通过 getAddress.toString() 来祝酒。

```
 my_edittext = (EditText).findViewById(R.id.myedittext);
         my_edittext.setText(myObj.getAddress().toString()); 
```

如何在我的 EditText 中设置此文本？我怀疑 .setText 是否只接受 charSequence，那么如何将我的字符串转换为 charSequnce ？

**编辑：我的 Logcat 在这里**

```
10-19 13:58:40.719: D/AndroidRuntime(4344): Shutting down VM
10-19 13:58:40.719: W/dalvikvm(4344): threadid=1: thread exiting with uncaught exception (group=0x40a0d1f8)
10-19 13:58:40.729: E/AndroidRuntime(4344): FATAL EXCEPTION: main
10-19 13:58:40.729: E/AndroidRuntime(4344): java.lang.NullPointerException
10-19 13:58:40.729: E/AndroidRuntime(4344):     at com.x.y.z.activity.NewEntryActivity$3.onClick(NewEntryActivity.java:677)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.view.View.performClick(View.java:3511)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.view.View$PerformClick.run(View.java:14105)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.os.Handler.handleCallback(Handler.java:605)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.os.Looper.loop(Looper.java:137)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at java.lang.reflect.Method.invokeNative(Native Method)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at java.lang.reflect.Method.invoke(Method.java:511)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-19 13:58:40.729: E/AndroidRuntime(4344):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:33:21.540

我认为应该是

```
my_edittext.setText(myObj.getAddress().toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:01:49.153

```
 my_edittext = (EditText).findViewById(R.id.myedittext);
         my_edittext.setText(myObj.getAddress().toString()); 
```

这实际上应该有效。

首先检查是否`myObj.getAddress`返回空值，如果然后将一些值放入其中并尝试。

也试试这些 -

伪-

```
my_edittext = (EditText).findViewById(R.id.myedittext);
String myString = myObj.setAddress("hello"); // If you have a setter method
my_edittext.setText(myString); 
```

# windows-phone-7 - 科尔多瓦本地存储不持久

> ID：12969407
> 
> 赞同：3
> 
> 时间：2012-10-19T07:30:49.820
> 
> 标签：windows-phone-7, cordova

我正在使用 Windows Phone 7 sdk 和 phonegap 开发一个混合移动应用程序。使用 Cordova 本地存储我正在存储价值。如果我关闭应用程序并在 Windows Phone 模拟器中再次启动，则存储的值不会持续存在。任何人在 Windows Phone 共享想法中使用本地存储或替代持久存储都会很棒。

```
window.localStorage.test = "Some test data";
console.log(window.localStorage.test) //It prints result but does not persist 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:35:14.847

我相信正确的语法是：

```
window.localStorage.setItem("test", "Some test data");

console.log(window.localStorage.getItem("test")); 
```

分配属性*似乎*只是因为 javascript 允许您将新属性附加到对象。

**原始答案**您是否在执行之间关闭模拟器？模拟器在您关闭它时会清除其用户状态。

# wcf - F# wsdl 类型提供程序错误？

> ID：12969410
> 
> 赞同：3
> 
> 时间：2012-10-19T07:31:02.250
> 
> 标签：wcf, f#, wsdl, svcutil.exe, type-providers

尽管我喜欢 F# 类型提供程序的想法，但我第一次认真尝试使用它们时失败了。

我打算通过以下方式连接到服务（WCF）`WsdlService<"http://someurl/some.svc?wsdl">`

它失败了：

> 类型提供程序 'Microsoft.FSharp.Data.TypeProviders.DesignTime.DataProviders' 报告错误：tmp6E6C.cs(9409,26): error CS0644: 'System.ComponentModel.PropertyChangedEventHandler' 不能从特殊类 'System.MulticastDelegate' c 派生:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll：（与先前错误相关的符号位置）

以及许多其他可能不相关的警告：

> tmp6E6C.cs(290,28)：警告 CS0436：“c:\Users\someuser\AppData\Local\Temp\tmp6E6C.cs”中的“System.Data.DataRowState”类型与导入的“System.Data”类型冲突。 'c:\Windows\Microsoft.NET\Framework\v4.0.30319\System.Data.dll' 中的 DataRowState'。使用 'c:\Users\someuser\AppData\Local\Temp\tmp6E6C.cs' 中定义的类型。tmp6E6C.cs(9427,17)：（与先前警告相关的符号位置）

这是一个已知的功能;-) 还是我用错了？

不幸的是，我不能发布 WSDL，而且它相当大，里面有很多类型，所以我必须承认我有点懒惰，也没有把它删减。OTOH，如果我确实知道 WSDL 的哪一部分有问题或造成了这个错误，我当然会把它放在这里。

更改 WSDL 也不是一种选择，所以我主要想知道为什么 F# WSDL 类型的提供程序不能处理这个 (WCF) WSDL，或者我做错了什么。

当被 C# 和 VS2010 中的 svcutil.exe 使用时，它工作得很好。

我已经尝试了 WsdlTypeProvider 的所有参数，它们确实给出了相同的结果（当然 ForceUpdate 除外）。我是否应该使用 F# 以另一种方式使用这些服务？

==================================================== ============================添加信息（因为我是新手，不想回答。不要问为什么:)：

谢谢大家的回答/评论。

我确实部分地这样做了（手动使用 svcutil）。正如我上面所说的，我尝试手动使用 svcutil，但在编译生成的 C# 代码时失败（在 F# 之外的库中）。

也就是说，我做了以下事情：

1) 通过在 VS 2010 GUI 中设置引用来创建合约。这按预期工作

2) 尝试使用命令行中的 svcutil 创建它。然后该文件的编译失败并出现相同的错误。

从我的角度来看，从 cmd-line 在 svcutil 中发生的情况以及从 GUI 添加相同服务时使用 svcutil（或使用的内容）不会生成具有相同参数的代码。我想这部分是由于我尝试使用的是 WCF 服务而不是“干净”的 WSDL/web 服务，并且类型提供程序假定我尝试使用“干净”的 web 服务。

我没有找到任何 svcutil 的参数来处理这个问题，或者任何可能的参数组合，并不是说我确实尝试了所有组合排列，而是尝试了可能基于（试图）深入阅读 svcutil 文档的组合（而且我不是从 cmd-line 使用它的新手）。

到目前为止，我得出的结论是 svcutil 的一些“缺失”参数导致了这种情况，并且 F# 类型提供程序没有错。我仍然非常想以某种方式解决它，仍然使用 F# 类型提供程序，但后备是通过 C# 中的 GUI 生成代码，然后再次在 F# 中引用该部分代码。这不是我试图实现的优雅解决方案，因为我确实有很多服务，而且我非常想创建一种很好的原型设计和测试这些服务的方式。

另一个后备当然也会放弃整个 F# 部分而只进行一些单元测试等，但这又违背了潜入 F# 并同时学习的目的；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:16:19.193

WSDL 类型提供程序（以及其他一些提供程序）在后台使用 SvcUtil 来完成繁重的工作。如果你打开 taskmgr 的 ProcExp 或一些类似的工具，你可以看到 SvcUtil 进程在将 TP 代码粘贴到 Visual Studio 后生成。至少使用 ProcExp，您可以看到带有所使用参数的完整命令行。

因此，准确找出 TP 为您的服务调用的 SvcUtil 命令行，并检查它是否在 F# 环境之外工作。

SvcUtil 在 C#/VS 2010 中工作的事实很有趣。我假设如果您使用的是 F# TP，那么您现在就在 VS 2012 上。如果是这样，SvcUtil 本身的版本可能不同，这可能是相关的。

具体错误似乎与[此处](https://stackoverflow.com/a/10888459/1366219)解释的相同，因此您的服务代码中可能有一些不完整的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:30:16.720

我无法离开这个问题......

我现在做了以下事情：

1.  使用普通设置运行 svcutil：svcutil [http://some.address/some/path.svc](http://some.address/some/path.svc)
2.  使用更多设置运行： svcutil /r:"C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.dll" /r:"C:\Program Files (x86)\参考 Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Data.dll" [http://some.address/some/path.svc](http://some.address/some/path.svc)

这确实会在 C# 文件中产生以下差异（它存在于 1）中，但显然不存在于 2）中）：

```
namespace System.ComponentModel
{
    using System;

    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.SerializableAttribute()]
    public partial class PropertyChangedEventHandler : System.MulticastDelegate
    {

        public PropertyChangedEventHandler(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context) : 
                base(info, context)
        {
        }
    }
}
namespace System.Data
{
    using System;
    using System.Runtime.Serialization;

    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
    [System.FlagsAttribute()]
    [System.Runtime.Serialization.DataContractAttribute(Name="DataRowState", Namespace="http://schemas.datacontract.org/2004/07/System.Data")]
    public enum DataRowState : int
    {

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Detached = 1,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Unchanged = 2,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Added = 4,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Deleted = 8,

        [System.Runtime.Serialization.EnumMemberAttribute()]
        Modified = 16,
    }
} 
```

这再次使文件在 2) 中编译，否则如预期的那样。

那么有些奇怪的部分是：为什么在运行 svcutil 时 F# wsdl 提供程序中没有使用 System.dll？System.Data.dll 我有点理解，因为在运行 svcutil 时不是默认使用的（至少根据文档）。

OTOH 我还认为文档说如果程序集在 GAC 中，它应该使用它们。那么我如何验证它们是否存在，和/或如果不存在则将它们加载到程序集中？

运行 gacutil -i System.dll（在 System.dll 的 4.5 版上）给出：

> 将程序集添加到缓存失败：尝试加载格式不正确的程序。

是 64/32 位问题吗？（如果确实有任何相关性，我在 64 位窗口上）

或者换个说法：当我无法直接通过 WsdlProvider 部分添加引用时，如何在运行 svcutil 时将 System.dll 和 System.Data.dll 获取到部分引用？

我很确定它不使用 System.dll，因为如果我将 collectiontype 参数添加到 wsdlprovider：

```
WsdlService<"http://some.url/some/path.svc", "c:\\temp\\wsdl\\some.wsdlschema", true, ".", true, true, false, false, "System.Collections.Generic.List'1"> 
```

它还抱怨以下内容：

> 类型提供程序“Microsoft.FSharp.Data.TypeProviders.DesignTime.DataProviders”报告错误：错误：无法为传递给 /collectionType 选项的值 System.Collections.Generic.List'1 加载任何类型。确保通过 /reference 选项指定此类型所属的程序集。

如果引用了 System.dll 应该可以直接使用（我认为）。

有什么想法可以进一步调查或解决这个问题？

# jquery - 如果按下分页按钮之一，数据表如何添加一些自定义 jquery 代码

> ID：12969412
> 
> 赞同：0
> 
> 时间：2012-10-19T07:31:12.583
> 
> 标签：jquery, datatables

我正在为 jquery 使用数据表插件，并向我的表中添加了一些点击处理程序，但这些只是为我的表的第一页创建的。当我转到下一页时，这些行没有点击处理程序。所以我想我每次进入下一页时都需要添加点击处理程序。

我不知道按下下一页按钮时我该怎么做，因为这个按钮的点击动作来自插件。如何添加自定义操作？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:05:51.287

you should provide fnRowCallback function, and attach your handlers in it. This function will get called for each row before it is displayed.

Here is one [general example on fnRowCallback](http://datatables.net/examples/advanced_init/row_callback.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:18:21.910

请使用下面的代码来处理分页点击事件

```
$('#table_instance').bind('page', function () {
//call some function here 
```

});

# php - 如何将两个数字字符串相减

> ID：12969413
> 
> 赞同：2
> 
> 时间：2012-10-19T07:31:14.943
> 
> 标签：php

我有两个数字类型的字符串，但结果出错了。

```
$totalamount='41,305.33';
$normalamount='999.72';
echo $total=$totalamount-$normalamount; 
```

有没有其他方法可以做到这一点或我自己的代码有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:35:48.137

这是 的反向函数`number_format()`。

**解决方案：**

```
function number_unformat($number, $dec_point = '.', $thousands_sep = ',') {
    return (float)str_replace(array($thousands_sep, $dec_point),
                              array('', '.'),
                              $number);
}

$totalamount  = number_unformat('41,305.33');
$normalamount = number_unformat('999.72');
$total        = $totalamount - $normalamount;
echo $total; 
```

**输出：**

```
40305.61 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:36:15.233

由于“，”字符，您得到了错误的值，只需删除它们...

```
$totalamount='41,305.33';
$normalamount='999.72';
echo (double)str_replace(',','',$totalamount)-
     (double)str_replace(',','',$normalamount); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:34:57.007

错误的原因是字符串上有逗号。

```
$totalamount = floatval(str_replace(',', '','41,305.33'));
$normalamount = floatval(str_replace(',', '','999.72'));
echo $total = $totalamount-$normalamount; 
```

顺便说一句，**[doubleval()](http://php.net/manual/en/function.doubleval.php)** — 的别名**[`floatval()`](http://php.net/manual/en/function.floatval.php)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:37:53.767

您可以使用`floatval()`来实现您正在寻找的东西，但您需要从字符串中删除“，”：

```
$totalamount = str_replace(',' , '', '41,305.33');
$normalamount = '999.72';
echo $totalamount - $normalamount;

// Writes: 40305.61 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:48:47.587

只需删除逗号，它就会按预期工作。无需手动将字符串转换为数字，因为减号运算符为我们完成了这项工作。

```
<?php
$totalamount='41305.33';
$normalamount='999.72';
echo $total=$totalamount-$normalamount; 
```

`'41,305.33'-'999.72'`导致的原因`-958.72`是因为 PHP 一看到逗号，就会认为它是无效数字并修剪掉剩余的字符。因此，您只剩`'41'-'999.72'`下确实是`-958.72`。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-19T07:58:51.317

[您可以使用NumberFormatter](http://de3.php.net/manual/en/class.numberformatter.php)将格式化的数字转换为 PHP 理解的数字

```
$fmt = numfmt_create('de_DE', NumberFormatter::DECIMAL);
echo $total = $fmt->parse('41,305.33') - $fmt->parse('999.72'); 
```

# ruby-on-rails - 如何在 Rails 中构建 JSON 响应时呈现 HTML 视图？

> ID：12969415
> 
> 赞同：1
> 
> 时间：2012-10-19T07:31:23.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, partial-views

我有一个返回 JSON 的控制器方法。但有时该 JSON 对象的一部分应该包含一个呈现的、序列化的 HTML 视图。所以我的控制器方法有这样一行：

```
html = render_to_string :partial => 'foo/bar'
# ...
render json: {x: 'y', html: html} 
```

但这失败了，因为 Rails 只寻找 JSON 视图！

> ActionView::MissingTemplate（缺少部分 foo/bar 和 {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :coffee, :slim, :haml] }. […]

我该如何解决这个问题？

* * *

**更新**：我已经`render_to_string`使用下面的语法将一个“级别”的布局设置为 html，但是当该布局呈现自己的部分时，同样的错误仍然存​​在！

```
html = render_to_string :partial => "foo/bar.html.haml" 
```

这里肯定有解决方案，对吧？

* * *

**更新 2**：`render_to_string :action => 'method_in_this_controller'`似乎在起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T18:27:34.327

重复Yanhao的回答，因为我遇到了这个确切的问题，它对我有用。

尝试：

```
html = render_to_string :partial => 'foo/bar', :formats=>[:html] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T08:12:36.027

你确定你有一个文件'apps/views/foo/_bar.*'吗？我能够使用[如何将部分呈现为字符串？](https://stackoverflow.com/questions/20726007/how-do-i-render-a-partial-to-a-string)

```
respond_to do |format|
   format.html { redirect_to post_path(post) }
   format.js { 
     render json: { 
       error: flash[:error],
       content: (render_to_string partial: '/comments/comment', locals: {comment: comment}, layout: false )  
     } 
   }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:43:01.807

我在我的行动中写了类似的东西：

```
def show
  ...
  respond_to do |format|
    format.js { render :json => data }
  end
end 
```

也许它会帮助你。

# css - 鼠标悬停 2 种颜色与 css

> ID：12969419
> 
> 赞同：2
> 
> 时间：2012-10-19T07:31:43.720
> 
> 标签：css, css-transitions

菜单项默认背景颜色为白色。鼠标悬停颜色为蓝色

我的问题是——

如果我们按住鼠标悬停在菜单项上。首先需要在 1 或 2 秒后显示蓝色，颜色应变为其他颜色的黄色。

是否有可能使用 css 过渡或任何使用 CSS 的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:35:34.980

试试这个也许有帮助

HTML

```
<div class="test"><div></div></div>​​​​​​​​​​​​​​​​ 
```

CSS

```
​.test{
    width:100px;
    height:100px;
    background-color:#0ff;  
   -webkit-transition:background-color 1s ease-in; 
    -moz-transition:background-color 1s ease-in; 
    -o-transition:background-color 1s ease-in; 
    transition:background-color 1s ease-in; 
}
.test div{
    width:100px;
    height:100px;
    -webkit-transition:background-color 3s ease-in;
     -moz-transition:background-color 3s ease-in;
     -o-transition:background-color 3s ease-in;
     transition:background-color 3s ease-in;
}
.test:hover{
   background-color:#f00;
}

.test div:hover{
   background-color:green;
} 
```

​<a href="http://jsfiddle.net/GKXua/" rel="nofollow">jsFiddle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:50:24.353

您可以使用 CSS3 动画来实现这一点（适用于现代浏览器）。这是一个示例，它将按钮的颜色从灰色变为蓝色，然后变为黄色。

希望有帮助！

演示 - [jsFiddle](http://jsfiddle.net/Zjz69/3/)

HTML

```
<div class="button"></div> 
```

CSS

```
.button {
    width: 150px;
    height: 50px;
    background-color: #e3e3e3;
    border: 1px solid #000000;
}

.button:hover {
     -webkit-animation: color 1.0s forwards;
        -moz-animation: color 1.0s forwards;
          -o-animation: color 1.0s forwards;
}

@-webkit-keyframes color {
      0%   { background-color: #0000ff; }
      50%  { background-color: #0000ff; }
      100% { background-color: #ffff00; }
}

@-moz-keyframes color {
      0%   { background-color: #0000ff; }
      50%  { background-color: #0000ff; }
      100% { background-color: #ffff00; }
}

@-o-keyframes color {
      0%   { background-color: #0000ff; }
      50%  { background-color: #0000ff; }
      100% { background-color: #ffff00; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:00:54.497

我认为这可能是您正在寻找的。 [http://www.acuras.co.uk/articles/53-javascript--css-flashing-text--how-to-do-it--why-not-to-do-it](http://www.acuras.co.uk/articles/53-javascript--css-flashing-text--how-to-do-it--why-not-to-do-it)

老实说，我不知道你为什么需要这样的链接，它只会让你的网站看起来像是一个完全的初学者制作的，因为它非常分散注意力。那里有更好的动画和插件，特别是如果你使用 jQuery。看看这个以获得灵感：[http ://bestofjquery.com/](http://bestofjquery.com/)

# gdb - 添加源检测代码 - 源到源编译器是正确的方法吗？如何建造一个？

> ID：12969420
> 
> 赞同：2
> 
> 时间：2012-10-19T07:31:53.603
> 
> 标签：gdb, instrumentation, nesc, gdb-python

我正在做一个项目，我需要跟踪任何给定应用程序代码中特定变量集的更改，以对内存访问模式进行建模。

我主要想到了两种方法，请给出您的想法。

1.  我最初的想法是像许多像 gprof 这样的分析器那样做，我在编译之前在目标应用程序代码中添加检测代码，并分析此检测代码生成的日志以获取所需的信息。

为此，我只能想到某种源到源编译器，它解析给定的代码并将检测代码（相同语言的源代码编译器）注入应用程序，我以后可以编译和运行以获取所需的日志。

这看起来是对的还是我过度设计了？如果没有，是否有工具可以让我（相对）轻松地构建源代码编译器？

2.  我读到了 GDB 对 python 的支持，所以，我在想是否可以编写一个 python 脚本来获取一组变量作为配置文件，并设置观察点并在每次写入被监视的变量时记录。我尝试使用此 GDB 功能，但在我的 Ubuntu 机器上，它现在似乎无法正常工作。 [http://sourceware.org/gdb/onlinedocs/gdb/Python.html#Python](http://sourceware.org/gdb/onlinedocs/gdb/Python.html#Python)

而且，应用程序的语言将是 nesC（我猜 nesC 在编译过程中会转换为 C）（并且应用程序将像我计算机上的本机应用程序一样在 TOSSIM 上运行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:55:52.740

See [my paper on instrumenting codes using a program transformation systems (PTS)](http://www.semdesigns.com/Company/Publications/TestCoverage.pdf) (PTS is a very general kind of "source-to-source compiler).

It shows how to install probes in code in a pretty straightforward way, once you have a grammar for the language of interest. The underlying tool, DMS, makes it fairly easy to define the grammar too.

# line - JavaFX 2.x：如何翻译 XYLineChart 和其他项目？

> ID：12969424
> 
> 赞同：1
> 
> 时间：2012-10-19T07:32:04.533
> 
> 标签：line, javafx-2, linechart

这段代码绘制了一个 XYLineChart 和一条直线：通过鼠标左键单击并拖动图形上的任意位置，XYLine 被左/右和上下平移，而黑线则没有。

我想绑定黑线和 XYLine，这样当我单击并拖动时，两条线一起移动。

如何做到这一点？

谢谢

```
import javafx.application.Application; 
import javafx.beans.property.SimpleDoubleProperty; 
import javafx.event.EventHandler;  
import javafx.scene.chart.NumberAxis; 
import javafx.scene.chart.XYChart; 
import javafx.stage.Stage; 
import javafx.scene.Scene; 
import javafx.scene.Node; 
import javafx.scene.chart.LineChart; 
import javafx.scene.input.MouseEvent; 
import javafx.scene.layout.BorderPane; 
import javafx.scene.paint.Color; 
import javafx.scene.shape.LineTo; 
import javafx.scene.shape.MoveTo; 
import javafx.scene.shape.Path; 

public class JavaFXMovePath extends Application { 

Path path;
BorderPane pane; 
XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
}); 

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(false); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

path = new Path(); 
path.setStrokeWidth(5); 
path.setStroke(Color.RED); 

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 
stage.show();
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

    if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {             
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

    } 
    else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

        double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 
        double newYlower=yAxis.getLowerBound(), newYupper=yAxis.getUpperBound(); 

        //double xAxisShift = getSceneShift(xAxis);
        //double yAxisShift = getSceneShift(yAxis);           
        //double yAxisStep=yAxis.getHeight()/(yAxis.getUpperBound()-yAxis.getLowerBound());            

        double Delta=0.3;
        if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
        if(rectinitX.get() < mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()-Delta;
            newXupper=xAxis.getUpperBound()-Delta;
        }
    else if(rectinitX.get() > mouseEvent.getX()){    
            newXlower=xAxis.getLowerBound()+Delta;
            newXupper=xAxis.getUpperBound()+Delta;
        }    
        xAxis.setLowerBound( newXlower ); 
        xAxis.setUpperBound( newXupper ); 

        //========== Y-Axis Moving ============================

        if(rectinitY.get() < mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()+Delta/1000;
            newYupper=yAxis.getUpperBound()+Delta/1000;
        }
        else if(rectinitY.get() > mouseEvent.getY()){    
            newYlower=yAxis.getLowerBound()-Delta/1000;
            newYupper=yAxis.getUpperBound()-Delta/1000;
        }
        yAxis.setLowerBound(newYlower);
        yAxis.setUpperBound(newYupper);                       
        }                                        
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

        MoveTo moveTo = new MoveTo();
        moveTo.setX(80);
        moveTo.setY(80);
        LineTo lineTo1 = new LineTo();
        lineTo1.setX(80);
        lineTo1.setY(80);
        LineTo lineTo2 = new LineTo();
        lineTo2.setX(200);
        lineTo2.setY(200);

        path.getElements().add(moveTo);
        path.getElements().add(lineTo1);
        path.getElements().add(lineTo2);

        path.setStrokeWidth(3);
        path.setStroke(Color.BLACK);
        pane.getChildren().add(path);                                
     } 
  } 
}; 
//private static double getSceneShift(Node node) { 
//    double shift = 0; 
//    do {  
//        shift += node.getLayoutX();  
//        node = node.getParent(); 
//    } while (node != null); 
//    return shift; 
//}
public static void main(String[] args) { 
launch(args);  
} 
} 
```

# php - 如何使用 gps 与 php 和 html 来显示动态路线

> ID：12969425
> 
> 赞同：0
> 
> 时间：2012-10-19T07:32:05.493
> 
> 标签：php, html, gps

我正在使用 php 和 html-5 开发一个网站，我的计划是在给定的 JPEG 图像上显示两个位置之间的动态路线，我们该怎么做，我不知道在网站上使用 GPS 系统，我会喜欢一些帮助..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:51:14.733

请参阅这篇 W3Schools 文章：[http ://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)

```
if(!navigator.geolocation){
  //the browser does not support geolocation
}else{
  (function getPosition(){
    navigator.geolocation.getCurrentPosition(
      function (position){
        //use the coordinates
        balloon.style.left = (position.coords.latitude - latMin) * latScale;
        balloon.style.top = (position.coords.longitude - longMin) * longScale;
        //requery the position after a set time
        setTimeout(getPosition,1000);
      }
    )
  })()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:03:35.053

好文章在这里：

[http://merged.ca/iphone/html5-geolocation](http://merged.ca/iphone/html5-geolocation)

```
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition( 

    function (position) {  

    // Did we get the position correctly?
    // alert (position.coords.latitude);

    // To see everything available in the position.coords array:
    // for (key in position.coords) {alert(key)}

    alert(position.coords.latitude + ',' + position.coords.longitude);

    }, 
    // next function is the error callback
    function (error)
    {
        switch(error.code) 
        {
            case error.TIMEOUT:
                alert ('Timeout');
                break;
            case error.POSITION_UNAVAILABLE:
                alert ('Position unavailable');
                break;
            case error.PERMISSION_DENIED:
                alert ('Permission denied');
                break;
            case error.UNKNOWN_ERROR:
                alert ('Unknown error');
                break;
        }
    }
    );
} 
```

}

# java - 如何从 Intellij 中的 CVS 签出一个空目录？

> ID：12969431
> 
> 赞同：0
> 
> 时间：2012-10-19T07:32:32.770
> 
> 标签：java, intellij-idea, repository, cvs

有人在 CVS 中创建了一个空包。我想在 Intellij 中签出这个包，但在 Intellij 中没有出现任何内容。

**有谁知道为什么以及如何解决它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:38:05.383

您必须取消选中`Prune empty directories`结帐 IntelliJ IDEA CVS 向导中的选项。

# ruby-on-rails - Ruby delete_if 多个值 - 仅删除第一个值

> ID：12969435
> 
> 赞同：2
> 
> 时间：2012-10-19T07:32:39.353
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

```
words.delete_if do |x|
  x == ("a"||"for"||"to"||"and")
end 
```

`words`是一个包含许多单词的数组。我的代码正在删除“a”，但没有删除“for”、“to”或“and”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T07:35:00.477

愿这对你有帮助

```
words.delete_if do |x|
  %w(a for to and).include?(x)
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T07:34:52.127

做就是了

```
words - ["a", "for", "to", "and"] 
```

例子

```
words = %w(this is a just test data for array - method and nothing)
 => ["this", "is", "a", "just", "test", "data", "for", "array", "-", "method", "and", "nothing"] 
words = words - ["a", "for", "to", "and"]
 => ["this", "is", "just", "test", "data", "array", "-", "method", "nothing"] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T07:40:42.567

如果你运行 "a" || irb 中的“b”，那么您将始终得到“a”，因为它是一个非空值，它将由 || 返回 总是..在您的情况下，“a”||“for”将始终评估“a”，而不管数组中的其他值如何。所以这是我对您问题的替代解决方案

w = %W{a 结束}

words.reject！{ |x| w.include?(x) }

# python - webapp2中超过配额错误的自定义错误页面

> ID：12969438
> 
> 赞同：0
> 
> 时间：2012-10-19T07:32:45.137
> 
> 标签：python, google-app-engine, python-2.7, webapp2

为了获取 500 错误，我使用 webapp2 显示自定义错误页面：[http](http://webapp-improved.appspot.com/guide/exceptions.html#exceptions-in-the-wsgi-app) ://webapp-improved.appspot.com/guide/exceptions.html#exceptions-in-the-wsgi-app 。

发生错误时始终显示此页面。即使存在 over_quota 错误并且 app.yaml 已正确配置。

如何显示 Quota_over Error 的自定义页面？

在 app.yaml 中：-

```
error_handlers:
  - error_code: over_quota
    file: over_quota.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:05:21.273

App Engine 中配额超过的代码是 503。因此，您可以创建一个专门处理 503 错误代码的处理程序。

# python - 从标签python中提取值

> ID：12969441
> 
> 赞同：2
> 
> 时间：2012-10-19T07:32:59.163
> 
> 标签：python

如何从以下内容中提取 name4 的值？提供的示例是示例？我怎么能对 xml.parsers.expat 做同样的事情，我正在使用没有 xml.etree 的 python 2.4

```
<test name1="" name2="" name3="0.0.0.0" name4="Linux">
</test> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:37:40.447

使用[`lxml.html`](http://lxml.de/)

```
import lxml.html as lh

doc=lh.fromstring('<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>')

doc.xpath('.//@name4')
Out[298]: ['Linux'] 
```

注意1：这个简单的例子可以使用正则表达式，但是使用正则表达式来解析 xml/html 是一种不好的做法，你不应该养成这样做的习惯。

注意 2：如果您要安装`lxml`，`xml.etree.ElementTree`与 python 附带的一样好（轻量级？）替代品，尤其是对于更简单的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:49:59.110

[有时使用BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)真的很容易

```
from BeautifulSoup import BeautifulSoup as bs

your_string = """<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>"""

soup = bs(your_string)
res = soup.findAll('test')
for i in res:
    print i.get('name4') 
```

您还可以在文档[页面上找到更多示例](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

**更新**如何更改属性名称并打印整个 xml：

```
from BeautifulSoup import BeautifulSoup as bs

your_string = """<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>"""

soup = bs(your_string)
s = soup.test
s['name4'] = 'Ubuntu'
print soup 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:44:41.320

```
from xml.dom.minidom import parseString

dom = parseString('<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>')

xmlTag = dom.getElementsByTagName('test')[0]

print xmlTag.getAttribute("name4") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:49:56.693

我更喜欢 ElementTree，因为它默认安装在许多发行版上，包括 RedHat/CentOS >= 5，并且易于使用。（但是，lxml 在功能上要优越得多）要使用：

```
import xml.etree.ElementTree as ET

elem = ET.fromstring('<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>')
name4 = elem.get("name4") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T08:19:38.103

您还使用模块 re：

```
import re
pat = re.compile('name4="(.*?)"')

text = '<test name1="" name2="" name3="0.0.0.0" name4="Linux"></test>'
pat.findall(text) 
```

# javascript - 带循环的主干收集推送

> ID：12969442
> 
> 赞同：0
> 
> 时间：2012-10-19T07:33:00.523
> 
> 标签：javascript, backbone.js

我正在尝试构建一个集合，但需要动态构建它，因为我不知道要推送多少。目前我所做的是；

```
var DataCollection = Backbone.Collection.extend({
            model : dataModel
        });

        var dataModel = Backbone.Model.extend({
            defaults : {
                dataID : 'unknown',
                text : 'unknown',

            }
        });

        var linkPrev = new dataModel({ dataID: "Prev", text: "Prev" });
        var link1 = new dataModel({ dataID: "1", text: "1" });
        var link2 = new dataModel({ dataID: "2", text: "2" });
        var link3 = new dataModel({ dataID: "3", text: "3" });
        var linkNext = new dataModel({ dataID: "Next", text: "Next" });

        var myDataCollection = new DataCollection();
        //myDataCollection.push(linkPrev);
        myDataCollection.push(link1);
        myDataCollection.push(link2);
        myDataCollection.push(link3);
        myDataCollection.push(linkNext); 
```

而不是手动说

```
link1 = new dataModel({ dataID: "1", text: "1" }); 
myDataCollection.push(link1); 
```

我可以动态创建这个列表吗？

例如，如果我有 4 个链接，我希望在 link4 中添加 dataID: 4, TextID: 4... 等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:13:22.860

如果您需要在初始化时填充集合，您可以简单地传递一个对象数组来填充，无需为每个对象创建模型，Backbone.Collection 将为您完成：

```
var DataCollection = Backbone.Collection.extend({
    model : DataModel
});

var DataModel = Backbone.Model.extend({
    defaults : {
        dataID : 'unknown',
        text : 'unknown'
    }
});

var myDataCollection = new DataCollection([
    { dataID: "Prev", text: "Prev" },
    { dataID: "1", text: "1" },
    { dataID: "2", text: "2" },
    { dataID: "3", text: "3" },
    { dataID: "Next", text: "Next" }
]); 
```

# jquery - 即使没有悬停，我如何对齐我的内容？

> ID：12969445
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:33:08.693
> 
> 标签：jquery, html, css

我有四列带有差异 div，第四列是悬停。在输入栏出现之前，您必须将鼠标悬停在第四列上。我的问题是，由于第四列被隐藏，第一列的数据进入第四列。帮我解决这个问题。这是我的代码：jsfiddle.net/kerokeroppi/DYvCz/！

[当我的第四列不悬停时搞砸了](https://i.stack.imgur.com/9HkO1.jpg)

![当悬停我的桌子是固定的。](../Images/e7aa9622735187e936d6e1ed191e84d8.png)

![在此处输入图像描述](../Images/39da84eb6d31763b3b359f6310f5a121.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:34:33.777

使用[visibility:hidden](http://www.css4you.de/visibility.html)而不是 display:none 来隐藏它。

# javascript - 使用 jQuery 实时检查列表元素数量并为它们添加一些样式

> ID：12969447
> 
> 赞同：1
> 
> 时间：2012-10-19T07:33:21.990
> 
> 标签：javascript, jquery, css, list

我有一些列表，有时这个 lis 有 5 个，有时有 7 个元素。我想检查有多少，并添加少于 5 种样式。我有这个，但它不工作......也许我需要添加一些实时检查？我还为某种迟到的检查设置了时间间隔。谢谢，寻求帮助。

```
setTimeout(function(){
    var single_producer_products_list = $('.single_producer_products_list').find('li');
    if ((single_producer_products_list < 7)) {
        $('.producer_series_info').addClass('longer');
    }
},200) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:35:08.653

您可以使用`length`属性：

> jQuery 对象中的元素数。

```
$('.single_producer_products_list').find('li').length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:26:29.190

您还可以使用：

```
jQuery('.single_producer_products_list').children().length; 
```

# c# - 如何在 for 循环中使用按钮名称作为字符串访问按钮

> ID：12969453
> 
> 赞同：0
> 
> 时间：2012-10-19T07:33:35.070
> 
> 标签：c#, winforms

我需要在 for 循环中访问一个按钮，但它的名称必须更改。

前任：

*   有许多按钮的名称是 bt1,bt2,bt3,...bt25。
*   我在我的代码中使用 for 循环来禁用或启用这些按钮。
*   我可以使用 for 循环来执行此操作吗？

喜欢：

```
for(int i =1;i<25;i++)
{
    "bt"+"i".Enable = True;
} 
```

我如何将字符串作为控件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T07:36:26.783

```
for(int i =1;i<25;i++)
{
    this.Controls["bt"+ i.ToString()].Enable = True;
} 
```

VB（使用代码转换器）：

```
For i As Integer = 1 To 24
    Me.Controls("bt" & i.ToString()).Enable = [True]
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:58:01.643

您可以使用 LINQ 在一行中完成

```
Controls.OfType<Button>().ToList().ForEach(b => b.Enabled = false); 
```

VB（也通过转换器）

```
Controls.OfType(Of Button)().ToList().ForEach(Function(b) InlineAssignHelper(b.Enabled, False)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:49:30.773

您可以使用以下代码：

```
foreach (Control ctrl in this.Controls)
            {
                if (ctrl is Button)
                {
                    ctrl.Enabled = true;
                }
            } 
```

如果它在任何容器控件中，那么试试这个：

```
foreach (Control Cntrl in this.Pnl.Controls)
            {
                if (Cntrl is Panel)
                {
                    foreach (Control C in Cntrl.Controls)
                        if (C is Button)
                        {
                            C.Enabled = true;
                        }
                }
            } 
```

如果想在 VB 中实现，那么试试这个：

```
For Each Cntrl As Control In Me.Pnl.Controls
    If TypeOf Cntrl Is Panel Then
        For Each C As Control In Cntrl.Controls
            If TypeOf C Is Button Then
                C.Enabled = False
            End If
        Next
    End If
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:01:48.490

```
for(int i =1;i<=25;i++)
{
    this.Controls["bt"+ i].Enable = True;
 //Or
    //yourButtonContainerObject.Controls["bt"+ i].Enable = True;
    // yourButtonContainerObject may be panel1, pane2 or Form, Depends where
   // your buttons are added. 'this' can be used in case of 'Form' only
} 
```

仅当您确实有 25 个按钮并命名为 bt1,bt2,bt3...,bt25 时，上述代码才有效

```
 foreach (Control ctrl in yourButtonContainerObject.Controls)
        {
            if (ctrl is Button)
            {
                ctrl.Enabled = false;
            }
        } 
```

如果您想启用特定容器（表单或面板等）中的所有按钮，上面的代码会更好。

# api - 建议foursquare api的edit场地方法没有响应

> ID：12969455
> 
> 赞同：-4
> 
> 时间：2012-10-19T07:33:45.250
> 
> 标签：api, ios5, foursquare

我正在尝试使用Foursquare API 的[https://api.foursquare.com/v2/venues/VENUE_ID/proposeedit](https://api.foursquare.com/v2/venues/VENUE_ID/proposeedit)编辑场地 ，但在响应中，我总是得到一个空白字典并且更改未成功完成。我的回应是

```
meta = {code = 200; }; notifications = ( {item ={unreadCount = 0;}; type = notificationTray;        });response ={}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:46:47.387

当我尝试访问给定的 URL 时，响应为
**{"meta":{"code":400,"errorType":"invalid_auth","errorDetail":"Missing access credentials。请参阅 https://developer.foursquare。 com/docs/oauth.html 以获取详细信息。"},"response":{}}**
因此，如果您可以看到 errorDetails ，则说明消息详细信息中需要访问凭据的原因，因此如果您可以提供，则可能不需要响应空的。由于响应中出现错误，当前响应为空

# php - Doctrine 查询缓存和更新

> ID：12969460
> 
> 赞同：2
> 
> 时间：2012-10-19T07:33:58.817
> 
> 标签：php, orm, doctrine, doctrine-orm

Doctrine 2 查询缓存对我来说有点令人惊讶。我有两个一一对应的更新查询：

```
function upd($user, $passwordHash) {
    $qb = $this->entityManager->createQueryBuilder()
        ->update(UserEntity::__class, 'u')
        ->set('u.password', '?1')
        ->where('u = ?0')
        ->setParameters(array($user, $passwordHash));
    $qb->getQuery()->execute();
} 
```

我用 2 个不同的值（例如 A、B）更新了密码，但用户是相同的：

```
upd($user, 'A');
upd($user, 'B'); 
```

第一个查询真正更新了数据库行。但是第二个在执行后没有对数据库进行任何更改。

为了解决这个问题，我找到了一些解决方法：

```
$qb->getQuery()->useQueryCache(false)->execute(); 
```

禁用 QueryCache 后，两个查询都会更改 DB 行。

**所以，问题是：**为什么学说在第二个 UPDATE 查询中使用第一个查询缓存？为什么学说使用缓存，而它是两个具有不同参数（$passwordHash）的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:48:50.353

发现了问题。这是学说 2 ORM 代码中的一个问题。我的 $user 实体具有继承性，因此更新使用 Doctrine\ORM\Query\Exec\MultiTableUpdateExecutor。在那个执行者中：

```
//FIXME (URGENT): With query cache the parameter is out of date. Move to execute() stage. 
```

[来源](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/Query/Exec/MultiTableUpdateExecutor.php#L108)。

所以目前唯一的解决方法是禁用多表更新的查询缓存：

```
$qb->getQuery()->useQueryCache(false)->execute(); 
```

我为它创建了[新的错误](http://www.doctrine-project.org/jira/browse/DDC-2090)。

# java - 如何限制 JTable 中的输入？

> ID：12969462
> 
> 赞同：0
> 
> 时间：2012-10-19T07:34:13.400
> 
> 标签：java, swing, input, jtable, validation

我在我的程序中使用了一个可编辑的 JTable。我的问题是：

您将如何限制写入表中的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:47:03.547

您可以尝试使用教程“[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)”并查看标题为“使用其他编辑器”的部分

# windows-8 - 回调编组错误

> ID：12969464
> 
> 赞同：1
> 
> 时间：2012-10-19T07:34:20.597
> 
> 标签：windows-8, microsoft-metro

当我的回调被调用时，我得到：

> 发生编组错误。

什么是“编组”？以及为什么我的回调无效。请告诉我。

这是代码。

```
 public Page1()//constructor
    {
        this.InitializeComponent();
        NetworkInformation.NetworkStatusChanged += new Windows.Networking.Connectivity.NetworkStatusChangedEventHandler(OnNetworkStatusChanged);//regist callback
    }

    void OnNetworkStatusChanged(object arg)//callback method
    {
        App.mainFrame.Navigate(typeof(Page2));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:44:22.543

错误消息告诉您“导航”方法正在错误的线程上执行（并且需要编组，以便在正确的线程上调用它）。

在 Windows8 中，与 UI 交互的代码应该只在 UI 线程上执行 - 并且回调方法（例如`OnNetworkStatusChanged`上面的方法）不一定在 UI 线程上调用。要确保代码在 UI 线程上执行，而不是在其他线程上执行，请使用如下惯用语：

```
// somewhere in your code behind, in code that definitely runs on the UI thread
// - e.g. in the OnLoaded method of your main window:
CoreDispatcher Dispatcher = Windows.UI.CoreWindow.GetForCurrentThread().Dispatcher; 

// In your call-back method:
if ((Dispatcher != null) && (!Dispatcher.HasThreadAccess))
{
    Dispatcher.RunAsync(
                Windows.UI.Core.CoreDispatcherPriority.Normal, 
                (obj, invokedArgs) => { App.mainFrame.Navigate(typeof(Page2));}, 
                this, 
                null
     );
}
else
    App.mainFrame.Navigate(typeof(Page2)); 
```

# ios - 通知中心中缺少启用了 APNS 的 iOS 应用程序（对于某些设备）

> ID：12969468
> 
> 赞同：1
> 
> 时间：2012-10-19T07:34:45.520
> 
> 标签：ios, apple-push-notifications, xcode4.5

我们安装了 5 台设备，这些设备由 Xcode > Archive > Distribute > Save for Ad-hoc Distribution > 导出具有启用 APNS 的配置文件生成的相同开发版本应用程序。

但是，通知中心只有 2 台设备有该应用程序，而其他 3 台设备则缺少该项目，这 3 台设备无法接收推送通知。

背后可能的原因是什么？

其中一些正在使用 iOS 4，其中一些正在使用 iOS 5。我正在使用 Xcode 4.5 来构建和存档 IPA。这些设备都没有越狱。

# regex - 在查找命令中为多种文件类型使用正则表达式

> ID：12969479
> 
> 赞同：6
> 
> 时间：2012-10-19T07:35:11.767
> 
> 标签：regex, bash, file-extension

我目前正在使用

```
find . -name '*.[cCHh][cC]' -exec grep -nHr "$1" {} ; \
find . -name '*.[cCHh]' -exec grep -nHr "$1" {} ; 
```

在所有子目录中列出的所有以 .c、.C、.h、.H、.cc 和 .CC 结尾的文件中搜索字符串。但是由于这包括两个命令，所以感觉效率低下。

如何使用单个正则表达式模式来查找 .c、.C、.h、.H、.cc 和 .CC 文件？

我在 Linux 机器上使用 bash。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T07:47:50.427

您可以使用布尔 OR 参数：

```
find . -name '*.[ch]' -o -name '*.[CH]' -o -name '*.cc' -o -name '*.CC' 
```

以上在当前目录和所有子目录中搜索以以下结尾的文件：

*   `.c`,`.h`或
*   `.C`,`.H`或
*   `.cc`或者
*   `.CC`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-19T08:02:26.327

这应该工作

**乱**

```
find . -iregex '.*\.\(c\|cc\|h\)' -exec grep -nHr "$1" {} + 
```

`-iregex`对于不区分大小写的正则表达式模式。

`(c|cc|h)` （讨厌的转义未显示）匹配 c、cc 或 h 扩展

* * *

**干净的**

```
find -regextype "posix-extended" -iregex '.*\.(c|cc|h)' -exec grep -nHr "$1" {} + 
```

这也会找到 .Cc 和 .cC 扩展名。你被警告了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T11:15:50.703

该命令有效。

```
find -regextype posix-extended -regex '.+\.(h|H|c{1,2}|C{1,2})$' 
```

我希望我可以使用`iregex`. `iregex`还会找到`.Cc`and `.cC`。如果可以，该命令将如下所示。只是短一点。

```
find -regextype posix-extended -iregex '.+\.(h|H|c{1,2})$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:53:47.573

`find . -regex '.*\.\([chCH]\|cc\|CC\)'`
将查找名称以 .c、.C、.h、.H、.cc 和 .CC 结尾的所有文件，但找不到以 .hc、.cC 或 .Cc 结尾的任何文件。在正则表达式中，前几个字符匹配名称中的最后一个句点，括号中的替代匹配任何单个字符 c、h、C 或 H，或 cc 或 CC。

请注意，find`-regex`和 `-iregex`开关类似于`-name`and `-iname`，但正则表达式类型开关允许正则表达式 with`|`用于替代匹配。像`-iname`, `-iregex`不区分大小写。

先前答案中给出的（非功能性）形式
`find . -name '*.[cCHh][cC]?$'`
没有列出我的 linux 系统上的任何名称，其中包含 GNU find 4.4.2。作为正则表达式的另一个问题`'*.[cCHh][cC]?$'`是它会匹配您想要的 .c、.C、.h、.H、.cc`abc.Cc`和`xyz.hc`.CC 文件集中的名称。

# jdbc - jprante elasticsearch jdbc River 更改日期值

> ID：12969481
> 
> 赞同：5
> 
> 时间：2012-10-19T07:35:15.430
> 
> 标签：jdbc, elasticsearch, elasticsearch-jdbc-river

我正在尝试使用[jprante 的 elasticsearch jdbc river](https://github.com/jprante/elasticsearch-river-jdb)在 elasticsearch 中索引 mysql 记录。我刚刚注意到日期字段中的值在索引中发生了变化。

映射：

```
content_date:{
  "type":"date"
} 
```

`content_date`mysql中的记录字段->`2012-10-06 02:11:30`

跑完jdbc河之后....

`content_date`elasticsearch中相同记录的字段->`2012-10-05T20:41:30Z`

河：

```
curl -XPUT 'localhost:9200/_riv_index/_riv_type/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "com.mysql.jdbc.Driver",
        "url" : "jdbc:mysql://localhost:3306/db",
        "user" : "user",
        "password" : "password",
        "sql" : "select * from table where id=2409",
        "poll" : "1d",
        "versioning" : false
    },
    "index" : {
        "index" : "myindex",
        "type" : "mytype"
    }
}' 
```

日期格式的更改是可以接受的，但为什么日期值会更改？这条河正在为mysql记录的日期添加UTC时差并将其保存在elasticsearch中。如何停止此时间转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:33:57.163

在 Elasticsearch POV 中，文档是这样说的：

> 日期类型是映射到 JSON 字符串类型的特殊类型。它遵循可以显式设置的特定格式。所有日期均为 UTC。在内部，日期映射到数字类型 long，增加了从 string 到 long 以及从 long 到 string 的解析阶段。

不确定您是否可以更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T19:45:28.197

此问题的解决方案是在 jdbc 块中使用时区

```
"timezone" : "TimeZone.getDefault()" 
```

我还在 mysql DB 的单独字段中保存日期和时间

```
| date | date | YES | | NULL | |
| time | time | YES | | NULL | | 
```

Elasticsearch 使用 Joda 时间格式来保存日期。因此它会自动将我的日期转换为日期时间。

在日期字段中，由于我没有时间，它会自动添加零。

因为我需要通过 Kibana 显示数据，所以我需要这个拆分..我将日期和时间的格式转换为 varchar(20) 作为解决方法（我知道这是个坏主意），现在它工作正常..

# android - 通过使用 FLAG_ONGOING_EVENT 作为 setOngoing(true) 方法的替代方法将通知类型设置为正在进行

> ID：12969482
> 
> 赞同：0
> 
> 时间：2012-10-19T07:35:19.737
> 
> 标签：android, notifications, android-notifications

我知道有一种有用的方法 setOngoing(true) 可以将通知设置为正在进行的类型。但是，是否有可能以另一种方式做到这一点？喜欢使用 FLAG_ONGOING_EVENT？例如，我如何使用它来将下面的通知代码更改为正在进行的类型？

```
 new NotificationCompat.Builder(AudioService.this)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("My notification")
            .setContentText("Hello World!");
    // Creates an explicit intent for an Activity in your app
    Intent resultIntent = new Intent(AudioService.this, MainActivity.class);

    // The stack builder object will contain an artificial back stack for the
    // started Activity.
    // This ensures that navigating backward from the Activity leads out of
    // your application to the Home screen.
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(AudioService.this);
    // Adds the back stack for the Intent (but not the Intent itself)
    stackBuilder.addParentStack(MainActivity.class);
    // Adds the Intent that starts the Activity to the top of the stack
    stackBuilder.addNextIntent(resultIntent);
    PendingIntent resultPendingIntent =
            stackBuilder.getPendingIntent(
                0,
                PendingIntent.FLAG_UPDATE_CURRENT
            );
    mBuilder.setContentIntent(resultPendingIntent);
    NotificationManager mNotificationManager =
        (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    // mId allows you to update the notification later on.
    mNotificationManager.notify(mId, mBuilder.build()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:33:34.703

您可以直接在通知上设置标志。为此，请从`.build()`方法中获取结果并使用该[`flags`](http://developer.android.com/reference/android/app/Notification.html#flags)字段。

这是一个将“正在进行的事件”标志添加到任何现有标志的示例：

```
Notification note = mBuilder.build();
note.flags |= Notification.FLAG_ONGOING_EVENT;
mNotificationManager.notify(mId, note); 
```

它应该相当于调用`mBuilder.setOngoing(true)`.

# c# - 调用 SQL CLR 函数时出错

> ID：12969490
> 
> 赞同：1
> 
> 时间：2012-10-19T07:35:37.860
> 
> 标签：c#, sql-server, sqlclr

我正在编写一个 CLR 函数来解析表列并将结果写入另一个表。基本要求是解析`Detail`列，其中包含一个`Time`部分和一个`ID`部分。结果将是两个 ID 之间的时间差。

例如：Time1,Id1;Time2,Id2;Time3,Id3... 等等 Time2-Time1 是 Id1 所用的时间，以秒为单位。

相同的函数在普通控制台应用程序中工作，但是当我从 SQL 服务器调用它时，CLR 函数抛出异常。错误是

*在执行用户定义的例程或聚合“Function1”期间发生 .NET Framework 错误：System.Security.HostProtectionException：尝试执行 CLR 主机禁止的操作。受保护的资源（仅在完全信任的情况下可用）是：所有所需的资源是：UI System.Security.HostProtectionException：在 UserDefinedFunctions.Function1(String msisdn, String promptdetails)*

我的代码是：SqlConnection conn = new SqlConnection(); SqlCommand cmd = 新的 SqlCommand();

```
 int count = 0;
    string PromptPart = string.Empty;
    string PrevPromptPart = string.Empty;
    DateTime TimePart;
    TimePart = new DateTime();
    DateTime PrevTimePart;
    PrevTimePart = new DateTime();
    TimeSpan difference;

    try
    {
        count++;
        conn.ConnectionString = "Context Connection=true";
        cmd.Connection = conn;

        String[] string1 = promptdetails.Split(";".ToCharArray());
        foreach (var item1 in string1)
        {
            count++;
            String[] string2 = item1.Split(",".ToCharArray());
            PromptPart = string2[1];
            TimePart = DateTime.ParseExact(string2[0], "M/d/yyyy h:mm:ss tt", System.Globalization.CultureInfo.InvariantCulture);
            if (count > 1)
            {
                StringBuilder sbQuery = new StringBuilder(1024);
                sbQuery.Append("INSERT INTO [Shami].[DBO].[data] (MSISDN,PromptID1,PromptID2,TimeDifference) VALUES");
                sbQuery.Append("('");
                sbQuery.Append(msisdn);
                sbQuery.Append("',");
                difference = TimePart.Subtract(PrevTimePart);
                sbQuery.Append("'");
                sbQuery.Append(PrevPromptPart);
                sbQuery.Append("','");
                sbQuery.Append(PromptPart);
                sbQuery.Append("',");
                sbQuery.Append(difference.Seconds);
                sbQuery.Append(")");
                string sub = string.Empty;
                sub = sbQuery.ToString();
                try
                {
                    conn.Open();
                    cmd = new SqlCommand(sub);
                    SqlContext.Pipe.ExecuteAndSend(cmd);
                }
                catch (Exception ie)
                {
                    Console.WriteLine("Error..");
                }
            }
            if (count <= 1)
            {
                StringBuilder sbQuery = new StringBuilder(1024);
                sbQuery.Append("INSERT INTO [Shami].[DBO].[data] (MSISDN,PromptID1,PromptID2,TimeDifference) VALUES");
                sbQuery.Append("('");
                sbQuery.Append(msisdn);
                sbQuery.Append("',");
                sbQuery.Append("'_'");
                sbQuery.Append(",");
                sbQuery.Append(PromptPart);
                sbQuery.Append(",");
                sbQuery.Append("'0'");
                sbQuery.Append(")");
                string sub = string.Empty;
                sub = sbQuery.ToString();
                try
                {
                    conn.Open();
                    cmd = new SqlCommand(sub);
                    SqlContext.Pipe.ExecuteAndSend(cmd);
                }
                catch (Exception ie)
                {
                    Console.WriteLine("Error..");
                }
            }
            PrevPromptPart = PromptPart;
            PrevTimePart = TimePart;
        }

    }
    catch (Exception)
    { ;}
    finally
    {
        conn.Close();
        conn.Dispose();
        cmd.Dispose();
    }
    return msisdn; 
```

请让我知道我哪里出错了。我无法在 CLR 中调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-02T00:38:25.327

你只需要更换你的线路

Console.WriteLine("错误...");

用这条线：

SqlContext.Pipe.Send("错误...");

这将为您做同样的事情，它会运行

# javascript - asp.net 中的 Javascript 客户端验证

> ID：12969492
> 
> 赞同：0
> 
> 时间：2012-10-19T07:35:48.873
> 
> 标签：javascript, asp.net

我有与下拉列表相关的复选框列表和与单选按钮组相关的复选框。代码示例是这样的：

```
 <table class="style1">
        <tr>
            <td class="style10" colspan="6">
                </td>
        </tr>
        <tr>
            <td class="style6">
                <asp:CheckBox ID="chkBoxChanl" AutoPostBack="false" 
                    runat="server" Text="Channel" 
                    CssClass="ChkBoxStyle" Font-Size="Small" 
                     />&nbsp;</td>
            <td class="style7">
                <asp:DropDownList ID="ddlChannel" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style6">
                 <asp:CheckBox ID="chkBoxParty" runat="server" Text="Party" 
                     CssClass="ChkBoxStyle" Font-Size="Small" />&nbsp;</td>
            <td class="style7">
                <asp:DropDownList ID="ddlParty" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style13">
                <asp:CheckBox ID="chkBoxContntTyp" runat="server" Font-Bold="True" 
                    Text="Content Type" CssClass="ChkBoxStyle" Font-Size="Small"/>&nbsp;</td>

            <td class="style8" rowspan="2">
                <asp:RadioButton ID="rdBtnNews" runat="server" Text="News" CssClass="RadioGroup" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                <asp:RadioButton ID="rdBtnTicker" runat="server" Text="Ticker" CssClass="RadioGroup" />&nbsp;&nbsp;<asp:RadioButton ID="rdBtnBreakingNews"
                            runat="server" Text="Breaking News" CssClass="RadioGroup" />
                </br></br><asp:RadioButton ID="rdBtnBeeper" runat="server" Text="Beeper" CssClass="RadioGroup" />&nbsp;&nbsp;<asp:RadioButton 
                    ID="rdBtnTalkshow" runat="server" Text="TalkShow" CssClass="RadioGroup" /></td>
        </tr>
        <tr>
            <td class="style6">
                <asp:CheckBox ID="chkBoxDate" runat="server" Font-Bold="True" Text="Date" 
                    CssClass="ChkBoxStyle" Font-Size="Small" />&nbsp;</td>
            <td class="style7">
                <asp:TextBox ID="tbFrom" runat="server" CssClass="tbDate"></asp:TextBox><asp:Label ID="Label5"
                    runat="server" Text="To"></asp:Label><asp:TextBox ID="tbTo"
                    runat="server" CssClass="tbDate"></asp:TextBox>&nbsp;</td>
            <td class="style6">
                <asp:CheckBox ID="chkBoxPerson" runat="server" Font-Bold="True" Text="Person" 
                    CssClass="ChkBoxStyle" Font-Size="Small" />&nbsp;</td>
            <td class="style7">
                <asp:DropDownList ID="ddlPerson" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style13">
                </td>
        </tr>
        <tr>
            <td class="style4">
                <asp:CheckBox ID="chkBoxProgrm" runat="server" Font-Bold="True" 
                    Text="Program" CssClass="ChkBoxStyle" Font-Size="Small"/>&nbsp;</td>
            <td class="style3">
                <asp:DropDownList ID="ddlProgram" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style5">
                <asp:CheckBox ID="chkBoxProvince" runat="server" Font-Bold="True" 
                    Text="Province" CssClass="ChkBoxStyle" Font-Size="Small"/>&nbsp;</td>
            <td class="style3">
                <asp:DropDownList ID="ddlProvince" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style18">
                <asp:CheckBox ID="chkContentTone" runat="server" Font-Bold="True" 
                    Text="Content Tone" CssClass="ChkBoxStyle" Font-Size="Small"/>&nbsp;</td>
            <td class="style9">
                <asp:RadioButton ID="rdBtnPositive" runat="server" Text="Positive" CssClass="RadioGroup" />&nbsp;&nbsp;<asp:RadioButton 
                    ID="rdBtnNegative" runat="server" Text="Negative" CssClass="RadioGroup" />&nbsp;&nbsp;<asp:RadioButton ID="rdBtnNeutral"
                            runat="server" Text="Neutral" CssClass="RadioGroup" />&nbsp;</td>
        </tr>
        <tr>
            <td class="style14">
                <asp:Label ID="Label4" runat="server" Text="Keyword" Font-Names="Verdana,Arial" 
                    Font-Bold="True" Font-Size="Small"></asp:Label>&nbsp;</td>
            <td class="style15">
                <asp:TextBox ID="tbKeyword" runat="server" CssClass="tb"></asp:TextBox>&nbsp;</td>
            <td class="style14">
                <asp:CheckBox ID="chkBoxCity" runat="server" Font-Bold="True" Text="City" 
                    CssClass="ChkBoxStyle" Font-Size="Small"/>&nbsp;</td>
            <td class="style15">
                <asp:DropDownList ID="ddlCity" runat="server" CssClass="ddl">
                </asp:DropDownList>&nbsp;</td>
            <td class="style16">
                </td>
            <td class="style17">
                <asp:Button ID="Button1" runat="server" Text="Search" CssClass="button" />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<asp:Button ID="Button2"
                    runat="server" Text="Report" CssClass="button" /></td>
        </tr>       
    </table> 
```

如下所示。 ![在此处输入图像描述](../Images/5df5f4d463d66d742e2a374ae5ea5aaa.png)

但我想在页面加载时禁用所有下拉列表和单选按钮，当我选中复选框时，只启用相关的下拉列表或复选框组。像这样。 ![在此处输入图像描述](../Images/96094a71c769e718972d002c87bffdee.png) 当我选中复选框（内容类型）时，单选按钮组会像这样启用。 ![在此处输入图像描述](../Images/98b1349209555d00b2f2519cac73b6a6.png) 我希望当我选中任何复选框时，相关的下拉列表或单选按钮组就会启用。我想要的所有这些都在客户端（服务器端是我已经知道的不好的做法）java脚本。任何想法，因为我从过去 2 天开始搜索，但没有找到任何结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:07:24.233

这是标记：

```
<asp:CheckBox ID="CheckBox1" CssClass="toggleCheckBox" runat="server" 
     data-associatedTo="<%# TextBox1.ClientID %>" />
<asp:TextBox ID="TextBox1" runat="server" />
<br />
<asp:CheckBox ID="CheckBox2" CssClass="toggleCheckBox" runat="server" 
     data-associatedTo="radioButtionsPanel1" />
<div id="radioButtionsPanel1">
     <asp:RadioButtonList ID="RadioButtonList1" runat="server">
          <asp:ListItem Text="First" />
          <asp:ListItem Text="Second" />
          <asp:ListItem Text="Third" />
     </asp:RadioButtonList>
</div>
<br />
<asp:CheckBox ID="CheckBox3" CssClass="toggleCheckBox" runat="server" 
     data-associatedTo="<%# DropDownList1.ClientID %>" />
<asp:DropDownList ID="DropDownList1" runat="server">
     <asp:ListItem Text="First" />
     <asp:ListItem Text="Second" />
     <asp:ListItem Text="Third" />
</asp:DropDownList> 
```

我曾使用数据绑定表达式来设置`data-associatedTo`属性值。如果您愿意，您可以将此属性添加到代码隐藏中的复选框，例如在`Page_PreRender`事件处理程序中。

这是javascript：

```
<script type="text/javascript">
     $(function () {
          $(".toggleCheckBox[data-associatedTo]").each(function () {
               enabeDisableAssociatedControl(this); // disable associated controls
               $(this).on("click", function () { 
                     enabeDisableAssociatedControl(this); });
          });
     });

     function enabeDisableAssociatedControl(checkBox) {
          var targetControl = $("#" + $(checkBox).attr("data-associatedTo"));
          if (targetControl) {
               var checked = $(":checkbox", checkBox).is(":checked");
               targetControl.find("*").andSelf().each(function () { this.disabled = !checked; });
          }
     }
</script> 
```

# javascript - 如何为文本框设置按钮渐变颜色？

> ID：12969497
> 
> 赞同：2
> 
> 时间：2012-10-19T07:36:06.553
> 
> 标签：javascript, html, css

![在此处输入图像描述](../Images/c4bf1270cac4f89e4254aa591cb39808.png)

我想设计一个文本框和文本区域，里面有一些渐变效果，看起来像上面的img。

我找到了一种在按钮上设置它的方法。

但我无法将其修复到文本区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:55:11.290

你可以检查这个[Ultimate Gradient Generator](http://www.colorzilla.com/gradient-editor/)或[Css Portals](http://www.cssportal.com/form-elements/text-box.htm)。这将满足您的需求。

因此，您还没有插入 css 和 html。我们可以做到这一点。

如果您需要代码，请使用以下代码

> ```
>  .gradient_effect{
>  background: rgb(252,255,244); /* Old browsers */
>  background: -moz-linear-gradient(top,  rgba(252,255,244,1) 0%, rgba(223,229,215,1)     40%, rgba(179,190,173,1) 100%); /* FF3.6+ */
> background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(252,255,244,1)), color-stop(40%,rgba(223,229,215,1)), color-stop(100%,rgba(179,190,173,1))); /* Chrome,Safari4+ */
> background: -webkit-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%); /* Chrome10+,Safari5.1+ */
> background: -o-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%); /* Opera 11.10+ */
> background: -ms-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%); /* IE10+ */
> background: linear-gradient(to bottom,  rgba(252,255,244,1) 0%,rgba(223,229,215,1) 40%,rgba(179,190,173,1) 100%); /* W3C */
> filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4', endColorstr='#b3bead',GradientType=0 ); /* IE6-9 */ 
> ```

```
.text_box-border:double 5px #000000;
-moz-border-radius-topleft: 8px;
 -moz-border-radius-topright:8px; 
-moz-border-radius-bottomleft:8px;
-moz-border-radius-bottomright:8px; 
-webkit-border-top-left-radius:8px;
-webkit-border-top-right-radius:8px; 
-webkit-border-bottom-left-radius:8px;
-webkit-border-bottom-right-radius:8px;
border-top-left-radius:8px;
border-top-right-radius:8px; 
border-bottom-left-radius:8px;
border-bottom-right-radius:8px;
 -moz-box-shadow: 10px 10px 5px #8c898c;
-webkit-box-shadow: 10px 10px 5px #8c898c;
box-shadow: 10px 10px 5px #8c898c;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:41:56.110

```
textarea {
  background: -webkit-linear-gradient(red, black);
  background: -moz-linear-gradient(top,  red,  black);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff0000', endColorstr='#000000');
}​ 
```

[http://jsfiddle.net/EjFUd/](http://jsfiddle.net/EjFUd/)

**编辑：**打败我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:42:41.443

```
​textarea {
    background: rgb(255, 255, 255);
    background: -moz-linear-gradient(270deg, rgb(255, 255, 255) 75%, rgb(230, 230, 230) 100%);
    background: -webkit-linear-gradient(270deg, rgb(255, 255, 255) 75%, rgb(230, 230, 230) 100%);
    background: -o-linear-gradient(270deg, rgb(255, 255, 255) 75%, rgb(230, 230, 230) 100%);
    background: -ms-linear-gradient(270deg, rgb(255, 255, 255) 75%, rgb(230, 230, 230) 100%);
    background: linear-gradient(270deg, rgb(255, 255, 255) 75%, rgb(230, 230, 230) 100%);
}​ 
```

示例 - [http://jsfiddle.net/VSpB8/](http://jsfiddle.net/VSpB8/)

更多 css3 生成器 - [http://css3gen.com/gradient-generator/](http://css3gen.com/gradient-generator/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:43:14.860

在这里试试这个：[注意：调整你想要的颜色]

CSS：

```
#gradientTextarea  {
 background: -moz-linear-gradient(top, #ffffff 0%, #f5f5f5 100%); / FF3.6+ /
 background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff),  color-stop(100%,#f5f5f5)); / Chrome,Safari4+ /
 background: -webkit-linear-gradient(top, #ffffff 0%,#f5f5f5 100%); / Chrome10+,Safari5.1+ /
 background: -o-linear-gradient(top, #ffffff 0%,#f5f5f5 100%); / Opera 11.10+ /
 background: -ms-linear-gradient(top, #ffffff 0%,#f5f5f5 100%); / IE10+ /
 background: linear-gradient(to bottom, #ffffff 0%,#f5f5f5 100%); / W3C /
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f5f5f5',GradientType=0 );
 border:1px solid #f5f5f5;
} 
```

html

```
<textarea id="gradientTextarea"></textarea> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:40:36.673

```
#gradient {
  background: -webkit-gradient(linear, center top, center bottom, color-stop(0%, #ccc), color-stop(100%, #fff));
  background: -moz-linear-gradient(top, #ccc, #fff);
} 
```

with`#grandient`作为输入框的id

使用这个来生成你的渐变： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# vb.net - 在 VB.NET 中复制字节数组

> ID：12969498
> 
> 赞同：2
> 
> 时间：2012-10-19T07:36:11.800
> 
> 标签：vb.net, sqlite, garbage-collection

我正在从 SQLite 数据库/记录集中检索字节 blob。我还没有垃圾收集的经验。

当我说：

```
Dim bt() As Byte
bt = r.fields("mybyteblob").value 
```

……这还好还是不安全？

我想在记录集字段中复制字节数组，我不确定我是否只是在这里引用字节数组而不是复制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:51:52.897

在您的代码中，您仅引用字节数组。
如果你想复制它，你需要

```
Dim bt() As Byte 
if r.fields("mybyteblob").Value Is not Nothing then 
    dim lenArray = r.fields("mybyteblob").Length
    bt = new Byte(lenArray)
    Array.Copy(r.fields("mybyteblob").value, bt, lenArray)
end if 
```

还有另一种选择。
Buffer 类比 Array 更快并且更合适，因为您使用的是字节数组

```
Dim bt() As Byte 
if r.fields("mybyteblob").Value Is not Nothing then 
    dim lenArray = r.fields("mybyteblob").Length
    bt = new Byte(lenArray)
    Buffer.BlockCopy(r.fields("mybyteblob").value, 0, bt, 0, lenArray)
end if 
```

这是关于这两种方法[的一个很好的问题](https://stackoverflow.com/questions/1389821/array-copy-vs-buffer-blockcopy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:34:02.517

如果您只编写托管代码（即没有 P/Invoke），那么遇到垃圾收集问题是**非常罕见的。**

许多聪明的人已经付出了很多努力来让垃圾收集工作而不用担心它，所以就这样做吧：不用担心。只需编写代码，如果遇到不理解的特定行为，请询问该特定行为（我可以向您保证，在 99.9967% [1] 的情况下，它不会是垃圾收集器）。

[1] 这不是一个随机数。在大约 10 年的编程中，我遇到过一次垃圾收集问题。假设每天有 10 个错误，每年工作 300 天，那么与垃圾收集无关的错误为 29999/30000 个 = 99.9967%。

# python - 变色龙模板渲染

> ID：12969504
> 
> 赞同：0
> 
> 时间：2012-10-19T07:36:38.543
> 
> 标签：python, templates, chameleon

我是变色龙模板的新手。我粘贴代码片段..

运行临时文件

```
 import os
 path = os.path.dirname(__file__)
 from chameleon import PageTemplateLoader
 templates = PageTemplateLoader(os.path.join(path, "templates"))
 template = templates['mytemp.pt']
 template(name='John')
 print str(template.read()) 
```

mytem.pt

```
 <testtag>
       <innertesttag>${name}</innertesttag>
  </testtag> 
```

但我得到的输出是

```
 <testtag>
       <innertesttag>${name}</innertesttag>
 </testtag> 
```

我期待 John 在输出中而不是 od $(name)
出了什么问题？如何渲染模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:39:26.203

`template.read()`只读取模板的内容；您丢弃了实际的渲染结果。`template(name='John')`返回渲染。

改为这样做：

```
print template(name='John') 
```

# javascript - JS 进度条不随 document.write 更新

> ID：12969506
> 
> 赞同：0
> 
> 时间：2012-10-19T07:36:42.460
> 
> 标签：javascript, dom, progress-bar

我正在使用这个 JS 在我的网站上创建进度条：[http ://www.webappers.com/progressBar/](http://www.webappers.com/progressBar/)

在某些页面上，我在表格中使用这些条。但是由于未知原因，我第一次加载包含表格的页面时，仅（部分）显示了条形图，未呈现文档的其余部分：

![空的进度条](../Images/d978868489d3ec1b1970db50c33dd45b.png)

这是当表格只有 1 行时，如果有很多行，我就会将其中的很多行并列，而文档的其余部分仍然是空的。

现在，如果我再次加载页面（手动键入 URL），它工作正常，表格和所有文档都按原样呈现。但是如果我刷新页面（CTRL+R），问题又会出现。

知道发生了什么吗？使用 JS 调试器（Chrome 的调试器），我可以看到调用了“显示”函数并且条的“document.write”运行正常。似乎在此之后文档呈现突然停止。没有发生 JS 错误。

正如评论中所建议的，我应该删除“document.write”并将其替换为其他内容。知道什么可以解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:55:48.087

好吧，如果您不了解 Javascript，只需向您最喜欢的搜索引擎询问相同类型的更新脚本即可。一种使用 DOM。我敢肯定那里有很多。

# qt - 删除 QStandardItemModel 的多个索引的正确方法是什么？

> ID：12969509
> 
> 赞同：4
> 
> 时间：2012-10-19T07:36:52.793
> 
> 标签：qt, model, qt4

我试图删除 QTableView 的所有选定索引，

现在我使用：

```
foreach (const QModelIndex & idx, model->selectionModel()->selectedIndexes())
{
    model->removeRow (idx.row()); // Obviously bug
} 
```

有一个明显的问题，一旦你删除了行，行id就失效了，w

由于没有直接获取索引的函数（或者索引是否像迭代器一样在数据更改时失效？），我不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T09:02:28.553

有`QPersistanceModelIndex`类保持索引的有效状态。我试过了，它似乎正在工作。

```
QList<QPersistentModelIndex> indexes;

foreach (const QModelIndex &i, ui->tableView->selectionModel()->selectedIndexes())
    indexes << i;

foreach (const QPersistentModelIndex &i, indexes)
    ui->tableView->model()->removeRow(i.row()); 
```

我希望它会有所帮助。

# javascript - 带有文件上传的 Jquery 表单 - onclick 而不是 dom 就绪

> ID：12969522
> 
> 赞同：0
> 
> 时间：2012-10-19T07:37:27.490
> 
> 标签：javascript, jquery

```
 $("#form").submit(function() {
     $(this).ajaxSubmit({
         beforeSubmit: function(before) {
             $('.result').html('loading');
         },
         success: function(d) {
             //result process
         }
     }); 
     return false;
 }); 
```

当我单击提交按钮时，此功能效果很好。但是我想在按下按钮时提交表单。上面的函数写在side

```
 $(document).ready(function() { 
```

但我想把它写在一个普通的javascript函数中。

我正在使用表单插件。**form.min.js**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:41:06.607

好吧，然后订阅你的 DOM 元素的点击处理程序：

```
$(document).ready(function() {
    $('#myButton').click(function() {
        $("#form").ajaxSubmit(
            beforeSubmit: function(before) {
                $('.result').html('loading');
            },
            success: function(d) {
                //result process
            }
        );    
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:41:25.060

试试这个

```
<form action='' method='post' onsubmit='return uploadimg();'>

<script>
function uploadimg(){
    $(this).ajaxSubmit({
     beforeSubmit: function(before) {
         $('.result').html('loading');
     },
     success: function(d) {
         //result process
     }
 });
 return false;
} 

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:41:48.080

```
<button id="formSubmit"> 
```

将表单提交绑定到按钮单击事件应该像这样工作：

```
$('#formSubmit').on('click', function(){
    $('#form').ajaxSubmit({
         beforeSubmit: function(before) {
             $('.result').html('loading');
         },
         success: function(d) {
             //result process
         }
     }); 
     return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:51:04.390

你几乎明白了，在 document.ready 中绑定的点就是准备读取 dom 的点，我们知道为 dom 元素设置事件处理程序是安全的，通常的做法是在你的 document.ready 中处理程序，您将绑定分配给您的元素，假设您有一个 ID 为“submitImageForm”的按钮，代码就像这样

```
$(function(){
  $("#submitImageForm").click(function(e){ // tell the browser we wanner handle the onClick event of this element
    e.preventDefault() // this is to tell the browser that we are going to handle things and it shod not do its default (e.g sending the form up to the server and reloading)

    $("#form").submit(function() {
      $(this).ajaxSubmit({
         beforeSubmit: function(before) {
             $('.result').html('loading');
         },
         success: function(d) {
         //result process
         }
     })

    })
  })
}) 
```

# java - 垂直滚动出现在表格底部。需要它在顶部

> ID：12969523
> 
> 赞同：2
> 
> 时间：2012-10-19T07:37:32.163
> 
> 标签：java, jsp, scrollbar

我有一个jsp页面。它包含一些从数据库中提取的表。我用 < tbody id="x" style="overflow:auto" /> 这样滚动条出现在底部。我希望它在我点击弹出这个带有表格的页面的按钮后位于顶部。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T09:29:44.783

添加垂直滚动有两种方法

首先当高度溢出时意味着你必须提到桌子的高度然后它才会生效

否则它会在从数据库中找到数据并根据表格或页面的高度自动生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T07:56:05.803

```
<script type="text/javascript">
$(function(){
  $(".wrapper1").scroll(function(){
    $(".wrapper2").scrollLeft($(".wrapper1").scrollLeft());
  });
  $(".wrapper2").scroll(function(){
    $(".wrapper1").scrollLeft($(".wrapper2").scrollLeft());
  });

});
$(document).ready(function(){
var a=$(".div2 > table").width()+50;
$('.div2').css('width',a+'px');
$('.div1').css('width',a+'px');

});

        </script>

 <style>
.wrapper1, .wrapper2 {width:100%;overflow-x: scroll;overflow-y:hidden;}
.wrapper1 {height: 20px; }
.div1 {width:2500px;height: 20px;}
.div2 {width:2500px;overflow: auto;}
        </style>
<div class="wrapper1">
  <div class="div1"></div>
</div>
<div class="wrapper2">
  <div class="div2"><table></table></div>
</div> 
```

# linkedin - LinkedIN 集成 JS API

> ID：12969527
> 
> 赞同：2
> 
> 时间：2012-10-19T07:37:37.610
> 
> 标签：linkedin

我们正在与 Linked IN 集成以提取用户配置文件。它工作正常，但我们注意到在一些 Windows 7 / IE 9 机器中，Linked IN 弹出窗口出现并且是空白的。我们在控制台中看到以下错误。

消息：对象不支持属性或方法“替换”行：861 字符：17 代码：0 URI：[http ://platform.linkedin.com/js/framework?v=0.0.2000-RC1.21420-1403&lang= zh_CN](http://platform.linkedin.com/js/framework?v=0.0.2000-RC1.21420-1403&lang=en_US)

下面的代码片段

```
<script type="text/javascript" src="https://platform.linkedin.com/in.js?async=false" >
  api_key: tw6oqfav7ms1
  authorize:false  
</script> 

//We have a custom image for linkedIN, onclick of the same below code is called.
$("#mylinkedin").click(function () {
  IN.UI.Authorize().params({"scope":["r_fullprofile", "r_emailaddress","r_contactinfo"]}).place();
  IN.Event.on(IN, "auth", onLinkedInAuth);
});

function onLinkedInAuth() {    
    IN.API.Profile("me").fields([ "id","firstName", "location","lastName","skills","positions","educations","languages","phone-numbers","certifications","emailAddress","mainAddress"]).result(displayProfiles);
    IN.User.logout(); //After we take the data, we do a log out
    $.get("https://api.linkedin.com/uas/oauth/invalidateToken");
}

function displayProfiles(profiles) {
 //Access profile and process
 member = profiles.values[0]
 ...........
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:19:56.947

感谢您的回复。我能够自己解决这个问题。我们观察到的是在Win7 的IE9 机器上，Linked IN 授权Pop Up 是空白的。当我取消选中“启用保护模式”时，弹出窗口没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:30:06.360

我没有机会对此进行测试，但对我来说，您似乎在代码中引入了竞争条件，特别是在`onLinkedInAuth()`.

调用调用了对 LinkedIn 的异步调用，该调用在代码`IN.API.Profile()`中的 JavaScript 引擎时可能尚未完成。`IN.User.logout()`

我会将代码更改为以下内容，看看是否可以解决问题：

```
IN.API.Profile("me")
  .fields([ "id","firstName", "location","lastName","skills","positions","educations","languages","phone-numbers","certifications","emailAddress","mainAddress"])
  .result(function(profile) {
    displayProfiles(profile);
    IN.User.logout(); //After we take the data, we do a log out
    $.get("https://api.linkedin.com/uas/oauth/invalidateToken");
  }); 
```

# ios - 原生 iOS 客户端可以连接到 meteor.js 服务器吗？

> ID：12969528
> 
> 赞同：12
> 
> 时间：2012-10-19T07:37:39.090
> 
> 标签：ios, objective-c, mongodb, websocket, meteor

我对meteor.js 框架非常感兴趣。但是，我不确定是否可以通过 Objective-C 的原生对象（例如 NSURLConnection）来利用框架的实时功能。我有一些具体的问题可以参考这个关于meteorjs[如何工作的问题：Meteor JavaScript 框架是如何工作的？](https://stackoverflow.com/questions/10214385/how-does-meteor-js-work)

**让我们从 Web 套接字开始：**

> 客户端/服务器消息传递是通过 websocket 使用 socks.js 或 socket.io 之类的东西完成的。

是否有用于在能够与 Meteor 服务器通信的本机应用程序中使用 websocket 的 Objective-C 库或框架？

**二是mongoDB客户端：**

> 与 mongodb 的客户端连接非常酷。它将 mongo-server 驱动程序复制到客户端。不幸的是，上次我检查时，他们仍在努力保护这个数据库连接。

这似乎是流星最有趣的部分。但是，这是否意味着除了在隐藏的 UIWebView 中执行 JavaScript 字符串之外，没有标准的方式与流星服务器进行通信？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-09T06:49:53.797

对于任何对此感兴趣的人，我一直在这里开发一个客观的 ddp 客户端库。我才刚刚开始，还没有文档，但一切正常。项目在这里：[https ://github.com/boundsj/ObjectiveDDP](https://github.com/boundsj/ObjectiveDDP)

ddp 客户端的规格在这里：[https ://github.com/boundsj/ObjectiveDDP/blob/master/Specs/ObjectiveDDPSpec.mm](https://github.com/boundsj/ObjectiveDDP/blob/master/Specs/ObjectiveDDPSpec.mm)

我还在为流星身份验证构建一个库，以便 ios 客户端可以使用密码包向流星服务器进行身份验证。这一切都放在一起并在这个示例待办事项应用程序中工作（也是同一个 repo 的一部分）：[https ://github.com/boundsj/ObjectiveDDP/tree/master/Example](https://github.com/boundsj/ObjectiveDDP/tree/master/Example)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T07:58:15.700

不是完整的答案，但希望有一些指导可以帮助您入门。

Meteor 使用称为 DDP - 分布式数据协议的协议。介绍它的博文在这里： http: [//meteor.com/blog/2012/03/21/introducing-ddp](http://meteor.com/blog/2012/03/21/introducing-ddp)

github上有一个Objective-C客户端库：[https](https://github.com/alansikora/objective-c_ddp-client) ://github.com/alansikora/objective-c_ddp-client虽然我不能保证它也没有真正的文档，但代码很短，应该是合理的已经编写过 Objective-C 的人可以理解。

除此之外，我建议深入研究一下，看看您是否可以发现任何适用于 iOS 客户端的技术。Meteor 还处于早期阶段，所有人都在学习如何使用它。

# facebook - 脸书照片打开图

> ID：12969538
> 
> 赞同：0
> 
> 时间：2012-10-19T07:38:24.520
> 
> 标签：facebook, hyperlink, facebook-opengraph, photo

![在此处输入图像描述][1]

测试 img 链接 = [http://www.kimjongchan.com/2012/10/19/test/](http://www.kimjongchan.com/2012/10/19/test/)

有谁知道如何删除链接？

我想删除“照片”链接，因为布丁相机没有任何登陆页面。它只是拍照应用程序而不是共享应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:50:52.270

我认为这是不可能的，因为这是为 action 给出的对象，没有对象或 action 我们不能做与 opengraph 相关的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:51:24.053

每个 Open Graph 对象都必须有一个可公开访问的 URL。
您可以选择在有人访问该 URL 时不显示照片，但我不明白这一点。
您在 Facebook 上**分享**照片，但不想在您的网站上**分享**照片？

也许您应该使用[常规照片上传](https://developers.facebook.com/blog/post/498/)而不是 Open Graph。

# java - 为什么我不能远程调试？我怎么能找出原因？

> ID：12969539
> 
> 赞同：4
> 
> 时间：2012-10-19T07:38:25.300
> 
> 标签：java, linux, eclipse, debugging, remote-debugging

如果无法使用 java 进程连接进行远程调试，那么如何“调试”这个问题？
没有防火墙
我可以连接到远程调试器，但并非总是如此。我的意思是如果我连接和断开连接，就不可能再次重新连接；

有没有办法调试这个？java有这方面的日志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:43:30.653

你能检查一下远程机器上配置的调试端口和你尝试使用的调试端口是一样的吗？这可能是一种可能的情况。

如果您没有配置调试端口，请尝试配置它。您的呼叫将始终通过该端口而不是您的服务器处理的默认/随机端口进行路由。

这是我如何为 weblogic 做的一个例子

```
set JAVA_OPTIONS=-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=4529,server=y,suspend=n 
```

# networking - RPC 是双向的吗？

> ID：12969542
> 
> 赞同：0
> 
> 时间：2012-10-19T07:38:38.767
> 
> 标签：networking, rpc

远程过程调用是否支持双向通信？

IE。是否可以建立沟通机制

*   使用“纯” RPC（在其之上**没有任何协议，如 XML-RPC、JSON-RPC、Thrift 等），其中**
*   允许两台机器双向交换消息**（**从机器 1 到机器 2，反之亦然） ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:53:37.020

众所周知的旧 RPC（ONC RPC/SUN RPC）允许双向连接。当然，最后你需要一个支持它的实现。这是由 LinuxBox [https://github.com/mattbenjamin/libtirpc-lbx](https://github.com/mattbenjamin/libtirpc-lbx)维护的 ti-rpc 的一个分支，以及具有双向 rpc 支持的 java 实现[http://code.google.com/p/nio-jrpc/](http://code.google.com/p/nio-jrpc/) . NFSv4.1 服务器/客户端实现中使用的两个库都需要双向 RPC。

# google-analytics - 单个网站中每个个人资料页面的单独分析

> ID：12969543
> 
> 赞同：0
> 
> 时间：2012-10-19T07:38:42.257
> 
> 标签：google-analytics, matomo

我的网站上有多个个人资料，每个用户都在自己管理他/她的个人资料。我正在尝试找到最有效的方法来向其所有者展示每个配置文件的分析。以下是我找到的 3 种方法：

1.  记录在个人资料页面上针对该个人资料所做的每一次点击。这不仅仅是点击次数，这需要针对每次点击记录 IP、国家、引荐来源、搜索词等。这将需要我管理一个庞大的数据库，因为每个页面上都会有很多点击。并且在这个数据库上进行了大量的处理。即使我必须这样做，建议使用什么数据库？
2.  在每个页面上使用 Google Analytics。但我不确定 Google Analytics 是否提供 API 来获取各个页面的 Analytics。
3.  使用一些开源解决方案，如 piwik。同样，我不确定他们是否提供每页分析。

请提出使用每种方法的优缺点。

**更新：**更多解释 - 把它想象成一个 facebook 页面，每个用户都可以在他的页面上看到点击。你会建议什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:05:12.337

对于 Piwik，您可以为每个用户创建一个站点 ID，因为您可以使用 Piwik 无限的站点 ID。您可以使用带有该用户 siteid 的跟踪器，因此当您的会员登录时，他们只能在其页面上获取数据。您可能还想查看使用自定义变量并使用 Piwik API 过滤数据。在此处查看有关多跟踪器的信息：http: [//piwik.org/docs/javascript-tracking/#toc-multiple-piwik-trackers](http://piwik.org/docs/javascript-tracking/#toc-multiple-piwik-trackers)

# sql-server - SQL Power 函数对大数字不正确

> ID：12969549
> 
> 赞同：0
> 
> 时间：2012-10-19T07:39:24.613
> 
> 标签：sql-server, function

如果我尝试执行此查询：

```
SELECT POWER(CONVERT(DECIMAL(30,0), 64), 10) 
```

我收到：

```
1152921504606847000 
```

那是不正确的。正确的结果是：

```
1152921504606846976 
```

我怎样才能收到正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:56:33.233

```
select cast(power(convert(float(30), 64), 10) as bigint) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:48:48.140

这是由于计算的精度。你可以有非常大的数字，但精度会下降，因为你只有固定数量的位来存储你的值......

[这是对情况的一个很好的解释](https://stackoverflow.com/questions/4199371/sql-server-precision-crazyness)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:48:10.123

如果你想要正确的结果，你可以手动计算。

IE

```
declare @res bigint, @i int
select @res = 64, @i = 1

while @i<10
begin
    select @res = @res * 64, @i=@i+1    
end
select @res 
```

# algorithm - Aes 的两种不同实现是否有不同的密文？

> ID：12969554
> 
> 赞同：3
> 
> 时间：2012-10-19T07:39:40.713
> 
> 标签：algorithm, cryptography, aes

我正在使用库 1 Aes 算法实现，现在我想将其更改为库 2 的另一个实现，它工作正常，但问题是它给了我来自库 1 的差异加密数据，是否可以使用 ECB 模式 128 位的 Aes 实现相同的密钥和纯文本，但仅在密文（加密数据）方面不同，用于 2 种不同的实现？

我发现另一件事是，如果我传递小于 16 字节的输入字节，那么两个库的加密数据就会匹配，但在 library1 中解密再次完美，但在 library2 中它显示的加密和解密是相同的（不完全解密到原文）会有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T02:04:35.293

鉴于您评论小于 16 字节的字符串导致相同的输出，以及您使用 ECB（您永远不应该使用），我怀疑您的库之一实际上并未使用 ECB，而是默认为 CBC（其中是一个更好的默认值）并且您将 NULL IV 传递给 CBC。如果我的理论是正确的，那么您应该期望前 16 个字节始终相同，并且在那之后开始出现差异。

最好的解决方案是将所有代码从 ECB（除了一些非常罕见的情况外，在所有情况下都严重损坏）转换为 CBC 或您可以找到的任何其他模式。CBC 是最常见的，您需要将随机生成的 IV 传递给它。

如果切换模式是不可能的，我会调查你的第二个库并确定如何将它设置为 ECB 模式，它目前可能不在。应该警告依赖你的加密的人，使用 ECB 模式会泄露有关明文的重要信息。有时它几乎没有加密。请参阅[Wikipedia](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)上的条目，以获得一个很好的视觉示例，说明它到底有多糟糕。这不是理论上的攻击。真的，真的坏了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T12:10:52.183

是的，正如评论所指出的那样，这是可能的。加密旨在显示输出的巨大变化，而输入的微小变化。理想情况下，输入中的一位更改将更改输出中 50% 的位。

避免大多数问题的方法是明确指定所有内容。不要依赖默认值，因为如果两个库之间的默认值不同，那么输出就会不同。

1.  显式指定字符编码以将字符转换为字节。UTF-8 很常见。

2.  明确指定您使用的加密模式。CBC 或 CTR 模式，如果您不希望包含身份验证，则为 GCM。

3.  最好使用字节而不是字符明确指定 IV。

4.  明确指定要使用的填充。PKCS7（又名 PKCS5）很常见。

如果您仍然遇到问题，请检查两个库的所有内容是否*逐字节*相同。不要检查字符，而是检查字节。也就是说，在将它们转换为字节数组之后以及在将它们传递给加密方法之前立即检查它们。

附带说明一下，ECB 模式不安全并且会泄露信息。它仅对测试密码方法的操作有用。正如我上面建议的那样，使用 CBC、CTR 或 GCM 模式。这些模式是安全的，GCM 包括身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:47:03.740

这里已经有很多正确的答案了。唯一想提的，之前没提过的。

> 是否可以使用 ECB 模式 128 位的 Aes 实现，具有相同的密钥和纯文本，但仅在 2 个不同实现的密文（加密数据）上有所不同？

在这种情况下，如果算法实现正确，相同的输入（纯文本、模式、IV、填充）**应该**产生相同的输出（密文）。

在这种情况下，如果您使用两个已建立的库，则很可能是前面提到的问题之一（输入之一的差异、编码等）。

# c# - 文件 I/O 最佳实践 - byte[] 还是 FileStream？

> ID：12969555
> 
> 赞同：3
> 
> 时间：2012-10-19T07:39:43.150
> 
> 标签：c#, .net, performance, stream, filestream

我目前正在处理许多不同的文件类型（txt、二进制、office 等）。我通常使用`byte[]`or`string`将文件数据保存在内存中（在写入/解析时），为了将其读/写到文件中，我`FileStream`在数据完全处理后使用 a 写入整个数据。

*   我应该使用 a`TextStream`而不是`string`为文本文件生成数据吗？
*   我应该使用 a`FileStream`而不是`byte[]`while 为二进制文件生成数据吗？
*   使用流是否会给我更好的性能，而不是计算整个数据并在最后一口气输出？
*   文件 I/O 应该始终使用流是一般规则，还是在某些情况下我的方法很好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:57:05.967

byte[]/string 与流相比的优势可能是 byte[]/string 在内存中，并且访问它可能更快。但是，如果文件非常大，您最终可能会出现分页，从而降低性能。byte[]/string 方法的另一个优点是解析可能更容易一些（例如，只需使用 File.ReadAllText）。

如果您的解析允许（特别是如果您不需要随机搜索），则使用 FileStream 会更有效，尤其是在文件相当大的情况下。此外，您可以利用 C# (4.5) 的 async/await 功能非常轻松地异步读取/写入文件并处理您读入的块。

就个人而言，如果我不太担心性能，或者文件非常小，我可能只是将文件读入内存。否则我会考虑使用流。

最后，如果您担心性能差异，我会说编写一些简单的测试程序并计算每个程序的性能，这应该会给您最好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:50:06.427

除了谈论数据的大小，另一个重要的问题是数据的目的。使用字符串和数组时，操作更容易执行。如果字符串和数组都同样方便，那么字节数组将是首选。必须解释字符串，这会带来复杂性（编码、BOM 等），因此会增加出现错误的可能性。仅对文本使用字符串。二进制数据应始终由字节数组或流处理。

每当您不必执行任何操作或受控数据非常大或受控数据进入非常缓慢时，都应考虑流。流是一种逐部分处理数据的自然方式，而字符串和数组通常希望数据在处理之前完整存在。

在流中工作通常会产生性能，因为它打开了异步读取和写入不同通道的可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:43:53.463

> 在为文本文件生成数据时

如果文件数据刷新是立即的，那么您的选择是[`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)在[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx). 如果没有，那么[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx).

> 同时为二进制文件生成数据？

[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)是一种选择。此外，[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)首选内存流。

# javascript - 为什么在验证完成之前我会弹出确认消息？

> ID：12969556
> 
> 赞同：0
> 
> 时间：2012-10-19T07:39:46.220
> 
> 标签：javascript, validation, popup, submit

我有一个表单，我的目标是有一个弹出窗口让用户知道他们的请求已成功提交，并且在弹出窗口关闭后，页面被刷新（使用标题）这工作正常，除了我得到弹出窗口甚至在所有数据都得到验证之前。我正在使用这个功能。

```
function myFunction(){alert("Your Request Has Been Submitted");} 
```

用我的提交按钮

```
<input type="submit" onclick="myFunction()"/> 
```

我需要将此功能放在哪里，以便在验证所有数据后才弹出确认？我需要某处的 IF 语句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:08:07.030

我终于想通了，它是如此简单！我的技能仍然相当缺乏，我想作为一个初学者很容易不必要地复杂化事情！！！

```
function validateForm(formElement) { 
    var valid = true;
    if (blah blah blah blah)...
    if (blah blah blah blah)...
    if (valid) {
    alert("After all this validation now we can have this sweet confirmation alert!!!")
    }
    return valid; 
```

我的下一步是将数据库中的自动增量值输入到警报中，再次感谢大家！

# c# - 将特定列中的数据集值检索到字符串中

> ID：12969559
> 
> 赞同：0
> 
> 时间：2012-10-19T07:40:04.890
> 
> 标签：c#, ado.net, dataset

在我的应用程序中，我想获取数据集中特定列中的数据并将其转换为带有逗号分隔的字符串。我使用了下面的代码。但我认为它使应用程序非常缓慢。

```
string ids = "";
if (datatable1.Rows.Count > 0)         
{
       foreach (DataRow dr in datatable1.Rows)
       {
           ids += dr["id"].ToString() + " ,";
       }

} 
```

任何人都可以提供一些建议来改进代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:41:20.507

如果您要进行太多连接，请使用[StringBuilder 。](http://msdn.microsoft.com/en-us/library/2839d5h5%28v=vs.71%29.aspx)

```
StringBuilder ids = new StringBuilder();
if (datatable1.Rows.Count > 0)         
{
       foreach (DataRow dr in datatable1.Rows)
       {
           ids.Append(dr["id"].ToString() + ",");
       }

} 
```

或者您可以使用[string.Join缩短它](http://msdn.microsoft.com/en-us/library/dd988350.aspx)

```
string ids = string.Join(",",datatable1.AsEnumerable()
                                       .Select(r=> r.Field<int>("ID"))); 
```

# jquery - 如何在只有 1 个弹出窗口的弹出窗口中显示放大的图像？

> ID：12969561
> 
> 赞同：0
> 
> 时间：2012-10-19T07:40:18.777
> 
> 标签：jquery, html, popup

我正在尝试在我的网页上显示我的产品的放大图像。当我单击缩略图时，应该会出现一个弹出窗口。我如何在缩略图中显示放大的图像，而不是为每个缩略图创建一个新的弹出窗口？

这是弹出窗口的 jQuery 代码，请告诉我在哪里添加新代码。

```
<script type="text/javascript">

$(document).ready( function() {
    $('ul.animated li').click( function() {
        $('#popup_box').fadeIn();
        $('#cover').fadeIn();
    });
    $('#popupBoxClose').click( function() {            
        $('#popup_box').fadeOut();
        $('#cover').fadeOut(); 
    });
    $('#cover').click( function() {
        $('#popup_box').fadeOut();
        $('#cover').fadeOut(); 
    });
}); </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:42:54.093

我不能评论你的帖子，所以我必须写这个作为答案。你检查过这个： [特定网页上的 jQuery 目标 $(window)](https://stackoverflow.com/questions/7340273/jquery-target-window-on-a-specific-webpage)吗？这可能不是你的问题，但我认为你可以使用 target($window)。

# java - 停止正在等待同步方法的 AsyncTask

> ID：12969568
> 
> 赞同：0
> 
> 时间：2012-10-19T07:40:52.043
> 
> 标签：java, android, multithreading, android-asynctask

我想停止/取消正在等待同步方法的挂起 AsyncTasks。

下面是我的代码：（它启动了所有 21 个 AsyncTasks。我想在中间停下来，例如在 10 个 asynctasks 完成之后。有人可以建议一种方法吗？

```
 for(int i=0;i<21;i++){

   SafeAsyncTask<String, Void, LinkInfo[]> mGetLinkInfo = new SafeAsyncTask<String,Void,LinkInfo []>() {

                protected LinkInfo[] doInBackground(String... v) {
                    return downloadLinks(v[0]);
                }

                protected void onPostExecute(LinkInfo[] links) {

                }
            };

            mGetLinkInfo.safeExecute(i);
 }
   synchronized void downloadLinks(){
         //Lengthy process
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:51:14.953

好吧，使用您的代码，您将获得 21 个不同的 AsyncTask，它们同时并行运行。所以你需要“在 10 个异步任务完成后停止”是没有意义的......

也许你会想要一个独特的异步任务，完成工作的 21 个不同部分。在每个部分之间，您可以插入一个停止条件：

```
 SafeAsyncTask<Void, Void, LinkInfo[]> mGetLinkInfo = new SafeAsyncTask<Void,Void,LinkInfo []>() {

                protected LinkInfo[] doInBackground() {
                     LinkInfo[] infos = new LinkInfo[21]; // Is this what you want ?
                     for(int i=0;i<21;i++) {
                         // Do part i/21 of the job
                         infos[i] = downloadLinks(i);
                         if (getStopCondition()) break;
                         }
                     return infos;
                     }
            };

    mGetLinkInfo.safeExecute(); 
```

# php - Ext JS 网格显示多个标题

> ID：12969569
> 
> 赞同：0
> 
> 时间：2012-10-19T07:40:54.783
> 
> 标签：php, extjs, grid

我想每 x 行显示一个带有多个标题的 Ext JS 网格，例如：

```
[ID | Name | Value]
001|John  | 10,000
002|Amy   | 15,000
[ID | Name | Value]
003|Mike  | 5,000
004|Lisa  | 45,000 
```

其中 ID、名称和值行是标题。

我想知道这是否可能。我检查了基本示例，但找不到任何关于它的信息，只有分组数据，这似乎不是我问题的解决方案。如果可能的话，您能否向我展示一个如何使用它的示例。

我能想到的唯一解决方案是在后端拆分数据并为每条数据构建一个网格，但这似乎是一个很长的问题。

我同时使用 Ext JS 版本 3.2.1 和 4.1，因为我们仍在从版本 3.2.1 转移到 4.1。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:56:38.743

目前这仅通过简单的配置是不可能的。您需要覆盖`Ext.panel.Table`&`Ext.view.Table`类并修改表的标记来执行此操作。这将是巨大的努力。作为替代方案，我可以建议检查`headerPosition`配置或设置一个合适的分页工具栏，`pageSize`如下所示：

```
var store = Ext.create('Ext.data.Store', {
        pageSize: 50,
        model: 'ForumThread',
        remoteSort: true,
        proxy: {
            // load using script tags for cross domain, if the data in on the same domain as
            // this page, an HttpProxy would be better
            type: 'jsonp',
            url: 'http://www.sencha.com/forum/topics-browse-remote.php',
            reader: {
                root: 'topics',
                totalProperty: 'totalCount'
            },
            // sends single sort as multi parameter
            simpleSortMode: true
        },
        sorters: [{
            property: 'lastpost',
            direction: 'DESC'
        }]
    });
Ext.create('Ext.grid.Panel', {
        //other config
        bbar: Ext.create('Ext.PagingToolbar', {
            store: store,
            displayInfo: true,
            displayMsg: 'Displaying topics {0} - {1} of {2}',
            emptyMsg: "No topics to display",
            items:[
                '-', {
                text: 'Show Preview',
                pressed: pluginExpanded,
                enableToggle: true,
                toggleHandler: function(btn, pressed) {
                    var preview = Ext.getCmp('gv').getPlugin('preview');
                    preview.toggleExpanded(pressed);
                }
            }]
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:29:17.980

我正在使用以下解决方案[http://www.sencha.com/forum/showthread.php?146348-ExtJS-4-Grid-Printer-Plugin](http://www.sencha.com/forum/showthread.php?146348-ExtJS-4-Grid-Printer-Plugin)打印具有多个标题的页面。

我改变的一件事是

```
'<tr>',
  headings,
'</tr>', 
```

进入

```
'<thead>',
  headings,
'</thead>', 
```

并将其添加到 css 以在每个打印页面上显示标题（适用于 FireFox 和 IE9）：

```
thead { 
    display: table-header-group; 
} 
```

# php - 使用php在Intranet中创建从服务器到客户端的文件夹

> ID：12969572
> 
> 赞同：0
> 
> 时间：2012-10-19T07:41:02.020
> 
> 标签：php

我有一台服务器，我需要在客户端创建一个文件夹并出于安全目的存储一个文件是否可以请告诉我。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:49:01.210

服务器不能与客户端进行这种级别的交互。因此，PHP 肯定是不可能的。

**使用 JavaScript可能**是可能的，我什至不确定是否有可靠的方法可以做到这一点，因为通常不允许浏览器接触文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:51:49.280

使用 PHP 是不可能的。PHP 在服务器上运行。为此，您需要一个在您的系统上具有足够权限的程序，并且它必须在客户端运行具有足够系统权限的**JAVA Applett**或**Flash 。**

但我认为这不是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:59:49.693

出于“**安全目的**”，PHP 不会也永远不会允许与计算机进行这种交互。您可以下载文件，然后该人可以将其放入文件夹中，这样用户就知道他们甚至在他们的计算机上拥有该文件，否则除非使用 Java（当然具有正确的权限）否则没有办法

# iphone - 如何从数字键盘中删除添加的完成按钮

> ID：12969579
> 
> 赞同：3
> 
> 时间：2012-10-19T07:41:21.617
> 
> 标签：iphone, keyboard, numeric

这是我的代码....

`

```
- ( void ) registerForKeyboardNotifications {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];
}

    // Called when the UIKeyboardDidShowNotification is sent.
- ( void ) keyboardWasShown:(NSNotification*)notification {
    [self addButtonToKeyboard];
}

#pragma -
#pragma Numeric keyboard done button

- ( void ) keyboardDoneClicked:(id)sender {
    [txtvannum resignFirstResponder];
    [txtmobnum resignFirstResponder];
//    [sender resignFirstResponder];
}

- ( void ) addButtonToKeyboard {
        // create custom button
//    if(keyButton){
    doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
    doneButton.frame = CGRectMake(0, 163, 106, 53);
    doneButton.adjustsImageWhenHighlighted = NO;
    if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.0) {
        [doneButton setImage:[UIImage imageNamed:@"DoneUp3.png"] forState:UIControlStateNormal];
        [doneButton setImage:[UIImage imageNamed:@"DoneDown3.png"] forState:UIControlStateHighlighted];
    } else {        
        [doneButton setImage:[UIImage imageNamed:@"DoneUp.png"] forState:UIControlStateNormal];
        [doneButton setImage:[UIImage imageNamed:@"DoneDown.png"] forState:UIControlStateHighlighted];
    }
    [doneButton addTarget:self action:@selector(keyboardDoneClicked:) forControlEvents:UIControlEventTouchUpInside];
        // locate keyboard view
    UIWindow* tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
    for(int i=0; i<[tempWindow.subviews count]; i++) {
        keyboard = [tempWindow.subviews objectAtIndex:i];
            // keyboard found, add the button
        if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 3.2) {
            if([[keyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)
                [keyboard addSubview:doneButton];
        } else {
            if([[keyboard description] hasPrefix:@"<UIKeyboard"] == YES)
                [keyboard addSubview:doneButton];
            }
        }

//    }
////    else{
////        return;}

} 
```

`

我开发了一个应用程序，其中包含用户输入他们的详细信息。其中有 4 个文本字段。其中两个需要数字类型的键盘。对于那个数字键盘，我添加了完成按钮以在完成编辑后退出。但是完成按钮是也适用于所有其他类型的键盘。如何将完成按钮添加到数字键盘，以便它应该隐藏所有其他类型。我在这方面很挣扎。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:16:59.080

首先，您必须设置通知以继续跟踪键盘的活动。要识别哪个 UITextField 处于活动状态，您必须为每个设置一个唯一标签。

在 .h 文件中 >>

```
@interface myViewController : UIViewController
{
    UITextField *txtField1; // 允许数字输入
    UITextField *txtField2; // 允许字符串输入
    UITextField *txtField3; // 允许数字输入
    UITextField *txtField4; // 允许字符串输入
    UITextField *txtFieldTemp; // 临时文本字段

    BOOL 已返回；
}

```

在 .m 文件中 >>

```
- (void)viewDidLoad
{
    txtField1.tag = 0;
    txtField2.tag = 1;
    txtField3.tag = 2;
    txtField4.tag = 3;
    [[NSNotificationCenter defaultCenter] addObserver:self 选择器:@selector(UIKeyboardWillChangeFrameNotification:) name:UIKeyboardDidShowNotification object:nil];
}

- (void)UIKeyboardWillChangeFrameNotification:(NSNotification *)note
{
    if (txtFieldTemp.tag == 0 || txtFieldTemp.tag == 2)
    {
        [self addButtonToKeyboard];
    }
}

-(void) textFieldDidBeginEditing:(UITextField *)textField
{
    if (textField.tag == 0 || textField.tag == 2)
    {
        [self addButtonToKeyboard];
    }
    别的
    {
        [self removeButtonFromKeyboard];
    }
    txtFieldTemp = 文本字段；
}

```

```
- (void)removeButtonFromKeyboard
{
   // 移除键盘逻辑
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:58:39.663

对于每个`UITextField`使用`setReturnKeyType:`可以获取值的功能，

```
typedef enum {
   UIReturnKeyDefault,
   UIReturnKeyGo,
   UIReturnKeyGoogle,
   UIReturnKeyJoin,
   UIReturnKeyNext,
   UIReturnKeyRoute,
   UIReturnKeySearch,
   UIReturnKeySend,
   UIReturnKeyYahoo,
   UIReturnKeyDone,
   UIReturnKeyEmergencyCall,
} UIReturnKeyType; 
```

并且您必须分别为每个文本字段设置键类型。对于您不希望完成按钮的文本字段，只需将其设置为`UIReturnKeyDefault`. 希望这可以帮助。

# svn - 重定位后的 SVN 更新失败并显示“没有这样的修订”消息

> ID：12969581
> 
> 赞同：7
> 
> 时间：2012-10-19T07:41:32.807
> 
> 标签：svn, version-control

我们曾经有一个用于多个项目的共享 SVN 存储库，昨天，我们的 SVN 管理员为我们的项目创建了一个新的 SVN 存储库。

我将现有的项目签出重新定位到新的 SVN 存储库，但现在，当我进行 SVN 更新时，我收到一条错误消息，例如`"No such revision 223297".`

实际上，新存储库只有我们项目特定的修订数量（围绕`33000`提交），而旧存储库有`223400`.

我想知道是否可以将所有现有的签出文件夹切换到新的存储库？否则，我将不得不做一些干净的结帐。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T08:56:22.387

显然，您的管理员没有包含填充修订，这通常在使用 svndumpfilter 拆分存储库时被强烈推荐。

否则，绝对不可能用您的存储库更新您的工作副本，因为 SVN 以修订号为导向，而您的存储库（从技术上讲）是不同的存储库（通常存储库的 UUID 也不应该匹配。另一个应该由您的管理员修复）。此外，如果您使用诸如 bugtracker 之类的外部工具来保存修订号以将内容链接到您的源代码，这些引用也会丢失。

最好的解决方案是在没有 svndumpfilter 开关的情况下重做存储库创建 -但是**drop-empty-revs**，那么您在新存储库中的工作就会丢失..

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-12T05:32:33.870

1.  备份工作目录

2.  删除顶层工作目录下的 .svn 目录

3.  查看整个工作目录。

为我工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T01:37:40.230

猜猜你必须做一些干净的结帐。

在我的情况下，我们的 SVN 管理员完全从旧存储库创建了一个新的 SVN 存储库克隆。当我将工作副本重新定位到新的 SVN 存储库后更新工作副本时，我收到了同样的消息。

然后我发现这是因为我在重新定位到新存储库之前进行了 SVN 更新，并且修订号刚好超出了新存储库中的修订号。

所以，这是我的解决方案：

1.  重新定位回**旧存储库**
2.  用于`Update to revision...`将您的工作副本更新为旧版本（只是**您的 SVN 管理员创建新存储库之前的版本**）
3.  重新定位到**新的存储库**，现在尝试再次进行 SVN 更新 :)

希望这对您有所帮助。

# javascript - 将样式应用于随机网格空间

> ID：12969582
> 
> 赞同：0
> 
> 时间：2012-10-19T07:41:33.627
> 
> 标签：javascript, jquery

我正在创建一个简单的算术游戏，其中有一个填充有数字的网格。数字是隐藏的，当游戏运行时，网格空间会突出显示。旁边的 div 产生一个总和，以帮助用户得到正确的答案。然后，用户点击相应的数字，动画就位并指示它们是对还是错。

我遇到的问题是，当程序运行时，触发器（'click'）函数应该在网格中随机选择一个区域并应用类`.spellword`。这将突出显示紫色区域，指示放置答案的位置。

在我运行程序的那一刻，没有任何反应，我不知道为什么。我做了同样的游戏，但用文字，效果很好。

这是按钮的功能

```
$('.minibutton').click(function() {

$('.minibutton').prop('disabled', false);
$('.picstyle').show();
$('td').removeClass('spellword');
var r = rndWord;
while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}

$('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
$('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3').css('color', 'transparent');

var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist) {
    $('.minibutton').click();

} else {

  $('.picstyle').text(sum);

}

}).trigger("click"); 
```

小提琴：http: [//jsfiddle.net/ZAfVZ/33/](http://jsfiddle.net/ZAfVZ/33/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:46:21.320

每个表格单元格上的数据字母和数据字都是空白的。这就是你的代码失败的原因。

**编辑：**请参阅[此 JSFiddle 以获取工作示例](http://jsfiddle.net/ZAfVZ/36/)。将数据字母分配给表格单元格时，您缺少字符串转换 ( `word.toString()[k]`)。您仍然有一些表格单元格没有答案，也没有`data-word`- 这是故意的吗？

# asp.net - 与 DIV 并排的 ASPX 母版页

> ID：12969589
> 
> 赞同：2
> 
> 时间：2012-10-19T07:42:01.427
> 
> 标签：asp.net, css, html, master

需要帮忙。我无法弄清楚为什么我不能将 div 并排放置在母版页的子 .aspx 中。

如果我像这样对样式进行硬编码，则代码有效

```
<div id="pagemiddleleft" style="float:left;"> 
```

但是当我将样式移动到 CSS 文件中时，div 拒绝并排放置。

下面是子代码

```
<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master"
AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<div id="pagetop">
</div>
<div id="pagemiddle">
        <div id="pagemiddleleft">111111
        </div>
        <div id="pagemiddlecenter">111111
        </div>
        <div id="pagemiddleright">111111
        </div>
        <div style="clear: both"></div>
</div>
<div id="pagebottom">
</div>
</asp:Content> 
```

以下是母版页的摘录

```
 <div class="page">
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
 </div> 
```

下面是子 aspx 页面的 CSS 部分

```
#pagemiddleleft {
float: left; background-color: #FFFF00;}

#pagemiddlecenter {
float: left; background-color: #00FFFF;}

#pagemiddleright {
float: right; background-color: #FF00FF;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:51:18.340

试试这个母版页布局

**母版页**

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="MasterPage" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <asp:ContentPlaceHolder ID="head" runat="server">

        </asp:ContentPlaceHolder>
        <style type="text/css">
        div.page
        {
            float: left;
            width: 100%;
            background:#ffc;
        }
        div#main
        {
            float: left;
            clear: both;
            width: 100%;
            position: relative;
        }
        div#page-left
        {
            float: left;
            width: 20%;
            background:orange;
        }
        div#page-right
        {
            float: right;
            width: 20%;
            background:green;
        }
        div#page-middle
        {
            float: left;
            margin: 0 auto;
            width: 60%;
            background:blue;
        }
    </style>
    </head>
    <body>
        <div class="page">
            <div id="main">
                <form id="form1" runat="server">
                <div id="page-left">
                   <asp:ContentPlaceHolder ID="leftContent" runat="server"></asp:ContentPlaceHolder>
                </div>
                <div id="page-middle">
                    <asp:ContentPlaceHolder ID="middleContent" runat="server"></asp:ContentPlaceHolder>
                </div>
                <div id="page-right">
                 <asp:ContentPlaceHolder ID="rightContent" runat="server"></asp:ContentPlaceHolder>
                </div>
                </form>
            </div>
        </div>
    </body>
    </html> 
```

**内容页**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" MasterPageFile="~/MasterPage.master"
        Inherits="_Default" %>

    <asp:Content ContentPlaceHolderID="leftContent" runat="server" ID="PageLeft">
        Page Left Contentt</asp:Content>
    <asp:Content ContentPlaceHolderID="middleContent" runat="server" ID="PageMiddle">
        Page Middle Content</asp:Content>
    <asp:Content ContentPlaceHolderID="rightContent" runat="server" ID="PageRight">
        Page Right Content</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:29:09.390

我认为在你的元素上设置宽度很重要，你可能会失去并`clear: both` `<div>`只是穿上`overflow: hidden`. `pagemiddle`（高度不需要，我只是把它放在那里更好地说明我的答案）

```
#pagemiddle { overflow: hidden; width: 500px; }
#pagemiddleleft { float: left; background-color: #FFFF00; width: 100px; height: 100px; }
#pagemiddlecenter { float: left; background-color: #00FFFF; width: 300px; height: 100px; }
#pagemiddleright { float: right; background-color: #FF00FF; width: 100px; height: 100px; }​ 
```

**演示**- [http://jsfiddle.net/8NH8t/](http://jsfiddle.net/8NH8t/)

# asp.net-mvc - Web api HTTP 500（内部服务器错误）

> ID：12969590
> 
> 赞同：1
> 
> 时间：2012-10-19T07:42:00.837
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-web-api

您好，当我运行以下代码时出现错误 500（内部服务器错误）。我的问题是**我根本没有任何错误的痕迹**。视觉工作室似乎无法捕捉到它。

如果我尝试将人员添加到**候选人**代码失败并且我收到错误 500，则以下代码将返回候选人。问题是**PersonAddressDescription**实现 AddressDescription 是继承问题吗？

 **```
public class CheckController : ApiController
{
    public Candidate Get()
    {
        PersonAddressDescription pers = new PersonAddressDescription();

        Candidate candidate = new Candidate();

        //IF I REMOVE THIS NO PROBLEM
        candidate.address = pers;

        return candidate;
    }
} 
```

地址描述类

```
/// <remarks/>
    [System.Xml.Serialization.XmlIncludeAttribute(typeof(CompanyAddressDescription))]
    [System.Xml.Serialization.XmlIncludeAttribute(typeof(PersonAddressDescription))]
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17626")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.crif-online.ch/webservices/crifsoapservice/v1.00")]
    public abstract partial class AddressDescription : object, System.ComponentModel.INotifyPropertyChanged {

        private Location locationField;

        private ContactItem[] contactItemsField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=0)]
        public Location location {
            get {
                return this.locationField;
            }
            set {
                this.locationField = value;
                this.RaisePropertyChanged("location");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute("contactItems", Order=1)]
        public ContactItem[] contactItems {
            get {
                return this.contactItemsField;
            }
            set {
                this.contactItemsField = value;
                this.RaisePropertyChanged("contactItems");
            }
        }

        public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName) {
            System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
            if ((propertyChanged != null)) {
                propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
            }
        }
    } 
```

实现 AddressDescription 的 PersonAddressDescription 类

```
/// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.17626")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(Namespace="http://www.crif-online.ch/webservices/crifsoapservice/v1.00")]
    public partial class PersonAddressDescription : AddressDescription {

        private string firstNameField;

        private string lastNameField;

        private string maidenNameField;

        private Sex sexField;

        private bool sexFieldSpecified;

        private string birthDateField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=0)]
        public string firstName {
            get {
                return this.firstNameField;
            }
            set {
                this.firstNameField = value;
                this.RaisePropertyChanged("firstName");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=1)]
        public string lastName {
            get {
                return this.lastNameField;
            }
            set {
                this.lastNameField = value;
                this.RaisePropertyChanged("lastName");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=2)]
        public string maidenName {
            get {
                return this.maidenNameField;
            }
            set {
                this.maidenNameField = value;
                this.RaisePropertyChanged("maidenName");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=3)]
        public Sex sex {
            get {
                return this.sexField;
            }
            set {
                this.sexField = value;
                this.RaisePropertyChanged("sex");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlIgnoreAttribute()]
        public bool sexSpecified {
            get {
                return this.sexFieldSpecified;
            }
            set {
                this.sexFieldSpecified = value;
                this.RaisePropertyChanged("sexSpecified");
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Order=4)]
        public string birthDate {
            get {
                return this.birthDateField;
            }
            set {
                this.birthDateField = value;
                this.RaisePropertyChanged("birthDate");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:45:08.870

~~我怀疑您检索到的对象 ( `addResp`) 在其对象图中的某处包含循环引用。循环引用不能被 JSON 序列化。~~

例如，尝试将以下代码放入您的控制器中，以测试当您尝试 JSON 序列化此实例时会发生什么：

```
TypeIdentifyAddressResponse addResp = ws.identifyAddress("test");
string json = JsonConvert.SerializeObject(addResp); 
```

 ~~* * *

更新：

这似乎`AddressDescription`是一个抽象类，而您的实际实例是`PersonAddressDescription`. [`[KnownType]`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.knowntypeattribute.aspx)您需要使用属性向序列化程序指示：

```
[KnownType(typeof(PersonAddressDescription))]
[KnownType(typeof(CompanyAddressDescription))]
...
public abstract partial class AddressDescription : object, System.ComponentModel.INotifyPropertyChanged {
{
    ...
} 
```

作为替代方案，如果您不想用其他属性进一步污染（已经污染的）域模型，您也可以在您的内部定义已知类型`WebApiConfig.cs`：

```
config.Formatters.XmlFormatter.SetSerializer<Candidate>(
    new DataContractSerializer(typeof(Candidate),
    new Type[] { typeof(PersonAddressDescription) })); 
```~~**

# c# - 使用自定义图钉时，必应地图需要大量性能

> ID：12969594
> 
> 赞同：3
> 
> 时间：2012-10-19T07:42:12.400
> 
> 标签：c#, .net, wpf, xaml, bing-maps

我在使用带有自定义图钉的 Bing 地图的 .NET 4 应用程序时遇到问题。缩放或移动地图时性能非常差。我正在使用`ObservableCollection`与 Bing 地图有数据绑定的 a。每次地图更改时，都会检查地图部分中的图钉。集合将被重新填充，最后 a`NotifyCollectionChangedEvent`被触发，这使得地图绘制图钉。

```
<bingMap:MapItemsControl ItemsSource="{Binding Locations}">
    <bingMap:MapItemsControl.ItemTemplate>
        <DataTemplate>
            <bingMap:Pushpin Location="{Binding Coordinates}" Height="Auto" Width="Auto" PositionOrigin="BottomCenter"
                Template="{StaticResource PushpinControlTemplateLoc}">
            </bingMap:Pushpin>
        </DataTemplate>
    </bingMap:MapItemsControl.ItemTemplate>
</bingMap:MapItemsControl > 
```

我用性能分析器做了一些研究：`InitializeComponent()`我的自定义图钉类的方法平均需要 25% 到 35% 的时间！

地图上通常显示 10 到 25 个自定义图钉。如果我减少数据绑定的数量，它会变得更快一点，但仍然不够快。

我已经测试了将所有画笔声明为冻结的静态资源，但绘图仍然运行得很慢。

```
<SolidColorBrush x:Key="SolidColorBrushUnknownMsg" Color="Gray" ice:Freeze="True"  xmlns:ice="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options" /> 
```

我尝试使用`<bingMap:Pushpin Location="{Binding Coordinates}"/>`速度更快的 Microsoft 默认图钉。所以我的自定义图钉的使用或实现一定有问题。

这是我的其余代码：

自定义图钉类（仅自动生成的代码）：

```
public partial class MyPushpin: System.Windows.Controls.Grid
{
    public MyPushpin()
    {
        InitializeComponent();
    }
} 
```

自定义图钉 XAML 代码：

```
<Grid x:Class="Test.MyPushpin"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    mc:Ignorable="d">

    <Grid.Resources>
        <Style BasedOn="{StaticResource DataTextBlock}" x:Key="test1" TargetType="TextBlock">
            <Setter Property="Background" Value="{StaticResource SolidColorBrushErrorMsg}"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=TextLine1, Mode=OneWay}" Value="0">
                <Setter Property="Background" Value="{StaticResource BackgroundImage}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Grid.Resources>

<Border CornerRadius="20" BorderBrush="White" Padding="7" Opacity="0.8" Width="120" Height="100" Background="{StaticResource BackgroundImage}">
    <Grid >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" Grid.Column="0" Text="test2"  Foreground="Black" />
        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding TextLine2, StringFormat=N1,Mode=OneWay}" Style="{StaticResource DataTextBlock}" />
        <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding objCurrentPower.sUnit,Mode=OneWay}"  Foreground="Black" />

        <!--three more lines of textblocks with data bindings -->

    </Grid>
</Border> 
```

为什么我的自定义图钉需要这么高的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:39:56.730

问题已解决：与其使用单独的类和 xaml 并引用它们，不如`ControlTemplate`在实际包含 Bing 地图的类中使用自定义图钉：

```
<ControlTemplate x:Key="CutomPushpinTemplate" TargetType="bingMap:Pushpin">
    <Border CornerRadius="15" BorderBrush="White" Padding="7" Opacity="0.8" Width="120" Height="90" Background="{StaticResource Bgr_enercon}">
        <Grid >
            <Grid.RowDefinitions>
                <RowDefinition Height="16" />
                <RowDefinition Height="16" />
                <RowDefinition Height="16" />
                <RowDefinition Height="16" />
                <RowDefinition Height="16" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="45" />
                <ColumnDefinition Width="32" />
                <ColumnDefinition Width="23" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="test2"  Foreground="Black" />
            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding TextLine2, StringFormat=N1,Mode=OneWay}" Style="{StaticResource DataTextBlock}" />
            <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding objCurrentPower.sUnit,Mode=OneWay}"  Foreground="Black" />

            <!--three more lines of textblocks with data bindings -->

        </Grid>
    </Border>
</ControlTemplate> 
```

此模板以这种方式用于 Bing 地图的所有图钉：

```
<bingMap:MapItemsControl ItemsSource="{Binding Locations}">
    <bingMap:MapItemsControl.ItemTemplate>
        <DataTemplate>
            <bingMap:Pushpin Location="{Binding objCoordinates}" Height="Auto" Width="Auto" PositionOrigin="BottomCenter" Template="{StaticResource CutomPushpinTemplate}">
            </bingMap:Pushpin>
        </DataTemplate>
    </bingMap:MapItemsControl.ItemTemplate> 
```

这样做会快得多。性能分析器显示程序现在不会花费太多时间来实例化自定义图钉。

这是 xaml 代码，它显示了它之前是如何实现的（慢）：

```
<ControlTemplate x:Key="PushpinControlTemplateLoc" TargetType="bingMap:Pushpin" >
    <Test.MyPushpin />
</ControlTemplate> 
```

# javascript - javascript 和 razor 中的预期表达视觉工作室警告

> ID：12969595
> 
> 赞同：1
> 
> 时间：2012-10-19T07:42:16.560
> 
> 标签：javascript, visual-studio-2010, razor, warnings

视觉工作室在这里抱怨什么？![在此处输入图像描述](../Images/1b9f30264cd96ceb23914051a1007a95.png)

代码

```
 PoolsGrid = Ext.extend(SearchableGrid, {
    initComponent: function() {
        var me = this;
        var config = {
            url: @(Url.ParameterlessRelativeTemplate<PoolsController>(x => x.List(null)))
        }
    }
}); 
```

更多代码：

```
 public static IHtmlString ParameterlessRelativeTemplate<TController>(this UrlHelper url,
                                                                          Expression<Action<TController>> action)
        where TController : Controller
    {
        return RelativeTemplate(url, action, true);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:50:30.100

代码看起来不错。忽略错误并运行您的应用程序 ( `Ctrl+F5`)。它应该可以正常工作。Razor 视图中的 Visual Studio Intellisense 远非完美。希望他们会在未来的版本中改进它。

# android - 在活动之外暂停/恢复活动

> ID：12969596
> 
> 赞同：0
> 
> 时间：2012-10-19T07:42:21.430
> 
> 标签：android, android-intent, android-activity

我有 2 个活动。主要活动 A 和活动 B 我不希望活动 A 破坏。我正在一项新任务中启动活动 B。

```
public static void startActivity(Class<?> startClass) {
    Intent intent = new Intent(Constants.getActivity(), startClass);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    Constants.getActivity().startActivity(intent);
}` 
```

*   Constants.getActivity() 返回当前活动的上下文
*   startClass 是活动“A”或活动“B”

事情是他们创建/破坏活动并且他们泄漏。我做错了吗？当我不需要它们时，如何从活动“A”开始活动“B”，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:49:44.020

使用任务时，清理非常重要。您需要清理活动中的所有任务。[读这个](https://stackoverflow.com/questions/5979171/clear-all-activities-in-a-task)

如果活动没有很多疯狂的初始化，只需使用finish和onCreates。否则请注意，当您在活动之间切换时，将经常调用 onResume。清理在这里至关重要。如果您不进行清理，则您的一个活动（具有来自另一个已清理活动的死对象引用）可能会从活动堆栈中恢复并引发异常。调试这种异常非常困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:57:36.090

首先，你想做什么？您应该始终将您想要在后台执行的操作与您的 UI 分开。认为您的活动只是一个显示 UI 的容器，其他所有内容都可以从持久存储或保存的实例包中存储和恢复。

在这里了解 Activity 生命周期和 Service 生命周期之间的区别非常重要。

我将在这里参考另一个问题的答案：

[您的应用程序将在后台运行，onResume 和 onPause 都将被调用](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)，前提是操作系统有足够的内存来保存新应用程序和所有旧应用程序。

*   如果您需要一个长时间运行的进程，而用户没有查看它，请使用服务。

*   如果您需要用户以相同的状态返回应用程序，[您需要在 onResume 和 onPause 中进行工作以保存状态信息并](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)在用户返回时再次初始化您的 UI。如果您真的担心它会被杀死（好吧，我认为它不应该丢失捆绑包），您可以将它们存储在您的应用程序的 SharePreferences 中。

*   如果您想知道应用程序何时从该特定共享意图返回，请使用 startActivityForResult

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:06:14.670

你不能像你说的那样让一个活动“活着”。当一个 Activity 暂停时，Android 系统总是能够随时申请它的内存并卸载它。

但是如果你想从 A 切换到 B，那么 A 和 B 可能是单个活动中的不同视图。也许你会想看看[http://developer.android.com/reference/android/widget/ViewFlipper.html](http://developer.android.com/reference/android/widget/ViewFlipper.html)

# javascript - Javascript：通过检查其属性从数组中删除对象

> ID：12969597
> 
> 赞同：0
> 
> 时间：2012-10-19T07:42:28.357
> 
> 标签：javascript, json, performance, node.js

我可能写了一个相当混乱的标题，但我的问题很简单。

我正在寻找一种从数组中删除项目的有效方法。但是我的数组是已被**字符串化**的完整对象（我正在 Node.js 上编写我的应用程序并且我正在使用**JSON.stringify**方法）。所以我的数组是这样的；

```
"{\"userID\":\"15\",
  \"possibleFollowers\":[
      {\"followerID\":\"201\",\"friends\":716},
      {\"followerID\":\"202\",\"friends\":11887},
      {\"followerID\":\"203\",\"friends\":11887}],
  \"name\":\"John\",
  \"lon\":\"Doe\"}" 
```

我的问题是关于 Javascript（或 Node）。如果我想用“followerID：202”从可能的Followers 中删除，我怎样才能有效地做到这**一点**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:56:39.570

```
var string = "…";

var obj = JSON.parse(string);
obj.possibleFollowers = obj.possibleFollowers.filter(function(fol) {
    return fol.followerID != "202";
});
string = JSON.stringify(obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:54:33.693

```
var data = "{\"userID\":\"15\",\"possibleFollowers\":[{\"followerID\":\"201\",\"friends\":716},{\"followerID\":\"202\",\"friends\":11887},{\"followerID\":\"203\",\"friends\":11887}],\"name\":\"John\",\"lon\":\"Doe\"}";

var dataObject = JSON.parse(data);
dataObject.possibleFollowers = dataObject.possibleFollowers.filter(function(follower) {
    return !(follower.followerID == "202");
});
data = JSON.stringify(dataObject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:50:13.343

在 javascript 中，splice 方法用于按索引删除数组元素。

看 ：

[http://www.roseindia.net/java/javascript-array/javascript-array-remove-index.shtml](http://www.roseindia.net/java/javascript-array/javascript-array-remove-index.shtml)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T07:47:13.797

尝试使用“删除”将其删除

```
for (var i in possibleFollowers) {
    if (possibleFollowers[i]['followerId'] == '216') {
        delete possibleFollowers[i];
    }
} 
```

# android - 从 Android 表中删除动态创建的 TableRow

> ID：12969599
> 
> 赞同：0
> 
> 时间：2012-10-19T07:42:31.950
> 
> 标签：android

我在一个表中有几个动态创建的 TableRows ...每行有 3 个 Textview 和一个图像按钮，如果用户希望删除该行...创建行已成功实现，但现在问题出现在用户单击时该行上的删除按钮。该行未按预期删除。我该如何实现？

我的代码如下

```
 public void addBody(String Code,String Type,String Quantity){
    /** Create a TableRow dynamically **/
     mTblrow = new TableRow(this);

    /** Creating a TextView to add to the row **/
    TextView label = new TextView(this);
    label.setText(Code);
    label.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));          
    label.setPadding(5, 5, 5, 5);
    label.setBackgroundColor(Color.GRAY);

    LinearLayout Ll = new LinearLayout(this);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);       
    params.setMargins(5, 5, 5, 5);

    Ll.addView(label,params);
    mTblrow.addView((View)Ll); // Adding textView to tablerow.

    /** Creating Qty Button **/
    TextView type = new TextView(this);
    type.setText(Type);
    type.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    type.setPadding(5, 5, 5, 5);
    type.setBackgroundColor(Color.GRAY);

    Ll = new LinearLayout(this);
    params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT);
    params.setMargins(0, 5, 5, 5);
    Ll.addView(type,params);
    mTblrow.addView((View)Ll); // Adding textview to tablerow.

    /** Creating Qty Button **/
    TextView quantity = new TextView(this);
    quantity.setText(Quantity);
    quantity.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    quantity.setPadding(5, 5, 5, 5);
    quantity.setBackgroundColor(Color.GRAY);

    Ll = new LinearLayout(this);
    params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);

    params.setMargins(0, 5, 5, 5);
    Ll.addView(quantity,params);
    mTblrow.addView((View)Ll); 
    /** Creating Qty Button **/
    ImageView delete = new ImageView(this);
    delete.setImageDrawable(drawable);
    delete.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    delete.setPadding(5, 5, 5, 5);

    Ll = new LinearLayout(this);
    params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);

    params.setMargins(0, 5, 5, 5);
    Ll.addView(delete,params);
    mTblrow.addView((View)Ll); 

     // Add the TableRow to the TableLayout

    delete.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            //This part should handle the logic to delete the row
            //This is where am hitting a snag..Please Help
            mTable.removeView(mTblrow);

        }
    });
    mTable.addView(mTblrow, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));               

} 
```

编辑：我尝试使用下面的代码进行点击

```
 delete.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ((ViewManager)mTblrow.getParent()).removeView(mTblrow);

            mTable.removeViewAt(rowIndex);          

        }
    }); 
```

但是它没有按预期工作，因为它从上到下删除行，而不管我删除的 tablerow，它总是从上到下开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:09:35.853

通过查看您的视图层次结构，删除代码应该是：

```
delete.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            mTable.removeViewAt(((View) ((View) v.getParent()).getParent()));          
        }
}); 
```

我还建议您不要像您一样将添加到`TableRow`另一个无用的视图中的每个视图包装起来`LinearLayout`。

# android - 如何在从 JSON 获取数据的列表视图中添加多选模式

> ID：12969600
> 
> 赞同：0
> 
> 时间：2012-10-19T07:42:31.450
> 
> 标签：android, android-listview

我正在使用 JSON 将数据提取到列表视图中，但现在我需要制作我的列表视图以允许用户选择多个项目并在底部显示添加到订单按钮，一旦用户完成了复选框选择并且现在想要制作该订单只需要单击添加到订单按钮，一旦用户单击按钮然后选择 ListView 项目，我将使用 Intent 即 ResultActivity 发送到下一个活动，但是每当我运行我的应用程序时，不幸的是应用程序已停止并且 Logcat 说：

```
 10-19 12:56:56.812: D/dalvikvm(709): GC_FOR_ALLOC freed 53K, 3% free 8069K/8259K, paused 43ms, total 45ms
10-19 12:56:56.812: I/dalvikvm-heap(709): Grow heap (frag case) to 8.514MB for 614416-byte allocation
10-19 12:56:56.882: D/dalvikvm(709): GC_CONCURRENT freed 1K, 3% free 8668K/8903K, paused 23ms+4ms, total 70ms
10-19 12:56:56.932: D/dalvikvm(709): GC_FOR_ALLOC freed 0K, 3% free 8668K/8903K, paused 30ms, total 30ms
10-19 12:56:56.964: I/dalvikvm-heap(709): Grow heap (frag case) to 9.832MB for 1382416-byte allocation
10-19 12:56:57.043: D/dalvikvm(709): GC_CONCURRENT freed 0K, 3% free 10018K/10311K, paused 36ms+5ms, total 83ms
10-19 12:56:57.293: D/gralloc_goldfish(709): Emulator without GPU emulation detected.
10-19 12:57:00.862: D/AndroidRuntime(709): Shutting down VM
10-19 12:57:00.862: W/dalvikvm(709): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-19 12:57:00.924: E/AndroidRuntime(709): FATAL EXCEPTION: main
10-19 12:57:00.924: E/AndroidRuntime(709): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.erachnida.restaurant.versionoct/com.erachnida.restaurant.versionoct.TabSample}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.erachnida.restaurant.versionoct/com.erachnida.restaurant.versionoct.MainActivity}: java.lang.NullPointerException
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.os.Looper.loop(Looper.java:137)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-19 12:57:00.924: E/AndroidRuntime(709):  at java.lang.reflect.Method.invokeNative(Native Method)
10-19 12:57:00.924: E/AndroidRuntime(709):  at java.lang.reflect.Method.invoke(Method.java:511)
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-19 12:57:00.924: E/AndroidRuntime(709):  at dalvik.system.NativeStart.main(Native Method)
10-19 12:57:00.924: E/AndroidRuntime(709): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.erachnida.restaurant.versionoct/com.erachnida.restaurant.versionoct.MainActivity}: java.lang.NullPointerException
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1900)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:694)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.widget.TabHost.setCurrentTab(TabHost.java:358)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.widget.TabHost.addTab(TabHost.java:236)
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.erachnida.restaurant.versionoct.TabSample.addTab(TabSample.java:48)
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.erachnida.restaurant.versionoct.TabSample.setTabs(TabSample.java:27)
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.erachnida.restaurant.versionoct.TabSample.onCreate(TabSample.java:23)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.Activity.performCreate(Activity.java:5008)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-19 12:57:00.924: E/AndroidRuntime(709):  ... 11 more
10-19 12:57:00.924: E/AndroidRuntime(709): Caused by: java.lang.NullPointerException
10-19 12:57:00.924: E/AndroidRuntime(709):  at com.erachnida.restaurant.versionoct.MainActivity.onCreate(MainActivity.java:39)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.Activity.performCreate(Activity.java:5008)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-19 12:57:00.924: E/AndroidRuntime(709):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-19 12:57:00.924: E/AndroidRuntime(709):  ... 23 more 
```

MainActivity.java:-

```
public class MainActivity extends Activity implements OnItemClickListener, OnClickListener {
    Button button;
ListView lview3;
ListViewCustomAdapter adapter;
private ArrayList<Object> itemList;
private ItemBean bean;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    prepareArrayLits();
    lview3 = (ListView) findViewById(R.id.listView1);
    adapter = new ListViewCustomAdapter(this, itemList);
    lview3.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lview3.setAdapter(adapter);

    lview3.setOnItemClickListener(this);
    button.setOnClickListener((OnClickListener) this);
}

private void findViewsById() {
    lview3 = (ListView) findViewById(R.id.listView1);
    button = (Button) findViewById(R.id.submit);
}

public void onClick(View v) {
    SparseBooleanArray checked = lview3.getCheckedItemPositions();
    ArrayList<String> selectedItems = new ArrayList<String>();
    for (int i = 0; i < checked.size(); i++) {
        // Item position in adapter
        int position = checked.keyAt(i);
        // Add sport if it is checked i.e.) == TRUE!
        if (checked.valueAt(i))
            selectedItems.add((String) adapter.getItem(position));
    }
    String[] outputStrArr = new String[selectedItems.size()];

    for (int i = 0; i < selectedItems.size(); i++) {
        outputStrArr[i] = selectedItems.get(i);
    }

    Intent intent = new Intent(getApplicationContext(),
            ResultActivity.class);

    // Create a bundle object
    Bundle b = new Bundle();
    b.putStringArray("selectedItems", outputStrArr);

    // Add the bundle to the intent.
    intent.putExtras(b);

    // start the ResultActivity
    startActivity(intent);
} 
```

ResultActivity.java:-

```
 public class ResultActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result);

        Bundle b = getIntent().getExtras();
        String[] resultArr = b.getStringArray("selectedItems");
        ListView lv = (ListView) findViewById(R.id.outputList);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, resultArr);
        lv.setAdapter(adapter);
    }
} 
```

活动主要：-

```
<Button
    android:id="@+id/submit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Add to Order" />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/header"
    android:layout_marginBottom="10dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:cacheColorHint="#00000000"
    android:divider="#00000000"
    android:dividerHeight="20dp" 
    android:layout_above="@id/submit"
    >

</ListView> 
```

选项卡示例：-

```
 public class TabSample extends TabActivity {
    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabmain);
        setTabs() ;
    }
    private void setTabs()
    {
        addTab("Menu", R.drawable.tab_home, MainActivity.class);
        addTab("Offers", R.drawable.tab_search, MainActivity.class);

        addTab("Location", R.drawable.tab_home, ArrowsActivity.class);
        addTab("Reservation", R.drawable.tab_search, ReservationActivity.class);
    }

    private void addTab(String labelId, int drawableId, Class<?> c)
    {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId); 

        View tabIndicator = LayoutInflater.from(this).inflate(R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);
    }
} 
```

# javascript - hasNext 不适用于 javascript 中的集合

> ID：12969604
> 
> 赞同：1
> 
> 时间：2012-10-19T07:42:52.537
> 
> 标签：javascript, mongodb, meteor

我在 javascript 中有以下代码，它检索两行：

```
 var raceCursor = RacesCollection.find({eventId: "e1"});
    var race;
    while(raceCursor.hasNext()){
    race = raceCursor.next();                   
    console.log(race.raceName);
    } 
```

它似乎没有错，但它显示：

`Uncaught TypeError: Object [object Object] has no method 'hasNext'`在 javascript 控制台中。

我在这里缺少什么？

MongoDB 方法是否需要在 javascript 中进行特殊导入才能用于集合？

该系列是：

```
RacesCollection  = new Meteor.Collection("RacesCollection");
RacesCollection.insert({raceId:"r1", eventId:"e1", raceName:"Moto race 1", status:"statusDetail"});
RacesCollection.insert({raceId:"r2", eventId:"e1", raceName:"Moto race 2", status:"statusDetail"}); 
```

任何建议都会被采纳。谢谢..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T08:04:10.923

根据[Meteor 文档](http://docs.meteor.com/#meteor_collection_cursor)，迭代游标的正确方法是`cursor.forEach()`. 游标也没有`hasNext()`或`next()`方法。

所以在你的情况下，它应该是：

```
var raceCursor = RacesCollection.find({eventId: "e1"});

raceCursor.forEach(function(race) {
    console.log(race.raceName);    
}); 
```

# asp.net - 获取错误（生成 XML 文档时出错。）在 asp.net 的 extjs 中从服务器端获取数据

> ID：12969609
> 
> 赞同：0
> 
> 时间：2012-10-19T07:43:09.163
> 
> 标签：asp.net, database, json, extjs4.1

我正在使用 Extjs 4.1 和 asp.net 我正在尝试从数据库中填充网格面板，但出现错误。我正在使用网络服务来获取数据。

错误：

```
System.InvalidOperationException: There was an error generating the XML document. ---> System.InvalidOperationException: Cannot serialize the DataTable. DataTable name is not set.
   at System.Data.DataTable.WriteXmlSchema(XmlWriter writer, Boolean writeHierarchy)
   at System.Data.DataTable.System.Xml.Serialization.IXmlSerializable.WriteXml(XmlWriter writer)
   at System.Xml.Serialization.XmlSerializationWriter.WriteSerializable(IXmlSerializable serializable, String name, String ns, Boolean isNullable, Boolean wrapped)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write2_DataTable(Object o)
   at Microsoft.Xml.Serialization.GeneratedAssembly.DataTableSerializer.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces)
   at System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o)
   at System.Web.Services.Protocols.XmlReturnWriter.Write(HttpResponse response, Stream outputStream, Object returnValue)
   at System.Web.Services.Protocols.HttpServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
   at System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
   at System.Web.Services.Protocols.WebServiceHandler.Invoke() 
```

我的网络服务代码

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json,UseHttpGet = true, XmlSerializeString = false)]
    public DataTable displayData() {
        db obj = new db();
        return obj.getCountry();
    } 
```

从 js 文件调用 web 服务

```
 var store = Ext.create('Ext.data.Store', {
            pageSize: 20,
            model: 'ForumThread',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: 'report.asmx/displayData',
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                 //url: '/grid.json',
                reader: {    
                root: 'data'   ,          
                    type: 'json',
                    method: "GET",
                    totalProperty: 'totalCount'
                }
            }
        }); 
```

即使我从网络服务中删除了这一行，`[ScriptMethod(ResponseFormat = ResponseFormat.Json,UseHttpGet = true, XmlSerializeString = false)]`但仍然是同样的错误。

**我没有在我的代码中使用 XMLSerializer 然后它也会给我错误，比如生成 XML 文档时出错。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:46:05.707

如错误所示，您需要为数据表提供名称。

dt.TableName = "我的表";

# sql - 根据所有行的其他列值修改列值

> ID：12969610
> 
> 赞同：1
> 
> 时间：2012-10-19T07:43:11.023
> 
> 标签：sql, teradata

我有一个 teradata 表。现在我需要添加一个列，比如说，标志并将值插入到标志列中，这将取决于销售。如果销售额大于 x 或 Flag=0，则 Flag=1。这是目前Table的结构

```
Sales    Date 
 10    11/11/1987
 20    12/13/1987 
```

我想要它像下面这样

```
Sale    Date       Flag
 10   11/11/1987    0
 20   12/13/1987    1 
```

我试图在论坛上寻找此类问题，但找不到任何问题。如果您发现任何重复的问题，请原谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:48:43.637

添加列后，执行更新语句

```
Update <table>
set Flag = case when Sale<=10 then 0 
                else 1
           end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:49:25.310

你想在这里使用的是一个`CASE`声明：

```
UPDATE teradata_table
SET flag = CASE WHEN sales > 10 THEN 1 ELSE 0 END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:50:33.250

```
ALTER TABLE MYTABLE
( FLAG NUMBER(1) );

UPDATE MYTABLE SET FLAG = 1 WHERE SALE >= 10; 
```

# asp.net - 如何允许在 TinyMCE 中嵌入内联标签

> ID：12969616
> 
> 赞同：3
> 
> 时间：2012-10-19T07:43:49.437
> 
> 标签：asp.net, tinymce

我的页面上有 TinyMCE 控件（asp.net 页面）。我正在尝试编辑 html 并插入嵌入标签，但是一旦我切换到所见即所得模式，然后回到 html 编辑模式，我可以看到嵌入标签已被清除，并添加为新的 PARAM 内联标签对象标签。这是示例html

```
<OBJECT id=ETFflash1016 codeBase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" classid=clsid:d27cdb6e-ae6d-11cf-96b8-444553540000 width=345 align=middle height=230>
<PARAM NAME="ProfileAddress" VALUE="">
<PARAM NAME="ProfilePort" VALUE="0">
<PARAM NAME="AllowNetworking" VALUE="all">
<PARAM NAME="AllowFullScreen" VALUE="false">
<PARAM NAME="AllowFullScreenInteractive" VALUE="false">
<PARAM NAME="IsDependent" VALUE="0">
<embed src="/video/ETFflash1016.swf.cms" quality="high" bgcolor="#ffffff" width="345" height="230" name="ETFflash1016" align="left" allowScriptAccess="sameDomain" allowFullScreen="false" wmode="Transparent" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"/>
</OBJECT> 
```

所以这已经变成了这个

```
<object id="ETFflash1016" width="345" height="230" data="../../../video/ETFflash1016.swf.cms" type="application/x-shockwave-flash">
    <param name="Profile" value="0" />
<param name="ProfilePort" value="0" />
<param name="AllowNetworking" value="all" />
<param name="AllowFullScreen" value="false" />
<param name="AllowFullScreenInteractive" value="false" />
<param name="IsDependent" value="0" />
<param name="src" value="../../../video/ETFflash1016.swf.cms" />
<param name="name" value="ETFflash1016" />
<param name="bgcolor" value="#ffffff" />
<param name="wmode" value="Transparent" />
<param name="allowfullscreen" value="false" />
<param name="quality" value="high" />
</object> 
```

您可能已经注意到，嵌入标签的属性变成了对象标签的参数内联标签。我在网上搜索过，主要的解决方案是添加媒体插件，将media_strict设置为false，但没有帮助，所以我继续搜索，并遇到另一个建议 - 使用extended_valid_elements但到目前为止不乏。这是我的 TinyMCE 控件的初始化函数

```
tinyMCE.init({
            mode: "exact",
            theme: "advanced",
            plugins: "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,spellchecker,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist",
            media_strict: "false",
            convert_urls: "false",
            theme_advanced_resizing: true,");
            onchange_callback : "HandleTinyEditorChange",
            valid_elements : "*[*]\",
            extended_valid_elements : "object[width|height|classid|codebase],param[name|value],embed[src|type|width|height|flashvars|wmode]"
            }); 
```

我做错了什么？我怎样才能使这项工作？我正在使用 TinyMCE v.3.9.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:49:47.057

于是问题就变得可笑了。media_strict 和 convert_urls 接受布尔值而不是字符串，所以我只需将布尔值传递给这些参数而不是字符串，它就像一个魅力。

```
tinyMCE.init({ 
            mode: "exact", 
            theme: "advanced", 
            plugins: "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,spellchecker,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist", 
            media_strict: false, 
            convert_urls: false, 
            theme_advanced_resizing: true,"); 
            onchange_callback : "HandleTinyEditorChange", 
            valid_elements : "*[*]\", 
            extended_valid_elements : "object[width|height|classid|codebase],param[name|value],embed[src|type|width|height|flashvars|wmode]" 
            }); 
```

# coldfusion - ColdFusion - 从标签之间存在的文本中删除空格

> ID：12969619
> 
> 赞同：1
> 
> 时间：2012-10-19T07:44:01.723
> 
> 标签：coldfusion

我有以下字符串

```
Brad Thorm signs for the <hash>All Blacks</hash> 
```

标签之间可能不是“全黑”，它可能是任何东西。我需要解析这个字符串，以便在`<hash></hash>`遇到标签时：

1.  从标签之间的字符串中删除所有空格，即“All Blacks”应变为“AllBlacks”
2.  在标签之间的字符串前面添加一个“#”符号，即“AllBlacks”变为“#AllBlacks”

寻找最干净的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:32:16.113

将 Chris 的代码重新编写成一个函数并循环数组，这适用于提供的字符串中的多个哈希实例：

```
<cffunction name="renderHash" output="false" returnType="string">
    <cfargument name="text" required="true" type="string" hint="The text to render." />
        <cfset var strText      = arguments.text />
        <cfset var strHash      = '' />
        <cfset var arrMatches   = reMatch("<hash>(.*?)</hash>", arguments.text) />
            <cfloop array="#arrMatches#" index="i">
                <cfset strHash = reReplace(i, "<hash>(.*?)</hash>", "\1") />
                <cfset strHash = reReplace(strHash, "[[:space:]]", "", "ALL") />    
                <cfset strHash = "##" & strHash />
                <cfset strText = replace(strText, i, strHash) />
            </cfloop>
    <cfreturn strText />
</cffunction> 
```

传递字符串以转换为函数，你就完成了：

```
<cfset strText = '<hash>Brad Thorm</hash> signs for the <hash>All Blacks</hash>' />
<cfset strConverted = renderHash(strText) /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:34:25.607

可能有更简洁的方法可以做到这一点，但这会将标签之间的任何文本转换为#hashtag，并处理字符串中的多个标签

```
<cfscript>
text = "<hash>Brad Thorm</hash> signs for the <hash>All Blacks</hash>";
matches = rematch("<hash>(.*?)</hash>", text);
for(match in matches) {
    hashtag = reReplace(match, "<hash>(.*?)</hash>", "\1");
    hashtag = reReplace(hashtag, "\W", "", "all");
    hashtag = "##" & hashtag;
    text = replace(text, match, hashtag);
}

writeoutput(text);
</cfscript> 
```

# c# - 带有 PC 应用程序的 Xbox Live 头像

> ID：12969620
> 
> 赞同：2
> 
> 时间：2012-10-19T07:44:15.093
> 
> 标签：c#, xna, windows-8, avatar

我想知道我是否可以将`Xbox Live avatar`模型加载到我的`XNA`项目中？

我发现了一些信息，这在`PC`应用程序中是不可能的。但为什么？如果我可以在应用程序中使用它，那`WP7`为什么`Xbox`我不能在这里呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:33:11.730

不，Xbox Live Avatar API 不会暴露给不在 Xbox Live 生态系统之上运行的项目。

作为独立应用程序，您的选择是使用头像 URL 来获取它的静态图像：

*   [http://avatar.xboxlive.com/avatar/GAMERTAG/avatarpic-s.png](http://avatar.xboxlive.com/avatar/GAMERTAG/avatarpic-s.png)
*   [http://avatar.xboxlive.com/avatar/GAMERTAG/avatarpic-l.png](http://avatar.xboxlive.com/avatar/GAMERTAG/avatarpic-l.png)
*   [http://avatar.xboxlive.com/avatar/GAMERTAG/avatar-body.png](http://avatar.xboxlive.com/avatar/GAMERTAG/avatar-body.png)

# perl - 通过函数传递变量

> ID：12969621
> 
> 赞同：0
> 
> 时间：2012-10-19T07:44:16.547
> 
> 标签：perl

当我通过几个潜艇传递一个变量时，它总是变成空的。为什么是这样 ？

```
sub Main {

    my $myVariable = "Test string";
    firstSub($myVariable);
}

sub firstSub {

    my($myVariable) = @_;
    my @array = `some command`;
    secondSub(@array, $myVariable);
}

sub secondSub {

    my(@array, $myVariable) = @_;
    print $myVariable; 
} 
```

echo 将是 undef。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:46:37.373

`echo`不是有效的 Perl 函数。您在这里将 shell 与 Perl 混淆了。尝试“ `print`”或“ `say`”（后者在 Perl 5.10 和更新版本中使用）。

此外，您不能将数组和标量变量分配给另一个数组和标量变量。这意味着这将不起作用，因为右侧的所有元素都将分配给左侧的数组，并且不会将任何内容分配给标量：`my (@array, $myVariable) = @_;`要么交换元素的顺序`my ($myVariable, @array) = @_;`（在调用函数）或使用数组引用而不是完整数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:49:04.283

您的代码没有做任何事情，因为您已经定义了三个子例程，但您从未调用过它们。

只需添加`Main();`以实际运行您的主子。

此外，您需要`print`代替回声。

此外，正如 Moritz Bunkus 解释的那样，变量的传递是不正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T10:39:36.827

当您调用 secondsub() 时，@array 和 $myVariable 将作为列表（单个元素）发送，并在 secondsub 函数中分配给 @array。当您在 secondsub 中打印 @array 时，您可以看到 @array 和 $myVariable 值。

您必须将数组作为引用传递并在 secondsub 中将其作为标量值接收。下面的代码将起作用。

```
&Main();
sub Main {

    my $myVariable = "Test string";
    firstSub($myVariable);
}

sub firstSub {

    my($myVariable) = @_;
    my @array = `some command`;
    secondSub(\@array,$myVariable);

}

sub secondSub {

    my($ref,$myVariable) = @_;
   print $myVariable;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T12:00:49.950

传递变量：

> ```
>  my $txt = "this text for sample";
> 
> Function_Passing_varible($txt);
> 
> sub Function_Passing_varible{
>                 my $text = shift;
>                 print $text;
> 
> } 
> ```

我想你喜欢这个答案......

# javascript - 包括 javascripts 不起作用

> ID：12969622
> 
> 赞同：1
> 
> 时间：2012-10-19T07:44:23.450
> 
> 标签：javascript, jquery

我发现了一个小 javascript 片段，仅在之前未包含 javascripts 时才包含它们。

那是使用我自己的脚本，但是使用两个第三方库它不起作用，我真的不知道为什么。

```
 var included_files = new Array();
    function include_once(script_filename) {
        if (!in_array(script_filename, included_files)) {
            included_files[included_files.length] = script_filename;
            include_dom(script_filename);
        }
    }
    function in_array(needle, haystack) {
        for (var i = 0; i < haystack.length; i++) {
            if (haystack[i] == needle) {
                return true;
            }
        }
        return false;
    }
    function include_dom(script_filename) {
        var html_doc = document.getElementsByTagName('head').item(0);
        var js = document.createElement('script');
        js.setAttribute('language', 'javascript');
        js.setAttribute('type', 'text/javascript');
        js.setAttribute('src', script_filename);
        html_doc.appendChild(js);
        return false;
    }

function loaded() {
    include_once("shared/scripts/jquery.min.js");
    include_once("shared/scripts/iscroll.js");

    $(document).ready(function () {
        alert("hello");
    });
} 
```

错误：$ 未定义。如果我以常规方式导入 jQuery，它会说“iScroll”未定义（因为我稍后会使用它）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:48:05.360

`include_dom`是异步的。它并行加载脚本，您无法真正确定何时加载脚本。您在开始下载后立即尝试使用 jQuery，但这是行不通的。

您需要使用允许您为加载的脚本指定回调的脚本。我会推荐 require.js

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T07:47:16.030

您正在将脚本添加到 DOM，但在尝试使用它们提供的功能之前不让它们加载。

您需要将回调绑定到要添加的脚本元素的加载事件。

（至少在大多数浏览器中，您可能必须在其他浏览器中实现一些技巧；您可能希望检查 jQuery 的 getScript 方法的源代码）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:49:25.550

使用脚本加载器。[yepnope](http://yepnopejs.com/)会做你想做的一切，甚至更多

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T08:04:14.477

有人说回调吗？

```
function include_once(script_filename, callback) {
        if (!in_array(script_filename, included_files)) {
            included_files[included_files.length] = script_filename;
            include_dom(script_filename, callback);
        }
    }

function include_dom(script_filename, callback) {
    var html_doc = document.getElementsByTagName('head').item(0);
    var js = document.createElement('script');
    js.setAttribute('language', 'javascript');
    js.setAttribute('type', 'text/javascript');
    js.setAttribute('src', script_filename);
    if(callback && callback != 'undefined'){
        js.onload =  callback;
        js.onreadystatechange = function() {
            if (this.readyState == 'complete') callback();
        }
    }
    html_doc.appendChild(js);
    return false;
}

function loaded() {
    include_once("shared/scripts/jquery.min.js", function(){
        $(document).ready(function () {
            alert("hello");
        });
    });
    include_once("shared/scripts/iscroll.js");
} 
```

# r - 使用最小值和最大值对两列数据进行标准化

> ID：12969623
> 
> 赞同：2
> 
> 时间：2012-10-19T07:44:26.523
> 
> 标签：r, normalization, max, min

我试图找到一个 R 代码，用于使用两列矩阵的最小值和最大值对我的值进行归一化。

我的矩阵如下所示： 第一列 (C1) 和 C2 ID 不计算，C3；标题第 1 行，然后是 407 个数字和 NA，C4；标题第 1 行，然后是数字和 NA。

我在想类似的东西：

C3 = x 的最小值，同一列 x 的最大值，

```
If(x="","NA",(x-Min value)/(Max value-Min value)) 
```

这将给出一个值从 0 到 1 的列。对第 4 列也应该这样做（是 y 还是这对 R 来说很混乱？）

我在编程或 R 语言方面不够熟练，无法生成此代码，是否有专门的代码，或者任何人都可以帮我写一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:04:42.977

给定一些示例数据，沿着您描述的路线

```
set.seed(1)
d <- data.frame(C1 = LETTERS[1:4], C2 = letters[1:4],
                C3 = runif(4, min = 0, max = 10),
                C4 = runif(4, min = 0, max = 10))
d 
```

然后我们可以写一个简单的函数来做你描述的规范化

```
normalise <- function(x, na.rm = TRUE) {
    ranx <- range(x, na.rm = na.rm)
    (x - ranx[1]) / diff(ranx)
} 
```

这可以通过多种方式应用于数据，但在这里我使用`apply()`：

```
apply(d[, 3:4], 2, normalise) 
```

这使

```
R> apply(d[, 3:4], 2, normalise)
            C3        C4
[1,] 0.0000000 0.0000000
[2,] 0.1658867 0.9377039
[3,] 0.4782093 1.0000000
[4,] 1.0000000 0.6179273 
```

要将这些添加到现有数据中，我们可以这样做：

```
d2 <- data.frame(d, apply(d[, 3:4], 2, normalise))
d2 
```

这使：

```
R> d2
  C1 C2       C3       C4      C3.1      C4.1
1  A  a 2.655087 2.016819 0.0000000 0.0000000
2  B  b 3.721239 8.983897 0.1658867 0.9377039
3  C  c 5.728534 9.446753 0.4782093 1.0000000
4  D  d 9.082078 6.607978 1.0000000 0.6179273 
```

现在您提到您的数据包括`NA`，我们必须处理它。您可能已经注意到我在函数中将`na.rm`参数设置为。这意味着即使在以下情况下它也可以工作：`TRUE``normalise()``NA`

```
d3 <- d
d3[c(1,3), c(3,4)] <- NA ## set some NA
d3

R> d3
  C1 C2       C3       C4
1  A  a       NA       NA
2  B  b 3.721239 8.983897
3  C  c       NA       NA
4  D  d 9.082078 6.607978 
```

我们仍然得到`normalise()`一些有用的输出，只使用非`NA`数据：

```
R> apply(d3[, 3:4], 2, normalise)
     C3 C4
[1,] NA NA
[2,]  0  1
[3,] NA NA
[4,]  1  0 
```

如果我们没有以书面形式执行此操作`normalise()`，那么输出将如下所示（`na.rm = FALSE`是`range()`和其他类似函数的默认值！）

```
R> apply(d3[, 3:4], 2, normalise, na.rm = FALSE)
     C3 C4
[1,] NA NA
[2,] NA NA
[3,] NA NA
[4,] NA NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:58:17.683

这是一种非参数标准化，但我建议您使用另一种方法：计算中位数和四分位数范围，减去中位数并除以 IQR。这将为您提供中位数为 0 且 IQR 为 1 的分布。

```
m <- median( df$C3, na.rm = T )
iqr <- IQR( df$C3, na.rm = T )
df$C3 <- ( df$C3 - m ) / iqr 
```

您提出的方法对异常值非常敏感。如果你真的想这样做，可以这样做：

```
 rng <- range( df$C3, na.rm = T )
 df$C3 <- ( df$C3 - rng[1] ) / ( rng[2] - rng[1] ) 
```

# jquery-mobile - jQuery Mobile 使用页面转换持久化固定标题标签栏

> ID：12969625
> 
> 赞同：2
> 
> 时间：2012-10-19T07:44:30.353
> 
> 标签：jquery-mobile, tabbar, ibm-mobilefirst

我正在为 Android 和 iPhone 开发一个简单的三选项卡应用程序，使用 IBM Worklight 作为框架。每个选项卡都链接到一个带有 data-role="page" 的 div，作为 jQuery Mobile 规范。

如果我像那里解释的那样实现jquery固定持久标签栏（[http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html)），我会在标签项上遇到一些闪烁在页面转换中（具有任何转换效果）。如果我将默认转场设置为“无”，我可以解决这个问题，但我失去了转场效果。

仅当我使用真正的 android 设备（Xperia Neo、GS2）测试应用程序时才会出现此行为。

如果我用我的智能手机浏览[http://jquerymobile.com/demos/1.2.0/](http://jquerymobile.com/demos/1.2.0/)的页面，尤其是在这里：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist- d.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-d.html)我看不到奇怪的行为，但是页脚不会在页面中持续存在，它只是像整个内容一样重新渲染，这更糟（这发生在股票浏览器或 Dolphin 上，看起来非常通过使用 Chrome）。

有没有办法改善这种效果或者有另一种方法来实现固定的持久标签栏？

我使用默认的 Android 联系人应用程序作为参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:54:07.497

也许您会出现这种闪烁，因为您正在使用`rel="external"`. 尝试在没有 ajax 的情况下从一个页面传递到另一个页面，你会看到闪烁会消失

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T09:19:36.440

问题是由于Android环境的WebView在渲染3d过渡时表现不佳。通过删除过渡效果解决：

`$.mobile.defaultPageTransition = "none";`

其他可以提供帮助的方法是将这些属性放在 AndroidManifest.xml 中：

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="false"
    android:normalScreens="true"
    android:smallScreens="false"
    android:xlargeScreens="false" />
 <application
        android:debuggable="false"
        android:hardwareAccelerated="true"/> 
```

# sql-server-2008 - 身份列的替代品

> ID：12969626
> 
> 赞同：0
> 
> 时间：2012-10-19T07:44:33.077
> 
> 标签：sql-server-2008, identity-column

我们有带有标识列（OrderID）的订单表，但我们的订单号由 OrderType（2 个字符）、OrderYear（2 个字符）和 OrderID（6 个字符）组成，总共 10 个字符（即 XX12123456）。此计数器有局限性：我们可以将身份 999999 视为 OrderID 。下一个订单的 ID 由 7 个字符组成。显然我们不能重复订单 ID。

所以我们创建了一个预先填充了渐进式 OrderID 和 OrderYear 的表（例如，从 100000 到 999999，订单年从 12 到 16）：这个存储过程开始一个具有 SERIALIZABLE 隔离级别的事务，取第一个未使用的订单 ID，将其更新为使用并提交事务。

作为我们的订单表，我担心执行订单 ID 计算存储过程或重复订单 ID 时出现死锁。

我将使用创建多个并发线程并尝试提取模拟生产负载的 orderid 的控制台应用程序对此进行测试。

疑点是：

*   是否存在另一种安全模拟标识列的方法？
*   可以考虑使用触发器吗？
*   可以考虑不同的隔离级别吗？
*   其他想法？:D

谢谢！

[编辑]

在谷歌搜索并阅读了一堆 MSDN 文档之后，我发现了许多示例，这些示例显示了如何管理错误和解除锁定以及直接从 SP 处理一种自动回复，如下所示：

创建过程 [dbo].[sp_Ordine_GetOrderID]

@AnnoOrdine AS NVARCHAR(2) = 空输出，@IdOrdine AS INT = 空输出

作为

设置无计数

声明 @retry 为 INT SET @retry = 2

设置事务隔离级别可序列化

WHILE (@retry > 0) BEGIN BEGIN TRY

```
 BEGIN TRANSACTION OrderID   

    SELECT TOP 1 @AnnoOrdine = AnnoOrdine, @IdOrdine = IdOrdine
    FROM ORDINI_PROGRESSIVI --WITH (ROWLOCK)
    WHERE Attivo = 1
    --ORDER BY AnnoOrdine ASC, IDOrdine ASC 

    UPDATE ORDINI_PROGRESSIVI WITH (UPDLOCK)
    SET Attivo = 0
    WHERE AnnoOrdine = @AnnoOrdine AND IdOrdine = @IdOrdine

    IF ISNULL(@IdOrdine, '') = '' OR ISNULL(@AnnoOrdine,'') = ''
    BEGIN
        RAISERROR('Deadlock', 1, 1205)
    END

    SET @retry = 0

    COMMIT TRANSACTION OrderID  

    SELECT @AnnoOrdine AS AnnoOrdine, @IdOrdine AS IdOrdine 

END TRY
BEGIN CATCH

    IF (ERROR_NUMBER() = 1205)
        SET @retry = @retry - 1;
    ELSE
        SET @retry = -1;

    IF XACT_STATE() <> 0
        ROLLBACK TRANSACTION;       

END CATCH 
```

结尾

这种方法减少了死锁（根本不存在），但有时我得到了 EMPTY 输出参数。使用 30 个当代线程进行测试（因此，30 个同时插入订单的客户进程）

这是一个带有查询持续时间的调试日志，以毫秒为单位：http: [//nopaste.info/285f558758.html](http://nopaste.info/285f558758.html)

足够强大的生产能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:08:08.177

如果您确实发现当前的解决方案正在产生问题，并且可能不会，那么另一种方法是为您要创建的每个 id 类型创建一个表，其中包含一个标识列和一个虚拟字段

IE：

```
 ABtypeID (ABID int identity(1,1), dummy varchar(1)) 
```

然后，您可以将记录插入此表并使用内置函数来检索身份。

IE

```
insert ABTypeID (dummy) values (null)
select Scope_Identity() 
```

您可以根据需要从这些表中删除，并在年底截断它们以重置 id 计数器。

您甚至可以将插入包装在回滚的事务中 - 身份值不受回滚的影响

# objective-c - 在自定义表格视图中填充 2 个图像不起作用

> ID：12969630
> 
> 赞同：0
> 
> 时间：2012-10-19T07:44:52.597
> 
> 标签：objective-c, ios, ipad, uitableview

我正在使用网络服务来获取我的应用程序中的数据。正如你在这里看到的，我得到了不同的壁纸图像。

```
"wallpapers": [

    {
        "url": "http://www.krcgenk.be/files/wallpaper/app/iphone4_fans.jpg"
    },
    {
        "url": "http://www.krcgenk.be/files/wallpaper/app/iphone4_logo.jpg"
    },
    {
        "url": "http://www.krcgenk.be/files/wallpaper/app/iphone4_simaeys.jpg"
    },
    {
        "url": "http://www.krcgenk.be/files/wallpaper/app/iphone4_trainers.jpg"
    },
    {
        "url": "http://www.krcgenk.be/files/wallpaper/app/iphone4_vossen.jpg"
    }

] 
```

如您所见，目前壁纸的数量是奇数。所以表格视图中的一个单元格只包含 1 个图像而不是 2 个。我尝试执行以下操作。

```
id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:0];
        NSInteger count = [sectionInfo numberOfObjects];

        if (_loopIndex < count)
        {
           NSIndexPath *path = [NSIndexPath indexPathForRow:_loopIndex inSection:0];
            _loopIndex++;
            NSIndexPath *path2 = [NSIndexPath indexPathForRow:_loopIndex inSection:0];
            Wallpaper *wallpaper1 = [self.fetchedResultsController objectAtIndexPath:path];
            Wallpaper *wallpaper2 = [self.fetchedResultsController objectAtIndexPath:path2];

            NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:wallpaper1.url]];
            UIImage* image = [[UIImage alloc] initWithData:imageData];
            NSData* imageData2 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:wallpaper2.url]];
            UIImage* image2 = [[UIImage alloc] initWithData:imageData2];

           if(!(image == nil)){
                cell.img1.image = image;
           }else{
               NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.krcgenk.be/files/wallpaper/app/iphone4_logo.jpg"]];
               UIImage* image = [[UIImage alloc] initWithData:imageData];
               cell.img1.image = image;
           }
            if(!(image2 == nil)){
               cell.img2.image = image2; 
            }else{
                NSData* imageData2 = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.krcgenk.be/files/wallpaper/app/iphone4_logo.jpg"]];
                UIImage* image2 = [[UIImage alloc] initWithData:imageData2];
                cell.img2.image = image2;
            }
        }
        _loopIndex++;
        if(_loopIndex >= count){
            _loopIndex = count-1;
        }

        return cell; 
```

它在我的 imageView 中正确填充了前四个图像，但在第五个图像上崩溃了​​。这是错误。

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFArray objectAtIndex:]: index (5) beyond bounds (5) 
```

提前致以诚挚的问候和感谢

编辑

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

        NSInteger count = [sectionInfo numberOfObjects];
        return count;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:25:16.030

您的表格视图需要 6 行。但您的数据源数组仅包含 5 个项目。检查`- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView`表视图的委托方法。

# java - ldap 超时在 linux 中不起作用

> ID：12969631
> 
> 赞同：0
> 
> 时间：2012-10-19T07:44:59.560
> 
> 标签：java, linux, ldap

我对这门课有一个问题：

```
package it.test;

import java.net.Socket;
import java.net.ServerSocket;
import java.io.*;
import javax.naming.*;
import javax.naming.directory.*;

import java.util.Calendar;
import java.util.Hashtable;

public class ReadTimeoutTest {

public static void main(String[] args) throws Exception {

    boolean passed = false;

    // Set up the environment for creating the initial context
    Hashtable<String, String> env = new Hashtable<String, String>(11);
    env.put(Context.INITIAL_CONTEXT_FACTORY,
            "com.sun.jndi.ldap.LdapCtxFactory");
    env.put("com.sun.jndi.ldap.read.timeout", "1000");
    env.put(Context.PROVIDER_URL, "ldap://localhost:2001");

    Server s = new Server();

    try {

        // start the server
        s.start();

        // Create initial context
        DirContext ctx = new InitialDirContext(env);
        System.out.println("LDAP Client: Connected to the Server");

        // Close the context when we're done
        ctx.close();
    } catch (NamingException e) {
        e.printStackTrace();
        System.out.println("Server: Connection refused"+" "
        +Calendar.getInstance().getTime());
    }
    s.interrupt();
}

static class Server extends Thread {

    static int serverPort = 2001;

    Server() {
    }

    public void run() {
        try {
            ServerSocket serverSock = new ServerSocket(serverPort);
            Socket socket = serverSock.accept();
            System.out.println("Server: Connection accepted"+" "
                    +Calendar.getInstance().getTime());

            BufferedInputStream bin = new BufferedInputStream(socket.
                    getInputStream());
            while (true) {
                bin.read();
            }
        } catch (IOException e) {
            // ignore
        }
    }
}
} 
```

它应该测试 ldap 调用的超时，在超时后得到一个 naimngException 它在 Windows 中可以正常工作，但在 linux 中却不行，它会继续等待 ldap 连接。我无法在 linux 中正确设置超时，没有得到 NamingException。我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:11:45.610

当您使用 Java 1.5 时，您显然错过了[这一点](http://docs.oracle.com/javase/6/docs/technotes/guides/jndi/jndi-ldap.html#timeout)：“注意：在 Java SDK v 6.0 之前的系统上，此属性被忽略，因为 SDK 不支持读取超时。”

这一定意味着该属性本身是在 1.6 中引入的，因为 Sockets 从年点开始就出现了读取超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T08:44:11.593

JNDI 不应该在新代码中使用有很多原因，其中之一是超时问题，尽管还有很多其他原因：

*   JNDI 使用断开连接的配置
*   JNDI 不支持完整的 LDAP 标准
*   网上的JNDI例子真的很可怕

请改用[UnboundID LDAP SDK](http://www.unboundid.com/products/ldap-sdk/)。该SDK不仅支持连接超时，还支持一般的操作超时，支持超时自动放弃操作。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

# c++ - 头肩检测（从顶部看）

> ID：12969632
> 
> 赞同：4
> 
> 时间：2012-10-19T07:45:06.110
> 
> 标签：c++, opencv, computer-vision, haar-wavelet

这是我在这里的第一篇文章，因为我找不到任何适合我研究的答案。

我想使用 openCV 来检测要在某些项目中使用的头肩模式。

摄像头设置在天花板上，正面朝下，可用于人数统计等应用程序。

我希望我的相机从顶部检测/识别头部和肩部，而不是通常的正面或背面面部检测。

有谁知道怎么做？请与我分享一些技巧或一个简单的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:15:15.183

显然，他们使用了某种[飞行时间 (ToF) 相机](http://en.wikipedia.org/wiki/Time-of-flight_camera)，而不是基于强度的设备。我假设您的特定相机属于后一种类型，因此我看不到任何实用的方法来完成这项任务。

如果您有一个 ToF 相机图像分割将接近微不足道（例如阈值）。之后，您可以简单地寻找头部和肩部特有的形状和渐变（距离高原和渐变），然后就完成了。

我的建议是去买一个 ToF 相机并使用标准的 CV 算法。还可以看看[Kinect](http://en.wikipedia.org/wiki/Kinect)，它也是一种距离测量设备，也可以用于这项任务（据我所知，虽然不是基于 ToF，而是基于[结构光）。](http://en.wikipedia.org/wiki/Structured-light_3D_scanner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:36:36.163

恐怕解决办法没那么简单，用几行代码来描述。我认为你可以从 openCV 中的人脸检测示例代码开始，但是，为了从顶部检测人，你需要一个不同的分类器。你需要找到这样的分类器（我相信你可以在某个地方找到它，或者你可以问发布你提到的视频的人），如果你没有得到它，你需要训练这样的分类器你的自己。

另一种方法是从背景图像参考中减去当前前景帧，结果是屏幕中经过的对象，但是您无法区分人和其他对象。

# canvas - 从 FB 画布调用 getLoginStatus 未触发

> ID：12969633
> 
> 赞同：4
> 
> 时间：2012-10-19T07:45:06.783
> 
> 标签：canvas, facebook-javascript-sdk, facebook-canvas

尝试客户端站点授权，并尝试在画布内运行。如果我直接访问我的网站[http://mysite.com/](http://mysite.com/)一切正常。如果我尝试通过画布运行[https://apps.facebook.com/myapp](https://apps.facebook.com/myapp)它会运行但 getLoginStatus 根本不会触发。

```
var curLoc = window.location;

 FB.init({
   appId: 'xxxxxxxxxxxxxxx', // App ID
   channelUrl: curLoc.protocol + "//" + curLoc.hostname + ":" + curLoc.port + "/channel.html",
   cookie: true, // enable cookies to allow the server to access the session
   status: true,
   oauth: true,
   xfbml: true
 });

 FB.getLoginStatus(function (response) {
   if (response.status === 'connected') {
     smloader.gameVariables.smUserid = response.authResponse.userID;
     facebook.isLoaded = true;
   } else {
     facebook.authUser();
   }

 }, true); 
```

如果需要，请登录。

```
function facebook.authUser() {
 FB.login(function (response) {
   if (response.authResponse) {
     smloader.gameVariables.smUserid = response.authResponse.userID;
     facebook.isLoaded = true;
   }
   else {
     facebook.authUser();
   }
 }, { scope: 'email,publish_actions' }); 
```

}

一旦 Facebook.isLoaded 为真，我就知道我们已登录并准备继续。但它永远不会直接从画布页面到达那里。

我处于沙盒模式，目前通过 http 而不是 https 运行，因为我没有

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T17:28:33.190

我一直面临着同样的铅，这就是我修复它的方式：

即使 getLoginStatus() 在您的 http 网站中工作，getLoginStatus() 也不会在 fb 画布中触发，除非**您提供有效的安全画布 URL** ( [https://yoursite.com/](https://yoursite.com/) )！这意味着您需要在 https 服务器（端口 443）上运行您的应用程序
如果您不想购买证书，您可以创建并自签名证书（请参见此处： http: [//greengeckodesign.com/blog/2013/ 06/15/creating-an-ssl-certificate-for-node-dot-js/](http://greengeckodesign.com/blog/2013/06/15/creating-an-ssl-certificate-for-node-dot-js/)）

我希望这个能帮上忙

# php - 在 Flash 中设置 URLRequestHeader 时 PHP Rest Server 未收到 $_POST

> ID：12969634
> 
> 赞同：2
> 
> 时间：2012-10-19T07:45:06.983
> 
> 标签：php, actionscript-3, flash

我正在向 REST 服务器发送一个 json 字符串并接收一个作为回报，我使用的 flash 代码如下

```
 var urlLoader : URLLoader = new URLLoader();
        urlLoader.dataFormat = URLLoaderDataFormat.TEXT;
        urlLoader.addEventListener(Event.COMPLETE, completeHandler);
        urlLoader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);

        var header1 : URLRequestHeader = new URLRequestHeader("Content-Type", "application/json");
        var header2 : URLRequestHeader = new URLRequestHeader("Accept", "application/json");
        var header3 : URLRequestHeader = new URLRequestHeader("pragma", "no-cache");

        var urlRequest : URLRequest = new URLRequest(url);
        urlRequest.requestHeaders.push(header1);
        urlRequest.requestHeaders.push(header2);
        urlRequest.requestHeaders.push(header3);

        urlRequest.data = session;
        urlRequest.contentType = "application/json";
        urlRequest.method = URLRequestMethod.POST;
        urlLoader.load(urlRequest); 
```

当我没有将自定义请求标头添加到请求时，我的服务器会正​​确接收 POST 数据。当我添加自定义标题时，POST 为空。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:41:10.217

虽然数据将通过 POST 发送，但 PHP 不会填充`$_POST`全局数组，因为您使用的 Content-Type 为`application/json`.

尝试将您的 Content-Type 标头更新为`application/x-www-form-urlencoded`：

```
var header1 : URLRequestHeader = new URLRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
```

在这里，虽然您已经在上面设置了标题：

```
urlRequest.contentType = "application/x-www-form-urlencoded"; 
```

# c# - how to store user data in asp.net?

> ID：12969636
> 
> 赞同：2
> 
> 时间：2012-10-19T07:45:09.607
> 
> 标签：c#, asp.net

I'm developing an e-trade web application in ASP.NET.

To buy anything,first, users have to login. Let's say user logged in and started to shop. When user taps to **btnBuy**, i'm adding this item to a collection. Everything is working well so far.

Suppose that user bought something,`bought means here, i added item chosen to the`**Basket** `which contains all the items chosen`,then closed the web browser. What i do want to do is to store this data to be able to retrieve this data when user comes back. So,users are able to pick up where they leave off.

So far,i think of 2 options:

**1-)**Use XML file to retrieve data : I can use XML file to retrieve data but,here the problem is when user deleted an item chosen,i need to parse all the XML file to delete item chose,well ,what i think it's expensive.It makes the application very slower.

**2-)** Store in database : I think of storing in the database,but i think it's expensive as well. Because,every time users pick or leave someting, i need to make connection ,request ,query etc.

Do u guys any idea,what is the best way to do that ? Am i on the right track here ?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:01:34.407

ASP.NET provides for such kind of storage built in solution, based on a **Manager pattern**: called **Profile**. MSDN link where to start investigate the details: [http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)

Profile could be accessed via System.Web.HttpContext.Current.Profile almost anywhere (where appropriate of course in n-tier). The basic object is of a type **ProfileBase**. But you can inject yours. And There is also **ProfileProvider** (some default available in APS.NET as *SqlProfileProvider*) or you can inject yours. Later you can change your provider to target XML, DB... as needed (e.g. in a web farm more suitable would be DB) and also use some performance hints like Cache.

This snippet from web.config shows how to put Profile in play.

```
<profile defaultProvider="ProjectProfile" inherits="MyLib.ProjectProfile, MyLib">
    <providers >
         <clear/>
        <add name="ProjectProfile" type="MyLib.ProjectProfileProvider, MyLib" />
    </providers>
</profile> 
```

And you can even use it for not logged in users! That could be done via usage of another web.config setting:

```
<anonymousIdentification enabled="true" /> 
```

Which will support unique cookie for any user

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:58:25.873

A simple shopping cart solution is to just use cookie in the user's browser, since the data stored, is not important to the user or to the website, here's a sample: [http://www.codeproject.com/Articles/93639/Simple-Shopping-Cart-Basket-User-Control-using-ASP](http://www.codeproject.com/Articles/93639/Simple-Shopping-Cart-Basket-User-Control-using-ASP)

You could read more about cookie:

[http://msdn.microsoft.com/en-us/library/ms178194(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178194(v=vs.100).aspx)

However by using cookies you only get access to the data when user is visiting the website with the same browser, if it is matter to you, you can go with database solution, believe me database is much faster than reading/writing xml file, you can also clear up database when user order is complete

# ruby-on-rails - Rails：创建一个用户指定关联的表单和一个基于当前资源的表单

> ID：12969637
> 
> 赞同：0
> 
> 时间：2012-10-19T07:45:12.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个文章模型和一个评论模型。我目前有两种单独的表单来创建新评论：一种允许用户指定他们评论的文章名称，另一种是在文章显示视图下为该文章创建新评论。我在第一种情况下使用 form_for @comment，在第二种情况下使用 form_for [@article, @comment]。当用户将文章名称指定为字符串时，我在保存评论之前将其转换为文章 ID。

我的路线是

```
resources :comments

resources :articles do
  resources :comments 
end 
```

对于第二种形式，如何在评论保存失败时重定向回文章（应显示验证和错误）？对于第一个表单，我只是重定向到主页，因为那是我的第一个评论表单所在的位置。

另外，我在第一个表单上验证了文章名称字段不能为空。由于用户不需要指定文章名称，如何删除第二个表单的此验证？

我在 comments_controller 中的新函数处理了这两种形式。如何确定控制器中提交的表单是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:15:03.820

实际上重定向不是去这里的方式，我会说。`create`Rails 中的错误和验证处理通常采用在or方法中使用经过验证的对象重新呈现表单的`update`方式，而不是实际重定向到`new`or`edit`页面。

至于您保存两个版本的评论的问题，我会`form_for @comment`在两个版本中使用。转储嵌套表单版本使用表单中给定的文章字符串模拟用户的行为。这样你就可以省去很多 if-else 语句。

至于验证错误部分的渲染，您可以简单地检查您的参数中是否有 article_id（这意味着您通过给定文章创建/更新评论）或没有（这意味着您拥有第一个版本）。

一些代码来详细说明：

```
# routes.rb
# keep the routes as they are
resources :comments
resources :articles
  resources :comments
end

# CommentsController.rb
def new
  # don't use build
  @comment = Comment.new

  # get the article, if there is one to get
  @article = Article.find(params[:article_id]) if params[:article_id]

  # get all articles if there is no single one to get
  @articles = Article.all unless params[:article_id]
end

def create
  # fetch article id from title (in any case)
  # I'm assuming here
  params[:comment][:article_id] = fetch_article_id_from_title(params[:comment][:article_title])

  @comment = Comment.new(params[:comment])
  if @comment.save
    redirect_to everything_worked_fine_path
  else
    # render the new view of the comments and actually
    #  forget the article view. Most sites do it like this
    render action: "new"
  end
end

# form partial
<%= form_for @comment do |f| %>
  <% if @article %>
    # there's an article to save this comment for
    <%= f.hidden_field :article_title, @article.title   # I'm assuming here
  <% else %>
    # this means there's no particular article present, so let's
    # choose from a list
    <%= f.select ... %>
  <% end %>
<% end %> 
```

希望这可以帮助。

# redis - Redis PUBLISH 和消息的顺序

> ID：12969648
> 
> 赞同：3
> 
> 时间：2012-10-19T07:46:14.310
> 
> 标签：redis, real-time

如果两个不同的客户在同一个频道上进行发布，我可以假设通知订阅者的顺序会得到尊重吗？

*   所有订阅者都会收到第一个 PUBLISH 消息
*   那么所有的防晒者都会收到第二个？

由于 redis 应该是单线程的，但我想确保它不会同时处理两个 PUBLISH。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:48:58.153

是的，[`PUBLISH`](http://redis.io/commands/publish)是同步命令。在将消息推送给所有订阅者之前，它不会返回。而不同`PUBLISH`的命令自然会在 Redis 请求队列中序列化。

> **时间复杂度**：O(N+M)，其中 N 是订阅接收通道的客户端数量，M 是订阅模式的总数（任何客户端）。

# maven - jboss-as-maven-plugin 无法部署到域模式集群 Jboss AS 7？

> ID：12969650
> 
> 赞同：1
> 
> 时间：2012-10-19T07:46:21.530
> 
> 标签：maven, jboss, dns

我在将 WAR 部署到处于域模式的集群设置时遇到问题。我没有尝试远程部署，maven 和 JBOSS 都在同一台机器上运行。正如很少有人建议的那样，我也尝试不将本机端口用于域模式。在 domain.xml 中进行以下设置

```
<subsystem xmlns="urn:jboss:domain:jmx:1.1">
    <show-model value="true"/>
    <remoting-connector  use-management-endpoint="false" />
</subsystem> 
```

默认情况下，JBoss 远程处理在 9999 和 4447 上。我正在运行单节点集群，它添加了另一个偏移量为 100 的远程处理端口作为 4547。我已经尝试了所有这些端口 4447/4547 进入无穷大而没有错误。虽然 9999 只是退出而没有任何错误。

我的maven配置如下

```
<domain>
    <server-groups>
        <server-group>ha-server-group</server-group>
    </server-groups>
<profiles>
    <profile>ha</profile>
</profiles>
</domain>
<hostname>127.0.0.1</hostname>
<port>4547</port> 
```

奇怪的是，maven 能够使用相同的配置部署 .jar 文件，但是当我尝试部署 .war 时出现问题。

Maven 控制台输出如下，其中 .war 指定了当我没有指定任何主机端口配置时它连接到的端口。

```
[INFO] --- jboss-as-maven-plugin:7.1.1.Final:deploy (default-cli) @ ABC ---
Oct 18, 2012 5:39:17 PM org.xnio.Xnio <clinit>
INFO: XNIO Version 3.0.3.GA
Oct 18, 2012 5:39:17 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.0.3.GA
Oct 18, 2012 5:39:17 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 3.2.3.GA
----------------------------------------------------------------------------------------
[INFO] --- jboss-as-maven-plugin:7.1.0.Final:deploy (default-cli) @ XYZ ---
[INFO] Executing goal deploy on server localhost (127.0.0.1) port 9999.
Oct 18, 2012 5:39:29 PM org.xnio.Xnio <clinit>
INFO: XNIO Version 3.0.3.GA
Oct 18, 2012 5:39:29 PM org.xnio.nio.NioXnio <clinit>
INFO: XNIO NIO Implementation Version 3.0.3.GA
Oct 18, 2012 5:39:29 PM org.jboss.remoting3.EndpointImpl <clinit>
INFO: JBoss Remoting version 3.2.2.GA 
```

我可以使用 CLI 进行部署，但我正在寻找基于 maven 的解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:16:57.963

我搜索了一下并在 Jboss 社区的帮助下切换到 7.2。插件的最终版本成功了，我可以在域模式下连接到 9999

# javascript - Javascript 和 bing 地图，显示地址的地图（不使用纬度/经度）

> ID：12969651
> 
> 赞同：1
> 
> 时间：2012-10-19T07:46:26.683
> 
> 标签：javascript, bing-maps

我想使用地址显示 bing 地图，而不是使用纬度/经度。

可能吗？

如何？是否有一个简单的 API 或插件可以做到这一点？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:50:04.453

看看[Bing 地图地理编码 API](http://msdn.microsoft.com/en-us/library/cc161074.aspx)。这个允许您提供在地图上绘制的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:50:16.607

是的，您可以，您需要的是地理编码。地理编码是将地址转换为坐标的过程。获得坐标后，您可以在地图中使用它。 [http://msdn.microsoft.com/en-us/library/cc966793.aspx](http://msdn.microsoft.com/en-us/library/cc966793.aspx)

# c# - 如何在面板前面显示 MDI 子项

> ID：12969652
> 
> 赞同：1
> 
> 时间：2012-10-19T07:46:31.537
> 
> 标签：c#, mdi

我有一个`panel`我的主要`form`. 其余为空。我可以调用一个`MDI child`，并将其定位在 main 上`form`。我希望`child form`出现在 前面`panel`，但我做不到。我把面板放在后面，把子表单放在前面`(sentToBack(), bringToFront())`。`sentToBack()`解决了部分问题，`child form`完全显示，但`panel`应该留在背景上。

如何获得`childform`面板顶部？

提前致谢， ![图像显示发生了什么。 下半部分是单击按钮时。 下半部分的表格应覆盖顶部功能区](../Images/9a3ecba1f64b358161671d58a187ee09.png)

为了使图像更清晰：这是我的程序的 2 个屏幕截图，单击按钮后删除了所有按钮的面板。下半部分的面板位于正确的位置。

编辑：我不允许用户移动`child forms`，我只想将它们用作`dropdown`具有更多功能的菜单，或者作为在我的主窗体中拥有更多空间的简单方法（我只想要一个窗体）。我可以用面板来做到这一点，但这很难维护:)

# browser - 是否可以在 Web 应用程序中使用功能键（F2、F3...F11）？

> ID：12969654
> 
> 赞同：4
> 
> 时间：2012-10-19T07:46:42.487
> 
> 标签：browser

我正在尝试在 Web 应用程序中使用功能键。例如，如果用户按下 F2 或 F3，应用程序必须做一些事情。这可能吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:12:25.787

这是一个 jQuery 解决方案，使用[keydown](http://api.jquery.com/keydown/)。

```
<!doctype html>
<html>
 <head>
 <script type="text/javascript" src="jquery.min.js"></script>
 <script type="text/javascript">
    $(document).ready(function(){
        $("body").keydown(function(key) {
            if (key.which == 113) { // F2 key
                alert("testing");
            }
        });
    });
 </script>
 </head>
 <body>
  Test page. 
 </body>
</html> 
```

注意 - 功能键可能保留用于其他用途（例如 F5 是“刷新页面”），因此可能不建议使用这些键。

# linux - 使用 UBUNTU 和 arm-linux-gnueabi-gcc 为 ARM linux 交叉编译 JamVM - zlib 缺失

> ID：12969656
> 
> 赞同：2
> 
> 时间：2012-10-19T07:46:47.703
> 
> 标签：linux, arm, cross-compiling, jamvm

我正在尝试为[FriendlyARM mini 2440](http://www.friendlyarm.net/products/mini2440)构建 JamVM ！（http://www.friendlyarm.net/products/mini2440）

我使用以下命令安装了 ARM GCC：

```
sudo apt-get install gcc-arm-linux-gnueabi 
```

接下来我做了：

```
export CROSS_COMPILE=arm-none-linux-gnueabi-
./configure --host=arm-linux-gnueabi
make 
```

我收到这些错误：

```
 configure: WARNING: If you wanted to set the --build type, don't use --host.
        If a cross compiler is detected then cross compile mode will be used.
    checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for arm-linux-gnueabi-strip... arm-linux-gnueabi-strip
checking build system type... x86_64-unknown-linux-gnu
checking host system type... arm-unknown-linux-gnueabi
checking for style of include used by make... GNU
checking for arm-linux-gnueabi-gcc... arm-linux-gnueabi-gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether arm-linux-gnueabi-gcc accepts -g... yes
checking for arm-linux-gnueabi-gcc option to accept ISO C89... none needed
checking dependency style of arm-linux-gnueabi-gcc... gcc3
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ld used by arm-linux-gnueabi-gcc... /usr/arm-linux-gnueabi/bin/ld
checking if the linker (/usr/arm-linux-gnueabi/bin/ld) is GNU ld... yes
checking for /usr/arm-linux-gnueabi/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/arm-linux-gnueabi-nm -B
checking whether ln -s works... yes
checking how to recognize dependent libraries... pass_all
checking how to run the C preprocessor... arm-linux-gnueabi-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for arm-linux-gnueabi-g++... arm-linux-gnueabi-g++
checking whether we are using the GNU C++ compiler... yes
checking whether arm-linux-gnueabi-g++ accepts -g... yes
checking dependency style of arm-linux-gnueabi-g++... gcc3
checking how to run the C++ preprocessor... arm-linux-gnueabi-g++ -E
checking for arm-linux-gnueabi-g77... no
checking for arm-linux-gnueabi-xlf... no
checking for arm-linux-gnueabi-f77... no
checking for arm-linux-gnueabi-frt... no
checking for arm-linux-gnueabi-pgf77... no
checking for arm-linux-gnueabi-cf77... no
checking for arm-linux-gnueabi-fort77... no
checking for arm-linux-gnueabi-fl32... no
checking for arm-linux-gnueabi-af77... no
checking for arm-linux-gnueabi-xlf90... no
checking for arm-linux-gnueabi-f90... no
checking for arm-linux-gnueabi-pgf90... no
checking for arm-linux-gnueabi-pghpf... no
checking for arm-linux-gnueabi-epcf90... no
checking for arm-linux-gnueabi-gfortran... no
checking for arm-linux-gnueabi-g95... no
checking for arm-linux-gnueabi-xlf95... no
checking for arm-linux-gnueabi-f95... no
checking for arm-linux-gnueabi-fort... no
checking for arm-linux-gnueabi-ifort... no
checking for arm-linux-gnueabi-ifc... no
checking for arm-linux-gnueabi-efc... no
checking for arm-linux-gnueabi-pgf95... no
checking for arm-linux-gnueabi-lf95... no
checking for arm-linux-gnueabi-ftn... no
checking for g77... no
checking for xlf... no
checking for f77... no
checking for frt... no
checking for pgf77... no
checking for cf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for xlf90... no
checking for f90... no
checking for pgf90... no
checking for pghpf... no
checking for epcf90... no
checking for gfortran... no
checking for g95... no
checking for xlf95... no
checking for f95... no
checking for fort... no
checking for ifort... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for ftn... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 1572864
checking command to parse /usr/bin/arm-linux-gnueabi-nm -B output from arm-linux-gnueabi-gcc object... ok
checking for objdir... .libs
checking for arm-linux-gnueabi-ar... arm-linux-gnueabi-ar
checking for arm-linux-gnueabi-ranlib... arm-linux-gnueabi-ranlib
checking for arm-linux-gnueabi-strip... (cached) arm-linux-gnueabi-strip
checking if arm-linux-gnueabi-gcc supports -fno-rtti -fno-exceptions... no
checking for arm-linux-gnueabi-gcc option to produce PIC... -fPIC
checking if arm-linux-gnueabi-gcc PIC flag -fPIC works... yes
checking if arm-linux-gnueabi-gcc static flag -static works... yes
checking if arm-linux-gnueabi-gcc supports -c -o file.o... yes
checking whether the arm-linux-gnueabi-gcc linker (/usr/arm-linux-gnueabi/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by arm-linux-gnueabi-g++... /usr/arm-linux-gnueabi/bin/ld
checking if the linker (/usr/arm-linux-gnueabi/bin/ld) is GNU ld... yes
checking whether the arm-linux-gnueabi-g++ linker (/usr/arm-linux-gnueabi/bin/ld) supports shared libraries... yes
checking for arm-linux-gnueabi-g++ option to produce PIC... -fPIC
checking if arm-linux-gnueabi-g++ PIC flag -fPIC works... yes
checking if arm-linux-gnueabi-g++ static flag -static works... yes
checking if arm-linux-gnueabi-g++ supports -c -o file.o... yes
checking whether the arm-linux-gnueabi-g++ linker (/usr/arm-linux-gnueabi/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
(cached) (cached) checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking for arm-linux-gnueabi-gcc... (cached) arm-linux-gnueabi-gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether arm-linux-gnueabi-gcc accepts -g... (cached) yes
checking for arm-linux-gnueabi-gcc option to accept ISO C89... (cached) none needed
checking dependency style of arm-linux-gnueabi-gcc... (cached) gcc3
checking dependency style of arm-linux-gnueabi-gcc... gcc3
checking for ecj... ecj
checking for pthread_self in -lthr... no
checking for pthread_self in -lpthread... yes
checking for fmod in -lm... yes
checking for dlopen in -ldl... yes
checking for inflate in -lz... no
configure: error: zlib is missing 
```

**更新：**

如果我使用这些命令：

```
export CROSS_COMPILE=arm-none-linux-gnueabi-
./configure --host=arm-linux
make 
```

我收到此错误后`make`：

```
Making all in src
make[1]: Entering directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src'
make  all-recursive
make[2]: Entering directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src'
Making all in os
make[3]: Entering directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os'
Making all in linux
make[4]: Entering directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os/linux'
Making all in arm
make[5]: Entering directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os/linux/arm'
/bin/bash ../../../../libtool   --mode=compile gcc -DHAVE_CONFIG_H -I. -I../../../../src  -I../../../../src  -I../../../../src -g -O2 -MT callNative.lo -MD -MP -MF .deps/callNative.Tpo -c -o callNative.lo callNative.S
 gcc -DHAVE_CONFIG_H -I. -I../../../../src -I../../../../src -I../../../../src -g -O2 -MT callNative.lo -MD -MP -MF .deps/callNative.Tpo -c callNative.S  -fPIC -DPIC -o .libs/callNative.o
callNativeOABI.S: Assembler messages:
callNativeOABI.S:28: Error: too many memory references for `mov'
callNativeOABI.S:29: Error: no such instruction: `stmfd sp!,{r4,r5,ip,lr}'
callNativeOABI.S:30: Error: too many memory references for `mov'
callNativeOABI.S:31: Error: too many memory references for `mov'
callNativeOABI.S:32: Error: no such instruction: `ldr ip,[r4]@get ostack pntr'
callNativeOABI.S:33: Error: no such instruction: `ldr r2,[r4,'
callNativeOABI.S:34: Error: expecting operand after ','; got nothing
callNativeOABI.S:35: Error: no such instruction: `ldreq r1,[ip],'
callNativeOABI.S:36: Error: no such instruction: `addne r2,r2,'
callNativeOABI.S:37: Error: too many memory references for `sub'
callNativeOABI.S:38: Error: no such instruction: `ble do_call@yes,skip stack push'
callNativeOABI.S:39: Error: too many memory references for `add'
callNativeOABI.S:41: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:42: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:43: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:45: Error: no such instruction: `ldr r3,[lr,r2,lsl'
callNativeOABI.S:46: Error: invalid char '[' beginning operand 2 `[sp'
callNativeOABI.S:47: Error: too many memory references for `sub'
callNativeOABI.S:48: Error: no such instruction: `bne loop'
callNativeOABI.S:51: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:52: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:53: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:55: Error: no such instruction: `ldr r2,[ip]'
callNativeOABI.S:56: Error: no such instruction: `ldr r3,[ip,'
callNativeOABI.S:58: Error: too many memory references for `mov'
callNativeOABI.S:59: Error: no such instruction: `ldr pc,[r4,'
callNativeOABI.S:61: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:62: Error: no such instruction: `ldr r2,[r4]'
callNativeOABI.S:64: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:65: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:66: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:68: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:69: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:70: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:75: Error: expecting operand after ','; got nothing
callNativeOABI.S:77: Error: no such instruction: `strge r0,[r2],'
callNativeOABI.S:78: Error: too many memory references for `mov'
callNativeOABI.S:80: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:81: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:83: Error: no such instruction: `addle pc,pc,r5,lsl'
callNativeOABI.S:85: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:86: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:88: Error: no such instruction: `ldmdb r4,{r4,r5,sp,pc}'
callNativeOABI.S:90: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:91: Error: no such instruction: `ldmdb r4,{r4,r5,sp,pc}'
callNativeOABI.S:95: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:96: Error: no such instruction: `stfd f0,[r0],'
callNativeOABI.S:97: Error: no such instruction: `ldmdb r4,{r4,r5,sp,pc}'
callNativeOABI.S:99: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:100: Error: no such instruction: `stfs f0,[r0],'
callNativeOABI.S:101: Error: no such instruction: `ldmdb r4,{r4,r5,sp,pc}'
callNativeOABI.S:104: Error: junk at end of line, first unrecognized character is `@'
callNativeOABI.S:105: Error: invalid char '[' beginning operand 2 `[r0]'
callNativeOABI.S:106: Error: no such instruction: `ldmdb r4,{r4,r5,sp,pc}'
make[5]: *** [callNative.lo] Error 1
make[5]: Leaving directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os/linux/arm'
make[4]: *** [all-recursive] Error 1
make[4]: Leaving directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os/linux'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src/os'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/ehsun7b/Downloads/jamvm-1.5.4/src'
make: *** [all-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T13:06:20.620

借助 necroposting 的力量，我让 JamVM 出现并在 ARM Linux 上运行。

我的先决条件：

*   JamVM 2.0
*   GNU 类路径 0.99
*   为目标系统构建根编译的二进制文件（特别是带有`libz.so`和各自`include`的 s）；

GNU 类路径：

```
ANTLR_URL=http://www.antlr2.org/download/antlr-2.7.5.jar
ANTLR_JAR=antlr-2.7.5.jar
wget -c ${ANTLR_URL} --directory-prefix=/tmp

export PATH=$PATH:/usr/local/arm-2008q3/bin
export CROSS_COMPILE=arm-none-linux-gnueabi-
export ARCH=arm
export CC=${CROSS_COMPILE}gcc
export LD=${CROSS_COMPILE}ld
export PREFIX=/usr/classpath

./configure --host=arm-linux --without-x --disable-gtk-peer \
  --disable-gconf-peer --with-antlr-jar=/tmp/${ANTLR_JAR} \
  --prefix=${PREFIX}

make -j 4

sudo mkdir -p ${PREFIX}
sudo chown -R ${USER} ${PREFIX}

make install 
```

JamVM：

```
sudo apt-get install libtool zip

export PATH=$PATH:/usr/local/arm-2008q3/bin
export CROSS_COMPILE=arm-none-linux-gnueabi-
export ARCH=arm
export CC=${CROSS_COMPILE}gcc
export LD=${CROSS_COMPILE}ld

export TARGET_INCLUDE=/buildroot/output/host/usr/include
export TARGET_LIB=/buildroot/output/target/usr/lib
export CPPFLAGS=-I${TARGET_INCLUDE}
export LDFLAGS=-L${TARGET_LIB}

export PREFIX=/usr/jamvm
export CP_PREFIX=/usr/classpath

export CONFIGURE_ARGS="--host=arm-linux \
  --with-classpath-install-dir=${CP_PREFIX} --prefix=${PREFIX}" 

./autogen.sh ${CONFIGURE_ARGS}

make

# Install JamVM to the same paths both on host and target, 
# because I didn't find a configure arguments to distinguish such,
# and JamVM requires an installed GNU Classpath in order to build.

sudo mkdir -p ${PREFIX}
sudo chown -R ${USER} ${PREFIX}

make install 
```

关于您的问题：路径`libz.so`上的目标平台缺少第一个错误`-L`，第二个是错误的平台选择（可能是正确的编译器，但选择了错误的 C 源）。

# c# - 如何读取从服务器流式传输的 jpeg 图像

> ID：12969659
> 
> 赞同：0
> 
> 时间：2012-10-19T07:47:05.160
> 
> 标签：c#, winforms, image, jpeg, tcpclient

我有一台服务器，它不断传输 jpeg 图像，例如延时视频源。我需要在 C# WinForm TCP 客户端中显示这些图像，并且在流式传输时遇到问题。

我在这里和其他有类似问题的网站上阅读了许多帖子，但没有一个能够为我的问题提供解决方案。

我有以下代码，旨在从服务器检索图像并使用 PictureBox 控件显示它：（图像流中有标题信息）

```
while (true)
{
    NetworkStream stream = m_client.GetStream(); //Get the data stream from the server

    //Load Image
    while (stream.DataAvailable)
    {
        byte[] buffer = new byte[m_client.ReceiveBufferSize];
        stream.Read(buffer, 0, buffer.Length);
        string tempString = System.Text.Encoding.ASCII.GetString(buffer);
        //split header info and data into separate strings
        string[] splitString = tempString.Split(new string[] { "]" }, 2, StringSplitOptions.None);
        splitString[0] = splitString[0].Replace(@"\", "");
        //split header info into separate strings for use later
        string[] imageInfo = splitString[0].Split('|');

        int size = Convert.ToInt32(tempString.Length);
        //int offset = splitString[0].Length;
        buffer = new byte[size];
        stream.Read(buffer, 0, buffer.Length);

        //Convert Image Data To Image
        MemoryStream imageStream = new MemoryStream(buffer, 0, buffer.Length);
        imageStream.Position = 0;
        Bitmap img = new Bitmap(imageStream);

        //set the image display box properties
        VideoBox.Width = img.Width;
        VideoBox.Height = img.Height;
        VideoBox.Image = img; //Show the image in the picturebox
    }
    stream.Flush();
} 
```

目前，此代码运行至`Bitmap img = new Bitmap(imageStream);`其给出参数无效错误的位置。

这是我第一次这样做，所以对接下来要尝试什么有点迷茫，我花了最后一天尝试不同的解决方案，但这个似乎是迄今为止最好的（我认为：s）。

如果有人能指出我做错了什么或遗漏了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:11:48.537

首先，您必须能够从流中选择单个图像。您可以检查服务器是否使用某种传输帧，或者您可能必须检查图像标题以确定流的哪一部分代表单个图像。只有当您选择了代表单个图像的数据时，您才能将其传递给 Bitmap 构造函数。

使用 TCP 连接时，您必须明确引入一些帧格式。否则，您将无法确定内容的开始和结束位置。

# android - 我有一个名为 temp 的表，它只有两列：emailid 和密码

> ID：12969662
> 
> 赞同：0
> 
> 时间：2012-10-19T07:47:09.263
> 
> 标签：android, sqlite, system.data.sqlite

它是在第一个活动 main.java 上创建的。我想在另一个名为 arclist.java 的活动`emailid`中得到这个。`password`如何？这是我从表 Temp 中获取数据的代码，但它给出了一个错误：

```
public class MainScreen extends Activity 
```

{

```
//protected static final String Temp1 = null;
//protected static final String Temp1 =null;
ImageButton imgScanButton,imgMyOffersButton;
SQLiteDatabase db;
DatabaseHelper dbHelper;
protected String emailid;
protected String[] columns;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainscreen);
     db=dbHelper.getWritableDatabase();
    //db = dbHelper.getReadableDatabase();
    try{
          //db=openOrCreateDatabase("baab",SQLiteDatabase.CREATE_IF_NECESSARY,null);
          //db.openDatabase();
         // db.execSQL("Create Table Temp1(emailid integer,Password integer)");
          }catch(SQLException e)
          {
              e.getMessage();
          }
    imgScanButton = (ImageButton) findViewById(R.id.imgbtnScan);
    imgMyOffersButton = (ImageButton) findViewById(R.id.imgbtnMyOffers);

    CursorFactory factory;
    try {

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    imgScanButton.setOnClickListener(new OnClickListener()
    {

         public void onClick(View arg0) 
                {

             Cursor c=db.query("Temp01", columns, null, null, null, null, null);
            // Cursor cursor = db.query("Temp4", columns,
                     // null, null, null, null, null);
                    TextView tv = (TextView) findViewById(R.id.textView1);
                    tv.setText(c.getString(0));
                    c.moveToFirst();
                }
            });

        db.close(); 

        } 
```

Logcat 及其力关闭：

```
    10-19 13:12:06.992：E/AndroidRuntime(24732)：致命异常：主要
 10-19 13:12:06.992: E/AndroidRuntime(24732): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.checkinfo/com.example.checkinfo.MainScreen}: java.lang.NullPointerException
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread.access$2300(ActivityThread.java:125)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.os.Handler.dispatchMessage(Handler.java:99)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.os.Looper.loop(Looper.java:123)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread.main(ActivityThread.java:4627)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 java.lang.reflect.Method.invokeNative(Native Method)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 java.lang.reflect.Method.invoke(Method.java:521)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 10-19 13:12:06.992: E/AndroidRuntime(24732): at dalvik.system.NativeStart.main(Native Method)
 10-19 13:12:06.992：E/AndroidRuntime(24732)：引起：java.lang.NullPointerException
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 com.example.checkinfo.MainScreen.onCreate(MainScreen.java:38)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 10-19 13:12:06.992: E/AndroidRuntime(24732): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:56:00.193

设置`db=dbHelper.getWritableDatabase();`并且不会有空指针异常。并且之后

```
Cursor c=db.query(Temp, columns, null, null, null, null, null); 
```

使用`c.moveToFirst();` 好

```
Cursor c=db.query("Temp01", columns, null, null, null, null, null);
 c.moveToFirst();

            // Cursor cursor = db.query("Temp4", columns,
                     // null, null, null, null, null);
                    TextView tv = (TextView) findViewById(R.id.textView1);
                    tv.setText(c.getString(0)); 
```

# objective-c - iOS标签栏，如何排序到新的标签栏视图

> ID：12969665
> 
> 赞同：0
> 
> 时间：2012-10-19T07:47:32.937
> 
> 标签：objective-c, ios, storyboard, tabbar, segue

我已经搜索和搜索，但我无法通过使用 segue 和情节提要找到方法，我可以实现一个标签栏菜单链接到另一个页面，该页面具有一个全新的视图，带有自己的标签栏和一组新的菜单。

或者也许标签栏甚至不是要走的路？

任何帮助都会尽快提供帮助，因为这是学校作业的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:55:49.350

只需在情节提要上再添加一个 TabBarController 并将其与父 TabBar 作为另一个视图连接：

![在此处输入图像描述](../Images/20ad89ebd88430979e79bd76d1db1cf8.png)

在设备上看起来像这样：

![在此处输入图像描述](../Images/fa631b6ad2cb0235ae9f6dfefa5facc6.png)

# c# - 如何构建一个运行 3 次的循环并测试年龄输入

> ID：12969669
> 
> 赞同：0
> 
> 时间：2012-10-19T07:47:47.680
> 
> 标签：c#, windows

我需要制作一个运行 3 次的循环和三个年龄段的开关，`0-10` `11-20`并`21-65`使用以下代码：

```
class Program
    {
        private static object N;
        static void Main(string[] args)
        {
            string answer;                                   
            {
              Console.WriteLine("please enter your name:");
              string name = Console.ReadLine();

              Console.WriteLine("please enter your surname:");
              string surname = Console.ReadLine();

              Console.WriteLine("please enter your age:");
              string age = Console.ReadLine();        

              Console.WriteLine("please enter your adress:");
              string adress = Console.ReadLine();

              Console.WriteLine("hallo,{0} {1},veel sucess met C#", name, surname);

              Console.WriteLine("zijn deze gegevens juist? J/N");
              answer = Console.ReadLine();
            }
            while(answer == "N");
        }
   } 
```

我尝试了一些东西来测试年龄，但我总是出错。另外，我不知道如何正确编写循环代码。

有人可以为这两个问题指出正确的方向吗？

对不起我的英语不好，我是荷兰人。

*注意：在这不是家庭作业的答案之一下提到的 OP。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:50:52.647

Switch 语句对特定值而不是范围进行操作，因此您希望使用系列`if`语句。

使用计数器（在循环外声明并在每次执行时递增）来确定循环运行了多少次（或使用`for`循环）。

**编辑**

```
class Program
{
    private static object N;

    static void Main(string[] args)
    {
        string answer;
        int runCount= 0;

        do
        {
          ++runCount;
          Console.WriteLine("please enter your name:");
          string name = Console.ReadLine();

          Console.WriteLine("please enter your surname:");
          string surname = Console.ReadLine();

          Console.WriteLine("please enter your age:");
          int age = int.Parse(Console.ReadLine());

          if(age >= 0 && age <= 10)
          {
              Console.WriteLine("Child");
          }
          else if(age <= 20)
          {
              Console.WriteLine("Young adult");
          }
          else if(age <= 65)
          {
              Console.WriteLine("Adult");
          }

          Console.WriteLine("please enter your adress:");
          string adress = Console.ReadLine();

          Console.WriteLine("hallo,{0} {1},veel sucess met C#", name, surname);

          Console.WriteLine("zijn deze gegevens juist? J/N");
          answer = Console.ReadLine();
        }
        while(runCount < 3 && answer == "N");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:54:26.997

您可能想要以下内容：

```
var ageGroups = new [] { "0-10",  "11-20", "21-65"};

foreach(var ageGroup in ageGroups)
{
    // do your thing. This will loop three times, once for each age group
    // example of switch (but: code-smell, you probably want class hierarchy later)
    switch(ageGroup)
    {
        case "0-10":
         // do somethihg
         break;
    }
} 
```

或者，正如 MrFox 所说，当您没有预定义的年龄组（但我在您的问题中没有看到）时：

```
for(var i = 0; i < 3; i++)
{
    // do your thing
    // example of if-statement for range (cannot do with switch):
    int convertedAge;
    if(int.TryParse(age, out convertedAge))
    {
        if(convertedAge >= 0 && convertedAge <= 10)
        {
             // do your thing
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:03:36.357

您的界面是多语言的，有些文本是用英语写的，有些是用荷兰语写的，下定决心或允许用户选择他的语言。

至于编程技能，你应该谷歌通用 C# 结构。这[门课](http://www.nand2tetris.org/)也很好。最后，作为一名程序员，无论您来自哪个国家，您都最好学习英语。

```
class Program
{
    static int age;
    static void Main(string[] args)
    {
        string answer;
        do
        {
            Console.WriteLine("please enter your name:");
            string name = Console.ReadLine();

            Console.WriteLine("please enter your surname:");
            string surname = Console.ReadLine();

            Console.WriteLine("please enter your age:");
            age = Convert.ToInt32(Console.ReadLine());

            Console.WriteLine("please enter your adress:");
            string adress = Console.ReadLine();

            Console.WriteLine("hallo,{0} {1},veel sucess met C#", name, surname);

            Console.WriteLine("zijn deze gegevens juist? J/N");
            answer = Console.ReadLine();
        }
        while (answer == "N");

        for (int i = 0; i < 3; i++)
        {
            if (age >= 0 && age <= 10)
            {
                // First age group.
            }
            if (age >= 11 && age <= 20)
            {
                // Second age group.
            }
            if (age >= 21 && age <= 65)
            {
                // Third age group.
            }
        }
    }
} 
```

编辑：谢谢，现在可以使 while 循环正确。我不清楚 for 循环应该去哪里。

# c++ - C++，如何动态包含 .h

> ID：12969672
> 
> 赞同：1
> 
> 时间：2012-10-19T07:47:50.413
> 
> 标签：c++, header

对不起，我的英语不好。

例如 ：

```
//
// File : Main.cpp
// 
#include <stdlib.h>
int main()
{
  printf(TEST_DEFINE);
  return (EXIT_SUCCESS);
} 
```

标题：

```
//
// File : test_define.h
//
#ifndef TEST_DEFINE_H_INCLUDED
#define TEST_DEFINE_H_INCLUDED

#define TEST_DEFINE

#endif 
```

我想通过编译器或其他程序包含该标头。我不想在 CPP 文件中包含此标头。

我该如何处理？我对所有提议持开放态度。

这种情况非常棘手，但对于我的 POC 程序来说是必需的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:43:10.000

GCC 有一个选项`-include` *文件*，它会导致预处理器包含标题，就好像你的程序的第一行说`#include "file"`

见[手册](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#index-include-966)

例如，给定一个固定版本的 main（应该`#include <stdio.h>`）：

```
#include <stdlib.h>
#include <stdio.h>
int main()
{
  printf(TEST_DEFINE);
  return (EXIT_SUCCESS);
} 
```

和你的标题：

```
//
// File : test_define.h
//
#ifndef TEST_DEFINE_H_INCLUDED
#define TEST_DEFINE_H_INCLUDED

#define TEST_DEFINE "hello\n"

#endif 
```

然后我可以像这样使用它：

```
$ g++ -include test_define.h main.cpp -o main
$ ./main
hello 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T07:51:36.220

您不能动态包含任何标题，C++ 是一种静态语言。

您需要静态包含标题`#include "test_define.h"`

您唯一的选择是自己编写一个 C++ 解析器（或使用现有的解析器），读取头文件，解析它并从符号树中提取您想要的符号。但是，除非您是具有多年核心编程经验并且可以解释为什么需要这样做的人，否则您永远不应该这样做。

* * *

好的，所以我们不是在谈论任何动态的东西，我们在谈论一个`#include`包含一些定义的普通头文件。

你想要的是以下内容：

一个文件`my_header.h`包含：

```
#ifndef TEST_DEFINE_H_INCLUDED
#define TEST_DEFINE_H_INCLUDED

enum {foo, bar} my_enum;

#endif 
```

还有一个文件`my_program.cc`包含：

```
#include "my_header.h"

int main(int argc, char** argv) {
  my_enum my_variable = foo;

  return my_variable == foo ? EXIT_SUCCESS : EXIT_FAILURE;
} 
```

# java - 如何在 java spinner 中将 1000 显示为 1.000

> ID：12969678
> 
> 赞同：1
> 
> 时间：2012-10-19T07:48:15.127
> 
> 标签：java, swing, localization, number-formatting, jspinner

> **可能重复：**
> [JSpinner 编辑器语言环境](https://stackoverflow.com/questions/1035063/jspinner-editor-locale)

我必须在 java 的微调器中将 1000 值显示为 1.000，默认情况下它显示为 1,000。但在欧洲地区，数字应该是 1.000,00 格式而不是 1,000.00 。有人可以帮我弄这个吗。我正在使用以下代码：

```
 JSpinner.NumberEditor editor = new JSpinner.NumberEditor(spinner, pattern);

 spinner.setEditor(editor); 
```

并使用模式作为`"##.##0"`，但这是抛出异常。我可以为此编写通用代码，它可以根据语言环境（即 en、fr、pt 等）处理数字格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:15:21.660

尝试显式创建或获取语言环境：

```
JSpinner spinner = new JSpinner();
String pattern = "0.000"; // valid format
JSpinner.NumberEditor editor = new JSpinner.NumberEditor(spinner, pattern);
DecimalFormat format = editor.getFormat();
Locale locale = new Locale("ru", "RU"); // create your specific locale
DecimalFormatSymbols decimalFormatSymbols = new DecimalFormatSymbols(locale);
format.setDecimalFormatSymbols(decimalFormatSymbols);
spinner.setEditor(editor); 
```

# android - 如何快速插入数千个联系人

> ID：12969680
> 
> 赞同：1
> 
> 时间：2012-10-19T07:48:17.017
> 
> 标签：android

我是一个菜鸟。我正在开发一个项目，需要我快速将数千个联系人插入到 android 中，然后删除它们。我已仔细阅读有关[使用 applyBatch 插入数千个联系人条目的页面很慢](https://stackoverflow.com/questions/5596354/insertion-of-thousands-of-contact-entries-using-applybatch-is-slow)。我想使用'4 Answers'中提到的方法，但我无法理解一些变量和类，例如mOpenHelper，Tables.GUYS和Guys.STRINGCOLUMNTYPE。我需要你的帮助。

我知道如何将数据插入 SQLite，但我发现在位于 /data/data/com.android.providers.contacts/databases 的contacts2.db 中有很多表。但是，我只需要在contacts2.db 中插入两个字段，姓名和电话号码。我无法分析这些表，因为它们太多了。

# c# - 如何为 DevExpress WPF GridControl 行着色？

> ID：12969682
> 
> 赞同：1
> 
> 时间：2012-10-19T07:48:36.687
> 
> 标签：c#, wpf, data-binding, devexpress

我有一个 GridControl ：

```
 <dxg:GridControl Name="grd"  Height="270">
            <dxg:GridControl.Columns>
                <dxg:GridColumn Header="Id" FieldName="Id" AllowEditing="True" Width="30"/>
                <dxg:GridColumn Header="Name" FieldName="Name" AllowEditing="False" />
                <dxg:GridColumn Header="SurName" FieldName="SurName" AllowEditing="False" />
                <dxg:GridColumn Header="Age" FieldName="Age" CellStyle="{StaticResource customCellStyle}"  AllowEditing="False" />
                <dxg:GridColumn Header="Income" FieldName="Income" AllowEditing="False" />
                <dxg:GridColumn Header="Dept" FieldName="Dept" AllowEditing="False" />
            </dxg:GridControl.Columns>

        </dxg:GridControl> 
```

我一直在绑定 itemsource=List。但是如果
Age<=0 或 Income<0 或 Dept<=0 我想着色（绑定数据后行着色为红色）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:35:02.000

您可以将其用于整行`style`：

```
<dxg:TableView.RowStyle>
    <Style  BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=RowStyle}}" TargetType="{x:Type dxg:GridRowContent}">
        <Setter Property="Background" Value="{Binding Path=DataContext.Colour}" />
    </Style>
</dxg:TableView.RowStyle> 
```

对于单元格`style`：

```
<dxg:GridColumn.CellStyle>
    <Style TargetType="{x:Type dxg:CellContentPresenter}">
        <Setter Property="TextBlock.Foreground" Value="Black" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=Data.SomeBooleanValue}" Value="True">
                <Setter Property="Background" Value="Lime" />
                <Setter Property="TextBlock.Foreground" Value="Black" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</dxg:GridColumn.CellStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T09:22:39.963

您需要编辑 TableView

```
<dxg:GridControl.View>
<dxg:TableView x:Name="tv_grd" ShowGroupPanel="False" AutoWidth="True"                  
    IsTotalSummaryMenuEnabled="False" RowUpdated="tv_grd_RowUpdated" >
    <dxg:TableView.FormatConditions>                        
        <dxg:FormatCondition ApplyToRow="True" Expression="[Age] &lt; '0'" FieldName="Age" PredefinedFormatName="LightRedFillWithDarkRedText"/>
    </dxg:TableView.FormatConditions>
    <dxg:TableView.FormatConditions>                        
        <dxg:FormatCondition ApplyToRow="True" Expression="[Income] &lt; '0'" FieldName="Income" PredefinedFormatName="LightRedFillWithDarkRedText"/>
    </dxg:TableView.FormatConditions>
        <dxg:FormatCondition ApplyToRow="True" Expression="[Dept] &lt; '0'" FieldName="Dept" PredefinedFormatName="LightRedFillWithDarkRedText"/>
    </dxg:TableView.FormatConditions>
</dxg:TableView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T07:02:09.587

在资源部分添加以下行：

```
<Style x:Key="ConditionalRowStyle"  BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=RowStyle}}" TargetType="{x:Type dxg:GridRowContent}">
        <Setter Property="Background" Value="{Binding Path=DataContext.Age, Converter={local:ColorValueConverter}}"/>
</Style> 
```

然后创建一个实现 IValueConverter ColorValueConverter 的类

```
 public class ColorValueConverter : MarkupExtension, IValueConverter
    {

        #region IValueConverter Members
        public object Convert(object value, Type targetType,
        object parameter, CultureInfo culture)
        {
      /* your conditions here i.e Age<=0 */     
       if ((Int64)value <= 0)
         /*Return red color*/
                return Brushes.Red;
            else
        /*Return the default color*/                  
                return Brushes.White;
        }

        public object ConvertBack(object value, Type targetType,
        object parameter, CultureInfo culture)
        {
            return null;
        }
        #endregion

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return this;
        }
    } 
```

> **将 xmlns:local 设置为 ColorValueConverter 类的命名空间**

最后在表格视图中设置行样式绑定：

```
 <dxg:TableView Name="tableView1" RowStyle="{StaticResource ConditionalRowStyle}"> 
```

对其他列也重复相同的操作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-23T13:12:53.850

您可以以编程方式将格式设置为行。它也适用于gridView。

```
SolidColorBrush scb = new BrushConverter().ConvertFromString("#FFFF0000") as SolidColorBrush;//Red
        DevExpress.Xpf.Core.ConditionalFormatting.Format frm = new DevExpress.Xpf.Core.ConditionalFormatting.Format { Background = scb };
        TreeListView.FormatConditions.Add
            (
                new FormatCondition { FieldName = "Name", ApplyToRow = true, Format = frm , Expression = "[ZoneId] = 1" }
            ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T08:18:15.780

您可以从这里开始：[如何有条件地应用样式](http://help.devexpress.com/#WPF/CustomDocument6772)

# php - $_GET 未定义索引（来自 mysql 表的值）

> ID：12969690
> 
> 赞同：0
> 
> 时间：2012-10-19T07:48:55.800
> 
> 标签：php, mysql, phpmyadmin

好吧，考虑到 PHP/HMTL 编程，我是一个绝对的初学者，而且我已经被这些问题困扰了好几天了。

首先，我创建了包含以下列（id、Name、Surname、Telephone_number、Email）的 Mysql 表。然后我成功地创建了阅读表格的表格。现在我想阅读并稍后使用以下代码编辑特定行：

```
41 <?php
42 $con = mysql_connect("localhost","username","password");
43 mysql_select_db("database", $con);
44 $id=$_GET["id"];
45 $result = mysql_query("SELECT * FROM Table  where id='$id'");
46 $row = mysql_fetch_array($result);
47 ?> 
```

但我得到的只是以下错误：注意：未定义索引：第 44 行 C:\xampp\htdocs\contacts_edit.php 中的 id

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T07:55:03.973

您尚未在 URL 中设置**GET**参数。这就是为什么**id**没有在你的全局中定义的原因。

为防止出现该问题，请先检查变量：

```
$id = isset($_GET['id']) ? (int)$_GET['id']: 0; 
```

或者

```
if (!isset($_GET['id']) {
    $_GET['id'] = 0;
} 
```

**给你一个简短的提示...**

你真的应该看看你已经建立了一个非常大的安全漏洞的 SQL 注入。

不要在 SQL 查询中直接使用**$_GET**和**$_POST 。**您应该更喜欢使用 PDO 或 MySQLi 的预处理语句。如果您想使用您的解决方案，请将您的 id 转换为一个整数值，如下所示：

```
$id = (int)$_GET['id']; 
```

那么你有一个默认值 0 当它没有设置时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:55:40.960

您必须先检查 id 是否已设置

```
<?php

$con = mysql_connect("localhost","username","password");
mysql_select_db("database", $con);

if(isset($_GET['id'])) {

   $id=$_GET["id"];
   $result = mysql_query("SELECT * FROM Table  where id='$id'");
   $row=mysql_fetch_array($result);
}
?> 
```

更好的方法是使用 pdo 或 mysqli。

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php?lq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:05:28.460

我这样做并为我工作

```
 <?php
 $con = mysql_connect("localhost","***","***");
 mysql_select_db("***", $con);
 if(isset($_GET["id"]) && !empty($_GET["id"])){
    $id= $_GET['id'];
    $result = mysql_query("SELECT * FROM core_usuarios  where id=".$id);
    $row = mysql_fetch_array($result);
    print_r($row);
}
 ?> 
```

顺便说一句，如果您想连接到数据库并且使用“普通 php”，最好使用 PDO PHP [http://www.php.net/manual/en/pdo.construct.php](http://www.php.net/manual/en/pdo.construct.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T07:55:03.750

你应该有这样的东西

```
http://site.com/contacts_edit.php?id=1 
```

然后在contacts_edit.php中你可以使用`$_GET['id']`

再见

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T07:59:59.293

你应该这样做：

```
$con = mysql_connect("localhost","username","password");
mysql_select_db("database", $con);
if(isset($_GET['id'])) {
  $id=$_GET["id"];
  $result = mysql_query("SELECT * FROM Table  where id='$id'");
  $row = mysql_fetch_array($result);
} 
```

# java - 当用户命令它停止时，如何停止 Java 命令提示符中的线程？

> ID：12969694
> 
> 赞同：1
> 
> 时间：2012-10-19T07:49:00.943
> 
> 标签：java, multithreading

基本上，我有一个在控制台中运行的 Java 线程，它将无限运行，除非用户输入“暂停”，否则程序应该停止线程并停止控制台。

这是线程的 set_interval 部分的样子（用户可以输入他们想要的线程之间的间隔时间）：

```
public void set_interval(int mins, int secs) {
    time = (mins * 60000) + (1000 * secs);
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        public void run() {
            try {
                count += counter;
                String name = getName();
                Date date = new Date();
                System.out.print("\n" + "Thread:" + name + " " + date + " - counter: " + count);
                Thread.sleep(time);
            } catch(InterruptedException e){
                System.out.print(e);
            }
    }, 0, time);    
} 
```

这是主要的样子： `}else if (checkLine.equals("halt")){ Thread test = new Thread("name"); test.interrupt(); break; }`

我看到的每个地方都说要使用中断，但是这个中断似乎不起作用。有人有什么想法吗？还是我只是忽略了一些小细节？我有可能需要使用套接字来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:28:30.367

在您的所有线程上发布`Thread.interrupt`。而且这些线程必须[支持中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。基本上，线程必须：

1.  不时测试中断标志，例如使用`Thread.currentThread.isInterrupted()`
2.  接收完毕`InterruptedException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:23:36.813

为什么不将计时器移出函数并进入类范围？然后调用`timer.purge()`or `timer.cancel()`? - 但坚持下去！他们只停止/取消所有非活动任务。当前执行的任务将永远不会停止。

您正在尝试停止当前正在执行的任务。一种更简单的方法是：有一个`AtomicBoolean dontKeepRunning`变量，当您希望任务必须终止时设置为 true。

像这样：

```
private AtomicBoolean dontKeepRunning;
public YourTimerTask(){ dontKeepRunning = new AtomicBoolean();}
public void halt()
{
     dontKeepRunning.set(true);
}
public void set_interval(int mins, int secs) {
    time = (mins * 60000) + (1000 * secs);
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        public void run() {
            try { 
                count += counter;
                String name = getName();
                Date date = new Date();
                System.out.print("\n" + "Thread:" + name + " " + date + " - counter: " + count);
                while(dontKeepRunning.get() == false){}
                return;
            } catch(InterruptedException e){
                System.out.print(e);
            }
    }, 0, time);    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:00:22.770

中断只中断你中断的线程。在您的代码中，您创建中断的线程，但不会影响其他线程。

您可以在 Timer 中中断线程，除非您记录中断但继续，就好像它没有发生一样，即它不会停止线程。

我会为此使用 ScheduleExecutorService，因为它支持`shutdownNow()`停止线程池并中断所有正在运行的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:02:16.890

看看[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)，它可以用来管理你的任务。使用执行器服务使 Java 中的多线程生活更容易:)

# android - 将主题应用到 DialogPreference 的对话框

> ID：12969701
> 
> 赞同：5
> 
> 时间：2012-10-19T07:49:27.827
> 
> 标签：android, dialog

我希望从 DialogPreference 中出现的对话框具有我在 style.xml 中定义的主题。

我怎么能做到？

提前致谢！

# css - 不仅在文本上设置背景颜色，还在 td 中设置空白空间

> ID：12969715
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:50:18.290
> 
> 标签：css

我想使用 span 将背景颜色设置为孔 td。

这是我的代码：

```
<td>
<span style="background-color: red;">pending</span>
</td> 
```

如果我像这样给它，我只会得到文本的背景颜色，但我想要 bg 颜色到孔 td。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:51:09.043

```
<td style="background-color: red;">
<span>pending</span>
</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:01:02.743

试试这个：

```
 <td>
        <span style="background-color: red;width:100%;height:100%;display:block;">pending</span>
    </td> 
```

查看[示例](http://jsfiddle.net/NFsup/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:25:49.757

**试试这个：**

```
<table width="100%">
   <tr>
      <td>
    <span style="background-color: red; display:block;">
           pending
        </span>
      </td> 
   </tr>    
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:51:15.533

在单元格本身而不是跨度上设置背景颜色

# android - ViewPager with Fragments -> 第二次选择崩溃

> ID：12969721
> 
> 赞同：2
> 
> 时间：2012-10-19T07:50:50.567
> 
> 标签：android, android-fragments, android-viewpager

所以我在玩 ViewPager 和 Fragments，但我遇到了一个问题：我可以从第一个 ViewPage/Fragment 滑动到第三个 ViewPage/Fragment，但是一旦我想回到第二个或第一个，它就会崩溃。

异常：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

我的 MainActivity（仅 XML 中的 ViewPager）：

```
public void onCreate(Bundle savedInstanceState) {
        if(created)
            return;
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }
    }

public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = null;
            switch (i) {
            case 0:
                fragment = new TrackingFragment();
                break;
            case 1:
                fragment = new TripFragment();
                break;
            case 2:
                fragment = new MapFragment();
                break;
            }

            Bundle args = new Bundle();
            args.putInt(TrackingFragment.ARG_SECTION_NUMBER, i + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase();
            case 1:
                return getString(R.string.title_section2).toUpperCase();
            case 2:
                return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction arg1) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction arg1) {
        try {
            mViewPager.setCurrentItem(tab.getPosition());
        } catch (IllegalStateException e) {
        }
    } 
```

我有 3 个片段，其中一个包含 LinearLayout，一个作为 ListFragment，一个返回 MapView（使用 Android 支持库）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:04:53.107

地图视图和片段活动的这个问题。我在我的项目中解决了 [这个问题](https://stackoverflow.com/questions/9440606/mapview-inside-fragment-specified-child-already-has-a-parent)

而[这个](https://gist.github.com/977234)

# android - x dpi 与屏幕宽度、比例等之间的差异

> ID：12969725
> 
> 赞同：3
> 
> 时间：2012-10-19T07:50:54.330
> 
> 标签：android

在从图形布局设计视图进行自定义设备配置时，我对 x dpi、y dpi、屏幕宽度和屏幕高度、比率和密度感到有些困惑。这是我为我的 REAL 设备配置找到的唯一东西 - 240 x 320 像素，2.8 英寸（~143 ppi 像素密度）。我如何获得以下信息。对于我的自定义设备配置 -

```
x dpi= ?
y dpi = ?
screen width=240
screen height=320
ratios=?
density=?
screen size=2.8 inch (diagonal) 
```

根据开发者指南- ![在此处输入图像描述](../Images/216e71040a1430df602733ffce15b171.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:16:21.623

这对我来说也有点困惑。但是在不同的设备上运行这些功能，我掌握了它，现在一切都清楚了。希望这对你也有帮助。

```
 DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    int height = metrics.heightPixels;
    int width = metrics.widthPixels; 
```

//注意：以上公式为您提供值：对于三星 Galaxy sIII：720 * 1280 对于三星 4g LTE 平板电脑：800 x 1232

因此，您会想知道这两种设备的高度几乎相同。但这不是它的工作方式。您必须使用下面的函数“convertPixelsToDp”来获得实际的 dp。

```
 public static float convertPixelsToDp(float px,Context context)
     {
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float dp = px / (metrics.densityDpi / 160f);
        return dp;

     } 
```

因此，使用此公式后，它将为您提供三星 Galaxy sIII 的 360*640。

```
 //To convert dp back to pixel
 public static float convertDpToPixel(float dp,Context context){
        Resources resources = context.getResources();
        DisplayMetrics metrics = resources.getDisplayMetrics();
        float px = dp * (metrics.densityDpi/160f);
        return px;
    }

    //This will give you ratio
    // For Samsung Galaxy sIII : ratio is 2 (320/160)
    float d = getApplicationContext().getResources().getDisplayMetrics().density;

    // will either be DENSITY_LOW, DENSITY_MEDIUM or DENSITY_HIGH
    //For Samsung Galaxy sIII : 320 dpi
    int dpiClassification = metrics.densityDpi; 
```

# smalltalk - 如何在 VisualWorks 中执行外部进程？

> ID：12969727
> 
> 赞同：1
> 
> 时间：2012-10-19T07:51:01.123
> 
> 标签：smalltalk, visualworks

如何在 VisualWorks Smalltalk 中执行外部进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:58:16.887

使用`ExternalProcess fork`. 例如`ExternalProcess fork: 'date'.`。

但是，`fork`只会采用一个程序，并且参数必须在数组中单独传递。如果您想要更复杂的命令，可以使用以下`shOne:`方法：`ExternalProcess shOne: 'test -d data || mkdir data && cd data'.`

# java - 使用多个 int 数组作为参数

> ID：12969729
> 
> 赞同：1
> 
> 时间：2012-10-19T07:51:07.467
> 
> 标签：java, arrays, function, int, args

问题是：我有 3 个 int [] 作为 args，我需要将它们传递给与它们一起使用的函数。args[] 是：

```
 1: {14,14,17,17,14,12,13,11,12}
 2: {74,34,57,67,34,42,53,61,22}
 3: {24,24,12,21,29,14,21,17,12} 
```

至于来源想法：

```
public class Main {
    public static void main(String[] args) {
        System.out.println("amount: " + args.length);
        int[] intArray = new int[args.length];
        for(int i=0;i<args.length;i++)
             intArray[i]=Integer.valueOf(args[i]);
        int[] statica= intArray[0];
        int[] inserta= intArray[1];
        int[] reservea= intArray[2];

    GraphicConsts.getSvgStylTotalamount();
    InputValues inputValues = new InputValues(statica, inserta, reservea);
    inputValues.init();
} 
```

}

输入值：

```
public class InputValues {

private int[] staticamount; 

public int[] insertamount;

private int[] reserveamount;

private int[] totalamount=new int[]{};
private int[] depositDF=new int[]{};
private int[] depositelse=new int[]{};

public InputValues(int statica, int inserta, int reservea) {

// TODO Auto-generated constructor stub
}
    public void init() {

// AUTO generated setters und getters

} 
```

整个过程通过 FOPConverter 进行，但该部分正在工作。如果我对数组进行硬编码，那么整个事情都有效

```
private int[] staticamount= new int[]{14,14,17,17,14,12,13,11,12}; 
```

但我需要那些作为参数。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:05:03.263

如果我理解正确，您只想使用 3 个参数，其中每个参数用作列表。好吧，您可以使用 GSON 包并像单个字符串一样传递参数。这是示例：

输入：

参数1：`[14,14,17,17,14,12,13,11,12]`

参数2：`[74,34,57,67,34,42,53,61,22]`

参数 3：`[24,24,12,21,29,14,21,17,12]`

```
import java.lang.reflect.Type;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
....
public static void main(String[] args) {

....

Type collectionType = new TypeToken<int[]>(){}.getType();

int[] festmengeNew1 = gson.fromJson(args[0], collectionType); 
int[] festmengeNew2 = gson.fromJson(args[1], collectionType); 
int[] festmengeNew3 = gson.fromJson(args[2], collectionType); 
....
} 
```

如您所见，我将 3 个参数作为字符串输入并转换为`int`. 假设它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:54:23.223

main(String args[]) 总是需要一个字符串类型的数组。它不允许您按照您的要求传递数组数组。因此，您可以做的是将每个数组作为逗号分隔的字符串传递，然后用分隔符将每个字符串拆分为“，”。您将能够检索您的阵列。

# php - 使用 PHP 以不同方式解析 SOAP 响应

> ID：12969735
> 
> 赞同：4
> 
> 时间：2012-10-19T07:51:27.807
> 
> 标签：php, soap, nusoap

> **可能重复：**
> [如何在没有 SoapClient 的情况下解析 SOAP 响应](https://stackoverflow.com/questions/3928350/how-to-parse-soap-response-without-soapclient)

我有一个简单的 nuSoap XML 响应：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope
  xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <LoginResult xmlns="http://Siddin.ServiceContracts/2006/09">FE99E5267950B241F96C96DC492ACAC542F67A55</LoginResult>
    </soap:Body>
</soap:Envelope> 
```

现在我正在尝试按照此处的`simplexml_load_string`建议对其进行解析：[使用具有多个名称空间的 SimpleXML 解析 XML](https://stackoverflow.com/questions/740730/parse-an-xml-with-simplexml-which-has-multiple-namespaces)和此处：[使用 simplexml 在 PHP 中解析 SOAP 响应时](https://stackoverflow.com/questions/8712139/trouble-parsing-soap-response-in-php-using-simplexml)遇到问题，但我无法使其正常工作。

这是我的代码：

```
$xml = simplexml_load_string( $this->getFullResponse() );
$xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
$xml->registerXPathNamespace('xsi', 'http://www.w3.org/2001/XMLSchema-instance');
$xml->registerXPathNamespace('xsd', 'http://www.w3.org/2001/XMLSchema');

foreach($xml->xpath('//soap:Body') as $header) {
    var_export($header->xpath('//LoginResult')); 
} 
```

但我仍然只得到这个结果：

```
/* array ( ) 
```

我究竟做错了什么？或者我想了解什么简单的事情？

* * *

*[MySqlError](https://stackoverflow.com/users/611611/mysqlerror)使用 DOM 的工作最终结果：*

```
$doc = new DOMDocument();
$doc->loadXML( $response  );
echo $doc->getElementsByTagName( "LoginResult" )->item(0)->nodeValue; 
```

*[ndm](https://stackoverflow.com/users/1392379/ndm)使用 SimpleXML 的工作最终结果：*

```
$xml = simplexml_load_string( $response );
foreach($xml->xpath('//soap:Body') as $header) {
    echo (string)$header->LoginResult;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T08:00:22.393

```
$doc = new DOMDocument();
$doc->loadXML( $yourxmlresponse );

$LoginResults = $doc->getElementsByTagName( "LoginResult" );
$LoginResult = $LoginResults->item(0)->nodeValue;

var_export( $LoginResult ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T08:05:20.847

这里出了什么问题，SimpleXMLs 默认命名空间支持很差。为了使用 XPath 表达式获取该节点，您需要为默认命名空间注册一个前缀并在查询中使用它，即使该元素没有前缀，例如：

```
foreach($xml->xpath('//soap:Body') as $header) {
    $header->registerXPathNamespace('default', 'http://Siddin.ServiceContracts/2006/09');
    var_export($header->xpath('//default:LoginResult'));
} 
```

但是，实际上不需要使用 XPath 来访问这个节点，您可以直接访问它：

```
foreach($xml->xpath('//soap:Body') as $header) {
    var_export($header->LoginResult);
} 
```

# android - Android：在 SQLite 中存储一个带有字符'的字符串

> ID：12969738
> 
> 赞同：0
> 
> 时间：2012-10-19T07:51:45.360
> 
> 标签：android, sqlite, character, store, quote

> **可能重复：**
> [如何在android的sqlite中转义特殊字符，如'](https://stackoverflow.com/questions/12615113/how-to-escape-special-characters-like-in-sqlite-in-android)

我正在使用表单将一些值存储在 Android 的 SQLite 数据库中。如果任何字段包含字符 ' ，则会发生错误，因此我尝试对其进行转义，但错误仍然存​​在。

这是我的代码：

```
public boolean createCalendar(String id, String name, String descr) {
    try{
        String newDescr = descr.replace("'", "\\'");
        db.execSQL("INSERT INTO Calendar (id, name, description) VALUES " +
                "('"+id+"','"+name+"','"+newDescr+"');");
       ...
    }
} 
```

这是错误：

```
sqlite returned: error code = 1, msg = near "siksjs": syntax error, db=/data/data/com.pfc.app/databases/SSDB
android.database.sqlite.SQLiteException: near "siksjs": syntax error: , while compiling: INSERT INTO Calendar (id, name, description) VALUES ('43779fcb-3d8c-650b-b529-50810506375e','kdldlls','ddk \' siksjs'); 
```

我应该如何存储它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:02:36.857

采用

```
p_query = "select * from mytable where name_field = ?";
mDb.rawQuery(p_query, new String[] { uvalue }); 
```

或者

```
String newDescr = descr.replaceAll("'", "''"); 
```

# iphone - 如何在 json urlstring 中包含变量

> ID：12969749
> 
> 赞同：-2
> 
> 时间：2012-10-19T07:52:20.417
> 
> 标签：iphone, ios, json

如何将值替换为变量。

```
 NSURLRequest *request = [NSURLRequest requestWithURL: [NSURL
 URLWithString:@"https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food"]]; 
```

我想更换

```
1) -33.867
2) 151
3) 500
4) food 
```

带有 URLWithString 中的变量。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:03:44.840

```
float latitude = -33.8670522f;
float longitude = 151.1957362f;
int radius = 500;
NSString* types = @"food";

NSString* urlString = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=%d&types=%@", latitude, longitude, radius, type];
NSURL* url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
```

我不确定我的纬度/经度是否正确，反之亦然，但无论如何，你明白了！;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:06:52.750

为什么不创建某种工厂方法：

```
- (NSURL *) URLForPlaceForType:(NSString *)typ atLat:(double)lat lng:(double)lng radius:(NSInteger)radius {
    NSString *path = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=%d&types=%@", lat, lng, radius, type];
    return [NSURL URLWithString:path]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:00:28.183

您是否尝试在 NSString 类参考中找到答案？

```
Finding Characters and Substrings
– rangeOfCharacterFromSet:
– rangeOfCharacterFromSet:options:
– rangeOfCharacterFromSet:options:range:
– rangeOfString:
– rangeOfString:options:
– rangeOfString:options:range:
– rangeOfString:options:range:locale:
– enumerateLinesUsingBlock:
– enumerateSubstringsInRange:options:usingBlock: 
```

# wordpress - wordpress 中的.htaccess 问题

> ID：12969750
> 
> 赞同：0
> 
> 时间：2012-10-19T07:52:37.197
> 
> 标签：wordpress, .htaccess, trailing-slash

在我的网站中，网址

1) *http://www.example.com/pt-br/perguntas-frequentes/* - 显示错误

2) *http://www.example.com/pt-br/perguntas-frequentes* - 工作正常。

我正在使用 WPML 插件代码如下

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:56:41.080

试试这个解决方案：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*[^/])$ $1/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:38:57.243

我使用以下代码解决了这个问题

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php/ [L]
</IfModule> 
```

# amazon-ec2 - rdp 会话关闭时，Amazon ec2 实例（Windows 2008）上未激活“另存为”对话框

> ID：12969751
> 
> 赞同：0
> 
> 时间：2012-10-19T07:52:48.843
> 
> 标签：amazon-ec2, windows-server-2008, autoit, selenium-webdriver, rdp

我在 Amazon ec2 实例上运行 Selenium 和 Autoit 以在 Firefox 上测试我的网站。测试用例使用任务调度程序每小时自动触发。我正在使用 Autoit 处理某些文件下载类型测试用例的“另存为”对话框。

当我使用 rdp 连接到 ec2 实例时，此过程有效。但是当我关闭到 rdp 的会话时，我的 autoit 脚本无法处理“另存为”对话框。它停留在 WinWaitActive 功能上。在我看来，原因是，当 rdp 连接关闭到亚马逊时，它不会激活另存为对话框。如果我在 rdp 端口​​上 telnet，我的测试用例工作正常。

有什么办法可以解决这个问题吗？rdp 服务器中是否有任何设置可以说连接始终打开？或者我可以在 autoit 上使用一些替代命令，故意在另存为对话框上选择保存按钮并将文件保存在文件夹中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:56:46.997

最后我能够运行文件下载测试用例。解决方案是添加VNC服务器。

我安装了tightvnc 并将其作为服务运行。为 selenium 配置防火墙和安全访问，从 vnc 客户端连接。然后它在关闭与服务器的 VNC 和 RDP 连接后工作。

# java - 如何使用哈希图存储值列表？使用以下格式

> ID：12969755
> 
> 赞同：2
> 
> 时间：2012-10-19T07:53:14.427
> 
> 标签：java

如何做 Hashmap 我有类似的值列表

```
{"tname":"Learning Ratio and Proportion Concepts and practice assessment","gname":"Sixth grade"},
{"tname":"Number System","gname":"Sixth grade"},
{"tname":"quations and expression","gname":"Seventh grade"},{"tname":"Geometry","gname":"Seventh grade"} 
```

我想存储为

```
list<String>={"Sixth grade","Seventh grade"}

list(list<String>)={{"Learning Ratio and Proportion Concepts and practice assessment","Number System"},{"quations and expression","Geometry"}} 
```

谁能帮帮我谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:02:15.403

使用 ArrayList 和 HashMap

```
 HashMap<String,ArrayList<String[]>> map = new HashMap<String,ArrayList<String[]>>();

   ArrayList<String[]> theList1 = new ArrayList()<String[]>();

   theList1.add(new String[] {"Learning Ratio and Proportion Concepts and practice assessment","Sixth grade"});

   map.put("tname", theList1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:20:09.323

我猜你想存储每个年级所需的书籍。

```
 enum Grades
  {
    SIXTH_GRADE, SEVENTH_GRADE;
  }

  public static void main(String[] args) throws IOException
  {
    Map<Grades, List<String>> literature = new HashMap<Grades, List<String>>();
    literature.put(Grades.SIXTH_GRADE, new ArrayList<String>(Arrays.asList("Learning Ratio and Proportion Concepts and practice assessment","Number System")));
    literature.put(Grades.SEVENTH_GRADE, new ArrayList<String>(Arrays.asList("Equations and expression","Geometry")));

    // get books for 6th grade
    List<String> books6th = literature.get(Grades.SIXTH_GRADE);

    for (String book : books6th)
      System.out.println(book);

    // get books for 7th grade
    List<String> books7th = literature.get(Grades.SEVENTH_GRADE);

    Collection<List<String>> allBooks = literature.values(); // tname data
    Set<Grades> allGrades = literature.keySet(); // data associated with gname
  } 
```

我什至会考虑与 ISBN 号、价格等成员一起创建一个`class Book`。但这取决于您的用例。

我在这里使用了枚举，而不是字符串，所以地图不太容易出错。例如。如果有人不小心写`"6th grade"`而不是`"sixth grade"`，当然你也可以使用字符串常量。

使用枚举，您可以使用 an`EnumMap`而不是`HashMap`like

`Map<Grades, List<String>> literature = new EnumMap<Grades, List<String>>(Grades.class);`.

# python - sys.exit() 不会终止我的程序

> ID：12969767
> 
> 赞同：2
> 
> 时间：2012-10-19T07:54:10.333
> 
> 标签：python

如果我的尝试成功，我想退出 Python 脚本。我的代码只是没有退出并继续执行脚本的其余部分。

如果我运行`python myscript.py --help`，我需要脚本退出。如果我跑步，`python myscript.py`我需要执行该`except`部分。

```
try:
    if sys.argv[1] == '--help' or sys.argv[1] == '-help' or \
            sys.argv[1] == '-h' or sys.argv[1] == '--h':
        print "NAME"
        sys.exit("Usage : python go.py")
except:
    #REST OF THE CODE. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T07:59:34.690

正如[文档所说](http://docs.python.org/library/sys.html#sys.exit)，`sys.exit`实际上除了提高之外什么都不做`SystemExit`，你最终会拦截它。您要么`sys.exit`在 try-except 之外调用，要么明确地捕获它，然后重新加注。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T08:04:53.187

为什么要使用 try / except 块？就像 bereal 说的那样，您正在捕获所有异常并隐藏问题。try /except 块用于**特殊**情况。不是备用代码路径。

```
def main():
    # main code block

if sys.argv[1] == '--help' or sys.argv[1] == '-help' or \
    sys.argv[1] == '-h' or sys.argv[1] == '--h':
    print "Help text"
else:
    main() 
```

此外，作为一般规则，使用 try /except 时。只需捕获您关心的异常即可。无法调试甚至无法告诉您出了什么问题的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T09:20:03.423

作为一般性评论，也许您应该考虑使用 argparse。[http://docs.python.org/library/argparse.html#module-argparse](http://docs.python.org/library/argparse.html#module-argparse)使用 argparse 你不必手动检查 argv 数组；argparse 将为您完成所有工作。

# c++ - 如何使用 C++ winapi 32 默认显示组合框的第二个值？

> ID：12969768
> 
> 赞同：0
> 
> 时间：2012-10-19T07:54:10.340
> 
> 标签：c++, windows, winapi, dialog

我在显示登录对话框时遇到问题...有 2 个文本框，1 个组合框，如用户名、密码、域...

1.我在用户名中设置了焦点，无法设置

```
SetFocus(GetDlgItem(_hwnd, IDC_NAME)); 
```

但是，它不能在系统登录时设置，光标符号是该文本框的焦点，但没有获取值，我单击该文本框，然后只关注该文本框......但登录后其他对话框文本框使用这种类型的代码，像

```
SetFocus(GetDlgItem(hchged, IDC_PWD)); 
```

2.在组合框中的系统名和域名那里...每次登录时系统名称只显示...如何将其更改为域名...

注意：我正在使用 c++ win32 API 对话框...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:53:49.847

你的问题非常难以理解。根据标题，听起来您想这样做：

```
ComboBox_SetCurSel(GetDlgItem(hwnd, IDC_COMBO_BOX), 1); 
```

# c# - 删除字符串中第一个点之前的所有内容？

> ID：12969769
> 
> 赞同：6
> 
> 时间：2012-10-19T07:54:12.660
> 
> 标签：c#

我将如何删除第一个 (dot) 之前的所有内容。在一个字符串中？

例如：

```
3042\. Item name 3042. 
```

我想删除 3042。

使字符串变为

```
Item name 3042. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T07:55:37.403

看看[`String.Substring`](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)和[`String.IndexOf`](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)方法。

```
var input = "3042\. Item name 3042.";
var output = input.Substring(input.IndexOf(".") + 1).Trim(); 
```

请注意，对于不包含点的输入也是安全的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T07:55:32.207

```
string str = "3042\. Item name 3042.";
str = str.Substring(str.IndexOf('.') + 1); 
```

使用 string.Index of 获取第一个的位置，`.`然后使用 string.Substring 获取字符串的其余部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T07:57:07.650

您想删除点之前的所有内容，包括点本身：

```
String str = "3042\. Item name 3042.";
String result = str.Substring(str.IndexOf(".") + 1 ).TrimStart(); 
```

[`String.Substring Method`(int32)](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)

（请注意，我习惯于`TrimStart`删除留下的空白空间，因为您的问题表明了这一点）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T08:03:20.830

只是为了踢球，一种稍微不同的做事方式。删除直到并包括第一个点的东西

```
var testStr = @"3042\. Item name 3042.";
var dotSplit = testStr.Split(new[]{'.'},2);
var results = dotSplit[1]; 
```

# java - 如何取消工具提示的自动隐藏？

> ID：12969783
> 
> 赞同：4
> 
> 时间：2012-10-19T07:55:03.673
> 
> 标签：java, swt, tooltip, system-tray

我在 Windows 操作系统上使用 Java 和 SWT。我创建了一个系统托盘。另外，我在系统托盘中添加了工具提示。工具提示出现，但随后自动消失，只要我不按退出按钮，它就会出现。可能吗？

```
ToolTip tip = new ToolTip(shell, SWT.BALLOON | SWT.ICON_INFORMATION);
tip.setText("Title");
tip.setMessage("Test Message.");
tip.setAutoHide(false);

TrayItem trayItem = new TrayItem(tray, SWT.NONE);
trayItem.setImage(icon);
trayItem.setToolTipText("42GB");
trayItem.setToolTip(tip);
tip.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:21:31.497

未经测试，但我相信你“只是”需要删除`trayItem.setToolTipText("42GB");`......

# asp.net - 替换后面代码中的html内容

> ID：12969784
> 
> 赞同：1
> 
> 时间：2012-10-19T07:55:16.297
> 
> 标签：asp.net, html

我有一个用于邮件功能的 html 页面。我在 stringbuilder 类型的对象中获取它，在代码后面并替换值。

.htm 文件中有一个特定的行，我想在特定情况下通过代码隐藏。我怎样才能找到那行并隐藏。

.htm 行：

```
<TR bgcolor="E96F00">
     <TD style="font-family: Arial; font-size: 14px; font-weight: Bold; color:White;">Course Content Link</TD>
</TR>
<TR>
     <TD style="font-family: Calibri; font-size: 14px;">@CourseContent@<BR>&nbsp;</TD>
</TR>

<TR>
     <TD style="font-family: Calibri; font-size: 14px; color:Red; font-weight:bold">Important: TD>
</TR> 
```

我试图替换的代码后面的代码：

```
if (dt.Rows[0]["Type"].ToString() == "V")
{
     if (dt.Rows[0]["CourseContentPath"].ToString() != string.Empty)
     {
          x.Replace("@CourseContent@", "<A href='" + CourseContentLink + "' target=_blank onclick='window.open(this.href, this.target,'height=1000px,width=1000px'); 
          return false>Click here</A> to find the course content");
      }
}
if (dt.Rows[0]["Type"].ToString() == "A")
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:03:52.187

如果你想隐藏一些东西，你可以尝试下面的简单逻辑

**HTML**

```
 <table>...
  <tr id="important">some TDs html</tr>
 </table> 
```

尝试在后面的代码中 将此**字符串转换为 XML 文档并检查逻辑并使用 id=important 删除 tr 节点**

然后再次将 Xml Document 转换为 string 。

对于字符串到 XML 的转换检查[http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95).aspx)

这会有帮助吗？

# c# - 仅为一个文件创建 Excel 插件

> ID：12969786
> 
> 赞同：1
> 
> 时间：2012-10-19T07:55:30.023
> 
> 标签：c#, excel, vsto

我创建了一个 VS Addin 项目，我在其中编写了代码以在 C# 中添加带有一些菜单项的自定义菜单。通过这个我得到了一个 VSTO 部署文件。现在我打开一个随机的 excel 文件并通过 Excel Options-> Addins-> Manage (Com Addins) -> Go and added the addin 手动添加这个插件或 vsto。我的问题是插件与我添加的文件一起添加到所有文件中。我希望用户查看他/她手动添加的文件的插件菜单。我们的方法是免费要求用户通过一些特殊的步骤来遵循，或者我也可以编写 C# 代码来实现这一点。我们也不能通过识别文件名来做到这一点，因为文件的名称和位置可能会改变。请提出任何解决方法，因为我完全陷入了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:14:23.250

为什么不创建一个切换按钮来显示/添加和隐藏/删除您的自定义任务窗格。按照以下说明操作：http:
[//msdn.microsoft.com/en-us/library/aa942846.aspx](http://msdn.microsoft.com/en-us/library/aa942846.aspx)
[msdn.microsoft.com/en-US/office/hh128771](http://msdn.microsoft.com/en-US/office/hh128771)

* * *

使用 Visual Studio 创建一个 Excel 插件。
添加用户控件，使用右键单击的功能区（视觉）-> 添加新
用户控件将成为您的任务窗格。在功能区中添加一个切换按钮。

然后，在`ThisAddIn.cs`添加以下行：

```
 private UserControl1 myUserControl1;
        private Microsoft.Office.Tools.CustomTaskPane myCustomTaskPane;

        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
            myUserControl1 = new UserControl1();
            myCustomTaskPane = this.CustomTaskPanes.Add(myUserControl1, "My Task Pane");

        }
        public void toggle(bool b)
        {
            myCustomTaskPane.Visible = b;
        } 
```

之后，在`Ribbon1.cs`添加以下代码：

```
 private void toggleButton1_Click(object sender, RibbonControlEventArgs e)
        {
            Globals.ThisAddIn.toggle(toggleButton1.Checked);
        } 
```

希望这对你有用。

# android - 像 GMail 一样同步

> ID：12969788
> 
> 赞同：2
> 
> 时间：2012-10-19T07:55:35.373
> 
> 标签：android

我有一个应用程序，用户可以在其中离线编辑/添加记录，一旦建立 Internet 连接，它们应该被发送到服务器。这似乎是 GMail 应用程序的确切行为：

您可以离线编写电子邮件，单击“发送”，关闭应用程序/进程，当互联网连接恢复时，将执行同步，将电子邮件发送到服务器。

问题是我已经有一个 SyncAccount 和一个运行每日同步的 SyncAdapter。***如果我要使用ContentResolver.addPeriodicSync***添加第二个同步，我将不得不创建另一个权限，因此必须使用不同的数据库表？

我可以安排两个相互独立的同步操作，访问同一个数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:45:41.277

问题解决了。显然，您可以立即请求一次性同步，而不是安排一个。您还可以为这一一次性同步提供附加列表。

因此，我的解决方案是在该捆绑包中放置一个参数，然后在适配器的***onPerformSync***方法中相应地发挥我的作用。

```
 final String ACCOUNT_NAME = "dummyAcc";
    final String ACCOUNT_TYPE = "dummyAccType";
    final String PROVIDER = "dummyProvider";

    Account appAccount = new Account(ACCOUNT_NAME, ACCOUNT_TYPE);
    AccountManager accountManager = AccountManager.get(this);
    Bundle extras = new Bundle();
    extras.putBoolean("magicParam", true);
    extras.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, true);
    ContentResolver.requestSync(appAccount, PROVIDER, extras);

...

@Override
public void onPerformSync(Account account, Bundle extras, String authority,
        ContentProviderClient provider, SyncResult syncResult) {
    if (extras.getBoolean("magicParam")) {
       // do magic;
    }
} 
```

# c++ - 在另一个模板类构造函数中使用 typdef 模板时出错

> ID：12969791
> 
> 赞同：1
> 
> 时间：2012-10-19T07:55:41.913
> 
> 标签：c++, templates

我对模板有一点问题。由于用代码更容易解​​释，这是我的问题。

我有一个接口类：

```
template <typename T>
class IElemValidator
{
public:
    virtual bool validate(T val) const = 0 ;
    virtual ~IElemValidator(){};
}; 
```

和一个 typedef 结构：

```
template <typename T>
struct vecValidators
{
    typedef boost::ptr_vector<IElemValidator<T>> Type;
}; 
```

除了像这样的另一个模板类的参数之外，我可以在任何地方使用我的 typedef 结构：

```
template <typename T>
class CTestMaybe
{
public:
    CTestMaybe(vecValidators<T>::Type* a_Validators);
}; 
```

尝试编译时，出现此错误：

```
Error   2   error C2061: syntax error : identifier 'Type' 
```

当然，我可以这样做：

```
template <typename T>
class CTestMaybe
{
private:
    typedef boost::ptr_vector<IElemValidator<T>> vecValidator;

public:
    CTestMaybe(vecValidator* a_Validators);

}; 
```

它运行良好，但我有点失去了对我的结构类的兴趣。

那么，我做错了什么？有没有“正确”的方式来做我想做的事？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:58:42.860

您必须添加`typename`：

```
template <typename T>
class CTestMaybe
{
public:
    CTestMaybe(typename vecValidators<T>::Type* a_Validators);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:01:44.887

该类型`vecValidators<T>::Type`是一个*从属名称*（如果我得到正确的术语）。这意味着您必须在此处添加额外的内容`typename`：

```
CTestMaybe(typename vecValidators<T>::Type* a_Validators); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:01:56.947

C++ 编译器在你的函数声明中有一个类型，但是它看到`vecValidators<T>::Type*`并且因为`vecValidators`它`template`不知道它`Type`是其中的一个类型，所以你必须使用它对编译器说它，`typename`所以你应该将你的函数更改为：

```
CTestMaybe(typename vecValidators<T>::Type* a_Validators); 
```

# java - 计算旋转角度以在处理中跟随一条线

> ID：12969795
> 
> 赞同：2
> 
> 时间：2012-10-19T07:56:14.907
> 
> 标签：java, processing

我画了一条随机线，在这种情况下，我想用字母 V 沿着这条线追踪。无论画线的角度或方向如何，我都希望 V 的底点旋转并跟随线的方向。但老实说，我不知道如何计算这个角度。下面是一些简单的代码来演示我的问题。您会看到正在绘制的红线，我希望 V 的底部点引导正在绘制的线。

在此先感谢您的任何建议。

```
float [ ] lineProgress = { 75, 350, 350, 350, 0 };
int lineSpeed = 25;
float angle = 0;

void setup() {
  background (255);
  size(400,400);
  noFill();
  frameRate(5);
}

void draw() 
{
    background (255);
    strokeWeight(1);

    stroke (0,255,0);
    line(lineProgress[0],lineProgress[1],lineProgress[2],lineProgress[3]);

    stroke (255,0,0);

    fill(255, 0,0, 125);

    float angle;
    //How Do I calculate this based on the line being drawn?
    angle =radians(270);

     line(
         lineProgress[0]
         , lineProgress[1]
         , lerp(lineProgress[0], lineProgress[2],lineProgress[4]/lineSpeed)
         , lerp(lineProgress[1], lineProgress[3],lineProgress[4]/lineSpeed)

         );

    rotLetter(
              "V"
               , lerp(lineProgress[0]
               , lineProgress[2]
               , lineProgress[4]/lineSpeed)
               , lerp(lineProgress[1]
               , lineProgress[3],lineProgress[4]/lineSpeed)
               , angle
               ) ;

     rotLetter("V", 200,200,angle) ;               

     lineProgress[4]++;
     if (lineProgress[4]>lineSpeed)
     {
       lineProgress[4]=0;
       lineProgress[0]=random(50,350);
       lineProgress[1]=random(50,350);
       lineProgress[2]=random(50,350);
       lineProgress[3]=random(50,350);
     }

}

void rotLetter(String l, float x, float y, float ang) {
  pushMatrix(); // save state
  textAlign(CENTER); // center letter horiz
  translate(x, y); // move to position
  rotate(ang); // rotate
   // draw char centered on acsender
   // this will work for most Caps, and some lc letters
   // but it will not allways vert center letters
  text(l, 0, textAscent()/2);
  popMatrix(); // return to saved coordinate matrix
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:09:53.127

给定一条从`(x0, y0)`to 到`(x1, y1)`X offset`dx = x1 - x0`和 Y offset的线`dy = y1 - y0`，角度为：

```
atan2(dy, dx) 
```

将以弧度测量。

使用[`atan2(y, x)`](http://www.processing.org/reference/atan2_.html)而不是`atan(y / x)`确保返回的角度在右象限。 `atan`只返回来自`-π/2`to的结果`+π/2`，而不是完整`-π`的 to `+π`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:09:23.950

1.  找到线的斜率`y = mx + c`（`m`是斜率）。角度 = `arctan(m)`。
2.  旋转角度（顺时针）=`2 * Pi - Angle`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:03:33.937

您计算旋转角度的朋友是[正弦/余弦关系](http://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine.2C_and_tangent)。您可以使用其中任何一个，但切线不涉及计算斜边的长度：

```
tan A = a / b 
```

所以你的角度是

```
A = arctan( a / b ) 
```

或用 Java 术语：

```
double angle = Math.atan( ( lineprogress[ 3 ] - lineprogress[ 1 ] ) / 
                          ( lineprogress[ 2 ] - lineprogress[ 0 ] ) ); 
```

或者正如@Alnitak 还写的那样，使用 atan2 获得右象限的结果：

```
double angle =  Math.atan2( lineprogress[ 2 ] - lineprogress[ 0 ] ,
                            lineprogress[ 3 ] - lineprogress[ 1 ] ); 
```

假设 (x1,y1) == ( lineprogress[ 0 ] , lineprogress[ 1 ] ) 并且对于 (x2,y2)

干杯，

# python - python是否有一个像容器一样的字典，但像numpy.array一样快？

> ID：12969797
> 
> 赞同：2
> 
> 时间：2012-10-19T07:56:25.843
> 
> 标签：python, dictionary, numpy

我知道 numpy.array 比 python 内置列表要快得多，而且内存要少得多。有没有类似 dict 但更快的东西？我只需要存储`int`:`int`或`int`:`float`数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:19:01.223

`series`我会从[pandas](http://pandas.pydata.org/pandas-docs/stable/dsintro.html)看一下。从示例中可以看出，它适用于`np.arrays`：

```
import numpy as np

from pandas import *

randn = np.random.randn

In [309]: s = Series(randn(5), index=randn(5))

In [310]: s
Out[310]: 
 1.968290    0.132438
-0.307750    0.158168
 0.288507    2.129288
 1.002813   -0.247056
-0.450041    1.731273

In [311]: foo = np.array([0., 1.5, 1.])

In [312]: s = Series(foo)

In [313]: s
Out[313]: 
0    0.0
1    1.5
2    1.0 
```

# sql - 获取定义相等时间段的记录的总和/平均值

> ID：12969806
> 
> 赞同：2
> 
> 时间：2012-10-19T07:56:45.687
> 
> 标签：sql, sql-server-2008, tsql, function, build

我有以下信息（按视图返回）：

```
DateTime   ItemID  UserTyp Seconds

2012-01-01 10      S       12      

2012-01-01 10      S       18  

2012-01-01 11      S       22  

2012-01-02 11      M       52  

2012-01-02 10      S       120  

2012-01-02 11      S       NULL  

2012-01-03 15      M       112  

2012-01-03 12      S       182  

2012-01-04 10      M       NULL 
```

我需要做的是按用户类型计算所有秒数的总和，但要计算五个周期。

期间按以下方式设置：

1.  获取第一个和最后一个日期
2.  五天一分为二
3.  除法的结果是一个周期包含的天数

然后对于每个时期，根据记录的 DateTime 和 UserType，我应该得出以下记录：

```
Periods  UserTypeS_SUM(Seconds) UserTypeM_SUM(Seconds)
1        
2        
3
4
5 
```

另外，我应该在进行除法之前检查是否至少有 5 条记录——例如，如果我有 4 条，则只使用一个句点。

我知道它看起来并没有那么不同，我已经开始使用函数制作解决方案，但它看起来对我来说有点无效。是否有一些内置函数可以轻松做到这一点？

编辑：我真的很抱歉，但我忘记提到我应该在视图或表值函数中使用这个。在这种情况下不允许存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:41:22.713

试试这个：

```
;with cte as(
select *,NTILE(5) over(order by [DateTime]) as period 
from Table1
),
type_S as( select period,SUM([Seconds]) as UserTypeS_SUM
 from cte
 where [UserTyp]='S'
 group by period),
type_M as( select period,SUM([Seconds]) as UserTypeM_SUM
 from cte
 where [UserTyp]='M'
 group by period),
 seq as (
  select 1 as sno union all
  select 2 union all
  select 3 union all
  select 4 union all
  select 5  )
 select  seq.sno as period,UserTypeS_SUM, UserTypeM_SUM
 from seq 
 left join  type_s s
 on seq.sno=s.period
 left join type_m m
 on seq.sno=m.period 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/eb2a6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:16:57.260

这里是查询：

创建数据：

```
create table #t (d DateTime,   ItemID  int,  UserTyp char(1), Seconds int);
insert into #t
values     
('2012-01-01', 10,      'S',       12      ),
('2012-01-01', 10,      'S',       18  ),
('2012-01-01', 11,      'S',       22  ),
('2012-01-02', 11,      'M',       52  ),
('2012-01-02', 10,      'S',       120  ),
('2012-01-02', 11,      'S',       NULL  ),
('2012-01-03', 15,      'M',       112  ),
('2012-01-03', 12,      'S',       182  ),
('2012-01-04', 10,      'M',       NULL );

--to other users: be free to take it for your own reply 
```

查询： **编辑由于@Manatherin 评论**

```
;with 

one_to_five as (
   select 1 as n union all
   select 2 as n union all
   select 3 as n union all
   select 4 as n union all
   select 5 as n
),

max_min as (
  select UserTyp, max(d) as max_d, min(d) as min_d
  from #t
  group by UserTyp),

time_for_period as (
  select UserTyp, datediff( second,  min_d, max_d ) / 5.0 as elapsed_time
  from max_min),
periods as (
select o2f.n, t4p.UserTyp, 
       dateadd(second ,elapsed_time * (n - 1)  ,mm.min_d ) as beginPeriod,
       dateadd(second ,elapsed_time * (n    )  ,mm.min_d ) as endPeriod
  from time_for_period t4p
 inner join max_min mm on t4p.UserTyp = mm.UserTyp
 cross join one_to_five o2f
 )
 select n, p.UserTyp, coalesce(sum( seconds ),0)
 from periods p
 left outer join #t t
    on t.UserTyp = p.UserTyp and 
    t.d between p.beginPeriod and p.endPeriod
 group by n, p.UserTyp
 order by 2,1; 
```

[结果](https://data.stackexchange.com/stackoverflow/query/82782?opt.textResults=true)：

```
n UserTyp     
- ------- --- 
1 M       52  
2 M       0   
3 M       112 
4 M       0   
5 M       0   
1 S       52  
2 S       0   
3 S       120 
4 S       0   
5 S       182 
```

此时您应该按用户进行旋转。

免责声明：我已经编写了查询，我不会回去查看结果的一致性，可以自由调试它。

# google-apps-script - 如何更改一个函数中的 glob 以在另一个函数中看到它？

> ID：12969813
> 
> 赞同：2
> 
> 时间：2012-10-19T07:57:19.363
> 
> 标签：google-apps-script

英语不是我的母语，非常抱歉我的错误

这是我真正的问题

```
var k = 2;
var m;

function onOpen(){ // on event - Open spreadsheet
    m = 5;
}

function onEdit(){ // on event - Edit spreadsheet
    var n = k; // k = 2
    var p = m; // p = undefine (why?)
} 
```

*   为什么 p 是未定义的？
*   为什么`m`在函数中`onEdit`！= 5？
*   我怎样才能改变`m`函数`onOpen`然后make `p`= `m`（= 5）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:07:10.430

> *   为什么 p 是未定义的？
> *   为什么 m 在函数 onEdit != 5 中？

每次调用函数时，GAS 内部都会实例化并初始化代码，即在`onOpen`打开电子表格期间调用该函数，GAS 实例化代码，`m`变量等于 5。之后`onEdit`调用函数并且 GAS 创建一个新的代码的实例，在这种情况下，`onOpen`函数**没有**被调用，`m`变量默认等于`undefined`，这个值被分配给`p`.

> *   如何更改函数 onOpen 中的 m，然后使 p = m (= 5)？

要实现它，您必须使用[缓存](https://developers.google.com/apps-script/class_cacheservice)或[ScriptDB](https://developers.google.com/apps-script/class_scriptdb)服务等中间服务。

# javascript - Javascript RegEx：提取部分网址

> ID：12969816
> 
> 赞同：0
> 
> 时间：2012-10-19T07:57:34.343
> 
> 标签：javascript, regex

```
 if ((urlStr.indexOf('t='))!=-1)
        {
            var pat = /t=(\d+)m(\d+)s/;
            pat.exec(urlStr);
            alert (RegExp.$1);
            alert (RegExp.$2);

        } 
```

案例 1：`http://localhost/proc1/commit.php&t=1m13s` 返回 1 和 13 -> 好的

案例 2：`http://localhost/proc1/commit.php&t=13s` 返回空白和空白 -> 不好
预期结果 0 和 13

我该如何更改我的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:01:28.437

你可以试试这个：

```
var pat = /t=(?:(\d+)m)?(\d+)s/; 
```

这允许第一部分，包括`m`是可选的。现在在你的第二种情况下，`$1`应该是一个空字符串。

`(?:`确保您不会获得另一个`m`包含.

这也将起作用，并且几乎相同：

```
var pat = /t=(\d*?)m?(\d+)s/; 
```

在这里，我们只允许第一个数字字符串为空，并且`m`是可选的。只需确保在`?`之后使用`*`使重复不贪婪 - 否则`1`第一次重复将匹配，`m`将被忽略，`3`第二次重复将匹配 。

# java - 在 tomcat 5.5 上部署应用程序时出现以下错误

> ID：12969818
> 
> 赞同：1
> 
> 时间：2012-10-19T07:57:43.203
> 
> 标签：java, tomcat

在 tomcat 上部署 Web 应用程序时出现以下错误，请告知我是哪个 jar，在我的类路径中丢失

```
ct 19, 2012 1:23:20 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3743)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4252)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:736)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1014)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:448)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:295)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:433) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:05:35.443

仅当您在使用 tomcat 管理的 Eclipse 中运行 Spring Web 应用程序时，才会出现此问题。

请按照以下步骤，

```
1) Open the project's properties (e.g., right-click on the project's name in the project explorer and select "Properties")
2) select "Deployment Assembly"
3) Click the "Add..." button on the right margin
4) Select "Java Build Path Entries" from the menu of Directive Type and click "Next"
5) Select "Maven Dependencies" from the Java Build Path Entries menu and click "Finish". 
```

我希望这对你有帮助。

# r - 按变量编号行，但在满足条件时重新开始

> ID：12969819
> 
> 赞同：7
> 
> 时间：2012-10-19T07:57:45.763
> 
> 标签：r, data.table, sequences

我想对数据框中的某些行组合进行编号（按 ID 和时间排序）

```
tc <- textConnection('
id              time       end_yn
abc             10         0
abc             11         0
abc             12         1
abc             13         0
def             10         0
def             15         1
def             16         0
def             17         0
def             18         1
')

test <- read.table(tc, header=TRUE) 
```

目标是创建一个新列（“ `number`”），每行编号`id`从`1 to n`直到`end_yn == 1`被击中。之后`end_yn == 1`，编号应该重新开始。

在不考虑`end_yn == 1`条件的情况下，可以使用以下方法对行进行编号：

```
DT <- data.table(test)
DT[, id := seq_len(.N), by = id] 
```

然而，预期的结果应该是：

```
id              time       end_yn   number
abc             10         0        1
abc             11         0        2
abc             12         1        3 
abc             13         0        1 
def             10         0        1
def             15         1        2
def             16         0        1
def             17         0        2
def             18         1        3 
```

如何结合`end_yn == 1`条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:41:41.663

我猜有不同的方法可以做到这一点，但这里有一个：

```
DT[, cEnd := c(0,cumsum(end_yn)[-.N])] # carry the end value forward

DT[, number := seq_len(.N), by = "id,cEnd"] # create your sequence

DT[, cEnd := NULL] # remove the column created above 
```

设置`id`为 key`DT`可能值得。

# java - 关于 HttpSession.setMaxInactiveInterval() 的测验

> ID：12969820
> 
> 赞同：2
> 
> 时间：2012-10-19T07:57:47.497
> 
> 标签：java

谁能告诉我 Java EE 规则是否需要`HttpSession#setMaxInactiveInterval()`重置 lastAccessTime 或刷新会话实例的方法？

例如：

默认会话超时时间为 20 分钟。我登录了，10 分钟后，我在另一个 Web 应用程序中获得了这个 Web 应用程序的会话，并在另一个 Web 应用程序中调用了该方法`setMaxInactiveInterval()`。两个 Web 应用程序都在同一域和同一台机器上运行。Web 容器是 Weblogic 11g。

结果是：

调用此方法后，还剩 20 分钟。不知道剩余时间应该是10分钟还是20分钟？如果应该是 10 分钟，这受哪个 Java EE 规范规则的约束？

# android - Android：如何使小部件不在启动器小部件列表中显示

> ID：12969821
> 
> 赞同：3
> 
> 时间：2012-10-19T07:57:49.927
> 
> 标签：android, android-widget, android-launcher

我有一个 android 应用程序，它包含一个小部件，当应用程序启动时，小部件将显示，我不想让它公开（让它不显示在小部件列表中）。有人知道如何在“私人”中制作小部件。

# php - Mysql Group Yii Active Record 按日期/时间

> ID：12969825
> 
> 赞同：2
> 
> 时间：2012-10-19T07:58:04.593
> 
> 标签：php, mysql, yii

此代码返回预定帖子的列表（名称、日期时间）。

```
$criteria = new CDbCriteria;
$criteria->select='name, datetime';
$criteria->condition='datetime>:datetime';
$criteria->params=array(':datetime'=>date('Y-m-d H:i:s'));
$criteria->order='DATE_FORMAT(datetime, "%d/%m/%Y") ASC';
$models = Posts::model()->findAll($criteria); 
```

我想对具有相同日期 d/m/Y 的帖子进行 GROUP，然后只代表每个帖子的 H/i/s，这可能吗？

像：

```
Array
(
    [2000/10/10] => Array
    (
        [1] => Array
                (
                    [name] = Post 1
                    [time] = 12:10
                )
        [2] => Array
                (
                    [name] = Post 2
                    [time] = 16:20
                )
        [3] => Array
                (
                    [name] = Post 3
                    [time] = 20:30
                )
    )

    [2000/10/11] => Array
    (
        [6] => Array
                (
                    [name] = Post 6
                    [time] = 10:00
                )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:28:28.400

为了获得时间，您应该选择

```
 $criteria->select='name, DATE_FORMAT(datetime, "%h:%i") as time';
$criteria->group='date(datetime)'; 
```

根据需要获取 o/p 使用 php 逻辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:03:25.027

我不知道你的结果究竟如何，但你当然可以这样做。尝试这样的事情：

```
$array[$models["date"]][]["name"] = $models["name"];
$array[$models["date"]][]["time"] = $models["time"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:48:29.473

有一个简单的扩展可以处理这个问题，它叫做[XDateView](http://www.yiiframework.com/extension/xdateview)（免责声明：我是作者），它专门用于显示按日期分组的记录。如果您需要更高级/可配置的东西，您可以使用另一个名为[GroupGridView](http://www.yiiframework.com/extension/groupgridview)的出色扩展，它具有更多功能，并允许您进行更多自定义和控制。

# ruby-on-rails - 在 Ironworker 文件上使用 mongoid 和 Sql 时出现 ActiveRecord 错误

> ID：12969827
> 
> 赞同：2
> 
> 时间：2012-10-19T07:58:07.310
> 
> 标签：ruby-on-rails, activerecord, mongoid, ironworker

（我对 Rails 比较陌生）

我有一个文件（Ruby）我正在通过 Ironworker 运行/上传，该文件当前使用 MySql（activeRecord）作为数据库。一切正常，但我们现在需要一个新的（附加）模型，它将使用 Mongoid，它也将包含在我们上传到 IronWorker 的代码中。当我在 IronWorker 文件中包含以下行 merge_gem 'mongoid' 时，我得到：

> 弃用警告：不再需要为属性方法指定空前缀/后缀。如果调用时没有定义方法的无前缀/后缀版本`define_attribute_methods`，则会自动定义。（从 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/attribute_methods/read.rb:9 的块调用）

弃用警告：同步已弃用，将从 Rails 3.2 中删除。（从 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:298 调用） 弃用警告：define_attr_method 已弃用，将被删除替代品。（从 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:660 处的 set_table_name 调用） 弃用警告：define_attr_method 已弃用，将被删除而无需替换。（从 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/locking/optimistic.rb:150 的 set_locking_column 调用）/usr/lib/ruby/gems/1.9.1 /gems/activerecord-3.1.6/lib/active_record/attribute_methods/read.rb:82:in`define_read_method': uninitialized constant ActiveModel::AttributeMethods::COMPILABLE_REGEXP (NameError) from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/attribute_methods/read.rb:42:in`来自/usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/attribute_methods/time_zone_conversion.rb:35的define_method_attribute' `define_method_attribute' from /task/gems/activemodel/lib/active_model/attribute_methods.rb:267:in`：在/task/gems/activemodel/lib的define_attribute_method'块中/active_model/attribute_methods.rb:260:in `each' from /task/gems/activemodel/lib/active_model/attribute_methods.rb:260:in`define_attribute_method' from /task/gems/activemodel/lib/active_model/attribute_methods.rb:256:in `block in define_attribute_methods' from /task/gems/activemodel/lib/active_model/attribute_methods.rb:256:in`each' from /task/gems/activemodel/lib/active_model/attribute_methods.rb:256 :in `define_attribute_methods' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/attribute_methods.rb:14:in`define_attribute_methods' 来自 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/attribute_methods.rb:65:in `respond_to?' from /task/gems/activesupport/lib/active_support/callbacks.rb:398:in`__run_callback' 来自 /task/gems/activesupport/lib/active_support /callbacks.rb:385:in`_run_find_callbacks' from /task/gems/activesupport/lib/active_support/callbacks.rb:81:in`run_callbacks' 来自 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:1617:in `init_with' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:959:in`instantiate' 来自 /usr/lib/ruby/gems/1.9.1 /gems/activerecord-3.1.6/lib/active_record/base.rb:470:in `block in find_by_sql' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:470:in`collect!' 来自 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:470:in `find_by_sql' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/relation.rb:112:in`to_a' 来自 /usr/lib/ruby/gems/1.9.1/gems /activerecord-3.1.6/lib/active_record/relation/finder_methods.rb:376:in `find_first' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/relation/finder_methods.rb:122:in`first' 来自 /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/relation/ finder_methods.rb:263:in `find_by_attributes' from /usr/lib/ruby/gems/1.9.1/gems/activerecord-3.1.6/lib/active_record/base.rb:1070:in`method_missing' from /task/user_setup.rb:74:in `new_user_setup' from /task/user_setup.rb:39:in`initialize' from /task/justa_worker.rb:48:in `new' from /task/justa_worker.rb:48:in`run' from /task/runner.rb:405:in `'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T09:56:34.507

首先，iron_worker gem 不久前被弃用了。如果可以的话，将您的代码更新为 iron_worker_ng gem ( [https://github.com/iron-io/iron_worker_ruby_ng )。](https://github.com/iron-io/iron_worker_ruby_ng)此操作将解决 99.9% 合并 gem 的问题（这是编写新 gem 的主要原因）

可能的原因：gem 版本不匹配，主要是 rails gems。主动记录/主动支持/等

尝试：

1.  再次检查实际使用的 gem 版本
2.  手动设置精确版本（merge_gem 中的第二个参数）
3.  `gem 'mygem', '=0.1.2'`在 ruby​​ 代码中的某处使用魔法构造

# c++ - 如何在 C++ 中获取文本文件的一部分？

> ID：12969829
> 
> 赞同：0
> 
> 时间：2012-10-19T07:58:10.370
> 
> 标签：c++, file-io

> **可能重复：**
> [在 C/C++ 中解析配置文件](https://stackoverflow.com/questions/1417765/parse-config-file-in-c-c)

我有一个 C++ 文本文件，看起来像这样：

```
[layer]
type=background
data=
1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1, 
```

但是，我在同一个文本文件中有多个图层，并且每个图层都必须以不同的方式构建，但是我需要为每个图层获取“data =”中显示的值。

我将如何做到这一点？我尝试过的一种方法是将它们存储到向量中，但是在将所有内容存储在向量中之后，我没有想到从向量中提取这些值的解决方案......

```
while(file >> line)
    {
        words.push_back(line);
    }

    if(find(words.begin(), words.end(), "[header]") != words.end())
    {
        for(int i = find(words.begin(), words.end(), "[header]"); words.at(i) != "\n"; i++)
        {
            word += words.at[i];
        }
    }
    cout << word << endl;
    file.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:09:32.017

这很容易。您知道数据在“data=”行之后开始，并以“[layer]”行结束，所以只需搜索它们：

```
std::ifstream f("your_file");
std::string string;
while( f >> string && !f.eof() )
{
    if( string == "data=")//If we found the "data=" string, we know data begins next.
    {
        std::cout << std::endl << "new layer's data found" << std::endl;
        f >> string;//going to the next string (the actual data)
        //while we don't see the "[layer]" which indicates the end of data...
        while( string != "[layer]"  && !f.eof() )"[layer]"
        {
            std::cout << string;//...we output the data found
            f >> string;//and continue to the next string
        }
    }
} 
```

# css - 标题列中带有头像的标签的垂直文本

> ID：12969830
> 
> 赞同：2
> 
> 时间：2012-10-19T07:58:15.857
> 
> 标签：css, less

我正在尝试在标题表上制作一个带有垂直文本和头像的表格。

结果应该是这样的：

所以我的问题是：
1）我应该在我的css文件中做什么才能让文本旋转270度（制作.rotate（270度）；弄乱一切）
2）名称在头像顶部对齐？
3）它适用于谷歌浏览器但不适用于火狐:(

这是我的演示：[http ://codepen.io/anon/pen/CogKe](http://codepen.io/anon/pen/CogKe)

这是我的代码：

```
.rotate(@deg){
  -webkit-transform: rotate(@deg);

}
table th.user span.name{
  display:block;
  .rotate(90deg);
  padding: 190px 0 0 0;
  position: relative;
  left: 20px;
  width: 200px;
}
table, td, th
{
border:1px solid green;
}
.user, tbody td {
  max-width: 50px;
  text-align: center
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:00:40.050

**试试这个以避免跨浏览器文本旋转问题**

```
.rotate {
     -moz-transform: rotate(270deg);  /* FF3.5+ */
       -o-transform: rotate(270deg);  /* Opera 10.5 */
  -webkit-transform: rotate(270deg);  /* Saf3.1+, Chrome */
             filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=270);  /* IE6,IE7 */
         -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=270)"; /* IE8 */
} 
```

[HTML 表格中的垂直（旋转）文本](https://stackoverflow.com/questions/272799/vertical-rotated-text-in-html-table)

# html - 如何创建具有复杂布局的 HTML 表格？

> ID：12969831
> 
> 赞同：4
> 
> 时间：2012-10-19T07:58:15.923
> 
> 标签：html, html-table

如何使用 HTML 创建此表？

![餐桌布置图](../Images/0eb2a43b1b3492e693ab6c0e1a793a46.png)

我试过了，但不知道如何正确地做到这一点。

我的代码：

```
<table border=1 cellpadding=0 cellspacing=0>
  <tr>
    <td>&nbsp;&nbsp;&nbsp;</td>
    <td>&nbsp;&nbsp;&nbsp;</td>
    <td colspan="2">&nbsp;&nbsp;&nbsp;</td>
  </tr>
  <tr>
    <td colspan=2>&nbsp;&nbsp;&nbsp;</td>
    <td>&nbsp;&nbsp;&nbsp;</td>
    <td>&nbsp;&nbsp;&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:08:12.053

用途`rowspan`和`colspan`属性。

该表有 3 列（单元格）和 3 行：

```
<table>
<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>
    <td colspan="2" rowspan="2">&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>
   <!-- <td> from prev <tr> here with colspan="2" and rowspan="2" -->
   <td>&nbsp;</td>
</tr>
</table>​ 
```

确保每一行 ( `<tr>`) 始终具有相同的单元格/列 ( `<td>`) 计数。一个`<td>`with`colspan="2"`算作`2`。

*   所以第一个`<tr>`有 3 个单元格 (1+1+1)。
*   第二个也有 3 (2+1) ...
*   ...最后一个有一个`<td>`来自前一个元素，`<tr>`它有`colspan="2"`和`rowspan="2"`最后一个`<td>`元素，所以3个单元格（2+1）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T08:03:43.610

你应该试试这个——表格包含 3 行和 3 列。

*   第一行需要三个单元格，所以`<td>`在第一个中放三个 s `<tr>`。
*   第二行需要两个单元格，第一个是`<td>`带有`rowspan="2"`and的单元格，`colspan="2"`第二个是`<td>`没有跨度的单元格。
*   第三行只需要一个`<td>`，没有任何跨度。

```
<table border="1" cellpadding="0" cellspacing="0" width="150">
   <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
   </tr>
   <tr>
      <td colspan="2" rowspan="2">&nbsp;</td>
      <td>&nbsp;</td>
   </tr>
   <tr>
      <td>&nbsp;</td>
   </tr>
</table>
```

# windows-phone-7 - WP7 媒体播放器

> ID：12969835
> 
> 赞同：0
> 
> 时间：2012-10-19T07:58:21.653
> 
> 标签：windows-phone-7, background, media-player

我目前正在使用 BackgroundAudioPlayer 代理构建音乐应用程序（支持后台播放）。

我看到 MediaPlayer 可以在后台播放音乐。但不知道它如何接收来自 UVC 控件的事件（如 BAP 可以）

我应该使用哪个来启用后台播放？

# c - 将edgelist转换为C中的压缩稀疏行

> ID：12969842
> 
> 赞同：1
> 
> 时间：2012-10-19T07:58:46.480
> 
> 标签：c, sparse-matrix

我有一个包含数百万条边的无向边列表。10x10 稀疏邻接矩阵的无向边列表的简化示例：

```
0 2
0 9
2 8
6 9 
```

我想将边缘列表转换为压缩稀疏行（[定义](http://web.eecs.utk.edu/%7Edongarra/etemplates/node373.html)）格式。这意味着读取边缘列表并写入三个数组：Value（在我的情况下始终为“1”）、Column_Index 和 Row_Pointer。

阅读示例边缘列表，我可以轻松地重建第 0 行：它在第 2 列和第 9 列中有一个“1”。然后，第一行没有非零条目。

**问题**

对于第二行，因为边缘是无向的，我想在第 0 列和第 8 列中有一个“1”。但列表中不存在“2 0”条目。我想这个信息已经被编码在“0 2”条目中。

我可以读取部分构造的压缩稀疏行数组以查看“2 0”条目是否存在，但对于包含数百万个条目的大型边缘列表，这不起作用。

**问题**

我该如何解决这个问题？还是我的方法不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:12:49.680

您可以扫描边缘列表，交换索引，这样对于每个索引`(i, j)`，`i < j`. 您在 O(N) 中执行此操作。

您还需要一个排序的边列表，这是 O(N log N)。获得排序的边列表后，您可以将其存储为 Symmetric-CSR 格式。读取单元格`(y,x)`时，如果`y > x`然后交换`y`和`x`. 然后你阅读`row_pointer[y]`and `row_pointer[y+1]`，让它们成为`Pa`and ，然后开始在and之间`Pb`扫描`CSR[i]`i ；如果>= （找到或未找到取决于 if = 或 >）或 if （未找到）则退出。`Pa``Pb``x``CSR[i]``i == Pb`

您还可以生成第二个边缘列表 where `j > i`，并对其进行排序。此时，您可以同时扫描两条边，并生成不需要对称的 CSR 列表。

```
j0 = j1 = N+1
# i-th row:
    # we are scanning NodesIJ[ij] and NodesJI[ji].
    If NodesIJ[ij][0] == i
        j0 = NodesIJ[ij][1]
    If NodesJI[ji][0] == i
        j1 = NodesIJ[ji][1]
    if (j0 < j1)
        j = j0
        j0 = N+1
        ij++
    else
        if (j1 == N+1)
           # Nothing more on this row, and j0 and j1 are both N+1.
           i++;
           continue
        j = j1
        j1 = N+1
        ji++
    # We may now store (i,j) in CSR
    if (-1 == row_ind[i])
        row_ind[i]     = csr;
    col_ind[csr++] = j 
```

可以改进上面的算法，观察对于任何给定`i`的 ，如果存在`p`和`q`，那么`NodesIJ[p] = i`和`NodesJI[q] = i`，它将始终是，`NodesIJ[p][1] > NodesJI[q][1]`因为前一个列表描述了右上三角形，而后者描述了左下角。所以我们可以扫描 NodesJI 直到`NodesJI[p][0]`是 i，然后继续`NodesJI[q]`。

我们还可以避免总是检查`row_ind`初始化，注意如果`csr`索引没有改变，那么该行是空的，对应的值可以是 -1（或 N+1，或者我们想要的任何“无效”值），否则它必须是的前一个值`csr`。

```
 scsr = csr;
    while NodesIJ[ij][0] == i
        col_ind[csr++] = NodesIJ[ij++][1]
    while NodesJI[ji][0] == i
        col_ind[csr++] = NodesJI[ji++][1]
    row_ind[i++] = (csr == scsr) ? -1 : scsr; 
```

以上运行时间为 O(N log N)。

另一种方法是分配矩阵，将边缘列表解码为矩阵并将其解析为 CSR。这是 O(N)，但可能需要太多内存；对于 N 的列表大小，您最多可能有 N^2（或 (N/a)^2，a 是平均连接数）单元格。数百万条边的列表可能很容易需要数十 GB 的存储空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:22:14.297

您的数据采用所谓的*三元组稀疏格式*，其中您有明确的行列索引。你想做的是两件事：

*   将三元组格式转换为 CRS
*   由于某些条目可能丢失并且您想要一个无向图，因此您的最终矩阵将是 A = A+A' （转置）

为了跟进您的示例，final A 将同时包含`(0,2)`和`(2,0)`条目。

转换可以通过多种方式完成。查看一个非常完善的[SuiteSparse 库](http://www.cise.ufl.edu/research/sparse/)，尤其是 cholmod_triplet.c 文件，它实现了您需要的功能。本质上，它是在行和列索引上使用两阶段桶排序执行的，同时删除重复项。该算法具有线性复杂性，如果您对处理大型数据集感兴趣，那就太好了。转置和许多其他有用的稀疏操作也可以使用该包完成。

# php - 通过两个页面将 URL 传递给 iFrame

> ID：12969845
> 
> 赞同：1
> 
> 时间：2012-10-19T07:58:59.570
> 
> 标签：php, javascript, url, iframe, target

假设我在主页上有一个链接，在下一页上有一个 iFrame。

现在我需要在主页上创建该链接以将 URL 传递给下一页上的 iFrame（单击时），以便 iFrame 可以加载该 URL。

我将如何在不使用任何 JS 的情况下解决这个问题？

我知道如何在单个页面上执行此操作，我在其中单击链接并仅定位 iFrame。但是在两个不同的页面上执行此操作（传递 URL）对我来说太高了。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:06:57.227

粗略地说：

主页：

```
<a href="nextpage.php?link=http://example.com">nextpage</a> 
```

下一页.php：

```
<iframe src="<?php echo $_GET['link'];?>"></iframe> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:15:29.830

你基本上有两种方法可以去：

**只需创建一个将链接作为查询字符串的链接**

```
<a href="page_2.php?link=mylinkusediniframe.com">Cick</a> 
```

然后检查您的 PHP 文件中的链接：

```
$link = $_GET['link'];
if (! preg_match("^(?:https?://)?(?:[a-z0-9-]+\.)*((?:[a-z0-9-]+\.)[a-z]+)", $link) ) {
    $link = null;
} 
```

最后打印出来：

```
<iframe src="<?php print $link; ?>"> 
```

正则表达式在我找到它的地方得到了很好的解释：[https ://stackoverflow.com/a/10435670/1456376](https://stackoverflow.com/a/10435670/1456376)

* * *

另一种选择是：

**将 URL 存储在第一页的 SESSION 中**

优点是，用户不能操纵显示的 URL（就像他可以通过简单地更改地址栏中的 URL 来使用第一个解决方案一样）。

在第一个文件中执行：

```
$_SESSSION['link'] = 'http://mylink.com'; 
```

在第二个简单地输出它：

```
<iframe src="<?php print $_SESSION['link']; ?>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:03:49.940

编辑：我不明白带有 iframe 的窗口是否已经打开。如果它已经打开，那么您将需要我的方法，如果没有阅读 Jevgeni Bogatyrjov 方法，因为那是正确的方法。您将需要研究 Javascript，因为 PHP 不会帮助您完成该任务。首先，您需要先使用 javascript 打开新窗口，如下所示：

```
new_window = window.open("page2.php", "window2", "height=120"); 
```

然后，您可以将 javascript 函数从 1 个窗口调用到另一个窗口，例如

```
new_window.test(); 
```

因此，如果新页面有 iframe，使用 javascript，您可以使用类似的函数更改 iframe 源

```
<a href="#" onlclick="new_window.test('newpage.html');">Link</a> 
```

在另一个页面上，您将使用 url 参数创建一个名为 test 的函数，然后使用新参数更改 iframe 源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T08:08:46.680

您可以通过 Get 方法将地址从主页传递到 iframe。这是带有 iframe 的页面：[http://www.page-with-iframe.php](http://www.page-with-iframe.php) 这是您要传递的网址：[http://www.url-for-iframe.php](http://www.url-for-iframe.php)

您可以在主页中添加使用函数 base64_encode 编码的“url-for-iframe”链接。链接将是这样的：

```
http://www.page-with-iframe.php?link=2jhGe2R6Wd5nJcrJgLgFrS7dCWiloJKf 
```

您可以在带有 iframe 的页面中使用 base64_decode 并将获得的 url 传递给它。

再见

# html - 高度为 100% 的 div-css 表，在 IE7 中未调整 div-rows 的大小

> ID：12969846
> 
> 赞同：0
> 
> 时间：2012-10-19T07:59:01.397
> 
> 标签：html, css, internet-explorer-7, tablelayout

我想用页眉、正文和页脚制作占屏幕高度（分钟）的 100% 的布局......正文和页脚将具有硬编码的高度，并且正文将有弹性以相应地调整大小......如果为空或更少的内容将占据剩余高度空间，如果内容充满则会拉伸并变大，向下推页脚 div。

它工作得很好，但在 IE7 中不行。

[http://jsfiddle.net/swkrt/](http://jsfiddle.net/swkrt/)

```
<div class="content-holder">
  <div class="header">header</div>
  <div class="body">body</div>
  <div class="footer">footer</div>
</div>

body, html {
    margin: 0;
    height: 100%;
}

.content-holder {
    height: 100%;
    display: table;
}

.content-holder div {
    display: table-row;
}

.header {
    height: 50px;
}

.footer {
    height: 100px;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:43:19.860

试试这个：

```
<div class="content-holder">
  <div class="header">header</div>
  <div class="body">body</div>
  <div class="footer">footer</div>
</div> 
```

添加 ：

```
**.content-holder {
    height: 100%;
    width: 100%;
    display: table;
}
.body{
  height: 76.8%;
}** 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:39:54.070

```
$(document).ready(function(){
 var DocHeight = $(document).height()-150;
 $('.content-holder').css('height',DocHeight+'px');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T08:11:13.470

我没有找到这个问题的解决方案，所以我去使用......它在所有浏览器中都可以正常工作。

# java - Java 静态数组修改

> ID：12969848
> 
> 赞同：0
> 
> 时间：2012-10-19T00:42:12.720
> 
> 标签：java, static, arrays, project

我有以下两个 java 类（如下所列） Class BookInfo 声明静态数组块

```
 public class BookInfo {

        // Global arrays accessible by all methods

        private static String[] isbnInfo;
        private static String[] bookTitleInfo;
        private static String[] authorInfo;
        private static String[] publisherInfo;
        private static String[] dateAddedInfo;;
        private static int[] qtyOnHandInfo;
        private static double[] wholesaleInfo;
        private static double[] retailInfo;

        static {

            isbnInfo = new String[] {

                                    "978-0060014018",
                                    "978-0449221431",
                                    "978-0545132060",
                                    "978-0312474881",
                                    "978-0547745527"

                                    };

            bookTitleInfo = new String[] {

                                    "The Greatest Stories",
                                    "The Novel",
                                    "Smile",
                                    "The Bedford Introduction to Drama",
                                    "AWOL on the Appalachian Trail"

                                    };

            authorInfo = new String[]  {

                                     "Rick Beyer",
                                     "James A. Michener",
                                     "Raina Telgemeier",
                                     "Lee A. Jacobus",
                                     "David Miller"

                                    };

            publisherInfo = new String[] {

                                    "HerperResource",
                                    "Fawcett",
                                    "Graphix",
                                    "Bedford St. Martins",
                                    "Mariner Books"

                                    };

            dateAddedInfo = new String[] {

                "05/18/2003", 
                "07/07/1992", 
                "02/01/2010", 
                "09/05/2008", 
                "11/01/2011"

                };

            qtyOnHandInfo = new int[] {7, 5, 10, 2, 8};

            wholesaleInfo = new double[] {12.91, 7.99, 6.09, 54.99, 10.17};

            retailInfo = new double[] {18.99, 3.84, 4.90, 88.30, 14.95};

        }

        public static void BookInfo() {

            System.out.println("             Serendipity Booksellers");
            System.out.println("                Book Information\n");       

            for(int i = 0; i < isbnInfo.length; i++){

                System.out.println("ISBN: " + isbnInfo[i]);
                System.out.println("Title: " + bookTitleInfo[i]);
                System.out.println("Author: " + authorInfo[i]);
                System.out.println("Publisher: " + publisherInfo[i]);
                System.out.println("Date Added: " + dateAddedInfo[i]);
                System.out.println("Quantity-On-Hand: " + qtyOnHandInfo[i]);
                System.out.println("Wholesale Cost: $ " + wholesaleInfo[i]);
                System.out.println("Retail Price: $ " + retailInfo[i]);
                System.out.println();

            }
        }
        } 
```

如何从此类访问数组列表？到目前为止只有以下内容有效，但是我如何从这个类中修改（添加、删除、编辑等）（这个类中没有主要的主要内容） BookInfo bookinfo = new BookInfo(); bookinfo.BookInfo(); System.out.println(bookinfo.isbnInfo[0]); 如何从主菜单修改（添加、删除、编辑等）

```
 import java.util.Scanner;

     public class InvMenu {
     public static void addBook(){

      System.out.println("\nYou selected Add a Book\n");
       BookInfo bookinfo = new BookInfo();
      bookinfo.BookInfo(); // only these two are working but I cannot modify arrays at all
      System.out.println(bookinfo.isbnInfo[0]);

        }

       public static void editBook(){

     System.out.println("\nYou selected Edit a Book's Record\n"); 

     }

     public static void deleteBook(){

      System.out.println("\nYou selected Delete a Book\n");

    }

    public static void printInvMenu(){

    String choice;
    int x = 0;
    boolean b;
    char letter;
    boolean menu = true;

    Scanner keyboard = new Scanner(System.in);

    System.out.println("Serendipity Booksellers");
    System.out.println("Inventory Database\n");
    System.out.println("       1\. Look Up a Book");
    System.out.println("       2\. Add a Book");
    System.out.println("       3\. Edit a Book's Record");
    System.out.println("       4\. Delete a Book");
    System.out.println("       5\. Return to the Main Menu\n");

    do{

        System.out.print("Enter your choice: ");
        choice = keyboard.nextLine();
        b = true;

        try {
            x = Integer.parseInt(choice);
            System.out.println(x);

        }

        catch(NumberFormatException nFE) {

            b = false;
            System.out.println("You did not enter a valid choice. Try again!\n");

        }

           }while(b == false);

        do{

        else if(x == 1){

            addBook();

        }

        else if(x == 2){

            editBook();

        }

        else if(x == 3){

            deleteBook();

        }

        else if(x == 4){

            System.out.println("Returning to the Main Menu\n");
            break;

        }

        else{

            System.out.println("\nYou did not enter a valid choice. Try again!\n");

        }

        printInvMenu();

       }while(x == 5);

          }
         } 
```

我可以从其他类主菜单轻松访问一些功能： BookInfo bookinfo = new BookInfo(); bookinfo.BookInfo(); System.out.println(bookinfo.isbnInfo[0]); 如何从主菜单修改（添加、删除、编辑等）？任何想法，建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:36:30.320

I think you need to rethink your design a bit. I included an example of how to get some of the functionality working with your current code but doing so will create some seriously nasty code.

Statics are generally used to share information between instance where this information is meant to be unique. The usual example is as an instance counter. So every time an instance is created it increments the values so you can track unique instance.

The problem is that bookInfo does not know what it is meant to be. It wants to be a data store but also describes a unique object. Think about what will happen if you want to create another BookInfo. Editing any static of one instance will affect the others.

You can easily edit the information in the static String[].

```
public int getBookLocation(String name){
    return bookTitleInfo.IndexOf(name)
} 
```

Then you can manipulate a specific entry as you please.

```
public void SetBookName(String oldname, String newname){
    int index = getBookLocation(oldname);
    if(index > 0){
        bookTitleInfo[index] = newname;
} 
```

That was not too bad for editing but deleting an entry will be very messy. Here is some pseudo-code

```
first have to find the bookindes. - getBookLocation(...)

For each entry in static string[]
    create a new one of size-1, 
        For each entry in String[]
            add existing entry to new string[]. 
```

You need to do that for each array. ie, isbnInfo, bookInfoName, ...., That is lots of needless iteration.

* * *

The following, though won't solve your question is a better design approach, separating concerns into class.

*   One class should represent your Book Object. This class will provide functionality to store/set/retrieve all the data for a single book object.

*   Another will represent the bookstore, which will store a list of book objects, initialise the data with the books, provide functionality to add, remove, edit books from the store.

    public class BookInfo {

    ```
     //Class variables
     private String isbnInfo;
     private String bookTitleInfo;
     //....
     private double wholesaleInfo;
     private double retailInfo;

     //Constructors
     BookInfo(){
         //put default behaviour here
     }

     BookInfo(String isbnInfo, String bookTitleInfo, .....){
         this.isbnInfo = isbnInfo;        
         this.bookTitleInfo = bookTitleInfo;
         this.authorInfo = authorInfo;

         //....

     //Setter Method
     public String getIsbnInfo(){
         return isbnInfo;
     }

     //Getter Method
     public void setBookTitleInfo(String isbnInfo){
         this.isbnInfo = isbnInfo;
     }

     //..... 
    ```

So now you can create a Book info and set/get all its variables, encapsulated in an OOP manner.

Next we will look at the storage/access class of BookInfos.

```
public class BookStore {
    private isbnInfo = new String[] {"978-0060014018", "978-0449221431", "978-0545132060",
                                "978-0312474881", "978-0547745527" };

    private bookTitleInfo = new String[] { "The Greatest Stories", "The Novel", "Smile",
                                "The Bedford Introduction to Drama", 
                                 "AWOL on the Appalachian Trail" };

    //...rest of strings

    //here is where we store our book objects
    //we will create methods to add, remove, edit, later
    private BookInfo booklist = new List<BookInfo>();
    private String storename;

    //Default Constructor initialises booklist based on stored values
    public BookStore(){
         for(int i = 0; i < isbnInfo.lenght; i++){
             AddBook(isbnInfo [i], bookTitleInfo[i],.....,retailInfo[i]);
         )
    }

    //overloaded constructors you probably want to read from external file, db, etc eventually.
    public BookStore(String filelocation){
         //Do stuff to read from a file and add books to booklist 
    }

    //Add a new book to the list by passing in all the info
    public void AddBook(String isbn, String title, 
         BookInfo newbook = new BookInfo(isbn, title, ....)
         booklist.add(newbook);

    //Add a new book by passing in a book object.
    public void AddBook(BookInfo newbook){
         booklist.add(newbook);
    }

    //Find Book
    public int getBook(String isbn){
        for(int i=0; i++; i < booklist.lenght){
            if(book.getIsbn() == isbn)
                return i;
        }
        return -1;

    //Remove Book from list
    public void removeBook(String isbn){
         int loc = getbook(isbn);
         if(loc > -1){
             booklist.remove(loc);
         }
         else{
             System.out.println(Could not find book);
         }
    }     

    public void DisplayBookList(){
    //.. print list
    }
} 
```

So now all the required functionality that BookStore needs is located where it needs to be. You can now add any additional functionality as needed.

Your main driver class will need to be changed up too. Your driver class needs to create the BookStore.

If the user wants to remove a book, they would enter the Book name. You then call

```
bookstore.removeBook(userstring); 
```

Adding a book would require the user to enter alot more values but essentially the same

```
String isbn = scanner.next();
String bookname = scanner.next();
.......
double wholesaleinfo = Double.ParseDouble(scanner.next()); 
```

Then you add your can either by passing the info as params

```
bookstore.addBook(isbn, bookname, ...., wholesaleinfo); 
```

or a book object.

```
BookInfo newbook = new BookInfo(isbn, bookname, ...., wholesaleinfo)
bookstore.addBook(newbook); 
```

I'll leave the user logic to whatever way you want. Hopefully that has illustrated things. There are certainly improvements which could be made on what I have done.

# javascript - javascript上的媒体查询？

> ID：12969852
> 
> 赞同：0
> 
> 时间：2012-10-19T07:59:31.847
> 
> 标签：javascript, jquery, media-queries, liquid-layout

我有以下片段，我想在平板电脑和手机上禁用它。

```
if ( !! $('#sidebar').offset()) {    
        var stickyTop = $('#sidebar').offset().top;            
        $(window).scroll(function() {    
            var windowTop = $(window).scrollTop();    
            if (stickyTop < windowTop) {
                $('#sidebar').css({ position: 'fixed', top: "120px" ,  right: "5%" });    
            }
            else {
                $('#sidebar').css('position', 'static');
            }

        });

    } 
```

我正在考虑包含在媒体查询或其他内容中，如下所示：

```
if(@media (min-width:500px)){
if ( !! $('#sidebar').offset()) {

        var stickyTop = $('#sidebar').offset().top;

        $(window).scroll(function() {

            var windowTop = $(window).scrollTop();

            if (stickyTop < windowTop) {
                $('#sidebar').css({ position: 'fixed', top: "120px" ,  right: "5%" });

            }
            else {
                $('#sidebar').css('position', 'static');
            }

        });

    }
} 
```

但我确信这不会起作用，那么我将如何阻止这段代码在手机上运行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:08:42.503

最好的解决方案可能是为每种媒体设置不同的样式（即使它是`margin:1px`），然后检测计算的样式。这样，您可以同样轻松地使用任何 CSS 媒体规则，并获得完全兼容性： CSS：

```
#widget{display:none}

@media screen{
  #widget{display:block}
} 
```

JS：

```
if($("#widget").css("display")!="none){
   ...
} 
```

请注意，您不应查询媒体，而应查询浏览器功能，因为宽平板电脑（有些甚至有键盘）的用户可能仍希望使用您的侧边栏：`if(document.width>600){...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:06:45.827

您可以像这样使用该[`matchMedia()`功能](https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia)：

```
if ( window.matchMedia('(min-width:500px)') ) {
  // your code
} 
```

但是要小心，因为[并非所有浏览器都支持](http://caniuse.com/#feat=matchmedia)此功能！

**编辑**

可以在[这里](https://github.com/paulirish/matchMedia.js/)找到 Paul Irish 的 polyfill 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:06:54.143

```
if( $(window).width() > 499 ) {
   // Code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:10:52.953

如果这是最好的方法，我想知道，但是：

```
<style type="text/css" media="screen">
body:after 
{
    content:url("javascript:(function(){document.getElementsByTagName('p')[0].innerHTML=' ';})()");
}
</style> 
```

`body`那就是 - 使用伪元素在标签后添加特定的 javscript 。

另一种方法是为`body`标签分配不同的样式或`hidden field`为不同的媒体指定一些特殊的样式，然后从 jQuery 或普通 javascript 中检测此样式。

检查**窗口宽度**不是首选方法！普通屏幕设备与手持设备的界限正在逐渐变暗。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T08:11:49.303

窗口宽度检测充其量是有点不稳定：平板电脑是移动设备，通常具有大于 500 像素的大屏幕。我建议您尝试[userAgent 嗅探](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CC4QFjAB&url=https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery&ei=kgqBUPD0EPS20QXjuoHgBA&usg=AFQjCNE4R_HqYS7XVYsSbz-rQuJBSqUQYg&cad=rja)，或[detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)上的脚本。另一种选择是使用[modernizr](http://modernizr.com/)检查支持触摸的设备

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T08:15:57.477

您可以像@Sirko 很好地指出的那样使用[matchMedia ，并且为了与旧浏览器兼容，您可以像这样使用这个](https://developer.mozilla.org/en-US/docs/DOM/window.matchMedia)[matchMedia polyfill](https://github.com/paulirish/matchMedia.js)：

```
if (matchMedia('(min-width:500px)').matches) {
    // do your stuff
} 
```

# c++ - 模板类嵌套类型类型名

> ID：12969854
> 
> 赞同：1
> 
> 时间：2012-10-19T07:59:40.157
> 
> 标签：c++, templates, typedef, nested-class, typename

我必须声明`Iter`为`typename`但没有`typedef`。
然后，我不能`Iter`在我的`template` `class`声明中使用 => 令人沮丧 :( 请教
我如何使用`Iter`，否则请解释我为什么 C++ 如此[*讨厌*](https://stackoverflow.com/questions/1085134/why-is-c-relatively-harder-to-use-bad-choice-for-a-beginner)......

```
template <typename T>
struct MyContainer
{
  typedef  std::vector<T>  Vec;
  typename Vec::iterator   Iter;

  void Fo (typename std::vector<T>::iterator);  //ok
  typename std::vector<T>::iterator Ba();       //ok

  void Foo (Iter);   //error: 'Iter' is not a type
  Iter Bar ();       //error: 'Iter' does not name a type
};                   //(gcc 4.1.2) 
```

1.  为什么`typedef`不能用来申报`Iter`？为什么不？
2.  `Iter`内如何使用`template` `class`？（例如作为函数参数类型）

**编辑**
在指令`typename Vec::iterator Iter;`中，关键字`typename`说`Vec::iterator`的是一种类型（即不是静态成员函数/属性）。因此，`Iter`不是声明为类型，而是使用类型声明为变量`Vec::iterator`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T08:02:49.997

1.  `typedef`可以一起使用`typename`。所以它变成：

    ```
    typedef typename vec::iterator Iter; 
    ```

2.  现在就用`Iter`吧。

    ```
    template <typename T>
    struct MyContainer
    {
      typedef  std::vector<T>         Vec;
      typedef typename Vec::iterator  Iter;

      void Foo (Iter);   //ok
      Iter Bar ();       //ok
    }; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:13:01.253

只是为了添加到以前的答案......

```
typename Vec::iterator   Iter; 
```

是一个有效的 C++ 语句，它声明的不是一个类型而是一个名为`Iter`.

引入关键字`typename`是为了指定后面的标识符是一种类型。解析`Vec::iterator`时，编译器无法识别这`iterator`意味着类型，因为它是*依赖于模板的名称*。它也可以是`Vec`.

[正式来说，typename 是干什么用的？](https://stackoverflow.com/questions/1600936/officially-what-is-typename-for)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:20:55.547

这一行：

```
typename Vec::iterator   Iter; 
```

声明一个名为`Iter`，类型`Vec::iterator`（即`vector<T>::iterator`）的成员变量，而不是类型。

看看你在这之后做了什么，你可能的意思是：

```
typedef  typename Vec::iterator   Iter; 
```

# ruby-on-rails - Rails：回形针不保存在数据库中

> ID：12969855
> 
> 赞同：2
> 
> 时间：2012-10-19T07:59:47.760
> 
> 标签：ruby-on-rails, database, upload, paperclip

所以我只是添加了回形针并将其迁移到名为 users_pictures 的表中。我的模型如下所示：

```
class UsersPicture < ActiveRecord::Base
 attr_accessible :user_id, :users_picture_file, :users_picture_id,
                 :photo_file_name, :photo_content_type, :photo_file_size
  belongs_to :users
  has_attached_file :photo,
  :url => "/images/:attachment/:basename.:extension",
  :path => ":rails_root/public/images/:attachment/:basename.:extension"
end 
```

所以当我访问“new.html.erb”页面时，我可以在表单中添加一张图片......给它user_id并提交。Rails 没有显示任何错误，日志甚至说：

```
Processing by UsersPicturesController#create as HTML

Parameters: {"commit"=>"Create Users picture",`
"authenticity_token"=>"0tbAZj5MKyN/uaj0ybaNsa0dZrxeS05OJNNA3ZNO8Uc=",
"users_picture"=>{"user_id"=>"12", 
"photo"=>#<ActionDispatch::Http::UploadedFile:0xe028dbd4

@content_type="image/jpeg", @tempfile=#<File:/tmp/RackMultipart20121019-14239-1edlwpp-0>, 
@headers="Content-Disposition: form-data; name=\"users_picture[photo]\"; filename=\"rh.jpeg
\"\r\nContent-Type: image/jpeg\r\n", @original_filename="rh.jpeg">}, "utf8"=>"✓"}
[paperclip] Saving attachments.
Redirected to xxxx/users_pictures/8
Completed 302 Found in 18ms (ActiveRecord: 1.2ms) 
```

但是文件信息没有保存到数据库中......所以我无法显示它。Firebug 告诉我一些关于 POST 方法的参数的信息：

```
authenticity_token  0tbAZj5MKyN/uaj0ybaNsa0dZrxeS05OJNNA3ZNO8Uc=
users_picture[user_id]  12
users_picture[photo]    ÿØÿà�JFIF������ÿÛ�� !"&# /!$'),,-180*5*+,) 0%"5)-,*4,,,*,),),,,,,,,,,,,,,))),,,*,),,,,),),,,)).,ÿÀ��Ì�Ì"�ÿÄ��������������ÿÄ�E� ����!1AQ"aq2#BRbr¡3²¢±ÁÑ4SÓ%Cs£ÒáÿÄ������������ÿÄ�%��������!1"A2BQq¡ÿÚ���?�Þ4¥()JJRR ¥pLªXl °ôR|¨u]Þýú 
```

等等。所以它不是将路径保存到数据库中，而是图片的源代码？如您所见，我已经设置了 :url 和 :path （即使没有 :attachment 因为我不知道它是什么）

一般来说，我只是想将图片上传到某个路径；并将名称和大小等文件信息存储在我的数据库中。

我的视图文件夹中的表单如下所示：

```
<%= form_for(@users_picture, :html => { :multipart => true }) do |f| %>
...
 <%= f.file_field :photo %> 
```

我不会发布show和index.html.erb，因为显示是另一回事-我首先要实现将所有数据保存在数据库中+将图片上传到某些文件夹。有关如何正确执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:48:08.357

您无需`attr_accessible`在这些子字段上进行设置。您唯一需要标记为`attr_accessible`的是`:photo`属性：

```
class UsersPicture < ActiveRecord::Base
  attr_accessible :user_id, :users_picture_file, :users_picture_id, :photo 
```

# android - 将本地服务绑定到活动或使用广播接收器，哪个更有效？

> ID：12969858
> 
> 赞同：4
> 
> 时间：2012-10-19T08:00:02.017
> 
> 标签：android, binding, broadcastreceiver, android-service

哪个更有效地控制服务类的动作和方法？一种方法是将本地服务绑定到活动，另一种方法是使用广播接收器发送广播以控制服务中的方法。它们是做同一件事的两种不同方式吗？您大部分时间使用哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:05:01.230

绑定：如果我需要更改服务的许多变量或在不同场合从服务中获取值。这样您就可以在内存中访问变量。或者，如果我需要不断地从服务中获取值，并且一方面更容易控制确切的时间。如果您要进行大量通信，绑定应该会更有效。（Android 文档给出了实时服务器客户端示例）

广播：如果我的活动或我的服务中的许多变量发生变化，但我总是可以精确定位并将相对分类的消息发送给受尊敬的接收者。这里的时间可能有点偏，但你可以得到排队的消息。这个适用于长期定期更新等任务。

# jakarta-ee - Java EE：跟踪集群上 MessageDrivenBeans 的进度

> ID：12969862
> 
> 赞同：1
> 
> 时间：2012-10-19T08:00:15.903
> 
> 标签：jakarta-ee, jms, cluster-computing, message-driven-bean

我有一个消息驱动的 bean，只要消息到达队列，它就会在集群节点上实例化。

我希望能够监视和取消在集群范围内的消息驱动 bean 中运行的进程，这有点问题。

怎样才能做到这一点？我能否以某种方式获取当前从每个集群节点处理的 MDB 列表并在必要时终止它们的进程？我可以使用某种单例来保存所有集群节点上所有 MDB 的引用吗（我不这么认为:(）

是否有一些我可以使用的注册表服务，或者是否可以编写类似的东西？

可能最后的手段是通过数据库驱动监视和取消过程，我不喜欢它，因为它需要轮询 MDB 中的数据库以检测取消，否则这将是一个设置的简单标志。

服务器环境是BEA Weblogic 10.02，我用的是EJB 3.0！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:18:59.327

我对 MDB 没有太多经验，但一个解决方案可能是拥有一个集群单例 bean，每个 MDB 链接到该 bean 以注册一个 id。然后它可以使用它注册的 id 来检查同一个 bean 以检测取消。本质上是您基于数据库的解决方案，但没有对数据库进行轮询。

我不认为 MDB 应该运行很长时间，并且可能应该委托给更易于管理的线程。

[http://my.safaribooksonline.com/book/web-development/websphere/0738426091/message-driven-beans/ch06lev1sec7](http://my.safaribooksonline.com/book/web-development/websphere/0738426091/message-driven-beans/ch06lev1sec7)

以上讨论了 EJB2 中的 MDB（无法在线找到 EJB3 参考）。相关部分：

"*不要用于真正的长时间运行的事务*——尽管我们指出当请求运行时间过长而 MDB 客户端无法等待时，异步请求/回复可能是合适的，但我们并不是说 MDB 本身应该用于长时间运行—— "

希望这可以帮助。

# php - 从动作中调用方法

> ID：12969868
> 
> 赞同：1
> 
> 时间：2012-10-19T08:00:45.873
> 
> 标签：php, controller, symfony-1.4, doctrine-1.2

我有一个带有 $id 属性和 getId() 方法的问题类。我在控制器中还有一个索引操作，我希望在其中显示该问题的答案数量。

```
class questionActions extends sfActions
{
  public function executeIndex(sfWebRequest $request)
  {          
        $q_id = $this->getQuestion()->getId();

        $this->answers = Doctrine_Core::getTable('answer')
                                                ->createQuery('u')
                                                ->where('u.question_id = ?', $q_id)
                                                ->execute();
  } 
```

在我的 indexSuccess 模板中：

```
<?php if ($answers) : ?>
  <p><?php echo count($answers) ?> answers to this request.</p>
<?php endif; ?> 
```

但是，这会导致错误：调用未定义的方法。

如果我手动分配 $q_id 的值，则一切正常。

如何通过从操作调用方法 getId() 来分配它？该调用是否应该在控制器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:52:49.983

您收到该错误是因为 getQuestion() 未在控制器中实现。

我将假设您将问题 ID 作为 GET 参数传递。

在这种情况下，您可以尝试以下操作：

```
 class questionActions extends sfActions {

    public function executeIndex(sfWebRequest $request) {
      $q_id = $request->getParameter('question_id');

      $question = Doctrine_Core::getTable('question')->find($q_id);

      $this->answers = Doctrine_Core::getTable('answer')
        ->createQuery('u')
        ->where('u.question_id = ?', $question->getId())
        ->execute();
    } 
```

或更好

```
class questionActions extends sfActions {

  public function executeIndex(sfWebRequest $request) {
    $q_id = $request->getParameter('question_id');
    $question = Doctrine_Core::getTable('question')->find($q_id);
    $this->answers = $question->getAnswers();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:19:43.583

好吧，我认为最好的方法是使用问题 id 参数直接调用查询（如果您在 url 中的参数是`id`：

```
class questionActions extends sfActions
{
  public function executeIndex(sfWebRequest $request)
  {
    // redirect to 404 automatically if the question doesn't exist for this id
    $this->question = $this->getRoute()->getObject();

    $this->answers  = $this->question->getAnswers();
  } 
```

然后你可以定义一个[对象 route](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/05#chapter_05_object_route_class)，这样你就不必检查给定 id 是否存在问题，这将是 symfony 本身的工作。

```
question_index:
  url:     /question/:id
  class:   sfDoctrineRoute
  options: { model: Question, type: object }
  param:   { module: question, action: index }
  requirements:
    id: \d+
    sf_method: [get] 
```

然后，当您调用 url 时`/question/23`，它会自动尝试检索带有 id 的问题`23`。如果此问题不存在，它将重定向到 404。

# python - psycopg 连接池中的“key”是什么意思？

> ID：12969871
> 
> 赞同：1
> 
> 时间：2012-10-19T08:00:55.453
> 
> 标签：python, connection-pooling, psycopg2, psycopg

我正在浏览[Psycopg Connections Pooling](http://www.initd.org/psycopg/docs/pool.html)文档，但不明白 getconn 和 putconn 中“key”参数的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:33:09.023

*仔细阅读psycopg2* ( )的源代码，`lib/pool.py`您可以看到`psycopg2.pool.AbstractConnectionPool`该类有一个`dict`名为`_used`where 池中的连接被引用的属性。和方法中的`key`参数是该字典中项目的键。默认情况下，如果这些方法的参数值是连接对象的，则作为键。`getconn``putconn``key``None``id`

基本上，该`key`参数允许具体连接池类的实现者识别连接。例如，在`psycopg2.pool.PersistentConnectionPool`类中，单个连接意味着在单个线程中共享，因此使用线程 ID 作为键。

# sql - 在 Access 中运行 SQL Sum 语句时出现错误

> ID：12969877
> 
> 赞同：0
> 
> 时间：2012-10-19T08:01:11.870
> 
> 标签：sql, database, ms-access

我试图找出数据库某个表中所有项目的总成本，成本存储在另一个表中，但产品代码提供链接，所以这不是问题。

但是，当我尝试访问以显示每个项目的产品代码和描述时，我的问题就出现了。

这是我的代码：

```
 SELECT [Product Code], Description, Sum([Purchase Price]) AS Total
    FROM [products/stock] AS p 
     INNER JOIN [Stock Conversion Items] AS s 
     ON p.[Product Code] = s.[Result PC]
   WHERE s.CutID = [Enter your Cut ID here]
   GROUP BY s.SCID; 
```

如您所见，我选择了要显示的数据，加入表格，使用 [在此处输入您的剪辑 ID] 从用户那里获取信息，然后按 SCID（表示单个项目的键）对信息进行分组。

这是错误消息：

![错误信息](../Images/4f0e34984cb73ef3e9c8c3f0841a0b14.png)

任何帮助将不胜感激，
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:06:04.263

根据定义，如果您使用聚合查询，那么您在没有聚合函数的情况下使用的所有列（如 SUM、COUNT 等）都必须在您的 group by 子句中。它不必是相反的方式，因此您可以在您的组中拥有列，而无需在其他任何地方使用它们。

```
 SELECT [Product Code], Description, Sum([Purchase Price]) AS Total 
    FROM [products/stock] AS p  
     INNER JOIN [Stock Conversion Items] AS s  
     ON p.[Product Code] = s.[Result PC] 
   WHERE s.CutID = [Enter your Cut ID here] 
   GROUP BY S.SCID, [Product Code], Description; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:02:21.987

按`[Product Code]`和 分组`Description`

```
 SELECT [Product Code], Description, Sum([Purchase Price]) AS Total
    FROM [products/stock] AS p 
     INNER JOIN [Stock Conversion Items] AS s 
     ON p.[Product Code] = s.[Result PC]
   WHERE s.CutID = [Enter your Cut ID here]
   GROUP BY [Product Code], Description 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T08:03:50.083

使用聚合函数时，例如`SUM`，您将需要`GROUP BY`所有其他选定的列。所以，你`GROUP BY`应该是：

```
GROUP BY S.[SCID], [Product Code], Description; 
```

# javascript - 如何使用带有锚点的 URL 加载 jquery 选项卡

> ID：12969880
> 
> 赞同：0
> 
> 时间：2012-10-19T08:01:21.167
> 
> 标签：javascript, jquery, html, css, ajax

我们在我们的网站上使用 jquery 选项卡，可以在[http://www.wirenine.com/web-hosting/看到选项卡](http://www.wirenine.com/web-hosting/)

我们希望能够在 URL 中使用某种锚点（如 #faq）来加载辅助选项卡，以便在页面加载时默认加载辅助选项卡。如何做到这一点？Tabs JS 代码可见于

[http://cdn.wirenine.com/js/tabs.js](http://cdn.wirenine.com/js/tabs.js)

```
 //<![CDATA[ 
$(window).load(function(){
function displayPage(e) {
    var current = $(this).parent().attr("data-current");
    $("#tabHeader_" + current).removeClass("tabActiveHeader")
    $("#tabpage_" + current).hide();

    var ident = this.id.split("_")[1];
    $(this).addClass("tabActiveHeader");
    $("#tabpage_" + ident).show();
    $(this).parent().attr({ 'data-current': ident })
}
$(function() {
    var container = $("#tabContainer"),
        navitem = container.find((".tabs ul li")).first(),
        ident = navitem[0].id.split("_")[1];
    navitem.addClass("tabActiveHeader").parent().attr({ 'data-current': ident });

    $(".tabpage").filter(function(i) { return i>0; }).hide();
    // OR
    // $(".tabpage:not(:first-child)").hide();

    $(".tabs ul li").on("click", displayPage)
});
});//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:20:25.907

```
$(function(){
    var targetTab = location.hash.replace(/#/, '');
    $("li[id$='" + targetTab + "']").click();
}); 
```

您可以将`tabHeader`listItems 上 ID 的数字部分替换为类似的名称`tabHeader_faqs`，`tabHeader_plans`它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:21:30.397

checkTab 函数检查添加的值是否在 url 中。如果是，选项卡 5 将显示为 display: block; 在 CSS 中。所以标签总是在你的页面上，但只会显示你添加的值（checkTab（value））是否在url中。

## HTML

```
<li id="tabHeader_5">
    <span>faq</span>
</li>

<div class="tabpage" id="tabpage_5">
    Faq
</div> 
```

## CSS

```
#tabHeader_5{
    display: none;
} 
```

## jQuery

```
$(window).load(function(){
function displayPage(e) {

 checkTab('#faq');
 var current = $(this).parent().attr("data-current");
$("#tabHeader_" + current).removeClass("tabActiveHeader")
$("#tabpage_" + current).hide();

var ident = this.id.split("_")[1];
$(this).addClass("tabActiveHeader");
$("#tabpage_" + ident).show();
$(this).parent().attr({ 'data-current': ident })
 }
 $(function() {
    var container = $("#tabContainer"),
    navitem = container.find((".tabs ul li")).first(),
    ident = navitem[0].id.split("_")[1];
    navitem.addClass("tabActiveHeader").parent().attr({ 'data-current': ident });

$(".tabpage").filter(function(i) { return i>0; }).hide();
// OR
// $(".tabpage:not(:first-child)").hide();

$(".tabs ul li").on("click", displayPage)
});
});

function checkTab(value)
{

    var tabUrl = href.toString().toLowerCase();

    if (tabUrl.indexOf(value) >= 0) {
        $('#tabHeader_5').show();
    }

}

//]]> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:23:25.433

您可以简单地将您的 url GET 参数插入为：

```
http://www.wirenine.com/web-hosting/?tab=faq 
```

这个页面必须是动态的，由php或asp生成。

示例 PHP：

```
 <li id="tabHeader_1" <?php if($_GET['tab'] == 'plans') echo 'class="tabActiveHeader"'; ?> ><span>Plans &amp; Features</span></li>
        <li id="tabHeader_2" <?php if($_GET['tab'] == 'compare') echo 'class="tabActiveHeader"'; ?>><span>Compare All Plans</span></li>
        <li id="tabHeader_3" <?php if($_GET['tab'] == 'faq') echo 'class="tabActiveHeader"'; ?>><span>FAQ's</span></li>
        <li id="tabHeader_4" <?php if($_GET['tab'] == 'competition') echo 'class="tabActiveHeader"'; ?>><span>WireNine vs The Competition</span></li> 
```

我想你明白了。

# google-app-engine - 更改 Google App Engine 网站的域，但保留所有数据

> ID：12969886
> 
> 赞同：3
> 
> 时间：2012-10-19T08:01:49.130
> 
> 标签：google-app-engine, google-apps

这件事让我忙了好几天。

情况如下：

我有一个网站已经在 Google App Engine 上运行，假设它可以通过 www.olddomain.com 访问，并且拥有以 @olddomain.com 结尾的 google 帐户的用户可以访问该网站。

身份验证选项设置为 Google Apps，我有 olddomain.com 的 Google Apps 帐户

不，我想将网站更改为 www.newdomain.com，我想保留所有数据，我还希望用户保留他们的个人数据。

我找到了一种将用户帐户从 user@olddomain.com 更改为 user@newdomain.com 的方法

当用户没有登录到我的网站时，他们会被重定向到 Google 登录页面，“@olddomain.com”会自动放在他们可以填写帐户名的文本框之后。

这是问题：

有什么方法可以将 Google 登录页面上的文本“@olddomain.com”更改为“@newdomain.com”，请记住我想保留我的所有数据，包括用户的所有个人数据，并且用户帐户从 user@olddomain.com 更改为 user@newdomain.com？

基本上，我想在下面的屏幕截图中将“olddomain.nl”更改为“newdomain.nl”： ![问题截图](../Images/069a96631a5456570a75bad53bc61cba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:20:09.370

好的，我注意到 Google App Engine 中添加了一个选项，您可以在其中实际更改与 App Engine 应用程序相关的 Google Apps 帐户。几天前还没有这个。不幸的是，这只能在数据存储不包含任何用户属性时完成，因此必须备份、删除包含用户属性的数据存储实体，并且在更改域后，必须再次上传它们。

所以更改域仍然意味着一些额外的数据存储操作，但它们现在仅限于包含用户属性的实体，更重要的是：不再需要迁移 blobstore。这样可以节省大量带宽。

然而，用户迁移数据的问题仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:55:51.070

一个可能但昂贵的解决方案（就数据存储操作而言）是在新域下创建一个新应用程序，将所有数据从“旧”应用程序迁移到新应用程序，并从 user@olddomain 修改用户的所有电子邮件.com 以编程方式发送到 user@newdomain.com。

# python - python 2.7中的编码

> ID：12969897
> 
> 赞同：1
> 
> 时间：2012-10-19T08:02:29.143
> 
> 标签：python, unicode, encoding

我对 python 2.7 中的编码有一些疑问。

1.python代码如下，

```
#s = u"严"
s = u'\u4e25'
print 's is:', s
print 'len of s is:', len(s)
s1 = "a" + s
print 's1 is:', s1
print 'len of s1 is:', len(s1) 
```

输出是：

```
s is: 严
len of s is: 1
s1 is: a严
len of s1 is: 2 
```

我很困惑，为什么 len`s`是 1，怎么能`4e25`存储在 1 个字节中？我还注意到 USC-2 是 2 字节长，USC-4 是 4 字节长，为什么 unicode string`s`的长度是 1？

2\. (1)新建一个以`a.py`notepad++(Windows 7)命名的文件，并设置文件的编码`ANSI`，代码`a.py`如下：

```
# -*- encoding:utf-8 -*-
import sys
print sys.getdefaultencoding()
s = "严"
print "s:", s
print "type of s:", type(s) 
```

输出是：

```
ascii
s: 严
type of s: <type 'str'> 
```

(2)新建一个以`b.py`notepad++(Windows 7)命名的文件，并设置文件的编码`UTF-8`，代码`b.py`如下：

```
# -*- encoding:gbk -*-
import sys
print sys.getdefaultencoding()
s = "严"
print "s:", s
print "type of s:", type(s) 
```

输出是：

```
 File "D:\pyws\code\\b.py", line 1
SyntaxError: encoding problem: utf-8 
```

(3)修改文件`b.py`如下（文件的编码风格为`UTF-8`）：

```
import sys
print sys.getdefaultencoding()
s = "严"
print "s:", s
print "type of s:", type(s) 
```

输出是：

```
ascii
s: 涓
type of s: <type 'str'> 
```

(4)修改文件`a.py`如下（文件编码风格为`ANSI`）：

```
import sys
print sys.getdefaultencoding()
s = "严"
print "s:", s
print "type of s:", type(s) 
```

输出是：

```
 File "D:\pyws\code\a1.py", line 3
SyntaxError: Non-ASCII character '\xd1' in file D:\pyws\code\a1.py on
line 3, but no encoding declared; see http://www.python.org/peps/pep-0263.html f
or details 
```

为什么问题 2 中这 4 个案例的输出不同？任何人都可以详细弄清楚吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:31:48.107

> 我很困惑为什么 s 的 len 是 1，4e25 怎么能存储在 1 个字节中？我还注意到 USC-2 是 2 字节长，USC-4 是 4 字节长，为什么 unicode 字符串 s 的长度是 1？

unicode 字符串的全部意义在于做到这一点。unicode 字符串的长度是*字符*数（即代码点），而不是字节数。字节数可能因编码而异，但字符数是一个抽象不变量，不会随编码而改变。

至于您的第二个问题，答案是在设置文件的编码时，您是在告诉 Python 如何将该文件中的字节映射到字符。如果您指定的编码（使用`# encoding`语法）与文件的实际编码不一致，您将得到不可预知的行为，因为 Python 试图以一种方式解释字节，但文件已设置，因此字节实际上意味着其他东西。

您获得的行为类型将取决于您使用的编码的细节。一些可能性是：

1.  你会很幸运，即使你使用了冲突的编码，它也会起作用；这是您的第一个案例中发生的情况。
2.  会报错，因为文件中的字节与指定的编码不一致；这就是你的第二种情况发生的事情。
3.  它似乎可以工作，但会产生不同的字符，因为文件实际编码中的字节在用指定的编码解释时意味着其他东西。这似乎是您的第三种情况发生的情况，尽管它应该引发错误，因为该字符不是 ASCII。（“文件的编码样式是 UTF-8”是指您`# encoding`在文件中设置了该效果的指令吗？）
4.  如果您未指定任何编码，则如果您尝试使用任何非纯 ASCII 字节，则会收到错误消息。这就是你上一个案例中发生的情况。

此外，字符串的类型`str`在所有情况下都是，因为您没有将字符串指定为 unicode（例如，with `u"..."`）。指定文件编码不会使字符串成为 unicode。它只是告诉 Python 如何解释文件中的字符。

然而，这里有一个更大的问题，那就是：为什么在你的例子中玩那些带有编码的游戏？除了文件实际编码的编码之外，没有任何理由使用`# encoding`标记来指定编码，这样做肯定会导致问题。不要这样做。您必须知道文件的编码是什么，并在`# encoding`标记中指定相同的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:02:29.137

# wpf - 属性私有集未触发 NotifyPropertyChanged

> ID：12969900
> 
> 赞同：0
> 
> 时间：2012-10-19T08:02:45.060
> 
> 标签：wpf, vb.net

所以这更像是一个问题，但有人可以告诉我为什么如果我创建一个像这样的属性：

```
 Private _Productgroepen As ObservableCollection(Of productgroep)
    Public Property Productgroepen As ObservableCollection(Of productgroep)

        Get
            Return _Productgroepen
        End Get
        Private Set(ByVal value As ObservableCollection(Of productgroep))
            _Productgroepen = value
            MyBase.OnPropertyChanged("Productgroepen")
        End Set

    End Property 
```

“私人套装”与仅使用“套装”的方式不同吗？所以基本上我在一台电脑上工作，而我在另一台电脑上工作，在他的电脑上，财产工作得很好，但在我的电脑上，财产根本没有任何价值！有人可以向我解释一下吗？

谢谢

编辑：为了回答这篇文章的第一条评论，这里是：属性“Productgroepen”正在从视图模式的构造函数中获取值：

```
Public sub New()
    Dim pg = (from prg in db.producgroep).Tolist
    For each pgs in pg
        Productgroepen.add(pgs)
    Next
End sub 
```

在 xaml 我有一个组合框：

```
... ItemsSouce={"Binding Productgroepen"} DisplayMemberPath="omschrijving" SelectedValue={"Binding SelectedProductgroepen", updatesourcetrigger=propertychanged} .. 
```

所以基本上在我的电脑上当我调试时我没有得到任何错误或异常但是如果我在我的好友电脑上有私人设置器但组合框没有得到任何值但他没有错误或异常并且组合框有所有的值（他也有私人二传手）..如果有人知道为什么这种行为让我知道，我总是愿意了解更多。

# wpf - 如何设置 DevExpress WPF GridControl 的外观和感觉？

> ID：12969906
> 
> 赞同：1
> 
> 时间：2012-10-19T08:03:01.637
> 
> 标签：wpf, themes, devexpress, gridcontrol

谁能帮我改变 DevExpress Grid Control 的外观和感觉。现在我得到一个蓝色的 Grid Control ，我最好的猜测是我需要从 DevExpress.Xpf.Themes.DeepBlue.v12.1 更改默认主题到别的东西。任何人都可以帮我解决这个问题。
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:10:11.970

XAML：

```
 xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
    dx:ThemeManager.ThemeName="Office2007Black"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:13:10.837

您应该只设置[ThemeManager.ThemeName](http://documentation.devexpress.com/#WPF/DevExpressXpfCoreThemeManager_ThemeNametopic)属性：

```
<Window x:Class="WpfApplication5.Window1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
    Title="Window1" Height="300" Width="300" 
    dx:ThemeManager.ThemeName="Office2007Black"> 
    ...
</Window> 
```

相关链接：[DevExpress WPF 主题](http://help.devexpress.com/#WPF/CustomDocument7407)

# android - 使用设备 api 级别 14 (SherlockActionBar) 时未调用 onOptionsItemSelected

> ID：12969908
> 
> 赞同：0
> 
> 时间：2012-10-19T08:03:06.870
> 
> 标签：android, actionbarsherlock, android-4.0-ice-cream-sandwich

这是`SherlockActionBar`示例，它使用静态附件，我运行到`ICE_CREAM_SANDWICH`设备，但`onOptionsItemSelected`没有调用方法！

多余部分代码删掉，3.x和2.x版本试过没问题，帮帮我~~

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(SampleList.THEME); // Used for theme switching in samples
    super.onCreate(savedInstanceState);

    mSherlock
            .setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);
    mSherlock.setContentView(R.layout.text);

    ((TextView) findViewById(R.id.text))
            .setText(R.string.static_attach_content);
}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    return mSherlock.dispatchCreateOptionsMenu(menu);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Used to put dark icons on light action bar
    boolean isLight = SampleList.THEME == R.style.Theme_Sherlock_Light;

    menu.add("Save")...

    menu.add("Search")...

    menu.add("Refresh")...

    return true;
}

@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if (mSherlock.dispatchKeyEvent(event)) {
        return true;
    }
    return super.dispatchKeyEvent(event);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Log.i("", "on options item selected!!!!!!!!!!!!!!!!");
    Toast.makeText(this, item.toString(), Toast.LENGTH_SHORT).show();
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:30:28.753

如果您正在使用片段并`onOptionsItemSelected`在片段和活动中调用，请记住`super.onOptionsItemSelected(item);`在活动调用中返回

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    // If home icon is clicked return to main Activity
    case android.R.id.home:
        getSupportFragmentManager().popBackStack(null,
                FragmentManager.POP_BACK_STACK_INCLUSIVE);
        return true;
    }

    return super.onOptionsItemSelected(item);
} 
```

# c++ - 继承顺序是什么

> ID：12969909
> 
> 赞同：0
> 
> 时间：2012-10-19T08:03:14.560
> 
> 标签：c++, multiple-inheritance, virtual-inheritance

继承顺序是什么，下面的代码是什么意思

```
class A
{
   int a;
   virtual void display()
   {
      cout<<"A";
   }
}
class B
{
   int b;
   virtual void displayB()
   {
      cout<<"B";
   }
}
class C:public B, virtual public B
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:11:39.250

虚拟继承意味着该类与实例化对象的层次结构中以相同方式（虚拟）继承的任何其他类**共享**其基类**实例。**

非虚拟继承意味着该类获得**自己**的基类实例，而不管从基类继承的任何其他类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:41:55.793

虚拟继承避免了继承循环。例如，这将发出警告：

```
class A {
public:
    int count;
};

class B : public A {
};

class C : public B, public A {
}; 
```

给出：

```
prog.cpp:9: warning: direct base ‘A’ inaccessible in ‘C’ due to ambiguity 
```

因为`C`继承 from`A`是不明确的（它直接继承自，`A`但也继承自`A`through `B`）。

这将在没有警告的情况下编译：

```
class A {
public:
    int count;
};

class B : virtual public A {
};

class C : public B, virtual public A {
}; 
```

因为`C`只有一个 的共享实例`A`。

# google-maps-api-3 - 使用 MarkerCluster Google Maps API 的 GoogleMaps 聚类点

> ID：12969911
> 
> 赞同：0
> 
> 时间：2012-10-19T08:03:23.717
> 
> 标签：google-maps-api-3, markerclusterer

几天来，我一直在尝试在 Google 地图上将标记添加到集群中，但我不知道如何实现代码

我有这张地图-> [https://maps.google.com/maps/ms?msid=211137438455901265530.0004cbb2cd7859b1b6c75&msa=0&ll=7.710992,-2.8125&spn=137.343849,307.96875](https://maps.google.com/maps/ms?msid=211137438455901265530.0004cbb2cd7859b1b6c75&msa=0&ll=7.710992,-2.8125&spn=137.343849,307.96875)

嵌入本网站 -> projectevomap.yolasite.com/

并想在这张地图上添加集群 - > [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html)

这是该页面的源代码->

查看源：http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/simple_example.html

基本上，我可以通过一些指导来了解如何获取现有代码并对其进行更改，以便它在我的站点上显示我的地图和集群。我原以为这只是通过将源代码中的一小部分更改为将其定向到我的地图而不是示例（？）的地址，但我可能错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:45:47.020

因此，您目前所做的只是将 Google 地图嵌入到您的网页中。相反，您需要做的是使用 Google Maps API 将 Google Map 直接添加到您的页面，即不使用您的自定义地图。然后，您必须添加所有需要的标记，包括 markerclusterer JS 文件，并初始化 markerClusterer。

事实上就像这样！

```
 <script type="text/javascript">
      function initialize() {
        var center = new google.maps.LatLng(37.4419, -122.1419);

        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        for (var i = 0; i < 100; i++) {
          var dataPhoto = data.photos[i];
          var latLng = new google.maps.LatLng(dataPhoto.latitude,
              dataPhoto.longitude);
          var marker = new google.maps.Marker({
            position: latLng
          });
          markers.push(marker);
        }
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T23:19:52.620

如果你使用 angular，有一个非常易于使用的指令就是为此而设计的：

[https://github.com/arnauddri/ng-clustered-map/](https://github.com/arnauddri/ng-clustered-map/)

# ios - 如何在 Xcode 4.5 中制作 .ipa 文件？

> ID：12969917
> 
> 赞同：11
> 
> 时间：2012-10-19T08:03:41.383
> 
> 标签：ios, xcode, testflight

由于我将 xCode 升级到 4.5，我找不到将我的 iOS 应用程序保存为我想通过 Testflight 分发的 .ipa 文件的选项。有什么建议么？

这是存档选项的屏幕截图：

![存档选项](../Images/734be14c3a646a3535a6653371183037.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-19T08:07:18.227

您构建的存档，然后在管理器的`Archives`选项卡中，选择要导出为 ipa 的存档，单击`Distribute...`并选择`Save for Enterprise Ad-Hoc Deployment`.

这是我机器上的样子：

![Xcode 存档导出](../Images/d7014c399124915528c1ab2cf8fe0f72.png)

# objective-c - 在我的应用程序运行时在 NSTextView 中编辑文本

> ID：12969927
> 
> 赞同：0
> 
> 时间：2012-10-19T08:04:08.900
> 
> 标签：objective-c, nstextview

我有以下代码，我在其中创建了一个 textLabel。虽然我有 [textView setEditable:YES]; 在这段代码中，当我的应用程序运行时，我仍然无法编辑文本框中的文本。我在这里做错了什么？

```
-(NSView *)elementView {
NSView* view  = [super elementView];
NSTextField* textView = [[[NSTextField alloc] initWithFrame:view.bounds] autorelease];

textView.autoresizingMask = NSViewWidthSizable | NSViewHeightSizable;
textView.stringValue = self.text != nil ? self.text : @"Label";
textView.textColor = self.textColor;
textView.font = [NSFont fontWithName:self.fontName size:self.fontSize];

NSTextAlignment alignment = NSLeftTextAlignment;
if([@"center" isEqualToString:self.textAlignment]) {
    alignment = NSCenterTextAlignment;
} else if([@"right" isEqualToString:self.textAlignment]) {
    alignment = NSRightTextAlignment;
}
textView.alignment = alignment;

[textView setEditable:YES];
[textView setSelectable:NO];
[textView setDrawsBackground:NO];
[textView setContinuous:NO];
[view addSubview:textView];
return view; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:16:29.937

[NSTextView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)的文档说：

> 如果文本视图不可选择，它也将不可编辑，并且“查找”面板上的按钮会变暗。默认情况下，文本视图既可编辑又可选择。

所以我想你不必将可选择设置为否。

# java - 从另一个 JFrame 内部创建的 JFrame 拒绝出现

> ID：12969931
> 
> 赞同：-1
> 
> 时间：2012-10-19T08:04:23.967
> 
> 标签：java, swing, jframe, jdialog

看来今晚将是我完成对 Swing 精神错乱的重新洗礼的夜晚。我确信我的问题是一个常见的、简单的问题，但我似乎找不到合适的答案。

继续我在另一个问题中的早期设计，我现在尝试从我的 MainForm 类（也是另一个 JFrame）中调用一个（NetBeans 设计的）JFrame 类，称为 ExamForm，尽管我尝试过，但它并没有表现出来。我将 setVisible() 设置为 true，并使用 MinimumSize 调用了 validate() & pack()，但它仍然只存在于阴间。

这是我在 MainForm 中的事件代码：

```
 private void MenuItem_NewMouseClicked(java.awt.event.MouseEvent evt) {                                          
        // TODO add your handling code here:

        ExamForm newForm = new ExamForm();
        newForm.setMinimumSize(new Dimension(200, 200));
        newForm.pack();
        newForm.setVisible(true);
        newForm.validate();

    } 
```

和 ExamForm 类本身：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package bakarangerx;

/**
 *
 * @author Ryan
 */
public class ExamForm extends javax.swing.JFrame {

    /**
     * Creates new form Exam
     */
    public ExamForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        Button_OK = new javax.swing.JButton();
        Button_Cancel = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();
        TextField_Filename = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        ComboBox_Encoding = new javax.swing.JComboBox();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        Button_OK.setText("OK");
        Button_OK.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                Button_OKMouseClicked(evt);
            }
        });

        Button_Cancel.setText("Cancel");
        Button_Cancel.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                Button_CancelMouseClicked(evt);
            }
        });

        jLabel1.setText("Filename");

        jLabel2.setText("Encoding");

        ComboBox_Encoding.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(Button_OK, javax.swing.GroupLayout.PREFERRED_SIZE, 93, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(Button_Cancel, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(379, 379, 379))
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(TextField_Filename, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(406, 406, 406))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 56, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(ComboBox_Encoding, javax.swing.GroupLayout.PREFERRED_SIZE, 183, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(633, 633, 633))))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(TextField_Filename, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 22, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(ComboBox_Encoding, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(379, 379, 379)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(Button_Cancel)
                    .addComponent(Button_OK))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void Button_OKMouseClicked(java.awt.event.MouseEvent evt) {                                       
        // TODO add your handling code here:
    }                                      

    private void Button_CancelMouseClicked(java.awt.event.MouseEvent evt) {                                           
        this.setVisible(false);
        this.dispose();
    }                                          

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ExamForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ExamForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ExamForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ExamForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ExamForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton Button_Cancel;
    private javax.swing.JButton Button_OK;
    private javax.swing.JComboBox ComboBox_Encoding;
    private javax.swing.JTextField TextField_Filename;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    // End of variables declaration
} 
```

也许你们中的一个人可以善良，帮助我发现我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:10:11.470

确保

*   您不是从模式对话框中创建框架
*   没有设置框架`stayOnTop`（并且子框架没有放在它下面）
*   子框架应用了一个位置，[`Window#setLocationRelativeTo(Component)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)可能会有所帮助
*   框架具有大小（除 0x0 以外） - 即使您使用`pack`and `minimumSize`，也值得将框架大小设置为任意数量以对其进行测试。

尝试;

*   [`Window#toFront`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#toFront%28%29)

# php - PHP中的对象赋值

> ID：12969941
> 
> 赞同：8
> 
> 时间：2012-10-19T08:05:20.520
> 
> 标签：php

首先，很抱歉这个愚蠢的问题，但我正在阅读[php.net](http://php.net/manual/en/language.oop5.basic.php)中的一篇文章，但我无法理解它到底在说什么。

```
<?php
class SimpleClass
{
    // property declaration
    public $var = 'a default value';

    // method declaration
    public function displayVar() {
        echo $this->var;
    }
}
?>

<?php

$instance = new SimpleClass();

$assigned   =  $instance;
$reference  =& $instance;

$instance->var = '$assigned will have this value';

$instance = null; // $instance and $reference become null

var_dump($instance);
var_dump($reference);
var_dump($assigned);
?> 
```

这会输出：

```
NULL
NULL
object(SimpleClass)#1 (1) {
   ["var"]=>
     string(30) "$assigned will have this value"
} 
```

$instance 和 $reference 指向同一个地方，我明白了，我明白为什么我们会为它们得到 NULL 和 NULL。

但是 $assigned 呢？它还指向存储 $instance 的地方吗？为什么我们在使用`$instance->var`的时候会影响$assigned，但是当我们设置$instance为null时，对于$assigned却没有变化？

我以为这三个变量都指向内存中的一个地方，但显然我错了。您能否解释一下到底发生了什么以及 $assigned 是什么？非常感谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T08:10:08.757

`$reference`指向 的**值**，`$instance`它本身就是一个对象的引用。因此，当您更改 所包含的值时`$instance`，会`$reference`反映此更改。

`$assigned`另一方面，它是的值的**副本**`$instance`，并且独立地指向所`$instance`引用的对象本身。因此，当值`$instance`更新为不指向任何内容（即`null`）时，`$assigned`不受影响，因为它仍然指向对象，并且不关心`$instance`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T08:08:15.947

设置`$instance = null;`不会更新`$assigned`，因为它没有更新指向位置的数据`$instance`。相反，它修改了`$instance`指针本身，使指针不再指向与 相同的数据`$assigned`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T08:11:32.097

对象是内存中的一个独立实体，它可以有 1 个或多个引用。如果为 0，则为垃圾回收。

包含对象的变量实际上*指向*（引用）该对象。所以当你这样做时：

```
$var1 = new Object();
$var2 = $var1; 
```

您只需创建两个变量，指向同一个对象（$var2 复制 $var1 的值，但该值是对对象的引用）。

如果您随后编写, `$var1 = null`，则删除该引用，但 $var2 仍指向该对象。

& 运算符实际上返回对它后面的变量的引用，所以当你写

```
$var1 = &var2; 
```

那么 $var1 并不指向 $var2 指向的对象，但 $var1 指向 $var2 本身。因此，当您将 $var2 设为 null 时，$var1 会指向同一个 null。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T08:18:32.377

通过以下行，我们保留了一个内存位置，其中存储了新对象，以及一个*指向*它的指针，标记为`$instance`：

```
$instance = new SimpleClass(); 
```

通过以下行，我们创建了对*指针* `$instance`的引用，标记为`$reference`：

```
$reference =& $instance; 
```

使用以下代码，我们保留了一个新的内存位置，标记为`$assigned`，与上面的不同且独立，我们在其中存储了上面创建的*指针*（而不是对象本身）的副本：

```
$assigned = $instance; 
```

通过设置`$instance`为`null`，您将仅取消设置指向包含实际对象的内存位置*的指针，而不是对象本身。*对它的任何其他引用（例如，`$reference`）也将被取消设置。

`$assigned`是指针的独立副本（保存在另一个内存位置），它仍然指向实际对象。

这就是为什么它仍然可以用来指代实际对象的原因。

PHP 文档中的这条评论支持上述内容：

```
<?php
class A {
    public $foo = 1;
}  

$a = new A;
$b = $a;
$a->foo = 2;
$a = NULL;
echo $b->foo."\n"; // 2

$c = new A;
$d = &$c;
$c->foo = 2;
$c = NULL;
echo $d->foo."\n"; // Notice:  Trying to get property of non-object...
?> 
```

**笔记**

当谈到内存管理时，这代表了一种例外。而复制变量或数组仅通过使用`=`运算符来解决，对于对象，您应明确使用`clone`关键字，如 PHP 文档中所述：

> PHP 中通常的按值赋值行为的一个例外发生在对象上，在 PHP 5 中通过引用进行赋值。对象可以通过 clone 关键字显式复制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T08:42:11.797

简短的回答，当您使用创建引用时`&`，会发生以下情况：

```
$A  ===+
       |===> [symbol table entry x] ====> (memory location)
$B  ===+ 
```

当你在那之后做一个正常的任务时：

```
$A  ===+
       |===> [symbol table entry x] ===> (memory location)
$B  ===+                                    ^
                                            |
$C  =======> [symbol table entry y] ========+ 
```

* * *

让我们逐步执行代码：

```
$instance = new SimpleClass();

$assigned   =  $instance; 
```

断言：

```
$assigned === $instance 
```

两者`$assigned`和`$instance`引用相同的实例`SimpleClass`。

```
$reference  =& $instance; 
```

断言：

```
$assigned === $instance === $reference 
```

所有变量都引用同一个实例。

```
$instance->var = '$assigned will have this value'; 
```

断言：

```
$assigned === $instance === $reference 
```

即使`$instance`更改了 of 的属性，它也不会影响引用。

```
$instance = null; // $instance and $reference become null 
```

因为`$reference`只是符号表中的一个别名，所以它的值与`$instance`;相同。原始实例（即内存位置）的引用计数减少到`$assigned`变量 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T08:10:28.393

正如您在代码中看到的

> $实例=空；// $instance 和 $reference 变为 null

$instance 现在已变为 null，但在此之前 $assigned 已设置。所以 $assigned 没有得到空值。$reference 收到了 null 值，因为您使用 =& 引用了它，它保留了 $instance 的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T08:48:34.443

这真的很简单：

```
$a = 3;
$b = $a;
$c = &$a;
$a = 0;

var_dump($a);
var_dump($b);
var_dump($c); 
```

输出将是：

```
int(0)
int(3)
int(0) 
```

所以它不仅是对象赋值，也是正常赋值。

# java - 无法将侦听器添加到 CalendarView 事件

> ID：12969944
> 
> 赞同：0
> 
> 时间：2012-10-19T08:05:35.717
> 
> 标签：java, android

有以下代码：

```
 final CalendarView calendarView=(CalendarView)layout.findViewById(R.id.calendarView);
    calendarView.setClickable(true);
    calendarView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(getActivity(), "Click", Toast.LENGTH_LONG).show();
            }

    });
    calendarView.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Toast.makeText(getActivity(), "Touch", Toast.LENGTH_LONG).show();
                return false;
            }

    });
    calendarView.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                Toast.makeText(getActivity(), "Long click", Toast.LENGTH_LONG).show();
                return false;
            }

    }); 
```

我还没有收到任何消息。我需要设置按日期点击的侦听器。我知道 OnDateChangeListener，但它只有在用户更改日期时才有效，但如果用户在同一日期点击我没有收到任何消息。请告诉我，如何设置按日期点击的听众。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:35:54.757

本机日历是蹩脚的IMO。似乎单击任何日期都不会触发任何事件。但是，如果您在日历边框附近单击，则会触发 onClick 和 onLongClick 事件。

# c# - Orchard 文本编辑器无法保存我的 html

> ID：12969949
> 
> 赞同：1
> 
> 时间：2012-10-19T08:06:06.340
> 
> 标签：c#, model-view-controller, content-management-system, tinymce, orchardcms

我正在使用 orchard CMS 建立一个网站，我通过 orchard 的文本编辑器添加了一个页面。我输入以下代码并保存：

```
<a class="tile wide imagetext bg-color-blue" href="./bootstrap-scaffolding.html">
     <div class="image-wrapper">
          <img src="content/img/My Apps.png" />
      </div>
      <div class="column-text">
      <div class="text">Grid system</div>
          <div class="text">Layouts</div>
          <div class="text">Responsive design</div>
       </div>
     <span class="app-label">SCAFFOLDING</span>
</a> 
```

但是我发现再次打开编辑器时，文本编辑器中的代码发生了变化，它们是：

```
<h2>Bootstrap Metro</h2>
<div class="image-wrapper"><img src="content/img/My Apps.png" /></div>
<div class="column-text">
<div class="text">Grid system</div>
<div class="text">Layouts</div>
<div class="text">Responsive design</div></div>
<a class="tile wide imagetext bg-color-blue" href="./bootstrap-scaffolding.html"><span class="app-label">SCAFFOLDING</span> </a> 
```

修改后的代码是：

```
<a class="tile wide imagetext bg-color-blue" href="./bootstrap-scaffolding.html"><span class="app-label">SCAFFOLDING</span> </a> 
```

你能给我什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T13:53:05.290

我通过更改 TinyMCE 选项（在 orchard-tinymce.js 中，但您可以尝试使用 TinyMceDeluxe，它有一些配置选项的替代方法）。

```
, forced_root_block: false
, preformatted: true
, schema: 'html5'
, valid_children: '+a[div],+a[span]' 
```

我很确定是“valid_children”设置解决了这个问题，但它之前的其他设置是我首先尝试的，当我尝试使用 valid_children 时，我将它们放在配置中。您可以尝试删除其他选项并仅使用 valid_children 来查看它是否有效。

还有一个可能有效的 doctype 选项；它控制 TinyMCE 创建的 iframe 的文档类型。在 HTML5`<div>`中，元素是 a 标签的有效子元素，因此如果 tinyMCE 代码正确应用了 doctype 或 schema 规则，我们就不必设置 valid_children。（这就是为什么我在上面尝试过`schema: 'html5'`，但这似乎不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:44:35.300

可能是 TinyMCE 更改了 HTML 以匹配一些 TinyMCE 规则。您可以禁用 TinyMCE 模块，该模块将为您提供一个纯文本区域，您可以在其中输入不会更改的 HTML。

有一个[TinyMCE 豪华模块](http://tinymcedeluxe.codeplex.com/)可以让您选择更改此行为。

# android - 使用 Drive API 上传时出现错误 400 错误请求

> ID：12969953
> 
> 赞同：0
> 
> 时间：2012-10-19T08:06:30.897
> 
> 标签：android, google-drive-api

我目前正在制作一个可以从 Google Drive 上传和下载文件的应用程序。我正在使用 Drive SDK 在 android 上开发。问题是每次我尝试从要上传的文件中设置修改日期时，我总是收到错误的请求错误 400。这是我的 snip 代码：

```
protected CDriveFile doInBackground(String... file) {
        // TODO Auto-generated method stub
        com.google.api.services.drive.model.File f=null;
        File a=new File(file[1]);
        com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
        body.setTitle(file[1].substring(file[1].lastIndexOf("/")+1, file[1].length()));
        Uri selectedUri = Uri.fromFile(a);
        String fileExtension 
         = MimeTypeMap.getFileExtensionFromUrl(selectedUri.toString());
        String mimeType 
         = MimeTypeMap.getSingleton().getMimeTypeFromExtension(fileExtension);
        body.setMimeType(mimeType);
        body.setModifiedDate(DateTime.parseRfc3339(file[2]));
        //without this, work well.. body.setModifiedDate(DateTime.parseRfc3339(file[2]));
        FileContent mediaContent = new FileContent(mimeType, a);
        try {
            f = service.files().insert(body, mediaContent).execute();
          } 
```

当我没有设置修改日期时，文件上传没有任何错误。据我所知，我已经为 Google Drive 提供了正确的日期格式，即 RFC3339，如果我错了，请纠正我。我真的很感谢你们所有人的任何回答和关注..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:40:53.067

在 Drive API 参考中，我们有关于 modifiedDate 的描述：

> 上次此文件被任何人修改的时间（格式化的 RFC 3339 时间戳）。**这仅在设置 setModifiedDate 参数时在更新时可变**。

所以我想你不能直接在插入时设置修改日期

# performance - 基于 cookie [或我可以动态设置的任何其他变量] 的 nginx 速度控制？

> ID：12969958
> 
> 赞同：3
> 
> 时间：2012-10-19T08:06:49.510
> 
> 标签：performance, nginx, controls

我的 Nginx 服务器中有这个配置：

```
limit_rate 500k;
location ~ \.mp4$ {
    mp4;
    limit_rate_after 4m;
    limit_rate 90k;
    limit_req zone=one burst=5;
    limit_conn addr 2;
} 
```

我希望通过 cookie 动态控制速度和突发（不能更改 URL，因为我需要它以一定的长度/结构）

有没有办法放这样的东西？

```
if($cookie_burst){
    limit_rate_after {$cookie_burst}m;//how can I use cookie value here along with m[Megabytes]?
} 
```

编辑：我更改了请求 mp4 文件的 URL，添加了一个突发参数，现在在 Nginx 配置文件中使用 $arg_burst。

但是，我可以测试 $arg_burst 但我不能在这样的行中使用它：

这有效：

```
if ($arg_burst = "1m"){
   limit_rate_after 1m;
} 
```

这不是:(:

```
if ($arg_burst != ""){
   limit_rate_after $arg_burst;
} 
```

有什么解决方法可以随时将我想要的任何价值放在那里吗？

# jsf - 在生命周期或任何阶段销毁会话 bean

> ID：12969959
> 
> 赞同：0
> 
> 时间：2012-10-19T08:06:51.287
> 
> 标签：jsf, jakarta-ee, jsf-2

嗨，我想在特定时间销毁我的 bean。有没有办法可以捕获活动 bean 并将其所有值设置为 NULL，例如如果我有一个方法，那么我希望 bean 在结束时销毁方法执行。我该怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T10:17:24.883

您可以在不同的阶段使用 Bean。如果您希望在这些阶段进行处理，则可以`PhaseListener`用于此目的。通过这个接口和它的方法，你可以在不同的阶段获取 bean。[这是有关阶段](http://www.softwareengineeringsolutions.com/thoughts/frameworks/JSF.Techniques-PhaseListeners.htm)
希望的详细链接，因此它会对您有所帮助。如果您不清楚，请随时询问:)

# android - Android Wigets 不能使用自定义 DefaultHttpClient

> ID：12969965
> 
> 赞同：0
> 
> 时间：2012-10-19T08:07:09.793
> 
> 标签：android, android-widget

标题有点混乱，因为我不知道什么是合适的命名方式。我刚开始学习小部件编程，大致了解了如何制作一个简单的小部件。现在我想在我的实际应用程序中使用它来做一些事情：

1.  使用 IP 地址 ping Web 服务器（检查每个服务器的活跃度）
2.  Web 服务器需要证书身份验证

实际的应用程序已经可以正常工作了，我只想为我正在 ping 的 1 台服务器做一个小部件。我使用了一个自定义的 DefaultHttpClient、*MyHttpClient*类，它完成了我所有的证书身份验证。我如何使用它，*MyHttpClient*类是通过键入

```
DefaultHttpClient client = new MyHttpClient(getApplicationContext()); 
```

它只有在我将它放在**Activity**类中时才有效。**它在AppWidgetProvider**类中不起作用。它给出的错误是：

> 对于 SystemWidget.ParseLoyalty SystemWidget.java 类型的方法 getApplicationContext() 未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:52:10.510

小部件基本上只是一个视图，仅此而已，因此它不能从任何东西请求数据。如果您想更新小部件呈现的数据，您可以使用服务来执行 httprequest。然后，您可以通过广播您自己的操作意图并在 AppWidgetProvider 的 onRecieve 中处理它来将数据发送到小部件，或者您可以直接更新小部件。

当然，如果您的活动处于活动状态，它也可以更新小部件。

在此处查看更多信息： [https ://developer.android.com/guide/topics/appwidgets/index.html](https://developer.android.com/guide/topics/appwidgets/index.html)

该服务与小部件不同。这是一段不同的代码，您可以执行它来执行一些操作。执行服务后，您可以使用检索到的数据来更新您的小部件，如我上面的回答中所述。这是一个关于android服务的教程：

[https://developer.android.com/guide/components/services.html](https://developer.android.com/guide/components/services.html)

如果您想直接从您的活动中更新您的小部件，还可以查看此线程： [Programmatically update widget from activity/service/receiver](https://stackoverflow.com/questions/3455123/programmatically-update-widget-from-activity)

# java - 每当抛出异常时如何让硒拍照

> ID：12969967
> 
> 赞同：1
> 
> 时间：2012-10-19T08:07:15.390
> 
> 标签：java, selenium-webdriver

我正在使用远程连接到网格机器来运行硒测试。当出现错误时，很难分析错误。如果我们有一些错误发生时的图片会更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:51:47.537

这里有两个问题需要解决。首先，我们需要一些可以截取屏幕截图的代码，其次，我们需要在测试失败时运行该代码。

在 Selenium 中使用界面截屏[非常`TakesScreenshot`容易](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)。所以你需要类似的东西：

```
TakesScreenshot ts = (TakesScreenshot)driver;
byte[] image = ts.getScreenshotAs(OutputType.BYTES);

try {
  File screenshot = new File("/some/path/myscreenshot.png");
  FileOutputStream fos = new FileOutputStream(screenshot);
  fos.write(image);
  fos.close();
} catch (IOException ex) {
  fail("Failed to write screenshot");
} 
```

根据您使用的驱动程序，您可能也需要[使用](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)[该类`Augmenter`](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)。

测试失败时运行代码将取决于您使用的测试框架，而不是 Selenium。例如，如果您正在使用 TestNG，您可以编写一个实例[`ITestListener`](http://testng.org/javadoc/org/testng/ITestListener.html)来监听您的测试结果，并在测试失败时截取屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:24:22.917

谷歌表示有几种可能的方法：

[http://blogs.steeplesoft.com/2012/01/grabbing-screenshots-of-failed-selenium-tests/](http://blogs.steeplesoft.com/2012/01/grabbing-screenshots-of-failed-selenium-tests/)

[https://addons.mozilla.org/en-us/firefox/addon/screenshot-on-fail-selenium/](https://addons.mozilla.org/en-us/firefox/addon/screenshot-on-fail-selenium/)

[使用 Selenium WebDriver 截屏](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)

如果不符合要求，请描述其他要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:38:34.510

截图

1.  [一条链接](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)
2.  [java的链接2](http://seleniumhq.org/docs/04_webdriver_advanced.html)。这很简单。从此链接复制粘贴代码可能会起作用。

然后您可以将其保存为数据库[sql server info中的 blob](http://technet.microsoft.com/en-us/library/bb933993.aspx)

# opengl - 是否可以“手动”创建用于 OpenGL 纹理的图像数据？

> ID：12969971
> 
> 赞同：5
> 
> 时间：2012-10-19T08:07:28.747
> 
> 标签：opengl, textures

我正在学习 OpenGL 环境中的纹理。我看到在将实际图像数据传递到视频内存之前，没有传统的方法来获取实际图像数据。

出于好奇，是否可以创建我自己的像素数据矩阵并用任意信息填充它，而不是实际读取位图或图像文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T09:46:59.200

> 我看到在将实际图像数据传递到视频内存之前，没有传统的方法来获取实际图像数据。

“常规”是什么意思？

> 出于好奇，是否可以创建我自己的像素数据矩阵并用任意信息填充它，而不是实际读取位图或图像文件？

看看签名，嗯，比如说 glTexImage2D：

```
 void glTexImage2D( GLenum target,
                      GLint level,
                      GLint internalformat,
                      GLsizei width,
                      GLsizei height,
                      GLint border,
                      GLenum format,
                      GLenum type,
                      const GLvoid *pixels ) 
```

最后一个参数将指针指向某个内存。该内存必须*由您*填充，然后才能传递给 OpenGL。通过读取和解码图像文件或通过程序生成图像来填充此内存。事实上，官方 OpenGL 编程指南（红皮书）中的大多数示例都是按程序生成图像数据的。例如，这是来自第一版的第 9 章（请***注意，这不是一种很好的编程风格，不应遵循***）：

```
#define checkImageWidth 64
#define checkImageHeight 64
static GLubyte checkImage[checkImageHeight][checkImageWidth][4];

static GLuint texName;

void makeCheckImage(void)
{
   int i, j, c;

   for (i = 0; i < checkImageHeight; i++) {
      for (j = 0; j < checkImageWidth; j++) {
         c = ((((i&0x8)==0)^((j&0x8))==0))*255;
         checkImage[i][j][0] = (GLubyte) c;
         checkImage[i][j][1] = (GLubyte) c;
         checkImage[i][j][2] = (GLubyte) c;
         checkImage[i][j][3] = (GLubyte) 255;
      }
   }
}

void init(void)
{    

   /* ... */

   makeCheckImage();
   glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

   glGenTextures(1, &texName);
   glBindTexture(GL_TEXTURE_2D, texName);

   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, 
                   GL_NEAREST);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, 
                   GL_NEAREST);
   glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, checkImageWidth, 
                checkImageHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, 
                checkImage);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T08:20:28.693

OpenGL 不知道文件是什么。它不知道文件图像格式等等。它没有将文件中的内容加载到纹理中的功能。

各种[像素传输函数](http://www.opengl.org/wiki/Pixel_Transfer)采用指向内存（或[包含内存的缓冲区对象](http://www.opengl.org/wiki/Pixel_Buffer_Object)）的指针。如何生成这些数据完全取决于您。您可以从文件加载它，从算法创建它，无论您想做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:12:50.877

至少在 WebGL 中有。这是一个使用 32 位浮点数/像素亮度纹理的示例。（编辑：不是 8 bpp）

[http://jsfiddle.net/greggman/upZ7V/](http://jsfiddle.net/greggman/upZ7V/)

gl.texImage2D(gl.TEXTURE_2D, 0, gl.LUMINANCE, 宽度, 高度, 0, gl.LUMINANCE, gl.FLOAT, 像素); 其中像素是一个数组。

我敢打赌，这与 opengl 规范中的 API 完全相同：

`void TexImage2D ( enum target, int level, int internalformat, sizei width, sizei height, int border, enum format, enum type, void *data )`

# c# - 向数据库插入行时出现异常

> ID：12969972
> 
> 赞同：-2
> 
> 时间：2012-10-19T08:07:49.330
> 
> 标签：c#, asp.net

我编写了这段代码来在数据库中插入一行：

```
SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["earchConnectionString"].ConnectionString);
//string insCmd = "Insert into [node] (title, parent_id, oid, display, linkById, customLinks, contentType) values (@title, @parent_id, @oid, @display, @linkById, @customLinks, @contentType)";
string insCmd = "Insert into [node] (title) values (@title)";
SqlCommand insertUser = new SqlCommand(insCmd, con);
insertUser.Parameters.AddWithValue("@title", TextBoxTitle.Text);

try
{
    insertUser.ExecuteNonQuery();
    con.Close();
    Response.Redirect("addNode.aspx");
    Label1.Text = "update success";

}
catch (Exception er)
{
    Label1.Text = er.StackTrace;
} 
```

堆栈跟踪：

```
at System.Data.SqlClient.SqlConnection.GetOpenConnection(String method)
at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at Admin_addNode.Button1_Click(Object sender, EventArgs e)
in c:\inetpub\web1\Admin\addNode.aspx.cs:line 52 
```

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:10:31.640

先调用`con.Open()`再执行`ExecuteNonQuery()`

```
con.Open();
insertUser.ExecuteNonQuery(); 
```

# windows-phone-7 - wp7中如何屏蔽WebBrowser上的声音

> ID：12969974
> 
> 赞同：0
> 
> 时间：2012-10-19T08:08:03.683
> 
> 标签：windows-phone-7

我用WebBrowser加载一个页面，里面播放音乐，我不需要，我怎么屏蔽声音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:41:56.483

如果网页正在播放声音，如果不修改调用它的目标 HTML 代码，就无法停止该声音。如果它是由 JavaScript 调用触发的，请确保您没有将[IsScriptEnabled](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.isscriptenabled%28v=vs.92%29.aspx)设置为**true**。

# java - 通过使用 JPA/Hibernate 的方法访问 @Id 字段时防止代理初始化

> ID：12969975
> 
> 赞同：3
> 
> 时间：2012-10-19T08:08:04.577
> 
> 标签：java, hibernate, jpa

我想让我的实体实现某个接口，该接口返回 id：

```
public interface IdentifiableEntity<T extends Comparable<T>> {
    public T getIdentifier();
} 
```

但是，如果我这样做并且实体是延迟加载的，则`getIdentifier()`初始化代理（并导致单独的选择）。这是一个示例实体：

```
@Entity
public class AppFile implements IdentifiableEntity<Long> {

    @Id
    @GeneratedValue
    private Long id;

    public Long getIdentifier() {
        return id;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    ...

} 
```

有没有办法告诉 Hibernate/JPA`getIdentifier()`只访问众所周知的 ID 而不需要初始化代理？

我已经发现：

1.  当我注释属性（getter）而不是所有字段时，`getId()`不会初始化代理。
2.  `@Access(AccessType.PROPERTY)`在它上面使用`private Long id;`将表现为 1\. 不需要在属性级别上注释所有内容。

**更新：** 1\. 和 2\. 都不满足我的要求，即：

*   `getIdentifier()`返回没有代理初始化的id
*   该字段`id`不会更改其名称（因为有很多现有的 JPQL 语句）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:19:36.403

`getId()`方法来初始化代理，它只需要重定向`getIdentifier()`方法。

```
public Long getId() {
    return getIdentifier();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T11:10:48.013

即使您在字段上使用注释，您也可以使用 Java 反射 API 直接访问 id 值。在这里，我使用 org.easytesting fest-reflect API（反射 API 的薄包装）来缩短代码。proxy.handler.id 下的 id 值。我的示例是一个对部门（潜在代理）有多对一的员工。在我的情况下， id(s) 总是 Long ....

```
public Long extractIdFromDepartment(Employee employee) {

    Long idDepartment = null;

    Department departement = employee.getDepartment();
    Boolean isNotProxy = Persistence.getPersistenceUtil().isLoaded(departement);

    if (isNotProxy) {
        // here, department is not a proxy
        // a direct access is always ok
        idDepartment = departement.getId();
    } else {
        // here department IS a proxy
        // works in all cases : with Hibernate/JPA annotations on getters or fields.
        javassist.util.proxy.MethodHandler handler = Reflection.field("handler")
                .ofType(javassist.util.proxy.MethodHandler.class).in(departement).get();
        java.io.Serializable idDep = Reflection.field("id").ofType(java.io.Serializable.class).in(handler).get();
        if (idDep instanceof Long) {
            idDepartment = (Long) idDep;
        }
    }
    return idDepartment;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T17:40:57.690

好吧，4年后，但这将是解决方案：

@Entity @Access(AccessType.FIELD) 公共类 AppFile 实现 IdentifiableEntity {

```
@Id
@GeneratedValue
@Access(AccessType.PROPERTY)
private Long id;

   public Long getId(){
       return id; 
   } 
```

现在调用`getId()`实体不会初始化它的代理。

# ajax - 树 contextMenu 立即消失

> ID：12969977
> 
> 赞同：2
> 
> 时间：2012-10-19T08:08:08.760
> 
> 标签：ajax, jsf, primefaces

我正在使用带有 contextMenu 的树，这是代码：

```
 <p:contextMenu id="campaignPlaneTreeContextMenu" for="campaignPlanetree" >
          <p:menuitem value="New Camapign" disabled="#{projectCampaignManagementMB.campaignOptionsFlag}" />
          <p:menuitem value="Assign" disabled="#{projectCampaignManagementMB.FSTOptions}" />
          <p:menuitem value="Copy campaign" disabled="#{projectCampaignManagementMB.FSTOptions}"/>
          <p:menuitem value="Paste Campaign" disabled="#{projectCampaignManagementMB.pasteOptionCampaignFlag}"/>
          <p:menuitem value="Delete" disabled="#{projectCampaignManagementMB.FSTOptions}" />
          <p:menuitem value="Import Tests" disabled="#{projectCampaignManagementMB.campaignOptionsFlag}" />
      </p:contextMenu>
      <p:tree id="campaignPlanetree"
                    value="#{projectCampaignManagementMB.root}" var="node"
                    selectionMode="single"
                    selection="#{projectCampaignManagementMB.selectedNode}"
                     dynamic="true">

          <p:ajax event="select" listener="#{projectCampaignManagementMB.onCampaignPlaneNodeSelect}" update=":campaignForm:addCampaignBtn :campaignForm:renameCampaignBtn :campaignForm:importCampaignBtn :campaignForm:deleteCampaignBtn :campaignForm:importCampaignDlg :campaignForm:campaignPlaneTreeContextMenu" /> 

          <p:treeNode  value="#{node}">
              <h:outputText value="#{node}" />
          </p:treeNode>
           ..... 
```

托管豆：

```
if(selectedNode.getData() instanceof Campaign){// when a user select a tree node the contextmenu item are disabled and enabled

          setCampaignOptionsFlag(false);
        ....   
  } 
```

如果没有 disabled 属性，一切都很好，但是添加它后，上下文菜单会立即消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:22:36.003

我发现当您将光标放在每个节点的箭头上时，我的意思是在所选树节点的左侧，上下文菜单不会立即消失。

但是在最后一个树级别（叶子）中，您不会看到箭头，因为节点不可扩展所以它肯定是一个 primefaces 错误

# sip - 星号 vs freeswitch 配置

> ID：12969982
> 
> 赞同：1
> 
> 时间：2012-10-19T08:08:21.830
> 
> 标签：sip, voip, asterisk, freeswitch, sip-server

下面是一个用lua为freeswitch编写的IVR。我没有复制整个 IVR，只是文件开头的一部分。

```
 session:set_tts_parms("flite", "kar");
    session:speak("Welcome to the VoIP World!");
    while(session:ready() == true) do
            session:speak("to go to the next level, press 1");
            session:speak("to hear my voice some more, press 2");
            session:speak("to go to the default IVR demo, press 5");
            session:speak("to exit, press 9");
            digits = session:getDigits(1, "", 3000);
            freeswitch.consoleLog("info", "Got dtmf: ".. digits .."\n");

if (digits == "1") then
                --next level stuff
                session:speak("you selected 1");
                while(session:ready() == true) do
                        session:speak("to hear me speak, press 1");
                        session:speak("to go back to the previous menu, press 2");
                        session:speak("to exit, press 9");
                    digits = session:getDigits(1, "", 3000);
                    freeswitch.consoleLog("info", "Got dtmf, level2: ".. digits .."\n");
                    if (digits == "1") then
                            session:speak("Some people will tell you that life is good");
                    elseif (digits == "2") then
                            break;
                    elseif (digits == "9") then
                            session:hangup();
                    end
            end
    elseif (digits == "2") then
            session:speak("What a Ride!"); 
```

我还使用拨号计划为星号服务器编写了 IVR（只是一个示例，不一定相同），如下所示。

```
[incoming]
exten => 123,1,Answer()
 same => n(menuprompt),Background(main-menu)

exten => 1,1,Playback(digits/1)
 same => n,Goto(menuprompt)

exten => 2,1,Playback(digits/2)
 same => n,Goto(menuprompt)

exten => 9,1,Hangup()

[main-menu]
exten => n(menuprompt),Background(main-menu)

exten => 3,1,Playback(digits/3)
 same => n,Goto(menuprompt)

exten => 4,1,Playback(digits/4)
 same => n,Goto(menuprompt)

exten => 9,1,Hangup() 
```

现在我的问题是在功能上模拟上面的 lua 代码，我需要一些胶水代码还是上面的 IVR 足够了。如果我在一个 SIP 服务器中编写 IVR 并从 sip 电话拨号到该 sip 服务器，它将播放菜单。我正在尝试理解架构，但似乎遗漏了一些部分。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:33:43.300

你很接近，但不完全。

将上下文视为物理盒子。你不能穿过盒子里的墙壁。因此，“标签”（如您的 n(menuprompt)）和扩展名仅适用于该特定框/上下文中的内容。

在 [incoming] 上下文中，您对“Goto(menuprompt)”的调用将引用 [incoming] 上下文中的“(menuprompt)”标签。

在 [main-menu] 上下文中，您对“Goto(menuprompt)”的调用将引用 [main-menu] 上下文中的“(menuprompt)”标签。

“n”优先级是一个结构，表示“在此上下文中，比此扩展的先前优先级多一个”。

所以你的拨号方案最大的问题是你有一个新的上下文[主菜单]但没有初始分机号码。所以你的

```
exten => n(menuprompt),Background(main-menu) 
```

...是“死”代码。它没有做任何事情，因为没有与之关联的扩展。

因此，要修复您的代码，您需要执行类似的操作

```
exten => 1,1,Playback(digits/1)
 same => n,Goto(main-menu,3,1) 
```

...能够从 [incoming] 跳转到 [main-menu]。要跳回来，你会做相反的事情。

进一步阅读：[https ://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities](https://wiki.asterisk.org/wiki/display/AST/Contexts,+Extensions,+and+Priorities)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:54:07.910

我看不出为什么您需要两台具有相同功能的 IVR 服务器。在您的 Asterisk 拨号方案中，您可以制定规则将呼叫转发到 FreeSWITCH，然后您的 Asterisk 用户将被连接到那里。

# java - 如何通过添加自定义外观来更改 Oracle 应用程序（表单）的外观

> ID：12969983
> 
> 赞同：0
> 
> 时间：2012-10-19T08:08:38.393
> 
> 标签：java, oracle, look-and-feel, skinning

我想为 Oracle 应用程序（人力资源专业用户界面表单）设置皮肤，类似于您如何为普通 Java Swing 应用程序设置皮肤；但在谷歌上找不到任何关于如何做到这一点的信息。

该应用程序允许您使用以下配置文件选项更改外观和颜色：

Java 外观 Java 配色方案

它还提供了两个外观示例。基本上我需要知道以下内容。如果我下载像 Nimbus 这样的摇摆皮肤，我应该把它放在 Oracle 应用程序服务器的哪个位置，以便可以通过 Java Look and Feel 配置文件选项来选择它？您似乎还需要将它添加到 LOOK_AND_FEEL 查找中，但我不确定它会在服务器上的哪个位置找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:08:27.367

看看 Francois Degrelle 的 Forms Look and Feel 项目。这不是官方的 Oracle 扩展，但[Oracle 确实认可它](http://www.oracle.com/technetwork/developer-tools/forms/documentation/community-paper-forms-look-and-feel-131989.pdf)。

它可能不是您想要使用的解决方案，但您可以获取一些有关安装的提示。 [了解更多](http://fdtool.free.fr/LAF/doc/Oracle_Forms_Look_and_Feel_project.htm)。

# c# - 在不同存储库中共享类似 linq 到实体表达式逻辑的推荐做法是什么

> ID：12969987
> 
> 赞同：2
> 
> 时间：2012-10-19T08:09:17.553
> 
> 标签：c#, linq, linq-to-entities, repository-pattern

使用存储库模式时，有时您会在不同的存储库中出现相同的逻辑。在下面的示例中，EmployeeRepository中的**GetTempEmployees (** **)**和 CompanyRepository中的 GetCompaniesWithTemps() 具有相同的表达式

 **```
e.IsTemp && e.IsDeleted == false 
```

我的问题是最小化这种重复表达逻辑的推荐做法是什么。

例如。

```
public class Employee
{
    public int EmployeeId { get; set; }
    public bool IsTemp { get; set; }
    public bool IsDeleted { get; set; }
}

public class Company
{
    public int CompanyId { get; set; }
    public bool IsDeleted { get; set; }
    public virtual ICollection<Employee> Employees { get; set; } 

}

public class TestContext : DbContext
{
    public TestContext()
    {
    }
    public DbSet<Employee> Employee { get; set; }
    public DbSet<Company> Company { get; set; }
}

public class EmployeeRepository
{
    private readonly TestContext _context;
    EmployeeRepository(TestContext context)
    {
        _context = context;
    }

    public ICollection<Employee> GetTempEmployees()
    {
        return _context.Employee.Where(e => e.IsTemp && e.IsDeleted==false).ToList();
    }
}

public class CompanyRepository
{
    private readonly TestContext _context;
    CompanyRepository(TestContext context)
    {
        _context = context;
    }

    public ICollection<Company> GetCompaniesWithTemps()
    {
        return _context.Company.Where(c => c.Employees.Any(e => e.IsTemp && e.IsDeleted == false)).ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:36:08.973

Rawling 提出的解决方案将起作用。另一种解决方案是提供在 IQueryables 上工作的扩展。就像是：

```
static class PersonSetExtensions
{
    public static IQueryable<Person> WhereTempAndNotDeleted(this IQueryable<Person> set)
    {
        return set.Where(x => x.IsTemp && !x.IsDeleted);
    }
} 
```

可以在您的代码中用作：

```
return _context.Employee
               .WhereTempAndNotDeleted()
               .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T08:22:49.010

我相信你必须使用一个[`Expression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)，例如

```
static class EmployeeExpressions
{
    public static System.Linq.Expressions.Expression<Func<Employee, bool>>
        IsTempAndNotDeleted = e => e.IsTemp && !e.IsDeleted;
} 
```

然后，您可以将其用作

```
...
return _context.Employee
    .Where(EmployeeExpressions.IsTempAndNotDeleted)
    .ToList();

...
return _context.Company
    .Where(c => c.Employees.Any(EmployeeExpressions.IsTempAndNotDeleted))
    .ToList(); 
```

但我对此有点模糊，所以试一试，看看它是否有效。**

# asp.net - asp.net 中基于导航的网站

> ID：12969992
> 
> 赞同：1
> 
> 时间：2012-10-19T08:09:35.730
> 
> 标签：asp.net, google-maps, c#-4.0, google-maps-api-3

我想在 asp.net 中开发一个基于导航的应用程序。我想在 Google 地图中的源节点和目标节点之间显示一条具有多个航路点的路线，但我不知道该怎么做。

例如：当用户提交带有一些航点的目的地时，地图应该在网站上显示从源到目的地的路线以及这些航点。

你想从 A 点到 D 点，途中有 B 点和 C 点。解决方法是画一条从 A 到 B，B 到 C，最后 C 到 D 的路线。

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:55:59.583

大多数 Google 地图应用程序使用 javascript、php 和 mysql，因此使用这些有更多信息。

如果你必须使用 asp.net[这](http://www.codeproject.com/Articles/291499/Google-Maps-API-V3-for-ASP-NET)会给你一个开始，

# c# - NetworkStream 并不总是发送数据，除非我在关闭 NetworkStream 之前使用 Thread.Sleep()。我究竟做错了什么？

> ID：12969994
> 
> 赞同：1
> 
> 时间：2012-10-19T08:09:42.630
> 
> 标签：c#, tcpclient

我在将一小段数据（日期）发送到同一台计算机上运行的另一个 TcpClient 时遇到问题。

在下面的代码中，您将看到它在关闭 NetworkStream 之前处于休眠状态。如果我删除`Sleep`它会导致间歇性问题，即数据不会在另一端出现。

**我在这里做错了吗？**

```
using (TcpClient client = new TcpClient())
{
    client.Connect(new IPEndPoint(IPAddress.Loopback, _tcpServerPort));
    NetworkStream clientStream = client.GetStream();

    byte[] buffer = new ASCIIEncoding().GetBytes(theDateObject.ToString("yyyy-MM-dd HH:mm:ss"));                            
    clientStream.Write(buffer, 0, buffer.Length);
    clientStream.Flush();
    System.Threading.Thread.Sleep(1000); // Remove this line and the data may not arrive at the other end
    clientStream.Close();
} 
```

其他一些信息：

*   在某些计算机上，您可以删除它`Sleep`而不会引起问题（可能是较慢的计算机？）
*   我试过用`Close(int timeout)`（而不是睡觉）关闭 NetworkStream，但这没有帮助。
*   1000 毫秒的值是任意的——我怀疑其他值也可以。问题是：为什么首先需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:15:18.023

在 NetworkStream 上使用超时调用 close 意味着网络流将在后台保持打开 X 时间以允许发送剩余的数据。在后台需要注意，因为您的代码不会被此阻止。因为您将 tcpClient 封装在 using 语句中，所以客户端和内部的 NetworkStream 将在您调用关闭后直接释放。在这种情况下，睡眠是有效的，因为它允许发送数据并在此期间阻止您的方法，以防止它强制处理其资源。

更简洁的解决方案是在 TcpClient 上设置一个活动的 LingerState，并具有足够长的超时时间。请参阅：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.lingerstate.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.lingerstate.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:11:39.110

如果您的接收队列不为空（您的接收缓冲区中的数据来自您尚未读取的服务器，处理 Socket（客户端）发送 TCP RST（重置连接））并且发送缓冲区中的数据被丢弃即如果还没有发送丢失，否则它会等到发送缓冲区为空，然后终止 tcp 连接。

一种解决方法是关闭发送通道：

```
 client.Client.Shutdown(SocketShutdown.Send)
    clientStream.Close();
} 
```

在关闭客户端（而不是 thread.sleep）之前，在这种情况下连接不会被重置。

.Flush() 也对网络流没有任何作用。

见：[http ://cs.baylor.edu/~donahoo/practical/JavaSockets/RecvQClose.pdf](http://cs.baylor.edu/~donahoo/practical/JavaSockets/RecvQClose.pdf)

# ruby - 如何创建 ruby 数组的一致哈希字符串？

> ID：12969995
> 
> 赞同：4
> 
> 时间：2012-10-19T08:09:50.377
> 
> 标签：ruby, arrays, hash, zlib, digest

我想知道如何创建一个充满字符串的 ruby​​ 数组的一致哈希。要求是，如果数组包含相同的值，则哈希值始终相同，而与它们的顺序无关。

```
>> a = ["a", "b", "c", "d"]
>> SomeModule.hash(a)
=> "2aae6c35c94fcfb415dbe95f408b9ce91ee846ed"
>>
>> b = ["d", "b", "c", "a"]
>> SomeModule.hash(b)
=> "2aae6c35c94fcfb415dbe95f408b9ce91ee846ed"
>>
>> SomeModule.hash(a) == SomeModule.hash(b)
=> true 
```

Zlib 或摘要只处理字符串，但我必须始终对数组进行排序并加入它才能使其正常工作。

那么有没有更好的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:21:53.113

您可以将数组转换为 Set 并调用`to_set`方法（不要忘记 `require 'set'）

```
a = ["a", "b", "c", "d"]
a.to_set.hash # => 425494174200536878

b = ["d", "b", "c", "a"]
b.to_set.hash # => 425494174200536878 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T08:19:02.820

您可以对数组进行排序，将所有元素连接到一个字符串并对其进行哈希处理。

```
def hash(array)
   Digest::SHA1.digest(array.join)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:21:03.123

已经有一个称为该类的标准[`set`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)库`Set`。您也可以轻松地自己实现它。而不是这样的数组：

```
["a", "b", "c", "d"] 
```

将其保留为哈希：

```
{"a" => true, "b" => true, "c" => true, "d" => true} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-20T14:37:01.727

似乎`.hash`忽略了无状态的方面。运行以下方面此问题的时间敏感性：

```
a = %w(alpha bravo charlie delta echo foxtrot gulf hotel india july kilo sheep)
c = %w(alpha bravo charlie delta echo foxtrot gulf hotel india july kilo sheep)

require 'ap'

ap a
ap c

def h2(value)
    Digest::SHA512.hexdigest value.inspect
end

aa = h2(a)
cc = h2(c)
ap aa
ap cc

ap "they are equal" if aa==cc
puts

t = Turtle.new("Tom", "blue")  # an object with two ivars, name and colour
ap h2(t)

t.name = "Teth"
ap h2(t)

t.name = "Tom"
ap h2(t)
puts

t.colour = "ruby red"
ap h2(t)

t.colour = "blue"
ap h2(t) 
```

# c - 编译 pshtoolkit 的问题

> ID：12969998
> 
> 赞同：7
> 
> 时间：2012-10-19T08:09:59.447
> 
> 标签：c, compiler-errors

我已经从[这里](http://oss.coresecurity.com/projects/pshtoolkit.htm)下载了 pass the hash toolkit 源代码。当我使用 Visual Studio Ultimate 2010 编译它时，我会收到以下错误：

```
findfuncs_msv10.obj : error LNK2019: unresolved external symbol _GetModuleInformation@16 referenced in function _FindMSV10Functions
whosthere-alt.obj : error LNK2019: unresolved external symbol _LsaFreeReturnBuffer@4 referenced in function _GetLogonSessionData
whosthere-alt.obj : error LNK2019: unresolved external symbol _LsaGetlogonSessionData@8 referenced in function _GetLogonSessionData
whosthere-alt.obj : error LNK2019: unresolved external symbol _LsaEnumerateLogonSession@8 referenced in function _main 
```

我该如何解决这个错误，或者是否有另一种更好的方法来编译代码。我是 C 新手，我愿意接受任何建议。

更新：我已经链接了 Secur32.lib 和 Psapi.lib 并且它可以编译。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:14:46.627

听起来您需要链接到一些其他库。

[如果您在MSDN](http://msdn.microsoft.com/en-US/)中搜索错误（减去前导下划线）中列出的函数，它将显示要链接到哪些库。

例如

*   [GetModuleInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683201%28v=vs.85%29.aspx)位于 Kernel32.lib 或 Psaip.lib 中，具体取决于您使用的 Windows 版本
*   [LsaGetLogonSessionData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378290%28v=vs.85%29.aspx)在 Secur32.lib

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:17:08.880

您需要将 *.lib 文件添加到 Visual Studio 项目。

![例子](../Images/3ce50d677a6c26f421ee2cb0bddf931a.png)