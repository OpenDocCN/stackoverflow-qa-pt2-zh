# StackOverflow 问答 12796000-12796999

# python - classmethod 内置函数 - 无法理解文档中的语句

> ID：12796004
> 
> 赞同：0
> 
> 时间：2012-10-09T08:37:02.357
> 
> 标签：python

在[Python 标准库第 2 章本身的](http://docs.python.org/library/functions.html)[classmethod()](http://docs.python.org/library/functions.html#classmethod)内置函数下，我对这里引用的两个语句感到困惑：-

> 类方法接收类作为隐式第一个参数，就像实例方法接收实例一样。

好的，直到这一部分我已经足够清楚了，a`classmethod`是特定于一个类的，所以，我们不使用表示`self`该类的实例的隐式参数，而是使用`cls`表示类本身并将其绑定`classmethod`到班级..

现在，这是本主题后面的另一个让我感到困惑的声明：-

> 如果为派生类调用类方法，则派生类对象作为隐含的第一个参数传递。

现在，这应该是什么意思？是不是想说，我们在这种情况下使用时实际上传递`an object`给 a `classmethod`？但这不与第一个陈述本身相矛盾。

谁能让我理解，这两个陈述如何在不相互矛盾的情况下齐头并进？

我试图找出一些资源，但找不到`example`，演示`second case`..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:46:03.390

一个类是一个功能齐全的一流对象，就像该类的实例一样（尽管它们显然不是同一个对象）。当我们说 a `classmethod`of`class C`接收“类对象”作为第一个参数时，我们说它接收一个表示 a 的对象，而不是一个`isinstance(<the object>, C)`为真的对象。后者称为（类）*实例*，“类对象”是为类对象保留*的*。

第二句简单地阐明了如果在派生类上调用类方法，则类方法接收该派生类（AKA“派生类对象”），以启用多态行为。例如（Python 3，因为 f..k 旧样式类）：

```
class C:
    x = 1

    @classmethod
    def m(cls):
        return cls.x

class D(C):
    x = 2

print(C.m()) # 1
print(D.m()) # 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:41:16.403

```
class A(object):
    @classmethod
    def x(cls): return cls

class B(A):
    pass

print B().x() 
```

在这里，我`A.x()`通过它的子类调用`B`。

`B`因此，从 派生的类 object`A`被返回。

# ios6 - iOS6 通讯录中的 Facebook 社交资料

> ID：12796005
> 
> 赞同：3
> 
> 时间：2012-10-09T08:37:05.847
> 
> 标签：ios6, abaddressbook

我正在尝试通过 iOS 中的地址簿 API 访问联系人的 Facebook ID。该代码适用于我手动输入联系人的个人资料，但它不会返回已自动同步的 Facebook 帐户的社交个人资料（在 iOS6 中）。仅供参考，它确实会从同步的联系人中返回姓名、电子邮件和电话号码。有没有办法获取从 Facebook 检索到的联系人的 Facebook ID？

这是我正在使用的代码：

```
ABMultiValueRef profiles = ABRecordCopyValue(record_, kABPersonSocialProfileProperty);
CFIndex multiCount = ABMultiValueGetCount(profiles);
for (CFIndex i=0; i<multiCount; i++) {
    NSDictionary* profile = (__bridge NSDictionary*)ABMultiValueCopyValueAtIndex(profiles, i);
    NSLog(@"Profile: %@", profile);
}
CFRelease(profiles); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T08:08:48.310

我在我的联系人列表中尝试了您的代码，但它没有为同步或明确添加的联系人提供 FB-ID。这是我可以通过 Facebook 个人资料显式添加的联系人获得的信息。

> 2012-10-29 13:18:06.315 联系人[6208:907] 个人资料：{ service = facebook; url = "http://www.facebook.com/????"; 用户名 = ????; }

（抱歉，不能发图片）

现在，我正在使用图形 API 来获取用户 ID，如下所示：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@", [(__bridge NSDictionary *)ABMultiValueCopyValueAtIndex(rec, 0) objectForKey:@"username"]]]];
if (data) {
  NSError *error = nil;
  tContact.fbDetails = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&error];
  tContact.fbID = [tContact.fbDetails objectForKey:@"id"];
}
NSLog(@"fbID:%@ fbDetails:%@", tContact.fbID, tContact.fbDetails); 
```

仍然想看看是否有人有任何方法可以从 Contacts.app 本身获取 FB-ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:18:57.697

kABPersonSocialProfileProperty 返回有限的信息，除非用户实际手动单击设置图标，然后 Facebook 图标允许 Facebook 应用程序首先在他们的 iOS 设备上同步详细信息。一旦发生这种情况，您可以在通讯簿中的应用程序认证的链接联系人中获取所有 kABPersonSocialProfileProperty 参数。

看我自己回答的问题：

[ABMultiValueGetCount - kABPersonSocialProfileProperty 总是返回 0 吗？如何从通讯录中获取 Facebook 详细信息？](https://stackoverflow.com/questions/15870343/abmultivaluegetcount-kabpersonsocialprofileproperty-always-returns-0-how-can)

# android - 使用信用卡和借记卡的贝宝付款

> ID：12796012
> 
> 赞同：6
> 
> 时间：2012-10-09T08:37:24.180
> 
> 标签：android, paypal

我想在我的 android 应用程序中集成 paypal 支付功能。

如何通过借记卡和信用卡向贝宝付款？

如果不可能？您能建议我使用借记卡和信用卡付款的另一种选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:45:13.717

您可以使用移动快速结帐库：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECOnMobileDevices](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECOnMobileDevices)

用户将有 2 个选择：Paypal 帐户或信用卡。您可以通过以下方式下载演示：

*   去这里[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

*   “移动图书馆”选项卡

*   “Mobile Express Checkout Library” - 下载内容库、文档和演示的 zip 文件。

*   运行演示，您将看到带有“用卡付款”选项的屏幕。

祝你好运。

# xslt - 如何使用 sxlt 过滤和删除 xml 文件中的某些节点

> ID：12796014
> 
> 赞同：1
> 
> 时间：2012-10-09T08:37:25.570
> 
> 标签：xslt, xslt-1.0

我有这个 xml 文件：

```
<A>
<B>
    <elt>Add</elt>
    ...there are some element here
    <bId>2</bId>
</B>
<B>
    <elt>Add</elt>
    ...there are some element here
    <bId>2</bId>
</B>
<B>
    <elt>Add</elt>
    ...there are some element here
    <bId>2</bId>
</B>
<B>
    <elt>can</elt>
    ...there are some element here
    <bId>3</bId>
</B>
<B>
    <elt>can</elt>
    ...there are some element here
    <bId>3</bId>
</B> 
```

我想检查每个**bId**元素的值。如果这个值与前面或后面的**bId**元素相同，那么我会将 bloc **B**的其他元素放在另一个 bloc中，但转换后将被拒绝的元素**bId除外。**为了让您理解我的问题，这是预期的输出：

```
<CA>
  <cplx>
    <spRule>
            <elt>Add</elt>
             ...
    </spRule>
    <spRule>
            <elt>Add</elt>
             ...
    </spRule>
    <spRule>
            <elt>Add</elt>
            ...
    </spRule>
  </cplx>
  <cplx>
    <spRule>
            <elt>can</elt>
            ...
    </spRule>
    <spRule>
            <elt>can</elt>
            ...
    </spRule>
  </cplx>
</CA> 
```

即使当 xml 文件中的元素**未按 bId**的值排序时，我也希望获得相同的预期输出。我尝试使用这个 xsl 代码：

```
<xsl:for-each select="bId"
  <CA>
    <cplx>
    <xsl:choose>
      <xsl:when test="node()[preceding::bId]">
         <xsl:copy>
          <xsl:copy-of select="@*"/>
          <xsl:apply-templates/>
         </xsl:copy>
      </xsl:when>
    </cplx>
  </CA>
</xsl:for-each> 
```

但它不会走路。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:47:23.163

假设您的第一个描述是将具有相同值的相邻元素分组`bId`是您想要的 XSLT 1.0 方式如下：

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:key name="k1"
    match="B[bId = preceding-sibling::B[1]/bId]"
    use="generate-id(preceding-sibling::B[not(bId = preceding-sibling::B[1]/bId)][1])"/>

  <xsl:template match="A">
    <CA>
      <xsl:apply-templates select="B[not(preceding-sibling::B[1]) or not(bId = preceding-sibling::B[1]/bId)]"/>
    </CA>
  </xsl:template>

  <xsl:template match="B">
    <cplx>
      <xsl:apply-templates select=". | key('k1', generate-id())" mode="sp"/>
    </cplx>
  </xsl:template>

  <xsl:template match="B" mode="sp">
    <spRule>
      <xsl:copy-of select="node()[not(self::bId)]"/>
    </spRule>
  </xsl:template>

</xsl:stylesheet> 
```

如果您只是想对`B`具有相同`bId`值的所有元素进行分组，请使用

```
<xsl:stylesheet 
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:key name="k1"
    match="B"
    use="bId"/>

  <xsl:template match="A">
    <CA>
      <xsl:apply-templates select="B[generate-id() = generate-id(key('k1', bId)[1])]"/>
    </CA>
  </xsl:template>

  <xsl:template match="B">
    <cplx>
      <xsl:apply-templates select="key('k1', bId)" mode="sp"/>
    </cplx>
  </xsl:template>

  <xsl:template match="B" mode="sp">
    <spRule>
      <xsl:copy-of select="node()[not(self::bId)]"/>
    </spRule>
  </xsl:template>

</xsl:stylesheet> 
```

# javascript - 如何在 Yii 框架中使用 jQuery。？

> ID：12796021
> 
> 赞同：5
> 
> 时间：2012-10-09T08:37:55.590
> 
> 标签：javascript, jquery, yii

如何在 yii 中使用 jquery/javascript？，

如何在 yii 中使用我的脚本？

为什么这与以任何其他方式使用 jQuery 有什么不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T08:37:55.590

使用 Yii 的 registerScript 加载我们的 jQuery，如果**正常使用它看起来**像这样：

```
$(document).ready(function(){
    alert('hello');
    // Enter code here
}); 
```

现在如果我们像这样使用**Yii 的脚本**：

```
<?php
    Yii::app()->clientScript->registerScript('helloscript',"
        alert('hello');
    ",CClientScript::POS_READY);
?> 
```

你会看到你需要向 Yii::app()->clientScript->registerScript 函数传递 3 个东西，首先是一个脚本名称，这并不重要；它必须与同一页面上的任何其他脚本名称唯一。[关联](http://usingjquery.com/2010/10/using-jquery-with-the-yii-framework/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-09T10:02:10.160

> 如何在 yii 中使用 jquery？

如上所述，您可以注册一个新的脚本块，也可以注册一个新的外部脚本文件。您还可以在插件中注册资产，这些资产将获取整个 JS 文件夹并将它们组合到您的应用程序中。

所以在 Yii 中有很多使用 JQuery 的方法。

> 如何在 yii 中使用我的 jquery

JQuery 与 JQuery 预先捆绑并激活，JQuery 库本身被认为是核心脚本，因此没有真正需要放入您自己的 JQuery。

您可以通过放置以下内容用自己的 JQuery 覆盖内置的 JQuery：

```
$cs = Yii::app()->clientScript;
$cs->scriptMap = array(
'jquery.js' => Yii::app()->request->baseUrl.'/js/jquery.js',
'jquery.yii.js' => Yii::app()->request->baseUrl.'/js/jquery.min.js',
);
$cs->registerCoreScript('jquery');
$cs->registerCoreScript('jquery.ui'); 
```

在您的布局、操作或视图中的某处类似的东西。我更喜欢将它放在布局中并亲自管理我自己的 JQuery 版本。

> 为什么这与以任何其他方式使用 jQuery 有什么不同？

主要是由于框架及其组件的标准化和互操作性。预先捆绑了 JQuery UI 小部件和 JQuery 元素的内置钩子，这使得框架更容易构建可重用和干净的 JS 对象以在您的应用程序中使用。

我也喜欢 JQuery，所以在我看来，预先捆绑它是有意义的。然而，这并不是要求 JQuery 成为唯一的 JS 库/框架，您应该在选择之前真正考虑哪个最适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:30:17.060

这是我刚刚在我的应用程序开发中使用的示例脚本：

```
<?php
$js = "
$('body')
  .on('click', '#cancelCreateInductionTemplate, #closeDialogBox', function (e) {
    // Close #openDialog
    e.preventDefault();
    $('#openDialog').dialog('close');
  });
";
Yii::app()->clientScript->registerScript('cancelCreateInductionTemplate', $js, CClientScript::POS_READY);
?> 
```

# java - 在 JAVA 中使用 python RPC 服务

> ID：12796027
> 
> 赞同：1
> 
> 时间：2012-10-09T08:38:18.737
> 
> 标签：java, python, rpc, xmlrpclib

我可以在 Java 中使用 Python RPC 服务吗？

现在我有一个工作原型..我想获得服务器中所有可用服务的列表..

```
XmlRpcClient client = new XmlRpcClient();
XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();
config.setServerURL(new URL("http://192.168.1.15:8010"));
client.setConfig(config);
Object[] params = new Object[0];

Object result = client.execute("hello",params); 
```

# sharepoint - 可以在 Caml 查询上使用聚合函数吗？

> ID：12796031
> 
> 赞同：3
> 
> 时间：2012-10-09T08:38:36.797
> 
> 标签：sharepoint, caml

是否可以对共享点列表进行分组并使用聚合函数？（总和、计数等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:49:07.410

是的，有可能。

请参阅： [GroupBy](http://msdn.microsoft.com/en-us/library/ms471093.aspx) [聚合](http://msdn.microsoft.com/ru-ru/library/ms468626%28v=office.12%29.aspx)

# c# - 在 C# 中为 CSV 转义非字母数字字符

> ID：12796036
> 
> 赞同：0
> 
> 时间：2012-10-09T08:38:53.977
> 
> 标签：c#, csv, escaping

我将其作为 C# 中字符串的一部分：

```
!"£$$$$$$%& 
```

它最终应该是：

```
!,",£,$$$$$$,%,& 
```

我的代码在字符发生变化的每一点都用逗号分隔，以便对该部分进行排序。

但是，当在 CSV 文件中打开此输出时，它会变得一团糟，因为 Excel 不喜欢`"`.

如何轻松逃脱导致问题的字符？我猜我需要做类似的事情：

```
String.Replace("\"","X") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:47:38.087

在 excel 中，引号被写为“”“”（4 个引号）到 CSV -> 包含转义引号的字符串

这导致以下表达式：

```
String.Replace("\"","\"\"\"\"") 
```

这将在 excel 中*显示*一个单引号，但您必须知道您的*数据*已更改。

# scala - 高阶函数还是只是对象方法访问？

> ID：12796038
> 
> 赞同：0
> 
> 时间：2012-10-09T08:38:54.667
> 
> 标签：scala, closures, static-methods

我正在使用 Scala 并通过将谓词传递给过滤函数来解决某些问题。没什么大不了的，但在谓词中，我使用了对名为 doSearch 的私有函数的调用。

doSearch 方法是作为常规方法调用还是作为“指针”传递给该方法并作为高阶函数调用？

我的基本原理是，将它作为高阶函数传递似乎是唯一的方法，因为 doSearch 是 MyObject 私有的，但也可以从 GlobalSet 内部调用 doSearch，因为调用是从 MyObject 内部执行的，因此可以访问它？

欢迎任何指向信息的指针、建议和网址！

```
object MyObject {

  private def doSearch(text: String, wordList: List[String]): Boolean = {
    // do the search
  }

  val thisSet: MySet = GlobalSet.allElements.filter( elem => doSearch(elem, myList) )

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:49:10.627

我看不出为什么`doSearch`应该在这里提升到一个功能。闭包将被转换为将调用的某个匿名类`doSearch`- 几乎与您从`ActionListener`Java 中的匿名调用某些方法的方式相同。

但是如果你真的想知道发生了什么，总有反编译器......

# c# - 使用来自另一个 dll 的附属程序集

> ID：12796042
> 
> 赞同：0
> 
> 时间：2012-10-09T08:39:24.323
> 
> 标签：c#, .net, dll, satellite-assembly

我有一个 dll，其中包含一些 resx 文件作为本地化的 EmbeddedResources。该 dll 主要用于创建 ASP.NET 网站，并且运行良好。

但是当我在我的测试项目中使用 dll（基本上这只是另一个 dll）时，我无法访问附属程序集的内容，例如我无法访问我的消息的英文翻译。它只返回回退消息。

使用的代码：

```
ResourceManager _resourceManager = new ResourceManager(baseName, Assembly.GetExecutingAssembly());
_resourceManager.GetString(key, cultureInfo); 
```

baseName 是资源的完全限定名称，例如：myNamespace.MyResourceName。

我在想，当项目是 dll 或网站时，dll 的加载是不同的，但我不知道如何正确加载它。

有人有想法或提示吗？

谢谢。

编辑：我有一些 resx 的 dll A：

*   消息.resx
*   Messages.en.resx
*   消息.de.resx
*   ETC...

在构建结束时，它会生成一些 dll：

*   A.dll
*   zh/A.resources.dll
*   de/A.resources.dll
*   ETC...

如果 dll A 被网站引用，则该网站可以访问本地化资源，例如 en 或 de 中的消息。但是，如果它是另一个 dll，比如我的单元测试 dll，它引用了 dll A，它总是返回的后备消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:42:25.767

我认为您正在加载执行程序集的资源，而不是附属程序集。尝试：

```
var assembly = Assembly.Load("my.other.namespace");
var manager =  new ResourceManager(assembly.GetType().Name + ".Localisation", assembly);

var str = manager(key, cultureInfo); 
```

替换`my.other.namespace`为附属程序集的完整命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:49:44.667

看来问题来自在单元测试中使用 ResourceManager，语言文件夹没有复制到单元测试使用的基本文件夹中，请参阅这个问题：[ResourceManager.GetString failed in unit tests](https://stackoverflow.com/questions/7056614/resourcemanager-getstring-fails-in-unit-tests)。

# javascript - 复选框没有在淘汰赛中被选中

> ID：12796044
> 
> 赞同：8
> 
> 时间：2012-10-09T08:39:32.713
> 
> 标签：javascript, asp.net, knockout.js

我有一个复选框，并单击用于更新数据的复选框的事件。当我单击复选框时，数据正在更新，但未选中复选框。

这是我的html代码：

```
<td>
 <input type="checkbox" data-bind="checked: status, disable: status, click: $root.UpdateStatus" />
</td> 
```

这是我的脚本：

```
self.UpdateStatus = function (tblUsers) {
    $.ajax({
        type: "POST",
        url: 'SinglePageApp.aspx/UpdateStatus',
        data: "{statusVal: 'true',goalId: " + tblUsers.goalId + "}",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert(result.d);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
            alert(errorThrown);
        }
    });
}; 
```

我希望我的复选框在被点击时被选中。然后在单击复选框后放置更新的数据。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-09T08:59:18.773

**请参阅**：http : [//knockoutjs.com/documentation/click-binding.html](http://knockoutjs.com/documentation/click-binding.html)

> **注 3：允许默认点击动作**
> 默认情况下，Knockout 会阻止点击事件采取任何默认动作。这意味着如果您在 a 标记（链接）上使用 click 绑定，例如，浏览器将只会调用您的处理函数，而不会导航到链接的 href。这是一个有用的默认值，因为当您使用点击绑定时，通常是因为您将链接用作操作视图模型的 UI 的一部分，而不是作为指向另一个网页的常规超链接。
> 
> 但是，**如果您确实想让默认点击操作继续进行，只需从您的点击处理函数返回 true**。

* * *

**编辑：**`true`添加了显示函数中返回位置的示例。它必须从实际函数本身返回，而不是 Ajax`success`或`error`处理程序。

```
self.UpdateStatus = function (tblUsers) {
    $.ajax({
        type: "POST",
        url: 'SinglePageApp.aspx/UpdateStatus',
        data: "{statusVal: 'true',goalId: " + tblUsers.goalId + "}",
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            alert(result.d);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert(textStatus);
            alert(errorThrown);
        }
    });
    // Return true to allow default click action.
    return true;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:51:57.333

这是因为 Knockout 中事件处理程序的默认行为是禁用事件的默认操作。在这种情况下，您的`click`处理程序会这样做。

我推荐的一个解决方案是避免使用`click`处理程序并将您的`UpdateStatus`运行作为对状态的订阅。在您的视图模型构造函数中，您应该添加`self.status.subscribe(self.UpdateStatus, self);`

另一种解决方案是[这里](https://stackoverflow.com/a/8490367/1287183)提到的涉及`true`从您的`click`处理程序返回的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:44:54.900

如果status = false，您似乎正在禁用复选框，但将status设置为true的唯一方法是检查它。这就是为什么即使淘汰赛知道它已被点击，复选框也不会被选中的原因。

由于它被禁用，您将无法选中复选框，因此您必须删除`disable: status`数据绑定，或将`disable`逻辑放置在某个位置，以便您可以实际更改复选框的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:00:24.683

我在[这里](http://jsfiddle.net/f5Wcy/)`UpdateStatus`尝试过，它在返回时起作用`true`（不阻止值更改）并且`status`显然必须是一个可观察的值。

# deployment - 每次构建设置项目时配置 SQL Server 2008 Management Studio

> ID：12796045
> 
> 赞同：1
> 
> 时间：2012-10-09T08:39:35.687
> 
> 标签：deployment, windows-installer, setup-project, setup-deployment

我创建了只包含要复制到指定文件夹的文件的安装项目，每次我构建安装项目时，都会出现一个新的弹出窗口，上面写着“请稍候，Windows 配置 Sql server 2008 SP1 Management Studio”，这大约需要 5 分钟，直到它完成然后开始构建过程。

这只发生在我的机器上，即使在尝试构建新的空设置项目时！

为什么会发生这种情况，我该如何摆脱这种情况..

提前谢谢..问候

![SQLServerConfigure](../Images/5aa45c34af40919314d15b4d68785146.png)

# ruby - 在字符串的引号内插入 Ruby 代码

> ID：12796046
> 
> 赞同：2
> 
> 时间：2012-10-09T08:39:37.470
> 
> 标签：ruby, string-interpolation

我有一个这样的字符串：

```
'say "Twenty-five minutes remaining."' 
```

我将如何在该消息中插入更多动态内容？我已经知道下面的方法不起作用，因为内容是按字面意思返回的。

```
'say "#{minutes_remaining} minutes remaining."' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T08:41:27.967

这有效：

```
minutes_remaining = 25
system("say '#{minutes_remaining} minutes remaining.'") 
```

字符串插值仅适用于双引号，不适用于单引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-15T01:39:07.830

您还可以转义字符串内容中的双引号，可能像这样：

```
puts "say \"#{minutes_remaining} minutes remaining.\"" 
```

相关问题[Escaping single and double qoutes from a string in ruby](https://stackoverflow.com/questions/6705982/escaping-single-and-double-qoutes-from-a-string-in-ruby)

# ember.js - 如何使用父对象上下文制作 _super() ？

> ID：12796048
> 
> 赞同：3
> 
> 时间：2012-10-09T08:39:44.573
> 
> 标签：ember.js

```
App.CurtainView = Ember.View.extend
  name: "CurtainView"
  getName: ->
    console.log @get("name")

App.ButtonView = App.CurtainView.extend
  name: "ButtonView"
  getName: ->
    # Do something
    @_super() 
```

控制台返回：

```
ButtonView 
```

...但我希望：

```
CurtainView 
```

我想这是一个上下文问题 - 我如何使用父对象上下文制作 _super() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:06:45.687

我没有完全达到你的目标。这种行为与您对 Ruby 语言所期望的行为相同，但确实与您使用 Java 获得的行为不同*（假设您将`name`在子类中重新定义属性`Button`）* ......

实际上，您必须了解 Ember 的对象模型的实现方式才能更好地理解您得到的行为：

```
App = Ember.Application.create();

App.CurtainView = Ember.View.extend({
  name: "CurtainView",
  getName: function() {
    console.log(this.get("name"));
  }
});

App.ButtonView = App.CurtainView.extend({
  name: "ButtonView",
  getName: function() {
    this._super();
  }
});

var c = App.CurtainView.create(),
    b = App.ButtonView.create();

console.log(c.getName.toString());
console.log(b.getName.toString());

c.getName();
b.getName();
b.getName.apply(c); 
```

默认情况下，`_super`调用适用于调用当前函数的对象。

`getName`您可以通过调用`apply`or`call`并传递适当的目标来覆盖此默认行为。但对我来说这似乎很奇怪......

[JSFiddle在这里](http://jsfiddle.net/wythe/)

# javascript - 禁用右键单击 Webworks 应用程序

> ID：12796053
> 
> 赞同：0
> 
> 时间：2012-10-09T08:40:08.870
> 
> 标签：javascript, blackberry, blackberry-webworks

应用程序的特定页面，我想禁用后退按钮，我想使用黑莓菜单。

如何禁用黑莓上的后退按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:25:56.460

你会想要捕获 Back 键事件，然后相应地处理它，就像这样......

```
function trapForBackKey() {
   blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK, handleBack);  
}  

function handleBack() {
   alert("handle back button");  
} 
```

在您的情况下，您可能只想简单地“返回 false；” 在handleBack 函数中。

# android - How to improve performance for SQLite database for android

> ID：12796062
> 
> 赞同：11
> 
> 时间：2012-10-09T08:40:50.107
> 
> 标签：android, android-sqlite

There are few questions related to this topic on stackoverflow, But I didn't get the proper answer. I have some doubts on performance of flat files, Is it better to use flat files instead of SQLite ?

I took performance statistics for Android `SQLite`.

I have performance statistics for one table which have 21 columns

Can anybody please suggest how to reduce this insertion time.

```
Records  Write time in ms   Read time in ms
1000      67813                   608
1000      66340                   604
1000      64359                   609
10000     679837                  5159
10000     618062                  5110
10000     644638                  5729
10000     646878                  5890 
```

`Flat file` have less time rather than `SQLite`

So anybody please suggest me how can i improve this time for SQLite.

I am using simple `database open insert using ContentValues` and database close.

Please suggest me some things how to improve these statistics.

Updated Performance statistics after using below answer.Still i want to increase these performance.

```
Records    Writetime in ms         Readtime in ms   
1000        1645                       530          
1000        2497                       672          
1000        3143                       610          
10000       16356                     5243          
10000       14006                     5122          
10000       13158                     5002          
10000       14828                     5234          
100000      125525                    77622 
```

Thanks

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T08:54:26.017

I believe you are inserting 1000 or 10000 using a loop. Use TRANSACTIONS , it will dramatically reduce the write time. I already encountered such an issue and it reduced the write time in my case from around 30 seconds to about less than 1 second.

Take a look at [this](http://www.android-app-market.com/sqlite-optimization-in-android-programming-sqlite-optimization-in-android-apps.html).

Basically, what you should do is :

```
db.beginTransaction();
try{
    for(int i = 0 ; i < LENGTH ; i++ ) {
        // execute SQL
    }
    db.setTransactionSuccessful(); // marks a commit
    }
finally{
    db.endTransaction();
} 
```

# numbers - 哈德逊工作的修订号差异

> ID：12796064
> 
> 赞同：0
> 
> 时间：2012-10-09T08:40:56.873
> 
> 标签：numbers, hudson, revision

我发现在特定作业的“状态”中显示的修订号与 hudson 上作业的构建控制台输出的“在修订时”之间存在差异。当我触发构建时，即使它们不是存储库中的新签入，修订版也会增加，并且在作业的控制台输出中会看到新的修订版号（“在修订版”），同样，当我单击相同构建的相同作业的“状态”，修订号不会更改并且它是正确的，只有当更改或新签入发生在存储库中时，正确的修订号才会显示出来。

谁能说出为什么会有这种差异，我使用的 hudson 是 2.2.0，hudson-Subversion plugin-2.2.0-1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:52:37.763

我注意到控制台日志中的“At revision”显示了整个存储库的最新版本，即存储库的根目录。

构建作业页面正确显示了您正在检出的实际 SVN 路径的修订。

顺便说一句，SVN_REVISION 或 SVN_REVISION_1 也显示了正确的版本（您的实际结帐路径）

# r - 将 data.frame 折叠成向量

> ID：12796065
> 
> 赞同：2
> 
> 时间：2012-10-09T08:40:58.957
> 
> 标签：r, dataframe

我有一个这样的数据框：

```
COL1  COL2  COL3 

   a           h
   b     f    
   c     g       
   d           j 
```

我想要以下输出：

```
 COL  
   a    
   b    
   c    
   d   
   f   
   g   
   h   
   j 
```

如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T08:45:12.997

如果您`data.frame`的名字是`dat`，请尝试：

```
unlist(dat, use.names=FALSE) 
```

您可能还想尝试以下方法：

```
as.character(unlist(dat, use.names=FALSE))
c(na.omit(as.character(unlist(dat, use.names=FALSE)))) 
```

如果您的数据作为因子输入，这可能会很有用。

另外，在您的问题中，您看起来实际上并没有基本的“向量”，而是 one-column `data.frame`。因此，类似的东西`dat2 <- data.frame(COL = c(na.omit(as.character(unlist(dat, use.names=FALSE)))))`可能就是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:06:40.947

```
do.call(c, your_data_frame) 
```

一个例子：

```
> dat <- data.frame(a = 1:3, b = 2:4)
> do.call(c, dat)
a1 a2 a3 b1 b2 b3 
 1  2  3  2  3  4 
```

这需要 data.frame 的每一列并将其视为 c 的单独输入，因此您只需将所有内容连接到一个向量中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T15:11:48.543

你可以使用`unlist`：

```
dat <- data.frame(A1 = letters[1:3],
                  A2 = letters[2:4],
                  A3 = c("f", "a", "b"), stringsAsFactors = FALSE)

unlist(dat)

# A11 A12 A13 A21 A22 A23 A31 A32 A33 
# "a" "b" "c" "b" "c" "d" "f" "a" "b" 
```

# c# - 在 C# 中更改默认的 webbrowser 呈现模式

> ID：12796070
> 
> 赞同：2
> 
> 时间：2012-10-09T08:41:09.943
> 
> 标签：c#, browser, rendering, mode

我制作了一个应用程序，用存储在数据库中的数据填充网络表单的字段。问题是，当 WebBrowser 加载时，会出现 JavaScript 错误弹出窗口，当我尝试提交表单时它不会这样做，因为（引用）：“发生错误。”

我在这里读到它默认使用 IE4：

[用更好的浏览器（如 Chrome）替换 .NET WebBrowser 控件？](https://stackoverflow.com/questions/790542/replacing-net-webbrowser-control-with-a-better-browser-like-chrome)

我已经尝试过了，但是没有用。无论我做什么，它看起来都坚持 IE7：

[http://blogs.msdn.com/b/ie/archive/2009/03/10/more-ie8-extensibility-improvements.aspx](http://blogs.msdn.com/b/ie/archive/2009/03/10/more-ie8-extensibility-improvements.aspx)

我想使用默认的 WebBrowser 控件，但如有必要，我可以切换到“Chrome”或“FireFox”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:56:37.600

我之前对此进行了一些调查！根据我记得阅读的内容... WebBrowser 控件实际上似乎根据您安装的 IE 呈现不同，但是，它将选择 IE 的最低呈现模式。

让我解释：

假设您安装了 IE9...实际上可以强制 IE9 以 IE8、IE7 和 quirks 模式呈现页面。（要对此进行测试，请进入 IE，然后按 F12。您应该会看到开发人员工具栏出现，您可以在此处更改兼容性和标准模式）。其中，您的 WebBrowser 控件可能会以 IE7 模式呈现，如果存在 HTML 错误，则可能会以 Quirks 模式呈现。

这是一个很好的 Q/A...[如何将 WebBrowser 控件放入 IE9 标准中？](https://stackoverflow.com/questions/4097593/how-to-put-the-webbrowser-control-into-ie9-into-standards)

这是一篇关于 FEATURE EMULATION 的文章，它允许您在 IE9 模式下运行 WebBrowser 控件：[https ://stackoverflow.com/a/5357205/1033686](https://stackoverflow.com/a/5357205/1033686)

希望这可以帮助！

# java - JPA - 具有一对多关系的实体 - 关系不返回数据

> ID：12796077
> 
> 赞同：1
> 
> 时间：2012-10-09T08:41:29.083
> 
> 标签：java, jpa, entity, one-to-many, openjpa

我正在使用 ReverseMappingTool 为现有的数据库方案创建 JPA 源。

它工作正常，有一个例外：创建后，从一对多关系调用 get-Methods 数据时未加载。

JPA 文件如下所示：

```
@Entity
@Table(schema="myScheme", name="ORDER")
@IdClass(org.company.OrderId.class)
public class Order {
    @OneToMany(targetEntity=org.company.Orderposition.class, mappedBy="order", cascade=CascadeType.MERGE)
    private Set orderpositions = new HashSet();

public Set getOrderpositions() {
    return bestellpositions;
}

public void setOrderpositions(Set orderpositions) {
    this.orderpositions = orderpositions;
}

public Set getDependantPositions() {
    if (getOrderpositions() != null) {
        return getOrderpositions();
    }
} 
```

和...

```
@Entity
@Table(schema="myScheme", name="ORDERPOSITION")
@IdClass(org.company.Orderposition.Id.class)
public class Orderposition {
    @ManyToOne(fetch=FetchType.LAZY, cascade=CascadeType.MERGE)
    @JoinColumn(name="intid_strbestellung", nullable=false)
    private Order order;

    public Order getOrder() {
        return order;
    }

    public void setOrder(Order order) {
        this.order = order;
    } 
```

方法“getDependantPositions()”只是我在 JPA 类中放置的方法的一个示例。有必要这样做，所以让我们把它当作给定的。关键是，尽管数据库包含该对象的大量条目，但调用 getOrderpositions() 不会返回任何数据。映射工具没有为@OneToMany-Relationships 添加任何 FetchType ......所以我猜它的 LAZY 并调用 getOrderpositions() 应该返回所有相关值。

你能帮助我吗？

谢谢！

PS：这就是我调用 ReverseMappingTool 的方式：

```
Options opts = new Options();
        // Output directory - All generated code and metadata will be written to the directory at this path
        opts.setProperty("directory", PATH_SOURCEGENERATION);
        // True to generate JPA annotations in generated java classes. 
        opts.setProperty("annotations", true);
        // disable orm.xml generation
        opts.setProperty("metadata", "none");
        // The full class name of a org.apache.openjpa.jdbc.meta.ReverseCustomizer customization plugin
        opts.setProperty("customizerClass", JPAPropertiesReverseCustomizer.name);
        // Create built-in application identity classes if possible
        opts.setProperty("useBuiltinIdentityClass", false);
        // Avoid creating classes for many-many join tables
        opts.setProperty("primaryKeyOnJoin", true);
        // Prevent the creation of inverse 1-many/1-1 relations for every many-1/1-1 relation detected
        opts.setProperty("inverseRelations", true);

        opts.setProperty("innerIdentityClasses", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:21:11.137

您应该配置日志，以便查看发送到数据库的查询。然后您将能够检查： 1.`Order`加载时哪些查询进入 DB 以及 2\. 当您获得 Set 返回的内容时，哪些（如果有）查询进入 DB `getOrderpositions()`。请注意，您必须**访问 Set 的内容**，仅调用 getter 不会在延迟加载关联中调用任何数据库查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:09:51.157

默认情况下，OneToMany Fetch Type 是 Lazy。如果要加载此数据，则必须使用 JPQL 语句

```
SELECT t FROM TABLE t JOIN FETCH t.joinedTable 
```

或者您在 OneToMany 映射中到处指定 FetchType.EAGER。但这意味着关系总是被加载。

参见例如： http: [//openjpa.apache.org/builds/1.1.0/docs/jpa_langref.html#jpa_langref_fetch_joins](http://openjpa.apache.org/builds/1.1.0/docs/jpa_langref.html#jpa_langref_fetch_joins)

塞巴斯蒂安

# java - 在 Java 中按列而不是行过滤 JTable

> ID：12796081
> 
> 赞同：1
> 
> 时间：2012-10-09T08:41:39.040
> 
> 标签：java, jtable, jtextfield, rowfilter, tablecolumn

Java中是否有任何实现来按列（标题值）而不是行来过滤JTable（使用搜索JTextField）？我需要根据搜索时找到的字符串显示/隐藏列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:57:22.083

> Java中是否有任何实现来按列（标题值）而不是行来过滤JTable（使用搜索JTextField）？

*   是的，看看[RowFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/RowFilter.html)并应用于所需的列

> 我需要根据搜索时找到的字符串显示/隐藏列。

*   这不是一件容易的工作，因为它需要大量的努力，以及`Java Essential classes`对`Swing`.`JTable`

*   我不会这样，使用适当的`ColumnRender`，然后 Column 应该突出显示，而不是`JTables Column`在屏幕上跳转（隐藏 --> 显示 ---> 隐藏等）

*   有一些关于`RowFilter`,的例子`RowSorter`，从未需要过，从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:47:19.407

您可以使用包装真实模型的自定义[TableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/TableModel.html)实现来进行过滤。只要在列发生变化时继续通知 TableModelListeners。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:11:32.433

我想我已经让它像这样工作了：

为临时表和表模型声明一些全局变量以保存隐藏列：

```
private JTable hiddenTable = new JTable();
private DefaultTableColumnModel hiddenModel = new DefaultTableColumnModel(); 
```

然后对每个按下的键使用过滤方法，将要隐藏的列添加到临时表模型中，同时将它们从主表模型中删除。然后，当字符串匹配时，通过将它们添加回主表并从临时表中删除它们来再次显示它们：

```
private void filterList() {

        // Hide columns
        for (TableColumn column : table.getColumns()) {
            if (!((String) column.getHeaderValue()).toLowerCase().contains(
                    searchBox.getText().toLowerCase().trim())) {
                hiddenModel.addColumn(column);
                table.getColumnModel().removeColumn(column);
            }
        }

        // Show columns
        for (TableColumn column : hiddenTable.getColumns()) {
            if (((String) column.getHeaderValue()).toLowerCase().contains(
                    searchBox.getText().toLowerCase().trim())) {
                table.getColumnModel().addColumn(column);
                hiddenModel.removeColumn(column);
            }
        }
    } 
```

这里唯一的问题是，当重新添加到表中时，列会丢失它们的顺序。

# javascript - 下载即时创建的 img

> ID：12796083
> 
> 赞同：0
> 
> 时间：2012-10-09T08:41:46.090
> 
> 标签：javascript, jquery, download, image, on-the-fly

我使用 jquery 插件创建 img 元素。

我希望能够单击按钮元素并下载 img 元素。

没有 HTML5 有可能吗？

我不存储图像，因为它是由 jquery 动态创建的。

我正在使用这个插件来创建 img：[http ://www.class.pm/files/jquery/jquery.uqr/demo/](http://www.class.pm/files/jquery/jquery.uqr/demo/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:56:16.437

您链接的插件使用的是 Google Charts 中已弃用[的 Google Image Charts 部分](https://developers.google.com/chart/image/)。由于图像来自远程服务器，因此您无法从您的域访问它们（从 JavaScript。当然您可以加载它们）（这将是 XSS 的一种形式）。您可以制作一个 PHP 脚本来下载图表并更改 Content-Type。当客户端请求一个返回带有 Content-Type application/octet-stream 的文档的 PHP 脚本时，下载将开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T21:08:57.900

由于这是来自不同的域，因此您将无法访问图像内容，除非您尝试使用 CORS - 即便如此，浏览器支持也非常有限。请改用[此插件](https://github.com/jeromeetienne/jquery-qrcode)，然后[使用 toDataURL()](http://tutorials.jenkov.com/html5-canvas/todataurl.html)保存它。

# drop-down-menu - 下拉菜单中的 onclick/onchange

> ID：12796085
> 
> 赞同：2
> 
> 时间：2012-10-09T08:41:49.517
> 
> 标签：drop-down-menu, fonts, onclick, onchange

我有这个

```
<h2 id="caption">Hello World</h2>
<select name="font" id="Font">
            <option onClick="document.getElementById('caption').style.fontFamily = 'courier';" value="courier">Courier</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'georgia';" value="georgia" >Georgia</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'palatino';" value="palatino">Palatino Linotype</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'times';" value="times">Times New Roman</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'arial';" value="arial">Arial</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'comic';" value="comic">Comic Sans</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'impact';" value="impact">Impact</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'lucida';" value="lucida">Lucida Console</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'trebuchet';" value="Trebuchet">Trebuchet</option>
            <option onClick="document.getElementById('caption').style.fontFamily = 'tahoma';" value="tahoma">Tahoma</option>
            </select> 
```

这不会改变字体样式，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:04:16.590

下拉选项不响应 onclick()。您需要使用 onchange()。代码是：

```
<h2 id="caption">Hello World</h2>
<select name="font" id="Font" onchange="document.getElementById('caption').style.fontFamily = document.getElementById('Font').value;">
        <option value="courier">Courier</option>
        <option value="georgia" >Georgia</option>
        <option value="palatino">Palatino Linotype</option>
        <option value="times">Times New Roman</option>
        <option value="arial">Arial</option>
        <option value="comic">Comic Sans</option>
        <option value="impact">Impact</option>
        <option value="lucida">Lucida Console</option>
        <option value="trebuchet">Trebuchet</option>
        <option value="tahoma">Tahoma</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T17:26:33.667

```
<div>
    <ul id="ul_tipoItems" style="font-family: <?php echo $tipoItems;?>;">
        <select id="itemsText" name="cmb_tipografiaItems" onchange="javascript:document.getElementById('ul_tipoItems').style.fontfamily=document.getElementById('itemsText').value;">
            <option value="arial" <?php if ($tipoItems == 'arial'){ echo "selected";}?>>Arial</option>
            <option value="courier new" <?php if ($tipoItems == 'courier new'){ echo "selected";}?>>Courier</option>
            <option value="georgia" <?php if ($tipoItems == 'georgia'){ echo "selected";}?>>Georgia</option>
            <option value="times new roman" <?php if ($tipoItems == 'times new roman'){ echo "selected";}?>>Times new roman</option>
            <option value="trebuchet ms" <?php if ($tipoItems == 'trebuchet ms'){ echo "selected";}?>>Trebuchet MS</option>
            <option value="verdana" <?php if ($tipoItems == 'verdana'){ echo "selected";}?>>Verdana</option>
        </select>  << Asi luce un texto con tipografia >>
    </ul>
</div> 
```

# uitableview - 表格视图，需要在控制器顶部添加一个按钮，当您单击添加按钮时。.

> ID：12796086
> 
> 赞同：1
> 
> 时间：2012-10-09T08:41:48.713
> 
> 标签：uitableview

大家好，有一个表格视图，你需要在控制器**顶部添加一个按钮**，当你点击添加按钮**打开表格时，猫可以在单独的控制器**上写，这个信息可以显示在主屏幕上， 我不知道怎么做？

# math - 编译器优化浮点除法

> ID：12796088
> 
> 赞同：2
> 
> 时间：2012-10-09T08:41:54.410
> 
> 标签：math, optimization, division

我正在编写一个函数来影响控件的感觉，发现除以 15.9 是正确的。我的本能是将其更改为除以 16，因为编译器可以将其优化为移位操作。然而，在这种情况下，该值是一个浮点数。浮点除法中有最优除数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:48:38.747

为什么不乘以 0.0628930818 呢？如果除以 15.9 是“大约正确”，那么乘以倒数虽然可能不完全准确到最后一位小数，但仍然是“大约正确”。如果使用一些“许可数学”标志，优化编译器甚至*可能*会自动执行此操作（通常，这是严格不允许的，因为它可能会丢失一些精度）。

无论如何，它比除以 16 更准确。而且，它不像篡改指数位那样是一种黑客行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:11:42.047

将浮点数除以 16 也很容易。您只需将指数减 4。但我认为编译器不会在此处进行任何优化，因为它还必须检查下溢。

需要明确的是：我不建议直接操作指数位。我只是想指出，可能最快的除数`float`也是 2 的幂。

# outlook-addin - 在功能区 xml 中更改内置控件的图像

> ID：12796092
> 
> 赞同：2
> 
> 时间：2012-10-09T08:42:15.273
> 
> 标签：outlook-addin, ribbon-control, ribbonx

我使用功能区 XML 在 Outlook 2010 中创建自定义功能区。在此功能区中，我还使用功能区 XML 创建了一个按钮。此按钮使用内置按钮控件（idMso="NavBack"）。

我的问题：在我这里使用内置按钮控件时，有没有办法覆盖图像？

谢谢。

这是我的代码：

```
<button idMso="NavBack" size="large" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:51:09.183

无法更改内置控件的图像。为了执行我使用的“NavBack”内置控件的内置命令

```
Globals.ThisAddin.Application.ActiveExplorer().CommandBars.ExecuteMso("NavBack") 
```

# php - 谷歌 API PHP listFiles();

> ID：12796093
> 
> 赞同：0
> 
> 时间：2012-10-09T08:42:30.697
> 
> 标签：php, google-drive-api

我有一个小问题，我不确定我是否在这里遗漏了什么。我正在建立一个网站，用户登录并授权谷歌等并将刷新令牌保存在数据库中（工作正常）

我还得到了用户信息（也可以正常工作）。

但是，每当我尝试获取用户拥有的文件列表时，这些项目都会返回 0。我正在使用以下代码：

```
if ($client->getAccessToken()) {
                $drive = new apiDriveService($client);
                $result = $drive->files->listFiles();
                $countArray = count($result['items']) - 1;
                foreach($result['items'] as $i=>$row){
                    $isFirst = ($i == 0);
                    $isLast = ($i == $countArray);

                    $sql = "INSERT INTO docs (title, notecontent, folderid, filestatus, linkhref, useremail) 
                            VALUES (".$row['title'].",".$row['id'].", 2, 1,".$row['alternateLink'].", ".$usernamei.")";
                    $db->query($sql, true);
                }
            } 
```

基本上我要做的是获取用户拥有的文件列表并将它们保存在数据库中。

任何帮助，将不胜感激 ：）

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:42:09.490

删除 $client->accessType 和 $client->useObjects 似乎可以完成这项工作...... :)

# iphone - 段控制位置

> ID：12796095
> 
> 赞同：1
> 
> 时间：2012-10-09T08:42:38.553
> 
> 标签：iphone, ios, uisegmentedcontrol

分段控件无法在垂直方向重新定位位置。它显示在图像中。任何人都可以帮我定位分段控件。

```
 int offset = BAR_OFFSET + 40 * bars.count;
  for (int i = bars.count; i < guessRows; i++)
  {
   UISegmentedControl *bar = [[UISegmentedControl alloc] initWithItems:
     [NSArray arrayWithObjects:@"", @"", @"", nil]];
   bar.segmentedControlStyle = UISegmentedControlStyleBar;
   bar.transform = CGAffineTransformMakeRotation(M_PI_2);
   bar.momentary = YES;
   [bar addTarget:self action:@selector(submitGuess:)
     forControlEvents:UIControlEventValueChanged];
   CGRect frame = bar.frame;
   frame.origin.y = offset; // position it below the last bar
   frame.origin.x = 20; // give it some padding on the left
   [self.view addSubview:bar]; // add the bar to the main view
   [bars addObject:bar];
   [bar release]; 

 } 
```

![在此处输入图像描述](../Images/ec487dd3a4a229836133437c6c632c2b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:01:59.093

您可以编程创建段控制并设置框架以保持段控制位置并将段控制添加到视图控制器，如下所示：-

```
 UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
 segmentedControl.frame = CGRectMake(35, 200, 250, 50);
 segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
 segmentedControl.selectedSegmentIndex = 1;

 [self.view addSubview:segmentedControl]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:52:05.293

问题来自你的`offset`var. 在线：

```
frame.origin.y = offset; // position it below the last bar 
```

更改它的值（增加它以降低视图的位置）并尝试找到正确显示控件的正确值。

# android - 从存储在笔记本电脑上的数据库中读取以进行用户身份验证

> ID：12796100
> 
> 赞同：0
> 
> 时间：2012-10-09T08:43:14.033
> 
> 标签：android, sqlite, authentication, login

我正在构建一个需要用户使用 ID 和密码登录的应用程序。由于我们无法在用户手机上创建数据库来存储所有这些信息（出于安全原因），我正在考虑将数据库存储在笔记本电脑（理想情况下是服务器）上来保存用户详细信息。我希望我的应用程序访问这个数据库（这将在我正在使用的笔记本电脑上）并验证用户？

任何想法或建议如何开始？我不确定如何让应用程序从本地存储的数据库中读取（不是在手机上，而是在内置应用程序的笔记本电脑上）。

最亲切的问候

赛义德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:51:16.667

一种可能的方法是使用 AMPP（Apache、MySQL、PHP、PERL）服务器。将数据库构建为 SQL，并使用 PHP 和 Apache 提供 API 以供手机连接。但一定要使用安全的方式加密或隐藏手机和服务器之间的信息变化（要么加密手机上的数据然后发送，要么使用安全协议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:01:42.370

您的问题措辞不够好，我无法知道这是否是一个好建议，但您可能会查看[OpenID](https://developers.google.com/accounts/docs/OpenID)。

# python - 使用 Python 返回多个值 - Ladon 函数

> ID：12796102
> 
> 赞同：0
> 
> 时间：2012-10-09T08:43:21.093
> 
> 标签：python, ladon

[我们如何使用 Python- Ladon](http://packages.python.org/ladon/ladontype.html)函数返回多个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:59:06.217

您可以通过将它们包装到类中的列表中来返回更多值，该类中用作装饰器中的返回类型`ladonize`。

基于ladon[文档中的示例：](http://packages.python.org/ladon/index.html#example-2)

```
from ladon.ladonizer import ladonize
from ladon.types.ladontype import LadonType

class Response(LadonType):
    values = [int]

class MyService(object):
    @ladonize(int, int, rtype=Response)
    def foo(self, a, b):
        result = Response()
        result.values = [a+b, a*b]
        return result 
```

# jakarta-ee - 这个数字在日志文件中是什么意思？

> ID：12796103
> 
> 赞同：0
> 
> 时间：2012-10-09T08:43:26.287
> 
> 标签：jakarta-ee, log4j, websphere

我想知道这部分是什么`0000002a`意思，日志输出如下所示：

`[2012-10-09 10:37:17:229 CEST] 0000002a EJBContainerI I CNTR0167I：服务器正在绑定 PandoraArendeProcessEJB.jar 模块中 AnstalldDAOImpl 企业 bean 的 se.prv.pandora.ar​​endeprocess.daos.AnstalldDAO 接口PandoraArendeEar 应用程序。绑定位置为：ejblocal:se.prv.pandora.ar​​endeprocess.daos.AnstalldDAO``

我的 log4j 配置是

```
log4j.rootLogger=DEBUG, DATEDFILE, CONSOLE

### direct log messages to stdout ###
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
#log4j.appender.stdout.Target=System.out
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

log4j.appender.DATEDFILE=biz.minaret.log4j.DatedFileAppender
log4j.appender.DATEDFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.DATEDFILE.layout.ConversionPattern=%d [%t] %-5p %c - %m%n
log4j.appender.DATEDFILE.Prefix=arendeprocess.
log4j.appender.DATEDFILE.Suffix=.log
log4j.appender.DATEDFILE.Directory=//localhost/WebsphereLog/PandoraArendeprocess/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:17:58.750

这看起来像标准的 WebSphere 进程日志输出，格式如下；

```
<timestamp><threadId><shortName><eventType>[className][methodName]<textmessage> [parameter 1] [parameter 2] 
```

`0000002a`线程标识符（哪个线程导致输出）也是如此 。其他字段是不言自明的。对于 eventType 检查[这篇文章](https://stackoverflow.com/questions/12739322/what-does-a-logging-indicator-mean-in-websphere)。

# javascript - 在纯 JavaScript 中隐藏/显示元素

> ID：12796111
> 
> 赞同：3
> 
> 时间：2012-10-09T08:44:17.620
> 
> 标签：javascript

我写了几行 jQuery 代码，但不知道如何在纯 JavaScript 中实现这一点。该输出：

```
echo "<tr id='perf_row' class='table_header_tr' name='tr_$row_fio_perf[0]'>
          <td class='table_header_td' name='td_$i'>
          $i
          </td>
      <tr>"; 
```

搜索输入。当用户输入字符时，表行（输出较高）必须隐藏并仅显示与搜索词匹配的内容。

```
<input type="text" onkeyup="showPerformers();" id="ShowSearchPerformers">

  function showPerformers(){      
            var search_login = $('#ShowSearchPerformers').val();
            search_login = search_login.toLowerCase();               
            $('tr[name^=tr_]').hide();
            var search = 'tr[name*=' + search_login+']';
            $(search).show(); 
    } 
```

如何用 JavaScript 而不是 jQuery 编写这个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:05:24.577

我会建议一种不同的方法，但要根据您的代码，而不是使事情过于复杂：

```
<input type="text" onkeyup="showPerformers(this,event);" id="ShowSearchPerformers"> 
```

将输入元素传递给函数会保存 DOM 扫描（`getElementById`或在 jQuery 中`$('#id')`）。给定时间，传递事件对象也可能很有用。

```
function showPerformers(search_login,e)
{
     search_login = search_login.value.toLowerCase();
     var table = document.getElemebtById('YourTblId');
     var row = table.getElementsByTagName('tr');
     var nameSearch = new RegExp('^tr_' + search_login);
     for (var i=0;i<row.length;i++)
     {
         if (row[i].name.substr(0,3) === 'tr_')
         {
             row[i].style.display = '';//make previously hidden rows visible again
             if(!row[i].name.match(nameSearch))
             {//row name starts with tr_, but not tr_[searched number]
                 row[i].style.display = 'none';
             }
         }
     }
} 
```

如果我没记错的话，这应该可以工作，并且可以按照您的预期执行。虽然它确实需要一些微调，但我不想破坏你的乐趣:)。只是一个提示，就目前而言，您不能保证用户输入是数字的：`a`例如，输入会隐藏所有行，并且不显示任何行。您可以通过以下任一方式解决此问题：

```
value.replace(/[^0-9]/g,'');//leaves only numbers
Math.floor(parseFloat(value));//Math.floor(parseFloat(' 123.1s')) --> 123 
```

玩一点，顺便说一句，[这个网站](http://jsfiddle.net)是一个很棒的沙盒，可以存放这样的东西

# mysql - MySQL：如何在特定节点中查找叶子

> ID：12796113
> 
> 赞同：3
> 
> 时间：2012-10-09T08:44:47.440
> 
> 标签：mysql, sql, sql-optimization

我知道这种问题已经在这里发布过很多次了，例如：[Java way](https://stackoverflow.com/questions/10413261/how-to-get-all-leaves-of-given-node-tree-has-only-id-parent)

`id`我在标准树模式（ ，，， ）`parent_id`中有大量数据（150k+ `some_data`）

**问题：**如何获取给定 node_id 的叶子？

表结构：

```
CREATE TABLE `DATA_TREE` (
  `ID` int(11) NOT NULL,
  `PARENT_ID` int(11) NOT NULL,
  `DATA` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID_UNIQUE` (`ID`),
  KEY `fk_DATA_TREE_1_idx` (`PARENT_ID`),
  CONSTRAINT `fk_DATA_TREE_1` FOREIGN KEY (`PARENT_ID`) REFERENCES `DATA_TREE` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf 
```

数据库：`MySQL 5.1.61`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T10:04:16.217

没有办法在单个查询中执行此操作。即使有，也可能效率很低。

我们可以使用存储过程和循环来做到这一点。使用您添加的索引，它也应该很快。这使用两个表从输入表 (A) 中选择节点并将节点及其子节点插入 (B)。然后它将 B 交换为 A，并重复直到 A 中不再存在非叶节点。好消息是循环迭代只会与输入节点和最后一个叶节点之间的级别一样多，在大多数情况下是可能没那么深。这个存储过程会比在代码外部执行它更快。

仅供参考，我在安装处理临时表时遇到了困难，如果您收到“错误 2”，请删除临时关键字。

```
delimiter $$
drop procedure if exists GetLeafNodes $$
create procedure GetLeafNodes(nodeid int)
begin
declare N int default 1;

-- create two working sets of IDs, we'll go back and forth between these two sets
drop temporary table if exists A;
drop temporary table if exists B;
create temporary table A(node int, child int);
create temporary table B(node int, child int);

-- insert our single input node into the working set
insert into A values (null, nodeid);

while (N>0) do
  -- keep selecting child nodes for each node we are now tracking
  -- leaf nodes will end up with the child set to null
  insert into B
  select ifnull(A.child,A.node), tree.ID
    from A
    left outer join DATA_TREE as tree on A.child=tree.parent_id;

  -- now swap A and B
  rename table A to temp, B to A, temp to B;

  -- remove non-leaf nodes from table B
  delete from B;

  -- exit when there are no longer any non-leaf nodes in A
  set N=(select count(*) from A where child is not null);
end while;

-- now output our list of leaf nodes
select node from A;

drop temporary table A;
drop temporary table B;
end $$
DELIMITER ;
call GetLeafNodes(4); 
```

我使用以下样本集进行测试：

```
CREATE TABLE `DATA_TREE` (
  `ID` int(11) NOT NULL,
  `PARENT_ID` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `ID_UNIQUE` (`ID`),
  KEY `fk_DATA_TREE_1_idx` (`PARENT_ID`)
) ENGINE=InnoDB
;

insert into DATA_TREE values
(1,0),(2,1),(3,1),(4,1),(5,3),(6,3),(7,4),(8,4),(9,4),(10,6),(11,6),(12,7),(13,9),(14,9),(15,12),(16,12),(17,12),(18,14); 
```

# java - POI API APACHE 导入到 netbeans

> ID：12796114
> 
> 赞同：3
> 
> 时间：2012-10-09T08:44:49.440
> 
> 标签：java, apache, api, netbeans, apache-poi

我在[这里](https://stackoverflow.com/questions/4989231/java-apache-poi-importing-into-netbeans-6-9)阅读了一些提示，但我仍然不能像这样导入：

```
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.extractor.WordExtractor; 
```

[我已将从此处](http://poi.apache.org/download.html)下载的 zip 文件 (poi-src-3.8-20120326) 添加到我的整洁豆项目中的库中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:00:42.203

解压下载的文件，找到：`poi-3.8-20120326.jar`，打开`NetBeans`项目，找到`Libraries`，右键选择`Add JAR/Folder`，选择，`poi-3.8-20120326.jar`就可以了。当你这样做时，你可以使用来自`poi-3.8-20120326.jar`. 这个 jar 将在您的类路径中。

请注意，在解压缩的目录中还有一个`lib`文件夹，这些是 的依赖`poi`项，请确保您也添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:56:12.297

您将需要类路径上的编译代码。而不仅仅是源代码。通常项目会单独分发这些。

看看使用 maven 自动下载外部项目（如 poi）的依赖项和源代码。

让编译在 netbeans 之外工作。只有在网豆中打开它。

# elisp - 如何按扩展名获取文件列表？

> ID：12796117
> 
> 赞同：4
> 
> 时间：2012-10-09T08:44:53.937
> 
> 标签：elisp

我想获取目录中具有特定扩展名的所有文件的列表，然后将其作为参数传递。如何在 ELisp 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-12T16:45:29.493

不，您不需要任何额外的过滤。 `directory-files`做你想做的***一切***，即包括过滤以匹配扩展名（例如`ext`）：

```
(directory-files DIRECTORY nil "\\.ext$") 
```

见`C-h f directory-files`。对于当前目录，您可以使用：

```
(directory-files default-directory nil "\\.ext$") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:03:02.463

`directory-files`检索目录中的所有文件作为列表。 `remove-if-not`删除与谓词不匹配的列表条目。

```
(require 'cl)
(remove-if-not (lambda (filename) (eq "ext" (file-name-extension filename)))
               (directory-files dir) ) 
```

（我很想避免`(require 'cl)`那里 。http: [//emacswiki.org/emacs/ElispCookbook#toc38](http://emacswiki.org/emacs/ElispCookbook#toc38)有一些提示。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T10:34:54.447

我的经验法则是[`f`](https://github.com/rejeep/f.el)每次在 Elisp 中处理文件和文件路径时都使用库。在这里，您需要[`f-files`](https://github.com/rejeep/f.el#f-files-path-optional-fn-recursive)获取目录中的文件列表并[`f-ext`](https://github.com/rejeep/f.el#f-ext-path)从文件名中提取扩展名。[`-filter`](https://github.com/magnars/dash.el#-filter-pred-list)是列表操作库的`remove-if-not`等价物。[`dash`](https://github.com/magnars/dash.el)因此，您需要的表达式是：

```
(-filter (lambda (x) (equal (f-ext x) "ext")) (f-files "dir")) 
```

使用[照应宏](http://en.wikipedia.org/wiki/Anaphoric_macro)，我们可以通过删除来制作更简洁的表达式`lambda`（约定是使用 2 个破折号作为照应版本）：

```
(--filter (equal (f-ext it) "ext") (f-files "dir")) 
```

但是`f-files`接受已经过滤文件列表的自定义函数，那么为什么不丢弃`-filter`呢？

```
(f-files "dir" (lambda (x) (equal (f-ext x) "ext")))
(f--files "dir" (equal (f-ext x) "ext")) ; anaphoric version 
```

# css - 边框定位：如何？

> ID：12796118
> 
> 赞同：1
> 
> 时间：2012-10-09T08:45:03.077
> 
> 标签：css, positioning, border, border-layout

我想定位边界，但这不起作用。这是CSS：

```
.menu-container {
    border-top: 5px solid #81806E;
    float: left;
    margin: 5px 27px 0 10px;
    width: 704px;
} 
```

问题是这个容器包含菜单链接。所以如果我调整宽度和边距，边框就会随之而来。但我想单独设计它......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:05:17.233

用结果检查示例[设计和代码](http://tinkerbin.com/szSvcea2)，这是你想要的吗？

**HTML：**

```
<div class="menu-container">
      <a class="menu-item" href="#">Menu 1</a>
      <a class="menu-item" href="#">Menu 2</a>
      <a class="menu-item" href="#">Menu 3</a>
      <a class="menu-item" href="#">Menu 4</a>
      <a class="menu-item" href="#">Menu 5</a>
    </div> 
```

**CSS：**

```
.menu-container {
    float: left;
    margin: 5px 27px 0 10px;
    width: 704px;
}
.menu-item{
  float:left;
  height:20px;
  margin-right:3px;
  border-top: 5px solid #81806E;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:17:45.583

只需使用 ap 标签或 span 来列出菜单项。您想在不移动边框的情况下移动带有边距的内容？？？。

您必须尝试将 .menu-container 的内容放在其他一些标签中，这样您的问题就会得到纠正。

# java - 让 gwt-syntaxhighlighter 工作

> ID：12796121
> 
> 赞同：2
> 
> 时间：2012-10-09T08:45:06.773
> 
> 标签：java, gwt, syntaxhighlighter

我一直在努力让 Syntaxhighlighter 的 GWT 包装器工作。我从[http://code.google.com/p/gwt-syntaxhighlighter/](http://code.google.com/p/gwt-syntaxhighlighter/)得到了这些库，但它们似乎都没有工作。我开始怀疑是否是我对使用外部库的理解如此糟糕，或者它是否确实构建了糟糕的 JAR。有没有人设法使用这个？gwt-syntaxhighlighter-1.1.1-gwt-standard.jar 应该是我运行它所需的全部，缺少源和 Highlighter.gwt.xml 文件。通过结合其他 JAR 的内容（[http://cl.ly/K1N4](http://cl.ly/K1N4)），我设法得到了以下异常，我现在陷入了困境：

[http://www.pastit.dotcloud.com/131](http://www.pastit.dotcloud.com/131)

我的设置如下：我的构建路径上有自定义构建的 jar。我的 MainPage.gwt.xml 包含以下行：

`<inherits name='com.alexgorbatchev.syntaxhighlighter.Highlighter'/>`

在我的代码的某处，我执行以下操作：

```
final Highlighter highlighter = new Highlighter(Brushes.XML());
highlighter.setText(xml);
final VerticalPanel xmlPanel = new VerticalPanel();
xmlPanel.add(highlighter); 
```

一旦达到上述行，就会抛出我提供的异常。非常感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T18:03:29.770

我也尝试使用 gwt-syntaxhighlighter，但由于缺乏文档，我更喜欢围绕 JavaScript 解决方案编写一个包装器。

[我在http://alexgorbatchev.com/SyntaxHighlighter/download/](http://alexgorbatchev.com/SyntaxHighlighter/download/)下载了最新版本的 .js 文件。

然后在与“client”（不在）文件夹相同级别创建一个名为“public”的文件夹，并从 zip 文件中添加“script”和“style”。

然后我在我的项目 *.gwt.xml 中包含了我的所有需求

```
<!-- Base CSS SyntaxHighlighter -->
<stylesheet src="styles/shCore.css"/>

<!-- Eclipse Syntax Theme -->
<stylesheet src="styles/shThemeEclipse.css"/>

<!-- Base JS SyntaxHighlighter -->
<script src="scripts/shCore.js"/>

<!-- Extension for each wanted language to support -->
<script src="scripts/shBrushJava.js"/>
<script src="scripts/shBrushXml.js"/> 
```

然后我创建了一个刷子工厂

```
public class BrushFactory {
    public native JavaScriptObject newJavaBrush() /*-{
        return new $wnd.SyntaxHighlighter.brushes.Java();
    }-*/;

    public native JavaScriptObject newXmlBrush() /*-{
        return new $wnd.SyntaxHighlighter.brushes.Xml();
    }-*/;
} 
```

这是一个 JSNI 类，它使用 SyntaxHighlighter 实现从字符串到 HTML 语法格式字符串的转换。

```
public class SyntaxHighlighter {
    public static native String highlight(String code, JavaScriptObject brush, boolean toolbar) /*-{
        var params = {};
        params['toolbar'] = toolbar;
        brush.init(params);
        return brush.getHtml(code);
    }-*/;
} 
```

最后，我使用 GWT 中的 HTML 小部件输出字符串。

```
String htmlCode = SyntaxHighlighter.highlight("YOUR_CODE_HERE", BrushFactory.newJavaBrush(), false);
HTML html = new HTML();
html.setHTML(htmlCode); 
```

我使用它，它就像一个魅力。此解决方案是使用该库的最简单、最快捷的方式。

# java - SQL 语句中的错误

> ID：12796122
> 
> 赞同：1
> 
> 时间：2012-10-09T08:45:10.390
> 
> 标签：java, mysql

我试图找出这个错误：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '% ORDER BY t1.nombre_cuenta ASC' 附近使用正确的语法

它在哪里？。非常感谢：

```
public Tdatoscuentas[] consultarCuentas(int id_tipo_cuenta){  //Acabar método para login

    Tdatoscuentas[] params = null; 

    try {
        this.conexion=conectar();
        System.out.println("Vamos a usar el id tipo cuenta:"+id_tipo_cuenta);
        int id_tipo_cuenta_padre=id_tipo_cuenta-1;
        //System.out.println();

        SQL="SELECT t1.id_cuenta as id_cuenta,"+     
                "t1.n_cuenta as n_cuenta,"+
           "SUBSTRING_INDEX(t1.n_cuenta,'.',"+id_tipo_cuenta_padre+") as n_cuenta_padre,"+
           "t1.nombre_cuenta as nombre,"+         
           "(SELECT tt1.cif"+
           "  FROM cuentas_rs tt1"+
            " WHERE tt1.id_cuenta = t1.id_cuenta"+
            " ORDER BY tt1.f_inicio DESC "+
            " LIMIT 1) as cif,"+                          
            "(SELECT tt2.porcentaje "+
            " FROM impuestos tt2"+
            " WHERE tt2.id_pais = (SELECT tt1.cif"+
            "                     FROM cuentas_rs tt1"+
            "                     WHERE tt1.id_cuenta = t1.id_cuenta"+
            "                     ORDER BY tt1.f_inicio DESC"+
            "                     LIMIT 1)"+
            " ORDER BY tt2.f_inicio DESC "+
            "LIMIT 1)  as impuesto,"+
           "t1.descuento as descuento,"+      
           "t1.id_tipo_cuenta as nivel,"+          
           "t1.borrado  as borrado,"+        
           "t1.cod_cliente as cod_cliente "+     
           "FROM cuentas t1 "+
           "LEFT OUTER JOIN cuentas_rs t2 ON t2.id_cuenta = t1.id_cuenta"+ 
           " WHERE t1.id_esquema_asociado = 1"+  
           " AND t1.id_proveedor_cloud = 1"+
           " AND SUBSTRING(t1.n_cuenta,1,LENGTH(001.00001))"+
           " AND t1.id_tipo_cuenta =("+id_tipo_cuenta+")"+
           " AND t1.borrado = false"+         
           " AND t1.nombre_cuenta LIKE %" +         
           " ORDER BY t1.nombre_cuenta ASC";

        System.out.println("La consulta de SQL para consultar Cuentas es:"+SQL);
        this.pstm     = this.conexion.prepareStatement(SQL);

        this.rs =  pstm.executeQuery();

        this.rs.last(); 
        int numRows = this.rs.getRow(); 
        this.rs.beforeFirst();
        System.out.println("Vamos a hacer:"+numRows);
        params = new Tdatoscuentas[numRows];

        int i=0;
         while(this.rs.next()){
             params[i] = new Tdatoscuentas();
                params[i].setId_cuenta(this.rs.getInt("id_cuenta"));
                params[i].setN_cuenta(this.rs.getString("n_cuenta"));
                params[i].setN_cuenta_padre(this.rs.getString("n_cuenta_padre"));
                params[i].setNombre_cuenta(this.rs.getString("nombre"));
                params[i].setCif(this.rs.getString("cif"));
                params[i].setImpuesto(this.rs.getDouble("impuesto"));
                params[i].setDescuento(this.rs.getDouble("descuento"));
                params[i].setNivel(this.rs.getInt("nivel"));
                params[i].setBorrado(this.rs.getBoolean("borrado"));
                params[i].setCod_cliente(this.rs.getString("cod_cliente"));

            i++;        

            }
         System.out.println("params tiene una long de"+params.length);
         return params;  
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return params;  

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:46:02.637

它在队列中`" AND t1.nombre_cuenta LIKE %" +`

我还建议`preparestatement`您在将其发布到野外之前阅读有关如何设计工作的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:46:29.923

是这里：

```
...
AND t1.nombre_cuenta LIKE %" +  <---------- It is here       
           " ORDER BY t1.nombre_cuenta ASC
... 
```

您必须在 之后添加要匹配的字符串，`%`并且必须将其引用为：`Like '%somevalue'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:49:46.463

查看有关[模式匹配](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)的文档。

改变

> " AND t1.nombre_cuenta LIKE %" +

进入

> " AND t1.nombre_cuenta LIKE '%'" +

我还支持@podiluska 的建议，即研究在您的查询中使用绑定变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:48:01.143

首先你的 % 应该是这样的 '%'

```
" AND t1.nombre_cuenta LIKE '%'" + 
```

# asp.net-mvc-3 - 推特引导 mvc3 崩溃

> ID：12796125
> 
> 赞同：0
> 
> 时间：2012-10-09T08:45:17.227
> 
> 标签：asp.net-mvc-3, twitter-bootstrap

我在这个 fidel[工作](http://jsfiddle.net/miko5054/YWUmb/119/)示例中遇到了 TB 和 MVC3 的有线问题，它使用 TB v2.0.2

但在我的 mvc3 项目中，我使用 TB v2.1.1 并且崩溃不起作用......

这是所有脚本参考

```
<html>
<head>
<meta charset="utf-8" />
<title>MainSearch</title>
<script src="/Scripts/jquery-1.8.1.min.js" type="text/javascript"></script>
<link href="/Content/Site.css" rel="stylesheet" type="text/css" />
<link href="/Content/datepicker/css/datepicker.css" rel="stylesheet" type="text/css" />
<link href="/Content/DataTables/media/css/DT_bootstrap.css" rel="stylesheet" type="text/css" />
<link href="/Content/boostrap/css/bootstrap.css" rel="stylesheet" type="text/css" />
<script src="/Scripts/modernizr-2.6.2.js" type="text/javascript"></script>
<script src="/Scripts/DataTable.js" type="text/javascript"></script>
<script src="/Scripts/jQuery.dataTables.min.js" type="text/javascript"></script>
<script src="/Scripts/DataTable.js" type="text/javascript"></script>
<script src="/Scripts/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="/Scripts/bootstrap-collapse.js" type="text/javascript"></script>
<script src="/Scripts/bootstrap.js" type="text/javascript"></script>
<script src="/Scripts/DT_bootstrap.js" type="text/javascript"></script>
 </head> 
```

谢谢

三木

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:05:51.097

我通过更改 JS/CSS**顺序解决了它**

我想最好的做法应该是 JQUERY 应该比 Main bootstrap Js 先于其他 bootstrap Js 扩展

```
<script src="@Url.Content("~/Scripts/jquery-1.8.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/bootstrap.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/bootstrap-collapse.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/datepicker/css/datepicker.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/boostrap/css/bootstrap.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/modernizr-2.6.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DataTable.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jQuery.dataTables.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DataTable.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/bootstrap-datepicker.js")" type="text/javascript"></script> 
```

# android - IP 自动发现

> ID：12796135
> 
> 赞同：2
> 
> 时间：2012-10-09T08:45:41.280
> 
> 标签：android, networking, ip, autodiscovery

我必须联网设备： 1\. 服务器（可变 IP）需要接收字符串以获取更多内容（例如 Socket 9999）。该服务器还有另一个套接字（例如 8888），它在配对时发送它的设备名称。2.客户端（可变IP）**不**知道服务器的IP，但想向他发送字符串。

在 IP C 网络上，我可以遍历最后一个八位字节 (0..255) 并检查 Socket 8888 是否传输了一些东西。但在 A 和 B 网络上，我没有机会。有没有其他解决方案？（我可以遍历所有四个八位字节，但这不是一个优雅的解决方案）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:13:05.567

如果他们在同一个局域网中，最合适的方法是：

*   客户端向特定端口发送 UDP 广播并匹配网络类（A、B、C）
*   服务器正在侦听此端口，接收广播数据包并将其 IP 连接或发送到客户端。

只需两个网络数据包，您就知道 IP 地址。

--已编辑--

广播：

```
InetAddress broadcastAddr = SharedFunctions.getNetworkLocalBroadcastAddressdAsInetAddress();

    DatagramSocket socket = null;
    try {
        socket = new DatagramSocket();
        socket.setBroadcast(true);
        System.arraycopy(BROADCAST_SIGNATURE, 0, buffSend, 0, BROADCAST_SIGNATURE.length);
        DatagramPacket packet = new DatagramPacket(buffSend, buffSend.length, broadcastAddr, BROADCAST_PORT);
        socket.send(packet);
    } catch (Exception e) {
        e.printStackTrace();
        if(socket != null) try {socket.close();} catch (Exception e1) {}
    }

public static InetAddress getNetworkLocalBroadcastAddressdAsInetAddress() throws IOException {
    for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
        NetworkInterface intf = en.nextElement();
        if(VERSION.SDK_INT < 9) { 
            if(!intf.getInetAddresses().nextElement().isLoopbackAddress()){
                byte[] quads = intf.getInetAddresses().nextElement().getAddress();
                quads[0] = (byte)255;
                return InetAddress.getByAddress(quads);
            }
        }else{
            if(!intf.isLoopback()){
                List<InterfaceAddress> intfaddrs = intf.getInterfaceAddresses();
                return intfaddrs.get(0).getBroadcast(); //return first IP address
            }
        }
    }
    return null;
} 
```

接收广播：

```
 try {
            socketReceiver = new DatagramSocket(BROADCAST_PORT);
            socketReceiver.setBroadcast(true);
            DatagramPacket packet = new DatagramPacket(buffRecv, buffRecv.length);
            while(Thread.currentThread() == cThreadReceiver){
                socketReceiver.receive(packet);
                //here you receive the packet and can check the sender IP address
            }
        } catch (Exception e) {
            e.printStackTrace();
            if(socketReceiver != null) try {socketReceiver.close();} catch (Exception e1) {}
        } 
```

您将需要进行一些编辑，但应该让您走上正确的道路。

# android - 制作自定义列表视图

> ID：12796137
> 
> 赞同：0
> 
> 时间：2012-10-09T08:45:52.980
> 
> 标签：android

我将`ListView`使用安装在 Android 设备上的应用程序的图标和标签进行自定义我编写了一些代码，但我不知道为什么当我运行应用程序时我`ListView`是空的，这里是代码：

```
public class MainActivity extends Activity {

ArrayList<String> AppLabel = new ArrayList<String>();
ArrayList<Drawable> AppIcon = new ArrayList<Drawable>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final ListView MyListView = (android.widget.ListView) findViewById(R.id.listView1);
    EditText MyEditText = (android.widget.EditText) findViewById(R.id.textView1);
    CustomAdapter Adapter = new CustomAdapter(this, android.R.layout.simple_list_item_multiple_choice,
    MyEditText, AppLabel);
    MyListView.setAdapter(Adapter);

   PackageManager pm = this.getPackageManager();
   List<ApplicationInfo> apps = pm.getInstalledApplications(0);

    for(ApplicationInfo app : apps) {

    String Label = (String)pm.getApplicationLabel(app);
    AppLabel.add(Label);

    Drawable Icon = pm.getApplicationIcon(app);     
    AppIcon.add(Icon);
       }//End for

    Adapter.notifyDataSetChanged();

}//end onCreate

class CustomAdapter extends ArrayAdapter<string>{
public CustomAdapter(Context context, int resource,
            EditText myEditText, ArrayList<String> appLabel) {
        super(context, resource);
        }
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if (row==null) {
        LayoutInflater Inflater = getLayoutInflater();
        row = Inflater.inflate(R.layout.item_layout, parent, false);    
    }//End if
    EditText MyEditText = (android.widget.EditText) findViewById(R.id.textView1);
    MyEditText.setText(AppLabel.get(position));
    ImageView MyImageView = (ImageView) findViewById(R.id.imageView1);
    MyImageView.setImageDrawable(AppIcon.get(position));
    return (row);
    }//End get view
  }//End CustomAdapter Class

 }//end Main Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:50:53.060

从视图 converView 中获取参考

```
EditText MyEditText = (android.widget.EditText)converView.findViewById(R.id.textView1);
MyEditText.setText(AppLabel.get(position));
ImageView MyImageView = (ImageView)converView.findViewById(R.id.imageView1);
MyImageView.setImageDrawable(AppIcon.get(position)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:48:19.657

使用您的数组列表的大小将 getCount() 添加到您的自定义适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:57:15.917

到这里

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

# python - 在红帽上安装 SciPy

> ID：12796138
> 
> 赞同：0
> 
> 时间：2012-10-09T08:45:54.463
> 
> 标签：python, scipy, redhat, f2py

我正在尝试在 Red Hat Enterprise Linux Server 6.3 版上安装 SciPy 包。然而，它失败了。

我使用的 Python 版本是 2.6，但它似乎需要 2.4。是否有其他与 2.6 兼容的 SciPy 版本？如果需要 2.4，关于如何获得它的任何建议？我按照[python 网页上的说明进行操作，](http://www.python.org/download/releases/2.4/rpms/)但它们似乎已经过时了。它还需要 f2py，我不确定如何获得。

有什么更容易安装的建议吗？我一直按照[这里](http://www.scipy.org/Installing_SciPy/Linux#head-56d0191156a976f8d8b4e97a370044015abd8529)的说明进行操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:55:42.530

启用 EPEL 存储库：[https ://fedoraproject.org/wiki/EPEL](https://fedoraproject.org/wiki/EPEL)

之后，只需“yum install scipy”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T02:58:06.613

我能够通过下载最新版本的 NumPy 来解决这个问题（从源代码构建和安装它，因为 Red Hat 包管理器上的版本已经过时），然后安装 scipy（通过 setup.py scipy 文件我已下载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:18:01.310

在 RHEL 5 上从 setup.py 安装 SciPy 时遇到的一个问题是未定义的 _gfortran 符号。

我发现这是由于使用的 FORTRAN 编译器不匹配——我使用 gfortran 编译器构建 ATLAS/BLAS 库，但使用 g77 编译器构建 SciPy

如果您遇到此问题，请通过指定与安装程序一起使用的 FORTRAN 版本来修复它。就我而言，要使用 gfortran 编译器：

```
python setup.py build --fcompiler=gnu95 --force 
```

--force 标志对于使用错误的编译器更正构建是必要的。

要列出可用的 FORTRAN 编译器，请使用：

```
python setup.py build --help-fcompiler 
```

之后，

```
python setup.py install 
```

照常。

# macos - 如何从命令行（MacOS）列出 AFP 共享？

> ID：12796142
> 
> 赞同：7
> 
> 时间：2012-10-09T08:46:15.883
> 
> 标签：macos, networking, terminal, afp

在命令行中，我需要列出本地网络上给定服务器上所有可用的 AFP 共享。

我可以浏览提供 AFP 的可用服务器，如下所示：

```
iMac:bin me$ dns-sd -B _afpovertcp._tcp
Browsing for _afpovertcp._tcp
Timestamp     A/R Flags if Domain                    Service Type              Instance Name
10:36:36.531  Add     3  4 local.                    _afpovertcp._tcp.         iMac
10:36:36.547  Add     3  5 local.                    _afpovertcp._tcp.         iMac
10:36:36.547  Add     3  4 local.                    _afpovertcp._tcp.         box
10:36:36.547  Add     2  5 local.                    _afpovertcp._tcp.         box
^C 
```

现在我想知道“iMac”中有哪些共享可用（当您在“共享”左栏视图中单击服务器图标时，Finder 显示的共享）？

PS我已经找到了很多关于这个的线程（[here](https://superuser.com/questions/376914/how-to-list-network-shared-items-in-terminal)和[here](https://stackoverflow.com/questions/2379413/can-i-use-bonjour-from-command-line)），但是对于这个特定的主题没有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-20T22:02:30.780

看看这个：

[https://nmap.org/nsedoc/scripts/afp-showmount.html](https://nmap.org/nsedoc/scripts/afp-showmount.html)

我可以通过 nmap 获取有关可用 afp-shares 的信息...

我的命令：

nmap -p 548 --script afp-showmount --script-args afp.username= *yourusername* ,afp.password= *yourpassword* *yourserveraddress*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-24T18:05:34.930

我最终在这里寻找这个答案：

```
sudo sharing -l 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T23:14:36.497

好吧，要么你想要挂载的 afp 共享列表，然后你可以发出一个挂载命令，你会得到类似的东西：

```
//someUser@someServer._afpovertcp._tcp.local/path on /Volumes/path (afpfs, nodev, nosuid, mounted by someUser) 
```

或者您想知道哪些共享可用于挂载……不幸的是，这并不容易，因为您首先需要以用户身份登录以列出可供您挂载的可用共享。不同的用户可能会看到同一服务器的不同共享。

# dynamics-crm-2011 - 如何使用插件，crm 2011 从多个实体中检索数据

> ID：12796145
> 
> 赞同：0
> 
> 时间：2012-10-09T08:46:23.190
> 
> 标签：dynamics-crm-2011

大家好，我如何使用插件从 crm 2011 中的多个实体获取数据。我能够从一个实体中检索数据并将其存储在另一个实体中。但是我如何从多个实体中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:38:03.750

取决于数据。如果它是两个完全独立的记录，没有关系，例如任务和主题，您将不得不执行单独的查询

如果数据是链接的，例如联系人和相关任务，那么您可以在单个查询中获取它们。

如果您使用的是 REST 端点，有几种不同的方法可以做到这一点，[FetchXml、QueryExpression 和 Linq](http://msdn.microsoft.com/en-us/library/gg334607.aspx)或[OData 。](http://msdn.microsoft.com/en-us/library/gg334279.aspx)一切都有效，只取决于你在做什么以及从哪里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:20:15.780

如果有 2 个或 3 个实体，合乎逻辑的方法是对每个实体进行单独检索。如果有连接并且需要几个相关字段，则可以使用 fetchxml。

# c# - C# 中的 System.Threading.Timer 似乎无法正常工作。它每 3 秒运行一次非常快

> ID：12796148
> 
> 赞同：114
> 
> 时间：2012-10-09T08:46:28.880
> 
> 标签：c#, .net, timer

我有一个计时器对象。我希望它每分钟运行一次。具体来说，它应该运行一个`OnCallBack`方法并在`OnCallBack`方法运行时变得不活动。一旦一个`OnCallBack`方法完成，它（a `OnCallBack`）重新启动一个计时器。

这是我现在所拥有的：

```
private static Timer timer;

private static void Main()
{
    timer = new Timer(_ => OnCallBack(), null, 0, 1000 * 10); //every 10 seconds
    Console.ReadLine();
}

private static void OnCallBack()
{
    timer.Change(Timeout.Infinite, Timeout.Infinite); //stops the timer
    Thread.Sleep(3000); //doing some long operation
    timer.Change(0, 1000 * 10);  //restarts the timer
} 
```

但是，它似乎不起作用。它每 3 秒运行一次非常快。即使如果提高一个周期（1000 * 10）。似乎对它视而不见`1000 * 10`

我做错了什么？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-10-09T09:54:35.833

这不是 System.Threading.Timer 的正确用法。实例化 Timer 时，几乎总是应该执行以下操作：

```
_timer = new Timer( Callback, null, TIME_INTERVAL_IN_MILLISECONDS, Timeout.Infinite ); 
```

这将指示计时器在间隔过去后仅滴答一次。然后在您的回调函数中，您在工作完成后更改计时器，而不是之前。例子：

```
private void Callback( Object state )
{
    // Long running operation
   _timer.Change( TIME_INTERVAL_IN_MILLISECONDS, Timeout.Infinite );
} 
```

因此不需要锁定机制，因为没有并发性。计时器将在下一个间隔过去 + 长时间运行操作的时间后触发下一个回调。

如果您需要在 N 毫秒内运行计时器，那么我建议您使用 Stopwatch 测量长时间运行操作的时间，然后适当地调用 Change 方法：

```
private void Callback( Object state )
{
   Stopwatch watch = new Stopwatch();

   watch.Start();
   // Long running operation

   _timer.Change( Math.Max( 0, TIME_INTERVAL_IN_MILLISECONDS - watch.ElapsedMilliseconds ), Timeout.Infinite );
} 
```

* * *

我**强烈**鼓励任何做 .NET 并且正在使用 CLR 的人，如果他们没有读过 Jeffrey Richter 的书 - **CLR via C#**，请尽快阅读。定时器和线程池在那里有非常详细的解释。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-09T08:52:15.970

没有必要停止计时器，[从这篇文章中看到很好的解决方案](https://stackoverflow.com/questions/1699543/stopping-timer-in-its-callback-method)：

“您可以让计时器继续触发回调方法，但将不可重入代码包装在 Monitor.TryEnter/Exit 中。在这种情况下无需停止/重新启动计时器；重叠调用不会获得锁并立即返回。”

```
private void CreatorLoop(object state) 
 {
   if (Monitor.TryEnter(lockObject))
   {
     try
     {
       // Work here
     }
     finally
     {
       Monitor.Exit(lockObject);
     }
   }
 } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-09T09:22:32.597

`System.Threading.Timer`是否强制使用？

如果没有，`System.Timers.Timer`有方便的`Start()`和`Stop()`方法（以及`AutoReset`可以设置为 false 的属性，这样`Stop()`就不需要了，您只需`Start()`在执行后调用）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-09T08:53:50.717

我会这样做：

```
private static Timer timer;
 private static void Main()
 {
   timer = new Timer(_ => OnCallBack(), null, 1000 * 10,Timeout.Infinite); //in 10 seconds
   Console.ReadLine();
 }

  private static void OnCallBack()
  {
    timer.Dispose();
    Thread.Sleep(3000); //doing some long operation
    timer = new Timer(_ => OnCallBack(), null, 1000 * 10,Timeout.Infinite); //in 10 seconds
  } 
```

并忽略 period 参数，因为您正在尝试自己控制周期。

* * *

您的原始代码正在尽可能快地运行，因为您一直在指定`0`参数`dueTime`。来自[`Timer.Change`](http://msdn.microsoft.com/en-us/library/yz1c7148.aspx)：

> 如果dueTime 为零(0)，则立即调用回调方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-20T15:42:56.033

```
 var span = TimeSpan.FromMinutes(2);
 var t = Task.Factory.StartNew(async delegate / () =>
   {
        this.SomeAsync();
        await Task.Delay(span, source.Token);
  }, source.Token, TaskCreationOptions.LongRunning, TaskScheduler.Default);

source.Cancel(true/or not);

// or use ThreadPool(whit defaul options thread) like this
Task.Start(()=>{...}), source.Token) 
```

如果你喜欢在里面使用一些循环线程......

```
public async void RunForestRun(CancellationToken token)
{
  var t = await Task.Factory.StartNew(async delegate
   {
       while (true)
       {
           await Task.Delay(TimeSpan.FromSeconds(1), token)
                 .ContinueWith(task => { Console.WriteLine("End delay"); });
           this.PrintConsole(1);
        }
    }, token) // drop thread options to default values;
}

// And somewhere there
source.Cancel();
//or
token.ThrowIfCancellationRequested(); // try/ catch block requred. 
```

# jsf - Jsf PrimeFaces。渲染响应期间出错。p:命令按钮

> ID：12796150
> 
> 赞同：0
> 
> 时间：2012-10-09T08:46:29.923
> 
> 标签：jsf, primefaces, javabeans, myfaces

我开始在 Hibernate 项目上将 JSF 与 primefaces 库一起使用。我尝试使用向导组件来管理表单，但是当我单击向导中的任何按钮时，我收到以下警告并且未调用操作侦听器。

我认为问题在于，在向导中有一些 p:commandButton，因为当我使用 h:commandButton 时，一切正常。有人可以解释一下primefaces commandButton与标准的不同吗？我怎么能面对这个问题？渲染过程有什么不同？

谢谢你的帮助！这是警告：

```
9-ott-2012 9.50.43 org.apache.myfaces.trinidadinternal.context.PartialViewContextImpl getPartialResponseWriter
AVVERTENZA: getPartialResponseWriter() called during render_reponse. The returned writer is not integrated with PPRResponseWriter 
```

这是页面的代码：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">

<h:head>

<h:outputScript name="jsf.js" library="javax.faces" target="head" />
</h:head>

<h:body>

    <p:growl id="growl" showDetail="true" sticky="true" />

    <h:form>

    <p:wizard widgetVar="wiz"  
        flowListener="#{traduttoreBean.onFlowProcess}"> 

        <p:tab id="personali" title="Info Personali">  

        <p:panel header="Informazioni Personali">  

            <h:messages errorClass="error"/>  

            <h:panelGrid columns="2" columnClasses="label, value" styleClass="grid">  
                <h:outputText value="Nome: *" />  
                <p:inputText required="true" label="Nome"  
                        value="#{traduttoreBean.info.nome}" />  

                <h:outputText value="Cognome: *" />  
                <p:inputText required="true" label="cognome"  
                        value="#{traduttoreBean.info.cognome}" />

            </h:panelGrid>  

        </p:panel>  
    </p:tab>

    <p:tab id="confirm" title="Confirmation">  
        <p:panel header="Confirmation">  

            <h:panelGrid id="confirmation" columns="6">  
                <h:outputText value="Nome: " />  
                <h:outputText styleClass="outputLabel"  
                            value="#{traduttoreBean.info.nome}" />  

                <h:outputText value="Cognome: " />  
                <h:outputText  styleClass="outputLabel"  
                            value="#{traduttoreBean.info.cognome}" />  

                <h:outputText />  
            </h:panelGrid>  

           <p:commandButton value="Submit" update="growl" action="#{traduttoreBean.save}" ></p:commandButton> 

        </p:panel>  
    </p:tab>  

    </p:wizard> 
      </h:form> 

</h:body>
</html> 
```

关联的bean：

```
public class TraduttoreBean implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;

private Traduttore traduttore;
private InfoTraduttore info;

public TraduttoreBean(){

    this.traduttore=new Traduttore();
    this.info= new InfoTraduttore();
    this.info.setTraduttore(traduttore);

}

public void save(ActionEvent actionEvent) {  

    PersistenzaUtenti pu= PersistenzaUtenti.getInstance();
    PersistenzaInfoTraduttori pi= PersistenzaInfoTraduttori.getInstance();

    try {
        pu.insert(traduttore);
        pi.insert(info);
    } catch (Exception e) {

    }

    FacesMessage msg = new FacesMessage("Successful", "Welcome :" + info.getNome());  
    FacesContext.getCurrentInstance().addMessage(null, msg);  

}  

public String onFlowProcess(FlowEvent event) {  

        return event.getNewStep();  

} 

public Traduttore getTraduttore() {
    return traduttore;
}

public void setTraduttore(Traduttore traduttore) {
    this.traduttore = traduttore;
}

public InfoTraduttore getInfo() {
    return info;
}

public void setInfo(InfoTraduttore info) {
    this.info = info;
}

} 
```

对于 bean 的声明，我已经尝试使用注释 @Managed bean 和 faces-config 文件。这是我的定义：

```
<managed-bean>
    <managed-bean-name>traduttoreBean</managed-bean-name>
    <managed-bean-class>guiBeans.TraduttoreBean</managed-bean-class>
    <managed-bean-scope>view</managed-bean-scope>
</managed-bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-21T11:43:06.750

评论提供的答案：

> 问题是特立尼达图书馆与 Primefaces 发生冲突。解决了删除特立尼达图书馆的问题。

# c# - 如何在 c# 中使用 Object.GetHashCode() 比较两个巨大的字节 [] 数组？

> ID：12796154
> 
> 赞同：0
> 
> 时间：2012-10-09T08:47:19.157
> 
> 标签：c#, arrays

我不太明白为什么`Object.GetHashCode()`为两个相同的字节数组返回不同的值，但为非`IEnumerable`值类型的对象返回相同的值。例如：

```
byte e = 123;
Console.WriteLine(e.GetHashCode());

byte f = 123;
Console.WriteLine(f.GetHashCode()); 
```

输出是

```
123
123 
```

但当

```
byte[] a = new byte[3] { 1, 2, 3 };
Console.WriteLine(a.GetHashCode());

byte[] b = new byte[3] { 1, 2, 3 };
Console.WriteLine(b.GetHashCode()); 
```

输出是

```
46104728
12289376 
```

为什么会这样，如何在不比较每个元素的情况下快速比较两个巨大的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:50:34.527

`GetHashCode`没有为数组类型定义 - 您必须实现自己的哈希算法。

您看到的值实际上基于基础引用，因此两个相同的数组将始终具有不同的哈希码，除非它们是相同的引用。

对于 32 位或更少的整数类型，哈希码等于转换为 32 位整数的值。对于 64 位整数类型，`Int64`高 32 位与低 32 位进行异或运算（那里也有移位）作为哈希码。

因此，在尝试“快速”比较两个数组时，您必须自己动手。

您可以首先使用逻辑检查 - 长度相等，以相同的字节值开始和结束等。然后您可以选择 - 逐字节读取并比较值（或者您可以一次读取 4 或 8 个字节并且使用`BitConverter`将字节块转换为`Int32`或`Int64`生成一对*可能*更快地检查相等性的值）或使用通用哈希函数来很好地猜测相等性。

为此，您可以使用 MD5 哈希 - 使用 MD5 输出哈希非常快：[如何在 C# 中从字节数组生成哈希码？](https://stackoverflow.com/questions/16340/how-do-i-generate-a-hashcode-from-a-byte-array-in-c-sharp).

从这样的散列函数中获取两个相同的散列值并不能*保证*相等，但一般来说，如果您在同一数据“空间”内比较字节数组，则不应发生冲突。我的意思是，一般来说，相同类型的不同数据的示例几乎总是会产生不同的哈希值。网上关于这方面的内容比我有资格解释的要多得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:10:03.473

```
尝试使用 SHA1CryptoServiceProvider.ComputeHash 方法？
它需要一个字节数组并返回一个相同的 SHA1 哈希
对于字节数组。性能很好。字符串字节1哈希；
字符串字节2哈希；

使用 (SHA1CryptoServiceProvider sha1 = new SHA1CryptoServiceProvider())
{
     byte1hash=Convert.ToBase64String(sha1.ComputeHash(byteArray1));
     byte2hash=Convert.ToBase64String(sha1.ComputeHash(byteArray2));

}
if (string.Equals(byte1hash, byte2hash))
{
    //状态字节数组是相同的..
}

如果您不担心安全性，那么您可以选择 MD5

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:49:54.793

默认情况下，对于引用类型，GetHashCode 是根据引用而不是对象的内容计算哈希码。

我认为你运气不好，要计算数组的哈希码，你需要至少检查一次数组的内容

# django - 如何在 Django 中重置管理员密码

> ID：12796155
> 
> 赞同：5
> 
> 时间：2012-10-09T08:47:20.987
> 
> 标签：django, django-admin

> **可能重复：**
> [如何重置 django 管理员密码？](https://stackoverflow.com/questions/6358030/how-to-reset-django-admin-password)

我曾在本地服务器上为 Django 项目工作过。当前更新需要在 Web 服务器上修复。但无法匹配管理员凭据。那么如何重置管理员密码...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T09:11:23.557

假设您知道超级用户的名称：[`django-admin.py changepassword`](https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-changepassword)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T08:48:50.217

在服务器上的项目中运行这个来创建一个新的超级用户

```
python manage.py createsuperuser 
```

# c# - 如何投射按钮

> ID：12796156
> 
> 赞同：0
> 
> 时间：2012-10-09T08:47:20.520
> 
> 标签：c#, casting

我对投射按钮的理解有些问题，也许你可以帮助我。如果我有例如 3 个按钮并且我不会有很长的代码，我可以投射它们，对吗？例如：

```
private void button1_Click(object sender, EventArgs e)
{

}

private void button2_Click(object sender, EventArgs e)
{

}

private void button3_Click(object sender, EventArgs e)
{

} 
```

如果我给每个按钮一个标签，我应该能够询问按钮是否被点击，对吗？

```
private void MachMalClick(object sender, EventArgs e)
{
    var myButton = (Button)sender;

    if (myButton != null)
    {
        var test = myButton.Tag;
switch (test)
            {
                case 1: MessageBox.Show("button 1 was clicked");
                    break;
                case 2: MessageBox.Show("button 2 was clicked");
                    break;
                case 3: MessageBox.Show("button 3 was clicked");
                    break;
            }
    }
} 
```

如果上部 mthode 成功，则对象必须是按钮（将发件人转换为按钮 -> 必须是按钮）但是现在我遇到了处理标签的问题。有人可以帮助我吗？我在互联网上找不到任何东西，如果这是一个愚蠢的问题，我很抱歉，但我是 C# 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:54:04.613

你可以试试`Id property`

```
Button myButton = (Button)sender;
if(myButton.Id == "button1")
{
  ....
}
elseif(myButton.Id == "button2")
{
   .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:54:32.570

```
var test = myButton.Tag as string; 
```

您无法打开对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:00:01.367

您不需要“标签”属性吗？

您可以直接检查 Button 对象。

```
if(sender == button1)
    MessageBox.Show("button 1 was clicked");
else if(sender == button2)
    MessageBox.Show("button 2 was clicked");
else if (...)
    ... 
```

这假定按钮是在设计时创建的，并且按钮字段被命名为“button1”、“button2”等。

# ios - 在 iOS 模拟器中无法在后台播放音频

> ID：12796157
> 
> 赞同：1
> 
> 时间：2012-10-09T08:47:21.423
> 
> 标签：ios, ios-simulator, avaudioplayer

我见过很多关于在后台播放音频的问题。这些问题通常会问为什么音频在模拟器的背景中播放，而设备根本不会。

在我的情况下，它是相反的。

当我在 iPad 上测试我的示例应用程序时，它运行良好。但是，当我开始在模拟器中进行测试时，它根本不会继续在后台播放。

以下是我使用的代码：

```
NSURL *url = [NSURL URLWithString:firstSong];

audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
[audioPlayer setNumberOfLoops:-1];
[audioPlayer setCurrentTime:0];

[[AVAudioSession sharedInstance]setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance]setDelegate:self];
[[AVAudioSession sharedInstance] setActive:YES error:nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self becomeFirstResponder];

[audioPlayer play]; 
```

谁能告诉我为什么这行不通？这是一个错误还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:31:25.620

iOS 模拟器 afaik 不支持背景音频。

# c# - Windows 8 Metro 应用程序 - 使用 C# 弹出带有 OK 按钮的警报？

> ID：12796159
> 
> 赞同：-4
> 
> 时间：2012-10-09T08:47:30.297
> 
> 标签：c#, .net, windows, windows-8, popup

我正在编写一个注册屏幕，当登录信息不正确时会弹出错误警报。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T02:37:42.487

在一行...

```
await new Windows.UI.Popups.MessageDialog("Man why did they have to make this so complicated in Win 8").ShowAsync(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:50:54.920

在 Windows 应用商店应用中，使用`new MessageDialog("My Message").ShowAsync();` See [here](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog) for reference。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:23:25.837

考虑阅读这篇关于将消息框添加到基于 Metro 的应用程序的文章：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh738361.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh738361.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:32:35.883

我不确定您在说什么具体情况，但如果您想在用户界面上使用 OK 和 CANCEL 按钮，那么您可以使用：

`ScriptManager.RegisterClientScriptBlock(this, Page.GetType(), "alert", "confirm('You are about to confirm')?window.location='Yes':window.location='No';", true);`

或者如果您只想在确定按钮单击时重定向，那么您可以使用：

```
ScriptManager.RegisterClientScriptBlock(this, Page.GetType(), "alert", "alert('You are about to confirm');window.location='Yes';", true); 
```

**您必须添加 System.Web.UI 命名空间**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T17:15:25.780

这里是显示消息框的按钮的完整代码：

```
private async void DisplayMessageButton_Click(object sender, RoutedEventArgs e)
{
     MessageDialog messageDialog = new MessageDialog("Welcome to Windows 8 Store Apps", "Windows 8");
     await messageDialog.ShowAsync();
} 
```

# java - 解释在 JBoss 服务器上观察到的 JVM 垃圾收集

> ID：12796162
> 
> 赞同：4
> 
> 时间：2012-10-09T08:47:42.090
> 
> 标签：java, jboss, garbage-collection, jvm, performance

使用 VisualVM，我在 JBoss 服务器上观察到以下堆使用情况：

![VisualVm 的 Heap 使用截图](../Images/2e36d7009097c66e7c79d265c6a0db59.png)

服务器使用以下（相关）JVM 选项启动：

```
-Xrs -Xms3072m -Xmx3072m -XX:MaxPermSize=512m -XX:+UseParallelOldGC -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 
```

我们目前还启用了 GC 日志记录：

```
-XX:+PrintGC -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:log\gc.log 
```

基本上我对观察到的模式很满意，因为看起来我们没有任何内存泄漏（这种模式会在几天内重复出现）。

但是我想知道是否有优化空间？

首先，我不明白为什么当堆使用量达到大约 2GB 时垃圾收集已经开始了？在我看来，它可能会在以后启动，因为堆将有 3GB 可用？

此外，我会对有关观察到的堆使用模式和使用的 JVM 选项的提示感兴趣：

*   观察到的模式是否允许我得出关于使用的 GC 策略 (UseParallelOldGC) 的结论？这个策略是正确的，还是应该考虑到观察到的堆使用情况尝试使用另一种策略？

*   我可以优化 GC 过程，以便使用完整的堆大小（3GB）吗？

*   现在看起来完整的 3GB 从未使用过，我应该将 Xms/Xmx 减少到 2.5GB 吗？

*   我是否缺少任何明显的 GC 优化？喜欢调整 -XX:NewSize 还是 -XX:NewRatio？

*   还有什么其他的提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T10:39:13.013

我会说屏幕截图中的 GC 行为看起来很“正常”。

您通常希望在堆空间太满之前触发主要收集，否则很容易遇到 OutOfMemoryError，这取决于许多场景。

此外，您是否知道 Java 的堆空间被划分为新（伊甸园）、当前（幸存者）和旧（终身）对象的不同区域？

这个答案提供了关于这个主题的一些很好的信息，所以我不会在这里重复：

[java内存池是怎么划分的？](https://stackoverflow.com/a/1262474/575766)

基本上，堆的每个区域都会触发自己的集合。伊甸园空间通常被经常收集，并且“快速”幸存者和终身空间通常更大并且需要更长的时间来收集。

**你能根据上图减少堆大小吗？**

是的。但是，您当前的配置允许您的应用程序有一些喘息的空间，如果它可能会遇到更繁忙的时期或负载峰值。

**你能优化GC吗？**

是的，但没有神奇的设置。第一个问题是你真的需要吗？如果您的应用程序只是一个非交互式“处理器”，我真的不会打扰。如果您确实需要低暂停应用程序，那么可以进行一些调整。权衡通常是您需要更多资源才能获得相同的结果。

我的经验是，当负载增加时，低暂停 JVM 配置有一个非常明显的下降点。如果您的应用程序通常相当空闲，但您希望在调用它时得到“快速”响应，那么低暂停可能是合适的。在繁忙的系统中，流量/负载达到峰值时，您可能更喜欢更传统的方法。

**概括**

在任何情况下，都不要试图进行任意更改以“改进”您的配置。对您的方法保持科学和专业。

如果您没有可用的生产指标，请考虑使用[Apache JMeter](http://jmeter.apache.org/)之类的工具来构建负载测试场景，以模拟应用程序上的典型实时负载、增加的负载（例如 10%、20% 或 50% 等）和间歇性负载高峰负荷。

为 GC 和应用程序使用指标，至少测量：

*   平均吞吐量。
*   峰值吞吐量。
*   平均负载（CPU 和内存）。
*   高峰负荷。
*   应用程序暂停时间（总暂停和个别暂停）。
*   执行收集所花费的时间。
*   可靠性（OOME 等）。

一旦您对使用当前配置记录了应用程序性能的准确基准感到高兴，那么您才应该开始进行任何更改。

显然，记录您的配置及其指标。记录任何更改，然后执行相同的基准测试。然后，您将能够看到任何性能增益（或损失）以及可能适用的任何权衡。

以下是 Oracle 关于该主题的进一步阅读，可帮助您入门：

[Java SE 6 虚拟机垃圾收集调优](http://www.oracle.com/us/technologies/java/gc-tuning-6-140523.html)

# jquery - 如何在提交表单之前检测中文输入？

> ID：12796167
> 
> 赞同：0
> 
> 时间：2012-10-09T08:47:58.503
> 
> 标签：jquery, web

就像标题一样，如何检测用户是否输入了中文？

我想知道jQuery是否可以成功？因为我不想在提交表单后避免大量服务器工作量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:55:25.997

一种方法是只允许使用正则表达式的 ASCII 字符，如在[此示例中有人发布类似问题](https://stackoverflow.com/a/5185722/63717)。这样做的好处是它还可以排除其他非 ASCII 字符，例如西里尔文。

# jquery - jQuery选择器所有不在子类中的元素

> ID：12796168
> 
> 赞同：3
> 
> 时间：2012-10-09T08:47:59.037
> 
> 标签：jquery, jquery-selectors

鉴于页面某处的此 HTML（可能不同）：

```
<div id="start">
<div>
    <div class="buttons">select this</div>
    <div class="myControl">
        <div class="buttons">dont select this</div>
    </div>
    <div>
        <div class="buttons">select this</div>
    </div>
</div>
</div>​ 
```

我想用`buttons`红色类标记所有元素：

```
$('#start').find('.buttons').css('color','red');​ 
```

但如果它们在内部则**不是**`myControl`，所以只有“选择这个”的 div 应该是红色的。

在伪代码中，选择器将是

> 使用“按钮”类获取每个元素，但忽略“myControl”类元素中的所有内容

我在这里准备了一个**[jsfiddle](http://jsfiddle.net/marcgrabow/QqRuV/)**。

* * *

**编辑**

我不知道起始 div 也可以具有“myControl”类（试图从我的项目中剥离代码以使其可读），所以实际上它看起来像这样（和完整块也可以使用 myControl 嵌套在更多 div 中）。

所以不幸的是（对于我原来的问题是正确的）答案在这种情况下不起作用，很抱歉！知道如何调整答案之一来解决这个问题吗？

```
<div class="myControl" id="start">
<div>
    <div class="buttons">select this</div>
    <div class="myControl">
        <div class="buttons">dont select this</div>
    </div>
    <div>
        <div class="buttons">select this</div>
    </div>
</div>
</div>​ 
```

新的[**jsfiddle 在这里**](http://jsfiddle.net/marcgrabow/QqRuV/8/)。

* * *

**解决方案**

所以最终的解决方案是这样的：

```
$('#start').find('.buttons:not("#start div.myControl div.buttons ")')
.css('color','red');​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T08:51:44.853

你可以使用 .not

```
 $('#start').find('.buttons:not("div.myControl > div.buttons ")').css('color','red');​ 
```

jsfiddle

[http://jsfiddle.net/QqRuV/3/](http://jsfiddle.net/QqRuV/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:55:56.740

```
$('#start').find('.buttons').filter(function(e) { return $(this).parent(".myControl").length < 1; }).css('color','red');​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:53:01.230

```
$('#start').children('.buttons').css('color', 'red') 
```

# android - Android 设备通过配对的蓝牙设备唤醒

> ID：12796170
> 
> 赞同：1
> 
> 时间：2012-10-09T08:48:00.793
> 
> 标签：android, bluetooth, android-4.2-jelly-bean, wakeup

我在 Jelly Bean 上有一个 Android 设备，我希望它在蓝牙范围内检测到已经配对的设备时唤醒。我想这是一个服务广播接收器，但我不知道它应该如何工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:15:05.407

注册一个 BroadcastReceiver 来监听`BluetoothDevice.ACTION_BOND_STATE_CHANGED`。

在广播接收器内部：

```
public void onReceive(Context context, Intent intent)
{
  if (BluetoothDevice.ACTION_BOND_STATE_CHANGED.equals(intent.getAction()))
  {

     int bondState = intent.getIntExtra(BluetoothDevice.EXTRA_BOND_STATE, -1);

       if (bondState == BluetoothDevice.BOND_BONDED)
        {
              // wake up 
        }           

  }
} 
```

# markup - 个人广告 - 架构标记

> ID：12796174
> 
> 赞同：1
> 
> 时间：2012-10-09T08:48:14.320
> 
> 标签：markup, microformats, schema.org

我们有一个网站，人们可以在其中制作个人广告以寻找语言合作伙伴。

有谁知道如何使用 schema.org 标记这些广告？

到目前为止，我们只有在广告的每个作者姓名上都有 rel=author。但是，如果我们还可以标记广告的以下元素，那就太好了：

*   广告本身（包装广告的 div）
*   作者形象
*   作者位置/家庭位置
*   创建日期
*   母语
*   想要/学习语言
*   描述

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:59:42.500

嗯，这里不完全是专家，但我认为您应该将所有内容包装在 a 中`http://schema.org/Person`并使用已经存在的标签，假设广告链接到用户的主页，您可以将链接添加为该人的 url。假设一个 div 包含您刚刚定义的所有内容：

```
<div itemprop="author" itemscope itemtype="http://schema.org/Person">
.... all the properties ....
</div> 
```

如果我没记错的话，所有描述的属性都已经在 Person 中定义了，实际上您可以在页面底部的示例中找到它们中的大部分，只需查看[http://schema.org/Person](http://schema.org/Person)

如果没有已经存在的标记示例，真的无法为您提供更多信息。

# macos - 如何以编程方式确定 Mac OS X 中是否使用了硬盘上的扇区？

> ID：12796179
> 
> 赞同：1
> 
> 时间：2012-10-09T08:48:28.173
> 
> 标签：macos

有没有一种方法可以让我们在 Mac OS X 中找到一个扇区是否正在使用？

# javascript - 如何区分输入、焦点和模糊文本颜色？

> ID：12796180
> 
> 赞同：2
> 
> 时间：2012-10-09T08:48:31.987
> 
> 标签：javascript, forms, text, colors, onblur

我有一个表格，我想在以下阶段设置文本颜色的样式：

1.  在页面加载时（由“输入”在 CSS 中定义）
2.  在输入：焦点（在 CSS 中由“输入：焦点”定义）
3.  onblur（我不知道该怎么做）

这是我尝试的jsfiddle。

[http://jsfiddle.net/mT4cn/](http://jsfiddle.net/mT4cn/)

它正在工作，除了'onblur'事件将文本颜色恢复为'input'在css中定义的颜色。

如何使“onblur”文本与“输入：焦点”文本显示相同。

谢谢你。

**更新**

我想我已经想通了：

改变：

`<input name="email" id="email" value="your email" onFocus="clearText(this)" onBlur="clearText(this)"/>`

至：

`<input name="email" id="email" value="your email" onFocus="clearText(this)" onBlur="clearText(this.className = 'onblurtext')"/>`

并将其添加到css：

`.onblurtext { color: #999 !important; font-style: normal !important; }`

在这里更新了jsfiddle：

[http://jsfiddle.net/mT4cn/1/](http://jsfiddle.net/mT4cn/1/)

# ssl - 具有 SSL 和 Notls 的 haproxy

> ID：12796181
> 
> 赞同：4
> 
> 时间：2012-10-09T08:48:36.163
> 
> 标签：ssl, haproxy

我已经设置了新版本的 haproxy，但我需要禁用 TLS，并且“notlsv1”关键字不起作用。在我的实际配置中，我使用 stud 来管理带有这些参数的 https 会话：

> -B 1000 -n 8 -b 127.0.0.1 8080 -f *,443 --ssl -c ALL --write-proxy

我正在尝试用新的 haproxy 版本替换他。

我的配置文件：

```
global
  log 127.0.0.1   local0 info
  maxconn 32000
  user haproxy
  group haproxy
  daemon
  nbproc 1
  stats socket    /tmp/haproxy.sock

defaults
  timeout connect 10000
  timeout client 30000
  timeout server 30000

listen ha_stats 0.0.0.0:8088
  balance source
  mode http
  timeout client 30000ms
  stats enable
  stats uri /lb?stats

frontend https-requests
   mode http
   bind :80
   bind :443 ssl crt ./haproxy.pem notlsv1
   acl is_front hdr(host) -i front.mydomain.com
   acl is_service hdr(host) -i service.mydomain.com
   use_backend bkfront if is_front
   use_backend bkservice if is_service

   default_backend mydomain.com

backend mydomain.com
    mode http
    server mywebsite www.mydomain.com:80

backend bkfront
    mode http
    balance roundrobin
    option httpchk GET / HTTP/1.1\r\nHost:\ front.mydomain.com

     server web05 192.168.200.5:80 check

    backend bkservice
      mode http
      balance roundrobin
      option httpchk GET / HTTP/1.1\r\nHost:\ service.mydomain.com

      server web01 192.168.200.1:80 check 
```

http 和 https 会话在 firefox 上运行得很好，但我在 chrome 和 Internet Explorer 上遇到了问题。为了解决它们，我需要使用 Stud 添加--ssl。

谢谢，

解决方案：

感谢威利的帮助。下面我给出解决这个问题的命令：

```
wget http://haproxy.1wt.eu/download/1.5/src/devel/haproxy-1.5-dev12.tar.gz
wget http://haproxy.1wt.eu/download/1.5/src/snapshot/haproxy-1.5-dev12-patches-LATEST.tar.gz
tar xvzf haproxy-1.5-dev12.tar.gz
mv haproxy-1.5-dev12-patches-LATEST.tar.gz haproxy-1.5-dev12
cd haproxy-1.5-dev12/
tar xvzf haproxy-1.5-dev12-patches-LATEST.tar.gz
patch -p1 < haproxy-1.5-dev12-patches-20121009/*.diff
make TARGET=linux26 USE_OPENSSL=1
sudo make PREFIX=/opt/haproxy-ssl install 
```

并替换：

```
bind :443 ssl crt ./haproxy.pem notlsv1 
```

到：

```
bind :443 ssl crt ./haproxy.pem force-sslv3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:50:07.373

这是因为在 OpenSSL 中，notlsv1 只禁用 TLSv1.0，而不是更高版本！如果你需要这个，你最好从站点下载最新的快照并使用“force-sslv3”而不是“notlsv1”。它将强制使用 SSLv3 并执行您当前对螺柱的操作。

# doctrine-orm - Doctrine2 DQL 在结果集上选择（双重分组）

> ID：12796183
> 
> 赞同：1
> 
> 时间：2012-10-09T08:48:45.573
> 
> 标签：doctrine-orm, dql, query-builder

我有一个需要用 DQL / Doctrine2 编写的复杂查询。伪查询（我省略了所有额外的连接/计算）是：

```
SELECT 
    a, SUM(b)
FROM (
    SELECT 
        a, SUM(b)
    FROM tbl
    GROUP BY a,c    
) calc
GROUP BY a 
```

首先在 a 和 c 列上进行分组，然后在 a 上再次选择分组。

选择部分的（伪）代码在查询构建器中很容易：

```
$queryBuilder = $this->entityManager->createQueryBuilder();
$queryBuilder
    ->select(array('tbl'))
    ->addSelect('SUM(tbl.b)')
    ->from('\Model\MyModel', 'tbl')
    ->groupBy('a')
    ->addGroupBy('c');
$query = $queryBuilder->getQuery();
$results = $query->getResult(); 
```

但是，如何再次查询此结果？
这可能吗？
或者我可以以某种方式将它们放在 1 个 queryBuilder 对象中吗？

# asp.net-mvc - 如何在编辑视图中显示下拉列表并从数据库中选择一个值

> ID：12796188
> 
> 赞同：0
> 
> 时间：2012-10-09T08:48:53.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在 ASP.Net 中使用 MVC 3 我的 Web 应用程序是使用 ViewModel 和[ViewModel builder](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)设计的。

我使用 Builder 类在 ViewModel 中填充一些数据。就我而言，我有一个创建视图下拉列表，此代码工作正常。我的问题是在尝试创建编辑视图时，我收到此错误：

```
 {"The ViewData item that has the key 'CandidateId' is of type 'System.Int32' but must be of type 'IEnumerable<SelectListItem>'."} 
```

我的想法是用一些值填充 DropDownList ，但已经预先选择了一个作为数据库记录。

那么如何在编辑视图中显示下拉列表并从数据库中选择一个值？

看法

```
 <div class="editor-label">
        @Html.LabelFor(model => model.CandidateId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(x => x.CandidateId, Model.CandidatesList, "None")
    </div> 
```

查看模型

```
 public Nullable<int> CandidateId { get; set; }
    public IEnumerable<SelectListItem> CandidatesList; 
```

查看模型构建器

```
// We are creating the SelectListItem to be added to the ViewModel
        eventEditVM.CandidatesList = serviceCandidate.GetCandidates().Select(x => new SelectListItem
            {
                Text = x.Nominative,
                Value = x.CandidateId.ToString()
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:51:20.723

此错误的原因是因为在您的`[HttpPost]`操作中您忘记从数据库中重新填充`CandidatesList`视图模型上的属性。

```
[HttpPost]
public ActionResult Edit(EventEditVM model)
{
    if (ModelState.IsValid)
    {
        // the model is valid => do some processing here and redirect
        // you don't need to repopulate the CandidatesList property in 
        // this case because we are redirecting away
        return RedirectToAction("Success");
    }

    // there was a validation error => 
    // we need to repopulate the `CandidatesList` property on the view model 
    // the same way we did in the GET action before passing this model
    // back to the view
    model.CandidatesList = serviceCandidate
        .GetCandidates()
        .Select(x => new SelectListItem
        {
            Text = x.Nominative,
            Value = x.CandidateId.ToString()
        });

    return View(model);
} 
```

不要忘记，当您提交表单时，只会将下拉列表的选定值发送到服务器。在您的 POST 控制器操作中，`CandidatesList`collection 属性将为 null，因为它的值从未发送过。因此，如果您打算重新显示相同的视图，则需要初始化此属性，因为您的视图依赖于它。

# sql - MS-Access - 如何在执行查询时添加记录

> ID：12796190
> 
> 赞同：0
> 
> 时间：2012-10-09T08:49:08.190
> 
> 标签：sql, ms-access

好的，所以这很复杂，但我对 Access 很陌生，所以也许这并不难。

我的数据库中有 3 个表：

**客户**- 这包含基金所有*客户的列表。*其中一些客户在基金中拥有多个账户。结构：

```
ID | CliName
------------
1  | Joe Blogs Holdings
2  | John Doe Investments
etc... 
```

**ClientMap** - 这基本上有一个所有*帐户*的列表，另一个字段包含它属于哪个客户（拥有该帐户的客户的 ID）。

```
ID |     AccountName     |      ClientName      | ClientID (refs to ID in Clients)
------------
1  | Joe Blogs Safe Fund | Joe Blogs Holdings   | 1
2  | Joe Blogs Risk Fund | Joe Blogs Holdings   | 1
3  | John Doe Fund       | John Doe Investments | 2
etc... 
```

**估值**- 这是每个账户在任何给定日期的价值列表。

```
ID | ValuationDate |   Valuation  | AccName
------------
1  |  30/09/2012   |   1,469,524  | Joe Blogs Safe Fund
2  |  30/09/2012   |   1,767,134  | Joe Blogs Risk Fund
3  |  30/09/2012   |   239,561    | John Doe Fund
4  |  30/06/2012   |   1,367,167  | Joe Blogs Safe Fund
5  |  30/06/2012   |   1,637,121  | Joe Blogs Risk Fund
6  |  30/06/2012   |   219,241    | John Doe Fund 
```

好的，所以我想运行一个查询，列出从客户表中选择的客户，并返回他们所有账户的估值总和。例如，John Doe 只有一个帐户，因此查询结果如下所示：

```
ClientName           |  ValuationDate | Valuation
----
John Doe Investments |   30/09/2012   | 239,561
John Doe Investments |   30/06/2012   | 219,241 
```

但是，查询应该为 Joe Blogs 返回类似这样的内容：

```
ClientName           |  ValuationDate | Valuation
----
Joe Blogs Holdings   |   30/09/2012   | 3,236,658
Joe Blogs Holdings   |   30/06/2012   | 3,004,288 
```

因此，对于添加的每个日期，它都会查找所有 Joe Blogs 帐户的总数，以提供总体估值。我该怎么做呢？

希望这很清楚，那些访问专家能够帮助我。谢谢

到目前为止我有这个，但它并没有总结每个日期的账户，它只是单独列出它们：

```
SELECT ClientMap.AccName, Clients.ClientName, Valuations.ValuationDate, Valuations.Valuation
FROM (Clients INNER JOIN ClientMap ON Clients.ID = ClientMap.ClientID) INNER JOIN Valuations ON ClientMap.AccName = Valuations.AccName
WHERE (((Clients.ClientName) Like [Which Client?] & "*")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:00:07.507

您应该首先阅读[http://www.w3schools.com/sql/](http://www.w3schools.com/sql/)
完成后，您将知道在何处以及如何使用聚合函数 [如`sum()`本例所示]
祝您在学习过程中好运

# jquery - 获取json数据到li

> ID：12796192
> 
> 赞同：2
> 
> 时间：2012-10-09T08:49:10.800
> 
> 标签：jquery, json, html-lists, append

我有一些 Json 数据，其中包含带有一些关联值的产品图像。我想获取该json数据，将其存储在“li”中并使用jquery附加到某个div。请告诉我如何将图像附加到 li。这是Json数据

> {"url":"1.jpg","color":"Yellow","Item":"Item A","sold_out":"1"},{"url":"2.jpg","color ":"Red","Item":"Item B","sold_out":"0"},{"url":"3.jpg","color":"Green","Item":"Item D ","sold_out":"0"},{"url":"4.jpg","color":"Red","Item":"Item A","sold_out":"1"},{" url":"5.jpg","color":"Blue","Item":"Item B","sold_out":"0"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:06:40.590

使用循环遍历json`$.each`并将其附加到html元素（li）。

示例（***未测试***）

```
$.each(data, function(key, val) {
    $("ul").append("<li><img src=\"https://path/" + data[key].url+ "\" /></li>");
}); 
```

`data`是 json 数组。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:06:16.473

将图像附加到列表

```
var myImageSrc = "1.jpg";
var myList = $('#mylist');
myList.append('<li><img src="' + myImageSrc + '" /></li>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:03:17.853

这是您想要的 JSFiddle**更新** [http://jsfiddle.net/Rm4vE/4/](http://jsfiddle.net/Rm4vE/4/)

# c# - 每个进程是否只有一个静态变量实例？

> ID：12796193
> 
> 赞同：6
> 
> 时间：2012-10-09T08:49:17.370
> 
> 标签：c#, .net, oop, assemblies, static-members

如果我有以下课程：

```
public class MyClass { public static int MyStaticInt = 0; } 
```

如果在我`MyNameSpace.MyClass.MyStaticInt`在两个不同程序集中引用的一个解决方案中，我指的是同一个变量吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:51:21.657

默认情况下，静态状态的范围是 per ，如果您使用该属性[`AppDomain`](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)，则可以将其配置为按线程。[`ThreadStatic`](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)

这意味着如果程序集在同一进程中运行并且该进程只有一个应用程序域，则您的假设是有效的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T08:54:10.363

`static`根据上下文可能意味着几件事。

*   默认情况下，您会获得一个 per 值的实例`AppDomain`。
*   如果使用该属性进行装饰，则`ThreadStatic`每个线程都会获得一个值的实例。
*   如果包含在泛型类中，您将获得每个具体类型的值的一个实例。

对于您的示例代码，第一个条件似乎是这种情况。在所有情况下，定义数据的特定程序集都没有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:51:08.600

是的，每个类的每个进程只有一个实例。

对此有一点需要注意的是，当您拥有泛型类时，每个泛型类的实例都有一个变量实例。即，您将有一个MyGenericClass 实例和一个MyGenericClass 实例。

**编辑**

事实上，每个 AppDomain 有一个实例，因此您可以通过自己创建多个 AppDomain 副本来创建多个副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:53:26.773

**不**， MyClass.MystaticInt 仅对 MyClass 类是本地的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-03T05:21:42.357

我已经在“*自定义*”程序集中测试了静态实例，该程序集从两个位置加载：*主程序*（第 3 方）和我的“*自制*”插件，它也由*主程序*加载。我检查了 AppDomain - 当从两个地方加载“*自定义”程序集时，它是完全相同的，可惜“**自定义*”程序集中的对象的静态实例不一样。因此，我必须得出结论，静态实例在每个加载的程序集的每个 AppDomain 中都具有上述单个值，如果再次加载程序集，那么它将不一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-02T06:53:27.690

类变量是静态的。每个类加载器每个 jvm 只出现一次类变量。

# java - 如何为 GridBagLayout 中的所有组件设置间隙？

> ID：12796195
> 
> 赞同：3
> 
> 时间：2012-10-09T08:49:39.403
> 
> 标签：java, swing, user-interface, layout, gridbaglayout

当您使用组布局时，您可以使用以下方式设置所有间隙：

```
setAutoCreateGaps(true);
setAutoCreateContainerGaps(true); 
```

有相同的功能`GridBagLayout`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T10:49:39.910

在 GridBagLayout 中，使用 GridBagConstraints 您可以使用以下属性设置间隙；

1.  GridBagConstraints.ipadx,GridBagConstraints.ipady：指定组件在布局中的内部填充。

2.  GridBagConstraints.insets：指定组件的外部填充。

3.  GridBagConstraints.weightx,GridBagConstraints.weighty：用于确定如何分配空间。

例如：

```
pane.setLayout(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();
c.fill = GridBagConstraints.HORIZONTAL;
c.ipady = 40;      //make this component tall
c.ipadx = 10;      //make this component wide
c.anchor = GridBagConstraints.PAGE_END; //bottom of space
c.insets = new Insets(10,0,0,0);  //top padding
c.gridx = 1;       //first column
c.gridy = 2;       //third row
c.gridwidth = 2;   //2 columns wide
c.weightx = 0.5;   //increase horizontal space
c.weighty = 1.0;   //increase vertical space 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:03:08.993

*   [在 GridBadLayout 中设置间隙大小](http://www.exampledepot.com/egs/java.awt/gridbag_Gap.html)

*   [很好的描述](http://www.formdev.com/jformdesigner/doc/layouts/gridbaglayout/)

*   使用[EmptyBorders](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)

*   使用隐形`JComponents`

# node.js - 任何带有 mongo db 的 node.js 示例都完成了用户集成？

> ID：12796200
> 
> 赞同：1
> 
> 时间：2012-10-09T08:49:56.510
> 
> 标签：node.js, mongodb

我是 node.js/express/mongodb 堆栈中创建 REST api 的完整新手。尽管这些教程对我入门很有帮助，但在将授权/身份验证应用于 api 时，我发现自己完全陷入困境。任何这样的例子都会很有帮助。我已经完成了连接和通行证，但是没有一个很好的应用程序示例，其中给出了用户登录/注册（带有身份验证）+ skeletal rest api 来访问用户的数据。如果可以提供类似的东西，那将是相当棒的？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:47:11.367

[这是使用https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js](https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js)进行身份验证的示例`passportjs`

希望这可以帮助你。要使用它，`mongodb`请使用该方法检索所有记录并将其存储在数组中。`toArray()`例如，在示例中的代码片段中，只需将其修改为

```
findByUsername(username, function(err, user) {
     db.collections.find().toArray(function(err,user){
        if (err) { return done(err); }
        if (!user) { return done(null, false, { message: 'Unknown user ' + username }); }
        if (user.password != password) { return done(null, false, { message: 'Invalid password' }); }
        return done(null, user);
      })
    });
  }
});
)); 
```

# shell - 如何通过unix shell将日期转换为多行的时间戳

> ID：12796201
> 
> 赞同：0
> 
> 时间：2012-10-09T08:50:15.947
> 
> 标签：shell, unix, awk

我已经`grep`为多行日期字符串编辑了一个日志文件：

```
2012-10-09 14:05:26  
2012-10-09 14:11:18  
2012-10-09 14:12:03 
```

现在我想将它们转换为时间戳，并找出哪个大于值
日期 cmd：

```
date -d "2012-10-09 14:37:59" +%s 
```

我不确定如何使用多行、awk 或其他 shell cmd 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:58:16.440

这只是一个简单的例子，更好的解决方案应该包括参数传递、错误返回测试等等。

```
#!/bin/sh

SEARCH=`date -d "2012-10-09 14:11:09" +%s`
while read DATETIME ; do
    THIS=`date -d "$DATETIME" +%s`
    if [ "$SEARCH" -le "$THIS" ] ; then
        echo $DATETIME
    fi
done <<EOD
2012-10-09 14:05:26
2012-10-09 14:11:18
2012-10-09 14:12:03
EOD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:06:03.367

使用`awk`：

```
awk -v d="2012-10-09 14:07:26" '
    BEGIN { 
        FS = "[-: ]"; 
        split( d, arr, /[-: ]/ );
        date_timestamp = mktime( arr[1] " " arr[2] " " arr[3] " " arr[4] " " arr[5] " " arr[6] );
        if ( date_timestamp == -1 ) {
            printf "%s\n", "Bad format for input date";
            exit 1;
        }
    }
    { 
        if ( mktime( $1 " " $2 " " $3 " " $4 " " $5 " " $6 ) > date_timestamp ) { 
            print $0; 
        } 
    }
' infile 
```

它产生：

```
2012-10-09 14:11:18  
2012-10-09 14:12:03 
```

# jquery - jquery自定义的html5视频在ipod中不起作用

> ID：12796202
> 
> 赞同：1
> 
> 时间：2012-10-09T08:50:19.693
> 
> 标签：jquery, html, jquery-ui, css, html5-video

我为 HTML5 视频皮肤和控件开发了一个 JQuery API。它在 Chrome、FF 和 Opera 中完美运行。

但它不适用于 iPod 和移动设备。我知道我们不能为 iPod 定制皮肤。同时，我只是要播放的视频。

请帮帮我。链接是：[www.iseofirm.net/appthateam/vel/static2/](http://www.iseofirm.net/appthateam/vel/static2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:24:22.793

编辑：我的坏，我累了。忘记我写的。

# string - char 指针在函数调用过程中变为空

> ID：12796204
> 
> 赞同：1
> 
> 时间：2012-10-09T08:50:21.347
> 
> 标签：string, pointers, null, gdb, char

```
(5) 0x1c6235e1 in ProxyClass::Method_C (this=0xb3a0c8, sendFilePath=...) at ./src/ProxyClass.cpp:112

(6) 0x2c8706c1 in Class1::Method_B (this=0x1fc5a1, profile=0x2c8f2340 "fileProfile1", filePathAndFileName=0x0) at ./src/Class1.cpp:860

(7) 0x2c4ae4c0 in Method_B (profile=0x42c <Address 0x42c out of bounds>, filePathAndFileName=0x0) at ./src/Class1_interface.cpp:310

(8) 0x2c1e5c3c in Method_A (profile=0x42c <Address 0x42c out of bounds>, filename=0x2c601c1c "/tmp/temporaryfile.tmp") at ./src/file.cpp:890 
```

我有上面用 gnu gdb 调试的核心文件片段。该核心文件是在运行 Linux 的嵌入式系统上创建的。函数调用中的变量没有任何操作......
我的问题如下：

1.  为什么配置文件在第 8 帧看起来像这样`Address 0x42c out of bounds`，而在第 9 帧之前配置文件没有变化，这怎么能变得有意义（“fileSchema”）？

2.  我的嵌入式系统崩溃，因为`filename(char *)`等于，`0x2c601c1c`并且路径在第 8 帧“/tmp/temporaryfile.tmp”上像这样打印。然而，再次没有对文件名变量进行操作，Method_A 调用 Method_B 但 char 指针在第 7 帧突然变为空 (filePathAndFileName=0x0)。然后，我的系统崩溃了。char * 指针如何通过操作转换为 NULL？

崩溃发生在第 6 帧，因为在`Class1::Method_B`以下行中执行`"std::string filePath( filePathAndFileName);"`。正在尝试将空字符指针初始化为字符串，我认为它会导致崩溃和中止信号（程序以信号 6 终止，已中止。）。如何避免 char * 在方法之间的该变量的传递中变为 null？知道为什么它变为空吗？

```
static TUint16 Method_A(char* profile, char* filename)
{
    TUint16 a; //after the call of Method_B,the other part of this method being processed but anyway the code never passes to there because of th crash..
    Method_B(profile,filename);
    ...
    ...
    ...
    return a;
}

unsigned char Method_B_interface(char* profile, char* filePathAndFileName)
{
    unsigned char returnValue = 0;

    if ( callbackObject->Method_B( profile, filePathAndFileName ) )
    {
        returnValue = 1;
    }
    return returnValue;
}

bool Class1::Method_B(char* profile, char* filePathAndFileName)
{
    bool returnValue = true;

    std::string   filePathString( filePathAndFileName );
    std::string   profileString( profile );

    if(profileString == "fileProfile1")
    {
        if(xClass != NULL)
        {
            returnValue = xClass->Method_C(filePathString);
        }
    }
    ...
    ...
    ...
    return returnValue;
}

bool ProxyClass::Method_C(const std::string& exportFilePathAndFileName)
{
    bool returnValue;
    std::string message = "dummy", parameters;

    Serializer::serialize( message, exportFilePathAndFileName );
    proxyRequest->synchCall( message, parameters );

    getResponse(parameters);
    Serializer::deserialize( parameters, returnValue );

    return returnValue;
} 
```

# php - 无法检索 RSS 提要

> ID：12796230
> 
> 赞同：0
> 
> 时间：2012-10-09T08:52:11.763
> 
> 标签：php, simplepie

我正在尝试使用以下 php 编码从 url 检索 RSS 提要数据，它返回我所需的数据，如项目标题、项目描述、项目日期等。但是当我尝试检索以下 URL 的 rss 提要数据时相同的 php 编码它不返回任何数据。我们不知道是什么阻止我们从以下博客中检索数据。

请帮助我们解决此问题，我们可以从以下博客网址检索 rss 提要数据。

```
[1] : http://kuwait-music.com

[2] : www.w6n.cc

<?php         
require_once "simplepie.inc";         
$mfeed = [1] :  http://kuwait-music.com;         
$feedinstance = new SimplePie();         
$feedinstance-->set_feed_url($mfeed);         
$feedinstance-->init();         
$feedinstance-->handle_content_type();         
echo $feedinstance-->get_permalink();         
echo $feedinstance-->get_title();          
echo $feedinstance-->get_description();         
$count = 0;            
foreach($feedinstance-->get_items() as $item)    
{            
  echo $item-->get_permalink();            
  echo $item-->get_title();             
  echo $item-->get_description();            
  echo $item-->get_date();           
  $count++;            
  if ($count == 1) break;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:45:57.657

我认为这可能与使用 SimplePie 1.3 有关，但是当我更改前几行的格式并为每个项目添加 set_feed_url 行时，它似乎工作正常。在此更改之后它现在可以工作。

# windows-phone-7 - WP7后台代理限制

> ID：12796233
> 
> 赞同：0
> 
> 时间：2012-10-09T08:52:18.480
> 
> 标签：windows-phone-7, limit, agent

我[读到](http://www.mywindowsphone.net/137/background-task-on-windows-phone-have-a-limit)WP7 限制了后台代理的数量。

此限制是否包括音频播放器代理、文件传输代理……或仅周期性代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:20:49.383

那里写着：

多任务基本上由这些功能组成，**每个**功能都有**独立的限制**：

*   后台代理
*   后台**文件传输**
*   背景**音频播放**
*   预定通知
*   快速应用切换

# asp.net - 如何在网页中换行？

> ID：12796235
> 
> 赞同：4
> 
> 时间：2012-10-09T08:52:23.567
> 
> 标签：asp.net, sql-server

我想在显示到网页之前格式化内容。我将 '\r\n\' 作为输入存储在数据库中，并尝试在网页上显示内容之前替换它。服务器端我的代码是：

```
lblComments.Text = Server.HtmlEncode(((DataRowView)e.Item.DataItem).Row["Comment"].ToString().Replace("\r\n", "<br>")); 
```

我有用`Server.HtmlEncode`。

我的输出应该是：

```
Comment Type: Public
Comment: Commented on the Data by user A 
```

但是，它向我展示了单行中的所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:54:32.707

你需要使用

```
.Replace("\r\n", "<br/>") 
```

并且仅在Server.HtmlEncode**之后**，因为您不希望`<br/>`自身被编码为`&lt;br/&gt;`（原始），按`<br/>`字面意思显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:56:03.820

您可以将输出包装在一个`<pre>...</pre>`元素中，而不是用`<br>`. 这样，应该保留换行符。

例如，`<pre>`在您的标签周围放置一个元素：

```
<pre><asp:Label id="lblComments" runat="server" /></pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:05:23.773

尝试

```
Replace("\n", "<br>") 
```

该测试在没有编码的情况下工作

```
string comments = @"Comment Type: Public
Comment: Commented on the Data by user A";
lblComments.Text = comments.Replace("\n","<br>"); 
```

# java - 带有从 XAMPP 服务器上传的图像的 GridView 库

> ID：12796236
> 
> 赞同：0
> 
> 时间：2012-10-09T08:52:35.103
> 
> 标签：java, android, gridview, xampp, gallery

我必须在使用来自 XAMPP 服务器的图像的 android xml 中做一个 GridView Gallery。

我有从文件上传的代码：

```
public class ImageAdapter extends BaseAdapter implements ListAdapter {

public static int[] images = {R.drawable.image1, R.drawable.image2,
                R.drawable.image3, R.drawable.image4,
                R.drawable.image5, R.drawable.image6,
                R.drawable.image7, R.drawable.image8,
                R.drawable.image9, R.drawable.image10,
                R.drawable.image11, R.drawable.image12,
                R.drawable.image13, R.drawable.image14};
private Context context;

public ImageAdapter (Context applicationContext)
{
    context = applicationContext;
} 
```

# ruby - Ruby 元编程：将@variables 添加到现有的“初始化”方法（使用 class_eval）

> ID：12796237
> 
> 赞同：2
> 
> 时间：2012-10-09T08:52:50.143
> 
> 标签：ruby, metaprogramming, class-eval

> **可能重复：**
> [Ruby.Metaprogramming。class_eval](https://stackoverflow.com/questions/9658724/ruby-metaprogramming-class-eval)

我有这个小项目，目标是创建一个“attr_accessor_with_history”方法，它将记录分配给它创建的变量的每个值。这是代码：

```
class Class
  def attr_accessor_with_history(attr_name)
  attr_name = attr_name.to_s   # make sure it's a string
  attr_reader attr_name        # create the attribute's getter
  attr_reader attr_name+"_history" # create bar_history getter

  a = %Q{
        def initialize
        @#{attr_name}_history = [nil]
    end         

    def #{attr_name}
        @#{attr_name} 
    end 

    def #{attr_name}=(new_value)
        @#{attr_name}=new_value 
        @#{attr_name}_history.push(new_value)
    end }
      puts a

      class_eval(a)

  end
end 
```

现在，当我为一个变量测试脚本时。它工作正常。但是当我尝试创建两个或更多变量时（像这样）......

```
class Foo
attr_accessor_with_history :bar
attr_accessor_with_history :lab
end

a = Foo.new
a.bar = 45
a.bar = 5
a.bar = 'taat'
puts a.bar_history

b = Foo.new
b.lab = 4
b.lab = 145
b.lab = 'tatu'
puts b.lab_history 
```

....Ruby 为 (class_eval) bar_history.push(new_value) 提供了一个“不存在的‘push’方法”。我认为“初始化”方法在 attr_accessor_with_history 的第二次调用中被覆盖，因此第一个变量的记录被破坏。

我不知道如何解决这个问题。我已经尝试调用 'super' 。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:18:39.133

在您的 setter 方法中，只需检查历史实例变量是否已初始化：

```
def #{attr_name}=(new_value)
  @#{attr_name}=new_value
  @#{attr_name}_history ||= [nil]
  @#{attr_name}_history.push(new_value)
end 
```

如果之前未设置，您将需要另一个用于设置默认值的历史变量的 getter：

```
def #{attr_name}_history
  @#{attr_name}_history ||= [nil]
end 
```

然后你可以删除你的初始化方法，顺便说一句容易被覆盖。

# jquery - 一页上有多个服务器端 jQuery 数据表实例

> ID：12796238
> 
> 赞同：1
> 
> 时间：2012-10-09T08:53:00.073
> 
> 标签：jquery, jquery-datatables

我有两个加载从服务器返回的 json 值的 jquery 数据表。然而，只有第一个数据实例加载数据。查看从 Firebug 返回的错误，我得到“TypeError: this.domElement.parentNode is null”，Chrome 还在其 javascript 控制台中给出了错误“Uncaught TypeError: Cannot call method 'appendChild' of null”。

下面是我的数据表的初始化代码

```
$(function() {
    var roleTable = $('#grid[rel*=roles_grid]').dataTable( {"bJQueryUI": false,
                "sPaginationType": "full_numbers",
                "sDom": 'T<"clear">lfrtip',
                "bSortClasses": true, 
                "oTableTools": { "sSwfPath": "resources/swf/copy_cvs_xls_pdf.swf" },
                "bProcessing": true,
                "bServerSide": true,
                "bRetrieve": true, 
                "sAjaxSource": "resources/server/json/setup.json.php",
                "aoColumns": [
                    { "mDataProp": "description" },
                    { "mDataProp": "notes" },
                    { "mDataProp": "id" }
                ]
            });

            var usersTable = $('#grid[rel*=users_grid]').dataTable( {
                "bJQueryUI": false,
                "sPaginationType": "full_numbers",
                "sDom": 'T<"clear">lfrtip',
                "bSortClasses": true, 
                "oTableTools": { "sSwfPath": "resources/swf/copy_cvs_xls_pdf.swf" },
                "bProcessing": true,
                "bServerSide": true,
                "bRetrieve": true,  
                "sAjaxSource": "resources/server/json/users.json.php",
                "aoColumns": [
                    { "mDataProp": "staff_no" },
                    { "mDataProp": "lastname" },
                    { "mDataProp": "firstname" },
                    { "mDataProp": "email" },
                    { "mDataProp": "primary_phone" },
                    { "mDataProp": "secondary_phone" },
                    { "mDataProp": "description" },
                    { "mDataProp": "id" }
                ]
            });
        }); 
```

我究竟做错了什么？

# java - 使用计时器更新点的图形

> ID：12796240
> 
> 赞同：4
> 
> 时间：2012-10-09T08:53:01.527
> 
> 标签：java, swing, graphics, timer, paintcomponent

在我问我的问题之前，我为任何不一致的地方道歉。我对此很陌生。我正在制作一个现在看起来像这样的游戏（图片不重要）： ![我的游戏](../Images/0d06b863bf1d60c3ee61bd65efc5ed55.png)

红点应该向右移动，他们用计时器来做到这一点。这工作正常。图形并没有更新，所以我必须来回拖动窗口的一侧才能看到我的点在移动。我能做些什么来解决这个问题？

我的主类中的paintcomponent方法：

```
 public void paintComponent(Graphics g){
    super.paintComponent(g);
    for (int x = 0; x < SomeInts.amount; x++){
        for (int y = 0; y < SomeInts.amount; y++){
            tile[x][y].colorBody(g, x, y);              
            Tower temp;
            for (int i = 0; i < towers.size(); i++){        
                temp = towers.get(i);
                temp.colorBody(g, tile[x][y].getSize());
                temp.guard.colorBody(g, tile[x][y].getSize());                        
            }
        }
    }
} 
```

我的红点课。也称为 Guard 类：

```
public class Guard {
int x, y, size = 10, towerx, towery;
Timer timer;
public Guard(int towerx1, int towery1){
    towerx = towerx1;
    towery = towery1;
    x = towerx + 1;
    y = towery;
    new Timer().schedule(new MyTask(), 1000, 1000);
}

public void colorBody(Graphics g, int tilesize){
    g.setColor(new Color(255, 0, 0));
    g.fillOval(x * tilesize + tilesize / 4, y * tilesize + tilesize / 4, size, size);       
}

public class MyTask extends TimerTask {
    public void run() {
        x++;
    }
} 
```

}

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:11:23.773

我在这里猜测了一下，但我认为您需要调用 repaint() 方法来查看您所做的更改。

# java - 使用 Lucene 的 TaxonomyReader 获取孩子

> ID：12796241
> 
> 赞同：0
> 
> 时间：2012-10-09T08:53:03.307
> 
> 标签：java, lucene

在`Lucene`中，我正在使用`TaxonomyReader`读取存储在磁盘中的分类索引。对于给定的类别，我需要找到所有属于其子类别的类别。但是，在[Lucene 的 API](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getChildrenArrays%28%29)中，我可以找到一种方法来检索父级而不是子级。有一个称为`getChildrenArrays()`返回[ChildrenArrays](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html)对象的方法。可以看到，这个类只有两个方法：

*   `getYoungestChildArray`
*   `getOlderSiblingArray`

我想`Enumerator`使用这两种方法来实现。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T16:52:33.560

我得到以下信息：

```
private class EnumChildren implements Enumeration<Integer> {
    int category, current;
    int[] next, first;

    public EnumChildren(int category) {
        ChildrenArrays childrenArrays = tr.getChildrenArrays();
        first = childrenArrays.getYoungestChildArray(); 
        next = childrenArrays.getOlderSiblingArray();
        current = first[category];
    }

    public boolean hasChildren() {
        return (current != TaxonomyReader.INVALID_ORDINAL);
    }

    @Override
    public boolean hasMoreElements() {  
        current = next[current];
        return (current != TaxonomyReader.INVALID_ORDINAL);
    }

    @Override
    public Integer nextElement() {
        return current;
    }
} 
```

Ans 用作：

```
ordinal = tr.getOrdinal(new CategoryPath(nodeCategory.getPath(), '/')); 
        EnumChildren childrenEnumeration = new EnumChildren(ordinal);
        if (childrenEnumeration.hasChildren()) {
            do {
                int current = childrenEnumeration.nextElement();
                Category child = new Category(tr.getPath(current).toString());
                addChildren(child);
                nodeCategory.children.add(child);
            } while (childrenEnumeration.hasMoreElements());
        } 
```

# objective-c - Objective-C - 键盘离开屏幕时的回调

> ID：12796253
> 
> 赞同：0
> 
> 时间：2012-10-09T08:53:55.893
> 
> 标签：objective-c, ios, callback, nsnotificationcenter, uikeyboard

我通过这样做将键盘滑出屏幕：

```
-(void)methodA {

    [textField resignFirstResponder];

} 
```

当键盘隐藏时，我会听到`UIKeyboardDidHideNotification`通知，这里是通知的选择器：

```
- (void)keyboardHidden:(NSNotification *)notification {
    // What to do here?
} 
```

现在在方法A中，我想在键盘被隐藏时得到通知，以便我可以开始执行另一项任务，我的伪代码如下所示：

```
-(void)methodA {

    [textField resignFirstResponder];

    wait until keyboardHidden = YES
    if(keyboardHidden) {
        // code
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:58:31.263

好：

```
-(void)methodA
{
    [textField resignFirstResponder];
}

- (void)keyboardHidden:(NSNotification *)notification {
    //Keyboard is Hidden
    // code
} 
```

我认为这更有意义。仍然是块解决方案可能是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:09:51.027

如果还需要在`-(void)methodA`do下写代码

```
-(void)methodA
{
   if(!isKeyBoarHidden){
       [textField resignFirstResponder];
   }
   else{
        //code here
   }
}

- (void)keyboardHidden:(NSNotification *)notification {
      isKeyBoarHidden = YES;
      [self methodA];
} 
```

`methodA`有时，如果我们在内部有一些局部变量并且我们不需要将变量设为全局变量，这可能会有所帮助。

# shell - shell 脚本错误状态和语法检查

> ID：12796260
> 
> 赞同：2
> 
> 时间：2012-10-09T08:54:12.813
> 
> 标签：shell, syntax

我编写了一个 shell 脚本，并且我使用了一些命令，例如`rm`,`ls`等。如果这些命令失败，我正在检查返回状态“$？” . 但是如果脚本有一些语法错误，我怎样才能得到它的错误状态呢？基本上我将使用'source'命令从另一个脚本中获取这个脚本。因此，如果来源的脚本有任何语法错误，我想在控制台中显示它。有没有办法获得这种状态？在 shell 中，我执行了带有语法错误的脚本，我得到了类似 'missing [' 的错误，但是当我执行`echo $?`它返回 0 作为状态时，这是行为吗？如果脚本有语法错误，我如何获得状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:01:17.957

`-n`您可以在采购之前使用选项检查 shell 脚本的语法：

```
bash -n somescript  # Works also for sh, ksh, zsh et al. 
```

将告诉您 somescript 在语法上是否正常而无需实际运行它。在一个程序中：

```
if bash -n somescript; then
   . somescript
else
   printf '%s\n' "Uh-oh, somescript is not syntactically correct." >&2
fi 
```

# ruby - 什么是“rvm_codesign_identity”以及如何设置它？

> ID：12796261
> 
> 赞同：9
> 
> 时间：2012-10-09T08:54:15.133
> 
> 标签：ruby, rvm, codesign

我正在使用 rvm 1.16.10（稳定）

我做了之后`rvm install 1.9.3 --with-gcc=clang`

它安装了 1.9.3，然后显示：`'rvm_codesign_identity' is not set, please set it in ~/.rvmrc`

但是.. 'rvm_codesign_identity' 是什么以及如何设置它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T00:32:13.887

[https://github.com/wayneeseguin/rvm/issues/820](https://github.com/wayneeseguin/rvm/issues/820) [https://github.com/wayneeseguin/rvm/issues/1210#issuecomment-9272236](https://github.com/wayneeseguin/rvm/issues/1210#issuecomment-9272236)

> `rvm_codesign_identity`是 OSX 上的 codesign 实用程序的参数，用于对编译的二进制 ruby​​ 进行签名，因此它不需要授权即可使用网络 - 但代码未完成或未正确记录，如果您可以帮助改进此钩子，请打开一个新的拉取请求。

所以可能没有必要设置它。

# c# - 使用 C# 格式化 Excel 文件

> ID：12796263
> 
> 赞同：2
> 
> 时间：2012-10-09T08:54:28.580
> 
> 标签：c#, excel, interop

Bellow 函数用于格式化 excel 文件，但在运行该函数后，应用程序 Excel 没有从 Try 中关闭。（无法杀死应用程序）请帮我解决这个问题

```
private void FormateExcelFile()
{
    try
    {
        int nI = 0;//For Loop
        string nFieldName = string.Empty;
        nUserName=  WindowsIdentity.GetCurrent().Name; //Get Windows Login User
        string reportFilenPath = Application.StartupPath + "\\OutPutFiles\\" + "NewTempFile.xls";
        string connString = "provider=Microsoft.Jet.OLEDB.4.0;Data Source='" + reportFilenPath + "';Extended Properties=Excel 8.0;";
        DataTable parts = new DataTable();
        using (OleDbConnection conn = new OleDbConnection(connString))
        {
            string sqlParts = "Select * from [" + nSheetName + "]";
            OleDbDataAdapter adapter = new OleDbDataAdapter(sqlParts, conn);
            adapter.Fill(parts);
        }

        for (nI = 0; nI < parts.Columns.Count; nI++)
        {
            DataColumn column = parts.Columns[nI];
            if (nI == 0) { nFieldName = column.ColumnName; }
            else { nFieldName = nFieldName + "," + column.ColumnName; }
        }
        parts.Dispose(); parts = null;

        oExcel = new Excel.Application();
        oBook = oExcel.Workbooks.Open(reportFilenPath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);
        oSheet = (Microsoft.Office.Interop.Excel.Worksheet)oBook.Worksheets.get_Item(nSheetName.Replace("$", ""));
        oExcel.DisplayAlerts = false;
        oExcel.Visible = true;

        //Check the Field Is Avilable in the Sheet if not then Add
        if (nFieldName.Contains("Sub Device") == false)
        {
            nRng = oSheet.get_Range("A1", oMissing);
            nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
            oSheet.Cells[1, 1] = "Sub Device";
        }
        if (nFieldName.Contains("Brand") == false)
        {
            nRng = oSheet.get_Range("A1", oMissing);
            nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
            oSheet.Cells[1, 1] = "Brand";
        }
        if (nFieldName.Contains("Model") == false)
        {
            nRng = oSheet.get_Range("A1", oMissing);
            nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
            oSheet.Cells[1, 1] = "Model";
        }
        if (nFieldName.Contains("Product Details") == false)
        {
            nRng = oSheet.get_Range("A1", oMissing);
            nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
            oSheet.Cells[1, 1] = "Product Details";
        }
        if (nFieldName.Contains("Price") == false)
        {
            nRng = (Excel.Range)oSheet.Cells[1, 1];
            //nRng = oSheet.get_Range("A1", oMissing);
            nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
            oSheet.Cells[1, 1] = "Price";
        }

        oBook.Save();
        oBook.Close(false, oMissing, oMissing);
        oExcel.DisplayAlerts = true;
        releaseObject(oSheet);
        releaseObject(oBook);
        oExcel.Quit();
        releaseObject(oExcel);
        releaseObject(nRng);
        nRng = null;
        oExcel = null;
        oSheet = null;

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
        releaseObject(oSheet);
        releaseObject(oBook);
        //oExcel.Quit();
        releaseObject(oExcel);
    }
}

private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj); obj = null;
    }
    catch (Exception ex)
    {
        obj = null;
        MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
    }
    finally
    {
        GC.Collect();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:48:54.193

您需要释放您引用的**所有Excel 对象。**例如：

```
if (nFieldName.Contains("Sub Device") == false)
{
    nRng = oSheet.get_Range("A1", oMissing);
    nRng.EntireColumn.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
    oSheet.Cells[1, 1] = "Sub Device";
} 
```

应该是这样的（为了简单起见，省略了 try/finally）

```
if (nFieldName.Contains("Sub Device") == false)
{
    nRng = oSheet.get_Range("A1", oMissing);
    var col = nRng.EntireColumn
    col.Insert(Microsoft.Office.Interop.Excel.XlInsertShiftDirection.xlShiftToRight, false);
    var cells = oSheet.Cells;
    var firstCell = cells[1,1];
    firstCell.Value = "Sub Device";

    Marshal.ReleaseComObject(nRng);
    Marshal.ReleaseComObject(col);
    Marshal.ReleaseComObject(cells);
    Marshal.ReleaseComObject(firstCell);

} 
```

相似地：

```
oBook = oExcel.Workbooks.Open(reportFilenPath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);
oSheet = (Microsoft.Office.Interop.Excel.Worksheet)oBook.Worksheets.get_Item(nSheetName.Replace("$", "")); 
```

需要是：

```
oBooks = oExcel.Workbooks
oBook = oBooks.Open(...);
oSheets = oBook.Worksheets
oSheet = oSHeets.get_Item(...); 
```

你需要发布 oBooks 和 oSheets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:27:30.840

去掉这些行：

```
nRng = null;
oExcel = null;
oSheet = null; 
```

我认为您正在释放您的 Excel 对象，然后通过使其等于 null 之后您正在使用 Excel 执行某些操作，这会在您的计算机上启动一个新实例。

释放对象后，您不需要将变量设置为 null 或 run `GC.Collect();`，垃圾收集器会为您处理这个问题，我认为在这种情况下尝试自己清理托管对象（在正确清理非托管 Excel 对象）实际上是导致您的问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:20:39.513

尝试使用以下命令结束您的 excel 任务：

```
 Marshal.FinalReleaseComObject(sheet);
        app.DisplayAlerts = false; //Very important!
        range = null;
        sheet = null;
        // Garbage collecting
        GC.Collect();
        GC.WaitForPendingFinalizers();
        book.Close(false, Missing.Value, Missing.Value);
        Marshal.FinalReleaseComObject(book);
        book = null;
        app.Quit();
        Marshal.FinalReleaseComObject(app);
        app = null; 
```

我在访问我的 excel 文件时遇到了同样的问题，但是使用显示的代码它一直关闭。

当然，如果程序在到达代码之前崩溃，请使用调试器检查您的代码。

在您的情况下：书籍-> oBook，应用程序-> oExcel，工作表-> oSheet。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:32:35.693

我在使用 Excel 互操作时遇到了同样的问题。问题应该是由这种线引起的（至少在我的情况下）：

```
oBook = oExcel.Workbooks.Open(reportFilenPath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false); 
```

最后，您获得了 oBook，但这就是这里真正发生的事情：为了让 oBook 指向您打开的工作簿，您访问了一个 Workbooks 对象（使用`oExcel.Workbooks`）。这永远不会发布，并防止 Excel 退出。

我通过将该行重写为：

```
Microsoft.Interop.Excel.Workbooks oBooks = oExcel.Workbooks;
oBook = oBooks.Open(reportFilenPath, 0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false); 
releaseObject(oBooks); 
```

当然，对于这种类型的每一行（例如`oBook.Worksheets.get_Item(...)`、`nRng.EntireColumn.Insert(...)`等）都必须这样做。

# django - Django celery 没有启动

> ID：12796267
> 
> 赞同：1
> 
> 时间：2012-10-09T08:54:38.147
> 
> 标签：django, django-celery

```
[2012-10-09 03:45:45,355: WARNING/MainProcess] self.client.info()
[2012-10-09 03:45:45,355: WARNING/MainProcess] File "/usr/local/lib/python2.6/dist-packages/redis/client.py", line 437, in info
[2012-10-09 03:45:45,356: WARNING/MainProcess] return self.execute_command('INFO')
[2012-10-09 03:45:45,357: WARNING/MainProcess] File "/home/vsinghal/workspace/meditred1/eggs/kombu-1.5.1-py2.6.egg/kombu/transport/pyredis.py", line 344, in execute_command
[2012-10-09 03:45:45,357: WARNING/MainProcess] conn.send_command(*args)
[2012-10-09 03:45:45,358: WARNING/MainProcess] File "/usr/local/lib/python2.6/dist-packages/redis/connection.py", line 299, in send_command
[2012-10-09 03:45:45,358: WARNING/MainProcess] self.send_packed_command(self.pack_command(*args))
[2012-10-09 03:45:45,359: WARNING/MainProcess] File "/usr/local/lib/python2.6/dist-packages/redis/connection.py", line 281, in send_packed_command
[2012-10-09 03:45:45,359: WARNING/MainProcess] self.connect()
[2012-10-09 03:45:45,359: WARNING/MainProcess] File "/usr/local/lib/python2.6/dist-packages/redis/connection.py", line 226, in connect
[2012-10-09 03:45:45,361: WARNING/MainProcess] sock = self._connect()
[2012-10-09 03:45:45,361: WARNING/MainProcess] File "/usr/local/lib/python2.6/dist-packages/redis/connection.py", line 238, in _connect
[2012-10-09 03:45:45,361: WARNING/MainProcess] sock.connect((self.host, self.port))
[2012-10-09 03:45:45,362: WARNING/MainProcess] File "<string>", line 1, in connect
[2012-10-09 03:45:45,363: WARNING/MainProcess] TypeError
[2012-10-09 03:45:45,364: WARNING/MainProcess] :
[2012-10-09 03:45:45,364: WARNING/MainProcess] coercing to Unicode: need string or buffer, NoneType found 
```

我不明白出了什么问题。我在启动芹菜时收到上述消息

# node.js - 角色（BrowserId）身份验证在 Express 3.0 中永远不会成功（使用护照浏览器 ID）

> ID：12796277
> 
> 赞同：3
> 
> 时间：2012-10-09T08:55:14.803
> 
> 标签：node.js, express, connect, passport.js, browserid

我尝试编写一个[骨架应用程序](https://github.com/pathikrit/nemplate)，使用[本](http://blog.koostudios.com/?p=506)[教程](https://gist.github.com/3810731)和[护照](https://github.com/jaredhanson/passport-browserid)[文档使用](https://github.com/jaredhanson/passport-browserid/tree/master/examples/signin)[Mozilla Persona](http://persona.org)进行身份验证，但登录总是失败 - 我不确定我做错了什么，因为我没有看到任何来自护照的日志。这是我[的前端代码](https://github.com/pathikrit/nemplate/blob/master/public/index.html)，这是我的[服务器代码](https://github.com/pathikrit/nemplate/blob/master/app.coffee)，我确实看到了 Persona 弹出窗口，但是当我从该弹出窗口登录时总是错误的。 `req.isAuthenticated()`

这是客户端代码的片段：

```
<script type="text/coffeescript">
    $ ->
      $('#signin').click -> navigator.id.request()
      $('#signout').click -> navigator.id.logout()

      navigator.id.watch
        onlogin: (assertion) ->
          $.ajax
            type: 'POST'
            url: '/login'
            data: assertion: assertion

            success: (res, status, xhr) ->
              console.log res

            error: (res, status, xhr) -> alert "login failure" + res

        onlogout: ->
          console.log 'logout'

  </script> 
```

这是服务器代码：

```
express = require 'express'
passport = require 'passport'
BrowserIDStrategy = require('passport-browserid').Strategy
app = express()

passport.serializeUser (user, done) ->
  log 'serializing user #{user}'
  done null, user.email

passport.deserializeUser (email, done) ->
  log 'deserializing email #{email}'
  done null, email: email

persona_audience = "http://#{config.server.host}:#{config.server.port}"

passport.use new BrowserIDStrategy audience: persona_audience,
  (email, done) ->
    log email
    done null, email: email

app.get '/test', (req, res) ->
  msg = if req.isAuthenticated() then "Congratulations! You've signed in as #{req.user.email}" else "Fail :(("
  log msg
  res.send msg

app.post '/login', passport.authenticate('browserid', {failureRedirect: '/test', successRedirect: '/test'})

app.get '/logout', (req, res) ->
  req.logOut()
  res.redirect '/'

app.configure ->
#  app.use express.logger()
  app.use express.cookieParser(config.server.session_secret)
  app.use express.session()
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use passport.initialize()
  app.use passport.session()
  app.use app.router
  app.use express['static'](__dirname + '/public') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T02:26:13.600

把`app.configure`之前的`app.login`修复它。有人可以解释发生了什么吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-09T21:06:16.850

```
 data: assertion: assertion 
```

这不是上面的有效 json：

```
 data: { assertion: assertion } 
```

# php - 在 phpStorm 中指定 php.ini

> ID：12796280
> 
> 赞同：3
> 
> 时间：2012-10-09T08:55:30.603
> 
> 标签：php, phpstorm

我已经使用`$PHPRC`环境变量设置了我的 PHP 环境以指向`php.ini`. 由于`$PHPRC`是在 bash 启动期间设置的，因此从不为 phpStorm 设置。这意味着 phpStorm 使用了错误`php.ini`的 CLI。这尤其令人讨厌，因为我做了很多 PHPUnit 测试。

如何使用相同的方法制作 phpStorm `php.ini`？我希望有可能以某种方式在 phpStorm 中指定 php.ini，但我找不到这样的选项。

万一这很重要，我在 OSX 上使用 MAMP PRO 2.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:25:04.023

你可以这样做：

1.：为测试创建运行配置

![](../Images/496d40ca597eaf6991b5fe10ccb5c349.png)

2.：将`php.ini`路径添加到[命令行/解释器选项](http://php.net/manual/en/features.commandline.options.php)

![](../Images/d5990f701e6414cce60a4ad36fa627cf.png)

# php - MySQL查询中的PHP变量变量

> ID：12796286
> 
> 赞同：0
> 
> 时间：2012-10-09T08:55:46.243
> 
> 标签：php, mysql

此代码工作正常： $batsman1name 作为新值插入到数据库的正确行中。

```
for($count = 1; $count <= 22; ++$count)
{
    $setbattingid = 'batsman' . $count . 'battingid';
    $$setbattingid = mysql_real_escape_string($_POST[$setbattingid]);
    $setname = "batsman" . $count . "name";
    $$setname = mysql_real_escape_string($_POST[$setname]);
    $query = "UPDATE batting_new SET batsmanname = NULLIF('$batsman1name', '') WHERE battingid = '$batsman1battingid'";
    $result = mysql_query($query);
    if (!$result) die ("Database access failed: " . mysql_error());
} 
```

使用此代码，数据库不会更新，但变量 $$setname 和 $$setbattingid 确实包含与上面的 $batsman1name 和 $batsman1battingid 相同的值。

```
for($count = 1; $count <= 22; ++$count)
{
    $setbattingid = 'batsman' . $count . 'battingid';
    $$setbattingid = mysql_real_escape_string($_POST[$setbattingid]);
    $setname = "batsman" . $count . "name";
    $$setname = mysql_real_escape_string($_POST[$setname]);
    $query = "UPDATE batting_new SET batsmanname = NULLIF('$$setname', '') WHERE battingid = '$$setbattingid'";
    $result = mysql_query($query);
    if (!$result) die ("Database access failed: " . mysql_error());
} 
```

有任何想法吗？如果我没有很好地解释我的问题，请告诉我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:59:07.407

你应该使用：

```
$query = "UPDATE batting_new SET batsmanname = NULLIF('${$setname}', '') WHERE battingid = '${$setbattingid}'"; 
```

如此处所述：http: [//php.net/manual/language.variables.variable.php](http://php.net/manual/language.variables.variable.php)

# c# - 扩展正确的基类错误

> ID：12796288
> 
> 赞同：0
> 
> 时间：2012-10-09T08:55:47.930
> 
> 标签：c#, asp.net

好的，我的 Home.aspx 出现以下错误，代码如下

错误：

```
Compiler Error Message: ASPNET: Make sure that the class defined in this code file matches the 'inherits' attribute, and that it extends the correct base class (e.g. Page or UserControl).

Source Error:

Line 5:  using System.Web.UI.WebControls;
Line 6:  
Line 7:  public partial class home : _BasePage
Line 8:  {
Line 9:      protected void Page_Load(object sender, EventArgs e)

Source File: h:\Sites\BaseSite\Home.aspx.cs    Line: 7 
```

代码：

```
public partial class home : _BasePage
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

现在我明白这是因为它应该继承：System.Web.UI.Page

然而，这是我的 _Basepage 类：

```
using System;
using System.Text;
using System.Web.UI;
using System.Web.UI.HtmlControls;
public class _BasePage : System.Web.UI.Page
    {
        /// code

    } 
```

这个概念在 VB 中运行良好，但是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:08:44.560

这段代码在我的项目中编译=>`i think that you have compilation problem in your page _BasePage class`

```
using System;
using System.Text;
using System.Web.UI;
using System.Web.UI.HtmlControls;

namespace WebApplication1
{

    public class Test : System.Web.UI.Page
    {

    }

    public partial class _Default : Test
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

# tomcat - 依赖失败（Puppet）

> ID：12796289
> 
> 赞同：0
> 
> 时间：2012-10-09T08:55:51.143
> 
> 标签：tomcat, puppet, vagrant

**问题：**当我第一次运行 puppet 来配置 box 时，我会遇到依赖失败错误，并且带有这些错误 ( `apache-solr-dataimporthandler-3.6.1.jar`) 的文件不会复制到它们的目标位置。但是，第二次进行配置时，不再存在依赖错误，并且所有文件似乎都已正确复制。

如何在不重新配置的情况下解决依赖错误？为什么会这样？

**显现**

```
file { '/var/lib/tomcat6/webapps/solr.war':
  ensure => present,
  owner   => root,
  group   => root,  
  mode    => 644,   
  source => 'puppet:///modules/solr/apache-solr-3.6.1.war',
  notify => Service['tomcat'],
}

file { '/usr/share/solr':
  ensure => present,
  source => 'puppet:///modules/solr/solr',
  recurse => true,
  require => File['/var/lib/tomcat6/webapps/solr.war'],
  notify => Service['tomcat'],
}

file { '/var/lib/tomcat6/webapps/solr/WEB-INF/web.xml':
  ensure => present,
  owner   => root,
  group   => root,  
  mode    => 644,   
  source => 'puppet:///modules/solr/web.xml',
  require => [ File['/var/lib/tomcat6/webapps/solr.war'], File['/usr/share/solr'] ],
}

file { '/var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar':
  ensure => present,
  owner   => root,
  group   => root,  
  mode    => 644,   
  source => 'puppet:///modules/solr/apache-solr-dataimporthandler-3.6.1.jar',
  require => File['/var/lib/tomcat6/webapps/solr.war'],
  notify => Service['tomcat'],
} 
```

**错误**

```
←[0;36mnotice: /Stage[main]/Solr/File[/var/lib/tomcat6/webapps/solr.war]/ensure: defined content as'{md5}ae7997a401f9d223b097f8a88259689e'←[0m
←[1;35merr: /Stage[main]/Solr/File[/var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar]/ensure: change from absent to file failed: Could not set 'file on ensure: No such file or directory - /var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar.puppettmp_4049 at /tmp/vagrant-puppet/modules-0/solr/manifests/init.pp:37←[0m
←[0;36mnotice: /Stage[main]/Solr/File[/usr/share/solr]/ensure: created←[0m
...
...
...
←[0;36mnotice: /Stage[main]/Tomcat/Service[tomcat]: Dependency File[/var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar] has failures: true←[0m
←[0;33mwarning: /Stage[main]/Tomcat/Service[tomcat]: Skipping because of failed dependencies←[0m
←[0;36mnotice: /Stage[main]/Tomcat/Service[tomcat]: Triggered 'refresh' from 6 events←[0m
←[0;36mnotice: /Stage[main]/Solr/File[/var/lib/tomcat6/webapps/solr/WEB-INF/web.xml]/content: content changed '{md5}1b3a494d9ddefb9bef08caa5146cfd32' to '{md5}f3b9d07f7585ef8008f2bcf0407596f2'←[0m
←[0;36mnotice: /Stage[main]/Solr/File[/var/lib/tomcat6/webapps/solr/WEB-INF/web.xml]/owner: owner changed 'tomcat6' to 'root'←[0m
←[0;36mnotice: /Stage[main]/Solr/File[/var/lib/tomcat6/webapps/solr/WEB-INF/web.xml]/group: group changed 'tomcat6' to 'root'←[0m
←[0;36mnotice: Finished catalog run in 18.90 seconds←[0m 
```

**目录结构**

![在此处输入图像描述](../Images/c2d76339f9072a1207beda7690c94125.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:44:31.847

在我看来，puppet`/var/lib/tomcat6/webapps/solr/WEB-INF/lib/`在尝试创建时抱怨该目录不存在`/var/lib/tomcat6/webapps/solr/WEB-INF/lib/apache-solr-dataimporthandler-3.6.1.jar`。

我怀疑这个目录是在`.war`tomcat检测到新目录时创建的，但它发生得太晚了，你必须重新启动puppet。

所以你可能想明确地确保这个目录的创建：

```
file
{
    '/var/lib/tomcat6/webapps/solr':
        ensure => directory,
        ;
    '/var/lib/tomcat6/webapps/solr/WEB-INF':
        ensure => directory,
        ;
    '/var/lib/tomcat6/webapps/solr/WEB-INF/lib':
        ensure => directory,
        ;
} 
```

（省略“要求”，因为木偶似乎按照定义的顺序创建它们）

我不是 tomcat 专家，但您可能希望确保手动创建目录不会干扰 tomcat .war 自动检测系统。

# iphone - self.tabbar 自定义高度白色背景

> ID：12796294
> 
> 赞同：0
> 
> 时间：2012-10-09T08:56:06.393
> 
> 标签：iphone, objective-c, uitabbar

![在此处输入图像描述](../Images/8b8ed66b63eec28c04135d5d7f8fe3ea.png)

```
 UIImage *TabBarFooterImage = [UIImage imageNamed:@"b_bar"];
        CGRect viewFrame = self.tabBar.frame;
        viewFrame.origin.y +=4; //the correct position of the tab bar
        viewFrame.size.height = 45; //the correct height
        self.tabBar.frame = viewFrame;
        [self.tabBar setBackgroundImage:TabBarFooterImage]; 
```

我已经为标签栏设置了一个自定义高度。标签栏上有一条白线。我该如何删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:13:57.580

这将对您有所帮助。

```
imgTab = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,320.0,50)];
imgTab.image=[UIImage imageNamed:@"bottambar.png"];
tabBarController.tabBar.tag=10;
[tabBarController.tabBar addSubview:imgTab]; 
```

# iphone - 在 iPad 上的 UITabBarController 中重新定位 UITabBar 不起作用

> ID：12796295
> 
> 赞同：0
> 
> 时间：2012-10-09T08:56:09.130
> 
> 标签：iphone, uitabbarcontroller, uitabbar

我有这个适用于 iPhone 的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    CGRect frame = [tabBar frame];
    frame = CGRectMake(frame.origin.x, 20, frame.size.width, frame.size.height);
    [tabBar setFrame: frame];
} 
```

这将 UITabBarController 的 tabBar 放在状态栏下方的顶部。

但是相同的代码在 iPad 上不起作用。tabBar 仍然会粘在底部。

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:46:36.570

```
 frame = CGRectMake(frame.origin.x, 20, frame.size.width, frame.size.height); 
```

检查 where set origin y=20 ，您正在输入静态 20 值。

# php - mysqli 不在现场工作

> ID：12796300
> 
> 赞同：0
> 
> 时间：2012-10-09T08:56:19.647
> 
> 标签：php, mysql, mysqli

请mysqli在哪里正式工作但不能再次工作

```
 <?php
     $dbc = mysqli_connect('localhost','root','','social') OR die ('Could         not                to  MySQL:' .mysqli_error($dbc) );
   mysqli_select_db($dbc,'social')  OR die ('Could not select db: ' .mysqli_error($dbc) );

    ?> 
```

它显示此错误致命错误：在第 2 行的 /home/unilorin/public_html/func/mysql.php 中调用未定义函数 mysqli_connect()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:55:21.257

MySQLi[扩展](http://php.net/mysqli)可能没有安装。您可以通过在 phpinfo() 中搜索扩展来检查这一点。

如果不是，我建议使用[PDO](http://php.net/pdo)（如果可用）或寻找其他托管服务提供商。

# java - 我有 json，因为还有另一个 json 对象，所以如何检查第二个 Json 对象是否为空

> ID：12796301
> 
> 赞同：0
> 
> 时间：2012-10-09T08:56:29.050
> 
> 标签：java, android, json

```
[    
    {
        "vid": "45",
        "name": "hello",
        "description": "hello",
        "help": "hello",
        "relations": "1",
        "hierarchy": "1",
        "multiple": "1",
        "required": "0",
        "tags": "1",
        "module": "taxonomy",
        "weight": "7",
        "nodes": {
            "hidrupal": "hidrupal",
            "page": "page",
            "recipee": "recipee",
            "story": "story"
        },
        "uri": "http://andrd.yarrait.com/drupal6/android/vocabulary/45"
    },
    {
        "vid": "48",
        "name": "sample",
        "description": "asldfawi iawbfuiasguda jasbf jasfujad jashbdfajsdgawidba kjascbi9wa jhasbjabcuasv askjh bw ajs bjsbjda jsawioabfscja awjdbfuwga ajcsjfgjaw ajdfajs fj agfjweu8 ajsfbjw u",
        "help": "ajfawyg ahbcoiw ygajc jawhbu bua jagbwjwcwug ua jwsajwiuhcg ha bwujagua jajdwgugd uma jau wyg j h jja hg ug auj gwj",
        "relations": "1",
        "hierarchy": "1",
        "multiple": "1",
        "required": "0",
        "tags": "1",
        "module": "taxonomy",
        "weight": "7",
        "type": null,
        "nodes": [ ],
        "uri": "http://andrd.yarrait.com/drupal6/android/vocabulary/48"
    }
] 
```

我有2个JSONArray，它有“节点”对象，有时有值，有时有空值，所以如何检查这个“节点”对象是否有空值

我以这种方式尝试。请检查它并告诉我如何解决这个问题 JSONArray

```
mJSONArray = new JSONArray(response);

for (int i = 0; i < mJSONArray.length(); i++) 
{
  JSONObject mJSONObject = mJSONArray.getJSONObject(i);

  mArrayListName.add(mJSONObject.getString(Constant.VocabularyJsonKey.NAME));
  mArrayListvid.add(mJSONObject.getString(Constant.VocabularyJsonKey.VID));

    if(!mJSONObject.isNull(Constant.VocabularyJsonKey.CONTENT_TYPE))
    {
      JSONObject contentTypeJSONObject = mJSONObject.getJSONObject(Constant.VocabularyJsonKey.CONTENT_TYPE);
      JSONArray contentTypeJSONArray = contentTypeJSONObject.toJSONArray(contentTypeJSONObject.names());

      //for getting content types and set as comma separated string
      for (int j = 0; j < contentTypeJSONArray.length(); j++) 
      {
        if(j ==   contentTypeJSONArray.length()-1) 
           content_types = content_types.concat(contentTypeJSONArray.getString(j).toString());
        else 
          content_types = content_types.concat(contentTypeJSONArray.getString(j).toString() + ", ");
      }
    }
    mArrayListCtype.add(content_types);
} 
```

当我列出比因为获取节点对象空值时发生错误。错误是 **org.json.JSONException：在 org.json.JSONObject.getJSONObject( JSONObject.java:573)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:04:54.377

尝试nodes.length == 0 //空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:35:24.727

我认为你的 JSON 数组的类型应该是这样的

[

//这是你的第一个对象

{“类别”：

{"cat_id":"1","cat_title":"广告与媒体"}},

//这是你的第二个对象

{“类别”：

{"cat_id":"2","cat_title":"汽车与海洋"}}

]

并通过以下代码检索它：

```
 for (int i = 0; i < jsonArray.length(); i++) {

                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    String outerstr  = jsonObject.getString("category");

                    JSONObject json = new JSONObject(outerstr);

                    String id = json.getString("cat_id");
                    String title = json.getString("cat_title");

                    Log.i("title  ", title);                
                    Log.i("desc  ", id);

                    yourList.add( new yourClassObject(id,title));
                  }

                } catch (Exception e) {
                  e.printStackTrace();
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:00:07.050

```
JsonObject!=null 
```

试试这个代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:13:32.167

**节点**不是JSONArray 吗？因为您在第二个数据集中有 "nodes": [ ] 。

只需使用它来检查：

```
parentJSON.getJSONArray("nodes").length() == 0; 
```

如果它是 JSONObject 检查：

```
parentJSON.getJSONObject("nodes").length() == 0; 
```

JSONObject 上的方法 length() 给出了 JSONObject 中 NameValuePairs 的数量。

# xcode4 - 将 UItableviewcell 的 UILabel 值传递给 iPhone 中返回空值的另一个视图？

> ID：12796302
> 
> 赞同：0
> 
> 时间：2012-10-09T08:56:32.603
> 
> 标签：xcode4, uitableview

我是 Objective-C 的新手，并且在某个特定点被击中。我必须将 UILabel 值从 tableviewcell 传递到 Scrollview 中的标签，当附件ButtonTappedForRowWithIndexPath 动作发生时。但是该值没有传递..我不知道我哪里出错了? 我正在写这段代码：

```
 ViewController1.h:
UILabel *name1;
@property(nonatomic,retain)IBOutlet UILabel *name1;

    ViewController1.m:
- (void) tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{

ViewController2 *v2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
v2.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentModalViewController:v2 animated:YES];
 v2.provName=[name1 retain];   //name1 is the name of UILabel in TableView.
[v2 release];
}
    ViewController2.h
UILabel *providerName;
SString *provName;

    ViewController2.m:
- (void)viewDidLoad
{
providerName =[[UILabel alloc] init];
[providerName setFrame:CGRectMake(10,10,300,50) ];
providerName.textAlignment=UITextAlignmentLeft;
providerName.backgroundColor=[UIColor blackColor];

self.providerName.text=self.provName; 
 providerName.highlightedTextColor=[UIColor whiteColor];
[self.view addSubview:providerName];
} 
```

我可以看到标签但看不到其中的值...是这样吗？如何将 UIlabel 值传递给另一个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:55:22.087

在您`accessoryButtonTappedForRowWithIndexPath`只需进行如下更改，

添加

```
v2.provName=[name1 retain];   //name1 is the name of UILabel in TableView. 
```

就在上面

```
[self presentModalViewController:v2 animated:YES]; 
```

并且作为 V2 中的 provName 是综合的，无需`retain`分配它..

编辑：要获取单元格，请使用以下命令

```
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
v2.provName = cell.name1; 
```

`UITableViewCell`也可以是您的自定义单元格。

**编辑**：变化`CellForRow`

更新你`cellForRow`的

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"Cell";

    UITableViewCell* cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier]autorelease];
    }
    NSMutableDictionary *d = (NSMutableDictionary *) [arr objectAtIndex:indexPath.row];
    cell.accessoryType= UITableViewCellAccessoryDetailDisclosureButton;

    UILabel* name1= [[UILabel alloc]initWithFrame:CGRectMake(10, 5, 320, 10)];
    name1.font=[UIFont boldSystemFontOfSize:14];
    [name1 setTextAlignment:UITextAlignmentLeft];
    [name1 setText:[d valueForKey:@"Name"]];
    name1.tag = 111;
    [cell addSubview:name1];
    [name1 release];

    return cell;
} 
```

不要将您的单元格和 name1 设为全局，仅在`cellForRow`

更新您`didSelectRow`的如下

```
UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
UILabel* name1 = (UILabel*)[cell viewWithTag:111];
v2.provName = name1.text; 
```

这应该可以正常工作。

# c# - XNA 游戏课程

> ID：12796304
> 
> 赞同：1
> 
> 时间：2012-10-09T08:56:36.287
> 
> 标签：c#, visual-studio-2010, windows-phone-7, xna-4.0

由于我需要多个屏幕，1）我可以定义多个游戏类（继承自 Microsoft.Xna.Framework.Game 并具有不同的类名）。2）是否有任何设计缺陷以这种方式产生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:56:42.950

该程序首先初始化`Game1`继承该类的`Game`类。所以我认为更改自动代码不是一个好主意。

此外，顾名思义；如果您有多个`Game`课程，这意味着您正在运行多个“游戏”。但这种情况并非如此。相反，您在一个`Game`.

要分隔这些屏幕，您可以使用不同的`DrawableGameComponent`. 它还包含自己的`Draw`方法`Update`和您可以实现的方法。稍后您可以将所有这些`DrawableGameComponent`s添加到 的`Components`列表[属性](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game.components.aspx)中`Game1`。

所有的复杂性都将分布在`DrawableGameComponent`s 中。他们的`Draw`and`Update`方法会被 XNA 自动调用。

[这](http://msdn.microsoft.com/en-us/library/bb196942.aspx)可能会有所帮助。

我认为这是一个好方法。欢迎任何更好的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:57:06.507

我认为这在 Windows Phone 7 上是不可能的。该平台通过查找派生自`Game`实例的类来启动 XNA 游戏（与您自己创建实例的 Xbox 和 Windows 不同）。我怀疑如果您有多个派生类，它将失败。（你可以试试。）

然后是 的问题`GraphicsDevice`。我怀疑在 WP7 上设置图形设备的两个实例是不可能的。你如何改变哪一个可以写到屏幕上？我不知道有任何 API 可以做到这一点。

此外，如果您确实有两个独立的图形设备 - 您无法在两者之间共享内容。您将不得不加载它两次 - 一个性能问题。

理论上你可以设置两个实例`Game`来使用一个`GraphicsDevice`。但这涉及编写您自己的`GraphicsDeviceManager`. 这不是一件容易的事——而且肯定比简单地设置一个简单的状态机来处理不同的屏幕要困难得多。

或许可以查看[Game State Management](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management)示例，了解它应该如何完成的示例。

# android - OpenGL ES 1.x 是否支持使用抗锯齿或多重采样进行多边形平滑？

> ID：12796306
> 
> 赞同：2
> 
> 时间：2012-10-09T08:56:45.677
> 
> 标签：android, opengl-es, antialiasing, multisampling

我正在加载 wavefront .obj 格式的 3d 模型，并将其显示在 Android 设备的屏幕上。我正在使用 min3d 库来加载 obj 和渲染，而 min3d 库使用的是 openGL ES 1.x。问题是 3d 模型渲染不平滑（3d 模型的边缘不平滑）。

我对 openGL ES 了解不多，并且我在这个论坛上阅读了有关问题的信息，但没有获得有关特定 openGL ES 1.x 问题的太多信息。我得到了一些关于抗锯齿和多重采样的东西来更平滑地渲染边缘，但大多数答案都直接指向 openGL ES 2.0

有什么办法可以用 openGL ES 1.x 改进我的图形？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:35:55.227

我正在研究非常相似的问题。浏览一个小时后，发现几个有趣的链接。希望这可以帮助。

[http://agileroute.wordpress.com/2011/02/17/how-to-emulate-anti-aliasing-in-opengl-es-1-1/](http://agileroute.wordpress.com/2011/02/17/how-to-emulate-anti-aliasing-in-opengl-es-1-1/)

[如何摆脱 Android OpenGL ES 中的锯齿状边缘？](https://stackoverflow.com/questions/4934367/how-to-get-rid-of-jagged-edges-in-android-opengl-es)

[如何在 Android OpenGL ES 中进行多重采样？](https://stackoverflow.com/questions/7379710/how-to-do-multisampling-in-android-opengl-es)

# jquery - 日期选择器 - 如何仅禁用一个星期一？

> ID：12796307
> 
> 赞同：2
> 
> 时间：2012-10-09T08:56:58.840
> 
> 标签：jquery, jquery-plugins, datepicker

我想知道当现在是星期五时，如何禁用下星期一。我可以在每个星期一禁用，但我只想禁用一个，当一天是星期五，只有第一个星期一，而不是每个星期一。

我正在使用它，我正在进入 if 循环，但它没有返回任何内容。

```
minDate: new Date(y,m,fridayNotMonday),

function fridayNotMonday() 
{
  var vdate = new Date();
  var vday = vdate.getDay();
  var vm = vdate.getMonth(), vd = vdate.getDate(), vy = vdate.getFullYear();
  var vd1 = vdate.getDate() + 2;
  var vd2 = vdate.getDate() + 4;

  if (vday == 5) {
    alert("friday");
    firstDate: new Date(vy,vm,vd2);
    return firstDate
  } else {
    firstDate1: new Date(vy,vm,vd1);
    return firstDate1;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:23:01.423

您应该使用日期选择器的[`beforeShowDay`](http://api.jqueryui.com/datepicker/#option-beforeShowDay)选项

```
var now = new Date();
var day = now.getDay();
// on the following line 5 means friday. Days start counting from 0=sunday to 6=saturday.
// so if now is friday then find the date of the following monday
var disabled = (day===5)? new Date(now.getFullYear(), now.getMonth(), now.getDate()+3): null;

$('#datepickerelement').datepicker({
    beforeShowDay:function(current){
        // if the disabled date we calculate is the same as the one the plugin tries to show
        // then set its selectable status to false..
        if (disabled !== null && disabled.getTime() === current.getTime() ) {
            return [false];
        } else {
            return [true];
        }

    }
}); 
```

**演示在** [http://jsfiddle.net/r6QUd/2/](http://jsfiddle.net/r6QUd/2/)

# package - tfs 构建用户需要是目标服务器上的管理员才能进行 Web 部署

> ID：12796310
> 
> 赞同：0
> 
> 时间：2012-10-09T08:57:15.310
> 
> 标签：package, tfsbuild, msdeploy, webdeploy

要通过 Web 部署从 Tfs Build 部署到 IIS7 - 运行 tfs build 的用户是否需要成为目标服务器上的管理员？

我正在使用 MVC 4 .net 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:17:32.830

需要管理员访问权限是默认设置，但 MSDeploy 支持非管理员部署，只要您仅部署文件、ACL 和数据库更改。如果您需要部署 IIS 设置，您仍然需要管理员访问权限。

在 iis.net上有[关于配置非管理员部署的说明](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy)

# ruby-on-rails - PG::Error 服务器意外关闭连接

> ID：12796313
> 
> 赞同：7
> 
> 时间：2012-10-09T08:57:24.057
> 
> 标签：ruby-on-rails, ruby, postgresql

我是 Ruby on rails 的新手。我通过教程创建了两个基本的演示应用程序`learning by examples`

突然它停止为我的新示例应用程序工作。

我已经生成了一个控制器`Pages`和两个动作`home`，`contact`并没有什么花哨的。

现在，我无法打开任何页面，除了默认的 index.html rails 页面位于`localhost:3000`. `localhost:3000/pages/home`并`localhost:3000/pages/contact`返回此错误的页面。

> PG::错误
> 
> 服务器意外关闭连接这可能意味着服务器在处理请求之前或期间异常终止。

有时（通常当我重新启动 postgresql 时），

> PG::错误
> 
> 服务器意外关闭连接这可能意味着服务器在处理请求之前或期间异常终止。 **无法发送启动数据包：管道损坏**

这是我的堆栈跟踪

> activerecord (3.2.8) lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize' activerecord (3.2.8) lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in` new' activerecord (3.2.8) lib/active_record/connection_adapter/postgresql_adapter.rb:1213:in `connect' activerecord (3.2.8) lib/active_record/connection_adapters/postgresql_adapter.rb:329:in` initialize' activerecord (3.2.8) lib/ active_record/connection_adapters/postgresql_adapter.rb:28:in `new' activerecord (3.2.8) lib/active_record/connection_adapters/postgresql_adapter.rb:28:in` postgresql_connection' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in` checkout_new_connection' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/ connection_pool.rb:241:in `block (2 levels) in checkout' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in` loop' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout' /home/jashwant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in` mon_synchronize' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb: 233：在 `checkout' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in` 连接中的块'/home/jashwant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in` connection' activerecord (3.2.8) lib/active_record/connection_adapters /abstract/connection_pool.rb:404:in `retrieve_connection' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in` retrieve_connection' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection' activerecord (3.2.8) lib/active_record/query_cache.rb:67:in`rescue in call' activerecord (3.2.8) lib/active_record/query_cache.rb :61:in `call' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in` call' actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in` *run* _3261957284442330683_ *call* _599627944998934036__callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback' activesupport (3.2.8) lib/active_support/callbacks.rb:385:in`_run_call_callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks' actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in` call' actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in`call' railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app' railties (3.2.8) lib/rails/rack/logger.rb:16:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call' rack (1.4.1) lib/rack/methodoverride.rb:21:in`call' rack (1.4.1) lib/rack/runtime.rb: 17:in `call' activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in`call' rack (1.4.1) lib/rack/lock.rb:15:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in`call' railties (3.2.8) lib/rails/engine.rb:479:in `call' railties (3.2.8) lib/rails/application.rb:223:in`call' rack (1.4.1) lib /rack/content_length.rb:14:in `call' railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in`call' rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service' /home/jashwant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in` service' /home/jashwant/.rvm/rubies/ruby-1.9.3-p194 /lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run' /home/jashwant/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in` block in start_thread'

我暂时不使用数据库。我试图这样做，`rake db:migrate`但它返回相同的错误。

我在 Ubuntu 12.04 上（因为谷歌上的一些错误与 ubuntu 有关）

我在 SO 上发现了类似的问题，但它们正处于某个高级阶段，因此涉及一些高级解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:33:30.760

虽然，我没有使用数据库，但**在配置中指定端口可以`database.yml`解决问题**。默认情况下，该`rails new <app_name> --database=postgresql`命令不会放在`port`那里。

这是我的配置。

```
development:
  adapter: postgresql
  encoding: unicode
  database: sample_app_development
  pool: 5  
  port: 5433
  username: myusername
  password: mypassword
  reconnect: true 
```

# ios - 加入 UICollectionViewCell 之类的 HTML 行跨度表？

> ID：12796314
> 
> 赞同：1
> 
> 时间：2012-10-09T08:57:24.793
> 
> 标签：ios, html-table, uicollectionview, uicollectionviewcell

是否有可能像 HTML 单元格内容一样在 iOS 中加入 UICollectionViewCells 可以加入 rowspan 或 colspan？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:05:12.333

默认情况下`UICollectionViewFlowLayout`，您不能将单元格放置在 2 行中，因此在这种情况下“行跨度”是不可能的。您可以设置单元格的宽度，因此“colspan”是可能的“。但如果你想要两者，你必须编写一个自定义布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T21:53:18.800

该项目可以帮助您：

[https://github.com/bryceredd/RFQuiltLayout](https://github.com/bryceredd/RFQuiltLayout)

这对我很有用。

# installation - NSIS 在桌面上创建快捷方式时出错

> ID：12796317
> 
> 赞同：1
> 
> 时间：2012-10-09T08:57:51.797
> 
> 标签：installation, nsis

我正在尝试使用 NSIS 来安装我的应用程序。尝试在桌面上创建快捷方式时，失败。这是我正在使用的脚本相关部分：

```
SetOutPath "$INSTDIR"
File "${BIN_DIRECTORY}\app.exe"
CreateShortCut "$SMPROGRAMS\app\app.lnk" "$INSTDIR\app.exe"
CreateShortCut "$DESKTOP\app.lnk" "$INSTDIR\app.exe" 
```

这是日志：

```
Extract: app.exe... 100%
Create shortcut: C:\Users\roeia\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\app\app.lnk
Error creating shortcut: E:\Users\roeia\Desktop\app.lnk 
```

路径是正确的，我在那里创建或修改文件没有任何问题。我正在使用 Windows 7 64 位。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:47:56.287

这可能是一个正确的问题：您是否以管理员身份运行安装程序？

在脚本中指定`RequestExecutionLevel`可能有助于这样做：

```
RequestExecutionLevel admin ;try also with 'highest' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T12:13:36.633

也许在可执行路径中使用 \r 会导致问题。尝试 \r 避免字符替换。

# ajax - 防止 iOS 6 缓存 Ajax POST 请求

> ID：12796318
> 
> 赞同：7
> 
> 时间：2012-10-09T08:57:55.653
> 
> 标签：ajax, caching, cordova, safari, ios6

> **可能重复：**
> [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

`PhoneGap`我有一个在 Android 和 iOS 上运行良好的混合应用程序。但是当我开始在 iOS 6 中进行测试时，我注意到我没有为我的大多数 ajax 调用获取服务器数据——相反，我从以前的 ajax 调用中获取了缓存数据。

到目前为止，我已经尝试了以下选项来禁用缓存 -

1.  包含时间戳作为查询字符串参数
2.  `$.ajaxSetup({ cache: false });`
3.  在ajax调用内部`no-cache = true`
4.  `$.ajaxPrefilter(function (options, originalOptions, jqXHR) { options.data = jQuery.param($.extend(originalOptions.data||{}, { timeStamp: new Date().getTime() })); });`

但这些似乎都不起作用。我从我的 ajax 调用中调用 Java 操作类 - 这是否与上面列出的方法失败的原因有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T06:14:24.940

如何解决：有多种方法可以防止请求缓存。推荐的方法是添加一个无缓存标头。

这就是它的完成方式。

**jQuery** :

检查 iOS 6.0 并像这样设置 Ajax 标头。

```
$.ajaxSetup({ cache: false }); 
```

**泽普托**：

检查 iOS 6.0 并像这样设置 Ajax 标头。

```
$.ajax({
type: 'POST',
headers : { "cache-control": "no-cache" },
url : ,
data:,
dataType : 'json',
success : function(responseText) {…} 
```

服务器端

**爪哇**：

```
httpResponse.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
```

确保在将任何数据发送到客户端之前将其添加到页面顶部。

**。网**

```
Response.Cache.SetNoStore(); 
```

或者

```
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache); 
```

**PHP**

```
header('Cache-Control: no-cache, no-store, must-revalidate'); // HTTP 1.1.
header('Pragma: no-cache'); // HTTP 1.0. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:05:36.410

阅读此线程

[iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

您可以禁用网络服务器级别的缓存并在 URL 中使用时间戳。

# c# - ASP.Net MVC 上的防伪系统

> ID：12796319
> 
> 赞同：11
> 
> 时间：2012-10-09T08:57:56.413
> 
> 标签：c#, asp.net-mvc

当我输入以下代码时：

```
 @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
    {
        @Html.AntiForgeryToken()
        <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
    } 
```

这

```
@Html.AntiForgeryToken() 
```

部分被抛出以下异常：

*提供的“System.Web.Security.FormsIdentity”类型标识标记为 IsAuthenticated = true，但没有 Name 值。默认情况下，防伪系统要求所有经过身份验证的身份都具有唯一的名称。如果无法为此身份提供唯一名称，请考虑将静态属性 AntiForgeryConfig.AdditionalDataProvider 设置为可以为当前用户提供某种形式的唯一标识符的类型的实例。*

我检查了许多示例并尝试在网上搜索，但找不到任何解释。我想知道为什么这个错误会发生在我身上？以及如何解决它以使用防伪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:02:03.117

它告诉您它不起作用，因为尽管已登录，但`Membership.GetUser().UserName`没有提供可用于散列的名称。

所以你真正的问题是，“我的***登录***用户怎么没有用户名？”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-14T13:48:42.233

在某些情况下，登录用户没有设置 Identity.Name（在我的情况下，我必须将我的应用程序与一些疯狂的登录系统集成）。然后有两种方法：

1) 不安全 - 所有用户都将被防伪系统以同样的方式对待，无论他们的身份验证状态如何

```
// System.Web.WebPages.dll
using System.Web.Helpers;

// not a production solution
public class MvcApplication : HttpApplication {
  protected void Application_Start() {
    AntiForgeryConfig.SuppressIdentityHeuristicChecks = true;
  }
} 
```

2) 安全 - 提供您自己（自定义）的方式来区分您的用户

```
using System;
using System.Globalization;
using System.Web;
using System.Web.Helpers;

public class ContoscoAntiForgeryAdditionalDataProvider : IAntiForgeryAdditionalDataProvider {
  public string GetAdditionalData(HttpContextBase context) {
    if (context == null) {
      throw new ArgumentNullException("context");
    }

    var contoscoContext = new ContoscoHttpContext(context);
    int userID = contoscoContext.GetUserID().GetValueOrDefault();
    return Convert.ToString(userID, CultureInfo.InvariantCulture);
  }

  public bool ValidateAdditionalData(HttpContextBase context, string additionalData) {
    string data = GetAdditionalData(context);
    return string.Compare(data, additionalData, StringComparison.Ordinal) == 0;
  }
}

public class MvcApplication : HttpApplication {
  protected void Application_Start() {
    AntiForgeryConfig.AdditionalDataProvider = 
      new ContoscoAntiForgeryAdditionalDataProvider(); 
  }
} 
```

`ContoscoHttpContext`根据当前上下文（即）返回 UserID（或任何唯一用户令牌）的类在哪里`HttpContextBase`：

```
public class ContoscoHttpContext {
  private HttpContextBase _context;
  public ContoscoHttpContext(HttpContextBase context) {
    _context = context;
  }
  public int? GetUserID() {
    // TODO: provide your own implementation how to get user id
    // based on HttpContextBase stored in _context
    // in my case it was something like 
    // return ((ContoscoPrincipal)_context.User).UserID;
  }
} 
```

# ads - 广告服务器频次上限

> ID：12796320
> 
> 赞同：1
> 
> 时间：2012-10-09T08:58:06.103
> 
> 标签：ads, advertisement-server

频率上限：这是广告中的一个术语，表示限制（上限）网站特定访问者显示特定广告的次数（频率）。此限制适用于从同一广告网络投放广告的所有网站。

最后一行在这里是什么意思？我无法理解。什么是“同一个广告网络”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:01:10.757

这意味着相同的广告提供商。实际对广告空间进行投标的人。

例如 Atlas、Doubleclick、Rocket Fuel、Quantcast 等。

# php - 如何按值的日期对php中数组的输出进行排序？

> ID：12796322
> 
> 赞同：0
> 
> 时间：2012-10-09T08:58:09.567
> 
> 标签：php

我有一个数组如下。我只是想按日期订购它的回声，所以我们在顶部有最近的日期。我不确定是否。php 可以对数组进行排序，并且 b. 它是否可以读取其格式的日期。我可以更改捕获 din 的格式，如果这样会更容易？

```
Array (
    [0] => Array (
    [month_year] => September2012
    [vimeo_link] => http://vimeo.com/472
    )
    [1] => Array (
    [month_year] => July2012
    [vimeo_link] => https://vimeo.com/460
    )
    [2] => Array (
    [month_year] => August2012
    [vimeo_link] => https://vimeo.com/490
    )

) 
```

```
foreach($rows as $row){?>

    <li><a target="_blank" href="<?php echo $row['vimeo_link'];?>"><?php echo $row['month_year'];?></a></li>            
<?php
    }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:02:56.660

你可以试试

```
$rows = Array(
        "0" => Array("month_year" => "September2012","vimeo_link" => "http://vimeo.com/472"),
        "1" => Array("month_year" => "July2012","vimeo_link" => "https://vimeo.com/460"),
        "2" => Array("month_year" => "August2012","vimeo_link" => "https://vimeo.com/490"));

usort($rows, function ($a, $b) {
    $a = DateTime::createFromFormat("FY", $a['month_year']);
    $b = DateTime::createFromFormat("FY", $b['month_year']);
    return ($a == $b) ? 0 : (($a < $b) ? - 1 : 1);
});

foreach ( $rows as $row ) {
    printf("<li><a target=\"_blank\" href=\"%s\">%s</a></li>", $row['vimeo_link'], $row['month_year']);
} 
```

输出

*   2012 年 7 月*   2012 年 8 月*   2012 年 9 月

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:01:15.853

您需要将这些月份/日期字符串转换为有效的日期或时间戳，然后您需要查看`usort()`

[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)

# g++ - 如何理解 gprof 输出？

> ID：12796323
> 
> 赞同：0
> 
> 时间：2012-10-09T08:58:13.837
> 
> 标签：g++, gprof

这是我的源代码

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <inttypes.h>
#include <windows.h>

#include <string>
#include <vector>

static void set(const char *buf)
{
    static std::string *localstring;
    localstring = new std::string;
    (*localstring) = buf;
    delete localstring;
}

int main()
{
    const uint32_t BUF_SIZE = 1024 * 4;//32;
    char buf[BUF_SIZE+4];
    int i;
    ULONG T0, T1;

    for(i = 0; i < BUF_SIZE; i++) {
        buf[i] = 'a' + i % 26;
    }

    T0 = GetTickCount();
    for(i = 0; i < 10000000; i++) {
        const int pos = i % BUF_SIZE + 1;
        const char save_ch = buf[pos - 1];
        set(buf);
        buf[pos - 1] = 0;
        buf[pos - 1] = save_ch;
    }
    T1 = GetTickCount();

    printf("Totally %u mseconds\n", T1 - T0);
    return 0;
} 
```

以下是分析结果：
平面轮廓：

```
Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  Ts/call  Ts/call  name    
 50.00      0.09     0.09                             _fu0___ZNSs4_Rep20_S_empty_rep_storageE
 38.89      0.16     0.07                             _fu1___ZNSs4_Rep20_S_empty_rep_storageE
  5.56      0.17     0.01                             std::string::assign(char const*, unsigned int)
  5.56      0.18     0.01                             strlen

 %         the percentage of the total running time of the
time       program used by this function.

cumulative a running sum of the number of seconds accounted
 seconds   for by this function and those listed above it.

 self      the number of seconds accounted for by this
seconds    function alone.  This is the major sort for this
           listing.

calls      the number of times this function was invoked, if
           this function is profiled, else blank.

 self      the average number of milliseconds spent in this
ms/call    function per call, if this function is profiled,
       else blank.

 total     the average number of milliseconds spent in this
ms/call    function and its descendents per call, if this 
       function is profiled, else blank.

name       the name of the function.  This is the minor sort
           for this listing. The index shows the location of
       the function in the gprof listing. If the index is
       in parenthesis it shows where it would appear in
       the gprof listing if it were to be printed.

             Call graph (explanation follows)

granularity: each sample hit covers 4 byte(s) for 5.56% of 0.18 seconds

index % time    self  children    called     name
                                                 <spontaneous>
[1]     50.0    0.09    0.00                 _fu0___ZNSs4_Rep20_S_empty_rep_storageE [1]
-----------------------------------------------
                                                 <spontaneous>
[2]     38.9    0.07    0.00                 _fu1___ZNSs4_Rep20_S_empty_rep_storageE [2]
-----------------------------------------------
                                                 <spontaneous>
[3]      5.6    0.01    0.00                 std::string::assign(char const*, unsigned int) [3]
-----------------------------------------------
                                                 <spontaneous>
[4]      5.6    0.01    0.00                 strlen [4]
-----------------------------------------------

 This table describes the call tree of the program, and was sorted by
 the total amount of time spent in each function and its children.

 Each entry in this table consists of several lines.  The line with the
 index number at the left hand margin lists the current function.
 The lines above it list the functions that called this function,
 and the lines below it list the functions this one called.
 This line lists:
     index  A unique number given to each element of the table.
        Index numbers are sorted numerically.
        The index number is printed next to every function name so
        it is easier to look up where the function in the table.

     % time This is the percentage of the `total' time that was spent
        in this function and its children.  Note that due to
        different viewpoints, functions excluded by options, etc,
        these numbers will NOT add up to 100%.

     self   This is the total amount of time spent in this function.

     children   This is the total amount of time propagated into this
        function by its children.

     called This is the number of times the function was called.
        If the function called itself recursively, the number
        only includes non-recursive calls, and is followed by
        a `+' and the number of recursive calls.

     name   The name of the current function.  The index number is
        printed after it.  If the function is a member of a
        cycle, the cycle number is printed between the
        function's name and the index number.

 For the function's parents, the fields have the following meanings:

     self   This is the amount of time that was propagated directly
        from the function into this parent.

     children   This is the amount of time that was propagated from
        the function's children into this parent.

     called This is the number of times this parent called the
        function `/' the total number of times the function
        was called.  Recursive calls to the function are not
        included in the number after the `/'.

     name   This is the name of the parent.  The parent's index
        number is printed after it.  If the parent is a
        member of a cycle, the cycle number is printed between
        the name and the index number.

 If the parents of the function cannot be determined, the word
 `<spontaneous>' is printed in the `name' field, and all the other
 fields are blank.

 For the function's children, the fields have the following meanings:

     self   This is the amount of time that was propagated directly
        from the child into the function.

     children   This is the amount of time that was propagated from the
        child's children to the function.

     called This is the number of times the function called
        this child `/' the total number of times the child
        was called.  Recursive calls by the child are not
        listed in the number after the `/'.

     name   This is the name of the child.  The child's index
        number is printed after it.  If the child is a
        member of a cycle, the cycle number is printed
        between the name and the index number.

 If there are any cycles (circles) in the call graph, there is an
 entry for the cycle-as-a-whole.  This entry shows who called the
 cycle (as parents) and the members of the cycle (as children.)
 The `+' recursive calls entry shows the number of function calls that
 were internal to the cycle, and the calls entry for each member shows,
 for that member, how many times it was called from other members of
 the cycle.

Index by function name

   [3] std::string::assign(char const*, unsigned int) [2] _fu1___ZNSs4_Rep20_S_empty_rep_storageE
   [1] _fu0___ZNSs4_Rep20_S_empty_rep_storageE [4] strlen 
```

程序的实际运行时间是打印消息后的 15 秒，而不是分析结果的 0.18 秒。为什么会有如此大的差异以及如何理解分析输出？

BR,若尘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:48:02.913

您正在做的主要事情是`new`字符串赋值和`delete`. 如果其中任何一个在操作系统中花费时间，或者代码未与您的构建链接，则采样器将看不到它。就那么简单。

[*这不是 gprof 的唯一问题。*](https://stackoverflow.com/a/1779343/23771)

# php - 在新标签页中打开页面是否有任何 PHP 函数

> ID：12796324
> 
> 赞同：17
> 
> 时间：2012-10-09T08:58:14.550
> 
> 标签：php, javascript, jquery, html

我有一个带有动作的表格，例如 register.php

我还有一个 Google 群组 API 链接 -

[https://groups.google.com/group/GROUPNAME/boxsubscribe?p=ConfirmExplanation&email=EMAIL_ID&_referer&hl=en](https://groups.google.com/group/GROUPNAME/boxsubscribe?p=ConfirmExplanation&email=EMAIL_ID&_referer&hl=en)

简而言之...**在新标签页中打开页面是否有任何 PHP 函数；在页面加载...**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T09:04:27.607

将标签上的`target`属性与值一起使用。`anchor``_blank`

**例子：**

```
<a href="http://google.com" target="_blank">Click Me!</a> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T09:01:04.917

您可以在文件中编写 JavaScript 代码。

将以下代码放入您的客户端文件中：

```
<script>

    window.onload = function(){
         window.open(url, "_blank"); // will open new tab on window.onload
    }
</script> 
```

使用 jQuery.ready

```
<script>
  $(document).ready(function(){
      window.open(url, "_blank"); // will open new tab on document ready
  });
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-27T17:24:00.510

您可以同时使用 PHP 和 javascript。在后端执行您的 php 代码并重定向到 php 页面。在您重定向的 php 页面上添加以下代码：

```
<?php if(condition_to_check_for){ ?>

    <script type="text/javascript">
       window.open('url_goes_here', '_blank');
    </script>

<?  } ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T09:01:00.973

您可以简单地使用`target="_blank"`在新选项卡中打开页面

```
<a href="whatever.php" target="_blank">Opens On Another Tab</a> 
```

或者您可以简单地使用 javascript 进行**加载**

```
<body onload="window.open(url, '_blank');"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-06T10:57:44.217

这是一个技巧，

```
function OpenInNewTab(url) {

  var win = window.open(url, '_blank');
  win.focus();
} 
```

在大多数情况下，这应该直接发生在链接的 onclick 处理程序中，以防止弹出窗口阻止程序和默认的“新窗口”行为。你可以这样做，或者向你的 DOM 对象添加一个事件监听器。

```
<div onclick="OpenInNewTab();">Something To Click On</div> 
```

# java - Axis2：尚未设置运出

> ID：12796328
> 
> 赞同：0
> 
> 时间：2012-10-09T08:58:26.297
> 
> 标签：java, client, axis2

我正在使用axis2 编写一个SOAP 客户端。我获取了 wsdl 文件并生成了一个存根类。然后我尝试像这样调用删除服务：

```
RequestObj req = new RequestObj();
req.setParam("xxxxx");

ServicePortStub stub = new ServicePortStub();       
ResponseObj res = stub.remoteService(req); 
```

`org.apache.axis2.AxisFault: Transport out has not been set`但我在调用时遇到了异常`remoteService`。任何想法？

# android - 从 SQLite DB 中获取一行并将值保存到单个变量中并将它们显示到不同的文本视图中

> ID：12796330
> 
> 赞同：1
> 
> 时间：2012-10-09T08:58:27.147
> 
> 标签：android, android-sqlite

我在我的数据库适配器类中运行一个查询，类似这样，我提供一个 ID 并希望获取与该 ID 关联的行：

```
 public Cursor fetchRow(String a) {
    String Key = a; 

    return mDb.query(DATABASE_TABLE0, new String[] {IDno1, GIDno1,Name1,Owner1,Breed1,Gender1}, "IDno=?",new String[]{Key}, null, null, null, null);
} 
```

现在在我的类中，我想将从这个查询返回的各个元素绑定到不同的变量，但我很困惑如何实现这一点。我正在做类似的事情：

```
 private void fillData() {
    Cursor c = DBHelper.fetchRow();

   // List<String> idList = new ArrayList<String>();
    if (c.moveToFirst()) {

             }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:10:44.210

```
try {
            c = null;
            String select = "Select * FROM tbl";
            c = db.rawQuery(select, null);
            if (null!=c) {
                while (c.moveToNext()) {
                    //Here you can directly set the value in textview
                    txtview.setText(c.getString(c.getColumnIndex("column_name")));
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }finally {
            c.close();
        } 
```

通过这种方式，您可以获得您的值并将其直接设置为 textview。如果您确定只有一行，则不要使用 while 语句。

```
if (null!=c) {
    c.moveToNext();
    txtview.setText(c.getString(c.getColumnIndex("column_name")));
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:10:48.630

做这样的事情做一个类，在其中声明 setter 和 getter

```
 private void fillData() {
    Cursor c = DBHelper.fetchRow();

    List<String> idList = new ArrayList<String>();
    if (c.moveToFirst()) {
        do {
            IdList q = new IdList ();
            q.setid0(c.getString(0));
            q.setid1(c.getString(1));
            q.setid2(c.getString(2));
            q.setid3(c.getString(3));
            q.setid4(c.getString(4));
                idList .add(q);
            }
        } while (c.moveToNext());

    }
} 
```

并从类中获取值并设置为 textview

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:18:47.573

你需要类似的东西：

```
variable1 = c.getDouble(c.getColumnIndex("Column1"));
variable2 = c.getString(c.getColumnIndex("Column2")); 
```

# android - 如何制作 Android Web 服务器？

> ID：12796334
> 
> 赞同：-1
> 
> 时间：2012-10-09T08:58:50.217
> 
> 标签：android, c++, http, web, simplehttpserver

我如何制作像 kws 这样的应用程序，它允许我们的手持设备充当服务器。它应该能够处理发布请求并托管一个网站。知道我应该从哪里开始吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T09:42:19.053

我假设您正在使用 C++ 进行开发。

您可以从 Ben Campbell的[HappyHTTP库和](http://scumways.com/happyhttp/happyhttp.html)[libcurl](http://curl.haxx.se/libcurl/)开始，在 Android 上创建您的小型 Web 服务器。两者都可以很容易地为 Android 编译并且运行良好。如果您只需要处理 get/post 请求，那就绰绰有余了。

这是一个如何在 C++ 中执行此操作的示例：[https ://github.com/corporateshark/Android-NDK-Game-Development-Cookbook/tree/master/Chapter3/8_MakingWebServer](https://github.com/corporateshark/Android-NDK-Game-Development-Cookbook/tree/master/Chapter3/8_MakingWebServer)

# sql - 在 vba 中使用 ADODB 在 SQL 中命名变量

> ID：12796339
> 
> 赞同：5
> 
> 时间：2012-10-09T08:59:06.770
> 
> 标签：sql, sql-server, excel, vba, adodb

我有很多 SQL 脚本，其中许多在整个过程中使用各种不同的变量，我希望能够将结果直接放入 Excel。希望尽可能“顺利”地做到这一点，以便当有人给我一个新的 SQL 脚本（可能相对复杂）时，设置收集其结果的电子表格相对干净。

目前正在尝试使用 ADODB 命令对象参数来使其工作，但我什至无法获得一个非常基本的示例来工作。我有以下 VBA：

```
Dim oConnection As ADODB.Connection
Set oConnection = New ADODB.Connection
oConnection.ConnectionString = "MyConnectionString"
oConnection.Open 
Dim cmd As ADODB.Command
Set cmd = New ADODB.Command    
cmd.ActiveConnection = oConnection 
```

到这里只是设置连接，这似乎工作正常。

```
cmd.CommandText = "DECLARE @DateID integer;" & _
"SELECT TOP 10 * FROM dbo.SomeRecords " & _
"WHERE DateID = @DateID" 
cmd.CommandType = adCmdText

Dim DateID As ADODB.Parameter
Set DateID = cmd.CreateParameter("@DateID", adInteger, adParamInput)
cmd.Parameters.Append DateID
DateID.Value = 20120831

Dim rst AS ADODB.RecordSet
Set rst = cmd.Execute()

ActiveSheet.Range("A1").CopyFromRecordset rst 
```

不幸的是，这不会返回任何东西。但是，如果我替换该行：

```
"WHERE DateID = @DateID" 
```

有了这个：

```
"WHERE DateID = 20120831" 
```

然后查询完全返回您所期望的（8 月 31 日的前 10 条记录），所以显然我没有将变量的值从 VBA 正确传递到 SQL，但我不得不承认我几乎被卡住了.

当然*，有些东西*正在传递到 SQL 中（如果我在 SQL 中将变量 @DateID 的类型更改为 datetime，那么我会得到一个 SQL Server 算术溢出错误，试图将某些东西转换为 datetime），但它没有做什么我期待着。

我想有两个问题：有没有办法修复这段代码？有没有更好的方法来实现开头描述的总体目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:03:24.003

试试这个

```
cmd.CommandText = "DECLARE @DateID integer;" & _
"SET @DateID = ?DateID;" & _
"SELECT TOP 10 * FROM dbo.SomeRecords " & _
"WHERE DateID = @DateID" 
.....
Set DateID = cmd.CreateParameter("?DateID", adInteger, adParamInput) 
```

关于：

> 在这种情况下，为什么要首先为他们命名

好吧，这样您就可以将它们匹配起来，如上所示。一定要多次使用它，但要使用`sql-server local`声明并将其设置在那里，如图所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:00:32.130

`DECLARE @DateID integer;`从 SQL 字符串中删除。IE：

```
cmd.CommandText = "SELECT TOP 10 * FROM dbo.SomeRecords " & _ 
    "WHERE DateID = @DateID" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:30:41.197

ADO 参数化查询中的参数需要 a`?`作为占位符，因此：

```
"SELECT TOP 10 * FROM dbo.SomeRecords WHERE DateID = ?" 
```

# installation - msi 安装程序 postbuildevent cscript "$(ProjectDir)EnableLaunchApplication.js" "$(BuiltOuputPath)"

> ID：12796341
> 
> 赞同：1
> 
> 时间：2012-10-09T08:59:13.597
> 
> 标签：installation, windows-installer

我有 MSI 安装程序项目，其中 postbuildevent == cscript "$(ProjectDir)EnableLaunchApplication.js" "$(BuiltOuputPath)"

1 我已经苦苦挣扎了几个小时的问题 - 如何防止在卸载时运行此脚本 - 即仅在安装时运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T19:28:08.773

构建后事件不会在安装或卸载时运行。他们运行后期构建

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:21:12.820

基于[这个线程](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx?PageIndex=2)，我修改/添加了这些行：

```
sql = "INSERT INTO `ControlEvent` (`Dialog_`, `Control_`, `Event`, `Argument`, `Condition`, `Ordering`) VALUES ('FinishedForm', 'CloseButton', 'DoAction', 'VSDCA_Launch', 'LAUNCHAPP=1 AND NOT REMOVE', '0')";

sql = "INSERT INTO `ControlCondition` (`Dialog_`, `Control_`, `Action`, `Condition`) VALUES ('FinishedForm', 'CheckboxLaunch', 'Hide', 'Installed')";
view = database.OpenView(sql);
view.Execute();
view.Close(); 
```

# wpf - Listview XAML 中的备用背景颜色

> ID：12796342
> 
> 赞同：28
> 
> 时间：2012-10-09T08:59:16.890
> 
> 标签：wpf, silverlight, xaml, listview, microsoft-metro

我正在使用基于 itemTemplate 的 listView。所以我需要在我的模板中交替背景颜色：
- 第一行：白色
- 第二行：灰色
- 第三行：白色
- 第四行：灰色

这是我的模板：

```
 <DataTemplate x:Key="ItemFlight" >
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="60"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Background="#28AADB" Margin="2">
                <Image Source="{Binding Path=IsArrival, Converter={StaticResource BooleanToImageDisplayConverter}}" Width="30" Height="30" VerticalAlignment="Center" Margin="5"/>
            </Border>
            <Grid Grid.Column="1" VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="4*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="3*"/>
                    <ColumnDefinition Width="6*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Text="{Binding FlightName}" FontWeight="Bold" Grid.Column="0" Grid.Row="0"  Margin="10" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding ArrivalOrDepartDateTime, Converter={StaticResource DateTimeConverter}}"  FontWeight="Bold" Grid.Column="0" Grid.Row="1" Margin="10" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding Terminal, Converter={StaticResource StringUpperConverter}}" Grid.Column="1" Grid.Row="0" Margin="10"  Visibility="{Binding Path=IsArrival,Converter={StaticResource BooleanToVisibilityReverseConverter}}" Style="{StaticResource MyTextBlockStyle}"/>
                <TextBlock Text="{Binding CityInfo.Name}" Grid.Column="1" Grid.Row="0" Margin="10" Visibility="{Binding Path=IsArrival,Converter={StaticResource BooleanToVisibilityConverter}}" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding DepartureTime}"  Grid.Column="1" Grid.Row="1" Margin="10" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding CityInfo.Name}" Grid.Column="2" Grid.Row="0" Margin="10" Style="{StaticResource MyTextBlockStyle}"  Visibility="{Binding Path=IsArrival,Converter={StaticResource BooleanToVisibilityReverseConverter}}"/>
                <TextBlock Text="{Binding Terminal, Converter={StaticResource StringUpperConverter}}"  Visibility="{Binding Path=IsArrival,Converter={StaticResource BooleanToVisibilityConverter}}" Grid.Column="2" Grid.Row="0" Margin="10" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding ArrivalTime}" Grid.Column="2" Grid.Row="1" Margin="10" Style="{StaticResource MyTextBlockStyle}"/>

                <TextBlock Text="{Binding Status}" Grid.Column="3" Grid.Row="0" Grid.RowSpan="2" Margin="15" Style="{StaticResource MyTextBlockStyle}"  Foreground="#EA6A1E" FontSize="20" TextWrapping="Wrap" />

            </Grid>
        </Grid>
    </DataTemplate> 
```

请问我该怎么做？？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-07-04T19:45:39.973

我试过这个，它对我有用。

```
<Window x:Class="TryResponses.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:vm="clr-namespace:TryResponses"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <vm:MainWindowViewModel x:Key="MainWindowViewModel" />
</Window.Resources>
<Grid Background="LightGray" DataContext="{StaticResource MainWindowViewModel}">
    <Grid.Resources>
        <Style TargetType="ListViewItem">
            <Style.Triggers>
                <Trigger Property="ItemsControl.AlternationIndex"  Value="0">
                    <Setter Property="Background" Value="LightBlue" />
                </Trigger>
                <Trigger Property="ItemsControl.AlternationIndex"  Value="1">
                    <Setter Property="Background" Value="LightGray" />
                </Trigger>
            </Style.Triggers>
        </Style>
        <DataTemplate DataType="system:String">
            <!-- put your data template here -->
        </DataTemplate>
    </Grid.Resources>
    <ListView ItemsSource="{Binding Items}" AlternationCount="2" />
</Grid> 
```

我希望这将有所帮助。

问候

克劳德

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-09T14:20:24.240

您应该使用 AlternationCount 属性，它适用于 ListBox、ListView 或任何其他从 ItemsControl 继承的控件。属性定义和两个示例包含在
[https://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.alternationcount%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.alternationcount%28v=vs.110%29.aspx)中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-25T23:31:11.033

要更清楚地查看所选线条，您可以尝试以下操作：（不要在意颜色和最终渲染，我没有花必要的时间让它变得性感）

```
<Grid DataContext="{StaticResource MainWindowViewModel}">
    <Grid.Resources>
        <local:FalseToCollapsedConverter x:Key="FalseToCollapsedConverter" />
    </Grid.Resources>
    <ListView ItemsSource="{Binding Items}" AlternationCount="2" HorizontalContentAlignment="Stretch">
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <ListView.Resources>
            <Style TargetType="ListViewItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListViewItem">
                            <Grid x:Name="line">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <ContentControl Content="{Binding .}" Margin="4" />
                                <TextBlock Grid.Column="1" Text="V" Margin="4" Visibility="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListViewItem, Mode=FindAncestor}, Converter={StaticResource FalseToCollapsedConverter}}" />
                                <Border Grid.ColumnSpan="2" Background="#5500FF00" 
                                        BorderBrush="Blue" BorderThickness="2"
                                        Visibility="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListViewItem, Mode=FindAncestor}, Converter={StaticResource FalseToCollapsedConverter}}" />
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="FontWeight" Value="Bold" />
                                </Trigger>
                                <Trigger Property="ItemsControl.AlternationIndex"  Value="0">
                                    <Setter TargetName="line" Property="Background" Value="#CCCCFF" />
                                </Trigger>
                                <Trigger Property="ItemsControl.AlternationIndex"  Value="1">
                                    <Setter TargetName="line" Property="Background" Value="#CCFFCC" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ListView.Resources>
    </ListView>
</Grid> 
```

# node.js - nodejs模块不导出功能

> ID：12796344
> 
> 赞同：3
> 
> 时间：2012-10-09T08:59:18.167
> 
> 标签：node.js

我的 Nodejs 应用程序遇到了问题。我有两个不同的应用程序正在使用共享库，它们的位置是为了在 node_modules 中找到上一层。所以我有这个结构`./app1/app.js`，`./app2/app.js`并且`./node_modules/shared.libs/index.js`。

`shared.libs`依次安装了一些其他模块，如猫鼬、redis 等。加上一些带有附加功能的 mogoose 模型。所有都是这样导出的`index.js`：

```
exports.async = require('async');
exports.config = require('./config');
exports.utils = require('./lib/utils'); 
```

然后在应用程序中我像这样导入它们：

```
var libs = require('shared.libs');
var config = libs.config; 
```

因此，在此代码之后，我可以使用`config`来自该共享库的代码。这部分过去和现在都很好。但是现在我需要在这个库之上添加额外的层（阅读：为两个应用程序提供更统一的接口）。我试图做的是将一些函数添加到`index.js`共享库中，然后使用这些函数导出整个对象。但是，每当我尝试调用以前导入的（按`var libs = require('shared.libs');`）对象时，它都会说`libs`未定义。

我在这里做错了什么？

我通常希望保持其他代码相同，因此我不需要`require`到处更换零件，但同时提供来自共享库的附加功能，这些功能可从该导入的`libs`对象中获得。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T20:13:25.083

这绝对应该有效：

```
module.exports = {
  async: require('async'),
  config: require('./config'),
  utils: require('./lib/utils'),
  foo: function () {
    return 'bar';
  }
}; 
```

参考像：

```
var libs = require('shared.libs');

console.log(libs.async);
console.log(libs.config);
console.log(libs.utils);
console.log(libs.foo);
console.log(libs.foo()); 
```

让我想知道的是你上面的评论之一，你得到了一个错误`libs is not defined`。看起来您之前应该有其他未被注意到的错误..在您的`shared.libs`模块初始化期间..

# .net - 为 Visual Studio 重新安装 Service Pack 1 时出错

> ID：12796347
> 
> 赞同：0
> 
> 时间：2012-10-09T08:59:21.393
> 
> 标签：.net, visual-studio-2010, visual-studio

我想安装 VS 2010 Ultimate。我已经有了 VS Express C# 和 Web Developer。当我下载终极版本时，在安装过程中我遇到了 Service Pack 1 for VS 的错误。我尝试卸载 SP1，但出现以下错误：

```
Number of applicable items: 2
WM_ACTIVATEAPP: Focus stealer's windows WAS visible, NOT taking back focus
Patch () Uninstall succeeded on product (Microsoft Visual C# 2010 Express - ENU). Msi Log: 
Patch () Uninstall succeeded on product (Microsoft Visual Web Developer 2010 Express - ENU). Msi Log: 
Patch () Uninstall succeeded on product (Microsoft Team Foundation Server 2010 Object Model - ENU). Msi Log: 
Patch () Uninstall failed on product (Microsoft Visual Studio 2010 ADO.NET Entity Framework Tools). Msi Log: 
Patch () Uninstall failed on product (Visual Studio 2010 Prerequisites - English). Msi Log: 
Patch () Uninstall failed on product (Microsoft Visual Studio 2010 Express Prerequisites x64 - ENU). Msi Log: 
Exe (d:\eda4099f7bd96409fc6d81113d28\SetupUtility.exe) succeeded.
Exe Log File: dd_SetupUtility.txt
Patch () Uninstall failed on product (Microsoft Visual Studio 2010 ADO.NET Entity Framework Tools). Msi Log: 
Patch () Uninstall failed on product (Visual Studio 2010 Prerequisites - English). Msi Log: 
Patch () Uninstall failed on product (Microsoft Visual Studio 2010 Express Prerequisites x64 - ENU). Msi Log: 
MSI (C:\Users\Wazzaap\AppData\Local\Temp\Microsoft Visual Studio 2010 Service Pack 1_10.0.40219\VS10sp1_x86.msi) Uninstall succeeded. Msi Log: Microsoft Visual Studio 2010 Service Pack 1_20121009_103241668-MSI_VS10sp1_x86.msi.txt
Final Result: Installation failed with error code: (0x80070643), "Błąd krytyczny podczas instalacji. " (Elapsed time: 0 00:19:07). 
```

如何修复它？我也想拥有 Ultimate 版本和 webdeveloper。但是这个Service Pack 好像坏了。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:06:32.593

您可以运行 Microsoft 创建的 fixit 工具。

[http://go.microsoft.com/?linkid=9666880](http://go.microsoft.com/?linkid=9666880)

# jsf-2 - JSF @ViewScoped Bean 状态丢失

> ID：12796348
> 
> 赞同：2
> 
> 时间：2012-10-09T08:59:22.100
> 
> 标签：jsf-2, richfaces

我正在为小型 CRUD 应用程序使用 @ViewScoped Bean 我有一个编辑和查看页面，但是当我单击按钮（编辑）时，它将呈现编辑表单。编辑表单出现后，保存按钮或取消按钮不会调用该函数，而是呈现整个页面。actionListener 的函数根本没有被调用，一切都被初始化了。我的 bean 和页面有问题吗？我正在使用带有richfaces 和facelet 的JSF 2。

```
 //ViewScoped Bean   

            /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package com.legendMgr.Legend;

    import java.io.Serializable;
    import java.sql.SQLException;
    import java.util.List;

    import java.util.logging.Logger;
    import javax.annotation.PostConstruct;

    import javax.faces.application.FacesMessage;
    import javax.faces.bean.ManagedBean;
    import javax.faces.bean.ViewScoped;

import javax.faces.context.FacesContext;

/**
 *
 * @author kitex
 */
@ManagedBean(name = "legendbean")
@ViewScoped
public class LegendController implements Serializable {

    LegendDTO legendDTO;
    String selectedLegend;
    List<LegendDTO> legendDTOs;
    boolean edit;

    public List<LegendDTO> getLegendDTOs() {
        return legendDTOs;
    }

    public void setLegendDTOs(List<LegendDTO> legendDTOs) {
        this.legendDTOs = legendDTOs;
    }

    @PostConstruct
    void initialiseSession() {
        FacesContext.getCurrentInstance().getExternalContext().getSession(true);
    }

    public LegendController() {
        if (!edit) {
            legendDTO = new LegendDTO();
            legendDTO.getList().add(new Legend());
            legendDTOs = getLegends();
        }
    }

    public String getSelectedLegend() {
        return selectedLegend;
    }

    public void setSelectedLegend(String selectedLegend) {
        this.selectedLegend = selectedLegend;
    }

    public boolean isEdit() {
        return edit;
    }

    public void setEdit(boolean edit) {
        this.edit = edit;
    }

    public LegendDTO getLegendDTO() {
        return legendDTO;
    }

    public void setLegendDTO(LegendDTO legendDTO) {
        this.legendDTO = legendDTO;
    }

    public void addLegendRange() {
        Logger.getLogger(LegendController.class.getName()).warning("List Size " + legendDTO.getList().size());
        legendDTO.getList().add(new Legend());
        Logger.getLogger(LegendController.class.getName()).warning("List Size " + legendDTO.getList().size());

    }

    public void removeLegendRange(Legend legend) {
        if (legendDTO.getList().size() != 1) {
            legendDTO.getList().remove(legend);
        }
    }

    public String saveLegend() {
        Logger.getLogger(LegendController.class.getName()).warning("Save Legend Edit" + edit);
        LegendDAO dao = new LegendDAO();
        if (dao.addLegend(legendDTO, edit)) {
            edit = false;
            Logger.getLogger(LegendController.class.getName()).warning("Save Legend Edit" + edit);
        } else {

            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Could Not Save Confim if you have already defined Legend " + legendDTO.getLegendName() + "!"));
        }
        return "";
    }

    public String cancel() {
        edit = false;
        legendDTO = new LegendDTO();
        legendDTO.getList().add(new Legend());
         return "";
    }

    public List<LegendDTO> getLegends() {
        LegendDAO dao = new LegendDAO();
        return dao.getLegendDTO();
    }

    //All function from here are for legend  delete
    public void deleteLegendType(LegendDTO dto) {
        LegendDAO dao = new LegendDAO();
        if (dao.deleteLegendType(dto.getLegendName())) {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Deleted !"));
        } else {
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Deleted Error !"));
        }
    }

    //All function from here is to legend edit
    public void editLegendType(LegendDTO dto) {
        edit = true;
        Logger.getLogger(LegendController.class.getName()).warning("DTO : " + dto.legendName);
        legendDTO = dto;
        LegendDAO dao = new LegendDAO();
        Logger.getLogger(LegendController.class.getName()).warning("Edit dto set");
        try {
            List<Legend> legends = dao.getDetailForEditLegend(dto.getLegendName());
            if (legends == null || legends.isEmpty()) {
                dto.getList().add(new Legend());
            } else {
                dto.setList(legends);
            }
        } catch (SQLException ex) {
            Logger.getLogger(LegendController.class.getName()).warning("SQL EXception has occoured");
        }
        Logger.getLogger(LegendController.class.getName()).warning("In Edit Legend Function The size of list" + dto.getList().size());

    }
} 
```

//xhtml代码

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <ui:composition template="/legendTemplate.xhtml">
            <ui:define name="windowTitle">Change Legend</ui:define>
            <ui:define name="content">

                <h:messages globalOnly="true"/>
                <rich:panel id="firstPanel">
                    <h:form id="nis_viewLegend">
                        <rich:dataTable id="data_tbl" value="#{legendbean.legendDTOs}" var="legendDTOvar" style="width:100%" rendered="#{!legendbean.edit and not empty legendbean.legendDTOs}">
                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Description"/>
                                </f:facet>
                                <h:outputText value="#{legendDTOvar.desc}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Legend Type"/>
                                </f:facet>
                                <h:outputText value="#{legendDTOvar.legendName}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Legend Type"/>
                                </f:facet>
                                <h:outputText value="#{legendDTOvar.legendFor}"/>
                            </rich:column>

                            <rich:column>

                                <a4j:commandLink value="Delete" actionListener="#{legendbean.deleteLegendType(legendDTOvar)}" render=":firstPanel"/>
                                <h:outputText value="/"/>
                                <a4j:commandLink value="Edit" actionListener="#{legendbean.editLegendType(legendDTOvar)}" render=":secondPanel :editLegendForm :nis_viewLegend"/>

                            </rich:column>

                        </rich:dataTable>
                    </h:form>
                </rich:panel>

                <rich:panel id="secondPanel">
                    <h:form id="editLegendForm" rendered="#{legendbean.edit}">
                        <h:outputText value="Legend Name"/><br/>
                        <h:inputText value="#{legendbean.legendDTO.legendName}"  readonly="true"/><br/>

                        <h:outputText value="Description"/><br/>
                        <h:inputText value="#{legendbean.legendDTO.desc}"/><br/>

                        <h:outputText value="Legend For"/><br/>
                        <h:inputText value="#{legendbean.legendDTO.legendFor}"/><br/>
                        <br/> 
                        <h:outputText value="Range"  />  
                        <rich:dataTable id="editDataPnl" value="#{legendbean.legendDTO.list}" var="legend" style="width:100%">

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="SN"/>
                                </f:facet>
                                <h:inputText value="#{legend.sn}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Description"/>
                                </f:facet>
                                <h:inputText value="#{legend.desc}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Lower Range"/>
                                </f:facet>
                                <h:inputText value="#{legend.lowerRange}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Upper Range"/>
                                </f:facet>
                                <h:inputText value="#{legend.upperRange}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="Color"/>
                                </f:facet>
                                <h:inputText value="#{legend.color}"/>
                            </rich:column>

                            <rich:column>
                                <a4j:commandLink value="Add" actionListener="#{legendbean.addLegendRange}" render=":secondPanel"/>
                                <h:outputText value=" / "/>
                                <a4j:commandLink value="Remove" actionListener="#{legendbean.removeLegendRange(legend)}" render=":secondPanel"/>
                            </rich:column>
                        </rich:dataTable>

                        <br/>
                        <center>
                            <a4j:commandButton value="SAVE" action="#{legendbean.saveLegend()}" render=":firstPanel :secondPanel"/>
                            <a4j:commandButton value="CANCEL" action="#{legendbean.cancel()}" render=":firstPanel :secondPanel"/>
                        </center>
                    </h:form>
                </rich:panel>

            </ui:define>

        </ui:composition>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:32:00.417

例如，在 ViewScope 中，一旦构建了视图，`form.xhtml`只要您不离开该视图，它的数据就会持续存在。为了保持在同一个视图中，您应该调用具有返回类型`void`（通常在`actionListener`属性中使用）或返回 null 的方法，以防返回导航结果。

*   **方法表达式**

在您的情况下，您的方法是无效的，但不是将它传递给动作侦听器，而是在视图中调用它。

尝试像这样更改类似的代码：

```
<a4j:commandButton value="SAVE" actionListener="#{legendbean.saveLegend()}" render="mainPnl"/> 
```

对此：

```
<a4j:commandButton value="SAVE" actionListener="#{legendbean.saveLegend}" render="mainPnl"/> 
```

由于`actionListener`属性已经需要一个方法表达式。

*   **数据表内的表格**

我还注意到您的数据表中有一个表单。这可能会导致奇怪的行为，因为您的表单`id`将在结果页面中重复。为此，您应该尝试将表单放在数据表之外。

更好的是，您可以只有一个表单包含整个代码，因为嵌套表单是无效的 HTML 代码。

我建议你也检查一下你的`legendTemplate.xhtml`嵌套表格。

*   **豆类建设**

为了初始化您的 bean 状态，建议使用`@PostContruct`方法而不是 bean 构造函数。

尝试从这里改变：

```
 public LegendController() {
            legendDTO = new LegendDTO();
            legendDTO.getList().add(new Legend());
        } 
```

对此：

```
 @PostConstruct
        public void reset() {
            legendDTO = new LegendDTO();
            legendDTO.getList().add(new Legend());
        } 
```

并删除您的构造函数。

只要您在同一个视图（又名 .xhtml 页面）中，就应该保留您的 bean 数据。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:35:06.040

我有同样的问题。我认为上面的答案并不能真正解决这个问题。由于提交任何表单，他没有遇到问题 - 按下这些按钮本身会导致整个页面重新呈现，这意味着在按下按钮之前对视图状态的引用已经消失。这也是我正在观察的。对我来说，只有当有很多大型搜索结果时才会发生这种情况，并且只需重新提交我刚刚所做的相同搜索即可重新呈现页面（不执行搜索）。我认为问题与可以通过表单传递给服务器的数据量的限制有关：在视图范围内，所有数据都被序列化并以一个长隐藏值作为表单中的值传递. 如果该值太长，服务器将不接受它，因此，

我知道这不是确定的，但这只是我能找到的关于这个问题的线索，所以我希望它有助于为其他人阐明或激发更好的信息。如果您有更确定的内容，请告诉我们。

编辑：我现在确信这是问题所在。我的模型 bean 引用了一个文件 blob。一旦我用布尔值替换了那个引用（只需要知道它是否存在），问题就消失了。尝试传递对 DTO/DAO 的引用而不是对象本身，或者将它们标记为不需要它们持久存在的“瞬态”。或者，如果可能的话，像我一样减轻物体的重量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T19:16:45.110

您是否尝试为函数 saveLegend() 和 cancel() 返回 null 而不是返回空字符串？

```
public String saveLegend() {
     ---------
     return null;
}

public String cancel() {
     ----------
     return null;
} 
```

ajax 请求的返回也可能无效。但是，如果我没记错的话，返回 null 的 Richfaces 是唯一的解决方案。试试看。:) cancel() 在重新初始化 bean 时起作用。

正如 Bento 所回答的，您不能使用 actionListener 传递值。改用行动。

### 延伸阅读：

*   [JSF 2 ViewScope 问题](https://stackoverflow.com/questions/5494950/jsf-2-viewscope-questions)
*   [JSF2 动作参数](https://stackoverflow.com/questions/3599948/jsf2-action-parameter)
*   [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# javascript - 王牌：数据表过滤器监听器

> ID：12796349
> 
> 赞同：1
> 
> 时间：2012-10-09T08:59:26.040
> 
> 标签：javascript, jquery, jsf, ace-editor

我正在使用 ace:datatable （在我的 jsf 项目中）。
在这个表里面我有一个选择框，我想要[这样](http://code.google.com/p/dropdown-check-list/)，我已经在我的页面上实现了它，所有选择框都按预期显示。

但是当我（用户）在 ace:datatable （在浏览器中）上过滤数据时，这些框显示为简单的选择框。发生这种情况是因为选择标签再次加载，我需要调用一个 jquery 方法来将选择框显示为下拉列表（根据上面的链接），

所以我想知道当数据表中的数据发生变化时有什么方法可以调用javascript函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:37:21.323

我为数据表实现了自定义过滤器。
我在数据表之外放置了一些输入框，在这个输入的 valuchangelistener 上，我正在对存储在向量中的数据（数据表的数据）进行过滤处理，然后我从那里调用一个 javascript 函数来重建所有下拉列表。

# javascript - 为什么 JS 函数在 IE9 中不能正常工作？但在 Chrome 和 Firefox 中运行良好

> ID：12796350
> 
> 赞同：1
> 
> 时间：2012-10-09T08:59:31.297
> 
> 标签：javascript, button, internet-explorer-9, rollover

我在dreamveaver cs4 中制作了我的网站导航的翻转按钮。图像交换功能在 Chrome 和 firefox 浏览器中运行良好，但在 IE9 中，交换的图片显示在我将鼠标悬停在每个单元格右侧的两个单元格中。

我是网页设计的新手，如果有人可以帮助解决这个问题，我会很高兴。

```
enter code here
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
<!--
function showmenu(elmnt)
{
document.getElementById(elmnt).style.visibility="visible";
}
function hidemenu(elmnt)
{
document.getElementById(elmnt).style.visibility="hidden";
}
function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>

<style type="text/css">
<!--

body{;margin-top: 2px;}
a{color:#FFF;text-decoration:none;font:Tahoma, Geneva, sans-serif}
a:hover{color:#FFF}
td.menu{background:#F90; text-align:center;}
table.menu
{
    width:inherit;
font-size:100%;
position:absolute;
visibility:hidden;
}
-->
</style></head>

<body onload="MM_preloadImages('EXCELNET/Home2.png','EXCELNET/About2.png','EXCELNET/Services2.png','EXCELNET/Products2.png','EXCELNET/Contactus2.png','EXCELNET/websms2.png','Pictures/Home2.png','Pictures/About2.png','Pictures/Services2.png','Pictures/Products2.png','Pictures/Contact2.png','Pictures/websms2.png')">
<table border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td colspan="2"></td>
  </tr>
  <tr>
    <td align="center" valign="top"><table border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
        <td height="2" colspan="7"></td>
      </tr>
      <tr>
        <td><img src="Pictures/Excelnet Logo.png" width="72" height="25" /></td>
        <td><a href="Home.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('2','','Pictures/Home2.png',1)"><img src="Pictures/Home1.png" name="2" width="140" height="25" border="0" id="2" /></a></td>
        <td><a href="About.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('3','','Pictures/About2.png',1)"><img src="Pictures/About1.png" name="3" width="140" height="25" border="0" id="3" /></a></td>
        <td width="140" onmouseover="showmenu('services')" onmouseout="hidemenu('services')"><a href="Services.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('4','','Pictures/Services2.png',1)"><img src="Pictures/Services1.png" name="4" width="140" height="25" border="0" id="4" /></a><br>
        <table class="menu" id="services" width="120">
   <tr><td class="menu"><a href="/html/default.asp">HTML</a></td></tr>
   <tr><td class="menu"><a href="/css/default.asp">CSS</a></td></tr>
   <tr><td class="menu"><a href="/xml/default.asp">XML</a></td></tr>
   <tr><td class="menu"><a href="/xsl/default.asp">XSL</a></td></tr>
   </table>
   </td>
        <td><a href="Products.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('5','','Pictures/Products2.png',1)"><img src="Pictures/Products1.png" name="5" width="140" height="25" border="0" id="5" /></a></td>
        <td><a href="Contacts.html" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('6','','Pictures/Contact2.png',1)"><img src="Pictures/Contact1.png" name="6" width="140" height="25" border="0" id="6" /></a></td>
        <td><a href="#" onmouseout="MM_swapImgRestore()" onmouseover="MM_swapImage('8','','Pictures/websms2.png',1)"><img src="Pictures/websms1.png" name="8" width="140" height="25" border="0" id="8" /></a></td>
      </tr>
    </table></td>
    <td rowspan="3" align="center" valign="top">&nbsp;</td>
  </tr>
  <tr>
    <td height="5" align="center" valign="top"></td>
  </tr>
  <tr>
    <td align="center" valign="top"><img src="Pictures/Desktop Computer2.jpg" alt="" width="870" height="379" /></td>
  </tr>
  <tr>
    <td height="5" colspan="2"></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><table width="865" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td align="center"><font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">&copy;2012 EXCELNET SYSTEM</font> &nbsp;&nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">|</font> &nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">Terms & Conditions </font>&nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">|</font> &nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">About </font>&nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">|</font> &nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">Contacts </font>&nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">| </font>&nbsp;&nbsp;<font face="Verdana, Geneva, sans-serif" color="#F37214" size="2pt">Feedback</font></td>
  </tr>
</table></td>
    <td>&nbsp;</td>
  </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:02:29.417

问题是您为 ID 属性使用了数值。如果您在前面加上一个字母，那么您的翻转将起作用。以下是有关 HTML ID 属性的更多信息： [https ://stackoverflow.com/a/79022/1622684](https://stackoverflow.com/a/79022/1622684)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T12:47:04.970

请试试这个..

大约第 28 行，在**函数 MM_findObj(n, d) 中**

换行

```
if(!(x=d[n])&&d.all) x=d.all[n]; 
```

和

```
 if(!(d[n])&&d.all) x=d.all[n]; 
```

这应该使它适用于所有浏览器。
对我来说似乎是一个拼写错误。
如果不是很奇怪。

# c# - 如何将一些参数从 Vbscript 传递到 WPF

> ID：12796355
> 
> 赞同：1
> 
> 时间：2012-10-09T08:59:50.303
> 
> 标签：c#, wpf, vbscript

我有一个现有的 VBScript 程序。

我想知道有没有办法从 VBScript 发送一些参数，如 name[string]、age[int] 和 object 以在 WPF(C#) 窗口上显示它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:28:08.660

这是一个非常开放的问题。我建议您考虑在 WCP 应用程序中创建 WCF 服务。这将为其他应用程序创建一个访问点，以向您的 WCP 应用程序发送消息。
假设这两个应用程序在同一台机器上，那么您应该使用命名管道绑定以获得最佳性能。

服务调用会触发一些要在屏幕上显示的文本。

我不确定你如何从 VBScript 连接到这个，但我想谷歌知道。

# python - 基于类的视图中使用了哪些预定义的 Django 方法

> ID：12796360
> 
> 赞同：1
> 
> 时间：2012-10-09T09:00:01.103
> 
> 标签：python, django, view

我是 django 的新手，在我目前的工作中，我不得不编辑现有的代码。现在我无法在文档中找到我可以找到所有可以被覆盖的方法以及它们应该做什么。在我的视图文件中，有人定义了这些功能，但我不知道他们应该做什么。

喜欢

```
def get_context_data(self, **kwargs):
def get(self, request, *args, **kwargs):
def post(self, request, *args, **kwargs):
def get_success_url(self):
def form_valid(self, form): 
```

现在我不确定他是在编写他的新方法还是他正在覆盖内置方法，因为他没有在任何地方调用它们。

有人可以指导这些方法在文档中定义的位置，以便我可以看到其他方法以及它们的作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:43:07.977

我发现这个资源真的很有用，因为它使您不必手动跟踪继承层次结构来检查类具有哪些方法。

[http://ccbv.co.uk/](http://ccbv.co.uk/)

官方文档在这里，具体取决于您的 django 版本：

[https://docs.djangoproject.com/en/1.3/ref/class-based-views/](https://docs.djangoproject.com/en/1.3/ref/class-based-views/)

[https://docs.djangoproject.com/en/1.4/ref/class-based-views/](https://docs.djangoproject.com/en/1.4/ref/class-based-views/)

[https://docs.djangoproject.com/en/dev/ref/class-based-views/](https://docs.djangoproject.com/en/dev/ref/class-based-views/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:06:54.040

*   get_context_data 返回可在您的模板中访问的数据
*   get 是加载页面时执行的所有操作
*   post 是将数据发布到 url 时执行的所有操作
*   get_success_url 返回成功发布后用户将被定向到的 url
*   form_valid 在这里您可以向表单验证添加额外的操作

# javascript - PageMethods 实际返回什么？

> ID：12796361
> 
> 赞同：0
> 
> 时间：2012-10-09T09:00:04.660
> 
> 标签：javascript, asp.net

此代码从后面代码中的公共静态字符串中获取返回值，并显示警报中返回的内容。

```
<script type="text/javascript"> 
function GetFromServer() 
{ 
PageMethods.GetHello(OnGetHelloComplete);
} 
function OnGetHelloComplete(result, userContext, methodName)
{
alert("Result: " + result + "\n" + 
"Context: " + userContext + "\n" + 
"Method name: " + methodName); 
} 
</script> 
```

后面代码中的 web 方法是一个公共的静态字符串。但它返回的是什么？

为什么我写不出来...

```
var myString = PageMethods.GetHello() 
```

“result”、“userContext”和“methodName”是从哪里出现的？

编辑：请忽略，我查看了源代码并看到了那里输出的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:09:15.507

`GetHello`调用对服务器的调用，并且`OnGetHelloComplete`是在请求完成并且正在填充参数时执行的回调。

# java - JaxB 解组 - 创建对对象的引用

> ID：12796365
> 
> 赞同：1
> 
> 时间：2012-10-09T09:00:18.283
> 
> 标签：java, xml, jakarta-ee, jaxb, unmarshalling

问候各位程序员！

我在将 xml 解组到对象时遇到了一个主要问题。我需要创建对对象的引用。我怎样才能实现它？我尝试使用 XSL 转换，但由于出现循环，这不是正确的方法。我 100% 确定有一个简单的出路。这是我的 XML：

```
<report>
    <subject>
        <subjectId>1</subjectId>
        <name>John</name>
        <surname>Doe</surname>
    </subject>
    <subject>
        <subjectId>2</subjectId>
        <name>Frank</name>
        <surname>Timothy</surname>
    </subject>
    <individual>
        <individualId>10</individualId>
        <name>Isaac</name>
        <surname>Newton</surname>
        <co-worker>
            <subject>
                <subjectId>1</subjectId>
                <inXml>true</inXml>
            </subject>
            <subject>
                <subjectId>2</subjectId>
                <inXml>true</inXml>
            </subject>
        </co-worker>
    </individual>

    <owner>
        <subject>
            <subjectId>2</subjectId>
            <inXml>true</inXml>
        </subject>
        <share>100</share>
    </owner>
</report> 
```

我需要使用 inXml=true 创建“主题”或“个人”的引用。这个标志告诉我我们是否在 XML 中获得了具有该 ID 的实体。非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:35:24.907

您可以使用`@XmlID`/`@XmlIDREF`在 XML 文档中映射基于键的关系。

**例子**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)

# android - 在 Android 中使用结构查询 (sq) 从 Google 电子表格 API 检索数据时出错

> ID：12796368
> 
> 赞同：3
> 
> 时间：2012-10-09T09:00:21.427
> 
> 标签：android, url, google-sheets, url-encoding, google-spreadsheet-api

我正在使用 Android 中的 Google 电子表格 API。我已成功完成集成并能够检索行。但在搜索功能方面遇到了一点问题。我对电子表格有 3-4 种不同的搜索。问题是在我的电子表格中的某些列中，我的单词之间有空格。

例如，Hello World 是第 5 行中的一个值，并且该行的标题名称是 test。

因此，当我搜索**Hello World**时，它会抛出**InValidEntryException : Bad Request。**

**我也尝试使用 URLEncoder.encode(String url) 并将空格替换为 %20。**但这些都不适合我。我知道我因为空间而收到错误，但不知道如何解决。尝试了这 2 件事，但仍在努力解决错误。

如果有人有任何想法，请提供帮助。下面是错误日志。

错误日志：-

```
10-09 14:26:29.048: I/System.out(1009): URL ==> https://spreadsheets.google.com/feeds/list/tl5vghRJs8_wuVQWnk5TnhA/od6/private/full?sq=streetname=bal%20bay
10-09 14:26:30.327: D/dalvikvm(1009): GC_CONCURRENT freed 439K, 46% free 3492K/6407K, external 920K/1417K, paused 18ms+14ms
10-09 14:26:31.847: I/System.out(1009): Service
10-09 14:26:31.877: W/System.err(1009): com.google.gdata.util.InvalidEntryException: Bad Request
10-09 14:26:31.887: W/System.err(1009): Parse error: null
10-09 14:26:31.967: W/System.err(1009):     at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:602)
10-09 14:26:32.217: W/System.err(1009):     at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
10-09 14:26:32.228: W/System.err(1009):     at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
10-09 14:26:32.228: W/System.err(1009):     at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
10-09 14:26:32.228: W/System.err(1009):     at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
10-09 14:26:32.228: W/System.err(1009):     at com.google.gdata.client.Service.getFeed(Service.java:1135)
10-09 14:26:32.228: W/System.err(1009):     at com.google.gdata.client.Service.getFeed(Service.java:998)
10-09 14:26:32.237: W/System.err(1009):     at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
10-09 14:26:32.259: W/System.err(1009):     at com.google.gdata.client.Service.getFeed(Service.java:1017)
10-09 14:26:32.259: W/System.err(1009):     at com.test.voter.SearchActivity$SearchTask.doInBackground(SearchActivity.java:144)
10-09 14:26:32.259: W/System.err(1009):     at com.test.voter.SearchActivity$SearchTask.doInBackground(SearchActivity.java:1)
10-09 14:26:32.259: W/System.err(1009):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
10-09 14:26:32.278: W/System.err(1009):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
10-09 14:26:32.287: W/System.err(1009):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
10-09 14:26:32.287: W/System.err(1009):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
10-09 14:26:32.312: W/System.err(1009):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
10-09 14:26:32.312: W/System.err(1009):     at java.lang.Thread.run(Thread.java:1019) 
```

**编辑**

```
1)URL listFeedUrl = new  URI(worksheet.getListFeedUrl().toString() + "?sq=" + URLEncoder.encode("streetname=\"164Th\"")).toURL(); 

2)URL listFeedUrl = new  URI(worksheet.getListFeedUrl().toString() + "?sq=" + URLEncoder.encode("streetnumber=\"1923\"%20and%20streetname=\"164Th\"")).toURL(); 
```

(1) 工作得很好，但是当使用多个参数 (2) 时它不起作用，再次给出相同的 InvalidEntryException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:14:53.870

或者您可以在问题列表中搜索[问题 2308](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=2308&can=1&q=label%3AAPI-Spreadsheets%20query&colspec=API%20ID%20Type%20Status%20Priority%20Stars%20Opened%20Summary)并注意评论 3：

> 如果您只是将名称括在引号中，则可以正常工作。您甚至可以在此处在列名中使用空格。
> 
> [https://spreadsheets.google.com/feeds/](https://spreadsheets.google.com/feeds/) ${KEY}/records/0?sq="5B"+%3D+3 [https://spreadsheets.google.com/feeds/](https://spreadsheets.google.com/feeds/) ${KEY}/records/ 0?sq="the+cat"+%3D+3

...并希望记录提要中未记录的内容实际上已在列表提要中实施，尽管稍后会过渡到“WontFix”状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:56:37.383

好吧，现已失效的[GData 2.0 协议指南](https://developers.google.com/gdata/docs/2.0/reference#Queries)（也在[wayback machine 上](http://web.archive.org/web/20100209122348/http://code.google.com/apis/gdata/docs/2.0/reference.html#Queries)）关于“q”参数说：

> 列出以空格分隔的搜索词，格式为 q=term1 term2 term3。（与所有查询参数值一样，空格必须经过 URL 编码）

然而，defunct-so-much-as-to-be-unpublished-anymore-by-Google [Spreadsheets Data API 3.0 参考指南](http://web.archive.org/web/20100211022141/http://code.google.com/apis/spreadsheets/data/3.0/reference.html)有点简单，其中包含有关列表提要特定“sq”参数的参数的信息。

我可能会尝试将搜索词用引号括起来“像这样”（并对它们进行 URL 编码）。这就是“q”参数用于分隔整个短语的技术。

如果这不起作用，我会提交一份[问题报告](http://code.google.com/a/google.com/p/apps-api-issues/issues/list?can=2&q=label%3AAPI-Spreadsheets+search&colspec=API+ID+Type+Status+Priority+Stars+Opened+Summary&cells=tiles)，抱怨文档不足。请随意引用[我之前的投诉](https://groups.google.com/d/msg/google-spreadsheets-api/A4gK3JZZXLo/8w6zdeU78VUJ)。

# c# - WPF功能区：最大化窗口离开屏幕

> ID：12796374
> 
> 赞同：8
> 
> 时间：2012-10-09T09:00:36.170
> 
> 标签：c#, .net, wpf, ribbon

我正在`System.Windows.Controls.Ribbon`为我的应用程序使用该库。一切都很好，除了当我最大化窗口时它开始离开屏幕。

我还注意到，对于其他 WPF 应用程序，但是当您使用 a`RibbonWindow`时，情况会变得更糟。

![在此处输入图像描述](../Images/15e8d762f4f851e8beb2464cd945aa6c.png)

这是我的源代码（我认为没有什么真正令人兴奋的）：

```
<RibbonWindow 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="WpfApplication1.MainWindow"
        Title="TestWindow" Height="350" Width="525" Background="LightSteelBlue">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Ribbon Grid.Row="0">
            <RibbonTab x:Name="TestRibbon" Header="TestRibbon">
                <RibbonGroup>
                    <RibbonButton x:Name="TestButton" Label="Button" LargeImageSource="traffic_lights_green.png" />
                </RibbonGroup>
            </RibbonTab>
        </Ribbon>

        <ContentControl Grid.Row="1">
        </ContentControl>
    </Grid>
</RibbonWindow> 
```

有什么方法可以阻止窗口这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T10:17:36.993

如果您还没有找到它，我认为这可能会回答您的问题。 [systemmenu-does-not-show-correctly](http://blogs.msdn.com/b/wpf/archive/2010/08/06/systemmenu-does-not-show-correctly-when-ribbon-application-is-run-against-net-4-0.aspx)。它似乎是特定于 .net 4 实现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:50:27.637

只是为了让你知道我是如何“解决”这个问题的。我正在使用 Fluent Ribbon api。这对我来说效果更好，您还可以获得 Office 2010 样式。

但我强烈建议您下载源代码并自行编译，因为上一个稳定版本是不久前发布的，但它仍在开发中，开发人员对错误的响应非常快。

[http://fluent.codeplex.com/](http://fluent.codeplex.com/)

# android-layout - 如何将textview大小更改为android中的所有设备

> ID：12796378
> 
> 赞同：0
> 
> 时间：2012-10-09T09:00:41.720
> 
> 标签：android-layout, android-emulator

嗨，我正在为所有尺寸的手机和平板电脑在 android 中做一个应用程序。imageviews 显示在所有尺寸上都很好。但是我面临 textview 字体大小的问题。在我的应用程序中，我需要显示带有该背景和文本的 textview，但不同大小的文本尺寸显示不正确。任何有想法的人请帮助我。我尝试使用下面的代码...

**主活动.class**

```
 public class MainActivity extends Activity {
 float screenHeight,screenWidth,screendensity;
 RelativeLayout alpha_page2;
 ImageView alpha_back,alpha_back1;
 TextView option121;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
     screenHeight = displaymetrics.heightPixels;
     screenWidth = displaymetrics.widthPixels;
     screendensity = displaymetrics.densityDpi;
     Log.i("screenHeight",""+screenHeight);
     Log.i("screenWidth",""+screenWidth);
     Log.i("screendensity",""+screendensity);
    setContentView(R.layout.activity_main);

    int letpading=(int)(116*(screenWidth/1024));
    int toppading=(int)(79*(screenHeight/600));

    int textsiz=(int)(50*(screendensity/600));
    option121 = (TextView)findViewById(R.id.text1);
    option121.setBackgroundResource(R.drawable.dog_b_blank);
    option121.setText("A");
    option121.setText(Color.BLACK);
    RelativeLayout.LayoutParams layoutoption121 = (RelativeLayout.LayoutParams) option121.getLayoutParams();       
    layoutoption121.height=(int)(180*(screenHeight/600));  
    layoutoption121.width=(int)(180*(screenWidth/1024));
    layoutoption121.topMargin=(int)(100*(screenHeight/600));
    layoutoption121.leftMargin= (int)(250*(screenWidth/1024));
    option121.setPadding(letpading, toppading, 0, 0);

    option121.setTextSize(textsiz);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:13:02.577

那不是这样做的。Android 会为您处理文本大小，在指定文本大小时使用“sp”（与比例无关的像素）单位，如果您需要为不同的屏幕配置不同的大小，请阅读以下内容：

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

基本上，您需要在相应资源目录中的 .xml 文件中定义文本大小：

res/values-large res/values-xlarge 等。

然后在您的布局 xml 或代码中引用这些常量。

# .net - .Net 应用程序的脚本/对象模型/其他接口

> ID：12796379
> 
> 赞同：0
> 
> 时间：2012-10-09T09:00:52.713
> 
> 标签：.net, com

我正在开发一个 .Net 应用程序，用于通过串行端口进行科学仪器控制。要求允许用户“编写”某些动作的“脚本”，例如打开阀门、等待 X 秒、将 xyz 数据发送到仪器等。将有几十种不同的动作可供选择，加上逻辑/程序流程（if 语句、goto 等）。

该软件的前一个版本使用基本 UI，用户可以从可能的操作列表中进行选择，以逐步构建一系列命令以运行。它很有效，非常适合非程序员，但不是特别灵活。如果发生错误，则很难报告确切的问题，或者它在脚本中发生的位置。

对于重写，我正在尝试提出更好的解决方案，例如使用“真正的”脚本语言。程序流/逻辑显然是语言本身的一部分，所以我只需要关注暴露/处理不同的仪器动作。脚本语言也会提供更好的运行时错误，而智能感知将是一个好处。

我的第一个想法是将我的 .Net“动作”类公开为某种 COM 对象模型，允许更多选择脚本语言（VBScript、Python、Javascript？），但我有点不愿意走 COM 路线，因为这是一种古老的技术（而且是我作为开发人员多年来一直设法避免的一种黑艺术）。没有关于应支持哪些语言的要求，因此 C# 和 VB.Net 也是选项。

我真的只是在寻找一些关于如何在我的应用程序中实现脚本的想法/指针。脚本编辑器不必集成到应用程序中，尽管这样会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:28:42.783

您*可以*通过展示一个合理的对象模型来使用 COM 来做到这一点。这样做的好处是使用 VBScript 编写脚本或使用 C++ 进行自动化相当容易。

但是，我不确定这是否是所需工作量的最佳方法。您可以考虑以下选项：

*   公开 .NET 模型并使用 IronPython 或 Boo 编写脚本（如果您更喜欢静态类型）。IronPython 非常适合这个。
*   公开 .NET 模型并使用 C# 编写脚本。

后者是我为上一个需要此类功能的应用程序选择的，此外它应该可以直接从应用程序本身编写脚本。决定使用 C# 的驱动因素是我们希望提供静态类型和良好的智能感知，因为脚本的目标用户是我们的测试人员，他们发现这样工作更容易，因为 API 更容易发现并且我们可以编译动态脚本至少提供一些关于脚本内容的完整性检查。

该应用程序公开了一个 .NET 脚本模型，而编辑器和智能感知功能由 SharpDevelop 项目中的组件实现。这使得在一天内使用语法高亮编辑器和智能感知实现脚本支持成为可能。

# c - SIGSEGV 恢复？

> ID：12796380
> 
> 赞同：0
> 
> 时间：2012-10-09T09:01:00.297
> 
> 标签：c, winapi, assembly, x86

我有一些 SSE 程序可以在循环中将内存归零，当指针未对齐时，它会引发 SIGSEGV 进入我的处理程序。我可以在这样的处理程序例程中获得更多信息吗？现在我没有得到它在哪里完成的信息，我也可以以某种可预测的方式做出反应吗？当我选择忽略它时，在我看来，它应该返回，因为它在循环中再次引发 SIGSEGV，（当我忽略它时，这种行为被零除，它只会继续下去）但它在这里不起作用这种方式，但遗憾的是在忽略后就崩溃了。我可以在这里做一些更精致的恢复吗？

编辑 - 添加

在我的 signal.h 中（一些非常旧的 win32 编译器，但我使用它）我有这样的东西

```
 /* _SIGCONTEXT contains exception info for WIN32 exceptions that were caught
     and turned into signals.  There will always be three 32-bit parameters
     passed to the user's signal handler.  Unused parameters will be 0\.  The
    _PSIGCONTEXT parameter will always be the last (third) parameter.
      */

    typedef struct
     {
      struct _EXCEPTION_RECORD * _pexecptionrecord; /* defined in WINNT.H */
      struct _CONTEXT *          _pcontext;         /* defined in WINNT.H */
      unsigned long              _result;           /* return value for the SEH */
     } _SIGCONTEXT, *_PSIGCONTEXT;

     typedef int sig_atomic_t;   /* Atomic entity type (ANSI) */

     typedef void (*_CatcherPTR)(int);

     #define SIG_DFL ((_CatcherPTR)0)   /* Default action   */
     #define SIG_IGN ((_CatcherPTR)1)   /* Ignore action    */
     #define SIG_ERR ((_CatcherPTR)-1)  /* Error return     */

      //////////////////////////////////
     //skipped  #define SIGABRT  22  
     //         #define SIGFPE  8  .... constants block  here

     int raise(int __sig);

     void (*signal(int __sig, void (*__func)(int) )) (int); 
```

我理解 Signal Raise 但如何获取 SIGCONTEXT 的数据或使用 'catcher' ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:29:54.983

虽然在某些情况下可以在某些操作系统上捕获和处理 SIGSEGV、SIGBUS、SIGILL 和 SIGFPE，但除了崩溃之外，做任何事情都是一个非常糟糕的主意。它们表明您的程序中存在您需要修复的错误，而不是您在地毯下扫过的错误。

但是，如果您真的喜欢在脚上射击自己并留下可怕的无法调试和无法维护的混乱，其他人将不得不在您之后清理，同时诅咒您和您的祖先，同时希望巫术有效，请查看 sigaction() 的文档和如何 siginfo_t。它们至少包含您需要的某些部分。

# javascript - 使用 express 在 ejs 中创建一个逗号分隔的链接列表

> ID：12796387
> 
> 赞同：0
> 
> 时间：2012-10-09T09:01:18.643
> 
> 标签：javascript, node.js, express, ejs

我有一组用户名，可在我的 ejs 模板中访问。

我想创建一个逗号分隔的链接列表，如下所示：

```
<a href="/user1">user1</a>, <a href="/user2">user2</a> and <a href="/user3">user3</a> 
```

渲染的 html 看起来像这样（用户名是链接）：

```
user1, user2 and user3 have added items to your list. 
```

我可以循环遍历并将它们全部放在自己的行中，但是我如何用逗号加入该输出（最后一个有“and”）？

```
<% usernames.forEach(function(username){ %>
  <a href="/<%= username %>"><%= username %></a>
<% }) %> 
```

无论如何要在逗号上加入这个输出并在最后一个不加逗号的情况下添加'and'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:40:11.380

这就是我想出的：

```
<% creators.forEach(function(username, i, arr){ %>
  <a href="/<%= username %>"><%= username %></a><%= ( arr.length > 0 && i < arr.length-1 ? ( i == arr.length-2 ? ' and ' : ', ' ) : '' ) %>          
 <% }) %>
 <%= creators.length > 1 ? 'have' : 'has' %> created lists or items for <%= owne
r.username %>.</p> 
```

# sencha-touch - Sencha Touch 设置数据

> ID：12796388
> 
> 赞同：0
> 
> 时间：2012-10-09T09:01:19.270
> 
> 标签：sencha-touch

我想将控制器中的数据设置为表单面板（文本字段）。但不工作。

这是代码：

斯特雷

```
Ext.define('MyApp.store.CV_FamilyList',
{
extend : 'Ext.data.Store',
requires : ['MyApp.model.CV_FamilyList'],
config :
{
    autoLoad : true,
    model : 'MyApp.model.CV_FamilyList',
    storeId : 'CV_FamilyList',
    proxy :
    {
        type : 'ajax',
        url : '?b=Family',
        reader :
        {
            type : 'json',
            rootProperty : 'data'
        }
    }
}
}); 
```

模型

```
Ext.define('MyApp.model.CV_FamilyList',
{
extend : 'Ext.data.Model',
config :
{
    fields : [
    {
        name : 'id'
    },
    {
        name : 'member'
    },
    {
        name : 'firstname'
    },
    {
        name : 'lastname'
    }]
},
GetPosition : function() {
    var d = this.data, names = [d.Position];
    return names.join(" ");
}
}); 
```

列表

```
Ext.define('MyApp.view.CV_FamilyEdit',
{
extend : 'Ext.form.Panel',
xtype : 'CV_FamilyEdit',
config :
{
    scrollable : true,
    fullscreen: true,
    items: [
        {
            xtype: 'textfield',
            name : 'member',
            label: 'member'
        },
        {
            xtype: 'textfield',
            name : 'firstname',
            label: 'firstname'
        },
        {
            xtype: 'textfield',
            name : 'lastname',
            label: 'lastname'
        }
    ]
}
}); 
```

控制器

```
onCV_FamilyListItemTap : function(dataview, index, target, record, e, options) {

    this.getMain().push(
    {
        xtype : 'CV_FamilyEdit',
        title : record.data.firstname+" "+record.data.lastname,
        data : record.data
    });
} 
```

..................................................... ……………………………………………………………………………………………………………………………………………… .....................

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:01:41.980

我完成了

```
constructor : function(config) {
        this.callParent(config);
        this.setValues(
        {
            member : config.data.member,
            firstname : config.data.firstname,
            lastname : config.data.lastname
        })
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:27:48.253

尝试这个。可能是这个作品。

```
 onCV_FamilyListItemTap : function(dataview, index, target, record, e, options) {
   this.getMain().push(
        {
          xtype : 'CV_FamilyEdit',
          title : record.data.firstname+" "+record.data.lastname,
          data: record.getData() 
       });
  }, 
```

# python - Python：获取 2010 年 7 月的最后一个星期一

> ID：12796389
> 
> 赞同：4
> 
> 时间：2012-10-09T09:01:23.243
> 
> 标签：python, calendar

如何获得给定月份的最后一个星期一（或其他日期）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T09:06:54.497

看看[**dateutil**](http://labix.org/python-dateutil)：

```
from datetime import datetime
from dateutil import relativedelta
datetime(2010,7,1) + relativedelta.relativedelta(day=31, weekday=relativedelta.MO(-1)) 
```

返回

```
datetime.datetime(2010, 7, 26, 0, 0) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T09:10:47.100

使用标准库中的[日历](http://docs.python.org/library/calendar.html)模块：

```
import calendar
cal = calendar.Calendar(0)
month = cal.monthdatescalendar(2010, 7)
lastweek = month[-1]
monday = lastweek[0]
print(monday)

2010-07-26 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T18:14:55.677

根据[加里的回答](https://stackoverflow.com/a/12796542/2246380)：

```
import calendar
month = calendar.monthcalendar(2010, 7)
mondays = [week[0] for week in month if week[0]>0]
print mondays[-1]

26 
```

即使该月的最后一周没有星期日，这也适用于获取该月的最后一个星期日。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T05:11:56.543

对 manu 的回答略有改进！

```
import calendar
month = calendar.monthcalendar(2010, 7)
day_of_month = max(month[-1][calendar.SUNDAY], month[-2][calendar.SUNDAY])
print day_of_month 
```

# macos - 检索可以在给定 URL 处打开文件的所有应用程序包标识符

> ID：12796391
> 
> 赞同：1
> 
> 时间：2012-10-09T09:01:32.360
> 
> 标签：macos, cocoa, uti

如何检索可以在给定 URL 处打开文件的所有应用程序包 ID？就像给定 URL 的文件是 .xml 一样，我想获取所有可以打开 .xml 的应用程序包 ID 的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:55:05.463

您可以使用 Launch Services'[`LSCopyAllRoleHandlersForContentType()`](http://developer.apple.com/library/mac/documentation/Carbon/Reference/LaunchServicesReference/Reference/reference.html#//apple_ref/c/func/LSCopyAllRoleHandlersForContentType)获取功能应用程序的捆绑标识符数组。

代码可能如下所示：

```
NSURL *fileURL = [[NSBundle mainBundle] URLForResource:@"sample"
                                         withExtension:@"xml"];

NSString *utiType = nil;
NSError *error = nil;

BOOL success = [fileURL getResourceValue:&utiType
                         forKey:NSURLTypeIdentifierKey error:&error];

if (!success) {
    NSLog(@"getResourceValue:forKey:error: returned error == %@", error);
}

NSArray *bundleIdentifiers = [(NSArray *)LSCopyAllRoleHandlersForContentType(
                         (CFStringRef)utiType, kLSRolesAll) autorelease];

NSLog(@"bundleIdentifiers == %@", bundleIdentifiers); 
```

在 OS X 的最新版本中，启动服务是`CoreServices.framework`伞形框架的一部分。您可能需要在要调用`LS*`函数的类中#import 它，并将其添加到`Link Binary With Libraries`目标的构建阶段。（在 OS X 10.8 SDK 中没有链接的情况下，它似乎在这里工作正常）。

# javascript - 强制在 AJAX 加载的页面上加载页面

> ID：12796395
> 
> 赞同：0
> 
> 时间：2012-10-09T09:02:01.730
> 
> 标签：javascript, jquery, ajax, ipad, onload

我在特定于 iPad 的网站上存在第三方集成问题，该网站有许多通过 AJAX 加载的页面。

当我第一次访问该页面时，预期可用的功能不可用，只有当我在 Safari 中刷新页面时，我才能看到该功能。

在第 3 方 JavaScript 中，到处都是这样的代码：

```
script.onload = script.onreadystatechange = function () { // do something } 
```

这是[完整的 JavaScript 包含文件](https://services.postcodeanywhere.co.uk/js/captureplus-1.31.js?key=we84-cn95-ub48-pc25&app=4565)。

有没有一种方法可以强制在 iPad 上加载页面或构建一些解决方法，这意味着当我更改到包含 JavaScript 的页面并触发时？

正如我所提到的，这仅在特定于 iPad 的网站上很明显，并且相同的功能在*不*通过 AJAX 加载页面的桌面浏览器上没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:06:14.670

我相信 Web 服务器允许您为使用 Web 服务器呈现的所有页面动态添加内容。它允许您插入一个代码片段，该代码片段可以理想地检查其是否为 ipad 网站并按照您的要求进行页面加载。

按照下面的线程

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/e27f918e-89a9-45a8-8604-2ad2ded09d64.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/e27f918e-89a9-45a8-8604-2ad2ded09d64.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:08:18.710

我不知道您的代码是什么样的，但是，在使用 jQuery 反复遇到相同的问题后，我建议您在窗口就绪状态函数中手动调用 3rd 方脚本的初始化函数：

```
$(window).ready(function(e) {
    // function that initializes the 3rd party script gets called here.
}); 
```

# objective-c - 设备没有响应 productsRequest:didReceiveResponse:

> ID：12796398
> 
> 赞同：0
> 
> 时间：2012-10-09T09:02:16.957
> 
> 标签：objective-c, ios, in-app-purchase, itunes

为什么设备没有响应方法：

```
 - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response 
```

模拟器响应时？我谷歌是硬重置所有设备设置等，但无法获得运气。应用程序先前被应用商店拒绝我再次添加了新鲜的产品并单击准备上传二进制文件。产品状态为“等待审核”，沙盒测试够吗？申请状态为“等待上传”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:55:46.420

我自己解决了。我的设备在 WiFi 网络上工作，该网络可能很慢或具有分布式带宽。我打开mac WiFi，创建网络，开始在网络下的系统偏好中共享互联网服务。我让我的 iPod 加入我在我的 mac 机器上创建的网络，删除并重建应用程序，一切都像魅力一样工作。如果有人遇到此类问题，建议重置设备中的所有设置

# java - 在 cygwin 中运行 ant 返回 JAVA_HOME 设置不正确

> ID：12796413
> 
> 赞同：3
> 
> 时间：2012-10-09T09:03:08.417
> 
> 标签：java, ant

```
$ ant --version

Error: JAVA_HOME is not defined correctly.
  We cannot execute 헬愣헬愣0
헬愣헬愣0
Files
/bin/java 
```

我将 Ant 提取到一个名为 Ant 的文件夹中

```
C:\ANT 
```

我设置了环境变量

```
ANT_HOME with the path C:\Ant

JAVA_HOME with the path C:\Program Files (x86)\Java\jdk1.6.0_32

I checked my Java path is set correctly 
and does return the correct message.

java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:13:11.420

你也可以`cygwin`直接去

```
cd /cygdrive/c
ln -s /cygdrive/c/Program\ Files/jdk-xxx java 
```

并更新`.bashrc`

```
export JAVA_HOME="/cygdrive/c/java"
export ANT_HOME="/cygdrive/c/ant"
export PATH=$PATH:$JAVA_HOME/bin:$ANT_HOME/bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:12:47.287

不是最终解决方案，但无法发表评论。

1.  安装jdk到c:/apps/jdk1.6.0_32（没有空格的路径）
2.  设置 JAVA_HOME=c:/apps/jdk1.6.0_32
3.  设置 ANT_HOME=c:/ant （你已经有了这个）
4.  运行 $ANT_HOME/bin/ant

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-27T16:16:49.183

我已经尝试了所有这些技巧，但没有解决上述问题：

> 错误：未正确定义 JAVA_HOME。

然后我意识到在**`ENVIRONMENT VARIABLES`**菜单中，虽然**`JAVA_HOME`**路径出现在字符串末尾没有分号（`;`），但在文本编辑器面板上查看，它就在那里，然后删除分号一切正常！

[![在此处输入图像描述](../Images/7c8522dd408c334db551c578a82b17e1.png)](https://i.stack.imgur.com/GOVBJ.png)

顺便说一句，我在 Windows 10 下运行。

# jbutton - 多个 Jtextfields 到一个 Jbutton

> ID：12796414
> 
> 赞同：1
> 
> 时间：2012-10-09T09:03:08.777
> 
> 标签：jbutton, jtextfield

我想知道如何将 4 个单独的 Jtextfields 放入一个 Jbutton 中，如果您在文本字段中输入 3 个值并按下按钮，它们将在第 4 个文本字段中显示新值。

```
btnDoIt.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        double a;
        a = Double.parseDouble(txtA.getText());
        txtOutput.setText("The root(s) of the equation is(are): " + a);
        double b;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T13:20:59.243

添加条件检查，并记住要明确您的问题。以下代码可能对您有所帮助

```
btnDoIt.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        //get text from first 3 textfields
        String s1 = txtA.getText();
        String s2 = txtB.getText();
        String s3 = txtC.getText();
        //make sure strings aren't empty
        if(s1.isEmpty() || s2.isEmpty() || s3.isEmpty()){
            return;
        }
        //set text of final textfield
        txtOutput.setText(/*Your operation here*/);
    }
}); 
```

# java - 调整 Gridbag 布局

> ID：12796417
> 
> 赞同：5
> 
> 时间：2012-10-09T09:03:24.917
> 
> 标签：java, swing, user-interface, gridbaglayout

我正在尝试使用 Java 中的 GRIDBAG 布局来实现此布局

```
public static void addComponentsToPane(Container pane) {
        if (RIGHT_TO_LEFT) {
            pane.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }

        JLabel label1,label2,label3,result,title;
        JButton calculate_btn;
        JTextField side1,side2,side3;

    pane.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    if (shouldFill) {
    //natural height, maximum width
    c.fill = GridBagConstraints.HORIZONTAL;
    }

        title = new JLabel("Area of Triangle");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
    c.gridx = 2;
    c.gridy = -1;
    pane.add(title, c);

    label1 = new JLabel("Side 1: ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
         c.ipady = 20;
    c.gridx = 1;
    c.gridy = 1;
    pane.add(label1, c);

        label2 = new JLabel("Side 2: ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
         c.ipady = 20;
    c.gridx = 1;
    c.gridy = 2;
    pane.add(label2, c);

        label3 = new JLabel("Side 3: ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
        c.ipady = 20;
    c.gridx = 1;
    c.gridy = 3;
    pane.add(label3, c);

        side1 = new JTextField("   ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
        c.ipady = 20;
    c.gridx = 2;
    c.gridy = 1;
    pane.add(side1, c);

        side2 = new JTextField("Side 3: ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
        c.ipady = 20;
    c.gridx = 2;
    c.gridy = 2;
    pane.add(side2, c);

        side3 = new JTextField("Side 3: ");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
        c.ipady = 20;
    c.gridx = 2;
    c.gridy = 3;
    pane.add(side3, c);

    calculate_btn = new JButton("Calculate");
    //c.fill = GridBagConstraints.HORIZONTAL;
    c.ipady = 30;      //make this component tall
    c.weightx = 0.5;
    c.gridwidth = 3;
    c.gridx = 0;
    c.gridy = 5;
    pane.add(calculate_btn, c);

        result = new JLabel("Result displayed here");
    if (shouldWeightX) {
    c.weightx = 0.5;
    }
    c.fill = GridBagConstraints.HORIZONTAL;
        c.ipady = 20;
    c.gridx = 2;
    c.gridy = 7;
    pane.add(result, c);

    } 
```

所以上面的代码基本上只是将添加到 GUI 中的组件，但我并没有完全得到我想要的，这就是我想要实现的

![在此处输入图像描述](../Images/7bf272ef6404f67481bfd4449f739e7d.png)

但这就是我用上面的代码得到的

![在此处输入图像描述](../Images/d9d5f54aeb91a40330156b695710f826.png)

因此，当我编译上面的内容时，我最终得到的结果是，如果可能的话，我也不希望用户调整窗口大小，我猜想一些带有窗口属性之一的布尔值..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:22:06.923

问题是您正在设置`ipady`垂直“拉伸”您的组件。您可能正在寻找该`insets`属性：[http ://docs.oracle.com/javase/7/docs/api/java/awt/GridBagConstraints.html#insets](http://docs.oracle.com/javase/7/docs/api/java/awt/GridBagConstraints.html#insets)

尝试使用这个：

```
c.insets = new Insets(10, 0, 10, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T09:45:45.573

这是另一种使用 a 的方法`GridBagLayout`，它导致...

![在此处输入图像描述](../Images/f2968f0e5140a645f9f85fb536329737.png) ![在此处输入图像描述](../Images/e27d1fe56fec9a4c54dee4c6b69b9d6d.png)

```
public class TestLayout {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FormPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    protected static class FormPane extends JPanel {

        JLabel label1, label2, label3, result, title;
        JButton calculate_btn;
        JTextField side1, side2, side3;

        public FormPane() {
            // You may not need this, I needed it because the window packed to 
            // small on my mac ;)            
            setBorder(new EmptyBorder(4, 4, 4, 4));

            setLayout(new GridBagLayout());
            GridBagConstraints c = new GridBagConstraints();

            title = new JLabel("Area of Triangle");
            label1 = new JLabel("Side 1: ");
            label2 = new JLabel("Side 2: ");
            label3 = new JLabel("Side 3: ");
            side1 = new JTextField(4);
            side2 = new JTextField(4);
            side3 = new JTextField(4);
            calculate_btn = new JButton("Calculate");

            result = new JLabel("Result displayed here");

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.NORTH;
            gbc.gridwidth = 2;
            gbc.weighty = 1;
            add(title, gbc);

            gbc.weighty = 0;
            gbc.gridy = 1;
            gbc.anchor = GridBagConstraints.WEST;
            gbc.gridwidth = 1;
            add(label1, gbc);
            gbc.gridy++;
            add(label2, gbc);
            gbc.gridy++;
            add(label3, gbc);

            gbc.gridy = 1;
            gbc.gridx = 1;
            add(side1, gbc);
            gbc.gridy++;
            add(side2, gbc);
            gbc.gridy++;
            add(side3, gbc);

            gbc.gridx = 0;
            gbc.gridwidth = 2;
            gbc.gridy++;
            add(result, gbc);

            gbc.gridy++;
            gbc.weighty = 1;
            gbc.anchor = GridBagConstraints.NORTH;
            add(calculate_btn, gbc);

        }

    }

} 
```

如果您想在标题和字段之间添加空格以及一些`Insets`

```
gbc.insets = new Insets(0, 0, 8, 0);
add(title, gbc);

// Don't forget to reset them ;)
gbc.insets = new Insets(0, 0, 0, 0); 
```

我刚刚意识到结果应该显示在按钮下。简单换行`add(result, gbc)`，`add(calculate_btn, gbc)`一切都应该保持不变

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T09:10:51.343

我在您的代码中看到的一个问题是您正在为您添加的所有元素重新使用相同的 GridBagConstraints 对象，这是不推荐的。

我的建议是使用像 NetBeans 或 Eclipse 中可用的 GUI 构建器。在 Java 中手动编写 GUI 非常痛苦，特别是 GridBagLayout 几乎是为生成的布局代码而设计的。

[或者，使用TableLayout](http://xito.sourceforge.net/projects/tablelayout/)之类的东西- 或者硬着头皮[阅读](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)[GridBagConstraints](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/GridBagConstraints.html)的复杂性。

# java - 计算字符串数组中出现的次数

> ID：12796419
> 
> 赞同：0
> 
> 时间：2012-10-09T09:03:35.060
> 
> 标签：java, arrays

我正在尝试使用 Java 数组。我想要做的是计算数组字符串元素的出现次数。例如：

```
Clubs - 8 
Clubs - Ace 
Clubs - Jack
Hearts - 9 
Spades - 3
Hearts - 6 
```

**出现次数：**

```
Clubs - 3
Hearts - 2
Spades - 1
Diamonds - 0 
```

到目前为止，我只编写了这个：

```
public class CardGame {
public static void main(String[] args){

     String[] suit = { "Clubs", "Hearts", "Diamonds", "Spades" };
     String[] deck = { "2", "3", "4", "5", "6", "7", "8", "9", "10",
                        "Jack", "Queen", "King", "Aces" };

     for( int a = 0; a < 7; a++ ){
     int i = (int) ( Math.random() * suit.length );
     int j = (int) ( Math.random() * deck.length );
         //System.out.println( "Suit " + suit[i] + " Deck " + deck[j] );
     System.out.println( suit[(int) (Math.random() * suit.length)]
             + " : " + deck[(int) (Math.random() * deck.length)]);
     }
            System.out.println();

  }
} 
```

给我一些关于如何做到这一点的想法。谢谢。

**注意：**这不是家庭作业。我只是想给自己一些关于数组的练习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:09:03.157

我相信您误解了上一个问题的答案。这个想法是在循环中使用 i 和 j 的值，而不是两次生成它们。这是一个工作示例。我没有使用哈希映射，因为您事先知道西装及其数量，所以只需一个数组就足够了：

```
public class Main {
    public static void main(String[] args){

         String[] suit = { "Clubs", "Hearts", "Diamonds", "Spades" };
         String[] deck = { "2", "3", "4", "5", "6", "7", "8", "9", "10",
                            "Jack", "Queen", "King", "Aces" };
         int counts[] = new int[4];
         for( int a = 0; a < 7; a++ ){
         int i = (int) ( Math.random() * suit.length );
         int j = (int) ( Math.random() * deck.length );
             //System.out.println( "Suit " + suit[i] + " Deck " + deck[j] );
         System.out.println( suit[i] + " : " + deck[j]);
         counts[i]++;
         }
                System.out.println();
         for (int i =0;i<4;++i){
            System.out.println(suit[i] + " : " + counts[i]);
         }

      }
    } 
```

您可以在[ideone](http://ideone.com/8q4s6)上查看代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:06:06.090

您可以使用 a[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)来保存出现次数。

```
Map<String, Integer> occurences = new HashMap<String, Integer>();

for(String value : array)
{
    Integer oldValue = occurences.get(value);
    if(oldValue == null)
        occurences.put(value, 1);
    else
        occurences.put(value, oldValue + 1);
} 
```

但是，您可能希望先去掉末尾的数字（提示：使用[`String#split("-")`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)和[`String#trim()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)之后）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T09:06:18.820

您可以在

```
Map<String, Integer> myMap = new HashMap<String, Integer>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:16:34.943

对于您感兴趣的两种使用方式`Map<String, Integer>`

```
final Map<String, AtomicInteger> countMap = new LinkedHashMap<>();

public void count(String text) {
    AtomicInteger ai = countMap.get(text);
    if (ai == null) countMap.put(text, ai = new AtomicInteger());
    ai.getAndIncrement();
} 
```

或者

```
TObjectIntHashMap<String> countMap = new TObjectIntHashMap<>();

public void count(String text) {
    countMap.adjustOrPutValue(text, 1, 1);
} 
```

TObjectIntHashMap可以更有效，因为它可以减少创建的对象的数量[。](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectIntHashMap.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T09:14:29.097

这是我对您的问题的实现（使用 JRE 6 运行）：

```
package test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class Test {
    public static void main(String[] args) {
        List<String> list = new ArrayList<String>();
        list.add("Clubs - 8");
        list.add("Clubs - Ace");
        list.add("Clubs - Jack");
        list.add("Hearts - 9");
        list.add("Spades - 3");
        list.add("Hearts - 6");

        Map<String, Integer> countMap = new HashMap<String, Integer>();

        for (String card : list) {
            String suit = card.split("-")[0].trim();
            String deck = card.split("-")[0].trim();
            if (countMap.containsKey(suit)) {
                countMap.put(suit, countMap.get(suit) + 1);
            } else {
                countMap.put(suit, 0);
            }
        }

        System.out.println("Count of cards:");
        for (String card : countMap.keySet()) {
            System.out.println(card + ":" + countMap.get(card));
        }

    }

} 
```

输出：

```
Count of cards:
Spades:0
Hearts:1
Clubs:2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T09:17:14.863

做这个：

```
int[] suitCount=new int[4];
for( int a = 0; a < 7; a++ ){
 int i = (int) ( Math.random() * suit.length );
 int j = (int) ( Math.random() * deck.length );
     //System.out.println( "Suit " + suit[i] + " Deck " + deck[j] );
 System.out.println( suit[(int) (Math.random() * suit.length)]
         + " : " + deck[(int) (Math.random() * deck.length)]);
suitCount[i]++;
 }
for(int i=0;i<4;i++)
System.out.println(suit[i]+" - "+suitCount[i]); 
```

虽然，我不确定当您重新分配套装和甲板的索引时，您希望 println 方法如何打印，insted，分别用 i 和 j 替换它们。

}

# jquery-mobile - 如何在jquery mobile中显示带有页眉或页脚链接的列表？

> ID：12796420
> 
> 赞同：0
> 
> 时间：2012-10-09T09:03:50.443
> 
> 标签：jquery-mobile, header, footer

我想显示一个包含链接列表的页脚，但是当我添加链接时，“li”变成了一个按钮。我该如何解决？

一些代码：

```
 <div data-role="footer">                    
        <ul data-role="listview">
             <li>
                  <a href="www.google.com"><span>Google</span></a>
             </li>
        </ul>
   </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:08:46.487

将您的更改`ul`为`data-role="none"`，如下所示：

```
 <div data-role="footer">                    
        <ul data-role="none">
             <li>
                  <a href="www.google.com"><span>Google</span></a>
             </li>
        </ul>
   </div> 
```

**更新**：
您可以尝试以下方法来获得您想要的样式，`li`同时使其像链接一样工作：

```
<ul data-role="listview"> 
   <li style="cursor:pointer" onclick="window.location.href='http://www.google.com/'">Google</li> 
</ul> 
```

# c++ - join() 抛出 thread_resource_error？

> ID：12796421
> 
> 赞同：0
> 
> 时间：2012-10-09T09:03:52.120
> 
> 标签：c++, multithreading, boost

我处于调用`join()`对象`boost::thread`引发`thread_resource_error`异常的情况。查看[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join)没有提到这个方法可能会抛出这样的异常。

我不太确定从哪里开始调试。关于什么可能导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:18:21.620

查看 boost 源代码，我发现以下内容：

```
void thread::join()
{
    if (this_thread::get_id() == get_id())
    {
        boost::throw_exception(thread_resource_error(system::errc::resource_deadlock_would_occur, "boost thread: trying joining itself"));
    }
    detail::thread_data_ptr local_thread_info=(get_thread_info)();
    if(local_thread_info)
    {
        this_thread::interruptible_wait(local_thread_info->thread_handle,detail::timeout::sentinel());
        release_handle();
    }
} 
```

所以基本上它有一些未记录的行为，`thread_resource_error`如果一个线程试图加入自己，它会抛出一个。

# asp.net-mvc - 在 Web.Config 中将 CustomErrors 设置为 On 会导致站点崩溃

> ID：12796423
> 
> 赞同：0
> 
> 时间：2012-10-09T09:03:54.507
> 
> 标签：asp.net-mvc, asp.net-mvc-3, configuration, web-config, custom-errors

我有一个 ASP.NET MVC3 站点，其中 CustomErrors 在 Web.config 中设置为 Off。当然，我想将其设置为开启。但是，将其设置为打开时：

```
<customErrors mode="On" defaultRedirect="~/Error.aspx" /> 
```

访问该站点会立即给出错误页面。

将其关闭不会产生错误，并且该站点运行良好。是否有 customErrors 捕获的无声错误，但我没有看到？使用会话变量与我有关吗？

部署到 IIS 时会发生这种情况，但不会在我的开发环境中发生。

# map - 每小时从 couchdb 获取数百万个对象的数据

> ID：12796431
> 
> 赞同：2
> 
> 时间：2012-10-09T09:04:24.530
> 
> 标签：map, amazon-web-services, mapreduce, couchdb, reduce

我在 AWS EC2 中等按需实例上设置了一个 couchdb 数据库，其中大约有 400 万个对象，增长率约为每秒 100 个对象。

我想在上面写一些 map/reduce 查询，但是我的 map 作业需要很长时间才能完成。所以我想知道我是否应该将数据复制到其他机器，并删除主机上的所有数据，保持干净，我宁愿在复制数据的第二个实例上编写我的地图作业；我也在考虑将这些数据转移到 s3 实例，并在此处仅保留一周的数据。

我在想正确的方向吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:01:07.407

不幸的是，对于这么大的数据库，您只能使用内置的 reduce 函数：

*   _和
*   _数数
*   _stats

这些函数的工作速度比 javascript 快得多。这是大型数据库的唯一可能选择。

[http://wiki.apache.org/couchdb/Built-In_Reduce_Functions](http://wiki.apache.org/couchdb/Built-In_Reduce_Functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:12:27.563

您可以编写自己的[View Server](http://wiki.apache.org/couchdb/View_server)或使用其中一种可用的[实现](http://wiki.apache.org/couchdb/View_server#Implementations)来测试这是否有助于提高性能。

# xml - 使用 xslt 将 XML 转换为 HTML

> ID：12796433
> 
> 赞同：1
> 
> 时间：2012-10-09T09:04:31.050
> 
> 标签：xml, xslt

我开发了一个基于 java 的命令行实用程序，可以将 xml 转换为另一个 xml 文件并生成 HTML。在这个程序中，我使用 SAX 解析器将源 xml 的内容读入我的 java 对象，然后使用 JAXB 生成 XML。现在我正在通过填充 HTML 内容的字符串来创建 HTMl 文件，但它会在我的 java 类中产生硬编码的 html 代码。根据我的研究，我可以使用 XSLT 将 XML 转换为 HTML。我是 XSLT 的新手。谁能帮我？请参阅下面的示例。谢谢

XML 输入：

```
<Groups>
   <Group>
    <GroupName>GroupA</GroupName>
    <Role>
        <RoleName>Correspondence Team B</RoleName>
        <Functions>
            <Function>CT2 Work</Function>
            <Function>HOL01_My Work</Function>
            <Function>HOL02_My Work</Function>
        </Functions>
    </Role>
</Group>

 <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Customer Service Rep</RoleName>
        <Functions>
            <Function>CSR Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>
<Group>
    <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Dispute Advisor</RoleName>
        <Functions>
            <Function>DA Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>
<Group>
    <GroupName>GroupA</GroupName>
    <Role>
        <RoleName>Correspondence Team</RoleName>
        <Functions>
            <Function>CT Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>

<Group>
    <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Correspondence Team B</RoleName>
        <Functions>
            <Function>CT2 Work</Function>
            <Function>HOL01_My Work</Function>
            <Function>HOL02_My Work</Function>
        </Functions>
    </Role>
</Group> 
```

所需的 Html 表格格式：

```
<table border=1>
    <tr>
        <th>Group Name</th>
        <th>Role Name</th>
        <th>Function Names</th>
    </tr>
    <tr>
        <td rowspan=5>Group A</td>
        <td rowspan=2>Correspondence Team</td>
        <td>CT Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
    <tr>
        <td rowspan=3>Correspondence Team B</td>
        <td>CT Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
    <tr>
        <td rowspan=0>Group B</td>
        <td rowspan=2>Customer Service Rep</td>
        <td>CSR Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
    <tr>
        <td rowspan=2>Dispute Advisor</td>
        <td>DA Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
    <tr>
        <td rowspan=2>Correspondence Team</td>
        <td>CT Work</td>
    </tr>
    <tr>
        <td>HOL01_My Work</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T14:59:52.260

[假设 XSLT 2.0（您可以在Saxon 9](http://saxon.sourceforge.net/)的帮助下使用 Java 运行）您可以使用类似的样式表

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:output method="html" indent="yes" version="5.0"/>

<xsl:template match="/">
  <html lang="en">
    <head>
      <title>Test</title>
    </head>
    <body>
      <h1>Test</h1>
      <xsl:apply-templates/>
    </body>
  </html>
</xsl:template>

<xsl:template match="Groups">
  <table frame="border" rules="all">
    <thead>
      <th>Group Name</th>
      <th>Role Name</th>
      <th>Function Names</th>
    </thead>
    <tbody>
      <xsl:variable name="groups" as="element(group)*">
        <xsl:for-each-group select="Group" group-by="GroupName">
          <group name="{current-grouping-key()}" size="{count(current-group()/Role/Functions/Function)}">
            <xsl:for-each-group select="current-group()" group-by="Role/RoleName">
              <role name="{current-grouping-key()}" size="{count(current-group()/Role/Functions/Function)}">
                <xsl:copy-of select="current-group()/Role/Functions/Function"/>
              </role>
            </xsl:for-each-group>
          </group>
        </xsl:for-each-group>
      </xsl:variable>
      <xsl:apply-templates select="$groups/role/Function"/>
    </tbody>
  </table>
</xsl:template>

<xsl:template match="group/role/Function">
  <tr>
    <xsl:apply-templates select="." mode="group"/>
    <xsl:apply-templates select="." mode="role"/>
    <td>
      <xsl:value-of select="."/>
    </td>
  </tr>
</xsl:template>

<xsl:template match="group/role[1]/Function[1]" mode="group">
  <th rowspan="{../../@size}">
    <xsl:value-of select="../../@name"/>
  </th>
</xsl:template>

<xsl:template match="group/role[position() gt 1]/Function |
                     group/role[1]/Function[position() gt 1]" mode="group"/>

<xsl:template match="group/role/Function[1]" mode="role">
  <th rowspan="{../@size}">
    <xsl:value-of select="../@name"/>
  </th>
</xsl:template>

<xsl:template match="group/role/Function[position() gt 1]" mode="role"/>

</xsl:stylesheet> 
```

转换输入文档，如

```
<Groups>
   <Group>
    <GroupName>GroupA</GroupName>
    <Role>
        <RoleName>Correspondence Team B</RoleName>
        <Functions>
            <Function>CT2 Work</Function>
            <Function>HOL01_My Work</Function>
            <Function>HOL02_My Work</Function>
        </Functions>
    </Role>
</Group>

<Group>
 <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Customer Service Rep</RoleName>
        <Functions>
            <Function>CSR Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>
<Group>
    <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Dispute Advisor</RoleName>
        <Functions>
            <Function>DA Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>
<Group>
    <GroupName>GroupA</GroupName>
    <Role>
        <RoleName>Correspondence Team</RoleName>
        <Functions>
            <Function>CT Work</Function>
            <Function>HOL01_My Work</Function>
        </Functions>
    </Role>
</Group>

<Group>
    <GroupName>GroupB</GroupName>
    <Role>
        <RoleName>Correspondence Team B</RoleName>
        <Functions>
            <Function>CT2 Work</Function>
            <Function>HOL01_My Work</Function>
            <Function>HOL02_My Work</Function>
        </Functions>
    </Role>
</Group>
</Groups> 
```

像 HTML5 一样

```
<!DOCTYPE HTML>
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Test</title>
   </head>
   <body>
      <h1>Test</h1>
      <table frame="border" rules="all">
         <thead>
            <th>Group Name</th>
            <th>Role Name</th>
            <th>Function Names</th>
         </thead>
         <tbody>
            <tr>
               <th rowspan="5">GroupA</th>
               <th rowspan="3">Correspondence Team B</th>
               <td>CT2 Work</td>
            </tr>
            <tr>
               <td>HOL01_My Work</td>
            </tr>
            <tr>
               <td>HOL02_My Work</td>
            </tr>
            <tr>
               <th rowspan="2">Correspondence Team</th>
               <td>CT Work</td>
            </tr>
            <tr>
               <td>HOL01_My Work</td>
            </tr>
            <tr>
               <th rowspan="7">GroupB</th>
               <th rowspan="2">Customer Service Rep</th>
               <td>CSR Work</td>
            </tr>
            <tr>
               <td>HOL01_My Work</td>
            </tr>
            <tr>
               <th rowspan="2">Dispute Advisor</th>
               <td>DA Work</td>
            </tr>
            <tr>
               <td>HOL01_My Work</td>
            </tr>
            <tr>
               <th rowspan="3">Correspondence Team B</th>
               <td>CT2 Work</td>
            </tr>
            <tr>
               <td>HOL01_My Work</td>
            </tr>
            <tr>
               <td>HOL02_My Work</td>
            </tr>
         </tbody>
      </table>
   </body>
</html> 
```

# javascript - 检查输入中的无效字符的功能...随机工作

> ID：12796435
> 
> 赞同：0
> 
> 时间：2012-10-09T09:04:41.483
> 
> 标签：javascript, validation

如果错误非常愚蠢，请原谅，因为我刚刚开始使用 Javascript（顺便说一下，我喜欢编程）我正在尝试创建一个小程序，并且在其中一个输入字段中，你有写下你的名字。我做了一个函数来防止你包含 &%$?¿ 等字符......

问题是该功能工作正常......有时是的，有时不是......它似乎取决于你在哪里输入无效字符，但由于我对编程的理解有限，我仍然无法理解我在做什么错误的。在这里，看看：

```
 function validate_input(text) {

    var notgood = "!"·$%&/()=?¿@#¬"; //cannot have this inside name

    var i = 0;   

    while (i <= notgood.length) { 

        if (text.indexOf(notgood.charAt(i)) ==-1) {
            ind = ind + 1;  
            break; 
        }
        else {  
            alert("Your name cannot include symbols");
            var text = prompt("Try again");
        }
    }} 
```

一百万谢谢。只是一个小细节。我可以在不检查符号的情况下输入，但我觉得无法理解这个问题有点傻......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:12:03.713

如果您转义`"`notgood 字符串中的第二个，您的代码可能会起作用：

```
var notgood = "!\"·$%&/()=?¿@#¬"; 
```

尽管我看到了许多其他潜在问题，例如`ind`全球性问题。

或者您可以尝试使用正则表达式，它更适合您的用例

```
var notgood = /[!"·$%&/()=?¿@#¬]/; //cannot have this inside name

if ( notgood.test( text ) ) {
    alert("Your name cannot include symbols");
    text = prompt("Try again");
} 
```

# sharepoint - SharePoint Access 数据库，获取用户？

> ID：12796437
> 
> 赞同：1
> 
> 时间：2012-10-09T09:04:52.363
> 
> 标签：sharepoint, ms-access

是否有一种简单的（任何）方法可以在 SharePoint 中创建数据库（我正在使用 MS Access 对其进行编辑）并有一个指向 SharePoint 用户列表的链接表？

我想修改内置示例“问题数据库”，使其不使用自己的用户表，而是使用 SharePoint 的用户表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T02:07:58.320

您始终可以链接到用户表，并且可以为您发布的任何应用程序这样做。

您甚至可以对未发布的（Web）应用程序执行此操作。

您可能必须删除现有的用户表（因此测试/尝试副本）。

要链接，您首先需要的是当前发布的应用程序的 URL。假设这是在 Access 中打开的，然后点击文件，然后您会看到后台，并且有两个地方可以看到已发布站点的 URL。请注意绿色是您可以单击的超链接（我经常使用它来确保在浏览器中启动正确的网站）。

![在此处输入图像描述](../Images/e78c91e44a78fe8d19eda7c846d4aa40.png)

但是，我们需要进行剪切 + 粘贴，因此请注意上面蓝色的 URL。您可以单击该 URL，将其突出显示，然后右键单击该 URL 并将其“复制”到您的粘贴缓冲区中。

现在从主页，只需链接到 SharePoint 网站上的表格。从外部数据选项卡中，选择 SharePoint 列表。

![在此处输入图像描述](../Images/5dda1f5774181db04ea634ac983ca67b.png)

现在，粘贴您的 URL（您可以输入，但是工作量太大了！）。

现在，当表格列表出现时，您会看到：

![在此处输入图像描述](../Images/d28e5dab62daa198fa3e7c280e153fa6.png)

从上面选择用户信息表。

这将用用户表“替换”您发布的表。此技巧适用于 Access 中的基于 Web 和非基于 Web 的应用程序。

Albert D. Kalalal（访问 MVP）

加拿大艾伯塔省埃德蒙顿

# linq - 如何在 Json-Linq 的 RavenDB 索引中选择属性？

> ID：12796438
> 
> 赞同：2
> 
> 时间：2012-10-09T09:04:52.707
> 
> 标签：linq, attributes, indexing, ravendb

在 RavenDB 我的文档 (ID = 1234) 是

```
 "datacontainer": {
      "data": [
        {
          "@idx": "1",
          "@idy": "a",
          "value": {
            "#text": "test 2010"
          }
        },
        {
          "@idx": "2",
          "@idy": "b",
          "value": {
            "#text": "test 2011"
          }
        },
        {
          "@idx": "3",
          "@idy": "c",
          "value": {
            "#text": "test 2012"
          }
        }
      ]
   } 
```

我想创建一个索引，在其中选择我最喜欢的值（例如`idx = "2"`和`idy = "b"`），输出将是：

```
(ID, value_text) = (1234, "test 2011") 
```

现在我可以选择一个元素并在 Linq 中检查它的值：

```
where p.datacontainer.data[0]["@idx"] == "2" && p.datacontainer.data[0]["@idy"] == "b" 
```

如何在列表中搜索正确的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:06:24.127

Luigi，在 RavenDB 中，您不搜索列表值，而是搜索具有与您的查询匹配的给定*文档的文档。*

就您而言，您的实体是什么样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:14:24.967

我解决了我的问题！在 RavenDB 中，名为“MyIndex”的索引是：

**地图：**

```
from p in docs
select new  
{  Id = p.id, 
   M = p.dataApplication.datacontainer.data.Where(x => x["@idx"] == "2").First(x => x["@idy"] == "b").value["#text"] 
}; 
```

**减少：**

```
 from test in results
 group test by new {test.Id, test.M   } into g
 select new { g.Key.Id, g.Key.M } 
```

现在我可以在查询中使用此索引，因此我将搜索包含特定值的文档，例如：

```
 var results = from p in session.Query<QueryResult>("MyIndex")
               where p.M == "test 2011"
               select p; 
```

也许有更好的解决方案，但现在可以了！

# python - 使用 Python 通过身份验证连接到 AD 域

> ID：12796443
> 
> 赞同：0
> 
> 时间：2012-10-09T09:05:14.500
> 
> 标签：python, active-directory

我正在使用 Python 编写一个简单的客户端来移动用户、重置密码、使用 Tim Golden 的 active_directory 模块扩展用户帐户。

目前我正在使用带有我登录的默认域的模块，它运行良好。但是现在我找不到使用同一模块连接到另一个域的任何方法，当我使用 active_directory.AD("DC_name") 它只返回“pywintypes.com_error: (-2147463168, 'OLE error 0x80005000', None,没有任何）”

我想这与身份验证有关，因为我们必须在访问 AD 时进行（使用 ADExplorer）。我可以使用 active_directory 模块或通常使用 win32com API 来执行此操作。

我知道另一个 python-ldap 模块做得很好，但它不能将用户从一个 OU 移动到另一个。欢迎任何提交以使用另一个完成这项工作的模块:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:19:22.590

似乎 active_directory 正在使用默认的 Win32 API，它不支持将用户/密码绑定到不同的 DC。

您可能必须使用 ldap 模块并找到解决方法

# php - str_replace 不适用于 txt 文件 PHP

> ID：12796444
> 
> 赞同：0
> 
> 时间：2012-10-09T09:05:17.020
> 
> 标签：php, string, str-replace

str_replace 似乎没有像我们预期的那样工作。

我们有一个文本文件，我们正在尝试删除文件的一部分。

```
while(!feof($bodyfile)) {

    $content = @fgets($bodyfile);

    $content = str_replace("MARGIN","",$content); 
```

（显然 fopen 用于将文件打开为 'r'） 奇怪的是，查找和替换 M 有效吗？但不是保证金..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:09:46.763

## 更新：

[`fgets()`](http://php.net/fgets)函数一次只读取 1 行，通过将该行放入`$content`变量中，您将覆盖前一行的替换，并一遍又一遍地执行此操作。

试试这个：

```
$content = "";
while(!feof($bodyfile)) {

    $line = @fgets($bodyfile);

    $content .= str_replace("MARGIN","",$line); 
```

因此，这段代码所做的是读取该行并将其分配给`$line`变量，然后将替换的字符串添加到您的`$content`变量中。

* * *

通过在函数前面添加`@`符号，您可以[抑制](http://php.net/manual/en/language.operators.errorcontrol.php)该函数给出的错误。
尝试`@`从您的删除`@fgets`，看看是否有任何错误。

尝试`var_dump($content)`或`echo $content`查看文件是否正确加载。

请记住，这[`str_replace()`](http://php.net/str-replace)是区分大小写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:19:11.017

你可以这样做：

```
$str=implode("",file('somefile.txt'));
$fp=fopen('somefile.txt','w');
$str=str_replace('MARGIN','',$str);
//OR
//$str=str_ireplace('MARGIN','',$str); for case insensitivity
fwrite($fp,$str,strlen($str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:36:48.343

刚刚发现该文件是 UTF-16 字符编码而不是 UTF-8，原因不明。转换后，现在我的方法原来有效！

感谢大家的建议

# c - “不在乎”指针？

> ID：12796445
> 
> 赞同：0
> 
> 时间：2012-10-09T09:05:21.487
> 
> 标签：c, pointers

我有这样的功能：

```
uint8_t getULEB128Value(uint8_t *p, uint32_t *to){
    unsigned int result; 
    uint8_t count = 1;
    uint8_t cur;

    result = *p;
    if(result > 0x7F){
        count++;
        cur = *(++p);
        result = (result & 0x7F) | (cur << 7);
        if(cur > 0x7F){
            count++;
            cur = *(++p);
            result |= ((cur & 0x7F) << 14);
            if(cur > 0x7F){
                count++;
                cur = *(++p);
                result |= ((cur & 0x7F) << 21);
                if(cur > 0x7F){
                    count++;
                    cur = *(++p);
                    result |= ((cur & 0x7F) << 28);
                }
            }
        }
    }
    *to = result;
    return count;
} 
```

现在我只想知道长度，我对值并不感兴趣......
是否有可能有一个无关指针？所以那里写的每一个价值都去涅槃？像 /dev/null？
我的意思是我当然可以在某处创建一个指针，然后释放它，但也许已经有这样的东西了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:16:52.607

通常的模式是允许将空指针传递给您的函数并在写入值之前检查它：

```
if (to != NULL) {
  *to = result;
} 
```

然后你可以这样称呼它

```
result = getULEB128Value(p, NULL); 
```

当您不想在“to”指针中写入任何内容时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:21:04.193

在 C 中，法律不允许您取消引用不指向现有有效对象的指针。

要找到长度（如果我正确理解了您的问题），您可以执行以下简单操作：

```
size_t GetLength(const uint8_t* p)
{
  size_t l = 1;
  while (*p & 0x80)
  {
    p++;
    l++;
  }
  return l;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:21:49.270

/dev/null 的概念不适用于指针，因为它不是流。如果您将多个数据写入一个指针，您通常会为每个值递增指针，因此您实际上将除第一个值之外的所有值写入指针后面。因为指针算法是明确定义的，所以不可能有一个“不关心”的指针。

# c# - 图像流源

> ID：12796450
> 
> 赞同：1
> 
> 时间：2012-10-09T09:05:30.280
> 
> 标签：c#, windows-phone-7, nullreferenceexception

我有一张图片 `String myimg = "images.jpg";` ，我想设置`ImageStream`为`mediaHistoryItem`

我试过这段代码：

```
if (mediaHistoryItem.ImageStream == null)
{
    StreamResourceInfo sri = Application.GetResourceStream(new Uri("real.jpg", UriKind.Relative));
    Stream stream = sri.Stream;
    mediaHistoryItem.ImageStream = stream;
} 
```

但它给了我例外`NullreferenceException`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:13:24.887

确保您的图片： real.jpg 的属性：构建操作是“内容”并且 FilePath 是正确的。

如果您的图像的构建操作是“资源”，您应该使用 path: [projectName];component/real.jpg

# php - 向数组添加值的最佳方法（附加项目或 array_merge()）

> ID：12796453
> 
> 赞同：3
> 
> 时间：2012-10-09T09:05:35.727
> 
> 标签：php, arrays

假设我们有一个数组

```
$a = array('a', 'b', 'c'); 
```

我们需要得到一个数组

```
$a = array('a', 'b', 'c', 'd', 'e'); 
```

我们应该使用

```
$a = array_merge($a, array('d', 'e')); 
```

或者

```
$a[] = 'd';
$a[] = 'e'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:07:22.267

在这种情况下两者都是相同的，因为您没有任何需要关注的有序或命名键。使用任何你喜欢的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:07:31.737

这取决于你如何拥有这些值，你已经作为一个数组，那么`array_merge()`就可以了，但是如果你循环一些东西并且你一次得到一个值，那么第二个选项就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:09:47.943

取决于您如何生成第二个数组。如果您希望附加的第二个数组来自另一个函数的输出，则更好的选择是`array_merge()`.

# c - 带有“int 0x80”的 Linux 内核系统调用调用

> ID：12796458
> 
> 赞同：3
> 
> 时间：2012-10-09T09:05:43.423
> 
> 标签：c, linux, assembly, linux-kernel, system-calls

我正在研究 Linux 内核，目前我尝试实现自己的系统调用。

在内核代码中，它看起来如下：

```
asmlinkage long sys_my_syscall()
{
     printk("My system call\n");
     return 0;
} 
```

如果我用一个`systemcall()`函数调用它，它工作正常，但我找到了另一种方法：

```
int my_syscall(void)
{
    long __res;
    __asm__ volatile (
    "movl $312, %%eax;"
    "int $0x80;"
    "movl %%eax, %0;"
    : "=m" (__res)
    :
    : "%eax"
    );
    if ((unsigned long) (__res) >= (unsigned long) (-125)) {
       errno = -(__res);
       __res = -1;
    }
    return (int)(__res);
} 
```

但它返回值`-14` `EFAULT`。

我究竟做错了什么？

**设置：** Linux 内核 3.4，ARCH x86_64

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:19:58.760

对于 64 位系统，Linux 系统调用 ABI 与 i*86 完全不同，除非有一层兼容性。这可能会有所帮助： [http ://callumscode.com/blog/3](http://callumscode.com/blog/3)

我还在 eglibc 中找到了系统调用源，它看起来确实不同： [http ://www.eglibc.org/cgi-bin/viewvc.cgi/trunk/libc/sysdeps/unix/sysv/linux/x86_64/syscall.S ?view=标记](http://www.eglibc.org/cgi-bin/viewvc.cgi/trunk/libc/sysdeps/unix/sysv/linux/x86_64/syscall.S?view=markup)

所以它看起来`int $0x80`不适用于 x86_64 Linux 内核，您需要`syscall`改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-17T07:21:50.803

我有两个想法。

1.  你更新系统调用表了吗？

对于内核 4.14，它是 arch/x86/entry/syscalls/syscall_64.tbl

2.  您是否启用了 COMPAT_32 内核选项？

如果没有， int 0x80 将不起作用。您的系统似乎已启用此选项，否则您会遇到#GP 异常。

# java - 休眠一对一关系

> ID：12796459
> 
> 赞同：0
> 
> 时间：2012-10-09T09:05:50.477
> 
> 标签：java, hibernate, hibernate-mapping, hibernate-annotations

我有两个持久性实体：`User`和`UserDetail`. 他们是一对一的关系。我使用休眠注释。但是我在我的数据库中获取了同一用户的多个用户信息对象。显然，我对 Hibernate 注释的了解并不能很好地解决这个问题。

**用户**等级：

```
@Entity
@Table(name = "USER")
public class User {

   @Id
   @GeneratedValue
   @Column(name = "ID")
   private Long id; 

   @Column(name = "NAME")
   private String name; 

   @Column(name = "PASSWORD")
   private String password;

   @OneToOne(mappedBy = "user", cascade = CascadeType.ALL)
   private UserDetail userDetail;

   // setters and getters

} 
```

**用户详细信息**类：

```
@Entity
@Table(name = "USER_DETAIL")
public class UserDetail {  

   @OneToOne
   @JoinColumn(name = "USER_ID")
   private User user;

   // other fields

} 
```

我在我的代码中使用它如下：

```
UserDetail userDetail = new UserDetail();
userDetail.setInfo(info);
userDetail.setUser(seventhUser);
hibernateTemplate.saveOrUpdate(userDetail); 
```

一切正常。这是我的桌子`USER_DETAIL`： ![USER_DETAIL 表](../Images/a948fe6c96ec25a4c4936985e062c82b.png)

但是当我尝试更改用户信息时，我得到了不正确的行为。再次设置用户信息后得到下表：

```
UserDetail newUserDetail = new UserDetail();
newUserDetail.setInfo(newInfo);
newUserDetail.setUser(seventhUser);
hibernateTemplate.saveOrUpdate(newUserDetail); 
```

![在此处输入图像描述](../Images/5d51feba2e96b222fa838edd2609b1dd.png)

为什么相同的两个信息对象对应一个用户？我有一对一的关系。我怎样才能避免这种情况？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:10:45.103

如果要修改现有的`UserDetail`，则必须设置其 ID，或从会话中获取并修改它。否则，Hibernate 认为它是一个必须保存的新的，因为它没有任何 ID。

```
UserDetail existingUserDetail = session.get(UserDetail.class, theUserDetailId);
existingUserDetail.setInfo(newInfo); 
```

为确保您不会为同一用户保存两个 UserDetail 实例，您应该在数据库表的`USER_ID`列上添加唯一约束。`UserDetail`

# dojo - 在道场商店中搜索物品

> ID：12796465
> 
> 赞同：0
> 
> 时间：2012-10-09T09:06:07.673
> 
> 标签：dojo

有什么方法可以在 Dojo 商店（1.1 版！！）中找到“项目”。

Json 数据的格式类似于：name/id。

到目前为止，如果尝试使用：

```
var storeItem = this.myFilteringSelect.store.fetch({query: {name: "Alpha"}}); 
```

但是 fetch 不返回项目？顺便提一句。我需要项目的“ID”来为过滤选择设置默认值（但 id 可能会不时更改......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:13:12.750

让我开始我的回答，因为我不能专门谈 1.1。但是在 1.6...

`store.fetch`以异步方式编码。它不返回该项目。您必须提供一个回调，该回调将遍历从查询返回的项目。

```
store.fetch({
    query: {/*queryParams*/},
    onComplete: function(items, findResult){
        dojo.forEach(items, function(item){
            // work with your item
        }
    }
}); 
```

[https://dojotoolkit.org/reference-guide/1.6/dojo/data/api/Read.html#dojo-data-api-read](https://dojotoolkit.org/reference-guide/1.6/dojo/data/api/Read.html#dojo-data-api-read)

我不相信这个 API 随着时间的推移发生了很大的变化，所以如果它存在于 1.1 中，那么我认为这应该会有所帮助。

# sql - 将 SQL 查询转换为 MongoDB mapreduce

> ID：12796475
> 
> 赞同：1
> 
> 时间：2012-10-09T09:06:31.173
> 
> 标签：sql, mongodb, mapreduce

我在 mongo 中有以下集合：

```
{
    "_id" : ObjectId("506217890b50f300d020d237"),
    "o_orderkey" : NumberLong(1),
    "o_orderstatus" : "O",
    "o_totalprice" : 173665.47,
    "o_orderdate" : ISODate("1996-01-02T02:00:00Z"),
    "o_orderpriority" : "5-LOW",
    "o_clerk" : "Clerk#000000951",
    "o_shippriority" : 0,
    "o_comment" : "blithely final dolphins solve-- blithely blithe packages nag blith",
    "customer" : {
            "c_custkey" : NumberLong(36901),
            "c_name" : "Customer#000036901",
            "c_address" : "TBb1yDZcf 8Zepk7apFJ",
            "c_phone" : "23-644-998-4944",
            "c_acctbal" : 4809.84,
            "c_mktsegment" : "AUTOMOBILE",
            "c_comment" : "regular accounts after the blithely pending dependencies play blith",
            "c_nationkey" : {
                    "n_nationkey" : NumberLong(13),
                    "n_name" : "JORDAN",
                    "n_comment" : "blithe, express deposits boost carefully busy accounts. furiously pending depos",
                    "n_regioin" : {
                            "r_regionkey" : NumberLong(4),
                            "r_name" : "MIDDLE EAST",
                            "r_comment" : "furiously unusual packages use carefully above the unusual, exp"
                    }
            }
    },
    "o_lineitem" : [
        {
            "l_linenumber" : 1,
            "l_quantity" : 17,
            "l_extendedprice" : 21168.23,
            "l_discount" : 0.04,
            "l_tax" : 0.02,
            "l_returnflag" : "N",
            "l_linestatus" : "O",
            "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
            "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
            "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
            "l_shipinstruct" : "DELIVER IN PERSON",
            "l_shipmode" : "TRUCK",
            "l_comment" : "blithely regular ideas caj",
            "partsupp" : {
                "ps_availqty" : 6157,
                "ps_supplycost" : 719.17,
                "ps_comment" : "blithely ironic packages haggle quickly silent platelets. silent packages must have to nod. slyly special theodolites along the blithely ironic packages nag above the furiously pending acc",
                "ps_partkey" : {
                    "p_partkey" : NumberLong(155190),
                    "p_name" : "slate lavender tan lime lawn",
                    "p_mfgr" : "Manufacturer#4",
                    "p_brand" : "Brand#44",
                    "p_type" : "PROMO BRUSHED NICKEL",
                    "p_size" : 9,
                    "p_container" : "JUMBO JAR",
                    "p_retailprice" : 1245.19,
                    "p_comment" : "regular, final dol"
                },
                "ps_suppkey" : {
                    "s_suppkey" : NumberLong(7706),
                    "s_name" : "Supplier#000007706",
                    "s_address" : "BlHq75VoMNCoU380SGiS9fTWbGpeI",
                    "s_phone" : "33-481-218-6643",
                    "s_acctbal" : -379.71,
                    "s_comment" : "carefully pending ideas after the instructions are alongside of the dolphins. slyly pe",
                    "s_nationkey" : {
                        "n_nationkey" : NumberLong(23),
                        "n_name" : "UNITED KINGDOM",
                        "n_comment" : "fluffily regular pinto beans breach according to the ironic dolph",
                        "n_regioin" : {
                            "r_regionkey" : NumberLong(3),
                            "r_name" : "EUROPE",
                            "r_comment" : "special, bold deposits haggle foxes. platelet"
                        }
                    }
                }
            }
        },
        .
        .
        .
    ]
} 
```

我正在尝试翻译以下 sql 查询：

```
select
    s_acctbal, 
    s_name, 
    n_name, 
    p_partkey, 
    p_mfgr, 
    s_address, 
    s_phone, 
    s_comment
from 
    part, 
    supplier, 
    partsupp, 
    nation, 
    region
where 
    p_partkey = ps_partkey
    and s_suppkey = ps_suppkey
    and p_size = 15
    and p_type like '%BRASS'
    and s_nationkey = n_nationkey
    and n_regionkey = r_regionkey
    and r_name = 'EUROPE'
    and ps_supplycost = (
        select 
            min(ps_supplycost)
        from 
            partsupp, supplier, 
            nation, region
        where 
            p_partkey = ps_partkey
            and s_suppkey = ps_suppkey
            and s_nationkey = n_nationkey
            and n_regionkey = r_regionkey
            and r_name = 'EUROPE'
    )
order by 
    s_acctbal desc, 
    n_name, 
    s_name, 
    p_partkey; 
```

我正在尝试的功能：

```
db.runCommand({
    mapreduce: "ordersfull",
    query: {
    },
    map: function Map() {
        var pattern = /BRASS$/g;

        for(var i in this.o_lineitem){
            var p_size = this.o_lineitem[i].partsupp.ps_partkey.p_size;
            var p_type = this.o_lineitem[i].partsupp.ps_partkey.p_type;
            var region = this.o_lineitem[i].partsupp.ps_suppkey.s_nationkey.n_regioin.r_name;

            if(p_size==15 && p_type.match(pattern)!=null && region == "EUROPE"){
                emit("",{
                    s_acctbal: this.o_lineitem[i].partsupp.ps_suppkey.s_acctbal,
                    s_name: this.o_lineitem[i].partsupp.ps_suppkey.s_name,
                    n_name: this.o_lineitem[i].partsupp.ps_suppkey.s_nationkey.n_name,
                    p_partkey: this.o_lineitem[i].partsupp.ps_partkey.p_partkey,
                    p_mfgr: this.o_lineitem[i].partsupp.ps_partkey.p_mfgr,
                    s_address: this.o_lineitem[i].partsupp.ps_suppkey.s_address,
                    s_phone: this.o_lineitem[i].partsupp.ps_suppkey.s_phone,
                    s_comment: this.o_lineitem[i].partsupp.ps_suppkey.s_comment
                } );
            }

        }
    },
    reduce: function(key, values) {
    },
    out: 'query002'
}); 
```

在我的结果中，我得到所有条目的空值，会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:09:15.203

您可以通过在 JavaScript 函数中包含`print()`或语句来调试 MapReduce 输出。`printjson()`生成的打印输出将保存在您的 MongoDB 日志中。

您的 MapReduce 存在几个问题：

*   `for .. in`循环[不会像您期望](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)的那样工作..您应该改用[`array.forEach(..)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)
*   如果您正在迭代一个数组，您将已经拥有对该数组项的引用并且不应使用`array[index]`
*   `emit()`如果您不想要意外的分组，您应该使用唯一的键名
*   您`reduce()`应该返回一个与发出数据的结构相匹配的值
*   理想情况下，您应该使用`query`参数来限制需要检查的文档

鉴于您似乎只是在迭代文档而不进行任何分组 or `reduce()`，您可能会发现获取文档并在应用程序代码中执行相同的匹配更容易。

无论如何，该`map()`函数实际上应该看起来更像：

```
var map = function () {
    var pattern = /BRASS$/;

    this.o_lineitem.forEach(function(item) {
        var partKey = item.partsupp.ps_partkey;
        var suppKey = item.partsupp.ps_suppkey;

        var region = suppKey.s_nationkey.n_regioin.r_name;

        if (partKey.p_size==15 && partKey.p_type.match(pattern) !=null && region == "EUROPE") {
            emit(suppKey.s_name,
                {
                    s_acctbal: suppKey.s_acctbal,
                    s_name:    suppKey.s_name,
                    n_name:    suppKey.s_nationkey.n_name,
                    p_partkey: partKey.p_partkey,
                    p_mfgr:    partKey.p_mfgr,
                    s_address: suppKey.s_address,
                    s_phone:   suppKey.s_phone,
                    s_comment: suppKey.s_comment
                }
            );
        }
    })
} 
```

考虑到您的数据结构和所需的多重匹配和排序，将此查询转换为 MongoDB 2.2 中的新[聚合框架会更容易。](http://docs.mongodb.org/manual/applications/aggregation/)

当前有一些[限制](http://docs.mongodb.org/manual/applications/aggregation/#limitations)需要注意（例如，聚合管道的当前最大输出为 16MB），但您可能会发现查询更易于创建和调试。

这是一个使用聚合框架的注释示例，包括订单状态、日期和感兴趣的零件/供应商项目的初始匹配标准：

```
db.ordersfull.aggregate(
    // Find matching documents first (can take advantage of index)
    { $match: {
        o_orderstatus: 'O',
        o_orderdate: { $gte: new ISODate('2012-10-01') },
        $and: [
            { o_lineitem: { $elemMatch: { 'partsupp.ps_partkey.p_size': 15 }} },
            { o_lineitem: { $elemMatch: { 'partsupp.ps_partkey.p_type': { $exists : true } }} },        
            { o_lineitem: { $elemMatch: { 'partsupp.ps_suppkey.s_nationkey.n_regioin.r_name': 'EUROPE'}} }
        ]
    }},

    // Filter to fields of interest
    { $project: {
        _id: 0,
        o_lineitem: 1
    }},

    // Convert line item arrays into document stream
    { $unwind: '$o_lineitem' },

    // Match desired line items
    { $match: {
        'o_lineitem.partsupp.ps_partkey.p_size': 15,
        'o_lineitem.partsupp.ps_partkey.p_type': /BRASS$/, 
        'o_lineitem.partsupp.ps_suppkey.s_nationkey.n_regioin.r_name': 'EUROPE'
    }},

    // Final field selection
    { $project: {
        s_acctbal: '$o_lineitem.partsupp.ps_suppkey.s_acctbal',
        s_name:    '$o_lineitem.partsupp.ps_suppkey.s_name',
        n_name:    '$o_lineitem.partsupp.ps_suppkey.s_nationkey.n_name',
        p_partkey: '$o_lineitem.partsupp.ps_partkey.p_partkey',
        p_mfgr:    '$o_lineitem.partsupp.ps_partkey.p_mfgr',
        s_address: '$o_lineitem.partsupp.ps_suppkey.s_address',
        s_phone:   '$o_lineitem.partsupp.ps_suppkey.s_phone',
        s_comment: '$o_lineitem.partsupp.ps_suppkey.s_comment'
    }},

    // Sort the output
    { $sort: {
        s_acctbal: -1,
        n_name: 1,
        s_name: 1,
        p_partkey: 1
    }}
) 
```

# model-view-controller - 如何使用 knockout.js 实现通用 CRUD 网格？

> ID：12796477
> 
> 赞同：1
> 
> 时间：2012-10-09T09:06:31.537
> 
> 标签：model-view-controller, knockout.js, asp.net-web-api

我有一个非常好的网格，具有创建、检索、编辑和删除功能。我在客户端使用 knockout.js，在后端使用 WebAPI。

我想将此扩展到许多不同的对象。本质上，我有一个 List<T> ，其中 T 是 MVC 视图模型，淘汰视图和视图模型应该能够根据 T 计算出它们应该是什么样子。

有谁知道以网格格式显示任何视图模型（具有基于视图模型本身的特定编辑控件 - 例如日期选择器、字符串输入、下拉列表等）的简单方法，并具有通用 CRUD 功能。

下面是我正在使用的现有 HTML 示例（针对特定对象）：

```
<table class="table table-striped table-bordered">
    <thead>
        <tr>
        <th>Value Date</th>
        <th>Position Date</th>
        <th>Book</th>
        <th>Currency</th>
        <th>Currency Base</th>
        <th>Amount1</th>
        <th>Amount2</th>
        <th>Position Type</th>
        <th style="width: 100px; text-align:right;" />
        </tr>
    </thead>
   <tbody data-bind=" template:{name:templateToUse, foreach: pagedList }"></tbody>
</table> 
```

模板如下所示：

```
<script id="itemsTmpl" type="text/html">
<tr>
    <td data-bind="text: valueDate.formattedDate"></td>
    <td data-bind="text: positionDate.formattedDate"></td>
    <td data-bind="text: book"></td>
    <td data-bind="text: currency"></td>
    <td data-bind="text: currencyBase"></td>
    <td data-bind="text: amount1"></td>
    <td data-bind="text: amount2"></td>
    <td data-bind="text: positionType"></td>
    <td class="buttons">
        <a class="btn" data-bind="click: $root.edit" href="#" title="edit"><i class="icon-pencil"></i></a>
        <a class="btn" data-bind="click: $root.remove" href="#" title="remove"><i class="icon-trash"></i></a>
    </td>
</tr>
</script>

<script id="editTmpl" type="text/html">
<tr>
    <td><input data-bind="datepicker: valueDate.formattedDate, datepickerOptions: { dateFormat: 'yy/mm/dd' }"/></td>
    <td><input data-bind="datepicker: positionDate.formattedDate, datepickerOptions: { dateFormat: 'yy/mm/dd' }"/></td>
    <td><input data-bind="value: book"/></td>
    <td><input data-bind="value: currency"/></td>
    <td><input data-bind="value: currencyBase"/></td>
    <td><input data-bind="value: amount1"/></td>
    <td><input data-bind="value: amount2"/></td>
    <td><input data-bind="value: positionType"/></td>
    <td class="buttons">
        <a class="btn btn-success" data-bind="click: $root.save" href="#" title="save"><i class="icon-ok"></i></a>
        <a class="btn" data-bind="click: $root.cancel" href="#" title="cancel"><i class="icon-remove"></i></a>
    </td>
</tr>
</script> 
```

我希望视图和视图模型是通用的，而不是像上面那样“硬编码”。我相信其他人一定做过这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:13:42.790

一种解决方案是：

1.  AJAX 调用获取 JSON 视图模型列表
2.  如果列表为空，则不显示任何内容
3.  如果列表有项目，选择第一个项目并通过属性
4.  通过遍历属性开始在客户端构建视图
5.  将字符串作为 DOM 元素附加到主 DIV
6.  连线淘汰赛

这种方法存在问题。如果第一个对象的属性为 null 但存在于另一个对象中怎么办？如果是这样，我们不为其设置元素。

**更好**的选择是使用**内容协商**来获取专用模板：

因此 GET /api/customers 将返回客户，但如果您请求 text/knockout-template+html 则您会以字符串形式返回敲除模板，然后附加到 DIV 和连接敲除。**因此服务器可以使用反射生成模板或为某些模型自定义。**

# php - 更好的条带化方法 php regex

> ID：12796478
> 
> 赞同：2
> 
> 时间：2012-10-09T09:06:34.747
> 
> 标签：php, html, regex, preg-match-all

请帮助我更有效地剥离以下内容。

```
a href="/mv/test-1-2-3-4.vFIsdfuIHq4gpAnc.html" 
```

我访问的网站有一些，我只需要这两个时期之间的一切：

```
vFIsdfuIHq4gpAnc 
```

我想使用适用于正则表达式环境的当前格式和编码。请帮我调整我的以下预赛线：

```
preg_match_all("(./(.*?).html)", $sp, $content); 
```

非常感谢我在这方面获得的任何帮助，并在此先感谢您！

这是我的完整代码

```
$dp = "http://www.cnn.com";

$sp = @file_get_contents($dp);
if ($sp === FALSE) {
    echo("<P>Error: unable to read the URL $dp.  Process aborted.</P>");
    exit();
}

preg_match_all("(./(.*?).html)", $sp, $content); 

foreach($content[1] as $surl) {
    $nctid = str_replace("mv/","",$surl);
    $nctid = str_replace("/","",$nctid);
   echo $nctid,'<br /><br /><br />'; 
```

以上是我一直在做的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:11:18.753

没关系，真的。只是你不想匹配`.*?`，你想匹配多个不是句号的字符，所以可以`[^.]+`改用。

```
$sp = 'a href="/mv/test-1-2-3-4.vFIsdfuIHq4gpAnc.html"';
preg_match_all( '/\.([^.]+).html/', $sp, $content );

var_dump( $content[1] ); 
```

打印的结果：

```
array(1) {
  [0]=>
  string(16) "vFIsdfuIHq4gpAnc"
} 
```

这是一个如何遍历所有链接的示例：

```
<?php
$url = 'http://www.cnn.com';

$dom = new DomDocument( );
@$dom->loadHTMLFile( $url );

$links = $dom->getElementsByTagName( 'a' );

foreach( $links as $link ) {
    $href = $link->attributes->getNamedItem( 'href' );
    if( $href !== null ) {
        if( preg_match( '~mv/.*?([^.]+).html~', $href->nodeValue, $matches ) ) {
            echo "Link-id found: " . $matches[1] . "\n";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:12:30.280

您可以使用`explode()`：

```
$string = 'a href="/mv/test-1-2-3-4.vFIsdfuIHq4gpAnc.html"';
if(stripos($string, '/mv/')){
    $dots = explode('.', $string);
    echo $dots[(count($dots)-2)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:32:12.817

更简单

```
$sp="/mv/test-1-2-3-4.vFIsdfuIHq4gpAnc.html";
$regex = '/\.(?P<value>.*)\./';
preg_match_all($regex, $sp, $content);
echo nl2br(print_r($content["value"], 1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:11:09.877

怎么用[`explode`](http://php.net/manual/en/function.explode.php)？

```
$exploded = explode('.', $sp);
$content = $exploded[1]; // string: "vFIsdfuIHq4gpAnc" 
```

# ios - CALayer 没有响应在 TableView 中拖动

> ID：12796480
> 
> 赞同：0
> 
> 时间：2012-10-09T09:06:41.657
> 
> 标签：ios, calayer

我的 TableViewCell 中有一些 CALayers，当我触摸图层并开始拖动时，我发现，我无法拖动表格。

我必须使用 UIView 而不是 CALayer 吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:50:33.077

CALayer 不是 UIResponder 的子类，因此它们无法处理任何触摸。请改用 UIView。

# java - 通过 JMS/JNDI 连接到 WebSphere MQ 时出现 SSLHandshakeException

> ID：12796481
> 
> 赞同：0
> 
> 时间：2012-10-09T09:06:46.680
> 
> 标签：java, ssl, ibm-mq

我正在配置 WebSphere MQ 和 SSL，然后使用 Java 和 JMS/JNDI 连接到它。我使用的版本是 6.0.1.1。这是我遵循的步骤，但由于出现 SSL 异常，我无法使其运行。

**步骤 1：为 MQ 系列配置 SSL**

```
export JAVA_HOME=/opt/mqm/ssl
cd /var/mqm/qmgrs/MYQMGR/ssl
# Set up the key repository
gsk7cmd -keydb -create -db keydb.kdb -pw password -type cms -expire 1500 -stash
# Create a self-signed personal certificate
gsk7cmd -cert -create -db keydb.kdb -pw password -label ibmwebspheremqmyqmgr -dn "CN=My Queue Manager,O=My Company,C=UK" -size 1024 -x509version 3 -expire 365
# Export your personal certificate
gsk7cmd -cert -extract -db filename -pw password -label ibmwebspheremqmyqmgr -target myqmgr.cert.arm -format ascii 
```

**步骤 2：为 Java 配置 SSL**

```
# Generate the private/public key pair
# keypass option is the password to protect the private key
# storepass option is the password to protect the keystore
keytool -genkey -keystore keystore -storepass storepass -keypass keypass -dname "cn=My Java Client,O=My Company,C=UK" -alias ClientMQ -keyalg RSA -keysize 2048
# Export the public key if you need 2-way authentification
keytool -export -keystore keystore -storepass storepass -alias ClientMQ -file client.cer
# Import MQ public certificate into the truststore
# storepass option is the password to protect the keystore
keytool -import -keystore truststore -storepass trustpass -keypass keypass -alias ibmwebspheremqmyqmgr -file myqmgr.cert.arm 
```

**步骤 3：配置 MQ 绑定**

已`SSL.CHANNEL`使用以下命令创建：`DEFINE CHANNEL(SSL.CHANNEL) CHLTYPE(SVRCONN) TRPTYPE(TCP) SSLCIPH(RC4_SHA_US) SSLCAUTH(OPTIONAL) DESCR('Channel using SSL')`

JMSAdmin.config

```
INITIAL_CONTEXT_FACTORY=com.sun.jndi.fscontext.RefFSContextFactory
PROVIDER_URL=file:///opt/mqm/java/bin/JNDI
SECURITY_AUTHENTICATION=none

cd /opt/mqm/java/bin
. setjmsenv
./JMSAdmin -v -cfg JMSAdmin.config

DEFINE QCF(QCF_NAME) SYNCPOINTALLGETS(YES) HOSTNAME(HOST) PORT(1414) TRANSPORT(client) QMANAGER(MYQMGR) CHANNEL(SSL.CHANNEL) SSLCIPHERSUITE(SSL_RSA_WITH_RC4_128_SHA)
DEFINE Q(MYQNAME) QMANAGER(MYQMGR) QUEUE(LOCALQUEUE) 
```

**第 4 步：找出我收到异常的原因**

当我运行我的 Java 应用程序时，调用时出现以下异常`connectionFactory.createQueueConnection();`：

```
javax.jms.JMSException: MQJMS2005: failed to create MQQueueManager for 'xxxx:xxxxx'
com.ibm.mq.MQException: MQJE001: Completion Code 2, Reason 2397
javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake 
```

这是 SSL 跟踪：

```
keyStore is : 
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
trustStore is: c:\home\doc\jsse\truststore
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
  Subject: CN=My Queue Manager,O=My Company,C=UK
  Issuer:  CN=My Queue Manager,O=My Company,C=UK
  Algorithm: RSA; Serial number: 0x5072a61a
  Valid from Sun Oct 07 12:08:26 CEST 2012 until Tue Oct 08 12:08:26 CEST 2013

trigger seeding of SecureRandom
done seeding SecureRandom
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1349707178 bytes = { 204, 18, 167, 43, 13, 107, 252, 221, 191, 41, 25, 59, 207, 92, 67, 219, 251, 104, 195, 209, 7, 129, 104, 171, 139, 47, 163, 71 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_SHA]
Compression Methods:  { 0 }
***
[write] MD5 and SHA1 hashes:  len = 45
0000: 01 00 00 29 03 01 50 73   E6 AA CC 12 A7 2B 0D 6B  ...)..Ps.....+.k
0010: FC DD BF 29 19 3B CF 5C   43 DB FB 68 C3 D1 07 81  ...).;.\C..h....
0020: 68 AB 8B 2F A3 47 00 00   02 00 05 01 00           h../.G.......
Thread pool thread #0, WRITE: TLSv1 Handshake, length = 45
[write] MD5 and SHA1 hashes:  len = 44
0000: 01 03 01 00 03 00 00 00   20 00 00 05 50 73 E6 AA  ........ ...Ps..
0010: CC 12 A7 2B 0D 6B FC DD   BF 29 19 3B CF 5C 43 DB  ...+.k...).;.\C.
0020: FB 68 C3 D1 07 81 68 AB   8B 2F A3 47              .h....h../.G
Thread pool thread #0, WRITE: SSLv2 client hello message, length = 44
[Raw write]: length = 46
0000: 80 2C 01 03 01 00 03 00   00 00 20 00 00 05 50 73  .,........ ...Ps
0010: E6 AA CC 12 A7 2B 0D 6B   FC DD BF 29 19 3B CF 5C  .....+.k...).;.\
0020: 43 DB FB 68 C3 D1 07 81   68 AB 8B 2F A3 47        C..h....h../.G
Thread pool thread #0, received EOFException: error
Thread pool thread #0, handling exception: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
Thread pool thread #0, SEND TLSv1 ALERT:  fatal, description = handshake_failure
Thread pool thread #0, WRITE: TLSv1 Alert, length = 2
[Raw write]: length = 7
0000: 15 03 01 00 02 02 28                               ......(
Thread pool thread #0, called closeSocket()
Finalizer, called close()
Finalizer, called closeInternal(true) 
```

一边`MQ`：

```
AMQ9660: SSL key repository: password stash file absent or unusable.

EXPLANATION:
The SSL key repository cannot be used because MQ cannot obtain a password to
access it. Reasons giving rise to this error include: 
(a) the key database file and password stash file are not present in the
  location configured for the key repository, 
(b) the key database file exists in the correct place but that no password
  stash file has been created for it, 
(c) the files are present in the correct place but the userid under which MQ is
  running does not have permission to read them, 
(d) one or both of the files are corrupt. 
```

但它们都不适用于我。

```
ls -ltr /var/mqm/qmgrs/MYQMGR/ssl/
total 235
-rw-r--r--   1 mqm      mqm          129 Oct  8 12:00 keydb.sth
-rw-r--r--   1 mqm      mqm       115080 Oct  8 12:08 keydb.kdb
-rw-r--r--   1 mqm      mqm           80 Oct  8 12:08 keydb.rdb
-rw-r--r--   1 mqm      mqm           80 Oct  8 12:08 keydb.crl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:07:06.320

愚蠢的错误：`alter qmgr SSLKEYR('/var/mqm/qmgrs/MYQMGR/ssl/keydb')`解决了问题。

# silverlight - 如何在 Silverlight 中停止视频重播？

> ID：12796482
> 
> 赞同：0
> 
> 时间：2012-10-09T09:06:46.210
> 
> 标签：silverlight, video, silverlight-plugin

我在我们的内部构建中使用了 Silverlight 播放器，我们面临的一个问题是视频一结束就会自动重播。

有谁知道修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:40:56.903

您可以尝试连接 MediaEnded 事件并在视频结束时停止视频。

```
private void player_MediaEnded(object sender, RoutedEventArgs e)
{
    player.Stop();            
} 
```

# c++ - Eclipse CDT：如何测试功能？

> ID：12796487
> 
> 赞同：1
> 
> 时间：2012-10-09T09:07:18.507
> 
> 标签：c++, eclipse, function, testing

在我的主要 C++ 应用程序中使用它们之前，如何测试我编写的函数？

假设我有一个 main.cpp，它使用在 mylib.h 中声明并在 mylib.cpp 中定义的函数 foo()。我想在“玩具”情况下广泛测试 foo() ，以检查它的行为是否符合预期。

我怎样才能在 Eclipse 中做到这一点？对于我的需要，拥有一个 test.cpp 就足够了，这样我就可以在发生时测试单个函数。我只是会在我的makefile中添加一个“test”选项来编译“test.cpp”而不是“main.cpp”，但我不知道如何在Eclipse中做到这一点。

任何其他不那么天真的建议也会受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:10:37.537

你应该有两个项目：

1.  使用您的主要项目，使用该库
2.  使用单元测试 main 实现库的项目。这个main需要初始化单元测试框架，并执行测试

因此，如果您还没有，请选择[一个单元测试框架](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B)并添加测试。

# c - printf 打印到 c 中的二进制文件

> ID：12796490
> 
> 赞同：0
> 
> 时间：2012-10-09T09:07:25.340
> 
> 标签：c, file-io, printf

我有一个可以打开、修改和关闭的二进制文件。然后我`printf`到控制台。

这一切都很好，但我刚刚意识到它将我打印到控制台的任何内容附加到二进制文件的末尾，无论文件是打开还是关闭都没有区别。

同样的事情发生在`fprintf`.

这里发生了什么？关于文件 I/O，我有什么不明白的地方吗？

更新：这是代码：

```
FILE *out = fopen("test","wb+");
fseek(out,0,SEEK_END);
fwrite("test",1,10,out);
fwrite("test",1,10,out);
fwrite("test",1,10,out);
int pos = ftell(out);
fwrite(&pos,sizeof(int),1,out);
fclose(out);
fprintf(stdout,"%s","hello"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:41:00.790

调用`fwrite()`不正确，因为它们指示从 5 个字符数组`fwrite()`中写入`10`字符（字符串文字附加了一个隐式空字符）。这将超出数组的末端进行访问，从而导致未定义的行为，并且可能是导致奇怪行为的原因。

更正`fwrite()`调用：

```
fwrite("test", 1, 4, out); 
```

根据评论，如果必须有 10 个字符，则声明一个数组：

```
char msg[10] = "test"; /* Unspecified elements will be null. */

fwrite(msg, 1, sizeof(msg), out); 
```

# lucene - Hibernate Search 不适用于使用 @IdClass 的复合主键

> ID：12796497
> 
> 赞同：2
> 
> 时间：2012-10-09T09:07:46.647
> 
> 标签：lucene, hibernate-search

我已经为我的班级 Intervento 配置了休眠搜索注释（4.1.1 版本库）。所以，我正在使用 jpa，在我的情况下，我可以省略`@DocumentId`，但我有一个复合主键......

 `````
@IdClass(it.domain.InterventoPK.class)
@Entity
@Indexed
@AnalyzerDef(name = "interventongram", tokenizer = @TokenizerDef(factory = StandardTokenizerFactory.class),
filters = {
     @TokenFilterDef(factory = LowerCaseFilterFactory.class),
     @TokenFilterDef(factory = StopFilterFactory.class, params = {
         @Parameter(name = "words", value = "lucene/dictionary/stopwords.txt"),
         @Parameter(name = "ignoreCase", value = "true"),
         @Parameter(name = "enablePositionIncrements", value = "true")
     }),
     @TokenFilterDef(factory = ItalianLightStemFilterFactory.class),
     @TokenFilterDef(factory = SynonymFilterFactory.class, params = {
         @Parameter(name = "synonyms", value = "lucene/dictionary/synonyms.txt"),
         @Parameter(name = "expand", value = "true")
     }),
     @TokenFilterDef(factory = SnowballPorterFilterFactory.class, params = {
            @Parameter(name = "language", value = "Italian")
     })
})

@Table(name = "intervento", catalog = "gestionale")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(namespace = "Clinigo/it/domain", name = "Intervento")
@XmlRootElement(namespace = "Clinigo/it/domain")
public class Intervento implements Serializable {

    private static final long serialVersionUID = 1L;

    /**
     */

    @Column(name = "idintervento", nullable = false)
    @Basic(fetch = FetchType.EAGER)
    @Id
    @XmlElement
    Integer idintervento;
    /**
     */

    @Column(name = "lingua_idlingua", nullable = false)
    @Basic(fetch = FetchType.EAGER)
    @Id
    @XmlElement
    Integer linguaIdlingua;
    /**
     */
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "version", nullable = false)
    @Basic(fetch = FetchType.EAGER)
    @XmlElement
    Calendar version; 
```` 

`...`

 `我越来越……你能帮帮我吗？

错误：HSEARCH000058：HSEARCH000116：MassIndexer 操作期间出现意外错误 java.lang.ClassCastException：it.domain.InterventoPK 无法在 org.hibernate.type.descriptor.java.IntegerTypeDescriptor.unwrap 中转换为 java.lang.Integer（IntegerTypeDescriptor.java： 36) 在 org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92) 在 org.hibernate 的 org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$1.doBind(IntegerTypeDescriptor.java:57)。 type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:305) at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:300) at org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1891) at org.hibernate .loader.Loader.bindParameterValues(Loader.java:1862) 在 org.hibernate.loader.Loader。prepareQueryStatement(Loader.java:1737) at org.hibernate.loader.Loader.doQuery(Loader.java:828) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) at org.hibernate.loader.Loader .doList(Loader.java:2447) 在 org.hibernate.loader.Loader.doList(Loader.java:2433) 在 org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263) 在 org.hibernate.loader。 Loader.list(Loader.java:2258) at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:122) at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1535) at org.hibernate .internal.CriteriaImpl.list(CriteriaImpl.java:374) 在 org.hibernate.search.batchindexing.impl.IdentifierConsumerEntityProducer.loadList(IdentifierConsumerEntityProducer.java:150) 在 org.hibernate.search.batchindexing.impl。IdentifierConsumerEntityProducer.loadAllFromQueue(IdentifierConsumerEntityProducer.java:117) 在 org.hibernate.search.batchindexing.impl.IdentifierConsumerEntityProducer.run(IdentifierConsumerEntityProducer.java:94) 在 org.hibernate.search.batchindexing.impl.OptionallyWrapInJTATransaction.run(OptionallyWrapInJTATransaction.java: 84) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:619)在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang .Thread.run(Thread.java:619)在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang .Thread.run(Thread.java:619)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:57:41.140

Hibernate Search 不处理与*@IdClass*一起使用的复合 id 类。一种解决方法是使用*@EmbeddedId*并将*idintervento*和*linguaIdlingua*放入*InterventoPK*。

似乎您在 Hibernate Search 论坛上也问了同样的问题 - [https://forum.hibernate.org/viewtopic.php?f=9&t=1024512](https://forum.hibernate.org/viewtopic.php?f=9&t=1024512)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T10:57:58.353

您可以使用桥将自定义对象/复合键转换为 Lucene 可理解的格式。例如对于一个类

```
@Entity
@Indexed
public class Person {
@EmbeddedId @DocumentId Embedded id
@FieldBridge(impl=PersonPkBridge.class)
private PersonPK id;
...
} 
```

你可以[像这样](https://code.google.com/p/hibernatesearchinaction/source/browse/trunk/ch04/src/com/manning/hsia/dvdstore/bridge/PersonPkBridge.java?r=12)写桥。这些代码来自“Hibernate Search In Action”一书。我发现它很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:19:54.740

您的类声明为复合键（it.domain.InterventoPK.class，通过@IdClass 类级别注释声明）是否仅包含两个整数字段？由于您还在 Intervento 类上使用 @Id 注释了两个此类 Integer 字段，因此复合键类必须只包含这些字段并且它们必须具有相同的名称。此外，复合 PK 类需要可序列化。从文档：

“将多个属性映射为@Id 属性，并声明一个外部类为标识符类型。这个需要Serializable 的类通过@IdClass 注解在实体上声明。标识符类型必须包含与标识符相同的属性实体的属性：每个属性名称必须相同，如果实体属性是基本类型，则其类型也必须相同，如果实体属性为基本类型，则其类型必须为关联实体的主键类型一个关联（@OneToOne 或 @ManyToOne）。”

[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

（在页面中搜索“复合标识符”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:14:33.760

我已经在 Hibernate 论坛上回答了您的问题，但要完成我的建议：

更改映射的另一种方法是在新的 getter 上添加一个*@DocumentId*，并返回任何对象 - 甚至可能是一个字符串 - 这是两个 id 组件的唯一组合。（这需要在 getter 和 setter 上定义映射）

使用 JPA 时，您可以避免指定 @DocumentId 但您不必这样做，您仍然可以使用注释来覆盖要应用于索引映射的身份定义。``

# testing - Maven问题：关于Testng

> ID：12796498
> 
> 赞同：0
> 
> 时间：2012-10-09T09:07:51.563
> 
> 标签：testing, maven

我有一个模块 A，它通过 pom.xml 运行并访问一个 testng.xml，该 testng.xml 又调用一个特定的类。这个类显示一个供用户选择的列表。我通过bufferRead获取用户值。bufferRead没有检测到用户输入的值。即输入你要运行的测试 1.Test1 2.Test2 3.Test3 1

（控制永远不会转到下一行）我的 pom.xml

```
<suiteXmlFiles>
                    <suiteXmlFile>testng.xml</suiteXmlFile>
                </suiteXmlFiles>` 
```

这是我的 testng.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><suite allow-return-values="false" configfailurepolicy="skip" data-provider-thread-count="10" group-by-instances="false" junit="false" name="Suite" parallel="false" preserve-order="true" skipfailedinvocationcounts="false" thread-count="5">
<test allow-return-values="false" group-by-instances="false" junit="false" name="Test" preserve-order="true" skipfailedinvocationcounts="false">
    <classes>
    <class name="com.org.Console1"<methods>
    <include name="main" />
  </methods>
    </class>    
    </classes>
</test> <!-- Test --> 
```

这是我运行的java代码

```
System.out.println("Which tests do you want to run");
 String input = bufferRead.readLine(); 
```

# iphone - 如何使用名片上的字体大小获取已识别文本的字体大小以识别名称，形成使用 OCR 识别的文本：iPhone

> ID：12796500
> 
> 赞同：0
> 
> 时间：2012-10-09T09:08:01.423
> 
> 标签：iphone, objective-c, text, ocr, nsregularexpression

我已经使用**OCR**为 **iPhone 实现了名片阅读器应用程序**

 **[Tesseract 库](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/) 是一个开源库。api

**主要议程是何时从名片中识别文本。我需要将姓名和电子邮件地址以及电话号码传递给相应的字段。**

我**使用它们的表达格式来处理电子邮件地址和电话号码。**

但如果是*NAME 其他一些具有相同格式的文本*，所以我们可以使用字体大小来选择它

**`How to get font sizes of recognized text to Recognize Name using font size on the Business Card form the Recognized text using OCR...?`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:40:43.297

试试这个 -

```
UIFont *font = totalLabel.font;
CGFloat maxHeight = font.lineHeight * totalLabel.numberOfLines;
CGFloat maxWidth = totalLabel.frame.size.width;
CGSize size = [totalLabel.text sizeWithFont:font constrainedToSize:(CGSize){maxWidth, maxHeight} lineBreakMode:totalLabel.lineBreakMode]; 
```**

# winapi - 检测在列表视图内单击并显示上下文菜单

> ID：12796501
> 
> 赞同：3
> 
> 时间：2012-10-09T09:08:11.090
> 
> 标签：winapi, visual-c++, atl, wtl

我有一个作为资源创建的列表视图并加载到对话框窗口中。我只想在单击列表视图中的项目时检测并显示上下文菜单。

```
 MESSAGE_HANDLER(WM_CONTEXTMENU,OnContextMenu)

        LRESULT OnContextMenu(UINT /*uMsg*/, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
            {
                int iSelected = -1;
    int iFocusGroup = -1;
    iSelected = SendMessage((HWND)wParam, LVM_GETNEXTITEM, -1,LVNI_SELECTED);
    iFocusGroup = ListView_GetFocusedGroup((HWND)wParam);
    if( iSelected != -1 && iFocusGroup == -1) {
                    hPopupMenu = CreatePopupMenu();
                    Insert

Menu(hPopupMenu,  0,     MF_BYCOMMAND | MF_STRING | MF_ENABLED, ID_SHREDTASK_CTXMENU_DELETE, TEXT("Delete"));
                TrackPopupMenu(hPopupMenu, TPM_TOPALIGN | TPM_LEFTALIGN, GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam), 0, m_hWnd, NULL); 
            }
            return 0;
        } 
```

好的，我已经编辑了它，它的工作方式与此处显示的方式相同，但问题仍然存在，有人可以向我解释这里的焦点小组是什么以及为什么如果我在对话框中发送 LVM_GETNEXTITEM 消息它返回！= -1？不只是为了 Listviews 吗？

编辑 ：

这是我根据您的回答制定的另一种选择：

```
LRESULT OnNotifyRClick(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
    {
          switch (uMsg)
        {
            case WM_NOTIFY:
                switch (((LPNMHDR)lParam)->code)
                {
                case NM_RCLICK:
                    if (((LPNMHDR)lParam)->idFrom == IDC_LISTTASKFILES)
                    {                       
                         int iSelected = -1;
                         iSelected = SendMessage(GetDlgItem(IDC_LISTTASKFILES), LVM_GETNEXTITEM, -1,LVNI_SELECTED);

                        if( iSelected != -1 ) {
                            hPopupMenu = CreatePopupMenu();
                            InsertMenu(hPopupMenu,  0,     MF_BYCOMMAND | MF_STRING | MF_ENABLED, ID_SHREDTASK_CTXMENU_DELETE, TEXT("Delete"));
                            TrackPopupMenu(hPopupMenu, TPM_TOPALIGN | TPM_LEFTALIGN, ((CPoint)GetMessagePos()).x, ((CPoint)GetMessagePos()).y, 0, m_hWnd, NULL); 
                        }
                         bHandled = true;

                        return TRUE;
                    }
                    break; 

                break;
                }

        }
          return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:28:54.257

无论列表视图中的单击位置如何，您都将`OnContextMenu`调用处理程序。现在您的任务是查看点击的确切位置并决定您想要的操作。

您的问题让我认为您是`ListView_GetFocusedGroup`从互联网上获取代码的，而不是自己故意编写的。但是，您需要做的是将“命中测试”消息发送回列表视图，提供兴趣点（即点击点）：[`ListView_HitTest`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775028%28v=vs.85%29.aspx), [`ListView_HitTestEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775030%28v=vs.85%29.aspx).

完成此操作后，您将在此位置获得项目和/或子项目，然后您可以决定下一步做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T19:13:45.783

[NM_RCLICK](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774873%28v=vs.85%29.aspx)是你的朋友。

但这并不能解决整个问题，例如当用户按下键盘上的 Windows 菜单键时显示上下文菜单。这篇[知识库文章](http://support.microsoft.com/kb/222905/en-us)展示了如何组合 NM_RCLICK 和 WM_CONTEXTMENU。（它适用于 CTreeCtrl，但将代码适应 CListView 是微不足道的）。

# ruby-on-rails - ruby on rails 在未定义的方法上使用太多内存

> ID：12796502
> 
> 赞同：1
> 
> 时间：2012-10-09T09:08:11.480
> 
> 标签：ruby-on-rails, memory, resources, ruby-on-rails-3.2

我的 ruby​​ on rails 应用程序有问题。每当遇到未定义的方法时，它都会使用过多的内存。它冻结服务器，直到我终止进程。错误日志指向未定义的方法，该方法类似于以下内容：

> ActionView::Template::Error（#<#:0x007fb3d88de8c8> 的未定义方法 `testos'）：

有什么方法或配置可以解决这个问题吗？我在 rails 3.2.2 上使用 ruby​​ 1.9.3。

这是堆栈跟踪

> 在 53960 毫秒内完成 500 内部服务器错误
> 
> ActionView::Template::Error（ _app_views_rules_index_html_erb_ **4146358986539966513_70205169705180'** **app/views/rules/index.html.erb:77:in** **_app_views_rules_index_html_erb** _4146358986539665131_8002' 中的未定义方法块`testos' for #<#<Class:0x007fb3d43d0420>:0x007fb3d479c8d8>): 77: @rules["data"].each do |rule| 78: json_rule =ActiveSupport::JSON.decode(rule["json_rule"])
> 79: %>
> 80: <%=testos(1)%>
> 81: <div class="dvGridRow" style="width:100%;padding-bottom:10px;">
> 82: <div class="dvGridData" style="vertical-align:top;width:190px;margin-left:5px;">
> 83: <%= json_rule["rule_name"]%>
> app/views/rules/index.html.erb:80:in` **`each'
> app/views/rules/index.html.erb:77:in`**
> 
> 渲染 /Users/jay/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.4ms) 缓存：[GET /manage /rules] 错过渲染 /Users/jay/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms) 渲染/救援/布局中的用户/jay/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/template_error.erb (18.5ms)

注意：我故意调用了一个未识别的方法，因为我试图找出我的代码在哪里冻结了机器，并且该错误导致了它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:12:21.967

一个问题（和一个解决方案）

假设您使用 Ruby 对象。并且假设您对这个对象并不完全熟悉。假设您调用了一个对象上不存在的方法。

```
o = Object.new  
o.some_method 
```

# NoMethodError：未定义的方法“some_method”用于#

这不太理想，所以 Ruby 有一种很棒的方法可以让我们摆脱这种情况。看一下这个：

```
class OurClass  
  def method_missing (method_name)  
    puts "there's no method called '#{method_name}'"  
  end  
end  
o = OurClass.new  
o.some_method 
```

# => 没有名为“some_method”的方法

我们可以在我们的类中创建一个名为 method_missing 的方法。如果我们调用该方法的对象没有该方法（并且没有从另一个类或模块继承该方法），Ruby 将给我们更多机会做一些有用的事情：如果该类有一个 method_missing 方法，我们会将有关方法 cal 的信息交给 method_missing 并让它解决问题。好吧，那太好了；我们不再收到错误消息。

从此链接参考 [http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-missing-methods/](http://net.tutsplus.com/tutorials/ruby/ruby-for-newbies-missing-methods/)

# c# - 如何创建“更多详细信息”控件

> ID：12796512
> 
> 赞同：1
> 
> 时间：2012-10-09T09:08:45.883
> 
> 标签：c#, wpf, wpf-controls

您能否推荐控制或在 WPF 应用程序中执行此操作的简单方法。我想要的是在按下按钮时会自行折叠和展开的控件。如果它看起来像Win7默认的那将是很棒的。

![在此处输入图像描述](../Images/9cb7901573017a32a945abc556ef0acb.png)

![在此处输入图像描述](../Images/f39ace78eb5a553e75b609445003d1b3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:20:06.573

你在这里 -[扩展器](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.aspx)。使用[IsExpanded](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.isexpanded.aspx)属性从代码更改`Expander`内容可见性，或使用内置切换按钮以交互方式更改它。

![在此处输入图像描述](../Images/331b8ae082710cf2220fcaf2097ebb32.png)

读取区域是 的标题`Expander`，绿色区域是 的内容`Expander`。要实现相同的行为，您还需要将[Expander.ExpandDirection](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.expanddirection.aspx)属性设置为`Up`value。

如果您想要动画展开，您需要在`IsExpanded = true`动画情节提要上添加触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:16:59.667

框架本身没有任何东西可以精确地做到这一点，但是很容易按照自己的方式弯曲它。

您可以使用[Reveal](https://github.com/thinkpixellab/bot/blob/master/net40-client/Bot/Reveal.cs)控件（来自 Bag of Tricks），并在底部栏中放置触发动画的切换按钮。

只需在您的解决方案中复制/粘贴控件，然后像这样使用它：

```
<local:Revealer IsExpanded="{Binding DetailsShown}">
   <TextBlock Text="{Binding DetailInfoOne}" />
   ...
</local:Revealer> 
```

然后在另一个位置（窗口底部？）

```
<ToggleButton Content="More details" IsChecked="{Binding DetailsShown}" /> 
```

放置箭头按钮并将文本更改为“更少的细节”作为练习留给读者；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:44:13.337

如何在堆栈面板中设置所有详细信息并将其放入折叠的可见性。按下按钮时，将其设置为可见。然后将摘要信息设置为折叠，反之亦然。

表单必须将大小设置为自动，以便它会根据内容而变化。

希望有帮助。

# javascript - HTML5 画布转 PNG 文件

> ID：12796513
> 
> 赞同：57
> 
> 时间：2012-10-09T09:08:50.560
> 
> 标签：javascript, html, canvas

我正在尝试将 HTML5 画布转换为图像。这是我到目前为止得到的：

```
var tmp_canvas = document.getElementById('canvas');
var dataURL = tmp_canvas.toDataURL("image/png");
$('#thumbnail_list').append($('<img/>', { src : dataURL }).addClass('image')); 
```

但问题是我得到了这个代码：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsCAYAAADtt+XCAAAgAElEQVR4nNS6Z1xVaZbvv/c+CVOZc6mYEMlJMZRizgljGRARs6AgOSMGQATBSM5ZyTkoOQkSzJWrp3t6etLt6Z7pmf/c++L7f3EOiBZW2dM9dz73xfdzztl7n3Oe/Txrrd9a69mCTC4gkwvIZAKSTECUBARRQBA+jii+46f.......class="image"> 
```

我想要一个用户可以下载的普通图片路径！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-09T09:20:53.303

> *信息：* IE10+ 根本不支持以下方法。其他人已经完成了这项工作并实施了跨浏览器解决方案。 [这](https://github.com/rndme/download)是其中之一。

首先，将生成的数据 URL 添加到标签的`href`属性中。`<a>`但是在某些浏览器上，仅此一项不会触发下载。相反，它将在新页面中打开链接的图像。

**base64 图像的下载对话框：**

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...." class="image" /> 
```

基于以上示例，将数据 URL 的 MIME 类型转换为：

```
<a href="data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUg....">Download</a> 
```

通过告诉浏览器数据是`application/octet-stream`，它会要求您将其保存在硬盘上。

* * *

**指定文件名：**

正如[Adi](https://stackoverflow.com/users/1105514/adi)在下面的评论中所说，没有使用此方法定义文件名的标准方法。但是，有两种方法可能适用于某些浏览器。

A) `download`Google Crome 引入的属性

```
<a download="image.png" href="..."> 
```

B) 在数据 URL 中定义 HTTP 标头
`headers=Content-Disposition: attachment; filename=image.png`

```
<a href="data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=image.png;base64,iVBORw0KGgoAAAA"> 
```

这至少在一些旧版本的 Opera 中有效。 [这里](http://lists.w3.org/Archives/Public/uri/2010Feb/0069.html)有一些关于这个的讨论。

查看主要浏览器的 Bug/Feature-Tracking 系统表明，定义文件名是社区的一大愿望。也许我们会在不久的将来看到一个跨浏览器兼容的解决方案！;)

* * *

**节省 RAM 和 CPU 资源：**

如果您不想让访问者浏览器的 RAM 膨胀，您还可以动态生成数据 URL：

```
<a id="dl" download="Canvas.png">Download Canvas</a> 
```

```
function dlCanvas() {
    var dt = canvas.toDataURL('image/png');
    this.href = dt;
};
dl.addEventListener('click', dlCanvas, false); 
```

这样，您的画布可能仍会被浏览器显示为图像文件。如果你想增加打开下载对话框的概率，你应该扩展上面的函数，这样它就可以进行如上所示的替换：

```
function dlCanvas() {
    var dt = canvas.toDataURL('image/png');
    this.href = dt.replace(/^data:image\/[^;]/, 'data:application/octet-stream');
};
dl.addEventListener('click', dlCanvas, false); 
```

最后，添加 HTTP 标头以确保大多数浏览器为您提供有效的文件名！;)

* * *

**完整示例：**

```
var canvas = document.getElementById("cnv");
var ctx = canvas.getContext("2d");

/* FILL CANVAS WITH IMAGE DATA */
function r(ctx, x, y, w, h, c) {
  ctx.beginPath();
  ctx.rect(x, y, w, h);
  ctx.strokeStyle = c;
  ctx.stroke();
}
r(ctx, 0, 0, 32, 32, "black");
r(ctx, 4, 4, 16, 16, "red");
r(ctx, 8, 8, 16, 16, "green");
r(ctx, 12, 12, 16, 16, "blue");

/* REGISTER DOWNLOAD HANDLER */
/* Only convert the canvas to Data URL when the user clicks. 
   This saves RAM and CPU ressources in case this feature is not required. */
function dlCanvas() {
  var dt = canvas.toDataURL('image/png');
  /* Change MIME type to trick the browser to downlaod the file instead of displaying it */
  dt = dt.replace(/^data:image\/[^;]*/, 'data:application/octet-stream');

  /* In addition to <a>'s "download" attribute, you can define HTTP-style headers */
  dt = dt.replace(/^data:application\/octet-stream/, 'data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=Canvas.png');

  this.href = dt;
};
document.getElementById("dl").addEventListener('click', dlCanvas, false);
```

```
<canvas id="cnv" width="32" height="32"></canvas>
<a id="dl" download="Canvas.png" href="#">Download Canvas</a>
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-01T15:36:14.070

您可以使用[reimg](http://github.com/gillyb/reimg)库将画布转换为图像对象，甚至为用户触发下载。

在页面中插入库后，只需使用以下命令： `ReImg.fromCanvas(yourCanvasElement).downloadPng()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-09T09:27:03.247

您有 2 个选项（都适用于几乎所有浏览器）：

1-**将数据发布到服务器**：
在服务器上，您将有一个脚本来处理数据，然后告诉浏览器提示用户下载。

```
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=something.png");
header("Content-Type: image/png");
echo base64_decode($_POST['imageData']);
exit; 
```

2-使用[Downloadify](https://github.com/dcneiner/Downloadify)**提示用户下载**

```
<div id="clickMe"></div>

Downloadify.create( 'clickMe', {
   data: base64String,
   dataType: 'base64',
   filename: 'something.png'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T15:15:20.717

你也可以考虑使用 Concrete.js [http://www.concretejs.com](http://www.concretejs.com)，这是一个轻量级的 HTML5 Canvas 框架，可以实现这样的外围功能，包括下载。你只需这样做：

```
canvas.download({
  fileName: 'my-file.png'
}); 
```

你就完成了。

# objective-c - 将两个双精度值转换为字符串，然后使用新字符串创建一个字符串

> ID：12796514
> 
> 赞同：0
> 
> 时间：2012-10-09T09:08:51.230
> 
> 标签：objective-c, ios, nsstring, nsstringencoding

我正在尝试将两个值转换为字符串，然后创建一个包含我之前创建的新字符串，以便我的服务可以接受它们。

```
NSString *string1 = [ NSString stringWithFormat:@"%f", locationController.dblLatitude];
NSString *string2 = [ NSString stringWithFormat:@"%f", locationController.dblLongitude];

body = [[NSString stringWithFormat:@"geoX#%@#geoY#%@", string1, string2] dataUsingEncoding:NSUTF8StringEncoding]; 
```

这是我正在使用 atm 的代码。问题是 string1 和 string2 似乎都可以，但名为 body 的字符串似乎不起作用.. :< 有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:13:41.933

`body`不是`NSString`这里的实例，但是`NSData`（因为您使用的是`dataUsingEncoding："。如果您想在系统日志中查看stings的串联，您应该编写类似的内容：

```
NSString* bodyString = [NSString stringWithFormat:@"geoX#%@#geoY#%@", string1, string2];
NSData* bodyData = [bodyString dataUsingEncoding:NSUTF8StringEncoding]; 
```

然后你可以`NSLog(@"Body: %@", bodyString);`看到它的内容，然后`bodyData`用于发出http请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:13:55.973

`body`不是`NSString`; 这是`NSData`因为你打电话给`dataUsingEncoding`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:14:16.167

我相信这种情况正在发生，因为您只是在记录原始数据。尝试从数据中创建一个字符串，然后像这样记录它：

```
body = [[NSString stringWithFormat:@"geoX#%@#geoY#%@", string1, string2] dataUsingEncoding:NSUTF8StringEncoding];
NSString *string = [[NSString alloc] initWithData:body encoding:NSUTF8StringEncoding];
NSLog(@"%@",string); 
```

# css - css中的'*'和'_'前缀是什么？

> ID：12796516
> 
> 赞同：4
> 
> 时间：2012-10-09T09:09:05.693
> 
> 标签：css

只是在一个借来的 css 文件中偶然发现了这一点——这是我以前从未注意到的，而且上下文中的标点符号本身就很难用谷歌搜索：

```
.ez-radio { zoom: 1; *display:inline; _height:15px; } 
```

`'*'`前缀是做什么的？

对于此事，下划线在`_height`?

这是一些新的 CSS3 诡计吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T09:11:20.497

它用于 Internet Explorer 中的 CSS hack。

`*`仅 IE 6 - 7（谢谢你，mck89！）

`_`是 IE 6 及以下。

不要使用它们。如果您需要特定于浏览器的 CSS 定义，请改用专门的 CSS 定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:12:37.097

这些符号用于定位 IE 较低版本的浏览器，称为 CSS HACKS。FF、Chrome 或 Safari 总是忽略 CSS 类中的那些字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:16:25.270

不想重复 Zanathel 的答案，但重要的是要提到：

1.  请不要在您的样式表中使用它们，保持它不受黑客攻击
2.  当你需要使用 hacks 时，不要使用 hacks，使用[条件注释](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)，并将你的 ie 特定 css 放在这些文件中

# .net - 如何在 VB.NET 代码块中添加注释

> ID：12796517
> 
> 赞同：1
> 
> 时间：2012-10-09T09:09:05.760
> 
> 标签：.net, vb.net, visual-studio-2010

这是我的代码块

```
 XY = xyList.[Select](Function(o) New XY() With {.y = New y() With {.xId = o.x.Id _
            , .xName = o.x.xName} _
            , .Stopped = o.Stopped _
            , .PNumber = o.PNumber _
            , .yId = o.yId _
            , .yName = o.yName _
         'need to add some comment here '
            , .Allocated = o.Allocated _
            , .TotalNo = o.TotalNo _
            }).ToList() 
```

但是我尝试了`'`它的编译问题。

我需要在属性之间发表一些评论

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T09:20:38.927

简单的回答：你不能

更长的答案：在多行代码块中添加您想要的注释是无效的 VB.NET 代码。

如果它是 C/C++/C#（或变体），那么您可以使用`/*...*/`样式注释 - 但这些在 VB.NET 中不可用

(**Minor update** to remove the phrase "at the start of the line"... as it implies that you can have it at the end of the line. Again, you can't)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T09:17:53.807

您可以使用 Ctrl+K、Ctrl+C 来注释选定的行并使用 Ctrl+K、Ctrl+U 取消注释

OR ' 用于每一行...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-09T09:19:14.557

> '

不是问题。

你不能在 VB.Net 中给出多行注释

# awk - 使用管道输入的 awk

> ID：12796519
> 
> 赞同：0
> 
> 时间：2012-10-09T09:09:13.653
> 
> 标签：awk, grep

我对 AWK 有（非常）基本的了解，我尝试了几种方法，但都打印出比我想要的多得多的行：

我有 10 行`file.1`：

```
chr10   234567
chr20   123456
...
chrX    62312 
```

我想移动到大写并匹配的前两列`file.2`，所以下面的第一行匹配上面的第二行，但我不想让下面的第二行匹配上面的第三行的位置但不匹配 chr，我不希望下面的第一行与上面的第一行匹配。

```
CHR20   123456    ...   234567 
CHR28   234567    ...   62312 
```

我有：

```
$ cat file.1 | tr '[:lower:]' '[:upper:]' | <grep? awk?> 
```

并且很想知道如何进行。我使用了一个简单的 grep - 以前，但在搜索的文件中第二列`file.1`匹配更多，所以我得到了数百行返回。我只想匹配前 2 列（它们对应于 中的前 2 列`file.2`）。

希望这对您来说足够清楚，期待您的回答=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:28:25.660

如果文件按第一列排序，您可以执行以下操作：

```
join -i file.1 file.2 ¦ awk '$3==$2{ $3=""; print}' 
```

如果没有排序，请先排序。

-i 标志表示忽略大小写。

如果第一列中有多行具有相同字段，那将不起作用。要完成这项工作，您需要一些更复杂的东西

# c# - 匹配日期的正则表达式

> ID：12796524
> 
> 赞同：1
> 
> 时间：2012-10-09T09:09:35.557
> 
> 标签：c#, regex, datetime, datetime-format

**除了在 C# 中使用Regex**库之外，我对正则表达式一无所知，这也是从网络搜索的模式匹配表达式。

我想让正则表达式以下面两种提到的格式匹配日期，不需要年份部分。

1.  `8 October`或者`8 Oct`

2.  `September 19`或者`Sep 19`

请帮帮我，搜索谷歌对我没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T09:16:30.387

[`TryParseExact`](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)当框架已经为您提供了旨在做到这一点的方法时，为什么还要使用正则表达式：

```
public class Program
{
    static void Main()
    {
        var str = "8 October";
        DateTime date;
        var formats = new[] { "d MMMM", "d MMM" };
        if (DateTime.TryParseExact(str, formats, CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
        {
            Console.WriteLine(date);
        }
        else
        {
            Console.WriteLine("The date was not in one of the 2 supported formats 'd MMMM' orr 'd MMM'");
        }
    }
} 
```

你甚至可以让它具有文化意识。例如，假设您的网站有讲法语的用户，他们可能会写`8 Octobre`而不是`8 October`.

在这种情况下，您可以指定当前文化或强制特定文化：

```
var str = "8 Octobre";
DateTime date;
var formats = new[] { "d MMMM", "d MMM" };
var ci = new CultureInfo("fr-FR");
if (DateTime.TryParseExact(str, formats, ci, DateTimeStyles.None, out date))
{
    // use the date instance here
} 
```

进一步阅读：[自定义日期时间格式](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:16:56.907

试试这个正则表达式：

```
(?<month>[a-zA-Z]+)\s+(?<day>\d+)|(?<day>\d+)\s+(?<month>[a-zA-Z]+) 
```

并获得名为：`day`和`month`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:20:33.027

要在较大的字符串中查找日期，您可以执行以下操作：

```
\b(?:\d{1,2}\s(?:Jan|Feb|Sep|Oct)(?:[a-z]+\b)?|(?:Jan|Feb|Sep|Oct)(?:[a-z]+\b)?\s\d{1,2})\b 
```

连同选项`IgnoreCase`。

然后使用**[Darin Dimitrov 提供](https://stackoverflow.com/a/12796652/626273)****的方法测试生成的字符串**

当然，您需要完成缩写列表。我只添加了一些用于测试。

[在 Regexr 上](http://regexr.com?32da2)查看

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:21:04.487

如果你必须使用正则表达式试试这个

```
((?<Day>\d\d?) (?<Month>[A-Z][a-z]+))|((?<Month>[A-Z][a-z]+) (?<Day>\d\d?)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T09:28:22.997

```
 string Date = "December 8"

  MatchCollection MC = Regex.Matches(Date, @"(?i)([\d]{1,2}(\s)?(January|Jan|February|feb|March|mar|April|Apr|May|June|July|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec))|(January|Jan|February|feb|March|mar|April|Apr|May|June|July|August|Aug|September|Sep|October|Oct|November|Nov|December|Dec)(\s)?[\d]{1,2}"); 
```

# java - 在 iText 的页面底部添加 PDFPTable

> ID：12796525
> 
> 赞同：4
> 
> 时间：2012-10-09T09:09:41.407
> 
> 标签：java, itext

我正在尝试添加一个表格作为包含所有版权文本、页码等的页脚。但我找不到任何可以接受的支持方法`PdfPTable`

对于一个短语，有如下代码：

```
ColumnText.showTextAligned(writer.getDirectContent(),
        Element.ALIGN_CENTER, new Phrase(
            String.format("%d", document.getPageNumber())),
            (document.getPageSize().getLeft() + document.getPageSize().getRight())/2,
            document.getPageSize().getBottom() + 18, 0); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T06:03:06.757

该类`PdfPTable`有一个方法`writeSelectedRows()`，可用于在绝对位置添加（选择列和）行。

例子：

*   [http://itextpdf.com/examples/iia.php?id=89](http://itextpdf.com/examples/iia.php?id=89)在绝对位置添加行。
*   [http://itextpdf.com/examples/iia.php?id=90](http://itextpdf.com/examples/iia.php?id=90)在绝对位置添加列/行的选择。
*   [http://itextpdf.com/examples/iia.php?id=91](http://itextpdf.com/examples/iia.php?id=91)另一种解决方案，您可以将表格包装在`ColumnText`对象中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-09T21:11:59.543

Bruno 发布的示例是一个很好的指针，这是一个没有幻数的示例：

```
 private void writeFooterTable(PdfWriter writer, Document document, PdfPTable table) {
        final int FIRST_ROW = 0;
        final int LAST_ROW = -1;
        //Table must have absolute width set.
        if(table.getTotalWidth()==0)
            table.setTotalWidth((document.right()-document.left())*table.getWidthPercentage()/100f);
        table.writeSelectedRows(FIRST_ROW, LAST_ROW, document.left(), document.bottom()+table.getTotalHeight(),writer.getDirectContent());
    } 
```

这将在底部的文档边距内写入 PdfPTable，与底部的任何文本重叠。如果您想在页边空白处写下表格，请使用:`document.bottom()`而不是`document.bottom()+table.getTotalHeight()`.

* * *

[页眉/页脚示例](http://itextpdf.com/examples/iia.php?id=103)

作为相关说明，如果您按照此链接上的示例进行操作，则似乎不需要“艺术”框，并且幻数 36、54、559、788 对应于：

```
document.left(), document.bottom(), document.right(), document.top() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:07:26.810

要实现自定义页脚，您需要实现[PdfPageEventHelper](https://stackoverflow.com/search?q=PdfPageEventHelper)。

# asp.net - 树视图鼠标悬停显示弹出从数据集中提取其内容

> ID：12796526
> 
> 赞同：1
> 
> 时间：2012-10-09T09:09:42.160
> 
> 标签：asp.net, treeview, popup

我创建了一个*ASP.NET* *TreeView* 并从数据集中绑定了这个*TreeView*。

我想在树视图节点上的*鼠标悬停弹出窗口中显示树视图的内容。*我对数据集中的每个节点都有一些描述。

如何在鼠标悬停时显示它们？

弹出窗口必须从数据集中提取其内容。它不只是 thro `node.tooltip="sometext"`。

这可能吗？

# assembly - 如何输出标志寄存器 Z80 的当前值？

> ID：12796532
> 
> 赞同：2
> 
> 时间：2012-10-09T09:09:55.213
> 
> 标签：assembly, embedded, z80

我想调试我的程序，但我需要知道标志寄存器的值，但我坚持找出这样做的指令。对于 z80 处理器。

[我唯一的猜测是使用 jp *, nn 然后根据跳转设置寄存器 A 中的位来测试条件，但肯定有一个更简单的方法，但我只是看不到它]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:29:46.390

您可以将其推送`AF`然后弹出到任何一个：或`BC`，您可以从中提取标志状态。`DE``HL`

# reporting-services - SSRS 表达式错误处理

> ID：12796533
> 
> 赞同：0
> 
> 时间：2012-10-09T09:10:02.620
> 
> 标签：reporting-services

我在我的一个报告字段中使用以下表达式。

=Fields!Value.Value*(Fields!DutyRate.Value/100)

只要 Fields!DutyRate.Value 中存在有效值，此方法就可以正常工作。

我的问题是 Fields!DutyRate.Value 可以包含非数值，例如“Free”。

这意味着其中包含“免费”一词的任何行都会导致#Error。这没关系，但我想让 SSRS 显示 #Error 以外的内容。事实上，我想改为显示“F”。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:33:10.630

您可以使用 IIF（内联 if 语句）和 IsNumeric 函数。

```
Syntax: IIF(<condition>,<true part>,<false part>)

=IIF(IsNumeric(Fields!DutyRate.Value),Fields!Value.Value*(Fields!DutyRate.Value/100),"F") 
```

[SSRS 表达式示例](http://msdn.microsoft.com/en-us/library/ms157328.aspx)

[Visual Basic 函数](http://msdn.microsoft.com/en-us/library/32s6akha.aspx)（SSRS 表达式使用 VB 函数）

# jquery - JQuery UI可拖动将旋转元素移动到网格外

> ID：12796534
> 
> 赞同：2
> 
> 时间：2012-10-09T09:10:02.797
> 
> 标签：jquery, jquery-ui, rotation, jquery-ui-draggable, css-transforms

我使用 jQuery UI 可拖动插件来移动一些旋转的 (CSS3) 元素。这不太好。我可以通过更改库中的一行来解决一个问题（http://stackoverflow.com/questions/3523747/webkit-and-jquery-draggable-jumping），但还有另一个问题。可拖动元素在每次拖动时向上和向左移动一个像素，超出网格。

这种行为有原因吗？您可以在 die jsfiddle 中看到问题。你必须移动广场。最好在左上角。经过一些拖动，您可以看到错误的顶部和左侧值。

在小提琴中，跳跃的问题没有解决！ [http://jsfiddle.net/jul35/vnQVh/1/](http://jsfiddle.net/jul35/vnQVh/1/)

# php - 未定义的索引错误，但在我使用 $_REQUEST 时有效

> ID：12796535
> 
> 赞同：0
> 
> 时间：2012-10-09T09:10:06.040
> 
> 标签：php, indexing, notice

我是 PHP 新手。我正在尝试制作简单的用户登录表单。这是我的代码`loginpage.php`

```
<html>
<form action="login.php" action="POST">
username<input type='text' name="username"><br>
password<input type='password' name="pass"><br>
<input type='submit' name='login'>

</form>
</html> 
```

现在另一页是`login.php`

```
<?php 
    $username= $_POST["username"];
?> 
```

它给了我错误通知：未定义索引：`H:\xampp\htdocs\login.php`第 2 行中的用户名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:12:14.100

改变 -

```
<form action="login.php" action="POST"> 
```

至

```
<form action="login.php" method="POST"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:11:38.843

改变这个

```
<form action="login.php" action="POST"> 
```

至

```
<form action="login.php" method="POST"> 
```

试试这个

```
if(isset($_POST["username"])){

     $username= $_POST["username"];

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:11:52.587

更改此行

从

```
<form action="login.php" action="POST"> 
```

至

```
<form action="login.php" method="POST"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:12:05.663

您可以使用 php isset() 函数，例如

```
if(isset($_POST['username']))
{
  $username=$_POST['username'];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T09:12:13.367

```
<form action="login.php" **action**="POST">

<form action="login.php" **method**="POST"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T09:11:26.757

你应该设置：

`method="POST"`

并不是

`action="POST"`

如果不设置，则使用`GET`方法。您可以使用它来访问它，`$_REQUEST`因为它可以同时访问`POST`和`GET`变量。

# c# - 格式化减去的日期c#

> ID：12796536
> 
> 赞同：3
> 
> 时间：2012-10-09T09:10:10.407
> 
> 标签：c#, datetime, formatting

我试图在 c# 中将两个日期相减。我当前的代码如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    System.DateTime matchStart = new System.DateTime(2012, 10, 17, 20, 00, 00);
    System.DateTime currentDateTime = new System.DateTime(2012, 10, 9, 14, 00, 00);

    System.TimeSpan matchCountdown = matchStart.Subtract(currentDateTime);

    countdown.Text = matchCountdown.ToString();
} 
```

这目前给了我结果“8.06:00:00”。然而，我想要做的是将时差格式化为“8 天，6 小时，0 分钟”。我到底该怎么做呢？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:12:14.650

您可以使用`String.Format`和[`TimeSpan`属性](http://msdn.microsoft.com/en-us/library/02c79d34.aspx)。

```
String.Format("{0} days, {1} hours, {2} minutes"
    , matchCountdown.Days
    , matchCountdown.Hours
    , matchCountdown.Minutes); 
```

这是演示：http: [//ideone.com/i8SKX](http://ideone.com/i8SKX)

# php - 通过 URL 传递带有 html 的 utf8 字符？

> ID：12796538
> 
> 赞同：0
> 
> 时间：2012-10-09T09:10:26.383
> 
> 标签：php, jquery, html

我正在尝试使用 ajax 将包含 HTML 和 utf8 字符（例如：中文、日文阿拉伯字符）的用户输入发送到**php****脚本**，以便将其存储在数据库中。

 **我通常先转义（） html 内容，然后再将其放入 url。但是转义导致 uft8 字符变为十六进制代码。

例如（原始）：

```
<div id="box">テスト&lt;/div> 
```

逃跑后：

```
 %3Cdiv%20id%3D%22box%22%3E%u30C6%u30B9%u30C8%3C/div%3E 
```

发送到 php 解析的 php 脚本并将其保存到数据库中（mysql，列类型：文本）。

php 将保存的数据回显出来：

```
<div id="box">%u30C6%u30B9%u30C8</div> 
```

我还在我的 php 脚本中使用了这个脚本来防止 php`\`在 html 之前添加一个`"`

```
if(get_magic_quotes_gpc())
{
    function undo_magic_quotes_array($array)
    {
        return is_array($array) ? array_map('undo_magic_quotes_array', $array) : str_replace("\\'", "'",
                                                                             str_replace("\\\"", "\"",
                                                                             str_replace("\\\\", "\\",
                                                                             str_replace("\\\x00", "\x00", $array))));
    }
    $_GET = undo_magic_quotes_array($_GET);
    $_POST = undo_magic_quotes_array($_POST);
    $_COOKIE = undo_magic_quotes_array($_COOKIE);
    $_FILES = undo_magic_quotes_array($_FILES);
    $_REQUEST = undo_magic_quotes_array($_REQUEST);
} 
```

我不确定这个脚本是导致它还是 javascript 的 escape() 导致它？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:57:52.397

PHP 会`urldecode()`自动处理这些请求，但 JavaScript`escape()`不等于 PHP 的`urlencode()`. 例如，`urlencode('テスト')`将输出`"%E3%83%86%E3%82%B9%E3%83%88"`，而不是`"%u30C6%u30B9%u30C8"`。

尝试在 JavaScript中使用`encodeURIComponent()`而不是。`escape()`

PS。事实上，这个函数并不完全等于`urlencode()`，但它可能会解决你的问题 =)**

# pdf - 如果我有证书，我们如何将 PKCS#1 转换为 PKCS#7？

> ID：12796545
> 
> 赞同：1
> 
> 时间：2012-10-09T09:10:53.183
> 
> 标签：pdf, rsa, digital-signature, pkcs#7

我正在开发一个 PDF 签名工具。为此，我将获得 PKCS#1 格式的 PDF 签名 sha256 数据和来自设备的证书，我需要使用这两个来嵌入 PDF。大多数 PDF 阅读器仅支持 PKCS#7 签名。

有没有办法将 PKCS#1 签名转换为 PKCS#7 签名（使用证书文件）？

我知道 PKCS#7 = 证书 + 可选原始数据 + PKCS#1 格式的签名

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T09:49:40.963

您的问题有些过于简单化了这种情况。

关于 PKCS#7 <-> PKCS#1：

是的，PKCS#7 签名容器包含 SignerInfo 对象，这些对象分别基本上包含 PKCS#1 样式签名和一些属性。但是这种 PKCS#1 样式签名通常不仅仅是对文档数据进行签名，而是对所谓的“签名属性”结构进行签名。其中之一是文档哈希，其他可以是签名时间、签名者证书的链接以及其他信息；在许多用例中都需要这些额外信息。只有最原始构建的 SignerInfo 结构直接对文档数据进行签名。

因此，一般来说，如果您只是简单地获取一些数据的 PKCS#1 签名并将其包装在 PKCS#7 容器中，则不会接受该签名容器。

有关详细信息，请参阅[RFC 3852](http://www.ietf.org/rfc/rfc3852.txt)。

关于集成 PDF 签名：

您对即将实现的描述有些模糊。您似乎认为要签名的文档哈希是原始 PDF 的哈希。在集成 PDF 签名的情况下，这是错误的：为了创建集成 PDF 签名，您首先通过一些数据扩展 PDF，这些数据包含 PKCS#7 签名容器（由规范推荐）或 PKCS#1 签名的占位符集成。然后，您需要散列除占位符之外的扩展 PDF。（根据当前的 PDF 规范，您可以散列小于该值，但这不会被当前的 Adob​​e Acrobat/Reader 接受，也不应该被任何认真的验证者接受）。

有关详细信息，请参阅[Adob​​e 发布的 ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

根据法律要求，您可能还必须考虑 ETSI 指定的 PDF 高级电子签名 (PAdES)，参见 [符合欧盟标准的电子签名的 ETSI 标准](http://www.etsi.org/website/newsandevents/200909_electronicsignature.aspx)。这些将成为 ISO 32000-2（又名 PDF 2.0）的一部分。

那么，您是否仍然确定您的用例允许您想到的那些非常简单的 PKCS#7 签名，并且您的 PKCS#1 源签名是否为正确的文档创建？在这种情况下，通过查看[RFC 3852](http://www.ietf.org/rfc/rfc3852.txt)可以轻松构建这些容器。

无论如何，您应该看看Bruno Lowagie (iText Software)[的 PDF 文档数字签名白皮书。](http://itextpdf.com/book/digitalsignatures)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:02:46.280

查看 RFC 3852 > 5.4。消息摘要计算过程

只要其中没有签名属性，就可以简单地将 PKCS#1 转换为 PKCS#7。如果有，那么您将被卡住，因为 PKCS#1 仅隐藏内容的哈希值，而 PKCS#7 具有构造中间结构所需的签名属性，并且该结构的哈希值正在被签名。

# perforce - 在 perforce 中创建工作区时出现问题

> ID：12796546
> 
> 赞同：0
> 
> 时间：2012-10-09T09:10:55.837
> 
> 标签：perforce

我无法在 perforce 中创建工作区。我转到 Connection --> New Workspace，然后给出所需的工作区名称和 workspaceroot，然后单击“确定”。而且它也没有给出任何错误。但是当我尝试访问工作区以在其中添加文件时，我无法访问它，它给出了“找不到路径”的错误。这意味着尚未在我的本地系统中创建工作区。你能在这里帮忙吗？我是新手，所以请相应地回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:29:27.450

在 perforce 中，工作区（也称为客户端）定义了 depot 文件到工作区中文件的映射（这称为“客户端视图”）。

很可能您在客户端视图中犯了一个错误，或者在添加文件时它们不适合（例如，当客户端不包含它所在的本地路径的映射时，您无法添加文件来执行）仓库中的位置）。

为了提供更好的建议，您需要发布您的客户的内容和您要添加的文件的路径。

# java - Java 使用以下路径读取 .xml：.zip/.ear/directory/.jar/directory/.xml

> ID：12796549
> 
> 赞同：1
> 
> 时间：2012-10-09T09:11:09.783
> 
> 标签：java, xml

我有一个 zip 文件，其中包含一个文件。里面有ear文件和jar文件夹里面的一个文件夹。

最后，在 jar 文件中是一个 xml。读取 xml 不是问题，问题是在不解压缩任何东西的情况下获取 xml 文件。

我设法得到了耳朵文件，但没有别的

```
public ZipInputStream inner(ZipFile zf, ZipEntry ze) {
    InputStream innerZipStream;
    ZipInputStream innerZis = null;
    try {
        innerZipStream = zf.getInputStream(ze);
        innerZis = new ZipInputStream(innerZipStream);
    } catch (IOException ex) {
        Logger.getLogger(Dependencias.class.getName()).log(Level.SEVERE, null, ex);
    }
    return innerZis;
} public String gEar(ZipFile zip) throws IOException {
    String earName = null;
    extreureDades(zip.getName());
    try {
        ZipInputStream zis = new ZipInputStream(new FileInputStream(ruta + File.separator + zip.getName()));
        ZipEntry entry;

        while (null != (entry = zis.getNextEntry())) {
            System.out.println(entry.getName());
            if (entry.getName().endsWith(".ear")) {
                ZipInputStream zisEar = inner(zip, entry);
                ZipEntry entryEar;
                while (null != (entryEar = zisEar.getNextEntry())) {
                    System.out.println("-----------" + entryEar.getName());
                    if (entryEar.getName().contains("META-INF/")) {

                    } else if (entryEar.getName().contains("lib/")) {

                        if (entryEar.getName().endsWith(".jar")) {
                        }
                    }
                }
            }
            zis.closeEntry();
        }
    } catch (FileNotFoundException ex) {
        Logger.getLogger(Dependencias.class.getName()).log(Level.SEVERE, null, ex);
    }
    return earName;
} 
```

# android - 如何从钛标签中移除窗口？

> ID：12796550
> 
> 赞同：0
> 
> 时间：2012-10-09T09:11:11.983
> 
> 标签：android, titanium, titanium-mobile

我正在使用钛加速器在 ios 和 android 中构建应用程序。

我使用以下代码创建一个选项卡组并向其中添加一个选项卡。

```
 var localTabGroup = Ti.UI.createTabGroup();

  var planTab = Ti.UI.createTab({
            title : NYC.Common.StringConstant.TAB_TITLE_PLAN,
            icon : NYC.Common.ResourcePathConstant.IMG_TAB_PLAN,
            window : planTabWin

        });

   localTabGroup.open(); 
```

并调用以下函数创建一个窗口并将其添加到选项卡中

```
 addWindowToTabGroup : function(window) {

        tabGroup.activeTab.open(window, {
            animated : true
        });
    }, 
```

现在，我经常不得不从选项卡的堆栈中删除窗口（例如：在 android 后退按钮或 ios 导航栏上）

到目前为止，我使用 window.close() 从堆栈中删除窗口。但是，它总是显示类似的警告。

```
[ERROR][TiBaseActivity(  378)] (main) [3320,4640528] Layout cleanup.

[WARN][InputManagerService(   62)] Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@406e4258 
```

我只是想知道我是否遵循正确的方法？还是有更好的方法从选项卡中删除窗口？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:32:53.627

选项卡在 iOS 和 Android 上的行为有很大不同，在 Android 上，选项卡不维护一堆窗口。调用 open 会打开一个新的重量级窗口，默认情况下会完全覆盖选项卡组。这与 iOS 非常不同，但它适用于 Android 应用程序。用户总是使用返回按钮来关闭窗口并返回选项卡组。

这可能是因为您试图删除该窗口，即使 Android 本身已经删除了它。[在此处查看文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.Tab-property-active)的**Android 实施说明**

为了完全消除这个问题，我只打开一个模式窗口而不使用 TabGroup，这将更加跨平台：

```
addWindowToTabGroup : function(window) {

    window.open({
        modal : true,
        animated : true
    });
} 
```

这将打开一个在两个平台上行为相同的模式窗口，并且可以通过本机后退按钮功能轻松处理。

# regex - htaccess URL 重定向的正则表达式

> ID：12796562
> 
> 赞同：3
> 
> 时间：2012-10-09T09:11:33.070
> 
> 标签：regex, .htaccess, redirect

我正在尝试重定向 Web 服务器中特定目录中的所有文件。

我正在尝试正则表达式，例如

```
Redirect /data/january\/([a-zA-Z0-9]*).([a-zA-Z]*)  http://www.mysite.com/sample 
```

该表达式`/([a-zA-Z0-9]*).([a-zA-Z]*)`正在尝试查找诸如**dat35262.pdf 之**类的表达式。

但它不起作用。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:17:51.820

您应该使用[`RedirectMatch`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch),[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)不处理正则表达式。尝试 ：

```
RedirectMatch /data/january\/([a-zA-Z0-9]*)\.([a-zA-Z]*)$ http://www.mysite.com/sample 
```

# jquery - Gmap3 标记右键菜单

> ID：12796572
> 
> 赞同：0
> 
> 时间：2012-10-09T09:12:01.810
> 
> 标签：jquery, jquery-gmap3

我已经使用此示例来使右键单击菜单正常工作。[http://gmap3.net/examples/context-menu.html](http://gmap3.net/examples/context-menu.html)

我想修改它，而不是右键单击地图来查看菜单，而是右键单击地图标记并查看它。

更新：

小提琴创建：http: [//jsfiddle.net/WEZVX/1/](http://jsfiddle.net/WEZVX/1/)

右键单击地图时，请查看右键菜单打开。试图在右键单击标记时打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:24:40.000

没关系，我已经做到了。

[http://jsfiddle.net/WEZVX/2/](http://jsfiddle.net/WEZVX/2/)

# android - 如何使用多部分格式数据json将图像（位图）发送到android中的服务器

> ID：12796579
> 
> 赞同：12
> 
> 时间：2012-10-09T09:12:13.980
> 
> 标签：android

我有将图像上传到服务器的代码，它可以工作，

```
HttpEntity resEntity;

                HttpClient httpClient = new DefaultHttpClient();
                HttpPost post = new HttpPost(Constants.url_create_product);
                MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
                File file= new File(path);
                FileBody bin = new FileBody(file);

                reqEntity.addPart("phone", new StringBody(mPhoneNumber));
                reqEntity.addPart("prod_title", new StringBody(namapro));
                reqEntity.addPart("prod_price", new StringBody(hargapro));
                reqEntity.addPart("prod_desc", new StringBody(despro));
                reqEntity.addPart("prod_order", new StringBody(orderpro));
                reqEntity.addPart("prod_image", bin);

                post.setEntity(reqEntity);
                    HttpResponse response = httpClient.execute(post);
                resEntity = response.getEntity();
                String response_str = EntityUtils.toString(resEntity);
                Gson gson = new Gson(); 
                gson.toJson(response_str);
                 if (resEntity != null) {
                     Log.i("RESPONSE",response_str);
                     runOnUiThread(new Runnable(){
                            public void run() {
                                 try {
                                    Toast.makeText(getApplicationContext(),"Upload Complete. Check the server uploads directory.", Toast.LENGTH_LONG).show();
                                } catch (Exception e) {
                                    e.printStackTrace();
                                }
                               }
                        });
                 } 
```

但我有菜单图像编辑器。该编辑器是裁剪图像，那是代码返回位图值，如下所示

```
Bundle extras = data.getExtras();

                if (extras != null) {               
                    photo = extras.getParcelable("data");

                    mImageView.setImageBitmap(photo);
                }

                File f = new File(mImageCaptureUri.getPath());            

                if (f.exists()) f.delete();

                break; 
```

我想问一下，如何使用参数位图将图像发送到服务器。如您所知，我发送图像的代码现在使用参数路径（字符串）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-09T09:20:10.917

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte[] imageBytes = baos.toByteArray();
String encodedImage = Base64.encodeToString(imageBytes, Base64.DEFAULT); 
```

然后将此编码图像作为 a 发送，`String`并且在您的服务器中，您需要对其进行解码才能获取图像本身。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-21T11:55:17.220

*使用三个库
1.httpclient-4.3.6
2.httpcore-4.3.3
3.httpmime-4.3.6

```
 byte[] data = null;
            try {    
                String url = "http://andapp.freetings.in/testbyme.php?";
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url); 
                MultipartEntity entity = new MultipartEntity();

                if(imageBitmap!=null){
                    ByteArrayOutputStream bos = new ByteArrayOutputStream();
                    imageBitmap.compress(CompressFormat.JPEG, 100, bos);
                    data = bos.toByteArray();
                    entity.addPart("uplod_img", new ByteArrayBody(data,"image/jpeg", "test2.jpg"));
                }
                // entity.addPart("category", new StringBody(categoryname,"text/plain",Charset.forName("UTF-8")));
                entity.addPart("category", new StringBody(catid,"text/plain",Charset.forName("UTF-8")));
                entity.addPart("your_contact_no", new  StringBody(phone,"text/plain",Charset.forName("UTF-8")));
                entity.addPart("your_emailid", new StringBody(email,"text/plain",Charset.forName("UTF-8")));
                entity.addPart("your_name", new StringBody(name,"text/plain",Charset.forName("UTF-8")));

                httppost.setEntity(entity);
                HttpResponse resp = httpclient.execute(httppost);          
                HttpEntity resEntity = resp.getEntity();
                String string=EntityUtils.toString(resEntity);
                //  Log.e("sdjkfkhk", string);
                return resEntity;
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

# c++ - 每个派生类的静态变量

> ID：12796580
> 
> 赞同：13
> 
> 时间：2012-10-09T09:12:18.940
> 
> 标签：c++, oop, static

> **可能重复：**
> [子类化时覆盖静态变量](https://stackoverflow.com/questions/594730/overriding-static-variables-when-subclassing)

我有一组类都派生自一个基类。这些派生类中的任何一个都声明了相同的静态变量。然而，它特定于每个派生类。

考虑以下代码。

```
class Base {
    // TODO: somehow declare a "virtual" static variable here?
    bool foo(int y) { 
        return x > y; // error: ‘x’ was not declared in this scope
    }
};

class A : public Base {
    static int x;
};

class B : public Base {
    static int x;
};

class C : public Base {
    static int x;
};

int A::x = 1;
int B::x = 3;
int C::x = 5;

int main() {} 
```

在我的基类中，我想实现一些逻辑，这需要派生类特定的知识`x`。任何派生类都有这个变量。因此，我希望能够在基类范围内引用这个变量。

如果它是一个简单的成员变量，这将不是问题。但是，从语义上讲，变量确实不是派生类实例的属性，而是派生类本身的属性。因此它应该是一个静态变量。

**更新**我需要类层次结构来保持其多态性。也就是说，我的所有派生类的实例都必须是公共基类的成员。

但是，我怎样才能从基类方法中获得这个变量呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T09:26:05.940

您可以使用[Curiously recurring 模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。

```
// This is the real base class, preserving the polymorphic structure
class Base
{
};

// This is an intermediate base class to define the static variable
template<class Derived>
class BaseX : public Base
{
    // The example function in the original question
    bool foo(int y)
    { 
        return x > y;
    }

    static int x;
};

class Derived1 : public BaseX<Derived1>
{
};

class Derived2 : public BaseX<Derived2>
{
}; 
```

现在类`Derived1`和`Derived2`每个类都将有一个`static int x`可通过中间基类使用！此外，`Derived1`并且`Derived2`都将通过绝对基类共享通用功能`Base`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:31:30.693

具有虚拟吸气剂功能

```
class Base {
public:
    bool foo(int y) const{ 
        return getX() > y;
    }
    virtual int getX() const = 0;
};

class A : public Base {
    static const int x;
    int getX() const {return x;}
};

class B : public Base {
    static const int x;
    int getX() const {return x;}
};

class C : public Base {
    static const int x;
    int getX() const {return x;}
};

int A::x = 1;
int B::x = 3;
int C::x = 5;

int main()
{
    C c;
    bool b = c.foo(3);
} 
```

# android - Android中关闭的NotificationBar中来自DownloadManager的消息

> ID：12796582
> 
> 赞同：1
> 
> 时间：2012-10-09T09:12:23.803
> 
> 标签：android, notifications, download-manager, android-notification-bar

我正在使用 DownloadManager 从 URL 下载 xml 文件。它工作正常，但我有两个问题：

1.) 如何在关闭的通知栏中显示有关下载的消息？我可以在打开栏时显示一条消息，如下图所示：![通知栏](../Images/582aafb19802f63025e28e7681618be1.png)

2.) 如何以编程方式删除 tis 通知？

我的下载管理器代码：

```
 //Download XML file from URL 
        DownloadManager.Request request = new DownloadManager.Request(Uri.parse(URL));
        request.setTitle("Download von "+Name+".xml");
        request.setDescription("Download von "+Name+".xml");

        // in order for this if to run, you must use the android 3.2 to compile your app
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            request.allowScanningByMediaScanner();
            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
        }

        request.setDestinationInExternalPublicDir(FileSeperator+"XML"+FileSeperator, Name + FileExtension);

        // get download service and enqueue file
        DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
        manager.enqueue(request); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-19T17:23:38.333

[`DownloadManager`API](http://developer.android.com/reference/android/app/DownloadManager.Request.html)提供了一种方法，`remove(long... ids)`可让您从文件系统中删除下载的文件。 `remove()`从文件系统和下载管理器应用程序的下载文件列表中删除文件。它还会从系统通知抽屉中删除进度通知。只需将您在排队请求时收到的 ID 传递给它。

可能有点奇怪的是，可能还会有*完成*通知，如果你的下载成功完成，DownloadManager 不会***删除***完成通知，即使你`remove()`用你的下载请求 ID 调用。

即使用户从下载管理器应用程序中删除文件，它也只会从系统通知抽屉中删除进度通知，但完成通知仍然存在。如果用户手动删除了应用程序，或者您以编程方式（通过`remove()`）删除了下载，则通知会导致操作系统崩溃，并报告*“不幸的是，进程 android.process.media 已停止”。* 这似乎是一个Android错误。

甚至[`NotificationManager`API](http://developer.android.com/reference/android/app/NotificationManager.html)也无济于事，因为`DownloadManager`拥有完成通知，*而不是您的 app*。所以`cancelAll()`不会有任何影响。

**底线：**如果您不想要完成通知，请不要`setNotificationVisibility()`使用 value 调用您的请求`VISIBILITY_VISIBLE_NOTIFY_COMPLETED`。默认可见性为`VISIBILITY_VISIBLE`，仅显示进度通知。正如我所描述的，进度通知会自动消失。

如果您想完全控制通知，您可以将您的请求设置为使用`VISIBILITY_HIDDEN`（需要权限`android.permission.DOWNLOAD_WITHOUT_NOTIFICATION`）。`NotificationManager`然后您可以使用API以通常的方式显示您想要的任何自定义通知。

对于我的应用程序，我正在下载一个 jar 文件，然后提取其内容并删除 jar 文件，我选择了`VISIBILITY_VISIBLE`（没有完成通知）。这是我创建请求的方式：

```
Request request = new Request(baseUrl + destinationFile))
            .setDescription("file description")
            .setDestinationInExternalFilesDir(mContext, null, destinationFile)
            .setNotificationVisibility(Request.VISIBILITY_VISIBLE)
            .setVisibleInDownloadsUi(true)
            .setTitle("My App Title"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:09:05.197

是的，您可以在下载完成时显示通知。你也可以删除它。关注这篇文章[如何以编程方式在 Android 中打开/关闭通知？](https://stackoverflow.com/questions/5029354/how-can-i-programmatically-open-close-notifications-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-13T12:51:18.080

You can use following function at onReceive method of broadcastReceiver

* * *

downloadManager.addCompletedDownload(YOUR_TITLE, YOUR_DESCRIPTION, true, YOUR_MIMETYPE, downloadedFile.getPath(), downloadedFile.getTotalSpace(), false);

* * *

BroadcastReceiver like this:

registerReceiver(broadcastReceiver, new IntentFilter("android.intent.action.DOWNLOAD_COMPLETE"));

* * *

If you set the last parameter to "true" the notification will be shown if download is complete. If set to "false" the notification is only displayed while downloading and if download is complete and notification is canceled automatically

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T10:21:59.160

[通知概述](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)。方法[通知](http://developer.android.com/reference/android/app/NotificationManager.html#notify%28int,%20android.app.Notification%29)。方法[取消](http://developer.android.com/reference/android/app/NotificationManager.html#cancel%28int%29)。

# windows-mobile - 在运行 Windows Mobile 6.5.3 的 MC65 上自动启动 Datawedge

> ID：12796584
> 
> 赞同：1
> 
> 时间：2012-10-09T09:12:34.053
> 
> 标签：windows-mobile, windows-mobile-6.5, motorola, datawedge

我正在为需要运行 Datawedge 的客户创建一个自动安装程序。

我们过去通过将 AppCenter 配置为启动 datawedge 来做到这一点，但在这种情况下这不是一个选项。

作为安装过程的一部分，我尝试设置以下 Regkey

```
[HKEY_LOCAL_MACHINE\Software\Motorola\DWStartUp]
"DontLoadOnStartUp"=dword:00000000 
```

但 Datawedge 在重新启动后仍处于“已停止”状态。

目前，我创建了 DataWedge.exe 的快捷方式并将其放入，`\Windows\StartUp`但这似乎不是一个非常优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:20:38.787

使用 Windows CE 固有的启动能力怎么样？

```
[HKEY_LOCAL_MACHINE\Init]
"launch99"="DataWedge.exe"
"depend99"=hex:32,00 ; or whatever you need to launch before datawedge.  
                     ; Launch50 is often explorer 
```

# perl - DBIx::Class 可以用来创建表吗？

> ID：12796585
> 
> 赞同：9
> 
> 时间：2012-10-09T09:12:34.400
> 
> 标签：perl, dbix-class

我认为我不了解`DBIx::Class`
是否必须先使用常规 SQL 手动创建数据库，然后使用模式加载器（或手动编码模式/结果集）？
或者有没有办法告诉`DBIx::Class`继续从手动编码的模式和结果集中创建表？
我问 b/c 是否需要通过 SQL`CREATE TABLE`语句创建数据库，我的列在 ResultSet 代码中基本上是重复的，或者我需要依赖我认为效率低且不适合生产的 schemaloader。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T09:18:44.303

你可以[`deploy()`](http://search.cpan.org/~mstrout/DBIx-Class-0.08202/lib/DBIx/Class/Schema.pm#deploy)你的架构：

```
my $schema = MyApp::Schema->connect(
          $dsn,
          $user,
          $password,
        );
$schema->deploy( { add_drop_table => 1 } ); 
```

当然，以上将删除您现有的表:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T09:22:42.903

你可以走任何一条路线。您可以创建一个模式并让[DBIx::Class 对其进行分析](http://search.cpan.org/~mstrout/DBIx-Class-0.08202/lib/DBIx/Class/Manual/Features.pod#Schema%3a%3aLoader)，或者您可以让 DBIx::Class 为[您构建模式](http://search.cpan.org/~mstrout/DBIx-Class-0.08202/lib/DBIx/Class/Manual/Features.pod#-%3Edeploy)。

前者不必对生产效率低下，因为您可以获得 DBIx::Class 来[保存生成的代码](http://search.cpan.org/~rkitover/DBIx-Class-Schema-Loader-0.07033/lib/DBIx/Class/Schema/Loader/Base.pm#dump_directory)，这样它就不必每次运行都进行分析。

# android - 可拖动列表视图的实现

> ID：12796588
> 
> 赞同：1
> 
> 时间：2012-10-09T09:12:39.113
> 
> 标签：android, xml, listview, drag-and-drop

我按照本教程进行了基于音乐应用播放列表使用的组件的拖放列表视图实现。

[http://www.techrepublic.com/blog/australia/making-a-sortable-listview-in-android/708](http://www.techrepublic.com/blog/australia/making-a-sortable-listview-in-android/708)

可拖动列表视图工作正常，但在界面生成器中有错误：

```
The following classes could not be instantiated:
- com.ib.myproject.TouchInterceptor (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

这是xml文件的一部分：

```
<com.ib.myproject.TouchInterceptor
    android:id="@+id/listViewBankList"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:drawSelectorOnTop="false"
    android:fastScrollEnabled="true">
</com.ib.myproject.TouchInterceptor> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:16:57.353

该错误告诉您界面构建器无法显示任何内容，因为存在无法自行解决的代码逻辑。在您的自定义视图中，您可以使用`View.isInEditMode()`声明仅由界面构建器调用的代码。

因此，无论是在您的视图中还是包含的活动/片段中，您都可以定义如下内容：

```
if(View.isInEditMode()) {
  // some code which will help the view instantiate
} 
```

# java - 如何在 App Engine 项目中禁用 SystemServiceServlet 配置？

> ID：12796589
> 
> 赞同：6
> 
> 时间：2012-10-09T09:12:44.273
> 
> 标签：java, google-app-engine, google-plugin-eclipse

无论项目属性设置为什么，Eclipse 的 Google 插件都会在**web.xml**中自动生成这些行：

```
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>
 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping> 
```

有没有办法阻止插件这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:57:16.820

从 web.xml 中删除上述 xml 并将 readonly 属性添加到 web

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:29:23.500

在您的项目属性中，在 Builders 下，如果您禁用 Google App Engine Project Change Notifier，您的 web.xml 将不再被修改。但是，对 GAE 环境不够热衷，我不知道禁用此构建器会产生哪些副作用。

# mysql - 我的 sql 查询与可能的组合

> ID：12796601
> 
> 赞同：0
> 
> 时间：2012-10-09T09:13:11.463
> 
> 标签：mysql, ibatis

我有搜索要求，即搜索出租房屋的选项。

`city,price range,numberOfRooms`是标准。

如果用户没有提及任何细节并单击提交，我们必须显示所有结果。

例如，如果用户提到的价格范围是 5000 到 10000，那么它必须给出考虑所有城市的结果，所有可能的 1bhk、2bhk、3bhk ......

如何编写涵盖所有可能性的单个查询

我心里有这个想法。。

让我们只考虑城市和价格是选项，没有其他选项可以更好地解释。

我创建了一个名为 city 的表

```
city

option    cityname
  1        delhi
  2        hyderabad
  3        bangalore
  4        delhi
  4        hyderabad
  4        bangalore

SELECT *
FROM rental
WHERE city IN (select cityname from city where option=#{option_value}) and price>=#{minPrice} and price<=#{maxPrice}; 
```

我们需要创建表格城市吗？

是否有任何发送列表中的值并根据选项这些列表值应该出现。

这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:17:23.783

这是另一种方法，通过使用可选参数，例如：

```
SELECT * 
FROM rental 
WHERE 1 = 1
AND (@city IS NULL OR city = @city)
AND (@PricerangeFlag IS NULL OR price BETWEEN @minPrice AND @maxPrice)
.. 
```

如果以这种方式传递给此查询的任何参数或任何其他参数与一个值一起传递，`@city`则例如，整个谓词将被评估为真，而无需进入第二个谓词，因为评估为真。与其他参数相同，如果所有参数都与值一起传递给查询，则该子句将被评估为始终为真谓词的子句，因为它的行为就像它没有被呈现并返回所有行。`@pricerangeFlag``NULL``AND (@city IS NULL OR city = @city)``OR city = @city``@city is NULL``NULL``WHERE``WHERE 1 = 1`

请注意，在价格范围参数的情况下，我使用了一个标志参数来禁用这两个参数`@minPrice`和`@maxPrice`

# java - 使用 Java 进行 MongoDB 查询

> ID：12796602
> 
> 赞同：0
> 
> 时间：2012-10-09T09:13:12.373
> 
> 标签：java, mongodb, nested

我在 MongoDB 中有以下数据库结构（见下文），我想对“名称”字段进行搜索查询

数据库结构：

```
 {
            "_id" : ObjectId("505ad9a7ed5022cbe1f3dc2e"),
            "id" : "10",
            "description" : "",  
            "members" : [{
              "id" : "1",
              "name" : "Jack" 
            }, {
              "id" : "2",
              "name" : "Mike" 
            }, {
              "id" : "3",
              "name" : "Laura" 
            }, {
              "id" : "4",
              "name" : "Sara" 
            }, {
              "id" : "240",
              "name" : "Ronald" 
            }],
            "status" : "active"
        },  
        {
            "_id" : ObjectId("5059c214707747cbc5819f6f"),
            "id" : "12",
            "description" : "",  
            "members" : [{
              "id" : "19",
              "name" : "Geoff" 
            }, {
              "id" : "21",
              "name" : "Andrew" 
            }, {
              "id" : "23",
              "name" : "Rachel" 
            }, {
              "id" : "25",
              "name" : "Susan" 
            }],
            "status" : "active"
        }, 
```

我有以下代码将在“描述”或“状态”字段上进行搜索。DBCollection 集合 = database.getCollection("members");

```
 BasicDBObject or1 = new BasicDBObject(); 
        or1.put("description",  Pattern.compile(keyword, Pattern.CASE_INSENSITIVE)); 

        BasicDBObject or2 = new BasicDBObject(); 
        or2.put("status",  Pattern.compile(keyword, Pattern.CASE_INSENSITIVE));         

        BasicDBList or = new BasicDBList();
        or.add(or1); 
        or.add(or2);        

        BasicDBObject query = new BasicDBObject(); 
        query.put("$or", or);

        BasicDBObject select = new BasicDBObject();
        select.put("description", 1);  
        select.put("status", 1);    
        DBCollection collection = collection.find(query, select); 
```

问题是，我将如何对字段 'members.name' 进行 OR 搜索？因此，如果我要搜索 ID 为 10 的文档/记录将在结果集中的名称或文本“劳拉”。

我是否必须遍历所有结果或类似的东西？

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T18:19:40.200

如果我正确理解了这个问题，那么这实际上是一个关于如何在数组中搜索单个字段的问题。使用相关字段的完整路径。在这种情况下，它是“members.name”。

现在，如果您想将成员名称 AND 在一起以查找包含两个特定成员的记录，只需将各个查询放入 BasicDBList 中，就像您使用 OR 一样，然后将它们 AND 在一起。如果您想包含另一个 OR 查询列表，只需将该查询对象（在上面的代码示例中使用）放入该 BasicDBList 中以包含在 AND 中。

# php - Json + Jquery Autocomplete + php：当Json有多个项目时，选择搜索选项中显示的信息

> ID：12796603
> 
> 赞同：0
> 
> 时间：2012-10-09T09:13:14.993
> 
> 标签：php, javascript, jquery, ajax, jquery-ui

基本上我得到了一个 PHP 文件，它返回一个不同结果的数组（PHP 发送数组并且接收良好）。现在我希望 JQuery 自动完成仅按字段“名称”而不是其他字段搜索，并且它仅在建议结果时显示字段“名称”。但是一旦被选中，我希望它将所有结果数组放入页面中。

目前它正在显示所有在建议的搜索中拉出所有数组并且只在 HTML 中放入“名称”的内容。

我想我要做的是捕获 JQ 中的变量，然后只搜索名称

任何人都可以帮助我吗？谢谢你

PHP（工作）

```
 foreach ($this->get_charities() as $r){

                         $return = array (  'Name' => $r['Name'],
                                            'Contact' => $r['Contact'],
                                            'Postcode' => $r['Postcode'],
                                            'Phone' => $r['Phone'],
                                            'Fax' => $r['Fax'],
                                            'Website' => $r['Website'],                             
                                            'Email' => $r['Email'],
                                        );
                }

        return json_encode($return); 
```

JS

```
 <script>
        $(function() {
            function log( message ) {
                $( "<div>" ).text( message ).prependTo( "#log" );
                $( "#log" ).scrollTop( 0 );
            }

            $( "#birds" ).autocomplete({
                source: "search.php",
                minLength: 2,
                select: function( event, ui ) {
                    log( ui.item ?
                        "Selected: " + ui.item.value + " aka " + ui.item.id :
                        "Nothing selected, input was " + this.value );
                }
            });
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:42:12.680

您需要在 php 中设置数组，如下所示

```
$return = array (  
    'value'=> $r['Name'],
    'label'=> $r['Name'],
    'Contact' => $r['Contact'],
    'Postcode' => $r['Postcode'],
    'Phone' => $r['Phone'],
    'Fax' => $r['Fax'],
    'Website' => $r['Website'],                             
    'Email' => $r['Email'],
); 
```

现在，自动完成仅搜索名称值，您还可以将自定义值放入选择功能

```
$( "#birds" ).autocomplete({
    source: "search.php",
    minLength: 2,
    select: function( event, ui ) {
            alert(ui.item.Phone);   <-- here you can get all your custom values.
        alert(ui.item.Contact); <-- here you can get all your custom values.

        log( ui.item ?
            "Selected: " + ui.item.value + " aka " + ui.item.id :
            "Nothing selected, input was " + this.value );
    }
}); 
```

# java - 如何使用 lp_solve 和 Java 包装器设置自由变量

> ID：12796606
> 
> 赞同：0
> 
> 时间：2012-10-09T09:13:26.897
> 
> 标签：java, linear-programming, lpsolve

我不明白如何在我试图用 lp_solve 和 Java 包装器解决的 LP 问题中设置自由变量。

我用方法

> 公共 void **setUnbounded** (int colnr) 抛出 LpSolveException

javadocs中的那个应该“如果变量是免费的则设置”。

但是，当我在解决 LP 之前调用它时，我得到了错误

```
lpsolve.LpSolveException: ERROR in set_unbounded: status = -1 (Model has not been optimized) 
```

关于“模型尚未优化”是什么意思的任何线索？如果我没记错的话，我应该在求解 LP*之前设置自由变量。*我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:38:24.177

我发现了问题。我试图设置与目标函数的值相对应的#0 列。错误是因为通过打印 LP（使用 printLp()），为了清楚起见，第 0 列被隐藏了。

# php - 将 php_oauth.dll 加载到本地服务器

> ID：12796614
> 
> 赞同：2
> 
> 时间：2012-10-09T09:13:47.520
> 
> 标签：php, apache, oauth, xampp

我在为我的 xampp 加载 php_oauth.dll 扩展时遇到问题。我下载了 php_oauth.dll 并在 php.ini 中添加了 extension=php_oauth.dll ，但是当我重新启动我的 apache 时，它​​无法再启动服务器了。

我正在使用窗口 7 ,64 位。最初，我从 [http://downloads.php.net/pierre/下载文件](http://downloads.php.net/pierre/)

但我发现它是 32 位文件，所以我正在搜索 64 位并发现 [http://www.mediafire.com/php-win64-extensions](http://www.mediafire.com/php-win64-extensions)

不幸的是，我仍然无法加载 oauth。有什么办法可以解决吗？看了很多文章，好像没有，大家可以提供，这样，其他使用win 64bit的可以关注

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:15:07.990

这看起来像一个路径问题。确保扩展存储在正确的扩展目录中。

这个设置可以在里面找到`php.ini`，比如

> extension_dir = C:\php\extensions

默认情况下，这是**`ext`**PHP 安装中的文件夹。

或者，如果您不确定自己在做什么，请在安装扩展时按照[PHP 手册中的说明进行操作。](http://php.net/manual/en/install.windows.extensions.php)

# cassandra - 通过 Hector 从 Cassandra 的一行中获取多个列范围

> ID：12796619
> 
> 赞同：1
> 
> 时间：2012-10-09T09:13:58.033
> 
> 标签：cassandra, hector

鉴于我在 Cassandra 中有一行，其中多列以 Integer 作为键和一些值。在 Hector 中使用 SliceQuery 使我能够获得这些列的一个范围。是否有可能通过一个查询获得多个范围？

示例 cassandra 行：

```
columns 3, 7, 12, 34, 45, 46, 59, 98, 99
----------------------------------------
values  a, f,  e,  v,  a,  r,  r,  o,  k 
```

如何在**一个**查询中使用 Hector 获取键从 20 到 30**和**50 到 90 的所有列？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:48:01.600

为了在 PlayOrm 开源项目上解决这个问题，我们这样做......

Hector 是否有像 astyanax 那样的异步调用，所以你可以这样做

```
for(Query q : queryList) {
// this next call is non-blocking..sends requests and returns immediately not waiting for response
   Future f = q.executeAsycn(); 
   futures.add(f);
}

//Now, both column slices are happening in parallel at the SAME time

for(Future f : futures) {
   Result r = f.get(); //this will block for the first result
} 
```

通过这种方式，它就像 api 有一个单独的 api 调用一样快，所以不需要一个调用。

院长

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:37:38.083

我不这么认为。要将其保留在一个查询中，您必须使用包含所有感兴趣切片的单个切片，然后在客户端逐列决定这些列是否属于您感兴趣的范围之一.

您应该注意，如果有太多数据无法在一次调用中处理一个大切片中的所有列，那么您可以使用分页来减少客户端数据的占用空间，但是您不妨只做每个原始切片的单独调用。**

# actionscript-3 - 多次添加一个精灵

> ID：12796621
> 
> 赞同：1
> 
> 时间：2012-10-09T09:14:03.320
> 
> 标签：actionscript-3, movieclip

我正在使用一段相当标准的代码通过库链接将影片剪辑添加到舞台。这是相当标准的代码：

```
var Beat:beat = new beat(); 
```

然而，问题是它只添加一次，我需要它添加多次。我将如何在舞台上添加许多单独的“节拍”电影剪辑实例，而不需要制作更多/更多变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:19:33.307

在循环中创建它们

```
var _nHowMany:int = 10;
for(var i:int = 0; i < _nHowMany; i++)
{
    addChild(new beat() as DisplayObject);
} 
```

如果您稍后需要在列表中使用它，您也可以存储对它们的引用，`Vector.<beat>`但如果不需要，则只需创建并添加到阶段（或其他容器）。

最好的祝福

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:22:08.847

如果没有在代码中声明多个实例，就不能在舞台上拥有多个影片剪辑实例，但可以使用 for 循环并将所有影片剪辑存储在一个数组中：

```
var numOfClips:Number = 5;
var mcArray:Array = new Array();

for(var i=0; i<numOfClips; i++)
{
  var newMC:beat = new beat();
  addChild(newMC);
  mcArray.push(newMC);
} 
```

使用上面的代码，您最终会得到一个数组来访问所有 5 个影片剪辑（比拥有 5 个完全独立的对象，如 beat1、beat2、beat3 更干净）。

有关数组的更多信息：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)

# windows - KEY_WOW64_32KEY 和 KEY_WOW64_64KEY

> ID：12796624
> 
> 赞同：11
> 
> 时间：2012-10-09T09:14:19.720
> 
> 标签：windows, winapi, registry, registrykey, registry-virtualization

除了[MSDN 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx)，我想知道这些键有什么作用？**KEY_WOW64_32KEY**是否意味着 x64 操作系统上的 32 位应用程序将访问**WOW64 注册表树**？KEY_WOW64_64KEY**是否**意味着 x64 操作系统上的 32 位应用程序将访问正常的注册表树而不是**WOW64 注册表树**？如果我必须访问一些我不知道是位于 WOW64 还是普通注册表树中的键怎么办？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-09T09:23:08.863

*   `KEY_WOW64_64KEY`在 64 位操作系统上意味着*注册表访问，无论是 32 位还是 64 位进程*，都将访问 64 位注册表视图。

*   `KEY_WOW64_32KEY`在 64 位操作系统上意味着*注册表访问，无论是 32 位还是 64 位进程*，都将访问 32 位注册表视图。

*   它们都对 32 位操作系统没有任何影响。

*   在 64 位操作系统上保留该标志（默认）会将注册表访问从 32 位进程发送到 32 位注册表视图，并将从 64 位进程的访问发送到 64 位注册表视图。

有关更多信息，[Microsoft 的此参考页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.110).aspx)应该可以说明全部情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:24:26.553

从链接的参考：

> 有关详细信息，请参阅[访问备用注册表视图。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129%28v=vs.85%29.aspx)

其中说：

*   KEY_WOW64_64KEY：从 32 位或 64 位应用程序访问 64 位密钥。

*   KEY_WOW64_32KEY：从 32 位或 64 位应用程序访问 32 位密钥。

# android - 将 CustomView 导出为 Base64 编码的 PNG

> ID：12796629
> 
> 赞同：2
> 
> 时间：2012-10-09T09:14:39.973
> 
> 标签：android, png, base64, android-view

我遇到了一个问题，将视图上绘制的内容导出到 base64 编码的 PNG。我之前做了一项研究，发现这两个主题在 stackoverflow 上听到了：

[Android画布转jpg](https://stackoverflow.com/questions/2174875/android-canvas-to-jpg)

[Android中base64字符串编码和解码位图对象](https://stackoverflow.com/questions/9768611/encode-and-decode-bitmap-object-in-base64-string-in-android)

我的问题是，当我解码编码的字符串时，我的图像只显示顶部图像的大约 15%。

我的代码如下所示：

```
private void doMagic() {
    View paintview = findViewById(R.id.paintView1);
    Log.d(TAG, "width: " + paintview.getWidth() + " height:" + paintview.getHeight());
    Bitmap bitmap  = Bitmap.createBitmap(paintview.getWidth(), paintview.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    paintview.draw(canvas);
    encodeTobase64(bitmap);
}

public static String encodeTobase64(Bitmap image)
{
    Bitmap immagex=image;
    ByteArrayOutputStream baos = new ByteArrayOutputStream();  
    boolean result = immagex.compress(Bitmap.CompressFormat.PNG, 100, baos);
    byte[] b = baos.toByteArray();
    String imageEncoded = Base64.encodeToString(b,Base64.NO_WRAP);

    Log.d(TAG, ""+ result);
    Log.d(TAG, "baos: " + baos.size());
    Log.d(TAG, "b: " + b.length);
    Log.d(TAG, "imageEncoded: " + imageEncoded.length());
    Log.e(TAG, imageEncoded);
    return imageEncoded;
} 
```

至于日志：

*   记录的尺寸和解码图像的尺寸相同（图像的其余部分只是白色）
*   结果为真
*   baos.size() == b.length == imageEncoded.length() * 6 / 8

这是编码的字符串：

```
iVBORw0KGgoAAAANSUhEUgAAAyAAAAGACAYAAABV8wavAAAABHNCSVQICAgIfAhkiAAAIABJREFUeJzs3XfcFNX1x/EP0uyICEqxK2LHXkDFoNhr7MYWNWpiLFFji4m9997FboK9d7HXaAR7w4qCBRVRUYHfH2f3xz77zOxOudN2vu/XKy+e3Z25cyE+u3vm3HsOiEhYg4DPgX1jjDGvg3k8BeziYBw/M/o8/yQwOMJ4qwDPRZ+OlNTJwDfAIcDcEcdYCHgLONDVpGr8CejY5Jh9gRsSuHbVt0C3iOeuBxzv8XxH4BVg97rnO1Wut3DE6xXVYth/QyIiIqk7C/viP0+Gc5gFC4AGJXiNjYG1PJ7vASwVccwfsLmLhNUduAx4F9gyxjhnAg8BnV1MKqTtgQcSGntV4NkY5x8JnO3z2uXAhR7Pv4fdVCiT97FgVkREJBWzA58AB2Q8j2WxL/JJBkBHAHc5HvMOYFPHY0r5LALcgmXSvALkINYBfgE2czWpEIYBLyU09tHAv2Kcvz8W5HnZB3je4/nngI1iXLNozgX+mvUkRESkPFYC+mU8hy2B/yV8jX8DJzgec3/8766KRLEKMBK4h+gZuduBS1xNKIQVgDEJjf0c8bISewA3+ry2MvAbMFPd83eT7FLQPFkPuD/rSYiIiKTl79id36R0Ad4EtnE87lLAaMdj1o7dPaGxpRg2xP776hvx/D9hmc2lnc0omAWA73G/FGwOYELMMbbDPwPaEejv8fxw4KCY1y2KKcAMWU9CREQkaZcCpyQ4/krAZGBAAmO/A8zleMw5gauwL55dHI+dlZ7AkiigiirqBmywzOYo4FBHcwlqNmwpWG/H426HfxYjqI2Bx0KeczpwUszrFsGdwCZZT0JERMS13zH9juyjwJ4JXmt34IUEx3ftBOBrYNeM5+Ha6sBrWLWnn4EPsGIHI4BzgMOAnbH9CwpUknEy8Dgwc8rXHUv0ZWR+hhN/WdQQ4MWQ5xyG3TBpZXsBF2c9CREREZcWxL58dgY+AtZO8FrnYhVuimBfLEtzRNYTSUFX7L+DQcBWwH7YneWrsQpOClSSsyYwCft3T9Noom+q9/MF0csWV60IvBHynD2BW2NeN8/6Ycv2REREWsYI7Mv2L8B8CV5nJMWo5rIltmH3PFpnuVUUPWh/Z16BSnJGAFemfM2RuP2dH4j18YhrceDjkOdsATzh4Np5NYr09w2JtJQOWU9ARP7fSsAFwE+4vxtaNS/24bk5ttwkr1bD1pR/gW1u/TDT2bS1DBYMJVVO1ctVWIGAjlhQMaHyZ+3//J77AQte+mD7DWr/rP15Zmw50Fisz8xYbMnb+BT+fnm0GxbQbQi8nNI1h2CBiCuHYftjDo85zrzAq9j+q6DWwKqMLRHz2nl0EvAdtmxPRCJQACKSH48Bx+D2C0itjbGGYstgnYzzaH7gDOwL8cHAM9lO5//1xDIGO2HvmzsAr2cwj67Yl8DulT9r/9foue54ByovYs01q2PXByUjsGCkrOYG7gVuw7tbeBE8DhxF/IxEd2AcMCuWoQ1i8cr1e8W8dt4MxoKQNbKeiIiISBwbYF90kpJEc0GXOmN7Uj4Efp/tVNrYAav7Px7LyCyb7XRimRNr5LcS1s9ge2ypjDR3HBYMz5H1RCKYCfjR0Vidsb1YYZbs9QSmEi57UgTfY5XMRERECms07ivhVCXRXNClw7E7qnnZk/I7bMnTFOB67Mu6yGpY9miHrCcSwRa43Rj+DbYsy88ZdY87YNXrvHqIFNWNWMljERGRQtoJuCaBcZNqLujKLsBXwIlZTwRbKnIS8Cm2WfsOkmugKMV2PXBd1pOI4BKs8aIrH2O/N17mxKqJzVj3/NtYyelW8Afg2qwnISIiEtXnwDyOxxxIcs0F41oa2wg/HKvulJXuWOWol7BSo9dj69U/wtbMxy1hKq1rRywLsGrWEwnpI9xW2noDW9LnZWasoEafuuefBjZyOIesVPdViYiIFM6BwJkJjHtfAmO6cgTZlrDcBtsP8w12B/N6YCK2VG3dDOclxdIdeBY4NuuJhLA44ft6NPMCjfsVfUb73/cRjueQlWcpXhAqIiLCr0CnrCdRIudhgcY52JeH14ADsMo+kpzFan7OSz+XhbHKcHEdhVUT6+lgrDQkcdPjUWCTBq+PwkoMt5p/YAUKRERECuMEytHZOy9WBa4ApmEd4HXnMj0bY6Vsu2Cbl28HVsh0RuYwbO9PXCtildJ2cTBWGh4Ahjke804ab8p+jHxVuHNhOdLrESMiIhJbN/Lbi6OVzIbd8X0Ny3jsnu10Sm1zbF/STsBm2N6b+8h+U/JVwK6OxhqOZdjyrgNWGte1G4E9Grx+M61X+jmJPXwiItLCepNdBSbXFWmkrXWxL4LfY8tNlsx2OlLjGuBubNnb+tim5EdpvI8gaS7X8m+D7SnKe5O6pHoPXYYta/QTtyt73lyObmyIiEgIBzC9C3SaFgbey+C6ra4P8E+s0s+D5Lf8sFgVpIlM/+K2NhaEPI0FJVn4hnAN9hqZFes8nvcg5FyS6b9zFrY/ogxc91gREZEWdz/ZNJm7Bdgyg+u6sAj5K6G5JXYn9zPgGNyWGZVkXY4Fi9Uu2atjy7JewpZppaknto/DpZUdj5eElbFu6a4dB5ycwLh50wVbWigiIhLItBDHboCbbuJ9abxGOu/exYKQrC0GnIZ1pr4F+/9HimldrEv2PjXPrYBtVB8NbJviXAYDT6Z4vVZ3KFZ5rtU9DAzNehIiIpJ/6xOuV8ZntG+oVTZ7YOu7s7QL9gXxLeBgYI5spyMOXQiMpG0DyKWAm4B3gJ1TmsfuWGYmK8viblN8HuyLbfRvZUn1cxIRkRZzFo03StbaHzg7wbkUxVdk07m8H3Al8BtWZWhwBnOQdKwFfIH9ztVaFLga29+zZwrzOA0LcKuOBuZP4bpVl5LO3zMtu9I6zQe99AfeznoSIiKSf28CAwIeO5n8NE/LyiHAqRld+2ZsiUPHjK4v6TsbeAbrGVJrPuzL+RfYnfUk3Unb5no/ATMmfM1aH9Fa+5m2IlzWuWjewwqMiIiIeJof+DDgscdRnmouflbE9svMkPJ1ewKPY5V6pHxWAz6mbSaiam5sb8EE4KAE5/A2dncbYEHggwSvVW8AdqOklaxP6+6xOQfYL+tJiIhIfu0FXBzguNmwPhJl9idgLOl3bN8bq0i0ZsrXlfw5DauK1cnjtTmA04EfSe6/0dpiFRthPUzSsh/2xbaVDAZeyXoSCRiGdZgXERHxdCvBuvFehH0RLqtLsL0X36V4zW7YcquLUrym5N8KNF6ONBNWpW4KVoq5g8NrL4YVPahKezniPcCGKV4vDQOxoLLV/Ip3oCwiIsKPNK97n/Zyi7x5Ect+XEjb8qhJ2h34FpWzlOhmwJpRDnM87mZYWeCqq0i3UlUrfrFdKOsJJOAOYNOsJyEiIvmzJravoJkR2KbJslkWu4u8InbH+aMUrjkz1kgwy9KnIs38HTil5vHzpNdo8HfAIyldS6L7E5Y5FhERaeNE4PAmx6wEvJDCXPJmN+B/TN9sfiOwXcLX3AmYhBoJSjFsB6xS83giMGtK1z4Za+wn+dUX+DTrSYiISP68DCzX5JjHgCHJTyVXzsP2e1QtiwUjSemELVe4JsFriCRtXqxSV1pewfZPSH69CiyT9SRERCQ/emKVlRrZENv06cK7FKN3xdO076lwP7BeQtfbDlvTrrXS0grWw35f0hDkPUyyFSTLLiIiJbITze+4vwYs6eBaQ7FqTlGNwjqAJ2lxrLna6nXPD8GyQEkYgS3tEmklBwJnpnStPwDXpnQtCW8Q8FTWkxARkfy4Htihwes7A1dHHHsgVn2n6jS8G6gF8VeSb763I/AG3p2dn6PtOndXVqGcG/ulHC7HKrml4VosEJF8+hYrKS4iIsLXwJwNXv8C67AcRW3HZIDRwFIRx5oMdIl4bhBnANf5vLYF1idFpExc/b49g3VwT8M4oFdK15JwbgC2z3oSIiKSvRWx3hZ+/oZ9MY/iz8AFNY/7AZ9EHOsEku06/hj2d/VTH 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:46:21.077

所以最终我想通了，出了什么问题。

我做的每一件事都是对的。但是我记录到 logcat 的 imageEncoded String 被截断了。因此，仅记录了图像的 4000 多个字符。有关更多信息，请阅读[此讨论。](https://stackoverflow.com/questions/8888654/android-set-max-length-of-logcat-messages)

# sharepoint-2010 - 未在 LOGS 文件夹中创建 ULS 日志

> ID：12796633
> 
> 赞同：0
> 
> 时间：2012-10-09T09:15:04.303
> 
> 标签：sharepoint-2010

我正在使用 SHAREPOINT 2010，当我运行不同的共享点应用程序时，我看不到任何日志文件

**C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS**

我检查了**CA -> Monitoring -> Configure Diagnostic Logging**，那里一切都很好。

我也运行其他 ULSLOGVIEWER.EXE 来查看，但我找不到它..

几天前，在上述位置成功创建了日志。

请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:07:43.620

确保运行“SharePoint 2010 跟踪”服务的帐户是“性能日志用户”本地安全组的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T08:37:50.183

将“配置诊断日志记录”中的日志文件位置更改为其他文件夹，然后将其更改回**C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS**

# sencha-touch - 使用 Store 加载 JSON 时出现问题

> ID：12796638
> 
> 赞同：0
> 
> 时间：2012-10-09T09:15:24.823
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试以 JSON 格式从服务器获取一些主数据，并在 Store 的帮助下将其绑定到选择字段。

在下面找到我的代码

**模型**

```
Ext.define('Mobile.model.OrganizationModel', {
  extend: 'Ext.data.Model',
   config: {
    fields: [
        { name: 'Name', type: 'string' },
        { name: 'Id', type: 'int' }
    ]
   }
}); 
```

**店铺**

```
Ext.define('Mobile.store.OrganizationStore', {
extend: 'Ext.data.Store',
model: 'Mobile.model.OrganizationModel',

autoLoad: true,

proxy: {
    type: 'ajax',
    url: 'login/GetOrgList',
    method: 'GET',
    reader: {
        type: 'json'
    }
}

}); 
```

**看法**

```
Ext.define("Mobile.view.LoginView", {
extend: "Ext.form.FormPanel",
alias: "widget.login",
id: 'loginFormPanel',

config: {

    margin: '0 auto',
    name: 'loginform',
    frame: true,
    url: 'login/Authenticate',
    title: 'something',
    items: [

      {
          xtype: 'fieldset',

          itemId: 'LoginFieldset',
          margin: '10 auto 0 auto ',

          title: '',
          items: [
                  {
                      xtype: 'selectfield',
                      label: 'Organization',
                      name: 'Organization',
                      store: 'OrganizationStore',
                      displayField: 'Name',
                      valueField: 'Id',
                      placeHolder: 'Select a Value'
                  }
            ]
      },

    ]
 }

}); 
```

**APP.js**

```
Ext.application({
name: "Mobile",   
controllers: ["LoginController"],
views: ['LoginView', 'HomeView'],
models: ['UserModel', 'OrganizationModel'],
stores: ['OrganizationStore'],
launch: function () {
    var loginPanel = Ext.create('Ext.Panel', {
        layout: 'fit',
        items: [
            {
                xtype: 'login'
            }
        ]
    });
    Ext.Viewport.add(loginPanel);
}

}); 
```

**JSON 数据格式**为

[{"Id":1,"Name":"公司 1"},{"Id":2,"Name":"公司 2"},{"Id":3,"Name":"公司 3" }]

***问题是它没有向服务器发送请求并加载 JSON 数据和绑定***。对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:42:14.550

将您的存储代码更新为

```
 Ext.define('Mobile.store.OrganizationStore', {
extend: 'Ext.data.Store',
config:{
model: 'Mobile.model.OrganizationModel',

autoLoad: true,

proxy: {
    type: 'ajax',
    url: 'login/GetOrgList',
    method: 'GET',
    reader: {
        type: 'json'
    }
}

  }
  }); 
```

# python - python web.py中没有名为auth的模块错误

> ID：12796639
> 
> 赞同：1
> 
> 时间：2012-10-09T09:15:28.637
> 
> 标签：python, authentication, web.py

我正在使用 Python web.py 框架来设计一个小型 Web 应用程序。

如教程中所述，在使用授权时，我在 Python 解释器中尝试了以下操作：

```
In [10]: import web

In [11]: from web.contrib.auth import DBAuth
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)

/home/local/user/python_webcode/<ipython console> in <module>()

ImportError: No module named auth 
```

但我收到上述错误。谁能让我知道如何解决这个错误并解释它为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:16:35.920

看起来您没有安装 auth 模块。我假设您尝试使用的身份验证模块位于[http://jpscaletti.com/webpy_auth/](http://jpscaletti.com/webpy_auth/)。

您没有说明是通过 easy_install 安装 web.py 还是在下载 tarball 后运行 setup.py。无论哪种情况，我都建议您：

1.  找到 web.py 安装文件夹
2.  从上面的链接下载 auth 模块并将内容提取到 web.py 安装文件夹的 contrib/ 文件夹中

# javascript - 为 node.js 编写 C++ 模块

> ID：12796640
> 
> 赞同：34
> 
> 时间：2012-10-09T09:15:43.353
> 
> 标签：javascript, c++, node.js, socket.io

谁能给我一个非常小的框架示例，说明如何在 node.js 中实现 c++ 模块？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-11T09:55:10.903

[https://github.com/kkaefer/node-cpp-modules](https://github.com/kkaefer/node-cpp-modules)的存储库包含许多带有大量注释的小示例，向您展示如何创建模块。此外，还有一个[演示文稿](http://kkaefer.github.com/node-cpp-modules/)（使用左/右箭头键）详细介绍了 C++ 模块。

# python - buildout+setuptools 和 git 项目分叉

> ID：12796644
> 
> 赞同：2
> 
> 时间：2012-10-09T09:16:01.353
> 
> 标签：python, django, git, buildout

在项目中，我使用了一些 3rd 方应用程序。现在它看起来不再受支持，所以我在 git 上创建了这个应用程序的一个分支以满足我的需要。

我应该如何配置 buildout，以便能够在此应用程序中进行一些更改，然后在我的项目中使用它？以前此应用程序依赖于 setup.py。是的，我不确定应该如何组织 buildout 和 setuptools 配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:21:47.490

如果你想继续开发 Git 包，我会用它[`mr.developer`](https://pypi.python.org/pypi/mr.developer)来管理包。`mr.developer`将鸡蛋标记为开发者鸡蛋，这意味着它不会从 PyPI 中提取，而是在本地使用。

此外，`mr.developer`将为您管理工作副本：

```
[buildout]
extensions = mr.developer
auto-checkout = your.package.name

[sources]
your.package.name = git git@github.com:yourgitname/your.package.name.git 
```

现在，当运行你的 buildout 时，`mr.developer`会自动`your.package.name`从 git 签出到`src/`子目录，运行它的 setup.py 来制作一个开发 egg，buildout 将使用那个 egg 来满足对它的依赖。

如果您需要不同的源目录，请使用以下`sources-dir`选项：

```
[buildout]
# ...
sources-dir = ${buildout:directory}/some-other/directory 
```

# django - Django-1.4.1：无法保存对象

> ID：12796646
> 
> 赞同：1
> 
> 时间：2012-10-09T09:16:18.513
> 
> 标签：django, django-models

我的项目在 Django-1.2.5 和 Django-1.3.1 上运行良好，但在 Django-1.4.1 上运行良好。

我无法保存/创建对象并收到如下错误：

```
from entry.models import Entry

import datetime 

from publications.models import Publication

e = Entry(title=u'this is a test headline to test django-1.4.1',
          body_html=u'this is a test body data to test django-1.4.1',
          pub_date=datetime.datetime.now(),
          publication=Publication.objects.get(id=1))

e.save() 
```

错误：

```
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/home/admin/banking_code/contify-banking/entry/models.py", line 112, in save
  super(Entry, self).save()
File "/home/admin/banking_code/contify-banking/django/db/models/base.py", line 463, in save
  self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/home/admin/banking_code/contify-banking/django/db/models/base.py", line 551, in save_base
  result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/home/admin/banking_code/contify-banking/django/db/models/manager.py", line 203, in _insert
  return insert_query(self.model, objs, fields, **kwargs)
File "/home/admin/banking_code/contify-banking/django/db/models/query.py", line 1593, in insert_query
  return query.get_compiler(using=using).execute_sql(return_id)
File "/home/admin/banking_code/contify-banking/django/db/models/sql/compiler.py", line 914, in execute_sql
  return self.connection.ops.fetch_returned_insert_id(cursor)
File "/home/admin/banking_code/contify-banking/django/db/backends/__init__.py", line 548, in fetch_returned_insert_id
  return cursor.fetchone()[0]
TypeError: 'NoneType' object is not subscriptable 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:33:44.770

您能否验证是否存在 id = 1 的发布对象？最快的方法是通过 python shell：

从您的 django 项目的主文件夹中运行“python manage.py shell”，然后：

```
 >> from publications.models import Publication
 >> p = Publication.objects.get(id=1)
 >> p 
```

如果这成功了（你得到一个 id 为 1 的 Publication 对象），那么我们将不得不考虑一个更奇特的失败原因。如果失败，问题将被缩小为发布模型定义的问题。

# php - Imagick SVG 无法加载图像

> ID：12796649
> 
> 赞同：2
> 
> 时间：2012-10-09T09:16:22.867
> 
> 标签：php, image, svg, rendering, imagick

我在通过 PHP Imagick 库将 SVG 转换为图像时遇到了麻烦。这是我的代码：

```
$svg = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="754" version="1.1" height="565">
    <defs></defs>
    <image transform="matrix(1,0,0,1,0,0)" preserveAspectRatio="none" x="0" y="0" width="754" height="565" xlink:href="http://1439.demo.tekk3.com/wp-content/uploads/2012/10/capapix_Harley_Davidson_FLSTCI_-_Heritage_Classic.jpg"></image>
</svg>';

$im = new Imagick();
$im->readImageBlob($svg);
$im->setImageFormat("jpeg");
$im->writeimage($attached_file);
$im->clear();
$im->destroy(); 
```

结果是只有白色背景的图像。没有任何其他图像作为 SVG 显示。

如果我将文本标签放入 SVG 字符串中，则只有在白色背景中呈现的文本。图像仍然丢失。

我已经安装了 php5-imagick、libxml2、librsvg2-bin

我需要安装任何其他扩展以获得正确的结果吗？或者我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-07T13:03:18.850

我找到了解决方法。我使用 base64 图像内容代替图像路径。

```
$svg = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="754" version="1.1" height="565">
        <image x="0" y="0" width="754" height="565" xlink:href="'.imageToBase64('icons-weather_01.png').'"></image>
    </svg>';

function imageToBase64($path) {
    $type = pathinfo($path, PATHINFO_EXTENSION);
    $data = file_get_contents($path);
    return 'data:image/' . $type . ';base64,' . base64_encode($data);
} 
```

如果可能的话，可以使用本地图片或网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:35:24.137

如果您希望 Imagick 在转换时考虑您的图像，则不应使用指向图像的链接。而是使用与这些图像对应的 base64 编码数据。这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T15:06:18.500

我遇到了这个问题并最终来到这里，没有在评论中看到解决方案（必须点击“显示更多评论”），直到我自己修复它，所以认为它可能值得作为答案发布（以及投票）：

正如@Phuc-Pham 发现的那样，问题在于Imagick 想要整个服务器路径，而不是href 属性中相对于CWD 或HTTP 文档根目录的路径。

因此，在解决方案上方使用他的代码应该类似于：

```
$svg = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="754" version="1.1" height="565">
    <defs></defs>
    <image transform="matrix(1,0,0,1,0,0)" preserveAspectRatio="none" x="0" y="0" width="754" height="565" xlink:href="/path/to/htdocs/wp-content/uploads/2012/10/capapix_Harley_Davidson_FLSTCI_-_Heritage_Classic.jpg"></image>
</svg>'; 
```

希望这很有用。

# html - 卡住试图布局我的领域

> ID：12796653
> 
> 赞同：0
> 
> 时间：2012-10-09T09:16:33.820
> 
> 标签：html, css

我是 CSS 新手，但我正在尝试创建此布局：

![布局](../Images/edc8a39dcb7fed21f25f30edb7141a9a.png)

我试图对此有所了解，这是我拥有的代码：

[http://jsfiddle.net/cskQ8/](http://jsfiddle.net/cskQ8/)

现在，我知道这是基本的，但我做错了什么？

Ps 我希望它能够应对任何高度的领域（即非常高）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:19:27.707

添加`.fieldwrapper{display:inline-block}`

由于 div 是块元素，它会显示在下一行中，因此使其成为内联块，然后它会在同一行中流动。

演示[在这里](http://jsfiddle.net/cskQ8/1/)

* * *

以简单的形式，您可以删除输入周围的 div 并编写如下

```
 <div class="r6 dc3 ts2 p4">
    <label field_id="None" for="sender">Sender email address</label>
    <input class="field r2 lft dc1 tc5 ts3" placeholder="Email" type="text" value="">
    </div>​

.lft { float: left; }
ul, li { list-style-type: none; }
.ts3 { font-size: 15px; }
.dc3 { background-color: #808080; }
.tc5 { color: #333333; }
.p4 { padding: 4px; }
.r2 { border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; }
.r6 { border-radius: 6px; -moz-border-radius: 6px; -webkit-border-radius: 6px; overflow:auto}
.field { line-height:27px; font-family:arial, sans-serif; border-color: #d9d9d9; border-top:solid 1px #c0c0c0; padding-left:5px; margin-right: 15px; width:250px; }
label{float:left; padding-right:15px} 
```

演示[http://jsfiddle.net/cskQ8/11/](http://jsfiddle.net/cskQ8/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:20:12.750

您需要一个围绕标签和字段的“行”包装器。

然后，您将标签向左浮动，字段向右浮动。

要清除浮动，请将“行”设置为`overflow: hidden;`

```
.formRow {
    background: #eee;
    width: 90%;
    padding: 5px 5% 5px 5%;
    overflow: hidden;
}

.formRow label {
    float: left;
}   

.formRow .field{
    float: right;
} 

<div class="formRow">
    <label field_id="None" for="sender">Sender email address</label>
    <input class="field r2 lft dc1 tc5 ts3" placeholder="Email" type="text" value="">
</div> 
```

这是一个非常基本的例子。您可以在这里使用宽度和高度 - [http://jsfiddle.net/spacebeers/cskQ8/8/](http://jsfiddle.net/spacebeers/cskQ8/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:32:53.920

给定的示例使用`inline-block`. 但是，您的图像显示文本垂直居中。你可以使用`display: table-cell`它。

示例：http: [//jsfiddle.net/cskQ8/12/](http://jsfiddle.net/cskQ8/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T10:01:44.190

试试这个，可能你需要编辑尺寸、填充和颜色....

CSS =>

```
@charset "utf-8";

    body{
       margin:auto;/*for aligning*/
       padding:0; /*for squeezing in txt*/
       height:100%; /*100% used to fill windows height*/
       behaviour:url(csshover.htc);

    }

    .header{
       margin:auto;/*for aligning*/
       padding:5px;
       height:30px;
       width:100%;
       background-color:#808080;
    }
    .header .holder{
        margin:auto;
       padding:0;
       height:30px;
       width:1018px;
       background-color:#333333;
    }

    .lft {
        float: left; 
    }

    ul, li {
        list-style-type: none; 
    }

    .tc5 {
        color:black;
    }

    .r2 {
        border-radius: 2px; 
        -moz-border-radius: 2px; 
        -webkit-border-radius: 2px; 
    }

    .field {
         line-height:27px; 
         font-family:arial, sans-serif; 
         border-color: blue; 
         border-top:solid 1px #c0c0c0; 
         padding-left:5px; 
         margin-right: 15px; 
         width:250px; 
    } 
```

html =>

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="new.css" rel="stylesheet" type="text/css" />    
</head>    
<body>
    <div class="header">
        <div class="holder">
            <label field_id="None" for="sender"align="left">Sender email address</label>
            <input class="field r2 lft tc5 " placeholder="Email" type="text" value="">
            <div class="fieldwrapper">   
            </div>
        </div>
    </div>    
</body>
</html> 
```

# php - 验证器不工作 Symfony2.1

> ID：12796656
> 
> 赞同：1
> 
> 时间：2012-10-09T09:16:36.973
> 
> 标签：php, forms, validation, symfony, symfony-2.1

我对验证器有疑问。如果我输入无效数据，我的表格也始终有效。我的验证器似乎没有被考虑。

编码：

//验证.yml

```
AskedTech\JobeetBundle\Entity\Users:
properties:
        email:
            - Email:
                message: The email "{{ value }}" is not a valid email.
                groups: [registration]
            - NotBlank: { groups: [registration] }
            - UniqueEntity: { groups: [registration] }
        password:
            - NotBlank: { groups: [registration] }
            - MinLength: { limit: 7, groups: [registration] }
        first_name:
            - NotBlank: { groups: [registration] }
        last_name:
            - NotBlank: { groups: [registration] } 
```

//控制器

```
namespace AskedTech\JobeetBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use AskedTech\JobeetBundle\Entity\Users;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Request;

use AskedTech\JobeetBundle\Form\SignupType;

class UsersController extends Controller {

    public function signupAction(Request $request) {

        $users = new Users();
        $form = $this->createForm(new SignupType(), $users);

        if ($request->isMethod('POST')) {
            $form->bind($request);

            if ($form->isValid()) {

                $post_value = $request->request->get($form->getName());

                return $this->redirect($this->generateUrl('welcome', array('name' => $post_value['email'])));

            }
        }

        return $this->render('AskedTechJobeetBundle:Users:signup.html.twig', array(
                    'form' => $form->createView(),
                ));
    }

    public function welcomeAction($name) {
        return new Response('<html><body>Welcome in Jobeet '.$name.'!</body></html>');
    }

} 
```

形式

```
namespace AskedTech\JobeetBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class SignupType extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('email', 'email');
        $builder->add('first_name', 'text');
        $builder->add('last_name', 'text');
        $builder->add('email', 'text');
        $builder->add('password', 'password');
    }

    public function getName() {
        return 'signup';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver) {
        $resolver->setDefaults(array(
            'data_class' => 'AskedTech\JobeetBundle\Entity\Users',
            'validation_groups' => array('AskedTech\JobeetBundle\Entity\Users', 'registration')
        ));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:55:26.870

> 在 config.yml 中：
> 
> 验证：{启用：真}

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:51:54.377

您应该将您的 validation.yml 文件连接到 Bundle

在 JobeetBundle\DependencyInjection\JobeetExtension 添加以下行：

 ``$yamlMappingFiles = $container-> getParameter('validator.mapping.loader.yaml_files_loader.mapping_files');` 

`$yamlMappingFiles[] = **DIR** . '/../Resources/config/validation.yml'; $container->setParameter('validator.mapping.loader.yaml_files_loader.mapping_files', $yamlMappingFiles);`

在 config.yml 中：

`validation:{ enabled: true }``

# java - Java 安装程序 - 需要帮助

> ID：12796658
> 
> 赞同：1
> 
> 时间：2012-10-09T09:16:49.297
> 
> 标签：java, installation

首先您好，感谢您花时间帮助我解决我的问题。

我需要用 Java 开发一个使用 SQLite 的应用程序。应用程序需要是跨平台的（从 Windows XP 开始，Linux 和 MAC）。

我需要选择一个安装程序（无论是免费的还是付费的），它将检查 JRE 是否安装在目标机器上，如果没有安装它，则安装和创建数据库并安装应用程序。

如果您有任何安装程序的经验，请推荐它并告诉我它的优点和缺点。我需要编制一份清单并将其提交给我的项目经理，以便他采取适当的行动。

提前致谢！

PS 很多人都推荐过 IzPack。这不是一个选项，因为它已经需要 JVM 才能运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:17:10.737

> I need to select an installer (be it free or paid) which will check whether JRE is installed on the target machine and if it isn't to install it, to install and create the DB and install the application.

I suggest a two part strategy.

1.  Check whether a suitable JRE is installed, and guide the user through upgrading if not. Surprisingly, this is best done using a **JavaScript** supplied/maintained by Oracle themselves. It is the [deployJava.js](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html). If you an accept that the tool to ensure a JRE is present is not part of the installer itself, that opens up the field of potential installers considerably, but I *have a favorite.*
2.  Install the rich client app. itself using [Java Web Start](https://stackoverflow.com/tags/java-web-start/info). `<disclaimer>`JWS is just so great that I have to repeat the blurb I wrote on that info. page`</disclaimer>`.

> Java Web Start (JWS) is the **Oracle** Corporation technology used to launch **rich client** (Swing, AWT, SWT) desktop applications directly from a network or internet link. It offers 'one click' installation for platforms that support Java.
> 
> JWS provides many appealing features including, but not limited to, splash screens, desktop integration, file associations, automatic update (including lazy downloads and programmatic control of updates), partitioning of natives & other resource downloads by platform, architecture or Java version, configuration of run-time environment (minimum J2SE version, run-time options, RAM etc.), easy management of common resources using extensions..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:53:20.593

首先，大多数打包解决方案都可以选择将 JRE 打包到安装程序中。因此，可执行文件，无论是 exe、bin 还是 rpm，都将附带适当的 JRE。这是更好的方法，因为如果您假设 JRE 在目标系统上可用，例如：权限、JRE 安装位置、JRE 版本等，它可以最大限度地减少您可能遇到的意外问题的数量。

可执行文件将解压它附带的 JRE 并启动 java 应用程序（您的安装程序）。

有许多免费/开源和商业的多平台打包解决方案。

最受欢迎的广告是Flexera 的[InstallAnywhere](http://www.flexerasoftware.com/products/installanywhere.htm)。它带有方便的 IDE、基于 XML 的 bean 配置（在基于 UI 的安装过程中将 bean 视为一个步骤或屏幕）以及您可能希望在安装期间执行的许多自定义检查。您可以使用响应文件创建静默安装，以将您的安装发送到企业内的许多机器上。您还可以为您的安装创建将执行自定义逻辑的自定义 bean。

[Install4J](http://www.ej-technologies.com/products/install4j/overview.html)也是商业解决方案——我没有尝试过，因为它不支持我需要的所有平台。

另一个商业安装向导是[Denova](http://www.flexerasoftware.com/products/installanywhere.htm)的 JExpress。它也是完全可定制的，并且具有与 InstallAnywhere 相同的平台支持覆盖范围，它具有全套功能，但自定义安装的开发不太方便，并且与 Windows 操作系统的集成较少（在我玩它的时候，我无法执行注册表检查并根据结果执行操作 A 或操作 B)。

我尝试过的开源打包向导是[lzpack](http://izpack.org/)，它既好又灵活，但缺乏好的文档会影响你完成工作的时间。

[InstallJammer](http://www.installjammer.com/)是另一个开源软件，但它并不支持所有平台——仅支持基本的 windows 和 linux 平台，但我认为这个项目已经停止。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:42:27.623

好吧，我找到了有关如何为 Windows 创建[OS X 安装程序](http://www.centerkey.com/mac/java/)的指南 ，看来[JSmooth 可以满足](http://jsmooth.sourceforge.net/)您的要求。

此外，您可能想仔细查看[BitRock Installer](http://installbuilder.bitrock.com)。

# file - 在一组文件上使用密码打包 (WinRAR)

> ID：12796665
> 
> 赞同：4
> 
> 时间：2012-10-09T09:17:05.097
> 
> 标签：file, batch-file, rar, winrar

我会尽量让这个尽可能短。我正在寻找一个 .bat 文件来 rar 和其中包含文件的密码文件夹，但问题比我想象的要棘手一些，每个文件夹中可以包含 1 到 400 个文件，我有两个 .txt文件，一个具有所需数量的 .rar 文件名，一个具有所需数量的 .rar 密码，因此 txt doc 看起来像这样，首先是`filenames.txt`：

```
FAD01    
FAD02    
FAD03 
```

等等直到`FAD110`

和另一个 .txt 文件

```
GAP01
GAP02
GAP03
GAP04
GAP05 
```

依此类推`GAP50`

第一个密码 .txt 文件如下所示

```
vF2RiQMof6HSWy8MSEIO
13qIsZ7e9RIzBwaQ3UO6
KfTMk9wPfPQKMNh4XzD8 
```

以此类推，总共110个随机密码

像这样的第二个密码 .txt 文件

```
al9p4O2vkiqcFKfgpWh7
U0jkx05nQoTKPAAPEYiW
43bliny0TU2R4CKob62H 
```

以此类推，总共50个随机密码

我想要做的是将 .txt 文档中的 50 个文件名的第一个列表应用于位于主文件夹中的 50 个子文件夹，以及用于每个 .rar 创建的 50 个密码的第一个列表，所以我的结束结果将是 > 在第一个主文件夹内 50 个 rars 每个密码不同，我还希望对 .rar 文件密码进行加密，因此除非您输入密码，否则您无法看到任何 .rar 文件的内容。

最终结果将如下所示：

```
FAD01.rar > password = vF2RiQMof6HSWy8MSEIO
FAD02.rar > password = 13qIsZ7e9RIzBwaQ3UO6
FAD03.rar > password = KfTMk9wPfPQKMNh4XzD8 
```

等等直到`FAD110.rar`

如果他们认为他们可以做到，或者如果您只是喜欢挑战并且有一颗宽大的心，我愿意付钱给他们，那也没关系：）感谢您花时间阅读我的问题

**额外信息**

我创建了文件名和密码列表来帮助生成带密码的 rar 文件的过程，但是如果你可以在不需要预定义的密码/文件名列表的情况下做到这一点，那么这将减少工作量，但我需要某种文件由 .bat 文件创建的名称/密码列表，所以我知道什么 .rar 有什么密码。

列表很容易生成，所以我希望 bat 文件可以一次读取 1 行列表并将文件名和密码应用于要 rar'd 的文件夹

基本上我正在寻找它来获取一组文件夹，并以某种形式的字母顺序单独将它们 rar 并将随机密码应用于 rar（这些密码应为 20 个字符长并包含数字和大写/小写字母），但我想要 rar 加密，这是 winRAR 中的一个选项，它会阻止用户看到 rar 的内容，直到输入密码

50 到 300 个文件夹，每个文件夹包含大量文件，文件夹需要 rar'd 并用随机加密密码加密，我目前一次做 1 个，确实非常耗时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:41:11.110

# sql - 从多对多连接返回唯一组合

> ID：12796667
> 
> 赞同：2
> 
> 时间：2012-10-09T09:17:17.567
> 
> 标签：sql, sql-server-2008, hierarchy

我有一个包含以下数据的层次结构表：

```
SOURCE  TARGET  Level   ID
0       1       1       1
0       2       1       2
2       3       2       3
2       4       2       4
2       5       2       5
1       3       2       6
1       4       2       7
1       5       2       8
5       3       3       9
5       3       3       10
4       3       3       11
4       3       3       12
3       6       3       13
3       6       3       14
3       6       4       15
3       6       4       16
3       6       4       17
3       6       4       18 
```

SOURCE 和 TARGET 行是原始数据，用于连接父母和孩子。例如，第三行（源 2，级别 2 上的目标 3）连接到第二行（源 0，级别 1 上的目标 2），因为第一行的源等于第二行的目标。
ID 列使用 ROW_NUMBER 函数添加到末尾，用于为每一行提供唯一 ID。
如果将 SOURCE 替换为 PARENT 并将 TARGET 替换为 CHILD，则可能更容易理解。

我将表加入到自身中以找到“父级”。
我希望每个级别上的“源”的每个“实例”都连接到它的父母之一。哪些连接并不重要，但都需要连接并连接到**不同的**父母。

最终结果应如下所示：

```
SOURCE  TARGET  Level   ID   P_ID
0       1       1       1    NULL
0       2       1       2    NULL
2       3       2       3    2
2       4       2       4    2
2       5       2       5    2
1       3       2       6    1
1       4       2       7    1
1       5       2       8    1
5       3       3       9    5
5       3       3       10   8
4       3       3       11   4
4       3       3       12   7
3       6       3       13   3
3       6       3       14   6
3       6       4       15   9
3       6       4       16   10
3       6       4       17   11
3       6       4       18   12 
```

关于如何为此编写一个好的 ms-sql 查询有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:34:41.610

链接到示例数据和[SQL Fiddle](http://sqlfiddle.com/#!3/904ca/16/0)

要使用的查询如下。

```
;with cte as (
  select *,rn=row_number() over (partition by level, target
                                 order by id),
           lc=count(1) over (partition by level, target)
  from tbl
)

select a.*, b.id as parent_id
from cte a
left join cte b on b.level=a.level-1
               and b.target=a.source
               and b.rn=(a.rn-1)%b.lc+1
order by id 
```

1.  项目按每个级别/目标组合排序
2.  子节点按顺序链接到父节点，但是如果子节点比父节点多，则 MOD (%) 运算符负责返回第一个父节点并继续分配

# css - 动态更改 GWT 主题

> ID：12796670
> 
> 赞同：2
> 
> 时间：2012-10-09T09:17:35.350
> 
> 标签：css, gwt

我有一个 GWT 应用程序，我创建了 appBlueTheme.jar、appOrangeTheme.jar 并添加到项目的 BuildPath 中。我的 module.gwt.xml 文件有

```
 ....
<inherits name='appBlueTheme.appBlueTheme'/>
<inherits name='appOrangeTheme.appOrangeTheme'/>
 ... 
```

但是在我的应用程序中，我看到了 GWT 文档所说的 appBlueTheme 的效果

“继承的模块将按照它们列出的顺序级联”

我希望根据用户响应更改主题。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:35:48.337

如果“主题”是指样式，正确的方法不是为每个主题创建一个单独的 jar，而是使用 CSS。

A. 如果你使用 CSSResource，你可以使用条件 CSS：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Conditional_CSS](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#Conditional_CSS)

B. 如果你使用外部 CSS 文件，而不是

```
.headerPanel {
    background: blue;
} 
```

您可以根据所选主题指定不同的背景：

```
.orangeTheme .headerPanel {
    background: orange;
}
.blueTheme .headerPanel {
    background: blue;
} 
```

请注意，您的代码（或 Ui:Binder）应该只将类“headerPanel”分配给小部件。当您启动您的应用程序时，您会为最外面的小部件（添加到 RootPanel 的小部件）分配一个默认主题。例如，您设置

```
myAppPanel.addStyleName("blueTheme"); 
```

这将为所有具有“headerPanel”类的小部件提供蓝色背景。当用户选择不同的主题时，您删除“blueTheme”类并添加“orangeTheme”类。它会自动刷新页面（无需重新加载），所有样式都会改变。

编辑：

如果您需要将主题应用于整个应用程序，包括 PopupPanel 和对话框，请使用此代码来应用您的主题：

```
Document.get().getBody().setClassName("blueTheme"); 
```

# ruby-on-rails - 超时错误 - rbuf_fill 中的救援（Engineyard）

> ID：12796674
> 
> 赞同：1
> 
> 时间：2012-10-09T09:17:43.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, engineyard

我的网站已经在engineyard 上运行了一段时间。今天，突然之间，我一直收到这个错误。这种情况持续发生了大约 5 到 10 分钟，现在看起来还可以。知道是什么原因造成的吗？此外，任何建议的清理或设置？因此，网站上没有异常活动。

A Timeout::Error 发生在 home#index:

```
 Timeout::Error
  /usr/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill' 
```

* * *

## 回溯：

```
 /usr/lib/ruby/1.9.1/net/protocol.rb:140:in `rescue in rbuf_fill'
  /usr/lib/ruby/1.9.1/net/protocol.rb:134:in `rbuf_fill'
  /usr/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
  /usr/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
  /usr/lib/ruby/1.9.1/net/http.rb:2219:in `read_status_line'
  /usr/lib/ruby/1.9.1/net/http.rb:2208:in `read_new'
  /usr/lib/ruby/1.9.1/net/http.rb:1191:in `transport_request'
  /usr/lib/ruby/1.9.1/net/http.rb:1177:in `request'
  rest-client (1.6.7) lib/restclient/net_http_ext.rb:51:in `request'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/net.rb:22:in `block in request_with_newrelic_trace'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/net.rb:21:in `request_with_newrelic_trace'
  /usr/lib/ruby/1.9.1/net/http.rb:1170:in `block in request'
  /usr/lib/ruby/1.9.1/net/http.rb:627:in `start'
  /usr/lib/ruby/1.9.1/net/http.rb:1168:in `request'
  rest-client (1.6.7) lib/restclient/net_http_ext.rb:51:in `request'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/net.rb:22:in `block in request_with_newrelic_trace'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/net.rb:21:in `request_with_newrelic_trace'
  /data/webinterface/shared/bundled_gems/ruby/1.9.1/bundler/gems/api_client-b950641bfce6/lib/api_client/api.rb:15:in `get'
  /data/webinterface/shared/bundled_gems/ruby/1.9.1/bundler/gems/api_client-b950641bfce6/lib/api_client/show.rb:15:in `recommended'
  app/controllers/application_controller.rb:229:in `set_public_home_page_params'
  app/controllers/home_controller.rb:14:in `index'
  actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.3) lib/active_support/callbacks.rb:469:in `_run__141284936__process_action__119629849__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:34:in `block in process_action'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:268:in `block in perform_action_with_newrelic_trace'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/method_tracer.rb:242:in `trace_execution_scoped'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/controller_instrumentation.rb:263:in `perform_action_with_newrelic_trace'
  newrelic_rpm (3.4.2.1) lib/new_relic/agent/instrumentation/rails3/action_controller.rb:33:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.1) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.1) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.1) lib/omniauth/builder.rb:48:in `call'
  /data/webinterface/shared/bundled_gems/ruby/1.9.1/bundler/gems/exception_notification-192a49a02d63/lib/exception_notifier.rb:19:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__857894770__call__169073287__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  railties (3.2.3) lib/rails/railtie/configurable.rb:30:in `method_missing'
  /usr/libexec/passenger/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /usr/libexec/passenger/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  /usr/libexec/passenger/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  /usr/libexec/passenger/lib/phusion_passenger/utils.rb:479:in `safe_fork'
  /usr/libexec/passenger/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /usr/libexec/passenger/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  /usr/libexec/passenger/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /usr/libexec/passenger/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /usr/libexec/passenger/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  /usr/libexec/passenger/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  /usr/libexec/passenger/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /usr/libexec/passenger/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /usr/libexec/passenger/bin/passenger-spawn-server:101:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:43:07.063

My bad. The reason for this was because I had introduced a sleep for a few minutes in one of the controllers as I wanted a delayed execution. I think this caused the problem

# javascript - 从不同的网站检索信息

> ID：12796678
> 
> 赞同：1
> 
> 时间：2012-10-09T09:17:51.010
> 
> 标签：javascript, same-origin-policy

我正在写一篇项目论文，并且偶然发现了一个可能使我的整个项目受到质疑的问题。因此，我只想在采取任何进一步行动之前进行三次确认。

我在 URL1 上有一个 javascript 文件。为简单起见，javascript 代码从 URL2 检索信息。

不管我怎么尝试这都行不通，所以我做了谷歌搜索，发现同源政策可能是原因。

所以我再次问你，这不可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:53:16.797

这是完全可能的，但有一些限制；

如果 URL2 提供 JSONP 方式，您可以从 URL1 访问 URL2 的信息。您将生成一个脚本标记，该标记加载一个 js 文件 (url2/information?id=123&callback=mycallback)，其中 JSON 被放入指定的函数（在本例中为 mycallback）。URL2 上的脚本如下所示；

```
mycallback({"json":"information"}); 
```

因此，URL1 需要定义一个 mycallback 函数，并将从 URL2 获取信息

另一种方法是使用可以跨域的[XMLHttpRequest Level2 。](http://www.w3.org/TR/XMLHttpRequest/)

另一种方法是通过 onmessage/postmessage 进行通信，并将 URL2 iframed 放在 URL1 的页面中。这也是跨域的。

还有其他技术可以在同源策略中造成漏洞，例如哈希（但与上述技术相比非常有限）

# android - 我正在尝试获取 TextView 的字符串值以显示到 charSequence

> ID：12796682
> 
> 赞同：1
> 
> 时间：2012-10-09T09:18:01.073
> 
> 标签：android, notifications

这是我的代码：

```
MyNM = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    int icon = R.drawable.ic_launcher;
    String tickerText = "Hello";
    Notification notification = new Notification(icon, tickerText, System.currentTimeMillis());

    String contentTitle = GetString(R.id.title);

    MyI = new Intent(getApplicationContext(), LyceumWebNotification.class);

    MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
    notification.setLatestEventInfo(getApplicationContext(), "Hello" , "Title: " + contentTitle, MyPI); 
    MyNM.notify(NOTIFICATION_ID, notification);

public String GetString(int id){
return ((TextView)this.findViewById(id)).getText().toString();

} 
```

是否可以获取 TextView 的数据并显示为通知的字符序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:26:17.860

[getText()](http://developer.android.com/reference/android/widget/TextView.html#getText%28%29)已经返回一个 CharSequence。不要将其转换为字符串

# php - 如何在php邮件中使用clickabe链接（href链接）

> ID：12796683
> 
> 赞同：1
> 
> 时间：2012-10-09T09:18:05.530
> 
> 标签：php, phpmailer

我想在电子邮件中使用可点击链接，但它没有反映在通过 php 邮件功能发送的电子邮件中，下面是我的代码

```
$url = "<html><a href='www.google.com'>Link</a></html>";

$message = "Hi test url ".$url." ";

$$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: Admin <test@ex.com> \r\n";
@mail('test1@ex.com',$subject,$message,$headers); 
```

我从电子邮件中获得的内容：

```
Hi test url <html><a href='www.google.com'>Link</a></html> ##NEW## 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:19:10.390

您似乎没有正确发送 HTML 邮件。通常我会推荐使用第三方 PHP 库，比如[SwiftMailer](http://swiftmailer.org/)来简化流程。

编辑：如果您仍希望使用 php 的 mail() 函数，则必须正确指定标头。[这篇文章](http://css-tricks.com/sending-nice-html-email-with-php/)可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T09:39:59.000

在 phpmailler 中使用 HTML：

```
$mail->isHTML(true) 
```

您查看文档

[phpMailler](https://github.com/PHPMailer/PHPMailer)

# delphi - 德尔福：TStringList.Contains？

> ID：12796684
> 
> 赞同：8
> 
> 时间：2012-10-09T09:18:09.080
> 
> 标签：delphi, find, compare, tstringlist

Delphi 2007 中是否有任何集成解决方案来检查 TStringList 是否**包含**某个值的一部分？

例如：

```
List.AddObject('This is a string', customStringObject1); 
List.AddObject('This is a mushroom', customStringObject2); 
List.AddObject('Random stuff', customStringObject3); 
```

搜索*“This is a”*应该会给我“true”，因为前两个元素部分包含这个。

到目前为止，我知道的唯一方法是`TStringList.find(string,integer)`，但这会执行完整的字符串比较，即仅搜索*This is a string*将返回 true。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T09:20:41.573

未集成，但您可以在 Text 属性上使用 Pos 函数：

```
Pos('This is a', List.Text) 
```

如果你希望它被集成，你可以为 TStrings 创建一个类助手。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T21:26:58.220

不直接，不。您将不得不：

1）调用属性，如果你有很多字符串`Pos()`，`Text`这效率不高。

2）手动遍历列表，调用`Pos()`每个`String`. 效率更高，但编码也更多。

3) 派生一个新类`TStringList`并覆盖其虚拟`CompareStrings()`方法以根据需要比较字符串（默认实现简单调用`AnsiCompareStr()`或`AnsiCompareText()`，具体取决于`CaseSensitive`属性）。如果找到匹配项，则返回 0。然后，您可以使用该`TStringList.Find()`方法，该方法在`CompareStrings()`内部调用（要小心，也是如此`TStringList.Sort()`，但如果您改为调用，则可以避免这种情况`TStringList.CustomSort()`）。

# java - 创建过程中返回空白对象的ID

> ID：12796685
> 
> 赞同：1
> 
> 时间：2012-10-09T09:18:15.127
> 
> 标签：java, mongodb

我想创建一个对象，获取它的“_id”，将其更改为字符串并将其作为参数传递给另一个对象。

想法是这样的，但它不起作用

```
BasicDBObject doc = new BasicDBObject();
a.insert(doc);
String id = doc.getString("$oid"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:23:40.747

你可以这样做：

```
ObjectId myId = new ObjectId(); //id is created here
DBObject myObject = new BasicDBObject();
myObject.put("_id", myId);

// Whether you save myObject to Mongo or not at this moment, you have its id
String myIdString = myId.toString();
// Now you can save myObject's id string in another object, and then later on,
// If you want to recreate the myId object you can do so:
ObjectId myIdRecreated = new ObjectId(myIdString); 
```

换句话说，实例化一个 ObjectId 并将其传递给 DBObject 的“_id”字段将意味着该 ObjectId 将是该 DBObject 的 id。这样，您无需将 DBObject 显式保存到 Mongo 即可获得其 id。

# android - XML 文件中的错误：正在中止构建。在安卓上

> ID：12796687
> 
> 赞同：3
> 
> 时间：2012-10-09T09:18:16.443
> 
> 标签：android, xml, building

我在构建 android 项目时遇到问题。

我构建了android项目，但出现错误。错误是：“XML 文件中的错误：正在中止构建。”我尝试了所有解决方案。

*   我删除了 main.out.xml。之后，我清理了项目。但它没有用
*   xml文件没有错误
*   我删除了 bin 文件夹。起初它起作用了。但是当我更改 xml 文件中的任何内容时，我得到同样的错误

我的 xml 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background">

    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Telefon numarası :"
        />     
    <EditText 
        android:id="@+id/txtPhoneNo"  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"        
        />
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"         
        android:text="Mesaj :"
        />     

    <EditText
        android:id="@+id/txtMessage"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:gravity="top"
        android:text="@string/txtMessage" />

    <Button
        android:id="@+id/btnSendSMS"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/btnSendSMS" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:24:48.110

确保您的 xml 文件名是小写字母并且不要使用数字。仅使用点，例如 main.xml。创建 xml 后，右键单击 >Source>Format。运行你的应用程序祝你好运。

# c# - 填充属性 wpf - 仅向右填充

> ID：12796689
> 
> 赞同：0
> 
> 时间：2012-10-09T09:18:27.580
> 
> 标签：c#, wpf, wpf-controls

我正在尝试将填充属性用于按钮内容，我希望填充在右侧（右侧 10px）但是当我在我的 xaml 中使用填充属性时，如下所示：

```
Padding="0,0,10,0" 
```

文本位于按钮的左侧（靠近左边框）。

我怎样才能向右填充？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:21:47.737

```
<Button ... Padding="0 0 10 0" HorizontalContentAlignment="Right" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:20:05.687

这是正确的行为。填充在您的内容和容器之间放置空间。

数字顺时针方向，从左侧开始。

如果您想看到靠近右边框的文本，请使用`Padding="10,0,0,0"`

# interface - Json.net反序列化接口，具体类使用一个JsonConverter

> ID：12796691
> 
> 赞同：1
> 
> 时间：2012-10-09T09:18:37.723
> 
> 标签：interface, json.net, deserialization, converter

我的问题是，当转换器应用于接口的实现并且属性类型是接口时，json.net 反序列化过程似乎没有调用我的 JsonConverter。我使用 TypeNameHandling = TypeNameHandling.Objects 将 $type 添加到 json 中。我在序列化和反序列化时都这样做。当我有一个接口实现的属性时，会正确调用类的转换器。但是当我有接口类型的属性时，不会调用具体类的转换器。

当我反序列化此类时，我的 JsonDataBagCreationConverter 将由 RealTelephone 调用，但不会由 Telephone 调用，因为这是一个接口。即使它们都使用正确的 $type 序列化。这导致 RealTelephone 的 .Data 被填充，而 Telephones .Data 为空。

```
[JsonConverter(typeof(JsonDataBagCreationConverter<ContainerForITelephone>))]
public class ContainerForITelephone : IDataBag
{
    private object _data;
    private DataBagTypeEnum _dataBagTypeEnum;
    public ITelephone Telephone { get; set; }
    public Telephone RealTelephone { get; set; }

    public object Data
    {
        get { return _data; }
        set { _data = value; }
    }

    public DataBagTypeEnum DataBagType_Enum
    {
        get { return _dataBagTypeEnum; }
    }
} 
```

不会为 Telephone 属性调用此 jsonconverter。但它适用于RealTelephone。

```
public class JsonDataBagCreationConverter<T> : JsonConverter where T : IDataBag, new()
{       
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {           
        if (reader.TokenType != JsonToken.Null) 
        {
            var jsonObject = JObject.Load(reader);
            var target = Create(objectType, jsonObject);
            serializer.Populate(jsonObject.CreateReader(), target); 
            ((IDataBag)target).Data = jsonObject.ToString(); 
            return target;
        }
        return null;
    } 
```

}

```
[JsonConverter(typeof(JsonDataBagCreationConverter<Telephone>))]
public class Telephone : ITelephone
{
    public string Name { get; set; }
    public string AreaCode { get; set; }
    public string Number { get; set; }
    public SubPhone SubPhone { get; set; }

    public object Data { get; set; }
    public DataBagTypeEnum DataBagType_Enum { get; set; }
} 
```

我期待着您的回音，谢谢

简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:34:27.700

解决了：

```
public class JsonDataBagCreationConverter<T> : JsonConverter where T:IDataBag 
{

//, new() prevented us from using interfaces. Activator.CreateInstance did the trick in Create

//Used when the object decorated with  [JsonConverter(typeof(JsonDataBagCreationConverter<xxxx>))] is de-serialized
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
{
var  jsonObject = JObject.Load(reader);

        if (objectType.IsInterface)
        {
            // Interfaces cannot be instantiated but must be converted to their "real" implemented type
            // Because we serialize with settings.TypeNameHandling = TypeNameHandling.Objects; 
            // A $type property is added to the json by the deserializer.
            string type = jsonObject["$type"].ToString();
            var typesAsArray = type.Split(',');
            var wrappedTarget = Activator.CreateInstance(typesAsArray[1], typesAsArray[0]);
            var realTarget = wrappedTarget.Unwrap() as IDataBag; 
            serializer.Populate(jsonObject.CreateReader(), realTarget); // Will call this function recursively for any objects that have JsonDataBagCreationConverter as attribute
            ((IDataBag)realTarget).Data = jsonObject.ToString(); // This is where custom data is stored in databag
            return realTarget; 
        }

        // Non interface
        var target = Create(objectType, jsonObject);
        serializer.Populate(jsonObject.CreateReader(), target); // Will call this function recursively for any objects that have JsonDataBagCreationConverter as attribute
        ((IDataBag)target).Data = jsonObject.ToString(); // This is where custom data is stored in databag
        return target;

}

public override bool CanRead
{
    get
    {
        return true; 
    }
}

public override bool CanWrite
{
    get
    {
        return false; 
    }
}

public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
{
    throw new Exception("WriteJson not implemented");
}

protected IDataBag Create(Type objectType, JObject jsonObject)
{
    var aa = Activator.CreateInstance(objectType);
    return aa as IDataBag;
    // return new T(); // this demands ,new() on the class and then it will not work with interfaces
}

public override bool CanConvert(Type objectType)
{
    return typeof(T).IsAssignableFrom(objectType);
} 
```

}

# ruby - 学习ruby，这些代码片段是什么意思？

> ID：12796692
> 
> 赞同：2
> 
> 时间：2012-10-09T09:18:42.137
> 
> 标签：ruby

```
def winner(p1, p2)
  wins = {rock: :scissors, scissors: :paper, paper: :rock}
  {true => p1, false => p2}[wins[p1] == p2]
end 
```

来自这个问题：[HW impossibility?：“在 ruby​​ 中创建一个石头剪刀布程序而不使用条件”](https://stackoverflow.com/questions/10923486/hw-impossibility-create-a-rock-paper-scissors-program-in-ruby-without-using-c)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T09:33:50.570

我承认，对于新手程序员来说，这不是最易读的代码。我重写了它，提取了一些变量并添加了注释。希望你现在能更好地理解它。

```
def winner(p1, p2)
  # rules of dominance, who wins over who
  wins = {
    rock: :scissors, 
    scissors: :paper, 
    paper: :rock
  }

  # this hash is here to bypass restriction on using conditional operators
  # without it, the code would probably look like 
  #   if condition
  #     p1
  #   else
  #     p2
  #   end
  answers = {
    true => p1, 
    false => p2
  }

  # given the choice of first player, which element can he beat?
  element_dominated_by_first_player = wins[p1]

  # did the second player select the element that first player can beat?
  did_player_one_win = element_dominated_by_first_player == p2

  # pick a winner from our answers hash
  answers[did_player_one_win]
end

winner(:rock, :scissors) # => :rock
winner(:rock, :paper) # => :paper
winner(:scissors, :paper) # => :scissors 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:36:34.647

如您所见，这是一个剪刀石头布游戏。`def`关键字开始一个方法定义。并且`end`意味着方法的结束。

方法主体的第一行`wins = {rock: :scissors, scissors: :paper, paper: :rock}`定义了一个名为`wins`. 这是 ruby​​ 中的语法糖。您也可以将此行写入`wins = { :rock => :scissors, :scissors => :paper, :paper => :rock}`.

以 a 开头的名称`:`在 ruby​​ 中称为 Symbol。Symbol 对象表示 Ruby 解释器中的常量名称和一些字符串。

第二行的第一部分`{true => p1, false => p2}`也是一个哈希。并且`wins[p1] == p2`可以根据第一行计算出的值。例如，如果您使用`winner(:paper, :rock)`, `wins[p1]`is `:rock`now 和`wins[p1] == p2`should be调用此方法`true`。`{true => p1, false => p2}[true]`也是如此`p1`。

ruby 中方法的返回值是最后一个表达式的值。

# mysql - Mysql对字符串数据的列排序，带有`()'"`之类的字符

> ID：12796698
> 
> 赞同：2
> 
> 时间：2012-10-09T09:18:53.277
> 
> 标签：mysql, sql, sorting

我有一个表，它包含 varchar 数据。该列中存在的数据是这样的。

```
"bcd"
cde
abcd
'xxx'
(zzz) 
```

现在我想按字母顺序排序。我试过这个查询

```
select my_col from tbl_user order by ltrim(REPLACE(my_col,'"', '')) ASC 
```

它的输出如下：

```
'xxx'
(zzz)
abcd
"bcd"
cde 
```

但我想要的输出是，意味着在排序时必须按照字母顺序排序，无论是否`"`存在。

```
abcd
"bcd"
cde
'xxx'
(zzz) 
```

我怎样才能做到这一点？？？。有任何想法吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:22:15.620

多试`REPLACE`

```
ORDER BY REPLACE(REPLACE(REPLACE(REPLACE(my_col,'"', ''), '(',''), ')', ''), '''','') ASC 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d042f8/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:28:57.927

尝试这个：

```
SELECT id
FROM   tblNum
ORDER  BY REPLACE(id, SUBSTRING(id, PATINDEX('%[^a-zA-Z]%', id), 1), '') 
```

# .net - 在实体框架中选择所需的包含表

> ID：12796700
> 
> 赞同：0
> 
> 时间：2012-10-09T09:18:54.743
> 
> 标签：.net, linq, entity-framework

我在规范化数据库上使用 EF。

对于我的 Offers 实体，我有以下表结构：

## 优惠

加上：

## 邮政类型

Offers_SitePost 或 Offers_CommunityPost

加上：

## 报价类型

Offers_VoucherCode or Offers_Deal or Offers_Sale

因此，完整的报价将由 Offers 中的明确条目加上 PostType 表之一中的条目和 OfferType 表之一中的条目组成。

我从 offer 表中知道，其他哪些表应该包含数据。我正在使用 IsSitePost 之类的属性来执行此操作。

我正在尝试找出获取必要数据的最佳方法，包括单个报价和报价列表。显然我可以包括所有表格，但我怀疑这是否会是最有效的。

这是我正在为单一报价处理的代码：

```
 public static Offer GetById2(int ID)
    {
        ID.ThrowDefault("ID");

        var r = new CrudRepo<Offer>(Local.Items.Uow.Context);

        var offer = r.Find(o => o.OfferId == ID);

        // if is site post Include("SiteOffers")
        // else is community post Include("CommunityOffers") etc

        return offer.SingleOrDefault();
    } 
```

任何人都可以就实现这一目标的最佳方式提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:29:18.533

我建议您向 DB 查询您正在寻找的报价

看这个话题： [Entity Framework 4: Selecting Single Record](https://stackoverflow.com/questions/9016178/entity-framework-4-selecting-single-record)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:13:53.807

您需要将 .Include 放在查找之前，因为 include 扩展了基础表源，而不是对象类型。这还取决于您如何实现 CrudRepo 以及它返回的内容以了解您的存储库是否知道如何处理 Include 本身。

```
public static Offer GetById2(int ID)
 {
     ID.ThrowDefault("ID");
      var r = new CrudRepo<Offer>(Local.Items.Uow.Context);
      if (IsSitePost)
         r = r.Include("SiteOffers");
      else
         r = r.Include("CommunityOffers");
      var offer = r.Find(o => o.OfferId == ID);
      return offer.SingleOrDefault();
 } 
```

# c# - 旋转矢量

> ID：12796701
> 
> 赞同：0
> 
> 时间：2012-10-09T09:18:56.817
> 
> 标签：c#, vector, xna, camera, rotation

我想做一个简单的矢量旋转。

目标是引导我的第一人称相机，该相机当前指向具有方向 d 的目标 t，指向具有新方向 d1 的新目标 t1。

d 和 d1 之间的过渡应该是平滑的运动。

和

```
public void FlyLookTo(Vector3 target) {

        _flyTargetDirection = target - _cameraPosition;
        _flyTargetDirection.Normalize();

        _rotation = new Matrix();

        _rotationAxis = Vector3.Cross(Direction, _flyTargetDirection);

         // This bool tells the Update()-method to trigger the changeDirection() method.
        _isLooking = true;
    } 
```

我正在使用其新参数和

```
// this method gets executed by the Update()-method if the isLooking flag is up.
private void _changeDirection() {

        dist = Vector3.Distance(Direction, _flyTargetDirection);

        // check whether we have reached the desired direction
        if (dist >= 0.00001f) {

            _rotationAxis = Vector3.Cross(Direction, _flyTargetDirection);
            _rotation = Matrix.CreateFromAxisAngle(_rotationAxis, MathHelper.ToRadians(_flyViewingSpeed - Math.ToRadians(rotationSpeed)));

            // update the cameras direction.
            Direction = Vector3.TransformNormal(Direction, _rotation);
        } else {

            _onDirectionReached();
            _isLooking = false;
        }
    } 
```

我正在执行实际的动作。

**我的问题：**实际的运动效果很好，但是运动的速度越慢，当前方向越接近所需的方向，如果连续执行几次，这将是一个非常不愉快的运动。

如何使相机从 d 方向移动到 d1 方向，其移动速度相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:12:58.110

你的代码看起来很可靠。_flyViewingSpeed 或 rotationSpeed 是否会发生变化？

另一种方法是使用 Vector3.Lerp() 它将完全按照您的要求进行。但是请注意，您需要使用初始开始和目标方向 - 而不是当前方向 - 否则您将获得不同的速度变化。

另外，我不会使用距离（通常用于点），而是使用 Vector3.Dot() ，这有点像方向的距离。它也应该比 Distance() 更快。

希望这可以帮助。

# php - Yii activeCheckBoxList

> ID：12796702
> 
> 赞同：2
> 
> 时间：2012-10-09T09:18:58.247
> 
> 标签：php, activerecord, yii

我有一个奇怪的问题

在 AR 模型中，Gift i 与类别有很多关系

```
 'categories'=>array(self::MANY_MANY, 'GiftCategory',
                        'tbl_category_gift(gift_id, category_id)'), 
```

当我调用 $gift->categories 它返回活动记录对象时，在数据库中我看到值被正确存储

但是当我写

```
 <? echo $form->checkBoxList($model, "categories", GiftCategory::listData()); ?> 
```

在我的复选框列表中，如果模型有类别，则只选择 1 个值，我不明白是它，请帮助 :)

问题：Yii activeCheckBoxList 仅显示 1 个已选中（仅第一个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:23:56.047

它不起作用，因为用[Yii 创建者强](http://www.yiiframework.com/forum/index.php/topic/3489-php-error-object-of-class-group-could-not-be-converted-to-int-when-i-try-to-use-chtml/page__view__findpost__p__18966)的话说：

> ...在 activeListBox() 中，第二个参数应该是属性名称，而不是关系名称。在您的情况下，您可能需要声明一个新属性来存储选择。

我相信同样的事情也适用于 activeCheckBoxList。

我解决这个问题的方法如下（这篇博文很有帮助[Retrieving selected checkbox items in yii](http://www.tipstank.com/2010/07/19/retrieving-selected-checkbox-items-in-yii/)）

**为您的关系添加索引选项**

```
'categories' => array(self::MANY_MANY, 
    'Category', 'post_category(post_id, category_id)','index'=>'id'), 
```

**向模型添加属性**

```
public $selectedCategoryIds 
```

**在 afterFind 中填充此属性**

```
public function afterFind()
{
    parent::afterFind();
    $this->selectedCategoryIds = array_keys($this->categories);
} 
```

**在您的视图中使用这个新的“属性**

```
<? echo $form->checkBoxList($model, "selectedCategoryIds", GiftCategory::listData()); ?> 
```

为了正确处理更新此数据，请参阅 Larry Ullman 的文章[在 Yii 表单中处理相关模型](http://www.larryullman.com/2010/08/10/handling-related-models-in-yii-forms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T06:00:34.207

```
<?php
echo CHtml::activeCheckBoxList($model, 'categories',
        CHtml::listData(GiftCategory::model()->findAll(), 'id', 'title'),
        array('checkAll' => ' Select All'));
?> 
```

# c# - 反序列化嵌套和非结构化 BsonDocument（mongodb c# 驱动程序）

> ID：12796705
> 
> 赞同：2
> 
> 时间：2012-10-09T09:19:07.060
> 
> 标签：c#, mongodb, mongodb-.net-driver

假设这是 2 个 Bson 文档的集合

```
{
    "_id": "...",
    "name": "Test1",
    "sub": {
        "street": "134 Fake Street",
        "city": "NoWhere"
    }
},
{
    "_id": "...",
    "name": "Test2",
    "sub": {
        "height": "10",
        "width": "20",
        "sub2": {
            "type": "something"
        }
    }
} 
```

其中第一层是结构化类，但子层可以是完全非结构化的，并且可以有进一步嵌套的文档数层深。

如何将此文档反序列化为 C# 类？我见过的所有样本都假设嵌套文档中有一些结构。

下面的类给出了一个错误：

```
public class Report
{
    [BsonId]
    public ObjectId _id { get; set; }

    public string name { get; set; }

    public BsonDocument sub { get; set; }
} 
```

> 不应使用数据协定名称“...”键入“MongoDB.Bson.BsonString”。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

**编辑**

我正在尝试做的可能完全是胡说八道。仅使用一个 BsonDocument 并在没有结构化类的情况下手动处理所有内容是否更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:55:09.017

我不认为您收到的错误消息来自 C# 驱动程序。你能提供一个堆栈跟踪吗？

我试图重现您的问题，但它适用于我的测试程序。看：

[http://pastie.org/5032283](http://pastie.org/5032283)

上面的测试程序插入的文档是这样的：

```
> db.test.find()
{ "_id" : ObjectId("5075fc6ee447ad1354c1f018"), "name" : "John Doe", "sub" : { "x" : 1, "y" : 2 } }
> 
```

# c# - C#：如何编写一个根据内容更改文件夹图标的服务？

> ID：12796709
> 
> 赞同：-2
> 
> 时间：2012-10-09T09:19:11.340
> 
> 标签：c#, .net, directory, filesystemwatcher

我想制作一个作为服务运行的程序，并根据其文件夹内容更改文件夹图标，就像 svn 一样。如果名称为 example.someextension ，我还想更改文件夹的图标和行为。

我如何以编程方式实现这一点以及哪些命名空间或库可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:35:30.270

如果您谈论的是文件系统文件夹，则可以使用 ini 文件设置文件夹的图标。

*让您的服务将名为 Desktop.ini*的（隐藏和系统）文件写入所需的文件夹，以及您希望该文件夹显示的图标的隐藏副本：

您的文件应包含以下内容：

```
[.ShellClassInfo]
IconFile=myFolderIcon.ico
IconIndex=0
ConfirmFileOp=0
OriginalIcon=% 
```

Art-Icons 之类的程序使用此机制来允许自定义文件夹。我注意到的唯一缺点是文件夹不一定会立即更新以使用新图标。有时您必须重置图标缓存以强制它显示！

示例：（您的文件夹已经包含图标“folderA.ico”和“folderB.ico”的隐藏副本）：

```
string[] lines = new string[] { "[.ShellClassInfo]", "IconFile=folderA.ico", "IconIndex=0", "ConfirmFileOp=0", "OriginalIcon=%" };

if(!stimulus)
{
   lines[1] = "IconFile=folderB.ico";
}

File.WriteAllLines("Disk:\\MyFolder\\Desktop.ini", lines); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:49:38.590

您可以尝试使用：

*   [DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx) , [Directory](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx) 获取目录名称、子目录、目录中的文件。

*   [File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx) , [FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx) 获取文件名、内容、扩展名。

*   学习如何创建 Windows 服务的[教程。](http://msdn.microsoft.com/en-us/library/aa984464(v=vs.71).aspx)

*   [这个问题](https://stackoverflow.com/questions/9277492/folder-icon-change) 改变文件夹图标。

祝你好运

# android - Activitymanager 杀死进程后启动 proc 进行活动

> ID：12796716
> 
> 赞同：2
> 
> 时间：2012-10-09T09:19:33.947
> 
> 标签：android

在关闭按钮上，我完成所有活动，然后终止进程，但在此之后我可以在日志中看到：

Activitymanager Start proc for 活动（我完成的活动之一正在开始）

如何避免重新启动过程？

```
ActivityManager(1220): Process com.app.test (pid 3569) has died.

for several activities:
WindowManager(1220): WIN DEATH: Window{408d5498 com.app.test/Activity1 pa
used=true}

ActivityManager(1220): Start proc com.app.test for activity com.app.test/Activity1: 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-09T09:37:36.047

尝试`android.os.Process.killProcess(android.os.Process.myPid());`在关闭按钮上杀死你的进程

# plugins - fortran 中的插件接口

> ID：12796717
> 
> 赞同：0
> 
> 时间：2012-10-09T09:19:38.330
> 
> 标签：plugins, hook, fortran

考虑到实现语言，这是一个奇怪的问题，但仍然如此。

有一个用 Fortran 95 编写的程序。我想使用某种插件和钩子来定制它的某些部分。但是有一个限制：这必须完全在 Fortran 中完成，不能使用 C 或任何其他语言，最好（但不是严格要求）仍然是 Fortran 95，没有 2003 功能。认为扩展模块类似于

```
module some_extension
  use main_module, only: register_hook
  use public_interface_module

  subroutine init()
    call register_hook(my_hook)
  end subroutine init

  subroutine my_hook()
    ...
  end subroutine my_hook
end module some_extension 
```

我不认为我是第一个想要在 Fortran 中制作可扩展程序的人。做这些事情是否有普遍的做法？从字面上看，这种界面并不是必需的，而是在精神上接近的东西。

# c - sscanf：读入一个字符的值

> ID：12796719
> 
> 赞同：0
> 
> 时间：2012-10-09T09:19:47.560
> 
> 标签：c

有没有办法使用 sscanf`%c`读取 a 的值`char`？我将如何为特定字符输入 unicode 或 ascii 的转义序列？

```
sscanf("%c",chr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:23:39.887

您可以从输入中读取一个字符

```
 char chr;
 scanf ("%c", &chr); 
```

读取转义序列可以是特定于操作系统的。在大多数情况下，您必须告诉终端驱动程序不要将转义序列处理为其他操作（如输入行编辑），而是传递原始字符。一旦设置好，您就可以对每个字符重复上述顺序。

# java - 无法从java中的输入文件中读取int

> ID：12796721
> 
> 赞同：1
> 
> 时间：2012-10-09T09:19:54.210
> 
> 标签：java, file, java.util.scanner

我有一个程序可以读取具有 4000`1`或`0`'s 的输入文件，每行一个。

该程序编译正常，但运行时出现以下错误：

```
ˇ˛0Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Scanner.java:840)
at java.util.Scanner.next(Scanner.java:1461)
at java.util.Scanner.nextInt(Scanner.java:2091)
at java.util.Scanner.nextInt(Scanner.java:2050)
at Project1.main(Project1.java:27) 
```

出于某种原因，当我查看文本文件时，第一行是 a `0`，当程序读取它得到的第一行时，什么都没有`ˇ˛0`。我也尝试过使用缓冲阅读器，但没有运气。任何人都可以提供一些意见。谢谢！

这是我的代码：

```
import java.io.*;
import java.util.Random;
import java.util.Scanner;

public class Project1 {

    public static void main(String[] args) {
        int [] stream = new int[4000];
        int [] received = new int[4000];
        int corrupt = 0;
        float standardDev = 0;
        float [] averages = new float[4000];
        float averagev = 0;
        float voltage = 0;
        try {
            Scanner st = new Scanner(new File("CS 380 bit feed.txt"));
            System.out.print(st.next());
            FileWriter outFile = new FileWriter("output");
            PrintWriter out = new PrintWriter(outFile);
            int i=0;
            Random rand = new Random();

            stream[i]=st.nextInt();
            if (stream[i] == 0)
                voltage = (float) (2.49 * rand.nextFloat());
            else
                voltage = (float) ((2.5 * rand.nextFloat()) + 2.5);
            if (voltage < 2.5)
                received[i] = 0;
            else
                received[i] = 1;
            averagev = voltage;
            averages[i] = voltage;
            if (stream[i] != received[i])
                corrupt++;
            i++;

            while (i < 4000) {
                stream[i]=st.nextInt();
                if (stream[i] == 0)
                    voltage = (float) 2.49 * rand.nextFloat();
                else
                    voltage = (float) ((2.5 * rand.nextFloat()) + 2.5);
                averagev = ((averagev * i) + voltage)/(i+1);
                if (voltage <= averagev)
                    received[i] = 0;
                else
                    received[i] = 1;
                if (stream[i] != received[i])
                    corrupt++;
                i++;
            }
            averagev = 0;
            int j = 0;
            while (j < 4000) {
                for (int k = 0; k<8; k++) {
                    out.print(received[j]);
                    averagev = averages[i] + averagev;
                    j++;
                }
                out.println("    " + averages[j]);
            }

        }
        catch (FileNotFoundException e) {
              e.printStackTrace();
        } 
        catch (IOException e) {
              e.printStackTrace();
        }
        averagev = averagev / 4000;
        for (int k = 0; k<4000; k++) 
            standardDev = ((averagev - averages[k])*(averagev - averages[k])) + standardDev;
        standardDev = standardDev/4000;

        System.out.println("Errors: " + corrupt);
        System.out.println("Percentage Corrupt: " + corrupt / 4000);
        System.out.println("Average of Average Voltages: " + averagev);
        System.out.println("Standard Deviation: " + standardDev);        
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:22:17.760

在十六进制编辑器中查看文件。它可能已损坏或开头有字节顺序标记，不一定会出现在文本编辑器中。

# ajax - 解析 JSON 时添加额外数据

> ID：12796722
> 
> 赞同：1
> 
> 时间：2012-10-09T09:19:56.320
> 
> 标签：ajax, json, parsing

我遇到了一个非常奇怪的问题。我有一些从 PHP 页面传回的信息，我使用 json_encode 作为 JSON 数据发回。一旦我在调用页面上收到它，响应就是正确的（从萤火虫中查看响应）。

如果我在 $.ajax 函数中接收到数据后 console.log 有一个添加的变量 (y0)，它在响应中不存在。dataType 设置为 JSON，我的 PHP 页面确实设置了 JSON 标头类型。问题似乎与 ajax 解析数据有关。

下面是我的 ajax 以及响应和记录的数据：

//AJAX方法

```
$.ajax({
        url : 'includes/build_graphs.php',
        data : 'file='+href,
        type : 'post',
        dataType : 'json',
        beforeSend : function(){},
        success : function(data){
            console.log(data);

            var series_data = [];
            for(var i=0; i<data.length; i++){
                series_data.push({
                    name: data[i].name+'[VPD]',
                    data: data[i].vpd,
                    color: palette.color()

                });
            }//for
            console.log(series_data);
            create_graph(series_data);
        }
    }); 
```

//来自 PHP 的 Firebug 响应

```
[{"name":"Project 1","vpd":[{"x":1348696800,"y":0},{"x":1348783200,"y":0},{"x":1348869600,"y":16},{"x":1348956000,"y":1},{"x":1349042400,"y":1},{"x":1349128800,"y":20},{"x":1349215200,"y":1},{"x":1349301600,"y":17},{"x":1349388000,"y":10},{"x":1349474400,"y":23},{"x":1349560800,"y":0},{"x":1349647200,"y":58}]},{"name":"Project 2","vpd":[{"x":1348696800,"y":7},{"x":1348783200,"y":0},{"x":1348869600,"y":7},{"x":1348956000,"y":0},{"x":1349042400,"y":0},{"x":1349128800,"y":12},{"x":1349215200,"y":2},{"x":1349301600,"y":17},{"x":1349388000,"y":11},{"x":1349474400,"y":10},{"x":1349560800,"y":0},{"x":1349647200,"y":20}]},{"name":"Project 3","vpd":[{"x":1348696800,"y":3},{"x":1348783200,"y":18},{"x":1348869600,"y":23},{"x":1348956000,"y":1},{"x":1349042400,"y":1},{"x":1349128800,"y":11},{"x":1349215200,"y":17},{"x":1349301600,"y":50},{"x":1349388000,"y":22},{"x":1349474400,"y":39},{"x":1349560800,"y":0},{"x":1349647200,"y":34}]},{"name":"Project 4","vpd":[{"x":1348696800,"y":0},{"x":1348783200,"y":66},{"x":1348869600,"y":13},{"x":1348956000,"y":0},{"x":1349042400,"y":0},{"x":1349128800,"y":3},{"x":1349215200,"y":3},{"x":1349301600,"y":9},{"x":1349388000,"y":71},{"x":1349474400,"y":48},{"x":1349560800,"y":0},{"x":1349647200,"y":80}]},{"name":"Project 5","vpd":[{"x":1348696800,"y":6},{"x":1348783200,"y":2},{"x":1348869600,"y":9},{"x":1348956000,"y":0},{"x":1349042400,"y":0},{"x":1349128800,"y":2},{"x":1349215200,"y":2},{"x":1349301600,"y":20},{"x":1349388000,"y":4},{"x":1349474400,"y":9},{"x":1349560800,"y":0},{"x":1349647200,"y":22}]},{"name":"Project 6","vpd":[{"x":1348696800,"y":0},{"x":1348783200,"y":0},{"x":1348869600,"y":0},{"x":1348956000,"y":0},{"x":1349042400,"y":0},{"x":1349128800,"y":0},{"x":1349215200,"y":0},{"x":1349301600,"y":0},{"x":1349388000,"y":0},{"x":1349474400,"y":0},{"x":1349560800,"y":0},{"x":1349647200,"y":21}]},{"name":"Project 7","vpd":[{"x":1348696800,"y":0},{"x":1348783200,"y":0},{"x":1348869600,"y":0},{"x":1348956000,"y":0},{"x":1349042400,"y":0},{"x":1349128800,"y":17},{"x":1349215200,"y":2},{"x":1349301600,"y":48},{"x":1349388000,"y":14},{"x":1349474400,"y":32},{"x":1349560800,"y":0},{"x":1349647200,"y":35}]},{"name":"Project 8","vpd":[{"x":1348696800,"y":13},{"x":1348783200,"y":0},{"x":1348869600,"y":23},{"x":1348956000,"y":0},{"x":1349042400,"y":1},{"x":1349128800,"y":15},{"x":1349215200,"y":2},{"x":1349301600,"y":27},{"x":1349388000,"y":14},{"x":1349474400,"y":32},{"x":1349560800,"y":0},{"x":1349647200,"y":72}]}] 
```

//解析后的 JSON 中的一个条目（不幸的是，由于我无法发布图像，从 firebug 中复制粘贴）//我注意到条目 9 发生了一些奇怪的事情，但这可能是 firebug，或者确实是问题所在

```
 name="Project 1",
vpd=[
    Object{
        x=1348696800,
        y=0,
        y0=0
    },
    Object{
        x=1348783200,
        y=0,
        y0=0
    },
    Object{
        x=1348869600,
        y=16,
        y0=0
    },
    9more...
]
 0 = Object{
    x=1348696800,
    y=0,
    y0=0
}
1 = Object{
    x=1348783200,
    y=0,
    y0=0
}
2 = Object{
    x=1348869600,
    y=16,
    y0=0
}
3 = Object{
    x=1348956000,
    y=1,
    y0=0
}
4 = Object{
    x=1349042400,
    y=1,
    y0=0
}
5 = Object{
    x=1349128800,
    y=20,
    y0=0
}
6 = Object{
    x=1349215200,
    y=1,
    y0=0
}
7 = Object{
    x=1349301600,
    y=17,
    y0=0
}
8 = Object{
    x=1349388000,
    y=10,
    y0=0
}
9 = "this.9"
10 = Object{
    x=1349560800,
    y=0,
    y0=0
}
11 = Object{
    x=1349647200,
    y=58,
    y0=0
} 
```

提前致谢。

# android - Handler Thread的Android用途

> ID：12796723
> 
> 赞同：0
> 
> 时间：2012-10-09T09:20:02.637
> 
> 标签：android, multithreading

我只是想知道为什么 Handler 必须采用 Runnable 的实例？毕竟，处理程序的目的是将工作从一个线程放入另一个线程。使用第三个线程的目的是什么，一个 Runnable 来完成这个？

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:26:03.390

我想我理解你的困惑：你认为一个`Runnable`对象本身就是一个单独的`Thread`. 它不是。简单来说，它只是一个对象，通过实现`Runnable`接口，`Thread`你将它传递给知道它可以通过调用它来执行其中的代码`.run()`。

当您将`Runnable`对象发送到 时`Handler`，即在中`Runnable`执行`Handler`。`Thread`

简单来说，这样解释可能就足够了：如果你想为 a`Handler`提供一些自己做的工作`Thread`，那么你必须在一个对象中提供那段代码。现在，您提供给的对象`Handler`必须实现某种，`interface`以便`Handler`知道在该对象中调用什么方法以使其完成所需的工作。基本来说，这就是接口的作用：实现该方法`Runnable`的对象是强制的。`Runnable``run()`

# oracle - 错误 ORA-00933: SQL 命令未正确结束

> ID：12796731
> 
> 赞同：0
> 
> 时间：2012-10-09T09:20:18.427
> 
> 标签：oracle, plsql

```
PROCEDURE PR_TRIAL_BAL_BULKWITHOUTCUR IS

VAR_OF_TYP_TBL TYP_TBL;

BEGIN
SELECT * BULK COLLECT INTO VAR_OF_TYP_TBL 
  FROM (SELECT NAME, SUM(CREDIT) AS CREDIT, SUM(DEBIT) AS DEBIT
          FROM (SELECT (SELECT GL_NAME
                          FROM QM_GL
                         WHERE QM_GL.GL_ID = QT_ACCOUNTING.GL_ID) AS NAME,
                       DECODE(QT_ACCOUNTING.TRANS_TYPE,
                              'CR',
                              (QT_ACCOUNTING.TRANS_AMOUNT),
                              0.00) AS CREDIT,
                       DECODE(QT_ACCOUNTING.TRANS_TYPE,
                              'DR',
                              (QT_ACCOUNTING.TRANS_AMOUNT),
                              0.00) AS DEBIT

                  FROM QT_ACCOUNTING, QM_ACCOUNTING_PERIOD

                 WHERE QT_ACCOUNTING.VALUE_DATE BETWEEN
                       QM_ACCOUNTING_PERIOD.PERIODFROM AND
                       QM_ACCOUNTING_PERIOD.PERIODTO
                   AND QM_ACCOUNTING_PERIOD.STATUS = 'O')
         GROUP BY NAME)
         );

FOR I IN 1 .. VAR_OF_TYP_TBL.COUNT LOOP

  IF (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT) > 0 THEN
    INSERT INTO TBL_TRIAL_BALANCE_REPORT
    VALUES
      (VAR_OF_TYP_TBL(I).NAME,
       (VAR_OF_TYP_TBL(I).CREDIT - VAR_OF_TYP_TBL(I).DEBIT),
       0);
  END IF;
  IF (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT) > 0 THEN
    INSERT INTO TBL_TRIAL_BALANCE_REPORT
    VALUES
      (VAR_OF_TYP_TBL(I).NAME,
       0,
       (VAR_OF_TYP_TBL(I).DEBIT - VAR_OF_TYP_TBL(I).CREDIT));
  END IF;

END LOOP;
VAR_OF_TYP_TBL.DELETE;

EXCEPTION
  WHEN OTHERS THEN
  DBMS_OUTPUT.PUT_LINE(SQLERRM);
  BEGIN
    VAR_OF_TYP_TBL.DELETE;
  EXCEPTION
    WHEN OTHERS THEN
      NULL;
  END;
END; 
```

谁能帮助我，上面代码中的以下错误在哪里以及如何将其删除？

*   ORA-00933: SQL 命令未正确结束
*   错误：PL/SQL：忽略 SQL 语句

（错误仅在选择查询中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:38:26.343

```
 SELECT   *
      BULK   COLLECT
      INTO   VAR_OF_TYP_TBL
      FROM   (  SELECT   NAME, SUM (CREDIT) AS CREDIT, SUM (DEBIT) AS DEBIT
                  FROM   (SELECT   (SELECT   GL_NAME
                                      FROM   QM_GL
                                     WHERE   QM_GL.GL_ID = QT_ACCOUNTING.GL_ID)
                                      AS NAME,
                                   DECODE (QT_ACCOUNTING.TRANS_TYPE,
                                           'CR', (QT_ACCOUNTING.TRANS_AMOUNT),
                                           0.00)
                                      AS CREDIT,
                                   DECODE (QT_ACCOUNTING.TRANS_TYPE,
                                           'DR', (QT_ACCOUNTING.TRANS_AMOUNT),
                                           0.00)
                                      AS DEBIT
                            FROM   QT_ACCOUNTING, QM_ACCOUNTING_PERIOD
                           WHERE   QT_ACCOUNTING.VALUE_DATE BETWEEN QM_ACCOUNTING_PERIOD.PERIODFROM
                                                                AND  QM_ACCOUNTING_PERIOD.PERIODTO
                                   AND QM_ACCOUNTING_PERIOD.STATUS = 'O')
              GROUP BY   NAME);
          -- );       remove this from your code 
```

# node.js - 'npm install bone' 安装旧版本的下划线

> ID：12796734
> 
> 赞同：2
> 
> 时间：2012-10-09T09:20:22.637
> 
> 标签：node.js, backbone.js, underscore.js

你能帮我解决 npm install 功能的一些神秘行为吗？'Npm install bone' 安装旧版本的下划线 (1.1.7) 而不是 1.4.2。问题是旧版本包含几个导致我的代码出现问题的错误。

bone 目录中的“npm install underscore”也是如此，但它会在该目录之外安装正确的版本。根据骨骼安装的官方规范（https://npmjs.org/package/bones），应该安装新版本。

任何想法如何克服这个问题？我可以做一个 git clone，但我试图避免这种情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:22:50.527

骨骼 package.json `"underscore": "~1.3.3",`在 repo 中有（不确定发布的版本有什么）

它只会进入最高的 1.3 版本，而不是 1.4，但由于你只看到 1.1，那么也许你需要运行`npm update`.

[https://github.com/developmentseed/bones/blob/master/package.json](https://github.com/developmentseed/bones/blob/master/package.json)

# git - 存储库子文件夹的 Git 标记

> ID：12796735
> 
> 赞同：12
> 
> 时间：2012-10-09T09:20:23.277
> 
> 标签：git, svn, git-svn, git-tag

我使用 Git 导入 SVN 存储库。然后我在存储库中创建了自己的项目作为子文件夹。

我将 SVN 存储库与 Git-SVN 一起使用。我的工作流程是：

1.  `git commit -am "message"`
2.  `git svn rebase`
3.  `git svn dcommit`.

现在我想用 标记我的项目`git tag -a RC1 -m 'Release Candidate 1'`，但我只希望我的项目获得标记。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-29T21:45:14.920

### TL;DR 版本

如果您知道树的 SHA-1，则可以标记特定目录（也称为树），但使用该标记做有用的事情并不经常完成且不容易。

### 长答案

Git 中的每个对象都有一个唯一的 SHA-1。最常见的是，SHA-1 指的是提交，但它们也可以指 Blob（文件内容）和树（目录结构和文件名/文件权限映射）。[您可以在Git Objects 文档](https://git-scm.com/book/en/v2/Git-Internals-Git-Objects)中了解它。

例如，假设我在存储库中的特定目录中。我可以运行`git ls-tree HEAD`以获取路径中的文件/目录列表以及它们的 SHA-1：

```
$git ls-tree HEAD
100644 blob ed76d466f5025ce88575770b07a65c49b281ca59    app.css
100644 blob ed58ee4a9be6f5b58e25e5b025b25e6d04549767    app.js
100644 blob e2bed82bd9554fdd89d982b37a8e0659fe82390a    controllers.js
040000 tree f888c44e16f7811ba69a245adf35c4303cb0d4e7    data
100644 blob d68aa862e4746fc9abd0132cc576a4df266b0a9d    directives.js
100644 blob df0ae0e7288617552b373d21f7796adb8fb0d1b6    index.html
040000 tree fa9c05b1bb45fb85821c7b1c27925b2618d646ac    partials
100644 blob 28e9eb6fe697cb5039d1cb093742e90b739ad6af    services.js 
```

然后我可以标记其中一棵树（比如说`data`上面的目录）：

```
$git tag data-1.0 f888c44e16f7811ba69a245adf35c4303cb0d4e7 
```

该标签现在是该 SHA-1 的别名，我可以在任何接受树的 SHA-1 的地方使用它：

```
$git ls-tree -rt data-1.0
100644 blob 6ab0a52a17d14cbc8e30c4bf8d060c4ff58ff971    file1.json
100644 blob e097e393fa72007b0c328d67b70ba1c571854db0    file2.json
040000 tree 39573c56941fdd2fc88747a96bf871550f4affb2    subfolder1
...    ...  ...                                         ... 
```

要取回原始 SHA-1：

```
$git rev-parse data-1.0
f888c44e16f7811ba69a245adf35c4303cb0d4e7 
```

这一切对你有什么好处？没有多少。但是，如果您愿意编写自己的脚本来重建树的内容，或者查找包含树的提交，那么它可能对您有用。（例如[，这个 SO 答案](https://stackoverflow.com/q/223678/3149036)可以适用于这样的目的）。

但就像其他人所说的那样，您可能会更轻松地使用与 Git 配合得更好的版本控制/标记模型，而不是尝试调整现有模型。正如 shikjohari 和其他人已经提到的，如果你想要项目中的项目，它们有自己的版本，请考虑使用[Git 子模块](https://git-scm.com/book/en/v2/Git-Tools-Submodules)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T12:48:16.577

你不能。

在 Git 中，设计上的标记始终适用于整个存储库（就像提交和分支一样）。这与 Subversion 不同，其中标签（只是一个副本）可以应用于子树。

顺便说一句：即使在 Subversion 中，通常也不鼓励标记子树，因为它很快就会变得混乱，只是标记了树的哪一部分。我知道的大多数来源（例如[带有 Subversion 的版本控制](http://svnbook.red-bean.com/)建议始终通过复制`trunk`.

关于你的问题：

通常，单独的项目应该获得单独的 Git 存储库。在这种情况下，“单独”通常意味着您可能希望单独分支/标记。

如果您不/不能这样做，最好的选择可能是使用一些标签前缀，并调用所有标签`myproj-1.0`等`myproj-1.1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T12:51:39.150

这在 Git 中是不可能的。Git 标签是指向特定提交的指针，而 Subversion 标签是 Subversion 存储库中任何文件夹的副本。在 Subversion 中标记单个文件夹的概念并没有很好地延续到 Git。

问题是您的初始设置与 Git 的分支模型不匹配。以 Git 友好的方式执行此操作的方法是为您的项目设置一个分支，然后在该分支上标记提交。

你有几个选择：

*   使用 . 在给定点标记整个存储库`git svn tag`。运行`git help svn`以获取有关使用此命令的说明。

*   使用常规 Subversion 命令标记目录。这不需要下载 Subversion 工作副本，因为您可以运行`svn copy {URL to your project on the repository} {URL to your tag directory}`，但您需要安装 Subversion。

*   在一个全新的目录中启动 Subversion 存储库的新 Git 克隆。将您的项目文件夹指定为中继 URL，而不是实际的中继。Git-svn 然后将该目录视为您的主分支，并允许您通过 Subversion 标记和复制它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T08:15:23.280

当我不得不将一个非常大的项目迁移到 Git 时，我发现自己遇到了类似的问题。我发现团队没有正确处理 SVN，并从他们想要的任何地方进行标记。所以有个别项目和文件夹的标签 - 这是非常不鼓励的。

如果你打算迁移到 Git，你应该保持它在 Git 中的工作方式并保持干净。我建议为经常更改的项目创建单独的存储库。如果您发现您的项目依赖于其他项目，您也可以使用子模块。

# c# - Request["http_cookie"] 给 OutlookSession={.....}?

> ID：12796739
> 
> 赞同：0
> 
> 时间：2012-10-09T09:20:35.103
> 
> 标签：c#, cookies

我将用户的值存储`Cookie`在`Request["http_cookie"]`我的数据库中。

但是我发现我的 cookie 的某些列是空的，而其他包含 cookie 作为 **OutlookSession={.....}** 但为什么呢？

**编辑** 也是`Request["http_user_agent"];` _`Microsoft Office/14.0 (Windows NT 5.1; Microsoft Outlook 14.0.6123; Pro)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:24:26.010

Request["http_cookie"] 实际上不是从 HTTP 标头中获取 cookie，而是从请求中的 http_cookie 参数、以太形式或查询字符串获取。此场景不是与您的应用程序逻辑相关的 HTTP 标准的一部分。

# android - setText（“”）不工作

> ID：12796746
> 
> 赞同：0
> 
> 时间：2012-10-09T09:20:45.843
> 
> 标签：android, android-edittext

为什么不工作 setText("")？EditText 存储最后输入的数据，当我再次调用 AlertDialog 时，显示存储的数据。

```
case IDD_SET_NAME:
builder=new AlertDialog.Builder(this);
builder.setTitle("Name Title");

EditText input = new EditText(this);
input.setText("");//This method not work
builder.setView(input);

   builder.setPositiveButton("Create", onClickListener_DialogResetPin);
   builder.setNeutralButton("Cancel", onClickListener_DialogResetPin);

   // create and show dialog
   dialog = builder.create();
   dialog.show();

    Button btnOK = dialog.getButton(AlertDialog.BUTTON_POSITIVE);
    btnOK.setOnClickListener(onClickListener_btnOK);

    break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:24:46.537

如果你这样做，你`Dialog`就不会被摧毁`dismiss`。因此，如果您再次显示它，它将不会被重新创建并且`input.setText("");`不会运行。如果要`dialog`重新创建，请使用`removeDialog()`而不是`dismissDialog()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:30:00.240

您在 onCreateDialog 中。这仅在您第一次显示对话框时调用。如果您要对警报执行修改，则应在 onPrepareDialog 中进行。

一点调试和文档阅读会在这里帮助你。

# java - 哪个线程正在使用文件

> ID：12796750
> 
> 赞同：0
> 
> 时间：2012-10-09T09:21:02.613
> 
> 标签：java, multithreading, file

我正在写入文件并在写入后关闭流。最后我正在删除文件。但是程序执行完成后我仍然可以找到文件。它的多线程环境。

那么是否可以检查它被哪个函数或哪个线程使用？

更新代码：

```
 File p_file = new File("C:\\", "GUID");
 p_file.createNewFile();

 FileOutputStream fos = null;
try {
  fos = new FileOutputStream(p_file);
  fos.write("This is test msg.".getBytes());
} finally {
  try {
         fos.close();
      } catch (IOException e) {
                e.printStackTrace();
      }
      if(p_file.exists())
   System.out.println(p_file.delete());
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:27:55.050

在 Linux/Unix 环境`lsof`中是你的朋友。对于 Windows [，进程资源管理器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)可以帮助您找到持有文件句柄的进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:49:23.440

如果我理解正确的话，这种代码的和平是由许多线程同时执行的。在这种情况下，许多线程可能会同时创建、打开、删除同一个文件，即一个线程当前正在写入该文件，而另一个线程试图删除该文件。然后可能会发生删除文件的操作失败。

为了防止对同一个文件的并发访问，您可以同步您的代码（参见 synchronize 关键字），或者您可以生成一个单独的唯一文件名，例如参见[此问题](https://stackoverflow.com/questions/1293655/how-to-create-tmp-file-name-with-out-creating-file)的答案。

# r - 绘制值标签和条形图

> ID：12796757
> 
> 赞同：1
> 
> 时间：2012-10-09T09:21:20.550
> 
> 标签：r, ggplot2

> **可能重复：**
> [在 ggplot2 中的堆积条形图上显示数据值](https://stackoverflow.com/questions/6644997/showing-data-values-on-stacked-bar-chart-in-ggplot2)

我有以下 ggplot

![在此处输入图像描述](../Images/5ae9c3425c0b66bb7e910b2f88d31c02.png)

```
dt <- structure(list(Age.group = structure(1:5, .Label = c("0-29 yrs", "30-49 yrs", "50-64 yrs", "65-79 yrs", "80+ years"), class = "factor"),     Rx.Brufen = c(4.91767279891635, 24.849329416471, 39.384529665324,     42.0512030516413, 45.0282816501013), Brufen.C.I = c(9.49857407873833,     10.4942035949849, 11.0935906177108, 16.7322917304551, 18.5232702433842   ), Brufen.declined = c(1.25219908256281, 1.1156980249761,     1.18510539437499, 0.73845826559561, 1.00121613129538)), .Names = c("Age.group", "Rx.Brufen", "Brufen.C.I", "Brufen.declined"), row.names = c(NA, -5L), class = "data.frame")

dt.m <- melt(dt, 1)

colnames(dt.m)[2] <- "Rx"
colnames(dt.m)[3] <- "Proportion"
ggplot(dt.m, aes(x=Age.group,y=Proportion, fill=Rx)) +
    geom_bar() +
    labs(x="Age Group", y="Proportion %",fill = "") +
    theme(legend.position=c(.5, .9), legend.direction = "horizontal" ) +
    ylim(c(0,100)) 
```

我想以百分比的形式绘制实际值（在绿色和红色条的条内，蓝色条的上方，因为它们不适合里面）。有人可以建议如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:16:57.497

```
p <-  ggplot(dt.m, aes(x=Age.group,y=Proportion, fill=Rx)) +
geom_bar() +
labs(x="Age Group", y="Proportion %",fill = "") +
theme(legend.position=c(.5, .9), legend.direction = "horizontal" ) +
ylim(c(0,100))

library(plyr)
dt.m.text <- ddply(dt.m, .variables="Age.group", transform, text.y=cumsum(Proportion))
p+geom_text(data=dt.m.text, aes(x = Age.group, y = text.y, label = round(Proportion)))
#close

dt.m.text <- ddply(dt.m, .variables="Age.group", transform, text.y = cumsum(Proportion)-1/2*Proportion)
p+geom_text(data=dt.m.text, aes(x=Age.group,y=text.y, label=round(Proportion)))

#manually increase Brufen.declined
up <-  dt.m.text[dt.m.text$Rx=="Brufen.declined","text.y"]
dt.m.text[dt.m.text$Rx=="Brufen.declined","text.y"] <- up + 1
p+geom_text(data=dt.m.text, aes(x=Age.group,y=text.y, label=round(Proportion))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:22:15.133

在您定义数据`dt`以查找标签位置后添加这个 - 根据您的需要：

```
p=dt
p[,4]=p[,4]+p[,3]+p[,2]
p[,3]=p[,3]/2+p[,2]
p[,2]=p[,2]/2
p.m = melt(p)
colnames(p.m)[2:3]=c("Rx","Proportion") 
```

并将这部分添加到您的`ggplot`命令中：

```
+ geom_text(aes(Age.group, `Proportion`, label = sprintf("%2.1f", `Proportion`)), data=p.m) 
```

# python - 这句话是什么意思？

> ID：12796761
> 
> 赞同：0
> 
> 时间：2012-10-09T09:21:40.950
> 
> 标签：python

我今天读了python [PEP100](http://www.python.org/dev/peps/pep-0100/)。在“Unicode 默认编码”部分中，它指的是“Unicode 实现必须对传递给它的 8 位字符串的编码进行一些假设以进行强制，以及在没有时将编码作为默认值将 Unicode 转换为字符串给出了特定的编码。

我的问题是，“8 位字符串”是什么意思？是ASCII的意思吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:26:53.467

不，[ASCII](https://en.wikipedia.org/wiki/ASCII)是 7 位编码。大多数文本编码（包括 UTF-8 和 ISO-8859）都是 8 位编码。

一般来说，基本 ASCII 字符集之外的任何内容都需要超过 7 位来编码。因此，在处理国际数据时，您通常会处理每个编码字符可以使用多个字节的编码。当你尝试组合 Unicode 和字节字符串类型时，Python 会自动尝试将字节字符串解码为 Unicode，并且默认编码（在 python 2 中）是 ASCII。这是 Python 中 UnicodeDecodeError 异常的常见来源。

在继续之前，您真的想阅读 Unicode 和文本编码。我可以推荐：

*   Joel Spolsky 的[最小 Unicode 文章](http://www.joelonsoftware.com/articles/Unicode.html)
*   [Python Unicode](http://docs.python.org/howto/unicode.html) HOWTO 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:24:53.913

`UTF-8`用于支持大范围的字符。在 UTF-8 中，最多可以使用 4 个字节来表示单个字符。

`ASCII`仅定义 128 个字符。所以只有`7`位。但通常以 8 位/字符存储。RS232（旧串行通信）可用于 7 位字节

# c# - OpenXML 从 Excel 工作表读取行的时间比 OLEDB 长得多

> ID：12796764
> 
> 赞同：1
> 
> 时间：2012-10-09T09:21:42.870
> 
> 标签：c#, .net, excel, oledb, openxml

当我使用 OLEDB 时，从 Excel 表中读取 3200 行只需要 2 - 3 秒。我更改为 OpenXML 格式，现在从 Excel 表中读取 3200 行需要 1 多分钟。

下面是我的代码：

```
public static DataTable ReadExcelFileDOM(string filename)
{
    DataTable table;

    using (SpreadsheetDocument myDoc = SpreadsheetDocument.Open(filename, true))
    {
        WorkbookPart workbookPart = myDoc.WorkbookPart;
        Sheet worksheet = workbookPart.Workbook.Descendants<Sheet>().First();
        WorksheetPart worksheetPart =
         (WorksheetPart)(workbookPart.GetPartById(worksheet.Id));
        SheetData sheetData =
            worksheetPart.Worksheet.Elements<SheetData>().First();
        List<List<string>> totalRows = new List<List<string>>();
        int maxCol = 0;

        foreach (Row r in sheetData.Elements<Row>())
        {
            // Add the empty row.
            string value = null;
            while (totalRows.Count < r.RowIndex - 1)
            {
                List<string> emptyRowValues = new List<string>();
                for (int i = 0; i < maxCol; i++)
                {
                    emptyRowValues.Add("");
                }
                totalRows.Add(emptyRowValues);
            }

            List<string> tempRowValues = new List<string>();
            foreach (Cell c in r.Elements<Cell>())
            {
                #region get the cell value of c.
                if (c != null)
                {
                    value = c.InnerText;

                    // If the cell represents a numeric value, you are done. 
                    // For dates, this code returns the serialized value that 
                    // represents the date. The code handles strings and Booleans
                    // individually. For shared strings, the code looks up the 
                    // corresponding value in the shared string table. For Booleans, 
                    // the code converts the value into the words TRUE or FALSE.
                    if (c.DataType != null)
                    {
                        switch (c.DataType.Value)
                        {
                            case CellValues.SharedString:
                                // For shared strings, look up the value in the shared 
                                // strings table.
                                var stringTable = workbookPart.
                                    GetPartsOfType<SharedStringTablePart>().FirstOrDefault();

                                // If the shared string table is missing, something is 
                                // wrong. Return the index that you found in the cell.
                                // Otherwise, look up the correct text in the table.
                                if (stringTable != null)
                                {
                                    value = stringTable.SharedStringTable.
                                        ElementAt(int.Parse(value)).InnerText;
                                }
                                break;

                            case CellValues.Boolean:
                                switch (value)
                                {
                                    case "0":
                                        value = "FALSE";
                                        break;
                                    default:
                                        value = "TRUE";
                                        break;
                                }
                                break;
                        }
                    }

                    Console.Write(value + "  ");
                }
                #endregion

                // Add the cell to the row list.
                int i = Convert.ToInt32(c.CellReference.ToString().ToCharArray().First() - 'A');

                // Add the blank cell in the row.
                while (tempRowValues.Count < i)
                {
                    tempRowValues.Add("");
                }
                tempRowValues.Add(value);
            }

            // add the row to the totalRows.
            maxCol = processList(tempRowValues, totalRows, maxCol);

            Console.WriteLine();
        }

        table = ConvertListListStringToDataTable(totalRows, maxCol);
    }
    return table;
}

/// <summary>
/// Add each row to the totalRows.
/// </summary>
/// <param name="tempRows"></param>
/// <param name="totalRows"></param>
/// <param name="MaxCol">the max column number in rows of the totalRows</param>
/// <returns></returns>
private static int processList(List<string> tempRows, List<List<string>> totalRows, int MaxCol)
{
    if (tempRows.Count > MaxCol)
    {
        MaxCol = tempRows.Count;
    }

    totalRows.Add(tempRows);
    return MaxCol;
}

private static DataTable ConvertListListStringToDataTable(List<List<string>> totalRows, int maxCol)
{
    DataTable table = new DataTable();
    for (int i = 0; i < maxCol; i++)
    {
        table.Columns.Add();
    }
    foreach (List<string> row in totalRows)
    {
        while (row.Count < maxCol)
        {
            row.Add("");
        }
        table.Rows.Add(row.ToArray());
    }
    return table;
} 
```

有没有一种有效的方法可以在某处更改此代码，以便读取过程更快一些？如何将其更改为代码以更快地阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:27:28.553

您是否尝试过 SAX 方法？DOM 方法较慢，因为它加载到 DOM 中。

[http://blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open-xml-sdk.aspx](http://blogs.msdn.com/b/brian_jones/archive/2010/05/27/parsing-and-reading-large-excel-files-with-the-open-xml-sdk.aspx)

如果您确定每个单元格都有一个单元格引用（例如“A1”），那么只需解析所有 Cell 类（而不是先解析 Row 类，然后再解析子 Cell 类）。我相信 Microsoft Excel 可以做到这一点。根据 Open XML 规范，单元格引用是一个可选属性。

# android - 一个 Activity 中的多个片段，用于下载数据

> ID：12796769
> 
> 赞同：1
> 
> 时间：2012-10-09T09:21:46.367
> 
> 标签：android, android-layout, android-fragments

这就是我想要的：

FragmentActivity 首先显示 Fragment1，然后是 Fragment2。每个片段应该：

*   在下载数据之前显示自定义进度对话框
*   从 Internet 下载数据
*   关闭对话框
*   用获取的数据填充视图

当应该显示新的 Fragment 时，我有 FragmentActivity 和子 Fragments 调用活动方法：

```
public class ActivityInTab extends FragmentActivity {
    public void navigateTo(Fragment newFragment) {
        FragmentManager manager = getSupportFragmentManager();
        FragmentTransaction ft = manager.beginTransaction();

        ft.replace(R.id.frameLayout, newFragment);

        ft.addToBackStack(null);
        ft.commit();
    }
} 
```

如果我使用活动而不是片段，我会写这样的东西：

```
public class MyActivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceStage){
        super.onCreate();
        setContentView(R.layout.main);
        showDialog();//Show ProgressDialog here
        startFetchingData();
    }

    private void startFetchingData(){
        new DownloadDataTask().execute(...);
    }

    private class DownloadDataTask extends AsynkTask<...>{
        protected void onPostExecute(...){
            populateViewsWithDownloadedData();
            hideDialog();//dismiss ProgressDialog
        }
    }
} 
```

我应该在此步骤中使用哪些片段生命周期回调？

# linux - 断开连接时一致的 USB 端口编号

> ID：12796770
> 
> 赞同：0
> 
> 时间：2012-10-09T09:21:47.610
> 
> 标签：linux, usb

我有一个项目，我有几十个相机通过 USB 连接到我的 Ubuntu 12.04 笔记本电脑，我需要通过 Gphoto2 从这些相机中获取图像

问题是，当我断开 USB 电缆并重新连接时，USB 端口号会增加，因此在抓取图像时我无法判断我正在与哪台相机通信，因为 gphoto 要求我定义一个端口号来抓取图片。

有什么方法可以重置 USB 端口号，以便根据插入的顺序分配 USB 端口？或者有没有其他方法可以用来映射相机，以便每次都能从正确的相机中检索图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:40:26.850

您可能可以使用供应商 ID 和序列号的组合来追踪确切的相机或任何其他 USB 设备。很少有设备，如 USB 闪存驱动器没有序列号（到目前为止，我还没有使用带有 linux 的 USB 摄像头）。您可以探索（/sys/bus/usb/devices/../ 和 'lsusb -v'）以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:15:52.727

这可能不是您要寻找的答案，但是当订单很重要时，我总是使用外部集线器。当集线器连接到 PC 时，如果它们都连接到集线器，则它们倾向于以逻辑方式枚举设备。您必须通过运行一些试验来弄清楚集线器逻辑。在我玩过的许多游戏中，顺序通常是从一侧到另一侧。例如，我的[Cyber​​Power 集线器](https://rads.stackoverflow.com/amzn/click/com/B0006TIA8Y)从最左上角的端口逆时针枚举集成电路 DIP 上的引脚编号。这意味着当我将六个 USB 连接到串行设备，然后将集线器连接到 PC 时，它们会以相同的顺序显示为 /dev/ttyUSB0 - 5。

# asp.net - JQueryUI absolutely not working with my aspx page

> ID：12796771
> 
> 赞同：1
> 
> 时间：2012-10-09T09:21:47.580
> 
> 标签：asp.net, jquery-ui

Here's a part of my aspx page:

```
<span id="drag">This can be dragged </span>
<input id="save" type="button" value="Save" />
<div id="dialog">
</div>

<script src="Scripts/jquery.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.9.0.custom.js" type="text/javascript"></script>
<script src="Scripts/ui.js" type="text/javascript"></script> 
```

And here's my ui.js file:

```
$('#save').click(function ()
{
  $('#dialog').dialog();
});

$(document).ready(function ()
{
  $('#drag').draggable();
}); 
```

And I've linked the css file in my masterpage :

```
 <link rel="stylesheet" href="CSS\ui-lightness\jquery-ui-1.8.24.custom.css"> 
```

If I try this in a plain html file I get both draggable and dialog functionalities to work but neither function works when I try it in my aspx page.Is there a special consideration with ASP.NET?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:24:58.893

You probably loading 2 times the jquery library.

remove this resource :

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:25:21.183

What does the rendered HTML look like? Maybe you have a problem with rendered **ID** of your controls [**Here**](http://www.west-wind.com/weblog/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40)'s an article about clientId Mode

ClientIDMode can take the following four possible values

*   **AutoID** - ASP.NET generate IDs as it does in v3.5 and earlier versions.
*   **Static** - ASP.NET use exactly the same ID given to the server control for its client-side ID.
*   **Predictable** - ASP.NET try to generate IDs that are guessable from looking at the structure of the page.
*   **Inherit** - ASP.NET generate a client-side ID for the page or control using the same ClientIDMode as its parent. i.e. the client ID gets inherited from the parent control.

This one can be set in the *control* directly, in the *page* or in the *webConfig* file.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:25:37.643

are all the files being downloaded? did you check this with fiddler, firebug or developer tools?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:34:22.493

If you are not getting any error in browser's console then u should use "jQuery" instead of "$" symbol

# javascript - 替代 ActiveXObject

> ID：12796774
> 
> 赞同：0
> 
> 时间：2012-10-09T09:21:55.413
> 
> 标签：javascript, pentaho

我有一段 javascript 检查选项卡中是否存在指定的选项卡。当我将此代码插入到我的开源 etl 工具“pentaho”中时，它无法识别 ActiveXObject。这是因为我的 etl 工具使用的是 mozilla javascript 版本。有没有办法通过替代 ActiveXObject 来做到这一点？谢谢你。

```
 main();
    function main(){
    var ExcelApp = new ActiveXObject("Excel.Application");
    ExcelApp.Visible = false;
    ExcelApp.DisplayAlerts = false
    var filenamer="D:\\wo_etl\\Input Files.xlsx"
    var ExcelBook=ExcelApp.Workbooks.open(filenamer, false, false);
    ExcelBook.Sheets("Sheet1").Active
    ExcelApp.DisplayAlerts = true
    ExcelApp.Quit();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:26:54.270

可悲的是没有。

ActiveXObject 是 Internet Explorer 特定的对象。使用它会将您的页面限制为该特定浏览器

# asp.net - 使用 ASP.net 和 C# 以编程方式创建 Windows 任务，但任务无法启动

> ID：12796777
> 
> 赞同：1
> 
> 时间：2012-10-09T09:21:57.293
> 
> 标签：asp.net, web-applications, scheduled-tasks, windows-server-2003, user-permissions

我需要使用 ASP.net 和 C# (Windows Server 2003) 以编程方式创建 Windows 任务。当我使用以下代码时：

```
Process p = new Process();
p.StartInfo.FileName = "schtasks.exe";
p.StartInfo.Arguments = " /create /tn MyTask /tr notepad.exe /sc DAILY /st 10:00:00 /ru myUsername /rp myPassword ";
p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
p.Start();
p.WaitForExit(); 
```

它成功创建任务，但任务不执行并说“无法启动”</p>

同样在日志文件中它说：“MyTask.job”（notepad.exe）10/9/2012 10:00 PM ** 错误 ** 为指定任务检索帐户信息的尝试失败；因此，该任务没有运行。发生错误，或者该任务不存在帐户信息。具体错误是：0x8004130f：在指示的任务的任务计划程序安全数据库中找不到帐户信息。

当我通过控制面板/计划任务并右键单击我的任务并再次设置我的密码时，我的任务将在下次成功运行。我能怎么做？另外，当我将代码更改为：

```
 Process p = new Process();
    p.StartInfo.FileName = "schtasks.exe";
    p.StartInfo.Arguments = " /create /tn MyTask /tr notepad.exe /sc DAILY /st 10:00:00 /s system /u myUsername /p myPassword ";
    p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    p.Start();
    p.WaitForExit(); 
```

它使这个错误：

错误：在本地连接上传递用户凭据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:22:35.570

我宁愿使用托管的[Task Scheduler Wrapper](http://taskscheduler.codeplex.com/)，IMO 它比盯着另一个进程更干净，在 ASP.NET 应用程序的情况下更是如此。

但是，如果您仍然喜欢使用 schtasks.exe，请参阅这个 SO 答案：

[https://stackoverflow.com/a/702852/351383](https://stackoverflow.com/a/702852/351383)

# mysql - 创建函数时mysql语法错误

> ID：12796778
> 
> 赞同：7
> 
> 时间：2012-10-09T09:21:58.690
> 
> 标签：mysql

```
DROP FUNCTION IF EXISTS bramkiStracone;

CREATE FUNCTION bramkiStracone(idDruzyny INT)
RETURNS int(11)
DETERMINISTIC
BEGIN
DECLARE bramek INT;
DECLARE tmp1 INT;
DECLARE tmp2 INT;

SELECT DISTINCT COALESCE(SUM( b.bramki ), 0) INTO tmp1
FROM LigaBramki b
INNER JOIN LigaZawodnicy z ON b.idZawodnika = z.idZawodnika
INNER JOIN LigaDruzyny d ON z.idDruzyny = d.idDruzyny
INNER JOIN LigaMecze m ON b.idMeczu = m.idMeczu
WHERE m.idDruzyny2 = idDruzyny
AND z.idDruzyny != idDruzyny
AND d.idDruzyny != idDruzyny
AND m.rozegrany = '1';

SELECT DISTINCT COALESCE(SUM( b.bramki ), 0) INTO tmp2
FROM LigaBramki b
INNER JOIN LigaZawodnicy z ON b.idZawodnika = z.idZawodnika
INNER JOIN LigaDruzyny d ON z.idDruzyny = d.idDruzyny
INNER JOIN LigaMecze m ON b.idMeczu = m.idMeczu
WHERE m.idDruzyny1 = idDruzyny
AND z.idDruzyny != idDruzyny
AND d.idDruzyny != idDruzyny
AND m.rozegrany = '1';

SET bramek = tmp1 + tmp2;

RETURN bramek;
END 
```

我附近有错误，`DECLARE bramek INT;`但不知道我错过了什么，
我试图通过删除分号来使其工作，但这也不起作用。

添加分隔符后，我仍然有错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER |
CREATE FUNCTION bramkiStracone(idDruzyny INT)
RETURNS int(11)
DET' at line 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T09:25:53.960

不要忘记更改默认值`DELIMITER`，以便查询不会在`DECLARE bramek INT;`

```
DROP FUNCTION IF EXISTS bramkiStracone;

DELIMITER $$

CREATE FUNCTION bramkiStracone(idDruzyny INT)
RETURNS int(11)
DETERMINISTIC
BEGIN
DECLARE bramek INT;
DECLARE tmp1 INT;
DECLARE tmp2 INT;

SELECT DISTINCT COALESCE(SUM( b.bramki ), 0) INTO tmp1
FROM LigaBramki b
INNER JOIN LigaZawodnicy z ON b.idZawodnika = z.idZawodnika
INNER JOIN LigaDruzyny d ON z.idDruzyny = d.idDruzyny
INNER JOIN LigaMecze m ON b.idMeczu = m.idMeczu
WHERE m.idDruzyny2 = idDruzyny
AND z.idDruzyny != idDruzyny
AND d.idDruzyny != idDruzyny
AND m.rozegrany = '1';

SELECT DISTINCT COALESCE(SUM( b.bramki ), 0) INTO tmp2
FROM LigaBramki b
INNER JOIN LigaZawodnicy z ON b.idZawodnika = z.idZawodnika
INNER JOIN LigaDruzyny d ON z.idDruzyny = d.idDruzyny
INNER JOIN LigaMecze m ON b.idMeczu = m.idMeczu
WHERE m.idDruzyny1 = idDruzyny
AND z.idDruzyny != idDruzyny
AND d.idDruzyny != idDruzyny
AND m.rozegrany = '1';

SET bramek = tmp1 + tmp2;

RETURN bramek;
END $$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:26:16.957

在声明函数之前，请确保将分隔符设置为分号以外的内容：

```
DELIMITER |
CREATE FUNCTION bramkiStracone(idDruzyny INT)
RETURNS int(11)
DETERMINISTIC
BEGIN
DECLARE bramek INT;
...
END| 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T09:26:25.777

您需要更改客户的语句分隔符，以便它不会认为每个语句都`;`终止整个`CREATE FUNCTION`语句。

在 MySQL 命令行客户端中，可以使用以下`delimiter`命令：

```
delimiter ;;

CREATE FUNCTION ...  ;;

delimiter ; 
```

阅读有关[定义存储程序](http://dev.mysql.com/doc/en/stored-programs-defining.html)的手册。

# biztalk - Biztalk 错误：将状态持久化到数据库时发生异常

> ID：12796787
> 
> 赞同：3
> 
> 时间：2012-10-09T09:22:33.690
> 
> 标签：biztalk

我正在尝试将 XML 消息插入 Biztalk 消息框数据库，但出现错误

> 将状态持久化到数据库时发生异常。

我有一个编排需要从消息框中读取此消息。我在编排的接收端口中应用了适当的过滤器。过滤条件也与我要插入的 xml 匹配。

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T04:54:04.720

我已经解决了这个问题。从消息框中读取插入消息的编排没有直接端口，因此当我尝试在消息框中插入消息时，它找不到该消息的订阅者。

我已将编排端口设为直接端口，问题得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:28:41.017

检查您的消息框中是否有重复订阅。这是可能由于多种原因而发生的错误之一，但这是我遇到它时要调查的第一件事。

[这是我不久前写的关于这种情况的博客文章](http://biztalktalk.wordpress.com/2008/08/18/persistenceexception/)。

要检查您的活动订阅，请使用 BizTalk 管理控制台，然后在“新查询”选项卡上，将“搜索”下拉菜单更改为“订阅”

# java - 如何使用 OpenCloud 以编程方式布局动态词云？

> ID：12796788
> 
> 赞同：1
> 
> 时间：2012-10-09T09:22:38.463
> 
> 标签：java, swing, tag-cloud

我已经到了可以使用Swing[代码](https://stackoverflow.com/q/11481482/1075247)在 Java中显示我的[OpenCloud](http://opencloud.mcavallo.org/)词云的阶段。它从文件中逐行加载文本，将其吞噬并吐出我想要显示的单词。这将传递给我的云，然后在每次读取和更新一批行时添加它们。目前我正在使用默认布局管理器，但它只是将新单词附加到窗口底部，最终流过窗口底部。*这不是我想要的。*

 *我追求的是更像 wordle 的东西：

![在此处输入图像描述](../Images/499f42efd318e69c7d2a304094b08746.png)

理想情况下，我希望它：

*   瞄准JPanel的中心
*   径向向外添加单词
*   允许多个单词“每行”（注意**方式**和**希望**您有*一个*并且*当前*在新行之间的方式。）
*   *Trickier*：修剪得分低且在达到边缘时不适合的单词。

根据我链接到的解决方案，我将这些添加为 JLabels，并根据每个标签的权重使用字体。

我浏览了所有不同的挥杆布局管理器，但似乎没有一个适合编程。[如果我想自定义我的布局，我唯一的选择是使用绝对布局定位](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)，因为我被 Swing 卡住了（是的，几乎完全卡住了）。这似乎是一个难以驯服的野兽。不幸的是，对于那些想要推荐一些很棒的非标准 LayoutManager 的人*，我无法将任何包添加到我的开发机器/访问互联网*。我认为我需要做的是在页面某处随机添加单词，然后对其他单词执行相同操作并调整它们，使它们不会在窗口边缘相互碰撞。

所以看来我需要知道：

*   是否有使用标准布局管理器之一进行这种随机/延迟调整布局的“*已知”方式？*
*   有没有办法在没有布局管理器的情况下进行这种布局？这更容易吗？
*   编写自己的布局管理器会更容易吗？这肯定是一项艰巨的任务，不是吗？

抱歉，如果这看起来我只是在寻求一个拼盘上的解决方案，我对 Java 有点陌生（我能说多久！）而且我不知道从哪里开始事情，任何帮助/提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:24:58.327

这是一个使用 WrapLayout 的示例，它似乎可以正常工作：

```
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

import org.mcavallo.opencloud.Cloud;
import org.mcavallo.opencloud.Tag;

public class TestOpenCloud {

    private static final String[] WORDS = { "art", "australia", "baby", "beach", "birthday", "blue", "bw", "california", "canada", "canon",
            "cat", "chicago", "china", "christmas", "city", "dog", "england", "europe", "family", "festival", "flower", "flowers", "food",
            "france", "friends", "fun", "germany", "holiday", "india", "italy", "japan", "london", "me", "mexico", "music", "nature",
            "new", "newyork", "night", "nikon", "nyc", "paris", "park", "party", "people", "portrait", "sanfrancisco", "sky", "snow",
            "spain", "summer", "sunset", "taiwan", "tokyo", "travel", "trip", "uk", "usa", "vacation", "water", "wedding" };

    protected void initUI() {
        JFrame frame = new JFrame(TestOpenCloud.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel(new WrapLayout());
        Cloud cloud = new Cloud();
        final Random random = new Random();
        for (String s : WORDS) {
            for (int i = random.nextInt(50); i > 0; i--) {
                cloud.addTag(s);
            }
        }
        for (Tag tag : cloud.tags()) {
            final JLabel label = new JLabel(tag.getName());
            label.setOpaque(false);
            label.setFont(label.getFont().deriveFont((float) tag.getWeight() * 10));
            panel.add(label);
        }
        JScrollPane scrollPane = new JScrollPane(panel);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        frame.add(scrollPane);
        frame.setSize(500, 550);
        frame.setVisible(true);
        Timer t = new Timer(1000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                final JLabel label = new JLabel(WORDS[random.nextInt(WORDS.length)]);
                label.setOpaque(false);
                int fontSize = random.nextInt(20) + 8;
                label.setFont(label.getFont().deriveFont((float) fontSize));
                panel.add(label);
                panel.revalidate();
                panel.repaint();
            }
        });
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestOpenCloud().initUI();
            }
        });
    }

    public class WrapLayout extends FlowLayout {
        private Dimension preferredLayoutSize;

        /**
         * Constructs a new <code>WrapLayout</code> with a left alignment and a default 5-unit horizontal and vertical gap.
         */
        public WrapLayout() {
            super();
        }

        /**
         * Constructs a new <code>FlowLayout</code> with the specified alignment and a default 5-unit horizontal and vertical gap. The value
         * of the alignment argument must be one of <code>WrapLayout</code>, <code>WrapLayout</code>, or <code>WrapLayout</code>.
         * 
         * @param align
         *            the alignment value
         */
        public WrapLayout(int align) {
            super(align);
        }

        /**
         * Creates a new flow layout manager with the indicated alignment and the indicated horizontal and vertical gaps.
         * <p>
         * The value of the alignment argument must be one of <code>WrapLayout</code>, <code>WrapLayout</code>, or <code>WrapLayout</code>.
         * 
         * @param align
         *            the alignment value
         * @param hgap
         *            the horizontal gap between components
         * @param vgap
         *            the vertical gap between components
         */
        public WrapLayout(int align, int hgap, int vgap) {
            super(align, hgap, vgap);
        }

        /**
         * Returns the preferred dimensions for this layout given the <i>visible</i> components in the specified target container.
         * 
         * @param target
         *            the component which needs to be laid out
         * @return the preferred dimensions to lay out the subcomponents of the specified container
         */
        @Override
        public Dimension preferredLayoutSize(Container target) {
            return layoutSize(target, true);
        }

        /**
         * Returns the minimum dimensions needed to layout the <i>visible</i> components contained in the specified target container.
         * 
         * @param target
         *            the component which needs to be laid out
         * @return the minimum dimensions to lay out the subcomponents of the specified container
         */
        @Override
        public Dimension minimumLayoutSize(Container target) {
            Dimension minimum = layoutSize(target, false);
            minimum.width -= getHgap() + 1;
            return minimum;
        }

        /**
         * Returns the minimum or preferred dimension needed to layout the target container.
         * 
         * @param target
         *            target to get layout size for
         * @param preferred
         *            should preferred size be calculated
         * @return the dimension to layout the target container
         */
        private Dimension layoutSize(Container target, boolean preferred) {
            synchronized (target.getTreeLock()) {
                // Each row must fit with the width allocated to the containter.
                // When the container width = 0, the preferred width of the container
                // has not yet been calculated so lets ask for the maximum.

                int targetWidth = target.getSize().width;

                if (targetWidth == 0) {
                    targetWidth = Integer.MAX_VALUE;
                }

                int hgap = getHgap();
                int vgap = getVgap();
                Insets insets = target.getInsets();
                int horizontalInsetsAndGap = insets.left + insets.right + hgap * 2;
                int maxWidth = targetWidth - horizontalInsetsAndGap;

                // Fit components into the allowed width

                Dimension dim = new Dimension(0, 0);
                int rowWidth = 0;
                int rowHeight = 0;

                int nmembers = target.getComponentCount();

                for (int i = 0; i < nmembers; i++) {
                    Component m = target.getComponent(i);

                    if (m.isVisible()) {
                        Dimension d = preferred ? m.getPreferredSize() : m.getMinimumSize();

                        // Can't add the component to current row. Start a new row.

                        if (rowWidth + d.width > maxWidth) {
                            addRow(dim, rowWidth, rowHeight);
                            rowWidth = 0;
                            rowHeight = 0;
                        }

                        // Add a horizontal gap for all components after the first

                        if (rowWidth != 0) {
                            rowWidth += hgap;
                        }

                        rowWidth += d.width;
                        rowHeight = Math.max(rowHeight, d.height);
                    }
                }

                addRow(dim, rowWidth, rowHeight);

                dim.width += horizontalInsetsAndGap;
                dim.height += insets.top + insets.bottom + vgap * 2;

                // When using a scroll pane or the DecoratedLookAndFeel we need to
                // make sure the preferred size is less than the size of the
                // target container so shrinking the container size works
                // correctly. Removing the horizontal gap is an easy way to do this.

                Container scrollPane = SwingUtilities.getAncestorOfClass(JScrollPane.class, target);

                if (scrollPane != null) {
                    dim.width -= hgap + 1;
                }

                return dim;
            }
        }

        /*
         *  A new row has been completed. Use the dimensions of this row
         *  to update the preferred size for the container.
         *
         *  @param dim update the width and height when appropriate
         *  @param rowWidth the width of the row to add
         *  @param rowHeight the height of the row to add
         */
        private void addRow(Dimension dim, int rowWidth, int rowHeight) {
            dim.width = Math.max(dim.width, rowWidth);

            if (dim.height > 0) {
                dim.height += getVgap();
            }

            dim.height += rowHeight;
        }
    }
} 
```*

# perl - 将字符附加到 multifasta 文件中特定行的末尾

> ID：12796796
> 
> 赞同：0
> 
> 时间：2012-10-09T09:23:02.073
> 
> 标签：perl, sed, awk, grep

我有一个带有双端读取的 multifasta 文件，因此彼此相邻的那些是配对的（它们具有相同的读取名称）。我想在整个文件中分别将“/1”和“/2”附加到第一次和第二次读取。我不知道文件中有多少读取。这是文件的样子（为清楚起见，在读取之间添加空行）：

> HWI-ST1018:1:1101:10007:34134#0 ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
> 
> HWI-ST1018:1:1101:10007:34134#0 GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
> 
> HWI-ST1018:1:1101:10016:6488#0 ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA
> 
> HWI-ST1018:1:1101:10016:6488#0 TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTTAGTAACCACATGTCCAGACTCCTC CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC

这就是我希望它出现的方式：

> HWI-ST1018:1:1101:10007:34134#0/1 ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
> 
> HWI-ST1018:1:1101:10007:34134#0/2 GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
> 
> HWI-ST1018:1:1101:10016:6488#0/1 ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA
> 
> HWI-ST1018:1:1101:10016:6488#0/2 TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTTAGTAACCACATGTCCAGACTCCTC CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC

然后，我将对其进行 grep，删除“--”分隔符并将正向读取（即以“/1”结尾的那些）和反向读取（即以“/2”结尾的那些）保存在不同的文件中，如下所示：

```
grep -A 2 "/1" filename.fa | sed '/--/d' > reads_1.fa
grep -A 2 "/2" filename.fa | sed '/--/d' > reads_2.fa 
```

我认为这可以用 sed 和 awk 来完成，但我还没有弄清楚怎么做。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:07:29.613

使用 sed 生成中间文件：

```
#!/bin/sed -f

1 {
    x
    s/^$/\\1/
    x
}
/^HWI/ {
    G
    s/\n//
    x
    y/12/21/
    x
} 
```

在一行中：

```
sed -e '1{x;s/^$/\\1/;x};/^HWI/{G;s/\n//;x;y/12/21/;x}' 
```

命令非常简单。第一对大括号中的命令在第一行执行，它们初始化保持空间（辅助缓冲区）`\1`。为此，我们使用`x`交换命令将模式空间（工作缓冲区）的内容与保持空间的内容交换。然后我们用 替换一个空行`\1`，然后再次交换空格。

对以 .开头的每一行执行分组在第二对大括号中的命令`HWI`。首先，我们将保持空间的内容附加到模式空间中。因为它是以换行符开头附加的，所以下一个命令将其删除。现在我们必须将数字从 1 交换为 2，从 2 交换为 1。首先我们再次交换空格的内容，然后使用`y`命令交换字符。它定义当找到 1 或 2 时，它们必须分别替换为 2 或 1。最后，我们恢复空间的内容。

您还可以编写一个脚本来完成所有操作，将它们分成文件：

```
#!/bin/sed -f

/^HWI/! d

:start_forward
s/$/\\1/

:forward
w reads_1.fa
n
/^HWI/! b forward

s/$/\\2/

:reverse
w reads_2.fa
n
/^HWI/! b reverse

b start_forward 
```

以较短的形式：

```
sed -e '/^HWI/!d;:s;s/$/\\1/;:f;wreads_1.fa
    n;/^HWI/!bf;s/$/\\2/;:r;wreads_2.fa
    n;/^HWI/!br;bs' 
```

在这里，我们首先忽略所有行，直到找到以 开头的行`HWI`。然后我们必须循环，一个用于写入前向数据，另一个用于后向数据。在循环之间有用于附加相应`\1`或`\2`在将行写入相应文件之前的命令。循环是类似的，它们简单地将行写入各自的文件，从输入中加载新行并检查它是否是以 开头的行`HWI`，表明它应该进入下一个循环。

更彻底的解释：

第一个命令在该行不以开头时执行`HWI`（我们通过在其后添加一个来否定匹配`!`）。该命令是`d`删除一行，同时强制sed加载下一行并重新启动脚本。实际上，我们循环直到找到以 . 开头的字符串`HWI`。

现在，我们使用`:`命令来定义一个名为`start_forward`. 标签只不过是脚本中我们可以跳转到的位置的名称。如果我们一直在标签之间跳转并且永远不会到达脚本的末尾，我们最终将永远不会重新启动脚本，因此在`HWI`找到以开头的第一行之后，第一个命令永远不会被执行。我们要做的第一件事是将 附加`\1`到行尾。

现在我们定义一个新的标签，叫做`forward`它，当我们遍历这些行时，它会被用来跳回来。`reads_1.fa`循环非常简单，首先我们使用命令将当前行写入相应的文件`w`，然后我们使用该`n`行将下一行读入模式空间，最后我们检查新读取的行是否以`HWI`. 如果没有，我们执行`b`分支命令跳回`forward`标签，允许我们开始循环的另一个迭代。

如果这些行确实以 开头`HWI`，我们现在必须转到另一个循环。不过，在此之前，我们必须在该行后面加上`\2`. 该循环类似于前一个循环，除了当我们在`HWI`找到另一行时退出循环时，我们必须使用命令分支回到`start_forward`标签`b`才能切换回前一个循环。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:32:56.503

这增加`/0`了`/1`以下内容：

```
perl -pe 'if (/#0/) { $x = 1 - $x; s:#0:#0/$x: }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:44:55.680

awk 单线：

```
 awk -F'#' 'NF==2{a[$1]=($1 in a)?++a[$1]:1;$0=$0"/"a[$1];}1' file 
```

**测试**

```
kent$  cat t.txt
HWI-ST1018:1:1101:10007:34134#0
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT 
CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG

HWI-ST1018:1:1101:10007:34134#0
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG 
GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG

HWI-ST1018:1:1101:10016:6488#0
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG 
AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA

HWI-ST1018:1:1101:10016:6488#0
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTC 
CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC

kent$  awk -F'#' 'NF==2{a[$1]=($1 in a)?++a[$1]:1;$0=$0"/"a[$1];}1' t.txt
HWI-ST1018:1:1101:10007:34134#0/1
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT 
CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG

HWI-ST1018:1:1101:10007:34134#0/2
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG 
GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG

HWI-ST1018:1:1101:10016:6488#0/1
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG 
AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA

HWI-ST1018:1:1101:10016:6488#0/2
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTC 
CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:10:38.163

```
awk 'BEGIN{i=1}{if($0~/#0/){print $0"/"i;if(i==1)i=2;else i=1;}else {print}}' your_file 
```

测试如下：

```
> cat temp
>HWI-ST1018:1:1101:10007:34134#0
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT
CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
>HWI-ST1018:1:1101:10007:34134#0
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG
GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
>HWI-ST1018:1:1101:10016:6488#0
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG
AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA
>HWI-ST1018:1:1101:10016:6488#0
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTC
CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC 
```

执行：

```
> awk 'BEGIN{i=1}{if($0~/#0/){print $0"/"i;if(i==1)i=2;else i=1;}else {print}}' temp
>HWI-ST1018:1:1101:10007:34134#0/1
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT
CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
>HWI-ST1018:1:1101:10007:34134#0/2
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG
GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
>HWI-ST1018:1:1101:10016:6488#0/1
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG
AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA
>HWI-ST1018:1:1101:10016:6488#0/2
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTC
CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC
> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T10:51:20.243

你有所谓的 shuffled multifasta。您可以使用`GNU awk`unshuffle 并创建两个文件。请注意，无需使用`grep`或`sed`执行任何后处理。此代码将为您创建两个文件：

```
awk 'NR%4==1 { getline one; printf "%s/1\n%s\n", $0, one > "reads_1.fa" } NR%4==3 { getline two; printf "%s/2\n%s\n", $0, two > "reads_2.fa" }' file.txt 
```

**输入：**

```
HWI-ST1018:1:1101:10007:34134#0
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
HWI-ST1018:1:1101:10007:34134#0
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAGGAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
HWI-ST1018:1:1101:10016:6488#0
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAGAAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA
HWI-ST1018:1:1101:10016:6488#0
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC 
```

**结果：**

内容`reads_1.fa`：

```
HWI-ST1018:1:1101:10007:34134#0/1
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG
HWI-ST1018:1:1101:10016:6488#0/1
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAGAAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA 
```

内容`reads_2.fa`：

```
HWI-ST1018:1:1101:10007:34134#0/2
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAGGAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG
HWI-ST1018:1:1101:10016:6488#0/2
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-09T15:50:58.137

另一种解决方案：

```
awk 'BEGIN{RS=""}{if(NR<3){sub(/#0/,"#0/"NR);print $0,"\n"}else{NR=1;sub(/#0/,"#0/"NR);print $0,"\n"}}' file 
```

结果：

```
awk 'BEGIN{RS=""}{if(NR<3){sub(/#0/,"#0/"NR); print $0,"\n"}else{NR=1;sub(/#0/,"#0/"NR);print $0, "\n"}}' file 
HWI-ST1018:1:1101:10007:34134#0/1 
ACTAGTAACCACATGTCCAGACTCCTCCTATGCTCCCACCCAGGGTCCCTTGAGCTGCTT 
CCCATTCCCCTAGGGCTGAGACCCAATATCCTCTATCCCTG 

HWI-ST1018:1:1101:10007:34134#0/2 
GTGCAGGCATGTTGGGGCGTGTCTCAGAGCCTGAACTTCCCTTCCAGTCAGTGCTGGAAG 
GAGGTGGGCAGGGGAATGATAGAAAGGAAGGAGTGGATTGG 

HWI-ST1018:1:1101:10016:6488#0/1 
ACAGCTATACACGAAGAATCTCAGCCCTTGTACTTTTGCATAGTCTCATACACGTATCAG 
AAGCCTCCACCTGGCTAACAGGAATTTGGGGCTTTGGGAGA 

HWI-ST1018:1:1101:10016:6488#0/2 
TTTGGGAGATTTTTTAATCAGGGCAAAACCTGTACTAGTAACCACATGTCCAGACTCCTC 
CTATGCTCCCACCCAGGGTCCCTTGAGCTGCTTCCCATTCC 
```

# c++ - 将当前日期与 C++ 中的 sql 数据库条目匹配

> ID：12796800
> 
> 赞同：2
> 
> 时间：2012-10-09T09:23:23.163
> 
> 标签：c++, mysql, visual-c++

我的 SQL 数据库中有**日期**字段。我只想将那些记录写入日期与当前日期/系统日期匹配的文件中。

我在 ** ** 中找不到任何 SQL 查询来匹配这两个日期。

应该用什么代替？？？

`SELECT * FROM attendence where Date = ???`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:32:04.843

取决于日期时间格式

如果它**的'2012-10-09 15:04:58'**

```
SELECT * FROM attendence where Date = CURRENT_TIMESTAMP 
```

如果它**的'2012-10-09'**

```
SELECT * FROM attendence where Date = CURRENT_DATE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:40:26.760

它还通过执行以下操作来工作：

```
SELECT * FROM attendence where Date = '"+System::DateTime::Now.ToString("yyyy-MM-dd") +"' 
```

最后添加的格式是因为日期是在数据库中以该格式添加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:29:01.640

除非 mysql 数据库和最终用户之间存在时区差异（如在 c++ 应用程序中远程查询另一个时区的 mysql 数据库），否则应该可以正常工作：

```
SELECT * FROM attendence WHERE Date = CURDATE() 
```

如果需要考虑时区因素，您要么必须提供最终用户系统日期作为查询参数，要么告诉 MySQL 最终用户所在的时区并使用

```
CONVERT_TZ(CURDATE(), from_tz, to_tz); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:29:55.257

试试这个：

```
SELECT * FROM attendence where Date(Date) = NOW() 
```

# javascript - 当我尝试注册不止一次时找不到 jQuery 工具“覆盖”

> ID：12796808
> 
> 赞同：0
> 
> 时间：2012-10-09T09:23:49.240
> 
> 标签：javascript, jquery, jquery-plugins, overlay, jquery-tools

jQuery 工具的叠加层是一个很好的显示 div 的 webhelper。通常，我们建议在 jquery ready 函数中注册覆盖。它在我身边运作良好。

现在我想即时注册覆盖。我是说：

1.  我动态创建了一个 div，用于加载我的内容。
2.  然后我使用新创建的 div 来注册覆盖。
3.  最后一件事是触发事件。

下面是我的示例代码：

```
<pre><code>

function RegisterOverlay(divId) {
    $("#" + divId).overlay({
        mask: {
            color: '#789',
            loadSpeed: 200,
            opacity: 0.7
        },
        load: true,
        onBeforeLoad: function () {
            document.getElementById(divId).style.width = overlayConf.width;
            document.getElementById(divId).style.height = overlayConf.height;
            this.getConf().top = overlayConf.top;
            this.getConf().oneInstance = true; //overlayConf.oneInstance;
            this.getConf().closeOnClick = overlayConf.closeOnClick;
            this.getConf().closeOnEsc = overlayConf.closeOnEsc;
            this.getConf().top = overlayConf.top;
            this.getConf().effect = overlayConf.effect;
            this.getConf().fixed = overlayConf.fixed;
            this.getConf().speed = overlayConf.speed;
            this.getConf().mask.color = overlayConf.Mask.color;
            this.getConf().mask.loadSpeed = overlayConf.Mask.loadSpeed;
            this.getConf().mask.opacity = overlayConf.Mask.opacity;
            this.getConf().mask.colseOnEsc = overlayConf.Mask.colseOnEsc;
            this.getConf().mask.colseOnClick = overlayConf.Mask.colseOnClick;
            var wrap = this.getOverlay().find(".contentWrap");
            wrap.load(overlayConf.url);
        },
        onClose: function () {
            var overlayAll = document.getElementById("overlayAll");
            overlayAll.removeChild(document.getElementById(divId));
        }
    });
}

 function ParentOverlay(conf, divId) {
    overlayConf = conf;
    CreateDiv(divId);//create a div based on a given id
    RegisterOverlay(divId);//
} 
```

上述代码托管在父页面上，因此每个子页面都可以通过一些参数调用 ParentOverlay 函数。抱歉我的英语不好，子页面托管在 iframe 中。框架是否会导致以下问题？

我的问题：

有一个非常子页面，我有三个按钮。单击其中任何一个都会触发具有不同参数的 ParentOverlay。

成功加载页面后，我单击第一个按钮，一切正常，我关闭了覆盖，但之后我再次尝试单击三个按钮中的一个。错误来了：
**对象不支持属性或方法“覆盖”**

这发生在我尝试注册覆盖的地方：

**$("#" + divId).overlay(...**

顺便提一句。按钮没有任何问题，这与我单击按钮的顺序无关。

很简单：第一次点击就可以了。然后一切都糟透了。

我对此进行了调试，我发现如果我只是硬编码三个按钮的三个 div 并在 jquery 就绪函数中注册三个覆盖。无论我点击多少次按钮，一切都很好。但这是一个我不能接受的紧急解决方案。我想即时制作并重用代码。

我还尝试将 load 属性设置为 false。这是没有意义的。

现在，我真的不知道该怎么做。也许有一些特殊的设置，但我还不知道。

这里的任何人都可以分享一些经验给我一些线索。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:31:54.520

这个问题已经解决。叠加层或 jQuery 没有任何问题。但是我犯了一个愚蠢的错误，我两次加载 jquery.js，这使得 jquery 的扩展函数机制失败。

然后当$("#" + divId).overlay()时，报错：Object doesn't support property or method 'overlay'

# scheme - 实现辅助功能

> ID：12796809
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:23:51.187
> 
> 标签：scheme, helper, predicate

过程 find-last 接受一个包含 1 个参数的谓词和一个列表，并返回列表中满足该谓词的最右边的元素。如果不存在这样的元素，则返回#f

```
(define (find-last-helper ans)
  (if (predicate? ans)
      (add1 ans)))
(define find-last
  (lambda (predicate? ls)
    (cond 
      [(null? ls) #f]
       [(equal? predicate? (car ls)) car ls]
        [else(find-last-helper(find-last ls(cdr ls)))]))) 
```

我是否在帮助程序或查找最后程序中遗漏了某些内容？它返回一个语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:21:14.597

**predicate?** is not visible to **find-last-helper**. The way to fix that would be to move the definition of **find-last-helper** inside **find-last**'s lambda block or to add an extra parameter to **find-last-helper** so that **predicate?** can be passed to it.

I would recommend the former; assuming (from the name) that **find-last-helper** is only useful to **find-last**, it keeps the outer environment cleaner.

Note: assuming you fix the errors but keep the basic structure, your function is going to return the leftmost match - the first match it finds - rather than the rightmost. To see this clearly, assume that the leftmost item in the list satisfies the predicate and step through your code; it should be clear that the third, recursive **cond** line is not executed.

# python - Sympy：简化平方的平方根

> ID：12796814
> 
> 赞同：3
> 
> 时间：2012-10-09T09:24:17.337
> 
> 标签：python, simplify, sympy

Sympy 似乎无法简化涉及变量平方根的表达式：

```
In [28]: a = x**2
In [29]: b = a**(1/2)
In [30]: b
Out[30]: 
    0.5
⎛ 2⎞   
⎝x ⎠   
In [31]: b.simplify()
Out[31]: 
    0.5
⎛ 2⎞   
⎝x ⎠ 
```

我不让它与其他变体一起工作`simplify`，特别是我认为`b.powsimp()`应该工作。

```
In [32]: b.powsimp()
Out[32]: 
    0.5
⎛ 2⎞   
⎝x ⎠ 
```

有谁知道为什么这不起作用，或者我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T17:25:41.030

你的例子有两个问题。

首先`sqrt(x**2)==x`仅适用于*正*实数。

其次，对于 SymPy`1/2`和`0.5`是不一样的东西。第一个是`Rational`实例，第二个是`float`实例。

最后，举个例子：

```
>>> x = Symbol('x', real=True)
>>> (x**2)**(1./2)
∣x∣**1.0
>>> (x**2)**(S(1)/2) # S() is short for sympify()
∣x∣ 
```

`sympify`将 python 对象转换为更合适的 SymPy 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T09:53:40.497

我假设您声明`x`为`x = Symbol('x')`. 如果将其更改为`x = Symbol('x', real=True)`表达式应简化。您可以找到必须明确声明您的变量`real`在[sympy bugtracker](http://code.google.com/p/sympy/issues/detail?id=600)中的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T02:47:51.117

你想要的功能是`powdenest`. 如果传递`force=True`参数，它将忽略假设

```
>>> powdenest(sqrt(x**2), force=True)
x 
```

# javascript - CRM 2011：全局 JavaScript 和状态栏中的按钮

> ID：12796821
> 
> 赞同：3
> 
> 时间：2012-10-09T09:24:38.477
> 
> 标签：javascript, dynamics-crm-2011

我在 CRM 2011 中并不是那么新，但我遇到了一个大问题......我在网上找到了一些解决方案，可以在 CRM 中建立一些评分/排名系统。当我在顶部状态栏、功能区按钮栏上方、屏幕右上角的用户名旁边看到星号时，我完全糊涂了。

![在此处输入图像描述](../Images/8ee50c7cdcf9608402a28d22e4e457e5.png)

当我点击这个按钮时，我打开 div 包含一些关于用户的信息，以及他们的分数。

1.  我可以在哪里放置可以全局执行的 Java Script 函数（例如 jQuery）？如何调用该函数，捕获什么事件？我需要这个按钮/功能在 CRM 中的所有页面上都处于活动状态，就像这个一样。
2.  顶部栏中那个地方的 id 是什么？我需要它从我的脚本中放置这个按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T15:13:48.923

您似乎在谈论的 CRM 解决方案是这样的

[http://www.wave-access.com/Public_en/ms_crm_gamification_product.aspx](http://www.wave-access.com/Public_en/ms_crm_gamification_product.aspx)

这显然是不支持的。然而，他们通过在功能区中添加一个虚拟按钮来实现它，特别是珠宝菜单。此按钮命令链接到 web 资源中的 JS 函数。该按钮始终隐藏，但始终加载 JS 文件。

应该注意的是，您的 JS 被加载到 Main.aspx（根文档）中，从那里将 HTML 元素或 javascript 注入所需的框架。（导航或内容）

这是要添加到解决方案的 RibbonDiffXML。

```
<RibbonDiffXml>
<CustomActions>
  <CustomAction Id="Dummy.CustomAction" Location="Mscrm.Jewel.Controls1._children" Sequence="41">
    <CommandUIDefinition>
      <Button Id="Dummy" Command="Dummy.Command" Sequence="50" ToolTipTitle="$LocLabels:Dummy.LabelText" LabelText="$LocLabels:Dummy.LabelText" ToolTipDescription="$LocLabels:Dummy.Description" TemplateAlias="isv" />
    </CommandUIDefinition>
  </CustomAction>
</CustomActions>
<Templates>
  <RibbonTemplates Id="Mscrm.Templates"></RibbonTemplates>
</Templates>
<CommandDefinitions>
  <CommandDefinition Id="Dummy.Command">
    <EnableRules />
    <DisplayRules>
      <DisplayRule Id="Dummy.Command.DisplayRule.PageRule" />
    </DisplayRules>
    <Actions>
      <JavaScriptFunction Library="$webresource:MyGlobal.js" FunctionName="Anything" />
    </Actions>
  </CommandDefinition>
</CommandDefinitions>
<RuleDefinitions>
  <TabDisplayRules />
  <DisplayRules>
    <DisplayRule Id="Dummy.Command.DisplayRule.PageRule">
      <PageRule Address="aaaa" />
    </DisplayRule>
  </DisplayRules>
  <EnableRules />
</RuleDefinitions>
<LocLabels>
  <LocLabel Id="Dummy.Description">
    <Titles>
      <Title languagecode="1033" description="Description" />
    </Titles>
  </LocLabel>
  <LocLabel Id="Dummy.LabelText">
    <Titles>
      <Title languagecode="1033" description="Description" />
    </Titles>
  </LocLabel>
</LocLabels> 
```

这在 customs.xml 的根 ImportExportXml 元素中您可能还需要通过 UI 添加应用程序功能区作为解决方案组件

# hadoop - 写入 Cassandra 列族时的 Hadoop MR 作业因“InavlidRequestException（列名不能为空）”而失败

> ID：12796823
> 
> 赞同：0
> 
> 时间：2012-10-09T09:24:45.870
> 
> 标签：hadoop, cassandra

我有一个 MR 作业，它写入多行，每行一列。虽然我为列名传递了一个非空值，但我得到了以下异常

java.io.IOException: InvalidRequestException(why:column name must not be empty) at org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:307) Caused by: InvalidRequestException(why:column name must not be空）在 org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:1035) 在 org.apache.cassandra 的 org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:19477) .thrift.Cassandra$Client.batch_mutate(Cassandra.java:1009) 在 org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:299)

我在这里想念什么吗？

这是我写的减速器 -

public static class SampleReducer extends Reducer>{ static Logger logger = LoggerFactory.getLogger(AndroidEthnicityMap.class);

```
 @Override
            protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException ,InterruptedException {
                    String tStr[] = key.toString().split("__");
                    logger.info("The string to be reduced is " + key.toString());
                    String appid = tStr[0];
                    String columnName = tStr[1];
                    String columnValue = "{}";
                    if(values.iterator().hasNext())
                            columnValue = values.iterator().next().toString();

                    ByteBuffer bbcn = ByteBufferUtil.bytes(columnName);
                    ByteBuffer bbcv = ByteBufferUtil.bytes(columnValue);
                    ByteBuffer bbkey = ByteBufferUtil.bytes(appid);

                    Mutation m = new Mutation();
                    m.setColumn_or_supercolumn(new ColumnOrSuperColumn());
                    Column c = new Column();
                    c.setName(ByteBufferUtil.bytes(columnName));
                    c.setValue(ByteBufferUtil.bytes(columnValue));
                    c.setTimestamp(System.currentTimeMillis());
                    m.column_or_supercolumn.setColumn(c);

                    Mutation[] marray = new Mutation[]{m};
                    context.write(ByteBufferUtil.bytes(appid), Arrays.asList(marray));

            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:18:15.540

“空”表示“非空，零长度”。这不是有效的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T06:35:24.397

Add logs to you reducer to see all column names it transwer to context. It seem you column family is an empty string. Log all the datam not only colName

# winapi - Win32 中仅接受文本框（编辑控件）中的字符和空格

> ID：12796827
> 
> 赞同：0
> 
> 时间：2012-10-09T09:24:53.017
> 
> 标签：winapi

我不知道当我们输入文本框时文本框如何只接受字符和空格。我只是认为我们可以使用 WM_Keydown 但我只是猜它不知道我们输入哪个编辑控件。这是我创建表单的代码

```
void CREATE_EDITNAMECONTROL()

Create_Control( hNameEditControl,   /* Handle */
    NULL,//NULL,        /* Handle of parent */
    L"Edit",  /* class name */
    ID_EDIT_CONTROl , /* ID     */
    L"",        /* Caption/Title */
    EDITCONTROL_STYLE, /* Style */
    200,        /* Position X */
    70,     /* Position Y */
    160,        /* Width      */
    30 );       /* Height     */ 
```

```
无效 CREATE_EDITDATECONTROL()

`Create_Control( hDateEditControl,   /* Handle */
    NULL,//NULL,        /* Handle of parent */
    L"Edit",  /* class name */
    ID_EDIT_CONTROl , /* ID     */
    L"",        /* Caption/Title */
    EDITCONTROL_STYLE, /* Style */
    200,        /* Position X */
    110,        /* Position Y */
    160,        /* Width      */
    30 );       /* Height     */` 

            回答 #1

赞同：1

时间：2012-10-09T10:33:34.513

当您收到 Windows 消息时，您`WndProc`将获得目标窗口句柄作为`hWnd`. 您可以将此值与每个控件的存储句柄进行比较，以确定哪个触发了事件。

如果它是相关的编辑控件，您可以过滤和更改文本以适应。

请注意，有很多方法可以更改不涉及`WM_KEYDOWN`消息的编辑控件中的文本，例如右键单击并粘贴。

```

# ruby-on-rails-3 - 使用 OmniAuth 的 Facebook SDK 邀请请求 - 获取发送请求的用户

> ID：12796833
> 
> 赞同：0
> 
> 时间：2012-10-09T09:25:07.780
> 
> 标签：ruby-on-rails-3, facebook-graph-api, omniauth

我有一个 facebook 应用程序，它使用 javascript SDK 允许用户向他们的朋友发送加入该应用程序的邀请。

假设乔邀请迈克。

Mike 单击请求并被定向到画布应用程序，在画布设置中指向的操作基本上就是这样做的。

```
redirect_to "/users/auth/facebook?signed_request=#{request.params['signed_request']}&state=canvas" 
```

这将使用户正常登录我的应用程序。但是，我希望能够确定是乔邀请了迈克，这样我就可以在我的应用程序内部将他们作为朋友联系起来。

解码后，signed_request 不会显示这一点，但它确实有 request_id。我是否必须使用 request_id 进行另一个 OpenGraph 调用以了解 Joe，然后使用查询字符串将其传递给 /users/auth/facebook，或者有更简洁的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:03:54.523

要获取有关请求及其来源的信息，您必须对 /[request_id] 端点进行 Graph API 调用。您应该返回一个包含发件人的 JSON 响应。然后你可以从那里拿走它。

# apache-flex - 将 ArcGIS Flex API 与 Google 地方信息结合使用

> ID：12796835
> 
> 赞同：1
> 
> 时间：2012-10-09T09:25:18.740
> 
> 标签：apache-flex, google-maps, google-places-api, arcgis

从 Google Places 获得的结果 - 当显示在地图上时 - 必须使用 Google Maps：[https ://developers.google.com/places/policies](https://developers.google.com/places/policies)

尽管 ArcGIS API for Flex 提供了一种使用来自其他来源的 Tiles 的方法 - Google 不支持在其 JavaScript API 之外调用其 Tiles。

我正在开发一个移动应用程序 - 所以使用 javascript 是不可能的。

如果无法加载地图图块，如何满足徽标要求？有没有办法我可以做到这一点？

Google 会为 Flex 开发人员提供休息/解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T05:03:06.460

我想你回答了你自己的问题。您不能将 Google Places 与非 Google 地图一起使用，而且 Google 也无法将 Places 与基于 Flex 的地图应用程序一起使用。如果您不能切换到 JavaScript，那么您唯一的选择就是不使用 Google 地方信息。

# perl - 解析器错误：开始和结束标签不匹配：

> ID：12796841
> 
> 赞同：0
> 
> 时间：2012-10-09T09:25:28.640
> 
> 标签：perl, xml-parsing, mod-perl

我在读取 XML 文件时遇到问题。如果您查看下面的 xml，您会看到 element`<fl> ?fl>`而不是`<fl></fl>`. 我收到错误开始和结束标签不匹配。

如何：

1.  XML 文件中存在错误，例如，`<fl> ?fl>`而不是`<fl></fl>`. 如何在读取 xml 时忽略此类错误或修复它们而不是使用它进行解析？
2.  我只想从 , , 中读取内容`$_->{desc}->[0]->{en}->[0]`而不是从`<de>`, `<es>`, `<fl>`。

现在我正在阅读 XML 文件，例如：

```
package test::test6382_sunseekingeurope;
use strict;
use warnings;
use test;
use base qw/test/;
use URI::URL;
use XML::Simple;
use Data::Dumper;
use constant TASK_ID => 6382;
use constant CR_TYPE => '6382';
use constant IMAGE_PATH => "/home/testco/public_html/files/";#"images/";

sub new
{
my $class = shift;
my $self = $class->SUPER::new(CR_TYPE, TASK_ID);
bless $self, $class;

my $url = 'http://www.onbip.com/xml/sunseeking9.xml';

my $xml = $self->geturl('url'=>$url);
$self->extract($xml);
}

sub extract{
my $self = shift;
my $xmlfile = shift;
my $xml = new XML::Simple(ForceArray=>1,'KeyAttr' =>'image');
my $data = $xml->XMLin($xmlfile);

foreach(@{$data->{property}}){
    my $property = &makeScalar($_->ID->[0]);
    my $description = &makeScalar($_->{desc}->[0]->{en}->[0]); 
```

XML:

```
<property>
<id>226887</id>
<desc>
 <en>
  Nice house in the center of Alhaurin de la Torre with walking distance to all amenities.
 </en>
 <es>
  Bonita casa mata en Alhaurin de la Torre con vistas a la montana, se puede acceder caminando al centro, colegios, etc.
 </es>
  <de>
    guter zustand, bezaubernde immobilie,
  </de>
  <fl>
    bon n acces par la route, partiellement meubl?a proximit?'?les, partiellement r?v
  ?fl>
</desc>
</property> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:30:35.680

没有一般方法可以修复 XML 文件中的错误。您所能做的就是将文件作为无效的 XML 拒绝。 [XML::Simple 的错误处理文档](http://search.cpan.org/~grantm/XML-Simple-1.08/Simple.pm#ERROR_HANDLING)解释说：

> XML 标准对不合规文档的问题非常明确。解析任何单个元素的错误（例如缺少结束标记）必须导致整个文档被拒绝。

基本问题是这样的：一旦允许文件包含错误，它就可以包含任何内容。没有办法解析它。真的没有办法知道应该“纠正”什么。

如果出于某种原因，您的输入有一个非常具体、可预测的错误，您可以在将其传递给`XML::Simple`. 只要您知道一些特定的结束标签将有`?`or`?/`而不是`</`，您就可以执行以下操作：

```
my $xmlfile = shift;

my $xml = new XML::Simple(ForceArray=>1,'KeyAttr' =>'image');

#Try it to parse the file as is first.
my $data = eval { $xml->XMLin($xmlfile) };

#On error, try fixing.
if ($@)
{
    $xmlfile =~ s/\?\/?(desc|en|es|de|fl)>/<\/$1>/g;
    $data = eval { $xml->XMLin($xmlfile) };
    if ($@) 
    { 
        die "Failed to process the file even after attempting corrections: $@"; 
    }
} 
```

以这种方式使用正则表达式有其危险——您依赖于特定格式的输入 XML。但是，通过首先尝试正常处理文件，至少可以最大限度地减少潜在的损坏。这样，您只会在文件无论如何都会失败的情况下做一些冒险的事情。

*`XMLIn()`更新：为第二次调用添加了错误处理。*

*更新 2：我更新了正则表达式以仅匹配提问者需要的确切情况（在这种情况下，最好尽可能具体以避免误报匹配）。*

# ios - 在 iOS 中向上滑动

> ID：12796842
> 
> 赞同：0
> 
> 时间：2012-10-09T09:25:28.970
> 
> 标签：ios

我想开发一个向上滑动导航，1）相机按钮在锁定的 iPhone 主屏幕上向上滑动 2）从上到下的页面滑动，在 iPhone 屏幕上显示天气详细信息。

示例：http: [//i.stack.imgur.com/BauJ8.jpg](http://i.stack.imgur.com/BauJ8.jpg)

我尝试了不同的页面手势等，但没有运气。

任何人都可以让我知道方法或任何示例教程吗？

非常感激。

谢谢普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:45:42.640

尝试使用[UIPanGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)

使用此手势识别器，您可以处理手势方向和速度。以下是您可能感兴趣的一些操作：

*   (CGPoint)velocityInView:(UIView *)view
*   (CGPoint)translationInView:(UIView *)view

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:31:59.667

带有自定义手势的自定义视图解决了我的问题。

# c# - c# ReadToEnd 使用大 xml 文件时性能缓慢

> ID：12796843
> 
> 赞同：0
> 
> 时间：2012-10-09T09:25:28.847
> 
> 标签：c#, performance

我从服务中获得了巨大的 xml 文件，并且我面临 readtoend 的一些性能问题，这需要大约 2 分钟才能完成 3 replace() 和 1.3 分钟而不使用 replace()。

```
 HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
  using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
{
result = sr.ReadToEnd().Replace("\n", "").Replace("\r", "").Replace("\t", "");   
         sr.Close();
        //ReadToEnd it is taking about 2 minutes to complete 
} 
```

用什么来克服这个性能问题。

**已编辑** xml 文件大小为 2.77 MB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:30:18.683

当您使用 .Replace("\n", "") 时，您实际上复制了整个字符串，在这种情况下您执行了 3 次，更好的方法是将其读入 String builder 并在那里进行替换，您还可以阅读和一次从字符串生成器添加一个字符并跳过不需要的字符。

# jasper-reports - 如何在 iReport 中设置每页的列数限制？

> ID：12796850
> 
> 赞同：2
> 
> 时间：2012-10-09T09:25:57.523
> 
> 标签：jasper-reports, ireport

我正在使用*iReport 4.7*，我想生成 40 列的报告。

*如何限制iReport*中每页的列数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T10:11:30.437

在 iReport Designer 中，您可以找到 Report Inspector，右键单击您的文件并选择页面格式，您可以在自定义格式下提供所需的大小和页面设置。

稍后您可以处理更新的页面大小。

![在此处输入图像描述](../Images/a161fbef538d0c7a8d60c8a5eb29414a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T02:46:23.670

转到属性选项卡并找到“列”，然后在“列”中将数字更改为 40。

[>>点击这里<<](https://i.stack.imgur.com/E33Aj.png)

# git - git：从主分支中删除单个提交

> ID：12796853
> 
> 赞同：0
> 
> 时间：2012-10-09T09:26:08.123
> 
> 标签：git, branch, commit

我不小心将一些更改（提交 C）`master`而不是分支。`branch1`后来我根据这些变化（和）创建了其他分支`branch2`。现在我想`C`从所有分支中删除由提交引入的更改（并将其移至`branch-C`）。可能吗？

现在的情况：

```
A - B - C - D - - L - M - L - M master  
            |     \                     
            |       - N - O - P branch2                           
            \               
             - E - F - G        branch1 
```

期望的情况：

```
 - C                    branch-C 
        /
    A - B - D - - L - M - L - M master  
            |     \                     
            |       - N - O - P branch2                           
            \               
             - E - F - G        branch1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:37:55.763

您必须对每个分支进行 rebase，因为每个提交都通过哈希引用整个父提交链。

你可以做类似的事情

```
for br in master branch1 branch2
do
  git rebase --onto B C "$br" 
done

git branch branch-C C 
```

所写的循环只有在没有冲突的情况下才能无缝工作。一般来说，我建议手动执行它。

此外，如果您是手动操作，则可以进行一些优化。例如

```
git rebase --onto B D master
git rebase --onto Dnew D branch1
git rebase --onto Lnew L branch2 
```

其中`Dnew`和分别是和`Lnew`的变基版本。`D``L`

免责声明：我没有测试过；请先在您的回购副本上对其进行测试。

# zend-framework2 - Zend Autoloader 不加载 Zend 类

> ID：12796857
> 
> 赞同：0
> 
> 时间：2012-10-09T09:26:19.013
> 
> 标签：zend-framework2

我使用 Zend Framework 2.0 在我的应用程序中自动加载 Zend 类，独立于 MVC 框架。

zend 框架的位置，是 C:/wamp/library/zendframework/library（包含 Zend/Soap 等）

下面是我的代码：

```
require_once 'Zend/Loader/StandardAutoloader.php';

$loader = new Zend\Loader\StandardAutoloader(array(
'Zend' => 'c:/wamp/library/zendframework/library'));

$loader = new Zend\Loader\StandardAutoloader();
$loader->registerNamespace('Zend', 'c:/wamp/library/zendframework/library');
$loader->register();

$auto = new Zend/Soap/Server(null,null);
$auto->setClass('services');
$auto->handle(); 
```

我正在尝试加载 Zend/Soap/Server，但我不断收到错误消息：

```
Fatal error: Class 'Zend' not found in C:\wamp\www\Zend_soap\server.php on line 42 
```

在第 42 行：

```
$auto = new Zend/Soap/Server(null,null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T08:02:55.843

# apache - Nutch 不会抓取表单中的所有链接

> ID：12796858
> 
> 赞同：5
> 
> 时间：2012-10-09T09:26:20.683
> 
> 标签：apache, solr, nutch, web-crawler

我在抓取我的网站时遇到问题...有一个带有两个下拉列表的表单...当我开始抓取时，爬虫仅从表单中获取部分链接...从第一个下拉列表中获取从第二个下拉列表中获取部分选项....我尝试更改 nutch-defaults.xml 文件中的一些配置，但一切都一样...

```
I change 
fetcher.threads.per.queue  1 - 10         
db.ignore.internal.links true - false  
db.ignore.external.links false - true  
http.content.limit    65536 - 65536000  
file.content.limit    65536 - 65536000  
db.update.max.inlinks  10.000 - 100.000 
```

有没有其他选项可以帮助我抓取表单中的所有选项......？？感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:38:25.380

**对不起，太低代表发表评论！**

有没有链接。

还有下拉ajax或花哨的东西。记忆中的 Nutch 只会抓取页面上的内容。即，如果您在页面加载时加载前 10 个，并且在用户滚动时仅使用服务加载其余部分，我相信它找不到。

更多信息会很好重新页面....

干杯罗宾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:44:02.097

感谢您的回答。这是 [链接] (auto.am/en)，经过爬网后，我只有大约 100 个品牌，而且并非所有的汽车模型都是我拥有的。...我希望在您获得链接后，您会建议抓取所有汽车品牌和型号的解决方案:)。谢谢。

# jmeter - JMeter 命令行执行 - 返回状态

> ID：12796862
> 
> 赞同：1
> 
> 时间：2012-10-09T09:26:27.570
> 
> 标签：jmeter

我正在通过命令行运行 jmeter 测试计划，并且功能上一切正常，但我想从 jmeter 返回两个值：一个布尔字段，指示执行中的任何步骤是否引发错误（本质上是通过/失败指示器） ，以及在 jMeter 中生成并存储在用户定义变量中的值。是否有可能做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:30:28.320

您可以查看 jmeter maven 插件如何提取数据以用于 maven 报告。

[https://github.com/Ronnie76er/jmeter-maven-plugin/wiki](https://github.com/Ronnie76er/jmeter-maven-plugin/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:01:41.243

您可以添加一个[Beanshell 采样器](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)作为测试的一部分（最后一步）。在此测试步骤中，您可以将这些值写入文件。测试完成后，您会将这些值存储在文件中。

如果您需要进一步的解释/示例，请告诉我

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T08:58:24.943

如果您希望控制台退出代码与 JMeter 测试的测试结果相匹配，请按照以下步骤操作。

您需要`Generate Summary Results listener`在 JMeter 测试中使用。这个监听器可以通过分析控制台输出来检查错误。我在[这里](http://jmeter.512774.n5.nabble.com/Exit-code-as-indicator-of-functional-test-outcome-td5716077.html)找到了这种方法。

如果发生任何错误，您基本上会分析总结结果并相应地设置控制台退出代码。

**grep 方法**

直接使用 jmeter 调用`grep`，[在此处描述](http://jmeter.512774.n5.nabble.com/Exit-code-as-indicator-of-functional-test-outcome-td5716077.html)

```
#!/bin/bash
if java -jar ./apache-jmeter-2.9/bin/ApacheJMeter.jar -n -t x.jmx | grep "0
(0.00%)$"
then
  echo Success
  exit 0
else
  echo Failure
  exit 1
fi 
```

**Python 方法**

或使用 Python

```
#!/usr/bin/bash
jmeter -n  -t script.jmx | process_results.py
if [ $? -ne 0 ]; then
    echo '[TEST FAILED]'
else
    echo '[TEST SUCCESSFUL]'
fi 
```

`process_results.py`- 修改为仅在错误计数 > 0 时发出警报

```
#!/usr/bin/python
import re
import sys

for line in sys.stdin:
    print line,
    match = re.search('summary =[\s].*Err:[ ]{0,10}([1-9]\d{0,10})[ ].*',line)
    print 'Check in line if Err: > 0 -> if so Error occured -> Test fails: '
    print match
    if match :
        print "exit 1"
        sys.exit(1)
print "nothing found - exit 0"
sys.exit(0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T09:54:23.247

最后，我扩展了一个 BeanShell 侦听器脚本，我必须将任何错误的状态以及我需要的变量写入 txt 文件。然后我能够在我的批处理文件中解析这个 txt 文件以提取变量并根据文件中是否存在“错误”检查通过/失败。我在每次执行后删除了 txt 文件，以允许每次执行生成一个新文件。

# java - 如何转储控制台登录文件

> ID：12796867
> 
> 赞同：0
> 
> 时间：2012-10-09T09:26:46.007
> 
> 标签：java, android, logging

在我的 java 项目中，我使用 apache log4j-1.2.17.jar 将日志存储在文件中并手动将这些文件日志上传到服务器以供将来参考，是否有任何其他日志工具或库可以收集并将日志发送到 web 服务定期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:43:34.470

一种明显的方法是编写自己的`PeriodicallyUploadsToServerAppender`而不是使用标准`FileAppender`- 你甚至可以让它扩展 FileAppender 并获得两全其美的效果。

另一种更简单的方法 - 特别是如果您在 unix/linux 平台上 - 是使用`cron`日志`logrotate`并同时将它们发送到您的服务器。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:53:13.757

您可以使用 log4j API 编写自定义附加程序，并可用于记录。

```
public class CustomAppender extends AppenderSkeleton implements Appender {
   protected void append(LoggingEvent loggingEvent) {
    // business logic to send logs to external system/exposed services
   }

   public void close() {

   }

   public boolean requiresLayout() {
        return false;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T06:24:28.993

我从[http://www.tutorialspoint.com/log4j/log4j_logging_files.htm](http://www.tutorialspoint.com/log4j/log4j_logging_files.htm)获得了帮助并更改了 appender。

# python - Django 如何从视图中删除对象？

> ID：12796870
> 
> 赞同：0
> 
> 时间：2012-10-09T09:26:54.853
> 
> 标签：python, django

我是 Django 新手，我的 DeleteView 是这样写的：

```
class ObjectDelete(DeleteView):
    def post(self, request, *args, **kwargs):
        blah blah
        return super(ObjectDelete, self).post(request, *args, **kwargs) 
```

我对如何删除该对象感到困惑，因为我`object.delete`在函数中的任何地方都没有看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:35:47.297

对象的实际删除是由 完成的，它[`DeletionMixin`](https://github.com/django/django/blob/master/django/views/generic/edit.py#L231)是使用的父级。`django.views.generic.edit.BaseDeleteView``DeleteView`

这是[`DeletionMixin`](https://github.com/django/django/blob/master/django/views/generic/edit.py#L231)：

```
class DeletionMixin(object):
    """
    A mixin providing the ability to delete objects
    """
    success_url = None

    def delete(self, request, *args, **kwargs):
        """
        Calls the delete() method on the fetched object and then
        redirects to the success URL.
        """
        self.object = self.get_object()
        self.object.delete()
        return HttpResponseRedirect(self.get_success_url())

    # Add support for browsers which only accept GET and POST for now.
    def post(self, *args, **kwargs):
        return self.delete(*args, **kwargs)

    def get_success_url(self):
        if self.success_url:
            return self.success_url
        else:
            raise ImproperlyConfigured(
                "No URL to redirect to. Provide a success_url.") 
```

它使用 获取要删除的对象`get_object()`。

# asp.net-mvc - 为 @{Html.RenderAction("Controller", "Action");} 添加严格性。由于方法重载，它是否需要很多扩展方法？

> ID：12796873
> 
> 赞同：1
> 
> 时间：2012-10-09T09:27:03.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在努力改变

```
@{Html.RenderAction("Foo", "TheAction");} 
```

至

```
@{Html.RenderAction((FooController c) => c.TheAction );} 
```

这在很多方面都更好，它改进了：

*   F12-导航
*   类型使用检测（resharper 等）
*   方法使用检测
*   严格
*   ...使死链接远离项目的可能性

...所以我写了一个这样的扩展类：

```
using System;
using System.Linq.Expressions;
using System.Reflection;
using System.Text.RegularExpressions;
using System.Web.Mvc;
using System.Web.Mvc.Html;

namespace V3NET.MVC.Extensions
{
    public static class HtmlHelperExtension
    {
        public static void RenderAction<T>
            (this HtmlHelper helper, Expression<Func<T, Func<int, int?, ActionResult>>> action)
        {
            var actionName =
                (
                    (MethodInfo)
                    (
                        (ConstantExpression)
                        (
                            (MethodCallExpression)
                            (
                                ((UnaryExpression)action.Body).Operand
                            )
                        ).Object
                    ).Value
               ).Name;

            var controllerType = action.Parameters[0].Type;
            var controllerName = new Regex("Controller$").Replace(controllerType.Name, "");

            helper.RenderAction(actionName, controllerName);
        }
    }
} 
```

...但是正如您所看到的，我必须针对采取 int, int? 作为论据。

我如何更一般地表达这一点，这样我就不必编写无数的重载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:44:53.780

你可以使用`Expression<Action<TController>>`.

这是您尝试编写的助手的改进版本，它考虑了助手不支持的更多场景，例如异步控制器操作。它还为参数类型添加了一个通用约束，使其成为控制器：

```
public static class HtmlHelperExtension
{
    public static void RenderAction<TController>(
        this HtmlHelper helper, 
        Expression<Action<TController>> action,
        object routeValues
    ) where TController: Controller
    {
        var body = action.Body as MethodCallExpression;
        if (body == null)
        {
            throw new ArgumentException("Must be a method call", "action");
        }

        var controllerName = typeof(TController).Name;
        if (!controllerName.EndsWith("Controller", StringComparison.OrdinalIgnoreCase))
        {
            throw new ArgumentException("Target must end in Controller", "action");
        }
        controllerName = controllerName.Substring(0, controllerName.Length - "Controller".Length);
        if (controllerName.Length == 0)
        {
            throw new ArgumentException("Cannot route to controller", "action");
        }

        var actionName = GetTargetActionName(body.Method);
        helper.RenderAction(actionName, controllerName, routeValues);
    }

    private static string GetTargetActionName(MethodInfo methodInfo)
    {
        string name = methodInfo.Name;
        if (methodInfo.IsDefined(typeof(NonActionAttribute), true))
        {
            throw new InvalidOperationException(
                string.Format(
                    CultureInfo.CurrentCulture, 
                    "Cannot call non action {0}", 
                    name
                )
            );
        }
        var attribute = methodInfo.GetCustomAttributes(typeof(ActionNameAttribute), true).OfType<ActionNameAttribute>().FirstOrDefault<ActionNameAttribute>();
        if (attribute != null)
        {
            return attribute.Name;
        }
        if (methodInfo.DeclaringType.IsSubclassOf(typeof(AsyncController)))
        {
            if (name.EndsWith("Async", StringComparison.OrdinalIgnoreCase))
            {
                return name.Substring(0, name.Length - "Async".Length);
            }
            if (name.EndsWith("Completed", StringComparison.OrdinalIgnoreCase))
            {
                throw new InvalidOperationException(
                    string.Format(
                        CultureInfo.CurrentCulture, 
                        "Cannot call {0}Completed method", 
                        name
                    )
                );
            }
        }
        return name;
    }
} 
```

# python - 在现有函数上创建一个循环，将函数接受的一个参数更改为多个参数

> ID：12796875
> 
> 赞同：0
> 
> 时间：2012-10-09T09:27:04.737
> 
> 标签：python

所以这就是我想做的。我有一个函数和一些参数：

```
Names = ["Whaaaaa", "whoooo", "mamo", "tete", "tetsae"]
QC_ID = 100
NAME_FMT = "DEVICE_%s_%s"

def createE(Names, size = None):
    eName = NAME_FMT % ((",").join(Names[0]), "*")
    return eName 
```

我想要做的是，在不改变函数的情况下，让它根据我输入的数字一遍又一遍地打印出范围名称的文本。例如，它会是这样的：

```
createE(Names[0:3])
DEVICE_100_Whaaaaa
DEVICE_100_whoooo
DEVICE_100_mamo 
```

该函数现在所做的是：

```
createE(Names[0:3])
DEVICE_100_Whaaaaa, DEVICE_100_whoooo, DEVICE_100_mamo 
```

最后我想获取输出（因为`DEVICE_100_Whaaaaa`会创建一些输出）并将其添加到列表中：

```
e = []
e.append(createE(Names[0:3]))
print e
["Hello", "I", "Am"] 
```

我遇到的问题是`createE(Names[0:3])`我需要它在每一行中打印，但它不这样做。:( 我不能改变函数本身。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:35:19.210

[map](http://docs.python.org/library/functions.html#map)函数接受一个函数和一个可迭代对象（如列表），并返回应用于输入每个元素的函数结果列表。

# sql - 从数据表中复制新记录并识别旧记录中的更改

> ID：12796877
> 
> 赞同：1
> 
> 时间：2012-10-09T09:27:15.537
> 
> 标签：sql, sql-server, sql-server-2008, remote-server

假设有两个表：`Remote_table`和`My_table`。

`Remote_table`有 6 列：

```
PROJECT   JOB_TYPE   MONTH  YEAR**       HOURS     IS_DELETED
134393     70         1       2013      30     0
134393     70         2       2013      50     0
134393     70         3       2013      80     0
134393     70         10      2012      10     0
134393     70         11      2012      0      0
134393     70         12      2012      15     0 
```

`My_table`是`remote_table`.

我试图`remote_table`通过这个查询只复制新记录：

```
SELECT    *
FROM [remote_DB].[LudanProjectManager].[dbo].Remote_table            
EXCEPT           
SELECT    *
FROM My_table 
```

`remote_table`它工作正常，但是当对小时列进行更改时，我得到一个重复的主键异常。

任何人都可以想出一种方法来仅复制新记录，`remote_table`并且如果对旧记录进行了更改，则可以识别它们并更新`my_table`相应的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:41:57.093

由于您使用的是 SQL Server 2008，因此您可以使用[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625.aspx)：

```
MERGE INTO My_table AS TGT
USING Remote_table AS SRC
  ON TGT.PROJECT = SRC.PROJECT, -- This is the matching condition. 
     TGT.YEAR    = SRC.YEAR,
   ---
WHEN NOT MATCHED THEN
  INSERT(PROJECT, JOB_TYPE, MONTH, YEAR, HOURS, IS_DELETED)
  VALUES(SRC.PROJECT, SRC.JOB_TYPE, SRC.MONTH, SRC.YEAR, SRC.HOURS,
         SRC.IS_DELETED); 
```

注意：

*   匹配和不匹配的行是根据`ON`子句中指定的代码来确定的，您可能需要使用额外的条件来限制匹配的行，`, TGT.Year = SRC.TGT, ..`或者`PROJECT`只使用`ON TGT.PROJECT = SRC.PROJECT`.
*   您必须以`MEREGE`分号结束语句。这是强制性的。
*   在`INSERT`语句中没有`INTO TableName`，因为目标表的名称已经在`MERGE`子句中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:47:54.057

尝试这个：

```
 MERGE INTO My_table T
USING 
    Remote_table R
    ON T.PROJECT    = R.PROJECT   
WHEN MATCHED THEN
    UPDATE SET
       T.JOB_TYPE=R.JOB_TYPE
       T.MONTH  =R.MONTH  
       T.YEAR =R.YEAR
       T.HOURS =R.HOURS
       T.IS_DELETED=R.IS_DELETED
WHEN NOT MATCHED THEN
    INSERT (T.PROJECT,T.JOB_TYPE,T.MONTH,T.YEAR,T.HOURS,T.IS_DELETED)
    VALUES (R.PROJECT,R.JOB_TYPE,R.MONTH,R.YEAR,R.HOURS,R.IS_DELETED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:35:52.267

识别新：

```
SELECT * FROM [remote_DB].[LudanProjectManager].[dbo].Remote_table RT
WHERE NOT EXISTS
(
   SELECT 1 FROM My_table MT WHERE MT.PROJECT=RT.PROJECT
) 
```

识别变化：

```
SELECT * FROM [remote_DB].[LudanProjectManager].[dbo].Remote_table RT
INNER JOIN My_table MT ON RT.PROJECT=MT.PROJECT
WHERE RT.JOB_TYPE   <> MT.OB_TYPE
OR    RT.MONTH      <> MT.MONTH  
OR    RT.YEAR       <> MT.YEAR
OR    RT.HOURS      <> MT.HOURS 
OR    RT.IS_DELETED <> MT.IS_DELETED 
```

# java - 如何在java中获取.apk文件的大小？

> ID：12796878
> 
> 赞同：0
> 
> 时间：2012-10-09T09:27:18.163
> 
> 标签：java, size, apk

谁能帮我在java代码中找到.apk文件的大小。我尝试使用 fileName.length()。但它没有正确给出尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:30:47.080

与任何其他文件一样，APK 文件的大小可以通过以下方式获得：

```
File f = new File(filename);
long fileSize = f.length()
System.out.println(fileSize + " bytes"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:38:04.217

如果您使用的是 Java 7（您应该），那么这将为您提供文件大小：

```
File file = new File("<filename>");
long size = Files.size(file.toPath()); 
```

# wpf - itempresenter、contenetpresenter、itemcontrol、contentcontrol的区别

> ID：12796879
> 
> 赞同：3
> 
> 时间：2012-10-09T09:27:29.250
> 
> 标签：wpf, silverlight, wpf-controls

之间的显着区别是什么

1.  ItemPreseneter 和 ContentPresenter 也是 WPF 中的 ItemsControl 和 ContentControl，请任何人帮助我了解这些项目的使用以及一些简单的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T15:42:43.357

A`ContentControl`用于显示一个**内容**，它会拉伸以填充其区域。一个`ItemsControl`显示**多个**项目并将填充其区域，但其项目将仅占用它们需要的空间。

这是一些显示它们的简单代码：

```
 <GroupBox>
    <ScrollViewer>
       <ItemsControl 
             ItemsSource="{Binding}">                    
       </ItemsControl>
    </ScrollViewer>
  </GroupBox>

  <GroupBox >
     <Border>
          <ContentControl ContentTemplate="{StaticResource YourTemplate}" Content="{Binding}" />
     </Border>
  </GroupBox> 
```

A`ContentPresenter`通常用于 ContentControl 的 ControlTemplate，而 an`ItemsPresenter`用于 ItemsControl 的模板。这些是添加内容/项目的地方。

这是对高级问题的非常高级的回答。这可以让你开始，但你需要花一些时间研究这些重要的控件才能完全理解。

# python - 是否有支持测试依赖项的 Python 测试框架？

> ID：12796880
> 
> 赞同：2
> 
> 时间：2012-10-09T09:27:29.637
> 
> 标签：python, unit-testing

我正在寻找类似于[JExample](http://scg.unibe.ch/research/jexample)的东西，您可以在其中创建依赖于另一个的测试。有没有支持这个概念的python测试框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:26:25.607

没试过，但看起来你可能会感兴趣：http: [//pypi.python.org/pypi/proboscis/](http://pypi.python.org/pypi/proboscis/)

# php - 变量 $base_path 不起作用

> ID：12796882
> 
> 赞同：0
> 
> 时间：2012-10-09T09:27:31.297
> 
> 标签：php, drupal

我正在尝试在 PHP（在灯服务器上）中获取 base_path 变量的值。

我将代码内部 beta_test 目录直接保存在 www 中。

即，基本路径函数应返回“/beta_test/”。但它只返回单斜杠（“/”）。

我试过的代码是

```
<script type="text/javascript" src="<?php print base_path(); ?>sites/all/themes/people10/slider/call.js"></script> 
```

预期输出为

```
<script type="text/javascript" src="/beta_test/sites/all/themes/people10/slider/call.js"></script> 
```

但它的给予

```
<script type="text/javascript" src="/sites/all/themes/people10/slider/call.js"></script> 
```

我正在使用 php 版本 5.3.3。谁能帮我解决这个问题？我是 php 和 drupal 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:36:30.427

`print $base_path`返回安装 Drupal 的文件夹名称。

完整的基本 URL 是`print $base_url`.

# javascript - Javascript 中的 FOR 循环性能

> ID：12796887
> 
> 赞同：4
> 
> 时间：2012-10-09T09:27:45.533
> 
> 标签：javascript, performance, node.js, loops, for-loop

正如我的研究让我相信 for 循环是 javascript 语言中最快的迭代结构。我在想，为 for 循环声明一个条件长度值会更快……为了更清楚，您认为以下哪个更快？

**示例一**

```
for(var i = 0; i < myLargeArray.length; i++ ) {
    console.log(myLargeArray[i]);
} 
```

**示例二**

```
var count = myLargeArray.length;
for(var i = 0; i < count; i++ ) {
    console.log(myLargeArray[i]);
} 
```

我的逻辑是，在示例中的每次迭代中，在每次迭代中访问 myLargeArray 的长度比访问示例二中的简单整数值的计算成本更高？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:45:41.337

与下面的一些陈述相反，数组的长度不是在每次迭代时计算的。Array 的长度是一个属性，通过修改`pop`, `push`, `shift`,`unshift`等操作来设置`splice`。

不过，您会看到性能受到轻微影响，因为**属性查找的成本高于局部变量**。因此缓存长度是一个好主意。但是，除非您处理庞大的数据集，否则您不会看到很大的不同。

但是有一种特殊情况，确实在每次迭代中都计算了长度。HTML 节点集合就是这种情况。由于这些是活动对象，因此长度不是数组意义上的属性。如果你这样做：

```
for (var i=0; i < collection.length; i++) {
    collection[i]
}; 
```

然后在每次迭代时解析集合。

至于优化 for 循环，我通常使用以下技术进行缓存：

```
// if order is of no concern, just iterate from length-1 to 0
for (var i = arr.length - 1; i >= 0; i--){
    arr[i]
};

// use the for loop statement to set up scoped variables
for (var i=0, length = arr.length; i < length; i++) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T09:35:55.687

来自[JavaScript Garden](http://bonsaiden.github.com/JavaScript-Garden/#array.general)，一个关于 JavaScript 怪癖的好资源。

> 尽管长度属性是在数组本身上定义的，但在循环的每次迭代中进行查找仍然存在开销。虽然最近的 JavaScript 引擎可能会在这种情况下应用优化，但无法判断代码是否会在这些较新的引擎之一上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:33:21.503

我认为每次都使用第二个版本不会有任何损失，尽管如果数组长度实际上每次都是从头开始计算的，除非数组实际上被循环突变，否则我会感到惊讶。

不要忘记你可以在第一部分声明多个变量`for`：

```
for(var i = 0, count = myLargeArray.length; i < count; i++ ) {
    console.log(myLargeArray[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T10:33:37.780

来自 [高性能 JavaScript](http://shop.oreilly.com/product/9780596802806.do)

减少每次迭代的工作量：

```
//original loops
for (var i=0; i < items.length; i++){
process(items[i]);
}

var j=0;
while (j < items.length){
process(items[j++]]);
}

var k=0;
do {
process(items[k++]);
} while (k < items.length);

//minimizing property lookups
for (var i=0, len=items.length; i < len; i++){
process(items[i]);
}

var j=0,
count = items.length;
while (j < count){
process(items[j++]]);
}

var k=0,
num = items.length;
do {
process(items[k++]);
} while (k < num);

//minimizing property lookups and reversing
for (var i=items.length; i--; ){
process(items[i]);
}

var j = items.length;
while (j--){
process(items[j]]);
}

var k = items.length-1;
do {
process(items[k]);
} while (k--); 
```

减少迭代次数：

```
//credit: Jeff Greenberg
var i = items.length % 8;
while(i){
process(items[i--]);
}
i = Math.floor(items.length / 8);
while(i){
process(items[i--]);
process(items[i--]);
process(items[i--]);
process(items[i--]);
process(items[i--]);
process(items[i--]);
process(items[i--]);
process(items[i--]);
} 
```

请参阅[JavaScript 优化](http://home.earthlink.net/~kendrasg/info/js_opt/jsOptMain.html#fastDuffsdevice)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T09:31:06.870

是的，您是对的 myLargeArray.length 正在循环的每次迭代中计算（第一个示例）。[链接1 链接](https://stackoverflow.com/questions/6973942/is-optimizing-javascript-for-loops-really-necessary) [2](http://www.phpied.com/extreme-javascript-optimization/)

```
for(var i = 0; i < myLargeArray.length; i++ ) {
    console.log(myLargeArray[i]); 
} 
```

# lan - 在 LAN 上部署独立的 Java 应用程序

> ID：12796893
> 
> 赞同：1
> 
> 时间：2012-10-09T09:28:13.007
> 
> 标签：lan

我使用 eclipse 开发了一个简单的 java 应用程序，我已经将我的代码转换为 .jar 文件，并再次将我的 .jar 文件转换为 .exe 文件。我的程序将允许用户对数据（每天的客户数量）进行编码，并且可以（每天）调用/读取这些数据，如果我运行我的程序，数据编码将保存到我的 .exe 文件所在的同一文件夹中。我的问题是，如何在我们的局域网上实现我的 java 应用程序？用户可以在哪里对来自我们的一个计算机站（我们局域网的一部分）的数据进行编码，但将数据保存到我们的服务器硬盘而不是站点的硬盘，并且还使用服务器的硬盘调用/读取这些数据应该保存这些数据的磁盘。我不打算将它部署到网络我只打算将我的应用程序部署到我们的局域网，可以这样做吗？我对局域网没有经验。请帮忙。

# javascript - 使用对象数组作为数据在 D3.js 中为 Line 设置动画时遇到问题

> ID：12796894
> 
> 赞同：2
> 
> 时间：2012-10-09T09:28:19.557
> 
> 标签：javascript, svg, d3.js

**当我传入一组新数据时，我似乎无法在折线图之间获得动画过渡。我正在使用一个对象数组作为这样的数据：**

[{ 点击：40 次安装：10 次：“1349474400000”}，{ 点击：61 次安装：3 次：“1349478000000”}]；

**我正在使用此代码来设置我的范围/轴**

```
var xRange = d3.time.scale().range([0, w]),
yRange = d3.scale.linear().range([h , 0]),
xAxis = d3.svg.axis().scale(xRange).tickSize(-h).ticks(6).tickSubdivide(false),
yAxis = d3.svg.axis().scale(yRange).ticks(5).tickSize(-w).orient("left");

var clicksLine = d3.svg.line()
.interpolate("cardinal")
.x(function(d){return xRange(d.time)})
.y(function(d){return yRange(d.clicks)});

var clickPath;
function drawGraphs(data) {

    clickPath = svg.append("g")
        .append("path")
        .data([data])
        .attr("class", "clicks")
        .attr("d", clicksLine);
}

function updateGraphs(data) {

    svg.select('path.clicks')
        .data([data])
        .attr("d", clicksLine)
        .transition()
        .duration(500)
        .ease("linear")
} 
```

我已经尝试了几乎所有能够传入新数据并查看图形之间的动画的方法。不确定我错过了什么？它是否与使用对象数组而不是仅使用平面数字数组作为数据有关？

# php - Rss 提要显示 1970-01-01 pubDate？

> ID：12796895
> 
> 赞同：1
> 
> 时间：2012-10-09T09:28:22.200
> 
> 标签：php, rss

我的 rss 提要在我的移动网站上显示 1970-01-01 pubDate，并在网站上显示正确的 pubDate。饲料损坏了吗？3天前你还在工作。

或者也许我以非标准方式编写了格式？

```
 function get_rss($url, $lang) {
    $rss = new rss_php;
    $rss->load($url);
    $items = $rss->getItems();

    // Sets the maximum items to be listed
    $max_items = 5;

    $count = 0;

    $html = '';
    foreach($items as $index => $item) {
    $pubdate = date("Y-m-d", strtotime(substr($item['pubDate'], 4)));
    $html .= '
    <ul class="rssList">
    <li class="itemDate"><span>' . $pubdate . '</span></li>
    <li class="itemTitle"><a href="'.$item['link'].'"                 title="'.$item['title'].'"                         rel="external">        
 <h2>'.$item['title'].'</h2></a></li>
    <li class="itemText"><span>'.$item['description'].'<span></li>
    </ul>';
    $count++; //Increase the value of the count by 1
    if($count==$max_items) break; //Break the loop is count is equal to the max_loop
    }    
     echo $html;
    } 
```

rss_php的定义

```
 class rss_php {

    public $document;
    public $channel;
    public $items;

    # load RSS by URL
        public function load($url=false, $unblock=true) {
            if($url) {
                if($unblock) {
                    $this->loadParser(file_get_contents($url, false, $this->randomContext()));
                } else {
                    $this->loadParser(file_get_contents($url));
                }
            }
        }
    # load raw RSS data
        public function loadRSS($rawxml=false) {
            if($rawxml) {
                $this->loadParser($rawxml);
            }
        } 
```

解析器

```
 private function loadParser($rss=false) {
    if($rss) {
        $this->document = array();
        $this->channel = array();
        $this->items = array();
        $DOMDocument = new DOMDocument;
        $DOMDocument->strictErrorChecking = false;
        $DOMDocument->loadXML($rss);
        $this->document = $this->extractDOM($DOMDocument->childNodes);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:32:17.387

出于某种原因，对于`for`循环中的项目，`$item['pubDate']`未定义（或包含垃圾），`date`默认为 1970-01-01。确保您的变量始终设置并包含有效[格式](http://php.net/manual/en/datetime.formats.date.php)的日期。

调试您的循环并为每个`item`打印其内容：`var_dump($item['pubDate'])`进一步调查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:54:08.810

问题可能与语言环境设置有关。它无法翻译月份“okt”（应该是英语中的“oct”），但可以正常使用“sep”（英语相同）。该`strtotime()`功能仅适用于英语，但解释了为什么它在几天前可以工作，但现在不行。

你有三个选择：

1.  您可以修复使用 strtotime 生成日期的方式[`setlocale()`](http://php.net/manual/en/function.setlocale.php)。您需要在 RSS 类中使用它，将语言环境设置为英语并输出日期。

2.  [`CreateFromFormat()`](http://php.net/manual/en/datetime.createfromformat.php)在读取字符串时使用，与`SetLocale`读取日期时结合使用。您应该能够翻译外国日期。

3.  自己手动解析日期。`Preg_match()`可能是一个很好的开端。

如果可以的话，选项 1 可能是最简单的。

* * *

编辑（基于评论和编辑的问题）

由于项目数据直接来自 rss 提要（并且不是自行生成的），因此您可能会选择选项 3（自己手动解析字符串）。由于您忽略了星期几，因此您需要转换的唯一位是月份，因此请使用 str_replace：

```
foreach($items as $index => $item) {
    $pubdateForeignString = substr($item['pubDate'], 4);
    $pubdateEnglishString = str_replace(array('mai', 'okt', 'dez'), array('may', 'oct', 'dec'), $pubdateForeignString);
    $pubdate = date("Y-m-d", strtotime($pubdateEnglishString)); 
```

您只需要转换不同的月份 - 我已经对德语进行了测试，但如果有疑问，您可以在 setlocale() 的循环中使用 date('M')。

# jquery - 我们可以使用 PhoneGap 使用 Eclipse 以外的 IDE 构建混合应用程序吗？

> ID：12796899
> 
> 赞同：2
> 
> 时间：2012-10-09T09:28:29.917
> 
> 标签：jquery, html, css, cordova

如果我们用eclipse用什么版本，需要什么sdk。不同平台会不会有不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:36:44.523

您可以使用任何 IDE。这主要取决于您在物理上必须在什么设备上测试您的应用程序。
如果是安卓；去日食，
如果是windows phone；去视觉工作室，
如果是 ios；去xcode。

所有平台的代码都完全相同（尽管有一些怪癖），所以使用哪个 IDE 并不重要。

# javascript - 多个图像的jQuery无限淡入/淡出循环

> ID：12796900
> 
> 赞同：1
> 
> 时间：2012-10-09T09:28:36.993
> 
> 标签：javascript, jquery, loops, infinite

所以我做这个网站designq.ru

您可以看到该网站进行了淡入/淡出和向后的循环。但我不知道如何使它成为一个无限循环。我尝试过使用 while (1<2) {} 循环，但它没有用。这是 HTML 和 jquery 代码：

```
<ul>
<li><a href="industrial.html"><img id="test1" src="71.jpg" alt="81.jpg""></a></li>
<li><a href="sites.html"><img id="test2" src="72.jpg" alt="82.jpg"> </a></li>
<li><a href="interior.html"><img id="test3" src="73.jpg" alt="83.jpg""></a></li>
<li><a href="style.html"><img id="test4" src="74.jpg" alt="84.jpg"></a></li>
<li><a href="furniture.html"><img id="test5" src="75.jpg" alt="85.jpg"></a></li>
<li><a href="politech.htm"><img id="test6" src="86.jpg" alt="87.jpg"></a></li>
</ul>

<script>
var vvv = function(x){
var ASD = $("#test"+x).attr('alt');
var ZXC = $("#test"+x).attr('src');
$("#test"+x).hide('fade', 2000, function() {
$("#test"+x).attr('alt', ZXC);
$("#test"+x).attr('src', ASD).show('fade', 2000);
    });
};

var ggg = function(){
setTimeout('vvv(1)',2000);
setTimeout('vvv(2)',5000);
setTimeout('vvv(3)',8000);
setTimeout('vvv(4)',11000);
setTimeout('vvv(5)',14000);
setTimeout('vvv(6)',17000);

setTimeout('vvv(1)',20000);
setTimeout('vvv(2)',23000);
setTimeout('vvv(3)',26000);
setTimeout('vvv(4)',29000);
setTimeout('vvv(5)',32000);
setTimeout('vvv(6)',35000);
};
$(document).ready(ggg () );
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:31:58.650

您可以使用单个 setInterval 而不是 setTimeout

```
(function() {
    var counter = 1;
    setInterval(function() {
        vvv(counter++);

        if(counter === 7) counter = 1;
    }), 3000);
})(); 
```

# scala - 我可以在 Scala 中没有包私有类吗？

> ID：12796902
> 
> 赞同：18
> 
> 时间：2012-10-09T09:28:48.217
> 
> 标签：scala

对不起，吸引人的标题。;-)

我想在 Scala 中使用包私有方法创建一个包私有类，所以我的类看起来有点像这样：

```
package net.java.truevfs.ext.pace

import ...

private[pace] abstract class AspectController(controller: FsController)
extends FsDecoratingController(controller) {

  private[pace] def apply[V](operation: => V): V

  ... // lots of other stuff
} 
```

但是，如果我使用 javap 检查 Scala 编译器有效创建的内容，我会得到如下信息：

```
$ javap -classpath target/classes net.java.truevfs.ext.pace.AspectController
Compiled from "AspectController.scala"
public abstract class net.java.truevfs.ext.pace.AspectController extends net.java.truevfs.kernel.spec.FsDecoratingController implements scala.ScalaObject{
    public abstract java.lang.Object apply(scala.Function0);
    ...
} 
```

这意味着尽管 Scala 编译器可能尊重访问限制，但我仍然可以从任何 Java 代码调用这个类，这显然违反了封装。

我错过了什么吗？有没有办法使这项工作按预期进行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-09T15:25:09.633

除了@Régis 的回答之外，Scala 编译器不将类包私有的原因是因为根据 Scala 规则，它*可以*从其他包中访问：即`net.java.truevfs.ext.pace`. 例如

```
package net.java.truevfs.ext.pace.subpackage
import net.java.truevfs.ext.pace.AspectController

class Subclass extends AspectController { ... } 
```

在 Scala 中是合法的，但在 Java 类`net.java.truevfs.ext.pace.subpackage`中不能从`net.java.truevfs.ext.pace`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-09T10:31:40.713

你没有错过任何东西。scala 中的许多访问限制在 java 和 jvm 级别都没有等效项。附加信息显然就在 .class 文件中，但作为只有 scala 编译器会解释的自定义注释存在。scala 对象模型只能部分匹配到 jvm 对象模型，java 编译器只会看到这个部分模型。我想说匹配非常接近，scala 编译器在 java 互操作性方面做得很好，但没有什么是完美的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T19:59:26.323

不是一个100％正确的答案......

如果我想用私有类做一些花哨的东西，你可以制作一个包对象。可以像访问任何其他包一样访问包对象。MyClass 类是该包对象的包私有。但是，它不是私有包。

```
package object com.jasongoodwin.foo {
  private class MyClass

  class AnotherClass {
    val myClass = new MyClass
  }
} 
```

# java - 使用Bouncy Castle从android中提取证书信息

> ID：12796903
> 
> 赞同：9
> 
> 时间：2012-10-09T09:28:50.477
> 
> 标签：java, android, bouncycastle

我正在尝试使用充气城堡来读取 Android apk 文件中 CERT.RSA 的内容。

通过使用 ：`openssl pkcs7 -inform DER -in CERT.RSA -noout -print_certs -text`

我得到以下信息，这似乎是正确的：

```
Certificate:
Data:
    Version: 3 (0x2)
    Serial Number:
        93:6e:ac:be:07:f2:01:df
    Signature Algorithm: sha1WithRSAEncryption
    Issuer: C=US, ST=California, L=Mountain View, O=Android, OU=Android, CN=Android/emailAddress=android@android.com
    Validity
        Not Before: Feb 29 01:33:46 2008 GMT
        Not After : Jul 17 01:33:46 2035 GMT
    Subject: C=US, ST=California, L=Mountain View, O=Android, OU=Android, CN=Android/emailAddress=android@android.com
    Subject Public Key Info:
        Public Key Algorithm: rsaEncryption
            Public-Key: (2048 bit)
            Modulus:
                00:d6:93:19:04:de:c6:0b:24:b1:ed:c7:62:e0:d9:
                d8:25:3e:3e:cd:6c:eb:1d:e2:ff:06:8c:a8:e8:bc:
                a8:cd:6b:d3:78:6e:a7:0a:a7:6c:e6:0e:bb:0f:99:
                35:59:ff:d9:3e:77:a9:43:e7:e8:3d:4b:64:b8:e4:
                fe:a2:d3:e6:56:f1:e2:67:a8:1b:bf:b2:30:b5:78:
                c2:04:43:be:4c:72:18:b8:46:f5:21:15:86:f0:38:
                a1:4e:89:c2:be:38:7f:8e:be:cf:8f:ca:c3:da:1e:
                e3:30:c9:ea:93:d0:a7:c3:dc:4a:f3:50:22:0d:50:
                08:07:32:e0:80:97:17:ee:6a:05:33:59:e6:a6:94:
                ec:2c:b3:f2:84:a0:a4:66:c8:7a:94:d8:3b:31:09:
                3a:67:37:2e:2f:64:12:c0:6e:6d:42:f1:58:18:df:
                fe:03:81:cc:0c:d4:44:da:6c:dd:c3:b8:24:58:19:
                48:01:b3:25:64:13:4f:bf:de:98:c9:28:77:48:db:
                f5:67:6a:54:0d:81:54:c8:bb:ca:07:b9:e2:47:55:
                33:11:c4:6b:9a:f7:6f:de:ec:cc:8e:69:e7:c8:a2:
                d0:8e:78:26:20:94:3f:99:72:7d:3c:04:fe:72:99:
                1d:99:df:9b:ae:38:a0:b2:17:7f:a3:1d:5b:6a:fe:
                e9:1f
            Exponent: 3 (0x3)
    X509v3 extensions:
        X509v3 Subject Key Identifier: 
            48:59:00:56:3D:27:2C:46:AE:11:86:05:A4:74:19:AC:09:CA:8C:11
        X509v3 Authority Key Identifier: 
            keyid:48:59:00:56:3D:27:2C:46:AE:11:86:05:A4:74:19:AC:09:CA:8C:11
            DirName:/C=US/ST=California/L=Mountain View/O=Android/OU=Android/CN=Android/emailAddress=android@android.com
            serial:93:6E:AC:BE:07:F2:01:DF

        X509v3 Basic Constraints: 
            CA:TRUE
Signature Algorithm: sha1WithRSAEncryption
    7a:af:96:8c:eb:50:c4:41:05:51:18:d0:da:ab:af:01:5b:8a:
    76:5a:27:a7:15:a2:c2:b4:4f:22:14:15:ff:da:ce:03:09:5a:
    bf:a4:2d:f7:07:08:72:6c:20:69:e5:c3:6e:dd:ae:04:00:be:
    29:45:2c:08:4b:c2:7e:b6:a1:7e:ac:9d:be:18:2c:20:4e:b1:
    53:11:f4:55:d8:24:b6:56:db:e4:dc:22:40:91:2d:75:86:fe:
    88:95:1d:01:a8:fe:b5:ae:5a:42:60:53:5d:f8:34:31:05:24:
    22:46:8c:36:e2:2c:2a:5e:f9:94:d6:1d:d7:30:6a:e4:c9:f6:
    95:1b:a3:c1:2f:1d:19:14:dd:c6:1f:1a:62:da:2d:f8:27:f6:
    03:fe:a5:60:3b:2c:54:0d:bd:7c:01:9c:36:ba:b2:9a:42:71:
    c1:17:df:52:3c:db:c5:f3:81:7a:49:e0:ef:a6:0c:bd:7f:74:
    17:7e:7a:4f:19:3d:43:f4:22:07:72:66:6e:4c:4d:83:e1:bd:
    5a:86:08:7c:f3:4f:2d:ec:21:e2:45:ca:6c:2b:b0:16:e6:83:
    63:80:50:d2:c4:30:ee:a7:c2:6a:1c:49:d3:76:0a:58:ab:7f:
    1a:82:cc:93:8b:48:31:38:43:24:bd:04:01:fa:12:16:3a:50:
    57:0e:68:4d 
```

但是当我使用 Bouncy Castle 时，我没有得到公钥模数和其他必要的东西。pubkey 只是空的。我想我在代码中犯了一些错误，但很奇怪我得到了我想要的一切，除了公钥。

```
X509CertParser certParser = new X509CertParser();
FileInputStream stream;
X509CertificateObject cert= null;
try {
stream = new FileInputStream("CERT.RSA");
    certParser.engineInit(stream);
    cert =  (X509CertificateObject) certParser.engineRead();
    stream.close();

    if(cert.getPublicKey()==null)System.out.println("NULL");

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

此代码打印 NULL，而 openssl 调用告诉我模数等。

我应该怎么做才能在 Java 中获取 pubkey？（也许可以使用 android sdk 或其他东西来获取数据而不是充气城堡）

编辑：

我忘了提到我已经尝试过 David Grants 代码，它给了我错误消息，即 DerInputStream 太大：

```
java.security.cert.CertificateException: Unable to initialize, java.io.IOException: DerInputStream.getLength(): lengthTag=127, too big.
at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:199)
at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:107)
at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:322) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-09T10:03:21.767

你不需要 BC 来从 DER 流中读取证书，你可以在 Java SE 中很好地做到这一点：

```
InputStream in = new FileInputStream("CERT.RSA");
CertificateFactory factory = CertificateFactory.getInstance("X.509")
X509Certificate cert = (X509Certificate) factory.generateCertificate(in); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:14:44.183

如果您打算使用 BouncyCastle，则可以尝试使用[`PEMReader`](http://www.bouncycastle.org/docs/pkixdocs1.5on/org/bouncycastle/openssl/PEMReader.html)该类。（显然，您的证书需要采用 PEM 格式，而不是 DER）。

```
FileReader fileReader = new FileReader("/path/to/cert.pem");
PEMReader pemReader = new PEMReader(fileReader);
Object obj = pemReader.readObject();
pemReader.close(); // sloppy IO handling, be thorough in production code
X509CertificateObject certObj = (X509CertificateObject) obj;
System.out.println(certObj.getPublicKey()); 
```

出于某种原因，您发布的代码不会吸出公钥。我不知道为什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T03:16:49.140

APK 只是一个 jar 文件。使用[JarFile](http://developer.android.com/reference/java/util/jar/JarFile.html)对其进行解析，然后列出[JarEntry](http://developer.android.com/reference/java/util/jar/JarEntry.html)的，调用该`getCertifiates()`方法以获取签名证书。通常只有一个。您可以强制转换`X509Certifiate`以获取所有证书信息。请注意，您不必提取 CERT.RSA 文件，只需将 APK 文件传递​​给`JarFile`构造函数即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T12:26:00.110

`CERT.RSA`您可以使用以下方法读取文件`PKCS7`：

```
PKCS7 p7 = new PKCS7(new FileInputStream("CERT.RSA"));
p7.getCertificates(); 
```

这将为您返回一个`X509Certificate`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-19T05:42:52.653

您可以使用 SpongyCastle 正确获取。我在下面做了一些代码，你实际上可以得到像 openssl 这样的东西。SpongyCastle 罐子可以从下面下载：- [core](https://mvnrepository.com/artifact/com.madgag.spongycastle/core/1.58.0.0) , [prov](https://mvnrepository.com/artifact/com.madgag.spongycastle/prov/1.58.0.0) , [pkix](https://mvnrepository.com/artifact/com.madgag.spongycastle/bcpkix-jdk15on/1.58.0.0)

```
/*
 * This program is used for parsing META-INF/CERT.[RSA|DSA|EC] file and converting it to x509.pem.
 * Ref :- net.sourceforge.dkartaschew.halimede.data.PKCS7Decoder.java
 *
 * Created : 5th February 2020
 * Author  : HemanthJabalpuri
 *
 * This file has been put into the public domain.
 * You can do whatever you want with this file.
 */

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.StringWriter;
import java.security.PublicKey;
import java.security.Security;
import java.security.cert.Certificate;
import java.security.interfaces.RSAPublicKey;
import java.util.ArrayList;
import java.util.Collection;

// need core.jar, prov.jar, bcpkix-jdk15on.jar of spongycastle
import org.spongycastle.cert.X509CertificateHolder;
import org.spongycastle.cert.jcajce.JcaX509CertificateConverter;
import org.spongycastle.cms.CMSSignedData;
import org.spongycastle.jce.provider.BouncyCastleProvider;
import org.spongycastle.openssl.jcajce.JcaPEMWriter;
import org.spongycastle.util.encoders.Base64;

public class ParseCERT {
    private static void usage() {
        System.err.println("Usage : CERT.[RSA|EC|DSA] out.x509.pem");
        System.exit(2);
    }

    public static void main(String[] args) throws Exception {
        if (args.length != 2) usage();

        FileInputStream fis = new FileInputStream(args[0]);
        byte[] data = new byte[fis.available()];
        fis.read(data);
        fis.close();

        Security.addProvider(new BouncyCastleProvider());

        ArrayList<Certificate> certs = new ArrayList<Certificate>();
        CMSSignedData cms = new CMSSignedData(data);
        Collection<?> collection = cms.getCertificates().getMatches(null);
        for (Object o : collection) {
            if (o instanceof X509CertificateHolder) {
                certs.add(
                    new JcaX509CertificateConverter()
                    .setProvider(BouncyCastleProvider.PROVIDER_NAME)
                    .getCertificate((X509CertificateHolder) o)
                );
            }
        }
        if (certs.isEmpty()) throw new RuntimeException("No X509 certs found");

        Certificate cert1 = certs.get(0);
        System.out.println(" Type      : " + cert1.getType());
        PublicKey publicKey = cert1.getPublicKey();
        String algorithm = publicKey.getAlgorithm();
        System.out.println(" Algorithm : " + algorithm);

        FileOutputStream fos = new FileOutputStream(args[1]);
        byte[] pembytes = convertToPem(cert1);
        fos.write(pembytes);
        fos.close();
    }

    private static byte[] convertToPem(Certificate cert) throws Exception {
        StringWriter sw = new StringWriter();
        JcaPEMWriter pw = new JcaPEMWriter(sw);
        pw.writeObject(cert);
        pw.flush();
        pw.close();
        return sw.toString().getBytes();
    }

    public static byte[] convertToPem2(Certificate cert) throws Exception {
        String cert_begin = "-----BEGIN CERTIFICATE-----\n";
        String end_cert = "-----END CERTIFICATE-----\n";
        String b64 = Base64.toBase64String(cert.getEncoded()).replaceAll("(.{64})", "$1\n");
        if (b64.charAt(b64.length() - 1) != '\n') end_cert = "\n" + end_cert;
        String outpem = cert_begin + b64 + end_cert;
        return outpem.getBytes();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-15T15:57:26.693

在 Android 中，您可以使用[X509Certificate](http://developer.android.com/reference/javax/security/cert/X509Certificate.html)抽象类读取包的[数字证书](http://developer.android.com/tools/publishing/app-signing.html)( *META-INF/CERT.RSA* ) 的内容。

```
final String appPackage = "com.example"  // TODO: Add here the package name!!

try {
    final PackageManager pm = getPackageManager();
    final ApplicationInfo ai = pm.getApplicationInfo(appPackage, PackageManager.GET_META_DATA);

    if ( ai != null ) {
        final PackageInfo pi = pm.getPackageInfo(this.packageName, PackageManager.GET_PERMISSIONS);

        if ( pi != null ) {
            final Signature[] signatures = pi.signatures;

            if ( (pi.signatures != null) && (pi.signatures.length > 0) ) {
                for ( final Signature signature : signatures ) {
                    if ( signature != null ) {
                        final InputStream certInputStream = new ByteArrayInputStream(signature.toByteArray());
                        final CertificateFactory certFactory;
                        final X509Certificate x509Cert;

                        try {
                            certFactory = CertificateFactory.getInstance("X509");

                            if ( certFactory != null ) {
                                x509Cert = (X509Certificate) certFactory.generateCertificate(certInputStream);

                                if ( x509Cert != null ) {
                                    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

                                    Log.d(TAG, "Certificate Owner: " + x509Cert.getSubjectDN().toString());
                                    Log.d(TAG, "Certificate Issuer: " + x509Cert.getIssuerDN().toString());
                                    Log.d(TAG, "Certificate Serial Number: " + x509Cert.getSerialNumber().toString());
                                    Log.d(TAG, "Certificate Algorithm: " + x509Cert.getSigAlgName());
                                    Log.d(TAG, "Certificate Version: " + x509Cert.getVersion());
                                    Log.d(TAG, "Certificate OID: " + x509Cert.getSigAlgOID());
                                    Log.d(TAG, "Certificate Valid From: " + dateFormat.format( x509Cert.getNotBefore() ));
                                    Log.d(TAG, "Certificate Valid To: " + dateFormat.format( x509Cert.getNotAfter() ));

                                    try {
                                        final MessageDigest md = MessageDigest.getInstance("SHA-256");
                                        md.update( x509Cert.getEncoded() );

                                        Log.d(TAG, "Certificate SHA-256: " + getHex(md.digest()));
                                    }
                                    catch ( NoSuchAlgorithmException e ) {
                                        //Debug:
                                        Log.e(TAG, "MessageDigest ERROR: " + e.getMessage() + "\n");
                                        //e.printStackTrace();
                                    }
                                }
                            }
                        }
                        catch ( final CertificateException e ) {
                            //Debug:
                            Log.e(TAG, "CertificateFactory ERROR: " + e.getMessage() + "\n");
                            //e.printStackTrace();
                        }
                    }
                }
            }
        }
    }
}
catch ( final PackageManager.NameNotFoundException e ) {
    //Debug:
    Log.e(TAG, "ApplicationInfo ERROR: " + e.getMessage() + "\n");
    //e.printStackTrace();
} 
```

其中用于提取数字证书的**SHA-256 哈希的***getHex()*方法如下：

 **```
/**
 * Get the hex value of a raw byte array.
 *
 * @param raw  the raw byte array.
 * @return the hex value.
 */
public static String getHex( byte[] raw ) {
    final String HEXES = "0123456789abcdef";

    if ( (raw == null) || (raw.length == 0) ) {
        return null;
    }

    final StringBuilder hex = new StringBuilder( 2 * raw.length );
    for ( final byte b : raw ) {
        hex.append(HEXES.charAt((b & 0xF0) >> 4)).append(HEXES.charAt((b & 0x0F)));
    }

    return hex.toString();
} 
```

此外，当它们不为空时，您可以提取**所有者**和**颁发**者字段的所有条目（分别使用[X509Certificate的](http://developer.android.com/reference/javax/security/cert/X509Certificate.html)[getSubjectDN()](http://developer.android.com/reference/javax/security/cert/X509Certificate.html#getSubjectDN%28%29)和[getIssuerDN()](http://developer.android.com/reference/javax/security/cert/X509Certificate.html#getIssuerDN%28%29)方法检索），例如，使用以下代码：

```
for ( final String field : (x509Cert.getSubjectDN().toString()).split(", ") ) {
    if ( field.startsWith("CN=") ) {
        Log.d(TAG, "Common Name: " + field.substring(3));
    }
    if ( field.startsWith("OU=") ) {
        Log.d(TAG, "Organization Unit: " + field.substring(3));
    }
    if ( field.startsWith("O=") ) {
        Log.d(TAG, "Organization name: " + field.substring(2));
    }
    if ( field.startsWith("L=") ) {
        Log.d(TAG, "Locality name: " + field.substring(2));
    }
    if ( field.startsWith("ST=") ) {
        Log.d(TAG, "State or province Name: " + field.substring(3));
    }
    if ( field.startsWith("C=") ) {
        Log.d(TAG, "Country: " + field.substring(2));
    }
    if ( field.startsWith("DC=") ) {
        Log.d(TAG, "Domain Component: " + field.substring(3));
    }
} 
```**

# windows-server-2008 - Windows Server - PHP 文件现在需要绝对路径而不是相对路径

> ID：12796905
> 
> 赞同：1
> 
> 时间：2012-10-09T09:28:55.923
> 
> 标签：windows-server-2008, windows-server

对于我的罪过，我目前正在为一家公司管理一个 Windows Server（标准版）盒子。他们在这个盒子上设置了几个作为计划任务运行的 python 和 PHP 脚本。在过去几周的某个时候，这些脚本停止工作。我已将罪魁祸首缩小到脚本包含文件的方式。

当前文件包含在 PHP 脚本中，如下所示：

```
require 'example.php'; 
```

这就是问题所在，将这些更改为：

```
require 'C:\scripts\example.php'; 
```

工作正常...盒子上发生了一些变化，这意味着 require 调用现在需要绝对路径而不是相对路径。

我已经对此进行了谷歌搜索，但与大多数 MS 产品一样，文档和支持充其量只是相当粗略。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:41:22.127

这应该适合你

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]);

include "$root/inc/include1.php"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:13:10.477

检查您的 PHP include_path 设置，可能已删除脚本路径。

# c# - 将 Visual Studio 图表添加到 PowerPoint

> ID：12796910
> 
> 赞同：0
> 
> 时间：2012-10-09T09:29:43.850
> 
> 标签：c#, visual-studio-2010, charts, powerpoint

我已经搜索了一段时间，但无法确定如何将使用 c# 在 Visual Studio 2010 中创建的图表导出到 Excel 文件中。这是创建我的图表的代码

```
chart1.ChartAreas.Add("zz");
            chart1.ChartAreas["zz"].AxisX.Minimum = 0;
            chart1.ChartAreas["zz"].AxisX.Interval = 1;
            chart1.ChartAreas["zz"].AxisY.Minimum = 0;

            chart1.Series.Add("q");
            chart1.Series.Add("w");

            chart1.Series["q"].Color = Color.Aqua;
            chart1.Series["w"].Color = Color.BurlyWood;

            chart1.Series["q"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;
            chart1.Series["w"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;

            for (int j = 0; j < textAdded.Count; j++)
            {
                chart1.Series["q"].Points.AddXY(j + 1, Convert.ToDouble(textAdded[j]));
                chart1.Series["w"].Points.AddXY(j + 1, Convert.ToDouble(textAdded2[j]));
            }  string ppt_fName = @"U:\ChartAdd.pptx";
            PowerPoint.Application myPPT = new PowerPoint.Application();
            myPPT.Visible = MsoTriState.msoTrue;
            myPPT.Presentations.Open(ppt_fName);

            PowerPoint.Slide s = myPPT.ActiveWindow.View.Slide;
            PowerPoint.Chart ctrng = null;
            //fails due to cast problem
            ctrng = (PowerPoint.Chart)chart1; 
```

它不允许我将图表添加到 powerpoint 幻灯片上，并且想知道如何实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:12:07.567

您可以将图表保存为图像，然后将图像添加到您的 powerpoint。

# android - 为什么 VideoView 不支持 setOnInfoListener？

> ID：12796912
> 
> 赞同：2
> 
> 时间：2012-10-09T09:29:47.217
> 
> 标签：android, video-streaming, android-videoview

我正在创建一个应用程序，用于`VideoView`从 URL 源流式传输视频。视频需要一些时间来缓冲和播放，所以我设置`onPrepareListener`为`VideoView`并`Progress Dialogue`在缓冲时显示并在播放开始时将其删除。但是过了一段时间它又开始缓冲了。我想`Progress Dialogue`再次显示。我之前用`OInfoListener`with`MediaPlayer`来收听缓冲，但`VideoView`我无法设置`OInfoListener`. 我想知道是否可以`setOnInfoListener`使用“VideoView”。如果没有，那么如何达到我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:32:36.723

```
@Override
public void setOnCompletionListener(OnCompletionListener l) {
    super.setOnCompletionListener(l);
}

@Override
public void setOnErrorListener(OnErrorListener l) {
    super.setOnErrorListener(l);
}

@Override
public void setOnPreparedListener(OnPreparedListener l) {
    super.setOnPreparedListener(l);
} 
```

这些是可用于 videoview 的听众

# wpf - WPF：控件的样式不起作用，除非为样式创建控件模板

> ID：12796916
> 
> 赞同：0
> 
> 时间：2012-10-09T09:29:57.470
> 
> 标签：wpf, textbox, styles, controltemplate

最近几天它几乎让我生气。我有一个文本框和 xaml 文件中的样式。但是没有控件模板的样式不能在文本框上生效。然而，控件模板有效，但控件模板似乎完全覆盖了文本框，文本框的默认行为丢失，例如编辑、输入或选择......这是带有控件模板的 xaml 的内容：

```
 <Style TargetType="{x:Type TextBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Border Name="tbBorder"  Background="White"  BorderThickness="0.6" BorderBrush="#B9B9B9">
                        <ContentPresenter/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="true">
                            <Setter Property="BorderBrush" Value="#4D90FE" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="BorderBrush" Value="#4D90FE" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这是根本不起作用的简单样式，

```
 <Style TargetType="{x:Type TextBox}">
       <Style.Triggers>
            <Trigger Property="IsFocused" Value="true">
                <Setter Property="BorderBrush" Value="#4D90FE" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="true">
                <Setter Property="BorderBrush" Value="#4D90FE" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

谢谢！

更新：整个文本框的代码片段：

```
 <TextBox Height="23" HorizontalAlignment="Left" Margin="114,53,0,0" Name="textBox1" VerticalAlignment="Top" Width="150" Text="{Binding Path=TraderAccount, Mode=OneWayToSource, NotifyOnValidationError=True}" BorderBrush="#FFB9B9B9" BorderThickness="1" >
            <TextBox.Style>
                <Style TargetType="{x:Type TextBox}">
                    <Style.Triggers>
                        <Trigger Property="IsFocused" Value="true">
                            <Setter Property="BorderBrush" Value="Red" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="BorderBrush" Value="Red" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:43:32.030

样式设置器对我有用，但我看到的问题是控件动画正在动画化刚刚设置的样式。

您可能想要提取原始控件模板并重新定义它，而不是完全重新定义它。据我所知，文本框控件比带有内容演示器的边框更复杂（尽管我从未提取过它的控件模板！）并且它可能有几个边框可以为其提供所有状态ETC

您可以使用 Blend 来执行此操作 - 在没有 Blend 的情况下，有用于控件模板和样式的 MSDN 资源：

[http://msdn.microsoft.com/en-us/library/aa970773.aspx](http://msdn.microsoft.com/en-us/library/aa970773.aspx)

编辑：

对于初学者来说，在我看来，您在重新定义的模板中缺少内容“PART”

```
<ScrollViewer Margin="0" x:Name="PART_ContentHost" /> 
```

编辑2：

您是说它不起作用...这对我使用 .NET Framework 4.0 在 WPF 上有效-我将边框颜色更改为“红色”，以确保我可以看到效果并且它肯定有效，除了红色立即淡出，因为控件的视觉状态由视觉状态管理器更改（这就是您需要编辑控件模板并更改视觉状态的原因）

```
<TextBox>  
    <TextBox.Style>  
        <Style TargetType="TextBox">  
            <Style.Triggers>  
                <Trigger Property="IsFocused" Value="true">  
                    <Setter Property="BorderBrush" Value="Red" />  
                </Trigger>  
                <Trigger Property="IsMouseOver" Value="true">  
                    <Setter Property="BorderBrush" Value="Red" />  
                </Trigger>  
            </Style.Triggers>  
        </Style>  
    </TextBox.Style>  
</TextBox> 
```

当您将鼠标悬停在该框上时，您会看到一个立即消失的红色边框

这个 XAML 根本不适合你吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:29:10.637

您的样式确实有效，`Background`在没有模板的情况下设置您的样式中的属性，您会看到它确实被应用了。但是，就像其他人提到的那样，您看不到任何更改的原因是因为默认 WPF 控件模板中的`TextBox`动画（动画值始终优先于本地值、设置器和触发器）。当您重新定义控件模板时，这些动画不再存在，因此您的示例有效。您可以做的是采用默认`TextBox`模板并对其进行修改以适合您的目的（可以在此处找到：http: [//msdn.microsoft.com/en-us/library/cc645061%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc645061%28VS.95%29.aspx)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T09:38:15.357

您没有发布`TextBox`代码，但我认为（它也发生在我身上）您只是忘记设置`BorderThickness`您的`textbox`：

```
<TextBox BorderThickness="4">
        <TextBox.Style>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="IsFocused" Value="true">
                        <Setter Property="BorderBrush" Value="#4D90FE" />
                    </Trigger>
                    <Trigger Property="IsMouseOver" Value="true">
                        <Setter Property="BorderBrush" Value="#4D90FE" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TextBox.Style>
    </TextBox> 
```

# c++ - 使用 WaveOutOpen(C++) 播放 .wav

> ID：12796917
> 
> 赞同：0
> 
> 时间：2012-10-09T09:30:03.227
> 
> 标签：c++, c, winapi, waveout

我需要使用 waveOutOpen 函数播放音频文件（.wav）。我为此找到了手册。[http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3)但我不知道如何更改 .wav 文件。请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:57:38.073

您需要从 .WAV 文件中读取有效负载数据`mmioOpen`的`mmioRead`函数，然后您将能够使用`waveOut*`API 对缓冲区进行排队。如果数据是 PCM 可以直接发送播放，否则可能需要使用 ACM API 解压。

您将找到查找提到的 API 函数的精彩代码片段：

*   [http://read.pudn.com/downloads49/sourcecode/comm/voice_compress/166198/sb2/sb2Dlg.cpp__.htm](http://read.pudn.com/downloads49/sourcecode/comm/voice_compress/166198/sb2/sb2Dlg.cpp__.htm)
*   [http://bcbjournal.org/articles/vol2/9808/Low-level_wave_audio__part_2.htm](http://bcbjournal.org/articles/vol2/9808/Low-level_wave_audio__part_2.htm)
*   [http://frolov-lib.ru/books/bsp/v15/ch2_4.htm](http://frolov-lib.ru/books/bsp/v15/ch2_4.htm)（如果您阅读俄语，似乎是这样）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T03:36:35.697

我就是这样做的（wav文件存储在资源中）：

```
static void PlaySound(LPCTSTR lpszSound)
{
   HRSRC hRes; // resource handle to wave file
   HGLOBAL hData;
   BOOL bOk = FALSE;
   if ((hRes = ::FindResource(AfxGetResourceHandle(), lpszSound,
     _T("WAVE"))) != NULL &&
     (hData = ::LoadResource(AfxGetResourceHandle(), hRes)) != NULL)
   {
      // found the resource, play it
    bOk = ::sndPlaySound((LPCTSTR)::LockResource(hData),
         SND_MEMORY|SND_ASYNC|SND_NODEFAULT);
    ::FreeResource(hData);
   }
   //if (!bOk)
   //{
   //   static BOOL bReported = FALSE;
   //   if (!bReported)
   //   {
   //      AfxMessageBox(IDS_CANNOT_PLAY_SOUND);
   //      bReported = TRUE;       // once please
   //   }
   //}
}

inline static void PlaySound(UINT nIDS)
{ ::PlaySound(MAKEINTRESOURCE(nIDS)); } 
```

# android - main.xml 中的更改不会反映在 netbeans 中的 android 应用程序中

> ID：12796918
> 
> 赞同：1
> 
> 时间：2012-10-09T09:30:10.113
> 
> 标签：android, netbeans-7

我是安卓应用程序的新手。我正在使用`netbeans 7.0.1 IDE`开发android应用程序。我在主 java 文件中编写了以下代码：

```
package com.test.helloworld;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class helloworld extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     TextView t1=new TextView(this);
    t1.setText("hello world..!!!!");
    setContentView(t1);
} 
```

}

这工作正常。我编辑了`main.xml`文件以显示 a `textfield`，`button`如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"

>
    <Button  
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"/>

    <EditText android:id="@+id/edit_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"/>

</LinearLayout> 
```

当然我已经在`strings.xml`. 但是当我尝试运行我的应用程序时，这些并没有显示... :( 。我的意思是之前显示的相同字符串正在显示。

任何人都可以弄清楚是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:36:12.837

从您的活动的 onCreate 方法中删除以下行

```
TextView t1=new TextView(this);
t1.setText("hello world..!!!!");
setContentView(t1); 
```

因为您正在设置`contentView`from `main.xml`，然后再次创建 TextView 动态并将该 TextView 设置为 contentView。所以你得到了静态字符串`"hello world..!!!!"`

**编辑**

`android:oreintation`您用于设置方向的行中有拼写错误。改用“android：orientation”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:34:31.750

`setContentView(t1);`从您的代码中删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:45:51.377

```
public void setContentView (int layoutResID) 
```

> 从布局资源中设置活动内容。资源将被膨胀，将所有顶级视图添加到活动中。

```
public void setContentView (View view) 
```

> 将活动内容设置为显式视图。此视图直接放置在活动的视图层次结构中。它本身可以是一个复杂的视图层次结构。

来自[developer.android.com](http://developer.android.com/reference/android/app/Activity.html#setContentView%28int%29)

由于您调用了两次，因此第二次调用确实覆盖了第一个视图。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-09T09:35:25.030

右键单击您的项目并清理它..

从设备或模拟器卸载您的应用程序.....

然后再次重新安装......

我希望它会工作我的朋友

# google-chrome - 内联安装 chrome 扩展时出现“未捕获的无效 Chrome Web Store 项目 URL”

> ID：12796923
> 
> 赞同：15
> 
> 时间：2012-10-09T09:30:25.107
> 
> 标签：google-chrome, google-chrome-extension

我创建了一个 Chrome 扩展并将其发布到 Chrome Webstore 上的测试组。当我尝试从我的站点加载（添加）扩展程序时，出现错误

> 未捕获的无效 Chrome 网上应用店项目 URL。

网上商店 javascript 文件中的方法`Installer.prototype.install = function(url, onSuccess, onFailure)`（由 chrome 提供以在浏览器上安装扩展程序）。

我已经通过 Chrome 接近的内联安装来安装扩展程序。

我已经通过浏览器地址空间验证了内联安装的“url”，该地址空间正确获取了 chrome 网上商店的扩展位置。

我找不到问题，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T04:07:06.713

确保您的 URL 格式为`https://chrome.google.com/webstore/detail/itemID`。Chrome 网上应用店最近开始宣传`https://chrome.google.com/webstore/detail/*title*/itemID`不接受内联安装的表单 URL。

例如，对于[Google Mail Checker](https://chrome.google.com/webstore/detail/google-mail-checker/mihcahmgecmbnbcchbopgniflfhgnkff)，URL 应该是`https://chrome.google.com/webstore/detail/mihcahmgecmbnbcchbopgniflfhgnkff`，而不是`https://chrome.google.com/webstore/detail/google-mail-checker/mihcahmgecmbnbcchbopgniflfhgnkff`。

# c++ - 检查一张图片是否是另一张图片的移位

> ID：12796925
> 
> 赞同：2
> 
> 时间：2012-10-09T09:30:34.040
> 
> 标签：c++, image, image-processing, c++11

我有两个图像（大小相同），我想检查第二个图像是否与第一个相同，但有一些偏移。所以更正式地说，我有两个相同大小的矩阵 A，B，我想检查一个子矩阵B 发生在 A 中。但是由于这张图片很大（400x400），我需要一种有效的方法来做到这一点。可接受的复杂度是 O(n^3)。有没有办法可以做或者我应该让图像更小？:)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T09:51:45.277

您可以简单地使用普通的 2D 互相关并检测最大值所在的位置以确定 (x,y) 偏移量。遵循[互相关定理](http://mathworld.wolfram.com/Cross-CorrelationTheorem.html)，您可以在傅里叶域中有效地实现这一点。

在 github 上的 Matlab 中查看这个简单的示例，[互相关](https://github.com/mdiephuis/sandbox/blob/master/so/m_xcorr2.m)和[峰值查找](https://github.com/mdiephuis/sandbox/blob/master/so/m_translation_offset.m)

编辑

以下是关于图像*刚性配准的简短且大部分不完整的指南。*互相关思想的要点如下：假设我有一个一维向量：

`t = [1 2 3 1 2 3 4 ]`

我将此向量移动 -4 个位置，从而产生一个新向量`t2`：

`t2 = [2 3 4 1 2 3 1]`

现在我来看看和`c`之间所谓的互相关：`t``t2`

`c = [1 5 11 15 17 25 38 37 28 24 29 18 8]`

现在，这个互相关向量的最大值`38`位于 position 或 index 上`7`。我们可以用它来确定移位，如下所示：

`offset = round((7-(length(c)+1))/2)`

`offset = -4`

其中`length()`给出了互相关结果的维度或该维度中元素的数量。

现在，应该很明显，空间域中的互相关需要大量操作。这就是上面提到[的互相关定理](http://mathworld.wolfram.com/Cross-CorrelationTheorem.html)发挥作用的地方，它将空间域中的相关性与傅里叶域中的乘法联系起来。傅立叶变换具有许多非常快速的实现（FFT），需要的操作要少得多，因此它们被用于确定互相关。

有许多方法可以处理所谓的刚性配准，从卫星图像和假日图像的拼接到医学成像应用中常见的来自不同来源的叠加图像。

在您的特定情况下，您可能想看看[Phase correlation](http://en.wikipedia.org/wiki/Phase_correlation)。此外[，C 书中的 Numercial recipes](http://www.nr.com/oldverswitcher.html)包含有关傅立叶和相关性的一章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T10:01:49.817

这个问题在文献中被称为“二维模式匹配”（提示：google it）。
这是一篇描述最优算法和朴素算法的论文：

[快速二维模式匹配](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.45.581&rep=rep1&type=pdf)

另一个流行的术语是“子矩阵匹配”，但这通常在您想要一定程度的模糊性而不是精确匹配时使用。这是此类算法的示例：

[部分匹配引导图像标记的子矩阵匹配部分形状识别](http://people.rit.edu/esseee/docs/02.pdf)

# c# - 无法使用 C# 在 SQLite 中插入数据

> ID：12796927
> 
> 赞同：1
> 
> 时间：2012-10-09T09:30:42.510
> 
> 标签：c#, sqlite, embedded-resource

我的问题是我无法使用 C# 将数据插入 SQLite。但是我可以选择记录并使用数据集检索它。SQLite 数据库文件包含在解决方案目录中，SQlite 文件的 Build Action 属性在 Visual Studio 2008 中设置为“Embedded Resource”。C# 代码如下：

```
 private void button2_Click(object sender, EventArgs e)
    {
        SQLiteConnection con = new SQLiteConnection("Data Source=MonitoringDB.s3db;Version=3;New=True;Compress=True;Synchronous=Off");
        SQLiteCommand cmdinsert = new SQLiteCommand("Insert into Parameters(Id,Day,Time,Parameter) values(1,1,1,15) ", con);
        con.Open();
        cmdinsert.ExecuteNonQuery();
        con.Close();
    } 
```

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:36:46.137

您无法插入，因为数据库嵌入在您的 EXE 文件中。而且您无法更改嵌入式资源。您可以做的是考虑在启动时将资源复制到磁盘，如果它尚不存在并在该副本上工作。

# python - 使用python打开rar文件并读取csv文件

> ID：12796928
> 
> 赞同：4
> 
> 时间：2012-10-09T09:30:43.510
> 
> 标签：python, csv, rar

我需要编写一个程序来打开一些包含 csv 文件的 rar 文件并读取它们。我知道有用于此目的的外部库，但是实现此类任务的最佳方式或库是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:44:05.767

Python 随附[电池](http://docs.python.org/tutorial/stdlib.html#batteries-included)。[`csv`](http://docs.python.org/library/csv.html)是这些电池之一。

可以通过[外部库](https://pypi.python.org/pypi/rarfile)添加对 RAR 的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T20:28:18.657

如前所述，有一个用于 python 的 RAR 库。话虽如此，您仍然需要在计算机上安装 unrar 程序。使用 mac，您可以通过 homebrew 安装它：

```
brew install unrar 
```

安装后，您的 python 脚本可能如下所示：

```
import rarfile, csv
rar_path = rarfile.RarFile("/path/to/rar_file.rar")
csv_file_name = "rar_file.csv"
rar_file = rarfile.RarFile.open(rar_path, csv_file_name)
csv_reader = csv.reader(rar_file, delimiter=',')

# Should output first line of file (typically CSV header)
print csv_reader.next() 
```

# iphone - UITextField 缺少粘贴功能

> ID：12796930
> 
> 赞同：1
> 
> 时间：2012-10-09T09:30:51.827
> 
> 标签：iphone, ios, uitextfield, uitextfielddelegate

如果需要，我可以提供代码，但是我的问题看起来很重要。我在一个可以复制和粘贴的视图中有一个 UITextField 。行动后，我不能再做一次。它只工作一次。

背后的原因可能是什么？是否可能由于窗口中的另一个视图而未显示粘贴菜单？

一些代码：

```
 myTextField = [[UITextField alloc] initWithFrame:CGRectMake(0,1,320,50)];
    [myTextField setFont:[UIFont boldSystemFontOfSize:40]];
    [myTextField setTextColor:[UIColor whiteColor]];
    [myTextField setText:@""];
    [myTextField setBorderStyle:UITextBorderStyleNone];
    [myTextField setEnabled:YES];
     [myTextField setKeyboardType:UIKeyboardTypePhonePad];
    [myTextField setDelegate:self];
    myTextField.inputView = hiddenView; 
```

和

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if(action == @selector(paste:))
        return YES;
    return NO;
} 
```

我是否需要在与 UITextField 相关的 viewWillAppear 方法中添加一些内容？正如我所说的第一次工作正常。

**更新：**第一次粘贴后，复制/粘贴/选择机制在所有视图中停止在我的应用程序上工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:30:33.573

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender 
{
    if (sel_isEqual(action, @selector(paste:)))
    {
       return YES;
    }
    return [super canPerformAction:action withSender:sender];
} 
```

# .net - 如何捕获特定的 OleDbException？

> ID：12796934
> 
> 赞同：2
> 
> 时间：2012-10-09T09:31:07.820
> 
> 标签：.net, exception-handling, oledbconnection, hresult

我需要捕获以下特定异常：

> System.Data.OleDb.OleDbException 被捕获 ErrorCode=-2147467259
> Message="您请求对表的更改不成功，因为它们会在索引、主键或关系中创建重复值。更改包含重复数据的字段中的数据、删除索引或重新定义索引允许重复条目并重试。” Source="Microsoft JET 数据库引擎" StackTrace：在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand 的 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)。 System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior 行为，Object&executeResult) 的 System.Data.OleDb 的 ExecuteCommandText(Object& executeResult)。

我不确定是什么`ErrorCode`，但它看起来不可靠。

我可以依靠`Message`跨平台相同吗？

我可以以某种方式使用`OleDbHResult hr`堆栈跟踪中的值吗？（见[https://stackoverflow.com/a/991660/327528](https://stackoverflow.com/a/991660/327528)）

是对诸如和之`Message`类的词进行文本搜索的唯一解决方案吗？`duplicate``primary key`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:41:39.847

没错，ErrorCode (-2147467259 = 0x80004005 = E_FAIL) 太通用了，并且依赖消息非常脆弱 - 例如考虑本地化。

我会查看该`OleDbException.Errors`系列以尝试找到更具体的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T12:25:36.997

`OleDbException`可以从以下位置找到a 的 JET 错误代码：

```
OleDbError.SQLState 
```

这是`3022`问题中提供的例外情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:18:15.027

您可以尝试对集合`SQLState`中的每个错误使用该属性`OleDbException.Errors`

找到此参考： [SQL 状态错误代码](http://www.rosam.se/doc/atsdoc/Server%20-%20Messages%20and%20Codes/ADC5906BBD514757BAEE546DC6F7A4FA/0.htm)<- 不再工作
更新参考：[SQL 错误代码](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-develop-error-messages)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T13:21:17.107

```
try {
  cmd.ExecuteNonQuery();
} catch (OleDbException ex) {
  if (ex.ErrorCode == -2147467259) {
    MessageBox.Show("Hi , yes");
  }
} 
```

# php - 将mysql代码转换为codeigniter

> ID：12796936
> 
> 赞同：2
> 
> 时间：2012-10-09T09:31:21.977
> 
> 标签：php, mysql, codeigniter

如何将此代码转换为可接受的 codeigniter 代码：

```
mysql_select_db($database_connection_ched, $connection_ched);
$query_Institutions = "SELECT * FROM tb_institutional_profile ORDER BY tb_institutional_profile.institution_name ASC";
$Institutions = mysql_query($query_Institutions, $connection_ched) or die(mysql_error());
$row_Institutions = mysql_fetch_assoc($Institutions);
$totalRows_Institutions = mysql_num_rows($Institutions);

<td width="192"><select name="institution_id">
<?php 
do { 
<option value="<?php echo $row_Institutions['institution_id']?>" ><?php echo $row_Institutions['institution_name']?></option>
<?php
} while ($row_Institutions = mysql_fetch_assoc($Institutions));
?>
</select></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:45:07.413

首先，`database.php`在文件夹中正确设置`application/config/`，然后自动加载或`$this->load->database();`在您的控制器/模型上使用

```
<?php

$this->db->order_by("institution_name", "asc"); 
$result = $this->db->get('tb_institutional_profile');

$totalRows_Institutions = $this->db->count_all_results();

?>

<td width="192"><select name="institution_id">
    <?php 
        foreach($result->result() as $row ){
            ?>
            <option value="<?= $row->institution_id ?>">
            <?= $row->institution_name ?>
            </option>
            <?php
        } 
    ?>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:36:17.577

```
 $this->db->select('*');
    $this->db->from('tb_institutional_profile');
    $this->db->order_by('tb_institutional_profile.institution_name','ASC');
    $query                  = $this->db->get();
    $res                    = $query->result();
    $totalRows_Institutions = $query->num_rows()

    $result  = "<td width='192'>";
    $result .= "<select name='institution_id'>";
  foreach ($query->result() as $row) {
    $result .="<option value='".$row->institution_id."'>'".$row->institution_name."'</option>'";
  }
    $result .= "</select>";
    $result .= "</td>";

return $result; 
```

# dependency-injection - 使用 .Net 和程序集引用进行控制反转

> ID：12796937
> 
> 赞同：2
> 
> 时间：2012-10-09T09:31:30.557
> 
> 标签：dependency-injection, inversion-of-control

在 .Net 应用程序中使用控制反转时，是否可以在主机应用程序中添加对数据层的引用？

假设我有以下个人项目：

*   MyApp.Data（EF 类）
*   MyApp.Business（服务工厂/存储库）
*   MyApp.Services.MyWCFService（主机）
*   MyApp.Presentation.MVC（主机）
*   MyApp.Business.Tests（主机）

在这种情况下，我一直在 MyApp.Business 和宿主应用程序之间使用 IoC - 为每个服务工厂/存储库创建接口，并在宿主应用程序中使用 DI。然后，每个应用程序都可以选择注入自己的业务工厂实现。我从来没有遇到过这个问题，因为我的主机应用程序只依赖于业务层，而且我永远不必引用 MyApp.Data 程序集（我的 MyApp.Business 通常处理对 MyApp.Data 程序集的所有调用，并将结果呈现给复合业务对象）。

我想通过我的最新项目实现的是在各个级别使用 IoC - 即在 MyApp.Data 中创建接口，这样我就可以对 MyApp.Business 应用模拟和适当的单元测试。在我看来，实现这一点的唯一方法是在宿主应用程序中创建对 MyApp.Business 和 MyApp.Data 的程序集引用，然后使用 DI 注入 MyApp.Data 和 MyApp.Business 实现。

这与我在传统 nTier 应用程序中学到的一切相反，尽管我知道是 DI 完成了所有工作，并且参考基本上仅用于解决问题。我是否正确地假设这是处理它的正确方法？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:39:58.687

简而言之：是的，可以从应用程序的主入口点引用应用程序的每个部分和任何部分。

这个概念被称为[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。

# asp.net-mvc - 如何在 mvc3 中制作特定视图的 pdf 报告

> ID：12796940
> 
> 赞同：0
> 
> 时间：2012-10-09T09:31:40.747
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想以表格格式获取所有学生信息，因此我创建了适当的视图。现在我可以制作该视图的 pdf 报告（通过将该视图传递给任何操作），它看起来与视图的外观完全相同？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T10:37:26.450

简短的回答并不容易，您可以使用 iTextSharp（在 NuGet 上可用）并尝试以下操作：

```
public EmptyResult CreatePdf()
{
    var document = new Document(PageSize.A4, 50, 50, 25, 25);

    // Create a new PdfWriter object, specifying the output stream
    var output = new MemoryStream();
    var writer = PdfWriter.GetInstance(document, output);

    // Open the Document for writing
    document.Open();

    var html = RenderRazorViewToString("PdfView", pdfViewModel);

    var worker = new HTMLWorker(document);

    var css = new StyleSheet();
    css.LoadTagStyle(HtmlTags.TH, HtmlTags.BGCOLOR, "#616161");
    css.LoadTagStyle(HtmlTags.TH, HtmlTags.COLOR, "#fff");
    css.LoadTagStyle(HtmlTags.BODY, HtmlTags.FONT, "verdana");
    css.LoadTagStyle(HtmlTags.TH, HtmlTags.FONTWEIGHT, "bold");
    css.LoadStyle("even", "bgcolor", "#EEE");

    worker.SetStyleSheet(css);
    var stringReader = new StringReader(html);
    worker.Parse(stringReader);

    document.Close();

    Response.ContentType = "application/pdf";
    Response.AddHeader("Content-Disposition", "PdfView.pdf");
    Response.BinaryWrite(output.ToArray());

    return new EmptyResult();
}

private string RenderRazorViewToString(string viewName, object model)
{
    ViewData.Model = model;
    using (var sw = new StringWriter())
    {
        var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
        var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
        viewResult.View.Render(viewContext, sw);
        viewResult.ViewEngine.ReleaseView(ControllerContext, viewResult.View);
        return sw.GetStringBuilder().ToString();
    }
} 
```

您将需要摆弄样式和生成的 Html 以使其与 HtmlWorker 一起工作。

高温高压

硅

# javascript - 如何从 Javascript/jQuery 调用 SOAP WS

> ID：12796941
> 
> 赞同：17
> 
> 时间：2012-10-09T09:31:54.080
> 
> 标签：javascript, jquery, soap

我想直接从 Javascript 调用 SOAP WebService。我一直在环顾四周，但仍然无法正常工作。我假设我必须构建 SOAP 信封（见下文）。我也使用 jQuery。

首先，我确定我可以调用位于其他地方的 SOAP Webservice 吗？那就是没有像跨域限制这样的限制。

此外，我不确定我需要使用什么正确的 URL，SOAP 服务是使用[Ladon](http://ladonize.org/index.php/Main_About)公开的，出于调试目的，我检查了 WS 是否与soapUI 配合良好，以下是我可以找到的 URL：

*   WSDL URL : `http://192.168.1.5/ws/MyWS/soap/description`// 据我了解，不可能是这个
*   服务端点：`http://192.168.1.5/ws/MyWS/soap`
*   SOAP动作：`http://192.168.1.5/ws/MyWS/soap/myOperation`

我认为我应该使用端点或 SOAPAction 但它不起作用。我可能会在这里错过一些东西，或者后来的 Javascript 有缺陷，我无法确定。

现在这是我实际调用的 JS（评论中有一些问题）：

```
<html>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<head>

<script type="text/javascript" src="ressources/jquery-1.7.1.min.js"></script>

<script type="text/javascript">

// inspired by http://openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/

var soapServiceURL = 'http://192.168.1.5/ws/MyWS/soap/myOperation; // not sure what to put here from a LADON point of view

function callSOAPWS(myParameter)
{
  var soapMessage =
  '<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:LDetector"> \
     <soapenv:Header/> \
     <soapenv:Body> \
        <urn:myOperation soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"> \
           <myParameter xsi:type="xsd:string">' + myParameter + '</myParameter > \
        </urn:myOperation > \
     </soapenv:Body> \
  </soapenv:Envelope>';

  alert("Check SOAP: [" + soapMessage + "]");

  jQuery.ajax({
          url: soapServiceURL,
          type: "POST",
          dataType: "xml",
          data: soapMessage,
          contentType: "text/xml; charset=\"utf-8\"",

          //processData: false,   // what is it for? may be should be true when using 'complete:' ?
          //timeout: 5000,

          // below I first try to have only 'complete:' then I tried to have 'success:' + 'error:', then the 3\. Nothing seems to be ok. I do not find which one i should use.
          complete: myCallback,

          success: function( response ){
              document.getElementById('debug').innerHTML = document.getElementById('debug').innerHTML + '\n' + 'success!' + '\n';
              alert("success!!!");
          },

          error: function(XMLHttpRequest,textStatus, errorThrown){
              document.getElementById('debug').innerHTML = document.getElementById('debug').innerHTML + '\n' + 'error : ' + textStatus + '\n';
              alert("error : " + textStatus);
          }

  });

  alert('if we reach this line, is it a fail?!');
  return false;
}

function myCallback(xmlHttpRequest, status)
{
  jQuery(xmlHttpRequest.responseXML)
      .find('detected')
      .each(function()
   {
     var result = jQuery(this).find('result').text();
     document.getElementById('debug').innerHTML = document.getElementById('debug').innerHTML + '\n' + result + '\n';
     alert('ok : [' + result + ']');
   });
}

// https://stackoverflow.com/questions/11916780/changing-getjson-to-jsonp?rq=1

jQuery(document).ready(function() {
    callSOAPWS('this is a test');
});

</script>
</head>
<body>

<div id="debug" style="background-color:#EEEEEE; height:250px; width:600px; overflow:auto;">&nbsp;</div>

</body>
</html> 
```

此致

**编辑：**在继续尝试搜索答案的同时，我读到了 => [最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example-using-javascript)，其中 Prestaul 说“这不能用直接的 JavaScript 完成，除非 Web 服务与您的页面位于同一域中。” 所以，也许我正在尝试做一些不可能的事情？是它不能工作的原因吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T08:38:38.403

由于浏览器内置[相同的源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您无法发送跨域 AJAX 请求。为了完成这项工作，包含 jQuery 代码的 HTML 页面必须与 Web 服务 ( `http://192.168.1.5/ws/MyWS/`) 托管在同一域中。

有一些涉及在服务器上使用[JSONP](http://en.wikipedia.org/wiki/JSONP)的解决方法，但由于您的 Web 服务是 SOAP，因此无法正常工作。

如果您无法将 javascript 移动到与 Web 服务相同的域中，唯一可靠的方法是构建一个服务器端脚本，该脚本将与 javascript 代码托管在同一域中，并充当两者之间的桥梁2 个域。因此，您将向服务器端脚本发送 AJAX 请求，该脚本将调用远程 Web 服务并返回结果。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-23T19:10:56.680

这个怎么样？[https://github.com/doedje/jquery.soap](https://github.com/doedje/jquery.soap)

似乎很容易。也许它会帮助你。

例子：

```
$.soap({
url: 'http://my.server.com/soapservices/',
method: 'helloWorld',

data: {
    name: 'Remy Blom',
    msg: 'Hi!'
},

success: function (soapResponse) {
    // do stuff with soapResponse
    // if you want to have the response as JSON use soapResponse.toJSON();
    // or soapResponse.toString() to get XML string
    // or soapResponse.toXML() to get XML DOM
},
error: function (SOAPResponse) {
    // show error
}
}); 
```

将导致

```
<soap:Envelope
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <helloWorld>
        <name>Remy Blom</name>
        <msg>Hi!</msg>
    </helloWorld>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T05:03:06.013

下面的代码工作正常。也许它可以帮助你。

```
 var SoaMessage = '<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >'
                + '<soapenv:Header/>'
                  + '<soapenv:Body>'
                    + '<myoperation soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns="http://MyService/"> '
                     + ' <AgencyId xsi:type="xsd:string">ADBC</AgencyId >'
                  + '</myoperation >'
                 + '</soapenv:Body>'
             + '</soapenv:Envelope>';
    var url = "http://XXXXXXX/XXX/XXXXX?wsdl";
    $.support.cors = true;
    $.ajax({
        type: "POST",
        url: url,
        jsonpCallback: "MyCallbackDED",
        dataType: "xml",
        processData: false,
        contentType: "text/xml; charset=\"utf-8\"",
        success: function (msg) {
            alert("suc: " + msg.tradeLicenseData.master[0].arabicAddress + ": " + msg.tradeLicenseData.master[0].arabicAddress);

        },
        error: function (msg) {
            alert("Failed: " + msg.status + ": " + msg.statusText);
        }

    }); 
```

# unity3d - 在 Unity3D 中将纹理链接到脚本文件

> ID：12796944
> 
> 赞同：0
> 
> 时间：2012-10-09T09:32:04.627
> 
> 标签：unity3d

我是 Unity3D 的新手。我计划使用 Unity3D 为 android 构建一个基本的汽车游戏。我无法创建 GUI 纹理并将其链接到脚本文件。这里的任何人都可以教我如何编写文件或发布指向教我基础知识的网站的链接。我参考过Unity3D手册，不太明白。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:35:22.907

在这里，您有几个具有基本统一培训的网站

[沃克男孩](http://walkerboystudio.com/html/unity_training___free__.html)

[unity3dstudent](http://www.unity3dstudent.com)

无论如何，发布 unity3d 问题的最佳地点是：

[统一答案](http://answers.unity3d.com/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T16:18:00.403

在 Javascript 中：

```
var yourTexture: Texture; 
```

在 C# 中

```
public Texture2D yourTexture; 
```

他们需要公开。将脚本分配给游戏对象后，您将能够在项目检查器中设置纹理。

# algorithm - 旅行推销员变体，规划旅行路线

> ID：12796949
> 
> 赞同：2
> 
> 时间：2012-10-09T09:32:21.393
> 
> 标签：algorithm, graph, shortest-path, dijkstra, traveling-salesman

我正在寻找问题的名称和解决方案的算法。

我有一个连接节点图（A..Z），其中每个节点都连接到其他每个节点。我想绘制通过这些节点访问给定节点子集（A，D，K，W）的最短路径。路径可能包括不在子集中的节点，即 A->C->W->D->K 是可以接受的。在节点之间旅行的成本是非负的，但不一定是线性的。因此，从 A->B->C 的路径段可能比 A->C“更短”

我认为这是旅行销售员的变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:28:00.607

我不知道这个问题是否有一个特殊的名称，但它很容易简化为选定节点的原始旅行商问题。

让所有节点的集合为`V`和选定的节点`W`。我将首先折叠不在 中的节点`W`以获得多重图（就像一个图，但在同一对节点之间可以有多个边）。这里的每条边可能是一个简单的边或来自 的边和节点序列`V\W`。要将其简化为常规图，我们只需选择每对节点可用的最短边，因为任何其他节点显然都不会成为答案的一部分。现在我们必须为简化图解决由此产生的旅行商问题，然后在原始图中重建相应的路径——我们已经在原始图中写下了简化图中每条边对应的实际路径。

# python - 在 XAMPP 中使用 mysql 在 Mac OSX 10.6.8 上安装 MySQLdb for Python 时出错

> ID：12796950
> 
> 赞同：0
> 
> 时间：2012-10-09T09:32:29.727
> 
> 标签：python, macos, xampp, osx-snow-leopard, mysql-python

我正在尝试在 python 中导入 MySQldb 并从 XAMPP 中的 php 脚本调用 python 脚本。这是我所做的：

环境： 1\. Mac OSX 10.6.8 2\. Python 2.6版（默认）[64bit]

到目前为止已完成： 1\. 安装 XAMPP 2\. MySQL 配置路径：/Applications/XAMPP/xamppfiles/bin/mysql_config 3\. 下载 MySQL-python-1.2.4b4 4\. 使用 MySQL 5\. 的配置路径编辑 site.cfg命令

sudo python setup.py clean python setup.py build

得到以下错误：

```
running build
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.6-universal-2.6/MySQLdb
running build_ext
building '_mysql' extension
gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -Os -Wall - Wstrict-prototypes -DENABLE_DTRACE -pipe -Dversion_info=(1,2,4,'beta',4) - D__version__=1.2.4b4 -I/Applications/XAMPP/xamppfiles/include/mysql - I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c _mysql.c -o  build/temp.macosx-10.6-universal-2.6/_mysql.o -mmacosx-version-min=10.4 -arch i386 -arch ppc  -D_P1003_1B_VISIBLE -DSIGNAL_WITH_VIO_CLOSE -DSIGNALS_DONT_BREAK_READ - DIGNORE_SIGHUP_SIGQUIT -DDONT_DECLARE_CXA_PURE_VIRTUAL
In file included from _mysql.c:44:
/Applications/XAMPP/xamppfiles/include/mysql/my_config.h:1053:1: warning: "HAVE_WCSCOLL"  redefined
In file included from   /System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:8,
             from _mysql.c:29: 
```

/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pyconfig.h:803:1：警告：这是之前定义的位置_mysql.c:3131：致命错误：错误写入to -: Broken pipe 编译终止。lipo：无法打开输入文件：/var/tmp//ccQsr7Lk.out（没有这样的文件或目录）错误：命令“gcc-4.2”失败，退出状态为 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T01:30:18.883

百胜安装mysql-devel

点安装 MySQL-python

# asp.net - 是否可以在同一个 ascx 控件中引用同一个 ascx 用户控件

> ID：12796951
> 
> 赞同：1
> 
> 时间：2012-10-09T09:32:35.757
> 
> 标签：asp.net, controls

是否可以在同一个 ascx 控件中使用/引用同一个 ascx 用户控件？首先，我们希望在弹出窗口中的弹出窗口中弹出一个弹出窗口 - 基于条件的 n 级。弹出窗口是用户控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:36:35.813

我想这在以编程方式加载/添加控件时是可能的，例如：

```
this.Controls.Add(LoadControl("~/mycontrol.ascx")); 
```

但是如果你无条件地这样做，那么你会得到一个无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:42:40.410

你不能 ： `Circular file references are not allowed.`

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="WebApplication1.WebUserControl1" %>
<%@ Register TagPrefix="test" TagName="test" Src="~/WebUserControl1.ascx"%> 
```

此代码是不可能的

# ruby - 连续上传时出现弹性搜索连接错误

> ID：12796953
> 
> 赞同：1
> 
> 时间：2012-10-09T09:32:49.030
> 
> 标签：ruby, elasticsearch, tire

我有一个脚本，它从 csv 文件中逐行读取行，并以相同的顺序将其索引到 elasticsearch。我的 elasticsearch 主机是运行脚本的同一台机器。当我突然开始收到以下错误时，除了几行之外，其他一切都正常：

```
W, [2012-10-09T14:46:00.899876 #11567]  WARN -- : Cannot assign requested address connect(2)
D, [2012-10-09T14:46:00.900037 #11567] DEBUG -- : ["/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:644:in `initialize'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:644:in `open'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:644:in `block in connect'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/timeout.rb:44:in `timeout'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/timeout.rb:89:in `timeout'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:644:in `connect'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:637:in `do_start'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/net/http.rb:626:in `start'", "/home/azitabh/.rvm/gems/ruby-1.9.2-p320/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'", "/home/azitabh/.rvm/gems/ruby-1.9.2-p320/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'", "/home/azitabh/.rvm/gems/ruby-1.9.2-p320/gems/tire-0.4.2/lib/tire/http/client.rb:11:in `get'", "/home/azitabh/.rvm/gems/ruby-1.9.2-p320/gems/tire-0.4.2/lib/tire/search.rb:94:in `perform'", "/home/azitabh/.rvm/gems/ruby-1.9.2-p320/gems/tire-0.4.2/lib/tire/search.rb:20:in `results'", "models/test.rb:31:in `get_details'", "models/test.rb:56:in `block in index_test'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/csv.rb:1768:in `each'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/csv.rb:1202:in `block in foreach'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/csv.rb:1340:in `open'", "/home/azitabh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/csv.rb:1201:in `foreach'", "models/test.rb:40:in `index_test'", "models/test.rb:85:in `<main>'"] 
```

并且错误与 csv 中这些行的值无关。我在不同时间在不同地点收到这些错误。

还有另一个错误“WAIT_TIMEOUT”，我有一些时间。无法在此处放置跟踪，因为这次我没有收到该错误。

我正在用红宝石编码并使用“轮胎”宝石与弹性搜索交谈。不过，我不认为这些有任何责任。

在我收到此错误时，JAVA 正在使用我系统内存的 8%。这远低于分配的值 ES_MIN_MEM=2g。

在此先感谢-Azitabh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:52:35.647

发生这种情况是因为轮胎不会自行关闭 tcp 连接。一旦所有可用端口都被占用，在系统关闭所有处于等待状态的连接之前，无法进行进一步的连接。这需要一些时间，任何建立新连接的尝试都会导致 wait_timeout。

# java - 使用Java中的xpath查询表达式获取XML中根元素的属性

> ID：12796958
> 
> 赞同：2
> 
> 时间：2012-10-09T09:32:57.493
> 
> 标签：java, xml, xpath

我有这个 XML

```
 <Results SchemaVersion="1.0" SchemaType="Results" GroupId="-12345" 
     xmlns="http://xyz"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
            <Attempt>
                            <Time>2007-03-30T15:58:15</Time>
                            <Message>This is some message</Message>
            </Attempt>
            <Attempt>
                            <Time>2007-03-30T15:59:45</Time>
                            <Message>This is some other message</Message>
            </Attempt>
      </Results> 
```

我在Java中有这段代码，可以解析上面的xml。我想使用 xpath 查询获取 xml 中根元素的属性。我能够检索根元素的值，但不能检索属性。注意：在这种情况下我不知道属性名称，否则我可以直接访问这些属性

```
 public class Try {

      public static void main(String args[]){

       try{
        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        domFactory.setNamespaceAware(true); 
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse("C:/Documents and Settings/tulans/workspace/WebServiceTool/src/main/resources/Input.xml");
        XPath xpath = XPathFactory.newInstance().newXPath();
        XPathExpression expr = xpath.compile("/*");
        Object result = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) result;     
        System.out.println(nodes.item(0).getLocalName());
        System.out.println(nodes.item(0).getNodeName());

       }catch(Exception e){
         System.out.println(e);
       }
     }
    } 
```

我得到以下结果：

```
 Results
    Results 
```

我还想要根元素属性：

```
 SchemaVersion="1.0" SchemaType="Results" GroupId="-12345" 
     xmlns="http://xyz"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:39:14.887

该类`Node`有一个[`getAttributes`](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getAttributes%28%29)方法可以为您提供所需的东西：

```
NamedNodeMap attributes = nodes.item(0).getAttributes();
for (int i=0, len=attributes.getLenght(); i<len; i++) {
   Attr attr = (Attr)attributes.item(i);
   System.out.println(attr.getName() + "=" + attr.getValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:43:55.637

```
public class Try {

    public static void main(String args[]){

        try{
            DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
            domFactory.setNamespaceAware(true);
            DocumentBuilder builder = domFactory.newDocumentBuilder();
            Document doc = builder.parse("Input.xml");
            XPath xpath = XPathFactory.newInstance().newXPath();
            XPathExpression expr = xpath.compile("/*");
            Object result = expr.evaluate(doc, XPathConstants.NODESET);
            NodeList nodes = (NodeList) result;
            System.out.println(nodes.item(0).getLocalName());
            System.out.println(nodes.item(0).getNodeName());
            NamedNodeMap attributes = nodes.item(0).getAttributes();
            for (int i = 0; i < attributes.getLength(); i++) {
                System.out.println(attributes.item(i));
            }

        }catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:55:21.757

Don 和 Jörn 已经向您展示了如何访问 DOM 树中的属性节点；当您要求使用 XPath 访问它们时，我将展示另一种方法，您可以简单地使用 XPath 表达式`/*/@*`来访问 XPath 数据模型中根元素的属性节点。但是请注意，名称空间声明不是 XPath 数据模型中的属性节点，因此 path 只会找到属性`SchemaVersion="1.0" SchemaType="Results" GroupId="-12345"`。因此，根据您想要的结果，您最好使用 DOM`getAttributes`而不是 XPath。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T10:17:25.723

```
public static void executeXMLToCSV() {
    File fXmlFile = new File(fileLocation);
    List<String> recordIndexCSVList = new ArrayList<String>();
    String recordIndexCSV = "";

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder;
    try {
        dBuilder = dbFactory.newDocumentBuilder();
        Document doc = null;
        try {
            doc = dBuilder.parse(fXmlFile);
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        doc.getDocumentElement().normalize();
        NodeList rootsite = doc.getElementsByTagName("sites");
        Node rootsiteNode = rootsite.item(0);
        NodeList sites = rootsiteNode.getChildNodes();
        for (int siteCtr = 0; siteCtr < sites.getLength(); siteCtr++) {
            Node siteNode = sites.item(siteCtr);
            System.out.println("\nCurrent Element :"
                    + siteNode.getNodeName());
            if (siteNode.getNodeType() == Node.ELEMENT_NODE
                    && "site".equalsIgnoreCase(siteNode.getNodeName())) {
                Element eElement = (Element) siteNode;
                String siteId = eElement.getAttribute("id");
                String siteName = eElement.getAttribute("name");
                System.out.println("Staff id : " + siteId);
                System.out.println("Staff name : " + siteName);

                NodeList categories = siteNode.getChildNodes();
                for (int categoryCtr = 0; categoryCtr < categories
                        .getLength(); categoryCtr++) {
                    Node categoryNode = categories.item(categoryCtr);
                    System.out.println("\nCurrent Element :"
                            + categoryNode.getNodeName());
                    Element cElement = (Element) categoryNode;
                    String categoryId = cElement.getAttribute("id");
                    String categoryName = cElement.getAttribute("name");
                    System.out.println("categoryId : " + categoryId);
                    System.out.println("categoryName : " + categoryName);

                    NodeList fleets = categoryNode.getChildNodes();
                    for (int fleetCtr = 0; fleetCtr < fleets.getLength(); fleetCtr++) {
                        Node fleetNode = fleets.item(fleetCtr);
                        System.out.println("\nCurrent Element :"
                                + fleetNode.getNodeName());
                        Element fElement = (Element) fleetNode;
                        String fleetId = fElement.getAttribute("id");
                        String fleetName = fElement.getAttribute("name");
                        System.out.println("fleetId : " + fleetId);
                        System.out.println("fleetName : " + fleetName);

                        NodeList fleetChilds = fleetNode.getChildNodes();
                        for (int fleetChildCtr = 0; fleetChildCtr < fleetChilds
                                .getLength(); fleetChildCtr++) {
                            Node fleetChild = fleetChilds
                                    .item(fleetChildCtr);
                            if ("assets".equalsIgnoreCase(fleetChild
                                    .getNodeName())) {
                                NodeList assets = fleetChild
                                        .getChildNodes();
                                for (int assetCtr = 0; assetCtr < assets
                                        .getLength(); assetCtr++) {
                                    Node asset = assets.item(assetCtr);
                                    Element aElement = (Element) asset;
                                    String assetId = aElement
                                            .getAttribute("id");
                                    System.out.println("assetId : "
                                            + assetId);
                                    /*
                                     * Finally prepare a list of csv
                                     * strings... after this loop iterate
                                     * the list and prepare the final string
                                     * by concanating all.
                                     */
                                    String recordIndexCSV_index = siteId
                                            + "_" + categoryId + "_"
                                            + fleetId + "_" + assetId;
                                    String recordIndexCSVString = recordIndexCSV_index
                                            + delimeter
                                            + siteId
                                            + delimeter
                                            + categoryId
                                            + delimeter
                                            + fleetId
                                            + delimeter + assetId;
                                    recordIndexCSVList
                                            .add(recordIndexCSVString);
                                }
                            }
                        }
                    }
                }
            }
        }

        for (String recordIndexCSVString : recordIndexCSVList) {
            if ("".equals(recordIndexCSV)) {
                recordIndexCSV = recordIndexCSV + recordIndexCSVString;
            } else {
                recordIndexCSV = recordIndexCSV + seperator
                        + recordIndexCSVString;
            }
        }
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# javascript - 在javascript中将字符串数组拆分为数字数组

> ID：12796962
> 
> 赞同：0
> 
> 时间：2012-10-09T09:33:17.840
> 
> 标签：javascript, jqplot

我正在根据选择的选项从下拉列表中读取一个值。我正在使用 jqPlot 来绘制值。

jqPlot 需要一个值数组，例如`[91, 6, 2, 57, 29, 40, 95]`

但是当我从下拉框中读取值时，它会作为一个完整的字符串出现`"[91, 6, 2, 57, 29, 40, 95]"`

我尝试拆分它，但我得到了`["91", "6", "2", "57", "29", "40", "95"]`它不会正确显示图表。

有没有人以前遇到过这样的事情，我该怎么做才能让我的值转换成一个数字数组。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:35:10.897

您可以使用`JSON.parse()`将该字符串转换为 JavaScript 数组。字符串中的数字没有被引用，因此数组也将包含数字。您可以删除所有解析字符串的代码，因为您不再需要它了。

```
>>> JSON.parse("[91, 6, 2, 57, 29, 40, 95]")
[91, 6, 2, 57, 29, 40, 95] 
```

如果您需要支持旧版浏览器，请将[json2.js](https://github.com/douglascrockford/JSON-js/raw/master/json2.js)添加到原生不支持它的浏览器中的 shim JSON 支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:51:47.347

当您使用 jQuery 时，您可以这样做

```
$.parseJSON("[91, 6, 2, 57, 29, 40, 95]"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T09:40:11.883

您可以使用 JSON.parse 将字符串 "[91, 6, 2, 57, 29, 40, 95]" 更改为数组：

```
​(function(){
    var a = '[1,2,3]';
    var b = JSON.parse('[1,2,3]');
    alert(b +'\n'+ typeof(b)+'\n'+ b[0] );
})()​ 
```

[演示](http://jsfiddle.net/Gt7mw/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T09:35:22.150

您可以使用

```
str.slice(1, -1).split(',').map(function(s){return parseInt(s, 10);}); 
```

# php - 链接到类别 magento

> ID：12796963
> 
> 赞同：1
> 
> 时间：2012-10-09T09:33:19.317
> 
> 标签：php, magento, categories

我希望在 magento 的主页滑块上获得一个产品，以链接到它所在的类别......到目前为止，我有：

```
<?php
     $allIds = $product->getCategoryIds();
     foreach($allIds as $categoryId) {
          $category = Mage::getModel('catalog/category')->load($categoryId);
?>
     <a href="<?php echo $category->getCategoryUrl() ?>"><?php echo$category->getName() ?></a><br/>
<?php
     }
?> 
```

（这在 foreach 项目中运行）这为我提供了类别（这很棒），但是：

`<?php echo $category->getCategoryUrl() ?>`

似乎没有链接到正确的地方（它实际上并没有给我任何东西）。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:42:46.617

如果您只想显示一个类别链接，则无需在循环中加载类别：

```
$category = $product->getCategory();
$url = $category->getUrl(); 
```

更新：我刚刚意识到第一行可能无法在主页上使用。但是您仍然不需要循环：

```
$category = $product->getCategoryCollection()->getFirstItem(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:40:15.050

试试这个

```
<?php echo Mage::helper('catalog/category')->getCategoryUrl($category);?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:49:08.950

您将在此处找到与显示类别和子类别相关的所有内容[在 Magento](http://fishpig.co.uk/blog/display-categories-and-subcategories-in-magento.html)中显示类别和子类别。希望这会有所帮助..

# android - 如何获取每个应用程序在 android 设备中启动的次数？

> ID：12796967
> 
> 赞同：0
> 
> 时间：2012-10-09T09:33:28.633
> 
> 标签：android, android-intent

我正在开发一个可以**计算**数字的测试应用程序。我在设备上启动每个应用程序多少次。我是 Android 新手，一直在努力解决问题。我将非常感谢任何建议。就像我的设备中有 10 个应用程序，然后我的应用程序显示所有应用程序的列表到现在为止我启动这个特定应用程序的次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:54:05.370

我认为了解这一点的最好方法是分析**logcat**，因为每次启动应用程序时，都会写入 logcat。

# asp.net - Ext.Error: Unable to parse the JSON returned by the server: You're trying to decode an invalid JSON String

> ID：12796970
> 
> 赞同：0
> 
> 时间：2012-10-09T09:33:38.027
> 
> 标签：asp.net, json, extjs4

我正在使用 ExtJs 4.0。我想读取图表中的 json 文件，但出现以下错误 **Ext.Error: Unable to parse the JSON returned by the server: You're trying to decode an invalid JSON String.**

**店铺 n 型号：**

```
 Ext.define('chartModel', {
    extend: 'Ext.data.Model',
    fields: [ 
            {name: 'year'},
            {name: 'comedy'},
            {name: 'action'},
            {name: 'drama'},
            {name: 'thriller'}
    ]
});

var myStore = Ext.create('Ext.data.Store', {
    model: chartModel,
    proxy: {
        type: 'ajax',
        url : '/data.json',
        reader: {
            type: 'json',
            root: 'data',
            method: "GET",
            messageProperty: 'jsonData'
        }
    },
    autoLoad: true
}); 
```

**data.json 文件：**

```
data: [{year: 2005, comedy: 34000000, action: 23890000, drama: 18450000, thriller: 20060000}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:50:28.173

JSON 属性名称必须被引用才能被视为有效。此外，您`data`需要成为对象的属性，例如`{"data":[{"year":2005, "comedy":3400000...`.

**编辑：**尼尔说的是正确的。`Ext.decode`不要求属性名称用引号引起来。但是，[JSON 标准](http://www.json.org/) *确实*需要它们，因此您绝对应该养成使用它们的习惯。

# excel - 将列号转换为字母的功能？

> ID：12796973
> 
> 赞同：164
> 
> 时间：2012-10-09T09:33:40.197
> 
> 标签：excel, vba, excel-udf

有没有人有可以从数字返回列字母的 Excel VBA 函数？

例如，输入*100*应该返回`CV`。

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2012-10-09T09:44:55.073

此函数返回给定列号的列字母。

```
Function Col_Letter(lngCol As Long) As String
    Dim vArr
    vArr = Split(Cells(1, lngCol).Address(True, False), "$")
    Col_Letter = vArr(0)
End Function 
```

*第 100 列的测试代码*

```
Sub Test()
    MsgBox Col_Letter(100)
End Sub 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-03-12T16:37:04.687

如果您不想使用范围对象：

```
Function ColumnLetter(ColumnNumber As Long) As String
    Dim n As Long
    Dim c As Byte
    Dim s As String

    n = ColumnNumber
    Do
        c = ((n - 1) Mod 26)
        s = Chr(c + 65) & s
        n = (n - c) \ 26
    Loop While n > 0
    ColumnLetter = s
End Function 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-11-21T21:00:41.657

对我有用的是：

```
Cells(Row,Column).Address 
```

这将为您返回 $AE$1 格式参考。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2018-03-30T15:22:56.157

[![我很惊讶没有人建议：**<code></code> <code>Columns(</code>***<code>Column Index</code>***<code>).Address</code> <代码></代码>**](../Images/ac3590ffb4a10fddb28c651d5aeba7fa.png)](https://i.stack.imgur.com/eA7QK.png)

*   **例如：** `MsgBox Columns( 9347 ).Address` *返回* [![**<code>$MUM:$MUM</code>**](../Images/dfcce0d6dbe0e9b8925e29b3fe0e3088.png)]。

* * *

***仅*返回列字母**（s）：**`Split((Columns(`****`Column Index`*****`).Address(,0)),":")(0)`*****

 ****   **例如：** `MsgBox Split((Columns( 2734 ).Address(,0)),":")(0)` *返回* [![**<code>爸爸</code>**](../Images/fb12bcecc4454333eed9120b1637cbb3.png)]。

* * *

  <img src="https://i.stack.imgur.com/7lg2r.gif" alt="More Examples" title="当然，我手头的时间可能有点太长了...... . 或者也许我看到了一个测试的机会，看看 ScreenToGif 的图像褪色过渡有多平滑/明显。毕竟，Stack Overflow *是一个学习的地方，对吧？（它*与编程相关，所以我*是*技术上的主题！）你可能甚至不知道你可以在 Stack Overflow 帖子中为图像添加工具提示，对吗？你是那个盯着动画足够长的时间来注意到这个工具提示的人 - 并且现在，看，你*仍然*坐在这里，阅读所有内容！现在来吧，'可怜的投票'怎么样？你永远不知道，它可能只会为你赢得一些宝贵的业力积分！:)“ />

* * *

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-05-23T15:22:58.413

还有一种方法可以做到这一点。[Brettdj的回答](https://stackoverflow.com/a/12797190/3357935)让我想到了这一点，但是如果你使用这种方法你不必使用变体数组，你可以直接进入一个字符串。

```
ColLtr = Cells(1, ColNum).Address(True, False)
ColLtr = Replace(ColLtr, "$1", "") 
```

或者可以让它更紧凑一点

```
ColLtr = Replace(Cells(1, ColNum).Address(True, False), "$1", "") 
```

请注意，这确实取决于您引用单元格对象中的第 1 行。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2013-11-27T10:31:57.907

以及使用递归的解决方案：

```
Function ColumnNumberToLetter(iCol As Long) As String

    Dim lAlpha As Long
    Dim lRemainder As Long

    If iCol <= 26 Then
        ColumnNumberToLetter = Chr(iCol + 64)
    Else
        lRemainder = iCol Mod 26
        lAlpha = Int(iCol / 26)
        If lRemainder = 0 Then
            lRemainder = 26
            lAlpha = lAlpha - 1
        End If
        ColumnNumberToLetter = ColumnNumberToLetter(lAlpha) & Chr(lRemainder + 64)
    End If

End Function 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-12-09T12:08:47.240

这可以通过使用公式获得：

```
=SUBSTITUTE(ADDRESS(1,COLUMN(),4),"1","") 
```

因此也可以根据要求编写为 VBA 函数：

```
Function ColName(colNum As Integer) As String
    ColName = Split(Worksheets(1).Cells(1, colNum).Address, "$")(1)
End Function 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-02-17T03:29:01.740

[robertsd 的代码](https://stackoverflow.com/a/15366979/3357935)很优雅，但要使其面向未来，请将 n 的声明更改为 long 类型

如果您想要一个公式来避免宏，这里有一个适用于第 702 列的东西

```
=IF(A1>26,CHAR(INT((A1-1)/26)+64),"")&CHAR(MOD(A1-1,26)+65) 
```

其中 A1 是包含要转换为字母的列号的单元格。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2015-02-04T16:18:07.783

这是[robartsd 答案](https://stackoverflow.com/a/15366979/3357935)的一个版本（具有[Jan Wijninckx 的单行解决方案](https://stackoverflow.com/a/21820200/3357935)的味道），使用递归而不是循环。

```
Public Function ColumnLetter(Column As Integer) As String
    If Column < 1 Then Exit Function
    ColumnLetter = ColumnLetter(Int((Column - 1) / 26)) & Chr(((Column - 1) Mod 26) + Asc("A"))
End Function 
```

我已经使用以下输入对此进行了测试：

```
1   => "A"
26  => "Z"
27  => "AA"
51  => "AY"
702 => "ZZ"
703 => "AAA" 
-1  => ""
-234=> "" 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2014-07-20T14:46:53.813

**最新更新**：请忽略下面的功能，@SurasinTancharoen 设法提醒我它在`n = 53`.
对于那些感兴趣的人，以下是其他损坏的值`n = 200`：

[![的某些值](../Images/6c473a530a79f3ad453716076ec4116f.png)](https://i.stack.imgur.com/9lVYm.png)

[请使用@brettdj 功能满足您的所有需求。它甚至适用于 Microsoft Excel 最新的最大列数限制：`16384`应该给出`XFD`](https://stackoverflow.com/a/12797190/3858066)

[![在此处输入图像描述](../Images/c69ce67143790977e6022cea9af20372.png)](https://i.imgur.com/8bfr4AC.png)

**更新结束**

* * *

以下功能由微软提供：

```
Function ConvertToLetter(iCol As Integer) As String
   Dim iAlpha As Integer
   Dim iRemainder As Integer
   iAlpha = Int(iCol / 27)
   iRemainder = iCol - (iAlpha * 26)
   If iAlpha > 0 Then
      ConvertToLetter = Chr(iAlpha + 64)
   End If
   If iRemainder > 0 Then
      ConvertToLetter = ConvertToLetter & Chr(iRemainder + 64)
   End If
End Function 
```

资料来源：[如何将 Excel 列号转换为字母字符](http://support.microsoft.com/kb/833402)

适用于

*   微软办公软件**Excel 2007**
*   Microsoft Excel 2002 标准版
*   Microsoft Excel 2000 标准版
*   Microsoft Excel 97 标准版

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-03-20T18:43:32.647

这是一个基于[@DamienFennelly](https://stackoverflow.com/a/20131777/3357935)上面回答的函数。如果你给我一个大拇指，也给他一个大拇指！:P

```
Function outColLetterFromNumber(iCol as Integer) as String
    sAddr = Cells(1, iCol).Address
    aSplit = Split(sAddr, "$")
    outColLetterFromNumber = aSplit(1)
End Function 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-07-29T12:39:52.723

有一个非常简单的使用 Excel 功能的方法：使用`Range.Cells.Address`属性，这样：

```
strCol = Cells(1, lngRow).Address(xlRowRelative, xlColRelative) 
```

这将返回第 1 行所需列的地址。取它的`1`：

```
strCol = Left(strCol, len(strCol) - 1) 
```

请注意，它是如此快速和强大，以至于您可以返回甚至存在的列地址！

使用属性替换`lngRow`所需的列号`Selection.Column`！

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-11-05T17:30:41.840

无论位于 X 行、Y 列的单元格的一个代码行中的哪一列，这都将起作用：

```
Mid(Cells(X,Y).Address, 2, instr(2,Cells(X,Y).Address,"$")-2) 
```

如果您有一个具有唯一定义名称“Cellname”的单元格：

```
Mid(Cells(1,val(range("Cellname").Column)).Address, 2, instr(2,Cells(1,val(range("Cellname").Column)).Address,"$")-2) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-08-26T14:15:33.093

这是一个简单的可以使用的衬里。

```
ColumnLetter = Mid(Cells(Row, LastColA).Address, 2, 1) 
```

它只适用于 1 个字母的列名称，但它适用于简单的情况。如果您需要它专门用于 2 个字母的名称，那么您可以使用以下内容：

```
ColumnLetter = Mid(Cells(Row, LastColA).Address, 2, 2) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-12-27T23:51:48.537

所以我在这里聚会迟到了，但我想提供另一个没有人解决但不涉及数组的答案。您可以通过简单的字符串操作来做到这一点。

```
Function ColLetter(Col_Index As Long) As String

    Dim ColumnLetter As String

    'Prevent errors; if you get back a number when expecting a letter, 
    '    you know you did something wrong.
    If Col_Index <= 0 Or Col_Index >= 16384 Then
        ColLetter = 0
        Exit Function
    End If

    ColumnLetter = ThisWorkbook.Sheets(1).Cells(1, Col_Index).Address     'Address in $A$1 format
    ColumnLetter = Mid(ColumnLetter, 2, InStr(2, ColumnLetter, "$") - 2)  'Extracts just the letter

    ColLetter = ColumnLetter
End Sub 
```

输入格式`$A$1`后，使用`Mid`函数从位置 2 开始计算第一个`$`，然后使用 找到第二个`$`出现在字符串中的`InStr`位置，然后减去 2 以计算该起始位置。

这使您能够适应所有可能的列。因此，`ColLetter(1)`返回“A”，并 `ColLetter(16384)`返回“XFD”，这是我的 Excel 版本的最后一个可能的列。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-11-11T12:09:03.123

Easy way to get the column name

```
Sub column()

cell=cells(1,1)
column = Replace(cell.Address(False, False), cell.Row, "")
msgbox column

End Sub 
```

I hope it helps =)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-02-12T18:07:37.113

brettdj 的解决方案非常有效，但是如果您出于与我相同的原因将其视为潜在的解决方案，我想我会提供我的替代解决方案。

我遇到的问题是根据 MA​​TCH() 函数的输出滚动到特定列。我没有将列号转换为平行的列字母，而是选择暂时将参考样式从 A1 切换到 R1C1。这样我就可以滚动到列号，而不必使用 VBA 函数。要在两种参考样式之间轻松切换，您可以使用此 VBA 代码：

```
Sub toggle_reference_style()

If Application.ReferenceStyle = xlR1C1 Then
  Application.ReferenceStyle = xlA1
Else
  Application.ReferenceStyle = xlR1C1
End If

End Sub 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-03-04T22:36:16.400

```
Function fColLetter(iCol As Integer) As String
  On Error GoTo errLabel
  fColLetter = Split(Columns(lngCol).Address(, False), ":")(1)
  Exit Function
errLabel:
  fColLetter = "%ERR%"
End Function 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-09-08T11:00:21.290

这里是 Pascal (Delphi) 中的一个简单函数。

```
function GetColLetterFromNum(Sheet : Variant; Col : Integer) : String;
begin
  Result := Sheet.Columns[Col].Address;  // from Col=100 --> '$CV:$CV'
  Result := Copy(Result, 2, Pos(':', Result) - 2);
end; 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-05-28T21:56:30.297

这是一个较晚的答案，仅用于使用 1-3 个字符列的简单`Int()`方法`If`：

```
Function outColLetterFromNumber(i As Integer) As String

    If i < 27 Then       'one-letter
        col = Chr(64 + i)
    ElseIf i < 677 Then  'two-letter
        col = Chr(64 + Int(i / 26)) & Chr(64 + i - (Int(i / 26) * 26))
    Else                 'three-letter
        col = Chr(64 + Int(i / 676)) & Chr(64 + Int(i - Int(i / 676) * 676) / 26)) & Chr(64 + i - (Int(i - Int(i / 676) * 676) / 26) * 26))
    End If

    outColLetterFromNumber = col

End Function 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-01-31T18:49:22.100

此公式将根据范围（即*A1*）给出列，其中范围是单个单元格。如果给出了多单元格范围，它将返回左上角的单元格。请注意，两个单元格引用必须相同：

MID(CELL("地址", *A1* ),2,SEARCH("$",CELL("地址", *A1* ),2)-2)

这个怎么运作：

CELL("property","range") 根据使用的属性返回范围的特定值。在这种情况下，单元格地址。address 属性返回一个值 $[col]$[row]，即 A1 -> $A$1。MID 函数解析出 $ 符号之间的列值。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-03-19T04:52:09.697

进一步了解 brettdj 的答案，这里是使列号的输入成为可选的。如果省略列号输入，则该函数返回调用该函数的单元格的列字母。我知道这也可以使用来实现`ColumnLetter(COLUMN())`，但我认为如果它能够巧妙地理解它会很好。

```
Public Function ColumnLetter(Optional ColumnNumber As Long = 0) As String
    If ColumnNumber = 0 Then
        ColumnLetter = Split(Application.Caller.Address(True, False, xlA1), "$")(0)
    Else
        ColumnLetter = Split(Cells(1, ColumnNumber).Address(True, False, xlA1), "$")(0)
    End If
End Function 
```

这个函数的权衡是，由于测试，它会比 brettdj 的答案慢得多`IF`。但是，如果该功能被重复使用很多次，就会感觉到这一点。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-02-04T11:16:16.450

```
Sub GiveAddress()
    Dim Chara As String
    Chara = ""
    Dim Num As Integer
    Dim ColNum As Long
    ColNum = InputBox("Input the column number")

    Do
        If ColNum < 27 Then
            Chara = Chr(ColNum + 64) & Chara
            Exit Do
        Else
            Num = ColNum / 26
            If (Num * 26) > ColNum Then Num = Num - 1
            If (Num * 26) = ColNum Then Num = ((ColNum - 1) / 26) - 1
            Chara = Chr((ColNum - (26 * Num)) + 64) & Chara
            ColNum = Num
        End If
    Loop

    MsgBox "Address is '" & Chara & "'."
End Sub 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2016-03-19T17:02:41.703

这仅适用于 REFEDIT ...通常使用短版本的 uphere 代码...易于阅读和理解/它使用 $ 的 poz

```
Private Sub RefEdit1_Change()

    Me.Label1.Caption = NOtoLETTER(RefEdit1.Value) ' you may assign to a variable  var=....'

End Sub

Function NOtoLETTER(REFedit)

    Dim First As Long, Second As Long

    First = InStr(REFedit, "$")                 'first poz of $
    Second = InStr(First + 1, REFedit, "$")     'second poz of $

    NOtoLETTER = Mid(REFedit, First + 1, Second - First - 1)   'extract COLUMN LETTER

End Function 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2015-09-22T20:54:34.047

列号中的列字母可以通过以下步骤使用公式提取
1\. 使用 ADDRESS 公式计算列地址
2\. 使用 MID 和 FIND 函数提取列字母

示例：
1\. ADDRESS(1000,1000,1)
结果 $ALL$1000
2 . =MID(F15,2,FIND("$",F15,2)-2)
结果全部假设 F15 包含步骤 1 的结果

我们可以一口气写
MID(ADDRESS(1000,1000,1),2,FIND ("$",地址(1000,1000,1),2)-2)

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2016-07-15T15:41:06.353

仅转换为 ascii 数字并使用 Chr() 转换回字母怎么样？

col_letter = Chr(Selection.Column + 96)

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2016-03-30T09:31:28.440

Cap A 为 65，因此：

`MsgBox Chr(ActiveCell.Column + 64)`

发现于：[http ://www.vbaexpress.com/forum/showthread.php?6103-Solved-get-column-letter](http://www.vbaexpress.com/forum/showthread.php?6103-Solved-get-column-letter)

* * *

## 回答 #28

> 赞同：-6
> 
> 时间：2014-07-28T14:17:37.523

这是另一种方式：

```
{

      Sub find_test2()

            alpha_col = "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,W,Z" 
            MsgBox Split(alpha_col, ",")(ActiveCell.Column - 1) 

      End Sub

} 
```***

# iphone - 在单元格中重新加载 UIImageView

> ID：12796978
> 
> 赞同：0
> 
> 时间：2012-10-09T09:34:01.527
> 
> 标签：iphone, objective-c, uitableview

***我有自定义单元格的 uitableview。***

在单元格中，我有一些 UIImageViews。
我使用异步加载数据。
加载后，我应该在单元格中更新我的 uiimageview。

```
NSString *urlInString =[NSString stringWithFormat:@"%@/index.php/api/getJsonHotels?page=%i&rows_count=%i",webSite,counterPage,5];
    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:urlInString]];

NSURLConnection *mConnect = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];
if(mConnect)
{
    dataContent = [NSMutableData new];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

我可以在没有 tableView 重新加载和重新加载单元的情况下做到这一点吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:21.687

试试这个代码：

```
[tableview reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:24:10.280

创建一个 UIImageView 的自定义类并将其添加到您的单元格中。下载完成时，该类应负责下载和设置图像。

为了展示一些高质量的作品，您应该在下载时显示一个活动指示器。

# javascript - 这段javascript继承代码有什么问题？

> ID：12796979
> 
> 赞同：1
> 
> 时间：2012-10-09T09:34:02.180
> 
> 标签：javascript, oop, inheritance

```
function condition(){ 
  this.expression = ""; 
  this.toString = function(){
    return this.expression;
  }
};

function and(first, second){
    this.expression = first + " and " + second;
}

function nop(){};
nop.prototype = condition.prototype;

and.prototype = new nop();

var a =new and(1,2);

console.log(a.toString()); 
```

预计会看到“1 和 2”作为输出，但这就是发生的事情：“[object Object]”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:43:00.503

你没有覆盖 toString 方法，因为条件的构造函数永远不会被调用！尝试这样做；

```
condition.prototype.toString=function(){
    return this.expression;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:40:52.860

您正在将原型转移`condition`到`nop`的原型。问题是你`condition.toString`没有在原型中声明......这里：

```
function condition(){ 
  this.expression = ""; 

};
  condition.prototype.toString = function(){
    return this.expression;
  }
function and(first, second){
    this.expression = first + " and " + second;
}

function nop(){};
nop.prototype = condition.prototype;

and.prototype = new nop();

var a =new and(1,2);

console.log(a.toString()); 
```

或者

```
function condition(){ 
  this.expression = ""; 
  this.toString = function(){
    return this.expression;
  }
};

function and(first, second){
    this.expression = first + " and " + second;
}

function nop(){};
nop = condition;

and.prototype = new nop();

var a =new and(1,2);

console.log(a.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:40:52.407

尝试将字符串传递给您的 and 函数，因为此时您正试图将整数连接到字符串 `var a =new and("1","2");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T09:41:11.263

应该是这样的

```
function condition(){ 
  this.expression = ""; 
};    

condition.prototype.toString = function(){
   return this.expression;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T09:47:07.453

好的，所以这里的问题是您将两种继承模式（[http://davidshariff.com/blog/javascript-inheritance-patterns/](http://davidshariff.com/blog/javascript-inheritance-patterns/)）混合使用伪经典与功能模式。

您可以通过在构造函数上添加方法来创建对象：

```
function MyClass() {
    var privateProperty = 1;
    this.publicProperty = 2;

    function pivateMethod() {
        // some code ...
    }

    this.publicMethod = function() {
        // some code ...
    };
}

// inheritance
function SubClass() {
    MyClass.call(this);

    this.newMethod = function() { };
} 
```

在这里，当您创建此类的实例时，您将再次创建每个方法。

然后你有原型模式：

```
function MyClass() {
    this._protectedProperty = 1;
    this.publicProperty = 2;
}
MyClass.prototype._protectedMethod = function() {
    // some code ...
};
MyClass.prototype.publicMethod = function() {
    // some code ...
};

// inheritance
function SubClass() {
    MyClass.call(this);
}
SubClass.prototype = new MyClass();
SubClass.prototype.newMethod = function() { };

// OR
function SubClass() {
    MyClass.call(this);
}

function dummy() { }
dummy.prototype = MyClass.prototype;
SubClass.prototype = new dummy();
SubClass.prototype.newMethod = function() { }; 
```

是的，你必须选择这两种模式中的一种，而不是两者兼而有之·

我已经在这个小提琴上修复了你的代码：http: [//jsfiddle.net/dz6Ch/](http://jsfiddle.net/dz6Ch/)

# php - session_regenerate_id(true) 不起作用

> ID：12796980
> 
> 赞同：3
> 
> 时间：2012-10-09T09:34:04.173
> 
> 标签：php

> **可能重复：**
> [关闭会话并开始一个新会话](https://stackoverflow.com/questions/4345014/close-session-and-start-a-new-one)

我使用 wampserver2.1 php5.3.3，我发现 session_regenerate_id(true) 在我的脚本中不起作用，文档说当我将参数 'delete_old_sessions' 设置为 true 时，应该有一个新的 sid 并且应该删除所有会话变量，但是事实上在函数之后， $_session[abc] 仍然存在。我误解了这个功能，我的问题是什么？如果有人可以帮助我，我将不胜感激

```
<?php
session_start();
$_SESSION['abc']=12323;
session_regenerate_id(true);
echo $_SESSION['abc'];                  
?> 
```

我认为它应该不显示，但它输出：12323

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:35:41.890

`session_regenerate_id()``session id`用新生成的更新当前。它不会更改会话变量。

```
echo session_id();
session_regenerate_id();
echo session_id(); 
```

你应该`unset`会话来做到这一点：

```
unset($_SESSION); // or
$_SESSION = array(); 
```

[如何开始新会话](http://www.php.net/manual/en/function.session-regenerate-id.php#100250)：

```
session_start();
session_destroy();
session_regenerate_id();
unset($_SESSION);
session_start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:36:52.313

`session_regenerate_id`发送一个新的 cookie，但不会覆盖存储在`$_COOKIE`. 调用 后`session_destroy`，打开的会话 ID 将被丢弃，因此只需重新启动会话`session_start`将重新打开当前请求的原始会话（尽管现在为空）（后续请求将使用新的会话 ID）。而不是`session_destroy`+ `session_start`，使用`$delete_old_session`参数`session_regenerate_id`来删除以前的会话数据。

```
<?php
session_start();
/* Create a new session, deleting the previous session data. */
session_regenerate_id(TRUE);
/* erase data carried over from previous session */
$_SESSION=array();
?> 
```

要开始一个新的会话并保持旧会话不变，只需将参数省略即可`session_regenerate_id`。

*来源：[http ://de.php.net/manual/en/function.session-regenerate-id.php#107323](http://de.php.net/manual/en/function.session-regenerate-id.php#107323)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:36:46.370

如果您想销毁会话变量，您可以执行以下操作：`session_destroy();` 如果您想获得新 ID，您可以`session_regenerate_id();`

# iphone - iPhone App：开始播放音乐很慢

> ID：12796981
> 
> 赞同：1
> 
> 时间：2012-10-09T09:34:06.533
> 
> 标签：iphone, ios, cocoa-touch

我正在开发一个 iPad/iPhone 应用程序，并且正在使用我在委托的 didFinishLaunchingWithOptions 方法中调用的这段代码播放背景音乐：

```
-(void) playMusic {
    NSLog(@"play music!");

    NSString *sound_file; 
    if ((sound_file = [[NSBundle mainBundle] pathForResource:@"musicfile" ofType:@"mp3"])){

        NSURL *url = [[NSURL alloc] initFileURLWithPath:sound_file];
        self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
        self.audioPlayer.delegate = self;

        [self.audioPlayer setNumberOfLoops:-1]; // Infinite loop
        [self.audioPlayer prepareToPlay];
        [self.audioPlayer setVolume:0.2];
        [self.audioPlayer play];

    } else {
        NSLog(@"WARN : music file not found!");
    }
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];

} 
```

但我发现仅此方法平均需要 0.43 秒，这是很多！我做对了吗？或者有没有更快的方法来开始音乐播放？请帮忙。

我的环境：iOS5、XCode 4.3、iPad 2.0 是我现在测试的

# wpf - 将具有多索引属性的对象渲染到 2d 网格布局上

> ID：12796988
> 
> 赞同：1
> 
> 时间：2012-10-09T09:34:40.240
> 
> 标签：wpf

正如标题所说，我正在寻找一些关于如何将具有多索引属性的对象的内容渲染到类似 2d 网格的 UI 元素的建议。

我试图呈现的数据体现在一个由 n 行和 m 列组成的表格网格数据结构中，遵循稀疏矩阵 ADT（参见[http://www.blackbeltcoder.com/Articles/algorithms/creating-a-sparse - 网络中的矩阵](http://www.blackbeltcoder.com/Articles/algorithms/creating-a-sparse-matrix-in-net)）。每个 [row, column] 对返回一个单元格值。在使用表格网格结构时，我可以使用诸如 tableGrid[0, 0] 的索引器（它返回第一行和第一列的元素）来设置和获取“0”行和“0”列的值。为简单起见，返回的元素是对象类型，其中包含特定单元格的值，其中行数和列数是已知的。

根据文章[http://geekswithblogs.net/btudor/archive/2009/05/31/132526.aspx](http://geekswithblogs.net/btudor/archive/2009/05/31/132526.aspx)，到目前为止，我已经能够将文本框绑定到单个 [row, column] 对的值（在下面显示的示例中，值为 [1,1])，从而允许 UI 来回更新表格网格。

XAML：

```
<Grid>
    <TextBox Height="23" Name="textBlock5" Text="{Binding [1\,1], Mode=TwoWay />
</Grid> 
```

视图模型：

```
public class TableGridViewModel : INotifyPropertyChanged
{
    private readonly TableGrid _grid;        

    public object this[int row, int col]
    {
        get { return _grid[row, col]; }
        set
        {
            _grid[row, col] = value;
            OnPropertyChanged(new PropertyChangedEventArgs(string.Empty));
        }
    }

    public TableGridViewModel()
    {
        _grid = new TableGrid();

        for (int i = 0; i < 10; i++)
            for (int j = 0; j < 10; j++)
                _grid[i, j] = i * j;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, e);
    }
} 
```

问题是如何创建一个 2D 网格，它可以表示在表格网格中每个 [行、列] 找到的所有值（即 10 x 10 矩阵），这意味着通过索引器来回显示和更新它视图模型的属性。

有什么想法吗？

～E。

# jquery - 隐藏表格内的div

> ID：12796993
> 
> 赞同：-1
> 
> 时间：2012-10-09T09:35:10.737
> 
> 标签：jquery, html

我试图隐藏`div 2`和`div 3`。但它不起作用。它只有在我将 div 从表中拉出后才有效。谁能向我解释为什么？

**脚本**

```
<script>
        $(document).ready(function(){
            $("#2").hide();
            $("#3").hide();
            });
</script> 
```

**HTML**

```
 <div align="center">
  <table width="10%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <th scope="row"><table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
        <div id = "1">
          <th><input type = "button" value = "1.1" ></th>
          <th><input type = "button" value = "1.2" ></th>
          <th><input type = "button" value = "1.3" ></th>
        </div>
        <div id = "2">
            <th><input type = "button" value = "2.1" ></th>
            <th><input type = "button" value = "2.2" ></th>
            <th><input type = "text" value = "2.3" ></th>
        </div>
        <div id = "3">
            <th><input type = "button" value = "3.1" ></th>
            <th><input type = "button" value = "3.2" ></th>
        </div>
        </tr>
      </table></th>
    </tr>
  </table>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:36:33.517

假设您没有使用 HTML5，`id`属性不能以数字开头。尝试使用其他标识符，例如`el2`.

*更新*
实际上，问题是因为`div`元素在 a 中无效`tr`，所以浏览器正在删除它们，因此`#2`选择器找不到要隐藏的东西。最好的选择是为每个`th`需要隐藏的类添加一个类，并使用 CSS 来隐藏它们。

[**示例小提琴**](http://jsfiddle.net/GcW4h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:41:01.083

你为什么不给`<TH>`元素一个css类并隐藏它们，而不是在表格中间引入DIV，例如：

```
<script>
    $(document).ready(function(){
        $(".th2").hide();
        $(".th3").hide();
        });
</script> 
```

HTML

```
<div align="center">
<table width="10%" border="0" cellspacing="0" cellpadding="0">
<tr>
  <th scope="row"><table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <th class="th1"><input type = "button" value = "OP / FE" ></th>
      <th class="th1"><input type = "button" value = "LS" ></th>
      <th class="th1"><input type = "button" value = "FLX" ></th>
      <th class="th2"><input type = "button" value = "2.1" ></th>
      <th class="th2"><input type = "button" value = "2.2" ></th>
      <th class="th2"><input type = "text" value = "2.3" ></th>
      ...
    </tr>
  </table></th>
</tr>
</table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:46:49.167

```
Please change Div to table and add jqury.js link  to page and test it :
<head>
<title></title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {

        $("#div2").hide();
        $("#div3").hide();
    });
</script>

</head>

<body>
    <div align="center">
  <table width="10%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <th scope="row"><table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
        <table id = "div1">
          <th><input type = "button" value = "1.1" ></th>
          <th><input type = "button" value = "1.2" ></th>
          <th><input type = "button" value = "1.3" ></th>
        </table>
        <table id = "div2">
            <th><input type = "button" value = "2.1" ></th>
            <th><input type = "button" value = "2.2" ></th>
            <th><input type = "text" value = "2.3" ></th>
        </table>
        <table id = "div3">
            <th><input type = "button" value = "3.1" ></th>
            <th><input type = "button" value = "3.2" ></th>
        </table>
        </tr>
      </table></th>
    </tr>
  </table>
</div>
</body>

</html> 
```

# asp.net - asp.net 带下划线模板设置

> ID：12796997
> 
> 赞同：3
> 
> 时间：2012-10-09T09:35:20.213
> 
> 标签：asp.net, underscore.js

我想有人遇到过下划线问题，所以我在这里找到了一些东西： [Using Underscore.js with ASP.NET](https://stackoverflow.com/questions/9724921/using-underscore-js-with-asp-net)

解决方案是添加：

```
_.templateSettings = {interpolate : /\{\{(.+?)\}\}/g,      // print value: {{ value_name }}
                  evaluate    : /\{%([\s\S]+?)%\}/g,   // excute code: {% code_to_execute %}
                  escape      : /\{%-([\s\S]+?)%\}/g}; // excape HTML: {%- <script> %} prints &lt;script&gt; 
```

下划线.js

所以我打开 underscore.js 并找到 _.templateSettings 部分，并用上面的解决方案替换，仍然没有运气。

有没有我想念的地方？这是我的代码：

```
<table class="table">
    <thead>
        <tr>
            <th></th>
            <th>#</th>
            <th>Keyword</th>
            <th>Corresponding Field</th>
            <th><a href="#" class="btn pull-right" id="one-to-one-add">Add</a></th>
        </tr>
    </thead>
    <tbody>
        <% _.each(keywords, function(keyword, key, list) { %>
        <tr>
            <td><label class="checkbox"><input type="checkbox" /></label></td>
            <td><%= key + 1 %></td>
            <td><input name="keywords[<%= key %>][keyword]" class="input-medium keyword-name" type="text" value="<%= keyword.name %>" /></td>
            <td>
                <select class="keyword-field">
                    <% _.each(fields, function(field, key, list) { %>
                    <option name="keywords[<%= key %>][field]" value="<%= field.id %>" <% if (keyword.fieldId == field.id) { %>selected<% } %>><%= field.name %></option>
                    <% }); %>
                </select>
            </td>
            <td class="align-right"><a href="#defining-keyword" data-toggle="modal">Define</a></td>
        </tr>
        <% }); %>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T07:42:02.980

所以这就是我最终要做的：

```
<script type="text/javascript">
    $(document).ready(function ()
    {            
        _.templateSettings = {
            interpolate: /\<\@\=(.+?)\@\>/g,
            evaluate: /\<\@(.+?)\@\>/g
        };
    });
</script> 
```

上面的代码里面的html头

并更改为 <@ ... @> 所以这就是我的代码结束：

```
<tbody>
    <@ _.each(keywords, function(keyword, key, list) { @>
    <tr>
        <td><label class="checkbox"><input type="checkbox" /></label></td>
        <td><@= key + 1 @></td>
        <td><input name="keywords[<@= key @>][keyword]" class="input-medium keyword-name" type="text" value="<@= keyword.name @>" /></td>
        <td>
            <select class="keyword-field">
                <@ _.each(fields, function(field, key, list) { @>
                <option name="keywords[<@= key @>][field]" value="<@= field.id @>" <@ if (keyword.fieldId == field.id) { @>selected<@ } @>><@= field.name @></option>
                <@ }); @>
            </select>
        </td>
        <td class="align-right"><a href="#defining-keyword" data-toggle="modal">Define</a></td>
    </tr>
    <@ }); @>
</tbody> 
```