# StackOverflow 问答 13101000-13101999

# c# - 我需要创建一个循环，以便我的十进制“单价”将检查同一名称下的其他小数

> ID：13101000
> 
> 赞同：0
> 
> 时间：2012-10-27T14:22:08.787
> 
> 标签：c#, asp.net, loops

我需要创建一个循环，以便当我尝试从购物车中得出小计时，它会继续检查购物车中是否有更多商品。我的购物车此时是一个列表框。我已经将我的小数声明为单价，以便从我的访问表中提取数据。我还需要加上运费（每件 2 美元）、税金（@ 7%），最后合计一下。我是一个完整的新手，任何帮助将不胜感激。我在 Visual Studio 2010 中使用 c# 和 asp.net 的组合。来自购物车页面的 C# 代码

```
public partial class _Default : System.Web.UI.Page
{
    private CartItemList cart;

    protected void Page_Load(object sender, EventArgs e)
    {
        cart = CartItemList.GetCart();
        if (!IsPostBack)
            this.DisplayCart();
    }

    private void DisplayCart()
    {
        lstBox.Items.Clear();
        CartItem item;
        for (int i = 0; i < cart.Count; i++)
        {
            item = cart[i];
            lstBox.Items.Add(item.Display());
        }
    }

    protected void clrBtn_Click(object sender, EventArgs e)
    {
        if (cart.Count > 0)
        {
            cart.Clear();
            lstBox.Items.Clear();
        }
    }

    protected void  rmvBtn_Click(object sender, EventArgs e)
    {
        if (cart.Count > 0)
        {
            if (lstBox.SelectedIndex > -1)
            {
                cart.RemoveAt(lstBox.SelectedIndex);
                this.DisplayCart();
            }
            else
            {
                lblMessage.Text = "Please select the item you want to remove.";
            }
        }
    }

    protected void checkoutBtn_Click(object sender, EventArgs e)
    {

    }
} 
```

C#中订单页面的代码

```
public partial class _Default : System.Web.UI.Page
{
    private Product selectedProduct;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            ddlproducts.DataBind();

        selectedProduct = this.GetSelectedProduct();
        lblName.Text = selectedProduct.Name;
        lblShortDescription.Text = selectedProduct.ShortDescription;
        lblLongDescription.Text = selectedProduct.LongDescription;
        lblUnitPrice.Text = selectedProduct.UnitPrice.ToString("c");
    }

    private Product GetSelectedProduct()
    {
        DataView BooksTable = (DataView)
        AccessDataSource2.Select(DataSourceSelectArguments.Empty);
        BooksTable.RowFilter =
            "ProductID = '" + ddlproducts.SelectedValue + "'";
        DataRowView row = (DataRowView)BooksTable[0];

        Product p = new Product();
        p.ProductID = row["ProductID"].ToString();
        p.Name = row["Name"].ToString();
        p.ShortDescription = row["ShortDescription"].ToString();
        p.LongDescription = row["LongDescription"].ToString();
        p.UnitPrice = (decimal)row["UnitPrice"];
        //p.ImageFile = row["Image File"].ToString();
        return p;
    }

    protected void addBtn_Click(object sender, EventArgs e)
    {
        if (Page.IsValid)
        {
            CartItemList cart = CartItemList.GetCart();
            CartItem cartItem = cart[selectedProduct.ProductID];
            if (cartItem == null)
            {
                cart.AddItem(selectedProduct, 1);
            }
            else
            {
                cartItem.AddQuantity(1);
            }
            Response.Redirect("Cart.aspx");
        }
    }
} 
```

c#中的caritemlist代码（顺便说一句，我从我的书中复制了所有这些代码。我不知道如何编程。）

```
public class CartItemList
{
    private List<CartItem> cartItems;

    public CartItemList()
    {
        cartItems = new List<CartItem>();
    }

    public int Count {
        get { return cartItems.Count; }
    }

    public CartItem this[int index]
    {
        get { return cartItems[index]; }
        set { cartItems[index] = value; }
    }

    public CartItem this[string id]
    {
        get {
            foreach (CartItem c in cartItems)
                if (c.Product.ProductID == id) return c;
            return null;
        }
    }

    public static CartItemList GetCart()
    {
        CartItemList cart = (CartItemList) HttpContext.Current.Session["Cart"];
        if (cart == null)
            HttpContext.Current.Session["Cart"] = new CartItemList();
        return (CartItemList) HttpContext.Current.Session["Cart"];
    }

    public void AddItem(Product product, int quantity)
    {
        CartItem c = new CartItem(product, quantity);
        cartItems.Add(c);
    }

    public void RemoveAt(int index)
    {
        cartItems.RemoveAt(index);
    }

    public void Clear()
    {
        cartItems.Clear();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:45:16.280

根据我的理解，您想从购物车中一一获取所有商品并希望返回购物车的总价格。这是你想要的吗 -

```
double total = 0;
foreach(CartItem cartItem in CartItemList.GetCart())
{
   total+= cartItem.Price * cartItem.Quantity
} 
```

# push-notification - Pushwoosh 应用程序 ID 字符串值

> ID：13101001
> 
> 赞同：3
> 
> 时间：2012-10-27T14:22:10.240
> 
> 标签：push-notification, apple-push-notifications

你好，我正在尝试使用 pushwoosh 推送服务，但在按照他们的建议设置 info.plist 时卡住了。他们提到使用键 Pushwoosh_APPID 设置 ID，这很好，但具有价值：“您的 Pushwoosh 应用程序 ID 字符串值”。我尝试使用应用程序代码，但当我编译时，我收到了这个似乎证实了我的怀疑的日志：

```
2012-10-27 15:58:45.722 Taxi Profi[6130:907] Initializing application: (null), (null)
2012-10-27 15:58:46.309 Taxi Profi[6130:4b07] Sending request: {"request":{"hwid":"7f4e5685d3a4978b8ecb49fa30d4fc8b", "application":"B186B-B66EA", "badge":0}}
2012-10-27 15:58:46.311 Taxi Profi[6130:4b07] To urL https://cp.pushwoosh.com/json/1.3/setBadge
2012-10-27 15:58:46.359 Taxi Profi[6130:5207] Sending request: {"request":{"hwid":"7f4e5685d3a4978b8ecb49fa30d4fc8b", "application":"B186B-B66EA", "badge":0}}
2012-10-27 15:58:46.361 Taxi Profi[6130:5207] To urL https://cp.pushwoosh.com/json/1.3/setBadge
2012-10-27 15:58:46.993 Taxi Profi[6130:907] Error registering for push notifications. Error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x1e5c0790 {NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application}
2012-10-27 15:58:47.339 Taxi Profi[6130:4b07] Response "200 no error": string: {"status_code":210,"status_message":"Device not found","response":null}
2012-10-27 15:58:47.341 Taxi Profi[6130:4b07] setBadges completed
2012-10-27 15:58:47.399 Taxi Profi[6130:5207] Response "200 no error": string: {"status_code":210,"status_message":"Device not found","response":null}
2012-10-27 15:58:47.404 Taxi Profi[6130:5207] setBadges completed 
```

他们的示例列出了这个长代码：4F0C807E51EC77.93591449 我不知道他们从哪里得到的。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:23:41.163

Pushwoosh 现在使用另一种格式的 App ID，例如“FE748-9A37E”。您可以在控制面板中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:46:04.240

Pushwoosh 工作人员向我解释说，Apple 网站存在问题，阻碍了他们使用手动程序。他们非常友好地让我能够使用自动的，尽管使用了两个代码，但一切都很好：一个用于开发，一个用于发布。什么使测试程序加倍。

# objective-c - 在线分配多个对象？

> ID：13101002
> 
> 赞同：0
> 
> 时间：2012-10-27T14:22:12.533
> 
> 标签：objective-c

`StockHolding`是我自己的类名，我想创建 3 个实例变量。代码的工作副本是这样的：

```
StockHolding *stock0 = [[StockHolding alloc] init];
StockHolding *stock1 = [[StockHolding alloc] init];
StockHolding *stock2 = [[StockHolding alloc] init]; 
```

但是我的代码第一次是这样的：

```
StockHolding *stock0, *stock1, *stock2 = [[StockHolding alloc] init]; 
```

这对我不起作用:(

我知道我可以通过以下方式创建多个浮点/整数变量：

```
float *x, *y, *z; 
```

所以我的问题是，有什么方法可以在 Objective-C 中以这种方式分配多个实例变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:25:14.180

```
StockHolding *stock0, *stock1, *stock2 = [[StockHolding alloc] init]; 
```

是相同的

```
StockHolding *stock0;
StockHolding *stock1;
StockHolding *stock2 = [[StockHolding alloc] init]; 
```

在一行上初始化多个对象并没有什么意义。你的第一种方法很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:24:58.630

什么？即使在 C 中，你也不能这样做。

```
int a, b, c = 3; //C is equal to 3, A and B has not been init yet 
```

你只在 C 中持有一个空地址。你不能只对指针应用任何东西，除非你为它分配内存，这同样适用于 Objective-C。

# iframe - 类似框的错误无法显示

> ID：13101004
> 
> 赞同：1
> 
> 时间：2012-10-27T14:22:15.590
> 
> 标签：iframe, facebook-javascript-sdk

未捕获类型错误：无法读取 null getnetworkwidget 的属性“offsetParent”：157 146 未捕获类型错误：无法读取 null getnetworkwidget 的属性“offsetParent”：157 networkedblogs.getElemTop getnetworkwidget：157 networkedblogs.checkVisibility

已显示且无法看到。类似框不显示

# html - 如何创建带有缩略图的可折叠列表？

> ID：13101008
> 
> 赞同：0
> 
> 时间：2012-10-27T14:23:18.850
> 
> 标签：html, jquery-mobile

我想将可折叠列表与缩略图列表（[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-thumbnails.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-thumbnails.html)）结合起来，这是可折叠列表的代码，但只有项目符号作为符号。

```
<div data-role="collapsible">
   <h3>Bangarang</h3>
   <h3>Skrillex</h3>
   <ul data-role="listview">
      <li>Right In</li>
      <li>Bangarang</li>
</div> 
```

把图片的代码放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:52:27.107

看看[文档](http://jquerymobile.com/test/docs/buttons/buttons-icons.html)如何获取自定义图标

> **自定义图标**
> 
> 要使用自定义图标，请指定一个具有唯一名称的 data-icon 值，例如 myapp-email，按钮插件将通过在 data-icon 值前面加上 ui-icon- 来生成一个类并将其应用于按钮：ui -icon-myapp-电子邮件。
> 
> 然后，您可以在样式表中编写针对 ui-icon-myapp-email 类的 CSS 规则，以指定图标背景源。要保持与其余图标的视觉一致性，请创建一个 18x18 像素的白色图标，另存为具有 alpha 透明度的 PNG-8。
> 
> 在本例中，我们只是指向一个独立的图标图像，但您可以轻松地使用图标精灵并指定位置，就像我们在框架中使用的图标精灵一样。
> 
> ```
> .ui-icon-myapp-email {
>     background-image: url("app-icon-email.png"); 
> } 
> ```

例子

```
<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
 <script src="jquery-1.8.0.min.js"></script>
 <script src="jquery.mobile-1.2.0.min.js"></script>

 <style>
  .ui-icon-taifun { background-image: url("taifun.png"); }
 </style>

 <title>Test</title>
</head>

<body>
  <div data-role="page">
    <div data-role="content">
      <div data-role="collapsible" data-collapsed-icon="taifun" data-expanded-icon="taifun" data-inset="false">
        <h2><img src="favicon.ico"> Pets</h2>
        <ul data-role="listview">
          <li><a href="index.html">Canary</a></li>
          <li><a href="index.html">Cat</a></li>
          <li><a href="index.html">Dog</a></li>
        </ul>
       </div><!-- /collapsible -->
       <div data-role="collapsible" data-collapsed-icon="taifun" data-expanded-icon="taifun" data-inset="false">
         <h2><img src="favicon.ico"> Farm animals</h2>
         <ul data-role="listview">
           <li><a href="index.html">Chicken</a></li>
           <li><a href="index.html">Cow</a></li>
           <li><a href="index.html">Duck</a></li>
         </ul>
      </div><!-- /collapsible -->
    </div>
  </div>

</body>
</html> 
```

截屏：
![截屏](../Images/e51f6cc60a6c824f8f99b161b2f92146.png)

# c# - 任意数运算

> ID：13101009
> 
> 赞同：1
> 
> 时间：2012-10-27T14:23:24.903
> 
> 标签：c#, numbers, scientific-computing

我尝试创建一个库，该库可以使用任意大小的数字（如 50-100 位数字）进行操作。

我在 Codeplex 上看到了一个库 IntX。它工作得很好，但我想建立自己的图书馆来学习；我认为 IntX 中的代码对于初学者来说太复杂了。

那么，任何人都可以通过对数字中的每个数字求和并将总和作为字符串返回来帮助我对数字求和的算法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:24:53.613

例如，您可以通过 ILSpy 探索`System.Numerics.BigInteger`方法。

# javascript - 如何使用 request.js 发布多部分请求

> ID：13101016
> 
> 赞同：0
> 
> 时间：2012-10-27T14:24:40.903
> 
> 标签：javascript, node.js, request, multipartform-data

标题简单地说。我不知道如何发送几个字段小瓶多部分。

[我了解https://github.com/felixge/node-form-data](https://github.com/felixge/node-form-data)有一个实现

我有所有可用的字段，只是将其作为多部分发布并使用异步结果...

对于任何比作者 github 页面（https://github.com/mikeal/request）上的更好或更清晰的示例，这将是非常棒的......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:23:07.693

[您是否在node-form-data](https://github.com/felixge/node-form-data)末尾看到以下内容？

“为了将此表单提交到 Web 应用程序，您可以使用 node 的 http 客户端接口：”

```
var http = require('http');

var request = http.request({
  method: 'post',
  host: 'example.org',
  path: '/upload',
  headers: form.getHeaders()
});

form.pipe(request);

request.on('response', function(res) {
  // work with the result here
  console.log(res.statusCode);
}); 
```

它完全符合您的要求。

# java - 启动位图

> ID：13101020
> 
> 赞同：1
> 
> 时间：2012-10-27T14:25:02.247
> 
> 标签：java, android, animation, android-canvas

我有一个绘制位图的表面视图类，并且在将对象从屏幕的中心底部启动到用户单击屏幕的位置时遇到了一些麻烦，这是下面的代码片段 onTouch 方法从用户触摸屏幕获取坐标，然后 run 方法绘制位图。岩石位图是我需要从屏幕底部移动到触摸的位置。

```
 public boolean onTouch(View arg0, MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        x = event.getX();
        y = event.getY();
        sX = event.getX();
        sY = event.getY();
        fX = fY = dX = dY = sclX = sclY = aniX = aniY = 0;
        break;
    case MotionEvent.ACTION_UP:
        fX = event.getX();
        fY = event.getY();
        dX = fX - sX;
        dY = fY - sY;
        sclX = dX / 30;
        sclY = dY / 30;

        break;
    }
    return true;
}

        //the code that draws and updates the bitmaps on screen
        public void run() {
        while (running) {
            if (!sh.getSurface().isValid())
                continue;

            canvas = sh.lockCanvas();
            canvas.drawRGB(02, 02, 150);
            if (x != 0 && y != 0)
                canvas.drawBitmap(cross, x - (cross.getWidth() / 2), y- (cross.getHeight() / 2), null);

            canvas.drawBitmap(sling,(canvas.getWidth() / 2) - (sling.getHeight() / 2),canvas.getHeight() - sling.getHeight(), null);
            if (fX != 0 && fY != 0) {
                canvas.drawBitmap(rock, (canvas.getWidth()/2) - aniX,(canvas.getHeight()- sling.getHeight()) - aniY,null);

            }

            aniX = aniX + sclX;
            aniY = aniY + sclY;

            sh.unlockCanvasAndPost(canvas);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T12:28:13.517

你在你的`onTouch()`.

```
public boolean onTouch(View arg0, MotionEvent event) {
    switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
        x = event.getX();
        y = event.getY();
        sX = event.getX();
        sY = event.getY();
        fX = fY = dX = dY = sclX = sclY = aniX = aniY = 0;
        break;
      case MotionEvent.ACTION_UP:
        fX = event.getX();
        fY = event.getY();
        dX = fX - sX;
        dY = fY - sY;
        sclX = dX / 30;
        sclY = dY / 30;

        break;
    }
    return true;
} 
```

此代码存在逻辑问题。考虑你点击 100/100，`sX`并`sY`在向下的情况下设置为 100。在向上的情况下，您在`fX`和中获得向上坐标`fY`，也将是 100。这导致`dX = fX - sX`=> `dX = 100 - 100`。所以你的`sclX`意志`0`也是。这意味着根本没有动画。

您应该使用屏幕中间作为计算的基础。源是屏幕中心，目标是您的触摸。

# actionscript-3 - 我发现从 xml 对象中删除一个节点非常困难

> ID：13101022
> 
> 赞同：1
> 
> 时间：2012-10-27T14:25:24.733
> 
> 标签：actionscript-3, flash

参考的例子

```
var x1:XML = <x1>
                <a id = "52">AYY</a>
                <a>AYY 2 </a>
                <b>BEE</b>
                <c>CEE</c>
            </x1>;

trace(x1.toXMLString());
trace("___________");

delete x1.a.@id;

trace(x1.toXMLString());
trace("___________");

delete x1.b;

trace(x1.toXMLString());
trace("___________");

delete x1.a;

trace(x1.toXMLString()); 
```

输出

```
<x1>
  <a id="52">AYY</a>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1>
___________
<x1>
  <a>AYY</a>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1>
___________
<x1>
  <a>AYY</a>
  <a>AYY 2</a>
  <c>CEE</c>
</x1>
___________
<x1>
  <c>CEE</c>
</x1> 
```

如果我只想删除一个元素怎么办？或者我想删除没有子元素的元素？

我只能使用删除 x1.a。荒谬的！我花了几个小时找不到简单的方法。

```
var list:XMLList = x1.elements('a');
for each(var x:XML in list){
    if(....){
        //make something done
        //i want to delete this x from the xml object.while keep other node untouched.
    }
} 
```

让我知道你处理这个问题的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:02:02.857

您可以使用完整的 E4X 语法来匹配树中的节点并删除它们。例如这个：

```
var x1:XML =
    <x1>
        <a id="52">AYY</a>
        <a>AYY 2</a>
        <b>BEE</b>
        <c>CEE</c>
    </x1>;

trace(x1.toXMLString());

delete x1.a.(hasOwnProperty('@id') && @id=='52')[0];

trace('---');
trace(x1.toXMLString()); 
```

输出：

```
<x1>
  <a id="52">AYY</a>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1>
---
<x1>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:05:03.603

它很容易......看看：

```
var x1:XML = <x1>
                 <a id = "52">AYY</a>
                 <a>AYY 2 </a>
                 <b>BEE</b>
                 <c>CEE</c>
             </x1>;

trace(x1.toXMLString() + "\n");

var nodesToDelete:XMLList = x1.a;

trace(nodesToDelete.toXMLString() + "\n");

delete nodesToDelete[0];

trace(x1.toXMLString() + "\n"); 
```

输出：

```
<x1>
  <a id="52">AYY</a>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1>

<a id="52">AYY</a>
<a>AYY 2</a>

<x1>
  <a>AYY 2</a>
  <b>BEE</b>
  <c>CEE</c>
</x1> 
```

你甚至可以这样做：

```
delete x1.a[0]; 
```

# android - 使用 Window 7 Ultimate 为 Google API 密钥生成 MD5 时出错

> ID：13101025
> 
> 赞同：0
> 
> 时间：2012-10-27T14:25:41.033
> 
> 标签：android, windows, google-maps, windows-7, md5

这是我的 cdm 命令。我如何生成。命令中的 Google api 键在哪里是我的错误

```
C:\Users\DON>keytool.exe -list -v -alias androiddebugkey -keystore C:\Users\DON\
.android\debug.keystore -storepass android -keypass android
'keytool.exe' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:38:21.263

您需要导航到您的 JRE 文件夹（例如：`cd "C:\Program Files (x86)\Java\jre7\bin"`）。

导航后，运行以下命令：

```
keytool.exe -list -v -alias androiddebugkey -keystore C:\Users\DON\
.android\debug.keystore -storepass android -keypass android 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:39:07.070

问题是你试图`Keytool`从错误的位置使用。把自己放在下面

```
c:\android_SDK_location\platform-tools\ 
```

或者

```
c:\program files\java\jdk_location\jre\bin 
```

然后执行`keytool`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:31:47.073

先上命令

```
Windows 7: C:\Users\<user>\.android\debug.keystore
Windows XP: C:\Documents and Settings\<user>\.android\debug.keystore
OS X and Linux: ~/.android/debug.keystore 
```

然后

keytool -list -alias androiddebugkey -keystore .keystore -storepass android -keypass android

# css - 选择最后一个直接子代

> ID：13101026
> 
> 赞同：1
> 
> 时间：2012-10-27T14:25:47.837
> 
> 标签：css

我正在尝试选择一组元素的最后一个直接子元素，如最后一个 .container 在：

![在此处输入图像描述](../Images/0f35d0f12415bf2e7c9ddceead10fe4b.png)

问题是它只是没有应用样式。这是我尝试使用的代码：

```
#allthecontent  > .container:last-child {
  overflow: auto;
  padding-bottom: 150px;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:37:11.073

虽然不可能匹配最后一次出现的 ，`.container`除非它恰好是其父级的最后一个子级，但您可以使用 nth-last-child 选择器来指定范围。

```
#allthecontent > ​.container:nth-last-child(-n + 2) {
  overflow: auto;
  padding-bottom: 150px;
} 
```

这将匹配任何元素与`container`出现在父元素的最后 2 个元素中的类。不过，此选择器在 IE8 及更低版本中不起作用。

# java - 从另一个表创建表时出现语法错误

> ID：13101031
> 
> 赞同：3
> 
> 时间：2012-10-27T14:26:31.753
> 
> 标签：java, ms-access

我的代码：

```
 Statement stmt=null;
    String cmdstr = "create table " + tableName + " as (select * from Master_Sheet);";

        try{            
            stmt = con.createStatement();
            stmt.executeUpdate(cmdstr);

            }
        catch(Exception e)
            {
            e.printStackTrace();
            }
        finally
        {
            try{
                if(stmt != null)
                stmt.close();
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        } 
```

输出：

java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] CREATE TABLE 语句中的语法错误。在 sun.jdbc.odbc.JdbcOdbc.createSQLException（未知来源） 在 sun.jdbc.odbc.JdbcOdbc.standardError（未知来源）

请帮忙，我对java编码很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:33:27.413

对于 Access，根据查询数据创建新表的语法是：

```
SELECT INTO newTable
FROM oldTable; 
```

所以你的代码应该重写为：

```
String cmdstr = "insert into table " + tableName + " From Master_Sheet;"; 
```

在您的 java 代码中使用它们之前，请确保您的 SQL 语句遵循[MS Access 语法。](http://msdn.microsoft.com/en-us/library/office/bb208934%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:30:41.847

您要求 Access 使用以下 SQL 语句创建表：

```
create table yourTableName as (select * from Master_Sheet); 
```

（包括`;`最后的）。它告诉您这不是[`CREATE TABLE`语句](http://msdn.microsoft.com/en-us/library/office/ff837200%28v=office.15%29.aspx)的有效语法。这不是 Java 的东西，而是 Access 的东西。请参阅链接的`CREATE TABLE`文档。（我链接了最新的，一定要找到你正在使用的 Access 版本的那个。）

# asp.net - jquery POST 从服务器 ASP.NET 返回

> ID：13101033
> 
> 赞同：3
> 
> 时间：2012-10-27T14:26:43.780
> 
> 标签：asp.net, jquery

我在我的代码中使用 Jquery Post，我想知道如何从服务器回调到我的 HTML 页面..

这是我的 Jquery 代码：

```
function InsertMemo() {

$('#buttonComplain').bind('click', function () {

    var noteMemo = $('#noteId').val();
    var url = "Handlers/Handler.aspx";

    $.post(url,
         { noteMemo: noteMemo },
          function () {

              hideMemoShowCons();

          }
     );
}); 
```

}

我想在函数中从我的 C# 代码中回调：

```
protected void Page_Load(object sender, EventArgs e)
        {
              rndSntnc = RandomSentnce();
        } 
```

然后将其粘贴到我的 HTML 中：

```
 <div class="cons">
               <%=thecodeExample %>
            </div> 
```

我怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:53:09.243

你不一定想`Page_Load`再次跑步。我的意思是，您可以（并且 Web 表单开发中的大多数 ajax 确实贯穿整个页面生命周期），但是如果页面的任何其他部分没有依赖关系，那么制作`RandomSentnce`静态可能更有意义`WebMethod`

```
[WebMethod]
public static string RandomSentnce ()
{
     ... get your random sentence here ..
} 
```

并做类似的事情

```
$.ajax({
  type: "POST",
  url: "PageName.aspx/RandomSentnce",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

WebMethods*不会*经历整个 asp.net Web 表单的生命周期，因此它们通常也更快。

您知道调用时需要替换哪个 div 的内容吗？如果是这样，给 div 一个 ID 也是有意义的，这样你就可以在上面的成功方法中找到它，所以你可以这样做：

```
 ...
  success: function(msg) {
      $("#myDivID").text(msg.d);
  }
  ... 
```

如果它是您仅通过单击才知道的东西，那么您只需要在调用 ajax 调用时捕获对该元素的引用并在成功方法中使用该引用（或者，使用 jQuery 承诺，您不严格必须通过一个成功的方法，但我现在不会进入）。

顺便说一句，我没有记住所有这些，我使用[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)作为来源。如果我所说的有任何问题，请咨询该消息来源。

编辑：

你问：*第一：在$.ajax上，在url上..当你输入“PageName.aspx/RandomSentnce”时，是不是直接进入函数了？！第二：关于成功函数，$("#myDivID").text(msg.d) 中的“d”是什么意思；?*

对 #1 的回答：不确定您在这里所说的“go”是什么意思，但这就是 aspx 页面上的 web 方法的 url 的结构方式，并且从您的页面中，只会调用该函数。

对#2 的回答：默认情况下（从 asp.net 3.5+ 开始），WebMethod 响应被包装在一个“出于安全考虑”的对象中（请参阅[JSON 中的 .d 是什么意思？](https://stackoverflow.com/questions/830112/what-does-d-in-json-mean)和[http://encosia.com/a-中断更改-aspnet-ajax/ 版本之间的变化](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)）。基本上，您的响应主体看起来`{"d":"..."}`会被解析为一个 javascript 对象（`success`函数的第一个参数），并且要获得方法的结果，您只需获取`d`上述对象的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T00:23:59.163

你可以这样做。

在`Page_Load`方法中：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Request.Form["noteMemo"] != null)
    {
        // do sometheing with your param (Request.Form["noteMemo"])
        // and get your random sentence
        string rndSntnc = RandomSentnce();
        Response.Write(rndSntnc);
        Response.End();
    }
} 
```

在您的 ajax 函数中：

```
$.post(url,
    { noteMemo: noteMemo },
    function (msg) {
        $('#myDiv').text(msg);
    }
); 
```

# symfony - WebSocket 无法与服务器建立连接

> ID：13101036
> 
> 赞同：3
> 
> 时间：2012-10-27T14:27:00.037
> 
> 标签：symfony, websocket, phpwebsocket, ratchet

我尝试通过 WebSocket 在我的 symfony 项目上创建一个简单的聊天页面。首先我使用了[React-php](http://reactphp.org/)库，它在终端上完美运行，但是当我尝试将它连接到浏览器时，我在 chrome 上遇到了这个错误：

```
Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 
```

在火狐上

```
Firefox can't establish a connection to the server at ws://localhost:8000/. 
```

接下来我使用[Ratchet](http://socketo.me/)库并按照教程进行操作，但仍然存在同样的问题，在终端上工作，在浏览器上出错。我`telnet localhost 8000`在终端上使用，浏览器上的 javascript 是

```
var conn = new WebSocket('ws://localhost:8000');
conn.onmessage = function(e) {
    console.log(e.data);
};
conn.send('Hello World!'); 
```

React 的服务器代码

```
require __DIR__.'/../vendor/autoload.php';
$loop = React\EventLoop\Factory::create();
$socket = new React\Socket\Server($loop);
$conns = new \SplObjectStorage();
$socket->on('connection', function ($conn) use ($conns) {
    $conns->attach($conn);
    $conn->on('data', function ($data) use ($conns, $conn) {
        foreach ($conns as $current) {
            if ($conn === $current) {
                continue;
            }
            $current->write($data);
        }
    });
    $conn->on('end', function () use ($conns, $conn) {
        $conns->detach($conn);
    });
});
$socket->listen(8000);
$loop->run(); 
```

和 Ratchet 的服务器代码

```
require __DIR__ . '/../vendor/autoload.php';
require __DIR__ . '/chat.php';
use Ratchet\Server\IoServer;
use Ratchet\WebSocket\WsServer;
use MyApp\Chat;
$server = IoServer::factory( new WsServer( new Chat() ), 8000);
$server->run(); 
```

另一件事是客户端页面网址`localhost/X/chat`和服务器`localhost/X/server`，我试过`ws://localhost:8000/X/server`但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:28:45.427

`send`在建立连接之前您不能打电话。您需要绑定到`onopen`事件：

```
var conn = new WebSocket('ws://localhost:8000');
conn.onmessage = function(e) {
    console.log(e.data);
};
conn.onopen = function () {
    conn.send('Hello World!');
}; 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:19:37.720

问题出在 cURL 分机中。解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-20T16:52:57.427

As I understand it, `React\Socket` opens a plaintext TCP / IP connection.

You can use any plaintext TCP/IP client to connect to your server, such as telnet or any other TCP/IP library.

If you want to use a WebSocket client, such as the one provided by your browser, you will have to use a WebSocket server. Ratchet is a WebSocket server that builds on top of this project.

Look this [https://github.com/reactphp/socket/issues/142](https://github.com/reactphp/socket/issues/142)

# ruby-on-rails - 如何知道rails中包含什么配置

> ID：13101038
> 
> 赞同：2
> 
> 时间：2012-10-27T14:27:23.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, configuration, ruby-on-rails-3.2

有没有办法知道 development.rb 和 production.rb 中定义的配置是什么？

设定的内容有很多谜团。

有办法看到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:58:40.687

不知道这是您要查找的内容，但是您可以使用以下命令启动 rails 控制台

```
> rails c 
```

然后检查应用程序

```
> <Projectname>::Application.env_config 
```

或者

```
> <Projectname>::Application.config 
```

这将打印出您的应用程序的一些配置哈希

# html - 让 XMLEdit 为 html 扩展工作

> ID：13101043
> 
> 赞同：2
> 
> 时间：2012-10-27T14:28:21.970
> 
> 标签：html, vim

嗨，我刚开始试验 vim 的 XMLedit 插件（https://github.com/sukima/xmledit/）。我注意到它适用于 xml 文件类型和 xhtml 文件类型，但不适用于 html 文件类型。我该如何解决？

我使用了病原体安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-19T10:26:34.923

其他答案是正确的，但有些人可能不清楚。这是解释：

来自 xmledit 的[文档](https://github.com/sukima/xmledit/blob/master/doc/xml-plugin.txt)：

> 添加 html 支持 Sym-link 或将此文件复制到 ftplugin 目录中的 html.vim。

以下是您可以执行的操作：

```
# Assuming you are using vundle
$ cd ~/.vim/bundle/xmledit/ftplugin
$ ls
html.vim  php.vim  xhtml.vim  xml.vim
# The html.vim already exists, so we will change its name (or delete if you want)
$ mv html.vim html.vim.bk
# symlink
$ ln -s xml.vim html.vim 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-14T02:40:04.587

该文档令人难以置信地混淆了您应该做什么。

如果您使用病原体将其安装为子模块，您的 xmledit/ftplugin 将如下所示：

```
 html.vim  php.vim  xhtml.vim  xml.vim 
```

现在 html.vim 包含您使用回调修改自己的代码，因此您可以根据需要调整自动完成。但是，更简单的解决方案是删除 html.vim 并创建一个软链接：

```
ln -s xml.vim html.vim 
```

这会将默认标记完成规则应用于 .html 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:55:14.247

由于某种原因，病原体安装无法正常工作。它没有加载帮助文件。所以我建立了vba并采购了它。这加载了文档。一旦我检查了文档，我发现有两种方法可以让 xmledit 与 html 一起使用。我尝试了两者中最简单的一种——符号链接。

那行得通。

# android - OpenGL滚动游戏相机

> ID：13101045
> 
> 赞同：0
> 
> 时间：2012-10-27T14:28:45.847
> 
> 标签：android, iphone, opengl-es

我正在使用 OpenGL ES 绘制图像，目前我的视图设置如下：

```
 gl.glClearColor(0.6f, 0.6f, 1f, 1f);
    gl.glClearDepthf(1.0f);
    gl.glViewport(0, 0, varScreenWidth, varScreenHeight);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glDisable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    gl.glLoadIdentity();
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glOrthof(0f, width, 0f, height, -10f, 10f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity(); 
```

我想在 Z 轴上滚动我的整个视图，但我不能使用 glRotate()。因为我的对象从右向左移动，当我这样做时，我必须在它们的 Y 位置上添加偏移量。我需要一种像相机胶卷一样在 Z 轴上旋转整个视图的方法，这样物体就会自动在 Y 位置上移动。我尝试通过将 (ScreenWidth - ObjPositionX) 和 sin(Zroll) 相乘来添加 y 偏移量，但这有一些视觉问题，对象不能完美地保持在它们的位置。感谢您的任何帮助...

*   编辑

好的，有人希望我更清楚。所以函数 glRotate 将我的对象滚动到它们的原点。但是我需要一种在 Z 轴上滚动整个视图的方法，因为它的起点是视图中心而不是单个对象。因此，如果对象位于中心的左侧，它将被看得更高。如果物体在右侧，它会显得更低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:49:00.160

我假设这是在你的显示函数中（这是属于的！永远不要将投影和视口设置放在窗口调整大小处理程序中——它会咬你，严重！）

```
gl.glViewport(0, 0, width, height);

gl.glMatrixMode(GL10.GL_PROJECTION);
gl.glLoadIdentity(); // glOrtho needs a identity matrix to work upon
gl.glOrthof(0f, width, 0f, height, -10f, 10f);

gl.glMatrixMode(GL10.GL_MODELVIEW);
gl.glLoadIdentity(); 
```

您假设您的观看量跨越 [0, width]×[0, height] 的范围 (x,y)。因此，要沿 Z 轴围绕该体积的中心旋转，您必须首先将枢轴点移动到那里。转换以相反的顺序应用，它们乘以堆栈，所以：

```
gl.glTranslatef(width/2., height/2., 0); // move back to origin
gl.glRotate(angle, 0, 0, 1); // rotate about Z
gl.glTranslatef(-width/2, -height/2., 0); // move pivot point to middle of viewing volume

draw_scene(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:00:58.550

好吧，我再次使用了 glRotatef() 函数。问题是：我正在使用 glTranslate() 把东西放在他们的位置上。为此，我必须为每个对象调用 glLoadIdentity。解决方案：现在我只使用 glRotate() 一次，就在开始绘制我的对象之前。把事情放在他们的位置上：我意识到我可以将 X 偏移量添加到 vertexBuffer 本身。我希望对某人有所帮助...

# php - 即使我添加了缓存清除代码，缓存也没有清除

> ID：13101052
> 
> 赞同：0
> 
> 时间：2012-10-27T14:29:29.250
> 
> 标签：php, javascript, html

我编写了一个程序来通过一个网站使用 php 上传和裁剪图像但是上传新图像后不会显示。缓存没有变得清晰。当我按 Ctrl + F5 时，将显示图像。我想在上传图像时动态清除现金。我添加了一个清除缓存的代码。但似乎它不起作用。

我添加了一个代码来清除缓存页头

```
 <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="Expires" content="Tue,01 Dec 1990 06:30:00 GMT"> 
```

我还添加了一个代码来使用 php 清除服务器端的缓存

```
 clearstatcache();
    header("Pragma: no-cache");
    header("Cache: no-cahce");
    header('Location: ../change_profile_image/', true, 302); 
```

这是我的页面上传代码

```
<?php
include('SimpleImage.php'); 
$path = "../../uploads/ori_image/";
$path_thumbnail = "../../uploads/thumbnail_image/";
require "../../connection/db.ini.php";
if(isset($_SESSION['userid'])){
$user_id=$_SESSION['userid'];
require "../../connection/db.ini.php";

///change image

error_reporting (E_ALL ^ E_NOTICE);
session_start(); //Do not remove this
//only assign a new timestamp if the session variable is empty
if (!isset($_SESSION['random_key']) || strlen($_SESSION['random_key'])==0){
    $_SESSION['random_key'] = strtotime(date('Y-m-d H:i:s')); //assign the timestamp to the session variable
    $_SESSION['user_file_ext']= "";
}
#########################################################################################################
# CONSTANTS                                                                                             #
# You can alter the options below                                                                       #
#########################################################################################################
$upload_dir = "../../uploads/ori_image";                // The directory for the images to be saved in
$upload_path = $upload_dir."/";             // The path to where the image will be saved
$large_image_prefix = "large_";             // The prefix name to large image
$thumb_image_prefix = "thumbnail_"; // The prefix name to the thumb image
$actual_image_name= "image_user_".$user_id; 
$large_image_name = $large_image_prefix."image_user_".$user_id;     // New name of the large image (append the timestamp to the filename)
$thumb_image_name = $thumb_image_prefix."image_user_".$user_id;     // New name of the thumbnail image (append the timestamp to the filename)
$max_file = "2";                            // Maximum file size in MB
$max_width = "300";                         // Max width allowed for the large image
$thumb_width = "56";                        // Width of thumbnail image
$thumb_height = "56";                       // Height of thumbnail image
// Only one of these image types should be allowed for upload
$allowed_image_types = array('image/pjpeg'=>"jpg",'image/jpeg'=>"jpg",'image/jpg'=>"jpg",'image/png'=>"png",'image/x-png'=>"png",'image/gif'=>"gif");
$allowed_image_ext = array_unique($allowed_image_types); // do not change this
$image_ext = "";    // initialise variable, do not change this.
foreach ($allowed_image_ext as $mime_type => $ext) {
    $image_ext.= strtoupper($ext)." ";
}

##########################################################################################################
# IMAGE FUNCTIONS                                                                                        #
# You do not need to alter these functions                                                               #
##########################################################################################################
function resizeImage($image,$width,$height,$scale) {
    list($imagewidth, $imageheight, $imageType) = getimagesize($image);
    $imageType = image_type_to_mime_type($imageType);
    $newImageWidth = ceil($width * $scale);
    $newImageHeight = ceil($height * $scale);
    $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
    switch($imageType) {
        case "image/gif":
            $source=imagecreatefromgif($image); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            $source=imagecreatefromjpeg($image); 
            break;
        case "image/png":
        case "image/x-png":
            $source=imagecreatefrompng($image); 
            break;
    }
    imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,$width,$height);

    switch($imageType) {
        case "image/gif":
            imagegif($newImage,$image); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            imagejpeg($newImage,$image,90); 
            break;
        case "image/png":
        case "image/x-png":
            imagepng($newImage,$image);  
            break;
    }

    chmod($image, 0777);
    return $image;
}
//You do not need to alter these functions
function resizeThumbnailImage($thumb_image_name, $image, $width, $height, $start_width, $start_height, $scale){
    list($imagewidth, $imageheight, $imageType) = getimagesize($image);
    $imageType = image_type_to_mime_type($imageType);

    $newImageWidth = ceil($width * $scale);
    $newImageHeight = ceil($height * $scale);
    $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
    switch($imageType) {
        case "image/gif":
            $source=imagecreatefromgif($image); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            $source=imagecreatefromjpeg($image); 
            break;
        case "image/png":
        case "image/x-png":
            $source=imagecreatefrompng($image); 
            break;
    }
    imagecopyresampled($newImage,$source,0,0,$start_width,$start_height,$newImageWidth,$newImageHeight,$width,$height);
    switch($imageType) {
        case "image/gif":
            imagegif($newImage,$thumb_image_name); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            imagejpeg($newImage,$thumb_image_name,90); 
            break;
        case "image/png":
        case "image/x-png":
            imagepng($newImage,$thumb_image_name);  
            break;
    }
    chmod($thumb_image_name, 0777);
    return $thumb_image_name;
}
//You do not need to alter these functions
function getHeight($image) {
    $size = getimagesize($image);
    $height = $size[1];
    return $height;
}
//You do not need to alter these functions
function getWidth($image) {
    $size = getimagesize($image);
    $width = $size[0];
    return $width;
}

//Image Locations
$large_image_location = $upload_path.$large_image_name.$_SESSION['user_file_ext'];
$thumb_image_location = $upload_path.$thumb_image_name.$_SESSION['user_file_ext'];

//Create the upload directory with the right permissions if it doesn't exist
if(!is_dir($upload_dir)){
    mkdir($upload_dir, 0777);
    chmod($upload_dir, 0777);
}

//Check to see if any images with the same name already exist
if (file_exists($large_image_location)){
    if(file_exists($thumb_image_location)){
        $thumb_photo_exists = "<img src=\"".$upload_path.$thumb_image_name.$_SESSION['user_file_ext']."\" alt=\"Thumbnail Image\"/>";
    }else{
        $thumb_photo_exists = "";
    }
    $large_photo_exists = "<img src=\"".$upload_path.$large_image_name.$_SESSION['user_file_ext']."\" alt=\"Large Image\"/>";
} else {
    $large_photo_exists = "";
    $thumb_photo_exists = "";
}

if (isset($_POST["upload"])) { 
    //Get the file information
    $userfile_name = $_FILES['image']['name'];
    $userfile_tmp = $_FILES['image']['tmp_name'];
    $userfile_size = $_FILES['image']['size'];
    $userfile_type = $_FILES['image']['type'];
    $filename = basename($_FILES['image']['name']);
    $file_ext = strtolower(substr($filename, strrpos($filename, '.') + 1));

    //Only process if the file is a JPG, PNG or GIF and below the allowed limit
    if((!empty($_FILES["image"])) && ($_FILES['image']['error'] == 0)) {

        foreach ($allowed_image_types as $mime_type => $ext) {
            //loop through the specified image types and if they match the extension then break out
            //everything is ok so go and check file size
            if($file_ext==$ext && $userfile_type==$mime_type){
                $error = "";
                break;
            }else{
                $error = "Only <strong>".$image_ext."</strong> images accepted for upload<br />";
            }
        }
        //check if the file size is above the allowed limit
        if ($userfile_size > ($max_file*(2*(1048576)))) {
            $error.= "Images must be under ".$max_file."MB in size";
        }

    }else{
        $error= "Select an image for upload";
    }
    //Everything is ok, so we can upload the image.
    if (strlen($error)==0){

        if (isset($_FILES['image']['name'])){
            //this file could now has an unknown file extension (we hope it's one of the ones set above!)
            $large_image_location = $large_image_location.".".$file_ext;
            $thumb_image_location = $thumb_image_location.".".$file_ext;

            //put the file ext in the session so we know what file to look for once its uploaded
            $_SESSION['user_file_ext']=".".$file_ext;

        $ext=$_SESSION['user_file_ext'];
            mysql_query("UPDATE user SET prof_pic='$actual_image_name$ext' WHERE user_id='$user_id'");  
            move_uploaded_file($userfile_tmp, $large_image_location);
            chmod($large_image_location, 0777);

            $width = getWidth($large_image_location);
            $height = getHeight($large_image_location);

header("Pragma: no-cache");
header("Cache: no-cahce");
header('Location: ../change_profile_image/', true, 302);

            //Scale the image if it is greater than the width set above
            if ($width > $max_width){

                $scale = $max_width/$width;
                $uploaded = resizeImage($large_image_location,$width,$height,$scale);
            }else{

                $scale = 1;
                $uploaded = resizeImage($large_image_location,$width,$height,$scale);
            }
            //Delete the thumbnail file so the user can create a new one
            if (file_exists($thumb_image_location)) {
                unlink($thumb_image_location);
            }
        }
        //Refresh the page to show the new uploaded image

        header("location:".$_SERVER["PHP_SELF"]);
        exit();
    }
}

if (isset($_POST["upload_thumbnail"]) && strlen($large_photo_exists)>0) {
    //Get the new coordinates to crop the image.
    $x1 = $_POST["x1"];
    $y1 = $_POST["y1"];
    $x2 = $_POST["x2"];
    $y2 = $_POST["y2"];
    $w = $_POST["w"];
    $h = $_POST["h"];
    //Scale the image to the thumb_width set above
    $scale = $thumb_width/$w;
    $cropped = resizeThumbnailImage($thumb_image_location, $large_image_location,$w,$h,$x1,$y1,$scale);
    //Reload the page again to view the thumbnail
    header("location:".$_SERVER["PHP_SELF"]);
    exit();
}

if ($_GET['a']=="delete" && strlen($_GET['t'])>0){
//get the file locations 
    $large_image_location = $upload_path.$large_image_prefix.$_GET['t'];
    $thumb_image_location = $upload_path.$thumb_image_prefix.$_GET['t'];
    if (file_exists($large_image_location)) {
        unlink($large_image_location);
    }
    if (file_exists($thumb_image_location)) {
        unlink($thumb_image_location);
    }
    header("location:".$_SERVER["PHP_SELF"]);
    exit(); 
}

///change image

}//end if isset session

?>
<link href="../../CSS/c.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-pack.js"></script>
<script type="text/javascript" src="js/jquery.imgareaselect.min.js"></script>
<div class="center " style="width:1010px;background-color:#c1e5ff; ">

<div style="height:34px;">
<?php require("../../menubar/menubar.php"); ?>
</div>

<div id="aa" class="center" style="width:1010px; ">
<p>
<div class="font" style="width:1010px; height:30px; background-color:#0094d6; display: table-cell;vertical-align: middle; text-indent:5px;">
<span class="font" style="width:1010px; height:30px; background-color:#0094d6; display: table-cell;vertical-align: middle; text-indent:5px;color:#FFFFFF;">Change Profile Picture</span></div></p>

<div  class="center" style="width:900px; min-height:400px; background-color:#c1e5ff; font-size:12px;font-family:Arial, Helvetica, sans-serif; color:#0094d6; border-radius:7px;margin-top:50px;">

<br />
<br />
<!--prof pic image start-->
<div style="margin-left:10px;margin-right:10px; background-color:#DBF0F7;padding-bottom:30px;padding-left:10px;" onmouseover=" clearBrowserCache()">
<?php
//Only display the javacript if an image has been uploaded
if(strlen($large_photo_exists)>0){
    $current_large_image_width = getWidth($large_image_location);
    $current_large_image_height = getHeight($large_image_location);?>
<script type="text/javascript">
function preview(img, selection) { 
    var scaleX = <?php echo $thumb_width;?> / selection.width; 
    var scaleY = <?php echo $thumb_height;?> / selection.height; 

    $('#thumbnail + div > img').css({ 
        width: Math.round(scaleX * <?php echo $current_large_image_width;?>) + 'px', 
        height: Math.round(scaleY * <?php echo $current_large_image_height;?>) + 'px',
        marginLeft: '-' + Math.round(scaleX * selection.x1) + 'px', 
        marginTop: '-' + Math.round(scaleY * selection.y1) + 'px' 
    });
    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);
    $('#w').val(selection.width);
    $('#h').val(selection.height);
     clearBrowserCache();
} 

$(document).ready(function () { 
    $('#save_thumb').click(function() {
        var x1 = $('#x1').val();
        var y1 = $('#y1').val();
        var x2 = $('#x2').val();
        var y2 = $('#y2').val();
        var w = $('#w').val();
        var h = $('#h').val();
        if(x1=="" || y1=="" || x2=="" || y2=="" || w=="" || h==""){
            alert("Please crop the image for your profile thumbnail !");
            return false;
        }else{
            return true;
        }
    });
}); 

$(window).load(function () { 
    $('#thumbnail').imgAreaSelect({ aspectRatio: '1:<?php echo $thumb_height/$thumb_width;?>', onSelectChange: preview }); 
     clearBrowserCache();
});

</script>
<script>
function clearBrowserCache() {
    header("Pragma: no-cache");
    header("Cache: no-cache");
    header("Cache-Control: no-cache, must-revalidate");
    header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
}
</script>
<?php }?>
<h1>&nbsp;</h1>
<?php
//Display error message if there are any
if(strlen($error)>0){
    echo "<div style='margin-left:3px;color:#d60000;margin-bottom:5px;'><li><strong>Error!</strong></li><li>".$error."</li></div>";
}
if(strlen($large_photo_exists)>0 && strlen($thumb_photo_exists)>0){
    echo $large_photo_exists."&nbsp;".$thumb_photo_exists;

    //Clear the time stamp session and user file extension
    $_SESSION['random_key']= "";
    $_SESSION['user_file_ext']= "";
    header("Location:../update_profile");
}else{
        if(strlen($large_photo_exists)>0){?>
        <div class="font" style="margin-bottom:10px;">Create Thumbnail <span style="color:#F00;font-size:10px" class="s_font">&nbsp;&nbsp;*If the image didnt changed please press (Ctrl + F5)</span> </div>
        <div align="center">
            <img src="<?php echo $upload_path.$large_image_name.$_SESSION['user_file_ext'];clearstatcache();?>" style="float: left; margin-right: 10px;" id="thumbnail" alt="Create Thumbnail" onmouseover="clearBrowserCache()" />
            <div style="border:1px #e5e5e5 solid; float:left; position:relative; overflow:hidden; width:<?php echo $thumb_width;?>px; height:<?php echo $thumb_height;?>px;">
                <img src="<?php echo $upload_path.$large_image_name.$_SESSION['user_file_ext'];?>" style="position: relative;" alt="Thumbnail Preview" />
            </div>
            <br style="clear:both;"/>
            <form name="thumbnail" action="<?php echo $_SERVER["PHP_SELF"];?>" method="post">
                <input type="hidden" name="x1" value="" id="x1" />
                <input type="hidden" name="y1" value="" id="y1" />
                <input type="hidden" name="x2" value="" id="x2" />
                <input type="hidden" name="y2" value="" id="y2" />
                <input type="hidden" name="w" value="" id="w" />
                <input type="hidden" name="h" value="" id="h" />
                <input type="submit" name="upload_thumbnail" value="Save Image" id="save_thumb" class="inside_button" style="float:left; margin-top:10px;width:300px;" />
            </form>
        </div>
    <hr  style="background-color:#0099CC;margin-top:50px; margin-bottom:20px;"/>
    <?php   } ?>
    <div class="font">Upload Your Photo</div>
    <form name="photo" enctype="multipart/form-data" action="<?php echo $_SERVER["PHP_SELF"];?>" method="post">
    <input type="file" name="image" size="30" style="background-color:#FFF;width:300px;"  /> <input type="submit" name="upload" value="Upload"  class="inside_button"/>
    </form>
<?php } ?>

</div>
<!--prof pic image end-->
</div>

<p><div style="width:100%; height:50px; background-color:none"></div></p>
</div>

    </div>
        <div style="width:100%;background-color:#0094d6;"  >
        <div id="dd" style="background-color:#0094d6; width:1010px; height:45px;" class="center"  ><div id="a" style="width:967px; height:45px;"   >
<table width="100%" border="0">
        <tr>

          <td>&nbsp;</td>
          <td style="font-family:Arial, Helvetica, sans-serif;font-size:10px; color:#FFF; text-align:center">  Copyright © LCB 2013, All rights reserved. </td>
          <td>&nbsp;</td>
        </tr>
        <tr >
          <td width="30%">&nbsp;</td>
          <td width="43%">&nbsp;</td>
          <td width="27%">&nbsp;</td>
        </tr>
      </table>
</div>
     </div> 
</div> 
```

我很困惑在这里做什么。有没有人对这个问题有意见或线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:40:27.370

你可以尝试这样的事情来欺骗缓存机制：

```
<img src="your_image.jpg?nocache=<?=time()?>"/> 
```

每次浏览器都应将其视为新图像。让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:16:41.697

您可以像这样向图像网址添加时间戳：

```
<img src="/image.jpg?timestamp=<?php echo Time(); ?>" > 
```

这使得每个请求的 URL 都是唯一的，从而使每个请求都是唯一的。因此，没有缓存！

代码可能在这两行中：

```
$thumb_photo_exists = "<img src=\"".$upload_path.$thumb_image_name.$_SESSION['user_file_ext']."?timestamp=".Time()."\" alt=\"Thumbnail Image\"/>"; 
```

和

```
$large_photo_exists = "<img src=\"".$upload_path.$large_image_name.$_SESSION['user_file_ext']."?timestamp=".Time()."\" alt=\"Large Image\"/>"; 
```

照顾好`$_SESSION['user_file_ext']`，你的`Time()`时间戳就在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T19:07:53.647

另请查看标题：

```
header("Cache: no-cahce"); 
```

应该：

```
header("Cache: no-cache"); 
```

# objective-c - 将 self 作为参数传递

> ID：13101054
> 
> 赞同：0
> 
> 时间：2012-10-27T14:29:39.043
> 
> 标签：objective-c, object, pointers, parameters

我对 Objective C 还很陌生，因为我习惯了 C++，所以可能会感到困惑。我正在制作一个 iphone 游戏，我想做的是让所有敌人和英雄“注册”和“取消注册”到一个班级。我想将敌人和英雄的每个单独实例传递给这个单例类，然后将对象添加到 NSMutableArray 并能够调用函数并更改每个特定实例中的变量（通过使用基于它们的 registerID 的 for 循环）。当我试图传递一个敌方对象的指针并在网上查看论坛似乎没有人回答这个问题时，我收到一个错误，它需要一个类型（在损坏的istributer.h 中）。我怎样才能做到这一点？我不想要堆栈上的对象的副本，因此当我更改变量时，我不会丢失这些更改。提前致谢。

损害分配器.h

```
@interface DamageDistributer : NSObject {

    GLuint enemyRegisterID;
    GLuint heroRegisterID;

    NSMutableArray *enemies;
    NSMutableArray *heros;
}

- (void)RegisterHero:(Player*)playerHero; //PROBLEM HERE
- (void)RegisterEnemy:(AbstractEnemy*)enemyUnit; //PROBLEM HERE 
- (void)Unregister:(GLuint)registerID type:(GLuint)typeOfEntity;

+ (DamageDistributer*)sharedDamageDistributer; 
```

损害分配器.m

```
- (void)RegisterHero:(Player *)playerHero {

    [heros addObject:playerHero];
    playerHero.damageDistID = heroRegisterID;
    heroRegisterID++;
}

- (void)RegisterEnemy:(AbstractEnemy *)enemyUnit {

    [enemies addObject:enemyUnit];
    enemyUnit.damageDistID = enemyRegisterID;
    enemyRegisterID++;
}

- (void)Unregister:(GLuint)registerID type:(GLuint)typeOfEntity {

    if (typeOfEntity == hero) {
        [heros removeObjectAtIndex:registerID];
    }
    else {
        [enemies removeObjectAtIndex:registerID];
    }
} 
```

然后这是敌人班的电话

```
sharedDamageDistributer = [DamageDistributer sharedDamageDistributer];
[sharedDamageDistributer RegisterEnemy:self]; 
```

那么我做错了什么？

编辑：哦，哇忽略了...谢谢大家，我认为这不仅仅如此。还有一个问题。一旦从数组中删除一个对象，可变数组是否会移动索引，所以我必须在删除一个对象后减少所有对象（registerID）？还是不将索引保留在原处并填充空白？还是不断添加到最后而不改变任何东西？再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:36:13.927

看起来标题不知道 Player 和 AbstractEnemy。您可以导入这 2 个标头，也可以添加 @class（前向声明），告诉编译器该名称有一个类。然后当然你在 DamageDistributor 的实现中导入这些标头

```
 @class Player;
    @class AbstractEnemy;
    @interface DamageDistributer : NSObject {

        GLuint enemyRegisterID;
        GLuint heroRegisterID;

        NSMutableArray *enemies;
        NSMutableArray *heros;
    }

    - (void)RegisterHero:(Player*)playerHero; //PROBLEM HERE
    - (void)RegisterEnemy:(AbstractEnemy*)enemyUnit; //PROBLEM HERE 
    - (void)Unregister:(GLuint)registerID type:(GLuint)typeOfEntity;

    + (DamageDistributer*)sharedDamageDistributer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:37:29.533

我认为它无法识别标题中的自定义类。将声明添加到您的 .h 文件中，例如：

```
@class Player;
@class AbstractEnemy; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T14:40:11.487

在 Objective-C 中，所有东西（除了基本的 c 类型，如 int、strict 等）都在堆上。所有对象都在堆上并使用引用计数（如智能指针）进行内存管理。

不过，您的错误看起来与此无关，可能是您没有做到`#import "Player.h"`

# symfony - symfony2 webprofiler 显示 prod 环境

> ID：13101055
> 
> 赞同：5
> 
> 时间：2012-10-27T14:29:42.173
> 
> 标签：symfony

开发环境中的系统使用 jquery 运行速度非常慢，但在 prod 我非常好，可以将 webprofiler 放在 prod 环境中吗？问候和感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-27T15:48:12.430

将此添加到`routing.yml`：

```
_wdt:
    resource: "@WebProfilerBundle/Resources/config/routing/wdt.xml"
    prefix:   /_wdt

_profiler:
    resource: "@WebProfilerBundle/Resources/config/routing/profiler.xml"
    prefix:   /_profiler 
```

将此添加到`config_prod.yml`：

```
web_profiler:
    toolbar: true 
```

改变这个`AppKernel.php`：

`$bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle()`从此声明中删除：

```
if (in_array($this->getEnvironment(), array('dev', 'test'))) {
    // ...
} 
```

并将其添加到 if 语句之外的 bundles 数组中：

```
new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle() 
```

在`app.php`设置调试=真

```
$kernel = new AppKernel('prod', true); 
```

补充`config_prod.yml`：

```
framework:
    profiler:
        only_exceptions: false 
```

这应该够了吧。

更改代码后不要忘记执行此操作：

```
$ php ./app/console cache:clear --env=prod --no-debug 
```

# c++ - 检测类型是否为 std::tuple？

> ID：13101061
> 
> 赞同：17
> 
> 时间：2012-10-27T14:31:05.613
> 
> 标签：c++, templates, c++11, tuples, typetraits

目前我有两个功能：

```
template<typename Type> bool f(Type* x);
template<typename... List> bool f(std::tuple<List...>* x); 
```

有没有办法将这两个函数与一个额外的模板参数合并，该参数指示传递的类型是否是一个元组？

```
template<typename Type, bool IsTuple = /* SOMETHING */> bool f(Type* x); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T14:35:26.387

当然，使用（从[此处](https://stackoverflow.com/questions/11251376/how-can-i-check-if-a-type-is-an-instantiation-of-a-given-class-template#comment14786989_11251408)[`is_specialization_of`](https://bitbucket.org/martinhofernandes/wheels/src/default/include/wheels/meta/type_traits.h%2B%2B#cl-161)获取并修复的链接）：

```
template<typename Type, bool IsTuple = is_specialization_of<Type, std::tuple>::value>
bool f(Type* x); 
```

然而，问题是，你真的想要这样吗？通常，如果您需要知道一个类型是否是元组，您需要对元组进行特殊处理，这通常与它的模板参数有关。因此，您可能希望坚持使用重载版本。

**编辑：**既然你提到你只需要一小部分专门，我建议重载，但只适用于小的特殊部分：

```
template<class T>
bool f(T* x){
  // common parts...
  f_special_part(x);
  // common parts...
} 
```

和

```
template<class T>
void f_special_part(T* x){ /* general case */ }

template<class... Args>
void f_special_part(std::tuple<Args...>* x){ /* special tuple case */ } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-26T09:03:28.293

使用 C++17，这是一个相当简单的解决方案，使用[`if constexpr`](http://en.cppreference.com/w/cpp/language/if#Constexpr_If)

```
template <typename> struct is_tuple: std::false_type {};

template <typename ...T> struct is_tuple<std::tuple<T...>>: std::true_type {}; 
```

然后您可以执行以下操作：

```
template<typename Type> bool f(Type* x) {
    if constexpr (is_tuple<Type>::value) {
        std::cout << "A tuple!!\n";
        return true;
    }

    std::cout << "Not a tuple\n";
    return false;
} 
```

确保其有效的测试：

```
f(&some_tuple);
f(&some_object); 
```

输出：

> 一个元组！！
> 不是元组

* * *

*部分来自此处找到的[答案](https://stackoverflow.com/a/16337657/2089675)的解决方案：[如何知道类型是否是 std::vector 的特化？](https://stackoverflow.com/questions/16337610/how-to-know-if-a-type-is-a-specialization-of-stdvector)*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-27T14:49:20.687

你可以让你的函数服从另一个函数：

```
template<typename Type,bool IsTuple> bool f(Type *x);

template<typename Type> 
inline bool f(Type* x) { return f<Type,false>(x); }

template<typename... List> 
inline bool f(std::tuple<List...>* x) { return f<std::tuple<List...>,true>(x); } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-28T01:45:17.960

对于 C++11，这是我的首选模式：

```
// IsTuple<T>()
template <typename T>
struct IsTupleImpl : std::false_type {};

template <typename... U>
struct IsTupleImpl<std::tuple <U...>> : std::true_type {};

template <typename T>
constexpr bool IsTuple() {
  return IsTupleImpl<decay_t<T>>::value;
} 
```

效果很好。没有依赖项（我不能使用 Boost）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-12T09:10:07.583

可能有点晚了，但你也可以用更现代的 c++17 风格和模板变量做这样的事情：

```
template <typename T>
constexpr bool IsTuple = false;
template<typename ... types>
constexpr bool IsTuple<std::tuple<types...>>   = true; 
```

还有一些测试

```
struct TestStruct{};

static_assert(IsTuple<int> == false,                "Doesn't work with literal.");
static_assert(IsTuple<TestStruct> == false,         "Doesn't work with classes.");
static_assert(IsTuple<std::tuple<int, char>>,       "Doesn't work with plain tuple.");
static_assert(IsTuple<std::tuple<int&, char&>>,     "Doesn't work with lvalue references");
static_assert(IsTuple<std::tuple<int&&, char&&>>,   "Doesn't work with rvalue references"); 
```

你可以在这里查看[https://godbolt.org/z/FYI1jS](https://godbolt.org/z/FYI1jS)

编辑：您将需要运行 std::decay、std::remove_volatile、std::remove_const 来处理特殊情况。

# c# - 为什么我的线程似乎占用不到 1MB 的内存？

> ID：13101062
> 
> 赞同：3
> 
> 时间：2012-10-27T14:31:13.240
> 
> 标签：c#, multithreading, memory, .net-4.5

我试图更好地掌握 .NET 线程模型。我多次听到并阅读（最近一次是在观看此视频时：[AppFabric.tv - 与 Jeff Richter](http://channel9.msdn.com/Shows/AppFabric-tv/AppFabrictv-Threading-with-Jeff-Richter)进行线程处理），.NET 线程占用至少 1MB 内存（因为它们为堆栈留出了 1MB）。现在，我尝试编写一些代码来演示这一点，但最终得到的结果如下

```
297 threads are using 42MB of memory
298 threads are using 43MB of memory
299 threads are using 40MB of memory
300 threads are using 40MB of memory 
```

因此，线程似乎每个都没有使用 1MB 的内存。我已尽我所能在上述视频中重现 5 分钟演示的程序，但我似乎没有得到相同的结果，我不明白为什么。由于内存消耗似乎有时会下降，我猜线程必须退出或被搁置在某个地方？或者也许我没有正确测量内存？

用于获得上述结果的程序如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        ManualResetEvent manualReset = new ManualResetEvent(false);
        int createdThreads = 0;
        try
        {
            while (true)
            {
                Thread t = new Thread(WaitOneEvent);
                t.Start(manualReset);
                createdThreads++;
                Console.WriteLine("{0} threads are using {1}MB of memory", createdThreads, System.Diagnostics.Process.GetCurrentProcess().PrivateMemorySize64 / (1024 * 1024));
            }
        }
        catch (OutOfMemoryException)
        {
            Console.WriteLine("Out of memory at {0} threads", createdThreads);
            System.Diagnostics.Debugger.Break();
            manualReset.Set();
        }
    }

    private static void WaitOneEvent(object eventObject) {
        ((ManualResetEvent)eventObject).WaitOne();
    }
} 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:33:55.660

您可能喜欢使用`VirtualMemorySize64()`but `PrivateMemorySize64()`。

女士[在这里写道](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686774%28v=vs.85%29.aspx)：

> 每个新线程或纤程都会收到自己的堆栈空间，包括保留的和最初提交的内存。保留内存大小表示虚拟内存中的总堆栈分配。[...] 最初提交的页面在被引用之前不会使用物理内存；[...]

由于 OP 示例代码中的线程除了等待发出信号外什么都不做，它们的（堆栈）内存不使用物理内存，因此不会被`PrivateMemorySize64()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:08:40.480

您的测量太粗略，无法准确跟踪线程堆栈内存消耗。它测量不能与另一个进程共享的虚拟内存量。.NET 进程中唯一可共享的内存是代码、本机 Windows DLL、CLR、抖动和任何由 ​​ngen.exe 生成的本机图像（通常只有 .NET 框架程序集）。

其他一切都是私人记忆。Jitted 代码、加载器堆和垃圾收集堆是主要块。这就是它的原因，垃圾收集器会尽可能缩小虚拟内存分配。

您可以使用 SysInternals 的 VMMap 实用程序更好地了解虚拟内存使用情况。您会沉浸在细节中，但它将线程堆栈显示为一个单独的类别。

# .htaccess - 如何使用 mod_rewrite 缩短 url

> ID：13101067
> 
> 赞同：0
> 
> 时间：2012-10-27T14:31:50.943
> 
> 标签：.htaccess, mod-rewrite

我有这样的网址：

`http://mysite.com/launch/index.php` `http://mysite.com/launch/index1.php` `http://mysite.com/launch/index2.php` `http://mysite.com/launch/index3.php`

我想从网址中取出 index.php、index1.php、index2.php、index3.php，这样我就有：

`http://mysite.com/launch/`

我怎样才能在.htaccess 中做到这一点？

我希望加载所有文件而不交换另一个文件，我只需要从 url 路径中删除文件名。

**提示（这可能会有所帮助）** - 一次只有一个文件获取请求。该文件是随机选择的。“启动”文件夹中没有其他文件（除了 index.php、index1.php、index2.php、index3.php）。

# xml - ROS 与 SMACH 的集成

> ID：13101068
> 
> 赞同：1
> 
> 时间：2012-10-27T14:32:08.820
> 
> 标签：xml, integrate, publisher, subscriber, ros

我目前正在开发一个使用 QT 的 GUI，它根据从另一个 QT GUI 发送的 ROS 消息接收到的 XML 字符串进行更改。这工作正常，但是我需要使用 ROS 和 SMACH 创建一个节点，该节点将根据 SMACH 状态机所处的状态向 GUI 发送不同的 XML 字符串。

我没有使用 SMACH 的经验，也找不到一个很好的例子来说明如何将 ROS 发布者和订阅者与 SMACH 状态机集成。

任何示例或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:39:12.897

看看这个 - 它应该包含你需要的一切

[http://www.ros.org/wiki/ROS/Tutorials/WritingPublisherSubscriber(c%2B%2B)](http://www.ros.org/wiki/ROS/Tutorials/WritingPublisherSubscriber(c%2B%2B))

# javascript - Facebook 登录使用 javascript sdk 没有弹出

> ID：13101071
> 
> 赞同：1
> 
> 时间：2012-10-27T14:32:45.530
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用 javascript sdk 来实现 facebook 登录。是否可以将用户重定向到完整的登录页面而不是显示弹出窗口？我尝试添加 display : 'page' 但这似乎没有任何作用。

```
FB.init({

    appId: '123456789',
    cookie: true,
    status: true,
    xfbml: true,
    frictionlessRequests: true,
    oauth: true
});

function login() { //this function called on click of login button
   FB.login(function (response) {
    //my code
   }, { scope: 'email,publish_stream,read_stream,offline_access' });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:08:45.930

[至少对我来说，使用facebook-javascript-sdk](/questions/tagged/facebook-javascript-sdk "显示标记为“facebook-javascript-sdk”的问题")登录总是在弹出窗口中打开。如果您希望它显示在完整页面而不是弹出窗口中，您应该考虑其他选项，例如设置该选项的服务器端身份验证`display:page`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-26T23:29:40.853

这篇文章中的一个答案对我有用：[Facebook 登录没有弹出窗口？](https://stackoverflow.com/questions/7125320/facebook-login-without-pop-up)

这是代码。它应该在之后运行`window.onload`

```
var APPID = "YOUR_APP_ID"
var uri = encodeURI('http://example.com');

FB.init({ appId: APP_ID,
          status: true, // check login status
       });
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        //user is logged in
    } else {
        window.location = encodeURI("https://www.facebook.com/dialog/oauth?client_id=" + APPID + "&redirect_uri="+uri+"&response_type=token");
    }
}); 
```

为了完整起见，这里是加载 FB JS SDK 的代码。

```
// Load the SDK asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement('script');
            js.id = id;
            js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        }(document)); 
```

# php - 通过梨从gmail发送安全吗？

> ID：13101072
> 
> 赞同：1
> 
> 时间：2012-10-27T14:33:20.037
> 
> 标签：php, security, smtp, gmail, pear

我正在使用我网站上的表格使用 PEAR 邮件功能发送电子邮件。电子邮件将通过 gmail 发送，如此处所述 - [http://www.phpmaniac.net/wiki/index.php/Pear_Mail](http://www.phpmaniac.net/wiki/index.php/Pear_Mail)

因此，我需要包括以下内容：

```
<?php
$smtp_params["host"]     = "smtp.gmail.com";
$smtp_params["port"]     = "25";
$smtp_params["auth"]     = true;
$smtp_params["username"] = "user@gmail.com";
$smtp_params["password"] = "pass";
?> 
```

像这样将我的用户名和密码放在脚本中是否安全？显然，您将无法使用“查看源代码”看到这样的服务器端脚本，但是您可以通过网络剪辑器或其他方式获取源文件并以这种方式阅读脚本吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:51:05.320

如果有人不小心在你的 apache 上禁用 php 解析，你的文件将作为纯文本提供，所以我喜欢将密码保存在我的 docroot 之外的配置文件中......以防万一。有几次在为 apche 构建新的 php 模块时，我忘记将 php.conf 文件复制到我的 httpd/conf.d/ direcoty 并在没有 php 的情况下启动 apache。一世

理论上，任何不安全的连接都可以被窥探。但是，在这种情况下，它需要在您的服务器和 gmails smtp 服务器之间被拦截。此外，即使您将电子邮件安全地发送到邮件服务器，您也不能确定他们会安全地连接以发送邮件，或者预期的收件人会安全地检查他们的电子邮件帐户。

在这种情况下，您只关心您的基本身份验证是否被窥探。使用 gmails 安全 ssl 连接

假设所有电子邮件通信都不安全，以确保安全。（除非您加密消息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:53:23.073

您当然应该使用 SSL/TLS 进行连接 - 仅仅是因为通过未加密的通道以明文形式发送密码是一个坏主意。

只要 PHP 解释器正常工作并且 PHP 脚本中没有允许攻击者查看 PHP 文件源代码的安全漏洞，PHP 脚本中的登录数据就是安全的。

针对配置错误导致 PHP 源代码可见的风险，一个简单的改进是将配置文件存储在文档根目录之外。

# python - 如何导入和转换？

> ID：13101074
> 
> 赞同：0
> 
> 时间：2012-10-27T14:33:23.030
> 
> 标签：python, converter

导入文件后，打开并阅读

```
fop = open('lottery.txt','r')
_str = fop.read()
fop.close() 
```

我得到这样的内容：

```
'   monday: 2 23\ntuesday :4 31\nwednesday   : 19 22\nthursday : 1' 
```

如何将其转换为字典并得到以下结果：

```
{'monday': '2 23', 'tuesday': '4 31','wednesday': '19 22', 'thursday' : '1'} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:35:14.793

逐行处理：

```
with open('lottery.txt', 'r') as fop:
    result = dict(map(str.strip, line.split(':', 1)) for line in fop) 
```

`dict(map(..) for line in fop)`正在使用生成[器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)；我们遍历`fop`每一行，然后在我们找到的第一个冒号上将该行拆分为两个值`:`，并将剥离的结果存储为映射的键和值。

`map(str.strip, line.split(':', 1))`从分割线的每个部分的开头和结尾删除空格。本身将`.split()`拆分限制`:`为 1 个这样的字符，以防止`:`行上任何额外的冒号混淆`dict`构造函数，构造函数只需要`(key, value)`对。

演示：

```
>>> open('/tmp/lottery.txt', 'w').write('   monday: 2 23\ntuesday :4 31\nwednesday   : 19 22\nthursday : 1')
>>> with open('/tmp/lottery.txt', 'r') as fop:
...     result = dict(map(str.strip, line.split(':', 1)) for line in fop)
... 
>>> result
{'tuesday': '4 31', 'thursday': '1', 'wednesday': '19 22', 'monday': '2 23'} 
```

长的非生成器表达式版本将是：

```
with open('lottery.txt', 'r') as fop:
    result = {}
    for line in fop:
        key, value = line.split(':', 1)
        result[key.strip()] = value.strip() 
```

# javascript - Javascript意外的意外标识符

> ID：13101076
> 
> 赞同：0
> 
> 时间：2012-10-27T14:33:28.897
> 
> 标签：javascript, html, dom

出于某种奇怪的原因，这行代码被标识为

这个特定的行是

```
 `Unexpected identifier` 

    bmr =  66 + ( 6.23 * weightInlbs ) + ( 12.7 heightInInches ) - ( 6.8 * age ); 
```

这是整个代码

```
function metricComputation() {
    var age = document.getElementById("age");
    var weightInlbs = document.getElementById("weight");
    var heightInInches =  feetToInches(new Number(document.getElementById("heightinFt")) , document.getElementById("heightinIn"));
    var bmr;
    var gender = document.getElementById("gender");

    if(gender === "male"){
         bmr =  66 + ( 6.23 * weightInlbs ) + ( 12.7 heightInInches ) - ( 6.8 * age );
    }

} 
```

这是整个标记

```
<!DOCTYPE>
<html>
    <head>
        <script src="bmrcalc.js"></script>
    </head>
        <body>
            <center>
                    <h1>Basal Metabolic Rate</h1>
                Height: <input type = "text" id ="heightinFt"> ft  <input type = "text" id = "heightinIn"> in <br>
                Weight: <input type = "text" id ="weight">lbs<br>
                Age: <input type = "text" id = "age"><br>
                Gender:<select id = "gender">
                    <option value = "male">Male</option>
                    <option value = "female">Female</option>
                <select> <br>
                <button onclick = "metricComputation()">Compute</button>
                <div id = "result"></div>
            </center>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:35:54.800

你的意思是乘法吗？

```
bmr =  66 + ( 6.23 * weightInlbs ) + ( 12.7 * heightInInches ) - ( 6.8 * age );
// -----------------------------------------/\ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:36:31.920

这是错误：

```
12.7 heightInInches 
```

标识符`heightInInches`不应位于此位置。预期的是像 *、+、- 或 / 这样的运算符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:36:45.603

```
if(gender === "male"){
     bmr =  66 + ( 6.23 * weightInlbs ) + ( 12.7 * heightInInches ) - ( 6.8 * age );
} 
```

你忘记了*****`( 12.7 heightInInches )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T14:40:09.020

您在 "12.7" 和 heightInInches" 之间缺少 "*"：

```
bmr =  66 + ( 6.23 * weightInlbs ) + ( 12.7 * heightInInches ) - ( 6.8 * age ); 
```

# jsf - 在转换器中注入 managedBean

> ID：13101081
> 
> 赞同：2
> 
> 时间：2012-10-27T14:34:42.803
> 
> 标签：jsf, converter, managed-bean

我正在尝试为我的 selectonemenu 列表编写一个转换器，以便可以从 managedBean 的 getter 中检索我想要显示的列表`getDatasetList()`。我的 managedBean 是 viewScoped。

这是转换器的代码：

```
@FacesConverter(value = "datasetConverter")
public class DatasetConverter implements Converter{

@ManagedProperty(value="#{projectCampaignManagementMB}")
private ProjectCampaignManagementMB campaignManagementMB;

@Override
public Object getAsObject(FacesContext context, UIComponent component,
        String value) {

     List <DataSet>  datasetList=campaignManagementMB.getDatasetList();

     DataSet dataSet;
     String dataSetName;
     if (datasetList!=null){
            for(int i=0 ;i<datasetList.size();i++)
            {   
                dataSet=datasetList.get(i);
                dataSetName=dataSet.getName();

            if  (dataSetName.equals(value))
                return dataSet;
            System.out.println("getasobject dataset"+dataSet.getName());
            }
     }
            return null;
}

@Override
public String getAsString(FacesContext context, UIComponent component,
        Object value) {

 if (value==null) return ""; 
    System.out.println("getastring dataset"+((DataSet) value).getName());
 return ((DataSet) value).getName();
} 
```

但是我在这条线上得到了一个 java.lang.NullPointerException

```
 List <DataSet>  datasetList=campaignManagementMB.getDatasetList(); 
```

所以注入的managedBean为Null，

我尝试了一些没有意义但有效的东西，但我想要一些正确的东西。我用这个

```
@ManagedProperty(value="#{projectCampaignManagementMB}")
private ProjectCampaignManagementMB campaignManagementMB =
    new ProjectCampaignManagementMB(); 
```

代替

```
@ManagedProperty(value="#{projectCampaignManagementMB}")
private ProjectCampaignManagementMB campaignManagementMB 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:32:57.813

当您想在转换器中使用托管属性时，请让您的转换器成为托管 bean，就像这样

```
@ManagedBean
@SessionScoped
public class DatasetConverter implements Converter{ 
```

比在您的 xhtml 页面中使用它作为转换器只需使用绑定

像这样

```
<h:inputText converter="#{datasetConverter}" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T17:30:29.910

前段时间我遇到了类似的问题，我记得@Inject 不适用于转换器。帮助我的是直接用它的 JNDI 名称查找 bean。沿着这条线的东西：

```
Context context = new InitialContext();  
BeanClass bean = context.lookup("yours bean jndi"); 
```

如果您使用 JBoss，您可以在服务器启动时看到 bean JNDI。

# php - 新闻脚本中的分页

> ID：13101084
> 
> 赞同：3
> 
> 时间：2012-10-27T14:35:13.410
> 
> 标签：php, pagination

我有一个需要更改的简单新闻系统，因此我可以限制每页的项目，但我没有任何可以做到这一点的东西，所以我需要自己做。

基本上该函数只显示整个平面文件数组，我想将其限制为每页 3 个项目（可配置）。

我的开始逻辑是：

```
$itemspage=pages->current_page;
$itemsperpage=3;
$limitn=$itemperpage*$itemspage;
$itemindex=$limitn-2; 
```

如果 page 为 1，它将显示来自数组索引 1、2、3 的新闻 如果 page 为 2，它将显示来自数组索引 4、5、6 的新闻，依此类推...

我认为这在逻辑上应该可行，但是如果数组中的新闻不能分成 3 条呢？使用这种逻辑，这应该（至少在起始索引上）会导致错误。

整个代码在这里：

```
$list = $this->getNewsList();
  $pages = new Paginator;
  echo "<table class='newsList'>";
  foreach ($list as $value) {
    $newsData = file($this->newsDir.DIRECTORY_SEPARATOR.$value);
    $newsTitle  = $newsData[0];
     $submitDate = $newsData[1];    
     unset ($newsData['0']);
     unset ($newsData['1']);

     $newsContent = "";
     $itemspage=pages->current_page;
     $itemperpage=3;
     $limitn=$itemperpage*$itemspage;
     $itemindex=$limitn - 2;
     foreach ($newsData as $value) {
           $newsContent .= $value;
     }

    echo "<tr><th align='left'>$newsTitle</th>
              <th class='right'>$submitDate</th></tr>";
    echo "<tr><td colspan='2'>".$newsContent."<br/></td></tr>";
  }
  echo "</table>"; 
```

for 还没有完成，只是拆分背后的逻辑。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:08:23.210

我不确定您是如何构建 $newsContent 的，但也许您的答案在这里：

```
$list = $this->getNewsList();

$pages = new Paginator;
$itemspage = $pages->current_page;
$itemperpage = 3; // you might want te define this property in the paginator also ($itemperpage = $pages->items_per_page);
$currentPageList = array_slice($list, ($itemspage - 1) * $itemperpage, $itemspage);

echo "<table class='newsList'>";
foreach ($currentPageList as $value) {
    $newsData = file($this->newsDir.DIRECTORY_SEPARATOR.$value);
    $newsTitle  = $newsData[0];
    $submitDate = $newsData[1];
    unset ($newsData['0']);
    unset ($newsData['1']);

    $newsContent = "";
    $limitn=$itemperpage*$itemspage;
    $itemindex=$limitn - 2;
    foreach ($newsData as $value) {
        $newsContent .= $value;
    }

    echo "<tr><th align='left'>$newsTitle</th>
    <th class='right'>$submitDate</th></tr>";
    echo "<tr><td colspan='2'>".$newsContent."<br/></td></tr>";
}
echo "</table>"; 
```

注意[array_slice](http://php.net/manual/en/function.array-slice.php)：

> **array_slice()**返回由 offset 和 length 参数指定的数组数组中的元素序列。

# c++ - OpenGL：Glut.h 访问冲突

> ID：13101088
> 
> 赞同：1
> 
> 时间：2012-10-27T14:35:44.123
> 
> 标签：c++, opengl, glut

好的，所以我正在开发一个小程序，它使用递归函数在四个给定点之间细分，随机生成一张地形，地形由四边形组成。每次递归找到的中心点被赋予一个随机高度值，然后将所有顶点保存到一个数组中，然后在绘制时循环遍历。

最初，我定义了用于在堆栈上存储顶点的二维数组，但是根据细分的数量，这可能会变得非常大。例如，深度 3 产生 256 个顶点。所以，我决定尽可能在堆上定义这个数组，这对于更大的地形片更有效。在 Terrain 类中，我定义了以下浮点指针数组。

```
float* vertices[]; 
```

然后，在这个类的构造函数中，我执行以下操作来初始化它在堆上的大小。4 的给定细分数加 1 的幂得到 256，以及创建的顶点数。

```
int vertexCount = pow(4.0, subdivisions+1);
*vertices = new float[vertexCount]; 
```

然后，这些指针中的每一个都指向堆中的浮点值数组，定义如下。

```
for(int i = 0; i<vertexCount + 1; i++)
{
    float* temp = new float[3];
    vertices[i] = temp;
    delete temp;
    temp = 0;
} 
```

我用于创建地形的递归函数如下所示：

```
void Terrain::Subdivide(float* a, float* b, float* c, float* d, int subdivisions, float      maxHeight)
{
if(subdivisions>0)
{
    float e[3];
    float f[3];
    float g[3];
    float h[3];
    float centre[3];
    int i = 0;

    srand(time(NULL));

    for(i = 0; i<3; i++) if(i!= 1) e[i] = (a[i]+b[i])/2;
    for(i = 0; i<3; i++) if(i!= 1) f[i] = (b[i]+c[i])/2;
    for(i = 0; i<3; i++) if(i!= 1) g[i] = (c[i]+d[i])/2;
    for(i = 0; i<3; i++) if(i!= 1) h[i] = (d[i]+a[i])/2;

    centre[0] = (h[0]+f[0])/2;
    centre[2] = (e[2]+g[2])/2;

    e[1] = 0;
    f[1] = 0;
    g[1] = 0;
    h[1] = 0;
    centre[1] = (float)rand()/((float)RAND_MAX/maxHeight);

    Subdivide(a, e, centre, h, subdivisions-1 , maxHeight);
    Subdivide(e, b, f, centre, subdivisions-1, maxHeight);
    Subdivide(centre, f, c, g, subdivisions-1, maxHeight);
    Subdivide(h, centre, g, d, subdivisions-1, maxHeight);
}
else
{
    int i = 0;
    for(i = 0; i<3; i++) {vertices[vertexCounter][i] = a[i];} vertexCounter++;
    for(i = 0; i<3; i++) {vertices[vertexCounter][i] = b[i];} vertexCounter++;
    for(i = 0; i<3; i++) {vertices[vertexCounter][i] = c[i];} vertexCounter++;
    for(i = 0; i<3; i++) {vertices[vertexCounter][i] = d[i];} vertexCounter++;
} 
```

}

当我简单地将顶点定义为堆栈上的二维数组（在其他地方进行了一些更改）时，该代码似乎可以工作，但是当在我的主函数中调用 glutInit 时，此代码在 Glut.h 中的以下行中产生了一个未处理的异常：（行486)

```
static void APIENTRY glutInit_ATEXIT_HACK(int *argcp, char **argv) {     __glutInitWithExit(argcp, argv, exit); } 
```

我已经多次查看代码，但看不出问题出在哪里，更奇怪的是应该从 Glut.h 而不是 Terrain 类抛出异常。任何人都可以在这里看到任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:37:22.997

这是一个错误

```
for(int i = 0; i<vertexCount + 1; i++) 
```

应该

```
for(int i = 0; i<vertexCount; i++) 
```

我们从零开始计算数组的原因是您不必加一。

这是另一个错误

```
for(int i = 0; i<vertexCount; i++)
{
    float* temp = new float[3];
    vertices[i] = temp;
    delete temp;
    temp = 0;
} 
```

应该

```
for(int i = 0; i<vertexCount; i++)
{
    vertices[i] = new float[3];
} 
```

由于某种原因，您分配了内存，立即再次释放它，但继续使用顶点数组中释放的内存。这将很快崩溃。

第三个（希望是最终的）错误是

```
*vertices = new float[vertexCount]; 
```

应该

```
vertices = new float*[vertexCount]; 
```

为了模拟二维数组，第一个维度是浮点指针数组。这就是固定代码分配的内容。

# gwt - 如何转换 GWT OpenLayers VectorFeature？

> ID：13101094
> 
> 赞同：1
> 
> 时间：2012-10-27T14:36:34.713
> 
> 标签：gwt, transform, openlayers, projection, gwt-openlayers

我正在使用 OpenLayers GWT。我想在 Google Maps 图层上放置一个 GeoJSON 形状。我做了如下：

```
String gson = "{here I put a valid GeoJSON string}";
GeoJSON geoJSON = new GeoJSON();
VectorFeature[] vf = geoJSON.read(gson);
myShapeLayer.addFeature(vf[0]); 
```

形状显示在地图上，但不是正确的位置。我想我必须将 Vector 转换为 EPSG:900913，但我不知道如何使用 VectorFeature。没有要使用的转换功能。如何将转换应用于 GWT VectorFeature？

这个问题没有得到回应。我想更好地解释我想知道的：

在 javascript Openlayers 中，您可以执行以下操作：

```
var projWGS84 = new OpenLayers.Projection("EPSG:4326");
var proj900913 = new OpenLayers.Projection("EPSG:900913");

feature.geometry.transform(projWGS84, proj900913); 
```

我怎样才能在 OpenLayers 的 GWT 版本中做同样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:26:06.763

OpenLayers-GWT 缺少将采用选项参数的 GeoJSON 构造函数，这必须添加到 OpenLayers-GWT 源中。同时，它已添加到 KML Vector 类中。所以现在你可以这样做：

```
String kmlString = "{<string with KML>}";
FormatOptions formatOptions = new FormatOptions();
formatOptions.setInternalProjection(new Projection("EPSG:900913"));
formatOptions.setExternalProjection(new Projection("EPSG:4326"));
KML kml = new KML(formatOptions);

VectorFeature[] vf = KML.read(kmlString);
myShapeLayer.addFeature(vf[0]); 
```

以同样的方式，它应该被添加到 GeoJSON 类中以使转换工作。

# android - MapPolaris 并使用按钮地图显示点气泡

> ID：13101095
> 
> 赞同：0
> 
> 时间：2012-10-27T14:36:35.357
> 
> 标签：android, google-maps

我在我的 android 应用程序中使用 Polaris 地图库。 [https://github.com/cyrilmottier/Polaris](https://github.com/cyrilmottier/Polaris)

我有一些地理点的谷歌地图。我正在从数据库中读取它们。我在地图活动上添加了两个按钮——“下一个”和“上一个”在点之间导航。

mc.animateTo(geopoints.get(arrayID));
*“arrayID”是下一个地理点的 id，“mc”是地图控制器。*

它很好用，但我想再添加一项功能。

我希望注释在点之间移动时默认可见。单击“下一步”按钮后，我想移动到地图上的下一个点，并且它的注释应该是可见的（不仅在单击它之后）。

可能有一种简单的方法可以做到这一点。

我可能应该用 calloutView 做点什么，但我不知道该怎么做。

我做了这样的东西。但它不能正常工作。

```
MapCalloutView calloutView;
calloutView = new MapCalloutView(getApplicationContext());
calloutView.setDisclosureEnabled(true);
calloutView.setClickable(true);     calloutView.setLeftAccessoryView(getLayoutInflater().inflate(R.layout.accessory, calloutView, false));
calloutView.show(mMapView, geopoints.get(arrayID), false);
calloutView.setData(annotations.get(arrayID)); 
```

它向我展示了气泡，但它创建了新的 calloutView，我认为这是错误的。例如，Polaris 监听器不工作。我无法取消选择标注等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:13:57.943

我的错！这太容易了……

我不需要在 Polaris 中使用 MapcalloutView。

```
mMapView.setSelectedAnnotation(arrayID); 
```

# django - Django 文件用户文件夹模型

> ID：13101109
> 
> 赞同：1
> 
> 时间：2012-10-27T14:38:11.987
> 
> 标签：django, model

我想知道如何为用户、文件夹、文件创建 django 关系模型

一个用户可以有多个文件和文件夹。

一个文件夹可以有很多文件，但不能有文件夹 int 文件夹

```
class User_t(models.Model):
    username = models.CharField(max_length=30)
    user_id = models.CharField(max_length=30)
    pcw = models.CharField(max_length=30)
    name = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    mail = models.EmailField(max_length=50)
    validateMail =  models.BooleanField()
    birthday = models.DateTimeField(max_length=60)
    premium = models.BooleanField()
    premiumEnd = models.DateTimeField(max_length=10)
    totalUpload = models.CharField(max_length=15)
    avatar = models.URLField()

class FileItem(models.Model):
    file_id = models.CharField(max_length=30)
    file_name = models.CharField(max_length=75)
    date_upload = models.DateTimeField(max_length=10)
    data_size = models.CharField(max_length=75)
    key = models.CharField(max_length=75)
    # Django will automatically create owner_id field
    owner = models.ForeignKey(User_t, related_name='files')
    folder = models.ForeignKey('FolderItem', related_name='files')
    # not sure what this (login_accept) is for...
    # login_accept = models.ManyToManyField(User_t)
    file_i = models.FileField(/mnt/test/)

class FolderItem(models.Model):
    folder_id = models.CharField(max_length=30)
    folder_name = models.CharField(max_length=75)
    data_size = models.CharField(max_length=75)
    key = models.CharField(max_length=75)
    owner = models.ForeignKey(User_t, related_name='folders')
    # again, not sure what this is for
    # login_accept = models.ManyToManyField(User_t) 
```

login_accept 是可以访问（所有者有权）读取（下载）文件的用户列表。

不知道我的方法对不对？

谢谢

# oracle - Oracle中的浮点比较

> ID：13101112
> 
> 赞同：0
> 
> 时间：2012-10-27T14:38:26.840
> 
> 标签：oracle, having-clause

我有一个像这样的查询

```
SELECT
    some_field,
    SUM(float_field)
FROM
    some_table
GROUP BY
    some_field
HAVING
    SUM(float_field) <> 0 
```

在 Oracle 中使用这种比较方式是否安全，或者最好使用类似的方法

```
ABS(SUM(float_field)) < PrecisionConstant 
```

以防万一，float_field 不是 FLOAT 类型的可空字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:34:33.833

好吧，表达式`HAVING SUM(float_field) <> 0`不会限制 SUM 为 0.1 或 -0.2 的记录。

如果您想实现这一点，请使用以下表达式：

```
HAVING TRUNC(SUM(float_field)) <> 0 
```

# java - 我应该如何格式化我的 3D 引擎的几何实例化过程？

> ID：13101116
> 
> 赞同：0
> 
> 时间：2012-10-27T14:38:59.130
> 
> 标签：java, 3d, geometry, instantiation

我目前正在使用 Java 开发 3D 引擎，并且遇到了一些问题。例如，以可靠、简单的方式创建 3D（或 2D 或 1D）几何图形的可靠方法。当然，对此没有真正、直接的答案，但我主要期待这是一篇讨论型帖子。但是，尽管如此，我正在寻找一种简单而可靠的方法来实例化几何在我的 3D 引擎中。

（作为我的意思的一个例子，我目前的所有东西都是由 3D 点组成的（实际上是这样），但是告诉引擎这些点组成是一项艰巨的任务，因此很难获得可靠的几何图形. 我需要一个更可靠的系统，而不是仅仅使用许多点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:59:01.250

是的，讨论类型的问题——首先，只是一个警告，讨论类型的问题在 stackoverflow 上往往不受欢迎，但我还是会提出：

我想到的第一件事是[半边网格数据结构](http://www.flipcode.com/archives/The_Half-Edge_Data_Structure.shtml)——一种简单、功能强大、足以满足所有需求的结构——我目前需要的结构——几乎没有空间方面的多余数据。这将基本上涵盖您所有的网状结构需求。

您会在许多 3D 游戏引擎中找到的另一个解决方案是对象树系统（我不确定这是否是正确的名称），您可以在[python panda3D 游戏引擎](http://www.panda3d.org/)Blender 中找到它（有点，对搅拌机不太熟悉）等等。这个想法是有一个简单的 Object3D 类，它可以在其中的相对位置包含其他 Object3D 对象。这种嵌套层次结构非常适用于复杂系统，其中部分组合在一起形成其他事物的更复杂部分。这种嵌套层次结构也非常适合递归 O(log n) 碰撞算法和递归平截头体剔除（用于图形）。这也很容易编码——我在 11 年级时使用对象树编写了一个基本的 3D 引擎，假设我是

在任何引擎中，我们都需要某种方法来计算相交等，因此我们可以进行平截头体剔除、物理碰撞等等。我使用的技巧（非常有效，而且足够智能）是[AABB 树](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/AABB_tree/Chapter_main.html)——如果我们已经有对象树，我们只需让每个对象存储并计算它的 AABB，嘿，马上！AABB 树。

无论如何，你说，因为我有一些编写这样的代码的经验，所以我必须能够提供示例，对吧？是的：

```
public class Object3D {
    public LinkedList<Object3D> children;
    public AABB aabb; // the AABB of the object -- constructed 
                      // by union of children's AABBs
    public void doesIntersect(Object3D obj){
        // intersection using AABB-AABB intersection
        // sadly web resources are sorely lacking, so I shall handle this one below
    }
} 
```

**关于 AAABB-AABB 碰撞（如果你需要知道）** 我们有两个盒子。每个框都与轴对齐，每个框都有宽度、高度和深度。为了测试它们是否发生碰撞，我们在沿所有三个轴查看时查看它们是否重叠——毕竟，如果当我们沿*一个*轴查看时它们不重叠，它们就不可能发生碰撞。稍后一些花哨的数学，我们注意到：

```
"Box A and Box B collide" iff "Box A and B have overlapping x coordinates" and 
"same for y coordinates" and "same for z coordinates" and 
"same for any other dimensions of space you decide to implement". 
```

事实证明，这对于编码和计算来说都是一项微不足道的检查，这就是为什么 AABB 可以为对象树提供良好的边界体积。

好吧，对于讨论，这个答案已经变得相当片面了。无论如何，评论会很可爱，我敢肯定我错过了一些有用的东西（verlet集成，光线追踪，但所有这些都很容易在如上所述的基础上）

# java - IOException 的解释

> ID：13101118
> 
> 赞同：-5
> 
> 时间：2012-10-27T14:39:22.727
> 
> 标签：java, ioexception

我是 Java 新手，我想知道什么时候`IOException`发生以及它实际上是什么。我还遇到了一点，每当我们使用`BufferedReader`类从控制台读取输入时，代码都应该保存在`try`块内，我们应该有一个`catch`块来处理`IOException`为什么会这样。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:40:59.270

IOException 是接口的一部分。当文件不存在、磁盘已满、缺少读取或写入权限或存在网络连接问题时，通常会发生错误。

根据实现，即使它仍然在接口中声明，它也可能完全不抛出错误。

# xml - XML Schema 强制使用 0 或 1 个默认值

> ID：13101120
> 
> 赞同：1
> 
> 时间：2012-10-27T14:39:45.230
> 
> 标签：xml, schema, constraints

我正在尝试实现一个 XML Schema，它将强制执行以下 XML；

```
<databases>
    <database>
        <name>"Test A"</name>
        <host>"192.168.0.100"</host>
        <default>yes</default>
    </database>
    <database>
        <name>"Test B"</name>
        <host>"192.168.0.200"</host>
        <default>no</default>        
    </database>
    <database>
        <name>"Test C"</name>
        <host>"localhost"</host>
        <default>no</default>        
    </database>
</databases> 
```

除了一个关键问题外，我能够自己实现 XML Schema；也就是最多只能将一个数据库标记为默认值。这意味着零数据库可以被标记为默认值，这也应该被认为是有效的。

例如，以下 XML 应被 XML Schema 视为无效，因为多个数据库被标记为默认值。

```
<databases>
    <database>
        <name>"Test A"</name>
        <host>"192.168.0.100"</host>
        <default>yes</default>
    </database>
    <database>
        <name>"Test B"</name>
        <host>"192.168.0.200"</host>
        <default>no</default>        
    </database>
    <database>
        <name>"Test C"</name>
        <host>"localhost"</host>
        <default>yes</default>        
    </database> 
```

鉴于以下 XML 应被 XML Schema 视为有效，因为没有（零）数据库被标记为默认值；

```
<databases>
    <database>
        <name>"Test A"</name>
        <host>"192.168.0.100"</host>
        <default>no</default>
    </database>
    <database>
        <name>"Test B"</name>
        <host>"192.168.0.200"</host>
        <default>no</default>        
    </database>
    <database>
        <name>"Test C"</name>
        <host>"localhost"</host>
        <default>no</default>        
    </database> 
```

有谁知道是否可以使用 XML 模式强制执行这样的约束？我觉得它应该是，但我不知道如何去实施它。

对于此事的任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:05:06.010

检查是否只有一个数据库被标记为默认数据库的最简单方法可能是对 XML 进行不同的构造：如上记录数据库，但删除`default`元素，并向`databases`标识默认数据库的元素添加属性或子元素。您的 XML 变为：

```
<databases default="Test A">
    <database>
        <name>Test A</name>
        <host>"192.168.0.100"</host>
   </database>
    <database>
        <name>Test B</name>
        <host>"192.168.0.200"</host>
   </database>
    <database>
        <name>Test C</name>
        <host>"localhost"</host>
   </database>
</databases> 
```

（我已经删除了元素中的引号`name`，理论上它们实际上不是数据库名称的一部分。如果它们是名称的一部分，那么默认属性将需要类似于`default='"Test A"'`，包括引号。）

您需要确保`database/name`元素是唯一的；使用元素`xs:key`声明中的构造来执行此操作。`databases`您还需要确保可选`default`属性指向数据库名称；用`xs:keyref`. 的声明`databases`可能看起来像这样：

```
<xs:element name="databases" type="databases">
  <xs:key name="dbname">
    <xs:selector xpath="database"/>
    <xs:field xpath="name"/>
  </xs:key>
  <xs:keyref refer="dbname" name="defaultdb">
    <xs:selector xpath="."/>
    <xs:field xpath="@default"/>
  </xs:keyref>
</xs:element> 
```

第二种方法对`xs:unique`. 不要让`database`be的第三个孩子`default`使用值`yes`or `no`，而是让第三个孩子成为命名元素`default-database`或命名元素`non-default-database`（当然，更改名称以适合您的喜好）。以确保每个实例`default-database`具有相同简单类型值的方式定义这些。

然后指定没有两次出现的`default-database`可能具有相同的字符串值，使用`xs:unique`：

```
<xs:unique name="dbname">
  <xs:selector xpath="database"/>
  <xs:field xpath="default-database"/>
</xs:unique> 
```

由于 的每个实例都`default-database`具有相同的值，因此这种唯一性约束确保只能存在一个这样的元素。整个架构可能看起来像这样。首先是簿记：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"> 
```

现在的元素声明`databases`：

```
 <xs:element name="databases" type="databases">
    <xs:unique name="dbname">
      <xs:selector xpath="database"/>
      <xs:field xpath="default-database"/>
    </xs:unique>
  </xs:element> 
```

及其复杂类型：

```
 <xs:complexType name="databases">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
      <xs:element ref="database"/>
    </xs:sequence>
    <xs:attribute name="default" type="xs:string" use="optional"/>
  </xs:complexType> 
```

现在再做一些簿记：声明`database`，只是为了让我们诚实。

```
 <xs:element name="database" type="database"/>

  <xs:complexType name="database">
    <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="host" type="xs:string"/>
      <xs:choice>       
        <xs:element name="default-database" type="empty"/>
        <xs:element name="non-default-database" type="empty"/>
      </xs:choice>
    </xs:sequence>
  </xs:complexType> 
```

最后一点记账：一种确保 的每个实例都`default-database`具有相同值的类型。（当然，还有其他方法可以实现这一点；这只是首先想到的。）

```
 <xs:simpleType name="empty">
    <xs:restriction base="xs:string">
      <xs:enumeration value=""/>
    </xs:restriction>
  </xs:simpleType> 

</xs:schema> 
```

如果您绝对与现有设计结婚，那么我不知道如何在 XSD 1.0 中做您想做的事情；如果您可以使用 XSD 1.1，当然，您可以在上面添加一个`databases`断言

```
<xs:assert test="count(database[default = 'yes']) = 1"/> 
```

但正如上面的替代解决方案所示，断言的设计和使用并不是你唯一的选择。

# blackberry - 黑莓运行时存储类转换异常

> ID：13101121
> 
> 赞同：0
> 
> 时间：2012-10-27T14:40:07.897
> 
> 标签：blackberry, java-me

使用 JRE 7 运行时，我的 BLackBerry 应用程序中的以下行不会导致错误，但否则会给出 ClassCastException。有没有人知道什么可能是错的？

```
DataBuffer databuffer = 
    (DataBuffer) RuntimeStore.getRuntimeStore().get(AppMain.databufferID); 
```

# iphone - 收到错误时 iAd 未从视图中移除

> ID：13101125
> 
> 赞同：0
> 
> 时间：2012-10-27T14:40:16.433
> 
> 标签：iphone, objective-c, iad, banner-ads

我已经实现`bannerView didFailToReceiveAdWithError:`了

```
- (void)bannerView(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error 
{
    _bannerView.hidden = NO;
} 
```

你能告诉我为什么当错误出现时它不会消失吗？

我在日志中得到这个：

```
2012-10-27 15:40:57.367 MinePedia[22467:11903] [AppDeveloper]: 
ADBannerView: Unhandled error (no delegate or delegate does not implement didFailToReceiveAdWithError:): 
Error Domain=ADErrorDomain Code=3 "The operation couldn’t be completed. Ad inventory unavailable" 
UserInfo=0x7192530 {ADInternalErrorCode=3, ADInternalErrorDomain=ADErrorDomain, NSLocalizedFailureReason=Ad inventory unavailable} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:48:48.373

确保`_bannerView.delegate = self;`在创建 AdBannerView 实例后拥有

# javascript - 拖出画布会导致选择页面

> ID：13101128
> 
> 赞同：0
> 
> 时间：2012-10-27T14:40:23.220
> 
> 标签：javascript, html, canvas, drag-and-drop, kineticjs

目前我正在使用 KineticJS 创建一个 Web 应用程序，其中包括在画布上拖放。当您将鼠标放在画布内时，它工作得非常好。

但是，如果您离开画布并按下鼠标左键，您将选择页面上的所有内容。有可能以某种方式拦截该事件。显然 onselect 是另外一回事：p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T14:46:28.057

我将 canvas 元素封装到一个 div 中，然后将事件处理程序分配给该 div，该 div 覆盖了 100% 的页面布局，例如：

```
<div class="fillPage">
    <canvas id="Viewport"></canvas>
</div> 
```

我还为模糊（page-leave）和以下 css 添加了事件处理程序：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

# php - 创建一个设置 $_SESSION 变量的函数

> ID：13101135
> 
> 赞同：0
> 
> 时间：2012-10-27T14:41:32.157
> 
> 标签：php, session

我创建了一个站点，您需要登录才能访问不同的页面，没什么特别的。为了让用户保持登录状态，我将会话设置在每个页面的顶部。

我的问题是，我不想在每个页面的顶部设置不同的会话变量。我宁愿有一个可以调用的函数来设置它们。另外，我不需要每个页面上的所有这些变量，因此我希望该函数接受可选参数（例如电子邮件或未在每个页面上使用的个人资料图片）。

我在每一页的顶部调用它：

```
<?php 

require_once 'session.php';
confirm_logged_in();
$username = $_SESSION['username'];
$email = $_SESSION['email'];
$picture = $_SESSION['picture'];
$group = $_SESSION['group'];

?> 
```

我想让它更像这样，并且只能设置我需要的变量：

```
<?php 

require_once 'session.php';
confirm_logged_in();
set_variables($username, $email);

?> 
```

'session.php' 文件是这样的：

```
<?php 
session_start();
function logged_in(){
    return isset($_SESSION['username']);
}
function confirm_logged_in(){
    if(!logged_in()){
        header('location: start.php');
    }
}
?> 
```

我已经尝试了一些事情，但这只是导致我出现大量错误。有人已经这样做或找到了这样做的脚本吗？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:49:18.673

首先，如果你想做的是重载你的函数，你不能那样做。有关这方面的更多信息，请参阅[此](https://stackoverflow.com/questions/4697705/php-function-overloading)。但是，您可以这样做：

```
<?php

set_variables($username, $email, $picture,$group)
{
$_SESSION['username'] = $username;
$_SESSION['email'] = $email;
$_SESSION['picture'] = $picture;
$_SESSION['group'] = $group;
}
?> 
```

将此函数放在您的 session.php 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:49:31.560

我不确定我是否理解正确，但如果我理解了，您需要做的就是创建一个新文件，我们将其命名为“Session_Variables.php”。

创建文件后，将以下代码粘贴到其中：

```
<?php
require_once 'session.php';
confirm_logged_in();
$username = $_SESSION['username'];
$email = $_SESSION['email'];
$picture = $_SESSION['picture'];
$group = $_SESSION['group'];
?> 
```

然后，最后，只需将旧代码替换为：

```
include("Session_Variables.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:52:12.703

与您提出的问题没有直接关系，但您**确实**`exit;`应该在重定向标头之后添加。即使没有登录，客户也可以忽略标题并仍然加载您的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T14:53:11.980

如果你想做`set_variables($username, $email)`我认为你想要的工作，你需要写这样的东西。

**会话.php**

```
<?php 
session_start();
function logged_in(){
    return isset($_SESSION['username']);
}
    function confirm_logged_in(){
    if(!logged_in()){
        header('location: start.php');
    }
}
//Only Picture and group are Optionals
function set_variables($username, $email, $picture = '', $group = ''){
    //you can check here is thoses variables are set or valid before assign them
    $_SESSION['username'] = $username;
    $_SESSION['email'] = $email;
    $_SESSION['picture'] = $picture;
    $_SESSION['group'] = $group;
}
//create a function that we need to retrieve thoses values
function get_variable($name){
    if ( isset( $_SESSION[$name] ) ) return $_SESSION[$name];
    return FALSE; //if the variable is not set.
}
?> 
```

你可以像这样使用它

```
<?php 
require_once 'session.php';
confirm_logged_in();
set_variables($username, $email);
$username = get_variable('username');
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-12T03:35:00.273

我认为你需要移动 session_start(); 到实际页面。在 session_start() 上使用 require_once；不是一个好计划。

# expressionengine - 将 entry_ids 传递给通道：具有低变量条目的条目标签选择

> ID：13101138
> 
> 赞同：3
> 
> 时间：2012-10-27T14:41:44.407
> 
> 标签：expressionengine

我正在尝试使用低变量 entry_select 将 entry_ids 传递给频道条目标签。当我将以下标记单独放置在模板中时，它会输出 3 个管道分隔的 entry_id 列表：`{exp:low_variables:single var='lv-home-groups'}`

但是，当我将相同的代码添加到以下 channel:entries 标记时，没有任何输出。

```
{exp:channel:entries channel="groups" entry_id="{exp:low_variables:single var='lv-home-groups'}" disable="category_fields|pagination"}
code here 
{/exp:channel:entries} 
```

我尝试过早期和晚期解析，但无法正常工作。如果我手动放置 entry_ids 它工作正常。出于性能原因，我试图避免使用嵌入式模板。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T14:46:08.587

方法如下：确保为该变量启用了早期解析，然后使用*变量语法*而不是标记语法：

```
{exp:channel:entries channel="groups" entry_id="{lv-home-groups}"}
code here
{/exp:channel:entries} 
```

# java - 休眠需要值来保存孩子

> ID：13101139
> 
> 赞同：0
> 
> 时间：2012-10-27T14:41:56.433
> 
> 标签：java, spring, hibernate

我目前有工作代码将孩子保存到父实体。但是我想知道我是否做对了，因为我现在通过休眠的选择语句过载。我确实使用缓存，所以 atm 我没有延迟问题，但我想知道我是否不能提高效率。以这个小摘录为例

```
MbaLog.debugLog(logger, "Saving CodeType");
Site site = codeType.getSite();
if (site != null && site.isProxy())
    codeType.setSite(siteRepository.loadSiteById(site.getId()));
Long recordId = codeRepository.saveCodeType(codeType); 
```

我有一个要保存的实体 CodeType，它有一个子站点。这个子对象作为代理对象传递给方法，只填充了它的 id。然后我从数据库中获取一个完全加载的 Site 对象并将其设置为代码类型。接下来，我将带有 hibernate 的 sessionfactory 的 codeType 保存到数据库中（代码在这里不可见，但它在 codeRepository 后面）。

这可行，但我正在加载一个完整的站点，它有自己的孩子，所以我看到在插入之前至少有 5 个查询通过。我可以在网站上放很多懒惰的东西，但目前我宁愿不这样做，因为更深层的代码可能会很复杂。我不得不在工作中学习hibernate和JPA，过去从未接受过专家的太多培训。所以我想知道，是否有将网站保存为 codetype 的快捷方式？我需要完全加载它还是 id 足够？或者只是 id 和版本（我在所有实体上使用 @version 注释进行乐观锁定）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:04:22.087

不要使用`Session.get()`(or `EntityManager.find()`) 来获取对 SIte 实体的引用，而是使用`Session.load()`(or `EntityManager.getReference()`) 来获取此引用。

这些方法将在实体上返回延迟加载的代理，而不是执行查询来获取站点的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:07:04.480

如果您只想保留 Site 和 CodeType 之间的关系，那么一个惰性实例可能就足够了。所以你可以使用[EntityManager.getReference()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)（延迟加载）而不是[EntityManager.find()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#find%28java.lang.Class,%20java.lang.Object%29)。

# sas - 输出值到 sas 中的 excel

> ID：13101144
> 
> 赞同：1
> 
> 时间：2012-10-27T14:42:50.460
> 
> 标签：sas

有人可以帮我将以下代码（yt）生成的数据输出到excel数据集吗？

程序 iml;

d = 0.4；

调用farmasim(yt, d) n=10 sigma=2 种子=123457；

打印 yt;

跑;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:54:59.600

```
ods tagsets.excelxp file="myfile.xml";
proc iml ... etc. ... quit;
ods tagsets.excelxp close; 
```

更多信息谷歌“tagsets.excelxp”或见[http://support.sas.com/rnd/base/ods/odsmarkup/excelxp_demo.html](http://support.sas.com/rnd/base/ods/odsmarkup/excelxp_demo.html)

或者，您可以将 yt 移动到数据集中，并使用 PROC EXPORT，如果您有 ACCESS to PC FILES 许可，则可以使用 EXCEL 或 CSV，如果没有。

# c++ - 银行系统不工作

> ID：13101146
> 
> 赞同：0
> 
> 时间：2012-10-27T14:42:58.307
> 
> 标签：c++

出于某种原因，我的银行脚本不起作用。更具体地说，`search()`不起作用。我有点理解为什么它没有，可能是因为`if(obj.returnId() == n)`，但我不知道如何解决它。当我搜索一个帐户时，它只会让我找到最后一个创建的帐户，而不是以前的任何一个。这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <string.h>
#include <fstream>
#include <Windows.h>
#include <conio.h>
using namespace std;
bool loop = true;

class account
{
          int id;
         char name[40];
         char password[40];
public:
          void getData()
          {
                     cout << "\nEnter your name: ";
                     cin >> name;
                     cout << "\nEnter ID: ";
                     cin >> id;
                     cout << "\Enter pass: ";
                     cin >> password;
          }
          void showData()
          {
                     cout << "\nName: ";
                     puts(name);
                     cout << "\nID: " << id;
                     cout << "\n";
          }
          int returnId()
          {
              return id;
          }
};

void createAccount()
{
    account obj;
    ofstream fileCreate;
    fileCreate.open("accounts.dat", ios::binary|ios::app);
    obj.getData();
    fileCreate.write((char*)&obj,sizeof(obj));
    fileCreate.close();
}

void display()
{
    account obj;
    ifstream fileRead;
    fileRead.open("accounts.dat", ios::binary);
    while(fileRead.read((char*)&obj, sizeof(obj)))
    {
        obj.showData();
    }
    fileRead.close();
}

void search(int n)
{
    account obj;
    ifstream fileRead;
    fileRead.open("accounts.dat", ios::binary);
    while(fileRead.read((char *) &obj, sizeof(obj)) );
    {
        fileRead.seekg(0,ios::beg);
        if(obj.returnId() == n)
        {
            obj.showData();
        }
        else {
            cout << "\nUser not foud!\n";
        }
    }
    fileRead.close();
}

void main()
{
    cout << "Welcome to the Bank.\n\n";

    while (loop==true)
    {
        char choice[10];
        cout << "Please select an option:\n";
        cout << "------------------------------------------------\n";
        cout << "(a)Log into an account\n(b)Create an account\n(s)Search an account\n(e)Exit\n";
        cout << "------------------------------------------------\n";
        cout << "Choice: ";
        cin >> choice;
        choice[0] = tolower(choice[0]);
        cout << "\n------------------------------------------------\n\n";

        switch (choice[0])
        {
        case 'a':
            display();
            break;
        case 's':
            int n;
            cout << "Enter the ID of the account: ";
            cin >> n;
            search(n);
            break;
        case 'b':
            createAccount();
            break;
        case 'e':
            loop = false;
            break;
        default:
            system("CLS");
            cout << "The option \"" << choice[0] <<  "\" is invalid.\n\n\n\n";
            break;
        }

    };
    cout << "\n\n\n";
    cout << "Click anything to exit.";
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:52:46.523

您的问题是此行末尾的分号：

```
while(fileRead.read((char *) &obj, sizeof(obj)) ); 
```

这使得这个循环有一个空的主体。因此，您基本上阅读了整个文件并丢弃了结果，除了最后一个条目。

摆脱这个也：

```
fileRead.seekg(0,ios::beg); 
```

我不知道你为什么需要它，它只会让你一遍又一遍地阅读第一个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:57:51.070

另一个错误是，当您测试了所有帐户并且它们都失败时，您应该只说“找不到用户”。您的循环（当您删除分号时）在每次失败的测试后都说“找不到用户”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:49:28.753

您可能找不到您要查找的条目，因为每次您从文件中读取一个条目时，都会将位置重置为开头。这意味着您的循环将永远运行，一遍又一遍地读取相同的条目，而永远找不到您搜索的条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T14:50:04.137

寻找可能是问题所在：

```
while(fileRead.read((char *) &obj, sizeof(obj)) ) //;
{
    // seek to start?
    //fileRead.seekg(0,ios::beg);
    ...
} 
```

看看[http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

一边，使用

```
cout << "text" << endl; 
```

用于与平台无关的换行符。

# c++ - 被归类为病毒的程序是否存在安全漏洞？

> ID：13101150
> 
> 赞同：1
> 
> 时间：2012-10-27T14:43:10.033
> 
> 标签：c++, virus

我非常惊讶地发现我的 AV 程序（来自我的 ISP，基于 Kapersky）检测到我的一个 C++ 程序（即 test.exe）有病毒。该代码是使用 Debug 配置从 Visual Studio 2010 生成的（令人惊讶的是，发布版本没有病毒）。报告的病毒是“Gen:Variant.Symmi.3690”，这导致任何谷歌搜索完全死胡同。

然而，这让我想到我的程序可能存在某种安全漏洞（例如缓冲区溢出），而 AV 工具认为该漏洞可以被利用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T14:44:59.553

这种事情时不时发生。这只是误报，而不是您的程序中的任何缺陷。偶然的是，您编译的程序与您的 AV 工具用来识别该病毒的签名有一些共同之处。您应该做的是将您的程序发送给 AV 供应商，以便他们修复他们的签名。

反病毒软件不会尝试检测缓冲区溢出等安全漏洞。如果他们这样做并且可以有效地这样做，那么几乎所有软件都会被检测为恶意软件！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:49:47.600

它有时会发生，它被称为误报。在[病毒总数](https://www.virustotal.com/)中，您可以看到 Witch AV 将您的程序归类为病毒。

# nullpointerexception - 玩！2.0 - OneToOne 关系 - NullPointerException

> ID：13101154
> 
> 赞同：0
> 
> 时间：2012-10-27T14:43:40.897
> 
> 标签：nullpointerexception, playframework-2.0, one-to-one

我是 Play 新手，我正在努力实现 Canteen 和 OpeningTimes 之间的 OneToOne 关系，我想 1:1 是我想要的。但是我得到一个 NullPointerException ......

```
@Entity
public class OpeningTimes extends Model {

   @Id
   public Long id;

   @Required
   public String mondayHours;

   @Required
   public String tuesdayHours;

       ...

   @OneToOne
   public Canteen canteen; 
```

}

```
@Entity
public class Canteen extends Model {

   @Id
   public Long id;

   ...  

   @OneToOne
   public OpeningTimes openingTimes;

} 
```

在这里我填充数据库

```
public class Global extends GlobalSettings {

@Override
public void onStart(Application arg0) {
    if(Canteen.finder.findRowCount() == 0) {

        Canteen canteen = new Canteen();
        ...
        canteen.save();

        Canteen canteen1 = new Canteen();
        ...
        canteen1.save();

        OpeningTimes times = new OpeningTimes();
        times.mondayHours = "7:00 - 15:00";
        times.tuesdayHours = "7:00 - 15:00";
        ...
        times.canteen = canteen;
        times.save();

        OpeningTimes times1 = new OpeningTimes();
        times1.mondayHours = "7:00 - 15:00";
        times1.tuesdayHours = "7:00 - 15:00";
        ...
        times1.canteen = canteen1;
        times1.save();

} 
```

show.scala.html

```
@(canteen: Canteen)

@main("MamHlad | " + canteen.nameShort) {

   <h1>@canteen.nameFull</h1>

   <h2>Opening times</h2>
   ** <p>@canteen.openingTimes.mondayHours</p> **
   <p>@canteen.openingTimes.tuesdayHours</p>
} 
```

Asterixes 标记它抛出 NullPointerException 的行，这里是堆栈跟踪

```
! @6c6cgmg4b - Internal server error, for request [GET /canteens/2] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[NullPointerException: null]]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.4]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.4]
        at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
        at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.4]
        at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.lang.NullPointerException: null
        at views.html.show$.apply(show.template.scala:37) ~[classes/:na]
        at views.html.show$.render(show.template.scala:105) ~[classes/:na]
        at views.html.show.render(show.template.scala) ~[classes/:na]
        at controllers.Application.show(Application.java:23) ~[classes/:na]
        at Routes$$anonfun$routes$1$$anonfun$apply$5$$anonfun$apply$6.apply(routes_routing.scala:76) ~[classes/:na]
        at Routes$$anonfun$routes$1$$anonfun$apply$5$$anonfun$apply$6.apply(routes_routing.scala:76) ~[classes/:na] 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:05:28.520

我看到您没有指定 OneToOne 关系的拥有方，这是强制性的。

```
@Entity
public class OpeningTimes extends Model {

   @Id
   public Long id;
      ...

   @OneToOne(mappedBy="openingTimes", cascade=CascadeType.ALL)
   public Canteen canteen;
} 
```

另外我认为您需要使用 setOpeningTimes 方法，而不是直接访问该属性。像这样，

```
canteen.setOpeningTimes(openingTime1);
canteen.save(); 
```

这是一个示例： [https ://ebeanorm.svn.sourceforge.net/svnroot/ebeanorm/ebean/trunk/src/test/java/com/avaje/tests/basic/TestMultipleOneToOneIUD.java](https://ebeanorm.svn.sourceforge.net/svnroot/ebeanorm/ebean/trunk/src/test/java/com/avaje/tests/basic/TestMultipleOneToOneIUD.java)

# asp.net-mvc-3 - Ninject + MVC3 + 中等信任环境

> ID：13101158
> 
> 赞同：0
> 
> 时间：2012-10-27T14:43:58.397
> 
> 标签：asp.net-mvc-3, ninject, medium-trust

好的，阅读了很多关于这个的问题，但真的没有看到任何适合我的解决方案......所以，任何帮助都会非常感激。

我正在运行一个通过 nuGet 安装了 Ninject 的 MVC3 Web 应用程序（所以我得到了 Ninject 版本 3.0.1.10）。一切都很好，除了我将它部署到托管服务（LocaWeb.com.br）。

从那里运行网络应用程序，我得到“System.Security.SecurityException：请求失败”。

堆栈跟踪显示了许多 ninject 的调用。

所以我在某处读到我应该使用的是我下载的 Medium Trust Ninject 版本（Medium Trust 版本 3.0.0.15），但我真的不知道如何在 nuGet 安装版本上手动安装它，甚至如果这是解决问题的正确途径...

在这里真的迷路了。：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:38:07.973

只需在部署应用程序时将 NuGet 中的 Ninject.dll 替换为 Medium trust dll。

# solr - 是否可以使用文件路径调用 dih？

> ID：13101169
> 
> 赞同：1
> 
> 时间：2012-10-27T14:45:08.990
> 
> 标签：solr, indexing, dih

我正在做一个项目，每次操作后都会生成一个日志。每当使用此文件的路径作为参数生成新日志时，是否可以调用 DIH？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:37:18.657

[就我个人而言，我没有尝试过这样做，但是有很多像this](https://stackoverflow.com/questions/8858856/need-help-indexing-xml-files-into-solr-using-dataimporthandler/8862142#8862142)和[this](https://stackoverflow.com/questions/9097223/solr-dataimporthandler-doesnt-work-with-xml-files)以及[博客文章](http://solr.pl/en/2011/08/16/data-import-handler-%E2%80%93-import-from-solr-xml-files/)这样的例子（还有问题）......我不知道你的日志格式但是如果你可以从XML中看到它是否可能链接，它也可以应用于您的案例...

另一种解决方法可能是使用 cronjob 或其他东西在每 5 或 10 分钟的时间段内发布您的日志......或者直接检测日志创建，然后将其发布到 solr 服务器。

# android - Android;如何通过光标填充 ListView

> ID：13101175
> 
> 赞同：1
> 
> 时间：2012-10-27T14:46:03.607
> 
> 标签：android, listview, simplecursoradapter

我有一个名为 users(_id,name) 的表的数据库。我正在使用以下方法按名称升序获取所有记录

```
public Cursor getAllNames() {
    return db.query(DATABASE_TABLE, new String[] { KEY_ROWID, KEY_NAME },
            null, null, null, KEY_NAME+" ASC", null);
} 
```

现在我正在检索列表活动中的光标，如下所示

```
DBAdapter db= new DBAdapter(this);

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lview);
    ListView l=(ListView) findViewById(R.id.listView1);
    db.open();
    Cursor c=db.getAllNames();
    db.close();
} 
```

我正在尝试使用简单光标适配器来遍历名称并将其分配给列表视图。但是既然已经贬值了，如何达到同样的效果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T14:53:15.127

SimpleCursorAdapter 尚未被弃用，[它的构造函数之一具有](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D%29). 如果您想将 Cursor 数据附加到 ListView，那么我强烈建议您使用 SimpleCursorAdapter 选项，因为它是最简单的方法。我相信 v4 支持库中提供了新的 SimpleCursorAdapter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:50:37.680

您可以创建一个扩展 BaseAdapter 并保存项目的 ArrayList 的自定义适配器。在调用 getAllNames() 并将所有项目都放在 Cursor 中后，遍历 Cursor 并将所有这些项目从 CustomAdapter 放入 ArrayList 中。然后只需将 CustomAdapter 设置为 ListView 适配器。

# spring - spring mvc 3.0中的blob图像渲染

> ID：13101177
> 
> 赞同：0
> 
> 时间：2012-10-27T14:46:09.130
> 
> 标签：spring, jsp, servlets

我正在尝试读取来自数据库的 blob 类型图像。我在控制器中的方法。JSP 上仅显示图像文件

```
@RequestMapping(value = "/showDetails")
public ModelAndView showDetails(@RequestParam("doc") int id,
        HttpServletResponse responce) {
    ModelAndView mView = new ModelAndView();
    File file = documentDao.getFileDetail(id);
    byte[] bytes = null;
    try {
        OutputStream op = responce.getOutputStream();
        int length = (int) file.getContent().length();
        bytes = file.getContent().getBytes(1, length);
        op.write(bytes);
        op.flush();
        op.close();
        responce.setContentType("image/gif");
        mView.addObject("image", op);
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    mView.addObject("file", file);
    mView.setViewName("filedetails");
    return mView;
} 
```

我的控制器类中的上述方法。我想在 JSP 上渲染图像以及一些文本。但是浏览器中只有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:32:10.883

您不能在 Spring 中这样做（更准确地说是在 Servlet 中）。创建两个不同的控制器——一个将提供图像，另一个将返回带有文本的 JSP 页面。要在页面上获取图像，只需正确设置标签`src`属性的值`img`：它应该指向第一个控制器。

# android - Android 异步 Http 获取请求

> ID：13101178
> 
> 赞同：5
> 
> 时间：2012-10-27T14:46:17.710
> 
> 标签：android, http, asynchronous

我正在尝试实现一个 httpClient 类，它是一个 AsyncTask （否则由于我的主线程中有一个连接，我会得到一个异常）。我试过这样的事情：

```
private class execHttpAsync extends AsyncTask <String, String, HttpResponse>
    {
        public String resultString;

        @Override
        protected HttpResponse doInBackground(String... params) 
        {
            String url = params[0];

            HttpClient httpClient = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);           
            request.setHeader("Content-Type", "text/xml");
            HttpResponse response;
            try {
                response = httpClient.execute(request);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return response;
        }

        @Override
       protected void onPostExecute(HttpResponse result) 
        {
            StringBuffer returned = new StringBuffer();

            InputStream content = result.getEntity().getContent();
            BufferedReader rd = new BufferedReader(new InputStreamReader(content, "UTF-8"));                
            String line;
            while ((line = rd.readLine()) != null) 
            {
                String endOfLine = "";
                returned.append(line + endOfLine);
            }
            content.close(); 

         String retVal = returned.toString();

         try 
         {
             String header = retVal.substring(0, 1);
             if (!header.equals("<"))
              {
                retVal = retVal.replace(header, "");
              }
         } 
         catch (Exception e) 
         {
            // TODO: handle exception
         }

         resultString = returned.toString();

        }

    } 
```

但我最终需要得到回应。我试图实例化这个类，然后作为成员获得响应，但没有成功。有什么建议么 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-27T14:51:35.193

试试这个方法

```
private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
      String response = "";
      for (String url : urls) {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        try {
          HttpResponse execute = client.execute(httpGet);
          InputStream content = execute.getEntity().getContent();

          BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
          String s = "";
          while ((s = buffer.readLine()) != null) {
            response += s;
          }

        } catch (Exception e) {
          e.printStackTrace();
        }
      }
      return response;
    }

    @Override
    protected void onPostExecute(String result) {
      textView.setText(result);
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T14:52:20.573

这是异步操作，因此类似于：

```
myRetValue = new myAsyncTask.execute(); 
```

不会将返回值分配`onPostExecute()`给 myRetValue。您的

```
resultString = returned.toString(); 
```

应该导致将任何`returned.toString()`产生的东西分配给`resultString`变量（我猜它是在你的 AsyncTask 类之外声明的，所以基本上你的代码乍一看很好。你可能根本没有任何东西`returned`。尝试在你的 AsyncTask 代码中植入一些断点并检查它是否真的像你想象的那样行事。

# css - CSS图像翻转不起作用

> ID：13101182
> 
> 赞同：2
> 
> 时间：2012-10-27T14:46:33.607
> 
> 标签：css, image

我有一个应该显示几个按钮的 CSS 图像翻转。它使用一张图像用于“正常”模式，一张用于“悬停”模式，一张用于“活动”模式。这三个图像是一个大图像文件的一部分。我之前在另一个项目上实现过这个方法并且效果很好，但是对于这个项目，我似乎无法让翻转效果起作用。我的代码如下：

```
<div class="homealertbox"><h1 class="homealert">The Worlds Best Marketplace For Buying & Selling Websites</h1>
<div class="addbuttons">
    <a href="http://localhost/buy" class="buy"><span class="displace">Buy</span></a>
    <a href="http://localhost/sell" class="sell"><span class="displace">Sell</span></a>
</div> 
```

我的CSS如下：

```
a.buy {
display: block;
width: 160px;
height: 40px;
float:left;
background:url('http://localhost/img/buy.png');
background-position: 0 0;
}

a.buy:hover {
background:url('http://localhost/img/buy.png');
background-position:0 -40px;
}

a.buy:active {
background:url('http://localhost/img/buy.png');
background-position:0 -80px;
}

.displace {
position: absolute;
left: -5000px;
}

 a.sell {
display: block;
width: 160px;
height: 40px;
background: url('http://localhost/img/sell.png') 0 0 no-repeat;
float:right;
}

 a.sell:hover {
background: url('http://localhost/img/sell.png') 0 -40px no-repeat;
}

 a.sell:active {
background: url('http://localhost/img/sell.png') 0 -80px no-repeat;
} 
```

我认为问题与嵌套的 div 标签有关，但我不完全确定。有人可以帮忙吗？另外，如果这篇文章中的代码格式不正确，我提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:20:41.073

你的代码对我有用。我在本地机器上更改的唯一测试是 CSS 图像背景的 URL。我创建了 2 个图像，每个图像具有 2 个按钮背景，并将每个图像保存为 sell.png 和 buy.png.. 我将 CSS 中的 localhost/... 背景路径更改为我保存它们的位置。检查您的图像路径/网址是否正确，并且您的图像在正确的位置具有正确的按钮背景。这些是我的图像。[我的购买图片](http://www.blissfulinterfaces.com/testing/buy.png)

[工作演示](http://www.blissfulinterfaces.com/testing/test.html)

# jquery - JQuery 文件上传，Ruby on Rails，显示errors.full_message

> ID：13101184
> 
> 赞同：1
> 
> 时间：2012-10-27T14:47:17.553
> 
> 标签：jquery, ruby-on-rails

我将[这个示例用于 Ruby on Rails](https://github.com/tors/jquery-fileupload-rails-paperclip-example)，我需要打印出错误消息，以便用户可以通过上传文件了解错误发生的原因（错误的大小、文件名）

我不知道如何将它集成到代码中。

如果有人给我提示，我将不胜感激。

我的验证：

```
validates :upload_file_name,  :presence   => true,
                                :format     =>{:with => %r{\.(cel)$}i}

  validates_uniqueness_of :upload_file_name, :message => "blabla"

  validates :upload_file_size,  :inclusion  => {:in =>10.megabytes..20.megabytes} 
```

index.html.erb：

```
<script id="template-upload" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
  <tr class="template-upload fade">
    <td class="preview"><span class="fade"></span></td>
    <td class="name"><span>{%=file.name%}</span></td>
    <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
    {% if (file.error) { %}
    <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else if (o.files.valid && !i) { %}

    <td class="start">{% if (!o.options.autoUpload) { %}
      <button class="btn btn-mini btn-primary">
        <i class="icon-upload icon-white"></i>
        <span>{%=locale.fileupload.start%}</span>
      </button>
      {% } %}</td>
    {% } else { %}
    <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
      <button class="btn btn-mini btn-warning">
        <i class="icon-ban-circle icon-white"></i>
        <span>{%=locale.fileupload.cancel%}</span>
      </button>
      {% } %}</td>
  </tr>
  {% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
  {% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
      {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        <ul>
        <% file.errors.full_messages.each do |msg| %>
         <li>*<%=msg %></li>
         <% end%>
         </ukl
        {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
          <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
          {% } %}</td>
        <td class="name">
          <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
        {% } %}
      <td class="delete">
        <button class="btn btn-mini btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
          <i class="icon-trash icon-white"></i>
          <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
      </td>
    </tr>
    {% } %}
</script> 
```

和 uploads.controller：

```
def create
    p_attr=params[:upload]
    p_attr[:upload] = params[:upload][:upload].first if params[:upload][:upload].class == Array
    @upload = Upload.new(p_attr)

    respond_to do |format|
      if @upload.save
        format.html {
          render :json => [@upload.to_jq_upload].to_json,
          :content_type => 'text/html',
          :layout => false
        }
        format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
      else
        format.html { render action: "new" }
        format.json { render json: @upload.errors, status: :unprocessable_entity }
      end
    end
  end 
```

# java - Spring框架中Service注解的类可以包含SQL/HQL吗？

> ID：13101186
> 
> 赞同：0
> 
> 时间：2012-10-27T14:47:23.637
> 
> 标签：java, spring

我检查了很多样本​​，但我没有找到合适的解决方案。一些文档说“理想情况下，您的业务逻辑层不应该知道有数据库。它不应该知道连接字符串或 SQL。”

我发现了一些将业务逻辑定位到 @Service 注释类的示例，但它们在 @Service 方法中使用 SQL/HQL。

理想的用法应该是什么？如果我们想更改数据库或持久性技术，我们应该只更改 @Repository 注释的类还是两者都更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:55:14.503

在您的服务方法中，您不应使用任何 SQL/HQL 语法或任何数据库工作。所有这些都应该在 DAO 层中，并被注释为@Repository。您应该只从您的服务方法中调用它们。这样，您将来可以轻松更改数据库。不然负担太重了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T14:57:25.590

我更喜欢将所有与持久性相关的东西（即查询，以及处理 JDBC、JPA 或 Hibernate 的所有东西）放在 DAO 层中，并让服务层依赖这个 DAO 层来处理与持久性相关的东西。

但主要目标是不能在不影响服务层的情况下改变持久化技术。例如，如果从 Hibernate 切换到 JPA，这可能是可能的，但如果从 JPA 切换到 JDBC，就不可能了。原因是

*   JPA 自动持久化对实体所做的所有更改，而无需更新数据库查询，而 JDBC 则不需要，因此需要额外的更新查询
*   JPA 延迟加载实体之间的关联，而 JDBC 没有
*   ...

所以改变持久化技术会影响服务层，即使所有持久化的东西都被隔离在 DAO 中。

恕我直言，这种解耦的主要优点是

*   每个班级的职责更加明确。它避免了将持久性相关代码与业务逻辑代码混合在一起。
*   可测试性：您可以通过模拟 DAO 层轻松测试您的服务层。您可以轻松地测试 DAO 层，因为它所做的只是对数据库执行查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T15:04:33.583

理想情况下，您的业务逻辑处理或由对域建模的对象组成。它不应该意识到持久性等问题。这就是像休眠这样的 O/R-Mapper 的全部内容。业务逻辑需要基于域属性（如员工姓名、上个月收入...）的所需对象。

持久层应该能够将业务需求转换为 SQL/HQL/Service 调用或所使用的任何技术要求。因此，业务逻辑层只有在业务逻辑发生变化时才会发生变化。

这将是理想世界的目标，但实际上它不适用于非平凡的问题。你无法避免某种程度的耦合。但正如@JB Nizet 所说，将耦合减少到合理的数量是值得的。使用 TDD 并遵守 SRP 等 OO 原则将帮助您实现目标。

# logic - 这种知识表示的层次结构将如何扩展？

> ID：13101194
> 
> 赞同：0
> 
> 时间：2012-10-27T14:48:33.547
> 
> 标签：logic, artificial-intelligence, data-representation

我尝试过对所有形式的知识进行分层——包括物理对象、数字、程序等。如何改进？诸如“杰克坐在树上制作音乐”之类的句子如何落入此图表？*杰克*会进入人类，*树*会进入地方，但*音乐会*去哪里？ ![在此处输入图像描述](../Images/7c551f8ea139278630f341a360903a72.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:14:36.977

我在这方面没有任何经验，但从纯粹的语言和逻辑的角度来看，你可以把“生产”完全投入到工作中。或者也许将你的分支`"objects"`扩展到不同的类型，比如`"products"->{"tech","healthcare"...}`etc 和“`art objects"->{"music","paintings"...}`

但是，是的，您可以争辩说这更具体一些，只是为了适合句子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:41:25.157

我没有直接回答您的问题，但我想我知道您可以从哪里获得有关此上衣的更多信息。如果我没记错的话，你正在尝试开发一个本体。

> 在计算机科学和信息科学中，本体将知识正式表示为领域内的一组概念，以及这些概念之间的关系。它可用于推理该域内的实体，并可用于描述该域。

最通用的本体是在[Cycorp](http://cyc.com/)开发的，尽管整个本体不是免费提供的，但 Opencyc 提供了本体的（大）子[集](http://www.opencyc.org/)。他们准备了一个安装程序，使您能够通过网络浏览器对本体进行查询。也许你应该探索这个本体并获得一些新的想法，下一步该去哪里。

# javascript - 有没有其他方法可以将一些数组放在一起并且只能随机调用其中的一个元素？

> ID：13101199
> 
> 赞同：0
> 
> 时间：2012-10-27T14:48:58.003
> 
> 标签：javascript

我需要抓取一些小数组的元素并将它们放在一起组成一个更大的数组。但我不希望那些小数组成为大数组的元素。我只需要他们的元素。然后我需要从大数组中随机选择一个元素。通常，大数组将是：

```
Array.prototype.randomElement = function () {
return this[Math.floor(Math.random() * this.length)]
}

var small_1_array = [1,2,3,4];
var small_2_array = [5,6,7,8,9];
var small_3_array = [10,11,12];

var big_array = [small_1_array, small_2_array, small_3_array];
console.log("big_array is: " + big_array); 
```

结果：

```
big_array is: 1,2,3,4,5,6,7,8,9,10,11,12 
```

这种方式的问题是我只能选择一个小数组（一组数字），而不是它们的元素（只有一个数字）。例如：

```
console.log("a random number from big_array is: " + big_array.randomElement()); 
```

结果：

```
a random number from big_array is: 1,2,3,4 
```

这是我能想到的解决方案：

```
var rearrange_array = (big_array.toString()).split(",");
console.log("rearrange_array is : " + rearrange_array); 
```

结果：

```
rearrange_array is : 1,2,3,4,5,6,7,8,9,10,11,12 
```

现在如果我执行：

```
console.log("a random number from rearrange_array is: " + rearrange_array.randomElement()); 
```

结果将是这样的：

```
a random number from rearrange_array is: 2 
```

有没有其他方法可以将一些数组放在一起并且只能调用其中的一个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:50:03.497

使用[`Array.concat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat), 其中

> 返回一个由该数组与其他数组和/或值连接的新数组。

在你的情况下：

```
var small_1_array = [1,2,3,4];
var small_2_array = [5,6,7,8,9];
var small_3_array = [10,11,12];

var big_array = small_1_array.concat(small_2_array, small_3_array);
console.log("a random number from big_array is: " + big_array.randomElement()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:52:41.450

只需应用您的`randomElement`功能两次：

```
console.log("a random number from one of the arrays is: "
  + big_array.randomElement().randomElement()); 
```

当然你也可以把小阵列放在一起，然后从新的大阵列中选择。这样做的方法是[串联](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)：

```
var rearrange_array = Array.prototype.concat.apply([], big_array);
// or, without the big_array variable:
var rearrange_array = small_1_array.concat(small_2_array, small_3_array);
// then:
return rearrange_array.randomElement(); 
```

# html - 如何让下拉列表在手机中工作

> ID：13101201
> 
> 赞同：1
> 
> 时间：2012-10-27T14:49:02.173
> 
> 标签：html, anchor, html-select

我正在建立我的第一个网站，并试图使其具有响应性。我使用 html 列表作为菜单和链接。当我在 Opera 软件测试仪上对其进行测试时。它不能正常工作。我不知道任何其他测试仪设备。我遇到的问题是，当我单击链接时，它总是显示站点地图页面。不会显示任何其他链接。

我使用的html代码如下；

```
<div id="drop-down">
  <form name="form">
     <SELECT name="guidelinks" onChange="window.location=document.form.guidelinks.options[document.form.guidelinks.selectedIndex].value"> 
<option selected>Main Menu</option>
<option value="index.html">Home Page</option>
<option value="small-books.html">Free books to download</option>
<option value="contact.html">Contact Us</option>
<option value="sitemap.html">Site map</option>
<option value="Free-studies-to-download.html#study-3">- Study -Reconciliation</option>
</select>
</form> 
```

最后有一个关闭的div。不显示在代码中。

似乎子菜单也不起作用。他们是锚。该页面仅在移动设备中刷新。我了解某些移动浏览器会阻止它们。

有没有办法让列表工作？

# c - C中的字节数组，其中包含来自内部零的文件的数据

> ID：13101207
> 
> 赞同：-1
> 
> 时间：2012-10-27T14:49:34.700
> 
> 标签：c, byte

我需要`byte`在应用程序中编辑每个，我需要将它存储在某个地方。首先我使用`char*`or `unsigned char*`，但是当我读取一个包含零的更复杂的文件时，整个事情不再起作用（零等于`'\0'`又名字符串结尾）。我应该改用什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T14:50:19.427

`unsigned char *`是正确的数据类型，您只需将拥有的字节数存储在单独的变量中。

永远记住你处理的是字节，而不是字符串/字符——所以你不能使用任何字符串函数，因为它们期望终止的字符串。

*   如果您想要长度，请使用包含它的变量
*   如果要比较字节，请使用`memcmp`而不是`strcmp`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T14:59:10.130

如果要加载内部为零的文件（二进制文件），只需在文件上使用 stat() 来获取文件的大小并通过循环将其写入数组，直到索引器具有与大小相同的值文件减 1 或使用此方法：

```
struct stat fistat;
//get the size of the file
if(stat("filename",&fistat)<0) {
    printf("file not found\n");
    return 1;
}
// open the file
FILE* file = fopen("filename","r");
if (!file){
    printf("can't open file\n");
    return 1;
}
unsigned char buff[fistat.st_size];
// write the file to buffer
fread(buff,fistat.st_size,1,file);
fclose(file); 
```

这样你就有你的文件在`buff`其中有大小`fistat.st_size`。

# php - 将“使用”类公开给包含的文件

> ID：13101211
> 
> 赞同：3
> 
> 时间：2012-10-27T14:49:50.923
> 
> 标签：php, namespaces, include

例子：

```
namespace Somenamespace;    
use Somenamespace\Someclass;
use Somenamespace\otherclass;

class Template{

  public function display($templ){
    load_template($templ);
  }

}

function load_template($file){
  unset($file);
  require func_get_arg(0);
}

$template = new Template();
$template->display('file.php'); 
```

现在我想访问 file.php 中的“Someclass”，而不必先在“use”语句中声明它。例如。`someclass::dostuff();`（没有命名空间）

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T15:47:43.180

简单地说：没有。请参阅下面的示例[http://www.php.net/manual/en/language.namespaces.importing.php#example-247](http://www.php.net/manual/en/language.namespaces.importing.php#example-247)

> 导入规则是基于每个文件的，这意味着包含的文件***不会***继承父文件的导入规则。

# eclipse - Bouncy Castle（使用 Eclipse） - 找不到源错误

> ID：13101221
> 
> 赞同：0
> 
> 时间：2012-10-27T14:50:45.680
> 
> 标签：eclipse, bouncycastle

我是 Bouncy Castle 的新手，并已使用以下说明安装它：

[http://www.itcsolutions.eu/2011/08/22/how-to-use-bouncy-castle-cryptographic-api-in-netbeans-or-eclipse-for-java-jse-projects/](http://www.itcsolutions.eu/2011/08/22/how-to-use-bouncy-castle-cryptographic-api-in-netbeans-or-eclipse-for-java-jse-projects/)

[http://www.developer.com/java/other/article.php/3778011/Unlocking-the-Secrets-of-Java-Cryptography-Extensions-The-Basics.htm](http://www.developer.com/java/other/article.php/3778011/Unlocking-the-Secrets-of-Java-Cryptography-Extensions-The-Basics.htm)

两个链接都描述了
第 1 步的步骤。下载 Bouncy Castle 提供程序
第 2 步。将提供程序 .jar 文件复制到 Java 运行时 (JRE) 扩展子文件夹
第 3 步。将 Bouncy Castle 提供程序添加到 java.security 文件

根据第一组指令，我可以运行此代码，它正确地给了我“可用”响应：

```
import java.security.Security;
public class Main {
    public static void main(String[] args) {
        //BC is the ID for the Bouncy Castle provider;
        if (Security.getProvider("BC") == null){
            System.out.println("Bouncy Castle provider is NOT available");
        }
        else{
            System.out.println("Bouncy Castle provider is available");
        }
    }
} 
```

问题是，一旦我在代码中添加任何其他内容，例如这一行：

```
KeyGenerator keygen = KeyGenerator.getInstance("DES/ECB/PKCS5Padding"); 
```

甚至这条线

```
KeyGenerator keygen; 
```

然后它崩溃了。在调试模式下，它给了我一个“找不到源”。“编辑源查找路径...”按钮出错。包含错误消息的选项卡显示“CEStreamExhausted(Throwable).() 第 249 行”。

谁能告诉我我做错了什么？这个问题已经让我发疯了好几天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:38:00.170

我不再需要回答这个问题。当我写这篇文章时，我只按照我安装的最新版本的 Java（JRE 和 JDK 7）的说明进行操作。从那时起，我决定也尝试按照我已安装但未使用的 JRE 6 的说明进行操作。我还确保重新启动我的笔记本电脑。现在可以了。有时是简单的事情......*叹息*

# python - Kivy 无法连接 kv 语言的 on_enter 回调

> ID：13101223
> 
> 赞同：2
> 
> 时间：2012-10-27T14:51:05.743
> 
> 标签：python, kivy

我最近开始学习 Kivy 并使用它。今天我遇到了一个问题，我不确定这是 Kivy 中的错误还是我的误解。这是一个简化版本。

我正在开发一个顶部有文本输入以进行搜索的 GUI。我的 Kv 文件如下所示：

```
#:kivy 1.0
#:import kivy kivy

<SearchPanel>:
    searchquery: searchquery

    AnchorLayout:
        orientation: 'vertical'
        anchor_x: 'center'
        anchor_y: 'top'
        padding: 10

        TextInput:
            id: searchquery
            text: 'What to search for'
            size_hint_x: 0.98
            size_hint_y: None
            height: 30
            on_enter: root.search() 
```

应用程序代码如下所示：

```
# -*- coding: utf-8 -*-
import kivy
kivy.require('1.4.1')

from kivy.app import App
from kivy.uix.anchorlayout import AnchorLayout

class SearchPanel(AnchorLayout):
    def search(self):
        pass

class ExampleApp(App):
    def build(self):
        return SearchPanel()

if __name__ == '__main__':
    ExampleApp().run() 
```

问题是，当我运行应用程序时，我得到了这个回溯：

```
Traceback (most recent call last):
  File "example.py", line 24, in <module>
    ExampleApp().run()
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/app.py", line 523, in run
    root = self.build()
  File "example.py", line 20, in build
    return SearchPanel()
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/uix/anchorlayout.py", line 62, in __init__
    super(AnchorLayout, self).__init__(**kwargs)
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/uix/layout.py", line 60, in __init__
    super(Layout, self).__init__(**kwargs)
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/uix/widget.py", line 113, in __init__
    Builder.apply(self)
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/lang.py", line 1217, in apply
    self._apply_rule(widget, rule, rule)
  File "/home/testing/.virtualenvs/kivy2/local/lib/python2.7/site-packages/Kivy-1.4.1-py2.7-linux-x86_64.egg/kivy/lang.py", line 1346, in _apply_rule
    crule, idmap)})
  File "_event.pyx", line 184, in kivy._event.EventDispatcher.bind (/tmp/easy_install-PMy51_/Kivy-1.4.1/kivy/_event.c:2038)
KeyError: 'enter' 
```

显然我无法插入`on_enter`根布局的回调，我做错了什么？如果我改变它`on_enter`的`on_text`工作原理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T15:33:44.053

好吧，我发现这`on_enter`不是一个`TextInput`事件。

相反，您需要使用`on_text_validate`which 仅适用于单行文本输入。或者，如果您愿意，可以将小部件绑定`on_text_validate`到`on_enter`函数或方法。

# python - 显示子 wx.Frame？

> ID：13101224
> 
> 赞同：0
> 
> 时间：2012-10-27T14:51:22.013
> 
> 标签：python, wxpython

我有两个框架——mainWindow，它是“主”框架，以及 moreWindow，它是 mainWindow 的一个子框架。当单击 mainWindow 中的按钮时，我想显示 moreWindow 。这是我正在尝试的：

```
def showChild(nil):
    moreWindow.Show()
class mainWindow(wx.Frame):
    def __init__:
        buttonMore.Bind(wx.EVT_BUTTON, showChild)
class moreWindow(wx.Frame):

TypeError: unbound method Show() must be called with moreWindow instance as first argument (got nothing instead) 
```

我尝试使用`moreWindow.Show(moreWindow)`，这只是给出了一个更神秘的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:17:38.017

您需要在 的*实例*上调用该方法`moreWindow`，而不是类`moreWindow`本身。也就是说，您需要`moreWindow`在代码中的某处创建一个实例：

```
more_window = moreWindow() 
```

然后调用`show`该实例：

```
more_window.show() 
```

另外，请检查此答案，这正是您想要做的：

[https://stackoverflow.com/a/11201346/1157444](https://stackoverflow.com/a/11201346/1157444)

# sql - Windows 8 中的本地数据库，发布后

> ID：13101227
> 
> 赞同：0
> 
> 时间：2012-10-27T14:52:13.450
> 
> 标签：sql, database, windows-8, microsoft-metro, visual-studio-2012

现在 Windows 8 已经发布，我的印象是开发人员现在可以使用更多方式在 Metro 应用程序中使用本地数据库（SQL Express LocalDB？）。到目前为止，我一直在使用在 Windows 8 上运行的 SQLite3 版本，但我知道我可以尝试使用 Visual Studio 2012 中内置的数据库功能（这不是更好吗？）

为此，我尝试遵循 MSDN 上的文档（此处：http: [//msdn.microsoft.com/en-us/library/ms233763](http://msdn.microsoft.com/en-us/library/ms233763)）但是当我转到项目 > 添加新项目时，我没有“基于服务的数据库”选项。我错过了什么？我需要安装另一个组件，还是我完全错了？我没有使用文档中提到的任何示例数据库，因为我想将它直接添加到我的应用程序中。我正在使用 VS2012 Pro。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:02:54.900

Windows 8 应用商店 api 没有任何内置的数据库功能。微软真的希望你使用云存储。您尝试遵循的文档适用于 Windows 8 桌面应用程序，*而不是*Windows 8 商店应用程序。在可预见的未来，你可能最好使用 sqlite。

# php - 使用循环创建 MySQL 查询

> ID：13101229
> 
> 赞同：2
> 
> 时间：2012-10-27T14:52:21.733
> 
> 标签：php, mysql, loops

我正在开发一个用于每小时预订资源的系统。例如按小时或其他方式预订会议室。我几乎已经让所有功能正常工作，但有些事情远非完美，而且我有一个功能让我很烦恼。它正在预订一整周的资源。我的代码如下，但任何有助于提高效率的帮助将不胜感激。

谢谢！

史蒂夫

```
function bookweek($week) {
global $deskid, $date, $time, $member_id, $bookingTimes, $day0, $day1, $day2, $day3, $day4, $day5, $day6, $day7, $day8, $day9, $day10, $day11, $day12, $day13;

dbconnect();

switch($week) {
    case 1: 
        $dupecheck = mysql_query("SELECT * FROM booked where deskid='$deskid' AND date>='$day0' AND date <'$day7'");        
        if (mysql_num_rows($dupecheck) == 0) 
        {
            for($j = 0; $j< 7; $j++) 
            {   
                $daynumber=$j;
                $testing = "day".$daynumber;
                $daytotal= $$testing;
            for($i = 1; $i < count($bookingTimes)+1; $i++) 
            {
                $sql="INSERT INTO booked (date, time, deskid, member_id) VALUES ('$daytotal', '$i', '$deskid', '$member_id')";
                    $result = mysql_query($sql);
                    if (!$result) {
                        die('Invalid query: ' . mysql_error());
                    }
            }
            }
        }
        break;
    case 2:
        $dupecheck = mysql_query("SELECT * FROM booked where deskid='$deskid' AND date > '$day6'");         
        if (mysql_num_rows($dupecheck) == 0) 
        {
            for($j = 0; $j< 7; $j++) 
            {   
                $daynumber=$j+7;
                $testing = "day".$daynumber;
                $daytotal= $$testing;
            for($i = 1; $i < count($bookingTimes)+1; $i++) 
            {
                $sql="INSERT INTO booked (date, time, deskid, member_id) VALUES ('$daytotal', '$i', '$deskid', '$member_id')";
                    $result = mysql_query($sql);
                    if (!$result) {
                        die('Invalid query: ' . mysql_error());
                    }
            }
            }
        }
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:29:11.313

如果在任何情况下使用**整个 sql 块**，这将**很难维护**。 让它更有效率。

 **```
function bookweek($week) {
global $deskid, $date, $time, $member_id, $bookingTimes, $day0, $day1, $day2, $day3, $day4, $day5, $day6, $day7, $day8, $day9, $day10, $day11, $day12, $day13;

$queryP = "SELECT * FROM booked where deskid='".$deskid."' AND date>";
dbconnect();
switch($week) {
case 1: 
       $dupecheck = mysql_query($queryP."='".$day0."' AND date <'".$day7."'");      
       break;
case 2:
       $dupecheck = mysql_query($queryP."'".$day6."'");         
       break;
}
    if (mysql_num_rows($dupecheck) == 0) 
[...] 
```

**试试mysqli**

现在代码更清晰了，很明显可以改进。

```
$queryP = "SELECT * FROM booked where deskid='".$deskid."' AND date>";
dbconnect();

switch($week) {
case 1: 
       $queryP .= "='".$day0."' AND date <'".$day7."'";
       break;
case 2:
       $queryP .= "'".$day6."'";
       break;
}
       $dupecheck = mysql_query($queryP);          
       if (mysql_num_rows($dupecheck) == 0) 
[...] 
```

让我们进入循环。
为了更好地测试错误。我只会更改内部循环。

```
if (mysql_num_rows($dupecheck) == 0) 
  {
         for($j = 0; $j< 7; $j++) 
         {  
          $testing = "day".$j;
          $daytotal= $$testing;
          $sql = "INSERT INTO booked (date, time, deskid, member_id) VALUES ";
          $sqlTest = $sql;
          for($i = 1; $i < count($bookingTimes)+1; $i++) 
            {
              $sql .= "('".$daytotal."', '".$i."', '".$deskid."', '".$member_id."'),";
            }
          if ($sql == $sqlTest) {
                // nothing to be done or die
            } else {
            $sql = rtrim($sql,",");    
            result = mysql_query($sql);
              if (!$result) {
                 die('Invalid query: ' . mysql_error());
              }
           }
         }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:43:32.713

我认为如果你使用[准备好的语句](http://php.net/manual/es/mysqli.prepare.php)，你会节省很多 MySQL 资源。**

# php - 如何检索随机文件夹？

> ID：13101230
> 
> 赞同：0
> 
> 时间：2012-10-27T14:52:30.453
> 
> 标签：php, random

我有三个文件夹，每个文件夹都有 40 个任务。我必须随机化这些文件夹，我已经通过使用`shuffle($folder)`然后将其存储在会话数组中来完成。

但我发现的问题是我以后如何检索它们，例如当用户点击开始实验时：

它将进行第一次试验，此时它将查看第一个数组，然后从 switch 语句中选择正确的文件夹并开始测试。

但是后来我在转到第二个和第三个文件夹时遇到了问题，因为每次我无法将文件夹指向指定位置时它们都会被随机化。

我知道这听起来令人困惑，所以如果您需要更多详细信息，请告诉我。我还没有发布代码并且有很多，但是如果有人想看看我到目前为止所做的事情，我会设置一个保管箱链接，以便您可以查看各种文件。

[https://www.dropbox.com/sh/l98z3mzk4cd2105/qxz09lWOM9](https://www.dropbox.com/sh/l98z3mzk4cd2105/qxz09lWOM9)

编辑：

谢谢所有帮助过的人，我还没有完全整理出来，但这个建议肯定有帮助。谢谢你。当我设法让它工作时，我会发布一个完整的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:02:17.377

如果不了解您如何实施您所解释的内容，就很难回答您的问题。

因此，您正在对一组文件夹名称进行改组，并且您希望用户访问一个随机文件夹，或者以随机顺序访问所有三个文件夹？

为什么您在进入第 2 和第 3 文件夹时遇到问题？

您需要更具体地说明您正在尝试做什么，以及您的实施出了什么问题。

编辑：宇智波斑明白你的意思。我不确定您是否连续访问所有 3 个文件夹（在这种情况下，您可以在改组后使用 foreach 循环遍历 $folder），或者每次用户提交表单时访问一个随机的唯一文件夹。如果是后者，那么宇智波斑已经回答了你的问题:)

编辑：你能做到吗？

```
shuffle($folder);
foreach($folder as $element)
{
    // $element is your random folder
    // ...
} 
```

您只需遍历每个文件夹一次，直到循环结束。您可以拥有任意数量的文件夹。它只是循环遍历数组中的每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:00:25.850

很简单，开始测试后，从`$folders`数组中删除使用的条目。这样，即使重新随机化，您也不会重复。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:05:00.947

我有一个替代解决方案给你。

```
$folders = array(
                array("foldername"=>"folder1","folderpath"=>"path_to_folder1"),
                array("foldername"=>"folder2","folderpath"=>"path_to_folder2"),
                array("foldername"=>"folder3","folderpath"=>"path_to_folder3"),

);

$randomFolderNo = rand(0,2);

$selectedFolder = $folders[$randomFolderNo];

echo $selectedFolderName = $selectedFolder['foldername'];
echo $selectedFolderPath = $selectedFolder['folderpath']; 
```

您可以在 SESSION 数组中使用 $folder 数组。

# ruby - 从ruby中的数组中找到最小的未使用数字？

> ID：13101232
> 
> 赞同：0
> 
> 时间：2012-10-27T14:52:43.787
> 
> 标签：ruby, arrays

给一个数组，如何找到下一个未使用的数字？

`["10", "2", "3", "5", "6", "7"]`，它应该返回`"4"`

`["1", "2", "3"]`，它应该返回`"4"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T14:58:50.953

干得好：

```
def next_unused(ary)
    sary = ary.collect(&:to_i).sort
    i = 0
    s = sary[0]
    # puts "ary: #{sary.inspect}, s: #{s}"
    while (i<sary.size && (s == sary[i])) do
        # puts "s:#{s}, sary:#{sary[i]}"
        s += 1
        i += 1
    end
    s.to_s
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:16:41.513

与显式循环和累加器变量相比，使用高阶函数通常会导致更简洁和优雅的解决方案......

```
require 'set'
used = ["1","2","3"].map(&:to_i).to_set
1.upto(Float::INFINITY).detect { |n| not used.include?(n) } 
```

`Set`即使在您有很多“已使用”数字的情况下，使用 a也可以使该解决方案快速运行。如果您知道永远不会有很多“已使用”数字，则可以跳过将已使用数字数组转换为集合。`#include?`也适用于数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T15:27:02.620

也许像这样？

```
a = ["10", "2", "3", "5", "6", "7"]
actual = a.map(&:to_i)
full = ((actual.min)..(actual.max)).to_a

p (full - actual).first
#=> 4

a = ["1", "2", "3"]
p a.map(&:to_i).max + 1
#=> 4 
```

# scala - 内省 Scala 特征

> ID：13101235
> 
> 赞同：1
> 
> 时间：2012-10-27T14:52:56.913
> 
> 标签：scala, introspection

考虑这个例子

```
class FooListener extends Listener {
  @Listen
  def runMeToo = {
    ...
  }
}

trait Listener {

  @Listen
  def runMe = {
    ...
  }
} 
```

我正在编写自省代码来查找给定类（即**FooListener**）的所有方法，这些方法都用某个注释（即**@Listen**）进行了注释。它们将在某些情况下被调用。所以我需要他们所有的**java.lang.Method**实例。

在 FooListener 类中很容易找到这些方法。也很容易找到那些超类。

问题是如何找到那些继承自特征的？以及特质的特质？ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:03:04.913

从特征继承的方法只是复制到类中。因此，您只需列出类的方法即可找到它们。

```
val ms = classOf[FooListener].getMethods() 
```

然后用注释打印它们。

```
ms.foreach(m => m.getDeclaredAnnotations().foreach(a => println(m + " " + a))) 
```

在我的情况下（用 注释`Test`），这打印

```
public void util.FooListener.runMe() @org.junit.Test(expected=class org.junit.Test$None, timeout=0)
public void util.FooListener.runMeToo() @org.junit.Test(expected=class org.junit.Test$None, timeout=0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:05:34.917

由于特征在 Java 中被转换为接口，因此下面的代码片段应该可以工作：

```
val methods = classOf[FooListener].getInterfaces flatMap {intf =>
    intf.getMethods filter {_.getAnnotation(classOf[Listen]) != null}
} 
```

# paypal-ipn - 使用 Django-PayPal - PayPal IPN 得到 401

> ID：13101241
> 
> 赞同：1
> 
> 时间：2012-10-27T14:53:45.830
> 
> 标签：paypal-ipn, http-status-code-401, django-paypal

我正在尝试设置 Django-Paypal 并已从 PayPal 获得回报。长话短说，在我的 Apache 访问日志中，每当我通过 PayPal 处理付款（并且 PayPal 将结果发送回我的服务器）时，我都会得到以下信息：

```
173.0.82.126 - - [27/Oct/2012:16:42:52 +0200] "POST /my/super/secret/notify/url/ HTTP/1.0" 401 787 "-" "-" 
```

通知视图确实具有`@csrf_exempt`解决此错误的目的，但它仍然不起作用。

如果有人能告诉我如何解决这个问题（这显然是权限/授权问题），我将不胜感激！

PS：我尝试添加`WSGIPassAuthorization`到我的 apache 配置文件中，这也没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T10:59:37.310

事实证明，我当时非常昏暗......我们在服务器上进行了基本身份验证，以防止在启动之前窥探，所以当然 PayPal 被 401 拒绝......

所以答案当然是在测试 IPN 时删除基本身份验证 - 一切都清楚！

令人惊讶的是，从某事中退后一点会揭示出最明显（也是最简单）的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-12T10:27:52.023

我刚刚遇到了同样的问题，但通过在虚拟主机中添加一些“允许来自”规则来保持基本身份验证：

```
Allow from 173.0.82.77
Allow from 173.0.82.126
Allow from 173.0.82.78
Satisfy Any 
```

[贝宝沙盒 IP 地址](https://ppmts.custhelp.com/app/answers/detail/a_id/250/related/1/session/L2F2LzEvdGltZS8xNDA1MTU5NjcyL3NpZC9lYjdfOTVabA%3D%3D)

# json - 通过 Socket 流式传输一系列 JSON 字符串

> ID：13101247
> 
> 赞同：2
> 
> 时间：2012-10-27T14:54:37.940
> 
> 标签：json, node.js, sockets, networking, tcp

这可能更多地是关于 socket/tcp 行为，而不是 node.js。

我正在 node.js 中编写一个服务器，它通过套接字（不是 HTTP）接收一系列字符串化的 JSON 对象。

客户端（iOS 应用程序）通过此套接字流式传输 JSON 字符串。每个 JSON 字符串的大小各不相同（从几个字节到几个 K 字节），时间也是如此。每个 JSON 字符串都将通过一个“写入”操作发送。

当我从套接字接收数据时，我调用 JSON.parse()。

简单的测试用例效果很好，但我不确定这是否足够。

我想知道是否需要担心以下情况，（1）“数据”包含多个 JSON 对象（2）单个 JSON 对象通过多个数据发送。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:58:55.130

您应该为什么是 json 有效负载而什么不是，开发一个协议。因此，例如在 tcp/ip 套接字上，您将编写一个开始字符，然后是 json 有效负载，结束字符。这样，您在套接字上的读取就知道消息何时开始和结束。现在，对于想要处理多个 json 有效负载的特殊情况，您将需要一个分隔符。

所以选择你的开始、结束和分隔符由你决定。您可以使用许多字符。查看 ascii/Hex 表以获得一些选择。但是，最好坚持使用不可打印的字符。否则，您会遇到有效负载可能包含这些字符的情况。

如果发生这种情况，您将需要为转义序列开发另一组字符。这意味着一旦您定义了开始、结束和分隔符，这些字符在有效负载中是非法的，并且必须由发送端的转义序列替换。这也意味着接收方必须将这些转义序列转换回正确的字符，以便有效负载可以返回到初始状态。

因此，例如，您可以将协议定义为。

```
[begin]     = 0x02     // Hex for Start of text
[end]       = 0x04     // Hex for end of end of transmission
[separator] = 0x03     // Hex for end of text

or 

[begin]     = 0x0B     // Hex for Vertical Tab
[end]       = 0x1C     // Hex for file separator
[separator] = 0x1E     // Hex for record separator 
```

然后通过 tcp/ip 套接字（线路）的消息看起来像（其中.......是消息之间的时间）

```
[begin][json payload][separator][end].......[begin][json payload][seperator][json payload][separator][json payload][separator][end]....... 
```

因此，您必须编写代码以在线读取，直到找到开始为止。然后存储有效负载，直到找到分隔符。然后如果分隔符之后的下一个字符不是结束宪章循环并存储下一个有效载荷。

我还建议在谷歌上搜索 MLLP（最小低级协议）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:52:10.350

[这](http://www.codeproject.com/Articles/37496/TCP-IP-Protocol-Design-Message-Framing)是对这个问题的非常完整的解释，包括解决方案甚至代码。

# php - 保存到php apache中的临时文件夹

> ID：13101254
> 
> 赞同：0
> 
> 时间：2012-10-27T14:55:18.770
> 
> 标签：php, apache, tmp

当我尝试使用 php 将已处理的文档保存到临时文件夹时，我反复收到以下错误。（顺便说一句，我在本地机器上运行 apache）

> “警告：DOMDocument::save(/tmp/lecture.xml) [domdocument.save]: 无法打开流：/Users/JCWitt/WebPages/plaoul/text/textdisplay.php 第 278 行的权限被拒绝”

这里有几个问题：

1）当我告诉服务器保存文件时，`/tmp/`它是在寻找 ServerRoot 还是 DocumentRoot 中的文件夹？

2) 其次，我可以在 httpd.conf 中做些什么来授予 php 保存文件的权限吗？你能告诉我我可以补充什么吗？

谢谢你的帮助。

# ios - PhoneGap iOS - 仅当照片大于 targetheight / targetwidth 时才调整相机大小

> ID：13101255
> 
> 赞同：4
> 
> 时间：2012-10-27T14:55:25.807
> 
> 标签：ios, cordova, image-uploading, cordova-2.0.0

我正在使用带有内置相机插件的 Cordova 2.0。我的应用程序包含大量上传到远程服务器的照片，出于带宽和性能原因，我必须限制手机端文件的大小。

我正在使用以下相机选项来拍摄新照片：

```
 var options = {
        quality : 30,
        destinationType : navigator.camera.DestinationType.FILE_URI,
        targetWidth: 1600,
        targetHeight: 1200
    } 
```

这对于手机拍摄的照片非常有用，因为它们通常大于 1600x1200。但是，当我上传现有照片时，我不想放大小于目标分辨率的图像：

```
 var options = {
        quality : 30,
        sourceType : navigator.camera.PictureSourceType.PHOTOLIBRARY,
        destinationType : navigator.camera.DestinationType.FILE_URI,
        targetWidth: 1600,
        targetHeight: 1200
    }; 
```

实际上，我总是想避免扩大规模。关于如何更改相机插件的“缩放模式”的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:25:05.300

根据文档 [http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#camera.getPicture](http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#camera.getPicture)，无论图像质量如何，都无法缩放照片库中的图像。仅当从手机中取出时。

# iphone - 从未完成 [GKAchievement loadAchievementsWithCompletionHandler:]

> ID：13101257
> 
> 赞同：5
> 
> 时间：2012-10-27T14:55:32.387
> 
> 标签：iphone, ios, game-center

我在初始化时使用该函数`[GKAchievement loadAchievementsWithCompletionHandler:]`来恢复当前播放器的成就。但是，completionHander 从未被调用过。

```
- (void)loadAchievements
{
    [GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error)
     {
         if (error == nil) // !!-- 如果在此处设置断点，则永远不会到达
         {
             @synchronized(_achievementsDictionary)
             {
                 for (GKAchievement* 成就中的成就)
                     [_achievementsDictionary setObject:achievement forKey:achievement.identifier];
                 NSLog(@"成就加载");
             }
         }
         别的
         {
             NSLog(@"加载成就时出错：%@", error);
         }
     }];
}

```

但是，类似的功能`[GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:]`效果很好：

```
-（无效）retrieveAchievmentMetadata
{
    [GKAchievementDescription 加载AchievementDescriptionsWithCompletionHandler：
     ^(NSArray *descriptions, NSError *error) {
         如果（错误！=零）
         {
             NSLog(@"加载成就描述错误：%@", error);
         }
         如果（描述！= nil）
         {
             @synchronized(_achievementsMetaDataDictionary)
             {
                 for (GKAchievementDescription* desc in descriptions)
                 {
                     _achievementsMetaDataDictionary[desc.identifier] = desc;
                 }
             }
             NSLog(@"已加载成就描述");
         }
     }];
}

```

可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-05T08:02:49.273

它来得有点晚，但也许它可以帮助别人。

事实是`GKAchievement loadAchievementsWithCompletionHandler:`加载了本地玩家取得进展的所有成就。这意味着，如果在相关的 iTunes Connect 应用程序中设置了新的成就（没有任何进展），它们将不会被加载。必须先报告一些进展！

另一方面`GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:`，旨在获取有关 iTunes Connect 应用程序的**每个**可用成就的**所有**信息。描述也提供了成就的标识符。

 **对于新的成就，流程如下：

1.  加载成就描述。( `GKAchievementDescription loadAchievementDescriptionsWithCompletionHandler:`)
2.  向 Game Center 报告成就的一些进展。GKAchievement 可以基于`GKAchievementDescription`. ( `GKAchievementDescription reportAchievements:withCompletionHandler:`)
3.  从此时开始，加载成就的进度以在启动时设置您的应用程序。( `GKAchievement loadAchievementsWithCompletionHandler:`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T14:28:12.690

您是否检查过返回的*元素*`descriptions` `NSArray`没有0 ？

 *```
 if( !descriptions.count )
   printf( "User has not submitted _any_ progress on _any_ achievements\n" ) ;
 else for (GKAchievementDescription* desc in descriptions) .. 
```

注意`descriptions`这里的数组只返回*这个用户之前提交进度的成就集合*，**而不是**这个应用程序在 GameCenter 上注册的所有成就的数组。***

# node.js - 将everyauth与restify一起使用

> ID：13101259
> 
> 赞同：4
> 
> 时间：2012-10-27T14:56:33.300
> 
> 标签：node.js, everyauth, restify

我正在尝试使用everyauth 来处理使用restify 创建的rest api 的身份验证。但是找不到起点。我希望做类似的事情：

```
var restify = require('restify');  
var everyauth = require('everyauth');
var server = restify.createServer();
server.use(everyauth.middleware()); 
```

但是restify 不接受everyauth 中间件。

我该如何设置restify和everyauth？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T20:11:19.627

您遇到的问题是 restify 没有，并且 current 不会有中间件层。

以下来自restify的作者

> 我已经考虑了很多，这里让我担心的是注册与connect evermore的兼容性。我无法控制或输入他们决定做什么。这似乎更像是“如果它有效，那就太好了”。
> 
> 我现在要用“不会修复”来结束这个：\
> 
> [https://github.com/mcavage/node-restify/issues/89](https://github.com/mcavage/node-restify/issues/89)

您可以做的是使用 connect 并在其上添加 restify 服务器，然后您可以使用 connect 来管理您的中间件，如everyauth。

这是一个很好的示例，我让它在我的系统上运行良好。

```
// Restify server config here
var server = restify.createServer({
  name: 'restify-test',
  version: '1.0.0',
});

// ...

// Connect config here
var connectApp = connect()
    .use(connect.logger())
    .use(connect.bodyParser())
    .use(connect.query())
    .use(connect.cookieParser())
    // And this is where the magic happens
    .use("/api", function (req, res) {
             server.server.emit('request', req, res);
         });

connectApp.listen(8080); 
```

[https://gist.github.com/2140974](https://gist.github.com/2140974)

然后您可以根据文档添加everyauth 进行连接。

希望有帮助。

# java - 使用 java swing gui 创建无线电接口

> ID：13101261
> 
> 赞同：0
> 
> 时间：2012-10-27T14:56:39.423
> 
> 标签：java, swing, user-interface, radio, paintcomponent

我在大学做一个摇摆 GUI 课程的小组作业，需要一些提示。

我必须开发和实现一个代表以下内容的用户界面，旋钮调谐器滑块和所有。

但我不知道从哪里开始，请注意这张图片不是由讲师提供的，而是由小组中的其他学生提供的，而且看起来很不灵活。

我最大的两个问题是旋钮和调谐器。

任何想法将不胜感激。

![在此处输入图像描述](../Images/5dcc153e5ee4bff9ee1d2cab427f9288.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:28:17.843

你必须编写自己的 Knob 类来解决这个问题。您可以从基于`JButton`. 然而，调谐器必须单独绘制`JPanel`。将会有很多自定义代码将被实现。祝你好运 ：-）

您将不得不调查：

1.  `JPanel`及其`paintComponent(Graphics g)`方法
2.  `JButton`及其`paintComponent(Graphics g)`方法
3.  `Graphics2D`班级。

对于旋钮，您可以从一个自定义绘制的、基于图像的 JButton 开始，`actionPerformed()`为它实现方法和`Graphics2D.rotate()`它。使用 MVC 模式设计它，您可以在其中设置旋转角度并使用`paintComponent()`. 这将为模型设置必要的校准。

但是，对于调谐器，您可以从基于 .png 的背景和可以使用 Graphics2D 中的方法四处移动的矩形开始。这将与 Radio-tuner 模型相关联。

很难用语言来解释。但我想你明白了。

祝你好运。

# java - 删除/阅读最后收到的短信

> ID：13101262
> 
> 赞同：1
> 
> 时间：2012-10-27T14:56:45.793
> 
> 标签：java, android, sms, uri, broadcast

我正在寻找一种使用光标和 Uri 读取最后收到的短信的方法，我也在寻找一种从广播接收器中删除最后收到的短信的方法，我目前正在使用`abortBroadCast();`，但我想删除“内容”中的传入消息：//短信”。

谢谢。

# xquery - xquery-如何使用已作为模块导入另一个“.xq”文件（包含更多函数）中的“.xq”文件（包含函数）

> ID：13101264
> 
> 赞同：0
> 
> 时间：2012-10-27T14:56:56.460
> 
> 标签：xquery, flwor

我正在使用 Xquery 文件--> 让我们通过导入来说 file1.xq。

现在这个文件 (file1.xq) 在其中导入另一个文件 file2.xq。

我不仅要使用file1.xq的功能，还要使用file2.xq的功能。

因此，我尝试将两者都导入到我的实际 xquery 代码中（使用两个文件中的函数），但出现重复的函数定义错误。

我在这里做错了什么？如何在我的 Xquery 代码中使用 file2.xq 中定义的 Xquery 函数？特别是。在这种情况下，file1.xq 正在使用 file2.xq 的功能（我的 xquery 代码也导入了它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T16:41:34.603

您可能没有定义正确的命名空间。因此，使用了默认命名空间，如果您在不同的文件中有两个函数，它们将映射到同一个函数，并且应该出现重复的函数定义错误。由于您没有提供任何示例代码或更详细的代码，因此很难猜测。

所以假设你的 file2.xq 应该使用声明它的命名空间

```
module namespace _ = 'http://mycompany.org/file1'; 
```

然后，您可以使用在此文件中定义您的函数

```
declare function :my-function() { "Whatever" } 
```

现在可以使用这个模块在您的实际 xquery 代码文件中导入

```
import module namespace file1 = 'http://mycompany.org/file1';
file1:my-function() 
```

你也可以使用

```
import module namespace file1 = 'http://mycompany.org/file1' at '/path/in/local/filesystem'; 
```

绝对指定 file1.xq 的位置。

# php - 从邻接列表模型数据库中检索数据。（MySQL）

> ID：13101265
> 
> 赞同：2
> 
> 时间：2012-10-27T14:57:05.633
> 
> 标签：php, mysql, codeigniter

```
function get_hierarchy_page()
{
    $detail = $this->input->post('name');
    $tree = $this->dashboard_model->get_detail($detail);
    $this->load->view('layout/layout', $data);

    if(isset($tree))
    {
        $data['hierarchy'] = $this->data_array_for_teacher($tree);
    }
}

function data_array_for_teacher($tree)
{
    if(!(isset($tree)))
        return 0;

    $data_query = mysql_query("select * from tbl_level");

    while($result = mysql_fetch_assoc($data_query))
    {
        $id = $result['level_id'];
        $data_array[$id] = $result;
    }

    //array to get level id
    while($level_result = mysql_fetch_assoc($tree))
    {
        $level_array[] = $level_result['level_id'];
    }

    if(!(isset($level_array)))
        return 0;

    foreach($level_array as $level)
    {
        $p   = $this->recursive_for_teacher($data_array,$level);    
        print_r($p);
    }
}

function recursive_for_teacher($data_array,$level_once)
{
    if(!isset($data_array,$level_once))
        return 0;

    $i = 0;
    static $p = array();
    $data = $data_array;
    $y = $level_once;
    $x = $data[$y]['level_parent'];
    $z = $data[$y]['level_name'];
    $y=$x;
    array_push($p,$z);
    $p[] = $z;

    if($y!=0)
        $this->recursive_for_teacher($data,$y);

    return $p;
} 
```

我正在开发一个基于使用邻接列表模型存储在 mysql 中的分层数据的系统。我有 2 张桌子`tbl_user`和`tbl_level`.
`tbl_level`具有以下字段 - `level_id`, `level_parent`, `level_name`. 这三个字段在标准数据库结构中分别与`id`​​ ,相同。`parent_name``parent_id`

表`tbl_level`中有许多组织，每个组织都有不同的层次结构。
我编写了上面的代码，它解决了我在给定组织中获取任何权限的整个层次结构的问题。
我现在面临的唯一问题是当我在一个数组中获得所需的答案时。
每个权限我都需要一个数组。
`Array(`
`[0] => Engineering and Technology`
`[1] => Univ1`
`[2] => Class`
`[3] => Master of Business Administration`
`[4] => Engineering and Technology`
`[5] => univ1`
`[6] => Class_cse`
`[7] => Computer Science`
`[8] => Bachelor of Technology`
`[9] => Engineering and Technology`
`[10] => univ1`
`)`

任何人都可以为这个问题提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T10:54:13.667

```
function parent_sort($categories)
{    
    foreach($categories as $item)
        $childs[$item->parent_id][] = $item;
    foreach($categories as $item) 
        if (isset($childs[$item->category_id]))
            $item->childs = $childs[$item->category_id];

    return $childs[0];
} 
```

您可以使用此功能对水平数组进行排序，它将按级别输出排序后的数组

# java - 如何使用文本字段，以便它们可以用作 RGB 颜色的输入来更改文本的颜色？

> ID：13101273
> 
> 赞同：1
> 
> 时间：2012-10-27T14:58:35.243
> 
> 标签：java, swing, button, colors, rgb

我已经在下面发布了我的代码，但基本上我遇到了一些麻烦。我正在尝试创建一个程序，它将接受 3 个文本输入，分别是红色、绿色和蓝色。这个想法是文本以红色开始，并且当按下更改颜色按钮时。将采用输入的 RGB 值，并根据这些值更改颜色。但是，我无法将输入到文本字段中的值由程序获取并更改颜色。任何帮助表示赞赏。

当在代码中手动编辑文本和颜色值时，我也遇到了在处理程序中同时更改它们的问题。它要么只是改变颜色，要么只是改变文本。

任何帮助将不胜感激。:D

```
package RGBProgram;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class RGB extends JApplet {
    Color col = new Color(255, 0, 0);
    String str = "Hello";
    JButton butReset, butChange;
    JTextField textR, textG, textB;

    public void init(){
        butReset = new JButton("Reset");
        butChange = new JButton("Change Colour");
        textR = new JTextField("Red", 10);
        textG = new JTextField("Green", 10);
        textB = new JTextField("Blue", 10);

        RGBPanel panel = new RGBPanel(this);
        JPanel butPanel = new JPanel();
        JPanel textPanel = new JPanel();
        butPanel.add(butReset);
        butPanel.add(butChange);
        textPanel.add(textR);
        textPanel.add(textG);
        textPanel.add(textB);
        add(panel, BorderLayout.CENTER);
        add(butReset, BorderLayout.NORTH);
        add(butChange, BorderLayout.SOUTH);
        add(textPanel, BorderLayout.WEST);

        Handler reset = new Handler(this);
        Handler change = new Handler(this);

        textR.addActionListener (new Handler(this));
        textG.addActionListener (new Handler(this));
        textB.addActionListener (new Handler(this));
        butReset.addActionListener(reset);
        butChange.addActionListener(change);

    }

    class RGBPanel extends JPanel{
        RGB theApplet;

            RGBPanel(RGB app){
                theApplet = app;
            }

        public void paintComponent(Graphics g)
        {super.paintComponent(g);
        Color cols = col;
        String str1 = str;
        g.setColor(cols);
        g.drawString(str1, 0, 150);
        }
    }
}

package RGBProgram;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Handler implements ActionListener {
     RGB theApplet;
    Handler(RGB app){
        theApplet = app;
    }

    public void actionPerformed(ActionEvent e){
        String red = theApplet.textR.getText();
        String green = theApplet.textG.getText();
        String blue = theApplet.textB.getText();
        theApplet.textR.setText("");
        theApplet.textG.setText("");
        theApplet.textB.setText("");

        try{
            int r = Integer.parseInt(red.trim());
            int g = Integer.parseInt(green.trim());
            int b = Integer.parseInt(blue.trim());

        }
        catch (NumberFormatException ex){

        }

        if (e.getSource() == theApplet.butChange)
            theApplet.str = "Goodbye";
            theApplet.col = new Color(r, g, b);
        if (e.getSource() == theApplet.butReset)
            theApplet.str = "Hello";
            theApplet.col = new Color(255, 0, 0);
    theApplet.repaint();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:24:05.930

我将类中的`actionPerformed`方法更改`Handler`为如下，现在颜色已正确应用：

```
public void actionPerformed(ActionEvent e) {
    String red = theApplet.textR.getText();
    String green = theApplet.textG.getText();
    String blue = theApplet.textB.getText();
    theApplet.textR.setText("");
    theApplet.textG.setText("");
    theApplet.textB.setText("");

    try {
        int r = Integer.parseInt(red.trim());
        int g = Integer.parseInt(green.trim());
        int b = Integer.parseInt(blue.trim());
        if (e.getSource() == theApplet.butChange)
            theApplet.str = "Goodbye";
        theApplet.col = new Color(r, g, b);
        if (e.getSource() == theApplet.butReset)
            theApplet.str = "Hello";
        theApplet.repaint();
    } catch (NumberFormatException ex) {
        ex.printStackTrace();
    }
} 
```

# c++ - 如何使用 C++ 自提取二进制资源（可执行文件）？

> ID：13101278
> 
> 赞同：0
> 
> 时间：2012-10-27T14:59:10.830
> 
> 标签：c++, embedded-resource, self-extracting

我需要提取一个二进制资源（在我的项目中）但是，我想不出任何办法，我使用的是 Windows/C++。

我该怎么做？

（任何帮助将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:26:23.403

[FindResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042%28v=vs.85%29.aspx)、[SizeofResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648048%28v=vs.85%29.aspx)、[LoadResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)和[LockResource](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648047%28v=vs.85%29.aspx)一起使用，以访问您阅读的模块的资源表中保存的“文件”。可以在[此问题](https://stackoverflow.com/questions/11388134/extract-file-from-resource-in-windows-module)中找到如何执行此操作的合理示例，请注意，您需要知道资源*类型*和名称（或序数）才能找到它的副本。

# java - 从数组列表中删除对象

> ID：13101279
> 
> 赞同：2
> 
> 时间：2012-10-27T14:59:17.637
> 
> 标签：java, arraylist

我有一个包含姓名、电话号码和位置的数组列表。

如果可能，我想从该数组中删除某些项目

一旦我像下面尝试过的那样找到它，有没有办法删除它？

```
public void delete(String nameToDelete) 
{    
    for (Entry entry : Directory.entries) { 
        if (entry.name.equalsIgnoreCase(nameToDelete))
        {
            //remove(entry);
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:10:42.637

## 原因？

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)返回的迭代器本质上是`fail-fast`。

> 这个类的迭代器和`listIterator`方法返回的迭代器是`fail-fas`t：如果在迭代器创建后的任何时候列表在结构上被修改，除了通过迭代器自己的 remove 或 add 方法之外，迭代器将抛出一个`ConcurrentModificationException`. 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

## 当我不使用它时，这个迭代器从哪里来？

对于集合的增强 for 循环`Iterator`被使用，因此您在迭代时不能调用 remove 方法。

所以你的循环与下面相同

```
for (Iterator<Entry> i = c.iterator(); i.hasNext(); ){ 
```

## 那么解决方案是什么？

`iterator.remove();`您可以基于迭代器显式而不是隐式调用和更改循环。

```
 String inputWord = "john";
    ArrayList<String> wordlist = new ArrayList<String>();
    wordlist.add("rambo");
    wordlist.add("john");
    for (ListIterator<String> iterator = wordlist.listIterator(); iterator
            .hasNext();) {
        String z = iterator.next();
        if (z.equals(inputWord)) {
            iterator.remove();
        }
    }
    System.out.println(wordlist.size()); 
```

## 现在我在哪里可以阅读更多内容？

1.  [For-Each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
2.  [数组列表 Java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:03:18.067

您应该使用`Iterator`从列表中删除条目。如果您尝试在`List`通过增强的 for 循环迭代时修改您的，它可能会抛出[ConcurrentModificationException](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)，虽然这并不总是发生，但不能保证。

以下是您可以如何使用`Iterator`您的列表：-

```
Iterator<Entry> iterator = Directory.entries.iterator();

while (iterator.hasNext()) {
    Entry entry = iterator.next();

    if (entry.name.equalsIgnoreCase(nameToDelete)) {
        iterator.remove();
    }
} 
```

即使在你应该使用方法而不是使用方法`Iterator`删除元素，因为这不会有什么不同。`iterator.remove``list.remove`

您还可以使用[**ListIterator**](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html)为您提供更多操作和方法来迭代列表。有关详细信息，请参阅文档。

要使用`ListIterator`，您可以像这样创建它：-

```
ListIterator<Entry> listIterator = Directory.entries.listIterator(); 
```

其余代码的工作方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:01:09.593

您要做的是`if entry.getKey().equals(nameToDelete)`检查它是否是您想要的，然后使用该`remove()`方法删除该条目。

但是，您不能在`for()`遍历您正在修改的同一个集合的循环内执行此操作。你会得到一个[ConcurrentModificationException](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)。

请参阅[“使用迭代器时如何避免 ConcurrentModificationException”](http://www.javacodegeeks.com/2011/05/avoid-concurrentmodificationexception.html)。

# php - PHP显示类别的帖子

> ID：13101280
> 
> 赞同：1
> 
> 时间：2012-10-27T14:59:32.483
> 
> 标签：php, wordpress, loops, tabs

我正在尝试为我们的 Wordpress 网站编写此滑块，以在每个框中显示该类别中的第一个、第二个和第三个最新帖子（在本例中是体育）。无论我对 count 变量做什么，我都无法显示其他帖子，只能显示第一个。这是我正在使用的循环和代码，页面是[smeharbinger.net/category/sports](http://smeharbinger.net/category/sports)

```
<div class="tabbed">

<!-- tab 1 -->
<div class="t1">
<ul>
    <?php
$count = 1; 
$tabbedSportsQuery = new WP_Query('cat='.get_query_var('cat').'&showposts=1');
while ($tabbedSportsQuery->have_posts()) : $tabbedSportsQuery->the_post(); 
echo '<div class="t'.$count.'">';
echo the_post_thumbnail(array(665,500), array ('class' => 'alignnone'));
$count++; 
endwhile;

?>

</ul>
</div>

<!-- tab 2 -->
<div class="t2">
<ul>
    <?php
  $count = 2; 
$tabbedSportsQuery = new WP_Query('cat='.get_query_var('cat').'&showposts=1');
while ($tabbedSportsQuery->have_posts()) : $tabbedSportsQuery->the_post(); 
echo '<div class="t'.$count.'">';
echo the_post_thumbnail(array(665,500), array ('class' => 'alignnone'));
$count = 2; 
endwhile;

?>

</ul>
</div>

<!-- tab 3 -->
<div class="t3">
<ul>
    <?php
$count = 3; 
$tabbedSportsQuery = new WP_Query('cat='.get_query_var('cat').'&showposts=1');
while ($tabbedSportsQuery->have_posts()) : $tabbedSportsQuery->the_post(); 
echo '<div class="t'.$count.'">';
echo the_post_thumbnail(array(665,500), array ('class' => 'alignnone'));
$count++; 
endwhile;

?>

</ul>
</div>

<!-- The tabs -->
<ul class="tabs">
<li class="t1"><a class="t1 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>        </li>
<li class="t2"><a class="t2 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>  </li>
<li class="t3"><a class="t3 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>  </li>
</ul>

</div><!-- tabbed --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:21:03.727

希望下面的代码对您有所帮助.. 循环通过帖子，然后为选项卡打印 div，然后尝试将剩余的选项卡放入变量中，并在 while 循环结束时打印该变量。

```
<?php
    $count = 1;
    $tabbedSportsQuery = new WP_Query(array(
        'cat' => get_query_var('cat'),
        'posts_per_page' => 3
    ));
    $out = '';
    while ($tabbedSportsQuery->have_posts()) : $tabbedSportsQuery->the_post();
?>
    <div class="t<?php echo $count?>">
        <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_post_thumbnail(array(665,500), array ('class' => 'alignnone')); ?></a>
    </div>
    <?php 
        if($count == 1) {   
             $out .= '<ul class="tabs"><li class="t'.$count.'">';
            } else {
                $out .= '<li class="t'.$count.'">';
            }   
            $out .= '<a class="t'.$count.' tab"><h10>'.get_the_title($ID).'</h10></a>'; 
            if($count == 3) {   
                $out .= '</li></ul>';
            } else {
                $out .= '</li>';
        } 
    ?>
<?php
    $count++;
    endwhile;
    print $out;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:16:45.393

尝试这个。笔记：

*   您只需要查询一次，但将帖子数设置为 3。`while`然后循环将为您循环遍历这些内容。
*   将`$count++`计数从 1 增加到 2 到 3。

    ```
    <?php
    $count = 1;
    $tabbedSportsQuery = new WP_Query(array(
        'cat' => get_query_var('cat'),
        'posts_per_page' => 3
    ));

    while ($tabbedSportsQuery->have_posts()) : $tabbedSportsQuery->the_post();
    ?>
        <div class="t<?php echo $count?>">
            <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_post_thumbnail(array(665,500), array ('class' => 'alignnone')); ?></a>
        </div>
    <?php
    $count++;
    endwhile;
    ?>

    <!-- The tabs -->
    <ul class="tabs">
    <li class="t1"><a class="t1 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>        </li>
    <li class="t2"><a class="t2 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>  </li>
    <li class="t3"><a class="t3 tab" ><h10><?php echo get_the_title($ID); ?></h10></a>  </li>
    </ul> 
    ```

# python - 在 Django 管理员中，如何在模型管理员上隐藏“保存并继续”和“保存并添加另一个”按钮？

> ID：13101281
> 
> 赞同：17
> 
> 时间：2012-10-27T15:00:05.137
> 
> 标签：python, django, django-templates, django-admin

我在 Django 管理员中有一个模型的工作流程，它与用户的工作流程非常相似。首先，我有一个包含基本字段的表单，然后是包含其余数据的第二个表单。

它与 auth.user 的工作流程相同

我需要删除“保存并继续”和“保存并添加另一个”按钮，以防止用户破坏工作流程。

我试图将其添加为 extra_context

```
extra_context = {
  'show_save_and_add_another': False,
  'show_save_and_continue': False
} 
```

并通过 ModelAdmin.add_view 或 ModelAdmin.change_view 传递它，但它不起作用。

这仅适用于一个模型，所以我不想从 submit_line.html 中删除

任何线索或替代方法？

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-28T05:39:56.647

除了它（有点尴尬）的黑客风格之外，您还可以直接覆盖模板标签。通常更推荐覆盖模板。

```
# put this in some app such as customize/templatetags/admin_modify.py and place the app
# before the 'django.contrib.admin' in the INSTALLED_APPS in settings

from django.contrib.admin.templatetags.admin_modify import *
from django.contrib.admin.templatetags.admin_modify import submit_row as original_submit_row
# or 
# original_submit_row = submit_row

@register.inclusion_tag('admin/submit_line.html', takes_context=True)
def submit_row(context):
    ctx = original_submit_row(context)
    ctx.update({
        'show_save_and_add_another': context.get('show_save_and_add_another', ctx['show_save_and_add_another']),
        'show_save_and_continue': context.get('show_save_and_continue', ctx['show_save_and_continue'])
        })                                                                  
    return ctx 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-27T21:24:03.057

据我所知，使用“开箱即用”选项是不可能的，但这就是我将如何去做你想做的事情。

我们关心的代码位是[这个模板标签](https://github.com/django/django/blob/master/django/contrib/admin/templatetags/admin_modify.py#L23)——这似乎会覆盖`show_save_and_add_another`并且`show_save_and_continue`不管你将它设置为什么。它还创建了一个全新的上下文并仅复制某些值（不清楚这样做的理由是什么），因此您必须对其进行修改以获得所需的内容。

所以：

1.  创建一个模板标签来复制默认标签的功能，或者通过重用现有标签（参见[okm 的示例](https://stackoverflow.com/a/13106661/23746)）或完全复制它。这里唯一的变化是它应该让你`show_save_and_add_another`远离原始上下文而不覆盖它，或者传递你自己的`really_hide_save_and_add_another_damnit`上下文变量。
2.  替换 change_form.html 以包含并使用您自己的模板标签，并替换`submit_row`为它。
3.  如果您选择使用额外的上下文变量，则更新 change_form.html，用另一个条件语句包装按钮。

然后，无论您选择什么选项，都使用以下内容更新您的 ModelAdmin（基于[Django 文档中的此](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.history_view)内容）：

```
class MyModelAdmin(admin.ModelAdmin):
    # ...
    def change_view(self, request, object_id, form_url='', extra_context=None):
        extra_context = extra_context or {}
        extra_context['show_save_and_add_another'] = False
        # or
        extra_context['really_hide_save_and_add_another_damnit'] = True
        return super(MyModelAdmin, self).change_view(request, object_id,
            form_url, extra_context=extra_context) 
```

**更新：**原始响应没有考虑到 submit_row 没有传递任何整个原始上下文。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-02T03:37:32.417

一种非常不同的方法是在 /static/admin/css/base.css 中添加以下内容

```
input[name="_addanother"],input[name="_continue"],input[name="_saveasnew"]{
    display: none;
} 
```

# django - Perl 有类似于 Django 自动管理员界面的东西吗？

> ID：13101283
> 
> 赞同：5
> 
> 时间：2012-10-27T15:00:13.980
> 
> 标签：django, web-services, perl, web-applications

我想知道是否有一个胶水模块来链接 DBIx::Class、Mojo 等。一起并自动生成表单、模式等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:55:28.167

Catalyst 具有非常出色的[AutoCRUD 。](https://metacpan.org/module/Catalyst%3a%3aPlugin%3a%3aAutoCRUD)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T16:58:14.803

有：

*   [`DBIx::Class::Schema::Loader`](http://search.cpan.org/~rkitover/DBIx-Class-Schema-Loader-0.07033/lib/DBIx/Class/Schema/Loader.pm)- 生成您的 DBIC 模型 - 它也可以处理 DB FK 约束以生成它们之间的关系，但我喜欢仅将其用于生成列
*   [`HTML::FormHandler`](http://search.cpan.org/~gshank/HTML-FormHandler-0.40016/lib/HTML/FormHandler.pm)并且[`HTML::FormHandler::Generator::DBIC`](http://search.cpan.org/~gshank/HTML-FormHandler-0.40016/lib/HTML/FormHandler.pm)我喜欢用于表单生成/处理

做一个[duckduckgo搜索perl CRUD](http://duckduckgo.com/?q=perl%20crud)，如果你想要快速的东西，可以从那里选择一个解决方案。

# java - 如何从这些分析器结果中得出结论

> ID：13101285
> 
> 赞同：0
> 
> 时间：2012-10-27T15:00:36.883
> 
> 标签：java, garbage-collection, profiling, heap-memory

我正在运行一个 mule 2.2.1 独立服务器并使用 yourkit 对其进行分析。我正在尝试分析分析器的输出，如果有人可以帮助阅读结果，我将不胜感激。

String 和 char[] 消耗了大约 99% 的堆空间，这正常吗？我应该调查一下吗？

PS Old Gen 使用 3.4 GB 堆空间中的 2.7 GB。我应该如何解释这个？它从来没有

在 GC 部分它告诉我它在 GC 中花费了 20% 的时间，但是我没有看到任何次要或主要的集合，我应该如何阅读这个？

![内存消耗](../Images/7a9936da42d77dce2f12d008e6770c77.png)

![GC 行为](../Images/81af3669eb0239211eb48a4680a39107.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:12:51.097

`About 99% of the heap space is consumed by String and char[] is this normal ?`

您应该打开参考屏幕并检查谁持有这些`Strings`和`char[]`. **如果是你的一些应用程序类，它肯定是不正常的。**在这种情况下，请重新访问您的代码并确保您的对象引用被释放以进行垃圾收集。

`The PS Old Gen consumes 2.7 GB of the total 3.4 GB heap space used.`

使用的这么多堆空间听起来并不正确。如果您有大量应用程序并通过设计缓存大量数据，那么它可能没问题。如果没有，您的对象引用应该为您提供清晰的`why`. 一旦你了解了原因（不需要的对象引用），然后清除它们。

**可能的内存泄漏：**

在非内存泄漏屏幕中，它不是很清楚，但看起来图最终（总体）上升了。请在更长的时间内查看您的数据，忽略峰值，并确保它不会上升。如果它正在上升，那么您的应用程序代码中可能存在一些内存泄漏。

希望这可以帮助。

# algorithm - 两个凸多边形的交集

> ID：13101288
> 
> 赞同：14
> 
> 时间：2012-10-27T15:00:49.330
> 
> 标签：algorithm, graphics, polygon

我有两个凸多边形。多边形被实现为其顶点的循环列表。如何找到这两个多边形的交点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T00:11:07.097

```
For each edge V1-V2 in the first polygon,
    Let H := Half-plane tangenting V1-V2, with the remaining
        vertices on the "inside".
    Let C := New empty polygon.
    For each edge V3-V4 in the second polygon,
        Let X := The intersection between V3-V4 and H.
        If V3 inside H, and V4 is outside H then,
            Add V3 to C.
            Add X to C.
        Else if both V3 and V4 lies outside H then,
            Skip.
        Else if V3 outside H, and V4 is inside H then,
            Add X to C.
        Else
            Add V3 to C.
    Replace the second polygon with C. 
```

这应该足够简单的使用了；10-20 个顶点，而不是重新计算每一帧。— O( *n* ² )

* * *

这里有几个链接：

*   [计算机图形学 I - 多边形裁剪和填充](https://www.cs.drexel.edu/~david/Classes/CS430/Lectures/L-05_Polygons.6.pdf)(pdf)
*   [rosettacode.org – Sutherland-Hodgman 多边形裁剪](http://rosettacode.org/wiki/Sutherland-Hodgman_polygon_clipping)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-18T09:10:26.833

您可以从两个多边形都是凸的这一事实中受益。有了这些知识，您可以使用以下扫描线算法实现*O(n)时间：*

找到两个多边形中的最高点。为简单起见，假设您没有水平边缘。创建构成多边形左右边界的边列表。

在扫下平面时，您存储 4 个边。`left_edge_C1`, `right_edge_C1`, `left_edge_C2`, `right_edge_C2`. 您不需要任何复杂的边缘来描边，因为它们只有四个。您可以通过迭代所有可能的选项来找到下一个事件点。

在每个事件点，一些边缘出现在它们的交点的边界上。基本上，在每个事件点，您都可以选择三种情况之一（见图）。

![在此处输入图像描述](../Images/3f5801617eb0cd44fdf41021155d1e73.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-18T19:02:17.437

除了@Yola 漂亮的平面扫描描述外， [*C 中的计算几何*](http://cs.smith.edu/~orourke/books/compgeom.html)第 7 章中还描述了一种线性时间算法。并且 C 和 Java 代码可用（在同一链接）。有几种棘手的退化情况，例如，当两个多边形在一点相交时，或者相交是一个线段。

# prolog - find_all 接收函数的使用方法？

> ID：13101289
> 
> 赞同：1
> 
> 时间：2012-10-27T15:00:53.263
> 
> 标签：prolog

有没有办法使用`findall`接收另一个函数作为参数的函数？

我的问题是

```
enemy_area(Enemys,[X|Tail],Area) :-
   findall(A,(member(A,Enemys),adjacc(X,A)),Area). 
```

（然后应该出现某种类型的递归）

其中`adjacc`函数应该从列表中返回一个点的所有相邻位置（这个列表中有几个点，我想要这些点的所有相邻点的并集）。

有办法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:49:16.430

如果你想要一个联合，你可以在 findall/3 之后尝试 sort/2。

这是一个例子：

```
adjacc(a,b).
adjacc(a,c).
adjacc(b,c).
adjacc(b,d). 
```

现在，如果您尝试：

```
?- findall(Y, (member(X,[a,b]),adjacc(X,Y)), L), sort(L, S). 
```

你应该得到：

```
L = [b,c,c,d],
S = [b,c,d] 
```

再见

# jquery - FitVids 和 Grid-A-Licious jQuery 插件

> ID：13101292
> 
> 赞同：0
> 
> 时间：2012-10-27T15:01:10.563
> 
> 标签：jquery, jquery-plugins

嗨——我在让[http://fitvidsjs.com](http://fitvidsjs.com)在 tumblr 主题中与[http://suprb.com/apps/gridalicious/](http://suprb.com/apps/gridalicious/)很好地配合时遇到了一些问题。估计是在某个地方发生了冲突。我对 jQuery 有点陌生，想知道是否有人能指出我正确的方向。干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:27:27.130

我认为这两个插件都在正常工作，视频只有一些高度问题。FitVids.JS 正在视频容器上方创建填充，并且视频没有高度。

尝试将此添加到您的 CSS 中：-

```
.fluid-width-video-wrapper { padding-top:0 !important; }
.fluid-width-video-wrapper, .fluid-width-video-wrapper iframe { height:300px; } 
```

我刚刚输入了一个自定义的高度值。您应该根据自己的喜好自定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T20:49:23.073

通过执行修复...

```
$('iframe').css('height', '100%'); 
```

# javascript - 将参数传递给javascript中的另一个函数

> ID：13101293
> 
> 赞同：2
> 
> 时间：2012-10-27T15:01:22.197
> 
> 标签：javascript, function, arguments

我正在尝试将调用第一个函数“fadesIn()”的按钮中的一些参数传递给另一个函数“check()”，该函数将继续检查第一个图像是否在第二个图像中消失之前已经褪色。传递我尝试使用的参数

```
function.apply(this, arguments); 
```

然后使用数组位置调用所需的参数。不幸的是，我无法让它在我的网页上运行。我只是在学习，所以我可能缺少一些东西......非常感谢任何帮助。

```
var time;

function fadesIn(args){
    fadeOut(arguments[1]);
    check.apply(this, arguments);
    check();
} 

function check(args){
    if(document.getElementById(arguments[1]).style.opacity < 0.1){
        fadeIn(arguments[0]);
        clearTimeout(time);
        return;
    }
    time=setTimeout(function(){check()},100);
}   

fadesIn('pic1', 'pic2'); 
```

天啊，你们反应很快。。谢谢。。

这是淡入淡出功能，它们来自于 youtube 上的开发 php

```
var fade_in_from = 0;
var fade_out_from = 10;

function fadeIn(element){
    var target = document.getElementById(element);
    target.style.display = "block";
    var newSetting = fade_in_from / 10;
    target.style.opacity = newSetting;
    // opacity ranges from 0 to 1
    fade_in_from++;

    if(fade_in_from == 10){
        target.style.opacity = 1;
        clearTimeout(loopTimer);
        fade_in_from = 0;
        return false;
    }

    var loopTimer = setTimeout('fadeIn(\''+element+'\')',50);
}

function fadeOut(element){
    var target = document.getElementById(element);
    var newSetting = fade_out_from / 10;
    target.style.opacity = newSetting;
    fade_out_from--;

    if(fade_out_from == 0){
        target.style.opacity = 0;
        target.style.display = "none";
        clearTimeout(loopTimer);
        fade_out_from = 10;
        return false;
    }

    var loopTimer = setTimeout('fadeOut(\''+element+'\')',50);
} 
```

我会根据你的建议玩一玩。

萤火虫的错误是

类型错误：document.getElementById(arguments[1]) 为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:07:09.483

```
check();
// and
setTimeout(function(){check()},100); 
```

似乎会引起一些问题。您的`check`函数需要 [至少] 两个参数，否则`document.getElementById(arguments[1])`将返回`null`并访问`style`引发异常的属性。

由于您根本只使用两个参数，因此最好不要使用`arguments`对象，而只需传递两个参数：

```
function fadesIn(pic1, pic2) {
    fadeOut(pic2);
    check(pic1, pic2);
} 

function check(argOne, argTwo){
    if(document.getElementById(argTwo).style.opacity < 0.1){
        fadeIn(argOne);
        clearTimeout(time);
        return;
    }
    time=setTimeout(function(){check(argOne, argTwo)},100);
} 
```

# c++ - UML 模型关系如何用 C++ 编码？

> ID：13101295
> 
> 赞同：0
> 
> 时间：2012-10-27T15:01:33.543
> 
> 标签：c++

这个问题在我的考试修订中，我想知道我是否走在正确的轨道上，它来自 C++ 入门教科书。

**UML 模型关系如何用 C++ 编码？**

公共继承允许您对 IS-A 关系建模，派生类能够重用基类的代码。另一种方法是使用包含，即一个对象拥有或拥有另一个对象的对象之间的关系。这模拟了 HAS-A 关系。

例如：

*   汽车拥有或拥有马达
*   当汽车被制造出来的时候，它的马达也被制造出来了
*   当 Car 被摧毁时，它的马达也被摧毁。

    ```
    class Car 
    {
        private:
            Motor *motor;
        public:
            Car()
            { 
                 motor = new Motor(); 
            }

            ~Car() 
            { 
                 delete motor; 
            }
    }; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:38:09.727

使用 C++ 构建组合关系比使用 Java 更容易。在最简单的情况下，包含的对象只是一个值成员：

```
class Car {
private:
  Motor motor;
  // No explicit construction/destruction required
}; 
```

当您想要包含`AbstractMotor`其动态类型由调用者使用依赖注入确定时，它会变得更加复杂。在这种情况下，要对组合进行建模，您可以使用`unique_ptr`：

```
class Car {
public:
  explicit Car(std::unique_ptr<AbstractMotor> motor): motor(std::move(motor)) { }
private:
  std::unique_ptr<AbstractMotor> motor;  // Still no explicit destruction required
}; 
```

`unique_ptr`确保您`Car`是 的唯一所有者`Motor`，并且它`Motor`的生命周期与对象绑定`Car`。

当一个对象拥有另一个对象时，尽量避免使用原始指针。使用`unique_ptr`，根本不需要实现重要的析构函数或使用`delete`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:24:03.513

我不会为您的答案添加太多内容。

就 IS-A 关系而言，**公共**继承是 C++ 中的工具（但在使用模板时会变得很棘手，并且并不总是按预期工作）。当涉及到 HAS-A 关系时，类成员就是解决方案。更准确地说，我会使用一个`Motor motor`成员（而不是指针），因为这更加强调了两者之间的关系。就指针而言`null`，成员将始终被构造和销毁。

HTH，
榆树

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:26:11.290

> 公共继承允许您对 IS-A 关系建模，派生类能够重用基类的代码。

这是一个普遍的误解。继承的重点是不能重用基类的代码**，**而是利用现有的代码来处理提供不同行为的基类。也就是说，至少在 OO 理论中是这样。

C++ 是一种强大的灵活语言，并且没有单一的 UML 到该语言的映射（这就是那些期望从 UML 生成代码的人会一次又一次失败的地方，UML 没有捕获一些细粒度的细节）。

**泛化**和**实现**都是通过 C++ 中的继承⁰实现的，尽管在其他语言中它们有所不同。例如，在 Java 中，*泛化*是通过继承（`extends`）*实现*的，通过接口实现（`implements`）实现。

**组合**这是*has-a*关系，通常通过类的*值成员*来实现。请注意，这不是唯一的实现¹。

**聚合**可以通过指针²和引用成员来实现，具体取决于其他标准，包括两个对象的相对生命周期以及引用是否可以重置为不同的对象。

**使用**没有明确建模，而是*发生了*。使用关系可以出现在接口中（接受或返回不同类型对象的函数*使用该类型）或实现（在其定义中**使用*不同类型的函数——实例化该类型的对象）一些目的）也使用类型。有些人认为这两个是*use*的不同变体，第一个比第二个更严格，因为它增加了从*使用*的类型到*使用*你的类型本身的外部代码的更紧密的耦合。

最后，使用模板还有其他多种选择。例如，语言中的和之间没有关系`std::vector<>::iterator`，`std::deque<>::iterator`但是它们在语言中建模了*RandomAccessIterator*的概念，而设计为与*RandomAccessIterator*一起使用的模板可以同时使用它们（例如，`std::sort`）。`std::sort`两者都是随机访问迭代器，关系是*该概念的***泛化**，尽管代码中根本不存在（如果他们最终为语言添加了一些*概念*的味道）。

* * *

^(0))一般来说，我们只会谈论*公共继承*，但情况并非如此。从不同类型公开继承的类型显然是在*泛化*/*实现*另一种类型/接口，但这也可以通过私有继承发生。在教授 OO 时不常见的一件事是一个类有**两个**独立的接口。一方面，有一个*公共*接口，您类型的用户通过该接口与您的对象进行交互。另一边有一个*虚拟的*接口，这是您的类型与扩展您的行为的其他类型之间的合同。C++ 中的一个常见习惯用法是 NVI 非虚拟接口，它试图通过强制分离来利用这一点：没有公共虚拟函数意味着公共和虚拟接口是完全隔离的。同样，类型 T 可能没有与基类的*公共 is-a*关系，尽管在内部它可以将基类的引用或指针传递给其他子系统。对于那些子系统，类型 T*是*基础。可以忽略受保护的继承，因为它被认为是无用的，没有激励性的使用示例。

^(1）)在某些情况下，由其他需求驱动，它可以用指针类型的成员来实现，只要它们在构造时分配并在封闭类型的销毁时释放。在某些情况下，继承被*滥用*来进行*组合*和执行大小优化（空基优化）。例如，a`std::map`可以从比较器继承而不是持有比较器（使用 SFINAE 来检测比较器何时是函子）。如果比较器的类型没有非常频繁的状态，编译器可以将比较器和第一个成员`std::map`放在同一个内存位置（即比较器不会占用任何空间）。

^(2))在一般意义上考虑术语*指针*，包括智能指针。

# google-maps - Google Maps v3 自动完成触发焦点

> ID：13101297
> 
> 赞同：4
> 
> 时间：2012-10-27T15:01:44.307
> 
> 标签：google-maps, google-maps-api-3

我尝试在我的脚本中嵌入谷歌地图自动完成功能。例如，要求 api 在德国查找“Neustadt”。有几个可能的匹配显示。为此目的，这被解雇了：

```
google.maps.event.trigger(document.getElementById('search'), 'focus', {} ); 
```

自动完成文本输入扩展并（欢呼）显示替代方案。但是，如果您单击一个，则不会发生任何事情。预期行为：显示所选地点。

怎么了？有什么已知的治疗方法吗？

任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:20:40.857

Google Maps API V3 中没有具有**'`focus'`**事件的对象。有了`google.maps.event.trigger()`，您只能触发[**记录的事件**](https://developers.google.com/maps/documentation/javascript/reference)。如果您尝试在 DOM 元素中触发事件，您可以直接这样做，即：

```
document.getElementById('search').focus(); 
```

# pointers - 在映射中的结构上调用指针方法

> ID：13101298
> 
> 赞同：8
> 
> 时间：2012-10-27T15:02:00.267
> 
> 标签：pointers, methods, map, struct, go

有类型 Company，它是一个结构，包含 Person 的映射，它们也是所有结构。

```
type Company struct {
    employees map[int]Person
}

type Person struct {
    [...]
} 
```

在将一些人分配给员工地图之后，我试图在每个人上调用一个指针方法。

```
func (company *Company) Populate(names []string) {
    for i := 1; i <= 15; i++ {
        company.employees[i] = Person{names[i - 1], [...]}
        company.employees[i].Initialize()
    }
} 
```

这悲惨地失败了，go-Compiler 抱怨我无法在*company.employees[i]*上调用指针方法，也无法获取*company.employees[i]*的地址。但是，将 Initialize-method 设置**为非指针方法**并让它**返回 person 的副本**，并通过使用再次将其分配给地图

```
company.employees[i] = company.employees[i].Initialize() 
```

工作，这并没有什么不同。

从来没有使用过指针，这让我非常恼火。地图不是一成不变的，它们会以任何一种方式进行修改，因此在地图中的实体上调用指针方法应该不是问题——至少在我的脑海中是这样。

如果有人可以向我解释我在这里做错了什么 - 或者纠正我的想法 - 我会很高兴。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T15:41:21.303

这里的问题是，为了调用指针方法，`employees[i]`需要获取的地址。根据[Go 规范](http://golang.org/ref/spec#Address_operators)：

> 操作数必须是可寻址的，即变量、指针间接或切片索引操作；或可寻址结构操作数的字段选择器；或可寻址数组的数组索引操作。作为可寻址性要求的一个例外，x 也可以是复合文字。

地图索引操作是不可寻址的。这是为了地图实现不需要保证值的地址不会改变。随着更多数据添加到地图中，出于效率原因，它可能会重新定位数据。

那么，您该如何解决呢？如果您有`map[int]*Person`，则无需获取地图中数据的地址，因为地图值已经是地址。

最后一点建议，`Person.Initialize()`不是非常惯用的 Go 代码。如果需要初始化类型，通常使用`NewPerson()`函数。该`NewPerson()`函数将返回一个初始化的 Person 结构或指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:21:40.737

例如，

```
package main

import "fmt"

type Person struct {
    Name string
}

func NewPerson(name string) *Person {
    return &Person{Name: name}
}

type Company struct {
    Employees map[int]*Person
}

func (c *Company) Populate(names []string) {
    c.Employees = make(map[int]*Person)
    for i := range names {
        c.Employees[i+1] = NewPerson(names[i])
    }
}

func main() {
    c := Company{}
    c.Populate([]string{"Peter", "Paul"})
    for k, v := range c.Employees {
        fmt.Println(k, *v)
    }
} 
```

输出：

```
1 {Peter}
2 {Paul} 
```

# assembly - MSP430 汇编代码中的“.bss”命令有什么作用？例如，“.bss beep_cnt,2”对变量 beep_cnt2 做了什么？

> ID：13101300
> 
> 赞同：3
> 
> 时间：2012-10-27T15:02:15.663
> 
> 标签：assembly, msp430

MSP430 汇编代码中的“.bss”命令有什么作用？例如，“.bss beep_cnt,2”对变量 beep_cnt2 做了什么？

```
.bss    beep_cnt,2              ; beeper flag
.bss    delay_cnt,2             ; delay flag 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T15:52:18.117

BSS 一词在汇编和 C 编程中是通用的，跨操作系统也一样。核心概念的东西，最初是“Block Started by Symbol”的首字母缩写词，带有一个开玩笑的版本的 Better Save Space。可以追溯到 1950 年代中期，由 IBM 704 汇编程序开始，并被 Fortran 采用并从那里抛弃。维基[百科的文章](http://en.wikipedia.org/wiki/.bss)有历史。更不用说过去 20 年来为摆脱全球企业所做的努力了。

所以它在启动时初始化为零的数据段中保留两个字节。

# php - PHP 日志文件颜色

> ID：13101302
> 
> 赞同：7
> 
> 时间：2012-10-27T15:02:35.730
> 
> 标签：php, linux, shell, logging

我正在编写一个 PHP 日志文件类，但我想为写入文件的行添加颜色。

我遇到的问题是颜色也会改变终端的颜色，我想要实现的是只改变写入日志文件的行的颜色。

```
class logClass extends Singleton {

    private function checkDate() {
        return date("onSj");
    }

    public function logNotice($str) {
        $this->write($str, "\033[33m");
    }

    public function write($string, $color) {
        $fileName = $this->checkDate();
        $handle = fopen('error.log', 'a');
        fwrite($handle, "$color" . date("Y-m-d H:i:s") . $string . "\n");
       fclose($handle);
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-27T15:43:20.047

您应该添加一个结束颜色标记序列。例如：`sprintf("\033[33m%s\033[0m", $text)`

这是从[https://github.com/kevinlebrun/colors.php获取的颜色代码列表](https://github.com/kevinlebrun/colors.php)

```
$colorFormats = array(
        // styles
        // italic and blink may not work depending of your terminal
        'bold' => "\033[1m%s\033[0m",
        'dark' => "\033[2m%s\033[0m",
        'italic' => "\033[3m%s\033[0m",
        'underline' => "\033[4m%s\033[0m",
        'blink' => "\033[5m%s\033[0m",
        'reverse' => "\033[7m%s\033[0m",
        'concealed' => "\033[8m%s\033[0m",
        // foreground colors
        'black' => "\033[30m%s\033[0m",
        'red' => "\033[31m%s\033[0m",
        'green' => "\033[32m%s\033[0m",
        'yellow' => "\033[33m%s\033[0m",
        'blue' => "\033[34m%s\033[0m",
        'magenta' => "\033[35m%s\033[0m",
        'cyan' => "\033[36m%s\033[0m",
        'white' => "\033[37m%s\033[0m",
        // background colors
        'bg_black' => "\033[40m%s\033[0m",
        'bg_red' => "\033[41m%s\033[0m",
        'bg_green' => "\033[42m%s\033[0m",
        'bg_yellow' => "\033[43m%s\033[0m",
        'bg_blue' => "\033[44m%s\033[0m",
        'bg_magenta' => "\033[45m%s\033[0m",
        'bg_cyan' => "\033[46m%s\033[0m",
        'bg_white' => "\033[47m%s\033[0m",
    ); 
```

示例用法：

`sprintf($colorFormats['green'], $someText)`

# imgur - 我可以根据我的匿名 api 密钥查看 Imgur 上所有上传的图像吗？

> ID：13101305
> 
> 赞同：3
> 
> 时间：2012-10-27T15:02:57.973
> 
> 标签：imgur

基本上，我已经对 imgur anon api 上传做了很多测试，并没有保存传回的 json 数据。我可以查看已发布内容的图库吗？现在我想了想，如果我可以通过 api 键查看图像，那么我无法在没有删除键的情况下删除图像，但仍然很好奇是否有办法查看我上传的所有内容（或者更好的是删除）。

# google-apps-script - 使用 javascript 提交表单以重定向

> ID：13101310
> 
> 赞同：0
> 
> 时间：2012-10-27T15:03:17.520
> 
> 标签：google-apps-script

直到上周，我可以使用以下 html 将用户重定向到另一个页面，但是从这个星期一开始，这段代码停止在 gas 中工作（仍然在 caja-playground 中工作，所以 caja 一定不是问题的根源）。

任何想法为什么会这样？

```
<html>
 <body>
   <form action="www.url.com" id='redirect' method='get'>
     <input type='hidden' name='type' value='hi'>
     <script>
       document.getElementById('redirect').submit();
     </script>
   </form>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T03:12:49.850

是的，出于安全考虑，他们故意删除了此功能。我也不喜欢它，看看我打开[的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1995)（已经关闭）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T04:25:29.833

现在，如果您使用 HtmlService 创建链接：

```
<a href="?data=12">Redierect to my app"</a> 
```

GAS 会将您的脚本网址添加到 href。

例如，表单提交是一个两次点击过程。

```
<script>
$('#btnSubmit').click(function(){
google.script.run
.withSuccessHandler(reloadDash)
.withFailureHandler(foundError)
.processWelcomeForm(this.parentNode)
  });

function reloadDash(e){
$('#btnSubmit').hide();
$('#redirectURL').show();
}

 function foundError(e){
  alert("Oops somthing broke: " + e);
  }

</script>

<html>
<form id="myForm">
<button id="btnSubmit" class="blue">Save Info</button>
<a  href="?setup=1" id="redirectURL" style="display:none">
<button id="btnSubmit" class="blue">Saved..continue on with this app</button>
</a>
</form> 
```

# nosql - 具有快速 Map/Reduce 的 NoSQL 解决方案

> ID：13101311
> 
> 赞同：2
> 
> 时间：2012-10-27T15:03:25.397
> 
> 标签：nosql

有 3 个高负载站点（每天 >400k 独立访问者），它们都紧密连接，具有相同的管理界面，共享用户帐户等...站点具有以下统计项目：访问者、独立访问者、用户路径、引荐来源、时间现场、页面、地区、国家和浏览器。统计信息由第 3 方服务汇总和处理，但该服务无法以方便的方式提供跨站点统计信息（大量手动检查和跟踪用户），因此我想构建一个统计解决方案，该解决方案将提供上述功能和还提供跨站统计。现在我有疑问：我应该用什么来存储？首先，我尝试使用良好的旧 MySQL，但完全失败了：性能和可伸缩性问题扼杀了整个想法。所以我开始研究 NoSQL 解决方案，但我没有

*   非阻塞映射/减少。Map/Reduce 不应该阻止收集写入（所以当管理员请求一些统计数据站点时仍然能够添加访问者记录）
*   易于扩展。
*   用户被计算在请求生命周期的开始，因此数据库的响应应该非常快

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T23:31:06.287

在从春季的一次会议中获取一些免费赠品时，我花了几分钟的时间观看了一个涵盖多个 mongoDB 用例的演示文稿，其中一个似乎适用的是[ServerDensity](https://blog.serverdensity.com/choosing-a-non-relational-database-why-we-migrated-from-mysql-to-mongodb/)的案例。他们的博客文章描述了一个类似的大容量日志系统，以及他们决定从 mySQL 迁移到 MongoDB 的原因，特别是为什么使用 mongoDB 而不是竞争对手。还有其他类似的演示文稿，例如[Eventbrite](http://blog.eventbrite.com/guest-post-why-you-should-track-page-views-with-mongodb/)、[Yotta](http://www.slideshare.net/jrosoff/realtime-analytics-with-mongodb-mongodb-meetup-nyc)、[Devmash](http://devsmash.com/blog/mongodb-ad-hoc-analytics-aggregation-framework)

还有一章（5 - Web Analytics using MongoDB），PHP and MongoDB Web Development Beginner's Guide，Rubayeet Islam，涵盖了构建这样一个系统。

# sql - SQL 查询中的 IF ELSE 条件

> ID：13101313
> 
> 赞同：1
> 
> 时间：2012-10-27T15:03:29.423
> 
> 标签：sql

我有一个 SQL 查询，其中我必须从不同的表中获取额外的参数，只有当主表中存在一个值时。我尝试过使用 if else 子句，但它从来没有用过。

SQL 如下所示：

```
SELECT  
   hist.I_PAYT_REF AS PAY_REF,
   hist.C_USERID AS USER_ID,
   IF(@hist.I_PAYT_REF IS NULL)
   BEGIN
      SELECT 
         PAYT.I_PAYT_REQ_SUM AS PAYMENT_FILE_ID
      Join 
         SP.TSP_CP_PAYT_RQ_DTL PAYT ON PAYT.I_PAYT_REF = hist.I_PAYT_REF
   END
FROM 
   sp.TSP_CP_HIST hist
WHERE 
   hist.C_HIST_TYPE ='V' 
```

我想要做的就是在`hist.I_PAYT_REF`不为空的情况下获取一个新参数。任何帮助将不胜感激。

谢谢，耶斯万斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:05:43.323

有时你可能需要那种 inline if，它是一个`CASE`子句，它的工作方式类似于 inline if :)

```
select
    hist.I_PAYT_REF as PAY_REF,
    hist.C_USERID as USER_ID,
    case
        when hist.I_PAYT_REF is null then PAYT.I_PAYT_REQ_SUM
        else null
    end as PAYMENT_FILE_ID
from sp.TSP_CP_HIST as hist
    left outer join SP.TSP_CP_PAYT_RQ_DTL as PAYT on PAYT.I_PAYT_REF = hist.I_PAYT_REF
where hist.C_HIST_TYPE ='V' 
```

但正如@jenson-button-event 所说 - 这里没有必要使用`case`- 如果`I_PAYT_REF`为 null 则不`left outer join`返回任何记录`SP.TSP_CP_PAYT_RQ_DTL`。所以你可以只写

```
select
    hist.I_PAYT_REF as PAY_REF,
    hist.C_USERID as USER_ID,
    PAYT.I_PAYT_REQ_SUM
from sp.TSP_CP_HIST as hist
    left outer join SP.TSP_CP_PAYT_RQ_DTL as PAYT on PAYT.I_PAYT_REF = hist.I_PAYT_REF
where hist.C_HIST_TYPE ='V' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:07:02.403

您只需要一个左连接，如果`I_PAYT_REF`为 null，则连接不会排除主`hist`记录，并且`PAYMENT_FILE_ID`无论如何都会返回 null。

```
SELECT  
    hist.I_PAYT_REF AS PAY_REF,
    hist.C_USERID AS USER_ID,
    PAYT.I_PAYT_REQ_SUM AS PAYMENT_FILE_ID
    FROM 
         SP.TSP_CP_HIST hist left join 
         SP.TSP_CP_PAYT_RQ_DTL PAYT ON PAYT.I_PAYT_REF = hist.I_PAYT_REF 
    WHERE hist.C_HIST_TYPE ='V' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:07:02.867

加入两个表并`CASE`在您的选择子句上应用语句。

```
SELECT  
    hist.I_PAYT_REF AS PAY_REF,
    hist.C_USERID AS USER_ID,
    CASE WHEN hist.I_PAYT_REF IS NULL
        THEN PAYT.I_PAYT_REQ_SUM
        ELSE I_PAYT_REF
    END as PAYMENT_FILE_ID
FROM    sp.TSP_CP_HIST hist
        INNER JOIN SP.TSP_CP_PAYT_RQ_DTL AS PAYT
              ON PAYT.I_PAYT_REF = hist.I_PAYT_REF
WHERE hist.C_HIST_TYPE ='V' 
```

# php - 带有 sprintf 的 smarty 自定义修饰符，将多个参数传递给函数

> ID：13101321
> 
> 赞同：0
> 
> 时间：2012-10-27T15:04:37.707
> 
> 标签：php, smarty, smarty3

我将如何扩展，`$insert`以便我可以将多个参数传递给函数，例如 `{"Sample text %s this more %s."|inject:$foo:$foo2}`.

目前它仅适用于 1 个参数。

```
/**
 * Smarty inject modifier plugin
 *
 * Type:     modifier<br>
 * Name:     inject<br>
 * Purpose:  sprintf with a IF empty wrapper
 *
 */
function smarty_modifier_inject($string, $insert)
{
    if(!empty($insert))
        return sprintf($string, $insert);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:37:56.907

您必须修改注入函数以采用任意数量的参数，如下所示：

```
function inject(){
    $args = func_get_args();
    if(count($args) > 1){
        return call_user_func_array('sprintf', $args);
    }
} 
```

# javascript - 不能在函数内的警报中使用变量

> ID：13101322
> 
> 赞同：0
> 
> 时间：2012-10-27T15:04:44.727
> 
> 标签：javascript, html

我将此代码用作我正在制作的游戏的一部分。但是为了找出导致这个错误的原因，我将这段代码放入一个新的 html 文档中。我正在尝试使用此代码：

```
<html>
<script type="text/javascript">
Difficulty = Normal
function ChangeGameMode()
{
  alert (Difficulty + ' game started ');
  }
</script>
<button type="button" class="StartButton" onclick="ChangeGameMode()">Start</button>
</html> 
```

当我单击按钮时，我没有收到警报。什么都没发生。

但是，如果我不在警报中使用难度变量 - 即：

```
alert ('Normal' + ' game started '); 
```

然后，当我将其用于警报时，它确实有效。我完全不知道是什么原因造成的，因此我一直在拔头发。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:06:24.590

您没有正确定义`Difficulty`变量。您需要为其分配一个有效值。`Normal`不是有效的 javascript 值。您需要将其用引号括起来：

```
<html>
<script type="text/javascript">
var Difficulty = 'Normal';
function ChangeGameMode() {
    alert (Difficulty + ' game started ');
}
</script>
<button type="button" class="StartButton" onclick="ChangeGameMode()">Start</button>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:08:16.477

Normal 必须用引号括起来：

```
var Difficulty = "Normal"; 
```

# mysql - SELECT LIMIT ORDER BY 从自动递增 id 中的任意列值开始

> ID：13101323
> 
> 赞同：0
> 
> 时间：2012-10-27T15:04:50.167
> 
> 标签：mysql, sql-order-by, limit

我是一个中间人。我可以处理客户端/服务器端 OK，但 CSS 和 db 让我很困惑。

我什至不确定如何提出这个问题。

在 LAMP 环境中，我想从视图中返回 LIMIT 20，按日期列排序。我无法弄清楚或放入正确的 google/stack 术语的问题是，我希望 LIMIT 以自动增量 ID 列中的任意值开头。

我可以通过将电话簿返回到 PHP 并从那里开始来对其进行哈希处理，但我不知道什么是最有效的：将它放在数据库或服务器端。我应该让 MySQL（如果可能的话）从 ORDERED 日期产生的某个点开始但基于自动增量 id 吐出 20 个值，还是应该将所有内容输出到服务器端，找到数组中的点我正在寻找并返回它和随后的 19 个值？

如果从数据库中返回它更有效，有人可以帮我选择吗？

像往常一样，向 MySQL 众神祈祷，让我从 db 绝望中的无知中解救出来。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:57:23.610

你需要使用

```
SELECT * FROM table WHERE id > desired_id ORDER BY date DESC LIMIT 20 
```

`desired_id`自动增量 ID 列中您想要的任意值在哪里。

这意味着，该数据库将找到所有 id 高于的值，`desired_id`并按降序对它们进行排序，并且只返回前 20 行。

# scala - 当“资源”或“webapp”更改时，SBT 用 ~ 重新运行命令

> ID：13101326
> 
> 赞同：0
> 
> 时间：2012-10-27T15:05:06.227
> 
> 标签：scala, sbt, xsbt-web-plugin

我正在使用 ~;container:start; 容器：重新加载 / 使用 xsbt-web-plugin。重新加载效果很好，只是在我更改静态资源、页面等时不会发生。

我如何将它们包括在内以更改监视器，有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:18:26.330

watchSources 由于某种原因不起作用，即使目录已成功添加到那里

对我有用的是

编译中的 unmanagedResourceDirectories <+= (baseDirectory) { _ / "src/main/webapp" }

# networking - 数据如何通过网络发送？

> ID：13101330
> 
> 赞同：0
> 
> 时间：2012-10-27T15:05:46.500
> 
> 标签：networking, send, packets, transmission

数据如何通过网络实际发送。我知道它是以十六进制传输的，但是原始十六进制等效于发送的数据吗？

我的意思是，如果我想发送一个简单的 ASCII 文本 "hello" ，是发送 'h' 'e' 'l' 'l' 'o' 的十六进制等价物还是进行任何编码或加密。

它也会做'zip'之类的事情..我的意思是它会在“hello”中找到2'l's并以某种方式发送任何等价物吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T05:24:39.663

它不是以十六进制发送的。它以二进制形式发送。时期。没有编码。没有加密。没有拉链。你发送的就是它发送的。

# opencv - 计算 cvIntegral 后的奇怪图像？

> ID：13101331
> 
> 赞同：0
> 
> 时间：2012-10-27T15:05:51.437
> 
> 标签：opencv

我试图了解 cvIntegral 的使用。输出图像的行为是否像附加的图像？是的，当手动计算时，左上部分的值确实很小（黑色），并且随着它进入右下角（更亮）。没有标准化 (0-255)，图像是完全白色的，然后是黑色的。

![原始图像](../Images/c5732bafb9503d0b84ac52d2ae925592.png)

原始图像

![整体形象](../Images/847352e647dda378898db6f931761197.png)

积分图像归一化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:52:51.783

实际上，这取决于您要计算哪种类型的积分，因为它们分为三种类型 - 来自[文档](http://opencv.willowgarage.com/documentation/miscellaneous_image_transformations.html#integral)：

> 该函数为源图像计算一个或多个积分图像，如下所示：![在此处输入图像描述](../Images/7b7c600093d5bb465ad7acbeb19ced3f.png)
> 
> ![在此处输入图像描述](../Images/a5fdeb8eef8964889bd98ed12bb03718.png)
> 
> ![在此处输入图像描述](../Images/8cc72535e845dfa0b5e54e5900c7d4d2.png)

如果您谈论*第一种类型的积分*，那么这只是矩形中所有像素的总和`[(0,0),(x,y)]`。我的积分图像输出是这样的： ![在此处输入图像描述](../Images/e8efc9e95e66d1b81ceb4123260ad566.png)

什么似乎在逻辑上是正确的。

使用归一化 ( `255/max`) 我看到与您的输出相同的图像。

**更新：** 似乎我得到了您的错误 -`imwrite`图像质量下降（可能），因为集成图像的某些值太大（大于 255），但`imshow`正常显示（该图像只是屏幕截图）。因此，只需像您一样使用规范化。这是代码：

```
Mat src = imread("moon.jpg", CV_LOAD_IMAGE_GRAYSCALE);
Mat int1, norm;

integral(src, int1);

double max;
minMaxIdx(int1, 0, &max);
int1.convertTo(norm, CV_8UC1, 255/max);

imshow("simple output", int1);//shows normally
imshow("normalized output", norm);
//imwrite("output.jpg", int1);// looses quality
waitKey(); 
```

# scala - 优化对不可变对象的冗余调用

> ID：13101332
> 
> 赞同：2
> 
> 时间：2012-10-27T15:06:06.673
> 
> 标签：scala, jvm

考虑这个scala代码

```
val word = str.toLowerCase
val chars = word.distinct.sorted 
```

然后稍后

```
//chars.map(c => str.toLowerCase.count(_ == c))
chars.map(c => word.count(_ == c)) 
```

我创建了`val word`以避免为地图创建新的小写字符串。但是，理论上，Scala 编译器可以优化掉它吗？它知道字符串是不可变的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T15:24:47.080

如果编译器不知何故知道它`.toLowerCase`总是返回相同的结果并且没有任何副作用，它可以`.toLowerCase`将同一对象的多次调用优化为一次调用。但是，它不知道这一点，在你的例子中它甚至不是真的。例如，根据使用的默认语言环境，`"I".toLowerCase`可能是`"i"`或`"ı"`。由于默认语言环境可以在调用之间更改，因此这种优化将无效。

# android - setVisibility 仅在 ImageView 上有效一次

> ID：13101333
> 
> 赞同：1
> 
> 时间：2012-10-27T15:06:07.360
> 
> 标签：android, gridview, view, imageview

我试图使 GridView 中的视图变得不可见和可见。我第一次调用 INVISIBLE AND VISIBLE 时可以使其工作，但随后的尝试不起作用。

```
 private void flashImageSeq(){
    int i = 0;
    while (i < 9){
        animate(i);         
        ++i;
    }
}

private void startThread() {
  t = new Thread() {
    public void run () {
       try {
        sleep(500);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
  };

  t.start();
}

private void animate(int position){
    gridview.findViewById(R.id.gridview);
  // imgView is defined in View getView for Adapter code not shown
    ImageView imgView = (ImageView)gridview.getChildAt(position);
    imgView.setVisibility(ImageView.INVISIBLE);
  startThread();
  imgView.setVisibility(ImageView.VISIBLE);
} 
```

第二次调用 flashImageSeq() 不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:05:16.617

尝试

```
private void flashImageSeq(){
int i = 0;
while (i < 9){
    animate(i);         
    ++i;
}
}

private void startThread(final ImageView im) {
  t = new Thread() {
    public void run () {
       try {
        sleep(500);
        yourActivity.this.runOnUiThread(new Runnable() {

            public void run() {

            im.setVisibility(ImageView.VISIBLE);

            }
        });
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }
  };

  t.start();
}

private void animate(int position){
    gridview.findViewById(R.id.gridview);
  // imgView is defined in View getView for Adapter code not shown
    ImageView imgView = (ImageView)gridview.getChildAt(position);
    imgView.setVisibility(ImageView.INVISIBLE);
  startThread();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:19:35.020

您正在创建一个休眠 500 毫秒的新线程，但您的两个 setVisibility 调用发生在一毫秒内。

您应该使用`Thread.sleep(500)`实际暂停主线程，但这确实是不好的做法！

更好地创建一个运行循环的线程，并确保 setVisi 调用是使用“runOnUIThread”执行的，因为另一个答案显示它

# algorithm - 数组中最大元素的最小化

> ID：13101338
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:06:57.833
> 
> 标签：algorithm, dynamic-programming, greedy, divide-and-conquer

您有一个大小`n`为正整数的数组，您最多可以在其上执行以下操作`N`：

*   选择一个子数组并将其元素值减少`k`（`k`必须小于子数组的最小值）。
*   这种操作的代价是子数组的大小乘以`k`。
*   这些操作的总成本不得大于`M`。
*   `N`M 可以非常大。

你能给我一个有效的算法来最小化这个数组中的最大元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:10:31.357

如果我们可以创建一个函数来检查是否可以达到给定的最大值，那么我们可以使用**对最大值的二进制搜索**来找到解决方案。（每次可以达到最大值时，减少它，如果它不能实现，增加它）。

检查功能可能如下所示：

```
def check(array, M, i, j, max) 
```

如果有可能以 M 成本将 i 和 j 之间的所有内容减少到最大值以下，这将返回 true。我们从`i=0, j=len(array), max=max_guess`

你现在有很多选项来做内部检查。你可以试试：

```
possible = check(M/2, i..i+j/2, ..) and check(M/2, i..i+j/2,..)
return possible 
```

但是将 M 分成两半并不是一个好主意，因为一半可能需要更多。也许您可以使用二进制搜索来确定如何将 M 分成两半。但是，也许甚至不可能将数组分成两半，因为某些小节可能会超过两半，所以也许您需要在其他地方拆分？或者您可能需要尝试 i,j 的所有组合进行拆分。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:07:29.873

假设我们选择 x 作为缩减数组中的最大数，我们可以取数组并将其所有较大的元素减少到 x 并计算这些操作的成本及其数量，然后我们可以尝试贪婪地加入这些中最便宜（成本）的子集元素，直到操作数小于 N。如果成本大于 M，则缩减数组中的最大元素必须更大。对于 x，我们可以轻松地对它进行二分查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T21:14:01.927

老实说，我很怀疑找到这个问题的最佳解决方案是 NP 难的。我承认这并不是特别有帮助，但它可能会让您对如何处理这是其中一部分的更大问题有不同的看法。

# php - PHP/SQL 中的登录和 if / else 语句？

> ID：13101342
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:07:08.473
> 
> 标签：php, sql, login

我有一个登录脚本。它检查我的数据库的用户表以查看这些值是否存在。我在表中添加了一个“close_account”列来控制是否允许用户登录。如果“close_account”=1，他们无法登录，如果“close_account”=0，那么他们可以登录。

我已经有一个 if / else 语句显示使用的登录凭据是否无效（即它们在数据库中不存在）所以我需要额外检查“close_account”标志，以便我可以向告诉他们他们的帐户已被禁用的用户。

这可能吗？

这是我现有的代码：

```
// Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);

redirect_to("dashboard.php");
            } else {
                // email/password combo was not found in the database
                $message = "<div class=\"infobox\"><strong>Email/Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:35:30.933

好的，这是我的答案

```
$query = mysql_query("select * from ptb_users where WHERE email = '".$_POST['email']."' and password = '".$_POST['password']."' ")
while($check_account = mysql_fetch_array($query))
{
  $email_check = $check_account['email'];
  $pass_check = $check_account['password'];//whatever if this is hashed_password i dunno
  $blocked_acc = $check_account['close_account'];
}   
if($block_acc == 1) //or what ever your specs in the database are
{
 echo "Your Account has been blocked";
}
else if($email_check != $_POST['email'] && $pass_check != $_POST['password'])
{
 echo "Invalid E-mail or Password";
} 
```

[http://www.jaywebtechnologies.co.cc](http://www.jaywebtechnologies.co.cc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:20:36.243

用下面的方式重写你的逻辑。

```
 //confirm_query($result_set);
 if(mysql_num_rows($result_set) > 0) {
       redirect_to("dashboard.php");
  } else {
            // email/password combo was not found in the database
            $message = "<div class=\"infobox\"><strong>Email/Password combination incorrect.</strong><br />
                Please make sure your caps lock key is off and try again.</div>";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:22:23.793

在查询的 where 子句中没有 close_account ，然后在验证详细信息正确时对其进行测试。

```
$q = "SELECT id, email, close_account 
        FROM ptb_users 
       WHERE email = '$email'
         AND password = '$hashed_password'";

$results = mysql_query($q);
$user    = mysql_fetch_assoc($results);

if(!empty($user))
{
    if($user['close_account']) // If close_account is 1
    {
        // Display error, showing that account is closed.
    }
    else // If close_account is 0
    {
        redirect_to('dashboard.php');
    }
}
else 
{
    // Display error, showing that bad credentials were entered.
} 
```

# android - 从文本视图中读取标签

> ID：13101347
> 
> 赞同：0
> 
> 时间：2012-10-27T15:07:27.287
> 
> 标签：android

我正在使用以下代码在 textview 上设置标签

```
 TextView tv = (TextView) findViewById(R.id.textView1);
tv.setText("New Item");
tv.setTag("1"); 
```

如何读取为此设置的标签值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:16:57.533

您也可以使用键设置标签，以便您可以使用一个组件设置多个标签

像

```
tv.setTag(R.id.textView1, "1"); 
```

同时让你可以做

```
tv.getTag(R.id.textView1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:12:24.390

如果有 setTag 也应该有 getTag，使用：

```
tv.getTag(); 
```

# html - 在 Yii 小部件中生成 HTML 内容

> ID：13101349
> 
> 赞同：1
> 
> 时间：2012-10-27T15:07:37.173
> 
> 标签：html, widget, yii

我正在尝试制作一个 Yii 扩展来从表格中的 feed 的 url 存储中获取项目，然后在网页中显示它们。我对框架有点困惑，经过大量搜索后，我认为最好的选择是使用小部件。我的问题是所有要显示的项目都存储在小部件类的数组中。如何创建 html 内容来显示它们？我发现的只是调用 render() 方法来显示自定义视图，但我看不到从该视图访问我的数组的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:22:09.287

您需要将数据（在本例中为您的数组）传递给视图。因此，假设您使用的是小部件（扩展 CPortlet），如下所示：

```
<?php
Yii::import('zii.widgets.CPortlet');
class MyWidget extends CPortlet
{
    public $my_array;

    protected function renderContent(){   
        $this->render("my_view",array(
            "my_array"  =>  $my_array
        ));
    }
} 
```

然后在您的视图中（my_view，将在您的组件/视图文件夹中）您可以像这样访问您的数组

```
$my_array[0] 
```

当调用你的小部件时（在另一个视图中），你可以像这样传递你的数组：

```
$this->widget("MyWidget",array("my_array" => $my_array)); 
```

希望这能回答你的问题

# uiscrollview - MonoTouch：带有 InputView DatePicker 的 UITextField 被键盘横向隐藏

> ID：13101351
> 
> 赞同：1
> 
> 时间：2012-10-27T15:07:49.980
> 
> 标签：uiscrollview, xamarin.ios, landscape, uikeyboard

我有一个 UITextField 我放在我的屏幕底部：

![UITextField 屏幕底部](../Images/f64fc1073175e264e9b4f79e24ebb55d.png)

通常这个文本字段会被键盘隐藏，但我遵循了以下组合：

*   [http://spazzarama.com/2011/09/07/monotouch-auto-scroll-uitextfield-or-other-views-hidden-by-keyboard/](http://spazzarama.com/2011/09/07/monotouch-auto-scroll-uitextfield-or-other-views-hidden-by-keyboard/)
*   [http://www.ashokkarunakaran.com/2012/09/08/monotouchdatepicker/](http://www.ashokkarunakaran.com/2012/09/08/monotouchdatepicker/)

并创建了我的 UITextField ，当它被选中时会显示一个日期选择器，并且 UITextField 会自动向上滚动：

![带有 DatePicker 的 UITextField](../Images/d780c3800e27f471f68c991a20c6ad2a.png)

这很好用，直到我将手机旋转到横向。

一旦在风景中，我的 UITextField 被推到屏幕上太远，不再看到它。

![横向 UITextField DatePicker](../Images/df41924894fcd96590d899fa9a34dc2f.png)

在代码中，我订阅了 UIKeyboard.WillShowNotification 并在下面调用 KeyboardWillShowNotification：

```
protected virtual void KeyboardWillShowNotification (NSNotification notification)
        {
            UIView activeView = KeyboardGetActiveView();
            if (activeView == null)
                return;

            UIScrollView scrollView = activeView.FindSuperviewOfType(this.View, typeof(UIScrollView)) as UIScrollView;
            if (scrollView == null)
                return;

            RectangleF keyboardBounds = UIKeyboard.FrameBeginFromNotification(notification);

            UIEdgeInsets contentInsets = new UIEdgeInsets(0.0f, 0.0f, keyboardBounds.Size.Height, 0.0f);
            scrollView.ContentInset = contentInsets;
            scrollView.ScrollIndicatorInsets = contentInsets;

            // If activeField is hidden by keyboard, scroll it so it's visible
            RectangleF viewRectAboveKeyboard = new RectangleF(this.View.Frame.Location, new SizeF(this.View.Frame.Width, this.View.Frame.Size.Height - keyboardBounds.Size.Height));

            RectangleF activeFieldAbsoluteFrame = activeView.Superview.ConvertRectToView(activeView.Frame, this.View);
            // activeFieldAbsoluteFrame is relative to this.View so does not include any scrollView.ContentOffset

            // Check if the activeField will be partially or entirely covered by the keyboard
            if (!viewRectAboveKeyboard.Contains(activeFieldAbsoluteFrame))
            {
                // Scroll to the activeField Y position + activeField.Height + current scrollView.ContentOffset.Y - the keyboard Height
                PointF scrollPoint = new PointF(0.0f, activeFieldAbsoluteFrame.Location.Y + activeFieldAbsoluteFrame.Height + scrollView.ContentOffset.Y - viewRectAboveKeyboard.Height);
                scrollView.SetContentOffset(scrollPoint, true);
            }
        } 
```

两个补充功能：

```
protected virtual UIView KeyboardGetActiveView()
        {
            return this.View.FindFirstResponder();
        }

public static UIView FindFirstResponder (this UIView view)
    {
        if (view.IsFirstResponder)
        {
            return view;
        }
        foreach (UIView subView in view.Subviews) {
            var firstResponder = subView.FindFirstResponder();
            if (firstResponder != null)
                return firstResponder;
        }
        return null;
    }

    public static UIView FindSuperviewOfType(this UIView view, UIView stopAt, Type type)
    {
        if (view.Superview != null)
        {
            if (type.IsAssignableFrom(view.Superview.GetType()))
            {
                return view.Superview;
            }

            if (view.Superview != stopAt)
                return view.Superview.FindSuperviewOfType(stopAt, type);
        }

        return null;
    } 
```

BitBucket 上有完整源代码：[https ://bitbucket.org/benhysell/uitextfielddatepicker](https://bitbucket.org/benhysell/uitextfielddatepicker)

关于我可能做错了什么的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:25:11.647

显示键盘时，您应该修改视图的高度。

像这样的东西：

```
var frame = View.Frame;
frame.Height -= keyboardHeight;
View.Frame = frame; 
```

获取键盘高度：

```
bool isLandscape = InterfaceOrientation == UIInterfaceOrientation.LandscapeLeft || InterfaceOrientation == UIInterfaceOrientation.LandscapeRight;
var keyboardFrame = UIKeyboard.FrameEndFromNotification (notification);
var keyboardHeight = isLandscape ? keyboardFrame.Width : keyboardFrame.Height; 
```

只要您`UITextField`的 's`AutoResizingMask`设置为居中，那么您的 UI 应该看起来正确。

# playframework - 玩 2.0.4 包罗万象的路线总是命中

> ID：13101352
> 
> 赞同：1
> 
> 时间：2012-10-27T15:07:55.430
> 
> 标签：playframework, routes, playframework-2.0

在我的路由文件的末尾，我放置了一个包罗万象的路由来捕获以前未捕获的请求并将其传递给我自己的路由器（用于进一步处理）：

```
GET    /*nameUrl      controllers.Application.router(nameUrl: String) 
```

当然，在那条线之前还有许多其他路线。对我来说，最大的惊喜是每次都击中所有内容，即使之前的路线也被击中，所以如果我打开地址`domain.tld/test`，它会在控制台中显示我的两个日志`Test action hit!`AND `Custom router hit!`。有一个简化的示例：

```
public static Result test() {
    Logger.debug("Test action hit!");
    return ok();
}

public static Result router(String nameUrl) {
    Logger.debug("Custom router hit!");
    return ok();
} 
```

路线（按此顺序）

```
GET    /test          controllers.Application.test
GET    /*nameUrl      controllers.Application.router(nameUrl: String) 
```

我想得到什么：

我想用我的路由器获取文章的 url，即`domain.tld/category_1/article_title`前面没有任何前缀，当然，如果我将 catch all 更改为稳定的东西，它将不再受到双重打击：

```
GET    /news/*nameUrl      controllers.Application.router(nameUrl: String)
domain.tld/news/category_1/article_title 
```

但是我真的很想避免`/news/`分段。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T20:30:46.853

我重复了一遍，Chromium（谷歌浏览器的核心）也有同样的问题，但火狐没有。

我使用 Global.java 分析了请求。

```
public class Global extends GlobalSettings {
    @Override
    public Action onRequest(Http.Request request, Method method) {
        Logger.info("request-path: " + request.path());
        return super.onRequest(request, method);
    }
}
//output:
[info] application - request-path: /favicon.ico 
```

对于每个 GET /test 请求，Chromium 都会尝试加载网站图标。

因此，在 conf/routes 中包含以下内容：

```
GET  /favicon.ico   controllers.Assets.at(path="/public", file="favicon.ico") 
```

# database - 我在哪里可以下载英文到中文字典数据库？

> ID：13101353
> 
> 赞同：1
> 
> 时间：2012-10-27T15:07:55.813
> 
> 标签：database

我在哪里可以下载英文到中文字典数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:14:38.490

CEDict 是一个相当大的汉英词典数据库...根据您的工作，反向使用它可能就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:12:30.560

只是谷歌它...，这是一个[http://www.mdbg.net/chindict/chindict.php?page=cedict](http://www.mdbg.net/chindict/chindict.php?page=cedict)

另一个：[http ://hua.umf.maine.edu/China/database.html](http://hua.umf.maine.edu/China/database.html)

# eclipse - SWT：更改列下所有单元格的颜色

> ID：13101355
> 
> 赞同：1
> 
> 时间：2012-10-27T15:08:03.613
> 
> 标签：eclipse, colors, swt

![在此处输入图像描述](../Images/25ab2d4de29ce8db391dcf2569c077eb.png)

我在网上搜索过，但没有看到任何答案。你如何改变一列下所有单元格的颜色，就像图片中的第一列一样？如您所见，第二列和第三列的阴影较深。现在我不相信改变 TableItem 的背景会解决这个问题，因为它只会改变那个单元格的颜色，效果可以在第一行看到。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:56:16.163

如果您使用的是，则可以使用描述列索引`Table`的方法为单元格着色。要为整列着色，您必须遍历所有s 并为该列设置颜色。[`TableItem#setBackground(int, Color)`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FTableItem.html)`int``TableItem`

* * *

如果您使用的是（我会推荐），您可以在s方法`TableViewer`中设置颜色。只需调用第一列。您可以通过 获取列索引。`LabelProvider``public void update(ViewerCell cell)`[`ViewerCell#setBackground(Color)`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ViewerCell.html#setBackground%28org.eclipse.swt.graphics.Color%29)[`ViewerCell#getColumnIndex()`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/ViewerCell.html#getColumnIndex%28%29)

# html - 填写电子邮件客户端的 HTML 表单？

> ID：13101356
> 
> 赞同：3
> 
> 时间：2012-10-27T15:08:09.293
> 
> 标签：html, email, forms, http-post

为了从我的客户那里获得反馈，我向他们发送了一封电子邮件，其中包含一个 html 表单。我的客户收到 html 电子邮件，填写信息并点击提交按钮。问题是我在我的服务器上收到了很多不包含任何内容的帖子。甚至没有预先填写的跟踪代码。这让我相信电子邮件客户端没有正确发布表单数据。任何人都可以确认这一点，或者让我知道我是否做错了什么。我会说大约 3/5 的帖子不包含任何数据。

```
<p>Son, please fill this feedback</p>

<form action="http://www.example.com" method="post">
    <imput type="text" name="feedback" value="type your cries here" />
    <input type="hidden" value="{random}" name="eviltrackingcode" />
    <input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:20:51.103

与 Web 浏览器相比，电子邮件客户端的 HTML 很糟糕。

我建议在邮件中使用指向您的表单的链接（该链接可以包含生成的表单也将包含在响应中的唯一标识符）。

**编辑：**

根据您的受众，您可能希望将表单嵌入到 IFrame 中（除了使用指向它的链接）。IFrame 有合理的支持（但没有 Gmail 网络客户端或黑莓）： http: [//www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)

# php - 通过PHP为现有的.pdf文件添加背景水印到pdf文件？

> ID：13101357
> 
> 赞同：2
> 
> 时间：2012-10-27T15:08:11.433
> 
> 标签：php, linux, windows, pdf

我有一个客户的请求，要求我处理他们上传的 pdf 文件。他们上传 pdf 文件，我在 pdf 文件中搜索某些模式，并且应该在某些条件下添加特定的水印。有没有办法通过php打开pdf文件，添加背景图片并在上传时保存？

示例：上传的 pdf 文件包含单词“Hello”..（为 pdf 页面添加笑脸背景）

上传的 pdd 文件包含“嘿！” （添加公司徽标作为 pdf 页面的背景）

非常感谢您的意见！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:09:44.650

是的，你可以使用 FPDF 和这个附加组件[http://www.fpdf.de/downloads/addons/9/](http://www.fpdf.de/downloads/addons/9/)

# git - 一个提交可以是它自己在 git 中的祖先吗？

> ID：13101359
> 
> 赞同：4
> 
> 时间：2012-10-27T15:08:18.940
> 
> 标签：git

是否可以像下面的 ascii-art 那样构建一个循环的 git 历史？

```
A (root)
|  H<-G
| /    \
VL      \
C        F
 \      /
  \    /
   D->E 
```

和`C`的合并提交在哪里，但它本身是`A``H``H``C`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:08:55.647

每个提交 ID 都是包含其直接祖先的提交 ID 的 SHA-1 哈希，因此通常您需要知道祖先的 ID，然后才能找到可以作为其后代的 ID。因此，没有地方开始构建循环。

能够构建一个短周期结构（其中“短”意味着在周期中提交少于 2^64 次）将构成正在使用的散列函数的中断。

众所周知，SHA-1 在抗碰撞性方面被破坏，并且*可以想象*，这种破坏背后的技术可以适应构建循环。但目前尚不清楚如何做到这一点，而且这肯定不仅仅是将一些现成的密码分析组件塞在一起的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T20:18:57.210

正如 Henning Makholm 上面所指出的，提交包括其父级的 SHA1 哈希码，并且有已知的技术可以生成两个具有相同 SHA1 哈希值的文档，这些文档只需要多个高端 cpu 年即可工作。

没有考虑到的是，这些技术依赖于受控文档修改：给定两个当前文档（带有它们特定的哈希码），您可以计算修改，使生成的哈希码对彼此“更接近”一些指标。但是，从[Find Collisions in the Full SHA-1](http://people.csail.mit.edu/yiqun/SHA1AttackProceedingVersion.pdf)中，“请注意，消息修改应保留所有消息条件”。

这意味着计算那些特定文档中的特定位修改，而 git 提交则无法做到这一点，因为任何修改也会随机化 160 个其他位。对相互依赖的 git 提交哈希没有可预测的修改，而已知的技术几乎都无法走出起点。

即使这并不能描述您所要求的具体任务是多么冒险：它不是搜索具有相同哈希码的两个文档，而是搜索两个文档，*每个文档都包含另一个哈希码*，（这也将是他们自己的，如果你设法使它们相同）*在一个特定的地方*。据我所知，还没有关于这个问题的研究。

因此，我认为真正的答案是“没有人曾经尝试过，更不用说最不知道如何通过任何不太可能发生的事情来实现这一点”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:14:53.417

没有。

Git 形成一个有向无环图，所以你不能有循环。

# javascript - Javascript正则表达式获取大括号之间的内容（里面有大括号）

> ID：13101362
> 
> 赞同：1
> 
> 时间：2012-10-27T15:09:22.117
> 
> 标签：javascript, regex, expression, brackets

想想这样的字符串：

```
public function test(data)
{
    if (1 == 2)
    {
        alert("Wtf?");
    }

    switch (data)
    {
        case 'test':
            alert("Test");
        break;
    }
} 
```

我需要解析该字符串，以便我拥有该函数的主体（内容）。

我已经让我的 reg exp 工作了，所以我有函数的内容，但是当有一个结尾 }。正则表达式停止，内容将如下所示：

```
if (1 == 2)
{
   alert("Wtf?"); 
```

我真的希望有人可以帮助我..

这是我用于拆分此字符串的 Reg Exp：

```
var test = classContent.replace(/(?:(private|public)\s*)function\s*([a-zA-Z0-9_]+)\s*\(([a-zA-Z0-9_\,\s]*)\s*\)\s*{([^}]+)\}/gi, function(a, b, c, d, e) {

    classMethods[c] = {
        visibility : b.trim(),
        params : d.trim(),
        content : e.trim()
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:13:13.667

对于正则表达式来说，这通常是一个太难的问题。他们不能真正很好地处理嵌套结构。一些风格支持递归模式，但在这种情况下，即使这样也太过分了。对您给定问题的快速解决方法是：

```
/(?:(private|public)\s*)function\s*([a-zA-Z0-9_]+)\s*\(([a-zA-Z0-9_\,\s]*)\s*\)\s*{(.+)\}/gis 
```

这允许大括号（包括大括号）之间的任何字符，并且由于`+`是贪婪的，这将一直到最后。

但是，如果您的字符串可以包含多个函数，这将为您提供从第一个函数名称到最后一个 close 的所有内容`}`。我有一种感觉，你就是这种情况，因为你使用了全局修饰符`g`。

如果是这种情况（或无论如何），请考虑使用不同的方法（即，JavaScript 解析器或自己分析字符串并计算大括号）。也许[这个问题](https://stackoverflow.com/questions/2554519/javascript-parser-in-javascript)会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:23:22.600

Javascript 不提供 PCRE 递归参数`(?R)`。

查看[Steve Levithan 的博客](http://blog.stevenlevithan.com/archives/javascript-match-nested)，他编写了[XRegExp](http://xregexp.com/)，它替换了大部分缺失的 PCRE 位。还有一个[匹配递归](http://xregexp.com/plugins/#matchRecursive)插件。

# c# - 动态语言运行时在哪里？

> ID：13101363
> 
> 赞同：0
> 
> 时间：2012-10-27T15:09:22.807
> 
> 标签：c#, scripting, dynamic-language-runtime

好吧，我到处搜索并阅读了有关该主题的几篇文章，包括 MSDN，但我不太了解这些程序集的位置。我知道有些是 .NET Framework 的一部分，但我找不到其余的，例如 Microsoft.Scripting 等。有人可以详细说明所有程序集的位置并给我 DLR 类型的命名空间被发现。我需要从 Codeplex 下载项目吗？如果是这样，我需要它的哪些部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:22:23.660

1.  是的，您需要从 CodePlex 下载它

2.  查阅他们的文档

3.  取决于您将使用它的具体用途（参见 2）

# android - 通过通知将数据返回到其他活动

> ID：13101364
> 
> 赞同：1
> 
> 时间：2012-10-27T15:09:28.513
> 
> 标签：android, android-intent, android-activity

我有 3 个活动，第 1 幕、第 2 幕和第 3 幕。在我的 Activity 1 中，用户设置标题、他想要的事件的描述、通知用户的日期和时间。当用户单击按钮 DONE 时，通知 ID 将传递给我的 Activity 2，以显示通知。当它需要通知时，它现在会显示 Activity，其中显示了用户在 Activity 1 中创建的事件的详细信息。我的问题是如何查看已传递给 Activity 3 的数据？

这是我正在处理的代码：

活动一：

```
//---Button view---
    Button btnOpen = (Button) findViewById(R.id.button1);
    btnOpen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {                
            timePicker = ( TimePicker ) findViewById( R.id.timePicker1 );
            datePicker = ( DatePicker ) findViewById( R.id.datePicker1 );      
            title = (EditText) findViewById (R.id.editText1);
            description = (EditText) findViewById (R.id.editText2);

            //---use the AlarmManager to trigger an alarm---
            AlarmManager alarmManager = ( AlarmManager ) getSystemService( ALARM_SERVICE );                 

            //---get current date and time---
            Calendar calendar = Calendar.getInstance();       

            //---sets the time for the alarm to trigger---
            calendar.set( Calendar.YEAR, datePicker.getYear() );
            calendar.set( Calendar.MONTH, datePicker.getMonth() );
            calendar.set( Calendar.DAY_OF_MONTH, datePicker.getDayOfMonth() );                 
            calendar.set( Calendar.HOUR_OF_DAY, timePicker.getCurrentHour() );
            calendar.set( Calendar.MINUTE, timePicker.getCurrentMinute() );
            calendar.set( Calendar.SECOND, 0 );

            //---PendingIntent to launch activity when the alarm triggers---                    
            Intent i = new Intent( NotifyActivity.this, DisplayNotification.class );

            //---assign an ID of 1---
            i.putExtra( "NotifID", 1 ); 

            Intent d = new Intent( NotifyActivity.this, AlarmDetails.class );
            d.putExtra( "Title", title.getText().toString() );
            d.putExtra( "Description", description.getText().toString() );

            PendingIntent displayIntent = PendingIntent.getActivity(
                getBaseContext(), 0, i, 0 );               

            //---sets the alarm to trigger---
            alarmManager.set( AlarmManager.RTC_WAKEUP, 
                calendar.getTimeInMillis(), displayIntent );
            finish();
        }
    }); 
```

活动二：

```
//---get the notification ID for the notification; 
// passed in by the MainActivity---
int notifID = getIntent().getExtras().getInt( "NotifID" );

//---PendingIntent to launch activity if the user selects 
// the notification---
Intent i = new Intent( DisplayNotification.this, AlarmDetails.class );
i.putExtra( "NotifID", notifID );  

PendingIntent detailsIntent = 
    PendingIntent.getActivity(this, 0, i, 0);

NotificationManager nm = (NotificationManager)
    getSystemService(NOTIFICATION_SERVICE);
Notification notif = new Notification(
    R.drawable.ic_launcher, 
    "iHealthFirst: Notification!",
    System.currentTimeMillis());

CharSequence from = "AlarmManager - New Notification";
CharSequence message = "This is your alert, click to view";        
notif.setLatestEventInfo(this, from, message, detailsIntent);

//---100ms delay, vibrate for 250ms, pause for 100 ms and
// then vibrate for 500ms---
notif.vibrate = new long[] { 100, 250, 100, 500};        
nm.notify(notifID, notif);
//---destroy the activity---
finish();
} 
```

和活动 3：

```
 @Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alarmdetails);  

    //---look up the notification manager service---
    NotificationManager nm = ( NotificationManager ) 
        getSystemService( NOTIFICATION_SERVICE );

    //---cancel the notification---
    nm.cancel( getIntent().getExtras().getInt( "NotifID" ) ); 

    Bundle extras = getIntent().getExtras(); 
    if(extras !=null)
    {
    String strTitle = extras.getString( "Title" );
    String strDescription = extras.getString( "Description" );
    title.setText( strTitle );
    description.setText( strDescription );
    }
} 
```

在活动 3 中，我把这个

```
 **Bundle extras = getIntent().getExtras(); 
    if(extras !=null)
    {
    String strTitle = extras.getString( "Title" );
    String strDescription = extras.getString( "Description" );
    title.setText( strTitle );
    description.setText( strDescription );
    }** 
```

但我似乎无法显示详细信息。任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:59:53.070

也许不是最好的解决方案，但您可以使用`DefaultSharedPreferences`来保存值。

保存活动 3 中的值：

```
//Determine the String values
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
Int numberOfEvents = preferences.getInt("numberofevents", 0);
numberOfEvents++;
preferences.putString("title" + numberOfEvents, titleVariable);
preferences.putString("description" + numberOfEvents, descriptionVariable);
preferences.putInt("numberofevents", numberOfEvents);
preferences.commit(); 
```

对活动 1 中的事件中的字符串做一些事情：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
int numberOfEvents = preferences.getInt("numberofevents", 0);
for(int i = 0; i < numberOfEvents; i++) {
    String titleVariable = preferences.getString("title" + i, "");
    String descriptionVariable = preferences.getString("description" + i, "");
    if(!titleVariable.equals("") && !descriptionVariable.equals("")) {
        //use the String variables for you notification
    }
} 
```

在活动 3 中删除事件时：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
//get id number of event to delete and store it in variable variableNameOfEventNumber
preferences.putString("title" + variableNameOfEventNumber, "");
preferences.putString("description" + variableNameOfEventNumber, "");
preferences.commit(); 
```

我希望这有帮助。

# javascript - 如何在 Win8 HTML/JS 应用程序中将本地图像显示为按钮背景图像？

> ID：13101365
> 
> 赞同：1
> 
> 时间：2012-10-27T15:09:43.287
> 
> 标签：javascript

我是一名年轻的奥地利开发人员，正在开发我的第一个 HTML/Javascript Win8 应用程序。我想用网格布局制作一个简单的静态阅读器应用程序。为此，我想显示本地存储在 Projectfolder（例如 /images/test.png）中的背景图像（不像在 Visual Studio 示例中只是无聊的灰色调）。

但是 - 怎么做？我发现我需要 Uri 的帮助，但我无法正确使用它。这里的代码：

```
var uri = new Windows.Foundation.Uri('ms-appdata:///images/test.png');
var testpic = Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri); 
```

我总是无法显示图片，它只是在左下角显示带有“x”的标准图像，以表明它无法加载...

问题：Uri 语句正确吗？这是打开本地文件的方式吗？这些图块的背景图像（250 像素 x 250 像素）的限制（大小和文件类型）是什么，也许这就是问题所在？

抱歉这个问题，我现在正在开发我的第一个 Windows 特定和/或 Javascript 应用程序，感觉有点尴尬。;)

对不起，我的英语不好，来自奥地利的问候！:)

# iphone - 消息正文中的字符串不起作用

> ID：13101367
> 
> 赞同：0
> 
> 时间：2012-10-27T15:09:57.663
> 
> 标签：iphone, nsstring, mfmailcomposeviewcontroller

我实现了下面的代码，并记录了`arrayPlainText`它，但是当我在模拟器和我的 iPhone 上运行它时，它只显示第一项，其他所有内容都消失了。

```
NSMutableArray *xmlListContent;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:[self returnListPath]])
    {
        xmlListContent = [[NSMutableArray alloc] initWithContentsOfFile:[self returnListPath]];
        NSMutableArray *listContent = [[NSMutableArray alloc] init];
        int i;
        for(i = 0; i < [xmlListContent count]; i++)
        {
            MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
            [mailComposer setMailComposeDelegate:self];
            if ([MFMailComposeViewController canSendMail]) {
                [mailComposer setSubject:editedListTitle];
                [mailComposer setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
                NSString *item = [NSString stringWithString:[[xmlListContent objectAtIndex:i] objectForKey:@"label"]];
                NSString *tempString = [NSString stringWithFormat:@"-%@",item];
                [listContent addObject:tempString];

                NSString *arrayPlainText = [listContent componentsJoinedByString:@"<br>"];
                [mailComposer setMessageBody:[NSString stringWithFormat:@"<html>%@</html>",arrayPlainText] isHTML:YES];
                DLog(arrayPlainText);

                [self presentModalViewController:mailComposer animated:YES];
            }
        }
    }
    else
    {
        xmlListContent = [NSMutableArray array];
        DLog(@"failed to compose list via email");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T07:59:55.183

答案就在这里。

```
NSMutableArray *xmlListContent;
NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:[self returnListPath]])
{
    xmlListContent = [[NSMutableArray alloc] initWithContentsOfFile:[self returnListPath]];
    NSMutableArray *listContent = [[NSMutableArray alloc] init];
    int i;
    for(i = 0; i < [xmlListContent count]; i++)
    {
        NSString *item = [[xmlListContent objectAtIndex:i] objectForKey:@"label"];
        NSString *tempString = [NSString stringWithFormat:@"-%@", item];
        [listContent addObject:tempString];
    }

    NSString *arrayPlainText = [listContent componentsJoinedByString:@"<br>\n"];
    DLog(arrayPlainText);

    if ([MFMailComposeViewController canSendMail]) {
        MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
        [mailComposer setMailComposeDelegate:self];

        [mailComposer setSubject:editedListTitle];
        [mailComposer setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

        [mailComposer setMessageBody:[NSString stringWithFormat:@"<html>%@</html>",arrayPlainText] isHTML:YES];

        [self presentModalViewController:mailComposer animated:YES];
    }
    else
    {
        xmlListContent = [NSMutableArray array];
        DLog(@"failed to compose list via email");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:26:55.433

这段代码怎么样：

```
NSString *item = [NSString stringWithString:[[self.array objectAtIndex:i] objectForKey:@"label"]];
NSString *tempString = [NSString stringWithFormat:@"-%@",item];
[listContent addObject:tempString];

NSString *arrayPlainText = [listContent componentsJoinedByString:@"<br>"];
[mailComposer setMessageBody:[NSString stringWithFormat:@"<html>%@</html>",arrayPlainText] isHTML:YES];
DLog(arrayPlainText); 
```

# java - Java - 登录，将用户存储在数据库中

> ID：13101368
> 
> 赞同：-5
> 
> 时间：2012-10-27T15:10:00.210
> 
> 标签：java, database, forms, login

我的 Web 应用程序中的用户界面开发存在问题。

**计划是：**

1.  用户在登录表单中写下他的用户名和密码并提交。
2.  请求到达登录 servlet。
3.  Servlet 查找该用户的数据库并检查通过等。

我了解 SSL、基于表单的身份验证、检查角色以及将用户存储在 DD web.xml 中。

但是由于创建的自动化，我需要在数据库中存储大量用户。有没有简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:17:19.920

我认为这里没有比这更好的方法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:26:42.660

我认为您正在寻找类似[spring-security](http://static.springsource.org/spring-security/site/reference.html)或应用服务器专有方式来验证存储在数据库中的用户（如 Tomcat 的[JDBCRealm](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JDBCRealm)）。

但坦率地说，如果您对 spring-security 甚至 spring 一无所知，并且想要避免专有解决方案，那么编写自己的进入数据库的 servlet 过滤器是一个非常简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:29:06.333

您可以选择在数据库中创建一个用户 - 并让数据库进行身份验证。

# c++ - 非小数位数对双精度数的影响

> ID：13101369
> 
> 赞同：0
> 
> 时间：2012-10-27T15:10:05.110
> 
> 标签：c++, double

考虑这两个数字：

```
double v1 = 2433.36.. 
double v2 = 0.36... 
```

`v2`由于用于编码小数点左侧部分的数字较少，因此可能更精确（小数点后的数字更准确）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:13:14.980

精确度显然是指小数点后的准确数字。那么答案是肯定的。浮点数具有固定位数。如果小数点前有更多，那么小数点（或小数点）后可以有更少。并且前导零或尾随零不计入此计算。

# javascript - 如何在淘汰赛中调用方法 $.getJSON()

> ID：13101376
> 
> 赞同：0
> 
> 时间：2012-10-27T15:10:55.703
> 
> 标签：javascript, ajax, knockout.js, asp.net-web-api

我已经设置了这个基本的淘汰赛脚本（仍在学习）

```
$.getJSON(clientUrl + "/list/" + 1, function (data) {

var viewModel = {
    clients: ko.observableArray(data)
};

ko.applyBindings(viewModel);
}); 
```

第一个参数 'lucidServer.getClients(1)' 调用这个 ajax 请求：

```
var getClients = function (id) {
    return $.ajax(clientUrl + "/list/" + id)
}; 
```

现在我得到了 json，但它似乎没有正确绑定模板。这是json：

```
0: {iD:1, userId:1, name:CompanySoft, LLC.,…}
1: {iD:2, userId:1, name:Widget Factory,…}
2: {iD:3, userId:1, name:Jim's Consulting,…} 
```

模板在这里：

```
<div id="clientListOutput">
            <ul "template: { foreach: clients }">
                <li><span data-bind"text: name"></span></li>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:21:29.757

您的标记中有很多错别字。

HTML 应如下所示：

```
 <div id="clientListOutput">
            <ul data-bind="foreach: clients">
                <li><span data-bind="text: name"></span></li>
            </ul>
  </div> 
```

由于您的`ul`标签中有标记，因此您不需要使用`template`绑定。只需使用 a `foreach`，Knockout 将完成迭代每个客户端并`li`为每个客户端渲染的工作。

这是一个工作小提琴：http: [//jsfiddle.net/jearles/6XhM4/](http://jsfiddle.net/jearles/6XhM4/)

# css - 将给定部分移动到下一个可用空间

> ID：13101379
> 
> 赞同：0
> 
> 时间：2012-10-27T15:11:07.387
> 
> 标签：css, twitter-bootstrap

我有这个例子，我正在显示一些包含在部分标签中的内容。最后我有[http://dl.dropbox.com/u/51537247/the%20app/_check_boxes_form.html](http://dl.dropbox.com/u/51537247/the%20app/_check_boxes_form.html) 这就是我正在使用的代码

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sales,Expenditure and Stocks </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 40px;
      }
      .navigation{
      background-color:##008B8B;
      border:1px solid #ADFF2F;
      }
      a{
      margin-right:20px;
      }
      label{
      width:15%;
      float:left;
      }
      article{
      margin-top:3px;
      }
      .top_article{
      border:1px dotted #CC6600;
      }
      button{
      margin-right:8%;
      }
      section{
      display:inline-block;
      border:1px solid orange;
      width:100px;
      margin-bottom:10px;
      }
      .price_section{
      width:40px;
      }
      .contain_sections{
      width:100%;
      margin-left:15%;
      }
      .services_articled{
      overflow:hidden;
      }
    </style>
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container">
     <div class="row">
      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="span12 navigation">
      <a href="home.html">Home</a> <a href="services.html">Services</a><a href="expenses.html">Expenses</a><a href="daily_income.html">Daily Income</a><a href="daily_expenditure.html">Daily Expenditure</a><a href="analysis_dashboard.html">Analysis Dashboard</a><a href="account.html">Account</a>  
      </div>
      </div>
      <!-- Example row of columns -->
      <div class="row">
        <div class="span12">
        <article class="top_article">
        <article>
        <label>Date</label><input type="text" disabled="disabled" name="service_name" />
        </article>
         <article>
        <label>Customer Name</label><input type="text" name="service_name" />
        </article>
        <article class="services_articled">
        <label>Services Offered</label>
        <article class="contain_sections">
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" value="eighth"/></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        <section>
        <header>Tour Guiding</header><input type="checkbox" name="tour" /><footer><input class="price_section" type="text" name="tour_price" /></footer>
        </section>
        </article>
        </article>
        <article>
        <label>Services Totals</label><input type="text" name="service_name" />
        </article>
        <button>Save New</button><button>Cancel</button>
        </article>
        </div>
        </div>
      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

我`overflow:hidden;`用来隐藏溢出的项目，但我希望溢出的移动到下一个有足够空间的位置，因为隐藏了溢出，一些重要的文本被隐藏了。我已经用第八个值标记了溢出的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:26:58.347

这段代码是问题所在

```
.contain_sections{
      width:100%;
      margin-left:15%;
      } 
```

我把它修好了

```
 .contain_sections{
       margin-left:15%;
       } 
```

# python - 如何从查询中获取包含所有单词的文档列表？【不是交集】

> ID：13101383
> 
> 赞同：0
> 
> 时间：2012-10-27T15:11:47.550
> 
> 标签：python

我正在使用 Python。

我有一个疑问，用词。例如，query=[hello, tree, blue]

我已经为每个单词选择了它所在的文档，因此我为每个单词都有一个列表，其中每个位置都是文档之一。比方说：

```
list_query[0]=[1,4,5]
list_query[1]=[5,8]
list_query[2]=[4,5,8] 
```

所以，我应该得到一个结果 = [5]

但是，我不想用交集来做。我需要使用迭代 i，j 来完成它。

```
hello:
      i
      |
      1    4    5
tree:
      5    8
      |
      j 
```

我必须从 i=0 开始，比较 list_query[0][i]==list_query[1][j]，如果是，则将该数字添加到列表中。如果不是，我应该迭代较少数量的两个迭代器，依此类推，结果是这些列表和查询的其余元素的交集。但是请找到如何做到这一点，这让我发疯。

因此，如果有人可以帮助我...在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:45:37.250

如果您对代码简单性而不是性能最感兴趣，那么迭代地与列表的内容相交并不难：

```
def intersect(query_lists):
    # initialize to first result set
    combined_results = query_lists[0]

    # filter out values missing in any other result set
    for query in query_lists[1:]:
        combined_results = filter(lambda i: i in query, combined_results)

    # turn nested generators into a list
    return list(combined_results) 
```

使用实例而不是列表会快得多`set`，但是如果您使用它们，您可以只使用内置的交集方法，而不必手动进行。

您还可以通过组合列表、对组合结果进行排序然后扫描以查找与原始列表完全相同次数的值来实现几乎相同的加速。但是，如果您的输入集中可能有重复项，这将不起作用。

如果您知道每个输入列表都已排序，则可以检查它们的第一个值是否都相同，并拒绝任何小于最大值的值。如果您的子列表未排序，则可能不值得这样做，因为如果您自己对每个子列表进行排序，您将失去一些性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:00:50.107

我觉得你已经走得很远了。我可以向您展示一个实现，但您已经描述了该算法，因此您自己实现它应该不难。但也许你对你的描述没有信心。

让我以缓慢而准确的方式重述您的描述，省略我们不需要的关于查询等的信息。我们有两个预先排序的列表，我们想找到它们的交集。用一个稍微完整的例子来调整你的图表，从 list `a = [1, 4, 5, 7, 8]`、`b = [5, 8, 9]`、`i=0`和开始`j=0`，以及一个空的输出列表`out = []`，我最初将在图表中省略...

```
i = 0
a = 1 4 5 7 8

j = 0
b = 5 8 9 
```

首先我们检查它们是否相等。它们不是，所以我们取 和 的`a[i]`最小值`b[j]`。在这种情况下，`a[i] == 1`和`b[j] == 5`，所以我们想要增加`i`。

```
i =   1
a = 1 4 5 7 8

j = 0
b = 5 8 9 
```

通过相同的步骤，我们`i`再次递增：

```
i =     2
a = 1 4 5 7 8

j = 0
b = 5 8 9 
```

现在情况不同了；`a[i]`和`b[j]`是相同的，所以我们想将该值附加到输出列表并增加*两个*值：

```
i =       3
a = 1 4 5 7 8

j =   1
b = 5 8 9

out = 5 
```

现在我们继续。*再次*小于... `a[i]`_*`b[j]`*

 *```
i =         4
a = 1 4 5 7 8

j =   1
b = 5 8 9 
```

并且值是相同的，所以我们将该值添加到`out`并递增`i`和`j`...

```
i =           5
a = 1 4 5 7 8

j =     2
b = 5 8 9

out = 5 8 
```

但现在我们发现了`i == len(a)`。所以我们知道算法已经终止。

现在我们拥有了确定我们需要哪些变量以及逻辑应该如何工作所需的一切。我们需要 list `a`、 list `b`、 index `i`、 index`j`和 list `out`。我们想创建一个在`i == len(a)`或时停止的循环`j == len(b)`，并且在该循环中，我们想测试`a[i]`与 是否相等`b[j]`。如果它们相等，我们将`i`and`j`和 append`a[i]`都递增`out`。如果它们不相等，那么我们测试是否`a[i] < b[j]`。如果是，那么我们增加`i`; 否则，我们增加`j`.

这决定了两个列表之间的交集；现在我们只需要将它应用于第一个和第二个列表，然后将结果应用于第三个列表，然后将结果应用于第四个，依此类推。*

# design-patterns - 使用 ajax post、get、put、delete 等与 html post 并仅在 spring 中获取优点和缺点

> ID：13101396
> 
> 赞同：7
> 
> 时间：2012-10-27T15:13:12.827
> 
> 标签：design-patterns, rest, jakarta-ee, spring-mvc, http-method

我加入了一个使用spring框架的项目，所有调用都是由ajax请求进行的，成功后的重定向在视图本身中定义并通过隐藏的输入传递给ajax JS函数（所以在每个函数的末尾返回ModelAndView在控制器中没有任何效果）。我觉得它以某种方式弄乱了代码对吗？我仍然认为这样做是因为他们希望获得将 CRUD 映射到 post、get、put、delete 的 restful 应用程序的好处，但最终他们失去了从控制器本身重定向的能力。

*   我想知道是否有其他模式可以容纳所有这些。
*   我也想知道前一种方式 Vs 仅使用 GET 和 POST 的优缺点，这很容易允许从控制器进行重定向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T11:40:40.340

那么我通常使用和推荐的模式如下：

*   用户加载页面 - 控制器 GET 被调用并加载视图
*   在页面加载 - AJAX 脚本调用控制器的 POST 以从后端获取数据（用户看到加载器）
*   在 POST 请求成功后，将呈现数据。
*   返回错误时 - 向用户显示来自后端的任何问题的消息（提供对重定向的更多控制）

这种方法的优点：

1.  增加错误处理的灵活性
2.  对于数据密集型页面，用户不必等待页面加载
3.  可以用作混合方法，您可以使用完整的 web 2.0 感觉或对某些操作使用更传统的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T19:19:20.030

阿贾克斯：

*   +浏览器刷新时没有双重帖子
*   +客户端执行
*   +less 对服务器的请求
*   -关于 XSS 攻击的额外安全检查/配置

HTML：

*   +适用于所有浏览器
*   +在停用 javascript 时工作
*   -在速度方面缺乏可用性

我只是在 Spring 上花很少的时间，所以我无法判断所有事情。可能是spring的发展模式本身让你觉得不舒服。在 Java 中，您习惯于在 OOP 中感受。MVC 的一般概念与 html AJAX 等混合在一起。请记住，您有一个服务器/客户端架构，并且您希望所有组件都不同。这就是 Google Web Toolkit 可以很好地完成的事情。

所以我读到的是你让浏览器刷新。如果您进行刷新，AJAX 的好处在哪里？不了解您的应用程序，但知道在 Java 中有些事情不能那么容易完成（如果您正在改编外国代码），您做得对，应该考虑您的程序序列。

除了 AJAX HTML 之外，我能想到的唯一不同的方式是 Socket 连接，可以使用 ActiveX 组件、Flash 或 html5 Websockets 来完成。但这通常不是您用于简单表单的内容。

顺便提一句。已知 GET 字符串最大约为 2000 个字符，但执行速度更快，因为您不发送 POST 之类的标头。

在我看来：关于性能，最好先减少请求并吐出更多的 html，而不是尝试强迫自己到处制作 ajax。反正你失去了你的 SEO 优势......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:52:40.143

多年来，Web 已经成熟了很多。传统的 HTTP 请求类型（如 PUT、DELETE）在 Web 开发中的大多数情况下都没有用，因此它们的使用很少。

建议在您的 Web 应用程序开发方法中仅使用 GET & PUT 设计模式。无论您只需要发送一个或最多两个输入参数来获得响应，您都应该使用 GET，每当您需要发送超过 2 个参数以输入到 HTTP 资源（即 URI）时，您都可以使用 POST

# javascript - 无法创建 SQL-DB

> ID：13101398
> 
> 赞同：0
> 
> 时间：2012-10-27T15:13:16.123
> 
> 标签：javascript, ios, sql, sqlite, cordova

无法创建数据库。我使用 Xcode 4.4，最新的 PhoneGap 版本。

通常在 User/.../iPhone Simulator/.../Documents/tapp.sql 中应该有一个数据库。但是什么都没有。我来点警报（“2”）。任何想法？

我的代码：

```
 <script type="text/javascript" src="cordova-2.1.0.js"></script>
        <script type="text/javascript" charset="utf-8">
            function onBodyLoad()
            {
                alert("0");
               document.addEventListener("deviceready", onDeviceReady,false);
            }                    

            /* When this function is called, PhoneGap has been initialized and is ready to roll */
            function onDeviceReady()
            {
                alert("1");
                try {
                  alert("2");
                        var shortName = 'tapp';
                        var version = '1.0';
                        var displayName = 'Tumblr App Database';
                        var maxSize = 65536;
                        db = openDatabase(shortName, version, displayName,  maxSize);
                } catch (e) {
                    debug.error(e);
                }
            }
            </script>
        </head>
<body onLoad="onBodyLoad();" >

    <button onclick="createDatabase();">Database</button>
    <button onclick="createTables();">Tables</button>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:15:42.803

为确保文件被实际创建，请在数据库中写入一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T11:25:14.263

尝试这个

```
 <script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
//
function onDeviceReady() {
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
}

// Populate the database 
//
function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

// Transaction error callback
//
function errorCB(tx, err) {
    alert("Error processing SQL: "+err);
}

// Transaction success callback
//
function successCB() {
    alert("success!");
}

</script> 
```

参考这个链接：[Phonegap-storage](http://docs.phonegap.com/en/2.8.0/cordova_storage_storage.md.html#Storage)

# cocos2d-iphone - Cocos2d：调用release后不调用dealloc

> ID：13101400
> 
> 赞同：0
> 
> 时间：2012-10-27T15:13:26.693
> 
> 标签：cocos2d-iphone

Dealloc 即使在发布后也不会被调用。这是我的初始化代码。

```
@interface PPTileMap : CCTMXTiledMap 
{

}
@end

@implementation PPTileMap

-(void)dealloc
{
    printf("Dealloc called\n");
}
@end

//allocation
PPTileMap *tileMap = [[PPTileMap alloc] initWithTMXFile:tilemapFile];

//release
[tileMap release];
tileMap = nil; 
```

当我使用 tiledMapWithTMXFile 时，它​​会..但在加载线程后崩溃。为什么上面的代码不调用dealloc？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:51:08.517

`dealoc`发送后未调用该对象被其他人保留的唯一原因`release`（添加到 NSArray 或 NSDictionary，由您的对象之一保留，您已对其运行操作等）。如果你不知道，什么对象保留你的对象，覆盖它的`retain`方法为

```
- (id) retain
{
    return [super retain];
} 
```

然后在此方法中放置断点。然后，您将能够在每次想要保留您的对象时看到调用堆栈。您还可以覆盖`release`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:04:07.453

终于解决了这个问题。特别感谢 Morion。这里我明确使用了 removeFromParentAndCleanup 然后调用了 dealloc。

```
//release

[tileMap removeFromParentAndCleanup:YES];
[tileMap release];
tileMap = nil; 
```

# networking - 操作系统何时发现发送到本地 IP (localhost) 上的套接字的数据包正在本地传输？

> ID：13101403
> 
> 赞同：2
> 
> 时间：2012-10-27T15:14:08.987
> 
> 标签：networking, architecture, tcp, localhost, packet

如果将 TCP 数据包发送到“localhost”或本地机器 IP 上的套接字，它将经过什么路径？会涉及到网络适配器吗？还是仅将数据从内存中的一个地址复制到另一个地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:17:26.940

数据只复制到内存中（实际上，我的猜测是从用户空间复制到内核空间，然后在接收端点上复制回用户空间），不会涉及网络适配器。UNIX 通常包含一个用于此目的的虚拟“环回”网络适配器；即使您访问物理适配器上的本地地址，您也经常可以看到它在环回适配器上“移动”。

# api - 无法下载诺基亚 PC 连接 API

> ID：13101405
> 
> 赞同：0
> 
> 时间：2012-10-27T15:14:29.913
> 
> 标签：api, download, nokia

当我尝试从诺基亚网站下载 API 时，它返回 403 错误：这是下载链接： http: [//www.developer.nokia.com/Resources/Tools_and_downloads/Other/PC_Connectivity_API/](http://www.developer.nokia.com/Resources/Tools_and_downloads/Other/PC_Connectivity_API/)

请建议我另一个下载源或给我发邮件。m.qayyum 在 live.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:25:50.670

当您尝试时，可能是诺基亚服务器非常繁忙。现在任何人都可以在使用诺基亚 A/c 登录后下载 API。

如果您仍然遇到上述问题，请下载 CCleaner 应用程序并运行它。然后尝试下载 API。

# c++ - C++ OpenGL/Glut 无法绘制

> ID：13101411
> 
> 赞同：1
> 
> 时间：2012-10-27T15:15:21.053
> 
> 标签：c++, opengl, drawing, glut

我试图简单地在窗口中绘制一个三角形。我之前在之前的代码中绘制过形状，并查找了常见问题，例如无法刷新或未清除颜色缓冲区。

不管我似乎尝试了什么，我都无法在屏幕上绘制任何东西，即使我已经简化了我的代码以基本上看起来与我以前的（工作！）代码完全一样。我所拥有的只是一个主要的和一个渲染：

```
// Declarations //
void Render(void); //Call the drawing functions

int main(int argc, char *argv[])
{
    glutInit(&argc,argv);
    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500, 500);
    glutInitWindowPosition(20,20);
    glutCreateWindow("Triangle Test");

    //prepare for drawing
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);

    //now draw
    glutDisplayFunc(Render);

    glutMainLoop();
}

// ---- Render Function ----
void Render(void)
{

    // Draw a triangle
    glColor3f(1.0f, 1.0f, 1.0f);

    glBegin(GL_LINE_STRIP);

    glVertex2f(100.0f, 20.0f);
    glVertex2f(0.0f, 20.0f);
    glVertex2f(20.0f, 50.0f);

    glEnd();
    glFlush();
} 
```

在运行时，它使用我设置的背景颜色（在本例中为黑色）绘制一个窗口，没有别的。我完全被难住了。堆栈上的所有其他问题似乎都可以通过我在这里的东西（即 glFlush）得到解决，并且它与我的旧代码几乎相同，它画得很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:38:37.820

你正在画一个比你的窗口大的线条。您需要设置矩阵以便看到更大的区域、绘制更小的多边形，或者通过绘制三角形而不是线条来绘制填充多边形。

# sql-server - 标识列并在查询中使用 order by

> ID：13101414
> 
> 赞同：2
> 
> 时间：2012-10-27T15:15:45.130
> 
> 标签：sql-server, sql-server-2008-r2

我使用 SQL Server 2008 R2 并有一个表，其`id`列为`identity(1,1)`. 如果我想获取按 id 列排序的查询，必须使用`Order By ID`或不需要。

**编辑：** 我在 ID 列上有一个唯一的聚集索引。做这个索引保证我的查询默认按 id 排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:19:52.407

没有默认排序顺序。即使该表具有*聚集索引*，也不能保证您按该顺序获得结果。

您**必须**将子句指定为`ORDER BY`所需的排序顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:25:21.357

在省略 ORDER BY 的情况下 - 顺序是不可预测的。因为这样的 SQL 语句不要求明确的顺序，所以 SQL Server 可以在结果准备好时返回结果。

这意味着：

*   该顺序绝对取决于执行计划。

*   针对某些过滤条件返回的顺序，在其他情况下可能会有所不同

*   聚集索引在某些情况下甚至可能**不**用于某些执行计划。在这些情况下（不使用时） - 不考虑其顺序。

对于某些选择，可以使用其他覆盖索引（不是按 ID 排序的）。这将导致“意外”订单。

如果我们需要获取**Ordered list**，我们必须使用显式的 ORDER BY 子句。然后我们可以确定订单。只有这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T15:26:50.200

不使用“ORDER BY”时，不保证表的顺序。

# android - 使用 FTP 协议的 Android Fileupload 不显示 ProgressBar

> ID：13101416
> 
> 赞同：0
> 
> 时间：2012-10-27T15:16:21.293
> 
> 标签：android

在我的 android 项目中，我需要显示搜索栏和网络速度（文件使用 FTP 协议从服务器上传/下载的速度有多快）。在我的情况下，当我尝试从模拟器 sdcard 上传文件时，它会在文件存储在服务器中时显示速度和搜索栏，但我的要求是我需要在文件上传时连续显示搜索栏和网络速度进入服务器。我不明白我在代码中哪里做错了。以下是我将文件上传到 ftp 服务器的代码：

提前致谢。

```
 @Override
    protected String doInBackground(String... arg0) {
        int count = 0;
        FTPClient ObjFtpCon = new FTPClient();
        //Toast.makeText(con, "FTPasync doInBackground() is called" ,Toast.LENGTH_SHORT).show();
        try {
            runOnUiThread(new Runnable() {
                public void run() {

                    bar.setProgress(0);
                    //real_time.setText(0 + " secs");
                    test_avg.setText(0+ " kbps");                       
                    //peak.setText(0+" kbps");
                }
            });
            updateUI(pp, R.drawable.pause);
            //ObjFtpCon.connect("ftp.customhdclips.com");
            ObjFtpCon.connect("ftp."+map.get("url").toString());
            updateUI(status, "Connecting");

            //if (ObjFtpCon.login("fstech@customhdclips.com", "fstech123")) {
            if (ObjFtpCon.login(map.get("username").toString(), map.get("password").toString())) {  
                updateUI(status, "Connected");
                ObjFtpCon.enterLocalPassiveMode(); // important!
                ObjFtpCon.cwd("/");// to send the FTP CWD command to the server, receive the reply, and return the reply code. 

                //if (mode == 0) {
                if(Integer.parseInt((map.get("oprn").toString()))== 0){  // Download File Using FTP Protocol
                    System.out.println("download test is called");
                    File objfile = new File(Environment.getExternalStorageDirectory() + File.separator + "/logo.png");

                    objfile.createNewFile();
                    FileOutputStream objFos = new FileOutputStream(objfile);
                    boolean blnresult = ObjFtpCon.retrieveFile("/logo.png", objFos);
                    objFos.close();
                    if (blnresult) {
                        // toast("Download succeeded");
                        // toast("Stored at : " +
                        // objfile.getAbsolutePath());
                    }

                    //***********************************************************

                    /*
                    File objfile = new File(
                            Environment.getExternalStorageDirectory()
                                    + File.separator + "/test.txt");

                    // System.out.println("total" + objfile.getTotalSpace() + " bytes");

                    objfile.createNewFile();
                    FileOutputStream objFos = new FileOutputStream(objfile);
                    boolean blnresult = ObjFtpCon.retrieveFile("/test.txt",
                            objFos);
                    objFos.close();
                    if (blnresult) {
                        System.out.println("download in ftp is successful");
                        // toast("Download succeeded");
                        // toast("Stored at : " +
                        // objfile.getAbsolutePath());
                    }*/
                } 

                else {
                    // Upload
                    System.out.println("upload test is called");
                    //Toast.makeText(con, "upload FTP test is called", Toast.LENGTH_SHORT).show();
                    //ContextWrapper context = null;
                    //assetManager= context.getAssets();

                    assetManager = getResources().getAssets();
                    input1 = assetManager.open("hello.txt");
                    long total = 0;
                    long sleepingTime= 0;

                    final long started = System.currentTimeMillis();
                    int size = input1.available();
                    byte[] buffer = new byte[size];
                    byte dataByte[] = new byte[1024];
                    //byte dataByte[] = new byte[(int)((CharSequence) input1).length()];
                    //input1.read(buffer);
                    //final int lenghtOfFile = data.getBytes().length;
                    final int lenghtOfFile = input1.toString().getBytes().length;
                    System.out.println("length of file....."+lenghtOfFile);
                    ByteArrayInputStream byteArrayIS = new ByteArrayInputStream(input1.toString().getBytes());
                    System.out.println("ByteArrayIS value is...."+byteArrayIS);
                    System.out.println("started time --"+started);
                    updateUI(status, "Uploading");
                    while ((count = byteArrayIS.read(dataByte)) != -1)
                    {   
                        System.out.println("read value is...."+byteArrayIS.read(dataByte));
                        while (sleep1) {
                            System.out.println("While Loop Sleep1 is Called");
                            Thread.sleep(1000);
                            sleepingTime +=1000;    
                        }

                        total += count;
                        System.out.println("Total Value IS:: "+total);
                        System.out.println("Count Value Is:: "+count);
                        final int progress = (int) ((total * 100) / lenghtOfFile);
                        System.out.println("Progress Value IS::" + progress);
                        final long speed = total;
                        //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000; --- When using this line then it's not updating Avarage

                        boolean result = ObjFtpCon.storeFile("/test.txt", input1);
                        //boolean result = ObjFtpCon.storeFile(map.get("file_address").toString()+"/test.txt", input1); --- When using this line then it's not updating Status

                        duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                        runOnUiThread(new Runnable() {
                            public void run() {     
                                    //bar.setProgress(progress);
                                    // trans.setText("" + progress);
                                    //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                                    //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;  
                                    //real_time.setText(duration + " secs");
                                    if (duration != 0) {
                                        test_avg.setText((((speed / duration)*1000)*0.0078125)  + " kbps");
                                        bar.setProgress(progress);
                                        /*if (pk <= (speed / duration) / 1024) {
                                    pk = (speed / duration) / 1024;
                                }*/
                                        if (pk <= ((speed / duration)*1000)*0.0078125) {
                                            pk = (long)(((speed / duration)*1000)*0.0078125);
                                        }
                                        //peak.setText(pk + " kbps");
                                    }
                                }
                        });

                        //in.close();
                        if (result) {
                            updateUI(status, "Uploaded");
                            // toast("Uploading succeeded");
                            // toast("Uploaded at /test.txt");
                            //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;
                            System.out.println("curreent time..... "+System.currentTimeMillis());
                            System.out.println("started time --"+started);
                            System.out.println("sleep tome...."+sleepingTime);
                            System.out.println("duration is....."+duration);
                            /*runOnUiThread(new Runnable() {
                            public void run() {
                                bar.setProgress(progress);
                                // trans.setText("" + progress);
                                //duration = ((System.currentTimeMillis() - started)-sleepingTime) / 1000;

                                real_time.setText(duration + " secs");
                                if (duration != 0) {
                                    test_avg.setText((speed / duration) / 1024
                                            + " kbps");
                                    if (pk <= (speed / duration) / 1024) {
                                        pk = (speed / duration) / 1024;
                                    }
                                    peak.setText(pk + " kbps");
                                }
                            }
                        });*/
                        }
                        /*while(!result){Thread.sleep(1000);}*/
                    }
                    byteArrayIS.close();
                }
            }

            else{
                System.out.println("password entered is incorrect");
                //Toast.makeText(con, "Username or/and password is incorrect", Toast.LENGTH_SHORT).show();
            }
        } 
        catch (Exception e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }

        try {
            ObjFtpCon.logout();
            ObjFtpCon.disconnect();
        } 
        catch (IOException e) {
            e.printStackTrace();
            // toast(e.getLocalizedMessage());
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:05:55.870

Since you're calling doInBackground(), I assume you're subclassing AsyncTask. If so, why aren't you using publishProgress and onProgressUpdate? runOnUiThread doesn't execute immediately unless you're already *on* the UI Thread, and because you're in doInBackground() you're in a background thread, not the UI Thread. There's a possibility that runOnUiThread() isn't actually running until doInBackground() is over. In comparison, publishProgress and onProgressUpdate are specifically designed to report progress from the background thread.

# powershell - 在 ScriptBlock 中包含 PowerShell 文件

> ID：13101417
> 
> 赞同：0
> 
> 时间：2012-10-27T15:16:23.417
> 
> 标签：powershell, scriptblock

我写了以下代码

```
$sb = {
    . .\Myfunctions.ps1
    $x = MyFunction1
    $y = MyFunction2
    $x + $y
}

$cred = Get-Credential "domain\user"

Invoke-Command -Computer localhost -Credentials $cred -ScriptBlock $sb 
```

这不起作用，因为它说 The term .\MyFunctions.ps1 is not Recognized as commandlet

为什么我不能在脚本块中包含文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:40:33.077

问题是`$pwd`脚本块中的（当前目录）与实际控制台路径不同，因为您使用`invoke-command`with`-computer`参数就像您在远程会话中执行此操作一样。尝试将完整路径放入脚本以调用它或仅使用（如果在本地）`& $sb`

# python - Python函数不返回第二个值

> ID：13101423
> 
> 赞同：0
> 
> 时间：2012-10-27T15:17:23.137
> 
> 标签：python

我希望函数在计算单词中的元音时返回两种类型的值，字符串和整数。调用时，我只得到 y 值，而不是 x。你能解释为什么会这样吗？

```
def cnt_vow(s):
    x = 0
    y = ''
    for char in s:
        if char in 'aeuio':
            y = y + char
            x = x + 1

    return y 
    return x

cnt_vow('hello') 
```

预期的：`'eo', 2`

曾是：`'eo'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:18:54.443

如果你想要两者，请尝试返回一个元组

```
return x,y 
```

`return`总是离开当前函数，所以它之后的代码永远不会被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:19:10.500

您必须使用元组返回多个值：

```
return (y, x) 
```

其中括号通常是可选的。

调用此函数时，您可以再次解压缩这两个值：

```
vowels, count = cnt_vow('hello') 
```

一旦 python 看到一个 return 语句，函数执行就结束了，第二个语句永远不会到达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T15:19:14.490

一旦您的代码遇到第一个 return 语句，它就会立即返回指定的值。

您正在寻找的是：

```
 return y, x 
```

# java - Java Web 应用程序无法在 Windows 7 上运行

> ID：13101424
> 
> 赞同：1
> 
> 时间：2012-10-27T15:17:23.530
> 
> 标签：java, oracle, jinitiator

我在通过 Intranet 访问的服务器上安装了一个 java Web 应用程序。当我在带有 Windows XP 和 IE 6 的客户端电脑上运行它时，它运行良好，带有 Jinitiator。当我在 Windows 7 上的任何更新的浏览器上运行它时，问题就出现了。每当我输入应用程序的特定 URL 时，Windows 7 中的 IE 都会停止响应。

我尝试在 Mozilla 和 Netscape 等其他浏览器上运行它，但它们给了我 Jinitiator 的插件错误。事实上，我下载了插件并为两个浏览器安装了它，但浏览器仍然找不到任何插件。

当我研究它时，我发现 Jinitiator 只兼容不高于 Windows xp 的 windows 和只兼容不高于 IE6 的浏览器。

我很困惑这是否只是 JVM 版本问题，或者我必须进入应用程序的代码。到目前为止，我无法访问应用程序的代码。它是由其他公司在 2006 年开发的，现在已经几乎死了。任何人都可以向我建议任何解决方案，我可以做些什么来解决这个兼容性问题。怎样才能通过它，我应该从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:43:21.563

您可以将 JInitiator 与 Suns/Oracles Java 插件交换。如果您可以访问 metalink，请查看那里。

您可以在以下位置找到一些过时的信息：

[http://www.oracle.com/technetwork/developer-tools/forms/clientsod-forms10g-094744.html](http://www.oracle.com/technetwork/developer-tools/forms/clientsod-forms10g-094744.html)

[http://www.oracle.com/technetwork/testcontent/readme-101362.html](http://www.oracle.com/technetwork/testcontent/readme-101362.html)

如果您不了解该主题，请尝试从 Oracle 或其中一个业务合作伙伴那里获得帮助。您可能必须更新环境以获得对较新版本的支持。

# python - python 的 tempfile.mkstemp 是否总是产生唯一的名称？

> ID：13101437
> 
> 赞同：1
> 
> 时间：2012-10-27T15:19:23.430
> 
> 标签：python, file

我会自动生成文件名，我不希望有覆盖。我正在懒洋洋地使用这一行代码

```
fd, filepath = tempfile.mkstemp(ext, prefix='odt_img_', dir=self.destPath)
os.close(fd) # just using the name and overwriting later 
```

后来我写入文件路径，但我不确定 mkstemp 是否只是添加了一些随机字母，或者它是否真的确保名称是唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:18:31.100

**tempfile.mkstemp**只保证创建和打开一个名称不存在的新文件。从[文档](http://docs.python.org/library/tempfile.html#tempfile.mkstemp)：

> 以最安全的方式创建临时文件。假设平台正确实现了 os.open() 的 os.O_EXCL 标志，则文件创建中没有竞争条件。

并且 O_EXCL 标志指定：

> 确保此调用创建文件：如果此标志与 O_CREAT 一起指定，并且文件名已经存在，则 open() 将失败。

在内部，mkstemp 只是循环通过一个随机序列，试图创建一个在成功或用完“想法”之前不存在的文件，在这种情况下，它会因 IOError 而失败。

# eclipse - 使用一个动态 Web 项目和多个 Java 项目设置 Eclipse 工作区

> ID：13101438
> 
> 赞同：2
> 
> 时间：2012-10-27T15:19:51.267
> 
> 标签：eclipse, apache, jar, project, war

有人可以指导我在 Eclipse 中设置一个 Web 应用程序项目。我想要一个动态 Web 项目和多个纯 Java 项目。我的 Web 项目将包含 JSP，Java 项目将包含 Struts Action 类、Spring Bean、Hibernate 实体等。我想将这些 Java 项目用作 WAR 的依赖项。我已经在这样的环境中完成了工作，但还没有从头开始设置工作空间。你能指导我或分享一个链接吗？

注意：我想使用 Apache Tomcat 或 Glassfish 作为服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:13:19.523

在每个项目中，您都可以设置`JavaBuild Path properties`.

因此，假设您有依赖于项目 2 的 project1 以及作为 jar 提供的其他一些库。转到 project1 的该选项，选择选项卡`Projects`并添加 project2（这当然已经是一个 eclipse 项目），而不是转到选项卡库并单击`Add external jars.`. 你完成了。这不取决于项目的性质。

具体来说，由于您有一个动态 Web 项目，因此您还需要`Deployment Assembly`将 project2 和您的 jars 添加到服务器所需的文件列表中。

# mysql - 用旧的、更新不匹配的 id 加入新表

> ID：13101440
> 
> 赞同：0
> 
> 时间：2012-10-27T15:20:13.227
> 
> 标签：mysql, join, min

我有一个主表（t1）

```
id           value     group
------------------------------
5            22        1 
6            55        1 
7            18        2 
8            11        2 
```

和一个缓存表（t2）

```
id           value     group
------------------------------
1            12        1
2            30        1
3            18        2
4            11        2 
```

主表自动递增，因此每次保存数据时，都会清除表并创建新的 id，每次都向上。

我需要用 t1.id 更新 t2.id 以便它们匹配。

缓存表（t2）所需的结果：

```
id           value     group
------------------------------
5            12        1
6            30        1
7            18        2
8            11        2 
```

**尝试1：**

```
UPDATE t1, t2 SET t1.id=t2.id WHERE t1.id < t2.id ORDER BY id ASC 
```

**尝试2：**

```
UPDATE t1, t2 SET t1.id = t2.id WHERE t1.id IS < MIN(t2.id) ORDER BY t1.id ASC 
```

**尝试3：**

```
 UPDATE t1
  INNER JOIN (
    SELECT
      MIN(t1.id) AS ID
    FROM t1
    GROUP BY ID) m ON t1.ID = m.ID
  INNER JOIN t2 ON t1.ID = t2.ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:27:31.313

我的尝试，试着让我知道：

```
 Update cache t2
  set t2.id = t2.id + 
    (select min(t1.id)-min(t2.id) from main t1, cache t2); 
```

**编辑：**

如果您可以进行两步查询，那就容易多了。

```
 DECLARE diffValue INTEGER;
 SELECT min(t1.id)-min(t2.id) into diffValue from main t1, cache t2;
 UPDATE cache t2 set t2.id = t2.id + diffValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:28:03.277

您不能在更新语法中使用连接。

首先删除表中的所有记录：

```
DELETE * FROM t2; 
```

然后在其中写入新数据：

```
INSERT INTO t2
(t2.id, t2.value, t2.group)
SELECT t1.id, t1.value, t1.group FROM t1 
```

这是你想要的吗？

# c# - XAML 绑定代码不起作用

> ID：13101449
> 
> 赞同：0
> 
> 时间：2012-10-27T15:20:52.967
> 
> 标签：c#, wpf, data-binding, microsoft-metro, datatemplate

我有一个小问题。

后面的代码：

```
...
public struct Project
{
    string Name;
    string Path;
    public Project(string Name, string Path = "")
    {
       this.Name = Name;
       this.Path = Path;
    }
}
... 
```

资源代码：

```
<DataTemplate x:Key="ItemProjectTemplate">
        <StackPanel>
            <Image Source="Assets/project.png" Width="50" Height="50" />
            <TextBlock FontSize="22" Text="{Binding Name}" />
        </StackPanel>
</DataTemplate> 
```

网格中的正常代码：

```
<ListView Grid.Column="1" HorizontalAlignment="Left" Height="511" 
     Margin="25,72,0,0" Grid.Row="1" VerticalAlignment="Top" Width="423"
     x:Name="Projects" ItemTemplate="{StaticResource ItemProjectTemplate}" /> 
```

我对在 C# 代码中设置的 ListView 源没有问题，并且我的模板正在加载。但是当我运行我的应用程序时会发生这种情况：

![项目名称未显示](../Images/f43ec5c8f59f9124f1965e55d0476f03.png)

如您所见，项目名称`(Project.Name`）没有显示，但在我的 ListView 模板中是数据绑定，所以它应该可以工作。有谁知道为什么我的文本数据绑定不起作用？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:32:25.097

`DataBinding`适用于`Properties`而不适用于`Fields`. 用类替换 Struct 并将您的字段作为属性 -

```
public class Project
{
    public string Name {get; set;}
    public string Path {get; set;}
    public Project(string Name, string Path = "")
    {
       this.Name = Name;
       this.Path = Path;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:33:43.663

您必须绑定公共属性！并使用类而不是结构。结构按值传递给 GUI，因此，您不能对实际的源项目进行更改。

```
public class Project
{
    public string Name{ get; set;}
    public string Path{ get; set;}
    public Project(string Name, string Path = "")
    {
       this.Name = Name;
       this.Path = Path;
    }
} 
```

# python - Python 另一个列表中的列表中的任何项目

> ID：13101451
> 
> 赞同：1
> 
> 时间：2012-10-27T15:21:02.477
> 
> 标签：python

如果匹配项目列表，返回列表的 T/F 列表的优雅方法是什么？

例如：

```
[1,3,5,4]
in
[4,3,7,5,8] 
```

回报：

```
[True, True, False, True, False] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:24:00.297

[测试](http://wiki.python.org/moin/TimeComplexity)集合中的成员资格是 O(1)，而测试列表中的成员资格是 O(n)。所以（特别是对于一个大列表）你应该`firstlist`在测试成员资格之前转换成一个集合。

```
firstset = set(firstlist)
[(v in firstset) for v in otherlist] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T15:23:06.333

使用列表理解：-

```
>>> list1 = [4, 3, 7, 5, 8]
>>> list2 = [1, 3, 5, 4]
>>> new_list = [elem in list2 for elem in list1]
>>> new_list
[True, True, False, True, False]
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T15:22:18.410

通过使用列表推导：

```
[(v in firstlist) for v in otherlist] 
```

# erlang - erlang ets选择奇怪的行为

> ID：13101453
> 
> 赞同：4
> 
> 时间：2012-10-27T15:21:09.077
> 
> 标签：erlang, ets

我在带有 ets:select 的 erlang 中有一个奇怪的行为。

我实现了正确的选择语句（下面的 4 和 5），然后在我的语句中出错（下面的 6），然后我再次尝试与 4 和 5 中相同的语句，它不再起作用。

怎么了 ？任何的想法 ？

```
Erlang R14B01 (erts-5.8.2) [source] [smp:2:2] [rq:2] [async-threads:0] [kernel-poll:false]

Eshell V5.8.2  (abort with ^G)
1> Tab = ets:new(x, [private]).
16400
2> ets:insert(Tab, {c, "rhino"}).
true
3> ets:insert(Tab, {a, "lion"}). 
true
4> ets:select(Tab,[{{'$1','$2'},[],['$1', '$2']}]).      
["rhino","lion"]    
5> ets:select(Tab,[{{'$1','$2'},[],['$1', '$2']}]).      
["rhino","lion"]
6> ets:select(Tab,[{{'$1','$2'},[],['$1', '$2', '$3']}]).
** exception error: bad argument
 in function  ets:select/2
    called as ets:select(16400,[{{'$1','$2'},[],['$1','$2','$3']}])
7> ets:select(Tab,[{{'$1','$2'},[],['$1', '$2']}]).      
** exception error: bad argument
 in function  ets:select/2
    called as ets:select(16400,[{{'$1','$2'},[],['$1','$2']}]) 
```

我的ets表被破坏了吗？这会是 ets 的错误吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T15:35:33.580

shell 进程创建了 ETS 表并且是它的*所有者*。当所有者进程死亡时，ETS 表将被自动删除。

因此，当您在 处遇到异常时`6`，shell 进程将终止，因此 ETS 表将被删除。

制作它`private`也意味着没有其他进程可以访问它（因此即使表被持久化，新的 shell 也无法访问它），但在这种情况下，由于表已被删除，情况会更糟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T21:45:31.843

（太大而不能作为对 thanosQR 正确答案的评论）

如果您希望表在 shell 中的异常中幸存下来，您可以将其交给另一个进程。例如：

```
1> Pid = spawn(fun () -> receive foo -> ok end end).    % sit and wait for 'foo' message
<0.62.0>
2> Tab = ets:new(x, [public]).                          % Tab must be public if you plan to give it away and still have access
24593
3> ets:give_away(Tab, Pid, []).
true
4> ets:insert(Tab, {a,1}).
true
5> ets:tab2list(Tab).
[{a,1}]
6> 3=4.
** exception error: no match of right hand side value 4
7> ets:tab2list(Tab).                                   % Tab survives exception
[{a,1}]
8> Pid ! foo.                                           % cause owning process to exit
foo
9> ets:tab2list(Tab).                                   % Tab is now gone
** exception error: bad argument
     in function  ets:match_object/2
        called as ets:match_object(24593,'_')
     in call from ets:tab2list/1 (ets.erl, line 323) 
```

# c++ - 将孩子的向量分配给祖父母的向量

> ID：13101454
> 
> 赞同：3
> 
> 时间：2012-10-27T15:21:24.653
> 
> 标签：c++

所以我有以下课程：

```
class A {}
class B : public A {}
class C : public B {} 
```

当我尝试执行以下操作时，出现错误：

```
vector<C*> v1; //already instantiated with a vector of pointers to C.
vector<A*>* v2 = &v1; 
```

> 错误 C2440：“正在初始化”：无法转换为`'std::vector<_Ty> *'`
> 指向`'std::vector<_Ty> *'`的类型不相关；转换
> 需要`reinterpret_cast`、C 风格转换或函数风格转换

如果`C`是 的后代`A`，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T15:31:45.207

虽然`C`派生自`A`，`std::vector<C*>`但不是派生自`std::vector<A*>`，因此您不能将前一种类型的对象的地址分配给后者的指针。

想象一下，如果你能做到这一点，将会发生什么：

```
vector<A*>* v2 = &v1;

/* *v2 is declared as a vector<A*> so we can do this: */
v2->push_back(new B);

/* Now we have effectively added a pointer to a B object
   to the vector v1, which is supposed to be a vector of
   C objects only! */ 
```

但是，当然可以进行以下操作：

```
int main()
{
  std::vector<C*>  v1;
  std::vector<A*>  v2(begin(v1),end(v1));
  return 0;
} 
```

在这里，我们创建一个新向量`v2`并将其元素复制`v1`到其中。这是可能的，因为`C`它源自`A`.

# php - 标头定义导出到 excel 文件 php

> ID：13101457
> 
> 赞同：0
> 
> 时间：2012-10-27T15:21:50.827
> 
> 标签：php, excel, export, byte-order-mark

> **可能重复：**
> [如何在 PHP 中输​​出 Excel 可以正确读取的 UTF-8 CSV？](https://stackoverflow.com/questions/4348802/how-can-i-output-a-utf-8-csv-in-php-that-excel-will-read-properly)

我需要从 html 表导出到 excel 文件，但是当我读取 de xml 文件时遇到字符问题..

像这样的东西：

```
RegiÃ³n should be like Región
TelÃ©fono should be like Teléfono 
```

这是我的标题定义：

```
header('Content-encoding: UTF-8');
header("Content-type: application/x-msexcel; charset=UTF-8");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-disposition: attachment; filename=" . $nombreArchivo . ".xls"); 
```

有一个 BOM 配置，但不知道如何在标题中设置

**非常好**

我只是在标题结束之前应用此代码

```
echo "\xEF\xBB\xBF"; 
```

这解决了“特殊字符”的问题。感谢马里奥 :)

但

现在，当我想打开下载的文件时，我仍然收到此消息：

```
 "The file you are trying to open, 'file.xls', has a different format than specified by the file extension. Make sure the file is not corrupted and is from a trusted source before opening. Do you want to open the file now?" 
```

有什么避免该消息的想法吗？

# android - android:@Theme.Translucent 将方向锁定为纵向？

> ID：13101459
> 
> 赞同：3
> 
> 时间：2012-10-27T15:22:09.363
> 
> 标签：android, styles

我创建了一种新样式来将背景设置为透明，但由于某种原因，当设备旋转时应用程序不会将布局更改为横向。我应该指定新风格的东西吗？

这是它的代码：

```
< style name="Transparent" parent="android:@Theme.Translucent">
    < item name="android:windowBackground">@color/background</item>
</style> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-14T09:07:53.063

虽然您没有为 activty 指定[android:screenOrientation](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)，但 android 使用 `"unspecified"`默认值，这意味着系统选择方向。

在您使用 style with 的情况下`<item name="android:windowIsTranslucent">true</item>`，系统会根据堆栈中底层活动的方向选择方向。所以很难让你的应用程序处于横向模式，因为大多数启动器都固定为纵向模式。

只需`android:screenOrientation="sensor"`为所有半透明活动设置以强制它独立选择方向：

```
<activity
    android:name=".SomeActivity"
    android:screenOrientation="sensor"
    ...>
    ...
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:45:20.077

我实际上有点解决了它显然方向是根据背景应用程序在透明背景的情况下，因为我一直在测试当启动器在后面时，我总是只有肖像。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-27T15:29:41.680

恰到好处

```
<activity
            android:name=".Ippin_NewActivity"
            android:configChanges="keyboardHidden|orientation"
            android:label="@string/app_name" >
</activity> 
```

# phantomjs - 如何从 phantomjs shell 中运行 casper？

> ID：13101460
> 
> 赞同：1
> 
> 时间：2012-10-27T15:22:09.057
> 
> 标签：phantomjs, casperjs

任何人都知道是否以及如何从 phantomjs shell（又名[InteractiveModeREPL](http://code.google.com/p/phantomjs/wiki/InteractiveModeREPL)）中运行 casperjs？

![phantomjs 外壳](../Images/423b53e7c2bef158c47927bc43747627.png)

我也尝试过将直接路径传递给 casper.js 模块，但这也没有奏效。

**进展/更新：**

*   试过`phantomjs.injectJs('C:/casperjs/module/casper.js');`了，但`Error: Cannot find module 'colorizer'`我想我快接近了。
*   这让我更接近但仍然缺少路径：
    *   `phantomjs.injectJs('C:/casperjs/module/bin/bootstrap.js')`
        *   错误与`Cannot find package.json at C:/package.json`
    *   好的，看起来我可以在启动 phantomjs 时传递 --casper-path 选项（参见 - casper/bin/bootstrap.js：第 189 行）。
    *   好的，那行得通。（通过该选项不起作用，但设置幻影内部的路径确实如此）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:47:51.773

因此，要让这些东西首先在 phantomjs shell 中运行，您需要`casperPath`在 phantom 全局对象中设置一个变量。

`phantom.casperPath = "C:/casper";`

然后你需要注入 caspers 的`bootstrap.js`文件。

`phantom.injectJs("C:/casper/bin/bootstrap.js");`

现在您可以实例化一个 casper 对象并在 shell 中使用它。

`var casper = require("casper").create();`

请享用。

# python - Python：如何在没有排序函数的情况下对列表中的字母进行排序？

> ID：13101468
> 
> 赞同：3
> 
> 时间：2012-10-27T15:23:12.817
> 
> 标签：python, string, list, sorting, alphabetical

这不是基于效率，并且必须仅使用非常非常基本的 python 知识（字符串、元组、列表基础）来完成，因此无需导入函数或使用排序/排序。（这是使用 Python 2.7.3）。

例如我有一个列表：

```
unsort_list = ["B", "D", "A", "E", "C"]
sort_list = [] 
```

sort_list 需要能够打印出来：

```
"A, B, C, D, E" 
```

我可以用数字/整数来做，字母顺序字符串有类似的方法吗？如果不是，你会推荐什么（即使它效率不高。）没有导入或排序功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:37:25.800

这是Python 中快速排序算法[的](http://en.wikipedia.org/wiki/Quicksort)一个非常简短的实现：

```
def quicksort(lst):
    if not lst:
        return []
    return (quicksort([x for x in lst[1:] if x <  lst[0]])
            + [lst[0]] +
            quicksort([x for x in lst[1:] if x >= lst[0]])) 
```

这是一个玩具实现，易于理解，但效率太低，无法在实践中使用。它更多地是作为一个学术练习来展示如何以函数式编程风格简洁地编写排序问题的解决方案。它适用于[可比较](http://docs.python.org/reference/datamodel.html#object.__cmp__)对象的列表，特别是对于问题中的示例：

```
unsort_list = ['B', 'D', 'A', 'E', 'C']
sort_list   = quicksort(unsort_list)

sort_list
> ['A', 'B', 'C', 'D', 'E'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:19:48.833

只是为了好玩：

```
from random import shuffle
unsorted_list = ["B", "D", "A", "E", "C"]

def is_sorted(iterable):
  for a1,a2 in zip(iterable, iterable[1:]):
     if a1 > a2: return False
  return True

sorted_list = unsorted_list
while True:
   shuffle(sorted_list)
   if is_sorted(sorted_list): break 
```

平均复杂度应该是阶乘，最坏情况是无限的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-26T08:30:35.240

Python 已经知道哪个字符串是第一个，哪个是下一个，这取决于它们的 ASCII 值

例如：

```
"A"<"B"
 True 
```

所以我们可以编写一个简单的冒泡排序算法来对字符串列表进行排序

```
unsort_list = ["B", "D", "A", "E", "C"]
def sortalfa(unsort_list):
    for i in range(len(unsort_list)-1):
        for j in range(i+1,len(unsort_list)):
            if unsort_list[i]>unsort_list[j]:
                temp = unsort_list[i]
                unsort_list[i] = unsort_list[j]
                unsort_list[j] = temp
    print("sorted list:{}".format(unsort_list))

sortalfa(["B", "D", "A", "E", "C"]) 
```

结果：

```
sorted list:['A', 'B', 'C', 'D', 'E'] 
```

有许多可用的标准库可以使用单行代码完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T15:48:01.243

更简单：

```
dc = { }
for a in unsorted_list:
  dc[a] = '1'

sorted_list = dc.keys() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T16:26:43.873

```
u = ["B", "D", "A", "E", "C"]
y=[]
count=65
while len(y)<len(u):
    for i in u:
        if ord(i)==count:
            y.append(i)
            count+=1
print(y) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-27T20:40:58.427

这仅使用`min()`内置和`list`对象方法：

```
unsort_list = ["B", "D", "A", "E", "C"]
sort_list = []

while unsort_list:
    smallest = min(unsort_list)
    sort_list.append(smallest)
    unsort_list.pop(unsort_list.index(smallest))

print sort_list 
```

它会破坏未排序的列表，因此您可能需要复制它并使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-09T20:02:32.340

list_val=['c','d','e','a','r']

```
for passnum in range(len(list_val)-1, 0, -1):
  for i in range(passnum):
    if list_val[i] > list_val[i+1]:
      list_val[i], list_val[i+1] = list_val[i+1], list_val[i] 
```

打印 list_val

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-23T05:35:13.157

该[`more_itertools`](https://github.com/erikrose/more-itertools)库有一个合并排序算法的实现，称为[`collate`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.collate).

```
import more_itertools as mit

iterables = ["B", "D", "A", "E", "C"]
list(mit.collate(*iterables))
# ['A', 'B', 'C', 'D', 'E'] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-25T17:05:58.583

我已经尝试过这样的事情，但我不确定程序的时间复杂度。

```
l=['a','c','b','f','e','z','s']
l1=[]
while l:
    min=l[0]
    for i in l:
        # here **ord** means we get the ascii value of particular character.
        if ord(min)>ord(i):
            min=i
     l1.append(min)
     l.remove(min)
print(l1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-11T03:37:22.520

```
def quicksort(lst):
    if not lst:
        return []
    return (quicksort([x for x in lst[1:] if x <  lst[0]])
            + [lst[0]] +
            quicksort([x for x in lst[1:] if x >= lst[0]]))
unsort_list = ['B', 'D', 'A', 'E', 'C']
sort_list   = quicksort(unsort_list) 
```

排序列表

> ['A'，'B'，'C'，'D'，'E']

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-07-06T08:13:04.737

```
u = ["B", "D", "A", "F", "C"]

y=[]

count=65

while len(y)<len(u):

    for i in u:

        if ord(i)==count:

            y.append(i)

    count+=1

print(y) 
```

# node.js - Node.js 使用 socket.io 进行重构

> ID：13101469
> 
> 赞同：14
> 
> 时间：2012-10-27T15:23:15.807
> 
> 标签：node.js, rest, websocket, socket.io, restify

是否可以像 express 和 socket.io 一样在同一个端口上运行 socket.io 和 restify？

我就是这样做的，但它没有用

```
# server.coffee
restify = require 'restify'
socket  = require 'socket.io'

server = restify.createServer()

io = socket.listen server
server.listen 1337 
```

当我尝试连接到 socket.io 时：

```
GET http://localhost:1337/socket.io/socket.io.js 404 (Not Found) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-05-23T04:18:26.430

正如@jtomasrl 和@zacheryph[在这里所建议的，这对我有用：](https://github.com/mcavage/node-restify/issues/230 "这里")

```
var server = restify.createServer();
var io = socketio.listen(server.server); //Note server.server instead of just server 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-08T23:18:22.347

由于这是“restify socket.io”的第一个谷歌点击，我发布了一个新答案。这现在可以正常工作，如[http://restify.com/docs/home/#socketio中所述](http://restify.com/docs/home/#socketio)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T01:55:30.520

显然，使用带有 restify 的 socket.io 是不可能的：[https ://github.com/mcavage/node-restify/issues/230](https://github.com/mcavage/node-restify/issues/230)

# assembly - 看门狗在汇编中如何中断功能

> ID：13101472
> 
> 赞同：0
> 
> 时间：2012-10-27T15:23:26.643
> 
> 标签：assembly, watchdog

我正在尝试解释下面的 TI MSP 430 的汇编代码。当我在调试器中逐步执行这些行时，子程序“beep02”继续循环一段我不知道其起源的时间，然后它突然跳入“WDT_ISR”子程序。

我的假设是，当“狗吠”时，会以某种方式调用看门狗中断服务，并将程序从循环中的正常运行的代码中取出并推进到 WDT_ISR。这个对吗？

```
 .title  "morse.asm"
;*******************************************************************************
;     Project:  morse.asm
;      Author:  Spencer Gardner
;
; Description:  Outputs a message in Morse Code using a LED and a transducer
;               (speaker).  The watchdog is configured as an interval timer.
;               The watchdog interrupt service routine (ISR) toggles the green
;               LED every second and pulse width modulates (PWM) the speaker
;               such that a tone is produced.
;
;   Revisions:
;
;              RBX430-1                                    eZ430 Rev C
;              OPTION A                                     OPTION B
;           .------------.                               .------------.
;     SW1-->|P1.0^   P3.0|-->LCD_A0         (RED) LED<--|P1.0     P3.0|-->LCD_RST
;     SW2-->|P1.1^   P3.1|<->SDA          (GREEN) LED<--|P1.1     P3.1|<->SDA
;     SW3-->|P1.2^   P3.2|-->SCL                   NC-->|P1.2     P3.2|-->SCL
;     SW4-->|P1.3^   P3.3|-->LCD_RW                NC-->|P1.3     P3.3|-->LED_3 (Y)
;    INT1-->|P1.4    P3.4|-->LED_5 (GREEN)         NC-->|P1.4     P3.4|<--NC
;    INTA-->|P1.5    P3.5|<--RX                    NC-->|P1.5     P3.5|<--NC
;    SVO1<--|P1.6    P3.6|<--RPOT                  NC-->|P1.6     P3.6|<--NC
;    SVO2<--|P1.7    P3.7|<--LPOT                  NC-->|P1.7     P3.7|<--NC
;           |            |                              |             |
;  LCD_D0<->|P2.0    P4.0|-->LED_1 (G)           SW_1-->|P2.0^    P4.0|<--NC
;  LCD_D1<->|P2.1    P4.1|-->LED_2 (O)           SW_2-->|P2.1^    P4.1|<--NC
;  LCD_D2<->|P2.2    P4.2|-->LED_3 (Y)           SW_3-->|P2.2^    P4.2|<--NC
;  LCD_D3<->|P2.3    P4.3|-->LED_4 (R)           SW_4-->|P2.3^    P4.3|<--RPOT
;  LCD_D4<->|P2.4    P4.4|-->LCD_BL            LCD_BL<--|P2.4     P4.4|<--LPOT
;  LCD_D5<->|P2.5    P4.5|-->SPEAKER               NC-->|P2.5     P4.5|-->SPEAKER
;  LCD_D6<->|P2.6    P4.6|-->LED_6 (RED)    (G) LED_1<--|P2.6     P4.6|-->LED_4 (R)
;  LCD_D7<->|P2.7    P4.7|-->LCD_E          (O) LED_2<--|P2.7     P4.7|<--NC
;           .------------.                               .------------.
;
;*******************************************************************************
            .cdecls C,LIST,"msp430.h"       ; include c header

;------------------------------------------------------------------------------
;   System equates
myCLOCK     .equ    1200000                 ; 1.2 Mhz clock
WDT_CTL     .equ    WDT_MDLY_0_5            ; WD configuration (Timer, SMCLK, 0.5 ms)
WDT_CPI     .equ    500                     ; WDT Clocks Per Interrupt (@1 Mhz)
WDT_IPS     .equ    myCLOCK/WDT_CPI         ; WDT Interrupts Per Second
STACK       .equ    0x0600                  ; top of stack

;------------------------------------------------------------------------------
;   External references
            .ref    numbers                 ; codes for 0-9
            .ref    letters                 ; codes for A-Z

;  numbers--->N0$--->DASH,DASH,DASH,DASH,DASH,END      ; 0
;             N1$--->DOT,DASH,DASH,DASH,DASH,END       ; 1
;             ...
;             N9$--->DASH,DASH,DASH,DASH,DOT,END       ; 9
;
;  letters--->A$---->DOT,DASH,END                      ; A
;             B$---->DASH,DOT,DOT,DOT,END              ; B
;             ...
;             Z$---->DASH,DASH,DOT,DOT,END             ; Z

;   Morse code is composed of dashes and dots, or phonetically, "dits" and "dahs".
;   There is no symbol for a space in Morse, though there are rules when writing them.

;   1\. One dash is equal to three dots
;   2\. The space between parts of the letter is equal to one dot
;   3\. The space between two letters is equal to three dots
;   4\. The space between two words is equal to seven dots.

;   5 WPM = 60 sec / (5 * 50) elements = 240 milliseconds per element.
;   element = (WDT_IPS * 6 / WPM) / 5

;   Morse Code equates
ELEMENT     .equ    WDT_IPS*240/1000

;------------------------------------------------------------------------------
;   Global variables                        ; RAM section
            .bss    beep_cnt,2              ; beeper flag
            .bss    delay_cnt,2             ; delay flag

;------------------------------------------------------------------------------
;   Program section
            .text                           ; program section
message:    .string "HELLO CS 124 WORLD"                 ; PARIS message
            .byte   0
            .align  2                       ; align on word boundary

RESET:      mov.w   #STACK,SP               ; initialize stack pointer
            mov.w   #WDT_CTL,&WDTCTL        ; set WD timer interval
            mov.b   #WDTIE,&IE1             ; enable WDT interrupt
            bis.b   #0x20,&P4DIR            ; set P4.5 as output (speaker)
            clr.w   beep_cnt                ; clear counters
            clr.w   delay_cnt
            bis.w   #GIE,SR                 ; enable interrupts

;   output 'A' in morse code
loop:       mov.w   #ELEMENT,r15            ; output DOT
            call    #beep
            mov.w   #ELEMENT,r15            ; delay 1 element
            call    #delay

            mov.w   #ELEMENT*3,r15          ; output DASH
            call    #beep
            mov.w   #ELEMENT,r15            ; delay 1 element
            call    #delay

            mov.w   #ELEMENT*3,r15          ; output DASH
            call    #beep
            mov.w   #ELEMENT,r15            ; delay 1 element
            call    #delay

            mov.w   #ELEMENT*7,r15          ; output space
            call    #delay                  ; delay
            jmp     loop                    ; repeat

;   beep r15 ticks of the watchdog timer
beep:       mov.w   r15,beep_cnt            ; start beep

beep02:     tst.w   beep_cnt                ; beep finished?
              jne   beep02                  ; n
            ret                             ; y

;   delay r15 ticks of the watchdog timer
delay:      mov.w   r15,delay_cnt           ; start delay

delay02:    tst.w   delay_cnt               ; delay done?
              jne   delay02                 ; n
            ret                             ; y

;------------------------------------------------------------------------------
;   Watchdog Timer interrupt service routine
;
WDT_ISR:    tst.w   beep_cnt                ; beep on?
              jeq   WDT_02                  ; n
            dec.w   beep_cnt                ; y, decrement count
            xor.b   #0x20,&P4OUT            ; beep using 50% PWM

WDT_02:     tst.w   delay_cnt               ; delay?
              jeq   WDT_10                  ; n
            dec.w   delay_cnt               ; y, decrement count

WDT_10:     reti                            ; return from interrupt

;------------------------------------------------------------------------------
;           Interrupt Vectors
;------------------------------------------------------------------------------
            .sect   ".int10"                ; Watchdog Vector
            .word   WDT_ISR                 ; Watchdog ISR

            .sect   ".reset"                ; PUC Vector
            .word   RESET                   ; RESET ISR
            .end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:23:14.357

不确定我是否正确理解了这个问题，但是是的，中断当然会中断正常的程序流程，因此得名。当一个特定的中断被触发时，处理器将当前`PC`和`SR`堆栈保存，以便它可以稍后返回到它正在做的任何事情。然后它从预定义的地址获取一个向量并继续在那里执行。您的代码末尾有向量表，其中包含一个条目，该条目指定您要`WDT_ISR`为看门狗中断调用。该例程增加计数器然后以`IRET`指令结束，因此处理器重新加载保存的`PC`并`SR`继续执行主程序。

至于间隔，初始化代码将其设置为每 500 微秒发生一次，然后哔声/延迟只是等待适当数量的中断发生。

# java - 从 j2me 读取图像到 C++

> ID：13101473
> 
> 赞同：0
> 
> 时间：2012-10-27T15:23:35.397
> 
> 标签：java, c++, c, sockets, java-me

我正在学习 c++ 以创建一个显示图像流的小应用程序。图像来自不存储为文件的 j2me 设备（所以我只有字节）。

我在想我需要先将图像的大小作为 int 发送，这样客户端就知道要为流中的特定图像读取多少内容。

我的问题是尺寸总是太大 - 当我最初只是尝试读取尺寸时不是图像的尺寸（我在 java 服务器中的 socket.write(int) 中发送这个长度并尝试了 dataoutputstream.writeInt ）。我将发布一些代码，因为它可能非常简单。

为什么尺寸与我发送的不同？

```
 ssize_t
 readLine(int fd, char *buffer, size_t n)
 {
 ssize_t numRead, tt;                    /* # of bytes fetched by last read() */
 size_t totRead;                     /* Total bytes read so far */
 char *buf;
 char ch;

 if (n <= 0 || buffer == NULL) {

     return -1;
 }

 buf = buffer;                       /* No pointer arithmetic on "void *" */

 totRead = 0;
 for (;;) {
     numRead = read(fd, &ch, 1);
     tt += numRead;
     if (numRead == -1) {

             return -1;              /* Some other error */

     } else if (numRead == 0) {      /* EOF */
         if (totRead == 0)           /* No bytes read; return 0 */
             return 0;
         else                        /* Some bytes read; add '\0' */
             break;

     } else {                        /* 'numRead' must be 1 if we get here */
         if (totRead < n - 1) {      /* Discard > (n - 1) bytes */
             totRead++;
             *buf++ = ch;
         }

         if (ch == '\n')
             break;
     }
 }

 printf("read line %s ", buf);
 fflush(stdout);
 int test = (int)buf;
 printf("read line int %i ", tt);
  fflush(stdout);
 *buf = '\0';
 return totRead; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:49:38.700

`WBXML`定义了一种独立于平台的写入`int`值的方式：[多字节整数](http://www.w3.org/TR/wbxml/#_Toc443384895)。

> 多字节整数由一系列八位字节组成，其中最高有效位是继续标志，其余七位是标量值。继续标志指示八位字节不是多字节序列的结尾。单个整数值被编码为 N 个八位字节的序列。前 N-1 个八位字节将继续标志设置为值一 (1)。系列中的最后一个八位字节的延续标志值为零 (0)。
> 每个八位字节中剩余的七位以大端顺序编码，例如，最高有效位在前。八位字节按大端顺序排列，例如，最重要的七位首先传输。在初始八位字节的值少于七位的情况下，所有未使用的位必须设置为零 (0)。
> 例如，整数值 0xA0 将使用两字节序列 0x81 0x20 进行编码。整数值 0x60 将使用一字节序列 0x60 进行编码。

我是为 Java ME 和 Bada 做的，但是用任何语言实现它都非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T18:59:08.003

您的阅读代码处理文本文件，它一个接一个地工作，它检查换行符等。图像（“所以我只有字节”）似乎是二进制数据。当您将二进制数据解释为文本时，您会遇到各种随机错误。这些二进制数据可能包括例如一个“\n”，当一个像素的值恰好是 13 时。它还可能包括“\0”，它将在真正结束之前结束字符串。

首先存储大小时，将其作为 int 发送，用 4 个字节表示。当您将其作为 4 个单独的字符阅读时，您会得到一些垃圾。您还需要注意字节的顺序/字节序。java 使用“网络顺序”，在 x86 上，C 可能以相反的方式读取它。

您正在使用旧的 C 标准库。使用 C++ iostream 可能更容易。

# visual-studio - 每次我尝试复制文本时 VS2012 都会崩溃

> ID：13101475
> 
> 赞同：4
> 
> 时间：2012-10-27T15:23:42.113
> 
> 标签：visual-studio

这已成为一个主要问题，因为我无法在 IDE 中复制任何文本。每次我尝试这样做时，VS2012 都会崩溃。谷歌搜索没有发现任何东西。

我仍然安装了 VS2010 - 如果这是问题，请不要安装。有没有人遇到过这个？有什么解决办法吗？建议（不复制不属于建议或答案）？：） 谢谢。

我从帮助 > 关于 Visual Studio 页面复制了这个：

> Microsoft Visual Studio Professional 2012 版本 11.0.50727.1 RTMREL Microsoft .NET Framework 版本 4.5.50709
> 
> 安装版本：专业
> 
> 适用于 Visual Studio 2012 的 LightSwitch 04938-004-0033001-02128 适用于 Visual Studio 2012 的 Microsoft LightSwitch
> 
> Office 开发人员工具 04938-004-0033001-02128 Microsoft Office 开发人员工具
> 
> 适用于 Visual Studio 2012 的团队资源管理器 04938-004-0033001-02128 适用于 Visual Studio 2012 的 Microsoft 团队资源管理器
> 
> Visual Basic 2012 04938-004-0033001-02128 Microsoft Visual Basic 2012
> 
> Visual C# 2012 04938-004-0033001-02128 Microsoft Visual C# 2012
> 
> 视觉 C++ 2012 04938-004-0033001-02128 微软视觉 C++ 2012
> 
> 视觉 F# 2012 04938-004-0033001-02128 微软视觉 F# 2012
> 
> Visual Studio 2012 代码分析拼写检查器
> 04938-004-0033001-02128 Microsoft® Visual Studio® 2012 代码分析拼写检查器
> 
> International CorrectSpell™ 拼写纠正系统的一部分 © 1993 Lernout & Hauspie Speech Products NV 保留所有权利。
> 
> The American Heritage® Dictionary of the English Language，第三版 版权所有 © 1992 Houghton Mifflin Company。Lernout & Hauspie Speech Products NV 授权的电子版版权所有。
> 
> Visual Studio 2012 SharePoint 开发工具
> 04938-004-0033001-02128 Microsoft Visual Studio 2012 SharePoint 开发工具
> 
> NuGet 包管理器 2.1.31002.9028 Visual Studio 中的 NuGet 包管理器。有关 NuGet 的更多信息，请访问 [http://docs.nuget.org/](http://docs.nuget.org/)。
> 
> PreEmptive Analytics Visualizer 1.0 Microsoft Visual Studio 扩展，用于可视化来自 PreEmptive Analytics 产品的聚合摘要。
> 
> SQL Server 数据工具 11.1.20627.00 Microsoft SQL Server 数据工具
> 
> Web 开发人员工具 1.0.30710.0 Microsoft Web 开发人员工具包含以下组件： Page Inspector：提供分解 Web 应用程序和诊断前端问题的有效方法的工具。Web 发布：托管服务器和本地服务器的 Web 发布所需的扩展。Web 表单模板：包括 Web 表单应用程序的默认模板。编辑器扩展：包括 HTML、CSS 和 JS 编辑器扩展，极大地增强了开发体验。

# winapi - 如何从 ULONGLONG 正确填充 WIN32_FIND_DATA 结构

> ID：13101479
> 
> 赞同：1
> 
> 时间：2012-10-27T15:24:06.533
> 
> 标签：winapi, visual-c++

当我只有 ULONGLONG 字节的文件大小时，如何正确设置**WIN32_FIND_DATA结构的****nFileSizeHigh**和**nFileSizeLow**组件。

 **直接转换导致编译器抱怨可能的数据丢失。

```
WIN32_FIND_DATA wfd;
wfd.nFileSizeLow = (DWORD)totalBytes; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:19:39.137

警告是准确的，您正试图将 64 只小猪塞进 32 磅重的戳中。改为这样做：

```
ULONGLONG size = something;
wfd.nFileSizeHigh = size >> 32;
wfd.nFileSizeLow = size & 0xffffffffUL; 
```

请注意，WIN32_FIND_DATA 通常只能由 FindFirstFile 和 FindNextFile() 填充。**

# javascript - JS中的RegEx找到没有3个相同的连续字符

> ID：13101480
> 
> 赞同：2
> 
> 时间：2012-10-27T15:24:14.867
> 
> 标签：javascript, regex, regex-negation

如何在 JS 中使用正则表达式（可以是字母、数字和非字母数字）查找 3 个字符的序列，'abb' 有效而 'abbb' 无效。

这个问题是我在这里提出的问题的一个变体：[如何为 javascript 结合这些正则表达式](https://stackoverflow.com/questions/13095892/how-to-combine-these-regex-for-javascript/13095926#comment17805304_13095926)。

这是错误的：`/(^([0-9a-zA-Z]|[^0-9a-zA-Z]))\1\1/`，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T15:27:16.950

这取决于你的实际意思。如果您只想匹配三个不相同的字符（即 if`abb`对您有效），则可以使用此否定前瞻：

```
(?!(.)\1\1).{3} 
```

它首先断言，当前位置后面没有三个相同的字符。然后它匹配这三个字符。

如果你真的想匹配 3 个不同的字符（只有类似的东西`abc`），它会变得有点复杂。改用这两个负前瞻：

```
(.)(?!\1)(.)(?!\1|\2). 
```

首先匹配一个字符。然后我们断言，this 后面不是同一个字符。如果是这样，我们匹配另一个字符。然后我们断言这些后面既不是第一个字符也不是第二个字符。然后我们匹配第三个字符。

请注意，那些负前瞻 ( `(?!...)`) 不会消耗任何字符。这就是为什么它们被称为前瞻。他们只是检查接下来会发生什么（或者在这种情况下，接下来**不会**发生什么），然后正则表达式从它离开的地方继续。[这](http://www.regular-expressions.info/lookaround.html)是一个很好的教程。

另请注意，这匹配除换行符之外的**任何内容**，或者如果您使用 DOTALL 或 SINGLELINE 选项，则匹配任何内容。由于您使用的是 JavaScript，因此您可以通过在正则表达式结束分隔符`s` **之后附加来激活该选项。**如果（出于某种原因）您不想使用此选项，请将`.`s替换为`[\s\S]`（这始终匹配任何字符）。

**更新：**

在评论中澄清后，我意识到您不想**找到**三个不相同的字符，而是想**断言**您的字符串不**包含**三个相同（且连续）的字符。

这更容易，更接近你之前的问题，因为它只需要一个负面的前瞻。我们所做的是：我们从字符串的开头搜索三个连续的相同字符。但是由于我们要断言这些**不**存在，我们将其包装在一个否定的前瞻中：

```
^(?!.*(.)\1\1) 
```

前瞻被锚定在字符串的开头，所以这是我们将要查看的唯一位置。然后，前瞻中的模式尝试从字符串中的任何位置找到三个相同的字符（因为`.*`; 相同的字符以与上一个问题相同的方式匹配）。如果模式找到了这些，则负前瞻将因此失败，因此字符串将无效。如果找不到三个相同的字符，则内部模式将永远不会匹配，因此否定前瞻将成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:27:08.393

要查找非三个相同的字符，请使用正则表达式模式

```
([\s\S])(?!\1\1)[\s\S]{2} 
```

# python - 如何限制 QScrollArea 完成的渲染？

> ID：13101486
> 
> 赞同：0
> 
> 时间：2012-10-27T15:25:49.763
> 
> 标签：python, pyqt

我有一个很大的小部件（可能长 80,000 像素？800 个元素，每个 100 像素），因为它布置了许多较小的小部件。我已经将巨大的小部件放入 QScrollArea 中。但是滚动区域仍然呈现整个小部件。这会导致小部件的操作不稳定，我希望事情变得更顺畅。

相反，我希望 QScrollAea 足够智能，只渲染我知道将显示的元素。（元素是有序的并且都是相同的固定大小，所以这个计算应该很快）

解决此问题的最佳方法是什么？QScrollArea 应该已经这样做了吗？

QListView 是否已经实现了这个功能？（但我想要我自己的自定义小部件，它有与用户交互的按钮，QListWiget 没有削减它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:08:04.067

您是否考虑过使用 QGraphicsView？除了仅有效渲染可见对象（以及许多其他好处，例如命中测试）之外，这还允许滚动。

# opencv - 如何使用 OpenCV 检测红外光

> ID：13101489
> 
> 赞同：4
> 
> 时间：2012-10-27T15:26:23.197
> 
> 标签：opencv, filter, camera, light, infrared

我正在尝试使用 OpenCV 使用内置摄像头检测 IR 点。我的相机可以看到红外线。但是我不知道如何区分可见光和红外光。转换为RGB后我们无法区分，但也许OpenCV有一些方法可以做到这一点。

有人知道这样的 OpenCV 功能吗？或者如何以其他方式做到这一点？

- 编辑

是否可以使用笔记本电脑内置摄像头识别例如光波长？或者不使用特殊相机就无法区分可见光和红外光？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:33:31.790

您将无法在 OpenCV 中做任何事情，因为当它开始工作时，它将只是另一个 RGB，如可见光（您有点提到这一点）。

你说你的相机可以看到红外线......这是否意味着它有一个过滤器，可以将红外线与可见光分开？在这种情况下，当您将图像放入 OpenCV 时，您将只关注 IR。然后看强度等？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T02:44:13.893

在您的设置中，假设您有 RGB +IR 摄像头，您的摄像头可能会显示这三个通道：

*   R + 红外
*   G + 红外
*   B + 红外

因此，很难直接从图像中识别 IR 像素。但没有什么是不可能的。R、G、B 和 IR 是宽带，因此所有波长的信息都在通道中。

您可以做的一件事是训练分类模型以对图像中的非 IR 和 IR 像素进行分类，其中包含大量具有预定类别的图像数据。通过训练该模型，您可以识别新图像的 IR 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:57:51.083

无法使用软件将红外光与可见光分开，因为您的相机实际上将红外光“转换”为您的眼睛可见光。我认为解决这个问题的唯一方法是使用 2 台摄像机，一台带红外透射滤光片的红外摄像机和一台带红外阻挡滤光片的普通摄像机。然后您可以匹配图像并提取您需要的信息。

# ios - 使用以图像为源文件的 AVfoundation 进行人脸识别

> ID：13101495
> 
> 赞同：2
> 
> 时间：2012-10-27T15:27:00.470
> 
> 标签：ios, avfoundation, face-recognition, avcapturedevice

我想使用 AVFoundation 对从相机胶卷拍摄的图像进行人脸识别。首先，这可能吗？

我找到了许多关于如何使用实时摄像头流作为输入来执行此操作的教程。我研究了它们，发现无法将 AVCaptureInputDevice 绑定到图像。

PS我不想使用CoreImage。其实我想放弃 CoreImage 并使用 AVFoundation 人脸识别。

十分感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:05:23.587

CoreImage 有什么问题？它使用相同的检测器：

```
NSURL *url = [NSURL URLWithString:@"..."];
CIImage *img = [CIImage imageWithContentsOfURL:url]; // uiImageObj.CIImage
CIContext *context = [CIContext contextWithOptions:nil];
NSDictionary *detectorOptions = [[NSDictionary alloc] initWithObjectsAndKeys:CIDetectorAccuracyLow, CIDetectorAccuracy, nil];
CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace context:context options:detectorOptions];
NSArray *features = [detector featuresInImage:img]; 
```

# ffmpeg - JPG 将 MP3 加入 FLV

> ID：13101503
> 
> 赞同：0
> 
> 时间：2012-10-27T15:28:13.260
> 
> 标签：ffmpeg, mp3, flv, jpeg

如何将图像和音乐转换为视频？我想要 YouTube 视频。我喜欢 FFMPEG 命令或其他 Ubuntu 自由软件。我想要：*.mp3 + *.jpg = *.flv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T01:27:09.447

这是一个使用最近`ffmpeg`语法的示例：

```
ffmpeg -loop 1 -i image.jpg -i music.mp3 -shortest -c:v libx264 -crf 20 -tune stillimage -c:a copy output.mkv 
```

此示例将复制音频而不是重新编码以保持质量。如果需要，使用 CRF 选项调整质量。有关详细信息，请参阅[FFmpeg 和 x264 编码指南](http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)。

[超级用户](http://superuser.com)（另一个 StackExchange 站点）是解决`ffmpeg`使用问题的更好地方，因为 Stack Overflow 是特定于编程的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:37:32.587

今天我需要将图像和音频文件合并为视频文件。由于我在 SO 上找到的答案都没有为我工作，所以我将在经过反复试验后留下对我有用的答案：

`ffmpeg -loop 1 -t 205 -i audio.mp3 -i image.jpg -crf 20 test.flv`

`205`输入 mp3 文件的持续时间在哪里，以秒为单位 -> 3:25 分钟。
*（用 FFmpeg SVN-r13582 测试）*

# mysql - 选择 * 重复项，然后选择 * 非重复项 - mysql

> ID：13101511
> 
> 赞同：1
> 
> 时间：2012-10-27T15:29:30.267
> 
> 标签：mysql, subquery

问题是针对示例表结构：

我的表

```
fielda, fieldb
val1    valx
val2    valy
val3    valz
val1    vala 
```

我想通过查询从 mytable 中进行选择：

```
fielda, fieldb
val1    valx
val1    vala 
```

基本上从重复 fielda 的表中选择 *。

然后使用不同的查询从 mytable 中选择

```
fielda, fieldb
val2    valy
val3    valz 
```

fielda 上的 val1 被视为重复项，因此它没有被选中，其余的都被选中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T15:32:28.563

此查询`fieldA`对列表顶部重复的表进行排序。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT fieldA, COUNT(*) totalCount
            FROM tableName
            GROUP BY fieldA
        ) b ON a.fieldA = b.fieldA
ORDER BY b.totalCount DESC 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/5225a/1)

此查询仅选择重复记录。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT fieldA, COUNT(*) totalCount
            FROM tableName
            GROUP BY fieldA
        ) b ON a.fieldA = b.fieldA
WHERE b.totalCount > 1
ORDER BY b.totalCount DESC 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/5225a/2)

而这一个，选择不在第二个查询中的记录（*上面*）

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT fieldA, COUNT(*) totalCount
            FROM tableName
            GROUP BY fieldA
        ) b ON a.fieldA = b.fieldA
WHERE b.totalCount = 1
ORDER BY b.totalCount DESC 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/5225a/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:31:34.037

```
select fielda, fieldb from mytable group by fielda having count(*) >1

select fielda, fieldb from mytable group by fielda having count(*) =1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:32:04.383

为了第一：

> SELECT * FROM tbl GROUP BY fielda HAVING COUNT(*)>1

对于第二个：

> 从 tbl 中选择 DISTINCT(fielda)

# jquery - 流体内容固定侧边栏

> ID：13101517
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:30:04.600
> 
> 标签：jquery, html, css, sass

我必须切片一个需要全宽和全高（无滚动）的网站。它的结构非常简单：body 有一个 20px 的边框（内部）一个侧边栏和一个内容，其中将是一个水平滑块（见下图）。![在此处输入图像描述](../Images/c13727f739389fb778161805da292f5f.png)

我的问题是，您对设置侧边栏宽度有什么建议？您会建议我使用固定宽度的侧边栏和 jquery 来计算内容的宽度，还是更好地使用侧边栏的宽度以及百分比的内容？如果有更好的方法让我知道。

注意：我用 SCSS(CSS3) 和 HTML5 开发它，它也应该与 talbets 兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:54:12.930

您可以使用 a`%` `width`作为侧边栏，也可以提供`min-width`和`max-width`值。[像这样](http://dabblet.com/gist/3965112)的东西。

演示代码

* * *

相关**HTML**：

```
<div class='sidebar'></div>
<div class='content-wrp'>
    <ul class='content'>
        <li class='slice'></li>
        <!-- and so on -->
    </ul>
</div> 
```

相关**CSS**：

```
html, body, .sidebar, .content-wrp, .content, .slice {
    box-sizing: border-box;
    margin: 0;
    height: 100%;
}
body { border: solid 20px lightblue; }
.sidebar {
    float: left;
    min-width: 10em; width: 20%; max-width: 32em;
}
.content-wrp {
    overflow-x: scroll; overflow-y: hidden;
    padding-bottom: 1em; 
}
.content { width: 4000px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:33:59.213

这是一个相当普遍的问题——一列需要具有固定宽度，而另一列需要响应。

本文：

[http://css.fepstudio.org/en/css-box-model/1-column-fixed-1-column-fluid.html](http://css.flepstudio.org/en/css-box-model/1-column-fixed-1-column-fluid.html)

提供了两种解决方案，一种基于绝对定位，另一种基于浮动。

# vb.net - VB.NET 如何将命令从服务器发送到客户端？

> ID：13101518
> 
> 赞同：0
> 
> 时间：2012-10-27T15:30:33.493
> 
> 标签：vb.net, client-server

请给我一个先机：/我真的不知道从哪里开始。我现在是 VB.NET 2010 的常客，现在我遇到了另一个障碍，我的第一个项目（电子智能卡考勤系统）是成功的，但现在我想在服务器客户端 vb 编程上进行更多实验。

如何将 VB.NET 命令从服务器表单远程发送到客户端表单......？例如：

当我从服务器计算机单击表单上的“显示按钮单击事件”时，它将显示我想在客户端计算机/VB.NET GUI 上显示的表单/结果。

我只想知道我可能使用的语法/代码块。

如果我听起来有点专横，我很抱歉，但这有点令人沮丧X（

帮助将不胜感激<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:34:23.593

检查这些：

[[VB.Net] 多客户端服务器异步套接字示例](http://tech.reboot.pro/showthread.php?tid=86)

[[教程][VB.Net] 异步服务器/客户端演示（使用套接字）](http://www.supportforums.net/showthread.php?tid=18870)

# android - 如何在 ViewPager 中对按钮进行编程

> ID：13101522
> 
> 赞同：0
> 
> 时间：2012-10-27T15:30:45.250
> 
> 标签：android, android-viewpager, fragment

我正在创建一个带有允许水平分页的 viewpager 的应用程序。在您在应用程序上滑动的窗格上，有按钮播放声音并链接到其他页面等。该应用程序运行良好，但我不知道如何编程viewpager 中的按钮。任何人都可以提供一个例子，或者帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:57:20.507

对按钮进行编程以做什么？人们通常通过在代码中使用类似这样的方法来处理 UI 小部件

```
Button aButton = (Button) findViewById(R.id.aButton); 
```

然后为 aButton 创建一个监听器

```
aButton.setOnClickListener(new OnClickListener(View v) {
...
}); 
```

# iphone - 如何开发一个科学计算器

> ID：13101524
> 
> 赞同：0
> 
> 时间：2012-10-27T15:30:52.027
> 
> 标签：iphone, objective-c, ios

我为 iPhone 制作了一个简单的计算器。

现在我正在尝试创建一个科学的。我在互联网上搜索了很多，这里是关于如何去做的。但可以找到任何实质性的东西。他们中的大多数都是关于制作一个简单的计算器。

如果你们能指导我朝着正确的方向前进，那将有很大帮助：

1\. 我应该采取什么方法？
2.有什么有用的教程/博客吗？
3\. 为了制作科学计算器，我应该在 obj-c 中学习什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:35:57.577

这取决于您想要达到的目标。一个“简单”的科学计算器，就像 Apple 的一样，可以通过扩展你已经拥有的东西来完成。只需添加其他函数，如正弦、余弦、平方根、幂。看看 Apple 的计算器是如何工作的。

如果你想开发一些可以解释更长术语的东西，就像`sin(123)+sqrt(log(12))`你必须采取其他方法一样。您必须先将术语转换为[RPN](http://en.wikipedia.org/wiki/Reverse_Polish_notation)（也称为后缀表示法），然后逐步解决它。

# php - Mysql php字符集设置

> ID：13101526
> 
> 赞同：0
> 
> 时间：2012-10-27T15:31:21.180
> 
> 标签：php, mysql

起初，我们使用 mysql 的默认字符集 latin1_swedish_ci。然后我们遇到了其他语言（如俄语等）的问题。所以我们现在将表格转换为排序规则，将字段转换为 utf8_unicode_ci。如果我们坚持使用 utf8_unicode_ci 来支持所有可能的语言，还是选择 utf8_bin 之类的其他东西，我们需要在这里进行一些确认？

对于我们使用 mysqli 的 php 文件的下一个问题，我们已经设置了这个。

```
if (!mysqli_set_charset($link, "utf8")) {
    echo("Error loading character set utf8: ". mysqli_error($link));
  } 
  else {
    echo("Current character set: ". mysqli_character_set_name($link));
  } 
```

然后对于我们只使用mysql的地方，我们做了如下

```
mysql_query("SET NAMES 'utf8'");
mysql_query("SET CHARACTER SET utf8");
mysql_query("SET COLLATION_CONNECTION = 'utf8_unicode_ci'"); 
```

现在我们发现这个问题很乏味，我们害怕我们可能会错过。是否可以像我们为数据库连接设置的配置文件一样设置此字符设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:38:09.130

**不要将 mysql_* 与 mysqli_* 函数混合使用。**你需要保持一致！您首先使用**mysqli_**，然后使用**mysql_**。那是行不通的！

我就是这样做的：

```
mysqli_set_charset($Handle, 'utf8'); // <- add this too
mysqli_query($Handle, "SET NAMES 'utf8';");
mysqli_query($Handle, "SET CHARACTER SET 'utf8';");
mysqli_query($Handle, "SET COLLATION_CONNECTION = 'utf8_unicode_ci';");
// might be a bit redundant but it's safe :) ... I think :) 
```

*然后确保为它提供正确的 UTF8。*

# regex - 需要匹配但从列表中排除

> ID：13101527
> 
> 赞同：2
> 
> 时间：2012-10-27T15:31:25.953
> 
> 标签：regex, regex-negation, regex-lookarounds

`(AEF01?/.*|.*/FC070?/.*).*`会发现

```
AEF01/AL020/na/na/na 
```

和

```
ABB03/FC070/na/na/na 
```

但不是

```
ANB00/FF030/na/na/na 
```

但我希望它反过来 - 我希望它查看第一列并忽略任何`AEF01`代码，但在该列中选择任何其他内容，同时查看第二列并忽略`FC070`但选择其他任何内容。`AEF01`并且`FC070`可能并不总是一起出现。

我已经尝试过`[^]`，`(?!)`一切`(?<!)`都无济于事。我很想解决这个问题，因为我的项目没有这个表达式就停滞了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:11:01.897

更短的方法：

```
^(?!AEF01/)\w+/(?!FC070/)\w+/.*$ 
```

如果您需要排除下划线，则需要更改`\w`为`[A-Z0-9]`

[在使用Boost](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)正则表达式语法的 Sublime Text 2 中测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:37:56.783

我建议你使用正则表达式模式

```
((?<=^)(?!AEF01)[A-Z0-9]{5}(?=\/)|(?<=^[A-Z0-9]{5}\/)(?!FC070)[A-Z0-9]{5}(?=\/|$)) 
```

# java - 我怎样才能让我的程序接受超过 9 位数字？

> ID：13101529
> 
> 赞同：2
> 
> 时间：2012-10-27T15:31:33.400
> 
> 标签：java, numbers, primes, numberformatexception

我目前正在编写一个测试素数的小应用程序。它是基于 gui 的，但我遇到了一个问题。我在程序中添加了一些限制，用户只能使用 numberformatexception 处理程序输入数字，但每当用户输入超过 9 位长度的数字时，它不再将其视为数字。这个问题有解决方案吗？我在下面留下了我的代码。

```
static void validation() // This is what happens when the "Check" button is clicked
{

    // Retrieve information from the fields and print it out on the Frame
    if (jtfX.getText().trim().length() == 0) // Check if the field is empty
    {
        jlSolution.setText("You have not entered anything yet");

    }

    else // Otherwise...
    {

        try // In general....
        {

            if (Long.parseLong(jtfX.getText()) < 0) // Check if it is a negative value
            {
                                jlSolution.setText("The number you entered is less than zero");
            }
                            else // If it isn't...
            {
                                jlSolution.setText(new Algorithm(Integer.parseInt(jtfX.getText())).check()); // ....then check if this number is prime.
            }
        }

        catch (NumberFormatException nfe) // ... always catch those who refuse to follow simple rules!
        {
            jlSolution.setText("Numerical values only please. " + "You entered: " + jtfX.getText());

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:58:22.880

假设该类`Algorithim`是自定义编写的类，您可以将其构造函数中的整数参数替换为 a`BigInteger`以保存更大的值。

您将像这样更新您的`jlSolution`字段：

```
Algorithm algorithm = new Algorithm(new BigInteger(jtfX.getText()));
jlSolution.setText(algorithm.check()); 
```

# android - 如何使 Eclipse 自动填充 android:text 而不是 android:text=""

> ID：13101536
> 
> 赞同：0
> 
> 时间：2012-10-27T15:32:07.143
> 
> 标签：android, eclipse, adt

我编写 android 应用程序，我在 eclipse 中有一个烦人的功能，我不知道如何关闭。我希望 eclipse 自动填充`android:textStyle`并给我更多选项，如“粗体”、“斜体”而不是自动填充`android:textStyle=""`，而不给我上面提到的选择选项。
请具体并回复**ASVP**。请给我指示，例如转到文件->打开...，我有带有 ADT `Version: 20.0.3.v201208082019-427395`
**THANKS的 eclipse 4.2.1**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:19:48.907

您描述的自动填充称为内容辅助。您不需要改变它的工作方式，您只需要了解它的更多信息：您可以随时通过按`Ctrl`+手动触发此方法`Space`。

在视图的 XML 类型中的新行上：`textst`然后按`Ctrl`+`Space`获取：

```
 android:textStyle="" 
```

当光标仍在引号*之间*`Ctrl`时，再次按+`Space`以查看“正常”、“粗体”、“斜体”的列表。

*您也*可以通过使用`|`符号快速添加更多样式，例如`android:textStyle="bold|"`，只需按`Ctrl`+`Space`到另一个说“斜体”...

```
 android:textStyle="bold|italic" 
```

* * *

**从评论中添加，**
我不太了解自定义 Content Assist，但要达到其 XML 设置，请访问：

**窗口**->**首选项**，然后**XML** -> **XML 文件**->**编辑器**->**内容辅助**

您可以在此处找到各种设置，包括选择延迟和提示字符。如果您使用`<a:="|`它，它将覆盖Android XML 文件中几乎每一行的*开头。*但是您可能希望通过列出*每个*字符`aAbBcC`（等）来尽可能全面地打开内容辅助......

您也可以使用 HTML 键盘标签制作键盘按钮，例如我`Bonzai!`使用：

```
 <kbd>Bonzai!</kbd> 
```

# scala - 标量错误：';' 预期但发现“导入”

> ID：13101539
> 
> 赞同：5
> 
> 时间：2012-10-27T15:32:16.047
> 
> 标签：scala

当我将此类添加到 scala 工作表时，我收到错误：

';' 预期但发现“导入”。

```
object polynomials {

    class Poly(val terms: Map[Int , Double]) {
        def + (other: Poly) = new Poly(terms ++ other.terms)
    }

    val p1 = new Poly(Map(1 -> 2.0, 3 -> 4.0, 5 -> 6.2))

} 
```

我觉得这门课很好，有什么遗漏吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T16:26:37.027

这是一个错误。几天前发布了一个新版本的工作表来修复它，因此请转到帮助 > 检查更新，新版本应该可以安装。我在 Worksheet 0.1.2.v-2_09-201210230838-85b738a 上试过你的代码，没问题。

# javascript - 有没有办法防止网站文本被搜索？

> ID：13101542
> 
> 赞同：2
> 
> 时间：2012-10-27T15:32:35.910
> 
> 标签：javascript, css, search, web

在网站中搜索时`Ctrl + F`，我想排除一些文本。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:19:32.157

## 显然

一些快速测试表明，将找不到通过伪元素添加的文本内容。请参阅使用以下示例代码（HTML5）的**[this fiddle](http://jsfiddle.net/cYzyN/4/)**（以搜索“Google”为例）。我意识到您可能想要使用`a`标签或其他东西，并且可能需要使用 javascript 来实现功能，但关键是，您可以根据您的要求制作少量文本，这些文本对搜索是不可见的。

**HTML**

```
<ul class="hideText">
    <li data-cB="Google" data-cA="https://www.google.se"></li>
    <li data-cB="GitHub" data-cA="https://github.com"></li>
</ul> 
```

**CSS**

```
.hideText {list-style: none}
.hideText li {
    width: 200px;
    height: 50px;
    padding: 2px;
    background-color: #ddd;
    border: 1px solid #bbb;
    border-top-color: #eee;
    border-left-color: #eee;
}
.hideText li:before {
    content: attr(data-cB);
    display: block;
    font-size: 1.2em;
    font-weight: bold;
}
.hideText li:after{
    content: attr(data-cA);
    font-size: .8em;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T15:50:55.703

我觉得这有点超出了这个问题的范围，但是 Mozillazine 上有一个论坛帖子讨论了 Google 如何覆盖 Cmd-F。帖子在这里

[forums.mozillazine.org/viewtopic.php?f=12&t=2011073](http://forums.mozillazine.org/viewtopic.php?f=12&t=2011073)

这是一个错误报告，讨论了如何永远不允许网站捕获命令快捷方式

[https://bugzilla.mozilla.org/show_bug.cgi?id=459744](https://bugzilla.mozilla.org/show_bug.cgi?id=459744)

我建议您使用图像或画布作为您不希望人们使用 Cmd-F 的文本，因为这将获得您想要的结果。

# c# - 枚举组合和位运算符

> ID：13101545
> 
> 赞同：0
> 
> 时间：2012-10-27T15:32:55.787
> 
> 标签：c#, enums

我的代码中定义了以下枚举：

```
[Flags]
public enum Symbol
{
    A,
    B,
}

public enum Production
{
    AA = Symbol.A | Symbol.A,
    AB = Symbol.A | Symbol.B,
    BA = Symbol.B | Symbol.A, // <- this will obviously not work
} 
```

我打算使用它们，`enums`因为它们最终会阻止不需要`Symbols`的用于`Productions`. 问题是以下代码不会产生我所追求的输出：

```
Productions product1 = (Productions) (Symbol.A | Symbol.A); // Production.AA
Productions product2 = (Productions) (Symbol.A | Symbol.B); // Production.AB
Productions product3 = (Productions) (Symbol.B | Symbol.A); // Production.AB (and not Production.BA as I would like) 
```

我完全理解为什么会发生这种情况，但想知道是否可以使用按位运算符的组合使其按我最初的意图工作？

或者一般来说我试图以不正确的方式使用枚举，因此应该切换到`chars`甚至自定义结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:49:19.540

好吧，因为您需要注意 A 和 B 的顺序，而不是使用一些不可交换的操作。我最好建议每个位置都应该具有指定权重的方法，并且您可以简单地添加带有权重的符号。由于`Enum`s 是`int`s 您可以为每个位置分配 10^i 的权重，其中 i 是从右到左查看的位置的从零开始的索引。即使这样，您也可以计算更多符号。这就像经典的阿拉伯数字，但使用符号而不是常规数字。代码可以是这样的：

```
 [Flags]
    public enum Symbol
    {
        A,
        B,
    }

    public enum Production
    {
        AA = Symbol.A *10 + Symbol.A, //0
        AB = Symbol.A *10 + Symbol.B, //1
        BA = Symbol.B *10 + Symbol.A, //10
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:15:00.443

您正在尝试执行[模式匹配](http://en.wikipedia.org/wiki/Pattern_matching)。这不是枚举的用途。诸如 F# 之类的语言有一个很好的内置机制来执行此操作，例如：

```
match expression with 
| pattern_1 -> expression_1 
| pattern_2 -> expression_2 
| pattern_n -> expression_n 
```

但是 C# [还没有]。有一个很棒的项目可以向 C# 添加一个库，以赋予它这个称为[Functional C#](http://functionalcsharp.codeplex.com/)的功能。我认为图书馆是你最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:09:23.080

由于您想保留有关值和位置的信息，因此您需要对不同位置的不同值使用不同的枚举值：

```
[Flags]
public enum Symbol {
  FirstA = 1,
  FirstB = 2,
  SecondA = 4,
  SecondB = 8
}

public enum Production {
  AA = Symbol.FirstA | Symbol.SecondA,
  AB = Symbol.FirstA | Symbol.SecondB,
  BA = Symbol.FirstB | Symbol.SecondA
} 
```

# asp.net - 使用 vb.net 上传/下载文件

> ID：13101546
> 
> 赞同：2
> 
> 时间：2012-10-27T15:32:58.527
> 
> 标签：asp.net, vb.net, file-upload

我正在尝试使用带有 Visual Studio 2008 的 vb.net 和 asp.net 开发一个带有文件上传和下载选项的网站。任何人都可以帮助我了解如何提供将文件上传到服务器然后提供下载链接的功能将可供普通用户从服务器下载文件。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:41:49.387

使用 FileUpLoad 控件。这是一个上传示例（在 c# 中）： [http ://www.c-sharpcorner.com/UploadFile/mahesh/FileUpload10092005172118PM/FileUpload.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/FileUpload10092005172118PM/FileUpload.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:38:22.557

您可以使用`asp:FileUpload`控件将文件上传到您的服务器，该位置具有写入文件的权限

*   [FileUpload 控件概述](http://msdn.microsoft.com/en-us/library/ms227677%28v=vs.80%29.aspx)
*   [文件上传示例](http://msdn.microsoft.com/en-US/library/ms227669%28v=vs.80%29.aspx)

就像将控件放在`.aspx`文件中一样简单

```
<asp:FileUpload runat="server" ID="MyFileUpload" /> 
```

代码隐藏

```
If (MyFileUpload.HasFile) Then
   MyFileUpload.SaveAs('the full path to directory ' & filename)

End If 
```

您可以将文件描述及其路径存储在数据库中，在您的页面上检索并显示给用户

您还可以浏览目录并列出页面上的文件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-18T11:45:34.750

将 FileToCopy 调暗为字符串

```
 FileToCopy = "F:\fd_demo_limits.swf"

    Dim filenameTest = System.IO.Path.GetFileName(FileToCopy)

    Dim path As String = "E:\"

    Dim filename As String = "communicate.png"

    Dim file_ As New System.IO.FileInfo(path + filename)

    Dim file_ContentLength As String = "900000" ' check file Length file_.Length = 833740
    If (file_.Length > file_ContentLength) Then
        MsgBox("file length is large")
        Exit Sub
    End If

    Dim allow_send_pic() As String = {".jpg", ".png", ".gif", "ico", ".png"}

    Dim Extension As String = System.IO.Path.GetExtension(filename)

    If Array.IndexOf(allow_send_pic, Extension.ToLower()) = -1 Then
        MsgBox("File extension not valid")
        Exit Sub
    End If

    If System.IO.File.Exists(FileToCopy) = True Then

        While (System.IO.File.Exists(path + filename))
            filename = "Copy of " + filename
        End While

        System.IO.File.Copy(FileToCopy, path + filename)
        MsgBox("File Copied")

    End If 
```

# c# - 在 wp7 中随机选择图像

> ID：13101551
> 
> 赞同：0
> 
> 时间：2012-10-27T15:33:54.783
> 
> 标签：c#, image, windows-phone-7

我的项目有两个页面，当我从 page1 导航到 page2 时，我使用下面的代码在堆栈面板上加载图片

```
var imageResource = Application.GetResourceStream(
          new Uri("WindowsPhonePuzzle;component/numbers/numbergame.png",
          UriKind.Relative));   
 this.ImageStream = imageResource.Stream; 
```

如果我想要两张或更多张图片并每次随机加载或连续加载我必须更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:51:40.740

您需要将要使用的图像的 Uris 存储在某种集合中。然后使用随机选择一个。

```
Random r = new Random(DateTime.Now.Millisecond);
int index = r.Next(0, myCollection.Count);
var imageResource = Application.GetResourceStream(new Uri(myCollection[i], UriKind.Relative)); 
this.ImageStream = imageResource.Stream; 
```

您也可以直接访问资源，但您需要确保您正在处理图像的 Uri。

# python - 从地图猜测 rgb 渐变？

> ID：13101555
> 
> 赞同：5
> 
> 时间：2012-10-27T15:34:12.823
> 
> 标签：python, image, python-imaging-library, gradient, rgb

我有一张像这样比例的地图：（数字只是一个例子）

![坡度](../Images/58a2fca561c8b7ec2e3d1020e1ea9890.png)它描述了地图上的单个变量。但是，我无权访问原始数据，并且对图像处理几乎一无所知。我所做的是使用 PIL 获取地图上每个点的像素坐标和 RGB 值。只需使用`pix = im.load()`和保存`pix[x,y]`每个`x,y`. 现在我想用上面的梯度猜测每个点的值。

这种梯度有标准公式吗？训练有素的眼睛看起来很熟悉吗？我已经访问[了数学函数数字图书馆的](http://dlmf.nist.gov/help/vrml/aboutcolor)一些例子......但我不确定它是使用色调，rgb高度函数还是其他东西（为了让事情更容易，我也对一些绿色/眉毛/红色视而不见) :)

任何关于如何进行、图书馆、链接或想法的提示都值得赞赏。谢谢！

# 编辑：

根据回复和 martineau 的建议，我试图捕捉顶部和底部的颜色：

```
def rgb2hls(colotup):
    '''converts 225 based RGB to 360 based HLS
    `input`: (222,98,32) tuple'''

    dec_rgb = [x/255.0 for x in colotup] # use decimal 0.0 - 1.0 notation for RGB
    hsl_col = colorsys.rgb_to_hls(dec_rgb[0], dec_rgb[1], dec_rgb[2])
    # PIL uses hsl(360,x%,y%) notation and throws errors on float, so I use int
    return (int(hsl_col[0]*360), int(hsl_col[1]*100), int(hsl_col[2]*100))

def pil_hsl_string(hsltup):
    '''returns a string PIL can us as HSL color
    from a tuple (x,y,z) -> "hsl(x,y%,z%)"'''
    return 'hsl(%s,%s%%,%s%%)' % (hsltup[0], hsltup[1], hsltup[2])

BottomRed = (222,98,32) # taken with gimp
TopBlue =  (65, 24, 213) 

hue_red = pil_hsl_string(rgb2hls(BottomRed))
hue_blue = pil_hsl_string(rgb2hls(TopBlue)) 
```

但是它们的结果却截然不同……这让我担心使用 rgb_to_hls 函数来提取值。还是我做错了什么？下面是 color 用代码转换成的内容： ![在此处输入图像描述](../Images/b8fdd110e90cbd39873239b064148329.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:55:47.257

图像中的比例在我看来就像一个 HSV 渐变，就像[这个问题](https://stackoverflow.com/q/10901085/355230)中提到的一样。如果是这样，您可以使用`colorsys.rgb_to_hls()`or`colorsys.rgb_to_hsv()`函数从像素中的 r,g,b 值获取 0 到 1 之间的色调颜色值。然后可以相应地映射。

但是，除了进行 OCR 之外，我不知道如何确定所表示的值的范围，除非它是一些可以硬编码的一致范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T20:28:05.373

有趣的问题..

如果你在 HSL 颜色空间中从 250,85%,85% --> 21,85%,85% 顺时针走动，你会得到一个非常接近你所显示的渐变。明显的区别是您的图像显示出相当窄的绿色值带。

因此，如果您有 4 个幻数，那么您可以插值到地图中的任何点。

这些当然是第一个和最后一个颜色，也是第一个和最后一个比例值。这是我在 H 通道上使用直线渐变得到的图像（使用 gimp）。 ![在此处输入图像描述](../Images/15d6a42797af406aa8569ab368d92620.png)

编辑：我已经启动了一个程序来获取每一行的像素值，并绘制结果。您可以看到，色调确实不是线性的，您还可以看到 S 和 V 通道在 115 左右（距图像顶部 115 像素）有明显下降，这确实与绿色波段相对应。

鉴于曲线的形状，我倾向于认为它们可能是为了建模某些东西。但是没有相关领域的经验来识别曲线的形状。

下面，我添加了 HSV 和 RGB 模型变化的图表。图表的左侧代表条形的顶部。X 轴标签代表像素

很有趣，我想。已收藏。

![在此处输入图像描述](../Images/4b6ecfd492473679d62b579373d05949.png)

![在此处输入图像描述](../Images/53b116c542b3ac639c5d9fedd94332f9.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T15:18:31.083

我建议定义一个要比较颜色的区域。对区域进行 FFT。每种颜色都由频率定义。你在countour规模上做同样的事情。然后比较并缩小一个值。

我发现有些人喜欢更好地理解它。

[http://www.imagemagick.org/Usage/fourier/](http://www.imagemagick.org/Usage/fourier/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T15:41:50.883

您可以通过改变具有固定饱和度和亮度的色调来获得类似的效果。

[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

# java - Java中的投资代码

> ID：13101556
> 
> 赞同：1
> 
> 时间：2012-10-27T15:34:24.740
> 
> 标签：java

我有一个项目，我必须编写一个程序，提示用户输入初始投资金额和目标投资金额，并计算从初始金额增长到固定利率目标金额需要多少年（即: 5%)。（使用 WHILE 循环）。打印出每年的结果。例如，如果您选择在 5 年内投资 1,000 美元： 第 1 年 1005 第 2 年 1011 等：

**我能够编译 java 程序，但我只能提示用户进行初始投资和目标投资，利息为 5%。输出不正确。我在做什么不正确？这是我的代码。**

```
import static java.lang.System.out;
import java.util.Scanner;
import java.io.*;

public class Investment_Calculator {//main
public static void main(String[] args) {//begins body

double principal = 1;//initial amount investing
double interest = 1;
double rate = 0.05;//the fixed interest amount
int years = 1;//amout of years it will take to achieve goal
double goal = 1;
double total = 1;

Scanner myScanner = new Scanner(System.in);

System.out.println("*************************************** ");
System.out.println("* Welcome to the Investment Calculator * ");
System.out.println("*************************************** ");

System.out.println ("Enter your initial investment amount: if you want to exit enter   0.");
int inputNumber = myScanner.nextInt();
principal = inputNumber; 

if (inputNumber == 0){//if num = 0 exit class

System.exit(0);
}

System.out.println ("Enter your goal investment amount: ");
int inputNumber2 = myScanner.nextInt ();
goal = inputNumber2;

System.out.println ("The fixed interest rate is 5%");

total= principal; // start with our initial amount of money
for (; total < goal; total= (1+interest)*total);   

{   System.out.print("The number of years you must invest to meet your goal of $ ");
 System.out.print(goal);
 System.out.print(" is");   
 System.out.println(years);
 System.out.println(" years");

} 
}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T15:35:57.937

```
for (; total < goal; total= (1+interest)*total); 
```

在这个循环的末尾有一个分号。去掉它。

因此，`print`for 循环之后的下一组语句变为`unnamed block`：-

```
{   
 System.out.print("The number of years you must invest to meet your goal of $ ");
 System.out.print(goal);
 System.out.print(" is");   
 System.out.println(years);
 System.out.println(" years");

    years++;  <-- // Increment `years` here.
} 
```

这些只会执行一次。

* * *

**更新**： -

您可以使用以下代码获取每年的总利息和最终输出

```
int years = 1;
while (principal <= goal) {
    double totalInterest = principal * rate * years / 100.0;
    principal = principal + totalInterest;

    System.out.println("Interest amount for year: " + years + 
                       " = " + totalInterest);

    years++;
}

System.out.print("The number of years you must invest to meet your goal of $ ");
System.out.print(goal);
System.out.print(" is");   
System.out.println(years);
System.out.println(" years"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:38:12.557

分号 at`for(; total < goal; total = (1+interest) * total);`导致问题。

将其更改为：

```
for (; total < goal; total= (1+interest)*total)   
{   
 System.out.print("The number of years you must invest to meet your goal of $ ");
 System.out.print(goal);
 System.out.print(" is");   
 System.out.print(years);
 System.out.println(" years");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:58:43.243

将其替换为您当前的 for- 语句

```
int year = 0;
    for (; total < goal; total= ((1+rate)*total), ++year)
    {
     ...
     // whatever you were doing in for loop
    }
System.out.println (year); 
```

# javascript - 多个 appendChild 调用不起作用

> ID：13101557
> 
> 赞同：0
> 
> 时间：2012-10-27T15:34:26.187
> 
> 标签：javascript, appendchild, createelement

我通读了几个线程，但没有找到明确的答案。我正在使用 JavaScript 库 (Drinks.js) 在我的网页上放置几个小部件。以下代码将向我的 div 元素添加一个项目`pnlThermo`：

```
function create(item) { 
    var thermo = Drinks.createElement('display');
    thermo.setAttribute('id', item);
    thermo.setAttribute('label', item);
    Drinks.appendChild('pnlThermo', thermo);         
} 
```

好吧，现在我想向同一个 div 元素添加几个项目。无论我是使用 for 循环还是显式调用该函数，都只会呈现第一项。例如：

```
create('T1');
create('T2');
create('T3'); 
```

导致`T1`只显示。也许我错过了一些东西，我对 JavaScript 编程很陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:49:14.190

参考手册（[http://goincompany.com/DTManual01.pdf](http://goincompany.com/DTManual01.pdf)）说：

> 创建 HTML 元素后，您必须将其附加到 HTML 容器中。为此，您必须使用 Drinks 类提供的 appendChild 函数。Drinks.appendChild('body', gauge); 'body' 是 HTML 容器的 ID。如果父级是乐器，则此功能不起作用。我们必须使用仪器的 appendChild 方法，但我们稍后会看到。

似乎暗示第一个参数需要是一个 HTML 标记名，这没什么意义，但是恕我直言，这个库有点奇怪。

# android - Android GridView 未更新

> ID：13101561
> 
> 赞同：1
> 
> 时间：2012-10-27T15:34:54.957
> 
> 标签：android, android-imageview, textview, android-gridview

我有一个以 3x4 矩阵排列的 GridView，GridView 中的每个项目都是一个 FrameLayout，其中包含一个 ImageView 和一个 Textview。最初，TextView 被设置为显示字母“X”。单击时，字母变为“Y”。

它适用于除第一个之外的所有 GridView 项目。如果我单击第一个（左上角），那么无论我等待多长时间，都不会发生任何事情。如果我然后单击 Android 模拟器屏幕上的任何其他位置（甚至在 GridView 本身之外），此时左上角的 GridView 项目将更改为“Y”。

我有一种直觉，这与“ImageAdapter”中的“getView”在渲染GridView之前被多次调用“position = 0”这一事实有关，顺序如下：

0 0 1 2 3 4 5 6 7 8 9 10 11 0

现在也许这就是Android的工作方式，我不知道，但这似乎很奇怪。如果有人可以帮助我，我将非常感激。

更新：看来问题与getView（）中的“MyView = convertView”有关，如果我只是删除它并始终创建一个新视图（好像convertView总是为空），那么问题就不再存在了。现在我认为这个解决方案不会成为问题，因为我不使用滚动，并且创建的视图数量应该是 12（即 3x4 GridView），但如果有人能解释问题的正确解决方案，它会有所帮助很多，谢谢。

我的主要活动（也是唯一的活动）：

```
package com.xxxxxx.test;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);

        init_gridview();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private void init_gridview()
    {
            setContentView(R.layout.game);
            GridView gridview = (GridView) findViewById(R.id.gridview);
            gridview.setNumColumns(3);
            gridview.setColumnWidth(32);
            gridview.setAdapter(new ImageAdapter(this));

            gridview.setOnItemClickListener(new OnItemClickListener() 
            {
                public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
                {
                    grid_click(position,v);
                }
            });
    }

    public class ImageAdapter extends BaseAdapter 
    {
            private Context mContext;

            public ImageAdapter(Context c) 
            {
                mContext = c;
            }

            public int getCount() 
            {
                return(3*4);
            }

            public Object getItem(int position) 
            {
                return null;
            }

            public long getItemId(int position) 
            {
                return 0;
            }

            public View getView(int position, View convertView, ViewGroup parent) 
            {
                View MyView = convertView;

                if (convertView == null) 
                {  
                    LayoutInflater li = getLayoutInflater();
                    MyView = li.inflate(R.layout.grid_item, null);
                }
                else
                {
                    MyView=convertView;
                }

                TextView tv = (TextView)MyView.findViewById(R.id.grid_item_text);
                tv.setText("X");

                ImageView iv = (ImageView)MyView.findViewById(R.id.grid_item_image);
                iv.setImageResource(R.drawable.tile);

                MyView.setLayoutParams(new GridView.LayoutParams(32,32));
                return(MyView); 
        }
    }

    private void grid_click(int position, View v)
    {
        View clicked_view=v;

        TextView tv2 = (TextView)clicked_view.findViewById(R.id.grid_item_text);
        tv2.setText("Y");
    }
} 
```

主布局，名为 game.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Layout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical"
    android:gravity="center"
    android:background="@android:color/white">

<GridView 
        android:id="@+id/gridview"
        android:background="@android:color/white"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:columnWidth="106dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="0dp"
        android:horizontalSpacing="0dp"
        android:stretchMode="none"
        android:gravity="center"
        android:listSelector="@android:color/transparent"
    />
</LinearLayout> 
```

最后是 GridView 中每个项目的 FrameLayout，称为 grid_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView
        android:id="@+id/grid_item_image"
        android:src="@drawable/tile"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        tools:ignore="contentDescription"
    />

    <TextView
        android:id="@+id/grid_item_text"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:textStyle="bold"  
        android:textSize="17sp"  
        android:shadowColor="#555555"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:shadowRadius="1.5"
    />   

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:10:48.573

我认为问题出在您的`grid_click`函数上，它假定被单击的视图是整个单元格（`FrameLayout`），而它可能只是图像或文本视图本身。

# android - 安卓：ClassCastException

> ID：13101564
> 
> 赞同：0
> 
> 时间：2012-10-27T15:35:12.860
> 
> 标签：android, xml, classcastexception

我正在修改我的应用程序，设置一些动画。现在基本上我的活动是组成的

```
<LinearLayout>
    <LinearLayout>
        <!-- THE HEADER AND A BUTTON -->
    </LinearLayout>
    <View>
        <!-- A SEPARATION LINE -->
    </View>
    <ScrollView>
        <!-- THE CONTENT -->
    </ScrollView>
</LinearLayout> 
```

动画始终设置为从左侧推入标题+行，然后从按钮推入内容。现在在一个特定的地方`Activity`，我看到这条线`View`被放入了`ScrollView`（那里有一个`RelativeLayout`，因为它`ScrollView`只有一个孩子）。

当我第一次设置动画时（线在错误的位置，一切正常）：

```
private void animateHeaderAndContent(){
    LinearLayout header = (LinearLayout) findViewById(R.id.overview_lin_0);
    header.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_left_in_header));
    ScrollView content = (ScrollView) findViewById(R.id.sv_overview_content);
    content.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_up_in_content));
} 
```

在 xml 中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        android:orientation="vertical" 
        >
        <LinearLayout 
            android:id="@+id/overview_lin_0"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            >
            (...)
        </LinearLayout>

        <ScrollView android:id="@+id/sv_overview_content"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            >
            <RelativeLayout 
                android:id="@+id/rel_over" 
                android:orientation="vertical"
                android:layout_width="match_parent" 
                android:layout_height="wrap_content"        
                >
                 <View   
                    android:id="@+id/v_overview_line1"
                    android:layout_height="1dp"
                    android:layout_width="match_parent"
                    android:layout_marginBottom="10dp"
                    android:background="#FFFFFF"
                    />

                (...) 
```

当我像下面这样编辑代码和 xml 时，它在 line 处给了我一个 ClassCastException `ScrollView content = (ScrollView) findViewById(R.id.sv_overview_content);`，这与以前完全相同。

在代码中：

```
private void animateHeaderAndContent(){
    LinearLayout header = (LinearLayout) findViewById(R.id.overview_lin_0);
    header.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_left_in_header));
    View line = (View) findViewById(R.id.v_overview_line1);
    line.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_left_in_header));
    ScrollView content = (ScrollView) findViewById(R.id.sv_overview_content);
    content.setAnimation(AnimationUtils.loadAnimation(this, R.anim.push_up_in_content));
} 
```

在 xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" 
    android:layout_height="match_parent"
    android:orientation="vertical" 
    >
    <LinearLayout 
        android:id="@+id/overview_lin_0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >
        <View 
            android:layout_width="25dp"
            android:layout_height="0dp"
            />
        <TextView 
            style="@style/TextHeader"
            android:id="@+id/tv_overview_name"
            android:layout_width="0dp"
            android:layout_weight="8"
            android:gravity="center"
            android:layout_height="wrap_content"
            />
        <ImageButton style="@style/ImageButtonSmall"
            android:layout_width="26dp"
            android:layout_height="26dp" 
            android:src="@drawable/ic_action_delete"
            android:contentDescription="@string/desc"
            android:onClick="onClickDeleteBet"
            />
    </LinearLayout>

    <View   
        android:id="@+id/v_overview_line1"
        android:layout_height="1dp"
        android:layout_width="match_parent"
        android:layout_marginBottom="10dp"
        android:background="#FFFFFF"
        />

    <ScrollView 
        android:id="@+id/sv_overview_content"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >
        <RelativeLayout 
            android:id="@+id/rel_over" 
            android:orientation="vertical"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content"        
            >
            (...) 
```

这怎么解释（因为在这两种情况下都是完全相同的操作，除了`View`中间有一个不应该干扰 a 的操作`findViewById(...)`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:41:15.953

类中的引用可能`R`没有正确更新。这有时会发生。销毁`R`eclipse中生成的文件（文件夹下`gen`）。然后立即重启eclipse。接下来，选择项目并单击`Project`-->`Clean...` 然后再次构建您的应用程序，`R`该类将重新生成。

我希望这有帮助。

# ios - 以编程方式更改使用 nib 创建的 uiwebview 框架

> ID：13101569
> 
> 赞同：1
> 
> 时间：2012-10-27T15:35:54.397
> 
> 标签：ios, uiwebview

我有一个使用 nib 创建的 UIwebview。我有很多控制器访问这个 webview(in nib) 。对于来自不同控制器的每次调用，nib 中 webview 的大小应相应更改。如何以编程方式实现此功能？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:51:58.217

您只需要在控制器中创建此 UIWebView 的出口。（和属性）

```
IBOutlet UIWebview *webExample;
@property (nonatomic, strong) IBOutlet UIWebview *webExample; 
```

在您的代码中向 UIViewWeb 发送调用时，您可以检测到发送者并更改视图的帧大小。

```
webExample.layer.frame=CGRectMake(x,y,200,200); 
```

# ios - iPad 上 iOS6 中没有网络连接时出现 NSInternalInconsistencyException

> ID：13101574
> 
> 赞同：1
> 
> 时间：2012-10-27T15:36:17.517
> 
> 标签：ios, ipad, ios6

发现在没有网络连接时运行 iOS 6 的 iPad 存在错误。该应用程序将崩溃并出现 NSInternalInconsistencyException，指出丢失的笔尖是原因。

*   我已经确认 nib 存在于目标的 Build Phases >> Copy Bundle Resources
*   我的应用不需要网络连接即可工作，但使用 ASI 进行跟踪，10 秒后超时
*   该应用程序在有网络连接的 iPhone 和 iPad 上按预期工作
*   这个问题刚刚开始出现在 iOS 6 中；iOS 5 及更低版本按预期工作。

这是供参考的崩溃日志：http: [//pastebin.com/KJ3Rh5cA](http://pastebin.com/KJ3Rh5cA)

以前有人见过这样的事情吗？非常奇怪的错误，我似乎无法弄清楚。

# c# - Delphi的TStringStream在C#中的实现

> ID：13101575
> 
> 赞同：-2
> 
> 时间：2012-10-27T15:36:18.437
> 
> 标签：c#, delphi

如何在 C# 中实现 StringStream 类，如 Delphi 的 TStringStream 类。

下面是我在 Delphi 中的做法：

```
var
    StringStream: TStringStream;
begin
    StringStream := TStringStream.Create('');
    StringStream.Write('stackoverflow', SizeOf('stackoverflow'));
end; 
```

但是在 C# 中我没有 StringStream。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:42:29.530

你可能想要一个

*   `StringWriter`（`StringBuilder`在幕后使用）
*   或`StreamWriter`由`MemoryStream`.

我不知道 Delphi 是怎么做的，但是在 C# 中，字符串与字节流不同。

# android - 带有 ORMLite 的 Android 项目无法在 ant 中构建

> ID：13101576
> 
> 赞同：1
> 
> 时间：2012-10-27T15:36:29.190
> 
> 标签：android, ant, ormlite

我有一个带有 ORMLite 库的 Android 项目，我想在 F-Droid 上发布它。该项目在 Eclipse 中编译没有问题。但是，F-Droid 使用 ant 来构建项目，而在他们这边，项目无法构建，并出现以下（总结）代码中的错误：

```
private Dao<Habit, Integer> habitDao;
private Dao<Day, Integer> dayDao;

public Dao<Habit, Integer> getHabitDao() throws SQLException {
    if (habitDao == null) {
        habitDao = getDao(Habit.class);
    }
    return habitDao;
}

public Dao<Day, Integer> getDayDao() throws SQLException {
    if (dayDao == null) {
        dayDao = getDao(Day.class);
    }
    return dayDao;
} 
```

错误出现在 habitDao = getDao(Habit.class) 和 dayDao = getDao(Day.class) 行，并带有以下错误消息：

```
type parameters of D cannot be determined; no unique maximal instance exists for type variable D with upper bounds com.j256.ormlite.dao.Dao,com.j256.ormlite.dao.Dao 
```

这与此处描述的问题相同：[https](https://groups.google.com/forum/?fromgroups=#!topic/ormlite-android/rUVI0d-khKk) ://groups.google.com/forum/?fromgroups=#!topic/ormlite-android/rUVI0d-khKk ，并且应该是 Java 编译器中的错误。

现在，我不是专业的开发人员，所以添加显式转换意味着什么对我来说并不直观。这是我更改代码的方式：

```
public Dao<Habit, Integer> getHabitDao() throws SQLException {
    if (habitDao == null) {
        habitDao = getDao(Habit.class);
    }
    return (Dao<Habit, Integer>)habitDao;
}

public Dao<Day, Integer> getDayDao() throws SQLException {
    if (dayDao == null) {
        dayDao = getDao(Day.class);
    }
    return (Dao<Day, Integer>)dayDao;
} 
```

这为我解决了这个问题，ant 成功地构建了我的项目，并且该应用程序运行顺利。但是，F-Droid 的 ant 构建过程仍然失败，并出现与上述相同的错误。现在我迷路了，因为我不能再“调试”这个，就我的蚂蚁而言，项目没有问题，因此我所做的任何改变都是纯粹的猜测。

之后我又尝试了一件事：

```
@SuppressWarnings("unchecked")
public Dao<Habit, Integer> getHabitDao() throws SQLException {
    if (habitDao == null) {
        habitDao = (Dao<Habit, Integer>)getDao(Habit.class);
    }
    return (Dao<Habit, Integer>)habitDao;
}

@SuppressWarnings("unchecked")
public Dao<Day, Integer> getDayDao() throws SQLException {
    if (dayDao == null) {
        dayDao = (Dao<Day, Integer>)getDao(Day.class);
    }
    return (Dao<Day, Integer>)dayDao;
} 
```

但这纯粹是猜测，在 F-Droid 方面，构建过程仍然失败并出现同样的错误。

任何有关如何解决此问题的建议将不胜感激。

编辑：该应用程序是开源的，因此欢迎任何愿意尝试使用 ant 自己构建它的人访问：[https ://github.com/blaztriglav/did-i](https://github.com/blaztriglav/did-i)

# javascript - 了解 javascript 变量处理和引用，尤其是 canvas ImageArray 和数组分配

> ID：13101577
> 
> 赞同：0
> 
> 时间：2012-10-27T15:37:01.950
> 
> 标签：javascript, html5-canvas

考虑这段代码：

```
var deSaturated = deSaturate(greyscaleCtx.getImageData(0, 0, canvasWidth, canvasHeight)); 
```

imageData 来自 getImageData 画布函数。

```
function deSaturate (imageData) {
                var theData = imageData.data;

                var dataLength = theData.length;
                var i = dataLength-1;
                var lightLevel;
                // Iterate through each pixel, desaturating it
                while ( i >= 0) {
                    // To find the desaturated value, average the brightness of the red, green, and blue values

                    theData[i] = theData[i+1] = theData[i+2] = (theData[i] + theData[i + 1] + theData[i + 2]) / 3;

                    // Fully opaque
                    theData[i+3] = 255;
                    // returning an average intensity of all pixels.  Used for calibrating sensitivity based on room light level.
                    lightLevel += theData[i]; //combining the light level in the samefunction
                    i -= 4;

                }

                imageData.data = theData; //bring back theData into imageData.data - do I really need this?

                var r = [lightLevel/dataLength,imageData]
                return r;
            } 
```

在编写和优化此代码期间，我发现我并不真正了解 js 如何处理例如“theData”变量。正在使用它只是引用 imageData.data 的一种简短方法，在这种情况下，我最终不需要以下代码：

```
imageData.data = theData 
```

但是我是否要为性能下降（大量的 DOM I/O）付出代价？

或者正在`theData = imageData.data`实际复制原始数组（表示为 Uint8ClampedArray），然后我必须将修改后的数据重新分配给`imageData.data`.

我想这是基本的 javascript，但我在 MDN 和其他开发人员资源中发现了相互矛盾的代码示例，我真的很想正确理解这一点。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:08:17.300

在 javascript 中，分配 an`array`或 an`object`只是分配对该数组或对象的引用 - 它不会复制数据。仅当您实际创建一个新数组并复制数据或调用一些旨在为您执行此操作的函数时，才会生成副本。

因此，如果`imageData.data`是一个`array`，那么将其分配给`theData`只是为引用相同数据创建了一个快捷方式。它不会制作数据的新副本。因此，在修改 指向的数据后`theData`，您不必将其分配回，`imageData.data`因为只有一个数据副本，并且两者`theData`和都`imageData.data`指向了数据的同一个副本。

所以，直接回答你的问题，这条线是不必要的：

```
imageData.data = theData; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:29:28.603

刚刚进行了快速测试：

```
 var idata = ctx.getImageData(0,0,300,300);
    var data = idata.data;
    for(var i=0;i<data.length;i++){
        data[i]=0;
    }

    ctx.putImageData(idata,0,0); 
```

正如预期的那样，这正确地消除了屏幕的一部分。但是没有 putImageData 什么都不会发生。因此，更改数据对象，无论是否存储在不同的变量中，*都将*反映在该 imageData 对象中。但是，在调用 putImageData 之前，这不会影响画布。

所以，是的，您可以删除最终分配，它会按需要工作。

但是我会警告说，它*不是*一个有效的假设它是一个 Uint8ClampedArray。是的，这就是 Chrome 的处理方式（我上次检查过），这确实是官方规范使用的。然而，一些浏览器没有 Uint8ClampedArray 的概念，但仍然通过现已弃用的 CanvasPixelArray 支持画布。

所以你保证得到的只是一些类似数组的接口。当我试图通过创建一个新的 Uint8ClampedArray 来缓存图像数据的有趣特征时，我不得不以艰难的方式学习这一点，但在某些浏览器中失败了。

请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/CanvasPixelArray](https://developer.mozilla.org/en-US/docs/DOM/CanvasPixelArray)

# sharepoint-2010 - 如何在 SharePoint 2010 中为 CQWP 的 ItemStyle.xsl 添加自定义控件？

> ID：13101578
> 
> 赞同：1
> 
> 时间：2012-10-27T15:37:06.753
> 
> 标签：sharepoint-2010, custom-controls, cqwp

我想显示在 CQWP 中呈现的页面的面包屑。我已经为面包屑创建了自定义控件，但在 ItemStyle.xsl 中使用它时遇到了麻烦。如果您知道如何在 ItemStyle.xsl 中使用自定义控件，请分享一些信息。谢谢！

# java - 需要一个类似于 JTabbedPane 的组件

> ID：13101580
> 
> 赞同：1
> 
> 时间：2012-10-27T15:37:29.967
> 
> 标签：java, components, jtabbedpane

我正在寻找像“JTabbedPane”这样的组件，我可以在其中轻松地单独设计每个选项卡，但我不希望在运行时使用带有选项卡名称的小方形按钮！相反，我想激活代码中的每个选项卡面板。事实上，我想要多个具有相同大小和位置的“JPanel”（它们完全重叠）并且我在我的代码中手动设置了它们的可见性，但最重要的是我想设计每个面板一样简单可能（例如在设计时单击选项卡名称）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:42:59.390

如前所述，您可以在此处使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)创建自己的重叠面板。每个面板的可见性都可以通过编程方式更改。

# php - 通过php单击解析页面中的按钮

> ID：13101581
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:37:45.863
> 
> 标签：php, forms, button

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我想按下出现在以下位置的按钮：http: [//www.miafoto.it/iPhone/inarrivo/php/atacError.php?](http://www.miafoto.it/iPhone/inarrivo/php/atacError.php?partenza=Piazza+Bologna&arrivo=Via+Edoardo+D%27Onofrio&language=en&userLatitude=41.913325&userLongitude=12.521108) partenza=Piazza+Bologna&arrivo=Via+Edoardo+D%27Onofrio&language=en&userLatitude=41.913325&userLongitude=12.521108 直接在脚本中解析外部网站。我该怎么做？该脚本目前返回站点返回的完整 html。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:43:11.317

我通过在远程服务器上安装代理并从那里解锁网站解决了这个问题。我想我在到达那里之前穿过了十条路径。此外，由于该页面很快就进行了 catcha 测试，因此无法进行自动点击。

# java - Android Listview缓存在初始化时意外工作

> ID：13101588
> 
> 赞同：0
> 
> 时间：2012-10-27T15:38:12.647
> 
> 标签：java, android, listview, caching

我在listview（又名convertView）中的视图缓存有点麻烦所以这是我的代码，

```
private class CurrencyAdapter extends ArrayAdapter<CurrencyModel> {
    Context ctx;
    int layoutResourceId;
    List<CurrencyModel> adapter_models = null;

    public CurrencyAdapter(Context ctx, int layoutResourceId,
            List<CurrencyModel> model) {
        super(ctx, layoutResourceId, model);
        this.ctx = ctx;
        this.layoutResourceId = layoutResourceId;
        adapter_models = model;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        Log.d(Constants.APP_TAG, "position: " + position);
        View row = convertView;
        CurrencyAdapterContainer holder = null;
        if (row == null) {
            Log.d(Constants.APP_TAG, "APP NULL");
            row = ((Activity) ctx).getLayoutInflater().inflate(
                    layoutResourceId, parent, false);
            holder = new CurrencyAdapterContainer();
            holder.textView = (TextView) row
                    .findViewById(R.id.currencies_txt);
            holder.imgView = (ImageView) row
                    .findViewById(R.id.currencies_flag_icon);
            row.setTag(holder);

        } else {
            Log.d(Constants.APP_TAG, "APP NOT NULL");
            holder = (CurrencyAdapterContainer) row.getTag();
        }

        CurrencyModel curr = getItem(position);

        if (curr.currency_value == null) {
            if (counter < MAX_COUNTER) {
                ++counter;
                CurrencyJsonDownloader cDownloader = new CurrencyJsonDownloader(
                        curr, holder.textView);  //download currency value in background, and set textview text if currency_value has been loaded in onpostExcecute (i'm using AsyncTask)
                String url = CURRENCY_URL.replace("<symbol>", curr.symbol);
                Log.d(Constants.APP_TAG, "Url currency: " + url);
                cDownloader.execute(url);
            }
            holder.textView.setText("");
        } else {
            holder.textView.setText(curr.currency_value);
        }
        holder.imgView.setImageResource(curr.drawableId);

        return row;
    }

    @Override
    public CurrencyModel getItem(int position) {
        // TODO Auto-generated method stub
        return adapter_models.get(position);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return adapter_models.size();
    }
}

static class CurrencyAdapterContainer {
    ImageView imgView;
    TextView textView;
} 
```

这是我的 logcat 中的输出

位置：0 APP NULL

位置：1 APP NOT NULL

位置：2 APP NOT NULL

位置：3 APP NOT NULL

. . .

位置：10 APP NOT NULL

这会造成灾难，因为这意味着在后台作业中传递的文本视图是相同的文本视图，并且更改后的视图是相同的文本视图，并且另一个文本视图将具有空白视图，除非我滚动它当然再次调用 getView()一切都很好。但是在启动应用程序时这是一个问题，因为只有一个文本视图总是在改变它的值。

那么为什么会这样呢？有什么我可以做的吗？之前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:09:29.933

我认为问题出在您的列表适配器上。在这里，我发布了一个适配器类，我认为它会对您有所帮助。

```
public class UploadListAdaptor extends BaseAdapter {
private Context context;
private List<UploadDetailsObj> uploadList;

public UploadListAdaptor(Context context, List<UploadDetailsObj> list) {
    this.context = context;
    uploadList = list;

}

public int getCount() {
    return uploadList.size();
}

public Object getItem(int position) {
    return uploadList.get(position);
}

public long getItemId(int position) {
    return position;
}

/** LIST CATEGORY */

public View getView(int position, View convertView, ViewGroup viewGroup) {

    final UploadDetailsObj chlListObj = uploadList.get(position);

    if (convertView == null) {

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater
                .inflate(R.layout.inflator_progress_bar, null);

        TextView photoName = (TextView) convertView
            .findViewById(R.id.tv_photoname);

        Button btnProgress=(Button)convertView.findViewById(R.id.btn_progress);
    photoName.setText(chlListObj.getPhotoName());

    }

    return convertView;

}

   } 
```

您可以使用此代码调用此适配器。

```
 List<UploadDetailsObj> listofUploads= new ArrayList<UploadDetailsObj>();
 UploadListAdaptor uploadListAdptr = new UploadListAdaptor(yourclass.this,
            listofUploads);

    uploadListView.setAdapter(uploadListAdptr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:36:05.253

ListView 项目视图被回收，因此永远不要持有对特定项目视图的引用，并期望它在 ListView 滚动后表示相同的数据。

将数据项传递给您的工作任务，并让它更新数据。

更新：

*   如果您当前的项目不在屏幕上，它将从适配器请求（当 ListView 滚动到它时），并将显示更新的数据。
*   如果当前正在显示该项目，请调用`notifyDataSetChanged()`适配器，这将使 ListView 刷新其显示的项目。

# python - 反转字典

> ID：13101589
> 
> 赞同：2
> 
> 时间：2012-10-27T15:38:20.357
> 
> 标签：python, python-3.x

我正在尝试为学校编写一个程序。我是生物技术专业的，这是一门必修课，但我不是程序员。所以，这对很多人来说可能很容易，但对我来说很难。无论如何，我有一个大约 30 行的文本文件。每一行都有一个首先列出的电影名称和出现在电影中的演员，后面用逗号分隔。这是我到目前为止所拥有的：

```
InputName = input('What is the name of the file? ')
File = open(InputName, 'r+').readlines()

ActorLst = []
for line in File:
    MovieActLst = line.split(',')   

    Movie = MovieActLst[0]        
    Actors = MovieActLst[1:]      
    for actor in Actors:
        if actor not in ActorLst:
            ActorLst.append(actor)

    MovieDict = {Movie: Actors for x in MovieActLst} 
    print (MovieDict)
    print(len(MovieDict)) 
```

输出（缩短）：

```
What is the name of the file? Movies.txt
{"Ocean's Eleven": ['George Clooney', 'Brad Pitt', 'Elliot Gould', 'Casey Affleck', 'Carl Reiner', 'Julia Roberts', 'Angie Dickinson', 'Steve Lawrence', 'Wayne Newton\n']}
1
{'Up in the Air': ['George Clooney', 'Sam Elliott', 'Jason Bateman\n']}
1
{'Iron Man': ['Robert Downey Jr', 'Jeff Bridges', 'Gwyneth Paltrow\n']}
1
{'The Big Lebowski': ['Jeff Bridges', 'John Goodman', 'Julianne Moore', 'Sam Elliott\n']}
1 
```

我创建了一个字典 ( `MovieDict`)，其中包含作为键的电影名称和作为值的演员列表。大约有 30 个电影名称（键）。我需要弄清楚如何遍历这本字典以从本质上扭转它。我想要一个字典，其中包含一个演员作为键，他们播放的电影作为值。

但是，我想我也创建了一个字典列表而不是一个字典，现在我真的很困惑自己！有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:34:58.393

微不足道的使用`collections.defaultdict`：

```
from collections import defaultdict
reverse = defaultdict(list)

for movie, actors in MovieDict.items():
    for actor in actors:
        reverse[actor].append(movie) 
```

该类的`defaultdict`不同之处在于，`dict`当您尝试访问不存在的键时，它会创建它并将其值设置为工厂创建的项目，并传递给构造函数（`list`在上面的代码中），这样可以避免捕获`KeyError`或检查关键在字典里。

将其与 Steven Rumbalski 的循环结合会导致：

```
from collections import defaultdict
in_fname = input('What is the name of the file? ')
in_file = open(in_fname, 'r+')

movie_to_actors = {}
actors_to_movie = defaultdict(list)

for line in in_file:
    #assumes python3:
    movie, *actors = line.strip().split(',')
    #python2 you can do actors=line.strip().split(',');movie=actors.pop(0)

    movie_to_actors[movie] = list(actors)
    for actor in actors:
        actors_to_movie[actor].append(movie) 
```

* * *

关于上面代码的一些解释。

## 遍历文件的行

文件对象是可迭代的，因此支持迭代。这意味着您可以执行以下操作：

```
for line in open('filename'): 
```

代替：

```
for line in open('filename').readlines(): 
```

（同样在 python2 中，后者读取所有文件然后拆分内容，而迭代文件不会将所有文件读入内存[因此您可以为大文件节省大量 RAM]）。

## 元组拆包

要将序列“解包”成不同的变量，您可以使用“元组解包”语法：

```
>>> a,b = (0,1)
>>> a
0
>>> b
1 
```

语法被扩展为允许将可变数量的值收集到一个变量中。例如：

```
>>> head, *tail = (1, 2, 3, 4, 5)
>>> head
1
>>> tail
[2, 3, 4, 5]
>>> first, *mid, last = (0, 1, 2, 3, 4, 5)
>>> first
0
>>> mid
[1, 2, 3, 4]
>>> last
5 
```

你只能有一个“星号表达式”，所以这不起作用：

```
>>> first, *mid, center, *mid2, last  =(0,1,2,3,4,5)
  File "<stdin>", line 1
SyntaxError: two starred expressions in assignment 
```

所以基本上当你在左边有一颗星时，python 会把它不能放在其他变量中的所有东西放在那里。请注意，这意味着该变量可能引用一个空列表：

```
>>> first, *mid, last = (0,1)
>>> first
0
>>> mid
[]
>>> last
1 
```

## 使用默认字典

允许您为不存在的`defaultdict`键提供默认值。该类接受一个可调用的（~函数或类）作为参数，并在每次需要时调用它来构建一个默认值：

```
>>> def factory():
...     print("Called!")
...     return None
... 
>>> mydict = defaultdict(factory)
>>> mydict['test']
Called! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:09:29.427

编程是关于抽象事物的，因此请尝试以不依赖于特定问题的方式编写代码。例如：

```
def csv_to_dict(seq, separator=','):
    dct = {}
    for item in seq:
        data = [x.strip() for x in item.split(separator)]
        if len(data) > 1:
            dct[data[0]] = data[1:]
    return dct

def flip_dict(dct):
    rev = {}
    for key, vals in dct.items():
        for val in vals:
            if val not in rev:
                rev[val] = []
            rev[val].append(key)
    return rev 
```

请注意，这两个函数对“输入文件”、“演员”、“电影”等“一无所知”，但仍然能够用两行代码解决您的问题：

```
with open("movies.txt") as fp:
    print(flip_dict(csv_to_dict(fp))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T16:27:23.117

```
InputName = input('What is the name of the file? ')
with open(InputName, 'r') as f:
    actors_by_movie = {}
    movies_by_actor = {}
    for line in f:
        movie, *actors = line.strip().split(',')
        actors_by_movie[movie] = actors
        for actor in actors:
            movies_by_actor.setdefault(actor, []).append(movie) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T15:50:23.530

```
reverse={}
keys=MovieDict.keys()
for key in keys:
    val=MovieDict[key]
    for actor in val:
        try:
            reverse[actor]=reverse[actor].append(actor)
        except KeyError:
            reverse[actor]=[]
            reverse[actor]=reverse[actor].append(actor)
print(reverse)#retarded python 3 format! :) 
```

那应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T17:10:01.910

根据您的命名约定：

```
from collections import defaultdict

InputName = input('What is the name of the file? ')
File = open(InputName, 'rt').readlines()

ActorLst = []
ActMovieDct = defaultdict(list)
for line in File:
    MovieActLst = line.strip().split(',')
    Movie = MovieActLst[0]
    Actors = MovieActLst[1:]
    for actor in Actors:
        ActMovieDct[actor].append(Movie)

# print results    
for actor, movies in ActMovieDct.items():
    print(actor, movies) 
```

# visual-studio-2010 - subversion和visusal studio.net 2010有什么关系

> ID：13101591
> 
> 赞同：1
> 
> 时间：2012-10-27T15:38:26.500
> 
> 标签：visual-studio-2010, svn

我问这个问题，因为我是 anksvn 的新手。我基本上需要将我在 C# 2010 应用程序中编写的代码签入到最新版本的 anksvn 中。我得到的印象是 anksvn 基于文件目录结构，其中解决方案文件位于最高级别，所有其他文件夹位于不同的目录级别。

我还看到了 C# 应用程序，其中解决方案文件可能如下： 1\. 解决方案文件的项目文件处于较低级别。2\. 解决方案文件的项目文件与解决方案文件所在的级别相同。

因此，您能否告诉我和/或指向我的参考资料，该参考资料将验证和/或告诉我 anksvn 的文件结构与 Visual Studio.net 2010 的关系如何？

# android - 将按钮彼此相邻放置

> ID：13101592
> 
> 赞同：1
> 
> 时间：2012-10-27T15:38:32.663
> 
> 标签：android, android-layout

这是我的代码，我尝试了很多方法来将按钮设置为彼此相邻，但它们不起作用。

我真的很感激你的帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_alignParentLeft="true" />

       <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:40:47.940

将 android:orientation="vertical" 更改为 android:orientation="horizo​​ntal"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:52:06.953

您可以通过将 android:orientation="vertical" 更改为 android:orientation="horizo​​ntal" 来实现这一点。如果您发布您的 UI 模式，那么我可以更准确地帮助您，谢谢。

# actionscript-3 - AIR for desktop 和 TouchEvents

> ID：13101595
> 
> 赞同：0
> 
> 时间：2012-10-27T15:39:10.543
> 
> 标签：actionscript-3, air, touch, desktop

构建一个只需要按钮按下和按钮拖动（滚动）检测的信息亭应用程序。

我不需要多点触控或手势识别。

我还需要用任何 MouseEvents 代替 TouchEvents 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:44:23.127

是的，您只能`MouseEvent`用于桌面应用程序。

# text - opengl 文本字体大小

> ID：13101596
> 
> 赞同：1
> 
> 时间：2012-10-27T15:39:14.087
> 
> 标签：text, fonts, size, glut

我正在尝试显示一些文本叠加，但我需要它大于 24 号。问题是我找不到这样做的方法！目前我正在使用：

GLvoid *font_style = GLUT_BITMAP_TIMES_ROMAN_24;

我怎样才能增加它的大小？（如果我需要换成times roman以外的其他东西也没问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:42:02.387

[尝试使用FTGL](http://homepages.paradise.net.nz/henryj/code/)渲染文本。您将获得更高质量的文本和更大的灵活性。

（对于正常字体大小，使用 FTGL 纹理字体。对于大字体大小，使用 FTGL 矢量字体。对于 24 号，您可能应该使用纹理字体。）

# python - 访问 Scapy 的内部协议层

> ID：13101597
> 
> 赞同：3
> 
> 时间：2012-10-27T15:39:24.440
> 
> 标签：python, networking, tcp, scapy

我正在用 Python 编写我的第一个程序。我正在使用第三方工具包与网络数据包（Scapy）进行交互。

当我使用这种方法时：

```
p=sr1(IP(dst="google.com")/TCP()) 
```

结果是：

```
<IP  version=4L ihl=5L tos=0x0 len=44 id=18972 flags= frag=0L ttl=44
proto=tcp chksum=0x25bd src=173.194.39.134 dst=192.168.137.2
options=[] |<TCP  sport=www dport=ftp_data seq=1295300429 ack=1
dataofs=6L reserved=0L flags=SA window=14300 chksum=0x3c7e urgptr=0
options=[('MSS', 1430)] |<Padding  load='\x00\x00' |>>> 
```

我可以简单地访问`chksum`of ，但是我怎样才能访问of呢？`IP``p.chksum``chksum``TCP`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:24:28.790

作为一般准则，您应该使用

```
>>> p[TCP].chksum 
```

但是，这仅适用于接收到的数据包，因为校验和是在传输时计算的。您可以使用 show2() 方法检索未传输数据包的校验和。

# javascript - Dreamweaver CS5：Spry Fading 闪烁

> ID：13101599
> 
> 赞同：1
> 
> 时间：2012-10-27T15:39:40.170
> 
> 标签：javascript, adobe, dreamweaver, flash-cs5, spry

我一直在使用 Dreamweaver CS5 的 Spry 框架来构建我的网站，并且遇到了一些褪色问题。

我有以下代码：

```
<area shape="poly" coords="113,12,8,14,3,84,7,150,6,168,105,168,105,196,167,198,179,198,192,197,248,198,248,169,364,166,361,96,193,96,192,68,155,68,133,68,114,68" onmouseover="MM_effectAppearFade('BannerGlow', 250, 0, 100, false)" onmouseout="MM_effectAppearFade('BannerGlow', 250, 100, 0, false)" /> 
```

这使得网站横幅在鼠标悬停在该区域上时会淡入其背后图像的发光版本而发光。

这里的问题是，发光需要 250 毫秒才能平滑淡入，如果在这 250 毫秒内将鼠标移出该区域，它将激活淡出效果，而淡入效果仍在运行，从而导致令人讨厌的闪烁。

有谁知道解决这个问题的任何方法？

# java - Java JSF：编辑数据表标记中的行

> ID：13101606
> 
> 赞同：1
> 
> 时间：2012-10-27T15:40:39.967
> 
> 标签：java, jsf

我正在尝试根据本文中的方法更新 JSF 数据表中的一行：[http ://www.mkyong.com/jsf2/how-to-update-row-in-jsf-datatable/](http://www.mkyong.com/jsf2/how-to-update-row-in-jsf-datatable/)

当我单击保存时，我收到此错误消息：

**'null Converter' 的转换错误设置值'1970-09-08'。**

截屏： ![截屏](../Images/1d1935a4728f06c925ec5713e01340ac.png)

标记：

```
<h:form>
                        <h:commandButton action="addEmployee" value="Add New" class="btn btn-primary" />
                        <br />

                        <h:dataTable class="table table-striped" value="#{employeeCollection.items}" var="item">
                            <h:column>
                                <f:facet name="header">Edit</f:facet>
                                <h:commandButton action="#{employeeCollection.edit(item)}" value="Edit" class="btn" rendered="#{not item.isEditing}" />
                                <h:commandButton action="#{employeeCollection.save(item)}" value="Save" class="btn btn-success" rendered="#{item.isEditing}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">First Name</f:facet>
                                <h:inputText value="#{item.firstName}" rendered="#{item.isEditing}" />
                                <h:outputText value="#{item.firstName}" rendered="#{not item.isEditing}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Last Name</f:facet>
                                <h:inputText value="#{item.lastName}" rendered="#{item.isEditing}" />
                                <h:outputText value="#{item.lastName}" rendered="#{not item.isEditing}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Date of Birth</f:facet>
                                <h:inputText value="#{item.dateOfBirth}" rendered="#{item.isEditing}" />
                                <h:outputText value="#{item.dateOfBirth}" rendered="#{not item.isEditing}" />
                            </h:column>
                        </h:dataTable>
                    </h:form> 
```

我会发布托管 bean 代码，但我认为这没有必要，因为当单击“保存”按钮时，无论如何似乎都不会调用 save(item) 函数......所以它必须是别的东西。我是Java新手，所以可能我在这里忘记了一些非常基本的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:12:44.893

该错误描述了`String`使用`null`转换器转换时出错。如果您在标签组件中使用没有转换器的`Date`对象，则会发生这种情况。您可以通过更改 JSF 代码来解决此问题：`<h:inputText>``DateTime`

```
<h:column>
    <f:facet name="header">Date of Birth</f:facet>
    <h:inputText value="#{item.dateOfBirth}" rendered="#{item.isEditing}">
        <!-- adding the datetime converter -->
        <f:convertDateTime pattern="yyyy-MM-dd" />
    </h:inputText>
    <h:outputText value="#{item.dateOfBirth}" rendered="#{not item.isEditing}" />
</h:column> 
```

尽管如此，这并不是为您和您的用户处理日期验证的好方法。最好使用为您提供日历组件的第三方库，例如[PrimeFaces Calendar](http://www.primefaces.org/showcase-labs/ui/calendarBasic.jsf)或[RichFaces Calendar](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=calendar)。

请注意，您可以使用 JSF 提供的 DateTime 和 Numbers 转换器，并且可以创建自定义数据转换器。更多信息：

*   [JSF 2.0 中的自定义转换器](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/)
*   [带参数的自定义转换器 JSF 2](https://stackoverflow.com/q/11613134/1065197)
*   [通用 JSF 实体转换器](https://stackoverflow.com/q/4268179/1065197)

# java - 是否可以检查 java.lang.NumberFormatException？

> ID：13101607
> 
> 赞同：0
> 
> 时间：2012-10-27T15:40:45.393
> 
> 标签：java, exception-handling

是否可以检查`NumberFormatException`输入字符串：`""`？

我试图编写我的程序，以便如果用户没有输入任何值，则会出现错误消息而不是 NumberFormatException：

```
if(pasientNavnFelt.getText() == "" || pasientNrFeIt.getText() == "")
{
  utskriftsområde.setText("ERROR, insert values");
}

if(pasientNavnFelt.getText() != "" || pasientNrFeIt.getText() != "")
{ 
  // rest of code here if the program had values in it
} 
```

我也试过空：

```
if(pasientNavnFelt.getText() == null || pasientNrFeIt.getText() == null)
{
  utskriftsområde.setText("ERROR, insert values");
}

if(pasientNavnFelt.getText() != null || pasientNrFeIt.getText() != null)
{ 
  // rest of code here if the program had values in it
} 
```

我仍然得到：

> `Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: ""`

如果该程序具有值，则该程序可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:44:04.643

永远不要将字符串与`==`. `==`检查两个对象是否相同，而不是两个对象具有相同的字符。用于`equals()`比较字符串。

也就是说，要验证字符串是否为有效整数，您确实需要捕获异常：

```
try {
    int i = Integer.parseInt(s);
    // s is a valid integer
}
catch (NumberFormatException e) {
    // s is not a valid integer
} 
```

这是基本的 Java 东西。阅读有关[异常的 Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:42:27.643

尝试：

```
if( pasientNavnFelt.isEmpty() || pasientNrFeIt.isEmpty()) {
   utskriftsområde.setText("ERROR, insert values");
}
else {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T15:44:22.477

如果条件错误，您的第二个。你想说，如果有一个空值，错误，否则做点什么。你是说如果有一个空错误，那么如果它们中的任何一个不为空，就做剩下的。两个字符的改变是改变第二个“||” 到一个“&&”。但你可能想要的实际上是：

```
 if(pasientNavnFelt.getText() == null || pasientNrFeIt.getText() == null)
        {
            utskriftsområde.setText("ERROR, insert values");
        }
   else 
       { <rest of code here if the program had values in it>} 
```

# xpages - 删除文件下载控件中的附件后自动保存文档？

> ID：13101615
> 
> 赞同：0
> 
> 时间：2012-10-27T15:41:47.953
> 
> 标签：xpages, xpages-ssjs

我允许在文件下载控件中删除附件。如果用户删除附件并离开页面（不保存），附件实际上并没有被删除。

控件有一个 onclick 事件，但它并不特定于删除。有没有办法在删除附件后自动调用 .save() ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T09:55:25.130

这是一个 SSJS 片段，它允许向*FileDownload*控件的删除功能添加操作。

```
<xp:this.beforeRenderResponse>
    <![CDATA[#{javascript:

    /***
     * adds an additional method to "delete action"
     * of a UIFileDownload control
     *  
     * @param UIFileDownload component
     * @author Sven Hasselbach
     * @category SSJS
     * @category UI
     * @version 0.3
     */
    function overrideFileDownloadAction( fDownload ){
        if( fDownload === null )
            return;
        rekOverrideFileDownloadAction( fDownload, fDownload );
    }

    function rekOverrideFileDownloadAction( component:javax.faces.component.UIOutput, fDownload:com.ibm.xsp.component.UIFileDownload  ){
        try{
            var children:java.util.List = component.getChildren();
            var it:java.util.Iterator = children.iterator();
            var curChild:javax.faces.component.UIOutput;

            while( it.hasNext() ){
                curChild = it.next();
                if( typeof( curChild ) === 'com.ibm.xsp.component.xp.XspEventHandler' ){

                    var group = new com.ibm.xsp.actions.ActionGroup();
                    var list = new java.util.ArrayList();
                    group.setComponent( fDownload );
                    list.add( curChild.getAction() );
                    list.add( mBinding );
                    group.setActions( list );
                    curChild.setAction(group);
                }
                rekOverrideFileDownloadAction( curChild , fDownload );
            }
        }catch(e){}    
    }

    var mBinding = facesContext.getApplication().createMethodBinding("#{javascript:document1.save()}", null );
    overrideFileDownloadAction( getComponent( 'fileDownload1' ) );
    }]]>
</xp:this.beforeRenderResponse> 
```

您必须更改 MethodBinding *mBinding中的代码和**FileDownLoad*控件的名称。请记住，此代码仅在没有验证问题的情况下才会保存文档。要禁用必填字段，您必须添加以下代码行*curChild.setDisableValidators(true);* 在*if*块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T06:46:02.093

另一种方法是使用 enableModifiedFlag 属性来确保在离开页面而不保存时提示用户。

更多详细信息，请访问[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_pref_enablemodifiedflag.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_pref_enablemodifiedflag.html)

# c# - webviewbrush 和 Rectangle 的问题

> ID：13101619
> 
> 赞同：0
> 
> 时间：2012-10-27T15:42:00.343
> 
> 标签：c#, xaml, windows-8

我在隐藏 webview 时遇到问题，我的应用程序基于 webview，因为我使用 html 格式显示单词定义，当我需要在 webview 上显示任何设置窗格或任何其他元素时，我需要隐藏它并填充一个带有 webviewbrush 的矩形...

问题是当我这样做时，矩形显示一个拉伸的图像......我尝试为 webview 画笔和矩形使用不同的拉伸设置，但不能让它看起来与 webview 完全一样......

例如，如果我在 webviewbrush 上使用无拉伸 .. 它可以在某些分辨率下工作，但在更高的分辨率下，它显示的图像比它更大...

我似乎无法找到解决此问题的方法...有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:29:49.250

试试[MSDN-Example](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.opened)，它适用于我的项目。如果它不起作用，请创建一个新的干净项目并在没有额外 xaml 的情况下尝试它，也许你会弄乱一些属性；-)

XAML：

```
<Grid>
    <WebView x:Name="contentView" Source="http://www.contoso.com"/>
    <Rectangle x:Name="contentViewRect"/>
</Grid> 
```

后面的代码：

```
private void AppBar_Opened(object sender, object e)
{
    WebViewBrush wvb = new WebViewBrush();
    wvb.SourceName = "contentView";
    wvb.Redraw();
    contentViewRect.Fill = wvb;
    contentView.Visibility = Windows.UI.Xaml.Visibility.Collapsed;     
}

private void AppBar_Closed(object sender, object e)
{
    contentView.Visibility = Windows.UI.Xaml.Visibility.Visible;
    contentViewRect.Fill = new SolidColorBrush(Windows.UI.Colors.Transparent);
} 
```

# bash - 检查数组的长度是否等于bash中的变量

> ID：13101621
> 
> 赞同：8
> 
> 时间：2012-10-27T15:42:25.893
> 
> 标签：bash

我想检查 bash 数组的长度是否等于 bash 变量（int）。我当前的代码如下所示：

```
if [ "${#selected_columns}" -eq "${number_of_columns}" ]; then
    echo "They are equal!"
fi 
```

这将返回 false，因为 echo 语句从不运行。但是，这样做会为他们两个产生 4：

```
echo "${#selected_columns[@]}"
echo "${number_of_columns}" 
```

这里有什么问题？它与字符串与 int 有关吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-27T16:17:00.617

在你的：

```
if [ "${#selected_columns}" -eq "${number_of_columns}" ]; then
    echo "They are equal!"
fi 
```

`${#selected_columns}`失踪了`[@]`。

固定的：

```
if [ "${#selected_columns[@]}" -eq "${number_of_columns}" ]; then
    echo "They are equal!"
fi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-23T07:56:55.613

根据bash的手册页：

> ${#name[subscript]} 扩展为 ${name[subscript]} 的长度。如果下标是 * 或 @，则扩展是数组中的元素数。引用不带下标的数组变量等价于引用下标为 0 的数组。

使用`${name}`索引数组将导致`${name[0]}`，然后你得到 的长度`${name[0]}`，而不是计算整个数组的元素。因此，将字符串与整数进行比较不是问题。AFAIK，将“字符串中的整数”与“let 分配的整数”进行比较在 bash 脚本中从来都不是问题。

# android - 在 Android 中静音流

> ID：13101624
> 
> 赞同：5
> 
> 时间：2012-10-27T15:42:29.713
> 
> 标签：android, audio, stream, mute

我已经构建了一个小应用程序，它使用 class 将音乐流静音/取消静音`AudioManager`。事实上，它一直有效，直到我关闭应用程序。即我已将流静音，我关闭了应用程序，我重新启动了应用程序，并且该按钮不再取消静音流。我在网上搜索过，但似乎没有人遇到过这个问题。

这是我的代码：

```
public class ControlloVolume extends Activity {
ToggleButton tb_mute;
Button btn_mute;
AudioManager mAudioManager;
boolean mute;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_controllo_volume);

    tb_mute = (ToggleButton) findViewById(R.id.tb_mute);
    btn_mute = (Button) findViewById(R.id.btn_mute);
    mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

    if(mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC)==0){
        mute = true;
        tb_mute.setChecked(mute);
    }else{
        mute = false;
        tb_mute.setChecked(mute);
    }

    }

public void onButtonClicked(View view){
    if(!mute){
        mAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, true);
        tb_mute.setChecked(true);
        mute = true;
    }else{
        mAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, false);
        tb_mute.setChecked(false);
        mute = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T08:51:02.173

首先，注意[不推荐](http://developer.android.com/reference/android/media/AudioManager.html)

> 为了更好的用户体验，应用程序必须在 onPause() 中取消静音流，并在适当的情况下在 onResume() 中再次静音。

但我假设你知道你在做什么，所以我们开始吧。

请注意[setStreamMute上的文档中的这一行](http://developer.android.com/reference/android/media/AudioManager.html)

> 静音命令可防止客户端进程死亡：如果在流上具有活动静音请求的进程死亡，则该流将自动取消静音。

我检查了我的设备，确实，当我刚刚退出我的活动时，流保持静音。但是一旦我终止进程，静音就会消失。看一下[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

由于您当前的方法无法可靠地工作，您可以编写一个[前台服务](http://developer.android.com/guide/components/services.html#Foreground)来触发静音 - 从您的活动中启动该服务。此外，您可能需要[setStreamSolo](http://developer.android.com/reference/android/media/AudioManager.html)。

两件**重要的**事情。

1.  `Volume==0`并且`muted`不是一回事。即流可以有volume==0 但不能静音。虽然如果流*被*静音，音量将始终为 0
2.  静音请求是累积的。即，如果您设置了两次静音，您也必须取消静音两次 - 您的代码无法处理

作为旁注，对于这样的应用程序，您可能希望使用小部件而不是活动。

* * *

**无关。**令人惊讶的是，很多人并不完全了解布尔值是如何工作的。当我经常看到像你这样的代码时，这里有一点简化的重写。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // ... setup just like you did

    // boolean is just like any other type. You can assign not only
    // constants, but expressions too
    mute = (mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC)==0);
    tb_mute.setChecked(mute);
}

public void onButtonClicked(View view){
    mute = !mute; // invert value
    mAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, mute);
    tb_mute.setChecked(mute);
} 
```

# c++ - 以下两种返回 C++ 对象的方法是否相同？

> ID：13101626
> 
> 赞同：3
> 
> 时间：2012-10-27T15:42:38.110
> 
> 标签：c++

假设一个函数创建一个类并返回：

```
Foo getFoo ()
{
   return Foo ("bar");
} 
```

第二种方法：

```
Foo getFoo ()
{
   Foo foo ("bar");
   return foo;
} 
```

现在我称之为`const Foo & myFoo = getFoo()`

第一种方法更有效吗？他们对我来说看起来一样，因为他们都创建了一个临时变量并返回它，我错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:47:15.500

它们基本上是相同的，尽管第一个中的复制省略将被称为“返回值优化”（RVO），而在第二个中它将被称为“命名返回值优化”（NRVO）。曾经有编译器可以做 RVO 但不能做 NRVO。

# wpf - WPF MVVM 客户 -> 地址

> ID：13101629
> 
> 赞同：0
> 
> 时间：2012-10-27T15:42:59.390
> 
> 标签：wpf, mvvm, viewmodel

在遵循 MVVM 模式的 WPF 应用程序中，我有一个 Customer 类，它具有地址类型的属性。

在我的 CustomerViewModel 中，我创建了一个新的数据上下文并让我的客户使用它，我还有我的沼泽标准属性、名字、姓氏等……但是我如何将我的地址对象挂钩到客户视图模型中？我是否：

1.  只需复制我的 customerVM 中的所有地址属性
2.  创建一个 AddressViewModel 并将对此的引用作为我的 Address 属性？如果这是我如何将数据上下文获取到 AddressViewModel 实例的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:51:23.843

我会选择plan B。

创建 AddressVM，将其作为依赖属性添加到 CustomerVM，然后像这样使用它：

```
<TextBox Text="{Binding Address.AddressString}"/> 
```

您不需要为子类设置 DataContext。您可以通过“。”访问它们。

# javascript - 如何制作会在 iframe 链接内自动点击的 javascript？

> ID：13101632
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:44:02.710
> 
> 标签：javascript

可能吗 ？

我已经用 iframe 在页面上制作了，我想要一个脚本，它会在一个 iframe 的链接中自动单击。

但我也希望该脚本检测半链接，我的意思是 iframe 中的链接每次都会更改，但链接的第一部分不会更改，因此 javascript 应该检测到不会更改的半链接并重定向到它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T15:58:06.813

为什么不编写一个“客户端”库并将其导入 iFrame。这个库监听来自具有特定属性的 HTML5 postMessage 调用的消息并做出适当的反应。由于您可以通过事件对象（或 window.parent）访问父对象，因此您还可以将响应与结果一起发送回。这样，它是否跨域都没有关系，只要这个库存在，你就可以来回通信，如果你写得好，甚至可以启动 iFrame。

我无法与您分享代码，因为它是我们的专有库，但这是想法的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:40:17.970

如果 iframe 的内容来自不同的域，则不能。允许这样做将是一个主要的安全问题。

如果您的 iframe 内容在同一个域中，那么您可以通过其[contentWindow 属性](http://help.dottoro.com/ljctglqj.php)访问 iframe 内容。然后，您可以像链接在主页中一样使用 iframe 链接。

# jquery - 带有斑马条纹的表格行和列突出显示

> ID：13101635
> 
> 赞同：1
> 
> 时间：2012-10-27T15:44:16.440
> 
> 标签：jquery, html-table, highlighting, zebra-striping

我采用了 Chris Coyier 表格行和 col 突出显示代码并添加了斑马条纹。我可以使行突出显示，但启用斑马条纹时 col 停止突出显示。

如果您取消注释 jQuery 的第一 2 行以显示斑马条纹，您将看到我在上面概述的问题。

不完全确定为什么这些是冲突的。

任何帮助表示赞赏。

很抱歉所有代码都在这里，但似乎我无法使用 jsFiddle 向您展示，你知道，这是向您展示代码工作的非常有用的服务，因此您可以编辑和摆弄它。

**CSS**

```
table           {width:100%; border-collapse:collapse;}

    th          {background:#95bce2; color:white; font-weight:bold;}
    td, th      {padding:6px; border:1px solid #95bce2; text-align:left;}

.even           {background-color:#ecf6fc;}
.odd            {background-color:white;}

.hover          {background-color:#ccc!important;}
.focus          {background-color:#6ab9d0!important; color:white;}​ 
```

**jQuery**

```
/* If I uncomment these lines the colgroup highlight doesn't work */ 
//$('tr:odd').addClass('odd')
//$('tr:even').addClass('even')

$('.table1').delegate('td','mouseover mouseleave', function(e)
{
    if (e.type == 'mouseover')
    {            
        $(this).addClass('focus');
        $(this).parent().addClass('hover');
        $("colgroup").eq($(this).index()).addClass('hover');
    }
    else
    {
        $(this).removeClass('focus');
        $(this).parent().removeClass('hover');
        $('colgroup').eq($(this).index()).removeClass('hover');
    }
}); 
```

**HTML**

```
<table class="table1">
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
        <colgroup></colgroup>
    <thead>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Job Title</th>
            <th>Favorite Color</th>
            <th>Wars or Trek?</th>
            <th>Porn Name</th>
            <th>Date of Birth</th>
            <th>Dream Vacation City</th>
            <th>GPA</th>
            <th>Arbitrary Data</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>James</td>
            <td>Matman</td>
            <td>Chief Sandwich Eater</td>
            <td>Lettuce Green</td>
            <td>Trek</td>
            <td>Digby Green</td>
            <td>January 13, 1979</td>
            <td>Gotham City</td>
            <td>3.1</td>
            <td>RBX-12</td>
        </tr>
        <tr>
          <td>The</td>
          <td>Tick</td>
          <td>Crimefighter Sorta</td>
          <td>Blue</td>
          <td>Wars</td>
          <td>John Smith</td>
          <td>July 19, 1968</td>
          <td>Athens</td>
          <td>N/A</td>
          <td>Edlund, Ben (July 1996).</td>
        </tr>
        <tr>
          <td>Jokey</td>
          <td>Smurf</td>
          <td>Giving Exploding Presents</td>
          <td>Smurflow</td>
          <td>Smurf</td>
          <td>Smurflane Smurfmutt</td>
          <td>Smurfuary Smurfteenth, 1945</td>
          <td>New Smurf City</td>
          <td>4.Smurf</td>
          <td>One</td>
        </tr>
        <tr>
          <td>Cindy</td>
          <td>Beyler</td>
          <td>Sales Representative</td>
          <td>Red</td>
          <td>Wars</td>
          <td>Lori Quivey</td>
          <td>July 5, 1956</td>
          <td>Paris</td>
          <td>3.4</td>
          <td>3451</td>
        </tr>
        <tr>
          <td>Captain</td>
          <td>Cool</td>
          <td>Tree Crusher</td>
          <td>Blue</td>
          <td>Wars</td>
          <td>Steve 42nd</td>
          <td>December 13, 1982</td>
          <td>Las Vegas</td>
          <td>1.9</td>
          <td>Under the couch</td>
        </tr>
    </tbody>
</table>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:25:23.047

为什么不使用 :hover 伪类作为选择器？您不需要（也不应该）使用 javascript 进行操作，如果您使用纯 css，即使禁用了 js，您也可以覆盖浏览器

对于偶数/奇数类，只需将类放在 php/html 文件或用户 css 规则中（如果您不关心旧浏览器）[http://www.w3.org/Style/Examples/007/evenodd](http://www.w3.org/Style/Examples/007/evenodd)

```
table           {width:100%; border-collapse:collapse;}

th          {background:#95bce2; color:white; font-weight:bold;}
td, th      {padding:6px; border:1px solid #95bce2; text-align:left;}

tr:nth-child(even)           {background-color:#ecf6fc;}
tr:nth-child(odd)           {background-color:white;}

tr:hover, td.hover          {background-color:#ccc!important;}
td:hover          {background-color:#6ab9d0!important; color:white;} 
```

colgroup 标签已弃用，因此您不应该使用它，您确实需要 js fot

```
$('.table1 td').hover(
  function(){
    $('.table1 td:nth-child('+($(this).index()+1)+')').addClass('hover');
  },
  function(){
    $('.table1 td:nth-child('+($(this).index()+1)+')').removeClass('hover');
  }); 
```

检查这个小提琴[http://jsfiddle.net/YDLDm/6/](http://jsfiddle.net/YDLDm/6/)

# php - 逐位澄清

> ID：13101637
> 
> 赞同：0
> 
> 时间：2012-10-27T15:44:23.223
> 
> 标签：php, mysql, bit-manipulation

首先，请让我澄清一下，我不是以英语为母语的人，所以请原谅我的错误。

我目前正在使用按位系统权限创建 PHP 用户系统，并且我会将这些权限存储到 MySQL 数据库中。

我的问题如下。我应该使用什么类型的行（int、varchar、...）来存储权限

我的第二个问题是，可以存储多少权限？（32位有〜32权限的限制（我认为））

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:32:50.110

我会使用其中一种[整数类型](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)。哪一个取决于您需要多少权限。

`TINYINT`将允许`8`权限

`SMALLINT`将允许`16`权限

`MEDIUMINT`将允许`24`权限

`INT`将允许`32`权限

`BIGINT`将允许`64`权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:45:56.607

您可以使用[BIT(1)](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)数据类型。然后，您可以`bit`为每个权限单独使用一列。

# php - mod_fcgid：无法为 /home/seekok/fcgi-bin/php5.fcgi 应用进程槽

> ID：13101640
> 
> 赞同：1
> 
> 时间：2012-10-27T15:44:34.410
> 
> 标签：php, process, fcgid, virtualmin

最近我的服务器开始消耗更多的内存。运行进程变为 500+。在过去的一年里，这从未发生在我身上。我有 VPS / 2GB / Ubuntu / Virtualmin。

Apache 有`MaxClients 256`默认值`ServerLimit`(256)。最大用户进程数 ( `ulimit -u`) 为 15891。

错误日志文件`/var/log/virtualmin`：

```
mod_fcgid: can't apply process slot for /home/seekdl/fcgi-bin/php5.fcgi 
```

`/var/log/apache2`：

```
server reached MaxClients setting, consider raising the MaxClients setting
[Sat Oct 27 17:17:25 2012] [error] FastCGI process 11916 still did not exit, terminating forcefully
[Sat Oct 27 17:17:25 2012] [error] FastCGI process 12374 still did not exit, terminating forcefully
[Sat Oct 27 17:17:25 2012] [error] FastCGI process 11918 still did not exit, terminating forcefully 
```

# ios - webview中的iOS键盘样式？

> ID：13101642
> 
> 赞同：0
> 
> 时间：2012-10-27T15:44:54.460
> 
> 标签：ios, jquery-mobile, cordova, webview, keyboard

我对 Web 开发很陌生，我的项目正在使用 Jquery-mobile、Phonegap 和 compass (scss)。

默认情况下，当输入字段获得焦点时显示的键盘是包含一种具有字段导航功能的顶部栏的键盘。我想摆脱这个导航栏，并显示 iOS 中可用的最简单的键盘。我尝试将我的对象包含在表单中或没有表单标签，但没有成功。我不知道如何实现这一点，如果可能的话：/

谢谢任何建议！

![在此处输入图像描述](../Images/011e992f854ea8cb8a94fb38e421bb1b.png)

**如果您遇到此问题**，请确保前往[https://bugreport.apple.com](https://bugreport.apple.com)并复制 rdar://9844216

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T13:30:58.460

要删除该栏，您应该深入了解 Objective-c 代码。

这是我使用的代码：（在包含您的 UIWebview 的控制器内添加以下代码）

首先添加一个观察者来接收键盘的通知：

```
-(void)viewWillAppear:(BOOL)animated{
   [[NSNotificationCenter defaultCenter] addObserver:self
                                            selector:@selector(keyboardWillShow:)
                                                name:UIKeyboardWillShowNotification
                                              object:nil];
}

- (void)keyboardWillShow:(NSNotification *)note {
    [self performSelector:@selector(removeBar) withObject:nil afterDelay:0];
}
- (void)removeBar {
  // Locate non-UIWindow.
  UIWindow *keyboardWindow = nil;
  for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
    if (![[testWindow class] isEqual:[UIWindow class]]) {
        keyboardWindow = testWindow;
        break;
    }
  }

  // Locate UIWebFormView.
  for (UIView *formView in [keyboardWindow subviews]) {
    // iOS 5 sticks the UIWebFormView inside a UIPeripheralHostView.
    if ([[formView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound) {
        for (UIView *subView in [formView subviews]) {
            if ([[subView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound) {
                // remove the input accessory view
                [subView removeFromSuperview];
            }
            else if([[subView description] rangeOfString:@"UIImageView"].location != NSNotFound){
                // remove the line above the input accessory view (changing the frame)
                [subView setFrame:CGRectZero];
            }
        }
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-03T13:27:19.180

我正在使用 iOS 7.0 并在 UIWebView 上使用以下代码修复它

```
-(void)removeExtraBar
{
    UIWindow *keyboardWindow = nil;
    for (UIWindow *testWindow in [[UIApplication sharedApplication] windows]) {
        if (![[testWindow class] isEqual:[UIWindow class]]) {
            keyboardWindow = testWindow;
            break;
        }
    }
    for (UIView *possibleFormView in [keyboardWindow subviews]) {
        if ([[possibleFormView description] rangeOfString:@"UIPeripheralHostView"].location != NSNotFound) {
            for (UIView *subviewWhichIsPossibleFormView in [possibleFormView subviews]) {
                if ([[subviewWhichIsPossibleFormView description] rangeOfString:@"UIWebFormAccessory"].location != NSNotFound) {
                    [subviewWhichIsPossibleFormView removeFromSuperview];
                }
                else if([[subviewWhichIsPossibleFormView description] rangeOfString:@"UIKBInputBackdropView"].location != NSNotFound) {
                    [subviewWhichIsPossibleFormView removeFromSuperview];
                }
            }
        }
    }
} 
```

这适用于 iOS 7.0 上的 UIWebView 键盘问题

# bash - 在随机文件名中转义单引号

> ID：13101643
> 
> 赞同：1
> 
> 时间：2012-10-27T15:45:09.870
> 
> 标签：bash, disk-access

我有一个简单的 bash 脚本，它使用 'du' 输出总文件大小但是每次我传递一个包含撇号的文件时，它都会给我一个语法错误。所以我想知道是否有办法在不修改文件名的情况下转义单引号。最好在磁盘使用之前处理它们。

代码是：

```
du -chs {query} 
```

我使用 Alfred 将文件传递到脚本中。该应用程序允许用户转义几个字符，但单引号不是其中之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:10:26.237

尝试将文件名用双引号括起来，这似乎对我有用：

使用其他一些文件命名的文件`hello'world`：

```
du -chs hello* 
```

给出：

```
4.0K    hello.RST
4.0K    hello.txt
4.0K    hello'world
12K     total 
```

# ios - 用 NSString 写一个 unicode 字符

> ID：13101644
> 
> 赞同：9
> 
> 时间：2012-10-27T15:45:12.947
> 
> 标签：ios, cocoa

我在新项目中使用符号字体 Symbolicons 而不是图像。但是，似乎无法使用 NSString 设置任何超过 4 个字符的代码。

例子：

```
self.saveDealButton.titleLabel.font = [UIFont fontWithName:@"SS Symbolicons" size:31.0f];
[self.saveDealButton setTitle:@"\u1F4E5" forState:UIControlStateNormal]; 
```

但是将不起作用：

```
self.shareButton.titleLabel.font = [UIFont fontWithName:@"SS Symbolicons" size:31.0f];
[self.shareButton setTitle:@"\uF601" forState:UIControlStateNormal]; 
```

工作正常。如何让 NSString 识别额外的位？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-27T16:02:35.610

对于补充多语言平面中的那些字符，如您的示例中所示，`U`在转义字符串中使用大写字母，后跟八个十六进制代码。所以应该写成`\U0001F4E5`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T15:55:57.740

在 iOS 中，unicode 字符属于 16 位表示 \u ，其中 n 在 0000 和 ffff 之间以十六进制表示。

在您的示例中 \uF601 代表一个字符，您可以通过添加另一个序列 \uF601\uF602 等来添加另一个字符。

对我来说，您似乎误解了转义语法？

# c - 在 asm 中，printf() 如何知道传入了多少个变量？

> ID：13101645
> 
> 赞同：0
> 
> 时间：2012-10-27T15:45:16.050
> 
> 标签：c, assembly, compiler-construction, printf

在汇编语言的世界中，当您调用 时`printf()`，您会：

```
push arg_N
push arg_N-1
..
push arg1
push format
call _printf 
```

但是`printf()`这里怎么知道传入了多少个参数呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T15:48:05.373

它只是沿着字符串走，在找到 %-format 项目时使用参数。如果参数少于 %-items，就会发生可怕的事情。

# android - Android：使用 FrameLayout 组合布局 - 布局不可见

> ID：13101646
> 
> 赞同：0
> 
> 时间：2012-10-27T15:45:19.263
> 
> 标签：android, android-activity, slidingdrawer, android-framelayout

我的应用程序中有多个活动，我希望在所有活动中都出现一个滑动抽屉。我遵循[这里](https://stackoverflow.com/questions/4922641/sliding-drawer-appear-in-all-activities/4922740#4922740)给出的方法。

该应用程序以带有滑动抽屉手柄的黑屏开始。

问题是滑动抽屉可见，但放置在 FarmeLayout 中的活动布局**不**可见。

活动肯定在那里。当第一个活动加载时，祝酒词出现。所以我修改了我的第一个活动，只有一个按钮可以进入下一个活动。

接下来，我使用了 AVD 上的方向键，然后按下 ok，这会调出下一个活动的 Toast。第二个活动也被隐藏了。

那我错过了什么？？？

我的滑动抽屉布局 xml (LinearLayout) 最后带有农场布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal"
    android:gravity="center_vertical">

        <SlidingDrawer
        android:id="@+id/slidingDrawer"
        android:handle="@+id/drawerHandle"
        android:content="@+id/contentLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:persistentDrawingCache="all">

        <ToggleButton
            android:id="@+id/drawerHandle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxHeight="5dp"
            android:textSize="14dp"
            android:textStyle="italic"
            android:background="#BB00FF"
            android:rotation="270"
            android:textOn=""
            android:textOff=""/>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/contentLayout"
            android:gravity="center"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:contentDescription="@string/todo">

            <TextView android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:layout_gravity="top"
                android:text="@string/list_view_" />
        </LinearLayout>
    </SlidingDrawer>

    <FrameLayout
    android:id="@+id/act_content"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_gravity="bottom"
    android:background="#808080"
    android:visibility="visible">
    </FrameLayout>
</LinearLayout> 
```

DrawerActivity java代码：

```
public abstract class DrawerActivity extends Activity 
{
protected LinearLayout fullLayout;
protected FrameLayout actContent;

  @Override
  public void setContentView(final int layoutResID) 
  {
    fullLayout= (LinearLayout) getLayoutInflater().inflate(R.layout.act_layout, null); // Your base layout here
    actContent= (FrameLayout) fullLayout.findViewById(R.id.act_content);
    getLayoutInflater().inflate(layoutResID, actContent, true); // Setting the content of layout your provided to the act_content frame
    super.setContentView(fullLayout);
  }
} 
```

在我所有的活动文件中，我都放入`setContentView(R.layout.XXXXXXXX);`了**onCreate**方法。

那么如何使活动可见？我究竟做错了什么？？

我尝试输入以下内容但没有效果

```
actContent.setVisibility(layoutResID); 
or 
actContent.setVisibility(View.VISIBLE); 
```

# objective-c - NSNumber numberWithBool 不是objective-c 对象

> ID：13101649
> 
> 赞同：1
> 
> 时间：2012-10-27T15:45:41.853
> 
> 标签：objective-c, boolean, nsnumber

我需要在 NSMutableDictionary 中存储一些 bool 值，所以我建立了一个解决方案：使用 [NSNumber numberWithBool] 从 bool 创建一个对象。它的值为 YES 可以正常工作，但 NO 有时可以正常工作，有时结果是“不是objective-c 对象”。我的代码：

```
$ //sometimes fine, but sometimes "not an objective-c object"
$ NSNumber* nsn = [NSNumber numberWithBool:NO]; 
```

我是 Objective-C 的新手，所以如果这是基本问题，我很抱歉，但我真的坚持下去。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T05:36:27.597

尝试以下任一：

```
NSObject * y1 = @(YES) ;
NSObject * n1 = @(NO) ;
NSObject * y2 = @YES ;
NSObject * n2 = @NO ; 
```

另一个例子：

```
NSDictionary * testDict = @{
    @"key1": @YES
,   @"key2": @NO
} ;

BOOL b = [testDict[@"key1"] boolValue] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T05:43:42.417

老兄。为什么不创建自己的类：

```
@interface Fool
{
   bool _amIFool;
}
@property bool amIFool;
@end

@implementation
-(bool)amIFool
{
   return _amIFool;
}

-(void)setAmIFool:(bool)amIFool
{
   _amIFool = amIFool
}

@end 
```

然后你可以把它塞进字典里。上面的代码只是一个例子。你可以写一些更好的东西......

编辑：您甚至可以编写一个比较器，这样您就可以直接进行比较等。甚至写了一个方便的方法，所以很容易初始化......

编辑：仅供参考，我最初的实现被称为“酷”。但由于我不酷，我选择了“傻瓜”。你可以做任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T05:21:28.780

返回的对象似乎是通过字符串初始化 NSNumber ，当您将对象映射到字典中时，`numberWithBool`它确实为空。因此字典会说它为空。`initWithBool``NSValue`

# c# - 无法解析资源“ImageConverter”

> ID：13101652
> 
> 赞同：5
> 
> 时间：2012-10-27T15:46:29.247
> 
> 标签：c#, silverlight, windows-phone-7, xaml, ivalueconverter

我是 Windows 手机和 Silverlight 开发的新手。在我的学习练习中，我遇到了一个错误，我在这篇文章的标题中提到了这个错误。

我的主要目标是将图像文件保存并检索到 SQLCE 数据库，我使用了本教程[http://antonswanevelder.com/2011/10/28/writing-an-image-to-sql-ce-linq-to -sql/](http://antonswanevelder.com/2011/10/28/writing-an-image-to-sql-ce-linq-to-sql/)

但是，我对此代码段有疑问

`<Image Source="{Binding ItemImage, Converter={StaticResource ImageConverter}}" Stretch="UniformToFill"/>`

我的想法是编译器无法找到资源 ImageConverter。我真的需要这方面的帮助。

我的代码是：MainPage.xaml

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="CallListListBoxItemTemplate">
        <StackPanel Orientation="Vertical">
            <TextBlock Text="{Binding CallName}" Foreground="DarkCyan" FontSize="{StaticResource PhoneFontSizeLarge}"
                       VerticalAlignment="Top" Margin="12,12,0,0"/>
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="PersonalInfoListBoxItemTemplate">
        <Grid >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Image Source="{Binding PersonImage, Converter={StaticResource ImageConverters}}" Stretch="UniformToFill" Name="_personPhoto" /> 
```

MainPage.xaml.cs

```
public class ImageConverters : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is byte[])
        {
            MemoryStream ms = new MemoryStream(value as byte[]);
            WriteableBitmap wb = PictureDecoder.DecodeJpeg(ms, 100, 100);
            return wb;
        }
        else
        {
            return null;
        }

    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T15:52:20.957

让我们考虑您的值转换器位于`ProjectName.Converters`命名空间中。

在 xaml 中，您需要添加一个命名空间：

```
<phone.PhoneApplicatinPage
        .. all your code here
      xmlns:converters="clr-namespace;ProjectName.Converters"  
      > 
```

在资源标签中：

```
 <phone:PhoneApplicationPage.Resources>
     <converters:ImageConverters x:Key="ImageConverter"/>
      <!- your DataTemplates here--> 
```

[和小教程让你在这里](http://wpftutorial.net/ValueConverters.html)更熟悉`IValueConverter`

# python - Python：将复杂的字符串字典从 Unicode 转换为 ASCII

> ID：13101653
> 
> 赞同：10
> 
> 时间：2012-10-27T15:46:36.143
> 
> 标签：python, json, algorithm, unicode, ascii

> **可能重复：**
> [如何从 Python 中的 JSON 获取字符串对象而不是 Unicode 对象？](https://stackoverflow.com/questions/956867/how-to-get-string-objects-instead-unicode-ones-from-json-in-python)

作为从 JSON API 调用解析的多级字典，我有很多输入。这些字符串都是 unicode 格式，这意味着有很多`u'stuff like this'`. 我正在使用[jq](http://stedolan.github.com/jq/)来处理结果，并且需要将这些结果转换为 ASCII。

我知道我可以编写一个函数来像这样转换它：

```
def convert(input):
    if isinstance(input, dict):
        ret = {}
        for stuff in input:
            ret = convert(stuff)
    elif isinstance(input, list):
        ret = []
        for i in range(len(input))
            ret = convert(input[i])
    elif isinstance(input, str):
        ret = input.encode('ascii')
    elif :
        ret = input
    return ret 
```

这甚至正确吗？没有把握。不过，这不是我想问你的。

我要问的是，这是该问题的典型暴力解决方案。肯定有更好的办法。一种更pythonic的方式。我不是算法专家，但这个看起来也不是特别快。

那么有没有更好的方法呢？或者如果没有，这个功能可以改进吗...？

* * *

**回复后编辑**

[Mark Amery 的回答](https://stackoverflow.com/a/13101776/677139)是正确的，但我想发布它的修改版本。他的函数适用于 Python 2.7+，而我使用的是 2.6，因此必须对其进行转换：

```
def convert(input):
    if isinstance(input, dict):
        return dict((convert(key), convert(value)) for key, value in input.iteritems())
    elif isinstance(input, list):
        return [convert(element) for element in input]
    elif isinstance(input, unicode):
        return input.encode('utf-8')
    else:
        return input 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-27T16:01:56.393

递归似乎是要走的路，但如果你在 python 2.xx 上，你想检查`unicode`，而不是`str`(`str`类型表示字节字符串，类型表示`unicode`unicode 字符字符串；两者都不是从另一个继承并且在解释器中显示的是 unicode 类型的字符串，前面有 au）。

您发布的代码中还有一点语法错误（尾随`elif:`应该是`else`），并且在输入是字典或列表的情况下，您不会返回相同的结构。（在字典的情况下，您将返回最终键的转换版本；在列表的情况下，您将返回最终元素的转换版本。两者都不对！）

您还可以通过使用推导使您的代码漂亮和 Pythonic。

那么，这里是我推荐的：

```
def convert(input):
    if isinstance(input, dict):
        return {convert(key): convert(value) for key, value in input.iteritems()}
    elif isinstance(input, list):
        return [convert(element) for element in input]
    elif isinstance(input, unicode):
        return input.encode('utf-8')
    else:
        return input 
```

最后一件事。我`encode('ascii')`改为`encode('utf-8')`. 我的推理如下：任何仅包含 ASCII 字符集中字符的 unicode 字符串在以 ASCII 编码时将由与以 utf-8 编码时相同的字节字符串表示，因此使用 utf-8 而不是 ASCII 不能破坏任何东西和只要您处理的 unicode 字符串仅使用 ASCII 字符，更改将不可见。但是，此更改扩展了函数的范围，以便能够处理来自整个 unicode 字符集的字符串，而不仅仅是 ASCII 字符串，如果有必要的话。

# java - for 循环中 i++ 部分中的死代码警告

> ID：13101654
> 
> 赞同：4
> 
> 时间：2012-10-27T15:46:38.360
> 
> 标签：java, loops, for-loop, dead-code

这段代码在for循环中不断给我一个死代码警告，并且由于某种原因`i++`它没有增加！`i`

```
import java.util.Scanner;

public class HideThatNumber {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Scanner input=new Scanner(System.in);
        int enc=input.nextInt();
        int tur=0;
        String test="";
        double x;
        for (int i=1;i<10;i++){
            test="";
            test+=i;
            test+=enc;
            x=Integer.parseInt(test);
            x/=11;
            if(x==Math.round(x));{
                tur=i;
                break;
            }
        }
        if(tur==0)
            System.out.println("Impossible");
        else 
            System.out.println(Integer.parseInt(test)/11);
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T15:48:38.187

```
 if(x==Math.round(x)); <--semi-colon
    {
        tur=i;
        break;
    } 
```

在您的 for 循环中，您在`if`. 因此，`block`在任何情况下都将执行下一个代码，因此您将在第一次迭代后跳出循环。

```
 {
        tur=i;
        break;
    } 
```

无论您的 if 条件评估为什么，都会执行此块。而你`break`走出了循环。

因此您会收到警告，因为`i++`将永远不会被执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T15:55:57.833

就是这一行：

```
if(x==Math.round(x)); { 
```

分号不应该在那里。在您的代码中，`break;`总是执行的块 - 所以它在第一次迭代后中断。

# c - C 中的函数作用域

> ID：13101656
> 
> 赞同：2
> 
> 时间：2012-10-27T15:46:50.700
> 
> 标签：c, function, scope

我正在尝试缩短主要功能。我需要回答一些问题（每行代码，在每个问题中，我需要使用在 main 中声明的变量）但是使用函数，我知道如何使用的方式，不会有用，因为我需要在每个问题中使用大量变量、不同类型，而不是数组。对不起我的英语，很难解释我需要什么。

这是我的代码与伪代码混合（简化）

```
int
main(void)
{
    int x = 4;
    int y = 5;
    float z = 6.8; // And lot of more variables like this

    answer_1;  //pseudocode
    answer_2:  

    return 0;
} 
```

// 在 answer1 里面有很多 printf 显示变量 x, y, z.... 等的值)

// 在 answer1 中有很多 printf 显示变量 t、i、l.... 等的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:54:03.577

使用您发布的代码示例，传入 x 的最佳方法是作为函数的参数。

```
void func(int x);

int main(void)
{
    int x = 4;
    func(x);
    return 0;
}

void func(int x)
{
    printf("X = %d", x);
} 
```

如果这在你的真实代码中不起作用，你能发布一个更长的例子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:56:54.660

如果您不想将这些变量传递给函数，您可以

*   将变量声明为全局变量，您可以在每个函数中访问它们。
*   使用 GCC 的嵌套函数特性（参见[http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)）。但是这个特性只适用于 GCC，所以你不应该在可移植的程序中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:29:16.167

尝试使用“另一个函数中的函数”

函数 main 将包含其他两个函数。先定义变量，再编写函数体。

# c# - 为什么这个正则表达式在最后一次匹配失败

> ID：13101658
> 
> 赞同：4
> 
> 时间：2012-10-27T15:47:23.117
> 
> 标签：c#, regex

我有这个具有代表性格式的恢复动画数据列表：

```
 * » iddle 1-210
    * » run01 215-252
    * » stand up 876-987
0   -      = bindpose
1   - 48   = idle
118 - 150  = attack_idle
151 - 192  = attack 1
791 - 815  = strafe right
000 - 009 T-pose
010 - 040 walk
045 - 075 walk-back
080 - 110 walk-right-45
490 - 590 idle-1
1060 - 1120 spell-cast_01
1515 - 1590 sack_pick_up 
```

我正在考虑如何匹配动画名称...

我制作了这种匹配模式，

```
 ([a-zA-Z][\w- _]+) 
```

它返回

```
1: iddle 1-210
1: run01 215-252
1: stand up 876-987
1: bindpose
1: idle
1: attack_idle
1: attack 1
1: strafe right
1: T-pose
1: walk
1: walk-back
1: walk-right-45
1: idle-1
1: spell-cast_01
1: sack_pick_up 
```

为了避免三个起始匹配包含数字，我尝试了这个：

```
 ([a-zA-Z][\w- _]+)(?:\s\d+\s*[-]*\s*\d\s*) 
```

但它与最后一行不匹配：

```
1: iddle
1: run01
1: stand up
1: bindpose
1: idle
1: attack_idle
1: attack 1
1: strafe right
1: T-pose
1: walk
1: walk-back
1: walk-right-45
1: idle-1
1: spell-cast_01 
```

为什么？

我认为与 (?= **\s**相关，但我还没有找到解决方法...

编辑：修复了“|” 括号之间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:12:40.573

使用正则表达式模式

```
[a-zA-Z][\w-]*(\s+(?:[a-zA-Z]|\d(?!\d*-))[\w-]*)* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:13:27.143

我认为您的所有其他行都能够将换行符与下一行匹配`\s`，`1`这`\d+`在最后一行是不可能的。这是一个不同的选择：

如果您使用多行选项（在 C# 中您可以提供带有参数的匹配函数`RegexOptions.Multiline`），`$`将匹配行尾。然后你可以做这样的事情：

```
([a-zA-Z][\w -]+)(?:\s\d+\s*-*\s*\d+)?$ 
```

这使得末尾的数字部分是可选的，但断言之后必须有一个行尾。

请注意，我`_`从字符类中删除了，因为它已经是`\w`. 我也`[-]`改为 `-`，因为它是等价的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:31:21.800

使用此正则表达式仅捕获名称`group1`

```
^.*?([a-zA-Z][\w -]+?)(?:(?:\s*\d+-\d+)?)$ 
```

使用`multiline`方式

* * *

**正则表达式中的**错误****

 **不需要`_`in因为包含`[\w- _]``\w``_`

`\w-`in是错误的，`[\w- _]`因为您指定了 和 之间的范围`\w`。

应该是`[\w -]`因为在字符类的**开头**或**结尾**`-`使用时没有任何特殊含义**

# matlab - 如何将背景图像放入图中（使用matlab GUIDE）

> ID：13101661
> 
> 赞同：1
> 
> 时间：2012-10-27T15:47:29.617
> 
> 标签：matlab, matlab-figure, matlab-guide

目前我正在研究一个 matlab GUIDE，并希望包含一个图像作为 GUI 的背景。我可以知道如何在 GUI 中包含静态图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:41:01.037

您应该使用`axes`图形控制：

```
 f= figure()
 a = axes('Position',[0 0 1 1],'Units','Normalized');
 imshow('peppers.png','Parent',a); 
```

您可以将任何您想要的东西放在轴上方：

```
 uicontrol('Style','text','Units','Normalized','Position',[0.1 0.1 0.3 0.6],'String','Example'); 
```

您也可以在 GUIDE 中执行此操作，只需手动在整个图形上拉伸轴即可。

![在此处输入图像描述](../Images/98e777627b2d04523ab4c6ca3f099fa2.png)

![在此处输入图像描述](../Images/7230670084ae1731cec8aa8e8634262d.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T18:19:48.860

还有另一种方法可以做到这一点。转到 `function untitled_OpeningFcn(hObject, eventdata, handles, varargin)`函数之间`handles.output = hObject;`并 `guidata(hObject, handles);`写下以下代码

`% create an axes that spans the whole gui
ah = axes('unit', 'normalized', 'position', [0 0 1 1]);
% import the background image and show it on the axes
bg = imread('your_image.jpg'); imagesc(bg);
% prevent plotting over the background and turn the axis off
set(ah,'handlevisibility','off','visible','off')
% making sure the background is behind all the other uicontrols uistack(ah, 'bottom');`

![前](../Images/f21fcaa085e3b7b61b9eb80aa071fc78.png)
![后G](../Images/d577465efa707fd6dcd2f648882404a4.png)

# javascript - Backbone Collections - create() 是一个实例方法吗？

> ID：13101668
> 
> 赞同：0
> 
> 时间：2012-10-27T15:48:35.423
> 
> 标签：javascript, oop, backbone.js

我有一系列 Backbone 模型，如下所示：

```
window.Message = Backbone.Model.extend({});

window.MessageCollect = Backbone.Collection.extend({ model: Message, url: '/messages'}); 
```

为什么我必须实例化一个新集合才能调用 create()？如果我在 MessageCollect 上调用 create()，则会收到无方法错误。

```
window.Messages = new MessageCollect;

function makeMessage(){ Messages.create({title:'first message', sender:user_name}); }
//ok

function makeMessageTwo(){ MessageCollect.create({title:'first message', sender:user_name}); }
//Object function (){ parent.apply(this, arguments); } has no method 'create' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:13:13.883

因为 Backbone.Collection - 是一个类，而不是一个实例。当您调用 Backbone.Collection.extend 扩展基类时，您不会创建新实例。Collection.create() - 在集合实例中创建新模型的方法。当您没有实例时，如何将新模型附加到其中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:34:58.280

为了更好地理解这里发生了[什么，下面是 _.extend 的作用](http://underscorejs.org/#extend)：

> 将源对象中的所有属性复制到目标对象，然后返回目标对象。它是有序的，因此最后一个源将覆盖先前参数中的同名属性。

所以 Backbone.Collection.extend 只是获取您定义的源对象并将其属性添加到 Backbone.Collection，以便它使用您定义的内容进行扩充，然后将其分配给您的变量 window.MessageCollect。

查看[主干代码](http://documentcloud.github.com/backbone/docs/backbone.html)，它的作用是使用 Create、Add、toJson 等这些方法“扩展”Collection 的**原型**......因为它添加到原型中，所以它适用于Backbone.Collection 的**实例**而不是函数本身，因为这是[原型所做的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/prototype)

> 函数对象继承自 Function.prototype。对 Function.prototype 对象的修改会传播到所有 Function 实例。

在某种程度上，它相当于这个简单的代码：

```
var Car = function(name){
    this.name = name;
}

var ford = new Car("ford");

Car.prototype.drive = function(){
    console.log("drive");
}

ford.drive(); //possible
Car.drive(); // not possible: Uncaught TypeError: object has no method 'drive'
​ 
```

​</p>

# xaml - 用户控件数据绑定winrt

> ID：13101672
> 
> 赞同：0
> 
> 时间：2012-10-27T15:48:49.117
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我在用户控件中面临数据绑定问题。

```
<UserControl.Resources>
        <CollectionViewSource
                x:Name="itemsViewSource"
                Source="{Binding Items}"
                d:Source="{Binding AllGroups[0].Items, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}"/>
        </UserControl.Resources>
        <UserControl.DataContext>
            <Binding>
                <Binding.Source>
                    <local:SampleDataSource />
                </Binding.Source>
            </Binding>
        </UserControl.DataContext>

     <StackPanel Margin="20,60">
            <TextBlock Style="{StaticResource PageHeaderTextStyle}">Categories</TextBlock>
                <ListBox>
                    <ListBoxItem Content="{Binding Title}" />

                </ListBox>

            </StackPanel> 
```

Title 属性绑定显示在 XAML 设计器窗口中，但在程序执行期间没有显示任何内容。我正在使用默认的翻转视图布局，其中 SampleDataSource.cs 文件中有一个“标题”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:07:36.647

你修好了下面这行吗

```
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}" 
```

它定义在所有页面声明所在的顶部。

还

```
Source="{Binding Items}" 
```

指的是`List`您`Items`的`DataContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:56:17.350

“d:”前缀用于定义仅用于设计器的属性，因此您应该尝试将“d:Source”替换为“Source”。

# php - php和mysql登录脚本错误

> ID：13101675
> 
> 赞同：1
> 
> 时间：2012-10-27T15:49:12.380
> 
> 标签：php, mysql, sql, security

我制作了一个 php 登录脚本，但它不起作用。

我的代码：

```
<?php

function clean($str) { /* sanatize strings for databases & security */
  $str = trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

if (!empty($_POST['login_admin'])) {

    $username = clean($_POST['name']);
    $password = clean($_POST['password']);

      try {
        $dbh = new PDO('mysql:host=localhost;dbname=imedia', "imedia", "imedia");

        $statement = $dbh->prepare("SELECT * FROM administratori WHERE username =:username AND parola =:password");
        $statement->execute(array(":username" => $username, ":password" => md5($password)));
        $row = $statement->fetch();
        if ($row) {
            session_start("imedia_admin");
            $_SESSION['imedia_admin']['logname'] = $row['username'];
            $_SESSION['imedia_admin']['password'] = $row['password'];
            echo json_encode("success");
        } else {
            echo json_encode("error");
        }

        $dbh = null;
    } catch (PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }
}
?> 
```

问题`clean`出在功能上，如果不使用它，我的代码可以工作，有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:54:07.587

`PDO`会处理它（*它会自动转义单引号或为您清理它*）。不要用你自己的`clean`函数传递变量。

这是正在发生的事情。

*   假设你有这个字符串`hello world's day`
*   传递给你的功能`clean`使它`hello world''s day`
*   然后`PDO`它再次逃脱它`hello world''''s day`
*   导致（*不匹配*）`hello world's day`不等于`hello world''s day`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T15:55:24.613

由于您使用的是准备好的语句，因此将您的值加入其中，因此无需自己“*清理*”字符串。

这是使用准备好的语句和变量绑定的优点之一；它们开箱即用是安全的。

* * *

`mysql_real_escape_string`将转义`$_POST['name']`( `$username`) 中的特殊字符，这将在您搜索数据库时导致不匹配（因为使用 PDO 传递的值被视为“原样”）。

`mysql_real_escape_string`也已弃用，请查看 php.net 以获取替代方法。

# java - 如何使用 java 代码从此 url 获取文件？

> ID：13101678
> 
> 赞同：1
> 
> 时间：2012-10-27T15:49:33.157
> 
> 标签：java, json, file, url, translate

要使用谷歌翻译 api，我想出了这个网址

[http://translate.google.com/translate_a/t?client=t&text=revenge&hl=en&sl=en&tl=hi&ie=UTF-8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1](http://translate.google.com/translate_a/t?client=t&text=revenge&hl=en&sl=en&tl=hi&ie=UTF-8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1)

如果你点击它，你会得到一个带有准确翻译的 json 格式的文件。为了使用 java 程序检索这个文件，我编写了以下代码。

```
 String word = "revenge";

    System.setProperty("http.proxyHost", "172.30.0.16");
    System.setProperty("http.proxyPort", "3128");

    URL url = new URL("http://translate.google.com/translate_a/t?client=t&text="+word+"&hl=en&sl=en&tl=hi&ie=UTF-8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1");
    url.openConnection();
    InputStream reader = url.openStream();
    FileOutputStream writer = new FileOutputStream("t");
    byte[] buffer = new byte[153600];
    int bytesRead = 0;
    while ((bytesRead = reader.read(buffer)) > 0)
    {  
       writer.write(buffer, 0, bytesRead);
       buffer = new byte[153600];
    }
    writer.close();
    reader.close(); 
```

但它显示以下错误

线程“主”java.io.IOException 中的异常：服务器返回 HTTP 响应代码：403 用于 URL：[http ://translate.google.com/translate_a/t?client=t&text=Moon&hl=en&sl=en&tl=hi&ie=UTF- 8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1](http://translate.google.com/translate_a/t?client=t&text=Moon&hl=en&sl=en&tl=hi&ie=UTF-8&oe=UTF-8&multires=1&otf=1&ssel=3&tsel=3&sc=1) 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403) 在 java.net.URL.openStream(URL.java:1029 ) 在 smsMain.main(smsMain.java:20

希望能得到一些帮助。因为我们是手动获取文件但使用程序是被禁止的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:52:55.873

从[谷歌翻译](https://developers.google.com/translate/?hl=fr)主页：

> Google Translate API 作为付费服务提供。有关详细信息，请参阅定价和常见问题页面。

所以得到一个错误并不奇怪。

# console - Windows 覆盖控制台

> ID：13101679
> 
> 赞同：-1
> 
> 时间：2012-10-27T15:50:14.310
> 
> 标签：console, mingw

我正在下载 MingW，并注意到有一段时间安装程序会产生一个控制台窗口并下载文件。有趣的部分是它以某种方式在控制台窗口中创建下载栏并覆盖百分比数字。我想知道这是如何实现的？

注意：我几乎 100% 确定控制台没有写出`'\n'`，实际上正在覆盖控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:56:43.963

我看到谷歌坏了。

[http://ss64.org/viewtopic.php?id=1499](http://ss64.org/viewtopic.php?id=1499)

编码：

```
@echo off
:: *****************************************************************************
:: * Script Name: DetectMSI_v1.0.cmd                                           *
:: * Author: Gustaaf von Pickartz.                                             *
:: * Date Created: 19th July, 2012\.                                            *
:: * Internal Version: Version 1.0                                             *
:: * ------------------------------------------------------------------------- *
:: * Notice:                                                                   *
:: * This program is provided as is and for fair use distribution.             *
:: * Give credit where credit is due to the author in your own script.         *
:: * ------------------------------------------------------------------------- *
:: * Purpose:                                                                  *
:: * Detect current active MSIEXEC instances using a function for repeatable   *
:: * calls within a script and display a progress bar...                       *
:: * ------------------------------------------------------------------------- *
:: * Updated by: -------                                                       *
:: * Date: 19-07-2012                                                          *
:: * Change1: "Initial script version."                                        *
:: * ------------------------------------------------------------------------- *
:: *****************************************************************************
SETLOCAL ENABLEDELAYEDEXPANSION

 SET PRG0=[*         ]
 SET PRG1=[#*        ]
 SET PRG2=[##*       ]
 SET PRG3=[###*      ]
 SET PRG4=[####*     ]
 SET PRG5=[#####*    ]
 SET PRG6=[######*   ]
 SET PRG7=[#######*  ]
 SET PRG8=[########* ]
 SET PRG9=[#########*]
SET PRG10=[##########]
:: Please note there are special ASCII insertions in the SET BKSPC= declaration below. 80x backspace characters are inserted. ASCII Value 08=[BS]
:: Be sure to verify they are still there when you cut and paste from the web with your text editor (Notepad++ or PsPad). Insert them if missing, otherwise this script will not work...
SET BKSPC=

:Begin_Main
  :: For the sake of the demonstration, start MSIEXEC minimized.
  START /MIN MSIEXEC

  :: Call our function.
  CALL :Fnc_Msi

  :: Waste a little time...  
  PING -n 7 localhost >nul  
  ECHO Exited the FIRST MSIEXEC detection function and progress bar demo.
  ECHO.
  ECHO.
  ECHO A function can't be a function if it cannot be re-used right?

  :: For the sake of the demonstration, start MSIEXEC minimized.
  START /MIN MSIEXEC

  :: Call our function.
  CALL :Fnc_Msi  
  ECHO Exited the SECOND MSIEXEC detection function and progress bar demo.
  echo.
  echo.
  pause
  GOTO :EOF
:: -----------------------------------------------------------------------------

:: Below code is setup to run as a Function to be called anywhere in your script.
:: It will wait 10 loops at 7 sec intervals anytime it is called. Primarily written to detect active MSI installers.
:: The Menu counter and Progress bar is in the function for fun.
::
:: Usage: CALL :Fnc_Msi
2
:Fnc_Msi
       CALL ECHO [.....] %%date%% %%time%% Testing for active MSI instances.

       :catchit
       IF NOT DEFINED CatchMSI SET CatchMSI=0
       IF %CatchMSI% EQU 5 (
          ECHO Waited 5 loops {15sec.} to detect MSI activities. Now resuming further MSI evaluation.
          goto evalmsi
        )
       FOR /F "TOKENS=2* DELIMS=:" %%I IN ('TASKLIST /V /FI "IMAGENAME EQ MSIEXEC.EXE" /FO LIST 2^>NUL ^|FIND /I /V "N/A" ^|FIND /I "WINDOW TITLE:"') DO (SET MSI=%%I)
       IF DEFINED MSI SET MSI_APP=%MSI:~1%
       IF DEFINED MSI_APP goto msi_active
       >NUL PING -n 3 localhost
       SET /A CatchMSI+=1
       goto :catchit

       :evalmsi
       IF NOT DEFINED MSI_APP (
          ECHO [OKAY.] No active MSIEXEC installer running. It is safe to continue.
          SET CatchMSI=
          SET MSI_APP=
          SET CNT=
          SET COUNT=
          SET TIC=
          GOTO :EOF
        )

       :msi_active
       SET CNT=0
       ECHO [ALERT] Installer "%MSI_APP%" is active. Waiting maximum 10 counts.

       :loop
       IF NOT DEFINED COUNT SET COUNT=0
       IF %COUNT% LEQ 9 (SET TIC=0%COUNT%) ELSE (SET TIC=%COUNT%)
       IF %count% EQU 10 (
          <NUL (SET/P Z=[%tic%/10] PROGRESS: !PRG%CNT%!)
          :: Feel free to adjust the PING -n 3 value to say 30sec waits. 
          >NUL PING -n 3 localhost
          TASKKILL /F /FI "WINDOWTITLE eq %MSI_APP%*" >>myprogress.log
          <NUL SET/P Z=%BKSPC%
          SET MSI_APP=
          SET CatchMSI=
          SET MSI_APP=
          SET CNT=
          SET COUNT=
          SET TIC=
          GOTO :EOF
        )
        <NUL (SET/P Z=[%tic%/10] PROGRESS: !PRG%CNT%!)
        :: Feel free to adjust the PING -n 3 value to say 30sec waits. 
        >NUL PING -n 3 localhost
        <NUL SET/P Z=%BKSPC%
          :: Here we write to a log file and call tasklist.exe to do interval checks on the MSIEXEC status.
          :: Demonstrated is that the progress bar is not affected when code is run in the loop. 
          :: Do keep in mind to "suppress to >nul 2>nul" any output that may disrupt the progress bar activty.
          ECHO [%tic%/10] Waiting for "%MSI_APP%" to complete. >>myprogress.log
          TASKLIST.EXE /V | FIND /I "%MSI_APP%">NUL 2>NUL
          IF %ERRORLEVEL% EQU 1 (
             >NUL PING -n 7 localhost
             SET CatchMSI=
             SET MSI_APP=
             SET CNT=
             SET COUNT=
             SET TIC=
             GOTO :EOF
           )
           SET /A CNT+=1
           SET /A COUNT+=1
       goto loop
GOTO :EOF
:: ----------------------------------------------------------------------------- 
```

显然归功于原作者。

# visual-studio-2012 - 等号前后空格、方括号等

> ID：13101680
> 
> 赞同：8
> 
> 时间：2012-10-27T15:50:20.870
> 
> 标签：visual-studio-2012, equals, brackets

我使用 Visual Studio 2012 和插件 Visual Assist X ver。1916\. 我有两个问题。

**1）**当我写等号（`=`）时，我想在符号前后自动插入空格（我必须总是在键盘上按空格插入......）。可能吗？

例子：

```
int variable=167;
->
int variable = 167; 
```

或者

```
"=" -> " = " 
```

**2）**我想在括号前后以及逗号前后自动插入空格。可能吗？

例子：

```
void fun(int param1,int param2);
->
void fun ( int param1, int param2 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:26:59.387

VASSISTX -> 工具 -> 编辑 VA 片段。添加新的快捷方式`"="`（不带“”）并在正文中写入`" = "`（不带“”）。您的其他要求也是如此，规则很简单：在快捷方式中写下您在键入时想要识别的符号，并在正文中写下您实际想要打印的内容。

# jmeter - 来自线程的 20 个请求中仅执行一个请求 - 需要基于条件语句执行所有请求

> ID：13101683
> 
> 赞同：1
> 
> 时间：2012-10-27T15:50:35.500
> 
> 标签：jmeter

我有 5 个线程，每个线程都有多个请求（近 50 个）。
当我开始执行所有线程时，每个线程都可以正常运行所有请求，但只有一个线程（Thread3）没有执行所有必需的请求。

我所有的请求都是通过一些条件语句执行的（例如：）`If TC1=TRUE --> execute`。
在线程 3 中，所有条件都已正确定义，但始终只运行一个请求而其他请求未运行，甚至没有抛出任何异常/错误。

在 jmeter 日志文件中也没有异常/错误。
所有请求 (XML) 看起来也可以正常执行。

有什么方法可以找出为什么线程没有在 jmeter 中运行？

# c - C 获取所有打开的文件描述符

> ID：13101690
> 
> 赞同：6
> 
> 时间：2012-10-27T15:51:23.063
> 
> 标签：c, io, file-descriptor

我想在我的 C 程序中实现行为，以便如果发生 SIGINT，我关闭所有打开的文件描述符。有没有一种简单的方法来获取它们的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T15:55:22.617

跟踪所有打开的文件描述符并单独关闭它们。

在一般情况下，您正在使用的库可能有一个打开的文件，关闭它会导致该库行为异常。

事实上，同样的问题可能存在于你自己的代码中，因为如果你不加选择地关闭了文件描述符，但程序的另一部分仍然记得文件描述符并尝试使用它，它会得到一个意外错误或（如果其他文件已经打开以来）**对错误的文件进行操作**。负责打开文件的组件也负责关闭文件要好得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T15:56:46.693

`/proc/<pid>/fd.`如果可用，您可以读出 的内容。

但是请注意潜在的竞争，如果您的应用程序在读取之间关闭一些或打开新的，`/proc/<pid>/fd`并且您将关闭您读取的内容，则可能会发生这种情况。

因此，我想推荐 Kevin Reid 的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-27T16:01:06.060

我会使用蛮力：`for (i = 0; i < fd_max; ++i) close (i);`. 快速且非常便携。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T16:23:55.497

我的 POSIX 系统解决方案：

所有打开的 fd 都是可能的最低值。
在`open(2)`.
您的新函数打开（并返回）请求的 fd 并将其值传递给名为`define_if_is_the_higtest_fd_and_store_it()`.
您应该只有一个`int hightest_fd_saved`可访问的单例函数（只有 1 个“描述符表”）命名`save_fd()`（初始值为 3（cuz`stderr`为 2））。
配置`SIGINT`为您的信号功能。在里面，你从 [3, `return_fd()`] 开始循环。

我想就是这样...

# javascript - 在骨干路由方面需要帮助

> ID：13101691
> 
> 赞同：0
> 
> 时间：2012-10-27T15:51:37.103
> 
> 标签：javascript, jquery, backbone.js

我正在学习主干路线。我刚刚使用主干构建了一个小应用程序。但是这些路线不起作用。我在控制台中收到此错误

`Uncaught TypeError: Cannot read property 'el' of undefined`

这是我的代码

```
$(function () {
/****************************/
var documents = [
    new Backbone.Model({
        title: 'Title One',
        content: 'This is content for JS module'
    }),
    new Backbone.Model({
        title: 'Title Two',
        content: 'Module Systems Module Systems Module Systems Module Systems Module Systems'
    })
];

var contentsView = Backbone.View.extend({
    tagName: 'ul',
    render: function () {
        _(this.collection).each(function (document) {
            this.$el.append(new DocumentListView({model: document}).render().el);
        }, this);
    }
});

var DocumentListView = Backbone.View.extend({
    tagName: 'li',
    render: function () {
        this.$el.html(this.model.get('title'));
        return this;
    }
});

var DocumentRouter = Backbone.Router.extend({
    routes: {
        'contents': 'contents'
    },
    contents: function () {
        $('body').html(new contentsView({collection: documents}).render().el);
    }
});

var router = new DocumentRouter();
Backbone.history.start();

router.navigate('contents', {trigger:true});
/****************************/
}); 
```

这是根据控制台消息发生上述错误的行

`$('body').html(new contentsView({collection: documents}).render().el);`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:04:04.363

您应该从您的 contentsView 渲染函数中返回它。

```
var contentsView = Backbone.View.extend({
        tagName: 'ul',
        render: function () {
            _(this.collection).each(function (document) {
                this.$el.append(new DocumentListView({model: document}).render().el);
            }, this);
         return this;
        }
    }); 
```

如果您打算将内容视图附加到正文，请使用类似这样的内容 $('body').append(new contentsView({collection: documents}).render().$el);

如果 contentsView 是 body 标记的唯一内容，请使用这样的构造

```
var contentsView = Backbone.View.extend({
            el : 'body',
            tagName: 'ul',
            render: function () {
                _(this.collection).each(function (document) {
                    this.$el.append(new DocumentListView({model: document}).render().el);
                }, this);
             return this;
            }
        });
contentsView.render(); 
```

# c# - 如何在 Excel 工作簿上启用“共享”选项？

> ID：13101693
> 
> 赞同：1
> 
> 时间：2012-10-27T15:51:48.923
> 
> 标签：c#, .net, excel, openxml, closedxml

是否可以通过[OpenXML](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)或[ClosedXML](http://closedxml.codeplex.com/)在 excel 文档上启用“共享” ？或者任何其他库，如果它可以提供帮助......我相信这通常是在您保存文档时执行的（至少它在 VBA 中是这样工作的），但我找不到如何在 C# 中指定保存参数。

我想避免使用 InterOp，因为我可能会通过网络在多个文件上批处理这个过程。

编辑：根据[2009 的一些旧页面](http://blogs.msdn.com/b/openspecification/archive/2009/07/17/overview-of-protected-office-open-xml-documents.aspx)，OpenXML 无法操作受保护的文件存在限制。但是，这也适用于共享吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:01:57.403

没有很好地记录使用 OpenXML SDK 共享 Excel 文档。我做了一些测试，发现可以使用 OpenXML SDK 在 Excel 文档上启用共享。启用共享需要以下步骤：

1.  `WorkbookUserDataPart`在 Excel 文档中添加一个。向部件添加一个空集合`Users`。在此集合中，Excel 存储当前打开此共享工作簿的所有用户。

2.  `WorkbookRevisionHeaderPart`在 Excel 文档中添加一个。向零件添加一个`Headers`集合。在这个集合中，Excel 将存储对历史、版本和修订信息的引用。将第一个元素 ( `Header`) 添加到包含 `SheetIdMap`（用于跟踪修订记录）的集合中。在下面的代码示例中，我添加了文档中包含的所有工作表。此外，将 a 添加`WorkbookRevisionLogPart`到工作簿的修订标题部分。在日志部分中存储了对文档所做的修订列表。

下面的代码示例显示了如何在 Excel 文档上启用共享。该代码还检查文档是否已启用共享。

*在启用共享之前，您应该创建原始文档的备份。*

```
using (SpreadsheetDocument sd = SpreadsheetDocument.Open("c:\\temp\\enable_sharing.xlsx", true))
{
  WorkbookPart workbookPart = sd.WorkbookPart;

  if (workbookPart.GetPartsCountOfType<WorkbookRevisionHeaderPart>() != 0)
  {
    Console.Out.WriteLine("Excel document already shared!");
    return;
  }

  // Create user data part if it does not exist.
  if (workbookPart.GetPartsCountOfType<WorkbookUserDataPart>() == 0)
  {
    Console.Out.WriteLine("Adding user data part");
    WorkbookUserDataPart workbookUserDataPart = workbookPart.AddNewPart<WorkbookUserDataPart>();

    Users users = new Users() { Count = (UInt32Value)0U };
    users.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");

    workbookUserDataPart.Users = users;
  }

  // Create revision header part and revision log part.
  WorkbookRevisionHeaderPart workbookRevisonHeaderPart = workbookPart.AddNewPart<WorkbookRevisionHeaderPart>();

  WorkbookRevisionLogPart workbookRevisionLogPart = workbookRevisonHeaderPart.AddNewPart<WorkbookRevisionLogPart>();

  // Create empty collection of revisions.
  Revisions revisions = new Revisions();
  revisions.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");

  workbookRevisionLogPart.Revisions = revisions;

  string lastSetOfRevisionsGuid = Guid.NewGuid().ToString("B");

  // Create headers collection (references to history, revisions)
  Headers headers = new Headers() { Guid = lastSetOfRevisionsGuid };
  headers.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");

  int worksheetPartsCount = workbookPart.GetPartsCountOfType<WorksheetPart>();                        

  // Create first element in headers collection
  // which contains the SheetIdMap.
  Header header = new Header() { Guid = lastSetOfRevisionsGuid, DateTime = DateTime.Now, 
                                 MaxSheetId = (UInt32Value)(uint)worksheetPartsCount+1, UserName = "hans", Id = "rId1" };

  // Create the list of sheet IDs that are used for tracking
  // revision records. For every worksheet in the document
  // create one SheetId.
  SheetIdMap sheetIdMap = new SheetIdMap() { Count = (UInt32Value)(uint)worksheetPartsCount };

  for (uint i = 1; i <= worksheetPartsCount; i++)
  {
    SheetId sheetId = new SheetId() { Val = (UInt32Value)i };

    sheetIdMap.Append(sheetId);
  }        

  header.Append(sheetIdMap);
  headers.Append(header);

  workbookRevisonHeaderPart.Headers = headers;
} 
```

# c# - 如何将字符串拆分为多维或锯齿数组？

> ID：13101697
> 
> 赞同：4
> 
> 时间：2012-10-27T15:52:11.823
> 
> 标签：c#, .net, vb.net, variables

我有这个：

```
String s = "abcd,efgh,ijkl"; 
```

我想以编程方式将其转换为：

```
String[,] s = {{"ab","cd"},{"ef","gh"},{"ij","kl"}}; 
```

字符串可以是可变长度的。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T16:02:20.037

拆分成`String[][]`可以这样完成：

```
var res = s.Split(',')
    .Select(p => Regex.Split(p, "(?<=\\G.{2})"))
    .ToArray(); 
```

转换为`String[,]`需要一个额外的循环：

```
var twoD = new String[res.Length,res[0].Length];
for (int i = 0 ; i != res.Length ; i++)
    for (int j = 0 ; j != res[0].Length ; j++)
        twoD[i,j] = res[i][j]; 
```

2D 部分要求所有由 分隔的字符串`,`具有相同的长度。`res`另一方面，数组的数组可以是“锯齿状的”，即行可以有不同的长度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-30T16:15:22.180

做这个

```
using System.Linq;

var s = "ab,cd;ef,gh;ij,kl";
var a = s.Split(';').Select(x=>x.Split(',')).ToArray() 
```

或扩展方法

```
var a = "ab,cd;ef,gh;ij,kl".ToTwoDimArray();

public static class StringExtentions
{
    public static string[][] ToTwoDimArray(this string source, char separatorOuter = ';', char separatorInner = ',')
    {
        return source
               .Split(separatorOuter)
               .Select(x => x.Split(separatorInner))
               .ToArray();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T15:56:46.657

你可以用 LINQ 做到这一点

```
 s.Split(',').Select(
             x => new string[2] { x.Substring(0, 2), x.Substring(2, 2)}
 ).ToArray(); 
```

或者你可以选择循环

```
 String s = "abcd,efgh,ijkl";
        var l = new List<string[]>();
        for (int i = 0; i < s.Length; i += 5)
            l.Add(new string[2] { s.Substring(i, 2), s.Substring(i + 2, 2) });

        String[][] sa = l.ToArray(); 
```

# iphone - 将输出映射到 Restkit 中的核心数据时崩溃

> ID：13101701
> 
> 赞同：0
> 
> 时间：2012-10-27T15:52:55.863
> 
> 标签：iphone, objective-c, xcode, core-data, restkit

我有 3 个表 userID，profile 必须有一个关系和 searchId，profile 必须有一个关系。我将两个关系的删除规则设置为 Nullify。我有两个视图控制器，我在其中使用 Restkit 从服务器映射 json 数据。

在视图控制器 1 中：在此视图中，数据从服务器获取并使用 Restkit 映射到数据库中。（用户 ID - > 个人资料）

在视图控制器 2 中：从服务器检索数据并映射到数据库（搜索 ID -> 配置文件）。

View Controller 1 中有一个刷新按钮，它将从服务器获取数据并映射（更新）数据库。

问题：在 View Controller 1 从服务器加载数据后，我试图在 View Controller 2 中搜索从服务器加载数据的数据。我正在 ViewController 1 UI 中加载这些数据（因为 View Controller 1 结果和 View Controller 2 结果格式相似）这里没问题。

但是当我再次单击刷新按钮时，应用程序因以下错误而崩溃。我无法弄清楚问题所在。

```
*** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault for '0x8b4b950 <x-coredata://EE00CF63-BECD-40FC-B531-1424930D75D6/USERID/p42>''
*** First throw call stack:
(0x2b78022 0x2d28cd6 0x230b506 0x230b0a7 0x230ac86 0x2316db9 0x2316c26 0x231a38e 0x234a5f6 0x2338df7 0x233791e 0x233765d 0x2336f0a 0x1d59d91 0x1d59895 0x1d3f33e 0x231af3f 0x231a449 0x234a5f6 0x2338df7 0x23379ec 0x233765d 0x2336f0a 0x1d59d91 0x1d59895 0x1d3f33e 0x231af3f 0x231a449 0x234a5f6 0x2338df7 0x2338d64 0x1d70d50 0x273ebd 0x274727 0x1d7463e 0x1d6d1e7 0x1d6ceea 0x29c725 0x2a78b0 0x29e0f7 0x29e773 0x29ea5a 0x28ed330 0x28eef0c 0x28eecb4 0x28ee402 0x97dd7b24 0x97dd96fe)
terminate called throwing an exception 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:01:47.527

在您点击刷新按钮之前，您的所有托管对象上下文是否都已保存？“CoreData 无法完成错误”错误意味着 Core Data 试图查找具有特定 ID 的行，但找不到该行。当您跨线程传递托管对象（您不应该这样做，您应该传递它们的对象 ID）或跨线程传递它们的 ID 而不保存创建对象的上下文时，就会发生这种情况。

# visual-studio-2010 - 在不破坏程序集引用的情况下移动项目

> ID：13101704
> 
> 赞同：0
> 
> 时间：2012-10-27T15:53:32.110
> 
> 标签：visual-studio-2010, msbuild

我们将程序集引用设置为项目引用。我正在重新组织源代码控制，到处移动项目。当我打开我的解决方案时，项目引用已损坏。我必须删除引用并重新添加它们。这样做会从所有程序集中删除项目引用。

有没有办法在不删除和重新添加项目的情况下更正解决方案文件中的项目引用？

我可以进入 MSBUILD 并执行此操作，但我的解决方案没有卸载选项……所以这似乎很痛苦。有什么本地方法可以解决这个常见问题吗？由于文件在同一个解决方案中，我希望项目引用能够自动解决。

这样我就不必手动更正所有引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T07:54:42.840

如果您只需要执行一次 - Resharper 可以帮助您更快地执行此操作。

每当它发现损坏的引用时 - 它会提供选项“引用程序集 X 并使用 Z 类”。可能不是最好的方法，因为它仍然涉及手动文件管道，但这可以稍微减少鼠标点击和文件树导航。不过，您仍然需要手动删除错误的引用。

# c++ - 如何对 lambda 函数进行原型设计？

> ID：13101706
> 
> 赞同：2
> 
> 时间：2012-10-27T15:53:56.907
> 
> 标签：c++, lambda, c++11

我搜索了 SO 和 Google，但不幸的是找不到答案。我正在寻找正确的语法来原型化 lambda。我试过了：

```
int g = [] () -> int; 
```

但我得到错误。有没有办法制作 lambda 原型？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:05:20.057

您不能对 lambda 进行原型设计。您可以创建一个包含 lambda 表达式的函数对象，但这不是原型设计，而是定义。例如：`auto f = [] (int x, int y) { return x + y; };` 您还可以声明一个标准函数指针，其类型对应于您所需的 lambda 签名。

# iphone - dateFromString 制作错误的日期

> ID：13101710
> 
> 赞同：0
> 
> 时间：2012-10-27T15:54:26.940
> 
> 标签：iphone, ios, xcode, ipad

我绝对不是 NSDateFormatter 或 NSDate 的新手，但这完全让我难过。我到底怎么弄错了开火日期？

```
NSDateFormatter *firedateFormat = [[NSDateFormatter alloc] init];
    [firedateFormat setDateFormat:@"hh:mm a EEE dd MMM, YYYY"];
    [firedateFormat setFormatterBehavior:NSDateFormatterBehaviorDefault];

    NSDate *fireDate1 = [firedateFormat dateFromString:@"5:30 AM Sat 27 Oct, 2012"];

    NSLog(@"fireDate1: %@ ...", fireDate1);

OUTPUT:
fireDate1: 2011-12-31 10:30:00 +0000 ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:01:17.123

这是一个较小的错误，将 YYYY 切换为 yyyy

```
NSDateFormatter *firedateFormat = [[NSDateFormatter alloc] init];
[firedateFormat setDateFormat:@"hh:mm a EEE dd MMM, yyyy"];
[firedateFormat setFormatterBehavior:NSDateFormatterBehaviorDefault];

NSDate *fireDate1 = [firedateFormat dateFromString:@"5:30 AM Sat 27 Oct, 2012"];

NSLog(@"fireDate1: %@ ...", fireDate1); 
```

输出：（`fireDate1: 2012-10-27 10:30:00 +0000 ...`格林威治标准时间的日期）

所有日期格式化程序的一个很好的参考[http://www.alexcurylo.com/blog/2009/01/29/nsdateformatter-formatting/](http://www.alexcurylo.com/blog/2009/01/29/nsdateformatter-formatting/)

# objective-c - 将项目添加到 NSMutableArray 属性中

> ID：13101711
> 
> 赞同：2
> 
> 时间：2012-10-27T15:54:42.947
> 
> 标签：objective-c, arrays, nsmutablearray, nsarray, add

> **可能重复：**
> [在 Objective C 中将对象添加到 NSMutableArray 时遇到问题](https://stackoverflow.com/questions/851926/having-trouble-adding-objects-to-nsmutablearray-in-objective-c)

我有一个具有 NSMutabeArray 属性的类。在一个类的方法中，我试图将另一个 NSArray 中的对象添加到这个 NSMutableArray 中。（添加的对象是 NSDictionaries）。我已经为此尝试了几种方法（在下面指定），但它们似乎都不起作用，因为对象没有添加到数组中（我可以看到，当我 NSLog 时，NSMutableArray 的计数属性仍然返回 0 .

为什么会这样，将项目添加到 NSMutableArray 的正确方法是什么？

方式一：

```
NSArray * logItemsTemp = [logParsedData objectForKey:@"log"]; //items to add, NSlooged the count property and there are 3 items
[[self logItemsArray] addObjectsFromArray:logItemsTemp]; //adding items to the NSMutableArrayProperty logItems array - unsuccessful 
```

方式二：

```
NSArray * logItemsTemp = [logParsedData objectForKey:@"log"];  //items to add, NSlooged the count property and there are 3 items
for (int i = 0; i<[logItemsTemp count]; i++) {
      [logItemsArray addObject:[logItemsTemp objectAtIndex:i]]; //adding items to the NSMutableArrayProperty logItems array - unsuccessful
} 
```

编辑：

```
NSArray * logItemsTemp = [logParsedData objectForKey:@"log"];
    if ([self logItemsArray] == NULL) {
        self.logItemsArray = [NSMutableArray new];
        NSLog(@"%@",logItemsTemp);
    }
        [[self logItemsArray] addObjectsFromArray:logItemsTemp]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:58:49.313

无论哪种方式都有效。第一种方式效率更高。

您不添加任何内容的原因是我认为您首先忘记了创建可变数组:)

你说那`self.logItemsArray.count`是0。这可能是因为`self.logItemsArray`是`nil`:)

```
// Let's see what my logitemsarray is
NSLog(@"%@", self.logItemsArray); 
```

# c# - 将段落分配给字符串变量

> ID：13101712
> 
> 赞同：0
> 
> 时间：2012-10-27T15:54:45.830
> 
> 标签：c#, string

如何将以下文本设置为字符串类型的变量？

```
<li><a href='#M'>M</a></li>
<li><a href='#B'>B</a></li>
<li><a href='#K'>K</a></li> 
```

有什么简单的方法可以使用类似于下面的代码设置字符串变量：

```
StringWriter s = new StringWriter();
s.WriteLine("{0}", @"
<li><a href='#M'>M</a></li>
<li><a href='#B'>B</a></li>
<li><a href='#K'>K</a></li>
"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:57:07.390

首先，您需要`"`在字符串中转义（使用 a 执行此操作`\`），其次您需要将其设为单行，或者您需要连接每一行：

```
StringWriter s = new StringWriter();
// string in single line
s.WriteLine("{0}", 
    "<li><a href=\"#M\">M</a></li><li><a href=\"#B\">B</a></li><li><a href=\"#K\">K</a></li>");

// lines are concatenated
s.WriteLine("{0}", 
    "<li><a href=\"#M\">M</a></li>" +
    "<li><a href=\"#B\">B</a></li>" + 
    "<li><a href=\"#K\">K</a></li>"
); 
```

在这种情况下，我更喜欢使用单行字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:59:45.990

您必须转义“ with \”。

```
s.WriteLine("{0}", 
   "<li><a href=\"#M\">M</a></li><li><a href=\"#B\">B</a></li><li><a href=\"#K\">K</a></li>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:08:04.773

你指的是这个吗？（带换行符）

```
string str = @"<li><a href='#M'>M</a></li>" + Environment.NewLine
                + @"<li><a href='#B'>B</a></li>" + Environment.NewLine
                + @"<li><a href='#K'>K</a></li>"; 
```

或者一行中的字符串：

```
string str = @"<li><a href='#M'>M</a></li>" +
               @"<li><a href='#B'>B</a></li>" + 
               @"<li><a href='#K'>K</a></li>"; 
```

但是您的声誉很高，所以我不确定您在问什么？

# android - android和JSON（如何创建自己的json）？

> ID：13101713
> 
> 赞同：0
> 
> 时间：2012-10-27T15:54:46.847
> 
> 标签：android, json

我想知道如何为 findNearbyWiki 创建类似于 geonames api 的 JSON，而不是使用我想定义自己的数据的 wiki 数据。但是我不知道怎么做。我键入 json 数组并将其命名为 a.json。我在服务器中上传我的 a.json ......但它无法查看.. 这里是我的 json 文件

```
{"geonames":
[
{"summary":"Universiti Teknologi Malaysia (University of Technology Malaysia, UTM) is the oldest public engineering and technological university in Malaysia. The university specialises in technical studies, with separate faculties for Education, Pure Sciences, Management, and Human Resources Development (...)",
"distance":"0.0185",
"rank":90,
"title":"Universiti Teknologi Malaysia",
"wikipediaUrl":"en.wikipedia.org/wiki/Universiti_Teknologi_Malaysia",
"elevation":26,
"countryCode":"MY",
"lng":103.641486,
"feature":"landmark",
"lang":"en",
"lat":1.559034
}
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:58:37.797

使用 JsonObject 和 JsonArray 类将所有信息放入对象中，然后在主 JsonObject 上调用 toString 方法。那会为你做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:58:39.450

使用[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)。

> put 方法添加或替换对象中的值。例如，

```
myString = new JSONObject().put("JSON", "Hello, World!").toString();
produces the string {"JSON": "Hello, World"}. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:50:36.670

```
 JSONObject mainObject = new JSONObject();
    JSONArray geonames = new JSONArray();
    JSONObject item = new JSONObject();
    item.put("summary", "Universiti Teknologi Malaysia (University of Technology Malaysia, UTM) is the oldest public engineering and technological university in Malaysia. The university specialises in technical studies, with separate faculties for Education, Pure Sciences, Management, and Human Resources Development (...)");
    item.put("distance", 0.0185f);
    item.put("rank", "90");
    item.put("title", "Universiti Teknologi Malaysia");
    item.put("wikipediaUrl", "en.wikipedia.org/wiki/Universiti_Teknologi_Malaysia");
    item.put("elevation", "26");
    item.put("countryCode", "MY");
    item.put("lng", 103.641486f);
    item.put("lang", "en");
    item.put("feature", "landmark");
    item.put("lat", 1.559034f);
    geonames.put(item);
    mainObject.put("geonames", geonames);
    String jsonString = mainObject.toString(); 
```

这正是您所需要的

# c# - 如何创建临时文件来缓存库的启动工作？

> ID：13101714
> 
> 赞同：2
> 
> 时间：2012-10-27T15:54:50.403
> 
> 标签：c#, .net, caching, temporary-files

我正在开发一个在启动时执行一些昂贵计算的 C# 库。我想缓存这个计算，这样每次应用程序重新启动时都不会支付成本（想想 EF 和预编译的视图）。

我想缓存的信息很容易以文本格式写入文件。因此，我想在调用库时执行以下操作：

1.  生成配置参数的唯一哈希。
2.  检查是否有该哈希的缓存文件。如果是这样，请将其读入并使用它来跳过设置计算。
3.  如果不是，则执行设置计算并生成由配置参数的哈希命名的适当缓存文件。

此外，我不想永久地在用户的硬盘驱动器上乱扔此类文件：我希望操作系统（很像临时文件）在可能的范围内自动清理它们。

另外，因为这是一个库，所以我不能依赖正在安装的其他软件。因此，我更喜欢纯 .NET 解决方案。

任何人都可以指出一个好的方法/.NET API 来做这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T02:25:06.957

您可能应该使用 ApplicationData 目录来存储缓存文件，例如：

```
var cacheDir = Path.Combine(
    Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData), 
    "MyApplicationName"); 
```

如果您想要自动清理，您可以在安装过程中创建一个空缓存文件，以便在卸载应用程序时自动删除该文件。或者自己在应用程序的安装程序类中编写清理方法。

我不认为你可以依靠操作系统来做清理，Windows 甚至不能清理自己的垃圾文件。

# java - Spring/Velocity/Maven/Tomcat - “请求的资源不可用”

> ID：13101715
> 
> 赞同：1
> 
> 时间：2012-10-27T15:55:00.793
> 
> 标签：java, spring, tomcat, maven, velocity

我正在使用 Spring、Velocity 和 Tomcat 作为容器编写 Web 应用程序。我的问题是，当我在 Windows 7 上启动应用程序时一切正常，但有一天我不得不用 Windows 8 替换它。我已经为 Java EE 开发人员安装了 Eclipse IDE，为 Maven 集成安装了 m2e，Velocity 工具和 Tomcat 7。 X。当我启动应用程序并输入“http://localhost:8080/web/hello”时出现`"HTTP Status 404 - The requested resource is not available"`错误。我不知道发生了什么，因为它更早起作用。如果需要，我可以粘贴一些源代码，但我认为问题在于安装新 Windows 后路径错误。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T15:56:13.117

从应用程序启动检查您的控制台日志。它可能会在那里向您显示一个错误并且没有启动您的应用程序。

否则，您应该从 Spring 成功启动日志。

# jquery - 为什么我必须使用多个 jQuery 库才能让我的脚本正常工作？

> ID：13101717
> 
> 赞同：0
> 
> 时间：2012-10-27T15:55:19.793
> 
> 标签：jquery, version, conflict

我在我正在制作的网站上使用以下代码：

```
 <!-- ScrollTo & highlightfade -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>              
<script type="text/javascript" src="'.$url.'/js/jquery.scrollTo-min.js"></script>
<script type="text/javascript" src="'.$url.'/js/jquery.highlightFade.js"></script>
<script type="text/javascript" src="'.$url.'/js/init.js"></script>

            <!-- The rest of the scripts -->
<script type="text/javascript" src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js"></script>

<script type="text/javascript" src="'.$url.'/js/jquery.tipTip.js"></script>
<script type="text/javascript" src="'.$url.'/js/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript" src="'.$url.'/js/nivo.slider.js"></script>
<script type="text/javascript" src="'.$url.'/js/nicEdit.js"></script>
<script type="text/javascript" src="'.$url.'/js/expand.js"></script>
<script type="text/javascript" src="'.$url.'/js/turn.js"></script> 
```

*   如您所见，我正在使用 2 个 jQuery 库，据我所知，这是完全错误的。问题是它只能以这种方式工作！如果我删除其中一个，一些脚本将无法工作。我还尝试将库更新到最新版本并仅使用该版本，但只有少数上面的脚本有效。

*   我的第二个问题是：当我尝试加载 datetimepicker 脚本时它不起作用，这似乎是因为 jQuery 库冲突。

我无法仅使用一个库使所有脚本同时工作，并且在使用两个库时 datetimepicker-script 不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:57:22.617

您正在使用 jQuery 和 jQuery UI 以及一大堆插件，这并没有错。我的假设是，如果您对此不确定，请在使用前阅读有关 jquery 和 UI 的更多信息。

如果日期选择器造成问题，请查看一些相关示例以尝试查看您做错了什么 - [http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

**编辑：** @user1580380 jquery 和 jquery UI 是两个独立的东西，第一个是不错的简单 js 库，第二个是添加额外功能的 UI，如 datepicker。您确实需要包含两者才能使日期选择器正常工作。您的错误很可能发生在日期选择器的实现中，请随时为此粘贴一些代码。

**编辑：**我注意到您使用的是 jquery 1.3，很可能这是问题所在，将其更新到最新版本 1.8.x 并查看是否可以纠正任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:24:16.080

您的代码片段显示了多种类型的脚本：

1.  核心 jQuery
2.  使用和依赖 jQuery 的 jQuery 插件脚本
3.  您自己的使用和依赖 jQuery 的脚本
4.  jQuery UI（基于 jQuery 构建的 UI 库）
5.  使用和依赖 jQuery 和 jQuery UI 的 jQuery 插件脚本

每个使用 jQuery 的脚本都是针对特定版本的 jQuery 编写和测试的。有时，它适用于多个版本的 jQuery，有时它只适用于一个特定版本的 jQuery。

使用 jQuery 的脚本作者有责任指定它与哪些版本的 jQuery 兼容。使用脚本的人有责任了解和理解所需的 jQuery 版本，并为脚本正常工作创建适当的环境（存在正确版本的 jQuery）。

特定版本的 jQueryUI 仅与某些版本的核心 jQuery 兼容。同样，jQueryUI 插件仅与 jQueryUI 和 jQuery 的某些版本兼容。您自己必须混合和匹配所有这些的兼容版本。

如果您希望使用多个插件，每个插件都需要不同版本的 jQuery，有时可以管理它，但设置起来并不容易，它不是使用 jQuery 的有效方式，它需要一些自定义编程以加载多个版本并确保正确的插件获得正确的 jQuery 版本。一般来说，完全不建议这样做，因为它效率低下、复杂且容易搞砸，特别是如果您不是高级 javascript 开发人员。

首先，您应该列出您拥有的每个脚本都说它与哪个版本的 jQuery 兼容。当您拥有该列表时，您可以开始了解什么可能与什么兼容，或者开始研究如何找到一组脚本来解决您的问题，这些脚本都与相同版本的 jQuery 兼容。

例如，jQueryUI 1.8.23 比 jQuery 1.3.2（一个相当老的核心 jQuery 库版本）更新了很多。我建议从这两个开始，并确保它们兼容。然后，只添加与您最终得到的这两者的组合兼容的插件。您需要查阅每个插件的文档以了解它与哪些版本的 jQuery 兼容。如果它没有任何关于 jQuery 兼容性的文档，则查看插件的源代码，看看那里是否有任何指示。如果仍然没有任何兼容性信息，那么您将不得不进行自己的测试/调试以确定兼容性或选择提供兼容性信息的不同解决方案。

如果您是 jQuery 和 javascript 开发的相对新手，那么您可能希望坚持使用包含有关哪些有效和哪些无效的文档的组合，并构建您的环境以与他们的测试要求兼容。调试和修复不兼容问题不是初学者的话题。您可能（或可能无法）能够确定问题出现在 javascript 调试控制台中的第一个位置，但修复您发现的错误是一个更高级的主题。

如果您最终确定必须在同一页面上为不同的插件加载多个版本的 jQuery，并且没有更好的方法来解决您的问题，那是可能的，但必须谨慎行事。这个[jQuery 文档页面](http://forum.jquery.com/topic/multiple-versions-of-jquery-on-the-same-page)描述了如何完成的基础知识。

# java - 混淆：在java中隐藏硬编码值

> ID：13101727
> 
> 赞同：18
> 
> 时间：2012-10-27T15:56:26.083
> 
> 标签：java, android, security, proguard

> **可能重复：**
> [在混淆代码中隐藏字符串](https://stackoverflow.com/questions/4427238/hiding-strings-in-obfuscated-code)

我试图隐藏我的应用程序的一些静态字符串，以使其更难反编译，这种方式就像密码算法名称等常量在混淆代码中更难找到。

我考虑过类似的事情：

```
String CONCAT= "concat"+"string";
String RAW_STRING= "raw_string";
String FROM_BYTES=new String("from_bytes".getBytes());
String FROM_CHARS=new String(new char[]{'f','r','o','m','_','c','h','a','r','s'});
String FROM_CHAR2=new String(new char[]{102,114,111,109,95,99,104,97,114,115,95,50}); 
```

最后两个选项似乎比原始选项“更暗”，但我想有更好的方法可以做到这一点。

我该如何改进呢？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T16:06:08.310

一方面，你不应该只写

```
String FROM_CHAR2=new String(new char[]{102,114,111,109,95,99,104,97,114,115,95,50}); 
```

char 数组实际上是一个字符串，这简直是天方夜谭。

您可以组合执行以下操作：

1.  把你的“字符串”放在一个 int[] 数组中
2.  甚至更好，将您的 String 分成几个 int 数组
3.  在应用程序的各个阶段计算/操作数组的值，因此它的值只会在运行时的某个时间间隔内变得有效，从而保证不会通过反编译代码一目了然地破译它
4.  在最终将数组转换为单个数组以传递给 String 构造函数之前，来回传递数组，通过局部变量，返回实例变量等
5.  使用后立即将 String 设置为 null，只是为了减少实际 String 在运行时存在的时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:08:03.170

我宁愿使用解密算法在静态（类）初始化程序中设置值

```
class ...
  String CONCAT;

  static {
     CONCAT = uncrypt ("ahgsdhagcf");
  } 
```

其中**uncrypt**可能确实是一个很好的解密算法，或者 base64 解码稍微弱一些。

无论如何，您首先需要一个简单的程序来编码您的字符串。

# ajax - Jquery Ajax 调用适用于除 ie 10 以外的所有浏览器

> ID：13101729
> 
> 赞同：5
> 
> 时间：2012-10-27T15:56:30.603
> 
> 标签：ajax, internet-explorer-10

以下 ajax 调用适用于除 IE10 之外的所有浏览器（除非我将其设置为 IE9 标准模式）我用提琴手查看它，似乎参数在 ie10 中没有通过任何想法？

```
var paramArray = '{"ID":1}';   

 $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        url: '/assets/services/coreWebServices.svc/GetCategoriesWithoutColumns',
        data: paramArray,
        success: successFn,
        error: errorFn
    }); 
```

引发以下错误

```
The OperationFormatter could not deserialize any information from the Message because the Message is empty (IsEmpty = true).
    at System.ServiceModel.Dispatcher.PrimitiveOperationFormatter.DeserializeRequest(Message message, Object[] parameters)

System.Runtime.Serialization.SerializationException: Error in deserializing body of request message for operation 'GetCategoriesWithoutColumns'. The OperationFormatter could not deserialize any information from the Message because the Message is empty (IsEmpty = true).
    at System.ServiceModel.Dispatcher.PrimitiveOperationFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

System.ServiceModel.CommunicationException: Error in deserializing body of request message for operation 'GetCategoriesWithoutColumns'. The OperationFormatter could not deserialize any information from the Message because the Message is empty (IsEmpty = true).
    at System.ServiceModel.Dispatcher.PrimitiveOperationFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest(Message message, Object[] parameters)\u000d\u000a
    at System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc)\u000d\u000a
    at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T08:55:44.843

这似乎是带有 IE10 的 jQuery 中的一个错误（至少是 Windows 7 预览版）。POST 数据未在请求中发送，我已将错误的详细信息记录到 jQuery：[http ://bugs.jquery.com/ticket/12790#comment:18](http://bugs.jquery.com/ticket/12790#comment:18)

**更新**：就我而言，这是免费下载管理器中的一个错误导致 IE10 出现问题。他们已经[修复了这个问题](http://www.freedownloadmanager.org/blog/)（3.9.2 build 1281\. - 2012 年 12 月 26 日），所以它运行良好。如果您阅读上面 jQuery 链接中的评论，您可以看到有人也选择了该评论，并且卸载 FDM 也纠正了该问题。所以这不是 IE10 或 jQuery 的问题，而是改变正常行为的附加组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T09:51:24.663

就我而言，Download Accelerator Plus 是原因。卸载 DAP 解决了该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T10:19:44.183

我知道很久以前有人问过这个问题，但想添加我的答案。

这不是 IE 或 jquery 的错误。一些下载管理器，如**DAP、FDM 和 IDM**负责此问题（即使禁用）。删除这些下载管理器将起作用。

问题是这些下载管理器**对某些 URLMon 接口的 thunk 不完整**，这**会干扰 POST 上传**。

很少有人报告说 Google Gears 也对这个问题负责。禁用后，问题将解决。（未测试）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T10:38:09.280

在 ajax 请求中通过 POST 发送数据在 IE10 中不起作用（即使在我的情况下没有安装可能干扰 IE10 的其他程序）。在 ajax 请求中按 GET 发送数据对我有用。

起初，根据 JavaScript 错误控制台，这似乎是 jquery 问题和 JSON 数据问题（如错误编码或非法字符或无效 json），分别在响应中发送回 json 数据时，但一切都很好json数据。然后我意识到没有发送 POST 数据，我将 jquery $.ajax 调用中的“type”参数更改为“GET”，从而解决了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-14T11:16:38.027

我在 IE10/jQuery 1.11.1 中对 FormData 对象的 Ajax POST 请求遇到了同样的问题。POST 数据和文件附件都没有发送到服务器。仅发送 URL 参数。

我正在使用此补丁向 jQuery Ajax 添加进度回调：

[https://github.com/englercj/jquery-ajax-progress](https://github.com/englercj/jquery-ajax-progress)

没有补丁，请求在 IE10 中完美运行。

该补丁在所有其他浏览器中都能完美运行。

# c# - 捕获帧不是视频 AForge C# ASP.NET

> ID：13101731
> 
> 赞同：0
> 
> 时间：2012-10-27T15:56:35.817
> 
> 标签：c#, asp.net, aforge

我有以下代码，它可以非常快速地捕获视频并更新 jpg。

我需要将其更改为**每 x seconds 捕获一帧**，以便我可以对其执行其他操作，例如解码条形码：

```
using AForge.Video;
using AForge.Video.DirectShow;

namespace BAMSystem
{
public partial class WebForm1 : System.Web.UI.Page
{
    public int FrameRate { get; set; }

    private FilterInfoCollection VideoCaptureDevices;
    private VideoCaptureDevice FinalVideo;

    protected void Page_Load(object sender, EventArgs e)
    {
        inputDevices.Items.Clear();

        VideoCaptureDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
        foreach (FilterInfo VideoCaptureDevice in VideoCaptureDevices)
        {
            inputDevices.Items.Add(VideoCaptureDevice.Name);
        }
        inputDevices.SelectedIndex = 0;

        FinalVideo = new VideoCaptureDevice(VideoCaptureDevices[inputDevices.SelectedIndex].MonikerString);
        FinalVideo.NewFrame += new NewFrameEventHandler(FinalVideo_NewFrame);

    }

    public void Start_OnClick(object sender, EventArgs e)
    {
                FinalVideo.Start();
    }

    void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
                Bitmap video = (Bitmap)eventArgs.Frame.Clone();
                video.Save("C:\\Users\\Wayneio\\Desktop\\image\\live.jpg");
    }
    public void Stop_OnClick(object sender, EventArgs e)
    {
        if (FinalVideo.IsRunning)
        {
            FinalVideo.SignalToStop();
            FinalVideo.Stop();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:21:27.433

首先将 videoCaptureDevice.desiredFrameRate 设置为 1。这应该使 NewFrameEventHandler 每秒运行一次。然后让 NewFrameEventHandler 在 num 之后做一些事情。您想要的秒数（跳过或帧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:19:57.243

如果您的相机不支持设置帧速率。您可以使用全局变量，并且仅在该值 = true 时执行，您可以通过 Visual Studio 中的简单计时器事件来执行此操作。

```
void FinalVideo_NewFrame(object sender, NewFrameEventArgs eventArgs)
   { if(mytimedevent) {
                    Bitmap video = (Bitmap)eventArgs.Frame.Clone();
                    video.Save("C:\\Users\\Wayneio\\Desktop\\image\\live.jpg");
                    }
     mytimedevent!=mytimedevent  // or set it simply to false.
    } 
```

您还可以根据其他计算更改 mytimedevent 的值：如果已完成，请将其启用为 true，并在运行时将其设置为 false。

# objective-c - NSURLConnection FTP 文件上传

> ID：13101737
> 
> 赞同：0
> 
> 时间：2012-10-27T15:57:05.027
> 
> 标签：objective-c, ios, file-upload, ftp, nsurlconnection

我正在尝试使用以下代码在 FTP 服务器上上传 PNG 文件。

```
NSURL *ftpURL=[NSURL URLWithString:@"ftp://username:password@localhost"];

NSMutableURLRequest *urlRequest=[[NSMutableURLRequest alloc] initWithURL:ftpURL];
[urlRequest setHTTPMethod:@"POST"];
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"imageUrl\"; filename=\"dummy.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Type: image/png\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Transfer-Encoding: binary\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

UIImage *img=[UIImage imageNamed:@"a.png"];
NSMutableData *postData=[[NSMutableData alloc] init];
NSData *data=UIImagePNGRepresentation(img);
[postData appendData:data];
[urlRequest setHTTPBody:postData];

[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES]; 
```

我没有收到任何 NSURL 连接，例如失败或要求身份验证。只是，我收到的回电是

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection 
```

我不确定 NSURLConnection 是否支持 ftp 上传。我不打算使用 CFFTPStream 来实现它。任何人都可以纠正我的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:26:48.880

我在[BlackRacoon](https://github.com/lloydsargent/BlackRaccoon)上取得了很好的成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T10:51:25.867

通过 FTP 上传文件需要使用 FTP 命令，如 STOR 或 APPE。并且 FTP 命令不可能使用 NSURLConnection 因为 NSURLConnection 不提供任何方式来发送 FTP 命令。为此，您必须使用 CFFTPStream。

SimpleFTPSample 示例代码显示了这一点。 [https://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/](https://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/)

具体来说，它显示了下载（通过 NSURLConnection 和 CFFTPStream）、上传、目录列表和目录创建（全部通过 CFFTPStream）。

注意：CFFTPStream 没有用于删除文件的公共 API，尽管可以使用已弃用但仍然有效的 CFURLDestroyResource 删除文件。

目前无法通过 CFFTPStream 发送任意 FTP 命令。如果您需要这样做，则必须创建（或获取）您自己的 FTP 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T16:46:42.700

您正在尝试一次性使用 FTP 和 POST，这几乎在任何情况下都不起作用。

FTP 是一个完全不同的协议，例如参见[http://www.faqs.org/rfcs/rfc959.html](http://www.faqs.org/rfcs/rfc959.html)

它更具交互性，但是许多 ftp 服务器都有一个 http 包装器，可以轻松下载，但上传仍然是特殊的。所以如果你想使用它，你应该带一个库或CFFTPStream。

# c# - 获取 Windows Store App 中的所有媒体文件

> ID：13101742
> 
> 赞同：1
> 
> 时间：2012-10-27T15:57:39.653
> 
> 标签：c#, windows-8, windows-runtime, media-player, windows-store-apps

我正在为 Windows 8 开发媒体播放器，我需要阅读 Windows Media Player 媒体库中的所有音乐。

我如何在 WinRT C# 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T18:02:38.660

您需要选择允许您获取用户音乐库中所有音乐文件的`Music Library`合同。`Appmanifest>Capabilities`但是用户可以随时拒绝您的应用使用音乐库的权限。

```
 var folder = Windows.Storage.KnownFolders.MusicLibrary;
        var files = await folder.GetFilesAsync(); 
```

# php - mysqli_query 中的最大查询长度

> ID：13101747
> 
> 赞同：2
> 
> 时间：2012-10-27T15:58:22.090
> 
> 标签：php, mysqli-multi-query

如何确定 PHP 中函数 mysqli_multi_query（或 mysqli_query）接收的最大 $query 参数？我有一个 php 程序，它生成一个由 UPDATE sql 命令组成的大字符串，用 ';' 分隔 问题是，如果该字符串超过一定长度，mysqli_query 会生成一个错误，如“MySQL 服务器已消失”。我注意到该长度似乎在 1MB 左右，但我如何才能探测它以确保我永远不会超过该长度？

该脚本需要在 25 个左右的字段上运行大约 7000 次更新。一次执行一个更新被证明非常慢，连接多个更新运行得更快。

是否有可能更快地运行多个查询？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:42:08.293

**您应该查看 MySQL 错误日志。**

如果您无权访问机器（托管等），您可以向您的管理员或帮助台询问该日志。

**MySQL 支持非常大的查询。**我不确定是否有任何限制，但是当您使用网络时 - 您可能会遇到**数据包大小**的问题。

您可以检查`--max_allowed_packet`MySQL 配置，并尝试设置更大的数据包大小。我不确定默认配置，但它可能是 1MB，这对于一次获取 7000 次更新的查询可能太小了。

**MySQL 可能需要更多 RAM 来处理这样的查询。**

如果您无法重新配置 MySQL，则必须以某种方式将大查询拆分为较小的查询。

您还可以阅读本文以获取更多信息：

[devshed - MySQL 服务器已经消失](http://www.devshed.com/c/a/MySQL/Troubleshooting-Problems-with-MySQL-Programs/3/)

您询问：

> 是否有可能更快地运行多个查询？

这个问题没有简单的答案。它取决于查询、数据库模式等。

在大多数情况下，增加配置文件中的 MySQL 缓存大小可能会有所帮助，因为数据库引擎将在 RAM 内存上运行，而不是在硬盘上运行。当使用大缓存时 - 有时第一个大查询可能会更慢，因为数据尚未加载到 RAM 中，但当它最终加载时 - 需要大量读/写操作的查询会运行得更快。

**稍后添加：** 我假设您的数据处理需要 php deserialize() 函数，这可能很难在纯 SQL 中实现，您必须在 PHP 中执行：) 如果您可以访问服务器控制台，您可以创建 cron (linux sheduler) 作业，在夜间从 shell 调用 PHP 脚本。

**稍后添加** 在评论中讨论后，我还有一个想法。您可以从 phpmyadmin 制作完整的数据库或一张表备份，下载它，在家用计算机上恢复数据（在 Windows 上，您可以使用 XAMPP、WAMP 服务器）。在您的家用计算机上，您可以运行 mysql.exe 并在本地处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T17:37:03.560

我在 INSERT 语句中发现了 16 个字段/值对的限制。超过这个数字，我得到一个“禁止”错误。我在工作语句上的总 INSERT 语句长度为 392 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-31T21:33:13.117

使用 for 循环来完成任何大量工作，只需使用常规 mysqli_query。我收到了超过 16000 个查询。php.ini 文件中的某些内容也必须更改。发布 mb 大小需要更改。如果您发送很多字符，请尽可能大。如果您发送许多不同的变量，也应该更改 var input max。使 php 内存大小更大。确保在运行查询时不会耗尽系统内存。如果您做对了所有事情，您可以发送超过 20000 个查询。将 php 内存设置为至少 256mb。如果您发送大量查询，有时您可能需要将超时时间从 30 和 60 增加到 200 或更高。如果您不更改任何设置，即使一切都是真的，您的帖子也会失败。如果您超出任何 php.ini 设置的限制/最大值，PHP 将使脚本条件为假。您不必一一更改任何 mysql 设置。如果您插入或更新超过 1000 个查询的任何内容，则需要一些时间。

# php - preg_match - 提取值

> ID：13101749
> 
> 赞同：0
> 
> 时间：2012-10-27T15:58:37.030
> 
> 标签：php, preg-match

我是 php 的初学者，并且发现需要 preg_match。浏览完这里的帖子后，这个例子还是有点过头了。有人可以指出我正确的方向。

列表条目如下。

```
 {
     "metadata.title": "",
     "metadata.description": "",
     "metadata.keywords": "",
     "metadata.robots": "",
     "metadata.author": "",
     "config.enable_comments": "0",
     "config.primary_category": "311"
    } 
```

如何提取primary_category中“”之间的值，在本例中为311。

谢谢，

亚历克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:02:04.457

对我来说看起来像json。使用 json_decode

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:16:35.967

由于它看起来像 JSON，因此您可以对字符串使用 json_decode 函数。假设您的字符串包含在变量 $json_str 中，您可以执行以下操作：

```
$str_data = json_decode($json_str, true); 
```

该函数将返回一个关联数组，并且可以按如下方式访问每个元素：

```
$str_data["config.primary_category"] 
```

返回“config.primary_category”中包含的数据。

# java - 在 Java 逻辑中构建倒排索引

> ID：13101754
> 
> 赞同：0
> 
> 时间：2012-10-27T15:58:54.370
> 
> 标签：java, indexing, hashmap

我收集了大约 1500 个文档。我解析了每个文档并提取了标记。这些标记存储在哈希图中（作为键），它们在集合中出现的总次数（即频率）存储为值。

我必须扩展它来建立一个倒排索引。也就是说，术语（键）| 它出现的文档数-->DocNo|该文档中的频率。例如，

```
 Term       DocFreq    DocNum      TermFreq  
  data           3           1            12  
                            23            31  
                            100           17  
  customer       2          22            43  
                            19            2 
```

目前，我在 Java 中有以下内容，

```
hashmap<string,integer>  
for(each document)  
{  
    extract line  
    for(each line)  
    {  
        extract word   
        for(each word)  
        {  
            perform some operations  
            get value for word from hashmap and increment by one  
        }  
    }  
} 
```

我必须建立在这段代码上。我真的想不出实现倒排索引的好方法。到目前为止，我想将 value 设为 2D 数组。所以术语将是键，值（即二维数组）将存储 docId 和 termFreq。

请让我知道我的逻辑是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:46:53.013

我会使用`Map<String, TermFrequencies>`. 此映射将为找到的每个术语维护一个 TermFrequencies 对象。TermFrequencies 对象将具有以下方法：

```
void addOccurrence(String documentId);
int getTotalNumberOfOccurrences();
Set<String> getDocumentIds();
int getNumberOfOccurrencesInDocument(String documentId); 
```

它将在`Map<String, Integer>`内部使用 a 将术语出现的每个文档与该术语在文档中的出现次数相关联。

该算法将非常简单：

```
for(each document) {  
    extract line  
    for(each line) {  
        extract word   
        for(each word) {  
            TermFrequencies termFrequencies = map.get(word);
            if (termFrequencies == null) {
                termFrequencies = new TermFrequencies(word);
            }
            termFrequencies.addOccurrence(document);
        }  
    }  
} 
```

该`addOccurrence()`方法将简单地为出现的总数增加一个计数器，并在内部映射中插入或更新出现的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:45:09.787

我认为最好有两种结构： a`Map<docnum, Map<term,termFreq>>`和 a `Map<term, Set<docnum>>`。您的 docFreqs 可以像`set.size`第二张地图的值一样被读取。该解决方案不涉及自定义类，并允许快速检索所需的一切。

第一张地图包含所有信息，第二张地图是一个衍生品，允许按术语快速查找。在处理文档时，您填写了第一张地图。您可以在之后导出第二张地图，但也很容易一次性完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:48:29.727

我曾经实现了您的要求。您的方法的问题在于它不够抽象。您应该使用对象对术语、文档及其关系进行建模。在第一次运行中，创建术语索引和文档对象，并在填充术语索引时迭代文档中的所有术语。之后，您在内存中有一个表示，您可以轻松地将其转换为所需的输出。不要从考虑面向对象语言中的二维数组开始。除非您想解决数学问题或优化某些东西，否则大多数时候这不是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:50:58.637

我不知道这是否仍然是一个热门问题，但我建议你这样做：

您检查所有文件并按递增顺序给它们一个 id。对于每个文档，您都会遍历所有单词。

现在您有了一个 Hashmap，它将字符串（您的单词）映射到一个 DocTermObjects 数组。DocTermObject 包含一个 docId 和一个 TermFrequency。

现在对于文档中的每个单词，您在 HashMap 中查找它，如果它不包含创建它的 DocTermObjects 数组，否则您只查看它的最后一个元素（由于运行时这很重要，请考虑一下）。如果此元素具有您当前处理的 docId，则增加 TermFrequency。否则，或者如果 Array 为空，则使用您的实际 docId 添加一个新的 DocTermObject 并将 TermFrequency 设置为 1。

例如，稍后您可以使用此数据结构来计算分数。当然，您也可以将分数保存在 DoctermObjects 中。

希望它有所帮助:)

# php - PHP preg_replace 用 H1 替换超链接

> ID：13101760
> 
> 赞同：1
> 
> 时间：2012-10-27T15:59:38.563
> 
> 标签：php, html, regex

我不擅长编写正则表达式，所以正在寻求帮助。

我有以下字符串：

```
<li class="current-menu-item"><a title="Site Name" href="http://www.example.com/">Home</a></li> 
```

想要用 H1 替换超链接。

有没有一种使用正则表达式的简单方法来做到这一点，记住标题、超链接和锚文本的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:06:51.790

```
preg_replace('/<a[^>]*>(\w+)<\/a>/', '<h1>$1</h1>', $subject); 
```

']' 将匹配除 '>' 以外的所有字符，'*' 表示它将匹配其前面出现的零个或多个字符，然后 '>' 将在其后，然后它将捕获 () 中的所有字符, '\w' 将匹配任何单词字符，+ 将匹配至少一个出现在它前面的字符，然后 '' 将出现（正斜杠需要转义）。

$subject 可以是整个 HTML 文档或只是您的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:18:47.173

如果您的输入不重要，我不鼓励为此使用正则表达式。多行 html 标签、非格式良好的输入、嵌入标签很容易将活动扳手扔到您的解决方案中。尝试改用 DOM 类：

```
$in = '<li class="current-menu-item"><a title="Site Name" href="http://www.example.com/">Home</a></li>';
$dom = new DOMDocument;
$dom->loadHTML($in);

// you can use any method to select the nodes in interest, if you need more power use xpath.
foreach ($dom->getElementsByTagName('a') as $a) {
    $replacement = $dom->createElement('h1');
    // poor man's innerHTML
    foreach ($a->childNodes as $cn) {
        $replacement->appendChild($cn);
    }   
    $a->parentNode->replaceChild($replacement, $a);
}

print $dom->saveHTML(); 
```

# java - 在填写必填字段之前禁用 JButton 所需的建议 - Java

> ID：13101765
> 
> 赞同：3
> 
> 时间：2012-10-27T16:00:07.873
> 
> 标签：java, jbutton, textfield

我正在制作一个快递程序，用户可以在其中创建一个新帐户。我想要一个用户在填写文本字段之前无法按下的下一个按钮。

因此，空白的姓名字段和姓氏字段意味着无法按下下一个按钮，但如果已填写字段，则可以按下下一个按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:11:17.623

将这样的 KeyListener 添加到您的字段中：

```
nameField.addKeyListener(new KeyAdapter() {
        public void keyReleased(KeyEvent e) {
            super.keyReleased(e);
            if(nameField.getText().length() > 0 && surNameField.getText().length() > 0)
                nextButton.setEnabled(true);
            else
                nextButton.setEnabled(false);
        }
    }); 
```

这将检查这两个字段是否不为空，每次在字段中按下一个键。如果条件为真，将启用下一步按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:05:16.450

简单来说，试试类似的东西。

```
String text = textField.getText();
if (text.length()>0)
   button.setEnabled(true);
 ... 
```

如果您想动态启用按钮，那么它有点复杂

编辑 ：

复杂案例：

```
Document textFieldDoc = myTextField.getDocument();
textFieldDoc.addDocumentListener(new DocumentListener() {
 void changedUpdate(DocumentEvent e) {
   updated(e);
}
void insertUpdate(DocumentEvent e) {
   updated(e);
}
void removeUpdate(DocumentEvent e) {
   updated(e);
}
private void updated(DocumentEvent e) {
   boolean enable = e.getDocument().getLength() > 0;
   myButton.setEnabled(enable);
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:04:03.270

在您的 actionPerformed 方法中，对于每个 actionEvent 检查，检查是否填写了必填字段，如果是，请设置您的按钮 setEnabled(true)。如果您可以向我们展示您的代码，也许可以提供更好的答案。

# dll - 在 Windows 中链接基于 CMake 的项目的正确方法是什么？

> ID：13101766
> 
> 赞同：1
> 
> 时间：2012-10-27T16:00:16.237
> 
> 标签：dll, linker, cmake, mingw

最后，经过一整天的工作，我已经制作了基于 CMake 的项目，可以在 Windows 上成功编译项目（我一直在 Linux 上开发它），它甚至可以很好地链接在一起，不是吗？现在我启动程序并繁荣，它无法找到 dll 库。

所以，问题：

我有 CMake 项目，里面有库和可执行文件，该可执行文件正在使用项目的库。我在项目中也有许多第三方库。它可以很好地编译和链接。当我尝试启动它时，它会打印找不到项目库的错误。我已将其复制到可执行文件的目录中。现在它打印出没有找到第 3 方库，我已将它们全部复制到 exe 的目录中。现在它打印出 gcc 的库未找到，所以我已将 C:\MinGW\bin 添加到路径中，现在它可以正常启动了。

但我觉得这不是正确的方法。我想让我的队友（新）免于发射时的痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:32:40.530

要么静态链接所有内容，要么`install()`在 CMakeLists.txt 中添加必要的调用。将所有需要的库安装到同一目录并从那里运行可执行文件。

如果你想从 CMAKE_BINARY_DIR 运行可执行文件，你可以

```
set( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR} )
set( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR} )
set( CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR} ) 
```

这将使 CMake 将链接的二进制文件放入同一目录中。

至于 gcc 运行时 - 除了复制 dll 或静态链接之外别无他法。

# c# - Windows API 等效于 Stopwatch::ElapsedTicks？

> ID：13101767
> 
> 赞同：1
> 
> 时间：2012-10-27T16:00:26.517
> 
> 标签：c#, winapi, timing

我正在调用一个需要 2 点之间经过的滴答声的 API。在 C# 版本中，我使用`Stopwatch`并利用了该`ElapsedTicks`方法（这似乎与`ElapsedMilliseconds`明显不同）。

在 Windows API 中，我看到`GetTickCount()`. 然而，这似乎返回经过的毫秒，而不是滴答声。如何使用 Windows API 完成等效操作？（更喜欢语言不可知论，因为我可能会为此编写一些包装器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:04:52.323

秒表在内部使用[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904(v=vs.85).aspx)（如果可用）。

[它通过调用QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905(v=vs.85).aspx)确定它是否可用- 返回值也用于确定性能计数器的频率。

# php - php将变量存储在数组中？

> ID：13101771
> 
> 赞同：-5
> 
> 时间：2012-10-27T16:01:10.700
> 
> 标签：php, arrays, variables

我只是php的新手。所以这个问题可能听起来很幼稚。但我真的很想知道这个。我在一个 php 文件中看到一个 php 代码行是这样的

`$taxonomies = array();`

如果我没记错的话，这里看起来分类法是存储在数组中的变量。那么有人可以澄清我这样做的目的是什么？变量如何存储在数组中任何活生生的例子或任何链接都会真正消除我的疑问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:02:47.400

这只是定义这个变量是一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:02:47.797

它声明为[没有元素](http://php.net/manual/en/language.types.array.php)`$taxonomies`的空数组。您可以使用它来声明一个您事先不知道其元素的数组

```
$taxonomies = array(); 

echo count($taxonomies); //outputs 0 - meaning no elements 
```

开始向数组添加元素

```
$taxonomies[] = "John";  //puts John in positon 0

$taxonomies['species'] = 'Pisces';  //associative array

$taxonomies[10] = 'Arachnida';

echo count($taxonomies); //outputs 3 - no longer empty 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T16:05:29.450

在您的示例代码段之后，该变量`$taxonomies`不会存储在数组中，而是`$taxonomies`实际上变成了一个数组。

`array ()`用于形成一个空数组，这正是`$taxonomies`您的语句之后的内容。

* * *

要将元素添加到新数组中，您可以使用空方括号技巧 ( `$taxonomies[] = "new element";`) 或`array_push`（以及其他函数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T16:09:03.367

见[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

`$taxonomies`设置为空白数组

`$taxonomies[0] = "foo"`将索引 0 设置为`foo`

PHP 也支持关联数组，所以你也可以这样做

`$taxonomies["name"] = "John"`

在 PHP 中，数组实际上是有序映射，因此您不需要设置和初始大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T16:06:36.073

正如其他人发布的那样，它说变量是数组，当您在 foreach 中使用 $taxonomies 时，这反过来会抑制警告。每当您可以从某个函数等中获取一个空值，然后您像使用数组一样使用该变量时，请始终执行以下检查：

```
if(empty($taxonomies))$taxonomies = array(); 
```

现在你可以写

```
foreach ($taxonomies as $value) 
```

无需担心 PHP 警告

# android - Android相对于用户在surfaceView上平滑旋转

> ID：13101772
> 
> 赞同：2
> 
> 时间：2012-10-27T16:01:13.493
> 
> 标签：android, surfaceview, android-canvas, flip

在 Android 中，如何在`SurfaceView`. 使用动画并在 中显示抛硬币非常容易`ImageView`，但我要求它`SurfaceView`具有相同的平滑度。有没有什么办法可以让我`ImageView`在每一个瞬间取出它的内容然后`SurfaceView`连续绘制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:04:18.107

您可以使用 Matrix 类对绘制位图执行这些操作。

就像是

```
Paint paint = new Paint();
    paint.setAntiAlias(true);
    Matrix needleTransMatrix = new Matrix();
    needleTransMatrix.postRotate(rotationAngle,needleImage.getWidth()/2,needleImage.getHeight());
    needleTransMatrix.postTranslate( centerX+METER_OFFSET-needleImage.getWidth()/2, centerY-needleImage.getHeight());

    Matrix dialTransMatrix = new Matrix();
    dialTransMatrix.postRotate(rotationAngle,dialImage.getWidth()/2,dialImage.getHeight()/2);
    dialTransMatrix.postTranslate( METER_OFFSET,0);

    canvas.drawBitmap(bgImage, METER_OFFSET, 0, paint);
    canvas.drawBitmap(dialImage, dialTransMatrix, paint);
    canvas.drawBitmap(needleImage, needleTransMatrix, paint); 
```

下面是我正在谈论的绘图线程

```
private class AnimationThread extends Thread{

    private boolean isRunning = true;
    private int destinationNeedlePosition = NEEDLE_POSITION_ENQURIES;

    public AnimationThread(int destinationNeedlePosition) {
        this.destinationNeedlePosition = destinationNeedlePosition;
    }

    public void cancelAnimation(){
        isRunning = false;
    }

    @Override
    public void run() {

        int destinationAngle = destinationNeedlePosition *45;

        while(isRunning && destinationAngle != rotationAngle){
            if(destinationAngle > rotationAngle)
                rotationAngle++;
            else
                rotationAngle--;
            postInvalidate();
            try {
                sleep(10);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

} 
```

# unity3d - 如何检测我的对象完全在一个盒子里？

> ID：13101775
> 
> 赞同：10
> 
> 时间：2012-10-27T16:01:29.867
> 
> 标签：unity3d

我正在开发一个游戏，您可以将对象拖放到盒子中，但我不知道检测我的对象是否在盒子中的最佳和最有效的方法是什么。

我很清楚对撞机，我正在使用 BoxColliders 和触发器来确定我的对象是否正在接触一个盒子，但我想检测我的对象的时刻（为了简单起见，我们可以假设它是球体，但稍后会是一个网格）完全在我的盒子触发器/对撞机内。

我读到了对撞机的“包含”方法，但 IIRC 他们只是检查该对撞机内是否有一个点，但我很想知道整个对象是否在对撞机内。

先谢谢各位了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T14:30:02.630

![在此处输入图像描述](../Images/b4cd7f5786f1611b8a6a835f02f18b93.png)

所有的盒子都有一个 boxCollider。如果一个物体接触到第二个盒子，则该物体必须在第一个盒子内。

这不是一个好的解决方案，但也许它会有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:56:56.700

**Short answer:** If you want 100% accuracy, your algorithm will never be better than O(|V|) (worst case) where V = {all vertices in mesh}, meaning you'd run .Collides() over every vertex and break if you find one that is outside your container.

**Longer answer:** Several methods exist to subdivide mesh surfaces, examples include: [KD-Trees](http://en.wikipedia.org/wiki/K-d_tree), [OcTrees](http://en.wikipedia.org/wiki/Octree). These are beyond the scope of an SO answer to provide a full implementation, I suggest you see the wiki pages for details.

You could use these methods to divide your mesh up in to smaller sets of vertices. To speed up your algorithm you would start at the root of your subdivision tree and test if that node is contained in your container box. Keep working through the tree until you find a node that is not contained by your box. This will allow your "contains" test to fail faster but ultimately you'll wind up testing every vertex if your box contains your mesh.

*Caveat:* This solution does not work if your mesh is animated. In that case your best bet is to use the bounds around things like arms, feet, legs, etc and use that information to cull your Contains() tests. Again, you'll end up having to test every vertex if the mesh is fully inside your box.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T01:42:24.900

使用[Renderer.bounds](http://docs.unity3d.com/Documentation/ScriptReference/Renderer-bounds.html?from=MeshRenderer)属性获取对象的边界框。

根据您拥有的对象以及您希望检查它在对撞机内的准确度，您可能会使用一种简单的方法来确定它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-06T05:22:31.777

上面的[盒子](https://stackoverflow.com/a/17813128/3192264)解决方案中的盒子是一个不错的选择，但如果这不起作用（由于可变大小/形状的对象），您也许可以使用[Physics.Raycast](http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html)或 Collider.Raycast 完成某些事情。我有一个类似的问题，我需要测试碰撞器中是否包含任意点（其中许多是不寻常的斑点凹形物体）。

基本思想是“钉床”方法，我从多个方向向该点投射光线。如果我在所有光线上击中外部对撞机，那么我可以非常确信该点包含在对撞机内（但仍不能完全确定）。这是一张照片：

![光线投射包含](../Images/8ee5168df4fda50a663d5f18683f1fe0.png)

在这张图片中，我们试图查看蓝色点是否在黄色对撞机内。绿色箭头代表成功的光线投射（黄色对撞机被击中），粉红色的箭头不成功（黄色对撞机未被击中）。

这是说明这一点的代码片段：

```
public static class CollisionUtils {

    private static readonly Vector3[] raycastDirections;

    // These are the directions that we shoot rays from to check the collider.
    static UltrasoundCollisionUtils() {
        raycastDirections = new Vector3[5];
        raycastDirections[0] = new Vector3(0,1,0);
        raycastDirections[1] = new Vector3(0,-1,-0);
        raycastDirections[2] = new Vector3(0,0,1);
        raycastDirections[3] = new Vector3(-1.41f, 0, -0.5f);
        raycastDirections[4] = new Vector3(1.41f, 0, -0.5f);
    }

    public static bool IsContained (Vector3 targetPoint, Collider collider) {
        // A quick check - if the bounds doesn't contain targetPoint, then it definitely can't be contained in the collider

        if (!collider.bounds.Contains(targetPoint)) {
            return false;
        }

        // The "100f * direction" is a magic number so that we 
        // start far enough from the point.
        foreach (Vector3 direction in raycastDirections) {
            Ray ray = new Ray(targetPoint - 100f * direction, direction);

            RaycastHit dummyHit = new RaycastHit();
            // dummyHit because collider.Raycast requires a RaycastHit
            if (!collider.Raycast(ray, out dummyHit, 100f)) {
                return false;
            }
        }

        return true;
    }
} 
```

您可以调整此算法的一种方法是，而不是使用 Collider.Raycast，而是执行 Physics.Raycast。如果射线击中对撞机以外的任何物体，那么您就知道目标对象并不完全在对撞机中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-28T22:16:49.347

以获得更精致和更清洁的方法。这对你正在做的事情来说是完美的。您可以检查您拖动的对象和框之间的距离。

盒子的 ax,y,z 值代表它在空间中的位置。

因此，当您拖动游戏对象时，它可能在 x、y 或 z 上距离框的中心仅 0.2。所以只需使用此方法来计算拖动对象与框之间的距离。

```
 var other :Transform;
    function Update()
    {
        var dist = Vector3.Distance(other.position, transform.position);

    // while dragging 
    if(dist <10)// 10 being on all 3 axiz .
    {
    //dragged object.position = box position
    }

if (dist == 0)
{
print("i am in the centre of the box");
}

} 
```

因此您的游戏对象将在框中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-06T12:03:23.053

简单地说，您可以在容器底部放置一个盒子对撞机。如果您的球体或任何物体接触到它，那么它完全在容器内。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T13:06:52.863

添加一个围绕您正在测试的整个对象的 BoxCollider，并检查其边界 min 和 max 是否包含在 BoxCollider 的输入范围内......这可能不适合复杂的网格对象，但您可能能够摆脱它并且它便宜

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-09T18:59:16.437

虽然有一种方法....不是那么准确，但会起作用：

1.  使用 collider(Circle / Box) 创建四个空对象，就像汽车的四个轮子一样，并使用 collider 使对象成为这些空对象的父对象。
2.  然后为每个碰撞器分配一个布尔值，无论它是否被触摸......
3.  计算与实际网格对撞机一起接触的对撞机的数量……粗略估计重叠的方向。如果是 2，则表示从侧面接触或重叠。例如：如果两个对撞机 + 网格对撞机正在碰撞，这意味着它在侧面重叠......

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-04-09T20:14:50.320

你应该使用对撞机。这是描述。[http://docs.unity3d.com/Documentation/ScriptReference/Collider.html](http://docs.unity3d.com/Documentation/ScriptReference/Collider.html)

# representation - 用第 0 个贝塞尔函数表示一个简单的函数

> ID：13101780
> 
> 赞同：2
> 
> 时间：2012-10-27T16:02:24.770
> 
> 标签：representation, bessel-functions

如果我听起来很愚蠢或含糊不清，我很抱歉，但我有一个关于 Bessel 函数的代码的问题。我的任务是使用前五个零阶贝塞尔函数来表示一个简单的函数（准确地说是 f(x)=1-x），其零被缩放为 1。另外我必须找到他们的系数。

首先，我知道在寻求帮助之前我必须证明我已经解决了这个问题，但我真的不知道从哪里开始。我知道一阶贝塞尔函数，我知道二阶贝塞尔函数，但我不知道什么是 0 阶贝塞尔函数。另外，我什至不知道你可以用贝塞尔函数来表示函数。我知道您可以使用泰勒展开式或傅里叶表示来近似函数，但我不知道如何使用贝塞尔函数来做到这一点。我搜索了这个网站，似乎是我的一个同学，相当粗鲁，只是复制并粘贴了我们的作业，因此该线程被关闭了。

因此，如果某个圣人至少可以在这里为我指明正确的方向，那就太好了。看到这是一个简单的函数，我知道 Matlab 有一个 Bessel 函数的东西，所以编码它不会太难。我只是不知道如何使用求解微分方程的方法来表示另一个函数。哦，系数呢？什么系数？请原谅我的无知和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:36:26.173

好吧！经过大量的调查和工作，我已经确定了这个问题的答案。现在，这实际上是我第一次在这个网站上回答问题，所以再一次，请原谅我可能犯的任何虚假。

首先，看来我对 Bessel-Fourier 级数的看法是正确的。仅使用贝塞尔级数来获得函数逼近是不可能的。通过从 Bessel 函数开始并缩放 x 并执行包括傅立叶变换在内的一系列技巧的漫长过程，我们可以确定函数的 Bessel-Fourier 表示形式为

f(x) = A1*J_0(z1x) + A2*J_0(z2x) + ....

其中 z1 是一阶贝塞尔函数的零点，J_0 是第 0 个一阶贝塞尔函数，A1 是傅里叶-贝塞尔级数的系数。只需绘制贝塞尔函数即可轻松获得零点，但系数是棘手的部分。它们由等式给出

An = (2/(J_1(zn)^2))*积分(x*f(x)*J_0(zn*x), 0, 1)

不用说，其中困难的部分是获得贝塞尔函数的积分。但是通过使用这个[可爱的列表](http://www.fh-jena.de/~rsh/Forschung/Stoer/besint.pdf)，这个过程可以变得简单。凌乱....但很简单。我还应该注意积分是从 0 到 1，因为这是我的任务的性质。如果问题是将其从 0 缩放到 2，那么等式将是

An = (2/(2^2)*(J_1(zn)^2))*积分(x*f(x)*J_0(zn*x), 0, 2)

但我离题了。因此，由于我的作业还让我单独绘制前五个值，然后将它们加在一起并将结果与​​实际函数进行比较，这就是我所做的。因此这里是代码。

```
%%Plotting the Bessel Functions

a=[2.40483, 5.52008, 8.65373, 11.7915, 14.9309]; %a matrix with the first 5 zeros for a first order Bessle Function
A=zeros(5,1);
F=zeros(1, 100);
X=linspace(0,1);

for i=1:1:5

A(i,1)= (2*(besselj(1,a(i))*struve(0,a(i))-besselj(0,a(i))*struve(1,a(i))))/((a(i)^2)*(besselj(1,a(i)))^2)*(3.14/2);

%the equation to determine the coefficients of the Bessel-Fourier series

end

for i=1:1:5
figure(i);
plot(X, A(i,1)*besselj(0, (a(i)*X)));   %plot the first 5 Bessel functions
end

for i=1:1:5
F=F+A(i,1)*besselj(0, (a(i)*X));    %adding all the Bessel functions together
end

figure(6);
plot(X, F);         %plotting the Bessel functions and 1-x
hold on
plot(X, 1-X);

%%Struve Function

function f=struve(v,x,n)
% Calculates the Struve Function
%
% struve(v,x) 
% struve(v,x,n)
% 
% H_v(x) is the struve function and n is the length of
% the series calculation (n=100 if unspecified)
%
% from: Abramowitz and Stegun: Handbook of Mathematical Functions
%       http://www.math.sfu.ca/~cbm/aands/page_496.htm

if nargin<3
n=100;
end

k=0:n;

x=x(:)';
k=k(:);

xx=repmat(x,length(k),1);
kk=repmat(k,1,length(x));

TOP=(-1).^kk;
BOT=gamma(kk+1.5).*gamma(kk+v+1.5);
RIGHT=(xx./2).^(2.*kk+v+1);
FULL=TOP./BOT.*RIGHT;

f=sum(FULL); 
```

我们开始了。struve 函数代码来自这个[地方](http://www.mathworks.com/matlabcentral/fileexchange/37302-struve-functions)

我希望这会有所帮助，如果我犯了任何严重的错误，请告诉我，但老实说，我无法进一步解释那里的方程式，因为我只是从教科书中得到它们。

最好的祝愿！

# php - 谷歌地图响应的语言问题

> ID：13101786
> 
> 赞同：0
> 
> 时间：2012-10-27T16:03:29.263
> 
> 标签：php

我会尽量简短：如果您需要更多信息，我会告诉您。我正在使用此代码从 Google 地图获取信息：

```
<?php

  function getData($url) {
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_HEADER, 0); //Change this to a 1 to return headers
  curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}
$url = 'http://maps.google.com/maps/geo?output=xml&q=' . urlencode($startPlace);
$url = 'http://maps.google.com/maps/api/geocode/json?sensor=false&gl=IT&address=' .   urlencode($startPlace);
$xml = simplexml_load_string($this->getData($this->url)) or die("Error loading xml data");
$points = $xml->Response->Placemark->Point->coordinates;
$provincia = $xml->Response->Placemark->AddressDetails->Country->AdministrativeArea->SubAdministrativeArea->SubAdministrativeAreaName;
$regione =$xml->Response->Placemark->AddressDetails->Country->AdministrativeArea->AdministrativeAreaName;
echo $regione."<br>";
preg_match_all("/-*[0-9.]*(?=,)/", $points[0], $matches);
$longitude = $matches[0][0];
$latitude = $matches[0][2]; 
```

该代码用于检索有关意大利位置的信息，直到三天前，一切正常，但今天早上我看到了一些奇怪的东西：代码返回的 $regione ($xml->Response->Placemark->AddressDetails->Country-> AdministrativeArea->AdministrativeAreaName;) 有一个英文名称。假设找到的位置是伦巴第的一个小镇（其中“伦巴第”是行政区的名称），谷歌地图返回的行政区名称不再是“伦巴第”而是“伦巴第”。

由于此数据用于在本地数据库中搜索行政区域内的其他地方，并且由于数据库中使用的名称显然是意大利名称，因此应用程序不再工作。

我将不胜感激任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:06:17.000

使用不同的 url 解决问题，指定语言参数：

'http://maps.google.com/maps/api/geocode/xml?sensor=false&language=IT&address='。urlencode($startPlace);

此 url 类型返回正确的结果，但形成不同，因此有必要更改代码以访问信息并将它们放入变量中，但这解决了我的问题

# java - Java RMI 客户端访问被拒绝

> ID：13101787
> 
> 赞同：1
> 
> 时间：2012-10-27T16:03:38.997
> 
> 标签：java, rmi

我正在编写一个小型 Java RMI 服务器和客户端程序。我花了一些时间试图找出错误消息但没有成功。

客户端生成以下错误：

> 尝试连接到：127.0.0.1:3232 错误！！！：StockClient：main：无法连接到服务器：java.rmi.UnmarshalException：解组返回标头时出错；嵌套异常是： java.rmi.UnmarshalException: Error unmarshaling return header; 嵌套异常是： java.io.EOFException java.io.EOFException at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:209) at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:359) at sun .rmi.registry.RegistryImpl_Stub.lookup(Unknown Source) at StockClient.StockClient.main(StockClient.java:44) 原因：java.io.DataInputStream.readByte(DataInputStream.java:250) 处的 java.io.EOFException .rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:195) ... 还有 3 个

与服务器只有在客户端尝试连接时才会出现以下错误。

> 此地址 = localhost/127.0.0.1，端口 = 3232 线程“RMI TCP 连接（空闲）”中的异常 java.security.AccessControlException：访问被拒绝（java.net.SocketPermission 127.0.0.1:62586 接受，解决）在 java.security .AccessControlContext.checkPermission(AccessControlContext.java:374) 在 java.security.AccessController.checkPermission(AccessController.java:549) 在 java.lang.SecurityManager.checkPermission(SecurityManager.java:532) 在 java.lang.SecurityManager.checkAccept( SecurityManager.java:1157) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.checkAcceptPermission(TCPTransport.java:636) 在 sun.rmi.transport.tcp.TCPTransport.checkAcceptPermission(TCPTransport.java:275) 在 sun.rmi .transport.Transport$1.run(Transport.java:158) 在 java.security.AccessController。doPrivileged(Native Method) 在 sun.rmi.transport.Transport.serviceCall(Transport.java:155) 在 sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535) 在 sun.rmi.transport.tcp。 TCPTransport$ConnectionHandler.run0(TCPTransport.java:790) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java: 886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:680)run0(TCPTransport.java:790) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java .util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:680)run0(TCPTransport.java:790) 在 sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java .util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:680)

由于服务器错误，我相当确定它是安全或注册表错误，服务器的安全策略是：

> 授予 { 权限 java.security.AllPermission; };

并使用以下参数运行

> -Djava.security.policy=client.policy

我已经尝试了我能找到的一切，但似乎一直在绕圈子。

相关方法：

服务器：

```
 public static void main(String[] args)
    {//main(...) starts
        // set up the data structures and data

        //add users
        //Users hard coded as this is an example proof on concept program
        //Names and passwords not hashed for simplicity
        User alpha = new User("Alpha", "AlphaPass");
        User omega = new User("Omega", "OmegaPass");
        users.add(alpha);
        users.add(omega);

        //startup the RMI server
        try
        {
            System.setSecurityManager(new RMISecurityManager());
            StockServer server = new StockServer();
            StockServerInterface inter = (StockServerInterface)
UnicastRemoteObject.exportObject (server,0);

            // create the registry and bind the name and object.
            registry = LocateRegistry.createRegistry(thisPort);
            registry.rebind("StockServer", inter);
        }
        catch (Exception e)
        {
            System.out.println("Unable to create StockServer: " + e);
            e.printStackTrace();
            System.exit(1);
        }
    }//main(...) ends

    /**
     * Constructor for StockServer
     *
     * @throws RemoteException
     */
    public StockServer() throws RemoteException
    {

        //try to get the host machine's IP address
        try
        {
            // get the address of this host.
            thisAddress = (InetAddress.getLocalHost()).toString();
        } catch (Exception e)
        {
            throw new RemoteException("can't get inet address. " + e);
        }

        //Set the port
        thisPort = 3232;

        //Print out the server address and port
        System.out.println("this address=" + thisAddress + ",port=" + thisPort);
    } 
```

客户：

```
private static StockServerInterface stockServer;
static public void main(String args[])
{
    Registry registry;
    //get the server address from the args
    String serverAddress = args[0];

    //get the server port from the args
    String serverPort = args[1];

    //Let the user know we are about to try to connect
    System.out.println("Trying to connect to: " + serverAddress + ":" + serverPort);
    try
    {
        // get the registry
        registry = LocateRegistry.getRegistry(
                serverAddress,
                (new Integer(serverPort)).intValue());
        // look up the remote object
        stockServer = (StockServerInterface) (registry.lookup("StockServer"));

        //Authenticate the user
        authenticate();

        //setup the hashset
        HashSet<Stock> hashStockSet = null;

        //setup the hashset of desired stocks
        try
        {
            hashStockSet = getHashSet();
        } catch (IOException e)
        {
            e.printStackTrace();
            System.exit(1);
        } catch (ClassNotFoundException e)
        {
            e.printStackTrace();
            System.exit(1);
        }
        //bit of a heavy handed infinte loop so we continue to get the loop
        while(true)
        {
            //Run the ticker
            ticker(hashStockSet);
        }

        // call the remote method

    }
    catch (RemoteException e)
    {
        System.out.println("ERROR!!!: StockClient: main: Could not connect to the server: "+e);
        e.printStackTrace();
    }
    catch (NotBoundException e)
    {
        System.out.println("ERROR!!!: StockClient: main: Could not connect to the server: "+e);
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T04:14:35.710

`SecurityManager`除非客户端依赖代码库功能为服务器提供类，否则您不需要在 RMI 服务器中使用。删除它，或调试 .policy 文件。显然你写的那个没有被加载。

运行您的服务器，`-Djava.security.debug=access,failure`您将看到所有安全域从何处获取其配置，以及在引发异常时失败的域。

# python - 在 Python/GTK 中处理 TreeStore

> ID：13101788
> 
> 赞同：3
> 
> 时间：2012-10-27T16:03:41.940
> 
> 标签：python, gtk, pygtk

我正在尝试在 python/GTK 中编写一个 TreeStore，每个父级对应于所有加载的文件名（“mol_name”），每个父级的子级都指定相应加载文件的一个或多个组件（“链”）。

我想要 3 列窗口，第一列列出加载的每个文件的名称，第二列是一个检查按钮，用于切换是否将结果操作应用于该文件，第三列是一个组合框，它不列出一个或多个可能的组件可以选择关联的加载文件以进一步细化如何应用操作。

以下是我到目前为止的代码。任何帮助或指导使其工作将不胜感激：

```
for imol in molecule_number_list():
    combobox_name = molecule_name(imol)
    combobox.append_text(combobox_name)
combobox.connect('changed', sel_ref_mol)
box1_vbox.pack_start(combobox, False, False)

window = gtk.Window()
window.set_default_size(200, 200)

treestore = gtk.TreeStore(str, bool)
for imol in molecule_number_list():
    mol_name = molecule_name(imol)
    piter = treestore.append(None, [mol_name, True])
    for chain in chain_ids(imol):
        treestore.append(piter, [chain, True])

treeview = gtk.TreeView(treestore)
column_text = gtk.TreeViewColumn("Text")
column_toggle = gtk.TreeViewColumn("Toggle")
column_combo = gtk.TreeViewColumn("Combo")
treeview.append_column(column_text)
treeview.append_column(column_toggle)
treeview.append_column(column_combo)

cellrenderer_text = gtk.CellRendererText()
column_text.pack_start(cellrenderer_text, False)
column_text.add_attribute(cellrenderer_text, "text", 0)

cellrenderer_toggle = gtk.CellRendererToggle()
column_toggle.pack_start(cellrenderer_toggle, True)
column_toggle.add_attribute(cellrenderer_toggle, "active", 1)

cellrenderer_combo = gtk.CellRendererCombo()
cellrenderer_combo.set_property("editable", True)
cellrenderer_combo.set_property("model", treestore)
cellrenderer_combo.set_property("text-column", 0)
column_combo.pack_start(cellrenderer_combo, False)
column_combo.add_attribute(cellrenderer_combo, "text", 2) 
```

# vb.net - VB.net 建议避免键盘记录器监视我的文本框密码？

> ID：13101790
> 
> 赞同：1
> 
> 时间：2012-10-27T16:03:50.430
> 
> 标签：vb.net, vb.net-2010, keylogger

怎么可能做到？

到目前为止，我在 Google 上看到：

*   虚拟键盘
*   在我的文本框中添加一些事件以取消关键事件。
*   按下键时记录按下的内容，然后模拟其他10个随机键？

还有什么可以做的，而不是构建整个反键盘记录防病毒软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:48:40.003

它可以做任何你想象的事情：

*   您可以告诉用户使用密钥向您想要的方向输入他/她的密码，例如在右侧。并使用您的应用程序控制符号（`Dictionary`例如）。您可以确保向用户显示标准键盘图片。
*   您可以告诉用户每按 X 个键就向他/她显示一个字母，或者只需按他/她想要的任何键并丢弃它。
*   您可以告诉用户在按下每个密码键后输入您显示给他/她的字母。
*   您可以告诉用户只输入密码的偶数字符，然后再要求输入其余字符。
*   您可以告诉用户将密码向后输入。

但我认为虚拟键盘是最好的选择。

# python - Django 生产 - 管理员中没有数据库表加载

> ID：13101793
> 
> 赞同：0
> 
> 时间：2012-10-27T16:04:13.627
> 
> 标签：python, django, admin

我正在构建一个 Django 应用程序，现在我正在生产中。我有这个问题：执行manage.py syncdb（一切正常）后，我进入管理员，我找不到模型表。我的 admin.py 文件存在，这是我的文件 url.py：

```
from django.conf.urls.defaults import patterns, include, url
from django.contrib import admin
# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'stambol.views.home', name='home'),
    # url(r'^stambol/', include('stambol.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:12:25.000

```
from django import admin
from example.models import YourModel

admin.site.register(YourModel) 
# or

class ModelAdmin(admin.ModelAdmin):
    pass

admin.site.register(YourModel, YourModelAdmin) 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:37:55.460

确保您已将以下内容作为评论`INSTALLED_APPS`删除`settings.py`。然后`./manage.py syncdb`再次运行。他们应该如下图所示`#`，前面没有

```
 # Uncomment the next line to enable the admin:
     'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
     'django.contrib.admindocs', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T20:24:09.627

**权限**

首先，确保您有权编辑缺失的模型。通常使用超级用户帐户进行开发，然后使用不同的非超级用户帐户测试您的生产部署。如果您至少没有读取权限，则该课程根本不会在管理员中列出。

我认为这是最可能的原因，但我将留下其余的，因为我已经写了它。

**发现您的管理员注册：**

runserver 和生产服务器之间的一个显着区别是，当您运行时`runserver`，它会导入所有`models.py`文件并验证模型。这在生产中不会发生，因此如果您向内部管理员注册模型，`models.py`您需要确保导入该文件以便代码运行。你可以在你的主 url conf 中这样做。

最好的解决方案是在每个应用程序`admin.py`文件中进行注册，以便它们被`autodiscover`.

**设置：**

正如@Pratik 所说，您确实需要在已安装的应用程序中列出管理员。它也有一些依赖项，正如[这里](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overview)提到的。已安装的应用程序应至少包含以下内容：

```
INSTALLED_APPS = [
    'django.contrib.auth', 
    'django.contrib.contenttypes', 
    'django.contrib.sessions'
    'django.contrib.messages',
    'django.contrib.admin',
    #...
    'myapp',
    #...
] 
```

确保包含您的应用程序的目录`myapp`位于您的 python 路径中，以便`myapp`由`autodiscover`. 这已经为您正常工作，否则您会得到类似`ImportError: No module named myapp`.

**重启服务器：**

最后，回顾一下隐藏在注释中的内容，您可以在更改任何代码后通过触摸 wsgi 文件重新启动生产服务器：`touch wsgi.py`. 执行此操作时使用制表符补全，以确保您正在接触现有的 wsgi 文件，而不是由于拼写错误或其他原因而创建新文件。您正在接触的 wsgi 文件应该包含如下内容：

```
...

# tell django to find settings at APPS_DIR/mainsite/settings.py'
os.environ['DJANGO_SETTINGS_MODULE'] = 'mainsite.settings'

# hand off to the wsgi application
application = WSGIHandler() 
```

**还是坏了？**

如果事情仍然没有按预期工作，请跳出框框思考。请记住，您是生产环境的新手，是否有可能提供除您自己的代码之外的其他代码？对前端页面进行一些明显的更改，重新启动服务器，看看它是否有效。当然，这只是在黑暗中拍摄。

# c# - 事件添加和删除实现细节

> ID：13101794
> 
> 赞同：0
> 
> 时间：2012-10-27T16:04:14.433
> 
> 标签：c#, performance, events

我正在开发具有大量性能关键代码的应用程序。在查看我的代码时，我注意到我也有很多`+=`和`-=`关于许多调用的事件，所以我问自己（现在是你）如何实现`+=`和`-=`实现，以及当有很多调用时它有多快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:09:11.943

从根本上讲，事件是事件委托的列表。添加新事件在性能上与调用类似`List<T>.Add()`（通常为 O(1)），而删除委托相当于`List<T>.Remove()`O(n)，其中*n*是列表中委托的数量。

（这并不一定意味着代表实际上是在幕后*实现*的`List<T>`，但性能特征是相同的。）

# coordinates - 如何在graphviz中强制Y坐标

> ID：13101802
> 
> 赞同：3
> 
> 时间：2012-10-27T16:05:29.733
> 
> 标签：coordinates, graphviz, dot

有没有办法在graphviz中使用点强制y位置，以像素或英寸为单位。

`rank=same`不适合我的情况。

`[pos="x,y!"]`with`-Kfdp`可能是一种方式，但我想让GraphViz**确定 X**位置。

谢谢

# php - 将带有变量的 .php 链接转换为 .html

> ID：13101803
> 
> 赞同：0
> 
> 时间：2012-10-27T16:05:58.570
> 
> 标签：php, html, seo

我正在尝试将带有变量的 php 链接转换为 html 链接（例如在 SMF 上），以便增加我网站的 seo，

我的链接是这样的：

> > [http://site.com/pages/page1.php?v1=var1&v2=var2&v3=var3&v4=var4](http://site.com/pages/page1.php?v1=var1&v2=var2&v3=var3&v4=var4)

或者：

> > [http://site.com/pages/?v1=var1&v2=var2&v3=var3&v4=var4](http://site.com/pages/?v1=var1&v2=var2&v3=var3&v4=var4)

我需要它看起来像这样：

> > [http://site.com/pages/page1.var1.var2.var3.var4.html](http://site.com/pages/page1.var1.var2.var3.var4.html)

或者

> > [http://site.com/pages/var1.var2.var3.var4.html](http://site.com/pages/var1.var2.var3.var4.html)

或者

> > [http://site.com/page.php/var1,var2.var3.var4.html](http://site.com/page.php/var1,var2.var3.var4.html)

SMF 论坛中的链接：

> > [http://forum.com/index.php/topic,9197.0.html](http://forum.com/index.php/topic,9197.0.html)

如何做到这一点并且alos能够获取这些变量值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:15:54.630

您只需要学习如何实现 URL 重写。我知道 PHP 在 IIS 中的 Windows 上运行，但我将继续假设您可能正在运行 Apache。只需阅读使用[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件和 mod_rewrite 进行重定向。还有一些类似的东西（唉，你必须付费），称为 Windows 服务器的 ISAPI Rewrite，我已经用过很多次了。如果您不想使用第三方插件并且您拥有服务器 2008，那么 IIS 的向导会做得相当不错，他们只是直接修改您的 web.config 文件来进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:12:51.693

您可能想尝试研究有关 URL 编码的信息，如果您想更改链接显示 url 的方式，我知道这就是...希望我的回答就足够了 :)

[http://www.jaywebtechnologies.co.cc](http://www.jaywebtechnologies.co.cc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T14:23:44.263

我看到您的问题已经解决（对于 Linux）。如果有人对 Windows Server 有同样的问题，您可以使用 Ionics ISAPI Rewrite Filter

[http://iirf.codeplex.com/](http://iirf.codeplex.com/)

I've been using it for years now, and it works perfectly. Just wanted to post it here in case anybody needs it.

# networking - SFBot 在多台服务器上停止工作

> ID：13101806
> 
> 赞同：-1
> 
> 时间：2012-10-27T16:06:21.247
> 
> 标签：networking

SFBot 在多台服务器上停止工作。我正在使用`2.1.0`从`sfbot.de`.

确认受影响的服务器：`Poland`->`Świat 3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:36:43.477

在对服务器之间发送的数据包进行逆向工程后，我找到了解决方案。该程序下载服务器列表并解析该列表，然后设置服务器地址。问题出在解析过程中。

我发现这里描述的方法：http: [//help.sfbot.de/tips/tips.html#server](http://help.sfbot.de/tips/tips.html#server) to manualy add custom server。

在文件中：`server.sfb`您必须添加以下行以强制服务器地址：

```
<country name="POLAND" url="http://www.sfgame.pl">
    <server name="POLAND3" url="http://s3.sfgame.pl" />
</country> 
```

之后，用户只需编辑帐户数据并选择上面输入的新国家和服务器。

# php - Wordpress 循环无法完成帖子的查询

> ID：13101808
> 
> 赞同：4
> 
> 时间：2012-10-27T16:06:35.707
> 
> 标签：php, wordpress, loops

我有一个帖子循环（index.php），它显示三个帖子链接作为标题，在它们上方有一个基于帖子的幻灯片的幻灯片。

```
<div class="nuotraukos">
<?php if (have_posts()) : ?>
<?php $nuotraukos = new WP_Query('category_name=nuotraukos&showposts=3');
while ($nuotraukos->have_posts()) : $nuotraukos->the_post();
$do_not_duplicate = $post->ID; ?>
<div class="post" id="post-<?php the_ID(); ?>">
    <p class="postmetadata"><?php edit_post_link(__('Edit')); ?></p>
        <div class="entry">

            <?php  

                if ( function_exists( 'meteor_slideshow' ) ) {
                $slug = basename(get_permalink());
                meteor_slideshow('' . $slug. ''); 
                }

                 the_content('<h2>' . get_the_title() . '</h2>');

            ?>

        </div>
    </div>

<?php endwhile; ?>
<?php endif; ?> 
```

Meteor 幻灯片本身有一个循环，我假设它在第一次查询后取消了 post 循环。这就是为什么它只打印一个标题（但显示 3 次）你可以在[http://studioglamour.co.uk](http://studioglamour.co.uk)看到它。

问题是我需要在幻灯片下方显示三个不同的链接，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:31:14.467

尝试

```
$slug = basename(get_permalink($nuotraukos->post->ID));
...
the_content('<h2>' . get_the_title($nuotraukos->post->ID) . '</h2>'); 
```

# ruby-on-rails - 存根 ssl_required 所以我的 RSpec 将通过

> ID：13101809
> 
> 赞同：0
> 
> 时间：2012-10-27T16:06:36.597
> 
> 标签：ruby-on-rails, rspec, stubbing

我在 Rails 3.0.9 应用程序中使用 bartt-ssl_requirement。

我的控制器顶部的 ssl_required 和 ssl_allowed 语句通过它们的重定向破坏了我的 rspec。我该如何解决？

通过四处寻找，我可以“存根”我的 spec_helper.rb 中的 ssl_required 方法（对我来说是一个我不完全理解的新概念），只返回 true 而不进行重定向。

Gemfile（相关）：

```
gem 'rails', '3.0.9'
gem 'bartt-ssl_requirement', '~>1.4.0', :require => 'ssl_requirement'

group :test do
  gem 'rspec-rails', '2.6.1'
  gem 'spork', '0.9.0.rc8'
end 
```

控制器：

```
class PagesController < ApplicationController
  ssl_required :about

  def about
    @title = "About Us"
  end

end 
```

spec_helper.rb：

```
require 'rubygems'
require 'spork'

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
  RSpec.configure do |config|
    config.mock_with :rspec
    config.fixture_path = "#{::Rails.root}/spec/fixtures"
    config.use_transactional_fixtures = true

    config.before(:each, :type => :controller) do
      controller.stub(:ssl_required).and_return(:true)
    end

  end
end 
```

如果我在控制器中注释掉 ssl_required，我的测试就会通过。否则，他们仍在重定向并破坏我的应有之义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:20:02.630

好吧，它没有回答我关于如何在 spec_helper.rb 中配置存根的问题，或者这是否是一个好主意，但我需要做的就是添加`SslRequirement.disable_ssl_check = true`到我的 test.rb 环境中。

# jquery - Flexslider 真的弄乱了我在 Chrome 中的网页

> ID：13101811
> 
> 赞同：5
> 
> 时间：2012-10-27T16:06:55.990
> 
> 标签：jquery, flexslider, google-font-api

还有其他人有这种问题吗？我的页面顶部有一个下拉菜单，然后是 flexslider，然后是一些通用文本和图像……有两种字体，一种从 Google 字体 API 调用，一种使用 fontFace（以防万一这是相关的！）..

在我的 Mac 上的 Chrome 中查看时，我得到了一些非常奇怪的行为。每次幻灯片移动时，页面上的所有文本都会变得非常“细”，并且一些（但不是全部）导航链接会向上和向右“跳跃”一个像素。我没见过这样的东西，只能假设这是一些奇怪的冲突？？我已经测试了我能找到的所有东西，Mac 上的 FF、Opera、Safari 和 Chrome，IE9、Windows 上的 Chrome 和 Windows 上的 FF。两个版本的 Chrome 看起来都不好看，但 mac 版本更差。

不幸的是，在 100% 完成之前，我宁愿在网络上列出我的项目，而且我认为制作小提琴的东西太多了..但是在查看实际的 flexslider 网页后，我发现了同样的错误，如果你看缩略图你会明白我的意思（当然如果你在 Chrome 中）。- [http://flexslider.woothemes.com/thumbnail-controlnav.html](http://flexslider.woothemes.com/thumbnail-controlnav.html)

有谁知道修复，因为我想保留我一直在处理的代码！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-18T21:48:49.383

找到了一个似乎可以在不接触 JS 的情况下解决 Chrome 中的问题的修复程序：

**-webkit-backface-visibility**与滑块初始化中的**useCSS:true**结合使用会导致固定定位和 z-indexing 在 Chrome 下中断。当我开始使用固定顶部导航栏、滑块容器和 z-index 值时，我意识到奇怪的事情发生了——将 z-index 设置为高于固定导航栏会使奇怪的文本闪烁消失，但当然滑块然后滚动到固定导航栏的顶部。

要解决此问题，请执行以下两项操作：

*   在“flexslider.css”第 25 行： **.flexslider .slides > li** *注释掉*或*删除* **-webkit-backface-visibility: hidden;**
*   在 flexslider 初始化脚本中： 在滑块选项中*指定*' **useCSS : false '***

*这是由 flexslider JS 默认设置为 true，并告诉浏览器使用 CSS3 3D 转换（如果可用）。如果您问我，这是一个不必要的功能，而没有它，flexslider 似乎也可以正常工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-23T15:51:07.250

应用-webkit-transform: translateZ(0); 到受影响元素的容器，这将停止闪烁。

当您在 flexslider 中有一个包含文本的元素时，这也适用。

CSS 转换仍然会导致一些奇怪的行为。强制元素渲染为 3D 似乎可以解决图形和性能故障。

在 Chrome v27.0.1453.93 上测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T20:35:09.710

将 position:relative & z-index:1 添加到 css 文件中的 .flex-viewport

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-28T17:31:43.113

我知道这已经过时了，但我想我会在摆弄一个小时后快速发布我的解决方案。

如上：

*   在“flexslider.css”第 25 行： .flexslider .slides > li 注释掉或删除 -webkit-backface-visibility: hidden;
*   在 flexslider 初始化脚本中：在滑块选项中指定 'useCSS : false'
*   -webkit-transform：父元素上的 translateZ(0)

然后将其添加到“flexslider.css”的底部：

```
.flex-viewport {

    -webkit-transition: none;
    -moz-transition: none;
    transition: none;
} 
```

在 Chrome 上为我做到了！希望它可以帮助其他遇到此问题的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T09:31:07.670

gruntPi9 建议的解决方案对我有用。我在 Chrome 中遇到了问题，图像跳出框架，他的解决方案解决了这个问题。

滑块：FlexSlider 2

浏览器：铬

问题：图像跳出框架

解决方案：

*   在“flexslider.css”第 25 行： .flexslider .slides > li 注释掉或删除 -webkit-backface-visibility: hidden;
*   在“jquery.flexslider.js”中：在滑块选项中指定“useCSS：false”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T00:14:00.437

在 "flexslider.css" 中找到 ".flexslider .slides > li" 注释掉或删除 -webkit-backface-visibility: hidden;

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T23:27:26.410

我遇到了完全相同的问题，今天刚刚将 FlexSlider 实施到 Bootstrap 响应站点中。该问题不会在 Firefox 或 Safari 上复制（尚未检查 IE，也不是特别想检查）。

我强烈怀疑问题出在 FlexSlider JS 为推进幻灯片而实现的各种触摸、按键和其他方法上，因为我删除了我的 CSS（包括我对 Google Font API 的 href）和 JS 脚本，以确定 FlexSlider 的 JS似乎是罪魁祸首。好消息是，它与 Bootstrap 响应式 JS 没有冲突，似乎也没有任何其他 CSS 样式。虽然仍在进行故障排除，对不起，我不能提供更多帮助，但至少不仅仅是你。

我将在 FlexSlider 论坛上发布此内容。也许开发人员会在下一个版本中修复这个 Chrome 错误。

* * *

铬 v23.0.1271.64

# android - MediaPlayer 的状态更改侦听器

> ID：13101816
> 
> 赞同：11
> 
> 时间：2012-10-27T16:07:22.820
> 
> 标签：android, android-mediaplayer

在这个图中有很多[状态](http://developer.android.com/reference/android/media/MediaPlayer.html#StateDiagram)：

![媒体播放器状态](../Images/b5b0510f0fcab352ebb7803ba019de41.png)

但是使用标准听众，我只能听一些基本的状态。

那么有可能监听 MediaPlayer 的每个状态变化吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T21:07:19.287

不幸的是，除了用自定义状态机容器包围 MediaPlayer 之外，我发现没有其他办法。

添加 ...

您可以创建一个单例容器并定义它​​自己的状态。与 MediaPlayer 的唯一交互是通过这个容器完成的。所有其他类都需要访问容器的 API。

下面是一个简单的大纲：

```
public class MyContainer implements OnBufferingUpdateListener, 
                                            OnCompletionListener, 
                                            OnErrorListener,  
                                            OnInfoListener, 
                                            OnPreparedListener 
{
    static enum MP_STATES
    {
        MPS_IDLE,
        MPS_INITIALIZED,
        MPS_PREPARING,
        MPS_PREPARED,
        MPS_STARTED,
        MPS_STOPPED,
        MPS_PAUSED,
        MPS_PLAYBACK_COMPLETED,
        MPS_ERROR,
        MPS_END,
    }

    private static MyContainer s_mpm = null;
    private MP_STATES m_eState;
    private MediaPlayer m_mp;

    public static MyContainer get()
    {
        if (null == s_mpm)
        {
            s_mpm = new MyContainer();          
        }
        return s_mpm;
    }

    private MyContainer()
    {       
        m_mp = new MediaPlayer();
        m_mp.setOnBufferingUpdateListener(this);
        m_mp.setOnCompletionListener(this);
        m_mp.setOnErrorListener(this);
        m_mp.setOnInfoListener(this);
        m_mp.setOnPreparedListener(this);

        m_eState = MP_STATES.MPS_IDLE;
    }

    public MP_STATES getState()
    {
        return m_eState;
    }

    public void setUrl(String szUrl)
    {
        bringToIdleState();

        try {
            m_mp.setDataSource(szUrl);
            m_eState = MP_STATES.MPS_INITIALIZED;
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        m_mp.prepareAsync();
        m_eState = MP_STATES.MPS_PREPARING;
    }

    public void play()
    {
        switch (m_eState)
        {
            case MPS_PREPARED:
            case MPS_PAUSED:
                m_mp.start();
                m_eState = MP_STATES.MPS_STARTED;
                break;
            default:
                // !! throw exception
        }       
    }

    public void pause()
    {
        switch (m_eState)
        {
            case MPS_STARTED:
                m_mp.pause();
                m_eState = MP_STATES.MPS_PAUSED;
                break;
            default:
                // !! throw exception
        }       
    }

    public void release() 
    {
        m_mp.release();
        m_mp = null;
    }

    private void bringToIdleState()
    {
        // reset() should bring MP to IDLE
        m_mp.reset();
        m_eState = MP_STATES.MPS_IDLE;      
    }   

    // ** Callbacks

    @Override
    public void onPrepared(MediaPlayer mp) 
    {
        m_eState = MP_STATES.MPS_PREPARED;    
        m_mp.start();
        m_eState = MP_STATES.MPS_STARTED;           
    }

    @Override
    public boolean onInfo(MediaPlayer mp, int what, int extra) 
    {
        return false;
    }

    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) 
    {
        m_eState = MP_STATES.MPS_IDLE;
        return false;
    }

    @Override
    public void onCompletion(MediaPlayer mp) 
    {
          // play the next song
    }

    @Override
    public void onBufferingUpdate(MediaPlayer mp, int percent) 
    {
    }

} 
```

}

# java - 将堆栈元素与java中的对象进行比较

> ID：13101818
> 
> 赞同：0
> 
> 时间：2012-10-27T16:07:38.313
> 
> 标签：java, search, object, stack, compare

我在处理我写的这个“search()”函数时遇到了一些麻烦。好吧，我需要检查我的堆栈中是否已经存在一个对象。我的对象如下所示：

```
 Boat [mLeft=[0, 0, 0], boat=L, mRight=[0, C, V]] 
```

我的堆栈是这样的：

```
 Boat [mLeft=[0, 0, 0], boat=L, mRight=[0, C, V]]
  Boat [mLeft=[0, 0, 0], boat=C, mRight=[L, 0, V]]
  Boat [mLeft=[0, 0, 0], boat=V, mRight=[L, C, 0]]
  Boat [mLeft=[0, 0, 0], boat=0, mRight=[L, C, V]] 
```

这是我的“搜索”功能：

```
 public boolean search(Boat b){
    boolean r=false;
    for(int i=0;i<btStack.size();i++)
    {
        if(btStack.elementAt(i).equals(b))
        {
            r = true;               
        }
    }
    return r;
} 
```

这从来都不是真的......我不知道为什么。你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:08:25.080

对象类的默认等于行为基于引用比较相等性。您需要`equals`在 Boat 类中覆盖。使用等于您还应该覆盖`hashcode`

```
@Override
public boolean equals(Object obj) {
    if (obj == null)
        return false;
    if (!(obj instanceof Boat))
        return false;

    Boat b = (Boat)obj;
    return  b.someproperty==this.someproperty;//Assuming someproperty is primitive
} 
```

参考：

1.  [`Equals and Hash Code`](http://www.javaranch.com/journal/2002/10/equalhash.html)
2.  [`Overriding equals and hashCode in Java`](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

# php - nginx php fastcgi无法写入，即使使用他自己的权限，权限也被拒绝

> ID：13101820
> 
> 赞同：5
> 
> 时间：2012-10-27T16:07:51.667
> 
> 标签：php, nginx, centos, fastcgi, centos6

嗨'我在使用诸如 file_put_contents 之类的写入文本功能时权限被拒绝。我在centos 6环境中使用nginx，我使用php-fcgi

问题只能通过将目录权限设置为 777 来解决，但我不想要那个解决方案。

这是php代码

```
<?php
    error_reporting(E_ALL);
    header("content-type:text/plain");
    if(isset($_GET['akarapaci'])) {phpinfo();}
    echo getcwd();
    echo "\nscript owner : ".get_current_user()."\n";
    echo "\nscript getmyuid : ".getmyuid()."\n";
    echo "\nscript getmygid : ".getmygid()."\n";

    file_put_contents(dirname(__FILE__)."/X","1");
?> 
```

这是结果：

```
/var/www/html
script owner : nginx

script getmyuid : 496

script getmygid : 493 
```

该代码只是简单地写入文件 /var/www/html/X （该文件尚未创建），并有这样的错误

```
2012/10/27 19:51:59 [error] 1010#0: *32 FastCGI sent in stderr: "PHP Warning:  file_put_contents(/var/www/html/X): failed to open stream: Permission denied in /var/www/html/info.php on line 10" while reading response header from upstream, client: 111.94.49.72, server: vprzl.com, request: "GET /info.php HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "vprzl.com" 
```

这是 /var/www/ 中的目录列表

```
total 40
drwxr-xr-x 2 root  root   4096 Oct 27 08:44 backup
drwxr-xr-x 2 root  root   4096 Feb 14  2012 cgi-bin
drwxrwxrwx 3 root  root  12288 Oct 27 08:47 devel
drwxr-xr-x 3 root  root   4096 Oct 20 04:48 error
drwxrwxr-x 2 nginx nginx  4096 Oct 27 19:24 html
drwxr-xr-x 3 root  root   4096 Oct 17 18:19 icons
drwxr-xr-x 5 root  root   4096 Oct 27 16:57 images
drwxr-xr-x 2 root  root   4096 Oct 26 14:28 secret 
```

这是我的 nginx.conf

```
user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    server {
      listen          80;
      server_name     vprzl.com www.vprzl.com;
      index           index.html;
      root            /var/www/html/;

      location / { 
          # Rewrite rules and other criterias can go here
          # Remember to avoid using if() where possible (http://wiki.nginx.org/IfIsEvil)
          index  index.html index.htm;
      }

      location ~ \.php$ {
          include fastcgi_params;
          fastcgi_pass 127.0.0.1:9000;
          fastcgi_index index.php;
          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
      }
    }

    server {
      listen          80;
      server_name     images.vprzl.com;
      index           index.html;
      root            /var/www/images/;

      location / { 
          # Rewrite rules and other criterias can go here
          # Remember to avoid using if() where possible (http://wiki.nginx.org/IfIsEvil)
          index  index.html index.htm;
      }
    }

    server {
      listen          80;
      server_name     secret.vprzl.com;
      index           index.html;
      root            /var/www/secret/;

      location / { 
          index  index.html index.htm;
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T00:02:45.347

找到了罪魁祸首！（我自己的回答）我只需要更改文件**/etc/init.d/php-fcgi中的一行**

从

```
PHPUSER=php 
```

到

```
PHPUSER=nginx 
```

然后重新启动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-27T13:32:13.287

(i) 如果您已将 user:group 设置为 nginx 并且权限为 0755，那么您就可以了 (ii) 如果您仍然有权限被拒绝，请检查 selinux。IE

$sudo setenforce 0

(iii) 在禁用 selinux 的情况下，检查您现在是否能够写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T10:02:44.673

请不要禁用您的 SELinux。以下是您需要仔细采取的步骤来克服这个问题：首先，selinux 是您系统的中央安全性。它处理所有对文件的读写。

1) /var/www 中的所有文件夹必须具有 755 权限。

你可以这样做：find "folder" -type d -exec chmod 755 {} \;

2）所有文件必须有权限 644 ：

找到“文件夹”-type f -exec chmod 644 {} \;

3）您需要写入或创建文件的特定文件夹必须具有0777权限。

chmod 0777 "文件夹"

4）然后告诉 SELinux 允许写入该特定目录或特定文件：

chcon -t httpd_sys_rw_content_t test.txt

**既不要将所有文件夹权限设置为 777，也不要禁用 Selinux。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-20T21:01:04.750

您必须授予 nginx:nginx (chown nginx:nginx) 或您启动 nginx 服务的任何用户访问您的 web 文件夹的权限。然后重新启动服务网络。更多信息[在此处输入链接](https://serverfault.com/questions/650395/nginx-php-fpm-blank-pages) 描述

# android - Google Play 导入下载器库

> ID：13101824
> 
> 赞同：2
> 
> 时间：2012-10-27T16:08:09.997
> 
> 标签：android, apk-expansion-files

当我尝试导入 Google Play 下载器库以使用时，这行代码中出现错误：

```
import com.android.vending.expansion.downloader.R; 
```

它说这个导入无法解决

顺便说一句，起初当我导入库时，我遇到了更多错误，我必须通过删除在原始 res 文件夹中重复的 res 文件夹并重命名包来纠正

```
src.com.google.android.vending.expansion.downloader 
```

至

```
com.google.android.vending.expansion.downloader 
```

我试过了

```
import com.google.android.vending.expansion.downloader.R 
```

但我仍然遇到同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:12:08.383

看来我不应该删除原始 res 文件夹中的第二个 res 文件夹...我应该将第二个 res 文件夹中的文件复制到原始 res 文件夹中，然后删除（现在为空的）第二个 res 文件夹...

谢谢你的帮助...

# android - 安卓列表视图不起作用

> ID：13101836
> 
> 赞同：0
> 
> 时间：2012-10-27T16:09:21.993
> 
> 标签：android, android-layout, listview, nullpointerexception

我正在尝试在 android 中创建一个列表视图，但我遇到了一些麻烦。

这是代码：

```
public class MainActivity extends Activity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String[] items = {"red", "blue", "green"};

        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, items));
    }
} 
```

这是xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="Agregar Tarea"
        android:id="@+id/btn" />

    <ListView
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@+id/list" />

</RelativeLayout> 
```

logcat 说第 21 行有 NullPointerException，这一行：

```
ListView listView = (ListView) findViewById(R.id.list); 
```

但我不知道为什么:(

我想以这种方式进行列表视图，因为如果我使用 listactivity，则页眉/页脚不固定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:41:33.977

在 xml 布局中添加 listview id。

因为 id 抛出空指针异常。

```
 android:id="@+id/list" 
```

代替

```
android:layout_below="@+id/list" 
```

并像这样改变上面的线

```
android:layout_below="@+id/btn" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:13:23.710

您的列表视图 ID 不存在

```
android:id="@+id/list"
android:layout_below="@+id/btn" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:15:04.143

您还没有添加属性

```
android:id=@"+id/list" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T16:15:24.687

尝试改变这个

```
android:layout_below="@+id/list" 
```

对此：

```
android:id="@+id/list" 
```

# android - 在 Android 应用程序中集成 Google 驱动器？

> ID：13101837
> 
> 赞同：6
> 
> 时间：2012-10-27T16:09:26.020
> 
> 标签：android, google-drive-api

我需要将文件上传到 Google 驱动器并查看/下载我在我的 android 应用程序中上传的文件。如何以最简单的方式执行此操作..？欢迎提出任何建议、示例代码和说明。提前谢谢你。

PS：无需在设备中安装 GOOGLE 驱动器..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T01:04:03.190

最简单的方法是遵循[Drive 的 Android 快速入门指南](https://developers.google.com/drive/quickstart-android)

它解释了如何构建一个在 10 分钟内将照片上传到云端硬盘的 Android 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-27T07:29:47.133

Google 已弃用适用于 Android 的 Google Drive API。所以我们必须使用 REST API。

使用这个答案并检查它是否有用。

[https://stackoverflow.com/a/59063198/9538854](https://stackoverflow.com/a/59063198/9538854)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:05:53.460

请参阅此，[完成分步指南](https://developers.google.com/drive/quickstart-android)

仅用于上传的代码（我仍在研究如何浏览文件）：

```
package com.example.drivequickstart;

import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

import android.accounts.AccountManager;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.widget.Toast;

import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
import com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException;
import com.google.api.client.http.FileContent;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;

public class MainActivity extends Activity {
    static final int REQUEST_ACCOUNT_PICKER = 1;
    static final int REQUEST_AUTHORIZATION = 2;
    static final int CAPTURE_IMAGE = 3;

    private static Uri fileUri;
    private static Drive service;
    private GoogleAccountCredential credential;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);
        startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
    }

    @Override
    protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
        switch (requestCode) {
        case REQUEST_ACCOUNT_PICKER:
            if (resultCode == RESULT_OK && data != null && data.getExtras() != null) {
                String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
                if (accountName != null) {
                    credential.setSelectedAccountName(accountName);
                    service = getDriveService(credential);
                    startCameraIntent();
                }
            }
            break;
        case REQUEST_AUTHORIZATION:
            if (resultCode == Activity.RESULT_OK) {
                saveFileToDrive();
            } else {
                startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
            }
            break;
        case CAPTURE_IMAGE:
            if (resultCode == Activity.RESULT_OK) {
                saveFileToDrive();
            }
        }
    }

    private void startCameraIntent() {
        String mediaStorageDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).getPath();
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss", Locale.US).format(new Date());
        fileUri = Uri.fromFile(new java.io.File(mediaStorageDir + java.io.File.separator + "IMG_" + timeStamp + ".jpg"));

        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
        startActivityForResult(cameraIntent, CAPTURE_IMAGE);
    }

    private void saveFileToDrive() {
        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    // File's binary content
                    java.io.File fileContent = new java.io.File(fileUri.getPath());
                    FileContent mediaContent = new FileContent("image/jpeg", fileContent);

                    // File's metadata.
                    File body = new File();
                    body.setTitle(fileContent.getName());
                    body.setMimeType("image/jpeg");

                    File file = service.files().insert(body, mediaContent).execute();
                    if (file != null) {
                        showToast("Photo uploaded: " + file.getTitle());
                        startCameraIntent();
                    }
                } catch (UserRecoverableAuthIOException e) {
                    startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
        t.start();
    }

    private Drive getDriveService(GoogleAccountCredential credential) {
        return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential).build();
    }

    public void showToast(final String toast) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Toast.makeText(getApplicationContext(), toast, Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-10T21:48:57.577

可以通过 Google Drive API 访问 Google 驱动器，示例演示是由 android 人员在以下路径中创建的，这非常有用，并提供了所有功能的示例。请点击以下链接 [Git hub demo for Google Drive API](https://github.com/googledrive/android-demos.git)

# javascript - 在 selenium 中从 javascript 中读取变量

> ID：13101838
> 
> 赞同：2
> 
> 时间：2012-10-27T16:09:28.543
> 
> 标签：javascript, variables, selenium, webdriver

我正在使用 Selenium Webdriver 2.0。正在测试的 Html 页面，包括 x.js 文件，变量“price”在 x.js 中定义，基于从 html 表单输入的一些数据和对 javascript 的一些计算。HTML 使用以下方法打印正确的价格值： `<td>$ <span id="price"></span></td>` 如何从 javascript 中获取价格值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:29:44.070

假设价格在 中显示为文本`<span></span>`，试试这个：

```
driver.findElement(By.id("price")).getText(); 
```

# css - 如何使用 CSS3 为图像的某些部分设置动画

> ID：13101841
> 
> 赞同：4
> 
> 时间：2012-10-27T16:09:47.590
> 
> 标签：css, animation

我想创建一个带有一些很酷的 3d 效果的图像滑块，例如这个：[http ://tympanus.net/codrops/2011/09/05/slicebox-3d-image-slider/](http://tympanus.net/codrops/2011/09/05/slicebox-3d-image-slider/)

问题是，虽然我知道如何使用 CSS3 3D 变换来旋转某些东西，但我不知道如何为图像的“部分”设置动画。在上面的链接中，脚本似乎以某种方式将图像“切片”成几部分，然后分别为它们设置动画。然而，图像没有被预先分割——它是一个完整的图像。

任何人都可以推荐任何有关如何实现此效果的教程，或者只是给出用于执行此操作的任何技术的名称？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:06:50.493

好吧，这个插件的功能很简单：

您的图像在无序列表中。一旦触发更改，就会发生以下情况。

`div`正在创建一个叠加层，其中包含 5 个其他 div - 切片。

```
+----+----+----+----+----+
|    |    |    |    |    |
|    |    |    |    |    |
| 1  | 2  | 3  | 4  | 5  |
|    |    |    |    |    |
|    |    |    |    |    |
+----+----+----+----+----+ 
```

这些切片包含几个 div，这些 div 与您想要转换的图像设置为背景图像（仅显示它的相应部分）。

```
 +---+\
  Slice 1:  |\  | \
  Image     | \_|__\
  currently | | |  |
  shown   ->| |_|__|
            | / |  /
            |/  | /<- Image to transition to
            +---+/ 
```

现在为每个隔间设置一个超时（长度略有不同），使用实际的 CSS-Transition（180° 旋转）旋转到新图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:57:15.280

CSS3 动画就是随着时间的推移改变**单个 DOM 节点的 CSS 属性。**因此，从技术上讲，您可以不为图像的某些部分设置动画 - 或者就此更改 DOM 元素的特定区域区域的属性。所以你要做的实际上是拥有多个 DOM 元素，每个元素代表一个切片。

一种方法是为每个切片设置一个 div，并将图像设置为背景。每个预先指定大小的 div 并排放置的背景图像将以这样的方式定位，即它们可以组合形成整个图像。

现在您可以使用 css 动画为每个这样的 div 设置动画。如果您打算使用 javascript，则不必让服务器呈现所有这些 div 元素。实际上，可以通过 javascript 创建每个切片的 div-s 和设置背景位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T16:43:39.667

查看插件源代码，我可以看到它确实*将*图像切片并分别旋转每个部分。它在制作动画之前创建切片并隐藏原始切片，并在制作动画后显示新的原始切片并销毁切片。

这是分割图像的一种方法：

```
for each slice:
  create a new copy of the image
  place the image in a new div
  set the image `position` to `absolute` and `top` to minus the slice beginning
  set the div height to the slice height and `overflow` to `hidden`
  place the div to the correct position 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T01:40:37.003

我正在制作一个微调器，而不是在 Photoshop 中制作单个图像，或者在我使用`:before`选择器在图像上设置径向背景渐变的任何地方

```
-webkit-radial-gradient(center, ellipse cover, #fff 23%,transparent 27%,transparent 100%) 
```

允许下面副本的中心显示（非动画），通过复制 img 元素并使用 Javascript 将其位置设置为与现有元素相同来定位

```
function spinBadge() {
    hovered = document.querySelector('a:hover img')
    spinner = document.createElement('img');
    spinner.src = hovered.src;
    spinner.className = 'spinner';
    spinner.setAttribute('width','120px');
    spinner.setAttribute('height','120px');
    spinner.setAttribute('style','border:0; margin:0; max-width: none; position: absolute; pointer-events: none; left: '+hovered.offsetLeft+'px; top: '+hovered.offsetTop+'px;');
    hovered.parentNode.appendChild(spinner);
    setTimeout(function(){document.querySelector('.spinner').className = 'spinner wheee'})
    setTimeout(function(){document.querySelector('.wheee').remove();},3000);
} 
```

有很多方法可以通过改变边距等来“分割”整个图像，并让部分有选择地显示出来。

SVG 图像也非常适合动画，并且可以为各个部分指定类，从而使用 CSS 过渡进行动画处理。如果你给它一个谷歌，这个网站和 CSS 技巧之类的东西很多（[这](http://css-tricks.com/using-svg/)会浮现在脑海中）。

# ruby - 编写一个解析器，它接受一个语法并生成一个解析树

> ID：13101846
> 
> 赞同：5
> 
> 时间：2012-10-27T16:10:26.320
> 
> 标签：ruby

我的目标是编写一个将采用逻辑表达式（例如：A OR NOT(B AND C)）并将其转换为析取范式的函数。（A 或非 B 或非 C）

我写了一个会生成逻辑表达式的语法

```
S => !S
S => (S)
S => S op S
S => W
op => AND | OR
W => A | B | C | ... | Z 
```

这是我的算法

1.  给定一个表达式 S
2.  使用上面的语法递归解析表达式并构建相应的解析树
3.  通过递归地“简化”树上的任何 NOT 运算符，将表达式转换为 DNF。
4.  递归遍历最终解析树并输出 DNF 逻辑表达式。

使用解析树，我可以通过检查当前节点的父节点并将其推下树或重新排列树（在 NOT NOT 的情况下）来简化 NOT 运算符。然后将树弄平是微不足道的。

这在纸上有效，但现在我坚持使用实际的解析器。如何将这些规则转换为解析器类？我不想使用外部库并想从头开始编写解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:04:18.883

看看 Treetop，它可能会做你想做的事。[http://treetop.rubyforge.org/](http://treetop.rubyforge.org/)

# spring-mvc - Spring MVC 资源

> ID：13101848
> 
> 赞同：0
> 
> 时间：2012-10-27T16:10:29.653
> 
> 标签：spring-mvc

我正在尝试使用资源标签将我的静态元素与 Spring MVC 链接 - 我无法弄清楚它们的放置位置。

我将我的链接发布为 -

```
<link rel="stylesheet" href="/css/elements.css"> 
```

我已将文件放在 - WebContent/resources/css/elements.css

我在我的 servlet 中使用的资源标签是 -

```
<mvc:resources location="/css/**" mapping="/resources/css/"/> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:17:00.163

你颠倒了这两个属性。`locations`是文件在 Web 应用程序根目录中的位置。`mapping`是用于从浏览器访问资源的 url 模式。所以配置应该是

```
<mvc:resources location="/resources/css/" mapping="/css/**"/> 
```

如[文档中所述](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-config-static-resources)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T15:52:42.897

您的资源位于“resources”文件夹中，因此您在调度程序 xml 中添加了以下行。

```
<mvc:resources location="/css/**" mapping="/resources/css/"/> 
```

这个资源文件夹必须在“webcontent”文件夹中。然后您需要使用上下文路径访问资源。

```
<link rel="stylesheet" href="${pageContext.request.contextPath}/resources/css/elements.css"> 
```

试试这个。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:21:50.363

发现错误..使用 c:url 发布绝对路径有帮助:)

我现在将我的网址发布为

```
&lt;link rel="stylesheet" href="&lt;c:url value="/css/slideshow.css" />"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T15:59:14.970

如果您使用的是相对于 Tomcat 的根上下文的位置，那么您需要这样做。这个和其他答案的区别在于我在位置映射中包含了应用程序上下文：

```
<mvc:resources location="/webapp-name/resources/" mapping="/resources/**"/> 
```

属性“映射”是相对于类路径，而“位置”是相对于 Tomcat 的根目录。（注意：这些不是“相对”网址）

此配置将提供对子文件夹中资源的访问，例如`/resources/css/*`

# python - 使用正则表达式选择 POST/GET 参数

> ID：13101853
> 
> 赞同：0
> 
> 时间：2012-10-27T16:10:55.313
> 
> 标签：python, regex, django

如何使用正则表达式选择 POST/GET 参数列表？例如：

```
request.POST.regex(/^inputs_/) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:16:09.167

```
import re
input_keys = [key for key in request.POST if re.match(r"^inputs_", key)] 
```

也就是说，这里的正则表达式将是矫枉过正的：

```
input_keys = [key for key in request.POST if key.startswith("inputs_")] 
```

# expressionengine - 按作者显示标签云

> ID：13101854
> 
> 赞同：4
> 
> 时间：2012-10-27T16:11:01.087
> 
> 标签：expressionengine

我有一个有很多用户的网站，每个用户都有自己的迷你网站。这个“迷你网站”的一部分是博客。我想为每个作者展示一个标签云。Tag 和 Tagger 的基本云功能将执行此操作，但适用于所有作者。添加 author_id 不起作用。

我尝试使用频道条目循环按作者获取所有条目，然后显示与这些条目关联的标签。

```
{exp:channel:entries author_id="1" channel="blog"}
{exp:tag:tags entry_id="{entry_id}"}
<li>{title}<a href="#">{tag_name}</a><span>{total_entries}</span></li>
{/exp:tag:tags} 
{/exp:channel:entries} 
```

这确实给了我一个只有作者使用过的标签列表（在标签中，它在标签器中不起作用）。但是，如果一个标签被多次使用，它会不止一次地列出它。

原生 EE 和标签功能不会让我做我想做的事。我可能需要使用 php（一个插件）来做到这一点。获取作者使用的所有标签，将它们放入数组中，删除重复项，然后将其输出到我的模板中。我确实在 Solspace 发过帖子，但他们说我需要使用 PHP。

在我这样做之前，我想看看是否有更简单的方法或其他可以做到这一点的附加组件。如果这是可行的方法，我也欢迎任何有关此类插件方法的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:30:01.860

不幸的是，我认为您在这里唯一的选择是自定义 PHP 来删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:53:09.690

使用标记器和查询模块，您应该能够得到您需要的东西（也可能是 Solspace 标签，我只是没有使用过那个，所以不能肯定地说）。

像这样的查询

```
SELECT tag_name  
FROM exp_tagger
WHERE author_id = 7 
```

为该作者提供一组标签。

您可以像这样将它与查询模块一起使用，将当前条目`author_id`用作查询的动态部分。

```
{exp:query sql= "SELECT tag_name FROM exp_tagger WHERE author_id = {author_id}"}
    {tag_name}
{/exp:query} 
```

# c# - 无法将类型“WindowsGame24.Bullet”隐式转换为“WindowsGame24.Enemy”

> ID：13101855
> 
> 赞同：0
> 
> 时间：2012-10-27T16:11:00.883
> 
> 标签：c#, xna

我在 Map 类的 Draw 方法中收到此错误消息。怎么了？我想画出我在 Enemy 类中创建的子弹。无法将类型“WindowsGame24.Bullet”隐式转换为“WindowsGame24.Enemy”

```
public class Map
{
    Texture2D myEnemy, myBullet ;
    Player Player;
    List<Enemy> enemieslist = new List<Enemy>();
    List<Bullet> bulletslist = new List<Bullet>();     

    float fNextEnemy = 0.0f;
    float fEnemyFreq = 3.0f;
    int fMaxEnemy = 3 ;

    Vector2 Startposition = new Vector2(200, 200);

    GraphicsDeviceManager graphicsDevice; 

    public Map(GraphicsDeviceManager device) 
    { 
        graphicsDevice = device;
    } 

    public void Load(ContentManager content)
    {
    myEnemy = content.Load<Texture2D>("enemy");
    myBullet = content.Load<Texture2D>("bullet");
    Player = new Player(graphicsDevice);
    Player.Load(content);
    }

    public void Update(GameTime gameTime)
    {
        Player.Update(gameTime);
        float delta = (float)gameTime.ElapsedGameTime.TotalSeconds;

         for(int i = enemieslist.Count - 1; i >= 0; i--) 
        {
        // Update Enemy
        Enemy enemy = enemieslist[i];
        enemy.Update(gameTime, this.graphicsDevice, Player.playershape.Position, delta);
        // Try to remove an enemy
        if (enemy.Remove == true)
        {
            enemieslist.Remove(enemy);
            enemy.Remove = false;
        }
        }

        this.fNextEnemy += delta;
        //New enemy
        if (fMaxEnemy > 0)
        {
        if ((this.fNextEnemy >= fEnemyFreq) && (enemieslist.Count < 3))
        {
            Vector2 enemyDirection = Vector2.Normalize(Player.playershape.Position - Startposition) * 100f;
            enemieslist.Add(new Enemy(Startposition, enemyDirection, Player.playershape.Position));
            fMaxEnemy -= 1;
            fNextEnemy -= fEnemyFreq;
        }
        }

  }

    public void Draw(SpriteBatch batch)
    {
    Player.Draw(batch);
    for (int i = enemieslist.Count - 1; i >= 0; i--) 
        {
            Enemy enemy = enemieslist[i];
            enemy.Draw(batch, myEnemy);
        }
     Enemy bullets;
     for (int i = bullets.bulletslist.Count - 1; i >= 0; i--)
        {
            Enemy bullet = bullets.bulletslist[i];
            bullet.Draw(batch, myBullet);
        } 
    }         
}

public class Enemy
{
    public List<Bullet> bulletslist = new List<Bullet>();

    private float nextShot = 0;
    private float shotFrequency = 2.0f;  
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;
    public bool Shot;

    public Enemy(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
        this.Remove = false;
        this.Shot = false;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, Vector2 PlayerPos, float delta)
    {           
        nextShot += delta;

        for (int i = bulletslist.Count - 1; i >= 0; i--)
        {
            // Update Bullet
            Bullet bullets = bulletslist[i];
            bullets.Update(gameTime, graphics, delta);

            // Try to remove a bullet... Collision, hit, or outside screen.
            if (bullets.Remove == true)
            {
                bulletslist.Remove(bullets);
                bullets.Remove = false;
            }
        }

        if (nextShot >= shotFrequency)
        {
            this.Shot = true;
            nextShot -= shotFrequency;
        }

        // Does the enemy shot?
        if ((Shot == true) && (bulletslist.Count < 1))
        // New bullet
        {
            Vector2 bulletDirection = Vector2.Normalize(PlayerPos - this.vPos) * 200f;
            bulletslist.Add(new Bullet(this.vPos, bulletDirection, PlayerPos));
            Shot = false;
        }

        if (!Remove)
        {
            this.vMove = Vector2.Normalize(PlayerPos - this.vPos) * 100f;
            this.vPos += this.vMove * delta;

            if (this.vPos.X > graphics.PreferredBackBufferWidth + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.X < -20)
            {
                this.Remove = true;
            }

            if (this.vPos.Y > graphics.PreferredBackBufferHeight + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.Y < -20)
            {
                this.Remove = true;
            }
        }
    }

    public void Draw(SpriteBatch batch, Texture2D myTexture)
    {
        if (!Remove)
        {
            batch.Draw(myTexture, this.vPos, Color.White);
        }           
    }
}

public class Bullet
{
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;

    public Bullet(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.Remove = false;
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, float delta)
    {
            if (!Remove)
            {
                this.vPos += this.vMove * delta;                  

                if (this.vPos.X > graphics.PreferredBackBufferWidth +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.X < -20)
                {
                    this.Remove = true;
                }

                if (this.vPos.Y > graphics.PreferredBackBufferHeight +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.Y < -20)
                {
                    this.Remove = true;
                }
            }         
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:12:49.357

```
Enemy bullet = bullets.bulletslist[i]; 
```

你的子弹现在是敌人？

您正在将 Bullet 对象分配给 Enemy 变量。

不应该是：

```
Bullet bullet = bullets.bulletslist[i]; 
```

编辑：哦，看在基督的份上！现在，为什么你把子弹放在敌人类，我只是不知道。

```
for (int i = enemieslist.Count - 1; i >= 0; i--) 
{
    Enemy enemy = enemieslist[i];
    enemy.Draw(batch, myEnemy);

    for (int i = enemy.bulletslist.Count - 1; i >= 0; i--)
    {
        Enemy bullet = enemy.bulletslist[i];
        bullet.Draw(batch, myBullet);
    } 
} 
```

# c - 为什么我不能溢出全局变量？

> ID：13101856
> 
> 赞同：1
> 
> 时间：2012-10-27T16:11:06.330
> 
> 标签：c

我在下面有这段代码：

```
char buffer[10];      

void main(int argc, char *argv[]) {

   strcpy(buffer, argv[1]);
   printf("value of buffer %s\n",buffer);
} 
```

我知道将缓冲区变量放在主函数中可能会使堆栈溢出，但是通过将其声明为全局变量，无论我从命令行输入多少 ascii 字符，都不会发生任何事情。我期待一个分段错误，但它似乎打印了我输入的所有字符。怎么会？

我还有一个与该主题相关的问题，如果程序存在缓冲区溢出漏洞，例如堆栈溢出，我是否可以在易受攻击的变量中输入我想要的代码，或者如果代码超过了 SO 会抛出分段默认异常为用户程序分配的内存边界？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T16:12:02.367

此代码会导致未定义的行为，*即*您不能期望出现分段错误。任何事情都有可能发生。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-27T16:14:34.863

尝试以下 mod 以查看一些副作用：

```
char buffer[10];      
char buffer1[10] = "123456789";      

void main(int argc, char *argv[]) {

   strcpy(buffer, argv[1]);
   printf("value of buffer %s\n",buffer);
   printf("value of buffer1 %s\n",buffer1);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-27T16:16:36.873

你溢出了你的全局变量，只是因为它没有（显然）坏事发生。尝试将您的代码更改为如下所示：

```
char before[20];
char buffer[10];
char after[20]; 
```

根据您的工具链如何布置内存，您应该能够看到`buffer`在`before`或中溢出的后果`after`。

您没有获得 SEGV 的具体原因是，只有当您尝试存储的位置位于操作系统分配给您的进程的区域之外时，才会发生这种情况。此分配是在 4k 单元（通常）上完成的，通常是其中几个单元，因此您可能必须溢出`global`至少 4kB，并且可能需要溢出 1MB 或更多才能触发 SEGV。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T16:17:46.547

全局变量不存储在堆栈中。它们存储在 .data/.bss 中，并向更高的地址空间增长。堆栈变量向较低的地址空间增长。程序指令（在 .text 中）比 .data 低，所以溢出全局不会覆盖它们所以你不会看到任何明显的事情发生（比如 seg 错误）。

反正在linux上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-27T16:18:58.237

正如其他答案所解释的那样，语言规范使您无权期望对缓冲区溢出有任何*特定*反应（无论是在全局变量中还是在本地变量中）。

在实践中发生的情况是，一些未被保留用于使用的内存`buffer`确实被覆盖了。但是，由于您的程序在您的 之后立即退出`printf`，因此很可能使用该内存的任何东西都没有机会注意到应该存在的值不再存在。链接器也有可能在 之后分配了一堆*未使用*的空间`buffer`，例如，如果它将可写数据段的大小四舍五入为 4096 的倍数或其他一些方便的块大小。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T16:23:09.077

尝试使用更大的输入缓冲区，例如：

```
 ./tst $(perl -e "print 'A'x10000") 
```

你可能最终会遇到段错误。

正如一些人在他们的答案中提到的那样，过去的对象是未定义的行为，任何事情都可能发生。

此外，虽然 C 不谈论堆栈或堆，但文件范围变量（如`buffer`在您的程序中）通常不存储在堆栈中。

当缓冲区在堆栈中时，您会很快（即，不需要非常大的输入）缓冲区用一些随机地址覆盖函数的返回地址，这就是函数返回时出现段错误的原因。

# java - Java 类路径库（jar）

> ID：13101857
> 
> 赞同：2
> 
> 时间：2012-10-27T16:11:16.593
> 
> 标签：java, jar, classpath

我不知道如何用另一个库编译和运行 Java 程序。我读了很多关于这个的帖子，但没有一个有帮助。他们中的大多数人只是在谈论它和其他东西，而不是提供一个像样的例子。虽然在过去一周尝试，但我无法让它工作。

想象一下，我有以下结构（~ 是主目录）：

*   ~/Graph.java
*   ~/jmathplot.jar

Graph.java 开头：

```
import org.math.plot.Plot2DPanel;

public class Graph { ... } 
```

它（org.math.plot）对应于.jar 结构。所以从我读到的（如果我从〜目录运行它）：

```
javac -classpath ./jmathplot.jar Graph.java 
```

这应该有效。但事实并非如此。它只是从 jmathplot.jar 生成一堆 .class 文件，当尝试运行它时，我得到 NoClassDefFoundError。如果我从 jmathplot.jar 中提取“org”文件夹并将其放在 Graph.java 旁边，它可以完美地工作（这是预期的）；你甚至不需要指定类路径。

我认为类路径可以指导 JVM 在哪里查找文件。指定 jmathplot.jar 指示 JVM 在 jmathplot.jar 中查找 /org/math/plot 结构。

我哪里错了？有人可以为我提供编译和运行此 Graph.java 的正确方法吗？我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:20:53.670

将所有`.class`文件编译成`/path/to/some/dir`后，您可以使用以下命令运行它：

```
java -cp "~/jmathplot.jar;/path/to/some/dir/*" com.package.YourMainClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:19:55.570

尝试使用正斜杠并且不使用点。像这样： `javac -cp \jmathplot.jar Graph.java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:17:35.967

您为什么不使用可以为您完成工作的 IDE（Eclipse、Netbeans...）？

# java - 为什么 google 地方 api 给出对等证书错误

> ID：13101868
> 
> 赞同：1
> 
> 时间：2012-10-27T16:12:54.193
> 
> 标签：java, android, http, connection, peer

使用以下 http 请求代码使用 google places api 获取对等证书错误：->（我认为在使用 google places api http 请求时不需要添加 SSLSocketFactory 等）谁能告诉我如何解决这个问题？

```
 public JSONObject showPorts() 
         throws ClientProtocolException, IOException, JSONException{

            // StringBuilder portURL = new StringBuilder(pURL);        
            // HttpGet get = new HttpGet(url);
     StringBuilder portURL = new StringBuilder(pURL);        
        HttpGet get = new HttpGet(portURL.toString());
             Log.d(TAG,pURL);                        

             HttpResponse r = client.execute(get);
             int status = r.getStatusLine().getStatusCode();

             if(status == 200){
                 Log.d(TAG,"200");                       

             HttpEntity e = r.getEntity();
             String data = EntityUtils.toString(e); 
```

# java - Google Drive SDK 验证错误

> ID：13101870
> 
> 赞同：0
> 
> 时间：2012-10-27T16:13:06.220
> 
> 标签：java, android, google-drive-api, google-play-services

我正在尝试实现 Stephen Wylie 的 Google Drive 示例（[此处](https://plus.google.com/u/0/114042449736049687152/posts/CD3L8zcJg5Z)）。这是我的代码：

```
package com.googledrive.googledriveapp;
// For Google Drive / Play Services
// Version 1.1 - Added new comments & removed dead code
// Stephen Wylie - 10/20/2012
import java.io.IOException;
import java.util.ArrayList;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

import com.google.android.gms.auth.GoogleAuthException;
import com.google.android.gms.auth.GoogleAuthUtil;
import com.google.android.gms.auth.UserRecoverableAuthException;
import com.google.android.gms.common.AccountPicker;
import com.google.api.client.auth.oauth2.BearerToken;
import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.android2.AndroidHttp;
import com.google.api.client.googleapis.extensions.android2.auth.GoogleAccountManager;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.json.JsonHttpRequest;
import com.google.api.client.http.json.JsonHttpRequestInitializer;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Apps.List;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.DriveRequest;
import com.google.api.services.drive.DriveScopes;
import com.google.api.services.drive.model.File;
import com.google.api.services.drive.model.FileList;

public class MainActivity extends Activity {
    private static final int CHOOSE_ACCOUNT=0;
    private static String accountName;
    private static int REQUEST_TOKEN=0;
    private Button btn_drive;
    private Context ctx = this;
    private Activity a = this;

    public void onCreate(Bundle savedInstanceState) {

        /*
         * Etc... (Other application logic belonging in onCreate)
         */
            btn_drive.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                chooseAccount();
            }
            });
    }

    public void chooseAccount() {
        Intent intent = AccountPicker.newChooseAccountIntent(null, null, new String[]{"com.google"}, false, null, null, null, null);
        startActivityForResult(intent, CHOOSE_ACCOUNT);
    }

    // Fetch the access token asynchronously.
    void getAndUseAuthTokenInAsyncTask(Account account) {
        AsyncTask<Account, String, String> task = new AsyncTask<Account, String, String>() {
            ProgressDialog progressDlg;
            AsyncTask<Account, String, String> me = this;

            @Override
            protected void onPreExecute() {
                progressDlg = new ProgressDialog(ctx, ProgressDialog.STYLE_SPINNER);
                progressDlg.setMax(100);
                progressDlg.setTitle("Validating...");
                progressDlg.setMessage("Verifying the login data you entered...\n\nThis action will time out after 10 seconds.");
                progressDlg.setCancelable(false);
                progressDlg.setIndeterminate(false);
                progressDlg.setOnCancelListener(new android.content.DialogInterface.OnCancelListener() {
                    public void onCancel(DialogInterface d) {
                        progressDlg.dismiss();
                        me.cancel(true);
                    }
                });
                progressDlg.show();
            }

            @Override
            protected String doInBackground(Account... params) {
                return getAccessToken(params[0]);
            }

            @Override
            protected void onPostExecute(String s) {
                if (s == null) {
                    // Wait for the extra intent
                } else {
                    accountName = s;
                    getDriveFiles();
                }
                progressDlg.dismiss();
            }
        };
        task.execute(account);
    }

    /**
     * Fetches the token from a particular Google account chosen by the user.  DO NOT RUN THIS DIRECTLY.  It must be run asynchronously inside an AsyncTask.
     * @param activity
     * @param account
     * @return
     */
    private String getAccessToken(Account account) {
        try {
            return GoogleAuthUtil.getToken(ctx, account.name, "oauth2:" + DriveScopes.DRIVE_READONLY);  // IMPORTANT: DriveScopes must be changed depending on what level of access you want
        } catch (UserRecoverableAuthException e) {
            // Start the Approval Screen intent, if not run from an Activity, add the Intent.FLAG_ACTIVITY_NEW_TASK flag.
            a.startActivityForResult(e.getIntent(), REQUEST_TOKEN);
            e.printStackTrace();
            return null;
        } catch (GoogleAuthException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    private Drive getDriveService() {
        HttpTransport ht = AndroidHttp.newCompatibleTransport();             // Makes a transport compatible with both Android 2.2- and 2.3+
        JacksonFactory jf = new JacksonFactory();                            // You need a JSON parser to help you out with the API response
        Credential credential = new Credential(BearerToken.authorizationHeaderAccessMethod()).setAccessToken(accountName);
        HttpRequestFactory rf = ht.createRequestFactory(credential);
        Drive.Builder b = new Drive.Builder(ht, jf, null);
        b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {

            @Override
            public void initialize(JsonHttpRequest request) throws IOException {
                DriveRequest driveRequest = (DriveRequest) request;
                driveRequest.setPrettyPrint(true);
                driveRequest.setOauthToken(accountName);
            }
        });
        return b.build();
    }

    /**
     * Obtains a list of all files on the signed-in user's Google Drive account.
     */
    private void getDriveFiles() {
        Drive service = getDriveService();
        Log.d("SiteTrack", "FUNCTION getDriveFiles()");
        Files.List request;
        try {
            request = service.files().list(); // .setQ("mimeType=\"text/plain\"");
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
        do {
            FileList files;
            try {
                Log.d("SiteTrack", request.toString());
                files = request.execute();
            } catch (IOException e) {
                e.printStackTrace();
                Log.d("SiteTrack", "Exception");
                return;
            }
            ArrayList<File> fileList = (ArrayList<File>) files.getItems();
            Log.d("SiteTrack", "Files found: " + files.getItems().size());
            for (File f : fileList) {
                String fileId = f.getId();
                String title = f.getTitle();
                Log.d("SiteTrack", "File " + fileId + ": " + title);
            }
            request.setPageToken(files.getNextPageToken());
        } while (request.getPageToken() != null && request.getPageToken().length() >= 0);
    }

    protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
        if (requestCode == CHOOSE_ACCOUNT && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            GoogleAccountManager gam = new GoogleAccountManager(this);
            getAndUseAuthTokenInAsyncTask(gam.getAccountByName(accountName));
            Log.d("SiteTrack", "CHOOSE_ACCOUNT");
        } else if (requestCode == REQUEST_TOKEN && resultCode == RESULT_OK) {
            accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            Log.d("SiteTrack", "REQUEST_TOKEN");
        }
    }   
} 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.googledrive.googledriveapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="android.app.ActivityGroup" />
        </activity>
    </application>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
</manifest> 
```

这是我收到的 LogCat 错误。它发生在应用程序首次启动时：

```
10-27 12:01:43.872: E/AndroidRuntime(1117): FATAL EXCEPTION: main
10-27 12:01:43.872: E/AndroidRuntime(1117): java.lang.VerifyError: com/googledrive/googledriveapp/MainActivity
10-27 12:01:43.872: E/AndroidRuntime(1117):     at java.lang.Class.newInstanceImpl(Native Method)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at java.lang.Class.newInstance(Class.java:1319)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.os.Looper.loop(Looper.java:137)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at java.lang.reflect.Method.invokeNative(Native Method)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at java.lang.reflect.Method.invoke(Method.java:511)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-27 12:01:43.872: E/AndroidRuntime(1117):     at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:53:57.557

*（所以作为本教程的附录，让我在 Eclipse 中添加，您需要转到 Android SDK Manager 并下载 Google Play Services。然后找到 google-play-services.jar 文件并将其添加为“外部 JAR " 进入你的 Eclipse 项目。我与 OP 离线交谈，他已经这样做了，但我忘了提及。）*

代码不会自行运行；预计您会将其添加到现有应用程序中，并且只需将 btn_drive 添加到您的 UI 中的某个位置，以允许用户连接到 Google Drive。幸运的是，围绕此代码构建 Android 应用程序相当容易，即使创建一个新项目然后添加它可能会更容易。希望这涵盖了您需要添加的所有内容。

首先，在 onCreate 中，将“其他应用程序逻辑”部分替换为：

```
 super.onCreate(savedInstanceState);
    // set up the GUI layout
    setContentView(R.layout.main);
    // set the variables to access the GUI controls
    btn_drive = (Button) findViewById(R.id.btn_drive); 
```

然后，您需要一个非常基本的 XML 布局。在 res/layout 中创建一个名为 main.xml 的新文件（或在上面的 setContentView 中调用 R.layout 的任何内容）：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_drive"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Connect to Google Drive" />
</LinearLayout> 
```

最后，您可能需要在 Manifest 中获得以下权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

祝你好运！

# apache2 - mod_vhost_alias + 通配符 + 自定义 php.ini

> ID：13101877
> 
> 赞同：2
> 
> 时间：2012-10-27T16:14:04.737
> 
> 标签：apache2, wildcard, php, mod-vhost-alias

这是我使用 mod_vhost_alias 的 httpd.conf。docroot 始终位于 /home/username/domains/domainname/public_html 中。

```
<VirtualHost *:80>
        ServerName *.abc.com
    ServerAlias *.abc.com
    ServerAdmin webmaster@abc.com
        VirtualDocumentRoot  /home/%-3/domains/%0/public_html
        UseCanonicalName OFF

  <Directory /home/*>
        AllowOverride AuthConfig FileInfo Indexes Limit Options=Indexes
        Options -Includes -Indexes +ExecCGI +SymLinksIfOwnerMatch +FollowSymLinks
  </Directory>
</VirtualHost> 
```

这可行，但问题在于日志和自定义 php.ini。就我现在而言，我不能那样做：

```
CustomLog /var/log/httpd/domains/*.abc.com.bytes bytes
OR
FcgidWrapper '/usr/local/php/php5/bin/php-cgi -c /usr/local/php/php5/etc/users/%-3.ini' .php 
```

知道如何获得日志和 php.inis 的正确路径吗？我查看了 mod_macro，但它仍然需要“使用 xxxx abc.com”声明和 apache 重新加载，这不是一个选项。

# expressionengine - 在 ExpressinEngine 中使用类别的最佳实践是什么？

> ID：13101878
> 
> 赞同：8
> 
> 时间：2012-10-27T16:14:05.893
> 
> 标签：expressionengine

我正在使用“商店模块”开发我的第一个电子商务网站。我们有大约 25 个类别，每个产品都可以按照这些类别进行分类。这是我第一次处理这么多类别。

大多数产品选择区域将使用一个模板。关于类别的使用，我有几个问题。我将在下面列出它们。任何对最佳方法的见解将不胜感激。我什至不确定我是否正确执行此操作。我有点摸不着头脑。哈哈。

## 问题 1

当我为每个父类别（即中央真空吸尘器、便携式真空吸尘器等）创建链接时，我应该使用 URL 来调用类别以显示该类别中的产品还是有创建链接的动态方式?

## 问题2

如果您选择了父类别（即 Central Vac、Portable vacs 等），我希望该组的所有子类别都显示在侧面菜单中（即电源、颜色等）。实现这一点的最佳方法是使用 URL 段显示子类别吗？

我真的想确保如果用户正在显示“便携式真空吸尘器”，那么所有侧面菜单导航都仅与该类别相关（即显示此父项的子类别）

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T21:02:05.023

> **问题 1.**当我为每个父类别（即中央真空吸尘器、便携式真空吸尘器等）创建链接时，我应该使用 URL 来调用类别以显示该类别中的产品还是有动态的方式创建链接？

是的，并且有多种方法可以动态构建类别的链接列表。一种方法是原生[频道类别标签](http://expressionengine.com/user_guide/modules/channel/categories.html)

Channel Categories 标签对中可用的`{category_url_title}`和`{category_id}` [变量](http://expressionengine.com/user_guide/modules/channel/categories.html#variables)在构建链接的 URL 时也很有用。

或者，[GWcode Categories](http://devot-ee.com/add-ons/gwcode-categories)是一个用于处理类别的便捷插件，并且有很多有用的选项。

> **问题 2.**如果您选择了父类别（即 Central Vac、Portable vacs 等），我希望该组的所有子类别都显示在侧面菜单中（即电源、颜色等）。实现这一点的最佳方法是使用 URL 段显示子类别吗？

是的。我建议在 GWcode 类别中使用包含`category_id`or`category_url_title`作为参数的段来获取子列表。GWcode Categories 有很好的[文档](http://gwcode.com/add-ons/gwcode-categories/documentation)。一个基本的例子：

```
{exp:gwcode_categories cat_url_title="{segment_3}"}
    {cat_name}      
{/exp:gwcode_categories} 
```

另一个非常有用的类别处理插件是[Low Seg2Cat](http://devot-ee.com/add-ons/low-seg2cat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:25:18.437

您可以使用[子类别插件](http://devot-ee.com/add-ons/child-categories)输出父类别、子类别和发布到子类别的条目。

# java - JPA OneToMany：列表与集合

> ID：13101882
> 
> 赞同：28
> 
> 时间：2012-10-27T16:15:04.503
> 
> 标签：java, hibernate, jpa

我有两个实体：`UserAccount`和`Notification`. 它们具有如下所示的关系。

```
 public class UserAccount {

    @Id
    @Column(name = "USER_NAME")
    private String emailId;

    @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @JoinTable(name = "USERS_NOTIFICATIONS", joinColumns = { @JoinColumn(name = "USER_NAME") }, inverseJoinColumns = { @JoinColumn(name = "NOTIFICATION_ID") })
    private List<Notification> notifications;

    //setters, getter, equals and hashcode
 } 
```

两者`equals()`和`hashcode()`都被覆盖（由带有业务键/主键的 IDE 生成）。

给定 a `UserAccount`，当我添加第一个 时`Notification`，它会产生一个 INSERT 语句。但是在进一步添加相同的`UserAccount`内容时，它首先删除然后插入：

```
Hibernate: delete from USERS_NOTIFICATIONS where USER_NAME=?
Hibernate: insert into USERS_NOTIFICATIONS (USER_NAME, NOTIFICATION_ID) values (?, ?)
Hibernate: insert into USERS_NOTIFICATIONS (USER_NAME, NOTIFICATION_ID) values (?, ?)
Hibernate: insert into USERS_NOTIFICATIONS (USER_NAME, NOTIFICATION_ID) values (?, ?)
//as many inserts as the notifications the user has 
```

每个`UserAccount`. 如果我将 替换为`List`，`Set`则会发生正常的 INSERT。在阅读了这个[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-collections-mostefficientupdate)和[博客](http://assarconsulting.blogspot.in/2009/08/why-hibernate-does-delete-all-then-re.html)后，我找到了原因。

**来自文档的观察**

*   在单向`@OneToMany`关联中，`Set`是首选。

> 应该清楚的是，索引`Collections`并`Sets`允许在添加、删除和更新元素方面进行最有效的操作。

*   在双向`@OneToMany`关系（`@ManyToOne`管理）中，`List`并且`Bags`是高效的。

> `Bags`和`Lists`是最有效的逆`Collections`。

* * *

话虽如此，哪个更可取：

1.  单向映射中的a`Set`过a ？`List``@OneToMany`

2.  或者，我是否必须通过添加双向关系来使用 a 来调整我的域模型`List`，尤其是当有重复项时？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-04-10T13:26:20.373

不久前我遇到了这个问题...

我找到了这篇文章：Hibernate 中一对多关联的性能反模式[https://fedcsis.org/proceedings/2013/pliks/322.pdf](https://fedcsis.org/proceedings/2013/pliks/322.pdf)

简而言之：

*   包语义 -> `List`/ `Collection`+ `@OneToMany`-> 添加一个元素：1 个删除，N 个插入，删除一个元素：1 个删除，N 个插入
*   列表语义 -> `List`+ `@OneToMany`+ `@IndexColumn`/ `@OrderColumn`-> 添加一个元素：1 个插入，M 个更新，一个元素删除：1 个删除，M 个更新
*   设置语义 -> `Set`+ `@OneToMany`-> 添加一个元素：1 个插入，删除一个元素：1 个删除

对我来说：是的，这意味着您必须将您的更改`List`为`Set`单向`@OneToMany`。所以我改变了我的模型以符合 Hibernate 的期望，这导致了很多问题，因为应用程序的视图部分`List`主要依赖于......

一方面，这`Set`对我来说是一个合乎逻辑的选择，因为没有重复，另一方面`List`更容易处理。

所以 JPA/Hibernate 迫使我更改模型对象，这不是第一次，当您使用时`@EmbededId`，您可能会在没有 JPA/Hibernate 的情况下以同样的方式做一些事情。当您必须`HibernateProxy`在所有应用程序中特别是在 equals 方法中注意时`else if(object instanceof HibernateProxy) {`……，您会注意到 JPA/Hibernate 持久层在其他层中有点侵入。

但是当我直接使用 JDBC 时，我也使用更改模型或业务方法来促进持久性......层隔离可能是一个梦想或成本太高而无法 100% 完成？

`Set`如果它们与注释`SortedSet`一样，您可以订购`TreeSet``@OrderBy`

当某些代码依赖`List`且无法更改（例如 JSF/PrimeFaces`<dataTable>`或`<repeat>`组件）时会带来问题，因此您必须更改`Set`并`List`返回，`Set`但如果这样做`setNotifications(new HashSet<>(notificationList))`，您将有额外的查询，因为该集合是`org.hibernate.collection.PersistentSet`由 Hibernate 管理的...所以我使用`addAll()`and`removeAll()`而不是二传手：

```
protected <E> void updateCollection(@NonNull Collection<E> oldCollection, @NonNull Collection<E> newCollection) {
    Collection<E> toAdd = new ArrayList<>(newCollection) ;
    toAdd.removeAll(oldCollection) ;

    Collection<E> toRemove = new ArrayList<>(oldCollection) ;
    toRemove.removeAll(newCollection) ;

    oldCollection.removeAll(toRemove) ;
    oldCollection.addAll(toAdd) ;
} 
```

注意你的方法`equals()`和`hashCode()`方法`@Entity`...

另一个问题是，如果你想使用 JPA 和 Hibernate 作为实现，你需要同时掌握 JPA 和 Hibernate，因为 Set/List/Bag 语义来自 Hibernate 而不是来自 JPA（如果我错了，请纠正我）

制定了一个规范来抽象实现，使其不依赖于一个特定的供应商。尽管大多数 JavaEE 规范都成功了，但 JPA 对我来说失败了，我放弃了独立于 Hibernate

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:25:38.573

列表：允许其中有重复的元素。

Set：所有元素都应该是唯一的。

现在，可能会发生删除，因为您正在覆盖列表中的元素，因此当您修改 UserAccount 类型的持久实体时，它正在删除之前列表中的实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-09T07:37:41.333

当我不需要订购时，我使用 Set。这也启用了设置操作。另一方面，如果需要订购，我会使用列表。

在我看来，容器的语义是决定使用哪一个的相关方面。

# c# - ASP.Net Inproc 会话在 VS2012 中的标记更改后重新启动

> ID：13101888
> 
> 赞同：16
> 
> 时间：2012-10-27T16:16:01.813
> 
> 标签：c#, asp.net, windows-8, iis-7.5, visual-studio-2012

我将我的开发机器升级到了 Windows 8 和 Visual Studio 2012。

我正在本地 IIS 上测试我的 ASP.Net 应用程序（也升级到 .net 4.5）。

令我烦恼的一件事是，在我的上一个配置（Windows 7、VS 2010、.net 4.0）中并非如此，即在标记文件更改后正在重新启动 InProc 会话。

示例：我登录到我的本地 ASP.net 应用程序，在 *.ascx 文件中进行更改并保存，刷新我的网络浏览器，会话就消失了。

如何关闭会话重启问题？

**编辑**：我尝试使用新的 VS 2012 Web 应用程序项目模板重现该问题，删除了不必要的内容并且无法重现此问题。

但是，在我的实际项目中，问题仍然存在：更改 aspx 或 ascx 文件会导致 Application_Start 事件被触发。

我还将真实项目中的 web.config 剥离到最低限度，使其看起来像新项目中的那样，但这也不允许我删除错误。我在 web.config 中注释掉的东西是 DevExpress Controls、自定义健康监控、IIS UrlRewrite 2

Applicationpool as Integrated，v4.0 与 NetworkService 作为身份

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T10:04:39.730

我不打算为此而努力，但答案隐藏在@ [Anand](https://stackoverflow.com/users/1615515/anand)对原始问题的第 11 条评论中：

在 web.config 中添加这个键：

```
<appSettings><add key="PageInspector:ServerCodeMappingSupport" value="Disabled" /></appSettings> 
```

问题就消失了。VS 也变得更加敏感。唯一的缺点是您失去了 Page Inspector 的服务器端技巧。

希望MS能尽快提供修复..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T10:17:07.320

这里的问题是您的应用程序正在进行动态编译，这意味着对标记文件的任何更改都会导致应用程序重新启动。如您所知，任何应用程序重新启动都会转储 InProc 会话。

本地模板上的“Web 应用程序”设置不同，因此它不会重新启动整个应用程序。不过，进行预编译有一些好处。

有几种方法可以解决这个问题。

**为什么会这样**

默认情况下，ASP.NET 4.5 允许您同时运行“网页”和“Web 应用程序”。这可能是导致对 aspx 进行更改以触发预编译的原因（每次发生更改时“网页”都必须这样做）。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/dd547590.aspx](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

新版本中也有不少改变来优化网络服务器。您可以在此处查看这些更改的详细信息，它们还可以在您升级时解释更改。 [http://www.asp.net/vnext/overview/aspnet/whats-new](http://www.asp.net/vnext/overview/aspnet/whats-new)

无论如何，解决方案仍然相同，并且不建议即时更新单个 aspx 文件。如果这是不可避免的，那么在任何设置中最终都会发生重新启动，因此无论如何都值得使用以下解决方案之一。

**解决方案**

**编译模式**

检查 web.config 中的 CompilationMode。有关更多信息，请查看这篇文章 [http://www.campusmvp.net/compilationmode-avoiding-aspx-page-compilation-to-improve-scalability-in-sites-with-thousands-of-pages/](http://www.campusmvp.net/compilationmode-avoiding-aspx-page-compilation-to-improve-scalability-in-sites-with-thousands-of-pages/)

这也可以在服务器级别设置，因此您可以根据环境获得差异。

**会话状态模式**

您可以在 StateServer 模式下或使用 Sql server 运行会话状态。如果安装了 .net，则 ASP.NET 状态服务器将位于您的服务器上，只需将其设置为自动启动。然后，您可以在配置中切换它。

```
<sessionState mode="StateServer" useHostingIdentity="true" cookieless="false" timeout="120" stateConnectionString="tcpip=127.0.0.1:42424" /> 
```

我们总是使用 ASP.NET 状态服务器进行开发，并且在许多情况下用于生产。我发现在测试较长的用户路径（例如具有许多表单的表单向导）时，每次重建时都会破坏会话非常烦人。这也意味着您不会在应用重新启动时丢失会话。

您也可以以同样的方式使用 SQL Server。

注意：您必须记住，如果将类序列化为会话状态并进行更改，则需要手动重新启动状态服务器，否则会出现序列化错误。这是非常罕见的，但只是在生产环境中要注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:06:43.053

使用进程内模式时，您的会话数据托管在服务器内存中。您应该在 IIS 上验证应用程序池回收时间。

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T14:34:07.893

你可以试试 SQL server 会话状态模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-02T12:11:02.387

一个可能相关的问题：IIS（以及 ASP.NET 开发服务器）在您从 TFS**签出文件后重新启动应用程序。**

我在这里找到了解决方案：[http ://forums.iis.net/p/1200785/2055480.aspx/1?IIS+Express+restarts+site+when+a+file+is+checked+out](http://forums.iis.net/p/1200785/2055480.aspx/1?IIS+Express+restarts+site+when+a+file+is+checked+out)

1.  导航到：*%USERPROFILE%\AppData\Roaming\Microsoft\VisualStudio\11.0*
2.  删除 app_offline.htm 文件。
3.  创建一个名为 app_offline.htm 的文件夹

# android - Android 中的 setRotationY() 宽度 API10

> ID：13101889
> 
> 赞同：6
> 
> 时间：2012-10-27T16:16:02.943
> 
> 标签：android, animation, rotation

我正在寻找一种方法/算法来执行与 setRotationY() 等效（可从 Android API 11 获得），但使用 API 10。

感谢您的帮助。

**更新，答案：**

使用@JakeWharton 的 Android 库[http://nineoldandroids.com/](http://nineoldandroids.com/)（感谢 Chris.Jenkins）

```
if (android.os.Build.VERSION.SDK_INT > 10)
    this.mBehindView.setRotationY(180);
else
    ObjectAnimator.ofFloat(this.mBehindView, "rotationY", 0, 180).setDuration(0).start(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:54:31.970

我知道我们不是 LinkFactory，但@JakeWharton 花时间从 API11 移植 AnimationFramework。

结帐[Nineoldandroids](http://nineoldandroids.com/)。

例子：

```
ObjectAnimator.ofFloat(myView, "rotationX", 0, 90).setDuration(3000).start(); 
```

# gdb - Bomb Project 中的 GDB 断线

> ID：13101892
> 
> 赞同：0
> 
> 时间：2012-10-27T16:16:14.083
> 
> 标签：gdb, breakpoints, compiler-flags

我有一个 CS 项目，我需要散布炸弹（如果您听说过，那就是 Mr.Evil 炸弹），但是当我想为线条设置断点时，我遇到了 gdb 问题。在 gdb 中打开文件并尝试破坏 ata 随机行后，我遇到了这个问题：

```
 gdb bomb 
 (gdb) break 15
 No symbol table is loaded.  Use the "file" command. 
```

此外，即使我使用“文件”命令，我也会得到

```
 "/auto/bunter_usr/bomb": not in executable format: File format not recognized 
```

我意识到问题是因为我的教授在编译文件时没有使用 -g 标志。在我的情况下，有没有办法将断点设置为行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:09:46.747

> “/auto/bunter_usr/bomb”：不是可执行格式：文件格式无法识别
> 我意识到问题是因为我的教授没有使用 -g 标志

你的认识是不正确的。*没有*编译的可执行文件`-g`不会产生上述消息。

 *最有可能的是，您指向 GDB 的文件是一个 shell 脚本，它调用真正的可执行文件（可能在设置一些环境变量或添加一些命令行标志之后）。您想调试*真正的*可执行文件，而不是 shell 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:21:05.553

您需要反汇编二进制文件并检查内存位置并为这些位置设置断点。

这是你要怎么做的：gdb> b *0x80456789

这是供参考的备忘单 [http://csapp.cs.cmu.edu/public/docs/gdbnotes-ia32.pdf](http://csapp.cs.cmu.edu/public/docs/gdbnotes-ia32.pdf)*

# c++ - 从子类获取结构并在主类中使用

> ID：13101894
> 
> 赞同：1
> 
> 时间：2012-10-27T16:16:35.483
> 
> 标签：c++, inheritance, struct

这是我的代码的问题

我有一个父类`Shape`和一个子类`Square`

```
struct Point
{
    int x,y;
};

class Shape
{
private:
    string name;

public:
    void setName(string);
    string getName();
    virtual void setVerticlePoint() { };
    virtual Point getVerticlePoint();
}; 
```

下面是 Square.cpp

```
class Square: public Shape
{
private:
    Point verticlePoint[4];

public:
    int noOfVerticles() const { return 5; }
    void setVerticlePoint();
    Point getVerticlePoint();
};

void Square::setVerticlePoint()
{
    int xData,yData;

    for(int i=0; i<4; i++)
    {
        cout << "Please enter x-ordinate of pt." << i << " :";
        cin > xData;
        cout << "Please enter y-ordinate of pt." << i << " :";
        cin >> yData;
        verticlePoint[i]->x = xData;
        verticlePoint[i]->y = yData;
    }
} 
```

所以在 main.cpp ，我这样做了

```
int main()
{
    Shape *point[5];
    Point vertic`lePoint;
    Square *cro = new Square();

    // some codes in between

    // now i prompt for verticle point

    shape[0] = squr;

    //assuming myShape & myType is some string value
    shape[0]->setName(myShape);
    shape[0].setType(myType);

    //here i will be prompt to key in 4 times of X & y Ordinate of the verticle point
    shape[0]->setVerticlePoint();

    //Now the issue is i need to retrieve back my verticle point that i store in shape[0].

    //here no issue
    cout << "Get Name: " << shape[0]->getName() << endl;
    cout << "Get Data:"  << shape[0]->getType() << endl;
    //the top 2 works

    //this is the issue
    verticlePoint = shape[0]->getVerticlePoint();
    cout << sizeof(verticlePoint);
    //it output as size 8 , no matter which shape i use, i got other shapes with different verticle point.

    return 0;
} 
```

问题是：

我如何检索`verticlePoint[array]`（例如 for square is ，我如何将 Point 检索到`verticlePoint[4]`主类中的变量中，然后使用 for 循环调用for`x,y`到`shape[0]``verticlePoint[0]``verticlePoint[4]`

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:26:56.673

显然，您希望根据形状返回不同数量的点。为此，您可以例如`std::vector<Point>`用作返回类型...例如：

```
class Shape
{
private:
    string name;

public:
    void setName(string);
    string getName();
    virtual void setVerticlePoint() { };
    virtual std::vector<Point> getVerticlePoint();
}; 
```

然后在正方形中，例如，您将返回一个包含 4 个点的向量...

```
std::vector<Point> Square::getVerticlePoint()
{
    return std::vector<Point>(verticlePoint, verticlePoint+4);
} 
```

# java - JFrame重绘/重新加载

> ID：13101900
> 
> 赞同：4
> 
> 时间：2012-10-27T16:17:20.617
> 
> 标签：java, swing

我很难开始新的会话。当我使用菜单选项新游戏时，我得到了一个新实例——实际上，我只想用一个新实例替换当前实例。我尝试了很多不同的事情，但仍然无法解决它......

这是我的代码：

```
package tictactoe;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TicTacToe2 extends JFrame implements ActionListener {

char[][] game = new char[3][3];
JButton[][] buttons = new JButton[3][3]; 

JButton menuItem      = new JButton();   
JMenu     menu        = new JMenu  ("TicTacToe");
JMenuItem newgame     = new JMenuItem("Start New Game"), 
          exit        = new JMenuItem("Exit"); 

TicTacToe2()
{
    super("Tic Tac Toe");
    setSize(500, 600);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);
    setLayout( new BorderLayout());

    JPanel northPanel= new JPanel();
    northPanel.setLayout(new FlowLayout(FlowLayout.LEFT));  
    add("North", northPanel);

    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new GridLayout(3,3, 4, 4));
    add("Center", buttonPanel);
    Font font = new Font("Serif", Font.BOLD, 32);

    for (int row=0; row < game.length; row++)
    {
        for (int col =0; col < game[row].length; col++)
        {
            game[row][col] = ' ';
            JButton b = new JButton(" ");
            b.setFont(font);
            b.setBackground(Color.green);
            b.addActionListener(this);
            buttons[row][col] = b;
            buttonPanel.add(b);
        }
    } 

    menu.add(newgame);  
    menu.add(exit);
    newgame.addActionListener(this); 
    exit.addActionListener(this); 

    JMenuBar bar = new JMenuBar( ); 
    bar.add(menu);  
    setJMenuBar(bar); 

} 
public void actionPerformed(ActionEvent e) {
    Object  menusource = e.getSource();   
    if(menusource ==  newgame){ 
        new TicTacToe2();   
    }else if(menusource ==  exit){
        System.exit(0);
    }  
} 
public static void main(String[] args) {
    TicTacToe2 ttt = new TicTacToe2();

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:22:36.027

每次浏览“新游戏”菜单时，您都会通过以下方式创建一个新实例：

```
 new TicTacToe2(); 
```

如果您只想重置实例，请编写一个`reset()`将游戏状态设置为初始状态的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:27:38.337

而不是创建类的新实例

```
new TicTacToe2(); 
```

单击“新游戏”菜单项时，您可以清除按钮数组文本并准备新游戏：

```
for (int i=0; i < buttons.length; i++ ) {
   for (int j=0; j < buttons[0].length; j++ ) {
      buttons[i][j].setText(" ");
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T16:22:02.630

```
public void actionPerformed(ActionEvent e) {
    Object  menusource = e.getSource();   
    if(menusource ==  newgame){ 
        new TicTacToe2();   //What are you doing with this object? 
                            //Should really be resetGame();
    }else if(menusource ==  exit){
        System.exit(0);
    }  
} 
```

可能是个问题.. 我怀疑那是您获得新框架实例的地方。有一个方法可以将数组清除为默认值，重置分数，你应该很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T16:32:25.760

正如上面的答案已经提到你不必创建一个新的实例

```
new TicTacToe2() 
```

所以，我会从那里继续。您的 if 语句应该类似于

```
if (menusource == newgame) {
     getContentPane.removeAll();
     setContentPane(aFunc);
} 
```

创建一个看起来像下面的函数，它设置布局并向其中添加组件。将您的绘图逻辑放在那里并将其作为参数提供给 setContent 窗格。例如

```
 private JPanel aFunc() {
    custSelectPanel.setLayout(null);

    customerTable.setDragEnabled(false);
    customerTable.setFillsViewportHeight(true);

    ......

    cancelButton.setLocation(350, 0);
    cancelButton.setSize(100, 40);
    buttonPanel.add(cancelButton);

    return custSelectPanel;
} 
```

我希望你能理解这里的逻辑

# php - 用于提取特定 href 链接的 PHP 脚本

> ID：13101901
> 
> 赞同：-1
> 
> 时间：2012-10-27T16:17:23.660
> 
> 标签：php, regex, extract

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

我想制作一个 php 脚本，从网页（我的）中提取所有 href 链接，但仅在其字符串中使用“/view/”链接。

[http://www.example.com/roger/that](http://www.example.com/roger/that) => 未提取

[http://www.example.com/roger/view/that](http://www.example.com/roger/view/that) => 提取

如果可能，所有链接都将设置在一个数组中

所以基本上该脚本将在我的管理部分中，我将运行它以获取包含数组中特定字符串“/view/”的所有链接，以便稍后在另一个脚本中使用。

我已经完成了我的研究并找到了这个脚本，但无法修改它以仅包含特定链接（使用“/view/”）

我知道你们不是我的奴隶，所以即使你们有任何修改现有脚本的技巧，我也会很高兴！

我的脚本 [http://pastebin.com/gYf9DZ8i](http://pastebin.com/gYf9DZ8i)

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:20:09.397

**[使用file_get_contents](http://php.net/manual/en/function.file-get-contents.php)**获取页面内容。

```
$input = file_get_contents("http://www.yourpage.php"); 
```

然后做一个**[preg_match](http://php.net/manual/en/function.preg-match.php)**来提取你想要的链接集。

正则表达式： `/\<a href(.*?\/view\/.*?)<\/a>/`

```
$pattern = '/\<a href(.*?\/view\/.*?)<\/a>/';
preg_match_all($pattern, $input, $matches);
print_r($matches); 
```

（**[例](http://ideone.com/dOgGYh)**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:38:24.440

```
$var = file_get_contents("http://www.entendu.info");

preg_match_all ("/<a\s+[^>]*?\bhref\s*=\s*([\'\"])(?=[^\'\"]*\/view\/)(.*?)[\'\"]/", 
  $var, &$matches);    

$matches = $matches[2];

foreach($matches as $var)
{    
  print($var . "<br>\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:26:50.470

你只需要改变这个：

```
preg_match_all ("/a[\s]+[^>]*?href[\s]?=[\s\"\']+".
                "(.*?)[\"\']+.*?>"."([^<]+|.*?)?<\/a>/",
                $var, &$matches); 
```

进入这个

```
preg_match_all ("/<a.*href=\"([^\"]*\/view\/[^"]*)\"/", $var, &$matches); 
```

# java - 加载文本文件并删除重复项并计算登录次数

> ID：13101903
> 
> 赞同：0
> 
> 时间：2012-10-27T16:17:40.580
> 
> 标签：java, algorithm, parsing, arraylist, hashmap

我陷入了开始这个java作业的困境。任何帮助，将不胜感激。我有两个文本文件：

1) 用户日志 (2MB)

```
UserID  Activity        TimeStamp
asdf    login       1279246015000
asdf    login       1280264668000
aaa     login       1280265253000
aaa     purchase    1279121883000
abc     login   1279122061000 
```

2) 用户资料

```
UserID     Website
asdf       aaa.com
aaa        abc.com
abc        aaa.com 
```

我需要输出以下信息：

```
Number of logins     Total users aaa.com    abc.com
1                    xxx                    xxx
2
3
4
etc... 
```

预期的输出是这样的：“登录次数”是在日志文件中执行的登录计数，按活动分组。所以第一行应该显示从aaa.com网站，abc.com网站等只登录一次的用户总数，按网站划分。第二行表示来自aaa.com、abc.com等的已经登录过两次的用户总数；等等。

需要对用户日志和用户配置文件文本文件进行重复数据删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:30:36.193

您可能想使用 Hadoop（不过，这可能有点矫枉过正——但值得知道这一点）

特别是，[这个例子](http://wiki.apache.org/hadoop/WordCount)展示了如何计算大文件中的单词。您将需要调整减少阶段并在其中包含网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:54:28.230

对于一个 2Mb 的日志文件，一个读取文件的简单程序和计数元素将在几秒钟内运行（可能更少）。

* * *

使用应该使用 Maps（java 字典）：

*   UserProfiles 的映射：键 = 用户 ID，值 = 站点
*   一个按站点统计登录的Map，这个Map的key是站点，value = count。

每次读取一行日志时，您都会从 userprofiles 映射中获取用户 ID 的站点，并且您会在 countLogins 映射中增加该站点的站点的登录计数。

# javascript - 骨干路由器侦听器未命中哈希标记

> ID：13101905
> 
> 赞同：2
> 
> 时间：2012-10-27T16:17:53.613
> 
> 标签：javascript, backbone.js, router

我的问题是，当我在链接中使用哈希标记时，它只是将哈希附加到 url 而不是转到路由。例如`/ToDo/public/offline2.html#test`. 如果我离开它，`tag = ""`它确实会出于某种原因进入路由器。

我已经使用以下代码关闭了 jquery 移动路由器

```
<script type="text/javascript">     
  $(document).bind("mobileinit", function () {  
      $.mobile.ajaxEnabled = false;         
      $.mobile.linkBindingEnabled = false;  
      $.mobile.hashListeningEnabled = false;    
      $.mobile.pushStateEnabled = false;        
      $.mobile.changePage.defaults.changeHash = false;
  });

</script>

<script src="../js/jquery.mobile.js"></script>
<script src="../js/jquery.js"></script> 
```

我的 html 代码如何非常基础

```
<p>go to <a href="#test"  id="#test">test page</a></p> 
```

所以我有一个单独的 js 文件，其中包含文件 test.js 中的 javascript 代码。这是主要代码

```
$(app.init)

app.init = function() {
  console.log('start init')

  router = new TestRouter();    
  console.log('end init')
}

var TestRouter = Backbone.Router.extend({           
    routes:{       
        "":"home",  
        "test":"test" 
       },   

          initialize: function(){     var self = this
              _.bindAll(self)       },  
          home: function(){         
              alert(name);  
             // $.mobile.changePage($('#home-page'), {changeHash:false});   
              },        

              test: function (name) {   
                  alert(name);          
                //  $.mobile.changePage($('#test-page'), {changeHash:false});   
                  }     
              }) 
```

正如我所说的代码适用于家庭，当我这样设置标签时

```
<a href="" data-icon="home">Home</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:13:07.893

您需要在 Backbone 开始监视 hashchange 事件之前调用 Backbone.history.start()。

```
app.init = function() {
  console.log('start init')

  router = new TestRouter();
  Backbone.history.start();
  console.log('end init')
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:12:59.040

尝试`$(app.init)`移至`app.init`. 您实际上是在传递`jQuery.ready(null)`，它不会`app.init`在 DOM 就绪时调用您的函数。

例如，在下面的代码片段中，只有 'two' 会被提醒，因为它`alerts.one`是`null`在传递给 jQuery 时

```
alerts = {}

$(alerts.one)

alerts.one = function() { alert("one") }
alerts.two = function() { alert("two") }

$(alerts.two) 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# iphone - iPhone试图在UIButton上做一个块动画

> ID：13101908
> 
> 赞同：-5
> 
> 时间：2012-10-27T16:18:31.473
> 
> 标签：iphone, ios

我正在尝试制作一个记忆游戏。我希望这样，当按下按钮时，它会显示图像变成另一个图像的动画。我在 onceat 方法上放了一些测试代码，没有错误，但是....什么也没发生，没有动画代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    // display house
    //   mHouseNumber=SignTranslation[r];
    //  NSNumber *convert=[ NSNumber numberWithInt:mHouseNumber];
    //  mHouse.text=[convert stringValue];

    [UIView beginAnimations:nil context:NULL]; 
    [UIView setAnimationDuration:2]; 

    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut ];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView: mButtona.imageView cache:YES];
     mButtona.imageView.image =  [ UIImage imageNamed :@"feet1.jpg"]; //end 
    [UIView commitAnimations];  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:01:32.080

> 在 iOS 4 及更高版本中，使用基于块的动画方法。（推荐的）

[来自 Apple 文档中关于在此处](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW131)找到的 beginAnimations (etc) 方法。使用各种[animateWithDuration](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW111)函数。

```
 [UIView animateWithDuration:2.0 animations:^{ 
    //Add your animation code here 
    } 
 }]; 
```

我还将设置 UIImageView 的[highlightImage](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImageView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006889-CH3-SW17)并简单地为动画块内的高亮设置动画。

# php - 如何评估 PHP 会话以将用户重定向到管理面板？

> ID：13101912
> 
> 赞同：0
> 
> 时间：2012-10-27T16:19:03.937
> 
> 标签：php, mysql, syntax

我想在我的`panel.php`文件中为我的文件设置会话`check.php`。我在我的文件中定义`$_SESSION['admin']= 1`然后评估管理会话`panel.php`但我不知道为什么我的面板页面重定向到`index.php`（登录表单）。

我带来了以下所有代码：

***检查.php：***

```
<?php
include_once ("function.php");
$username = $_POST['tfuser'] ;
$password = $_POST['tfpass'] ;

if (isset($username) && isset($password)){
  $link = mysql_connect('localhost','root','') or die ('error in connecting to db');
  mysql_select_db('login',$link) or die ('error select db');

  $sql = "select * from administration 
  where username='$username' and password='$password'";

  $result = mysql_query($sql,$link);

  if (mysql_fetch_assoc($result)){
    //login to panel 
    redirect("panel.php");
    $_SESSION['admin']= 1 ;
  } else {
    //back to login page
    redirect("index.php?error");
  }
} else {
  //back to login page
  redirect("index.php");
}

?> 
```

***面板.php：***

```
<?php
include_once ("function.php");
session_start();
if (!isset($_SESSION['admin'])==1){
  session_destroy();
  redirect("index.php");
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>admin panel</title>
</head>

<body>
welcome to admin panel
</body>
</html> 
```

我该如何解决这个重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:32:56.583

您对重定向功能的调用是在设置 $_SESSION['admin'] 之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:25:26.823

尝试检查是否有东西存储在 $result 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T16:49:46.157

当您编写新代码时，您应该避免使用 mysql_* 函数，这是您的代码已修复并移植到 PDO，也许它有些兴趣。

```
<?php
session_start();
include_once ("function.php");

if($_SERVER['REQUEST_METHOD']=='POST'){
    if (isset($_POST['tfpass']) && isset($_POST['tfuser'])){
        // PDO CONNECT
        try {
            $db = new PDO("mysql:host=localhost;dbname=login", 'root', 'pass');
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        }catch (Exception $e){
            die('mySQL server error: '.$e->getMessage());
        }

        $sql = "SELECT 1
                FROM administration
                WHERE username=:user AND password=:pass";

        //Prepare the above query
        $stmt = $db->prepare($sql);
        //bind the placeholders to the values
        $stmt->bindParam(':user', $_POST['tfuser']);
        $stmt->bindParam(':pass', $_POST['tfpass']);
        //Execute
        $stmt->execute();
        //Fetch Result
        $result = $stmt->fetchAll(PDO::FETCH_ASSOC);

        if (!empty($result)){
            //login to panel
            $_SESSION['admin']= 1 ;
            redirect("panel.php");
        } else {
            //back to login page
            redirect("index.php?error");
        }
    } else {
        //back to login page
        redirect("index.php");
    }
}else{
    //back to login page, script not accessed via POST
    redirect("index.php");
}
?> 
```

# jquery - Jquery 动态添加下拉菜单（克隆）

> ID：13101923
> 
> 赞同：2
> 
> 时间：2012-10-27T16:21:44.770
> 
> 标签：jquery, chained

我有一个带有两个链接下拉列表的表单，我需要进行许多克隆，但保留链接。

这是一个示例，链式组合在我的应用程序中带有 json。

链式代码：

```
<form id="test" action="/ventas/add/" >
    <div class="row-fluid">
            <div class="row-fluid">   
            <div class="span5">
            <label for="VentaComunicacioneId">Programas:</label>

            <select id="VentaProgramaId">
            <option value="" selected="selected">(Seleccione Programa)</option>
                <?php foreach($programas as $key => $programa): ?>

                 <option class="<?php echo $key; ?>" value="<?php echo $key; ?>"><?php echo $programa; ?></option>
                <?php endforeach; ?>
            </select>

            </div><!--/span-->
            <div class="span6"> 
              <label for="VentaComunicacioneId">Niveles:</label>

            <select id="VentaMuestraId" name="data[Muestra][muestra_id]">

            </select>

              <div style="margin:-36px 0px 10px 223px; position:relative;">
                  <button class="btn btn-small btn-success" id="add" type="button">+</button><button class="btn btn-small btn-danger" id="remove" type="button">-</button>
                </div>
             <div id="clon">

             </div>

            </div><!--/span-->
          </div><!--/row-->         

       </div>
            <div class="row-fluid">
            <div class="span10">
              <label>Comentarios:</label>
              <textarea  id="comentario" name="data[Venta][comentario]" class="field span12" placeholder="Comentario" rows="5"></textarea>   
            </div>          
            </div>
            <div class="row-fluid">
            <div class="span4">
             <button class="btn btn-warning" id="sbmit" type="submit">Guardar</button>
            </div>
          </div>
          </div><!--/row-->                         
        </div><!--/span-->
       </div>
       <div class="span4">
       </div><!--/span-->       
      <?php  echo $this->Form->hidden('colegio_id'); ?>
</form>

<script type="text/javascript">
$(document).ready(function() {
        $('#VentaProgramaId').on("change",function() {
                var id = $(this).val();
                var select = $('#VentaMuestraId');      
                select.empty();
                $('<option/>').attr('value', 0).html('- Seleccione Nivel -').appendTo(select);
                 $.getJSON('/admin/muestras/get/'+id, function(data) {
                    $.each(data, function(key, val){
                    $('<option/>').attr('value', val.Muestra.id).html(val.Muestra.nombre).appendTo(select);
            });
        }); 
    });

    $('#add').on("click",function() {
        $('#VentaMuestraId').clone().appendTo('#clon');
        $('#VentaProgramaId').clone().appendTo('#clon');
    });

});
</script> 
```

[http://jsfiddle.net/UsBsX/79/](http://jsfiddle.net/UsBsX/79/)

表格： [http ://tinypic.com/r/hsnz8j/6](http://tinypic.com/r/hsnz8j/6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:31:07.043

也许我不完全了解您需要什么，但我看到您的“删除”方法会删除所有克隆和模板本身。

```
$('#remove').on("click",function() {
    $('#filters #template').last().remove();
}) 
```

将删除过滤器中的最后一个。那是你的目标吗？

更好的解决方案是不使用克隆方法，您可以执行以下操作：

```
<a id="clone" href="#">+</a> <a id="remove" href="#">-</a>
<div id="filters"></div>

<script id="template" type="text/template">
  <div class="select">
    <select id="mark" name="mark[]">
       <option value="">--</option>
       <option value="1">Book Category 1</option>
       <option value="2">Book Category 2</option>
    </select>
    <select id="series" name="series[]">
        <option value="">--</option>
        <option value="series-3">3 series</option>
        <option value="series-5">5 series</option>
        <option value="series-6">6 series</option>
        <option value="a3">A3</option>
    </select>
  </div>
</script>

<script type="text/javascript">
    $(function(){
        $('#clone').on("click",function() {
            $('#template').html().appendTo('#filters');
        });
        $('#remove').on("click",function() {
            $('#filters .select').last().remove();
        });
    });
</script> 
```

# asp.net-mvc-3 - DropDownListFor 并显示 SelectedValue

> ID：13101926
> 
> 赞同：0
> 
> 时间：2012-10-27T16:22:03.070
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor, selectedvalue

我已经用 Html.DropDownListFor 和 MVC3 敲了 2 天。

我已经成功地创建了一个下拉列表并成功地更新了基于它的数据库。

我为区域创建一个下拉列表

```
1 - NewYork
2 - London
3 - Paris
etc 
```

在创建用户可以更改先前选择的编辑页面时会出现问题。我试图在下拉列表中显示先前选择的值。

我的代码如下：

控制器：

```
//
// GET: /MyHome/UpdateProfile

public ActionResult UpdateProfile()
{
    var userProfile = websiteRepository.GetProfileForLoggedUser();
    UpdateProfileViewModel viewModel = new UpdateProfileViewModel
    {
       AreaLookUps = websiteRepository.GetAreaLookUpSelectList(userProfile.Area),
       UserProfile = userProfile
    };
    return View("UpdateProfile", viewModel);
} 
```

GetAreaLookUpSelectList 方法

```
public IEnumerable<SelectListItem> GetAreaLookUpSelectList(int selectedId)
{
   var areaLookUps = from p in db.AreaLookUp
                     orderby p.AreaLookUpDescription
                     select new SelectListItem
                     {
                        Text = p.AreaLookUpDescription,
                        Value = SqlFunctions.StringConvert((double)p.AreaLookUpId),
                        Selected = p.AreaLookUpId == selectedId
                     };
    return areaLookUps;
} 
```

看法

```
@model NPLHWebsite.ViewModels.UpdateProfileViewModel

<div class="editor-label">
   @Html.LabelFor(model => model.UserProfile.Area)
   @Html.DropDownListFor(model => model.UserProfile.Area, Model.AreaLookUps, "--Select Area--")
</div> 
```

视图模型

```
public class UpdateProfileViewModel
{
   public UserProfile UserProfile { get; set; }
   public IEnumerable<SelectListItem> AreaLookUps { get; set; }
} 
```

请帮我显示一个选定的值。如果在创建配置文件时选择了该选项，请在下拉列表中说“伦敦”。数据库存储值 2 来表示伦敦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:36:46.453

看起来该`AreaLookUpId`属性是`double`在与所选值进行比较时导致问题的原因，因为您正在使用`SqlFunctions.StringConvert`并且格式可能不完全匹配。

我建议您对 id 属性使用整数或 guid。您也可以`Selected = p.AreaLookUpId == selectedId`从`GetAreaLookUpSelectList`函数中删除 。将控制器操作中的属性设置为相应的值就足够了`viewModel.UserProfile.Area`（您已经完成了）：

```
public IEnumerable<SelectListItem> GetAreaLookUpSelectList(int selectedId)
{
    return db
        .AreaLookUp
        .OrderBy(x => x.AreaLookUpDescription)
        .ToList()
        .Select(x => new SelectListItem 
        {
            Value = x.AreaLookUpId.ToString(),
            Text = x.AreaLookUpDescription
        });
} 
```

# java - 如何在 Java / Android 中重用内部类？

> ID：13101928
> 
> 赞同：10
> 
> 时间：2012-10-27T16:22:33.673
> 
> 标签：java, android, android-asynctask

我是一名长期（8 年）C# 开发人员，涉足一点 android 开发。这是我第一次使用 Java，当涉及到内部类时，我在转变我的思维方式时遇到了一些麻烦。

我正在尝试编写一个类来包装一个 RESTful API，以便从一个类型安全的地方在服务器上执行各种调用，例如

```
string jsonResult = APIWrapper.getItems("category 1"); 
```

我想使用 AsyncTask 在后台获取内容。

所以一种方法是 - 在 APIWrapper 中有 AsyncTask ：

```
class ActivityA extends Activity {

 myButton.setOnClickListener(new OnClickListener() {   
  public void onClick(View v) {

    //get stuff and use the onPostExecute inside the APIWrapper
    new APIWrapper().GetItems("Category A", MyGetItemsCallBack);

  }}); 

 function void MyGetItemsCallBack(String result)
 {
    //render the result in the activity context, in a listview or something
 }

} 
```

无论如何，我不确定回调/委托的想法是否适用于 Java！

另一种方法是在 Activity 中使用 AsyncTask 并创建 APIWrapper 以像工作者/助手一样获取数据：

```
class ActivityA extends Activity {

 myButton.setOnClickListener(new OnClickListener() {   
  public void onClick(View v) {

    //get stuff and use the onProcessComplete inside the APIWrapper
    new GetItems("Category A");

  }}); 

 class GetItems(String theCategory) extends AsyncTask
 {
    doInBackground()
    {
      return new APIWrapper().GetItems(theCategory);
    }

    onPostExecute(String result)
    {
       //render the result in the activity context, in a listview or something
    }

 }

} 
```

谁能帮我做出正确的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:34:47.953

Java 没有 C# 委托之类的东西，因此您的第一个提案不可能按原样进行。

标准解决方案是声明一个可以作为回调传递的接口：

```
public interface MyCallback {
  void gotItems(String data);
} 
```

然后你可以做类似的事情

```
class ActivityA extends Activity {
  myButton.setOnClickListener(new OnClickListener() {   
    public void onClick(View v) {
      //get stuff and use the onPostExecute inside the APIWrapper
      new APIWrapper().getItems("Category A", new MyGetItemsCallBack());
  }}); 

  private class MyGetItemsCallBack implements MyCallback {
    public void gotItems(String result) {
      // bla bla bla
    }
  }
} 
```

或者您可以使用匿名类：

```
class ActivityA extends Activity {
  myButton.setOnClickListener(new OnClickListener() {   
    public void onClick(View v) {
      //get stuff and use the onPostExecute inside the APIWrapper
      new APIWrapper().getItems("Category A", new MyCallback() {
        public void gotItems(String result) {
          // bla bla bla
        }
      });
  }}); 
```

如果您需要许多不同类型的回调，您可以使用泛型来避免声明许多小接口：

```
interface Callback<T> {
  void run(T arg);
}

class ActivityA extends Activity {
  myButton.setOnClickListener(new OnClickListener() {   
    public void onClick(View v) {
      //get stuff and use the onPostExecute inside the APIWrapper
      new APIWrapper().getItems("Category A", new Callback<String>() {
        public void run(String result) {
          // bla bla bla
        }
      });
  }}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:30:28.410

常规的内部类持有对外部类对象的引用，因此没有外部类就无法创建其实例。这意味着不能从外部类外部重用内部类。

您正在使用的匿名内部类肯定不能重用：它们是在外部方法的上下文中创建的。

但是，您可以将内部类定义为静态的。在这种情况下，您可以在代码中的任何地方使用它。

但是您的情况，我认为更好的解决方案是您建议自己作为解决方案 2\. 只需创建单独的类，这样您就可以在代码中的任何位置使用它。

# iphone - 有没有关于将 iphone 联系人转移到 iTunes 的建议？

> ID：13101930
> 
> 赞同：0
> 
> 时间：2012-10-27T16:22:59.167
> 
> 标签：iphone

所以事情是这样的，我不小心把水溅到了我的 iphone 4 上，虽然已经修好了，但它仍然有点“不稳定”，有时它会突然自动关机。现在我正在为新的 iphone 5 存钱，但是我在浇过水的 iphone 4 上保存了一堆重要的联系人，我很害怕他们会在我拿到新手机之前就和损坏的手机一起消失了. 但是如果我能把这些联系人复制到iTunes上，那么下次我就可以把它们转移到新的iphone上了，对吧？还是直接复制到电脑上？有什么区别吗？无论如何，我只想备份联系人，有什么好主意吗？我不介意我是否必须为某些东西付费，但如果有一种免费且简单的方法，那将是最好的。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T17:19:09.140

1.  打开 iTunes 并插入你的 iPhone
2.  在“信息”选项卡下，您将看到一个“将联系人与：同步”字段，并让您选择要将联系人保存到哪个程序。默认情况下，它是 Windows 通讯簿。
3.  选中“同步联系人：”框并选择 windows 通讯簿
4.  单击右下角的同步按钮，您的所有联系人将立即保存到 Windows 通讯簿

下次当您想将这些联系人同步到您的新 iPhone 时，您只需将它们添加到 iTunes 库中，我相信您知道如何完成其​​余的工作。在这里，我找到了一些关于[如何将 iphone 联系人转移到 iTunes 的](http://www.m-reviews.com/how-to-transfer-files-from-iphone-to-itunes-on-PC.html)有趣文章，也许会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T17:40:10.217

您可以先将您的 iPhone 4 联系人传输到您的计算机。这可能就在您计算机上的“通讯录”中。如果“地址簿”在您的 Dock 中，则该图标带有“@”符号。如果不是这样，请转到 Finder 中的应用程序并搜索 `Address Book`

下次，如果您没有使用 Time Machine、iDisk 或其他任何东西自动备份，请执行地址簿导出以进行另一个备份。如果您备份到同一台计算机上的文件，请将其复制到外部驱动器。

从苹果产品转移到PC有这么多麻烦，作为一个懒人我个人更喜欢使用[一个简单的软件iPhone转移联系人](http://www.levesoft.com/iPhone-transfer-contact.html)，何必呢？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:25:00.390

转到设置并为联系人激活 icloud，然后在设置中返回 icloud 并进行备份。如果您不想使用 Icloud 将其连接到您的计算机，并且在 iTunes 的开始屏幕上有一个带有备份的按钮。但首先在顶部单击名为 info 的地方，您可以进行同步更改。并勾选同步联系人的那个！

那将是解决方案。

# ruby - Ruby #{} 使用错误

> ID：13101934
> 
> 赞同：-2
> 
> 时间：2012-10-27T16:23:15.143
> 
> 标签：ruby

虽然我是 Ruby 新手，但我已经通过反复试验为 Ruby 编写了许多插件。

我尝试了许多不同的语法变体，结果是：

1.  `Unexpected else or end, expecting }`
2.  变量没有得到正确评估，即`@reUrl`最终 =`"@reUrl2"`

任何帮助，将不胜感激。

这是我的代码的摘录：

```
def initialize(config)  
  self.reip1 = config["reip1"]  
  self.reip2 = config["reip2"]  
  @reUrl1 = "#{self.reip1}:8080/redeye/rooms/0/devices/2/commands/send?commandId="  
  @reUrl2 = "#{self.reip2}:8080/redeye/rooms/0/devices/2/commands/send?commandId="  
  @reUrl = @reUrl2  
end  

. 
. 
. 
. 

def change_redeye(redeye)  
  redeye = "#{redeye}".downcase  
  redeye = "#{redeye}".strip  
  redeyeid = "#{@redeyeId["#{redeye}"]}".to_i  
  if redeyeid > 0  
    say "OK. Changing to RedEye #{redeye}."  
    # results in resel = "@reUrl2"  Does what I want.      
    resel = "@reUrl#{redeyeid}"    
    # FIXIT: need to end up with the URL of the device, but can't find the right syntax.     
    @reUrl = "#{#{resel}}"           
  else    
    say "Sorry, I am not programmed to control RedEye #{redeye}."     
  end    
  request_completed     
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T16:25:36.463

tl;博士我终于弄清楚了你想要做什么。虽然关于您滥用字符串插值，以下答案仍然完全准确，但您*实际上*追求的是[`instance_variable_get`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_get). 我没有意识到您正在尝试访问名称存储在字符串中的变量的值。

* * *

您使用字符串和插值有*很多错误。*`"#{}"`仅当您想在字符串中嵌入变量时才需要使用。几乎在每种情况下，您都在错误地使用它。下面举几个具体的例子。

首先，不要这样做：

```
redeye = "#{redeye}".downcase
redeye = "#{redeye}".strip 
```

一方面，您要转换为字符串两次。在第一次使用之后，它已经是一个字符串了`#{}`。但你不应该首先这样做。如果要将变量转换为字符串，请使用`to_s`并将后续方法调用链接到前一个方法的返回值上：

```
redeye = redeye.to_s.downcase.strip 
```

这条线*真的*坏了，而且（据我所知）甚至*不需要*字符串插值：

```
redeyeid = "#{@redeyeId["#{redeye}"]}".to_i 
```

如果`@redeyeId`是一个整数数组，你只需要这个：

```
redeyeId = @redeyeId[redeye] 
```

~~这一行可能在语法上是正确的，但它也很糟糕：~~如果你的意图是用来`instance_variable_get`访问`@reUrl1`or的值，这一行是正确的`@reUrl2`：

```
"@reUrl#{redeyeid}" 
```

您需要使用`#{}`插入`@variable`成员变量以及常规变量。该行应该是

```
"#{@reUrl}#{redeyeid}" 
```

这条线也*真的*断了：

```
@reUrl = "#{#{resel}}" 
```

这甚至应该做什么？我一生都无法弄清楚你的意图是什么。您*实际上*在做的是，在一个字符串中，打开一个 Ruby 上下文，该上下文立即打开一个*注释*，导致该行的其余部分被忽略，并且下一行出现语法错误。我不知道你认为这有什么用，但它没有做任何有用的事情。

因为这里有*太多的错误*，所以我会试着把方法写成*应该*写的，希望你能从中有所收获。[在编写更多 Ruby之前](http://kconrails.com/2010/12/08/ruby-string-interpolation/)[，](http://kconrails.com/2010/12/08/ruby-string-interpolation/)您*需要*了解. 它是**字符串插值**。[`#{}`](http://kconrails.com/2010/12/08/ruby-string-interpolation/)

 **```
def change_redeye(redeye)
  redeyeid = @redeyeId[redeye.downcase.strip]

  if redeyeid > 0
    say "OK. Changing to RedEye #{redeye}."
    @reUrl = instance_variable_get("@reUrl#{redeyeid}")
  else
    say "Sorry, I am not programmed to control RedEye #{redeye}."
  end
  request_completed   
end 
```**

# algorithm - MATLAB 代码不起作用（梯度下降算法）

> ID：13101940
> 
> 赞同：1
> 
> 时间：2012-10-27T16:24:13.537
> 
> 标签：algorithm, matlab

我正在尝试梯度下降，我写了以下但没有得到任何答案，

```
n=0;            %initialize iteration counter 
eps=1;          %initialize error 
a=0.8;         %set iteration parameter 
x=[1;1];        %set starting value
f=6*x(1)^2+8*x(2)^2-3*x(1)*x(2);
%Computation loop 
while eps>1e-12||n<100 
   gradf=[12*x(1)-3*x(2); 16*x(2)-3*x(1)];  %gradf(x) 
   eps=(norm(gradf)/(1+abs(f)));                                %error 
   y=x-a*gradf;                                                 %iterate 
   x=y;                                                         %update x 
   n=n+1;                                                       %counter+1 
end 
n;x;eps;        %display end values 
```

当我将此文件添加到路径并键入 x 时，它显示 NaN，NaN。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:46:55.893

您的代码中有几个错误。考虑一下（我在需要更正的地方发表评论）

```
 n=0;            
 eps=1;         
 a=0.1;                    %You need a way smaller parameter to converge!
 x=[1;1];       

 A = [6 -3/2 ; -3/2 8];     %You have a bilinear positive definite form,
                            %you may use matrix form for convenience

while eps>1e-12 && n<100    %You had wrong termination conditions!!
    gradf=2*A*x;            %(gradf in terms of matrix)
    f=x'*A*x;               %you need to update f every iteration!!
    eps=(norm(gradf)/(1+abs(f)))                              
    disp(eps > 1e-12)
    x=x-a*gradf;                                               

       %Now you can see the orbit  towards minimum                                     
    plot(x(1),x(2),'o'); hold on        
    n=n+1;                                                        
end 
n
x
eps 
```

例如`a=.1`我得到的当前值

```
n = 100
eps = 1.2308e-011

x = 
  1.0e-012 *

  -0.2509
  0.4688 
```

那就是我必须执行 100 次迭代，因为我的 epsilon 仍然高于阈值。如果我允许 200 次迭代，我会得到

```
n =  110
eps = 
   7.9705e-013

x = 
1.0e-013 *
  -0.1625
   0.3036 
```

即110 次迭代就足够了。

![点在解 <code>(0,0)</code> 周围变得密集](../Images/e5ce8d2e5e3acd148bda9cbc76d21ac8.png)

* * *

一般情况`f`（即不是二次形式）。

例如，您可以使用[函数句柄](http://www.mathworks.it/it/help/matlab/ref/function_handle.html)，即您定义（在 之前`while`）

```
foo = @(x) 6*x(1)^2+8*x(2)^2-3*x(1)*x(2);
foo_x = @(x) 12*x(1)-3*x(2); 
foo_y = @(x) 16*x(2)-3*x(1); 
```

然后，在`while`你替代

```
gradf = [foo_x(x);foo_y(x)];
f = foo(x); 
```

* * *

PS 对于与`while`循环有关的问题，请记住，**当**您对精度不满意时（`eps>1e-12`）**并且**您的总迭代次数低于给定阈值（`n<100`）时，您会继续迭代。

还要考虑您在**有限精度**下工作：数值算法永远无法达到解析解（即您拥有无限精度和无限迭代的结果），因此，您始终必须**设置阈值**( `eps`，它应该高于机器精度\approx `1e-16`) 那**就是**你的`0`.

# ruby-on-rails - 如何重新同步 Gemfile.lock 对 Gemfile 的更改

> ID：13101945
> 
> 赞同：30
> 
> 时间：2012-10-27T16:24:36.580
> 
> 标签：ruby-on-rails, rvm, bundler

如何重新同步 Gemfile.lock 对 Gemfile 的更改。

假设我在 Gemfile 中有 3 个宝石（gem1、gem2、gem3）。

`bundle install`创建一个 Gemfile.lock 文件。

如果我删除 gem3 并运行`bundle install`，我希望重新生成 Gemfile.lock 并将 gem3 从 rvm gemset 中删除。但它没有，我应该如何在不删除 gemset 的情况下重新同步。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-27T17:07:17.483

要使 Gemfile.lock 与 Gemfile 编辑一致，请运行`bundle check`.

要使 Gemfile.lock 与 Gemfile 编辑和最新的兼容 gem 保持一致，请运行`bundle update`.

* * *

相关：viget 的这篇博文对[Bundler 最佳实践有一些很好的建议](http://viget.com/extend/bundler-best-practices)

# c# - 自动将 datagridview 单元格值复制到同一 datagridview 中的另一个单元格

> ID：13101951
> 
> 赞同：0
> 
> 时间：2012-10-27T16:25:27.950
> 
> 标签：c#, winforms, datagridview

在我的 datagridview 中，我有 4 列，当用户为第一行提供一些值时，我想采用`1st row 4th cell value and put it to the 2nd Row 3rd cell`我必须申请所有行的方式（请参见图片）。在某些情况下，我将只有 2 行，最大我将有 4 行。

下面的方法有效，但是当我用 2 或 3 行测试时它不起作用..显然第 3 和第 4 是不存在的。

我该怎么办？？有没有更好的方法来做到这一点？

在这里，我为最多 4 行编码。

```
private void dataGridView1_CellLeave(object sender, DataGridViewCellEventArgs e)
        {
             var value1 = dataGridView1.Rows[0].Cells[3].Value.ToString();
            dataGridView1.Rows[1].Cells[2].Value = value1;

            var value2 = dataGridView1.Rows[1].Cells[3].Value.ToString();
            dataGridView1.Rows[2].Cells[2].Value = value2;

            var value3 = dataGridView1.Rows[2].Cells[3].Value.ToString();
            dataGridView1.Rows[3].Cells[2].Value = value3;
        } 
```

![在此处输入图像描述](../Images/d6d42b1eb0e1cda5aabc3081fe8b564b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:31:23.163

对于这样的事情，你应该处理`CellEndEdit`，并且绝对不要硬编码行索引。

```
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex != 3)
        return;
    int nextRowIndex = e.RowIndex + 1;
    int lastRowIndex = dataGridView1.Rows.Count - 1;
    if (nextRowIndex <= lastRowIndex)
    {
        var value = dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString();
        dataGridView1.Rows[nextRowIndex].Cells[2].Value = value;
    }
} 
```

# java - 即使onclick为空，在commandButton中使用“oncomplete”？

> ID：13101960
> 
> 赞同：1
> 
> 时间：2012-10-27T16:26:50.090
> 
> 标签：java, jsf, primefaces

在 jsf 2 项目中，隐藏了 ID 为“displayDialog”的 commandButton。它由 javascript 函数触发：

```
 document.getElementById('displayDialog').click(); 
```

问题是，我需要在“oncomplete”阶段执行点击操作，而不是“onclick”（原因由@BalusC [here](https://stackoverflow.com/questions/13100749/confirmdialog-appears-but-disappears-immediately)解释）。

我试着做：

```
 <p:commandButton style="display: none" id="displayDialog" type="button" onclick="" oncomplete="cd.show();"/> 
```

或者

```
 <p:commandButton style="display: none" id="displayDialog" type="button" onclick="return false;" oncomplete="cd.show();"/> 
```

但在这两种情况下 cd.show() 都没有采取行动。这应该怎么做？

（我应该在 onclick 属性中添加一个虚拟操作吗？如果可以，是哪一个？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T14:57:21.043

该`oncomplete`方法在ajax请求之后调用，当你说的时候`type="button"`，不会发出ajax请求。

也就是说，只需删除`type="button"`参数，您根本不必实现`onclick`。

```
<p:commandButton style="display: none" 
                 id="displayDialog" 
                 oncomplete="cd.show();"/> 
```

* * *

但是，您真的需要从 JavaScript 函数调用按钮吗？如果有另一个组件发出第*一个*请求，你不能只实现*那个*组件的`oncomplete`方法吗？

 *在您的代码中，`p:commandButton`根本没有任何操作，那您*为什么*需要等待操作完成？你是提交表格还是什么？

也许如果你准确地解释你想要做什么，我们可以想出一个更好的方法来做到这一点。*

# c# - 如何使用带有 StreamWriter 的 C# 代码编写 .exe 文件？

> ID：13101967
> 
> 赞同：1
> 
> 时间：2012-10-27T16:27:52.737
> 
> 标签：c#, sockets, streamwriter

实际上我正在通过套接字复制一个 exe 文件。我可以使用`StreamWriter`Class 复制文本，但我使用相同的代码复制 exe 文件，它创建了一个具有所需名称的 exe 文件，但我无法运行它。“此应用程序无法在您的 PC 上运行”。我有 Windows 8 x64，这无关紧要。

```
static void Main(string[] args)
{
    TcpClient tcpclient = new TcpClient();
    tcpclient.Connect("localhost", 20209);
    NetworkStream stm = tcpclient.GetStream();

    byte[] buffer = new byte[1024];
    var fs = File.Open("F:/aki/RMI/akshay.exe", FileMode.OpenOrCreate, FileAccess.ReadWrite);
    var streamWriter = new StreamWriter(fs);
    int x;
    while ((x=stm.Read(buffer, 0, 1024))>0)
    {
        **A**    streamWriter.Write(buffer);
        **B**  //streamWriter.Write(Encoding.ASCII.GetString(buffer, 0, buffer.Length));
    }
    streamWriter.Close();
    fs.Close();

    Thread.Sleep(2000);
    Console.WriteLine("Waiting");
    //Console.ReadLine();
    tcpclient.Close();
} 
```

我尝试了 A 和 B 方法，B 适用于文本文件，但不适用于 exe 文件。有什么解决办法吗？

或者我必须对 exe 文件使用任何其他 Writer 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:37:47.343

您需要类中的`Write(byte[], index, count)`方法`StreamWriter`来执行此操作，但这不存在。调用`streamWriter(buffer)`和 一样`streamWriter(buffer.ToString())`，不会写入缓冲区的内容，使用`Encoding.ASCII`将缓冲区中的二进制内容转换为文本会改变它。

根本不要使用 a `StreamWriter`。改为`FileStream`：

```
while ((x = stm.Read(buffer, 0, 1024)) > 0) {
  fs.Write(buffer, 0, x);
} 
```

您应该使用变量`x`作为要写入的长度，而不是`buffer.Length`，因为缓冲区可能并不总是被完全填满。至少最后一个块几乎永远不会是一个完整的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:38:01.957

StreamWriter 是 TextWriter。你不能这样做：

```
fs.Write(buffer, 0, buffer.Length); 
```

# javascript - 私有变量和闭包

> ID：13101968
> 
> 赞同：2
> 
> 时间：2012-10-27T16:28:06.577
> 
> 标签：javascript, security, closures

正如*Douglas Crockford*所说，我们可以在 JavaScript 中使用闭包来拥有私有属性，并且它们对于处理安全数据非常方便。

现在我了解了封装的概念，因为它可以帮助我们管理和构建代码。甚至私有变量对性能也很有用，例如：您可以缓存 DOM 元素、属性和全局变量以进行迭代访问。

所以问题是：**闭包或私有变量究竟如何帮助我们处理敏感数据？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:15:56.167

您可以保护代码中某个组件的数据免受其余代码的影响。或者也许您可能已包含在您的页面中的任何第三方脚本。因此，您可以保护任何敏感的中间数据不被 XSS 攻击利用。

虽然页面中的任何脚本都可以访问 DOM 中存在的任何数据（例如输入元素中）。然而，javascript 中的某些变量可以在闭包范围内关闭，使其几乎无法被任何其他脚本访问。

```
 x = {}
(function(){
    var a;

    x.fn = function(arg){
        a = arg;  // Can access and modify a;
    }

})();

function fn2(){
    a = 12; // This does not change the a above;
} 
```

# php - Net_SSH2 无法在 PHP 中切换用户

> ID：13101969
> 
> 赞同：0
> 
> 时间：2012-10-27T16:28:17.890
> 
> 标签：php, ssh

当我通过 SSH 连接到一个 linux 机器，然后尝试从该会话中以另一个用户身份登录时，我遇到了问题。在 PHP 中它总是挂起。

```
Example:
//Connect to server using pem files
$key = new Crypt_RSA();
$key->loadKey($options['pem_file']);
$ssh = new Net_SSH2($host);
$ssh->login($user, $key);

//This command works
$ssh -> exec("cd /var/www/site1");

//This hangs indefinitely but will work on the command line
$ssh -> exec("sudo suo www-data"); 
```

总而言之，我使用 pem 文件连接到服务器。我可以使用 exec 运行命令，但是当我尝试切换用户“sudo su”时，它将挂在 SSH2 中，但这将在常规控制台上运行。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:48:21.440

$ssh->exec() 不是“常规控制台”。当命令完成运行时，它会返回命令的输出。但是如果命令没有完成怎么办？

您应该尝试 $ssh->write() / $ssh->read() 代替。例如。

一个例子：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->read('username@username:~$');
$ssh->write("cd /var/www/site1\n");
echo $ssh->read('username@username:~$');
$ssh->write("sudo suo www-data\n");
echo $ssh->read('newuser@newuser:~$');
?> 
```

# mysql - 连接表ID

> ID：13101971
> 
> 赞同：0
> 
> 时间：2012-10-27T16:28:35.103
> 
> 标签：mysql

**你好呀**

我有 3 张桌子

```
cc_host_uploads contains
upload_id       file_id

cc_host_files contains
file_id         user_id

cc_host_users contains
user_id 
```

截至目前，3个表之间有一个链接（id），我想要的是两者之间的链接。

我希望 cc_host_uploads 表将 user_id 插入 file_id ......所以我需要以某种方式加入它们。

有人可以启发我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:30:37.833

用于`INNER JOIN`此。假设都`cc_host_uploads`属于某个用户`user_id`。

```
SELECT  a.*, c.*
FROM    cc_host_users a
        INNER JOIN cc_host_files b
            ON a.user_id = b.user_id
        INNER JOIN cc_host_uploads c
            ON b.file_id = c.file_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:32:50.570

我想这就是你的意思？通过文件获取上传用户？

```
SELECT upload.*, user.id from cc_hosts_uploads upload
INNER JOIN cc_hosts_files files on upload.id = files.upload_id
INNER JOIN cc_host_users user on user.id = files.user_id 
```

# php - ImageMagick 读取数据：图像/svg 而不是文件

> ID：13101973
> 
> 赞同：1
> 
> 时间：2012-10-27T16:28:44.830
> 
> 标签：php, svg, imagemagick

我正在尝试将 SVG 转换为 PNG，到目前为止，当我使用文件（file.svg）时一切正常，但目前我的 SVG 文件（简单签名）存储在数据库中。

当我检索矢量时，它看起来像 'data:image/svg +xml; base64，...'。现在，我正在使用 fwrite() 导出文件，然后在其上运行 Image Magick，但我希望能够省略这一步。

这可以做到吗？

我当前的命令如下：

```
/usr/bin/convert /path/to/file.svg /path/to/file.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:41:21.687

看起来这样做的唯一方法是使用 Imagick。我将来会走这条路，但是在这个站点运行的主机上安装并运行新的安装会很乏味。

最终，我选择将 SVG 导出为 XML 文件并使用 .svg 扩展名保存它，以便可以使用上面显示的语法加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:39:11.243

好吧，可能有多种方法可以做到这一点，这里有一个：

```
echo 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iOCIgZmlsbD0ibGltZSIvPjwvc3ZnPgo=' | cut -d',' -f2 | base64 -d | convert - test.png 
```

出于某种原因，似乎`convert`喜欢在字符串中包含 XML 序言。

# c# - 按顺序自动分配唯一的 ID 号

> ID：13101975
> 
> 赞同：0
> 
> 时间：2012-10-27T16:28:51.210
> 
> 标签：c#

我正在使用 c# 创建一个经销商表单，其中我想要每个经销商的唯一经销商 ID，请帮助我如何以格式顺序自动将唯一代码分配给新成员

> D1，D2，D3，D4，..

我想在 ADO.net 中使用断开连接的环境，并且我想将该 ID 保存在 SQL Server 2005 中

![http://i.imgur.com/xUi9c.jpg](../Images/8a1062448a80add763bcea5e0990b3ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:42:30.833

如果您需要生成与 SQL Server 断开连接的唯一 ID，然后将它们保存到数据库中而不会发生冲突，您可以使用[SQL GUID](http://msdn.microsoft.com/en-us/library/ms187942.aspx)而不是整数。在 C# 中，您可以为每个新经销商生成一个新的 GUID，然后将其提交到数据库中，使用[GUID](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)可以让您在与 SQL Server 断开连接的情况下工作，并且客户端数量不受限制。

# java - DBUnit 入门

> ID：13101976
> 
> 赞同：3
> 
> 时间：2012-10-27T16:28:58.823
> 
> 标签：java, jakarta-ee, junit

我正在为使用 JPA 的存储库层编写集成测试。但是，在每次测试之后，它都会给数据库留下很多垃圾，我想在测试结束时将它们清除掉。我正在查看似乎能够重新初始化我的数据库的 DBUnit。但是扩展 TestCases 的东西似乎有点老了？我找不到任何好的教程来解释如何使用它。我正在使用 JUnit 4.10。还有其他更好的框架吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T16:35:23.683

DbUnit 可以与 JUnit 4 一起使用，而无需扩展任何 DbUnit 基类。请参阅[http://dbunit.sourceforge.net/howto.html#noextend](http://dbunit.sourceforge.net/howto.html#noextend)了解如何操作。

也就是说，我真的不喜欢 XML 并且喜欢快速测试，所以我编写了[DbSetup](http://dbsetup.ninja-squad.com)来实现类似的功能，并使用全 Java 解决方案。

# erlang - 为子进程命名

> ID：13101979
> 
> 赞同：1
> 
> 时间：2012-10-27T16:29:48.870
> 
> 标签：erlang, distributed

我有主管，它使用 spawn_link 产生动态孩子。当我创建新孩子时：

```
create_my_child(). 
```

它返回：

`{ok, <0.324.0>}`

所以一切都很开心。我尝试从控制台将变量分配给孩子：

```
{ok,X} = create_my_child() 
```

我收到错误消息：

> 异常错误：右侧值不匹配

并说：

> {主管，do_start_child_i，3

我做了所有困难的工作，可以为子进程做这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:42:21.660

如果您在控制台中执行所有这些操作，则 X 已经绑定返回第一个`spawn_link`调用的 Pid，并且随后尝试`{ok, X}`与`create_my_child()`调用匹配失败并出现“右手侧不匹配”错误。

在 Erlang 中，变量是不可变的，所以你不能`X`在它已经有值之后重新赋值。在控制台中，您可以`f()`清除 shell 的变量，但更简单的解决方案是简单地绑定做一个不同的变量（即`X2`）

# javascript - Jquery 数据表复选框过滤器

> ID：13101980
> 
> 赞同：1
> 
> 时间：2012-10-27T16:30:03.840
> 
> 标签：javascript, jquery, datatables, filtering, html-table

我一直在尝试数据表多过滤 API，但这还不足以满足我的需求。 [http://datatables.net/release-datatables/examples/api/multi_filter_select.html](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)

我需要的是一个复选框过滤器，这样我就可以勾选 Gecko 和 Trident 渲染引擎，并且只从数据表中获取这些值。知道是否存在这样的过滤器实现吗？我也一直在尝试 columnFilter 插件，但那里没有复选框过滤器。

在此先感谢，吉米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:04:03.507

你见过这个例子吗？

[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/checkbox.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/checkbox.html)

使用这个初始化代码：

`$(document).ready( function () { $('#example').dataTable().columnFilter({aoColumns: [ { type: "checkbox", values: [ 'Gecko', 'Trident'] },{},{},{},{ type: "checkbox", values: [ 'A', 'C'] } ]});
} );`

# php - MySQL PHP 查询无法正常工作

> ID：13101986
> 
> 赞同：0
> 
> 时间：2012-10-27T16:30:30.820
> 
> 标签：php, mysql, sql, phpmyadmin

下面的代码似乎不能正常工作，当我在 WHERE 中只放 1 件事时它工作正常，所以也许我不能在这里做多个项目？

代码片段是

```
$query_view_users = "SELECT id, type, name, username, email FROM admin_users WHERE id, type, name, username, email LIKE '$search'"; 
```

非常感谢你的帮助。:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T16:32:01.437

这是一个多条件`WHERE`子句。使用`OR`或`AND`满足您的需求。

```
SELECT ...
FROM ....
WHERE id   LIKE '$search' OR 
      type LIKE '$search' OR 
      name LIKE '$search' OR 
      username LIKE '$search' OR 
      email    LIKE '$search' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:44:36.127

你的 sql 必须是

```
$query_view_users = "SELECT * FROM admin_users WHERE id OR type OR name OR username OR email LIKE '$search'"; 
```

# c# - C# HttpWebRequest 表单上传

> ID：13101989
> 
> 赞同：3
> 
> 时间：2012-10-27T16:31:06.387
> 
> 标签：c#, forms, upload, httpwebrequest

我试图从我的 C# 程序自动上传文件。这是上传文件的方法。

```
public static string UploadFileEx(string uploadfile, string url,
                            string fileFormName, string contenttype, NameValueCollection querystring,
                            CookieContainer cookies)
    {
        if ((fileFormName == null) ||
            (fileFormName.Length == 0))
        {
            fileFormName = "file";
        }

        if ((contenttype == null) ||
            (contenttype.Length == 0))
        {
            contenttype = "application/octet-stream";
        }

        string postdata;
        postdata = "";
        if (querystring != null)
        {
            foreach (string key in querystring.Keys)
            {
                postdata += key + "=" + querystring.Get(key) + "&";
            }
        }
        Uri uri = new Uri(url + postdata);

        string boundary = "----------" + DateTime.Now.Ticks.ToString("x");
        HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(uri);

        var sp = webrequest.ServicePoint;
        var prop = sp.GetType().GetProperty("HttpBehaviour", BindingFlags.Instance | BindingFlags.NonPublic);
        prop.SetValue(sp, (byte)0, null);

        webrequest.CookieContainer = cookies;
        webrequest.ContentType = "multipart/form-data; boundary=" + boundary;
        webrequest.Method = "POST";

        webrequest.KeepAlive = true;
        webrequest.Referer = "http://www.iwi.hs-karlsruhe.de/scs/simulate/upload.jsp";
        webrequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        webrequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.220 Safari/535.1";
        webrequest.Headers.Add("Accept-Language:de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
        webrequest.Headers.Add("Accept-Encoding:gzip, deflate");
        webrequest.ProtocolVersion = HttpVersion.Version11;

        // Build up the post message header

        StringBuilder sb = new StringBuilder();
        sb.Append("--");
        sb.Append(boundary);
        sb.Append("\r\n");
        sb.Append("Content-Disposition: form-data; name=\"");
        sb.Append(fileFormName);
        sb.Append("\"; filename=\"");
        sb.Append(Path.GetFileName(uploadfile));
        sb.Append("\"");
        sb.Append("\r\n");
        sb.Append("Content-Type: ");
        sb.Append(contenttype);
        sb.Append("\r\n");
        sb.Append("\r\n");

        string postHeader = sb.ToString();
        byte[] postHeaderBytes = Encoding.UTF8.GetBytes(postHeader);

        // Build the trailing boundary string as a byte array

        // ensuring the boundary appears on a line by itself

        byte[] boundaryBytes =
               Encoding.ASCII.GetBytes("\r\n--" + boundary + "--\r\n");

        FileStream fileStream = new FileStream(uploadfile,
                                    FileMode.Open, FileAccess.Read);
        long length = postHeaderBytes.Length + fileStream.Length +
                                               boundaryBytes.Length;
        webrequest.ContentLength = length;

        Stream requestStream = webrequest.GetRequestStream();

        // Write out our post header

        requestStream.Write(postHeaderBytes, 0, postHeaderBytes.Length);

        // Write out the file contents

        byte[] buffer = new Byte[checked((uint)Math.Min(4096,
                                 (int)fileStream.Length))];
        int bytesRead = 0;
        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
            requestStream.Write(buffer, 0, bytesRead);

        // Write out the trailing boundary

        requestStream.Write(boundaryBytes, 0, boundaryBytes.Length);
        try
        {
            WebResponse responce = webrequest.GetResponse();
            Stream s = responce.GetResponseStream();
            StreamReader sr = new StreamReader(s);

            return sr.ReadToEnd();
        }
        catch (Exception ex)
        {
            return ex.Message;
        }

    } 
```

当我在示例图片上传页面上这样调用它时，一切正常：

```
string outdata = UploadFileEx(uploadfile,
             "http://www.minpic.de/upload_file.php", "uploadfile0", "image/jpg",
             null, null); 
```

但是当我尝试将它上传到我高中的页面时，它不起作用。上传页面由登录表单保护。所以我调用上传页面来获取初始 Cookie，我发布登录凭据并获得正确的结果。所以我可以看到以下上传表单：

```
<form action="../simulate" method=post enctype="multipart/form-data"><br />Choose your inputdata file (xml).<br /><input type=file size=50 maxlength=100000 name="Datei" accept="text/xml"><br><br><input type=submit value="Send"></form> 
```

然后，当我发布图像时（我知道预期的类型是 xml，但页面回答了我在这种情况下想要的错误......）我的上传函数返回错误代码 500。这是 Wireshark 对浏览器帖子所说的内容：

> POST /scs/simulate HTTP/1.1 主机：某个主机 连接：保持活动 内容长度：3874 缓存控制：max-age=0 来源：同一主机 用户代理：Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 （KHTML，如 Gecko）Chrome/22.0.1229.79 Safari/537.4 内容类型：multipart/form-data；边界=----WebKitFormBoundaryP3Ti6rxYcN1ov7JD Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Referer: some url Accept-Encoding: gzip,deflate,sdch Accept-Language: de -DE,de;q=0.8,en-US;q=0.6,en;q=0.4 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 Cookie: SCS_COOKIE=Default =DE$$MarkePlaceLang=DE; JSESSIONID=B459541362241F66D9312AF157262D25

这里是来自 c# 的帖子：

> POST 同上 Content-Type: multipart/form-data; 边界=----------8cf828671b8365c 引用：一些 url 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 User-Agent: Mozilla/5.0 ( Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.220 Safari/535.1 Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3接受编码：gzip，放气主机：与上面相同的主机 Cookie：JSESSIONID=FFE0B7530FFE6A3C8F15FD8A900865B0 内容长度：3847 期望：100-继续连接：保持活动

我能看到的唯一区别是 Expect: 100-continue ... 数据包大小有问题吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:40:59.650

您必须使用分段上传。这显示在您的浏览器帖子中：

```
 Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryP3Ti6rxYcN1ov7JD 
```

这是一个示例： [使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

这是有道理的，因为通常图像大小可能大于通常帖子的限制（2KB 或 4KB，我忘了）。

# java - Java 泛型 - Make Generic 扩展 2 个接口

> ID：13101991
> 
> 赞同：51
> 
> 时间：2012-10-27T16:31:09.833
> 
> 标签：java, class, generics, interface

你如何使这项工作：

```
public class Frankenstein<T extends IHuman, IMonster>{
} 
```

无需制作

```
public interface Weirdo extends Ihuman, IMonster{
} 
```

**编辑**

为什么这不起作用？

```
public <T> void mapThis(
        Class<? extends MyClass<T>> key, Class<? extends T & IDisposable> value) {

} 
```

我将编译器消息标记`Class<? extends T & IDisposable>`为错误。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-11-07T00:41:52.033

Reimeus 已经指出，您在编辑中要求的内容是不可能的。我只是想稍微解释一下为什么。

有人会认为您可以使用以下内容：

```
public <T, U extends T & IDisposable> void mapThis(
        Class<? extends MyClass<T>> key,
        Class<? extends U> value
) { ... } 
```

事实上，这就是我第一次看到这篇文章时想到的。但这实际上给出了编译器错误：

> 类型变量后面不能有其他界限

为了帮助我解释原因，我想引用 Victor Rudometov 关于此错误的[Oracle 博客文章](https://blogs.oracle.com/vr/entry/a_type_variable_may_not)：

> 这个事实并不总是很清楚，但确实如此。以下代码不应编译：
> 
> `interface I {}`
> 
> `class TestBounds <U, T extends U & I> {`
> 
> `}`
> 
> 因为 JLS 第 4 章类型、值和变量第 4.4 节类型变量指出：“*边界由类型变量**或**类或接口类型 T 可能后跟进一步的接口类型 I [1]，...，I [n]组成。* ” . 所以可以使用*T extends U, T extends SomeClass & I*，但不能使用*T extends U & I*。此规则适用于所有情况，包括方法和构造函数中的类型变量和边界。

这种限制的原因在一篇密切相关的文章中进行了探讨：[为什么我不能在具有多个边界的类型参数中使用类型参数？](https://stackoverflow.com/q/197190/697449)

总而言之，施加限制是为了“排除某些尴尬情况的出现”（[JLS §4.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.9)）。

有哪些尴尬的情况？[Chris Povirk 的回答](https://stackoverflow.com/a/210992/697449)描述了一个：

> [限制的原因是] 指定非法类型的可能性。具体来说，使用不同的参数两次扩展通用接口。我想不出一个非人为的例子，但是：
> 
> ```
> /** Contains a Comparator<String> that also implements the given type T. */
> class StringComparatorHolder<T, C extends T & Comparator<String>> {
>   private final C comparator;
>   // ...
> }
> 
> void foo(StringComparatorHolder<Comparator<Integer>, ?> holder) { ... } 
> ```
> 
> 现在`holder.comparator`是 a`Comparator<Integer>`和 a `Comparator<String>`。

Chris 还指出了[Sun 错误 4899305](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4899305)，这是一个与此语言限制有争议的错误。它因无法修复而关闭，并附有以下评论：

> 如果类型变量后面可以跟类型变量或（可能是参数化的）接口，则可能会有更多相互递归的类型变量，这很难处理。当绑定只是一个参数化类型时，事情已经很复杂了，例如`<S,R extends Comparable<S>>`. 因此，界限现在不会改变。javac 和 Eclipse 都同意这一点`S&T`并且 `S&Comparable<S>`是非法的。

这就是限制背后的原因。具体解决泛型方法（您的问题涉及），我想进一步指出，类型推断理论上会导致这样的界限无论如何都是毫无意义的。

如果我们重新检查上面假设签名中声明的类型参数：

```
<T, U extends T & IDisposable> 
```

假设调用者没有明确指定`T`and `U`，这可以简化为以下内容：

```
<T, U extends Object & IDisposable> 
```

或者只是这个（细微的区别，但这是[另一个话题](https://stackoverflow.com/q/10339338/697449)）：

```
<T, U extends IDisposable> 
```

这是因为`T`没有任何界限，所以无论传入什么类型的参数，至少`T`总是可以解析为，然后可以。`Object``U`

让我们回过头来说`T`是有界的：

```
<T extends Foo, U extends T & IDisposable> 
```

这可以以相同的方式减少（`Foo`可以是类或接口）：

```
<T extends Foo, U extends Foo & IDisposable> 
```

基于这种推理，就将调用者限制为更具体的参数而言，您尝试实现的语法毫无意义。

### Java 8 之前的附录：

在 Java 8 之前，您正在尝试做的事情有一个用例*。*由于编译器如何推断泛型方法类型参数的限制，我的上述推理不再适用。采用以下通用方法：

```
class MyClass {
    static <T> void foo(T t1, T t2) { }
} 
```

这是一个常见的初学者错误，试图创建一个采用“相同类型”的两个参数的方法。当然，由于继承的工作方式，这毫无意义：

```
MyClass.foo("asdf", 42); // legal 
```

在这里，`T`推断为`Object`- 这与先前关于简化`mapThis`类型参数的推理相匹配。您必须手动指定类型参数才能实现预期的类型检查：

```
MyClass.<String>foo("asdf", 42); // compiler error 
```

**但是，**这是您的用例开始出现的地方，对于具有交错边界的多个类型参数，情况就不同了：

```
class MyClass {
    static <T, U extends T> void foo(T t, U u) { }
} 
```

现在这个调用错误：

```
MyClass.foo("asdf", 42); // compiler error 
```

情况发生了变化——我们必须手动放宽类型参数以使其编译：

```
MyClass.<Object, Object>foo("asdf", 42); // legal 
```

发生这种情况是因为编译器推断方法类型参数的方式有限。出于这个原因，您想要实现的实际上将有一个应用程序来限制调用者的参数。

然而，这个问题似乎已经在 J​​ava 8 中得到修复，`MyClass.foo("asdf", 42)`现在编译没有任何错误（感谢 Regent 指出这一点）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T15:04:56.747

我只是想我会分享我在这些（非常罕见的）情况下使用的技巧：

```
 /**
     * This is a type-checking method, which gets around Java's inability
     * to handle multiple bounds such as "V extends T & ContextAware<T>".
     *
     * @param value initial value, which should extends T
     * @param contextAware initial value, which should extend ContextAware<T>
     * @return a new proxy object
     */
    public T blah(T value, ContextAware<T> contextAware) {
        if (value != contextAware) {
            throw new IllegalArgumentException("This method expects the same object for both parameters.");
        }

        return blah(value);
    } 
```

因此，通过为您试图满足的每个边界要求相同的对象，您可以获得编译时类型检查和完成所有事情的单个对象。诚然，为每个参数传递相同的对象有点愚蠢，但我在我的“内部”代码中非常安全和舒适地这样做。

# c - C：使用缓冲区扫描来自终端的输入

> ID：13101992
> 
> 赞同：-1
> 
> 时间：2012-10-27T16:31:19.117
> 
> 标签：c, string, sockets

我正在尝试用 C 编写一个客户端/服务器程序来完成家庭作业。应该发生的是：建立连接 服务器等待客户端发送消息 客户端向用户询问消息，将其分配给字符串，然后将其发送到服务器。这是在客户端的以下代码中完成的：

```
while(1){
/* prepare message */
    printf ("Please enter the message: ");
    bzero (buffer, BUFFERLENGTH); //BUFFERLENGTH is defined as 256
    fgets (buffer, BUFFERLENGTH, stdin);
/* send message */
    n = write (sockfd, buffer, strlen(buffer));
    if (n < 0) 
         error ("ERROR writing to socket");
    bzero (buffer, BUFFERLENGTH);
} 
```

现在，我的问题是这段代码发送了一些乱码。据我所知，缓冲区没有被清空，或者并不总是 BUFFERLENGTH 长，所以是从堆栈中读取随机垃圾吗？

服务器收到消息，然后打印它。如果客户端程序扫描进来，`"actual string I input"`那么服务器将输出类似于：

`actual string I input @&^%~&`尽管终端输出更多的是不可打印的字符，而且还有换行符。服务器的代码是：

```
n = read (*newsockfd, buffer, BUFFERLENGTH -1);
printf("buffer = %s\n",buffer);
if (n < 0) 
    error ("ERROR reading from socket"); 
```

但是，当我删除 while 循环时，这不会发生！

我读过 bzero 并且知道它已被弃用，我应该使用 memset；但是我尝试这样做，使用：`memset(buffer,0,BUFFERLENGTH);` 并且问题仍然存在。

关于为什么缓冲区附加了乱码的任何解释？

* * *

编辑

缓冲区通过以下方式在客户端中声明：`char buffer[BUFFERLENGTH];` `

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:34:49.563

`printf("%s", ...)`需要一个以 0 结尾的字符串。

因此，您应该将 a 附加`0`到您收到的缓冲区的末尾。

**更新：**

假设缓冲区定义如下：

```
char buffer[BUFFERLENGTH]; 
```

要将 a 添加`0`到最后一个数组条目，请执行以下操作：

```
buffer[BUFFERLENGTH - 1] = 0; 
```

* * *

一种更通用的方法（尽管成本更高）是在读取整个接收缓冲区之前将其清零：

```
memset(buffer, 0, BUFFERLENGTH);
n = read (*newsockfd, buffer, BUFFERLENGTH - 1);
if (n < 0) 
  error ("ERROR reading from socket");
else
  printf("buffer = %s\n", buffer); 
```

# .net - 在 F# 中定义静态类

> ID：13101995
> 
> 赞同：32
> 
> 时间：2012-10-27T16:31:33.723
> 
> 标签：.net, static, f#

是否可以在 F# 中定义包含可重载成员的静态类？`let`模块绑定不能被重载，即使它们被编译成静态类中的静态成员。

`type`declerations 可以包含静态成员，但我不知道类型本身是否可以设为静态。

我目前的解决方案是`type`使用私有构造函数定义 a 并使用它。我想知道是否有一种方法可以根据需要定义静态类型。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-16T15:14:09.643

正如 Robert Jeppeson 所指出的，C# 中的“静态类”只是创建一个不能被实例化或继承的类的简写，并且只有静态成员。以下是在 F# 中完全实现这一点的方法：

```
[<AbstractClass; Sealed>]
type MyStaticClass private () =
    static member SomeStaticMethod(a, b, c) =
       (a + b + c)

    static member SomeStaticMethod(a, b, c, d) =
       (a + b + c + d) 
```

这可能有点矫枉过正，因为`AbstractClass`私有构造函数和私有构造函数都会阻止您创建该类的实例，但是，这就是 C# 静态类所做的 - 它们被编译为具有私有构造函数的抽象类。该`Sealed`属性阻止您从此类继承。

如果以 C# 中的方式添加实例方法，此技术不会导致编译器错误，但从调用者的角度来看，没有区别。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-25T18:49:41.957

这在[F# 组件设计指南](http://fsharp.org/specs/component-design-guidelines/)中进行了解释。

```
[<AbstractClass; Sealed>]
type Demo =
    static member World = "World"
    static member Hello() = Demo.Hello(Demo.World)
    static member Hello(name: string) = sprintf "Hello %s!" name

let s1 = Demo.Hello()
let s2 = Demo.Hello("F#") 
```

仍然可以定义实例方法，但是当没有可用的构造函数时，您无法实例化该类。

2021 年 1 月编辑：查看 Abel 的评论和链接的问题。Joel Mueller 的回答似乎是迄今为止最好的建议，但未来情况可能会发生变化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-27T16:45:09.523

在 F#中没有定义*静态类型的工具。*

第一种选择是定义一个模块，但它缺乏重载函数的能力（这是你所追求的）。第二种选择是用静态成员声明一个普通类型。

关于第二种方法，这正是您对旧问题[的公认答案所描述的。](https://stackoverflow.com/a/12972293/634025)我重构了代码以更容易地解释它。首先，定义了一个虚拟的单案例可区分联合：

```
type Overloads = Overloads 
```

其次，您利用了静态成员可以重载的事实：

```
type Overloads with
    static member ($) (Overloads, m1: #IMeasurable) = fun (m2: #IMeasurable) -> m1.Measure + m2.Measure 
    static member ($) (Overloads, m1: int) = fun (m2: #IMeasurable) -> m1 + m2.Measure 
```

第三，使用`inline`关键字将这些重载方法的约束传播到 let-bounds：

```
let inline ( |+| ) m1 m2 = (Overloads $ m1) m2 
```

当您能够使用此方法重载 let-bounds 时，您应该创建一个包装模块来保存这些函数并标记您的类型`private`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-27T23:11:12.017

我不确定是否有静态类之类的东西。我相信，C# 中类级别的“静态”是在 2.0 中引入的，主要是为了方便（避免私有构造函数和编译时检查不存在实例成员）。您无法检查类型并得出结论它是静态的：http: [//msdn.microsoft.com/en-us/library/system.reflection.typeinfo.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.typeinfo.aspx)

更新：MSDN 声明一个静态类是一个密封的类，只有静态成员： http: [//msdn.microsoft.com/en-us/library/79b3xss3 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/79b3xss3(v=vs.80).aspx)

所以，你现在正在做的就是做它的方法。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-30T20:08:51.573

我认为这里的问题是试图将 F# 变成 C#。如果不能以非命令方式解决问题，请使用 C# 或编写面向对象的库并在 F# 中使用它。

# sass - Compass 扩展等效于 config.rb

> ID：13101996
> 
> 赞同：2
> 
> 时间：2012-10-27T16:31:48.400
> 
> 标签：sass, compass-sass

在我的 Compass 末尾，我`config.rb`有一个生成随机数的小片段。这行得通。当我在我的项目 Sass 文件夹中有代码片段和 Sass 时，我可以让它工作。

我正在尝试使用此功能创建扩展，但我不知道将代码放在哪里，以便我的 mixins 中`extensions/my-extension/stylesheets/`，并且希望任何导入扩展的 Sass 文件都可以访问它。

我已经尝试过`extensions/my-extension/lib/whatever.rb`，但我仍然遇到错误。我也尝试将代码段放入 中`config.rb`，但将 mixins/Sass 保留在扩展中，但这也不起作用。

在这两种情况下，我得到的错误是`Undefined operation: "random() times 1%".)`

类似于 结尾的地方在哪里`config.rb`，但用于扩展？我是否需要以某种方式将其导入我的扩展程序的 Sass 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T19:41:58.113

查看本[教程](http://compass-style.org/help/tutorials/extensions/)，特别是标题为“库文件位置”的“高级布局选项”小节。它列出了三个不同的选项：

> 1.  `my_extension/compass_init.rb`
> 2.  `my_extension/lib/my_extension.rb`（注意：如果您作为 ruby​​gem 分发，则必须使用这个。）
> 3.  `my_extension/my_extension.rb`

将您的随机数函数添加到这些文件中的任何一个都应该有效。

# java - 检查 ArrayList 是否包含特定的 JSON 对象

> ID：13101997
> 
> 赞同：0
> 
> 时间：2012-10-27T16:31:49.370
> 
> 标签：java, json, arraylist

我有 ArrayList，我想检查是否`ArrayList`包含特定的 JSON 对象。我试过类似的东西

```
if (list.contains(jsonObject)) {
   // Do something
} 
else {
  // DO somethings else
  System.out.println("JSON object added");
} 
```

但是，如果我创建了两个相同的 JSON 对象，结果总是条件为假。有可能这样做吗？如果不是，解决我的问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:36:44.347

结果为假，因为它是另一个 Java 对象（这意味着它有另一个哈希码）。如果你想比较列表中的类型，你必须实现 hashCode() 和 equals()。Eclipse 为此提供了一个函数：
Source -> 生成 hashCode() 和 equals()。