# StackOverflow 问答 13232000-13232999

# ruby-on-rails - 如何修改设计以使用不同的 json 从终端登录用户？

> ID：13232001
> 
> 赞同：1
> 
> 时间：2012-11-05T12:20:04.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我用

```
curl -H 'Content-Type: application/json'   -H 'Accept: application/json'   -X POST http://localhost:3000/login.json  -d "{"user" : { "email" : "sample@gmail.com", "password" : "password"}}" 
```

它给出了`token`和`email`id 作为输出，但我怎样才能得到同样的东西

```
curl -H 'Content-Type: application/json'   -H 'Accept: application/json'   -X POST http://localhost:3000/login.json  -d "{ "email" : "sample@gmail.com", "password" : "password"}" 
```

我如何修改设计以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:50:58.640

你的问题有点令人困惑。标题表明您正在创建一个新用户，但 URI 和数据表明您正在尝试将某人登录到该站点。这是完全不同的功能并使用不同的控制器。

话虽如此，我通常会在我的控制器中使用[wrap_parameters](http://api.rubyonrails.org/classes/ActionController/ParamsWrapper/ClassMethods.html#method-i-wrap_parameters)执行此操作。

```
UsersController < ApplicationController
  wrap_parameters include: [:email, :password]
end 
```

这会将电子邮件和密码参数包装在“用户”命名空间中，就像您以这种方式发出请求一样。

# javascript - 用表格改变 div 空间

> ID：13232003
> 
> 赞同：2
> 
> 时间：2012-11-05T12:20:08.080
> 
> 标签：javascript, html

假设我有这三个空白开头的空格。我想在 JavaScript 中使用 innerHTML 进行更改。

```
<p id="topname"></p>
<div id="table"></div> 
<p id="botname"></p>

document.getElementById("topname").innerHTML = "Boy"; 
document.getElementById("botname").innerHTML = "Girl"; 
```

我设法用 innerHTML 更改了 topname 和 botname。如何更改*div id="table"*以显示 x by y（2x2、4x4、8x8 等）表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:25:34.520

建议不要将 a*替换*为`<div>`a `<table>`，而是将 a 创建`<table>`为 的子节点。`<div>`只要您没有向 the 添加其他样式`<div>`（如填充或边距），这对显示没有影响。

建立几个循环`<tr>`并将`<td>`完成这项工作。这是一个接受 x 和 y 的函数：

```
function makeTable(rows, cols) {
  // Create a table node
  var tbl = document.createElement('table');
  // Make a <tr> for each row
  for (var i=0; i<rows; i++) {
    var tr = document.createElement('tr');
    // And make a <td> for eah col
    for (var j=0; j<cols; j++) {
      var td = document.createElement('td');
      // Append them to the current tr
      tr.appendChild(td);
    }
    // Append the row
    tbl.appendChild(tr);
  }
  return tbl;
}

// Create a new 2x4 table with the function
var newTable =  makeTable(2, 4);
// And append it as a child to the <div id='table'>
document.getElementById('table').appendChild(newTable); 
```

### [这是在行动](http://jsfiddle.net/ehgYL/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:21:12.903

首先，将您的更改`div`为`table`手动：

```
<table id="table"></table> 
```

使用以下代码，您可以填充`table`行和列：

```
document.getElementById("table").appendChild(makeTable(2, 4));

function makeTable(rows, cols) {

    var table = document.createDocumentFragment(), tr = document.createElement("tr"), td = document.createElement("td"), i, j;

    for(j = 0; j < cols; j++) tr.appenChild(td.cloneNode(true));

    for(i = 0; i < rows; i++) table.appendChild(tr.cloneNode(true));

    return table;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:24:27.327

您应该能够以相同的方式执行此操作，但是，该 div id 可能会给您带来问题。TABLE 本身就是一个 html 实体。我会重命名它。

```
document.getElementById("table").innerHTML = "<table><caption>Caption</caption><thead>Table Header</thead><tfoot>Table Footer</tfoot><tbody><tr><td>1</td><td>2</td></tr><tr><td>3</td><td>4</td></tr></tbody></table>"; 
```

以及上面暗影法师所说的。最好使用正确的工具来完成这项工作。我的回答是，如果您坚持在 div 中执行此操作。

# validation - 如何验证开始日期应大于 yii 中的当前日期

> ID：13232006
> 
> 赞同：2
> 
> 时间：2012-11-05T12:20:11.773
> 
> 标签：validation, yii

我有一个表格，其中有一个开始日期字段。我需要使用 yii 验证规则检查输入的开始日期是否大于当前日期。

任何人都可以帮助我这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:53:30.997

这可能有效（需要添加到模型规则中）

```
array('startDate', 'compare', 'compareValue' => date("Y-m-d"), 'operator' => '>'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T03:02:48.957

```
 $date_today          = date('Y-m-d', strtotime(' -1 day')); 
                           // -1, -2 depend on how back you want to go!!
  $date_today          = date("m/d/Y", strtotime($date_today));

   return [   
        [
          'alert_start_date', 'compare', 'compareValue' => $date_today, 
                                                 'operator' => '>',   
          'message' => $attribute.'Alert Start Date Cannot be a date in the past'
        ], 
    ]; 
```

# java - 将 Json 映射到 POJO

> ID：13232007
> 
> 赞同：0
> 
> 时间：2012-11-05T12:20:16.397
> 
> 标签：java, android, gson

```
{
    "Filters": [{
        "Decription": "Default",
        "FieldSelected": {
            "AppointmentDate": true,
            "AppointmentDateOrder": 1            
            "ptStatusOrder": 3
        },
        "FilterID": 1
    }, {
        "Decription": "chart",
        "FieldSelected": {
            "AppointmentDate": true,
            "AppointmentDateOrder": 1,           
            "ptStatusOrder": 0
        },
        "FilterID": 2
    }]
} 
```

我得到了这个结构的响应，我如何将它映射到我的 POJO 类。任何人都可以为这个结构提供一个示例`POJO`类。`json`我正在使用`Gson`请求和响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:29:05.657

只需将一个 Json 对象映射为 Java 类。并将对象数组作为列表..

像，（仅限伪代码）

您正在使用**GSON**库，因此`SerializedName`请在您的 pojo 类中导入。

```
import com.google.gson.annotations.SerializedName; 
```

Pojo 类看起来像，

```
public class Filter {

    @SerializedName("Decription") // This requires same as your Json key 
    public String description;
    @SerializedName("FieldSelected") // The Json Object of FieldSelected
    public Field listDetails;

}

public class Field {
    @SerializedName("ptStatusOrder")
    public int status;
    @SerializedName("AppointmentDateOrder")
    public int dateOrder;
    @SerializedName("AppointmentDate")
    public boolean appDate;
} 
```

和主要的**ListFileter**类，

```
public class ListFilter {

        @SerializedName("Filters") 
        public List<Filter> listFilter;

    } 
```

在 Android 代码中，

```
Gson gson = new Gson();
ListFilter listFilter = gson.fromJson(jsonResponse, ListFilter.class); 
```

# jquery - 修复了使用 scrollToFixed 插件进入相邻浮动 div 的 div

> ID：13232015
> 
> 赞同：0
> 
> 时间：2012-11-05T12:20:34.703
> 
> 标签：jquery, css, scroll, css-float

我正在使用 [scrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)插件来修复 div 的位置。这是我正在使用的html代码

```
<div id="header">
</div><!-- header -->
<div class="clear"></div>
<div id="nav-top">
</div><!-- end nav-top -->
<div id="content">
    <div id ="nav-left">
    </div><!-- end nav-left -->
    <div id ="main-content">
    </div><!--end main-content -->
    <div class="clear"></div>
</div><!-- end content -->
<div id ="footer">
</div> 
```

和CSS

```
 *{
    margin:0px;
    padding:0px;
}
ul,li{
    list-style-type:none;
}
body{
    min-width:1024px;
    background-color:#F3F4F8;
    font-family:Verdana;
}
#header{
    width:100%;
    height:60px;
}
#nav-top{
    width:100%;
    height:30px;
    background-color:#1F415A;
}
#content{
    width:1024px;
    margin-left: auto;
    margin-right:auto;
    /*min-height:px;*/
    margin-top:30px;
    z-index: 1;
    position:relative;
}
#content #nav-left{
    width:172px;
    min-height:550px;
    border:1px solid #DBDFE8;
    float:left;
    background-color:#fff;
    position:fixed;
}
#content #main-content{
    /*margin-right:184px;*/
    float:right;
    width:828px;
    min-height:550px;
    border:1px solid #DBDFE8;
    background-color:#fff;
}
#footer{
    width:1024px;
    margin-right:auto;
    margin-left:auto;
    margin-top:20px;
    border-top:1px solid #B7B8BD;
    height:85px;
    padding:5px;
    font-size:10px;
    color: #6F7072; 
}
.clear{
    clear:both; 
} 
```

和 jquery 代码在这里

```
$(document).ready(function(){  
        $('#nav-top').scrollToFixed();
        $('#nav-left').scrollToFixed({ marginTop:60,
        limit : $('#footer').offset().top - $('#nav-left').outerHeight() -19 - $('#nav-left').offset().top
        });
    }); 
```

**问题：**当窗口宽度等于或小于 1024px 时，它工作得非常好，但是当窗口宽度大于 1024px 时，这里与[jsFiddle](http://jsfiddle.net/GHtRQ/)`nav-left`重叠，同样尝试将文档的宽度扩大到 1024px 以上，你可以看到区别。请帮帮我。`main-content`

**编辑：**而且我需要避免`footer`进入，`nav-left`所以我必须使用`limit`in `scrollToFixed`。如果我删除限制重叠`nav-left`on to`main-content`会停止，但它会使`footer`to 重叠`nav-left`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:11:35.863

您需要检测滚动条并相应地删除 scrollFixed 位置。我添加了以下代码：

```
 $(window).resize(function() {

        if ($("body").width() > $(window).width()) {

            $('#content #nav-left').trigger('remove.ScrollToFixed');
        }
    }); 
```

这是**[工作演示](http://jsfiddle.net/GHtRQ/25/)**

# php - 在 Silex 中建模业务逻辑的最佳方法是什么？

> ID：13232017
> 
> 赞同：1
> 
> 时间：2012-11-05T12:20:38.470
> 
> 标签：php, model-view-controller, soa, silex

我不确定我是否对 Silex 的整体概念正确存储“业务逻辑”的位置，这与持久性、视图等没有直接关系。

示例：在我的“演示应用程序”中，我需要一种生成 n 个唯一数字的方法。我需要模板中的这些数字来包含部分模板。我创建了一个 RandomNumberServiceProvider，它可以返回 x 和 y 之间的 n 个数字。在我的 $app-closure 中，我使用了这项服务，将随机数分配给了我的树枝模板。完毕。

更复杂的示例：假设您必须开发一个“复杂”的导入功能。您必须从磁盘读取数据，验证数据，以某种方式对其进行转换，最后将其存储到数据库中。在这种情况下，您还会创建一个 ImportServiceProvider 来访问其他服务（用于持久性......）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:03:00.117

类似的东西，是的。

不过，我建议不要注入完整的服务，而是只注入工厂。这样，您可以防止应用程序逻辑在控制器（或它们的等价物）中泄漏，同时保持域对象专注于特定任务。

```
$factory = new \My\ServiceFactory( /* ..dependencies */ );

// --- SNIP

$app->get('/foo/{bar}', function ($app, $bar) use ($factory) {

    $someService = $factory->build( ... );
    // do something with $someService

    return new Response(...);
}); 
```

# php - 使用 PHPExcel 下载时获取损坏的 xls 文件

> ID：13232020
> 
> 赞同：4
> 
> 时间：2012-11-05T12:20:53.273
> 
> 标签：php, phpexcel

在我当前的项目中，我使用 PHPExcel 1.7.8 将数据导出到 excel 中。根据建议，我在我的项目中成功配置它并成功生成 xls 文件并存储它，但是当我尝试下载 xls 文件时，我损坏了 xls 文件而没有收到任何错误消息。我有以下相同的代码。

```
/** Error reporting */
if (PHP_SAPI == 'cli')
     die('This example should only be run from a Web Browser');

/** Include PHPExcel */
require_once '../Classes/PHPExcel.php';

// Create new PHPExcel object
$objPHPExcel = new PHPExcel();

// Set document properties
$objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
      ->setLastModifiedBy("Maarten Balliauw")
      ->setTitle("PHPExcel Test Document")
      ->setSubject("PHPExcel Test Document")
      ->setDescription("Test document for PHPExcel, generated using PHP classes.")
      ->setKeywords("office PHPExcel php")
      ->setCategory("Test result file");

// Add some data
$objPHPExcel->setActiveSheetIndex(0)
         ->setCellValue('A1', 'Hello')
         ->setCellValue('B1', 'world!')
         ->setCellValue('C1', 'Hello')
         ->setCellValue('D1', 'world!');

// Miscellaneous glyphs, UTF-8
$objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A2', 'Miscellaneous glyphs')
            ->setCellValue('B2', 'This is test text by me');

// Rename worksheet
$objPHPExcel->getActiveSheet()->setTitle('Simple');

// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0);

// Redirect output to a client’s web browser (Excel5)
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=\"filename.xls\"");
header("Cache-Control: max-age=0");

// Save Excel 2007 file
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save(str_replace('.php', '.xls', __FILE__));
$objWriter->save("php://output");
exit; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-02T08:16:39.780

你能试试这个吗？就在你之前

```
header("Content-Type: application/vnd.ms-excel");
header("Content-Disposition: attachment; filename=\"filename.xls\"");
header("Cache-Control: max-age=0"); 
```

把`ob_end_clean();`.

您的输出缓冲区可能有问题。

# youtube-api - youtube 分析 api 中是否提供视频的分钟观看时间？

> ID：13232022
> 
> 赞同：0
> 
> 时间：2012-11-05T12:21:00.230
> 
> 标签：youtube-api

如果可以从**youtube 分析 api获得****观看分钟**数指标，我无法从文档 (https://developers.google.com/youtube/analytics/v1/available_reports) 中找到。如果可以检索到，您可以将要查询的端点指定为 吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:57:38.677

定时观看不是 api 提供的当前指标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-16T13:58:49.647

在 Analytics API 的 v2 下，有一个称为`estimatedMinutesWatched`现在可以提供该信息的指标。在developers.google.com/youtube/analytics/metrics 上有更多信息**

# abcpdf - 用 abcpdf 模糊图表

> ID：13232026
> 
> 赞同：3
> 
> 时间：2012-11-05T12:21:28.843
> 
> 标签：abcpdf

我正在尝试使用 ABCpdf 将 HTML 页面导出为 PDF。文本转换正常，但图表非常模糊。我试过增加字体大小，但它帮助很小。有什么解决办法？

编辑：如果有帮助，我正在使用 asp.net 图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:23:13.127

您需要以更高的 DPI 输出图表。不确定您是否可以使用 abcpdf 执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:26:49.893

我假设您的聊天是图像？如果是这样，模糊的原因是 HTML 图像上的 DPI 是 72 DPI，而渲染的 pdf 的 DPI 是 300 DPI。

我知道的唯一方法是让 HTML 中的图像具有更高的分辨率（300 DPI），然后在页面上通过设定的高度和宽度减小尺寸。当 ABCPdf 导入图像时，它将下载源代码并看起来更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T20:51:15.773

其他答案在正确的轨道上，但并不完全在那里。

浏览器“通常”以 96 DPI 显示内容。这取决于设置，但我们可以在这里假设。PDF 将缩放到 72 DPI。因此，您需要将 Rect 设置为浏览器宽度的 3/4。然后您的图像将看起来正确。

作为副作用，您最终可能需要更高分辨率的图像才能获得所需的尺寸（您可以通过相反的方式增加图像的分辨率，即增加 4/3 倍以实现与您想要的相同在浏览器中查看）。

使用下面的代码，您的图像将永远不会模糊（尽管您可能需要调整预期的文档宽度；宽度为 612pt @ 72 DPI（例如，字母大小的纵向）的 PDF 需要由浏览器宽度支持816px @ 96 DPI）：

```
const Double pdfDpi = 72;
const Double browserDpi = 96;
var browserToPdfDpiRatio = BrowserDpi / PdfDpi;

pdf.HtmlOptions.BrowserWidth = (Int32)Math.Round(pdf.Rect.Width * browserToPdfDpiRatio, 0); 
```

# google-apps-script - 创建自定义字段时出错

> ID：13232028
> 
> 赞同：0
> 
> 时间：2012-11-05T12:21:38.573
> 
> 标签：google-apps-script

我有一个脚本为我的联系人使用自定义字段。它会在生日前一周给我发一封邮件，里面有选项。（提醒）

在生日本身，脚本可以向此人发送电子邮件。

但我收到自定义字段错误：

```
> Exception on line: 157 -> Service error: ContactsApp: Mismatch: etags = [&quot;RHY5cTVSLit7I2A9WhNREUwPTgU.&quot;], version = [1352115891110001] 
```

如果我运行脚本两次，它就消失了。每次都会添加自定义字段。

代码是这样的：

```
function getMonth(month_num) {
  var month;
  switch (month_num) {
    case 1:
      month = ContactsApp.Month.JANUARY;
      break;
    case 2:
      month = ContactsApp.Month.FEBRUARY;
      break;
    case 3:
      month = ContactsApp.Month.MARCH;
      break;
    case 4:
      month = ContactsApp.Month.APRIL;
      break;
    case 5:
      month = ContactsApp.Month.MAY;
      break;
    case 6:
      month = ContactsApp.Month.JUNE;
      break;
    case 7:
      month = ContactsApp.Month.JULY;
      break;
    case 8:
      month = ContactsApp.Month.AUGUST;
      break;
    case 9:
      month = ContactsApp.Month.SEPTEMBER;
      break;
    case 10:
      month = ContactsApp.Month.OCTOBER;
      break;
    case 11:
      month = ContactsApp.Month.NOVEMBER;
      break;
    case 12:
      month = ContactsApp.Month.DECEMBER;
      break;
  }
  return(month);      
}

function getMonthT(month_num) {
  var monthT;
  switch (month_num) {
    case 1:
      monthT = "januari";
      break;
    case 2:
      monthT = "februarie";
      break;
    case 3:
      monthT = "maart";
      break;
    case 4:
      monthT = "april";
      break;
    case 5:
      monthT = "mei";
      break;
    case 6:
      monthT = "juni";
      break;
    case 7:
      monthT = "juli";
      break;
    case 8:
      monthT = "augustus";
      break;
    case 9:
      monthT = "september";
      break;
    case 10:
      monthT = "oktober";
      break;
    case 11:
      monthT = "november";
      break;
    case 12:
      monthT = "december";
      break;
  }
  return(monthT);      
}

function sendReminderBirthday() {
  try {
    var date = new Date;
    for (var loop=0; loop<2; loop++) {
      if (loop==1) {
        date.setDate(date.getDate()+7)
      }
      var month_num = date.getMonth()+1;
      var day = date.getDate();
      var month = getMonth(month_num);
      var monthT = getMonthT(month_num);
      for (var cf=0; cf<2; cf++) {
        if (cf==0) {
          var CAF = ContactsApp.Field.BIRTHDAY;
          var event = "Verjaardag";
          var bodyReminderEvent = "De jarige wordt ";
          var bodyReminderEventX = " jaar oud. Geboren in het jaar ";
          var bodyEvent = "verjaardag";
          var bodyEventX = "je";
          var pictureBlob = UrlFetchApp.fetch("http://s13.postimage.org/548mzsu2v/Verjaardag.jpg").getBlob().setName("pictureBlob");
        } if (cf==1) {
          var CAF = ContactsApp.Field.ANNIVERSARY;
          var event = "Trouwdag";
          var bodyReminderEvent = "De trouwdag is ";
          var bodyReminderEventX = " jaar geleden. Ze zijn getrouwd in het jaar ";
          var bodyEvent = "trouwdag";
          var bodyEvent = "jullie";
          var pictureBlob = UrlFetchApp.fetch("http://s13.postimage.org/hhlh6pjrb/trouwdag.jpg").getBlob().setName("pictureBlob");
        }

        var contacts = ContactsApp.getContactsByDate(month, day, CAF);
        var myEmail = Session.getEffectiveUser().getEmail();

        for (var i=0; i<contacts.length; i++) {
          if (contacts[i]) {
            var nickname = contacts[i].getNickname();
            var givenname = nickname || contacts[i].getGivenName();
            var fullname = contacts[i].getFullName();
            var primaryEmail = contacts[i].getPrimaryEmail();
            var note = contacts[i].getNotes() || "Geen notitie's aanwezig";
            var contactID = contacts[i].getId();
            var contactID = contactID.replace("http://www.google.com/m8/feeds/contacts/dennis.pater%40gmail.com/base/", "");
            var dateEvent = date.getDate() + " " + monthT;
            var datesContact = contacts[i].getDates(CAF);
            for (var dc=0; dc<datesContact.length; dc++) {
              if (datesContact[dc]) {
                var dateContactY = datesContact[dc].getYear();
              }
            }
            var age = date.getYear() - dateContactY;

            var sendBirthdayMails = contacts[i].getCustomFields("Auto Mail");
            for (var s=0; s<sendBirthdayMails.length; s++) {
              if (sendBirthdayMails[s]) {
                var sendBirthdayMail = sendBirthdayMails[s].getValue();
              }
            }
            if (s==0) {
              contacts[i].addCustomField("Auto Mail", "Nee");
              var sendBirthdayMail = "Nee";
              var CustumField = "";
            }

            var sendPostcards = contacts[i].getCustomFields("Kaartje?");
            for (var sp=0; sp<sendPostcards.length; sp++) {
              if (sendPostcards[sp]) {
                var sendPostcard = sendPostcards[sp].getValue();
              }
            }
            if (sp==0) {
              contacts[i].addCustomField("Kaartje?", "Nee");
              var sendPostcard = "Nee";
            }

            var GetPressents = contacts[i].getCustomFields("Cadeau?");
            for (var gp=0; gp<GetPressents.length; gp++) {
              if (GetPressents[gp]) {
                var GetPressent = GetPressents[gp].getValue();
              }
            }
            if (gp==0) {
              contacts[i].addCustomField("Cadeau?", "Nee");
              var GetPressent = "Nee";
            }
            var EmailBody = "";
            if (sendBirthdayMail=="Ja") {
              var EmailBody = "Hallo " + givenname + ", <br/><br/>"
                  + "Van harte gefeliciteerd met je "+ age + "e " + bodyEvent + ". Wij wensen " + bodyEventX + " een hele fijne dag toe. <br/><br/>"
                  + "<img src='cid:picture'> <br/><br/><br/>"
                  + "Groetjes, <br/>"
                  + "Dennis & Minou";
              if (loop==0) {
                MailApp.sendEmail(primaryEmail, "Van harte", "", {htmlBody: EmailBody, bcc:myEmail, inlineImages: {picture:pictureBlob} } );
              }
            }
            var Adress = contacts[i].getAddresses(ContactsApp.Field.HOME_ADDRESS);
            for (var a=0; a<Adress.length; a++) {
              if (Adress[a]) {
                var adres = Adress[a].getAddress();
                var adresValue = adresValue + " <br/><br/> " + adres;
              }
            }
            var MailCard = "Kaartje versturen: <b>Nee</b>, wil je toch een kaartje sturen? Kijk even op <a href='http://kaartwereld.nl'>'Kaartwereld'</a>. <br/> <i>" + adres + "</i><br/><br/> ";
            if (sendPostcard=="Ja") {
              var MailCard = "Verstuur een kaartje via <a href='http://kaartwereld.nl'>'Kaartwereld'</a>. <br/>"
                  + "<i>" + adres + "</i><br/><br/";
            }

            if (loop==1){
              if (GetPressent=="Ja") {
                var Title = "Dennis's list";
                var allLists = Tasks.Tasklists.list().getItems();
                var id;
                for (var i in allLists) {
                  if (Title == allLists[i].getTitle()) {
                    id = allLists[i].getId();
                  }
                }

                if (!id) {
                  Logger.log("Tasklist not found"); 
                } else {
                  var tasksName = "Cadeau kopen voor " + givenname;
                  var newTask = Tasks.newTask()
                      .setTitle(tasksName);
                  var inserted = Tasks.Tasks.insert(newTask, id);
                  var getList = Tasks.Tasks.list(id).getItems();
                  for ( var gl in getList) {
                    if (tasksName==getList[gl].getTitle()) {
                      getList[gl].setDue(dateEvent + ", " + dateContactY);
                      getList[gl].setNotes(note);
                    }
                  }

                  var GetPressent = "Ja, de taak is toegevoegd"
                      Logger.log("Task added");
                }
              }
              if (EmailBody==""){
              } else {
                var EmailBody = "<br/><br/><br/><b>Voorbeeld</b><br/>" + EmailBody;
              }
              var ReminderEmailBody = event + " van " + givenname + " op " + dateEvent + ". <br/>" 
                  + bodyReminderEvent + age + bodyReminderEventX + dateContactY + ". <br/><br/>" + MailCard
                  + "Moeten we hiervoor even een cadeautje ophalen: <b>" + GetPressent + "</b>. <br/>"
                  + "Ontvangt deze persoon een automatich email bedricht: <b>" + sendBirthdayMail + "</b>. <br/>"
                  + "Notitie's: <br/>"
                  + "<i>" + note + "</i><br/><br/>"
                  + "Om de notitie's te wijzigen of andere wijzigingen door te geven kun je de contact <a href='https://mail.google.com/mail/u/0/#contact/" + contactID + "'>" + givenname + "</a> veranderen.<br/><br/>"
                  + "Dennis"
                  + EmailBody;
              MailApp.sendEmail(myEmail, event + " van " + givenname + " op " + dateEvent, "", {htmlBody: ReminderEmailBody, inlineImages: {picture:pictureBlob} });
            } 
        }
      }
    }
  }
  }
  catch (e) {
    //Browser.msgBox("Error: " + e.message);
    MailApp.sendEmail(myEmail, "Error report", e.name + ' on line: ' + e.lineNumber + ' -> ' + e.message);
  }
} 
```

出现错误一：

```
if (sp==0) {
          contacts[i].addCustomField("Kaartje?", "Nee");
          var sendPostcard = "Nee"; 
```

和错误二：

```
 if (gp==0) {
              contacts[i].addCustomField("Cadeau?", "Nee");
              var GetPressent = "Nee";
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:19:22.683

这是一个已知问题，已在问题跟踪器中归档，但尚无状态更新。在此处添加您的星标和评论以提高其优先级。

检查[问题 1528](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1528)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:14:16.890

我现在已经解决了。

我在函数顶部添加了 try 并以：

```
 catch (e) {
//Browser.msgBox("Error: " + e.message);
MailApp.sendEmail(myEmail, "Error report", e.name + ' on line: ' + e.lineNumber + ' -> ' + e.message + "your link/ text");
var x = x || 0;
if (x == 12) {
  return;
}
var x = x+1;
var restart = sendReminderBirthday(x); 
```

}

# java - 发送 0xFF 并计算带符号字节的 CRC - WriteSingleCoil & ModBUS & Java & Android -

> ID：13232031
> 
> 赞同：3
> 
> 时间：2012-11-05T12:21:53.617
> 
> 标签：java, android, outputstream, crc, modbus

**编辑和解决（下）**

我正在使用 Java for Android 尝试将字节 255（WriteSingleCoil 函数中的 0xFF）发送到 ModBUS 服务器设备。

设备没有运行，我不知道是因为无法解释有符号字节 -1 还是因为我错误地计算了 CRC。我不知道如何计算负字节的 CRC。

总结：我不知道如何发送函数 05 Write Single Coil with 0xFF value for switch on the coil for from Java to ModBUS server。

任何人都可以帮助我吗？

**解决方案：**

> " iIndex = ucCRCLo ^ b: 这样的操作必须写成 iIndex = (ucCRCLo ^ b)&0xff 因为 & 会将 ucCRCLo, b 和结果转换为 int，它是 32 位，而 short 是 16，所以你会有很多额外位设置为 1"

这个答案帮助了我。非常感谢[TheDayOfcondor](https://stackoverflow.com/users/1767992/thedayofcondor)

但我最大的问题也是Java中带有符号字节的常见问题。我的 CRC 计算函数对无符号字节是正确的，但如果我在有符号字节内传递它会出错。使用字节进行 ModBUS 通信的技巧是在整个应用程序中使用短字节作为字节，范围为 0-255，甚至计算电车和 CRC。并且仅在最后一步中，将 Trame 发送到 ModBUS 服务器时，再次将它们转换为字节。这正在运行。

希望它对将来的人有所帮助。

**解释问题：**

我正在尝试使用功能 05 将线圈设置为 ModBUS，这是对功能的解释：

要求

我正在尝试在地址 1 上设置线圈：

这个十六进制：0A 05 00 01 ff 00 DC 81

这个字节数组：10 5 0 1 255 0 220 129

10：从地址（10 = 0A hex）

05：功能代码（强制单线圈）

0001：线圈的数据地址。（线圈#1 = 01 十六进制）

FF00：要写入的状态（FF00 = ON，0000 = OFF）

DC81：用于错误检查的 CRC（循环冗余校验）。

问题是 Java 使用有符号字节，所以我不能将 255 放在我的字节数组上。我知道我应该输入 -1，但是我无法正确计算 CRC，因为我有几个预先计算的字节数组来获取 CRC，但函数发送一个负索引。

所以：我不知道我尝试发送-1是否正确，如果我有发送255的替代方法，也不知道如何计算-1的CRC。

这是计算CRC的函数：

```
public short[] GenerateCRC (byte[] pMsg) {
    short ucCRCHi = 0xFF;
    short ucCRCLo = 0xFF;
    int iIndex;

    for (byte b : pMsg)
    {
        iIndex = ucCRCLo ^ b;

        try {
            ucCRCLo = (short)(ucCRCHi ^ aucCRCHi[ ( iIndex ) ]);
            ucCRCHi = aucCRCLo[ ( iIndex ) ];
        } catch (Exception e) {
            Log.e(LOGTAG, "GenerateCRC: " + e.toString(), e);
            e.printStackTrace();
        }
    }

        short[]result= new short[2];
        result0]= ucCRCHi;
        result1]= ucCRCLo;

        return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:28:52.047

问题不是很清楚 - 但是，处理字节的最常见问题是 Java 没有无符号字节，布尔运算总是在 int 之间

处理字节的最好方法是使用整数，并且每次操作都使用 0xff。也使用 >>> 右移（它是无符号版本）

例子：

byte b= (byte)(255 & 0xff) // 给你“无符号字节”

byte b= (byte) ((b<<2)0xff ) // 左移必须被截断

如果您发布代码来计算 CRC，我可以查看一下

在不使用负数的情况下定义字节数组的最佳方法如下：

```
byte[]={ (byte)0xff, (byte)0xff, (byte)0xff }; 
```

# node.js - Nginx+Node.js 有时会在要检索的数据是大数据（>15KB, 64KB）时请求失败

> ID：13232035
> 
> 赞同：0
> 
> 时间：2012-11-05T12:22:13.070
> 
> 标签：node.js, nginx, request

在检索 16KB 或 64KB 之类的大数据时，我在使用 google chrome 和其他浏览器时遇到问题。这种情况并非一直发生，但有时它会发生，然后即使在刷新时也会发生，我必须刷新大约 5 次才能使它有时会起作用。并且只发生在大数据上。所以我真的不知道是什么问题。我注意到它总是在 1.1m 处超时。

在开发人员模式下的网络面板中，当我没有单击任何请求（一般视图）时，我可以通过方法 post 看到我的请求（见图）：

![在此处输入图像描述](../Images/68c7de7a95fd2a0a912c91f08e239c43.png)

在 nginx 错误日志中，它显示如下内容：

> 2012/11/05 12:05:36 [crit] 2344#0: *10327 open() "/var/lib/nginx/proxy/3/16/0000000163" 在读取上游时失败（13：权限被拒绝），客户端：192.168.1.56，服务器：，请求：“POST /production/assembly/rpc?nocache=1352117111478 HTTP/1.1”，上游：“ [http://127.0.0.1:3000/rpc?nocache=1352117111478](http://127.0.0.1:3000/rpc?nocache=1352117111478) ”，主机：“ 192.168.1.17”，引用者：“ [http://192.168.1.17/production/assembly/](http://192.168.1.17/production/assembly/) ”

我发现这个`http://127.0.0.1:3000/rpc?nocache=1352117111478`，因为这`1352117111478`部分是独一无二的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:05:07.443

问题是文件夹“/var/lib/nginx/proxy/3/16/0000000163”只有www-data的权限，这很奇怪，因为没有服务（没有nginx或node.js或mongodb）由www-运行数据用户。无论如何，我发现在 nginx 中更改配置：“user totty”在哪里，我将其更改为“user root”，它可以正常工作！

我仍然不明白为什么有时它有效而其他无效，以及为什么它只与大数据请求相关。也许对于那些大数据被缓存或保存在某个临时文件中并且无法访问..不知道但它现在可以工作。

# java - restfb：Facebook 支付订阅

> ID：13232039
> 
> 赞同：0
> 
> 时间：2012-11-05T12:22:35.140
> 
> 标签：java, subscription, facebook-credits, restfb

据我所知，此功能是全新的，并且仍处于测试阶段。无论如何，阅读developers.facebook中的文档我无法确定是否可以按年付费订阅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T19:11:57.027

好吧，你可以说一个 12 个月的时期。我的意思是，您唯一可用的时间单位是周或年。所以，你的问题的答案是“是”，但你必须这样做的方式是每 12 个月一次。

# c++ - libnids 没有捕获 xmpp 数据包

> ID：13232045
> 
> 赞同：0
> 
> 时间：2012-11-05T12:22:54.830
> 
> 标签：c++, xmpp

该程序可以检测 http 流等......但它忽略了 XMPP 流；我不知道为什么？（我想这是一个端口问题，但我不知道我应该在哪里解决它）

以下是 main.cpp 中的相关部分：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netinet/in_systm.h>
#include <arpa/inet.h>
#include <string.h>
#include <stdio.h>
#include "nids.h"
#include <cstdlib>
#include <unistd.h>

#define int_ntoa(x) inet_ntoa(*((struct in_addr *)&x))

// struct tuple4 contains addresses and port numbers of the TCP connections
// the following auxiliary function produces a string looking like
// 10.0.0.1,1024,10.0.0.2,23
char *
adres (struct tuple4 addr)
{
  static char buf[256];
  strcpy (buf, int_ntoa (addr.saddr));
  sprintf (buf + strlen (buf), ",%i,", addr.source);
  strcat (buf, int_ntoa (addr.daddr));
  sprintf (buf + strlen (buf), ",%i", addr.dest);
  return buf;
}

void
tcp_callback (struct tcp_stream *a_tcp, void ** this_time_not_needed)
{

    printf("packet captured !\n");

}

int 
main ()
{
  // here we can alter libnids params, for instance:
  // nids_params.n_hosts=256;
        struct nids_chksum_ctl nochksumchk;
        nochksumchk.netaddr = 0;
    nochksumchk.mask = 0;
    nochksumchk.action = NIDS_DONT_CHKSUM;
    //char fileName[] = "/home/test.pcap";
        //nids_params.filename =fileName;     
    nids_register_chksum_ctl(&nochksumchk, 1);

        char myDevice [] = "eth0";
        nids_params.device =myDevice;

    if (!nids_init ())
  {
    fprintf(stderr,"%s\n",nids_errbuf);
    exit(1);
  }
  nids_register_tcp ( (void*)tcp_callback);
  nids_run ();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T08:37:20.320

我的 pcap 文件在 tcp 连接中同步存在一些问题。

所以上面的libnids代码段是正确的！

# php - 无法访问 oscommerce 中的前端

> ID：13232047
> 
> 赞同：0
> 
> 时间：2012-11-05T12:22:55.810
> 
> 标签：php, oscommerce

我是 oscommerce 的新手。我有几天前崩溃的网站，为了启动我的网站，我恢复了 Godaddy 中的数据库备份。

现在的问题是我无法访问我的前端，但我可以正确访问后端。每当我尝试访问首页然后显示空白页。

有人知道为什么会这样吗？

当我打开错误报告时，我收到以下错误

**警告：require（includes/languages/affiliate.php）[function.require]：无法打开流：第 72 行的 /home/content/17/10028317/html/includes/affiliate_application_top.php 中没有此类文件或目录**

**致命错误：require() [function.require]：在 /home/content/17/ 中打开所需的 'includes/languages/affiliate.php' (include_path='.:/usr/local/php5/lib/php') 失败10028317/html/includes/affiliate_application_top.php 第 72 行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:34:42.990

正如史蒂夫所说，您缺少文件。丢失的文件是affiliate.php，它应该存储在“includes/languages/”中，请检查是否有。

据我所知，语言文件应保存在“includes/languages/yourlanguagefolder/”中

您可能在 config.php 文件或脚本“includes/affiliate_application_top.php”中有错误，在这种情况下，语言文件的路径在 require 函数中可能是错误的

# android - 媒体扫描仪正在运行

> ID：13232056
> 
> 赞同：1
> 
> 时间：2012-11-05T12:23:27.683
> 
> 标签：android, android-camera, android-gridview, android-mediascanner

在我的应用程序中，用户通过相机功能捕获图像之后，我将在网格视图中更新图像。但是经过长时间搜索后这些图像没有更新，我发现需要手动运行媒体扫描仪。我为此编写代码。但是当我捕获时图像反复出现错误。下面我发布了我的日志猫错误....

```
11-05 17:17:17.565: E/AndroidRuntime(30801): FATAL EXCEPTION: main
11-05 17:17:17.565: E/AndroidRuntime(30801): java.lang.IllegalStateException: not connected to MediaScannerService
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.media.MediaScannerConnection.scanFile(MediaScannerConnection.java:164)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at com.imagedatabase.Category$6.onMediaScannerConnected(Category.java:512)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.media.MediaScannerConnection.onServiceConnected(MediaScannerConnection.java:249)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.app.ActivityThread$PackageInfo$ServiceDispatcher.doConnected(ActivityThread.java:1247)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.app.ActivityThread$PackageInfo$ServiceDispatcher$RunConnection.run(ActivityThread.java:1264)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.os.Handler.handleCallback(Handler.java:587)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.os.Looper.loop(Looper.java:123)
11-05 17:17:17.565: E/AndroidRuntime(30801):    at android.app.ActivityThread.main(ActivityThread.java:4627) 
```

下面我发布了我的代码，我将在其中运行这个代码，并在评论中解释每一步。

```
 enter code here

   public class ButtonClickHandler implements View.OnClickListener {
    public void onClick(View view) {

        //when camera button is pressed it starts 
            startCameraActivity();

    }
}

public void startCameraActivity() {

       //seperating the images with date

    Date date = new Date();
    DateFormat df = new SimpleDateFormat("yyyy-MM-dd-kk-mm-ss");
    String newPicFile = df.format(date);

    direct = new File(Environment.getExternalStorageDirectory() + path
            + "/" + newPicFile + ".jpg");

    outputFileUri = Uri.fromFile(direct);

                           //here i am starting the  camra 

    Intent intent = new Intent(
            android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

    startActivityForResult(intent, 0);

   }

enter code here

      public void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.i("image data base", "resultCode: " + resultCode);
    switch (resultCode) {
    case 0:
                        //when user cancel the image take here i am deleted the urifile

        File file = new File(outputFileUri.getPath());
        boolean deleted = file.delete();

        Log.i("image data based", "User cancelled");
        break;

    case -1:
        onPhotoTaken();

        break;
    }
     } 
```

//在这张照片上我写了媒体扫描仪的代码

```
enter code here
protected void onPhotoTaken() {

    Log.i("MakeMachine", "onPhotoTaken");

    taken = true;
    SharedPreferences path_shared = Category.this.getSharedPreferences(
            "path", MODE_WORLD_WRITEABLE);
    imagePath = path_shared.getString("mypath", "0");

    File newFile = new File(imagePath);
    final Uri outputFileUri = Uri.fromFile(newFile);

    mScanner = new MediaScannerConnection(Category.this,
            new MediaScannerConnection.MediaScannerConnectionClient() {
                public void onMediaScannerConnected() {

        mScanner.scanFile(outputFileUri.getPath(), null /* mimeType */);
                }

                public void onScanCompleted(String path, Uri uri) {

            if (path.equals(outputFileUri.getPath())) {
            mScanner.disconnect();
        // we need to create new UI thread because, we can't
    // update our mail thread from here
        // Both the thread will run one by one, see
                        // documentation of android
            Category.this.runOnUiThread(new Runnable() {
                            public void run() {

                            }
                        });
                    }
                }
            });
    mScanner.connect();
               } 
```

我希望你明白我的意思我也试过了

```
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" + \
      outputFileUri+  Environment. getExternalStorageDirectory()))); 
```

但是我认为它扫描整个 sd 卡有点慢。所以任何人都可以指导我如何运行媒体扫描仪以及我可以在哪里运行我的代码。我搜索了很多，但这些都不能满足我的需求。

# javascript - 简化重复多次的对象数组的方法

> ID：13232060
> 
> 赞同：1
> 
> 时间：2012-11-05T12:23:47.573
> 
> 标签：javascript, arrays, object

我想知道我是否可以为此目的简化和使用更少的代码行：

我有一个名为“worker”的类，该类有一个从一系列简单数组中读取属性（姓名、年龄等）的方法。

直到那里，一切都很好。现在，我要添加的属性之一是一个布尔值，它引用了工作人员在一年中的哪些月份处于活动状态。目前，我已经这样解决了：

```
var months_worker_1 = [{"jan":true},{"feb":true},{"mar":true},{"apr":false}] //and so on 
```

然后，我的属性为`months_worker_1`，但我为每个工人都有一个这样的数组。我想知道是否有一种方法需要更少的代码行，例如，创建一个包含一年中所有月份的“主”数组，并在每个工人的数组中，只指定他们工作的月份. 那些月份变成“真”，其余月份自动变成“假”，没有指定所以......我一直在摸不着头脑，目前只有我当前的系统工作正常，但我猜必须有一个更简单的方法......

非常感谢！

编辑：我澄清一下，没有“大局”。我只是在做一些尝试学习 javascript 的练习，这引起了我的兴趣，因为我认为的解决方案似乎太复杂了（多次重复相同的数组）。我没有需要实现的具体目标，我只是在学习如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:37:28.097

我有时使用的一个非常好的技巧是使用二进制数来跟踪固定数量的标志，并将其转换为十进制以便于存储/ URL 嵌入等。假设用户 Mark 整个月都处于活动状态年。考虑一个二进制数，这`1`意味着“活动”和`0`非活动，马克的标志将是：

`111111111111`（十二个月）

如果 Mark 仅在 1 月、2 月和 12 月期间处于活动状态，则他的标志值将是：

`11000000001`

检查 Mark 在特定月份是否处于活动状态就像检查 Mark 标志中与该月索引对应的字符是否为`1`或一样简单`0`。

过去，这种技术帮助我通过 URL 发送大量标志的值，同时还保持 URL 相当短。当然，您可能不需要这个，但很高兴知道：

在 JS 中从二进制转换为十进制很容易：

```
parseInt(11000000001, 2).toString(10); // returns 1537 
```

反过来：

```
parseInt((1537).toString(2)); // returns 11000000001 
```

**编辑**

您可以轻松地使用由月份数字组成的数组：

```
var months_worker_1 = [1, 2, 3]; // this would mean that the user is active during january, february and march 
```

# django - 无法获得代表

> ID：13232065
> 
> 赞同：2
> 
> 时间：2012-11-05T12:24:01.440
> 
> 标签：django, django-models, django-database

调试告诉我：

```
comments = Comment.get_for_intention(id) 
```

是：

> {QuerySet} 无法获取类 'django.db.models.query.QuerySet' 的代表

评论型号：

```
class Comment(models.Model):
    user = models.ForeignKey(User)
    intention = models.ForeignKey(Intention)
    text = models.TextField()
    created = models.DateTimeField(default=datetime.datetime.now())

    @staticmethod
    def get_for_intention(intention_id):
        return Comment.objects.filter(intention=intention_id)[:10] 
```

我不知道我做错了什么。有人可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:33:51.170

我认为问题是因为意图。它是外键，您想使用所有意图对象。

你应该使用

```
def get_fot_intention(self):
   return self.Intention.intention_id 
```

如果您只想发表评论，则不必定义 get_fot_intention 也不必使用 intent_id ，只需使用意图对象即可。例如，您可以使用它：

```
def intention_detail(request,slug=None):

    intention = get_object_or_404(Intention,slug=slug)
    comments = Comment.objects.filter(intention=intention) 
```

但你必须有意识地打野。

# ios - ios自动布局类似

> ID：13232067
> 
> 赞同：0
> 
> 时间：2012-11-05T12:24:15.247
> 
> 标签：ios, xcode

我对ios很陌生。在编写我的第一个应用程序时，我遇到了自动布局仅适用于 ios 6.0。而且我希望我的应用程序至少适用于 5.0 ios。

也许有人会知道如何在没有自动布局的情况下做到这一点。

我的标签有动态文本，1 行或 2 行或 3 行取决于用户设置。在它下面我有uitextfield。使用自动布局，我不会头疼，因为它可以完成所有工作，文本字段很好地位于上方 1 2 或 3 行文本的下方（调整大小，自动移动）。

那么我应该如何在没有自动布局的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:28:28.897

如果没有自动布局，您必须在代码中处理这个问题。这样做的推荐方法是子类化您的容器视图（包含标签和文本字段的视图）并覆盖该`layoutSubviews`方法。在那里，您可以根据所需的标准（例如，[标签文本 metrics](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)）手动设置视图子视图的框架。

**编辑**：这是方法中可能存在的特定示例`containverView` `layoutSubviews`（从我的头顶输入）：

```
// Those could be IBOutlets, or obtained by inspecting self.subviews
UILabel *label = self.label;
UITextField *textField = self.textField;

// Determine the labelSize, we could limit the maxSize (especially the height) manually here
CGSize maxSize = self.bounds.size;
CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:maxSize lineBreakMode:label.lineBreakMode];

// Set the computed label size
CGRect labelFrame = label.frame;
labelFrame.size = labelSize;
label.frame = labelFrame;

// Now move the textField just below the label (we could also add a vertical margin here if we want)
CGRect textFieldFrame = textField.frame;
textFieldFrame.origin.y = labelFrame.origin.y + labelFrame.size.height;
textField.frame = textFieldFrame; 
```

这只是确保文本字段始终位于标签下方。根据您设置的约束，您可能需要添加更多代码以确保 UI 布局正确。

您还需要确保`[containverView setNeedsLayout]`在标签文本更改时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:04:11.490

如果您使用的是 nib 或 storybord，您可以删除文件检查器中的标记 ![在此处输入图像描述](../Images/4996f805d41973a00069ccd08f76298e.png)

# java - 使用分隔符将 2Gb 大文件读入

> ID：13232068
> 
> 赞同：1
> 
> 时间：2012-11-05T12:24:16.423
> 
> 标签：java

我有一个 2 GB 以上的文件，我需要用分隔符将其拆分，然后将 db 导出为平面文件。

每条记录由 '\u0002\n' 分隔，每个字段由 '\u0001' 分隔

```
FileChannel inChannel = new RandomAccessFile("apps", "r").getChannel();
MappedByteBuffer buffer = inChannel.map(FileChannel.MapMode.READ_ONLY, 0,
                                        inChannel.size()); 
```

阅读有效，但我怎样才能分成每条记录？

# screen - visualworks smalltalk 在画布上显示图形图像

> ID：13232070
> 
> 赞同：2
> 
> 时间：2012-11-05T12:24:22.563
> 
> 标签：screen, show, image, smalltalk

在画布上显示图形图像的正确方法是什么？我有来自以下的对象 aImage：

```
(ImageReader fromFile: 'clockface.jpg') image. 
```

我通过 GUIBuilder(new canvas->install) 创建了名为 ClockWindow 的新类：

```
 (...)superclass: #{UI.ApplicationModel}(...) 
```

和方法初始化：

```
initialize
|img  gc|
img:=(ImageReader fromFile: 'clockface.jpg') image.
img convertForGraphicsDevice: Screen default.
gc := ScreenGraphicsContext new.
img displayOn: gc.
gc displayOn: self. 
```

但我得到了错误：messageNotUnderstood：representImage：anImage forMedium：medium in line with：“img displayOn：gc。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:14:53.190

最简单的方法是使用带有图像的标签。就是这样：

1.  定义一个名为clockFace的类方法，它返回图像

> ```
> clockFace
>   <resource: #image>
>   ^(ImageReader fromFile: 'clockface.jpg') image 
> ```

1.  向 UI 添加标签

2.  点击“标签即图像”

3.  对于消息，使用#clockFace

一直从文件加载钟面图像会很慢。要解决此问题，请转到 clockFace 方法，选择“编辑”，然后在 ImageEditor 中使用“安装”。这将使用将图像存储在方法中的等效方法替换从文件加载图像的代码。

对于额外的布朗尼点，您可以创建另一个类方法来为您提供 CachedImage。CachedImage 将更快地重新显示在 UI 上，因为它不必在每次显示时都将图像转换为屏幕的调色板。只需像这样创建一个名为 clockFaceCachedImage 的类方法：

> ```
> clockFaceCachedImage
>   ^CachedImage on: self clockFace 
> ```

您现在可以使用 clockFaceCachedImage 作为标签的消息。

# php - Chrome上的动态css文件304但FF和IE上的200？

> ID：13232074
> 
> 赞同：0
> 
> 时间：2012-11-05T12:24:32.227
> 
> 标签：php, apache, http-headers, httpresponse, http-status-code-304

我有一个动态加载的css文件。例如：

```
http://example.com/css.php?request=/skin/styles.css 
```

在 chrome 上加载速度非常快，并且有`304 not modified`标题。

在 FF 和 IE 上，它有`200 OK`状态并在 6 秒内加载！

例如，如果我有一个静态 css 文件：

```
http://example.com/styles.css 
```

我得到了`304 not modified`所有浏览器。

有什么想法可能导致这种情况吗？htaccess 或 httpd.conf 中没有特定于浏览器的规则

# android - 简易 Facebook Android SDK - NetworkOnMainThreadException

> ID：13232075
> 
> 赞同：1
> 
> 时间：2012-11-05T12:24:34.887
> 
> 标签：android, facebook, sdk, android-anr-dialog, networkonmainthread

我一直在使用这个 SDK [http://www.easyfacebookandroidsdk.com/](http://www.easyfacebookandroidsdk.com/)将 Facebook 集成到我的应用程序中。我只想从我的应用程序更新一个状态。在 Android API 10 中使用这个类效果很好。使用 API 15 在手机上运行它会给我一个 android.os.NetworkOnMainThreadException。这是我的代码：

```
package com.my.wod;

import android.app.Activity;
import android.content.Context;
import com.main.xfit.R;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.widget.Toast;

import com.facebook.android.*;

import com.facebook.android.Facebook.DialogListener;

public class PostFaceBookStatus extends Activity {

private static final String APP_ID = "ID OF MY APP";
private static final String[] PERMISSIONS = {"publish_stream" };

private static final String TOKEN = "access_token";
    private static final String EXPIRES = "expires_in";
    private static final String KEY = "facebook-credentials";

private Facebook facebook;
private String messageToPost;

public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    facebook = new Facebook(APP_ID);
    restoreCredentials(facebook);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.facebook);

    String facebookMessage = getIntent().getStringExtra("facebookMessage");
    Toast.makeText(getApplicationContext(), facebookMessage, Toast.LENGTH_LONG).show();
    if (facebookMessage == null){
         facebookMessage = "SUNDAY 120506 2012 CrossFit Games Regional: Individual Event 4 For time: 135 pound Back squat, 50 reps 40 Pull-ups 135 pound Shoulder-to-overhead, 30 reps 85 pound Front squat, 50 reps 40 Pull-ups 85 pound Shoulder-to-overhead, 30 reps 65 pound Overhead squat, 50 reps 40 Pull-ups 65 pound Shoulder-to-overhead, 30 reps";
    }
    //messageToPost = facebookMessage;
    messageToPost = "Post random shit" ;
}

public void doNotShare(View button){
    finish();
}
public void share(View button){
    if (! facebook.isSessionValid()) {
        loginAndPostToWall();
    }
    else {
        postToWall(messageToPost);
    }
}

public void loginAndPostToWall(){
     facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
}

public void postToWall(String message){
    Bundle parameters = new Bundle();
            parameters.putString("message", message);
            parameters.putString("description", "topic share");
            try {
                facebook.request("me");
                String response = facebook.request("me/feed", parameters, "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("") ||
                response.equals("false")) {
                showToast("Blank response.");
                }
            else {
                showToast("Message posted to your facebook wall!");
                }
                finish();

            } catch (Exception e) {
                showToast("Failed to post to wall!");
                e.printStackTrace();
                finish();
    }
}

class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        saveCredentials(facebook);
        if (messageToPost != null){
        postToWall(messageToPost);
    }
    }
    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
        finish();
    }
    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
        finish();
    }
}

private void showToast(String message){
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show();
}
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:38:51.933

您不能在 UI 线程上运行网络操作，如果您认为是 API 代码在执行此操作，那么您必须将 API 调用包装在一个线程中。

看起来这条线正在使用网络：

```
 String response = facebook.request("me/feed", parameters, "POST"); 
```

您需要在工作线程上执行长时间运行的任务。

你曾经得到一个 ANR（活动无响应），但 ICS 更聪明一点，在这发生之前就把你踢了。

开始阅读：

[http://developer.android.com/guide/practices/responsiveness.html](http://developer.android.com/guide/practices/responsiveness.html)

[http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask) <这是一种可能的替代答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:46:31.567

为了使它适用于 API 级别 10 及更高级别，我刚刚使用了 AsyncTask 并且它成功了！！使用以下代码：

//将此全局声明设为私有 Facebook mFacebook;

```
private class FbLoginAsync extends AsyncTask<Void, Void, User> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(ConstantsCtc.DIALOG_PROGRESS);
    }

    @Override
    protected User doInBackground(Void... params) {
        // facebooklogin();
        return getFacebookData();
    }

    @Override
    protected void onPostExecute(User u) {
        super.onPostExecute(u);
        // your facebook information is in User bean 'u'.

    }

}

public User getFacebookData() {
    User u = new User();
    try {
        JSONObject jsonME = null;
        JSONObject jsonfrnd = null;
        try {
            jsonME = Util.parseJson(mFacebook.request("me"));
            // jsonfrnd =
            // Util.parseJson(mFacebook
            // .request("me/friends"));
        } catch (FacebookError e) {
            e.printStackTrace();
            u = null;
        }
        Log.w("fbjsonMe", " *\n  " + jsonME);
        // Log.e("fbjsonfrnds", " *\n  " + jsonfrnd);

        String mUserId = jsonME.getString("id");
        String mUserName = jsonME.getString("first_name");
        String mUseremail = jsonME.getString("email");
        String birthday = jsonME.getString("birthday");
        String gender = jsonME.getString("gender");
        String full_name = jsonME.getString("name");

        // Log.w("UserName", mUserName + " *  " + mUseremail + " *\n  "
        // + jsonME);

        // calculate age
        String ag[] = birthday.split("/");
        int y = Integer.parseInt(ag[2]);// get birth year
        final Calendar cal = Calendar.getInstance();
        int currentyear = cal.get(Calendar.YEAR);
        int age = currentyear - y;

        if (gender.equalsIgnoreCase("male"))
            gender = "0";
        else
            gender = "1";

        u.setUserId(mUserId);
        u.setUserFullName(full_name);
        u.setEmail(mUseremail);
        u.setAge(age + "");
        u.setGender(gender);
    } catch (Exception e) {
        e.printStackTrace();
        u = null;
    }
    return u;
}

// then make a call to below method form your activity's button click or
// else

public void facebookLogin() {
    this.mFacebook = new Facebook(appId);// give your appId

    if (mFacebook.isSessionValid()) {
        new FbLoginAsync().execute();
    } else {
        SessionEvents.AuthListener listener = new SessionEvents.AuthListener() {
            @Override
            public void onAuthSucceed() {
                new FbLoginAsync().execute();
            }

            @Override
            public void onAuthFail(String error) {
                showDialogCustome("Error in Facebook Login, please try again later");
                Log.e("onAuthFail", "onAuthFail");
            }
        };
        SessionEvents.addAuthListener(listener);
        mFacebook.authorize(this.activity, this.permissions,
                Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
    }
} 
```

我希望这能解决你的问题。让我知道

# c# - 工作单元模式是否关于共享相同的 DataContext？

> ID：13232084
> 
> 赞同：1
> 
> 时间：2012-11-05T12:25:06.473
> 
> 标签：c#, asp.net, entity-framework, ado.net, unit-of-work

我正在使用实体框架，并且正在尝试结合存储库模式来学习工作单元模式。

从我到现在的理解，工作单元负责跟踪对实体对象所做的更改。但是，DataContext 不是在做同样的事情吗？

那么，实现工作单元模式并不像“强迫”您在所有方法中使用相同的上下文？

```
public class EFUnitOfWork : IUnitOfWork
{
    EFContext context = new EFContext();
    public void Commit()
    {
        context.SaveChanges();
    }
}

public class ProductsRepository(IUnitOfWork unitOfWork)
{
    /* CRUD methods here */
}

public void InsertProducts()
{
    var unitOfWork = new EFUnitOfWork(); // <-- this will normally be injected via constructor
    var productsRepository = new ProductsRepository(unitOfWork);

    productsRepository.Insert(new Product { Name = "Product 1", Description = "Description" });
    productsRepository.Insert(new Product { Name = "Product 2", Description = "Description" });
    productsRepository.Insert(new Product { Name = "Product 3", Description = "Description" });

    unitOfWork.Commit();
} 
```

这是将工作单元与实体框架一起使用的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:29:10.580

是的，您共享相同的 DataContext。这是一个可以帮助您的教程： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-在-an-asp-net-mvc-应用程序中](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

# c# - 如何使用 TrackBar 控制系统音量？

> ID：13232085
> 
> 赞同：1
> 
> 时间：2012-11-05T12:25:07.913
> 
> 标签：c#, winforms, radio, trackbar

我是一个初学者，正在制作一个网络广播播放器，我想用自己的`TrackBar`. 这怎么可能？我还没有找到任何解决方案来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:31:33.220

看看 NAudio。这是一个出色的 API，用于在 .NET 中实现基于音频的应用程序

[http://naudio.codeplex.com/](http://naudio.codeplex.com/)

还要考虑这个

[如何使用 VC 控制“Windows XP 音量控制”#](https://stackoverflow.com/questions/1361844/how-to-control-windows-xp-volume-control-with-vc?rq=1)

这也可能有帮助。这解释了如何挂钩 Win32 API 多媒体库 (winmm.dll) 来控制系统音量

[http://www.dreamincode.net/forums/topic/45693-controlling-sound-volume-in-c%23/](http://www.dreamincode.net/forums/topic/45693-controlling-sound-volume-in-c%23/)

# p2p - 两个经过 NAT 的 Skype 节点如何通信

> ID：13232086
> 
> 赞同：0
> 
> 时间：2012-11-05T12:25:13.470
> 
> 标签：p2p, skype

“通过 Skype 的视频/语音通信是通过 UDP 建立的。这里的技巧是，很多时候，其中一个用户位于防火墙或路由器后面，因此它没有真实的 IP 地址。但如果两个 Skype 客户端都是在真实 IP 上，然后媒体流量通过 UDP 在它们之间直接流动……”

**“如果被调用者之一或两者都没有公共 IP，那么他们会通过 UDP 或 TCP 将语音流量发送到另一个在线 Skype 节点。”** 谁能解释这个说法。我不明白他们是如何找到彼此的？

文章来源：http: [//EzineArticles.com/496462](http://EzineArticles.com/496462)

文章来源：http: [//EzineArticles.com/496462](http://EzineArticles.com/496462)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:08:16.143

客户端可以通过 Skype 登录服务器和超级节点进行通信。

有关 Skype 协议的更多详细信息：

[http://en.wikipedia.org/wiki/Skype_protocol](http://en.wikipedia.org/wiki/Skype_protocol)

# javascript - javascript - 从我的浏览器中抽出时间

> ID：13232090
> 
> 赞同：2
> 
> 时间：2012-11-05T12:25:36.780
> 
> 标签：javascript, browser

> **可能重复：**
> [如何在 JavaScript 中获取当前日期](https://stackoverflow.com/questions/1531093/how-to-get-current-date-in-javascript)

我如何使用 javascript 从浏览器中抽出时间？我需要在我的脚本中进行比较。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:28:00.900

```
currentTime = new Date();
time = currentTime.getTime();
hours = currentTime.getHours(); 
```

ETC

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:27:08.087

您可以使用[Date 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来获取当前时间：

```
var currentTime = new Date(); 
```

# python - 如何使用python从html文件中查找和获取文本？

> ID：13232093
> 
> 赞同：1
> 
> 时间：2012-11-05T12:25:49.250
> 
> 标签：python

嗨，我已经使用此标签从 html 文件中查找标签的内容。

```
def everything_between(text,begin,end):
    idx1=content.find(begin)
    idx2=content.find(end,idx1)
    return content[idx1+len(begin):idx2].strip()

content=open('page.html').read()
title=everything_between(content,'<ul class="members">','</ul>')
interesting=everything_between(content,'INTERESTING:','bodystuff')
print(title) 
```

但是在标签`<ul class="member">`中有多个`<ahref>`标签，我想获取它们之间的`<a href>`内容 `<a href="/history/member/">`

脚本应该获取`<a href="/history/member/"></a>`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:29:46.247

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

```
soup.title
# <title>The Dormouse's story</title>

soup.title.name
# u'title'

soup.title.string
# u'The Dormouse's story'

soup.title.parent.name
# u'head'

soup.p
# <p class="title"><b>The Dormouse's story</b></p>

soup.p['class']
# u'title'

soup.a
# <a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>

soup.find_all('a')
# [<a class="sister" href="http://example.com/elsie" id="link1">Elsie</a>,
#  <a class="sister" href="http://example.com/lacie" id="link2">Lacie</a>,
#  <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a>]

soup.find(id="link3")
# <a class="sister" href="http://example.com/tillie" id="link3">Tillie</a> 
```

# entity-framework-4.1 - 代码优先或模型优先（实体框架/RIA 服务）

> ID：13232096
> 
> 赞同：0
> 
> 时间：2012-11-05T12:25:52.580
> 
> 标签：entity-framework-4.1, wcf-ria-services, silverlight-5.0

我们正在为许多中小型的潜在客户开发 LOB 应用程序，而不是大型的。

我们必须为每个新客户安装数据库。

您认为对我们来说最好的方法是什么，模型优先（使用 edmx 并使用向导开发模型和元数据）或代码优先。

我们喜欢 Entity Framework/RIA Services 的简单性，我们认为 Optimistic Concurrency 对我们的应用程序来说已经足够了，但是由于数据库必须在 SQL Server 中从头开始安装（我们不会使用其他数据库），我们不确定什么方法最适合我们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:57:36.340

只要 EF 和首先选择 edmx/code，我相信这更多的是个人喜好问题。Edmx 模型似乎比代码优先，但是即使在 VS2012 中设计器仍然有点笨拙，特别是如果你有 50 多个实体。自从 EF 代码首先变得可用以来，我已经放弃了 edmx。
关于 WCF Ria 服务 我在我的 LOB 应用程序中广泛使用它，即使在大型应用程序中也是如此，并且与普通 WCF 相比，它在大多数情况下为您节省了大量的胶水代码。
我确定您知道已发布的功能，例如

*   服务器端过滤、分页甚至分组
*   客户端代码生成，简化了 sl 和完整 clr 之间的代码共享

和许多其他人，但也许你对他的局限性更感兴趣

*   尽管您始终可以向查询添加参数并应用过滤器服务器端，但您不能使用嵌套表达式（即任何）从客户端查询，但它并不完全相同
*   你不能直接暴露与silverlight的多对多关系（但是看看[M2M4RIA](http://m2m4ria.codeplex.com/)）
*   您必须将外键字段添加到您的模型中（对我来说，数据库似乎泄漏到模型中）
*   WCF Ria 服务在主线程中完成他的大部分工作（即在加载/提交更改后加载 DomainContext）
*   如果您的应用程序变大并且您正在考虑拆分域服务/域上下文，请注意，尝试在原子事务中提交两个域上下文的更改会遇到严重的痛苦
*   每次您构建客户端并花费（我认为）比它应该更长的时间时都会发生代理生成

尽管如此，我相信这对 RAD 来说是一项很好的技术，事情最终可能会变得更好：[Colin Blair 在他的博客上发帖称，他正在推动微软将 WCF Ria 作为开源发布](http://www.riaservicesblog.net/Blog/post/Musings-on-WCF-RIA-Services-4-A-Plan-for-the-Future.aspx)，鉴于微软已经杀死了 Sl，这确实可以改善事情/Wcf ria 开发

# mysql - 如何使用 mysql 获得 0 表示没有记录？

> ID：13232097
> 
> 赞同：2
> 
> 时间：2012-11-05T12:25:54.170
> 
> 标签：mysql, sql

我是 mySql 的新手。我必须根据工作日计算表格的点击次数。

这里的时间段取决于数据库。但是如果上周没有记录，那么会发生什么，它不在列表中。但我需要它为0。那么我该怎么做呢？

```
SELECT CASE 
    WHEN PERIOD >= NOW() - INTERVAL 4 WEEK
                AND PERIOD < NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 3 WEEK
                AND PERIOD < NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 2 WEEK
        AND PERIOD < NOW() - INTERVAL 1 WEEK THEN '8-14 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 1 WEEK
                THEN 'up to 7 days ago'
           END WeekPeriod, IFNULL(count(CLICKS),0) TotalClicks

FROM TABLE

WHERE PERIOD >= NOW() - INTERVAL 4 WEEK

GROUP BY CASE 
    WHEN PERIOD >= NOW() - INTERVAL 4 WEEK
                    AND PERIOD < NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 3 WEEK
                AND PERIOD < NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 2 WEEK
                AND PERIOD < NOW() - INTERVAL 1 WEEK THEN '08-14 days ago'

    WHEN PERIOD >= NOW() - INTERVAL 1 WEEK
                THEN '01 to 7 days ago'

END
 ORDER BY WeekPeriod"; 
```

答案应该是这样的

```
1-7 0 
8-15 14 
16-21 34 
21-28 45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:10:25.823

```
SELECT uq.timespan, COALESCE(tsq.TotalClicks, 0) as Clicks FROM (
SELECT '22-28 days ago' as timespan
union SELECT '15-21 days ago'
union SELECT '8-14 days ago'
union SELECT 'up to 7 days ago'
)uq LEFT JOIN (
SELECT CASE 
    WHEN PERIOD >= NOW() - INTERVAL 4 WEEK
                AND PERIOD < NOW() - INTERVAL 3 WEEK THEN '22-28 days ago'
    WHEN PERIOD >= NOW() - INTERVAL 3 WEEK
                AND PERIOD < NOW() - INTERVAL 2 WEEK THEN '15-21 days ago'
    WHEN PERIOD >= NOW() - INTERVAL 2 WEEK
        AND PERIOD < NOW() - INTERVAL 1 WEEK THEN '8-14 days ago'
    WHEN PERIOD >= NOW() - INTERVAL 1 WEEK THEN 'up to 7 days ago'
           END WeekPeriod, 
           count(CLICKS) TotalClicks
FROM TABLE
WHERE PERIOD >= NOW() - INTERVAL 4 WEEK
GROUP BY WeekPeriod
/*ORDER BY WeekPeriod -- unnecessary, GROUP BY implicits ORDER BY*/
)tsq ON uq.timespan = tsq.WeekPeriod 
```

# css - 调整浏览器大小时 CSS 图像变小

> ID：13232098
> 
> 赞同：0
> 
> 时间：2012-11-05T12:25:57.463
> 
> 标签：css, fluid-layout

我在网页上使用了背景图片并在 css 中使用了此代码，这使得在调整浏览器大小时可以很好地调整大小。

```
body{   
    background: url("images/back.jpg") no-repeat  ;
    background-size: cover;
} 
```

我需要在特定位置的背景图像顶部放置一些其他图像（桌子上的花瓶）。但是当我这样做时，背景会被调整大小，但是当浏览器被调整大小时，花瓶图像保持在相同的位置和相同的大小为如下图第二张所示。

看这两张图片中的花瓶

[全尺寸浏览器](http://imgur.com/fsjST)

[调整大小的浏览器](http://imgur.com/3IvQ5)

我怎样才能让花瓶图像也像背景一样调整大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-09T21:50:41.317

我最近在创建一个隐藏对象游戏时遇到了完全相同的问题，该游戏需要将图像放置在背景图像之上以保持其位置，而不管浏览器尺寸如何。

**这是我所做的：**

您可以包含背景图像的模板版本作为实际版本（因此它不可见，但仍会占用 DOM 中的空间，`<img>`并`visibility:hidden`以此为基础确定大小（和背景图像大小）。

**HTML：**

```
<div class="image-container">
    <img src="http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png" class="img-template">
    <div class="item"></div>
</div> 
```

**CSS：**

```
/* This is your container with the background image */
.image-container {
    background:url('http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png') no-repeat;
    background-size:100%;
    overflow-x: hidden;
  position:relative;
}

/* This is the template that resizes the DIV based on background image size */
img.img-template {
    visibility: hidden;
    width:100%;
    height:auto;
}

/* This is the item you want to place (plant pot) */
.item {
    position: absolute;
    left: 14.6%;
    bottom: 80.3%;
    width: 15%;
    height: 15%;
    background: yellow;
    border: 2px solid black;
} 
```

这是一个工作示例：http: [//jsfiddle.net/cfjbF/3/](http://jsfiddle.net/cfjbF/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:26:41.230

尝试使图像相对位置并手动设置对齐。

[http://jsfiddle.net/cfjbF/1/](http://jsfiddle.net/cfjbF/1/)

```
<head>
    <style>
        body {
            background: #000000;
        }

        #image1 {
            background: #008000;
            position: relative;
            left: 50px;
            height: 50px;
            width: 50px;
        }
    </style>
</head>
<body>
<div id="image1"></div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:30:43.360

您的问题的解决方案：

[https://stackoverflow.com/a/7660978/1256403](https://stackoverflow.com/a/7660978/1256403)

或者

[http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/](http://buildinternet.com/2009/07/quick-tip-resizing-images-based-on-browser-window-size/)

# devexpress - 即使我正确设置了 NotifyPropertyChanged 事件，DevExpress GridControl 也无法正确更新

> ID：13232101
> 
> 赞同：1
> 
> 时间：2012-11-05T12:26:05.443
> 
> 标签：devexpress, gridcontrol

我遇到了一个非常奇怪的问题。

基本思想是我有一个类来保存从交易 api 收到的关于外汇价格的数据。每个属性都已使用 NotifyPropertyChanged 方法设置，如下所示。

```
class RealTimeBar
{
    public event PropertyChangedEventHandler PropertyChanged;

    private const double EPSILON = 0.0000001;

    private int _id;
    private string _symbol;
    private int _time;
    private float _open;
    private float _high;
    private float _low;
    private float _close;
    int _volume;

    public RealTimeBar(int id, string symbol)
    {
        _id = id;
        _symbol = symbol;
    }

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    public int Id
    {
        get
        {
            return _id;
        }
        set
        {
            _id = value;
        }
    }

    public string Symbol
    {
        get
        {
            return _symbol;
        }
        set
        {
            if (value != _symbol)
            {
                _symbol = value;
                NotifyPropertyChanged("Symbol");
            }
        }
    }

    public int Time
    {
        get
        {
            return _time;
        }
        set
        {
            if (value != _time)
            {
                _time = value;
                NotifyPropertyChanged("Time");
            }
        }
    }

    public float Open
    {
        get
        {
            return _open;
        }
        set
        {
            if (value != _open)
            {
                _open = value;
                NotifyPropertyChanged("Open");
            }
        }
    }

    public float High
    {
        get
        {
            return _high;
        }
        set
        {
            if (value != _high)
            {
                _high = value;
                NotifyPropertyChanged("High");
            }
        }
    }

    public float Low
    {
        get
        {
            return _low;
        }
        set
        {
            if (value != _low)
            {
                _low = value;
                NotifyPropertyChanged("Low");
            }
        }
    }

    public float Close
    {
        get
        {
            return _close;
        }
        set
        {
            if (value != _close)
            {
                _close = value;
                NotifyPropertyChanged("Close");
            }
        }
    }

    public int Volume
    {
        get
        {
            return _volume;
        }
        set
        {
            if (value != _volume)
            {
                _volume = value;
                NotifyPropertyChanged("Volume");
            }
        }
    }

} 
```

它是一个很长的类，但结构简单，如您所见。现在我连接到向我触发事件的 api，并通过将 api 的值设置为我定义的类来处理它。

```
 BindingList<RealTimeBar> _realTimeBarList = new BindingList<RealTimeBar>();
    public Hashtable _iForexHashtable = new Hashtable();

    private void _UpdateForexQuote(int tickerId, int time, double open, double high, double         low,    double close, int volume,
                             double wap, int count)
    {
        ///MessageBox.Show(tickerId.ToString());
        ((RealTimeBar)_iForexHashtable[tickerId]).Open = (float)open;
        ((RealTimeBar)_iForexHashtable[tickerId]).High = (float)high;
        ((RealTimeBar)_iForexHashtable[tickerId]).Low = (float)low;
        ((RealTimeBar)_iForexHashtable[tickerId]).Close = (float)close;
        ((RealTimeBar)_iForexHashtable[tickerId]).Volume = volume;

    } 
```

经过一些设置后，_UpdateForexQuote 方法会将传入的信息分发到 RealTimeBar 类的属性中。一切都很好。

当我启动程序时，它不会更新。我以为没有数据进来。但是当我随机单击gridcontrol的A1cell中的某个位置，然后单击另一个B1cell时，之前的A1cell会更新。然后，如果我单击 C1cell，则 B1cell 将更新。如果您不单击一个单元格，它将永远不会更新。我给你看图：

![在此处输入图像描述](../Images/d38a0171609585b124bb3c4d4186ddf8.png)

如您所见，单击前三行后，前三行显示延迟数据，由于我从未触摸第四行，因此显示为零。条件是我刚刚单击了第五行 Low 单元格，这就是 Low 不更新但其他单元格更新的原因。这很奇怪。我之前在 devexpress 11 和 vs 2010 下使用相同的代码。但是现在在 devexpress 12 和 vs 2012 下，我遇到了这个以前从未发生过的问题。

**更新：**

下面是我使用的方法 1\. 定义 bindinglist 和一个 hashtable， 2\. 先将对象放入 hashtable，然后将 hashtable 中的对象添加到 bindinglist 3\. 将 bindinglist 绑定到 gridcontrol。

```
private void earningButtonItem_ItemClick(object sender, ItemClickEventArgs e)
    {
        _iTimer.AutoReset = false;
        _iTimer.Enabled = false;
        switchStockPool = "Earning Stock";
        disconnectButtonItem.PerformClick();
        connectButtonItem.PerformClick();
        _iheitanshaoEarningDBConnect = new DBConnect("heitanshaoearning");
        List<string>[] tempList;
        int tempHash;
        tempList = _iheitanshaoEarningDBConnect.SelectSymbolHighLow();
        _quoteEarningOnGridList.Clear();

        ///tempList[0].Count
        for (int i = 0; i < tempList[0].Count; i++)
        {
            tempHash = Convert.ToInt32(tempList[0][i].ToString().GetHashCode());
            _iStockEarningHistHashtable[tempHash] = new QuoteOnGridHist(tempList[0][i], (float)Convert.ToSingle(tempList[1][i]), (float)Convert.ToSingle(tempList[2][i]), (float)Convert.ToSingle(tempList[3][i]));
            _iStockEarningHashtable[tempHash] = new QuoteOnGrid(tempList[0][i], 0, 0);
            _quoteEarningOnGridList.Add((QuoteOnGrid)_iStockEarningHashtable[tempHash]);
            reqMktDataExStock(tempHash, tempList[0][i].ToString());
        }

        List<string>[] tempVolumeList;
        tempVolumeList = _iheitanshaoEarningDBConnect.SelectAverageVolume();
        for (int i = 0; i < tempList[0].Count; i++)
        {
            tempHash = Convert.ToInt32(tempVolumeList[0][i].ToString().GetHashCode());
            ((QuoteOnGrid)_iStockEarningHashtable[tempHash]).Average_Volume = ((float)Convert.ToSingle(tempVolumeList[1][i])) / volumeDenominator;
        }

        gridControl.DataSource = _quoteEarningOnGridList;
    }
    ///////////////////// 
```

现在当价格更新事件到来时，下面的方法将更新哈希表中的对象属性。由于我在对象中定义了 Notifypropertychanged，它应该更新 bingdinglist 和 gridcontrol 中的对象。

```
 private void _UpdateStockMarketQuote(int tikcerId, int field, double price, int canAutoExecute)
    {
        ////MessageBox.Show(tikcerId.ToString() + field.ToString() + price.ToString());
        if (switchStockPool == "Selected Stock")
        {
            if (field == 4)
            {
                ((QuoteOnGrid)_iStockHashtable[tikcerId]).Gap_From_High = ((float)price - ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).High) / ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Close;
                ((QuoteOnGrid)_iStockHashtable[tikcerId]).Gap_From_Low = ((float)price - ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Low) / ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Close;
                ((QuoteOnGrid)_iStockHashtable[tikcerId]).Last_Price = (float)price;
            }
            //else if (field == 1)
            //{
            //    ((QuoteOnGrid)_iStockHashtable[tikcerId]).Gap_From_High = ((float)price - ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).High) / ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Close;
            //    ((QuoteOnGrid)_iStockHashtable[tikcerId]).Gap_From_Low = ((float)price - ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Low) / ((QuoteOnGridHist)_iStockHistHashtable[tikcerId]).Close;
            //}
        }
        else if (switchStockPool == "Earning Stock")
        {
            if (field == 4)
            {
                ((QuoteOnGrid)_iStockEarningHashtable[tikcerId]).Gap_From_High = ((float)price - ((QuoteOnGridHist)_iStockEarningHistHashtable[tikcerId]).High) / ((QuoteOnGridHist)_iStockEarningHistHashtable[tikcerId]).Close;
                ((QuoteOnGrid)_iStockEarningHashtable[tikcerId]).Gap_From_Low = ((float)price - ((QuoteOnGridHist)_iStockEarningHistHashtable[tikcerId]).Low) / ((QuoteOnGridHist)_iStockEarningHistHashtable[tikcerId]).Close;
                ((QuoteOnGrid)_iStockEarningHashtable[tikcerId]).Last_Price = (float)price;

            }
            //else if (field == 1)
            //{
            //    ((quoteongrid)_istockearninghashtable[tikcerid]).gap_from_high = ((float)price - ((quoteongridhist)_istockearninghisthashtable[tikcerid]).high) / ((quoteongridhist)_istockearninghisthashtable[tikcerid]).close;
            //    ((quoteongrid)_istockearninghashtable[tikcerid]).gap_from_low = ((float)price - ((quoteongridhist)_istockearninghisthashtable[tikcerid]).low) / ((quoteongridhist)_istockearninghisthashtable[tikcerid]).close;
            //}
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:21:47.083

您不仅需要`PropertyChanged`在类中有事件，还需要实现`INotifyPropertyChanged`. 这就是网格知道类可以通知更改的方式。

# c# - 文本框在验证错误时未突出显示“红色”

> ID：13232103
> 
> 赞同：0
> 
> 时间：2012-11-05T12:26:14.250
> 
> 标签：c#, wpf, validation, xaml

我将一个 TextBox 控件绑定到一个名为 Address 的实体，该实体具有一个子属性 AddressLines。内部验证逻辑具有 AddressLines 属性的 ValidationErrors，但它不会通过红色边框在控件上“直观地”反映。

```
 <TextBox  Text="{Binding Path=Address.AddressLines, 
                             Mode=TwoWay,
                             UpdateSourceTrigger=PropertyChanged, 
                             NotifyOnValidationError=True}" 

              ToolTip="{Binding RelativeSource={RelativeSource Self}, 
                                Path=(Validation.Errors)[0].ErrorContent}" /> 
```

如果我没记错，那是因为实体`Address`本身不为空而属性`AddressLines`为空。如果是这种情况，如何在 Master-Detail 错误的情况下通知控件验证错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:49:22.807

最好的办法是使用 IDataErrorInfo 接口来自定义对象控制其验证状态的方式。

看看[这里](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)的文章，它给出了一个很好的例子。如果您想要与您的代码相关的示例，请提供您的地址等类，我会看看我能做什么！

# python - Python：在 Ubuntu 上覆盖 os.path.supports_unicode_filenames

> ID：13232108
> 
> 赞同：3
> 
> 时间：2012-11-05T12:26:23.503
> 
> 标签：python, ubuntu, unicode, utf-8, filesystems

我在 Ubuntu 服务器上运行 python web 应用程序，同时在 OS X 上进行本地开发。

我为希伯来语使用了很多 unicode 字符串，包括处理图像的文件名，因此它们将与希伯来字符一起保存在文件系统中。

我的 Ubuntu 服务器已完全配置为 UTF-8 - 我在文件系统（此应用程序之外）上有其他图像，带有希伯来语名称、希伯来语命名目录等。

但是，当尝试在 Ubuntu（但不是 OS X）上保存具有希伯来文文件名的图像时，我的应用程序返回错误。

错误是：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128) 
```

经过*大量*调查，据我所知，我得到了最后一个可能的原因：

```
# Inside my virtualenv, Mac OS X
>>> import os.path
>>> os.path.supports_unicode_filenames
>>> True

# Inside my virtualenv, Ubuntu 12.04
>>> import os.path
>>> os.path.supports_unicode_filenames
>>> False 
```

只是为了好奇，这里是我的 Ubuntu 语言环境设置：

```
locale
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

更新：添加代码和示例字符串：

```
# a string, of the type I would get for instance.product.name, as used below.
u'\\u05e7\\u05e8\\u05d5\\u05d1-\\u05e8\\u05d7\\u05d5\\u05e7'

#utils.py
# I get an image object from django, and I run this function so django 
# can use the generated filepath for the image.
def get_upload_path(instance, filename):

    tmp = filename.split('.')
    extension = '.' + tmp[-1]

    if instance.__class__.__name__ == 'MyClass':

        seo_filename = unislugify(instance.product.name)
        # unislugify takes a string and strips spaces, etc.
        value = IMAGES_PRODUCT_DIR + seo_filename + extension

    else:

        value = IMAGES_GENERAL_DIR + unislugify(filename)

    return value 
```

示例堆栈跟踪：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 60-66: ordinal not in range(128)

Stacktrace (most recent call last):

  File "django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File "django/contrib/admin/options.py", line 366, in wrapper
    return self.admin_site.admin_view(view)(*args, **kwargs)

  File "django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File "django/views/decorators/cache.py", line 89, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)

  File "django/contrib/admin/sites.py", line 196, in inner
    return view(request, *args, **kwargs)

  File "django/utils/decorators.py", line 25, in _wrapper
    return bound_func(*args, **kwargs)

  File "django/utils/decorators.py", line 91, in _wrapped_view
    response = view_func(request, *args, **kwargs)

  File "django/utils/decorators.py", line 21, in bound_func
    return func(self, *args2, **kwargs2)

  File "django/db/transaction.py", line 209, in inner
    return func(*args, **kwargs)

  File "django/contrib/admin/options.py", line 1055, in change_view
    self.save_related(request, form, formsets, True)

  File "django/contrib/admin/options.py", line 733, in save_related
    self.save_formset(request, form, formset, change=change)

  File "django/contrib/admin/options.py", line 721, in save_formset
    formset.save()

  File "django/forms/models.py", line 497, in save
    return self.save_existing_objects(commit) + self.save_new_objects(commit)

  File "django/forms/models.py", line 628, in save_new_objects
    self.new_objects.append(self.save_new(form, commit=commit))

  File "django/forms/models.py", line 731, in save_new
    obj.save()

  File "django/db/models/base.py", line 463, in save
    self.save_base(using=using, force_insert=force_insert, force_update=force_update)

  File "django/db/models/base.py", line 551, in save_base
    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)

  File "django/db/models/manager.py", line 203, in _insert
    return insert_query(self.model, objs, fields, **kwargs)

  File "django/db/models/query.py", line 1593, in insert_query
    return query.get_compiler(using=using).execute_sql(return_id)

  File "django/db/models/sql/compiler.py", line 909, in execute_sql
    for sql, params in self.as_sql():

  File "django/db/models/sql/compiler.py", line 872, in as_sql
    for obj in self.query.objs

  File "django/db/models/fields/files.py", line 249, in pre_save
    file.save(file.name, file, save=False)

  File "django/db/models/fields/files.py", line 86, in save
    self.name = self.storage.save(name, content)

  File "django/core/files/storage.py", line 44, in save
    name = self.get_available_name(name)

  File "django/core/files/storage.py", line 70, in get_available_name
    while self.exists(name):

  File "django/core/files/storage.py", line 230, in exists
    return os.path.exists(self.path(name))

  File "python2.7/genericpath.py", line 18, in exists
    os.stat(path) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:00:13.237

`os.path.supports_unicode_filenames`在除 darwin 之外的 posix 系统上[总是 False](http://hg.python.org/cpython/file/47943fe516ec/Lib/posixpath.py#l440)，那是因为它们并不真正关心文件名的编码，它只是一个字节序列。语言环境设置指定如何解释此字节，这就是为什么当语言环境设置不正确时终端中的字符会损坏。

你是如何运行你的网络应用程序的？如果您使用 cgi 或 wsgi 通过 Web 服务器（apache？）运行它，则语言环境可能不是您在 shell 中看到的，因此这可能是 python 尝试使用`ascii`编解码器对路径名进行编码的原因。

为了使其工作，您可以像`utf-8`打开文件时一样手动编码路径名。

编辑：
所以失败是对 的调用`os.stat`，wenn 用 unicode 字符串调用，尝试根据默认编码（）将其转换为字节字符串，在 uWSGI 环境中使用 python2 时`sys.getdefaultencoding()`似乎总是如此。`ascii`要解决此问题，您可以确保将任何 unicode 字符串编码为 utf-8，然后才能将其传递给 os.stat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:49:47.647

感谢大家的帮助。我仍然没有用 uWSGI 解决这个问题。

但是，这是为我“配置”uWSGI 的最后一根稻草，我回到 gunicorn 作为应用服务器，一切正常。我当然想使用 uWSGI，因为它是一个雄心勃勃的项目，但归根结底，我是一名开发人员而不是系统管理员，而且 gunicorn 更容易在常见用例中工作。

# django - 从另一个 query_set 中获取一个 query_set。姜戈

> ID：13232111
> 
> 赞同：1
> 
> 时间：2012-11-05T12:26:34.007
> 
> 标签：django, django-models

在我的 django 应用程序中，我有一个模型“匹配”，它使用外键链接到我的模型“用户”。我还有一个函数，它给了我一个“live_matches”的query_set（当前播放的比赛）。

我尝试拥有的是一个包含“live_matches”所有用户的 query_set。

这是我的models.py：

```
class LiveMatchManager(models.Manager):
    def get_query_set(self):
        now = timezone.localtime(timezone.now())
        queryset = super(LiveMatchManager, self).get_query_set()
        return queryset.filter(match__date_start__lte=now, match__date_end__gte=now)

class Match(models.Model):
    user = models.ForeignKey(User)
    date_start = models.DateTimeField()
    date_end = models.DateTimeField()

# Managers
objects = models.Manager()
live_matches = LiveMatchManager() 
```

我想要的是一个函数，它给我一个链接到“live_match”的用户的查询集，我不知道如何做到这一点。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:52:14.173

```
#returns all users, linked to live_matches
>>>User.objects.filter(match__in=Match.live_matches.all())
[<User: user1>, <User: user2>, <User: user3>] 
```

# algorithm - 在图像中查找更新的矩形

> ID：13232114
> 
> 赞同：2
> 
> 时间：2012-11-05T12:27:03.843
> 
> 标签：algorithm, image-processing, graphics

我需要找出两个图像之间更新了哪些矩形区域。例如，我有这些图像：

[第一个 http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/1.png](http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/1.png) [第二个 http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/2 .png](http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/2.png)

Imagemagick`compare`告诉我这些像素已更新：

[比较 http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/3.png](http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/3.png)

所以我需要重新绘制这些区域（首先概述了它们）：

[比较 http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/4.png](http://storage.thelogin.ru/stackoverflow/find-updated-rectangles-in-image/4.png)

重绘是通过慢速连接（57600 波特）完成的，因此第一优先级是数据大小（一个字节用于魔术字，一个字节用于校验和，六个字节用于区域坐标，每个像素两个字节）。我可以使用哪种算法来查找这些区域？我认为，类似的东西用于 vnc 和类似的软件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:29:22.100

As far as actually finding the regions which have changed, as ImageMagick has done for you, you can compute a pixel by pixel difference (e.g. `XOR`). Regions with a difference of 0 have not changed.

It is not clear from your question whether the painting itself is slow or just the transmission of the repainting data. It is also not clear what kind of encoding/decoding can be done on the other end of the transmission. Do you have to send your data as you specified or can you encode it in another way if you wish?

Your data packets have a 8 byte overhead per rectangle "(one byte for magic word, one byte for checksum, six bytes for region coordinates, two bytes for each pixel)". I take it from the two bytes for each pixel that the color depth is 16-bit? So, due to the overhead, some of the smallest rectangles you outlined actually cost you more than combining them with other rectangles and resending some data on non-updated regions.

The actual problem of finding rectangles where each has an overhead is analogous to the "Strawberry Fields" hiring problem put forth by ITA Software. The original link is dead, but [here is someone's solution with problem description.](http://www.femtoparsec.net/aracil/codes/lucky7/explanation.pdf)

At 57600 baud, you get to send 7200 bytes per second, which would be 3600 pixels at two bytes per pixel. As a square, this is a measly 60x60\. You've certainly outlined more than that in your example, and this does not count the overhead.

The refresh rate of the monitor on the receiving end also needs to be considered. If the monitor is refreshing 60 times per second and you are only able to send one 60x60 square per second, how will this look?

Things to consider:

*   reduce color depth
*   run length encode pixel differences per scan line
*   attempt more ambitious compression per region, but watch the overhead
*   send non-graphic data and let the receiver compute the graphics (e.g. in this example, send the text that has changed, the updated time, etc. and let the receiver draw the progress bar, etc.)
*   abandon this insanity

# language-agnostic - 为什么有些语言有元类？

> ID：13232117
> 
> 赞同：2
> 
> 时间：2012-11-05T12:27:06.760
> 
> 标签：language-agnostic, metaclass

我看到 Java 只有一个元类（Class 类），但其他语言，比如 Smalltalk，每个类都有一个元类。

这是为什么？对元类有什么需求？以一种或另一种方式拥有它们有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:38:42.323

对至少一个元类的基本需求是，如果您想要表示类的对象（或希望类*成为*对象），那么这些对象必须具有类型。

维基百科说：

> 在早期的 Smalltalks 中，只有一个元类称为`Class`. 这意味着所有类的方法都是相同的，尤其是创建新对象的方法，即`new`. 为了让类拥有自己的方法和自己的实例变量（称为类实例变量，不应与类变量混淆），Smalltalk-80 为每个类引入`C`了自己的元类`C class`。

所以问题是，您是否希望每个类对象都具有相同的类型（因此具有相同的成员），或者您是否希望类对象以要求它们具有不同类型的方式有所不同，以便进行类型检查操作可以在代表 A 类的对象上执行，但不能在代表 B 类的对象上执行？Java 和早期的 Smalltalks 对这个问题的回答与后来的 Smalltalks 不同。

因此，例如`java.lang.Class.newInstance()`不接受构造函数参数，而您可以想象能够调用`clz.newInstance(1)`where `clz`is the class object for a class that has a constructor with take an可能会很好`int`。在 Java 中，您仍然可以自己查看类的构造函数来查找要传递的参数的匹配项，但是类对象的*类型*并不能告诉您是否会找到一个。

另请注意，Smalltalk 停止在一个级别。的类型`C`是`C class`，但类型`C class`是`Metaclass`。类型等没有无限递归`C class class`，因为虽然 Smalltalk 中不同的类对象接受不同的消息，但没有要求不同的元类对象接受不同的消息。

# c - 使用 free() 时内存使用量不会减少

> ID：13232119
> 
> 赞同：9
> 
> 时间：2012-11-05T12:27:13.797
> 
> 标签：c, linux, multithreading, pthreads

我正在编写与操作系统无关的无锁队列，到目前为止效果很好，但是内存管理存在小问题。我不确定它的 gcc 问题还是我的问题。问题：将元素添加到列表时内存会增加，但从列表中删除元素时 (free(elementPointer);) 内存使用量不会改变。

但是当我使用 pthreads 时，N 个生产者和 M 个消费者 `(1<N<20, 1<M<20)`的内存使用量一直约为 10mb（当尝试添加和删除 ~10kk 元素时），所以看起来免费正在工作。

有趣的是，在 VS 2010（相同的代码，没有线程）中，free 工作正常，内存被释放（监视任务管理器）。

我进行了测试，添加了 1kk 个元素，添加完所有元素后，将所有元素一一删除（无线程）。

Linux - 0.08 秒

Windows ~57 秒

Linux（无免费） - 0.07 秒

Windows（无免费） - 0.9 秒

所以，问题是，为什么没有使用线程时 Linux C 中没有释放内存？如有必要，我可以发布代码。

GCC 版本：4.4.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T12:29:36.227

在许多操作系统上，`free()`不会再次使内存可用于操作系统，而是“仅”用于新调用`malloc()`. 这就是为什么您看不到外部内存使用量下降的原因，但是当您通过线程增加新分配的数量时，内存会被重新使用，因此总使用量不会超过屋顶。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-05T12:29:49.037

Malloc 不必将内存返回给操作系统。类 unix 系统上的大多数 malloc 实现都不会这样做。特别是对于较小的对象尺寸。

这样做是出于性能原因。

我只是注意到这可能不清楚。“malloc”是指与 malloc 函数相关的整个子系统 - malloc、free、realloc、calloc 以及您的 libc 可能实现的任何特殊函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T13:43:11.280

为了简化事情，在动态内存分配中有两个内存管理器在工作：**操作系统内存管理器**和**进程内存管理器**（可能不止一个）。操作系统内存管理器将“大块”内存分配给各个进程内存管理器。每个进程内存管理器跟踪分配的段，以及“释放的段”。进程内存管理器不会将空闲的段返回给操作系统内存管理器，因为它更有效地保留它，以防它以后需要分配更多内存。

# html - 关闭 HTML标签问题

> ID：13232121
> 
> 赞同：81
> 
> 时间：2012-11-05T12:27:15.357
> 
> 标签：html, tags

为什么 HTML 标签没有`<input>`像其他 HTML 标签一样获得结束标签，如果我们关闭输入标签会出现什么问题？

我试图谷歌，我找到了编写这样一个输入标签的标准，`<input type="text" name="name">` 而不是用`</input>`.

`Radio`当我使用为按钮创建输入标签时，我个人感觉到了这个问题

```
var DOM_tag = document.createElement("input"); 
```

这虽然创建了一个单选按钮，但`TextNode`我附加到单选按钮

```
document.createTextNode("Radio Label"); 
```

不起作用。`Radio Label`在这种情况下，它只是显示带有 no 的单选按钮。

虽然我可以看到完整的代码：

```
<input id="my_id" type="radio" name="radio_name">Radio Label</input> 
```

什么是解释？

**附言**

我遇到的主要问题是输入标签的自动关闭，正如我在问题中提到的那样，我正在使用`var DOM_tag = document.createElement("input");` 它会自动创建一个关闭标签。我该怎么办？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-05T12:30:30.783

这些是空元素。这意味着它们不是为包含文本或其他元素而设计的，因此在 HTML 中不需要——事实上*也不能有*——结束标记。¹

但是，它们可以`<label>`与它们关联：

```
<input id="my_id" type="radio" name="radio_name">
<label for="my_id">Radio Label</label> 
```

单选按钮本质上不能包含文本，因此它们接受文本或其他元素作为内容是没有意义的。接受文本作为输入的控件的另一个问题：它的文本内容应该是它的值还是它的标签？为了避免歧义，我们有一个`<label>`元素完全按照它在锡上所说的那样做，我们有一个`value`属性来表示输入控件的值。

* * *

¹ [XHTML 不同；根据 XML 规则，每个标签都必须打开和关闭；这是使用快捷语法而不是`</input>`标签来完成的，尽管后者同样可以接受：]

```
<input id="my_id" type="radio" name="radio_name" />
<label for="my_id">Radio Label</label> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-05T13:10:17.927

起源于 SGML 中的空元素概念，其想法是某些元素充当将从外部源或环境插入的内容的占位符。

这就是为什么`img`and `input`，例如，在 HTML 中被声明为空，或者更准确地说，`EMPTY`声明为内容（即，没有内容是可能的，这与只是随便有空内容的元素相反）。有关详细说明，请参阅我的页面[Empty elements in SGML、HTML、XML 和 XHTML](http://www.cs.tut.fi/%7Ejkorpela/html/empty.html)。

这意味着此类元素的开始标记也充当结束标记。处理 SGML 或 HTML 文档的软件应该从文档类型定义 (DTD) 中知道哪些标签具有此属性。实际上，这些信息是内置在网络浏览器中的。使用类似的结束标签`</input>`是无效的，但浏览器只是跳过无法识别或虚假的结束标签。

在 XML 中，因此在 XHTML 中，情况有所不同，因为 XML 是 SGML 的一种高度简化的变体，旨在进行简单处理。处理 XML 的软件必须能够在没有任何 DTD 的情况下进行所有解析，因此 XML 需要所有元素的结束标记，尽管您可以（并且，为了兼容性，大多数情况下*应该*）使用特殊语法，`<input />`如`<input></input>`. 但是 XHTML 仍然允许标签之间没有内容。

因此，您不能在元素本身内为输入元素指定标签，因为它不能包含任何内容。您可以使用`title`、`value`或 （在 HTML5 中）`placeholder`属性将文本与其关联，在不同的意义上，但要将正常的可见内容作为标签，它需要位于不同的元素中。如其他答案中所述，建议将其放在一个`label`元素中并定义与`id`和`for`属性的关联。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-05T12:30:56.327

`<input>`是一个空标签，因为它没有设计为包含任何内容或结束标签。为了合规，您可以像这样使用它来表示标签的结束：

```
<input type="text" value="blah" /> 
```

这是关闭没有内容的标签的 XHTML 兼容方式。`<img>`标签也是如此。

要标记单选按钮，您最好使用[BoltClock 的答案](https://stackoverflow.com/questions/13232121/closing-html-input-tag-issue/13232170#13232170)所描述的`<label>`标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:34:50.953

您可以使用

```
var label = document.createTextNode("Radio Label");
DOM_tag.parentElement.insertBefore(label,DOM_tag); 
```

将标签放在单选按钮旁边。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-20T22:50:20.517

使用 createElement/createTextNode 组合效果最好。

```
$('#list-consultant').append(
    $(document.createElement('div')).addClass('checkbox').append(
        $(document.createElement('label')).append(
            $(document.createElement('input')).prop({
                type: 'checkbox',
                checked: 'checked'
            }),
            $(document.createTextNode('Ron Jeremy'))
        )
    )
); 
```

上面的代码片段将产生：

```
<div id='list-consultant'>
    <div class='checkbox'>
        <label><input type='checkbox' checked='checked'/>Ron Jeremy</label>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-05T22:41:38.810

你可以试试：

```
var label = document.createTextNode("Radio Label");
document.createElement("input").prop({type="text"});
document.write(input.append(label)); 
```

可能会工作，可能不会。（它对我不起作用，但我不知道*为什么*不......我认为它会。）如果这有帮助，那就太好了。（我还在学习 JavaScript。）

否则，坚持使用的标准答案：

```
<input id="my_id" type="radio" name="radio_name" />
<label for="my_id">Radio Label</label> 
```

这就是我通常会做的。

# dapper - Dapper 可以在使用连接表时加载 Multi-Mapping 结果吗？

> ID：13232123
> 
> 赞同：1
> 
> 时间：2012-11-05T12:27:30.783
> 
> 标签：dapper, multi-mapping

我有一个包含许多连接对象的应用程序对象。这在 .Net 世界中很棒，但不幸的是，连接是通过具有复合键的连接表来管理的。是否可以使用多映射方法在 dapper 中进行映射？

现在我只使用两个单独的 sql 语句，但它并不适合我（来自 EF 方面）。这是我尝试过但无法开始工作的一些代码...

```
public class Application
{
    public int ApplicationID { get; set; }
    public string Name { get; set; }
    public string Prefix { get; set; }

    public List<Connection> Connections { get; set; }
}

public class ApplicationConnection
{
    public int ApplicationID { get; set; }
    public int ConnectionID { get; set; }
}

public class Connection
{
    public int ConnectionID { get; set; }
    public string ConnectionString { get; set; }
}

var tsql = @"SELECT A.*,C.*
                        FROM [Application] A
                        INNER JOIN [ApplicationConnections] AC on A.ApplicationID = AC.ApplicationID
                        INNER JOIN [Connections] C ON AC.ConnectionID = C.ConnectionID
                        WHERE A.ApplicationID = 122";
            var results = connection.Query<Application, List<Connection>, Application>(tsql, 
                (appl, conn) => { 
                    appl.Connections = conn; return appl; 
                }, 
                splitOn: "ApplicationID,ConnectionID").First(); 
```

我不断收到的错误是“使用 splitOn”错误，但我确信这只是冰山一角。如果有人有任何想法，我会全力以赴。

# c# - C#：如何在 MySQL 的 Insert 语句中动态插入多个参数

> ID：13232127
> 
> 赞同：0
> 
> 时间：2012-11-05T12:27:45.453
> 
> 标签：c#, asp.net, mysql

在我的场景中，我想插入具有 15 列数据的 sql 语句。还有其他方法来处理插入语句的参数吗？

```
 public bool GetCustomersList(ref DataSet dataset, String x, String y, string z, string x1, string y1, string z1 )
    {
        MySqlConnection SQLConn = GetConnection();
        try
        {
            string get_records;
            if (SQLConn.State == ConnectionState.Closed)
            {
                SQLConn.Open();
            }
            if (searchtype == "x")
            {
                get_records = "INSERT into table values(x, y,z,x1,y1,z1);
            }
            MySqlCommand command = new MySqlCommand(get_records, SQLConn);
            MySqlDataAdapter mySqlAdapter = new MySqlDataAdapter(command);
            mySqlAdapter.Fill(dataset);

            if (SQLConn.State == ConnectionState.Open)
            {
                SQLConn.Close();
            }
            return true;
        }
        catch (Exception )
        {
            if (SQLConn.State == ConnectionState.Open)
            {
                SQLConn.Close();
            }
            return false;
        }
    } 
```

这里的参数可能会扩展到15或更多？在asp.net中如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:31:14.280

我建议你使用：

```
command.Parameters.Add( ... ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:36:24.807

这将做到这一点。

```
 List<SqlParameter> myParamList = new List<SqlParameter>();
            SqlParameter myParam = default(SqlParameter);

            myParam = new SqlParameter("@RoomID", SqlDbType.Int);
            myParam.Value = x
            myParamList.Add(myParam); 
```

基本上，您创建参数列表，并使用新的 SqlParameter 为每个参数添加它，注意项目名称和项目类型。

然后将参数列表添加到命令中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:48:14.163

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677209%28v=vs.85%29.aspx)：

> 使用 CreateParameter 方法创建具有指定名称、类型、方向、大小和值的新 Parameter 对象。您在参数中传递的任何值都将写入相应的 Parameter 属性。

使用内联参数是不安全的，可能会导致 sql 注入。在 .Net 中为 sql 语句提供参数的[首选且更安全](https://stackoverflow.com/questions/4892166/how-does-sqlparameter-prevent-sql-injection)的方法是使用`SqlParameter`代替。

此外，如果你想更纯粹，同样摆脱依赖于代码中的特定实现，请改用更多接口，例如：

```
using (var connection = GetConnection())
{
    connection.Open();
    using (var command = connection.CreateCommand())
    {
        command.CommandType = CommandType.Text;
        command.CommandText = "INSERT into table(x, y) VALUES (@x, @y)";
        command.Parameters.Add(CreateParameter(command, "@x", x, DbType.String));
        command.Parameters.Add(CreateParameter(command, "@y", y, DbType.String));
        command.ExecuteNonQuery();
    }
} 
```

您的自定义`CreateParameter`包装器具有以下实现：

```
private IDataParameter CreateParameter(IDbCommand command, string name, object value, DbType type)
{
    var parameter = command.CreateParameter();
    parameter.ParameterName = name;
    parameter.Value = value;
    parameter.DbType = type;
    return parameter;
} 
```

同样，您丢弃了冗余的特定类类型，例如：`MySqlCommand`或`SqlParameter`. 此外，没有必要使用`try{} catch{}`. `Using`即使抛出异常，语句也会在 dispose 时关闭连接。如果您不需要，请不要在每次请求时/之后打开和关闭连接。利用[连接池](https://stackoverflow.com/questions/4439409/open-close-sqlconnection-or-keep-open)。

# javascript - 如何缩放 webview 使其文本内容不会换行？

> ID：13232129
> 
> 赞同：0
> 
> 时间：2012-11-05T12:27:58.590
> 
> 标签：javascript, android, webview

目前我遇到了一个问题`WebView`。我想缩放 WebView 使其文本内容不应该在增加或减少比例因子时换行。为此，我尝试使用`WebView.setScaleX(value)`，`webview.setScaleY(value)`但之后发生的事情是我无法滚动 WebView，也无法在 WebView 中看到完整的网页。因此，我需要每当 webview 比例增加或减少时，内容就会变大或缩小，这样文本就不会像我们放大或缩小一样换行并以更大/更小的尺寸显示。

你们中有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:16:23.550

在这方面没有太多经验，所以如果这是一个不好的答案，请不要投反对票，但是......根据：

[WebView android问题：不换行](https://stackoverflow.com/questions/6378211/webview-android-problem-does-not-wrap-the-text)

如果您可以访问网页内容，只需将其包装为不适合移动设备。如果您无权更改网页内容，请尝试使用 GET 请求获取 URL 以下载它，然后修改其中的文本以使用标准 HTML 包装来包装它

```
<head>
    <body>
        blah
    </body>
</head> 
```

然后将该文本数据提供给您的 webview 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:31:08.327

我只是在猜测（我自己没有尝试过），但是您是否在设置比例后尝试调用其中之一：

*   设置滚动容器
*   设置滚动条样式
*   setVerticalScrollBarEnabled
*   setHorizo​​ntalScrollBarEnabled

您可能需要调用其中之一才能在缩放视图后允许滚动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:39:48.500

不确定它在这种情况下是否有效，但您通常可以`&nbsp`在 HTML 中添加空格而不是空格，它们应该防止它被破坏 (* *N* *on * *b* *reaking * *sp* *ace)

如果可行，您可以使用`element.innerHTML = element.innerHTML.replace(/ /g,'&nbsp');`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T19:53:29.710

你必须将它的CSS而不是自动换行？这是唯一的方法，它与您的网页视图无关，除非它是其他人的网页。但如果它是你的网页，你必须明确地输入样式，以免换行

```
 white-space:nowrap; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T13:08:24.707

这是较低版本的问题，某些功能在 android 中无法正常工作

# jquery - 下拉菜单在 Android 上不起作用

> ID：13232132
> 
> 赞同：0
> 
> 时间：2012-11-05T12:28:03.950
> 
> 标签：jquery, mobile, jquery-mobile, drop-down-menu

我有一个下拉菜单在 iphone 上完美运行，但在 HTC 或 android 手机上却不行。

看看我是否遗漏了什么或者我是否应该编辑。

```
 <select name="select_page" id="select_page" class="select_page" data-mini="true" data-theme="c">

    <?php
    $pageID = 5;
        $subpages = get_pages( array(
        'child_of' => $pageID,
        'sort_order' => 'asc',
        'sort_column' => 'menu_order') );
    ?>        

    <?php if($post->post_parent) {?>
      <option value="<?php echo get_page_link($pageID) ?>" >Startpage</option>
    <?php } else {?>
      <option value="<?php echo get_page_link($pageID) ?>" selected="selected">Startpage</option>
    <?php } ?>
    <?php                                  
    foreach($subpages as $page) { $i++;
      $pages[] += $page->ID;        
    ?>
    <?php if($page->post_title == get_the_title()) {?>
      <option value="<?php echo get_page_link($page->ID) ?>" selected="selected"><?php echo $i.'. '.$page->post_title ?></option>
    <?php } else {?>
      <option value="<?php echo get_page_link($page->ID) ?>"><?php echo $i.'. '.$page->post_title ?></option>  <?php } ?>
    <?php }?> 

    </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:20:54.313

为什么你总是一次又一次地打开和关闭 php 语句？例如，而不是

```
<?php if($post->post_parent) {?>
  <option value="<?php echo get_page_link($pageID) ?>" >Startpage</option>
<?php } else {?>
  <option value="<?php echo get_page_link($pageID) ?>" selected="selected">Startpage</option>
<?php } ?> 
```

我会建议

```
 <?php
      if($post->post_parent) {
        echo "<option value=\"get_page_link($pageID)\">Startpage</option>\n";
      } else {
        echo "<option value=\"get_page_link($pageID)\" selected=\"selected\">Startpage</option>\n";
      }
  ?> 
```

等等等等

# jquery - 重新绑定点击事件

> ID：13232134
> 
> 赞同：1
> 
> 时间：2012-11-05T12:28:08.870
> 
> 标签：jquery, bind, unbind

我有一个与此非常相似的问题：重新[绑定](https://stackoverflow.com/questions/6616214/how-to-rebind-click-event-to-anchor-after-unbind)，但我不明白解决方案。

我有一个用于左右滑动 html 内容的旋转木马......带有用于滑动内容的左右图像。如果到达轮播结束，右侧滑动图片上的点击事件应该解除绑定。如果单击左侧图像，则应再次绑定右侧图像的单击事件......像下面这样重新绑定它似乎不起作用。看来我应该存储对单击事件的引用，但我无法正确处理。

```
$(document).ready(function() {  

         //when user clicks the image for sliding right  
        $('#right_scroll img').click(function(){  

            // code for sliding content to the right, unless end is reached

                if($('#carousel_ul li:first').attr('id') == fifth_lli){ // end carousel is reached

                $('#right_scroll img').removeAttr('onmouseover');
                $('#right_scroll img').removeAttr('onmouseout');
                $('#right_scroll img').removeAttr('onmousedown');
                $('#right_scroll img').unbind('click');
                $('#right_scroll img').attr("src", "Images/gray_next_1.png");   

                };
            });  

        //when user clicks the image for sliding left  
        $('#left_scroll img').click(function(){  

            //if at end of carousel and sliding back to left, enable click event for sliding on the right...
            if($('#carousel_ul li:first').attr('id') == fifth_lli){

                $('#right_scroll img').attr("src", "Images/red_next_1.png");
                $('#right_scroll img').bind('click');   // this doesn't work.

            };      
        });  

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:40:06.267

而不是取消绑定和重新绑定，只需在移动它之前检查轮播是在末尾还是开头。

```
$(document).ready(function() {
    $('#right_scroll img').click(function() {
        if ($('#carousel_ul li:first').attr('id') !== fifth_lli) {
            //slide carousel right
        }
    });
    $('#left_scroll img').click(function() {
        if ($('#carousel_ul li:first').attr('id') !== first_lli) { //changed it to first first_lli, i figure that would be the end of the left scrolling
            //slide carousel left
        }
    });
}); 
```

# arm - 在 Am-1808 上从 USB 引导 Linux (arago) 而不是 sd 卡

> ID：13232137
> 
> 赞同：0
> 
> 时间：2012-11-05T12:28:23.157
> 
> 标签：arm, embedded-linux

我有[Am-1808](http://www.logicpd.com/products/system-on-modules/zoom-am1808/)板（evm zoom kit），现在我在 spi flash 中有 ubl 和 uboot，在 SD 卡中有文件系统和内核（uImage），我按照在 am-1808 板上运行 linux 的步骤从[这里](http://processors.wiki.ti.com/index.php/GSG%3a_OMAP-L138_DVEVM_Additional_Procedures#Creating_bootable_SD_card_for_OMAP-L138_EVM_board)：

我没有找到任何可以解释从 USB 启动 linux 的官方参考/文档，是否有可能我可以将文件系统 + 内核放在 USB 中，然后告诉 uboot 查找 USB 以从 USB 而不是 sd 查找 uImage-卡片。如果是，那么你能解释一下如何吗？

从 sd 卡中查找 uImage 的 u-boot 代码部分是：

```
#define CONFIG_BOOTARGS     "mem=32M console=ttyS2,115200n8 root=/dev/mmcblk0p2     rw rootwait ip=off"
#define CONFIG_BOOTCOMMAND  "if mmc rescan 0; then if fatload mmc 0 0xc0600000 boot.scr; then source 0xc0600000; else fatload mmc 0 0xc0700000 uImage; bootm c0700000; fi; else sf probe 0; sf read 0xc0700000 0x80000 0x220000; bootm 0xc0700000; fi" 
```

我需要使用 usb 而不是 sd 卡来放置文件系统 + uImage，因为我必须将 sd 卡引脚 (mmc0) 用于其他目的。

**更新：**

[这](http://processors.wiki.ti.com/index.php/Booting_Linux_kernel_using_U-Boot#USB_Storage)解释了从 USB 启动 linux，但问题是 u-boot 无法识别“usb”命令，当我输入：usb reset 时，它给了我这个错误：

```
U-Boot > usb reset
Unknown command 'usb' - try 'help' 
```

“usb”命令也不会出现在“help”命令显示的可用命令列表中。

```
U-Boot > help
?       - alias for 'help'
askenv  - get environment variables from stdin
base    - print or set address offset
bdinfo  - print Board Info structure
boot    - boot default, i.e., run 'bootcmd'
bootd   - boot default, i.e., run 'bootcmd'
bootm   - boot application image from memory
bootp   - boot image via network using BOOTP/TFTP protocol
cmp     - memory compare
coninfo - print console devices and information
cp      - memory copy
crc32   - checksum calculation
dhcp    - boot image via network using DHCP/TFTP protocol
echo    - echo args to console
editenv - edit environment variable
env     - environment handling commands
exit    - exit script
ext2load- load binary file from a Ext2 filesystem
ext2ls  - list files in a directory (default /)
false   - do nothing, unsuccessfully
fatinfo - print information about filesystem
fatload - load binary file from a dos filesystem
fatls   - list files in a directory (default /)
go      - start application at address 'addr'
help    - print command description/usage
iminfo  - print header information for application image
imxtract- extract a part of a multi-image
itest   - return true/false on integer compare
loadb   - load binary file over serial line (kermit mode)
loads   - load S-Record file over serial line
loady   - load binary file over serial line (ymodem mode)
loop    - infinite loop on address range
md      - memory display
mdc     - memory display cyclic
mii     - MII utility commands
mm      - memory modify (auto-incrementing address)
mmc     - MMC sub system
mmcinfo - display MMC info
mtest   - simple RAM read/write test
mw      - memory write (fill)
mwc     - memory write cyclic
nfs     - boot image via network using NFS protocol
nm      - memory modify (constant address)
ping    - send ICMP ECHO_REQUEST to network host
printenv- print environment variables
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
saves   - save S-Record file over serial line
setenv  - set environment variables
sf      - SPI flash sub-system
showvar - print local hushshell variables
sleep   - delay execution for some time    
source  - run script from memory
sspi    - SPI utility command
test    - minimal test like /bin/sh
tftpboot- boot image via network using TFTP protocol
true    - do nothing, successfully
version - print monitor version 
```

知道如何在 u-boot 中指定“usb”命令吗？我需要将uboot升级到更新版本吗？

问候

乌萨马

# objective-c - 导航控制器中的方向变化

> ID：13232141
> 
> 赞同：2
> 
> 时间：2012-11-05T12:28:43.283
> 
> 标签：objective-c, ios, ios5, uinavigationcontroller, orientation

我在导航控制器中添加了三个视图控制器。第一个和第二个视图控制器应该支持两个方向，但第三个视图控制器只支持横向模式。但是当我以纵向模式从第二个视图控制器导航到第三个视图控制器时，它以纵向模式显示。我该如何纠正这个问题？我需要第三个视图控制器来仅支持横向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T21:09:42.650

这是一个 iOS 6 的答案。

要使 UINavigationController 尊重其子项的旋转首选项，请将其子类化并覆盖以下内容：

```
- (BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return self.topViewController.supportedInterfaceOrientations;
} 
```

这在创建新的 UINavigationController 和弹回早期的视图控制器时有效。更多信息在这里 - [UINavigationController 方向更改中的 ViewController](https://stackoverflow.com/questions/14402401/viewcontroller-in-uinavigationcontroller-orientation-change)

要在推送新的视图控制器时使其工作，请将其添加到您的子类中：

```
- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    [super pushViewController:viewController animated:animated];

    UIViewController *viewController = [[UIViewController alloc] init];
    [self presentViewController:viewController animated:NO completion:nil];
    [self dismissViewControllerAnimated:NO completion:nil];
} 
```

过渡有点不愉快，但它完成了工作。更多信息在这里 -[从横向到纵向的问题 pushViewController](https://stackoverflow.com/questions/4822372/problem-pushviewcontroller-from-landscape-to-portrait)

# python - Python ; 如果条件 = false 则返回一行

> ID：13232145
> 
> 赞同：-4
> 
> 时间：2012-11-05T12:29:00.773
> 
> 标签：python

在我的标题中，我的意思是：

```
 myCellar = ["doritos", "chips", "chocolates", ""]
    productsInDemand = input("Write a product : ")

   for supply in myCellar :
      if productsInDemand == supply:
         print("This product we have : '",productsInDemand ,"'")
         break
   else:
      print("This product we have not : '",productsInDemand ,"'")
      (go back to the line 1) 
```

如果我要编写一个在“mycellar”中不存在的产品，那么程序将返回第一行再次编写产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:31:51.060

只需使用无限`while True`循环：

```
while True:
    myCellar = ["doritos", "chips", "chocolates", ""]
    productsInDemand = input("Write a product : ")
    if productsInDemand in myCellar:
        print("This product we have : '", productsInDemand, "'")
        break
    print("This product we have not : '", productsInDemand, "'") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:36:11.450

尝试这样的事情：

```
myCellar = ["doritos", "chips", "chocolates", ""]
productsInDemand = input("Write a product : ")

while productsInDemand not in myCellar :
    print("This product we have not : '",productsInDemand ,"'")
    productsInDemand = input("Write a product : ")

print("This product we have : '",productsInDemand ,"'") 
```

**输出：**

```
Write a product : foo
This product we have not : ' foo '
Write a product : bar
This product we have not : ' bar '
Write a product : doritos
This product we have : ' doritos ' 
```

# c++ - XCode 中 MathGL 的链接器错误

> ID：13232149
> 
> 赞同：0
> 
> 时间：2012-11-05T12:29:10.423
> 
> 标签：c++, xcode, linker, mathgl

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我正在尝试使用带有 XCode 的 MathGL 在 3D 图上绘制一些矩阵。我设法（经过一整天的挫折）cmake、制作和安装 MathGL（甚至必须安装 libpng，但这是一个不同的故事）。因此，我设法将 MathGL 包含路径 ( */usr/local/include* ) 添加到 XCode C++ 项目并且它正在工作，因为自动完成会自动完成`mgl2/mgl.h`头文件。然而，当我尝试构建只创建一个`mglGraph`成员的代码时，我遇到了许多链接器错误：

```
架构 i386 的未定义符号：
  “_mgl_create_graph”，引用自：
      main.o 中的 _main
  “_mgl_delete_graph”，引用自：
      main.o 中的 mglGraph::~mglGraph()
  “_mgl_set_font_size”，引用自：
      main.o 中的 mglGraph::SetFontSizePT(double, int)
  “_mgl_use_graph”，引用自：
      main.o 中的 mglGraph::~mglGraph()
ld：未找到体系结构 i386 的符号

```

我知道那里有很多帖子（甚至是我的帖子）列出了正确包含等问题，但是我找不到任何帮助。所以请任何人，我该如何让它工作？

我尝试更改/修改环境 PATH 和 DYLD_* 路径以包含*/usr/local/...*路径，但这不起作用。我尝试将*/usr/local/*中的所有文件夹添加到包含路径。我试过用 32 位和 64 位编译。我尝试在库搜索路径中包含*/usr/local/lib 。*但没有任何效果。因此，非常感谢任何帮助。

问候马克斯

# c# - 为单声道更改 webkit-sharp 上的代理设置

> ID：13232153
> 
> 赞同：1
> 
> 时间：2012-11-05T12:29:18.280
> 
> 标签：c#, proxy, mono, webkit, browser

我真的是 Mono 开发的新手，并且一直在尝试创建一个小型应用程序（没有工具栏，没有 url 输入字段），它打开一个固定的 url 并向用户显示页面，我能够通过遵循一些教程来完成它在互联网上（我在这个网站上找到的基本想法：http: [//mapopa.blogspot.com.br/2011/05/webkit-based-webbrowser-written-in-mono_29.html](http://mapopa.blogspot.com.br/2011/05/webkit-based-webbrowser-written-in-mono_29.html)）。

现在我想知道是否有办法为这个组件设置代理设置（来自 webkit-sharp 的 webview），我一直在挖掘它的 API 并搜索文档，到目前为止没有运气，任何帮助都是真的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:04:24.940

显然托管包装器不公开此功能。以下快速破解应该足以让您入门：

```
public class SoupSession
{
    [DllImport("webkit-1.0")]
    static extern IntPtr webkit_get_default_session();

    [DllImport("soup-2.4")]
    static extern IntPtr soup_uri_new(string uri);

    [DllImport("gobject-2.0")]
    static extern void g_object_set(IntPtr obj, string name, IntPtr value, IntPtr zero);

    public static void SetProxy(string uri)
    {
        IntPtr session = webkit_get_default_session();
        g_object_set(session, "proxy-uri", soup_uri_new(uri), IntPtr.Zero);
    }
} 
```

请注意，为简洁起见，我省略了 utf-8 转换。如果你愿意，你可以把它变成一个合适的包装类。

# c - 如何从整数创建时间字符串

> ID：13232158
> 
> 赞同：1
> 
> 时间：2012-11-05T12:29:43.733
> 
> 标签：c, string, integer, char

我在 C 中有以下内容：

```
char time[8];
int hour= 5;
int minute = 4;
int second = 13; 
```

输出应如下所示；

```
Output:
"05:04:13" //printf("%s",time); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:31:07.227

`snprintf()`如果有就使用，否则`sprintf()`：

```
snprintf(time, sizeof time, "%02d:%02d:%02d", hour, minute, second); 
```

请注意，您的缓冲区太小，您需要 2 + 2 + 2 的数字，再加上两个冒号，再加上一个终止字符。所以至少应该是`char time[9];`。如果使用`snprintf()`，它将正确截断并且不会导致缓冲区溢出，但`sprintf()`会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:30:50.830

您可以使用：

```
sprintf(time, "%02d:%02d:%02d", hour, minute, second);
printf("%s",time); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:42:35.410

只是通过转换`int`为`char`字符串来实现相同结果的另一种（更长）方法。

```
int hour= 5;
int minute = 4;
int second = 13;
char hr[3];
char min[3];
char sec[3];

itoa(hour, hr, 10);
itoa(minute, min, 10);
itoa(second, sec, 10);

printf("%s:%s:%s", hr,min,sec); 
```

但只是为了说明[这个](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)功能是`is not defined in ANSI-C and is not part of C++, but is supported by some compilers.`

# ios - 在 5.xI 的操作系统中，无法设置视图边界以使图像适合它

> ID：13232166
> 
> 赞同：0
> 
> 时间：2012-11-05T12:30:12.613
> 
> 标签：ios, uiview

`MTDealAnnotationView *view = (MTDealAnnotationView *)[_mapView viewForAnnotation:an]; view.bounds = CGRectMake(0, 0, iconWidth, iconHeight); view.alpha = alph;`

上面的代码是我在我的应用程序中编写的。

在这个视图中是一个图像。

iconWidth 是`17`，iconHeight 是`20`。图像的大小为`30x35`。

我曾经得到的结果是视图中的图像其大小也是`17x20`如此。

但是现在图像的大小是`30x35`. 但这只会发生在运行 iOS5.x 的设备上。iOS6 不错。

任何人都可以告诉我发生了什么事吗？

# c++ - 在 MFC GUI 应用程序中，我想在控制台窗口中显示正在进行的进程的信息。帮我解决这个问题

> ID：13232169
> 
> 赞同：0
> 
> 时间：2012-11-05T12:30:24.983
> 
> 标签：c++, winapi, mfc

工作的简化形式在按钮单击处理程序中给出。示例输出未显示在窗口中。帮我解决这个..

```
 void CConsoleWriteExDlg::OnBnClickedButtonConsole()
    {
        if (::AllocConsole())
        {
            HANDLE hOutConsole = ::GetStdHandle(STD_OUTPUT_HANDLE);
            DWORD bytes_written;
            ::WriteConsole(hOutConsole, "Sample Output", sizeof(TCHAR) * strlen("Sample Output"), &bytes_written, NULL);
            ::FreeConsole();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:29:09.627

我建议你试试这个项目： http: [//www.codeproject.com/Articles/15836/Writing-to-and-read-from-the-console-From-a-GUI-ap](http://www.codeproject.com/Articles/15836/Writing-to-and-read-from-the-console-From-a-GUI-ap)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T13:04:56.333

使用点运算符和引用变量打开（调用）控制台。该片段为演绎留下了空间，但您似乎直接调用了这些函数。尝试创建一个实例并调用该实例的函数。

通过为它定义一个引用变量来创建控制台实例（因此调用构造函数，不确定句柄是否足以实例化它）。如果您希望控制台继续存在，请相应地选择您在其中创建它的功能。

希望这可以帮助

# java - Onshake 方法：活动应该只开始一次

> ID：13232174
> 
> 赞同：0
> 
> 时间：2012-11-05T12:30:37.583
> 
> 标签：java, android, android-activity, android-sensors

我正在使用 onShake 方法开始一项活动..每次我摇晃时，活动都会开始，但我希望活动仅在我第一次摇晃时开始......我在这里看到了类似的问题：[使用 onShake 方法开始新活动](https://stackoverflow.com/questions/7067633/start-new-activity-using-onshake-method)..但不能从中得到太多..下面是我的代码

```
public class ShakeListenerTestActivity extends Activity
{
  private ShakeListener mShaker;

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);              

    final Vibrator vibe = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

    mShaker = new ShakeListener(this);
    mShaker.setOnShakeListener(new ShakeListener.OnShakeListener () {
      public void onShake()
      {
   vibe.vibrate(100);

        new AlertDialog.Builder(ShakeListenerTestActivity.this)
          .setPositiveButton(android.R.string.ok, null)
          .setMessage("Do stuff here!!")
          .show();
 }
    });

  @Override
  public void onResume()
  {
    mShaker.resume();
    super.onResume();
  }
  @Override
  public void onPause()
  {
    mShaker.pause();
    super.onPause();

  }  
} 
```

在我的shakelistener 类中，我在pause() 方法中使用了unregisterListener。

```
 public void pause() {
        if (mSensorMgr != null) {

          mSensorMgr.unregisterListener(this);
          mSensorMgr = null;
        }
      } 
```

我在这里缺少什么任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:36:11.153

你为什么不摆脱`mShaker`它什么时候做它应该做的事情？构建后`AlertDialog`，只需调用`mShaker...whatever destroys it`或至少`mShaker.pause`。如果这不是答案，对不起，我误解了您的问题。

# actionscript-3 - ByteArray readFloat 问题 - ActionScript 3

> ID：13232175
> 
> 赞同：1
> 
> 时间：2012-11-05T12:30:47.543
> 
> 标签：actionscript-3, flash, actionscript, bytearray

有人可以向我解释一下，为什么会这样？

```
var float:Number = 1.40;
var bytes:ByteArray = new ByteArray();

trace('float: ' + float);
bytes.writeFloat( float );
bytes.position = 0;
trace('bytes.readFloat: ' + bytes.readFloat() ); 
```

跟踪输出：

```
>> float: 1.4
>> bytes.readFloat: 1.399999976158142 
```

在过去的几个小时里，这让我发疯了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:46:04.307

`ByteArray.writeFloat()`只写入 4 个字节，这意味着存储了一个单精度浮点值。你必须打电话`writeDouble()`来写你的浮点数，即使那样你也可能会失去精度，尽管这种损失不会那么严重。这是浮点类型的核心限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:49:16.940

这适合你在这里使用 double 吗？

这应该可以正常工作：

```
var double:Number = 1.40;
var bytes:ByteArray = new ByteArray();

trace('double: ' + double);
bytes.writeDouble( double );
bytes.position = 0;
trace('bytes.readDouble: ' + bytes.readDouble() ); 
```

# sql - 在映射表中获取包含值的所有相关行

> ID：13232177
> 
> 赞同：0
> 
> 时间：2012-11-05T12:30:52.520
> 
> 标签：sql, sql-server-2008

我什至不知道如何开始搜索这个。

让我解释一下我想要做什么：

我有一个变量值映射表。 **一个变量可以分配多个值，也可以将同一个值分配给多个变量**。

用户能够删除变量/值。但是，**如果有任何变量只分配了该特定值，则不应允许删除该值**。否则变量将保持未被删除，但分配了 0 值，这是错误的。

现在，在用户尝试从特定变量中删除值时，我想检查：

**如果对于选定的 valueID，有任何 variableID 只分配了一个 valueID，并且该 valueID 是用户试图删除的那个。** 如果是，则中止。否则继续。

这有可能吗？

表名：

```
Variable
Value
Variable_Value ( mapping table ) 
```

字段名称（在所有表中）：

```
Variable_ID
Value_ID 
```

下面的例子：

```
For example Variable_ID 5 only has Value_ID 10 assigned to it. 
If a user selects a Variable_ID, he sees all assigned Value_IDs 
and is able to select one and try to delete it. So, a user could click 
on Variable_ID 3 and try to delete Value_ID 10\. That shouldn't 
be possible if that specific Value_ID is the only assigned 
value to any other Variable, because that would leave that 
variable with no Value_IDs. 
```

![](../Images/4521add599844cb0b417bd933550dbc9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:21:23.147

通过分解您的要求，我认为您需要的逻辑是这样的：

1.  首先获取`VariableId`特定的 s `ValueId`：

    ```
    DECLARE @VALUE_ID INT
    SET @VALUE_ID = 10;

    SELECT DISTINCT VariableId
    FROM VARIABLE_VALUE
    WHERE ValueId = @VALUE_ID 
    ```

2.  在此查询之后，您将拥有`VariableId`具有该特定值的所有 s。然后，*对于*这些`VariableId`s 中的每一个，您需要`COUNT`它们具有的值的数量。

    ```
    SELECT VariableId, COUNT(ValueId) as Values
    FROM VARIABLE_VALUE
    WHERE VariableId IN (--- The result of the query in step 1 ---)
    GROUP BY VariableId 
    ```

3.  如果**甚至有一个** `VariableId`计数返回 1，则您**无法**继续删除。

附言。我不知道 SQL 是否有效，我只是想提出我的答案背后的总体思路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:42:42.430

这应该这样做：

```
DECLARE @Value INT -- the right datatype here
DECLARE @VariableId INT -- the right datatype here
SET @Value = 10
SET @VariableId = 1

;WITH CTE AS
(
    SELECT  *, COUNT(*) OVER() Total,
            COUNT(CASE WHEN Value = @Value THEN 1 END) OVER() TotalValue
    FROM Variable_Value
    WHERE VariableId = @VariableId
)
DELETE FROM CTE
WHERE Total = TotalValue 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:33:46.100

好吧，也许我的问题更好。

*如果有任何变量只分配了这个特定的值，*让我们只关注语句。

因此，您需要查询所有变量，(1) 使用此值，(2) 是唯一的值。

```
SELECT AA.Variable_ID
FROM Variable_Value AA
  LEFT OUTER JOIN Variable_Value BB
    ON AA.Value_ID = ? AND AA.Variable_ID = BB.Variable_ID AND BB.Value_ID <> ?
GROUP BY AA.Variable_ID 
```

这些是*可以*删除的变量。

# networking - 封装 TCP 数据包

> ID：13232180
> 
> 赞同：1
> 
> 时间：2012-11-05T12:31:04.110
> 
> 标签：networking, tcp, udp, encapsulation, wifi

我正在撰写有关 802.11 无线网络的研究论文。我正在研究的主题之一是将整个 TCP 数据包封装在 UDP 段中。具体来说，我正在研究封装无线客户端和接入点之间发送的 TCP 数据包。

这样做的原因是为了停止 TCP 和 802.11 MAC 之间的交互。

我的问题是：在不使用代理或基于服务器的转换器的情况下，在两点之间引入 UDP 封装在技术上是否可行？如果是这样，需要做什么样的事情？

我不是程序员，所以我不需要详细的答案，只需要高级概述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:04:42.127

当然，做 TCP-within-UDP 封装是可行的。有一个关于这个主题的 IETF 草案：[UDP-Encapsulated Transport Protocols](https://datatracker.ietf.org/doc/html/draft-denis-udp-transport-00)。请注意，作者隶属于诺基亚，因此他们正在寻找与您完全相同的东西。

然而，对于任何封装协议，连接的每一端都必须有*一些协议栈中的代码。*因此，如果您不使用代理，则客户端和接入点都需要本机支持。作为一个类比，看看[IPsec](http://en.wikipedia.org/wiki/IPsec)的架构，它使用 IP-within-IP 封装，并且在所需的实现轨迹方面具有基本相同的属性。

# perl - 在父 Perl 脚本中导入由批处理文件设置的环境变量

> ID：13232183
> 
> 赞同：0
> 
> 时间：2012-11-05T12:31:08.270
> 
> 标签：perl, environment-variables

我正在用 Perl 编写一个用于代码编译的跨平台构建脚本。

在 Windows 中，我需要执行 vsvars32.bat 来设置环境变量：

```
sub set_win_env {
      #MSVC version 9.0 is installed
      $VS90COMNTOOLS = $ENV{'VS90COMNTOOLS'};
      $VS90COMNTOOLS .= "vsvars32.bat"
      if($VS90COMNTOOLS ne "") {
          system("$VS90COMNTOOLS");
      }
 } 
```

通过执行批处理文件设置的环境变量会丢失，因为解释器会生成另一个 shell 来执行批处理文件。

如何在父 Perl 脚本中导入这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:03:49.803

如您所说， using`system`将在子进程中设置环境变量，而不是在当前进程中。问题是您有一个“.bat”格式的文件，它是与 Perl 不同的语言（好吧，也许称它为一种语言有点强）。

您需要自己解析文件并将其翻译成 Perl，或者从 .bat 文件运行您的 perl，该文件具有（例如）：

```
CALL "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat" amd64
perl perlscript.pl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:09:30.940

如果您的 BAT 文件很简单（即它只包含格式为 的行`VAR=VALUE`），您可以通过 Perl 对其进行解析。如果还有更多事情发生（某些值是从其他值计算出来的等），只需在 BAT 脚本末尾以`VAR=VALUE`.

简单格式的解析很简单：

```
while (<$BAT>) {
    chomp;
    my ($var, $val) = split /=/, $_, 2;
    $ENV{$var} = $val;
} 
```

# ruby - 如何在侧边栏中打开新的 Rails 窗口

> ID：13232186
> 
> 赞同：0
> 
> 时间：2012-11-05T12:31:13.763
> 
> 标签：ruby, ruby-on-rails-3, twitter-bootstrap

我正在使用 Rails 3/Bootstrap/JQuery UI。我有一个创建操作，要求用户在提交之前输入一些参数。我尝试了一个 Javascript JQuery UI 对话框模态表单，但它没有使用已经编写的操作代码。问题是用户不喜欢打开一个全新的窗口（然后不得不点击返回）

所以我想打开动作，但在侧边栏中进行，而不是在新窗口中进行。

Rails 3 中的最佳实践是什么？

添加更多说明。我的意思是“动作”是一个模态对话框，我在其中收集创建所需的参数。我想把那个“模态对话框”放到边栏中。相反，现在，我将“模态对话框”作为一个全新的窗口打开，然后用户单击“创建”，并创建了新对象。

我认为我的主要问题是 - 我如何打开“侧边栏中的新窗口”？

添加了编辑：这是用户要按下的按钮的代码：（将猫添加到现有客户端）

```
<%= link_to "New Cat", new_client_cat_path(@client), :class => "btn btn-primary btn-large" %> 
```

现在，这里是cats/new.html.erb：

```
<h2>New Cat</h2>
<%= render "form" %>
<%= link_to "Cancel", @client, :class => "btn btn-primary btn-large" %> 
```

然后是cats/_form.html.erb：

```
<%= form_for [@client, @cat] do |f| %>
<%= f.error_messages %>
<%= f.submit @submit_label, :class => "btn btn-primary btn-large" %>
<% end %> 
```

我想要的是“new.html.erb”——让用户同意的表单——在侧边栏中弹出，而不是打开一个全新的窗口。我希望能够将“new.html.erb”放入位于主页上的小盒子中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:27:25.403

如果创建表单是静态的，则已经拥有它，然后单击使其使用 javascript 可见。使用 ajax 调用创建

```
<%= form_for @model, :remote => true do |frm| %>
    ...
    ...
<% end %> 
```

在操作中创建对象，并渲染 :nothing => true 或仅更新所需的页面部分

# java - Soap 错误：请求的 XML 验证错误：cvc-complex-type.4：属性“Id”必须出现在元素上

> ID：13232193
> 
> 赞同：1
> 
> 时间：2012-11-05T12:31:28.863
> 
> 标签：java, php, web-services, soap, soap-client

我正在从 php 程序请求 java soap web 服务。我的代码就像跟随

```
<?php
 $options = array('features' => 
    SOAP_USE_XSI_ARRAY_TYPE + SOAP_SINGLE_ELEMENT_ARRAYS);
try{
     $sClient = new SoapClient('http://192.168.1.101:8080/person/Person.wsdl');
    //  $sClient = new SoapClient('http://192.168.1.11:8080/DNAHMS/webservice/onlineBooking/Hotel.wsdl',$options);
        //$params = array('Id'=> '1');
        echo "<pre>";
        print_r($sClient->__getFunctions());
        echo "</pre>";

        $parms  = array("Id"=>1);
        $response = $sClient->__call('getPerson',$parms);
        echo "<pre>";
        print_r($response);
        echo "</pre>";

    } catch(SoapFault $e){
        echo "<pre>";
            var_dump($e);
        echo "<pre>";
    }
    ?> 
```

这里我是 Person.wsdl，当我直接调用浏览器时它没有错误，而且这是有效的 xml 文件。当我运行它时，我会得到如下所示的肥皂故障：

cvc-complex-type.4：属性“Id”必须出现在元素“ns1:GetPersonRequest”上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T08:28:16.733

这个链接可以帮助你：

[http://php.net/manual/en/soapclient.soapcall.php](http://php.net/manual/en/soapclient.soapcall.php)

[如何使用 SoapClient 类进行 PHP SOAP 调用](https://stackoverflow.com/questions/11593623/how-to-make-a-php-soap-call-using-the-soapclient-class)

# android - 如何通过android中的Web服务对用户进行身份验证？

> ID：13232195
> 
> 赞同：0
> 
> 时间：2012-11-05T12:31:39.390
> 
> 标签：android, web-services, webservice-client

我对网络服务很陌生。目前我正在开发一个需要通过 web 服务对用户进行身份验证的 android 应用程序（意味着用户名和密码存储在远程数据库中）。谁能告诉我，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:51:48.387

您可以使用 REST 网络服务，请查看以下链接

[Android连接远程服务器Mysql](http://android-am.blogspot.in/2012/10/android-login-screen-by-connecting-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:03:32.190

我不确定您使用的是什么网络服务。如果您的 Ksoap 2 网络服务。

CheckNetwork C0de

```
 public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
       context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         //Toast.makeText(context, "No Internet Connection", 1000);
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
 } 
```

在你的活动 onCreate()

```
 Name =mEditTextUsername.getText().toString();
  Pass= mEditTextPassword.getText().toString();
  new TheTask().execute(Name,Pass);

class TheTask extends AsyncTask<String, Integer, Void>{
    ProgressDialog pd;

    @Override
    protected void onPreExecute() {
        pd=new ProgressDialog(Login.this);
        pd.setTitle("Authenticating");
        pd.show();

    }

    @Override
    protected Void doInBackground(String... params) {   
        authenticate(params[0],params[1]);
        return null;

    }

    @Override
    protected void onPostExecute(Void result) {
        pd.dismiss();
       }
    public void authenticate(String name, String pass)
    {
    if(CheckNetwork.isInternetAvailable(Login.this))
    {

        SoapObject request = new SoapObject("NameSpace", "method name");
                PropertyInfo loginreq = new PropertyInfo();
        loginreq.name="LoginReq";
        loginreq.type=String.class;
                    loginreq.setValue(your request value);
                    request.addProperty(loginreq);  
            SoapSerializationEnvelope envelop = new      SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelop.setOutputSoapObject(request);
            System.out.println("Request is"+request); 

        HttpTransportSE androidHttpTransport = new   HttpTransportSE ("your wsdl link");
        androidHttpTransport.debug=true;                                                                  androidHttpTransport.call("YOUR LOGINREQUST", envelop);
        SoapObject response=(SoapObject) envelop.bodyIn;
        System.out.println("Response is......"+response.toString());//get your response
    } 
```

Webservice 以代码标签 1 表示成功，0 表示失败。这也取决于webservice响应的设计。上面的代码使用soap webservice工作。也看看这个链接。[如何连接android和mysql服务器？](https://stackoverflow.com/questions/7131751/how-to-connect-android-and-mysql-server).

# http - Cometd dojo 应用程序 - 带有 glassfish 的 HTTP 408

> ID：13232200
> 
> 赞同：0
> 
> 时间：2012-11-05T12:32:04.193
> 
> 标签：http, dojo, glassfish, comet

我配置并开发了一个内网应用程序，它结合了：spring 3.0.5（包括安全）+ CometD 2.3.1。

为了设置cometd，我参考了： [http ://docs.cometd.org/2.4.3/reference/#java_server_services_integration_spring](http://docs.cometd.org/2.4.3/reference/#java_server_services_integration_spring)

当我在码头运行我的应用程序时，一切正常。但是当我尝试在 glassfish v2 中运行它时，我“随机”得到 HTTP 408 。server.log 中的错误：

```
 [#|2012-11-02T15:43:50.428+0100|SEVERE|sun-appserver9.1|javax.enterprise.system.container.web|_ThreadID=17;_ThreadName=httpSSLWorkerThread-9000-0;_RequestID=eb9ebc97-ac0f-48fe-8793-cfc9fd3e7b3a;|StandardWrapperValve[default]: PWC1406: Servlet.service() for servlet default threw exception
java.lang.IllegalStateException
    at org.apache.coyote.tomcat5.CoyoteResponseFacade.sendError(CoyoteResponseFacade.java:433)
    at javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:141)
    at org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper.sendError(SaveContextOnUpdateOrErrorResponseWrapper.java:54)
    at org.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:740)
    at org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:384)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at org.apache.catalina.core.ApplicationFilterChain.servletService(ApplicationFilterChain.java:411)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:317)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:198)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) 
```

从 IE 客户端的角度来看，我的 cometD 连接不稳定：

```
13:16:16 - CometD Connection Established
13:16:16 - CometD Connection Broken
13:16:17 - CometD Connection Established
13:16:17 - CometD Connection Broken
13:16:20 - CometD Connection Established
13:16:20 - CometD Connection Broken
13:16:21 - CometD Connection Established
13:16:21 - CometD Connection Broken
13:16:22 - CometD Connection Established
13:16:23 - CometD Connection Broken 
```

但是尽管有错误消息，cometd 连接仍然有效：订阅操作正常，并且从服务器成功接收到通知。

注意：我在同一个 glassfish 域中部署了示例 dojo-chat 应用程序（我将其作为模型），它运行良好！

我可能错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:00:53.707

事实上，我在 cometD 示例 WAR 中找到了答案（在 web.xml 文件中）：

```
<!-- Portability Filter, needed only to run on non Jetty or non Servlet-3.0 containers -->
<filter>
    <filter-name>continuation</filter-name>
    <filter-class>org.eclipse.jetty.continuation.ContinuationFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>continuation</filter-name>
    <url-pattern>/cometd/*</url-pattern>
</filter-mapping> 
```

这个过滤器不在我的 web.xml 中。我不明白的一点是演示应用程序运行良好（使用相同的 servlet 容器）而过滤器被评论的原因？！？

# python - 使用 urlopen 获取页面源的问题

> ID：13232203
> 
> 赞同：-3
> 
> 时间：2012-11-05T12:32:17.703
> 
> 标签：python, urllib2, urlopen

该网站[http://rockantenne.de/webplayer](http://rockantenne.de/webplayer)上的网络播放器有一个播放列表，其中包含当天迄今为止播放的所有歌曲。

当我在*Firefox*中并按 Ctrl-U 查看页面的源代码时，我可以看到所有播放的歌曲。但是，如果我使用**urllib2.urlopen**然后 read() 它，除了歌曲被忽略之外，一切都是一样的。

谁能告诉我这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:34:33.173

该页面使用 AJAX 从[http://www.rockantenne.de/webplayer/xml/livesongcache.xml?82321](http://www.rockantenne.de/webplayer/xml/livesongcache.xml?82321)异步加载歌曲列表。

而是加载该 URL，然后自己解析返回的 XML。

# image - 自动下载多个图像

> ID：13232204
> 
> 赞同：0
> 
> 时间：2012-11-05T12:32:21.750
> 
> 标签：image, download

如何自动从网站下载多个图像？另外我有一堆图片 URL 链接。是否可以输入这些图像 URL 链接，以便我可以自动下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:42:11.160

如果您使用 firefox，请查看此插件 [https://addons.mozilla.org/en-US/firefox/addon/downthemall/](https://addons.mozilla.org/en-US/firefox/addon/downthemall/)

# javascript - 更改变量效果以前在 javascript 中保存的数组值

> ID：13232205
> 
> 赞同：1
> 
> 时间：2012-11-05T12:32:24.123
> 
> 标签：javascript, openlayers

我对javascript有一个非常奇怪的问题。我用 OpenLayers 和 OSM 的 mapdata 制作了一张地图。每次我绘制一个特征（点或线）时，我都会在草图完成时触发一个函数，`redrawFeatures`主要是为了分割线并给每条线一个起点和一个终点。到目前为止一切正常，但我也想将绘制的点（和线）从地图投影（EPSG：900913）转换为显示投影（EPSG：4326）并且存在问题。以下代码是函数：

```
var pointsOnMap = [];
var linesOnMap = [];

function redrawFeatures(e) {
    var vert = e.feature.geometry.getVertices();
    var points = [];
    var pointFeatures = [];
    var lineFeatures = [];

    for (var i = 0; i < vert.length; i++) {
        var point       = new OpenLayers.Geometry.Point(vert[i].x, vert[i].y);

        points.push(point);
        alert(points[i].x + ', ' + points[i].y);
        pointFeatures.push(new OpenLayers.Feature.Vector(point));
        alert(points[i].x + ', ' + points[i].y);
        pointsOnMap.push(point.transform(new OpenLayers.Projection("EPSG:900913"),
                                         new OpenLayers.Projection("EPSG:4326")));
        alert(points[i].x + ', ' + points[i].y);
        if (i >= 1) {
            var line = new OpenLayers.Geometry.LineString([points[i-1], points[i]]);

            lineFeatures.push(new OpenLayers.Feature.Vector(line));
            linesOnMap.push(line.transform(new OpenLayers.Projection("EPSG:900913"),
                                           new OpenLayers.Projection("EPSG:4326")));
        }
    }

    draw.destroyFeatures([e.feature]);
    draw.addFeatures(lineFeatures);
    draw.addFeatures(pointFeatures);

} 
```

命名的变量`draw`是我绘制的图层。

我从事件中确定坐标，创建一个新点（第 11 行）并将它们保存到一个数组中（第 13 行）。将同一点转换为特征并将其保存到另一个数组中（第 15 行）在名为 的第一个数组的先前保存的值中`points`。我提醒保存的坐标三次的值，这是我得到但不明白的：

[警报 1](http://i.imagebanana.com/img/23438e11/Selection_003.png)（第 14 行）没错，我得到了点的坐标

警报 2（第 16 行）仍然正确（与第一个相同）

[警报 3](http://i.imagebanana.com/img/rnygtpba/Selection_005.png)（第 19 行）现在错误了！我像以前一样警告相同的变量，但在转换后`point`的值`points[i]`也无缘无故地改变了。

有什么我没有意识到的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:37:45.273

似乎转换函数就地运行，并修改了现有`point`数据。如果要保留以前的值，则应该克隆该点，然后对其进行操作

```
clone = point.clone(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:36:54.570

在 JavaScript 中：

```
var a = [1,2,3]
var b = a; //Here you are actually copying the reference of a
b.push(4); //This will also add 4 to a...a = [1,2,3,4] now
//In order to actually copy the array instead of reference u need to clone it as follows
var c = a.slice(); //creates a clone of a
c.push(5); // c = [1,2,3,4,5] and a = [1,2,3,4] 
```

# mysql - MySQL查询，其中一列行的结果与下一行相加

> ID：13232206
> 
> 赞同：1
> 
> 时间：2012-11-05T12:32:28.597
> 
> 标签：mysql, sql, select, sum

我使用了一个类似的查询

```
SELECT app_id, SUM(amount), date 
FROM abc 
GROUP BY app_id,date 
```

结果显示如下

```
1   10   1-2-2000
2   20   1-2-2000
3   30   1-2-2000
1   20   2-2-2000
2   40   2-2-2000
3   50   2-2-2000 
```

我想通过新列获得所需的结果

```
1   10   1-2-2000
2   30   1-2-2000   # sum of amount of app_id=1 and app_id=2
3   60   1-2-2000   # sum of amount of app_id=1 and app_id=2 and app_id=3
1   20   2-2-2000
2   60   2-2-2000   # sum of amount of app_id=1 and app_id=2
3  110   2-2-2000   # sum of amount of app_id=1 and app_id=2 and app_id=3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:48:51.747

尝试这个：

```
SELECT a.app_id, (SELECT SUM(amount) FROM abc b WHERE a.date = b.date AND b.app_id <= a.app_id) amount, a.date 
FROM abc a; 
```

# ios - XCode 4.5.1，应用程序窗口应在应用程序启动结束时有一个根视图控制器

> ID：13232209
> 
> 赞同：1
> 
> 时间：2012-11-05T12:32:40.767
> 
> 标签：ios, xcode, ipad, ios6

我已经升级`XCode`到`4.5.1`了，以便在我的新 iPad 中使用`IOS 6.0.1`. 之后，我在编译后在控制台上收到此错误：

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

而且我的应用程序进入了与主屏幕不同的屏幕，并且按钮根本不起作用。

在旧版本中，`XCode`它起到了一种魅力。

对正在发生的事情有任何想法吗？

在应用程序委托上，我有这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.

    // Add the view controller's view to the window and display.

    [self.window addSubview:viewController.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

***只是为了更新，我可以再次获取我的应用程序的唯一方法是删除 Xcode 4.5.1 并返回到 Xcode 4.4.1。.xib 文件中似乎存在问题，并且界面生成器无法正确链接最新版本中的对象。我不知道为什么***

一个有趣的事实是，在我更新 XCode 之前，我无法使用 ios 6.0.1 在 ipad 上运行我的应用程序（我正在为 IOS 5.1 编译）降级后它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:34:49.843

转到 AppDelegate 类并添加：

```
self.window.rootViewController = self.viewController; 
```

# html - 适用于 Windows 的免费 HTML/CSS/JQuery 编辑器

> ID：13232213
> 
> 赞同：-6
> 
> 时间：2012-11-05T12:32:58.037
> 
> 标签：html, css

适用于 Windows 的免费 HTML/CSS/JQuery 编辑器。你有什么想法？我现在使用记事本，但想要别的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:33:50.703

Visual Studio Express 似乎是一个不错的选择。它非常先进。看看这里：[Visual Studio Express For Web](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:36:52.203

您想要所见即所得或文本编辑器？Sublime Text 2 是一个非常强大的文本编辑器。

你想要所见即所得？ [编辑](http://bit.ly/SNhomO)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:33:48.973

试试记事​​本++。它非常强大，但同时又很轻。这是从记事本升级而来的舒适体验。

[http://notepad-plus-plus.org/](http://notepad-plus-plus.org/)

# iphone - 更改 UINavigationController 中的视图高度

> ID：13232214
> 
> 赞同：6
> 
> 时间：2012-11-05T12:33:04.277
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

我想更改 a`UIViewController's`内部视图的高度`UINavigationController`以在底部显示横幅，以免遮挡任何内容。

我认为只需更改视图中的框架，这将非常容易，`viewDidLoad`但这不起作用：

```
CGRect frame = self.view.frame;
self.view.frame = CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, frame.size.height - 49.0f); 
```

我也尝试添加

```
[navigationController.view setAutoresizesSubviews:NO]; 
```

启动后，`UINavigationController`但它仍然看起来一样。

我现在能想到的唯一选择是在内部使用一个会被横幅遮挡`UINavigationController`的假人，但这对我来说似乎不必要地复杂。`UITabBarController`

有什么办法可以改变视图控制器视图的高度`UINavigationController`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:46:52.450

无法从视图控制器中更改视图控制器的视图，但您可以使用自定义容器视图控制器：

```
// Create container
UIViewController* container = [[UIViewController alloc] init];

// Create your view controller
UIViewController* myVc = [[MyViewController alloc] init];

// Add it as a child view controller
[container addChildViewController:myVc];
[container.view addSubview:myVc.view];
myVc.view.autoresizingMask = UIViewAutoresizingMaskFlexibleWidth | UIViewAutoresizingMaskFlexibleHeight;
myVc.view.frame = CGRectMake(0, 0, container.view.bounds.size.width, container.view.bounds.size.height-200);

// Add your banner
UIImageView* imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"banner"]];
imgView.autoresizingMask = UIViewAutoresizingMaskFlexibleWidth| UIViewAutoresizingMaskFlexibleTopMargin;
imgView.frame = CGRectMake(0, container.view.bounds.size.height-200, container.view.bounds.size.width, 200);
[myVc.view addSubview:imgView]; 
```

现在您可以将`container`视图控制器添加到导航控制器而不是您的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T04:38:58.830

Swift 5 版本的@jjv360 答案：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let myVc = UIViewController()

    self.addChild(myVc)
    self.view.addSubview(myVc.view)
    myVc.view.autoresizingMask = [.flexibleWidth, .flexibleHeight]
    myVc.view.frame = CGRect(x: 0, y: 0, width: self.view.bounds.size.width, height: self.view.bounds.size.height-200)

    let imgView = UIImageView(image: UIImage(named: "banner"))
    imgView.autoresizingMask = [.flexibleWidth, .flexibleTopMargin]
    imgView.frame = CGRect(x: 0, y: self.view.bounds.size.height-200, width: 
    self.view.bounds.size.width, height: 200)
        myVc.view.addSubview(imgView)
} 
```

# android - Android：deviceId null (TelephonyManager)

> ID：13232215
> 
> 赞同：1
> 
> 时间：2012-11-05T12:33:05.537
> 
> 标签：android, deviceid

我对 TelephonyManager 有疑问。DeviceId 为空/空白。这是我的代码。我哪里错了？

这是我的java代码

**RegistryActivity.java**

```
package android.tennis.app;

import android.tennis.library.UserFunctions;    
//import android.tennis.library.InfoPhoneAndroid;   
import android.content.Context;     
import android.telephony.TelephonyManager;  
import android.provider.Settings.Secure;    

[...]   

public class RegisterActivity extends Activity {    

private String deviceID = null, androidID = null;   

@Override   
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);     

    setContentView(R.layout.register);

    [..]    

    final TelephonyManager telephonyManager = (TelephonyManager) getApplicationContext().getSystemService(Context.TELEPHONY_SERVICE);
    deviceID = telephonyManager.getDeviceId(); 

    [..]    

    btnRegister.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {

    [..]

    UserFunctions userFunction = new UserFunctions();
    JSONObject json = userFunction.registerUser(nome, email, password, username, citta, data_di_nascita, cognome, deviceID);
} 
```

registerUser 调用 index.php 时，deviceId 为空。为什么？

**我的清单文件是：**

```
<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".DashboardActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!--  Login Activity -->
    <activity
        android:label="Login"
        android:name=".LoginActivity">

    </activity>

    <!--  Register Activity -->
    <activity
        android:label="Register New Account"
        android:name=".RegisterActivity"></activity>
</application>

<!-- Allow to connect with internet -->
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

我使用模拟器。如果我输入 *#60#，则输出为：00000000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:53:51.247

并不是所有的安卓设备都有 3G 模块，所以没有一个有 telephonyManager.getDeviceId(); 您应该使用其他一些 uid

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-29T10:17:46.007

这有效：

```
public String getUniqueID(){    
    String myAndroidDeviceId = "";
    TelephonyManager mTelephony = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    if (mTelephony.getDeviceId() != null){
    myAndroidDeviceId = mTelephony.getDeviceId(); 
    }else{
     myAndroidDeviceId = Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID); 
    }
    return myAndroidDeviceId;
} 
```

[此答案](https://stackoverflow.com/a/8145184/1166727)的所有学分

# bash - 用空格传递参数

> ID：13232218
> 
> 赞同：0
> 
> 时间：2012-11-05T12:33:22.133
> 
> 标签：bash

为什么输出是`test foo bar`only`foo`而不是`foo bar`？

```
$ cat test
function f
{
    local args=$1

    echo $args
}
f "$@"

$ bash test foo bar
foo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:35:04.687

要将命令行参数作为单个参数传递给您的函数，您可以使用`"$*"`（而不是`$@`）将它们连接在一起：

```
f "$*" 
```

变量的第一个字符`IFS`用作每个参数之间的“胶水”，默认为单个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:35:01.893

因为酒吧是 2 美元。如果您希望将 foo 和 bar 作为单个参数传递，则必须这样调用它：

bash 测试“富吧”

# android - 如何在已解析数据的列表视图中添加复选框并将其放入 sqlite

> ID：13232222
> 
> 赞同：1
> 
> 时间：2012-11-05T12:33:37.610
> 
> 标签：android, android-listview

我在列表视图中有一个解析的数据。现在我想在列表视图中集成一个复选框，当它们被选中时，我想将其存储在 sqlite 数据库中。任何想法如何做到这一点。我已经编写了用于解析和显示的代码，这是我的代码

```
 package com.example.rotaryclubnew;
import java.util.ArrayList;
import java.util.List;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.StrictMode;

import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
@SuppressLint({ "NewApi", "NewApi", "NewApi" })
public class Displaycontacts extends Activity{

    public static String SOAP_ACTION1 = "http://tempuri.org/GetContact";

   public static String NAMESPACE = "http://tempuri.org/";

    public static String METHOD_NAME1 = "GetContact";

    private static String URL = "http://115.119.182.114/Rotaryclub/RotaryService.asmx"; 

    String output="";
    ArrayList<String> contactsNamelist;
     ArrayList<String> contactsPoslist;
  //  TextView t1,t2,t3,t4,t5,t6,t7,t8,t9;
    ListView lv;
     List<String> contactRecords = new ArrayList<String>();

/*
     static{
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

            StrictMode.setThreadPolicy(policy);
        }   */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.displaycontacts);

        lv=(ListView) findViewById(R.id.listViewtodisplayname);

     //CALL the web service method with the two parameters vname and nname

         Thread networkThread = new Thread() {
                @Override
                public void run() {
                  try {
                     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);     
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                     envelope.dotNet=true;
                    envelope.setOutputSoapObject(request);

                     HttpTransportSE ht = new HttpTransportSE(URL);
                     ht.call(SOAP_ACTION1, envelope);
              //       final  Object response = envelope.getResponse();

                //     final String str = response.toString();

                     request.addProperty("user_id", "3");
                        System.out.println("requesr for"+"3");
                        envelope.setOutputSoapObject(request);
                        //httpTransport.call(SOAP_ACTION1, envelope);
                        final SoapObject result = (SoapObject)envelope.getResponse();
                          runOnUiThread (new Runnable(){ 

                              public void run() {

                     int count=result.getPropertyCount();
                     System.out.println("in count "+count);
                      for (int i = 0; i<= count-1; i++) 
                      {
                          SoapObject result1=(SoapObject) result.getProperty(i);
                          contactRecords.add(result1.getProperty(2).toString());

                          System.out.println("in for loop "+result1.getProperty(2).toString());

                         // contactRecords.add(result1.getProperty(2).toString());

                      }

      }
              });
                  }
                 catch (Exception e) {
                     e.printStackTrace();
                 }
                  handler.sendEmptyMessage(0);

                }
              };
              lv.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {

                    Toast.makeText(getApplicationContext(),"items selected",Toast.LENGTH_LONG).show();
                    //Intent i1=new Intent(Displaycontacts.this, Displayofcontactsdetails.class);
                     /*i.putExtra("NAME",lv.getAdapter().getItem(arg2).toString());
                     i.putExtra("POS",contactsPoslist.get(arg2).toString());
                     System.out.println("main act put extra "+lv.getAdapter().getItem(arg2).toString()+contactsPoslist.get(arg2).toString());*/
                    // startActivity(i1);

                }
            });

              networkThread.start();

               }

    @SuppressWarnings("unused")
    private Handler handler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            ArrayAdapter<String> aa;
        aa = new ArrayAdapter<String>(Displaycontacts.this, android.R.layout.simple_list_item_1,contactRecords);
        lv.setAdapter(aa);

        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:56:38.260

如果您想在列表中检查更改时更新数据库中的日期，请尝试此操作

```
 mHolder.mCheckBox.setTag(position);

                    mHolder.mCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                            int id = (Integer) buttonView.getTag();

//Write your code for update database over hear and use id to get chacked data position
                                                    }
                    }); 
```

# silverlight - 将 SolidColorBrush 的颜色分配给另一个 SolidColorBrush

> ID：13232232
> 
> 赞同：0
> 
> 时间：2012-11-05T12:34:17.410
> 
> 标签：silverlight, xaml

我有一个来自第三部分库的 DefaultInnerBorder_Normal 资源，它是 SolidColorBrush。我需要将它分配给我的一些资源，但我不能分配给如下内容：

```
<SolidColorBrush x:Key="DefaultInnerBorder_Normal" Color="#FF000000"/>
<SolidColorBrush x:Key="ControlInnerBorder_Normal" Color="{StaticResource DefaultInnerBorder_Normal.Color"/> 
```

我看过这个答案：

[@code-zoop 的https://stackoverflow.com/a/1832052/278618](https://stackoverflow.com/a/1832052/278618)但我无法将 DefaultInnerBorder_Normal 的类型更改为颜色。除了转换器还有其他选择吗？

# java - 检测文件是否存在

> ID：13232233
> 
> 赞同：-2
> 
> 时间：2012-11-05T12:34:23.237
> 
> 标签：java, file

请如何检测文件存在并且每次运行时不要创建新文件。

```
public static void main(String[] args) throws IOException, ClassNotFoundException {
    FileOutputStream fos = new FileOutputStream("file.tmp");
    ObjectOutputStream oos = new ObjectOutputStream(fos);

    oos.writeObject("12345");
    oos.writeObject("Today");

    oos.close();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:36:02.683

怎么样

```
File f = new File("file.tmp");
if(f.exists()) {
 // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:35:52.730

使用[`File.exits()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29)：

```
File f = new File("file.tmp");// this does not create a file

if (f.exists()) {
    System.out.println("File existed");
} else {
    System.out.println("File not found!");
} 
```

然后你甚至可以使用构造函数`FileOutputStream(File f, boolean append)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:37:20.983

我认为这是你需要的：

```
public boolean settingsFileExits(final String fileName) {
    File f = new File(fileName);
    return f.exists();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:36:45.383

使用文件类 API：

[文件已存在](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#exists%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T12:38:52.367

而不是使用`FileOutputStream`使用`File`类然后做

如果文件存在（）

和

而不是立即在堆栈溢出中询问，谷歌它。

# c# - DbGeometry 是否有效？

> ID：13232235
> 
> 赞同：8
> 
> 时间：2012-11-05T12:34:28.393
> 
> 标签：c#, linq, asp.net-mvc-4, .net-4.5, entity-framework-5

我是新手。我不知道如何使用 SqlSpatialFunction MakeValid。我有一个 DbGeometry，它是一个多边形。这个多边形无效，我想让它有效。

谁能解释如何使用 MakeValid 方法？

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlspatialfunctions.makevalid.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-21T15:58:42.520

离开 Pawel 评论的内容，我所做的就是检查它是否有效，如果无效则使其有效。

```
DbGeometry myGeometry = DbGeometry.FromText("POLYGON ((10 10, 15 15, 5 15, 10 15, 10 10))");
if(!myGeometry.IsValid)
{
    myGeometry = SqlSpatialFunctions.MakeValid(myGeometry);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-09T10:36:42.617

您不能调用`SqlSpatialFunctions.MakeValid`DbGeometry，如果这样做，它将引发以下异常：

```
System.NotSupportedException : This function can only be invoked from LINQ to Entities. 
```

因此，您可以做的是使用其 WKT 字符串使其有效，然后将该有效字符串转换为 DBGeometry，如下所示：

```
 public static DbGeometry MakeValid(DbGeometry geom)
{
     if (geom.IsValid)
          return geom;

     var wkt = SqlGeometry.STGeomFromText(new SqlChars(geom.AsText()), 0).MakeValid().STAsText().ToSqlString().ToString();
     return DbGeometry.FromText(wkt, 0);
} 
```

# powershell - 仅使用变量将数组添加到多数组以引用数组名

> ID：13232238
> 
> 赞同：0
> 
> 时间：2012-11-05T12:34:32.950
> 
> 标签：powershell, powershell-2.0

为了在函数中使用数组，我想学习如何通过变量中定义的名称来引用它们。这就是为什么在这里以相当复杂的方式完成非常简单的事情......

```
Remove-Variable array*
Remove-Variable first*
Remove-Variable second*
$arrayname='name'

$arrayfirst='firstarray'
Set-Variable -Name $($arrayfirst + $arrayname) -Value $(cat textfile.txt)
$(Get-Variable -Name $($arrayfirst + $arrayname) -ValueOnly) -is [array] 
```

**真的**

```
$(Get-Variable -Name $($arrayfirst + $arrayname) -ValueOnly) 
```

第一排

第二排

第三排

```
$arraysecond='secondarray'
Invoke-Expression "`$$($arraysecond + $arrayname)= @()"
$(Get-Variable -Name $($arraysecond + $arrayname) -ValueOnly) -is [array] 
```

**真的**

```
Invoke-Expression "$($arraysecond + $arrayname)+= ,$(Get-Variable -Name $($arrayfirst + $arrayname) -ValueOnly)"

$null -eq $(Get-Variable -Name $($arraysecond + $arrayname) -ValueOnly) 
```

**错误的**

**但**

```
 $null -eq $($(gv $($arraysecond + $arrayname) -ValueOnly)[0]) 
```

**真的**

这意味着包含行的数组未正确添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T06:26:32.507

我更改了 2nd Invoke-Expression，使其按您想要的方式工作：

```
Invoke-Expression "`$$($arraysecond + $arrayname) += `$(Get-Variable -Name $($arrayfirst + $arrayname) -ValueOnly)" 
```

# visual-studio-2010 - 如何将测试结果链接到测试用例？

> ID：13232239
> 
> 赞同：2
> 
> 时间：2012-11-05T12:34:38.743
> 
> 标签：visual-studio-2010, tfs, microsoft-test-manager

我需要一些如何添加`Test Case`与`Test Result`此 tc 的链接的链接。

因此，我打开测试用例，进入`All Links`选项卡并选择`Link to`. 在`Link Type`我选择`Test Result`但出现以下消息：

![在此处输入图像描述](../Images/5bccedbc9f357cef5c516bbb3cd80ef0.png)

现在，如果我按照消息的说明进行操作，测试结果已经与测试用例链接（在创建测试结果时会自动链接）。但是，我想反过来。通过测试用例打开特定的测试结果。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:58:21.310

听起来链接在那里，但您正试图从测试用例导航到测试结果。我会说测试结果的链接没有出现在链接部分是一个错误。

我能建议的最好的方法是转到“测试”部分（顶部导航栏），然后转到“分析测试运行”。在那里您可以选择一个测试运行，每个测试用例都有一个查看结果按钮。

# jquery - jquery选择不在iframe中的div

> ID：13232241
> 
> 赞同：0
> 
> 时间：2012-11-05T12:34:42.207
> 
> 标签：jquery

我需要选择所有不在 iframe 中的 div 标签。我可以为此写什么选择器？我需要类似的东西：`$("div:not(in iframe)")`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:36:17.270

只需使用`$("div")`.

an 中的任何元素`iframe`都将位于您无法访问的不同文档中`$()`。

# asp.net-mvc - 改变语言：全球化，文化取决于领域

> ID：13232243
> 
> 赞同：1
> 
> 时间：2012-11-05T12:34:49.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config, globalization

我目前正在开发一个 MVC3 项目，其中在 web.config 中配置了站点上的全球化。

我想实现一个功能，根据您浏览的域将全球化更改为不同的语言。因此，全球化将在运行时根据您浏览的站点地址而改变。

我怎样才能获得这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:35:04.147

**首先，获取域：**

您可以使用[这里](http://msdn.microsoft.com/en-us/library/system.uri.host.aspx)`Request.Uri.host`引用的内容，甚至[这里](http://msdn.microsoft.com/en-us/library/system.uri.scheme.aspx)引用的内容。`Request.Uri.Scheme`

**然后，更改您的文化设置：**

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("differentCultureHere"); 
```

[`CurrentCulture`参考。](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture%28v=vs.110%29.aspx)

理想的解决方案是[重写，包括使用`resources`](http://www.codeproject.com/Articles/181738/Creating-a-Bilingual-ASP-NET-MVC3-Application-Part):) ，但是当生活给你柠檬时。. .

# android - 在布局上查找指针位置和视图 ID

> ID：13232245
> 
> 赞同：1
> 
> 时间：2012-11-05T12:34:50.377
> 
> 标签：android, android-canvas, android-custom-view

我正在尝试开发一个在网格布局中有 8 个按钮的应用程序。需要的是，当我一次触摸两个按钮时，我需要获取相对于父视图的指针位置以及被点击的视图的 id。一旦我离开任何按钮区域，也需要一个触发器。

我尝试使用扩展布局并覆盖 onInterceptTouchEvent。然后 onTouchEvent 我可以得到两个手指的指针位置。但无法找出单击了哪个按钮，并且在移动手指时无法找出我不在该按钮区域。

我什至是第一次这样接触。所以任何帮助都会非常感激。请帮我解决这个问题。自从4天以来，我一直在努力。

```
public class KeypadEventHandler extends LinearLayout {

private Context mContext;
private TextView text1,edit;
int x1,y1,x2,y2;
private GridView mGView;
ImageView IV;
private static final String TAG=KeypadEventHandler.class.getSimpleName();

public KeypadEventHandler(Context context) {
    super(context);
    this.mContext=context;
    LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    layoutInflater.inflate(R.layout.activity_main, this);
    text1=(TextView)findViewById(R.id.txtInput);
    //b = (Button)findViewById(R.id.button1);
    edit=(TextView)findViewById(R.id.txtMemory);
    mGView=(GridView)findViewById(R.id.grdButtons);
    mGView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Log.d(TAG,"on the click event");
            // TODO Auto-generated method stub
            IV=(ImageView)arg1;

        }
    });
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
  return true; 
}

@Override
  public boolean onTouchEvent(MotionEvent event) {
      int pid1=0;
      int action = event.getAction();
      pid1 = action >> MotionEvent.ACTION_POINTER_ID_SHIFT;

      switch (event.getAction()) {

      case MotionEvent.ACTION_DOWN:

          break;
      case MotionEvent.ACTION_MOVE:

          // Log.d(TAG,"on the touch event");
          //this is giving the x and y locations for the both fingers. but not able to find out which botton the finger touched.
          //as the click listener is not invoking after implementing onInterceptTouchEvent
          x1 = (int) event.getX(0);
          y1 = (int) event.getY(0);
          text1.setText("test ACTION DOWN " + " values = first finger X0: "+ x1 + " first finger Y0: " + y1);
          x2 = (int) event.getX(1);
          y2 = (int) event.getY(1);
          edit.setText("test ACTION DOWN " + " values = second finger X0: "+ x2 + " first finger Y0: " + y2);
          break;

      case MotionEvent.ACTION_UP:
          break;

      }

      return true;
  } 
```

# jquery - 调整图像大小以适合 div + 保持比例 + 水平和垂直居中 + 圆角

> ID：13232247
> 
> 赞同：2
> 
> 时间：2012-11-05T12:34:51.123
> 
> 标签：jquery, html, css

**问题：**

1.  调整图像大小以适合 div - 已解决
2.  保持比率 - 已解决
3.  水平和垂直居中 - 已解决
4.  圆角

    a) 矩形图像 - 已解决

    **b) 横幅图片 - !!! 不可能！！！**

所以问题是：我如何摆脱图像的矩形角？请看这里看问题： **>>> [http://jsfiddle.net/infoman/5fzET/3/](http://jsfiddle.net/infoman/5fzET/3/) <<<**

换句话说：图像的角是圆形的，但它们不在 div 的末尾，而是在它之外。我需要将图像在 div 结束的行处四舍五入。

**HTML**

```
test image ratio w/h = 4
<div>
    <img id="myimg" src='http://placehold.it/200x50' draggable="false"/>
</div>

<br/>

test image ratio w/h = 0.25
<div>
    <img id="myimg" src='http://placehold.it/50x200' draggable="false"/>
</div>

<br/>

test image ratio w/h = 1 but small  
<div> 
    <img id="myimg" src='http://placehold.it/50x50' draggable="false"/>
</div>

<br/>

test image ratio w/h = 1 perfect fit
<div>
    <img id="myimg" src='http://placehold.it/300x300' draggable="false"/>
</div>

<br/>

test image ratio w/h = 1 much too big
<div>
    <img id="myimg" src='http://placehold.it/2000x2000' draggable="false"/>
</div> 
```

**CSS**

```
div {
    border: solid 1px green;
    width: 300px;
    height: 300px;
    overflow: hidden;
    border-radius: 10px;
}

div img {
    outline: solid 1px red;
}

.fillwidth {
    width: 100%; 
    height: auto;
    position: relative;
    /*top*/
}

.fillheight { 
    height: 100%; 
    width: auto;
    position: relative;
    /*left*/
}

.fillfull { 
    height: 300px; 
    width: 300px;
} 
```

**jQuery**

```
$('img[id^="myimg"]').each(function() {
    var imgWidth = $(this).width(),
        imgHeight = $(this).height(),
        imgRatio = imgWidth / imgHeight,
        imgWidthTop = (((300 / imgWidth) * imgHeight) / 2) * -1 + 300 / 2,
        imgHeightLeft = (((300 / imgHeight) * imgWidth) / 2) * -1 + 300 / 2;

    switch (true) {
    case (imgRatio === 1):
        $(this).addClass('fillfull');
        break;
    case (imgRatio < 1):
        $(this).addClass('fillwidth');
        $(this).css('top', imgWidthTop);
        break;
    case (imgRatio > 1):
        $(this).addClass('fillheight');
        $(this).css('left', imgHeightLeft);
        break;
    default:
        break;
    }
});​ 
```

**尝试与失败：**

1.  剪辑：http: [//jsfiddle.net/infoman/5fzET/4/](http://jsfiddle.net/infoman/5fzET/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:47:29.020

尝试：

```
border-radius: 10px;
-moz-border-radius: 10px;
-webkit-border-radius: 10px; 
```

您可以将其添加到 div 以及图像中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T12:58:32.173

更简单的解决方案：

在这里演示：http: [//jsfiddle.net/EdHQh/](http://jsfiddle.net/EdHQh/)

HTML：

```
<div class='container'>
    <img class='resize_fit_center' src='...' />
</div> 
```

CSS：

```
.container {
    width: 115px;
    height: 115px;
    line-height: 115px;
    text-align: center;
    border: 1px solid orange;
}
.resize_fit_center {
    max-width:100%;
    max-height:100%;
    vertical-align: middle;
    border-radius: 20px;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T13:21:46.847

这是您回答的开始。下面的代码显示了如何设置图像父元素的类（这是您需要的）。

```
$('img[id^="myimg"]').each(function() {
var imgWidth = $(this).width(),
    imgHeight = $(this).height(),
    imgRatio = imgWidth / imgHeight,
    imgWidthTop = (((300 / imgWidth) * imgHeight) / 2) * -1 + 300 / 2,
    imgHeightLeft = (((300 / imgHeight) * imgWidth) / 2) * -1 + 300 / 2;

      //  alert(imgRatio);

switch (true) {
case (imgRatio < 1.1 && imgRatio > .99):
    $(this).addClass('fillfull');
    break;
case (imgRatio < 1):
    $(this).addClass('fillwidth');
    $(this).css('top', imgWidthTop);
    //$(this).css('clip', 'rect(100px 0 100px 0)');
    $(this).parent().addClass('bev');

    break;
case (imgRatio > 1):
    //$(this).css('clip', 'rect(0 100px 0 100px)');
    $(this).addClass('fillheight');
    $(this).css('left', imgHeightLeft);
    $(this).parent().addClass('bev');

    break;
default:
    break;
}
}); 
```

* * *

```
 .bev {
    border: solid 1px green;
    width: 300px;
    height: 300px;
    overflow: hidden;
    border-radius: 10px;
    margin-left: 10px;
  }

 div img {
     outline: solid 1px red;
 }

 .fillwidth {
    width: 100%; 
    max-height: 99999px;
    position: relative;
    /*top*/
 }

 .fillheight { 
    height: 100%; 
    max-width: 99999px;
    position: relative;
    /*left*/
  }

 .fillfull { 
     height: 300px; 
     width: 300px;
 } 
```

你可以有不同的斜角不同的类，或者你可以使用javascript来改变样式属性。我希望这有帮助

# c# - Linq GroupBy 和查找 。物品

> ID：13232256
> 
> 赞同：3
> 
> 时间：2012-11-05T12:35:34.200
> 
> 标签：c#, linq, entity-framework

我在 C# 中使用 LINQ

此代码导致`dates`类型`Lookup<TKey, TElement>`

```
 var dates = timetableEvents.GroupBy(x => x.DateTimeStart); 
```

我只需要一个 DateTimeStart 列表（DateTime 类型）。

我应该如何更改我的 LINQ 表达式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:36:52.917

只需使用`Select`：

```
var dates = timetableEvents.Select(x => x.DateTimeStart); 
```

或者，如果您只想要每个组中的一个：

```
var dates = timetableEvents.GroupBy(x => x.DateTimeStart).Select(x => x.Key); 
```

如果您希望它运行得更快一点，那么您可以使用 Distinct （如 Rawling 的回答），但您可能不会注意到太大的区别，除非您有很多对象（尽管意图更清晰）：

```
var dates = timetableEvents.Select(x => x.DateTimeStart).Distinct(); 
```

我发现[这个网站](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)在尝试学习 LINQ 时非常有用：[101 LINQ Samples](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:09:14.243

如果您只需要开始日期/时间，

```
var dates = timetableEvents.Select(x => x.DateTimeStart).Distinct(); 
```

可能比

```
var dates = timetableEvents.GroupBy(x => x.DateTimeStart).Select(x => x.Key); 
```

因为它知道它不必费心将事件分组在一起。

# .net - WPF 应用程序初始化状态

> ID：13232258
> 
> 赞同：-2
> 
> 时间：2012-11-05T12:35:38.847
> 
> 标签：.net, wpf, .net-4.0

是否可以知道加载（初始化）期间应用程序当前正在做什么？类似于我们在输出窗口中得到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:19:38.923

您的应用程序是否有启动画面，或者它可以在启动期间显示的其他 UI？如果是这样，您可以在启动屏幕中放置一个文本块，并使用状态信息定期更新文本块。我不知道是否有任何方法可以自动将状态信息输出到这个闪屏文本块，很可能你必须自己实现一些东西。

# java - 字符串大小超过 int 的最大限制

> ID：13232259
> 
> 赞同：4
> 
> 时间：2012-11-05T12:35:45.683
> 
> 标签：java, string, string-length

我有一大堆字符串，我想在其中找到每个字符串的长度并添加它们并显示字符串的总长度。

为了计算长度，我使用 as 方法`string.length()`，但我注意到 length() 的数据类型是 int，而 int 的最大大小是 2,147,483,647。但是我的字符串对象的字符数超过 2,147,483,647。任何建议如何在超出 int 限制时获得长度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:39:06.970

> 但是我的字符串对象的字符数超过 2,147,483,647

我对此表示怀疑： String 使用 a`char[]`来存储字符，而数组不能容纳超过`Integer.MAX_VALUE`元素。另见[这篇文章](https://stackoverflow.com/questions/816142/strings-maximum-length-in-java-calling-length-method)。

如果您只需要添加几个字符串的长度，则可以使用 long 变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:38:10.043

你不能有比这更长的字符串。

[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE)是索引用于存储字符串对象的内部字符数组的上限，因此没有办法让字符串比这更长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:38:25.893

在java中没有字符串对象的长度可以大于 `Integer.MAX_VALUE`所以string.length对你有用，但是如果你想让字符串集的总长度大于 `Integer.MAX_VALUE`你可以使用长类型变量来存储整个字符串集的长度值

# tags - 如何禁用 Vim 中标签的 TAB 补全？

> ID：13232262
> 
> 赞同：2
> 
> 时间：2012-11-05T12:35:58.130
> 
> 标签：tags, vim, omnicomplete

我使用 ctags 创建了标签文件。

现在，当我尝试使用 TAB 从缓冲区完成文本时，我还会在弹出窗口中看到所有标签。

如何防止这种情况并且不在完成弹出窗口中显示标签？

我正在使用 SuperTab，没有指定任何选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T12:39:32.087

你可以试试这个设置：

```
:set cpt-=t 
```

* * *

`complete`option的默认值为`.,w,b,u,t,i`，表示扫描：

1.  当前缓冲区
2.  其他窗口中的缓冲区
3.  其他加载的缓冲区
4.  卸载缓冲区
5.  标签
6.  包含的文件

# maven - 使用 Maven 3，是否可以使用不同于编译插件中设置的 java 版本运行 JUNIT 测试？

> ID：13232274
> 
> 赞同：2
> 
> 时间：2012-11-05T12:36:19.407
> 
> 标签：maven, maven-3, junit4

我的项目必须使用 JAVA 1.3 构建，所以我使用以下编译插件：

```
<plugin>
    <inherited>true</inherited>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <executions>
        <execution>
            <phase>compile</phase>
            <goals>
                <goal>compile</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <source>1.3</source>
        <target>1.3</target>
    </configuration>
</plugin> 
```

. 但是，在构建期间，我需要执行 JUNIT4 测试，因此我需要 sunfire 插件才能使用 java 1.6。这在maven 3中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:45:32.477

将您的插件配置更改为以下内容：

```
<plugin>
    <inherited>true</inherited>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <executions>
        <execution>
            <id>default-compile</id>
            <phase>compile</phase>
            <goals>
                <goal>compile</goal>
            </goals>
            <configuration>
                <source>1.3</source>
                <target>1.3</target>
            </configuration>
        </execution>
        <execution>
            <id>default-testCompile</id>
            <phase>test-compile</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:39:19.963

检查surefire插件及其属性“jvm”

[http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)

# css - 使用CSS在导航栏上滑动（动画）bg图像位置

> ID：13232279
> 
> 赞同：3
> 
> 时间：2012-11-05T12:36:29.693
> 
> 标签：css, background, navigation, jquery-animate, position

我在这个论坛的其他地方找到了这段代码，想知道如何使用导航栏获得相同的效果。

所以我会有 7 个文本链接，当你将鼠标悬停在一个上时，图像应该会滑到那段文本。它需要在每个页面上处于不同的起始位置（在导航栏上突出显示当前页面）

这是html：

```
<div class="box">
<a href"#">Home</a>
</div> 
```

和CSS：

```
.rollover a {
    background: url(img/bg_nav_slide.png) no-repeat 0px 0px;
    width: 920px;
    height: 50px;
    display: block;
}
.rollover a:hover {
    background-position: 0px 40px 0px 0px;
}   
.box {
    background: url(img/bg_nav_slide.png) no-repeat;;
    border: 0;
    width: 920px;
    height: 50px;    
    -webkit-transition: background 0.2s ease-in-out;
    -moz-transition: background 0.2s ease-in-out;
    transition: background 0.2s ease-in-out;
}
.box:hover {
    background-position: 40px 0;
}
.box p {
    text-indent: 2px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:08:31.333

这就是拉伐兰效应；你可以在这里找到一个纯 CSS 解决方案：

[http://codepen.io/iamvdo/pen/GsIxk](http://codepen.io/iamvdo/pen/GsIxk)

# flash - 在 swf 文件中更改鼠标指针

> ID：13232280
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:36:36.037
> 
> 标签：flash, adobe

我在 .SWF 中有一个游戏文件。SWF 中的光标很小，我想更改 SWF 文件中的光标。

是否可以更改构建的 SWF 文件的光标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:52:10.800

查看[CursorManager](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/CursorManager.html)类及其[setCursor](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/CursorManager.html#setCursor%28%29)方法。

[这篇文章](http://www.flex-blog.com/set-custom-cursor-using-the-cursormanager/)很好地讲述了这个故事

**编辑**

由于您只有 swf，因此您可以添加一个包装器，并在其中更改光标。

或者你可以反编译它然后做必要的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:31:52.973

除了更改整个系统的鼠标指针大小之外，我认为没有机会在游戏中更改鼠标指针。;) 对于其他任何事情，您都需要源文件并重新编译游戏。

# android - com.google.android.gles_jni.EGLImpl.eglInitialize（本机方法）错误

> ID：13232284
> 
> 赞同：1
> 
> 时间：2012-11-05T12:36:45.680
> 
> 标签：android

我知道这是很长的堆栈跟踪。我的一位用户在 google play 市场上报告了它。确切地说，它发生在我的一个andengine游戏droid razr中。

我不知道这个错误是从哪里来的。我从来没有见过这样的东西..有人知道这是从哪里来的吗？

```
 DALVIK THREADS:
    (mutexes: tll=0 tsl=0 tscl=0 ghl=0)
    "main" prio=5 tid=1 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40aab478 self=0x1116910
  | sysTid=22522 nice=0 sched=0/0 cgrp=default handle=1074124136
  | schedstat=( 0 0 0 ) utm=24 stm=28 core=1
  at com.google.android.gles_jni.EGLImpl.eglInitialize(Native Method)
  at android.view.HardwareRenderer$GlRenderer.initializeEgl(HardwareRenderer.java:564)
  at android.view.HardwareRenderer$GlRenderer.initialize(HardwareRenderer.java:512)
  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1342)
  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2558)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4697)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
  at dalvik.system.NativeStart.main(Native Method)

"GLThread 18740" prio=5 tid=18 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x41447a30 self=0x1464a30
  | sysTid=22635 nice=0 sched=0/0 cgrp=default handle=21384832
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x41444370> (a android.opengl.GLSurfaceView$GLThreadManager)
  at java.lang.Object.wait(Object.java:364)
  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1444)
  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1241)

"Thread-18739" prio=5 tid=17 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x414438e8 self=0x1466908
  | sysTid=22634 nice=0 sched=0/0 cgrp=default handle=21392728
  | schedstat=( 0 0 0 ) utm=3 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x4143f218> (a com.google.ads.internal.c)
  at java.lang.Object.wait(Object.java:401)
  at com.google.ads.internal.c.run((null):-1)
  at java.lang.Thread.run(Thread.java:856)

"Thread-18738" prio=5 tid=14 SUSPENDED
  | group="main" sCount=1 dsCount=0 obj=0x4143eb80 self=0x145f540
  | sysTid=22633 nice=0 sched=0/0 cgrp=default handle=21363088
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at libcore.io.Posix.fsync(Native Method)
  at libcore.io.BlockGuardOs.fsync(BlockGuardOs.java:97)
  at java.io.FileDescriptor.sync(FileDescriptor.java:71)
  at android.os.FileUtils.sync(FileUtils.java:111)
  at android.app.SharedPreferencesImpl.writeToFile(SharedPreferencesImpl.java:592)
  at android.app.SharedPreferencesImpl.access$800(SharedPreferencesImpl.java:52)
  at android.app.SharedPreferencesImpl$2.run(SharedPreferencesImpl.java:506)
  at android.app.SharedPreferencesImpl.enqueueDiskWrite(SharedPreferencesImpl.java:527)
  at android.app.SharedPreferencesImpl.access$100(SharedPreferencesImpl.java:52)
  at android.app.SharedPreferencesImpl$EditorImpl.commit(SharedPreferencesImpl.java:449)
  at com.google.ads.ag$a.run((null):-1)
  at java.lang.Thread.run(Thread.java:856)

"AsyncTask #1" prio=5 tid=16 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413e8590 self=0x13cb8f0
  | sysTid=22572 nice=10 sched=0/0 cgrp=bg_non_interactive handle=20755136
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x413e8728> (a java.lang.VMThread) held by tid=16 (AsyncTask #1)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
  at java.lang.Thread.run(Thread.java:856)

"CookieSyncManager" prio=5 tid=15 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413e6b58 self=0x13ca628
  | sysTid=22571 nice=10 sched=0/0 cgrp=bg_non_interactive handle=20753016
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:118)
  at android.os.Looper.loop(Looper.java:118)
  at android.webkit.WebSyncManager.run(WebSyncManager.java:90)
  at android.webkit.CookieSyncManager.run(CookieSyncManager.java:61)
  at java.lang.Thread.run(Thread.java:856)

"WebViewCoreThread" prio=5 tid=13 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413e1450 self=0x13bf218
  | sysTid=22556 nice=0 sched=0/0 cgrp=default handle=20706920
  | schedstat=( 0 0 0 ) utm=14 stm=17 core=1
  at android.os.MessageQueue.nativePollOnce(Native Method)
  at android.os.MessageQueue.next(MessageQueue.java:118)
  at android.os.Looper.loop(Looper.java:118)
  at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:728)
  at java.lang.Thread.run(Thread.java:856)

"SoundPool" prio=5 tid=12 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413d6450 self=0x13ab0d8
  | sysTid=22536 nice=0 sched=0/0 cgrp=default handle=19211824
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"d" prio=5 tid=11 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413d60b8 self=0x13aa218
  | sysTid=22538 nice=0 sched=0/0 cgrp=default handle=20620904
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x413d61f0> (a java.lang.VMThread) held by tid=11 (d)
  at java.lang.Thread.parkFor(Thread.java:1231)
  at sun.misc.Unsafe.park(Unsafe.java:323)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
  at org.andengine.b.c.d((null):-1)
  at org.andengine.b.a.n((null):-1)
  at org.andengine.b.d.run((null):-1)

"SoundPoolThread" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413d6208 self=0x13aa6a8
  | sysTid=22537 nice=0 sched=0/0 cgrp=default handle=20619736
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #2" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413b48b8 self=0x138ad50
  | sysTid=22533 nice=0 sched=0/0 cgrp=default handle=20491536
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=8 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x413b4670 self=0x138a2e0
  | sysTid=22532 nice=0 sched=0/0 cgrp=default handle=20488864
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"FinalizerWatchdogDaemon" daemon prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413b1388 self=0x1389970
  | sysTid=22531 nice=0 sched=0/0 cgrp=default handle=20471816
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40ab2e08> (a java.lang.Daemons$FinalizerWatchdogDaemon)
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
  at java.lang.Thread.run(Thread.java:856)

"FinalizerDaemon" daemon prio=5 tid=6 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413b1230 self=0x1389290
  | sysTid=22530 nice=0 sched=0/0 cgrp=default handle=20471656
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40aa15e8> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
  at java.lang.Thread.run(Thread.java:856)

"ReferenceQueueDaemon" daemon prio=5 tid=5 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x413b10c8 self=0x1388c38
  | sysTid=22529 nice=0 sched=0/0 cgrp=default handle=20476080
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40aa1510>
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
  at java.lang.Thread.run(Thread.java:856)

"Compiler" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x413b0fd8 self=0x13887e8
  | sysTid=22528 nice=0 sched=0/0 cgrp=default handle=20475672
  | schedstat=( 0 0 0 ) utm=5 stm=3 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x413b0ee0 self=0x1384358
  | sysTid=22527 nice=0 sched=0/0 cgrp=default handle=20481672
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x413b0e00 self=0x137e900
  | sysTid=22524 nice=0 sched=0/0 cgrp=default handle=20476496
  | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method) 
```

# ios - NSCalendar 获取现在和年底之间的日期差异给出零月份

> ID：13232299
> 
> 赞同：0
> 
> 时间：2012-11-05T12:37:47.440
> 
> 标签：ios, iphone-sdk-3.0, nsdate, nscalendar, nsdatecomponents

当我尝试获取从现在到年底的日期差异时，我得到的月份为 0。我正在使用一个`NSCalendar`对象来获取两个对象之间的差异`NSDate`。

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setYear:2013];
[comps setMonth:0];
[comps setDay:0];

[comps setHour:0];
[comps setMinute:0];
[comps setSecond:0];

NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *newDate = [calendar dateFromComponents:comps];

NSDateComponents *timeDifference = [[NSCalendar currentCalendar] 
    components: NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | 
                NSMinuteCalendarUnit | NSSecondCalendarUnit  
    fromDate:[NSDate date] toDate:newDate options:0];

int months = timeDifference.month;
int days = timeDifference.day;
if (months>0)
    days+=31;
int hours = timeDifference.hour;
int minutes = timeDifference.minute;
int seconds = timeDifference.second; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:29:33.537

您正在尝试计算到 2013 年的月数、天数等`NSDateComponents`​​。0 表示“无值”，所有计数的值都应大于 0。这就是为什么您的`comps`值被视为“不完整”，这会导致奇怪的输出从`NSCalendar`.

设置`month`并`day`在第 3-4 行到第 1 行修复问题。

# android - “\”和“\.”有什么区别？

> ID：13232300
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:37:49.753
> 
> 标签：android

有什么区别：

```
Environment.getExternalStorageDirectory()+"/.SomeDirectory/Other" 
```

和：

```
Environment.getExternalStorageDirectory()+"/SomeDirectory/Other" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:40:20.003

UNIX 环境中的隐藏文件和目录有“.”。作为他们名字中的第一个字符。

更多信息：[隐藏文件和目录 - 维基百科](https://en.wikipedia.org/wiki/Hidden_file_and_hidden_directory#Unix_and_Unix-like_environments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:41:31.597

将点号 ('.') 放在目录或文件名之前使其隐藏。如果没有点，那么它是一个普通目录。

# android - 删除数据表格数据库？

> ID：13232302
> 
> 赞同：0
> 
> 时间：2012-11-05T12:37:53.913
> 
> 标签：android, database, listview

当我单击列表视图中的项目时，如何删除数据库中的数据？请给我一些代码。这是我在列表视图中选择项目的方法：

```
listview.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView adapterView, View convertView, int position, long id)
        {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(AndroidSpinnerFromSQLiteActivity.this);

            alertDialog.setTitle("Confirm Delete...");

            alertDialog.setMessage("Are you sure you want delete this?");

            alertDialog.setIcon(R.drawable.delete);

            alertDialog.setPositiveButton("YES",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int which) {

                        }
                    });

            alertDialog.setNegativeButton("NO",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {

                        }
                    });

            alertDialog.show();
            }
        });
    }; 
```

这是我的数据库类：

公共类 DatabaseHandler 扩展 SQLiteOpenHelper {

```
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_NAME = "spinnerExample";

private static final String TABLE_LABELS = "labels";

private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT" +")";
    db.execSQL(CREATE_CATEGORIES_TABLE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

    onCreate(db);
}

public void insertLabel(String label){
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

    db.insert(TABLE_LABELS, null, values);
    db.close(); 
}

public List<String> getAllLabels(){
    List<String> labels = new ArrayList<String>();

    String selectQuery = "SELECT  * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor.moveToFirst()) {
        do {
            labels.add(cursor.getString(1));
        } while (cursor.moveToNext());
    }

    cursor.close();
    db.close();

    return labels;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:02:26.170

在您的数据库类代码中添加一种方法

如果你想删除 Table All Raw 然后使用

```
db.execSQL("DELETE from "+Table_Name); 
```

其他你想删除表中的特定 Raw

```
 db.delete(Table_Name, "Raw_Field_Name" + "='" + Raw_field_value+"'", null); 
```

列表视图项目点击事件使用

```
 Listview lv;
//on create method 

     lv = (ListView) findViewById(R.id.list_contact_name);

              lv.setOnItemClickListener(new OnItemClickListener() 
                {

                    public void onItemClick(AdapterView<?> arg0, View v, int position,
                            long id) {

                      // call DELETE method here

                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:42:37.147

在 Helper 类中添加一个方法：

```
public boolean deleteData(String name)
{
    SQLiteDatabase db=getWritableDatabase();
    return db.delete(TABLE_NAME, KEY_NAME+"= ?", new String[]{name})>0;
} 
```

使用标签名称调用此方法。您将`onItemClick`在列表视图中获得方法`OnItemClickListener`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:06:38.017

如果您想在删除数据后更新列表，则可以使用。

适配器.notifyDataSetChanged(); // 这里的适配器是你的适配器对象。

# magento - 在左侧块上显示类别和子类别

> ID：13232304
> 
> 赞同：0
> 
> 时间：2012-11-05T12:38:01.730
> 
> 标签：magento, php

我想在左侧显示选定的类别名称及其子类别。

app\design\frontend\base\default\template\catalog\navigation\left.phtml

在left.phtml中

```
<?php if (!Mage::registry('current_category')) return ?>
<?php $_categories = $this->getCurrentChildCategories() ?>
<?php $_count = is_array($_categories)?count($_categories):$_categories->count(); ?>
<?php if($_count): ?>
<div class="block block-layered-nav">
<div class="block-title">
    <strong><span><?php echo $this->__('Browse By') ?></span></strong>
</div>
<div class="block-content">
    <dl id="narrow-by-list2">

       <dt><?php echo $this->__('Category') ?>

        </dt>
        <dd>
            <ol>
            <?php foreach ($_categories as $_category): ?>
                <?php if($_category->getIsActive()): ?>
                <li>
                    <a href="<?php echo $this->getCategoryUrl($_category) ?>"<?php if ($this->isCategoryActive($_category)): ?> class="current"<?php endif; ?>><?php echo $this->htmlEscape($_category->getName()) ?></a> (<?php echo $_category->getProductCount() ?>)
                </li>
                <?php endif; ?>
            <?php endforeach ?>
            </ol>
        </dd>
    </dl>
    <script type="text/javascript">decorateDataList('narrow-by-list2')</script>
    </div>
  </div>
  <?php endif; ?> 
```

使用此代码可以查看类别列表，但显示的是“类别”而不是类别名称。如何查看当前类别而不是仅显示类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:29:57.050

在这里你可以得到你当前的类别

> $_category = 法师::registry('current_category');

# list - Sencha Touch 列表商店禁用排序

> ID：13232305
> 
> 赞同：3
> 
> 时间：2012-11-05T12:38:04.990
> 
> 标签：list, sencha-touch-2

我有从 php 服务获取数据的列表，收到的数据按我需要的顺序排列。但是 sencha 会自动按字母顺序对我的列表进行排序。下面是我的代码：

```
Ext.define('MyList', {
    extend: 'Ext.dataview.List',

    config:     {
        grouped: true,
        plugins: [
            {
                xclass:          'Ext.plugin.PullRefresh',
                pullRefreshText: 'Pull down to refresh'

            },
            {
                xclass:     'Ext.plugin.ListPaging',
                autoPaging: true,
                noMoreRecordsText: 'No More Records'

            }
        ]
    },
    initialize: function () {
        this.callParent(arguments);
        var store = Ext.create('Ext.data.Store', {

            pageParam: 'page',
            grouper: {
                groupFn: function (record) {
                    return record.data.group_label;
                }
            },
            model:   'ListItem',
            proxy:   {
                type:   'ajax',
                url:    '/m/services/activity_list_items.php',
                reader: {
                    type:         'json',
                    rootProperty: 'root.results'
                }
            }
        });

        var template = Ext.create('GenericListItem', {
            hascounts: true,
            hasicon:   true,
            varmap:    {
                descr:  'subtext',
                count:  'sub_item_cnt',
                itemid: 'itemid',
                uniqid: 'uniqid'
            }
        });

        var emptyText = 'Recent Activity Items';
        this.setStore(store);
        this.setItemTpl(template);
        this.setEmptyText(emptyText);
    }
}); 
```

**如何避免列表的自动排序？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T13:01:19.067

将以下内容添加到您的商店配置中。

```
remoteSort : true, 
```

在 sencha 中 remoteSort 默认为 false。所以sencha在客户端自动排序。检查链接以获取更多详细信息[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-cfg-remoteSort](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-cfg-remoteSort)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:02:25.963

只需删除这个：

```
grouped: true 
```

如果您不想要每个项目的标题并强制删除它，请从您的列表配置中：

```
grouper: {
    groupFn: function (record) {
        return record.data.group_label;
    }
} 
```

来自您的商店，因为基本上在您的情况下，`grouper`属性用于根据您的`group_label`字段按字母顺序对您的项目进行分组。希望能帮助到你 ：）

# c# - 将 Tree 类转换为更简单的 Tree 类并序列化为 Json 维护结构

> ID：13232306
> 
> 赞同：0
> 
> 时间：2012-11-05T12:38:06.427
> 
> 标签：c#, json, tree, json.net

好的，所以我有一个类似的课程：

```
public class Channel
{
    public Guid Guid{get;set;}
    public string Title{get;set;}

    /* GOT A LOT MORE PROPERTIES IN THIS SPACE */

    public Guid Parent {get;set;}
    public List<Channel> Children{get;set;}
} 
```

我也有一个`List<Channels>`（总共大约 650 个`Channels`）

该`ROOT`频道包含大约 6 个频道，每个频道都包含子项等。

正如您在代码中看到的，`Channel`还有很多其他属性，在这种情况下我不想序列化。也就是说，所有这些`Data Contracts`都已经在基类中定义了，我不会/不能仅仅为了这个动作而改变它们。

所以，你问我的问题是什么？我需要获取`List<Channels>`或`List<NewType>`序列化`JSON`并维护树结构。

如果不可能，至少，我将如何序列化`List<Channels>`以`JSON`维护结构？

**编辑：** 我正在使用`Newtonsoft.Json`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:51:19.280

就我个人而言，我建议将列表序列化为 Channels 数组...考虑以下 JSON 示例：

```
{
    "Channel": {
        "Guid": "27182d04-29d9-4760-86d5-484ba43cd9c6",
        "Title": "FooBar",
        "Parent": "52cfd532-6010-41c5-8fa9-f3bcbb97a630",
        "Children": [
            {
                "Channel": {
                    "Guid": "27182d04-29d9-4760-86d5-484ba43cd9c6",
                    "Title": "FooBar",
                    "Parent": "52cfd532-6010-41c5-8fa9-f3bcbb97a630",
                    "Children": null
                }
            },
            {
                "Channel": {
                    "Guid": "27182d04-29d9-4760-86d5-484ba43cd9c6",
                    "Title": "FooBar",
                    "Parent": "52cfd532-6010-41c5-8fa9-f3bcbb97a630",
                    "Children": null
                }
            },
            {
                "Channel": {
                    "Guid": "27182d04-29d9-4760-86d5-484ba43cd9c6",
                    "Title": "FooBar",
                    "Parent": "52cfd532-6010-41c5-8fa9-f3bcbb97a630",
                    "Children": null
                }
            }
        ]
    }
} 
```

**编辑：这是一个将编写此结构的小测试代码：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Script.Serialization;

namespace JSONTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Channel c = new Channel();
            c.Guid = Guid.NewGuid();
            c.Parent = Guid.NewGuid();
            c.Title = "FooBar";
            c.Children = new List<Channel>();

            Channel a = new Channel();
            Channel b = new Channel();

            a.Guid = Guid.NewGuid();
            b.Guid = Guid.NewGuid();

            a.Parent = Guid.NewGuid();
            b.Parent = Guid.NewGuid();

            a.Title = "FooBar_A";
            b.Title = "FooBar_B";

            c.Children.Add(a);
            c.Children.Add(b);

            /* Serialization happens here!! */
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            string result = serializer.Serialize(c);
            Console.WriteLine(result);
            Console.Read();
        }
    }

    public class Channel
    {
        public Guid Guid { get; set; }
        public string Title { get; set; }

        /* GOT A LOT MORE PROPERTIES IN THIS SPACE */

        public Guid Parent { get; set; }
        public List<Channel> Children { get; set; }
    }
} 
```

这是通过 JSONLint 后的测试结果

```
{
    "Guid": "0e72c12c-a7a1-461a-8b84-8b17023e2e2f",
    "Title": "FooBar",
    "Parent": "d0943246-1adc-4208-bb3b-1249ffe5e7b4",
    "Children": [
        {
            "Guid": "1cf413be-d6b5-405e-8308-7c6dfe817f9a",
            "Title": "FooBar_A",
            "Parent": "ecf14fce-c97d-46f5-890b-bab8ff99fb4a",
            "Children": null
        },
        {
            "Guid": "bd96e6d3-f247-4a0d-9147-92da19793e97",
            "Title": "FooBar_B",
            "Parent": "5cd3e765-23c2-4145-8b45-9964a7c66c54",
            "Children": null
        }
    ]
} 
```

有效的 JSON！

编辑：我注意到的一件事是 JavaScriptSerializer 不解析“Channel”，因为整个对象都是 Channel 类型，而“Children”中的每个对象都是 Channel 类型。如果您要通过 Deserialize 方法传递此 JSON，则应将其构建回包含所有 JSON 持久数据的 C# 结构。

# facebook - Facebook 应用程序权限

> ID：13232312
> 
> 赞同：0
> 
> 时间：2012-11-05T12:38:34.103
> 
> 标签：facebook

> **可能重复：**
> [Facebook Auth Dialog Preview 与实际登录不同](https://stackoverflow.com/questions/10645983/facebook-auth-dialog-preview-is-deifferent-than-actual-login)

我创建了一个 facebook 应用程序并授予了一些权限，**预览身份验证对话框**看起来像![在此处输入图像描述](../Images/6765c82dd67a570130c0942a887b12ec.png)

这些选项未显示在我正在使用该应用程序的网站上。

![在此处输入图像描述](../Images/ea104a2dc634021618b01990979e3e95.png)

# c++ - 多重继承的麻烦。如何调用基函数？

> ID：13232316
> 
> 赞同：0
> 
> 时间：2012-11-05T12:38:57.960
> 
> 标签：c++, multiple-inheritance, diamond-problem

我正在学习 C++，在学校作业中我**必须**使用菱形结构，即使它不完全正确。

```
class Book
{
    public:
        virtual int getPurchasePrice() const;
    protected:
        int m_purchasePrice;
};
class AdultBook: virtual public Book{} ;
class ChildrenBook: virtual public Book{} ;
class ComicBook: public AdultBook, public ChildrenBook {} ; 
```

（我删除了所有方法和构造函数以简化）

现在，如果我想创建一本漫画书并知道它的购买价格，我该怎么办？如果我在 ComicBook 上执行 getPurchasePrice()，则会收到以下错误：

```
error: request for member 'getPurchasePrice' is ambiguous 
```

我认为为 ChildrenBook 和 AdultBook 设置虚拟可以解决歧义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:54:24.530

你使用任何一个

```
obj->AdultBook::getPurchasePrice(); 
```

或者

```
obj->ChildrenBook::getPurchasePrice(); 
```

或者

```
obj->Book::getPurchasePrice(); 
```

对于`obj`类型`ComicBook`

**为埃米利奥·加拉瓦利亚编辑**

假设您没有`getPurchasePrice`为成人和儿童书重新定义，您可以拥有这个

Key A - 成人书，C - 儿童书，CB - 漫画书，B - 书籍

![在此处输入图像描述](../Images/42dd0827641d2e75f651375386d1dcbc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:54:27.260

这很可能是因为在和`getPurchasePrice`中都实现了，而不是在 中实现，它为同一个虚函数继承了两个不同的实现。`AdultBook``ChildrenBook``ComicBook`

您还必须覆盖`getPurchasePrice`ComicBook，并最终通过调用两个基础之一来实现。

# mysql - 从mysql中的第二个表中获取第一个表中条目的详细信息

> ID：13232317
> 
> 赞同：0
> 
> 时间：2012-11-05T12:39:04.497
> 
> 标签：mysql

我有一张表，其中列出了不同用户的寄售清单（表名是寄售）。此表包含作为 PK 的寄售 id (cons_id)、user_id 和日期（以及其他详细信息）。

我有另一个表，其中包含这些寄售的详细信息（表名称是寄售）。它有item_id 为PK，cons_id 为FK，货物的重量、跟踪号和其他详细信息。此表中有多个条目具有与第一个表中的单个条目（寄售）相关的相同外键。

我想为特定用户选择第一个表（货物）中的所有条目，以及从第二个表中获得的详细信息（即特定货物的所有项目的总重量，即第二个表中的条目等.)。

我使用以下 mysql 命令：

```
SELECT a.cons_id, a.user_id, a.date, 
       sum(c.weight) AS weight, sum(c.weight*2) AS amount, 
       count(c.tracking) AS qty 
FROM   `consignments` AS a LEFT JOIN `consignment` AS c 
       ON c.cons_id = a.cons_id WHERE a.user_id = 103 
```

这仅返回该特定用户的寄售表中的第一项，而不返回其余条目。当然，如果我不将它与第二张表连接起来，则所有条目都会返回。

我不确定 sum 之类的聚合是否是问题以及如何正确解决问题。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:59:54.580

使用分组：

进行权重的示例（可以轻松添加更多 sum() 项）：

```
SELECT a.cons_id, a.user_id, a.date, sum(c.weight) AS weight
FROM consignment a, consignments c where a.cons_id = c.cons_id 
GROUP BY a.cons_id,a.user_id, a.date; 
```

证明：

```
create table consignment ( cons_id integer, user_id integer, date timestamp );
create table consignments ( cons_id integer, item_id integer, weight integer );
insert into consignment values ( 1, 1, now());
insert into consignment values ( 2, 1, now());
insert into consignments values ( 1, 1, 10);
insert into consignments values ( 1, 2, 200);
insert into consignments values ( 2, 1, 12);
insert into consignments values ( 2, 2, 24); 
```

运行上面的查询

```
 cons_id | user_id |            date            | weight 
---------+---------+----------------------------+--------
       2 |       1 | 2012-11-05 23:20:34.158361 |     36
       1 |       1 | 2012-11-05 23:20:25.535398 |    210 
```

# django - Django模板中的嵌套循环

> ID：13232320
> 
> 赞同：9
> 
> 时间：2012-11-05T12:39:08.567
> 
> 标签：django, loops, for-loop, django-templates, django-views

我无法理解这一点。我需要以某种方式访问​​父循环中的对象，但我不确定如何。到目前为止，这是我想出的。**我用XXX**标记了代码中的问题区域：

**模板：**

```
{% for item in ingrcat %}
    <h2>{{ item.name }}</h2>
    <ul>
        {% for ingr in XXX %}
        <li><a href="#" id="i{{ ingr.id }}">{{ ingr.name }}</a></li>
        {% endfor %}
    </ul>
{% endfor %} 
```

**XXX** - 应该是属于成分类别的成分列表，该成分类别当前正在父循环中循环。

**看法：**

```
def home(request):
    if request.user.is_authenticated():
        username = request.user.username
        email = request.user.email
        foods = Food.objects.filter(user=request.user).order_by('name')
        ingredients = Ingredience.objects.filter(user=request.user).order_by('name')
        ingrcat = IngredienceCategory.objects.filter(user=request.user)

        context = {}
        for i in ingredients:
            context[i.category.name.lower()] = context.get(i.category.name.lower(), []) + [i]

        newcontext = {'foods': foods, 'ingredients': ingredients, 'ingrcat': ingrcat, 'username': username, 'email': email,}
    else:
        context = {}
        newcontext = {}

    context = dict(context.items() + newcontext.items())

    return render_to_response('home.html', context, context_instance=RequestContext(request)) 
```

**楷模：**

```
from django.db import models
from django.contrib.auth.models import User

class IngredienceCategory(models.Model):
    name = models.CharField(max_length=30)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
        verbose_name_plural = "Ingredience Categories"

    def __unicode__(self):
        return self.name

class Ingredience(models.Model):
    name = models.CharField(max_length=30)
    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
         verbose_name_plural = "Ingredients"

    def __unicode__(self):
        return self.name

class Food(models.Model):
    name = models.CharField(max_length=30)
    ingredients = models.ManyToManyField(Ingredience)
    html_id = models.CharField(max_length=30, null=True, blank=True)
    user = models.ForeignKey(User, null=True, blank=True)

    class Meta:
        verbose_name_plural = "Foods"

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T12:58:36.047

您可以使用反向关系。

```
{% for item in ingrcat %}
<h2>{{ item.name }}</h2>
<ul>
    {% for ingr in item.ingredience_set.all %}
    <li><a href="#" id="i{{ ingr.id }}">{{ ingr.name }}</a></li>
    {% endfor %}
</ul>
{% endfor %} 
```

请参阅文档：

[https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-21T18:17:55.457

### 在 obj.manytomanyfield 上做 get_queryset

```
{% for item in ingrcat %}
<h2>{{ item.name }}</h2>
<ul>
    {% for ingr in item.ingredients.get_queryset %}
    <li><a href="#" id="i{{ ingr.id }}">{{ ingr.name }}</a></li>
    {% endfor %}
</ul>
{% endfor %} 
```

# java - 如何在Android中使用XMLRPC调用magento的“cart_payment.method”API

> ID：13232321
> 
> 赞同：3
> 
> 时间：2012-11-05T12:39:08.767
> 
> 标签：java, android, magento, xml-rpc

我尝试了许多不同的方式来调用“使用`cart_paymant.method`”`API`但总是失败。 `Magento``XMLRPC`

下面是我用来调用它的代码。

```
Map<String,String> map = new HashMap<String,String>();
map.put("method","checkmo");
//map.put("po_number",null);
//map.put("cc_cid", null);
//map.put("cc_owner",null);
//map.put("cc_number",null);
//map.put("cc_type",null);
//map.put("cc_exp_year",null);
//map.put("cc_exp_month",null);

Object[] paymentMethod=new Object [] {map};
Object param1[]=new Object[]{shoppingCartId,paymentMethod};
Object param2[]=new Object[]{Utils.sessionId,"cart_payment.method",param1};   

try 
{
  Boolean ans=(Boolean)client.callEx("call", param2);
  Log.i("Payment Method Setting : ", ""+ans);
}  
catch (XMLRPCException e) {
  e.printStackTrace();
  return 0;
} 
```

***我得到的例外：***

```
java.io.IOException: Cannot serialize null
at org.cws.magentoAnd.xmlrpc.XMLRPCSerializer.serialize(XMLRPCSerializer.java:99)
at org.cws.magentoAnd.xmlrpc.XMLRPCSerializer.serialize(XMLRPCSerializer.java:89)
at org.cws.magentoAnd.xmlrpc.XMLRPCSerializer.serialize(XMLRPCSerializer.java:72)
at org.cws.magentoAnd.xmlrpc.XMLRPCSerializer.serialize(XMLRPCSerializer.java:72)
at org.cws.magentoAnd.xmlrpc.XMLRPCCommon.serializeParams(XMLRPCCommon.java:36)
at org.cws.magentoAnd.xmlrpc.XMLRPCClient.methodCall(XMLRPCClient.java:253)
at org.cws.magentoAnd.xmlrpc.XMLRPCClient.callEx(XMLRPCClient.java:174) 
```

***仅供参考，我还发布了 Web 上提供的调用该 API 的 php 代码。***

```
$paymentMethod = array(
    “method” => “checkmo”
);

$resultPaymentMethod = $proxy->call(
    $sessionId,
    “cart_payment.method”,
    array(
        $shoppingCartId,
        $paymentMethod
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T10:01:08.243

我已经`sessionId`登录了，但是当我调用一个方法（例如：）时`catalog_category.info`，它会抛出异常：

> XMLRPC 故障：调用参数与签名不匹配。

这是我的代码：

```
new AsyncTask<Void, Void, Void>() {
   @Override
   protected Void doInBackground(Void... params) {
      uri = URI.create("http://gameshay.net/magento/index.php/api/xmlrpc/");
      client = new XMLRPCClient(uri);
      String sessionId = "";
      try {
         sessionId = (String)client.call("login", "mdev", "socbay123");
         Log.d("MY_XMLRPC_SUCCESS_SESSION_ID", sessionId);
         @SuppressWarnings("unchecked")
         final Map<String, Object> category = (Map<String, Object>) client.call("call" Object[]{sessionId, "catalog_category.info","5"});
      }
      catch (XMLRPCException e) {
         Log.d("MY_XMLRPCException_MSG", e.getMessage());
      }
      return null;
   }
}.execute(); 
```

# php - OO分层编程-如何检索对象

> ID：13232322
> 
> 赞同：0
> 
> 时间：2012-11-05T12:39:10.963
> 
> 标签：php, oop

我想知道哪个是从两个表中检索包含数据的对象的最佳方法。就我而言，我想检索一个投资组合项目，该项目在投资组合项目表中具有数据，并在一个单独的表中包含图像。

现在我正在努力寻找在对象中检索这些项目的最佳方法。在第一种方式中，我一次在我的 Data 类中检索所有内容并返回完整的对象，而第二种方式从两个不同的数据类（一个用于一般投资组合信息，一个用于图像）构建对象。

现在我只是想知道，有没有一种方法比另一种更好，或者两种方法都可以接受？一次获取所有数据是否可以，还是应该像第二种方式一样将其分解？

我有两个表：portfolioItem 和portionItemImage 我有一个类

```
PortfolioItem{
    public $portfolioItemId;
    public $name;
    public $images //array
} 
```

1：

```
$dataPortfolioItem = new DataPortfolioItem();
$theItem = $dataPortfolioItem->getPortfolioItem(5);
DataPortfolioItem{
    public function getPortfolioItem($theId){
        //create a new portfolio item
        //get the portfolio data from portfolioItem table and fill in the id and name
        //get the image data from image table and set the images array from the object
        //return the object with the data and images included
    }
} 
```

2：

```
$dataPortfolioItem = new DataPortfolioItem();
$theItem = $dataPortfolioItem->getPortfolioItem(5);
$dataPortfolioItemImages = new DataPortfolioItemImages();
$theItem->images = $dataPortfolioItemImages->getPortfolioItemImages(5)

DataPortfolioItem{
    public function getPortfolioItem($theId){
        //create a new portfolio item
        //get the portfolio data from portfolioItem table and fill in the id and name
        //return the portfolio item     
    }
}

DataPortfolioItemImage{
    public function getPortfolioItemImages($theId){
        //get the images from the database table and return them in an array
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:21:21.737

“在我的情况下，我想检索一个投资组合项目......”。如果是这种情况，您的数据访问层 (DAL) 应该返回 Portfolio 对象，而不是在两个单独的对象中返回它的一部分。

关于设计的一些一般性的事情。你的应用逻辑应该基于你的模型，不应该知道数据存储细节。如果是这种情况，那么您的 DAL 应该只提供模型对象。

旁白：“方式从两个不同的数据层构建对象，一个用于portfolioItem 数据，一个用于图像。” 层层可能是指表格。层是不同的东西。

# android - Android apk 替换 vs 更新

> ID：13232332
> 
> 赞同：0
> 
> 时间：2012-11-05T12:39:56.753
> 
> 标签：android

我已经在手机上安装了一个应用程序，正在尝试安装它的更新版本。

我将apk放在数据/数据文件夹中，在路径中使用文件管理器，我正在尝试安装它 - 它显示一个替换但不升级的对话框（使用相同的密钥库和版本代码/版本名称签名具有增量价值）。

有人可以对此进行更多解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:44:58.887

只有当您真正按照 Android Market 的安装程序进行操作时，才能进行升级。否则，它只是一个替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:47:52.530

从 Google Play 安装和随后更新应用程序之间存在差异。例如，通过文件管理器安装的应用程序将始终提示您*替换*而不是*更新*应用程序。直接在设备上侧加载应用程序，没有更新机制。这不仅适用于您的应用程序，而且适用于每个应用程序。

它是如何签名的，甚至是你的应用程序版本的增量都没有关系。

# c++ - 堆损坏和互斥锁

> ID：13232335
> 
> 赞同：0
> 
> 时间：2012-11-05T12:40:08.217
> 
> 标签：c++, heap-memory, heap-corruption, boost-mutex

我在应用程序中有一个严重的错误，我试图了解发生了什么。我在崩溃之前有一些日志。我无法简单地重现该错误。

上下文 ：

```
Thread1:
void f()
{
    log(thread1_1)
    boost::lock_guard< boost::recursive_mutex > lock(mutexABC)
    log(thread1_2)
       -- eventually corruption heap could occur here
    log(thread1_3)
}

Thread2:
void f()
{
    log(thread2_1)
    boost::lock_guard< boost::recursive_mutex > lock(mutexABC)
       -- eventually corruption heap could occur here
    log(thread2_2)
} 
```

在我的日志中（我正在使用 LOG4CXX）我有以下顺序：

```
15:36:45,260  thread2_1
15:36:45,263  thread1_1
15:36:45,265  thread1_2
15:36:45,265  thread2_2

some GUI log thread3_*

15:36:45,276  //application crash
and no thread1_3 log before thread2_2! 
```

我怎么可能在 thread1_3 之前记录 thread2_2 ？由于堆损坏可以解锁锁而不会导致程序崩溃，并且第二个线程可以获取此锁并在应用程序崩溃之前执行一些代码？

我在 Windows 7 下。我的 C++ 程序在编译器优化打开的情况下进入发布模式。

# android - 广播接收器双卡

> ID：13232339
> 
> 赞同：4
> 
> 时间：2012-11-05T12:40:31.100
> 
> 标签：android, broadcastreceiver, dual-sim

我有一部双卡安卓手机。我正在使用自定义广播接收器，它可以毫无问题地读取传入消息。我想知道是否有办法找出哪个 sim 收到了消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:28:24.147

您可以使用 TelephonyManager 获取活动 sim 的信息。例如，它是序列号。

```
TelephonyManager telephoneMgr = (TelephonyManager) ctx.getSystemService(Context.TELEPHONY_SERVICE);

String simSerial = telephoneMgr.getSimSerialNumber(); 
```

您还可以获得 line1Number，如果您的网络运营商已将您的号码放入其中，您可以将其与 SMS 消息中 to> 字段中的号码进行比较。

```
String phoneNumber = telephoneMgr.getLine1Number(); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-11T12:43:42.850

我在这个问题上遇到了一些非常困难的时间，最后我找到了一个解决方案，尽管我只在 api 22 级以上对其进行了测试。

您必须查看收到的意图中的额外信息。在我的例子中，额外的 Bundle 中有两个有用的键：“slot”和“subscription”。

这是示例：

```
public class IncomingSms extends BroadcastReceiver {

          public void onReceive(Context context, Intent intent) {

                // Retrieves a map of extended data from the intent.
                Bundle bundle = intent.getExtras();

                int slot = bundle.getInt("slot", -1);
                int sub = bundle.getInt("subscription", -1);

                /*
                  Handle the sim info
                */
            }
} 
```

我没有找到有关此的文档，因此这可能取决于设备/制造商，我可以想象密钥是不同的或类似的东西。您可以通过转储捆绑包的密钥集来验证这一点：

```
Set<string> keyset = bundle.keySet(); 
```

# objective-c - UIWebView 从本地文件加载 HTML 但偶尔会失败

> ID：13232340
> 
> 赞同：0
> 
> 时间：2012-11-05T12:40:32.903
> 
> 标签：objective-c, ios, uiwebview, uiwebviewdelegate

我遇到了许多从本地 html 文件加载和重新加载 UIWebView 内容的方法，但似乎我遇到的问题不断出现。

在我的项目中，我有一个 webView，它可以动态加载从我的 XCode 项目中的 50 个不同 HTML 文件之一中提取的 HTML 内容。根据用户之前在 viewController 上按下的按钮，使用不同的 HTML 文件重新加载我的 webView 的内容。大多数情况下一切正常，但在调用 webViewDidFinishLoad 委托方法后，webView 将不时显示“（null）”。

我不明白发生了什么，当我在这个 viewController 上来回切换并重新加载 webView 时，最终会为同一个 HTML 文件正确显示 HTML 内容。

这是在 webView 中加载 HTML 的代码（从`viewWillAppear`方法调用）：

```
 - (void) reloadWebViewFromLocalFile{

    // Reset the UIWebView
    [self.contentWebView removeFromSuperview];
    self.contentWebView = nil;
    self.contentWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)];
    [self.contentWebView setContentMode:UIViewContentModeScaleAspectFit];
    [self.contentWebView setDelegate:self];
    [self.contentScrollView addSubview:self.contentWebView];
    [self.contentWebView release];

    NSString *fileName = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%d.%d",self.currentIndexPath.section+1,self.currentIndexPath.row+1] ofType:@"html"];

    NSString *CSSContent = [NSString stringWithFormat:@"<style type=\"text/css\">body{padding-left:8px;padding-right:8px;font-family:\"%@\";}p{text-align:justify;}img{max-width:300px;display:block; margin:auto;}strong{font-family:\"%@\";}h1{font-size:20;font-family:\"%@\"}h2{font-size:18;font-family:\"%@\"}h3{font-size:17;font-family:\"%@\"}</style><script type=\"text/javascript\">touchMove = function(event) {event.preventDefault();}</script>", FONT_STAG_BOOK, FONT_STAG_SEMIBOLD, FONT_STAG_SEMIBOLD, FONT_STAG_SEMIBOLD, FONT_STAG_SEMIBOLD];

    self.HTMLString = [NSString stringWithFormat:@"<html><head>%@</head>%@</html>",CSSContent,[NSString stringWithUTF8String:[[NSData dataWithContentsOfFile:fileName] bytes]]];
[self.contentWebView loadHTMLString:self.HTMLString baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]];
} 
```

这是`webViewDidFinishLoad`委托方法：

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView{

    NSString *stringContent = [self.contentWebView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"];

        float height = [[self.contentWebView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"] floatValue] + 20;
        [self.contentWebView setFrame:CGRectMake(0, 0, 320, height)];
        [self.contentScrollView setContentSize:CGSizeMake(0, height+self.nextButton.frame.size.height)];

        [self.nextButton setFrame:CGRectMake(0, height, 320, self.nextButton.frame.size.height)];

        if ([self.contentWebView respondsToSelector:@selector(scrollView)]) {
            self.contentWebView.scrollView.scrollEnabled = NO; // available starting in iOS 5
        } else {
            for (id subview in self.contentWebView .subviews)
                if ([[subview class] isSubclassOfClass: [UIScrollView class]])
                    ((UIScrollView *)subview).scrollEnabled = NO;
        }
} 
```

**编辑：忘记复制粘贴在 webView 中实际加载 HTML 字符串的行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:15:44.003

问题似乎出在使用该`bytes`功能，如果内容编码不准确，它就不能很好地工作......

```
[NSString stringWithUTF8String:[[NSData dataWithContentsOfFile:fileName] bytes]]; 
```

应该

```
[[NSString alloc] initWithData:[NSData dataWithContentsOfFile:fileName] encoding:NSUTF8StringEncoding]; 
```

# matlab - 使图像中的注释框背景半透明

> ID：13232341
> 
> 赞同：1
> 
> 时间：2012-11-05T12:40:36.113
> 
> 标签：matlab

我目前正在为 MATLAB 中的卫星图像添加注释。由于每个文本字段下方的颜色变化很大，因此我想在文本下方使用背景颜色以使其更易于查看和阅读。

但是，当我这样做时，很多地形都会变得模糊。我虽然试图使每个文本框的背景颜色半透明，但在想出一个解决方案时遇到了死胡同。

有任何想法吗？我希望有一些 UI 元素，我可以将“facealpha”设置为 0.5。我还需要支持旋转的文本（如下面的示例所示）。

下面是一些示例代码和生成的图像。带有卫星数据的工作空间也可以在链接中找到： [示例工作空间](https://www.sugarsync.com/pf/D775999_2_6422473093)

```
figure(1);clf
imagesc(xx,yy,Map);

hold on
plot(xInspection,yInspection,'g.-')

% # Two ways of making a rotated text annotation. 
% # Cant make background semi-transparent
testAnno= annotation('textarrow',[0.5 0.5],[0.5 0.5], ...
                'string','textarrow annotation', ...
                'HeadStyle','none','LineStyle', 'none',...
                'TextRotation',asin(directionVec(1))*180/pi,...
                'TextBackgroundColor',[0.7 0.7 0.7]);

testText = text(mean(xInspection),mean(yInspection),'text annotation', ...
        'rotation',asin(directionVec(1))*180/pi, ...
        'HorizontalAlignment','right', ...
        'color',[0 0 0], ...
        'backgroundcolor',[0.7 0.7 0.7], ...
        'fontsize',8); 
```

![在此处输入图像描述](../Images/7da97beab00821258967890fb3865ee5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:29:52.913

It doesn't look like either `annotation` or `text` return HgObjects that have `BackgroundAlpha` properties (they might exist but I wasn't able to find them using [`getundoc`](http://www.mathworks.com/matlabcentral/fileexchange/32934-getundoc-get-undocumented-object-properties) or by trying various different hacks).

I was able to get something working by drawing the background myself. Here is a simple proof of concept:

```
f = figure;
tObj = text(.5, .5, 'text object', 'FontSize', 20);
set(gca,'XLimMode', 'manual', 'YLimMode', 'manual'); % prevent the axes from resizing automatically
p = get(tObj, 'Extent'); %Get the outer position of the text

% now create a  patch around the text object
pObj = patch([p(1) p(1) p(1)+p(3) p(1)+p(3)], [p(2) p(2)+p(4) p(2)+p(4) p(2)], 'r');
uistack(tObj, 'top'); % put the text object on top of the patch object

set(pObj , 'FaceAlpha', .2); % set the alpha of the patch face to .2

%Rotate the objects
set(tObj, 'Rotation', 20);
rotate(pObj, [0 0 1], 20); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:29:38.887

I am afraid the only way you can do this is by not setting any color to your annotations, and then placing a `patch` in the background of each annotation. So something like this:

```
% Use completely transparent annotations
hA = annotation('textarrow', ..., 'TextBackgroundColor', 'none')

% Place a transparent patch exactly in the background of your annotation
hP = patch(X, Y, 'white', 'EdgeColor', 'none', 'FaceColor', 'white', ...
    'alpha', 0.3)

% Ensure that your annotation is on top
uistack(hA, 'top') 
```

But of course the big problem is to determine the correct coordinates of the patch (`X` and `Y`). Rotating is easy by simply multiplying your coordinates by a [rotation matrix](http://en.wikipedia.org/wiki/Rotation_matrix). However, finding the length and height of the patch and its central location is not that easy. You might be able to find some useful functions for this at Matlab central...

# java - 在键值对列表中检查具有相同键的值

> ID：13232344
> 
> 赞同：0
> 
> 时间：2012-11-05T12:40:40.467
> 
> 标签：java, map, key-value

假设我有一个包含一些键值对的列表和一个包含许多值的数组。

```
public boolean hasSameKey(List<Map.Entry<Key, Value>> list, Value ... values) {
    return ?;
} 
```

我想检查的是，如果所有值都具有*相同的 key*`values`条目。`list`

 ***编辑** 为了澄清，列表中的每个键都可能具有具有多个值的键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:59:29.937

根据我从您的问题中得到的信息，我将首先稍微更改您的方法签名以`Map<Key, List<Value>>`作为第一个参数。

然后你可以像这样继续： -

```
public boolean hasSameKey(Map<Key, List<Value>> map, Value... values) {

    for (Key key: map.keySet()) {
        if (map.get(key).containsAll(Arrays.asList(values))) {
            return true;
        }
    }
    return false;
} 
```

*   `map.get(key)`- 获取`List<Value>`对应键的 。
*   [`List#containsAll`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#containsAll%28java.util.Collection%29)方法检查特定元素中的所有元素是否都`collection`在该列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:47:15.333

如果您使用的是 Rohit Jain 建议的多地图：`Map<Key, List<Value>>`您可以这样做：

```
public boolean hasSameKey(Map<Key, List<Value>> multimap, Value ... values) {
    for(Key key : multimap.keySet()) {
        if (map.get(key).containsAll(Arrays.asList(values))) {
            return true;
        }
    }
    return false;
} 
```

这样你就可以检查你所有的`Value`s 是否存在于 a`List`中`Map`。*

# php - 在执行 PHP 代码之前对其进行搜索和替换

> ID：13232346
> 
> 赞同：2
> 
> 时间：2012-11-05T12:40:51.957
> 
> 标签：php, apache

有没有办法在PHP 引擎解释PHP 代码**之前对其执行搜索和替换？**

期望的时间线：

1.  PHP 代码是`<?php echo("hello"); ?>`.
2.  搜索和替换操作是`hello`→`good bye`
3.  PHP 代码现在是`<?php echo("good bye"); ?>`.
4.  PHP 引擎解释代码（输出为`good bye`）。

`ob_start`可以使用甚至`mod_substitute`作为 Apache 的输出过滤器来操作 PHP 引擎的输出。但是，是否可以操纵 PHP 引擎的输入（PHP 代码、请求等）？

**编辑：**

我正在处理数千个 PHP 文件，我不希望它们被修改。我想在这些文件中替换`host1`为`host2`，因为这些文件是从中复制的，`host1`并且它们必须在`host2`. 实际上，对主机名进行了几项测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:44:55.410

请求不寻常）
看起来很愚蠢。但是如果你真的需要它试试这个。
例如你需要`test.php`在执行之前更改文件。
尝试以下步骤（`index.php`例如）：
1）打开 test.php 进行阅读并获取其内容。
2）替换你想要的一切。
3）将更改的文本另存为`test2.php`
4）包括`test2.php`。

**编辑**

更好瘦为什么需要它？尝试使用[变量](http://php.net/manual/en/language.variables.php)。
我会帮你的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:45:08.233

您可以使用 php 脚本打开`.php`文件，进行必要的替换，然后`include`保存该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:46:08.543

您**应该学习诸如**[smarty](http://www.smarty.net/)之类的模板引擎和各种形式的[预过滤](http://www.smarty.net/docsv2/en/api.register.prefilter.tpl)器。

像这样修改代码不是一个好主意，但是要回答您的问题...您可以加载原始代码，对其进行预处理并存储在新文件中：

```
$contents = file_get_contents( 'original.php');
// ...
file_put_contents( 'new.php', $contents);
include( 'new.php') 
```

但我没有看到任何有效的用途......

你也可以使用[`eval()`](http://php.net/manual/en/function.eval.php)，但每次你这样做时，一只小猫就会死掉（不，这是一个危险的功能，而且实际上只有一些有效的用途）。

# c++ - 将枚举传递给类，然后返回

> ID：13232354
> 
> 赞同：0
> 
> 时间：2012-11-05T12:41:41.137
> 
> 标签：c++, class, function, enums

我在 code.cpp 中声明了以下枚举，并且我使用了一个 switch 语句，该语句取决于枚举的设置。

```
enum State  { HighMoral, PoorMoral, EndGame };
State CurrentState = HighMoral;

switch (CurrentState)
{
        case HighMoral: random = rand()%3+1;
                        switch (random)
                        {
                            case 1: CurrentState = g_Solider.KillCommander(&CurrentState, random = rand()%2+1);
                            break;
                            case 2: CurrentState = g_Solider.KillSeniorCommander(&CurrentState,random = rand()%2+1);
                            break;
                            case 3: CurrentState = g_Solider.LessHalfStrength(&CurrentState);
                            break;
                        };
                        break;
        case PoorMoral: CurrentState = g_Solider.JoinSeniorCommander();
                        break;
}; 
```

我想将此枚举传递给类中的一个函数，然后让它返回`HighMoral`，`PoorMoral`或者`EndGame`更改我的 switch 语句的当前状态。

但是，当涉及到传递并返回它时，我相当无能。我环顾四周，没有找到如何做到这一点的运气。

我有3个文件。code.cpp（包含`void main()`和`enum`新状态）

这是我正在尝试做的一个例子。

Solider.h

```
#include <time.h>
#include <iostream>

using namespace std;

extern enum State;

class Solider
{
private:
public:
    void KillSeniorCommander(State& currentState, int random); // Kill the Senior Commander or random event
    void JoinSeniorCommander(State& currentState); // Have the Commander join the group
    void DefunctGroup(State& currentState); // Disband the group
}; 
```

Solider.cpp

```
void Solider::KillSeniorCommander(State& currentState, int random)
{
    if (SeniorCommander==1) // If The SeniorCommander is Active
    {
        cout << "The Senior Commander has died!\n";
    SeniorCommander--; // Kill the SeniorCommander
    Groupsize--; // Reduce the Groupsize
    Strength = Strength - (5*2.5); // Remove SeniorCommanders impact on Strength
    SquadMoral = SquadMoral - (5*2.5);// Remove SeniorCommanders impact on SquadMoral
    CurrentState = PoorMoral;
}
else // Otherwise do something random
{ 
    switch (random)
    {
    case 1: cout << "Your group survives a ambush!\n"; 
            break;
    case 2: random = rand()%5+1; // Give random a new value
            if (random>1)
            {
                cout << random << " group members have died!\n"; // Kill x Aamount of members
            }
            else
            {
                cout << "A group member has died!\n"; // Kill a member
            }
            Groupsize = Groupsize - random; // Remove the members from the group
            Strength = Strength - (random*2.5); // Remove there effect Strength
            SquadMoral = SquadMoral - (random*2.5); // Remove there effect on GroupMoral
            break;
    }
    CurrentState = CurrentState;
}
} // KillSeniorCommander(int random)

void Solider::JoinSeniorCommander(State& currentState)
{
if (SeniorCommander==2 && Commander == 0) // Check to see if the Commander is dead and a
{                                         // SeniorCommander is not in service
    cout << "The Senior Commander has joined!\n";
    SeniorCommander--; // Change their status to active
    Groupsize++; // Add them to the group
    Strength = Strength - (5*2.5); // Add their impact to Strength
    SquadMoral = SquadMoral - (5*2.5); // Add their impact to GroupMoral
    CurrentState = HighMoral;
}
else // He isn't available to join
{
    cout << "You fail to recruit new command!\n";
    CurrentState = CurrentState;
}
} // JoinSeniorCommander()

void Solider::DefunctGroup(State& currentState)
{
cout << "Your group has been disbanded as it is not fit for duty.";
CurrentState = EndGame;
} // DefunctGroup() 
```

代码.cpp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:00:32.677

与 C++ 中的所有其他内容一样，您需要查看要使用的内容的声明。在您的情况下，这意味着`State`必须将 的定义移至头文件，然后将该文件包含在 main.cpp 和士兵.h 中。然后，您将能够在成员函数`State`的声明中正常使用该类型。`Soldier`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:45:26.507

枚举可以被视为接口中的整数。您可以使用两种方法中的一种：通过引用传递并让函数内部更改它，或者按值传递并按值返回下一个`State`：

```
// one or the other
void nextState( State& currentState );
State nextState( State currentState ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:41:05.620

在标头中定义枚举并将该标头包含在两个文件中。

例如：

```
#ifndef SOLDIERSTATE_H
#define SOLDIERSTATE_H

enum SoldierState
{
    HighMorale, 
    PoorMorale, 
    EndGame
};

#endif 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T12:49:08.127

```
class Game
{
    public:
        enum State { HighMoral, PoorMoral, EndGame };
        aMethod(State::PoorMoral);
};

Game::aMethod(State aState)
{
    return State::HighMoral;
} 
```

# youtube-api - 在 youtube 分析 api 上查询视频时禁止响应消息

> ID：13232367
> 
> 赞同：0
> 
> 时间：2012-11-05T12:42:28.333
> 
> 标签：youtube-api

我使用**youtube 分析 api**控制台 ([https://developers.google.com/apis-explorer/#p/youtubeAnalytics/v1/youtubeAnalytics.reports.query?][1]) 检索视频的详细信息（来自我的频道)，**id**的值：channel==4aYYO.... 指标：视频。
我得到的响应是 403 **Forbidden** code: 403, message: "Forbidden
谁能指出我是否缺少任何权限？

```
 [1]: https://developers.google.com/apis-explorer/#p/youtubeAnalytics/v1/youtubeAnalytics.reports.query? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T05:30:58.117

首先，将 YouTube 数据 API 中的 ChannelList 方法用于您的频道 ID。这必须是经过身份验证的调用，因此请单击 API Explorer 中的 Authorize Requests 滑块。确保您使用拥有该频道的 Google 帐户登录。

API Explorer 查询

```
https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.channels.list?part=snippet&mine=true&_h=1& 
```

这是来自 Google 的 Jeff 的更多解释。

[如何获取经过身份验证的用户拥有的 YouTube 频道列表和相关频道 URL（用户或频道）](https://stackoverflow.com/q/16620521/2170704)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:22:22.283

频道 ID 以`UC`. 你能试试看`UC4aYYO...`是否有效吗？

# javascript - 使用 iframe 动态创建选项卡

> ID：13232370
> 
> 赞同：3
> 
> 时间：2012-11-05T12:42:36.877
> 
> 标签：javascript, jquery, html, tabs

当用户单击菜单时，我正在动态创建选项卡。引用的 html 文件在 iframe 中打开，该 iframe 也是动态创建的。

一切都运行正常，但是当标签计数超过' **3** '时，用户点击上一个选项卡上的下一个iframe会显示在上一个iframe内容下面。

下面是我使用的代码。谁能建议我该怎么做？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<script text/javascript>
$(document).ready(function() {
       var c=0;
       $("#documents a").click(function() {
       c++;
       addTab($(this),c);
       return false;        
       });

    $('#tab1 a.tab').live('click', function() {
        // Get the tab name
            i = 0;
            var chk;
            var contentname = $(this).attr("id") + "_content";

        var ifid=$("#content .dcontent:last iframe").attr("id");

            // hide all other tabs
            if(ifid>1)
            {
            for(i=ifid;i>0;i--) 
                {
                    fr = document.getElementById (i);
                    if (fr.style.display!='none')
                    {
                        fr.style.display="none";
                    }   
                }  
            }    

        //make the current frame visible 
        var lnm=$(this).attr("name");

        fr = document.getElementById (lnm);

        if (fr.style.display=='none')
            fr.style.display="block";

        $("#tab1 li").removeClass("current");

        // show current tab
        $(this).parent().addClass("current");

    });
});

/* Creation of Tab*/ 
function addTab(link,ct) {

    // If tab already exist in the list, return
   if ($("#" + $(link).attr("rel")).length != 0) 

return;

    // hide other tabs
$("#tab1 li").removeClass("current");

   if(ct>1)
   {
            for(i=ct-1;i>0;i--){    
                fr = document.getElementById (i);

                if (fr.style.display!='none')
                    fr.style.display="none";
            }  
   }

    // add new tab and related content
   $("#tab1").append("<li class='current'><a class='tab' id='" + $(link).attr("rel") + "' name='"+ct+"' href='" + $(link).attr("href") + "' target='" + $(link).attr("target") + "'>" + $(link).html() + "</a><a name ='"+ct+"' href='#' class='remove' >x</a></li>");

    var e = $('<div class="dcontent" ><li style="list-style:none;"><iframe id="'+ct+'" src='+$(link).attr("href")+' name="content" align="middle" width=600px; height=400px;> </iframe></li></div>');

    $('#content').append(e);   
}
</head>
    <body>

        <ul id="tabs">
            <!-- Tabs go here -->
            <div style="float: left;">
                <ul id="menu">                                
            <li> <a href="#">Next</a>
               <ul id="documents">
                        <li><a href="tab1.html" target="content" rel="1" >Document4</a></li>
                            <li><a href="tab2.html" rel="2"  target="content" >Document5</a></li>
                            <li><a href="tab3.html" rel="3"  target="content" >Document6</a></li>
                           <li><a href="tab4.html" rel="4"  target="content" >Document6</a></li>
                        </ul>
                    </li>

                </ul>

            </div>
        </ul>
        <ul id="tab1">
            <div style="float: left;">     
        </ul>

        <div id="content">              
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:27:31.873

一个主要问题是您标识元素的方式。您有一个数字变量**c**，从 0 开始，每当单击链接时都会增加，然后将其设置为 ID 作为您的 iframe 之一。但是，您也在为创建的选项卡设置数字 ID。最终，这些元素 ID 将重叠，您将遇到此类错误。

至少，让你的 iframe 的 ID 为

*   "frame_" + $(link).attr("rel")
*   而不是您现在使用的**ct数值变量（** **c**的副本）

*因此，对于rel*属性为 2的按钮，示例 ID 可能是“frame_2” 。这样，您将不会将*rel*属性为 2 的按钮连接到具有随机数字 ID 的某个框架。

完全摆脱**c**变量。

而不是这个循环：

```
if(ct>1) {
    for(i=ct-1;i>0;i--){    
        alert(i);
        fr = document.getElementById (i);

        if (fr.style.display!='none')
            fr.style.display="none";
    }  
} 
```

采用：

```
$("#content").children("div.dcontent").each(function() {
    var theFrame = $(this).find("li iframe");
    if ($(theFrame).attr("id") != ("frame_" + $(link).attr("rel"))) {
        $(theFrame).css("display", "none");
    }
}); 
```

这样，您可以轻松地将*rel属性链接到框架的 ID，而不是***c**变量中的任意数值。

您应该对所有内容使用*rel*属性，因为您已经给出了链接。您可以使用*data-buttonid 之*类的东西并使用 .data() 来访问它，但这取决于您。

然后，当您识别所有内容时，使用该号码将所有内容配对。IE

*   帧 ID："frame_" + $(link).attr("rel")
*   标签 ID/名称："tab_" + $(link).attr("rel")
*   名称：“tab_anchor_”+ $(link).attr(“rel”)

使用我提供的代码进行测试会导致它按照你想要的方式执行。

# javascript - 将函数转换为插件

> ID：13232377
> 
> 赞同：0
> 
> 时间：2012-11-05T12:43:05.957
> 
> 标签：javascript, jquery, jquery-plugins

我有一个在我的项目中多次调用的函数：

```
function fillSelect(select) {
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "Data.asmx/Status",
        dataType: "json",
        async: true,
        success: function(data) {
            $.each(data.d, function(i) {
                select.append('<option value=' + data.d[i].value + '>' + data.d[i].name + '</option>');
            });
        },
        error: function(result) {
            alert("Error occured. Contact admin");
        }
    });
} 
```

然后在我的代码中我这样使用：

```
fillSelect($('select#status1'));
fillSelect($('select#status2'));
fillSelect($('select#status3')); 
```

我想做的是将我的函数转换为插件，所以我可以这样调用它：

```
$('select#status1, select#status2, select#status3').fillSelect(); 
```

使用[http://starter.pixelgraphics.us/](http://starter.pixelgraphics.us/)我生成了空模式：

```
(function($) {
    $.ajaxSelect = function(el, select, options) {
        // To avoid scope issues, use 'base' instead of 'this'
        // to reference this class from internal events and functions.
        var base = this;

        // Access to jQuery and DOM versions of element
        base.$el = $(el);
        base.el = el;

        // Add a reverse reference to the DOM object
        base.$el.data("ajaxSelect", base);

        base.init = function() {
            base.select = select;

            base.options = $.extend({}, $.ajaxSelect.defaultOptions, options);

            // Put your initialization code here
        };

        // Sample Function, Uncomment to use
        // base.functionName = function(paramaters){
        // 
        // };

        // Run initializer
        base.init();
    };

    $.ajaxSelect.defaultOptions = {
        clear: false //append to select or replace current items
    };

    $.fn.ajaxSelect = function(select, options) {
        return this.each(function() {
            (new $.ajaxSelect(this, select, options));
        });
    };

})(jQuery); 
```

但我不知道如何填写。
我想做的是调用服务器，然后填充与我输入参数一样多的选择项。
这么小的插件真的需要所有这些代码吗？

**我知道可能有一些插件具有此功能，但我想创建自己的插件，只是为了了解更多:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:52:49.523

你不需要你可以做的所有样板，如下所示

```
$.fn.fill = function fillSelect(options) {
   var self = this; 
   options = $.extend({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Data.asmx/Status",
            dataType: "json",
            async: true,
            success: function(data) {
               var list = "";
               $.each(data.d, function(i) {
                     list += '<option value=' 
                              + data.d[i].value + '>' 
                              + data.d[i].name 
                              + '</option>';
                  });
               self.filter("select").each(function(){
                   $(this).append(list);
               });
             },
            error: function(result) {
                alert("Error occured. Contact admin");
            }
          },options);
    $.ajax(options);
    return this;
} 
```

首先要注意的是该函数被添加到 jQuery 原型/$.fn 中。然后成功处理程序已更改，以便处理所有选定的元素，最后返回选择以使链接成为可能，因为这在使用 jQuery 时通常是预期的。

上面的代码只会将相同的选项附加到所有选定的“选择”元素。如果您选择其他选项，则不会将选项附加到这些元素。

我已更改签名以接受选项元素。在上述版本中，默认版本等于您的 ajax 选项。如果提供了其他值，如果存在默认值，它们将覆盖默认值。如果不存在默认值，则将值添加到选项对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:49:55.453

您只需将您的方法添加到`$.fn`对象中，如下所述：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

关键字将`this`评估用于调用函数代码的 jQuery 选择器，因此不要`select`在代码中使用参数，只需使用`this`

# javascript - javascript中单页应用程序的主题支持

> ID：13232378
> 
> 赞同：1
> 
> 时间：2012-11-05T12:43:07.253
> 
> 标签：javascript, css, themes, angularjs

我想为我的单页应用程序添加主题支持。要求是主题更改必须通过 javascript（无服务器调用）在本地完成，才能在离线模式下使用。我使用 angularjs，所以 html 将在路由器中更改。

我唯一的问题是如何处理 css。是否有任何 js 库可以帮助我加载 css 文件？有什么问题吗？

**编辑：**我找到了以下库[https://github.com/rgrove/lazyload/](https://github.com/rgrove/lazyload/)应该可以完成加载 css 文件的工作。该库唯一的缺点是该库的最后一次更新是一年多前。一个更积极开发的图书馆将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:54:45.087

如果您的主题仅更改颜色，我将使用不同的 css 类来解决此问题。由于 CSS 可以被覆盖，您只需要将主题名称作为类附加到父元素，并为其创建相应的规则。我建议将所有与主题相关的 css 规则放在不同的文件中，这样更容易维护。

喜欢

```
.themename.cssclassname{
   color: red;
} 
```

会胜过

```
.cssclassname{
   color: green;
} 
```

并且您可以使用[less](http://lesscss.org/)轻松创建嵌套规则

通过这样做，您将获得 3 个好处。

1.  所有浏览器都接受这一点，包括 IE7。（我认为IE7在动态插入样式标签时会出现一些问题）

2.  所有 CSS 文件都将被缓存。

3.  易于维护。（我真的不喜欢把 CSS 和 JS 混在一起太多。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:47:27.833

`style`可以在 JavaScript 中添加和删除元素。只需创建元素并将其添加到页面以在其中应用规则，然后删除元素以删除其规则。您可以对`link`引用外部样式表的元素执行相同的操作，但如果您想确保在脱机模式下工作并且表单可能没有被缓存，则`style`具有内联规则的元素可能会更好。

这是一个使用`style`元素的示例：

```
(function() {
  var css = "body { color: green; }";

  document.getElementById("theButton").onclick = toggleStyle;

  function toggleStyle() {
    var style = document.getElementById("styleOne");
    if (style) {
      // Remove it
      style.parentNode.removeChild(style);
    }
    else {
      // Add it
      style = document.createElement('style');
      style.id = "styleOne";
      if (style.styleSheet) {
          style.styleSheet.cssText = css;
      }
      else {
          style.appendChild(document.createTextNode(css));
      }
      document.body.appendChild(style);
    }
  }

})(); 
```

[实时复制](http://jsbin.com/ecigot/1/)| [资源](http://jsbin.com/ecigot/1/edit)

使用 a`link`会更容易，因为您不必处理样式文本所在位置的浏览器差异。

# web-services - Apache CXF - http-conf:conduit 代理设置

> ID：13232383
> 
> 赞同：1
> 
> 时间：2012-11-05T12:43:33.773
> 
> 标签：web-services, proxy, cxf

在我的项目中，我必须为 Web 服务配置管道设置。要与 Web 服务通信，我必须通过代理。因为 http-conf:basicAuthSupplier 由于[http://cxf.547215.n5，它无法正常工作。 nabble.com/svn-commit-r1240059-cxf-trunk-rt-transports-http-src-main-resources-schemas-configuration-http-conf-d-td5453353.html](http://cxf.547215.n5.nabble.com/svn-commit-r1240059-cxf-trunk-rt-transports-http-src-main-resources-schemas-configuration-http-conf-d-td5453353.html)有人知道如何配置代理设置吗？

```
<http-conf:conduit name="*.http-conduit">
    <http-conf:authorization>
        <sec:UserName>username</sec:UserName>
        <sec:Password>password</sec:Password>
    </http-conf:authorization>

    <http-conf:client Connection="Keep-Alive"
                            AllowChunking="false"
                            ProxyServer=proxyIp
                            ProxyServerPort=proxyPort
                            ProxyServerType="HTTP"/>
</http-conf:conduit> 
```

我也尝试过，`http-conf:proxyAuthorization` 但出现相同的 407 代理身份验证错误。

有谁知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-01T09:01:42.013

[身份验证供应商必须按照http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html)中的说明进行配置

```
<http-conf:conduit name="*.http-conduit">
<http-conf:client ProxyServer="proxyIP" ProxyServerPort="proxyPort" NonProxyHosts="nonProxyHost" />
<http-conf:authSupplier class="org.apache.cxf.transport.http.auth.DefaultBasicAuthSupplier"/>
<http-conf:proxyAuthorization>
    <sec:UserName>username</sec:UserName>
    <sec:Password>password</sec:Password>
</http-conf:proxyAuthorization> 
```

还可以使用以下 JVM 标志为 HTTPS 隧道启用基本身份验证。详情请访问[http://www.oracle.com/technetwork/java/javase/8u111-relnotes-3124969.html](http://www.oracle.com/technetwork/java/javase/8u111-relnotes-3124969.html)

```
-Djdk.http.auth.proxying.disabledSchemes="" -Djdk.http.auth.tunneling.disabledSchemes="" 
```

# php - 通过 FB 应用程序签到

> ID：13232384
> 
> 赞同：0
> 
> 时间：2012-11-05T12:43:36.460
> 
> 标签：php, facebook

我将构建一个 FB 应用程序。我是 FB 应用程序开发的新手。它的主要功能需要通过我的应用程序签入。那可能吗？应用程序还将跟踪签入并准备城市统计数据。哪个 API 更适合我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:05:39.890

是的，可以通过您的应用签入：

[https://developers.facebook.com/docs/reference/api/checkin/](https://developers.facebook.com/docs/reference/api/checkin/)

请注意，这种可能性已被弃用，新的​​方法是使用发布消息并包含签入。但这一切都在链接中。不过，您应该首先熟悉 Facebook 编程，尤其是 JavaScript SDK 和 PHP SDK。还要确保你阅读了 facebook 的规则，否则你的应用程序会被屏蔽，你的用户也可能会被屏蔽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:46:42.763

检查 fb 文档。

[http://developers.facebook.com/docs/guides/canvas/](http://developers.facebook.com/docs/guides/canvas/)将是一个好的开始。

# php - 如何获取我上传的文件名？

> ID：13232385
> 
> 赞同：2
> 
> 时间：2012-11-05T12:43:39.610
> 
> 标签：php, variables, upload

这是我制作的图片上传脚本的一部分。我决定将我上传的图像重命名为我上传的时间。

```
date_default_timezone_set('UTC');
$mvTime = date("dmy").(date("H")+5).date("is");
$folder = "images/";
$tmp = imagecreatetruecolor($orig_w, $orig_h);

imagejpeg($tmp, $folder.$mvTime.'.jpg', 100); 
```

现在当我上传图片时，它会像 051112174700.jpg 一样保存图片。它是 dmyHis 格式的日期。现在我很困惑如何显示图像的预览。因为时间一直在变化。这就是为什么我不能在标签 src 中使用 $folder.$mvTime.'jpg'。

任何人都可以帮助我如何获得图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:47:56.583

您可以使用会话临时保存图像名称

```
date_default_timezone_set('UTC');
$mvTime = date("dmy").(date("H")+5).date("is");
$folder = "images/";
$tmp = imagecreatetruecolor($orig_w, $orig_h);

imagejpeg($tmp, $folder.$mvTime.'.jpg', 100);

$_SESSION['img_temp_name']=$mvTime.'.jpg'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:53:07.927

您在 中定义了图像位置`mvTime`，所以像这样使用它？

```
date_default_timezone_set('UTC');
$mvTime = date("dmy").(date("H")+5).date("is");
$folder = "images/";
$tmp = imagecreatetruecolor($orig_w, $orig_h);

imagejpeg($tmp, $folder.$mvTime.'.jpg', 100);

echo '<img src="'.$folder.$mvTime.'.jpg" />'; // <---- added this 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T12:50:22.863

您已经知道图像的路径 - `$folder.$mvTime.'jpg'`。

您的问题尚不清楚，但如果您想在上传后立即显示预览，那么在 PHP 中您可以执行以下操作：

```
echo '<img src="'.$folder.$mvTime.'jpg" />"; 
```

或者，您将需要提出一个命名约定，以便以后找到您想要的图像，或将图像信息存储在某个地方（例如数据库中）。

# javascript - 在具有不同脚本/程序的同一台机器上的纪元时间相同

> ID：13232389
> 
> 赞同：5
> 
> 时间：2012-11-05T12:43:53.073
> 
> 标签：javascript, shell, epoch

我想使用shell来获取纪元时间，然后在html页面上使用javascript来获取另一个纪元时间，然后获取它们之间的差异，但我担心不同脚本之间的纪元时间可能不同步，所以这种差异是无用的

所以我想知道，如果我同时使用 shell 和 javascript 来获取 epoch tiem，结果是否相同？如果不是，差异有多大？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:04:32.293

如果您的意思是自 Unix 纪元 (1970-01-01T00:00:00Z) 以来的秒数，则它受此定义的约束。您应该能够看到的唯一差异是由以下原因引起的：

*   返回它的系统调用的不同调用时间*）；
*   不同系统上的不同步时钟。

并且可能还有：

*   不同处理器内核/物理处理器上的不同步时钟；
*   返回当前时间的函数的实现相关处理（例如，JS 引擎实现可能会在短时间内缓存该值，因为不必执行实际的系统调用，尽管我对此表示怀疑）。

根据您需要的时间分辨率，其中一些不是问题。我的猜测是，如果您不需要比 1s 更精细的粒度，那么您应该会更好（在同一台机器上）。

*) 还要注意，在单核系统上，你不能真正从不同的系统调用中获得相同的时间（至少在 ns 分辨率下），除非内核缓存它，因为它们必须一个接一个地发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:14:06.633

根据[ECMA-262 第 15.9.1.1 节](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)：

> 自 1970 年 1 月 1 日 UTC 以来，时间在 ECMAScript 中以毫秒为单位进行测量。在时间值中，闰秒被忽略。假设每天正好有 86,400,000 毫秒。

所以，是的，每个遵循标准的 JavaScript 实现都必须返回完全相同的值，并自行处理任何物理时钟的怪癖。除非系统时钟设置错误，否则您将在任何地方拥有相同的值。

请注意，其他语言和系统中“纪元”和“秒后”的定义可能不同（至少大多数其他系统使用秒，而不是毫秒，并且最经常考虑闰秒），所以你不能保证 JS时间，即使除以 1000 也会匹配来自另一个平台或操作系统的时间戳。

# php - IE 打开两个弹出窗口而不是一个

> ID：13232390
> 
> 赞同：1
> 
> 时间：2012-11-05T12:43:58.747
> 
> 标签：php, javascript, internet-explorer-9

我有一个复杂的 PHP 脚本，它读取一些信息，然后调用一个 bash 脚本来处理它。PHP 脚本在弹出窗口中显示输出，然后将浏览器导航回调用它的页面。

所以它在 Firefox 和 Chrome 中有效，但在 IE 9 中发生了一些奇怪的事情。当我单击调用 PHP 脚本的按钮时，浏览器变为空白，显示两个相同的空弹出窗口，一个接一个，当信息填充到一个时其中浏览器导航回来并关闭另一个弹出窗口。这是代码：

```
echo '<script type="text/javascript">';
echo 'win1 = window.open("", "", "status = 0, height=800, width=1000, resizable=1, scrollbars=1");';
echo 'window.history.go(-1);';
echo "win1.document.write($content);";
echo "win1.document.close();";
echo '</script>'; 
```

为什么它显示两个弹出窗口，我该如何防止呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:52:24.767

为什么 window.history.go 不在最后？

还要删除参数中的所有空格，并给出一个不带空格的名称（第二个参数）。

最后，如果您使用提交按钮将其更改为按钮或链接，则在 onclick 中返回 false

尝试

```
?>

<script type="text/javascript">
var win1 = window.open("", "mywin", "height=800,width=1000,resizable,scrollbars");
if (win1) {
  win1.document.write($content);
  win1.document.close();
  window.history.go(-1);
}
</script> 
```

[尝试重现的演示](http://plungjan.name/test/reply1.html)

# git - 我提交并推送了一个无用的大位图 - 我应该修复回购吗？

> ID：13232391
> 
> 赞同：2
> 
> 时间：2012-11-05T12:44:27.380
> 
> 标签：git

我不小心提交并推送了一个大位图（35MB），我忘记从我的项目目录中删除它，结果证明它完全没用。这是我应该担心的事情吗？

从那时起，我没有推动或承诺任何事情。也没有人拉它。我有哪些选项可以修复此提交？有必要/推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:56:31.800

如果您知道没有人从存储库中提取，这表明您与可能从存储库中提取的每个人都保持良好的沟通。在这种情况下，我倾向于重写历史记录以删除该文件 - 无缘无故地将每个人的存储库膨胀 35MB 很烦人。你可以通过告诉你的同事不要碰存储库，尽快重置到最后一个提交，然后强制推送你的重置分支来做到这一点。您已经说过您最近的提交是包含位图的提交，因此（假设您在`master`分支中，并推`master`入`origin`）您可以执行以下操作：

```
# Move your current branch back so that it points to the previous commit,
# but leave your working tree as it was (but with everything unstaged):
git reset HEAD^

# Force push your master branch to the remote repository:
git push -f origin master 
```

然后你可以像以前一样继续，这一次小心不要把大的位图展示出来:)

# java - 从“陈旧的连接池”获取连接时应用程序挂起

> ID：13232400
> 
> 赞同：1
> 
> 时间：2012-11-05T12:45:06.110
> 
> 标签：java, swing, networking, connection, pool

我编写了一个 java 应用程序，它首先在启动时创建一个连接池，在每次刷新期间，从池中获取一个连接，使用它，然后关闭它。当我与网络断开连接并且用户按下刷新时，就会出现问题按钮。该应用程序似乎进入了挂起状态（从我的调试消息中，它表明它正在等待从池中获取连接，但它永远不会获得）。无论如何，我可以超时这个请求吗？我是java编程新手。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:07:22.983

你可以看看你的`ConnectionPoolDataSource`实现；它可能有办法重置池。我不知道知道网络是否断开连接的直接方法，但是您在 a 中进行重置，`WindowAdapter`然后添加一个重置按钮。

# class - 如何实现案例类的实例共享

> ID：13232402
> 
> 赞同：5
> 
> 时间：2012-11-05T12:45:10.233
> 
> 标签：class, scala, case-class

假设定义：

```
case class IntegerWrapper(i : Int) 
```

并且处于可能创建大量`IntegerWrapper`实例的情况下，`i=[0..N>`人们必须做什么：

1.  将此范围映射到一组固定的单例`[IntegerWrapper(0) .. IntegerWrapper(N)>`

2.  保留类的现有值语义`IntegerWrapper`（匹配、等于、哈希码、序列化）

我正在寻找类似于什么的实例共享`java.lang.Integer`。我想我的问题是是否可以在不必自己做所有事情的情况下做到这一点。简单地用 an 定义一个伴生对象是`apply(i : Int)`不会编译的。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:18:58.203

如果您只是想避免分配，也许您想要的是一个[值类](http://docs.scala-lang.org/sips/pending/value-classes.html)？在 Scala 2.10 中，如果您的`IntegerWrapper`类 extends `AnyVal`，通常不会分配实例，而是会在值本身上调用静态方法。例如：

```
scala> case class IntegerWrapper(val i: Int) extends AnyVal { def increment = i + 1 }
defined class IntegerWrapper

scala> object Test { IntegerWrapper(2).increment }
defined module Test

scala> :javap -verbose Test
...    
public Test$();
  Code:
   Stack=2, Locals=1, Args_size=1
   0:   aload_0
   1:   invokespecial   #13; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   putstatic   #15; //Field MODULE$:LTest$;
   8:   getstatic   #20; //Field IntegerWrapper$.MODULE$:LIntegerWrapper$;
   11:  iconst_2
   12:  invokevirtual   #24; //Method IntegerWrapper$.extension$increment:(I)I
   15:  pop
   16:  return 
```

请注意，在那里调用的扩展方法是`Int => Int`.

为了比较，如果你不扩展，这就是你得到的`AnyVal`：

```
scala> :javap -verbose Test
...
public Test$();
  Code:
   Stack=3, Locals=1, Args_size=1
   0:   aload_0
   1:   invokespecial   #13; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   putstatic   #15; //Field MODULE$:LTest$;
   8:   new #17; //class IntegerWrapper
   11:  dup
   12:  iconst_2
   13:  invokespecial   #20; //Method IntegerWrapper."<init>":(I)V
   16:  invokevirtual   #24; //Method IntegerWrapper.increment:()I
   19:  pop
   20:  return 
```

在这个版本中，您可以看到对象分配以及对新`IntegerWrapper`实例的方法的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T13:14:51.593

记住结果！使用 Scala，您甚至可以抽象出所有必需的逻辑。

**您需要的基础设施：**

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

// A little memoization utility

object Memoization extends Memoization

trait Memoization {
  trait Memoizable[A] {
    def memoize(fun: A): A
  }

  implicit def fun1memoizable[A, B] = new Memoizable[A => B] {
    def memoize(f: A => B): (A => B) = new MemoizedFunction(f)
  }

  implicit def fun2memoizable[A, B, C] = new Memoizable[(A, B) => C] {
    def memoize(f: (A, B) => C): (A, B) => C = {
      val memo = new MemoizedFunction(f.tupled)
      (a, b) => memo((a, b))
    }
  }

  implicit def fun3memoizable[A, B, C, D] = new Memoizable[(A, B, C) => D] {
    def memoize(f: (A, B, C) => D): (A, B, C) => D = {
      val memo = new MemoizedFunction(f.tupled)
      (a, b, c) => memo((a, b, c))
    }
  }

  def memoize[F](f: F)(implicit m: Memoizable[F]): F = m memoize f

  class MemoizedFunction[-A, +B](f: A => B) extends (A => B) {
    private[this] val cache = collection.mutable.Map.empty[A, B]
    def apply(a: A): B = cache.getOrElseUpdate(a, f(a))
  }
}

import Memoization._

// Abstracting flyweight pattern 
// (http://en.wikipedia.org/wiki/Flyweight_pattern)
trait Flyweight[Args, Obj] { self: (Args => Obj) =>
  val on: Args => Obj = memoize(this : (Args => Obj))
}

// Ctrl+D 
```

**用法：**

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

case class IntegerWrapper private(i: Int) {
  println(this.toString + " created.")
}

object IntegerWrapper extends (Int => IntegerWrapper) 
  with Flyweight[Int, IntegerWrapper]

// Ctrl+D

scala> IntegerWrapper.on(11)
IntegerWrapper(11) created.
res0: IntegerWrapper = IntegerWrapper(11)

scala> IntegerWrapper.on(11)
res1: IntegerWrapper = IntegerWrapper(11) 
```

这是一个通用解决方案，使用`Map`. `Vector`对于您的特定情况，您可能会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T13:01:53.253

这与 scala 类的用例基本相同`Symbol`。因此，您可以将 Symbol.scala 视为合理实现的灵感（特别是一种不会将 IntegerWrapper 实例永远保存在内存中的实现，即使在不需要时也是如此）。

见[https://lampsvn.epfl.ch/trac/scala/browser/scala/tags/R_2_9_1_final/src//library/scala/Symbol.scala#L1](https://lampsvn.epfl.ch/trac/scala/browser/scala/tags/R_2_9_1_final/src//library/scala/Symbol.scala#L1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T12:58:02.333

像这样的东西？

```
sealed trait IntegerWrapper {
  def i: Int
}

object IntegerWrapper extends (Int => IntegerWrapper) {
  private case class IntegerWrapperImpl(i: Int) extends IntegerWrapper

  private val instances: List[IntegerWrapperImpl] = ...
    /* Wrapper instances for i in [0..N) */

  def apply(i: Int): IntegerWrapper = instances(i)

  def unapply(iw: IntegerWrapper): Option[Int] = Some(iw.i)
} 
```

优点是`equals`和`hashCode`仍然由编译器生成，因为`IntegerWrapperImpl`是一个案例类。缺点是您不能直接使用其他编译器添加的案例类好东西，例如`copy`. 如果您想使用它，`IntegerWrapperImpl`请向客户端公开，或者恕我直言，更好地添加`copy`到`IntegerWrapper`界面中。

模式匹配照常工作：

```
val iw0 = IntegerWrapper(0)
val iw1: IntegerWrapper = IntegerWrapper(1)

iw0 match {
  case IntegerWrapper(0) => println("IW(0)")
  case _ => println("something else")
} // IW(0)

iw1 match {
  case IntegerWrapper(1) => println("IW(1)")
  case _ => println("something else")
} // IW(1)

iw1 match {
  case IntegerWrapper(2) => println("IW(2)")
  case _ => println("something else")
} // something else 
```

# php - 在 mysql 脚本 php 中导入 .csv

> ID：13232405
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:45:28.193
> 
> 标签：php, import

我有一个 PHP 脚本来将文件导入到我的 mysql 数据库中。但是当我尝试使用它时，我得到了这个错误：

文件未找到。确保您指定了正确的路径

但我什至没有选择文件这是我的脚本：

```
<?php 
include ('db_connect.php');
//connect to the database

//

if ($_FILES[csv][size] > 0) {

    //get the csv file
    $file = $_FILES[csv][tmp_name];
    $handle = fopen($file,"r");

    //loop through the csv file and insert into database
    do {
        if ($data[0]) {
            mysql_query("INSERT INTO test (nummer, branche) VALUES
                (
                    '".addslashes($data[0])."',
                    '".addslashes($data[1])."',
                )
            ");
        }
    } while ($data = fgetcsv($handle,10000,",","'"));
    //

    //redirect
    header('Location: import.php?success=1'); die;

}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Import a CSV File with PHP & MySQL</title>
</head>

<body>

<?php if (!empty($_GET[success])) { echo "<b>Your file has been imported.</b><br><br>"; } //generic success notice ?>

<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
  Choose your file: <br />
  <input name="csv" type="file" id="csv" />
  <input type="submit" name="Submit" value="Submit" />
</form>

</body>
</html> 
```

any1 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:55:03.620

重新评论 do/while 循环：不，我的意思是这样

```
$handle = fopen($file,"r");
if ($handle !== FALSE) {
    while (!feof($handle)) {
        $data = fgetcsv($handle,10000,",","'");
        if ($data[0]) {
            mysql_query("INSERT INTO test (nummer, branche) VALUES
                (
                    '".addslashes($data[0])."',
                    '".addslashes($data[1])."'
                )
            ");
        }

    }
    fclose($handle);
} 
```

# c# - 如何从sql导出到格式化的excel

> ID：13232408
> 
> 赞同：1
> 
> 时间：2012-11-05T12:45:38.563
> 
> 标签：c#, wpf, export-to-excel

我有一个与 SQL Server 数据库交互的 C# WPF 应用程序。在应用程序中，我希望用户能够将某种数据从 SQL 导出到 Excel。我首先尝试填充数据表，然后将其导出到 excel 文件。一切都很好，直到我遇到了导出一个填充了这个 sql 查询的数据表的任务：![在此处输入图像描述](../Images/3e155231ec18b085f30979c1da43ef99.png)

到这样的格式化excel文件： ![报告](../Images/bcdff644683d7f0f8e063d52113cb313.png)

那么如何在excel文件中对一个区域中每个销售的销售细节进行排序呢？这个问题困扰我很久了，求大神指点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T03:29:37.507

如果有人需要类比解决问题，我通过这段代码实现了目标：

```
 int currentXLLine = 1; // line in xls file to start
        int currentId = -1;    // current sellID  
        int detailCount = 1;
        int beginSumLine = currentXLLine+3;
        for (int i = 0; i < dt.Rows.Count; i++) 
        {
            if ((currentId != (int)dt.Rows[i][0])) 
            {

                if (i != 0)
                {
                    cell = oSheet.Cells[currentXLLine+1, 7];
                    cell.Font.Bold = true;
                    cell.HorizontalAlignment = ExcelApp.Constants.xlRight;
                    cell.Value = "OVERALL:";
                    cell = oSheet.Cells[currentXLLine + 1, 8];
                    cell.Formula = "=SUM(H"+beginSumLine.ToString()+":H" + currentXLLine.ToString() + ")";
                    cell.Font.Bold = true;
                    cell.HorizontalAlignment = ExcelApp.Constants.xlRight;

                    cell = oSheet.Columns[7];
                    Past.AutoFitColumn(oSheet, 7);
                    cell.NumberFormat = "# ##0.00";
                    cell = oSheet.Columns[8];
                    Past.AutoFitColumn(oSheet, 8);
                    cell.NumberFormat = "# ##0.00";
                    cell.HorizontalAlignment = ExcelApp.Constants.xlCenter;

                    currentXLLine += 3;
                    detailCount = 1;

                }

                oRange = oSheet.get_Range("B" + currentXLLine.ToString(), "C" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlRight;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = false;
                oSheet.Cells[currentXLLine, 2] = "SellDate";

                oRange = oSheet.get_Range("D" + currentXLLine.ToString(), "E" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlLeft;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = false;
                oSheet.Cells[currentXLLine, 4] = dt.Rows[i][3].ToString();
                beginSumLine = currentXLLine + 3;

                currentXLLine += 2;

                oRange = oSheet.get_Range("C" + currentXLLine.ToString(), "E" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlCenter;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = true;

                oRange = oSheet.get_Range("B" + currentXLLine.ToString(), "B" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlCenter;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = true;

                oRange = oSheet.get_Range("F" + currentXLLine.ToString(), "F" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlCenter;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = true;

                oRange = oSheet.get_Range("G" + currentXLLine.ToString(), "G" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlCenter;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = true;

                oRange = oSheet.get_Range("H" + currentXLLine.ToString(), "H" + currentXLLine.ToString());
                oRange.Merge(Type.Missing);
                oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
                oRange.HorizontalAlignment = ExcelApp.Constants.xlCenter;
                oRange.VerticalAlignment = ExcelApp.Constants.xlCenter;
                oRange.EntireRow.Font.Bold = true;

                oSheet.Cells[currentXLLine, 2] = "№";
                oSheet.Cells[currentXLLine, 3] = "ProductName";
                oSheet.Cells[currentXLLine, 6] = "Quantity";
                oSheet.Cells[currentXLLine, 7] = "Price";
                oSheet.Cells[currentXLLine, 8] = "Sum";
                currentXLLine += 1;

            }

        oSheet.Cells[currentXLLine, 2] = (detailCount).ToString(); //rowView.Row["Ассортимент"].ToString();
        cell = oSheet.Cells[currentXLLine, 2];
        cell.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);

        oSheet.Cells[currentXLLine, 3] = (string)dt.Rows[i][4];
        cell = oSheet.Cells[currentXLLine, 3];
        cell.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
        oRange = oSheet.get_Range("C" + (currentXLLine).ToString(), "E" + (currentXLLine).ToString());
        oRange.Merge(Type.Missing);
        oRange.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
        oSheet.Cells[currentXLLine, 6] = dt.Rows[i][5].ToString();
        cell = oSheet.Cells[currentXLLine, 6];
        cell.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
        oSheet.Cells[currentXLLine, 7] = dt.Rows[i][6].ToString();
        cell = oSheet.Cells[currentXLLine, 7];
        cell.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
        oSheet.Cells[currentXLLine, 8] = Convert.ToInt16(dt.Rows[i][5])*Convert.ToDouble(dt.Rows[i][6]);
        cell = oSheet.Cells[currentXLLine, 8];
        cell.BorderAround(ExcelApp.XlLineStyle.xlContinuous, ExcelApp.XlBorderWeight.xlThin, Microsoft.Office.Interop.Excel.XlColorIndex.xlColorIndexAutomatic, Missing.Value);
        detailCount += 1;
        currentXLLine += 1;
        currentId = (int)dt.Rows[i][0];

    }

cell = oSheet.Cells[currentXLLine + 1, 7];
  cell.Font.Bold = true;
  cell.HorizontalAlignment = ExcelApp.Constants.xlRight;
  cell.Value = "OVERALL:";
  cell = oSheet.Cells[currentXLLine + 1, 8];
  cell.Formula = "=SUM(H" + beginSumLine.ToString() + ":H" + currentXLLine.ToString() + ")";
  cell.Font.Bold = true;
  cell.HorizontalAlignment = ExcelApp.Constants.xlRight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:18:28.773

您可以使用 excel 互操作。Excel 互操作允许格式化特定范围甚至特定单元格...

此链接可能会有所帮助

[http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms173186%28v=vs.80%29.aspx)

[http://www.codeproject.com/Tips/137183/Tip-Format-an-Excel-Range-as-a-Table-Programatical](http://www.codeproject.com/Tips/137183/Tip-Format-an-Excel-Range-as-a-Table-Programatical)

# c++ - io_service 线程化时 Boost.Asio 中的异常处理

> ID：13232412
> 
> 赞同：4
> 
> 时间：2012-11-05T12:45:53.750
> 
> 标签：c++, boost, exception-handling, network-programming, boost-asio

如果一个应用程序只有一个`io_service`对象并且是线程化的（参见下面的代码），如果其中一个异步处理程序抛出异常会发生什么。它是如何传播的，更重要的是处理它们的最佳方法是什么。

```
std::list< boost::shared_ptr< the_client > > clients_list;
for(int i = 0; i < n_threads; i++)
{
    clients_list.insert(boost::make_shared< the_client >( io_service, server_host, server_port ));
}

for(unsigned int i = 0; i < n_threads; i++)
{
    threads.create_thread(boost::bind(&boost::asio::io_service::run, boost::ref(io_service)));
}

for(std::list< boost::shared_ptr< the_client > >::iterator itr = clients_list.begin(); itr != clients_list.end(); ++itr)
{
    (*itr)->connect_to_server_and_run_statemachine();
} 
```

此处`the_client::connect_to_server_and_run_statemachine()`设置与服务器的连接并启动异步连接处理。

我知道[关于类似主题](https://stackoverflow.com/questions/3066557/exception-handling-in-boost-asio)的问题，但这不考虑多线程 io_service 场景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:47:39.370

没有什么神奇的事情发生。如果您在某处捕获异常，则您的`catch`块会处理它。否则，未捕获的异常会终止该进程。

你应该如何处理它取决于你想要发生什么。如果异常永远不会发生，则让它终止进程。如果您想处理或处理异常，请编写一个包含`io_service::run`在`try`/`catch`块中的函数，并让线程运行它。

我不喜欢把智能放在离代码那么远的地方。我首选的解决方案是永远不要让我的异步函数抛出异常，除非存在真正致命的错误。如果异步函数知道如何处理它可能抛出的异常，那么它应该捕获它。

`run`但是，如果这在您的应用程序中有意义，那么包装是完全可以接受的。

# c - 如何在 switch 语句的 case 字段中使用变量？

> ID：13232417
> 
> 赞同：0
> 
> 时间：2012-11-05T12:46:11.810
> 
> 标签：c, switch-statement

即使 switch 语法不接受 case 标签的变量，是否有任何解决方法来执行类似的操作，而不是普通的旧 if-else 比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:12:19.030

通常为了解决这个问题，我使用结构和函数指针，只有一个 if。

未经测试的示例，只是为了了解我在说什么：

```
#include "cases_functions.h"

typedef struct s_switch
{
  char* value;
  void (*do)(void);
} t_switch;

t_switch cases[] =
{
  {"add", add},
  {"sub", sub},
  {"divide", div},
  {0, 0}
};

void personal_switch(char *what)
{
  int i = 0;

  while (cases[i].value)
  {
    if (strcmp(cases[i].value, what) == 0)
      cases[i].do();
    i++;
  }
} 
```

有了这个，您可以在运行时更改您的不同案例，添加新案例等等......当然，选择方法是免费的，例如您可以只使用`int`and 进行测试`==`，或更复杂的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:11:09.630

您可以使用枚举。

```
enum my_enum {
    element1,
    element2
};

my_enum var;
switch(var)
{
    case element1:
    case element2:
} 
```

例如，它可以用于一周中的每一天

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:38:56.627

根据我的经验，最好的方法是使用查找表。

你可以让它变得简单，这将是一个索引查找表。这仅适用于整数，并且仅适用于相邻的整数 0 -> n。

或者你可以让它通用，这是一个复杂的实现，但让你能够使用任何形式的“案例”：它们不必是相邻的整数，甚至根本不必是整数（可以是浮点数、字符串等）。

我将举一个通用版本的示例（未测试）。此示例使用二进制搜索，因此访问时间将是确定性的，并且如果案例数量很多，则为最佳。

```
// declare a custom search key for the foo object, could be any type
typedef int foo_key_t; 

// declare the actual data object:
typedef void(*foo_func_t)(void);
typedef enum
{
  const foo_key_t   key;
  foo_func_t        foo_func; // things to do when this "case" is found
} foo_t;

// a comparison function for objects of type foo_t
int foo_comp (const void* obj1, const void* obj2)
{
  const foo_t* f1 = obj1;
  const foo_t* f2 = obj2;

  return f1->key - f2->key;
}

---

// declare a "good to have" enum with a list of indices 
// indices are guaranteed to be adjacent numbers 0 -> n
typedef enum  
{
  FOO_FOO,
  FOO_BAR
  FOO_N // number of items in this enum
} foo_index_t;

// define a list of variables corresponding to the above enum
const foo_t foo [FOO_N] =  // a list sorted in adjacent search key order:
{
  { 123, &foo_func },
  { 456, &bar_func }
};

---

const foo_t* result;

result = bsearch(456,           // search for this "case"
                 foo,           // in the table foo
                 FOO_N,         // with this many objects
                 sizeof(foo_t), // with this object size
                 foo_comp);     // use this comparison function

if(result != NULL)
{
  result.foo_func();
}
else
{
  // this equals "default" in a switch-case.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:06:01.003

如果您的“标签”是常量，您可以定义宏...

```
#define FOO 1
#define BAR(x) (2*x)

switch (var)
{
    case FOO:    // foo
    case BAR(3): // bar
} 
```

也许你可以定义一些奇怪的宏来得到你想要的，但是写一个简单的 if-else-if 链更容易，如果你真的不需要，我认为编写和使用复杂的宏不是一个好主意他们。

# c# - SPListItem.Tasks 始终为空

> ID：13232420
> 
> 赞同：1
> 
> 时间：2012-11-05T12:46:41.867
> 
> 标签：c#, sharepoint, sharepoint-workflow, sharepoint-api, splistitem

我有一个自定义 sharepoint (2007) 列表（名为 testlist），我在其上附加了一个测试工作流程（使用 sharepoint Designer 2007 构建并命名为 testwf），在“步骤 1”的“操作”部分中定义的唯一任务是等到2014 年 4 月。当我向测试列表添加新项目时，testwf 将启动，当我切换到网格视图时，该项目的字段“testwf”正在运行。

现在我需要访问与项目关联的工作流，然后通过代码通过更改其状态来“完成”此任务，但是使用以下代码，我总是将 item.Tasks 列表设为空（但我可以看到内部变量 m_allTask​​ListTasks有 1 个元素）。

```
 using (SPSite site = new SPSite("http://mysp"))
        {
            site.AllowUnsafeUpdates = true;
            SPWeb web = site.OpenWeb();
            web.AllowUnsafeUpdates = true;

            foreach (SPList list in web.Lists)
            {
                if (list.Title != "testlist") continue;
                foreach (SPListItem item in list.Items)
                {
                    item.Web.AllowUnsafeUpdates = true;
                    if(item.Tasks.Count > 0) 
                       //do work
                }
            }
        } 
```

也许我错过了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:54:59.233

[交叉发布的](https://sharepoint.stackexchange.com/questions/50814/splistitem-tasks-always-empty)问题。

@petauro，你在这方面取得了进展吗？我可以根据我过去成功使用的以下代码来证实@moontear 的回答：

```
...
// get workflow tasks for SPListItem object item
if (item != null && item.Workflows != null && item.Workflows.Count > 0)
{
    try
    {
        var workflows = site.WorkflowManager.GetItemActiveWorkflows(item);
        foreach (SPWorkflow workflow in workflows)
        {
            // match on some indentifiable attribute of your custom workflow
            // the history list title is used below as an example

            if (workflow.ParentAssociation.HistoryListTitle.Equals(Constants.WORKFLOW_HISTORY_LIST_TITLE))
            {
                var workflowTasks = workflow.Tasks;
                if (workflowTasks != null && workflowTasks.Count > 0)
                {
                    // do work on the tasks
                }
            }
        }
    }
    catch
    {
        // handle error
    }
}
... 
```

虽然与您在最新评论中发布的代码略有不同，但看看它是否有帮助。

`"testlist"`另一个小问题：您的 SPWeb中是否有多个标题列表实例？如果不是，为什么要迭代`web.Lists`？直接获取一个列表，避免一些多余的CPU周期：[SPWeb.GetList()](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.getlist.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:50:28.347

我使用此代码访问我的工作流任务：

```
Guid taskWorkflowInstanceID = new Guid(item["WorkflowInstanceID"].ToString());
SPWorkflow workflow = item.Workflows[taskWorkflowInstanceID];
// now you can access the workflows tasks
SPTask task = workflow.Tasks[item.UniqueId]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:38:22.030

你必须对此采取不同的态度。您需要获取工作流任务列表并从那里检索您的任务并完成它。

首先，您需要检查您的项目上是否正在运行工作流：`if (item.Workflows > 0)`从那里您可以遍历列表项上的所有工作流实例，获取 SPWorkflowAssociation 以及关联的任务和历史列表。从那里你只需要在相关的任务列表中找到你正在寻找的任务。

# phpmyadmin - phpMyAdmin 没有显示每条记录

> ID：13232423
> 
> 赞同：3
> 
> 时间：2012-11-05T12:46:42.927
> 
> 标签：phpmyadmin

嘿，我有一张大约有 25700 条记录的表。但 phpMyAdmin 只显示大约 24300 条记录。因此，如果我只是浏览表格，他不会向我显示最后几条记录。疯狂的是，如果我做一个特定的选择，比如：

```
SELECT * FROM table WHERE ID="25700" 
```

他正在显示单条记录，但是当我尝试列出所有记录时

```
SELECT * FROM table 
```

他只显示了大约 24300 条记录。

另一个疯狂的事实是：如果我想使用 phpmyadmin 进行导出，则不会导出仅在第一个查询中可用的那些记录。

这里有人有这方面的经验吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T13:03:14.887

添加行：`$cfg['MaxExactCount'] = 2000000;` 在您的 phpMyAdmin 目录中的 config.inc.php 中。似乎这个问题只发生在 InnoDB 表中。因此，要获得确切的行数，只需`$cfg['MaxExactCount']`足够大即可。

# java - 如何将配置设置注入自动装配的 Spring bean？

> ID：13232426
> 
> 赞同：3
> 
> 时间：2012-11-05T12:46:53.573
> 
> 标签：java, spring, configuration, autowired

我的项目中有一个用于 web 服务客户端的 bean，它需要注入一些配置设置。我们使用的是 Spring 3.1。目前最好的想法是使用 @Value 注释，如下所示：

```
@Service
public class MyWebServiceClient {
  private String endpointUrl;

  @Required
  @Value("${mywebserviceClient.endpointUrl}")
  public void setEndpointUrl(String endpointUrl) {
    this.endpointUrl = endpointUrl;
  }

} 
```

但是，我真的不喜欢将属性名称硬编码到类中。它还存在一个问题，即无法在同一上下文中拥有多个具有不同设置的客户端（因为只有一个属性并且这是硬编码的）。有没有更优雅的方式通过自动装配来做到这一点，或者我应该求助于普通的旧 xml 配置来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:21:33.237

我会使用 JavaConfig 来做到这一点。

更具体地说，我将使用 JavaConfig 创建多个实例`MyWebServiceClient`，并`@Value`使用正确的端点属性键来配置配置。

像这样的东西：

```
@Configuration
public class MyWebServiceConfig {
    @Required
    @Value("${myWebserviceClient1.endpointUrl")
    private String webservice1Url;

    @Required
    @Value("${myWebserviceClient2.endpointUrl")
    private String webservice2Url;

    @Required
    @Value("${myWebserviceClient3.endpointUrl")
    private String webservice3Url;

    @Bean
    public MyWebServiceClient webserviceClient1() {
        MyWebServiceClient client = createWebServiceClient();
        client.setEndpointUrl(webservice1Url);
        return client;
    }

    @Bean
    public MyWebServiceClient webserviceClient2() {
        MyWebServiceClient client = createWebServiceClient();
        client.setEndpointUrl(webservice2Url);
        return client;
    }

    @Bean
    public MyWebServiceClient webserviceClient3() {
        MyWebServiceClient client = createWebServiceClient();
        client.setEndpointUrl(webservice3Url);
        return client;
    }
} 
```

有了这个，你应该有 3 个实例，`MyWebServiceClient`你`ApplicationContext`可以通过用 注释的方法的名称获得`@Bean`。

为方便起见，这里有更多[JavaConfig 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-java)。

# apache - Web 服务器上的受保护目录问题

> ID：13232432
> 
> 赞同：0
> 
> 时间：2012-11-05T12:47:19.983
> 
> 标签：apache, .htaccess, web, cpanel

当我在 cpanel 中为我的网站设置受密码保护的目录时，如果我使用*www.example.com/protected*它会正确提示输入用户名和密码，但如果我使用*example.com/protected*它可以让我访问受保护的区域。

主站点 .htaccess 是：

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} .*\.(jpeg|jpg|gif|png)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /public/404.php [L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

谁能指出我正确的方向来解决这个问题？

非常感谢

吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:16:03.173

您需要通过在规则之前添加以下规则来告诉 apache，以将不带 www 的 url 重定向到带 www 的 URL

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:23:37.397

www和非www之间没有区别。您的问题可能是浏览器缓存，或者您登录到非 www 版本并忘记了。

# backbone.js - 主干.js 将两个函数绑定在一起按顺序触发

> ID：13232433
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:47:20.203
> 
> 标签：backbone.js

我试图在我的backbone.js 视图中绑定两个函数，但不知道为什么它不起作用..

任何人都可以建议？

```
define([
    'jquery',
    'underscore',
    'backbone',
    'libs/jquery_ui_dependency',
    'vehicle/js/collections/MakeSet',
    'vehicle/js/collections/ModelSet',
    'vehicle/js/collections/TrimSet',
    'vehicle/js/collections/YearSet',
    'vehicle/js/views/Paginator'
], function($, _, Backbone, JQueryUi, MakeSet, ModelSet, TrimSet, YearSet, Paginator){
    'use strict';
    var BrowseVehicleView = Backbone.View.extend({
        el: $('#vehicle-browse-form'),
        initialize: function(){

            JQueryUi.init();

            _.bindAll(this, 'render', 'onMakeChange');

            //define array of elements to be used in DOM manipulations
            this.elements = {
                "make"       : $('#id_make',       this.el),
                "model"      : $('#id_model',      this.el),
                "trim"       : $('#id_trim',       this.el),
                "year_from"  : $('#id_year_from',  this.el),
                "year_to"    : $('#id_year_to',    this.el),
                "price_from" : $('#id_price_from', this.el),
                "price_to"   : $('#id_price_to',   this.el)
            }

        },
        events: {
            "change #id_make"           : "onMakeChange",
            "change #id_model"          : "onModelChange",
            "change #id_trim"           : "onTrimChange"
        },
        render: function(){

            Paginator.filter({
                model__make:   this.elements.make.val(),
                model__model:  this.elements.model.val(),
                model__trim:   this.elements.trim.val()
            });    

        },
        onMakeChange: function(event) {

            this.resetElement([
                this.elements.model,
                this.elements.trim,
                this.elements.year_from,
                this.elements.year_to
            ]);

            // load models
            this.RenderCollection(ModelSet, {make: this.elements.make.val()}, [this.elements.model]);

        }, 
```

在这里想要实现的是，每次调用 onMakeChange 时，它​​都应该调用渲染函数来渲染 Paginator.filter()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:07:35.657

_.bindAll 确保在调用方法时，将“this”的值设置为您指定的值。因此，_.bindAll(this, 'render', 'onMakeChange') 指定当调用 render 或 onMakeChange 时，BrowseVehicleView 设置为 'this' 的值。

就像 mu 所说，您可能希望在 onMakeChange() 中手动调用 this.render()，或者将 this.render 作为事件处理程序绑定到模型引发的事件之一。

# microsoft-sync-framework - 我想在同步框架 2.1 中实现 ISupportLastWriteTime

> ID：13232435
> 
> 赞同：1
> 
> 时间：2012-11-05T12:47:27.490
> 
> 标签：microsoft-sync-framework

在同步框架 2.1 中实现 ISupportLastWriteTime 但互联网上甚至没有一段代码。

```
http://msdn.microsoft.com/en-us/library/windows/desktop/dd744781(v=vs.85).aspx 
```

我想在同步框架 2.1 中实现 Last writer wins

而且我无法在现有表中添加新列。

我创建了**RelationalSyncProvider**

```
 private void LocalProvider_ApplyChangeFailed(object sender, DbApplyChangeFailedEventArgs e)
    {
    //    ISupportLastWriteTime t = sender;

    //    t.GetChangeUnitChangeTime(

        if (dbInfo.SynchronizeDirection == eSyncDirection.Download)
        {
        } 
```

在这里我如何实现 ISupportLastWriteTime

请帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:05:15.263

不幸的是，RelationalSyncProvider 缺乏执行 Last Writer Wins 类型解析的功能。

最简单的方法是在你的表上添加一个 Last Update DateTime，当它引发冲突时，比较它们并指定哪一行获胜。

# jquery - 如何通过数据或任何其他唯一值获取拉斐尔元素？

> ID：13232438
> 
> 赞同：0
> 
> 时间：2012-11-05T12:47:31.217
> 
> 标签：jquery, raphael

我做了2个圆圈，（在我的工作中，我没有使用循环制作小圆圈。）所以我无法将自定义ID添加到所有圆圈，但我将数据设置为每个圆圈。

现在我如何单击所需的圆圈 onclick 以通过数据隐藏或动画其他圆圈..？

我不知道方法是否正确。如果这不是一种方法，请告诉我您的建议，或者给我一些建议。

提前致谢。

```
var paper = new Raphael('myPaper',500,500);
var circle = paper.circle(100,100,100).attr({'fill':'red'});
var text = paper.text(100,100,"test Text").attr({'fill':'#fff'});

var smallCircle = paper.circle(300,100,50).attr({'fill':'green'}).data('id','green');

var newSet = paper.set();

newSet.push(circle,text);

newSet.attr({cursor:'pointer'}).data('id','oval');

newSet.click(function () {
    //smallCircle.attr({opacity:0.5}); //it works but i have no.of circle added by loop.
    smallCircle.data('green').attr({opacity:0.5}); //this is not working. i am setting unique data on each circle

} ) 
```

[Jsfiddle在这里](http://jsfiddle.net/Amb9b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:00:28.870

试试这个...使用选择器如下..

```
smallCircle.data('id','green').attr({opacity:0.5}); //modified ... 
```

[http://jsfiddle.net/Amb9b/2/](http://jsfiddle.net/Amb9b/2/)

# ruby-on-rails - 验证在字段未更改时调用的唯一性？

> ID：13232439
> 
> 赞同：1
> 
> 时间：2012-11-05T12:47:33.457
> 
> 标签：ruby-on-rails, ruby, validation

`validates :uniqueness`即使字段没有更改，每次保存对象时都会调用吗？这不是性能问题吗？

```
validates :name, :schedule_id, :uniqueness => true 
```

似乎确实如此。那么在运行验证之前是否几乎总是需要确保发生了更改？因为检查唯一性的每个字段都需要数据库命中。

这会更好：

```
validates :name, :schedule_id, :uniqueness => true, :if => "name_changed? || schedule_id_changed?" 
```

这要好得多，如果更详细一点：

```
validates :name, :uniqueness => true, :if => :name_changed?
validates :schedule_id, :uniqueness => true, :if => schedule_id_changed? 
```

要点在这里：[https ://gist.github.com/4017019](https://gist.github.com/4017019)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:50:45.687

尝试这个

```
 validates :name, :uniqueness => true, :if => lambda {self.name_changed? } 
```

# php - __call 捕获静态方法调用

> ID：13232445
> 
> 赞同：4
> 
> 时间：2012-11-05T12:47:50.323
> 
> 标签：php, activerecord, orm, getter-setter

我正在使用魔术方法[_ *call*](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)*和*[_callStatic](http://www.php.net/manual/en/language.oop5.overloading.php#object.callstatic)用于我自己的 ORM/Activerow 之类的实现。它们主要用于捕获某些函数调用： `__call`负责 getter 和 setter，以及`__callStatic`方法`findBy`（例如`findById`）。

为了映射外键，我试图将调用转换为例如`getArticle`返回`Article::findById()`. 为此，我在我的内部使用了这个案例`__call`：

```
if (strstr($property, "_id")) {  
 return $foreignClass::findById($this->getId()); 
} 
```

在哪里`$property`是*set*或*get* in之后的子字符串`__call`，以及`$foreignClass`字符串的其余部分。因此，在 call 的情况下`getArticle`，$property 将是 get 并且`$foreignClass`将是`Article`。

我放置了一些回声以确保这些值是正确的。但是，我的`__call`方法被调用而不是我的`__callStatic`. 如果我创建了一个隐式静态方法`findById`，它会被调用（因此它确实将其识别为静态调用）。如果我特别打电话`Article::findById()`，`__call`也会抓住它。

这是相对较新的错误`__callStatic`，还是我做错了什么？

编辑：问题似乎出在这部分：

> 在对象上下文中调用不可访问的方法时会触发 _call()。
> 在静态上下文中调用不可访问的方法时会触发 __callStatic()。

虽然我在一个类上调用它，但我是从一个对象上下文中调用它。在这种情况下，有没有办法进入静态上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:40:13.327

Since the code you give runs in the context of an `Activity` object and since the value of `$foreignClas` is `Article`, which is an ancestor of `Activity`, PHP assumes that you are intending [to call an ancestor's implementation](http://www.php.net/manual/en/keyword.paamayim-nekudotayim.php) of the method.

To break out of the object context there is AFAIK no option other than this absolutely hideous technique:

```
$id = $this->getById();
return call_user_func(
    function() use($foreignClass, $id) { 
        return call_user_func("$foreignClass::findById", $id);
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:17:15.520

魔术`__callStatic`方法仅在 PHP 5.3 中引入。在此之前，我相信静态调用`__call`就像普通的方法调用一样被路由。我的猜测是您使用的是 < 5.3 的 PHP 版本。`php -v`命令行的输出是什么？

# c# - 对文本文件进行排序，其中每行是一个名称，后跟一个分数

> ID：13232448
> 
> 赞同：2
> 
> 时间：2012-11-05T12:47:55.757
> 
> 标签：c#, xna

我打算为 XNA 游戏制作记分牌，但我在弄清楚如何做时遇到了一些麻烦。玩家在完成一个关卡后，会在提示时输入他的名字。他的姓名和时间将记录在一个文本文件中，如下所示：

```
sam 90
james 64
matthew 100 
```

我试图找出一种方法来仅按所用时间而不考虑名称来对这些数据进行排序。

我还没有开始编码，但如果有人能给我任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T12:55:12.930

首先，使用读取文本文件`File.ReadAllLines(...)`，得到一个字符串数组。然后遍历数组并在空白处分割每个字符串（假设用户不能在他们的名字中输入空格）并在第二个元素上排序，这应该是分数。您必须将其转换为字符串`int.Parse(...)`才能正确排序。

```
string[] scores = File.ReadAllLines("scorefile.txt");
var orderedScores = scores.OrderByDescending(x => int.Parse(x.Split(' ')[1]));

foreach (var score in orderedScores)
{
    Console.WriteLine(score);
}
//outputs:
//matthew 100
//sam 90
//james 64 
```

我建议使用分号之类的东西来分隔名称和分数而不是空格，因为这样在允许用户在其名称中输入空格的情况下更容易处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:52:23.240

为什么不把它做成一个数据库文件，.sdf，如果需要，您可以轻松地即时创建它。最适合跟踪允许排序和未来重用的数据。

SQLite 正是为此目的而设计的，使基本的 CRUD 操作变得轻而易举。如果您的游戏增长并且您想开始使用它作为下载/上传高分并与朋友/世界分享分数的方式，您还可以加密数据库文件。

不要误会我的意思，这肯定比简单地解析文本文件要多一点工作，但它是面向未来的，您可以立即获得很多功能，而无需编写解析器和复杂的搜索例程等。

XML 是一个明确的其他选择，或者 JSON。这3个都是不错的选择。纯文本文件可能不是要走的路，因为最终可能会导致您做更多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:42:32.073

创建分数表为

```
name::score 
```

并阅读每一行

```
string line = "Sam::255";
string name = line.split("::")[0]; 
```

也做类似的分数。

# c# - 使用 C# 调用 .dll 方法

> ID：13232449
> 
> 赞同：2
> 
> 时间：2012-11-05T12:48:09.510
> 
> 标签：c#, dll

我对 .dll 的东西还很陌生，但是，我被分配了一个任务，我必须使用 C# 从 .dll 文件中调用一个方法。我对这些东西完全陌生。所以有人可以指出我在这方面的正确方向。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T12:51:31.777

如果您使用的是 .NET dll，请通过[Assembly.Load](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.load.aspx)（或[Assembly.LoadFrom](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom.aspx)）加载 DLL，然后调用[Assembly.GetTypes](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)，然后为每种类型调用[Type.GetMethods](http://msdn.microsoft.com/en-us/library/td205ybf.aspx)。当你有一个[MethodInfo](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)时，你可以调用[MethodInfo.Invoke](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.invoke.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:55:20.397

假设它是像 kernel32.dll 这样的本机非网络 dll：

```
using System.Runtime.InteropServices;
...
[DllImport("kernel32.dll")]
static extern bool AttachConsole(int dwProcessId); 
```

然后只需像普通函数一样调用例如 AttachConsole。

# java - 在 JGraphT 中合并图

> ID：13232450
> 
> 赞同：4
> 
> 时间：2012-11-05T12:48:11.663
> 
> 标签：java, jgrapht

我正在使用 JGraphT，我有两个`DirectedGraph`:`g1`和`g2`.

我怎样才能合并`g1`到`g2`第三张图`g3`？我需要`g3`成为一个普通图并且能够添加新的边和顶点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T14:20:43.827

终于我找到了！

类中有一个方法`Graphs`可以将第二个入口图添加到第一个入口图：

```
Graphs.addGraph(g1, g2); 
```

> 将指定源图的所有顶点和所有边添加到指定目标图。首先将源图的所有顶点添加到目标图。然后将源图的每条边都添加到目标图中。如果此操作导致目标图已被修改，则此方法返回 true，否则返回 false。

我们可以[在这里](http://jgrapht.org/javadoc/org/jgrapht/Graphs.html#addGraph%28org.jgrapht.Graph,%20org.jgrapht.Graph%29)阅读更多内容。

# java - 将 JSONObject 转换为字符串数组值时遇到问题

> ID：13232452
> 
> 赞同：0
> 
> 时间：2012-11-05T12:48:20.547
> 
> 标签：java, android, json, android-viewpager, arrays

嗨，我无法获取 JSONObject 值标题并将其存储到数组中。

```
public class ViewPagerAdapter extends PagerAdapter 
{   
// JSON Node names
     private static final String TAG_CATEGORIESLIST = "categorylist";
     private static final String TAG_TITLE = "title";
     private static final String TAG_URL = "url";
     public static String[] titles;
     public final Context context;
     public int[] scrollPosition;
     JSONArray categories = null; 
     JSONObject json;
     {
         try {
                JSONFunction JSONFunction = new JSONFunction();
               json = JSONFunction.categorylist();
               // Getting Array of Categories
               categories = json.getJSONArray(TAG_CATEGORIESLIST);
                // looping through All Categories
               for(int i = 0; i < categories.length(); i++){
                JSONObject c = categories.getJSONObject(i);
                // Storing each json item in variable
                String title = c.getString(TAG_TITLE);
                String url = c.getString(TAG_URL); 
                titles = new String[] {title}; //only obtain one result
                scrollPosition = new int[titles.length];
            }

            } catch (JSONException e) {
                e.printStackTrace();
            }   
     }
... 
```

我`titles`只得到一个价值，需要你们的帮助。
添加在：

我正在使用 Viewpagerindicator 库，显示标题的默认代码就像 tat

> 私有静态字符串 [] 标题 = 新字符串 [] { "第 1 页"、"第 2 页"、"第 3 页"、"第 4 页"、"第 5 页"};

我正在尝试将 json 数据输入到那里。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:56:12.223

你没有增加标题数组

改变这个

```
 titles = new String[] {title};//Because of this your last retrived  value will be stored in titles 
```

至

```
 titles[i] = title; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:57:20.243

```
public class ViewPagerAdapter extends PagerAdapter 
{   
// JSON Node names
     private static final String TAG_CATEGORIESLIST = "categorylist";
     private static final String TAG_TITLE = "title";
     private static final String TAG_URL = "url";
     public static String[] titles;
     public final Context context;
     public int[] scrollPosition;
     JSONArray categories = null; 
     JSONObject json;
     {
         try {
                JSONFunction JSONFunction = new JSONFunction();
               json = JSONFunction.categorylist();
               // Getting Array of Categories
               categories = json.getJSONArray(TAG_CATEGORIESLIST);
                // looping through All Categories
               for(int i = 0; i < categories.length(); i++){
                JSONObject c = categories.getJSONObject(i);
                // Storing each json item in variable
                String title = c.getString(TAG_TITLE);
                String url = c.getString(TAG_URL); 

change this line in your code 
```

//////////////////////////////////////

```
 titles[i]=title; 
```

///////////////////////////////////////scrollPosition = new int [标题.长度]; }

```
 } catch (JSONException e) {
                e.printStackTrace();
            }   
     } 
```

# mod-rewrite - Mod-Rewrite 动态 URL

> ID：13232453
> 
> 赞同：0
> 
> 时间：2012-11-05T12:48:28.980
> 
> 标签：mod-rewrite

我已经搜索和搜索并尝试和尝试了 2 天，现在关于如何在我正在制作的 CMS 上制作一些友好的 URL 来教我自己的 php。

我正在尝试改变：

www.mydomain.com/cms/index.php?id=30

至：

www.mydomain.com/cms/30

首先，我已经创建了另一个函数来将其从 id 更改为 seourl，但我什至无法让基本数字版本正常工作。

我已经尝试了数百种如何编写我的 .htaccess 文件的组合，这是我目前的一个似乎什么都不做的组合：

```
 Options +FollowSymLinks
    RewriteEngine on
    RewriteRule cms/index/id/(.*) cms/index.php?id=$1
    RewriteRule cms/index/id/(.*)/ cms/index.php?id=$1 
```

我的网址是如何动态创建的：

```
 $sqlCommand = "SELECT id, linklabel, seourl FROM pages WHERE showing='1' ORDER BY pageorder ASC";
        $query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());
    $menuDisplay = '';
        while ($row = mysqli_fetch_array($query)) {
            $pid = $row["id"];
            $linklabel = $row["linklabel"];
            $seourl = $row["seourl"];
    $menuDisplay .= '<a href="index.php?id=' . $pid . '">' . $linklabel . '<a><br .>';
}
mysqli_free_result($query); 
```

有没有人对我可能做错的事情有任何想法或解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:50:22.943

怎么样：

```
RewriteRule cms/([/d]+) cms/index.php?id=$1 
```

# android - 如何使用 BaseAdapter 绘制文本？

> ID：13232454
> 
> 赞同：0
> 
> 时间：2012-11-05T12:48:28.360
> 
> 标签：android, textview

如何绑定类 TextView 和 BaseAdapter 将参数传递给 TextView ？

我的 BaseAdapter.class

```
public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder view;
        LayoutInflater inflator = activity.getLayoutInflater();

        if (convertView == null) {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.item_grid, null);

            view.txtViewTitle = (TextView) convertView
                    .findViewById(R.id.myImageViewText);

            convertView.setTag(view);
        } else {
            view = (ViewHolder) convertView.getTag();
        }
        view.txtViewTitle.setText(list.get(position));

        return convertView;
    } 
```

我的 xml

```
<ImageView
    android:id="@+id/myImageView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/img_1" />

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="5dip" >

    <vbright.usanin.salesRegion.Text.TextViewOutline
        android:id="@+id/myImageViewText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

和文本视图...

```
@Override
    protected void onDraw(Canvas canvas) {

        Paint strokePaint = new Paint();
        strokePaint.setARGB(255, 0, 0, 0);
        strokePaint.setTextAlign(Paint.Align.CENTER);

        strokePaint.setTextSize(20);
        strokePaint.setTypeface(Typeface.DEFAULT_BOLD);
        strokePaint.setStyle(Paint.Style.STROKE);
        strokePaint.setStrokeWidth(5);

        Paint textPaint = new Paint();
        textPaint.setARGB(255, 255, 255, 255);
        textPaint.setTextAlign(Paint.Align.CENTER);
        textPaint.setTextSize(20);
        textPaint.setTypeface(Typeface.DEFAULT_BOLD);

        int width = getWidth();

        canvas.drawText("Some Text", (160 - width) / 2, 20, strokePaint);   - **how to transfer parameters here??**
        canvas.drawText("Some Text", (160 - width) / 2, 20, textPaint);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:56:35.643

您需要使用字符串创建位图吗？

我用这个：

```
 // String to bitmap 
    public Bitmap StringToBitMap(String encodedString){
            TextView textView = new TextView(StoryActivity.this); 
            textView.layout(30, 300, 300, 500);
            textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, 12);
            textView.setTextColor(Color.BLACK);
            textView.setText(encodedString); 
            textView.setDrawingCacheEnabled(true); 
            textView.setDrawingCacheQuality(2);

            return Flip(textView.getDrawingCache()) ;
    }

    // flip picture
    private Bitmap Flip(Bitmap asset) {

            Matrix mat = new Matrix();
            mat.postScale(-1F, 1F); 
            int width = asset.getWidth();
            int height = asset.getHeight();

            return Bitmap.createBitmap(asset, 0, 0, width, height, mat, true);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:07:05.040

在 TextView 中调用 invalidate() 方法将重绘 TextView。对 TextView 中的 String 变量使用 getter 和 setter 方法，并在 onDraw 中使用该 String 来绘制文本。

也不要忘记调用 BaseAdapter.notifyDataSetChanged 方法来刷新您的适配器。

而已。

# javascript - 使用轮播创建给定格式的java脚本数组？

> ID：13232456
> 
> 赞同：-2
> 
> 时间：2012-11-05T12:48:41.917
> 
> 标签：javascript

使用 carousel 创建给定格式的 ajava 脚本数组？

我正在使用 carousel.js 和 carousel.css，它可以很好地处理静态数据，但是当我尝试放置动态数据时，它会发生热点。我无法以给定格式创建值数组。

```
 <script>
                  var carousel2 = new widgets.Carousel( {

                        uuid : "carousel2",
                        widgetDir : "carousel/",
                        args : { "theme" : "gray", "scrollCarousel" : true, },
                        value : [

                           { 
                             "image" : "images/banner/big_banner_01.jpg",

                           },

                           { 
                             "image" : "images/banner/big_banner_02.jpg",

                           },

                           {
                             "image" : "images/banner/big_banner_03.jpg",

                             },

                           { 
                              "image" : "images/banner/big_banner_04.jpg",

                           },

                           { 
                              "image" : "images/banner/big_banner_05.jpg",

                           }
                        ]
                      } );
                </script>

      I need to pass the value for "value" key dynamically.  How can i form this dynamically .IM TRYING WITH THE BELOW ONE

        <repeat index="index.value" ref="DATA">
        <repeat ref="VAL">
            <choose ref="LANGUAGE">
                <when value="${lang}">hiii
                    <script>
                    val[index.value] = "{"+"'image' :" +${IMAGE}+"}";</script>
                </when>
                <otherwise/>
            </choose>
        </repeat>
    </repeat>

    This is not working. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:05:49.100

 `````
<script>
  var generateCaroseul = {

            getData: function(){

                //loop through html to create an object with the data.
                var dataObj = null;
                $('li').each(function(index) {
                    var imgUrl = $(this).attr("src");
                    dataObj.add("image", imgUrl);
                });

                return dataObj;
            }
  };

  var carousel2 = new widgets.Carousel( {

        uuid : "carousel2",
        widgetDir : "carousel/",
        args : { "theme" : "gray", "scrollCarousel" : true, },
        value : generateCaroseul.getData()
      } );
</script> 
`````

# solr - SOLR 范围查询的奇怪行为

> ID：13232466
> 
> 赞同：4
> 
> 时间：2012-11-05T12:49:19.493
> 
> 标签：solr

我有一个包含大约 100000 个项目的 solr 索引。索引的一个字段是一个整数，范围从 0 到 INT_MAX（实际上索引中的最大值是 157）。我尝试对此字段进行范围查询，但得到了非常奇怪的结果：

范围查询：

*   nb_validations:[10 TO *] => 返回 40499 个项目
*   nb_validations:[9 TO *] => 返回 6 个项目（**至少应为 40499 ??!!**）
*   nb_validations:[8 TO *] => 返回 13 个项目

完全匹配查询：

*   nb_validations:10 => 返回 2005 个项目
*   nb_validations:9 => 返回 6 个项目

我在日志中没有错误，我的 solr 配置看起来不错。字段被声明为 int 并被索引和存储。

那有什么问题？我的索引会损坏吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:10:11.467

您应该使用`sint`来存储值并将该字段用于范围查询。

```
<field name="age" type="sint" indexed="true" stored="true"/> 
```

如果字段类型为整数，Solr 仍可能将其视为字符串。

```
<field name="age" type="integer" indexed="true" stored="true"/> 
```

[文档](http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/schema/IntField.html)：-

> 将“整数”值编码为简单字符串的传统数字字段类型。除非具有包含索引为字符串的数值的现有索引的人，否则不应使用此类。新模式应使用 TrieIntField。
> 
> 字段值将按数字排序，但范围查询（和其他依赖数字范围的功能）将无法按预期工作：值将按 unicode 字符串顺序而不是数字顺序进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T11:02:17.813

使用“int”类型，范围查询将正常工作。

```
<field name="my_name" type="int" indexed="true" stored="false"/>

<fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/> 
```

# pdf - 是否可以从 Enterprise Architect 中的 PDF 文件进行“基于文档的工件创建”？

> ID：13232467
> 
> 赞同：2
> 
> 时间：2012-11-05T12:49:21.450
> 
> 标签：pdf, import, enterprise-architect

Enterprise Architect 提供了一个方便的功能，可以从可以作为 RTF 文件导入项目的外部源生成 UML 工件（或词汇表条目）。

这些 RTF 可以作为“链接文档”或“UML 文档工件”附加到现有项目（使用“工件”模型实体的 << 文档 >> 原型）。这在第 36 页上进行了描述： [http ://www.sparxsystems.com/downloads/whitepapers/Requirements_Management_in_Enterprise_Architect.pdf](http://www.sparxsystems.com/downloads/whitepapers/Requirements_Management_in_Enterprise_Architect.pdf)

格式为 PDF 的文件也可以吗？例如使用加载项？

我尝试以与 RTF 相同的方式拖放它或导入 PDF，但失败了。

理由：大多数客户输入都是 PDF 格式。

.doc 或 .docx 也可能会有所帮助。

我知道它可以全部复制粘贴到 RTF 中，但这很容易出错。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:26:14.773

可以在 EA 中存储和编辑的唯一外部工件是 RTF。您还可以存储但不能编辑位图（在设置 - 图像下）。

有一个名为[EADocx](http://www.eadocx.com/)的用于 MS Word 和 Excel 文档的第三方插件。这集成了 EA 和 Word/Excel，但 AFAIK 文档从未存储在 EA 模型中。

如果您只想引用存储在文件系统中的文件，有两种方法可以解决。

通用工具箱允许您创建超链接，它可以引用（除其他外）外部文件。双击超链接将导致 EA 在其内置编辑器或超文本浏览器中打开文件（如果可以），否则使用关联的 Windows 程序。

您还可以将文件属性添加到几乎任何元素，例如类、需求或用例。打开元素属性，选择相关 - 文件选项卡并添加文件路径。

超链接的缺点是它是一个图表对象，因此仅在创建它的图表中可见（不会出现在项目浏览器中）。

另一方面，文件属性不能通过简单的双击打开；您必须转到相关 - 文件选项卡并从那里启动文件。此外，该元素不会直观地表明它具有 File 属性。但是，创建一个在双击时启动文件的加载项是一项简单的工作。

# netbeans - 如何从 Mercurial 存储库获取修订号并将其粘贴到 NetBeans 资源包？

> ID：13232469
> 
> 赞同：4
> 
> 时间：2012-11-05T12:49:21.853
> 
> 标签：netbeans, mercurial, versioning, resourcebundle

我在 NetBeans 中有一个 java 项目，我使用 Mercurial 进行版本控制。我想在 about 框中查看我的项目版本号，并且我希望它根据 Mercurial 修订号进行更新。任何想法如何做到这一点？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:54:17.130

在“[使用 Mercurial 自动构建的版本编号](https://stackoverflow.com/questions/9212435/version-numbering-for-auto-builds-with-mercurial)”之后，您可以在 VERSION.TXT 文件中记录（关于对话框将显示）的结果：

```
hg log -r . --template '{latesttag}-{latesttagdistance}-{node|short}' 
```

[懒獾](https://stackoverflow.com/users/960558/lazy-badger) [评论](https://stackoverflow.com/questions/13232469/how-to-get-revision-number-from-mercurial-repository-and-paste-it-to-netbeans-re/13232550#comment18026914_13232550)：

> 日志会更好（和正确）：

```
hg log -r tip --template "{latesttag}.{latesttagdistance}" 
```

[在“使用 Mercurial 钩子将版本号嵌入应用程序的方法有多好？](https://stackoverflow.com/a/2666674/6309) ”中您有更多选择。

`version_gen.sh`和：

```
 hg parent --template "r{node|short}_{date|shortdate}" > version.num 
```

> 在makefile中，确保`version_gen.sh`运行之前`version.num`用于设置版本参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:57:45.730

如果是 Windows，[MercurialRev](https://bitbucket.org/JPlenert/mercurialrev)（“SubWCRev for Mercurial”）也可能有用

```
Replaces revision information in a tagged text file.

MercurialRev <SourceFile> <DestinationFile> <RepositoryPath>

Tags:
    <$HG:REV_NUM$>
    <$HG:REV_LMOD_N$>
    <$HG:REV_LMOD_P$>
    <$HG:REV_ID$>
    <$HG:BRANCH$>
    <$HG:TAG$> 
```

# c# - 使用“this”关键字在 DataTable 中存储对对象的引用

> ID：13232471
> 
> 赞同：2
> 
> 时间：2012-11-05T12:49:33.773
> 
> 标签：c#, ado.net, reference, datatable

我有一组没有键或顺序或其他明显索引的对象。

我希望将有关每个对象的数据存储在 DataTable 中。我认为这样做的一种优雅方法是将引用存储在所有者列中，并使该列类型为`typeof(MyClass)`.

但是，当我在实践中尝试这样做时，它不起作用（它说主键冲突）。事实证明，将实例放入行字段只是将“ `MyProgram.MyClass`”写入该字段 -`toString`即使该行的类型应该是`MyClass`not的输出`string`。

下面是一些在 LINQPad 中工作的示例代码：

```
void Main()
{
    // Create a table
    var table = new DataTable();

    var ownerColumn = new DataColumn("Owner", typeof(MyClass));

    var primaryKey = new[] { ownerColumn };

    table.Columns.AddRange(primaryKey);
    table.PrimaryKey = primaryKey;

    table.Columns.Add(new DataColumn("Some Data", typeof(int)) { DefaultValue = 0 });

    // Create 2 objects
    var c1 = new MyClass();
    var c2 = new MyClass();

    // Store their data in the table
    var row = table.NewRow();
    row["Owner"] = c1;
    row["Some Data"] = 1;
    table.Rows.Add(row);

    row = table.NewRow();
    row["Owner"] = c2;
    row["Some Data"] = 2;
    table.Rows.Add(row);
}

// Define other methods and classes here
class MyClass {

} 
```

我该怎么做才能解决这个问题？我是否必须在 中创建一个`id`字段`MyClass`，然后用于`id`填写所有者列，然后确保每个对象`id`自己在创建时都收到一个唯一的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:04:00.553

您必须实现`System.IComparable`（非通用版本）接口，`MyClass`以便`DataTable`知道如何比较列的值。如果未定义此接口，则代码将退回到比较 object.ToString() 结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:02:35.293

您可以使用自动增量列：

```
DataTable dTable = new DataTable();
DataColumn auto = new DataColumn("AutoID", typeof(System.Int32));
dTable.Columns.Add(auto);
auto.AutoIncrement = true;
auto.AutoIncrementSeed = 1;
auto.ReadOnly = true; 
```

# javascript - 如何缩短骨干路由器的长需求列表

> ID：13232472
> 
> 赞同：3
> 
> 时间：2012-11-05T12:49:34.630
> 
> 标签：javascript, backbone.js, requirejs

我已经使用 Backbone.js 和 Require.js 启动了一个 JavaScript 应用程序。该应用程序显示不同的顶级视图 - 搜索项目、编辑项目的不同方面、将项目相互连接。每个视图都以独占方式显示。

路由器模块的文件如下所示：

```
define([
  'backbone',
  'myapp' 
  'views/search',
  'views/edit1', 
  'views/edit2', 
  'views/connect'], 
function(Backbone, App, SearchView, EditView1, Editview2, ConnectView) {

  return Backbone.Router.extend({
    routes: {
      "search": "doSearch",
      "edit1":  "doEdit1",
      // more routes here
    },
    doSearch: function() {
      App.main.show(new SearchView()); // Marionette.js regions
    },
    doEditView1: function() {
      App.main.show(new EditView1());
    },
    // etc.
  });
}); 
```

在我的代码中有更多的视图。有没有办法减少对一个对象的长需求视图列表？也许通过其他架构或一些 require.js 技巧？

也许我受 Symfony 2 关于“路由器”概念的影响太大了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:13:17.673

我自己一直在思考这个问题。

一个简单的解决方案是定义一个包含所有视图的模块，然后将*其*作为依赖项包含在内：

意见/all.js

```
define([
  'views/search',
  'views/edit1', 
  'views/edit2', 
  'views/connect'], 
function(SearchView, EditView1, EditView2, ConnectView) {

    return {
      "EditView1": EditView1,
      "EditView2": EditView2,
      "ConnectView": ConnectView
      "SearchView": SearchView
    };
}); 
```

然后在您的路由器模块中，您可以包含 views/all 作为分配给变量的依赖项`Views`，并将任何视图称为`Views.EditView1`、`Views.EditView2`等：

```
define([
  'backbone',
  'myapp', 
  'views/all'], 
function(Backbone, App, Views) {
  ...

  doSearch: function() {
    App.main.show(new Views.SearchView());
  },

  ...
}); 
```

我从来没有真正尝试过这个，但我认为它会工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:07:04.747

在语法层面上，Require.js 还支持“[简化的 CommonJS 包装](http://requirejs.org/docs/whyamd.html#sugar)”。显然，这不能帮助您避免冗长的依赖项列表（正如@shioyama 的建议所做的那样），但可以最大限度地减少依赖项名称与命名函数参数不匹配的风险，并有助于保持整洁（呃）。

# paypal - Paypal 快速结帐无法在沙盒上运行

> ID：13232480
> 
> 赞同：1
> 
> 时间：2012-11-05T12:50:13.037
> 
> 标签：paypal

一年前，我们在我们的应用程序中集成了贝宝快速结账功能，直到上周它都运行良好。它在 Live 环境中仍然可以正常工作，问题在于沙盒。

我们得到以下错误

> 请求被中止：无法创建 SSL/TLS 安全通道

在进行一些搜索时，我发现 Pyapal API 有一些变化。我对 API 文档中提到的端点进行了更改，但它仍然不起作用。任何人都面临着同样的问题，如果您可以提供一些带有新 API 更改的工作示例，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:28:51.970

也许您的返回 url 是 SSL (https) 并且您的证书已过期？

# java - 如何摆脱指针？

> ID：13232481
> 
> 赞同：0
> 
> 时间：2012-11-05T12:50:12.073
> 
> 标签：java, pointers

为了使我的问题易于理解，我使用以下示例代码。这段代码的输出是 5，而我希望它是 3。我猜 B 正在作为 A 的指针工作，但我希望 A 最初被复制到 B 中，并且 A 中的后续更改不应该影响 B .

```
import java.io.*;
public class fg

{

public static void main(String args[]) throws Exception
{

    int[] A = new int[3];
            A[0]=1;
            A[1]=3;
            A[3]=7;

    check(A);

}

public static void check(int[] A)
{               
    int[] B = A;

    A[1] = 5;

    System.out.println(B[1]);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T12:52:03.830

您需要显式创建一个副本，

```
int[] B = Arrays.copyOf(A, A.length); 
```

因为`int[]`是引用类型，所以赋值只是复制引用（基本上是指针）。

如果数组元素本身不是原始类型，您可能需要深拷贝，所以

```
type B[] = new type[A.length];
for(int i = 0; i < A.length; ++i) {
    B[i] = makeCopyOf(A[i]);  
} 
```

where`makeCopyOf()`应该创建一个`type`实例的合理副本。如果你没有找到更好的东西，`type makeCopyOf(type orig) { return orig.clone(); }`可以作为后备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T12:53:04.503

B 是一个*引用*，因此类似于指针（有各种不同 - 你不能做算术，它不是直接内存指针）。

因此，您必须创建您所指[的结构（数组）的副本。](https://stackoverflow.com/questions/5785745/make-copy-of-array-java)请注意，如果您要复制对象，则可能需要*deep copy*。您可能必须在复制构造函数中执行此操作（请参阅这篇文章，了解[为什么认为 clone() 已损坏](http://www.artima.com/intv/bloch13.html)）

# magento - 将带有自定义选项的产品添加到现有订单

> ID：13232485
> 
> 赞同：1
> 
> 时间：2012-11-05T12:50:25.953
> 
> 标签：magento

```
 $quoteItem = Mage::getModel('sales/quote_item')->setProduct($product)
            ->setQuote(Mage::getModel('sales/quote')->load($order->getQuoteId()));

        $orderItem = Mage::getModel('sales/convert_quote')->itemToOrderItem($quoteItem)->setProduct($product); 
```

这是我用来向现有订单添加简单产品的代码，但我在向订单添加自定义选项产品时遇到问题。

```
$quoteItem->addOption(new Varien_Object(
                array(
                        'product' => $quoteItem->getProduct(),
                        'code' => 'option_ids',
                        'value' => 1 // 45,46,55
                     )
            ));

        $quoteItem->addOption(new Varien_Object(
                        array(
                            'product' => $quoteItem->getProduct(),
                            'code' => 'option_1',   //45
                            'value' => 2          // ‘White’
                         )
        )); 
```

在第一行之后，但没有成功。

请提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T16:01:25.113

有一种方法可以更改退出订单： [http ://prattski.com/2013/04/22/magento-adding-items-to-existing-orders/](http://prattski.com/2013/04/22/magento-adding-items-to-existing-orders/)

# sql - Microsoft Access 报告中的一个报告中的分组/多个查询

> ID：13232486
> 
> 赞同：0
> 
> 时间：2012-11-05T12:50:33.613
> 
> 标签：sql, report, ms-access-2010

我在 Microsoft Access 中有一个联系人数据库，所有数据都在一个表中。我正在尝试创建一个按“状态”对用户进行分组的报告，但在尝试确定如何执行此操作时遇到了麻烦。

每个联系人都有两个字段，状态 1 和状态 2。状态 1 可以为空，A 或 B，状态 2 可以为真或假。

报告应将它们分组如下：

```
Status 1 Null
    Contact name and details (repeated for every contact with this status)
Status 1 A
    Contact name and details (repeated for every contact with this status)
Status 1 B
    Contact name and details (repeated for every contact with this status)
Status 2 True
    Contact name and details (repeated for every contact with this status) 
```

这些状态会有一些重叠，因为一些记录匹配多个状态，但这很好。在此页面上显示重复项是完全可以接受的。

如果这是一个 Web 应用程序，我只需编写 4 个查询并遍历结果记录集，在每个适当的标题下显示结果。但在 Access 报告中，我无法弄清楚该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:54:49.467

您可能会考虑将您的报告基于 UNION 查询：

```
SELECT 1 As SortOrder, Contact, Details, Status1, Status2 FROM ContactsTable 
WHERE Status1 Is Null 
UNION ALL
SELECT 2 As SortOrder, Contact, Details, Status1, Status2 FROM ContactsTable 
WHERE Status1 = "A"
UNION ALL
SELECT 3 As SortOrder, Contact, Details, Status1, Status2 FROM ContactsTable 
WHERE Status1 = "B"
UNION ALL
SELECT 4 As SortOrder, Contact, Details, Status1, Status2 FROM ContactsTable 
WHERE Status2 = True 
```

# qt - 当一个 QRect 与另一个相交时发送一个事件

> ID：13232489
> 
> 赞同：1
> 
> 时间：2012-11-05T12:50:45.847
> 
> 标签：qt, qt4, qt-signals

我面临一个关于矩形交叉点的问题。请注意，直到现在我还没有为此编写任何代码。我只是在想如何解决这个问题。好的，我们开始吧。在我的 SceneView 中，我有一些[QGraphicsPixmapItems](http://doc.qt.digia.com/qt/qgraphicspixmapitem.html)将在我的场景中连续移动。我想诱使他们所有人只在我的场景范围内移动。

我的想法是在我的 QGraphicsPixmapItems 中添加一个信号，以便在每次发生移动时通知我的场景。在我的场景中，当其中一个项目超出我的场景矩形范围时，我可以有另一个信号来通知我的项目。这种方法的问题在于处理。如果每次移动发生时我都会发出一个信号，这就是轮询的特征，这不是我想要的。

我知道 QRect 的 intersected() 和 intersects() 方法。但是，对于我来说，每次发生移动时都打电话给我，这不是一个好主意。你知道这个问题的好主意吗？

# java - 更改列表视图的一个元素的背景颜色

> ID：13232490
> 
> 赞同：2
> 
> 时间：2012-11-05T12:50:46.750
> 
> 标签：java, android, listview, layout, view

在使用查看器之前，我能够更改列表视图的一个元素（使用 te position == numEmission）的背景，但现在每个 tiem 我滚动彩色项目更改，我什至可以拥有 3 个彩色项目，任何人都可以帮助我.

```
public class ItemAdapterProgramme extends ArrayAdapter<Programme> {

public ArrayList<Programme> resultats;
public Bitmap bm;
public Context context;
public ImageLoader imageLoader = ImageLoader.getInstance();
public DisplayImageOptions options;
static ViewHolder holder;
public  LayoutInflater mInflater ;
public int numEmission;
public Calendar c;
public int cHour;
Typeface typeface_date, typeface_title;

public ItemAdapterProgramme(Context context, ArrayList<Programme> resultat) {
    super(context, R.layout.feed_view_programme, resultat);
    this.context = context;
    resultats = resultat;
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    typeface_date = Typeface.createFromAsset(context.getAssets(), "fonts/Roboto/Roboto-Medium.ttf");
    typeface_title = Typeface.createFromAsset(context.getAssets(), "fonts/Roboto/Roboto-Condensed.ttf");
}

public View getView(final int position, View convertView, final ViewGroup parent) {

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.feed_view_programme,parent, false);
        holder = new ViewHolder();
        holder.image = (ImageView) convertView.findViewById(R.id.prog_logo);
        holder.titre = (TextView) convertView.findViewById(R.id.prog_title);
        holder.animator = (TextView) convertView.findViewById(R.id.prog_anim);
        holder.start = (TextView) convertView.findViewById(R.id.prog_start);
        holder.end = (TextView) convertView.findViewById(R.id.prog_end);
        holder.description = (TextView) convertView.findViewById(R.id.prog_description);
        holder.animator.setTypeface(typeface_date);
        holder.titre.setTypeface(typeface_title);
        holder.start.setTypeface(typeface_title);
        holder.end.setTypeface(typeface_title);
        holder.description.setTypeface(typeface_title);
        holder.pb = (ProgressBar) convertView.findViewById(R.id.prog_progressBar1);
        holder.relativeLout_emission = (RelativeLayout)convertView.findViewById(R.id.layout_prog);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.titre.setText(resultats.get(position).getTitle());
    holder.animator.setText(resultats.get(position).getAnimateur());
    holder.start.setText("Début: "+resultats.get(position).getStart());
    holder.end.setText("    Fin: "+resultats.get(position).getEnd());
    holder.description.setText(resultats.get(position).getDescription());

    File cacheDir = StorageUtils.getOwnCacheDirectory(context, "UniversalImageLoader/Cache");

    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
    .denyCacheImageMultipleSizesInMemory()
    .offOutOfMemoryHandling()
    .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024)) 
    .discCache(new UnlimitedDiscCache(cacheDir))
    .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
    .imageDownloader(new URLConnectionImageDownloader(5 * 1000, 20 * 1000)) 
    .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
    .enableLogging()
    .build();

    imageLoader.init(config);

    options = new DisplayImageOptions.Builder()
    .showStubImage(R.drawable.error)
    .showImageForEmptyUri(R.drawable.error)
    .cacheInMemory()
    .cacheOnDisc()
    .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
    .build();

    imageLoader.displayImage(resultats.get(position).getImageUrl(),  holder.image, options, new ImageLoadingListener() {
        @Override
        public void onLoadingStarted() {
            holder.pb.setVisibility(View.VISIBLE);                  }
        @Override
        public void onLoadingFailed(FailReason failReason) {
            holder.pb.setVisibility(View.GONE);                 
        }
        @Override
        public void onLoadingComplete(Bitmap loadedImage) {
            holder.pb.setVisibility(View.GONE);                 
        }
        @Override
        public void onLoadingCancelled() {
            // Do nothing
        }
    });
    c = Calendar.getInstance();  
    cHour=c.get(Calendar.HOUR_OF_DAY);
    Log.d("Adapter cHour", cHour+"");
    numEmission=findEmission(cHour);
    Log.d("Adapter numEmission", numEmission+"");
    if(position==numEmission){
        holder.relativeLout_emission.setBackgroundColor(context.getResources().getColor(R.color.grey));
    }
    return convertView;
}

public int findEmission(int hour){
    for(int i=0;i < resultats.size()-1;i++){
        String start=resultats.get(i).getStart();
        String end=resultats.get(i).getEnd();
        String[] P0=start.split(":");
        String[] P1=end.split(":");
        start=P0[0];
        end=P1[0];
        int intStart=Integer.parseInt(start);
        int intEnd=Integer.parseInt(end);
        if(intStart<=hour && hour<=intEnd) {
            numEmission=i;
            break;
        }
    }
    return numEmission;
}

static class ViewHolder {
    TextView titre, animator, start, end, description;
    ImageView image;
    ProgressBar pb;
    RelativeLayout relativeLout_emission;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T12:56:13.300

问题不在于持有人，而在于 convertView。ListView 可以多次使用一个 convertView 来提高性能。因此，如果您为物品上色一次，则每次重复使用时，您都会多出一件上色的物品。您可以每次都移除持有者并为新视图充气，但这样做并不好。

尝试像这样修改您的代码

```
if (position==numEmission) {
    holder.relativeLout_emission.setBackgroundColor(context.getResources().getColor(R.color.grey));
} else {
    // set default background color
    holder.relativeLout_emission.setBackgroundColor(context.getResources().getColor(R.color.default_list_element_background));
} 
```

# oracle - 在 Oracle 中更改查询结果集中的值

> ID：13232492
> 
> 赞同：1
> 
> 时间：2012-11-05T12:50:57.983
> 
> 标签：oracle

我对 Oracle 非常陌生，我想这才 3 个月左右，现在我遇到了一些问题。我正在运行一个查询，它将显示机器的停机时间。它将显示开始/结束时间及其差异。加工分两个班次进行，班次 A 为早上 6:00 至下午 6:00，班次 B 为下午 6:00 至早上 6:00。以下是我的查询的示例结果集：

* * *

```
Shift        StartDateTime        EndDateTime            DifferenceInMinutes
B            09/25/2012 17:38:40  09/25/2012 19:12:26    93.7667
B            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167
B            09/25/2012 19:25:03  09/26/2012 05:55:08    630.0833
A            09/26/2012 05:55:08  09/26/2012 09:19:55    24.8 
```

* * *

DifferenceInMinutes 中的总数应始终为每班 720。我所做的是，在每次轮班开始时，轮班 A 的时间是早上 6:00，轮班 B 的时间是 18:00。我使用 Case When 来做到这一点。下面将是结果集的另一个示例：

* * *

```
Shift        StartDateTime        EndDateTime            DifferenceInMinutes
B            09/25/2012 18:00:00  09/25/2012 19:12:26    72.43333
B            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167
B            09/25/2012 19:25:03  09/26/2012 05:55:08    630.0833
A            09/26/2012 06:00:00  09/26/2012 09:19:55    199.9167 
```

* * *

现在我唯一的问题是 EndDateTime，一个班次的最后一项应该总是在 18:00 结束 Shift A 和 6:00 为 Shift B。我想实现如下所示：

* * *

```
Shift        StartDateTime        EndDateTime            DifferenceInMinutes
B            09/25/2012 18:00:00  09/25/2012 19:12:26    72.43333
B            09/25/2012 19:12:26  09/25/2012 19:25:03    12.6167
B            09/25/2012 19:25:03  09/26/2012 06:00:00    634.95
A            09/26/2012 06:00:00  09/26/2012 09:19:55    199.9167 
```

* * *

我必须承认我不知道如何使用 Case When，就像我在 StartDateTime 上所做的那样，所以我真的希望有办法解决这个问题。多谢你们。我希望我在这里说得通。这是我到目前为止所拥有的：

```
SQL >SELECT 
> DISTINCT Hm.Txndate
, hm.shiftname AS Shift
, rd.resourcename AS TesterID
, case
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
    else to_char(Rsh.Oldlaststatuschangedate)
  end as StartDateTime
, lead(hm.shiftname, 1, 0) over (partition by hm.txndate order by rd.resourcename, c.containername, hm.txndate, hm.shiftname) as NextShift
, to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' ' || to_char(Rsh.Laststatuschangedate, 'HH24:MI:SS') as EndDateTime
, ROUND((((TO_DATE(rsh.laststatuschangedate, 'MM/DD/YYYY HH24:MI:SS') - TO_DATE(case
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
    else to_char(Rsh.Oldlaststatuschangedate)
  end)) * 24) * 60), 4) AS TotalMinutes
, Rsh.Newstatusname AS Status
, Rsh.Newreasonname AS StatusReason
, c.containername AS Lot
, pb.productname AS ProductName
, aep.paramvalue AS HandlerID
, rd.attr_09 AS HandlerType
, (SELECT e.employeename AS OperatorID FROM employee e WHERE e.employeeid = hm.employeeid) AS OperatorID
, (SELECT e.fullname AS EmployeeName FROM employee e WHERE e.employeeid = hm.employeeid) AS EmployeeName
, hm.comments AS Remarks
FROM Historymainline hm
INNER JOIN Resourcestatushistory rsh ON hm.Historymainlineid = rsh.Historymainlineid
INNER JOIN ResourceDef rd ON rd.resourceid = rsh.historyid
INNER JOIN a_equipmentparams aep ON rd.resourceid = aep.resourceid
INNER JOIN a_paramname apn ON aep.paramnameid = apn.paramnameid AND apn.paramnamename ='HANDLERID'
INNER JOIN A_WIPEquipment awe ON rd.resourceid = awe.equipmentid
INNER JOIN container c ON c.ContainerId = awe.ContainerId
INNER JOIN Product p ON c.productid = p.productid
INNER JOIN productbase pb ON p.productbaseid = pb.productbaseid
WHERE rd.Resourcename = :equipID
ORDER BY  c.containername, hm.txndate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:30:09.797

我想你要的是这样的东西？

```
SQL> select shift, startdatetime, enddatetime, round((enddatetime - startdatetime) * 24 * 60, 4) differenceinminutes
  2    from shifts
  3   order by 2;

S STARTDATETIME       ENDDATETIME         DIFFERENCEINMINUTES
- ------------------- ------------------- -------------------
B 09/25/2012 17:38:40 09/25/2012 19:12:26             93.7667
B 09/25/2012 19:12:26 09/25/2012 19:25:03             12.6167
B 09/25/2012 19:25:03 09/26/2012 05:55:08            630.0833
A 09/26/2012 05:55:08 09/26/2012 09:19:55            204.7833
A 09/26/2012 09:19:55 09/26/2012 18:19:55                 540
B 09/26/2012 18:19:55 09/26/2012 22:10:26            230.5167
B 09/26/2012 22:10:26 09/27/2012 01:11:00            180.5667
B 09/27/2012 01:11:00 09/27/2012 05:54:08            283.1333

8 rows selected.

SQL> 
```

至

```
SQL> select shift, startdatetime, enddatetime,
  2         round((enddatetime - startdatetime) * 24 * 60, 4) differenceinminutes
  3    from (select shift,
  4                  case
  5                    when shift = 'A' and r = 'a' then
  6                     trunc(startdatetime) + (6 / 24)
  7                    when shift = 'B' and r = 'a' then
  8                     trunc(startdatetime) + (18 / 24)
  9                    else
 10                     startdatetime
 11                  end startdatetime,
 12                  case
 13                    when shift = 'A' and r = 'b' then
 14                     trunc(enddatetime) + (18 / 24)
 15                    when shift = 'B' and r = 'b' then
 16                     trunc(enddatetime) + (6 / 24)
 17                    else
 18                     enddatetime
 19                  end enddatetime
 20             from (select shift, startdatetime, enddatetime,
 21                           case
 22                             when lag(shift) over(order by startdatetime) != shift then
 23                              'a'
 24                             when nvl(lead(shift) over(order by startdatetime), 'x') != shift then
 25                              'b'
 26                             when row_number() over(order by startdatetime) = 1 then
 27                              'a'
 28                           end r
 29                      from shifts))
 30   order by startdatetime
 31  /

S STARTDATETIME       ENDDATETIME         DIFFERENCEINMINUTES
- ------------------- ------------------- -------------------
B 09/25/2012 18:00:00 09/25/2012 19:12:26             72.4333
B 09/25/2012 19:12:26 09/25/2012 19:25:03             12.6167
B 09/25/2012 19:25:03 09/26/2012 06:00:00              634.95
A 09/26/2012 06:00:00 09/26/2012 09:19:55            199.9167
A 09/26/2012 09:19:55 09/26/2012 18:00:00            520.0833
B 09/26/2012 18:00:00 09/26/2012 22:10:26            250.4333
B 09/26/2012 22:10:26 09/27/2012 01:11:00            180.5667
B 09/27/2012 01:11:00 09/27/2012 06:00:00                 289

8 rows selected. 
```

[http://sqlfiddle.com/#!4/b5d29/3](http://sqlfiddle.com/#!4/b5d29/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:24:47.223

能够回答我自己的问题。这是我使用的查询：

```
SELECT 
DISTINCT Hm.Txndate
, hm.shiftname AS Shift
, rd.resourcename AS TesterID
, case
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
    else to_char(Rsh.Oldlaststatuschangedate)
  end as StartDateTime
, case
    when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) <> hm.shiftname then 
     case
        when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) = 'A' then to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
        when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) = 'B' then to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
      end
    else to_char(Rsh.Laststatuschangedate)
  end as EndDateTime
, ROUND((((TO_DATE(case
    when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) <> hm.shiftname then 
     case
        when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) = 'A' then to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
        when lead(hm.shiftname, 2, 0) over (order by c.containername, hm.txndate) = 'B' then to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
      end
    else to_char(Rsh.Laststatuschangedate)
  end) - TO_DATE(case
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 06:00:00'
    when Rsh.Oldlaststatuschangedate < to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00' and Rsh.Laststatuschangedate > to_char(Rsh.Laststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'  then to_char(Rsh.Oldlaststatuschangedate, 'MM/DD/YYYY') || ' 18:00:00'
    else to_char(Rsh.Oldlaststatuschangedate)
  end)) * 24) * 60), 4) AS TotalMinutes
, Rsh.Newstatusname AS Status
, Rsh.Newreasonname AS StatusReason
, c.containername AS Lot
, pb.productname AS ProductName
, aep.paramvalue AS HandlerID
, rd.attr_09 AS HandlerType
, (SELECT e.employeename AS OperatorID FROM employee e WHERE e.employeeid = hm.employeeid) AS OperatorID
, (SELECT e.fullname AS EmployeeName FROM employee e WHERE e.employeeid = hm.employeeid) AS EmployeeName
, hm.comments AS Remarks
FROM Historymainline hm
INNER JOIN Resourcestatushistory rsh ON hm.Historymainlineid = rsh.Historymainlineid
INNER JOIN ResourceDef rd ON rd.resourceid = rsh.historyid
INNER JOIN a_equipmentparams aep ON rd.resourceid = aep.resourceid
INNER JOIN a_paramname apn ON aep.paramnameid = apn.paramnameid AND apn.paramnamename ='HANDLERID'
INNER JOIN A_WIPEquipment awe ON rd.resourceid = awe.equipmentid
INNER JOIN container c ON c.ContainerId = awe.ContainerId
INNER JOIN Product p ON c.productid = p.productid
INNER JOIN productbase pb ON p.productbaseid = pb.productbaseid
WHERE rd.Resourcename = :equipID
ORDER BY  c.containername, hm.txndate; 
```

感谢大家！我还有一些问题，但我认为我需要为此启动另一个线程。再次感谢所有帮助的家伙。

# django - 向查询集添加元素

> ID：13232494
> 
> 赞同：0
> 
> 时间：2012-11-05T12:51:03.023
> 
> 标签：django, django-models

> **可能重复：**
> [django - 将列表转换回查询集](https://stackoverflow.com/questions/1058135/django-convert-a-list-back-to-a-queryset)

我尝试将一个元素添加到我创建的空 query_set 中。这是我所做的：

```
 query_set=User.objects.none()
      for user in list:
          query_set=query_set | user 
```

其中“list”是用户列表。

我收到此错误消息：“用户”对象没有属性“_clone”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:24:06.340

这是你想要的？

```
 filter = models.Q(user=User.objects.none())
  for user in list:
      filter |= models.Q(user=user)

  #Returns mymodel instances filter for users in list or none
  query_set = mymodel.objects.filter(filter) 
```

# maven - 使用 Netbeans（和 Maven）运行正确的上下文根

> ID：13232497
> 
> 赞同：4
> 
> 时间：2012-11-05T12:51:16.890
> 
> 标签：maven, netbeans, glassfish, contextpath, application.xml

当我从我的 Netbeans 7.2（我也使用 Glassfish 3.1.2 服务器）运行一个项目时，我遇到了一个小问题......

事实上，我正在将现有项目从 Ant 迁移到 Maven，我的 pom.xml 已经完成，并且我已经使用了上下文根的自定义，如下所述：[http ://maven.apache.org/plugins/maven-ear -plugin/examples/customizing-context-root.html](http://maven.apache.org/plugins/maven-ear-plugin/examples/customizing-context-root.html)但是当我从 netbeans 运行项目时，它使用我的 .ear 名称部署： `localhost:8080/MyApplicationEAR-0.1-SNAPSHOT` 而不是 `localhost:8080/MyApplicationName`（在 中引用`<contextRoot>/MyApplicationName</contextRoot>`）

如果我在浏览器中写入正确的 URL，它可以正常工作，但它不是很愉快。

Netbeans 有问题还是我忘记了什么？

编辑：application.xml 是由 Maven 自动生成的，并且 context-root 格式良好，但似乎 Netbeans 与此无关......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-04T06:00:07.503

如果你使用 Maven 并部署到 JBoss，试试这个。

您应该编辑 pom.xml 文件并将以下行添加到`<build>`部分中。

```
<finalName>${artifactId}</finalName> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:10:16.930

I just tried that with Netbeans 7.3 beta and it works.

I assume you put in the artifact and groupId tags in your module tag. If not this might be your problem. Here my plugin config as an example:

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <version>6</version>
                <defaultLibBundleDir>lib</defaultLibBundleDir>
                <generateApplicationXml>true</generateApplicationXml>
                <applicationName>Gen</applicationName>
                <modules>
                    <ejbModule>
                        <artifactId>Testing-ejb</artifactId>
                        <groupId>de.roeperweise.testing</groupId>
                        <bundleFileName>ejb.jar</bundleFileName>
                    </ejbModule>
                    <webModule>
                        <artifactId>Testing-web</artifactId>
                        <groupId>de.roeperweise.testing</groupId>
                        <bundleFileName>web.war</bundleFileName>
                        <contextRoot>/custom</contextRoot>                         
                    </webModule>
                </modules>
            </configuration>
        </plugin> 
```

# django - Django GeoIP按城市名称获取国家

> ID：13232502
> 
> 赞同：1
> 
> 时间：2012-11-05T12:51:42.710
> 
> 标签：django, geoip

我正在使用 GeoIP 与 django 进行地理位置，它工作正常 - 定位城市、国家等。但我想要的是在搜索城市名称时找到国家名称。例子：

* * *

搜索：马德里

发现国家：西班牙

* * *

搜索：巴黎

发现国家：法国

* * *

GeoIP 是否可以实现这一点，如果可以，如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:53:25.510

这是不可能的。GeoIP 只能将 IP 映射到国家/城市，仅此而已。

您应该尝试实验性的[Google Places API](https://developers.google.com/places/documentation/) - 您可以使用它来检查在哪个国家/地区，例如。马德里是。

# c# - 多线程中的调用方法

> ID：13232504
> 
> 赞同：-1
> 
> 时间：2012-11-05T12:51:50.073
> 
> 标签：c#, multithreading

我需要多次调用一个方法，使用线程。

例如 ：

**方法：**

```
 private void add(int a, int b)
        {
            Console.WriteLine(a + b);
        } 
```

**称呼**

```
private void call()
        {
            for (int i = 0; i < 10; i++)
            {
                add(i, 2);
            }
        } 
```

**上面只是一个例子**像这样我需要在多线程中使用不同的参数调用 add() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:04:49.067

您可以使用 TPL：

```
private void call()
{
    Parallel.For(0, 10, i => add(i, 2));        
} 
```

# unit-testing - Grails：单元测试中的 NPE

> ID：13232506
> 
> 赞同：1
> 
> 时间：2012-11-05T12:51:54.440
> 
> 标签：unit-testing, grails, junit, grails-2.0

我正在为我的域类编写单元测试，但是当我尝试运行以下测试时得到了 NPE：

```
def st

void setUp(){
    super.setUp()
    mockForConstraintsTests(Student)        
    st=new Student(firstName:"Feras",lastName:"Ahmad")

}

void testMinSize() {        
    st.firstName="J"
    assertFalse st.validate();              
} 
```

我在 testMinSize 方法的第一行得到了 NPE。那有什么问题？我认为在每次测试之前都会调用 setUp 方法。这是真的？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:22:50.430

添加@Mock（学生）

在你的测试类的顶部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:02:36.980

也许你可以试试`@Before`注释

```
@Before
void setUp(){
    super.setUp()
    print "I'm there"
    mockForConstraintsTests(Student)        
    st=new Student(firstName:"Feras",lastName:"Ahmad")
} 
```

[文档](http://grails.org/doc/latest/guide/testing.html)有时会放置注释，有时不会。也许这取决于 grails/JUnit 版本。

# c# - 输入流不是有效的二进制格式

> ID：13232508
> 
> 赞同：0
> 
> 时间：2012-11-05T12:51:55.963
> 
> 标签：c#, xml, serialization, binaryfiles, bufferedinputstream

我想反序列化我的“DataStore”以获取类型列表。首先，我想用 XMLSerializer 在 XMl 中制作这些，但似乎他不喜欢接口、抽象类和类型......但没有解决方法，所以我需要将我的主要内容存储在 XML 类中：

```
public class InstalledObjects
{
    private InstalledObjects()
    {

    }

    static InstalledObjects _instance = new InstalledObjects();

    ObservableCollection<AbstrICTSUseObject> _installedObects = new ObservableCollection<AbstrICTSUseObject>();        

    public static InstalledObjects Instance
    {
        get { return _instance; }
        set { _instance = value; }
    }

    public ObservableCollection<AbstrICTSUseObject> InstalledObects
    {
        get { return _installedObects; }
        set { _installedObects = value; }
    }

    public void Saves()
    {
        List<Type> types = new List<Type>();

        foreach (var item in InstalledObects)
        {
            types.Add( item.GetType() );
        }

        TypeStore ts = new TypeStore();
        ts.Typen = types;
        ts.SaveAsBinary("TypeStore.xml");
        this.SaveAsXML("LocalDataStore.xml", types.ToArray());
    }

    public void Load()
    {
        if (File.Exists("LocalDataStore.xml"))
        {
            TypeStore ts = new TypeStore();
            ts.LoadFromBinary("LocalDataStore.xml");
            this.LoadFromXML("LocalDataStore.xml",ts.Typen.ToArray()); 
        }
    }
} 
```

并将我的类型存储在一个简单的类中：

```
[Serializable]
public class TypeStore
{
    List<Type> _typen = new List<Type>();

    public List<Type> Typen
    {
        get { return _typen; }
        set { _typen = value; }
    }
} 
```

好吧，只要我保存所有内容，我认为这可以工作，而且我认为如果“LoadFromBinary”不会引发一些小问题，这也可以工作-.-

```
 public static void SaveAsBinary(this Object A, string FileName)
    {
        FileStream fs = new FileStream(FileName, FileMode.Create);
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.Serialize(fs, A);
    }

    public static void LoadFromBinary(this Object A, string FileName) 
    {
        if (File.Exists(FileName))
        {
            Stream fs = new FileStream(FileName, FileMode.Open);
            BinaryFormatter formatter = new BinaryFormatter();
            A = formatter.Deserialize(fs) ;
        }
    } 
```

远征：

```
 The input stream is not a valid binary format. The starting contents (in bytes) are: 3C-3F-78-6D-6C-20-76-65-72-73-69-6F-6E-3D-22-31-2E ... 
```

感谢文森的帮助 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:57:47.687

这就像您从错误的文件中读取的事实一样简单吗？

笔记：

```
ts.SaveAsBinary("TypeStore.xml");
this.SaveAsXML("LocalDataStore.xml", types.ToArray()); 
```

然后：

```
ts.LoadFromBinary("LocalDataStore.xml");
this.LoadFromXML("LocalDataStore.xml", ts.Typen.ToArray()); 
```

应该：

```
ts.LoadFromBinary("TypeStore.xml");
this.LoadFromXML("LocalDataStore.xml", ts.Typen.ToArray()); 
```

但是，请注意，将其称为 .xml 具有误导性。另外：注意版本控制 -`BinaryFormatter`是一个真正的猪。就个人而言，我只是手动序列化每种类型`AssemblyQualifiedName`- 这可以在普通 xml 中完成。

# php - while 循环中的 mysql_fetch_array 在本地主机中工作，但在主机服务器中不工作

> ID：13232510
> 
> 赞同：0
> 
> 时间：2012-11-05T12:52:04.127
> 
> 标签：php

```
$result = mysql_query('SELECT * FROM phpfox_education_question where subject_id = 2 and ques_id =1');
var_dump($result);
//var_dump result is :- "resource(64) of type (mysql result)" in localhost and web host,but
while($row = mysql_fetch_array($result))
{
    var_dump($row); //**NOTHING DISPLAYED in web host server but in localhost**
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:01:14.357

尝试添加这个：

```
var_dump(mysql_num_rows($result)); 
```

要查看是否有要获取的行，如果没有，这就是您的答案。
顺便说一句，在 PDO 中，此代码如下所示：

```
$db = new PDO('mysql:dbname=default_db_name;host=127.0.0.1',$user,$pass);
//use prepared statmenets
$stmt = $db->prepare('SELECT * FROM your_db.phpfox_education_question WHERE subject_id = :subject_id AND ques_id = :ques_id');
//pass binds when executing the stmt
$stmt->execute(array(':subject_id' => 2, ':ques_id' => 1));
//number of rows found:
var_dump($stmt->rowCount());
while($row = $stmt->fetch(PDO::FETCH_ASSOC))
{//fetch rows as assoc array
    var_dump($row);
} 
```

请注意，这是一个基本示例，您可以使用 PDO 做更多事情

*更新：*
要获得更多调试信息，试试这个：

```
try
{
    $db = new PDO();//connect, pass correct data here
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);//cause PDO to throw PDOExceptions on error
    $stmt = $db->prepare('SELECT * FROM your_db.phpfox_education_question WHERE subject_id = :subject_id AND ques_id = :ques_id');
    $stmt->execute(array(':subject_id' => 1, ':ques_id' => 2));
    var_dump($stmt->rowCount());
    while($row = $stmt->fetch(PDO::FETCH_ASSOC))
    {
        var_dump($row);
    }
}
catch(PDOException $e)
{
    echo $e->getMessage();
    $db = null;
    return;
}
echo 'No problems with query<br/>';
$db = null;//disconnecto 
```

确保没有抛出错误，如果有，检查消息，找出问题所在并修复它。如果您找不到修复它们的方法，我们当然会为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:55:45.767

试试这个：

```
$query = "SELECT * FROM phpfox_education_question WHERE subject_id = '2' AND ques_id = '1'";
$result = mysql_query($query) or die(mysql_error()); // <--- added this
echo "Results: ".mysql_num_rows($result)."<br />"; // <--- added this to output result count
while($row = mysql_fetch_array($result))
{
    print_r($row); //**NOTHING DISPLAYED in web host server but in localhost**
} 
```

这是使用的折旧代码 btw

# java - 当用户使用 servlet 关闭浏览器时使会话无效

> ID：13232511
> 
> 赞同：1
> 
> 时间：2012-11-05T12:52:07.227
> 
> 标签：java, session, servlets

当用户单击注销按钮时，我使会话无效。但是当用户关闭浏览器时，如何使用 servlet 使会话无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:13:20.437

您可以简单地使用*JavaScript*的 onunload（对于 IE）或 onbeforeunload（对于 firefox）事件将您的页面重定向到使会话无效的 servlet（与注销按钮相同）的 url。

```
<script>
    function logout(){
       window.location.href='sessionInvalidatorServlet';
    }
</script

<body onunload="logout()">
.........
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:55:34.333

[您可以按照此](https://stackoverflow.com/questions/1631959/browser-window-close-event)描述捕获关闭页面事件，并`ajax`在用户注销时发送请求

# regex - 匹配中的正则表达式无效量词错误

> ID：13232517
> 
> 赞同：1
> 
> 时间：2012-11-05T12:52:25.890
> 
> 标签：regex

我正在尝试使用变量创建正则表达式，因为我不知道具体的单词

所以在正确放置变量后我得到了这个代码

```
var newregxobj="(?=(?<!kbWR"))(?=(?<!none"))>[0-9\.]+<"; 
```

我使用的 REGEXP

```
var re = new RegExp(newregxobj,"g"); 
```

当我尝试使用 to 匹配它时出现错误：

> SyntaxError: 无效的量词

我试图逃避几乎所有的量词，但没有任何反应。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:55:21.473

我认为您需要在中间转义双引号：

```
"(?=(?<!kbWR\"))(?=(?<!none\"))>[0-9\.]+<"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:56:21.680

你需要逃脱`"`，`\`才能成功`\"`。

另一方面，您不必在`[...]`.

我还建议避免`(?<!...)`在积极的前瞻中进行消极的后瞻`(?=...)`

* * *

```
kbWR\")(?<!none\")>[0-9.]+< 
```

* * *

### 更新：

因为您使用 Javascript 并且不支持后视，您必须使用替代解决方案

```
var re = new RegExp("(?!kbWR\"|none\").{5}>[0-9.]+<", "g"); 
```

# ios - 可以识别 CALayer 对象的 iOS 应用程序的 UI 自动化工具

> ID：13232518
> 
> 赞同：5
> 
> 时间：2012-11-05T12:52:28.043
> 
> 标签：ios, object, user-interface, calayer, ios-ui-automation

我正在尝试自动化测试具有 CA 层对象的应用程序的测试。Apple 提供的 UI 自动化框架不识别 CA Layer 对象。我想要一个有助于识别 CA 层对象的 ui 自动化工具列表。请问我可以得到工具列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:06:20.297

UI 自动化无法访问 CA 层对象，因为它们没有暴露给 iOS 中的可访问性机制。您可以从符合[`UIAccessibilityContainer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccessibilityContainer_Protocol/Introduction/Introduction.html)协议的对象开始，将您的层暴露给可访问性 API。该对象将提供一组[`UIAccessibilityElement`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccessibilityContainer_Protocol/Introduction/Introduction.html)对象，这些对象将反映您的 CA 层的表示。那时，UI 自动化将能够“看到”用户在查看原始 CA 层时看到的内容。

使用此策略您可以获得两个好处。您的应用程序现在可以通过视觉障碍者的 Voice Over 等功能访问，并且您可以通过 UI 自动化与您的应用程序对话。

`UIKit`对于不使用为您提供可访问性的本机功能的应用程序，这是 Apple 建议的。恕我直言，我认为走这条路是个好主意，因为 Apple 在可访问性功能上下了很大的赌注，而且未来它只会随着与操作系统的集成而更深入。

# database - 在perl中将整数转换为字符串以进行数据库插入

> ID：13232519
> 
> 赞同：2
> 
> 时间：2012-11-05T12:52:27.930
> 
> 标签：database, string, perl, casting, integer

我有一个 perl 脚本，它从文本文件中读取行并插入到数据库中。

# 示例文本文件可能如下所示

```
country   zipcode
------------------
India      712501
India      00032 
```

其中第一行是列名，行表示列值。它以 EAV 格式存储，列名和列值都为 VARCHAR。

现在对于邮政编码 00032，perl 脚本将其视为 Integer 并且插入查询正在变为 INSERT VALUES('India',00032) //Quote 没有出现，因为 perl 将其视为字符串 SO，而插入它正在插入 India 32（处理它为整数）

那么我可以强制将其设为字符串，以便 perl 模块将 VALUES('India','00032') 改为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T18:57:30.507

在“准备”之前将数据放入查询中可能会导致许多问题。使用占位符。这种方式 perl 知道每个字段中预期的数据类型，并且几乎总是会做正确的事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:33:54.527

如果你把它当作一个数字，Perl 只会把它变成一个数字。

```
$x = "00032";
say $x;
$x += 0;
say $x; 
```

输出：

```
00032
32 
```

您没有显示设置邮政编码字符串的代码，但是，如果您使用`$postcode = "00032";`而不是`$postcode = 00032;`，则将保留前导零。如果值来自文件、用户输入等，那么将外部数据移动到程序中的代码中的某些内容会导致它们丢失，但我们不能在没有看到相关信息的情况下说出究竟是什么丢失了它代码。

# c# - OnClientClick 阻止 OnClick 事件？

> ID：13232520
> 
> 赞同：1
> 
> 时间：2012-11-05T12:52:35.783
> 
> 标签：c#, jquery, asp.net

我有一个按钮，我需要触发一个 onclick 事件和一个 onclientclick 事件。onclientclick 将是这样的：

```
(function($){
$.fn.validate = function()  {
    var option = $('#<%=LblWarnings.ClientID%>').html();   
        if (option == "option1_OK" ||
            option == "option1_OK")  
            alert(wrong);
        else {
            $('#<%=LblWarnings.ClientID%>').html("Incomplete");
            alert(wrong);}        
    };
})(jQuery); 
```

验证函数，检查标签的文本，如果条件为真，它应该继续执行 OnClick 事件。如果它是错误的，它不应该触发后面的代码（我的 .cs 文件中称为 WriteInfo 的方法，而只是更新一个标签，以便用户在提交数据时知道有问题。

onclientclick 是否可以停止 onclick 事件？如果是这样，你能帮我提供 asp:button 语句，这样我就可以触发这两个事件。

谢谢。

尝试 Adil Answer 后，我收到错误“预期对象”

也许我调用函数的方式有问题？

```
<asp:Button ID="ButtonRadioValue" CssClass="customButton" runat="server" onclick="WriteInfo" OnClientClick="validate();" Text="Accept" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:55:50.963

您可以使用**[stopPropagation()](http://api.jquery.com/event.stopPropagation/)**方法来停止返回 false 的回发。

**使用 stopPropagation();**

```
 (function($){
    $.fn.validate = function(event)  {
        var option = $('#<%=LblWarnings.ClientID%>').html();   
            if (option == "option1_OK" ||
                option == "option1_OK")  
                alert(wrong);
                event.stopPropagation();
            else {
                $('#<%=LblWarnings.ClientID%>').html("Incomplete");
                alert(wrong);}        
        };
    })(jQuery); 
```

**使用返回假；**

```
(function($){
$.fn.validate = function()  {
    var option = $('#<%=LblWarnings.ClientID%>').html();   
        if (option == "option1_OK" ||
            option == "option1_OK")  
            alert(wrong);
            return false;
        else {
            $('#<%=LblWarnings.ClientID%>').html("Incomplete");
            alert(wrong);}        
    };
})(jQuery); 
```

# c# - 日期时间到持续时间的转换

> ID：13232522
> 
> 赞同：2
> 
> 时间：2012-11-05T12:52:49.653
> 
> 标签：c#, xsd

c# 是否支持将两个`DateTime`'s 转换为`xs:duration`数据类型？（我假设我需要两个`DateTime`值？）

参考资料：[http](http://www.w3.org/TR/xmlschema-2/#duration) ://www.w3.org/TR/xmlschema-2/#duration和[http://www.w3schools.com/schema/schema_dtypes_date.asp](http://www.w3schools.com/schema/schema_dtypes_date.asp)（中途）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:22:04.553

`XMLConvert`课堂上对此有支持，如下所述：http: [//kennethxu.blogspot.de/2008/09/xmlserializer-doesn-serialize-timespan.html](http://kennethxu.blogspot.de/2008/09/xmlserializer-doesn-serialize-timespan.html)

我最终使用了这段代码，它正确显示了 xml 中的值

```
 [XmlElementAttribute("ValidThrough", DataType = "duration")]
    [DataMember(Name = "ValidThrough")]
    [DefaultValue("P10D")]
    public string ValidThrough
    {
        get
        {
            return XmlConvert.ToString(_validThroughField);
        }
        set
        {
            _validThroughField= XmlConvert.ToTimeSpan(value);
        }
    }

    [XmlIgnore]
    public TimeSpan _validThroughField { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T12:53:39.440

[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)是您正在寻找的。

> TimeSpan 对象**表示一个时间间隔**（持续时间或经过的时间），它以天数、小时数、分钟数、秒数和秒数的正数或负数来衡量。TimeSpan 结构也可用于表示一天中的时间，但前提是时间与特定日期无关。否则，应使用 DateTime 或 DateTimeOffset 结构。

例子：

```
DateTime dt1 = new DateTime(2012, 10, 2, 10, 20, 00);
DateTime dt2 = DateTime.Now;

TimeSpan ts = dt1 - dt2; 
```

# ruby-on-rails - 如何配置 nginx 在 SubURI 上服务 gitlabhq

> ID：13232528
> 
> 赞同：6
> 
> 时间：2012-11-05T12:53:11.427
> 
> 标签：ruby-on-rails, nginx, gitlab

gitlab 的 nginx 配置为：

```
# GITLAB
# Maintainer: @randx
# App Version: 3.0

upstream gitlab {
  server unix:/home/gitlab/gitlab/tmp/sockets/gitlab.socket;
}

server {
  listen YOUR_SERVER_IP:80;         # e.g., listen 192.168.1.1:80;
  server_name YOUR_SERVER_FQDN;     # e.g., server_name source.example.com;
  root /home/gitlab/gitlab/public;

  # individual nginx logs for this gitlab vhost
  access_log  /var/log/nginx/gitlab_access.log;
  error_log   /var/log/nginx/gitlab_error.log;

  location / {
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  # if a file, which is not found in the root folder is requested,
  # then the proxy pass the request to the upsteam (gitlab unicorn)
  location @gitlab {
    proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_redirect     off;

    proxy_set_header   X-Forwarded-Proto $scheme;
    proxy_set_header   Host              $http_host;
    proxy_set_header   X-Real-IP         $remote_addr;

    proxy_pass http://gitlab;
  }
} 
```

我应该改变什么以将 gitlab 作为 surURI，www.mysuperserver.com/gitlab

我尝试了很多不同的东西，但没有任何效果谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T03:14:44.323

我已成功使其在子目录 url 下工作。

*   按照源代码中的说明进行操作，例如`/home/git/gitlab/config/gitlab.yml`

```
    # 取消注释并自定义最后一行以在非根路径下运行
    # 警告：我们建议创建一个 FQDN 以在根路径中托管 GitLab 而不是这个。
    # 请注意，需要更改四个设置才能使其正常工作。
    # 1) 在你的 application.rb 文件中：config.relative_url_root = "/gitlab"
    # 2) 在你的 gitlab.yml 文件中：relative_url_root: /gitlab
    # 3) 在你的 unicorn.rb 中：ENV['RAILS_RELATIVE_URL_ROOT'] = "/gitlab"
    # 4) 在 ../gitlab-shell/config.yml: gitlab_url: "http://127.0.0.1/gitlab"
    # 要更新路径，运行： sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production
    #
    relative_url_root: /gitlab

```

*   更改 nginx 配置以提供 suburi，请参考下面的示例：

关键是`root`在上下文`server`和`alias`下`location`。请参阅[nginx 陷阱](http://wiki.nginx.org/Pitfalls)，[nginx 根注释](http://wiki.nginx.org/HttpCoreModule#root)以获取更多详细信息。

```
# default.conf for nginx
upstream gitlab {
  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket;
}
server {
    listen       80;
    server_name  $YOUR_DOMAIN;
    # other settings, especially root settings, like below
    # root /usr/local/nginx/html;
    location /gitlab {
        # serve static files from defined root folder;
        alias /home/git/gitlab/public;

        # individual nginx logs for this gitlab vhost
        access_log  /var/log/nginx/gitlab_access.log;
        error_log   /var/log/nginx/gitlab_error.log;

        # @gitlab is a named location for the upstream fallback, see below
        try_files $uri $uri/index.html $uri.html @gitlab;
    }

    location @gitlab {
        proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
        proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
        proxy_redirect     off;
        proxy_set_header   X-Forwarded-Proto $scheme;
        proxy_set_header   Host              $http_host;
        proxy_set_header   X-Real-IP         $remote_addr;
        proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;

        proxy_pass http://gitlab;
    }
    # other locations' settings...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T13:45:36.017

从 Gitlab 5.3 开始，您可以使用官方安装文档将其配置为在开箱即用的 suburi 中运行。

取消注释 config/puma.rb 的第 8 行：ENV['RAILS_RELATIVE_URL_ROOT'] = "/"

同样对于 config/gitlab.yml 中的第 23 行：relative_url_root:/

我根本不需要修改我的 nginx 配置就可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-09T06:22:24.710

对于旧版本，例如 gitlab 7.4.5 ，没有 gitlab-git-http-server (gitlab-workhorse)。但是 gitlab 7.4.5 有一些解决方案可以在文档中使用 suburi。

[配置/应用程序.rb](https://gitlab.com/gitlab-org/gitlab-ce/blob/7-4-stable/config/application.rb)

```
# Relative url support
# Uncomment and customize the last line to run in a non-root path
# WARNING: We recommend creating a FQDN to host GitLab in a root path instead of this.
# Note that following settings need to be changed for this to work.
# 1) In your application.rb file: config.relative_url_root = "/gitlab"
# 2) In your gitlab.yml file: relative_url_root: /gitlab
# 3) In your unicorn.rb: ENV['RAILS_RELATIVE_URL_ROOT'] = "/gitlab"
# 4) In ../gitlab-shell/config.yml: gitlab_url: "http://127.0.0.1/gitlab"
# 5) In lib/support/nginx/gitlab : do not use asset gzipping, remove block starting with "location ~ ^/(assets)/"
#
# To update the path, run: sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production
#
# config.relative_url_root = "/gitlab" 
```

[配置/gitlab.yml](https://gitlab.com/gitlab-org/gitlab-ce/blob/7-4-stable/config/gitlab.yml.example)

```
# WARNING: See config/application.rb under "Relative url support" for the list of
# other files that need to be changed for relative url support
# relative_url_root: /gitlab 
```

在 nginx 配置或 apache 配置文件中使用相同端口和相同域名配置 gitlab 7.4.5 与其他网站似乎仍然是一个挑战。我没有得到这个。我可以以 www.mydomain.com/gitlab 的身份访问 gitlab，但我没有在 www.mydomain.com 的另一个根目录中获得我的另一个网站。它应该通过配置 nginx 或 apache 来解决。希望熟悉nginx或apache的人能给出解决方案。

其他参考。[支持在相对 URL 路径或子目录中安装 GitLab #1950](https://github.com/gitlabhq/gitlabhq/issues/1950)

**编辑**
**它现在工作。**

stackoverflow 建议在这里使用 www.example.com 作为示例。

www.example.com/gitlab 访问 gitlab。

www.example.com 访问另一个网站，比如我的博客。

脚步：

1.  config/application.rb 文件：config.relative_url_root = "/gitlab"
2.  config/gitlab.yml 文件：relative_url_root: /gitlab
3.  config/unicorn.rb: ENV['RAILS_RELATIVE_URL_ROOT'] = "/gitlab"
4.  ../gitlab-shell/config.yml: gitlab_url:`"http://www.example.com/gitlab"`
5.  为 nginx 复制 lib/support/nginx/gitlab 到 gitlab.conf 并且不使用资产 gzipping，删除以`"location ~^/(assets)/"`
6.  运行：sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production

网址：

1.  config/gitlab.yml 文件：主机：example.com 端口：80
2.  config/unicorn.rb：听“127.0.0.1:9095”
3.  ../gitlab-shell/config.yml: gitlab_url: `http://www.example.com/gitlab`

gitlab 会给 git 两种访问方式：

1.  git@example.com:sample-project.git
2.  [http://example.com/gitlab/sample-project.git](http://example.com/gitlab/sample-project.git)

我没有使用 https。

如果你得到：

*   git@example.com/gitlab:sample-project.git
*   [http://example.com/gitlab/gitlab/sample-project.git](http://example.com/gitlab/gitlab/sample-project.git)

您可以配置`config/gitlab.yml`为`host: example.com/gitlab`. 只需删除`/gitlab`.

nginx配置文件：

```
###################################
##         configuration         ##
###################################
##

upstream gitlab {
  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket fail_timeout=0;
}

## Normal HTTP host
server {
  #listen *:80 default_server;
  listen *:80 default_server;
  server_name www.example.com; ## Replace this with something like gitlab.example.com
  server_tokens off; ## Don't show the nginx version number, a security best practice
  #root /home/git/gitlab/public;
  root html;
  location /{
    #root html;
    index index.html index.htm;
  }
  ## Increase this if you want to upload large attachments
  ## Or if you want to accept large git objects over http
  client_max_body_size 20m;

  ## Individual nginx logs for this GitLab vhost
  access_log  logs/example.gitlab_access.log;
  error_log   logs/example.gitlab_error.log;

  location /gitlab {
    alias /home/git/gitlab/public;

    ## Serve static files from defined root folder.
    ## @gitlab is a named location for the upstream fallback, see below.
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  ## If a file, which is not found in the root folder is requested,
  ## then the proxy passes the request to the upsteam (gitlab unicorn).
  location @gitlab {
    ## If you use HTTPS make sure you disable gzip compression
    ## to be safe against BREACH attack.
    # gzip off;

    ## https://github.com/gitlabhq/gitlabhq/issues/694
    ## Some requests take more than 30 seconds.
    proxy_read_timeout      300;
    proxy_connect_timeout   300;
    proxy_redirect          off;

    proxy_set_header    Host                $http_host;
    proxy_set_header    X-Real-IP           $remote_addr;
    proxy_set_header    X-Forwarded-For     $proxy_add_x_forwarded_for;
    proxy_set_header    X-Forwarded-Proto   $scheme;
    proxy_set_header    X-Frame-Options     SAMEORIGIN;

    proxy_pass http://gitlab;
  }

  ## Enable gzip compression as per rails guide:
  ## http://guides.rubyonrails.org/asset_pipeline.html#gzip-compression
  ## WARNING: If you are using relative urls remove the block below
  ## See config/application.rb under "Relative url support" for the list of
  ## other files that need to be changed for relative url support
  #location ~ ^/(assets)/ {
  #  root /home/git/gitlab/public;
  #  #gzip_static on; # to serve pre-gzipped version
  #  expires max;
  #  add_header Cache-Control public;
  #}

  error_page 502 /502.html;
} 
```

Apache(2.2.9) 配置文件：gitlab 6.0.6参考[gitlab.conf](https://gitlab.com/gitlab-org/gitlab-recipes/blob/apache-old/web-server/apache/gitlab.conf)和apache 2.2 上 gitlab 8.0.0参考[gitlab-8.0-apache2.2.conf](https://gitlab.com/gitlab-org/gitlab-recipes/blob/apache-old/web-server/apache/gitlab-8.0-apache2.2.conf)

```
#  Module dependencies
#  mod_rewrite
#  mod_proxy
#  mod_proxy_http
<VirtualHost *:80>

  ServerAdmin admin@example.com
  DocumentRoot "/data/webapp/www/wordpress"

  ServerName www.example.com
  ServerAlias example.com

  #ErrorLog "logs/wordpress-error_log"
  #CustomLog "logs/wordpress-access_log" common

    #SetEnv ZF2_PATH "/data/webapp/www/ZendFramework-2.3.3/library"
  SetEnv APPLICATION_ENV "development"
  <Directory /data/webapp/www/wordpress>
    DirectoryIndex index.php
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>

  #ServerName www.example.com
  ServerSignature Off

  ProxyPreserveHost On

  # Ensure that encoded slashes are not decoded but left in their encoded state.
  # http://doc.gitlab.com/ce/api/projects.html#get-single-project
  AllowEncodedSlashes NoDecode

  <Location /gitlab>
    Order deny,allow
    Allow from all

    ProxyPassReverse http://127.0.0.1:9095
    ProxyPassReverse http://www.example.com//

    RewriteEngine on
    #RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
    RewriteRule .* http://127.0.0.1:9095%{REQUEST_URI} [P,QSA,NE]
  </Location>

  #apache equivalent of nginx try files
  # http://serverfault.com/questions/290784/what-is-apaches-equivalent-of-nginxs-try-files
  # http://stackoverflow.com/questions/10954516/apache2-proxypass-for-rails-app-gitlab
  #  RewriteEngine on
  #  RewriteCond /code/gitlab/{REQUEST_FILENAME} !-f
  #  RewriteRule .* http://127.0.0.1:9095%{REQUEST_URI} [P,QSA,NE]

  # needed for downloading attachments
  #DocumentRoot /home/git/gitlab/public
  Alias /gitlab /home/git/gitlab/public
  #Set up apache error documents, if back end goes down (i.e. 503 error) then a maintenance/deploy page is thrown up.
  ErrorDocument 404 /404.html
  ErrorDocument 422 /422.html
  ErrorDocument 500 /500.html
  ErrorDocument 503 /deploy.html

  LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b" common_forwarded
  ErrorLog  logs/example.com_error.log
  CustomLog logs/example.com_forwarded.log common_forwarded
  CustomLog logs/example.com_access.log combined env=!dontlog
  CustomLog logs/example.com.log combined

</VirtualHost> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T09:19:32.223

你解决了这个问题了吗？

如果没有，请尝试将`location /`指令更新为：

```
location /gitlab {
  # serve static files from defined root folder;.
  root /home/gitlab/gitlab/public;
  # @gitlab is a named location for the upstream fallback, see below
  try_files $uri $uri/index.html $uri.html @gitlab;
} 
```

如果这不起作用，请粘贴`/var/log/nginx/gitlab_error.log`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T17:57:04.243

此配置有效

```
# GITLAB
# Maintainer: @randx
# App Version: 3.0

upstream gitlab {
  server unix:/home/gitlab/gitlab/tmp/sockets/gitlab.socket;
}

server {
  listen 80;         # e.g., listen 192.168.1.1:80; 37.59.125.28:
  server_name gitlab.<YOUR_DOMAIN>.com;     # e.g., server_name source.example.com;
  root /home/gitlab/gitlab/public;

  # individual nginx logs for this gitlab vhost
  access_log  /var/log/nginx/gitlab_access.log;
  error_log   /var/log/nginx/gitlab_error.log;

  location / {
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  # if a file, which is not found in the root folder is requested,
  # then the proxy pass the request to the upsteam (gitlab unicorn)
  location @gitlab {
    proxy_read_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
    proxy_redirect     off;

    proxy_set_header   X-Forwarded-Proto $scheme;
    proxy_set_header   Host              $http_host;
    proxy_set_header   X-Real-IP         $remote_addr;

    proxy_pass http://gitlab;
  }
} 
```

而且我在 nginx 可用配置和启用配置之间有一个错误的符号链接。

# c# - 为调用宿主程序中定义的静态函数的 c# 应用程序创建扩展

> ID：13232529
> 
> 赞同：0
> 
> 时间：2012-11-05T12:53:25.500
> 
> 标签：c#

我想为扩展创建引擎，现在我有一个名为“模块”的基本类，其中包含许多虚函数，每个扩展都是一个继承“模块”并用自己的代码覆盖函数（主要是钩子）的类。

我希望能够将这些扩展放在单独的二进制文件中并“即时”加载它。

我创建了一个简单的处理程序来加载这些插件：

```
 public static bool LoadMod(string path)
    {
        try
        {
            if (File.Exists(path))
            {
                System.Reflection.Assembly library = System.Reflection.Assembly.LoadFrom(path);
                if (library == null)
                {
                    Program.Log("Unable to load " + path + " because the file can't be read", true);
                    return false;
                }
                Type[] types = library.GetTypes();
                Type type = library.GetType("wmib.RegularModule");
                Type pluginInfo = null;
                foreach (Type curr in types)
                {
                    if (curr.IsAssignableFrom(type))            
                    {
                        pluginInfo = curr;
                        break;
                    }
                }
                if (pluginInfo == null)
                {
                    Program.Log("Unable to load " + path + " because the library contains no module", true);
                    return false;
                }
                Module _plugin = (Module)Activator.CreateInstance(pluginInfo);
                return true;
            }
        }
        catch (Exception fail)
        {
            core.handleException(fail);
        }
        return false;
    } 
```

我的问题是这些模块正在调用我在主机应用程序中拥有的静态类中的函数。是否可以在扩展的源代码中创建这个静态类的一些“骨架”？我尝试在第二个源代码中使用具有相同名称和参数的空函数创建类，但这由于某种原因不起作用（每次我尝试加载它时，我都会得到：调用的目标已抛出异常。 mscorlib 在 System.Reflection.MonoCMethod.Invoke）

这是我希望能够做的示例：

有一个宿主应用程序包含扩展处理程序和一些自己的静态函数。宿主应用程序从二进制文件加载模块并将其插入到一些模块数组中（这是在每个继承“模块”的类的构造函数中完成的。这个模块包含一些调用宿主应用程序静态函数的函数。什么我需要做的是能够调用在主机应用程序的源代码中定义的静态函数，即使在不包含静态函数代码的插件源代码中。我希望它清楚一点:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:27:20.817

好的，实际上并没有我想的那么难，我只是将主机二进制文件引用到扩展，它启用了扩展中的所有静态元素和主机类。

# java - 如何在 Java 中测试我的 Deck 类

> ID：13232531
> 
> 赞同：0
> 
> 时间：2012-11-05T12:53:29.757
> 
> 标签：java, blackjack

我想打印我的 ArrayList FullDeckArray 以查看我的 Deck 是否包含所有 52 张卡片和值。

这是我下面的卡片和甲板课程

```
package blackjack;

/**
 *
 * @author mvisser
 */
public class Card 
{

   private int rank;
   private int suit;

   public String tostring(Card card1)
   {

      String result = "";

      if (rank == 1) {
          result = "Ace";
      }
      if (rank == 2) {
          result = "Two";    
      }
      if (rank == 3) {
          result = "Three";

      }
      if (rank == 4) {
          result = "Four";   
      }
      if (rank == 5) {
          result = "Five";

      }
      if (rank == 6) {
          result = "Six";

      }
      if (rank == 7) {
          result = "Seven";

      }
      if (rank == 8) {
         result = "Eight";      
      }
      if (rank == 9) {
         result = "Nine";  
      }
      if (rank == 10) {
         result = "Ten";     
      }
      if (rank == 11) {
         result = "Jack";     
      }
      if (rank == 12) {
            result = "Queen";   
      }
      if (rank == 13) {
            result = "King";     
      }
      if (suit == 1) {
          result = result + " of Clubs ";
      }
      if (suit == 2) {
         result = result + " of Diamonds ";
      }
      if (suit == 3) {
          result = result + " of Hearts ";
      }
      if (suit == 4) {
          result = result + " of Spades ";
      }

      return result;

   }

   public Card(int rank, int suit) 
   {
        this.rank = rank;
        this.suit = suit;    
   }
} 
```

正如您在我的 Deck Class 中看到的那样，我有一个 ArrayList FullDeckArray，我要做的就是将
它打印出来，看看带来了什么价值

```
public class Deck 
{
//     private Card[][] fullDeck = new Card[0][0];
     private Random shuffle = new Random();
     public ArrayList<Card> FullDeckArray = new ArrayList<Card>();

//     private int numberOfCards = 52;

   public Deck()
   {

    for (int rank = 1; rank <= 13; rank++) {

            for (int suit = 1; suit <= 4; suit++)
            {
               FullDeckArray.add(new Card(rank, suit));

            }
        }
   }        

    public void shuffle() {
        Collections.shuffle(FullDeckArray);   
    }

    public Card DrawCard() {
        int cardPosition = shuffle.nextInt(FullDeckArray.size()+1);
        return FullDeckArray.remove(cardPosition);
    }

     public int TotalCards() {
            return FullDeckArray.size();
     }

     public void test() {
            System.out.println( ArrayList<Card>( FullDeckArray ) );
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:04:02.153

我会使用枚举，并且使用该`enum.values()`方法，您可以轻松地遍历枚举的所有值。

```
public class Card {
    public enum Rank { 
        ACE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING;
        public String toString() {
            switch(this) {
            case ACE: return "Ace";
            case TWO: return "Two";
            case THREE: return "Three";
            case FOUR: return "Four";
            case FIVE: return "Five";
            case SIX: return "Six";
            case SEVEN: return "Seven";
            case EIGHT: return "Eight";
            case NINE: return "Nine";
            case TEN: return "Ten";
            case JACK: return "Jack";
            case QUEEN: return "Queen";
            case KING: return "King";
            default: return "ERROR: no valid rank"; 
            }
        }
    }
    public enum Suit { 
        CLUBS, DIAMONDS, HEARTS, SPADES;
        public String toString() {
            switch(this) {
            case CLUBS: return "Clubs";
            case DIAMONDS: return "Diamonds";
            case HEARTS: return "Hearts";
            case SPADES: return "Spades";
            default: return "ERROR: no valid suit";
            }
        }
    }
    private Rank rank;
    private Suit suit;

    public Card(Rank rank, Suit suit) {
        this.rank = rank;
        this.suit = suit;
    }

    public String toString() {
        return rank.toString() + " of " + suit.toString();
    }

    public boolean equals(Object other) {
        if (!(other instanceof Card)) return false;
        Card card = (Card) other;
        if (card.rank == this.rank && card.suit == this.suit) return true;
        return false;
    }
} 
```

在您的套牌课程中，您可以使用这个简单的循环添加所有卡片：

```
public void fill() {
    for (Rank rank : Card.Rank.values()) {
        for (Suit suit : Card.Suit.values()) {
            Card card = new Card(rank, suit)
            cards.add(card);
            System.out.println(card.toString());
        }
    }
} 
```

你的甲板类的其余部分，你可以维护。

如果要检查仅添加一次的卡片，可以使用 HashSet，因为在集合中，对象只能出现一次（但您需要`equals()`方法）：

```
HashSet<Card> set = new HashSet<Card>(cards);
cards = new ArrayList<Card>(set); 
```

之后，您可以使用“cards.size()”检查大小。

更新：这里有一些代码用于规避 Card 中数组的使用和规避枚举：

```
public class Deck {
    private Random shuffle = new Random();
    public ArrayList<Card> fullDeck = new ArrayList<Card>();

    public Deck() {
        for (int rank = 1; rank <= 13; rank++) {
            for (int suit = 1; suit <= 4; suit++) {
                fullDeck.add(new Card(rank, suit));
            }
        }
    }

    public void print() {
        String deckOutput = "";
        for (Card card : fullDeck) {
            deckOutput += card.toString() + "\n";
        }
        System.out.println(deckOutput);
    }

    public static void main(String[] args) {
        Deck deck = new Deck();
        deck.print();
    }
} 
```

对于 Card，使用这个：

```
public class Card {
    private int rank;
    private int suit;

    public Card(int rank, int suit) {
        this.rank = rank;
        this.suit = suit;
    }

    public String toString() {
        String Srank = "", Ssuit = "";
        switch(rank) {
            case 1: Srank = "Ace"; break;
            case 2: Srank = "Two"; break;
            case 3: Srank = "Three"; break;
            case 4: Srank = "Four"; break;
            case 5: Srank = "Five"; break;
            case 6: Srank = "Six"; break;
            case 7: Srank = "Seven"; break;
            case 8: Srank = "Eight"; break;
            case 9: Srank = "Nine"; break;
            case 10: Srank = "Ten"; break;
            case 11: Srank = "Jack"; break;
            case 12: Srank = "Queen"; break;
            case 13: Srank = "King"; break;
        }
        switch(suit) {
            case 1: Ssuit = "Clubs"; break;
            case 2: Ssuit = "Diamonds"; break;
            case 3: Ssuit = "Hearts"; break;
            case 4: Ssuit = "Spades"; break;
        }
        return Srank + " of " + Ssuit;
    }
} 
```

要进行测试，您仍然可以使用上述 HashMap/ArrayList 方法（仅当您在 Card 中也实现 equals 方法时）并检查`fulldeck.size()`是否有 52 张卡片（由于 HashMap，这将完全不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:09:20.373

有两种方法可以做到这一点：静态和动态测试。静态更简单，更不容易出错，但它不能是为了任何其他目的而执行的操作，除了简单地验证程序的这部分是否正常工作，然后再继续其余部分。动态测试稍微复杂一些，但是您可以在需要时测试一个卡片组（当用户以某种方式修改卡片组并且您必须对其进行验证时）。

## 静态测试

静态测试方法和最简单的方法是打印出一副牌中的所有卡片并手动验证。为此，您首先必须进行添加和更正。首先，您应该将类​​中`tostring`方法的签名修改为不带参数的“”。这会覆盖自动将对象转换为字符串的对象方法。其次，你需要在你的类中重写：`Card``toString()``toString()``toString()``Deck`

```
@Override
public void toString() {
    StringBuilder sb = new StringBuilder();
    for(Card card : FullDeckArray) {
        sb.append(card);  // calls Card class's toString() method automatically.
        sb.append('\n');  // newline character after each card
    }
    return sb.toString();
} 
```

现在您所要做的就是使用 Deck 的 toString() 方法。

```
public void test() {
    System.out.println(this);  // calls Deck class's toString() method automatically
} 
```

## 动态测试

动态测试它有点复杂，但没那么复杂。要对此进行测试，您将如何手动进行？你会寻找丢失的卡片或重复的卡片。测试这些东西的一个好方法是集合。但是在你可以使用 Sets 之前，你必须首先重写`hashCode()`和`equals()`方法来重新定义 Card 类如何被认为是唯一的。仅当等级和花色都匹配时，一张牌才等于另一张牌。

因此，将这些添加到您的 Card 类中：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + rank;
    result = prime * result + suit;
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Card other = (Card) obj;
    if (rank != other.rank)
        return false;
    if (suit != other.suit)
        return false;
    return true;
} 
```

现在我们有了它，我们继续实际的逻辑。一个简单的测试会是这样的：

```
For each card in your deck
    If card is not in set
        Add card to set
    Else
        Flag not valid!  Duplicate card!

If set does not have exactly 52 cards
    Flag not valid!  Extra or missing cards! 
```

因此，代码自然会变成：

```
 public boolean test() {
      boolean valid = true;
      Set<Card> cardSet = new HashSet<Card>();
      for(Card card : FullDeckArray) {
          if(!cardSet.contains(card)) {
              cardSet.add(card);
          } else {
              valid = false;
          }
      }
      if(cardSet.size() != 52) {
         valid = false;
      }
      return valid;
  } 
```

此外，[您应该在这里寻找使用 enums](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。除了使代码更具可读性之外，它还允许您像类一样添加方法，并且像类一样添加`toString()`方法。另请参阅[jUnit](http://www.junit.org/)以获得一个不错的 Java 测试库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:22:00.400

您应该覆盖您的 tostring 方法，例如：

```
@override
public String toString(Card card1){
.....
} 
```

并且应该只将数组列表名称传递给 System.out.println()。不需要数组列表的类型。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T12:57:58.617

你应该试试这个

```
public class DeckTest{
    public static void main(String []args){
        System.out.println(new Deck().FullDeckArray);
    }
} 
```

你的`Card`课程应该像下面的代码

```
 public class Card 
    {

       private int rank;
       private int suit;

       public String tostring()
       {

          String result = "";

          if (rank == 1) {
              result = "Ace";
          }
          if (rank == 2) {
              result = "Two";    
          }
          if (rank == 3) {
              result = "Three";

          }
          if (rank == 4) {
              result = "Four";   
          }
          if (rank == 5) {
              result = "Five";

          }
          if (rank == 6) {
              result = "Six";

          }
          if (rank == 7) {
              result = "Seven";

          }
          if (rank == 8) {
             result = "Eight";      
          }
          if (rank == 9) {
             result = "Nine";  
          }
          if (rank == 10) {
             result = "Ten";     
          }
          if (rank == 11) {
             result = "Jack";     
          }
          if (rank == 12) {
                result = "Queen";   
          }
          if (rank == 13) {
                result = "King";     
          }
          if (suit == 1) {
              result = result + " of Clubs ";
          }
          if (suit == 2) {
             result = result + " of Diamonds ";
          }
          if (suit == 3) {
              result = result + " of Hearts ";
          }
          if (suit == 4) {
              result = result + " of Spades ";
          }

          return result;

       }

       public Card(int rank, int suit) 
       {
            this.rank = rank;
            this.suit = suit;    
       }
    } 
```

# c# - 从 dataGridView 到 TextBox，取 headername

> ID：13232534
> 
> 赞同：2
> 
> 时间：2012-11-05T12:53:37.073
> 
> 标签：c#, datagridview, textbox, header

我有一个关于从 dataGridView 转换为文本框的问题。我想在看到 x 时将其替换为 Headername

我在这里有dataGridview：

```
Name   A    B    C    D    ...
kiki   x         x         ...  
lola        x              ...
maja   x         x    x    ... 
```

我想在我的文本框中：

```
kiki A,C    ...
lola B      ...
maja A,C,D  ... 
```

我认为我的代码看起来像这样；

```
string abc = "";
for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
    {
    for (int j = 1; i < dataGridView1.Columns.Count - 1; i++)
        {

            if(dataGridView1.Rows[i].Cells[j].Value.ToString() != "x")
               abc = dataGridView1.Columns[j].HeaderText.ToString();               

            richTextBox1.Text += dataGridView1.Rows[i].Cells["Name"].Value.ToString() + " " + abc;
            //or something like that, can some1 give me a key?  
        } 
    } 
```

有人可以帮我吗？不知道怎么做，请给我任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:28:48.873

这应该适合你。此代码将所有内容放入一个多`richTextBox`行中，并且每一行都添加到一个新行中：

```
 for (int i = 0; i < dataGridView1.Rows.Count-1; i++)
        {
            string text = dataGridView1.Rows[i].Cells["Name"].Value.ToString() + " " ;
            bool added = false;
            for (int j = 1; j < dataGridView1.Columns.Count; j++)
            {

                if (dataGridView1.Rows[i].Cells[j].Value.ToString() == "x")
                {
                    text += dataGridView1.Columns[j].HeaderText.ToString() + ",";
                    if (!added)
                        added = true;
                }
            }
            if(added)
            {
                text = text.Remove(text.Length - 1); //to remove ',' at the end
            }
            richTextBox1.Text += text + Environment.NewLine; //add to richTextbox1 with newline
        } 
```

# django - Django 和 tinymcs：使用 external_image_list_url 获取图像文件列表

> ID：13232538
> 
> 赞同：2
> 
> 时间：2012-11-05T12:53:49.117
> 
> 标签：django, tinymce

我正在尝试让 external_image_list_url 与 tinymcs 和 Django 一起使用。我的理解是，当单击图像图标（带有树的图标）时，用户将能够看到他或她的图像列表。从这里可以选择和插入图像。

我是对的，它是带有树的图标吗？这就是所谓的“形象”。名为“insertimage”的那个根本不起作用 - 不显示图标。它和 insertfile 是唯一不显示的。除非我需要它来实现此列表功能，否则我对此表示满意。

首先，我试图让任何图像出现在列表中。我做了以下事情：

创建 myexternallist.js 并将其放置在我保存其他 JS 文件的位置。由于我的 django 设置，我可以通过 src = "/media/js/filename.js" 访问这些其他文件。但这也是我应该提出的：

```
tinyMCE.init({
    external_image_list_url : "/media/js/myexternallist.js",
    ... }) 
```

在这个文件中它说：

```
var tinyMCEImageList = new Array(["Logo 1", "/media/js/photo.jpg"],); 
```

photo.jpg 与 myexternallist.js 位于同一文件夹中

我也尝试过“photo.jpg”和其他各种组合。不确定我的问题是否与我的相对路径或其他完全有关。我不确定绝对路径应该是什么。现在我正在使用本地主机，但并不总是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:12:22.237

解决了，呵呵。问题是“var tinyMCEImageList =...”行末尾附近的逗号

现在它适用于以 /media 开头的相对 url

线索是由 Firebug 控制台提供的，它向我显示了 js 错误。我只是碰巧点击了那里，但从现在开始会经常使用它！

# ajax - 使用 ajax 加载图像（在 rails 中）

> ID：13232540
> 
> 赞同：0
> 
> 时间：2012-11-05T12:53:53.287
> 
> 标签：ajax, ruby-on-rails-3, image

> **可能重复：**
> [jquery .ajax 可以加载图像吗？](https://stackoverflow.com/questions/4285042/can-jquery-ajax-load-image)

有没有办法：

通过 ajax 请求加载图像

或者

在图像完全加载之前，放置一个加载图标而不是图像应该位于的位置（或其他占位符）？

# sugarcrm - 如何删除 SugarCRM Web 服务中的条目/关系

> ID：13232542
> 
> 赞同：4
> 
> 时间：2012-11-05T12:53:56.267
> 
> 标签：sugarcrm

SugarCRM Web 服务 API 仅提供**设置**和**获取**条目/关系的方法。

如何**删除/删除**条目及其与其他相关模块中的条目的关系？

Web 服务 API 是否仅为 Get 和 Set 设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:38:42.877

您可以在 set_entry/set_entries 调用中将“已删除”标志设置为“1”作为“名称值列表”中的字段之一，它会将记录标记为已删除。

[http://gist.github.com/4019840](http://gist.github.com/4019840)

对于关系，您可以使用 set_relationship/set_relationships 并将第 7 个参数的参数“1”传递给该调用将删除关系而不是添加它们。

[http://gist.github.com/4019851](http://gist.github.com/4019851)

# c# - 检查文件夹是否存在 c# webrequest

> ID：13232543
> 
> 赞同：1
> 
> 时间：2012-11-05T12:54:05.903
> 
> 标签：c#, sharepoint, httpwebrequest

我正在使用它在现有的共享点位置创建一个文件夹。有没有办法在创建之前检查文件夹是否存在，而不是使用 try/catch 来找出这个方法失败然后假设文件夹存在？我已经检查了 webrequest 方法，但没有这样的检查。

```
try
{
    HttpWebRequest request = (System.Net.HttpWebRequest)HttpWebRequest.Create("https://site.sharepoint.com/files/"+foldername);
    request.Credentials = CredentialCache.DefaultCredentials;
    request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
    request.Method = "MKCOL";
    HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
    response.Close();
}
catch (Exception ex) 
{ 
    //if this piece fails the folder exists already 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:14:56.923

你可以使用[SPWeb.GetFolder 方法](http://msdn.microsoft.com/en-us/library/ms461547.aspx)

```
private bool CheckFolderExists(SPWeb parentWeb, string folderName) {
    SPFolder folder = parentWeb.GetFolder(folderName);
    return folder.Exists;
} 
```

参考： http: [//mundeep.wordpress.com/2009/02/24/checking-if-a-spfolder-exists/](http://mundeep.wordpress.com/2009/02/24/checking-if-a-spfolder-exists/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T13:07:31.517

```
public void CheckWebFoldersExist()
 {
  try
   {
    WebClient client = new WebClient();
    client.Credentials = CredentialCache.DefaultCredentials;
    // Create a request for the URL.         
    WebRequest request = WebRequest.Create("myAddress");

    // If required by the server, set the credentials.
    request.Credentials = CredentialCache.DefaultCredentials;

    // Get the response.
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    //check response status
    if (string.Compare(response.StatusDescription, "OK", true) == 0)
    { 
       //URL exists so that means folder exists
    }
    else
    {
        //URL does not exist so that means folder does not exist
    }
  }
   catch (Exception error)
   {
      //error catching
   }

} 
```

# eventmachine - 我可以在 Cloud Foundry 中使用 EventMachine 吗？

> ID：13232544
> 
> 赞同：0
> 
> 时间：2012-11-05T12:54:05.627
> 
> 标签：eventmachine, cloud-foundry

当我启动一个使用 EventMachine 的程序时，无论成功与否，vmc start 都不会返回。似乎只是时间到了。

但是，我确实在我的日志文件中看到“服务器已启动”。所以我想知道在云铸造中使用 EventMachine 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:54:28.470

Eventmachine 确实在 Cloud Foundry 中工作，它依赖于 Thin，如果包含在项目中，它可以用于服务 Rack / Rails 应用程序。

# cursor - 光标在视觉上到位，但在功能上不是

> ID：13232548
> 
> 赞同：1
> 
> 时间：2012-11-05T12:54:14.987
> 
> 标签：cursor, tinymce

我的光标就在我的文本编辑器中需要的位置 - 视觉上。当我继续从键盘输入时 - 没有显示任何内容。光标在浏览器中（当我按键盘上的上下箭头键时 - 浏览器页面向上/向下移动）。我需要单击文本编辑器才能继续输入。即使光标在文本编辑器中可见并闪烁。我使用tinymce 和ie9。（我使用 ie9 只是为了测试，我没疯）。

当我执行时：

```
document.activeElement 
```

它返回 iframe 元素具有焦点，而不是文本区域。

# jakarta-ee - 在 Web 应用程序中显示外部图像

> ID：13232549
> 
> 赞同：1
> 
> 时间：2012-11-05T12:54:13.537
> 
> 标签：jakarta-ee, fileinputstream

我们的应用程序显示一个外部图像（客户端徽标），该图像特定于多租户环境中的每个客户端。图像文件的位置在运行时动态确定，图像流（以字节为单位）在 servlet 中传输到浏览器的输出流。如下所示

```
private void sendFileToDownload(HttpServletResponse resp) throws IOException {
    InputStream inputStream = new BufferedInputStream(new FileInputStream(fileNameWitPath));
    OutputStream outputStream = resp.getOutputStream();
    resp.setContentLength((int) inputStream.getLength());
    try {
        writeFileToOutput(inputStream, outputStream);
    } finally {
        finalize(inputStream, outputStream);
    }
}

private void writeFileToOutput(InputStream inputStream, OutputStream outputStream) throws IOException {
    byte[] b = new byte[32 * 1024];
    int count;
    while ((count = inputStream.read(b)) != -1) {
        outputStream.write(b, 0, count);
    }
}

private void finalize(InputStream inputStream, OutputStream outputStream) throws IOException {
    try {
        outputStream.flush();
    } catch (IOException e) {
        logger.debug("IOException was caught while flushing the output stream.", e);
    }
    inputStream.close();
} 
```

在负载测试中，我们发现当多个线程 (~300) 执行相同的操作时，打开和关闭文件是昂贵的操作。尤其是 FileInputStream 构造函数的执行。

我想了解在 java ee Web 应用程序中显示外部图像的替代方法。

请注意，出于安全原因，我们不能在 img html 标记的 src 属性中给出图像的路径。客户端浏览器将无权访问外部图像位置。只有应用程序服务器可以访问它。

# php - 想象一下：用面具作曲

> ID：13232551
> 
> 赞同：16
> 
> 时间：2012-11-05T12:54:17.130
> 
> 标签：php, transformation, mask, imagick, composite

我尝试重新创建一个使用 ImageMagick 命令“转换”来组成图像的脚本。但我想使用 Imagick（版本 6.6.2-10）在 PHP 中做同样的事情。

命令如下：

```
convert A1.mpc A3.mpc A4.mpc -channel rgba -alpha on -virtual-pixel background -background none -define compose:args=312x26.6776 -compose displace -composite out.mpc 
```

我发现参数代表以下内容：

```
convert  {background} {overlay} [{mask}] [-compose {method}] -composite {result} 
```

PHP Imagick 给了我一个 compose 方法，但没有掩码参数：[http ://www.php.net/manual/en/imagick.compositeimage.php](http://www.php.net/manual/en/imagick.compositeimage.php)

我发现[了另一个问题](https://stackoverflow.com/questions/8699228/how-to-use-imagick-to-merge-and-mask-images)并尝试了这个（但不会产生相同的图像）：

```
// load images
$a1 = new Imagick('a1.png');
$a3 = new Imagick('a3.png');
$a4 = new Imagick('a4.png');

// mask the overlay
$a1->compositeImage($a4, Imagick::COMPOSITE_DSTIN, 0, 0, Imagick::CHANNEL_ALPHA);

// compose overlay to background
$a1->setImageVirtualPixelMethod(Imagick::VIRTUALPIXELMETHOD_BACKGROUND);
$a1->setImageBackgroundColor(new ImagickPixel('none'));
$a1->setOption('compose:args', '312x26.6776');
$a1->compositeImage($a3, Imagick::COMPOSITE_DISPLACE, 0, 0); 
```

所以我的问题是：这是使用蒙版构图的正确方法吗？或者这里有什么问题？

为了帮助可视化我想要做的事情，这里有一些输入图像：

输入图像 a1（背景）：

![a1](../Images/6fd715417b862ccdccf1b1f03629e644.png)

输入图像 a3（叠加）：

![a3](../Images/4a02dda7b3b18090780735d2a442823a.png)

输入图像 a4（掩码）：

![a4](../Images/6f0a4e6cdf6f4d173f84b13a7a156e10.png)

我想要的结果是：

![正确的输出](../Images/25552a0c4e682fb8ba2061b7a3d6074f.png)

我的 php 代码创建了什么：

![错误的输出](../Images/3b68bd1ff6b2633f445eef935c39199a.png)

提前致谢！迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:46:01.553

尝试使用 CompositeImage 方法和 Imagick::COMPOSITE_COPYOPACITY

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-30T06:16:21.990

我不知道这是否有帮助，但我在 ImageMagick 6.9.10.62 和 6.9.10.5 Q16 Mac OSX 中处理了您的图像，结果相同，如下所示。

因此，如果有问题，很可能与 Imagick 相关。

您的 6.9.10.x 的确切版本是什么？

```
convert img.png \
\( dx.png dy.png dy.png -combine \) \
-define compose:args=312x26.6776 -compose displace -composite \
result.png 
```

[![在此处输入图像描述](../Images/f04c99b85cd193a978db686b7085dc4c.png)](https://i.stack.imgur.com/RBUzu.png)

我注意到，如果为 dy 组合相同的图像 dx，那么我得到的结果类似于你的坏结果。这可能意味着 addImage 或 flattenImage 或 combineImage 在您的新 Imagick 中无法正常工作。

```
convert img.png \
\( dx.png dx.png dy.png -combine \) \
-define compose:args=312x26.6776 -compose displace -composite \
result2.png 
```

[![在此处输入图像描述](../Images/9cb5ef8f2f74be690950205822c80300.png)](https://i.stack.imgur.com/FBYNq.png)

检查您的代码以确保您的 addImage 中没有使用 $a3、$a3 和 $a3 或 $a4 的拼写错误。

对于测试，尝试 PHP

```
exec("convert img.png \( dx.png dy.png dy.png -combine \) -define compose:args=312x26.6776 -compose displace -composite result.png") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-26T09:46:05.143

试试这个代码：

```
// x-displacement
$a3->setImageArtifact('compose:args', "312x0");
$a1->compositeImage($a3, Imagick::COMPOSITE_DISPLACE, 0, 0);

// y-displacement
$a4->setImageArtifact('compose:args', "0x26.6776");
$a1->compositeImage($a4, Imagick::COMPOSITE_DISPLACE, 0, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-21T12:24:23.827

在为此苦苦挣扎之后，我终于找到了一种使用 PHP-Imagick 正确执行此操作的方法。

```
// merge x-displacement and y-displacement into one displacement-map
$displaceMask = new Imagick();
$displaceMask->addImage($a3);
$displaceMask->addImage($a4);
$displaceMask->addImage($a4);
$displaceMask->flattenImages();
$displaceMask = $displaceMask->combineImages(Imagick::CHANNEL_ALL);

$displaceMask->setImageArtifact('compose:args', '312x26.6776');
$a1->compositeImage($displaceMask, Imagick::COMPOSITE_DISPLACE, 0, 0); 
```

我使用的资源：

*   [https://github.com/mkoppanen/imagick/issues/49](https://github.com/mkoppanen/imagick/issues/49)
*   [https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26323](https://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=26323)
*   [使用 ImageMagick (php) 将 RGB 通道合并回单个图像](https://stackoverflow.com/questions/10837436/merging-rgb-channels-back-into-a-single-image-with-imagemagick-php)
*   [https://imagemagick.org/script/command-line-options.php#combine](https://imagemagick.org/script/command-line-options.php#combine)

# python - 在 Python 中调试执行的 Sql

> ID：13232555
> 
> 赞同：0
> 
> 时间：2012-11-05T12:54:44.613
> 
> 标签：python, sql

我在python中执行一些sql如下

```
statement = "select * from TEST_TABLE"
debug("Statement: %s" % (statement, ))
cursor = gblDBConnection.cursor()
cursor.execute(statement) 
```

我可以使用我编写的调试函数来调试语句，但也想调试返回的实际值，即在 sql 执行之后。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:56:40.163

```
statement = "select * from TEST_TABLE"
cursor = gblDBConnection.cursor()
values = cursor.execute(statement)
debug(values) 
```

?

# php - 如何使用 php 将时区字符串转换为标准时区格式

> ID：13232559
> 
> 赞同：1
> 
> 时间：2012-11-05T12:54:55.780
> 
> 标签：php, string, date, time, timezone

**嗨，伙计们，**

我有一个时区**字符串**，例如：

`Mon Nov 05 2012 06:54:06 GMT-0600 (Central America Standard Time)`

需要使用**php将这些字符串转换为以下****标准时区格式**

 **`(GMT-06:00)-Central America`

**代码**：

```
echo $tz = "Mon Nov 05 2012 06:54:06 GMT-0600 (Central America Standard Time)";

echo $tz2 = substr($tz, 0, 34);

echo date("P", strtotime("$tz2")); 
```

**结果**：

```
Mon Nov 05 2012 06:52:37 GMT-0600 (Central Standard Time)

Mon Nov 05 2012 06:52:37 GMT-0600

+00:00 
```

尝试参考：***[日期](http://php.net/manual/en/function.date.php)***

但不会产生这种格式。现在需要帮助的朋友，谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:08:23.283

新编辑 - 试试这个...

```
$tz = "Mon Nov 05 2012 06:54:06 GMT-0600 (Central America Standard Time)";

$time = explode(" ",$tz);
$timezone = explode("(", str_replace(")","",$tz)); // would be better to use a regex
$new_time = "(".$time[5].")-".$timezone[1];

echo $new_time;  // gives (GMT-0600)-Central America Standard Time 
```

退出前的旧代码.....

```
$tz = "Mon Nov 05 2012 06:54:06 GMT-0600 (Central America Standard Time)";
$new_time = strtotime($tz);

$new_date = date( '(P)-e', $new_time );
echo $new_date; 
```

(-05:00)-America/New_York

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:06:59.440

`echo date("P", strtotime("$tz2"));`

回声

`GMT-0600`

恐怕该地区的名称不可用。**

# c# - 在不再存在的临时 asp.net 文件中生成的类型

> ID：13232560
> 
> 赞同：3
> 
> 时间：2012-11-05T12:54:58.087
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个 MVC 3 项目已经开始给我一个构建错误

```
The type or namespace name 'ActivityItemViewModel' could not be found (are you missing a using directive or an assembly reference?) 
```

此错误来自 ASP.net 临时文件

它似乎引用了项目中不再存在的类型。这种类型很久以前就被删除了，从那时起，该应用程序已经多次构建/发布。

```
 public class views_activities_activityfeeditem_ascx : System.Web.Mvc.ViewUserControl<ActivityItemViewModel> 
```

视图或视图模型都不存在了。

我认为临时文件已损坏并删除了它们，这在我第一次重建时有效，但在那之后我得到了同样的错误。

我试过了。

*   清洁解决方案和重建
*   删除临时 asp.net 文件（普通和 64 位）
*   停止 IIS/清理删除并重建 启动 IIS
*   以及上述组合的负载

这是第一次工作，但现在我每次都收到错误。不确定 asp.net 如何获得对这些类型的引用？

任何有关调试此问题的帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:02:48.797

找到解决方案。

无奈之下，我决定添加一个视图和模型来使用这些名称进行项目。TFS 说我不能因为文件已经存在。该文件不在文件系统或 TFS 资源管理器中。我删除了本地项目并获得了最新的文件，该文件在文件系统上。我删除了文件，这一切都对你 TFS 有用！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T15:03:27.660

在类的顶部，您必须有一个视图的路径。检查该视图是否有任何错误。发生在我身上，我错误地在 using 语句之前引入了字符，在尝试检索模型时出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-19T02:48:51.910

**我试过了。**

1.  卸载/重新加载项目。
2.  清洁/重建解决方案和
3.  项目中的 bin/obj

**这个工作。**

# java - IPN 在 payflow pro 中可用吗？

> ID：13232561
> 
> 赞同：3
> 
> 时间：2012-11-05T12:55:01.790
> 
> 标签：java, paypal, payflowpro

paypal 通知 [IPN] 也可用于 payflow pro sdk 吗？- 如果定期付款失败怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T07:50:02.773

PayPal 确认没有可用于 PayFlow pro Recurring Payment 的 IPN 服务。您可以使用 INQUIRY 操作来了解个人资料状态和付款详情。

# java - 是否有工具可以获取项目的每个 JUnit 测试的代码覆盖率？

> ID：13232563
> 
> 赞同：1
> 
> 时间：2012-11-05T12:55:07.467
> 
> 标签：java, junit, code-coverage

有人知道如何获取项目（或文件）中每个 JUnit 测试所涵盖的 Java 代码的报告吗？

我对 JaCoCo 很感兴趣，但它不会逐个处理测试。

如果有人已经对此进行了研究，我很想知道您发现的有趣方式。也许有人用 JaCoCo 成功地做到了，我很想知道是怎么做的，因为我对这项技术很迷茫......

# java - 如何使用 WebDriver 接受/关闭未处理的警报？

> ID：13232565
> 
> 赞同：0
> 
> 时间：2012-11-05T12:55:18.197
> 
> 标签：java, selenium, webdriver, selenium-webdriver

如何使用 WebDriver 单击接受/关闭未处理的警报？

是否可以检查未处理警报的来源？

如何使用 UNEXPECTED_ALERT_BEHAVIOUR 功能？它没有按我的预期工作？

我试过这样

```
DesiredCapabilities dc = DesiredCapabilities.firefox();
dc.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR, "Accept"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:36:05.123

试试这个代码：

```
WebDriver driver;
@BeforeClass
public void setUp() {

    DesiredCapabilities dc=new DesiredCapabilities();
    dc.setCapability(CapabilityType.UNEXPECTED_ALERT_BEHAVIOUR,UnexpectedAlertBehaviour.ACCEPT);
    driver =new FirefoxDriver(dc);
} 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:55:56.523

打开 Firefox 并尝试“about:config”。

找出哪个 Preference Name 可以解决您的问题并使用以下代码相应地设置值。示例：我正在禁用 Firefox 的自动更新。

```
 FirefoxProfile profile = new FirefoxProfile();
    profile.setPreference("app.update.enabled", false);
    WebDriver driver = new FirefoxDriver(profile); 
```

# ruby-on-rails - Rails 表单不使用显式操作

> ID：13232568
> 
> 赞同：1
> 
> 时间：2012-11-05T12:55:27.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是一个菜鸟，在这个问题上苦苦挣扎的时间比我愿意承认的要长。我的 STI 模型曾经有一个路由问题，但现在我认为这已经解决了（感谢 SO）。

我的问题是，一旦我在以下位置更新表格：/kids/1/edit，而不是保存记录，它似乎再次获得记录。我知道我遗漏了一些基本的东西，但是在解决这个问题很长时间之后，我却没有找到答案。您可以看到我在表单提交中明确调用了 Kidupdate 操作。

提前致谢。

Kidedit.html.erb

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span5 offset3"> 
    <%= form_for(@kid, url: kidedit_path) do |f| %>
      <#%= render 'shared/error_messages', object: f.object %> 

      <%= f.label :fname, "First Name" %>
      <%= f.text_field :fname %> 

      <%= f.label :lname, "Last Name" %>
      <%= f.text_field :lname %> 

      <%= f.label :email %>
      <%= f.text_field :email %> 

      <%= f.label :type, "Are you a Kid or Parent" %>
      <%= f.select :type, [['Kid','Kid'],['Parent','Parent']] %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary", :controller => 'users', :action => 'kidupdate' %>
  <% end %>
  </div>
</div> 
```

users_controller.rb

```
 def kidupdate

    @kid = Kid.find(params[:id])
    if @kid.update_attributes(params[:kid])
      flash[:success] = "Profile updated"
      sign_in @kid
      redirect_to kidshow_path
    else
      render kidedit_path(@kid)
    end
  end 
```

路线.rb

```
Kidtunes::Application.routes.draw do

  root to: 'static_pages#home'

  match '/help',    to: 'static_pages#help'
  match '/contact', to: 'static_pages#contact'
  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout',  to: 'sessions#destroy', via: :delete

  match 'kids/:id' => 'users#kidupdate', via: :put, :as => :kidupdate
  match 'kids/:id' => 'users#kidshow', via: :get, :as => :kidshow
  match 'kids/:id/edit' => 'users#kidedit', :as => :kidedit

  resources :users
  resources :sessions, only: [:new, :create, :destroy] 
```

这是服务器日志中的内容：

```
Started PUT "/kids/1/edit" for 127.0.0.1 at 2012-11-05 07:52:28 -0500
Processing by UsersController#kidedit as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"T8RqFt9lxdbZU+1cOh2E5yu2CFbVRDGmRcj2XdDN1ZU=", "user"=>{"fname"=>"Dante", "lname"=>"Refford", "email"=>"drefford@example.com", "type"=>"Kid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Save changes", "id"=>"1"}
  Kid Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."type" IN ('Kid') AND "users"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered users/kidedit.html.erb within layouts/application (4.1ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = '1RZr3qfB6QSh42_jQ9qNWQ' LIMIT 1
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 67ms (Views: 46.3ms | ActiveRecord: 1.0ms) 
```

路线

```
$rake routes
       root        /                         static_pages#home
       help        /help(.:format)           static_pages#help
    contact        /contact(.:format)        static_pages#contact
     signup        /signup(.:format)         users#new
     signin        /signin(.:format)         sessions#new
    signout DELETE /signout(.:format)        sessions#destroy
  kidupdate PUT    /kids/:id(.:format)       users#kidupdate
    kidshow GET    /kids/:id(.:format)       users#kidshow
    kidedit        /kids/:id/edit(.:format)  users#kidedit
      users GET    /users(.:format)          users#index
            POST   /users(.:format)          users#create
   new_user GET    /users/new(.:format)      users#new
  edit_user GET    /users/:id/edit(.:format) users#edit
       user GET    /users/:id(.:format)      users#show
            PUT    /users/:id(.:format)      users#update
            DELETE /users/:id(.:format)      users#destroy
   sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
    session DELETE /sessions/:id(.:format)   sessions#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:40:47.147

正如第一条评论所说，表单应该使用 update_path 方法：

```
<%= form_for(@kid, url: kidupdate_path) do |f| %> 
```

# php - REST 队列/代理服务器软件

> ID：13232575
> 
> 赞同：0
> 
> 时间：2012-11-05T12:55:49.073
> 
> 标签：php, rest, service, web

我们一直在讨论如何实现我们正在为网站设置的双向休息服务，很快就会发现，如果没有某种排队系统，如果两点之间的连接不可用，我们就会遇到麻烦。

由于这个项目的预算相当紧张，我开始怀疑是否已经有一些东西可以接受传入的请求并将其转发到远程端并表现得好像它还没有排队请求，如果远程端不可用或速度很慢，如果是这种情况，则返回“排队”响应。

我做了一个谷歌，但找不到任何明显或简单的东西..也许这不是正确的做法？

任何建议非常感谢！

谢谢，约翰

# iphone - 一个单元格中的标签未显示在 iPhone 的 tableView 中

> ID：13232577
> 
> 赞同：0
> 
> 时间：2012-11-05T12:55:51.567
> 
> 标签：iphone, tableview, cell

我在创建 时遇到问题`UITableView`，因为我在其中一个单元格中看不到我分配给它的标签和步进器。

这是代码，我希望有人能解决问题。当它到达案例 4 时，它不会在单元格中显示 lblVarsta，只显示步进器。我调试了它，值在那里，但是看不到带有该值的标签。谢谢！

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
UITextField *inputField;

lblRasa = [[UILabel alloc]initWithFrame:CGRectMake(120, 12, 185, 30)];
lblCuloare = [[UILabel alloc]initWithFrame:CGRectMake(120, 12, 185, 30)];
lblJudet = [[UILabel alloc]initWithFrame:CGRectMake(120, 12, 185, 30)];
lbldate = [[UILabel alloc] initWithFrame:CGRectMake(120, 12, 185, 30)];

inputField = [[UITextField alloc]initWithFrame:CGRectMake(120, 12, 185, 30)];
inputField.adjustsFontSizeToFitWidth = YES;
inputField.borderStyle = UITextBorderStyleRoundedRect;
inputField.tag = indexPath.row;
inputField.delegate = self;

segmentedControl1 = [[UISegmentedControl alloc] initWithFrame:CGRectMake(220, 10, 100, 10)];
segmentedControl2 = [[UISegmentedControl alloc] initWithFrame:CGRectMake(220, 10, 100, 10)];

NSArray * segmentItems = [NSArray arrayWithObjects: @"Da", @"Nu", nil];

 //    UIDatePicker *pv = [[UIDatePicker alloc] init];
 //    UIActionSheet *uas = [[UIActionSheet alloc] initWithTitle:@"pv" delegate:self      cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Select", nil];
 //    
 //    [uas addSubview:pv];

if (!cell)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellAccessoryNone reuseIdentifier:CellIdentifier];

}

switch ([indexPath row])
{
    case 0:
        cell.textLabel.text = @"Nume";
        inputField.text = dog?dog.title:@"";
        [cell addSubview:inputField];
        break;
    case 1:
        cell.textLabel.text = @"Rasa";
        lblRasa.text = dog?dog.rasa:@"";
        [cell addSubview:lblRasa];
        break;
    case 2:
        cell.textLabel.text = @"Culoare";
        lblCuloare.text = dog?dog.culoare:@"";
        [cell addSubview:lblCuloare];
        break;
    case 3:{
        cell.textLabel.text = @"Data nasterii";
        lbldate.text = dog?dog.data_nas:@"";

        [cell addSubview:lbldate];
        [cell addSubview:actionSheet];
    break;}
    case 4:{
        lblVarsta = [[UILabel alloc] initWithFrame:CGRectMake(120, 12, 185, 30)];
        stepper = [[UIStepper alloc] initWithFrame:CGRectMake(220, 10, 100, 10)];
        cell.textLabel.text = @"Varsta";
        //inputField.text = dog?[NSString stringWithFormat:@"%d",dog.varsta]:@"";

        lblVarsta.text = @"3 ani";
       [stepper addTarget:self action:@selector(stepperValueChanged:) forControlEvents:UIControlEventValueChanged];

       [lblVarsta setTextColor:[UIColor whiteColor]];
       [lblVarsta setBackgroundColor:[UIColor clearColor]];
        //[lbl5 setTextAlignment:UITextAlignmentLeft];

        [stepper setStepValue:10];

        [cell addSubview:lblVarsta];
        [cell.contentView addSubview:stepper];
        break;}
    case 5:
        cell.textLabel.text = @"Proprietar";
        inputField.text = dog?dog.proprietar:@"";
        [cell addSubview:inputField];
        break;
    case 6:
        cell.textLabel.text = @"Judet";
        lblJudet.text = dog?dog.judet:@"";
        [cell addSubview:lblJudet];
        break;
    case 7:
        cell.textLabel.text = @"Adresa";
        inputField.text = dog?dog.adresa:@"";
        [cell addSubview:inputField];
        break;
    case 8:{
        cell.textLabel.text = @"Parinti";
        //inputField.text = dog?dog.parinti:@"";
        //lblVarsta.text = [NSString stringWithFormat:@"%.f", stepper.value];

        segmentedControl1 = [[UISegmentedControl alloc] initWithItems: segmentItems];
  //            segmentedControl1.segmentedControlStyle = UISegmentedControlStyleBar;
  //            segmentedControl1.selectedSegmentIndex = 0;

        [segmentedControl1 addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];

        [cell.contentView addSubview:segmentedControl1];
        break;}
    case 9:
        cell.textLabel.text = @"Pedigree";
        segmentedControl1 = [[UISegmentedControl alloc] initWithItems: segmentItems];
        [segmentedControl1 addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];
        [cell.contentView addSubview:segmentedControl2];
        break;
}

return cell;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:54:51.423

你有

```
 [cell addSubview:lblVarsta];
    [cell.contentView addSubview:stepper]; 
```

和 lblVarsta = [[UILabel alloc] initWithFrame:CGRectMake(120, 12, 185, 30)]; stepper = [[UIStepper alloc] initWithFrame:CGRectMake(220, 10, 100, 10)];

你为什么不试试

```
 [cell.contentView addSubview:stepper];
     [cell.contentView addSubview:lblgarsta]; 
```

框架如下

```
 lblVarsta = [[UILabel alloc] initWithFrame:CGRectMake(120, 12, 100, 30)];
    stepper = [[UIStepper alloc] initWithFrame:CGRectMake(220, 10, 100, 10)]; 
```

您必须将两个子视图都添加到内容视图中，并且它们的框架必须使它们都可以出现。

# charts - 在后台渲染 JavaFX 2 图表

> ID：13232578
> 
> 赞同：6
> 
> 时间：2012-11-05T12:55:58.840
> 
> 标签：charts, javafx-2

我有一个用于数据分析的应用程序。该应用程序的很大一部分是能够根据组装的数据显示图表，并能够在一次批处理操作中导出大量任务。到目前为止，我一直在使用 JFreeChart，但我想使用本机 JavaFX 图表，以便导出的图表看起来仍然与它们在应用程序中的屏幕显示相同。

我在 JavaFX 2.2.1 (jdk 7u6) 上。

我可以批量生成图表，但这意味着我必须冻结用户界面 (UI)，因为这些图表必须在 JavaFX 应用程序线程上呈现。我使用 Platform.runLater(new Runnable() { ... }); 用于此的命令，包裹在生成图表的代码周围。

如果我将每个单独的图表生成包装到 Platform.runLater(new Runnable() { ... }); GUI 没有像以前那样冻结，但我也不会收到任何反馈，因为我无法检测到每个单独的图表何时生成（它们在稍后阶段运行，我无法控制何时可能发生，据我所知也没有可用的回调）。

对于这个特定的事件，我想向用户显示一个进度条，并且我希望这个进度条随着实际的图表生成而更新。

关于如何实现这一点的任何建议或提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T20:46:00.123

这个问题在 Oracle JavaFX 论坛主题中得到了解决：[在后台渲染图表](https://community.oracle.com/message/10681206)。

解决方案是有一个包含三个子任务的 SaveChartsTask：

1.  在屏幕外场景图中创建图表。
2.  将每个屏幕外图表的快照拍摄到 JavaFX 图像。
3.  使用`imageio`例程将 JavaFX 图像导出到文件。

任务的 workDone 属性允许监视操作的过程。通过将全部工作拆分为子任务，尽可能将工作从 JavaFX 应用程序线程中分离出来，并根据需要使用 CountDownLatches 和 BlockingQueues 来同步操作，UI 能够保持响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:43:32.730

因为您似乎是 JavaFX-2 的新手。我建议您阅读 oracle 文档中的 JavaFX-2 [Concurrency](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)文章。

您的问题很容易通过使用[任务](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)对象单独加载图表来解决（例如，每个图表一个任务）。引用教程页面：

> 任务用于实现需要在后台线程上完成的工作逻辑。

由于 Task 实现了[工作](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.html)接口，您可以使用您的 Task 来探测它们的[Worker.State](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Worker.State.html)。引用手册：

> 可重用的 Worker 将从 CANCELLED、SUCCEEDED 或 FAILED 转换回 READY。

这将解决您关于反馈的问题，因为您将始终能够知道任务是否仍在运行，因为 Worker.State 对象具有以下可能的状态：

*   取消
*   失败的
*   准备好
*   跑步
*   预定的
*   成功

至于您的进度条，您可以使用[updateProgress(double done, double max)来设置您的任务进度，然后通过将](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#updateProgress%28double,%20double%29)[ProgressBar.progressProperty()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ProgressIndicator.html#progressProperty%28%29)绑定到[Task.progressProperty(](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#progressProperty%28%29) ) 来简单地设置进度条的进度。

**编辑**

回复您的评论：

> 问题是在这种情况下，在生成 JavaFX 图表时在任务内部执行的工作，并且代码需要在 JavaFX 应用程序线程内执行

从教程：

> 相反，请使用 javafx.concurrent 包提供的 JavaFX API，它负责与 UI 交互的多线程代码，并确保这种交互发生在正确的线程上。

这意味着在 Task 对象中执行的代码已经在 J​​avaFX 线程中执行。

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:11:43.450

要在 JFX 线程上运行 JavaFX `Task`，您可以安排任务以`Platform.runLater(myJFXTask);`.

# algorithm - 如何有效地计算小尺寸的条件乘积？

> ID：13232580
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:01.650
> 
> 标签：algorithm, language-agnostic, set

这可能更像是一个数学问题而不是编程问题，但我一直在考虑这个问题并且很难弄清楚这是否是一个可解决的问题。

我有以下内容：

*   集合**A**，**B**源自某些符号集
*   布尔函数**F** : A × B → {0,1}

我希望构造集合 C = {(x,y) : x ∈ A, y ∈ B, F(x,y) = 1}。

（对于任何对，F 都可以在 O(1) 中计算出来）

现在到现在为止，这个计算基本上只包括通过函数 F 对 A × B 进行过滤，如果 F 是常数时间，则运行在 O(|A| × |B|) 中。

**但是**，我知道 C 的一个属性，我觉得可以帮助我...

我知道**|C| << |一个| |B|** , 事实上我很确定**|C| 大约是 |A|** . 我觉得有一些方法可以利用这一点（我最近被介绍给概率算法，我觉得这可能会有所帮助，但我绝对不确定）。

我想需要一些形式的辅助结构来解决这个问题，这本身不应该有太大问题，只要结构只是**A**大小的多项式（计算幂集可能有点多，A 可以有点大）。

这也感觉像是已被证明具有某种下限复杂性的东西，但我并没有真正的学术知识来证明这一点。

任何关于我应该关注哪些领域的指导和提示将不胜感激。

到目前为止我的想法是：

*   这看起来很像[SAT 问题](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)，但我对这些事情几乎一无所知

*   这个问题感觉与集合判别问题略有同构（至少......计算两个集合之间的差异）。但是，我无法以这种形式找到有关该主题的任何研究（仅获得很多“迭代 A，迭代 B”类型的答案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:35:25.373

正如您所建议的，在您提出问题的措辞中，唯一正确的解决方案是对 A 和 B 和过滤器进行双重迭代。那是因为您已经将问题描述为“构造集合 C”，它缺少其他信息，通常意味着*枚举*集合 C。这样做并获得 C 的确切枚举的唯一方法，至少在提供的信息的情况下, 是在 A × B 中的每个元素上评估 F。

用另一种方式来解释这个问题，如果你有一个特征函数，你可以说你有一个 C 的定义，但这只是 F。所以我假设这不是你的意思。

关键似乎是您需要阐明 F 的相关属性，因为这是枚举 C 的算法钩子。我的意思是您应该提出一个关于 F 的公理，它可以让您在直接过滤上获得一些捷径。例如，这可能意味着存在一些允许更短算法的辅助函数 G。假设这样一个 G，枚举算法将同时评估 F 和 G，而不是单独评估 F。

# mysql - PHP/MYSQL：批量更新多个值

> ID：13232581
> 
> 赞同：3
> 
> 时间：2012-11-05T12:56:03.957
> 
> 标签：mysql, batch-file, updates

当每条记录的值相同时，我已经弄清楚如何使用以下方法进行批量更新：

```
UPDATE tbl SET col1='foo1' WHERE id IN (1,2,3) 
```

如果我有一个逗号分隔的值字符串，与 id 匹配，我可以进行批量更新，以不同方式更新值，如

```
UPDATE tbl SET col1='1,0,1' WHERE id IN (1,2,3) 
```

感谢您的建议：

编辑：

将数据发送到此查询的 html 页面由以下复选框组成：

```
<input type="checkbox" name="id[]" value="1"><input type="hidden" name="col1[]" value=0> 
<input type="checkbox" name="id[]" value="2"><input type="hidden" name="col1[]" value=1>
<input type="checkbox" name="id[]" value="3"><input type="hidden" name="col1[]" value=0> 
```

等最多20个盒子。

在服务器端，发布的数组使用 implode 转换为逗号分隔的字符串，所以我最终得到两个字符串，1,0,1 用于值，1,2,3 用于 id。但是用户可以从此页面检查多达 20 个框。也许我必须以某种方式操纵数组。请注意，在实际示例中，id 不是 1、2、3，而是可能是 221、433、512、600 等，具体取决于用户检查的内容

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T13:03:22.203

第二个查询将每行 1, 2,3 更新为相同的值 '1,0,1'

我想你需要的是

```
 UPDATE mytable
    SET myfield = CASE other_field
        WHEN 1 THEN 'value'
        WHEN 2 THEN 'value'
        WHEN 3 THEN 'value'
    END 
WHERE id IN (1,2,3) 
```

参考 [http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/](http://www.karlrixon.co.uk/writing/update-multiple-rows-with-different-values-and-a-single-sql-query/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:59:52.707

当 col1 是 varchar 数据类型时，这是完美的。

```
UPDATE tbl SET col1=CASE WHEN id=1 then 1,
                         WHEN id=2 then 0,
                         when id=3 then 1 END  WHERE id IN (1,2,3) 
```

# java - 写一个已经存在的文件

> ID：13232582
> 
> 赞同：0
> 
> 时间：2012-11-05T12:56:05.003
> 
> 标签：java, file

如何编写与 存在的文件`FileOutputStream`？当我运行该程序两次时，第二次`oos`为`fos`空

```
 public class ReadFile {
    static FileOutputStream fos = null;
    static ObjectOutputStream oos = null;
    public static void main(String[] args) throws IOException, ClassNotFoundException {

        File f = new File("file.tmp");
        if (f.exists()) {
            //How to retreive an old oos to can write on old file ?
            oos.writeObject("12345");
            oos.writeObject("Today");
        }
        else
        {
            fos = new FileOutputStream("file.tmp");
            oos = new ObjectOutputStream(fos);
        }
        oos.close();
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:01:48.227

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(f,true)); 
```

如果你想追加到文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:01:05.140

如果您不想覆盖文件，请将 true 参数添加到 File 或 File OutputStream 构造函数

```
new FileOutputStream( new File("Filename.txt"), true );

Parameters:
name - the system-dependent file name
append - if true, then bytes will be written to the end of the file rather than the beginning 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:01:59.663

如果您打算编写纯文本，请尝试使用 a`FileWriter`而不是。`FileOutputStream`

```
 PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("outfilename", true)));
    out.println("the text"); 
```

第二个参数 ( `true`) 将告诉附加到文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:00:44.683

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(f, true)); 
```

在您的代码中，您有，`ObjectOutputStream oos = null;`所以. 你需要初始化它。像这样：`oos``null`

```
public class ReadFile {
    static FileOutputStream fos = null;
    static ObjectOutputStream oos = null;
    public static void main(String[] args) throws IOException, ClassNotFoundException {

        File f = new File("file.tmp");
        oos = new ObjectOutputStream(new FileOutputStream(f, true));
        if (f.exists()) {
            //How to retreive an old oos to can write on old file ?
            oos.writeObject("12345");
            oos.writeObject("Today");
        }
        else
        {
            fos = new FileOutputStream(f, true);
            oos = new ObjectOutputStream(fos);
        }
        oos.close();
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T13:02:43.623

只需创建新`FileOutputStream`的，第二个参数设置为`true`

```
FileOutputStream d = new FileOutputStream(file, append); 
```

# sql-server - SQL Server 2005 脚本

> ID：13232583
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:05.717
> 
> 标签：sql-server, tsql

此脚本仅适用于 2008 版本：

```
declare @tab table(
id_emp int,
FIL_ROT_WID xml
)

insert into @tab
select 0, '<xml></xml>'

declare @xml_rot_widget xml
set @xml_rot_widget = '<ati id="1123" val="new()" />'

update @tab
set FIL_ROT_WID.modify('insert sql:variable("@xml_rot_widget")
                    as last
                    into (/xml)[1]')
where id_emp = 0

select * from @tab 
```

在 2005 年，我收到以下错误：

```
XQuery: SQL type 'xml' is not supported in XQuery. 
```

所以，我的问题是：我如何才能在 2008 年（SQL Server Management Studio）上编写我确信在 2005 年可以正常工作的代码？

Ps.：**工具>选项> SQL Server对象资源管理器>脚本>服务器版本脚本**不起作用。

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:16:49.530

Management Studio 只是一个带有一些智能感知的文本编辑器。如果您需要您的代码在 2005 年运行，您需要连接到 2005 年的机器并在其上运行测试。

# solr - 管理页面中的颜色

> ID：13232586
> 
> 赞同：0
> 
> 时间：2012-11-05T12:56:09.230
> 
> 标签：solr, solrcloud

我正在使用 Solr 4.0（12 年 10 月发布）并使用两个分片集群和来自[http://wiki.apache.org/solr/SolrCloud](http://wiki.apache.org/solr/SolrCloud)的分片副本示例。在我的 ~cloud 页面中，我可以看到集群的图表，出于某种原因，3 个分片/副本是绿色的，其中一个是红色的。有时它们看起来不同——其中一些是绿色、灰色等......

任何想法这些颜色是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:56:52.363

检查附加的[屏幕截图@](https://issues.apache.org/jira/secure/attachment/12548107/SOLR-3915-screenshot.png) [SOLR-3915](https://issues.apache.org/jira/browse/SOLR-3915)

# c# - 需要对此正则表达式进行一些更改

> ID：13232589
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:12.647
> 
> 标签：c#, .net, regex

我用我的正则表达式检查了一些字符串，但不知何故它并不完美。我不知道为什么。我想允许只有这些字符的字符串：

*   从头到尾
*   0 到 9
*   .
*   %
*   /
*   {空间}
*   +
*   $

所以我认为这个正则表达式应该足够了：

```
Regex("[^A-Z0-9.$/+%\\- ]$") 
```

但是有一些字符串它并没有真正起作用。我做了一个小例子：

```
 static Regex regex = new Regex("[^A-Z0-9.$/+%\\- ]$");

    static void Main()
    {
        string s;

        Console.WriteLine("check: \n");

        s = "?~=) 2313";
        Console.WriteLine(s + ": " +IsValid(s));

        s = "ÄÜÖ";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "Ü~=) 2313";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "Ü 2313";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "~=) 2313 Ü";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "ÜÜÜ";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "~=)";
        Console.WriteLine(s + ": " + IsValid(s));

        s = "THIS--STRING $1234567890$ SHOULD BE VALID.%/ +";
        Console.WriteLine(s + ": " + IsValid(s));

        Console.ReadKey();
    }

    public static bool IsValid(string input)
    {
        if (regex.IsMatch(input)) return false;
        return true;
    } 
```

作为输出，我得到：

![在此处输入图像描述](../Images/db996610c6eecb0658b0e032d0af5790.png)

1.,3\. 和 4\. 是正确的，但这是错误的。我的正则表达式有什么问题？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:58:21.893

它应该是

```
^[A-Z0-9.$/+%\\- ]+$
|                 ||match end of the string
|                 |
|                 |match one or more characters of [A-Z0-9.$/+%\\- ]
|start of the string 
```

您需要使用`+`,等量词`*`来匹配多个字符

* * *

你的**IsValid**类应该是

```
public static bool IsValid(string input)
    {
        if (regex.IsMatch(input)) return true;
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:07:08.567

试试这个正则表达式（你的意思是`-`在你的允许字符的描述中包含？）：

```
Regex("^[A-Z0-9.$/+% -]*$") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T12:59:01.270

您的正则表达式仅匹配一个不是这些字符的字符。你的正则表达式应该是：

```
^[A-Z0-9\.$/+% ]+$ 
```

此外，使用非反转函数进行检查：

```
public static bool IsValid(string input)
{
    if (regex.IsMatch(input)) return true;
    return false;
} 
```

# jquery - 使用 hashchange-event-plugin 导航 - 一些问题

> ID：13232592
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:26.297
> 
> 标签：jquery, navigation, hashchange

我用 hashchange 事件插件制作了一些基本页面。但现在我想建造更大的东西，但找不到正确的方法来简单地完成它。

index.html 以动画登录框开头。如果您登录您的帐户，登录框会消失 - 哈希更改为#start；内容+页眉/页脚加载并淡入。这部分现在没有问题。

主要原因是在不离开 index.html 的情况下激活浏览器后退按钮。我使用 ajax 和哈希来存档这个。#start 在登录后加载主界面。#messages 加载消息界面。两者都有一些额外的脚本+动画，每次哈希更改时都必须触发。

我的问题一般是，我不知道如何访问子链接。例如：用户在#messages 中（ajax 加载/php/messages.php，淡入）。消息界面显示他的收件箱，底部有一个链接可以访问他的发件箱。链接有哪些选项？messages.php 等待 GET 请求，例如 ?s=n 用于新消息，?s=o 用于发件箱。我怎样才能做到这一点：激活浏览器后退按钮？

有没有办法将哈希更改为 #messages/outbox + 加载文件 /php/messages.php?s=o ？jquery 代码应该是什么样子的？对于主导航，我使用了开关功能，例如 'switch(hash) {case #start; 案例#messages}'; 这不是最好的解决方案，因为我会得到更多的链接/哈希。

任何建议/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:32:07.250

如果您希望您的网址对用户有用，而不仅仅是提供返回按钮功能，我想您将始终需要查找网址。
考虑用户在您的页面打开时粘贴以前保存的 url，您希望将他们带到他们正在寻找的地方，对吗？
因此，考虑到这一点，我只关心更改哈希（当您想将其保持为历史/可书签状态时），然后在 hashchange 事件上处理页面和操作。如果您正在使用 hashchange 事件插件，您可能想看看[jQuery BBQ: Back Button & Query Library](http://benalman.com/projects/jquery-bbq-plugin/)，它“提供了一个完整的 .deparam() 方法，以及哈希状态管理和片段/查询字符串解析和合并实用程序方法。” 使它更容易。

# objective-c - 有没有办法在 Mac OSX 中以编程方式修改文件权限（读/写）？

> ID：13232599
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:44.563
> 
> 标签：objective-c, macos, file-permissions

> **可能重复：**
> [在 Objective-C 中设置文件权限](https://stackoverflow.com/questions/8257630/setting-file-permissions-in-objective-c)

我想根据某些情况为文件应用读/写权限。

有没有办法在 Mac OSX 中以编程方式修改文件权限（读/写）？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:28:48.930

这是我每次使用的片段：

```
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; 

int r = 04; // read
int w = 02; // write
int x = 01; // execute

int owner = (r | w | x) * (8 * 8);
int group = (r | w)         * (8);
int other = (x);

int permissions = owner + group + other;

[dict setObject:[NSNumber numberWithInt:permissions] forKey:NSFilePosixPermissions]; 

NSError *error = nil;
[[NSFileManager defaultManager] setAttributes:dict ofItemAtPath:[file path] error:&error]; 
```

这使得文件对所有者具有读/写/执行能力，对组来说是读/写能力，对其他人来说是可执行的。

只需调整您的权限设置...</p>

# r - 在 R 中绘制箱线图，并按年和月记录温度

> ID：13232600
> 
> 赞同：1
> 
> 时间：2012-11-05T12:56:53.270
> 
> 标签：r, boxplot

我有一个包含温度记录的数据集，例如：

```
 row.names   Collection_date temprature  col_yr  col_mnth
    1   1       4-Aug-04          27        2004    8
    2   2       9-Aug-04          26        2004    8
    3   3       4-Aug-04          27        2004    8
    4   4       9-Aug-04          26        2004    8
    5   5       9-Aug-04          26        2004    8
    6   6       9-Aug-04          26        2004    8
...
1031 1031       6-Aug-06          32        2006    8 
```

我想用 x 轴在 R 中创建箱线图，例如：

```
1 2 3 4 5 6 7 8 9 10 11 12 1 2 3 4 5 6 7 8 9 10 11 12 ...
        2004                         2005 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:18:48.580

这不是一个非常优雅的解决方案，但它是我能想到的唯一让您的箱线图具有适当宽度的解决方案。

给定您的样本数据：

```
dat <- read.table(textConnection("row.names   Collection_date temprature  col_yr  col_mnth
  1   1   4-Aug-04    27  2004    8
  2   2   9-Aug-04    26  2004    8
  3   3   4-Aug-04    27  2004    8
  4   4   9-Aug-04    26  2004    8
  5   5   9-Aug-04    26  2004    8
  6   6   9-Aug-04    26  2004    8
  1031 1031   6-Aug-06    32    2006    8")) 
```

首先将您的日期声明为 POSIXct 对象（请注意，在您的情况下，您必须确保您的语言环境设置是英文的，因为您的月份是英文缩写）：

```
dat$Collection_date <- strptime(dat$Collection_date,"%d-%b-%y") 
```

然后创建月份和年份的序列：

```
ax_month <- seq(min(dat$Collection_date),max(dat$Collection_date),"month")
ax_year <- seq(min(dat$Collection_date),max(dat$Collection_date),"year") 
```

然后用你的轴画一个空图：

```
plot(NA, xaxt="n",type="n", ylab="Temperature", xlab=NA,
     xlim=range(seq_along(ax_month)), ylim=range(dat$temprature))
axis(3,at=seq_along(ax_month), labels=format(ax_month,"%m"))
mtext(format(ax_year,"%Y"), side=3, line=3, at=seq(1,length(ax_month), by=12)) 
```

最后是每月的箱线图：

```
for(i in seq_along(ax_month)){
    sub_dat <- dat[format(dat$Collection_date, "%m-%Y") == format(ax_month[i], "%m-%Y"),]
    boxplot(sub_dat$temprature, add=TRUE, axes=FALSE, at=i)
    } 
```

显然，鉴于您提供的数据样本，这里的结果不是很漂亮，但我想那是实际数据，它会很好地填充。

![在此处输入图像描述](../Images/acec21bd343a15385cfe4a502436f600.png)

但下面是一些（虚构的）更完整数据的样子：

![在此处输入图像描述](../Images/f064e71fd7d947ebbd2d4f751aeb90ef.png)

# charts - 使用 JavaFx 场景构建器创建折线图

> ID：13232603
> 
> 赞同：0
> 
> 时间：2012-11-05T12:57:09.070
> 
> 标签：charts, javafx, linechart

我一直在尝试查看图表部分的 oracle 教程，但到目前为止我还没有成功。

我想要做的基本上是测试我在 JavaFx 场景构建器中添加的 lineChart。

到目前为止，我的代码如下：

```
 public class SimpleController implements Initializable{

    public Button btn_getData;
    public ProgressBar progressBar;
    public LineChart<String, Integer> lineChart;

    @Override
    public void initialize(URL arg0, ResourceBundle arg1) {
        // TODO Auto-generated method stu
        lineChart.getXAxis().setAutoRanging(true);
        lineChart.getYAxis().setAutoRanging(true);
        progressBar.setId("progressBar");

        XYChart.Series series = new XYChart.Series<>();
        series.getData().add(new XYChart.Data<>("Jan", 23));
        series.getData().add(new XYChart.Data("lol", 2));
        lineChart.getData().add(series);
    }
} 
```

如您所见，我要做的就是让我的程序显示一种测试。

希望有人能够提供帮助。

另外，如果您有时间解释问题所在，那就太好了，因为我试图在 JavaFx 上做得更好 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T20:31:46.513

假设在您的 fxml 中，您将`fx:id="lineChart"`分配给 LineChart 节点和分配给父节点的控制器之类的东西，这可能会起作用。

也尝试： `series.getData().add(new XYChart.Data<String,Integer>(String,integer));`代替。

# python - 如何使用python从单个csv文件中的多个工作表中读取数据

> ID：13232604
> 
> 赞同：-4
> 
> 时间：2012-11-05T12:57:09.803
> 
> 标签：python, csv

我正在使用 python，我有一个 csv 文件，其中包含多张表格中的数据。

所以我们可以使用python从csv文件中读取数据，如下所示

假设`data.csv`文件中的数据`sheet1`如下

```
what    |   are   |  you   | doing | however
hello   |   that  |  would |   be  | useful

csv_file = "/home/user/csv_folder/data.csv" 

for line in open(csv_file,'r'):
    print line
    ..........
    .......... 
```

上面的输出将如下所示

```
"what are you doing however"
"hello that would be useful" 
```

但在同一个`data.csv`文件中，我在另一个文件中有`sheet2`如下数据

```
This    |   will   |  be   |   second  | sheet | data
That    |   would  |  lot  |   useful  | now 
```

现在我要做的是打印存在于另一个中的数据`sheets`（如果存在于单个 csv 文件中，则超过 1 张）。

谁能让我现在如何打印单个`csv`文件中所有工作表中的数据？

任何人都可以分享一些处理单个csv文件中存在的多个工作表的python代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:09:33.453

正如许多评论员正确指出的那样，csv 文件中没有“表格”的概念。

如果您尝试从 excel 文件中读取“表格”，这里有一个很好的博客资源供您了解语法。

[http://michalisavraam.org/2009/06/manipulating-excel-files-using-python-part-1-reading-files/](http://michalisavraam.org/2009/06/manipulating-excel-files-using-python-part-1-reading-files/)

请注意，如果您确实打算从 excel 文件中读取“表格”，则上述博客链接推荐的 3rd 方包`xlrd`需要单独下载并安装在您的系统中。像这样：-

```
pip install xlrd 
```

在您可以`import xlrd`按照博客文章的建议使用您的 python 脚本之前。

# objective-c - CGContextAddEllipseInRect 不绘制任何东西

> ID：13232608
> 
> 赞同：8
> 
> 时间：2012-11-05T12:57:37.790
> 
> 标签：objective-c

我正在尝试画一个里面有一个数字的圆圈：

```
 -(void)drawRect:(CGRect)rect {
    //Drawing code
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 4.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextBeginPath(context);
    CGContextAddEllipseInRect(context, rect);
    CGContextDrawPath(context, kCGPathFillStroke);

    // Label and index code
    UILabel* circleLabel = [[UILabel alloc] init];
    NSString *i=[Index stringValue];
    [circleLabel setText:i];
    [self addSubview:circleLabel];

} 
```

我从自己的方法中调用 drawRect 方法：

```
-(void)addPhotoIndex:(NSNumber*)tempNumber withCoordinate:(NSString*)currentTouchPos{
    self.coord= CGPointFromString(currentTouchPos);
    CGRect rect= CGRectMake ((coord.x - 5), (coord.y- 5), 5, 5);
    NSNumber *Index= tempNumber;
    [self drawRect:rect];

} 
```

它本身是从 ViewController 调用的。

但这不是什么都没画，也没有给出任何错误。有人可以帮我吗？

解决方案：

最后，这就是它的工作原理：

```
 -(void)addPhotoIndex:(NSNumber*)tempNumber withCoordinate:(NSString*)currentTouchPos{

    self.coord= CGPointFromString(currentTouchPos);
    CGRect rect= CGRectMake ((coord.x - 3), (coord.y- 3), 3, 3);
    NSNumber *Index= tempNumber;
    NSString *i=[Index stringValue];
    UIFont *font = [UIFont systemFontOfSize:15.0];

    // Drawing Point
    UIGraphicsBeginImageContext(self.frame.size);
    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 3.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
    CGContextBeginPath(context);
    CGContextAddEllipseInRect(context, rect);
    CGContextDrawPath(context, kCGPathFillStroke);
    [ i drawAtPoint:self.coord withFont:font];
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

} 
```

带有索引号的点在正确的位置彼此相邻绘制:) 感谢您的有用帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:16:10.730

您应该使用的方法`drawRect:`不是`drawInRect:`。

您也不需要创建自己的上下文，因为这是为您设置的`drawRect:`

```
- (void)drawRect:(CGRect)rect;
{
  // UIGraphicsBeginImageContext(self.bounds.size); <-- not needed
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextSetLineWidth(context, 4.0);
  CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
  CGContextBeginPath(context);
  CGContextAddEllipseInRect(context, rect);
  CGContextDrawPath(context, kCGPathFillStroke); // Or kCGPathFill

  /*
   * As @Jonathan Cichon points out you should not add subview's here
   * either add them elsewhere or draw the string manually
   */
  // UILabel* circleLabel = [[UILabel alloc] init];
  // NSString *i=[Index stringValue];
  // [circleLabel setText:i];
  // [self addSubview:circleLabel];
  // UIGraphicsEndImageContext(); <-- not needed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:17:08.150

我假设您`- (void)drawInRect:(CGRect)rect`在`UIView`. 如果是这样，请使用`- (void)drawRect:(CGRect)rect`，因此在调用您的方法时已经分配了绘图的上下文。删除`UIGraphicsBeginImageContext`and`UIGraphicsEndImageContext`调用。此外，您不应该在中添加子视图`drawRect`，`[i drawInRect:withFont:]`而是使用

# xml - 使用 VBA 进行自动地理编码

> ID：13232613
> 
> 赞同：4
> 
> 时间：2012-11-05T12:58:03.110
> 
> 标签：xml, vba, excel, xml-parsing

我正在尝试创建一个 VBA 脚本，它可以让我对地址数据库进行地理编码。我已经在这个脚本上工作了几天，我认为有时我必须向专家寻求一些建议。所以，我希望脚本访问谷歌地图 url 并找到纬度和经度值。我设法从本地 XML 文档中提取了该信息，但我无法使用从谷歌地图服务器读取的 XML 来提取信息。对我有用的代码如下：

```
Sub XMLread()
Dim odc As DOMDocument
Dim nde As IXMLDOMNode
Dim lat As IXMLDOMElement
Dim url As String

Set odc = New MSXML2.DOMDocument
url = "C:\~path~\address.xml"
odc.Load (url)

For Each nde In odc.SelectNodes("GeocodeResponse/result/geometry/location")
    Set lat = nde.SelectSingleNode("lat")
    Debug.Print lat.Text
Next
End Sub 
```

这段代码的作用是打开一个 xml 文件，找到“lat”的值并将其打印在调试窗口中。我打算将结果放在电子表格中，但这不会成为问题。问题在于直接从服务器中提取数据。我使用以下代码：

```
Sub XMLerverRead()
Dim odc As DOMDocument
Dim nde As IXMLDOMNode
Dim lat As IXMLDOMElement
Dim url As String
url="https://maps.googleapis.com/maps/api/geocode/xml?address=1+Infinite+Loop,+Cupertino,+Santa+Clara,+California+95014&sensor=false"

Set odc = New MSXML2.DOMDocument
odc.async = False
odc.Load (url)

For Each nde In odc.SelectNodes("GeocodeResponse/result/geometry/location")
    Set lat = nde.SelectSingleNode("lat")
    Debug.Print lat.Text
Next
End Sub 
```

并且上面的代码没有返回任何东西，甚至没有错误。你能帮我看看如何修复这个代码吗？先感谢您。

PS我是VBA新手，但我对这个问题做了很好的研究。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:48:05.857

试试这个：

```
Sub XMLerverRead()
   Dim odc As DOMDocument
   Dim url As String
   Dim lat As String

   url="https://maps.googleapis.com/maps/api/geocode/xml?address=1+Infinite+Loop,+Cupertino,+Santa+Clara,+California+95014&sensor=false"

   Set odc = New MSXML2.DOMDocument
   odc.async = False
   odc.Load (url)

   If odc Is Nothing Then
      MsgBox "Odc is not loaded with the Xml."

   Else
      lat= vbNullString       'This is to assure that the variable lat has no value.'       
      On Error Resume Next    'We dont want to show the user a system msgbox if the node does not exist'
      lat = odc.SelectSingleNode("GeocodeResponse/result/geometry[location_type='ROOFTOP']/location/lat").Text
      On Error Goto 0

      If lat=vbNullString Then   'Here you can show the user some useful info or do something with your code instead'
         MsgBox "There is no Latitude value for a 'ROOFTOP' node in the given XML"
      End If
   End If        

End Sub 
```

**编辑：**

我对代码进行了一些修改以帮助回答您的问题。

注意：为了示例，我使用了节点“ROOFTOP”。如果您对找到的第一个 lat 值感到满意，则可以使用以下任何选项。

```
 odc.SelectSingleNode("GeocodeResponse/result/geometry/location/lat")
 odc.SelectSingleNode("//lat") 
```

您对 Xpath 的了解越多，您的任务就越容易。重要的是要注意 VBA 仅适用于 Xpath 1.0（不支持 Xpath 2）。

# linux - 结构 super_block 和 ext2_super_block

> ID：13232614
> 
> 赞同：1
> 
> 时间：2012-11-05T12:58:05.373
> 
> 标签：linux, linux-kernel, filesystems, ext4, ext2

谁能解释一下 struct ext2_super_block （在 fs/ext2/ext2.h 中）和 struct super_block （在 include/linux/fs.h 中）之间的关系。我问这个是因为，在 LKP（由 Robert Love 撰写）中，它说每个文件系统都必须实现 struct super_block。但是 ext2_super_block 不同，super.c 中的函数是如何应用于 ext2 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:34:49.990

`ext2_super_block`是 ext2 特定的磁盘结构，`super_block`在内存超级块描述中是通用的。

# vba - 从 vbscript 调用 vba 函数（带参数）并显示结果

> ID：13232615
> 
> 赞同：1
> 
> 时间：2012-11-05T12:58:08.337
> 
> 标签：vba, vbscript, arguments

我有以下 vba 函数（在 Excel 文件中的模块中）

```
Public Function validate_fncname(strFncname As String) As Boolean
.
.
.
validate_fncname  = True
End Function 
```

我写了以下 vbscript 来调用它：

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook =  objExcel.Workbooks.Open("C:\Users\uidu8611\Desktop\CAM0500040F10_SW_Quality_Assurance_Report_Template(new_version).xlsm")

objExcel.Application.Visible = True

Dim str
str ="hello"

Dim validate_fncname 

 validate_fncname =  objExcel.Application.Run("'C:\Users\uidu8611\Desktop\CAM0500040F10_SW_Quality_Assurance_Report_Template(new_version).xlsm'!validate_fncname", str)

Wscript.Echo validate_fncname 
```

但是，当我运行脚本时，它给了我该行的类型不匹配错误：

```
objExcel.Application.Run("'C:\Users\uidu8611\Desktop\CAM0500040F10_SW_Quality_Assurance_Report_Template(new_version).xlsm'!validate_fncname", str) 
```

尽管类型正确（字符串）

此外，如果我将其更改为：

```
objExcel.Application.Run("'C:\Users\uidu8611\Desktop\CAM0500040F10_SW_Quality_Assurance_Report_Template(new_version).xlsm'!validate_fncname(5)") 
```

它不会给我一个错误，虽然 5 是整数！

请问我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:01:46.123

您已经有了`validate_fncname`看起来不错的方法（除了将返回值设置为`True`可能应该在`if then`语句中完成以避免将所有内容设置为`True`）。

调用此函数时，您应该能够执行以下操作：

```
Dim validateResult As Boolean
Dim str as String
str = "hello"
validateResult = validate_fncname(str)
Debug.Print validateResult 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T03:04:36.427

我玩了一段时间，并提出了同样的错误。
就我而言，我只是想来回传递一个字符串。

然后我查看了 VBScript 的 dim 语句，它说“所有 VBScript 变量都是变体”，所以我将电子表格上的函数更改为 Variant，这对我有用。希望这可以帮助遇到此线程的其他人。

# comet - 在 ADF 中使用 Active Data Service 进行服务器端推送

> ID：13232616
> 
> 赞同：1
> 
> 时间：2012-11-05T12:58:20.290
> 
> 标签：comet, ads, oracle-adf

我正在开发一个 ADF Fusion Web 应用程序，其中包含一个带有 JDeveloper 11.1.1.4.0 的消息传递模块。我搜索了进行服务器端推送的技术（也问了一个关于它的[问题](https://stackoverflow.com/questions/12723403/how-facebook-intializes-recent-news-feed-entries-instantly)）我搜索了“彗星”、服务器端推送等。我找到了[Active Data Service](http://docs.oracle.com/cd/E12839_01/web.1111/b31974/adv_ads.htm)和一些聊天或服务器端推送示例：

*   [http://biemond.blogspot.com/2009/12/adf-data-push-with-active-data-service.html](http://biemond.blogspot.com/2009/12/adf-data-push-with-active-data-service.html)
*   [https://blogs.oracle.com/adffun/entry/building_a_real_time_twitter_client_with_adf](https://blogs.oracle.com/adffun/entry/building_a_real_time_twitter_client_with_adf)

我按照[biemond 博客](http://biemond.blogspot.com/2009/12/adf-data-push-with-active-data-service.html)中的说明进行 ADS 的配置

将 ads conf 添加到 ADF META-INF/services 文件夹下的 adf-config.xml

```
<ads:adf-activedata-config xmlns="http://xmlns.oracle.com/adf/activedata/config">
    <transport>long-polling</transport>  
    <latency-threshold>10000</latency-threshold>  
    <keep-alive-interval>10000</keep-alive-interval>  
    <polling-interval>3000</polling-interval>  
    <max-reconnect-attempt-time>1800000</max-reconnect-attempt-time>  
    <reconnect-wait-time>10000</reconnect-wait-time></ads:adf-activedata-config> 
```

并创建了 adf-config.properties 文件

```
http\://xmlns.oracle.com/adf/activedata/config=oracle.adfinternal.view.faces.activedata.ActiveDataConfiguration$ActiveDataConfigCallback 
```

并在 jsf 页面中创建了一个表。

```
<af:table value="#{MessageModel}" var="row"
                rows="#{bindings.MessageVO.rangeSize}"
                emptyText="#{bindings.MessageVO.viewable ? 'No data to display.' : 'Access Denied.'}"
                fetchSize="#{bindings.MessageVO.rangeSize}"
                rowBandingInterval="0" id="t1">
        <af:column sortProperty="id" sortable="false"
                   headerText="#{bindings.MessageVO.hints.id.label}"
                   id="c1">
          <af:outputText value="#{row.id}" id="ot2">
            <af:convertNumber groupingUsed="false"
                              pattern="#{bindings.MessageVO.hints.id.format}"/>
          </af:outputText>
        </af:column>
        <af:column sortProperty="Title" sortable="false"
                   headerText="#{bindings.MessageVO.hints.Title.label}"
                   id="c2">
          <af:outputText value="#{row.title}" id="ot3"/>
        </af:column>
      </af:table> 
```

并创建了 MessageModel 类，该类用作 jsff 中的表值。

```
public class MessageModel extends ActiveCollectionModelDecorator {  

 private MessageActiveDataModel activeDataModel = new MessageActiveDataModel();  
 private CollectionModel model = null;  

 public CollectionModel getCollectionModel() {
    if (model == null) {
        DCBindingContainer dcBindings = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();  
        FacesCtrlHierBinding treeData = (FacesCtrlHierBinding)dcBindings.getControlBinding("MessageVO");  
        model = treeData.getCollectionModel();  
    }
    return model;
 }

 public MessageActiveDataModel getActiveDataModel() {
      return activeDataModel;
 }

 public MessageActiveDataModel getMessageActiveDataModel() {  
     return activeDataModel;  
 }  

} 
```

和一个 ActiveDataModel 类

```
public class MessageActiveDataModel extends BaseActiveDataModel {

private final AtomicInteger listenerCount = new AtomicInteger(0);
private final AtomicInteger currEventId = new AtomicInteger();

protected void startActiveData(Collection<Object> rowKeys,
                               int startChangeCount) {
    listenerCount.incrementAndGet();
    if (listenerCount.get() == 1) {
        System.out.println("start up");

        Runnable dataChanger = new Runnable() {
            public void run() {
                System.out.println("MyThread starting.");
                try {
                    Thread.sleep(2000);
                    System.out.println("thread running");
                    Change chg = new Change();
                    chg.triggerDataChange(MessageActiveDataModel.this);
                } catch (Exception exc) {
                    System.out.println("MyThread exceptioned out.");
                }
                System.out.println("MyThread terminating.");
            }
        };
        Thread newThrd = new Thread(dataChanger);
        newThrd.start();
    }
}

protected void stopActiveData(Collection<Object> rowKeys) {
    listenerCount.decrementAndGet();
    if (listenerCount.get() == 0) {
        System.out.println("tear down");
    }
}

public int getCurrentChangeCount() {
    return currEventId.get();
}

public void bumpChangeCount() {
    currEventId.incrementAndGet();
}

public void dataChanged(ActiveDataUpdateEvent event) {
    fireActiveDataUpdate(event);
} 
```

}

ActiveDataModel 类中的线程触发了一个名为 Change 的类

```
public class Change {
public Change() {
}

public void triggerDataChange(MessageActiveDataModel model) throws Exception {
    for (int i = 0; i < 10; i++) {
        try {
            Thread.sleep(4000);
        } catch (InterruptedException ie) {
            ie.printStackTrace();
        }
        model.bumpChangeCount();
        ActiveDataUpdateEvent event =
            ActiveDataEventUtil.buildActiveDataUpdateEvent(ActiveDataEntry.ChangeType.UPDATE,
                                                           model.getCurrentChangeCount(),
                                                           JboActiveDataEventUtil.convertKeyPath(new Object[] { new Long(1),
                                                                                                                new Integer(0) }),
                                                           null,
                                                           new String[] { "title" },
                                                           new Object[] { "Administration" });

        model.dataChanged(event);
    }
} 
```

}

当我运行应用程序时，我可以在表中看到 MessageVO 中的行。它进入模型类、活动数据模型类和更改类，更改 ActiveDataMode 类中的 listenerCount 和 currentEventId 值。当我更新数据库中的行时，它不会触发更改事件，也不会检测数据库中的更新。

有没有人知道如何监听数据库的变化并根据 ADF 中的数据库变化进行服务器端推送？

提前致谢。

# php - 考虑安全性的分离 apache 站点

> ID：13232622
> 
> 赞同：0
> 
> 时间：2012-11-05T12:58:38.040
> 
> 标签：php, apache, security, webserver

我有一台使用 php 运行 apache 的机器。它为文件夹 /home/web/ 中的多个域提供服务，例如 /home/web/domainA 和 /home/web/domainB

现在，我如何安全地将它们分开？域 A 不能读取、写入或执行域 B 文件夹中的文件。

虚拟服务器不是一个（很受欢迎的）选项，因为服务器内存不足，最好避免使用多个盒子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:18:44.140

您的问题是 apache 用户（或您配置为执行 apache 守护程序的任何用户）需要读取（并执行）您所服务的每个域的每个文件，并且由于所有域的 apache 守护程序都是相同的，因此文件权限也是如此.

因此，恕我直言，您拥有的唯一方法是虚拟框，以真正将文件和文件夹彼此隔离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:24:17.467

[http://www.webtatic.com/packages/httpd-itk/](http://www.webtatic.com/packages/httpd-itk/) - 可以为你工作。将不同的用户分配给 VirtualHosts 并相应地 chown/chmod。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:37:08.610

这个页面定义了我的目的：

[http://wiki.apache.org/httpd/RunningMultipleApacheInstances](http://wiki.apache.org/httpd/RunningMultipleApacheInstances)

# android - 为 Spinner 使用 BaseAdapter

> ID：13232624
> 
> 赞同：2
> 
> 时间：2012-11-05T12:58:43.390
> 
> 标签：android, android-layout, android-widget, android-spinner

任务是用 POJO 对象中的值填充微调器。在此之前，我正在检查正常的字符串值和 BaseAdapter。

我在活动组中有一项活动。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_date_filter);

    startMonth = (Spinner) findViewById(R.id.startMonth);

    startMonth.setAdapter(new CustomSpinnerAdapter(getParent(), new ArrayList<String>()));
} 
```

和 layout_spinner_row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/spinnerValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我的适配器类是：

```
public class CustomSpinnerAdapter extends BaseAdapter{ 

private List<String> alertList;
private LayoutInflater mInflater;

public CustomSpinnerAdapter(Context context, Object results) {
    alertList = (List<String>) results;
    //just check if it works. 
   //in real, actual object fits in
   alertList.add("January");
    alertList.add("Feburary");
    alertList.add("March");
    mInflater = LayoutInflater.from(context);
}

@Override
public int getCount() {
    return alertList.size();
}

@Override
public Object getItem(int position) {
    return alertList.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.layout_spinner_row, null);
        holder = new ViewHolder();
        holder.spinnerValue = (TextView) convertView.findViewById(R.id.spinnerValue);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.spinnerValue.setText(alertList.get(position));
    return convertView;
}

static class ViewHolder {
    TextView spinnerValue; //spinner name
}
} 
```

当我单击微调器时，出现以下错误：

```
E/AndroidRuntime(1686): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@4135fa38 is not valid; is your activity running? 
```

我找不到该问题的任何有效答案。有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:03:00.487

您需要将视图设置为相应的视图对象，以使微调器正常工作。为此，您需要更改活动的 oncreate：

```
View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.activity_date_filter, null); 
this.setContentView(viewToLoad); 
```

完整解释：http: [//developer.android.com/reference/android/view/LayoutInflater.html](http://developer.android.com/reference/android/view/LayoutInflater.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:17:27.313

从您的适配器代码中，我可以说**您尚未初始化`LayoutInflater`**并且不这样做您正在尝试膨胀布局。所以在你的构造函数中，使用：

```
 this.mInflater= (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

# php - 获取所有 POST 数据并通过电子邮件发送

> ID：13232631
> 
> 赞同：9
> 
> 时间：2012-11-05T12:59:15.437
> 
> 标签：php, mysql, email

我正在尝试使用 PHP Mail 函数向自己发送一封包含所有帖子变量的电子邮件。

到目前为止，我有这个...

```
$message = foreach ($_POST as $key => $value)
echo "Field ".htmlspecialchars($key)." is ".htmlspecialchars($value)."<br>";

$message = wordwrap($message, 70);

mail('liam@site.co.uk', 'sghting', $message); 
```

只有提交的消息是我最后的帖子记录，有人能看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T13:02:13.590

```
foreach ($_POST as $key => $value)
    $message .= "Field ".htmlspecialchars($key)." is ".htmlspecialchars($value)."<br>";

mail('liam@site.co.uk', 'sghting', $message); 
```

`$message = foreach ($_POST as $key => $value)`不正确，这将遍历结果并存储最后一个。您希望将值存储在 $message 变量中，而不是回显它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:13:34.880

```
$message = "";
foreach ($_POST as $key => $value)
$message .= "Field ".htmlspecialchars($key)." is ".htmlspecialchars($value)."<br>";

mail('liam@site.co.uk', 'sghting', $message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-07T08:55:25.647

我个人只是`var_export()`用于这种事情。

```
$message = var_export($_POST,true); 
```

如果使用并设置为 TRUE，var_export() 将返回变量表示而不是输出它。

实践示例是：

```
mail('name@site.co.uk', 'Export of the Post Data', var_export($_POST,true)); 
```

或者如果你想做一些更漂亮的事情

```
$posted_data = var_export($_POST,true);
$message = '
<h4> Debug Registration Form on XXX </h4>
<p>Here is a dump of the posted data</p>
<pre>
'.$posted_data.'
</pre>
';
mail('name@site.co.uk', 'Export of the Posted Data', $message); 
```

# apache - 重写 - 虚拟目录和子域

> ID：13232632
> 
> 赞同：0
> 
> 时间：2012-11-05T12:59:19.313
> 
> 标签：apache, mod-rewrite, url-rewriting

我在 linux 上运行 Apache2 网络服务器 我的域是 peku33.net 在 apache 配置中，我将 DomainAlias 设置为 *.peku33.net

在我的 public_html 目录中，我有：

```
SomeSite.php
SomeOtherSite.php
SomeotherSiteEtc.php 
```

我想重定向

```
SomeSite.php -> peku33.net/SomeOTHERText/
SomeOtherSite.php -> mysite.peku33.net/SomethingElse/
SomeotherSiteEtc.php -> mysubdomain.peku33.net/Blablabla/Blabla/ 
```

我还想禁用对这些文件的直接访问（调用[http://peku33.net/SomeSite.php](http://peku33.net/SomeSite.php)将返回具有适当位置的 304 或 301 代码：）

感谢您的重播！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:42:49.677

很简单，只需在站点的文档根目录中的**.htaccess文件中添加以下内容即可（效率不高，因为 Apache 会在每次请求时读取和解析文件，还假设目录****Includes**已被允许在**httpd.conf**为您的站点文档根目录），或者最好在Apache 的**httpd.conf中的****Virtualhost**定义中，或相关的包含**.conf**：

 ****```
RewriteEngine On

RewriteCond %{HTTP_HOST)          ^peku33\.net$        [NC]
RewriteRule ^/?SomeOTHERText/     SomeSite.php         [L]

RewriteCond %{HTTP_HOST)          ^mysite              [NC]
RewriteRule ^/?SomethingElse/     SomeOtherSite.php    [L]

RewriteCond %{HTTP_HOST)          ^mysubdomaint        [NC]
RewriteRule ^/?Blablabla/Blabla/  SomeotherSiteEtc.php [L]

#Attempt to block direct requests to a .php script, only internally rewritten requests should get through 
RewriteCond %{THE_REQUEST}        SomeSite\.php        [NC]
RewriteRule ^/?SomeSite.php       -                    [F,NC] 
```

笔记：

```
F   = Fail   (Could use G=Gone or R=### instead)
NC  = Not Case-sensitive
L   = Last
^/? = optional leading slash, best to leave in place, as the leading slash is stripped from the URI, when the rule is .htaccess based. 
```

如果您不清楚上述规则的作用，或者如果您想要更抽象的东西，请考虑以下[Apache](http://www.experts-exchange.com/A_4043.html) mod_rewrite[文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:49:56.287

[http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)

```
Redirect /SomeSite.php http://peku33.net/SomeOTHERText/ 
```

您可以分别为 301、302 和 303 重定向添加`permanent`、`temp`和。`seeother`****

# postgresql - 如何从注释中传递mybatis中的间隔？

> ID：13232633
> 
> 赞同：3
> 
> 时间：2012-11-05T12:59:18.273
> 
> 标签：postgresql, annotations, mybatis

我通过注释使用 myBatis 从我的服务器获取数据。试图获取**n**天前的数据，注释：

```
@Select("SELECT o.title from user_order o where current_date - date_trunc('day', o.dateoforder) < '#{n} days'")
ArrayList<OrderRecord> getOrderHistory(@Param("n") int n); 
```

返回错误：

> 列索引超出范围：1，列数：0。查询数据库时出错。原因：org.postgresql.util.PSQLException：列索引超出范围：1，列数：0。

还，

```
@Select("SELECT o.title from user_order o where current_date - date_trunc('day', o.dateoforder) < #{n}")
ArrayList<OrderRecord> getOrderHistory(@Param("n") String n); 
```

当 n 类似于“5 天”时会产生类似的错误。

期望什么数据类型？

我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:11:12.667

Mybatis 需要一个区间参数，不能自动将整数或字符串转换成它。

需要传递一个***PGInterval***类型的对象。

```
PGInterval pginterval = new PGInterval("5 days"); 
```

并且注释必须是：

```
@Select("SELECT o.title from user_order o where current_date - date_trunc('day', o.dateoforder) < #{n}")
ArrayList<OrderRecord> getOrderHistory(@Param("n") PGInterval n); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T05:27:19.370

根据[此链接](http://www.postgresql.org/message-id/43D53825.10107@opencloud.com)，您还可以将值转换为 SQL 中的间隔。例如，这是我在我的应用程序中使用的：`now() + CAST(#{my_interval} AS INTERVAL)`.

其中“my_interval”是“5 天”字符串。

# google-app-engine - PDF 到 Google AppEngine 中的图像

> ID：13232635
> 
> 赞同：0
> 
> 时间：2012-11-05T12:59:24.220
> 
> 标签：google-app-engine, pdf, png

我们在 Google AppEngine 环境中有一个应用程序，我们需要将 PDF 文件转换为 PNG 图像。

有人知道可以在 GAE 环境中使用的解决方案吗？有人有免费解决方案的成功经验吗？有人可以推荐一些商业解决方案吗？

我们已经尝试过 PDFRenderer - 它是免费的并且可以正常工作，但看起来它不再受支持，并且它在处理某些文档时遇到了问题。

有 PDFBox 和 Ghostscript，但它们没有 API，只有命令行工具。它可以使用，但我们认为使用命令行工具会导致性能问题。有人对他们有经验吗？

有 Qoppa Software 支持的 PDFImages，如果没有找到任何免费的解决方案，我们计划使用它。有没有人有这方面的经验？

此外，还有一个想法可以使用 Google Drive 来实现。可以保存文件并以首选格式导出。你怎么看待这件事？

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:28:03.277

正如我之前评论的那样，将整个源代码导入您的项目并使用 PDFToImage.java 将 pdf 转换为图像是您的一种解决方案。使用 pdfbox，您可以将 pdf 转换为 jpeg 或 png 格式。您可以添加 png 作为参数或编辑类 PDFToImage，以默认创建 png 图像（但在您的情况下这不是一个好的解决方案）。

据我所知，要将 pdf 转换为图像，最好的工具是[ImageMagick](http://www.imagemagick.org/script/index.php)。它比 PDFBox 更快、更可靠。我认为 ImageMagick 也提供 API。请检查[此链接](http://www.imagemagick.org/script/api.php)并检查它是否对您有用。

# c++ - 隐式类型转换看不到基类匹配。错误或功能？

> ID：13232636
> 
> 赞同：2
> 
> 时间：2012-11-05T12:59:24.960
> 
> 标签：c++, implicit-conversion

如果生成的转换类型由于基类匹配而允许函数调用，我的编译器（GCC 4.7）似乎不会发出隐式类型转换，即转换结果`A`是`AB`.

```
class AB {};

class A: public AB
{
public:
  A(float i) {}
  A() {}
  A(const A& rhs) {}
  A(A&& rhs) {}
 };

AB operator*(const AB& lhs,const AB& rhs)
{
  // Return default constructed AB
}

void foo() {
  A a;
  auto tmp = 2.0 * a;   // This fails because no conversion rule was found.
} 
```

这是 C++ 语言的一个特性吗？如果是这样，在什么情况下不匹配基类会更好。

请不要回答可怜的编译器有很多事情要做，与基类匹配会太多。

**编辑**

```
c.cc:51:20: error: no match for ‘operator*’ in ‘2.0e+0 * a’
c.cc:51:20: note: candidate is: c.cc:42:1: note: AB operator*(const
AB&, const AB&) c.cc:42:1: note:   no known conversion for argument 1
from ‘double’ to ‘const AB&’ c.cc:51:20: error: unable to deduce
‘auto’ from ‘&lt;expression error>’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:32:27.050

> 请不要回答可怜的编译器有很多事情要做，与基类匹配会太多。

不，但我要告诉你的是，*糟糕的编译器有很多事情要做，而且它无法匹配所有潜在的派生类（或通过第三种类型进行的其他转换）*

您的代码中的问题不是编译器很乐意这样做的从to*向上*转换，而是它无法转换为. 允许的转换集是有限的，并且会产生有限的工作集。当您调用运算符时，它会找到一个包含两个对象的匹配项，并且它不知道如何直接将 转换为. 很明显，它可以创建一个临时的然后从它向上转换，因为它向上转换了第二个参数。对于不知道有多少潜在类型派生自（考虑单独编译的其他翻译单元）或什至可以从 a 构造并具有转换运算符的不相关类型的编译器来说，这不是很明显`A``AB``2.0``AB``AB``double``AB``A``A``double``AB`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:10:14.727

C++ 标准提供了这个格式错误的程序示例，其中包含与您的代码中类似的转换序列。见§13.3.1：

```
class T {
 public:
  T();
};
class C : T {
 public:
  C(int);
};
T a = 1;  // ill-formed: T(C(1)) not tried. 
```

# linux - 通过 Iptables 规则实现 IDS/IPS 功能

> ID：13232637
> 
> 赞同：0
> 
> 时间：2012-11-05T12:59:26.983
> 
> 标签：linux, ubuntu-12.04, intrusion-detection

iptables 是否具有 IDS/IPS 功能？

Linux：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:35:31.413

iptables 进行数据包检查/过滤/修改。IDS 和 IPS 是太宽泛的术语，无法在这种情况下使用。iptables 的某些功能确实属于 IDS 和 IPS 的范围，例如丢弃特定端口上的数据包，但大多数 IDS 或 IPS 功能将超出 iptables 的功能范围。

# ruby-on-rails - 如何检查嵌入式模型中的动态 mongoid 属性

> ID：13232639
> 
> 赞同：0
> 
> 时间：2012-11-05T12:59:33.873
> 
> 标签：ruby-on-rails, mongoid

我需要一种干净的方法来检查嵌入式 Mongoid 模型实例上是否存在动态属性。

这适用于顶级模型；

```
account.attributes.member?("coordinates") 
```

但我的坐标存储在嵌入式模型中，位置。以下抛出未定义的方法错误；

```
account.locations.attributes.member?("coordinates") 
```

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:19:42.193

因为似乎位置是一组嵌入式文档。大概有很多关系。

`attributes`数据类型没有方法名称`array`。这就是您收到未定义错误的原因。您可以通过以下方式解决此问题

```
 account.locations[0].attributes.member?("coordinates") 
```

或使用检查整个数组中的坐标成员

```
 account.locations.map {|x| [x.id,x.attributes.member? 'coordinates'] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:14:43.193

我最终得到了以下结果，因为我什至不能依赖位置属性在那里；

如果@account.locations？如果 !@account.locations[0].coordinates？如果@account.locations[0].coordinates.blank？#做某事结束结束结束

有点乱，但它有效。
感谢您的回复拉梅什！

请注意，由于某种原因，我无法使代码格式正常工作...对不起

# php - 多维数组的一行的最大值

> ID：13232642
> 
> 赞同：1
> 
> 时间：2012-11-05T12:59:42.973
> 
> 标签：php, arrays, row, multidimensional-array

我在找出多维数组的一行的最大值时遇到问题。

数组是这样的：

```
$array[$days][events] 
```

我从 1 到 31（一个月的几天）循环以接收当天 $days 的事件数。

对于下一步，我需要知道*事件*行的最高索引（值）。（可以是 0 到 1293xxxx 之间的任意数字）

我已经尝试过计数，但它只返回事件数，而不是最后一个事件索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:03:03.063

首先用 制作一个包含每天较高值的数组`max()`，然后`max()`在这个新数组上使用就可以了

```
$cnt = 0;
$tab = array();
while (isset($array[$cnt]))
{
    $tab[] = max($array[$cnt]);
    cnt++;
}
$maxvalue = max($tab); 
```

编辑：对不起，我不明白，我写的将是全球最高的。

你只需要`max()`在你想要的桌子上使用。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:14:04.890

尝试这个

```
for ($i = 0; $i <= 31; $i++) {
  ksort($array[$i], SORT_NUMERIC);
  end($array[$i]);
  $events[$i] = key($events);
} 
```

# mysql - 加入多个表

> ID：13232649
> 
> 赞同：2
> 
> 时间：2012-11-05T13:00:01.803
> 
> 标签：mysql, sql, select

我有 3 张桌子。第一个是人员名单：

桌子`Personnel`

```
`Id_personnel         Name
1                    John
2                    Alice
3                    Tom
4                    Charles
5                    Ben`
```

`Table `Department``

 ````
Id_personnel         Department
1                    Department 1
2                    Department 2
3                    Department 3
4                    Department 4
5                    Department 5 
```

and table with medical leave:

Table `Medical`

```
Id_personnel         Start_date         End_date
1                    2012-08-02         2012-08-05
2                    2012-08-02         2012-08-15
3                    2012-10-04         2012-10-06
4                    2012-10-04         2012-10-06
5                    2012-09-20         2012-09-21 
```

For a given date (let's say 2012-10-05) I want to have something like

```
Department 1                    John
Department 2                    Alice
Department 3                    Tom             2012-10-04         2012-10-06
Department 4                    Charles         2012-10-04         2012-10-06
Department 5                    Ben 
```

Using INNER JOIN I am able to get only those sick. I have something like this:

```
 SELECT a.Name, b.Department, c.Start_date, c.End_date FROM Personnel a
      INNER JOIN Department b ON a.Id_personnel = b.Id_personnel
      INNER JOIN Medical c ON a.Id_personnel = c.Id_personnel
   WHERE c.Start_date <= 2012-10-05  AND c.End_date >= 2012-10-05 
```

And the obvious wrong result is:` 

```
Department 3                    Tom             2012-10-04         2012-10-06
Department 4                    Charles         2012-10-04         2012-10-06 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:14:00.830

您应该在`CASE`Statement 中给出条件，而不是`WHERE`像这样的子句：

```
SELECT a.Name, b.Department,
  CASE WHEN c.Start_date <= '2012-10-05' AND c.End_date >= '2012-10-05' 
       THEN c.Start_date ELSE '' END AS Start_date
 ,CASE WHEN c.Start_date <= '2012-10-05' AND c.End_date >= '2012-10-05'
       THEN c.End_date ELSE '' END AS END_date
  FROM Personnel a
  JOIN Department b ON a.Id_personnel = b.Id_personnel
  JOIN Medical c ON a.Id_personnel = c.Id_personnel 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/baa28e/1)

### 更新^(（来自评论）)

如果您不想为同一部门重复同一个人，则需要将他们分组如下：

```
GROUP BY a.Id_personnel,Department 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/c1834/2)

### 更新 2

`GROUP_CONCAT`当同一个人有多个假期时，您需要使用函数：

```
SELECT DISTINCT a.Name, b.Department,
  GROUP_CONCAT(CASE WHEN c.Start_date <= '2012-10-05' 
                     AND c.End_date >= '2012-10-05' 
               THEN c.Start_date ELSE '' END SEPARATOR ' ') AS Start_date
 ,GROUP_CONCAT(CASE WHEN c.Start_date <= '2012-10-05' 
                     AND c.End_date >= '2012-10-05'
               THEN c.End_date ELSE '' END SEPARATOR '') AS END_date
  FROM Personnel a
  JOIN Department b ON a.Id_personnel = b.Id_personnel
  JOIN Medical c ON a.Id_personnel = c.Id_personnel
 GROUP BY a.Id_personnel,Department 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/fa88e/21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:01:57.403

尝试这个：

```
 SELECT a.Name, b.Department, c.Start_date, c.End_date
      FROM Personnel a
      Left JOIN Department b ON a.Id_personnel = b.Id_personnel
      Left JOIN Medical c ON a.Id_personnel = c.Id_personnel
   WHERE c.Start_date <= 2012-10-05  AND c.End_date >= 2012-10-05 
```

# objective-c - 如何在仅处理最新请求的 iOS 中实现工作队列？

> ID：13232655
> 
> 赞同：2
> 
> 时间：2012-11-05T13:00:24.203
> 
> 标签：objective-c, ios, concurrency

在我的 iOS 程序中，会发生以下情况：当用户键入时，会向启动数据库查找的线程发出请求。数据库查找完成后，会在主线程上触发响应，以便应用程序可以显示结果。

这很好用，除了如果用户输入速度非常快，可能会有几个请求在进行中。最终系统会赶上来，但它似乎效率低下。

是否有一种简洁的方法来实现它，以便如果发起请求，我可以检测到查找已经在进行中，并且应该将请求存储为“可能会取代正在进行的请求的最新请求”？

带有以下注释的示例解决方案

这是一个小型示例项目的视图控制器主体，它说明了解决方案的属性。键入时，您可能会得到如下输出：

```
2012-11-11 11:50:20.595 TestNsOperation[1168:c07] Queueing with 'd'
2012-11-11 11:50:20.899 TestNsOperation[1168:c07] Queueing with 'de'
2012-11-11 11:50:21.147 TestNsOperation[1168:c07] Queueing with 'det'
2012-11-11 11:50:21.371 TestNsOperation[1168:c07] Queueing with 'dett'
2012-11-11 11:50:21.599 TestNsOperation[1168:1b03] Skipped as out of date with 'd'
2012-11-11 11:50:22.605 TestNsOperation[1168:c07] Up to date with 'dett' 
```

在这种情况下，第一个入队操作将被跳过，因为它在执行冗长的工作时确定它已经过时。以下两个排队操作（'de' 和 'det'）在它们被允许执行之前就被取消了。最后的最终操作是唯一真正完成其所有工作的操作。

如果您注释掉 [self.lookupQueue cancelAllOperations] 行，您会得到以下行为：

```
2012-11-11 11:55:56.454 TestNsOperation[1221:c07] Queueing with 'd'
2012-11-11 11:55:56.517 TestNsOperation[1221:c07] Queueing with 'de'
2012-11-11 11:55:56.668 TestNsOperation[1221:c07] Queueing with 'det'
2012-11-11 11:55:56.818 TestNsOperation[1221:c07] Queueing with 'dett'
2012-11-11 11:55:56.868 TestNsOperation[1221:c07] Queueing with 'dette'
2012-11-11 11:55:57.458 TestNsOperation[1221:1c03] Skipped as out of date with 'd'
2012-11-11 11:55:58.461 TestNsOperation[1221:4303] Skipped as out of date with 'de'
2012-11-11 11:55:59.464 TestNsOperation[1221:1c03] Skipped as out of date with 'det'
2012-11-11 11:56:00.467 TestNsOperation[1221:4303] Skipped as out of date with 'dett'
2012-11-11 11:56:01.470 TestNsOperation[1221:c07] Up to date with 'dette' 
```

在这种情况下，所有入队的操作都将执行其工作的长度部分，即使一个较新的操作在它被安排执行之前已经入队。

```
@interface SGPTViewController ()

@property (nonatomic, strong) NSString* oldText;
@property (strong) NSOperationQueue *lookupQueue;

@end

@implementation SGPTViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.oldText = self.source.text;
    self.lookupQueue = [[NSOperationQueue alloc] init];
    self.lookupQueue.maxConcurrentOperationCount = 1;
}

- (void)textViewDidChange:(UITextView *)textView
{
    // avoid having a strong reference to self in the operation queue
    SGPTViewController * __weak blockSelf = self;

    // you can cancel existing operations here if you want
    [self.lookupQueue cancelAllOperations];

    NSString *outsideTextAsItWasWhenStarted = [NSString stringWithString:self.source.text];
    NSLog(@"Queueing with '%@'", outsideTextAsItWasWhenStarted);
    [self.lookupQueue addOperationWithBlock:^{
        // do stuff
        NSString *textAsItWasWhenStarted = [NSString stringWithString:outsideTextAsItWasWhenStarted];
        [NSThread sleepForTimeInterval:1.0];
        if (blockSelf.lookupQueue.operationCount == 1) {
            // do more stuff if there is only one operation on the queue,
            // i.e. this one. Operations are removed when they are completed or cancelled.
            // I should be canceled or up to date at this stage
            dispatch_sync(dispatch_get_main_queue(), ^{
                if (![textAsItWasWhenStarted isEqualToString:self.source.text]) {
                    NSLog(@"NOT up to date with '%@'", textAsItWasWhenStarted);
                } else {
                    NSLog(@"Up to date with '%@'", textAsItWasWhenStarted);
                }
            });
        } else {
            NSLog(@"Skipped as out of date with '%@'", textAsItWasWhenStarted);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:34:14.963

如果您的查询确实需要很长时间，我会想到一种机制，该机制会减慢查询速度，比如说 1s 并取消以前的查询请求（如果有）。因此，如果您使用的是块，它可能是这样的：

```
@interface YourViewController
   @property(assign) NSInteger currentTaskId; // atomic

...

@implementation YourViewController
@synthesize currentTaskId;
// your target method
- (void)textFieldDidChange
{
        self.currentTaskId = self.currentTaskId + 1;
        NSInteger taskId = self.currentTaskId;

        dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC), queue, ^{
            if (taskId == self.currentTaskId) // this is still current task
            {
                // your query

                if (taskId == self.currentTaskId) // sill current after query? update visual elements
                {
                    // your main thread updates
                }
            } // else - there is newer task so skip this old query 
        });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T21:11:26.347

对于这种情况，我喜欢 NSOperationQueue。

```
@interface ClassName ()
...
// atomic since it does not specify nonatomic
@property (strong) NSOperationQueue *lookupQueue;
...
@end

- (id)init
{
    ...
    lookupQueue = [[NSOperationQueue alloc] init];
    lookupQueue.maxConcurrentOperationCount = 1;
    ...
}

- (void)textFieldDidChange
{
    // avoid having a strong reference to self in the operation queue
    ClassName * __weak blockSelf = self;

    // you can cancel existing operations here if you want
    // [lookupQueue cancelAllOperations];

    [lookupQueue addOperationWithBlock:^{
        // do stuff
        ...
        if (blockSelf.lookupQueue.operationCount == 1) {
            // do more stuff if there is only one operation on the queue,
            // i.e. this one. Operations are removed when they are completed or cancelled.
        }
    }];
} 
```

编辑：请注意，您需要使用 [[NSOperationQueue mainQueue] addOperationWithBlock:] 或类似方法来更新 GUI 或运行必须在主线程上运行的任何其他代码，从 [lookupQueue addOperationWithBlock:] 的块参数内部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T04:48:07.300

`NSOperationQueue`提供了一种方法`-cancelAllOperations`。所以只要在添加操作时调用它，如果操作已经在运行。剩下的问题是您的`NSOperation`子类必须定期检查它是否已被取消（并且在这种情况下停止做事）。该检查被放置在您的覆盖中`-main`。

# java - 单线程不可修改列表中的 ConcurrentModificationException

> ID：13232657
> 
> 赞同：1
> 
> 时间：2012-11-05T13:00:30.773
> 
> 标签：java, collections

我有一个单线程应用程序，它遍历一个巨大的树结构，其中子项存储在一个列表中。迭代器总是在一个不可修改的列表上运行：

```
public List<HierarchyNode> getChildren() {  
        return Collections.unmodifiableList(children);  
} 
```

我仍然在某个时候得到 ConcurrentModificationException，我认为这在不可修改的列表中是不可能的？迭代是使用访问者完成的......任何想法这怎么可能？

编辑：唯一可以修改此列表的是持有该列表的类的构造函数：

```
private final List<HierarchyNode> children; 
```

也许这与树的内存使用量相当大（> 4GB）有关？

痕迹：

```
Testcase: testParserSingleFile(General.NetlistBuilder): Caused an ERROR
null
java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at java.util.Collections$UnmodifiableCollection$1.next(Collections.java:1067)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitArchitectureNode(HierarchyNodeVisitorImplementation.java:20)
    at com.bevm.semantics.netlist.NetlistBuilder.visitArchitectureNode(NetlistBuilder.java:40)
    at com.bevm.hierarchy.ArchitectureNode.accept(ArchitectureNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitEntityNode(HierarchyNodeVisitorImplementation.java:33)
    at com.bevm.semantics.netlist.NetlistBuilder.visitEntityNode(NetlistBuilder.java:33)
    at com.bevm.hierarchy.EntityNode.accept(EntityNode.java:33)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitComponentNode(HierarchyNodeVisitorImplementation.java:27)
    at com.bevm.hierarchy.ComponentNode.accept(ComponentNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitInstanceNode(HierarchyNodeVisitorImplementation.java:45)
    at com.bevm.semantics.netlist.NetlistBuilder.visitInstanceNode(NetlistBuilder.java:85)
    at com.bevm.hierarchy.InstanceNode.accept(InstanceNode.java:89)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitArchitectureNode(HierarchyNodeVisitorImplementation.java:21)
    at com.bevm.semantics.netlist.NetlistBuilder.visitArchitectureNode(NetlistBuilder.java:40)
    at com.bevm.hierarchy.ArchitectureNode.accept(ArchitectureNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitEntityNode(HierarchyNodeVisitorImplementation.java:33)
    at com.bevm.semantics.netlist.NetlistBuilder.visitEntityNode(NetlistBuilder.java:33)
    at com.bevm.hierarchy.EntityNode.accept(EntityNode.java:33)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitComponentNode(HierarchyNodeVisitorImplementation.java:27)
    at com.bevm.hierarchy.ComponentNode.accept(ComponentNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitInstanceNode(HierarchyNodeVisitorImplementation.java:45)
    at com.bevm.semantics.netlist.NetlistBuilder.visitInstanceNode(NetlistBuilder.java:85)
    at com.bevm.hierarchy.InstanceNode.accept(InstanceNode.java:89)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitArchitectureNode(HierarchyNodeVisitorImplementation.java:21)
    at com.bevm.semantics.netlist.NetlistBuilder.visitArchitectureNode(NetlistBuilder.java:40)
    at com.bevm.hierarchy.ArchitectureNode.accept(ArchitectureNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitEntityNode(HierarchyNodeVisitorImplementation.java:33)
    at com.bevm.semantics.netlist.NetlistBuilder.visitEntityNode(NetlistBuilder.java:33)
    at com.bevm.hierarchy.EntityNode.accept(EntityNode.java:33)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitComponentNode(HierarchyNodeVisitorImplementation.java:27)
    at com.bevm.hierarchy.ComponentNode.accept(ComponentNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitInstanceNode(HierarchyNodeVisitorImplementation.java:45)
    at com.bevm.semantics.netlist.NetlistBuilder.visitInstanceNode(NetlistBuilder.java:85)
    at com.bevm.hierarchy.InstanceNode.accept(InstanceNode.java:89)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitGenerateNode(HierarchyNodeVisitorImplementation.java:39)
    at com.bevm.semantics.netlist.NetlistBuilder.visitGenerateNode(NetlistBuilder.java:79)
    at com.bevm.hierarchy.GenerateNode.accept(GenerateNode.java:27)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitArchitectureNode(HierarchyNodeVisitorImplementation.java:21)
    at com.bevm.semantics.netlist.NetlistBuilder.visitArchitectureNode(NetlistBuilder.java:40)
    at com.bevm.hierarchy.ArchitectureNode.accept(ArchitectureNode.java:25)
    at com.bevm.hierarchy.HierarchyNodeVisitorImplementation.visitEntityNode(HierarchyNodeVisitorImplementation.java:33)
    at com.bevm.semantics.netlist.NetlistBuilder.visitEntityNode(NetlistBuilder.java:33)
    at com.bevm.hierarchy.EntityNode.accept(EntityNode.java:33)
    at com.beckhoff.vmagic.hierarchy.HierarchyNodeVisitorImplementation.visit(HierarchyNodeVisitorImplementation.java:15)
    at General.NetlistBuilder.testParserSingleFile(NetlistBuilder.java:125) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T13:03:07.600

所以`Collection.unmodifiableList`并不是真正的线程安全。这是因为它创建了一个不可修改的底层视图`List`。但是，如果在迭代视图时修改了底层证券`List`，您将获得 CME。请记住，CME 不需要由单独的线程引起。如果我执行以下操作，我将获得 CME：

```
 for (String e : myList){
     myList.remove(5); // throws CME
 } 
```

更好的选择是 Guava 的[ImmutableList](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html)，它创建了传递列表的不可变副本。

为了澄清由于评论，将发布的代码替换为：

```
 public List<HierarchyNode> getChildren() {  
        return ImmutableList.copyOf(children);  
    } 
```

从这个`List`方法返回的保证永远不会抛出 CME。

更新：

如果您仍在尝试找出代码中出现这种情况的原因，请考虑以下事项：

1.  可以修改 EVER 的列表`children`（我指的`List`是传递给的可修改的`unmodifiableList`）吗？
2.  是否有任何调用的类`getChildren`会导致以可能更新列表的方式调用包含可修改列表的类？
3.  或者是否有任何类获​​得了一个`Iterator`多次使用的实例？

[不可变列表](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/ImmutableList.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:10:00.763

> 只有一个可以修改这个列表的人是持有它的类的构造函数

在这种情况下，您根本不需要修改它。我建议你让它总是不可变的，你不会遇到这个问题。

在你的构造函数中，你可以做

```
List<HierarchyNode> children = new ArrayList<>();
// create/modify collection.

this.children = Collections.immutableList(children); 
```

这简化了您的方法

```
public List<HierarchyNode> getChildren() {  
    return children;  
} 
```

如果您进行这些更改，我怀疑您会找到该集合被修改的位置。

* * *

问题是`Collections.unmodifiableList()`阻止使用此方法返回的引用进行修改。它不会阻止对您要包装的集合的修改。

```
List<String> words = new ArrayList<String>();
words.add("hello");
words.add("world");
List<String> unmodifiable = Collections.unmodifiableList(words);
List<String> copy = new ArrayList<String>(words);

System.out.println("Before modification");
System.out.println("words: " + words);
System.out.println("unmodifiable: " + unmodifiable);
System.out.println("copy: " + copy);

words.remove("hello");
words.add("hi");

System.out.println("\nAfter modification");
System.out.println("words: " + words);
System.out.println("unmodifiable: " + unmodifiable);
System.out.println("copy: " + copy); 
```

印刷

```
Before modification
words: [hello, world]
unmodifiable: [hello, world]
copy: [hello, world]

After modification
words: [world, hi]
unmodifiable: [world, hi]
copy: [hello, world] 
```

不添加新库的解决方案是在返回之前复制集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:25:17.730

您可能正在尝试修改迭代中的列表，如下所示*：*

```
Iterator iter = list.iterator();
while (iter.hasNext()) {
  if (someCondition)
    list.remove(someObject);
} 
```

相反，这是你应该做的：

```
for (int i = 0; i < list.size(); i++) {
 if (someCondition)
    list.remove(i--);
 } 
```

如果您的逻辑允许，您可以使用 CopyOnWriteArrayList。每次修改列表时，此实现都会为您提供一个新的列表副本。这对于您对列表进行大量迭代但修改很少的情况以及给定迭代不需要反映对列表的最近修改的情况很有用。我在调度程序/订阅者应用程序中使用了很多，它在性能方面表现出色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:04:02.093

您不能修改 Collection 然后在其上使用现有的迭代器 - 您是否试图在某处修改列表（这里我的意思也是*原始*列表）？

从[ConcurrentModificationException](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)：

> 请注意，此异常并不总是表示对象已被不同的线程同时修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T14:02:06.257

抱歉，你们中的大多数人是对的，简单的答案是列表并非真的不可修改......同一类的所有对象都不使用 getChildren() 方法，而是直接访问私有成员。所以我将不得不继续在代码中搜索......你的评论会有所帮助

# c# - EF5 / Base Repository 的并发问题

> ID：13232660
> 
> 赞同：0
> 
> 时间：2012-11-05T13:00:39.290
> 
> 标签：c#, entity-framework

我已经完成了一个新应用程序的编写，该应用程序现在已经部署到实时环境中，但是我的全局错误处理程序全天多次处理这些异常。这些错误是分批出现的，是四个粗体错误之一。

MVC 4、IIS 6、Windows Server 2003、.Net .4.0、EF 5（来自 NuGet 的最新版本）

**'ARandomModelInMyContext' 类型已被多次映射。**

**指数超出范围。必须是非负数且小于集合的大小。**

```
Parameter name: index
System.ThrowHelper.ThrowArgumentOutOfRangeException() at System.Data.Metadata.Edm.MetadataCollection`1.get_Item(Int32 index) at System.Data.Mapping.DefaultObjectMappingItemCollection.ContainsMap(GlobalItem cspaceItem, ObjectTypeMapping& map) at 
```

**创建模型时不能使用上下文。**

```
System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() 
```

**基础提供程序在打开时失败。连接未关闭。连接的当前状态是正在连接。**

应用程序的结构是一个非常标准的 MVC4 应用程序，具有服务层和存储库层。

*   服务在构造函数中创建一个 repo
*   存储库在存储库构造函数中创建一个新的上下文，如下所示：

`public class MyRepository : BaseRepository<MyModel>, IMyRepository`

使用构造函数：

```
public MyRepository() : base(new MyEntities())
{
} 
```

基本存储库如下所示：

```
public class BaseRepository<TEntity> where TEntity : class
{
    internal CRMEntities Context;
    internal DbSet<TEntity> dbSet;
    public BaseRepository(MyEntities context)
    {
        this.Context = context;
        dbSet = context.Set<TEntity>();
    }
} 
```

不应该有任何并发​​问题，因为我没有直接使用任何线程或异步。

有任何想法吗？我的存储库结构可以改进吗？我已经让所有的构造函数都可以 DI，但是我还没有使用 IoC 容器。

将存储库中 Context 的构造锁定是否值得？例如：

```
public class BaseRepository<TEntity> where TEntity : class
{
    internal MyEntities Context;
    internal DbSet<TEntity> dbSet;
    private static object _lock = new object();

    public BaseRepository(MyEntities context)
    {
        lock (_lock)
        {
            this.Context = context;
            dbSet = context.Set<TEntity>();
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:36:15.423

它看起来非常像您的存储库（以及您的上下文）被多个请求使用。如果这是真的，那么这是对同一上下文实例的多线程使用，这是不受支持的——上下文不是线程安全的。仅锁定初始化是不够的。（此外，调用 Set 不会初始化上下文。）您需要保护对上下文的所有访问，或者更恰当地使用具有短期上下文实例的每个请求模型的上下文。

# ios - Yozio 之类的服务如何在没有 UDID 的情况下跟踪单个用户的应用安装？

> ID：13232662
> 
> 赞同：1
> 
> 时间：2012-11-05T13:00:55.563
> 
> 标签：ios, udid

我正在查看 yozio 代码，它们似乎使用设备名称和 IP 地址作为指纹进行跟踪。这是否可靠，因为 ip 地址可以更改，并且设备名称在多个设备上可能相同，例如“Bob 的 iPhone”。我的假设错了吗？

这是 Yozio 的实现

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

  NSString *appKey = @"e78ffa70-0975-0130-2e03-12314000ac7c";
  NSString *deviceName = [[[UIDevice currentDevice] name] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  NSString *url = [NSString stringWithFormat:@"http://yoz.io/e?app_key=%@&device_name=%@", appKey, deviceName];
  [NSURLConnection connectionWithRequest:[NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]] delegate:nil];

  // Your app code here...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:19:44.657

他们在隐私[文章中描述了这个过程](http://yoz.io/privacy)

> 指标和分析：Yozio 收集有关通过 Yozio 服务创建的每个缩短 URL 的访问（例如点击）的信息。此信息包括但不限于：(i) 访问缩短 URL 的设备的 HTTP 标头中的 IP 地址和任何其他信息；(ii) 来自访问缩短 URL 的网络浏览器的信息，例如 cookie；(iii) 推荐网站或服务；(iv) 每次访问的时间和日期；(v) 有关在 AdMob 和 Facebook 等第三方服务上共享缩短 URL 的信息。Yozio 使用这些指标和分析来改进其网站和服务。

我认为应用到[WURFL](http://webdesign.about.com/gi/o.htm?zi=1/XJ&zTi=1&sdn=webdesign&cdn=compute&tm=69&f=00&su=p284.13.342.ip_p504.6.342.ip_&tt=2&bt=1&bts=0&zu=http://wurfl.sourceforge.net/)的用户代理数据的设备名称可能会产生非常接近唯一的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:20:24.460

我会这样做：

```
+(NSString*) uniqueIdentifier {

    // Check if one exists
    if ([[NSUserDefaults standardUserDefaults] stringForKey:@"uniqueIdentifier"].length > 0)
        return [[NSUserDefaults standardUserDefaults] stringForKey:@"uniqueIdentifier"];

    // One doesn't exist, create one
    CFUUIDRef uuid = CFUUIDCreate(kCFAllocatorDefault);
    NSString* uuidStr = (__bridge NSString*) CFUUIDCreateString(kCFAllocatorDefault, uuid);
    CFRelease(uuid);
    [[NSUserDefaults standardUserDefaults] setValue:uuidStr forKey:@"uniqueIdentifier"];
    return uuidStr;

} 
```

# mysql - MySQL select date BETWEEN 语法打印错误结果

> ID：13232666
> 
> 赞同：0
> 
> 时间：2012-11-05T13:01:27.790
> 
> 标签：mysql, date, between

我有这个又长又讨厌的`MySQL`查询：

```
SELECT * FROM
    studentdates sd
        INNER JOIN
    students s ON s.student_id = sd.student_id
        INNER JOIN
    cityselections cs ON cs.city_id = s.student_city_id
        INNER JOIN
    customers c ON c.customer_id = s.student_customer_id
        INNER JOIN
    price_to_course_number ptcn ON ptcn.ptcn_course_number = sd.student_course_number
        INNER JOIN
    pricegroups pg ON pg.price_id = ptcn.ptcn_price_id
WHERE
    ('2012-10-01' OR '2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate)
        AND cs.city_id = '12'
        AND sd.student_course_number = '46248'
ORDER BY s.student_lastname ASC 
```

这将打印以下行（编辑掉不必要的列）：

```
+------------+--------------------+-----------------+
| student_id | student_startdate  | student_enddate |
+------------+--------------------+-----------------+
| 299        | 2012-09-24         | 2012-10-21      |
| 299        | 2012-09-17         | 2012-09-23      |
+------------+--------------------+-----------------+ 
```

在我的查询中注意我有`WHERE ('2012-10-01' OR '2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate)`

为什么我会得到这个结果？

`| 299 | 2012-09-17 | 2012-09-23 |`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:06:19.303

```
SELECT * FROM
    studentdates sd
        INNER JOIN
    students s ON s.student_id = sd.student_id
        INNER JOIN
    cityselections cs ON cs.city_id = s.student_city_id
        INNER JOIN
    customers c ON c.customer_id = s.student_customer_id
        INNER JOIN
    price_to_course_number ptcn ON ptcn.ptcn_course_number = sd.student_course_number
        INNER JOIN
    pricegroups pg ON pg.price_id = ptcn.ptcn_price_id
WHERE
    sd.student_startdate >='2012-10-01' and  sd.student_enddate <='2012-10-31' 
        AND cs.city_id = '12'
        AND sd.student_course_number = '46248'
ORDER BY s.student_lastname ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:06:37.740

`AND`和`OR`用于连接布尔表达式。在您的情况下，您有以下表达式：

```
'2012-10-01' OR '2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate 
```

这有两个部分（由 OR 关系连接）：

1.  `'2012-10-01'`
2.  `'2012-10-31' BETWEEN sd.student_startdate AND sd.student_enddate`

第一部分将始终计算为`true`（非零，非空），因此该表达式的结果也将始终为真。

* * *

你也许是这个意思？

```
sd.student_enddate >= '2012-10-01' AND sd.student_startdate <= '2012-10-31' 
```

# java - Java中字符串ID的含义是什么？

> ID：13232667
> 
> 赞同：3
> 
> 时间：2012-11-05T13:01:27.917
> 
> 标签：java, string

> **可能重复：**
> [为什么当我们有 == 运算符时使用 equals() 方法？](https://stackoverflow.com/questions/2772763/why-equals-method-when-we-have-operator)

当我尝试在 Java 中执行代码时，它给了我 2 个不同的输出

```
String txt1="Hello";
String txt2="Hello";
System.out.println((boolean)txt1==txt2);

String txt1=new String("Hello");
String txt2=new String("Hello");
System.out.println((boolean)txt1==txt2); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T13:03:13.207

字符串是对象。`==`比较对象引用，而不是字符串的内容。为此，请使用该`String#equals`方法。

在您的第一个示例中，`txt1`and`txt2`是指向*同一个* `String`对象的两个变量。所以他们是`==`彼此的。

在您的第二个示例中，`txt1`并且`txt2`指向两个*不同* `String`的对象（它们具有相同的字符序列），因此它们彼此不`==`相关。

* * *

另外：写作几乎没有任何意义`new String("string literal")`。如果你不知道一个非常非常好的理由去做这件事，不要这样做。只有几个非常、非常、*非常*不寻常的情况下你可能会这样做，这与与低级别的东西交互有关。不是在正常的、可移植的 Java 代码中。

*有时*有使用的理由`new String(String)`（不是字符串*文字*，而是您从其他地方获得的实例，例如`substring`）。有关更多信息，请参阅[本文](http://kjetilod.blogspot.in/2008/09/string-constructor-considered-useless.html)（感谢[Rp-](http://kjetilod.blogspot.in/2008/09/string-constructor-considered-useless.html)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:06:17.693

运算符将`==`检查引用是否相等，也就是说，`true`如果两个参数`String`s 是同一个实例，则返回。

每当一个`String`字面量（例如`"Hello"`）出现在一个类中时，一个`String`实例就会*被实习*（一种存储在内部缓存中以便可以重用）。

做完之后`String txt1="Hello"`，`txt1`会是实习生的参考`String`。所以，

```
String txt1="Hello";
String txt2="Hello"; 
```

结果是相同的实例`txt1`，`txt2`即被拘留的实例。

当您执行此操作`String txt1=new String("Hello")`时，它会`String`以实习实例作为参数调用构造函数（一种复制构造函数）。因此，`txt1`将是一个与实习实例具有相同值的**新** `String`实例，并且`==`操作符将返回`false`。

有关该主题的更多信息，请参见 [3.10.5。JLS 的字符串文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)部分。

> 字符串文字是对 String 类实例的引用（第 4.3.1 节、第 4.3.3 节）。
> 
> 此外，字符串字面量总是引用 String 类的同一个实例。这是因为字符串字面量 - 或者更一般地说，作为常量表达式值的字符串（第 15.28 节） - 是“内部的”，以便使用 String.intern 方法共享唯一实例。

以下问题的答案解释了[Java 字符串何时被实习？](https://stackoverflow.com/q/3451145/851811). 以下链接详细说明了该主题：[字符串平等和实习](http://javatechniques.com/blog/string-equality-and-interning/)。

作为旁注，请记住使用`equals()`以便根据其内容执行字符串比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T13:05:52.280

在可能的情况下，Java 会尝试将字符串“共享”到安全空间。

```
String txt1="Hello";
String txt2="Hello"; 
```

是对同一个对象的两个引用（“Hello”）

```
String txt1=new String("Hello");
String txt2=new String("Hello"); 
```

是对两个不同实例的两个引用，每个实例都由副本初始化。

如果比较字符串，请始终使用“equals()”，否则结果难以预测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:05:50.453

如果要比较引用，请使用`==`运算符。

如果要比较两个字符串的内容，请使用`equals`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T13:07:44.267

做这个

```
String txt1="Hello";
String txt2="Hello";
System.out.println(txt1.hashCode());
System.out.println(txt2.hashCode());
System.out.println((boolean)txt1==txt2);

String txt1=new String("Hello");
String txt2=new String("Hello");
System.out.println(txt1.hashCode());
System.out.println(txt2.hashCode());
System.out.println((boolean)txt1==txt2); 
```

您可以了解 java 在内部的处理方式。

# intel - 在 Intel 机器上使用 SSSE3 的预期加速

> ID：13232668
> 
> 赞同：1
> 
> 时间：2012-11-05T13:01:39.617
> 
> 标签：intel, sse

在实现图像处理应用程序时，在英特尔机器上使用 SSSE3 的预期加速是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:40:22.013

SSSE3 并没有提供比 SSE3 更多的功能；但听起来您对图像处理任务很感兴趣，SSSE3 确实为此提供了一些好处；如果您碰巧正在执行一个可以很好地映射到 PMULHRSW 指令的操作（颜色空间转换，一些 alpha 操作），那么它可能会非常有益（如果您可以大量使用它，则可以提高 2 倍的速度；但这通常需要将您的代码重写为使用它——编译器为你生成一个非常困难的指令）。

PSHUFB 是另一个有用的指令；您可以使用它来进行微小的表查找，而无需收集负载，这在图像处理中非常有用。如果您有自然映射到 PSHUFB 的序列，它可以为您带来巨大的加速，但同样，有效地使用指令可能需要对算法进行重大更改。

对于其他 SSSE3 操作，我从未见过真正引人注目的用例（当它被引入时，PALIGNR*偶尔*会很有用，但从那时起，未对齐的内存访问变得更加高效，这使得它的用处大大降低）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:58:54.657

如果应用程序主要由`pshufb`或类似的指令组成，您的应用程序可能会加速数倍。

如果有一些库函数正在使用，它们有一个`SSSE3`优化的版本，你可能会看到一个最小的、几乎无法测量的增益。

如果应用程序不包含此类指令，并且所使用的算法不容易转化为`SSSE3`指令，则根本不会有任何收获。

前一种情况极为罕见，后一种情况极有可能。

# android - android facebook图片帖子不起作用

> ID：13232669
> 
> 赞同：0
> 
> 时间：2012-11-05T13:01:40.523
> 
> 标签：android

我正在使用下面的代码在 facebook 上发布图像。

在下面的代码中，我将文本和图像从我的应用程序发布到 facebook。当我运行此代码时，它会启动 progressdialogue，然后显示成功发布的消息。但是facebook墙上没有图像和消息。

```
public void postToWall(final String message) {
        _progressDialog = ProgressDialog.show(_activity, "","Sharing on Facebook. Please wait.");
        new Thread(new Runnable() {
            public void run() {
                try {
                    byte[] data = null;
                    Uri selectedImage =Uri.parse(filePath);
                    String[] filePathColumn = { MediaStore.Images.Media.DATA };

                    Cursor cursor = _activity.getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
                    cursor.moveToFirst();

                    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                    String picturePath = cursor.getString(columnIndex);
                    cursor.close();                 
                    //String path = filePath+"/screeshot.jpg";

                    Bitmap bi = BitmapFactory.decodeFile(picturePath);
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    bi.compress(Bitmap.CompressFormat.PNG, 100, baos);
                    data = baos.toByteArray();
                    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
                    String accessToken = facebook.getAccessToken();
                    Bundle params = new Bundle();
                    params.putString("message", message);
                    params.putByteArray("picture", data);
                    params.putString(Facebook.TOKEN, accessToken);

                    @SuppressWarnings("unused")
                    String response1 = facebook.request("photos", params, "POST");
                    _progressDialog.cancel();
                    Message msg = new Message();
                    msg.arg1 = 0;
                    saveHandler.sendMessage(msg);
                } catch (Exception e) {
                    _progressDialog.cancel();
                    e.printStackTrace();
                }   
                catch (OutOfMemoryError e1) {
                    _progressDialog.cancel();
                    e1.printStackTrace();
                }   
            }
        }).start();
    } 
```

以下是logcat：

```
11-06 06:01:41.083: E/MapActivity(571): Couldn't get connection factory client
11-06 06:01:47.372: W/System.err(571): IOException processing: 26
11-06 06:01:47.372: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:47.402: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:47.402: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:47.422: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:47.422: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:47.433: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:47.462: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:48.802: W/System.err(571): IOException processing: 26
11-06 06:01:48.812: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:48.822: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:48.822: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:48.832: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:48.832: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:48.843: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:48.843: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:49.562: W/KeyCharacterMap(571): No keyboard for id 0
11-06 06:01:49.562: W/KeyCharacterMap(571): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
11-06 06:01:50.153: W/System.err(571): IOException processing: 26
11-06 06:01:50.162: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:50.172: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:50.182: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:50.202: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:50.212: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:50.212: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:50.222: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:51.582: W/System.err(571): IOException processing: 26
11-06 06:01:51.582: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:51.591: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:51.591: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:51.602: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:51.612: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:51.612: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:51.622: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:52.922: W/System.err(571): IOException processing: 26
11-06 06:01:52.922: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:52.932: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:52.952: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:52.963: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:52.972: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:52.983: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:52.983: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:54.372: D/dalvikvm(571): GREF has increased to 201
11-06 06:01:54.462: W/System.err(571): IOException processing: 26
11-06 06:01:54.472: W/System.err(571): java.io.IOException: Server returned: 3
11-06 06:01:54.472: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
11-06 06:01:54.502: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
11-06 06:01:54.502: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
11-06 06:01:54.511: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
11-06 06:01:54.523: W/System.err(571):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
11-06 06:01:54.552: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019)
11-06 06:01:59.552: I/System.out(571): Root View : com.android.internal.policy.impl.PhoneWindow$DecorView@406683b0
11-06 06:03:39.962: I/MapActivity(571): Handling network change notification:CONNECTED
11-06 06:03:39.992: W/IdleConnectionHandler(571): Removing a connection that never existed!
11-06 06:03:59.922: D/dalvikvm(571): GC_CONCURRENT freed 1749K, 54% free 3709K/7943K, external 15035K/15048K, paused 12ms+8ms
11-06 06:04:41.782: D/dalvikvm(571): GC_EXTERNAL_ALLOC freed 152K, 54% free 3655K/7943K, external 14707K/15048K, paused 65ms
11-06 06:04:47.622: I/System.out(571): Root View : com.android.internal.policy.impl.PhoneWindow$DecorView@406683b0
11-06 06:06:27.991: I/MapActivity(571): Handling network change notification:CONNECTED
11-06 06:06:29.342: D/dalvikvm(571): GC_FOR_MALLOC freed 320K, 51% free 3940K/7943K, external 16047K/16796K, paused 81ms
11-06 06:06:30.552: D/dalvikvm(571): GC_FOR_MALLOC freed 285K, 51% free 4159K/8455K, external 15397K/16796K, paused 56ms
11-06 06:07:08.492: D/dalvikvm(571): GC_FOR_MALLOC freed 1172K, 46% free 4637K/8455K, external 15397K/16796K, paused 102ms
11-06 06:07:08.492: I/dalvikvm-heap(571): Forcing collection of SoftReferences for 867890-byte allocation
11-06 06:07:08.573: D/dalvikvm(571): GC_FOR_MALLOC freed 118K, 47% free 4519K/8455K, external 15397K/16796K, paused 50ms
11-06 06:07:08.573: E/dalvikvm-heap(571): Out of memory on a 867890-byte allocation.
11-06 06:07:08.622: I/dalvikvm(571): "Thread-20" prio=5 tid=9 RUNNABLE
11-06 06:07:08.622: I/dalvikvm(571):   | group="main" sCount=0 dsCount=0 obj=0x405df7b0 self=0x3fe760
11-06 06:07:08.642: I/dalvikvm(571):   | sysTid=586 nice=0 sched=0/0 cgrp=default handle=4188312
11-06 06:07:08.654: I/dalvikvm(571):   | schedstat=( 15498409993 2080675107 364 )
11-06 06:07:08.654: I/dalvikvm(571):   at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:~91)
11-06 06:07:08.662: I/dalvikvm(571):   at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:216)
11-06 06:07:08.662: I/dalvikvm(571):   at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.write(RetryableOutputStream.java:60)
11-06 06:07:08.662: I/dalvikvm(571):   at java.io.BufferedOutputStream.write(BufferedOutputStream.java:129)
11-06 06:07:08.662: I/dalvikvm(571):   at java.io.FilterOutputStream.write(FilterOutputStream.java:105)
11-06 06:07:08.662: I/dalvikvm(571):   at com.icouponz.facebook.Util.openUrl(Util.java:203)
11-06 06:07:08.662: I/dalvikvm(571):   at com.icouponz.facebook.Facebook.request(Facebook.java:533)
11-06 06:07:08.662: I/dalvikvm(571):   at com.icouponz.FacebookHandler$2.run(FacebookHandler.java:147)
11-06 06:07:08.662: I/dalvikvm(571):   at java.lang.Thread.run(Thread.java:1019)
11-06 06:07:09.062: W/System.err(571): java.lang.OutOfMemoryError
11-06 06:07:09.082: W/System.err(571):  at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
11-06 06:07:09.122: W/System.err(571):  at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:216)
11-06 06:07:09.122: W/System.err(571):  at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.write(RetryableOutputStream.java:60)
11-06 06:07:09.154: W/System.err(571):  at java.io.BufferedOutputStream.write(BufferedOutputStream.java:129)
11-06 06:07:09.174: W/System.err(571):  at java.io.FilterOutputStream.write(FilterOutputStream.java:105)
11-06 06:07:09.174: W/System.err(571):  at com.icouponz.facebook.Util.openUrl(Util.java:203)
11-06 06:07:09.252: W/System.err(571):  at com.icouponz.facebook.Facebook.request(Facebook.java:533)
11-06 06:07:09.284: W/System.err(571):  at com.icouponz.FacebookHandler$2.run(FacebookHandler.java:147)
11-06 06:07:09.312: W/System.err(571):  at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:07:06.897

尝试这个

```
String response1 = facebook.request("me/photos", params, "POST"); 
```

代替

```
String response1 = facebook.request("photos", params, "POST"); 
```

# python - 文件 I/O 中的线程安全

> ID：13232670
> 
> 赞同：1
> 
> 时间：2012-11-05T13:01:44.277
> 
> 标签：python, thread-safety

我有一个类，其中包含将数据读取和写入文件的方法。它还具有打开和关闭文件的方法。如何使 Python 中的读写操作线程安全？即，如果一个写操作正在进行，它应该阻塞所有其他线程，直到它完成操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:04:34.713

您可以使用[线程锁](http://docs.python.org/2/library/threading.html#lock-objects)将一段代码一次限制为一个线程。`.acquire()`一个锁，执行你想要线程安全的操作，然后`.release()`锁。所有线程必须共享一个锁对象。

# autohotkey - 尝试使用 post-message，但控制 id 不断变化

> ID：13232675
> 
> 赞同：1
> 
> 时间：2012-11-05T13:01:56.047
> 
> 标签：autohotkey, postmessage

当媒体门户最小化到系统托盘时，我正在尝试发送命令以将其恢复为全屏。

我将右键单击系统托盘图标的窗口标识为 007E02C0:(WindowsForms10.Window.0.app.0.2386859)

要恢复 mediaportal，我右键单击系统图标，然后单击恢复

然后它发送此命令四次 WM_COMMAND 代码：0 控制 ID：290 控制 HWND：0x00000000

问题是每次我点击恢复，控制 ID 都会改变。每次我这样做时，控件 ID 都会增加 2。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T06:27:41.197

也许您可以尝试将 DetectHiddenWindows 设置为 on 并使用 AutoHotkey 直接取消隐藏窗口。

# mysql - 协助正则表达式 mysql 查询

> ID：13232681
> 
> 赞同：0
> 
> 时间：2012-11-05T13:02:02.203
> 
> 标签：mysql

我有一个数据库列，其中的数据看起来像 **file_name|||file_id|||field_id** 我想运行一个查询以仅用**file_id**替换数据。

所以，我的查询，本质上需要解析出管道之间的file_id，然后更新字段以仅用文件id替换完整的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:27:04.137

您可以使用旧格式查找行

```
WHERE mycol LIKE '%|||%|||%'; 
```

要提取中间字段，您可以使用

```
SUBSTRING_INDEX(mycol, '|||', -2) 
```

这将返回 'fileid|||fieldid'，然后

```
SUBSTRING_INDEX(SUBSTRING_INDEX(mycol, '|||', -2), '|||', 1) 
```

这将返回'fileid'。

所以：

```
UPDATE mytable SET mycol = SUBSTRING_INDEX(SUBSTRING_INDEX(mycol, '|||', -2), '|||', 1) WHERE mycol LIKE '%|||%|||%'; 
```

但首先我会检查

```
SELECT 
    mycol AS beforethecure,
    SUBSTRING_INDEX(SUBSTRING_INDEX(mycol, '|||', -2), '|||', 1) AS afterthecure
FROM mytable
WHERE mycol LIKE '%|||%|||%'; 
```

以防万一。并且可能对“after”的结果进行 SELECT，以查看它们是否符合 fileid 的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:34:16.707

尝试

```
SELECT SUBSTRING( SUBSTRING_INDEX('file_name|||file_id|||field_id','|||', 2), 
                 LOCATE('|',  'file_name|||file_id|||field_id' ) + 3  ) 
```

# jquery - jquery.validate：使用动态名称验证输入文本

> ID：13232683
> 
> 赞同：1
> 
> 时间：2012-11-05T13:02:05.607
> 
> 标签：jquery, validation

我目前正在使用 jquery.validate.js 插件，我非常喜欢它！我现在正在使用它来验证现有的 jsp 页面（我没有制作），而且它真的很容易使用。但是，我偶然发现了使用动态名称验证输入文本的问题。

这是 div 的当前布局：

`<input type="text" name="employee[0].firstName"/>`

`<input type="text" name="employee[1].firstName"/>`

`<input type="text" name="employee[2].firstName"/>`

`<input type="text" name="employee[3].firstName"/>`

还有一个选项，用户可以通过单击“添加新文本字段”来创建另一个员工的名字文本字段。这样，将创建另一个文本字段`name="employee[4].firstName"`

我如何验证这样的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:04:29.080

您可以使用通配符来获取所有带有员工姓名的输入。

**[现场演示](http://jsfiddle.net/BXQBm/1/)**

```
$('input[name^=employee]').each(function(){
  alert("Validate here"+ $(this).attr('name'));
        //validate here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:11:01.793

尝试使用尽可能具体的选择器`name`。您可以同时使用 jQuery 的[**以 selector(^=) 开头**](http://api.jquery.com/attribute-starts-with-selector/)和 jQuery 的[**以 selector($=) 结尾**](http://api.jquery.com/attribute-ends-with-selector/)

```
$('input[name^="employee["][name$="].firstName"]').each(function(){
    // demo purpose: prints each element's name to the console log
    console.log(this.name);

    // enter your validation for each element in here.
})​ 
```

### [演示](http://jsfiddle.net/XMTun/)

# sdl - 使用 HRTF（与头部相关的传递函数）使用 SDL_Mixer 制作 3D 声音

> ID：13232684
> 
> 赞同：2
> 
> 时间：2012-11-05T13:02:05.493
> 
> 标签：sdl, mixer

我正在尝试通过将音频流与 HRTF 进行卷积来使用 SDL_Mixer lib 制作 3D 声音（我分别使用 MIT HRTF 数据库和基于紧凑数据集的 mit_hrtf_lib）。

我使用 MIX_CHANNEL_POST 上的回调函数注册了一个效果。然后，在我的效果的回调函数中，我将音频流与 HRTF 进行卷积。

但我没有 3D 声音。我想播放的音频流听起来像是自己叠加的两倍甚至三倍，并且没有 3D 效果。

这就是我正在做的事情：

首先加载 wav，加载 HRTF 并开始音频：

```
if( Mix_OpenAudio( 44100, MIX_DEFAULT_FORMAT, 2, 16384 ) == -1 ) {
    fprintf(stderr, "Couldn't open SDL_mixer", SDL_GetError()); return 0; }

myChunk = Mix_LoadWAV( "bombsBitrate176400Hz.wav" ); //load wav

if( myChunk == NULL) { 
    fprintf(stderr, "Couldn't load wav file", Mix_GetError()); return 0; 
}

myLoadHRTF = new LoadHRTF;
myHRTFs = myLoadHRTF->getHRTF(90,0,44100);//load hrtf => works

Mix_RegisterEffect(MIX_CHANNEL_POST, HRTFEffect, NULL, &myHRTFs);

while(1){
    if (canPlay){//virtual source is set and azimuth is calculated => I can start audio
        playAudio();
        canPlay = false;
    }
} 
```

播放音频（）：

```
void PlaySDLAudio::playAudio(){
int channel;
channel = Mix_PlayChannel(-1,myChunk,0); //play audio once} 
```

我注册效果的回调：

```
void HRTFEffect(int chan, void* stream, int len, void* udata){
Mix_Pause(-1);

short* Y;
short* X = (short*) stream;
LeftRightHRTF* myHRTFs = (LeftRightHRTF*) udata;
short* HL;
short* HR;

int m = len/2;//size= len/2 beause we use 2 bytes values (16 bit audio format => 2 byte), len is the size of stream in bytes
int n = myHRTFs->nTaps;

HL = new short[n+m];
HR = new short[n+m];
Y = new short[n+m-1];

for (int i = m/2; i < (m+n)/2; i++){// fill with 0 
    X[i*2] = 0;
    X[i*2+1] = 0;
}
for( int i = 0 ; i < n; i++ ){
    HL[i] = *myHRTFs->leftHRTF;
    myHRTFs->leftHRTF++;
    HR[i] = *myHRTFs->rightHRTF;
    myHRTFs->rightHRTF++;
}
for ( int i = n; i < n+m; i++ ){//fill rest with 0
    HL[i] = 0;
    HR[i] = 0;
}

for ( int i = 0; i < (n+m)/2-1; i++ ) { // convolution
    Y[i*2] = 0;
    Y[i*2+1] = 0;
    for ( int j = 0; j < m/2; j++ ) {
        if (i-j>=0){
            Y[i*2] = Y[i*2] + X[j*2] * HL[i-j];//stream for left speaker
            Y[i*2+1] = Y[i*2+1] + X[j*2+1] * HR[i-j];//stream for right speaker
        }
    }
}

stream = Y; //set result of convolution to stream

Mix_Resume(-1);

delete[] Y;
Y = 0;
delete[] HL;
HL = 0;
delete[] HR;
HR = 0;} 
```

我猜只是说 stream = Y 是有问题的，因为我的卷积结果 Y 比原始流长（m+n-1，原始流 m）。

# magento - magento：用于添加产品并将折扣券应用到购物车的 URL 查询字符串

> ID：13232686
> 
> 赞同：4
> 
> 时间：2012-11-05T13:02:13.457
> 
> 标签：magento, url, query-string, cart, coupon

我是一个新手，经过广泛的研究和探索，我能够弄清楚以下几点：

要将产品添加到购物车，我可以使用

> /checkout/cart/add?product= ***76*** &qty= ***1***

应用我可以使用的折扣代码

> /checkout/cart/couponPost?coupon_code= ***WQ9D-XXXX***

它的代码位于文件中：

> /public_html/app/code/local/Mage/Checkout/controllers/ **-**

我想在一个链接中添加产品并应用折扣代码，例如：

> /checkout/cart/couponPost?product= **76** &qty= **1** &coupon_code= **WQ9D-XXXX**

或者

> /checkout/cart/add?product= **76** &qty= **1** &coupon_code= **WQ9D-XXXX**

或任何其他方式？

有没有办法让这个工作？想法是将这个链接嵌入到时事通讯中，这样用户只需单击一下就可以将产品添加到购物车并获得折扣。

我试过打电话`$this->couponPostAction();`，`function addAction()`反之亦然，但它不起作用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-19T16:42:28.720

rukpat 的答案在 Magento 1.8 中不起作用。扩展 CartController 的 addAction 方法后，您需要像这样格式化 URL 和查询字符串：

```
http://www.example.com/checkout/cart/add?product=76&qty=1&return_url=http://www.example.com/index.php/checkout/cart/couponPost?coupon_code=WQ9D-XXXX 
```

您也可以省略最后一个 return_url 参数。没有必要包括 ; （分号）。

您还可以通过简单地执行以下操作将多个产品添加到具有多个数量的 URL：

```
http://www.example.com/checkout/cart/add?product=76&related_product=28,28,28&return_url=http://www.example.com/index.php/checkout/cart/couponPost?coupon_code=WQ9D-XXXX 
```

因此，只需添加 &related_product=28,28,28 并多次引用产品 ID，您就可以添加该商品的多个数量。不是很优雅，但它有效。

当然，最好扩展 CartController 的 addAction 方法。

为了让这个解决方案在 Magento 1.8 及更高版本中工作，您需要像这样修改 CartController：

**注意**：将“命名空间”替换为您自己的命名空间（公司名称或您的姓名等）。

etc/modules/Namespace_AddProductFromUrl.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Namespace_AddProductFromUrl>
            <active>true</active>
            <codePool>local</codePool>
        </Namespace_AddProductFromUrl>
    </modules>
</config> 
```

app/code/local/Namespace/AddProductFromUrl/controllers/Checkout/CartController.php

```
<?php
    require_once 'Mage/Checkout/controllers/CartController.php';

    class Namespace_AddProductFromUrl_Checkout_CartController extends Mage_Checkout_CartController {
        # overloaded addAction
        public function addAction()
        {        
            // generate form_key if missing or invalid
            if ( ! ($formKey = $this->getRequest()->getParam('form_key', null)) or $formKey != Mage::getSingleton('core/session')->getFormKey())
            {
                $this->getRequest()->setParams(array('form_key' => Mage::getSingleton('core/session')->getFormKey()));
            }        

            // do parent actions
            parent::addAction();
        }
    } 
```

应用程序/代码/本地/命名空间/AddProductFromUrl/etc/config.xml

```
<config>
    <frontend>
        <routers>
            <checkout>
                <args>
                    <modules>
                        <Namespace_AddProductFromUrl before="Mage_Checkout">Namespace_AddProductFromUrl_Checkout</Namespace_AddProductFromUrl>
                    </modules>
                </args>
            </checkout>
        </routers>
    </frontend>
</config> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T22:42:26.887

不用修改代码就可以工作，

'http://www.example.com/checkout/cart/add?Product=76&qty;=1&return;_url=http://www.example.com/index.php/checkout/cart/couponPost?coupon_code=WQ9D- XXXX&return;_url=http://www.example.com/checkout/cart/'

return_url 必须被编码。

请参阅： http: [//www.magentocommerce.com/boards/viewthread/296763/](http://www.magentocommerce.com/boards/viewthread/296763/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T05:17:45.403

我可以使用 Namespace_AddProductFromUrl 验证 Gaz 的上述代码是否适用于 1.8

此外，如果您的产品是捆绑产品，您必须使用以下格式的 url：

[http://domain.com/en/checkout/cart/add?product=24&qty=1&bundle_option[2]=4&bundle_option[3]=8](http://domain.com/en/checkout/cart/add?product=24&qty=1&bundle_option%5b2%5d=4&bundle_option%5b3%5d=8)

# java - Java，正则表达式HasNext以空行开头，多平台支持

> ID：13232689
> 
> 赞同：1
> 
> 时间：2012-11-05T13:02:20.897
> 
> 标签：java, regex, java.util.scanner

我需要在 Unix 和 Windows 上处理以下文件：

```
a;b
c;d;e;f;g
c;d;e;f;g
c;d;e;f;g

a;b
c;d;e;f;g
c;d;e;f;g
c;d;e;f;g

a;b

a;b
c;d;e;f;g
c;d;e;f;g
c;d;e;f;g 
```

我需要处理`a;b`包含下面的数据块。例如，不应处理*第三个。* `a;b`

目前，我正在使用 Java 扫描器在文件中使用以下正则表达式来分隔此类文本：

```
Scanner fileScanner = new Scanner(file);
        try{

            fileScanner.useDelimiter(Pattern.compile("^$", Pattern.MULTILINE));

            while(fileScanner.hasNext()){
                String line;
                while ((line = fileScanner.nextLine()).isEmpty());
                InputStream is = new ByteArrayInputStream(fileScanner.next().getBytes("UTF-8"));
... 
```

这仍然会将*第三个* `a;b`空输入委托给 ByteArrayInputStream。

我可以检查第一行`fileScanner.next()`是否为空行，然后执行 nextLine() 语句和下面的 continue 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:04:41.410

使用正则表达式模式

```
(?m)^(?:.+(?:\\r?\\n|\\Z)){2,} 
```

它匹配两行或多行非空行，或者换句话说，两行或多`(?:...){2,}`行包含一个或多个字符`.+`，后跟换行符`\\r?\\n`或`(?:...|...)`字符串结尾`\\Z`。

多行修饰符`(?m)`意味着`^`匹配每行的开头，而不仅仅是字符串的开头。

* * *

### 演示：

```
String str = "...";

Pattern p = Pattern.compile("(?m)^(?:.+(?:\\r?\\n|\\Z)){2,}");
Matcher m = p.matcher(str);
while (m.find()) {
  String match = m.group();
  System.out.println(match);
} 
```

请参阅**[此演示](http://ideone.com/Wegwpc)**。

# hibernate - 用户 Hibernate DetachedCriteria 的最佳实践是什么？

> ID：13232691
> 
> 赞同：0
> 
> 时间：2012-11-05T13:02:28.660
> 
> 标签：hibernate

我在 Web 应用程序中使用了 DetachedCriteria，想知道使用它的最佳实践是什么，这样才能获得最佳的 ORM 性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:07:56.527

使用 DetachedCriteria 不会影响性能，它只是一个方便的对象，允许您在 Hibernate Session 之外构建标准。

当你去执行一个查询时，你必须附加到一个会话来执行你的查询。

由于在 Hibernate 中您可以从会话中分离对象，这允许非会话感知代码将查询发送到后端以进行进一步处理。

# java - 使用 Java 的 LinkedIn API 身份验证

> ID：13232697
> 
> 赞同：9
> 
> 时间：2012-11-05T13:03:01.100
> 
> 标签：java, rest, linkedin

我是用于身份验证的 Linked In API 的新手。我去了LinkedIn提供的API文档。它有 RUBY、PYTHON 和 PHP 的示例。但我被要求使用 Java 实现相同的目标。我需要阅读链接中的用户的个人资料。任何人都可以建议我任何链接或示例以在 Java 中执行相同的操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:10:22.310

您需要使用一些 OAuth 库。尝试调查[**Scribe**](https://github.com/fernandezpablo85/scribe-java)。

这是 Java 中的 LinkedIn 示例之一：

```
package org.scribe.examples;

import java.util.Scanner;

import org.scribe.builder.*;
import org.scribe.builder.api.*;
import org.scribe.model.*;
import org.scribe.oauth.*;

public class LinkedInExample
{
  private static final String PROTECTED_RESOURCE_URL = "http://api.linkedin.com/v1/people/~/connections:(id,last-name)";

  public static void main(String[] args)
  {
    OAuthService service = new ServiceBuilder()
                                .provider(LinkedInApi.class)
                                .apiKey("CiEgwWDkA5BFpNrc0RfGyVuSlOh4tig5kOTZ9q97qcXNrFl7zqk-Ts7DqRGaKDCV")
                                .apiSecret("dhho4dfoCmiQXrkw4yslork5XWLFnPSuMR-8gscPVjY4jqFFHPYWJKgpFl4uLTM6")
                                .build();
    Scanner in = new Scanner(System.in);

    System.out.println("=== LinkedIn's OAuth Workflow ===");
    System.out.println();

    // Obtain the Request Token
    System.out.println("Fetching the Request Token...");
    Token requestToken = service.getRequestToken();
    System.out.println("Got the Request Token!");
    System.out.println();

    System.out.println("Now go and authorize Scribe here:");
    System.out.println(service.getAuthorizationUrl(requestToken));
    System.out.println("And paste the verifier here");
    System.out.print(">>");
    Verifier verifier = new Verifier(in.nextLine());
    System.out.println();

    // Trade the Request Token and Verfier for the Access Token
    System.out.println("Trading the Request Token for an Access Token...");
    Token accessToken = service.getAccessToken(requestToken, verifier);
    System.out.println("Got the Access Token!");
    System.out.println("(if your curious it looks like this: " + accessToken + " )");
    System.out.println();

    // Now let's go and ask for a protected resource!
    System.out.println("Now we're going to access a protected resource...");
    OAuthRequest request = new OAuthRequest(Verb.GET, PROTECTED_RESOURCE_URL);
    service.signRequest(accessToken, request);
    Response response = request.send();
    System.out.println("Got it! Lets see what we found...");
    System.out.println();
    System.out.println(response.getBody());

    System.out.println();
    System.out.println("Thats it man! Go and build something awesome with Scribe! :)");
  }

} 
```

以上内容可以在Scribe 存储库的**[这一](https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/LinkedInExample.java)**部分中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-24T07:07:26.943

我希望这对你有用......我使用弹簧框架

```
package yraunaj.controller;

import org.json.JSONException;
import org.json.JSONObject;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.client.RestTemplate;

@Controller
public class HomeController {

    //get client id and client Secret by creating a app in 
    //https://www.linkedin.com developers
    //and set your redirect url
    public String clientId="**********";
    public String clientSecret="***********";
    public String redirectUrl="http://localhost:8080/yraunaj/home"; 

    //create button on your page and hit this get request
    @GetMapping("/authorization")
    public String authorization() {
        String authorizationUri="https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id="+clientId+"&redirect_uri="+redirectUrl+"&state=asasasasasas&scope=r_basicprofile%20r_emailaddress";
        return "redirect:" + authorizationUri;
    }

    //after login in your linkedin account your app will hit this get request
    @GetMapping("/home")

    //now store your authorization code
    public String home(@RequestParam("code") String authorizationCode) throws JSONException {

        //to trade your authorization code for access token
        String accessTokenUri ="https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&code="+authorizationCode+"&redirect_uri="+redirectUrl+"&client_id="+clientId+"&client_secret="+clientSecret+"";

        // linkedin api to get linkedidn profile detail
        String linedkinDetailUri = "https://api.linkedin.com/v1/people/~:(id,first-name,email-address,last-name,headline,picture-url,industry,summary)?format=json";

        //store your access token
        RestTemplate restTemplate = new RestTemplate();
        String accessTokenRequest = restTemplate.getForObject(accessTokenUri, String.class);
        JSONObject jsonObjOfAccessToken = new JSONObject(accessTokenRequest);
        String accessToken = jsonObjOfAccessToken.get("access_token").toString();

        //trade your access token
        HttpHeaders headers = new HttpHeaders();
        headers.add("Authorization", "Bearer " +accessToken);
        HttpEntity<String> entity = new HttpEntity<String>("parameters", headers);
        ResponseEntity<String> linkedinDetailRequest = restTemplate.exchange(linedkinDetailUri, HttpMethod.GET, entity, String.class);
        //store json data
        JSONObject jsonObjOfLinkedinDetail = new JSONObject(linkedinDetailRequest.getBody());
        //print json data
        System.out.println(jsonObjOfLinkedinDetail);

        return "home";
    }
} 
```

# joomla - 将组件关联到项目菜单

> ID：13232699
> 
> 赞同：0
> 
> 时间：2012-11-05T13:03:03.017
> 
> 标签：joomla, joomla2.5

如何将组件与菜单项关联？

我的站点中有两个组件，当我在管理员中选择项目菜单时，我有菜单项类型来选择这个项目的类型，我看到单篇文章......还有其他东西，但不是我的组件，任何想法！

[我用这个](http://www.notwebdesign.com/joomla-component-creator/)创建我的组件并安装没有问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:25:48.810

菜单项只是与您想要为其设置菜单项的每个视图相关联。为了让 Joomla 允许您为特定视图创建菜单项，您必须使用定义为该菜单项（如果有）存储的参数的 XML 文件来指示它。您需要在此处添加一个 XML 文件：

```
/JOOMLA/components/YOUR COMPONENT/views/VIEW YOU WANT MENU FOR/tmpl/default.xml 
```

这是 1.5 的教程，但 2.5 的教程类似。主要区别在于 JParameter 已被 JForm 取代。

[http://docs.joomla.org/Component_parameters#2._Menu_item_specific_parameters_3](http://docs.joomla.org/Component_parameters#2._Menu_item_specific_parameters_3)

# ssl - 使用 vbscript 清除 SSL 状态

> ID：13232700
> 
> 赞同：4
> 
> 时间：2012-11-05T13:03:05.593
> 
> 标签：ssl, vbscript, browser-automation, clear-cache

作为我项目的一部分，我必须自动化在安全套接字层上运行的 Web 应用程序。因此，如果某些帐户无法正常工作，我必须在注销后使用 vbscript 清除 SSL 状态、缓存、浏览历史记录。到目前为止，我已经编写了以下代码，但它无法正常工作。

```
ieObj.document.execCommand ("ClearAuthenticationCache")

 Set objFSO = CreateObject("Scripting.FileSystemObject")
 Set objShell = CreateObject("Shell.Application")
 Set objFolder = objShell.Namespace(TEMPORARY_INTERNET_FILES)
 objFSO.DeleteFile (objFolder.Self.Path & "\*.*")
 ieObj.Quit
 Set ieObj = Nothing
 Application.Wait DateAdd("s", 2, Now) 
```

只是为了立即更新，我正在使用 sendkeys 清除 ssl 状态，

```
Sub ClearSSLState()
' Macro1 Macro
Dim oShell
Set oShell = CreateObject("Wscript.Shell")
oShell.Run ("cmd")
Application.Wait DateAdd("s", 1, Now)
oShell.AppActivate "C:\SYSROOT\system32\cmd.exe"

Application.Wait DateAdd("s", 1, Now)
oShell.SendKeys "inetcpl.cpl"
oShell.SendKeys "{enter}"
oShell.AppActivate "Internet Properties"
Application.Wait DateAdd("s", 1, Now)
oShell.SendKeys "^{TAB 3}"
oShell.SendKeys "{Tab}"

oShell.SendKeys "{enter}"
oShell.SendKeys "{enter}"
oShell.SendKeys "{Tab 6}"
oShell.SendKeys "{enter}"
Application.Wait DateAdd("s", 1, Now)

oShell.AppActivate "C:\SYSROOT\system32\cmd.exe"
oShell.SendKeys "exit"
oShell.SendKeys "{enter}"

End Sub 
```

真的很感激，如果有人请建议任何选项来清除 ssl 状态以及使用 vbscript。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:09:49.273

[当使用Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) （一个很棒的实用程序，顺便说一句）检测控制面板操作时，当按下*Clear SSL State*按钮时，看起来会执行以下命令：

```
"C:\Windows\system32\rundll32.exe" "C:\Windows\system32\WININET.dll",DispatchAPICall 3 
```

# java - 如何通过 POST 方法使用 Google 的 freebase？

> ID：13232704
> 
> 赞同：2
> 
> 时间：2012-11-05T13:03:16.837
> 
> 标签：java, post, http-post, freebase

我在我的 java 代码中使用 Google 的 freebase API 时遇到问题。看起来，我的查询太大而无法以 GET 方法发送，但我找不到将其作为 POST 发送的方法。

这是我得到的错误：

```
 com.google.api.client.googleapis.json.GoogleJsonResponseException: 414 Request-URI Too Large
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 414 (Request-URI Too Large)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
  </style>
  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
  <p><b>414.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/freebase/v1/mqlread</code>... is too large to process.  <ins>That’s all we know.</ins>

    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:143)
    at com.google.api.client.googleapis.json.GoogleJsonResponseException.execute(GoogleJsonResponseException.java:187)
    at com.google.api.client.googleapis.services.GoogleClient.executeUnparsed(GoogleClient.java:279)
    at com.google.api.client.http.json.JsonHttpRequest.executeUnparsed(JsonHttpRequest.java:207)
    at com.huawei.mdf.MQLReadService.doMqlRead(MQLReadService.java:67)
    at com.huawei.mdf.MQLReadService.main(MQLReadService.java:82) 
```

这是代码：

```
public void doMqlRead(String id, QueryType queryType) {

    HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();
    HttpRequestInitializer httpRequestInitializer = new HttpRequestInitializer() {
        @Override
        public void initialize(HttpRequest arg0) throws IOException {
            // TODO Auto-generated method stub

        }
    };

    JsonHttpRequestInitializer requestInitializer = new JsonHttpRequestInitializer() {
        public void initialize(JsonHttpRequest jsonHttpRequest)
                throws IOException {
            FreebaseRequest freebaseRequest = (FreebaseRequest) jsonHttpRequest;
            freebaseRequest.setPrettyPrint(true);
            freebaseRequest.setKey(API_KEY);
        }
    };

    Freebase.Builder fbb = new Freebase.Builder(httpTransport, jsonFactory,
            httpRequestInitializer);

    Freebase freebase = fbb.setJsonHttpRequestInitializer(
            requestInitializer).build();

    List<String> queryList = QueryUtil.getQuery(queryType);
    for (String query : queryList) {
        query = query.replace("idreplace", id);
        System.out.println(query.length());

        try {
            Mqlread mqlread = freebase.mqlread(query);
            mqlread.setIndent(indentation);

            HttpResponse executeUnparsed = mqlread.executeUnparsed();
            String parseAsString = executeUnparsed.parseAsString();
            System.out.println(parseAsString);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我还尝试通过将**HttpMethod.GET**部分切换为**HttpMethod.POST**来更改 Freebase 类（第 450 行）中的这一部分，但我确信这不是正确的方法：

```
/**
     * Internal constructor. Use the convenience method instead.
     */
    Mqlread(String query) {
        super(Freebase.this, HttpMethod.GET, REST_PATH, null);
        this.query = Preconditions.checkNotNull(query,
                "Required parameter query must be specified.");
    } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:53:46.660

似乎没有办法从 Google API 客户端库中覆盖 API 调用的 HTTP 方法。您必须像这样自己构建请求对象：

```
HttpTransport httpTransport = new NetHttpTransport();
HttpRequestFactory httpRequestFactory = httpTransport.createRequestFactory();

String data = "query=" + query;
HttpContent content = new ByteArrayContent("application/x-www-form-urlencoded", data.getBytes());
GenericUrl url = new GenericUrl("https://www.googleapis.com/freebase/v1/mqlread");

HttpRequest request = httpRequestFactory.buildPostRequest(url, content);
HttpHeaders headers = new HttpHeaders();
headers.put("X-HTTP-Method-Override","GET");
request.setHeaders(headers);

HttpResponse response = request.execute(); 
```

请注意，我已设置 X-HTTP-Method-Override 标头，以便此请求在服务器端作为 GET 请求处理。

我已经为客户端库提交[了一个错误](http://code.google.com/p/google-api-java-client/issues/detail?id=653)来自动处理这个问题。

# spring - 自定义会话超时处理程序

> ID：13232708
> 
> 赞同：0
> 
> 时间：2012-11-05T13:03:33.330
> 
> 标签：spring, spring-security

我正在使用**spring security 3**，并且我将会话超时设置为 30 分钟，当会话超时时，用户将被重定向到登录页面。

我想要做的是实现一个解决方案，如果用户在特定页面（**/page/specific_page**）中，用户将被重定向到登录页面以外的特定页面（ **/page/anotherloginpage ）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:32:17.960

也许`Session Management`会`invalid-session-url`帮助你[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)。

# php - 检查 Facebook 帖子是否存在

> ID：13232713
> 
> 赞同：2
> 
> 时间：2012-11-05T13:03:52.097
> 
> 标签：php, facebook, facebook-graph-api

我有一个应用程序（或真正的链接），允许我的客户通过此协议将某种产品分享到他们的墙/时间线：

[http://www.facebook.com/dialog/feed?app_id=APP_ID&link=](http://www.facebook.com/dialog/feed?app_id=APP_ID&link=) ....

成功分享后，客户将获得优惠券代码，一旦他/她被引导回我的网站。

我希望能够验证分享帖子的存在以确定回扣代码是否有效。我有帖子 ID，如下所示：

704745000_513399762010000（随机示例）

我有点想通，我需要权限才能在用户时间轴中使用 graph-api 查询特定帖子，但我怎样才能获得权限？感谢任何指针和示例（在 php 中），谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:34:12.433

供参考：

> 我希望能够验证分享帖子的存在以确定回扣代码是否有效

听起来您违反了平台政策，[IV。应用集成点](https://developers.facebook.com/policy/#integration)：

> 1.  您不得激励用户使用 Facebook 社交渠道（或限制使用内容背后的内容），或暗示激励与使用我们的渠道直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:07:15.283

您可以同时使用 php sdk：创建帖子、获取返回的 id 以存储在数据库中以及对您的应用程序进行用户身份验证。

sdk 中包含登录和 api 请求示例。

[http://developers.facebook.com/docs/reference/php/](http://developers.facebook.com/docs/reference/php/)

# c# - 拦截每一次鼠标点击到 WPF 应用程序

> ID：13232714
> 
> 赞同：11
> 
> 时间：2012-11-05T13:03:55.620
> 
> 标签：c#, wpf

我希望拦截我的 WPF 应用程序中的每一次鼠标点击。使用命令路由机制似乎应该很容易，但抱歉我什么也没找到。

我的应用程序实现了多个安全级别，并且如果在 x 分钟内没有人与应用程序交互（单击），则需要自动恢复到最严格的级别。我的计划是添加一个在 x 分钟后到期的计时器并调整安全级别。每次鼠标点击应用程序都会重置计时器。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-05T13:23:25.543

您可以注册一个类处理程序：

```
public partial class App : Application
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            EventManager.RegisterClassHandler(typeof(Window), Window.PreviewMouseDownEvent, new MouseButtonEventHandler(OnPreviewMouseDown));

            base.OnStartup(e);
        }

        static void OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            Trace.WriteLine("Clicked!!");
        }
    } 
```

这将处理`PreviewMouseDown`在应用程序中创建的任何窗口上的任何事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:07:12.460

```
<Window .... PreviewMouseDown="Window_PreviewMouseDown_1">
</Window> 
```

这应该适合你。

即使`MouseDown`它包含的组件触发了其他事件，它也会触发。

根据评论中的 Clemens 建议，`PreviewMouseDown`是比 更好的选择`MouseDown`，因为这样可以确保您无法阻止事件冒泡在不同的事件中发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:07:08.357

你有几个选择：

低级鼠标钩子： http://filipandersson.multiply.com/journal/item/7?&show_interstitial=1& [u=%2Fjournal%2Fitem](http://filipandersson.multiply.com/journal/item/7?&show_interstitial=1&u=%2Fjournal%2Fitem)

WPF 解决方案（我会先检查一下这是否满足您的需求）： [WPF。捕捉最后一个窗口点击任意位置](https://stackoverflow.com/questions/2105607/wpf-catch-last-window-click-anywhere)

# android - 如何从日历中获取所有事件？

> ID：13232717
> 
> 赞同：7
> 
> 时间：2012-11-05T13:03:57.493
> 
> 标签：android, calendar

嗨，我可以使用此代码获取事件

```
cur = null;
    cr = getContentResolver();

    // Construct the query with the desired date range.
    Uri.Builder builder = Instances.CONTENT_URI.buildUpon();

    ContentUris.appendId(builder, 0);
    ContentUris.appendId(builder, endMillis);

    // Submit the query
    cur =  cr.query(builder.build(), 
        INSTANCE_PROJECTION, 
        null, 
        null, 
        null); 
```

但正如您所见，我只能在给定的时间内获取事件，但我需要所有事件（没有任何时间规范，不包括重复事件）这可能吗？如何 ？请帮我。

```
cur =  cr.query(Uri.parse("content://com.android.calendar/events"), 
        INSTANCE_PROJECTION, 
        null, 
        null, 
        null); 
```

它给出了错误 java.lang.IllegalArgumentException：

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T13:23:25.113

试试这个代码...

```
public class Utility {

    public static ArrayList<String> nameOfEvent = new ArrayList<String>();
    public static ArrayList<String> startDates = new ArrayList<String>();
    public static ArrayList<String> endDates = new ArrayList<String>();
    public static ArrayList<String> descriptions = new ArrayList<String>();

    public static ArrayList<String> readCalendarEvent(Context context) {
        Cursor cursor = context.getContentResolver()
                .query(
                        Uri.parse("content://com.android.calendar/events"),
                        new String[] { "calendar_id", "title", "description",
                                "dtstart", "dtend", "eventLocation" }, null,
                        null, null);
        cursor.moveToFirst();
        // fetching calendars name
        String CNames[] = new String[cursor.getCount()];

        // fetching calendars id
        nameOfEvent.clear();
        startDates.clear();
        endDates.clear();
        descriptions.clear();
        for (int i = 0; i < CNames.length; i++) {

            nameOfEvent.add(cursor.getString(1));
            startDates.add(getDate(Long.parseLong(cursor.getString(3))));
            endDates.add(getDate(Long.parseLong(cursor.getString(4))));
            descriptions.add(cursor.getString(2));
            CNames[i] = cursor.getString(1);
            cursor.moveToNext();

        }
        return nameOfEvent;
    }

    public static String getDate(long milliSeconds) {
        SimpleDateFormat formatter = new SimpleDateFormat(
                "dd/MM/yyyy hh:mm:ss a");
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(milliSeconds);
        return formatter.format(calendar.getTime());
    }
} 
```

你也可以检查这个

[从日历中获取事件](https://stackoverflow.com/questions/5883938/getting-events-from-calendar)

# soap - Savon HTTP::ERROR 但没有更多信息？

> ID：13232719
> 
> 赞同：0
> 
> 时间：2012-11-05T13:04:01.207
> 
> 标签：soap, ruby-on-rails-3.1, savon

我正在尝试使用以下代码配置我的 rails 应用程序以与肥皂网络服务通信：

```
client = Savon::Client.new do
  wsdl.document = "http://services.carsolize.com/BookingServices/dynamicdataservice.svc?wsdl"
end

response = client.request "ServiceRequest", "xmlns" => "http://tempuri.org/" do |soap, wsdl|
  client.http.headers["SOAPAction"] = '"http://tempuri.org/IDynamicDataService/ServiceRequest"'
  soap.body = {
    "rqst" => {
      "Credentials" => {
        "UserName" => 'user',
        "Password"  => 'pass'
      },
      "RequestType" => "Login", 
      "TypeOfService" => "Unknown",
    },
  }
end 
```

但我得到的只是 HomeController#index 中的 Savon::HTTP::Error （并且没有更多信息），用于以响应开头的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:07:00.020

我试过这样做

```
client = Savon.client 'http://services.carsolize.com/BookingServices/dynamicdataservice.svc?wsdl'

username = '*********'
password = '*********'

response = client.request :wsdl, :login do
  http.headers["SOAPAction"] = '"http://tempuri.org/IDynamicDataService/ServiceRequest"'
  soap.xml = "<s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'><s:Body><ServiceRequest xmlns='http://tempuri.org/'><rqst xmlns:i='http://www.w3.org/2001/XMLSchema-instance'><Credentials xmlns=''>
  <Password>#{password}</Password><UserName>#{username}</UserName></Credentials><RequestType xmlns=''>Login</RequestType><TypeOfService xmlns=''>Unknown</TypeOfService></rqst></ServiceRequest></s:Body></s:Envelope>"
end 
```

它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-01T07:32:05.957

我遇到了同样的错误，尽管它没有及时回答，但将来可能会发布它，这可能对某人有所帮助。

**使用 Savon 实现 OAuth2.0**

我们需要将内容类型`"Content-Type" => "text/xml"` 与承载令牌一起放入请求标头中

```
 client = Savon.client(
     wsdl: [URL],
     logger: Rails.logger,
     log_level: :debug,
     log: true,
     ssl_ca_cert_file: file_path,
     ssl_verify_mode: :none,
     headers: { "Authorization" => "Bearer #{auth_token}", "Content-Type" => "text/xml" },
     follow_redirects: true
  ) 
```

# python - projecteuler 15有更好的解决方案吗？

> ID：13232721
> 
> 赞同：-3
> 
> 时间：2012-11-05T13:04:05.573
> 
> 标签：python

我的代码是这样的，对于rows和cols> 15来说工作时间太长了，有没有更好的解决方案？问题链接：[https ://projecteuler.net/problem=15](https://projecteuler.net/problem=15)

```
#!/usr/bin/env python
rows = 3
cols = 3
start_row = 0
start_col = 0
count = 0

def trace(row, col):
    if row == rows and col == cols:
        global count
        count += 1
        return 
    if col + 1 <= cols:
        # print row, col
        trace(row, col + 1)

    if row + 1 <= rows:
        # print row, col
        trace(row + 1, col)

trace(start_row, start_col)
print count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:32:17.370

终于明白了，使用动态规划可以解决问题。

```
#!/usr/bin/env python
rows = 20
cols = 20
pre_list = {}

count = 0
pre_list = {}
for i in xrange(0, rows + 1):
    for j in xrange(0, rows + 1):
        pre_list[(i,j)] = []

for i in xrange(0, rows + 1):
    for j in xrange(0, rows + 1):
        if i > 0:
            pre_list[(i,j)].append((i-1, j))
        if j > 0:
            pre_list[(i,j)].append((i, j-1))

route = {(rows,cols):1}

keys = route.keys()
while True:
    if not keys:
        break

    new_route = {}
    for key in keys:
        # print 'key', key
        pre = pre_list[key]
        if not pre:
            continue
        for item in pre:
            new_route[item] = 1
            # print 'route', route
            if item in route:
                route[item] += route[key]
            else:
                route[item] = route[key]
            # print 'route', route
        route[key] = 0
        # print new_route
    keys = new_route.keys()
    # print 'new keys', keys

print route[(0,0)] 
```

# linux - 执行 snmpd::FATAL: 内核太旧

> ID：13232725
> 
> 赞同：1
> 
> 时间：2012-11-05T13:04:14.090
> 
> 标签：linux, linux-kernel, snmp, net-snmp, snmpd

谁能帮我解决内核依赖问题？我已经在 linux-3.0.2-generic 上完成了 net-snmp 打包，并试图使其在以下版本上工作。

```
uname –a
Linux manage 2.6.18.8-1 #3 Wed May 28 14:06:14 UTC 2008 i686 unknown 
```

Snmp 版本：5.7.2.rc1

```
/usr/sbin/chroot /var/snmp3/ /usr/local/sbin/snmpd -f –Le
FATAL: kernel too old

file /usr/local/sbin/snmpd
/usr/local/sbin/snmpd: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0xacef27c048394ffb2cdef4999566e9aa32e5d2dd, not stripped 
```

所以...该文件需要 2.6.24 及更高版本 Hw 我可以解决此问题并使其在 2.6.18 上工作吗？我应该在 snmpd.c 中进行更改并重新编译吗？如果是，那么该怎么做？如果不是那么解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:54:10.653

只需重新编译就足够了。

用于重新编译的工具链需要有一个版本的内核头文件和 C 库，可以与该内核一起使用。

或者，您可以切换到较新的内核，这还具有更容易获得安全修复程序的优点。

# windows - Windows 手机广告不显示

> ID：13232732
> 
> 赞同：0
> 
> 时间：2012-11-05T13:04:39.800
> 
> 标签：windows, visual-studio-2010, windows-phone-7

我把我的 adcontrol 控件放到我的页面上。在使用 test unitid 和 test appid 时，广告会出现。当我输入我的应用程序 ID 和普通 adunitid 时，模拟器中会显示任何内容。广告应该可见的地方是透明的。

再来一个q；如何使用scrollviewer“固定”我的广告在屏幕底部滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:24:18.183

> 当我输入我的应用程序 ID 和普通 adunitid 时，模拟器中会显示任何内容

许多广告提供商能够检测到模拟器并关闭广告。部署到真实设备上进行测试。

> 如何使用scrollviewer“固定”我的广告在屏幕底部滚动？

只需更改页面的布局并将广告控件放在滚动查看器之外。例如：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="80" />
    </Grid.RowDefinitions>

    <ScrollViewer Grid.Row="0">
        <!-- Whatever -->
    </ScrollViewer>

    <AdControl Grid.Row="1" AdUnit="..." />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:25:11.163

*   要找出 Ad 控件的问题，请注册到`AdControlError`事件并查看`e.ErrorCode`and `e.ErrorDescription`。

*   我不认为将广告控件“固定”在 ScrollViewer 的底部是一个好主意。你最好把a`ScrollViewer`和`AdControl`a 都放在`Grid`两行。

# excel - 如何通过 MATLAB 将 Excel 工作表保存为 PDF？

> ID：13232735
> 
> 赞同：0
> 
> 时间：2012-11-05T13:04:46.507
> 
> 标签：excel, matlab, pdf

我正在使用以下代码：

```
hExcel = actxserver('Excel.Application');
hWorkbook = hExcel.Workbooks.Open(sprintf('%s','C:\test.xlsx'));
hWorksheet = hWorkbook.Sheets.Item(1);
hRange = hWorksheet.Range('A1:O10');
hRange.ExportAsFixedFormat('xlTypePDF','test_out.pdf'); 
```

Excel ActiveX 服务器允许我做通常的事情，但最后一行没有做任何事情。它也不会引发任何错误。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:42:40.127

我觉得你需要用`hWorkbook.ExportAsFixedFormat`，不用`hRange.ExportAsFixedFormat`。

此外，您需要将输出文件的完整路径指定为`C:\test_out.pdf`.

# php - var_dump array(0) { } php

> ID：13232737
> 
> 赞同：1
> 
> 时间：2012-11-05T13:04:47.583
> 
> 标签：php, arrays, var-dump

试图查看此数组中是否有实际数据：这是我正在运行的查询：

```
 global $wpdb;
    $gather_answers = "SELECT * FROM ".$wpdb->prefix."comments WHERE comment_post_ID = '" . $comment_parent_id . "' ORDER BY comment_date";
    $user_answers = $wpdb->get_results($gather_answers);

    var_dump($user_answers); 
```

当我执行数组的 var_dump 时，输出为：

```
array(0) { } 
```

我试图访问它的部分内容，例如：

```
var_dump($user_answers[0]); 
```

但是什么也没有出现。

知道这个数组中是否有任何数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:05:43.330

```
var_dump($user_answers); 
```

什么都不返回？数组中**没有数据**。

数组和对象由 递归探索[`var_dump`](http://php.net/manual/en/function.var-dump.php)，因此如果存在任何数据，它就会显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:10:04.493

您的查询可能不会返回任何内容，即您请求的帖子可能没有任何评论。如果您肯定有评论，则查询可能会失败，因为您`comment_post_id`在查询中将其视为字符串，而不是整数。尝试重新格式化如下：

```
$gather_answers = $wpdb->prepare( "SELECT * FROM $wpdb->comments WHERE comment_post_ID = %d ORDER BY comment_date", $comment_parent_id ); 
```

# nginx - nginx 内存缓存

> ID：13232742
> 
> 赞同：2
> 
> 时间：2012-11-05T13:04:57.973
> 
> 标签：nginx, memcached

我尝试将 nginx 与 memcached 一起使用，配置如下：

```
server {

    ...

    location / {
    default_type            text/html;
    set $memcached_key      $uri;
        memcached_pass 127.0.0.1:11211;
        error_page     404 = @fallback;
    }

    location @fallback {
        include uwsgi_params;
        uwsgi_pass unix:///var/tmp/site.sock;
    }

} 
```

但是所有请求都转到 uwsgi 而不使用 memcache：

> nginx -V
> 
> nginx -V nginx 版本：nginx/1.1.19 启用 TLS SNI 支持 配置参数：--prefix=/etc/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var /log/nginx/error.log --http-client-body-temp-path=/var/lib/nginx/body --http-fastcgi-temp-path=/var/lib/nginx/fastcgi --http- log-path=/var/log/nginx/access.log --http-proxy-temp-path=/var/lib/nginx/proxy --http-scgi-temp-path=/var/lib/nginx/scgi --http-uwsgi-temp-path=/var/lib/nginx/uwsgi --lock-path=/var/lock/nginx.lock --pid-path=/var/run/nginx。pid --with-debug --with-http_addition_module --with-http_dav_module --with-http_geoip_module --with-http_gzip_static_module --with-http_image_filter_module --with-http_realip_module --with-http_stub_status_module --with-http_ssl_module --with- http_sub_module --with-http_xslt_module --with-ipv6 --with-sha1=/usr/include/openssl --with-md5=/usr/include/openssl --with-mail --with-mail_ssl_module --add-module =/build/buildd/nginx-1.1.19/debian/modules/nginx-auth-pam --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-echo --add-module =/build/buildd/nginx-1.1.19/debian/modules/nginx-upstream-fair --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-dav-ext-module19/debian/modules/nginx-echo --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-upstream-fair --add-module=/build/buildd/nginx-1.1。 19/debian/modules/nginx-dav-ext-module19/debian/modules/nginx-echo --add-module=/build/buildd/nginx-1.1.19/debian/modules/nginx-upstream-fair --add-module=/build/buildd/nginx-1.1。 19/debian/modules/nginx-dav-ext-module

输出中没有 ngx_http_memcached_module。

我使用 Ubuntu 12.04 和安装了`apt-get install nginx`.

这是否意味着我必须安装它才能使用 memcached 或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:21:28.917

来自[http://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_pa​​ss](http://nginx.org/en/docs/http/ngx_http_memcached_module.html#memcached_pass)

```
The ngx_http_memcached_module module allows to obtain responses from a memcached 
server. The key is set in the $memcached_key variable. A response should be put 
in memcached in advance via means that are external to nginx. 
```

换句话说，nginx 只能检索已经存储在 memcache 中的东西

最`means that are external to nginx`有可能是您的 uwsgi 应用程序

# java - 使用 oracle weblogic server 10.3 (java) 为 web 服务设置超时

> ID：13232744
> 
> 赞同：6
> 
> 时间：2012-11-05T13:05:05.827
> 
> 标签：java, weblogic-10.x

每当 Web 服务响应将被以下代码行延迟时，我都会尝试设置超时错误-

```
serviceStub._setProperty("weblogic.wsee.transport.connection.timeout", String.valueOf(timeoutSeconds));
BindingInfo bindingInfo = (BindingInfo)serviceStub._getProperty("weblogic.wsee.binding.BindingInfo");
bindingInfo.setTimeout(timasseoutSeconds); 
```

但它不起作用。

使用的服务器 – Oracle Weblogic 服务器 10.3

Web 服务的类型 – JAX-RPC

请回复，如果有人有解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:51:26.833

有两种超时（参见[What is the difference between connection and read timeout for sockets?](https://stackoverflow.com/questions/3069382/what-is-the-difference-between-connection-and-read-timeout-for-sockets)）

> `weblogic.wsee.transport.connection.timeout`
> 
> 以秒为单位指定尝试调用 Web 服务的客户端应用程序等待建立连接的时间。在指定的时间过去后，如果尚未建立连接，则尝试超时。
> 
> `weblogic.wsee.transport.read.timeout`
> 
> 以秒为单位指定客户端应用程序等待来自它正在调用的 Web 服务的响应的时间。在指定的时间过去后，如果没有响应，则客户端超时。

您应该为两者设置合理的值。有关示例，请参[见此答案。](https://stackoverflow.com/a/11736871/33622)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:10:53.767

我认为这就是你需要的：weblogic.wsee.transport.read.timeout

从这里得到： http: [//docs.oracle.com/cd/E14571_01/web.1111/e13760/client.htm](http://docs.oracle.com/cd/E14571_01/web.1111/e13760/client.htm)

# java - 从我的异步线程调用活动类中的方法

> ID：13232747
> 
> 赞同：0
> 
> 时间：2012-11-05T13:05:07.410
> 
> 标签：java, android

```
public class AycanClass extends AsyncTask<String, Void, String> implements IAppointments {

    Activity activity;

    public AycanClass(Activity activity){
        this.activity = activity;
    }

    @Override
    protected void onPostExecute(String result) {
           super.onPostExecute(result); 
           activity.setFilters(value);      
    }     
} 
```

现在在我的 MainActivity 类中，我有这样的方法。

```
public void setFilters(String result){

} 
```

我无法调用此方法。

```
The method setFilters(result) is undefined for the type Activity 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:22:13.753

您应该使用具有单一方法的接口：此处为“setFilters” 您的活动应该实现此接口，并且您的 asynctask 构造函数将请求您的接口实例。

```
public interface ISetFiltersInterface{
public void setFilters(List<Filter>);
}

public class MyActivity extends Activity implements ISetFiltersInterface{
...
    public void setFilters(List<Filter>){
        //TODO
}
}

public class AycanClass extends AsyncTask<String, Void, String> implements IAppointments {

ISetFiltersInterface delegate;

public AycanClass(ISetFiltersInterface delegate){
    this.delegate = delegate;
}

@Override
protected void onPostExecute(String result) {
       super.onPostExecute(result); 
       delegate.setFilters(value);      
}     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:07:19.377

编辑：使您的活动实现一个包含该方法的接口。

```
public interface FilterableActivity {
 public void setFilters(String result);
} 
```

活动应如下所示：

```
public class MainActivity extends Activity implements FilterableActivity {

 ...
 public void setFilters(String result){

 }
} 
```

只需将 FilterableActivity 作为参数传递给 Asynctask。

```
public AycanClass(FilterableActivity activity){
    this.activity = activity;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:08:44.417

这是因为 Activity 接口没有定义 setFilter 函数。

您应该在接口中定义它并让您的 Activity 实现它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T13:08:43.297

```
public class AycanClass extends AsyncTask<String, Void, String> implements IAppointments {

    Activity activity;
    MainActivity mainactivityobjectname;

    public AycanClass(Activity activity){
        this.activity = activity;
    }

    @Override
    protected void onPostExecute(String result) {
           super.onPostExecute(result); 
           mainactivityobjectname.setFilters(value);      
    }     
} 
```

# r - 如何根据列的组合选择行

> ID：13232748
> 
> 赞同：0
> 
> 时间：2012-11-05T13:05:10.907
> 
> 标签：r, select, dataframe, rows

我有以下数据框：

```
structure(list(Species = 1:4, Ni = c(1, NA, 1, 1), Zn = c(1, 
1, 1, 1), Cu = c(NA, NA, 1, NA)), .Names = c("Species", "Ni", 
"Zn", "Cu"), row.names = c(NA, -4L), class = "data.frame") 
```

我想得到一个向量，其中包含`Ni = 1`和`Zn = 1`的所有物种`Cu = NA`。所以在这个例子中，这将是 (1,4)

我以为我可以尝试使用 R 脚本`select * from where`，但我似乎无法在 RStudio（R 版本 2.15.1）上安装包 RMySQL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:10:34.340

```
df <- structure(list(Species=1:4,Ni=c(1,NA,1,1),Zn=c(1,1,1,1),Cu=c(NA,NA,1,NA)),
      .Names=c("Species","Ni","Zn","Cu"),row.names=c(NA,-4L),class="data.frame")

with(df, Species[Ni %in% 1 & Zn %in% 1 & Cu %in% NA])
[1] 1 4 
```

而不是使用`Ni == 1`你应该使用`Ni %in% 1`，因为前者将返回`NA`元素 where `Ni`is `NA`。`Cu %in% NA`产生与 相同的结果`is.na(Cu)`。

```
with(df, Species[Ni == 1 & Zn %in% 1 & Cu %in% NA])
[1] 1 NA 4 
```

请注意，正如@MadScone 的回答中`Ni == 1`所使用的`subset`那样，它并没有因此受到影响（这让我感到惊讶）。

```
subset(df, Ni == 1 & Zn == 1 & is.na(Cu), Species)
  Species
1       1
4       4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:11:30.160

看看子集（）。

```
x <- structure(list(Species = 1:4, Ni = c(1, NA, 1, 1), Zn = c(1, 
     1, 1, 1), Cu = c(NA, NA, 1, NA)), .Names = c("Species", "Ni", 
     "Zn", "Cu"), row.names = c(NA, -4L), class = "data.frame")

subset(x, Ni == 1 & Zn == 1 & is.na(Cu), Species) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:20:09.433

**编辑：**我**坚持**
纠正`Backlin`......使用
**而*不是***`%in%`！的使用建议**更好**，因为结果仍然是一个data.frame，即使一个人只选择一列作为输出，即`== x & !is.na()`
`MadScone``subset()`

 **```
> class(subset(df, Ni == 1 & Zn == 1 & is.na(Cu), Species))
[1] "data.frame"
#whereby we get a vector when only one column is selected...
> class(df[df$Ni %in% 1 & df$Zn %in% 1 & is.na(df$Cu), 1])
[1] "integer"
# but we get data.frame when using multiple columns...
> class(df[df$Ni %in% 1 & df$Zn %in% 1 & is.na(df$Cu), 1:2])
[1] "data.frame" 
```

* * *

我只是留下我低于标准的答案来提及这个替代成语，*因为一个人应该避免*！

设置：

```
>  df <- structure(list(Species = 1:4, Ni = c(1, NA, 1, 1), Zn = c(1, 
    1, 1, 1), Cu = c(NA, NA, 1, NA)), .Names = c("Species", "Ni", 
    "Zn", "Cu"), row.names = c(NA, -4L), class = "data.frame")
> df
  Species Ni Zn Cu
1       1  1  1 NA
2       2 NA  1 NA
3       3  1  1  1
4       4  1  1 NA 
```

询问：

```
>  df[df$Ni == 1 & !is.na(df$Ni) 
      & df$Zn == 1 & !is.na(df$Zn) 
      & is.na(!df$Cu), ]

  Species Ni Zn Cu
 1       1  1  1 NA
 4       4  1  1 NA 
```

NA 值的诀窍是明确排除它们，例如 Ni、请求值 1 和 !is.na() 等。如果不这样做会导致查找记录，例如，Ni 为 NA

**如上所述，该 `df[df$Ni %in% 1 & df$Zn %in% 1 & is.na(!df$Cu), ]`成语更可取，并且使用子集（）通常更好。**

```
> df[df$Ni == 1 & df$Zn == 1 & is.na(!df$Cu), ]
   Species Ni Zn Cu
1        1  1  1 NA
NA      NA NA NA NA       # OOPS...
4        4  1  1 NA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:53:20.070

```
df <- structure(list(Species = 1:4, Ni = c(1, NA, 1, 1), Zn = c(1, 1, 1, 1),
                     Cu = c(NA, NA, 1, NA)),
                .Names = c("Species", "Ni", "Zn", "Cu"), row.names = c(NA, -4L),
                class = "data.frame") 
```

如果列`Ni`、`Zn`和仅`Cu`包含`1`and `NA`，您可以简单地使用：

```
subset(df, Ni & Zn & is.na(Cu), Species) 
```**

# jboss - 错误键属性不能为空

> ID：13232753
> 
> 赞同：0
> 
> 时间：2012-11-05T13:05:23.080
> 
> 标签：jboss, jboss5.x, jboss-esb

```
Hi all i'm try to deploy a esb project into jboss server 5.1ga 
But i got this error 

**My Enviroment is 
Jboss 5.1 ga,
Jboss Developer Studio 5.0**
Jboss esb 4.11
Riftsaw 2.3.0

 17:58:49,155 ERROR [AbstractKernelController] Error installing to Parse: name=vfszip:/D:/jboss-5.1.0.GA/server/default/deploy/Save_Event2.esb/ state=Not Installed mode=Manual requiredState=Parse
        org.jboss.deployment.DeploymentException: Key properties cannot be empty
            at org.jboss.soa.esb.listeners.deployers.mc.EsbConfigParser.getDependenciesFromDeploymentXml(EsbConfigParser.java:265)
            at org.jboss.soa.esb.listeners.deployers.mc.EsbConfigParser.parse(EsbConfigParser.java:170)
            at org.jboss.soa.esb.listeners.deployers.mc.EsbConfigParser.parse(EsbConfigParser.java:83)
            at org.jboss.deployers.vfs.spi.deployer.AbstractVFSParsingDeployer.parseAndInit(AbstractVFSParsingDeployer.java:256)
            at org.jboss.deployers.vfs.spi.deployer.AbstractVFSParsingDeployer.parse(AbstractVFSParsingDeployer.java:239)
            at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:355)
            at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:322)
            at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.createMetaData(AbstractParsingDeployerWithOutput.java:294)
            at org.jboss.deployers.spi.deployer.helpers.AbstractParsingDeployerWithOutput.deploy(AbstractParsingDeployerWithOutput.java:234)
            at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
            at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
            at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
            at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
            at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
            at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
            at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
            at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
            at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
            at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
            at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
            at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
            at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
            at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
            at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
            at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
            at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
            at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
            at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
            at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
            at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
            at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
            at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
            at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
            at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
            at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
            at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
            at org.jboss.Main.boot(Main.java:221)
            at org.jboss.Main$1.run(Main.java:556)
            at java.lang.Thread.run(Unknown Source)
        Caused by: javax.management.MalformedObjectNameException: Key properties cannot be empty
            at javax.management.ObjectName.construct(Unknown Source)
            at javax.management.ObjectName.<init>(Unknown Source)
            at org.jboss.soa.esb.listeners.deployers.mc.EsbConfigParser.getDependenciesFromDeploymentXml(EsbConfigParser.java:247)
            ... 38 more 
```

那是我遇到的错误，我正在尝试将 bpel 结果传递给 esb 并返回给 bpes 。

---我的deployment.xml-----

```
 <?xml version="1.0"?>
    <jbossesb-deployment>

 <depends>jboss.esb.quickstart.destination:service=Queue,name=quickstart_helloworld_Request_    esb_reply</depends>
      <depends>quickstart_helloworld_Request_esb</depends>
      <depends>quickstart_helloworld_Request_gw</depends>
    </jbossesb-deployment> 
```

--我的jbm-queue-service.xml-----------

```
 <?xml version="1.0" encoding="UTF-8"?>
        <server>
            <mbean code="org.jboss.jms.server.destination.QueueService"
                name="jboss.esb.quickstart.destination:service=Queue,name=quickstart_helloworld_Request_esb_reply"
                xmbean-dd="xmdesc/Queue-xmbean.xml">
                <depends optional-attribute-name="ServerPeer">jboss.messaging:service=ServerPeer
                </depends>
                <depends>jboss.messaging:service=PostOffice</depends>
            </mbean>
            <mbean code="org.jboss.jms.server.destination.QueueService"
                name="jboss.esb.quickstart.destination:service=Queue,name=quickstart_helloworld_Request_esb"
                xmbean-dd="xmdesc/Queue-xmbean.xml">
                <depends optional-attribute-name="ServerPeer">jboss.messaging:service=ServerPeer
                </depends>
                <depends>jboss.messaging:service=PostOffice</depends>
            </mbean>
            <mbean code="org.jboss.jms.server.destination.QueueService"
                name="jboss.esb.quickstart.destination:service=Queue,name=quickstart_helloworld_Request_gw"
                xmbean-dd="xmdesc/Queue-xmbean.xml">
                <depends optional-attribute-name="ServerPeer">jboss.messaging:service=ServerPeer
                </depends>
                <depends>jboss.messaging:service=PostOffice</depends>
            </mbean>
        </server> 
```

----我的jboss-esb.xml-----------

```
 <?xml version = "1.0" encoding = "UTF-8"?>
    <jbossesb
        xmlns="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd http://anonsvn.jboss.org/repos/labs/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.0.1.xsd"
        parameterReloadSecs="5">

        <providers>
            <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
                <jms-bus busid="quickstartGwChannel">
                    <jms-message-filter dest-type="QUEUE"
                        dest-name="queue/quickstart_helloworld_Request_gw" />
                </jms-bus>
                <jms-bus busid="quickstartEsbChannel">
                    <jms-message-filter dest-type="QUEUE"
                        dest-name="queue/quickstart_helloworld_Request_esb" />
                </jms-bus>
                <jms-bus busid="quickstartEsbReplyChannel">
                    <jms-message-filter dest-type="QUEUE"
                        dest-name="queue/quickstart_helloworld_Request_esb_reply" />
                </jms-bus>

            </jms-provider>
            <jbr-provider name="JBR-Http-1" protocol="http" host="localhost">
                <jbr-bus busid="Http-1" port="8088" />
            </jbr-provider>

        </providers>

        <services>
            <service category="FirstServiceESB" name="SimpleListener"
                description="Hello World">
                <listeners>
                    <jms-listener name="JMS-Gateway" busidref="quickstartGwChannel"
                        is-gateway="true" />
                    <jms-listener name="helloWorld" busidref="quickstartEsbChannel" />
                    <jbr-listener name="Http-Gateway" busidref="Http-1"
                        is-gateway="true" />
                </listeners>
                <actions mep="RequestResponse">
                    <action name="action1"
                        class="MyJMSListenerAction"
                        process="displayMessage" />
                        <!-- 
                    <action name="action2" class="org.jboss.soa.esb.actions.SystemPrintln">
                        <property name="printfull" value="false" />
                    </action>
                    The next action is for Continuous Integration testing 
                    <action name="testStore" class="org.jboss.soa.esb.actions.TestMessageStore" />
                    -->
                </actions>
            </service>
        </services>

    </jbossesb> 
```

任何帮助表示赞赏。最好的问候，普拉迪普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:12:07.833

如果您查看错误的堆栈跟踪，您可以看到错误是来自 EsbConfigParser 的 MalformedObjectNameException：

```
org.jboss.soa.esb.listeners.deployers.mc.EsbConfigParser.getDependenciesFromDeploymentXml(EsbConfigParser.java:247) 
```

抛出错误的方法名称是

> getDependenciesFromDeploymentXml

所以看起来问题出在部署xml中。

现在我们可以通过查看类的源代码来确认这一点（[https://www.java2s.com/Open-Source/Java/JBoss/jbossesb-4.7/org/jboss/soa/esb/listeners/deployers/mc /EsbConfigParser.java.htm](https://www.java2s.com/Open-Source/Java/JBoss/jbossesb-4.7/org/jboss/soa/esb/listeners/deployers/mc/EsbConfigParser.java.htm)）并看到它正在这样做：

```
 Iterator depends = MetaData.getChildrenByTagName(jboss, "depends");
    if (depends != null)
    {
        while (depends.hasNext())
        {
            Element depend = (Element) depends.next();
            dependencies.add(new ObjectName(MetaData.getElementContent(depend)));
        }
    } 
```

然后，如果我们查看您上面的 deployment.xml，确实有一个元素看起来无效：

```
 <depends>jboss.esb.quickstart.destination:service=Queue,name=quickstart_helloworld_Request_    esb_reply</depends> 
```

“quickstart_helloworld_Request_esb_reply”不应在“Request_”和“esb_reply”之间有空格。

将其更改为“quickstart_helloworld_Request_esb_reply”。

# javascript - 何时将元素实际添加到 DOM 树中？

> ID：13232754
> 
> 赞同：0
> 
> 时间：2012-11-05T13:05:27.707
> 
> 标签：javascript, dom

假设我有以下代码片段：

```
var NewNode = document.createElement("div");

NewNode.appendChild(document.createTextNode("Hello World!"));

document.body.appendChild(NewNode); 
```

我实际上在 DOM 树的哪一行添加了一个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:07:19.130

这里 NewNode 被添加到 DOM：

```
document.body.appendChild(NewNode); 
```

在这里，您只需在内存中创建一个对象：

```
var NewNode = document.createElement("div");

NewNode.appendChild(document.createTextNode("Hello World!")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:08:33.650

最后一行：`document.body.appendChild(NewNode);`将元素添加到当前渲染的 DOM。但是，没有什么可以阻止您构建多个单独的 dom 树：您可以将 x/html 文档解析为 DOM 树，或者创建一堆新元素并构建一个新的树/DOM 片段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:12:33.090

为了非常具体地回答您的问题，您将在第三行附加到文档 DOM 树。但是您的问题的措辞存在概念上的混乱。

在第一行之后有不止一个 DOM 树。有 (1) 文档的 DOM 树，您将其称为“该” DOM 树，尽管严格来说这不是唯一的，还有 (2) 由单个`div`元素组成的 DOM 树。此时，这两个 DOM 树是没有连接的。在执行完第二行之后，较新的 DOM 树中有两个节点，而不仅仅是一个。并且非常挑剔，在 return 之后`createTextNode`但在`appendChild`被调用之前，有三个 DOM 树。在第三行之后，您将返回到单个 DOM 树，它可以通过`document`.

# eclipse - 为什么我的 Eclipse 工作区如此容易损坏？

> ID：13232755
> 
> 赞同：0
> 
> 时间：2012-11-05T13:05:28.613
> 
> 标签：eclipse

我在 OSX 10.8 上使用 Eclipse 4.2。有时，Eclipse 会冻结，我必须强制退出应用程序。是的，程序有时会冻结，这不是一个大问题。但是，问题在于下次启动时，Eclipse 无法加载工作区。它在启动时冻结，或者工作区不显示。每次 Eclipse 未完全关闭时，工作空间似乎都会损坏。

修复启动的一种方法是

```
rm -rf ~/workspace/.metadata 
```

这样做之后，当然，设置消失了，项目必须重新导入等等。 - 这真的很痛苦，我不明白为什么必须这样。其他应用程序似乎能够保持其数据完整，即使它们被杀死。

你能提出解决这个问题的方法吗？有没有办法恢复损坏的工作区，包括设置？

# eclipse - 创建 Eclipse CSS 主题

> ID：13232758
> 
> 赞同：1
> 
> 时间：2012-11-05T13:05:33.093
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我从来没有做过任何 Eclipse 插件开发，所以这个概念对我来说有点陌生。无论如何，我希望创建一个简单的 eclipse 主题，阅读这篇关于创建 eclipse 主题的[博](http://www.vogella.com/blog/2012/07/11/eclipse-4-is-beautiful-create-your-own-eclipse-4-theme/)文，大致总结了以下内容

> 但是如果你想玩它，你只需要写一个插件，创建一个 CSS 文件并使用 org.eclipse.e4.ui.css.swt.theme 扩展点来指向你的文件。如果您导出插件，请将其放在 Eclipse 安装的“dropins”文件夹中，并且您的样式可用。

我继续阅读[实际的文章](http://www.vogella.com/articles/Eclipse4CSS/article.html)，但我从未为 Eclipse 做过任何插件开发的事实让我对本文的某些方面感到有些困惑。

我创建了一个带有激活器的新插件。现在让我陷入困境的第一个问题是关于扩展点的部分。他跳过了有关设置产品和 appname 属性的内容，我猜它需要类似于以下内容

> ```
> <plugin>    
>   <extension
>      point="org.eclipse.core.runtime.products">
>   <product
>         application="mythemetest.Activator"
>         name="mythemetest">
>      <property
>            name="appName"
>            value="mythemetest">
>      </property>
>      <property
>            name="applicationCSS"
>            value="platform:/plugin/mythemetest/css/default.css ">
>      </property>
>   </product> 
> ```

运行此应用程序不会启动使用 default.css 的新 Eclipse 主题，所以我做错了什么。我猜它与上面的产品元素有关。

有人可以帮我吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:11:59.983

安装[Eclipse 4 Chrome Theme](http://marketplace.eclipse.org/content/eclipse-4-chrome-theme#.UJgPMyHx4z8)，您可以直接编辑 CSS 而无需围绕样式进行插件编程部分。

# php - 如何使用带有官方 PHP 库的 Google Calendar API 创建全天事件？

> ID：13232759
> 
> 赞同：3
> 
> 时间：2012-11-05T13:05:32.597
> 
> 标签：php, google-calendar-api

我有这个代码：

```
$event = new Event();
$event->setSummary( $_event['summary'] );
$event->setLocation( $_event['location'] );
$start = new EventDateTime();
$start->allDay = true;
$start->setDateTime($_event['start']);
$event->setStart($start);
$cal->events->insert( $_calendar['id'], $event  ); 
```

但不起作用=\

任何的想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T03:20:56.450

如果您想创建一个为期一天的事件，请使用 $start->setDate() 而不是 $start->setDateTime()。

创建一个为期一天的活动

```
$event = new Event();
$event->setSummary("Summary of the event");
$event->setLocation("Location");

$start = new EventDateTime();
$start->setDate("2013-01-01"); 
$event->start=$start;

$end = new EventDateTime();
$end->setDate("2013-01-02");
$event->end=$end;

$calendarId="primary"; // primary represents your calendar
$createdEvent = $cal->events->insert($calendarId, $event); 
```

在给定的持续时间内创建事件

```
$event = new Event();
$event->setSummary("Summary of the event");
$event->setLocation("Location");

$start = new EventDateTime();
$start->setDateTime("2013-01-01T0:00:00.000+00:00");
$event->start=$start;

$end = new EventDateTime();
$end->setDateTime("2013-01-01T0:01:00.000+00:00");
$event->end=$end;

$calendarId="primary";
$createdEvent = $cal->events->insert($calendarId, $event); 
```

# .net - ReSharper 在 Windows 8 上运行的 Visual Studio 2012 中无法正常运行

> ID：13232770
> 
> 赞同：8
> 
> 时间：2012-11-05T13:05:54.123
> 
> 标签：.net, windows-8, visual-studio-2012, resharper-7.0

我在带有 Resharper 7.0.1 的 Windows 8 上安装了 Visual Studio 8，但在让 Resharper 正常运行时遇到了一些问题。似乎大多数 ReSharper 都不起作用，但这里有一些我注意到的奇怪行为：

*   单击`Ctrl-Shift+T`打开选择文件或文件夹对话框，但是当我从此处选择文件并单击输入时，对话框关闭，但文件未打开
*   `Ctrl+R+R`(rename) 给出的消息是密钥绑定到 Resharper Rename，但它当前不可用，即使光标位于标准 .cs 文件中的变量内，并且程序没有调试。
*   Alt+Enter 什么都不做，所以上下文菜单根本不会在任何地方弹出。

有谁知道 ReSharper 是否不应该在 Win 8 下工作，或者它是否在我的机器上搞砸了？在那种情况下呢？

**编辑**

注意到代码分析也不起作用。所以代码窗口右侧的“条”显示为绿色。黄线和红线表示不存在问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T13:43:37.373

您可能在没有任何键盘方案的情况下运行。您可以将其重置为更有用的东西：

1.  转到设置的以下部分：**ReSharper** => **Options** => **Environment** => **Keyboard & Menus**

2.  选择**Visual Studio**

3.  按**申请方案**

下次您按下 Visual Studio 已在使用的键绑定时，您将有机会切换 ReSharper 键绑定（或保留原始 Visual Studio 键绑定）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T14:23:07.790

似乎重新安装 Resharper 可以解决问题。我现在删除了 Reshaper，然后重新安装了它，现在看起来一切正常。

不知道第一次出了什么问题，但现在恢复正常了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-26T12:14:16.377

我想我也有类似的问题。我错过了一些“编码辅助上下文操作”请参阅[http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Context_Actions.html](http://www.jetbrains.com/resharper/webhelp/Coding_Assistance__Context_Actions.html) 我可以通过删除我的 Properties 文件夹中的 Annotaions.cs 来解决我的问题（由 Resharper 自动生成）。在 Resharper 创建新的 Annotaions.cs 后，丢失的选项再次可用。

# android - 自定义 EditText 的错误状态

> ID：13232772
> 
> 赞同：3
> 
> 时间：2012-11-05T13:05:56.133
> 
> 标签：android, android-edittext

我正在使用 4.0+ EditText 并且必须对一堆字段执行验证。当验证失败时，我必须将 EditText 的颜色更改为红色并显示一条消息。现在，我已经使用样式和主题轻松自定义了 EditText，但是没有可以在状态列表可绘制中使用的错误状态。关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:12:14.253

为什么不使用[`EditText.setError(CharSequence error)`](http://developer.android.com/reference/android/widget/TextView.html#setError%28java.lang.CharSequence%29)

结果将如下所示

![验证失败](../Images/35d8ef26dfed8d98f3225fb80f3aaf9c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:50:49.730

我使用[LevelListDrawables让它工作](http://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html)

# php - 带有锚的ie8导致崩溃

> ID：13232774
> 
> 赞同：-4
> 
> 时间：2012-11-05T13:06:03.530
> 
> 标签：php, html, internet-explorer-8, anchor

如果我在 Chrome、Firefox、Safari 或 IE9 等浏览器中打开网站[http://www.tingbio.nl/](http://www.tingbio.nl/)，我完全不会出错。

但是，当我尝试在 IE8 中浏览网站时，例如打开“分类”页面时，我在打开主页之后的任何其他页面时都会出错。有人知道这个错误是什么意思吗？

我个人认为错误是由我用来让页面在菜单下方打开的锚造成的。

我不知道如何解决这个问题..希望你们能帮助我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:14:16.597

问题是 href:`assortiment.php#top`要求太多。IE8 无法处理指向尚不存在的元素的链接（相对锚点链接到新页面上的元素）。
不过，JS 可以为您解决这个问题：

```
window.onload = function()
{
    if (location.href.indexOf('#top') === -1)
    {
        location.href += '#top';
    }
} 
```

请注意，在 IE8 中，此代码将导致[内存泄漏](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)检查我的答案：IIFE 可以很好地堵塞泄漏，但需要更多代码。

# rpm - rpmbuilder 只创建源 rpm 而不是二进制 rpm

> ID：13232776
> 
> 赞同：3
> 
> 时间：2012-11-05T13:06:14.510
> 
> 标签：rpm, qmake, rpmbuild, rpm-spec

我正在尝试为我在 Qt 中编写的库创建一个 rpm 包。这是我的规格文件：

```
Name:           blabla
Version:        1.3.2
Release:        0.1
License:        GPL
Summary:        my awsome lib
Url:            http://me.home.mrz.net
Group:          Core Applictaion
Source:         http://svn.me.home.mrz.net/svn/Core/blabla-1.3.2.tar
Vendor:         mrz Inc.
BuildArch:      x86_64
Packager:       mrz
BuildRoot:      %{_tmppath}/%{name}-%{version}-build

%description

%prep
%setup

%build
qmake

%install
make install

%clean
%{?buildroot:%__rm -rf "%{buildroot}"}

%files:
%defattr(-,root,root)
/home/mrz/local/lib/libBlabla.so
/home/mrz/local/lib/libBlabla.so.%{version} 
```

跑完之后

```
rpmbuild -ba blabla.spec 
```

rpmbuild 正常完成（退出 0），表明它写入了 src.rpm，对 .rpm 文件只字不提。我可以在 SRPMS 文件夹中看到 blabla-1.3.2-01.src.rpm 但 RMPS 文件夹是空的，这是我得到的部分输出：

```
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.WwW6ps
+ unmask 022
+ cd /home/mrz/rpmbuild/BUILD
+ rm -rf blabla-1.3.2
+ /usr/bin/gzip -dc /home/mrz/rpmbuild/SOURCES/blabla-1.3.2.tar
+ /bin/tar -xvvf -
.
.  
.
+ STATUS=0
+ '[' 0 -ne 0 ']'
+ cd blabla-1.3.2
+ /bin/chmod -Rf a+rX,u+w,g-w,o-w .
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.sNb2WS
+ umask 022
+ cd /home/mrz/rpmbuild/BUILD
+ /bin/rm -rf /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64
++ dirname /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64
+ /bin/mkdir -p /home/mrz/rpmbuild/BUILDROOT
+ /bin/mkdir /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64
+ cd blabla-1.3.2
+ qmake
Project MESSAGE: ******************************************************************
Project MESSAGE: * Building blabla
Project MESSAGE: * project default message 
Project MESSAGE: ******************************************************************
.
.
.
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.qVk8KW
+ umask 022
+ cd /home/mrz/rpmbuild/BUILD
+ cd blabla-1.3.2
+ make install
cd src/ && /usr/bin/qmake /home/mrz/rpmbuild/BUILD/blabla-1.3.2/src/src.pro -o     
Makefile
Project MESSAGE: ******************************************************************
Project MESSAGE: * Building blabla
Project MESSAGE: * project default message
Project MESSAGE: ******************************************************************
cd src/ && make -f Makefile install
make[1]: Entering directory `/home/mrz/rpmbuild/BUILD/blabla-1.3.2/src'
g++ -c -m64 -pipe -O2 -fPIC -Wall -W 
. 
.
.
+ /usr/lib/rpm/brp-lib64-linux
sf@suse.de: if you find problems with this script, drop me a note
+ /usr/lib/rpm/brp-compress
+ /usr/lib/rpm/brp-symlink
Checking for unpackaged file(s): /usr/lib/rpm/check-files /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64
warning: Could not canonicalize hostname: linux-x1rh
Wrote: /home/mrz/rpmbuild/SRPMS/blabla-1.3.2-0.1.src.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.M4rJDm
+ umask 022
+ cd /home/mrz/rpmbuild/BUILD
+ cd blabla-1.3.2
+ /bin/rm -rf /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64
+ exit 0 
```

任何人都知道我做错了什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:59:22.373

我认为您在 rpmbuild 期间误解了目录概念。

有 2 个重要目录：构建区域和构建根目录。

1.  构建区域是源被提取和编译的地方。在你这边，它是`/home/mrz/rpmbuild/BUILD`。在这里，tar 被解压缩，并且在如此创建的子目录中`blabla-1.3.2`，源代码位于。（这来自将单个目录放入 tar 文件的约定，可能在其下有其他子目录，但旁边没有。）

2.  构建根目录是以安装时应有的方式排列文件的位置。你用

    ```
    BuildRoot:      %{_tmppath}/%{name}-%{version}-build 
    ```

    显然，这转化为

    ```
    /home/mrz/rpmbuild/BUILDROOT/blabla-1.3.2-0.1.x86_64 
    ```

    ——我不知道为什么。`~/.rpmrc`或者`~/.rpmmacros`也许？

有关构建根的更多信息：

通常，您会告诉您的安装脚本以某种方式安装该构建根目录下的所有内容。如果这样做，一切都如您所愿，您可以定义在`%files`哪里找到它们。

我发现[最大 RPM](http://www.rpm.org/max-rpm/)很有帮助，尤其是[本](http://www.rpm.org/max-rpm/p5208.html)节。但是请注意，它已经过时了 - 在早期，没有`rpmbuild`，你用`rpm`. 但是基本概念是一样的。如今，`rpm`不再了解`-ba`，您使用`rpmbuild`.

# entity-framework - 检查约束实体框架

> ID：13232777
> 
> 赞同：26
> 
> 时间：2012-11-05T13:06:15.043
> 
> 标签：entity-framework, entity

在 EF 中，我可以添加一个检查约束，因此如果我的 CustomerNotes 实体具有布尔值“FollowUpRequired”属性，我会强制用户在“FollowUpDate”属性中输入有效的未来日期吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-12T12:32:41.270

EF 不支持 EF Core 3 之前的检查约束。

也就是说，您不能将属性应用于实体，并期望它生成适当的 SQL 以在底层数据库中创建 Check 约束。

[使用 Code First 数据迁移 ( http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx) )时的一种解决方法是生成迁移并在生成的函数覆盖中添加`Sql()`一行`Up()`

例如

```
public override void Up()
{
    // Auto generated code here
    // ...

    // YOUR CUSTOM SQL GOES HERE
    Sql("ALTER TABLE foo ADD CONSTRAINT CK_Some_Check CHECK (SomeDate > '20121110 00:00:00.000'");**
} 
```

另请参阅此问题和答案以获取更多信息： [是否可以表达检查约束？](https://stackoverflow.com/questions/9588606/is-it-possible-to-express-a-check-constraint)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2020-02-13T02:43:19.517

EF Core 3.0`entity.HasCheckConstraint()` [现在](https://docs.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.relationalentitytypebuilderextensions.hascheckconstraint?view=efcore-3.0)支持.

以瑞安[为例](https://stackoverflow.com/a/59895079)：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<SomeTable>(entity =>
        entity.HasCheckConstraint("CK_SomeTable_SomeColumn", "[SomeColumn] >= X");
} 
```

# javascript - 是否有相当于 jQuery 的 scrollTo 的 YUI 2.x？

> ID：13232780
> 
> 赞同：2
> 
> 时间：2012-11-05T13:06:27.140
> 
> 标签：javascript, cross-browser, yui

我想创建一个动画以在单击锚链接时平滑滚动页面，就像 jQuery.ScrollTo 插件 (http://demos.flesler.com/jquery/scrollTo/) 一样。

我尝试使用 YUI 2.x 动画实用程序，通过动画属性的值来制作它`document.activeElement.scrollTop`。它仅适用于 webkit :'( - 在另一个浏览器上，没有任何反应 - 甚至没有引发错误。

```
goToAnchor = function(e, id) {
    var targetToGo = Dom.get(id),
        scrollToTarget = new Animation(document.activeElement,
            {
                scrollTop:
                {
                    from: document.activeElement.scrollTop,
                    to: targetToGo.offsetTop
                }
            },  1,  Easing.easeOut
        )
    Event.preventDefault(e);

    scrollToTarget.animate();
} 
```

我想知道是否有一个插件可以为 YUI 2.x 执行此操作，或者如何执行跨浏览器兼容代码来执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:52:51.937

您需要记住，根据浏览器的不同，您可能需要滚动`html`或`body`元素。

（*实际上，您需要滚动两者才能确定*）

同样在[http://developer.yahoo.com/yui/animation/#scroll](http://developer.yahoo.com/yui/animation/#scroll)我看到

```
var element = document.getElementById('test');
var myAnim = new YAHOO.util.Scroll(element, {
    scroll: {    
        to: [ 500, test.scrollTop ]
    } 
});
myAnim.animate(); 
```

也许这就是你正在寻找的（*你仍然必须为两者设置`html`动画`body`*）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T12:54:33.100

```
<script>
(function() {
  var scrollingBody = document.body;
  if (YAHOO.env.ua.gecko){
    scrollingBody = document.documentElement;
  }
  (new YAHOO.util.Scroll(
    scrollingBody,
    {
        scroll:
        {
            to: [0, 50]
        }
    },
    0.7,
    YAHOO.util.Easing.easeOut
)).animate();
})();
</script> 
```

# c - 为什么 main() 不需要 return 语句？

> ID：13232784
> 
> 赞同：2
> 
> 时间：2012-11-05T13:06:59.823
> 
> 标签：c

> **可能重复：**
> [隐式返回 0](https://stackoverflow.com/questions/276807/return-0-implicit)
> [为什么返回 0 是可选的？](https://stackoverflow.com/questions/4138649/why-is-return-0-optional)

为什么 C 中的 main() 函数即使不使用`exit`or也可以正确终止`return`？

例如：

```
#include<stdio.h>

int sum(int a,int b)
{
 return (a + b);
}

int main()
{
 int a=10;
 int b=5;
 int ans;    
 ans=sum(a,b);
 printf("sum is %d",ans);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T13:15:01.877

这是因为 C99 和 C11 标准是这样说的：

> **5.1.2.2.3 程序终止**
> 
> 到达`}`终止`main`函数的返回值 0。如果返回类型与 不兼容`int`，则返回到宿主环境的终止状态未指定。

但是，您**应该**添加一个 return 语句。这是因为返回的值在 C89 中是**未定义**的，否则！

> **3.6.6.4 返回语句**
> 
> 到达`}`终止函数的方法等同于在没有表达式的情况下执行 return 语句。
> 
> **2.1.2.2 托管环境**
> 
> 如果主函数执行一个没有指定值的返回，返回给宿主环境的终止状态是未定义的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-05T13:08:53.400

因为编译器`exit`为你添加了一个隐式。

检查 nightcracker 的原因；我仍然强烈建议您使用有意义的返回码进行显式退出/返回。

C99标准：

> 如果 main 函数的返回类型是与 int 兼容的类型，则从初始调用到 main 函数的 return 等价于以 main 函数返回的值作为参数调用 exit 函数；10）到达 }终止 main 函数返回值 0。如果返回类型与 int 不兼容，则返回给宿主环境的终止状态未指定。

我正在寻找要检查的 C89 文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:19:12.917

因为编译器会为您添加它。

在 unix/linux 上你可以试试这个小脚本：

retval.sh

```
#!/bin/sh
$1
echo $? 
```

然后通过它运行你的程序：

```
./retval.sh yourprogram 
```

它将输出程序的返回值。即使您不添加任何返回，您也会看到 main() 或 exit() 将返回一个整数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:09:30.500

因为如果执行终止而没有任何一个它假定它是成功的，即返回 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T13:11:45.650

主要的是，如果您不使用标志，您的编译器将不会告诉您任何信息。

如果你使用严重的标志，你的编译器会告诉你每一个缺失的细节。

返回一些东西很重要，启动你的程序可以被告知你的程序是否执行成功。如果您的程序不返回任何内容（默认为 0），例如，您启动它的终端将假定它即使失败也能正常运行。

# java - 如何在 Java 中获取 Javascript 变量值？

> ID：13232803
> 
> 赞同：4
> 
> 时间：2012-11-05T13:07:37.997
> 
> 标签：java, javascript

在我当前的项目中，我必须从网络上读取一个 JavaScript 文件并从中提取一个对象。该变量可能会不时变化，因此我必须阅读它而不是将其硬编码到我的 android 应用程序中。

假设我想提取以下变量（然后使用 JSONObject 解析字符串，这很简单）：

```
var abc.xyz = {
"a": {"one", "two", "three"},
"b": {"four", "five"}
} 
```

我有这个问题。我是否必须实现一些类似编译器的扫描程序才能查找名称并获取其值，或者有一些我可以使用的现有工具？

JavaScript 文件不像这个例子那么简单。它包含许多其他代码。所以一个简单的`new JSONObject()`东西还是不行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:20:08.180

Java中有很多库可以解析JSON。[JSON.org](http://www.json.org/)上有一个列表

用 Java 读取文件

```
import org.json.JSONObject;

URL url = new URL("http://example.com/foo.js");
InputStream urlInputStream = url.openStream();
JSONObject json = new JSONObject(urlInputStream.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:30:39.583

最后自己编码。

```
//remove comments
private String removeComment(String html){
    String commentA = "/*";
    String commentB = "*/";
    int indexA, indexB;
    indexA = html.indexOf(commentA);
    indexB = html.indexOf(commentB);
    while(indexA != -1 && indexB != -1 ){
        html = html.substring(0, indexA) + html.substring(indexB + commentB.length());
        indexA = html.indexOf(commentA);
        indexB = html.indexOf(commentB);
    }
    return html;
}

    //find variable with name varName
private String findVar(String varName, String html, char lBrace, char rBrace){
    String tmp = html.substring(html.indexOf(varName));
    tmp = tmp.substring(tmp.indexOf(lBrace));

    int braceCount = 0;
    int index = 0;
    while(true){
        if(tmp.charAt(index) == lBrace){
            braceCount ++;
        }else if(tmp.charAt(index) == rBrace){
            braceCount --;
        }
        index ++;
        if(braceCount == 0){
            break;
        }
    }
    return tmp.substring(0, index);
} 
```

# java - 递归中的 Apache dbcp 异常

> ID：13232809
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:08:05.103
> 
> 标签：java, mysql, jakarta-ee, jndi, connection-pooling

我收到如下错误：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 8,374,094 milliseconds ago.  The last packet sent successfully to the server was 8,374,094 milliseconds ago.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3364)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1983)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2293)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at com.mycode.MyLoginDAO.validateUser(MycodeDAO.java:517)
    at com.mycode.MyLoginFB.validate(MycodeFB.java:85)
    at org.apache.struts.chain.commands.servlet.ValidateActionForm.validate(ValidateActionForm.java:58)
    at org.apache.struts.chain.commands.AbstractValidateActionForm.execute(AbstractValidateActionForm.java:120)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:775)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:704)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:897)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketException: Broken pipe
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3345)
    ... 35 more 
```

当我长时间使用下面的代码或向服务器发送请求 n 次时。

我使用以下 context.xml 在 My-sql 上使用 Apache dbcp 配置了我的应用程序

上下文.xml：

```
<Resource name="jdbc/MYDB" auth="Container" type="javax.sql.DataSource" 
        maxActive="100" maxIdle="10" maxWait="10000" username="root" password="12345" 
        driverClassName="com.mysql.jdbc.Driver" url="jdbc:mysql://localhost:3306/egDB" 
        removeAbandoned="true" removeAbandonedTimeout="1000"/> 
```

从这个 DBConnection Singleton 类返回到其类和 .jsp 文件中的所有调用方法的连接

DBConnection 类：

```
package my.code;

import java.io.Serializable;
import java.sql.Connection;
import java.sql.SQLException;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

public class DBConnection implements Serializable {

    private static final long serialVersionUID = 1565029633902701330L;
    private static DBConnection dbConnection;
    private DataSource dataSource;
    private Connection connObj;
    private Context initContext;

    private DBConnection() {

    }

    public static Connection getDBConnection() {
        if (dbConnection == null) {
            dbConnection = new DBConnection();
        }

        Connection connectionObj = dbConnection.getConnection(dbConnection
                .getDataSource());
        try {
            while (connectionObj == null || connectionObj.isClosed())
                connectionObj = dbConnection.getConnection(dbConnection
                        .getDataSource());
        } catch (SQLException e) {
            e.printStackTrace();
        }

            return connectionObj;
    }

    private Connection getConnection(DataSource ds) {
        try {
            connObj = ds.getConnection();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return connObj;
    }

    private DataSource getDataSource() {
        if (dataSource == null) {
            try {
                initContext = dbConnection.getContext();
                Context envContext = (Context) initContext
                        .lookup("java:/comp/env");
                dataSource = (DataSource) envContext.lookup("jdbc/NichehireDB");
            } catch (NamingException e) {
                e.printStackTrace();
            }
        }
        return dataSource;
    }

    private Context getContext() {
        if (initContext == null) {
            try {
                initContext = new InitialContext();
            } catch (NamingException e) {
                e.printStackTrace();
            }
        }
        return initContext;
    }
} 
```

在 DAO/DTO 类或 jsp 文件中使用 Connection：

```
package my.code;

import java.io.Serializable;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Vector;

public class MycodeDAO implements Serializable {

    private static final long serialVersionUID = 7146087855230830066L;

    private String jobTitle;
    private String jobDesc;

    public String getJobTitle() {
        return jobTitle;
    }

    public String getJobDesc() {
        return jobDesc;
    }

    public MycodeDAO() {

    }

    public MycodeDAO(String jobTitle, String jobDesc) {

        super();
        this.jobTitle = jobTitle;
        this.jobDesc = jobDesc;

    }

    public Vector<MycodeDAO> getSavedJobs(String js_email_id) {

        Vector<MycodeDAO> savedJobsVector = new Vector<MycodeDAO>();

        Connection connObj = DBConnection.getDBConnection();
        PreparedStatement pstmtObj = null;
        ResultSet rsObj = null;
        PreparedStatement appliedPstmtObj = null;
        ResultSet appliedRSObj = null;

        try {
            pstmtObj = connObj
                    .prepareStatement(
                            "select * from jobs where jobid = ?",
                            ResultSet.TYPE_SCROLL_SENSITIVE,
                            ResultSet.CONCUR_UPDATABLE);
            pstmtObj.setInt(1, 102);
            rsObj = pstmtObj.executeQuery();

            while (rsObj.next()) {

                jobTitle = rsObj.getString("jobTitle");
                jobDesc = rsObj.getString("jobShortDesc");

                savedJobsVector.add(new MycodeDAO(jobTitle, jobDesc));
            }

        } catch (SQLException e) {

            e.printStackTrace();
        } finally {

            if (connObj != null) {
                try {
                    if (!connObj.isClosed()) {
                        connObj.close();
                    }
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
            System.gc();
        }
        System.out.println("savedjobVector size:\t" + savedJobsVector.size());

        return savedJobsVector;
    }
} 
```

像上面一样，我有很多 dao、dto 和 jsp 类。在不同的类中，它会引发错误。当我刷新包含 dao/dto 代码的 .jsp 页面时，服务器出现 5xx 错误，当我查看日志文件时，它说使用了 Max active sql connections。

请让我知道我哪里出错了。请做必要的事情来解决这个异常。注意：MySQL 最大连接数：350

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:13:07.377

也许您的 mysql 服务器正在关闭池中的空闲连接。

您可以在 my.ini 中检查[wait_timeout](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)和[interactive_timeout](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_interactive_timeout)。

我注意到您已经为您的数据源启用了*removeAbandoned*标志，但是查看您可以阅读的[DBCP 文档](http://commons.apache.org/dbcp/configuration.html)

> 如果您启用了“removeAbandoned”，则连接可能会被池回收，因为它被认为已被放弃。当 (getNumIdle() < 2) 和 (getNumActive() > getMaxActive() - 3) 时触发此机制

...因此，如果您从未达到 98 个活动连接且少于 2 个空闲连接，则永远不会触发*removeAbandoned*机制，并且 mysql 连接可能会超时。

# joomla - 忘记密码的电子邮件配置

> ID：13232811
> 
> 赞同：0
> 
> 时间：2012-11-05T13:08:32.423
> 
> 标签：joomla

我正在使用 joomla 的默认登录模块。在忘记模块部分，我又添加了一个名为用户名的列。现在我应该如何在邮件中发送这个用户名和令牌 ID？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:19:17.917

打开以下文件夹：

```
root/components/com_user/models/reset.php 
```

* * *

***Joomla 2.5***

第 383 到 388 行，更改：

```
$body = JText::sprintf(
    'COM_USERS_EMAIL_PASSWORD_RESET_BODY',
    $data['sitename'],
    $data['token'],
    $data['link_text']
); 
```

对此：

```
$body = JText::sprintf(
    'COM_USERS_EMAIL_PASSWORD_RESET_BODY',
    $data['fromname'], //added data type to get the username
    $data['sitename'],
    $data['token'],
    $data['link_text']
); 
```

* * *

***Joomla 1.5***

在第 256 行，更改：

```
$body = JText::sprintf('PASSWORD_RESET_CONFIRMATION_EMAIL_TEXT', $sitename, $token, $url); 
```

对此：

```
$body = JText::sprintf('PASSWORD_RESET_CONFIRMATION_EMAIL_TEXT', $sitename, $fromname, $token, $url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T10:26:06.473

这是不正确的；

```
$data['fromname'], //added data type to get the username 
```

这应该是;

```
$data['**username**'], //added data type to get the username 
```

另外不要忘记，您还需要修改此电子邮件的语言字符串以包含和额外的`%s.`

因此，在您的电子邮件中，它现在会显示；

```
%$ = username
%$ = sitename
%$ = verification code
%$ = site link 
```

# java - 编译时间与运行时间

> ID：13232814
> 
> 赞同：0
> 
> 时间：2012-11-05T13:08:39.350
> 
> 标签：java, runtime, polymorphism, compile-time

经过 2-3 小时后才知道，**compile-time 和 run-time**有什么区别。最后，我想出了这个。

*在运行时分配的内存称为运行时/动态绑定，在编译时分配的内存称为编译时/静态绑定。*

然后我尝试了这个例子

```
class myclass {

    void here() {
        System.out.println("Here from myclass !!");
    }

    void here(int i) {
        System.out.println("Here !!" + i);
    }
}

class thisclass extends myclass {

    void here() {
        System.out.println("Here from thisclass !!");
    }
}

public class poly {

    public static void main(String s[]) {
        myclass m= new myclass();
        myclass a= new thisclass();
        m.here();
        m.here(12);
        a.here();
        a.here(13);
    }
} 
```

所以，我还发现这`myclass a= new thisclass();`被认为是运行时绑定。由于，`a`是 的对象`myclass`，但突然编译器发现，类不匹配。因此，它将动态绑定`thisclass`对象的空间。

所以，直到这里，我得到了东西。但是，我发现，另一个常见的答案是***重载引用编译时和覆盖引用运行时***。我没有明白这一点。

```
thisclass a= new thisclass();
a.here(); 
```

这是否也称为运行时绑定。?? 请纠正我，如果在这里写错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:30:17.860

首先，内存分配不在这张图中。没有编译时内存分配。

该问题将编译时与静态绑定和运行时与动态绑定混为一谈。

静态绑定*发生在*编译时；动态绑定*发生在*运行时。

现在，当你写

```
myclass m= new thisclass();
m.here(18); 
```

在编译时发生的是方法*签名*的解析：您正在调用`here(int)`并且该选择是最终的。这被称为“静态绑定”。在运行时发生的是方法*分派*：运行时选择一个`here(int)`适合于 所引用对象的运行时类型的实现`m`。有两种方法可供选择：`myclass.m(int)`和`thisclass.m(int)`，并且运行时在此特定示例中选择后者。这被称为“动态绑定”。

至于您的问题“对于动态绑定来说是压倒一切的强制性”... Java 语言规范规定了选择在运行时调用的正确方法的规则。对于一般情况，这些规则意味着称为“动态绑定”的过程。但是，如果您要问是否有任何特定过程总是在运行时发生，那么情况就不同了：优化的 JIT 编译器可以看到只有一种方法可供选择，并输出一个“单态调用站点”，它对单个选择进行硬编码。此外，它还可以将整个方法*内联*到调用者中，从而甚至删除调用本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:17:32.937

这：

```
thisclass a= new thisclass();
a.here(); 
```

不是运行时绑定，因为编译器知道要调用什么 here() 方法（来自此类的那个）。但如果你说：

```
myclass a= new thisclass();
a.here(); 
```

那么将是一个运行时绑定。

PS：您的班级名称应以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:30:43.057

> 但是，我发现，另一个常见的答案是重载引用编译时和覆盖引用运行时。我没有明白这一点。

重载意味着在同一个类中有多个具有不同参数的方法。调用哪个方法在编译时是已知的，因为此时指定了参数。

覆盖意味着在子类中重新定义父类的方法。

# javascript - Facelets 中的 JavaScript 导致 java.lang.IllegalArgumentException: null source

> ID：13232815
> 
> 赞同：3
> 
> 时间：2012-11-05T13:08:39.647
> 
> 标签：javascript, jsf-2, facelets

我是 Javascript 和 Java Server Faces 的新手，我遇到了下一个问题。

**下面的代码工作正常：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript">
        function initialize() 
        {
            alert("Testing");
        }
    </script>
    </head>
    <body onload="initialize()">

        <h1 align="center">Sol-Tech</h1><br  />

    </body>
</html> 
```

**但是当我添加一个 FOR 循环时，它不起作用：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript">
        function initialize() 
        {
            for(var i; i<3; i++)
            {
                alert("Test");  
            }
        }
    </script>
    </head>
    <body onload="initialize()">

        <h1 align="center">Sol-Tech</h1><br  />

    </body>
</html> 
```

![在此处输入图像描述](../Images/730d0d94c72de20a65c34a18bf696de3.png)

有没有人对如何在 javascript 中执行 FOR 循环而不会出错有任何建议？

在此先感谢，伊曼纽尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:14:39.920

您正在使用 Mojarra 的过时版本，该版本暴露了一个错误，`IllegalArgumentException: null source`当视图文件包含 XML 语法错误或无法恢复视图时，会错误地抛出这种错误。另请参阅[java.lang.IllegalArgumentException: null source](https://stackoverflow.com/questions/4792437/java-lang-illegalargumentexception-null-source/4793340#4793340)和[JSF issue 1762](http://java.net/jira/browse/JAVASERVERFACES-1762)。

如果您升级到较新的 Mojarra 版本（当前已经是[2.1.14](http://javaserverfaces.java.net/)`<` ），那么在这种特殊情况下，您将在指示 XML 元素开始的字符上获得更不言自明的 XML 语法错误。Facelets 是一种基于 XML 的视图技术，由 SAX 解析器解析。您需要将[XML 特殊字符](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML) `<`替换为`&lt;`

```
for(var i=0; i&lt;3; i++) {
    alert("Test");  
} 
```

或将整个脚本放在一个`CDATA`块中

```
<script type="text/javascript">
  <![CDATA[
    function initialize() 
    {
        for(var i=0; i<3; i++)
        {
            alert("Test");  
        }
    }
  ]]>
</script> 
```

或者只是把它放在自己的`.js`文件中，这样它就不会被解析为 XML。

```
<script type="text/javascript" src="script.js"></script> 
```

### 也可以看看：

*   [为 XHTML 编写 JavaScript](https://developer.mozilla.org/en-US/docs/Writing_JavaScript_for_XHTML)

* * *

**与具体问题无关**，JS 语法错误（`var i`我已经在代码片段中修复的未初始化）实际上是一个完全不同的问题，只会在浏览器的 JS 控制台的客户端显示错误，绝对不会导致服务器异常因为 JS 根本不在 webserver 中运行，而只在 webbrowser 中运行。

# javascript - 如何在 div 中居中 img

> ID：13232821
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:08:51.903
> 
> 标签：javascript, html, css, web, image

> **可能重复：**
> [如何在 div 中居中图像](https://stackoverflow.com/questions/2237636/how-to-center-image-inside-div)

我需要能够将图像放在 div 的中心。无论分辨率如何，我的图像都需要位于中心。

代码：

```
<div style="width:100%; height:20%;">
    <img src="images/pic.png" id="image"  style="width: 208px; height: 75px;margin-left: 42%;" alt=""/>
</div> 
```

这不能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:10:22.080

```
<div style="width:100%; height:20%; text-align:center">
    <img src="images/pic.png" id="image"  style="width: 208px; height: 75px; margin:0 auto;" alt=""/>
</div> 
```

应该为你工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:10:27.910

试试这个：

```
<div style="width:100%; height:20%;text-align:center;"> 
<img src="images/pic.png" id="image style="width:208px; height:75px; margin-left:42%;" alt=""/>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:12:32.453

```
#Sample
{
background:url(your_image.jpg) no-repeat center center;
height:200px;
width:200px;
} 
```

（假设 id="sample" 的 div 因为您已经指定了高度和宽度，所以添加背景应该不是问题）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T13:13:09.847

这是因为您为图像设置了 42% 的左侧边距。在图像样式上试试这个：

```
display:block;margin:0 auto; 
```

# javascript - 嵌入式 iframe 可防止父 div 上的点击事件。任何解决方法？

> ID：13232823
> 
> 赞同：0
> 
> 时间：2012-11-05T13:08:55.117
> 
> 标签：javascript, html

我有一个绑定到一个`div`元素的点击事件，在这个 div 中我使用 iframe 嵌入了一个 SVG 文件（我尝试过使用对象/嵌入元素，结果是相同的），如下所示：

```
<div id="example">
 <iframe src="example.svg" type="image/svg+xml" width="100%" height="100%"></iframe>
</div> 
```

当我添加 iframe 元素时，它的父母点击事件不再触发。

如果我将 SVG 嵌入到`IMG`元素中，一切都很好，但 svg 缩放不再正常工作。

有没有一个优雅的解决方法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:05:13.837

你可以尝试屏蔽 iframe

```
<html>
  <head>
    <style type="text/css">
      #wrapper {
        width:1000px;
        height:600px;
        position:relative;
      }
      #wrapper:after {
        content:'';
        position:absolute;
        width:100%;
        height:100%;
        top:0;
        left:0;
        z-index:2;
      }
    </style>
  </head>
  <body>
    <div id="wrapper" onclick="alert('hi mondo');">
      <iframe src="harvest.svg" type="image/svg+xml" frameborder="0"
              style="width:100%;height:100%;"></iframe>
    </div>
  </body>
</html> 
```

此解决方案的问题在于上下文菜单不再与图像相关。

# tdd - 第一次需要 TDD 帮助

> ID：13232831
> 
> 赞同：0
> 
> 时间：2012-11-05T13:09:19.110
> 
> 标签：tdd, dto

它（几乎）是我第一次尝试按照 TDD 原则创建代码。但我有麻烦如何开始。

例如：我想改变一些关于一个人的信息。

为方便起见，一个人只有以下值： - FirstName - LastName - Email

我最后需要什么： - 一个人 DTO - 一个人实体（Nhibernate） - 将 dto 值存储在数据库中的功能。最后我需要返回一个成功或一个错误（可能是一个布尔值）。

有了给定的信息，如何开始呢？这是一个全球性的问题，但那是因为我不知道如何开始。我有很多文章，但不知何故我已经卡住了。

编辑： - 我正在使用 MVC：MVC 将返回一个 DTO（从表单字段填充）。

所以 MVC 开始调用可能是这样的：

```
public JsonResult MutatePerson(PersonDto person){
    //Call functions by TDD here
    return Json(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:41:27.147

使用 TDD，您应该使用接口作为参数。可以模拟接口，并通过模拟测试 MutatePerson 方法，仅此而已。在单元测试中，您只想测试方法对输入的反应，而不是对象对方法的反应。如果您还测试 DTO 对象的行为方式，那么您正在编写集成测试。

因此，使用`PersonDto`（如果不存在则创建一个）的接口。并将其用作方法参数而不是具体类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:13:36.103

您已经描述了所涉及的对象，但*没有*描述操作。

大概你需要一个`read()`手术，一个`write()`手术。也许是`list()`手术？

以上所有内容都应该有与之相关的测试，例如

```
testCanReadViaId();
testCanThrowExceptionOnReadingInvalidId();
testCanWrite(); 
```

等等

对于很多工作，您应该*模拟*您的数据源等，并在您的持久层下放置（例如）硬编码数据，这样您就不会依赖数据库。然而，对于上述情况，我肯定会测试基本的数据库交互。

因此，您可能需要（最初）将测试套件指向带有预设数据的数据库。如果您想要更灵活，那么您的测试设置代码可以在运行测试之前先将实体写入数据库。

您的测试应该测试数据和操作的不同排列，例如在上面我建议通过有效 id（例如，1）和针对无效 id（例如，-1）的类似操作来读取对象的测试。您可能还想检查不同的数据组合（例如，如果未填充电子邮件地址，一切是否正常 - 如果数据库列可以为空，这可能是有效的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:56:46.847

可能只有我一个人，但我感觉你一开始对你的全局系统在层、模块以及它们之间的依赖关系和交互方面应该是什么样子一无所知。

TDD 的紧急设计确实可以在小对象图的级别上工作，但是如果不先进行一些整体架构设计（不是大的前期设计，但足以让您入门），您将无法逃脱。

考虑到这一点，我认为您将对要测试的内容有一个更好的想法。

一旦你弄清楚了，我认为你应该：

*   了解面向对象的单元测试技术，单元测试是指*孤立地*测试事物。Roy Osherove 的[单元测试艺术](http://www.manning.com/osherove/)对于 .NET 开发人员来说是一个很好的起点。

*   了解架构级 TDD 策略。通过您阅读的文章，您肯定对如何在小范围内进行 TDD 有所了解，但是您需要一种更全局的方法：您应该首先进行什么 TDD，以什么顺序等。像[GOOS](http://www.growing-object-oriented-software.com/)这样的书可能会帮助您在该部门。

# vbscript - 使用 VBScript 从 IP 地址/网络掩码计算 IP 范围

> ID：13232835
> 
> 赞同：0
> 
> 时间：2012-11-05T13:09:32.907
> 
> 标签：vbscript, ip, netmask

我讨厌问这个问题，但对脚本很陌生，需要帮助。

我想使用 VBS 创建一个计算器，它将接受我的输入并给我一个可接受的 IP 地址范围。

例如：

VBS 要求用户输入用户输入 IP 地址/网络掩码：`214.13.104.128/28`

输出： `IP Address Range = 214.13.104.129 - 214.13.104.190`

我知道您可以使用许多在线工具，但我需要在无法访问互联网的系统上使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-22T06:47:59.020

不确定您是否仍然需要这个，但为了信息科学和那些正在寻找解决方案的人，我无论如何都会发布这个。我希望它至少可以帮助寻找解决方案的人。如果不是 OP... 许多其他 Stack Overflow 用户。

```
CIDRIP = "192.168.0.1/24" 'must be in CIDR Format as no error checking added
wscript.echo "IP Address Range " & CIDR2IP(CIDRIP, false) & " - " & CIDR2IP(CIDRIP, True)

Function CIDR2IP(ip, high)
    highs = "11111111111111111111111111111111"
    lows = "00000000000000000000000000000000"
    byte0 = Dec2bin(Split(ip, ".")(0))
    byte1 = Dec2bin(Split(ip, ".")(1))
    byte2 = Dec2bin(Split(ip, ".")(2))
    byte3 = Dec2bin(Split(Split(ip, ".")(3), "/")(0))
    Mask = Split(Split(ip, ".")(3), "/")(1)
    bytes = byte0 & byte1 & byte2 & byte3
    rangelow = Left(bytes, Mask) & Right(lows, 32 - Mask)
    rangehigh = Left(bytes, Mask) & Right(highs, 32 - Mask)
    iplow = bin2ip(Left(bytes, Mask) & Right(lows, 32 - Mask))
    iphigh = bin2ip(Left(bytes, Mask) & Right(highs, 32 - Mask))
    If high Then
        CIDR2IP = iphigh
    Else
        CIDR2IP = iplow
    End If
End Function 
```

将 32 位二进制字符串转换为 IP 地址的函数

```
'expecting input like 00000000000000000000000000000000
Function bin2ip(strbin)
    ip0 = C2dec(Mid(strbin, 1, 8))
    ip1 = C2dec(Mid(strbin, 9, 8))
    ip2 = C2dec(Mid(strbin, 17, 8))
    ip3 = C2dec(Mid(strbin, 25, 8))
    'combines all of the bytes into a single string
    bin2ip = ip0 & "." & ip1 & "." & ip2 & "." & ip3 
End Function 
```

将二进制数转换为十进制数的函数

```
'expecting input like 00010101
Function C2dec(strbin)
    length = Len(strbin)
    dec = 0
    For x = 1 To length
        binval = 2 ^ (length - x)
        temp = Mid(strbin, x, 1)
        If temp = "1" Then dec = dec + binval
    Next
    C2dec = dec
End Function 
```

将十进制数转换为二进制的函数

```
'Expecting input 0 thru 255
Function Dec2bin(dec)
    Const maxpower = 7
    Const length = 8
    bin = ""
    x = cLng(dec)
    For m = maxpower To 0 Step -1
        If x And (2 ^ m) Then
            bin = bin + "1"
        Else
            bin = bin + "0"
        End If
    Next
    Dec2bin = bin
End Function 
```

额外奖励 - 对于任何了解 MYSQL 并在 MYSQL 中使用 IP 地址的人，他们将立即识别这些功能。

```
'expecting input like 10.120.44.1 and converts to 175647745
Function INET_NTOA(ip)
    ip0 = Split(ip, ".")(0)
    ip1 = Split(ip, ".")(1)
    ip2 = Split(ip, ".")(2)
    ip3 = Split(ip, ".")(3)
    urlobfs = 0
    urlobfs = ip0 * 256
    urlobfs = urlobfs + ip1
    urlobfs = urlobfs * 256
    urlobfs = urlobfs + ip2
    urlobfs = urlobfs * 256
    urlobfs = urlobfs + ip3
    INET_NTOA = urlobfs
End Function

'expecting input like 175647745 and converts to 10.120.44.1
'Bugs will occur for CLng ceiling numbers. +/- 2,147,483,647
Function INET_ATON(ip)
    Dim ipa()
    ReDim ipa(3)
    n2ip = ip
    For i = 3 To 1 Step -1
        ipa(i) = n2ip Mod 256
        n2ip = n2ip / 256
    Next
    ipa(0) = CInt(n2ip)
    INET_ATON = ipa(0) & "." & ipa(1) & "." & ipa(2) & "." & ipa(3)
End Function 
```

**2021 年 9 月更新** 流行的请求要求从 CIDR 地址返回可用的 IP 范围，我不知道……它一直在我的随机 IP 函数列表中。

```
Function CIDR2IPRANGE(cidr)
    ip = cidr
    highs = "11111111111111111111111111111111"
    lows = "00000000000000000000000000000000"
    byte0 = Dec2bin(Split(ip, ".")(0))
    byte1 = Dec2bin(Split(ip, ".")(1))
    byte2 = Dec2bin(Split(ip, ".")(2))
    byte3 = Dec2bin(Split(Split(ip, ".")(3), "/")(0))
    Mask = Split(Split(ip, ".")(3), "/")(1)
    bytes = byte0 & byte1 & byte2 & byte3
    lownetworkrange = Left(bytes, Mask)
    lowhostrange = Right(lows, 31 - Mask) & "1"
    rangelow = lownetworkrange + lowhostrange
    highnetworkrange = Left(bytes, Mask)
    highhostrange = Right(highs, 31 - Mask) & "0"
    rangehigh = highnetworkrange + highhostrange
    iplow = bin2ip(rangelow)
    iphigh = bin2ip(rangehigh)
    CIDR2IP = iplow & " - " & iphigh
End Function 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-17T04:23:39.360

作为出色的@Steve kline 答案的补充，对于那些希望**获得 IP 范围内所有 IP 地址列表的人**，这里是从[http://www.intelliadmin.com/index.php/2012/ 获取的脚本04/use-vb-script-to-list-a-range-of-ip-addresses/](http://www.intelliadmin.com/index.php/2012/04/use-vb-script-to-list-a-range-of-ip-addresses/)（在[Wayback Machine](http://web.archive.org/)的帮助下）。

我认为`iS4`, `iS3`,`iS2`变量应该变成**0**而不是**1**。

```
'*********************************
'* IntelliAdmin, LLC 2012        *
'* http://www.intelliadmin.com   *
'*********************************

'The start and end ip range
StartIP = "10.10.29.129"
EndIP = "10.10.29.240"

'This function contains the code that will execute
'against the remote hosts

Function ExecuteAction(HostName)

 'Put your code here and use the variable hostname
 WScript.Echo "Hostname: " & HostName

End Function

'Parsing code below

Dim iS1,iS2,iS3,iS4
Dim iE1,iE2,iE3,iE4
Dim iC1,iC2,iC3,iC4

'Convert our starting ip to octets

IPList = Split(StartIP, ".")

iS1 = cint(IPList(0))
iS2 = cint(IPList(1))
iS3 = cint(IPList(2))
iS4 = cint(IPList(3))

'Convert our endingip to octets

IPList = Split(EndIP, ".")

iE1 = cint(IPList(0))
iE2 = cint(IPList(1))
iE3 = cint(IPList(2))
iE4 = cint(IPList(3))

'Loop through our list of IP addresses

for iC1=iS1 to 255
 for iC2=iS2 to 255
  for iC3=iS3 to 255
   for iC4=iS4 to 255
    ExecuteAction(iC1 & "." & iC2 & "." & iC3 & "." & iC4)
    if ((iC1>=iE1) and (iC2>=iE2) and (iC3>=iE3) and (iC4>=iE4)) then
     iC1=255
     iC2=255
     iC3=255
     iC4=255
    end if
   next
   iS4=1
  next
  iS3=1
 next
 iS2=1
next 
```

# git - 在子模块中使用子模块

> ID：13232844
> 
> 赞同：4
> 
> 时间：2012-11-05T13:10:19.630
> 
> 标签：git, github, nested, git-submodules, git-clone

我在管理 Github 上的一些存储库时遇到了一些麻烦。我实际上是在维护一个寻路库。主仓库在这里：[Jumper](https://github.com/Yonaba/Jumper) 。这个仓库连接到另外 2 个，作为子模块（[30log](https://github.com/Yonaba/30log)和[Binary-Heaps](https://github.com/Yonaba/Binary-Heaps)）。

当我尝试克隆主存储库（跳线）时，使用*--recursive*作为选项，**它工作正常。**

但是，当我想将此主存储库作为子模块包含在另一个中时，我们称之为**SuperMaster repo**，然后我尝试*克隆 SuperMaster repo*，仍然使用*--recursive*，它成功克隆 repo *Jumper*，但无法注册它的子模块（*30log*和*Binary-Heaps*），说的是：

```
Failed to recurse into submodule path 
fatal: not a git repository: ../../../../c:/Users/... etc 
```

我挖了一点，我发现有些人遇到了类似的事情（[这里](https://stackoverflow.com/questions/10327628/why-does-recursive-submodule-update-from-github-fail-for-doctrinemongoormmodule)和[这里](http://git.661346.n2.nabble.com/git-submodule-path-computation-bug-with-recursive-submodules-td7562568.html)），但提出的解决方案似乎都不适用于我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:59:52.740

你不应该`cd`进入`lib/Jumper`. `git submodule update --init --recursive`从顶级 repo 的根目录调用。子模块命令只能从 repo 目录的根目录执行。此外，如果您使用本地 url，则子模块的相对路径会出现问题。您收到的错误可能意味着您使用的是本地文件路径而不是 url。但很可能是您没有从 repo 的根级别调用子模块命令。

# c++ - 无效的协变返回类型

> ID：13232853
> 
> 赞同：3
> 
> 时间：2012-11-05T13:10:49.797
> 
> 标签：c++, class, inheritance

这是一些得到我遇到的错误的代表性代码：

```
class Data
{
};

class Table
{
  virtual std::vector<Data*> getData() = 0;
  virtual void putData(Data* dataItem) = 0;
  virtual Data* getData(int index) = 0;
};

class DerivedData : Data
{
};

class DerivedTable : Table
{
  std::vector<DerivedData*> getData() { return myData; } // invalid covariant return type
  void putData(DerivedData *dataItem) { myData.push_back(dataItem); }
  virtual DerivedData* getData(int index) { return myData[index]; } // invalid covariant return type

  std::vector<DerivedData*> myData;
}; 
```

首先，我不太明白为什么 putData 的覆盖对更改的参数感到满意，但是我无法更改 getData 的返回类型，尽管我很欣赏这是我可以从更多了解的东西阅读。

其次，也是我的主要问题，如何更改此代码以使其正常工作。我的基本目标是允许多个“表”之类的对象来存储和控制数据对象。虽然每个数据对象都有一些共同点，但表格将控制和使用一些明显的差异。例如，一个表可能具有带有名称参数的数据对象，因此该表将提供一个函数，该函数打印出它所拥有的所有数据名称的列表。通过这种方式，我可以拥有适用于所有这些表对象的通用代码，以及只适用于一种类型的表的专用代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:15:21.650

很多事情都是错的：

1.  的两个版本`putData`只是不同的、不相关的重载。在 C++ 中，没有用于覆盖虚函数的“逆变参数类型”（即使有，它也会反过来！！）。将关键字添加`override`到派生函数以使您的编译器产生错误。

2.  类模板不像你想象的那样工作。如果`template <typename T> class Foo`是类模板，那么`Foo<X>`和`Foo<Y>`是*完全不同的、*不相关的类，无论`X`和`Y`是否以任何方式相关。

* * *

正如@Beta 所说，您可能只有一个简单`std::vector<std::unique_ptr<Data>>`的主要数据结构。但无论如何，如果你真的必须有一些层次结构，这里有一个可能的“解决方案”：

```
#include <memory>
#include <vector>

struct Data { virtual ~Data() { } };

struct Table
{
    virtual ~Table() { }

    typedef std::unique_ptr<Data> data_ptr;
    typedef std::vector<data_ptr> dataset_type;

    virtual dataset_type & getData() = 0;
    virtual void putData(data_ptr dp) = 0;
    virtual Data & getData(std::size_t n) = 0;
};

class DerivedTable : public Table
{
    dataset_type myData;

public:

    virtual void putData(data_ptr p) override
    {
        myData.push_back(std::move(p));
    }

    Data & getData(std::size_t n) override
    {
        return *myData[n];
    }

    // ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T20:09:29.953

“无效的协变返回类型”实际上是由于您尝试更改`getData()`. 尽管返回类型不是函数标识符的一部分，但它仍然受到一些限制。任何覆盖某些基类的方法都应该表现相似。即虚拟方法实现将尝试向上转换以返回从(not )角度`Data`调用的客户端的有效指针。这可以与from context of进行比较。`getData()``Table*``DerviedTable*``(Data*)myData[index]``DerviedTable::getData(int)`

这正是编译器感到困惑的地方。

```
class DerivedData : Data
{
}; 
```

这个声明说**私有**`DervidedData`继承。即任何客户都不“知道”它实际上是一个. 这也使得无法生成代码，因为无法从.`Data` **`DerviedData``Data``DerviedData* getData() override``Data``DeviedTable::getData(int)`**

 **要消除该错误，您可以将继承公开：

```
class DerivedData : public Data
{
}; 
```

或者交个朋友

```
class DerivedData : Data
{
    friend class DerivedTable;
}; 
```

虽然这个设计仍然是一个问题。**

# xcode - xcode 4.5 phonegap clang：错误

> ID：13232857
> 
> 赞同：0
> 
> 时间：2012-11-05T13:11:17.317
> 
> 标签：xcode, cordova

![在此处输入图像描述](../Images/6bffadf20a6e39a9d35f9515b99c9b45.png)我正在尝试在 iPhone 的 phonegap 中开发一个应用程序，当部署到真实手机时，我不断收到此错误：

ld：找不到 -lCordova clang 的库：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:41:58.150

在 Xcode 项目构建设置中，选择*Summary*标签并将库添加`libCordova.a`到目标。如果它不在预定义列表中，您可能必须使用“添加其他”。

# actionscript-3 - AS3 | Adobe AIR 3.4 Android：即使在恒定的 60fps 下水平移动也很慢

> ID：13232862
> 
> 赞同：0
> 
> 时间：2012-11-05T13:11:40.640
> 
> 标签：actionscript-3, air, adobe

好的，我这几天一直在做一个简单的游戏。但是即使游戏以 60fps 运行，物体移动仍然滞后。

我做了一个新项目，有一个对象，一个位图而不是矢量对象，但如果没有滞后/迟缓的行为，它仍然无法移动。

为什么在我的 LG Optimus 2X 上，如果没有“滞后/迟缓”行为，单个对象无法移动（this.x -= 10）有什么原因吗？它在三星 Galaxy S2 上运行良好。

编辑：测试：LG Optimus 2x，缓慢。索尼 Xperia，呆滞。三星 Galaxy S2，完美。HTC Desire Z，完美。

没有意义？HTC Desire Z 远不及 LG 2X！

# jquery - 在 div 中拖动一个 div

> ID：13232864
> 
> 赞同：2
> 
> 时间：2012-11-05T13:11:48.627
> 
> 标签：jquery, drag

我正在使用“easyui”jquery 来拖动 div，但问题是 div 在整个体内拖动而不是在父 div 中。

代码：

```
$('#dd2').draggable();
$('#dd3').draggable();
$('#dd4').draggable(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:15:05.787

使用 jQuery 用户界面：

```
$( "#draggable").draggable({ containment: "parent" }); 
```

如果你的*easyui*只是jQuery ui，就是这个样子，你没问题

[jQuery UI 文档](http://jqueryui.com/draggable/#constrain-movement)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T07:32:15.327

嗨朋友我得到了解决方案，在你的脚本中添加一些代码

```
 <script>
function constrain(e){
    var d = e.data;
    if (d.left < 0){d.left = 0}
    if (d.top < 0){d.top = 0}
    if (d.left + $(d.target).outerWidth() > $(d.parent).width()){
        d.left = $(d.parent).width() - $(d.target).outerWidth();
    }
    if (d.top + $(d.target).outerHeight() > $(d.parent).height()){
        d.top = $(d.parent).height() - $(d.target).outerHeight();
    }
}
</script>
<div style="position:relative;overflow:hidden;border:1px solid #ccc;width:400px;height:400px">
<div class="easyui-draggable" style="width:100px;height:100px;border:1px solid #ccc" data-options="
            onDrag: function(e){
                constrain(e);
            },
            onStopDrag: function(e){
                constrain(e);
                $(this).css(e.data);
            }
        ">
</div>
</div> 
```

参考：[http ://www.jeasyui.com/forum/index.php?topic=820.0;prev_next=prev#new](http://www.jeasyui.com/forum/index.php?topic=820.0;prev_next=prev#new)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:27:22.333

用 EasyUI....

您必须将父 div 设置为可放置...

请查看此文档... [http://www.jeasyui.com/documentation/index.php#](http://www.jeasyui.com/documentation/index.php#)

这是教程.. [http://www.jeasyui.com/tutorial/dd/dnd2.php](http://www.jeasyui.com/tutorial/dd/dnd2.php)

例如：

```
$('#yourparentDivsID').droppable({   //used ID in my case... you can use class ... or parent's selector
   onDragEnter:function(e,source){   //do your stuff here
      $(source).draggable('options').cursor='auto';  
   },  
   onDragLeave:function(e,source){  //do your stuff here
      $(source).draggable('options').cursor='not-allowed';  
   }, 
}) 
```

# html - 水平显示菜单垂直下拉？

> ID：13232866
> 
> 赞同：1
> 
> 时间：2012-11-05T13:11:58.483
> 
> 标签：html, css, drop-down-menu

我正在尝试构建一个下拉菜单，到目前为止，我发现了一个非常不错的菜单，但它水平列出了它的项目并水平显示了它的子项目。

我希望我的项目彼此相邻，然后如果它有一个子菜单，这些项目就会下拉。

这是我的菜单：

```
<link rel="stylesheet" type="text/css" href="../../Content/Menu.css" />
  <div class="float-right">
    <nav>
      <ul class="menu" style="float: left;">
        <li class="item1"><a href="#" class="">Home</a>
          <ul style="display: block; ">
            <li class="subitem1" >@Html.ActionLink("Home", "Index", "Home", new { @class = "active" })</li>
            <li class="subitem2">@Html.ActionLink("Contact", "Contact", "Home")</li>
            <li class="subitem3">@Html.ActionLink("About", "About", "Home")</li>
          </ul>
        </li>
        <li class="item2">@Html.ActionLink("Login", "Login", "Home")</li>
      </ul>
   </nav>
  </div> 
```

* * *

样式表

```
body {
    font-size: 100%;
    background:#32373d;
}
a {
    text-decoration: none;
}
ul, ul ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
#wrapper {  
    width: 220px;
    margin: 100px auto;
    font-size: 0.8125em;
}
.menu {
    width: 225px;
    height: auto;
    -webkit-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
    -moz-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
    box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
}
.menu > li > a {
    background-color: #616975;
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(114, 122, 134)),to(rgb(80, 88, 100)));
    background-image: -webkit-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -moz-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -o-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -ms-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#727a86', EndColorStr='#505864');
    border-bottom: 1px solid #33373d;
    -webkit-box-shadow: inset 0px 1px 0px 0px #878e98;
    -moz-box-shadow: inset 0px 1px 0px 0px #878e98;
    box-shadow: inset 0px 1px 0px 0px #878e98;
    width: 100%;
    height: 2.75em;
    line-height: 2.75em;
    text-indent: 2.75em;
    display: block;
    position: relative;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 600;
    color: #fff;
    text-shadow: 0px 1px 0px rgba(0,0,0,.5);
}
.menu ul li a {
    background: #fff;
    border-bottom: 1px solid #efeff0;
    width: 100%;
    height: 2.75em;
    line-height: 2.75em;
    text-indent: 2.75em;
    display: block;
    position: relative;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 0.923em;
    font-weight: 400;
    color: #878d95;
}
.menu ul li:last-child a {
    border-bottom: 1px solid #33373d;
}
.menu > li > a:hover, .menu > li > a.active {
    background-color: #35afe3;
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(69, 199, 235)),to(rgb(38, 152, 219)));
    background-image: -webkit-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -moz-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -o-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -ms-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#45c7eb', EndColorStr='#2698db');
    border-bottom: 1px solid #103c56;
    -webkit-box-shadow: inset 0px 1px 0px 0px #6ad2ef;
    -moz-box-shadow: inset 0px 1px 0px 0px #6ad2ef;
    box-shadow: inset 0px 1px 0px 0px #6ad2ef;
}
.menu > li > a.active {
    border-bottom: 1px solid #1a638f;
}
.menu > li > a:before {
    content: '';
    background-image: url(../images/sprite.png);
    background-repeat: no-repeat;
    font-size: 36px;
    height: 1em;
    width: 1em;
    position: absolute;
    left: 0;
    top: 50%;
    margin: -.5em 0 0 0;
}
.item1 > a:before {
    background-position: 0 0;
}
.item2 > a:before {
    background-position: -38px 0;
}
.item3 > a:before {
    background-position: 0 -38px;
}
.item4 > a:before {
    background-position: -38px -38px;
}
.item5 > a:before {
    background-position: -76px 0;
}
.menu > li > a span {
    font-size: 0.857em; 
    display: inline-block;
    position: absolute;
    right: 1em;
    top: 50%; 
    background: #48515c;
    line-height: 1em;
    height: 1em;
    padding: .4em .6em;
    margin: -.8em 0 0 0; 
    color: #fff;
    text-indent: 0;
    text-align: center;
    -webkit-border-radius: .769em;
    -moz-border-radius: .769em;
    border-radius: .769em;
    -webkit-box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    -moz-box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    text-shadow: 0px 1px 0px rgba(0,0,0,.5);
    font-weight: 500;
}
.menu > li > a:hover span, .menu > li a.active span {
    background: #2173a1;
}
.menu > li > ul li a:before{
    content: '▶';
    font-size: 8px;
    color: #bcbcbf;
    position: absolute;
    width: 1em;
    height: 1em;
    top: 0;
    left: -2.7em;
}

.menu > li > ul li:hover a,
.menu > li > ul li:hover a span,
.menu > li > ul li:hover a:before {
    color: #32373D;
}

.menu ul > li > a span {
    font-size: 0.857em; 
    display: inline-block;
    position: absolute;
    right: 1em;
    top: 50%; /
    background: #fff;
    border: 1px solid #d0d0d3;
    line-height: 1em;
    height: 1em;
    padding: .4em .7em;
    margin: -.9em 0 0 0; 
    color: #878d95;
    text-indent: 0;
    text-align: center;
    -webkit-border-radius: .769em;
    -moz-border-radius: 769em;
    border-radius: 769em;
    text-shadow: 0px 0px 0px rgba(255,255,255,.01));
} 
```

我的样式表中的什么属性导致我的菜单像这样列出？

有没有办法覆盖所有导致您执行此操作的菜单？

* * *

编辑

html列表：

```
<div class="float-right">
  <nav>
    <ul class="menu" style="float: left;">
      <li class="item1"><a href="#" class="">Home</a>
        <ul style="display: block; ">
          <li class="subitem1" ><a class="active" href="/?Length=4">Home</a></li>
          <li class="subitem2"><a href="/Home/Contact">Contact</a></li>
          <li class="subitem3"><a href="/Home/About">About</a></li>
        </ul>
      </li>
      <li class="item2"><a href="/Home/Login">Login</a></li>
    </ul>
  </nav>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:33:11.653

```
.menu {
  width: 225px;
} 
```

*width:225px 会*阻止菜单正确显示。

[http://jsfiddle.net/wFyMs/2/](http://jsfiddle.net/wFyMs/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:19:42.273

为什么你可以让它更简单？

尝试用这种模式重写它：

**CSS**

```
li { float: left; }
li ul li { clear: both; } 
```

# sharepoint-2010 - 在 SSRS/Sharepoint 列表上的动态报告中使用重复出现的问题

> ID：13232867
> 
> 赞同：0
> 
> 时间：2012-11-05T13:12:13.413
> 
> 标签：sharepoint-2010, sql-server-2008-r2, ssrs-2008, recurrence

我正在将[Reporting Service 与 SharePoint 列表一起使用](http://sharepointtaskmaster.blogspot.in/2011/08/make-report-by-reporting-service-with.html)

我正在查询一个`calendar`列表，我在获取重复项目时遇到问题。当我尝试使用扩展重复时，出现以下问题 ![在此处输入图像描述](../Images/99434e798c1e72991a554e52868bbc08.png)

我的重复查询是：

```
<RSSharePointList xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ListName>SomeList</ListName>
 <Query>
 <Where>
  <DateRangesOverlap>
  <FieldRef Name='EventDate' />
  <FieldRef Name='EndDate' />
  <FieldRef Name='RecurrenceID' />
  <Value Type='DateTime'><Today/></Value>
  </DateRangesOverlap>
 </Where>
 </Query>
<QueryOptions>
 <ExpandRecurrence>TRUE</ExpandRecurrence>
 <CalendarDate><Today/></CalendarDate>
 <ViewAttributes Scope='RecursiveAll' />
 </QueryOptions>
  <ViewFields>
    <FieldRef Name="EventDate" />
    <FieldRef Name="EndDate" />
    <FieldRef Name="fRecurrence" />
    <FieldRef Name="Hosted_x0020_By" />
    <FieldRef Name="External_x0020_Attendees" />
    <FieldRef Name="Catering_x0020_Requirements" />
    <FieldRef Name="Company" />
    <FieldRef Name="Recurrence_x0020_ID" />
    <FieldRef Name="Room" />
    <FieldRef Name="RecurrenceData" />
  </ViewFields>
</RSSharePointList> 
```

合适吗？有没有其他方法可以使用 Reporting Service 处理重复事件？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:49:11.187

通过创建 XML 类型的新**参数**来形成每个 XML 标记。

# node.js - Node.JS 和 Socket.io - 广播返回给发送者

> ID：13232870
> 
> 赞同：0
> 
> 时间：2012-11-05T13:12:24.590
> 
> 标签：node.js, socket.io, broadcast

我正在构建一个具有多个客户端和一个 node.js 服务器的实时 Web 应用程序来处理来自客户端的状态和广播事件更改。我已经将 Socket.io 实现为客户端和服务器之间的传输机制。当客户端执行特定操作时，将向服务器发送一个事件，该事件被广播到网络上的其他客户端。

但是，*有时*当服务器接收到一系列事件时，服务器不会广播它，而是将其发送回发送客户端 - 或将其发送到所有连接的套接字，包括发送客户端。

这是服务器实现的一个片段，它基本上监听客户端事件，将它们收集在一个数组中，每 2 秒广播一次。

如果您愿意，我可以包含来自客户端实现的相关片段。

```
// Require HTTP module (to start server) and Socket.IO
var http = require('http'), io = require('socket.io'), users = require('./users');

// Commands to client
var USER_LOGIN = 0,
    USER_LIST = 1,
    USER_CONNECTED = 2,
    USER_DISCONNECTED = 3,
    COMMAND = 4,
    COMMAND_SETNICKNAME = 0,
    COMMAND_POSITION = 1,
    COMMAND_MOUSEDOWN = 2,

var array = [];
var activeUsers = {};

// Start the server at port 8080
var server = http.createServer(function(req, res){ 
    res.writeHead(200,{ 'Content-Type': 'text/html' }); 
});
server.listen(8080);

// Create a Socket.IO instance, passing it our server
var io = io.listen(server);

// Add a connect listener
io.sockets.on('connection', function(client){ 
    console.log("started");

    // Create periodical which ends a JSON message to the client every 2 seconds
    var interval = setInterval(function() {
        if(array.length >0) {
            console.log("Sending to clients " + array);
        //client.send(JSON.stringify(array));
        client.broadcast.send(JSON.stringify(array));
        array = [];
    }
},2000);

// Success!  Now listen to messages to be received
client.on('message',function(event){ 
        console.log("--Reading event " + event);
        var eventArray = JSON.parse(event);
    for(var i = 0; i < eventArray.length; i++) {
        var dataArray = eventArray[i];
        var userId = parseInt(dataArray[0]);
        var position = 1;

        console.log("current element in array " + dataArray);

        switch (parseInt(dataArray[position++])) {
            case USER_LOGIN: 
                // Log in user with USERID. 
                var username = dataArray[position++];
                console.log("Attempting to log in with user " + username);

                // If valid, send USER_LOGIN broadcast to clients
                if(login(username)) {
                    array.push([0, USER_LOGIN, login(username)]);
                }
                break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:19:15.633

```
io.sockets.on('connection', function(client){ 
    console.log("started");

    // Create periodical which ends a JSON message to the client every 2 seconds
    var interval = setInterval(function() {
        if(array.length >0) {
            console.log("Sending to clients " + array);
        //client.send(JSON.stringify(array));
        client.broadcast.send(JSON.stringify(array));
        array = [];
    }
},2000); 
```

您正在为每个连接创建一个调度程序，这将是一团糟。因为您正在内部创建间隔`on('connection',`
而且我看不到在间隔中调用客户端的任何意义，因为您有一种方法可以在某些客户端更改事件上推送更改。这就是 socket.io 的优势。您可以像这样从客户端更改事件中广播另一个侦听器中的更改，而不是使用间隔。

```
client.on('onSomechangeInClient',function(event){ 
  //update array here..
 client.broadcast.send(JSON.stringify(array));
}); 
```

# java - 从数据库设计决策导出 XML、JSON

> ID：13232874
> 
> 赞同：1
> 
> 时间：2012-11-05T13:12:33.030
> 
> 标签：java, xml, database, yaml

我需要在两个不同的系统之间移动数学联盟数据，这两个系统都是用 Java 编写的。数据来自一个由 MySQL 数据库支持的 Java Web 应用程序，其中我有学校和学生表，两者都有唯一的 ID 号。数据需要导出为一种格式，我可以使用桌面客户​​端离线阅读，该客户端用于记录二月份锦标赛当天的得分。

客户端现在将数据存储为 CSV 文件，该文件的优点是允许人们将整个“数据库”加载到 Excel 中，以查看每个团队中每个学生的分数。去年这种格式有问题，因为不知何故数据损坏了（数据输入有一些冗余，因为有些人在记分卡上填写了错误的团队编号，然后我的数据输入团队将错误的数据输入系统）

我想更新客户端以更结构化的方式存储数据，并将 CSV 文件保留为仅导出功能。我会选择 XML 序列化，因为我最熟悉它。但我很好奇 JSON 或 YAML 的优点。同时，我需要向 Web 应用程序添加一些导出功能，让我可以将一些数据移动到桌面客户端可以读取的格式。Web 应用程序的用户（数学队教练）将选择哪些学生将参加比赛，然后我将下载一些我的客户可以阅读的文件。数据结构将是：

```
team id
school name
student1
student2
student3
student4
student5 
```

每个学生对象由一个 ID 号、姓名和一些分数字段组成。

直接 XML 在这里最有意义还是其他更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:07:54.620

帕特里夏是对的（你应该接受她的回答）。XML 是您尝试执行的最佳格式。

人们选择他人：

*   JSON - 由于客户端中的 Javascript 和带宽/延迟速度，因此适用于 Web 应用程序。
*   YAML - 用于人类可读的配置。

现在，大多数情况下在 Java 中生成 XML 的最佳方式是 JAXB。

或者，您还应该查看[jOOQ，因为它允许您查询结果集并将其转换为 XML 和/或各种其他格式](http://www.jooq.org/doc/2.6/manual-single-page/#exporting)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:05:48.097

我看到的对 XML 的主要反对意见是它可能**非常**冗长。在可验证结构很重要的环境中，您似乎正在处理相对少量的数据。我想我会为此使用 XML。

# java - 在 Java 中用数据库中的更正替换部分字符串

> ID：13232876
> 
> 赞同：2
> 
> 时间：2012-11-05T13:12:54.383
> 
> 标签：java, ocr

我正在用 Java 编写一个 OCR 程序（使用 Tesseract 从标签生成文本），我希望它能够识别输出中的常见错误，例如存储在数据库中的 VV 而不是 W 和 NIR 而不是 MR。因此，例如，如果它得到一个像“VVEIN，MIR Adam”这样的字符串，它应该更改为“WEIN，MR Adam”。

检查字符串是否与任何常见错误文本匹配的最有效方法是什么？目前我能想到的唯一方法是将字符串传递给每个已知错误的一系列正则表达式，但我希望有一种更有效的方法。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:18:10.220

每次替换子字符串时，将传递`String`给多个正则表达式都会创建一个新表达式，因为 Java 中的字符串是不可变的。`String`改为使用`StringBuilder`。

# mysql - MAX(col)+1 INSERT 到同一个 MySQL 表的问题

> ID：13232880
> 
> 赞同：2
> 
> 时间：2012-11-05T13:13:01.530
> 
> 标签：mysql

我需要同一个表中的两个 id 列在插入时创建唯一值。由于 MySQL 只允许一列自动递增，因此我需要对另一列执行 max(id)+1 之类的操作。

这是我希望工作的 SQL：

```
INSERT INTO invoices (invoiceid)
VALUES ((SELECT MAX(invoiceid)+1 FROM invoices)) 
```

select 语句独立工作，但在我的 INSERT 中，它是不允许的。我收到错误：您无法在 FROM 子句中指定目标表“发票”进行更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:14:49.390

您想使用`INSERT INTO .... SELECT FROM`而不是`INSERT INTO...VALUES()`：

```
INSERT INTO invoices (invoiceid)
SELECT MAX(invoiceid)+1 
FROM invoices 
```

我对您的问题是为什么您不使用`AUTO INCREMENT`字段来生成`invoiceid`值？这就是它的用途，那么您在插入数据时不必创建它。

# frama-c - 切片程序中未声明的变量

> ID：13232884
> 
> 赞同：0
> 
> 时间：2012-11-05T13:13:13.917
> 
> 标签：frama-c

在使用 Frama-C 版 Oxygen 的程序切片器时，我遇到的问题是生成的切片使用了未声明的变量。我之前搜索过该主题的现有帖子，发现： [http ://bts.frama-c.com/print_bug_page.php?bug_id=806](http://bts.frama-c.com/print_bug_page.php?bug_id=806)

那里提到该错误已在 Frama-C 的 Nitrogen 版本中修复。也许这种变化并没有转移到氧气上？就像在现有帖子的描述中一样，它只发生在只有一个语句的块中。我无法附上示例源代码，因为它来自客户项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:19:50.453

我已经检查了您使用 Frama-C Oxygen 提到的错误报告中描述的确切步骤（以及用于 Csmith 运行时库的 csmith 2.0.0），并且一切正常：您很可能遇到了另一个问题，但没有代码，不能多说。

# android - 为 monodroid 中的 ListView 项目设置动态自定义样式？

> ID：13232887
> 
> 赞同：0
> 
> 时间：2012-11-05T13:13:20.030
> 
> 标签：android, android-listview, rss

我有一个用于 RSS 的 ListView，它是动态填充的。我想为项目设置样式。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:39:16.530

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.8"
        android:gravity="right"
        android:paddingRight="5dp"
        android:text="@string/app_name" />

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bullet"
        android:contentDescription="@string/app_name" />

</LinearLayout> 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mCustomList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="#666666"
        android:dividerHeight="0.05dp"
        android:scrollingCache="false" />

</LinearLayout> 
```

CstListAdapter.java

```
public class CstListAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<CstItem> postList = new ArrayList<CstItem>();
    private static LayoutInflater inflater = null;
    private Context ctx;

    public CstListAdapter(Activity act, ArrayList<CstItem> d, Context ctx) {
            activity = act;
        postList = d;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        this.ctx = ctx;
    }
    @Override
    public int getCount() {
        return postList.size() < count ? postList.size() : count;
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder {
        public TextView text;
        public ImageView img;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        View row = convertView;

        if (row == null) {
            row = inflater.inflate(R.layout.row, null);
            holder = new ViewHolder();
            holder.text= (TextViewPlus) row.findViewById(R.id.text);
            holder.img= (TextViewPlus) row.findViewById(R.id.img);
            row.setTag(holder);
        } else
            holder = (ViewHolder) row.getTag();
        CstItem item = postList.get(position);
        holder.text.setText(item.getTitle());

        return row;
    } 
```

CstItem.java

```
public class CstItem {

    private String title;
    private String thumbnail;
    private String url;
    private String description;
    private String pubDate;

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getThumbnail() {
        return thumbnail;
    }

    public void setThumbnail(String thumbnail) {
        this.thumbnail = thumbnail;
    }
...

} 
```

主.java

```
public class Main extends Activity {

    private ListView mListView;
    private CstListAdapter cstListAdaptor;
    private ArrayList<CstItem> PostList = new ArrayList<CstItem>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        mListView = (ListView) findViewById(R.id.mCustomList);

        cstListAdaptor = new CstListAdapter(this, PostList, this);

        mListView.setAdapter(cstListAdaptor);
        PostList.clear();

        refreshRss();

        mListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                CstItem cit = PostList.get(position);
                String cnt = cit.getDescription();
                //...

            }
        });
    }
...

} 
```

# java - JVM 的历史趋势

> ID：13232888
> 
> 赞同：0
> 
> 时间：2012-11-05T13:13:21.880
> 
> 标签：java, jvm, monitoring, jmx

是否有现成的开源工具可以监控服务器上的远程 JVM 进程。

理想情况下，它将通过 JMX 读取遥测数据并存储到具有漂亮 GUI 的历史数据库中以呈现信息

我想要的关键信息是内存、`gc`时间、线程、类等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:14:43.070

JDK 提供了两个图形工具来监控性能 -

*   jVisualVM 和
*   j控制台

它们都位于 JDK 的 bin 目录中。

不幸的是，它们都不允许以编程方式定期保存快照，也不提供可用于脚本的命令行版本。

一个好的开源解决方案是[jmxmonitor](http://jmxmonitor.sourceforge.net/)

*JMX Monitor Project 提供了一个守护程序（或命令行）工具来监视一系列 JMX 服务。*

*这些输出到滚动日志文件以供外部工具（例如 Nagios 或 Cacti）进行处理。*

另一种选择是[Zabbix](http://www.zabbix.com/documentation/2.0/manual/config/items/itemtypes/jmx_monitoring)：

*Zabbix 是监控网络的众多参数以及服务器的健康和完整性的软件。Zabbix 使用灵活的通知机制，允许用户为几乎任何事件配置基于电子邮件的警报。这允许对服务器问题做出快速反应。Zabbix 基于存储的数据提供出色的报告和数据可视化功能。这使得 Zabbix 成为容量规划的理想选择。*

但是，如果您对直接将“基本数据记录”到数据库感兴趣，可能自己编写是最好的解决方案 - 特别是如果您想监控多个虚拟机 - 而且这并不是非常困难，请参阅：[通过平台服务器](http://www.ibm.com/developerworks/java/library/j-mxbeans/#8)和[使用 JMX 进行监控和管理](http://docs.oracle.com/javase/1.5.0/docs/guide/management/agent.html)

例子：

```
final JMXServiceURL address = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://" + SERVER_JMXPORT + "/jmxrmi");
final String[] credentials = new String[] { ADMIN, PASSWORD };
final Map<String, String[]> props = new HashMap<String, String[]>();
props.put("jmx.remote.credentials", credentials);

final JMXConnector connector = JMXConnectorFactory.connect(address, props);
final MBeanServerConnection mbs = connector.getMBeanServerConnection();

//Show the name and the state of all the threads
final ThreadMXBean threadBean = ManagementFactory.newPlatformMXBeanProxy(mbs, ManagementFactory.THREAD_MXBEAN_NAME, ThreadMXBean.class);
final long[] threadIDs = threadBean.getAllThreadIds();
final ThreadInfo[] threadDataset = threadBean.getThreadInfo(threadIDs);
for (final ThreadInfo threadData : threadDataset) {
    if (threadData != null) {
        System.out.println(threadData.getThreadName() + " " + threadData.getThreadState());
    }
}
System.out.println();
System.out.println("Current: " + threadBean.getThreadCount() + " peak " + threadBean.getPeakThreadCount()); 
```

一旦您将数据存储在数据库中，就有很多工具可以以图形格式表示该数据以进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:17:54.550

Java VisualVM 是一个提供可视化界面的工具，用于查看在 Java 虚拟机 (JVM) 上运行的 Java 应用程序的详细信息，以及对这些应用程序进行故障排除和分析。

查看以下链接。

1.  [Java VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)
2.  [jvisualvm - Java 虚拟机监控、故障排除和分析工具](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)

# unix - 当同时涉及两个命令时，如何将输出重定向到两个不同的文件？

> ID：13232889
> 
> 赞同：2
> 
> 时间：2012-11-05T13:13:23.790
> 
> 标签：unix, perf

我正在使用`perf`工具来分析排序实用程序。我给出了以下命令。

```
perf stat -x, ../bin/sort data >/dev/null 2>perf_data 
```

我想将排序的输出重定向到`/dev/null`perf 的输出到 perf_data 文件。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:59:56.607

其实你可以把它放在括号里。以下命令对我有用。

```
(perf stat -x, ../bin/sort data >/dev/null) 2>perfoutput.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:45:27.500

“perf”命令有一个选项，可以直接使用 -o 选项将输出重定向到文件。在你的情况下，这将是

```
perf stat -o perfoutput.dat -x, ../bin/sort data >/dev/null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:18:05.223

根据`perf`程序运行的方式，简单地引用参数可能就足够了：

```
perf stat -x, '../bin/sort data >/dev/null' 2>perf_data 
```

# gwt - 处理窗口关闭事件

> ID：13232903
> 
> 赞同：0
> 
> 时间：2012-11-05T13:14:28.330
> 
> 标签：gwt, gxt

当单击a 的关闭按钮时，我正在尝试处理该事件`Window`：

```
// View Code
@Override
public void attachWindowListener(WindowListener listener) {
    window.addWindowListener(listener);
}

// Presenter code
    view.attachWindowListener(new WindowListener(){
          public void windowHide(WindowEvent we) {
              GWT.log("Window Event - Processing fields");
              processFields();
          }         
    }); 
```

但是，windowHide 函数似乎没有执行，因为我看不到我放在那里的日志。

如何正确处理该事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:20:56.513

怎么样

```
Window.addCloseHandler( 
    new CloseHandler<Window>() 
    {
        public void onClose( CloseEvent<Window> windowCloseEvent ) 
        {
            // Do your worst here
        }
    } ); 
```

我通常把这个放在`onModuleLoad()`我的`EntryPoint`课堂上。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:30:49.150

这有效：

```
 window.addListener(Events.Hide, new Listener<ComponentEvent>() {
        @Override
        public void handleEvent(ComponentEvent be) {
          // Do stuff
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:54:32.863

根据提供的信息，我猜 a.) 您认为正在触发的事件不会为 Window 组件触发（即使它们看起来应该触发）或 b.) 事件正在触发但顺序与您不同预计。

例如，当窗口关闭并且 Window 对象从不触发时，可能`BrowserEvent`首先触发某个或其他事件。`WindowEvent`根据 GXT 2.x 的 API 文档，WindowEvent 将在隐藏和停用时触发，但它没有指定它在关闭时触发。GXT 3.0.x API 文档在这一点上不太清楚，但我会假设相同的行为。不幸的是，Sencha 没有提供关于给定组件触发什么事件以及按什么顺序触发的良好文档。

话虽如此，我有一些运气通过使用调试类来解决与此类似的问题，该类输出它所附加的组件上的所有事件。这可能会揭示哪些事件正在触发及其执行顺序，并且您可能会找到可以将`processFields()`方法附加到的最佳事件。

有关调试器类的一个很好的示例，请参阅相关帖子中的此答案：[https](https://stackoverflow.com/a/2891746/460638) ://stackoverflow.com/a/2891746/460638 。它还包括一个如何将调试器附加到组件的示例。

**Window 的 API 文档，GXT 2.x：** [http ://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/Window.html](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/Window.html)

**Window 的 API 文档，GXT 3.0.x：** [http ://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/Window.html](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/widget/core/client/Window.html)

# javascript - 如何根据集合属性设置 Backbone 模型的默认值

> ID：13232904
> 
> 赞同：2
> 
> 时间：2012-11-05T13:14:31.393
> 
> 标签：javascript, backbone.js

我需要所有新的 MenuItem 模型都具有来自父集合的菜单属性。这是一个不起作用的基本示例（因为 this.collection 在 MenuItem 的默认函数中未定义）

```
var MenuItem, Menu, menu;

MenuItem = Backbone.Model.extend({
  defaults: function() {
    return {
      menu: this.collection.name
    }
  },

  // Fake Backbone sync
  sync: function(method, model, options) {
    if(typeof model.cid != 'undefined') {
      var cid = model.cid;
      model.unset('cid').set({id:cid}, {silent:true});
    }
    options.success(model);
  }

});

Menu = Backbone.Collection.extend({
  model: MenuItem,
  initialize: function(options) {
    this.name = options.name;
  }
});

menu = new Menu({name: "footer"});

menu.create({title: "Page", url: "/page"}, {
  success: function(model){
    console.log(model.get("menu")) // expect to be "footer"
  }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:26:56.070

我已经设法通过覆盖集合的创建方法来修复它，我仍然不确定这是否是正确的方法。

```
create: function(attributes, options) {
  return Backbone.Collection.prototype.create.call(
    this,
    _.extend({menu: this.name}, attributes),
    options
  );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-07T22:47:47.930

对于新模型所在的每一种可能性：

*   一个裸对象，或一个模型实例，
*   通过[`.add`](http://backbonejs.org/#Collection-add), [`.push`](http://backbonejs.org/#Collection-push), [`.create`](http://backbonejs.org/#Collection-create), [`.set`](http://backbonejs.org/#Collection-set),[`.reset`](http://backbonejs.org/#Collection-reset)或[集合的构造函数](http://backbonejs.org/#Collection-constructor)添加。

我发现**挂钩*未记录*的集合功能效果很好[`_prepareModel`](https://github.com/jashkenas/backbone/blob/8ec88604732944f197b352a6be22c8216ea9d3a1/backbone.js#L1106)** *。*

 *# 通用集合

该集合可以按原样使用来替换默认的 Backbone 集合。它增加了

*   `onNewModel`一个要覆盖的新函数，它接收新*模型*实例和*选项*
*   `new-model`发送相同数据的自定义事件。

```
var Collection = Backbone.Collection.extend({
    /**
     * Hook into the native _prepareModel to offer a standard hook
     * when new models are added to the collection.
     */
    _prepareModel: function(model, options) {
        model = Collection.__super__._prepareModel.apply(this, arguments);
        if (model) {
            // call our new custom callback
            this.onNewModel(model, options);
            // trigger a new custom event
            this.trigger('new-model', model, options);
        }
        return model;
    },

    // Called when adding a new model to the collection.
    onNewModel: _.noop,
}); 
```

您自己的收藏可能是：

```
var Menu = Collection.extend({
    model: MenuItem,
    initialize: function(models, options) {
        this.name = options.name;
    }
    onNewModel: function(model, options) {
        model.set({ menu: model.get('menu') || this.name });
    },
}); 
```

保证里面`model`是一个Backbone`Model`实例`onNewModel`。

# 概念证明

```
// The generic collection, put that in a file and include it once in your project.
var Collection = Backbone.Collection.extend({
  /**
   * Hook into the native _prepareModel to offer a standard hook
   * when new models are added to the collection.
   */
  _prepareModel: function(model, options) {
    model = Collection.__super__._prepareModel.apply(this, arguments);
    if (model) {
      this.onNewModel(model, options);
      this.trigger('new-model', model, options);
    }
    return model;
  },

  // Called when adding a new model to the collection.
  onNewModel: _.noop,
});

// Extend from the generic collection to make your own.
var Menu = Collection.extend({
  initialize: function(models, options) {
    this.name = options.name;
  },
  onNewModel: function(model, options) {
    model.set({
      menu: model.get('menu') || this.name
    });

    console.log("onNewModel menu:", model.get('menu'));
  },
});

// then use it
var menu = new Menu([
  // works with bare objects
  {
    title: "Page",
    url: "/page"
  },
  // or Model instances
  new Backbone.Model({
    title: "Other Page"
  })
], {
  name: "footer" // the collection option
});

// Listen to the custom event if you want
Backbone.listenTo(menu, 'new-model', function(model, options) {
    console.log("'new-model' triggered with", model.get('title'));
});

// or other collection methods
menu.add({
  title: "Page",
  menu: "won't be overriden"
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
```*

# c++ - 找不到指针类型的运算符<

> ID：13232907
> 
> 赞同：3
> 
> 时间：2012-11-05T13:14:38.193
> 
> 标签：c++

我正在尝试使用带有重载 < 运算符的插入排序来订购指针向量（不能使用任何库）。有一个包含另一个类的类，例如：

```
class A {   
 vector<B*> v;
 void order();
}

class B {
int id;                         //each one is unique
virtual double num() {} const;
bool operator<(const B* b2) const;
}

class B1: public B {
double num() {} const;
}

class B2: public B {
double num() {} const;
} 
```

每个孩子计算 num 的方式不同，排序是使用 num 返回的 double 作为第一个条件，然后是 id。（对不起缩进）

```
void A::order() {

for (unsigned int p = 1; p < v.size(); p++)    
{
    ClassB* tmp = v[p];
    int j;
    for (j = p; j > 0 && tmp < v[j-1]; j--) // Error on this line
        v[j] = v[j-1];
    v[j] = tmp;     
}

}

bool B::operator<(const B* b2) const {

cout << "Operator <\n";

if(this->num()!=b2->num())
    return this->num()<b2->num();

return id<d2->id;

} 
```

我不明白为什么在尝试比较两个指针时没有调用运算符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:18:41.150

该运算符

```
bool operator<(const B* b2) const; 
```

允许您将`B`LHS`B*`上的 a 与 RHS 上的 a 进行比较。您正在尝试与`B*`双方进行比较，因此运算符不适用。

您不能重载指针比较运算符，因此一种解决方案可能是根据`B`(or `const B&`) 进行比较并在比较点取消引用您的指针：

```
for (j = p; j > 0 && *tmp < *v[j-1]; j--) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:19:02.020

您不能重载运算符来比较指针。即使可以，大多数时候它仍然是非法的。您只能比较指向同一数组内的内存的指针，或数组末尾之后的一个位置。除此之外的任何行为都是未定义的行为。

你`B::bool operator<(const B* b2) const;`实际上应该是`bool operator<(const B& b2) const;`。这允许您比较 2 个`B`对象，**而不是一个对象和一个指向对象的指针 - 这就是您的代码现在所做的**。

如果您必须对指针容器进行排序，您可以提供一个比较**函数**作为回调函数，该回调函数将 2 个指针作为参数，但以指针作为参数`operator<`作为成员实现是没有意义的。

# java - Java使用pdfviewer显示资源文件夹中的文件

> ID：13232911
> 
> 赞同：0
> 
> 时间：2012-11-05T13:14:45.550
> 
> 标签：java, pdf, resources, filenotfoundexception

我有 java 网络应用程序。我正在使用`ANT`构建应用程序。我在资源文件夹中有一个文件。我想使用 pdfViewer 打开该文件。pdf 查看器的框架正在启动。但我无法访问资源文件夹中的文件。这是我的代码。

```
final String fileName="Installation.pdf"; 

int pagenum = 0;
RandomAccessFile raf = new RandomAccessFile (new File(fileName), "r");
FileChannel fc = raf.getChannel ();
ByteBuffer buf = fc.map (FileChannel.MapMode.READ_ONLY, 0, fc.size ());
PDFFile pdfFile = new PDFFile (buf); 
```

![在此处输入图像描述](../Images/e827ea732773260142642cecc02b6629.png) 我得到一个`FileNotFoundException`. 主要问题是我无法在资源文件夹中找到该文件。什么请帮忙。

当我将其作为独立的 java 应用程序运行时，上述内容正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:40:28.550

尝试这个：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
URL url = classLoader.getResource("/resources/Installation.pdf");

if (url != null) {

    try {
        RandomAccessFile raf = new RandomAccessFile (new File(url), "r");

        ...

    } finally {
        input.close();
    }
} 
```

# python - 强制 argparse 将所有内容作为一个输入

> ID：13232913
> 
> 赞同：1
> 
> 时间：2012-11-05T13:14:51.343
> 
> 标签：python, argparse

有没有办法`argparse`将多个参数作为一个参数传递？也就是说，我想

```
foo bar baz 
```

`argparse`通过_

```
"bar baz" 
```

作为论据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:16:28.690

是的 using`nargs="+"`将允许您发送任意数量的参数。

不过，您将收到它们作为 python 列表。

像这样：-

```
parser.add_argument("foo", help="Give me an arbitrary number of arguments", nargs="+") 
```

# wpf - 如何使用 Entypo 图标

> ID：13232916
> 
> 赞同：0
> 
> 时间：2012-11-05T13:14:54.083
> 
> 标签：wpf

我已经`Entypo`使用`NuGet`. 我得到`Icons.xaml`了包含`Canvas`'es. 如何在`XAML`代码中使用它？

文件看起来像：

```
 <ResourceDictionary xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
        <Canvas Width="48" Height="48" Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0" x:Key="appbar_add">
            <Path Width="24" Height="24" Canvas.Left="12" Canvas.Top="12" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 22,12L 26,12L 26,22L 36,22L 36,26L 26,26L 26,36L 22,36L 22,26L 12,26L 12,22L 22,22L 22,12 Z " />
        </Canvas>
        <Canvas Width="48" Height="48" Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0" x:Key="appbar_alert">
            <Path Width="22.1402" Height="20.75" Canvas.Left="12.9299" Canvas.Top="14" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 24,14C 26,14 36,33 35,34C 34,35 14,35 13,34C 12,33 22,14 24,14 Z M 24,29C 23.1716,29 22.5,29.6716 22.5,30.5C 22.5,31.3284 23.1716,32 24,32C 24.8284,32 25.5,31.3284 25.5,30.5C 25.5,29.6716 24.8284,29 24,29 Z M 22.5,20L 23,28L 25,28L 25.5,20L 22.5,20 Z " />
        </Canvas>
        <Canvas Width="48.0067" Height="48.0067" Clip="F1 M 0,0L 48.0067,0L 48.0067,48.0067L 0,48.0067L 0,0" x:Key="appbar_alien">
            <Path Width="22.005" Height="16.0048" Canvas.Left="12.9999" Canvas.Top="16.9998" Stretch="Fill" Fill="{DynamicResource BlackBrush}" Data="F1 M 16.9999,16.9998L 19.0002,16.9998L 19.0026,19.0027L 21.0002,18.9998L 21.0029,21.0029L 27.0038,21.0029L 26.9999,18.9998L 28.9999,18.9998L 28.9999,16.9998L 31.0002,16.9998L 31.0002,19.0001L 29.0002,19.0001L 29.0041,21.0029L 31.0043,21.0029L 31.0043,23.0032L 33.0046,23.0032L 33.0046,25.0035L 31.0043,25.0035L 31.0001,31.0001L 29.0001,31.0001L 29.0001,33.0001L 25.0035,33.0046L 25.0035,31.0043L 28.9999,30.9999L 29.004,28.0039L 19.0026,28.0039L 19.0026,31.0043L 17.0024,31.0043L 16.9999,25.0001L 15.0002,25.0001L 15.0002,29.0001L 12.9999,29.0001L 12.9999,24.9998L 14.9999,24.9998L 14.9999,22.9998L 16.9999,22.9998L 17.0024,21.0029L 19.0026,21.0029L 18.9999,19.0001L 16.9999,19.0001L 16.9999,16.9998 Z M 33.0046,25.0035L 35.0049,25.0035L 35.0049,29.0041L 33.0046,29.0041L 33.0046,25.0035 Z M 19.0026,31.0043L 23.0032,31.0043L 23.0032,33.0046L 19.0026,33.0046L 19.0026,31.0043 Z M 19.0026,23.0032L 19.0026,25.0035L 21.0029,25.0035L 21.0029,23.0032L 19.0026,23.0032 Z M 27.0038,23.0032L 27.0038,25.0035L 29.004,25.0035L 29.004,23.0032L 27.0038,23.0032 Z " />
   <!-- etc -->
        </Canvas>
    </ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:01:56.100

例如使用矩形控件（示例取自[此处](http://mahapps.com/MahApps.Metro/)）：

```
<Rectangle>
    <Rectangle.Fill>
        <VisualBrush Visual="{StaticResource appbar_add}" />
    </Rectangle.Fill>
</Rectangle> 
```

# wpf - 即使我使用新线程，WPF 动画也会冻结

> ID：13232917
> 
> 赞同：4
> 
> 时间：2012-11-05T13:14:55.213
> 
> 标签：wpf, multithreading, animation, freeze

我面临一个大问题：在我的 WPF 应用程序中，MainWindow 包含一个带有加载动画（故事板）的边框。默认情况下它是折叠的。当我加载大量数据或加载新的 XAML 屏幕时，有时会使其可见并折叠。

首先，我根本没有使用线程和动画，其中既冻结又出现迟到。

然后我开始像这样使用线程：

```
Messenger.StartAnimation();
var task = Task.Factory.StartNew(() =>
                {
                    Thread.Sleep(150);
                }).ContinueWith((a) =>
                {
                    // HERE Screen moving + large amount of data loaded with Entity Framework
                    Thread.Sleep(200);

                    Messenger.StopAnimation();
                }, CancellationToken.None, TaskContinuationOptions.NotOnFaulted, threadUIContext); 
```

这一次，动画在 1 秒内工作，然后它只是冻结，直到加载所有数据和新显示的屏幕。A 就像主线程阻塞所有线程一样。

我尝试将 Timer 添加到延迟`Messenger.StopAnimation()`3 秒后。当一切都被改变并加载到我的新屏幕上时，即使这样我的动画也会冻结 1 秒钟，然后我的动画会持续 3 秒钟。

我已经尝试过`Dispatcher`，`BackgroundWorker`并且遇到了与以前的代码相同的问题。

我试图将我的动画放在一个弹出窗口上，甚至放在一个透明的新窗口上。没什么可做的，它总是在停止之前冻结 1 秒钟......

对于信息，我使用`ObservableCollection`（我尝试过使用 List，同样的问题）并且我`ContentControl`在我的`MainWindow`.

我看过 techdays 的视频，速度与激情，我真的很想得到一个像视频一样流畅的动画，但冻结似乎无法消除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:27:28.430

在一个简单的集合视图中加载 50 多个小图像时，我遇到了同样的问题。我最终发现，将位图绘制到屏幕上的 .NET Framework 是连接主线程的原因，而我完全没有办法绕过它。我尝试将所有元素放在视图中，但慢慢填充绑定到视图的集合，但是每次可观察集合发生更改时，.NET Framework 都会重新绘制视图中的所有图像，所以这也无济于事。

我询问了一位微软工程师，他直言不讳地承认这是 .NET Framework 中的一个问题，将来必须由微软来解决。我的一位同事说，您可以通过自己使用自己的算法绘制所有像素来规避这个问题。

我想如果你想解决这个问题，你将不得不改变你的数据显示方式，尽管我无法帮助你解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:27:08.993

我们和 Jack 有同样的问题，ListView 绑定到 ObservableCollection。经过大量分析，我们认为是排序和分组过程很慢，而不是数据库查询。最后我们实现了一个单独的线程，但当然必须调用调度程序进行排序和分组，这会将长时间运行的操作放回主 UI 线程 - 所以这似乎淹没了我们漂亮的“正在加载..”动画 - 出现让用户挂起和生涩 - 这根本不是我们想要的......正如 Akku 所说，除了改变数据的显示方式之外，我没有看到解决方案。

# c# - 使用 WPF 和 C# 创建状态机设计器

> ID：13232927
> 
> 赞同：1
> 
> 时间：2012-11-05T13:16:06.610
> 
> 标签：c#, wpf, state-machine

我将尝试使用 WPF 编写一个状态机设计器，它允许我创建类似[这样](http://www.lassalle.com/html5/demo/index.htm "这")的东西。

有谁知道我如何在 C# 中做这样的事情？我希望用户能够创建单独的状态，命名它们并创建到其他状态的转换（使用曲线将状态连接在一起）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-08T17:44:07.017

[使用 nodexl ( http://nodexl.codeplex.com/](http://nodexl.codeplex.com/) )可以做到这一点。通过将 nodexl 与 Stateless Designer ( [http://statelessdesigner.codeplex.com/](http://statelessdesigner.codeplex.com/) ) 的部分结合起来，我能够创建一个功能齐全的查看器/编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-12T20:28:31.817

[无状态设计师](http://statelessdesigner.codeplex.com/)呢？

![在此处输入图像描述](../Images/99720ec35c52f62dc5aec007fb4bb831.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:24:36.097

雄心勃勃！您需要一个图表工具，例如[Go Diagram](http://www.nwoods.com/components/dotnet/godiagram-overview.htm)或[MindFusion WpfDiagram](http://mindfusion.eu/wpfdiagram.html)。

可能有另一种状态机图表工具，但我个人不知道。

看到结果应该很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T18:13:29.290

Expression Blend 提供对状态转换的支持。因此，Expression Blend 是为 WPF 驱动的 UX 量身定制的。

# logging - JBoss Portal Server 上托管的两个不同应用程序具有组合日志记录

> ID：13232931
> 
> 赞同：4
> 
> 时间：2012-11-05T13:16:09.980
> 
> 标签：logging, jboss, log4j

在 JBoss Portal Server 2.7.2 上，我们有两个不同的战争，其中分别包含 log4j.xml，它们具有组合的记录器条目。我们在 log4j 上使用 commons-logging。

App1 将 File1.log 配置为其 log4j.xml 中的记录器输出文件，App1.war 托管在 JBoss Portal 上。

App2 将 File2.log 配置为其 log4j.xml 中的记录器输出文件，App2.war 托管在 JBoss Portal 上。

当前场景 --> App1 记录器条目将出现在 File1.log 中 App2 记录器条目将出现在 File2.log 中

必需的场景 --> 只有 App1 记录器条目应该写入 File1.log 只有 App2 记录器条目应该写入 File2.log 并且服务器日志是不同的文件。

我们在这里缺少什么，以及如何解决问题。

感谢和问候 JavaDeveloperIndiaHyd。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T08:00:18.827

您可以使用 在运行时创建基于应用程序的日志文件`RoutingAppender`，然后在这种情况下，特定于应用程序的日志不会与服务器日志混淆。

要创建运行时`RoutingAppender`，您可以参考[此](https://stackoverflow.com/a/17846463/591061)

# javascript - 淘汰赛js绑定没有正确绑定网格标题

> ID：13232933
> 
> 赞同：1
> 
> 时间：2012-11-05T13:16:26.230
> 
> 标签：javascript, knockout.js, kendo-ui

我正在将 knockout.js 与 Kendo-UI 一起使用。
我有这个网格模型：

```
var GridModel = function (options) {
        function GridItem(item) {
            return { Id: item.Id() || '', Description: item.Description() };
        }

        $.extend(this, {
            data: ko.observableArray(),
            gridOptions: {
                pageable: true,
                pageSize: 5,
                sortable: true,
                scrollable: false,
                selectable: true,
                columns: [
                        { field: 'Id', title: 'title1', width: '80px', groupable: false },
                        { field: 'Description', title: 'title2', width: '200px', groupable: false }
                ]
            }
        });

        this.addItem = function (item) {
            this.data.push(new GridItem(item));
        }
    }; 
```

这是我的标记：

```
<div id="GridDiv" data-bind="kendoGrid: data, gridOptions: gridOptions"></div> 
```

这就是我应用绑定的方式：

```
ko.applyBindings(new GridModel(), $('#GridDiv').get(0)); 
```

由于某种原因，列的标题没有绑定，而不是 title1 和 title2，我得到了 Id 和 Description。此外，如果我`this.data.push(new GridItem(item));`用`this.data.push(item);`then 而不是 2 列替换，我会得到 10 列（因为 item 包含 10 个成员）。

为什么绑定不能正常工作？

更新：我添加了一个 jsfiddle [http://jsfiddle.net/mTqdE/14/](http://jsfiddle.net/mTqdE/14/)但不知何故它不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:07:56.487

他们有[一个示例](http://rniemeyer.github.com/knockout-kendo/web/Grid.html)如何使用 Knockout 绑定正确传递其他选项：

[这是工作示例](http://jsfiddle.net/mTqdE/16/)：

```
<div id="GridDiv" data-bind="kendoGrid: gridOptions"></div>
<button data-bind="click: addRandomItem">add</button> 
```

`data`并作为网格选项传递。

# python - 同名的模块和包

> ID：13232935
> 
> 赞同：0
> 
> 时间：2012-11-05T13:16:35.507
> 
> 标签：python, import, module, package

我可以在 Python 中拥有同名的包和模块吗？

前任：

```
import json
import myapp.json.jsoncustommodule 
```

我不知道这是否与 json 在 Python 内置库中的事实有关。

在大多数语言中，这是可以接受的。然而，Python 似乎混淆了这两件事，即使它们位于不同的父包中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:19:33.853

要回答你的问题，在 python 中做这样的事情没有问题。

但是，如果您有由以下原因导致的命名空间冲突：-

```
import json

from myspecialpackage import json 
```

您将需要使用`as`关键字来解决它，如下所示：-

```
from myspecialpackage import json as special_json 
```

# python - 2个列表的Python组合

> ID：13232936
> 
> 赞同：1
> 
> 时间：2012-11-05T13:16:43.337
> 
> 标签：python, optimization, performance

`pythonic`计算两个列表的所有产品组合的方法是什么。所以给定两个长度列表，`n`我想返回一个`2^n`包含产品的长度列表。

喜欢`list(itertools.product(on,off))`，但结果应该使用所有四个元素，而不仅仅是组合对，例如：

```
[(1.05, 5.53), (1.05, 3.12), (1.05, 3.75), (1.05, 4.75), (1.5, 5.53), (1.5, 3.12), (1.5, 3.75), (1.5, 4.75), (2.1, 5.53), (2.1, 3.12), (2.1, 3.75), (2.1, 4.75), (1.7, 5.53), (1.7, 3.12), (1.7, 3.75), (1.7, 4.75)] 
```

所以更像这样：

```
off = [5.53,3.12,3.75,4.75]
on = [1.05,1.5,2.1,1.7]

# calculate combinations
x = combinations(on,off)

# Where... 
# x[0] = off[0] * off[1] * off[2] * off[3] i.e
# x[0] = 5.53 * 3.12 * 3.75 * 4.75
#
# x[1] = off[0] * off[1] * off[2] * on[3] i.e
# x[1] = 5.53 * 3.12 * 3.75 * 1.7
#
# x[2] = off[0] * off[1] * on[2] * on[3] i.e
# x[2] = 5.53 * 3.12 * 2.1 * 1.7
#
# ...
#
# x[15] = on[0] * on[1] * on[2] * on[3] i.e
# x[15] = 1.05 * 1.5 * 2.1 * 1.7 
```

输出可以类似于`itertools.product()`方法，*即* `[(5.53, 3.12, 3.75, 4.75),(5.53, 3.12, 3.75, 1.7), ...]` 我需要计算产品，但我对组合方法很感兴趣。

*注意：*当我说`pythonic`这样做的方式时，我的意思是利用 pythons 结构、库*（itertools 等）*的简单一两行代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T13:19:27.520

你非常接近，[`itertools.combinations()`](http://docs.python.org/3/library/itertools.html#itertools.combinations).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:36:40.783

您可以从 开始生成所有`2**4`可能性`itertools.product([0, 1], 4)`。这会枚举长度为 4 的`0`s 和`1`s 的所有可能序列，然后您可以将每个 0-1 序列转换为`off`和的值序列`on`，方法是取`off[i]`0-1 序列的第 i 个元素是否为`0`，`on[i]`否则。在代码中：

```
>>> import itertools
>>> off = [5.53,3.12,3.75,4.75]
>>> on = [1.05,1.5,2.1,1.7]
>>> for choices in itertools.product([0, 1], repeat=len(off)):
...     print [(on[i] if choice else off[i]) for i, choice in enumerate(choices)]
... 
[5.53, 3.12, 3.75, 4.75]
[5.53, 3.12, 3.75, 1.7]
[5.53, 3.12, 2.1, 4.75]
[5.53, 3.12, 2.1, 1.7]
... <10 more entries omitted ...>
[1.05, 1.5, 2.1, 4.75]
[1.05, 1.5, 2.1, 1.7] 
```

要打印产品而不是列表：

```
>>> import operator
>>> for choices in itertools.product([0, 1], repeat=len(off)):
...     elts = [(on[i] if choice else off[i]) for i, choice in enumerate(choices)]
...     print reduce(operator.mul, elts, 1)
... 
307.32975
109.9917
172.10466
61.595352
... 
```

如果您有可用的 numpy 并且愿意使用 numpy 数组而不是 Python 列表，那么有一些不错的工具，如[numpy.choose](http://docs.scipy.org/doc/numpy/reference/generated/numpy.choose.html)可用。例如：

```
>>> import numpy
>>> numpy.choose([0, 1, 0, 1], [off, on])
array([ 5.53,  1.5 ,  3.75,  1.7 ])
>>> numpy.product(numpy.choose([0, 1, 0, 1], [off, on]))
52.880624999999995 
```

结合早期的解决方案给出：

```
>>> for c in itertools.product([0, 1], repeat=4):
...     print numpy.product(numpy.choose(c, [off, on]))
... 
307.32975
109.9917
172.10466
61.595352
147.7546875
52.880625
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:24:32.240

这是你想要的吗：

```
off = [5.53,3.12,3.75,4.75]
on = [1.05,1.5,2.1,1.7]
import itertools as it
import operator

indices = list(it.product([0,1],[0,1],[0,1],[0,1]))
off_on = off,on
a = [reduce(operator.mul,(off_on[z][i] for i,z in enumerate(x))) for x in indices]
print a

#Numpy solution
import numpy as np
indices = list(it.product([0,1],[0,1],[0,1],[0,1]))
off_on = off,on
b = np.array([off,on])
loff = range(len(off))
aa = [np.prod(b[list(x),loff]) for x in indices]

print aa
print aa == a 
```

# c# - JSON.NET 中的条件输出处理

> ID：13232939
> 
> 赞同：3
> 
> 时间：2012-11-05T13:16:58.957
> 
> 标签：c#, .net, json, json.net

具有以下课程：

```
class Test {
  [MyAttr]
  public string Name;
} 
```

如果我需要将所有标记为特定长度的属性的值修剪为特定长度，我该如何扩展[JSON.NET](http://json.codeplex.com/)`MyAttr`？似乎我不能在自定义中这样做，`JsonConverter`因为我需要访问`MemberInfo`表示 origin 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T13:48:26.857

在深入阅读文档和源代码之后，看起来合同解析器是要走的路：

```
public class MyCustomConverter : JsonConverter
{
    public override bool CanConvert(Type objectType) {
        return true;
    }

    public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue, Newtonsoft.Json.JsonSerializer serializer) {
        throw new NotImplementedException();
    }

    public override void WriteJson(Newtonsoft.Json.JsonWriter writer, object value, Newtonsoft.Json.JsonSerializer serializer) {
        if (value == null) {
            writer.WriteNull();
            return;
        }
        string str = value.ToString().Substring(1, 2);
        writer.WriteValue(str);
    }
}

public class MaskContractResolver : DefaultContractResolver
{
    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization) {
        JsonProperty property = base.CreateProperty(member, memberSerialization);
        if (member.CustomAttributes.Any(x => typeof(MyAttr).IsAssignableFrom(x.AttributeType)))
            property.Converter = new MyCustomConverter();
        return property;
    }
} 
```

像馅饼一样容易！

# c# - 我无法理解这种编程风格

> ID：13232943
> 
> 赞同：6
> 
> 时间：2012-11-05T13:17:17.410
> 
> 标签：c#, boolean, variable-assignment

有人可以向我解释这行代码的含义以及它是否是好的做法吗？

在我看来，它试图将一个或另一个值分配给布尔值，但尚不清楚。

```
 myBoolVar = isC || isP || isX; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T13:19:05.830

[`||`运算符表示条件 OR 。](http://msdn.microsoft.com/en-us/library/6373h346(v=vs.80).aspx)

如果 isC、isP 或 isX 中的任何一个为真，则 myBoolVar 将为真。

它类似于[|](http://msdn.microsoft.com/en-US/library/kxszd0kx(v=vs.80).aspx) 布尔操作数之间的运算[符，](http://msdn.microsoft.com/en-US/library/kxszd0kx(v=vs.80).aspx)*除了如果左侧计算为真，则不会计算右侧*。

至于这是否是好的做法，请考虑一个更详细的语义等价物：-

```
bool myBoolVar;

if (isC)
{
  myBoolVar = true;
}
else if (isP)
{
  myBoolVar = true;
}
else if (isX)
{
  myBoolVar = true;
} 
```

特别是，请考虑您更愿意维护哪一个。在大多数情况下，我希望人们认为 terser`myBoolVar = isC || isP || isX;`更具可读性。

我从下面的评论中看到，您提出了关于编程是关于简单性而不是“炫耀”的论点。我同意程序员经常试图压缩或故意混淆代码以满足他们自己的需要——通常会损害项目。这可能**不是**其中一种情况。我可能会更清楚地命名变量，并将其封装在适当命名的属性后面，但我肯定会使用`a || b || c`结构而不是更冗长的东西。

如果您觉得自己有更清晰的表达方式，请与我们分享，我们可以讨论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T13:19:28.300

这是有条件的`OR`。`isC`和`isP`和的值`isX`一起`OR`-ed。

[http://msdn.microsoft.com/en-us/library/6373h346.aspx](http://msdn.microsoft.com/en-us/library/6373h346.aspx)

您需要做的就是阅读精美手册。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T13:31:17.643

运算符`||`仅表示 OR。所以在伪代码中你可能会说

```
myBoolVal = isC OR isP OR isX 
```

这用简单的英语做什么......

“如果 isC 为真，或 isP 为真，或 isX 为真，则 myBoolVal 为真，否则，myBoolVal 为假”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T13:19:05.327

如果其中任何一个具有`true`值，则返回 true

```
bool myBoolVar = false;
if( isC == true || isP == true || isX == true)
{
    myBoolVar = true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T13:22:10.263

它是[有条件的 OR](http://msdn.microsoft.com/en-us/library/6373h346%28v=vs.80%29.aspx)：

这意味着来自的任何变量`isC, isP, isX`都是`True``myBoolVar``True`

那是：

```
myBoolVar = if(isC == true) || if(isP == true) || if(isX == true) 
```

# php - 根据选择标签的选择自动填充表单中的字段（下拉菜单）

> ID：13232944
> 
> 赞同：1
> 
> 时间：2012-11-05T13:17:20.267
> 
> 标签：php, javascript, html, mysql, parameter-passing

我有一个带有选择标签的表单；从下拉列表中选择项目时，其余的表单字段应相应填写。请注意，所有表单数据均来自 mysql 数据库。下面是我的代码：

```
 <script language="javascript" type="text/javascript">
            function populateData($id)
            {
                alert('in populateData');
                y = document.getElementById("selectCard");
                document.getElementById("to_address").value = to_address[y.selectedIndex];
                document.getElementById("subject").value = subject[y.selectedIndex];
                document.getElementById("email_content").value = email_content[y.selectedIndex];
            }
    </script>
    <body>
        <?php
            mysql_connect("localhost", "someUser", "password") or die("Connection Failed");
            mysql_select_db("mns")or die("Connection Failed");
            $query = "SELECT * FROM table";
            $result = mysql_query($query);
        ?>              
        <select id="selectCard" class="dropdown" onchange="populateData($id)">
            <?php
                while ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {
            ?>  
            <option value="<?php echo $line['source_name'];?>"> <?php echo $line['source_name'];?>
            <?php
                $id = $line['source_id'];           
                $source_name = $line['source_name'];
                $source_email = $line['source_email'];
                $phone_no = $line['source_id'];
                $disteller_function = $line['disteller_function'];
                }
            ?>
        </select>               
        <P><INPUT ID="to_address" TYPE="TEXT" NAME="to_address" SIZE="25"></P>    
        <P><INPUT ID="subject" TYPE="TEXT" NAME="subject" SIZE="25"></P>         
        <P><INPUT ID="email_content" TYPE="TEXT" NAME="email_content" SIZE="500"></P>         
        <P><INPUT TYPE="SUBMIT" VALUE="Submit" NAME="B1"></P>                       
    </body> 
```

当我将'$id' 作为参数传递时，'populateData($id)' 函数不会被调用。当我删除参数时，代码可以工作，但我在其余的表单字段中得到'undefined'。

任何帮助深表感谢。

七无

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:18:58.853

首先，您将参数 $id 传递给似乎很奇怪，`populateData()`因为您没有在该函数内的任何地方使用它。也许您应该重新检查您的代码，看看它是否与您的设计相匹配，您真正想要做什么以及应该如何完成。

您的调用不起作用的原因是 PHP 变量必须以 PHP 变量开头，`$`但 Javascript 变量不能，最重要的是：您不能只在客户端 Javascript 代码上引用服务器端 PHP 脚本变量。您需要让您的 PHP 服务器端脚本回显（输出）您的 PHP 脚本变量的值`$id`作为用户浏览器将接收并运行客户端的 HTML + Javascript 代码的函数调用的参数`id`（可以在没有单引号如果`$id`是一个数字，你想把它作为一个数值传递给`populateData()`)。

只需从函数声明的参数中删除 $`$id`并将其设置在单引号内的 PHP 标记之间，以将其作为字符串参数回显给在 HTML 输出上调用的函数：

```
function populateData(id){
...
}
...
<select id="selectCard" class="dropdown" onchange="populateData('<?php echo $id; ?>')"> 
```

此外，我建议您使用在浏览器中打开的 Javascript 控制台进行测试（即 Web 开发人员 -> Web 控制台或 Firefox 中的 CTRL+SHIFT+K），这可以帮助您即时跟踪此类未来的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:01:08.857

@elcodedocle，首先感谢您调查它。虽然上述解决方案对我不起作用，但我通过以下方式完成了它，

```
function populateData(id){
...
}
...
<select id="selectCard" class="dropdown" onchange="populateData(this.value)"> 
```

将所有参数附加到值标签。你是对的，不能将 php 变量传递给 javascript 函数。

再次感谢，

七无

# linux - 在 Arch Linux 上的键盘布局之间切换会破坏其他键绑定

> ID：13232947
> 
> 赞同：10
> 
> 时间：2012-11-05T13:17:30.620
> 
> 标签：linux, keyboard, archlinux, keyboard-layout

我是 Arch 新手，遇到了这个问题：

我想要两个键盘布局（en 和 bg）并使用 alt+shift 命令在它们之间切换。所以我按照[这里](https://wiki.archlinux.org/index.php/LXDE#Keyboard_layout)写的做了一切，一切正常。我有两种布局，我用 alt+shift 在它们之间切换。

但是...当我尝试将窗口移动到另一个桌面时（例如 ctrl+alt+shift）它不起作用，它只会改变我的键盘布局。这不是预期的效果。它应该只将我的窗口移动到另一个桌面，而不改变布局。

如果我使用 ctrl+shift 也会发生同样的事情。然后我不能用 ctrl+shift+v 粘贴到终端。只切换键盘布局...

我正在使用这条线：

```
setxkbmap -option grp:alt_shift_toggle us,bg 
```

如果重要的话，我正在使用 LXDE。

# php - 在会话数组中存储几个单词，然后显示它们

> ID：13232950
> 
> 赞同：0
> 
> 时间：2012-11-05T13:17:31.940
> 
> 标签：php

我正在写一个测验。首先问题显示在 question.php 中，然后在 answer.php 中，对答案进行分析，如果答案正确，则将单词存储在数组中，如果错误则存储在另一个数组中。然后回到 question.php 等等。当没有更多问题时，result.php 将显示哪些单词是正确的，哪些是错误的。

请注意，每次加载 answer.php 时，会话数组都需要包含一个新词。

编辑：问题是会话数组只存储第一项

我的代码：

answer.php：

```
 <?php
 session_start();

 $question = $_GET['question'];
 $user_answer = $_GET['user_answer'];
 $right_answer = mysql_query("SELECT french FROM words where english='$question'");
 $fila = mysql_fetch_assoc($right_answer); 
 $fila_french = $fila['french'];

 if ( $user_answer == $fila_french ) { 
    echo "Right"; 
    $_SESSION['right_words'] = array();
    array_push($_SESSION['right_words'], $question);
     }

     else { echo "Wrong"; 
     $_SESSION['wrong_words'] = array();
    array_push($_SESSION['wrong_words'], $question);
     }
 echo "<a href='question.php' > Next </a>";
 ?> 
```

结果.php：

```
 <?php
 session_start();

 $right_answers = implode(',',$_SESSION['right_words']);
 $wrong_answers = implode(',',$_SESSION['wrong_words']);  

 echo "<h1> You finished the test </h1> 
 <p> You have these words right: $right_answers</p>
 <p> You have these words wrong: $wrong_answers</p>
 <a href='../exercises.php'> Go back to exercises </a>";
 ?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:23:01.643

你没有说问题是什么，但你只会在每个数组中获得 1 个项目，就像在你的 if/else 块中你正在为会话变量分配一个新的空数组一样。在执行此操作之前，您应该检查这些变量是否已经定义：

```
if (!$_SESSION['right_words']) { $_SESSION['right_words'] = array(); } 
```

对“wrong_words”做同样的事情。

对于您的 result.php 文件，要列出用逗号分隔的所有答案，您可以使用`implode`：

```
$right_answers = implode(',',$_SESSION['right_words']);
$wrong_answers = implode(',',$_SESSION['wrong_words']); 
```

# delphi - 有没有办法从 Delphi 调用 Uniface 创建的表单？

> ID：13232954
> 
> 赞同：-1
> 
> 时间：2012-11-05T13:17:38.773
> 
> 标签：delphi, delphi-2010

我们想从 Delphi 2010 调用 Uniface 表单。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:03:58.947

我不知道Delphi，但是uniface有很多call in机制，例如COM、C、SOAP等等，所以只要Delphi可以通过这些通道调用callout，那么是可行的。

# android - 在 NDK 静态库中创建单例

> ID：13232955
> 
> 赞同：0
> 
> 时间：2012-11-05T13:17:43.447
> 
> 标签：android, android-ndk, singleton, shared-libraries, static-libraries

我正在尝试为 android ndk 中的 2 个不同库创建一个单例。

想象一下，我有：

*   lib1（静态）
*   lib2（共享）
*   lib3（共享）

`lib1`始终定义为 LOCAL_STATIC_LIBRARIES`lib2`和`lib3`

但是当我在 lib2 上设置单例的值时，这个值在 lib3 上仍然为 NULL。

如何使用这种架构构建单例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:35:05.920

[正如这里](https://stackoverflow.com/questions/4911994/sharing-a-global-static-variable-between-a-process-and-dll)和[这里](https://stackoverflow.com/questions/4616148/sharing-memory-between-modules)所讨论的，这个问题很常见并且没有好的解决方案。共享库具有链接的静态库的单独副本，包括代码和数据。不同 SO 中的静态库实例只是不交互，而且有很多很好的理由。

您需要的是一块可供双方访问的内存。您可以将单例提升到 Java 级别（毕竟它在 Android 之下）。您可以拥有一个具有众所周知名称的临时文件。C 级 TLS 也可能有所帮助。

Android 的共享内存设施 ( `ashmem`) 将毫无用处，因为它不提供命名块。

# facebook - Facebook会话密钥问题

> ID：13232957
> 
> 赞同：0
> 
> 时间：2012-11-05T13:17:49.330
> 
> 标签：facebook, api

我在用

> [http://www.facebook.com/login.php?api_key=appkey&connect_display=popup&v=1.0&next=](http://www.facebook.com/login.php?api_key=appkey&connect_display=popup&v=1.0&next=) "myurl"&cancel_url= [http://www.facebook.com/connect/login_failure.html&fbconnect=true&return_session=true&session_key_only=true&req_perms=读取流，发布流，离线访问](http://www.facebook.com/connect/login_failure.html&fbconnect=true&return_session=true&session_key_only=true&req_perms=read_stream,publish_stream,offline_access)``

但它不会将我重定向到我的网址并重定向到 Facebook 提要页面

早些时候它正在工作，我正在获取会话密钥，但从上周开始，它并没有将我重定向到我给定的 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:31:21.997

/login.php 端点不再可用 - 您必须调整流程以实现登录，如下所述：[https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

# php - 使用 Magento(1.7) 上传 (3.1)

> ID：13232958
> 
> 赞同：1
> 
> 时间：2012-11-05T13:17:51.153
> 
> 标签：php, magento, upload, uploadify

我正在尝试在magento中实现uploadify。我在 magento 中的 phtml 模板有这个：

```
<script type="text/javascript">
( function($) {
$(function() {
    $('.uploadify').uploadify({
        'swf'      : 'uploadify.swf',
        'uploader' : '<?php echo Mage::helper("adminhtml")->getUrl('*/index/upload') ?>',
        'auto'     : true,
    });
});
} ) ( jQuery );
</script> 
```

和这样的上传动作：

```
public function uploadAction()
{
$targetFolder = '/uploadify/uploads'; // Relative to the root

if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$targetFile);
    echo '1';
} else {
    echo 'Invalid file type.';
}
}
} 
```

这不起作用:(

上传操作中的脚本与uploadify.php 中的脚本完全相同，如果我将上传器选项更改为uploadify.php，它就可以工作（'uploader'：'uploadify.php'）。

欢迎所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:09:25.067

它不起作用的原因是您没有提供 form_key 需要验证表单是从 magento 服务器本身提交的。

此外，您需要提供会话 ID 以及 url，否则您将获得登录页面，因为上传者不一定使用与登录用户相同的会话。

因此尝试以下操作：

```
 <script type="text/javascript">
( function($) {
$(function() {
    $('.uploadify').uploadify({
        'swf'      : 'uploadify.swf',
        'formData' : {'form_key' : '<?php echo $this->getFormKey() ?>'},
        'uploader' : '<?php echo Mage::getModel('adminhtml/url')->addSessionParam()->getUrl('*/index/upload') ?>',
        'auto'     : true,
    });
});
} ) ( jQuery );
</script> 
```

希望有帮助吗？

# c++ - Visual Studio中的多项目解决方案：传播主项目的配置

> ID：13232965
> 
> 赞同：1
> 
> 时间：2012-11-05T13:18:06.860
> 
> 标签：c++, visual-studio, architecture, projects, solution

我在 Visual Studio (2012 Express) 中有一个包含 15 个项目的 C++ 解决方案。

1 被定义为主要项目（在构建整个解决方案时首先构建的项目）。

所有 15 个项目都有 2 个**相同**的外部依赖项。我的意思是我必须将 2 个相同的文件夹添加到项目属性 > 配置属性 > VC++ 目录。

手动执行此操作有点无聊。

有没有办法只将所需的依赖项添加到主项目并告诉 VC11 将此配置复制到我的解决方案中的其他 14 个项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T13:26:52.227

您选择多个节点 - 见这张图片：

![在此处输入图像描述](../Images/2a28e2d2f62730cf60bd3a39be65629e.png) 右键单击并选择属性....

注意忘记我原来的答案 - 不要忘记选择正确的配置（或所有配置）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T13:31:39.367

我使用 VC++ Express 2008，但我认为它应该也可以工作：

1：打开属性页，把依赖放在第一个项目上。

2：之后，从输入文本框中复制带有依赖项目录的文本。

3：单击解决方案资源管理器上的下一个项目（或在 VC2012 上调用包含项目和源代码文件的任何框）。该项目的同一属性页面将打开。

4：只需将文本粘贴到那里写的任何内容之后。

5：如果还有项目需要更改：转至步骤3。

# perl - MooseX::Aliases 的编译时间问题，不可变和循环“使用”

> ID：13232974
> 
> 赞同：0
> 
> 时间：2012-11-05T13:18:48.980
> 
> 标签：perl, moose

我收到一个编译时错误（Moose 抱怨修改不可变实例）在包上运行“perl -c”，但使用该包的代码运行无错误。示例代码：

文件 Pa_1.pm（使用 MooseX::Aliases 和包 Pa_2.pm 的不可变 Moose 类）：

```
package Pa_1;

use Pa_2;

use Moose;

# uncommenting either this line ...
use MooseX::Aliases;

# ... or this line to make 'perl -c' work
__PACKAGE__->meta->make_immutable;

1; 
```

文件 Pa_2.pm（仅使用使用 Pa_2.pm 的 Pa_1.pm）：

```
package Pa_2;

use Pa_1;
1; 
```

文件 run_pa_1.pl ：

```
#!/usr/bin/env perl

use Pa_1;

my $pa1 = Pa_1->new();
print "Done !\n"; 
```

执行 run_pa_1.pl 有效，但 'perl -c Pa_1.pm' 给出

```
The 'add_method' method cannot be called on an immutable instance at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Class/Immutable/Trait.pm line 32.
        Class::MOP::Class::Immutable::Trait::_immutable_cannot_call('add_method') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Class/Immutable/Trait.pm line 47
        Class::MOP::Class:::around('CODE(0xc10158)', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'DESTROY', 'Moose::Meta::Method::Destructor=HASH(0x14af4f8)') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Method/Wrapped.pm line 162
        Class::MOP::Method::Wrapped::__ANON__('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'DESTROY', 'Moose::Meta::Method::Destructor=HASH(0x14af4f8)') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Method/Wrapped.pm line 91
        Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::SERIAL::1::add_method('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'DESTROY', 'Moose::Meta::Method::Destructor=HASH(0x14af4f8)') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Mixin/HasMethods.pm line 181
        Class::MOP::Mixin::HasMethods::_restore_metamethods_from('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Class.pm line 405
        Class::MOP::Class::_restore_metaobjects_from('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Meta/Class.pm line 728
        Moose::Meta::Class::_restore_metaobjects_from('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Class/MOP/Class.pm line 65
        Class::MOP::Class::reinitialize('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'error_class', 'Moose::Error::Default', 'wrapped_method_metaclass', 'Class::MOP::Method::Wrapped', 'instance_metaclass', 'Moose::Meta::Instance', 'method_metaclass', ...) called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Meta/Class.pm line 188            Moose::Meta::Class::reinitialize('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'attribute_metaclass', 'Moose::Meta::Class::__ANON__::SERIAL::2') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Util/MetaRole.pm line 99            Moose::Util::MetaRole::_make_new_metaclass('Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'HASH(0x144f868)', 'class') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Util/MetaRole.pm line 28            Moose::Util::MetaRole::apply_metaroles('for', 'Class::MOP::Class::Immutable::Moose::Meta::Class::__ANON__::S...', 'class_metaroles', 'HASH(0x144f868)', 'role_metaroles', 'HASH(0x144f838)') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Exporter.pm line 543
        Moose::Exporter::_apply_metaroles('Pa_1', 'ARRAY(0x93c630)', 'CODE(0xddccc8)') called at /home/pecho/perl5/perlbrew/perls/perl-5.16.1/lib/site_perl/5.16.1/x86_64-linux/Moose/Exporter.pm line 460
        Moose::Exporter::__ANON__('MooseX::Aliases') called at Pa_1.pm line 6
        Pa_1::BEGIN() called at Pa_1.pm line 6
        eval {...} called at Pa_1.pm line 6
BEGIN failed--compilation aborted at Pa_1.pm line 6. 
```

我有点困惑，因为在 Pa_2.pm 上使用编译开关启动 perl 时会发出错误，但运行时间似乎没问题。

*   在调试器中并执行“使用 Pa_2”也没有错误。
*   执行 'perl -c run_pa_1.pl' 也没有错误。
*   不使用 MooseX::Aliases 或不使 Pa_1.pm 不可变让 'perl -c Pa_1.pm' 编译没有错误。

代码中是否存在错误，在 MooseX::Aliases 中还是 Moose 内部的东西？

使用的版本：perl 5.16.1；驼鹿 2.0604; MooseX::别名 0.10;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:38:33.750

永远不要直接执行模块。你最终编译并执行了两次。

同样，永远不要直接编译模块。你最终编译了两次。

```
perl -c Pa_1.pm 
```

应该

```
perl -c -e'use Pa_1;' 
```

`perl -c Pa_1.pm`执行以下操作（忽略`require`并且`import`什么都不做）：

```
package Pa_1;
require Pa_2;

package Pa_2;
require Pa_1;

package Pa_1;
require Moose;
import Moose;
require MooseX::Aliases;
import MooseX::Aliases;
__PACKAGE__->meta->make_immutable;
1;

package Pa_2;
1;

package Pa_1;
import Moose;
import MooseX::Aliases; 
```

`perl -c -e'use Pa_1;`执行以下操作（忽略`require`并且`import`什么都不做）：

```
package Pa_1;
require Pa_2;

package Pa_2;
1;

package Pa_1;
require Moose;
import Moose;
require MooseX::Aliases;
import MooseX::Aliases;
__PACKAGE__->meta->make_immutable;
1; 
```

注意你最终是如何做的

```
import Moose;
import MooseX::Aliases; 
```

做完之后

```
__PACKAGE__->meta->make_immutable; 
```

当你做错了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:31:27.923

Pa_1.pm 中的这种排序对您有用吗？

```
package Pa_1;

use Moose;
use MooseX::Aliases;

use Pa_2;

__PACKAGE__->meta->make_immutable; 
```

我认为通常建议将所有`Moose`模块放在首位。

# .htaccess - 当 url 以特定单词开头时不应用规则

> ID：13232981
> 
> 赞同：0
> 
> 时间：2012-11-05T13:19:07.363
> 
> 标签：.htaccess, mod-rewrite

我得到了这个规则：

```
RewriteRule ^([a-z]+)/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=$3 [L] 
```

但我也有：

```
RewriteRule ^testpage/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=$3 [L] 
```

第一条规则覆盖第二条规则。有没有可能这样说：当 ([az]+) 不是“testpage”时应用第一条规则？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:40:30.710

您可以在没有 www 子域的情况下对 url 使用类似这样的修复

```
RewriteCond %{HTTP_HOST} !^(www\.|api\.)
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这将检查 url 是否有 www。前缀或 api。字首。当两者都不是时。它将添加 www。子域前缀。你的情况我有点不同，但同样的方法适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:15:51.990

```
RewriteRule ^testpage/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=INVALID-Back-reference [L]
RewriteRule ^([a-z]+)/([^-]+)-([^&]+)$ lala.php?type=$1&id=$2&title=$3 [L] 
```

但是，第一条规则有一个小问题，因为它有两个反向引用，而您使用了三个！你应该删除其中之一！

# jquery - 将一个表格中的所有内容复制到另一个填满输入框的表格中

> ID：13232985
> 
> 赞同：2
> 
> 时间：2012-11-05T13:19:18.807
> 
> 标签：jquery, html

我用 php 动态创建了 11 个表，每个表上的每个单元格都包含一个输入文本框。

像这样：

```
<table>
<tr>
<td><input value="2" class="amount 1 " name="item_prices[10][000][1][1]" size="3" type="text"></td>
<td><input value="2" class="amount 2 " name="item_prices[10][000][1][2]" size="3" type="text"></td>
</tr>
<tr>
<td><input value="2" class="amount 1 " name="item_prices[10][001][1][1]" size="3" type="text"></td>
<td><input value="2" class="amount 2 " name="item_prices[10][001][1][2]" size="3" type="text"></td>
</tr>
</table>

<table>
<tr>
<td><input value="2" class="amount 1 " name="item_prices[25][000][1][1]" size="3" type="text"></td>
<td><input value="2" class="amount 2 " name="item_prices[25][000][1][2]" size="3" type="text"></td>
</tr>
<tr>
<td><input value="2" class="amount 1 " name="item_prices[25][001][1][1]" size="3" type="text"></td>
<td><input value="2" class="amount 2 " name="item_prices[25][001][1][2]" size="3" type="text"></td>
</tr>
</table> 
```

等等...

11 个表之间的唯一区别是输入名称，我想复制表之间的所有内容，例如从表 1 到表 10 以及从表 2 到表 6。

实现这一目标的最佳方法是什么？使用jQuery我必须步行为每个输入框获取值，然后复制到用户选择的目标表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:32:23.383

我认为，所有表格都将在一个 DIV 中，因此我们可以通过 divID 进行检查。

试试这个，

```
var getamount="";
$("#div1").find("table tr td").each(function (i) {
     if (getamount == "")
        getamount = $('input:text', $(this)).val();
     else
       getamount = getamount + "_" + $('input:text', $(this)).val();
 });

alert('getamount_'+getamount);​ 
```

[现场演示](http://jsfiddle.net/smanimani/dbK9z/1/)

希望它会工作。,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:42:54.120

如果您可以依赖所有表格始终具有相同数量和顺序的文本框，那么此代码将起作用：

```
function CopyTableInputs(sourceTableId, destinationTableId) {
    var oSource = $("#" + sourceTableId);
    var oDest = $("#" + destinationTableId);
    var arrSourceInputs = oSource.find("input");
    var arrDestInputs = oDest.find("input");
    arrDestInputs.each(function(i) {
        this.value = arrSourceInputs[i].value;
    });
});​ 
```

[现场测试用例](http://jsfiddle.net/k5yQg/)。

为此，您必须为每个表添加 id，如果您想避免此步骤并且文档中没有任何其他表，您可以稍微更改函数并使用索引：

```
function CopyTableInputs(sourceTableIndex, destinationTableIndex) {
    var oSource = $("table").eq(sourceTableIndex);
    var oDest = $("table").eq(destinationTableIndex);
    //...same as above
});​ 
```

# java - jaxb 中两个不同但名称相同的元素

> ID：13232991
> 
> 赞同：1
> 
> 时间：2012-11-05T13:19:42.163
> 
> 标签：java, xml, jaxb

我正在尝试使用`JAXB`来解析以下内容`XML`。我删除了不相关的部分。不幸的是，原始文件`XML`是由第三方应用程序生成的，我没有可用`DTD`的`XSD`文件，所以我正在`JAXB`手动构建我的代码。

```
<add>
  <add-attr attr-name="UserName">
    <value type="string">User1</value>
  </add-attr>
  <add-attr attr-name="Name">
    <value type="structured">
      <component name="familyName">Doe</component>
      <component name="givenName">John</component>
    </value>
  </add-attr>
</add> 
```

问题当然是`<value>`元素。这可以是一个纯文本元素，或者如果它的属性类型是“结构化的`<component>`元素列表”。

我创建了两个实现这两个选项的类（value1 和 value2），但我不知道`JAXB`要使用哪一个，因为这些元素都被命名为“value”。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:25:56.120

**选项 #1 - 一个值类**

你可以有一个`Value`类，其中包含一个`String`用 注释的属性`@XmlMixed`。

```
package forum13232991;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Value {

    @XmlAttribute
    String type;

    @XmlMixed
    List<String> value;

    @XmlElement(name="component")
    List<Component> components;

} 
```

**选项 #2 - 多值类通过`XmlAdapter`**

如果您希望它们成为单独的类，您可以利用`XmlAdapter`：

***值适配器***

```
package forum13232991;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class ValueAdapter extends XmlAdapter<Value, Object> {

    @Override
    public Value marshal(Object object) throws Exception {
        Value value = new Value();
        if(object instanceof StructuredValue) {
            StructuredValue structuredValue = (StructuredValue) object;
            value.type = "structured";
            value.components = structuredValue.components;
        } else {
            StringValue stringValue = (StringValue) object;
            value.value.add(stringValue.value);
        }
        return value;
    }

    @Override
    public Object unmarshal(Value value) throws Exception {
        if("string".equals(value.type)) {
            StringValue stringValue = new StringValue();
            StringBuilder strBldr = new StringBuilder();
            for(String string : value.value) {
                strBldr.append(string);
            }
            stringValue.value = strBldr.toString();
            return stringValue;
        } else {
            StructuredValue structuredValue = new StructuredValue();
            structuredValue.components = value.components;
            return structuredValue;
        }
    }

} 
```

***添加属性***

```
package forum13232991;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

public class AddAttr {

    @XmlJavaTypeAdapter(ValueAdapter.class)
    Object value;

} 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:30:14.893

一种方法是创建一个 XSL 转换，它基于 type 属性将 xsi:type 属性添加到 value 元素。然后，您的所有 Value 元素都可以从同一个 BaseValue 类扩展，并且 add-attr 元素可以引用此 BaseValue。

# android - 我无法绘制两个地理坐标之间的路径。这是代码

> ID：13232999
> 
> 赞同：0
> 
> 时间：2012-11-05T13:20:07.323
> 
> 标签：android, google-maps, android-mapview

```
package com.chleon.mapviewdemo;

import java.util.List;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import com.google.android.maps.Projection;

public class MainActivity extends MapActivity {
    Projection projection;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MapView mapView = (MapView) findViewById(R.id.mapview);

        mapView.setBuiltInZoomControls(true);

        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(
                R.drawable.ic_action_search);
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(
                drawable, this);
        int latitude1 = (int) (28.619087 * 1e6);
        int longitude1 = (int) (77.376867 * 1e6);

        GeoPoint point = new GeoPoint(latitude1, longitude1);
        OverlayItem overlayitem = new OverlayItem(point, "Prashant",
                "I'm somewhere near delhi");

        GeoPoint point2 = new GeoPoint(17385812, 78480667);
        OverlayItem overlayitem2 = new OverlayItem(point2, "Prashant",
                "I'm in Hyderabad");

        itemizedoverlay.addOverlay(overlayitem);
        itemizedoverlay.addOverlay(overlayitem2);

        mapOverlays.add(itemizedoverlay);
    }

    protected boolean isRouteDisplayed() {
        return false;
    }

    class MyOverlay extends Overlay {

        public MyOverlay() {

        }

        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            super.draw(canvas, mapView, shadow);

            Paint mPaint = new Paint();
            mPaint.setDither(true);
            mPaint.setColor(Color.RED);
            mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(6);
            int latitude1 = (int) (28.619087 * 1e6);
            int longitude1 = (int) (77.376867 * 1e6);
            projection = mapView.getProjection();
            GeoPoint point = new GeoPoint(latitude1, longitude1);
            GeoPoint point2 = new GeoPoint(17385812, 78480667);
            Point p1 = new Point();
            Point p2 = new Point();
            Path path = new Path();

            projection.toPixels(point, p1);
            projection.toPixels(point2, p2);

            path.moveTo(p2.x, p2.y);
            path.lineTo(p1.x, p1.y);

            canvas.drawPath(path, mPaint);
        }
    }
} 
```

我只想画一条连接代码中给出的两个地理坐标的线。这两个点正在显示，但我无法得到我想要画的线。我提到[在谷歌地图上绘制一条线/路径，](https://stackoverflow.com/questions/2176397)但输出不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:55:34.353

希望这可以帮助

HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, mapView.getContext());

[Android 示例“Google 地图视图”中的上下文问题](https://stackoverflow.com/questions/2255441/context-problem-in-android-example-google-map-view)