# StackOverflow 问答 14730000-14730999

# r - 将 data.frame 转换为列表列表

> ID：14730001
> 
> 赞同：10
> 
> 时间：2013-02-06T13:14:43.653
> 
> 标签：r, dataframe

如何转换 data.frame

```
df <- data.frame(id=c("af1", "af2"), start=c(100, 115), end=c(114,121)) 
```

到列表列表

```
LoL <- list(list(id="af1", start=100, end=114), list(id="af2", start=115, end=121)) 
```

我试过像

```
not.LoL <- as.list(as.data.frame(t(df))) 
```

而且我真的不确定在此之后我会得到什么，但这并不完全正确。我的要求是我可以`start`通过命令访问第一个

```
> LoL[[1]]$start
[1] 100 
```

我目前拥有的`not.LoL`给我以下错误：

```
> not.LoL[[1]]$start
Error in not.LoL[[1]]$start : $ operator is invalid for atomic vectors 
```

解释和/或解决方案将不胜感激。

编辑：我应该明确指出，这里的“id”实际上是非唯一的——一个 ID 下可以有多个元素。因此，我可以使用不依赖于唯一 ID 的解决方案`split`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T13:20:19.620

```
LMAo <- lapply(split(df,df$id), function(x) as.list(x)) # is one way

# more succinctly
# LMAo <- lapply(split(df,df$id), as.list) 
```

* * *

根据您的评论编辑的解决方案：

```
lapply( split(df,seq_along(df[,1])), as.list) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T13:28:50.983

使用`plyr`，您可以执行此操作

```
dlply(df,.(id),c) 
```

为避免按 id 分组，如果有多个（也许您需要更改列名，id 对我来说是唯一的）

```
dlply(df,1,c) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-06T14:27:25.820

您可以使用`apply`将数据框转换为列表列表，如下所示：

```
LoL <- apply(df,1,as.list) 
```

但是，这会将您的所有数据更改为文本，因为它将单个原子向量传递给函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-09T18:02:05.153

`mapply`在基础 R 中，使用它来代替`split`or会快很多`lapply`- 但是，您必须通过调用它，`do.call`以便独立使用每一列。

```
df <- sleep

f <- function(df) {
  lapply(seq_len(nrow(df)), function(row) {
    df[row, , drop = FALSE]
  })
}

f2 <- function(df) {
  do.call("mapply", c(list, df, SIMPLIFY = FALSE, USE.NAMES=FALSE))
}

f3 <- function(df) {
  split(df, seq(nrow(df)))
}

microbenchmark::microbenchmark(f(df), f2(df), f3(df))
#> Unit: microseconds
#>    expr     min       lq     mean   median       uq       max neval
#>   f(df) 573.799 607.8375 759.1721 626.0095 752.9465  2861.961   100
#>  f2(df) 114.819 123.5190 155.5185 129.9210 141.4340  1375.573   100
#>  f3(df) 598.774 625.6025 813.6837 634.5855 684.3825 11230.678   100 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019 年 10 月 9 日创建)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-10T12:47:01.103

如果像我一样，您主要希望创建要在中使用的列表列表`highcharter`，那么同一个包包含该函数`list_parse()`（或者`list_parse2()`如果您想删除名称）。只需像这样使用它：

```
library(highcharter)

df <- data.frame(id=c("af1", "af2"), start=c(100, 115), end=c(114,121))

LoL <- list_parse(df) 
```

之后，您可以进行所需的索引：

```
> LoL[[1]]$start
[1] 100 
```

# hadoop - “hadoop namenode -format”格式错误的目录

> ID：14730017
> 
> 赞同：2
> 
> 时间：2013-02-06T13:15:44.903
> 
> 标签：hadoop

我正在尝试在 CentOS 6.3 上安装 Hadoop 1.1.2.21

我已经在 /etc/hadoop/conf/hdfs-site.xml 文件中配置了 dfs.name.dir

```
<name>dfs.name.dir</name>
<value>/mnt/ext/hadoop/hdfs/namenode</value> 
```

但是当我运行“hadoop namenode -format”命令时，它会格式化/tmp/hadoop-hadoop/dfs/name。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T06:06:43.627

它可能会`/tmp/hadoop-hadoop/dfs/name`从`hdfs-default.xml`. 不知道为什么不取值`hdfs-site.xml`。`dfs.name.dir`标记`final`为`hdfs-default.xml`? _

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T13:37:02.327

我遇到了这个问题并解决了它。所以更新这个答案。确保您的环境变量`HADOOP_CONF_DIR`指向可以找到所有`xml`用于配置的文件的目录。它为我解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:16:54.447

*   检查某个 Hadoop 进程是否已经在后台运行。如果您中止了先前的进程并且它尚未被杀死并且已成为**ZOMBIE**进程，则会发生这种情况如果是这种情况，请杀死该进程，然后再次尝试格式化系统

*   您还可以检查目录的权限。

*   尝试为目录提供不同的位置，如果它反映

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-06T04:39:31.247

请不要设置 HADOOP_CONF_DIR。您可以检查 .bashrc 文件并将其删除。

# visual-studio-2008 - CUDA --ptxas-options="-v" 不显示任何输出

> ID：14730023
> 
> 赞同：2
> 
> 时间：2013-02-06T13:15:54.920
> 
> 标签：visual-studio-2008, cuda, nvcc

我在 64 位 Windows 上安装了 Visual Studio 2008。尝试通过添加`--ptxas-options="-v"`CUDA->Command Line->Additional Options 来构建 CUDA 程序。我仍然没有看到[这个](https://stackoverflow.com/a/6310608/1961040)答案中的 ptxas 信息。

这是CUDA->命令行部分的“所有选项”部分中的数据：

```
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe"  -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -I"C:\Documents and Settings\All Users\Application Data\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc" -O0 -arch compute_10 -code compute_10 --host-compilation C++ -c -m 64 -o "x64\Release\CUDA_Dissertation.obj" -odir "x64\Release" -ext none -int real  --ptxas-options="-v" "c:\Documents and Settings\shubham\My Documents\Visual Studio 2008\Projects\MTP\CUDA_Dissertation\CUDA_Dissertation.vcproj" 
```

是否有其他标志正在抑制 ptxas 标志？还是我的构建配置（发布 x64）与它有关？或其他一些启用/禁用的选项。我尝试使用几乎相同的命令从命令提示符编译它：

```
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe"  -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -I"C:\Documents and Settings\All Users\Application Data\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc" -O0 -arch compute_10 -code compute_10 --host-compilation C++ -c -m 64 -o "x64\Release\CUDA_Dissertation.obj" -odir "x64\Release" -ext none -int real  --ptxas-options="-v" main.cu 
```

这与 Visual Studios （警告和东西）具有相同的输出，但没有 ptxas 信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T17:09:51.407

您没有看到任何详细输出的原因`--ptxas-options=-v`是 ptxas 没有编译任何东西。

在您的 nvcc 调用中：

```
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe"

...

-arch compute_10 -code compute_10

... 
```

您将您的`-code`选项指定为`-code compute_10`，它只包括 PTX 架构而不是*真正的* `sm_*`架构。这意味着没有 PTX 代码被编译成二进制代码`ptxas`；PTX 代码按原样包含在输出中，稍后将进行 JIT 编译。

要查看 ptxas 信息，请尝试将您的`-code`选项更改为`-code compute_10,sm_10`。

因此，在您的情况下，您的 nvcc 调用将是：

```
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -ccbin      "c:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include" -I"C:\Documents and Settings\All Users\Application Data\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\common\inc" -O0 -arch compute_10 -code compute_10,sm_10 --host-compilation C++ -c -m 64 -o "x64\Release\CUDA_Dissertation.obj" -odir "x64\Release" -ext none -int real --ptxas-options="-v" "c:\Documents and Settings\shubham\My Documents\Visual Studio 2008\Projects\MTP\CUDA_Dissertation\CUDA_Dissertation.vcproj" 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T13:46:38.387

我刚刚看到这样的错误，使用工具包 4.0 可以提供正确的输出，而使用 5.0 则没有。我将该命令行选项从全局项目设置移至 .cu 文件的属性，它开始工作。视觉工作室 2005。

# php - 如何在 Smarty 中集成 HTML

> ID：14730032
> 
> 赞同：-2
> 
> 时间：2013-02-06T13:16:27.067
> 
> 标签：php, smarty

有谁知道如何在 Smarty 模板中集成 HTML/CSS？我是 Smarty 模板引擎的新手。请提出建议，因为这里需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:06:54.623

首先，您必须上传“libs”文件夹。

接下来，您必须构建您的 index.php：

```
require('libs/Smarty.class.php');
$smarty = new Smarty();

$smarty->setTemplateDir('templates');
$smarty->setCompileDir('templates_c');
$smarty->setCacheDir('cache');
$smarty->setConfigDir('configs');
$template="home.tpl";
$smarty->display($template); 
```

现在，您必须创建几个目录。从创建这些目录开始：

```
templates
templates_c
cache
configs 
```

完成所有这些之后，您就可以制作模板了。这将被保存到“模板”目录中。给它命名`home.tpl` 你的模板就像普通的 HTML 一样：

```
<!DOCTYPE html>
<html>
<head>
<style>
* {
 margin: 0;
 padding: 0;
}
</style>
</head>
<body>

<h1>My First Heading</h1>

<p>My first paragraph.</p>

</body>
</html> 
```

现在，点击您的索引页面。它应该像您期望的那样显示您的模板。

# javascript - 带有 jQ uery 掩码的智能输入

> ID：14730035
> 
> 赞同：0
> 
> 时间：2013-02-06T13:16:34.527
> 
> 标签：javascript, jquery, jquery-mask

我想使用 jQuery 掩码插件为电话号码创建一个智能输入字段。

如果焦点在输入中并且索引 #4 值 = 91 输入，则显示

```
$("#phone").mask("+97(912)1234567"); 
```

如果 0912 回到 912 并实时从掩码中删除 0

我的代码：

```
var smart_input = setInterval(function () {
    var phone = $('#phone').val();
    var phone_element = $('#phone');

    if (phone.indexOf('09') == 0 && phone.length != 0) {

        var prefix = phone.substring(1);

        $('#phone').mask('(999) 999 9999');
        phone_element.val(prefix);
    } else if (phone.indexOf('91') == 0 && phone.length != 0) {

        var prefix = phone.substring(1);
        $('#phone').mask('(999) 999 9999');
        phone_element.val(prefix);

    }

}, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:26:46.057

在相同的情况下，我[将此](http://www.smartwebby.com/DHTML/phone_no_validation_reg.asp#explanation)作为参考。请试试

# spring - 了解 mvc:annotation-driven 的初始化时间行为

> ID：14730036
> 
> 赞同：2
> 
> 时间：2013-02-06T13:16:40.577
> 
> 标签：spring, spring-mvc

我正在尝试调试`RequestMappingHandlerAdapter`初始化问题，我通过在 Web 上搜索它正在从`mvc:annotation-driven`xml 条目进行初始化得出了一个结论。谁能简要解释一下，这个初始化是如何工作的，即解析器解析时会发生什么`mvc:annotation-driven`？或者将我指向执行此操作的代码，我将对其进行跟踪。

关于此的更多上下文：

我试图通过 autowire 从上下文中获取 RequestMappingHandlerAdapter 但不能。它给了我：

```
No matching bean of type [org.springframework.web.servlet.mvc.method.annotation.RequestMappingH
andlerAdapter]
expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

找到这个线程，但解决方案不起作用：[Spring、Jackson 和自定义（例如 CustomDeserializer）](https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer/11805794#11805794)

我正在使用：Spring 3.1.3

这就是我的 servlet xml 文件的样子...

```
<context:annotation-config />
<context:component-scan base-package="com.xyz" />
<mvc:annotation-driven /> 
```

谢谢， 帕思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:58:31.877

我认为这会导致[AnnotationConfigApplicationContext](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/context/annotation/AnnotationConfigApplicationContext.html)或[AnnotationConfigWebApplicationContext](http://static.springsource.org/spring/docs/3.0.6.RELEASE/api/org/springframework/web/context/support/AnnotationConfigWebApplicationContext.html)搜索带注释的类并创建/绘制它们。解决问题的一种方法是创建一个在其默认构造函数中抛出 RuntimeException 的 bean，并查看堆栈跟踪的样子。

# java - 将模型类添加到通用列表会引发错误

> ID：14730038
> 
> 赞同：0
> 
> 时间：2013-02-06T13:16:42.087
> 
> 标签：java, android, generics

我是 Android 开发的新手，无法在这里解决问题。我创建了一个名为 video 的空白类，具有两个属性名称和 url：

```
public class Video {
    public String _name;
    public String _Url;

    public Video(String name, String Url)
    {
        _name = name;
        _Url = Url;
    }
    public String getName()
    {
       return _name;
    }
    public String getUrl()
    {
       return _Url;
    }

} 
```

然后，我有一个通用列表，用于在调用 VideosListActivity 的活动中添加视频，当我将视频添加到列表时会引发错误：

```
public List<Video> ListResult;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Update view

        setContentView(R.layout.videos);

        setTitle("VIDEOS");

        //--videos created here
        Video NewVideo = new Video("video one","http://www.youtube.com/watch?v=cxLG2wtE7TM");

        ListResult.add(NewVideo);

        Log.v("VideoList", "Opened list"); 
```

这个错误是抛出的：

```
02-06 13:10:05.660: E/AndroidRuntime(23432): FATAL EXCEPTION: main
02-06 13:10:05.660: E/AndroidRuntime(23432): java.lang.RuntimeException: Unable to start activity ComponentInfo{uk.co.mosquitodigital.panic/uk.co.mosquitodigital.panic.VideoListActivity}: java.lang.NullPointerException
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2225)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2260)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.os.Looper.loop(Looper.java:156)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread.main(ActivityThread.java:5045)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at java.lang.reflect.Method.invokeNative(Native Method)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at java.lang.reflect.Method.invoke(Method.java:511)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at dalvik.system.NativeStart.main(Native Method)
02-06 13:10:05.660: E/AndroidRuntime(23432): Caused by: java.lang.NullPointerException
02-06 13:10:05.660: E/AndroidRuntime(23432):    at uk.co.mosquitodigital.panic.VideoListActivity.onCreate(VideoListActivity.java:31)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.Activity.performCreate(Activity.java:4543)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
02-06 13:10:05.660: E/AndroidRuntime(23432):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2181)
02-06 13:10:05.660: E/AndroidRuntime(23432):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:19:03.670

您需要`ListResult`在将元素添加到列表之前对其进行初始化：

```
public List<Video> ListResult;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //Update view

        setContentView(R.layout.videos);

        ListResult= new ArrayList<Video>();  //<< initialize List here 
```

# iphone - 在 iPhone 构建期间复制不存在的资源

> ID：14730041
> 
> 赞同：0
> 
> 时间：2013-02-06T13:16:47.993
> 
> 标签：iphone, ios, objective-c

在我的 iPhone 应用程序开发的某一时刻，我有 2 个相当大的视频文件作为应用程序中使用的资源。经过一些测试，我决定不再想要它们了。所以我从 xcode 的资源文件夹中删除了这两个 - 我选择了“删除和删除选定的引用”。当我尝试在我的 iPhone 或 iPad 上构建时，它仍然显示“将文件 opening.mov 复制到 iPhone”。它占用了构建空间。

怎么了？我删除了计算机上所有对文件的所有引用，但它仍将文件复制到我的 iDevices 上。

我在finder中检查了xcode项目文件夹，它不存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:05:53.087

您可以转到 Project->Build Phases->Copy Bundle Resources，这些文件可能仍然存在，如果存在则删除它们。

此外，按照建议对产品进行清洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:33:15.660

转到 /Users/your user/Library/Application Support/iPhone Simulator/your version/Applications 并删除您的应用程序的文件夹。

提示：库可能是一个隐藏文件夹。如果您没有看到它，请使用修补工具使文件夹可见。

删除测试设备上的应用。

在 xcode 中转到 Build Phases 并检查您的文件是否被复制到捆绑资源中。如果是 - 从那里删除它。

清理你的构建运行。

# windows - Windows 7 无线服务未按预期工作

> ID：14730045
> 
> 赞同：2
> 
> 时间：2013-02-06T13:16:54.397
> 
> 标签：windows, internet-explorer, windows-7, wireless, mdns

我有一个问题，我希望你们能帮助我解决...

我使用我们为 IE 创建的插件...它检测网络上的设备...设备是我们自己创建的...现在这个插件可以正常工作并在与我们的以太网连接时检测设备XP 和 Windows 7 中的子网...当它通过 Windows XP 中的子网无线连接时，它会检测设备...但是当我通过 Windows 7 将它与我的无线子网连接时，它会停止发现设备...那一刻我启用了我的 LAN，它再次检测到设备......它在这部分的行为非常奇怪，我不能确定 Windows 7 对此负责，但必须考虑......似乎有无线安全影响它但是现在没有关闭这样的证据......

我不完全了解插件代码，但它通过网络使用 mDNSresponder 服务......

我使用 Windows 7 64 位操作系统和 Internet Explorer 9... 已在 Windows 7 32 位和 IE 版本 8 和 9 上进行了测试，结果相同... Windows 防火墙已打开/关闭为好...

抱歉，如果我发错了帖子，请原谅我的任何不一致之处...感谢您的帮助...谢谢...

**EDIT-1：**该插件是用 C++ 构建的，我也可以给你它的代码，但关键是它不涉及这里......这似乎是 Windows 7 中无线的问题......我使用 Wireshark 通过网络嗅探数据包，发现在有线网络中运行时，我可以看到通过 MDNS 协议的请求和响应......但是当我切换到无线网络时，没有通过 MDNS 的请求或响应，因此没有仅通过网络发送的查询...好像当我连接到无线网络时，某些东西阻止了插件查询网络...如果可能，请帮助我...非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:02:06.870

好的，问题解决了......问题是我的程序无法找到 IEEE 802.11 无线网络接口......自从 Vista 出现以来，Windows 已经改变了一些它的架构，而我的程序是在那之前几年制作的...

在 Vista 之前，以太网和 IEEE 无线的网络适配器类型值相同，即**6**，称为**MIB_IF_TYPE_ETHERNET** ...但现在它们都已区分，IEEE 无线适配器获得一个名为**IF_TYPE_IEEE80211的新值****71** ...在我们的代码中，我们有一个验证来拒绝**MIB_IF_TYPE_ETHERNET**以外的网络适配器，因此它曾经与 XP 一起使用，但 Windows 7 有其他计划......为**IF_TYPE_IEEE80211**添加另一个验证解决了这个问题。

 ******您可以查看以下链接以获得更清晰的信息，如果您有任何疑问，请告诉我... [http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062%28v= vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062%28v=vs.85%29.aspx)

干杯...******

# python - Python 的任何/全部的短路行为是显式的吗？

> ID：14730046
> 
> 赞同：51
> 
> 时间：2013-02-06T13:16:57.397
> 
> 标签：python, short-circuiting, language-specifications

[由此处](https://stackoverflow.com/a/14721700/174728)的讨论提示

[文档](http://docs.python.org/2/library/functions.html#all)[`all`](http://docs.python.org/2/library/functions.html#all)为和的行为提出了一些等效的代码[`any`](http://docs.python.org/2/library/functions.html#any)

等效代码的行为是否应该被视为定义的一部分，或者实现可以以非短路方式实现它们？

这是来自 cpython/Lib/test/test_builtin.py 的相关摘录

```
def test_all(self):
    self.assertEqual(all([2, 4, 6]), True)
    self.assertEqual(all([2, None, 6]), False)
    self.assertRaises(RuntimeError, all, [2, TestFailingBool(), 6])
    self.assertRaises(RuntimeError, all, TestFailingIter())
    self.assertRaises(TypeError, all, 10)               # Non-iterable
    self.assertRaises(TypeError, all)                   # No args
    self.assertRaises(TypeError, all, [2, 4, 6], [])    # Too many args
    self.assertEqual(all([]), True)                     # Empty iterator
    S = [50, 60]
    self.assertEqual(all(x > 42 for x in S), True)
    S = [50, 40, 60]
    self.assertEqual(all(x > 42 for x in S), False)

def test_any(self):
    self.assertEqual(any([None, None, None]), False)
    self.assertEqual(any([None, 4, None]), True)
    self.assertRaises(RuntimeError, any, [None, TestFailingBool(), 6])
    self.assertRaises(RuntimeError, all, TestFailingIter())
    self.assertRaises(TypeError, any, 10)               # Non-iterable
    self.assertRaises(TypeError, any)                   # No args
    self.assertRaises(TypeError, any, [2, 4, 6], [])    # Too many args
    self.assertEqual(any([]), False)                    # Empty iterator
    S = [40, 60, 30]
    self.assertEqual(any(x > 42 for x in S), True)
    S = [10, 20, 30]
    self.assertEqual(any(x > 42 for x in S), False) 
```

它不会做任何事情来强制执行短路行为

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-14T01:29:39.380

**行为是有保证的**。我提供了一个[补丁](http://bugs.python.org/file29131/mywork.patch)，它最近被接受并[合并](http://bugs.python.org/issue17255)，所以如果你获取最新的资源，你会看到短路行为现在被明确地强制执行。

```
git clone https://github.com/python/cpython.git
grep Short-circuit cpython/Lib/test/test_builtin.py 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-06T13:28:41.233

文档说

> “如果可迭代的任何元素为真，则返回 True。如果可迭代为空，则返回 False。**等效于：** ”（强调我的）...

```
def any(iterable):
    for element in iterable:
        if element:
            return True
    return False 
```

如果`any`没有短路，则与发布的代码不**等效**，因为发布的代码明显短路。例如，您可能会消耗比您想要的更多的发电机。鉴于此，我说**短路行为是有保证的**。

可以对 进行完全相同的论证`all`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-12-03T19:48:38.873

万一你登陆这里寻找“做任何/所有*总是*短路？”

他们确实这样做了，但有一个问题：使用列表推导可能会让您*看起来*像是在覆盖短路行为：

```
def hi():
    print('hi')
    return True

>>> any(hi() for num in [1, 2, 3, 4])
hi

>>> any([hi() for num in [1, 2, 3, 4]])
hi
hi
hi
hi 
```

列表推导在 any() 之前执行。

（注意：这并不能回答 OP 非常不同的问题。这是我在搜索“任何全短路 python”时出现的唯一 stackoverflow 页面。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T13:39:55.090

它必须短路，因为它可以被赋予一个未绑定的迭代。如果它没有短路，那么这将永远不会终止：

```
any(x == 10 for x in itertools.count()) 
```

# php - Jquery中带有Ajax的下拉框？

> ID：14730048
> 
> 赞同：-3
> 
> 时间：2013-02-06T13:17:14.357
> 
> 标签：php, javascript, jquery, ajax

任何人都可以建议我如何在 Jquery 中做 Ajax

在这里，我的代码类似于带有 b.tech b.sc 的下拉框，如果我单击 b.tech 第二个下拉框应该激活并且它应该包含 eee ece 它。任何人都可以建议我的代码

这是HTML代码

```
 <select id="coursename" name="coursename" onchange="loadSpec(this.value)" >  
         <option value="-1">Select One</option> 
         <option value="1">B.Sc</option>
         <option value="2">B.Com</option>
         <option value="3">B.Tech</option>
    </select>

   <select id="specialized" name="specialized" ></select>
</body>
</html> 
```

请给我建议…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:40:53.823

你可以这样做

```
<select id="coursename" name="coursename" onchange="loadSpec()">  
     <option value="-1">Select One</option> 
     <option value="1">B.Sc</option>
     <option value="2">B.Com</option>
     <option value="3">B.Tech</option>
</select>
<div id="div1">
   <select id="1" name="coursename" style="display:none;">  
     <option value="-1">Select One</option> 
     <option value="1">aaa</option>
     <option value="2">bbb</option>
     <option value="3">ccc</option>
</select>
   <select id="2" name="coursename" style="display:none;">  
     <option value="-1">Select One</option> 
     <option value="1">ddd</option>
     <option value="2">eee</option>
     <option value="3">fff</option>
</select>
</div> 
```

和脚本是这样的

```
function loadSpec() {
     var val = $('#coursename').val();
     $('#coursename').val();
     $('#div1 select').hide();
     $('#' + val + '').css('display', 'block');
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:58:37.897

尝试使用淘汰赛 JS。它用于使用 ajax、jquery 和 HTML 制作动态网站。

```
http://knockoutjs.com/ 
```

该网站有据可查，您可以在整个互联网上找到示例。希望对你有帮助

# version-control - 自动转换编码约定

> ID：14730049
> 
> 赞同：0
> 
> 时间：2013-02-06T13:17:15.823
> 
> 标签：version-control, coding-style, conventions

在处理不同的项目、与不同的人并使用不同的框架时，您通常很难使您的代码符合他们的约定。一些团队对命名变量/方法/类和其他事情非常严格，而其他团队则围绕该主题进行圣战。我理解他们，我完全支持，但作为任何开发人员，我有自己的偏好，我希望我能舒适地编码。这让我思考是否有一个简单的解决方案。

是否有任何工具或编辑器可以自动转换代码以遵循不同的标准？我想不可能有这样的智能工具来支持命名转换，所以我可以接受，但我真的希望看到

```
foreach($lala as $lalala) { 
```

并不是

```
foreach($lala as $lalala)
{ 
```

语句也是如此：

```
if(I_LIEK_COOKIES) {
    eat_cookie();
} else {
    toss_cookie();
} 
```

并不是

```
if ( I_LIEK_COOKIES ) {
    eat_cookie();
}
else
{
    toss_cookie();
} 
```

（注意括号之间和周围的空格）

我什至不会提及空格/制表符，我可以在我的 IDE 中使用快捷方式对其进行转换，但它会很棒。

所以我想要定制的东西是

1.  括号之间的空格
2.  制表符/空格和每个制表符的空格
3.  行尾或新行上的小胡子括号
4.  始终将胡须括号附加到任何 if/ifelse/else/for/foreach 等。

任何人都会欣赏的一些额外内容：

1.  [行尾样式](http://en.wikipedia.org/wiki/Newline)
2.  删除行尾的多余空格（如 sublime text 2 可以在保存时执行，但对于其他 IDE/编辑器来说会很棒）

完美的工作流程应该是这样的：

1.  我从 git 拉
2.  代码转换为我的风格
3.  我编码的东西
4.  我承诺并推动
5.  在一切都被推送（甚至提交）之前，代码被转换为约定风格

当然，有人可能希望不使用 git，然后在打开和保存文件后将其简单地转换，但据我所知，在 IDE/编辑器之外使用某种工具是不可能的。

有人偶然发现了类似的东西吗？除了制表符/空格转换之外，在任何地方都找不到任何东西。

PS 我想提一下我正在使用 PHP/JS，所以它被优先考虑，但我在业余时间使用其他语言进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:20:40.877

您可以在每个项目的版本控制存储库中存储配置（例如 vim .vimrcs、Eclipse 首选项等）。

*但是*，我认为有一个大问题。在向/从存储库推/拉时转换代码。如果有人报告您的代码存在问题（例如，第 100 行的异常），从存储库中提取代码时转换代码将为您提供不同的第 100 行。我认为如果不处理确切的代码，您实际上无法操作您的同胞正在与之合作。

# javascript - 坐标限制

> ID：14730053
> 
> 赞同：1
> 
> 时间：2013-02-06T13:17:32.300
> 
> 标签：javascript, d3.js, coordinates, draggable

所以，我在这里提出另一个问题：我在 D3 中建立了一个网络。它的节点都是不固定的，只有一个。所有未固定的都可以拖动到任何你想要的地方，但在 svg.xml 中。为了提供这一点，我在脚本末尾测试了新坐标。但是，如果我移动固定节点，则所有其他节点都会与这个节点一起拖动。我的问题是，节点似乎获得了相对于父对象的坐标，在这种情况下，它是提供组拖动的 g-Elements。所以拖了之后他们还是有限制的，但是他们是和组一起移动的。欢迎提供任何有用的提示:) 以下是我的部分代码：

```
var node = group.selectAll(".node")
    .data(reqNodes)                                             
 .enter().append("g")                                   
    .attr("transform", function(d) { return "translate(0,0)"; })
    .attr("class", function(d) {
       return d.fixed ? 'node fixed' : 'node not-fixed';
     })

var CurrentGTransformX = 0;
var CurrentGTransformY = 0;

group.selectAll('.not-fixed')
  .call(force.drag);

  // attach a different drag handler to the fixed node
var groupDrag = d3.behavior.drag()
  .on("drag", function(d) {
    // mouse pos offset by starting node pos
    var x = window.event.clientX - 420,
    y = window.event.clientY - 260;
    group.attr("transform", function(d) { return "translate(" + x + "," + y + ")"; });    
              //that was the line getting in conflict with the part in the end
    CurrentGTransformX = x;
    CurrentGTransformY = y;
  });

group.call(groupDrag);

force.on("tick", function() {
   node.attr("cx", function(d) { return d.x = Math.max(15, Math.min(width - 15, d.x)); })
       .attr("cy", function(d) { return d.y = Math.max(15, Math.min(height - 15, d.y)); });

  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
}); 
```

编辑：组的转换是限制最终获得其他数据而不是显示的原因。知道如何以正确的方式服务这两个功能吗？

# ios - pressGestureRecognizer and touchesBegan

> ID：14730056
> 
> 赞同：3
> 
> 时间：2013-02-06T13:17:49.517
> 
> 标签：ios, cocoa-touch, cocoa, touchesbegan

我有以下问题。我正在使用 a`UILongPressGestureRecognizer`将 UIView 置于“切换模式”。如果`UIView`处于“切换模式”，则用户可以在屏幕上拖动 UIView。为了在屏幕上拖动 UIView，我使用了方法`touchesBegan`，`touchesMoved`和`touchesEnded`。

它有效，但是：我必须抬起手指才能拖动它，因为该`touchesBegan`方法已被调用，因此不会再次调用，因此我无法`UIView`在屏幕周围拖动。

有什么方法可以在触发`touchesBegan`后手动调用（更改 BOOL 值，并且只有在此 BOOL 设置为 YES 时才有效）。`UILongPressGestureRecognizer``UILongPressGestureRecognizer``touchesBegan`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T13:42:51.837

`UILongPressGestureRecognizer`是一个连续的手势识别器，所以不要使用`touchesMoved`or `UIPanGestureRecognizer`，只需检查`UIGestureRecognizerStateChanged`，例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UILongPressGestureRecognizer *gesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    [self.view addGestureRecognizer:gesture];
}

- (void)handleGesture:(UILongPressGestureRecognizer *)gesture
{
    CGPoint location = [gesture locationInView:gesture.view];

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        // user held down their finger on the screen

        // gesture started, entering the "toggle mode"
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        // user did not lift finger, but now proceeded to move finger

        // do here whatever you wanted to do in the touchesMoved
    }
    else if (gesture.state == UIGestureRecognizerStateEnded)
    {
        // user lifted their finger

        // all done, leaving the "toggle mode"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:38:44.463

我建议您使用 UIPanGestureRecognizer 作为推荐的拖动手势。

1.  您可以配置最小值。和最大。平移所需的触摸次数，使用以下属性：

    **最大接触次数**

    **最少接触次数**

2.  您可以处理 Began、Changed 和 Ended 等状态，例如为所需状态设置动画。

3.  使用以下方法将点转换为您想要的 UIView。

    `- (void)setTranslation:(CGPoint)translation inView:(UIView *)view`

    例子：

    1.  您必须使用全局变量来保留旧框架。在 UIGestureRecognizerStateBegan 中获取它。

    2.  当状态为 UIGestureRecognizerStateChanged 时。您可以使用

    > ```
    > -(void) pannningMyView:(UIPanGestureRecognizer*) panGesture{
    > 
    >    if(panGesture.state==UIGestureRecognizerStateBegan){
    >      //retain the original state
    >    }else if(panGesture.state==UIGestureRecognizerStateChanged){
    >    CGPoint translatedPoint=[panGesture translationInView:self.view];
    >   //here you manage to get your new drag points.
    >   }
    >  } 
    > ```

4.  阻力的速度。根据速度，您可以提供动画来显示 UIView 的弹跳

    `- (CGPoint)velocityInView:(UIView *)view`

# javascript - 重新排序 JSON 集合

> ID：14730072
> 
> 赞同：0
> 
> 时间：2013-02-06T13:18:40.910
> 
> 标签：javascript, json, web-applications, underscore.js

我从我的服务器获取了一个 JSON 数组，如下所示：

```
 [ {name: "Web Design", id: "27", month_n: "1", data: "68.00"},
     {name: "Web Design", id: "27", month_n: "2", data: "56.00"} ,
     {name: "Homework", id: "4", month_n: "2", data: "15.00"} ,
     {name: "Gaming", id: "12", month_n: "2", data: "5.00"} ] 
```

在客户端，我想重新排序以具有类似于：

```
 [{name: "Web Design", data:[68.00,56.00]}, {name:"Homework", data:[0,15]} and so on... 
```

其中“数据”值按“id”编号和月份编号分组（如果没有匹配的月份，则默认为 0）。

最好的方法是什么？我尝试了纯 JavaScript 方式，但我遇到了困难！我也听说下划线 JS 更容易。但不知道从哪里开始。

有人请赐教吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T23:50:00.260

这可以通过两个操作来完成：

1.  Groupby [ *name* ] 字段，然后
2.  采摘 [*数据*] 字段

有纯 JS 数组原型扩展库可以用几行代码来实现这个和许多其他操作。你可以看看 underscore.js。我还写了一个简单的 JS 库[jsList](https://github.com/tadessetdk/jsList)。它带有许多单元测试以用作示例。

您只需要编写以下几行：

```
var arr = [ {name: "Web Design", id: "27", month_n: "1", data: "68.00"},
            {name: "Web Design", id: "27", month_n: "2", data: "56.00"} ,
            {name: "Homework", id: "4", month_n: "2", data: "15.00"} ,
            {name: "Gaming", id: "12", month_n: "2", data: "5.00"} ];

var temp = arr.groupBy(function(item){ return item.name });

var result = [];
for(var key in temp){
    result.push({name: key, data: temp[key].pluck('data')});
} 
```

您可以使用 Object.keys 来避免 for 循环，但它仅适用于 Javascript 1.8.5 或更高版本。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:23:34.070

在 vanilla JavaScript 中执行此操作的一种方法是使用帮助对象，如下面的代码所示。

第一步，我们识别所有不同的`name`值并按`data`它们对所有字段进行分组。在第二步中，辅助对象被转换回数组。

```
var arr =  [ {name: "Web Design", id: "27", month_n: "1", data: "68.00"},
     {name: "Web Design", id: "27", month_n: "2", data: "56.00"} ,
     {name: "Homework", id: "4", month_n: "2", data: "15.00"} ,
     {name: "Gaming", id: "12", month_n: "2", data: "5.00"} ];

// use a helper object to identify all distinct "names"
var helper = {};
for( var i=arr.length; i--; ) {
  // init an array, if it is not there
  helper[ arr[i]['name'] ] = helper[ arr[i]['name'] ] || [];

  // add the newest element
  helper[ arr[i]['name'] ].push( helper[ arr[i]['data'] ] );
}

// convert back to an array
var newArr = [];
for( var key in helper ) {
 if( helper.hasOwnProperty( key ) ) {
   newArr.push( { 'name': key, 'data': helper[key] } );
 }
} 
```

# php - 如何向应用程序添加全局常量？

> ID：14730076
> 
> 赞同：0
> 
> 时间：2013-02-06T13:18:46.823
> 
> 标签：php, yii

我想添加一个应用程序常量，例如`YII_DEBUG`. 我发现它应该在 YiiBase 类中定义。但我不知道这样做的最佳方法是什么。

这就是 Yii 文档所说的

> Yii 是一个服务于通用框架功能的辅助类。
> 
> 它封装了提供实际实现的 YiiBase。通过编写自己的 Yii 类，您可以自定义 YiiBase 的一些功能。

我应该如何编写自己的 Yii 类，我应该把它放在哪里，我应该在哪里调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:27:08.277

您可以在相当多的地方定义全局常量，以便在请求处理期间自动定义它们；选择取决于什么是最有意义的。您的选择包括：

1.  入口`index.php` [脚本](http://www.yiiframework.com/doc/guide/1.1/en/basics.entry)——常量将在整个应用程序中可用。
2.  [配置文件](http://www.yiiframework.com/doc/guide/1.1/en/basics.application#application-configuration)，在您编写之前——常量将在您的`return array(...)`整个应用程序中可用，但在调用[`Yii::createApplication`](http://www.yiiframework.com/doc/api/1.1/YiiBase#createApplication-detail)（或等效的）之前不能使用。`createWebApplication`
3.  应用程序类定义本身（其中它们也可以是[类常量](http://php.net/manual/en/language.oop5.constants.php)而不是全局常量）。`createApplication`同样，这些常量只有在入口脚本中被调用后才能使用。

如果你想定义一个普遍适用的常量，`YII_DEBUG`你应该像 Yii 那样做，然后选择选项 #1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:26:32.133

这取决于你想用这个类做什么来确定它的最佳实践。最简单的方法是在vendors 文件夹中设置新的类文件并将其命名为myclass.php。然后，您需要确保在您的 config/main.php 文件中选择 vendor 文件夹，如下所示：

```
Yii::import('application.vendors.*');
require_once('myclass.php'); 
```

最后，您应该能够从应用程序中的几乎任何地方调用您的新类，如下所示：

```
$myclass = new myclass();
$myclass->thisMethod(); 
```

当然，还有其他方法可以做到这一点。根据您希望自定义类执行的操作，您可能会更好地使用不同的方法，但这种方式肯定会让您快速启动并运行。

# javascript - 如何知道对象的补间在 createjs 中完成

> ID：14730078
> 
> 赞同：0
> 
> 时间：2013-02-06T13:18:47.937
> 
> 标签：javascript, html, flash

我正在使用 createjs 将 flash 转换为 html5 文件；在我们的闪光灯中，我们有 5 个场景。完成一个场景后，我们必须加载另一个场景。

对于每个场景，我们都有一个 js 文件。对于第一个场景，我正在加载第一个 js 文件；对于第二个场景，我必须加载第二个 js 文件。我无法知道第一个何时完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T02:48:58.843

你不能在补间完成时调用一个函数吗？

```
var tween = new cretejs.Tween();
tween.get( target).to({x: some_x}).call( onTweenComplete);

function onTweenComplete(){

//Tween is done
} 
```

# wmi - 用于 Hyper-V 网络管理的 WMI 方法在 Windows 2012 上失败

> ID：14730080
> 
> 赞同：0
> 
> 时间：2013-02-06T13:18:58.470
> 
> 标签：wmi, hyper-v

我一直在尝试使用 WMI 类（使用 C++）来管理 Hyperv 中的虚拟交换机，例如创建、删除、将虚拟网络附加到 VM 等。我能够在 Windows 2008 R2 上完美地完成所有操作。但它们都不能在 Windows 2012 上正常工作。

例如，当我创建一个外部网络时，我在 Msvm_VirtualSwitchManagementService 类的对象上调用了一个名为 CreateSwitchPort 的方法。它在 2k8R2 上工作，但失败，参数返回值为 32768，这意味着失败。谁能指出为什么该方法会返回错误？如何调试问题？有没有我应该给予的权限。非常感谢这方面的任何帮助。

——罗摩克里希纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:30:01.420

Hyper-V 2012 支持以前的 WMI API，我已经成功使用了。Hyper-V 2012 引入了 v2 API，但这与您无关。

CreateSwitchPort 是一个非常简单的调用。这是一个非常易读的 Python 示例。Python 调用返回一个添加了 [out] 参数的元组。

```
 #Create a port on the vswitch.
    (new_port, ret_val) = switch_svc.CreateSwitchPort(
                                        Name=str(uuid.uuid4()),
                                        FriendlyName=vm_name,
                                        ScopeOfResidence="",
                                        VirtualSwitch=extswitch.path_()) 
```

检查 VirtualSwitch 参数是否有效。我使用如下所示的 WMI 查询来获取此对象。如果 VirtualSwitch 未连接到外部 NIC，则会失败。你的查询成功了吗？

```
 return self._conn.Msvm_ExternalEthernetPort(IsBound='TRUE')[0]\
        .associators(wmi_result_class='Msvm_SwitchLANEndpoint')[0]\
        .associators(wmi_result_class='Msvm_SwitchPort')[0]\
        .associators(wmi_result_class='Msvm_VirtualSwitch')[0] 
```

接下来，查看名称 Name 参数是否需要唯一。如果您使用静态名称，则调用可能会因命名冲突而失败。

如果这些都没有帮助，则开始实时检查 Hyper-V WMI 对象。您可以使用 Python 和[Tim Golden 为 Python 编写的 WMI 绑定](http://pypi.python.org/pypi/WMI/)。

# powershell - 通过 PowerShell 实现 Visio 自动化

> ID：14730083
> 
> 赞同：2
> 
> 时间：2013-02-06T13:19:07.337
> 
> 标签：powershell, visio

我有一个自动化 Visio 图表的脚本，我的脚本基于 Office 官方网站： http: [//gallery.technet.microsoft.com/office/f77fb025-11ee-48f3-8409-9bb567a63fc3](http://gallery.technet.microsoft.com/office/f77fb025-11ee-48f3-8409-9bb567a63fc3)

老实说，我不知道如何从 pc 模板中检索“形状数据”的值，例如（序列号、建筑物、位置等）。我想以编程方式添加和修改这些值，我检查了对象模型参考但没有运气。

有人能帮我吗？

这是代码，它打开一个 visio 文档并在绘图中添加一个 pc 模具。

```
$application = New-Object -ComObject Visio.Application
$application.visible = $true
$documents = $application.Documents
$document = $documents.Add("Basic Network Diagram.vst")
$pages = $application.ActiveDocument.Pages
$page = $pages.Item(1)

$ComputerStencil = $application.Documents.Add("Computers and Monitors.vss")

$pc = $ComputerStencil.Masters.Item("PC")
$shape1 = $page.Drop($pc, 2.2, 6.8)
$shape1.Text = "Some text...." 
```

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:01:58.790

[Visio 自动化库](https://github.com/saveenr/VisioAutomation)可以帮助您：

这是一个如何在 C# 中使用它的示例。在 PowerShell 中使用它应该不难。

```
var app = new IVisio.Application();
var doc = app.Documents.Add("");
var page = doc.Pages[1];
var shape1 = page.DrawRectangle(1, 1, 3, 4);
VisioAutomation.CustomProperties.CustomPropertyHelper.Set(shape1,"Hello","World");
var props = VisioAutomation.CustomProperties.CustomPropertyHelper.Get(shape1); 
```

使用[Visio PowerShell 模块](https://github.com/saveenr/VisioPowerShell)，代码将如下所示：

```
Set-StrictMode -Version 2
$ErrorActionPreference = "Stop"

Import-Module Visio

$app= New-VisioApplication
$doc = New-VisioDocument
$stencil_net = Open-VisioDocument "Basic Network Diagram.vst"
$stencil_comp = Open-VisioDocument "Computers and Monitors.vss"

$pc_master = Get-VisioMaster "PC" $stencil_comp 
$shapes = New-VisioShape -Masters $pc_master -Points 2.2,6.8
Set-VisioText "Some Text..."
Set-VisioCustomProperty -Name "prop1" -Value "val1"
Set-VisioCustomProperty -Name "prop2" -Value "val2"

$shapedata_col = Get-VisioCustomProperty -Shapes $shapes 
foreach ($shapedata in $shapedata_col)
{
    Write-Host "--------------------------------------"
    Write-Host Name $shapedata.Name
    Write-Host Type $shapedata.Type
    Write-Host Value $shapedata.Value
    Write-Host Prompt $shapedata.Prompt
    Write-Host Ask $shapedata.Ask
    Write-Host Calendar $shapedata.Calendar
    Write-Host Format $shapedata.Format
    Write-Host Invisible $shapedata.Invisible
    Write-Host Label $shapedata.Label
    Write-Host LangId $shapedata.LangId
    Write-Host ShapeID $shapedata.ShapeID
    Write-Host SortKey $shapedata.SortKey
} 
```

在底部，您可以看到如何设置和检索形状数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T16:31:50.760

您还可以将绘图导出为 html，然后解析生成的 data.xml。

# wpf - 在列之间单击以固定大小，消除了我的大小设置 - WPF DataGrid

> ID：14730090
> 
> 赞同：0
> 
> 时间：2013-02-06T13:19:28.670
> 
> 标签：wpf, datagrid

我在 DataGrid 中通过以下方式定义了列的大小：

```
<DataGrid x:Name="DG" ItemsSource="{Binding X}" AutoGenerateColumns="False" ColumnWidth="*"> 
```

这工作**正常**，直到**我在两列之间按下**以查看特定列的全部内容的那一刻，然后他不知道我对该列的定义，并**通过其内容增加了超出必要的列。**

为什么会发生这种情况以及如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:17:20.063

您可以通过使用此站点的样式来防止这种情况：http: [//msdn.microsoft.com/en-us/library/ff506248.aspx](http://msdn.microsoft.com/en-us/library/ff506248.aspx)并从中删除：`PART_LeftHeaderGripper`和`PART_RightHeaderGripper`。

```
<Window.Resources>
...
<!--Style and template for the DataGridColumnHeader.-->
<Style TargetType="{x:Type DataGridColumnHeader}">
<Setter Property="VerticalContentAlignment"
Value="Center" />
<Setter Property="Template">
<Setter.Value>
    <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
        <Grid>
            <Border x:Name="columnHeaderBorder"
  BorderThickness="1"
  Padding="3,0,3,0">
                <Border.BorderBrush>
                    <LinearGradientBrush EndPoint="0.5,1"
                   StartPoint="0.5,0">
                        <GradientStop Color="{DynamicResource BorderLightColor}"
              Offset="0" />
                        <GradientStop Color="{DynamicResource BorderDarkColor}"
              Offset="1" />
                    </LinearGradientBrush>
                </Border.BorderBrush>
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1"
                   StartPoint="0.5,0">
                        <GradientStop Color="{DynamicResource ControlLightColor}"
              Offset="0" />
                        <GradientStop Color="{DynamicResource ControlMediumColor}"
              Offset="1" />
                    </LinearGradientBrush>
                </Border.Background>
                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
              VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
            </Border>

            <!--<Thumb x:Name="PART_LeftHeaderGripper"
 HorizontalAlignment="Left"
 Style="{StaticResource ColumnHeaderGripperStyle}" />
            <Thumb x:Name="PART_RightHeaderGripper"
 HorizontalAlignment="Right"
 Style="{StaticResource ColumnHeaderGripperStyle}" />-->
        </Grid>
    </ControlTemplate>
</Setter.Value>
</Setter>
<Setter Property="Background">
<Setter.Value>
    <LinearGradientBrush EndPoint="0.5,1"
           StartPoint="0.5,0">
        <GradientStop Color="{DynamicResource ControlLightColor}"
      Offset="0" />
        <GradientStop Color="{DynamicResource ControlMediumColor}"
      Offset="1" />
    </LinearGradientBrush>
</Setter.Value>
</Setter>
</Style>
...
</Window.Resources> 
```

# .net - 知道 Windows 用户是否处于活动状态

> ID：14730092
> 
> 赞同：1
> 
> 时间：2013-02-06T13:19:45.767
> 
> 标签：.net, windows

在 Windows 中，我可以在不注销的情况下登录和切换用户。像这样我可以让多个用户登录但只有一个工作。我如何知道哪些用户当前正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:59:29.443

实际上，我在 c# 中找到了一个非常好的 microsoft 示例（[检测 Windows 会话状态](http://code.msdn.microsoft.com/windowsdesktop/CSDetectWindowsSessionState-f27d0321)）。

他们注册到系统事件“SessionSwitch”

```
SystemEvents.SessionSwitch += new SessionSwitchEventHandler(SystemEvents_SessionSwitch);

void SystemEvents_SessionSwitch(object sender, SessionSwitchEventArgs e){
...
} 
```

它需要 Win32 中的依赖项

```
using Microsoft.Win32; 
```

我试过了，效果很好，而且相对容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:03:08.963

据我所知，.NET 框架不会向托管代码公开实现此目的所需的 API。您将不得不 p/invoke 相当多的 WINAPI 函数并在 .NET 端定义至少一个结构和一些枚举。

如果你愿意走这条路，你可以：

*   调用[WTSEnumerateSessions()](http://msdn.microsoft.com/en-us/library/aa383833.aspx)，传入参数`WTS_CURRENT_SERVER_HANDLE`，`hServer`

*   遍历返回的[WTS_SESSION_INFO](http://msdn.microsoft.com/en-us/library/aa383864.aspx)结构并找到其`State`成员设置了`WTSActive`and`WTSConnected`位的结构（在您的情况下应该只有一个），

*   `SessionId`将该结构的成员传递给[WTSQuerySessionInformation()](http://msdn.microsoft.com/en-us/library/aa383838.aspx)`WTSUserName` ，在`WTSInfoClass`参数中指定，

*   从返回的缓冲区中读取用户名，

*   使用[WTSFreeMemory()](http://msdn.microsoft.com/en-us/library/aa383834.aspx)释放缓冲区和`WTS_SESSION_INFO`结构数组。

如您所见，这并非微不足道。祝你好运。

# ms-access - 处理 TransferText 错误

> ID：14730093
> 
> 赞同：3
> 
> 时间：2013-02-06T13:19:53.140
> 
> 标签：ms-access, error-handling, vba, runtime-error

我有一个**Access-2007**应用程序，我使用 Visual Basic 从文本文件中导出/导入表。

```
DoCmd.TransferText acExportDelim, "MySpec", "Table1", "c:\table1.txt", True

DoCmd.TransferText acImportDelim, "MypSpec", "Table1", "c:\table1.txt", True 
```

我想**捕获**此方法可能引发的所有错误。我想要这个方法的错误号列表，我在 MSDN 上搜索过，但没有找到任何东西。

如果导入失败，我还想阻止访问创建***ImportErrors表。***

任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:35:12.983

如果要预先测试数据，可以使用 SQL。

使用 schema.ini 文件并直接导入到 MS Access。schema.ini 文件相当于规范。

```
[imp.txt]
ColNameHeader=False
Format=FixedLength
Col1=ID  Char Width 8
Col2=AName  Char Width 10
Col3=Mark Char Width 2 
```

SQL

```
SELECT * INTO Imp FROM [Text;DATABASE=Z:\docs].[imp.txt] 
```

在 VBA 中：

```
Dim db As Database
Set db = CurrentDB

sSQL = "SELECT * INTO Imp FROM [Text;DATABASE=Z:\docs].[imp.txt]"
db.Execute sSQL, dbFailOnError 
```

参考：
[错误集合 (DAO)](http://msdn.microsoft.com/en-us/library/office/ff834805.aspx)
[错误对象 (DAO)](http://msdn.microsoft.com/en-us/library/office/ff835711.aspx)
[Schema.ini 文件（文本文件驱动程序）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)

# raphael - 拉斐尔元素的多重变换

> ID：14730095
> 
> 赞同：1
> 
> 时间：2013-02-06T13:20:02.010
> 
> 标签：raphael, transform, scale

我试图从鸟瞰的角度来绘制机械。因此，我画了矩形。这些矩形可能有角度（例如 90°、270°）。所以我对它们应用旋转变换。这样我就可以画出整株植物。

现在，如果我对集合应用缩放变换，则元素正在缩放。但是我之前应用的旋转变换是倒退的。

将此复制到[拉斐尔的游乐场](http://raphaeljs.com/playground.html)，看看我的意思。

```
var rect1 = paper.rect(50,50,200,100).attr({fill: "green"});
var rect2 = paper.rect(250,50,200,100).attr({fill: "green"});
var rect3 = paper.rect(550,50,200,100).attr({fill: "green"});
rect3.transform("r90,550,50");

var set = paper.set();
set.push(rect1,rect2,rect3);
set.animate({'transform':"S0.5,0.5,50,50"}, 2000); 
```

我现在想要的是防止反转旋转，并且第三个元素与第二个元素对齐在旋转后保持原样（某种“L”）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:02:35.643

好吧，我自己搞定了。使用“...”解决了我的问题。

```
var rect1 = paper.rect(50,50,200,100).attr({fill: "green"});
var rect2 = paper.rect(250,50,200,100).attr({fill: "green"});
var rect3 = paper.rect(550,50,200,100).attr({fill: "green"});
rect3.transform("r90,550,50...");

var set = paper.set();
set.push(rect1,rect2,rect3);
set.animate({'transform':"...S0.5,0.5,50,50"}, 2000); 
```

昨天试过这种方式，但不知何故它没有工作。今天，它工作得很好=）

# php - 从普通方法调用类的成员变量

> ID：14730096
> 
> 赞同：1
> 
> 时间：2013-02-06T13:20:04.607
> 
> 标签：php

我尝试从同一类的方法内部调用类的成员变量。

如果我直接调用它不起作用，它需要使用$this。是否有一个原因？班级不能意识到我正在调用的变量属于它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:21:26.947

$this-> 是类如何“意识到” var 属于它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:22:32.383

原因或多或少只是因为 PHP 就是这样工作的。听起来您已经习惯了 Java，如果没有覆盖同一范围内的成员的局部变量，它会自动使用当前范围内的实例成员。PHP 不授予您这种自由：

```
class x {
    private $y = 'r';

    public function z() {
        $y = 'q';
        echo "$this->y\n"; //r
        echo "$y";         //q
    }
} 
```

在 Java 中，您仍然必须`this.y`在上面的示例中使用来打印`r`，因为类成员名称已在本地被覆盖。试想一下，PHP 的成员在方法中*总是*被 void 覆盖。

# linux - linux中的request_mem_region()

> ID：14730100
> 
> 赞同：0
> 
> 时间：2013-02-06T13:20:16.470
> 
> 标签：linux, linux-kernel

我的新手问题是关于用于定义 RAM 映射区域的 request_mem_region() 。假设调用返回成功，这是否意味着内存区域可用于系统中每个进程的读/写访问？（这里我说的是没有VM的系统，即我们可以直接寻址内存）。如果是，有哪些方法可以控制进入该区域的权限？

谢谢，马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:46:14.190

`request_mem_region()`没有*定义*一个 RAM 映射区域，它只是*请求*一个。换句话说，如果调用成功，其他人将无法请求相同的区域。

这只是一种防止多个驱动程序尝试获取同一设备的机制，它对实际访问该内存区域没有帮助。您仍然需要重新映射该区域。

# c# - 访问被拒绝 - 调用 wcf 服务时

> ID：14730107
> 
> 赞同：0
> 
> 时间：2013-02-06T13:20:26.230
> 
> 标签：c#, asp.net, .net, wcf, access-denied

我有一个 wcf 服务，我从另一个网站调用它。

该服务正在做一些解码工作。

发生的问题是：

对于少数车辆，数据解码得很好，但对于少数车辆，则显示错误。

**错误代码：500 错误消息：身份验证失败 + 访问被拒绝**

我添加了错误的屏幕截图。

注意：对于某些车辆，它工作正常。 ![在此处输入图像描述](../Images/c1b6eb3c21b7e90e5bf2abc3c4be0c16.png)

由于它适用于一些车辆，我认为这不是解码代码的问题。

请建议这里可能是什么问题..

访问服务的代码是：

```
function ResetValues(infoType)
{
    var $jDecode = jQuery.noConflict();
    var decoderUrl = $jDecode("input[id*=hdnVINDecoderURL]").val();
    var vin = $jDecode("input[id*=txtVIN]").val().toUpperCase();
    var styleId = null;
    var trim = $jDecode("#lbTrimRecords").val();

    if(trim != null)
    {
        styleId = trim.substring(trim.lastIndexOf("(") + 1, trim.lastIndexOf(")"));
    }

    //Declaring parameter to be passed to the called function.
    var paramList = '{"vin":"'+vin+'","styleID":"'+styleId+'","infoType":"'+infoType+'"}';

    //To show the loading image
    document.getElementById('imgLoading').style.visibility = 'visible';

    try
    {
        $jDecode.ajax({
            type: 'GET',
            contentType: 'application/json; charset=utf-8',
            url: decoderUrl + 'GetFactoryInformation/' + vin + '/' + styleId + '/' + infoType,
            //data: paramList,
            dataType: 'jsonp',
            success: function(data) {
                dataObject = data; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:54:36.687

您发布的代码调用 Web 服务，该服务又通过 WCF 调用 Web 服务。

您得到的错误是 500，这是一个 http 错误，表示内部错误。

该错误可能与数据量有关，WCF 有一个可以配置的最大请求大小。如果从 Web 服务返回的数据量超过允许的最大值，您将在网站上收到内部错误。

要对其进行测试，请直接针对 WCF 服务使用 wcf 测试客户端。比较返回的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:52:22.977

原因是一个空值即将到来并且它正在引发异常。

# javascript - jQuery.offset() 设置位置：绝对。我需要职位：固定

> ID：14730118
> 
> 赞同：5
> 
> 时间：2013-02-06T13:20:58.300
> 
> 标签：javascript, jquery

当您使用它设置元素的偏移量时`jQuery.offset({coords})`，也会将 CSS 属性设置`position`为`absolute`.

但是，我有一个 div，我`position: fixed`在我的 CSS 中设置了它，我希望它保持这种状态，即使在使用 jQuery 设置元素的偏移量之后也是如此。

现在，我确定我可以设置偏移量，然后`position: fixed`再次设置，但我想知道是否有一种方法可以告诉 jQuery 在设置偏移量时将位置设置为固定而不是绝对。

**HTML**

```
<div class="searchResults">
    ...
</div> 
```

**CSS**

```
DIV.searchResults {
    position: fixed;
    padding: 20px;
    background-color: red;
    z-index: 501;
} 
```

**jQuery**

```
$("DIV.searchResults").offset({left: 0, top: 0}); 
```

**呈现的 HTML**

```
<div class="searchResults" style="position: absolute; top: 0px; left: 0px;">
    ...
</div> 
```

显然，由于 jQuery 在样式中设置了位置，它会胜过我的 CSS 类的值。所以我需要一种方法来告诉 jQuery 设置`position`为`fixed`而不是`absolute`，或者告诉它设置偏移量而不设置 CSS 属性的值`position`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T13:39:34.403

正如我上面评论的那样，在您的情况下，您只需要像这样修改顶部和左侧的 CSS：

```
$("DIV.searchResults").css({left: 0, top: 0}); 
```

因为$.offset setter 方法只对left、top 和position 值进行操作，使元素相对于页面（从静态到相对，从固定到绝对）。由于您希望它的位置固定，请直接设置值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:28:27.383

也许不是那么优雅，但我认为您可以在此之后链接`.css()`以确保`position`设置为`fixed`这样：

jQuery

```
$("DIV.searchResults").offset({
    left: 0, 
    top: 0
}).css("position" : "fixed"); 
```

未经测试，但我认为这会奏效。

# java - 防止 JWindow 出现在所有窗口的顶部

> ID：14730119
> 
> 赞同：1
> 
> 时间：2013-02-06T13:21:01.037
> 
> 标签：java, swing, jdialog, jwindow

我在我的项目中使用 JWindow 来显示未装饰的 UI，也不会出现在任务栏中。但是，JWindow 似乎总是在所有其他窗口之上。我尝试将 setAlwaysOnTop 设置为 false，但似乎没有帮助。

这是可以重现问题的代码：

```
package test;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JWindow;

public class Test extends JWindow implements ActionListener {

    public Test() {
        setSize(300, 300);
        setLocationRelativeTo(null);
        setAlwaysOnTop(false);

        JButton myButton = new JButton("Click Here");
        myButton.addActionListener(this);
        getContentPane().add(myButton);

        setVisible(true);
    }

    public static void main(String[] args) {
        new Test();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if(e.getActionCommand().equals("Click Here"))
            JOptionPane.showMessageDialog(this, "This dialog box appears behind the JWindow!");
    }
} 
```

我的操作系统是 Linux，我使用的是 Oracle JDK 6。此外，当我在 Windows 上测试我的应用程序时，我使用 JDialog 作为 UI，它运行良好。但是，在 Linux 中 JDialog 似乎出现在任务栏中。

关于如何解决这个问题的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:24:47.883

将窗口的可见性设置为 True 后，将其发送到后面，如下所示：

```
setVisible(true);
toBack(); 
```

如果稍后您想将其置于堆叠顺序的顶部，您只需调用：

```
toFront(); 
```

更多细节在这里：

[http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#toBack()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#toBack())

[http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#toFront()](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#toFront())

# java - 为什么使用 java 1.7.0 更新环境索引时 statet eclipse 插件会崩溃？

> ID：14730121
> 
> 赞同：2
> 
> 时间：2013-02-06T13:21:03.260
> 
> 标签：java, eclipse, r, statet

当我选择更新环境索引（弹出帮助所必需的）但仅在使用 java 1.7.0 运行时，使用 statet 插件在 Eclipse 中运行 R 会导致崩溃。版本：R 2.15.2x64，statet 3.1.2，rj 1.1。

当使用较旧的 jvm (1.6.0_31) 运行时，环境索引可以成功更新。

我现在有一个解决方法，但很高兴知道原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T19:10:38.397

您提到的解决方法是什么？我在 Windows、x64、Java 7 和 R 3.0.3 上遇到了类似的问题。我自己的解决方法是在 Eclipse 配置中指定 Java 1.6。谢谢。

# perl - Perl 的 HTML::Element - 仅将后代转储为 HTML

> ID：14730122
> 
> 赞同：3
> 
> 时间：2013-02-06T13:21:04.780
> 
> 标签：perl, xpath, html-parsing, html-tree

我在尝试输出我正在解析的匹配节点的内容时遇到问题：

```
<div class="description">some text <br/>more text<br/></div> 
```

我`HTML::TreeBuilder::XPath`用来查找节点（这个类只有一个 div）：

```
my $description = $tree->findnodes('//div[@class="description"]')->[0]; 
```

它找到了节点（`HTML::Element`我相信返回），但也`$description->as_HTML`包含了元素本身——我只希望元素中包含的所有内容都是 HTML：

```
some text <br/>more text<br/> 
```

我显然可以用正则表达式把它去掉，但这感觉很乱，我敢肯定我只是在某个地方缺少了一个函数来做它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:52:44.227

用于`./node()`获取所有子节点，包括文本和元素。

```
my $description = $tree->findnodes('//div[@class="description"]/node()'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:22:31.107

尝试这样做：

```
my $description = $tree->findnodes('//div[@class="description"]/text()')->[0]; 
```

这是一个 Xpath 技巧。

# amazon-s3 - 从 PHP 脚本运行 S3cmd 不起作用

> ID：14730126
> 
> 赞同：1
> 
> 时间：2013-02-06T13:21:14.417
> 
> 标签：amazon-s3, s3cmd

我想`s3cmd`从我的 PHP 脚本中使用。一切都在 shell 中工作，但在我的 PHP 脚本中同样不起作用。

```
shell_exec('s3cmd --config=/root/s3cmd.conf ls'); 
```

这不起作用，然后我给出了我的 s3cmd 安装的完整路径

```
shell_exec('/usr/sbin/s3cmd --config=/root/s3cmd.conf ls'); 
```

不适用于 PHP 脚本，但同样适用于命令，

调用 shell_exec 的 PHP 文件位于 webroot 中。

可能是 s3cmd 被配置为 root 用户并且我从 www-data 的 PHP 运行的问题。如果这是问题，我该如何为 www-data 创建配置文件。

帮助我做错了什么。

谢谢

**编辑** 我正在使用 S3cmd。在我的 cron 脚本中运行命令。cron 脚本是一个 PHP 脚本。运行 cron 的用户是 web11，s3cmd 是使用 root 用户配置的。

因此，当我在 PHP 脚本中使用 shell_exec() 运行 s3cmd 时，它失败了。但是当我在 shell 中运行时，它工作正常。

# s3cmd ls

这工作正常。因为我使用root用户登录。

我尝试使用 runuser 命令运行它

# 运行用户 -l root -c "s3cmd ls"

这工作正常并显示存储桶列表。但是当我使用

# 运行用户 -l root -c "s3cmd ls"

这不起作用。我尝试给出 s3cmd 的完整路径

# /usr/bin/s3cmd ls

这适用于 shell，但不适用于我的 PHP 脚本。

我更改了 php 脚本的权限 777 并使 root 成为该用户的所有者。但仍然无法正常工作。

我如何从 PHP 脚本运行 s3cmd。? 我在亚马逊 Ec2 实例上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:24:52.350

为什么不使用[适用于 PHP 的 AWS 开发工具包](http://aws.amazon.com/sdkforphp/)？您可以使用[S3Client.listObjects()](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Aws.S3.S3Client.html#_listObjects)方法获得相同的功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T20:15:19.783

> shell_exec('s3cmd --config=/root/s3cmd.conf ls');

这里可能缺少的是 S3 命令“ls”的目标？！

它在这样的 PHP 脚本中运行良好：

```
exec("/usr/bin/s3cmd --config=.s3cfg info s3://YOUR-BUCKET/YOUR-FILE 2> /dev/null", $s3output, $s3return);

// switch due to return code (of shell !)
if($s3return == "0"){
    echo "my file exists";
}
else {
    echo "Error Code : " . $s3return;
} 
```

这假设您成功运行了“s3cmd --configure”。

# angularjs - Angular，使用选择输入过滤器来更新路由？

> ID：14730131
> 
> 赞同：7
> 
> 时间：2013-02-06T13:21:24.337
> 
> 标签：angularjs, ngroute

我设置了我的应用程序，其中可以使用选择输入按颜色过滤产品列表，`$routeprovider`如果 URL 中存在此颜色参数，我还可以将其传递给页面。

我现在要做的是在更改选择框时更新 url / 路由。如何将选择的更改绑定到路线？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T15:46:37.463

select 有一个[未记录](https://stackoverflow.com/questions/14700325/what-are-the-undocumented-features-of-angular)的ng-change 参数，您可以使用它来调用函数来设置[$location.path](http://docs.angularjs.org/api/ng.$location#path)：

```
<select ... ng-model="color" ng-change="updatePath()"> 
```

控制器：

```
function MyCtrl($scope, $location) {
    $scope.updatePath = function() {
       $location.path(... use $scope.color here ...);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T16:05:29.517

您的`<select>`元素将绑定到带有 的模型`ng-model`，您可以`$watch`使用它来更新`$location.path`或`$location.search`。就个人而言，我建议使用`$location.search`: 您可以只更改**您**想要的参数，并且它的工作量会减少一些，因为您不必了解控制器中的整个路径。

所以假设你有这样的`<select>`元素：

```
<select ng-model="selectedColor" ng-options="color for color in colors"> 
```

您可以使用`$watch`来观察您的绑定值并更新您的`$location.search`，确保将其设置为`null`if color is `undefined`or else falsey（这将清除搜索参数）：

```
$scope.$watch('selectedColor', function (color) {
    if (color) {
      $location.search('color', color); 
    } else {
      $location.search('color', null);
    }
}); 
```

您可能希望在搜索参数和本地模型之间设置双向绑定，以便更改将反映在您的`<select>`：

```
$scope.$watch('$location.search().color', function (color) {
    $scope.selectedColor = color;
}); 
```

然后，只需访问`$routeParams.color`您的路由控制器即可。

有关完整的工作示例，请参阅此[plunk](http://plnkr.co/edit/b6QuquIC8X1xCduLUnAI)。

# .net - .Net 多语言本地化

> ID：14730132
> 
> 赞同：3
> 
> 时间：2013-02-06T13:21:26.577
> 
> 标签：.net, web, localization

我的理解是，当您将 CurrentThread.CurrentUICulture 设置为例如“da-DK”时，它将在“da-DK”中查找资源文件，然后是“da”，然后返回到不变的文化。这适用于桌面应用程序，因为操作系统通常不是多语言的。然而，对于网站来说，情况并非如此。

假设我有一个访问者，其浏览器坚持用户想要“da_DK”、“de_DE”和“en_GB”，即丹麦语（如果存在），然后是德语，然后是英国英语作为后备。

有没有办法使用 .Net 4 本地化框架来适应这种偏好？

不，这不是一个思想实验。:)

**编辑**

需要明确的是，问题不在于从 Web 请求中获取本地化标头。问题在于将 CurrentThread.CurrentUICulture 设置为按顺序检查资源文件，而不仅仅是检查资源文件。

另一种方法是检查 CurrentUICulture 是否具有匹配的 resx 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:41:36.873

我认为这就是你所追求的：

[HttpRequest.UserLanguages()](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userlanguages.aspx)

这将按偏好顺序返回用户语言数组。但是，如果他们的浏览器配置不能准确反映他们真正想要的内容，允许他们更改您针对此信息应用的任何本地化可能是一个好主意。

更新 ：

要检查资源是否存在，请使用：

[资源管理器.GetResourceSet](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.getresourceset.aspx)

在这里你可以设置`tryParents`为false。`null`如果不存在资源，该方法将返回。然后，您可以继续尝试在标题中返回的下一个首选区域性。

# wpf - 使用 MVVM 模式实现 UI 状态机

> ID：14730134
> 
> 赞同：1
> 
> 时间：2013-02-06T13:21:27.047
> 
> 标签：wpf, mvvm, state-machine

我正在使用 wpf 作为 UI 层的状态机程序，我使用了这个链接： [http ://elijahm.ninjuro.com/2012/01/04/visual-states-in-wpf-4-0/#comment -312](http://elijahm.ninjuro.com/2012/01/04/visual-states-in-wpf-4-0/#comment-312)文章通过调用 VisualStateManager.GoToState(,,) 更改活动窗口的内容。

但我不是一个好的 wpf 开发人员，我的问题是那篇文章的最后一部分，即“从一种状态更改为另一种状态”部分，其中开发人员创建 StateManager 类并使用它来更改 UI 状态。我不知道在我的代码中哪里可以使用 StateManager 以及如何将业务状态更改传输到 UI？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:00:31.867

好问题。看起来该博客文章的作者确实假设您会知道将他展示的代码片段放在哪里，部分基于类的名称和绑定的使用等。另外，如果您还没有，这将有助于阅读 MVVM 模式，以便他引用的内容更有意义。

话虽如此，我将简要解释博客文章的该部分。首先，“StateManager”类类似于[此答案](https://stackoverflow.com/a/6002107/718325)中的“StateHelper”类。该答案也有更多解释。

本质上，我们需要协同工作的三个主要部分：ViewModel、View 和自定义附加属性类（尤其是此附加属性的更改回调方法）。

作者在他的**ViewModel**（类型`string`）中创建了一个名为“ViewState”的属性。这里的想法是，至少在他的方法论中，ViewModel 将知道何时应该更改视图状态（即，对数据的特定更改作出反应）。因此，当那个时候到来时，他将使用常规 C# 代码将 ViewModel 的“ViewState”属性更改为另一个状态名称（可能是“alertState”或其他名称） - 可能类似于：

```
this.ViewState = "alertState"; 
```

然后将其联系在一起的事实是，**视图**有一种方式`binding`（即“监听更改”）那些“状态更改”——这意味着视图通过监听“状态更改”的更改来执行状态更改。 ViewModel 的 ViewState" 属性（不是那么简单，但我会在一分钟内到达那里）。

```
StateManager.VisualStateProperty = "{Binding Path=ViewState}" 
```

它能够执行实际VisualStateManager状态更改的方式是自定义**“StateManager.VisualStateProperty”附加属性的更改回调**方法执行内置的WPF方法`VisualStateManager.GoToState(...)`。在他的帖子中，这是我所指的更改后的回调：

```
new PropertyMetadata((dependencyObject, args) =>
{
    var frameworkElement = dependencyObject as FrameworkElement;
    if (frameworkElement == null)
        return;
    VisualStateManager.GoToState(frameworkElement, (string)args.NewValue, true);
})); 
```

因此，当 ViewModel 更改其 ViewState 属性时，并且由于 View 具有与该属性的绑定，并且由于此自定义附加属性已分配了该绑定的结果，绑定引擎会更改其绑定的“结果”，这会导致“StateManager.VisualStateProperty”的值发生更改，这会导致上述更改后的回调方法触发，这（最终）会导致该`VisualStateManager.GoToState(..)`方法执行实际的视觉状态更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:00:39.733

那篇文章适用于 MVVM 模式，它将逻辑代码与视图分离，因此需要额外的代码来将视觉状态更改从 ViewModel 重定向到 View。如果您不使用 MVVM，那么您可以在代码隐藏中的任何位置使用以下命令更改状态`VisualStateManager.GoToState`：

```
VisualStateManager.GoToState(this, "MyNextState", true); 
```

# cassandra - Cassandra RandomPartitioner 和“全表扫描”

> ID：14730137
> 
> 赞同：3
> 
> 时间：2013-02-06T13:21:39.677
> 
> 标签：cassandra

我似乎无法找到有关如何使用 a`RandomPartitioner`拆分键来遍历列族中所有行的信息。我看到列出的完整扫描的常用方法是“使用 MapReduce”（这将是一个选项，但现在不是）并创建一个范围切片查询以批量检索行，用最后一个更新范围的下限每批后看到的关键。当您不能保证对键进行排序时，这似乎是一种奇怪的方法，所以我想知道在这种情况下可接受的做法是什么。

需要明确的是，整个列族遍历并不是经常发生的事情，也不是我们对数据库的标准访问模式的一部分。它不需要特别快（尽管它会很好，当然！）我们只需要偶尔检查一下垃圾等。我们不希望返回的行是一致的快照或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:05:41.880

使用 Hadoop MapReduce 将是执行此操作的*正确*方法，但我知道目前这对您来说不是一个可行的选择。所以你有几种可能性：

1.  如果您的密钥具有某种逻辑顺序并且可以预先计算或以其他方式已知，您可以批量获取一堆密钥。

2.  您可以创建类似于 Cassandra 的[ColumnFamilyInputFormat](https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/hadoop/ColumnFamilyInputFormat.java)工作方式的范围客户端。

3.  您可以[像这样使用 Hector](https://github.com/zznate/hector-examples/blob/master/src/main/java/com/riptano/cassandra/hector/example/PaginateGetRangeSlices.java)或其他库中的一些类似结构来进行范围切片。

# ruby - Ruby 如何知道一条路径是否在另一条路径之外？

> ID：14730147
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:17.283
> 
> 标签：ruby, file, directory, dir

我正在构建一个小脚本，我需要知道一些测试路径（例如字符串）是否在另一个路径（另一个字符串）之外的方法。例如：

`/some/path`并且`/some/path/file.rb`会`false`因为`file.rb`在里面`/some/path`而返回，但是会因为在外面`/some/path`而返回。`/some/file.rb``true``file.rb``/some/path`

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:35:08.833

你可以使用[`String#starts_with?`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-start_with-3F)：

```
path = '/some/path'
file = '/some/path/file.rb'
file.starts_with?(path) #=> true 
```

和：

```
path = '/some/path'
file = '/some/file.rb'
file.starts_with?(path) #=> false 
```

# wix - WiX 自定义操作，运行 EXE，错误代码 1721

> ID：14730148
> 
> 赞同：1
> 
> 时间：2013-02-06T13:22:17.260
> 
> 标签：wix, custom-action

我已经阅读了互联网上的许多示例，但我无法弄清楚出了什么问题。我有一个 WiX 安装程序，可以在安装时将所有[MySQL](http://en.wikipedia.org/wiki/MySQL)服务器文件复制到某个位置。然后我想在安装结束前运行 MySQLInstanceConfig.exe。

```
<CustomAction Id="CAConfigureMySqlInstance"
              Directory="dir96BE76D0898DC48E62BC8465D43A5949"
              Impersonate="no"
              Execute="commit"
              ExeCommand="[dir96BE76D0898DC48E62BC8465D43A5949]MySQLInstanceConfig.exe"
              Return="check"
/>

<InstallExecuteSequence>
    <Custom Action='CAConfigureMySqlInstance' After='InstallFiles' />

    <!-- See this for Before/After sequence moments: http://msdn.microsoft.com/en-us/library/windows/desktop/aa371199(v=vs.85).aspx -->

</InstallExecuteSequence> 
```

我认为这`After='InstallFiles'`确实是在安装程序将所有文件放在正确的位置之后。现在我在安装程序中看到“复制新文件”的进度条。然后我收到一条消息“无法运行完成此安装所需的程序”。当我查看日志文件时，我看到：

> MSI (s) (54:94) [14:14:32:886]: 注意: 1: 1721 2: CAConfigureMySqlInstance 3: C:\Program Files (x86)\MyCompnay\MySQL\MySQL Server 5.5\bin\ 4: C:\Program Files (x86)\MyCompany\MySQL\MySQL Server 5.5\bin\MySQLInstanceConfig.exe

每当我在“运行（Windows + R）”中复制该路径时，MySQL 配置器就会运行！所以路径是正确的。所以我得出结论，在错误发生的那一刻，文件已经被复制到那个位置！错误代码为 1721。

每当我将 更改为`ExeCommand`时`C:\Windows\Explorer.EXE C:\SomeDirIKnow`，[Windows Explorer](http://en.wikipedia.org/wiki/Windows_Explorer)就会启动......所以自定义操作似乎是正确的......

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:37:43.343

我运行它

```
<CustomAction Id="CAConfigureMySqlInstance" 
              Directory="dir96BE76D0898DC48E62BC8465D43A5949"
              Impersonate="no"
              Execute="deferred"
              ExeCommand='"[dir96BE76D0898DC48E62BC8465D43A5949]MySQLInstanceConfig.exe"'
              Return="check"
/>

<InstallExecuteSequence>
  <Custom Action='CAConfigureMySqlInstance' Before='InstallFinalize' />
  <!-- See this for Before/After sequence moments: http://msdn.microsoft.com/en-us/library/windows/desktop/aa371199(v=vs.85).aspx -->
</InstallExecuteSequence> 
```

注意使用的引号`ExeCommand='"`=> 即单、双、exe 的位置、双、单。

荒谬的！在这上面花了1个多小时！

# jsf - 无法找到具有 [1] 参数的方法 [属性]

> ID：14730153
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:31.620
> 
> 标签：jsf, expression, httplistener

我为我的 JSF 应用程序实现了一个 HttpSessionListener。

我的应用程序的所有活动会话都有一个`List<HttpSession>`对象。在每个 SessionCreated 事件中，我将实际添加`HttpSession`到 this`List`中。登录时，我向活动会话添加了一些属性，并在`List`. 到目前为止一切顺利，它正在工作。但是现在我创建了一个 PrimeFaces 数据表来显示哪个会话是未使用的会话。这意味着哪个 Session 没有登录属性。Login 属性是一个简单的字符串对象。

这是数据表的实现：

```
<p:dataTable var="sessions" value="#{applicationListener.sessions}" paginator="false" id="dt_sessions">  
    <f:facet name="header">
        Sessions
    </f:facet>

    <p:column headerText="ID" style="font-size: 12px; text-align: center" >  
        #{sessions.id}
    </p:column>
    <p:column headerText="Name" style="font-size: 12px; text-align: center" >  
        #{sessions.attribute(login)}
    </p:column>
 </p:dataTable> 
```

Tomcat 抛出一个 HTTP 500 Stacktrace：

```
Feb 6, 2013 2:00:50 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [] threw     exception [/rmlcon.xhtml: Unable to find method [attribute] with [1] parameters] with root cause
javax.el.ELException: /rmlcon.xhtml: Unable to find method [attribute] with [1] parameters
at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:88)
at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularCell(DataTableRenderer.java:741)
at org.primefaces.component.datatable.DataTableRenderer.encodeRow(DataTableRenderer.java:693)
at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:601)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我真的不明白为什么会抛出它。请有人可以解释我的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:44:46.750

正确的方法名称是[`getAttribute()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getAttribute%28java.lang.String%29)，不是`attribute()`。

```
#{sessions.getAttribute(login)} 
```

请记住，您调用的是方法，而不是访问属性，因此`get`前缀仍然是必需的。

* * *

**与具体问题无关**，我会修复`var="sessions"`为`var="session"`，因为它只涉及一个会话实例，而不是多个。否则你的代码读起来很混乱（即它不是自我记录的）。

```
#{session.getAttribute(login)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T14:34:28.333

我找到了解决方法

```
<p:inputText id="valore" value="#{myBean.getValObj(0).val}" /> 
```

豆是

```
public class MyBean{
    public ValObj getValObj(int idx){
    return new ValObj(this, idx);
    }

    public class ValObj{
        MyBean bean;
        int idx = -1;
        public ValObj(MyBean bean, int idx){
            this.bean = bean;
            this.idx = idx;
        }

        public double getVal(){
            return valori[idx];
        }
        public void setVal(double val){
            valori[idx] = val;
        }
    }
} 
```

# c++ - 即使 glfwInit() 返回 1 也无法让 GLFW 工作

> ID：14730155
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:32.463
> 
> 标签：c++, opengl, graphics, glfw

我已经设置`GLFW`了库，根据它的用户指南，我应该使用`glfwInit()`函数来初始化它。之后，我应该能够 - 例如 - 在我按下键盘上的键后调用回调函数，但没有调用这个函数，所以我尝试了一些更简单的方法 - 获取鼠标位置。但它也不起作用，所以我认为我的整个 GLFW 有问题。

这是我的应用程序的主循环：

```
while (!m_exit)
{

    int x, y;
    glfwGetMousePos(&x, &y);
    glfwPollEvents();
    gameCycle();                        // Do one cycle

    while (PeekMessage (&msg, NULL, 0, 0, PM_NOREMOVE))
    {
        // Check the pressence of commands
        if (!GetMessage (&msg, NULL, 0, 0))
        {
            return msg.wParam; // Hand the control on to system
        }

        TranslateMessage (&msg);
        DispatchMessage (&msg);
    }
} 
```

同样在这个循环之前，我初始化我的`GLFW`：

```
// Initialize GLFW
if( !glfwInit() )
{
    exit( EXIT_FAILURE );
}

glfwSetKeyCallback(processKeys);

// Main message loop:
int loopRet = g_pGameAppLayer->mainLoop(); 
```

当我检查保存在变量中的值时`x`，`y`我只得到 -858993460，这表明没有值传递给它们。

那么我在设置中缺少什么`GLFW`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T13:37:13.150

你的问题在这里：

> 之后，我应该能够 - 例如 - 在我按下键盘上的键后调用回调函数

不，你不应该。在您使用 GLFW 创建*窗口*之前，您无法获得输入。许多窗口系统通常都是这样。如果你有一个窗口，你只会得到输入。

# c++ - 传递对 C++ 构造函数的引用

> ID：14730156
> 
> 赞同：2
> 
> 时间：2013-02-06T13:22:32.703
> 
> 标签：c++, reference

我有[这个代码](http://ideone.com/gTx0BL)：

```
#include <iostream>
using namespace std;

struct X {
    int a = 1;
};

struct Y {
    X &_x;
    Y(X &x) : _x(x) {}
};

// intentionally typoed version of Y, without the reference in the constructor
struct Z {
    X &_x;
    Z(X x) : _x(x) {}
};

int main() {
    X x;
    Y y(x);
    Z z(x);
    cout << "x:   " << &x << endl;
    cout << "y.x: " << &y._x << endl;
    cout << "z.x: " << &z._x << endl;
} 
```

我一直发现自己忘记了`&`这种格式的类的构造函数。

这将输出以下内容：

```
x:   0xbfa195f8
y.x: 0xbfa195f8
z.x: 0xbfa195fc 
```

`y`为什么在和的情况下行为不同`z`？

为什么在构造函数中`X &_x`使用类型实例初始化成员不是错误？`X``Y`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:24:52.920

您的代码接近于未定义行为：您正在绑定对对象 ( ) 的引用，该对象 ( `x`) 在构造函数返回时超出范围`Z`，这使其成为悬空引用。您以后不要尝试取消引用它，这就是 UB 没有出现的原因。但是尝试读出它的值`z.x`而不是获取它的地址，例如，将是 UB。

分配引用不会出错的原因是左值引用被允许绑定到左值，并且`x`是左值。`_x`即使*在* ' 的构造函数返回之后，编译器也不需要确定是否要访问`Z`（实际上，在一般情况下，这恐怕是不可能的）。

但是，当您尝试将引用绑定到本地对象时，一个体面的编译器至少应该发出警告：尝试使用该`/Wall`选项进行编译，您应该得到一个。

`y.x`关于和之间的输出差异`z.x`：嗯，您正在打印这些变量的地址，而不是它们的值，并且引用只是它们引用的变量的别名。因此，获取引用的地址与获取它所绑定的变量的地址产生相同的结果。

在 的情况下`z`，引用`z.x`不绑定到您在（不同于）`x`中声明的变量，而是（实际上）绑定到已超出范围并持有 的构造函数的参数的对象（按值传递创建参数的*副本*，并且' 的引用是该副本的别名）。因此，操作员返回不同的地址。`main()``y.x``Z`*`z``&`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T13:24:55.160

> 为什么在 y 和 z 的情况下行为不同？

因为`Y`通过引用获取参数，`Z`所以没有。`Y`对原始对象`Z`进行操作，对副本进行操作。

> 为什么在 Y 的构造函数中用 X 类型的实例初始化 X &_x 成员不是错误？

诊断不是强制性的。超出构造函数的范围，引用`Z::_x`无效。所以访问它是无效的（但是，`_x`在构造函数内部访问是可以的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T13:24:14.253

调用构造函数时会创建对象的副本，因此 zx 的输出不同 该对象的生命周期非常有限 - 它仅存在于构造函数中。这是未定义的行为，引用将无效。

为了防止在您的应用程序中出现此类行为，最好将复制构造函数和赋值运算符标记为私有。*

# rest - WS02 HTTP 标头操作

> ID：14730159
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:44.527
> 
> 标签：rest, header, uri, wso2, wso2esb

我想创建一个简单的 WS02 外观，它提供一个 RESTful 端点并转发到第二个 RESTful（即不是 SOAP）端点。我需要转换端点地址并将版本部分添加到将从原始请求的 HTTP 标头获得的 URI。

我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T09:03:37.510

您可以使用 WSO2 ESB 的 REST API 功能来执行此操作。您可以从 [1] 中的可用资源中找到通过不同 REST Api 公开 REST 后端服务的示例。

您可以使用 REST_URL_POSTFIX 属性将版本部分动态添加到端点 URL。以下是设置 REST_URL_POSTFIX 属性的示例配置。

```
<property name="REST_URL_POSTFIX" expression="fn:concat('/version/',$trp:HEADER_NAME_HERE)" scope="axis2"/> 
```

[1] [http://docs.wso2.org/wiki/display/ESB460/Using+the+REST+API#UsingtheRESTAPI-ExposingaBack-EndRESTServiceUsingaDifferentAPI](http://docs.wso2.org/wiki/display/ESB460/Using+the+REST+API#UsingtheRESTAPI-ExposingaBack-EndRESTServiceUsingaDifferentAPI)

# php - 如何在 php (Dreamweaver) 中设置_include_path？

> ID：14730162
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:52.353
> 
> 标签：php, zend-framework, lucene, dreamweaver, set-include-path

如何为 php 项目设置_include_path？

现在我设置路径是

```
include('Zend/Search/Lucene.php');<br>
set_include_path('Zend'.PATH_SEPARATOR.get_include_path());<br>
require_once('Zend/Loader.php'); 
```

保存这个项目的目录是

`C:\AppServ\www\Search`

在这个文件夹里有 Zend（Zend 是 ZF 的库）

现在它显示

> **警告：** Zend_Search_Lucene_Storage_Directory_Filesystem::require_once(Zend/Search/Lucene/Storage/File/Filesystem.php) [zend-search-lucene-storage-directory-filesystem.require-once]：无法打开流：没有这样的文件或目录C:\AppServ\www\Search\Zend\Search\Lucene\Storage\Directory\Filesystem.php 在第 349 行
> 
> **致命错误：** Zend_Search_Lucene_Storage_Directory_Filesystem::require_once() [function.require]: 无法打开所需的 'Zend/Search/Lucene/Storage/File/Filesystem.php' (include_path='/Search/Zend/;.;C:\php5\ pear') 在 C:\AppServ\www\Search\Zend\Search\Lucene\Storage\Directory\Filesystem.php 中的第 349 行

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:42:05.540

您的包含路径应​​设置为包含 Zend 文件夹的文件夹，而不应设置为 Zend 文件夹本身。因此，假设 Lucene.php 文件的正确位置是`C:\AppServ\www\Search\Zend\Search\Lucene.php`您想要的：

```
set_include_path("C:\AppServ\www\Search".PATH_SEPARATOR.get_include_path()); 
```

此外，在设置包含路径（如您在示例中所示）之前不要尝试包含文件，因为这将失败。

通常，像这样的类应该位于您的 Web 根目录之外，并且您可能不想在“C:\AppServ”之类的完整路径中进行硬编码，因为这可能特定于您的开发环境。

# java - 如何检查Java程序中的线程是顺序运行还是并行运行？

> ID：14730163
> 
> 赞同：0
> 
> 时间：2013-02-06T13:22:53.130
> 
> 标签：java, multithreading

我有一个 java 程序，可以将一些文件提取到客户端机器上。我已经实现了 4 个线程来提取文件。但是线程实现几乎不会影响提取时间。我已经检查了 jvisualvm 中的线程执行，它看起来很好，我确信线程是并行方式实现的。这是我的系统配置...

Windows XP，Core2duo，3GB RAM。java-vm-args：-Xmx512M -Xss2M。我已将可用处理器打印到正在运行的 JVM... Runtime.getRuntime().availableProcessors() = 1（如果我没记错，它应该执行 2 个逻辑线程）。

我错过了什么吗？我们如何确保线程在硬件级别并行运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:32:47.497

> 我们如何确保线程在硬件级别并行运行？

我认为这主要是一个无效的问题。在 Linux 下，您可以看到线程及其状态，`ps -eLfl`但这在其他操作系统上不起作用。线程转储将向您显示线程状态。通过 jconsole 中的线程选项卡并单击线程也将显示它们的状态。

> 但是线程实现几乎不影响提取时间

正如其他人所提到的，这是您的程序受 IO 限制的教科书标志。您的所有线程都在争夺相同的 IO 资源，并且大部分时间都在等待队列中。

要测试这个理论，请将您的应用程序移至更快的磁盘系统。SSD是这里的炸弹。*首先*将文件加载到内存中，然后使用不同数量的线程运行处理也将隔离 IO 带宽问题。也可以使用内存文件系统。

如果您的进程是 IO 绑定的，那么可能没有任何方法可以在不增加 IO 带宽的情况下加速它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:25:17.237

当 CPU 成为瓶颈时，并行执行会有所帮助。在您的情况下，瓶颈可能是 I/O，而不是 CPU。此外，您有 1 个具有超线程的物理内核。在这种情况下，并行执行可能无论如何都无济于事，即使 CPU 是瓶颈。此外，在某些情况下，单核、超线程 CPU 上的双线程应用程序可能比单线程应用程序慢。超线程主要是营销技巧。不要依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:26:09.223

您缺少的是*提取时间*不仅包括 CPU 时间，还包括 HDD 读取和写入。这两个比 CPU 执行的 ZIP 算法多花费几个数量级的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:41:20.360

我认为除了通过外部手段之外没有其他方法可以检查。例如

*   查看 Windows 任务管理器性能图表，或
*   将 VisualVM 附加到 JVM。

> 我已将可用处理器打印到正在运行的 JVM：

```
 Runtime.getRuntime().availableProcessors() = 1 
```

这意味着您认为 JVM 认为它只有 1 个可用处理器。如果您实际上有两个物理内核（或 HT 虚拟内核），那么操作系统只会让 JVM 使用其中一个。

（代码中的某种瓶颈不会导致`availableProcessors()`return `1`。）

* * *

> 我们如何确保线程在硬件级别并行运行？

您需要确保操作系统*允许*JVM 使用多个内核。

# jquery - 如何在使用 jquery 将其添加到列表之前检查重复的列表文本？

> ID：14730165
> 
> 赞同：2
> 
> 时间：2013-02-06T13:23:03.967
> 
> 标签：jquery

假设我有以下 ul 列表：

```
 <ul id='testList'>

                            <li>dfsdfdsfs</li>
                            <li>dfsdfdsfs</li>
                            <li>dfsdfdsfs</li>
                            <li>dfsdfdsfs</li>
                            <li>dfsdfdsfs</li>
                  </ul> 
```

接下来，在将项目添加到列表之前，我需要检查此列表是否有重复项：

```
 $("#testList li").each(function()
                 {
                     if(output == $(this).text())
                     { 
                            alert("duplicate entry");
                     }else
                     {
                         $("#testList").append("<li>"+output+"</li>");
                     }

                 }); 
```

问题，当列表为空时，没有添加 else 语句......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:28:51.457

您的功能有几个问题。首先，如果列表为空，它不会添加任何内容，其次，它将添加不等于列表中任何项目的元素，第三：testList 是一个类，$("#testList") 查找ID。

试试这个：

```
 function addToList() {
             var addit = true;
             $("testList li").each(function()
             {
                 if(output == $(this).text())
                 { 
                        addit = false;
                 }
             });
             if(addit)
                 $("testList").append("<li>"+output+"</li>");
           } 
```

# javascript - 使用适当的 SRC 隐藏所有图像，包括一些条件

> ID：14730167
> 
> 赞同：2
> 
> 时间：2013-02-06T13:23:07.743
> 
> 标签：javascript, jquery, html

我想隐藏页面中具有特定属性的每个图像，除了具有以或开头的属性`src`的父`a`元素的图像。`href``/dailyTickets/front/user.form.php``/dailyTickets/front/user.php`

我正在使用这种方法，但它用 隐藏了所有图像`src`，在`a`测试中他只是找不到 img 来完成他的工作

```
$('img[src=\"/dailyTickets/pics/aide.png\"]').hide();
$('img[src=\"/dailyTickets/pics/aide.png\"]').parent('a[href^=\"/dailyTickets/front/user.form.php\"]').show();
$('img[src=\"/dailyTickets/pics/aide.png\"]').parent('a[href^=\"/dailyTickets/front/user.php\"]').show(); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:26:10.567

您的问题是您在父项上使用 show()，而不是图像本身。尝试类似：

```
$('a[href^=\"/dailyTickets/front/user.form.php\"]').find('img[src=\"/dailyTickets/pics/aide.png\"]').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-29T20:22:20.220

也许这就是你需要的:) [https://www.npmjs.com/package/location-hide](https://www.npmjs.com/package/location-hide)

即使您从未使用过 node.js，它也很容易使用

# javascript - 除非调用 console.log，否则循环引用父子是未定义的

> ID：14730172
> 
> 赞同：3
> 
> 时间：2013-02-06T13:23:25.247
> 
> 标签：javascript, circular-reference

请考虑以下代码

```
 var factory = function (element, opts) {
        var MutationObserverController = function (element, opts) {
            var defaults = {
                subtree: true,
                childList: true,
                characterData: true
            };

            this.options = $.extend({}, defaults, opts);
            this.watchedElement = element;

            this.observer = new MutationObserver(this.mutationObserver);
            this.observer.context = this;
            //console.log(this.observer); //->THIS LINE
        };

        MutationObserverController.prototype.connect = function () {
            this.observer.observe(this.watchedElement, this.options);
        };

        MutationObserverController.prototype.disconnect = function () {
            this.observer.disconnect();
        };

        MutationObserverController.prototype.mutationObserver = function (mutations, observerObj) {
            var ctx = observerObj.context;
            ctx.disconnect();
            mutations.forEach(function (m) {
                console.log(m);
            });
            ctx.connect();
        };

        return new MutationObserverController(element, opts);
    };

    var mutOb = factory($('#myEditor').get(0), {});
    mutOb.connect(); 
```

* * *

每次在 contenteditable div 中完成 DOM 修改（突变）时都会触发此代码，并且会产生**一个错误，指出 observerObj.context 是 undefined**。

但是，如果我取消注释此行`//console.log(this.observer); //->THIS LINE`，则不会产生错误并且它按预期工作。

为什么？

这是[**JSFiddle**](http://jsfiddle.net/tivie/a9JS6/3/)。要重现，请在文本后的 contenteditable div 中按 ENTER。

* * *

注意：如果有人建议如何在没有循环引用的情况下将上下文传递给 mutationObserver（或给出正确的范围），我也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:09:05.643

您可以使用[Function#bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)保持正确`this`：

```
this.observer = new MutationObserver(this.mutationObserver.bind(this)); 
```

试试看：http: [//jsfiddle.net/reLr9/](http://jsfiddle.net/reLr9/)

# java - 如何在 IzPack 的用户输入文件字段上设置字体颜色？

> ID：14730173
> 
> 赞同：0
> 
> 时间：2013-02-06T13:23:27.663
> 
> 标签：java, izpack

如何在后续字段消息中设置颜色？文本“请输入 Jboss 目录名称。” 应该显示为红色。

```
<field type="staticText" align="left" txt="Please enter the Jboss directory name."  conditionid="con_jboss_installed"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:55:31.380

查看源代码，描述字段支持 HTML 渲染（它正在寻找文本的开头和结尾），因此以下内容应该可以工作：

```
<field type="staticText" align="left" conditionid="con_jboss_installed">
  <description><html><body><p style="color: red;">Please enter the Jboss directory name.</p></body></html></description>
</field> 
```

这将需要 IzPack 5。

# java - 基于 Guava 中缓存的地图类型错误

> ID：14730174
> 
> 赞同：1
> 
> 时间：2013-02-06T13:23:28.047
> 
> 标签：java, generics, guava

我正在尝试使用 Guava 来模拟 LRU 地图。

```
Map<K, V> map = CacheBuilder.newBuilder()
        .maximumSize(maxSize)
        .build() // not using a cache loader
        .asMap(); 
```

但是当我尝试这样做时，我得到了一个错误。

```
Type mismatch: cannot convert from ConcurrentMap<Object,Object> to Map<K,V> 
```

但是，如果我使用对缓存的临时引用创建地图，它就可以正常工作。

```
Cache<K, V> cache = CacheBuilder.newBuilder()
        .maximumSize(maxSize)
        .build();
Map<K, V> map = cache.asMap(); 
```

为什么这行得通而第一个样本却行不通？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T13:32:01.337

这是 Java 的泛型错误 - 在这种情况下无法推断出泛型类型。您应该添加`<K, V>`以告诉 Java 将新创建的缓存视为`Cache<K, V>`，而不是`Cache<Object, Object>`。

```
private static <K, V> Map<K, V> makeMap(final int maxSize) {
  return CacheBuilder.newBuilder()
      .maximumSize(maxSize)
      .<K, V>build() // not using a cache loader
      .asMap();
} 
```

然后它会工作：

```
final Map<Long, String> map = makeMap(10); 
```

请参阅Angelika Langer 的[*Java 泛型常见问题解答*](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ403)[的这一部分](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#FAQ403)*。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T16:03:41.643

这是我从 Xaerxess 的答案中得出的用法：

```
private final Map<String, List<Condition>> waitersByKey=MapUtil.create(5, 1000); 
```

MapUtil.java：

```
import java.util.Map;
import java.util.concurrent.TimeUnit;

import com.google.common.cache.CacheBuilder;
import com.google.common.cache.RemovalListener;

public class MapUtil {

  /**
   * Value for items which are unrestricted (-1)
   */
  public static final int UNRESTRICTED=-1;

  /**
   * Create a generic map that will not exceed max size
   * @param maxSize
   * @return created map
   */
  public static <K,V> Map<K,V> createWithMaxSize(int maxSize) {
    return create(UNRESTRICTED,maxSize);
  }

  /**
   * Create a generic map that will expire objects if not accessed within a given number of minutes
   * @param expireInMins
   * @return created map
   */
  public static <K,V> Map<K,V> createWithExpiration(int expireInMins) {
    return create(expireInMins,UNRESTRICTED,UNRESTRICTED);
  }

  /**
   * Creates a map with an initial size.  Reduces growth performance hit.
   * @param initialSize
   * @return created map
   */
  public static <K,V> Map<K,V> createWithInitialSize(int initialSize) {
    return create(UNRESTRICTED,UNRESTRICTED,initialSize);
  }

  /**
   * Create generic map that expires values with max size
   * @param expireInMins max age of unaccessed items in minutes, or UNRESTRICTED
   * @param maxSize max number of items before oldest is removed, or UNRESTRICTED
   * @return created map
   */
  public static <K,V> Map<K,V> create(int expireInMins, int maxSize) {
    return create(expireInMins,maxSize,UNRESTRICTED);
  }

  /**
   * Create generic map that expires values with max size
   * @param expireInMins max age of unaccessed items in minutes, or UNRESTRICTED
   * @param maxSize max number of items before oldest is removed, or UNRESTRICTED
   * @param removalListener listener called on item removal, if not null
   * @return created map
   */
  public static <K,V> Map<K,V> create(int expireInMins, int maxSize, RemovalListener<K, V> removalListener) {
    return create(expireInMins,maxSize,UNRESTRICTED, removalListener);
  }

  /**
   * Convenience method to build a Guava cache as generic map.
   * http://stackoverflow.com/a/14730359/303442
   * @param expireInMins max age of unaccessed items in minutes, or UNRESTRICTED
   * @param maxSize max number of items before oldest is removed, or UNRESTRICTED
   * @param initialCapacity initial size in elements, reduces growth performance hit. UNRESTRICTED for default
   * @return created map
   */
  public static <K,V> Map<K,V> create(int expireInMins, int maxSize, int initialCapacity) {
    return create(expireInMins,maxSize,initialCapacity,null);
  }

  /**
   * Convenience method to build a Guava cache as generic map.
   * http://stackoverflow.com/a/14730359/303442
   * @param expireInMins max age of unaccessed items in minutes, or UNRESTRICTED
   * @param maxSize max number of items before oldest is removed, or UNRESTRICTED
   * @param initialCapacity initial size in elements, reduces growth performance hit. UNRESTRICTED for default
   * @param removalListener listener called on item removal, if not null
   * @return created map
   */
  public static <K,V> Map<K,V> create(int expireInMins, int maxSize, int initialCapacity,RemovalListener<K, V> removalListener) {
    CacheBuilder<Object, Object> builder = CacheBuilder.newBuilder();
    if (expireInMins>-1)
      builder.expireAfterWrite(expireInMins, TimeUnit.MINUTES);
    if (maxSize>-1)
      builder.maximumSize(1000);
    if (initialCapacity>-1)
      builder.initialCapacity(initialCapacity);
    if (removalListener!=null)
      builder.removalListener(removalListener);
    return builder.<K,V>build().asMap();
  }
} 
```*

# python - Python 在数组列表中搜索字符串

> ID：14730180
> 
> 赞同：0
> 
> 时间：2013-02-06T13:23:43.047
> 
> 标签：python, c, arrays, struct

```
StructPageNum = namedtuple('FDResult', ['DeviceID', 'PageNum'])
PageNumList = []
Node = StructPageNum(DeviceID='NR0951113', PageNum=[1,2,3,4])
PageNumList.append(Node)
Node = StructPageNum(DeviceID='NR0951114', PageNum=[1,2,3,4])
PageNumList.append(Node)

print('NR0951113' in PageNumList[:].DeviceID) 
```

1）如何在PageNumList中搜索NR0951113？

## 已编辑

2）如果我想获得 NR0951113 数组索引？如何获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:26:49.663

我想你可能想要：

```
any(x.DeviceID == 'NR0851113' for x in PageNumList) 
```

如果您真的想获取索引，那么可能[`next`](http://docs.python.org/2/library/functions.html#next)是您应该使用的内置函数：

```
next(i for i,x in enumerate(PageNumList) if x.DeviceID == 'NR085113') 
```

`StopIteration`如果在您的任何对象上都找不到 DeviceID，则会引发此问题。如果传入的可迭代对象为空，则可以`StopIteration`通过传递返回的第二个值来防止：`next`

```
index = next((i for i,x in enumerate(PageNumList) if x.DeviceID == 'NR085113'),None)
if index is not None:
    ... 
```

# flash - Flash 和 AGAL：如何正确插入法线向量

> ID：14730181
> 
> 赞同：1
> 
> 时间：2013-02-06T13:23:48.853
> 
> 标签：flash, interpolation, normals, agal

我正在尝试编写一组着色器来绘制曲面的边缘（不是多边形！），就像在游戏*Echochrome*中一样。

根据我对图形编程的记忆，这样做的技术是进行多通道渲染。第一遍应该将面部法线向量和深度编码为 RGBA 颜色并将它们绘制到纹理上。如果当前片段的法线或深度信息与周围纹素的法线或深度有显着差异，则第二遍应查找纹理中的值并绘制边缘。

*（注意：如果有更简单的方法，请告诉我，特别是如果在 Flash 中很容易做到。但是，我的具体问题如下。）*

我在编写第一遍时遇到了障碍。根据我在*使用 DirectX 9.0c 进行 3D 游戏编程的介绍：Frank D. Luna 的着色器方法*中读到的内容，“插入”法线向量的正确方法是对三角形顶点的法线向量求平均，然后使用它表面上每个片段的值。但是，我的片段着色器改为对法线向量进行插值，这导致为表面绘制渐变而不是纯色。

如何让 AGAL 进行必要的平均而不是插值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:17:52.410

我认为您将需要复制顶点，以便每个三角形都有自己的三个顶点，而不与任何其他三角形共享。三角形每个顶点的法线应该是平均法线：三角形的所有三个法线都相同，因此插值不会改变。我知道这并不理想，但我没有任何其他解决方案。

在 OpenGL 中，您可以在几何着色器中计算平均法线或使用“平面”限定符，这样法线就不会被插值，但我认为您不能在 AGAL 中执行这些操作。

有关更多信息，[请参阅此问题/答案。](https://stackoverflow.com/questions/12319822/simple-flat-shading-using-stage3d-agal)

# xml - 在从 excel 2010 导出文件以与 mantis 一起使用之前向 xml 标签添加属性

> ID：14730183
> 
> 赞同：2
> 
> 时间：2013-02-06T13:23:50.980
> 
> 标签：xml, excel, xsd, mantis

我正在使用螳螂，我需要将我写在 excel 电子表格上的错误导入到螳螂，所以我创建了一个模式（file.xsd）并将我的数据映射到该模式，最后我将我的错误导出到与螳螂兼容的 xml 文件中.问题是我需要为生成的xml文件中的某些标签添加一个属性（id），在文件准备期间有什么方法可以执行该步骤（例如在excel中添加一列），我的意思是在导出之前文件？这是导出数据的示例以及我希望它看起来像的数据：

导出的数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<mantis version="1.2.12" urlbase="http:xxx/mantis/" issuelink="#"  notelink="~" format="1">
<issue>
    <id>29</id>

    <project>Project 1</project>

    <reporter>Engy</reporter>

    <priority>urgent</priority>

    <severity>block</severity>

   <reproducibility>always</reproducibility>

    <status>new</status>

    <resolution>open</resolution>

    <projectio>none</projection>
   </issue>
 </mantis> 
```

我需要将 id 属性添加到`<project>`and`<priority>`和`<severity>`：

```
 <project id="1">project 1</project>
 .
 . 
```

# php - 如何使用 PHP 定期发送电子邮件

> ID：14730185
> 
> 赞同：0
> 
> 时间：2013-02-06T13:23:56.557
> 
> 标签：php, email

我的站点在 LINUX 服务器上运行，我想向超过一周未登录我的站点的用户发送电子邮件。我正在尝试找到一个现成的脚本来这样做以节省我的时间和编码。有人可以将我指向允许我将此类功能添加到我的网站的网站或服务。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:25:38.990

Linux 上的 cron 很棒。

首先：创建一个脚本来检查您想向谁发送电子邮件。

第二：创建一个 cron 并每天运行一次或两次。

# delphi - 如何使用 Inno Setup 将 Path 转换为 8.3 格式

> ID：14730187
> 
> 赞同：4
> 
> 时间：2013-02-06T13:23:59.400
> 
> 标签：delphi, inno-setup

我需要`{app}`为注册表项获取 8.3 格式的路径（在这种情况下）。

不幸的是，这个特定的 Delphi 函数在 Inno Setup 中不起作用

`function ExtractShortPathName(const S: FullFileName): string;`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T13:25:27.747

使用该[`GetShortName`](http://jrsoftware.org/ishelp/topic_isxfunc_getshortname.htm)功能。从参考：

> 返回指定长文件名的短版本。如果未找到长文件名的短版本，则返回长文件名。

# java - 库存清单 - 多态设计

> ID：14730192
> 
> 赞同：1
> 
> 时间：2013-02-06T13:24:23.450
> 
> 标签：java, polymorphism

*（我使用的是 Java，因此添加了“Java”标签，以防它影响任何答案，但有些人可能会认为该标签是不必要的。）*

考虑以下：

我有一个阳台/阳台以图形方式进行规划。作为最终计划的一部分，我需要列出建造阳台所需的所有材料。为了简化计算过程，我将阳台分成不同的**部分**：

**甲板上方**- 涉及塑料围栏组件和固定件（即螺钉、螺栓）
**甲板下方**- 涉及木材副框架和更多固定件。

...加上其他我不会深入探讨的内容。

*为了争论*：由于我们提供不同的围栏设计，有 100 种不同的库存商品可供选择。每个项目都有自己的类别，包括尺寸、颜色、数量及其 ID 参考等信息。

**我想要做的是创建每个部分所需的修复列表，并将它们全部添加到一个最终列表中，没有任何重复。**
最后的想法是在已处理的计划旁边显示项目名称和数量。

*例如：*

***第 1 部分**要求：*
- 25 x 螺钉 A
- 15 x 螺钉 B
- 5 x 螺钉 C

***第 2 部分**要求：*
- 25 x 螺钉 A
- 15 x 螺钉 B
- 5 x 螺钉 F

***第 3 部分**要求：*
- 45 x 螺钉 B
- 50 x 螺钉 C
- 24 x 螺钉 G

*总清单*
第 1 节 + 第 2 节 + 第 3 节 = {完整的材料清单}

* * *

**我尝试过/考虑过的：**

我上面提到的所有螺钉都有自己的类，并扩展了超类“紧固件”。上面提到的每个**部分**都有一个变量：

```
ArrayList<Fasteners> 
```

所以当我计算时，我可以将螺丝添加到这个变量中。一旦每个部分计算出它需要多少个紧固件，我就会将它们一起添加。

我考虑在“Fasteners”超类中创建一个“add(Fixings)”方法，它将所有重复的项目添加在一起。但是因为有 100 个项目，我认为编码效率不会很高，并且怀疑有更好的方法来利用我在这里设置的多态性。任何在线参考或提示都会有所帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:13:42.220

这里有一个建议：

创建一个名为 FastenerType 的枚举，然后使用 an`EnumMap<FastenerType, AtomicInteger>`来保存您的紧固件。让我们称它为袋子。

然后做类似的事情

```
public class FastenerBag {

  private Map<FastenerType, AtomicInteger> fasteners = new EnumMap<FastenerType, AtomicInteger>(FastenerType.map);

  FastenerBag(){
    // init your ints to zero
  }

  public void addFastenersFor(VerandaPart part){
    for (FastenerType type : FastenerType.values()){
      fasteners.get(type).addAndGet(part.getRequiredFasteners().get(type));
    }
  }

} 
```

不要太担心性能。首先让它工作。然后让它可读（重构），**然后**优化。

# cvs - 无法访问 /path-to-repository/CVSROOT

> ID：14730193
> 
> 赞同：4
> 
> 时间：2013-02-06T13:24:31.783
> 
> 标签：cvs

我无法连接到远程 CVS 服务器。

```
$ export CVSROOT=:ext:myusername@serverdomain.com:/path-to-repository
$ export CVS_RSH=/usr/bin/ssh

$ cvs co projects/projectname
myusername@serverdomain.com's password:  (Password works fine so it is connecting correctly to the server)

Cannot access /path-to-repository/CVSROOT
No such file or directory 
```

你知道出了什么问题吗？

我也尝试过其他 cvs 操作，结果相同

```
$ cvs log projects/projectname
Cannot access /path-to-repository/CVSROOT
No such file or directory 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T14:37:04.020

可能是您没有存储库的读/写权限。检查它使用 ssh 访问服务器。

# android - 自定义视图小部件

> ID：14730194
> 
> 赞同：0
> 
> 时间：2013-02-06T13:24:35.453
> 
> 标签：android, view, widget

我在网上浏览自定义视图小部件创建教程，但他们都在创建常规形式的视图，如矩形、圆形。但我需要一个看起来像这样的小部件：![在此处输入图像描述](../Images/6f4a79b7a62c8792ea3d3207d65ad124.png)

你能帮我简要介绍一下我是如何创建它的吗？重要的是大纲形式。我需要动画 - 我可以扩展和缩小它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:26:00.183

您可以使用此处提到的形状可绘制对象：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T11:47:31.037

如果您正在寻找通过在画布上绘制布局并为其提供必要功能来制作自己的自定义视图，您应该研究一下

[自定义视图](http://developer.android.com/training/custom-views/index.html)

# ios - 检测浏览器是否是移动 Twitter 应用浏览器？

> ID：14730197
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:24:51.677
> 
> 标签：ios, mobile

我的网站响应迅速，在 iPhone 上的 Safari 上看起来不错。但是，当我从 iPhone 上的 Twitter 应用程序浏览我的网站时，它似乎忽略了我的大部分移动样式，并且看起来很糟糕。我可以做些什么来检测浏览器是否是某种移动应用程序（例如 Twitter）并导致页面加载到默认的移动浏览器（Safari、浏览器等）中？

编辑：我严格使用 CSS 的最大宽度媒体查询并针对 HTML5 块元素将宽度更改为百分比。在两个导航上，我根据需要更改了显示属性。

原来这是一个缓存问题。它在 Twitter 应用程序中加载良好。奇怪的是，它以前没有，即使经过几次尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:30:39.683

您不能强制用户从您网站的浏览器中打开链接。Android WebView 受到限制，默认情况下不允许使用 javascript 和其他扩展。

你可以在这里找到更多信息：[Android WebView VS Phone Browser](https://stackoverflow.com/questions/7373585/android-webview-vs-phone-browser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:32:42.520

据我所知，您不能强制网站在默认移动浏览器中打开。是在应用程序的 UIWebView 还是默认的 Safari 浏览器中打开您的网站由 Twitter 应用程序单独决定。如果 Twitter 应用程序足够优雅，可以提供任何界面供您选择，那可能是可能的，但他们可能不会。大多数应用程序发布者都试图让用户尽可能长时间地留在应用程序中，而将他们扔到另一个应用程序中通常会违背这一点。

您最好的选择可能是尝试提高您网站的响应能力，以便在 Twitter 应用程序 UIWebView 内也能工作（或在其他应用程序内）。例如，如果您将响应能力基于屏幕宽度（CSS`max-width`和朋友），我认为它也应该在 Twitter 应用程序 UIWebView 中工作。

您所描述的问题确实是一个非常严重和烦人的问题。默认情况下，应用程序内的 UIWebViews 不会实现所有 Apple 的特殊处理程序（在原始 Safari 中工作）。应用程序制造商应该手动实现这些，而 99% 的应用程序根本不这样做。许多其他应用程序也是如此，谷歌原生搜索应用程序也在 UIWebView 中打开 URL - 并且网站看起来也很糟糕。

您还应该考虑向 Twitter 提交错误，并敦促他们在他们的应用程序中打开网站时提高网站兼容性。

# go - 你如何在 Go 中包装 var args？

> ID：14730201
> 
> 赞同：4
> 
> 时间：2013-02-06T13:25:07.420
> 
> 标签：go

根据几个小组的帖子，以下代码应该可以工作：

```
package main

import "fmt"

func demo(format string, args ...interface{}) {
  var count = len(args)
  for i := 0; i < count; i++ {
    fmt.Printf("! %s\n", args[i])
  }
  fmt.Printf("%+v\n", format)
  fmt.Printf("%+v\n", args)
  fmt.Printf(format, args)
  fmt.Printf("\n")
}

func main() {
  demo("%s %d", "Hello World", 10)
  fmt.Printf("\n\n")
  demo("%d %s", 10, "Hello")
} 
```

并产生“Hello World 10”和“10 Hello”，但它没有。相反，它产生：

```
! Hello World
! %!s(int=10)
%s %d
[Hello World 10]
[Hello World %!s(int=10)] %d(MISSING)

! %!s(int=10)
! Hello
%d %s
[10 Hello]
[10 %!d(string=Hello)] %s(MISSING) 
```

也就是说，将 []interface{} 传递给以 ...interface{} 作为参数的函数*不会*扩展参数，而只是将其作为值传递。第一个 %s 将 []interface{} 扩展为字符串，不再处理任何参数。

我敢肯定在日志记录中必须有很多情况需要这样做；但我找不到任何可行的例子来说明如何做到这一点。

这基本上是 C 中的“vprintf”系列函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T13:37:31.200

我认为 OP 程序不应该“工作”。也许这是有意的（？）：

```
package main

import "fmt"

func demo(format string, args ...interface{}) {
        fmt.Printf(format, args...)
}

func main() {
        demo("%s %d\n\n", "Hello World", 10)
        demo("%d %s", 10, "Hello")
} 
```

（也在[这里](http://play.golang.org/p/dBLl5rpRzH)

* * *

输出：

```
Hello World 10

10 Hello 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T13:38:09.950

`fmt.Printf(format, args...)`我认为应该做你想做的事。

# perl - Perl 如何从执行 telnet 的子脚本中退出？

> ID：14730202
> 
> 赞同：1
> 
> 时间：2013-02-06T13:25:09.323
> 
> 标签：perl, telnet, exit

我有一个脚本，它执行几个命令，然后远程登录到机器。现在我需要从另一个 perl 脚本调用这个脚本。

```
$result = `some_script.pl`; 
```

脚本 some_script.pl 成功执行，但由于脚本在 telnet 提示符处等待，我无法退出主脚本。

我还需要捕获脚本的退出状态，以确保 some_script.pl 成功执行。

我无法修改 some_script.pl。

在 some_script.pl 成功执行后，有什么方法可以退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:58:40.520

我不喜欢您通过对系统的“反引号”调用实际执行 perl 脚本的方式。我建议你实际上 fork（或类似的东西）并以更可控的方式运行程序。

```
use POSIX ":sys_wait_h";
my $pid = fork();
if($pid) { # on the parent proc, $pid will point to the child
  waitpid($pid); # wait for the child to finish      
} else { # this is the child, where we want to run the telnet
  exec 'some_script.pl'; # this child will now "become" some_script.pl
} 
```

由于我不知道 some_script.pl 的实际工作原理，因此我无法在这里为您提供更多帮助。但是例如，如果您需要做的只是在 some_script.pl 的命令行上打印“quit”，您可以使用[IPC::Open2](http://search.cpan.org/~dom/perl-5.12.5/ext/IPC-Open2/lib/IPC/Open2.pm)就像[另一个问题](https://stackoverflow.com/questions/3493437/what-do-i-use-to-read-from-stdin-write-to-stdout-of-a-child-process)中建议的那样。做类似的事情：

```
use IPC::Open2;

$pid = open2(\*CHLD_OUT, \*CHLD_IN, 'some_script.pl');
print CHLD_IN "quit\n";
waitpid( $pid, 0 );
my $child_exit_status = $? >> 8; 
```

你确实需要稍微调整一下，但这个想法应该可以解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:21:23.843

试试这个，这个“魔法”关闭标准输入/输出/错误，并可能让你的程序完成。

$result = `some_script.pl >&- 2>&- <&-';

否则，您可以使用 open2 并期望在程序输出中观察特定字符串（如完成！）并在完成后关闭它。

[http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod](http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod)

问候

# jquery-ui - 访问用于从外部创建 jQuery UI 小部件的对象

> ID：14730205
> 
> 赞同：1
> 
> 时间：2013-02-06T13:25:16.850
> 
> 标签：jquery-ui

我正在创建一个小部件并想给它`defaults`一些值的对象。我希望用户允许更改它们，然后正常创建小部件（因此将使用新的默认值）。但是用户可以通过什么方式访问默认值？

例子：

```
// separate file, create widget
$.widget("namespace.myWidget", {
    defaults: {
        hello: "world"
    }
}

// index.html
// then user should be able to do something similar
$.namespace.myWidget.defaults = { goodbye: "World" };
// or
$.namespace.myWidget.defaults.hello = "Dog";

// and then create widget normally
$(".selector").myWidget(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:55:44.453

您可以将`defaults`对象直接附加到您定义的小部件：

```
(function ($) {
    $.widget("namespace.myWidget", {
        _init: function () {
            var options = $.extend({}, $.namespace.myWidget.defaults, this.options);
            /* Do something with options.hello */
        }
    });

    /* Create the `defaults` object */
    $.extend($.namespace.myWidget, {
        defaults: {
            hello: 'world'
        }
    });
}(jQuery)); 
```

然后您的小部件的用户可以修改默认值：

```
$.namespace.myWidget.defaults.hello = 'hello'; 
```

**示例：http:** [//jsfiddle.net/J5rVP/49/](http://jsfiddle.net/J5rVP/49/)

# xaml - 如何使用图像和文本填充 xaml 组合框

> ID：14730211
> 
> 赞同：1
> 
> 时间：2013-02-06T13:25:37.050
> 
> 标签：xaml, windows-8, microsoft-metro

我正在绑定一个 Xaml 组合框。我可以使用 Stackpanel 或 List 吗？你能解释一下如何以这种方式绑定数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:24:06.627

首先，您需要一些具有公共属性的数据，以用于要显示的图像和文本的 URI。下面是一个简单的例子：

```
public class ImageOption
{
    public string ImageUri { get; set; }
    public string ImageText { get; set; }
} 
```

然后，您将需要另一个公共财产来保存该数据项的一些集合。此属性需要位于可以在视图中某处设置为 DataContext 的对象上，或者可以在代码隐藏中直接分配给您的 ComboBox：

```
 public ObservableCollection<ImageOption> ImageList { get; private set; } 
```

假设 ComboBox 的某些父元素的 DataContext 已分配给包含 ImageList 属性的对象，您可以使用它来绑定集合并为每个项目显示一个简单的图像和文本：

```
<ComboBox ItemsSource="{Binding ImageList}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <Image Source="{Binding Path=ImageUri}" />
                <TextBlock Text="{Binding Path=ImageText}"/>
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

您可能还希望通过设置 MaxWidth 和/或 MaxHeight 对图像进行一些尺寸限制。

# c# - linq 解析来自 ArrayList 的整数

> ID：14730214
> 
> 赞同：2
> 
> 时间：2013-02-06T13:25:43.907
> 
> 标签：c#

我有一个来自 json 反序列化器的 ArrayList。这个数组应该只包含数字，但与往常一样，可能会发生坏事，我希望避免处理异常。这就是我所拥有的：

```
var TheListOfLongs = (from object s in TheArrayList 
                      select Convert.ToInt64(s)).ToList<long>(); 
```

只要 TheArrayList 只包含数字，它就可以正常工作。如何将`Convert.ToInt64`语句更改为 a `TryParse`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:28:35.883

```
long outValue;
//will work, but double conversion
var result = TheArrayList.Cast<object>()
            .Where(m => Int64.TryParse(m.ToString(), out outValue))
            .Select(m => Convert.ToInt64(m)).ToList();

//should avoid double Parse, but untested, see Daniel Hilgarth's answer and warnings.
var result = TheArrayList.Cast<object>()
            .Where(m => Int64.TryParse(m.ToString(), out outValue))
            .Select(m => outValue).ToList(); 
```

或者好的老foreach，这可能是最好的选择。

```
var list = new List<long>();
long outValue;
foreach (object value in the ArayList) {
   if (Int64.TryParse(value.ToString(), out outValue))
      list.Add(outValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:29:25.780

你可以

```
 Int64 value;
      var TheListOfLongs = TheArrayList.
                          Where(entry => Int64.TryParse(entry, out value)).
                          Select(entry=> Convert.ToInt64(entry)).ToList<long>() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:32:20.283

我只是循环，不需要linq

```
bool allParsed = true;
List<long> longList = new List<long>();
foreach(object s in TheArrayList)
{
    long val;
    if(Int64.TryParse(s, out val))
        longList.Add(val);
    else
    {
        allParsed = false;
        break;
    }
}

if(!allParsed)
    // handle the error 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:34:09.857

您可以利用 LINQ to Objects 的延迟特性：

```
long value = 0;
var result = TheArrayList.Where(m => long.TryParse(m, out value))
                         .Select(x => value); 
```

这可行，但在其他方面存在问题：

1.  如果您想将该代码转换为 PLINQ，它将中断。
2.  `TheArrayList`如果实际上是一些 IQueryable 进入数据库，它将中断。
3.  它看起来像它的越野车

# c# - 使用 CSharpCodeProvider 允许用户创建函数

> ID：14730219
> 
> 赞同：1
> 
> 时间：2013-02-06T13:25:51.633
> 
> 标签：c#, .net, runtime

我有一个现有的 asp.net (c#) 应用程序。我需要为用户提供一种创建灵活规则的方法，以计算给定雇用日期和注册日期的生效日期。

可能使用的一些规则示例：

1.  雇用日期或入学日期中的较晚者
2.  雇用日期 + 90 天
3.  注册日期后的第一个月的第一天
4.  如果注册日期在当月 15 日之前，则生效日期为下个月 1 日。如果是 15 日或之后，则为之后的一个月 1 日。

我从一些偏移字段（日偏移、月偏移等）开始，但是当我遇到新的需求时，我开始意识到当前的方法不够灵活。

我想做的是允许最终用户定义一个函数，该函数返回给定两个参数（hiredate、enrollmentdate）的日期，并将该函数存储在数据库中。当我需要计算有效日期时，我会将此函数从数据库中拉出，执行它并传入参数以获取我的有效日期。

我最初的反应是寻找允许我定义日期操作函数并将其集成到我的解决方案中的 DSL。然而，我对合适 DSL 的搜索却一无所获。

现在我想知道 CSharpCodeProvider 是否可以作为解决方案的一个组件。如果我从数据库中提取一个字符串，并通过 CsharpCodeProvider 对其进行编译，我是否可以强制生成的代码与函数签名匹配（采用 2 个日期时间参数，并返回一个数据时间）？

有没有办法确保该功能没有任何副作用？例如，无 I/O。没有读取或会话、缓存或应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:39:03.013

在这里查看我最近的答案：[解析“DateTime.Now”？](https://stackoverflow.com/questions/14647703/parsing-datetime-now/14648880#14648880)

从本质上讲，您可以轻松地利用现有的库（如[FLEE](http://flee.codeplex.com/)）来解析表达式并为这些规则发出 IL。如果您查看示例，您可以了解如何设置变量以供用户表达式利用。例如，您可以定义一个“规则”，它由一些输入变量（如`HireDate`or `EnrollmentDate`）和一个返回日期的用户表达式/谓词组成。如果您`DateTime`像我在链接的答案中那样公开成员，那么用户也可以利用这些成员。

就像一个简单的例子，未经测试，但应该给你一个想法。

您可以设置一些自定义函数来提供帮助，例如获取一个月的第一天：

```
public static class CustomFunctions
{
    public static DateTime GetFirstDayOfMonth(DateTime date)
    {
        return new DateTime(date.Year, date.Month, 1);
    }
} 
```

基本的 FLEE 设置（您必须根据需要进行自定义/调整）

```
ExpressionContext context = new ExpressionContext();

//Tell FLEE to expect a DateTime result; if the expression evaluates otherwise, 
//throws an ExpressionCompileException when compiling the expression
context.Options.ResultType = typeof(DateTime);

//Instruct FLEE to expose the `DateTime` static members and have 
//them accessible via "DateTime".
//This mimics the same exact C# syntax to access `DateTime.Now`
context.Imports.AddType(typeof(DateTime), "DateTime");
context.Imports.AddType(typeof(CustomFunctions));

//Expose your key variables like HireDate and EnrollmentDate
context.Variables["HireDate"] = GetHireDate(); //DateTime I suppose
context.Variables["EnrollmentDate"] = GetEnrollmentDate(); //DateTime I suppose

//Parse the expression, naturally the string would come from your data source
IGenericExpression<DateTime> expression = context.CompileGeneric<DateTime>(GetYourRule(), context);

DateTime date = expression.Evaluate(); 
```

那么您的规则可能如下所示：

```
string rule1 = "if(HireDate > EnrollmentDate, HireDate, EnrollmentDate)";
string rule2 = "HireDate.AddDays(90)";
string rule3 = "GetFirstDayOfMonth(EnrollmentDate.AddMonths(1))";
string rule4 = "GetFirstDayOfMonth(EnrollmentDate.AddMonths(if(EnrollmentDate.Day < 15, 1, 2)))"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T11:13:57.890

以下链接包含您所追求的。本质上，它是一个可插入的 DSL，它允许定义无限的日期计划和集合，然后传递给函数、相交、联合等。

[http://code.google.com/p/drules/](http://code.google.com/p/drules/)

# javascript - addEventListener onClick 不起作用

> ID：14730221
> 
> 赞同：0
> 
> 时间：2013-02-06T13:25:55.553
> 
> 标签：javascript, function, addeventlistener

我不知道我的代码有什么问题，但是当我使用 addEventListener() 时它什么也没做。

有没有人有其他解决方案，以便我可以将#ibm 按钮 ID 绑定到 compute() onClick 事件？

我计划在 Firfox OS 上运行它，因此禁止在按钮本身上设置 onClick 属性，如 CSP Violations 所述。

```
 function compute()
    {
var w = parseInt(document.getElementById('weight').value);
var hf = parseInt(document.getElementById('height_ft').value);
var hi = parseInt(document.getElementById('height_in').value);

    if (!checker(w))
{

            showAndroidToast('Please input your weight');
    return;
}
else if (!checker(hf))
{

            showAndroidToast('Please input your height');
    return;
}

if (!checker(hi))
{
    var i = 0;
    document.getElementById('height_in').value = i;
}
else
{
    var i = parseInt(document.getElementById('height_in').value);
}

var comp_h = parseFloat((hf * 12) + (i * 1));
var tot_h = comp_h * comp_h;    

comp = formula(w, tot_h);
document.getElementById('bmitot').value = comp;

if (comp > 30)
{
    document.getElementById('res').value = 'Severe Level! Thats too much FAT!      Go get some diet pills or something!';
    document.getElementById("bmitot").style.backgroundColor = "red";
    document.getElementById("zero").style.visibility = "hidden";
    document.getElementById("one").style.visibility = "hidden";
    document.getElementById("two").style.visibility = "hidden";
    document.getElementById("three").style.visibility = "visible";
}
if (comp > 25 && comp <=29.9)
{
    document.getElementById('res').value = 'Bad Level! You are too FAT!';
    document.getElementById("bmitot").style.backgroundColor = "yellow";
    document.getElementById("zero").style.visibility = "hidden";
    document.getElementById("one").style.visibility = "hidden";
    document.getElementById("two").style.visibility = "visible";
    document.getElementById("three").style.visibility = "hidden";
}
if (comp > 18.5 && comp <=24.9)
{
    document.getElementById('res').value = 'Nice! You are on the safe level!';
    document.getElementById("bmitot").style.backgroundColor = "green";
    document.getElementById("zero").style.visibility = "hidden";
    document.getElementById("one").style.visibility = "visible";
    document.getElementById("two").style.visibility = "hidden";
    document.getElementById("three").style.visibility = "hidden";
}
if (comp < 18.5)
{
    document.getElementById('res').value = 'Bad Level! Go get some nutrients!';
    document.getElementById("bmitot").style.backgroundColor = "yellow";
    document.getElementById("zero").style.visibility = "visible";
    document.getElementById("one").style.visibility = "hidden";
    document.getElementById("two").style.visibility = "hidden";
    document.getElementById("three").style.visibility = "hidden";
}
}

function formula(w, h)
{
var bmi = w/h * 703;
var a_bmi = Math.floor(bmi);
var dif = bmi - a_bmi;
dif = dif * 10;
diff = Math.round(dif);

if (dif == 10)
{
    a_bmi += 1;
    dif = 0;    
}
bmi = a_bmi + "." + diff;
return bmi;
}

function checker(type)
{
  if (isNaN(parseInt(type)))
{
  return false;
} 
else if (type < 0)
{
  return false;
}
else
{
return true;
}
}

function showAndroidToast(toast) 
{
   Android.showToast(toast);
}

 document.getElementById('ibm').addEventListener('click', compute); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:36:06.797

您的代码执行良好，计算功能触发良好。`execute`函数中的代码可能存在问题。检查这个[小提琴](http://jsfiddle.net/bLP3p/2/)

# java - 如何在 JAVA 中查找方法的返回类型？

> ID：14730223
> 
> 赞同：13
> 
> 时间：2013-02-06T13:26:01.817
> 
> 标签：java, reflection

谁能帮我找到JAVA中方法的返回类型。我试过这个。但不幸的是，它不起作用。请指导我。

```
 Method testMethod = master.getClass().getMethod("getCnt");

  if(!"int".equals(testMethod.getReturnType()))
   {
      System.out.println("not int ::" + testMethod.getReturnType());
   } 
```

**输出 ：**

不是整数 ::int

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T13:32:08.013

方法`getReturnType()`返回`Class`

你可以试试：

```
if (testMethod.getReturnType().equals(Integer.TYPE)){ 
      .....;  
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T13:34:27.877

```
if(!int.class == testMethod.getReturnType())
{
  System.out.println("not int ::"+testMethod.getReturnType());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T13:29:41.400

返回类型为`Class<?>`... 获取字符串尝试：

```
 if(!"int".equals(testMethod.getReturnType().getName()))
   {
      System.out.println("not int ::"+testMethod.getReturnType());
   } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T13:37:39.930

`getReturnType()`返回`Class<?>`而不是 a `String`，因此您的比较不正确。

任何一个

Integer.TYPE.equals(testMethod.getReturnType())

或者

int.class.equals(testMethod.getReturnType())

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T13:30:17.527

`getReturnType()`返回一个 Class 对象，并且您正在与一个字符串进行比较。你可以试试

```
if(!"int".equals(testMethod.getReturnType().getName() )) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T13:30:54.563

该`getReturnType`方法返回一个`Class<?>`对象，而不是`String`您与之比较的对象。一个`Class<?>`对象永远不会等于一个`String`对象。

为了比较它们，您必须使用

`!"int".equals(testMethod.getReturnType().toString())`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T13:31:38.747

getretunType() 返回`Class<T>`。您可以测试它是否等于 Integer 的类型

```
if (testMethod.getReturnType().equals(Integer.TYPE)) {
    out.println("got int");
} 
```

# iphone - 半透明 UINavigationController，模态呈现

> ID：14730224
> 
> 赞同：0
> 
> 时间：2013-02-06T13:26:07.493
> 
> 标签：iphone, ios, objective-c, ipad, uikit

如何呈现一个`UINavigationController`这样的视图，它所呈现的视图在背景中仍然可见？

我的经验是，`UINavigationController`它将剪辑其视图下方的任何内容，因此设置`UINavigationController.view.alpha`将显示固定的颜色背景，而不是呈现视图的内容。

这可以改变吗？

**编辑**

我对导航栏不感兴趣，但对导航控制器管理的全部内容不感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:09:10.370

问题不在于 UINavigationController，而在于您以模态方式呈现它。以模态方式呈现的 ViewController 永远不会是透明的。

您可以通过将 UINavigationControllers 视图作为子视图添加到主 UIWindow 来伪造模态演示。

在 XCode 中进行测试时，此示例适用于我：

```
 UIViewController *viewController = [[UIViewController alloc] init];
   viewController.view.backgroundColor = [[UIColor greenColor] colorWithAlphaComponent:0.35];

   UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:viewController];

   [[[[UIApplication sharedApplication] delegate] window] addSubview:navCon.view]; 
```

当然，您必须自己进行任何动画过渡，但使用动画块应该是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T09:56:04.743

现在有一种方法可以使用 iOS7 自定义转换来实现这一点，这种方式：

```
MyController * controller = [MyController new];
[controller setTransitioningDelegate:self.transitionController];
controller.modalPresentationStyle = UIModalPresentationCustom;
[self controller animated:YES completion:nil]; 
```

要创建自定义过渡，您需要两件事：

*   一个 TransitionDelegate 对象（实现 `<UIViewControllerTransitionDelegate>`）
*   一个“AnimatedTransitioning”对象（实现`<UIViewControllerAnimatedTransitioning>`）

您可以在本教程中找到有关自定义转换的更多信息：http: [//www.doubleencore.com/2013/09/ios-7-custom-transitions/](http://www.doubleencore.com/2013/09/ios-7-custom-transitions/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:46:04.800

if you wish this behavior you can not use a `UINavigationController`, as you say the navigation controller clip the view of the content controller. To do what you want you should add a navigator bar to your view instead, and simulate the actions of the navigation controller. To create a back button similar to the controller read [this article](http://idevrecipes.com/2011/01/12/how-do-iphone-apps-instagramreederdailybooth-implement-custom-navigationbar-with-variable-width-back-buttons/)

# jquery - Flot 和 GraphTable - 表格中的图形

> ID：14730227
> 
> 赞同：0
> 
> 时间：2013-02-06T13:26:12.393
> 
> 标签：jquery, charts, flot

我对 flot 很陌生，我的老板让我创建一个从 html 表到柱形图的图表。现在我不太有信心将我的数据库中的数据提取为 flot 的格式化版本，但可以轻松地将其提取为 html 表格格式，因此我尝试对一小部分数据样本进行此操作，但没有成功。这是我到目前为止所拥有的

现在样本数据如下： ![样本](../Images/932c099850e3a42bbae85e626995bd87.png)

我想制作这个： ![图表](../Images/44dd1dca2bd45d7346af82e16e9da28c.png)

但是当我尝试它时，我得到一个空图表所以这是我的尝试：

HTML 表格设置

```
 <table id="table1">
        <caption>Activity Scores</caption>
        <thead>
            <tr>
                <th></th>
                <th>Blue Team</th>
                <th>Red Team</th>
                <th>Yellow Team</th>
                <th>Green Team</th>
                <th>Purple Team</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Activity #1</th>
                <td>28</td>
                <td>37</td>
                <td>20</td>
                <td>88</td>
                <td>82</td>
            </tr>
            <tr>
                <th>Activity #2</th>
                <td>85</td>
                <td>98</td>
                <td>23</td>
                <td>11</td>
                <td>55</td>
            </tr>
            <tr>
                <th>Activity #3</th>
                <td>9</td>
                <td>45</td>
                <td>27</td>
                <td>18</td>
                <td>47</td>
            </tr>
            <tr>
                <th>Activity #4</th>
                <td>98</td>
                <td>15</td>
                <td>89</td>
                <td>32</td>
                <td>48</td>
            </tr>
            <tr>
                <th>Activity #5</th>
                <td>30</td>
                <td>38</td>
                <td>15</td>
                <td>67</td>
                <td>15</td>
            </tr>
            <tr>
                <th>Activity #6</th>
                <td>64</td>
                <td>53</td>
                <td>31</td>
                <td>8</td>
                <td>55</td>
            </tr>
            <tr>
                <th>Activity #7</th>
                <td>76</td>
                <td>44</td>
                <td>82</td>
                <td>93</td>
                <td>89</td>
            </tr>
            <tr>
                <th>Activity #8</th>
                <td>74</td>
                <td>25</td>
                <td>74</td>
                <td>13</td>
                <td>22</td>
            </tr>
            <tr>
                <th>Activity #9</th>
                <td>80</td>
                <td>70</td>
                <td>72</td>
                <td>60</td>
                <td>57</td>
            </tr>
            <tr>
                <th>Activity #10</th>
                <td>11</td>
                <td>31</td>
                <td>75</td>
                <td>15</td>
                <td>56</td>
            </tr>
            <tr>
                <th>Activity #11</th>
                <td>46</td>
                <td>84</td>
                <td>36</td>
                <td>79</td>
                <td>40</td>
            </tr>
            <tr>
                <th>Activity #12</th>
                <td>9</td>
                <td>55</td>
                <td>37</td>
                <td>24</td>
                <td>43</td>
            </tr>
            <tr>
                <th>Activity #13</th>
                <td>78</td>
                <td>74</td>
                <td>51</td>
                <td>68</td>
                <td>85</td>
            </tr>
            <tr>
                <th>Activity #14</th>
                <td>13</td>
                <td>90</td>
                <td>80</td>
                <td>76</td>
                <td>69</td>
            </tr>
        </tbody>
    </table> 
```

还有我的 JS

```
 <script type="text/javascript" charset="utf-8">
        $(document).ready(function() {
            // put all your jQuery goodness in here.
            $("#table1").each(function() {

                var colors = ['red','blue','green','yellow','purple'];
                $("#table1 thead th:not(:first)").each(function() {
                    colors.push($(this).css("color"));
                });

                $(this).graphTable({
                    series: 'columns',
                    position: 'replace',
                    width : '100%',
                    height: '325px',
                    colors: colors
                }, {
                    series: {
                        bar: { 
                            show: true,
                            label: {
                                show: true,
                                formatter: function(label, series){
                                    return '<div style="font-size:10px;text-align:center;padding:5px 7px;color:#FFF;text-shadow:none; background-color:#555;">'+label+'<br>'+Math.round(series.percent)+'%</div>';
                                },
                                background: { opacity: 0.8 }
                            }
                        }
                    },
                    legend: {
                        show: false
                    },
                    grid: {
                        hoverable: false,
                        autoHighlight: false
                    }
                });
            });
        });
        </script> 
```

**欢迎任何和所有帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:11:56.807

该`bar:`选项实际上应该是`bars:`，尽管这可能不是唯一的问题，否则它仍应显示线条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:31:48.830

看起来 graphTable 不喜欢行标题中的名称，它需要数字。将此行添加到您的 graphTable 选项将使它的图形：

```
xaxisTransform: function(s){
    return (s.replace('Activity #',''));
} 
```

`bar`此外，您需要更正`bars`DNS 所说的。

# postgresql - PostgreSQL查询列出所有表名？

> ID：14730228
> 
> 赞同：237
> 
> 时间：2013-02-06T13:26:18.897
> 
> 标签：postgresql, postgresql-9.2, information-schema

是否有任何查询可用于列出我的 Postgres DB 中的所有表。

我尝试了一个查询，例如：

```
SELECT table_name FROM information_schema.tables
                      WHERE table_schema='public' 
```

但是这个查询也返回视图。

我怎样才能只得到表名，而不是视图？

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2013-02-06T13:47:22.047

这个查询怎么样（基于[手册](http://www.postgresql.org/docs/current/interactive/infoschema-tables.html)的描述）？

```
SELECT table_name
  FROM information_schema.tables
 WHERE table_schema='public'
   AND table_type='BASE TABLE'; 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-02-27T09:10:06.853

如果你想要数据库列表

```
SELECT datname FROM pg_database WHERE datistemplate = false; 
```

如果您想要所有数据库的当前 pg 安装中的表列表

```
SELECT table_schema,table_name FROM information_schema.tables
ORDER BY table_schema,table_name; 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-26T12:40:12.057

使用您想要的数据库打开 postgres 终端：

```
psql dbname (run this line in a terminal) 
```

然后，在 postgres 环境中运行此命令

```
\d 
```

这将按名称描述所有表。基本上是按名称升序排列的表列表。

然后你可以试试这个按字段来描述一个表：

```
\d tablename. 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-08-21T17:54:24.790

尝试这个：

```
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema='public' AND table_type='BASE TABLE' 
```

这个有效！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-10-13T11:36:16.127

```
select 
 relname as table 
from 
 pg_stat_user_tables 
where schemaname = 'public' 
```

*   如果[**track_activities**](http://www.postgresql.org/docs/9.3/static/monitoring-stats.html)被禁用，这将不起作用

* * *

```
select 
  tablename as table 
from 
  pg_tables  
where schemaname = 'public' 
```

*   阅读更多关于[**pg_tables**](http://www.postgresql.org/docs/9.3/static/view-pg-tables.html)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-12-27T04:06:06.907

```
SELECT table_name
FROM information_schema.tables
WHERE table_type='BASE TABLE'
AND table_schema='public'; 
```

对于 MySQL，您需要 table_schema='dbName' 而对于 MSSQL，请删除该条件。

请注意，“仅显示当前用户有权访问的那些表和视图”。此外，如果您可以访问多个数据库并希望将结果限制为某个数据库，您可以通过添加条件 AND table_catalog='yourDatabase'（在 PostgreSQL 中）来实现。

如果您还想摆脱显示行名的页眉和显示行数的页脚，您可以使用命令行选项 -t（--tuples-only 的缩写）启动 psql，或者您可以切换 psql 中的设置\t 的命令行（\pset tuples_only 的缩写）。例如，当使用 \g [ |command ] 将输出传递到另一个命令时，这可能很有用。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-08-04T13:32:10.347

`\dt`让步怎么样`psql`？请参阅[https://www.postgresql.org/docs/current/static/app-psql.html](https://www.postgresql.org/docs/current/static/app-psql.html)。

# java - MySQL、Java 和 UTF8

> ID：14730231
> 
> 赞同：1
> 
> 时间：2013-02-06T13:26:30.317
> 
> 标签：java, mysql, unicode, utf-8

我有一个数据库，每个表上都有表中的`MEDIUMBLOB`字段`ENGINE=InnoDB DEFAULT CHARSET=utf8`。

`useUnicode=true&characterEncoding=UTF8&character_set_client=UTF8&character_set_database=UTF8&character_set_results=UTF8&character_set_server=UTF8&character_set_system=UTF8`我使用URL连接到数据库。

（我已经尝试过`useUnicode=true&characterEncoding=UTF8`相同的结果。）

当我使用`mysql`命令行查看数据库中的值时，我可以很好地看到非 ASCII 字符。

但是当我使用从数据库中读取字符串时，`executeQuery()` `getString()`我得到了胡言乱语。如何正确读取值？

我正在使用 log4j 显示我正在写入数据库的字符串，以及我读回的字符串，以及我写的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:32:50.630

那是一个 BLOB，而不是一个字符串。所以你想要`getBytes`手动解码它。

```
 new String( bytes, "UTF-8"); //Subsitute "UTF-8" with whatever encoding the blob is in 
```

如果您想要更透明的支持，请使用 UTF-8 定义一个 mediumtext 列。然后所有的配置都将生效，您可以使用 getString 自动获得正确的字符串。

# php - 想要在 php 查询中插入多行

> ID：14730234
> 
> 赞同：0
> 
> 时间：2013-02-06T13:26:31.833
> 
> 标签：php, html, mysql

我想`<textarea>`从具有变量名称的多行中获取字段的值，因为`name="sts<?php $i ?>"`它应该根据行改变，如`sts0`, `sts1`, `sts2`, `sts3`, ... 哪里`$i`是一个随着 for 循环而改变的变量。

现在我想要分配给它们各自变量的不同行的值。

我在这里使用 `method="post"`

```
for($i=0; $i<$count; $i++)
{
    $row=mysql_fetch_row($list);
    $mobile[$i]=$row[1];
    $insan[$i]=$row[4];
    echo "<tr>
          <td>".($i+1)."</td><td>".$row[0]."</td><td>".$row[1]."</td><td>".$row[2]."</td><td>".$row[3]."</td><td>".$row[4]."</td><td>".$row[5]."</td><td>".$row[6]."</td><td>".$row[7]."</td><td>".$row[8]."</td><td>".$row[9]."</td><td>" ?>
          <textarea cols="20" rows="3" name="sts<?php $i ?>" >Pending</textarea></td></tr>
          <?php " ";
} 
```

之后，我想像下面的代码一样打印它。`$mobile`它正确打印和的值，`$insan`但给出错误`$_POST['sts'.$i.'']`：

![截图][1]

```
for($i=0; $i<$count; $i++)
{
    echo "".$mobile[$i]." ".$insan[$i]." ".$_POST['sts'.$i.'']."<br>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:58:10.333

您在 textarea 的字段名称中错过了“echo”

# php - 使用 json_encode 参数调用 javascript 函数

> ID：14730235
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:26:32.970
> 
> 标签：php, javascript, jquery

我想调用一个函数 onclick，但使用这样的 json_encode 参数：

```
<a href="#" onclick="javascript:table1Modif(<?php echo substr(json_encode($res['base']),1,-1); ?>);return false;"> 
```

而 Jquery 函数只是提醒参数：

```
<script>
    function table1Modif(key){
        $('#table1').html(function() {
            alert(key);
        }); 

    }
</script> 
```

但我有一个“未定义”的错误！我确定这是由于json_encode，但我不知道如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:51:55.383

看起来您正在传递一个字符串以`json_encode`生成 JavaScript 字符串文字（这不是有效的 JSON）。

您正在使用`substr`从该字符串中删除引号。

因此，JavaScript 将看到一个标识符（在该上下文中将被视为一个变量）。

您需要一个字符串文字，因此首先要做的是**删除 substr 调用**。

这将产生一个新问题。您将字符串插入 HTML 文档，但不将其表示为 HTML。因此`"`，字符串文字开头的字符将被视为**属性 value 的结尾**，这是您不想要的。

将非 HTML 内容插入 HTML 文档时，您需要将其表示为 HTML。通过该`htmlspecialchars`函数运行代码来执行此操作。

```
onclick="table1Modif(<?php 
    echo htmlspecialchars(
        json_encode($res['base'])
    );
?>);return false;" 
```

顺便说一句，我已经删除了完全无用的[`javascript:`标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)。您没有往返的循环，`break`因此`continue`它没有做任何事情。当你在它的时候，你应该`href="#"`用更明智的东西代替。遵循[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)原则。

# php - Cron 作业/连接超时问题

> ID：14730237
> 
> 赞同：0
> 
> 时间：2013-02-06T13:26:41.490
> 
> 标签：php, linux, curl, cron, wget

我在 cron 作业命令中使用 wget 来运行这样的机器人：

```
/usr/bin/wget -O /dev/null http://www.website.com/bot/update?botkey=wpdalasd12laa 
```

但它不起作用。我收到包含此重复错误的失败电子邮件：

```
> Resolving www.website.com... 55.55.55.55
> Connecting to www.website.com|55.55.55.55|:80... connected.
> HTTP request sent, awaiting response... Read error (Connection timed out) in headers.
> Retrying. 
```

机器人的运行时间超过 15 分钟。所以我认为正因为如此，连接变得超时。

可能，通过 php 运行 bot 更有意义。但是因为所有系统都运行在一个框架上，所以应用起来并不容易。通过避免连接超时，是否可以通过 wget 或 curl 运行 bot？

# c# - SecurityIdentifier.Translate(typeof(NTaccount)) 被窃听？

> ID：14730251
> 
> 赞同：7
> 
> 时间：2013-02-06T13:27:14.550
> 
> 标签：c#, .net, acl, ntfs, security-identifier

在进行从 SID 到 NTAccount 的转换时，我使用以下代码：

```
DirectorySecurity folder_sec = Directory.GetAccessControl("c:\\test", AccessControlSections.All);
AuthorizationRuleCollection rules = folder_sec.GetAccessRules(true, true, typeof(SecurityIdentifier));

foreach (FileSystemAccessRule rule in rules)
{
    SecurityIdentifier sid = new SecurityIdentifier(rule.IdentityReference.Value);
    IdentityReference name = sid.Translate(typeof(NTAccount));

    string output = name + " | " + sid.tostring();
} 
```

是的，我意识到您可以`NTAccount`从该`folder_sec.GetAccessRules`方法中获得 from，但我发现`SecurityIdentifier.Translate`正在使用相同的子例程，并且发生了相同的错误。归根结底，ACL 只是 SID 数组。

错误是，当您有两个名称完全相同但位于两个独立域（受信任，而非子域）中的活动目录对象（组、用户等）时，该`translate`方法会返回错误的 NTAccount。它最终在执行代码的机器所在的域中返回具有相同名称的 NTAccount。`NTAccount`从与您域中的另一个对象不同的名称的其他域获取s 返回正常。

假设您在 domain_frank 中的机器上有一个目录，这是 ACL：

*   domain_frank\IT 团队
*   domain_bob\IT 团队
*   domain_frank\戴夫
*   domain_bob\Ted

如果你运行它，虽然上面的代码`output`看起来像：

```
domain_frank\IT Team | S-1-5-21-4000000000-4000000000-2000000000-28480
domain_frank\IT Team | S-1-5-21-1000000000-8000000000-3000000000-81912
domain_frank\Dave | S-1-5-21-4000000000-4000000000-2000000000-86875
domain_bob\Ted |  S-1-5-21-1000000000-8000000000-3000000000-96521 
```

假设名为 Dave 的对象不在 domain_bob 中，而名为 Ted 的对象不在 domain_frank 中。但是，如果您查看 SID，您可以清楚地看到域部分完全不同，因此您知道正确的对象在 ACL 中，至少在 SID 中。与查找有关的东西正在中断。

对我来说，结果是我必须编写自己的算法来查看 SID 并在 SID 所属的域上进行活动目录查找。非常非常慢，而且很痛苦。

这是一个已知的错误，是否有令人满意的解决方案？

# javascript - javascript可以使用功能窗口更新HTML链接吗？

> ID：14730252
> 
> 赞同：1
> 
> 时间：2013-02-06T13:27:15.160
> 
> 标签：javascript, html

我对页面有一些疑问：

我在这个页面上浏览：[http ://www.mercadolivre.com.br/](http://www.mercadolivre.com.br/)

SEARCH 按钮（“Buscar”）是这样的：

```
<form id="formSearch" class="ch-form ch-header-form" action="http://www.mercadolivre.com.br/jm/search" method="get" role="search">
<input type="text" class="search" maxlength="60" name="as_word" autocomplete="off" id="query" tabindex="1" autofocus>
<input id="btnSearch" type="submit" value="Buscar" id="MENU:BUSCAD" class="ch-btn ch-btn-small ch-btn-search" accesskey="b" tabindex="2"> 
```

因此，提交按钮将重定向到：“ [http://www.mercadolivre.com.br/jm/search](http://www.mercadolivre.com.br/jm/search) ”

但是这个页面不存在，当我们在浏览器上点击这个链接时，页面会重定向到“ [http://lista.mercadolivre.com.br/](http://lista.mercadolivre.com.br/) ”。

当我在页面上搜索 lista.mercadolivre... 时，我得到以下 javascript：

```
homes.vars = {
nickname: "TEST",
searchUri: "http://lista.mercadolivre.com.br/",
... 
```

但是问题是：如果提交输入没有和searchUri链接，这个链接是怎么提交的呢？

提前致谢！

# python - 通过流解析 N-Triples

> ID：14730255
> 
> 赞同：3
> 
> 时间：2013-02-06T13:27:22.943
> 
> 标签：python, rdf, redland, n-triples

有一段时间我对此感到相当困惑，但我终于学会了如何使用 Raptor 和 Redland Python Extensions 解析大型 N-Triples RDF 存储 (.nt)。

一个常见的示例是执行以下操作：

```
import RDF
parser=RDF.Parser(name="ntriples")
model=RDF.Model()
stream=parser.parse_into_model(model,"file:./mybigfile.nt")
for triple in model:
    print triple.subject, triple.predicate, triple.object 
```

Parse_into_model() 默认将对象加载到内存中，因此如果您正在解析一个大文件，您可以考虑使用 HashStorage 作为您的模型并以这种方式对其进行序列化。

但是，如果您只想读取文件并说，将其添加到 MongoDB 而不将其加载到模型或类似的复杂程序中怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:27:22.943

```
import RDF

parser=RDF.NTriplesParser()

for triple in parser.parse_as_stream("file:./mybigNTfile.nt"):
  print triple.subject, triple.predicate, triple.object 
```

# php - Zend Framework 2 FormSubmit 调用控制器动作

> ID：14730256
> 
> 赞同：3
> 
> 时间：2013-02-06T13:27:23.387
> 
> 标签：php, html, zend-framework2

如何将“提交”按钮连接到控制器操作，所以当我按下“提交”时，我的控制器将触发特定操作？

我的控制器：

```
class MyController extends AbstractActionController
{
    public function viewAction()
    {
        $form = new MyForm();
        $viewModel = new ViewModel(array('form' => $form));
        $viewModel->setTemplate('myForm');

        return $viewModel;
    }

    public function submitAction()
    {
       // want to trigger this
    }
} 
```

我的表格：

```
class MyForm extends Form
{
    public function __construct()
    {
        parent::__construct('SubmitForm');
        $this->setAttribute('method', 'post');

        $this->add(array(   'name'      => 'submit',
                            'type'      => 'Zend\Form\Element\Submit',
                            'attributes' => array('type'    => 'submit',
                                                  'value'   => 'Submit',
                                                  'id'      => 'submitButton'),
        ));
    }

} 
```

myForm.phtml：

```
<?php 

$form = $this->form;
$form->prepare();

echo $this->form()->openTag($form);
echo $this->formSubmit($form->get('submit'));    // I want pressing this element should route to MyController::submitAction...
echo $this->form()->closeTag();

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:44:45.810

您可以使用：

```
$form->setAttribute('action', $url); 
```

您可以`$url`通过使用 Url 助手获得：

*   在视图中 -`$this->url('my-route');`
*   在控制器中 -`$this->url()->fromRoute('my-route');`

# ios - Parse.com 图像库打开图像详细信息视图

> ID：14730260
> 
> 赞同：0
> 
> 时间：2013-02-06T13:27:37.123
> 
> 标签：ios, objective-c, xcode, parse-platform

我的编程时间不长，我正在尝试使用 Parse.com 创建一个简单的图片库，我遵循了本教程[https://www.parse.com/tutorials/saving-images](https://www.parse.com/tutorials/saving-images)但使用情节提要而不是笔尖.

我设法让它大部分工作，但我被困在最后一个障碍，当谈到在新视图中打开所选图像的全尺寸时。在网络上给出的其他答案之后，我试图将图像传递给详细视图，`- (void)prepareForSegue:`但我仍然没有运气。

我在 ViewController.h 中的代码目前看起来像这样

```
- (void)buttonTouched:(id)sender {
    PFObject *theObject = (PFObject *)[allImages objectAtIndex:[sender tag]];
    PFFile *theImage = [theObject objectForKey:@"imageFile"];

    NSData *imageData;
    imageData = [theImage getData];
    selectedPhoto = [UIImage imageWithData:imageData];
    [self performSegueWithIdentifier:@"goGo" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([[segue identifier] isEqualToString:@"goGo"]) {
        PhotoDetailViewController *pdvc = [[PhotoDetailViewController alloc] init];
        pdvc.selectedImage = selectedPhoto;
    }
} 
```

并在 DetailViewController.h

```
- (void)setDetailImage {
    self.photoImageView.image = selectedImage;
} 
```

在加载图像时，视图打开为空白，对此的任何帮助都将是巨大的帮助。如果它更容易，我可以上传项目。

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:34:24.047

您的实际`prepareForSegue`陈述没有任何作用：您正在初始化`selectedImage`一个全新的`PhotoDetailViewController`但不是将要呈现的那个。

尝试更换

```
PhotoDetailViewController *pdvc = [[PhotoDetailViewController alloc] init]; 
```

经过

```
PhotoDetailViewController *pdvc = (PhotoDetailViewController *)segue.destinationController; 
```

# c# - 带有存储js函数的MongoDB map reduce c#

> ID：14730261
> 
> 赞同：0
> 
> 时间：2013-02-06T13:27:42.053
> 
> 标签：c#, mongodb

我用 db.system.js.save 命令保存了我的 map 和 reduce 函数，

我想在 c# 中调用这个函数与 map reduce 相同的

```
MongoClient client = new MongoClient();
        MongoServer server = client.GetServer();
        MongoDatabase test = server.GetDatabase("test");
        MongoCredentials credentials = new MongoCredentials("username", "password");
        var databaseSettings = server.CreateDatabaseSettings("test");
        var database = server.GetDatabase(databaseSettings);

        BsonValue bv = test.Eval("GetSum(3,10)" ); 
```

有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T08:12:41.883

答案是；

```
MongoClient client = new MongoClient();
    MongoServer server = client.GetServer();
    MongoDatabase test = server.GetDatabase("test");
    MongoCredentials credentials = new MongoCredentials("username", "password");
    var databaseSettings = server.CreateDatabaseSettings("test");
    var database = server.GetDatabase(databaseSettings);

    BsonValue bv = test.Eval("GetSum",3,10 ); // return stored js function
BsonValue bv1 = test.Eval(bv .AsBsonJavaScript.Code,3,10); // execute jsfunction 
```

# ruby-on-rails - 如何扩展 auth_token 的非常短的到期时间？

> ID：14730262
> 
> 赞同：0
> 
> 时间：2013-02-06T13:27:49.880
> 
> 标签：ruby-on-rails, mongodb, memcached, redis, scalability

我正在使用 Mongodb 来存储用户的数据，包括用户状态（在线|离线|忙碌）。到期时间只有几秒钟。如果几秒钟后用户没有出现（发送保持连接请求），我想将状态设置为离线。

我正在为此寻找可扩展的解决方案。我正在考虑添加“lastseen”属性并运行 cron 作业来更新状态，但我认为它不可扩展。

有一个更好的方法吗？我如何使用 Redis 或 Memcashed 来帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:56:46.863

您可以使用 TTL 集合。[http://docs.mongodb.org/manual/tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)

一种可行的技术是拥有一个带有 last_seen 时间戳的会话集合。TTL 集合将配置为在 last_seen 时间戳超过 X 秒之前删除会话。只要会话在线，您就会定期刷新 last_seen 时间戳以防止它被清理。

例子：

1.  设置 TTL 集合：

    db.sessions.ensureIndex( { last_seen:1 },{ expireAfterSeconds: 60 } );

2.  ping 以保持会话处于活动状态（或者如果它不存在则创建它）

    db.sessions.update( {_id: , last_seen: }, { upsert:true } );

3.  查询用户是否在线：

    会话 = db.sessions.find( { _id: } )

    *   如果返回一个文档，则用户在线
    *   如果没有文档返回，则它们处于脱机状态

# php - 从 PHP 在 sql 中动态添加细节

> ID：14730268
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:28:16.260
> 
> 标签：php, mysql, sql

我正在为以下模型编写脚本：

假设有 5 个事件。为了让用户注册事件，他们需要输入一些详细信息。报名以团队的形式进行，但每次活动的成员人数不同。

在我的 sql 表中`events`有一行`members`存储所有 5 个事件的成员数。

使用存储`members`在行中的数据，我可以运行一个`for-loop`用于表格的 HTML 显示，用户可以在其中输入他和他的团队的详细信息。

但我对如何编码这`php`部分感到困惑？我知道 php，获取信息并将它们存储在 sql 数据库中，但在这种特殊情况下，我必须`php`为所有事件编写单独的脚本，因为成员的数量不会相同。

**编辑#1**

事件例如。：

```
**event1**: number of members: 5 (mem_1, mem_2, mem_3, mem_4, mem_5) 
**event2**: number of members: 3 (mem_1, mem_2, mem_3)
**event3**: number of members: 2 (mem_1, mem_2)
**event4**: number of members: 4 (mem_1, mem_2, mem_3, mem_4)
**event5**: number of members: 6 (mem_1, mem_2, mem_3, mem_4, mem_5, mem_6) 
```

这些`mem_x`字段存储成员的名称。

那么如何为注册编写单个 php 脚本。我是否必须为所有事件创建单独的函数，因为事件的成员数量不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:41:35.760

您检查输入的数据以确保输入的成员数量与活动允许的成员数量相匹配。

然后循环数据，将每个（新）成员添加到 members 表，并将 member_id 和 event_id 添加到 members_events[联结表](http://en.wikipedia.org/wiki/Junction_table)（添加的行数等于成员数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:51:51.743

如果是我，我的表格将包含以下字段：

```
Column Name        Example Value
member_id          [auto increment]
member_group       Step1
member_type        text
member_order       1
member_title       First Name
member_field_name  fname
member_default     enter first name
member_max_length  25 
```

然后，在 PHP 中，您可以执行如下查询：

```
$fields = mysql_query("Select * From [member table] Where member_group = 'Step1' Order By member_order;")
while ($field = mysql_fetch_assoc($fields)) {?>
    <label for="<?= $field['member_field_name']; ?>">
       <?= $field['member_title']; ?>
       <? switch ($field['member_type']) {
           case "text":
               echo "<input type=\"text\" name=\"".$field['member_field_name']."\" value=\"".$field['member_default']."\" />";
               break;
       }?>
    </label>
<?} 
```

然后，在处理页面时，只需再次从数据库中获取字段列表（用于字段名称）并处理页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:15:23.347

根据成员的数量，您不需要不同的功能。例如，您可以将所有插入的成员存储在一个数组中，然后执行类似的操作

```
foreach($members as $member){
   mysql_query ( "INSERT INTO members (name,eventID) VALUES (".$member['name'].",".$members['eventID'].")" );
} 
```

其中 $members 是包含成员名称的数组。

这是你想知道的吗？

# java - 登录窗口冻结

> ID：14730269
> 
> 赞同：0
> 
> 时间：2013-02-06T13:28:16.620
> 
> 标签：java, multithreading, swing, freeze

我开发了一个登录窗口，因为我的程序连接到 SSH 服务器。

我在启动程序时打开此窗口。但我需要稍后为另一台服务器重新打开它。我第二次打开它，登录窗口冻结...

有关信息

这是登录窗口代码：

```
package com.maxbester.test;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

import org.apache.log4j.Logger;

import com.maxbester.test.Server;

@SuppressWarnings("serial")
public class LoginWindow extends JFrame {

    private static final Logger LOG = Logger.getLogger(LoginWindow.class);

    private Server _server;
    private Object _parent;

    private JPanel _panel;
    private JLabel _loginLabel;
    private JTextField _loginInput;
    private JLabel _passwordLabel;
    private JPasswordField _passwordInput;

    private JPanel _buttonPanel;
    private JButton _okButton;
    private JButton _cancelButton;

    public LoginWindow(Object parent, Server server) {
        _server = server;
        _parent = parent;
        initComponents();
    }

    private void initComponents() {
        setTitle("Connection window");
        setLayout(new BorderLayout());

        _loginLabel = new JLabel("Login: ");
        _loginInput = new JTextField(System.getProperty("user.name"), 15);

        _passwordLabel = new JLabel("Password: ");

        _panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = 0;
        // external padding
        c.insets = new Insets(5,5,5,5);
        _panel.add(_loginLabel,c);
        c.gridx = 1;
        _panel.add(_loginInput,c);
        c.gridy = 1;
        _panel.add(_passwordLabel,c);
        c.gridx = 0;
        _panel.add(getPasswordLabel(),c);

        add(_panel, BorderLayout.CENTER);

        _okButton = new JButton("Ok");
        _okButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                okActionPerformed();
            }
        });
        _cancelButton = new JButton("Cancel");
        _cancelButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                System.exit(0);
            }
        });
        _buttonPanel = new JPanel(new FlowLayout());
        _buttonPanel.add(_okButton);
        _buttonPanel.add(_cancelButton);
        add(_buttonPanel, BorderLayout.SOUTH);

        pack();
    }

    /**
     * @return the _passwordInput
     */
    private JPasswordField getPasswordInput() {
        if (LOG.isTraceEnabled()) {
            LOG.trace("getPasswordInput()");
        }
        if (_passwordInput == null) {
            _passwordInput = new JPasswordField(15) {
                // Give the focus to this field
                public void addNotify() {
                    super.addNotify();
                    requestFocusInWindow();             
                }    
            };
            _passwordInput.addKeyListener(new KeyListener() {
                @Override public void keyTyped(KeyEvent arg0) {}
                @Override
                public void keyReleased(KeyEvent keyEvent) {
                    if (keyEvent.getKeyChar() == KeyEvent.VK_ENTER) {
                        if (LOG.isTraceEnabled()) {
                            LOG.trace("Click enter in password field");
                        }
                        okActionPerformed();
                    }
                }
                @Override public void keyPressed(KeyEvent arg0) {}
            });
        }
        return _passwordInput;
    }

    protected void okActionPerformed() {
        if (LOG.isTraceEnabled()) {
            LOG.trace("okActionPerformed()");
        }
        if (_server != null) {
            String login = _loginInput.getText();
            if (login != null && !login.isEmpty()) {
                _server.setLogin(login);
                char[] password = _passwordInput.getPassword();
                if (password != null && password.length > 0) {
                    _server.setPassword(new String(password));
                    setVisible(false);
                    synchronized (_parent) {
                        if (LOG.isTraceEnabled()) {
                            LOG.trace("syncronized with "+_parent);
                        }
                        _parent.notifyAll();
                    }
                } else {
                    JOptionPane.showMessageDialog(LoginWindow.this,"Please enter a password", "Password required", JOptionPane.WARNING_MESSAGE);    
                }
            } else {
                JOptionPane.showMessageDialog(LoginWindow.this,"Please enter your login", "Login required", JOptionPane.WARNING_MESSAGE);
            }
        } else {
            LOG.error("Server is null");
            JOptionPane.showMessageDialog(LoginWindow.this,"Server is null.", "An error has occured", JOptionPane.ERROR_MESSAGE);
            System.exit(-1);
        }
    }
} 
```

我存储父类以在用户输入登录名和密码时通知它。

Server 类非常简单：

```
package com.maxbester.test;

public class Server {

    private String _url;
    private String _login = "root";
    private String _password = "";

    public Server(String url) {
        _url = url;
    }
    public Server(String url, String login, String password) {
        _url = url;
        if (login != null) {
            _login = login;
        }
        if (password != null) {
            _password = password;
        }
    }
    public String getUrl() {
        return _url;
    }
    public String getLogin() {
        return _login;
    }
    public String getPassword() {
        return _password;
    }
    public void setUrl(String url) {
        if (url != null) {
            _url = url;
        }
    }
    public void setLogin(String login) {
        _login = login;
    }
    public void setPassword(String password) {
        _password = password;
    }
    public boolean hasLogin() {
        return _login != null;
    }
    public boolean hasPassword() {
        return _password != null;
    }
    public String toString() {
        return _url;
    }
    /**
     * Test if the server has a login and a password.
     * @return Return true if the server has a login and a password, false otherwise.
     */
    public boolean hasConnectionId() {
        return _login != null && !_login.isEmpty() && _password != null && !_password.isEmpty();
    }
} 
```

此窗口由控制器启动：

```
package com.maxbester.test;

public class Controller {

    public Controller() {
        Server server = new Server("myserver");
        login(server);
    }

    /**
     * <p>This method opens a login window and waits until a signal is receive from
     * that window. When the signal is received, closes the window.</p>
     * <p>The login window has to update the login and password of 'Server'.</p>
     * @param server
     */
    private synchronized void askLoginPassword(final Server server) {
        server.setLogin(null);
        server.setPassword(null);
        while (server.hasConnectionId() == false) {
            LoginWindow loginWindow = new LoginWindow(Controller.this, server);
            try {
                loginWindow.setVisible(true);
                wait();
            } catch (InterruptedException e) {
                LOG.error("Thread exception", e);
                JOptionPane.showMessageDialog(loginWindow, "Thread exception", "Error", JOptionPane.ERROR_MESSAGE);
            } finally {
                loginWindow.dispose();
                loginWindow = null;
            }
        }
    }

    /**
     * <p>First of all, this method tests if the server is reachable.</p>
     * <p>If it is, the method opens a LoginWindow in order to ask the user ids.</p>
     * <p>When we have the information, the function checks if the
     * login and password are correct. If they are not, the function repeats the operation.</p>
     * @param server
     */
    private void login(Server server) {
        boolean badLogin = true;
        do {
            askLoginPassword(server);
            try {
                // test if password is OK, if it is not, throw exception

                badLogin = false;
            } catch (Exception e) {
                badLogin = true;
                LOG.error(e.getMessage(), e);
                JOptionPane.showMessageDialog(null, e.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
            }
        } while(badLogin);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:40:58.110

it's a little unclear precisley whats happening (particular wrt threads) - but I think that you should probably go and look at the SwingWorker documentation to see how to handle long running tasks in swing,

It's hard to see which is the long running method (I assume this is commented out) - but that's the peice that probably needs to be kept seperate from the GUI thread.

Also, when are you expecting the login window to vanish? - after or before you have received a response from the server.

(edited in response to comments)

# forms - 在垃圾邮件发送者的表单中隐藏收件人的电子邮件

> ID：14730270
> 
> 赞同：0
> 
> 时间：2013-02-06T13:28:17.090
> 
> 标签：forms

我有一个表单，一旦用户单击提交按钮，其内容就会使用下面的行发送到我的电子邮件：

```
<input id="to" name="to" type="hidden" value="iram@example.com" /> 
```

我有一个处理表单的 mail.jsp 文件。如您所见，我已将输入类型设置为隐藏，但我听说垃圾邮件发送者仍然可以看到/使用该电子邮件向其他人发送垃圾邮件。如果是这样，我该怎么做才能避免垃圾邮件问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:41:38.887

*   正如您所提到的，表单数据将被发送到一个固定的电子邮件 ID，因此无需将其作为表单中的隐藏参数传递。

*   jsp 源对所有（网站的用户）都是可见的，因此最好将其保留在服务器端硬编码在负责发送邮件的 servlet（仅对开发人员可见）中。

    更新：

*   遵循 MVC 架构，jsps 应该只用于表示，而不是用于逻辑实现（避免 scriptlet）。

*   业务逻辑需要由服务器端的 servlet 和 bean 处理。

# php - 动态设置 Content-Type

> ID：14730272
> 
> 赞同：0
> 
> 时间：2013-02-06T13:28:26.370
> 
> 标签：php, content-type

我有以下代码，我用它来强制下载文件而不是在浏览器中打开。

```
if(isset($_POST['file_name'])){
$player_file = $_POST['file_name'];
$accessKey = "REMOVED";
$secretKey = "REMOVED";
$bucket = $_POST['bucket'];
$fname = $_POST['fname'];

$zip_url = el_s3_getTemporaryZipLink($accessKey, $secretKey, $bucket, $fname);
$mp3_url = el_s3_getTemporaryMP3Link($accessKey, $secretKey, $bucket, $fname);    

header('Content-type: audio/mpeg3');
header('Content-Disposition: attachment; filename="themixtapesite_'.$player_file.'"');
readfile($mp3_url);
exit();
} 
```

如您所见，我从表单中传递了所有变量。然后使用该信息为存储在 Amazon S3 上的文件生成唯一的签名 URL。

如果文件是 MP3，我需要它使用 $mp3_url，如果它是 Zip 文件，我需要使用 $zip_url。

这一定很简单，但我整天坐在这个屏幕前，现在脑子一片空白！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:14:16.340

1.  这段代码是一个巨大的安全漏洞。您刚刚为任何愿意使用它的人打开了通往服务器的大门。
2.  使用一[组 mime 类型](http://snipplr.com/view/1937/array-of-mime-types/)来确定扩展名之外的 mime 类型（尽管您需要额外的安全检查，因为仅在扩展名上中继并不是一件明智的事情）。
3.  使用 switch 语句来确定使用哪个函数。切换后你应该有`$url`- 只有一个变量存储扩展，而不是两个不同的变量。

# backbone.js - 如何从backbone.js中的同一集合中删除依赖模型

> ID：14730275
> 
> 赞同：0
> 
> 时间：2013-02-06T13:28:28.337
> 
> 标签：backbone.js, marionette, backbone-views, backbone-events, backbone-relational

我有一个同时具有 navid 和 subnavid 的模型。在销毁模型时，我需要检查整个集合，对于其他模型，其 navid 与我要删除的模型的 subnavid 相同。请帮帮我。提前致谢 。这是我的示例代码。

> 模型：
> 
> var Node = Backbone.Model.extend({ defaults: { NavId: '', SubNavId: ''. ItemName:'' } }
> 
> 收藏：
> 
> var NodeCollection = Backbone.Collection.extend({ model:Node }
> 
> 我有两个视图，一个用于节点（我正在构建 tr），另一个用于集合（我需要构建表）var NodeCollectionView = Backbone.View.extend（{
> 
> ```
> initialize: function (options) {
>     var self = this;      self.collection = new NodeCollection({ NavigationId: options.NavigationId });
>     self.collection.fetch({
>         success: function () {
>             /*I am getting  hte proper collection from my restful api and iam able to bind it properly
>           self.render();
>         }
>     });
> },
> 
> render: function () {
>     var that = this;
>     _.each(this.collection.models, function (item) {
>         that.RenderEachNode(item);
>     }, this);
> },
> 
> RenderEachNode: function (item) {
>     var TempJsonNode = item.toJSON();
>     var self = this;
>     var nodeView = new NodeView({
>         tagName: 'tr',
>         id: 'NavId_' + TempJsonNode.NavItemId,
>         model: item
>     });
> } }); 
> ```

```
var ItemTemplate = ""; ItemTemplate += "    <td>"; ItemTemplate += "        <a><%= ItemName %></a>"; ItemTemplate +="   </td>"; ItemTemplate
+=" <td>"; ItemTemplate +="         <a href='#' original-title='Delete ' class='tip_north Delete'>X</a>"; ItemTemplate +="  </td>  ";           

var NavigationItemView = Backbone.View.extend({
    template: ItemTemplate,
    render: function () {
        var self = this;
        var tmpl = _.template(this.template);
        this.$el.html(tmpl(this.model.toJSON()));
        return this;
    },
    events: {
        "click .Delete": "DeleteBtnClick"
    },
    DeleteBtnClick: function () {
        var self = this;
        self.model.destroy({
            success: function (status, data) {
                var RetData = JSON.parse(data);
                if (RetData.Status == 'Success') {
                    $(self.el).remove()
                }
            },
            error: function () {
                alert('Error In Deleting The Record');
            }
        });
        return false;
    } }); 
```

我能够正确构建表格，但是在销毁模型时，我没有找到销毁依赖模型的方法。我的 Api 受到限制，以至于我无法获得嵌套的 json （如果是这样，我会这样做）骨干关系）。所以我需要找出某种方式来删除具有模型 NavId 的其他模型和视图。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:40:31.437

怎么样：

```
var NodeView = Backbone.View.extend({
  initialize: function() {
    //when the model gets destroyed, remove the view
    this.listenTo(this.model, 'destroy', this.remove);
  },
  //..clip
  DeleteBtnClick: function () {
    var self = this;
    var collection = self.model.collection;
    var navId = self.model.get('NavId');

    self.model.destroy({
      success: function (status, data) {
        var RetData = JSON.parse(data);
        if (RetData.Status == 'Success') {
          //if parent was part of a collection
          if (collection) {
            //find related models
            var related = collection.filter(function (model) {
              return model.get('SubNavId') === navId;
            });

            //call destroy for each related model.
            var promises = _.invoke(related, 'destroy');

            //optional: if you want to do something when all the children
            //are destroyed:
            $.when.apply($, promises).then(function () {
              console.log('all destroyed');
            });
          }
        }
      },
      error: function () {
        console.log(arguments);
        alert('Error In Deleting The Record');
      }
    });
    return false;
  }
}); 
```

**编辑：** [这里的 JSFiddle](http://jsfiddle.net/qhTfM/)

# html - 如何在本地 HTML 文件中使用 locationManager 中的坐标？

> ID：14730279
> 
> 赞同：1
> 
> 时间：2013-02-06T13:28:36.917
> 
> 标签：html, xcode, cllocationmanager

由于 iOS 6 在获取用户位置时使用 GeoLocation/WatchPosition 存在错误，因此我在 xcode 中实现 locationManager 并获取坐标。

但是，我想在本地 HTML (webView) 文件中使用这些坐标。是否可以使用、发送或调用 locationManager 中的坐标到 HTML / JavaScript 文件？

编辑：

我想到了一个可能的解决方案......饼干......可以这样做，因为我无法在下面的代码中获得输出：

编辑2：是的，它可以......我调整了下面的代码并且它可以工作。重要的是 Cookie 域和路径选项，因此 webView (HTML) 可以获取 cookie。

但如果有人知道更好的解决方案，请告诉我，我喜欢学习！

```
- (void)applicationdidBecomeActive {     
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways]; 
} 

- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

    ...      

    NSLog(@"%@", DevicePosition);
    NSDictionary *newCookieDict = [NSMutableDictionary
                                   dictionaryWithObjectsAndKeys:
                                   @".^filecookies^", NSHTTPCookieDomain,
                                   @"DevicePos", NSHTTPCookieName,
                                   @"/", NSHTTPCookiePath,
                                   DevicePosition, NSHTTPCookieValue,
                                   //@"2012-01-01 12:00:00 -0100", NSHTTPCookieExpires,
                                   nil];
    //create a new cookie
    NSHTTPCookie *cookie = [NSHTTPCookie
                            cookieWithProperties:newCookieDict];
    //add the new cookie
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];

    // dev cookie controle
    NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [cookieJar cookies]) {
        NSLog(@"%@", cookie);
} 
```

HTML 文件：

```
<script type="text/javascript">   
    function getCookie(name)    {        
        var re = new RegExp(name + "=([^;]+)");        
        var value = re.exec(document.cookie);        
        return (value != null) ? unescape(value[1]) : null;   
        } 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T08:49:52.150

有一种简单的方法可以解决您的问题。您可以使用 WebViewJavascriptBridge 将 Objective C 的方法“填充”到 webview，因此您的 html 页面可以通过 window.xxx 访问该方法来调用在 Objective C 中实现的方法。

请看一下[https://github.com/marcuswestin/WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)

# android - 来自oncreate的android弹出窗口调用

> ID：14730281
> 
> 赞同：3
> 
> 时间：2013-02-06T13:28:38.737
> 
> 标签：android, popupwindow

```
private void loadingPopup() {
    LayoutInflater inflater = this.getLayoutInflater();
          View layout = inflater.inflate(R.layout.loading_dialog, null);

        PopupWindow windows = new PopupWindow(layout , 300,300,true);
       windows.setFocusable(false);
          windows.setTouchable(true); 
          windows.setOutsideTouchable(true);
          windows.showAtLocation(layout,Gravity.CENTER, 0, 0);

} 
```

`loadingPopup()`当从产生的异常中调用该方法时`oncreate()`..请你帮帮我

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T14:05:11.883

您甚至在显示活动窗口之前尝试显示弹出窗口。在 post 方法的帮助下，我们可以等到所有必要的启动生命周期方法都完成。

尝试这个 ：

```
private void loadingPopup() {
    LayoutInflater inflater = this.getLayoutInflater();
    final View layout = inflater.inflate(R.layout.loading_dialog, null);

    final PopupWindow windows = new PopupWindow(layout , 300,300,true);
    windows.setFocusable(false);
    windows.setTouchable(true); 
    windows.setOutsideTouchable(true);
    layout.post(new Runnable() {
        public void run() {
            windows.showAtLocation(layout,Gravity.CENTER, 0, 0);
        }
    });
} 
```

# r - 基于R中非度量距离的Voronoi图

> ID：14730282
> 
> 赞同：0
> 
> 时间：2013-02-06T13:28:39.163
> 
> 标签：r, delaunay, voronoi, tessellation

我想在 R 中绘制 voronoi 图。我在 N 维中有一组点（比如 10）。我不想使用多维缩放（MDS）。我希望使用非度量度量来绘制 voronoi 图。有没有这个实现的包？如果没有，那么您能否建议我使用这些 N 维坐标绘制镶嵌的合适方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:20:55.213

目前尚不清楚您的问题是降维还是绘制曲面细分：问题是分开的。正如评论中所建议的，您可以使用

```
library(sos)
???"non-metric"
???"Voronoi" 
```

找到您需要的功能在哪里。

```
# Sample data: a distance matrix
d <- dist( matrix( rnorm(200), nc=10 ) )

# Dimension reduction, via non-metric multidimensional scaling
library(MASS)
r <- sammon( d )

# Plot the Voronoi tessellation
library(tripack)
x <- r$points
plot( voronoi.mosaic(x[,1], x[,2]) )
points(x, pch=13) 
```

除了主[成分](http://en.wikipedia.org/wiki/Nonlinear_dimensionality_reduction#Locally-linear_embedding)[分析](http://en.wikipedia.org/wiki/Nonlinear_dimensionality_reduction#Isomap)`prcomp`（_ _ _ _ _ [_](http://en.wikipedia.org/wiki/Nonlinear_dimensionality_reduction#Maximum_variance_unfolding) _ _ MVU）基于“邻域图”，这与您寻求的二维细分没有什么不同，它们可能对您的问题更有意义。`MASS::isoMDS``MASS:sammon``vegan::isomap``lle::lle``tsne::tsne`

# sql - SQL转XSLT的解决方案

> ID：14730290
> 
> 赞同：0
> 
> 时间：2013-02-06T13:29:02.143
> 
> 标签：sql, xslt, converter

现在我正在处理非常具体的问题：我有一些 SQL 规则，例如

```
case when ((#variable1#=10) and (#variable2# in (10,11)) or (#variable3#>12) ... other conditions... then 1 else 0 
```

其中#variable# 是在运行时替换实际值的标记，我需要在 XSLT 中翻译此规则。我在互联网上找到了一些关于此的出版物，例如[http://research.microsoft.com/en-us/um/people/ratul/papers/www2002-xslt.pdf](http://research.microsoft.com/en-us/um/people/ratul/papers/www2002-xslt.pdf) 和我现在的问题：可能有人知道开源解决方案将 sql 转换为 xslt 还是返回？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T00:21:41.263

这里有几个：

*   [EasySQL](http://search.cpan.org/~curtisf/XML-EasySQL-1.2/)
*   [XML-SQL](http://sourceforge.net/projects/xml-sql/)
*   [XML2DDL](https://pypi.python.org/pypi/xml2ddl/0.3.1)

# android - 有没有办法让安卓应用程序与安装在不同安卓手机中的服务进行通信？

> ID：14730292
> 
> 赞同：0
> 
> 时间：2013-02-06T13:29:06.163
> 
> 标签：android, android-service

我为了我的大学目的而参与了一个项目。为此，我必须创建 2 个应用程序（1 个 ACTIVITY 应用程序和另一个 SERVICE 应用程序），它们将安装在 2 个不同的手机中。我想通过这两个应用程序创建通信，即当我从活动应用程序请求数据时，其他移动设备中的服务应用程序应该响应并回复我需要的数据......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:34:48.163

仅当您通过某种形式的通信通道（例如蓝牙或 WiFi）传递和接收数据时，这才有可能。

我觉得最好的想法是拥有一台充当中间人的服务器。一台设备向服务器发送数据，服务器通过[Push Notifications](http://developer.android.com/google/gcm/index.html)向另一台设备发送数据。或者您可以使用服务器作为中间人在两个设备之间直接打开一个套接字，但这有一个缺点，即如果第一次发送失败，则无法轻松地重新发送消息。

# jquery - 在单击的元素之间切换

> ID：14730294
> 
> 赞同：0
> 
> 时间：2013-02-06T13:29:12.183
> 
> 标签：jquery, image, toggle

我有一排图像，当用户单击图像时，会选择该图像。我怎样才能设法在 jquery 中切换点击事件，以便：

1) 一次只能选择一个图像
2) 如果单击所选图像，则取消选择该图像。

这是我到目前为止所拥有的，带有小提琴：http: [//jsfiddle.net/jamiefearon/BY9Fp/1/](http://jsfiddle.net/jamiefearon/BY9Fp/1/)

```
$(document).ready(function () {

    var selectedTile = null;

    $('[id^="tile-"]').click(function () {
            $(this).css("background", "red");
            $(this).css("opacity", "0.4");
            selectedTile = $(this).attr("name");
            console.log(selectedTile);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:33:02.537

我会将样式移动到 CSS 类中，如下所示：

```
.tile_wrap.selected {
    background: red;
    opacity: 0.4;
} 
```

然后使您的点击处理程序类似于：

```
var tiles = $('.tile_wrap');
$('[id^="tile-"]').click(function () {
    if($(this).hasClass('selected'))
    {
        $(this).removeClass('selected');
    }
    else
    {
        tiles.removeClass('selected');    
        $(this).addClass('selected');
        selectedTile = $(this).attr("name");
        console.log(selectedTile);
    }
}); 
```

你可以在[这里看到更新的 jsFiddle](http://jsfiddle.net/BY9Fp/9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:33:31.133

利用`.siblings()`

```
 $(this).siblings().css({background:"",opacity:1});
        $(this).css({"background": "red","opacity":"0.4"}); 
```

在这里演示[http://jsfiddle.net/BY9Fp/11/](http://jsfiddle.net/BY9Fp/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:36:08.760

您的代码的改进版本：

```
var $tiles = $('.tile_wrap');
$tiles.click(function() {
    $(this).toggleClass('active');
    $tiles.not(this).removeClass('active');
}); 
```

使您的代码更简单、更高效的改进：

*   缓存经常使用的元素，例如`$titles`；
*   `class`通过而不是选择元素`[id^="tile-"]`，这样会更高效；
*   不要使用`css`方法。改为使用`addClass`。

[http://jsfiddle.net/dfsq/BY9Fp/8/](http://jsfiddle.net/dfsq/BY9Fp/8/)

# soap - Spring-ws自动生成WSDL时生成java类的最佳方式

> ID：14730295
> 
> 赞同：2
> 
> 时间：2013-02-06T13:29:12.547
> 
> 标签：soap, spring-ws

我正在使用 spring-ws 和 XSD 自动生成我的 wsdl。现在我想生成 java 类来返回并进行编组。

然而，我看到了很多不同的方法来实现这一点，并不是所有人都清楚地了解好处\减损。

有些只是将生成的 WSDL 保存在他们的项目中，有些使用他们的 XSD 文件来生成，有些则添加 XJB 等......

我的第一个想法只是添加：

```
 <plugin>
            <groupId>com.sun.tools.xjc.maven2</groupId>
            <artifactId>maven-jaxb-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <removeOldOutput>true</removeOldOutput>
                <schemaDirectory>src/main/webapp/WEB-INF</schemaDirectory>
            </configuration>
        </plugin> 
```

对我`pom.xml`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:44:26.553

我首选的方式是 jaxb2-maven-plugin。见[http://mojo.codehaus.org/jaxb2-maven-plugin/usage.html](http://mojo.codehaus.org/jaxb2-maven-plugin/usage.html)

它实际上使用的是 XJC，一个现在随当前 JDK 一起提供的命令（在 Windows 中的 bin 或 Mac 中的 Commands 下）

您可以直接使用 xjc -p your.package -wsdl your.wsdl 调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T14:23:50.050

要使用 maven 从 WSDL 生成 java 代码，您可以检查[maven cxf codegen plugin wsdl to java。](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)

# java - 如何反序列化具有各种 serialVersionUID 的 Java 对象？

> ID：14730299
> 
> 赞同：2
> 
> 时间：2013-02-06T13:29:19.657
> 
> 标签：java, serialization, serialversionuid

想象一下，我有一个`Foo`过去有`serialVersionUID`s 1、3 和 17 的类，我需要能够将所有三个版本读入`Foo`实例。我怎么做？

我特别需要知道字节流中保存的是哪个版本，所以我可以做一些数据迁移。如何访问`serialVersionUID`in `readObject()`？还是已经太晚了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:36:36.933

这并不容易，但可能。对于每个历史版本的类，您需要创建单独的类加载器，它将加载旧版本的数据模型类。然后，您需要尝试使用每个类加载器读取您的文件，直到其中一些适合。我相信`ObjectInputStream`使用来自线程上下文的当前类加载器。如果您需要更多详细信息，请随时问我。

后期补充：好像指定哪个类加载器会被`ObjectInputStream`. 这里可能需要进一步调查。

另一个后来的补充：可能你可以覆盖`resolveClass(ObjectStreamClass)`方法`ObjectInputStream`来制作是使用正确的类加载器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:37:14.603

使用不同的类加载器来反序列化对象的不同版本。之后，您必须根据以前的版本手动初始化通用（可能是最新的）实例的内部状态（您必须为此编写转换器）。

确保您的类加载器路径是完全不同的。**如果一个超级类加载器可以加载一个类，它就会加载。**所以，所有的类加载器应该是完全独立的（都不应该是其他类的超类）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:58:25.503

您可以通过在反序列化期间捕获错误来获得前者`serialVersionUID`：

```
try {
  // deserialize here...
} catch (final java.io.InvalidClassException e) {
  System.out.println(e.getMessage());
  // The message string contains the former uid.
  // Message: local class incompatible: stream classdesc serialVersionUID = OLD_UID_HERE, local class serialVersionUID = NEW_UID_HERE
} 
```

# php - 以变 量的内容命名变量

> ID：14730303
> 
> 赞同：0
> 
> 时间：2013-02-06T13:29:30.560
> 
> 标签：php

我正在尝试创建一个变量并在另一个变量的内容之后为其命名。例如

```
$newname = "x";
//dosomething to create the variable $x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:30:50.287

它们被称为[变量变量](http://php.net/manual/en/language.variables.variable.php)：

```
${$newname} = 'stuff'; 
```

如果您有更多，请考虑使用数组和其中的[`extract`](http://php.net/manual/en/function.extract.php)变量：

```
$vars = array(...);     // keys = variable name, value = variable value
extract($vars, EXTR_SKIP); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:57:38.137

检查这个：

```
$a = 'hello';
$$a = 'world';
echo "$a ${$a}";
echo "$a $world"; 
```

希望有用。

# c# - WPF无边框窗口带阴影VS2012风格

> ID：14730311
> 
> 赞同：21
> 
> 时间：2013-02-06T13:29:41.813
> 
> 标签：c#, wpf, user-interface, visual-studio-2012

我正在尝试创建一个看起来像 Visual Studio 2012 的应用程序。我使用[WindowChrome](http://msdn.microsoft.com/en-us/library/system.windows.shell.windowchrome.aspx)删除了窗口边框，并更改了我的 xaml 中的边框颜色。

我不知道该怎么做是绘制窗口的阴影，在这里你可以看到我所说的截图：

![带阴影的 Visual Studio 无边框窗口](../Images/eb5e9c17369ca9b5c15d23e5b45c767a.png)

如您所见，有一个阴影，它的颜色也是边框颜色

你知道如何使用 WPF 来实现它吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-09T17:08:38.393

# 更新（17 年 10 月）

现在已经四年了，我有兴趣再次解决这个问题，因此我一直在搞乱*MahApps.Metro*并[基于它派生了我自己的库](https://github.com/ChristianIvicevic/ModernChrome)。我的*ModernChrome*库提供了一个类似于 Visual Studio 2017 的自定义窗口：

[![ModernChrome 示例](../Images/554707dda77035ee166520ef51196711.png)](https://i.stack.imgur.com/l1X2u.png)

由于您很可能只对有关发光边框的部分感兴趣，因此您应该使用*MahApps.Metro*本身或查看我如何创建一个`GlowWindowBehavior`将发光边框附加到我的自定义类的`ModernWindow`类。它严重依赖于 MahApps.Metro 的一些内部*结构*以及两个依赖属性`GlowBrush`和`NonActiveGlowBrush`.

如果您只想在自定义应用程序中包含发光边框，只需引用*MahApps.Metro*并复制我的`GlowWindowBehavior.cs`并创建自定义窗口类并相应地调整引用。这是最多 15 分钟的问题。

这个问题和我的答案已经被非常频繁地访问，所以我希望你会发现我最新的正确解决方案很有用:)

* * *

# 原始帖子（2013 年 2 月）

我一直在研究这样一个库来复制 Visual Studio 2012 用户界面。自定义镀铬并不难，但您应该注意的是难以实现的发光边框。您可以说将窗口的背景颜色设置为透明，并将主网格的填充设置为大约 30 像素。网格周围的边框可以着色并与彩色阴影效果相关联，但这种方法会强制您设置`AllowsTransparency`为 true ，这会大大降低应用程序的视觉性能，这是您绝对不想做的事情！

我目前创建这样一个窗口的方法是在边框上具有彩色阴影效果并且是透明的但根本没有内容。每当我的主窗口的位置发生变化时，我只需更新包含边框的窗口的位置。所以最后我正在处理两个带有消息的窗口，以假装边框将成为主窗口的一部分。这是必要的，因为 DWM 库没有提供一种为 Windows 提供彩色投影效果的方法，我认为 Visual Studio 2012 与我尝试过的类似。

并用更多信息扩展这篇文章：Office 2013 以不同的方式做到这一点。窗口周围的边框只有 1px 厚且有颜色，但阴影是由 DWM 绘制的，代码如下[所示](https://stackoverflow.com/a/6313576/796036)。如果您可以在没有蓝色/紫色/绿色边框和普通边框的情况下生活，这就是我会选择的方法！只是不要设置`AllowsTransparency`为true，否则你就输了。

这是我的窗口的屏幕截图，带有奇怪的颜色以突出显示它的外观：

![地铁用户界面](../Images/9992836a5cb8dab0c3831e6b8d02700d.png)

* * *

**这里有一些关于如何开始的提示**

请记住，我的代码很长，因此我只能向您展示基本的操作，您至少应该能够以某种方式开始。首先，我假设我们已经以某种方式设计了我们的主窗口（手动或使用`MahApps.Metro`我昨天尝试的包 - 对源代码进行了一些修改，这非常好^(（1）)）并且我们目前正在努力实现发光的阴影边框，我`GlowWindow`将从现在开始调用它。最简单的方法是使用以下 XAML 代码创建一个窗口

```
<Window x:Class="MetroUI.Views.GlowWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="GlowWindow"
    Title="" Width="300" Height="100" WindowStartupLocation="Manual"
    AllowsTransparency="True" Background="Transparent" WindowStyle="None"
    ShowInTaskbar="False" Foreground="#007acc" MaxWidth="5000" MaxHeight="5000">
    <Border x:Name="OuterGlow" Margin="10" Background="Transparent"
            BorderBrush="{Binding Foreground, ElementName=GlowWindow}"
            BorderThickness="5">
        <Border.Effect>
            <BlurEffect KernelType="Gaussian" Radius="15" RenderingBias="Quality" />
        </Border.Effect>
    </Border>
</Window> 
```

生成的窗口应如下图所示。

![发光窗口](../Images/9cb851d663fbb39c44dd4b077388ec3d.png)

接下来的步骤非常困难——当我们的主窗口产生时，我们想让 GlowWindow 可见但在主窗口的后面，我们必须在主窗口被移动或调整大小时更新 GlowWindow 的位置。我建议防止可能发生的视觉故障是在每次更改窗口位置或大小时隐藏 GlowWindow。完成此类操作后，请再次显示。

我有一些在不同情况下调用的方法（可能很多但只是为了确定）

```
private void UpdateGlowWindow(bool isActivated = false) {
    if(this.DisableComposite || this.IsMaximized) {
        this.glowWindow.Visibility = System.Windows.Visibility.Collapsed;
        return;
    }
    try {
        this.glowWindow.Left = this.Left - 10;
        this.glowWindow.Top = this.Top - 10;
        this.glowWindow.Width = this.Width + 20;
        this.glowWindow.Height = this.Height + 20;
        this.glowWindow.Visibility = System.Windows.Visibility.Visible;
        if(!isActivated)
            this.glowWindow.Activate();
    } catch(Exception) {
    }
} 
```

此方法主要在我`WndProc`附加到主窗口的自定义中调用：

```
/// <summary>
/// An application-defined function that processes messages sent to a window. The WNDPROC type
/// defines a pointer to this callback function.
/// </summary>
/// <param name="hwnd">A handle to the window.</param>
/// <param name="uMsg">The message.</param>
/// <param name="wParam">Additional message information. The contents of this parameter depend on
/// the value of the uMsg parameter.</param>
/// <param name="lParam">Additional message information. The contents of this parameter depend on
/// the value of the uMsg parameter.</param>
/// <param name="handled">Reference to boolean value which indicates whether a message was handled.
/// </param>
/// <returns>The return value is the result of the message processing and depends on the message sent.
/// </returns>
private IntPtr WindowProc(IntPtr hwnd, int uMsg, IntPtr wParam, IntPtr lParam, ref bool handled) {
    // BEGIN UNMANAGED WIN32
    switch((WinRT.Message)uMsg) {
        case WinRT.Message.WM_SIZE:
            switch((WinRT.Size)wParam) {
                case WinRT.Size.SIZE_MAXIMIZED:
                    this.Left = this.Top = 0;
                    if(!this.IsMaximized)
                        this.IsMaximized = true;
                    this.UpdateChrome();
                    break;
                case WinRT.Size.SIZE_RESTORED:
                    if(this.IsMaximized)
                        this.IsMaximized = false;
                    this.UpdateChrome();
                    break;
            }
            break;

        case WinRT.Message.WM_WINDOWPOSCHANGING:
            WinRT.WINDOWPOS windowPosition = (WinRT.WINDOWPOS)Marshal.PtrToStructure(lParam, typeof(WinRT.WINDOWPOS));
            Window handledWindow = (Window)HwndSource.FromHwnd(hwnd).RootVisual;
            if(handledWindow == null)
                return IntPtr.Zero;
            bool hasChangedPosition = false;
            if(this.IsMaximized == true && (this.Left != 0 || this.Top != 0)) {
                windowPosition.x = windowPosition.y = 0;
                windowPosition.cx = (int)SystemParameters.WorkArea.Width;
                windowPosition.cy = (int)SystemParameters.WorkArea.Height;
                hasChangedPosition = true;
                this.UpdateChrome();
                this.UpdateGlowWindow();
            }
            if(!hasChangedPosition)
                return IntPtr.Zero;
            Marshal.StructureToPtr(windowPosition, lParam, true);
            handled = true;
            break;
    }
    return IntPtr.Zero;
    // END UNMANAGED WIN32
} 
```

但是仍然存在一个问题 - 一旦您调整主窗口的大小，GlowWindow 将无法以其大小覆盖整个窗口。也就是说，如果您将主窗口的大小调整为大约屏幕的 MaxWidth，那么 GlowWindow 的宽度将是相同的值 + 20，因为我向其添加了 10 的边距。因此，右边缘会在看起来难看的主窗口右边缘之前被中断。为了防止这种情况，我使用了一个钩子来使 GlowWindow 成为一个工具窗口：

```
this.Loaded += delegate {
    WindowInteropHelper wndHelper = new WindowInteropHelper(this);
    int exStyle = (int)WinRT.GetWindowLong(wndHelper.Handle, (int)WinRT.GetWindowLongFields.GWL_EXSTYLE);
    exStyle |= (int)WinRT.ExtendedWindowStyles.WS_EX_TOOLWINDOW;
    WinRT.SetWindowLong(wndHelper.Handle, (int)WinRT.GetWindowLongFields.GWL_EXSTYLE, (IntPtr)exStyle);
}; 
```

我们仍然会遇到一些问题 - 当您将鼠标悬停在 GlowWindow 上并左键单击时，它将被激活并获得焦点，这意味着它将与主窗口重叠，如下所示：

![重叠发光窗口](../Images/59f03a648bd42852cfa490fadf98374f.png)

为了防止这种情况发生，只需捕获`Activated`边界事件并将主窗口置于前台即可。

**你应该怎么做？**

我建议不要尝试这个 - 我花了大约一个月的时间来实现我想要的，但它仍然存在一些问题，因此我会采用像 Office 2013 那样的方法 - 使用 DWM API 调用的彩色边框和通常的阴影 -没有别的，但它看起来还是不错的。

![办公室 2013](../Images/b366131890292e1d1569cea51233748b.png)

* * *

^((1))我刚刚编辑了一些文件以启用在 Window 8 上为我禁用的窗口周围的边框。此外，我还`Padding`对标题栏进行了操作，使其看起来不那么被挤压，最后我更改了 All-Caps 属性以模仿 Visual Studio 呈现标题的方式。到目前为止，这`MahApps.Metro`是绘制主窗口的更好方法，因为它甚至支持 AeroSnap，我无法通过通常的 P/Invoke 调用实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-16T03:05:52.560

您可以使用这个简单的 xaml 代码

```
<Window x:Class="VS2012.MainWindow" 
         xmlns=http://schemas.microsoft.com/winfx/2006/xaml/presentation 
         xmlns:x=http://schemas.microsoft.com/winfx/2006/xaml 
         Title="MainWindow" 
         Height="100" Width="200" 
         AllowsTransparency="True" WindowStyle="None" Background="Transparent"> 
<Border BorderBrush="DarkOrange" BorderThickness="1" Background="White" Margin="5">
         <Border.Effect>
                <DropShadowEffect ShadowDepth="0" BlurRadius="5" Color="DarkOrange"/>
         </Border.Effect>
</Border>
</Window> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T13:37:44.973

这称为“Metro 风格”（Windows 8 风格）。我认为[这篇](http://www.codeproject.com/Articles/442856/Visual-Studio-2012-Metro-Styles-for-WPF)Code Project 文章对您来说很有趣，并且会对您有所帮助。

您可以尝试[Elysium](http://elysium.codeplex.com/)，它在 MIT 许可下获得许可，并包含来自 codeplext 的ApplicationBar 和 ToastNotification 类，或者[MetroToolKit 。](http://metrotoolkit.codeplex.com/)

[这](http://bizvise.com/2012/09/27/how-to-create-metro-style-window-on-wpf-using-elysium/)是一个关于极乐世界的很棒的教程，我认为它可以帮助你。

对于阴影，只需在XAML 中添加`BitmapEffect`一个：`Border``Grid`

```
<Grid>
    <Border BorderBrush="#FF006900" BorderThickness="3" Height="157" HorizontalAlignment="Left" Margin="12,12,0,0" Name="border1" VerticalAlignment="Top" Width="479" Background="#FFCEFFE1" CornerRadius="20, 20, 20, 20">
        <Border.BitmapEffect>
          <DropShadowBitmapEffect Color="Black" Direction="320" ShadowDepth="10" Opacity="0.5" Softness="5" />
        </Border.BitmapEffect>
        <TextBlock Height="179" Name="textBlock1" Text="Hello, this is a beautiful DropShadow WPF Window Example." FontSize="40" TextWrapping="Wrap" TextAlignment="Center" Foreground="#FF245829" />
    </Border>
</Grid> 
```

![在此处输入图像描述](../Images/7d33344c8431abc073a0b8b91ed309d6.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-21T17:42:05.380

```
<Window x:Class="MyProject.MiniWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:MyProject"
    mc:Ignorable="d" 
    WindowStyle="None" 
    Title="MiniWindow" Background="Transparent"
    Height="200" Width="200" 
    >

<WindowChrome.WindowChrome>
    <WindowChrome 
    CaptionHeight="0"
    ResizeBorderThickness="4" />
</WindowChrome.WindowChrome>

<Grid Margin="0">
    <Border BorderThickness="3">
        <Border BorderThickness="1" Margin="0" BorderBrush="#ff007acc">
            <Border.Effect>
                <DropShadowEffect Color="#ff007acc" Direction="132" ShadowDepth="0" BlurRadius="8" />
            </Border.Effect>
            <Grid   Background="#ff2d2d30">

            </Grid>
        </Border>
    </Border>

</Grid> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-15T11:55:09.413

我正在尝试获得相同的效果，我的应用程序使用的是 .NET 4，因此我无法直接使用`WindowChrome`（因此，我使用[Microsoft Windows Shell](http://archive.msdn.microsoft.com/WPFShell)库来获得相同的效果）。

在这个[线程](https://stackoverflow.com/questions/12478717/how-does-visual-studio-2012-draw-its-window-border)中正确地指出，使用 spy++ 可以看到 Visual Studio 有四个称为*VisualStudioGlowWindow*的窗口来实现发光效果。已经在很多地方描述了将`AllowsTransparency`属性设置为 true 会降低性能。

所以，我尝试走VS的方式，结果还不错（至少对我来说）；无需在主窗口上使用模糊或类似效果，我只需要与一些窗口状态（焦点/可见/隐藏）作斗争。

我已经把所有需要的东西都放在了[github 上](https://github.com/TheCentralScrutinizer/GlowWindow)——希望这能有所帮助。

# api - 使用 api 向 google plus 发表评论并获取它们

> ID：14730312
> 
> 赞同：1
> 
> 时间：2013-02-06T13:29:47.330
> 
> 标签：api, facebook-graph-api, comments, google-plus

在 facebook 中，我们可以使用 Graph API 指定网页 url 并向其添加评论，或获取评论。

稍后我们可以使用示例代码获取页面的评论，并使用 javascript 代码将它们作为小部件显示在我的页面上。

同样，是否可以使用 google plus 为网页虚拟设置评论，并使用 API 用代码显示它们？我遇到了用于 php 的 google plus 客户端库，但不确定如何使用它来实现我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:06:11.570

目前没有用于 Google+ 的公共编写 API 或将 Google+ 评论与外部网页双向集成的方法。

您**可以**将来自 Google+ 帖子的评论合并到您的静态页面上。这里有几个资源可以说明如何：

*   Google+ 读取 API 的完整文档位于 https://developers.google.com/+/api/，在[https://developers.google.com/+/downloads/](https://developers.google.com/+/downloads/)[有](https://developers.google.com/+/api/)PHP 和 JavaScript 库

*   [http://little418.com/2011/12/google-comments-on-your-static-html-blog.html](http://little418.com/2011/12/google-comments-on-your-static-html-blog.html)包含一些关于如何回应来自 Google+ 帖子的评论的示例。

# delphi - Delphi：引用由 TAutoObjectFactory 创建的类实例

> ID：14730315
> 
> 赞同：3
> 
> 时间：2013-02-06T13:29:53.343
> 
> 标签：delphi, object, automation

我们有一个应用程序，它也是一个 COM 服务器，可以独立运行或由 COM 客户端自动运行。

COM 类的声明方式如下：

```
type
  TCommandApp = class(TAutoObject, IConnectionPointContainer, ICommandApp) 
```

初始化部分如下：

```
TAutoObjectFactory.Create(ComServer, TCommandApp, Class_CommandApp, 
                          ciSingleInstance, tmApartment); 
```

它创建了一个`TCommandApp`. 问题是如何引用`TCommandApp`created by的实例`TAutoObjectFactory`？（调用它的方法等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:21:21.160

如果你想像`TCommandApp`COM 一样创建实例，那么你应该调用工厂的[`CreateInstance`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682215.aspx)方法，它来自`IClassFactory`接口。

```
var
  Factory: IClassFactory;
  App: ICommandApp;

Factory := TAutoObjectFactory.Create(...);
OleCheck(Factory.CreateInstance(nil, ICommandApp, App)); 
```

或者，您可以直接调用构造函数：

```
var
  Factory: TComObjectFactory;
  App: TCommandApp;

Factory := TAutoObjectFactory.Create(...);
App := TCommandApp.CreateFromFactory(Factory, nil); 
```

# python - 小部件自动定位 PyQt4

> ID：14730323
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:29.850
> 
> 标签：python, button, widget, pyqt4

我在继承自 QtGui.QWidget 窗口的类中有一个布局。假设我有三个标签和一个按钮，当我单击一个按钮时，其中一个标签消失。这破坏了我的 QtGui.QWidget，因为其他两个标签会自动调整大小。我不希望这种情况发生。我希望我的标签像以前一样放置，只有第三个标签消失。有小费吗？

我的代码的简化版本：

```
class a(QtGui.QWidget):
    def __init__(self):
        //Everything needed is done
        self.UI()

    def UI(self):
        layout = QtGui.QGridLayout(self)
        self.label1 = QtGui.QLabel('Label1')
        label2 = QtGui.QLabel('Label2')
        label3 = QtGui.QLabel('Label3')
        layout.addWidget(self.label1 , 0 , 0)
        layout.addWidget(label2 , 1 , 0) 
        layout.addWidget(label3 , 2 , 0)
        button = QtGui.QPushButton('Hide')
        button.clicked.connect(fun)

    def fun(self):
        self.label1.hide() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:51:42.520

您可以将`label1`小部件放置在没有框架的 QFrame 内。

# php - 需要安装propel_generator 1.3.5版本

> ID：14730327
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:45.253
> 
> 标签：php, installation, generator, pear, propel

我需要在我的机器上安装 propel_generator 1.3.5 版。我尝试通过以下方式使用 PEAR 安装它：

```
pear install propel/propel_generator-1.3.5 
```

但它失败并显示以下消息：

```
Failed to download propel/propel_generator, version "1.3.5", latest release is version 1.6.7, stability "stable", use "channel://pear.propelorm.org/propel_generator-1.6.7" to install
install failed 
```

按照[这个答案](https://stackoverflow.com/a/3116233/636342)，我检查了[http://pear.propelorm.org/Chiara_PEAR_Server_REST/r/propel_generator/allreleases.xml](http://pear.propelorm.org/Chiara_PEAR_Server_REST/r/propel_generator/allreleases.xml)和可通过 PEAR 安装的最早版本的 propel_generator 是**1.3.0**版，接下来是**1.4.0**，中间没有**1.3.5**。

有没有办法使用 PEAR 或任何其他方式安装 propel_generator **1.3.5版？**

我什至找不到 1.3.5 生成器的源代码。

PS：生成器正在被遗留系统使用，因此升级不是一个真正的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:30:54.947

1.3.5 从未正式发布，请参阅[http://svn.propelorm.org/tags/](http://svn.propelorm.org/tags/)上的标签列表- 您不会从任何地方获得该版本。

# c# - 当使用picturebox1.Image等于图像FromFile（fileName）时，这个错误“内存不足”是什么意思？

> ID：14730328
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:45.470
> 
> 标签：c#

我现在在显示现有文件中的图像时遇到问题...

```
try
{   
    bool EndFlag = false;
    string fileLoc = @"../../../../samples/jpeg_" + DateTime.Now.ToString("yyyyMMdd_hhmmss") + ".jpg";
    //Create a file Stream to save the body of the JPEG File content.
    FileStream fs = null;
    fs = new FileStream(fileLoc, FileMode.OpenOrCreate, FileAccess.Write);

    do 
    {
        ReadJpegFileCommand(); 
        CamPort.DiscardOutBuffer();
        CamPort.DiscardInBuffer();

        for (int i = 0; i < 5; i++)
            header[i] = (byte)CamPort.ReadByte();

         if (((int)header[0] == 0x76) && (header[1] == 0x00) && (header[2] == 0x32) && (header[3] == 0x00) && (header[4] == 0x00))
             {
                for (int i = 0; i < 32; i++)
                        ImageBody[i] = (byte)CamPort.ReadByte();
              /* 
                 * writing the bytes that have been read till now to a file 
              */                    

                    fs.Write(ImageBody, 0, ImageBody.Length);

                    for (int i = 1; i < ImageBody.Length; i++)     // check if reached to the last two bytes(FF D9) of the body to  stop reading the body.
                    {
                        if ((ImageBody[i - 1] == 0xFF) && (ImageBody[i - 0] == 0xD9))
                        {
                            EndFlag = true;
                            MessageBox.Show("FFD9 has been received");
                            OneSnap.Image =(Bitmap)System.Drawing.Image.FromStream(fs);
                            fs.Close();

                        }
                    }
             }
         else
         {
             MessageBox.Show("Error,Try again"); // The first 5 bytes does not match the header 

         }

         for (int i = 0; i < footer.Length; i++)
         {
             footer[i] = (byte)CamPort.ReadByte();
         }

         // update the starting address 

         M += (UInt16)ImageBody.Length;
         //Progress.PerformStep();

        }while(!EndFlag);

    }

catch (System.Exception ex) { MessageBox.Show(ex.Message); } 
```

当我使用此语句时：

```
OneSnap.Image =(Bitmap)System.Drawing.Image.FromStream(fs);
                                                            fs.Close(); 
```

我有这个错误：“参数无效”

但是当我尝试使用替代方法并将之前的陈述替换为::

```
 fs.Close();
OneSnap.Image =(Bitmap)System.Drawing.Image.FromFile(fileLoc); 
```

我在图片框中显示了图像..但是当我执行程序更多时出现此错误::“内存不足”并且看不到图片框中的图像（OneSnap）>>>如何解决这个 ？？

示例 ::（此图像已通过链接 Sprite Jpeg Camera 捕获）

![在此处输入图像描述](../Images/daa14b2428c27d2a07f300e3a41c9d6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:55:17.240

看起来您创建的文件不是有效图片，因此无法转换为位图。

请参阅[官方文档](http://msdn.microsoft.com/en-us/library/4sahykhd%28v=vs.100%29.aspx)：

```
例外情况
-------------------------------------------
OutOfMemoryException 该文件没有有效的图像格式。
                      -或者-
                      GDI+ 不支持文件的像素格式。

```

看不到“修复”此问题的方法，但您可以通过尝试在图片查看器中查看文件来验证；如果您可以查看它，那么您可能需要比 System.Drawing 提供的更复杂的东西。

编辑：可能比我们想象的要容易。尝试更改行的顺序：

```
fs.Close();
OneSnap.Image =(Bitmap)System.Drawing.Image.FromStream(fs); 
```

可能是当流打开时，位图内部代码无法从文件中读取。

另一种方法是使用 MemoryStream 代替。为此，首先添加一个 List 来存储所有字节：

```
List<byte> arrAllBytes = new List<byte>(); 
```

现在代替这一行：

```
fs.Write(ImageBody, 0, ImageBody.Length); 
```

有这个代码：

```
arrAllBytes.AddRange(ImageBody); 
```

最后：

```
MemoryStream stream = new MemoryStream(arrAllBytes.ToArray())
OneSnap.Image = System.Drawing.Image.FromStream(stream); 
```

# hibernate - JPA 2.0：在 JPA 2.0 中使用 javax.validation.* 包的例外情况

> ID：14730329
> 
> 赞同：48
> 
> 时间：2013-02-06T13:30:45.903
> 
> 标签：hibernate, validation, jakarta-ee, jpa-2.0, javabeans

当我尝试使用休眠的 JPA 使用 bean 验证时，将发生以下异常：

```
Exception in thread "main" javax.persistence.PersistenceException: [PersistenceUnit: Chapter11] Unable to build EntityManagerFactory
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:63)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
at example.test.Test.main(Test.java:18)

Caused by: org.hibernate.HibernateException: Error applying BeanValidation relational constraints
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:219)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.integrate(BeanValidationIntegrator.java:126)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:306)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
... 5 more

Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.hibernate.cfg.beanvalidation.BeanValidationIntegrator.applyRelationalConstraints(BeanValidationIntegrator.java:208)
... 10 more
Caused by: java.lang.NoClassDefFoundError: javax/validation/ParameterNameProvider
at org.hibernate.validator.HibernateValidator.createGenericConfiguration(HibernateValidator.java:41)
at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:269)
at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:111)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:521)
at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:119)
... 15 more

Caused by: java.lang.ClassNotFoundException: javax.validation.ParameterNameProvider
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 20 more 
```

我是使用验证包的新手，我不了解 JAVA EE bean。如何将此验证包与 jpa 实体一起使用以下是我的代码：

```
 public class Employee implements Serializable , EmployeeDetail{

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue
private int id;
@NotNull
private String name;
    ____________________

public class Test {
public static void main(String[] args) {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("Chapter11");
    EntityManager em = emf.createEntityManager();
    EntityTransaction etr = em.getTransaction();

    etr.begin();
            ------------------

        FullTimeEmployee flEmp = new FullTimeEmployee();
        flEmp.setName("Harmeet Singh");
        flEmp.setPension(56000);
        flEmp.setSalary(100000);

        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        Validator validator = factory.getValidator();
        validator.validate(flEmp, Employee.class);

        em.persist(flEmp);
    etr.commit(); 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-06-17T07:30:15.927

正如评论中提到的@Korgen *hibernate-validator-5.xx*与*validation-api-1.0.x*不兼容。这是因为迁移到新规范 JSR-303 -> JSR-349。

有两种方法可以解决这个问题：

**1.**降级休眠验证器版本（实现 JSR-303）：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.3.1.Final</version>
</dependency> 
```

**2.**如果您不想从休​​眠验证器 5 移回休眠验证器 4，另一种解决方案是将 javax.validation 升级到更高版本（描述 JSR-349）：

```
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.1.0.Final</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-03-02T16:19:51.750

对于那些遇到错误`NoClassDefFoundError: javax/validation/valueextraction/ValueExtractorDeclarationException`并且他们的验证 API 已经存在的人`javax.validation:validation-api:1.1.0.Final`

修复是从升级`javax.validation:validation-api:1.1.0.Final`到`javax.validation:validation-api:2.0.1.Final`.

# javascript - 我的第一个 webapp 一个非常简单的记事本

> ID：14730330
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:44.913
> 
> 标签：javascript, html, web-applications

我创建了一个非常简单的基于 Web 的文本编辑器 - [http://bit.ly/XNFrE4](http://bit.ly/XNFrE4)

但是这个应用程序最大的不足之一是无法将其保存为文本文件（.txt）。

因此，我正在寻找有关如何将内容保存为 .txt 文件的想法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:40:02.440

将您的文件放入 URI 字符串（使用 base64 编码）并将其作为新链接打开。

顺便提一句。还有一些其他更复杂的解决方案：[http ://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:34:56.400

一种方法是：

1.  提交表单并将输入作为参数发送到“saveFile.php”之类的内容
2.  在“saveFile.php”中，将提交的文件作为下载文件 (*.txt) 发送回用户。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T13:44:58.187

我喜欢它有多干净！我建议为 contenteditable div 设置大约 6-700 像素的最大宽度，这将提供更好的可读性。如果您可以在文本中使用标题和列表以及其他 html 元素，那就可以了。

可以通过使用 ajax 请求将内容发送到服务器来保存文档，然后在服务器上创建一个 txt 文件并将其发送回用户

[http://www.tizag.com/phpT/filecreate.php](http://www.tizag.com/phpT/filecreate.php)

我建议你使用当前时间来创建文件，以避免两个人在小时间间隔内保存文件交换。

```
$ourFileName = "simple-editor-".time().".txt";
$ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
$myFile = $ourFileName;
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "Bobby Bopper\n";
fwrite($fh, $stringData);

fclose($fh); 
```

如果您真的想尝试一些后端代码，如果有身份验证并且可以在服务器上保存文件，我会很高兴。

我认为您也可以使用 js 创建一个 txt 文件，但我会使用 php

# xml - DTD 正好 2 个元素

> ID：14730332
> 
> 赞同：1
> 
> 时间：2013-02-06T13:30:48.960
> 
> 标签：xml, dtd

我发现在以前的考试中，他要求我们写 DTD：

“传感器系统元素内部只有一个速度元素，紧接着是两个具有强制性位置属性的温度元素”

所以它是

```
<!ELEMENT sensor-system(velcoity,temperature+)> 
```

他怎么会想要这么多温度？这甚至可能吗？我可以写吗还是不正确

```
<!ELEMENT sensor-system(velcoity,temperature,temperature)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:49:01.830

是的，别忘了像这样声明你的温度元素：

`<!ELEMENT temperature (location)>`

# content-management-system - sitefinity 搜索小部件不支持在内容块内进行搜索

> ID：14730334
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:50.570
> 
> 标签：content-management-system, telerik, sitefinity, sitefinity-5

我正在尝试使用 sitefinity 搜索小部件，但它无法正常工作。我已经检查了搜索索引页面中的“页面中的静态 HTML”选项。然后我重新索引它。搜索结果页面不显示内容块中的单词。你能帮我找到解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:14:50.137

我遇到了小部件破坏我的索引的问题。[Sitefinity 论坛上的这篇文章](http://www.sitefinity.com/developer-network/forums/general-discussions-/search-widget-does-not-enable-searches-inside-content-blocks#8hzYhOxD8kKMECYTiIk9fQ)概述了一种确定它是否发生在您身上的方法。

# c# - C# WPF 如何处理动画到达某个点？

> ID：14730336
> 
> 赞同：0
> 
> 时间：2013-02-06T13:30:58.557
> 
> 标签：c#, wpf

我对 WPF 有点陌生，刚开始研究动画，只是为了好玩，我开始创建老式游戏 Frogger（青蛙必须穿过河流/道路而不会被汽车撞到等的游戏）。

我为河流中穿过屏幕的木头制作了动画：

```
<Canvas>
        <Rectangle Name="shape_WaterBackground" Fill="#1E90FF" Height="20" Width="260" Canvas.Top="240"/>
        <Rectangle Name="shape_Lumber" Width="40" Canvas.Top="240" Fill="Brown" Height="16" Margin="0,2,0,0" />
        <Image Name="Froggy" Height="20" Width="20" Canvas.Top="300" Canvas.Left="120" Source="Froggy.jpg" />             
</Canvas> 
```

这个特定动画的代码隐藏：

```
DoubleAnimation Animate_Lumber_Movement = new DoubleAnimation(-40, 280, TimeSpan.Parse("0:0:7"));

Animate_Lumber_Movement.RepeatBehavior = RepeatBehavior.Forever;

shape_Lumber.BeginAnimation(Canvas.LeftProperty, Animate_Lumber_Movement); 
```

现在我的问题是，当日志到达某个点时我该如何处理。原因是（就像您可能已经猜到的那样）我想知道如何在不停止动画的情况下在动画中途执行动作（动画中的不同点或时间，而不是静态）。

它与我在此处描述的问题有些相同：[如何确定动画精灵何时到达某个点？](https://stackoverflow.com/questions/11269253/how-to-determine-when-an-animated-sprite-reaches-a-point)，但对于 C# WPF。

作为上面代码中的一个示例，如果青蛙跳向河流并且它的 Canvas.Left 属性与动画日志匹配，我希望青蛙能够幸存下来，否则就会淹死。

非常感谢任何建议（但请记住，我是新手）

对不起，这个问题解释得不太清楚:)

感谢你并致以真诚的问候

洛达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:48:51.360

由于您只是为`Canvas.Left`属性设置动画，因此您始终可以设置 a`DispatcherTimer`并阅读它（`Canvas.GetLeft`或`Canvas.GetTop`）。

Although, maybe this is just me, but conceptually, WPF animations are more for short spurts, sort of like screen transitions and the like - not really for handling entire game animations. If that's your aim, you're probably just better off handling the animation yourself (set up a `DispatcherTimer`, and then on each tick you would update your game state).

# html - iPhone 上电子邮件中的白线与拆分图像

> ID：14730337
> 
> 赞同：1
> 
> 时间：2013-02-06T13:31:01.337
> 
> 标签：html, html-email

我们为我们的电子邮件消息找到了一段代码，它可以调整移动设备的电子邮件大小，但保持文本的大小。

我们对电子邮件消息使用拆分图像，并在图像上方显示文本。问题是我们在 tr 命令的图像中得到一条白线。如果从标题中删除以下代码，则图像显示没有白线。当我重新添加代码时，在 iPhone 或 Droid 上查看电子邮件时，我无法摆脱白线。它在所有电子邮件客户端的桌面/笔记本电脑上完美显示。

这是我们放在 head 部分的代码。

```
<style type="text/css"> @media only screen and (max-width: 600px)
  {/*CSS styles here will be applied on supporting mobile devices*/
  table, div {width:100% !important; max-width: 600px !important; position:relative !important; height:auto !important; overflow:hidden !important; top:0px !important;}
  img {max-width:100%; height: auto !important;}}
</style> 
```

关于如何摆脱白线的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:26:29.827

试试`display:block;`你的图片标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T02:54:15.330

position:relative 对我来说似乎很奇怪。我也不认为你需要指定 height:auto !important;

如果您试图让您的图像响应，即始终 100% 宽度的容器元素，您可以指定 width="100% 并省略高度规范。它将以适当的比例缩放。

如果您只需要一些代码来阻止图像上方的文本在移动设备（例如 iPhone 等）上调整大小，这些就是我一直在使用的。

```
div, p, a, li, td { -webkit-text-size-adjust:none; }
     #outlook a {padding:0;} /* Force Outlook to provide a "view in
browser" menu link. */
     html{width: 100%; }
     body{width:100% !important; -webkit-text-size-adjust:100%;
-ms-text-size-adjust:100%; margin:0; padding:0;}
     /* Prevent Webkit and Windows Mobile platforms from changing
default font sizes, while not breaking desktop design. */
     .ExternalClass {width:100%;} /* Force Hotmail to display emails at
full width */
     .ExternalClass, .ExternalClass p, .ExternalClass span,
.ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /*   

Hotmail to display normal line spacing. */
     .backgroundTable {margin:0; padding:0; width:100% !important;
line-height: 100% !important;}
     img {outline:none; text-decoration:none;border:none;
-ms-interpolation-mode: bicubic;} 
```

# windows - 连接远程 Cassandra(1.2.1) 服务器

> ID：14730339
> 
> 赞同：1
> 
> 时间：2013-02-06T13:31:03.990
> 
> 标签：windows, cassandra

我在远程 Windows 服务器上运行 Cassandra 1.2.1。我将yaml设置如下；

rpc_address：0.0.0.0 start_native_transport：真

**我可以**通过输入 IP 地址和端口号从笔记本电脑连接远程 Cassandra 服务器；

连接 XXX.XX.XX.XX/9160；

在 cassandra-cli.bat 上

**但我无法**从我的 .Net 应用程序连接远程 Cassandra 服务器。我使用*casssandra-sharp*；

```
XmlConfigurator.Configure();
using (ICluster cluster = ClusterManager.GetCluster("main"))
          Console.WriteLine("succeded");
ClusterManager.Shutdown(); 
```

这是App.config；

```
 <configSections>
    <section name="CassandraSharp" type="CassandraSharp.SectionHandler, CassandraSharp" />
  </configSections>

  <CassandraSharp>
    <Cluster name="main">
      <Endpoints>
        <Server>XXX.XX.XX.XX</Server>
      </Endpoints>
    </Cluster>
  </CassandraSharp> 
```

应用程序抛出“找不到任何有效的端点”异常。当我在本地运行 Cassandra 并尝试连接时，此代码块完美运行。

在远程服务器上，防火墙允许使用 9160 和 7000 端口。关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:30:30.263

@rs_atl 是对的，这是一个连接问题。

如果您正在使用客户端库并要执行 CQL 命令，则需要设置；

```
start_native_transport: true 
```

你已经做了。只需以下两行，您就会看到；

```
native_transport_port: 9042 
```

在 yaml 文件中。这意味着您需要在防火墙上允许端口号**9042 。**

*如果您还使用 Azure 等云服务，请不要忘记添加端点。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:08:44.533

如果您的代码在本地工作，但在另一台机器上不能工作，唯一合乎逻辑的结论是一定存在连接问题。

# algorithm - 找到“平均”矢量形状？

> ID：14730340
> 
> 赞同：3
> 
> 时间：2013-02-06T13:31:04.997
> 
> 标签：algorithm

我有 100 个相似的形状（简单矢量图形）。如何找到所有 100 个实例的“平均/合并”形状？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:08:48.603

## Algorithm Proposal

1.  Compute the area of each shape {A}.

2.  Find the shape {S} with most points {N} (you're going to end up with a N side polygon)

3.  Merge {S} with another shape and create the first merged {M} shape. Then merge {M} with each other shape remaining. {M} will be dynamic/rewritten/will change every time it's merged with another shape.

* * *

**Merge function**: *pseudocode*
Call `Merge({S}, {S2})` first, then call `Merge({M}, {S2})` for the rest of the shapes.

Parameters:
{S1}=the shape with most points;
{S2}=shape to merge with;

```
function Merge({S1}, {S2}):    

FOR EACH {point} of {S1} DO
    {near}=find nearest {S2}{point}
    {size}=( SQRT({S1}{A}) + SQRT({S2}{A}) )/2
    {line}=create line starting at {near}, going to/over {point} of length {size}
    add point in {M} with position at half the {line}
END FOR
RETURN {M}
; 
```

**3 initial shapes: rectangle, triangle, 7 side polygon** {S}=green
![3shapes](../Images/a06d977a323ef470dd01777ecf2b156f.png)

**merged green with rectangle** {M}=blue
![merge1](../Images/0cffe9ec4625393a7aea74de30f24717.png)

**merged blue with triangle** {M}=yellow <-final result ![final](../Images/12a568d2a3848f1964502aef65ebe815.png)

***Notice: merged shapes not on scale! didn't account for areas!***

# android - Android中的多点触控图像

> ID：14730346
> 
> 赞同：0
> 
> 时间：2013-02-06T13:31:21.120
> 
> 标签：android, image, button

我在 Android 中将图像作为一个按钮，并且有 6 个图像按钮，现在我想在这 6 个按钮上使用多点触控

任何建议如何在Android中做到这一点？你能给我链接吗？因为我是 Android 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:34:53.297

使用[View.OnTouchListener](http://developer.android.com/reference/android/view/View.OnTouchListener.html)监听触摸事件并根据触摸的按钮做一些动作。

# asp.net - 无法上传asp.net网站

> ID：14730348
> 
> 赞同：0
> 
> 时间：2013-02-06T13:31:30.320
> 
> 标签：asp.net, upload

我最近将一个 asp.net 网站上传到 Web 服务器，但发布失败。现在，当我在互联网上打开该站点时，它显示 403 - 禁止访问：访问被拒绝。我无权查看此内容。我尝试使用 filezilla 再次上传文件。他们上传了，但同样的消息再次显示在浏览器上。你能告诉我我在哪里做错了吗？我使用的是框架 v4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:34:43.937

403 是一个禁止错误。

尝试检查网站的身份验证设置，您可能需要在 IIS 中为网站启用匿名访问，否则只会拒绝访问。

# fortran - 在 fortran 程序中调用 METIS API（用 C 语言编写）

> ID：14730349
> 
> 赞同：2
> 
> 时间：2013-02-06T13:31:30.873
> 
> 标签：fortran, fortran-iso-c-binding, metis

两个多星期以来，我一直在努力从我的 fortran 代码中调用一个用 C 编写的[METIS](http://glaros.dtc.umn.edu/gkhome/metis/metis/overview)库。而且，不幸的是，没有你的帮助，这似乎不是一个快乐的结局。[我发现了一些关于直接调用](https://stackoverflow.com/questions/14078401/metis-seg-faults-when-run-from-fortran)和[使用接口](https://stackoverflow.com/questions/8155160/metis-with-fortran)的帖子。我更喜欢后者，因为我可以监视变量以进行调试。我附上了三个代码。

1.我想使用的c函数
2.fortran接口模块
3.fortran程序

(1)c函数

```
int METIS_PartMeshNodal(idx_t *ne, idx_t *nn, idx_t *eptr, idx_t *eind, 
      idx_t *vwgt, idx_t *vsize, idx_t *nparts, real_t *tpwgts, 
      idx_t *options, idx_t *objval, idx_t *epart, idx_t *npart) 
```

*我删除了 c 函数体。没有必要了解我的问题*

这里，**idx_t**是整数，**real_t**是单精度或双精度。从**ne**到**options**是输入，最后三个参数是输出。并且**vwgt**，**vsize**，**tpwgts**和**options**可以接收 null 作为默认设置的输入 我编写了使用这样的 c 函数的接口模块

(2) Fortran接口模块

## 固定的！

1.  **在use 常量**下插入**use iso_c_bind**
***   对**ne**、**nn**和其他变量使用**integer(c_int)**而不是**integer 。*******   删除未使用的模块**常量********

 ****.

```
module Calling_METIS

  !use constants,  only : p2 !this is for double precision
  use iso_c_bind            !inserted later

  implicit none

  !integer                                    :: ne, nn              !modified
  integer(c_int)                              :: ne, nn 
  !integer,  dimension(:), allocatable        :: eptr, eind          !modified
  integer(c_int),  dimension(:), allocatable  :: eptr, eind
  !integer,  dimension(:), allocatable        :: vwgt, vsize         !modified
  type(c_ptr)                                 :: vwgt, vsize         
  !integer                                    :: nparts              !modified
  integer(c_int)                              :: nparts
  !real(p2), dimension(:), allocatable        :: tpwgts              !modified 
  type(c_ptr)                                 :: tpwgts      
  !integer,  dimension(0:39)                  :: opts                !modified
  integer(c_int),  dimension(0:39)            :: opts        
  !integer                                    :: objval              !modified
  integer(c_int)                              :: objval
  !integer,  dimension(:), allocatable        :: epart, npart        !modified 
  integer(c_int),  dimension(:), allocatable  :: epart, npart 

  interface
    subroutine METIS_PartMeshNodal( ne, nn, eptr, eind, vwgt, vsize, nparts, tpwgt, &
                                    opts, objval, epart, npart) bind(c)
      use intrinsic        :: iso_c_binding
      !use constants,  only  : p2

      implicit none

      integer (c_int),                  intent(in)  :: ne, nn
      integer (c_int), dimension(*),    intent(in)  :: eptr, eind
      !integer (c_int), dimension(*),    intent(in) :: vwgt, vsize  !modified
      type(c_ptr),                          value   :: vwgt, vsize   
      integer (c_int),                  intent(in)  :: nparts
      !real(c_double),  dimension(*),    intent(in) :: tpwgt        !modified
      type(c_ptr),                          value   :: tpwgt
      integer (c_int), dimension(0:39), intent(in)  :: opts
      integer (c_int),                  intent(out) :: objval
      integer (c_int), dimension(*),    intent(out) :: epart
      integer (c_int), dimension(*),    intent(out) :: npart

    end subroutine METIS_PartMeshNodal  
  end interface
end module 
```

这是我调用该函数的程序代码

(3) Fortran程序

## 固定的！

1.  **npart**的分配大小是固定的。不是**ne**而是**nn**
2.  添加 opts(7)=1 以获得 epart、npart 的 Fortran 样式数组（直到现在才生效）

.

```
program METIS_call_test

 !some 'use' statments
 use Calling_METIS
 use iso_c_binging         !added

 implicit none

 ! Local variable
 integer         :: iC
 character(80)   :: grid_file !grid_file

 grid_file = 'test.grid'

 ! (1) Read grid files
 call read_grid(grid_file)

 ! (2) Construction Input Data for calling METIS Function
 ! # of cells, vertices
 ne = ncells
 nn = nvtxs

 ! eptr, eind allocation 
 allocate(eptr(0:ne), eind(0:3*ntria + 4*nquad - 1))

 ! eptr and eind building
 eptr(0) = 0
 do iC=1, ncells
   eptr(iC) = eptr(iC-1) + cell(iC)%nvtxs
   eind(eptr(iC-1):eptr(iC)-1) = cell(iC)%vtx
 end do

 ! epart, npart building
 !allocate(epart(ne), npart(ne))
 allocate(epart(ne), npart(nn))   ! modified

 ! # of partition setting
 nparts = 2
 vwgt   = c_null_ptr    !added
 vsize  = c_null_ptr    !added
 tpwgt  = c_null_ptr    !added     

 ! (3) Call METIS_PartMeshNodal
 call METIS_SetDefaultOptions(opts)

 opts(7) = 1                      !Added. For fortran style output array epart, npart. 

 call METIS_PartMeshNodal(ne, nn, eptr, eind, vwgt, vsize, nparts, tpwgt, &
                           opts, objval, epart, npart)
 !call METIS_PartMeshNodal(ne, nn, eptr, eind, null(), null(), nparts, null(), &
 !                         opts, objval, epart, npart)         !wrong...

end program 
```

但问题是我收到如下错误消息，尽管我为 tpwgt 设置了 null。

**输入错误：约束 0 的 tpwgts 的 0.000000 总和不正确。**

这条消息在下面的代码中处理。

```
for (i=0; i<ctrl->ncon; i++) {
    sum = rsum(ctrl->nparts, ctrl->tpwgts+i, ctrl->ncon);
    if (sum < 0.99 || sum > 1.01) {
      IFSET(dbglvl, METIS_DBG_INFO, 
          printf("Input Error: Incorrect sum of %"PRREAL" for 
                  tpwgts for constraint %"PRIDX".\n", sum, i));
      return 0;
    }
  } 
```

无论如何，为了看看如果我为 tpwgts 放置一个数组而不是 null 会得到什么，**tpwgts(:) = 1.0/nparts**，这使得 tpwgts 的总和等于 1.0。但我得到了与**1.75**相同的消息。

这些是我的问题
1\. 我是否使用 null() 正确传递参数？
2\. 我必须将所有参数的指针传递给 c 函数吗？那怎么办？
3\. 将整数放入 opts(0:39) 是否足够使用？例如，在没有“接口模块”的[帖子](https://stackoverflow.com/questions/14078401/metis-seg-faults-when-run-from-fortran)中，使用了像 options(3)=1 这样的简单代码。但在 c 代码中，options 有 16 个命名变量，如 options[METIS_OPTION_NUMBERING]、options[METIS_OPTION_UFACTOR]。我认为设置选项是必要的，但我不知道。4\. 有没有 METIS fortran 的例子？

任何形式的提示/建议都会对我有很大帮助。谢谢你。

## 结论

我遇到的问题是**c 函数无法**从 fortran 代码中识别空指针。

接口模块中有一些变量的错误声明（请参阅“已修复”和评论）

看起来代码工作正常。但是fortran 样式输出的**option(7) = 1**不起作用，现在我正在研究它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:26:42.360

1.  不，您不能通过`null()`，这是一个 Fortran 指针常量。您必须`C_NULL_PTR`从模块传递，`ISO_C_BINDING`并且接口必须反映这一点。虚拟参数必须是`type(c_ptr)`，很可能带有`VALUE`属性。由于相同的内部表示，它实际上可能有效，但我不会指望它。

2.  不，如果你传递一些普通的变量，你可以直接通过引用传递它。就像通常在 Fortran 中一样。如果接口是`BIND(C)`，编译器知道它必须发送一个指针。

    有一个更新 Fortran 2008 的新 TS，您可以在其中将可互操作过程中的虚拟参数定义为`OPTIONAL`. 然后你可以通过省略它们来传递空指针。Gfortran 应该已经支持这一点。

**注意：**在这里我可以看到你的函数有一个非常不同的 C 签名，你确定你的函数没问题吗？[http://charm.cs.uiuc.edu/doxygen/charm/meshpart_8c.shtml](http://charm.cs.uiuc.edu/doxygen/charm/meshpart_8c.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T04:25:10.840

我认为您`opts(7)`不起作用，因为您还需要 METIS 功能的接口`METIS_SetDefaultOptions`。根据来自[http://glaros.dtc.umn.edu/gkhome/node/877](http://glaros.dtc.umn.edu/gkhome/node/877)的回答，我创建了一个`metisInterface.F90`带有我需要的接口的包装模块 ( )：

```
module metisInterface
! module to allows us to call METIS C functions from the main Fortran code

   use,intrinsic :: ISO_C_BINDING

   integer :: ia,ic
   integer(C_INT) :: metis_ne,metis_nn
   integer(C_INT) :: ncommon,objval
   integer(C_INT) :: nparts
   integer(C_INT),allocatable,dimension(:) :: eptr,eind,perm,iperm
   integer(C_INT),allocatable,dimension(:) :: epart,npart
   type(C_PTR) :: vwgt,vsize,twgts,tpwgts
   integer(C_INT) :: opts(0:40)

   interface
      integer(C_INT) function METIS_SetDefaultOptions(opts) bind(C,name="METIS_SetDefaultOptions")
         use,intrinsic :: ISO_C_BINDING
         implicit none
         integer(C_INT) :: opts(0:40)
      end function METIS_SetDefaultOptions
   end interface 

   interface
      integer(C_INT) function METIS_PartMeshDual(ne,nn,eptr,eind,vwgt,vsize,ncommon,nparts,tpwgts, &
                              opts,objval,epart,npart) bind(C,name="METIS_PartMeshDual")
         use,intrinsic :: ISO_C_BINDING
         implicit none
         integer(C_INT):: ne, nn
         integer(C_INT):: ncommon, objval
         integer(C_INT):: nparts
         integer(C_INT),dimension(*) :: eptr, eind
         integer(C_INT),dimension(*) :: epart, npart
         type(C_PTR),value :: vwgt, vsize, tpwgts
         integer(C_INT) :: opts(0:40)
      end function METIS_PartMeshDual
   end interface    

end module metisInterface 
```

然后，在主程序中（或者你调用 METIS 函数的任何地方），你需要拥有（为了完整起见，我还添加了对 的调用`METIS_PartMeshDual`）：

```
use metisInterface

integer :: metis_call_status
.
.
.
metis_call_status = METIS_SetDefaultOptions(opts)

! METIS_OPTION_NUMBERING for Fortran
opts(17) = 1

metis_call_status = METIS_PartMeshDual(metis_ne,metis_nn,eptr,eind, &
                    vwgt,vsize,ncommon,nparts,tpwgts,opts,objval,epart,npart) 
```

请注意，`epart`并且`npart`将根据需要使用 Fortran 编号（从 1 开始）。但是，处理器也将从 1 开始编号。例如，如果您在 4 个处理器中运行，则根处理器为 1，您可能有`epart(n)=4`，但您不会有任何`epart(n)=0`.

最后，`metis.c`还需要一个文件，其中包含一行：

```
#include "metis.h" 
```

### 编译说明

1.  `metis.c`用 C 编译器编译
2.  使用与已编译`metisInterface.F90`C 对象链接的 Fortran 编译器进行编译
3.  使用链接到的 Fortran 编译器编译主程序`metisInterface.o`****

# java - 从 SOAP Web 服务获取响应时出错

> ID：14730352
> 
> 赞同：-2
> 
> 时间：2013-02-06T13:31:34.647
> 
> 标签：java, android, web-services, soap, android-ksoap2

为了从 SOAP Webservice 获取响应，我根据需要执行了以下操作。

**SOAPUI 请求：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="http://test.login/">
   <soapenv:Header/>
   <soapenv:Body>
      <test:Login>
         <!--Optional:-->
         <arg0>best_buyer_editor</arg0>
         <!--Optional:-->
         <arg1>welcome</arg1>
         <!--Optional:-->
         <arg2>Mobile</arg2>
      </test:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

**SOAPUI 响应：**

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:LoginResponse xmlns:ns2="http://test.login/">
         <return>{"LoginDetails":{"Result":"Success","UserName":"Best Buyer Editor","token":"M7M5RMQU6","rolelist":["buyer_editor","admin_role"],"parties":[{"partynumber":"BEST","type":"self","sites":[{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-1","siteaddress":"225 E Industrial Blvd Waco USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-5","siteaddress":"20 Milburn St Buffalo USA"},{"companyname":"Best Engineers Manufacturing USA Inc","sitecode":"BESTHQ","siteaddress":"8976, Hope vision Lane Simple City USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-6","siteaddress":"Cedar &amp; Ellicott Sts Batavia USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-2","siteaddress":"9700 Richmond Ave Ste 201 Houston USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-4","siteaddress":"3315 Ashlock Dr Houston USA"},{"companyname":"Best Engineers Manufacturing USA Inc","sitecode":"BESTWH","siteaddress":"1021, Industrial Bolevar San Macros City USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYMEX-10","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-8","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"Best Engineers Manufacturing Europe Inc","sitecode":"BESTMO","siteaddress":"789,Future Vision Towers London GBR"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-7","siteaddress":"1580 Columbia Tpke Ste 5 Castleton On Hudson USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYMEX-9","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-3","siteaddress":"2821 Lackland Rd Ste 340 Fort Worth USA"}]},{"partynumber":"DHL","type":"sponsors","sites":[{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-2","siteaddress":"11311 N Central Expy Dallas USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-7","siteaddress":"150 W 22nd St Fl 5 New York USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYMEX-9","siteaddress":"One Markin Lane Wyoming USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-6","siteaddress":"12685 State Route 38 Berkshire USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-4","siteaddress":"2221 Canada Dry St Houston USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-5","siteaddress":"521 5th Ave Rm 2130 New York USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-1","siteaddress":"6505 N Houston Rosslyn Rd Houston USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-3","siteaddress":"9405 N County Road 2000 Lubbock USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYMEX-10","siteaddress":"One Markin Lane Wyoming USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-8","siteaddress":"One Markin Lane Wyoming USA"}]},{"partynumber":"UPS","type":"sponsors","sites":[{"companyname":"www.ups.com","sitecode":"UPSTXUSA-3","siteaddress":"1455 West Loop S Houston USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-8","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYMEX-10","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-7","siteaddress":"1400 Broadway Fl 2 New York USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-4","siteaddress":"14902 Sommermeyer St Ste 100 Houston USA"},{"companyname":"www.ups.com","sitecode":"UPSNYMEX-9","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-6","siteaddress":"101 Cranbrook Ext Tonawanda USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-5","siteaddress":"290 Barrett Hill Rd Mahopac USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-2","siteaddress":"11308 Midmorning Dr Austin USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-1","siteaddress":"3900 Harrisburg Blvd Houston USA"}]},{"partynumber":"HDEPO","type":"sponsors","sites":[{"companyname":"Home Depot USA.","sitecode":"HDEPOWH","siteaddress":"55031 Hdepo WH Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-8","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-4","siteaddress":"4901 Blaffer St Houston USA"},{"companyname":"Home Depot USA.","sitecode":"HDEPOHQ","siteaddress":"5031 Hdepo HQ Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYMEX-9","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-6","siteaddress":"1790 Broadway Ste 702 New York USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-3","siteaddress":"2203 Timberloch Pl Ste 252 The Woodlands USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYMEX-10","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-5","siteaddress":"1040 Avenue Of The Americas New York USA"},{"companyname":"Home Depot USA.","sitecode":"HDEPOMO","siteaddress":"5031 Hdepo MO Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-1","siteaddress":"14603 Chrisman Rd Houston USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-2","siteaddress":"16103 University Oak San Antonio USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-7","siteaddress":"392 Pulteney St Corning USA"}]},{"partynumber":"GWILL","type":"sponsors","sites":[{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYMEX-9","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLHQ","siteaddress":"543, Light Ray Street Wellknown city In"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYMEX-10","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-7","siteaddress":"1800 New Hwy Farmingdale USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-8","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLMO","siteaddress":"6789, Engineering Laner Large city GBR"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-2","siteaddress":"945 McKinney St # 237 Houston USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-6","siteaddress":"580 Broadway Menands USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-3","siteaddress":"6921 Olson Ln Pasadena USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-1","siteaddress":"7075 Ranch Road 2338 Georgetown USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-4","siteaddress":"3839 Dilido Rd Dallas USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-5","siteaddress":"1 Radisson Plz Ste 803 New Rochelle USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLHQ","siteaddress":"543, Light Ray Street Wellknown city USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLWH","siteaddress":"2345, Well formed lane Hope in city USA"}]},{"partynumber":"FEDEX","type":"sponsors","sites":[{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-2","siteaddress":"400 Langford St Clint USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-8","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-4","siteaddress":"5025 East Business 20 Abilene USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-5","siteaddress":"637 New Loudon Rd Ste 2 Latham USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXWH","siteaddress":"6754 Fedex WH  Road Fedex  City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-1","siteaddress":"4305 N Interstate 35 Denton USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXHQ","siteaddress":"7800 Fedex HQ  Road Bossier City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-3","siteaddress":"14444 Stuebner Airline Rd Houston USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYMEX-10","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-7","siteaddress":"65 Old Indian Rd Milton USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYMEX-9","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXMO","siteaddress":"9600 Fedex MO Road Bossier City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-6","siteaddress":"1254 Erie Ave North Tonawanda USA"}]}]}}</return>
      </ns2:LoginResponse>
   </soap:Body>
</soap:Envelope> 
```

**我的代码：**

```
URL = "http://test.tpsynergy.com:8080/tpsynergy/services/login";
SOAP_ACTION = "http://test.tpsynergy.com:8080/tpsynergy/services/login";
METHOD = "Login";
NAMESPACE = "http://test.login/";
SoapObject request = new SoapObject(NAMESPACE, "Login");
request.addProperty("arg0", "best_buyer_editor");
request.addProperty("arg1", "welcome");
request.addProperty("arg2", "Mobile");

Log.i(TAG, "Request for getting airport list" + request.toString());

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.dotNet = true;
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
try {
    androidHttpTransport.call(SOAP_ACTION, envelope);

    if (envelope.bodyIn instanceof SoapFault) {
                String str= ((SoapFault) envelope.bodyIn).faultstring;
                Log.i("", str);

     } else {
                SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
                response = resultsRequestSOAP.getProperty(0).toString();

                 Log.i(" Login Webservice Response", "Responce ---->"
                         + (resultsRequestSOAP.getProperty(0).toString()));
            }

    } catch (Exception e) {

            Log.i(TAG, "Exception e" + e.toString());
        } 
```

执行上述代码后，我收到以下错误：

```
Unmarshalling Error: unexpected element (uri:"http://test.login/", local:"arg0"). Expected elements are <{}arg2>,<{}arg1>,<{}arg0> 
```

谁能告诉我为什么我不是通过我的代码在 SOAPUI 中获得成功。

我已经引用了许多 SO 链接，但无法解决我的问题。

**我的问题是什么：**我真的不明白知道错误试图说`Expected elements are <{}arg2>,<{}arg1>,<{}arg0>.` 什么，解决这个问题的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:32:13.767

使用 TCP 监视器检查发送的 SOAP 请求是什么。我怀疑基于错误消息，元素 arg* 使用命名空间限定，因为 web 服务不希望它们那样。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="http://test.login/">
   <soapenv:Header/>
   <soapenv:Body>
      <test:Login>
         <!--Optional:-->
         <test:arg0>best_buyer_editor</test:arg0>
         <!--Optional:-->
         <test:arg1>welcome</test:arg1>
         <!--Optional:-->
         <test:arg2>Mobile</test:arg2>
      </test:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

# jquery - jQuery 可排序网格小部件翻转效果

> ID：14730358
> 
> 赞同：2
> 
> 时间：2013-02-06T13:31:54.247
> 
> 标签：jquery, css-transitions, jquery-ui-sortable

我正在尝试使用 css 转换使过程更顺畅。

因此，当瓷砖移动时，它会消失，然后在原位消失。

为了简单起见，我将示例代码更改为仅在字体颜色更改中进行过渡

我遇到的问题是我试图让它影响每一个移动的瓷砖，而不仅仅是右边的那个

尽我所能，我似乎无法在一次鼠标移动中重新触发效果。

如果我停止并重新拖动但不是在拖动过程中移动的所有项目上都可以正常工作。（我希望这是有道理的！）

我的html在这里

```
<ul id="sortable" class="sortable">
<li class="ui-state-default">1</li>
<li class="ui-state-default">2</li>
<li class="ui-state-default">3</li>
<li class="ui-state-default">4</li>
<li class="ui-state-default">5</li>
<li class="ui-state-default">6</li>
<li class="ui-state-default">7</li>
<li class="ui-state-default">8</li>
<li class="ui-state-default">9</li>
<li class="ui-state-default">10</li>
<li class="ui-state-default">11</li>
<li class="ui-state-default">12</li></ul> 
```

我的js在这里

```
$(function () {
$("#sortable").sortable({
    sort: function (event, ui) {
        changeit = ui.item.nextAll('li.ui-state-default').eq(0);
        changeit.css({
            'color': 'blue',
                '-webkit-transition': 'color 0.5s ease-in',
                '-moz-transition': 'color 0.5s ease-in',
                '-o-transition': 'color 0.5s ease-in',
                'transition': 'color 0.5s ease-in'
        })
    }
});
$("#sortable").disableSelection(); 
```

});

我的CSS在这里

```
 #sortable {
    list-style-type: none;
    margin: 0;
    padding: 0;
    width: 450px;
}

    .sortable li {
        margin: 3px 3px 3px 0;
        padding: 1px;
        float: left;
        width: 100px;
        height: 90px;
        font-size: 4em;
        text-align: center;
    } 
```

我在这里设置了一个小提琴 [http://jsfiddle.net/mw8Xu/21/](http://jsfiddle.net/mw8Xu/21/)

我一直在祈祷，当我不知所措时，有人可以提供帮助！

提前致谢

# php - CakePHP 如何从外部函数调用控制器函数

> ID：14730364
> 
> 赞同：2
> 
> 时间：2013-02-06T13:32:20.773
> 
> 标签：php, cakephp-2.1

我无法[在位于 webroot 的外部 .php 脚本中访问会话](https://stackoverflow.com/questions/14725481/cakephp-accessing-the-session-in-a-php-file-located-in-the-webroot)。

以为我会在我的一个控制器中编写一个函数 getSession() 并尝试在 .php 文件中调用它。

**所以分步骤：**

1.  我有file.php
2.  在控制器中，我有一个函数 getSession()。
3.  如何调用file.php中的controllers函数？

谢谢你。

**编辑**

同时我修复了我的错误，但仍然很好奇这是如何完成的，并希望其他堆栈用户找到一个好的答案，所以：

它完全是这样的：

在 UsersController 我有一个功能：

```
public function getSession() {
    return $_SESSION['Auth']['User']['user_id'];
} 
```

我想说像这样打印（例如）：位于 webroot/uploadify/test.php 中的文件 test.php 中的 print_r(Users.getSession)。

这个文件不是一个类，但如果需要，那么它应该是:)

@CaboOne：也许你的答案是正确的，我只是不确定在哪里调用（并输入）什么代码:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:39:14.637

假设我在 webroot 文件夹中有以下 php 文件：

```
<?php

class TestingClass {

    function getName(){
        return "Test";
    }
}

?> 
```

我会做以下事情：

```
// This would bring you to your /webroot folder
include $_SERVER['DOCUMENT_ROOT'].'/another_file.php'; 

// Initializing the class
$example = new TestingClass; 

// Call a function from the initialized class
$a_value = $example->getName(); 

// If you want to use $a_value in the view, you can then set
$this->set('a_value', $a_value); 
```

# blackberry-10 - 如何将托管在远程服务器中的 .bar 文件安装到 BlackBerry 10 Dev Alpha 设备

> ID：14730371
> 
> 赞同：1
> 
> 时间：2013-02-06T13:32:45.563
> 
> 标签：blackberry-10, remote-server

我使用***Android Runtime***将 Android 应用程序移植到 BlackBerry 。***我可以使用Eclipse***成功安装该应用程序。现在我想将这些部署文件 (MyApp.bar) 放入远程服务器并使用浏览器下载**.bar**文件并将其安装到另一**台 BlackBerry 10 Dev Alpha 设备**。我能够下载但无法安装 .bar 文件。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:34:22.300

我相信您正在寻找可以在 BB10 设备本身运行以安装 .bar 文件的应用程序或工具，您已经下载了它。Playbook曾经[有一个类似的工具](http://forums.crackberry.com/playbook-apps-games-f243/localbar-install-bar-files-directly-your-playbook-667235/#post6826960)，但它似乎不再维护，Blackberry (RIM) 已阻止此应用程序用于在较新版本的 Playbook OS（可能还有 BB10）中执行安装的方法.

黑莓开发者论坛中的一些人[报告说可以](http://supportforums.blackberry.com/t5/Cascades-Development/Install-bar-over-a-BB-10-Dev-Alphe-device/td-p/1962869)使用的解决方案是作为 Firefox 或[Chrome 插件的](https://chrome.google.com/webstore/detail/playbook-app-manager/kmbaalodpmjjhpobkgljnelbpblnikkp)[Playbook 应用程序管理](http://gridbook.org/pb-app-mgr/)器。您可以在 PC 上的浏览​​器中使用此插件，通过网络将 .bar 推送到您的其他 Blackberry 10 Dev Alpha 设备。

如果这不起作用，则只剩下您已经知道可以使用的外部工具，例如 Eclipse 插件，您还可以使用SDK 之类的[命令行工具](http://developer.blackberry.com/android/documentation/running_unsigned_applications_using_a_debug_token_1727941_11.html)`blackberry-deploy`或`batchbar-deploy`随 SDK 一起安装。

最后，crackberry.com 有一个[关于使用](http://crackberry.com/how-put-android-apps-your-blackberry-10-device)[DDPB](http://ddpb.dauden.vn/)第三方应用程序侧载Android 应用程序的教程，这需要 Java 和 .Net（因此确实首选浏览器插件工具）。

# ios - 有没有使用 XMPP 添加和自动接受好友的好方法？

> ID：14730373
> 
> 赞同：5
> 
> 时间：2013-02-06T13:32:46.107
> 
> 标签：ios, xmpp

我正在尝试构建一个使用 XMPP 协议的 iOS 应用程序。我正在为 iOS 使用 XMPPFramework。我的应用程序有一些限制。我必须自动注册一些新用户（好吧，这很容易做到）。用户也应该能够自动将其他用户添加为朋友，所以我应该实现一些东西来自动接受好友请求，然后能够看到好友列表。有没有好的方法来做到这一点？

我想过在以下位置实施一些东西：

```
- (void)xmppRoster:(XMPPRoster *)sender didReceiveBuddyRequest:(XMPPPresence *)presence 
```

该自动接受请求。

但是，我怎样才能将此联系人添加到用户的好友列表中呢？这部分的文档不是很清楚。我应该使用 XMPPCoreDataStorage 类的保存方法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T21:03:23.917

您可以使用类`autoAcceptKnownPresenceSubscriptionRequests`的属性`XMPPRoster`。`YES`默认情况下。如果是这样`NO`，`xmppRoster:didReceivePresenceSubscriptionRequest:`则将调用委托方法。

PS：`xmppRoster:didReceiveBuddyRequest:`示例应用程序中的方法永远不会被调用。应用程序中没有任何引用它。这似乎是一种古老的方法。

# java - 表观死锁为未分配的挂起任务创建紧急线程

> ID：14730379
> 
> 赞同：21
> 
> 时间：2013-02-06T13:33:01.420
> 
> 标签：java, mysql, jdbc, mybatis

我正在使用带有 mybatis 的 mysql，我在我们的实时服务器上遇到了这个错误

```
com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@6538f8f2 
-- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks! 
```

我不明白为什么会出现这个错误是因为我的 C3P0 设置？我的 C3P0 设置是这样的

----开始更新-----

下面是我的 spring-servlet.xml 配置

我将数据源 bean**更新为**

```
<bean id="datasource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close" p:driverClass="com.mysql.jdbc.Driver"
p:jdbcUrl="jdbc:mysql://localhost/jdb" p:user="root" p:password="root" 
p:acquireIncrement="10" 
p:idleConnectionTestPeriod="60"
p:maxPoolSize="100" 
    p:maxStatements="0" 
    p:minPoolSize="10" 
    p:initialPoolSize="10"
    p:statementCacheNumDeferredCloseThreads="1" />
   <!-- Declare a transaction manager -->

<bean id="transactionManager"
class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
p:dataSource-ref="datasource" />

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="datasource" />
</bean>

<!-- scan for mappers and will automatically scan the whole classpath for xmls -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean> 
```

从我的 Dao 类中，我调用 mapper 方法，例如

```
 myDao.updateRecords() 
```

这是我的服务类方法

```
@Override
public List<UserDetailedBean> selectAllUsersDetail(long groupId, List<Long> ids) {

    List<UserDetailedBean> usersDetailList = null;

    try {
        usersDetailList = userDao.selectAllUsersDetail(groupId, ids);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return usersDetailList;
} 
```

在 Dao 类中，我只注入映射器。

```
@Resource
private UserMapper userMapper;

@Override
public List<UserDetailedBean> selectAllUsersDetail(long groupId, List<Long> ids) {
    return userMapper.selectAllUsersDetail(groupId,ids);
} 
```

---结束更新-----

如果需要任何其他信息，请告诉我。

这是完整的堆栈跟踪

```
[ WARN] 2013-01-08 20:13:39       com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@70497e11 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
[ WARN] 2013-01-08 20:13:39 com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@70497e11 -- APPARENT DEADLOCK!!! Complete Status: 
 Managed Threads: 3
 Active Threads: 3
 Active Tasks: 
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@2e81b8c5 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@4689a55d (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@76c7a0d8 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
 Pending Tasks: 
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@2c1101d4
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@108f1be6
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@2370a188
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@377cf9e5
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@6dfa45d8
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@49ffa050
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@2d760a24
    Pool thread stack traces:
 Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,main]
     java.net.SocketInputStream.socketRead0(Native Method)
     java.net.SocketInputStream.read(SocketInputStream.java:150)
     java.net.SocketInputStream.read(SocketInputStream.java:121)
     com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
     com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
     com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
     com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2549)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2991)
     com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3532)
     com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
     com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
     com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1557)
     com.mysql.jdbc.DatabaseMetaData$9.forEach(DatabaseMetaData.java:4984)
     com.mysql.jdbc.IterateBlock.doForAll(IterateBlock.java:51)
     com.mysql.jdbc.DatabaseMetaData.getTables(DatabaseMetaData.java:4962)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
     com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
     com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
 Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,main]
     java.net.SocketInputStream.socketRead0(Native Method)
     java.net.SocketInputStream.read(SocketInputStream.java:150)
     java.net.SocketInputStream.read(SocketInputStream.java:121)
     com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
     com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
     com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
     com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2549)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2991)
     com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3532)
     com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
     com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
     com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1557)
     com.mysql.jdbc.DatabaseMetaData$9.forEach(DatabaseMetaData.java:4984)
     com.mysql.jdbc.IterateBlock.doForAll(IterateBlock.java:51)
     com.mysql.jdbc.DatabaseMetaData.getTables(DatabaseMetaData.java:4962)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
     com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
     com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
 Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,main]
     java.net.SocketInputStream.socketRead0(Native Method)
     java.net.SocketInputStream.read(SocketInputStream.java:150)
     java.net.SocketInputStream.read(SocketInputStream.java:121)
     com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
     com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
     com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
     com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2549)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)
     com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2991)
     com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3532)
     com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
     com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
     com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
     com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1557)
     com.mysql.jdbc.DatabaseMetaData$9.forEach(DatabaseMetaData.java:4984)
     com.mysql.jdbc.IterateBlock.doForAll(IterateBlock.java:51)
     com.mysql.jdbc.DatabaseMetaData.getTables(DatabaseMetaData.java:4962)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnectionNoQuery(DefaultConnectionTester.java:185)
     com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:62)
     com.mchange.v2.c3p0.AbstractConnectionTester.activeCheckConnection(AbstractConnectionTester.java:67)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:368)
     com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
     com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
     com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) 
```

**- -更新 - -**

当我将 p:statementCacheNumDeferredCloseThreads="1" 添加到 datasouce bean 时，出现以下错误

```
 Error creating bean with name 'sqlSessionFactory' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: 
     Cannot resolve reference to bean 'datasource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'datasource' defined in ServletContext resource [/WEB-INF/spring-servlet.xml]: 
   Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'statementCacheNumDeferredCloseThreads' of bean class [com.mchange.v2.c3p0.ComboPooledDataSource]: 
   Bean property 'statementCacheNumDeferredCloseThreads' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-16T16:26:43.883

来自[http://www.mchange.com/projects/c3p0/#other_ds_configuration](http://www.mchange.com/projects/c3p0/#other_ds_configuration)

**numHelperThreads**和**maxAdministrativeTaskTime**有助于配置 DataSource 线程池的行为。默认情况下，每个 DataSource 只有三个关联的帮助线程。如果性能似乎在重负载下拖累，或者如果您通过 JMX 或直接检查 PooledDataSource 观察到“待处理任务”的数量通常大于零，请尝试增加 numHelperThreads。**maxAdministrativeTaskTime**对于遇到无限期挂起的任务和“APPARENT DEADLOCK”消息的用户可能很有用。（更多信息请参见附录 A。）

**maxAdministrativeTaskTime** 默认值：0 秒之前 c3p0 的线程池将尝试中断一个明显挂起的任务。很少有用。c3p0 的许多功能不是由客户端线程执行的，而是由内部线程池异步执行的。c3p0 的异步性直接增强了客户端性能，并通过确保在非锁持有线程中执行慢速 jdbc 操作来最小化持有关键锁的时间长度。但是，如果其中一些任务“挂起”，即它们在很长一段时间内既没有成功也没有失败并出现异常，c3p0 的线程池可能会耗尽并且管理任务会被备份。如果任务只是很慢，解决问题的最佳方法是增加线程数，通过**numHelperThreads**. 但是如果任务有时会无限期挂起，您可以使用此参数在任务超过设定的时间限制时强制调用任务线程的 interrupt() 方法。[c3p0 最终将通过发出“明显的死锁”信号（您将在日志中将其视为警告）、替换线程池任务线程和中断（）原始线程来从挂起的任务中恢复。但是让池进入表观死锁然后恢复意味着在某些时期内，c3p0 的性能会受到损害。因此，如果您看到这些消息，**增加 numHelperThreads 并设置 maxAdministrativeTaskTime 可能会有所帮助**. maxAdministrativeTaskTime 应该足够大，以使任何从数据库获取连接、测试连接或两次破坏连接的合理尝试都可以预期在设定的时间内成功或失败。零（默认）意味着任务从不中断，这是大多数情况下最好和最安全的策略。如果任务很慢，请分配更多线程。如果任务永远挂起，请尝试找出原因，同时设置 maxAdministrativeTaskTime 可能会有所帮助。

```
The default is 3 for numHelperThreads , increase this to 8-10 

setting maxAdministrativeTaskTime will help 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-12T10:04:32.533

请查看解决问题的后续步骤：

1.  增加`p:maxStatements`ComboPooledDataSource。

2.  设置`p:maxStatements`为 0。例如，在 Firebird 中，此 hack 可用于 ComboPooledDataSource。

3.  确保在应用程序中关闭[SqlSession 。](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.ibatis/ibatis-sqlmap/3.0-beta-3/org/apache/ibatis/session/SqlSession.java#SqlSession)更加注意集中执行数据库操作。在我的 mySql JDBC 驱动程序版本中：当对象被垃圾收集时， [mysql-connector-java 5.1.8](http://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.8)连接会自动关闭。因此，如果您不大量使用数据库，则在您的情况下连接不应该泄漏。尽管如此，您必须确保您关闭了 myBatis SqlSession，它包装了与 DB 的 jdbc 连接。

4.  同样相应[的 JDBC3 连接和语句池](http://www.mchange.com/projects/c3p0/#configuring_statement_pooling)，您可以尝试在 c3p0 配置中将*statementCacheNumDeferredCloseThreads*设置为**1**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-24T02:18:48.070

在我的情况下，应用程序的内存太少是原因。使用的数据库是 H2 或 SQLite（都在这个应用程序中使用）。

第一个症状是上面报告的这些 WARN 日志行：

```
12006925 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|33af2d37]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@6d3a9c65 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12016284 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|3d98d1b]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@44565f94 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12051847 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|5703a6aa]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@c9f37e2 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12085128 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|4e50d42b]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@6f1927b7 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12085128 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|78fa7f84]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@22c22b50 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
12172644 [C3P0PooledConnectionPoolManager[identityToken->2rvy8f9szmpczp1k2dm1g|e8e88fa]-AdminTaskTimer] WARN  com.mchange.v2.async.ThreadPoolAsynchronousRunner  - com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@745a644f -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks! 
```

很长一段时间后出现异常，包括揭示：

```
Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

问题是可重现的。为应用程序提供更多内存（-Xmx8G）修复了它。

# sql - sql查询中需要范围的计数

> ID：14730380
> 
> 赞同：5
> 
> 时间：2013-02-06T13:33:02.113
> 
> 标签：sql, sql-server, tsql

我在 [http://sqlfiddle.com/#!3/8e018/1有一个问题的详细信息](http://sqlfiddle.com/#!3/8e018/1)

我有一张成员表，上面有所有学生的分数。我正在尝试计算所有学生的数量，例如

**0-9 = 学生人数 9** ,

**10 -19 = 学生人数 0** 以此类推，最多 100。

另外，如果有人能指出一个关于**案例陈述**的好教程，那就太好了

**给出的答案很好。但我的范围是固定的。如果没有申请人，我也必须显示 0** 这是我的问题的主要区别。就像我也展示了这个类别。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T13:39:08.777

你不需要`CASE`声明。您可以按整数除法的结果进行分组。

```
SELECT 10 * ( marks / 10 )     AS start_range,
       10 * ( marks / 10 ) + 9 AS end_range,
       count(*)                AS COUNT
FROM   testTable
GROUP  BY marks / 10 
```

这将分组

```
0  -  9
10 - 19
/* ...*/
90 - 99
100 - 109 
```

如果您不想`100`自己处于一个范围内（作为结束范围内唯一可能的值），您需要更清楚地定义需求。

要包括您可以使用的**所有范围**

```
SELECT CAST(10 * ( G.Grp ) AS VARCHAR(3)) + '-' 
                          + CAST(10 * ( G.Grp ) + 9 AS VARCHAR(3)) AS range,
       count(T.id)                                                 AS Count
FROM   (VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10)) G(Grp)
       LEFT JOIN [dbo].[testTable] T
         ON G.Grp = T.marks / 10
GROUP  BY G.Grp 
```

[SQL小提琴](http://sqlfiddle.com/#!3/8e018/58)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T13:45:56.610

尝试[类似](http://sqlfiddle.com/#!3/8e018/59)：

```
SELECT CASE
        WHEN marks IS NULL THEN 'Unknown'
        WHEN marks <= 9 THEN '0-9'
        WHEN marks <= 19 THEN '10-19'
        WHEN marks <= 29 THEN '20-29'
        WHEN marks <= 39 THEN '30-39'
        WHEN marks <= 49 THEN '40-49'
        WHEN marks <= 59 THEN '50-59'
        WHEN marks <= 69 THEN '60-69'
        WHEN marks <= 79 THEN '70-79'
        WHEN marks <= 89 THEN '80-89'
        WHEN marks <= 100 THEN '90-100'
        ELSE 'Over 100'
    END "Bucket",
    COUNT(*) "Number of results"
FROM
    testTable
GROUP BY CASE
        WHEN marks IS NULL THEN 'Unknown'
        WHEN marks <= 9 THEN '0-9'
        WHEN marks <= 19 THEN '10-19'
        WHEN marks <= 29 THEN '20-29'
        WHEN marks <= 39 THEN '30-39'
        WHEN marks <= 49 THEN '40-49'
        WHEN marks <= 59 THEN '50-59'
        WHEN marks <= 69 THEN '60-69'
        WHEN marks <= 79 THEN '70-79'
        WHEN marks <= 89 THEN '80-89'
        WHEN marks <= 100 THEN '90-100'
        ELSE 'Over 100'
    END
ORDER BY
    MIN(marks); 
```

为了解释`CASE`这里的语句（尽我所能，更好的人可能会编辑），我总是喜欢输入一个 NULL 选项，因为它有时会在您的查询中捕获错误。其余的`WHEN`陈述应该是不言自明的，您可以使用它们来满足您的需要。名称“Bucket”正是您的列将在最终输出中调用的名称，因此您可以再次根据需要更改它。第二列必须是聚合查询，例如`COUNT`为了使`CASE`语句有意义。

您必须在声明中重复该`CASE`声明，但您的姓名除外`GROUP BY`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T13:58:14.177

如果您还需要空范围（我假设）试试这个：

```
;WITH Ranges
AS
(
  SELECT 0 n
  UNION ALL
  SELECT n + 1 FROM Ranges
  WHERE n < 9
)
SELECT CAST((n*10) as VARCHAR) + ' - ' + CAST((n*10 + 9) as VARCHAR) [Range], COUNT(marks) Cnt FROM Ranges
  LEFT JOIN [testTable] T
    ON marks >= (n*10) AND marks <= (n*10 + 9)
GROUP BY n*10, n*10 + 9 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/8e018/57)**

# python - 鸭子打字以允许元组、列表或可以被视为一个的东西

> ID：14730383
> 
> 赞同：4
> 
> 时间：2013-02-06T13:33:10.273
> 
> 标签：python, duck-typing

```
def foo(spam, obj_of_interest):
"""Pass a _____ and an object of interest, and return [something that does something worthwhile] """
    name = spam[0]
    quest = spam[1]
    fav_color = spam[2]
    # ... interesting code
    return obj_of_interest 
```

您会注意到，`foo()`无论它是`spam`作为列表、元组还是真正作为对元素强制执行顺序并且可以像列表一样处理的任何东西，它都可以完美地运行。

您如何在不告诉用户使用特定类型的情况下记录这一事实？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T13:35:18.433

你说，

```
"""spam is an object that supports indexing.""" 
```

# java - 如何使用 Java 邮件 API 保存已发送邮件？

> ID：14730384
> 
> 赞同：1
> 
> 时间：2013-02-06T13:33:11.347
> 
> 标签：java

如何使用 Javamail API 在邮件中保存已发送的项目？

```
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");

Session session = Session.getInstance(props,new javax.mail.Authenticator() {
    protected PasswordAuthenticationgetPasswordAuthentication() {
        return new PasswordAuthentication("user id","pwd");
    }
});

Message message = new MimeMessage(session);
message.setHeader("X-Priority","1");
message.setFrom(new InternetAddress("user id"));
message.setRecipients(Message.RecipientType.TO,InternetAddress.parse(Toaddress));

message.addRecipients(Message.RecipientType.CC,InternetAddress.parse(cc));
message.setSubject("Subject");
Multipart multipart = new MimeMultipart();
BodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setText("test mail");
Transport.send(message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T21:15:32.987

使用 Gmail，您无需将其保存在已发送的文件夹中，Gmail 会自动为您执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-07T07:33:42.507

这是解决方案

```
/*
 *  This is the code for read the sent mails from your mail account.
 *  Requirements:
 *      JDK 1.5 and above
 *      Jar:mail.jar
 *
 */

import java.io.*;
import java.util.*;
import javax.mail.*;
import javax.mail.Flags.Flag;
import javax.mail.search.FlagTerm;

public class ReadSentMail
{
 Folder sent;

 //Constructor of the class.
 public ReadSentMail()
 {
 /*  Set the mail properties  */
 Properties props = System.getProperties();
 props.setProperty("mail.store.protocol", "imaps");
 try
 {
 /*  Create the session and get the store for read the mail. */
 Session session = Session.getDefaultInstance(props, null);
 Store store = session.getStore("imaps");
 store.connect("imap.gmail.com","<email-id>", "<password>");

 /*  Mention the folder name which you want to read. */
 sent = store.getFolder("[Gmail]/Sent Mail");
 System.out.println("No of Sent Messages : " +sent.getMessageCount());

 /*Open the inbox using store.*/
 sent.open(Folder.READ_ONLY);

 /*  Get the messages which is unread in the Sent Mails*/
 Message messages[] = sent.search(new FlagTerm(new Flags(Flag.SEEN), true));

 /* Use a suitable FetchProfile    */
 FetchProfile fp = new FetchProfile();
 fp.add(FetchProfile.Item.ENVELOPE);
 fp.add(FetchProfile.Item.CONTENT_INFO);
 sent.fetch(messages, fp);

 try
 {
 printAllMessages(messages);
 sent.close(true);
 store.close();
 }
 catch (Exception ex)
 {
 System.out.println("Exception arise at the time of read mail");
 ex.printStackTrace();
 }
 }
 catch (NoSuchProviderException e)
 {
 e.printStackTrace();
 System.exit(1);
 }
 catch (MessagingException e)
 {
 e.printStackTrace();
 System.exit(2);
 }
 }

 public void printAllMessages(Message[] msgs) throws Exception
 {
 for (int i = msgs.length-1; i > 0; i--)
 {
 System.out.println("MESSAGE #" + (i + 1) + ":");
 printEnvelope(msgs[i]);
 }
 }

 /*  Print the envelope(FromAddress,ReceivedDate,Subject)  */
 public void printEnvelope(Message message) throws Exception
 {
 Address[] a;
 // FROM
 if ((a = message.getFrom()) != null)
 {
 for (int j = 0; j < a.length; j++)
 {
 System.out.println("FROM: " + a[j].toString());
 }
 }
 // TO
 if ((a = message.getRecipients(Message.RecipientType.TO)) != null)
 {
 for (int j = 0; j < a.length; j++)
 {
 System.out.println("TO: " + a[j].toString());
 }
 }
 String subject = message.getSubject();
 Date receivedDate = message.getReceivedDate();
 String content = message.getContent().toString();
 System.out.println("Subject : " + subject);
 System.out.println("Received Date : " + receivedDate.toString());
 System.out.println("Content : " + content);
 getContent(message);
 }

 public void getContent(Message msg)
 {
 try
 {
 String contentType = msg.getContentType();
 System.out.println("Content Type : " + contentType);
 Multipart mp = (Multipart) msg.getContent();
 int count = mp.getCount();
 for (int i = 0; i < count; i++)
 {
     readMessageToFile(mp.getBodyPart(i));
 }
 }
 catch (Exception ex)
 {
 System.out.println("Exception arise at get Content");
 ex.printStackTrace();
 }
 }

 public void readMessageToFile(Part p) throws Exception
 {
 // Dump input stream ..
 InputStream is = p.getInputStream();
 // If "is" is not already buffered, wrap a BufferedInputStream
 // around it.
 if (!(is instanceof BufferedInputStream))
 {
 is = new BufferedInputStream(is);
 }
 int c;
 System.out.println("Message : ");
 while ((c = is.read()) != -1)
 {
 System.out.write(c);
 }
 }

 public static void main(String args[])
 {
 new ReadSentMail();
 } 
```

# android - android facebook sdk 3.0 设置电子邮件权限？

> ID：14730388
> 
> 赞同：1
> 
> 时间：2013-02-06T13:33:21.667
> 
> 标签：android, facebook, facebook-graph-api

我需要用户电子邮件地址，我想在 facebook sdk 中设置电子邮件权限。

你能给我一些想法吗？

我的代码：

```
 @Deprecated
    public void authorize(Activity activity, String[] permissions, final DialogListener listener) {
        permissions =new String[] {"offline_access","video_upload","publish_stream","user_photos","email","read_friendlists"};      
        authorize(activity, permissions, DEFAULT_AUTH_ACTIVITY_CODE, SessionLoginBehavior.SSO_WITH_FALLBACK, listener);
    } 
```

我是这样做的。这是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:35:23.187

试试这个：

```
you set the permission like 
String[] Permissions = {"email", "offline_access"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:57:26.357

更改您的授权代码，如下所示：

```
 public void authorize(Activity activity, String[] permissions,
        int activityCode, final DialogListener listener) {

    boolean singleSignOnStarted = false;

    mAuthDialogListener = listener;

    // Prefer single sign-on, where available.
    if (activityCode >= 0) {
        singleSignOnStarted = startSingleSignOn(activity, mAppId,
                permissions, activityCode);
    }
    // Otherwise fall back to traditional dialog.
    if (!singleSignOnStarted) {
        startDialogAuth(activity, permissions);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T10:43:34.957

我已经检查了这个问题，这很简单。这是您想要的代码：

```
Session currentSession = Session.getActiveSession();
    if (currentSession == null || currentSession.getState().isClosed()) {
        Session session = new Session.Builder(context).build();
        Session.setActiveSession(session);
        currentSession = session;
    }

    if (currentSession.isOpened()) {
        // Do whatever u want. User has logged in

    } else if (!currentSession.isOpened()) {
        // Ask for username and password
        OpenRequest op = new Session.OpenRequest((Activity) context);

        op.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO);
        op.setCallback(null);

        List<String> permissions = new ArrayList<String>();
        permissions.add("publish_stream");
        permissions.add("user_likes");
        permissions.add("email");
        permissions.add("user_birthday");
        op.setPermissions(permissions);

        Session session = new Builder(MainActivity.this).build();
        Session.setActiveSession(session);
        session.openForPublish(op);
    } 
```

现在，`onActivityResult`看看会话是否打开并在那里做你的工作，比如获取 userID、access_token 等等。

希望这会对您有所帮助。

# c - 如何使用 C++ 从启动列表中删除程序

> ID：14730389
> 
> 赞同：0
> 
> 时间：2013-02-06T13:33:28.477
> 
> 标签：c, windows

我试图从启动列表中删除应用程序但没有成功，错误代码为零，所以需要帮助我的功能代码是

```
string appName="someapp";
REGSAM flag = KEY_WOW64_64KEY; 
HKEY hkey = HKEY_LOCAL_MACHINE;
RegOpenKeyEx(HKEY_LOCAL_MACHINE,TEXT("SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Run"),NULL, KEY_READ | KEY_WRITE | flag,&hkey);
RegDeleteValue(hkey,appName.c_str());
cout<<"\n error code is "<<GetLastError();
RegCloseKey(hkey); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:54:55.607

您必须使用 Windows API 函数删除注册密钥，请参阅[注册函数参考](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724880%28v=vs.85%29.aspx)，尤其是[RegDeleteKeyEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724847%28v=vs.85%29.aspx)。在这种情况下，密钥应位于 HKEY_LOCAL_MACHINE 之下，然后是 SOFTWARE\Microsoft\Windows\CurrentVersion\Run。要检查它们的密钥是否存在，请使用 RegOpenKeyEx。

# jquery - jquery自动浏览加载所有图像

> ID：14730399
> 
> 赞同：2
> 
> 时间：2013-02-06T13:34:08.490
> 
> 标签：jquery

我正在尝试使用 jquery.esn.autobrowse.js 插件进行无限滚动，但遇到了问题。该插件一次加载所有图像。问题似乎是javascript通过更新偏移量而不滚动页面来连续调用url。下面是 HTML 和 PHP 脚本。在此先感谢您的帮助。

**GalleryPage.html**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/jquery.esn.autobrowse.js"></script>
<script type="text/javascript" src="js/jquery.json-2.2.min.js"></script>
<script type="text/javascript" src="js/jstorage.js"></script>
</head>
<body>
 <div id="content">
<div id='gallery'></div>
 <script type="text/javascript">
 $(function () {
        $('#gallery').autobrowse(
            {
                url: function (offset)
                {
                return "getGallery.php?album_id=1&page="
                +Math.round(offset/20);
                },

                template: function (response)
                {
                    var markup='';
                    for (var i=0; i<response.items.length; i++)
                    {
                        markup+='<a href="'+response.items[i].photoID+'"><img src="'+response.items[i].Image+'" /></a>';
                    };
                    return markup;
                },
                itemsReturned: function (response) { return response.items.length; },
                offset: 0,
                max: 10000,
                loader: '<div class="loader"></div>',
                useCache: false,
                expiration: 1

            }
        );
 });
</script>
</div>
</body>
</html> 
```

**获取画廊.php**

```
<?php

$count=20;
$offset=0;
if (isset($_GET['count'])) $count=$_GET['count']*1;
if (isset($_GET['page']))  $offset=$_GET['page']*$count*1;
$album_id=$_GET['album_id'];
$arr = array();
$sql="SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = $album_id and published=1 ORDER BY orderId LIMIT $offset,$count";
//logToFile('Sql....'.$sql);
$rs = mysql_query($sql);

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}

 echo '{"items":'.json_encode($arr).'}';

?> 
```

如果我打开 logtoFile 并查看记录到文件的内容...我看到在初始页面加载时正在执行的所有多个 sql 如下所示。

```
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 0,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 20,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 40,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 60,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 80,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 100,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 120,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 140,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 160,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 180,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 200,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 220,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 240,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 260,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 260,20
Sql....SELECT photo_id as photoID,thumbnail_location as Image FROM photos WHERE album_id = 1 and published=1 ORDER BY orderId LIMIT 280,20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-30T06:53:51.427

您可以通过以下方式解决它：

```
+Math.ceil(offset/20) 
```

代替

```
+Math.round(offset/20) 
```

# php - 将表单字段名称传递给类实例的绑定参数

> ID：14730402
> 
> 赞同：0
> 
> 时间：2013-02-06T13:34:25.750
> 
> 标签：php, reflection, binding, prepared-statement

我正在使用工厂（类）来呈现来自目标数据库表的表单 - 正如在类实例中定义的那样。然后在提交时，创建该类的新实例，然后将新记录插入数据库。$_POST 键名与表列名匹配。

我的问题是在类实例中确定变量时动态分配绑定参数。无论我使用反射方法还是内联，我都会得到以下信息。

```
 Warning: mysqli_stmt::bind_param() [mysqli-stmt.bind-param]: Number of elements in type definition string doesn't match number of bind variables 
```

在构建后数组并分配给类属性 $array 后，在子类中调用以下方法。

```
 private function addrecord($array,$tbl,$_conn){

   //define field name array for query statement
   foreach ($array as $key=>$value){
   $keyarr[]=$key;
   }

//BUILD THE QUERY STATEMENT
$query = "INSERT INTO $tbl SET ";
  foreach ($keyarr as $key){
    $query .= ($key."=?, ");    //clone and add next element
  }
$query = rtrim($query,", ");    //remove EOL whitespace and comma
//done

 /*
//Hard code bind parameters works as expected
if (self::$_conn = new mysqli(DB_HOST,DB_UNAME,DB_UPWORD,DB_NAME)){
$stmt=self::$_conn->prepare($query);
   $stmt->bind_param("sssss",$array['user_id'],$array['user_name'],$array['user_email'],$array['user_date'],$array['user_active']);
$stmt->execute();
$insertid=$stmt->insert_id;
$stmt->close();
echo "The record was created with id ".$insertid;
}
 */

  //Tried re assigning post array as reference
  //same error as just passing $array
  //$array = $this->refValues($array);

 //Binding params using Reflections, same error 
 self::$_conn = new mysqli(DB_HOST,DB_UNAME,DB_UPWORD,DB_NAME);
 $stmt   = self::$_conn->prepare($query);
 $ref    = new ReflectionClass('mysqli_stmt');
 $method = $ref->getMethod("bind_param");
 $method->invokeArgs($stmt,$array);
 $stmt->execute();
 $stmt->close();
 self::$_conn->close();
 }

//Pass By Reference required for PHP 5.3+, dev server 5.3.17
function refValues($arr){
   if (strnatcmp(phpversion(),'5.3') >= 0){
   $refar = array();
    foreach($arr as $key => $value)
      $refar[$key] = &$arr[$key];
      return $refar;
    }
   return $arr; 
```

}

在此先感谢并非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:19:14.390

如您所见，mysqli 实际上无法用于准备好的语句。
因此，我建议您使用 PDO，或者更好的是，一些智能库可以在没有准备好的语句的情况下进行安全查询。
有了这样一个库，您的函数将写在一行中

```
private function addrecord($array,$tbl){
    $this->conn->query("INSERT INTO ?n SET ?u", $tbl, $array);
} 
```

请注意，如果 $array 来自不受信任的来源，您必须先过滤掉它的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:19:38.037

根据常识，将流程更改为 PDO。按预期工作。应该早点做。唯一剩下的问题是 UI 反馈。想要返回一个插入 id，但是 MySQL 不返回 PDO 的最后一个插入 id。再一次，班级事先不知道表格结构，所以硬编码不是一种选择。需要一个解决方法。有什么想法吗？下面是使用 PDO 的新插入过程。

```
 try{
   self::$_conn = new PDO('mysql:host='.DB_HOST.';dbname='.DB_NAME.'', DB_UNAME, DB_UPWORD);
   $stmt = self::$_conn->prepare($query);

   $arcount=count($array);  //set number of bindParam loops
     foreach($array as $key=>$value){
   $stmtarr[]=$value;   //convert assoc to numerated array
}
 //re index array so increment will match up with placeholder position
 $stmtarr = array_combine(range(1, count($stmtarr)), array_values($stmtarr));

 for($i=1;$i<=$arcount;$i++){ //bind variable, one for each placeholder, 
$stmt->bindParam($i,$stmtarr[$i]);
 }
 $stmt->execute();

 } catch (PDOException $e){
print "Error: ".$e->getMessage()."<br>";
die();
 } 
```

假设其他一切都与上述相同。

# javascript - 输入更改时Jquery自动保存

> ID：14730404
> 
> 赞同：0
> 
> 时间：2013-02-06T13:34:34.403
> 
> 标签：javascript, jquery, autosave

在我的 CMS (Wordpress) 系统中，我将使用颜色选择器。

```
<tr valign="top">  
  <th scope="row"><?php esc_html_e('Omlijning', 'webthesign'); ?></th> 
  <td valign="middle">
    <input type="text" id="headerBorderColor1" style="background-color: #<?php echo get_option('we_header_border_color'); ?>" maxlength="6" size="8" value="<?php echo strtoupper(get_option('we_header_border_color')); ?>" name="update_headerBorderColor" />
  </td>
</tr>                          

<script>
 $(document).ready(function(){

   $('input[name=update_headerBorderColor]').change(function () { 

     var statusVal = $(this).val();
     $.ajax({ type: "POST",
              url: "<?php echo $autosave_link; ?>",
              data: "update_headerBorderColor=" + statusVal,
              success: function({

                $('.success_update_headerBorderColor').fadeIn(200).delay(1000).fadeOut(500);} 

            })
    });
  });
</script 
```

在脚本代码中，我将使用自动保存选项。当我点击输入字段时，我会得到一个带有颜色选择器的弹出窗口。问题是我需要什么功能来自动保存这个脚本。当我使用：

```
$('input[name=update_headerBorderColor]').change(function () { 
```

更改功能不适用于颜色选择器，因为我没有输入。当我手动更改输入（例如 FFF）时，更改功能运行良好。

有人帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:39:35.197

您必须在颜色选择器上使用回调，将所选颜色设置回文本字段。将此函数作为回调的一部分调用，它应该可以解决问题。

# android - java.lang.RuntimeException：相机 API 中的 setParameters 失败

> ID：14730408
> 
> 赞同：6
> 
> 时间：2013-02-06T13:34:51.597
> 
> 标签：android, camera

我正在开发相机过度应用程序，因为我正在使用相机 api 进行预览和叠加效果。我在某些手机中遇到强​​制关闭错误，而其他手机没有发生。

我的代码：

```
parameters = camera.getParameters(); 
List<Size> sizes = parameters.getSupportedPreviewSizes(); 
Size optimalSize = getOptimalPreviewSize(sizes, w, h); 
parameters.setPreviewSize(optimalSize.width, optimalSize.height);
parameters.setColorEffect(Camera.Parameters.EFFECT_SOLARIZE);
setCameraDisplayOrientation(MainActivity.this,0, camera); 
camera.getParameters(); 
camera.setParameters(parameters); 
```

这些是我得到的调用堆栈

```
 java.lang.RuntimeException: setParameters failed
    at android.hardware.Camera.native_setParameters(Native Method)
    at android.hardware.Camera.setParameters(Camera.java:1046)
    at com.androidpixels.watercamera.MainActivity.surfaceChanged(MainActivity.java:1241)
    at android.view.SurfaceView.updateWindow(SurfaceView.java:575)
    at android.view.SurfaceView.updateWindow(SurfaceView.java:407)
    at android.view.SurfaceView.dispatchDraw(SurfaceView.java:352)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
    at android.view.View.draw(View.java:6936)
    at android.widget.FrameLayout.draw(FrameLayout.java:357)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1917)
    at android.view.ViewRoot.draw(ViewRoot.java:1530)
    at android.view.ViewRoot.performTraversals(ViewRoot.java:1266)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3693)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
    at dalvik.system.NativeStart.main(Native Method) 
```

请帮我。可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T13:45:26.633

**Android 相机参数**因设备而异。您需要在设置之前验证设备是否支持您尝试设置的参数，请参阅此[Camera SetParameters Doc](http://developer.android.com/reference/android/hardware/Camera.html#setParameters%28android.hardware.Camera.Parameters%29)

您可以通过以下方式查询*支持的参数*：

*   获取参数对象：`Camera.Parameters params = mCamera.getParameters();`
*   然后查询该对象的特定 Parameter ，例如 PreviewSize：

    params.getSupportedPreviewSizes ()

# c - 查找数组之间的共同元素（匹配元素）

> ID：14730409
> 
> 赞同：0
> 
> 时间：2013-02-06T13:34:52.860
> 
> 标签：c, arrays

考虑我是否有一个输入，其中作为输入的数组数量不固定，每个数组中的元素数量也不固定。所以每次我的输入不同时，

```
 Example 1: 1st input

 1st array= [2,3,4]
 2nd array =[6,7,8,9]
 3rd array=[5,3,12]

 Example 2: 2nd input

 1st array= [6,3,4,8]
 2nd array =[6,7,4,9]
 3rd array=[1,2,12]
 4th array= [20,21,22,23,25] 
```

所需的解决方案是，第一个数组被视为参考数组，下一组数组将针对第一个数组（参考）进行检查，要求第二个数组不应与第一个数组有共同元素，并且它继续进行下一次检查，第三个数组不应该与第一个数组有共同的元素。

```
 from 1st Example 

 1st array= [2,3,4] -- reference array
 1st array= [2,3,4] is compared to 2nd array =[6,7,8,9] 
 1st array= [2,3,4] is compared to  3rd array=[5,3,12]

 solution needed:
 + print 1st array( reference array)
 + if no common elements found between 1st array and 2nd array, from ex. no common elements found, so print out the 2nd array.
 + same for 3rd array, from ex. there is common element(3 is present in both first and third array), so dont print. 
```

我已经尝试过将输入存储在二维数组中，但我搞砸了。请指导我使用您的算法/代码进行计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:03:30.743

由于问题指出数组的长度不是常数，因此静态二维数组的想法可能行不通。您可以使用 DMA（malloc 和 calloc 函数）创建二维数组

您可以更喜欢直接的算法，将参考数组中的每个元素与其他数组进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:37:05.663

请注意我如何必须创建一个数组来包含各种数组的长度，以及一个参数来说明该数组的长度。

```
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>

void print_array(int *a, int size) {
    int i;
    for (i = 0; i<size; i++) {
        printf("%d ", a[i]);
    }

    printf("\n");
}

bool is_in(int *a, int size, int elem) {
    int i;
    for (i=0; i<size; i++) {
        if (a[i] == elem) {
            return true;
        }
    }
    return false;
}

void f(int **a, int a_siz, int* sizes) {
    print_array(a[0],sizes[0]);

    for (int i=1; i< a_siz; i++) {
        bool common_element = false;

        for (int k=0; k< sizes[i]; k++) {
            if (is_in(a[0],sizes[0],a[i][k])) {
                common_element = true;
                break;
            }
        }

        if (! common_element) {
            print_array(a[i],sizes[i]);
        }
    }

}

int main() {
    int s = 3;
    int sizes[] = {3,4,3};
    int **a = malloc(sizeof(int*)*3);
    for (int i=0; i<s; i++) {
        a[i] = malloc(sizeof(int*)*sizes[i]);
    }

    a[0][0] = 2;
    a[0][1] = 3;
    a[0][2] = 4;

    a[1][0] = 4;
    a[1][1] = 7;
    a[1][2] = 8;
    a[1][3] = 9;

    a[2][0] = 5;
    a[2][1] = 44;
    a[2][2] = 12;

    f(a,s,&sizes);
} 
```

# c++ - 如何拦截我启动的 Internet Explorer 实例执行的 http 请求？

> ID：14730411
> 
> 赞同：1
> 
> 时间：2013-02-06T13:34:54.440
> 
> 标签：c++, internet-explorer, winapi

我的 C++ 程序启动 Internet Explorer（它适用于 IE6 到 IE10）以在 Internet 上显示一些网页；我没有办法修改网页。该网页引用了一个 JavaScript 文件（使用`<script>`HTML 标记中的一个标签）——一个[swfobject](https://github.com/swfobject/swfobject) JavaScript 库的副本。我希望网页使用我提供的此文件的自定义副本。

我想出了两种可能的方法来解决这个问题

1.  编写 Internet Explorer 连接的代理服务器；代理获取实际数据，然后重写 HTML，以便引用我自己的 swfobject 副本。不幸的是，这是一项相当多的工作，并且可能不适用于 https。我现在可以在不支持 https 的情况下生活。

2.  为 Internet Explorer实现一个[异步协议插件](http://msdn.microsoft.com/en-us/library/aa767916%28v=vs.85%29.aspx)，拦截所有 http 请求。我知道 JavaScript 文件总是使用 http 检索，所以我可以拦截对 swfobject JavaScript 文件的访问并生成我自己的文件。唉，这似乎也是不可能的，[微软支持页面](http://support.microsoft.com/kb/303740/en-us)解释说

    > Internet Explorer 会忽略用 CLSID 以外的值覆盖 HKEY_CURRENT_ROOT\PROTOCOLS\Http 的幼稚尝试

    这听起来像用自定义协议处理程序挂钩“http”是行不通的；无论如何，如果存在现有的 http 协议处理程序，这种方法也会有问题。

有没有比这两种方法更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:39:51.270

根据您要求的复杂性，[Fiddler](http://www.fiddler2.com/)可能是自定义代理的有用替代方案，因为它可以自动重写请求和响应，并且可以快速编写您想要的脚本。

它也适用于 HTTPS，因此该部分是“免费的”。

> 想让 Fiddler 根据您指定的规则自动重写请求和响应、添加或删除标头或标记/忽略会话？查看 FiddlerScript 食谱

[这是食谱的链接](http://www.fiddler2.com/Fiddler/Dev/ScriptSamples.asp)

如果需要嵌入，也可以作为[FiddlerCore](http://fiddler.wikidot.com/fiddlercore)嵌入。

正如@MSalters 在下面指出的那样，Fiddler 的可选 SSL 拦截是您在使用它之前应该考虑的权衡。它被记录[在这里](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)，我已经写了一个简短的总结，说明它[在这个答案](https://stackoverflow.com/a/9473022/477878)中是如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:49:14.870

只要记下一个想法，就可以在您自己的进程中挂钩 WinSock send() 和 recv() 函数。这是一种中间人。这个解决方案具有高度复杂性的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T15:34:07.687

简单，只需[翻译 URL](http://msdn.microsoft.com/en-us/library/aa753267%28v=vs.85%29.aspx)即可。`swfobject`将URL更改为`file://`URL，指向您的副本。

（您实际上并没有启动 IExplorer.EXE，对吗？这不是您应该打开网页的方式。您可以使用 启动 URL `ShellExecute`，将浏览器选择权留给用户，或者将 IE 的核心 MSHTML 嵌入到您的自己的应用程序。Internet Explorer 不是 Windows 的一部分，并且可能不存在，例如在 Windows N 上。）

# java - 在 JBoss 7 中设置正确的信任库

> ID：14730421
> 
> 赞同：1
> 
> 时间：2013-02-06T13:35:37.143
> 
> 标签：java, jboss, truststore

我想从 JBoss 7 应用程序发送电子邮件。SMTP 服务器需要带有自签名证书的 TLS 连接。如果我尝试发送电子邮件，则会收到 SSLHandshakeException，因为无法检查服务器证书。为了解决这个问题，我添加了这个：[http](http://springinpractice.com/2012/04/29/fixing-pkix-path-building-issues-when-using-javamail-and-smtp/) ://springinpractice.com/2012/04/29/fixing-pkix-path-building-issues-when-using-javamail-and-smtp/ （将 SMTP 服务器证书放入java 信任库文件）

我现在的问题是如何将信任库文件设置为 JBoss 7？

我在 stackoverflow 和其他论坛上知道这个问题有几个答案。但是我没有找到合适的。

我已经尝试过以下方法：

*   添加`JAVA_OPTS="$JAVA_OPTS -Djavax.net.ssl.trustStore=/home/stewert.c-on/data/projects/keystore/devel.truststore -Djavax.net.ssl.trustStorePassword=123456"`到：
    *   jboss-as-7.1.1.Final/bin/standalone.conf
    *   jboss-as-7.1.1.Final/bin/domain.conf
    *   jboss-as-7.1.1.Final/bin/appclient.conf
*   添加`<jsse keystore-password="123456" keystore-url="/home/stewert.c-on/data/projects/keystore/devel.keystore" truststore-password="123456" truststore-url="/home/stewert.c-on/data/projects/keystore/devel.truststore"/>`到 jboss-as-7.1.1.Final/standalone/configuration/standalone.xml

但是，如果我在运行时使用'System.getProperty（“javax.net.ssl.trustStore”）'检查系统环境变量，我在每种情况下都会得到null！

我的环境：

*   Linux
*   JBoss 7.1
*   JDK 7
*   我在 eclipse Juno 中启动 JBoss

有人知道出了什么问题吗？我必须在哪里设置信任库？

谢谢，史蒂芬

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:14:59.163

JBoss 论坛上有人问“ [javax.net.ssl.trustStore - only way to specify client trust?](https://community.jboss.org/message/749863) ”，答案基本是“是”。

他们的方法是将其设置在[`system-properties`](https://community.jboss.org/wiki/JBossAS7SystemProperties)服务器配置 XML 中的一个元素中，这对我来说似乎也是最好的方法。比在运行配置文件中摸索要好！

# java - JDBC 查询错误

> ID：14730422
> 
> 赞同：0
> 
> 时间：2013-02-06T13:35:38.753
> 
> 标签：java, eclipse, jdbc

我想保存 JDBC 的表列表以逐个计数，我为此编写了一个程序，但问题是当我执行此代码时它可以工作，但它直接进入异常。当我调试时，它说在线“SimpleDTO [] dtoLar =”“无法解决Runner”。这是什么意思？从下面的代码中可以看出，我之前将其标识为 QueryRunner。那么有没有可能解决不了呢？

```
QueryRunner Runner = new QueryRunner();

        SimpleDTO tableCount = null, currentTimeStr = null;

        SimpleDTO[] dtoLar = (SimpleDTO[]) Runner.query(connORA,
                SQL_SELECT_NAMES_OF_TABLES_RR, null, new BeanListHandler(
                        SimpleDTO.class)) 
```

这是我的 SimpeDTO 类，用于获取表列表中的行。

```
import java.io.Serializable;  

public class SimpleDTO implements Serializable{

String value = null;

public String getValue() {
    return value;
}

public void setValue(String value) {
    this.value = value;
}

} 
```

# java - Java 中的 BufferedReader 和 InputStreamReader

> ID：14730423
> 
> 赞同：6
> 
> 时间：2013-02-06T13:35:45.727
> 
> 标签：java, c++, c, string

我最近开始接触 Java，想了解一个大型应用程序的 Java 模块。我遇到了这行java代码：

```
String line = (new BufferedReader(new InputStreamReader(System.in))).readLine(); 
```

这个java代码是做什么的。是否有与此等效的 C/C++？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T13:40:56.333

`System.in`是标准输入。

`InputStreamReader`允许您关联从指定输入（在本例中为标准输入）读取的流，所以现在我们有一个流。

`BufferedReader`是帮助您使用流的“抽象”。例如，它实现`readLine`而不是逐个字符地读取，直到您找到一个 '\n' 来获取整行。它只是在这个过程之后返回一个字符串。

所以这一行的意思是：“从标准输入中读取一行并将其存储在`line`变量中”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T13:48:15.103

`> What does this java code do`：

`String line`是你的[字符串对象](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

`new BufferedReader().readLine()`是[BufferedReader](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html)的实例，用于从字符输入流中读取文本；并且[`readline()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine())是它实现读取直到换行符的方法。

`new InputStreamReader()`为您提供[InputStreamReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)的实例，它是字节流标准和所需字符流之间的“桥梁” `BufferedReader`。

`System.in`是标准输入（字节流）

* * *

`> Is there a C/C++ equivalent of this`
嗯...没有称为 C/C++ 的语言... ;)
所以我假设您想为它们中的每一个提供答案。

在 C 中，没有必须使用字符数组的“字符串”，但您可以使用以下命令将数据读入字符数组`stdin`：

```
char input[100];
...
scanf("%99[^\n]", input); 
```

或者

```
fgets (input, 100 , stdin) 
```

* * *

在 C++ 中，您将使用：

```
using namespace std;

string line;
getline(cin, line); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T13:41:53.867

您的代码段使用链接到 InputStreamReader 的 BufferedReader 从标准输入控制台读取一行并将其存储到 String line 。

**缓冲阅读器**

从字符输入流中读取文本，缓冲字符，以便高效读取字符、数组和行。可以指定缓冲区大小，也可以使用默认大小。对于大多数用途，默认值足够大。通常，由 Reader 发出的每个读取请求都会导致对底层字符或字节流发出相应的读取请求。因此，建议将 BufferedReader 包装在 read() 操作可能成本高昂的任何 Reader 周围，例如 FileReaders 和 InputStreamReaders。

**BufferedReader#readLine()**

阅读一行文字。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。

**输入流读取器**

InputStreamReader 是从字节流到字符流的桥梁：它读取字节并使用指定的字符集将它们解码为字符。它使用的字符集可以由名称指定，也可以显式给出，或者可以接受平台的默认字符集。InputStreamReader 的 read() 方法之一的每次调用都可能导致从底层字节输入流中读取一个或多个字节。为了实现字节到字符的有效转换，可以从底层流中预先读取比满足当前读取操作所需的更多的字节。

**系统**

System 类包含几个有用的类字段和方法。它不能被实例化。

System 类提供的设施包括标准输入、标准输出和错误输出流；访问外部定义的“属性”；一种加载文件和库的方法；以及一种用于快速复制数组的一部分的实用方法。

**系统输入**

“标准”输入流。该流已经打开并准备好提供输入数据。通常，此流对应于键盘输入或主机环境或用户指定的另一个输入源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T13:39:41.987

代码所做的只是简单地从输入流中读取一行。从模式的角度来看，这是一个装饰器。至于使用 BufferedReader 旨在提高 IO 性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-03T15:14:38.980

InputStreamReader 是从字节流到字符流的桥梁：它读取字节并使用指定的字符集将它们解码为字符。它使用的字符集可以由名称指定，也可以显式给出，或者可以接受平台的默认字符集。

InputStreamReader 的 read() 方法之一的每次调用都可能导致从底层字节输入流中读取一个或多个字节。为了实现字节到字符的有效转换，可以从底层流中预先读取比满足当前读取操作所需的更多的字节。

为了获得最高效率，我们考虑将 InputStreamReader 包装在 BufferedReader 中。例如：

BufferedReader in = new BufferedReader(new InputStreamReader(System.in));

# php - 欧拉计划：413

> ID：14730425
> 
> 赞同：0
> 
> 时间：2013-02-06T13:35:52.200
> 
> 标签：php, math

我正在尝试使用蛮力解决最新的 Project Euler 问题（我知道这不是最好的解决方案，但在我弄清楚我错在哪里之前，我会使用它）。

我不明白，我在这里到底做错了什么。我很确定我生成了正确的数字，但结果仍然与提供的数字错误：

```
function number_split( $nb )
{
    GLOBAL $arr;
    $length = strlen( $nb );
    if( $length == 1 )
        return true;

    $count = 0;
    for( $i=1; $i<$length; $i++ ) {
        for( $j=0; $j<=$length-$i; $j++ ) {
            $temp = substr( $nb, $j, $i );
            if( $temp % $length == 0 ) {
                $count++;   
                if( $count > 1 )
                    return false;
            }
        }
    }
    return ( $count == 1 );
}

$lim = 3;
$res = 0;
$start = gmp_strval( gmp_pow( 10, $lim-1 ) );
$end = gmp_strval( gmp_pow( 10, $lim ) );
for( $i=$start; $i<$end; $i++ ) {
    $res += number_split( $i );
}
echo $res; 
```

我在应该有 389 的地方得到 378。我在这里做错了什么？

我不想要答案，只是想知道我的逻辑哪里错了。

* * *

问题：

![在此处输入图像描述](../Images/c27fd3d4afd545a0314004700f4e253b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:02:27.310

您只查看 3 位数字，但您需要查看 10^3 以下的所有数字，其中包括 1 位和 2 位数字。换句话说，`$start`应该是`1`。

此外，您没有查看作为整个原始字符串的子字符串，因为`$i`（子字符串的长度）最多只能运行`$length - 1`.

# asp.net-mvc - MVC 捆绑和缓存问题

> ID：14730431
> 
> 赞同：4
> 
> 时间：2013-02-06T13:36:14.637
> 
> 标签：asp.net-mvc, caching, bundling-and-minification, asp.net-optimization

我将 System.Web.Optimization 与 MVC 4 应用程序一起使用，该应用程序托管在一些负载均衡器后面的场上。有一些客户端通过他们身边的缓存代理访问这个网络。我们无法控制他们的代理。

MVC 捆绑很聪明，因为它在捆绑脚本引用后面附加了一个 ?v={hash} url 参数，该参数对于捆绑中的文件是唯一的。因此，每当包中的文件更改时，哈希值也会更改，并且将再次请求该文件。

问题是：如果该散列与当前文件不匹配，我该如何阻止分发包？

通常的部署过程是：

*   将服务器 1 从负载平衡器中取出
*   更新服务器 1
*   在服务器 1 上测试东西
*   将服务器 1 放回场中
*   冲洗并与场中的所有其他服务器重复，一次一台

在最后一步有一个问题：假设服务器 1 和 2 已经更新，服务器 3 当前正在更新（并且不在场中），服务器 4 到 8 尚未更新。

现在有大约的机会。1/4，服务器 1 或 2 响应请求。它们都有新的脚本，因此它们在 bundle url 后面的哈希值与服务器 4-8 使用的哈希值不同。

然而，有大约的机会。3/4，针对此脚本的下一个请求具有更新的哈希值，将负载平衡到尚未更新的服务器之一。即使 url 参数中的哈希值与旧文件内容不匹配，捆绑包仍与旧内容一起交付。这对这个特定的客户不利。

在我们更糟糕的情况下，客户端的代理现在将旧脚本缓存在具有新哈希的新 url 下，这将导致这个问题也被传递到该缓存后面的所有其他客户端。

我如何告诉捆绑，以 404 的错误哈希回答请求，以便不会缓存错误的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:00:06.310

目前，哈希仅用于缓存客户端上的 bust。服务器完全忽略了这一点，只会提供捆绑包。

好消息是客户端无法缓存“错误”版本的包，因为我们使用包的实际内容计算包哈希。因此，如果您的服务器仍然具有文件的混合/陈旧版本，则哈希将在最终更新时发生变化。

不幸的是，鉴于您的服务器场处于不同的状态，因此对于如何避免这种情况，我没有一个好的解决方法。

# javascript - 性能问题

> ID：14730432
> 
> 赞同：0
> 
> 时间：2013-02-06T13:36:16.927
> 
> 标签：javascript, jquery, html, css

我有一个使用 CSS、Java Script、Jquery 和 Json 设计的应用程序（用于配置 Oven 的用户界面）。我的客户抱怨说，用户界面在任何浏览器或他们的模拟器上都可以在几毫秒内执行操作，但在实时设备中（即在烤箱中）则需要几秒钟才能完成。

申请详情：

• 此应用程序的功能非常有限，例如设置、服务等等。这也是基于触摸屏的应用程序。• 此应用程序是使用 HTML、CSS、Java Script、Jquery 技术和图像创建的。• IDE - NetBeans • 处理器 - Arm9 • RAM - 64 MB • 屏幕大小 - 480 * 800 • 设备操作系统 – Linux

我无法在此处生成代码，因为它非常大。

我可以做些什么来提高真实设备（即烤箱）的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:53:58.653

发生这种情况是因为当您使用开发接口时，数据是从本地机器访问的，相对较快，缓存也是一个很大的因素，我无法告诉您如何在不查看代码的情况下减少 json 响应时间，但您可以使用 minifiers 来减小 javascript、css 和 html 文件的大小

```
For Javascript- http://www.jsmini.com/
For HTML- http://www.willpeavy.com/minifier/
For CSS- https://csscompressor.net 
```

如果您想知道为什么要使用缩小器，那么我建议您阅读

```
http://engineeredweb.com/blog/why-minify-javascript/ 
```

# apache-flex - 在 Flex 4 中循环表单子项

> ID：14730433
> 
> 赞同：3
> 
> 时间：2013-02-06T13:36:25.313
> 
> 标签：apache-flex, flex4, flex4.5, flex-spark

我有一个看起来像这样的火花形式。我正在尝试遍历表单并将每个 DropDownList 的 id 推送到一个数组中。

我能够成功地找出表单项的 ID。但是我无法使用任何用于访问子项的方法来获取 DropDownList 的 ID，我使用的是 Flex 3。我是新的 Flex 4，经过一些阅读，我理解它是由于与 spark 架构相关的东西。

这是形式。

```
<s:Form id="facilities" x="51" y="32" width="595" height="402">

        <s:FormHeading label="SWOT ANALYSIS FORMAT FOR PLOT PURCHASE" fontSize="15">

        </s:FormHeading>

        <s:FormItem id = "petrolPumpsFormItem" required="true" width="464" label="Petrol Pumps:">
            <s:DropDownList id = "petrolPumps" width="220"  prompt="Select distance from the plot" labelField="distance" >
                <s:dataProvider>
                    <s:ArrayCollection>

                        <fx:Object distance="1-3 km"   mark="100"/>
                        <fx:Object distance="3-6 km"   mark="90"/>
                        <fx:Object distance="6-9 km"   mark="80"/>
                        <fx:Object distance="9-12 km"  mark="70"/>
                        <fx:Object distance="12-15 km" mark="60"/>
                        <fx:Object distance="15-18 km" mark="50"/>

                    </s:ArrayCollection>
                </s:dataProvider>
            </s:DropDownList>
        </s:FormItem>

        <s:FormItem id="filmTheatreFormItem" required="true" width="464" label="Film Theatre:">
            <s:DropDownList id="filmTheatre" width="220"  prompt="Select distance from the plot" labelField="distance" >
                <s:dataProvider>
                    <s:ArrayCollection>

                        <fx:Object distance="1-3 km"   mark="100"/>
                        <fx:Object distance="3-6 km"   mark="90"/>
                        <fx:Object distance="6-9 km"   mark="80"/>
                        <fx:Object distance="9-12 km"  mark="70"/>
                        <fx:Object distance="12-15 km" mark="60"/>
                        <fx:Object distance="15-18 km" mark="50"/>

                    </s:ArrayCollection>
                </s:dataProvider>
            </s:DropDownList>
        </s:FormItem>

        <s:FormItem id= "atmFormItem" required="true" width="464" label="ATM:">
            <s:DropDownList id= "atm" width="220"  prompt="Select distance from the plot" labelField="distance" >
                <s:dataProvider>
                    <s:ArrayCollection>

                        <fx:Object distance="1-3 km"   mark="100"/>
                        <fx:Object distance="3-6 km"   mark="90"/>
                        <fx:Object distance="6-9 km"   mark="80"/>
                        <fx:Object distance="9-12 km"  mark="70"/>
                        <fx:Object distance="12-15 km" mark="60"/>
                        <fx:Object distance="15-18 km" mark="50"/>

                    </s:ArrayCollection>
                </s:dataProvider>
            </s:DropDownList>
        </s:FormItem>

    </s:Form> 
```

我可以像这样访问表单项。“设施”是表格的名称。

```
for (var i:int = 0 ;i <= facilities.numElements-1;i++)
    {
    var item:IVisualElementContainer = facilities.getElementAt(i) as IVisualElementContainer;
    trace(item);
    } 
```

我尝试了这个链接[http://www.igorcosta.org/?p=366](http://www.igorcosta.org/?p=366)并尝试使用那里给出的类。

问题是抛出了一个错误。Flash builder 将我带到该代码内第二个函数中的第二个 for 循环，并显示在那里使用的 item.numElements 造成了问题。我试图在我的代码中使用 item.numElements（上面显示的那个我用来追踪 FormItem id），但它也不起作用。有人有任何线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:34:17.070

在您的 for 循环中，facility.getElementAt(i) 将返回一个 IVisualElement，不一定是 IVisualElementContainer。

尝试使用：

```
var item:IVisualElement = facilities.getElementAt(i);
trace(item);
var itemContainer:IVisualElementContainer = item as as IVisualElementContainer;

if (itemContainer) {
    trace(itemContainer.numElements);
} 
```

这应该会给你你正在寻找的结果！

# for-loop - 将元素从 std_logic_vector 转换为整数 vhdl

> ID：14730434
> 
> 赞同：1
> 
> 时间：2013-02-06T13:36:30.653
> 
> 标签：for-loop, vector, vhdl, typeconverter

我正在研究一个接收信号并将其添加到向量中的函数。

一旦添加了足够的信号，在我的案例 4 中，然后我循环遍历向量并将其添加到我的过程中的整数变量中。

我无法将单个元素转换为整数。

我尝试使用 to_integer(unsigned(myVector))，但这是二进制到十进制的转换。

我只是想要它，这样当我像这样遍历我的向量时：

```
for i in 0 to myVector'length loop
    Sum := Sum + to_integer(myVector(i));
end loop; 
```

1 或 0 的位值被转换为 1 或 0，我可以用它来添加到我的总和中。

有任何想法吗？

谢谢

PS - myVector 是一个信号，Sum 是我进程中的一个整数变量。如果没有简单的方法，我还能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:12:43.997

假设您想计算 numeric_std_unsigned 中的那些，问题只是 to_integer 需要在向量（无符号）上工作，而 myVector(i) 有点（std_logic）

以下创建了一个 to_integer 应该满意的 1 位无符号数。

```
for i in 0 to myVector'length loop
    Sum := Sum + to_integer(myVector(i downto i ));
end loop; 
```

或者，如果综合工具不喜欢在循环中动态切片 myVector，

```
for i in 0 to myVector'length loop
    if myVector(i) = '1' then
        Sum := Sum + 1;
    end if;
end loop; 
```

会做。

另请注意，循环边界可能存在范围错误...从 0 到长度可能比您拥有的元素多 1 次迭代 - 假设元素实际上从 0 开始，这是一个相当大的假设。

```
for i in myVector'low to myVector'high loop 
```

是首选...

# c# - c# - 我需要使用哪个数学函数将 1.7272 转换为 1.73

> ID：14730436
> 
> 赞同：-2
> 
> 时间：2013-02-06T13:36:56.037
> 
> 标签：c#, .net

我在 c# 中尝试了许多数学函数将 1.7272 转换为 1.73，但没有任何函数可以实现我的目标。我想要一个简单的转换，即 1.7272 到 1.73

请建议我哪个数学函数可以为我工作？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:38:29.053

你应该使用 Math.Round：

```
Math.Round(1.7272, 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:42:37.133

如果你想要一个字符串

```
> (1.7272).ToString("#.##")
"1.73" 
```

或者小数

```
> Math.Round(((Decimal)1.7272), 2)
1.73m 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:38:54.393

`Math.Round(1.7272,2)`是你要找的...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:39:29.020

.Round 函数将帮助您

```
System.Math.Round(1.7272, 2) returns 1.73 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T13:39:49.633

```
double d = Math.Round(1.7272, 2); 
```

# c# - 如何从 infopath 表单中获取 Web 上下文？

> ID：14730437
> 
> 赞同：1
> 
> 时间：2013-02-06T13:36:58.430
> 
> 标签：c#, sharepoint, infopath

我有 SharePoint 表单库和带有 1 个文本字段的 InfoPath 表单。我的问题是，我需要以某种方式获得 lib。表单库的 URL 并将其设置为文本框 fg

```
string _s = this.aplication.activeForm.GetUrlOfLibrabry(); 
```

如何获取父库 URL？（表单在 INFOPATH 中打开，而不是在浏览器中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:07:29.333

塞巴斯蒂安，你有没有试过：

```
this.ServerInfo 
```

这将为您提供许多可以查询的方法（即 SharePointListUrl 等...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:26:04.967

我不确定 InfoPath 2007，但对于 2010，您可以在查询字符串中使用表单库 URL。我建议您执行以下操作：

1.  在 FormEvents_Loading 方法中获取查询字符串参数。

    if (eventArguments.InputParameters.ContainsKey("SaveLocation")) { var docLib = HttpUtility.UrlDecode(eventArguments.InputParameters["SaveLocation"]); }

2.  将 URL 保存在 InfoPath 隐藏字段中，以便稍后阅读（在本例中为 _spListUrl）。

    // 存入xml数据

    XPathNavigator navigator=nav.SelectSingleNode("my:myFields/my:_spListUrl", NamespaceManager); navigator.SetValue(sDocLib);

我希望这有帮助

# tridion - 我在 VS 2010 中“更新”服务参考后，Tridion 核心服务参考变得未知

> ID：14730438
> 
> 赞同：2
> 
> 时间：2013-02-06T13:37:01.187
> 
> 标签：tridion, tridion-2011, tridion-core-services

我在我的项目中使用 tridion 核心服务（VS 2010 .Net Framework 4.0）

当我更新服务参考时，它变得未知。它在更新 tridion 核心服务参考后删除所有参考。

谁能建议我我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:53:44.933

从 SDL Tridion 2011 SP1 开始，Tridion 开始提供预构建的 CoreService 客户端。您可以在 [Tridion]\bin\client\Tridion.ContentManager.CoreService.Client.dll 下找到此 dll。

除了通常的类之外，这还包括对客户端进行的一些优化。[Tridion Practice](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithConfigFile)中提供了有关如何使用此程序集的详细信息。

# asp-classic - 如何在经典asp中检查互联网的可用性？

> ID：14730440
> 
> 赞同：0
> 
> 时间：2013-02-06T13:37:08.200
> 
> 标签：asp-classic, internet-connection

我在我的代码中调用网络服务。我想添加一个验证来检查互联网连接是否可用。

如果互联网连接不可用，则应提示互联网连接不可用。

请提供我的代码来检查这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:04:04.380

使用此功能抓取网页，调整超时以满足您的需要。这假设网站返回有效的 200 请求，如果网站关闭或返回 404 或您可能需要调整的内容。

```
Function GetPage(inURL) ' scrapes the URL page, HTML, XML, JSON, whatever
  Dim O(2), xmlServerHttp, error, ServerStatus, responseText
  Error = False
  Set xmlServerHttp = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0")
    lResolve = 1000
    lConnect = 3500
    lSend = 1000
    lReceive = 2000
  xmlServerHttp.setTimeouts lResolve, lConnect, lSend, lReceive
    On Error Resume Next
  xmlServerHttp.open "GET", inURL, false
  xmlServerHttp.send()
  If Err.Number <> 0 Then
    ServerStatus="timeout"
    error=True
  Else
    ServerStatus = xmlServerHttp.status
    If ServerStatus = 200 Then responseText=xmlServerHttp.responseText Else error=true
  End If
  On Error GoTo 0
  O(0) = responseText
  O(1) = Error
  O(2) = ServerStatus
  Set xmlServerHttp = nothing
  GetPage=O
End function 
```

用法：

```
 data = GetPage(url)
 body = data(0)
 error = data(1)
 ServerStatus = data(2)

 if error then
   response.write "Sorry no internet"
 else
   response.write "Internet found!"
 end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:45:58.110

try to ping the destination server and see the result, if you get a reply then continue your request see the following url [http://www.aspnettutorials.com/tutorials/network/net-ping-aspnet2-vb.aspx](http://www.aspnettutorials.com/tutorials/network/net-ping-aspnet2-vb.aspx)

# jquery - Jquery/html - 检查所选选项是否在 4 个数组之一中，然后执行功能

> ID：14730446
> 
> 赞同：2
> 
> 时间：2013-02-06T13:37:26.433
> 
> 标签：jquery, html, forms

我已经查看了网络/其他问题以寻求帮助，但无法完全弄清楚并假设我没有使用正确的关键字。

我正在尝试根据用户从网络表单的下拉菜单中选择的值来做某事。逻辑是；

*   用户从下拉列表中选择一个选项
*   该脚本检查该选项是否在数组 1,2,3,4 中
*   根据它所在的数组，它显示不同的 HTML div

这在我的脑海中听起来很简单，但我不知道从哪里开始。一如既往地感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:09:06.517

这样做真的很快，所以我相信它可以改进。

我想到了两种方法，第一种是使用`.indexOf`：

```
<script type="text/javascript>
    $(document).ready(function()
    {
        var selectedVal = 'asd';
        var selectedIndex;

        var arrayHolder; //should hold the array the value was found in
        var arr1 = ['huh', 'asd'];
        var arr2 = ['asdasd'];
        var arr3 = ['asdasdasd'];
        var arr4 = ['asdasdasdasd'];

        //arr1
        arrayHolder = arr1;
        selectedIndex = arrayHolder.indexOf('asd');

        if (!selectedIndex)
        {
            //arr2
            arrayHolder = arr2;
            selectedIndex = arrayHolder.indexOf('asd');

            if (!selectedIndex)
            {
                //arr3
                arrayHolder = arr3;
                selectedIndex = arrayHolder.indexOf('asd');

                if (!selectedIndex)
                {
                    //arr4
                    arrayHolder = arr4;
                    selectedIndex = arrayHolder.indexOf('asd');

                    if (!selectedIndex)
                    {
                        alert(selectedVal + ' not found in all 4 arrays.');
                    }
                }
            }
        }

        //By here, you should know if a value was found and in which array
        alert(arrayHolder);//contains the array in which the value was found
        alert(selectedIndex);//The index number where it was found

        //test
        console.log(arrayHolder[selectedIndex]);
    });
</script> 
```

第二种方法是使用 jQuery 的`inArray`：

```
<script type="text/javascript>
    $(document).ready(function()
    {
        var selectedVal = 'asd';
        var selectedIndex;

        var arrayHolder; //should hold the array the value was found in
        var arr1 = ['huh', 'asd'];
        var arr2 = ['asdasd'];
        var arr3 = ['asdasdasd'];
        var arr4 = ['asdasdasdasd'];

        //check first array
        arrayHolder = arr1;
        selectedIndex = $.inArray(selectedVal, arrayHolder);

        //check if found in first array, if not check next array
        if (!selectedIndex)
        {
            arrayHolder = arr2;
            selectedIndex = $.inArray(selectedVal, arrayHolder);

            //check if found in second array, if not check next array
            if (!selectedIndex)
            {
                arrayHolder = arr3;
                selectedIndex = $.inArray(selectedVal, arrayHolder);

                //check if found in third array, if not check next array
                if (!selectedIndex)
                {
                    arrayHolder = arr4;
                    selectedIndex = $.inArray(selectedVal, arrayHolder);

                    //check if found in third array, if not check next array
                    if (!selectedIndex)
                    {
                        alert(selectedVal + ' not found in all 4 arrays.');
                    }
                }
            }
        }

        //By here, you should know if a value was found and in which array
        alert(arrayHolder);//contains the array in which the value was found
        alert(selectedIndex);//The index number where it was found

        //test
        console.log(arrayHolder[selectedIndex]);
    });
</script> 
```

* * *

## .indexOf 支持

**注意：** 并非所有浏览器都支持 .indexOf()（特别是 IE）。所以如果你想使用 indexOf()，你应该首先使用下面的代码，在所有浏览器中添加对它的支持（代码归功于 mozilla）。

```
<script type="text/javascript">
        if (!Array.prototype.indexOf)
        {
          Array.prototype.indexOf = function(elt /*, from*/)
          {
            var len = this.length >>> 0;

            var from = Number(arguments[1]) || 0;
            from = (from < 0)
                 ? Math.ceil(from)
                 : Math.floor(from);
            if (from < 0)
              from += len;

            for (; from < len; from++)
            {
              if (from in this &&
                  this[from] === elt)
                return from;
            }
            return -1;
          };
        }
</script> 
```

# highcharts - Highstock yAxis 自动缩放问题

> ID：14730448
> 
> 赞同：0
> 
> 时间：2013-02-06T13:37:34.540
> 
> 标签：highcharts, highstock

我有一个如下图所示的图表。我的数据在 50-51 区间。但是 yAxis 是从 0 开始的。我没有设置 yAxis 最小值。

我无法为 yAxis 设置静态最小值和最大值，因为单个图表可以显示具有不同最小值-最大值的不同数据系列。

我想在这个例子中 yAxis 从 50 或 49 开始，以 51 或 52 结束。 Higchcarts 应该自动完成。

有任何想法吗？

![y轴自动缩放](../Images/39f6821bce39c4613b7425c1c818e2e4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:52:49.170

也许做一些预处理会更好。如果您的数据系列不是“实时”的，那么您可以解析所有系列中的所有 y 值并获取最小值/最大值，然后将它们分配给您的 yAxis 最小值和最大值参数。如果您的数据是“实时的”（每 x 秒更新一次），那么您将需要检查新值以查看它是否在最小/最大范围内，如果不在，则分配一个新的最小值或最大值。

# ruby-on-rails - 为什么 Ruby on Rails 动作“destroy”不命名为“delete”？

> ID：14730451
> 
> 赞同：35
> 
> 时间：2013-02-06T13:37:40.693
> 
> 标签：ruby-on-rails, http, rest, crud

[CRUD 原则](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)定义了对持久数据的四种基本操作：

*   创造，
*   读，
*   更新，
*   删除。

HTTP 动词也使用 DELETE 词。

为什么[Rails 中的默认路由](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)使用单词“ **destroy** ”来表示对应于 HTTP 动词**DELETE**的操作？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-06T14:21:22.543

Rails 使用 4 种标准方法（动词），即：

*   得到
*   邮政
*   放
*   删除

此外，它还有 7 个 RESTful 操作：

*   指数
*   新的
*   创造
*   编辑
*   更新
*   显示
*   破坏

Rails 从不使用与相应动作相同的动词。路由到动作destroy可以通过控制器中的相应动作执行多个DELETE。

您可能会对这个 railsguide 感兴趣：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

**解释**

> 浏览器通过使用特定的 HTTP 方法（例如 GET、POST、PUT 和 DELETE）请求 URL 来从 Rails 请求页面。每个方法都是对资源执行操作的请求。资源路由将多个相关请求映射到单个控制器中的操作。

现在，假设我们有一个 HTTP GET 请求，这意味着您想要读取/检索数据。如果动作与动词同名，在这种情况下为 GET，则过于简单化。GET 可以授予对显示、索引、新建或编辑操作的访问权限。他们都读取数据，但动作本身肯定不一样。DELETE 请求也是如此。此请求通过控制器处理，并且可以在操作中具有不同的实现。可能是您想销毁帖子，但这也可能意味着您想退出用户会话。只有一个名为 delete 的动作并不能证明与它相关的可能性，通过控制器。

**编辑**

如果您想了解更多有关如何处理来自浏览器的请求的信息，您可以阅读有关 Rails 使用的 M(odel)V(iew)C(ontroller) 模型的一些信息：

[http://www.youtube.com/watch?v=3mQjtk2YDkM&noredirect=1](http://www.youtube.com/watch?v=3mQjtk2YDkM&noredirect=1)

和：

[http://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/](http://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/)

来自此链接的报价：

> 浏览器发出请求，例如[http://mysite.com/video/show/15](http://mysite.com/video/show/15) Web 服务器（mongrel、WEBrick 等）接收请求。它使用路由来找出要使用的控制器：默认路由模式是 config/routes.rb 中定义的“/controller/action/id”。

这意味着您的初始请求将通过网络服务器进行翻译和处理，并且必须通过控制器定义正确的路由，其中​​休息操作（例如销毁）所在的位置。

Rails 早期只有 2 个动词，即 GET 和 POST（由于不支持 PUT 和 DELETE，后来版本的 rails 通过隐藏变量添加 PUT 和 DELETE 解决了这个问题。destroy 动作的名称从未改变，因为请求和操作是两个不同的东西。

```
Actions || show  || create || update || destroy
SQL     || select|| create || update || delete
REST    || get   || post   || post   || post

Actions || show  || create || update || destroy
SQL     || select|| create || update || delete
REST    || get   || post   || put    || delete 
```

这句话可能更有趣：

> “因为路由器使用 HTTP 动词和 URL 来匹配入站请求，所以四个 URL 映射到七个不同的操作。”

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T14:12:01.357

对于模型部分，这是来自[http://www.nickpeters.net/2007/12/21/delete-vs-destroy/](http://www.nickpeters.net/2007/12/21/delete-vs-destroy/)的一个很好的总结：

> delete 方法实质上是从数据库中删除一行（或一组行）。另一方面，Destroy 提供了更多选择。首先，它将检查任何回调，例如 before_delete，或我们在模型中指定的任何依赖项。接下来，它将把刚刚被删除的对象保留在内存中；这让我们可以留言说“订单#{order.id} 已被删除”。最后，也是最重要的，它还将删除与该对象关联的所有子对象！

知道了这一点，只有将控制器中的动作与模型中的动作调用相同才有意义。**删除太简单了**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T13:39:25.703

好问题。

我觉得这是为了鼓励您始终使用`destroy`而不是`delete`在您的对象上。

实际上，`delete`不会触发任何回调。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-09T05:47:42.060

这是 Ryan Bates 非常早（2007 年）的回答

> 基本上“删除”直接向数据库发送查询以删除记录。在这种情况下，Rails 不知道它正在删除的记录中有哪些属性，也不知道是否有任何回调（例如 before_destroy）。
> 
> “destroy”方法获取传递的 id，使用“find”方法从数据库中获取模型，然后对其调用 destroy。这意味着回调被触发。
> 
> 如果您不希望触发回调或想要更好的性能，您可能需要使用“删除”。否则（大多数时候）你会想要使用“destroy”。

[来源](http://archive.railsforum.com/viewtopic.php?id=2427)

# angularjs - 在没有控制器的情况下迭代服务结果的指令

> ID：14730457
> 
> 赞同：0
> 
> 时间：2013-02-06T13:38:00.490
> 
> 标签：angularjs, angularjs-directive

我正在研究使用 AngularJS 作为以声明方式定义 Web 组件的框架的可能性（尽可能避免对控制器的需要）。所需的大部分功能已经可以通过 Angular 的内置指令实现，但是我还希望能够迭代用于异步请求数据的各种服务的结果。

我需要的功能可以通过将服务注入控制器并将结果存储在范围内来轻松实现，但我希望有一种方法可以实现这一点而根本不需要控制器（具体来说，我希望生成模板而不是手写）。

是否有任何内置方法可以在 Angular 中实现这一点（例如，一种包含对重复表达式的服务调用的方法）？如果不是，那么实现这一目标的最有效方法是什么？我会假设我应该能够创建一个引用服务的新指令，但我不确定这是否是实现这一目标的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:09:06.187

要制作通用指令，其中可以在 HTML 中声明服务而不是作为指令定义的一部分注入，可以使用 $injector：

```
<some_element ... my-directive service="myService"> 
```

指示：

```
myApp.directive('myDirective', function($injector) {
    return {
       link: function(scope, element, attrs) {
          var service = $injector.get(attrs.service);
          service.someMethod();
          ...
       }
    }
}); 
```

注意：我还没有测试上述技术是否真的有效，但我已经[尝试过使用控制器的技术](https://stackoverflow.com/a/14418384/215945)并且它有效。

要使这项技术有用，您显然必须提出一个静态服务 API，并且只能使用使用该 API 的服务。

# ios - 如何使 UIView 动画序列重复和自动反转

> ID：14730460
> 
> 赞同：39
> 
> 时间：2013-02-06T13:38:04.990
> 
> 标签：ios, objective-c, uiview, uiviewanimation

如何使这个复杂的动画重复和自动反转？有没有办法添加选项 UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat 到这个动画序列？

```
 [UIView animateWithDuration:1.0f animations:^{

        someView.frame = someFrame1;

    } completion:^(BOOL finished) {

        [UIView animateWithDuration:0.5f animations:^{

            someView.frame = someFrame2;

        } completion:nil];

    }]; 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-06T13:49:12.057

要从点 1 到 2 到 3 到 2 到 1 动画并重复，您可以`animateKeyframesWithDuration`在 iOS 7 及更高版本中使用：

```
someView.frame = frame1;
[UIView animateKeyframesWithDuration:2.0 delay:0.0 options:UIViewKeyframeAnimationOptionAutoreverse | UIViewKeyframeAnimationOptionRepeat animations:^{
    [UIView addKeyframeWithRelativeStartTime:0.0 relativeDuration:0.5 animations:^{
        someView.frame = frame2;
    }];
    [UIView addKeyframeWithRelativeStartTime:0.5 relativeDuration:0.5 animations:^{
        someView.frame = frame3;
    }];
} completion:nil]; 
```

如果使用自动布局，您可以动画约束常量的变化：

```
[UIView animateKeyframesWithDuration:2.0 delay:0.0 options:UIViewKeyframeAnimationOptionAutoreverse | UIViewKeyframeAnimationOptionRepeat animations:^{
    [UIView addKeyframeWithRelativeStartTime:0.0 relativeDuration:0.5 animations:^{
        topConstraint.constant = 200;
        leftConstraint.constant = 200;
        [self.view layoutIfNeeded];
    }];
    [UIView addKeyframeWithRelativeStartTime:0.5 relativeDuration:0.5 animations:^{
        topConstraint.constant = 100;
        leftConstraint.constant = 300;
        [self.view layoutIfNeeded];
    }];
} completion:nil]; 
```

或者，使用自动布局的方法是停用约束，然后您可以使用`frame`值或您拥有的东西进行动画处理。

* * *

在早期版本的 iOS 中，您可以使用`CAKeyframeAnimation`, 例如沿路径制作动画：

```
UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:CGPointMake(100.0, 100.0)];
[path addLineToPoint:CGPointMake(200.0, 200.0)];
[path addLineToPoint:CGPointMake(100.0, 300.0)];

CAKeyframeAnimation *animatePosition = [CAKeyframeAnimation animationWithKeyPath:@"position"];
animatePosition.path = [path CGPath];
animatePosition.duration = 1.0;
animatePosition.autoreverses = YES;
animatePosition.repeatCount = HUGE_VALF;
[self.someView.layer addAnimation:animatePosition forKey:@"position"]; 
```

你可以用任何你想要的点来做到这一点。如果您想沿曲线路径（例如圆形或贝塞尔曲线）制作动画，这也是有用的技术。

* * *

要仅在两点之间设置动画，您可以使用`animateWithDuration:delay:options:animations:completion:`，例如：

```
[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     // do whatever animation you want, e.g.,

                     someView.frame = someFrame1;
                 }
                 completion:NULL]; 
```

这将动画`someView`从起始帧`someFrame1`来回移动。

顺便说一句，与和`UIViewAnimationOptionCurveEaseInOut`一起使用会在动画反转和重复时为您提供更平滑的效果。`UIViewAnimationOptionAutoreverse``UIViewAnimationOptionRepeat`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-01T00:35:18.447

Swift 4 用于简单的摆动序列：

```
func animateWiggle() {
    // Set animation props
    let scaleDelta = CGFloat(0.10)

    // Set transforms
    let wiggleOutHorizontally = CGAffineTransform(scaleX: 1.0 + scaleDelta, y: 1.0)
    let wiggleOutVertically = CGAffineTransform(scaleX: 1.0, y: 1.0 + scaleDelta)

    // Run animation sequence
    UIView.animateKeyframes(withDuration: 1.0, delay: 0.0, options: [.autoreverse, .repeat], animations: {
        // Animate wiggle horizontally
        UIView.addKeyframe(withRelativeStartTime: 0.0, relativeDuration: 0.5, animations: {
            self.transform = wiggleOutHorizontally
        })

        // Animate wiggle vertically
        UIView.addKeyframe(withRelativeStartTime: 0.5, relativeDuration: 0.5, animations: {
            self.transform = wiggleOutVertically
        })
    },
    completion: nil)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-22T10:09:14.093

```
 UIImageView *pin = [UIImageView new];
    [pin setFrame:CGRectMake(115, 160, 30, 60)];
    [pin setBackgroundColor:[UIColor redColor]];
    [holderView addSubview:pin];

    [UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat
                     animations:^{
                        // [pin setTransform:CGAffineTransformMakeTranslation(0, 20)];
                         [pin setFrame:CGRectMake(115, 200, 60, 100)];
                     }completion:^(BOOL finished){

                     }]; 
```

# c - 如何影响函数的地址？

> ID：14730462
> 
> 赞同：3
> 
> 时间：2013-02-06T13:38:12.170
> 
> 标签：c, assembly

有没有一种方法可以影响、设置或定义函数的（相对）地址？也许链接描述文件有任何可能性来确保函数 abc() 始终位于 OFFSET+0x0034C0 （只是一个例子）。我想以某种方式“控制”内存中函数的位置，以使这些位置具有某种参数化。目前我正在寻找一种使用 gcc 在我的 x86 上的方法。但是，真正的应用程序应该在嵌入式设备上运行。

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T13:40:14.017

您可能可以使用带有 gcc 的[链接器脚本魔术来做到这一点，是的。](http://www.math.utah.edu/docs/info/ld_3.html#SEC4)查看如何定义[部分放置](http://www.math.utah.edu/docs/info/ld_3.html#SEC16)，然后将指令放入源代码中以将函数放入您选择的部分中。

完全不确定这是否适用于 x86 机器，因为操作系统可能有……反对意见。这更适合直接嵌入式使用。

在完整的操作系统上控制代码位置有什么意义*？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:22:44.920

IMO，最好的方法是将函数放入用户定义的部分，就像上面提到的*unwind一样。*您可以在下面找到一个将函数`myFunc`放置在 4kByte 边界的简单示例：

通过修改链接描述文件在你的内存中创建一个新部分：

```
/* .my_section will be the name of the section in the final executable */
.my_section : ALIGN (8)
{
    . = ALIGN (0x1000);

    KEEP(*(.mysection))    /* The section will be called ".mysection" in the
                              compiled translation unit (.obj) */

    . = ALIGN (8);
} >rom 
```

现在，使用 gcc 的`attribute`特性将函数放入我们刚刚创建的部分：

```
void myFunc(void) __attribute__ ((section(".mysection"))); // The section name to use 
                                                           // here is ".mysection", 
                                                           // not ".my_section"

// Looks like you need to use __attribute__ along with function declaration, rather 
// than with the function definition, though I'm not sure why

void myFunc(void)
{
    // ...
} 
```

如果您`objdump`现在这样做，您将看到一个名称为的部分，其中包含at address`.my_section`的代码，而不是 at`myFunc``0x2000``0x12e8`

```
Disassembly of section .my_section:

000012e8 <myFunc-0xd18>:
        ...

00002000 <myFunc>:
    2000:       b508            push    {r3, lr}
    ... 
```

此代码适用`Codesourcey gcc`于 ARM-Cortex 套件。我不太确定x86 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:01:51.737

一个典型的通用实现是向量表（我也听说过这称为补丁表）。

首先，在你的 C 文件中，编写你的函数：

```
void my_first_function(int){ /* do something */ }
void my_second_function(int){ /* do something */ } 
```

然后，在您的 C 文件中创建一个定义表布局的结构：

```
struct MyVectorTable
{
  void (*first_function)(int);
  int (*second_function)(float, char);

  // all the rest
}; 
```

接下来，在您的 C 文件中创建一个静态表：

```
static struct MyVectorTable my_vector_table = {
  my_first_function,
  my_second_function,
}; 
```

最后将地址公开为 void*

```
void* get_table_base_address(void) { return &my_vector_table; } 
```

现在您应该能够将所有函数作为基地址的偏移量。

如果您的所有函数都具有相同的调用签名，您可以通过使用函数指针数组而不是结构来简化这一点。但是，数组和结构都会保存指针，因此指针数学基本相同。

这还允许您使用链接器将补丁表定位在特定地址。

# android - 一次安装 Android GUI 和服务 apk

> ID：14730466
> 
> 赞同：0
> 
> 时间：2013-02-06T13:38:18.463
> 
> 标签：android, android-service, android-install-apk

我有一个应用程序分为两部分，一个服务 apk 和一个 GUI apk。该服务将提供从这个 GUI apk 和其他人在后台抛出的广播调用的“方法”。

由于服务和 GUI apk 是同一个应用程序的一部分，我想从一个安装过程中安装这两个 apk，即在 Google Play 上单击“安装”按钮。

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:47:54.083

你不能。Android 安装过程只能从一个 apk 安装一个应用程序。

此外，您可以尝试在第一个应用程序中包含第二个应用程序的 apk 并安装它，但这不会是静默安装，用户必须在他/她第一次运行您的应用程序时批准它。

您最好的选择是将两个项目合并到一个应用程序中。您将需要进行大量重构，并更改至少一个整个应用程序的包名称，但这会解决您的问题。

# sql - 行数据到列

> ID：14730469
> 
> 赞同：2
> 
> 时间：2013-02-06T13:38:22.640
> 
> 标签：sql, sql-server

我有 sql 查询来获取文件的位置

```
select FileName, FileLocation from tblFile 
```

和像这样的数据

```
FileName               FileLocation

file1                  \\server1\folder1\file1
file1                  \\server2\folder1\file1
file2                  \\server1\folder1\file2
file2                  \\server2\folder1\file2 
```

我想获得如下数据：

```
FileName               FileLocations

file1                  \\server1\folder1\file1, \\server2\folder1\file1
file2                  \\server1\folder1\file2, \\server2\folder1\file2 
```

如何在 sql server 中获得上述结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:46:30.480

[SQL小提琴](http://sqlfiddle.com/#!3/51e01/1)

**MS SQL Server 2008 架构设置**：

```
create table tblFile
(
  FileName varchar(10),
  FileLocation varchar(30)
)

insert into tblFile values
('file1',                  '\\server1\folder1\file1'),
('file1',                  '\\server2\folder1\file1'),
('file2',                  '\\server1\folder1\file2'),
('file2',                  '\\server2\folder1\file2') 
```

**查询 1**：

```
select T1.FileName,
       (
       select ', '+T2.FileLocation
       from tblFile as T2
       where T1.FileName = T2.FileName
       for xml path(''), type
       ).value('substring(text()[1], 3)', 'varchar(max)') as FileLocations
from tblFile as T1
group by T1.FileName 
```

**[结果](http://sqlfiddle.com/#!3/51e01/1/0)**：

```
| FILENAME |                                    FILELOCATIONS |
---------------------------------------------------------------
|    file1 | \\server1\folder1\file1, \\server2\folder1\file1 |
|    file2 | \\server1\folder1\file2, \\server2\folder1\file2 | 
```

# php - 使用 cookie 将网页模板更改为另一个网页

> ID：14730474
> 
> 赞同：0
> 
> 时间：2013-02-06T13:38:32.523
> 
> 标签：php, javascript, html, templates, cookies

我有两个网页`admin.php`和`user.php`. `admin.php`有控制权`user.php`。
我有 4 个控件（按钮），`admin.php`其中 2 个用于更改模板（外观）`admin.php`并且工作正常（我使用 cookie 完成了它）。

其他 2 个控件（按钮）用于更改`user.php`.
但我不知道如何实现这一目标？
我应该将 cookie 从 传递`admin.php`到`user.php`吗？如果是这样，我应该如何通过它们？或者也许我应该使用 JavaScript？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:46:00.100

如果您的两个页面设置在同一个域上，那么在两者之间共享 cookie 应该不会有任何问题。

您只需确保指定正确的域。使用绝对路径而不是相对路径。

前任：

```
name=newvalue; expires=date; path=/; domain=.mydomain.org 
```

建议：

既然你用的是php，为什么不用它来指定模板呢？由于它是用户配置，因此您可能希望它持续存在，而不管用户是否清除 cookie。

# python - 带有滚动条的 Python Turtle 窗口

> ID：14730475
> 
> 赞同：5
> 
> 时间：2013-02-06T13:38:33.760
> 
> 标签：python, turtle-graphics

我是 Python 新手，并且使用海龟图形在 Python 2.7 中编写了一个简单的程序，该程序绘制了一个分形形状。我遇到的问题是乌龟窗口没有滚动条，所以如果窗口的形状太大，就不可能看到所有的东西。谷歌搜索但没有找到答案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-03T12:47:33.667

You don't need to call Tkinter functions directly to get scrollbars in `turtle`. You just need to call `turtle.screensize` and set a screen size that's larger than the display window in at least one of its dimensions. I find it most convenient to open the display window at its default size and let the user resize it, if desired.

Here's a short demo:

```
import turtle

win_width, win_height, bg_color = 2000, 2000, 'black'

turtle.setup()
turtle.screensize(win_width, win_height, bg_color)

t = turtle.Turtle()
#t.hideturtle()
#t.speed(0)
t.color('white')

for _ in range(4):
    t.forward(500)
    t.right(90)

turtle.done() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T23:02:15.617

[最后在http://www.python-forum.de/viewtopic.php?f=1&t=24823&start=0](http://www.python-forum.de/viewtopic.php?f=1&t=24823&start=0)找到了一些代码，它为海龟提供了一个滚动的画布：

```
import turtle
import Tkinter as tkinter

root = tkinter.Tk()
root.geometry('500x500-5+40') #added by me
cv = turtle.ScrolledCanvas(root, width=900, height=900)
cv.pack()

screen = turtle.TurtleScreen(cv)
screen.screensize(2000,1500) #added by me
t = turtle.RawTurtle(screen)
t.hideturtle()
t.circle(100)

root.mainloop() 
```

# mongodb - MongoDB 链接和原子操作

> ID：14730476
> 
> 赞同：2
> 
> 时间：2013-02-06T13:38:37.040
> 
> 标签：mongodb

假设有两个单独的集合： Cities{name: "NYC", area: "1223", people: [1,2,3]} 和 Person {personId:1, name:"abc"}

如您所见，我们在城市中关联了人员的 ID（RDBMS 中的一种外键）。

现在，如果我决定删除 Id = 1 的人，那么我想更新 Cities 中的 people 数组，就像 RDBMS 中的级联删除操作一样，我知道我们没有按照[this](https://stackoverflow.com/questions/3115261/mongodb-dbref-on-delete-cascade)的级联删除类型的操作，并且我们在 MOngoDB 中没有事务，如果我们以某种方式未能对城市执行“级联删除”类型的操作，那么数据库可能会处于不一致状态。如何确保整个“删除人+城市级联删除”作为MongoDB中的原子操作？如果不能，那么我们是否更喜欢嵌入而不是链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:10:24.573

在操作速度和一致性方面，嵌入优于链接。您要实现的是 mongodb 中的事务操作，它不是原子的，因为它涉及多个文档。

您可以很容易地从每个人员文档中引用城市，而不是让每个城市引用每个人。对于您所拥有的这种多对一关系，它是一种更健全的结构。

如果在类似情况下数据一致性对您的应用程序很重要，您可能需要考虑使用mongodb 的模拟 RDBMS 事务[的两阶段提交模式。](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:34:53.290

> 如何确保整个“删除人+城市级联删除”作为MongoDB中的原子操作？

正如其他人所说，MongoDB 有一个两阶段提交的客户端版本，但是：

*   不提供两阶段事务提交
*   不是原子的
*   有相当大的开销
*   是客户端（实际上拒绝了您从服务器端获得的任何好处，即失败）
*   并且在发生故障时无法提供信息和交易的安全性

话虽如此，如果您可以依靠您的应用程序写入数据库并且不会失败，那么两阶段提交的 MongoDB 版本可以在这里工作；但是，那么为什么您不只是一个接一个地执行一个查询，而不是增加使用假两阶段提交的额外开销。

通常，假设如果其中一个删除查询成功*，*则可以写入 mongodb，但是如果它们没有将级联的父行“标记”为已删除或其他东西，并且有一个专用的 cronjob 稍后会返回并且以一致的方式清理它（因为在那里这样做会延迟客户端）。

至于哪种模式设计最好，嵌入是首选是不正确的。我注意到你说：

> 然后我想更新 Cities 中的 people 数组

这很可能需要`$pull`在该阵列上使用 a 或类似的东西。我应该注意，如果该数组显着增长，那么内存中的操作`$pull`将比查询两个单独的集合要慢一些。

归根结底，我们无法就您的架构设计提供真正的建议，因为我们知道的不够多，所以我就这样吧。

### 编辑

尽管其他两个答案都有意义。如果您将 嵌入`city_id`到个人文档中，您实际上可以在一次调用中级联关系。当然，这是一个奇怪的问题，通常您可能有太多的子记录无法放入 Mongo 文档中，但这种情况适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:03:52.940

您的架构设计应该与您的数据访问模式相匹配。因此，最好在 people 集合中包含一个 'city:NYC' 键：值对，而不是在 Cities 集合中包含 personID，因为如果您对 NYC 中的每个人都有一个 id，您可能会超过施加的 16mb 文档大小限制在 Mongodb 文档上，即因为数组将包含数百万个元素。

这将更容易更新一个人的城市（因为它发生的频率较低），而不是更新一个一直在变化的城市中的人数。管理多个更新的最安全方法可能是通过您的应用程序代码。

# jquery - jquery制作html

> ID：14730477
> 
> 赞同：3
> 
> 时间：2013-02-06T13:38:42.563
> 
> 标签：jquery, html

对于给定的标签，我需要用很多元素包装它。这样用户就可以把

```
<img src="img.gif" > 
```

但结果是

```
<div class="total">
    <div class="cover">
        <div class="crop">
            <img src="img.gif" alt> 
        </div>
        <div class="hover">
            <div class="peel">
                <div class="links">
                    <a href="#">FB</a>
                </div>

            </div>
        </div>
    </div>
</div> 
```

所以我决定把它做成jQuery插件。这是其中的一部分

```
(function($) {
$.fn.peel = function(options) {
    var defaults = {};
    var settings = $.extend({},defaults, options);

    return this.each(function() {
        $(this).load(function() {
            var image = $(this);
            var total = $('<div />', {'class' : 'total'});
            var cover = $('<div />', {'class' : 'cover'});
            var crop = $('<div />', {'class': 'crop'});
            var hover = $('<div />', {'class' : 'hover'});
            var peel = $('<div />', {'class' : 'peel'});
            var links = $('<div />', {'class' : 'links'});
            var a = $('<a>', {'href' : '#', 'text' : 'FB'});
            //Chaining begins here
            image.wrap(crop);
            crop.after(hover);

        });
    });

};
})(jQuery); 
```

起初我用我将使用的 div 来制作变量。但是这次我很难把它全部放在一起。我留下了 2 行不想与链接一起工作的行。起初我用裁剪包装图像，然后在裁剪 div 之后添加悬停 div。但是......第二行不起作用。我尝试了很多方法。到目前为止没有运气。似乎不可能添加用“包装”添加的东西。也许我做错了，所以也许你们中的某个人可以帮忙？:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:42:25.697

对未插入页面的元素进行 DOM 操作可能有点棘手。

`after`，例如，只能对具有父元素的元素起作用。这是它的实现：

```
after: function() {
    return this.domManip( arguments, false, function( elem ) {
        if ( this.parentNode ) {
            this.parentNode.insertBefore( elem, this.nextSibling );
        }
    });
}, 
```

同样，`wrap`将调用`before`具有对称实现的方法。

有效的是通过使用`append`并从最外部的元素开始构建你的树：

```
cover.append(crop);
crop.append(image);
cover.append(hover); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:07:05.730

您可以通过以下方式实现：

```
image.wrap(total).wrap(cover).wrap(crop)
    .closest('.crop')
    .after(a.wrap(hover).wrap(peel).wrap(links).closest('.hover')); 
```

@dystroy 的答案并不完全正确：您**可以**在内存中的节点之后插入东西

```
cover.append(crop).append(hover).appendTo('body'); 
```

你会发现所有 3 个节点都附加到 DOM

关键点是`$.wrap`。当你包装一些东西时，与其他操作不同，jQuery 会创建一个新副本，此时 dom 中的包装器与在内存中创建的引用不再相同。

以第一行为例：

```
var domCrop = image.wrap(total).wrap(cover).wrap(crop)
    .closest('.crop');
console.log(domCrop.is(crop)); //false, domCrop and the corp in mem not point to the same ref 
```

**最后但**同样重要的是，实际上，我不喜欢这种方式来扩展 dom 节点。它使代码难以编写和维护。

这是我的解决方案：

```
(function($) {
$.fn.peel = function(options) {
    var defaults = {};
    var settings = $.extend({},defaults, options);
    var html = '<div class="total">'
        + ' <div class="cover">'
        + '   <div class="crop"></div>'
        + '   <div class="hover">'
        + '      <div class="peel">'
        + '         <div class="links">'
        + '            <a href="#">FB</a>'
        + '         </div>'
        + '      </div>'
        + '   </div>'
        + ' </div>'
        + '</div>';

    return this.each(function() {
        $(this).load(function() {
            var $image = $(this);

            //introduced a placeholder. 
            //not to replace the $image directly, just for keeping all the event handler bound to $image.
            var $placeholder = $('<span/>').insertAfter($image);
            $(html).find('.crop').append($image)
                .end()
                .replaceAll($placeholder);
        });
    });

};
})(jQuery); 
```

**jsFiddle 演示：http: [//jsfiddle.net/vF4QH/1/](http://jsfiddle.net/vF4QH/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:12:23.870

为什么不像这样一劳永逸地建立一个模板

```
var htmlTemplate = '<div class="total">'
    htmlTemplate += ' <div class="cover">';
    htmlTemplate += '   <div class="crop"></div>';
    htmlTemplate += '   <div class="hover">';
    htmlTemplate += '      <div class="peel">';
    htmlTemplate += '         <div class="links">';
    htmlTemplate += '            <a href="#">FB</a>';
    htmlTemplate += '         </div>';
    htmlTemplate += '      </div>';
    htmlTemplate += '   </div>';
    htmlTemplate += ' </div>';
    htmlTemplate += '</div>'; 
```

然后，当您需要它时，您可以执行以下代码来插入图像标签

```
var selection = $(htmlTemplate);
selection.find('.crop').html('<img src="img.gif" alt>'); 
```

最后将其附加到 DOM 中的某个位置

```
//substitute body for where you wish to place the result
$("body").append(selection) 
```

# python - 当我的任务在 Windows 上使用 python 被 taskmgr 杀死时，有没有办法运行关闭功能？

> ID：14730479
> 
> 赞同：1
> 
> 时间：2013-02-06T13:38:46.890
> 
> 标签：python, python-3.x

如果用户使用“CTRL+C”或“X”，我可以运行一个函数，但是如果用户尝试使用 Windows 上的任务管理器杀死我的程序，有没有办法运行最后一个函数？我使用 python 3.3 和 windows 7。我尝试了 atexit，信号模块，但它们不起作用。我不能停止taskmgr吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:53:17.437

是的，我想是的。

```
import signal
signal.signal(signal.SIGTERM, custom_func) 
```

谷歌搜索“Python windows 捕获进程终止”后的更多信息 [http://danielkaes.wordpress.com/2009/06/04/how-to-catch-kill-events-with-python/](http://danielkaes.wordpress.com/2009/06/04/how-to-catch-kill-events-with-python/)

但是，如果该信号是一个无所谓的信号，那么您将无法使用需要时间的函数来中断该调用，因为好吧，我认为这是 unix 中的强制终止 -9 并且只会丢弃任何东西处理过程的能力。如果我错了，请纠正我，但如果它是强制的，就不可能中止或调用函数？

# ios - iOS：为活动导航显示蓝条

> ID：14730480
> 
> 赞同：0
> 
> 时间：2013-02-06T13:38:48.057
> 
> 标签：ios, background, navigation, navigationbar

![在此处输入图像描述](../Images/7e1e47bb8cce5b0aa5b0491077dd848b.png)

我想在我的应用程序在后台运行时显示这个蓝色条。

我怎样才能做到这一点？

迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:59:56.550

您正在寻找的 SBStatusBar - 它（我认为）是用于访问和显示它的私有 API。但是，您可以通过非私人方式让它出现。查看以下链接：[SBStatusBarController 实例](https://stackoverflow.com/questions/7246306/sbstatusbarcontroller-instance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T09:47:33.490

您甚至可以在后台访问您的位置并请求位置权限，`"requestWhenInUseAuthorization"`这意味着蓝色条表示您的应用程序访问您所在的位置`ios8`

# python - 使用或不使用 dict.keys() 访问 Python dict 键

> ID：14730481
> 
> 赞同：4
> 
> 时间：2013-02-06T13:38:51.467
> 
> 标签：python, loops, dictionary

通常我`dict`使用以下方法访问密钥`keys()`：

```
d = {'a':1, 'b':2, 'c':3}

for k in d.keys(): print k 
```

但有时我会看到这段代码：

```
for k in d: print k 
```

这段代码正确吗？安全的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T13:45:35.520

要回答您的明确问题，是的，它是安全的。

要回答您不知道的问题：

在 python 2.x 中：`dict.keys()`返回键列表。

但是做`for k in dict`迭代它们。

迭代比构造列表更快。

在 python 3+ 中，显式调用`dict.keys()`并不慢，因为它还返回一个迭代器。

大多数字典需求通常可以通过以下方式迭代`items()`而不是按键来解决：

```
for k, v in dict.items():
    # k is the key
    # v is the value
    print '%s: %s' % (k, v) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:12:48.287

虽然这已经提到过，但我想在这些讨论中添加一些确切的数字。所以我比较了：

```
def iter_dtest(dtest):
    for i in dtest:
        pass 
```

和

```
def list_dtest(dtest):
    for i in dtest.keys():
        pass 
```

使用了包含 1 000 000 个项目的字典（浮动键），我使用`timeit`了 100 次重复。这些是结果：

```
Python 2.7.1:
iter_dtest: 3.92487884435s
list_dtest: 6.24848171448s

Python 3.2.1:
iter_dtest: 3.4850587113842555s
list_dtest: 3.535072302413432s 
```

显然调用`dtest.keys()`在 Python 2.x 中有一些缺点

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T13:39:52.653

第二个代码示例的行为等同于调用`.keys()`，所以是的，这是正确且安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:45:19.477

这是不一样的。

```
for k in d: print k 
```

不创建额外的列表，而

```
for k in d.keys(): print k 
```

创建另一个列表，然后对其进行迭代

至少在 Python 2 中。在 Python 3`dict.keys()`中是一个迭代器。

因此，您可以使用`for k in d.iterkeys()`或`for k in d`。两者都导致相同的结果。

# java - 查询@ElementCollection JPA

> ID：14730482
> 
> 赞同：9
> 
> 时间：2013-02-06T13:38:53.070
> 
> 标签：java, spring, hibernate, jpa, hibernate-criteria

我有一个`Entity` `Transaction`如下：

```
@Entity
class Transaction extends AbstractEntity<Long>{
        private static final long serialVersionUID = 7222139865127600245L;
        //other attributes

    @ElementCollection(fetch = FetchType.EAGER, targetClass = java.lang.String.class)
    @CollectionTable(name = "transaction_properties", joinColumns = @JoinColumn(name = "p_id"))
    @MapKeyColumn(name = "propertyKey")
    @Column(name = "propertyValue")
    private Map<String, String> properties;

    //getters and setters
} 
```

所以，我的数据库`Table`是`transaction_properties`

```
mysql> desc transaction_properties;
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| p_id          | bigint(20)   | NO   | PRI |         |       |
| propertyValue | varchar(255) | YES  |     | NULL    |       |
| propertyKey   | varchar(255) | NO   | PRI |         |       |
+---------------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec) 
```

现在，我想`Transaction`用键和值搜索实体。

```
 Path<Map<String, String>> propertiesPath = root.get("properties");
    Path<String> propertyKeyPath = propertiesPath.<String> get("propertyKey"); //where m getting error
    Path<String> propertyValuePath = propertyKeyPath.<String> get("propertyValue");
    p = cb.and(p, cb.and(cb.like(propertyKeyPath, "%" + searchTrxnKey + "%"), cb.like(propertyValuePath, "%" + searchTrxnValue + "%"))); 
```

但是我收到`Path<String> propertyKeyPath = propertiesPath.<String> get("propertyKey");`如下错误：

```
[...] threw an unexpected exception: org.springframework.dao.InvalidDataAccessApiUsageException: Illegal attempt to dereference path source [null]; nested exception is java.lang.IllegalArgumentException: Illegal attempt to dereference path source [null] 
```

我通过的参考资料之一是：[Spring Data JPA 教程第四部分：JPA 标准查询](http://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-part-four-jpa-criteria-queries/)，但对我来说没有运气。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T06:47:12.587

解决方案`.join("properties")`比`.get("properties")`.

```
Path<Map<String, String>> propertiesPath = root.join("properties");
predicate = (predicate != null) ? criteriaBuilder.and(predicate, criteriaBuilder.and(propertiesPath.in(searchTrxnKey), propertiesPath.in(searchTrxnValue)))
                                : criteriaBuilder.and(propertiesPath.in(searchTrxnKey), propertiesPath.in(searchTrxnValue)); 
```

更多在[JPA Criteria API - 如何添加 JOIN 子句（尽可能一般的句子）](https://stackoverflow.com/a/3427661/432903)

# css - 在 CSS 样式表中添加指向图像的链接

> ID：14730484
> 
> 赞同：8
> 
> 时间：2013-02-06T13:38:56.133
> 
> 标签：css, hyperlink, stylesheet

我希望在 CSS 样式表中添加指向图像的链接，以便在按下图像时导航到该链接。

图像本身的代码是：

```
 #logo{
    background-image: url(images/logo.png);
    width: 981px;
    height: 180px;
    margin-left: auto;
    margin-right: auto; 
```

要添加什么代码以使其导航到超链接？例如：如果我想让它导航到[http://home.com](http://home.com)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T13:42:34.040

你不能这样做...

通过 css`URL`你放的`background-image`只是为了图像。

通过`HTML`您必须以`href`这种方式添加您的超链接：

```
<a href="http://home.com" id="logo">Your logo</a> 
```

使用`text-indent`和其他一些`css`，您可以调整您的 a 元素以仅显示图像并单击它，您将转到您的链接。

* * *

编辑：

我再次在这里向您展示并解释为什么我的解决方案要好得多：

```
<a href="http://home.com" id="logo">Your logo name</a> 
```

这块`HTML`是**SEO 友好的**，因为您的链接中有一些文本！

如何使用 css 设置样式：

```
#logo {
  background-image: url(images/logo.png);
  display: block;
  margin: 0 auto;
  text-indent: -9999px;
  width: 981px;
  height: 180px;
} 
```

然后，如果您不关心**SEO**，请选择其他答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:42:59.563

您不向样式表添加链接。它们用于描述页面的样式。单击图像时，您将更改标记或添加 JavaScript 以进行导航。

仅基于您的风格，您将拥有：

```
<a href="home.com" id="logo"></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-15T13:48:44.837

你可以做类似的事情

```
<a href="http://home.com"><img src="images/logo.png" alt="" id="logo"></a> 
```

在 HTML 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-06T00:46:21.957

我偶然发现了这个旧列表，正在思考同样的问题。对于同样的问题，我的创可贴是将我的标题文本变成一个链接。然后我更改了颜色并使用 CSS 删除了文本装饰。现在为了使整个标题图片成为链接，我扩展了锚标记的填充，直到它接近标题图片的边缘......这令我满意，我想我会分享。

# css - 边框半径 css 属性在 Windows Live 客户端中不起作用

> ID：14730490
> 
> 赞同：0
> 
> 时间：2013-02-06T13:39:12.403
> 
> 标签：css, html-email

实际上，我正在创建一个 HTML 电子邮件模板，一切正常，但“ **border-radius** ”在 Windows Live 客户端中不起作用，尽管它也适用于浏览器和 gmail。

```
<div style='width: 700px; font-family: Arial, Helvetica, Geneva,   
        sans-serif; font-size: 12px;border: 1px Solid #094375;border-radius:
        6px 6px 6px 6px; -moz-border-radius: 6px 6px 6px 6px;   
        -webkit-border-radius: 6px 6px 6px 6px;'> 
</div> 
```

在上面的 div 中定义了边界半径 css 属性，但它在 windows live 客户端中不起作用，如果有人有解决方案，请分享（想给 div 圆角），在此先感谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:23:56.753

边框半径是电子邮件中未广泛支持的众多 CSS 属性之一。[这](http://www.campaignmonitor.com/css/)是一些 CSS 电子邮件支持参考。

# java - 学校项目的Java代码结构

> ID：14730494
> 
> 赞同：0
> 
> 时间：2013-02-06T13:39:25.357
> 
> 标签：java

我自己和我的 Java 班目前的 3-4 名学生正在做一个项目，但我们都没有就完成特定部分的方式达成一致。

对于上下文，这是这部分的说明：

*   应为整数的卡 ID
*   应该是文本的名称
*   一组 8 个权限，这 8 个权限中的每一个将代表一扇门。这可以存储为布尔值、整数或您喜欢的任何内容。
*   您还必须使以下方法可用：

    > `public boolean checkDoorPermissions(int doorNumber)`
    > 
    > 行为：此方法将采用从 0 到 7 的整数，表示 8 个门之一。如果这张卡的所有者（这个对象）应该打开编号为 doorNumber 的门，它将返回 true。否则，该方法应返回 false。

我们对如何处理权限存在分歧。我建议了一个数组列表，因为之后在方法中访问它可能更容易。其他人建议设置 8`boolean`个权限，或 8`int`秒（例如`private int doorNumber8;`）。

非常感谢任何帮助/指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:44:59.937

我不会给出代码，因为这看起来像是一个作业，但你可以创建一个`Door`包含`String name`、`int id`和的类`boolean permission`。

然后，创建 8 `Door`s 并将它们存储在一个数组中。

这里有一些东西可以帮助你开始：

```
class Door {
    boolean permission;
    String name;
    int id;
    public Door(boolean permission, String name, int id) {
        //initialize your variables here!
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:58:01.103

我将定义一个具有八个可能值的 Door 枚举：DOOR1、DOOR2 等。然后每个人都会有一个“集合”，其中包含这些枚举值中的零到八个。（我说的是集合而不是 ArrayList……看看 EnumSet 类）。

尽量不要太聪明。使用位掩码等可能最初看起来非常令人印象深刻。但是你的代码会令人困惑和不可读，尤其是对于学术任务。记住软件开发的规则之一：保持简单！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:46:20.267

Since there are only eight doors, and the permission is either "yes" or "no", you can simply make an eight bit character string, with `1` representing permission. You could then define

```
DOOR0 = 1;
DOOR1 = 2;
DOOR2 = 4;
DOOR3 = 8; 
```

etc. - and a user's permission would be something like

```
userPermission = DOOR1 + DOOR4 + DOOR7; 
```

Then you test a user's permission with

```
if(userPermission & DOOR5) {
  // permission granted
} 
```

The number 8 in the question just BEGS the use of a byte for storing the data...

And if you need to be able to test to a variable door number `doorNum`, your test becomes

```
if(userPermission & (1 << doorNum) { 
```

which will shift the number `1` to the appropriate location (note - I just re-read the question and realized your doors are numbered base0; I edited the answer accordingly).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:49:11.243

正如您在课堂上发现的那样，这个问题将征求各种答案。就我个人而言，我认为最清晰的方法是使用`java.util.Set`包含可访问门的 id 的 a。

这将导致：

```
public boolean checkDoorPermissions(int doorNumber)
{
  return accessibleDoorNumbers.contains(doorNumber);
} 
```

它很简单，并且允许实现该`checkDoorPermissions`方法的类与不同数量的门一起使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-06T13:48:48.790

定义一个枚举会更具可读性：

```
public Enum Doors {
    DOOR1
    ,DOOR2
    ,DOOR3
    ,DOOR4
    ,DOOR5
    ,DOOR6
    ,DOOR7
    ,DOOR8
} 
```

但是，您可以使用简单的字节数组和屏蔽操作进行管理：

```
byte[] doors = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07}; 
```

然后为了检查设置了哪些权限，您可以执行以下操作：

```
(byte) b & doors[i]; // 1 = 0...7 
```

# c# - thread.sleep 无法正常工作

> ID：14730504
> 
> 赞同：0
> 
> 时间：2013-02-06T13:39:45.003
> 
> 标签：c#, asp.net

我的目的：创建一个图像按钮，一旦点击它，消费者应该等待 4 秒钟，而他正在等待网页顶部的图像应该会自动更改。到目前为止我尝试了什么：

```
protected void Page_Load(object sender, EventArgs e)
{          
}

protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    int counter = 0;
    while (counter < 4)
    {
        counter++;
        Image2.ImageUrl = "../images/" + counter + ".jpg";
        System.Threading.Thread.Sleep(1000);
    }

    Response.Redirect("../Home.aspx");
} 
```

我没有得到与前面提到的相同的后果。任何人都有解决问题的解决方案或新想法？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:44:35.447

您的代码使 Web 应用程序休眠 4 秒，从而有效地将页面服务延迟 4 秒。该页面仅在 ImageButton1_Click 方法完成后提供。

您应该使用 Javascript 来实现您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:49:05.227

您的代码存在的问题：

1.  您正在更改服务器端的图像 URL。在将所有数据提供给客户端之前，这不会显示在客户端中。
2.  四秒延迟发生在服务器端。
3.  您正在重定向到`../Home.aspx`. 这将“破坏”您刚刚所做的 Url 更改。

要解决这些问题：

*   使用 Javascript/JQuery 延迟 4 秒并在客户端更改图像 url。

# wpf - 将组合框选定值绑定到属性

> ID：14730514
> 
> 赞同：2
> 
> 时间：2013-02-06T13:40:00.457
> 
> 标签：wpf, binding, combobox

我有一个**枚举动物**，里面有鱼和猫的值。

```
public ObservableCollection<AnimalsEnum> Animals { get; set; } 
```

我绑定枚举以显示在组合框中。

```
<ComboBox ItemsSource="{Binding Path=Animals }"> 
```

我还有一个名为**AnimalsChanged**的​​ AnimalsEnum 类型的属性

当我从组合框中选择动物时，我想要一个名为**AnimalsChanged**的​​属性来从组合框中获取枚举的值。

我如何从 xaml 做到这一点？任何想法

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:55:52.910

用于`SelectedItem`绑定列表中的实际数据项。`SelectedValue`你可以绑定一个特定的`SelectedItem`属性。它默认绑定两种方式，因此您无需指定：

```
<ComboBox ItemsSource="{Binding Path=Animals }" SelectedItem="{Binding AnimalsChanged}"> 
```

# php - 循环 WordPress 博客文章

> ID：14730516
> 
> 赞同：0
> 
> 时间：2013-02-06T13:40:04.963
> 
> 标签：php, html, wordpress, loops

```
<?php get_header(); ?>
<div class="page-wrap group">

<div class="grid">

  <?php query_posts('showposts=6'); ?>

    <?php if (have_posts()): ?>

  <section class="blog-posts col-2-3 grid-pad">

    <?php while (have_posts()) : the_post(); ?>

      <article class="module" id="post-<?php the_ID(); ?>">

        <h2> <a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a </h2>
        <p><time datetime="2001-05-15 19:00"><?php echo date('l jS F Y')?></p>

        <?php the_excerpt(); ?>

      </article>

      <?php endwhile; ?>

  </section> 
```

这是我的 index.php 代码，我想做的是让我们说 3 篇博文，`<section class="blog-posts col-2-3 grid-pad">`然后再写 3 篇博文`<section class="blog-posts col-2-3 grid-pad">`

那么如何循环发布帖子，以便让它们分布在整个页面中？现在我只能得到它，所以它首先显示它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:30:15.750

只需使用一个计数器变量：

```
<?php if (have_posts()): ?>

  <section>

  <?php $i = 0; while (have_posts()) : the_post(); ?>

      <article>
      ...
      <article>

  <?php if(++$i === 3): // close previous and open new one ?>
  </section>

  <section>
  <?php endif; ?>      

  <?php endwhile; ?>
  </section>    

<?php endif; ?> 
```

或者，您可以使用[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query)类、`posts_per_page=3`参数和`offset=3`第二个查询的参数执行两个查询。

* * *

要更改页面上显示的帖子数量，请将其添加到您的函数文件中：

```
add_action('pre_get_posts', function($query){

  if(is_admin() || !$query->is_main_query())
    return;

  if(is_home()) // or whatever page you want the limit applied to
    $query->set('posts_per_page', 6);

}); 
```

# android - 使用 Titanium 的 Android 模拟器未打开新窗口

> ID：14730517
> 
> 赞同：0
> 
> 时间：2013-02-06T13:40:07.853
> 
> 标签：android, mobile, android-emulator, titanium, titanium-mobile

您好我正在尝试使用 Titanium Studio 构建一个简单的移动应用程序并面临问题，以从 Android 模拟器中的表视图列表项打开新窗口。这是我在 js 文件中使用的代码。

应用程序.js

```
 var tabGroup = Titanium.UI.createTabGroup();

var win = Titanium.UI.createWindow({  
    backgroundColor: "#FFF"
});
var tab = Titanium.UI.createTab({  
    icon:'KS_nav_ui.png',
    title:'REGISTRY',
    window:win
});

var regItems = [ 
    {title: "List Item One", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true},
    {title: "List Item Two", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true},
    {title: "List Item Three", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true}
]

var regItemList = Titanium.UI.createTableView({
    data: regItems
});

regItemList.addEventListener('click', function(e){
     var win2 = Titanium.UI.createWindow({ 
        url: "newWin.js",
        title: e.rowData.title,
        backgroundColor: "#273691"
     }); 

      win2.open();
//    tab.open(win2, {animated: true}); This is also not working

});

win.add(regItemList);

// open tab group
tabGroup.open(); 
```

* * *

新的Win.js

```
var newWinCreate = Titanium.UI.currentWindow;

var labelName = Titanium.UI.createLabel({
    title: "First Name",
    font: {fontSize: 18},
    top: 10,
    left: 20,
    color: "#fff",
    textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
});

newWinCreate .add(labelName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:12:34.787

你犯了一个简单的错误。您没有将选项卡添加到 tabGroup。只需将以下行添加到您的代码中：

```
tabGroup.addTab(tab); 
```

而已。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:35:56.663

我对代码进行了一些更改，现在工作正常

应用程序.js

```
var tabGroup = Titanium.UI.createTabGroup();
a
var win = Titanium.UI.createWindow({  
    backgroundColor: "#FFF"
});
var tab = Titanium.UI.createTab({  
    icon:'KS_nav_ui.png',
    title:'REGISTRY',
    window:win
});

var regItems = [ 
    {title: "List Item One", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true},
    {title: "List Item Two", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true},
    {title: "List Item Three", font:{fontSize: 25, fontWeight: 'bold'}, color: "#45165C", leftImage:"images/regImg.gif", className: "tableRow", hasDetail: true}
]

var regItemList = Titanium.UI.createTableView({
    data: regItems
});

regItemList.addEventListener('click', function(e){
     var win2 = Titanium.UI.createWindow({ 
    url: "newWin.js",
    title: e.rowData.title,
    backgroundColor: "#273691"
 }); 

  win2.open();
//    tab.open(win2, {animated: true}); This is also not working

});

win.add(regItemList);

tabGroup.addTab(tab);

// open tab group
tabGroup.open(); 
```

新的Win.js

```
var newWinCreate = Titanium.UI.currentWindow;

var labelName = Titanium.UI.createLabel({
    text: "First Name",
    font: {fontSize: 18},
    top: 10,
    left: 20,
    color: "#fff",
    textAlign: Ti.UI.TEXT_ALIGNMENT_CENTER
});

newWinCreate.add(labelName); 
```

# c++ - 悬空引用和未定义行为

> ID：14730534
> 
> 赞同：14
> 
> 时间：2013-02-06T13:41:22.063
> 
> 标签：c++, reference, undefined-behavior, language-lawyer

假设一个悬空的参考`x`。只写是未定义的行为吗

```
&x; 
```

甚至

```
x; 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:19:35.777

首先，非常有趣的问题。

我会说这是未定义的行为，假设“悬空引用”意味着“被引用对象的生命周期已经结束，并且对象占用的存储空间*已*被重用或释放。” 我的推理基于以下标准裁决：

3.8 §3：

> 本国际标准中赋予对象的属性仅在其生命周期内适用于给定对象。[注意：特别是，在对象的生命周期开始之前和其生命周期结束之后，对对象的使用有很大的限制，如下所述...]

所有“如下所述”的情况均指

> 在对象的生命周期开始之前但在对象将占用的存储空间分配之后38，或者在对象的生命周期结束之后并且在对象占用的存储空间被重用或释放之前

1.3.24： **未定义的行为**

> 本国际标准对其没有要求的行为 [注：当本国际标准省略任何明确的行为定义或程序使用错误构造或错误数据时，可能会出现未定义的行为。...]

我将以下思路应用于上述引文：

1.  如果标准没有描述某种情况的行为，则行为是未定义的。
2.  该标准仅描述对象在其生命周期内的行为，以及接近其生命周期开始/结束的一些特殊情况。这些都不适用于我们的悬空参考。
3.  因此，以任何方式使用 danling 引用都没有标准规定的行为，因此行为是未定义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:19:20.300

假设`x`使用有效对象进行初始化，然后将其销毁，则适用 §3.8/6：

> 类似地，在对象的生命周期开始之前但在对象将占用的存储空间分配之后，或者在对象的生命周期结束之后并且在对象占用的存储空间被重用或释放之前，引用的任何泛左值可以使用原始对象，但只能以有限的方式使用。对于正在建造或破坏的物体，见 12.7。否则，这样的glvalue指的是分配的存储（3.7.4.2），并且**使用不依赖于其值的glvalue的属性是明确定义的。**如果出现以下情况，该程序具有未定义的行为：
> 
> — 左值到右值的转换（4.1）应用于这样的左值，
> 
> — glvalue 用于访问非静态数据成员或调用对象的非静态成员函数，或
> 
> — glvalue 绑定到对虚拟基类 (8.5.3) 的引用，或
> 
> — glvalue 用作 dynamic_cast (5.2.7) 的操作数或 typeid 的操作数。

因此，简单地获取地址是明确定义的，并且（参考相邻的段落）甚至可以有效地用于创建一个新对象来代替旧对象。

至于*不*取地址，只写`x`，那真的什么都做不了，它是 的适当子表达式`&x`。所以也没关系。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T13:49:43.060

使用无效对象（引用、指针等）未定义行为的原因是左值到右值的转换（第 4.1 节）：

> 如果泛左值引用的对象不是 T 类型的对象，也不是从 T 派生的类型的对象，或者如果该对象未初始化，则需要此转换的程序具有未定义的行为。

假设我们没有重载`operator&`，一元运算`&`符将左值作为其操作数，因此不会发生转换。只有一个标识符，如 in`x;`也不需要转换。当引用被用作表达式中的操作数时，您只会得到未定义的行为，该表达式期望该操作数是右值 - 大多数运算符都是这种情况。关键是，做`&x`实际上并不需要访问`x`. 左值到右值的转换发生在那些需要访问其值的运算符中。

我相信您的代码定义明确。

当`operator&`被重载时，表达式`&x`被转换为函数调用并且不遵守内置运算符的规则 - 相反它遵循函数调用的规则。对于`&x`，转换为函数调用的结果是`x.operator&()`或`operator&(x)`。在第一种情况下，`x`当使用类成员访问运算符时，将发生左值到右值的转换。在第二种情况下，参数`operator&`将被复制初始化`x`（如`T arg = x`），其行为取决于参数的类型。例如，在参数是左值引用的情况下，没有未定义的行为，因为不会发生左值到右值的转换。

因此，如果`operator&`为 的类型重载`x`，则代码可能定义明确，也可能不明确，具体取决于`operator&`函数的调用。

您可能会争辩说，一元运算`&`符依赖于至少有一些您拥有地址的有效存储区域：

> 否则，如果表达式的类型为`T`，则结果的类型为“pointer to `T`”，并且是一个纯右值，即指定对象的地址

一个对象被定义为一个存储区域。在所引用的对象被销毁后，该存储区域不再存在。

我更愿意相信，如果实际访问了无效对象，它只会导致未定义的行为。引用仍然认为它指的是某个对象，即使它不存在，它也可以愉快地给出它的地址。但是，这似乎是标准中指定不明确的部分。

* * *

### 在旁边

作为未定义行为的示例，请考虑`x + x`. 现在我们遇到了标准中另一个指定不明确的部分。的操作数的值类别`+`未指定。通常从 §5/8 中推断，如果未指定，则它需要一个纯右值：

> 每当一个泛左值表达式作为操作数的操作数出现时，该操作数需要一个纯右值，左值到右值 (4.1)、数组到指针 (4.2) 或函数到指针 (4.3) 标准转换是应用于将表达式转换为纯右值。

现在因为`x`是左值，所以需要左值到右值的转换，我们得到未定义的行为。这是有道理的，因为加法需要访问 的值，`x`因此它可以计算出结果。

# tridion - Tridion 2011 核心服务 - 错误更新组件

> ID：14730545
> 
> 赞同：3
> 
> 时间：2013-02-06T13:42:08.700
> 
> 标签：tridion, tridion-2011

我正在尝试使用 Tridion Core Services 更新组件。这就是我的方法的样子：

```
public ComponentData Update(ComponentData component)
        {            
            return _session.Client.Update(component, new ReadOptions()) as ComponentData;
        } 
```

但是，当我运行它时，我收到以下错误：

无法签出共享项目

我尝试在更新之前签入组件，但再次遇到相同的错误。你能告诉我在这种情况下我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:12:19.853

您正在尝试更新子出版物中的共享项目。这是不允许的。

如果您的意图是只修改当前出版物中的项目以及其中的所有子出版物，则应首先调用 Localize。

如果您打算在任何地方更新组件，则应使用创建项目的父出版物中的组件 URI 版本。

# qt - Windows XP 中的 Qt Quick 2.0

> ID：14730549
> 
> 赞同：0
> 
> 时间：2013-02-06T13:42:31.670
> 
> 标签：qt, qml, qt5, qtquick2

我为 Windows 32 位安装了 Qt 5.0.1 (MinGW 4.7, 823 MB)

然后我创建了简单的 Quick 2 应用程序并编译了它。程序在干净的 Windows 7、Windows 8 上运行。但程序不能在 Windows XP 上运行。我有这个错误：

**Точка входа в процедуру _vsnprintf_s не найдена в библиотеке DLL msvcrt.dll**

翻译：**在库 DLL msvcrt.dll 中找不到过程入口点 _vsnprintf_s**

错误

该怎么办？程序运行在哪里和哪些库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:04:07.570

[我在已知问题列表中](http://qt-project.org/wiki/Qt501KnownIssues)发现了一个类似的错误。

尝试使用 MSVC2010 编译器。

# ruby - 无法在 IRB 中加载“nokogiri”

> ID：14730555
> 
> 赞同：0
> 
> 时间：2013-02-06T13:42:42.187
> 
> 标签：ruby, nokogiri

我已安装`nokogiri`在所需的 Ruby`lib`文件中，如下所示：

```
C:\Ruby193>gem list

*** LOCAL GEMS ***

addressable (2.3.2)
bigdecimal (1.1.0)
builder (3.1.4)
bundler (1.2.3)
childprocess (0.3.6)
domain_name (0.5.7)
ffi (1.3.1 x86-mingw32)
git (1.2.5)
hoe (3.4.1)
httpclient (2.3.2)
io-console (0.3)
jar_wrapper (0.1.2)
jeweler (1.8.4)
json (1.5.4)
libwebsocket (0.1.7.1)
mechanize (2.5.1)
mechanize-downloader (0.0.1)
mime-types (1.19)
mini_magick (3.2.1)
minitest (2.5.1)
multi_json (1.5.0)
net-http-digest_auth (1.2.1)
net-http-persistent (2.8)
nokogiri (1.5.6 x86-mingw32)
ntlm-http (0.1.1)
progressbar (0.12.0)
rake (0.9.2.2)
rautomation (0.7.3)
rdoc (3.9.4)
rubyzip (0.9.9)
s4t-utils (1.0.4)
selenium (0.2.5)
selenium-webdriver (2.27.2)
subexec (0.0.4)
unf (0.0.5)
unf_ext (0.0.5 x86-mingw32)
user-choices (1.1.6.1)
watir-classic (3.4.0)
watir-webdriver (0.6.2)
webrobots (0.0.13)
websocket (1.0.6)
win32-api (1.4.8 x86-mingw32)
win32-process (0.7.1)
win32screenshot (1.0.7)
windows-api (0.4.2)
windows-pr (1.2.2)
xml-simple (1.1.2)
zip (2.0.2) 
```

*现在在下面当我尝试时 `nokogiri`，得到如下错误，而它安装在我的桌面上。*

```
C:\Ruby193>irb
irb(main):001:0> require 'nokogiri'
LoadError: cannot load such file -- nokogiri
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:i
n `require'
        from (irb):1
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):002:0> require 'selenium-webdriver'
=> true
irb(main):003:0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:47:26.737

您是否尝试安装该`mswin32-60`版本而不是那个版本`x86-mingw32`？

```
gem install nokogiri --platform=x86-mswin32-60 
```

**编辑**

或者，尝试更新您的 ruby​​gems 版本`gem update --system`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T02:42:08.707

确保你`require 'rubygems'`之前打电话`require 'nokogiri'`

# java - 从位于 JAR 库中的类中访问文件

> ID：14730556
> 
> 赞同：0
> 
> 时间：2013-02-06T13:42:48.287
> 
> 标签：java, jakarta-ee, web-applications, jar

我有自己的 JAR 库，它位于我的 Java EE 5 WebApp 的类路径中。该 JAR 中的类需要访问 WebApp 资源中的文件。

问题是：

如何从 WebApp 的类路径中的 JAR 库访问 WebApp 内的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:04:59.390

[ServletContext.getRealPath("/WEB-INF/my.txt")](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)给出一个文件。

# websphere - Tridion CWA 2011 二进制文件返回 404 直到刷新

> ID：14730563
> 
> 赞同：7
> 
> 时间：2013-02-06T13:43:01.430
> 
> 标签：websphere, tridion, tridion-2011, tridion-content-delivery

从 CWA 1.5 升级到在 WebSphere 上运行的 CWA 2011 后，我的客户遇到了问题。问题是任何请求的二进制资源都会返回 404。当重新提交请求（即刷新/重新加载页面）时，它们会加载。

我无法访问他们的环境，必须通过第三方获取所有配置文件。我想知道是否有人对导致二进制文件出现这些 404 的原因有任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T15:31:06.867

从 Websphere 6.1 开始，IBM 更改了过滤器的行为，如果您调用的 URL 实际上在服务器上不存在，这些过滤器将不会执行。

这意味着对仍在数据库中的 /somefile.png 的请求将导致（技术上正确）404，但完全不是您对启用 CWA 的 Web 应用程序的期望。

解决方案是让过滤器在没有 servlet 映射的情况下调用请求，您应该能够在 WebSphere 管理控制台中执行以下操作：

1.  单击服务器 -> 服务器类型 -> Websphere 应用程序服务器 -> -> Web 容器设置 -> Web 容器
2.  在其他设置下单击自定义属性
3.  在自定义属性页面上，单击新建，然后输入“com.ibm.ws.webcontainer.invokefilterscompatibility”作为属性名称，输入“true”作为值
4.  保存更新并重新启动服务器

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T13:52:44.180

自从我使用 CWA 已经很久了，但是 IIRC 它会根据请求将二进制文件序列化到磁盘，并将它们缓存起来以备将来使用。听起来这个过程花费的时间太长了，所以你得到一个 404 的第一个二进制请求。我以前在 WebSphere 上听说过这个，你确定旧的 CWA 也没有发生这种情况吗？

如果问题仍然存在，我建议联系 SDL 客户支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T18:46:06.150

在**cd_cwa_conf.xml**文件中，还可以添加如下参数：

```
<configuration>
... 
   <!-- Number of seconds to wait for the default Servlet to pick up changes on the file-system -->
    <file-synchronization delay="..." />
...
</configuration> 
```

正如克里斯所说，第一次请求二进制文件时，文件被序列化并缓存在磁盘上。如果该过程太长，则应用服务器将返回 404。

使用此参数，系统会在访问文件之前等待几秒钟（即指定的值）。

我们在 Tomcat 服务器上遇到了同样的问题，这已经修复了 pb。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T23:28:14.310

我认为这个问题到底是关于什么的有点混乱。所以尼克解释说，对二进制文件的第一个请求会导致 404。任何后续请求都会按预期提供二进制文件。因此，Elena 给出的答案并不能真正解决这个问题，尽管她非常正确地说必须在 WebSphere 中进行*该特定设置。*

“仅在第一个请求上获得 404”问题的答案是在每个 URL 模式二进制类型到默认 Servlet 的 web.xml 文件中都有一个显式映射。这在[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_CWA_10/task_C1FECE85AD5E4F0BB3957C4516D7E2AC](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_CWA_10/task_C1FECE85AD5E4F0BB3957C4516D7E2AC)中进行了描述，项目符号 #6：

```
 <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.jpg</url-pattern>
 </servlet-mapping> 
```

文档说明这修复了 JBoss、Tomcat，但我也看到它修复了 WebLogic。我希望它也能修复 WebSphere。请告诉我们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-07T18:43:29.103

对于 WebSphere 7，默认 servlet 称为 FileServlet，因此以下应该可以工作：

```
<servlet>
<servlet-name>FileServlet</servlet-name>
<servlet-class>
com.ibm.ws.webcontainer.servlet.SimpleFileServlet 
</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>FileServlet</servlet-name>
  <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>FileServlet</servlet-name>
  <url-pattern>*.jpg</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>FileServlet</servlet-name>
  <url-pattern>*.js</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>FileServlet</servlet-name>
  <url-pattern>*.gif</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-26T18:28:57.860

如果您使用的是 Tomcat 7（可能是 Tomcat 6 的最新版本），请小心。**web.xml 文件的合并方式存在限制**。

我不知道确切的原因，但是您不能定义到默认 servlet 的多个映射。此 servlet 只能有一个映射条目。

也许与此有关：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=50026](https://issues.apache.org/bugzilla/show_bug.cgi?id=50026)

**顺便说一句，您可以通过重新定义默认映射来绕过此限制。**

例如：以下内容不适用于 Tomcat 7.0.33。所有资源都出现 404 错误。

```
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>/worldwide/binaries/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>/france/binaries/*</url-pattern>
</servlet-mapping> 
```

以下工作完美

```
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>/worldwide/binaries/*</url-pattern>
  <url-pattern>/france/binaries/*</url-pattern>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

希望它有所帮助。

# java - 线程“主”javax.xml.ws.WebServiceException 中的异常：无法访问 WSDL ....(jax-ws)

> ID：14730564
> 
> 赞同：1
> 
> 时间：2013-02-06T13:43:03.323
> 
> 标签：java, web-services, jax-ws

我创建了一个简单的 jax-ws Web 服务并成功部署了它。然后我创建了一个客户端（jax-ws），但是在运行时我收到以下错误：

```
Exception in thread "main" javax.xml.ws.WebServiceException: Failed to access the WSDL  
at: file:./WEB-INF/wsdl/HelloService.wsdl. It failed with:.\WEB-INF\wsdl\HelloService.wsdl 
```

但是，如果我为同一个 wsdl 创建客户端（apache），它就可以工作。请帮忙。

**这是客户端文件。** 导入 java.rmi.RemoteException；

```
public class MainClass {

    public static void main(String[] args) throws RemoteException {

        HelloPortProxy obj = new HelloPortProxy();
        System.out.println(obj.sayhello("Everyone"));
        System.out.println("Count:"+obj.getCheckVal());

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:27:58.337

那么你有什么不清楚的地方？例外：`javax.xml.ws.WebServiceException: Failed to access the WSDL`明确告诉您，您的 Web 服务`WSDL`在此路径中不可访问：`/WEB-INF/wsdl/HelloService.wsdl`.

如果您已经部署了 Web 服务并且可以通过`URL`. 例如：`http://somehost/somepath/YourService?wsdl`比创建这样的`JAX-WS`客户端：

```
try {        
    final String username = "someusername";
    final String password = "somepassword";
    Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(
                    username,
                    password.toCharArray());
        }
    });
    URL url = new URL("");
    QName qname = new QName("http://somehost/somepath/YourService?wsdl", "YourService");
    Service service = Service.create(url, qname);
    YourService proxy = service.getPort(YourService.class);
    Map<String, Object> requestContext = ((BindingProvider) proxy).getRequestContext();
    requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url.toString());
    requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
    requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
} catch (Exception e) {
    //Handle Error.
} 
```

我已经将代码与基本身份验证一起放置，您将来可能需要它。目前，您可以将其删除。

# sql - 如果记录超过 100k，则 Oracle 中的查询不会执行

> ID：14730565
> 
> 赞同：0
> 
> 时间：2013-02-06T13:43:04.097
> 
> 标签：sql, oracle, oracle11g

我正在使用数据库 oracle 11g。我的应用程序在某些特定情况下运行如下查询

```
Select distinct demo.table1.id, demo.table2.status 
FROM demo.table1, demo.table2
WHERE demo.table1.id=demo.table2.id
AND ((demo.table2.userID = '1') or (demo.table2.userID='2')) 
```

如果记录数约为 20-25K，它会给我正确的输出。但是如果记录数超过 50K，查询不会返回任何内容并且应用程序会挂起。

但是，如果我删除“AND”条件；查询给了我想要的输出（即 50K 记录）

我为 MSSQL server 2005 运行了相同的场景，所有上述指定的场景都运行良好。即使有 100K 记录，应用程序也没有挂起。

我不知道这里出了什么问题。是我的查询还是我需要在 oracle 中进行一些配置更改？

请在这里帮助我，因为我是 Oracle 数据库的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:52:10.150

首先，确保您对要加入的任何字段以及在 where 条件中使用的任何字段都有索引。至少看起来像 Table1.id、Table2.Id 和 Table2.userID。

然后我建议使用`INNER JOIN`and`IN`子句将您的查询更改为以下内容：

```
Select DISTINCT t.id, t2.status 
FROM demo.table1 t
   INNER JOIN demo.table2 t2 on t.id=t2.id
WHERE demo.table2.userID IN (1,2) 
```

- 编辑

我不明白为什么你的 userId 字段是一个字符串 - 这可能应该被重构为一个身份/自动增量。但是，您需要将上面的 WHERE 子句调整为 IN ('1','2') 才能工作。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:49:54.090

另外...你可以考虑去掉distinct。它大大降低了性能。我相信这就是您的查询挂起的原因。然后我会用 UNION/UNION ALL 替换 OR - 取决于......这是一些关于如何避免不同的一般示例：

```
-- DISTINCT --
SELECT DISTINCT d.deptno, dname FROM scott.dept D, scott.emp E 
 WHERE D.deptno = E.deptno
/  

-- Same as Distinct but may be faster --
SELECT deptno, dname FROM scott.dept D 
 WHERE EXISTS ( SELECT 'X' FROM scott.emp E WHERE E.deptno = D.deptno)
/ 
```

# c# - Linq2sql 泛型按列和值选择

> ID：14730567
> 
> 赞同：1
> 
> 时间：2013-02-06T13:43:07.490
> 
> 标签：c#, generics, linq-to-sql

我正在使用泛型使用 linq2sql 从数据库中执行一些基本的插入/更新/选择。

我有以下内容，我试图将其转换为接受列名和对象值以根据其进行选择，但我无法让它工作。

```
public static T SelectByID<T>(string id) where T : class
{
    try
    {
        using (DataContext db = new DataContext(CHCGlobal.ConnectionString))
        {
            //get Table of type T
            var table = db.GetTable<T>();

            //get object mappings
            MetaModel modelMap = table.Context.Mapping;

            //get the data members for this type
            ReadOnlyCollection<MetaDataMember> dataMembers = modelMap.GetMetaType(typeof(T)).DataMembers;

            //find primary key
            string pk = (dataMembers.Single<MetaDataMember>(m => m.IsPrimaryKey)).Name;

            //return a single object with the id matching the pk field
            return table.SingleOrDefault<T>(delegate (T t)
            {
                string memberId = t.GetType().GetProperty(pk).GetValue(t, null).ToString();
                return memberId.ToString() == id.ToString();
            });
        }
    }
    catch (Exception)
    {
        throw;
    }
} 
```

这是我试图创建的函数，但我卡在了 select 语句上。

```
public static List<T> SelectByKeyValue<T>(string id, object value) where T : class
{
    try
    {
        using (DataContext db = new DataContext(CHCGlobal.ConnectionString))
        {
            //get Table of type T
            var table = db.GetTable<T>();

            //get object mappings
            MetaModel modelMap = table.Context.Mapping;

            //get the data members for this type
            ReadOnlyCollection<MetaDataMember> dataMembers = modelMap.GetMetaType(typeof(T)).DataMembers;

            //find key
            string pk = (dataMembers.Single<MetaDataMember>(m => m.Name.Equals(id))).Name;

            //NOT WORKING
            return table.Select<T, T>(delegate (T t)
            {
                var memberID = t.GetType().GetProperty(pk).GetValue(t, null);
                return memberID.Equals(value);
            }).ToList<T>();
        }
    }
    catch (Exception)
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:46:23.670

You have to use `Where`, not `Select`.

`Select` transforms N items into N new items, it doesn't filter.
`Where` does that.

```
return table.Where(t => t.GetType().GetProperty(pk).GetValue(t, null)
                         .Equals(value))
            .ToList(); 
```

# templates - 使用 Spring Roo 修改生成的视图的外观，而无需在创建后手动更改每个视图？

> ID：14730568
> 
> 赞同：2
> 
> 时间：2013-02-06T13:43:12.900
> 
> 标签：templates, view, spring-roo

一个简单的问题。如何更改 Spring Roo 生成它的视图的方式，以便我不需要在创建后更改它们？如果我按照[教程](http://static.springsource.org/spring-roo/reference/html/beginning.html)进行操作，它看起来像[这样](http://static.springsource.org/spring-roo/reference/html/images/standardui.png)，但是他们将布局更改为[这个](http://static.springsource.org/spring-roo/reference/html/images/altui.png)。据我了解，他们必须在生成视图后手动更改此设置。如果我希望第二个视图作为所有生成视图的基础而不是第一个视图，该怎么办？我需要修改源代码还是有一些简单的方法来覆盖生成代码？是否可以为不同的项目建立一个基地？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T17:34:36.107

Roo 使用 Tiles（用于模板）和 JSP 标记来处理所有这些内容，并且还具有内置的主题处理功能。我相信披萨店的教程，他们正在使用修改 Tiles 模板和自定义主题的组合。

一旦你修改了默认主题，如果记忆服务只是一些 CSS 放在 WEB-INF 下的一个特殊文件夹中，并修改 Tiles 模板，你拥有 Roo 自动生成的新页面将继承新的外观.

# android - 如何在一个类中处理我的数据库并最终安全地关闭它？

> ID：14730569
> 
> 赞同：1
> 
> 时间：2013-02-06T13:43:30.960
> 
> 标签：android, database, sqlite, cursor

我有一个完成所有数据库访问的类。它包含对 SQLiteDatabase 的引用。大约 30 个函数如下所示：

```
public boolean updateSomething(long a, int b, long c) {
    ContentValues values = new ContentValues();
    values.put(COL_A, a);
    ...
    return database.update(TABLE, values, COL_ID + "=?", new String[]{id}) > 0;
} 
```

许多 StackOverflows 建议这样做：

```
public boolean updateSomething(long a, int b, long c) {
    SQLiteDatabase database = dbHelper.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(COL_A, a);
    ...
    boolean success = database.update(TABLE, values, COL_ID + "=?", new String[]{id}) > 0;
    database.close();
    return success;
} 
```

但我也有精确返回游标的函数，因为我需要一个游标在我的数据库的 10k 行上，并且不能只是将内容复制到数组并关闭数据库。

其他人说在中打开数据库`onResume`并关闭它，`onPause`但这意味着将数据库代码移动到活动或将数据库作为所有这些函数中的参数。然后我又该如何处理与我的活动并行运行的 AsyncTasks 和其他类。

我的方法是在我的主 Activity 中打开数据库并在销毁时关闭它，然后我意识到它可能会被创建多次，所以我计算了实例。然后我意识到它可能会被破坏，而另一个 Activity 依赖于拥有一个数据库，这就是我现在卡住的地方。应用程序没有可用于连接和关闭数据库的 onStart/Stop 回调。

在[Android 中：如何关闭从类返回到活动的游标，](https://stackoverflow.com/questions/10962585/android-how-to-close-a-cursor-that-returns-from-class-to-activity)甚至建议不要费心关闭数据库。这是明智之举吗？我的意思是这就是我开始的方式，LogCat 让我担心并执行上述操作。除了一些日志输出之外，从不关闭数据库的缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:51:44.380

处理所有数据库作业的静态单例数据库访问类怎么样。然后你可以在销毁时（或在适当的时候）调用一个静态方法来关闭连接。？

# sql-server-2008 - SQL Server 2008 R2 - 数据未保存到数据库表

> ID：14730574
> 
> 赞同：1
> 
> 时间：2013-02-06T13:44:02.233
> 
> 标签：sql-server-2008

我突然从我的 ASP.Net 应用程序中遇到了一个问题，其中传递给包含插入语句的存储过程的数据没有被提交到数据库。没有从数据库向 Web 应用程序抛出错误，并且从 Web 应用程序显示数据正在保存到表中。

为了尝试解决它，在插入语句之前放置了一个开始事务，并在最后提交事务，但这没有任何效果。

有谁知道出了什么问题？我才刚刚开始发生，在没有问题和数据被保存之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:46:41.530

发现问题。一列表中的数据类型不匹配。有趣的是，SQL Server 2008 没有抛出任何错误！

# iphone - 本地化情节提要时从正确的包中加载图像

> ID：14730579
> 
> 赞同：8
> 
> 时间：2013-02-06T13:44:29.033
> 
> 标签：iphone, ios, objective-c, xcode, storyboard

我正在尝试为用户添加一个选项，以便从应用程序内部在阿拉伯语和英语之间切换（无需重新设置整个 iPhone 的语言），我设法通过在 AppDelegate 中使用此方法正确地做到了这一点.m 文件：

```
 -(void)switchTolanguage:(NSString *)lang{

    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:lang] forKey:@"AppleLanguages"];
     NSBundle *bnd = [NSBundle bundleWithPath:[[NSBundle mainBundle]pathForResource:lang ofType:@"lproj" ]];
     UIStoryboard *storyBoard;
     storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:bnd];
     UIViewController *initViewController = [storyBoard instantiateInitialViewController];
     self.window.rootViewController = initViewController;
} 
```

我`UIButtons`在应用程序中的一个视图控制器上放置了两个以测试该方法，它运行良好：所有`UILabels`、字符串等......在新加载的（本地化）故事板中以正确选择的语言出现，但有**一个例外**：新加载的故事板不获取（加载）其本地化图像，它获取旧故事板（旧包）的图像，即如果应用程序当前在英文包上运行并且用户点击将语言切换为阿拉伯语的按钮，则应用程序将出现正确的阿拉伯语控件和字符串，但带有英文图像，切换回英文一切都会好的（英文字符串，标签和图像......）

这是我的故事板本地化的方式：

![在此处输入图像描述](../Images/cbdef96afa444f8d1ec165eef1c9a883.png)

以下是每个图像的本地化方式：

![在此处输入图像描述](../Images/156b795613eee7969b38eb3032852942.png)

当用户切换应用程序语言时，如何加载正确的捆绑图像？

**更新：**
[这是我的意思的示例项目的链接](http://dl.dropbox.com/u/57066689/project38.zip)，运行示例，您会注意到当您从应用程序内部更改语言时，您会注意到图像不可更改......您还会注意到本地化的故事板不会在其设计编辑器中加载正确的图像......

**PS**不要添加评论为什么我使用这种场景来切换语言，因为这是客户要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T01:46:32.747

我有同样的问题:(..什么对我有用（在这种情况下切换语言）..

你有2种可能..

1）如果要更改storyboard（热更改），则必须修改每个Storyboard中的所有Outlets。在情节提要中选择所需的图像（**具有不同名称**）、标签等。对我来说，使用本地化图像（相同名称）-仅在重新启动应用程序后才有效。对于相同的 img_name，我尝试...从特定的lproj文件夹（languageBundle）“调用”特定图像..但它在从AppDelegate更改情节提要时不起作用..

2）你只能有一个故事板......并且只更改标签，图像等......（根据Localizable.strings），链接这个...... [https://stackoverflow.com/a/12149553/1702413](https://stackoverflow.com/a/12149553/1702413)，您必须为图像使用不同的文件名（用于“热换”）

不知道是不是bug……或者是什么……

**UPD**

你有一个小项目[https://dl.dropbox.com/u/19438780/test5%20copy2.zip](https://dl.dropbox.com/u/19438780/test5%20copy2.zip)两者都有..

如果您正在更改情节提要（像您一样），您将拥有相同的 languageBundle 路径，直到您重新启动应用程序。所以..你必须在你的故事板中做改变..

对于第二个..您可以从特定语言包（lproj文件夹）更改/召回网点..

对于 1) .. 我找到了一个“技巧”来覆盖 languageBundle 直到重新启动：

```
-(id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        NSArray* languages = [[NSUserDefaults standardUserDefaults]      objectForKey:@"AppleLanguages"];
        Lang2 = [languages objectAtIndex:0]; //NSString
    }
    return self;
} 
```

并初始化奥特莱斯：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:YES];

      NSString *path;
   if([Lang2 isEqualToString: @"ro"])
    {
        path = [[NSBundle mainBundle] pathForResource:@"ro" ofType:@"lproj"];
        NSLog(@"enc ro");
   }
    else{
        path = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
        NSLog(@"enc en");
    }

    NSBundle* languageBundle = [NSBundle bundleWithPath:path];
    //find and return the desired string
    self.label.text=[languageBundle localizedStringForKey:@"kLabelText" value:@"" table:nil];
    self.img.image = [UIImage imageNamed:[languageBundle localizedStringForKey:@"myImage" value:@"" table:nil]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:41:30.947

您必须重新加载所有包含多语言文本的视图，这就像视图在控制器中引用了对象一样无法完成，那么结果是未知的，并且很可能会崩溃。

一种正确且有效的方法是为每种语言提供一个字典，您可以根据选择的语言进行切换。以这种方式绘制所有静态文本，您可以在语言更改时轻松将其绘制回来。在语言更改时向控制器发布通知以重绘视图。对于图像，您可以进行类似的绘制或参考可以更改的图像。

您可以为图像做的一件事是拥有一个自定义图像视图类，该类还观察语言更改通知并自动加载适当的图像。你可以为标签做同样的事情。

如果您需要示例，我可以为您编写代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T20:33:26.807

```
NSBundle *bundle = [LocalizationSystem sharedBundle];  //this get your current bundle

NSString *imgPath = [bundle pathForResource:@"btn-Image" ofType:@"png" inDirectory:nil];
[self.btnTest setImage:[UIImage imageWithContentsOfFile:imgPath] forState:UIControlStateNormal]; 
```

# blackberry - 生成引用两个 cod 文件的 alx 文件

> ID：14730580
> 
> 赞同：2
> 
> 时间：2013-02-06T13:44:33.060
> 
> 标签：blackberry, java-me

我有一个接收推送通知的应用程序，它在后台应用程序中注册推送通知。后台应用程序被配置为备用入口点。

所以总的来说我有两个应用程序，我想创建一个可以引用这两个应用程序的 alx 文件。我希望我部署的 ALX 在后台向我的服务器注册推送通知，当我触摸应用程序图标时，它应该启动正常的 UI 功能。

我正在使用 BlackBerry jde 进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:31:27.420

从[这个](https://stackoverflow.com/questions/14730580/generate-alx-file-that-refer-to-two-cod-files#comment20609060_14730580)评论来看，您的问题似乎与权限有关，而不是捆绑。检查这些链接以了解如何在执行任何操作之前调用权限请求。

*   [API 参考 - ApplicationPermissions 类](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/applicationcontrol/ApplicationPermissions.html)
*   [如何 - 使用其他也请求权限的应用程序调用权限请求](http://supportforums.blackberry.com/t5/Java-Development/How-to-Invoke-a-Permissions-request-with-other-applications-also/ta-p/652397)

第一个链接也有一些示例代码。

# actionscript-3 - Flex : 在每个状态下更改启用/禁用按钮的样式

> ID：14730587
> 
> 赞同：2
> 
> 时间：2013-02-06T13:44:46.660
> 
> 标签：actionscript-3, apache-flex, flash-builder

我有一个包含某些州的特定按钮。我必须在这些州内禁用或启用它。

但这不是问题。实际上问题是：我有 2 个不同的样式类，我想在活动状态内将它们中的每一个分配给按钮的启用或禁用。

所以我必须在活动状态下检查按钮是否启用，将 [例如] *.red*样式类分配给它，如果它被禁用，则分配*.blue*样式类。

我该怎么做？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:53:00.760

您应该能够使用 MXML 中的点表示法来完成此操作：

```
<s:Button styleNanem.state1 ="red" styleName.state2="blue" /> 
```

我很确定这种语法是在 Flex 4 中引入的。

* * *

如果您需要在启用属性更改时更改按钮的状态，您可以在一个函数中循环它：

```
protected function changeButtonState(enabledValue:Boolean, styleName:String):void{
 this.button.enabled = enabledvalue;
 this.button.styleName = styleName;
} 
```

不用直接设置 enabled 属性，使用上面的方法；您可以根据状态确定 styleName。

* * *

第三次更新以回应对此帖子的评论

Flex Framework 类中的几乎每个属性都会在属性更改时调度 propertyChanged 事件。因此，您可以在按钮上监听 enabledChanged 事件。未设置元数据，因此您必须在 ActionScript 中添加事件侦听器：

```
button.addEventListener('enabledChanged',onEnabledChanged);

protected function onEnabledChanged(event:Event):void{
  if(currentState = 'state1'){
    if(button.enabled){
      button.styleName = 'blue';
    } else {
      button.styleName = 'red';
    }
  } else if (currentState = 'state2'){
    if(button.enabled){
      button.styleName = 'green';
    } else {
      button.styleName = 'orange';
    }

  }
} 
```

# c# - 对象列表上的 XNA 碰撞检测

> ID：14730595
> 
> 赞同：0
> 
> 时间：2013-02-06T13:45:23.113
> 
> 标签：c#, for-loop, foreach, xna, collision-detection

我正在尝试检测敌人对象列表上的碰撞，但它仅适用于最后创建的对象。我都试过了：

```
for (int i = 0; i < enemies.Count; i++)
{
    if (IntersectsPixel(player.rectangle, player.textureData, enemies[i].rectangle, enemies[i].textureData))
    {
        touched = true;
    }
    else
    {
        touched = false;
    }
} 
```

和 ：

```
foreach (Enemy enemy in enemies)
{
    if (IntersectsPixel(player.rectangle, player.textureData, enemy.rectangle, enemy.textureData))
    {
        touched = true;
    }
    else
    {
        touched = false;
    }
} 
```

我将两者都放入 Update 方法中。每隔几秒钟就会创建一次敌人，所以我知道检测有效，但是一旦下一个出现，最后一个就会停止工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T13:48:25.920

你只检查最后一项，你必须打破循环，`IntersectsPixel`当真并处理对象

```
for (int i = 0; i < enemies.Count; i++)
{
    if (IntersectsPixel(player.rectangle, player.textureData, enemies[i].rectangle, enemies[i].textureData))
    {
        touched = true;
        break;
    }
} 
```

或使用 linq 收集所有因此对象：

```
var resTrue = enemies.Where(x=>x.IntersectsPixel(player.rectangle, player.textureData, enemies[i].rectangle, enemies[i].textureData)).ToList();
var resFalse = enemies.Where(x=>!x.IntersectsPixel(player.rectangle, player.textureData, enemies[i].rectangle, enemies[i].textureData)).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:18:40.223

你为什么不实现一个属性`bool Touched`in `class Enemy`？

这样，您可以像这样更改代码：

```
if (/*check for collision*/)
    enemy.Touched = true; 
```

更好的是，而不是`Touched`实现一个方法`OnTouched(/*arguments*/)`，所以你可以这样做：

```
if (/*check for collision*/)
    enemy.OnTouched(/*arguments*/); // Which would perform any and all necessary actions on the touched object 
```

# php - PHP中的ATM机示例

> ID：14730597
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:45:23.923
> 
> 标签：php, division, reminders

我需要编写一个 PHP 脚本来计算除以数字和提醒的时间数。可以说`$amount=9200;`，如果我将其除以**5000** ，那么输出应该是`5000: 1 times`and `Reminder: 4200`。我想我需要使用`$n=$amount%5000;`但我只有提醒而不是否。它分裂的次数。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:48:32.053

这就是众所周知的欧几里得划分： [http ://en.wikipedia.org/wiki/Euclidean_division](http://en.wikipedia.org/wiki/Euclidean_division)

```
$amount = 9200;
$divide = 5000;
$times = floor($amount/$divide);
$reminder = $amount%$divide;

echo "$amount = $times times $divide plus $reminder"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:48:39.747

`%`操作员会给你余数，然后你需要做另一个操作来得到你划分的次数。

```
$times = floor($amount/5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:49:07.833

```
$times = floor($amount / 5000);
$remainder = $amount % 5000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:11:42.887

```
<?php

class  ATM
{
    public function deliver( $note )
    {
        // code to grab that not from the cash boxes...
    }
}

$notes = new SplFixedArray(5);
$notes[0] = 100;
$notes[1] = 50;
$notes[2] = 20;
$notes[3] = 10;
$notes[4] = 5;

$notesKey = 0;

$withdraw = 920;
$allocated = 0;

$deliver = new SplQueue();

// work out biggest notes for remaining value and queue
while($allocated < $withdraw)
{
    $remains  = ($withdraw-$allocated) % $notes[$notesKey];
    $numNotes = (($withdraw-$allocated)-$remains)/$notes[$notesKey];
    for( $i = 0; $i < $numNotes; $i++ )
    {
        $allocated += $notes[$notesKey];
        $deliver->enqueue($notesKey);
    }
    ++$notesKey;
}

$atm = new ATM();
while(!$deliver->isempty())
{
     $atm->deliver($notes[$deliver->dequeue()]);
}
?> 
```

像这样的东西应该可以解决问题......

# html - 放入时的 URL 更改

> ID：14730600
> 
> 赞同：0
> 
> 时间：2013-02-06T13:45:36.150
> 
> 标签：html, iframe

I am trying to use an iframe, and for some reason the URL I'm putting in is changing to this really odd version.

This is the URL in my source:

```
<iframe width="962" height="830" src="http://www.domain.com/fdic_edie_the_estimator.aspx#action=resize|value=523px|msg_id=3"></iframe> 
```

And this is what I get afterwards:

```
<iframe id="edieframe" scrolling="no" frameborder="0" name="edieframe" border="0" marginheight="0" marginwidth="0" style="width: 625px; height: 523px; border: medium none;" src="http://www2.fdic.gov/EDIE-WL/intro.html#id=57861-3|origin=http%3A%2F%2Fwww.domain.com%2Ffdic_edie_the_estimator.aspx%23action%3Dresize%7Cvalue%3D523px%7Cmsg_id%3D3"> 
```

Is there some rule on the site that I'm missing? Is there an iframe in an iframe?

The header for the page comes up, but none of the content.

Let me know if you need more information.

# google-app-engine - 如何启用 Objectify XA 事务？

> ID：14730601
> 
> 赞同：3
> 
> 时间：2013-02-06T13:45:55.927
> 
> 标签：google-app-engine, transactions, objectify

我正在实现相同类型实体之间的友谊功能`Profile`。此实体类型是根（非父）实体。Profile 有一个`Set<Ref<Profile>>`名为`friends`getter的字段`getFriends()`。

这里的代码：

```
public boolean makeFriends(final Profile profile1, final Profile profile2) {
    final Ref<Profile> profileRef1 = Ref.create(profile1);
    final Ref<Profile> profileRef2 = Ref.create(profile2);

    boolean result = false;

    // test to avoid useless transaction
    if (!profile1.getFriends().contains(profileRef2) && !profile2.getFriends().contains(profileRef1)) {
        // add to friends (Set<Ref<Profile>>) the Ref of each other
        result = ofy().transact(new Work<Boolean>() {
            @Override
            public Boolean run() {
                profile1.getFriends().add(profileRef2);
                profile2.getFriends().add(profileRef1);
                ofy().save().entities(profile1, profile2).now();
                return true;
            }
        });

    }
    return result;
} 
```

这段代码给了我一个：

```
java.lang.IllegalArgumentException: cross-group transaction need to be explicitly specified, see TransactionOptions.Builder.withXG 
```

即使 Objectify 文档说：

> Objectify 不需要特殊标志来启用跨组事务。如果您在一个事务中访问多个实体组，则该事务为 XG 事务。如果您只访问一个，则不是。5 个 EG 的标准限制适用于所有交易。

那么，为什么我的交易失败了？

我的代码应该涉及两个实体组（每个一个`Profile`），所以在 5 个限制之后。查看`TransactionOptions.Builder.withXG`文档，我应该`TransactionOptions.Builder.withXG(true);`在之前调用。此方法返回一个`TransactionOptions`但我不知道传递它的方法！

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T15:25:45.080

如果环境支持，Objectify 总是打开 XG 事务。

最有可能的是，您正在运行一个未启用 HRD 的测试用例。您必须在 LocalDatastoreServiceTestConfig 中明确执行此操作；检查本地单元测试文档。如果您在开发实例中收到此消息，请确保选中 eclipse 项目首选项中的“使用 HRD”复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T17:34:03.827

确保使用 VM 标志在本地 AppEngine 中激活 HRD 进行测试：

```
-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=1 
```

# c# - 如何为 WPF 数据绑定行项目（形状）设置动画

> ID：14730610
> 
> 赞同：1
> 
> 时间：2013-02-06T13:46:09.397
> 
> 标签：c#, wpf, mvvm

我正在使用 MVVM，绑定到`ObservableCollection<Shape>`(DrawingInstructions) 并希望`Line`为添加的形状设置动画。

各条线应以`DoubleAnimation`某种方式从 (X1,Y1) 到 (X2,Y2) 绘制。

我已经尝试过以下变体，但它不起作用。

```
<ItemsControl ItemsSource="{Binding Path=DrawingInstructions}">
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate >
        <Canvas>
            :
        </Canvas>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel>
<ItemsControl.Triggers>
    <EventTrigger RoutedEvent="Binding.TargetUpdated">
        <BeginStoryboard>
            <Storyboard >
                <DoubleAnimation Duration="0:0:2" Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="Position" From="{Binding Path=X1}" To="{Binding Path=X2}"/>
                <DoubleAnimation Duration="0:0:2" Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="Position" From="{Binding Path=Y1}" To="{Binding Path=Y2}"/>
            </Storyboard>
        </BeginStoryboard>                  
    </EventTrigger>
</ItemsControl.Triggers> 
```

Viewmodel 包含命名要添加到绘图指令的 Line 的代码。

```
var line = new Line
{
    X1 = currentSituation.Position.X,
    Y1 = currentSituation.Position.Y,
    X2 = newSituation.Position.X,
    Y2 = newSituation.Position.Y,
    Name = "CurrentLine",
    Stroke = brush,
    StrokeThickness = 2
};
drawingInstructions.Add(line); 
```

**更新：**

@Nico 建议的解决方案有效——引入一个“模型”类，表示一个with `Line`、`X1`、`X2`和properties 。数据绑定到使用动画中的各个属性：`Y1``Y2``TimeOffset``ObservableCollection<MyModelClass>`

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <Line Name="CurrentLine" X1="{Binding X1}" Y1="{Binding Y1}" X2="{Binding X1}" Y2="{Binding Y1}" Stroke="Black" StrokeThickness="2">
            <Line.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <BeginStoryboard>
                        <Storyboard >
                            <DoubleAnimation Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="X2" BeginTime="{Binding Path=TimeOffset}" From="{Binding Path=X1}" To="{Binding Path=X2}"/>
                            <DoubleAnimation Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="Y2" BeginTime="{Binding Path=TimeOffset}" From="{Binding Path=Y1}" To="{Binding Path=Y2}"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Line.Triggers>
        </Line>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:05:39.460

首先，您不能将 ItemsControl 绑定到 Lines 集合并将它们显示为线条。相反，您应该创建一个具有必要属性的模型类。否则你会得到一个 WPF 错误。我使用这些类进行测试：

```
public class VM
{
    public ObservableCollection<DrawingInstruction> DrawingInstructions { get; set; }
}

public class DrawingInstruction
{
    public double X1 { get; set; }
    public double X2 { get; set; }
    public double Y1 { get; set; }
    public double Y2 { get; set; }
} 
```

然后，如前所述，您应该在动画中定位 X2 和 Y2 属性。这是对我有用的 XAML：

```
<ItemsControl ItemsSource="{Binding DrawingInstructions}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate >
            <Canvas/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Line Name="CurrentLine" X1="{Binding X1}" Y1="{Binding Y1}" Stroke="Black" StrokeThickness="2">
                <Line.Triggers>
                    <EventTrigger RoutedEvent="Loaded">
                        <BeginStoryboard>
                            <Storyboard >
                                <DoubleAnimation Duration="0:0:2" Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="X2" From="{Binding Path=X1}" To="{Binding Path=X2}"/>
                                <DoubleAnimation Duration="0:0:2" Storyboard.TargetName="CurrentLine" Storyboard.TargetProperty="Y2" From="{Binding Path=Y1}" To="{Binding Path=Y2}"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Line.Triggers>
            </Line>
        </DataTemplate>
    </ItemsControl.ItemTemplate>            
</ItemsControl> 
```

加载控件后动画立即开始。我希望那是你的意图。因为每个项目都有自己的动画，所以您应该将动画添加到 ItemTemplate。

# responsive-design - Zurb Foundation: change the columns number for each breakpoint

> ID：14730612
> 
> 赞同：0
> 
> 时间：2013-02-06T13:46:12.700
> 
> 标签：responsive-design, breakpoints, grid-layout, zurb-foundation

I want to create an additional breakpoint with a different behavior for columns for mobile, tablet and dektop.
This is what I'm looking to realize:

**Desktop**:

<----ELEMENT 1----><----ELEMENT 2----><-----SIDEBAR----->

**Tablet**:

<----ELEMENT 1----><-----SIDEBAR----->
<----ELEMENT 2---->

**Mobile**:

<----ELEMENT 1---->
<----ELEMENT 2---->
<-----SIDEBAR----->

I've tried to use the scss function used to add the mobile-n style and switch from 12 columns to 9 columns in the tablet version, but I think I miss something.

```
$tabletTotalColumns: 9;

/* Tablet 4-column Grid */
@for $i from 1 through $tabletTotalColumns {
  .row {
    .tablet-#{convert-number-to-word($i)} { width: gridCalc($i, $tabletTotalColumns) !important; float: $defaultFloat; padding: 0 ($columnGutter/2);
      &:last-child { float: $defaultOpposite; }
      &.end { float: $defaultFloat; }
    }
    &.collapse {
      .tablet-#{convert-number-to-word($i)} { padding: 0; }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:12:49.943

这个问题与我之前回答过的问题非常相似：[zurb Foundation Trouble ordering mobile and stacking cause form input to be unclickable](https://stackoverflow.com/questions/13640954/zurb-foundation-trouble-ordering-mobile-and-stacking-causes-form-input-to-be-unc)

由于您正在无序折叠列，因此您需要使用推拉类来改变行为。示例（如上所示）没有使用 sass，但它会让您了解需要使用或扩展哪些类来完成布局。

# objective-c - CFStreamCreateBoundPair 正在将 4kb 数据写入流，流将解析包含 xml 起始节点且不包含结束节点的数据

> ID：14730613
> 
> 赞同：2
> 
> 时间：2013-02-06T13:46:13.997
> 
> 标签：objective-c, stream, nsoutputstream

CFStreamCreateBoundPair 正在将 4kb 数据写入流，流将解析包含 xml 起始节点且不包含结束节点的数据。如何编写代码和管理代码，以便我们将正确的 xml 数据写入 nsoutputstream。

CFStreamCreateBoundPair(NULL, (CFReadStreamRef *)&iStream, (CFWriteStreamRef *)&oStream,4096);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:02:45.683

绑定流对的工作方式是，您可以将块写入写入流，而其他内容可以从读取流中读取块。您已`transferBufferSize`在此处设置为 4096。这表明数据将以 4096 字节 (4K) 的块从写入流移动到读取流。如果您的源数据大于 4K 但长度小于 8K，那就可以解释为什么您只得到它的前 4K。例如，如果您的数据长 6K，那么前 4K 将被发送到读取流，然后下一个 2K 将排队，但我的理解是它会在缓冲区中等待，直到发生以下两种情况之一：

1.  足够的数据到达完成第二个 4K 块。
2.  写入流已关闭。

因此，如果 6K 是您要写入写入流的全部内容，那么您需要关闭写入流，`CFWriteStreamClose(oStream);`以便将最后的 2K 发送到读取流。否则，我的期望是它会永远坐在那里。

# c# - MS GP 网络服务

> ID：14730617
> 
> 赞同：0
> 
> 时间：2013-02-06T13:46:26.400
> 
> 标签：c#, .net, web-services

我的任务是创建一个 Web 服务，用于监控动态 GP 数据库中的记录创建。提出的技术是 MS GP（大平原）。我对这项技术非常陌生，并且在我的研究道路上的某个地方我缺少入门信息（我是一个经验丰富的 C# WinForms 开发人员）。我已经下载并安装了 MS Dynamics GP SDK，但是当我在 Visual Studio 中创建 Web 服务时，我看不到对 Visual Studio 中任何 MS Dynamics 库的引用……我在网上找不到任何示例，我从哪里开始？

我对监控 GP 数据库中的事件 [Created] 特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:52:32.340

如果您想与 GP 数据库交谈，我强烈推荐 EConnect 培训文档。这将包含您要查找的 DLL，以引用 GP 中的内容。查看[MSDN](http://msdn.microsoft.com/en-us/library/aa973822.aspx)了解更多信息。

# android - Android: Insert the data into the local db only once when app launch

> ID：14730619
> 
> 赞同：1
> 
> 时间：2013-02-06T13:46:29.747
> 
> 标签：android, sqlite, android-sqlite

I have two queries:

1.  I want to insert the data from the web services into the local SQLite DB. I want to insert this data only once then the next time it will not loaded from the web services. I have tried using Static variable but that didn't worked.

    static int UpdateOneTime=0;

    if (UpdateOneTime==0) {

    getData();

    UpdateOneTime++;

    }

2.  If I want to reload the data again means when app start every time it will get the data from the server and insert into the DB by just deleting the previous data in the table. I have tried by just calling the `onUpgrade(SqliteDatabase db, int oldversion,int newversion);` But it didn't worked. So how to solve these two issues. Suggest me something.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:50:47.503

不要在静态变量中保留插入\未插入的值。每次应用程序启动时的值都会有默认值。第一次插入数据后，您可以在首选项中保存一些值，然后在每次应用启动时检查它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:50:57.423

对于 1.，您应该 @override`onCreate`将创建您的数据库的函数，然后您可以在那里执行一些查询。只有当您请求数据库并且设备注意到数据库尚不存在时，才会调用此函数。

第 2 个。如果我记得的话，您不必手动调用它，而是在升级数据库版本时调用它。这是通过`SQLiteOpenHelper`类的构造来管理的。

注意：`onCreate`和`onUpgrade`都是在创建数据库和升级数据库结构时调用的函数，而不是数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:19:25.840

对于第一点：您可以按照 Marco 的回答。

但是如果我是你，我会创建一个配置表，它的默认值是一个标志，让我们让它等于 false。在活动的 oncreate() 方法中，如果它等于 false，我将查询该值，然后我永远不会从 WS 加载该数据。如果它等于真，那么这意味着我之前加载了该数据，所以我可以使用之前保存在数据库中的本地数据。

如果为 false，您将从 WS 加载该数据，在确保加载并成功插入后，您必须更新此标志以使其值等于 true，以避免在下次打开时重新加载数据应用程序。

我认为您可以使用 sharedPreference 而不是配置表。

* * *

第 2 点：您希望每次应用程序删除旧数据并重新加载并再次插入数据：您将正常创建 SQLite DB，然后您可以创建一个扩展 Application 类的类，该类是第一个类打开应用程序后加载，它包含一个 onCreate() 方法，您可以先删除所有记录，然后再次重新加载所有数据并将其插入本地 SQLite DB。

注意：不要忘记在 androidMainfest.xml 文件中添加一个标签来引用您的应用程序类，这是必须的步骤。

在 Internet 上阅读有关应用程序类示例的更多信息。 [http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

# java - streaming videos with processing

> ID：14730623
> 
> 赞同：0
> 
> 时间：2013-02-06T13:46:38.457
> 
> 标签：java, video-streaming, processing

Processing has a Movie class ([http://processing.org/reference/libraries/video/Movie.html](http://processing.org/reference/libraries/video/Movie.html)) which is capable of playing videos. I have no problem with playing local video files with the following code.

```
public void setup() 
{
    size(WIDTH, HEIGHT);
    myMovie = new Movie(this,/Users/mike/Documents/abc.mp4");

    myMovie.play();

}

public void draw() 
{
    //(WIDTH-myMovie.width)/2
    image(myMovie, 0, 0);
}

// Called every time a new frame is available to read
public void movieEvent(Movie m) 
{
    m.read();
} 
```

But now i want to play streaming video from the internet, I don't know how to do it. I tried to just change the file name to a url link which ends with .mp4 (such as [http://www.abc.com/abc.mp4](http://www.abc.com/abc.mp4)), but it didn't work.

Anyone knows how to play streaming videos with processing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:28:24.777

[来自http://processing.org/reference/libraries/video/Movie.html](http://processing.org/reference/libraries/video/Movie.html)上的处理参考

```
Datatype for storing and playing movies in Apple's QuickTime format.
Movies must be located in the sketch's data directory or an accessible
place on the network to load without an error. 
```

如果你想播放普通内容类型的电影，如 mp4、ogg 等，你将不得不使用真正的视频库，而不是内置的 Movie 对象。

# c# - C# - Windows 窗体，面板控件的溶解动画

> ID：14730625
> 
> 赞同：2
> 
> 时间：2013-02-06T13:46:52.187
> 
> 标签：c#, windows, forms, animation

我正在尝试为控件块（面板）创建溶解动画。我确实有一个面板，在纯色背景（石灰）上几乎没有标签和图片框。我试图让这个面板（带有所有标签和图片）溶解到石灰背景中。有什么想法可以做到吗？我愿意接受任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:17:57.990

遗憾的是，Forms.Panel 等控件中没有 Opacity 属性。想到模拟它的唯一方法是逐渐将控件的 BackColor 更改为设置了 alpha 通道的值（例如使用计时器）：

```
int opacity = 25;

myPanel.BackColor = Color.FromArgb(opacity, myPanel.BackColor);
myLabel.BackColor = Color.FromArgb(opacity, myLabel.BackColor); 
```

遗憾的是，某些控件不会像预期的那样对此做出反应（例如按钮）。此外，更改 ForeColor 也不是那么容易（在某些情况下，重写派生控件的 OnPaint 方法可能会起作用）

# mysql - 如果值为 null 则忽略条件 MYSQL/Codeigniter

> ID：14730627
> 
> 赞同：0
> 
> 时间：2013-02-06T13:46:57.140
> 
> 标签：mysql, codeigniter

我正在使用 MYSQL/Codeigniter。如果传递的值为空，MySQL 查询如何忽略条件，例如以下示例：

```
function get_category($category_id = 0){

 return $this->db->query("SELECT * FROM {$this->table} c
                    INNER JOIN db_category_event ce 
                    ON ce.category_id = c.category_id
                    INNER JOIN db_event_type e
                    ON e.event_id = ce.event_id
                     WHERE c.category_id = {$category_id}
                    WHERE c.visible = 1 AND e.visible = 1")
            ->result();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:51:07.873

尝试这个：

```
SELECT * 

FROM   {$this->table} c

       INNER JOIN db_category_event ce 
       ON ce.category_id = c.category_id

       INNER JOIN db_event_type e
       ON e.event_id = ce.event_id

WHERE   ({$category_id} IS NULL OR c.category_id = {$category_id})
        AND c.visible = 1 AND e.visible = 1 
```

或者如果参数被视为零，这应该有效：

```
SELECT * 

FROM   {$this->table} c

       INNER JOIN db_category_event ce 
       ON ce.category_id = c.category_id

       INNER JOIN db_event_type e
       ON e.event_id = ce.event_id

WHERE   ({$category_id} = 0 OR c.category_id = {$category_id})
        AND c.visible = 1 AND e.visible = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T06:04:45.660

尝试这个

```
$this->db->select('*');

$this->db->from($this->table c); 

$this->db->join('db_category_event ce', 'ce.category_id = c.category_id', 'inner');

$this->db->join('db_event_type e', 'e.event_id = ce.event_id', 'inner');

  if($category_id >0)
  {
  $this->db->where(c.category_id=$category_id);
  }

  $this->db->where(c.visible = 1);

  $this->db->where(e.visible = 1);

  $query = $this->db->get(); 
```

# c# - 将值添加到列表中的列表

> ID：14730628
> 
> 赞同：0
> 
> 时间：2013-02-06T13:46:56.460
> 
> 标签：c#, asp.net

我有一个从 fetchXML 查询中填充的列表，但不幸的是它返回了很多带有重复标题的事件。因此，作为一种解决方案，我希望遍历列表中的每个项目，如果标题与前一个项目相同，那么我想将 item.YearId 和 item.Year 中的值添加到年份列表中在先前循环的项目中。

```
var result = from p in fetchResults.Root.Elements("result") ... //etc

//Creating another list to contain desired results.
List<Event> eventDetails = new List<Event>();

//Create to store the previously looped title.
string previousTitle = string.Empty;

foreach (var item in result)
{
    if (item.Name == previousTitle)
    {
        //Not sure how to add item.yearId and item.Year to a Year
        //list inside the previously looped.
    }
    else
    {
        //otherwise add who item to eventDetails list.
        eventDetails.Add(item);
    }

    previousTitle = item.Name;
} 
```

因此，Event 类包含一个 Year 列表属性，该属性由一个 guid (item.YearId) 和一个 int (item.Year) 组成。

希望这是有道理的。任何例子都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:49:47.197

我认为从 xml 获取项目时应该使用分组。类似的东西（只是一个示例，因为我不知道你的 xml 看起来如何）：

```
var result = from p in fetchResults.Root.Elements("result")
             group p by p.Name into g
             select new Foo { 
                  Name = g.Key, 
                  Years = g.Select(x => (int)x.Element("year")).ToList()
             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:53:25.600

创建对前一项的引用并使用该引用，以便您的代码变为

```
var result = from p in fetchResults.Root.Elements("result")... //etc

//Creating another list to contain desired results.
List<Event> eventDetails = new List<Event>();

//Create to store the previously looped title.
string previousTitle = string.Empty;

//Reference to previous event
Event previousEvent = null;

foreach (var item in result)
{
    if (item.Name == previousTitle && previousEvent != null)
    {
        //Add to the previous event
        previousEvent.yearList.Add(item.Year);
        previousEvent.yearIdList.Add(item.YearId);
    }
    else
    {
        //otherwise add who item to eventDetails list.
        eventDetails.Add(item);
    }

    previousTitle = item.Name;
    previousEvent = item;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:55:19.703

你可以使用这样的东西。我不知道你的事件对象是什么样的，但你应该明白。

```
List<Event> eventDetails = new List<Event>();
Event lastEvent = null;

foreach (var item in result)
{
    if ((lastEvent != null) && (lastEvent.Name == item.Name))
    {
        lastEvent.AddYearAndYearId(item.Year, item.YearId);
        eventDetails[eventDetails.Count - 1] = lastEvent;
    }
    else
    {
        eventDetails.Add(item);
        lastEvent = item;
    }
} 
```

# c#-4.0 - C# 惰性属性

> ID：14730636
> 
> 赞同：12
> 
> 时间：2013-02-06T13:47:18.810
> 
> 标签：c#-4.0

我班上有一个懒惰的财产：

```
private Lazy<ISmtpClient> SmtpClient
    {
        get
        {
            return new Lazy<ISmtpClient>(() => _objectCreator.Create<ISmtpClient>(), true);
        }
    } 
```

也是使用此属性的方法：

```
public void SendEmail(MailMessage message)
    {
        SmtpClient.Value.ServerName = "testServer";
        SmtpClient.Value.Port = 25;

        SmtpClient.Value.Send(message);
    } 
```

但是在我的 SmtpClient 中，在 Send(string message) 方法中是我在上面的 SendEmail(MailMessage message) 方法中初始化的所有属性，null。

我怎样才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T13:50:08.123

你用`Lazy<T>`错了。

使用时，`Lazy<T>`您会公开实际类型的属性，并且您有一个`Lazy<T>`实例。每次访问该属性时，您都不会创建一个新的：

```
Lazy<ISmtpClient> _smtpClient =
    new Lazy<ISmtpClient>(() => _objectCreator.Create<MySmtpClient>(), true);

private ISmtpClient SmtpClient
{
    get
    {
        return _smtpClient.Value;
    }
} 
```

现在，第一次`SmtpClient`访问该属性时，对象创建者会创建一个新的`MySmtpClient`. 这是返回的。在随后的调用中，返回相同的实例。

用法是这样的：

```
public void SendEmail(MailMessage message)
{
    SmtpClient.ServerName = "testServer";
    SmtpClient.Port = 25;

    SmtpClient.Send(message);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:58:45.550

丹尼尔的回答是正确的。只是想澄清一下为什么您的代码不起作用。

每次访问`SmtpClient`时，在原始代码中`Lazy<ISmtpClient>`都会创建一个新对象，然后立即使用`SmtpClient.Value`. 这会`ISmtpClient`在每一行上为您提供一个新对象。

您只需要构造`Lazy<T>`一次对象，并在属性的 getter 中返回它，就像在 Daniels 代码中一样。属性的类型应该是您想要使用的类型（即您不`Lazy<T>`向消费者公开类型）。

# string - Groovy - 获取两个标记之间的字符串

> ID：14730642
> 
> 赞同：-3
> 
> 时间：2013-02-06T13:47:36.820
> 
> 标签：string, groovy, markers

这是我第一次尝试 groovy：

我想获得字符串，它们以巨大的字符串标记。费：

```
Code before... bla...bla... 
```

`@_<String-I-want-to-get>_@`

```
Other Code...bla...bla
@_<2nd-different-String-I-want-to-get>_@

Other Code...bla...bla 
```

我只想得到：

```
string 1stString = String-I-want-to-get 
```

&

```
string 2ndString = 2nd-different-String-I-want-to-get 
```

它用于代码生成器。

有什么解决办法吗？（代码请）谢谢

编辑：我自己完成了，在 C++ 中遇到了类似的问题：

```
 String 1String = mybigstring.getAt(mybigstring.indexOf('@_')+2 .. mybigstring.indexOf('_@') ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:40:18.173

我自己完成了，在 C++ 中遇到了类似的问题：

```
 String 1String = mybigstring.getAt(mybigstring.indexOf('@_')+2 .. mybigstring.indexOf('_@') ) 
```

# css - firefox 18.0.1 CSS 在某些客户端上搞砸了。

> ID：14730648
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:48:06.023
> 
> 标签：css, firefox

为什么它在某一端，CSS 混乱.. 它在其他一些版本和不同的浏览器上运行良好。

我已经在 2 台不同的笔记本电脑上对其进行了测试。这就是它在他们电脑上的样子。 ![在此处输入图像描述](../Images/d99ba20f052fc885b6d23bc9a7fbcf31.png)

虽然它对我来说效果很好.. 两个测试都在 Windows 上运行.. ![在此处输入图像描述](../Images/1f5efaf1271f6bb201dee556917fd003.png)

如果您想现场观看，这里是现场链接[http://goo.gl/fPJTe](http://goo.gl/fPJTe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:51:05.647

添加

#ja-banner div { 显示：内联块；}

在你的 CSS

在这里工作

编辑：

更改为在 ff 18 上工作的 div

# testing - 有没有类似 Windows Phone 8 的 Testflight 的东西？

> ID：14730649
> 
> 赞同：6
> 
> 时间：2013-02-06T13:48:12.550
> 
> 标签：testing, windows-8, windows-phone-8, testflight

如何在不直接使用 Visual Studio 安装的情况下将我开发的应用程序（Windows Phone 8）安装到测试设备上？我们有一些客户在百里之外。他们如何才能在将应用发布到商店之前获得应用（他们想在此之前对其进行测试）？对于 IOS，我们使用 Testflight。**有没有类似 Windows Phone 8 的 Testflight 的东西？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T13:53:19.373

是的，您可以将其作为 beta 应用程序发布到商店 - 您将需要您希望能够安装/测试它的用户的帐户 ID，但这应该允许他们能够安装它，而其他人则不能，并且无需完成通常与提交应用程序相关的完整 QA 流程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T13:54:33.963

是的，它被称为Windows Phone 上的[Beta Distribution](http://msdn.microsoft.com/en-us/library/windowsphone/help/jj215598%28v=vs.105%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:38:40.963

如果他们安装了开发者帐户和开发者工具，则可以使用 Windows Phone 开发者注册工具和应用程序部署工具进行部署。有关详细信息，请参阅 Windows Phone 开发人员中心文章：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508(v=vs.105).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T03:34:17.797

我认为 HockeyApp 支持 Windows Phone 8： [http ://hockeyapp.net/blog/2014/01/08/hockeyapp-for-windows.html](http://hockeyapp.net/blog/2014/01/08/hockeyapp-for-windows.html)

# c - 递归检查数组是否按升序排列

> ID：14730651
> 
> 赞同：-4
> 
> 时间：2013-02-06T13:48:15.987
> 
> 标签：c

如果数组按升序排列，我应该返回-1。

否则，我应该返回第一个“破坏”升序的索引。

该函数应该是递归的。

请帮忙；）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:56:54.163

递归函数

*   如果数组按升序排列，则返回 -1
*   返回失败的第一个项目的索引（表示 < a[i-1]）
*   只接受两个参数

算法

```
int recur(int *a, int n) {
  static int i=0;
  if (i >= n-1) return -1;
  if (a[i] > a[i+1]) return i+1;
  return i++, recur(a, n);
} 
```

从评论编辑：可以多次调用的函数（不可重入）

```
int recur(int *a, int n) {
  static int i=0;
  if (i >= n-1 || a[i] > a[i+1]) {
    int ret = (i >= n-1 ? -1 : i+1);
    i = 0;
    return ret;
  }
  return i++, recur(a, n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:01:31.120

要设计递归函数，一个好主意是使用尾递归（使用好的编译器将转向迭代）。

```
int CheckAscendingOrder (const int *array, int size, int idx, int prec)
{
  int res;

  if (idx >= size)
  {
    res = -1;
  }
  else if (array[idx] < prec)
  {
    res = idx;
  }
  else
  {
    res = CheckAscendingOrder (array, size, idx + 1, array[idx]);
  }

  return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:15:47.960

```
int ArrayAscending(int a[], int n)
{
static int i=0;
if(i==n) return 1;
return (a[i]<a[i+++1] && ArrayAscending(a, n));
} 
```

返回 0 -- 如果数组不是升序排列。
返回 1 -- 如果数组按升序排列。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T13:57:56.827

像这样的东西应该可以工作......（但请描述你所说的递归......）

```
 int ascending_check (int* in_tab, int tab_size)
{
   int i=0;
   int previous_value = INT_MIN //in limits.h

   for (i=0;i<tab_size; i++)
   {
      if(previous_value >= in_tab[i])
      {
          return i;
      }
   }

   return -1; //Ascending tab.
} 
```

下次，请向我们提供有关您尝试过的更多信息:)

# ios - 在 iOS 上没有密码的 strongSwan

> ID：14730653
> 
> 赞同：2
> 
> 时间：2013-02-06T13:48:26.283
> 
> 标签：ios, vpn

我有以下问题：我需要在没有密码的情况下使用 iOS 上的 VPN 进行身份验证，但只有证书。原因是我需要“按需 VPN”，它仅在证书身份验证时有效。

我找到[了本教程](http://wiki.strongswan.org/projects/strongswan/wiki/IOS_%28Apple%29#Certificate-requirements-for-iOS-interoperability)，但它使用证书+密码身份验证。但我只需要证书。我一直在尝试从配置中删除 xauth 身份验证，但我失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:56:14.693

我[在 Server Fault 上问了同样的问题，并](https://serverfault.com/questions/476033/strongswan-without-password-on-ios)[从 ecdsa](https://serverfault.com/a/476114)得到了答案：

> iPhone VPN 客户端不允许在没有 XAuth 的情况下进行配置（至少在图形配置界面中不允许）。幸运的是，如果 VPN 网关只是简单地结束预期的 XAuth 交换而不实际请求任何用户凭据，它并不介意。我最近[为 strongSwan 5.0.2 创建了一个补丁，](http://git.strongswan.org/?p=strongswan.git;a=commitdiff;h=e4013bb90404aea5728bca9da9ae71abcbd935ea)它添加了一个允许配置这种 XAuth“身份验证”的插件。应用补丁后，您可以配置
> 
> ```
> leftauth=rsa
> rightauth=rsa
> rightauth2=xauth-noauth 
> ```
> 
> 在 ipsec.conf 中基本上只使用 RSA 身份验证。
> 
> **更新：** xauth *-noauth*插件已随 strongSwan 5.0.3 一起发布。

# javascript - JavaScript 分配变量

> ID：14730661
> 
> 赞同：0
> 
> 时间：2013-02-06T13:48:43.037
> 
> 标签：javascript, oop

```
var example = {

    something: 'test',

    test: function() {
        this.something = 'blah';
    }

}

example.test(); 
```

在这种情况下，为什么 'test' 不更新为 'blah'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:54:31.310

它工作正常。如果您希望 example.test() 返回新值，请尝试以下操作：

```
var example = {

    something: 'test',

    test: function() {
        this.something = 'blah';
        return this.something;
    }

}

example.test();
// output: "blah" 
```

# python - 如何从html中的表类型结构中选择特定内容

> ID：14730664
> 
> 赞同：0
> 
> 时间：2013-02-06T13:48:58.123
> 
> 标签：python, html, python-2.7, html-parsing, beautifulsoup

我正在处理的 HTML 结构是：

```
<tr showhide="show" style="display: table-row; ">
            <td class="monthlyCost">£18<span>.50</span></td>
                      <td class="phoneCost">£299.99</td>
                      <td><span class="lowLight">24 Months</span></td>
            <td>200</td>
            <td>Unlimited</td>
            <td class="dataAllowance">100MB</td>
            <td class="extras"> 
```

我正在使用以下 Python 代码来提取信息：

```
minutes       = tariff_link_soup.findAll('td', {"class": False})
texts         = tariff_link_soup.findAll('td', {"class": False}) 
```

**问题：**我想要这两个`td`( `<td>200</td>`& `<td>Unlimited</td>`) 标记中提到的 2 个不同列分钟和文本中的信息。但是我将 class 定义为 false 的方法会不断地找到 3`24 Months`个`200`arguments `Unlimited`。

我理解这个问题，但无法为其设计解决方案。它有两个部分，首先我不希望`lowlight`类中的数据，其次我希望接下来两个`td`标签中的数据位于 2 个不同的列中，即使我可以将它们放在一起，我也可以将它们分成 2 列`200 Unlimited`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:59:26.290

如果您使用的是 BeautifulSoup 3，正确的调用是：

```
.findAll('td', {'class': None}) 
```

这给了我：

```
>>> results = s.findAll('td', {'class': None})
>>> results
[<td><span class="lowLight">24 Months</span></td>, <td>200</td>, <td>Unlimited</td>] 
```

当您调用它两次时，您将在`minutes`和中获得相同的数据`texts`。我假设你的表的列不会改变，所以你必须使用索引：

```
>>> minutes = results[1]
>>> texts = results[2]
>>> minutes, texts
(<td>200</td>, <td>Unlimited</td>) 
```

# c# - 检查启动文件夹是否已包含程序

> ID：14730665
> 
> 赞同：0
> 
> 时间：2013-02-06T13:48:59.443
> 
> 标签：c#

我基本上想检查当前程序是否已经链接到 Windows 启动文件夹，即使该文件有另一个名称或从另一个目录运行。这可能吗，也许通过检查程序的名称？

PS：我使用此代码将我的程序链接到 Startup 文件夹：

```
using (ShellLink shortcut = new ShellLink()) {
    shortcut.Target = Application.ExecutablePath;
    shortcut.WorkingDirectory = Path.GetDirectoryName(Application.ExecutablePath);
    shortcut.Description = "My Shorcut Name Here";
    shortcut.DisplayMode = ShellLink.LinkDisplayMode.edmNormal;
    shortcut.Save(Environment.GetFolderPath(Environment.SpecialFolder.Startup));
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:01:01.853

您需要扫描启动的开始菜单文件夹，并将每个快捷方式的目标路径与您的程序路径进行比较。

```
WshShell shell = new WshShell(); 
var link = (IWshShortcut)shell.CreateShortcut(linkPathName); //Link the interface to our shortcut
var target = link.TargetPath;
//compare to your program's path... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:05:03.443

尝试编写木马？=D

直截了当的解决方案：枚举 Startup 文件夹中的所有快捷方式（lnk 文件），将它们一一打开并查看（我假设您正在使用[这种](http://www.vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/article.asp)技术）。

# c++ - 将 C/C++ 中的变量定义为 Scilab

> ID：14730667
> 
> 赞同：0
> 
> 时间：2013-02-06T13:49:02.650
> 
> 标签：c++, c, scilab

我有一个 Visual Studio C++ 项目和一个[Scilab](https://en.wikipedia.org/wiki/Scilab) **.sce**文件。我想从我的 C++ 项目中执行这个文件，这可以通过以下方式完成：

```
 ........
  SendScilabJob("exec('U:/scilab/done/SNR.sce');");
 ...... 
```

为了简单起见，执行成功了，但是当我得到这个时：

```
 The package IPD (8.3-2) is already loaded
 The package SIVP (0.5.3-3) is already loaded 
```

在我的控制台上它只是不工作而没有给出任何错误消息。顺便说一句，我在我的 Scilab 代码中使用了这两个包。

当一切正常时，我得到这个：

```
 Start IPD - Image Processing Design
    Load macros
    Load dependencies
    Load gateways

 SIVP - Scilab Image and Video Processing Toolbox
    Load macros
    Load gateways 
```

# c# - onfocusout 替代方案？

> ID：14730669
> 
> 赞同：0
> 
> 时间：2013-02-06T13:49:06.360
> 
> 标签：c#, javascript, asp.net

我有以下代码：

```
<script type="text/javascript">

    function editLabel(source) {
        source.innerHTML = '<input type="text" value="' + source.innerHTML + '"/>';
        source.onclick = null;
        source.children[0].focus()
    }
    function setLabel(source) {

        if (source.children[0].value != '') {
            source.onclick = function () { editLabel(source); };
            source.innerHTML = source.children[0].value;
        }

    } 
```

然后在我的asp标签中：

```
 <asp:Label ID="lblName" runat="server" onfocusout="setLabel(this);" onclick="editLabel(this);" Text='<%# Bind("GroupDescription") %>'></asp:Label> 
```

这在 Chrome 和 IE 中运行良好，但在 Firefox 中不起作用。

这是因为 Firefox 只支持 onblur。

我试图将 onblur 添加到标签和文本框，但它不起作用。

我能做什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:06:07.187

查看 jQuery，并将函数绑定到事件。即检查悬停、模糊和焦点。如果你想做任何真正的 Web 开发，像 jQuery 这样的框架是必要的。

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

[http://api.jquery.com/focus/](http://api.jquery.com/focus/)

例如，请参见此处：http: [//jsfiddle.net/turiyag/fQV3p/](http://jsfiddle.net/turiyag/fQV3p/)

```
$("#blurry").hover(function() {
    log("Hover In!");
}, function(){
    log("Hover Out!");
});
$(":text").blur(function() {
    log("Blurred from textbox with value: " + $(this).val());
});
$(":text").focus(function() {
    log("Focus given to textbox with value: " + $(this).val());
}); 
```

# maven - maven 3：必须指定插件版本，为什么？

> ID：14730672
> 
> 赞同：2
> 
> 时间：2013-02-06T13:49:09.990
> 
> 标签：maven, maven-3

从 maven 3 开始，强烈建议指定插件的版本。例如，指定 maven-compiler-plugin（为了指定 java 目标版本），如果没有指定版本，maven 会报错：

```
[WARNING] Some problems were encountered while building the effective model for com.example:ex1:jar:0.0.1-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 20, column 12
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects. 
```

但是，我可以理解其中的逻辑：

如果我不指定 maven-compiler-plugin，我会得到一个默认版本，对于 maven 3.0.4 是 2.3.2。这意味着在正常情况下，您将获得插件的一些默认版本。

问题：插件的默认版本会随着时间而变化吗？我猜是这样，例如 maven 4.x 可能会使用较新的默认版本的编译器插件。

如果是这样的话，那么强制用户指定版本有什么好处呢？在很多情况下，无论如何都是不可预知的，只看pom.xml，就可以提前知道将使用什么maven版本，即使用什么maven插件版本。

我不明白这背后的逻辑。因此，必须始终强制指定使用中的每个插件的版本（这将非常麻烦）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:12:50.970

插件的默认版本是 Maven 发布包的一部分。因此，它们因版本而异。这意味着切换 Maven 版本可能会让您大吃一惊。Maven 开发社区认为这是一个糟糕的计划。您应该能够更改 Maven 的次要版本而不会失去构建可重复性（当然，除了错误）。因此，我们发出此警告，以温和地鼓励您锁定您的插件版本。

# facebook - 在 facebook 中分享而不打开确认对话框

> ID：14730675
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:49:11.293
> 
> 标签：facebook, facebook-sharer

嗨朋友们，

我想在我的网站上添加一个 facebook 分享按钮，但需要进行一些自定义修改。当用户单击共享按钮时，不显示对话框窗口，如[图像中的一个](http://postimage.org/image/xyczwla2h/)

我希望在单击后填写 $image、$title、$url、$summary、“Write something...”部分中的文本。而不是分享：**在你自己的墙上**分享我网站的 facebook 墙上的东西（例如 www.facebook.com/mywebsite）。在后台执行所有这些操作，而无需打开该确认对话框窗口。

谁能给我一个提示，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:54:23.630

看看开放图概念：[https ://developers.facebook.com/docs/concepts/opengraph/](https://developers.facebook.com/docs/concepts/opengraph/)

但请记住，用户接受度/体验非常重要。你不应该误导你的用户。所以请阅读并始终牢记以下两个链接：

*   [打开图表清单](https://developers.facebook.com/docs/submission-process/opengraph/guidelines/)
*   [Facebook 平台政策](https://developers.facebook.com/docs/guides/policy/policy_checklist/english/)

# javascript - 链接 2 个猫鼬模式

> ID：14730676
> 
> 赞同：6
> 
> 时间：2013-02-06T13:49:13.730
> 
> 标签：javascript, mongodb, mongoose

我有两个模式， a`Team`和 a `Match`。我想使用`Team Schema`来识别`Match Schema`. 到目前为止，这是我的 Team 和 Match JS 文件。我想将 Team Schema 链接到我的 Match Schema，以便我可以简单地识别主队或客队，并在 Match Schema 中存储一个实际的 Team 对象。

这样我就可以将主队称为`Match.Teams.home.name = England`（当然这只是一个例子）

Team.js

```
'use strict';

var util = require('util');
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var validatePresenceOf = function(value){
  return value && value.length; 
};

var getId = function(){
  return new Date().getTime();
};

/**
  * The Team schema. we will use timestamp as the unique key for each team
  */
var Team = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'name' : { type : String,
              validate : [validatePresenceOf, 'Team name is required'],
              index : { unique : true }
            }
});

module.exports = mongoose.model('Team', Team); 
```

这就是我想用 Match.js 做的事情

```
'use strict';

var util = require('util');
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var TeamSchema = require('mongoose').model('Team');

var validatePresenceOf = function(value){
  return value && value.length; 
};

var toLower = function(string){
  return string.toLowerCase();
};

var getId = function(){
  return new Date().getTime();
};

/**
  * The Match schema. Use timestamp as the unique key for each Match
  */
var Match = new Schema({
  'key' : {
    unique : true,
    type : Number,
    default: getId
  },
  'hometeam' : TeamSchema,
  'awayteam' : TeamSchema
});

module.exports = mongoose.model('Match', Match); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:52:14.353

您的解决方案：使用实际架构，而不是使用架构的模型：

```
module.exports = mongoose.model('Team', Team); 
```

至

```
module.exports = {
    model: mongoose.model('Team', Team),
    schema: Team
}; 
```

然后`var definition = require('path/to/js');`那个，`definition.schema`直接使用而不是模型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T22:09:04.290

您不想嵌套模式。

尝试猫鼬中的人口：http: [//mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html) 这将解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-24T08:35:27.327

尝试`Schema.Types.ObjectId`在 Match.js 中使用：

> `hometeam: { type: Schema.Types.ObjectId, ref: 'Team' } awayteam: { type: Schema.Types.ObjectId, ref: 'Team' }`

# list - 如何按给定顺序对列表进行排序？

> ID：14730683
> 
> 赞同：9
> 
> 时间：2013-02-06T13:49:24.160
> 
> 标签：list, perl, sorting

我正在尝试执行以下操作。我有一个预定义的列表，用作给定列表上的“排序依据”。

```
my @orderby = ( 'car', 'boat', 'chicken', 'cat', 'dog', 'mouse');
   or
my %orderby = ( 'car' => 0, 'boat' => 1, 'chicken' => 2, 'cat' => 3, 'dog' => 4, 'mouse' => 5);

my @list = ('boat', 'car', 'mouse', 'chicken'); 
```

我尝试了无数种方法对其进行排序，但没有得到我想要的。我在谷歌和这里搜索过，但我没有找到答案。

`@list`需要以这种方式排序：

```
sort @list using %orderby 
```

排序后我想要的打印：

```
car, boat, chicken, mouse 
```

顺便说一句，@list 可以有重复的条目：

```
my @list = ('boat', 'car', 'mouse', 'chicken', 'mouse', 'car');
```

在这种情况下，打印需要是：

```
car, car, boat, chicken, mouse, mouse
```

你们有解决方案吗？或者可能是另一种方法。谢谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T13:56:13.667

```
my @orderby = qw( car boat chicken cat dog mouse );
my @list    = qw( boat car mouse chicken );

my %orderby = map { $orderby[$_] => $_ } 0..$#orderby;

my @sorted = sort { $orderby{$a} <=> $orderby{$b} } @list; 
```

* * *

或者如果你想扰乱人们的思想，

```
my @orderby = qw( car boat chicken cat dog mouse );
my @list    = qw( boat car mouse chicken );

my %counts; ++$counts{$_} for @list;
my @sorted = map { ($_) x ($counts{$_}||0) } @orderby; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:23:39.653

当然，如果您有一个按顺序排列的所有潜在项目的列表，以及一个较小的要选择的项目列表，那么这实际上是一个选择问题，而不是排序问题？

```
my %items = map { $_ => 1 } @list;
my @items = grep { $items{$_} } @orderby; 
```

运行时间为 O(n) 而不是 O(n log n) :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:56:42.397

对于这种情况，基数排序是一个不错的选择：

```
use Sort::Key::Radix qw(ukeysort);
@sorted = ukeysort { $orderby{$_} } @data; 
```

# jquery - 对 div 使用 jQuery UI “拖放”

> ID：14730684
> 
> 赞同：0
> 
> 时间：2013-02-06T13:49:25.513
> 
> 标签：jquery, jquery-ui

我想将元素与拖放配对。匹配方法是 div 内的隐藏文本。用户必须将元素从“.answerContainer”拖放到正确的“.circle”div。

HTML 代码：

```
<div class="circleContainer">
    <div class="circle first lineOne"> <span class="question">1</span></div>                   
    <div class="circle second lineOne"><span class="question">2</span></div>
    <div class="circle third lineTwo"> <span class="question">3</span></div>
</div>
<ul class="answerContainer">
     <li class="first">   <span class="answer">1</span></li>
     <li class="second">  <span class="answer">2</span></li>
     <li class="third">   <span class="answer">3</span></li>
</ul> 
```

我正在尝试这个，但它不起作用：

```
$( ".answerContainer li" ).draggable({
  revert: "invalid",
  containment: "document",
  cursor: "move"
});
$(".circle").each(function(i){
     $this=$(this);
     $this.droppable({
          accept:  function(event, ui) {
                    if($this.text()==event.text()){ 
                        return true;
                    }
                  },
          activeClass: "ui-state-highlight",
          drop: function( event, ui ) {
                    deleteAnswer( ui.draggable );
                }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:30:09.137

两个问题：

1.  有些 div 有空格，有些没有，所以使用`text()`可能匹配也可能不匹配。改为使用`.find('span').text()`。
2.  您应该在您的接受回调中使用`$(this)`而不是`$this`，因为 $this 每次都会被`each`命令覆盖。

所以：

```
$(".circle").each(function(i){
     $this=$(this);
     $this.droppable({
          accept:  function(element) {
                    if($(this).find('span').text()==element.find('span').text()) { 
                        return true;
                    }
                  },
          drop: function( event, ui ) {
                    deleteAnswer( ui.draggable );
                }
    });
}); 
```

# sql - clojure 中的简单数据库存储

> ID：14730688
> 
> 赞同：2
> 
> 时间：2013-02-06T13:49:44.020
> 
> 标签：sql, clojure

这是一个新手问题。我有一个解析网页并返回一系列 5 个元素的函数。然后我使用该`println`功能查看它是否正常工作。

```
...
(defn select-first-index-page-elements [source element n]
    ((get-parsing-logic source "parsing-logic-index-page" element "final-touch-fn")
        (nth 
            (html/select 
                (fetch-first-page source)
                (get-parsing-logic source "parsing-logic-index-page" element "first-touch"))
            n)))

(defn parsing-source [source]
(loop [n 0]
    (when (< n (count-first-index-page-elements source "title"))
(println ; the group of elements:
    (select-first-index-page-elements source "date" n)
    " - "
    (select-first-index-page-elements source "title" n)
    " - "
    (select-first-index-page-elements source "url" n)
    "\n")
(recur (inc n)))))))

(parsing-source "events-directory-website") 
```

`println`现在，我如何将这些元素存储到数据库中，而不是函数？如果它已经在数据库中，我如何不能存储给定的一组元素？我怎样才能只打印解析函数确实找到的新元素组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:45:18.773

您可能想查看[SQL Korma](http://sqlkorma.com/)。

使用 sql korma：

我怎样才能将这些元素存储到数据库中？

```
(insert my-elements
  (values [{:elements ("a" "b" "c")}])) 
```

如果它已经在数据库中，我如何不能存储给定的一组元素？

```
;; using some elements youre looking for
(if-not [is-in-db (select my-elements
                          (where {:elements the-elements-youre-looking-for}))]
  (insert my-elements
      (values [{:elements the-elements-youre-looking-for}]))) 
```

我怎样才能只打印解析函数确实找到的新元素组？您可以使用上述答案中的 (select ...) 调用来解决此问题。

希望有帮助。

# css - 一个类下的 CSS 类

> ID：14730690
> 
> 赞同：0
> 
> 时间：2013-02-06T13:49:47.367
> 
> 标签：css

这个问题可能很愚蠢，虽然我想从 CSS 专家那里知道。有没有办法在一个类下编写 CSS 类。

假设我在一个 div 下有几个 div

```
<div class="parent">
     <div class="c1"></div>
     <div class="c2"></div>
     <div class="c3"></div>
</div> 
```

通常，我们编写如下 css 类 -

```
.parent { width: 100%; }
.parent .c1 { //somecode }
.parent .c2 { //somecode }
.parent .c3 { //somecode } 
```

但是，我想知道。我们可以像下面这样写 -

```
.parent {
    width: 100%;
   .c1 {
      //somecode
   }
   .c2 {
      //somecode
   }
   .c3 {
      //somecode
   }
} 
```

请让我知道我的好奇心的答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:50:48.320

你不能使用普通的CSS。

也许你正在寻找[更少](http://lesscss.org/)？特别是页面下方的嵌套规则部分。

这允许你做你所要求的，以及许多其他有用的函数、变量和 mixin。

或者，还有[SASS](http://sass-lang.com/)的选项。这与less非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:52:43.073

CSS 做不到，但[LESS](http://lesscss.org/)和[SASS](http://sass-lang.com/)可以。

请注意，这些是 CSS 编译器，因此它们需要一个编译步骤并为您*生成*所需的 CSS（而不是您手动编写所有内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:53:29.217

听起来您正在寻找类似于嵌套或选择器继承的东西。

这可以通过 SASS 完成。与LESS非常相似。[http://sass-lang.com/](http://sass-lang.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:53:55.443

不，你不能使用普通的css，但出于可读性的目的，如果你不打算在父类以外的任何东西中使用.c1-3，那么你可以缩进你的CSS并做

```
.parent {
    width: 100%;
}
   .c1 {
      //somecode
   }
   .c2 {
      //somecode
   }
   .c3 {
      //somecode
   } 
```

通过这种方式，您可以在代码中轻松查看哪些类属于哪些父类。（如果你不想走 LESS SASS 路线

# c# - 通过 linq 从表中选择两列

> ID：14730691
> 
> 赞同：2
> 
> 时间：2013-02-06T13:49:52.793
> 
> 标签：c#, linq

我使用下面的查询来获取 Entity Framework Linq 中的所有列（20 多个）。由于内存不足异常，我只想获得其中两个。一个是“文件名”，另一个是“文件路径”。如何修改我的代码？

```
var query = DBContext.Table1
    .Where(c => c.FacilityID == facilityID && c.FilePath != null && c.TimeStationOffHook < oldDate)
    .OrderBy(c => c.FilePath)
    .Skip(1000)
    .Take(1000)
    .ToList();
foreach(var t in query)
{
    Console.WriteLine(t.FilePath +"\\"+t.FileName);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T13:51:36.337

```
var query = DBContext.Table1.Where(c => c.FacilityID == facilityID && c.FilePath != null && c.TimeStationOffHook < oldDate)
                            .OrderBy(c => c.FilePath)
                            .Skip(1000)
                            .Take(1000)
                            .Select(c => new { c.FilePath, c.FileName })
                            .ToList();
foreach(var t in query)
{
    Console.WriteLine(t.FilePath +"\\"+t.FileName);
} 
```

你需要使用[`Select`](http://msdn.microsoft.com/en-GB/library/bb548891.aspx).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T13:51:50.313

只需选择其中两列：

```
DBContext.Table1.Select(c => new { c.FileName, c.FilePath }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T13:58:53.100

像这样的东西怎么样

```
using (var entity = new MyModel(ConnectionString))
            {
                var query = (from myTable in entity.theTable
                            where myTable.FacilityID == facilityID &&
                               myTable.FilePath != null &&
                               myTable.TimeStationOffHook < oldDate
                            orderby myTable.FilePath
                            select new
                            {
                                myTable,FileName,
                                myTable.FilePath
                             }).Skip(1000).Take(1000).ToList();
//do what you want with the query result here
            } 
```

# ios - iOS notification.alert() 无法使用 Phonegap 2.3.0

> ID：14730693
> 
> 赞同：1
> 
> 时间：2013-02-06T13:49:58.647
> 
> 标签：ios, cordova, alert

尝试使用 Phonegap 2.3.0 在 Xcode 4.6 中使用 navigator.notification.alert() 时遇到一个奇怪的问题。

我有两个文件，index.html 和 other.html。单击 index.html 中的“测试警报”会按预期触发警报，但是在解除警报然后导航到 other.html 后，单击“测试其他警报”不会触发警报。

但是，如果您在 index.html 上单击“测试警报”两次或更多次，然后再转到 other.html，则警报将继续按预期运行。只有在触发警报 ONCE 并更改页面后，警报才会一起停止运行。

索引.html

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8">
            function alertTest() {
                navigator.notification.alert('Testing', null, 'Alert Test', 'OK');
            }
        </script>
    </head>
    <body>
        <a href='other.html'>Move to other page</a>
        <a href="#" onclick="alertTest(); return false;">Test the alert</a>
    </body>
</html> 
```

其他.html

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8">
            function alertTest() {
                navigator.notification.alert('Testing', null, 'Alert Test', 'OK');
            }
        </script>
    </head>
    <body>
        <a href="index.html">Go back</a>
        <a href="#" onclick="alertTest(); return false;">Test the alert</a>
    </body>
</html> 
```

我完全不知道为什么会发生这种情况，因为在我的应用程序中，我需要能够在不同页面上的按钮按下时触发警报，这在本示例中似乎是偶然发生的。

非常感谢任何朝着正确方向的帮助或推动！

**更新：**

这似乎只发生在 iOS 6 和 6.1 模拟器上。当警报没有弹出时，按主页键然后再次打开应用程序会使丢失的警报立即出现。

此示例也具有相同的行为：[http ://docs.phonegap.com/en/2.3.0/cordova_notification_notification.md.html#Notification](http://docs.phonegap.com/en/2.3.0/cordova_notification_notification.md.html#Notification)

谁能确认这是否只是最新 ​​Xcode 中的模拟器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:20:43.887

由于 Phonegap 2.2 存在此问题，另请参阅： [iOS 的 PhoneGap 中的通知](https://stackoverflow.com/questions/14437061/notification-in-phonegap-for-ios) Phonegap 2.3 上 WindowsMo​​bile 上的相同问题。

我没有从 2.1 更新...似乎是它正常工作的最后一个版本。

不要忘记在`document.addEventlistener("deviceready", onDeviceReady, true);`上面添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:38:18.320

更新到最新版本的 phonegap (2.4.0)。似乎可以解决问题。至少对我来说，现在一切正常。

# ruby - 无法使用选项值创建哈希，并且 文本

> ID：14730694
> 
> 赞同：0
> 
> 时间：2013-02-06T13:50:00.250
> 
> 标签：ruby, selenium-webdriver

*HTML 代码：*

```
<div id="empid" title="Please first select a list to filter!"><input value="5418630" name="candidateprsonIds" type="checkbox">foo  <input value="6360899" name="candidateprsonIds" type="checkbox"> bar gui<input value="9556609" name="candidateprsonIds" type="checkbox"> bab </div> 
```

现在我想使用 selenium-webdriver 作为

```
[[5418630,foo],[6360899,bar gui],[9556609,bab]] 
```

可以做到吗？

我尝试了以下代码：

```
driver.find_elements(:id,"filtersetedit_fieldNames").each do |x|

      puts x.text

end 
```

但它`"foo bar gui bab"`在我的控制台上将数据作为字符串提供给我。因此无法弄清楚 - 如何创建上述预期`Hash`。

在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:13:41.330

我知道获得这样的文本节点的唯一方法是使用该`execute_script`方法。

以下脚本将为您提供选项值及其以下文本的哈希值。

```
#The div containing the checkboxes
checkbox_div = driver.find_element(:id => 'empid')

#Get all of the option values
option_values = checkbox_div.find_elements(:css => 'input').collect{ |x| x['value'] }
p option_values
#=> ["5418630", "6360899", "9556609"]

#Get all of the text nodes (by using javascript)
script = <<-SCRIPT
    text_nodes = [];
    for(var i = 0; i < arguments[0].childNodes.length; i++) {
        child = arguments[0].childNodes[i];
        if(child.nodeType == 3) {
            text_nodes.push(child.nodeValue);
        }
    }   
    return text_nodes
SCRIPT
option_text = driver.execute_script(script, checkbox_div)
#Tidy up the text nodes to get rid of blanks and extra white space
option_text.collect!(&:strip).delete_if(&:empty?)
p option_text
#=> ["foo", "bar gui", "bab"]

#Combine the two arrays to create a hash (with key being the option value)
option_hash = Hash[*option_values.zip(option_text).flatten]
p option_hash
#=> {"5418630"=>"foo", "6360899"=>"bar gui", "9556609"=>"bab"} 
```

# jquery - 使用 jQuery 使用 slideUp/slideDown 在 div 中加载帖子

> ID：14730695
> 
> 赞同：0
> 
> 时间：2013-02-06T13:50:04.773
> 
> 标签：jquery, html, jquery-animate, slidedown, slideup

我正在尝试使用链接将 wordpress 页面中的内容加载到自定义模板上的 div 中。

我有一个隐藏的 div，当内容加载到其中时，应该用 slideDown 显示。

我有几个指向不同页面的链接，我想通过 onClick 或类似的东西将它们加载到这个 div 中。

> 示例：
> 
> 假设我有以下链接：
> - 链接 1（主页）
> - 链接 2（关于）
> - 链接 3（联系人）

如果访问者单击这些链接，应该会发生以下情况：

> 单击链接 2 --> 加载到 div --> div 以 slideDown 或类似的方式显示。
> 
> 单击链接 3 --> 先前加载的内容淡出，链接 2 的内容淡入
> 
> 单击链接 2（再次）-> 与单击链接 2 类似的操作...
> 
> 单击链接 1 --> 清除 div 并通过 slideUp 或类似方法将其隐藏。
> 
> 如果链接 2 或 3 处于活动状态，并且用户再次单击相同的链接 --> 与单击链接 1 类似的操作

我找到了一些代码来帮助我，但我还没有完全做到。
继承人我到目前为止：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
      $('#navigationMenu a').click(function() { // When a menu item is selected
            $('#maincontent').load($(this).attr('href')); // Load its linked page into the div
            return false; // And prevent it following the link
      });
});

function toggleSlider() {
    if ($("#maincontent").is(":visible")) {
        $("#sec-content").animate(
            {
                opacity: "0"
            },
            600,
            function(){
                $("#maincontent").slideUp();
            }
        );
    }
    else {
        $("#maincontent").slideDown(600, function(){
            $("#sec-content").animate(
                {
                    opacity: "1"
                },
                600
            );
        });
    }   
}

</script> 
```

我在 SO 上的相关帖子中找到了此代码，这使我可以将内容加载到具有 slideUp/slide/down 功能的 div 中。
但是它通过单击链接 3（在示例中）关闭了 div，所以我必须再次单击链接才能再次加载它。
而主链接 Link 1 还没有达到我想要的效果。

希望对此有更多了解的人可以在这里帮助我。
有可能吗？

谢谢！

---- 编辑代码 02/08/13 ----

```
<script type="text/javascript">

$(function() {
      $('#navigationMenu a').click(function() { // When a menu item is selected
            $('#maincontent').load($(this).attr('href')); // Load its linked page into the div
            return false; // And prevent it following the link
      });
});

var lastData;
$(function () {
    $("a").click(function(event) {
        loadData($(this).attr("href"));
        event.preventDefault();
    });
});

function loadData(data) {
    if(lastData == data) {
        $("#maincontent").slideUp();
    } else {
        $("#maincontent").html(data);
        $("#maincontent").slideDown();
    }
    lastData = data;
}

</script> 
```

结果可以在[http://tobba.org/no看到](http://tobba.org/no)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:21:06.447

您可以尝试使用以下功能：单击链接时，查看它是否是最后一次单击的链接。如果是这样，那么 slideUp()。如果没有，则将数据放入其中，然后一旦数据可用，填充框并向下滑动。

这个例子可能会让你半途而废，你仍然需要使用 $.get 或 $.load 来获取你想要的数据。注意：lastData 在函数范围之外声明，以便在函数结束时不会丢失其值：http: [//jsfiddle.net/turiyag/9na6K/](http://jsfiddle.net/turiyag/9na6K/)

```
function loadData(data) {
    if(lastData == data) {
        $("#dataview").slideUp();
    } else {
        $("#dataview").html(data);
        $("#dataview").slideDown();
    }
    lastData = data;
} 
```

# android - 附加数据库时出现 SQLite 异常

> ID：14730699
> 
> 赞同：0
> 
> 时间：2013-02-06T13:50:21.493
> 
> 标签：android, sqlite

在Android应用程序的另一个sqlite数据库中附加一个sqlite数据库时出现以下异常

```
android.database.sqlite.SQLiteException: near "/": syntax error: , while compiling: ATTACH DATABASE /data/data/PACKAGE_NAME/databases/database AS MASTER 
```

任何可能导致此错误的建议。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:51:16.277

数据库名称[是一个表达式](http://www.sqlite.org/lang_attach.html)，所以它必须被引用：

```
ATTACH DATABASE '/data/data/PACKAGE_NAME/databases/database' AS SomeName 
```

而且我怀疑您的包的名称实际上是`PACKAGE_NAME`，或者您的数据库文件实际上是命名的`database`。

# extjs - 在 extjs 4 中单击按钮时添加动态字段

> ID：14730700
> 
> 赞同：1
> 
> 时间：2013-02-06T13:50:26.837
> 
> 标签：extjs, extjs4, extjs-mvc

我想在 extjs 4 中单击按钮时动态添加一个字段。我所做的是在添加按钮上添加一个 onchange 函数，并在该函数中编写添加文本字段逻辑。这是我的代码。

```
Ext.define('AM.view.user.Edit', {
    extend: 'Ext.window.Window',
    alias : 'widget.useredit',
    requires: ['Ext.form.Panel'],
    title : 'Edit User',
    layout: 'fit',
    autoShow: true,
    height: 300,
    width: 280,
    id : 'mainPanel',
        initComponent: function() {
        this.items = [
            {
                xtype: 'form',
                id: 'dyForm',
                padding: '5 5 0 5',
                border: false,
                style: 'background-color: #fff;',

                items: [
                    {
                        xtype: 'textfield',
                        name : 'name',
                        fieldLabel: 'Name'
                    },
                    {
                        xtype: 'textfield',
                        name : 'email',
                        fieldLabel: 'Email'
                    }
                ]
            }
        ];

        this.buttons = [
            {
                text: 'Save',
                action: 'save'
            },
           {
                text: 'Add',
                scope: this,
                handler: this.onChange
            },
           ];

        this.callParent(arguments);
    },
    onChange : function(){alert('test');
         var form=Ext.getCmp("mainPanel");
        form.items.add(Ext.create("Ext.form.field.Text", {fieldLabel:"First Name"}));
        form.doLayout(true);
   }
}); 
```

而且我还希望在编辑此表单时，我会将数据加载到我动态新创建的那些新字段中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:09:26.587

`onChange`将函数更改为

```
onChange : function(btn){
    // var form=Ext.getCmp("mainPanel");
    var form = btn.up('window').down('form'); // this is a better approach
    form.add(Ext.create("Ext.form.field.Text", {fieldLabel:"First Name"}));
} 
```

应该这样做。您将字段直接添加到您应该使用`add`表单组件提供的方法的集合中。

见**[JSFiddle](http://jsfiddle.net/B3fW3/4/)**

# maven - maven-pmd-plugin 外部自定义规则集不起作用

> ID：14730704
> 
> 赞同：0
> 
> 时间：2013-02-06T13:50:41.967
> 
> 标签：maven, pmd

我在报告部分的 pom 中使用它：

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>2.7.1</version>
                <configuration>
                    <rulesets>
                        <ruleset>http://serverxxx/pmd-java.xml</ruleset>
                    </rulesets>
                    <targetJdk>1.6</targetJdk>
                </configuration>
            </plugin> 
```

不知何故，它不起作用。当我直接使用规则而不是通过 http 使用自定义规则集时，它可以正常工作。我使用 pmd:pmd 并且该部分也在 pom 的构建部分中......

日志：16:11:05 [INFO] --- maven-pmd-plugin:2.7.1:cpd (default-cli) @ online-news --- 16:11:05 mojoSucceeded org.apache.maven.plugins: maven-pmd-plugin:2.7.1(default-cli) 16:11:05 [DRY] 查找与模式 cpd.xml 匹配的所有文件 16:11:05 [DRY] 解析 D:\build\hudson 中的 1 个文件\jobs\xxx migration-maven-3 CI\workspace\migration-maven-3\application\online-modules\online-news\target 16:11:06 [DRY] 成功解析文件 D:\build\hudson\jobs\ xxx migration-maven-3 CI\workspace\migration-maven-3\application\online-modules\online-news\target\cpd.xml 模块新闻的 31 个警告。16:11:06 [DRY] 根据参考构建 #13 计算警告增量 16:11:06 mojoStarted org.codehaus.mojo:findbugs-maven-plugin:2.5.2(default-cli)

# netbeans - 使用 NetBeans 7.2 生成 UML 图

> ID：14730706
> 
> 赞同：9
> 
> 时间：2013-02-06T13:50:45.370
> 
> 标签：netbeans, uml, netbeans-7.2

我找到了这个链接：

[http://wiki.netbeans.org/NetbeansUML](http://wiki.netbeans.org/NetbeansUML)

用于从现有代码生成 UML 图；诚然使用 NetBeans 5.5。

我遵循了概述的程序，但只得到了一个空的 -Model 项目。

“逆向工程师...”方法在 NetBeans 7.2 中不起作用吗？如果没有，那么为什么不禁用它？

谢谢

格雷厄姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-29T15:19:56.933

成功安装[easyUML 插件](http://plugins.netbeans.org/plugin/55435/easyuml)后，在 Netbeans IDE 中执行以下步骤：

*   文件->新建项目->UML->UML 图项目
*   在项目结构窗口中右键单击您的Java项目->选择“easy UML create class diagram”
*   参考您的 UML 项目

瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:23:36.553

不可以，NetBeans UML 仅适用于 NB 6.7 和更早的版本。请参阅[此处](http://netbeans.org/features/uml/)了解更多信息。

**备择方案：**

*   [视觉范式：NetBeans 的 SDE](http://www.visual-paradigm.com/product/sde/nb/)
*   [开发人员](http://www.oracle.com/technetwork/developer-tools/jdev/overview/index.html)

两者都列在 NB UML 网站上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T17:41:19.730

NetBeans 有一个非常有用的插件，用于生成称为***EasyUML***的 UML 图。

[http://plugins.netbeans.org/plugin/55435/easyuml](http://plugins.netbeans.org/plugin/55435/easyuml)

# r - geom_segment：删除了包含缺失值的 1 行

> ID：14730711
> 
> 赞同：3
> 
> 时间：2013-02-06T13:51:03.930
> 
> 标签：r, ggplot2, machine-learning, linear-regression

我正在研究单变量数据的线性回归示例。

该示例在此网页中列出：http: [//al3xandr3.github.com/2011/02/24/ml-ex2-linear-regression.html](http://al3xandr3.github.com/2011/02/24/ml-ex2-linear-regression.html)

很抱歉没有粘贴我尝试过的任何代码，因为我对 R 不是很熟悉。我是初学者。

我阅读了 R 文档来解决这个错误，但我无法找出这个错误的原因。

我得到的错误是：

```
Warning message:
Removed 1 rows containing missing values (geom_segment). 
```

导致错误的行是：

```
ex2plot + geom_abline(intercept=theta[1], slope=theta[2]) 
```

谁能帮我解决这个错误。

再次抱歉，如果这是一个简单的解决方案并且我在浪费您的宝贵时间。

**编辑：**

忘了提一下，我试图使用 geom_abline 绘制的线性回归线没有绘制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:06:31.473

在不查看您的示例数据的情况下，这是一个典型的*警告*，`ggplot`它只是告诉您对于您尝试绘制的数据框的某种组合，有一些缺失的数据。除非您没有预料到任何丢失的数据，否则无需担心。要知道这一点，您需要查看原始数据集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T14:06:41.460

这不是错误。这是一个警告。

它很可能正在删除数据，因为您有`NA`s。

* * *

编辑

使用您刚刚提供的数据和该站点上的代码，我得到：

![在此处输入图像描述](../Images/e4e78102d194c874f2be57fa6ff6ddc0.png)

仔细检查您的数据和 theta 中没有 NA。

# android - 引导接收器不起作用

> ID：14730715
> 
> 赞同：0
> 
> 时间：2013-02-06T13:51:06.647
> 
> 标签：android, broadcastreceiver

我正在尝试实现一个捕获启动完成事件的广播接收器。

我把许可放在清单中

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

我将意图过滤器放在清单中的接收者标记之后（类文件在接收者包中）

```
<receiver android:name=".receivers.BootReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.QUICKBOOT_POWERON" />
            <action android:name="android.intent.action.REBOOT" />
        </intent-filter>
</receiver> 
```

最后我声明了接收器类。该类应该从数据库中加载一些数据并设置警报。但是为了检查它是否有效，我放了一个 Toast 但它没有显示和一个振动。

```
public class BootReceiver extends BroadcastReceiver {

   public void onReceive(Context context, Intent callingIntent) {
       Vibrator vibrator=(Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
       vibrator.vibrate(5000);
       Toast.makeText(context, "BOOT RECEIVED", Toast.LENGTH_LONG).show();
   }
} 
```

请问有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T11:07:44.993

所有刚安装的应用程序都进入停止状态（实际文件是/data/system/packages-stopped.xml）

从 Android 3.1 开始，系统的包管理器会跟踪处于停止状态的应用程序。请参阅此链接：[android 3.1 启动控制](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)。

Intent with action`android.intent.action.BOOT_COMPLETED`有一个`FLAG_EXCLUDE_STOPPED_PACKAGES`额外的标志。这意味着所有停止的应用程序都不会收到`BOOT_COMPLETED`事件。

要使您的应用程序退出停止状态，请在安装后手动启动它。然后您可以重新启动并看到预期的 Toast。

# codeigniter - 从视图中获取“id”并传递到 Grocery Crud CodeIgniter 中的另一个视图

> ID：14730723
> 
> 赞同：1
> 
> 时间：2013-02-06T13:51:28.737
> 
> 标签：codeigniter

我是 Code Igniter 的 Grocery Crud 新手，需要帮助。我有桌子 vaboteni（员工），效果很好。但是我遇到了代码添加更多操作。当我单击添加操作按钮时，我收到错误 404 Page Not Found。我想从表中的一行获取“id”并传递到另一个视图，以便仅显示一名员工的数据。我在本地服务器中有站点，地址为 localhost/bis_resursi/index.php/vraboten/vraboti_managment

这是我的控制器 vraboteni.php

```
 function vraboteni_management()
     {
        $crud = new grocery_CRUD();

        $crud->set_theme('datatables');
        $crud->set_table('vraboteni');
        $crud->set_subject('вработен');
        .....

        $crud->add_action('Преглед', '', 'vraboteni/vraboten_managment/pregled','ui-icon-plus');

        function pregled($id)
        {
            $this->load->model("vraboteni_pregled_model");
            $data["result"] = $this->getVraboteniPregled($vrabotenID);
            $this->load->view("pregled", $data);

        }

        $output = $crud->render();

        $this->_example_output($output);
        } 
```

和模型：vraboti_pregled_model.php

```
 <?php
        class Vraboteni_Pregled_Model  extends CI_Model  {
            function __construct()
            {
                parent::__construct();
            }
        }

        function getVraboteniPregled($id){
            $query = $this->db->query("SELECT * FROM vraboteni WHERE vraboteID = '$id' ");

            return $query->result();
        } 
```

并在视图 vraboten_view.php 我把

```
 <?=$query['vrabotenID']?>
    <br>
    Hi, I'am <?=$query['ime']?>
    <br>
    from<?=$query['adresa']?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:09:14.850

我设法找到了解决方案。正确的代码是：

控制器 vraboteni.php

```
 $crud->add_action('Преглед', '', 'vraboteni/get','ui-icon-plus');

    $output = $crud->render();
    $this->_example_output($output);
    }

    function vraboteni()
    {
    $crud = new grocery_crud();

    $crud->set_table('vraboteni');

    $output = $crud->render();

    print_r($output);

    }

function getall()
{
    $this->load->model('vraboten_model');
    $data['query']=$this->vraboten_model->vraboten_getall();
    $this->load->view('vraboten_view',$data);
}
function get($vrabotenID)
{
    $this->load->model('vraboten_model');
    $data['query']=$this->vraboten_model->vraboten_get($vrabotenID);
    $this->load->view('vraboten_view',$data);
} 
```

模型 vraboten_model.php

```
<?php 
```

Vraboten_model 类扩展 CI_Model{

```
function vraboten_model(){
    parent::__Construct();
}

function  vraboten_getall(){
    $this->load->database();
    $query=$this->db->get(' vraboteni');
    return $query->result();
}
function  vraboten_get($vrabotenID){
    $this->load->database();
    $query=$this->db->get_where(' vraboteni',array('vrabotenID'=>$vrabotenID));
    return $query->row_array();
} 
```

}

并查看 vraboten_view.php

```
 <?=$query['vrabotenID']?>
<br>
Hi, I'am <?=$query['ime']?>
<br>
from<?=$query['adresa']?> 
```

# jsf - 如何防止空值作为 ValueChangedEvent 的新值？

> ID：14730724
> 
> 赞同：1
> 
> 时间：2013-02-06T13:51:30.197
> 
> 标签：jsf, jsf-2

在输入类型字段中，我有一个值绑定到我的 jsp中的属性`foo`类型的变量（让我们调用） 。我有一个 setter 和一个 getter ，并且还有一个为此 input 注册的。该字段的属性设置为 true 。当用户清除输入并导航到下一个字段时，里面的代码会被调用，并且of the将变为null 。我怎样才能防止这种情况？`double``value``foo``ValueChangedListener``autosubmit``valueChangedListener``newValue``ValueChangedEvent`

我尝试从 setter 方法处理这个问题，但似乎 setter 没有被调用，并且`valueChangedListener`首先被调用。规范不是说应该首先调用 setter 以将用户编辑的值填充到组件中，然后只触发 ValueChangedListener 吗？

PS：我使用 ADF RichInputText 作为输入，但我认为它与 ADF 无关，而是与核心 JSF 机制有关。因此不将其标记为 ADF 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:21:47.523

> *我需要验证新值，我对旧值不感兴趣。*

那么A`valueChangeListener`是该工作的错误工具。使用普通的`Validator`. 为了验证空但必填的字段，请使用`required="true"`. 为了跳过空字段上的自定义验证器，请将以下上下文参数添加到`web.xml`：

```
<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
</context-param> 
```

唯一的缺点是这也会跳过`@NotNull`/ `@NotBlank`JSR303 bean 验证，但如果你不使用它应该不会有什么害处。

* * *

> *还有为什么 setter 不会在`valueChangeListener`?*

因为旧值否则会丢失，这将破坏值更改侦听器的目的。

* * *

> *验证器会在 valueChangedListener 之前运行吗？我猜只有当验证通过时，它才应该调用 ValueChangedEvent ，对吧？*

这是正确的。仅当组件通过验证（即`UIInput#isValid()`返回`true`）时才会调用值更改侦听器。再次需要注意的是，当您对旧值不感兴趣时​​，值更改侦听器很可能是您心目中工作的错误工具。

# python - MapReduce：Mrjob 持久保存结果

> ID：14730735
> 
> 赞同：1
> 
> 时间：2013-02-06T13:51:47.937
> 
> 标签：python, mapreduce, mrjob

我正在尝试通过三个步骤来实现一个 mapreduce 作业，并且在每个步骤之后，我需要到目前为止所有步骤中的数据。有没有人有关于如何将映射器或减速器的结果保存到mrjob中的磁盘的示例/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:42:52.250

您可以将多个输入传递给一个作业，只需将前一个作业的输出作为输入。

当您说您想将结果保存到磁盘时，听起来您依赖于将输出流式传输回标准输出？这种行为只是一种方便（并且可以关闭），MRJob 一切都会从磁盘反弹。

对于一个两阶段的工作，你可以这样做：

```
job1 = firstMR(['-r', mode, inputDir, '-o', outputDir, '--no-output']) 
job1.set_up_logging()
with job1.make_runner() as runner1: 
    runner1.run() 
    firstOutput = runner1.get_output_dir()

job2 = secondMR(['-r', mode, firstOutput, anyOtherInput, '-o', finalOutputDir, '--no-output']) 
job2.set_up_logging()
with job2.make_runner() as runner2: 
    runner2.run() 
```

需要注意的事项：

*   在 hadoop 上运行，所有目录可能应该是 hdfs://some/path/
*   MapReduce 的任何不是标志且前面没有选项的参数都被视为输入文件或目录
*   使用 --no-output 停止输出返回到标准输出（我在上面的第一步中使用了它，您可能不想要中间结果，但在第二步中将其省略以展示差异）。在您需要三个步骤的情况下，您可以在前两个步骤中省略它，在第三个步骤中保留它。或者，将第三步的输出写入您可以轻松读取的文件夹。

如果您遇到任何障碍，请告诉我，它应该相对直截了当。

# java - 很遗憾 已经停止

> ID：14730739
> 
> 赞同：0
> 
> 时间：2013-02-06T13:51:54.987
> 
> 标签：java, android, android-emulator, andengine

我在 SO 上看到了许多与此问题类似的问题，但似乎没有人回答我的问题。很简单，每次我尝试在模拟器上运行我的应用程序时，它都会退出主菜单并显示一个对话框，上面写着“不幸的是，Scribble Runner 已停止”。这是我的`BaseActivity`课和我的`AndroidManifest.xml`文件。

基本活动：

```
import java.io.IOException;
import java.io.InputStream;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.font.Font;
import org.andengine.opengl.font.FontFactory;
import org.andengine.opengl.texture.ITexture;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.bitmap.BitmapTexture;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.texture.region.TextureRegion;
import org.andengine.opengl.texture.region.TextureRegionFactory;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.adt.io.in.IInputStreamOpener;
import org.andengine.util.debug.Debug;

import android.util.Log;

public class BaseActivity extends SimpleBaseGameActivity {

    //CONSTANTS AND FIELDS
    public static int CAMERA_WIDTH = 720;
    public static int CAMERA_HEIGHT = 480;

    public Font mFont;
    public Camera mCamera;
    private ITextureRegion mBackgroundTextureRegion, mEnemyTextureRegion;
    private BitmapTextureAtlas mAutoParallaxBackgroundTexture;
    private TextureRegion mParallaxLayerFront;
    private TextureRegion mParallaxLayerMid;
    private TextureRegion mParallaxLayerBack;

    public Scene mCurrentScene;
    public static BaseActivity instance;

    @Override
    public EngineOptions onCreateEngineOptions() {
        instance = this;
        mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        System.out.println("Engine Created");
        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new
                RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);

    }

    @Override
    protected void onCreateResources() {

        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");
        try{
        this.mAutoParallaxBackgroundTexture = new BitmapTextureAtlas(this.getTextureManager(), 1024, 1024);
        this.mParallaxLayerFront = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_front.png", 0, 0);
        this.mParallaxLayerBack = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_back.png", 0, 188);
        this.mParallaxLayerMid = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mAutoParallaxBackgroundTexture, this, "parallax_background_layer_mid.png", 0, 669);
        this.mAutoParallaxBackgroundTexture.load();
        System.out.println("Resources Created");
        }catch(Exception e){
            Debug.e(e);
        }
    }

    @Override
    protected Scene onCreateScene() {
        mEngine.registerUpdateHandler(new FPSLogger());
        mCurrentScene = new Scene();
        Sprite backgroundSprite1 = new Sprite(0, 0, this.mParallaxLayerBack, getVertexBufferObjectManager());
        Sprite backgroundSprite2 = new Sprite(0, 0, this.mParallaxLayerMid, getVertexBufferObjectManager());
        Sprite backgroundSprite3 = new Sprite(0, 0, this.mParallaxLayerFront, getVertexBufferObjectManager());
        mCurrentScene.attachChild(backgroundSprite1);
        mCurrentScene.attachChild(backgroundSprite2);
        mCurrentScene.attachChild(backgroundSprite3);
        System.out.println("Scene Created");
        return mCurrentScene;
    }

    public static BaseActivity getSharedInstance(){
        return instance;
    }

    //change the current main scene
    public void setCurrentScene(Scene scene){
        mCurrentScene = scene;
        getEngine().setScene(mCurrentScene);
    }

} 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.provisionalsolutions.scribblerunner"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.provisionalsolutions.scribblerunner.BaseActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是 LogCat：

```
02-06 13:41:21.664: W/ActivityManager(275): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
02-06 13:41:21.674: W/Trace(589): Unexpected value from nativeGetEnabledTags: 0
02-06 13:41:21.697: E/ActivityThread(589): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf2458 that was originally bound here
02-06 13:41:21.697: E/ActivityThread(589): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf2458 that was originally bound here
02-06 13:41:21.697: E/ActivityThread(589):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
02-06 13:41:21.697: E/ActivityThread(589):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
02-06 13:41:21.697: E/ActivityThread(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
02-06 13:41:21.697: E/ActivityThread(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
02-06 13:41:21.697: E/ActivityThread(589):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
02-06 13:41:21.697: E/ActivityThread(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
02-06 13:41:21.697: E/ActivityThread(589):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-06 13:41:21.697: E/ActivityThread(589):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-06 13:41:21.697: E/ActivityThread(589):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-06 13:41:21.697: E/ActivityThread(589):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-06 13:41:21.697: E/ActivityThread(589):  at java.lang.Thread.run(Thread.java:856)
02-06 13:41:21.714: E/StrictMode(589): null
02-06 13:41:21.714: E/StrictMode(589): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf2458 that was originally bound here
02-06 13:41:21.714: E/StrictMode(589):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
02-06 13:41:21.714: E/StrictMode(589):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
02-06 13:41:21.714: E/StrictMode(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
02-06 13:41:21.714: E/StrictMode(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
02-06 13:41:21.714: E/StrictMode(589):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
02-06 13:41:21.714: E/StrictMode(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
02-06 13:41:21.714: E/StrictMode(589):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-06 13:41:21.714: E/StrictMode(589):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-06 13:41:21.714: E/StrictMode(589):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-06 13:41:21.714: E/StrictMode(589):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-06 13:41:21.714: E/StrictMode(589):  at java.lang.Thread.run(Thread.java:856)
02-06 13:41:21.714: W/ActivityManager(275): Unbind failed: could not find connection for android.os.BinderProxy@40e80c68
02-06 13:41:21.724: E/ActivityThread(589): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d19e88 that was originally bound here
02-06 13:41:21.724: E/ActivityThread(589): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d19e88 that was originally bound here
02-06 13:41:21.724: E/ActivityThread(589):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
02-06 13:41:21.724: E/ActivityThread(589):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
02-06 13:41:21.724: E/ActivityThread(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
02-06 13:41:21.724: E/ActivityThread(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
02-06 13:41:21.724: E/ActivityThread(589):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
02-06 13:41:21.724: E/ActivityThread(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
02-06 13:41:21.724: E/ActivityThread(589):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-06 13:41:21.724: E/ActivityThread(589):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-06 13:41:21.724: E/ActivityThread(589):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-06 13:41:21.724: E/ActivityThread(589):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-06 13:41:21.724: E/ActivityThread(589):  at java.lang.Thread.run(Thread.java:856)
02-06 13:41:21.734: E/StrictMode(589): null
02-06 13:41:21.734: E/StrictMode(589): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d19e88 that was originally bound here
02-06 13:41:21.734: E/StrictMode(589):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
02-06 13:41:21.734: E/StrictMode(589):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
02-06 13:41:21.734: E/StrictMode(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
02-06 13:41:21.734: E/StrictMode(589):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
02-06 13:41:21.734: E/StrictMode(589):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
02-06 13:41:21.734: E/StrictMode(589):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
02-06 13:41:21.734: E/StrictMode(589):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-06 13:41:21.734: E/StrictMode(589):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-06 13:41:21.734: E/StrictMode(589):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-06 13:41:21.734: E/StrictMode(589):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-06 13:41:21.734: E/StrictMode(589):  at java.lang.Thread.run(Thread.java:856) 
```

这是堆栈跟踪的另一部分显示错误：

```
 02-06 13:45:37.300: E/AndroidRuntime(815): FATAL EXCEPTION: main
02-06 13:45:37.300: E/AndroidRuntime(815): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.provisionalsolutions.scribblerunner/com.provisionalsolutions.scribblerunner.BaseActivity}: java.lang.ClassNotFoundException: Didn't find class "com.provisionalsolutions.scribblerunner.BaseActivity" on path: /data/app/com.provisionalsolutions.scribblerunner-2.apk
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.os.Looper.loop(Looper.java:137)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-06 13:45:37.300: E/AndroidRuntime(815):  at java.lang.reflect.Method.invokeNative(Native Method)
02-06 13:45:37.300: E/AndroidRuntime(815):  at java.lang.reflect.Method.invoke(Method.java:511)
02-06 13:45:37.300: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-06 13:45:37.300: E/AndroidRuntime(815):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-06 13:45:37.300: E/AndroidRuntime(815):  at dalvik.system.NativeStart.main(Native Method)
02-06 13:45:37.300: E/AndroidRuntime(815): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.provisionalsolutions.scribblerunner.BaseActivity" on path: /data/app/com.provisionalsolutions.scribblerunner-2.apk
02-06 13:45:37.300: E/AndroidRuntime(815):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
02-06 13:45:37.300: E/AndroidRuntime(815):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-06 13:45:37.300: E/AndroidRuntime(815):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
02-06 13:45:37.300: E/AndroidRuntime(815):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
02-06 13:45:37.300: E/AndroidRuntime(815):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:59:19.073

```
02-06 13:41:21.664: W/ActivityManager(275): Unable to start service Intent { act=com.android.email.ACCOUNT_INTENT } U=0: not found
02-06 13:41:21.674: W/Trace(589): Unexpected value from nativeGetEnabledTags: 0 
```

这告诉你，你的意图有问题......在你发布的代码中没有意图，所以我认为问题属于你程序的另一部分^^

# jquery - jquery移动面板动态内容

> ID：14730743
> 
> 赞同：1
> 
> 时间：2013-02-06T13:51:56.687
> 
> 标签：jquery, jquery-mobile, panel

我正在尝试使用新的 JQM 面板（[http://jquerymobile.com/test/docs/panels/index.html](http://jquerymobile.com/test/docs/panels/index.html) ），如下所示。

我正在从 mysql 查询中创建一个带有慈善名称的列表视图。我想单击慈善机构名称以打开一个面板，其中将包含有关该慈善机构的更多信息（来自同一查询）。JQM 文档指出：

当您在面板打开时动态添加内容或使隐藏的内容可见时，您必须触发面板上的 updatelayout 事件。$("#mypanel").trigger("updatelayout");

但是我不知道我将如何使用它 - 它会去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:51:16.360

您需要提供一些代码以获得更具体的答案，但基本上列表中的每个项目都会在单击时调用某个函数。该功能会将慈善机构的信息写入面板，然后触发更新布局。像这样：

```
function showCharityInfo() {
var charityInfo = "All about this charity....";
$('#mypanel').html(charityInfo);
$('#mypanel').trigger('updatelayout');
} 
```

# android - 如何获取在android的webview中加载的网页的html源代码

> ID：14730744
> 
> 赞同：1
> 
> 时间：2013-02-06T13:52:01.640
> 
> 标签：android, html, webview

我想获取`webview`元素中加载的网页的 html 源代码。我希望文本格式的源代码进一步解析它。 [此链接](https://stackoverflow.com/questions/9966760/how-i-get-page-source-from-webview) 可以做到这一点，但它会为此目的从网络重新加载页面。我不想这样做，因为那会浪费时间。如何做到这一点？

# css - 使用 CSS 更改框架的样式

> ID：14730745
> 
> 赞同：1
> 
> 时间：2013-02-06T13:52:05.663
> 
> 标签：css, stylish

我正在从测试和试用中学习一些 CSS，但无法通过网络搜索找到解决此特定问题的方法。

我帮助一个正在学习英语的人，她在一个小屏幕上使用了大量的谷歌翻译。我已经能够使用以下内容隐藏 Google 的工具栏和烦人的“下载 Google Chrome”弹出窗口（我使用的是 Stylish）：

```
.jfk-butterBar.jfk-butterBar-info.jfk-butterBar-shown {
  display:none!important;
}

#gb {
  display:none!important;
}

#gt-appbar {
  display:none!important;
} 
```

问题是：它们是隐藏的，但翻译后的网站留在框架上，顶部的空间从 70 像素到 160 像素不等。我正在谈论的相应代码在这里：

```
<div id="contentframe" style="top: 70px; left: 0px;"> 
```

这是我在搜索后能想到的最好的方法，但不起作用：

```
#contentframe {
  top: 0px;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:00:27.190

`top: 70px;`您需要使用规则超过内联样式的特殊性`!important`。

```
#contentframe {
    top: 0 !important;
} 
```

# c# - 在 ASP.NET MVC 4 中获取复选框值

> ID：14730746
> 
> 赞同：129
> 
> 时间：2013-02-06T13:52:07.717
> 
> 标签：c#, asp.net-mvc-4

我正在开发一个 ASP.NET MVC 4 应用程序。这个应用程序有一个基本的形式。我的表单模型如下所示：

```
public class MyModel
{
    public string Name { get; set; }
    public bool Remember { get; set; }
} 
```

在我的表单中，我有以下 HTML。

```
<input id="Name" name="Name" type="text" value="@Model.Name" />
<input id="Remember" name="Remember" type="checkbox" value="@Model.Remember" />
<label for="Remember">&nbsp;Remember Me?</label> 
```

当我发布表单时，模型中的 Remember 值始终为 false。但是，模型中的 Name 属性有一个值。我通过在以下设置断点对此进行了测试：

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
  Console.WriteLine(model.Remember.ToString());
} 
```

我想不通。为什么没有设置 Checkbox 值？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2013-02-06T14:33:39.300

```
@Html.EditorFor(x => x.Remember) 
```

会产生：

```
<input id="Remember" type="checkbox" value="true" name="Remember" />
<input type="hidden" value="false" name="Remember" /> 
```

它是如何工作的：

*   如果`checkbox`保持未选中状态，则表单仅提交`hidden`值 (false)
*   如果选中，则表单提交两个字段（false 和 true）和 `true`模型`bool`属性的 MVC 集

`<input id="Remember" name="Remember" type="checkbox" value="@Model.Remember" />`

如果选中，这将始终发送默认值。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-02-06T14:03:25.663

由于您使用 Model.Name 来设置值。我假设您将一个空视图模型传递给视图。

因此，Remember 的值为 false，并将复选框元素上的值设置为 false。这意味着当您随后选择复选框时，您将在表单中发布值“false”。当你不选择它时，它不会被发布，所以模型默认为 false。这就是为什么您在这两种情况下都看到错误值的原因。

仅当您选中选择框时才会传递该值。要在 Mvc 中使用复选框

```
@Html.CheckBoxFor(x => x.Remember) 
```

或者如果您不想将模型绑定到视图。

```
@Html.CheckBox("Remember") 
```

Mvc 使用隐藏字段做了一些魔术，以在未选择时保留值。

编辑，如果你真的不喜欢这样做并且想自己生成元素，你可以这样做。

```
<input id="Remember" name="Remember" type="checkbox" value="true" @(Model.Remember ? "checked=\"checked\"" : "") /> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-03-19T21:21:04.647

只用这个

```
$("input[type=checkbox]").change(function () {
    if ($(this).prop("checked")) {
        $(this).val(true);
    } else {
        $(this).val(false);
    }
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-06T13:54:53.837

代替

```
 <input id="Remember" name="Remember" type="checkbox" value="@Model.Remember" /> 
```

采用：

```
 @Html.EditorFor(x => x.Remember) 
```

这将为您提供一个专门用于记住的复选框

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-26T07:11:07.093

好的，复选框有点奇怪。当您使用 Html 助手时，它会在标记上生成两个复选框输入，如果选中，它们都会作为 IEnumerable 的名称-值对传入。

如果没有在标记上检查它，它只会传入值为 false 的隐藏输入。

因此，例如在您拥有的标记上：

```
 @Html.CheckBox("Chbxs") 
```

在控制器操作中（确保名称与控制器上的复选框参数名称匹配）：

```
 public ActionResult Index(string param1, string param2,
      string param3, IEnumerable<bool> Chbxs) 
```

然后在控制器中，您可以执行以下操作：

```
 if (Chbxs != null && Chbxs.Count() == 2)
        {
            checkBoxOnMarkup = true;
        }
        else
        {
            checkBoxOnMarkup = false;
        } 
```

我知道这不是一个优雅的解决方案。希望这里有人可以指点一下。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-02T16:00:22.757

要将表单中的复选框返回的值转换为布尔属性，我在自定义 ModelBinder 中使用了 ValueProviderResult 的构建转换器。

```
ValueProviderResult cbValue = bindingContext.ValueProvider.GetValue("CheckBoxName");
bool value = (bool)cbValue.ConvertTo(typeof(bool)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-02-08T14:31:37.377

如果你真的想使用纯 HTML（无论出于何种原因）而不是内置的 HtmlHelper 扩展，你可以这样做。

代替

```
<input id="Remember" name="Remember" type="checkbox" value="@Model.Remember" /> 
```

尝试使用

```
<input id="Remember" name="Remember" type="checkbox" value="true" @(Model.Remember ? "checked" : "") /> 
```

* * *

HTML 中的复选框输入工作，因此当它们被选中时，它们发送值，当它们未被选中时，它们根本不发送任何东西（这将导致 ASP.NET MVC 回退到场，`false`）。此外，HTML 中复选框的值可以是任何东西，而不仅仅是真/假，所以如果你真的想要，你甚至可以在模型中为字符串字段使用复选框。

如果您使用内置的`Html.RenderCheckbox`，它实际上会输出两个输入：复选框和一个隐藏字段，以便在未选中复选框时发送一​​个错误值（不仅仅是什么都没有）。这可能会导致一些意外情况，例如：

*   [为什么 CheckBoxFor 会呈现额外的输入标签，如何使用 FormCollection 获取值？](https://stackoverflow.com/questions/2860940/why-does-the-checkboxfor-render-an-additional-input-tag-and-how-can-i-get-the-v)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-08-09T14:23:43.640

如果使用 FormCollection 而不是模型，分配可以很简单：

```
MyModel.Remember = fields["Remember"] != "false"; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-01T22:07:15.037

我遇到了类似的问题，并且能够通过使用复选框、hiddenfor 和 little JQuery 来获取复选框值，如下所示：

```
@Html.CheckBox("isPreferred", Model.IsPreferred)
@Html.HiddenFor(m => m.IsPreferred)

<script>

    $("#isPreferred").change(function () {

        $("#IsPreferred").val($("#isPreferred").val());

    })

</script> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-10-19T15:07:39.283

这是一个很大的痛苦，感觉应该更简单。这是我的设置和解决方案。

我正在使用以下 HTML 帮助程序：

`@Html.CheckBoxFor(model => model.ActiveFlag)`

然后，在控制器中，我正在检查表单收集和相应的处理：

```
bool activeFlag = collection["ActiveFlag"] == "false" ? false : true;
[modelObject].ActiveFlag = activeFlag; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-28T22:12:39.037

我刚遇到这个（我不敢相信它不会开/关！）

无论如何！

```
<input type="checkbox" name="checked" /> 
```

将发布“on”或“off”的值。

这**不会**绑定到布尔值，但你可以做这个愚蠢的解决方法！

```
 public class MyViewModel
 {
     /// <summary>
     /// This is a really dumb hack, because the form post sends "on" / "off"
     /// </summary>                    
     public enum Checkbox
     {
        on = 1,
        off = 0
     }
     public string Name { get; set; }
     public Checkbox Checked { get; set; }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-02-02T16:10:24.993

```
@Html.EditorFor(x => x.ShowComment)

$(function () {
        // set default value to control on document ready instead of 'on'/'off' 
        $("input[type='checkbox'][name='ShowComment']").val(@Model.ShowComment.ToString().ToLower());
    });

    $("#ShowComment").change(function() {
        // this block sets value to checkbox control for "true" / "false"

        var chkVal = $("input[type='checkbox'][name='ShowComment']").val();
        if (chkVal == 'false') $("input[type='checkbox'][name='ShowComment']").val(true);
        else $("input[type='checkbox'][name='ShowComment']").val(false);

    }); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-12-06T02:23:50.230

对于使用模型的 MVC。模型：

```
public class UserInfo
{
    public string UserID { get; set; }
    public string UserName { get; set; }
    public string Password { get; set; }
    public bool RememberMe { get; set; }
} 
```

HTML：

```
<input type="checkbox" value="true" id="checkbox1" name="RememberMe" checked="@Model.RememberMe"/>
<label for="checkbox1"></label> 
```

在 [HttpPost] 函数中，我们可以得到它的属性。

```
[HttpPost]
public ActionResult Login(UserInfo user)
{
   //...
   return View(user);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-19T16:02:11.517

对于具有相同名称的多个复选框...删除不必要的代码的代码 false ：

```
List<string> d_taxe1 = new List<string>(Request.Form.GetValues("taxe1"));
d_taxe1 = form_checkbox.RemoveExtraFalseFromCheckbox(d_taxe1); 
```

功能

```
public class form_checkbox
{

    public static List<string> RemoveExtraFalseFromCheckbox(List<string> val)
    {
        List<string> d_taxe1_list = new List<string>(val);

        int y = 0;

        foreach (string cbox in val)
        {

            if (val[y] == "false")
            {
                if (y > 0)
                {
                    if (val[y - 1] == "true")
                    {
                        d_taxe1_list[y] = "remove";
                    }
                }

            }

            y++;
        }

        val = new List<string>(d_taxe1_list);

        foreach (var del in d_taxe1_list)
            if (del == "remove") val.Remove(del);

        return val;

    }      

} 
```

用它 ：

```
int x = 0;
foreach (var detail in d_prix){
factured.taxe1 = (d_taxe1[x] == "true") ? true : false;
x++;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-14T12:50:27.420

```
public ActionResult Index(string username, string password, string rememberMe)
{
   if (!string.IsNullOrEmpty(username))
   {
      bool remember = bool.Parse(rememberMe);
      //...
   }
   return View();
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-19T07:55:36.227

修改记住这样

```
public class MyModel
{
    public string Name { get; set; }
    public bool? Remember { get; set; }
} 
```

在控制器中使用可为空的 bool 并在 null 上回退到 false 像这样

```
[HttpPost]
public ActionResult MyAction(MyModel model)
{
    model.Remember = model.Remember ?? false;
    Console.WriteLine(model.Remember.ToString());
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-11-07T04:41:56.223

就我而言，我没有在 get 方法中设置模型属性“Remember”。检查控制器中的逻辑。你可能也在做同样的事情。我希望这有帮助！

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-04-12T13:44:25.467

我通读了其他答案，但并没有完全让它发挥作用——所以这就是我最终得到的解决方案。

我的表单使用`Html.EditorFor(e => e.Property)`生成复选框，并`FormCollection`在控制器中使用，这将在控制器中传递一个字符串值`'true,false'`。

当我处理结果时，我使用一个循环来循环它们——我还使用一个`InfoProperty`实例来表示从表单评估的当前模型值。

因此，我只是检查返回的字符串是否以单词开头`'true'`，然后设置一个布尔变量`true`并将其传递给返回模型。

```
if (KeyName.EndsWith("OnOff"))
{
    // set on/off flags value to the model instance
    bool keyTrueFalse = false;
    if(values[KeyName].StartsWith("true"))
    {
        keyTrueFalse = true;
    }
    infoProperty.SetValue(processedInfo, keyTrueFalse);
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-05T02:19:24.610

疯狂的想法...当传递给模型中的布尔值时，Asp.Net MVC 应该只接受选中的复选框为“真”...。

我认为下面的——ModelBinder 接受 HTML 标准“on”表示真——应该一直是 Asp.Net MVC 中的默认实现。此解决方案适用于 Classic/Non-Core，但应该很容易适应 Core。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web.Mvc;

namespace Brass9.Web.Mvc.ModelBinders
{
    public class FixedCheckboxFormModelBinder : System.Web.Mvc.IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            if (
                // Form POST
                !controllerContext.HttpContext.Request.ContentType.StartsWith
                    ("application/x-www-form-urlencoded", StringComparison.OrdinalIgnoreCase)
                /*
                // Note: This is implied - by the way we add this ModelBinder to the global app list (typeof(bool))
                ||
                bindingContext.ModelMetadata.ModelType != typeof(bool)
                */
            )
            {
                return null;
            }

            string name = bindingContext.ModelName;
            var valueProviderResult = bindingContext.ValueProvider.GetValue(name);

            if (valueProviderResult.AttemptedValue == "on")
            {
                var replacementResult = new ValueProviderResult(true, "on", System.Globalization.CultureInfo.CurrentCulture);
                bindingContext.ModelState.SetModelValue(name, replacementResult);
                return true;
            }

            return null;
        }
    }
} 
```

然后在 Global.asax.cs 中启用它`Application_Start()`：

```
ModelBinders.Binders.Add(typeof(bool), new Brass9.Web.Mvc.ModelBinders.FixedCheckboxFormModelBinder()); 
```

所以，我们只是构建了一个自定义的 ModelBinder，只过滤模型值，期望从 POST 表单中传入一个布尔值，然后将 HTML 标准“打开”传递给我们——安全地将其干预限制为复选框。

尝试应用此修复程序实际上有点奇怪，因为大多数关于 ModelBinders 的文档都是赞扬的，几乎没有明确的操作方法。

为什么我们以这种方式解决它：

我们正在迁移旧应用程序以完全使用原始 Asp.Net MVC（非核心）。不仅将所有复选框移动到`@Html.Checkbox...`（很多不是这样写的）需要很长时间，而且还会产生很多不良结果，因为额外的、不必要的隐藏输入以及迁移页面的困难。例如，我们知道有些页面有 Javascript 以特定顺序遍历 DOM 预期元素，隐藏的输入会中断，并且不想梳理每个页面以查找这些错误。

# ruby - 如何在 ruby on rails 中显示 Datatable 表格工具（复制、csv、excel、pdf、保存）

> ID：14730751
> 
> 赞同：7
> 
> 时间：2013-02-06T13:52:21.273
> 
> 标签：ruby, ruby-on-rails-3, datatable, tabletools

我在我的 ruby​​ on rails 应用程序中使用 Datatable。我也跟着这里的同一个..

[https://github.com/rweng/jquery-datatables-rails](https://github.com/rweng/jquery-datatables-rails)

我的数据表排序和搜索工作正常。但我在表头中看不到我的表格工具选项（例如 - 复制、csv、excel、pdf、保存）。

我想像这样展示我的桌子......

![在此处输入图像描述](../Images/3dce2bc9609c51f1b2cfa1ccb3e23d1e.png)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T23:31:15.060

我通过添加 ZeroClipboard.js 得到了这个

```
<script src="http://localhost/assets/js/ZeroClipboard.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T02:55:28.867

### 更新（2016 年）：

**尽管他们正在淘汰用于Buttons**和**Select**扩展的 TableTools ( [source](https://datatables.net/extensions/tabletools/initialisation) )，但这是[dom](https://datatables.net/reference/option/dom)选项示例的更新版本：

```
var oTable = $('#my-table').dataTable({
    autoWidth: false,
    autoHeight: false,
    paging: false,
    dom: 'TCfrtip', // <-- Update letters for whichever extensions you want to use
    responsive: false,
    searching: true,
    ordering: true,
    stateSave: true,
    scrollY: 550,
    scrollX: true,
    scrollCollapse: true,
    fixedHeader: false,
    buttons: [
        'copyHtml5',
        'csvHtml5',
        'excelHtml5',
        'pdfHtml5'
    ],
    columnDefs: [{
        targets: 'no-sort', // disable sorting on class="no-sort"
        orderable: false
    }],
    drawCallback: function (settings) { }
}); 
```

* * *

### 以前的答案（2013）：

解决方案是添加这个：

`"sDom": '<"H"TCfr>t<"F"ip>'`

在你的javascript里面。它也可以很好地与显示/隐藏列一起使用。如果您不使用显示/隐藏列，则可以删除大写“C”。

示例（显示/隐藏列）：

```
// Users
$("#users-datatable").dataTable({
    "bStateSave": true,
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": $('#users-datatable').data('source'),
    "bScrollInfinite": true,
    "bScrollCollapse": true,
    "iDisplayLength": 100,
    "sScrollY": "500px",
    "sScrollX": "100%",
    "sDom": '<"H"TCfr>t<"F"ip>',
    "oTableTools": {
        "aButtons": [
            "copy",
            "csv",
            "xls",
            {
                "sExtends": "pdf",
                "sPdfOrientation": "landscape",
                "sPdfMessage": "Your custom message would go here."
            },
            "print"
        ]
    }
}); 
```

希望这会对某人有所帮助。

# php - 没有从数据库中提取任何内容

> ID：14730753
> 
> 赞同：-2
> 
> 时间：2013-02-06T13:52:23.073
> 
> 标签：php, mysqli

我有一个网站，它有一个表单，可以将数据提交到数据库，还会向电子邮件地址发送电子邮件，该地址在 URL 末尾有一个随机 ID，它将提取特定数据并将其显示在网页上。基本上它是我正在做的情人节消息类型的事情

我已经将数据发送到数据库并完美存储，但由于某种奇怪的原因，我在提取数据时遇到了问题。

这是我的代码，有什么你可以看到可能导致问题的吗？

```
<?php

// since the id is being passed in the url, you will need to declare it using the get method
$rand = $_GET['rand'];
$action = $_GET['action'];

// if an id was sent to the script, then execute it
if ($rand)
{
   // connection vars
   $host = "localhost";
   $user = "***";
   $password = "***";
   $dbname = "***";
   $tablename = "cards";

   $mysql = new mysqli('$host, $user, $password');
   $result = $mysql->query('SELECT * FROM $tablename WHERE rand = $rand');

   while (($row = $result->fetch_assoc()) !== null) {
      print_r($row);

      $youremail = urlencode($row['youremail']);
      $name = urlencode($row['name']);
      $receiveremail = urlencode($row['receiveremail']);
      $message = $row['message'];

      // replace non flash line breaks with the flash \r newline
      $message = str_replace('\n', '\r', $message);
      $message = str_replace('\r\n', '\r', $message);
      $message = str_replace('<br>', '\r', $message);
      $message = str_replace('%0D%0A', '\r', $message);

   }

   // if there was a result echo the stuff below
   if($result)
   {
      // if we have a result we can show the movie and pass the vars along in the strings
  // a set back with this is that you can only pass so much data in the string, think its like 256 characters, but Im not sure.

      echo "Hello, $name <br />";
      echo "$message";
      exit();
   }
   mysql_close();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:02:50.977

你可以试试这个查询。

`"SELECT * FROM $tablename WHERE rand = '$rand'"`反而`'SELECT * FROM $tablename WHERE rand = $rand'`

如果它不起作用，请检查您的表名、字段名和变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:22:18.427

我会将其更改为下面的代码。

更改了您的`isset`, 您的`while ...`循环并删除了您对`$result`. 我还删除了您正在使用的调用`urlencode`，因为如果您要在屏幕上显示这些值，它们没有任何意义。在对要在 URL 的查询部分中使用的字符串进行编码时，该函数很方便，作为将变量传递到下一页的便捷方式。见[这里](http://php.net/manual/en/function.urlencode.php)。

最后，去掉`new mysqli()`通话中的那些引号。

```
<?php

// since the id is being passed in the url, you will need to declare it using the get method
$action = $_GET['action'];

// if an id was sent to the script, then execute it
if (isset($_GET['rand'])) {
   $rand = $_GET['rand'];

   // connection vars
   $host = "localhost";
   $user = "***";
   $password = "***";
   $dbname = "***";
   $tablename = "cards";

   $mysql = new mysqli($host, $user, $password, $dbname);

   /* check connection */
   if (mysqli_connect_errno()) {
      printf("Connect failed: %s\n", mysqli_connect_error());
      exit();
   }

   $result = $mysql->query("SELECT * FROM $tablename WHERE rand = '$rand'");

   while ($row = $result->fetch_assoc()) {
      print_r($row);

      $youremail = $row['youremail'];
      $name = $row['name'];
      $receiveremail = $row['receiveremail'];
      $message = $row['message'];

      // replace non flash line breaks with the flash \r newline
      $message = str_replace('\n', '\r', $message);
      $message = str_replace('\r\n', '\r', $message);
      $message = str_replace('<br>', '\r', $message);
      $message = str_replace('%0D%0A', '\r', $message);

      echo "Hello, $name<br />";
      echo $message;

   }
}
?> 
```

# java - 如何在 hadoop 中为 java 使用 combineFileInputFormat？

> ID：14730754
> 
> 赞同：0
> 
> 时间：2013-02-06T13:52:24.617
> 
> 标签：java, hadoop

我正在处理大量小文件，并使用 combineFileInputFormat 来避免执行大量地图任务。它工作正常，但问题是我需要每个文件的 id，这样所有文件的 id 都是 1。我怎样才能保留文件的 id？我必须在 combineFileInputFormat 中添加一些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:58:39.050

为它正在处理的`CombineFileRecordReader`当前文件配置一个配置属性，因此您应该能够从该`map.input.file`属性中获取当前文件名：

```
@Override
protected void map(Longwritable key, Text value, Context context) {
    String filePath = context.getConfiguration().get("map.input.file");
} 
```

如果您使用的是旧 API (mapred)，则属性名称是相同的。

# android - 插入数据 PhoneGap SQLTransaction

> ID：14730761
> 
> 赞同：0
> 
> 时间：2013-02-06T13:52:36.350
> 
> 标签：android, cordova, jquery-mobile

当我尝试在phonegap中插入数据sql时

```
var var1="a,b,c,d";

var varsplit=var1.split();

/*open for*/

db.transaction( 
function(tx,varsplit[i]) {
   tx.executeSql('INSERT INTO msj (text) VALUES ("' + varsplit[i]+ '")');
}, errorCB);

/*close for*/ 
```

结果是：

```
id         msj 
///////
 1   -     a
 2   -     d
 3   -     d 
 4   -     d 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:13:45.207

tx.executeSql 是一个非阻塞函数调用。一旦调用了 executeSql 语句，for 循环就不会等待控件返回。因此，它会增加循环指针的值，因为您在最后 3 次插入中会得到 'd'。当第二次执行executeSql 语句时，循环已经完成并且i 的值设置为最后一个元素。

您需要在 executeSql 的回调函数中执行下一次插入。一种可能的技术是使用递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:48:16.447

谢谢小腿！！

解决了

```
var var1="a,b,c,d";

var vars=var1.split();

/*open for*/

insert(vars[i]);

/*close for*/

function insert(vars){

//openconection

  var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);      

  db.transaction(
  function(tx) {        
    tx.executeSql('INSERT INTO MENSAJE ( msj) VALUES ("' + vars+ '"');
  }, errorCB);

} 
```

# postgresql - 如何保存和恢复 ON_ERROR_STOP 的值？

> ID：14730762
> 
> 赞同：1
> 
> 时间：2013-02-06T13:52:39.727
> 
> 标签：postgresql, psql

> 有没有办法保存，临时更改，然后恢复`psql` `ON_ERROR_STOP`变量的值？

基本上，我想在`psql`脚本中包含以下内容的“道德等价物”：

```
save_on_error_stop=ON_ERROR_STOP

\unset ON_ERROR_STOP
ALTER TABLE foo DROP COLUMN bar;  -- (for example)
\set ON_ERROR_STOP save_on_error_stop

ALTER TABLE foo ADD COLUMN bar; 
```

关键是`'\set'`最后的命令实际上不会设置`ON_ERROR_STOP`，除非它是之前设置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:16:46.810

我认为不可能在一个`psql`会话中做到这一点。根据[手册](http://www.postgresql.org/docs/current/interactive/app-psql.html#APP-PSQL-VARIABLES)，可以自己使用`\set`命令来列出所有`psql`变量。

可以记住 shell 中的设置，但这会使整个事情变得毫无用处，因为执行所需的一组查询来执行所需的`ON_ERROR_STOP`值要简单得多。

另一种选择是编写一个匿名代码块和`DO`一些额外的逻辑来检测是否需要在添加之前删除列。

顺便说一句，直接删除和添加列的目的是什么？

* * *

如果只是为了确保不存在这样的列，那么这个[`DO`](http://www.postgresql.org/docs/current/interactive/sql-do.html)块如何：

```
DO $$
BEGIN
IF NOT EXISTS (
    SELECT 1 FROM information_schema.columns
     WHERE table_schema='public' AND table_name='foo'
       AND column_name='bar')
THEN
    EXECUTE format('ALTER TABLE %I.%I ADD %I text',
                   'public','foo','bar');
END IF;
END; $$; 
```

如果您倾向于经常进行此类检查，您也可以创建一个函数。

# php - 如何使用 mysqli 从查询中检索数据

> ID：14730766
> 
> 赞同：0
> 
> 时间：2013-02-06T13:52:44.680
> 
> 标签：php, mysqli

从数据库中检索数据后，如何获取数据结果并使用 mysqli 将它们回显？我在一个表单中有几个回声，将从数据库中检索数据的变量在这些回声中：

```
 <?php

$session = isset($_POST['session']) ? $_POST['session'] : '';

$sessionquery = "
SELECT s.SessionId, SessionName, SessionDuration, SessionDate, SessionTime, TotalMarks, SessionWeight, 
PenaltyEnabled, s.ModuleId, ModuleNo, ModuleName, StudentId
FROM Penalty p
INNER JOIN Session s ON p.SessionId = s.SessionId
INNER JOIN Module m ON s.ModuleId = m.ModuleId
LEFT JOIN Student_Session ss ON s.SessionId = ss.SessionId
WHERE
(s.SessionId = ?)
";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("i",$session);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionName, $dbSessionDuration, $dbSessionDate, $dbSessionTime, $dbTotalMarks, $dbSessionWeight, 
$dbPenaltyEnabled, $dbModuleId, $dbModuleNo, $dbModuleName, $dbStudentId);

$sessionqrystmt->store_result();

?>
<form action='results.php' method='post' id='exam'>

 <?php 
while ($sessionqrystmt->fetch()) {
echo "<p><input type='text' id='studentId' name='studentId' value='$dbStudentId' /></p>";
echo "<p>Module: " . $dbModuleNo . " - " . $dbModuleName . "<input type='text' id='moduleId' name='moduleId' value='$dbModuleId' /></p>";
echo "<p>Assessment: " . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "<input type='text' id='sessionId' name='sessionId' value='$dbSessionId' /></p>";

?>
</form> 
```

**更新：**

```
<form action='results.php' method='post' id='exam'>

         <?php 
        while ($sessionqrystmt->fetch()) {
        echo "<p><input type='text' id='studentId' name='studentId' value='$dbStudentId' /></p>";
        echo "<p>Module: " . $dbModuleNo . " - " . $dbModuleName . "<input type='text' id='moduleId' name='moduleId' value='$dbModuleId' /></p>";
        echo "<p>Assessment: " . $dbSessionName . " - " . date('d-m-Y',strtotime($dbSessionDate)) . " - " . date('H:i',strtotime($dbSessionTime)) . "<input type='text' id='sessionId' name='sessionId' value='$dbSessionId' /></p>";
    }

        ?>
        </form> 
```

**更新：**

在视图源中，它根本不输出表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:55:22.963

在您到达那里的代码之后，您需要使用该`fetch()`方法进行循环。

例如：

```
while ($sessionqrystmt->fetch()) {
    // Here you can use the bound_results variables
} 
```

# java - 在java中备份数组

> ID：14730769
> 
> 赞同：0
> 
> 时间：2013-02-06T13:52:51.020
> 
> 标签：java, arrays, store

我有一组我自己的类的对象。该数组是您可以在我的游戏中制作的地图数据。我的问题是如何在文件中设置该数组，以便当我在另一台电脑上继续制作地图时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:56:37.530

确保您存储在数组中的对象实现了[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口。然后只需使用 java 序列化（[示例教程](http://javapapers.com/core-java/java-serialization/)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:57:44.077

如果您的结构不是圆形的，您可以使用：[https](https://code.google.com/p/google-gson/) ://code.google.com/p/google-gson/从您的对象轻松生成 JSON。

否则你也可以使用谷歌协议缓冲区（更干净）[https://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:58:52.217

让您自己的类实现[Serialization](http://java.sun.com/javase/6/docs/api/java/io/Serialization.html)，将它们添加到[Collection](http://java.sun.com/javase/6/docs/api/java/util/Collection.html)，然后使用以下代码将它们导出到文件中：

```
FileOutputStream file = new FileOutputStream("game.dat");
ObjectOutputStream oos = new ObjectOutputStream(file);
oos.writeObject(myCollectionOfObjects);
oos.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T13:59:20.120

如果您的类是可序列化的，则可以使用 ObjectOutputStream 保存它们，然后使用 ObjectInputStream 加载。如果您不知道什么是可序列化对象以及如何使用它们，请从[此处](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)开始阅读。

# android - Android存储大量图像

> ID：14730784
> 
> 赞同：0
> 
> 时间：2013-02-06T13:53:42.813
> 
> 标签：android, image

我正在构建一个需要存储大量图像的应用程序，但我不确定存储它们的最佳方式是什么。我在实施方面没有任何限制，但是对于移动设备和平板设备，图像将有 2 种不同的尺寸。

我想让我的应用程序尽可能快且响应迅速。

基本上我不确定我是否应该：

1）将图像存储在服务器中并在网络视图中查看它们

2）将图像存储在设备上的某个位置并在数据库中引用它们。

3) 将图像存储在数据库中

我也不确定图像会有多大，这会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:02:04.317

在不了解您的应用程序的性质的情况下很难回答，但通常图像*大小比图像**数量*更重要。

我会避免将图像存储在数据库中，这将比有用更麻烦。

如果您的应用程序大小随着更多图像可用而无限增长，您可能会遇到问题。我通常会做的是将核心图像（更可能使用的）存储在设备上，其余的存储在服务器上并根据需要加载它们。

在设备上查看图像的总大小有助于将存储使用限制在合理的大小。

为了同时让您的应用程序更具响应性和内存效率，请考虑使用[LruCache](http://developer.android.com/reference/android/util/LruCache.html)

# drupal - 启用钩子形式更改模块 - 不显示在模块中

> ID：14730785
> 
> 赞同：0
> 
> 时间：2013-02-06T13:53:46.377
> 
> 标签：drupal, drupal-7

再会，

我正在做一个 hook_form_alter 并遵循一个教程，您可以在 /sites/all/modules 目录中创建一个目录并将 module.info 和 mymodule.module 文件放在其中。我将该目录称为 mymodule，因此路径将是 /sites/all/modules/mymodule。

我遇到的问题是尝试启用该模块。当我检查时，它没有显示在模块列表中。它显然在我的目录中。

我的模块（my_module.module）看起来像这样，将用于修改添加产品的表单（基本上是取出SKU，标价和佣金）：

```
<?php
// $Id$

/**
* @file
* Module to hold my customizations to Ubercart
*/

/**
* Implementation of hook_form_alter()
*/
function my_module_form_alter($form_id, &$form) {
  if ($form_id == 'product_node_form') {
    $form['base']['model']['#required'] = FALSE;
    $form['base']['prices']['list_price']['#required'] = FALSE;
    $form['base']['prices']['cost']['#required'] = FALSE;
    $form['base']['prices']['sell_price']['#required'] = FALSE;
    $form['base']['prices']['shippable']['#required'] = FALSE;
  }
} 
```

信息文件 my_module.info 如下所示：

```
; $Id$
name = My module
description = My customizations to Ubercart
package = Custom
core = 7.x 
```

为什么它不会出现在模块列表中，我如何让 Drupal 看到模块以便我可以启用它？我没有名为“自定义”的类别，也没有显示任何内容。

到目前为止，我已经进入了我的 php.ini 文件并输入了 safe_mode=off 以查看是否有帮助（因为有人说这有时会导致 Drupal 出于某种原因忽略新模块）但这没有帮助。

我在服务器上创建了这两个文件，所以我认为换行之类的东西不会有任何问题（我使用 GoDaddy 的 FTP 文件管理器，它带有一个编辑器。）

问题可能是因为我被难住了？

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:14:23.660

确保使用相同的名称命名`.info`和`.module`文件。

例如`mymodule.info`和`mymodule.module`。

请注意，名称应为字母数字（允许下划线）并以字母开头。

在你的钩子实现中，`hook`用你的模块名称替换这个词

```
function mymodule_form_alter($form, &$form_state, $form_id)
{
    // code goes here...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T17:08:17.993

我发现了一些有用的东西。在阅读了有关换行问题但不知道这是否造成问题的人之后，我决定尝试一下。

我去了一个模块目录，发现了一个 .info 文件。就我而言，我去了一个包含 Commerce 的目录，并将 Commerce.info 文件复制到我的自定义模块的目录中。

然后，我所做的是取出 Drupal 在安装 Commerce 模块后添加的内容（您可以对从中复制的任何 .info 文件执行相同操作）并在开始时修改信息，删除任何依赖行或任何不相关的内容没关系。换句话说，让它像您尝试使用的 .info 文件，但不要从您尝试启用的 .info 复制！

保存这个文件（在我的例子中，它仍然是 commerce.info。）

现在删除您最初尝试启用的 .info 文件。

将新的 .info 文件重命名为您想要的名称（commerce.info => mymodule.info。）

转到您的模块页面并刷新它。

瞧……就是这样。启用并保存配置。

# c# - EF5 ObjectResult 到 ObjectQuery 是否为空？

> ID：14730788
> 
> 赞同：0
> 
> 时间：2013-02-06T13:53:55.600
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我正在尝试从实体框架获取带有参数的查询字符串以进行调试。不，我不会使用 EFProfiler，因为查询字符串需要在页面上作为输出可见。大多数查询是使用 ExecuteStoredQuery() 手动编写的。但是，将它们转换为 ObjectQuery 会产生 null。

例子：

```
ObjectResult<Parent> model = _context.ObjectContext().ExecuteStoreQuery<Parent>("SELECT * FROM Parents");
var objectQuery = model.AsQueryable() as ObjectQuery<Parent>; 
```

对象查询为空。ObjectContext() 是 datacontext 中的一个简单方法，如下所示：

```
return (this as IObjectContextAdapter).ObjectContext; 
```

我已经用尽了自己的想法，从搜索中得到的任何东西都是……​​好吧，没用，因为似乎没有人能解决这个问题。请注意，结果从查询中正确返回。

编辑：对，我也应该提到这一点。

这样做：

```
var oq = m as ObjectQuery<Parent>; 
```

给我这个：

无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型“System.Data.Objects.ObjectResult”转换为“System.Data.Objects.ObjectQuery”

当我认为它需要被转换为 AsQueryable() 的时候，它，嗯……是空的，原因很明显。是我疲倦的脑袋忘记添加这个小细节了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:21:17.973

我认为其他答案清楚地表明您不能将 an`ObjectResult<T>`转换为`ObjectQuery<T>`. 但我对你的评论很感兴趣

> 我尝试了 CreateQuery，但遇到了问题。一方面，它不喜欢当用户尝试 SELECT * 时，您似乎必须指定您需要获取的所有字段。

您可以使用 an`ObjectQuery`进行“*”搜索：

```
ObjectContext().ObjectQuery<Parent>("SELECT VALUE par FROM Parents AS par") 
```

如您所见，查询字符串中没有实际`*`，跟踪字符串没有`*`但显示所有字段。但是您不必指定所有字段来构建查询字符串。我希望这将帮助您更好地使用`ObjectQuery`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:32:55.790

Surely you ACTUALLY want to use CreateQuery(sql) rather than ExecuteStoreQuery(sql).

Given the name, ExecuteStoreQuery actually runs the SQL, whilst CreateQuery returns an ObjectQuery ready to be sent to the database.

Obviously you can then call Execute on ObjectQuery to return the ObjectResult

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:07:19.743

您的演员表`as ObjectQuery<Parent>`不正确，原因`ObjectResult<Parent>.AsQueryable()`将返回一个`IQueryable<Parent>`不是 type 的`ObjectQuery<Parent>`。

AsQueryable 是将 IEnumerable 转换为 IQueryable 的[Queryable类的扩展方法。](http://msdn.microsoft.com/en-us/library/bb353734.aspx)

结果是您的变量 objectQuery 为空。

# mysql - sql整数值在更新时被截断

> ID：14730791
> 
> 赞同：0
> 
> 时间：2013-02-06T13:54:13.837
> 
> 标签：mysql, integer

我正在运行这段代码：

```
CREATE TABLE fish (SELECT '5' as size) 
```

到目前为止一切顺利，我得到了 5 个尺寸。
但是之后：

```
UPDATE fish SET size = size *2 
```

应该返回 10，但它会返回 1，从而切断最后一位数字。我假设这样做是因为 sql 仅在以这种方式创建表时节省了足够的必要空间。有谁知道是否有办法解决这个问题？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:56:35.810

`UPDATE`不返回更新的值，它返回更新的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:07:41.660

如果您希望该列为整数，那么为什么要使用单引号...？

只需尝试如下...它会工作....

```
CREATE TABLE fish (SELECT 5 as size)

UPDATE fish SET size = size *2 
```

# objective-c - 如何在 Objective-C 中处理 C 异常

> ID：14730794
> 
> 赞同：0
> 
> 时间：2013-02-06T13:54:24.030
> 
> 标签：objective-c

我的 Objective-C 项目 iOS 应用程序中有一堆 C 函数，它们可能会崩溃。我希望能够处理那些崩溃的。一开始我想用@try-catch机制，但据我了解，这个块内的所有异常都必须抛出才能处理。这是真的吗？我该如何解决我的问题？

例如，这是在 Objective-C 代码中调用 C 函数。此功能可能会崩溃。

```
err = mailimap_list(session, "", "*", &allList); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:57:40.567

长话短说：你不能。

长解释：C没有“例外”。如果 C 代码崩溃，这对进程的生命周期来说是致命的。例如，检测到的分段错误将使操作系统终止您的进程。这些不是可以处理的好的 Obejctive-C 样式异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:58:57.847

是否有“C异常”之类的东西？如果它们不存在，您不必处理它们：问题已解决！

# android - 使用 Android 获取最后一次通话失败的原因

> ID：14730797
> 
> 赞同：1
> 
> 时间：2013-02-06T13:54:28.730
> 
> 标签：android, call, disconnect

我是 Android 开发的新手，我正在尝试一些核心电话开发。谁能告诉我如何获得最后一次通话失败的原因（或原因代码）？我已经看到对 LAST_CALL_FAIL_CAUSE 的引用，但我不知道如何实现这个？

谢谢

# c# - 如何从 XElement 获取标签

> ID：14730803
> 
> 赞同：0
> 
> 时间：2013-02-06T13:54:50.127
> 
> 标签：c#, xml-parsing, windows-runtime, windows-store-apps, azure-blob-storage

我开发了这样的代码：

```
String resultString = await response.Content.ReadAsStringAsync();
Stream resultStream = await response.Content.ReadAsStreamAsync();

XElement rootElement = XDocument.Load(resultStream).Elements().First();
XElement blobs = rootElement.Element("Blobs");
foreach (var blob in blobs.Elements("Blob"))
{
    var t = blob;
} 
```

现在`resultString`和`resultStream`来自`HttpClient reposnse`。我从 Azure blob REST 服务（列表）获得响应，如下所示：

```
<EnumerationResults>
    <Blobs>
        <Blob>
            <Name></Name>
            <Url></Url>
            <Properties></Properties>
         </Blob>
         <Blob>
            <Name></Name>
            <Url></Url>
            <Properties></Properties>
         </Blob>
    </Blobs>
</EnumerationResults> 
```

使用我的代码，我设法`IEnumerable<XNode>`从`<Blobs>`但我无法进入元素内部`Name`。我将所有这些都作为一个字符串放在一行中。我如何需要更改我的代码以获取每个并从中获取？`Url``<Blob>``<Blob>``<Name>``<Url>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:59:21.123

首先，一旦您加载了文档，您就可以使用该`Root`属性来获取根元素。然后，您可以使用或通过多次调用来获取每个`Blob`元素。您可以在循环*之外执行此操作：*`Descendants``Elements`*`foreach`*

 *```
var doc = XDocument.Load(resultStream);
var allBlobs = doc.Root.Elements("Blobs").Elements("Blob"); 
```

或 var doc = XDocument.Load(resultStream); var allBlobs = doc.Root.Descendants("Blob");

现在，当您遍历每个 blob 时，您可以`Element`再次使用 name 元素，并使用显式字符串转换获取元素的文本内容

```
foreach (var blob in allBlobs)
{
    var nameElement = blob.Element("Name");
    var nameText = (string) nameElement;
    ...
} 
```

显然，这可以作为一个单一的声明来完成——为了清楚起见，我只是想把它们分开。然后，您可以对 URL 执行相同的操作。`null`如果元素丢失，使用字符串转换会给你一个参考，而使用`Value`属性会给你一个参考`NullReferenceException`，除非你提防它。哪个更合适取决于您的用例。

另一种方法是在查询中在循环之外进行所有提取*：*`foreach`

```
var data = doc.Root.Elements("Blobs").Elements("Blob")
              .Select(blob => new {
                  Name = (string) blob.Element("Name"),
                  Url = (string) blob.Element("Url");
              }); 
```

然后：

```
foreach (var item in data)
{
    // Use item.Name and item.Data in here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:58:30.080

```
XElement blobs = rootElement.Element("Blobs");
var v = blobs.Select(blob => new { Name = blob.Descendents.FirstOrDefault(x => x.Name.LocalName == "Name"), Url = blob.Descendants.FirstOrDefault(x => x.Name.LocalName == "Url") }); 
```*

# c - Flex/Bison：错误恢复析构函数？

> ID：14730804
> 
> 赞同：3
> 
> 时间：2013-02-06T13:54:50.187
> 
> 标签：c, bison, flex-lexer

对于包含至少一项的逗号分隔列表，我有以下语法：

```
column_expression_list:
    column_expression {
        $$ = LinkedList_New();
        LinkedListItem *item = LinkedListItem_New($1);
        LinkedList_add($$, item);
    }
    |
    column_expression_list T_COMMA column_expression {
        LinkedListItem *item = LinkedListItem_New($3);
        LinkedList_add($1, item);
    }
; 
```

但是考虑一下：

```
column_expression error 
```

将`$$ = LinkedList_New();`泄漏。有没有一种方法可以设置一个析构函数，当它从堆栈中弹出时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:36:07.757

假设您使用名为“LinkedList_Del”的函数销毁包含所有项目的列表，请使用 Bison 的 %destructor 指令，该指令专门用于清理因错误而最终未使用的已分配元素：

```
%destructor { LinkedList_Del($$); } column_expression 
```

祝你好运！

参考： [http ://www.gnu.org/software/bison/manual/bison.html#Destructor-Decl](http://www.gnu.org/software/bison/manual/bison.html#Destructor-Decl)

# javascript - 如何在不使用 XDomainRequest 或 XMLHttpRequest 的情况下使用自定义标头发出跨域请求？

> ID：14730807
> 
> 赞同：5
> 
> 时间：2013-02-06T13:55:03.247
> 
> 标签：javascript, internet-explorer, xmlhttprequest, cross-domain, xdomainrequest

我有一个从`www.example.com`. 这个网络应用

*   需要对另一个名为的服务器发出 AJAX 请求`api.example.com`
*   它必须设置某些标头字段，例如`Authorization`发送请求时`api.example.com`
*   它必须与最新的和不太新的浏览器兼容（例如 IE >= 8）

所有这一切都是通过使用 Chrome（和其他最近基于 WebKit 的浏览器）处理 api.example.com 上的 CORS 请求来实现的`XMLHttpRequest`。[早于版本 10 的 IE](http://msdn.microsoft.com/en-us/library/ie/hh673569%28v=vs.85%29.aspx#cors_xhr)不为跨域请求实现 CORS ，而是为跨域请求`XMLHttpRequest`提供非标准对象。`XDomainRequest`但`XDomainRequest`没有实现[设置 HTTP 标头](https://stackoverflow.com/questions/2657180/setting-headers-in-xdomainrequest-or-activexobjectmicrosoft-xmlhttp)字段的方法。

`XDomainRequest`所以我的问题是：如何在不使用or的情况下使用自定义标头进行跨域请求`XMLHttpRequest`？最佳实践解决方法是什么？

编辑：我可以控制所有涉及的服务器 (*.example.com)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:16:21.057

恐怕除了在应用程序的服务器端为此请求实现代理之外别无他法。[一个例子](http://developer.yahoo.com/javascript/howto-proxy.html)。

# php - 使用 php mysql 和 javascript 链接选择下拉列表

> ID：14730813
> 
> 赞同：0
> 
> 时间：2013-02-06T13:55:18.003
> 
> 标签：php, javascript, mysql

我的“选择”有些困难，这是我的情况：

数据库：**dbProduct**

```
tb_item
---------------------
id_item | 名称_项目 |
---------------------
110 | 项目 1 |
111 | 项目 2 |
---------------------
```

```
tb_content
--------------------------
id_content | 名称_内容|
--------------------------
110-001 | 内容A |
110-002 | 内容 B |
111-001 | 内容 C |
111-002 | 内容 D |
--------------------------
```

如何制作输出选择框：

```
选择项目：---------------
             |id_item | 五 |
             ---------------
             |110 |
             ---------------
             |111 |  
             ---------------
```

如果我选择`id_item = 110`，选择框应该输出：

```
-----------------                   
内容名称| 五 |                     
-----------------                     
   内容A |                    
   内容 B |                    
-----------------
```

如果选择 id_item = 111，则选择框应输出：

```
-----------------
内容名称| 五 |
-----------------
   内容 C |
   内容 D |
-----------------
```

我该如何实施？并提前致谢。

# php - 什么更快 - 多个 PDO 查询或数组查询

> ID：14730816
> 
> 赞同：0
> 
> 时间：2013-02-06T13:55:19.730
> 
> 标签：php, mysql, arrays, pdo

我只是想知道使用数据库查询的方式。我最近开始在 mysql 上使用 PDO。我正在编写一个检查制造商的小脚本，然后针对每个制造商检查项目。我被卡住是否会更快地将项目放入数组中并且（仅使用 1 个查询）然后当我循环制造商数组时使用 array_count_values 来获取项目数量或在循环中执行单独查询以计算项目. 我目前有大约 400 家制造商和 70000 件商品。

我当前使用数组的代码是：

```
$itemquery = $conn->query("SELECT manufacturer FROM item_info_short");
$itemquery->execute();
$itemrow = $itemquery->fetchall(PDO::FETCH_ASSOC);
foreach ($itemrow as $itkey => $itvalue) {
   $items[] = $itvalue[manufacturer];
}
$it_qty = array_count_values($items); 
```

然后对于我的循环：

```
$manu_query = $conn->query("SELECT manufacturer FROM manufacturers ORDER BY manufacturer");
while($rowsx = $manu_query->fetch(PDO::FETCH_ASSOC)){
    $rowid = $rowsx[manufacturer];
    $count = $it_qty[$rowid];
    if($count == '') $count = 0;
    echo "<option value=\"$rowsx[manufacturer]\">$rowsx[manufacturer]&emsp;$count Items</option>";
} 
```

如您所见，我一共使用了 2 个 PDO 查询。另一种方法将使用 401 查询。

我正在尝试查看哪种方法是最佳实践和/或更快。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:08:41.290

1.  您的问题与 PDO 无关
2.  您这样做的效率极低，但这与您提出的问题无关。
3.  你必须问的问题不是“哪个更快”，而是“哪个是正确的方式”。

要计算制造商的商品数量，您必须使用 SQL 为您计算它们

```
SELECT manufacturer, count(*) cnt FROM item_info_short GROP BY manufacturer 
```

如果您想获取制造商详细信息，将返回所有制造商及其商品数量- 将此查询与制造商表一起加入

如果您需要列出所有制造商及其商品 - 使用 LEFT JOIN
类似这样

```
SELECT m.manufacturer, count(i.manufacturer) cnt 
    FROM manufacturers m LEFT JOIN item_info_short i
    ON i.manufacturer = m.manufacturer GROUP BY m.manufacturer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:20:50.063

感谢“您的常识”的帮助，但它仍然没有向我显示针对不在“item_info_short”表中的制造商的 0 结果。

```
SELECT m.manufacturer, 
      (SELECT COUNT(i.manufacturer) FROM item_info_short i 
                     WHERE m.manufacturer = i.manufacturer) cnt 
      FROM manufacturers m ORDER BY m.manufacturer ASC; 
```

这是我实际使用的最后一个 mysql 语句，它为我提供了来自 item_info_short 的制造商及其数量的完整列表，包括 0 值。在回答我自己的问题时，这种方法比先放入数组要快得多，我相信这是正确的方法。

# multithreading - 挂起qt中的主线程

> ID：14730821
> 
> 赞同：1
> 
> 时间：2013-02-06T13:55:39.743
> 
> 标签：multithreading, qt, suspend

我想制作一个停止主线程并重新启动的函数，它会在几秒钟后重新启动它。我尝试了以下方法：

```
void Mainwindow::timeout()
{
    QTimer timer;
    timer.setSingleShot(true);
    timer.setInterval(time*1000);
    connect(&timer,SIGNAL(timeout()),MainWindow::thread(),SLOT(start()));

    timer.start();

    SuspendThread(MainWindow::thread());
} 
```

不幸的是，这并没有做很多...任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:41:22.437

您的计时器对象在`Mainwindow::timeout()`函数结束时被销毁，因此它永远不会发出`timeout()`信号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:53:54.740

也许我忽略了一些东西，但是“停止 [...] 并在几秒钟后重新启动的功能”`sleep()`对我来说听起来很像。让操作系统进行计时，而不是重新发明轮子。

或者有什么原因你不能在主线程中发布一些消息？在这个简单的用例中，甚至可能通过单个互斥体就足够了。从另一个线程设置互斥锁，在主线程事件循环中检查它并可能`sleep()`直接调用。

这也简化了调试，因为您只有一个位置，主线程将自愿进入休眠状态，而不是被其他线程动态挂起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T14:11:02.350

我不确定你为什么要停止事件循环，但你可以通过等待锁定的互斥锁 x 毫秒来让你的线程休眠。

在下面的代码中，您将使用`waitCondition.wait(&mutex, msecs);`等待条件变量的最大`msecs`毫秒数。由于互斥锁被锁定，因为没有另一个线程会发送唤醒信号，这将阻塞你的线程`timeout`几毫秒。参考在[这里](http://doc.qt.digia.com/stable/qwaitcondition.html#wait)。

```
#include <QWaitCondition>
#include <QMutex>

class Sleep
{
public:
    static void msleep(unsigned long msecs)
    {
        QMutex mutex;
        mutex.lock();

        QWaitCondition waitCondition;
        waitCondition.wait(&mutex, msecs);

        mutex.unlock(); // Not necessary since new mutex will always be created,
                        // but since destroying locked mutex
                        // is bringing undefined behavior, let's follow some ethics 
    }
}; 
```

# parameter-passing - Powershell：从脚本中覆盖参数块的正确语法是什么？

> ID：14730823
> 
> 赞同：1
> 
> 时间：2013-02-06T13:55:44.127
> 
> 标签：parameter-passing, powershell-2.0

我有一个参数块`param([switch]$csv, [switch]$recurse)`，我想硬编码脚本中的值，而不是从命令行传递它们。是否像替换`param`块一样简单

```
$csv="hardcoded value"
$recurse="another hardcoded value" 
```

或者还有什么我需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:01:16.377

也许我错了，但如果我理解得很好，您可以使用默认值：

```
param([switch]$csv=$true, [switch]$recurse=$false) #$false is default for switch param 
```

如果您不需要`$csv`参数，则需要像这样调用函数：

```
myfuntion -csv:$false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:44:18.517

如果您永远不需要在命令行中声明它们，那么您应该简单地将它们硬核在代码中，而不是将它们作为参数放入。否则，正如 CB 所说，您可以声明它们具有默认值并通过声明它来覆盖它。

# java - 我应该将我的单元测试文件夹添加到 Eclipse 中的 java 构建路径吗？

> ID：14730824
> 
> 赞同：3
> 
> 时间：2013-02-06T13:55:47.147
> 
> 标签：java, eclipse, junit, eclipse-plugin, eclipse-pde

我们正在开发一个由几个插件组成的 Eclipse 产品，其中一些是我们开发的。我们的每个插件都被定义为工作区中的一个 Eclipse 插件项目，并且有两个文件夹，source 和 test。最近我注意到我们正在向用户提供测试类，就像我们的源类一样。现在我想从我们的产品结果中删除测试类。我是否应该从 Java 构建路径中删除测试文件夹（见附件）？我还应该怎么做才能不将我们的测试部署给最终用户？

![在此处输入图像描述](../Images/5812e8b2c69093127088ef5dfbc64058.png)

为了构建项目，我们使用 eclipse 标准 ant 脚本来创建我们的 zip 文件。我找不到在哪里可以排除测试文件。这是 Ant 脚本：

```
<property name="allElementsFile" value="${eclipse.pdebuild.scripts}/productBuild/allElements.xml"/>
<import file="${eclipse.pdebuild.scripts}/build.xml"/>
<property name="pluginPath" value=""/>
<property name="pluginList" value=""/>
<property name="featureList" value=""/>
<property name="includeLaunchers" value="true"/>
<property name="generatedBuildProperties" value=""/>
<condition property="nestedInclusions" value="true">
    <istrue value="${p2.gathering}" />
</condition>

<!-- ===================================================================== -->
<!-- main entry point to setup, fetch, generate, build etc. Use -->
<!-- the customTargets.xml to modify the build behaviour. -->
<!-- ===================================================================== -->
<target name="main" description="the main build target">    
    <antcall target="preBuild" />
    <antcall target="processRepos"/>
    <antcall target="generateFeature"> <!-- Generate the feature to drive the fetch -->
        <param name="verify" value="false"/>
    </antcall>
    <antcall target="fetch" />
    <antcall target="generateFeature"> <!-- We are calling generate feature a second time so that we can get the pack / unpack clause fixed -->
        <param name="verify" value="true"/>
    </antcall> 
    <antcall target="generate" /> 
    <antcall target="process" /> 
    <antcall target="assemble" />
    <antcall target="package" />
    <antcall target="postBuild" />
</target>

<!-- ===================================================================== -->
<!-- Generate a container feature based on the product file                -->
<!-- The plugin or feature containing the .product file will need to exist -->
<!-- already, use preSetup or postSetup to fetch it if necessary           -->
<!-- ===================================================================== -->
<target name="generateFeature">
    <eclipse.generateFeature
        featureId="org.eclipse.pde.build.container.feature"
        buildDirectory="${buildDirectory}"
        baseLocation="${baseLocation}"
        productFile="${product}"
        verify="${verify}"
        pluginPath="${transformedRepoLocation}${path.separator}${pluginPath}"
        configInfo="${configs}"
        pluginList="${pluginList}"
        featureList="${featureList}"
        includeLaunchers="${includeLaunchers}"
        buildPropertiesFile="${generatedBuildProperties}"
        nestedInclusions="${nestedInclusions}"
        filterP2Base="${filterP2Base}"
    />
</target>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:29:17.093

这是您的部署过程/脚本的问题。您是否使用 Eclipse 构建 jar ？它不应该与构建路径有关，如果您使用 Eclipse 对其进行编码，则应该将测试源保留在构建路径中。通常使用 Ant 或 Maven 的部署过程会从结果中排除测试类（jar、war、...）。还建议在创建 jar 之前自动运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:21:47.533

要在使用 pde ant 脚本构建 pde 项目时从代码中删除测试文件（如果您为每个插件项目定义了一个源文件夹和一个测试文件夹），您应该从该项目的 build.properties 中删除测试文件夹。build.properties 是 plugin.xml 的一部分

# java - Java 集合：接口和抽象类

> ID：14730830
> 
> 赞同：3
> 
> 时间：2013-02-06T13:56:00.400
> 
> 标签：java, collections

所有 Collections 都实现接口[Collection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)，这些集合具有特定的抽象层次结构，例如

*   [AbstractCollection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractCollection.html) -> [AbstractList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractList.html) -> [ArrayList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html)
*   [AbstractCollection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractCollection.html) -> [AbstractSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractSet.html) -> [HashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashSet.html)

但也有对应的接口，如[Collection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)、[List](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)、[Set](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html)。这些界面在我看来有点多余。

他们为什么在这里？这只是约定，或者是否有理由只实现接口而不扩展抽象类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T14:03:27.053

接口之所以存在，是因为能够在不强制实现的情况下将类型分配给变量或参数是很好的。

例如，如果我创建了一个在 Hibernate 中使用的持久实体，并且它有一个集合，我想为其分配一个 List 或 Set 类型。Hibernate 将用它自己的列表替换我初始化它的任何列表，并使用一些特定于 Hibernate 的实现来执行延迟加载或其他任何它需要的实现。Hibernate 开发人员可能不希望受到必须扩展抽象类的限制。

抽象类的存在是为了方便实现者。接口是客户端使用的合约。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T14:00:29.367

实现接口与扩展抽象类有很大不同。

让我们假设 Animal 类是一个抽象类，并且 Dog、Cat、Snake 和 Shark 扩展了 Animal。

默认的 Animal.move() 实现只是移动它们。

但是，接口允许我们进一步分组相似的动物，例如 RunningAnimal、SwimmingAnimal。

因此，如果 Dog 扩展 Animal 实现 RunningAnimal，沿着继承的 move()，他还必须实现自己的 run()，这可能会在继承自 Animal 的重写 move() 中找到它的方式。这对你有意义吗，还是我需要更好地/用一些代码来澄清？:)

接口让您可以对不同类的相似功能进行分组。“可点击”，“可排序”，“可序列化”......它们都通过共享功能包含成员（因此可点击列表不仅仅是按钮列表）而不是相同的目的。

所以，这样想

```
Cat extends Animal implements RunningAnimal, ClimbingAnimal  -- inherits move() has to implement run() and climbTree()
Dog extends Animal implements RunningAnimal  -- inherits move(), has to implement run()
Snake extends Animal                         -- likely overrides inherited move()
Shark extends Animal implements SwimmingAnimal -- likely overrides move(), has to implement swim() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:00:37.487

为什么不 ？抽象类是为了简化继承过程。当您想创建您的收藏时，您不必从头开始做所有事情。

但是当然没有人告诉你应该从 AbstractCollection 继承。您可以从头开始编写实现。

这是 API 具有接口的常见良好做法。并区分实现和接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:08:40.277

接口是用户和实现者之间的契约。抽象基类旨在用作访问许多行为相似的对象的公共基础。

# node.js - 浏览器和服务器实时模型同步的node.js框架有哪些？

> ID：14730831
> 
> 赞同：1
> 
> 时间：2013-02-06T13:56:00.423
> 
> 标签：node.js

用于实时模型同步的 node.js 框架有哪些？

我只知道赛车手（[https://github.com/codeparty/racer](https://github.com/codeparty/racer)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:39:20.223

您可以查看：

*   节点对象同步[https://github.com/jonashuckestein/node-object-sync](https://github.com/jonashuckestein/node-object-sync)，
*   骨干[.iobind https://github.com/logicalparadox/backbone.iobind](https://github.com/logicalparadox/backbone.iobind)或
*   骨干网[https://github.com/scttnlsn/backbone.io](https://github.com/scttnlsn/backbone.io)

但是赛车手/德比也不错。这些只是选项，您应该选择最适合您的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:41:01.833

我建议您继续使用 Racer，或者，如果您对基于 Racer 的更成熟的框架感兴趣，我强烈建议您尝试[Derby](http://derbyjs.com/)。

如果您来自 Rails，我完全建议您使用[Derby](http://derbyjs.com/)全力以赴。如果您正在寻找 Node 的 Rails Backbone 替代品，请尝试[Backbone.io](https://github.com/scttnlsn/backbone.io)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T07:06:19.160

添加完整性：Meteor DDP： [https ://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md](https://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md)

使用它的最好方法是全押 Meteor；我怀疑代码在 Meteor 之外是否有用或可用。不过，规格可能是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-22T03:06:15.953

不久前我写了一组库：http: [//github.com/Rekord/rekord](http://github.com/Rekord/rekord)

它还具有您期望的模型库中的所有功能。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-06T15:08:45.023

对于实时应用程序开发，目前我们有[Derby](http://derbyjs.com)和[Tower.js](http://towerjs.org)

# ruby - 如何在命令行中捕获值并添加到配方中？

> ID：14730833
> 
> 赞同：4
> 
> 时间：2013-02-06T13:56:05.503
> 
> 标签：ruby, chef-infra

我是 Chef 和 Ruby 的新手

我需要在命令行上将两个变量传递给 Chef，并让这些变量在配方中可用。

我如何捕获这些值并将它们放入 Chef 中？

我需要这样的东西：

```
before_deploy command 
  execute param1 param2
deploy{ param1/param2} 
```

在运行时从命令行从何处获取它们`param1`的值。`param2`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T18:57:15.687

当您通过运行配置机器时

```
chef-solo 
```

或者

```
chef-client 
```

您不能为这些命令提供任何对配方可见的参数。厨师食谱仅适用于[属性](http://wiki.opscode.com/display/chef/Attributes)。好事（或不那么好）是可以从许多不同的地方设置属性：角色、节点、环境和 json 文件。

最接近您要求的解决方法是

*   在机器上创建一个 json 文件
*   运行时通过它`chef-client`或`chef-solo`
*   在配方中使用属性

例如：apache 配置。

创建 json 文件：my_attrs.json

```
{ 
  "apache": {
    "listen_port": "81",
    "listen_path": "/myapp"
  }
} 
```

然后在你的食谱中使用它们：

```
node[:apache][:listen_port]
node[:apache][:listen_path] 
```

运行`chef-client`或`chef-solo`与`-j`标志。

```
chef-solo -j my_attrs.json 
```

如果 my_attrs.json 在某个远程服务器上，那么您可以提供一个 url。

```
chef-solo -j http://remote.host/path/my_attrs.json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:04:36.147

如果您的文件名为 example.rb

```
ruby example.rb argument1 argument2 
```

然后

```
ARGV.each do|a|
  puts "Argument: #{a}"
end 
```

输出：

```
Argument: argument1
Argument: argument2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T23:23:27.987

您可以通过调用命令在配方中设置变量

```
nodename = `cat /etc/chef/client.rb | grep "node_name" | sed -e 's/\<node_name\>//g' | sed '/^$/d;s/[[:blank:]]//g' | sed 's/\"//g'` 
```

然后将变量用于其他厨师块

```
execute "echo nodename for node #{nodename}"
 command "echo #{nodename}"
 action :run
 only_if {nodename == "node1"}
end 
```

这将从 client.rb 文件中获取 node.name 属性，而无需向厨师服务器询问。

# android - Android：通过电话线播放音频文件

> ID：14730835
> 
> 赞同：2
> 
> 时间：2013-02-06T13:56:11.677
> 
> 标签：android, telecommunication

我一直在互联网上寻找答案，关于如何通过电话线播放音频文件（如果您想知道我的意思，请参阅示例）。现在我来到这个网站寻找答案：是否可以播放位于您电话上的音频文件，以便呼叫者可以听到它，而无需打开您的扬声器并让它大声播放？如果是这样，有人知道可以查看的网站吗？

示例：彼得给安妮打电话。安妮接了电话，决定给彼得播放她最喜欢的音乐，但她不想打开扬声器，因为她的父母正在她旁边的房间里睡觉。

我知道电信服务器可以在人们处于等待状态、等待员工或排队时播放音乐，但 Android 手机也能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:17:23.017

你不能这样做。

所有音频呼叫都通过硬件级别的基带芯片进行路由。底层电话技术不暴露给操作系统，更不用说 Android API。

所以基本上，这是不可能的，除非你愿意通过扬声器播放它并希望它被清晰地拾取。

# python - 获取 Gtk TreeView 的行号

> ID：14730837
> 
> 赞同：4
> 
> 时间：2013-02-06T13:56:18.867
> 
> 标签：python, gtk

我有一个名为**MyTree**的 GTk TreeView ，其数据如下所示，

```
DTime  ATime Transfer Platform

14:30    15:20    0       2a

14:50    15:40    0       14b

15:00    16:00    2       3a 
```

如您所见，我有 3 行 4 列。所以我需要得到选定的行。我是这样做的，

```
selection = MyTree.get_selection()
selection.set_mode(Gtk.SelectionMode.BROWSE)
model, iter = selection.get_selected() 
```

此时它返回指向当前选定行的树迭代器。这一切都很好。但是我很想知道 iter 是否指向第 0、1 或 2 行。

我希望我已经说清楚了。**我需要行索引而不是行迭代器。**如何获取行号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T17:04:37.850

由于您处于 BROWSE 选择模式，因此您知道只有一个选定的行。然后，您可以获得第一个选定项目的路径

```
path = iter.get_selected_rows()[0] 
```

然后，如果你的树只有一层（例如它不是嵌套树），你可以像这样从路径中获取索引

```
index = path.get_indices()[0] 
```

这看起来很复杂，但这是因为您的选择可能包含许多行（这就是它返回列表的原因）并且因为树可以有很多级别（这就是它返回路径的原因）。

# ascii - 文本中的 0000 是什么？

> ID：14730843
> 
> 赞同：0
> 
> 时间：2013-02-06T13:56:42.727
> 
> 标签：ascii

这是 /tmp 中的测试文件。
debian@debian:~$ xxd /tmp/test
0000000: 0000 6920 616d 2068 6572 650a 7765 2061 ..我
在这里。我们在这里是 0000010: 7265 2068 6572 650a。
debian@debian:~$ nano /tmp/test
^@^@我在这里
我们在这里

0000 是^@^@?? 在 ascii 表中，94 是 ^，64 是 @。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:26:52.950

^@ 只是 nano 显示 0 二进制的方式，它不是可显示的 ascii 字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:08:40.900

我所知道的：

`0000000`表示为编号。

`0000 6920 616d 2068 6572 650a 7765 2061`表示为“**我在这里**”

`7265 2068 6572 650a`表示为“**我们在这里**”

# php - Ajax 调用和保护 .js 文件信息

> ID：14730844
> 
> 赞同：0
> 
> 时间：2013-02-06T13:56:46.317
> 
> 标签：php, javascript, security

与其说是一种编程语言......我正在构建一个包含许多 jQuery Ajax 调用的网站，不仅仅是为了加载数据，还为了在我的网站中执行许多操作，包括管理员特定的操作，例如将组归属于用户，阻止用户访问， ETC...

我不通过 js 进行任何用户验证，我的 ajax 请求由 PHP 处理，因此对于所有这些管理操作，我首先确保用户实际上是管理员（我为此检查会话/数据库信息），我认为这是正确的方法，但有一件事一直困扰着我......

考虑一下，我的 admin.php 引用了一个包含所有这些 Ajax 调用的外部 .js 文件，普通用户无权访问管理页面，但他们可以很好地导航到我的 js 文件夹并查看我的 admin.php AJAX 脚本，这些脚本当然在参数中包含敏感信息，例如 URL、类型 (POST/GET)。我相信（在一定程度上，安全性很*重要*）我的 PHP 代码可以保护我的应用程序，但它仍然有点……*磨我的齿轮*……人们知道我的 URL 和我进行的调用类型。

也许我只是偏执，如果我的代码是安全的，我为什么要关心人们是否看到这些信息？（尽管在 Web 开发中将某些东西声明为 SAFE 应该是“自大”的定义），无论哪种方式，这都是我认为的：

*   不在我的管理页面上使用外部文件，但它使事情组织得不太好......我喜欢将 HTML 与 JS/PHP/等分开
*   某种.htaccess-fu？拒绝访问我的 js 文件夹最终会破坏功能，所以也许有人有更好的主意？
*   压缩我的 js 文件（使用[http://jscompress.com/](http://jscompress.com/)或类似文件）并不是真正的解决方案，但它使事情更难阅读

对此的任何输入都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:02:14.917

为什么拒绝访问您的 js 文件夹会破坏功能？您可以保持文件可访问，但确保它们不能列出内容，这已经迫使人们“猜测”您的文件名。

除此之外，老实说，我认为他们能够扣除您拨打的电话没有任何问题。

只要您的调用在您的 php 后端得到保护，这应该不会给您带来任何麻烦。

此外，缩小是抽象可见代码的好方法，但调用总是很容易被 firebug 或 Fiddler 嗅出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:00:08.243

首先，用户不应该能够在不知道他们的确切名称的情况下浏览您的 js 文件。您是否禁用了 httpd 中的“索引”选项？

```
Options -Indexes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:03:51.420

如果您想对未经身份验证的用户隐藏 JS 文件，您可以将 .JS 文件重命名为随机名称，例如“2a2b1a82.js”。然后创建一些非常愚蠢的 PHP 文件，它只检查用户会话，如果授予访问权限，则在 '2a2b1a82.js' 上执行读取文件：

```
<?
session_start();
if ($_SESSION['login'] == true) {
  header('content-type: text/javascript');
  readfile('2a2b1a82.js');
}
?> 
```

但除此之外，您的安全性不应依赖于对某些 javascript 文件的访问。正如您所说，检查由 javascript 文件调用的 PHP 文件中的用户会话就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:42:07.603

首先，仅仅考虑“通过混淆保护”绝不是一个好主意，因为它只是假装安全。

需要明确的是，我不想告诉您不应该通过打开目录列表来隐藏您的 js 文件。但是你应该把更多的精力放在检查你的代码是否真的节省而不是混淆太多。

混淆（取决于你做了多少以及以何种方式）可能会导致代码更难维护，因此更容易出错。

要做的一件重要事情是，不要将 php 文件或配置文件（存储密码的位置）放在域指向的根路径中。（它们不应通过 url 访问）。您应该只有一个包含*引导*php 文件的条目文件。并在您的文件中使用例如 RewriteRules`.htaccess`重定向到一个入口点。

结构如下：

```
project/scripts/
project/scripts/bootstrap.php
project/config/
project/logs/
project/public/  <---- //that is where http[s]://doamin.tld/ points to
project/public/index.php 
```

将`project/public/index.php`包括`project/scripts/bootstrap.php`你的代码逻辑发生在那里。

这将确保即使由于某种原因您的服务器的配置文件被搞砸并发送`.php`文件的内容而不是执行脚本，访问者也只会看到他无法访问的文件的包含。（或者另一个例子是`?-s`cgi 模块的 php 错误，它允许查看可通过 url 访问的每个 php 文件的源）

您可以想到的另一件事是使用 php-fpm，您可以在其中以另一个用户的身份运行 php，然后是 web 服务器，并使 php 文件只能由 php 读取。

您应该考虑的另一件重要的事情是您的 ajax 调用是否真的安全。例如，对于删除、修改或创建数据等操作，对会话 cookie 的简单检查将无助于抵御基于当前登录用户被带到恶意站点的攻击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:12:55.360

这里还有其他方法。我不知道你是否熟悉 Wordpress。编写了一个单独的 php 文件来处理 ajax 请求。对于该文件，您需要传递参数。您要发送一个额外的参数，称为`nounce`. 每个会话都会生成一个通知。如果 nounce 有效，那么您会发现发出的请求类似于 action/ajax-url。

您需要做的就是调用这个特殊的 php 文件，为每个用户创建 unqiue nounce，传递参数。检查nounce并继续操作。

即使不受欢迎的用户可以看到这个特殊文件，他们也无法猜测该通知是如何创建的。

# ruby - RSpec/FactoryGirl - MongoID 嵌入文档不持久

> ID：14730845
> 
> 赞同：1
> 
> 时间：2013-02-06T13:56:46.843
> 
> 标签：ruby, unit-testing, rspec, mongoid, factory-bot

拥有以下工厂：

```
FactoryGirl.define do
  factory :user do
    provider "github"
    sequence(:uid) {|n| "111111#{n}"}
    sequence(:name) {|n| "name#{n}"}
    sequence(:email) {|n| "name#{n}@example.com"}
    sequence(:nickname) {|n| "nick#{n}"}
    sequence(:token) {|n| "111111111111111111111111111111111111111#{n}"}
    watchlists { [ FactoryGirl.build(:watchlist) ] }
  end
  factory :watchlist do
      sequence(:html_url) {|n| "https://github.com/user#{n}/repo#{n}"}
      description "One repo description"
      sequence(:forks) {|n| "1#{n}"}
      sequence(:watchers) {|n| "#{n}"}
      created_at "2012-11-21 00:09:12 UTC"
      pushed_at "2010-04-15 21:11:51 UTC"
      avatar_url "https://avatar.example.com/avatar.png"
  end
end 
```

当我创建工厂时，如下所示：

```
let(:user) { FactoryGirl.create :user } 
```

它导致 :user 仅持久化模型，没有嵌入的子模型 :watchlist ：

```
1.9.3p194 :014 > User.all.entries
  MOPED: 10.8.0.6:27017 COMMAND      database=admin command={:ismaster=>1} (328.6924ms)
  MOPED: 192.168.3.101:27017 COMMAND      database=admin command={:ismaster=>1} (216.3296ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (422.3838ms)
  MOPED: 127.0.0.1:27017 QUERY        database=mongoid_test collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (354.1191ms)
 => [#<User _id: 51126ae3aaa0786654000001, _type: nil, created_at: 2013-02-06 14:38:27 UTC, updated_at: 2013-02-06 14:38:27 UTC, email: "name1@example.com", encrypted_password: "", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, provider: "github", uid: "1111111", name: "name1", nickname: "nick1", token: "1111111111111111111111111111111111111111", secret: nil, user_hash: nil>] 
1.9.3p194 :015 > 
```

我怎样才能让嵌入式 mongoid 模型也持续存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:01:03.340

它应该是持久的，但您需要查询关系。

尝试：

`User.first.watchlists`

或者在 MongoDB shell 中，整个文档会像你期望的那样打印出来 `db.users.find().pretty();`

有关 MongoDB shell 的更多信息：http: [//docs.mongodb.org/manual/mongo/](http://docs.mongodb.org/manual/mongo/)

# ios - 我在下面的 AdMob 代码中收到了 Mach-O 链接器错误。有人可以帮我用简单的 Admob for iPhone 吗？

> ID：14730847
> 
> 赞同：0
> 
> 时间：2013-02-06T13:56:50.787
> 
> 标签：ios, objective-c, xcode, admob

在这段代码中，我在我的 Xcode 项目中添加了 Google AdmobSDK 并尝试显示广告。但我不太确定这段代码是否真的有效！

```
AdmobiPhoneViewController.m

#import "AdmobiPhoneViewController.h"
#define AdMob_ID @"a151120ca07fb81"

@implementation AdmobiPhoneViewController

- (void)dealloc
{
    AdMob.delegate = nil;
    [AdMob release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{ 
```

如果没有超级视图，则释放视图。[super didReceiveMemoryWarning];

释放所有未使用的缓存数据、图像等。} #pragma mark – 视图生命周期 //实现 viewDidLoad 以在加载视图后进行额外设置，通常从 nib 加载。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    AdMob = [[GADBannerView alloc]
         initWithFrame:CGRectMake(0.0, self.view.frame.size.height -
                                  GAD_SIZE_320x50.height,
                                  GAD_SIZE_320x50.width,
                                  GAD_SIZE_320x50.height)];

    AdMob.adUnitID = AdMob_ID;
    AdMob.rootViewController = self;
    [self.view addSubview:AdMob];

    GADRequest *r = [[GADRequest alloc] init];
    r.testing = YES;
   [AdMob loadRequest:r];

}
- (void)viewDidUnload
{
    [super viewDidUnload];
    //Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}
- (BOOL)shouldAutorotateToInterfaceOrientation:
 (UIInterfaceOrientation)interfaceOrientation
{
     //Return YES for supported orientations
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:05:17.217

[您可以在此处](http://code.google.com/p/google-mobile-dev/downloads/detail?name=BannerExample_iOS_2.7.zip&can=2&q=#makechanges)查看最新的 AdMob 示例项目。

如果您使用的是最新的 AdMob SDK，则只需要`ObjC`链接器标志；你不再需要了`-all_load`。

编辑：

如果您使用的库仍然需要该`-all_load`标志，则可以改为`-force_load path/to/library.a`仅加载该库。

# javascript - 如何为backbone.js 设置内容类型和POST？

> ID：14730848
> 
> 赞同：3
> 
> 时间：2013-02-06T13:56:53.700
> 
> 标签：javascript, backbone.js

我可以在backbone.js中设置`content-type`和吗？`POST`

```
this.save(data, {
    success: function (user) {
        callback(user.get('LoginStatus'))
    },

    error: function (user, result, xhr) {

    }
}); 
```

当我尝试进行 REST 服务调用时，我收到了错误的请求，它在提琴手中工作。我们需要设置类型和内容类型吗？

这是我得到的错误

```
[ERROR][TiHttpClient(  636)] (TiHttpClient-1) [13340,13340] HTTP Error (org.apache.http.client.HttpResponseException): Bad Request
[ERROR][TiHttpClient(  636)] org.apache.http.client.HttpResponseException: Bad Request
[ERROR][TiHttpClient(  636)]    at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:240)
[ERROR][TiHttpClient(  636)]    at ti.modules.titanium.network.TiHTTPClient$LocalResponseHandler.handleResponse(TiHTTPClient.java:199)
[ERROR][TiHttpClient(  636)]    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
[ERROR][TiHttpClient(  636)]    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:637)
[ERROR][TiHttpClient(  636)]    at ti.modules.titanium.network.TiHTTPClient$ClientRunnable.run(TiHTTPClient.java:1217)
[ERROR][TiHttpClient(  636)]    at java.lang.Thread.run(Thread.java:1020)
[ERROR][TiAPI   (  636)]  [REST API] ERROR: " *** FaultException : Object reference not set to an instance of an object."
[ERROR][TiAPI   (  636)]  [REST API] apiCall ERROR: " *** FaultException : Object reference not set to an instance of an object." 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T13:24:16.590

由于主干`fetch`和`save`方法包装了函数，您可以通过将对象直接传递给or函数来`jQuery.ajax()`在 Backbone 中设置 Content-Type 和 Request Method`jQuery.ajax()` `settings``fetch``save`

例如使用`fetch`函数：

```
myModel.fetch({
    type: "POST",
    contentType: "application/json"
}); 
```

使用`save`功能相同：

```
myModel.save({
    type: "POST",
    contentType: "application/json"
}); 
```

另外我注意到你在你的`save`函数中提供了一个数据属性。如果要将 JSON 作为 POST 数据传递给 URL，则需要在`save`函数中使用以下语法：

```
myModel.save({
    data: JSON.stringify(myObject),
    type: "POST",
    contentType: "application/json"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:17:26.593

I do not quite understand the error posted but if all you want to do is set the content-type or alter some other default settings in the call, then its quite possible.

If you take a look at the save function for the Model prototype in Backbone, it actually is using this.sync or the default 'Backbone.sync' method to make the call. Checking the Backbone.sync function, you can see that it is actually using the jquery's 'ajax' method to make the call. Note line return $.ajax(_.extend(params, options)); hence you should be able to pass anything as options to it that the jquery's ajax method would take. In the same sync method you can also see you how it is setting the standard default content type, params.contentType = 'application/json';

You could also write your own sync method for the Model and make your own ajax call changing the default parameters. If your Model has its own sync method, it would then be called instead of the default Backbone.sync method.

# dojo - 以编程方式在 dojo 中添加和删除图标

> ID：14730849
> 
> 赞同：1
> 
> 时间：2013-02-06T13:56:55.680
> 
> 标签：dojo

我想在 LI 中的 ListItem 类型上添加 Icon，如何在运行时以编程方式添加它。

```
<ul data-dojo-type="dojox.mobile.RoundRectList" class="resultList">
    <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"addAPatientView", icon: "mblDomButtonDarkBlueCheck"'>
        <div class="ListItemTitle">Patient</div>
        <div class="ListItemSubTitle">Complete the new patient profile</div>
    </li>
</ul>

require(["dojo/ready","dojox/mobile/parser",
"dojox/mobile/Icon"], function (ready, Icon) {
});; 
```

代码是用[JSfiddle](http://jsfiddle.net/TribhuwanD/WAvye/)编写的，它可能不会在 JSfiddle 中显示图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:41:01.087

我分叉并更新了你的小提琴。在您的小提琴中，您没有解析小部件。

文档使用样式表，所以我添加了样式表。您使用的图标 css 类不在那个 css 中，所以我更改了它。

[http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ListItem.html](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ListItem.html)

我还演示了如何以编程方式更改图标。

[http://jsfiddle.net/cswing/L7Pwt/](http://jsfiddle.net/cswing/L7Pwt/)

```
require(["dojo/ready","dijit/registry","dojox/mobile/parser", 
  "dojox/mobile/Icon", "dojox/mobile/RoundRectList", "dojox/mobile/ListItem"], 
function (ready, registry, parser, Icon) {

    ready(100, function(){
        parser.parse();

        // change the icon programatically in 5 seconds
        setTimeout(function(){
            var li = registry.byId("listItem");
            li.set('icon', 'mblDomButtonRedCircleMinus');
        }, 5000);
    });        
}); 
```

# android - iOS 和 Android 上基于位置的操作

> ID：14730850
> 
> 赞同：0
> 
> 时间：2013-02-06T13:56:58.397
> 
> 标签：android, ios, geolocation, geofencing

我正在构建一个基于位置的私人社交网络，所以如果人们可以在到达时自动登记入住，那就太好了。无论如何在iOS上这样做？安卓呢？

在 iPhone 上，有一个选项可以在您到达特定位置时提醒某些事情，所以我猜 iPhone 是有能力的，但我不知道它是否是公共 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:29:19.470

在 ios 上，您可以使用`startMonitoringForRegion:`in `CLLocationManager`，它应该检测指定区域的边界交叉，如果当时没有运行，甚至重新启动您的应用程序

# java - 使用 im4java 创建透明画布

> ID：14730852
> 
> 赞同：0
> 
> 时间：2013-02-06T13:57:15.187
> 
> 标签：java, image, imagemagick, im4java

如何使用 im4java 创建一个空的透明画布。

使用命令行，我可以这样做：

```
convert.exe -size "64x32" canvas:transparent out.png 
```

但是使用 im4java，我被卡在 canvas 命令上：

```
ConvertCmd cmd = new ConvertCmd();
IMOperation io = new IMOperation();
io.size(64,32);
//how to add the canvas command here?
io.addImage(); //output
cmd.run(io, "out.png"); 
```

但这只会引发无法找到 out.png 的错误。所以我假设它想用它作为输入图像。

如何创建新图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:57:27.243

我自己找到了解决方案：

```
ConvertCmd cmd = new ConvertCmd();
IMOperation io = new IMOperation();
io.size(64,32);
io.addRawArgs("canvas:#00000000");
io.addImage(); //output
cmd.run(io, "out.png"); 
```

第 4 行创建一个完全透明的图像。

# java - 读取文件，获取当前位置并向后读取

> ID：14730862
> 
> 赞同：-1
> 
> 时间：2013-02-06T13:57:46.693
> 
> 标签：java, file

我正在使用 BufferedReader 类通过逐行读取来搜索大文件中的某个事件。

找到事件后如何获取当前位置？那么，如何从该位置开始反向读取文件？

我真的在网上搜索了一个一致的解决方案，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:10:58.317

```
public static void main(String[] args) throws Exception {
    FileReader fr = new FileReader("sample.txt");
    BufferedReader reader = new BufferedReader(fr);
    String line = "";

    ArrayList<String> linee = new ArrayList<String>();

    while ((line = reader.readLine()) != null) {
        if (line.equals("bb"))
            break;
        linee.add(line);

    }

    reader.close();
    for (int i = linee.size() - 1; i >= 0; i--)
        System.out.println(linee.get(i));

} 
```

# prestashop - Prestashop：自定义模块未显示在后台

> ID：14730866
> 
> 赞同：1
> 
> 时间：2013-02-06T13:57:58.107
> 
> 标签：prestashop

我想在 prestashop 中创建一个自定义模块，但它没有显示在后台的模块选项卡中。

我创建了一个非常基本的测试模块，但即使这样也没有出现在后台。

我在文件夹中有一个 text.php 文件：modules/test 这是文件的代码：

```
<?php

if (!defined('_PS_VERSION_'))
    exit;

class Test extends Module
{
    public function __construct()
    {
        parent::__construct();  

        $this->name = 'Test';
        $this->tab = 'Test';
        $this->version = 1.0;
        $this->author = 'Test';
        $this->need_instance = 0;

        $this->displayName = 'TEST';
        $this->description = 'TEST';
    }

    public function install()
    {
        return (parent::install());
    }
} 
```

据我了解，这足以让基本模块显示在后台的模块选项卡中。

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T00:16:18.290

在您的测试模块中，可能有几个原因：

1.  您需要将文件命名为与文件夹相同的名称，以便在 modules/test 文件夹中命名为 test.php

2.  $this->name = '测试'; test 应该是小写的，如[Prestashop 官方指南](http://doc.prestashop.com/display/PS15/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-Modulesfolder) “名称”属性中所述。用作内部标识符，因此使其唯一，没有特殊字符或空格，并保持小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:35:45.410

你用的是什么版本的PS？如果 < 1.5，似乎几天前发布了一个稳定且漏洞较少的 1.4.10。我在我的网站 Panapaná ( [http://www.panapana.com.br](http://www.panapana.com.br) ) 上使用 1.4.10，并且在使用 1.4.8.2 时遇到了类似的问题。迁移到 1.4.10 后，此问题不再存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T13:39:58.060

注意 parent::__construct() 的位置；

我认为你在设置足够的信息之前打电话给父母。我还建议为您的测试模块使用不同的名称，而不是通用的名称。

```
<?php

if (!defined('_PS_VERSION_'))
    exit;

class Test extends Module
{
    public function __construct()
    {

        $this->name = 'Test';
        $this->tab = 'Test';
        $this->version = 1.0;
        $this->author = 'Test';
        $this->need_instance = 0;

        parent::__construct();  

        $this->displayName = 'TEST';
        $this->description = 'TEST';
    }

    public function install()
    {
        return (parent::install());
    }
} 
```

# xcode - 作为一个团队处理 Xcode 项目

> ID：14730868
> 
> 赞同：2
> 
> 时间：2013-02-06T13:58:01.017
> 
> 标签：xcode, git, svn, ios5, github

我在一家公司工作，该公司现在增加了一名新员工来帮助我处理现有的 Xcode 项目。据我了解，这需要我们俩都使用 Git 或 SVN 在一个团队中工作。

1) 如何将现有项目转换为本地/远程 git？（我已经打开了我的项目，但没有包含本地 git）。
2）也许我理解错了，但是如果我将我的项目包含到远程git，即github存储库中，这是否意味着世界上每个人都会看到我的代码？我只需要我和新员工来查看和处理代码。这是一个私人项目。我该如何正确地做到这一点？

我将第一次在团队中工作，开发 iOS 应用程序，所以对于初学者的问题，我很抱歉 :)

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:05:26.080

> 1) 如何将现有项目转换为本地/远程 git？（我已经打开了我的项目，但没有包含本地 git）。

初始化 git 存储库只需转到终端中的项目文件夹并运行

```
git init 
```

它将为您创建本地 git 存储库，您可以在其中提交代码。要将其“连接”到远程存储库，请运行

```
git remote add origin URL_TO_REPOSITORY 
```

然后推送您的更改

> 2）也许我理解错了，但是如果我将我的项目包含到远程git，即github存储库中，这是否意味着世界上每个人都会看到我的代码？我只需要我和新员工来查看和处理代码。这是一个私人项目。我该如何正确地做到这一点？

要在 Github 上拥有只能与您的团队成员共享的私有存储库，您需要订阅它的一些付费计划。还有一些其他选项可以提供免费的私有存储库，例如[Bitbucket](https://bitbucket.org)

# asp.net - 使用 JQuery 呈现部分视图时面临的问题

> ID：14730869
> 
> 赞同：2
> 
> 时间：2013-02-06T13:58:01.277
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我有一个像下面这样的区域。

![在此处输入图像描述](../Images/2f179d15a2c237dc6c5164bc1b6a78f2.png)

**以下是控制器操作。**

```
[HttpGet]
public ActionResult Index_partial()
{
    return PartialView("_PartialPage1");
}

[HttpGet]
public ActionResult Index()
{
    AdminModule model = new AdminModule();
    model.MyName = "My Name";
    return View("Index", model);
} 
```

**看法**

```
@model _1.Areas.Admin.Models.AdminModule
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutPage1.cshtml";
}
<h2>
    Index</h2>
<script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript">
</script>
<script type="text/javascript" src="/scripts/jquery.unobtrusive-ajax.js">
</script>
<div id="myForm">
    @using (Html.BeginForm())
    {
        <p id="pid">
        </p>
        <input onclick="ClickHere();" type="submit" value="Button" />
    }
    <script language="javascript" type="text/javascript">
        function ClickHere() {
        debugger;
            var url = '@Url.Action("Index_partial", "Admin")';
            $('#p').load("@Url.Action("Index_partial", "Admin")");
        }

    </script>
</div> 
```

====================================

**局部视图**

```
@model _1.Areas.Admin.Models.AdminModule
@using (Ajax.BeginForm("Index", "Admin", 
             new AjaxOptions { UpdateTargetId = "myForm", HttpMethod = "Post" }))
{
    @Html.LabelFor(i => i.MyName)
    @Html.TextBoxFor(i => i.MyName)
    @Html.ValidationMessageFor(i => i.MyName)
    <p id="getDateTimeString">
    </p>
    <input type="submit" value="Click here" id="btn" />
} 
```

======================================

在视图中，我有一个按钮，单击它应该呈现部分视图

```
<p id="pid"></p> 
```

**问题是 - 单击按钮将页面导航到部分视图，它应该在 p 标记中呈现部分视图 Html。这该怎么做 ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:05:47.110

1.  去除那个`@using (Html.BeginForm())`
2.  为您的按钮添加一个 id

：

```
< input onclick="ClickHere();" type="submit" id="Button" value="Button" /> 
```

3.  将您的点击事件重新分配给不显眼的而不是内联的：

：

```
$('#Button').click(function(){
       debugger;
            var url = '@Url.Action("Index_partial", "Admin")';
            $('#p').load("@Url.Action("Index_partial", "Admin")");
        } 
```

1.  更改您的部分退货

：

```
return PartialView("_PartialPage1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:05:39.747

删除`@using (Html.BeginForm())`并添加这段 HTML：

```
<p id="pid"></p>

<button type="button" id="mybtn">Load partial view</button> 
```

然后，添加一点 jQuery：

```
(function() {
    $('#mybtn').click(function() {
        $.ajax({
            url: '@Url.Action("Index_partial", "Admin")',
            type: 'GET',
            cache: false,
            success: function(result) {
                $('#pid').empty().html(result);
            }
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:09:00.053

控制器：

```
[HttpGet]
public ActionResult Index_partial()
{
    return PartialView("_PartialPage1");
} 
```

在视图/javascript 内部。

```
<script language="javascript" type="text/javascript">
    function ClickHere() {
        $.ajax({
        url: "@Url.Action(MVC.Admin.Index_partial())",
        async: false,
        data: { },
        success: function(data) {
            $("#pid").empty();
            $("#pid").html(data);
        }
    });
    }
</script> 
```

我使用[T4MVC](http://t4mvc.codeplex.com/)生成 url。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:27:40.920

家庭控制器：

```
[HttpGet]
public ActionResult PartialView()
{
   return this.PartialView("PartialView");
} 
```

看法

```
<script type="text/javascript">

    $(document).ready(function () {

        $("#btnSubmit").click(function() {

            $("#renderedHtml").load('Home/PartialView');

        });

    });

</script>

    <div id="renderedHtml"></div>
    <input type="submit" value="Get Partial" id="btnSubmit" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T14:34:48.530

视图应该是这样的...

```
<div id="myForm">
    <p id="pid">
    </p>
</div>
<input id="BTN" type="submit" value="Button" />
<script language="javascript" type="text/javascript">
    $('#BTN').click(function(){
        $('#pid').load("@Url.Action("Index_partial", "Admin")");
    });
</script> 
```

# python - 集群的 Jython 脚本

> ID：14730871
> 
> 赞同：0
> 
> 时间：2013-02-06T13:58:04.067
> 
> 标签：python, websphere, jython, websphere-8, jython-2.5

我需要在 WebSphere 应用程序服务器版本 8 上运行 Jython 脚本

1.  检查部署在集群范围内的应用程序是否准备就绪
2.  启动部署在集群范围内的应用程序（AdminApplication.startApplicationOnCluster 除外）
3.  停止部署在集群范围内的应用程序

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T07:48:20.953

`AdminApp.isReady`用于检查应用程序是否准备就绪。

为了`AdminApplication`从 scriptingLibraries 启动和停止它的最佳使用，它会自动导入到 wsadmin（您可以在 中查看它的内容`/opt/IBM/WebSphere/AppServer/scriptLibraries/application/`）

`AdminApplication`包含功能`startApplicationOnCluster`，`stopApplicationOnCluster`这基本上是您所需要的。

只需给它一个应用程序名称和一个集群名称，它就会完成其余的工作，例如：

```
# Start app
AdminApplication.startApplicationOnCluster("MyApp", "Mycluster01");

# Stop app
AdminApplication.stopApplicationOnCluster("MyApp", "Mycluster01"); 
```

# c# - 在预构建事件中添加源文件和程序集引用

> ID：14730872
> 
> 赞同：3
> 
> 时间：2013-02-06T13:58:10.697
> 
> 标签：c#, visual-studio, pre-build-event

我想在我的项目中有一个“manifest.json”文件，其中包含项目所依赖的 .cs 和 .dll 文件的列表，但不是项目的一部分。要在构建时也编译这些文件，我需要以某种方式告诉 Visual Studio 将这些源文件和程序集包含到构建过程中。

有没有办法在预构建事件中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:46:36.960

我现在制作了一个自定义 ITaskItem，它在构建过程之前添加了文件。

这是我的做法：

1) 创建自定义 ITaskItem

```
public class AddSourceFiles : Task
{
    private ITaskItem[] output = null;

    [Output]
    public ITaskItem[] Output
    {
        get
        {
            return output;
        }
    }

    public override bool Execute()
    {
        //gather a list of files to add:
        List<string> filepaths = new List<string>() { "a.cs", "b.cs", "d.cs" };

        //convert the list to a itaskitem array and set it as output
        output = new ITaskItem[filepaths.Count];
        int pos = 0;
        foreach (string filepath in filepaths)
        {
            output[pos++] = new TaskItem(filepath);
        }
    }
} 
```

2) 创建一个 *.targets 文件，例如“AddSourceFiles.targets”：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <UsingTask AssemblyFile="AddSourceFiles.dll" TaskName="AddSourceFiles" />
    <PropertyGroup>
        <BuildDependsOn>
            AddSourceFiles;
            $(BuildDependsOn);
        </BuildDependsOn>
    </PropertyGroup>
    <Target Name="AddSourceFiles">
        <AddSourceFiles>
            <Output TaskParameter="Output" ItemName="Compile" />
        </AddSourceFiles>
    </Target>   
</Project> 
```

如您所见，“AddSourceFiles”类的生成 DLL 在任务文件中被引用。

3) 最后一步是将此 .targets 文件导入您希望使用 AddSourceFiles 类包含文件的每个 .csproj 文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  .
  .
  <Import Project="c:\path\to\AddSourceFiles.targets" />
  .
  .
</Project> 
```

我对此也很陌生，所以请随时改进这个；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:33:50.983

你应该使用 VisualStudio 宏：

[http://msdn.microsoft.com/en-us/library/b4c73967(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/b4c73967(v=vs.100).aspx)

[http://msdn.microsoft.com/en-us/library/8h31zbch.aspx](http://msdn.microsoft.com/en-us/library/8h31zbch.aspx)

宏 IDE 包含一个与您尝试实现的示例类似的示例：

AddDirAsSlnFolder — 将磁盘上的文件夹导入解决方案文件夹结构。

- - - 更新 - - -

我刚刚发现 Vs2012 删除了宏功能....

# javascript - 在回调/闭包中设置作用域变量的值

> ID：14730880
> 
> 赞同：1
> 
> 时间：2013-02-06T13:58:30.393
> 
> 标签：javascript

我有一个非常大的 JS 脚本，其中包含许多函数、回调等等……我的第一个操作是从 Ajax 调用中获取一个值。然后我将此值设置为在脚本开头定义的全局变量，以便我可以一次又一次地引用该值……例如，该值确定用户语言。

```
// define my global var at the top of my script..
var globalOpCo = "";

// I then try to give this a value in the next function I call...
$.ajax({
        url:"getURL",
        type:"POST",
        dataType:"json",
        success:function(data){
            if(data === null){
            // do something...  
            }else{
            // set the current language...
                globalOpCo = data.Opco.toLowerCase();
                console.log(globalOpCo); // this is the value I want it to be from data.Opco.toLowerCase() 
                // now do something.... 
            }
        },
        error:function(xhr, ajaxOptions, thrownError){
            console.log(xhr.status);
            console.log(xhr.statusText);
            console.log(thrownError);
        }
    }); 
```

现在稍后在我的脚本中，我希望`globalOpCo`像这样传递给另一个函数......

```
 $("#aButton").on("click", function(){
        anotherFunction(globalOpCo); // I want to pass the globalOpCo as an arguement but its value isn't get updated above?
    }); 
```

但是 的值`globalOpCo`是一个空字符串！在上面的 ajax 调用运行之前或之前，无法单击 #aButton。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:02:15.383

默认禁用您的按钮，在您定义 globalOpCo 后将您的 onclick 添加到您的成功函数中，并在您设置 onclick 时启用它。奖励：现在它不再需要是全局的，因为需要它的代码就在它旁边。哪个好=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:05:33.823

好吧，我可能已经解决了这个问题！它是作用域，变量在内部定义，`$("document").ready(function(){})`而调用它的函数在外部`$("document").ready(function(){})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:07:33.603

全局变量只是`window`浏览器中全局对象的属性。您可以通过显式使用`window.globalOpCo`.

# knockout.js - 两次绑定到相同的数据在淘汰赛中第二次不起作用

> ID：14730883
> 
> 赞同：2
> 
> 时间：2013-02-06T13:58:40.480
> 
> 标签：knockout.js, jqxgrid, jqxwidgets

我提交供您考虑，这个小提琴：http: [//jsfiddle.net/alexdresko/HFFUL/5/](http://jsfiddle.net/alexdresko/HFFUL/5/)

HTML 中有两个相同的网格，但是当您单击“加载”按钮时，只会填充其中一个。

这是我自己对knockout的根本误解，还是jqxgrid的问题？

这是代码：

```
<a href="#" data-bind="click: load">Load</a>

<div class="aGrid" data-bind="jqxGrid: { source: Stuff().People, columns: [ {text: 'Name', datafield: 'Name'} ], autoheight: true, sortable: true, altrows: true, enabletooltips:true }"></div>
<div class="aGrid" data-bind="jqxGrid: { source: Stuff().People, columns: [ {text: 'Name', datafield: 'Name'} ], autoheight: true, sortable: true, altrows: true, enabletooltips:true }"></div>

var dataFromServer = {
    People: ko.observableArray([{
        Name: "George"
    }, {
        Name: "Scot"
    }])
};

var viewModel = function () {

    this.Stuff = ko.observable({});
    this.load = function () {
        this.Stuff(dataFromServer);

    };
};

$(function () {
    var vm = new viewModel();
    ko.applyBindings(vm);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T14:45:18.703

问题出在某个地方，因为您在此处`source : Stuff().People`明确获取可观察对象的*值*`Stuff`并访问其`People`属性。改变`Stuff`自身不会改变*这个*绑定的 observable 数组。

但是，有一个整体更优雅的解决方案，您也不必自己制作`dataFromServer`可观察的：

**HTML：**

```
<a href="#" data-bind="click: load">Load</a>

<div class="aGrid" data-bind="jqxGrid: { source: Stuff.People, columns: [ {text: 'Name', datafield: 'Name'} ], autoheight: true, sortable: true, altrows: true, enabletooltips:true }"></div>
<div class="aGrid" data-bind="jqxGrid: { source: Stuff.People, columns: [ {text: 'Name', datafield: 'Name'} ], autoheight: true, sortable: true, altrows: true, enabletooltips:true }"></div> 
```

**JavaScript：**

```
var dataFromServer = [{
        Name: "George"
    }, {
        Name: "Scot"
    }];

var viewModel = function () {

    this.Stuff = { People: ko.observableArray([]) }
    this.load = function () {
        for (i=0; i < dataFromServer.length; ++i) {
            this.Stuff.People.push(dataFromServer[i]);
        }

    };
};

$(function () {

    var vm = new viewModel();
    ko.applyBindings(vm);

}); 
```

[分叉的 JSFiddle](http://jsfiddle.net/2ZmnP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:17:29.397

不确定原因，但是当我将您的两个网格包装在这样的 div 中时：

```
<div data-bind="if: Stuff().People"> 
```

它工作得很好。当然，这会完全隐藏您的网格，直到您单击加载。

[小提琴](http://jsfiddle.net/HFFUL/6/)

# java - Java：提高慢线程动画的流畅度？

> ID：14730887
> 
> 赞同：2
> 
> 时间：2013-02-06T13:59:08.393
> 
> 标签：java, multithreading, animation, graphics

我正在尝试创建一个像曲棍球盘一样缓慢移动并且速度逐渐降低的动画。

所以我试着这样做：

```
for(Disc d : panel.getDiscs()
{
    if(d.getLaunch() <= 70) move(d);
} 
```

和 ：

```
private void move(Disc d)
{
        Point p = d.getLocation();
        Point speed = d.getSpeed();
        Dimension size = d.getSize();

        int vx = speed.x;
        int vy = speed.y;

        int x = p.x;
        int y = p.y;

        if (x + vx < 0 || x + size.width + vx > panel.getWidth()) {
            vx *= -1;
        }
        if (y + vy < 0 || y + size.height + vy > panel.getHeight()) {
            vy *= -1;
        }
        x += vx;
        y += vy;

        d.setSpeed(new Point(vx, vy));
        d.setLocation(new Point(x, y));

    try
    {
        Thread.sleep(d.getLaunch());
    } catch (InterruptedException e)
    {
        e.printStackTrace();
    }
        if(d.getCoeff() < 5) d.setCoeff(d.getCoeff()+1);
        else { d.setLaunch(d.getLaunch()+1); d.setCoeff(0); }
} 
```

我在这里要做的是增加一个从 20 开始并一直运行到 70 的值（启动），然后我在每个`Thread.sleep(launch);`. 我只在之前显示 5 帧时才增加这个值（系数）。

问题如下：当我尝试使用太小的值时，光盘太快并且过早停止运行。当我尝试使用更高的值时，光盘速度看起来不错，但最后的动画不是很流畅......我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:03:33.027

你最应该做的，并且会提高你的动画流畅度的，不是用来`sleep`调整动画节奏的。这会阻塞负责绘制冰球的线程。你需要的是一个`SwingTimer`被适当安排来执行动画的。给它一个稳定的射击速度，并通过您应用的位置增量控制速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:02:21.407

我建议根本不使用 Thread.sleep，而是实现一个游戏循环，该循环由计时器每隔一段时间调用一次，然后简单地缓慢降低每个循环的速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:04:46.400

您的方法似乎无效。显示光盘和确定它的位置是两件不同的事情。我觉得：

*   在一个线程中，您应该定期（每秒 100 次？）计算光盘的位置
*   每秒几次，您应该降低磁盘的速度（基于 System.currentTimeMilliseconds() 的速度降低，而不是循环执行的次数）
*   每秒30-60次绘制圆盘的位置

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:09:15.527

您应该使用*时间增量*来计算每次迭代中移动的距离（请记住`dx = v*dt`：），因此您的动画速度与更新率无关。

然后，您可以使用已经提到的任何其他技巧（例如计时器）使其更加稳定。

# macos - 如何从 Mac OS X 调试 ARM

> ID：14730892
> 
> 赞同：2
> 
> 时间：2013-02-06T13:59:20.960
> 
> 标签：macos, gdb, arm

我正在 ARMv5 板上开发，我正在尝试使用 intel Mac OS X 在其上调试程序，

我在 Linux 上尝试没有任何问题（我使用 gnueabi 工具链编译了二进制文件），我在板上运行了一个 gdbserver 并在主机上连接到它，一切都很好。

但是在 Mac OS X 上似乎要棘手得多，我想我也需要一个交叉编译的 gdb 用于 ARM 目标，但我不想安装所有工具链。

既然 Mac OS 支持 iOS 远程调试，难道没有一个 gdb 可以用于 ARM 远程调试吗？

还有一个问题：为什么我们需要一个交叉编译的调试器来进行远程调试？不依赖于架构，服务器和客户端不能简单地通过网络进行通信吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T23:57:29.413

您`gdb`不仅需要为正确的架构配置构建，而且还需要对象文件类型：请记住，MacOSX/Darwin 使用 MachO 对象文件，而 GNU/Linux 系统使用 ELF。

使用时`gdbserver`，`gdb`在开发主机上运行，​​并读取可执行文件和库以构建与目标对应的符号映射。正是出于这个原因，`gdb`Apple 发布的为 Darwin 和 MachO 二进制文件构建的版本无法正常工作。

至于为什么事情是这样的，这是一个架构限制`gdb`，`binutils`顺便说一句`gcc`- 所有这些都只能一次处理一个目标环境。
对于远程调试场景，通常需要最小化链接流量和目标内存占用。请记住，通信链路有时是低速串行线路。出于这个原因，尽可能在开发主机上完成`gdbserver`非常低级别的操作。

为 MacOSX 构建跨 gdb 环境不应该带来任何特殊问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:06:09.610

除非您使用 Mach-O 对象格式，否则 Apple 工具对您几乎没有用处。您将需要构建自己的工具链。如果您安装了 Macports，这将很容易，因为它包含 arm-elf-eabi 工具链的一个端口。见[http://www.macports.org/ports.php?by=name&substr=eabi](http://www.macports.org/ports.php?by=name&substr=eabi)

# c++ - C++ 标准在哪里描述了指向基元的指针转换？

> ID：14730896
> 
> 赞同：9
> 
> 时间：2013-02-06T13:59:32.140
> 
> 标签：c++, casting, language-lawyer

在优秀的博客文章[What Every Programmer Should Know About Undefined Behavior](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)中，“违反类型规则”部分说：

> 将 int* 转换为 float* 并取消引用它是未定义的行为（访问“int”，就好像它是“float”一样）。C 要求这些类型的类型转换通过 memcpy 发生：使用指针转换是不正确的，并且会导致未定义的行为。这方面的规则非常微妙，我不想在这里详细介绍（char* 有一个例外，向量具有特殊属性，联合改变事物等）。

我想了解规则的全部细微差别。它们在 C++11 规范中的什么位置？还是失败了，C 规范（C90、C99、C11）？

在从[这个 Stack Overflow 问题](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)N3485 链接的 C++11 规范中，我正在查看 5.2.10“重新解释演员表”，但没有看到 char* 或联合异常的语言。所以这可能不是正确的地方。那么正确的地方在哪里呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T15:27:55.487

您正在寻找的规则在 §3.10/10 中（在 C++11 中）：

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义： — 对象的动态类型，
> 
> — 对象动态类型的 cv 限定版本，
> 
> — 与对象的动态类型类似（如 4.4 中定义）的类型，
> 
> — 对应于对象动态类型的有符号或无符号类型， — 对应于对象动态类型的 cv 限定版本的有符号或无符号类型，
> 
> — 在其元素或非静态数据成员中包含上述类型之一的聚合或联合类型（递归地，包括子聚合或包含联合的元素或非静态数据成员），
> 
> — 作为对象动态类型的（可能是 cv 限定的）基类类型的类型，
> 
> — char 或 unsignedchar 类型。

未定义的行为有不同的类型（或动机）。

在强制转换`int*`到`float*`然后取消引用它的情况下，很明显标准无法定义它，因为可能发生的情况取决于架构和`int`. 另一方面，引用的段落是完全错误的——使用`memcpy`来进行转换也是未定义的行为，原因大致相同。

未定义行为的动机之一是允许实现以对目标架构有意义的方式定义它，*如果*存在的话。这是这样一种情况。故意导致它失败的编译器是有缺陷的。当然，如果我们假设 32 位 2 的补码 `int`和 32 位 IEEE `float`，我们可能会期望 的某些值`int`对应于捕获 NaN，这将导致程序失败。这是行为未定义的部分原因；允许这样的事情发生。但是如果我们熟悉硬件的底层细节，它*应该*可以按预期工作，*前提是*编译器可以看到演员表。如果没有，这是编译器的 QoI 问题，对于此类工作应避免使用此类编译器。

正如上面所暗示的，这种特殊情况，事实上，在所有涉及类型双关语的情况下（例如，写入联合的一个成员，并从另一个成员读取）确实会造成问题，标准尚未解决找到适当的措辞。出现问题是因为通常允许编译器假定指向不同类型（字符类型除外）的指针没有别名；a`int*`永远不能和 a 指向同一个对象`float*`. 并且证明两个指针不能别名对于优化很重要。即使标准说它是未定义的行为，在指针强制转换或联合清晰可见的地方破坏代码的编译器也会被破坏。一个编译器在它看到的只是两个指向不相关类型的指针的情况下中断代码是可以理解的，即使在标准规定行为定义良好的情况下也是如此。

Using`memcpy`通过使用两个不同的对象来避免这个问题，这两个对象没有别名。它仍然会遇到未定义的行为，因为将 a 的位模式`int`放入 a `float`，然后访问浮点数，没有任何已定义的行为。（反之亦然；我知道至少有一台机器将 a 的位复制`float`到 an`int`可能会导致非法`int`值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:05:56.920

C++ 标准规定，如果某个行为未明确描述为定义，则它是隐式未定义的。由于标准没有定义强制转换为的行为`int*`，`float*`因此它是隐式未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:18:39.200

`reinterpret_cast`on 指针是根据`static_cast`on`void`指针定义的

**5.2.10 重新解释演员表 [expr.reinterpret.cast]>**

> 7 对象指针可以显式转换为不同类型的对象指针。70 当“pointer to T1”类型的prvalue v转换为“pointer to cv T2”类型时，结果是`static_cast<cv T2*>(static_cast<cv void*>(v))`如果T1和T2都是标准布局类型（3.9）并且T2的对齐要求不严格T1 的那些，或者如果任何一种类型都是无效的。将“指向 T1 的指针”类型的纯右值转换为“指向 T2 的指针”类型（其中 T1 和 T2 是对象类型，并且 T2 的对齐要求不比 T1 的对齐要求更严格）并返回其原始类型会产生原始类型指针值。未指定任何其他此类指针转换的结果。

**5.2.9 静态转换 [expr.static.cast]**

> 13 “指向 cv1 void 的指针”类型的纯右值可以转换为“指向 cv2 T 的指针”类型的纯右值，其中 T 是对象类型，而 cv2 与 cv1 相同的 cv 限定或大于 cv1 的 cv 限定. 空指针值转换为目标类型的空指针值。指向对象的指针类型的值转换为“指向 cv void 的指针”并返回，可能具有不同的 cv 限定，应具有其原始值。

# ruby - Ruby - 相同类类型的常量

> ID：14730899
> 
> 赞同：2
> 
> 时间：2013-02-06T13:59:51.173
> 
> 标签：ruby, enums

我尝试了以下方法，但收到错误“参数数量错误（2 代表 0）”：

```
class Rating
  NOOB = Rating.new(1, "U A NOOB")
  def initialize(rating, message)
    @rating = rating
    @message = message
  end
 end 
```

什么相当于用 Ruby 编写以下代码？（这是我做枚举的方式）

```
public class Rating {
  public static Rating NOOB = new Rating(1, "U SO NOOB");
  public static Rating EXPERT = new Rating(2, "U A PRO BRO");

  private int rating;
  private String message;

  public Rating(int rating, String message) {
    this.rating = rating;
    this.message = message;
  }
  ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:13:43.720

如果你把它工作

```
NOOB = Rating.new(1, "U A NOOB") 
```

在 的定义之下`initialize`，否则解释器还没有解释它，也不知道它需要的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:12:41.297

出于某种原因，如果将常量声明放在初始化块的末尾，它会起作用：

```
class Rating
  def initialize(rating, message)
    @rating = rating
    @message = message
  end
  NOOB = new(1, "U A NOOB")
end

p Rating::NOOB
=> #<Rating:0x0000000162a9c0 @rating=1, @message="U A NOOB"> 
```

# xcode - 在 iphone 应用程序中的 2 个不同目标的启动图像上飞溅“Default.png”

> ID：14730905
> 
> 赞同：2
> 
> 时间：2013-02-06T14:00:13.143
> 
> 标签：xcode, cocos2d-iphone

我的应用程序有 2 个版本，我无法为 lite 指定启动图像，因为当我放置完整版本的图像时，它突然改变了我的 lite 图像。

出现一个警报并告诉我是否要替换“Default.png”：

```
 but the launch image must have the name "Default.png".
The file will be copied and added to your project as "Default.png". 
Do you want to continue? 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T18:47:42.887

一个应用程序只能有一个 Default.png。在启动同一个应用程序期间，无法以编程方式或以其他方式有条件地显示不同的 Default.png。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T21:44:17.910

如果我没听错的话，您可以创建一个全黑的 Default.png，然后在 Cocos2D 初始化后显示一个 png，这将根据您选择的任何限制而有所不同。我不建议将此作为良好做法，Apple 当然可能会拒绝使用完全黑色的 Default.png 提交的应用程序/游戏，但可能不会。我从来没有尝试过这样的事情。

# powershell - 在 powershell LDAP 路径中转义空格

> ID：14730916
> 
> 赞同：0
> 
> 时间：2013-02-06T14:00:41.783
> 
> 标签：powershell, ldap, space

我有以下PowerShell代码：

```
 $strCategory = "computer"

 $objDomain = New-Object System.DirectoryServices.DirectoryEntry("LDAP://OU=Computers,OU=2 Streetsville,DC=ourdomain,DC=local")

 $objSearcher = New-Object System.DirectoryServices.DirectorySearcher($objDomain)
 $objSearcher.Filter = ("(objectCategory=$strCategory)")

 $colProplist = "name"
 foreach ($i in $colPropList){[void]$objSearcher.PropertiesToLoad.Add($i)}

 $colResults = $objSearcher.FindAll() 
```

当我们的 LDAP 路径不包含空格时，代码运行良好：

```
LDAP://OU=Computers,OU=DataCenter,DC=ourdomain,DC=local 
```

但是，当我们将 DataCenter OU 重命名为地址时：

```
LDAP://OU=Computers,OU=2 Streetsville,DC=ourdomain,DC=local 
```

突然代码不再起作用。

我认为没问题，我只需要使用以下命令逃离空间`\`：

```
LDAP://OU=Computers,OU=2\ Streetsville,DC=ourdomain,DC=local 
```

然而，这是行不通的。我还尝试了一个双斜杠来逃避空格：

```
LDAP://OU=Computers,OU=2\\ Streetsville,DC=ourdomain,DC=local 
```

我不知道还能尝试什么。我可以回到一个没有空格的 OU 名称，但我宁愿不这样做。有人可以帮我弄清楚如何正确逃离这个空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-06T04:01:58.963

看看这个链接，特别是 Powershell 和 ADSI 部分，它有多个转义字符的例子：

[http://social.technet.microsoft.com/wiki/contents/articles/5312.active-directory-characters-to-escape.aspx](http://social.technet.microsoft.com/wiki/contents/articles/5312.active-directory-characters-to-escape.aspx)

LDAP 中的空格应该不是问题，但可能是单引号和双引号的组合。我们有带空格的 OU，并且用双引号构造 LDAP 查询可以正常工作：

```
$searchme = [ADSI]"LDAP://OU=Computers,OU=2 Streetsville,DC=ourdomain,DC=local"
 $search = [adsisearcher]$searchme
 $colResults = $search.FindAll() 
```

您收到的错误是说传入的 OU 不存在，这表明 LDAP 字符串中可能存在拼写错误，可能值得仔细检查拼写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:04:35.143

尝试：

```
 .... DirectoryEntry('LDAP://OU=Computers,OU="2 Streetsville",DC=ourdomain,DC=local') 
```

# mysql - MySQL 从组合的多个字段中获取 COUNT

> ID：14730920
> 
> 赞同：2
> 
> 时间：2013-02-06T14:01:01.790
> 
> 标签：mysql, self-join, union-all

假设我有一张桌子：

```
user_id    parent_id    lev1    lev2   lev3    lev4
1          0            0       0      0       0
2          1            1       0      0       0
3          1            1       0      0       0
4          2            2       1      0       0
5          4            4       2      1       0
6          4            4       2      1       0
7          5            5       4      2       1 
```

基本上，这是为了跟踪父子层次结构，我想知道父母有多少孩子。下面是我想要的输出：

```
parent_id     children
1             5
2             4
3             0
4             3
5             1
6             0
7             0 
```

我想计算组合的 lev1、lev2、lev3 和 lev4 字段，以计算这些字段中总共有多少个 ID。

我读到了 UNION ALL，但我似乎无法弄清楚它是如何运作的。我正在考虑一个带有自我加入的 UNION ALL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:03:29.657

您需要`LEFT JOIN`针对每一`levN`列的子查询，它返回不同的级别，并为该列计数。然后他们都被加起来并加入到`user_id`.

```
SELECT
  DISTINCT
  user_id,
  /* COALESCE() is needed so NULLs don't ruin the calculation */
  COALESCE(l1count, 0) +
  COALESCE(l2count, 0) +
  COALESCE(l3count, 0) +
  COALESCE(l4count, 0) AS children
FROM
  yourtable
  /* a left join individually against each of the `levN` columns to get the count per value of each */
  LEFT JOIN (SELECT lev1, COUNT(*) AS l1count FROM yourtable GROUP BY lev1) l1 ON yourtable.user_id = l1.lev1
  LEFT JOIN (SELECT lev2, COUNT(*) AS l2count FROM yourtable GROUP BY lev2) l2 ON yourtable.user_id = l2.lev2
  LEFT JOIN (SELECT lev3, COUNT(*) AS l3count FROM yourtable GROUP BY lev3) l3 ON yourtable.user_id = l3.lev3
  LEFT JOIN (SELECT lev4, COUNT(*) AS l4count FROM yourtable GROUP BY lev4) l4 ON yourtable.user_id = l4.lev4 
```

[http://sqlfiddle.com/#!2/214a8/16](http://sqlfiddle.com/#!2/214a8/16)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:01:17.077

我可以让你部分到达那里，除了我没有显示任何计数为零的东西。（另外，正如@Raphaël Althaus 指出的那样，父母 1 在您的数据中计数为 6 而不是计数 5）。

```
sqlite> .schema
CREATE TABLE tmp (
user int,
parent int,
l1 int,
l2 int,
l3 int,
l4 int
);
sqlite> select * from tmp;
1,0,0,0,0,0
2,1,1,0,0,0
3,1,1,0,0,0
4,2,2,1,0,0
5,4,4,2,1,0
6,4,4,2,1,0
7,5,5,4,2,1
sqlite> select who,count(who) from
   ...>   (select l1 as who from tmp union all
   ...>    select l2 as who from tmp union all
   ...>    select l3 as who from tmp union all
   ...>    select l4 as who from tmp)
   ...> where who <> 0
   ...> group by who;
1,6
2,4
4,3
5,1
sqlite> 
```

# ckeditor - 如何删除 CKEditor 4 在内联编辑时自动添加的“title”属性？

> ID：14730921
> 
> 赞同：6
> 
> 时间：2013-02-06T14:01:03.337
> 
> 标签：ckeditor, title, inline-editing

在对象上使用 CKEditor 4 内联编辑时，CKEditor 添加一个“标题”属性，其中包括文本和对象 ID。

例如，在 CKEditor 内联示例中，我们可以看到以下代码：

```
<h2 id="inline-sampleTitle" title="Rich Text Editor, inline-sampleTitle"....>CKEditor<br>Goes Inline!</h2> 
```

我喜欢删除“title”属性，因为我不喜欢用户看到它（我的 id 更复杂:)）。

注意：我试图在CKEditor使用jQuery“removeAttr”函数创建它之后手动删除它，但这个解决方案对我来说并不是很好，因为在IE浏览器中用户仍然会在第一次看到它并且它只会在用户之后删除将鼠标从对象中移出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-12T16:02:08.470

CKEDITOR.config.title = 假；

有关更多详细信息，请访问[此](http://docs.ckeditor.com/#!/guide/dev_widgets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:24:00.387

您可以在此处找到一些详细信息：[如何更改内联实例的标题 ckeditor 集？](https://stackoverflow.com/questions/14502142/how-can-i-change-the-title-ckeditor-sets-for-inline-instances/14548739#14548739)

不幸的是，您不能在不修改代码的情况下更改它。我报告了这个[http://dev.ckeditor.com/ticket/10042的票](http://dev.ckeditor.com/ticket/10042)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:02:47.253

请参阅[https://stackoverflow.com/a/15270613/2148773](https://stackoverflow.com/a/15270613/2148773) - 看起来您可以手动设置编辑器元素的“标题”属性以覆盖工具提示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-13T08:56:38.827

在你的配置中

```
CKEDITOR.editorConfig = function( config ) {
    // Define changes to default configuration here.
    // For the complete reference:
    // http://docs.ckeditor.com/#!/api/CKEDITOR.config
    config.title="";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-13T15:28:50.473

CKEditor 在 4.2 版本中修复它，所以我们现在可以删除这个修复:) [http://dev.ckeditor.com/ticket/10042](http://dev.ckeditor.com/ticket/10042)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-10T20:42:54.417

您可以放入 ckeditor 配置对象函数，该函数将在编辑器初始化后删除标题：

```
on: {       
        instanceReady: function(event){
            $(event.editor.element.$).attr('title','');
        },
}, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-19T11:04:47.133

您可以使用此代码来删除将创建的每个 CKEDITOR 上的标题。

```
CKEDITOR.on('instanceReady',function(event){$(event.editor.element.$).attr('title','');}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-22T11:46:02.583

我在我的 codeigniter 视图页面中尝试了这个，它对我有用。我也为我的用户使用了我自己的自定义工具提示。

```
CKEDITOR.inline( 'ckeditor' );
CKEDITOR.config.title = false; // or you can use own custom tooltip message. 
```

感谢
Braham Dev Yadav

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-02T05:40:19.703

我试过使用

```
CKEDITOR.config.title = false; 
```

但它仍然坚持显示标题。

经过一番研究，我所做的是：

1.转到 ~/ckeditor/lang/en-gb.js 删除 'editorHelp' 值

2.指定语言和标题，下同：

```
CKEDITOR.editorConfig = function( config ) {
config.language="en-gb";
config.title="Put your title here"; //cannot put blank, it will display "null" 
```

# xml - DTD 元素和重复元素

> ID：14730927
> 
> 赞同：0
> 
> 时间：2013-02-06T14:01:20.507
> 
> 标签：xml, dtd

```
 <?xml version="1.0" encoding="UTF-8"?> 
   <sensor-system>
     <velocity>120.00</velocity>    <!-- km/h --> 

     <temperature location="inside">24.6</temperature> 
     <temperature location="outside">-12.5</temperature> 

     <seats>

       <seat location="front">
               <id>1</id> 
                <temperature>32.5</temperature>
               <heating-is-on/>

       </seat>

       <seat location="back">
               <id>2</id>
                <temperature>23.5</temperature> 
        </seat>

     </seats>
   </sensor-system>

   <!-- degree celsius --> 
```

传感器系统元素内部正好有一个速度元素，后面正好有两个具有强制性位置属性的温度元素。强制席位元素包含一个或多个席位元素。座椅元件内部只有一个 id 和一个温度元件，然后是可选的加热开启元件。加热开启元素具有空的内部内容。所有属性都是必需的。速度元素之后的温度元素唯一允许的位置值是“内部”和“外部”。座椅元件内的温度元件唯一允许的位置值是“前”和“后”。id 元素包含整数。

## DTD 是否正确：

```
 <!ELEMENT sensor-system (velocity,temperature+,seats)>
 <!ELEMENT velocity (#PCDATA)>
 <!ELEMENT temperature (#PCDATA)>
 <!ATTLIST temperature location (inside|outside) #REQUIRED>

 <!ELEMENT seats (seat+)>
 <!ELEMENT seat (id, temperature , heat-is-on?)>

 <!ELEMENT id (#PCDATA)>
 <!ELEMENT heat-is-on EMPTY>
 <!ATTLIST seat location (back|front) #REQUIRED> 
```

我的主要 2 个问题：

* * *

1-他说温度恰好出现两次，但我不能写（

```
 <!ELEMENT sensor-system (velocity,temperature,temperature,seats)> 
```

....所以它必须是温度+ ??

2-温度在座位上再次声明......但没有必要写（

```
<!ELEMENT temperature (#PCDATA)> 
```

再次对吗？因为我们已经在上面写过了

感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:18:51.170

*座位上再次声明温度...但无需写*

正确的。

*[...] 温度恰好出现两次，但我写不出来*

是的你可以 ：-）

```
<!ELEMENT sensor-system (velocity,temperature,temperature,seats)> 
```

完全没问题。但很可能还有其他问题。

您可能需要一种内部温度和一种外部温度。您将无法使用当前结构（即通过属性）强制执行此操作。

此外，将 location 属性设为强制意味着它还必须在 的`<temperature>`子元素中指定`<seat>`，其中`inside`或的值`outside`没有意义。（DTD 形式主义不允许属性声明或内容模型根据上下文而变化：所有声明在范围内都是“全局的”。）

元素上的位置属性`<temperature>`似乎是一个糟糕的设计选择。您可以删除该属性并尝试这样的事情：

```
<!ELEMENT sensor-system (velocity,inside,outside,seats)>
<!ELEMENT inside (temperature)>
<!ELEMENT outside (temperature)> 
```

这似乎更好地反映了您的要求。

*那个DTD正确吗*

DTD 结构一致且语法正确。但它与规范声明不符。首先，有一个拼写的小问题：`heating-is-on`与`heat-is-on`. 其次，更重要的是，具有`location`属性的业务。把它放在`<seat>`元素上是一件明智的事情，但规范声明有：

```
The only allowed location values for the temperature element after the velocity element are ”inside” and ”outside”. The only allowed location values for the temperature element inside the seat element are ”front” and ”back”. 
```

这在 DTD 形式中是不可指定的。所有结构约束（例如，在这种情况下，属性的允许值）在范围内都是“全局的”。

# php - 闪现 php mysql

> ID：14730929
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:01:25.373
> 
> 标签：php, mysql, flash

我正在构建一个表单是我练习的一部分。我正在尝试通过 PHP 将 Flash 连接到 mysql 数据库以创建 Flash 登录系统。我已经设置了所有的 UI 组件，并且我已经完成了我的 php 文件的编写。

我有一些 URLVariables 问题。我从教程中复制了这段代码的一部分，它看起来工作得很好。但是当我尝试编译它时，我得到了 5 个错误。

```
Line 33 1120: Access of undefined property status_Txt.
Line 22 1120: Access of undefined property email.
Line 23 1120: Access of undefined property password.
Line 24 1120: Access of undefined property age.
Line 25 1120: Access of undefined property country. 
```

代码如下：有人可以帮我吗？

```
import flash.net.URLLoaderDataFormat;
import fl.data.DataProvider; 
import fl.events.ComponentEvent;
import fl.controls.TextInput;

//Requesting the php
var phpFileRequest: URLRequest = new URLRequest
phpFileRequest.method = URLRequestMethod.POST;
//Assing the variable names
//Build the variable
var phpVars:URLVariables = new URLVariables();

//Building the loader
var phpLoader:URLLoader = new URLLoader();
phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES;

//Variables ready for sending
ERRORS phpVars.email = email.text;
phpVars.password = password.text;
phpVars.age = age.text;
phpVars.country = country.text;

phpLoader.load(phpFileRequest);

phpLoader.addEventListener(Event.COMPLETE, showResult);

function showResult (event:Event):void {
ERROR status_Txt.text = "" + event.target.data.systemResult;
trace(event.target.data.systemResult);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:37:01.977

看起来您还没有命名您的 UI 组件。想必你`TextInput`在舞台上有 5 个 s 用于用户的详细信息。它们需要具有您的代码所引用的*实例名称* `status_Txt`、`email`、`password`和。`age``country`

# c# - 为什么 C# 编译器会为内部类生成 CS0436 警告？

> ID：14730934
> 
> 赞同：3
> 
> 时间：2013-02-06T14:01:48.593
> 
> 标签：c#, warnings, compiler-warnings

我在 C# 解决方案中使用 JetBrains 注释。我已将注释类作为链接文件引入到解决方案的每个项目中。我不希望 JetBrains 注释成为我的公共接口的一部分，所以我将它们修改为内部而不是公共的。

但是，当我编译时，我会收到很多警告 CS0436，例如：

> C:\src\foo\bar.cs(12,29): 警告 CS0436: 'C:\src\Common\JetBrains\JetBrains.cs' 中的类型 'JetBrains.Annotations.NotNullAttribute' 与导入的类型 'JetBrains' 冲突'c:\src\blah\bin\Debug\blah.dll' 中的 .Annotations.NotNullAttribute'。使用“C:\src\Common\JetBrains\JetBrains.cs”中定义的类型。

但在 JetBrains.cs 中，NotNullAttribute 是内部的：

```
internal sealed class NotNullAttribute : Attribute { } 
```

我不明白为什么编译器会警告导入另一个程序集内部的类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-21T18:20:10.283

我遇到了同样的问题，因为在 References 文件夹中有对同一个项目的引用。即：我的项目名称是 Store 并且引用具有相同的名称。我删除了它并解决了问题！祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T19:08:30.900

发现了问题。我提到的“blah.dll”程序集在它的 AssemblyInfo.cs 中有这个：

```
[assembly: InternalsVisibleTo("my.other.assembly")] 
```

感谢大家的意见和建议。

# function - Turning an SQL query into a function taking identifiers

> ID：14730935
> 
> 赞同：2
> 
> 时间：2013-02-06T14:01:49.670
> 
> 标签：function, postgresql, postgresql-9.1, dynamic-sql

I have an SQL Query in PostgreSQL to extract `doy` (day of year) from dates. My query is:

```
select extract(doy from date_col) as n
from mytable
order by n 
```

I want to turn it into a function like `extract_doy(tablename, date_column_name)`.
How would I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T04:21:42.500

假设您想返回一组双打，这样的事情应该可以工作：

```
CREATE OR REPLACE FUNCTION tmp_extract_doy(table_name text, column_name text) 
RETURNS SETOF DOUBLE PRECISION
AS
$BODY$
DECLARE
BEGIN
    RETURN QUERY EXECUTE format('SELECT EXTRACT(doy from %I) AS n FROM %I ORDER BY n', column_name, table_name);
END
$BODY$
  LANGUAGE plpgsql
  COST 100; 
```

# objective-c - 是否可以让上层识别一种手势，同时将其他种类传递给下层？

> ID：14730938
> 
> 赞同：3
> 
> 时间：2013-02-06T14:02:07.117
> 
> 标签：objective-c, xcode, uigesturerecognizer, layer, touches

我正在开发一个 iPad 应用程序，用户可以在其中在画布上放置几个可编辑的文本框。每个文本框都应该可以通过用一根手指拖动来移动。用户可以使用两根手指旋转选定的文本框。

我想有两层。上层将接收两根手指的旋转手势。但是，如果用户只用一根手指触摸屏幕，它应该将触摸事件传递给下层的文本框（自定义 UIView）。是否有可能做到这一点？

我的第一次尝试是计算来自`-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`和`-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`使用的触摸次数`[touches count]`。如果触摸次数为两次，则执行旋转。如果是单次触摸，它将“循环”遍历所有文本框并检查触摸是否在哪个文本框内，然后对该框执行移动。

有一个更好的方法吗？当有很多文本框时，循环是否会成为问题？

顺便说一句，我是堆栈溢出的新手。请告诉我我的问题是否过于模糊或任何问题，我会尝试更清楚地解释它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:22:27.050

您可以使用 a`UIRotationGestureRecognizer`进行旋转和 a`UIPanGestureRecognizer with maxNumberOfTouches = 1`进行拖动。

UIGesturesRecognizers 比简单的触摸 API 更容易处理：手势识别主要是一个状态机问题（触摸在哪里，之前在哪里，它仍然有效，到目前为止我有什么样的手势特征）。通过方法等处理几个手势`-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`，可能很快就会变成地狱！

# php - PHP CI 看不到发布变量

> ID：14730947
> 
> 赞同：0
> 
> 时间：2013-02-06T14:02:25.543
> 
> 标签：php, codeigniter, fiddler

这是非常令人沮丧的！我试图向我的本地 Web 应用程序发送一个简单的 ajax 帖子，但参数为空。为了调试它，我打开了提琴手，但同样的结果正在发生！

我有这个控制器

```
class Site extends CI_Controller {

public function __construct() {
    parent::__construct();

} //etc 
```

有了这个功能

```
 public function hello() {
    var_dump($_SERVER['REQUEST_METHOD']);
    var_dump($_SERVER['REQUEST_URI']);
    $hello = $this->input->post("hello");
    echo "hello is $hello";
} 
```

现在我尝试在 Fiddler 中测试这个，我去 Composer，选择一个新的 Post 请求并放入 body hello=wtsgppp。

这是 fiddler 中 hello 函数的结果：

```
string(4) "POST"
string(25) "/cmd/index.php/site/hello"
hello is 
```

如您所见， hello 是空的。非常感谢任何帮助！

让事情变得更烦人 - 一旦我将 fiddler 中的 http 请求更改为 GET 并在 url 字符串中添加 hello（并将控制器更改为 echo get 而不是 post），它就可以工作了！那么为什么能得到工作而post却没有呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:12:42.483

PHP 不会填充`$_POST`数组，除非它在标头中看到已知的内容类型。

在您的 Fiddle 请求中，尝试添加以下 HTTP 标头：

`Content-Type: application/x-www-form-urlencoded`

这是因为 PHP 解码原始 POST 正文并将其注入`$_POST`变量（这是 CI 查看的内容）的方式取决于将请求发送到服务器的方式。

**编辑**：如果您也没有在 XHR/AJAX 帖子中看到它，请确保您也设置了`Content-Type`标题。jQuery（和大多数 JS 库）会自动为您执行此操作，但如果您不使用库，则必须自己执行此操作：

`request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:14:24.510

你的`input`标签有名称属性吗？

我应该`<input type="text" name='hello'></input>`

# sql-server - 用于索引的 SQLServer object_id？

> ID：14730952
> 
> 赞同：3
> 
> 时间：2013-02-06T14:02:48.663
> 
> 标签：sql-server, internals

数据库中的每个对象都有自己的 object_id。

我们可以在 sys.objects 中或在特定类型（sys.tables、sys.key_contraints、...）的视图中找到对象及其 object_id 的列表。

现在我的问题是索引有自己的 object_ids 吗？从我的发现看来不是。如果不是，那为什么不呢？对我来说，它看起来像任何其他对象（PK、FK、...）。即使是默认约束也有自己的 object_id。

感谢您的澄清。这是“内部”问题，我并不是特别想实现任何目标，我只是想了解为什么事情会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:39:40.317

索引在 (object_id, index_id) 上是唯一的。也就是说，给定表的所有索引都将在 sys.indexes 中具有相同的 object_id，但具有不同的 index_id。

# c++ - 参考变量等于另一个参考变量？

> ID：14730957
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:03:03.223
> 
> 标签：c++

考虑以下：

```
int someA = 1;
int someB = 2;

int &a = someA;
int &b = someB;

a = b;   // what happens here? 
```

引用这里发生了什么？只是好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:06:46.860

拥有两个彼此相等的参考变量本身并不是错误。这可能会令人困惑。但是，您的代码所做的不是设置对另一个引用的引用，而是更改`_A`from`1`到的值`2`，这就是`_B`.

您只能设置一次引用 [在哪里初始化]。一旦它被初始化，它将成为原始变量的别名。

你可以这样做：

```
int &a = _A;
int &b = _A; 
```

和

```
a = b; 
```

会将值存储`1`到`_A`已经具有值的`1`中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T14:07:43.550

你不能在函数之外有语句。

```
a = b;   //compile error? 
```

这是一个语句，所以必须在一个函数中：

```
int _A = 1;
int _B = 2;

int &a = _A;
int &b = _B;

int main()
{
   a = b;   //compile error? No. Now it compiles.

   // As 'a' and 'b' are references.
   // This means they are just another name for an already existing variable
   // ie they are alias
   //
   // It means that it is equivalent to using the original values.
   //
   // Thus it is equivalent too:
   _A = _B;
} 
```

现在它编译了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T14:06:54.060

这里没有错误，但我想我可能知道你对什么感到困惑。不会重新分配引用，但是会重新分配它所引用的值。

因此，当您这样做时，`a = b;`您实际上是在说：`_A = _B`，因为引用是别名。

永远不能像指针一样重新分配引用。

引用也永远不能为空。

# android - 正确的更新逻辑

> ID：14730960
> 
> 赞同：0
> 
> 时间：2013-02-06T14:03:07.323
> 
> 标签：android, mysql

我有一个具有数据库的应用程序。DB是从服务器xml下载更新的。我想了解更新的逻辑。我的方式不正确。这是我的方式：

1.  您使用指向 Xml 的单个链接。XML 将被更新。它只会存储一条新记录。结果：用户错过了什么更新没有得到它。

2.  每个 xml 都将包含对以下 xml 的引用。结果：用户错过了很多xml，会有下载过程，不知道什么时候更新。

3.  xml 会一直存储所有的记录，但是过一段时间就会变得非常大。交通繁忙的结果

请告诉我正确的更新逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:24:18.950

最好的方法是在您的服务器上放置一些逻辑：

*   应用程序向服务器请求更新，将当前数据库版本作为参数发送
*   服务器根据最新版本检查应用程序数据库版本，并计算发生的更改列表
*   服务器通过发送所有这些更改来回复应用程序，因此应用程序可以更新其数据库内容（连同其数据库版本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:58:28.597

我会走这条路。

1.  我会跟踪更新过程。就像保存上次更新日期或更新版本一样。
2.  当我将请求发送到服务器时，我会将此日期或版本号与请求一起发送（POST 或 GET 方法）。
3.  现在根据日期或版本，我将从服务器获取 XML 文件。然后我会更新内容。
4.  如果用户是新用户，则不会有日期或版本参数发送到服务器。然后就会出现完整的 XML。如果他们愿意从一开始更新，那么如果您担心流量，您可以按照自己的方式（例如定期的时间间隔）逐步更新，直到达到当前版本的更新。然后您可以从那里继续。同样，您可以跟踪日期或版本号并照常开始更新过程。

# cassandra - 了解 Cassandra 中列族扫描的性能

> ID：14730971
> 
> 赞同：2
> 
> 时间：2013-02-06T14:03:35.000
> 
> 标签：cassandra

我对 Cassandra 中的全表扫描感兴趣。它们不是我的数据库设计的关键部分，但我确实偶尔需要它们，并希望确保我了解性能影响。

假设我已经订购了键并且正在使用合理的有序分区器。我也在使用不可变数据，如果这会有所不同（数据库实际上是仅附加的）。

现在，据我了解，插入会进入 memtable，然后每隔一段时间就会刷新到磁盘上的 SSTable 文件中，该文件将按排序顺序包含 memtable 的所有行。磁盘会累积一堆这些 SSTable 文件，然后这些文件会定期合并/压缩（保持排序）到一个文件中。

我假设在相当多的写入环境中，在任何给定时间，磁盘上都会有几个未合并的 SSTable 文件。

[现在，当我使用Cassandra 中似乎被接受的方式](https://github.com/zznate/hector-examples/blob/master/src/main/java/com/riptano/cassandra/hector/example/PaginateGetRangeSlices.java)执行分页“表扫描”时，我实际上是在按顺序要求键。这意味着，Cassandra 不能只从 SSTables 中批量输出内容，而是需要在每个表中维护指向我当前位置的指针，通过我的键顺序查看哪个是最低的，然后将其返回给我。据我了解，这将导致非常“跳跃”的磁盘访问模式，通常不会在任何具有昂贵寻道的介质上表现良好。当集群中有多个节点时，这个问题可能会加剧。

对于我的用例来说，理想的情况是能够说我不关心我取回行的顺序，只要我得到它们。然后 Cassandra 可以使用磁盘的批量读取向我发送大块行，而不必担心按顺序提供它们。

我想这个“问题”真的可以归结为：我对上面说明的事情如何运作的理解正确吗？如果是这样，我能做些什么来使这种扫描更愉快吗？我对这个问题的综合只是 Cassandra 可以通过另一个 API 调用以任何顺序请求 N 行，并带有某种指示我在哪里，以便我未来的请求可以从那里恢复。在许多方面，它与现有范围调用中使用的模式相同，但关键（对于性能）是我不关心顺序。

# c# - 通过 RS232 原子发送和接收消息

> ID：14730972
> 
> 赞同：5
> 
> 时间：2013-02-06T14:03:36.877
> 
> 标签：c#, multithreading, serial-port

我有一个特殊的问题。

我需要用来与串行设备通信的自定义协议的工作方式如下，我使用的是标准 ASCII 缩写。

1.  -> 我的程序发送 SOH 开始传输
2.  -> 我的程序发送了一个 STX+data+ETX 的数据包（我实际上一次发送了 SOH 和这个数据包）
3.  <- 设备发回一个 ACK​​ 以确认他已收到数据包
4.  -> 现在我的程序发送一个 EOT 来表示传输结束

如果消息是一个期望得到答复的请求，则设备会发回数据。因为这种方式`SerialPort.DataReceived`有效，所以我必须手动将收到的消息拼凑在一起。它有点像这样：

1.  <- 设备发送 SOH+STX+数据
2.  <- 设备发送额外的字节，以 ETX 结尾
3.  -> 一旦收到完整的包，我的程序就会发送 ACK
4.  <- 设备发送 EOT

这基本上是这两个通信的方式，除了丢失的数据包和 NAK 和那些东西，但我不想让它太复杂。

我的问题是：如何将发送完整消息或接收完整消息包装成原子操作？我不想要的是我的程序在将收到的消息粘合在一起时发送新消息。

我试过使用`Monitor.Enter()`，`Monitor.Exit()`但收到的事件是在不同的线程上调用的，所以没有骰子。

我还尝试使用`Semaphore`仅具有 1 个资源的资源，`semaphore.WaitOne()`在发送或接收开始时调用，并`semaphore.Release()`在发送 EOT 和从设备收到 EOT 后调用。这也不是很好。

有没有办法更好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:21:24.940

我将定义一个“SerialTxn”类，其中包含请求数据、回复数据、对协议进行编码/解码的状态机、超时、异常/错误消息、OnCompletion(SerialTxn thisTxn) 事件/委托以及其他任何所需的成员一个完整的交易归为一类。然后我会得到一个，用请求数据等加载它并将它（BlockingCollection）排队到一个处理串行端口的线程。线程获取实例，调用其方法来发送和接收数据，并在完成后调用 OnCompletion 事件/委托。这允许同步和异步事务 - OnCompletion 事件可以发出一个事件（可能是 AutoResetEvet），表明发起线程正在等待，或者它可以将回复排队返回到发起线程可以在需要时处理的某个队列。

由于只有一个线程处理端口，因此任何重叠 tx/rx 操作的可能性为零。txn 要么完全成功，要么将适当的异常或错误消息加载到 SerialTxn 中。如果发生错误，或者需要将数据发送到记录器、GUI 或其他任何东西，所有相关数据都在一个对象中的一个位置，准备好排队、BeginInvoked 或其他任何东西。

我不喜欢锁定冗长的操作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:03:47.623

当我编写代码通过串行端口与 GSM 调制解调器通信时遇到了类似的问题。

[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)通过使用命名空间中的类，我能够开发出相当好的解决方案`System.Threading`。基本上，我让我的 Send 方法等待 ACK 信号。

这是一个骨架代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.IO.Ports;

namespace Sample
{
    public class SocketWrapper
    {
        #region Static Variables

        private static AutoResetEvent _SendWaitHandle = new AutoResetEvent(false);

        #endregion

        #region Member Variables

        private object _SendLockToken = new object();

        #endregion

        #region Public Methods

        public void Write(byte[] data)
        {
            Monitor.Enter(_SendLockToken);
            try
            {
                // Reset Handle
                _SendWaitHandle.Reset();

                // Send Data
                // Your Logic

                // Wait for ACK
                if (_SendWaitHandle.WaitOne(1000)) // Will wait for 1000 miliseconds
                {
                    // ACK Received
                    // Send EOT
                }
                else
                {
                    // Timeout Occurred
                    // Your Logic To Handle Timeout
                }
            }
            catch (Exception)
            {

                throw;
            }
            finally
            {
                Monitor.Exit(_SendLockToken);
            }
        }
        #endregion

        #region Private Methods

        private void SerialPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            // When ACK is received call SET
            _SendWaitHandle.Set();

        }
        #endregion
    }
} 
```

注意：在 DataReceived 方法中，请确保不要直接/间接调用 Write 方法，因为这可能会导致死锁。`BackgroundWorker`始终使用或通过使用 TPL在不同的线程上开始处理接收到的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T14:12:47.580

我会使用锁：

[http://msdn.microsoft.com/en-gb/library/c5kehkcz(v=vs.71).aspx](http://msdn.microsoft.com/en-gb/library/c5kehkcz(v=vs.71).aspx)

您可以设置一个全局对象，例如 serialLock 并使用它来确保当您将片段粘合在一起时，任何发送线程都必须等待：

在收到的

```
lock(serialLock)
{
//Glue data
} 
```

在所有发送：

```
lock(serialLock)
{
// send data
} 
```

这将对不同线程等的任何问题进行排序。

我还会确保您在释放锁定之前已在胶水数据部分收到完整的消息。也许要清除此问题，您将需要在 DataReceived 事件中更新线程安全数据结构，并且在粘合数据部分中，您需要在此部分中检查数据结构以获取完整消息，然后再释放锁定。

# sencha-touch - Sencha touch 2 List inside Panel 看不到

> ID：14730973
> 
> 赞同：3
> 
> 时间：2013-02-06T14:03:41.787
> 
> 标签：sencha-touch, sencha-touch-2

我有一个`list`，`fieldset`但它不会显示。我怎样才能让它显示。我可以设置一个高度，但这使它成为一个不太好的可滚动框。

```
Ext.define('MyApp.view.MyPanel', {
extend: 'Ext.Panel',

config: {
    layout: {
        type: 'fit'
    },
    items: [
        {
            xtype: 'formpanel',
            items: [
                {
                    xtype: 'fieldset',
                    title: 'Date',
                    items: [

                        {
                            xtype: 'datepickerfield',
                            label: 'Date',
                            placeHolder: 'dd/mm/yyyy',
                            dateFormat: 'd/n/Y',
                            picker: {
                                yearFrom: 2013
                            }
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    layout: {
                        type: 'fit'
                    },
                    title: 'Available times:',
                    items: [
                        {
                            xtype: 'list',
                            store: {
                            fields: ['name','id'],
                            data: [
                                {name: '10:15',id:1},
                                {name: '13:15',id:2},
                                {name: '17:35',id:3},
                            ]
                        },
                        itemTpl: [
                            '<div>{name}</div>'
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:47:44.500

尝试将`height: 'auto'`和添加`scrollable: false`到您的列表中

**演示：** [http ://www.senchafiddle.com/#yyCVE#GNEuj#1aEQr#9eCak#oi6dM](http://www.senchafiddle.com/#yyCVE#GNEuj#1aEQr#9eCak#oi6dM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T17:18:44.420

我认为我的要求是相似的：显示两个列表的完整内容，每个列表都在一个字段集中，该字段集中在另一个顶级容器（添加到视口）中。我想要的是让顶级容器处理滚动并且列表*根本不滚动*。

在接受列表高度不是自动计算的事实之前，我为此挣扎了很长一段时间（ST 2.4.1），因此必须手动设置它才能使这种方法起作用。`refresh`从 store 中触发一个事件和一个`refresh`监听器到手动设置列表高度的列表是一个优雅的解决方案。

这是一个 Sencha Fiddle 演示：[https ://fiddle.sencha.com/#fiddle/g1n](https://fiddle.sencha.com/#fiddle/g1n)

以及演示代码本身：

```
 Ext.Viewport.add({
        xtype: 'container',
        // Using 'vbox' here will break the lists since that
        // is a proportional layout...
        layout: 'default',
        scrollable: true,
        fullscreen: true,
        items: [{
            xtype: 'titlebar',
            docked: 'top',
            title: 'Titlebar'
        }, {
            xtype: 'fieldset',
            title: 'List A',
            layout: 'fit',
            items: [{
                xtype: 'list',
                itemId: 'lista',
                // This is the default row height - don't use
                // magic numbers in shipping code...
                height: 42,
                scrollable: false,
                itemTpl: '{message}',
                store: {
                    fields: ['message'],
                    listeners: {
                        addrecords: function(store) {
                            store.fireEvent('refresh', store);
                        }
                    }
                },
                // Reset the list height when the underlying data
                // store triggers a 'refresh' event...
                listeners: {
                    refresh: function(list) {
                        list.setHeight(list.getItemHeight() * 
                            list.container.getInnerItems().length);
                    }
                }
            }]
        }, {
            xtype: 'fieldset',
            title: 'List B',
            layout: 'fit',
            items: [{
                xtype: 'list',
                itemId: 'listb',
                // This is the default row height - don't use
                // magic numbers in shipping code...
                height: 42,
                scrollable: false,
                itemTpl: '{message}',
                store: {
                    fields: ['message'],
                    listeners: {
                        addrecords: function(store) {
                            store.fireEvent('refresh', store);
                        }
                    }
                },
                // Reset the list height when the underlying data
                // store triggers a 'refresh' event...
                listeners: {
                    refresh: function(list) {
                        list.setHeight(list.getItemHeight() * 
                            list.container.getInnerItems().length);
                    }
                }
            }]
        }]
    });

    // Add a bunch of items to the lists...
    Ext.ComponentQuery.query('list').forEach(function(list) {
        for(var i = 2; i < 20; i++) {
            list.getStore().add({message: 'line ' + i});
        }
    }); 
```

# sencha-touch-2 - Sencha CMD 构建失败

> ID：14730977
> 
> 赞同：5
> 
> 时间：2013-02-06T14:03:47.637
> 
> 标签：sencha-touch-2

我今天下载并安装了 Sencha Touch 2.0，我观看了教程视频，一切都很顺利，直到我尝试构建应用程序。

起初我遇到了 Compass 的问题，教程没有提到必须安装 Compass，因此必须让 Ruby 在您的系统上运行，然后安装 compass GEM，但我没有问题地解决了这部分问题。

下次我运行它时，构建进展更进一步，但仍然给我一个错误，这一次我看不到任何关于缺少什么的指标。也许我需要安装额外的 SDK？

我正在运行带有 Ruby 1.8.7 和 Windows 7 操作系统的 Sencha Touch 2.1.0、Sencha Command 3.0.2.28，cmd 输出如下，如果有人有任何指示，将不胜感激。

```
[INF]           init-sencha-command:
[INF]
[INF]           init:
[INF]
[INF]           -before-app-build:
[INF]
[INF]           app-build-impl:
[INF]
[INF]           production:
[INF]
[INF]           -before-init-local:
[INF]
[INF]           -init-local:
[INF]
[INF]           -after-init-local:
[INF]
[INF]           init-local:
[INF]
[INF]           find-cmd:
[INF]
[INF]           -before-init:
[INF]
[INF]           -init:
[INF]
[INF]           -after-init:
[INF]
[INF]           init:
[INF]
[INF]           -before-build:
[INF]
[INF]           sass:
[INF]
[INF]           -before-sass:
[INF]
[INF]           -sass:
[INF]           [shellscript]
[INF]           [shellscript] C:\xampp\htdocs\MyApp\resources\sass>compass compi
le --boring --force
[INF]           [shellscript] C:/Ruby187/lib/ruby/1.8/optparse.rb:1450:in `compl
ete''': invalid option: --boring (OptionParser::InvalidOption)
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1448:in
 `catch'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1448:in
 `complete'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1261:in
 `parse_in_order'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1254:in
 `catch'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1254:in
 `parse_in_order'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1248:in
 `order!'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1339:in
 `permute!'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/1.8/optparse.rb:1360:in
 `parse!'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/gems/1.8/gems/chrisepps
tein-compass-0.8.17/lib/compass/exec.rb:65:in `parse!'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/gems/1.8/gems/chrisepps
tein-compass-0.8.17/lib/compass/exec.rb:35:in `initialize'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/gems/1.8/gems/chrisepps
tein-compass-0.8.17/bin/compass:7:in `new'''
[INF]           [shellscript]   from C:/Ruby187/lib/ruby/gems/1.8/gems/chrisepps
tein-compass-0.8.17/bin/compass:7
[INF]           [shellscript]   from C:/Ruby187/bin/compass:23:in `load'''
[INF]           [shellscript]   from C:/Ruby187/bin/compass:23
[ERR]
[ERR]           BUILD FAILED
[ERR]           com.sencha.exceptions.BasicException: The following error occurr
ed while executing this line:
[ERR]           C:\xampp\htdocs\MyApp\.sencha\app\build-impl.xml:109: The follow
ing error occurred while executing this line:
[ERR]           jar:file:/C:/xampp/htdocs/sencha/Sencha/Cmd/3.0.2.288/sencha.jar
!/com/sencha/ant/antlib.xml:364: shellscript returned: 1
[ERR]                   at com.sencha.exceptions.BasicException.wrap(BasicExcept
ion.java:43)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:104)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.AbstractCommand.dispatch(AbstractComma
nd.java:182)
[ERR]                   at com.sencha.ant.SenchaCommandTask.doExecute(SenchaComm
andTask.java:69)
[ERR]                   at com.sencha.ant.BaseAntTask.execute(BaseAntTask.java:2
2)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.ja
va:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTa
rgets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:72)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginComma
nd.run(BasePluginCommands.java:94)
[ERR]                   at com.sencha.command.BasePluginCommands$BasePluginComma
nd.run(BasePluginCommands.java:98)
[ERR]                   at com.sencha.command.BasePluginCommands$BaseNamePathCom
mand.run(BasePluginCommands.java:142)
[ERR]                   at com.sencha.command.app.AppCommands$BuildCommand.execu
te(AppCommands.java:116)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.cli.Commands.dispatch(Commands.java:49)
[ERR]                   at com.sencha.command.Sencha.main(Sencha.java:71)
[ERR]           Caused by: C:\xampp\htdocs\MyApp\.sencha\app\build-impl.xml:117:
 The following error occurred while executing this line:
[ERR]           C:\xampp\htdocs\MyApp\.sencha\app\build-impl.xml:109: The follow
ing error occurred while executing this line:
[ERR]           jar:file:/C:/xampp/htdocs/sencha/Sencha/Cmd/3.0.2.288/sencha.jar
!/com/sencha/ant/antlib.xml:364: shellscript returned: 1
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuild
Exception(ProjectHelper.java:551)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:44
4)
[ERR]                   at org.apache.tools.ant.taskdefs.CallTarget.execute(Call
Target.java:105)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.Project.executeTarget(Project.ja
va:1368)
[ERR]                   at org.apache.tools.ant.helper.DefaultExecutor.executeTa
rgets(DefaultExecutor.java:41)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:156)
[ERR]                   at com.sencha.ant.AntRunner.run(AntRunner.java:80)
[ERR]                   at com.sencha.command.ant.AntCommand.execute(AntCommand.
java:75)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at com.sencha.cli.Command.dispatch(Command.java:78)
[ERR]                   ... 31 more
[ERR]           Caused by: C:\xampp\htdocs\MyApp\.sencha\app\build-impl.xml:109:
 The following error occurred while executing this line:
[ERR]           jar:file:/C:/xampp/htdocs/sencha/Sencha/Cmd/3.0.2.288/sencha.jar
!/com/sencha/ant/antlib.xml:364: shellscript returned: 1
[ERR]                   at org.apache.tools.ant.ProjectHelper.addLocationToBuild
Exception(ProjectHelper.java:551)
[ERR]                   at org.apache.tools.ant.taskdefs.MacroInstance.execute(M
acroInstance.java:401)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.Target.execute(Target.java:392)
[ERR]                   at org.apache.tools.ant.Target.performTasks(Target.java:
413)
[ERR]                   at org.apache.tools.ant.Project.executeSortedTargets(Pro
ject.java:1399)
[ERR]                   at org.apache.tools.ant.helper.SingleCheckExecutor.execu
teTargets(SingleCheckExecutor.java:38)
[ERR]                   at org.apache.tools.ant.Project.executeTargets(Project.j
ava:1251)
[ERR]                   at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:44
2)
[ERR]                   ... 52 more
[ERR]           Caused by: jar:file:/C:/xampp/htdocs/sencha/Sencha/Cmd/3.0.2.288
/sencha.jar!/com/sencha/ant/antlib.xml:364: shellscript returned: 1
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.runExecute(Exe
cTask.java:646)
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTa
sk.java:672)
[ERR]                   at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTa
sk.java:498)
[ERR]                   at net.sf.antcontrib.platform.ShellScriptTask.execute(Sh
ellScriptTask.java:132)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequ
ential.java:68)
[ERR]                   at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:19
7)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.
java:154)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequ
ential.java:68)
[ERR]                   at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:19
7)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native M
ethod)
[ERR]                   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown S
ource)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.
java:154)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
w
[ERR]           n Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.Sequential.execute(Sequ
ential.java:68)
[ERR]                   at org.apache.tools.ant.UnknownElement.execute(UnknownEl
ement.java:291)
[ERR]                   at sun.reflect.GeneratedMethodAccessor19.invoke(Unknown
Source)
[ERR]                   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unkno
wn Source)
[ERR]                   at java.lang.reflect.Method.invoke(Unknown Source)
[ERR]                   at org.apache.tools.ant.dispatch.DispatchUtils.execute(D
ispatchUtils.java:106)
[ERR]                   at org.apache.tools.ant.Task.perform(Task.java:348)
[ERR]                   at org.apache.tools.ant.taskdefs.MacroInstance.execute(M
acroInstance.java:398)
[ERR]                   ... 64 more
[ERR]
[ERR]           Total time: 12 seconds
[ERR]           com.sencha.exceptions.BasicException: The following error occurr
ed while executing this line:
C:\xampp\htdocs\MyApp\.sencha\app\build-impl.xml:109: The following error occurr
ed while executing this line:
jar:file:/C:/xampp/htdocs/sencha/Sencha/Cmd/3.0.2.288/sencha.jar!/com/sencha/ant
/antlib.xml:364: shellscript returned: 1

C:\xampp\htdocs\MyApp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:00:29.717

指南针安装了吗？你可以在这里做到这一点：http: [//compass-style.org/install/](http://compass-style.org/install/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T02:33:49.507

您的指南针版本似乎很旧。尝试[更新它](http://compass-style.org/install/)，如[user799301 所述](https://stackoverflow.com/users/799301/user799301)。它可能还会要求您升级到 Ruby 1.9。

Sencha Cmd 正在为我使用 Compass 0.12.2 和 Ruby 1.9.3_p286，但任何足够新的版本都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:16:27.470

我觉得你的 ruby​​、指南针和/或 sass 版本太旧了。此行表示指南针存在问题：

```
...
[INF] [shellscript] C:\xampp\htdocs\MyApp\resources\sass>compass compile --boring --force
[INF] [shellscript] C:/Ruby187/lib/ruby/1.8/optparse.rb:1450:in `complete''': invalid option: --boring (OptionParser::InvalidOption)
... 
```

昨天在 Windows 7 上运行“sass 构建步骤”时遇到了一些问题。

基本上我所做的是：

*   [从http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)安装 Sencha CMD 版本 3.0.2.288
*   [从http://rubyinstaller.org/](http://rubyinstaller.org/)安装 ruby​​ 1.9.3
*   通过输入以下命令升级 gem 系统：**gem update --system** (version 1.8.25)
*   安装指南针：gem install compass（版本为0.12.2）
*   安装 Sass 3.1.10，compass 的依赖项。检查**gem search sass**，因为如果您安装了多个或更旧版本的 sass，它可能的指南针可能无法构建。

如果你只是想跳过 sass 构建，你也可以尝试输入：

```
skip.sass=1 
```

在**sencha.cfg**

**注意：**我还有一个问题，即使在我安装了所有依赖项之后，新生成的 sencha touch 应用程序的构建也会失败，这是因为**{app.dir}/resources/css/app.css**中的 app.css 文件丢失了.

还有两个有趣的页面描述了我发现的构建过程：

*   [http://www.sencha.com/forum/showthread.php?192169-Important-SDK-Tools-Sencha-Command-Update](http://www.sencha.com/forum/showthread.php?192169-Important-SDK-Tools-Sencha-Command-Update)
*   [http://docs.sencha.com/touch/2-1/#!/guide/command_app-section-3](http://docs.sencha.com/touch/2-1/#!/guide/command_app-section-3)

# node.js - nodejs将64位无符号整数写入缓冲区

> ID：14730980
> 
> 赞同：12
> 
> 时间：2013-02-06T14:03:49.593
> 
> 标签：node.js, integer, buffer, byte

我想以大端格式将 64 位（8 字节）大整数存储到 nodejs 缓冲区对象。

关于这个任务的问题是 nodejs 缓冲区只支持写入 32 位整数作为最大值（使用 buf.write32UInt32BE(value, offset)）。所以我想，为什么我们不能只拆分 64 位整数呢？

```
var buf = new Buffer(8);

buf.fill(0) // clear all bytes of the buffer
console.log(buf); // outputs <Buffer 00 00 00 00 00 00 00 00>

var int = 0xffff; // as dezimal: 65535

buf.write32UInt32BE(0xff, 4); // right the first part of the int
console.log(buf); // outputs <Buffer 00 00 00 00 00 00 00 ff>

buf.write32UInt32BE(0xff, 0); // right the second part of the int
console.log(buf); // outputs <Buffer 00 00 00 ff 00 00 00 ff>

var bufInt = buf.read32UInt32BE(0) * buf.read32UInt32BE(4);
console.log(bufInt); // outputs 65025 
```

如您所见，这几乎可以正常工作。问题只是拆分 64 位整数并在读取它时找到丢失的 510。有人介意展示这两个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T14:12:35.073

我认为您正在寻找的是：

```
var bufInt = (buf.readUInt32BE(0) << 8) + buf.readUInt32BE(4); 
```

将第一个数字移动 8 位并添加（而不是相乘），然后返回`65535`

* * *

*编辑*

另一种写法是：

```
var buf = new Buffer(8);
buf.fill(0);

var i = 0xCDEF; // 52719 in decimal

buf.writeUInt32BE(i >> 8, 0); //write the high order bits (shifted over)
buf.writeUInt32BE(i & 0x00ff, 4); //write the low order bits

console.log(buf); //displays: <Buffer 00 00 00 cd 00 00 00 ef>

var bufInt = (buf.readUInt32BE(0) << 8) + buf.readUInt32BE(4);
console.log(bufInt); //displays: 52719 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T17:00:23.340

我很困惑，因为您的示例值`0xFFFF`只有 16 位，而不是 64 位。

请记住，JS`number`类型被指定为 IEEE754 浮点值，因此不能保证能够保存 64 位无符号值。如果你想要真正的 64 位整数支持，你需要使用一个模块来提供它，比如[bignum](https://github.com/justmoon/node-bignum)。该自述文件包含读取和写入缓冲区值的示例。

浮点值只能表示`2^53 - 1`不丢失精度的值。您可以在此示例中使用标准 JS 编号看到：

```
var b = new Buffer([0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF])
var firstHalf = b.readUInt32BE(0); // 4294967295
var secondHalf = b.readUInt32BE(4); // 4294967295

var val = firstHalf * 0x100000000 + secondHalf; // 18446744073709552000 
```

其结果是`18446744073709552000`正确的值为`18446744073709551615`。

```
var bignum = require('bignum');

var b = new Buffer([0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF])
var val = bignum.fromBuffer(b); 
```

这会产生一个`BigNum`值为 的对象`18446744073709551615`。

此外，为了详细说明您的示例代码，您使用的值只有 16 位，并且您正在尝试使用 32 位函数来处理它。你可以这样做：

```
var buf = new Buffer(2);

buf.fill(0) // clear all bytes of the buffer
console.log(buf); // outputs <Buffer 00 00>

var int = 0xffff; // as decimal: 65535

// Write it with a standard 16-bit function calls.
buf.writeUInt16BE(int);

// OR write it with 2 8-bit function calls.
buf.writeUInt8(int & 0xff, 0); // right the first part of the int
buf.writeUInt8((int >> 8) & 0xFF, 1); // right the second part of the int
console.log(buf); // outputs <Buffer ff ff>

// Read it as a 16-bit value.
var bufInt = buf.readUInt16BE(0);
console.log(bufInt);

// OR read it as two 8-bit values.
var bufInt = (buf.readUInt8(1) << 8) + buf.readUInt8(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-29T09:06:06.687

读取和写入 UINT 数，最高可达`Number.MAX_SAFE_INTEGER`.

> 这仅适用于 node.js，在浏览器端不可移植。

```
function uintToBase62(n) {
  if (n < 0) throw 'unsupported negative integer';

  let uintBuffer;
  if (n < 0x7FFFFFFF) {
    uintBuffer = new Buffer(4);
    uintBuffer.writeUInt32BE(n, 0);
  } else {
    // `~~` double bitwise operator
    // The most practical way of utilizing the power of this operator is to use it as a replacement
    // for Math.floor() function as double bitwise NOT performs the same operation a lot quicker.
    // You can use it, to convert any floating point number to a integer without performance overkill
    // that comes with Math.floor(). Additionally, when you care about minification of your code,
    // you end up using 2 characters (2 tildes) instead of 12.
    // http://rocha.la/JavaScript-bitwise-operators-in-practice
    const big = ~~(n / 0x0100000000);
    const low = (n % 0x0100000000);
    uintBuffer = new Buffer(8);
    uintBuffer.writeUInt32BE(big, 0);
    uintBuffer.writeUInt32BE(low, 4);
  }

  return uintBuffer.toString('hex');
} 
```

转换它

```
function uintFromBase62(uintBuffer) {
  const n = parseInt(uintBuffer.toString('hex'), 16);
  return n;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T06:21:07.130

```
// sending time
var sending_time = new Date().getTime();
buffer.writeInt32LE(parseInt(sending_time & 0xffffffff, 10), 16);
buffer.writeInt32LE(parseInt(sending_time / 0xffffffff, 10), 20); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T23:41:31.563

JavaScript/EcmaScript 中的按位运算将强制数字（或任何值）转换为 32 位整数。

如果您需要一定的精度，或者处理大于 32 位值的缓冲区，您*确实*需要使用[bignum来获取更大的值。](https://www.npmjs.com/package/bignum)

```
var bignum = require('bignum');

//max safe integer to big number
var num = bignum(Number.MAX_SAFE_INTEGER.toString());
var buf = num.toBuffer({endian:'big',size:8 /*8-byte / 64-bit*/});

console.log(buf); // 
```

上面的示例使用`Number.MAX_SAFE_INTEGER`which is `Math.pow(2,53)-1`。如果您需要使用更大的数字，则应将它们作为 bignum 字符串访问...如果您可以保持在 JS 中的 Integers 范围内，则可以保留它们并按上述方式进行转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-02T09:36:48.697

读取/写入 64 位值：

```
const int64 = Date.now()   // 1456909977176 (00 00 01 53 36 9a 06 58)
const b = new Buffer(8)
const MAX_UINT32 = 0xFFFFFFFF

// write
const big = ~~(int64 / MAX_UINT32)
const low = (int64 % MAX_UINT32) - big

b.writeUInt32BE(big, 0)  // 00 00 01 53 00 00 00 00
b.writeUInt32BE(low, 4)  // 00 00 01 53 36 9a 06 58

// read
var time = parseInt(b.toString('hex'), 16)
time == int64 // true 
```

我在没有任何特殊模块的情况下使用此代码。

**更新**

仅适用于数字`<= Number.MAX_SAFE_INTEGER`

# google-analytics - 如何在 Google Analytics 中合并各个域的结果

> ID：14730987
> 
> 赞同：4
> 
> 时间：2013-02-06T14:04:08.013
> 
> 标签：google-analytics

如何在 Google Analytics 中合并各个域的结果？

我目前正在为 .com .de 和 .cn 上的网站设置 Google Analytics。我为每个人设置了不同的谷歌分析配置文件，并希望能够将结果作为一个整体组合起来，以便从这个角度进行查看，而无需将它们放入电子表格中。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T00:01:27.320

如前所述，我不知道有什么方法可以追溯这一点。但是，假设我对您的理解正确，并且您的域位于不同的配置文件上，而不是不同的属性，则存在一些技巧。如果是这种情况，您应该为一个属性下的所有域使用一个跟踪代码，每个域都是它自己的配置文件。在这种情况下，您的“汇总”配置文件将是一个没有过滤器的配置文件。同时，每个单独的域都将包含一个过滤器来仅跟踪该域。没有任何过滤器的配置文件将收集所有数据，而带有过滤器的配置文件将只收集您在过滤器中指定的域的数据。这不会汇总属性，但会汇总配置文件。

编辑：找到一篇关于它的帖子 [http://moz.com/ugc/single-google-analytics-tracking-code-for-multiple-sites-when-to-use-how-to-report](http://moz.com/ugc/single-google-analytics-tracking-code-for-multiple-sites-when-to-use-how-to-report)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:39:00.663

目前没有办法在 GA 中临时组合来自多个配置文件的数据。获取汇总报告的当前标准是，除了每个站点都有自己的配置文件之外，您还应该设置一个“主”（汇总）配置文件来接收来自所有站点的数据。这是解释设置的 GA 文档的链接：

[跨域跟踪的关键组件](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite?hl=en#keyComponents)

不幸的是，GA 没有提供一种方法来追溯应用所有这些或将历史数据导入配置文件，因此您将不得不走“导出到电子表格并在那里做魔术”路线来获取历史数据:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:14:24.817

有两种方法可以做到这一点：

@Crayon 描述了其中一种方法。您可以做的另一件事是：

为您的每个站点创建一个不同的帐户。**跟踪特定站点帐户上的所有常规内容。除此之外，创建一个新的网络资产，用于在所有网站上创建第二个跟踪器**并用作汇总资产。

这种方法的好处是：

*   您可以在汇总帐户和个人帐户上跟踪不同的事情。
*   在汇总帐户上，如果需要，您可以忽略某些域。
*   您不必乱用过滤器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T17:05:55.070

GA Premium 用户还有另一种选择：您可以尝试设置“汇总报告”（[https://support.google.com/analytics/answer/6033415](https://support.google.com/analytics/answer/6033415)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-17T10:27:36.467

通常您可以查看具有不同主机名/域的表，不确定这是否是您想要的。[https://www.fourfront.us/blog/using-the-hostname-filter-for-accurate-google-analytics-data](https://www.fourfront.us/blog/using-the-hostname-filter-for-accurate-google-analytics-data)

# imagemagick - Tiff 到 PNG 添加白色背景 - Imagemagic

> ID：14730988
> 
> 赞同：0
> 
> 时间：2013-02-06T14:04:10.043
> 
> 标签：imagemagick, imagemagick-convert

我正在使用以下 imagemacgick 代码将 TIFF 转换为 PNG

```
convert -profile ISOcoated_v2_eci.icc -profile eciRGB_v2.icc 1.tiff 3.png 
```

**TIFF 文件位于**

[http://dev9.edisbest.com/images/1.tiff](http://dev9.edisbest.com/images/1.tiff)

**转换后的 PNG 为 AT**

[http://dev9.edisbest.com/images/3.png](http://dev9.edisbest.com/images/3.png)

TIFF 将背景白色作为分层 TIF 关闭。

我想要的是默认情况下PNG应该有一个清晰的背景，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:30:20.877

我想到了

```
$route  = "2.tif";
    $salida = '1.png';
    exec("convert $route $salida");
    exec("convert $salida -bordercolor white -border 1x1 \
         -alpha set -channel RGBA -fuzz 10% \
         -fill none -floodfill +0+0 white \
         -shave 1x1 $salida");
    exec("rm $route"); 
```

# python - 将 python 代码迁移到 pypy 或更多关于未来可靠的东西

> ID：14730989
> 
> 赞同：3
> 
> 时间：2013-02-06T14:04:22.333
> 
> 标签：python, python-3.x, python-2.7

我想知道将我的 python 应用程序迁移到 PYPY 是否可靠。我需要特别提高我用于科学监控的许多 python 代码和基于扭曲的模块的性能，并且我正在考虑未来的方法。

无论是使用 pypy 或 Cython 的某些模型，Python 基础都没有表现出提高 CPython 性能的意图。

没有必要重新发明轮子，但Guido似乎并不介意python用户的需求。在这种情况下，很难找到方向，该做出什么决定？

...而且我绝对不想使用另一种编程语言。

PD：实际上我使用的是 2.7 版本...

编辑：我的代码已经过多次分析和测试，否则我不会问...谢谢您回答 Francis，无论如何...

编辑：我想知道更多关于这个的意见......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:19:22.377

我认为你对 CPython 有错误的印象。CPython 是参考实现，将始终具有最新的 Python 功能和最新版本的 Python。性能很重要，CPython 的性能随着每个小版本的发布而显着提高。CPython 绝对是当今可用的实现中最“未来可靠”的。

然而，CPython 的一个非常重要的特性是桥接到 C 环境，即运行用 C 编写的模块，这些模块包装 C 库或包含进行手动内存管理的微调 C 代码。使用 C 模块限制了您可以执行的奇异运行时内容的数量。*例如，如果您使用任何*用 C 语言编写的 Python 模块（如果它运行的话），那么PyPy 的性能会显着下降！

您可以尝试 PyPy、Cython、IronPython、Jython 等，看看它是否适合您，但如果您使用任何 C 模块，可能会感到失望。

相反，您应该采取的方法是[分析您的代码](http://docs.python.org/2/library/profile.html)并识别任何热点或内部循环并优化它们。由于您有一个 IO 驱动的应用程序，我强烈怀疑您的大部分“缓慢”与您的 Python 实现无关，而是与 IO 相关活动有关。可能需要调整的不是您的*应用程序*，而是它运行的机器。

# android - 模拟低内存警告

> ID：14730993
> 
> 赞同：2
> 
> 时间：2013-02-06T14:04:35.850
> 
> 标签：android

我有`override`以下方法

```
 @Override
    public void onLowMemory() 
      {
        // TODO Auto-generated method stub
          Log.i("AboutView Fragment","OnLowMemory invoked");
        super.onLowMemory();
    } 
```

但是这个方法没有调用，如何模拟低内存警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:28:51.980

这取决于你为什么需要它。例如，您可以直接调用它。

```
yourAppInstance.onLowMemory(); 
```

并检查你是否做了一些事情来释放一些内存。

或者您可以通过创建大量数据来填充内存（例如，while(not_call) {list.add(new byte[1024]);}）并等待调用 onLowMemory。然后删除创建的数据 (list.clear())。

# django - 使用 django 模板标签修改 url

> ID：14730994
> 
> 赞同：1
> 
> 时间：2013-02-06T14:04:42.480
> 
> 标签：django, templates, django-templates

`aaa.com/clients/view/DB38326B-65EC-4CB2-9860-E8F120109B9D/help/`

我正在尝试摆脱该`guid`部分`AB38326B-65EC-4CB2-9860-E8F120109B9D` 并尝试将 url 转发到`aaa.com/clients/view/help/`.

如何在 Django 模板标签中执行此操作？内置的可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:28:43.963

您可以在将 GUID 的查询集传递给它的同时重定向您的视图。

```
 return HttpResponseRedirect("/path/") 
```

或者在您的 URL 中进行重定向

```
from django.views.generic.simple import redirect_to

urlpatterns = patterns('',   
    (r'^one/$', redirect_to, {'url': '/another/'}),

    #etc...
) 
```

# java - 将非常大的十进制转换为字节

> ID：14730996
> 
> 赞同：-1
> 
> 时间：2013-02-06T14:04:46.827
> 
> 标签：java, binary, numbers, decimal, converter

如何将超大 (>1MB) 十进制数转换为字节/十六进制/二进制？

例如，数字“300”应转换为 {0x01, 0x2C}。字节顺序无关紧要，{0x2C, 0x01} 也可以。

源编号存储在准备好的文件中（没有标点符号、空格或换行符）。最大的[刚好超过 17MB](http://www.isthe.com/chongo/tech/math/digit/m57885161/prime-c.html)，虽然我不能排除我将来会有一个 100MB 的数字。目标也是一个文件。

有没有一种不需要很长时间的方法，或者在需要很长时间的情况下是安全*的*？

我担心使用`BigInteger`会花费很长时间并且不是故障保存（*即，*如果出现问题，我无法中途恢复）

我并不反对实现我自己的算法，尽管我正在寻找比“检查奇数，除以 2”更有效的方法。我已经看到二进制到 BCD 的非常有效的实现，即[Shift 和 Add-3](http://www.johnloomis.org/ece314/notes/devices/binary_to_BCD/bin_to_bcd.html)算法，并且正在寻找一种类似有效的反向实现。

对还支持定点数（1 位数字和其余小数，*例如*Pi）的实现的额外赞誉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:14:50.817

对我来说，`BigInteger`将 1M 位数字转换`byte []`为大约 39 秒。对你来说太多了吗？

```
Random r = new Random ();

StringBuilder sb = new StringBuilder();

for (int i = 0; i < 1000000; i++)
    sb.append ("0123456789".charAt(r.nextInt(10)));

long t = System.currentTimeMillis();
BigInteger bi = new BigInteger (sb.toString());
byte [] bytes = bi.toByteArray();
System.out.println(System.currentTimeMillis() - t); 
```

关于小数。让我们假设你有一个大的小数形式`<n digits>.<m digits>`。您想将其转换为`k`点后位的二进制。你需要解一个方程：`D/(10^m) = X/(2^k)`，其中 X 是整数。这里 D 是没有点的小数（小数的尾数），X 是没有点的二进制（二进制的尾数）。方程很容易解：`X ~ round(D*(2^k)/(10^m))`. X 必须是整数，所以我们添加了`round()`.

例如，您需要将 12.34 转换为点后 3 位的二进制。

```
n = 2
m = 2
D = 1234
k = 3
X ~ round(D*(2^k)/(10^m)) = round(1234 * 8 / 100) = round(98.72) = 99 = 1100011b 
```

请记住，我们需要点后 3 位，所以我们的答案是 12.34 ~ 1100.011b

所有这些计算都可以使用 BigInteger 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:23:05.307

> 有没有一种不需要很长时间的方法，或者在需要很长时间的情况下是安全的？

没有。

十进制数到二进制数的转换涉及将一个大数反复乘以 10。如果您有数百万位数字，那么您就有数百万次乘法需要对非常大的数执行。

但是，听起来您实际上并没有对这些非常大的数字之一进行转换，您只是*猜测*这将需要很长时间。在你继续之前，我强烈建议你对这个操作进行基准测试，看看它实际需要多长时间。（米哈伊尔的回答说大约 39 秒，但他编写的代码没有考虑 JVM 预热。）

或者更好的是，使用 BigInteger 对整个应用程序进行编码并对其进行*分析*以确定是否存在性能问题，以及实际的性能瓶颈在哪里。