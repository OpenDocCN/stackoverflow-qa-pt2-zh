# StackOverflow 问答 14984000-14984999

# android - 如何使用播放 flash 的 webview 管理 z-order

> ID：14984000
> 
> 赞同：3
> 
> 时间：2013-02-20T15:44:30.763
> 
> 标签：android, flash, android-layout, layout, webview

我只是想在 Webview 上放置一个 textview，它可以正常工作，但如果 webview 有一个 flash 对象，比如 .swf，它将覆盖隐藏我的 TextView 的布局上的任何其他内容。尝试使用 RelativeLayout，FrameLayout，ofc 在布局末尾声明 TextView。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:41:06.970

还要注意flash对象的硬件加速参数。它会影响 wmode...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:58:49.577

如果 html 中有 flash 对象，则不能将任何标签 html 的 z-index 属性放置在 flash 对象上。

但如果 flash 对象具有 wmode = transparent 属性，则可以工作。

我希望这会有所帮助

问候！

# c# - 应用未运行时在 Windows Phone 上接收 toast 通知

> ID：14984001
> 
> 赞同：1
> 
> 时间：2013-02-20T15:44:31.647
> 
> 标签：c#, push-notification, windows-phone-8, mpns

我的 toast 消息具有以下格式：

```
string toastMessage = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
"<wp:Notification xmlns:wp=\"WPNotification\">" +
"<wp:Toast>" +
    "<wp:Text1>[string]</wp:Text1>" +
    "<wp:Text2>[string]</wp:Text2>" +
    "<wp:Param>[string]</wp:Param>" +
    "<wp:myCustomParam1>[string]</wp:myCustomParam1>" +
    "<wp:myCustomParam2>[string]</wp:myCustomParam2>" +
    "<wp:myCustomParam3>[string]</wp:myCustomParam3>" +
"</wp:Toast>" +
"</wp:Notification>"; 
```

当我的应用程序正在运行时，我可以在`ShellToastNotificationReceived(object sender, NotificationEventArgs e)`事件处理程序上接收我的自定义参数（wp:myCustomParam1 和其他）作为键`e.Collection`

但是当我的应用程序没有运行并且通知到来时，用户点击弹出通知并且应用程序启动，ShellToastNotificationReceived 没有调用并且通知丢失。

那么，在这种情况下如何获取我的自定义参数呢？

# python - PyTables 处理大小比内存大很多倍的数据

> ID：14984003
> 
> 赞同：10
> 
> 时间：2013-02-20T15:44:32.753
> 
> 标签：python, io, hdf5, pytables

我试图了解 PyTables 如何管理大小大于内存大小的数据。以下是 PyTables 代码中的注释（[链接到 GitHub](https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L498)）：

```
# Nodes referenced by a variable are kept in `_aliveNodes`.
# When they are no longer referenced, they move themselves
# to `_deadNodes`, where they are kept until they are referenced again
# or they are preempted from it by other unreferenced nodes. 
```

[在_getNode](https://github.com/PyTables/PyTables/blob/develop/tables/file.py#L1024)方法中也可以找到有用的注释。
似乎 PyTables 具有非常智能的 IO 缓冲系统，据我了解，它将用户引用的数据存储在快速 RAM 中作为“aliveNodes”，在需要时将之前和当前未引用的数据保持为“deadNodes”以快速“恢复”它，并且如果请求的键不存在于死或活类别中，则从磁盘读取数据。

在处理大于可用内存的数据时，我需要一些关于 PyTables 如何准确处理情况的专业知识。我的具体问题：

1.  deadNode/aliveNode 系统如何工作（常见图片）？
2.  如果我是对的，aliveNodes/deadNodes 之间的主要区别是什么，它们都代表存储在 RAM 中的数据？
3.  可以手动调整用于缓冲的 RAM 限制吗？在注释下方，有一段代码从 `params['NODE_CACHE_SLOTS']`. 它可以由用户以某种方式指定吗？例如，如果我想为其他需要内存的应用程序留下一些 RAM？
4.  在处理大量数据时，PyTables 在什么情况下会崩溃或显着变慢？在我的情况下可以超过内存 100 倍，在这种情况下常见的陷阱是什么？
5.  PyTables 在大小、数据结构以及对被认为是“正确”的数据进行操作以实现最佳性能方面有何用途？
6.  [Docs 建议](http://pytables.github.com/usersguide/libref/structured_storage.html#tables.tableExtension.Row.append)`.flush()`在每个基本`.append()`周期后使用。这个周期实际上可以有多长？我正在执行一个小基准测试，比较 SQLite 和 PyTables 如何处理使用大 CSV 文件中的键值对创建一个巨大的表。当我`.flush()`在主循环中使用较少的时候，PyTables 获得了巨大的加速。那么 - 对相对较大的数据块是否正确，`.append()`然后使用`.flush()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T07:49:41.667

# 内存结构

从未使用过 pytables 但查看源代码：

```
class _Deadnodes(lrucacheExtension.NodeCache):
    pass 
```

所以看起来 _deadnodes 是使用 LRU 缓存实现的。LRU == "最近最少使用" 这意味着它将首先丢弃最少使用的节点。来源在[这里](https://github.com/PyTables/PyTables/blob/develop/tables/lrucacheExtension.pyx)。

```
class _AliveNodes(dict):
    ... 
```

他们将其用作程序中实际运行和表示的节点的自定义字典。

非常简化的示例（节点是字母，缓存中的数字表示条目的陈旧程度）：

```
memory of 4, takes 1 time step
cache with size 2, takes 5 times steps
disk with much much more, takes 50 time steps

get node A //memory,cache miss load from disk t=50
get node B // "" t=100
get node C // "" t=150
get node D // "" t=200
get node E // "" t=250
get node A //cache hit load from cache t=255
get node F //memory, cache miss load from disk t=305
get node G //memory, cache miss load from disk t=355
get node E // in memory t=356 (everything stays the same)

t=200              t=250              t=255
Memory    CACHE    Memory    CACHE    Memory    CACHE
A                  E         A0       E         B0
B                  B                  A
C                  C                  C
D                  D                  D

t=305              t=355              
Memory    CACHE    Memory    CACHE
E         B1       E         G0
A         C0       A         C1
F                  F
D                  G 
```

正如您在现实生活中所知道的那样，这些结构非常庞大，访问它们所需的时间是以总线周期为单位的，因此 1/（您的电脑的时钟）。

相比之下，访问元素所需的时间是相同的。它在内存中几乎可以忽略不计，缓存更多，磁盘更多。从磁盘读取是整个过程中最长的部分。磁盘和手臂需要移动，等等。这是一个物理过程而不是电子过程，因为它不是以光速发生的。

在 pytables 中，他们做了类似的事情。他们在 Cython 中编写了自己的缓存算法，它是活动节点（内存）和完整数据（磁盘）之间的中间人。如果命中率太低，那么看起来缓存将被关闭，并且在一定数量的周期后它会再次打开。

在[parameters.py](https://github.com/PyTables/PyTables/blob/develop/tables/parameters.py#76)中`DISABLE_EVERY_CYCLE`，`ENABLE EVERY_CYCLE`和`LOWEST_HIT_RATIO`变量用于定义 LOWEST_HIT_RATIO 下要禁用的周期数以及等待重新启用的周期数。不鼓励更改这些值。

您应该从中获得的主要信息是，如果您需要对大型数据集进行处理，请确保它们位于相同的节点上。如果你能摆脱它，读入一个块，在那个卡盘上进行处理，得到你的结果，然后加载另一个块。如果你加载块 A，获取另一个块 B，然后再次加载块 A，这将导致最大的延迟。一次只对一块数据进行操作，并将访问和写入保持在最低限度。一旦有一个值，`_alivenodes`它就可以快速修改它，但`_deadnodes`速度会慢一些，而且速度也不会慢很多。

# NODE_CACHE_SLOTS

`params['NODE_CACHE_SLOTS']`定义死节点集的大小。追溯到[parameters.py](https://github.com/PyTables/PyTables/blob/develop/tables/parameters.py#L161)，它默认为64。它表明您可以尝试不同的值并报告回来。您可以更改文件中的值或执行以下操作：

```
import parameters
parameters.NODE_CACHE_SLOTS = # something else 
```

这只会限制保存在缓存中的节点数量。过去你受到 python 堆大小的限制，设置看[this](https://stackoverflow.com/questions/2308091/how-to-limit-python-heap-size)。

# 追加/刷新

对于`append`,`flush`确保将行输出到表中。您移动的数据越多，数据从内部缓冲区移动到数据结构所需的时间就越长。它使用其他处理代码调用[H5TBwrite_records函数的修改版本。](http://www.hdfgroup.org/HDF5/doc/HL/RM_H5TB.html#H5TBwrite_records)我猜测调用的长度决定了输出周期的长度。

请记住，这一切都来自源代码，而不是考虑他们试图做的任何额外的魔法。我从来没有使用过pytables。从理论上讲，它不应该崩溃，但我们并不生活在一个理论世界中。

编辑：

实际上我自己发现需要 pytables 我在他们的常见问题解答中遇到了[这个问题](http://www.pytables.org/moin/FAQ#Ifitisdesignedtodealwithverylargedatasets.2CthenPyTablesshouldconsumealotofmemory.2Cshouldn.27tit.3F)，这可能会回答您的一些担忧。

感谢您向我公开 pytables，如果我在研究这个问题之前遇到`.h5`文件，我将不知道该怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:30:41.087

我不是 PyTable ¹的专家，但它很可能像[交换内存](https://serverfault.com/questions/48486/what-is-swap-memory)一样工作。

`aliveNodes`活在 RAM 中，而它们`deadNodes`可能以 hdf5 文件（PyTables 使用的二进制文件格式）存储在磁盘上。每次您需要访问一条数据时，它都需要在 RAM 中。因此，PyTable 检查它是否已经存在 ( `aliveNodes`)，如果存在则将其返回给您。否则，它需要*恢复*`deadNode`数据所在的位置。由于 RAM 有限，它可能会*杀死*（写入磁盘）未使用的内存`aliveNode`以预先腾出一些空间。

这个过程的原因当然是 RAM 的大小有限。结果是每次您需要交换节点时性能都会受到影响（*杀死*一个节点并*恢复*另一个节点）。

为了优化性能，您应该尽量减少交换。例如，如果您的数据可以并行处理，您可能只能加载每个节点一次。其他示例：假设您需要遍历一个巨大矩阵的每个元素，该矩阵被分成一个节点网格。那么你最好避免按行或按列访问它的元素，而是按节点访问它的元素。

当然，PyTable 会在后台处理这个问题，因此您不必控制每个节点中的内容（但我鼓励您深入研究这个`NODE_CACHE_SLOTS`变量，至少要了解它是如何工作的）。但通常访问连续的数据比访问分散在各处的数据更快。与往常一样，如果时间性能对您的应用程序来说是一个重要问题，请分析您的代码。

* * *

^(¹翻译：*我对 PyTables 几乎一无所知*)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:35:51.693

我也不是 PyTable 方面的专家，Simon 似乎已经很好地涵盖了交换内存的概念，但是如果您想要一个旨在处理太大而无法放入内存的数据的算法的具体示例，我建议您查看外部排序。

基本思想是这样的：你不能把所有的数据都放在内存中，但你需要对它进行排序。但是，您可以将*一些*数据以大小为 k 的块的形式放入内存中。假设有 j 个这样的块。

*   将数据分成大小为 k 的块。
*   对于每个块，将其放入内存并对其进行排序（例如使用快速排序或其他方式），然后将其排序后的版本写回磁盘。

现在，我们有 j 个排序数据块，我们希望将它们*合并*为一个长排序数据。这个问题听起来像归并排序！所以，

*   将每个 j 排序块中的最小值带入内存
*   找出这些 j 值中的最小值。那是最小的数据！所以，把它写到磁盘的某个地方作为我们排序数据集的开始。
*   *将*新写入的值替换为其块中的下一个最小值到内存中（这是交换内存的“交换”位）。

现在，内存中的数据是最小的 j，*除了我们已经写入*磁盘上最终排序数据集的数据。所以，如果我们重复这个过程，直到所有数据都写入最终集合，它总是会排序。

因此，这只是使用内存交换来处理太大而无法放入内存的数据的算法示例。PyTable 的排序方法大概就是这样。

奖励：[这里](https://stackoverflow.com/questions/5100252/external-sorting)有[一些](http://www.youtube.com/watch?v=YjFI9CJy6x0)链接[到](http://web.eecs.utk.edu/~bvz/bvz/classes/cs302/notes/external-sorting2.html)外部排序的更多解释。

# c# - 富文本框 - 文本分配导致 OutofMemoryException

> ID：14984004
> 
> 赞同：1
> 
> 时间：2013-02-20T15:44:33.470
> 
> 标签：c#, .net, richtextbox

我有一个程序可以读取 SQL Server 中的 NTEXT 列并在富文本框中显示输出。对于其中一个值，它会抛出一个`OutofMemoryException`.

我使用 a 读取该列`SqlDataAdapter`，然后将该列的内容附加到 a `stringBuilder`。我收到以下代码行的异常。

```
rtbEventDesc.Text = stringBuilder.ToString(); 
```

显示的消息是：

> 内存不足，无法继续执行程序。

我该如何解决这个问题？此特定行的列大小为 9 MB，这不算多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:05:46.100

我的建议是将 coumn 转储到一个临时文件，然后使用以下命令读取该文件：

```
rtbEventDesc.LoadFile(tmpFileName); 
```

希望能帮助到你。

* * *

**编辑**

在无法使用文件保存文件的情况下，或许可以使用内存流：

```
Byte[] text = GetByteArrayFromSqlAdapter();
using (MemoryStream ms = new MemoryStream())
{
   ms.Write(text, 0, text.Length);
   rtbEventDesc.LoadFile(ms, RichTextBoxStreamType.RichText);
} 
```

* * *

**编辑二**

似乎 RichTextboxControl 在加载 9Mb 文件时不够好，它的性能没有更好，主应用程序卡住并在窗口标题中显示（未响应）消息。

这里有两个选项：

1.  如果加载时间在合理的时间内结束，请使用 BackgroundWorker 或任何其他异步机制来加载文件，在加载时向用户提供反馈。

2.  使用性能更好的其他文本框。我推荐你使用[Scintilla.NET](http://scintillanet.codeplex.com/)或[AvalonEdit](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)

# css - 如何在我的 svg 中包含一个很棒的字体图标？

> ID：14984007
> 
> 赞同：70
> 
> 时间：2013-02-20T15:44:43.237
> 
> 标签：css, svg, font-awesome

我有一个包含图像的 svg：

```
<g><image id="myImage" class="myClass" x="12" y="15" width="10" height="10" xlink:href="/images/pic.png"/></g> 
```

如何用字体真棒图标替换该行：

```
<g><i class="icon icon-cloud-download" x="12" y="15" width="10" height="10"></i></g> 
```

似乎不起作用，因为图像没有显示出来。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-02-20T17:41:43.190

`i`不是有效的 SVG。您需要包含显示图标的实际字符。如果您查看[font awesome 的样式表](https://github.com/FortAwesome/font-awesome-less/blob/master/assets/stylesheets/font-awesome/variables.less)，您会看到...

```
.icon-group:before                { content: "\f0c0"; }
.icon-link:before                 { content: "\f0c1"; }
.icon-cloud:before                { content: "\f0c2"; }
.icon-beaker:before               { content: "\f0c3"; }
.icon-cut:before                  { content: "\f0c4"; }
.icon-copy:before                 { content: "\f0c5"; }
.icon-paper-clip:before           { content: "\f0c6"; }
.icon-save:before                 { content: "\f0c7"; }
.icon-sign-blank:before           { content: "\f0c8"; }
.icon-reorder:before              { content: "\f0c9"; }
.icon-list-ul:before              { content: "\f0ca"; }
.icon-list-ol:before              { content: "\f0cb"; }
.icon-strikethrough:before        { content: "\f0cc"; }
.icon-underline:before            { content: "\f0cd"; }
.icon-table:before                { content: "\f0ce"; } 
```

但这些是为 CSS 编码的 unicode 字符。在 SVG 中，您需要将示例的语法更改`\f040`为：

```
<g><text x="0" y="0">&#xf040;</text></g> 
```

然后在您的样式表中添加：

```
svg text {
   font-family: FontAwesome;
} 
```

根据 Niek 的评论，如果您使用 Font Awesome 5+ 的免费版本，则必须使用以下 font-family 声明：

```
svg text {
   font-family: 'Font Awesome 5 Free';
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-01-23T04:54:32.383

# [我的演示](http://jsbin.com/pekejanivi)

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <meta charset="utf-8">
    <title>JS Bin</title>
  </head>
  <body>
    <div title="Code: 0xe800" class="the-icons span3">

      <H3>Standard using:</H3>
    <i class="fa fa-camera-retro fa-4x"></i>
    <br>
      <H3>SVG using:</H3>
  </body>
</html> 
```

JS

```
var svg = d3.select("body")
  .append("svg")
  .attr("width", 250)
  .attr("height", 250);

svg.append("text")
  .attr("x",0)
  .attr("y",70)
  .attr("font-family","FontAwesome")
  .attr('font-size', function(d) { return '70px';} )
  .text(function(d) { return '\uf083'; }); 
```

# command-line - 如何在 Inno Setup 中执行 cmd 命令

> ID：14984009
> 
> 赞同：9
> 
> 时间：2013-02-20T15:44:50.233
> 
> 标签：command-line, inno-setup

为了静默安装 MySQL，我在 cmd 中尝试了以下命令，它工作正常：

```
msiexec /i "mysql-essential-6.0.11-alpha-winx64.msi" /qn 
```

但是，如何在 Inno Setup 中安装**之前运行该命令？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T16:07:22.157

[`Exec`](http://jrsoftware.org/ishelp/topic_isxfunc_exec.htm)您可以通过从事件方法调用函数来执行它[`CurStepChanged`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#CurStepChanged)，当步骤为`ssInstall`. 在以下脚本中显示了如何将该 MySQL 安装程序包含到您的设置中，以及如何在安装开始之前提取并执行它：

```
#define MySQLInstaller "mysql-essential-6.0.11-alpha-winx64.msi"

[Files]
Source: "{#MySQLInstaller}"; Flags: dontcopy 
```

```
[Code]
procedure CurStepChanged(CurStep: TSetupStep);
var
  Params: string;
  ResultCode: Integer;
begin
  if (CurStep = ssInstall) then
  begin
    ExtractTemporaryFile('{#MySQLInstaller}');
    Params := '/i ' + AddQuotes(ExpandConstant('{tmp}\{#MySQLInstaller}')) + ' /qn';
    if not Exec('msiexec', Params, '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
      MsgBox('Installation of MySQL failed. Exit code: ' + IntToStr(ResultCode),
             mbInformation, MB_OK);
  end;
end; 
```

***利用未使用的进度条：***

由于 MySQL 安装完成需要一些时间，并且您决定隐藏安装程序的用户界面（无论如何这也可能非常不安全），您可以扩展脚本以使用显示在其安装期间的起始位置，当时未使用。以下代码将 Inno Setup 的安装进度条切换（至少在 Windows XP 系统上）[`marquee style`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760816%28v=vs.85%29.aspx#Marquee_Style)并在状态标签中显示描述。MySQL 安装完成后，进度条切换回正常模式，开始实际的 Inno Setup 安装：

```
#define MySQLInstaller "mysql-essential-6.0.11-alpha-winx64.msi"

[Files]
Source: "{#MySQLInstaller}"; Flags: dontcopy 
```

```
[Code]
procedure CurStepChanged(CurStep: TSetupStep);
var
  Params: string;
  ResultCode: Integer;
begin
  if (CurStep = ssInstall) then
  begin
    WizardForm.ProgressGauge.Style := npbstMarquee;
    WizardForm.StatusLabel.Caption := 'Installing MySQL. This may take a few minutes...';

    ExtractTemporaryFile('{#MySQLInstaller}');
    Params := '/i ' + AddQuotes(ExpandConstant('{tmp}\{#MySQLInstaller}')) + ' /qn';
    if not Exec('msiexec', Params, '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
      MsgBox('Installation of MySQL failed. Exit code: ' + IntToStr(ResultCode),
             mbInformation, MB_OK);

    WizardForm.ProgressGauge.Style := npbstNormal;
    WizardForm.StatusLabel.Caption := '';
  end;
end; 
```

# ajax - 购物车重定向 Prestashop 非 Ajax

> ID：14984013
> 
> 赞同：0
> 
> 时间：2013-02-20T15:44:57.233
> 
> 标签：ajax, url, redirect, prestashop, cart

我正在尝试重定向我的购物车。

基本上，当用户在产品页面的详细视图上并单击“添加到购物车”时，该项目被添加到购物车，我选择留在同一页面上。但是，我现在希望他们转到我在其中托管自定义模块的自定义页面。我正在使用购物车的非 Ajax 版本，但似乎无法做到。任何提示或指示？

我已经尝试过使用钩子 actionCartSave，它适用于 Ajax 版本的购物车。

我不介意展示一些代码，但我不知道哪一部分会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:43:08.080

在 cart.php 中修改 ::redirect 行就可以了。

# matlab - MATLAB 索引超出范围错误

> ID：14984014
> 
> 赞同：0
> 
> 时间：2013-02-20T15:44:57.280
> 
> 标签：matlab

我已经编写了以下代码片段，但是，我收到了一个索引越界错误。我不确定如何解决这个问题。有谁知道我该如何解决它。提前致谢！

```
image = imread('image_3.jpg');

%parameters
N = 100; 
smth = rgb2gray(image);

% Calculating size of image
[row col] = size(image);

eline = smth; %eline is simply the image intensities

[grady,gradx] = gradient(double(smth));

eedge = -1 * sqrt ((gradx .* gradx + grady .* grady)); %eedge is measured by gradient in the image

m1 = [-1 1];
m2 = [-1;1];
m3 = [1 -2 1];
m4 = [1;-2;1];
m5 = [1 -1;-1 1];

cx = conv2(smth,m1,'same');
cy = conv2(smth,m2,'same');
cxx = conv2(smth,m3,'same');
cyy = conv2(smth,m4,'same');
cxy = conv2(smth,m5,'same');

for i = 1:row
for j= 1:col-1

    eterm(i,j) = (cyy(i,j)*cx(i,j)*cx(i,j) -2 *cxy(i,j)*cx(i,j)*cy(i,j) + cxx(i,j)*cy(i,j)*cy(i,j))/((1+cx(i,j)*cx(i,j) + cy(i,j)*cy(i,j))^1.5);
end
end

??? Attempted to access cyy(1,901); index out of bounds because
size(cyy)=[700,900].

Error in ==> snake at 31
    eterm(i,j) = (cyy(i,(j-1)+1)*cx(i,j)*cx(i,j) -2
    *cxy(i,j)*cx(i,j)*cy(i,j) +
    cxx(i,j)*cy(i,j)*cy(i,j))/((1+cx(i,j)*cx(i,j) +
    cy(i,j)*cy(i,j))^1.5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:16:35.603

将计算图像大小的行更改为：

> [行列] = 大小（smth）；

图像是 rgb，因此（我假设）700 x 900 x 3。因为输入具有三个维度，并且您只要求两个输出，所以它将最后两个维度相乘，得到 col = 2700。

# c++ - 超出范围时堆栈上的局部变量不会被删除

> ID：14984017
> 
> 赞同：0
> 
> 时间：2013-02-20T15:45:01.287
> 
> 标签：c++, undefined-behavior

```
#include <iostream>

int* retPointer()
{
    int x=10; //same as auto int x =10;
    return &x;
}

int main(int argc, char **argv)
{
    std::cout<<"x="<<*retPointer()<<std::endl;
    return 0;
} 
```

在上面的示例中，我返回一个指向堆栈的局部变量的指针。当我在 man() 中打印此指针指向的值时，我应该得到一个段错误。当我从函数 retPointer() 返回时，变量 x 应该超出范围。那么当尝试访问 main() 中的值时，我不应该遇到分段错误吗？我在这里错过了什么吗？

输出 = x=10

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:46:45.500

该`x`对象在从 中返回时*确实*超出了范围`retPointer()`，并且取消引用指向其生命周期已过期的对象的指针是**未定义的行为**。

具有未定义行为的程序意味着*任何事情都*可能发生，包括崩溃、表现得好像什么都没发生（例如`*retPointer()`返回正常值，例如`10`），或格式化您的硬盘驱动器。

尽管最后一个选项不太可能，但您绝对**不**希望在程序中出现未定义行为。永远不要使用自动存储返回指向本地对象的指针或引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:46:08.763

> 当我在 man() 中打印此指针指向的值时，我应该得到一个段错误。

你应该？规范中的哪里说这会发生？

您正在调用未定义的行为。*任何事情都有*可能发生。

# android - ADB 错误：找不到设备 USB

> ID：14984018
> 
> 赞同：3
> 
> 时间：2013-02-20T15:45:02.017
> 
> 标签：android, adb, device

我尝试通过 USB 连接我的 7` 标签 (KrugerKM0793)。

我卸载了所有 USB 驱动程序并从`sdk\extras\google\usb_driver`.

在此之后，设备管理器找到了一个“Android ADB 接口”。没有错误。但似乎 Eclipse 看不到 ADB。

我检查了 ADB.exe，这是我的日志：

```
C:\Android_SDK\sdk\platform-tools>adb usb
error: device not found

C:\Android_SDK\sdk\platform-tools>adb kill-server

C:\Android_SDK\sdk\platform-tools>adb start-server
* daemon not running. starting it now on port 5037 *
* daemon started successfully *

C:\Android_SDK\sdk\platform-tools>adb devices
List of devices attached 
```

我试图找到一个解决方案，但都写来安装新的 APK 但我无法安装 adb wireless-root 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T18:01:36.940

下载并安装 Adb 驱动程序安装程序，它将搜索设备并安装任何缺少的驱动程序

[http://adbdriver.com/downloads/](http://adbdriver.com/downloads/)

它对我有用，问题立即解决了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T18:39:14.820

for what it's worth i've been up to my ears with this problem and my fix turned out to be to stop using a USB HUB on my desk, and to plug the android device directly into one of the USB ports on my motherboard

Symptom: USB Not Found in DDMS, Intllij.
adb devices would list my device and then lose it.

'twas the usb hub

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:54:21.350

> 我试图找到一个解决方案，但都写来安装新的 APK 但我无法安装 adb wireless-root 问题。

安装新的 APK 似乎是一个奇怪的解决方案，APK 安装在移动设备上。

需要明确的是，问题是 Eclipse 找不到 adb？

你不是说重新安装Android SDK吗？，这可以工作。

还可以通过您的 Android SDK 管理器更新 android SDK 工具和平台工具。

# linux - 两个别名的单个证书

> ID：14984019
> 
> 赞同：0
> 
> 时间：2013-02-20T15:45:07.550
> 
> 标签：linux, apache, ssl

是否可以`apache`使用 URL 重写等的某种重定向对两个别名域名使用单个证书？喜欢以下。我想将 example.com 重定向到`www.example.com`

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.com$
RewriteCond %{SERVER_PORT} =443
RewriteRule ^ https://www.example.com%{REQUEST_URI} [L,R=301] 
```

问题是我为`www.example.com`域注册了 SSL 证书，并且我有 CNAME example.com，但我在 example.com 上收到 SSL 警告，我可以使用上述技巧使其工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:23:07.817

当证书具有多个主题备用名称或通配符证书（或两者兼有）时，您可以拥有对多个主机名有效的证书。

通配符证书不是特别有用，`www.example.com`并且`example.com`因为点不是模式的一部分，所以`*.example.com`不会匹配`example.com`。在这种情况下，这样的通配符证书无论如何都需要额外的 SAN `example.com`。

CA 对具有多个 SAN 的证书有各种商业名称，并且通常为此收取额外费用。

然而，这`www`被许多人认为是一种特殊情况。一些 CA 会在您申请 SAN 时`www.example.com`颁发证书，无需额外费用。`example.com``www.example.com`

您也可以使用两个不同的证书，但是，除非您知道所有客户端都支持服务器名称指示 (SNI)，否则您需要为每个客户端设置一个单独的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:58:15.677

出于安全原因，每个证书都仅限于一个域。一些证书是诸如通配符证书之类的一堆域的漏洞，这样的证书可以解决您的问题，但实际上它们的价格是正常价格的两倍或三倍。

另一种方法是两个域的证书，但这不是很容易配置。但是，此证书需要由证书颁发机构签名。

所以现在除了购买另一个证书之外，您什么也做不了。

我差点忘了，你可以从[https://startssl.com/](https://startssl.com/)获得免费证书。不是你的名字，而是重定向应该没问题。

# batch-file - sqlcmd 或 .bat 文件从文件中提取直到空白行

> ID：14984020
> 
> 赞同：1
> 
> 时间：2013-02-20T15:45:07.127
> 
> 标签：batch-file, export-to-csv, sqlcmd

我有以下命令：

```
sqlcmd -S CHLWBIDB204 -d PayrollReports -U finance_lookup -P lawson -i"L:\Lawson\EEIMPORT.sql" -W -o "Z:\EmployeeImport.csv" -h-1 -s"," 
```

它工作得很好，除了这个文件的接收者不能用空行接受它和它提供的总数。

就像是：

```
 ...
(line 10)  1, 2292, KPR, 7.94
(line 11)
(line 12)  (10 rows affected) 
```

第 11 行和第 12 行不能在文件中，所以我认为需要一些命令才能在空行处停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:10:32.453

All you need to do is pipe the output to FINDSTR and filter out the unwanted lines.

The /V option throws away lines that match. The command below looks for empty lines and your count line. The search terms may have to be refined - I don't have sqlcmd to test with.

```
sqlcmd .... | findstr /v /c:"^$" /c:"([0-9]* rows affected)" 
```

Instead of searching for lines to throw away, you may be able to search for lines to keep. As long as the desired output always has at least 2 comma delimited columns, then you can simply search for any line that contains a comma.

```
sqlcmd .... | find "," 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:50:09.507

如果您可以编辑该`.sql`文件，`SET NOCOUNT ON;`请在 SELECT 语句之前添加。（或者，以不同的名称保存脚本的修改版本并使用它。）

这将抑制`… rows affected`消息（连同前面的空行）。

# java - Java 使用 volatile 关键字内存效率高吗？

> ID：14984022
> 
> 赞同：2
> 
> 时间：2013-02-20T15:45:15.217
> 
> 标签：java, memory, volatile, memory-efficient

如果使用 1 个易失性变量，它是否也会关闭其他相关非易失性变量的 cpu 缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:47:29.263

不，它只会阻止该变量被加载到 cpu 缓存并在那里修改。更准确地说，它强制 CPU 在访问 volatile 字段后刷新其缓存。有关更多详细信息，请参见[此处](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#volatile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:49:22.407

它不会“关闭”缓存。但是，是的，它*通常*会导致其他挂起写入的刷新（当您写入 a 时`volatile`）或至少一些缓存失效（当您读取 a 时`volatile`）......并且这两者都使用额外的内存带宽，并影响性能。

考虑这个例子：

```
public volatile int foo;
public int bar;

/* thread 1 */

bar = 1; // A
foo = 1; // B

/* thread 2 */
System.err.println("foo = " + foo);  // C
System.err.println("bar = " + bar);  // D 
```

JLS 说 A*发生在*B 之前，C*发生在*D 之前。如果线程 2 中的 C 在线程 1 中的 B*之后*，则 B*发生在*C 之前，因此 A*发生在*D之前。

如果 A*发生在*D 之前，则在 A 处写入的值`bar`必须`bar`在 D 处可用……假设`bar`在此期间没有其他内容写入。

具体*如何*实现这一点是特定于实现的。但肯定会对缓存数据产生影响……包括非易失性字段的缓存副本。

假设一个典型的内存架构，并假设线程 1 和线程 2 不共享缓存，这意味着：

*   两者都`foo`必须`bar`由 B 处的线程 1 刷新到主内存，并且
*   `foo`在 C 处，任何线程 2 的和的缓存副本都`bar`必须被丢弃。

我的理解是，这通常是使用缓存无效和缓存刷新指令来实现的。

* * *

最重要的是，由于它会产生额外的内存流量，因此使用`volatile`可能会对多核系统产生重大的性能影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:50:34.077

volatile 关键字与内存无关。这是一个并发问题。

**编辑** volatile 关键字与内存效率无关。这是一个并发问题。

# ios - Trigger.io iOS 插件从回调中返回数据

> ID：14984023
> 
> 赞同：4
> 
> 时间：2013-02-20T15:45:16.567
> 
> 标签：ios, trigger.io

我正在为警报提示创建 trigger.io 插件。尝试从警报提示返回数据。这是我的代码：

```
 // Prompt
+ (void)show_prompt:(ForgeTask*)task{
    // Create the alert 
    UIAlertView *prompt = [[UIAlertView alloc] initWithTitle:@"Title"
                                                     message:@"Message"
                                                    delegate:self
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:@"Cancel", nil];    
    UITextField *promptTextBox = [[UITextField alloc] initWithFrame:CGRectMake(12, 45, 260, 25)];

    [promptTextBox setTag:30050]; // set tag to find the text box
    [promptTextBox setBackgroundColor:[UIColor whiteColor]];
    [prompt addSubview:promptTextBox]; // add it to the alert
    [prompt show]; //show alert

    }

 // Call back
+ (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex task:(ForgeTask*)task
{
        // Grab the reply from text box
        UITextField* promptTextBox = (UITextField*)[alertView viewWithTag:30050];
        NSLog(@"%@", [promptTextBox text]); // output to log   
        [task success:nil]; // output call back

} 
```

**当我尝试执行[task success:nil];**时，上述内容不起作用 并包括**task:(ForgeTask*)task**回调停止工作。

但是没有**[task success:nil];** & **task:(ForgeTask*)task** NSLog 确实有效。

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:26:12.113

所以你试图返回`[promptTextBox text]`调用JavaScript？

这个怎么样：

```
NSLog(@"%@", [promptTextBox text]); // output to log   
[task success:[promptTextBox text]]; // output call back 
```

...还是我错过了重点？

# backbone.js - 使用文件夹中的图像 url 作为对象属性的主干.js

> ID：14984027
> 
> 赞同：0
> 
> 时间：2013-02-20T15:45:24.720
> 
> 标签：backbone.js, binding, collections, views, models

我正在从服务器上包含图像的文件夹中生成的数组中提取我的主干模型；首先，我使用 PHP 获取图像列表，然后将数组传递给 javascript 数组，最后我在主干中的 javascript 数组中循环，为每个图像创建一个新视图，当上传新图像时，这也会创建一个新对象，但是谁能给我一个关于如何保存对象属性的建议，例如我的服务器或数据库中的 {name:pizza}，以便在页面重新加载时这些属性将保持不变。还是有其他方法可以做到这一点？

# batch-file - 如何在我的 cmd 批处理文件的字符串变量中替换字符串变量？

> ID：14984028
> 
> 赞同：2
> 
> 时间：2013-02-20T15:45:27.020
> 
> 标签：batch-file, cmd, substring

我想看看一个字符串是否包含另一个字符串，其中两个字符串都是变量。[基本上它与这个线程](https://stackoverflow.com/questions/7005951/batch-file-find-if-substring-is-in-string-not-in-a-file)相同，但有两个变量。采用该解决方案并将其应用于我的情况，`!VAR1!`并且`!VAR2!`（这些变量在`FOR`循环中声明）我尝试了：

```
if not x!VAR1:!VAR2!=!==x!VAR1! ECHO It contains !VAR2! 
```

不幸的是，它不起作用。任何帮助将不胜感激。我也声明`SETLOCAL EnableDelayedExpansion`了，所以我可以访问变量。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:11:13.257

当我检查一个字符串是否存在于另一个字符串中时，我喜欢使用`for`循环而不是`if`.

```
for /f "delims=" %%I in ('echo !VAR1! ^| findstr /i /c:"!VAR2!"') do (
    echo !VAR1! contains !VAR2!
) 
```

这具有不区分大小写匹配的额外好处。

* * *

如果您更喜欢保留 if 语句，请尝试使用中间变量以减少混淆。

```
set vt=!VAR1:%VAR2%=!
if x%vt%==x%VAR1% (
    echo %VAR1% remained the same after removing %VAR2%.  %VAR1% did not contain %VAR2%
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T17:15:38.177

```
if "!VAR1:%VAR2%=!" neq "!VAR1!" echo It contains !VAR2! 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T04:22:35.193

正如 Aacini 和 rojo 所展示的，您必须对两个变量使用不同的扩展，即正常内部和延迟外部。

但也许您在设置变量的同一代码块中运行 IF。现在你不能使用正常的扩展。解决方案是将内部变量转移到 FOR 变量。

```
(
  :: Some code that sets the value of var2 
  ::
  for /f "delims=" %%A in ("!var2!") do if "!var1:%%A=!" neq "!var1!" echo It contains %%A
) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T16:54:00.540

这是我认为最简单的方法。

```
echo %VAR1% | find /i "%VAR2%" >nul && echo %VAR2% was found! 
```

如果找不到，请替换`&&`为for。`||`

# iphone - for 语句中的 dispatch_async 有什么区别

> ID：14984032
> 
> 赞同：2
> 
> 时间：2013-02-20T15:45:32.350
> 
> 标签：iphone, ios, objective-c-blocks, grand-central-dispatch, dispatch-async

我想知道`dispatch_async`在以下表示为“A”和“B”的方法中使用之间有什么区别。

`A`

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    for (int i = 0; i < 10; i++)
    {
        // do something
    }
}); 
```

`B`

```
for (int i = 0; i < 10; i++)
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // do something

    });
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T15:51:23.963

语句 A 产生一个新任务，该任务恰好包含一个循环。

语句 B 产生 10 个新任务，其中一些或全部可能要等到`for`循环完成之后才能完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:52:22.990

Dispatch_async schedules whatever in the block between {} to run on the queue specified.

So in case A, the code is traversed without the for loop being executed. Instead, the forloop is moved to the block specified.

In case B, you are scheduling to run the code inside the block 10 times on a different thread. Frankly I have not seen this kind of combination.

If you are new to iOS, you will mainly use blocks in the context of doing some computing intensive work in a different queue than the main queue. This allows the UI to remain responsive (you can still scroll the table for example)... And then when you need to update the UI, you execute a block like the one above but calling the main queue to update your UI.

Hope this helps.

# c# - updatePanel 不刷新单选按钮

> ID：14984050
> 
> 赞同：2
> 
> 时间：2013-02-20T15:46:31.153
> 
> 标签：c#, asp.net, radio-button, updatepanel

单击单选按钮时，我正在尝试填充下拉列表。第一次没问题，但第二次我去第一个它不起作用。这意味着 Quote 在加载时工作，单击时应用工作，但是当返回引用时，ddl 不会刷新。有任何想法吗？请温柔一点，不熟悉这个。

```
<asp:UpdatePanel ID="updatePanelToggle" runat="server" UpdateMode="always">
    <ContentTemplate>
        <asp:RadioButton ID="radioOn" Checked="true" AutoPostBack="true" runat="server" GroupName="toggle" Text="Quote" OnCheckedChanged="radioOn_CheckedChanged" />
        <asp:RadioButton ID="radioOff" AutoPostBack="true" runat="server" GroupName="toggle" Text="Apply" OnCheckedChanged="radioOff_CheckedChanged" />

        <asp:DropDownList ID="DropDownList1" runat="server"></asp:DropDownList>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="radioOn" />
        <asp:AsyncPostBackTrigger ControlID="radioOff" />

    </Triggers>

</asp:UpdatePanel> 
```

背后的代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                loadQuoteURLs();
            }
        }

        protected void radioOn_CheckedChanged(object sender, EventArgs e)
        {      
                loadQuoteURLs();
        }

        protected void radioOff_CheckedChanged(object sender, EventArgs e)
        {
            loadApplyURLs();
        }

        protected void loadApplyURLs()
        {

            DropDownList1.Items.Clear();
            DropDownList1.Items.Add("Apply");

        }

        protected void loadQuoteURLs()
        {

            DropDownList1.Items.Clear();
            DropDownList1.Items.Add("Quote");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:00:07.020

我已经尝试了您的代码并且工作正常。无论如何，在这种情况下，您不需要指定`UpdateMode="always"`和设置：`AsyncPostBackTriggers`

```
<asp:UpdatePanel ID="updatePanelToggle" runat="server">
    <ContentTemplate>
        <asp:RadioButton ID="radioOn" Checked="true" AutoPostBack="true" runat="server" GroupName="toggle"
            Text="Quote" OnCheckedChanged="radioOn_CheckedChanged" />
        <asp:RadioButton ID="radioOff" AutoPostBack="true" runat="server" GroupName="toggle"
            Text="Apply" OnCheckedChanged="radioOff_CheckedChanged" />
        <asp:DropDownList ID="DropDownList1" runat="server">
        </asp:DropDownList>
    </ContentTemplate>
</asp:UpdatePanel> 
```

# webrtc - Firefox 交换报价时的奇怪行为

> ID：14984054
> 
> 赞同：0
> 
> 时间：2013-02-20T15:46:34.110
> 
> 标签：webrtc

我目前正在尝试将我的 peerConnection 代码从 chrome 调整为 firefox，交换报价运行良好，但我不明白为什么在我没有向 peerConnections 添加任何流的情况下调用 onaddstream 事件？（一切都只在 Firefox 客户端之间进行了测试）

icecandidates 直接包含在报价中是否正常，而在 chrome 下，交换 icecandidates 的是 icecandidate 事件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:41:43.740

Firefox 会向第一个候选人发送报价，这是目前的正常行为。onstreamadded 在接收方调用，因为当您在浏览器中注入报价时，它会开始检查其他客户端，并获取远程流。

# breeze - IE8 使用微风.debug.js 抛出 hasOwnProperty 未定义异常

> ID：14984064
> 
> 赞同：1
> 
> 时间：2013-02-20T15:46:53.577
> 
> 标签：breeze

首先，我正在使用的 Web 应用程序需要使用 IE8，它使用 ES3 javascript 标准而不是 ES5。我正在使用[es5-shim.js](https://github.com/kriskowal/es5-shim)库，希望它可能会有所帮助，但不幸的是它不能修复引发的异常，从而阻止微风初始化。

这是微风.debug.js 中的代码块，它似乎是问题的一部分，如果不是 IE8 将 hasOwnProperty 读取为未定义的根：

```
Enum.prototype.getNames = function() {
        var result = [];
        for (var key in this) {
            if (hasOwnProperty.call(this, key)) {
                if (key != "name" && key.substr(0, 1) !== "_" && !core.isFunction(this[key])) {
                    result.push(key);
                }
            }
        } 
```

我在另一个 .js 文件中有一个额外的异常，它调用了这样的微风：`var manager = new breeze.EntityManager(window.Urls.dataModelApiUrl);`

这里的微风被 IE8 读取为未定义，我想是因为微风.debug.js 从一开始就没有正确初始化。

任何有助于解决此问题的建议/帮助/建议将不胜感激！

编辑：附加信息：出于测试目的，我使用了 es5-shim 测试站点，该站点可以在上面的 es5-shim 链接中找到，我在站点中包含了对breeze.debug.js 的引用，并且该站点抛出了完全相同的内容例外。我一直在研究这个，但我还没有进展。再次，任何帮助将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:31:45.360

好的，这应该在 v 1.1.3 中修复。如果没有请回帖。

# android - setHint 可能存在的错误

> ID：14984065
> 
> 赞同：0
> 
> 时间：2013-02-20T15:47:00.417
> 
> 标签：android, android-edittext

我有一个班级的tabhost。当我在代码中更改一些 xml 的组件（如背景按钮、列表，甚至编辑文本的文本）时，这可以完美地工作。但是当我尝试改变edittext的提示时，它并没有改变。

```
switch (currentScreen) {
    case Constants.SHOPS:
         edit_text.setText(R.string.search_shops); // It works
         fillListShops();
         adaptador = new AdaptadorListas<T>(this, list);
         break;
    case Constants.ROUTES:
         edit_text.setHint(R.string.search_shops); // It doesn't work
         fillListRoutes();
         adaptador = new AdaptadorListas<T>(this, lista);
         break; 
```

}

# java - 如何告诉 eclipse 在不更改 pom.xml 的情况下不验证 pom.xml？

> ID：14984068
> 
> 赞同：2
> 
> 时间：2013-02-20T15:47:08.293
> 
> 标签：java, eclipse, maven, m2eclipse, jacoco

我的 pom.xml 很好，我可以毫无问题地进行 mvn clean install，但是 eclipse 将它涂成红色并抱怨：

```
Description Resource    Path    Location    Type
Plugin execution not covered by lifecycle configuration: org.jacoco:jacoco-maven-plugin:0.5.10.201208310627:prepare-agent (execution: default, phase: initialize)   pom.xml /super-project  line 11 Maven Project Build Lifecycle Mapping Problem 
```

我如何告诉 eclipse 忘记 pom.xml，换句话说，不要尝试编译、验证它等，所以我的项目没有错误并且它没有被涂成红色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:59:22.153

过去我遇到过类似的问题，eclipse 不喜欢 pom.xml 中的插件。我找到的解决方案是使用插件管理。我自己的代码中的一个例子是：

```
<pluginManagement>
    <plugins>
        <!--This plugin's configuration is used to store Eclipse m2e settings 
            only. It has no influence on the Maven build itself. -->
        <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <pluginExecution>
                            <pluginExecutionFilter>
                                <groupId>
                                    org.apache.maven.plugins
                                </groupId>
                                <artifactId>
                                    maven-dependency-plugin
                                </artifactId>
                                <versionRange>
                                    [2.6,)
                                </versionRange>
                                <goals>
                                    <goal>
                                        copy-dependencies
                                    </goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <ignore />
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement> 
```

这很混乱，但它也可以防止未来的开发人员遇到同样的问题。

如果您运行的是 4.2 Juno，[官方 m2e 页面可以忽略它们](https://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T21:59:29.713

这对我很有效[https://github.com/AdoptOpenJDK/javacountdown/issues/66](https://github.com/AdoptOpenJDK/javacountdown/issues/66)。日食问题！

# jquery-isotope - jquery同位素内容周围的流体容器

> ID：14984079
> 
> 赞同：0
> 
> 时间：2013-02-20T15:47:37.040
> 
> 标签：jquery-isotope

我试图将我的父 div 宽度扩展到其他 div 内容但没有成功。我的“外容器”需要延伸到他的内容：

这是我的问题的一个小提琴示例（当我调整网络浏览器的大小时，“外部容器”不会拉伸）：http: [//fiddle.jshell.net/tj8p5/](http://fiddle.jshell.net/tj8p5/)

对不起我的英语，我是法国人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:00:18.807

我已经[更新了您的小提琴](http://fiddle.jshell.net/tj8p5/2/)，并且不得不为您做出一些假设：

*   您的页眉和页脚可能应该包含在您的*外部容器中*，以便它们保持流畅的宽度。
*   从容器中删除了所有“宽度：100%”，因为这是使用 div 元素自动完成的（div 元素使用*display:block*，它已经具有 100% 的宽度）。
*   你的*bbq 容器*的最小宽度太大，所以我减少了这个数量。

# html - 3 列 - 带有溢流元件的中心柱流体

> ID：14984084
> 
> 赞同：1
> 
> 时间：2013-02-20T15:47:56.197
> 
> 标签：html, css

我有一个三栏网站。外柱是固定的，中柱是流动的。我用这个实现了

```
<div style="display:table">
    <div style="display:table-row">
        <div style="display:table-cell">
        </div>
        <div style="display:table-cell">
        </div>
        <div style="display:table-cell">
        </div>
    </div>
</div> 
```

（完整代码参见 jsfiddle）

现在我在中间列有一个可能变得太宽的元素。我用一个隐藏这个

```
overflow:auto 
```

所以会有滚动条。

**编辑：**
不起作用抱歉： http: [//jsfiddle.net/WtWCC/](http://jsfiddle.net/WtWCC/)
确实起作用：http: [//jsfiddle.net/WtWCC/2/](http://jsfiddle.net/WtWCC/2/)

Chrome 的描述：
在提供的示例中，单击“+”直到出现滚动条（单击的次数越多，问题越明显）。带有滚动条的视图是我喜欢的：2 个固定列可见，中间列最大化。

现在调整浏览器的大小。（或 jsfiddle 窗格）

现在的问题是中间列变得更大了。右列被隐藏。

有人知道这个问题的解决方案吗？

提前致谢。

编辑：所描述的行为在 Chrome 中。在 IE 和 Firefox 中，Overflow:auto 根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:06:42.793

您的 JSFiddle 有问题，如果这对您没有帮助，请见谅。

HTML：

```
<div class="wrap">
  <div class="left">
    Leftees
  </div>
  <div class="right">
    Righties
  </div>
  <div class="middle">
    Middies
  </div>
</div> 
```

CSS：

```
.wrap{
    width:100%;
    overflow:hidden;
}
.left{
    float:left;
    background:red;
}
.middle{
    overflow:hidden;
    background:green;
}
.right{
    float:right;
    background:yellow;
} 
```

[jsfiddle](http://jsfiddle.net/WtWCC/1/%20%22jsfiddle)

# vb.net - vb.net 中的登录表单-指向不同的表单

> ID：14984092
> 
> 赞同：-1
> 
> 时间：2013-02-20T15:48:12.173
> 
> 标签：vb.net, oracle

在连接到 Oracle 数据库的 VB.Net 的登录表单中。有没有办法插入 If 语句以将不同的用户引导到不同的表单。例如，会计主页的会计或驱动程序主页的驱动程序尽管所有 ID 和密码都在数据库中的一个表中。

数据库中有一个 POSITION 字段，我想用它来区分不同用户的访问级别。

这是到目前为止工作的代码：

```
Dim conn As New OleDb.OleDbConnection

conn.ConnectionString = _
"Provider=msdaora;Data Source=orabis;User Id=112221800;Password=112221800;"

conn.Open()

Dim parmuser As New OleDb.OleDbParameter

parmuser.OleDbType = OleDb.OleDbType.Char

parmuser.Value = txtStaffNo.Text

Dim parmpass As New OleDb.OleDbParameter

parmpass.OleDbType = OleDb.OleDbType.Char

parmpass.Value = txtPassword.Text

Dim cmd As New OleDbCommand

cmd.Connection = conn

cmd = New OleDbCommand("select STAFFID,PASSWORD from STAFF where STAFFID ='" & txtStaffNo.Text & "' and PASSWORD ='" & txtPassword.Text & "'", conn)

cmd.CommandType = CommandType.Text

Dim dr As OleDb.OleDbDataReader

dr = cmd.ExecuteReader()

If txtStaffNo.Text = "" Or txtPassword.Text = "" Then

    MessageBox.Show("You have not entered any values!", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error)

ElseIf dr.Read() Then

    txtStaffNo.Text = dr("STAFFID")

    txtPassword.Text = dr("PASSWORD")

    MsgBox("Access Allowed")

    CustOption.Show()
    Me.Hide()

Else

    'MessageBox.Show("Wrong Username and Password", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    'intCount = intCount + 1

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:57:36.787

对于网站/应用程序使用

```
switch (position){
case "Admin":
    Server.Transfer("AdminHomePage.aspx";
    brea;
case "blabla":
//and so on
default:
    Server.Transfer("Home.aspx"

} 
```

对于 windows 窗体，答案是相似的。但是您可以选择一种形式。IE`new FormAdminHome().ShowDialog()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:59:21.383

我认为你回答了你自己的问题。只需将 POSITION 添加到您的查询中，然后说如下内容：

```
If dr("POSITION")="JANITOR" Then
    //Go to janitor site
ElseIf ...
    ...
End If 
```

就像其他人所说的那样，你真的不应该像那样传递密码。您返回密码实际上是有原因的吗？如果查询甚至返回用户“已通过身份验证”的任何内容，那为什么还要返回呢？

# maven - 测试卡在配置 TestNG 上：TestNG652Configurator

> ID：14984093
> 
> 赞同：3
> 
> 时间：2013-02-20T15:48:13.343
> 
> 标签：maven, junit, testng

我的项目中有一些`TestNG`测试与`jUnit`测试一起运行。每个人都和平共处，事情按预期运行，直到有一天，事情不是一直在工作，而是在某些时候工作。

当运行`mvn clean install`测试达到

```
Configuring TestNG with: TestNG652Configurator 
```

并被卡住。从那以后似乎什么都没有发生。

当运行`mvn -X clean install`测试到达完全相同的点而没有问题（顶部没有错误）并且拒绝进一步移动时。

我在用

```
 <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.8</version>
    </dependency> 
```

和

```
 </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency> 
```

请问这里会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:12:04.790

我从未见过 Surefire（运行测试的插件）从 JUnit 和 TestNG 开箱即用地运行测试，尽管它应该这样做。

您可以通过强制提供程序来强制确保运行 JUnit 和 TestNG，如此[处](http://maven.apache.org/surefire/maven-surefire-plugin/examples/providers.html)所述。例如，以下将强制 TestNG 和 JUnit 4.7

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.13</version>
  <dependencies>
    <dependency>
      <groupId>org.apache.maven.surefire</groupId>
      <artifactId>surefire-junit47</artifactId>
      <version>2.13</version>
    </dependency>
    <dependency>
      <groupId>org.apache.maven.surefire</groupId>
      <artifactId>surefire-testng</artifactId>
      <version>2.13</version>
    </dependency>
  </dependencies>
</plugin> 
```

可能影响结果的另一件事是您是否已将 TestNG 配置为运行一些测试组。

# php - 使用 PHP 防止 mySQL 数据库中的重复条目

> ID：14984094
> 
> 赞同：-1
> 
> 时间：2013-02-20T15:48:13.530
> 
> 标签：php, mysql, wordpress, duplicates, contact-form

我有一个将所有字段提交到 mySQL 数据库的联系表单，一切正常。但是，如果电子邮件地址字段已提交，我希望它向发件人发送错误消息。（当然不要提交数据）。

最简单最无痛的方法是什么？

我的数据库名称是 wordpress

该表的名称是 wpcf7dbplugin_submits

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:49:57.073

更改表并`UNIQUE`在列上添加约束。例如，

```
ALTER TABLE wpcf7dbplugin_submits 
ADD CONSTRAINT uq_email UNIQUE (emailAdd) 
```

如果您插入的电子邮件已经存在于表格中，服务器将抛出错误。

# reporting-services - 运行 SSRS 报告需要几分钟时间

> ID：14984096
> 
> 赞同：1
> 
> 时间：2013-02-20T15:48:17.593
> 
> 标签：reporting-services

我有非常简单的 SSRS 报告，运行存储过程需要不到 1 秒的时间。当我将报告上传到本地服务器时，报告工作得很好。但是在远程服务器 (SQL Server 2012) 上运行报告需要 5-7 分钟。我在远程服务器上的其他报告运行良好。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:53:20.857

您应该使用 SQL Profiler 或 ReportServer DB 来检查哪个进程较慢。您可以使用此 SQL 进行检查：

```
USE ReportServer
SELECT ReportPath,
       RequestType,
       Format,
       ReportAction,
       TimeDataRetrieval,
       TimeProcessing,
       TimeRendering,
       DATEDIFF(S, TimeStart, TimeEnd) AS TotalSeconds
FROM ExecutionLog2 
```

其中 TimeDataRetrieval 是存储过程执行时间 + 向 ReportServer 发送时间，TimeProcessing - 它是在报表端用于分组、排序等的时间，而 TimeRendering 是用于呈现的时间。

然后，当您知道执行速度慢的原因时 - 您可以考虑修复方法（修复存储过程、添加索引、更改报告结构等）。

我遇到了导致参数嗅探（[关于参数嗅探](https://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/)）的问题，为了防止这种情况，您不应在查询中使用输入参数，如下所示：

```
CREATE PROCEDURE [dbo].[usp_MySP] @InputValue INT
AS
BEGIN
    DECLARE @SomeValue INT;
    SET @SomeValue = @InputValue;

    SELECT SomeColumn 
    FROM SomeTable
    WHERE SomeColumn = @SomeValue
END 
```

# android - 如何使用 textwatcher 控制 edittext 中的文本

> ID：14984100
> 
> 赞同：0
> 
> 时间：2013-02-20T15:48:23.663
> 
> 标签：android, android-edittext, textwatcher

所以我试图让用户插入一些格式应该是 xx.xxxx 的文本。为此，我正在使用 textwatcher 类。这是我的课：

```
edittext.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            EditText edittext = (EditText) findViewById(R.id.my_edit);
            if(edittext.getText().length()==2)edittext.setText(edittext.getText().toString()+".");

        }
    }); 
```

所以我基本上只是添加'。如果编辑后的长度为2。但是在我这样做之后，它将我的光标设置为文本字段的开头，当我尝试删除点时，它只是重新创建它，因为长度再次为2。我知道有一些解决方案，但似乎我可以今天不知道：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:58:29.037

您将需要使用`EditText.append`而不是`EditText.setText`在edittext处移动光标：

```
 Override
    public void afterTextChanged(Editable s) {

        if(edittext.getText().length()==2){

            // append dot to edittext
            edittext.append(".");
            // move cursor at end position in EditText
            edittext.setSelection(edittext.getText().length());
          }
    } 
```

# postgresql - 视图中的 Postgres 复杂选择

> ID：14984109
> 
> 赞同：0
> 
> 时间：2013-02-20T15:48:45.563
> 
> 标签：postgresql, select, view

我有这个完美的选择子句：

```
SELECT 
    "Aspectos"."ID" AS "Aspecto Normativo ID", 
    "Aspectos"."Aspecto" AS "Aspecto Normativo",        
    "Fatores"."ID", "Fatores"."Fator" AS "Fator Normativo",
    "Diagnostico"."Vinculo_Final", 
    "Fatores_1"."ID", 
    "Fatores_1"."Fator" AS "Fator Determinativo", 
    "Aspectos_1"."ID" AS "Aspecto Determinativo ID", 
    "Aspectos_1"."Aspecto" AS "Aspecto Determinativo", 
    Count("Itens"."ID") AS "No Itens", 
    Count("Itens"."ID") AS "Pri"
FROM "Diagnostico" INNER JOIN ("Aspectos" AS "Aspectos_1" 
INNER JOIN (("Fontes" INNER JOIN "Itens" ON "Fontes"."ID" = "Itens"."Fonte") 
INNER JOIN ("Fatores" AS "Fatores_1" 
INNER JOIN ("Aspectos" 
INNER JOIN ("Vinculos" 
INNER JOIN "Fatores" 
ON "Vinculos"."Fator_Normativo" = "Fatores"."ID") 
ON ("Aspectos"."ID" = "Fatores"."Aspecto") 
AND ("Aspectos"."ID" = "Fatores"."Aspecto")) 
ON "Fatores_1"."ID" = "Vinculos"."Fator_Determinativo") 
ON "Itens"."ID" = "Vinculos"."Item") 
ON "Aspectos_1"."ID" = "Fatores_1"."Aspecto") 
ON "Diagnostico"."ID" = "Vinculos"."Diagnostico_ID"
GROUP BY "Aspectos"."ID", "Aspectos"."Aspecto", 
          "Fatores"."ID", "Fatores"."Fator", 
          "Diagnostico"."Vinculo_Final", 
          "Fatores_1"."ID", 
          "Fatores_1"."Fator", 
          "Aspectos_1"."ID", 
          "Aspectos_1"."Aspecto"
ORDER BY  "Aspectos"."ID", "Aspectos_1"."ID", 
         "Fatores"."Fator", "Fatores_1"."Fator"; 
```

但是，当我尝试使用相同的选择创建视图时，我得到了 thuis 错误：

```
ERROR: column "ID" specified more than one time 
```

任何人都可以帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:40:44.393

你有`"Fatores"."ID"`（第 4 行）和`"Fatores_1"."ID"`（第 6 行）。给他们不同的别名。

对于此类复杂查询，建议在语句中的每行中仅包含 1（一）列，以获得更好的可见性。此外，建议始终为列提供别名。

# r - 转换不会在 ggplot2 中转换线段

> ID：14984110
> 
> 赞同：2
> 
> 时间：2013-02-20T15:48:52.807
> 
> 标签：r, ggplot2

我正在尝试使用一些线段来注释绘图。x 轴最好通过对数转换显示。我正在使用`ggplot2`which 处理转换，这也意味着我不应该转换到我的线段的位置。但是当我应用转换时，线段会消失（嗯 - 由于转换，它们不再“适合”到绘图窗口中）。关于如何让他们“跟随”转型的任何建议？

最小的例子：

```
library(ggplot2)
## Base plot:
B <- ggplot(data = data.frame(X = 10^(1:10), Y = 1:10),
            aes(x = X, y = Y)) + geom_point()
## Generate segments: 
S1 <- geom_segment(x = 1000, xend = 1000,
                   y = 3, yend = 5)
S2 <- geom_segment(x = 20, xend = 2.5e9,
                   y = 8, yend = 7)
## Generate transformation:
T <- scale_x_continuous(trans = "log") 
```

比较以下内容：

```
B               # Basic plot
B + T           # Basic plot, transformed
B + S1 + S2     # Basic, untransformed, with segments
B + S1 + S2 + T # Should be transformed with segments: segments missing 
```

我知道我可以只转换段的位置，但我真的更愿意找到一个更`ggplot2`风格的解决方案！

破解解决方案：

```
S3 <- geom_segment(x = log(1000), xend = log(1000),
                   y = 3, yend = 5)
S4 <- geom_segment(x = log(20), xend = log(2.5e9),
                   y = 8, yend = 7)
B + S1 + S2
B + S3 + S4 + T #Fine, but not elegant. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:49:02.323

不确定我展示的情节是否是您所期望的。但如果是，下面的解释是有效的。

在`ggplot2`上执行转换`aesthetics`。并且在绘图之前首先转换数据（或进行任何拟合，例如：geom_smooth 等。在转换后的数据上完成）。

因此，如果您希望日志转换反映在您的段上，则必须将其环绕`aes`为：

```
S1 <- geom_segment(aes(x=1000, xend=1000, y=3, yend=5))
S2 <- geom_segment(aes(x=20, xend=2.5e9, y=8, yend=7)) 
```

顺便说一句，您的转换应该是**log10，而不是 log**：

```
T <- scale_x_continuous(trans = "log10") 
```

现在，如果你绘制`B + S1 + S2 + T`：

![ggplot2_aes](../Images/730bca95928e9530aff55a73623f3452.png)

更进一步：使用以下方法将您`B+S1+S2+T`的`S1`和`S2`修改的与我的进行比较：

```
ggplot_build(B+S1+S2)$data # and 
ggplot_build(B+S1+S2+T)$data 
```

看到美学得到相应的转变。

# php - 全局覆盖 symfony2.1 上的 NotBlank 约束消息？

> ID：14984112
> 
> 赞同：5
> 
> 时间：2013-02-20T15:48:58.373
> 
> 标签：php, symfony, constraints, messages

如何在 Symfony 2.1 应用程序中全局覆盖`NotBlank`约束消息？`This value should not be blank`

我已经尝试过使用`validators.en.yml`文件，但这只有在我将`validation.yml`文件中的每个 NotBlank 约束设置为常量时才有效`not.blank.field`- 但修改太多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T20:26:21.303

要替换在应用程序级别触发约束`This value should not be blank`时显示的消息，只需在正确的位置创建正确的翻译文件。`NotBlank`

为简单起见，您的语言环境似乎是英语 (en)，因此创建文件`app/Resources/translations/validators.en.yml`并在其中写入以下行：

```
# app/Resources/translations/validators.en.yml
This value should not be blank.: Y U NO SET THE VALUE?! 
```

第一部分必须与您要翻译的消息完全匹配（在您的情况下`This value should not be blank.`）。

如果您有自定义文件/文件夹层次结构，只需在`<kernel root directory>/Resources/translations`.

如果您想对另一种语言（例如法语）具有相同的行为，只需在同一文件夹中创建相应的文件：

```
# app/Resources/translations/validators.fr.yml
This value should not be blank.: La valeur doit etre specifiee. 
```

**添加新文件后**不要忘记清除缓存！****

 **为什么它有效？因为 Symfony2 按位置优先翻译文件：http: [//symfony.com/doc/current/book/translation.html#translation-locations-and-naming-conventions](http://symfony.com/doc/current/book/translation.html#translation-locations-and-naming-conventions)**

# android - 远程服务是否可以从 Activity 引用成员类实例

> ID：14984113
> 
> 赞同：1
> 
> 时间：2013-02-20T15:49:04.207
> 
> 标签：android

我指的是这个优秀的教程[Android Architecture Tutorial: Developing an App with a Background Service (using IPC)](http://mindtherobot.com/blog/37/android-architecture-tutorial-developing-an-app-with-a-background-service-using-ipc/)，它讨论了在单独的进程中运行服务。

在远程服务中，有一种方法可以删除从 Activity 传递的侦听器。

## 在远程服务中

```
@Override
public void removeListener(TweetCollectorListener listener) 
    throws RemoteException {

    synchronized (listeners) {
        listeners.remove(listener);
    }
} 
```

## 活动中

```
private TweetCollectorListener.Stub collectorListener = new TweetCollectorListener.Stub() {
    @Override
    public void handleTweetsUpdated() throws RemoteException {
        updateTweetView();
    }
};

@Override
protected void onDestroy() {
    super.onDestroy();

    try {
        api.removeListener(collectorListener);
        unbindService(serviceConnection);
    } catch (Throwable t) {
        // catch any issues, typical for destroy routines
        // even if we failed to destroy something, we need to continue destroying
        Log.w(TAG, "Failed to unbind from the service", t);
    }

    Log.i(TAG, "Activity destroyed");
} 
```

我怀疑`removeListener`它将正常工作。我通过在远程服务中使用以下代码进行了快速测试。

## 在远程服务中

```
@Override
public void removeListener(TweetCollectorListener listener)
        throws RemoteException {

    synchronized (listeners) {
        Log.i("CHEOK", "before removing listner -> " + listeners.size());
        listeners.remove(listener);
        Log.i("CHEOK", "after removing listner -> " + listeners.size());
    }
} 
```

我得到以下结果。

```
before removing listner -> 1
after removing listner -> 1 
```

我的猜测是，即使 Activity 传递了`TweetCollectorListener.Stub`during`addListener`和的同一个实例，但是在服务端和构造了`removeListner`2 个不同的实例。`TweetCollectorListener``addListener``removeListner`

我可以通过以下日志进一步确认这一点。

```
Activity calls service's addListener, by passing in com.mindtherobot.samples.tweetservice.TweetViewActivity$2@427c1190
In service's addListener, TweetCollectorListener is com.mindtherobot.samples.tweetservice.TweetCollectorListener$Stub$Proxy@427d68b0
Activity calls service's removeListener, by passing in com.mindtherobot.samples.tweetservice.TweetViewActivity$2@427c1190
In service's removeListener, TweetCollectorListener is com.mindtherobot.samples.tweetservice.TweetCollectorListener$Stub$Proxy@427d7188 
```

**那么，有什么办法可以从远程服务中删除监听器？有时，我想删除一个旧的监听器，并附加新的监听器。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:06:29.290

在远程服务中，为了比较`TweetCollectorListener`对象，需要使用底层`Binder`对象，如下：

```
@Override
public void removeListener(TweetCollectorListener listener)
    throws RemoteException {

    synchronized (listeners) {
        Log.i("CHEOK", "before removing listner -> " + listeners.size());
        for (TweetCollectorListener tcl : listeners) {
            if (tcl.asBinder() == listener.asBinder()) {
                listeners.remove(tcl);
                break;
            }
        }
        Log.i("CHEOK", "after removing listner -> " + listeners.size());
    }
} 
```

# jquery - HTML 替换脚本仅替换第一个术语

> ID：14984116
> 
> 赞同：2
> 
> 时间：2013-02-20T15:49:09.007
> 
> 标签：jquery, replace

我有这个脚本在日语目录上运行，用于替换页面上的英文术语，以便为不可自定义的术语添加博客插件。它工作得很好，但它似乎只是在第一次看到它时才替换它。

[http://www.martyregan.com/jp/blog/](http://www.martyregan.com/jp/blog/)

例如，您会在底部的博客文章中看到 View Post、Tags、Feb 仍然是英文。

这是脚本：

```
$(document).ready(function(){
            $('#pb_sidebar, #left-sidebar-inner, #pb_body, #main-content-inner, #sidebar-archives').each(function(i){
$(this).html($(this).html().replace('Category List','ブログテーマ一覧'));
$(this).html($(this).html().replace('Tag List','タグ'));
})
    }) 
```

我怎样才能改变它，让它在它看到的任何地方都能抓住这个词？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:50:45.153

您需要将正则表达式与`/g`将重复的选项一起使用，否则`string.replace()`只会运行一次。

例如：

```
$(this).html($(this).html().replace(/Category List/g,'ブログテーマ一覧')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:02:19.000

顺便说一句，你真的用这种方法打击了 DOM。

考虑缓存 .html() 结果，然后在其上运行替换，首先，在将新文本放回 DOM 之前：

```
$(document).ready(function(){
    $('#pb_sidebar, #left-sidebar-inner, #pb_body, #main-content-inner, #sidebar-archives').each(function(i){
        var mycontent = $(this).html();
        mycontent = mycontent.replace(/Category List/g,'ブログテーマ一覧');
        mycontent = mycontent.replace(/Tag List/g,'タグ');
        $(this).html(mycontent);
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T15:52:02.193

据我所知，replace 是一个原生 JavaScript 函数。为了让它替换每一个出现，你必须使用你正在搜索的 RegEx 的 g 参数，例如 /searchstring/g 而不是“searchstring”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T15:52:42.860

尝试在替换中添加全局修饰符：

```
$(this).html($(this).html().replace(/Category List/g,'ブログテーマ一覧'));
$(this).html($(this).html().replace(/Tag List/g,'タグ')); 
```

# java - 散列和取消散列？

> ID：14984117
> 
> 赞同：0
> 
> 时间：2013-02-20T15:49:13.863
> 
> 标签：java, hash, bcrypt

是否可以在 java 中使用 bcrypt 进行散列并再次取消散列？甚至可能吗？我正在尝试一些新的东西，但我对 Unhashing （如果可能的话）一无所知。如果可能的话，有人能给我举个例子吗？

如果密钥已知，是否存在可逆的哈希算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:52:14.407

根据定义，散列是一种单向操作。您无法从其缓存中检索源值。实际上可以有许多值产生相同的散列但是理论上不应该存在将散列转换为值的算法（根据定义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:56:51.730

如果您正在谈论覆盖 hashCode()，如果您的对象可以有超过 2^32 个状态，那么就不可能进行任何可逆哈希。只有 2^32 个可能的哈希值（因为 hashCode() 返回 int），所以只能表示 2^32 个不同的状态。

# python - python pandas删除重复的列

> ID：14984119
> 
> 赞同：225
> 
> 时间：2013-02-20T15:49:17.780
> 
> 标签：python, pandas

从数据框中删除重复列的最简单方法是什么？

我正在通过以下方式读取具有重复列的文本文件：

```
import pandas as pd

df=pd.read_table(fname) 
```

列名是：

```
Time, Time Relative, N2, Time, Time Relative, H2, etc... 
```

所有时间和时间相对列都包含相同的数据。我想：

```
Time, Time Relative, N2, H2 
```

我在删除、删除等方面的所有尝试，例如：

```
df=df.T.drop_duplicates().T 
```

导致唯一值索引错误：

```
Reindexing only valid with uniquely valued index objects 
```

抱歉成为熊猫菜鸟。任何建议，将不胜感激。

* * *

**额外细节**

Pandas 版本：0.9.0
Python 版本：2.7.3
Windows 7
（通过 Pythonxy 2.7.3.0 安装）

数据文件（注意：在真实文件中，列用制表符分隔，这里用4个空格分隔）：

```
Time    Time Relative [s]    N2[%]    Time    Time Relative [s]    H2[ppm]
2/12/2013 9:20:55 AM    6.177    9.99268e+001    2/12/2013 9:20:55 AM    6.177    3.216293e-005    
2/12/2013 9:21:06 AM    17.689    9.99296e+001    2/12/2013 9:21:06 AM    17.689    3.841667e-005    
2/12/2013 9:21:18 AM    29.186    9.992954e+001    2/12/2013 9:21:18 AM    29.186    3.880365e-005    
... etc ...
2/12/2013 2:12:44 PM    17515.269    9.991756+001    2/12/2013 2:12:44 PM    17515.269    2.800279e-005    
2/12/2013 2:12:55 PM    17526.769    9.991754e+001    2/12/2013 2:12:55 PM    17526.769    2.880386e-005
2/12/2013 2:13:07 PM    17538.273    9.991797e+001    2/12/2013 2:13:07 PM    17538.273    3.131447e-005 
```

* * *

## 回答 #1

> 赞同：613
> 
> 时间：2016-11-05T06:15:37.200

这是基于重复**列名**删除列的单行解决方案：

```
df = df.loc[:,~df.columns.duplicated()] 
```

**这个怎么运作：**

假设数据框的列是`['alpha','beta','alpha']`

`df.columns.duplicated()`返回一个布尔数组：每列的一个`True`或`False`。如果是，`False`则列名在该点之前是唯一的，如果是，`True`则列名在前面重复。例如，使用给定的示例，返回值将是`[False,False,True]`.

`Pandas`允许使用布尔值进行索引，从而仅选择`True`值。由于我们要保留不重复的列，我们需要翻转上述布尔数组（即`[True, True, False] = ~[False,False,True]`）

最后，`df.loc[:,[True,True,False]]`使用上述索引功能仅选择非重复列。

**注意**：上面只检查列名，*而不是*列值。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-02-20T17:06:21.030

听起来您已经知道唯一的列名。如果是这样的话，那就行了`df = df['Time', 'Time Relative', 'N2']`。

如果没有，您的解决方案应该有效：

```
In [101]: vals = np.random.randint(0,20, (4,3))
          vals
Out[101]:
array([[ 3, 13,  0],
       [ 1, 15, 14],
       [14, 19, 14],
       [19,  5,  1]])

In [106]: df = pd.DataFrame(np.hstack([vals, vals]), columns=['Time', 'H1', 'N2', 'Time Relative', 'N2', 'Time'] )
          df
Out[106]:
   Time  H1  N2  Time Relative  N2  Time
0     3  13   0              3  13     0
1     1  15  14              1  15    14
2    14  19  14             14  19    14
3    19   5   1             19   5     1

In [107]: df.T.drop_duplicates().T
Out[107]:
   Time  H1  N2
0     3  13   0
1     1  15  14
2    14  19  14
3    19   5   1 
```

你可能有一些特定于你的数据的东西把它弄乱了。如果您可以向我们提供有关数据的更多详细信息，我们可以提供更多帮助。

**编辑：** 就像安迪说的那样，问题可能出在重复的列标题上。

对于示例表文件“dummy.csv”，我编写了：

```
Time    H1  N2  Time    N2  Time Relative
3   13  13  3   13  0
1   15  15  1   15  14
14  19  19  14  19  14
19  5   5   19  5   1 
```

using`read_table`提供独特的列并正常工作：

```
In [151]: df2 = pd.read_table('dummy.csv')
          df2
Out[151]:
         Time  H1  N2  Time.1  N2.1  Time Relative
      0     3  13  13       3    13              0
      1     1  15  15       1    15             14
      2    14  19  19      14    19             14
      3    19   5   5      19     5              1
In [152]: df2.T.drop_duplicates().T
Out[152]:
             Time  H1  Time Relative
          0     3  13              0
          1     1  15             14
          2    14  19             14
          3    19   5              1 
```

如果您的版本不允许，您可以组合一个解决方案以使它们独一无二：

```
In [169]: df2 = pd.read_table('dummy.csv', header=None)
          df2
Out[169]:
              0   1   2     3   4              5
        0  Time  H1  N2  Time  N2  Time Relative
        1     3  13  13     3  13              0
        2     1  15  15     1  15             14
        3    14  19  19    14  19             14
        4    19   5   5    19   5              1
In [171]: from collections import defaultdict
          col_counts = defaultdict(int)
          col_ix = df2.first_valid_index()
In [172]: cols = []
          for col in df2.ix[col_ix]:
              cnt = col_counts[col]
              col_counts[col] += 1
              suf = '_' + str(cnt) if cnt else ''
              cols.append(col + suf)
          cols
Out[172]:
          ['Time', 'H1', 'N2', 'Time_1', 'N2_1', 'Time Relative']
In [174]: df2.columns = cols
          df2 = df2.drop([col_ix])
In [177]: df2
Out[177]:
          Time  H1  N2 Time_1 N2_1 Time Relative
        1    3  13  13      3   13             0
        2    1  15  15      1   15            14
        3   14  19  19     14   19            14
        4   19   5   5     19    5             1
In [178]: df2.T.drop_duplicates().T
Out[178]:
          Time  H1 Time Relative
        1    3  13             0
        2    1  15            14
        3   14  19            14
        4   19   5             1 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-10-06T03:16:35.100

对于大型 DataFrame，转置效率低下。这是一个替代方案：

```
def duplicate_columns(frame):
    groups = frame.columns.to_series().groupby(frame.dtypes).groups
    dups = []
    for t, v in groups.items():
        dcols = frame[v].to_dict(orient="list")

        vs = dcols.values()
        ks = dcols.keys()
        lvs = len(vs)

        for i in range(lvs):
            for j in range(i+1,lvs):
                if vs[i] == vs[j]: 
                    dups.append(ks[i])
                    break

    return dups 
```

像这样使用它：

```
dups = duplicate_columns(frame)
frame = frame.drop(dups, axis=1) 
```

**编辑**

一个内存高效的版本，将 nans 视为任何其他值：

```
from pandas.core.common import array_equivalent

def duplicate_columns(frame):
    groups = frame.columns.to_series().groupby(frame.dtypes).groups
    dups = []

    for t, v in groups.items():

        cs = frame[v].columns
        vs = frame[v]
        lcs = len(cs)

        for i in range(lcs):
            ia = vs.iloc[:,i].values
            for j in range(i+1, lcs):
                ja = vs.iloc[:,j].values
                if array_equivalent(ia, ja):
                    dups.append(cs[i])
                    break

    return dups 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-04-09T05:53:28.073

如果我没记错的话，下面的内容是在没有转置解决方案的内存问题的情况下完成的，并且行数少于 @kalu 的函数，保留了任何类似命名的列中的第一个。

```
Cols = list(df.columns)
for i,item in enumerate(df.columns):
    if item in df.columns[:i]: Cols[i] = "toDROP"
df.columns = Cols
df = df.drop("toDROP",1) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-11-19T20:10:52.417

看起来你走在正确的道路上。这是您正在寻找的单线：

```
df.reset_index().T.drop_duplicates().T 
```

但是由于没有产生引用错误消息的示例数据框`Reindexing only valid with uniquely valued index objects`，因此很难准确地说出什么可以解决问题。如果恢复原始索引对您很重要，请执行以下操作：

```
original_index = df.index.names
df.reset_index().T.drop_duplicates().reset_index(original_index).T 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-09-30T00:52:09.950

请注意，Gene Burinsky 的答案（在撰写所选答案时）保留了每个重复列的第一个。保留最后一个：

```
df=df.loc[:, ~df.columns[::-1].duplicated()[::-1]] 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-11-17T10:11:50.643

@kalu 的答案的更新，它使用了最新的熊猫：

```
def find_duplicated_columns(df):
    dupes = []

    columns = df.columns

    for i in range(len(columns)):
        col1 = df.iloc[:, i]
        for j in range(i + 1, len(columns)):
            col2 = df.iloc[:, j]
            # break early if dtypes aren't the same (helps deal with
            # categorical dtypes)
            if col1.dtype is not col2.dtype:
                break
            # otherwise compare values
            if col1.equals(col2):
                dupes.append(columns[i])
                break

    return dupes 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-10-01T07:38:42.977

尽管@Gene Burinsky 的答案很好，但它有一个潜在的问题，即重新分配的df 可能是原始df 的副本或视图。这意味着后续分配会`df['newcol'] = 1`生成`SettingWithCopy`警告并且可能会失败（[https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#why-does-assignment-fail-when-using-chained-indexing](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#why-does-assignment-fail-when-using-chained-indexing)）。以下解决方案可防止该问题：

```
duplicate_cols = df.columns[df.columns.duplicated()]
df.drop(columns=duplicate_cols, inplace=True) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-11-15T04:57:48.587

我遇到了这个问题，第一个答案提供的一个衬里效果很好。但是，我遇到了额外的复杂情况，即该列的第二个副本包含所有数据。第一个副本没有。

解决方案是通过切换否定运算符来拆分一个数据帧来创建两个数据帧。获得两个数据框后，我使用`lsuffix`. 这样，我就可以引用和删除没有数据的列。

-E

### 2021 年 3 月更新

@CircArgs 的后续帖子可能提供了一个简洁的单行代码来完成我在此处描述的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-23T07:02:44.413

第一步：- 阅读第一行，即所有列，删除所有重复的列。

第二步： - 最后只阅读那些列。

```
cols = pd.read_csv("file.csv", header=None, nrows=1).iloc[0].drop_duplicates()
df = pd.read_csv("file.csv", usecols=cols) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-13T01:59:46.897

下面的方法将识别重复列，以查看最初构建数据框的问题所在。

```
dupes = pd.DataFrame(df.columns)
dupes[dupes.duplicated()] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-25T02:17:01.140

以防万一有人仍在寻找如何在 Python 中的 Pandas 数据框的列中查找重复值的答案，我想出了这个解决方案：

```
def get_dup_columns(m):
    '''
    This will check every column in data frame 
    and verify if you have duplicated columns.
    can help whenever you are cleaning big data sets of 50+ columns 
    and clean up a little  bit for you
    The result will be a list of tuples showing what columns are duplicates
    for example
    (column A, Column C)
    That means that column A is duplicated with column C
    more info go to https://wanatux.com
    '''
    headers_list = [x for x in m.columns]
    duplicate_col2 = []
    y = 0
    while y <= len(headers_list)-1:
        for x in range(1,len(headers_list)-1):
            if m[headers_list[y]].equals(m[headers_list[x]]) == False:        
                continue
            else:
                duplicate_col2.append((headers_list[y],headers_list[x]))
        headers_list.pop(0)  
    return duplicate_col2 
```

你可以像这样转换定义：

```
duplicate_col = get_dup_columns(pd_excel) 
```

它将显示如下结果：

```
 [('column a', 'column k'),
 ('column a', 'column r'),
 ('column h', 'column m'),
 ('column k', 'column r')] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-29T18:12:47.250

我不确定为什么 Gene Burinsky 的回答对我不起作用。我得到了具有重复列的相同原始数据框。我的解决方法是强制选择 ndarray 并取回数据框。

```
df = pd.DataFrame(df.values[:,~df.columns.duplicated()], columns=df.columns[~df.columns.duplicated()]) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-01T11:05:32.870

简单的按列比较是按值检查**重复列的最有效方法（就****内存和时间**而言） 。这里有一个例子：

 **```
import numpy as np
import pandas as pd
from itertools import combinations as combi

df = pd.DataFrame(np.random.uniform(0,1, (100,4)), columns=['a','b','c','d'])
df['a'] = df['d'].copy()  # column 'a' is equal to column 'd'

# to keep the first
dupli_cols = [cc[1] for cc in combi(df.columns, r=2) if (df[cc[0]] == df[cc[1]]).all()]

# to keep the last
dupli_cols = [cc[0] for cc in combi(df.columns, r=2) if (df[cc[0]] == df[cc[1]]).all()]

df = df.drop(columns=dupli_cols) 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-04-30T08:56:53.173

按值删除重复列的快速简便的方法：

df = df.T.drop_duplicates().T

更多信息：[Pandas DataFrame drop_duplicates 手册](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop_duplicates.html)。**

# windows-phone-8 - 如何在 Windows Phone 8 设备上测试“.xap”文件？

> ID：14984123
> 
> 赞同：0
> 
> 时间：2013-02-20T15:49:24.523
> 
> 标签：windows-phone-8

请告诉我如何在 Windows Phone 8 设备上测试 .xap 文件？我可以在没有 SDK8 的情况下在 WP 8 上安装 XAP 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:55:53.943

通过在 WP8 上进行测试，我认为您的意思是将您的应用程序部署到物理设备上。为此，您需要两件事：

*   开发解锁你的手机。如果您已经注册了 MSDN 开发帐户，或者认识拥有
*   通过将手机插入 PC、PIN 解锁并将目标设置为 Device in，将您的应用程序部署到您的设备

# r - R中的谷歌运动图表时变行为

> ID：14984124
> 
> 赞同：0
> 
> 时间：2013-02-20T15:49:25.143
> 
> 标签：r, google-visualization, googlevis

有人能解释一下为什么当我点击“播放”时我会在同一天获得几个“积分”吗？每个日期都是独一无二的，所以对我来说没有意义。

我的代码是：

```
require(googleVis)
n = 100
dates = seq(Sys.Date(), by = 'day', length = n)
x = 10 * rnorm(n)
y = 3 * x + 1 + rnorm(n)
label = sample(LETTERS[1:4], size = n, replace = TRUE)

my.data = data.frame(Date = dates, x, y, label)
p = gvisMotionChart(my.data, idvar ='label', xvar = 'x', yvar = 'y', timevar= 'Date')
plot(p) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:28:32.663

每个标签（A、B、C、D）你会得到一个球。我的猜测是它是在日期之间插值的，你也可以从球在某些日期缓慢移动的方式中看到这一点。为了有球，你显然可以只拥有一个标签。

编辑。这些值是针对每个标签存在的日期范围内插的。请参阅下面的代码。标签的顺序是{D, A, A, A, ..., A, B, ...B, C, .. C, D, .. D}。D 球一直显示，并在前两个值之间缓慢插值。其余的球不会出现在他们的射程之外。似乎是处理缺失值的合理方法。

```
require(googleVis)
n = 100 
dates = seq(Sys.Date(), by = 'day', length = n)
x = 10 * rnorm(n)
label = rep(LETTERS[1:4], each=25)
label[1] = "D"

my.data = data.frame(Date = dates, x, y, label)
p = gvisMotionChart(my.data, idvar ='label', xvar = 'x', yvar = 'y', timevar= 'Date')
plot(p) 
```

编辑 2\. 意识到我在没有更改的情况下粘贴了原始代码片段。现在修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:42:50.473

斯文斯基是对的。它在 googleVis 图上描绘的点之间的运动。当它们移动到数据中的下一个标签时，您将看到多个点。

# php - PHP 会话未设置，没有错误

> ID：14984125
> 
> 赞同：-1
> 
> 时间：2013-02-20T15:49:40.597
> 
> 标签：php, ajax, session

我正在尝试在我的登录脚本中使用 PHP 设置会话，尽管它似乎没有设置任何会话。我将所有会话设置为写入路径“/”。我正在使用 AJAX 登录。

Start_secure_session 函数：

```
function start_secure_session() {
    $session_name = "CodeCluster";
    $http_only = true;
    $https = false;
    ini_set("session.use_only_cookies", 1);
    $cookie_parameters = session_get_cookie_params();
    session_set_cookie_params($cookie_parameters['lifetime'], "/", $cookie_parameters['domain'], $https, $http_only);
    session_name($session_name);
    session_start();
    session_regenerate_id(true);
} 
```

登录功能：

```
function login($email, $password, $database) {

try {

    $query = $database -> prepare("SELECT id, email, password, salt, activated FROM members WHERE email = :email LIMIT 1");

    $query -> execute(

        array(
            "email" => $email
        )

    );

    $info = $query -> fetch();

    if(strlen($info[0]) > 0) {

        if(account_is_locked($info['id'], $database)) {

            echo "<response>Your account is locked, please try again in two hours!</response>";

            exit();

        } else {

            if($info['activated'] == 1) {

                $password = hash('sha512', $password.$info['salt']);

                if($password === $info['password']) {

                    $_SESSION['cc_id'] = $info['id'];

                    $_SESSION['cc_email'] = $info['email'];

                    $_SESSION['cc_login_string'] = hash('sha512', $password.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']);

                    $last_login = time();

                    $query = $database -> prepare("UPDATE members SET last_login = :last_login WHERE id = :id LIMIT 1");

                    $query -> execute(

                        array(
                            "last_login" => $last_login,
                            "id"              => $info['id']
                        )

                    );

                    return true;

                    exit();

                } else {

                    $query = $database -> prepare("INSERT INTO login_attempts(user_id, ip_address, attempt_time) VALUES (:id, :ip, :time)");

                    $query -> execute(

                        array(

                            "id" => $info['id'],
                            "ip" => $_SERVER['REMOTE_ADDR'],
                            "time" => time()

                        )

                    );

                    echo "<response>Email or password is incorrect! Please check your credentials!</response>";

                    exit();

                }

            } else {

                echo "<response>Please activate your account! You should have received an email with an activation link!</response>";

                exit();

            }

        }

    } else {

        echo "<response>Account with those details does not exist!</response>";

        exit();

    }

} catch(PDOException $e) {

    echo "<response>We could not log you in; A report of the error has been sent to tech support!</response>";

    mail("codecluster.official@gmail.com", "CodeCluster Login Error", "Login Error; Timestamp @ " . time() . " ; IP Address : " . $_SERVER['REMOTE_ADDR'] . " ;\r\n" . $e);

    exit();

}

} 
```

is_user_logged_in 函数：

```
function is_user_logged_in($database) {

if(isset($_SESSION['cc_id'], $_SESSION['cc_email'], $_SESSION['cc_login_string'])) {

    try {

        foreach ($_SESSION as $session) {
            strip_tags($session);
        }

        $query = $database -> prepare("SELECT password FROM members WHERE id = :id AND email = :email LIMIT 1");

        $query -> execute(

            array(

                "id" => $_SESSION['cc_id'],
                "email" => $_SESSION['cc_email']

            )

        );

        if(strlen($query -> fetch()) > 0) {

            $password = $query -> fetch();

            $password = hash("sha512", $password.$_SERVER['REMOTE_ADDR'].$_SERVER['HTTP_USER_AGENT']);

            if($password == $_SESSION['cc_login_string']) {

                return true;

            } else {

                return false;

            }

        } else {

            return false;

        }

    } catch(PDOException $e) {

        mail("codecluster.official@gmail.com", "Code-Cluster Error", "Error occured whilst checking users logged in status; Timestamp @ ". time() . " ; \r\n" . $e);

        return false;

        exit();

    }

} else {
    return false;

}

 } 
```

当我这样做`if(is_user_logged_in($database)) {header("Location: home.php"); exit();}`时，它不会重定向我。我已经测试过了，似乎脚本找不到让我相信它们为空的会话。

这样做有什么原因吗？

编辑：我刚刚在 index.php 上的 $_SESSION 上做了一个 var_dump 并打印出来：array(3) { ["cc_id"]=> string(1) "6" ["cc_email"]=> string(24) "toxiclogic@hotmail.co.uk" ["cc_login_string"]=> string(128) "因为它是一个散列密码所以被编辑" }

编辑：“正在发送的标题”问题没有解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:52:39.477

`header()`在使用and之前不要输出任何东西`session_start()`。

还要检查空格。

将您的文件编码为`UTF-8 without BOM`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:23:19.473

在**调用**`session_start()`. _ 将其移到每页顶部的函数之外。

此外，请确保您对文件进行编码`UTF-8`而不使用`BOM`. 有关什么是 a 的更多信息`BOM`，[请参见此处](http://en.wikipedia.org/wiki/Byte_order_mark)。

# mysql - Mysql搜索引擎喜欢和匹配

> ID：14984130
> 
> 赞同：1
> 
> 时间：2013-02-20T15:50:00.353
> 
> 标签：mysql, sql-like, match-against

我讨厌数据库上的 4000 多个广告。我在字段标题、模型和描述上使用 FULLTEXT 索引。

在 MySQL 中，我将 ft_min_word_len 的值从 4 更改为 3。

实际上，并不是所有的结果都匹配。

这是一个简单的请求：

```
SELECT * ,
    MATCH (
        anno_modele, anno_titre, anno_desc
    )
    AGAINST (
        "330"
    ) AS relevance
FROM (
    `annonce`

JOIN possede
USING ( `anno_id` )
JOIN annonceur
USING ( `ann_id` )
JOIN cat_lang
USING ( `cat_id` )
JOIN lang_pays
USING ( `pays_id` )
JOIN marque
USING ( `mar_id` )
WHERE `mar_id` =867
AND MATCH (
    anno_modele, anno_titre, anno_desc
)
AGAINST (
    " 330"
 )
AND `cat_id`
IN (
    '3'
)
AND `anno_active` =1
AND `anno_mode` =1
AND `lang_pays`.`lang_id` = '3'
GROUP BY `anno_id`
ORDER BY `anno_prix` , `relevance` DESC
LIMIT 15 
```

这与我匹配 3 个结果。330 只是字段“anno_model”。

如果 if do a like `anno_modele LIKE '%330%'`，它会匹配我 9 个结果。

以下是 MATCH AGAINST 匹配的结果：

![在此处输入图像描述](../Images/9612ac6860564dca9926adeb9e4fb86c.png)

以下是 LIKE 匹配的结果

![在此处输入图像描述](../Images/22b946f2aca4c7b35e9b555abffd0b47.png)

如您所见，当它存在空格时...结果与 MACTH AGAINST 不匹配

是我要求的问题还是其他问题？

请帮帮我=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:32:34.560

尝试使用 * 通配符

```
...AGAINST ('*330*') ... 
```

# java - 具有RelativeLayout 的网格状布局

> ID：14984131
> 
> 赞同：0
> 
> 时间：2013-02-20T15:50:00.130
> 
> 标签：java, android, android-layout, android-relativelayout

我正在尝试创建一个不`GridView`使用仅 a的网格`RelativeLayout`。问题是根据我的日志，应该正确设置自定义视图（圆圈），但我只看到第一行和第一行。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mainLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams mParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    mainLayout.setLayoutParams(mParams);

    itemsLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams iParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    itemsLayout.setLayoutParams(iParams);       

    grid = new TTTGrid(this, "#ffdd00", _gridCount, _gridSize, false);

    TTTItem recent = null;
    RelativeLayout.LayoutParams rl;
    int k = 0;

    for(int i = 0; i < (_gridCount*_gridCount); i++) {
        circles[k] = new TTTItem(this, _gridSize, "black");
        circles[k].setId((int)k+100);
        circles[k].setOnClickListener(itemClickHandler);
        circleIDs[k] = circles[k].getId();

        rl = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        if(recent == null) {
            Log.d("DEBUGGY", "" + "recent == null on k: " + k + "/" + circles[k].getId());
            rl.addRule(RelativeLayout.BELOW);
        }
        else {                          
            //if(modulo(k,_gridCount) == 0 && k > 0) {
            if(k >= _gridCount) {
                Log.d("DEBUGGY", "" + "circle: " + k + "/" + circles[k].getId() + " set below: " + (k-_gridCount) + "/" + circles[k-_gridCount].getId());
                rl.addRule(RelativeLayout.BELOW, circles[k-_gridCount].getId());
            }
            else {
                Log.d("DEBUGGY", "" + "circle: " + k + "/" + circles[k].getId() + " set RIGHT OF: " + (k-1) + "/" + circles[k-1].getId());
                rl.addRule(RelativeLayout.RIGHT_OF, circles[k-1].getId());
            }
            //else {
            //  rl.addRule(RelativeLayout., recent.getId());
            //}                             
        }               

        recent = circles[k];
        itemsLayout.addView(circles[k], rl);            
        k++;
    }

    Toast.makeText(this, "circles: " + circles.length, Toast.LENGTH_SHORT).show();

    mainLayout.addView(grid);
    mainLayout.addView(itemsLayout);

    setContentView(mainLayout);
} 
```

好的，我将其更改为：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mainLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams mParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    mainLayout.setLayoutParams(mParams);

    itemsLayout = new RelativeLayout(this);
    RelativeLayout.LayoutParams iParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    //iParams.addRule(RelativeLayout.CENTER_IN_PARENT);
    itemsLayout.setLayoutParams(iParams);       

    grid = new TTTGrid(this, "#ffdd00", _gridCount, _gridSize, false);

    RelativeLayout.LayoutParams rl;
    for(int i=0; i < _gridCount; i++) {
        for(int j = 0; j < _gridCount; j++) {
            circles[i][j] = new TTTItem(this, _gridSize, "black");
            circles[i][j].setId((int)(j*i)+100);
            circles[i][j].setOnClickListener(itemClickHandler);
            circleIDs[i][j] = circles[i][j].getId();

            rl = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            rl.leftMargin = _gridSize*i;
            rl.topMargin = _gridSize*j;             

            itemsLayout.addView(circles[i][j], rl);         

        }
    }

    Toast.makeText(this, "circles: " + circles.length, Toast.LENGTH_SHORT).show();

    mainLayout.addView(grid);
    mainLayout.addView(itemsLayout);

    setContentView(mainLayout);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:57:41.583

您不应该使用边距来定位项目，请使用以下规则`RelativeLayout`：

```
 RelativeLayout.LayoutParams rl;
    int belowId = 100; // starting id
    for (int i = 0; i < (_gridCount * _gridCount); i++) {
        circles[i] = new TTTItem(this, _gridSize, "black");     
        circles[i].setId(i + 100);
        circles[i].setOnClickListener(itemClickHandler);
        circleIDs[i] = circles[i].getId();
        rl = new RelativeLayout.LayoutParams(40, 40);
        // update the below id if we need to
        if (i != 0 && i % _gridCount == 0) {
            belowId = circleIDs[i - 1];
        }                        
        if (i % _gridCount == 0) {
            rl.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
        } else {
            rl.addRule(RelativeLayout.RIGHT_OF, circleIDs[i - 1]);
        }           
        if (i < _gridCount) {
            rl.addRule(RelativeLayout.ALIGN_PARENT_TOP);                
        } else {                
            rl.addRule(RelativeLayout.BELOW, belowId);
        }
        itemsLayout.addView(circles[i], rl);
    } 
```

# c# - 在组合框中提供建议

> ID：14984133
> 
> 赞同：0
> 
> 时间：2013-02-20T15:50:05.367
> 
> 标签：c#, combobox, autosuggest

我希望我的组合框在用户输入组合框时下拉并提供建议。

例如，如果用户键入“R”，则应建议所有以“R”开头的项目（例如 Roshan、Rohan、Rishan 等）。

我可以从数据库中获取数据，但问题是如何下拉组合框？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T15:53:44.317

看属性`comboBox`

```
AutoCompleteMode = Suggest;
AutoCompleteSource = ListItems; 
```

# python - Python 2.7 可能的错误，导入的模块“消失”

> ID：14984136
> 
> 赞同：2
> 
> 时间：2013-02-20T15:50:17.383
> 
> 标签：python

我发现了一些非常奇怪的东西。请参阅下面的短代码。

```
import os

class Logger(object):
    def __init__(self):
        self.pid = os.getpid()
        print "os: %s." %os

    def __del__(self):
        print "os: %s." %os

def temp_test_path():
    return "./[%d].log" %(os.getpid())

logger = Logger() 
```

这旨在用于说明目的。`os`它只是在类的构造和销毁上打印导入的模块（别管名称`Logger`）。但是，当我运行它时，模块`os`似乎“消失”到`None`了类析构函数中。以下是输出。

```
os: <module 'os' from 'C:\Python27\lib\os.pyc'>.
os: None. 
```

哪里说`os: None.`是我的问题。它应该与第一条输出线相同。但是，回头看看上面的 python 代码，在函数`temp_test_path()`. 如果我稍微改变这个函数的名称，比如说`temp_test_pat()`，并保持所有其余代码完全相同，然后运行它，我会得到预期的输出（如下）。

```
os: <module 'os' from 'C:\Python27\lib\os.pyc'>.
os: <module 'os' from 'C:\Python27\lib\os.pyc'>. 
```

除了这是一个错误，我找不到任何解释。你能？顺便说一句，我使用的是 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:01:08.033

如果您依靠解释器关闭来调用您`__del__`，那么很可能是在您被调用`os`之前该模块已被删除。`__del__`尝试在你的代码中明确地做 a`del logger`并睡一会儿。这应该清楚地表明代码按您期望的那样运行。

我还想将您链接到[官方文档](http://docs.python.org/2/reference/datamodel.html#object.__del__)中的此注释，该注释`__del__`不保证在 CPython 实现中被调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T16:05:35.347

我已经复制了这个。肯定是有趣的行为。您需要意识到的一件事是，`__del__`即使在解释器退出时也不能保证调用它——而且在解释器退出时也没有指定的最终确定对象的顺序。

由于您要退出解释器，因此不能保证`os`没有首先删除。在这种情况下，似乎`os`实际上是在您的`Logger`对象之前完成的。这些事情*可能*会根据`globals`字典中的顺序发生。

如果我们只是在退出之前打印全局字典的键：

```
for k in globals().keys():
    print k 
```

你会看到的：

```
temp_test_path
__builtins__
__file__
__package__
__name__
Logger
os
__doc__
logger 
```

或者：

```
logger
__builtins__
__file__
__package__
temp_test_pat
__name__
Logger
os
__doc__ 
```

注意你的位置`logger`，特别是与`os`列表中的位置相比。With `temp_test_pat`,`logger`实际上是 finalized **First**，所以`os`仍然绑定了一些有意义的东西。但是，**在**您使用`temp_test_path`.

如果您打算让一个对象在解释器退出之前一直存在，并且您有一些要运行的清理代码，您总是可以使用`atexit.register`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T16:13:35.503

其他人已经给你答案了，关闭期间从模块的命名空间中删除全局变量（例如`os`，`Logger`和）的顺序未定义。`logger`

但是，如果您想要解决方法，只需导入`os`终结器的本地命名空间：

```
def __del__(self):
    import os
    print "os: %s." %os 
```

此时`os`模块仍然存在，只是你失去了对它的全局引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T16:01:23.647

这是可以预料的。来自[Python 语言参考](http://docs.python.org/2/reference/datamodel.html)：

> 此外，当**del** () 被调用以响应模块被删除时（例如，当程序执行完成时），由**del** () 方法引用的其他全局变量可能已经被删除或正在被拆除（例如进口机器关闭）。

在大红色警告框中:-)

# html - 响应式设计和内容定位

> ID：14984147
> 
> 赞同：0
> 
> 时间：2013-02-20T15:50:57.747
> 
> 标签：html, responsive-design

我正在使用 GridSet 进行响应式设计，并且对内容位置有疑问。成像我有两列。左列包含块 A 和块 B，而右列包含块 C 和链接。顺序根据查看的大小而变化。所以我们可能有以下内容：

**移动：**
块 A
块 B
链接
块 C

**平板电脑：**
A 座 | C
座 B座 | 关联

**台式机：** 与平板电脑相同

请注意，在移动设备中，链接显示在 C 块**上方，**但在平板电脑和台式机中，链接出现在 C 块**下方**。所以我的问题是如何定义内容以使其遵循这些规则？

# android - Android 为什么水平滚动不适合整个宽度

> ID：14984153
> 
> 赞同：2
> 
> 时间：2013-02-20T15:51:12.613
> 
> 标签：android, android-layout, listview, horizontal-scrolling

这是我的问题的 ListView 屏幕截图：

![在此处输入图像描述](../Images/cd481812f389ea50075019c8a8bb471c.png)

这是布局 XML：

```
<LinearLayout 
    android:id="@+id/viewer_top"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/background_dark"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/viewer_filter"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawableRight="@android:drawable/ic_menu_search"
        android:hint="@string/hint_filter"
        android:background="@android:color/white"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="3dp"
        android:inputType="text"
        android:paddingLeft="4dp"
        android:selectAllOnFocus="true" >
    </EditText>

    <EditText
        android:id="@+id/viewer_search"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawableRight="@android:drawable/ic_menu_search"
        android:hint="@string/hint_search"
        android:background="@android:color/white"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="3dp"
        android:layout_marginBottom="5dp"
        android:inputType="text"
        android:paddingLeft="4dp"
        android:selectAllOnFocus="true" >
    </EditText>
</LinearLayout>

<HorizontalScrollView
    android:id="@+id/viewer_hscroll"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/viewer_top" >
    <ListView
        android:id="@+id/viewer_list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ListView>
</HorizontalScrollView> 
```

这个场景有3个问题：

1.  水平滚动视图没有覆盖全屏宽度（我画了一条粗红线来标记结束）
2.  水平滚动视图不水平滚动
3.  ListView 行的宽度不均匀（这可以通过背景颜色结尾看到）（详见下面的 getView 代码）

    ```
    private static final int listRowLayout = android.R.layout.activity_list_item;
    private Map<String, Integer> mColors = new HashMap<String, Integer>();

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // No logs here to keep ListView performance good
        ViewHolder holder;
        int color;

        if( convertView == null ) {
            convertView = mInflater.inflate(listRowLayout, parent, false);
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(android.R.id.text1);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        String data = mData.get(position);

        // A compiled regex is faster than String.Contains()
        Matcher m = ViewHolder.regex.matcher(data);
        if( m.find() ) {
            color = mColors.get(m.group(1));
        } else {
            color = mColors.get("V");
        }

        holder.text.setText(data);
        holder.text.setBackgroundColor(color);
        return convertView;
    }

    private static class ViewHolder {
        TextView text;
        static Pattern regex = Pattern.compile(" ([VIDWEF])/");
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-25T15:27:26.450

我在尝试显示日志文件时遇到了完全相同的问题。我有一个专门的活动来显示日志文件：

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_log);

    // Read in lines from the log file
    File clientLogFile = new File(LOG_FILE);
    ArrayList<String> lines = new ArrayList<String>();
    try
    {
        Scanner scanner = new Scanner((Readable) new BufferedReader(new FileReader(clientLogFile)));

        try
        {
            while(scanner.hasNextLine())
            {
                lines.add(scanner.nextLine());
            }
        }
        finally
        {
            scanner.close();
        }
    }
    catch (FileNotFoundException e)
    {
        lines.add("No log file");
    }

    // Create a simple adaptor that wraps the lines for the ListView
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item,lines);

    // Create a ListView dynamically to overide onMeasure()
    final ListView listView = new ListView(this)
    {
        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
        {
            // Override onMeasure so we can set the width of the view to the widest line in the log file
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);

            // Find maximum width of item in list and set scroll width equal to that
            int maxWidth = 0;
            for(int i=0; i<getAdapter().getCount(); i++)
            {
                View listItem = getAdapter().getView(i, null, this);
                listItem.measure(0, 0);
                int width = listItem.getMeasuredWidth();
                if(width > maxWidth)
                {
                    maxWidth = width;
                }
            }

            // Set width of measured dimension
            setMeasuredDimension(maxWidth, getMeasuredHeight());
        }
    };

    // Add to scroll view
    HorizontalScrollView horizontalScrollView = (HorizontalScrollView)findViewById(R.id.logScrollView);
    horizontalScrollView.addView(listView);

    // Set adaptor
    listView.setAdapter(adapter);

    // Enable fast scroll
    listView.setFastScrollEnabled(true);

    // Scroll to end
    listView.post(new Runnable(){
        public void run() {
            listView.setSelection(listView.getCount() - 1);
        }});
} 
```

onCreate 方法读取日志文件，然后将 ListView 动态添加到覆盖 onMeasure() 的 Horizo​​ntalScrollView。onMeasure() 代码确定适配器中视图的最大宽度，并将 ListView 宽度设置为该宽度。

因此，我的 activity_view_log.xml 布局文件非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="5dp"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="5dp"
    >

    <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/logScrollView">
    </HorizontalScrollView>
</RelativeLayout> 
```

为了对 ListView 中的行进行更细粒度的控制，我在 list_item.xml 中为我的适配器提供了我自己的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@android:id/text1"
          android:layout_width="wrap_content"
          android:layout_height="match_parent"
          android:textAppearance="?android:attr/textAppearanceListItemSmall"
          android:inputType="text|none"
    /> 
```

在 onCreate() 结束时，我启用了快速滚动并滚动到日志文件中的行尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:06:15.350

我可能会扭转你在做什么。创建一个 ListView 并使 listview 中的每个项目都可以水平滚动。这种方式项目只在需要时滚动，而不是滚动整个屏幕。您可以完全控制每个列表项的尺寸。为此，请使用注释中提到的自定义列表视图适配器。您的问题也可能在此处重复：[Android 水平滚动列表](https://stackoverflow.com/questions/5537310/android-horizontal-scroll-list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:16:54.097

为了解决这 3 个问题，我必须让所有组件（水平滚动视图、列表视图和它的项目）都具有“fill_parent”宽度（我认为它与“match_parent”相同）。此外，我[`onMeasure(...)`](http://developer.android.com/reference/android/view/View.html#onMeasure%28int,%20int%29)重写了列表视图以计算其项目的最大宽度并通过[`setMeasuredDimension(...)`](http://developer.android.com/reference/android/view/View.html#setMeasuredDimension%28int,%20int%29). 这将通过它最宽的项目来衡量视图，而不是按它的第一个，因为它现在已经实现了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:55:51.897

这是我找到的解决方案。
万恶之源 :-) 是 ListView 并非旨在*有效*处理不同长度的行。要确定 ListView 的宽度，而不是查看所有行，只取 3 行作为*平均值*。
因此，如果 3 行偶然是短行，则宽度将被**剪裁**为较长的行，它解释了我遇到的问题。

为了绕过这个，我计算了所有数据的**最大行长度**，并用空格填充了较短的行，它解决了我在问题中描述的所有 3 个问题。

填充代码（在内部执行`getView()`）

```
holder.text.setText(String.format("%1$-" + mLen + "s", data)); 
```

# jsf - 警告：JSF1091：找不到文件动态内容的 mime 类型

> ID：14984154
> 
> 赞同：9
> 
> 时间：2013-02-20T15:51:13.720
> 
> 标签：jsf, primefaces, dynamic-content, graphicimage

我在 eclipse 下收到以下警告：

```
WARNING: JSF1091: No mime type could be found for file dynamiccontent. To resolve this, add a mime-type mapping to the applications web.xml 
```

此错误是我发布图片时引起的

低于 primefaces 组合物：

```
<p:graphicImage  value="#{bean.image}"/> 
```

Java 豆：

```
private StreamedContent image;

// Getter
public StreamedContent getImage() {
    try {
        JFreeChart jfreechart = ChartFactory.createPieChart3D("",
                        createDataset(), true, true, false);

        PiePlot3D plot = (PiePlot3D) jfreechart.getPlot();

        File chartFile = new File("dynamichart");
        ChartUtilities.saveChartAsPNG(chartFile, jfreechart, 375, 300);
        chartImage = new DefaultStreamedContent(new FileInputStream(
                        chartFile), "image/png");
        return chartImage;
    } catch (Exception e) {
        e.printStackTrace();
        return new DefaultStreamedContent();
    }
}

// generate data for image
public static PieDataset createDataset() {
    DefaultPieDataset dataset = new DefaultPieDataset();
    dataset.setValue("A",10);
    dataset.setValue("B", 11);
    dataset.setValue("C", 80);
    dataset.setValue("D", 12);
    return dataset;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-23T14:16:52.850

尝试将以下内容添加到您的 web.xml 文件中

```
<mime-mapping>
    <extension>jsp <!--{or the extension of file}--></extension>
    <mime-type>text/html</mime-type>
  </mime-mapping> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T09:28:55.140

我找到了一种解决方案。

通过使用最新版本的 primefaces (3.5)。

```
<dependency>  
    <groupId>org.primefaces</groupId>  
    <artifactId>primefaces</artifactId>  
    <version>3.5</version>  
</dependency> 
```

但IHM会有不愉快的变化

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-15T15:01:09.753

我只是想分享我遇到类似问题的经验，我使用`maven`,`netbeans`和`payara`. 一旦我收到这个警告：

> 警告 No mime type could be found for file fontawesome-webfont.woff is logged

删除此警告的解决方案是将以下代码添加到`web.xml`：

```
<mime-mapping>
    <extension>woff</extension>
    <mime-type>application/font-woff</mime-type>
</mime-mapping> 
```

**注意：**我对不同的文件有相同的警告，这些文件具有不同的扩展名 ( `woff, eot, woff2 and ttf`)。对此的解决方案是用前面提到的扩展之一`woff`替换。`<extension>`

我希望我的回答有一天会对某人有所帮助。

PS：我在这个[页面](https://issues.jboss.org/browse/RF-13420)找到了解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-13T18:51:57.403

我也收到了 JSF1091 警告`http://example.org`  ，`javascript:;`使用 Icefaces 而不是 Primefaces。

改变

```
<ice:outputLink onclick="..." value="javascript:;">...</ice:outputLink> 
```

到

```
<ice:outputLink onclick="..." value="/some/url">...</ice:outputLink> 
```

沉默了关于 的警告`javascript:;`。

改变

```
<ice:outputLink value="http://example.org"/> 
```

到

```
<a href="http://example.org"/> 
```

为 URL 修复了它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-05T14:36:08.057

虽然我在一段时间后发布了这个答案，但它可能对面临这个问题的其他开发人员很有用。

为避免上述恼人的警告，请将以下代码添加到您的 web.xml 中：

```
<mime-mapping>
<extension>png</extension>
<mime-type>image/png</mime-type>
</mime-mapping> 
```

更多详情请查看：

[http://blog.eisele.net/2011/01/weblogic-10340-oepe-maven-primefaces.html](http://blog.eisele.net/2011/01/weblogic-10340-oepe-maven-primefaces.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-13T01:57:51.530

对于 Spring Boot 2：

```
@Configuration
public class JsfConfigurationMimeMapper implements WebServerFactoryCustomizer<ConfigurableServletWebServerFactory> {

    @Override
    public void customize(ConfigurableServletWebServerFactory factory) {
        MimeMappings mappings = new MimeMappings(MimeMappings.DEFAULT);
        mappings.add("xsd", "text/xml; charset=utf-8");
        mappings.add("otf", "font/opentype");
        mappings.add("ico", "image/x-icon");
        mappings.add("svg", "image/svg+xml");
        mappings.add("eot", "application/vnd.ms-fontobject");
        mappings.add("ttf", "application/x-font-ttf");
        mappings.add("woff", "application/x-font-woff");
        mappings.add("woff2", "application/x-font-woff2");
        mappings.add("xhtml", "application/xml");
        factory.setMimeMappings(mappings);

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T08:09:06.993

如果你有弹簧，你也可以有（我添加了大部分 fa-Icons）：

```
@Configuration
public class JsfConfigurationMimeMapper implements EmbeddedServletContainerCustomizer {

     @Override
     public void customize(ConfigurableEmbeddedServletContainer container) {
        MimeMappings mappings = new MimeMappings(MimeMappings.DEFAULT);
        mappings.add("xsd", "text/xml; charset=utf-8");
        mappings.add("otf", "font/opentype");
        mappings.add("ico", "image/x-icon");
        mappings.add("svg", "image/svg+xml");
        mappings.add("eot", "application/vnd.ms-fontobject");
        mappings.add("ttf", "application/x-font-ttf");
        mappings.add("woff", "application/x-font-woff");
        mappings.add("woff2", "application/x-font-woff2");
        mappings.add("xhtml", "application/xml");
        container.setMimeMappings(mappings);
    }
} 
```

# android - android“强制关闭”内存到底发生了什么

> ID：14984155
> 
> 赞同：4
> 
> 时间：2013-02-20T15:51:19.690
> 
> 标签：android, memory, service, heap-memory, forceclose

我的应用程序中的服务很少。应用程序在“android.uid.system”进程中运行。当我单击“强制关闭”时，日志会显示：

强制停止包 com.sec.ims.android uid=1000 强制停止服务 ServiceRecord{42b9a948 ... .....

对于在我的应用程序下运行的每个服务，我都看到了这一点。根本没有 onDestroy() 调用。我想知道“强制关闭”之后android到底在做什么？停止整个过程或只是停止在应用程序下工作的所有服务、活动？

你知道这些服务创建的对象、静态变量和线程会发生什么吗？android 是否会清除此应用程序的所有内存堆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:53:18.397

A Force Stop will kill the VM (Virtual Machine) in which the application is running. All Objects, Services, and activities are killed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:58:08.910

这取决于您如何启动该服务。

使用[`startService()`](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)会覆盖由 管理的默认服务生命周期[`bindService()`](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)。

使用时，当`startService()`原始 Activity 关闭时，您的服务生命周期仍然存在。

在这两种情况下，Android 都会在需要内存时停止服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:12:18.060

我认为。这个问题是低内存杀手运行问题。当更高优先级的进程需要堆时，Android PF 会杀死活着的进程。

[ps]

*   如果您故意制造内存不足杀手的情况。我建议您使用以下我的应用程序。 [http://kyorohiro.blogspot.jp/2013/02/inside-kyorostress-1-produce-low-memory.html](http://kyorohiro.blogspot.jp/2013/02/inside-kyorostress-1-produce-low-memory.html)

*   如果此问题是 Low memory Killer 问题，您的服务和进程将重新启动。但是你的应用程序的数据在java堆中被删除了。

*   如果 PF 重新启动你的进程。然后调用 onCreate()。

*   服务生命周期由 onStartCommand 的返回值改变操作。检查android api参考。

# java - 如何计算范围内函数的最大值？

> ID：14984156
> 
> 赞同：0
> 
> 时间：2013-02-20T15:51:22.373
> 
> 标签：java

我有一些函数（例如，双函数（双值））和一些范围（例如，从 A 到 B）。我需要计算这个范围内函数的最大值。是否有针对它的库？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:59:46.893

如果函数需要处理浮点值，您将不得不使用[Golden section search](http://en.wikipedia.org/wiki/Golden_section_search)之类的东西。请注意，对于这种特定方法，可以处理的功能有很大的限制（特别是它必须是[unimodal](http://en.wikipedia.org/wiki/Unimodal_function#Unimodal_function)）。您可以对算法进行一些[调整，将其扩展到更多功能，特别是这些修改将允许它适用于连续功能。](http://www.scribd.com/doc/126421519/Extrema)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:20:19.773

我不知道 Java 中是否有任何库可以解决您的问题。但我知道您可以使用 MatLab（或 OpenSource 等价物的 Octave）轻松做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:13:12.353

这是一个连续函数，还是一组离散值？如果是离散值，那么您可以遍历所有值，并按照 808sound 的建议设置最大/最小标志，或者您可以将所有值加载到数组中。

如果它是一个连续函数，那么您可以使用函数在离散输入处的值填充一个数组，并如上所述找到最大值，或者如果它是可微分的，那么您可以使用基本微积分来找到 df(x)/ dx 为 0。后一种情况更抽象一些，而且可能比你想要的更复杂，但是？

一个快速的谷歌搜索让我明白了这一点： [http ://code.google.com/p/javacalculus/](http://code.google.com/p/javacalculus/)

但我自己从未使用过它，所以我不知道它是否实现了所需的功能。不过，它确实有微分方程，所以我认为它们会有像基本微分这样的“婴儿用品”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:24:45.760

如果您没有任何关于函数内部工作原理的指示（即函数是一个接受输入并产生输出的黑盒子），则没有“简单”的方法可以找到全局最大值。

您的输入（技术上）有无限数量的点可供选择，因此“迭代所有可能的输入”在数学上是不可行的。

有多种算法可以为您提供**估计**的最大值，如下所示：

[爬山算法](http://en.wikipedia.org/wiki/Hill_climbing)和[萤火虫算法](http://en.wikipedia.org/wiki/Firefly_algorithm)是两种，但还有很多。这是一个相当有据可查/研究过的计算机科学问题，网上有很多资料供您查看。我建议从爬山算法开始，并可能扩展到其他全局优化算法。

注意：*这些算法不保证结果是最大值，但提供其值的估计。**

# php - PHPExcel doesn't read data if first cell is empty

> ID：14984162
> 
> 赞同：0
> 
> 时间：2013-02-20T15:51:33.433
> 
> 标签：php, phpexcel

Hi I recived Excel like this

```
date | hour | visit
X1   | Y1   | Z1
X2   | Y2   | Z2
X3   | Y3   | Z3
X4   | Y4   | Z4
     | Y5   | Z5
X6   | Y6   | Z6 
```

For some reason X5 is missing which is OK for further use... but the problem is that PHPExcel Reader 1.7.6, 2011-02-27 skips that row automatically.

So if I just do that:

```
$objPHPExcel = $objReader->load($fileName);
$rowIterator = $objPHPExcel->getActiveSheet()->getRowIterator();
print_r($rowIterator); 
```

I will receive data like this:

```
date | hour | visit
X1   | Y1   | Z1
X2   | Y2   | Z2
X3   | Y3   | Z3
X4   | Y4   | Z4
X6   | Y6   | Z6 
```

Any idea?

# javascript - 在 node.js 中杀死异步函数调用

> ID：14984163
> 
> 赞同：5
> 
> 时间：2013-02-20T15:51:37.253
> 
> 标签：javascript, node.js

是否可以在 node.js 中终止**异步函数调用**，或者我必须调用该函数，然后在特定时间后再调用另一个函数来终止**整个进程？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:25:52.413

可能不是，但是检查下面的代码，你可以得到一些想法来实现这些东西。

```
var logrunningFunction = function(){
  setTimeout(function(){
    console.log("Delayed");
    cb();
  }, 5000);

};

var cb = function(){
  console.log("long running function completed");
};
logrunningFunction(cb);

setTimeout(function(){
  cb = function(){
    console.log("Overwrite long running handler");
  };
},1000); 
```

# autohotkey - 用于监视窗口标题更改的 AHK 脚本

> ID：14984166
> 
> 赞同：1
> 
> 时间：2013-02-20T15:51:47.147
> 
> 标签：autohotkey

AHK菜鸟在这里。我正在寻找监视 1-4 个程序，这些程序使用自动热键对窗口标题进行特定更改而最小化运行。当在任何程序中检测到更改时，会弹出警报以提醒用户发生更改，或者脚本可以将程序置于最前面。

窗口标题的变化（使用 AutoIt Spy 工具提取）来自：

`Lab - [Workspace`...在这一点之后，标题文本是动态的

到：

`Lab - [Results`...ETC

或者干脆

```
WARNING 
```

这 4 个程序是相同的，因为它们用完了存储如下的单独文件夹：

```
c:\program1\program.exe 
c:\program2\program.exe 
c:\program3\program.exe 
c:\program4\program.exe 
```

是否可以为每个程序检索 PID，以便脚本可以区分这 4 个并将正确的一个放在前面？社区的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:29:22.747

这里有一些东西，（未经测试）让你开始......

```
SetTitleMatchMode, 1 ; A window's title must start with the specified WinTitle to be a match.
Settimer, CheckWindow, 1000
Return

CheckWindow:
Ifwinexists, ahk_class...... check the class first
{
    IfWinExist, Lab - [Results
        GoSub, MyAlert
    IfWinExist, WARNING
        GoSub, MyAlert
}
Return

MyAlert:
    SoundBeep, 1000, 1000
Return 
```

我看到您已经通过讨论 4 个类似 .exe 文件的部分扩展了您的问题。如果要根据PID进行区分，可以使用：

```
WinGet, active_id, ID, A ; A = active window...
WinMaximize, ahk_id %active_id%
MsgBox, The active window's ID is "%active_id%". 
```

你问这个问题的事实令人担忧。一次 Google 搜索`AutoHotKey PID`会引导您找到答案。我愿意帮助，但不是你的程序员！

# 警告：如果您编辑原始问题，除非您还写了新评论，否则我们不会收到警报！

# jquery - 在页面之间导航时保 留表单值

> ID：14984167
> 
> 赞同：1
> 
> 时间：2013-02-20T15:51:50.127
> 
> 标签：jquery, jquery-mobile

我正在编写一个 phonegap 应用程序，并在前端使用 jquery mobile。我有一个包含 4 个字段和一个链接的表单，链接转到另一个页面，该页面显示其中一个字段的可能值的列表视图，点击/单击返回原始表单并使用传递的字段填充其中一个字段价值。

问题是用户在使用查找链接之前完成的所有字段现在都是空的（因为页面已再次加载）。

我知道我可以在 2 个页面之间传递字段值或使用一些全局变量，但我想知道是否有任何 JQM 特定的方式来执行此操作（或者任何人都可以推荐的更简洁的方式）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:01:53.237

有几种可能的方法，你可以在我的另一篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到它们，让我透明一下，这是我的个人博客。或者你可以在这里找到它**[，](https://stackoverflow.com/a/14469041/1848600)**在这里重复它们没有意义。您还将在那里找到示例以及每种方法的好/坏方面。

基本上，这一切都取决于您是使用 1 **`HTML`**/ 多个页面模板还是多个**`HTML`**文件来创建您的**`jQuery Mobile`**应用程序。

查找章节：**页面转换之间的数据/参数操作。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:54:05.597

你可以使用`localStorage`我相信 PhoneGap 支持的 - [http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage)

只需在离开页面之前将您的值转储到存储中，并在您返回时重新加载它们。

# iphone - 如何在 iOS 应用程序中解析核心位置逻辑

> ID：14984168
> 
> 赞同：0
> 
> 时间：2013-02-20T15:51:50.493
> 
> 标签：iphone, ios, objective-c, core-location, cllocationmanager

`core location`我的应用程序中的逻辑有问题。以下代码位于`rootviewcontroller`. 它应该测试以查看用户是否**允许为应用程序打开或关闭 gps/位置服务**，然后做出决定并移至两者之一`view controllers`。

该应用程序应在启动时运行此测试。此外，如果用户进入`device Settings`并更改`Privacy > Location Services > App Name > ON/OFF`并重新启动应用程序，那么它应该再次执行该过程。

这是我到目前为止的代码：

```
#import <CoreLocation/CoreLocation.h>

-(void) viewWillAppear:(BOOL)animated {

    CLController = [[CoreLocationController alloc] init];
    CLController.delegate = self;
    [CLController.locMgr startUpdatingLocation];

#ifdef DEBUG
    NSLog(@"RootViewController");
#endif        

    spinner = [[UIActivityIndicatorView alloc]
                                        initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.center = self.view.center;
    spinner.hidesWhenStopped = YES;
    [self.view addSubview:spinner];
    [spinner startAnimating];

}

-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied) {
        // denied

        [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];
        [CLController.locMgr stopUpdatingLocation];

    }else if (status == kCLAuthorizationStatusAuthorized) {
        // allowed
        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];
        [CLController.locMgr stopUpdatingLocation];
    }
}

- (void)locationUpdate:(CLLocation *)location {
        //locLabel.text = [location description];

#ifdef DEBUG    
    NSLog(@"auth status is %u", [CLLocationManager authorizationStatus]);
#endif    
        [self performSegueWithIdentifier: @"SegueOffersGPS" sender: self];     
}

- (void)locationError:(NSError *)error {

    [self performSegueWithIdentifier: @"SegueOffersNoGPS" sender: self];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SegueOffersNoGPS"])
    {
        self.navigationController.toolbarHidden=YES;

#ifdef DEBUG
        NSLog(@"auth status no GPS");
#endif

    }

    if ([[segue identifier] isEqualToString:@"SegueOffersGPS"])
    {
        self.navigationController.toolbarHidden=NO;

#ifdef DEBUG
        NSLog(@"auth status is GPS");
#endif

    }
}

-(void)viewDidDisappear:(BOOL)animated {
    [CLController.locMgr stopUpdatingLocation];
    [spinner stopAnimating];

} 
```

谢谢你的帮助。

仅供参考：我之前确实问过这个问题，并认为它已经解决了。它仍然持续存在，我无法弄清楚......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:20:44.670

```
if (![self locationManager] .location) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Location Service Disabled"
                                                        message:@"To re-enable, please go to Settings and turn on Location Service for this app."
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
        return;
    } 
```

# php - Trying to send visitors to another page and open specific div via onChange form event

> ID：14984170
> 
> 赞同：1
> 
> 时间：2013-02-20T15:51:54.333
> 
> 标签：php, jquery

I have a page called states.php. Each state is hidden until you select it from the dropdown menu. It then shows the state div selected and hides the others. This works perfectly on the states.php page.

However, I have the same form on every other page on the site. I would like to be able to select a state from say, home.php, redirect them to states.php and open the correct states div.

Here's the form and html:

```
<div class="select"><span class="selectState">Select a State</span><span><form>
        <select name="States" id="options" class="form-select">            
        <option value="state" selected="selected">- Select a State -</option>            
        <option value="1" >New York</option>
        <option value="2" >New Jersey</option>
        <option value="3" >Texas</option>
         </select>
        </form></span></div>

<!-- NY Map -->
<div id="state1" class="state stateShow">
NY CONTENT
</div>

<!-- NJ Map -->
<div id="state2" class="state stateShow">
NJ CONTENT
</div>

<!-- TX Map -->
<div id="state3" class="state stateShow">
TX CONTENT
</div> 
```

And here's the javascript:

```
$(document).ready(function() {  
function optionCheck() {
var i, len, optionVal, stateDiv,
    selectOptions = document.getElementById("options");
for (i = 0, len = selectOptions.options.length; i < len; i++) {
    optionVal = selectOptions.options[i].value;
    stateDiv = document.getElementById("state" + optionVal);
    if (!stateDiv) { continue; }

    if (selectOptions.options[i].selected) {
        stateDiv.className = "state stateShow";
    } else {
        stateDiv.className = "state";
    }
}    
}
document.getElementById("options").onchange = optionCheck;
}); 
```

And basic CSS:

```
.state {
 display: none;
}
.stateShow {
  display:block;
} 
```

Any help would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:02:31.870

You could put the state value in the hash of your link and then check that in your states.php javascript. For example, on your home page, put the link:

```
<a href="states.php#1">New York</a> 
```

And then in your states.php javascript:

```
$(document).ready(function() {  
    function optionCheck() {
        // option check logic ...
    }
    document.getElementById("options").onchange = optionCheck;

    if (window.location.hash) {
        document.getElementById("options").value = window.location.hash.substring(1);
        optionCheck();
    }
}); 
```

# php - 用于将数组存储在单个 MySQL 字段中的替代表结构

> ID：14984178
> 
> 赞同：0
> 
> 时间：2013-02-20T15:52:12.910
> 
> 标签：php, mysql, database, pdo

我目前正在使用 PDO PHP 和 MySQL 构建一个汽车预订系统，但我正在努力解决如何为用户可能添加到他们的预订中的任何汽车附加服务构建我的表格。

我目前有以下表格，它们使用 reservation_table 将 booking_id 与 car_id 链接（取自他们单独的表格）：

车表：

```
ID     | car_make | car_name
1      | Ford     | Focus
2      | BMW      | Z3
3      | Audi     | A5 
```

预订表：

```
booking_ID  | booking_time | total_cost | etc..
125674      | 2013-02-02   | 91.55     
887463      | 2013-01-19   | 52.00     
209930      | 2013-01-11   | 23.99 
```

预订表：

```
ID     | booking_ID | car_ID
1      | 125674     | 2
2      | 887463     | 2
3      | 209930     | 1 
```

附加表：

```
ID     | car_extra     | extra_price
1      | GPS           | 22.99
2      | Baby Seat     | 12.99
3      | Car Charger   | 15.99 
```

最初我打算使用一组选定的汽车附加功能将一个额外的列添加到 reservation_table 中，以将它们与预订链接，如下所示：booking_table：

```
ID     | booking_ID | car_ID | car_extras
1      | 125674     | 2      | [2,3]
2      | 887463     | 2      | [1]
3      | 209930     | 1      | [1,3] 
```

但我读过这是不好的做法。如何构建我的表格以便我可以将选定的汽车额外 ID（范围可以从用户选择 0 到 12）分配给特定的预订？

以下是否可以通过创建一个仅将 booking_ID 与 extra_ID 链接的新表来工作（这意味着同一预订 id 的多行）：

selected_extras_table：

```
ID     | booking_ID | car_extra_ID
1      | 125674     | 2
2      | 125674     | 3
3      | 887463     | 1
4      | 209930     | 1
5      | 209930     | 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:59:35.783

你是完全正确的：创建 selected_extras_table，每额外一行是最好的解决方案。当您查询该表时，您将在任何您感兴趣的 booking_ID 中获得所有额外内容的列表，并且您不需要从单个字段中解析出多个值（例如，“[2,3]” ）。让数据库将值分开。你在正确的轨道上。

# shell - mongo shell中的未设置变量

> ID：14984183
> 
> 赞同：3
> 
> 时间：2013-02-20T15:52:24.523
> 
> 标签：shell, mongodb, variables

有没有办法在 mongo shell 中取消设置变量。例如，如果我`myvar`在定义它之前尝试引用，我会得到`ReferenceError: myvar is not defined (shell):1`，但是一旦我定义它并完成它，我想将它返回到那个状态。

我尝试将其设置为`null`and `undefined`，但都不起作用。

编辑：尝试删除运算符时，我得到以下输出：

```
> var myvar = 5
> myvar
5
> delete myvar
false
> 
> myvar
5
> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:09:49.647

mongo shell 是一个交互式 JavaScript shell，所以你可以使用`delete`操作符：

```
$ mongo
MongoDB shell version: 2.2.3
connecting to: test
> myvar
Wed Feb 20 12:08:35 ReferenceError: myvar is not defined (shell):1
> myvar = {x: 1}
{ "x" : 1 }
> myvar
{ "x" : 1 }
> delete myvar
true
> myvar
Wed Feb 20 12:08:59 ReferenceError: myvar is not defined (shell):1
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T12:24:44.050

您还可以删除存储在变量中的文档中的字段。此示例代码显示如何从矩形文档中删除名为“oops”的字段。

```
> var rectangle = { "length":5, "width":10, "oops":20 }
{ "length":5, "width":10, "oops":20 }

> delete rectangle.oops
true

> rectangle
{ "length":5, "width":10 } 
```

# extjs4 - ExtJS 4 - store.load 时获取按钮

> ID：14984186
> 
> 赞同：-1
> 
> 时间：2013-02-20T15:52:33.853
> 
> 标签：extjs4

你能阻止我做这样的事情吗

```
{
    xtype : 'button',
    text  : 'Prikazi',
    handler : function(item,el){
       this.setDisabled(true);
       store.load(function(records, operation, success) {
           if(success){ this.up('button').setDisabled(false); }
       });
    }
} 
```

问题：*this.up('button')*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:47:38.320

只需使用您传递的参数 -

因为“this”首先指的是按钮，而在回调中它指的是商店：

```
{
   xtype:  'button',
   text:   'Refresh',
   id:     'btn_refresh',
   handler: function(clicked_button, the_event) {

      clicked_button.setDisabled(true);

      store.load(function(records, operation, success) {
         if(success){
            clicked_button.setDisabled(false);
         }
      });

   }
} 
```

使用商店的 beforeload 事件来控制按钮状态可能更优雅。

更新：更改了变量名称以使示例更加明显。

也许检查一次[FireBug](http://getfirebug.com)或[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)

...如果它应该有帮助，请接受答案。

# maven - Using maven, how can I deploy artifacts that I have already compiled with a different version?

> ID：14984188
> 
> 赞同：0
> 
> 时间：2013-02-20T15:52:38.423
> 
> 标签：maven, continuous-integration

I have a continuous integration build process where each change gets compiled and deployed as a Maven snapshot. When a version is compiled and tested that people are happy with, I want to be able to deploy this to our local Maven repository with a release version.

"The Maven way" to do this would be to take the source again, set a version (versions:set etc), compile and test it all over again then deploy the resulting artifacts. As this process takes some time, I would prefer not to go through all the steps again.

Is there a way of taking the artifacts produced by the first compile step, update the version and deploy them as is without recompiling?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:43:30.513

你认为是“Maven 方式”的不一定是真的。但是，如果您确实想将任意 jar 部署为不同组/名称/版本的 maven 工件，您可以使用 maven deploy 插件来执行此操作：

```
mvn deploy:deploy-file -Durl=/path/to/remote/repository -Dfile=/path/to/myjar-1.22.jar -DgroupId=somegroup -DartifactId=yourjar -Dpackaging=jar -Dversion=1.23 
```

上面的示例将 myjar-1.22 作为 yourjar-1.23 部署到远程存储库中。

但是，您应该对此保持谨慎。通常在项目本身内部使用原始版本信息（作为 jar 元数据等）

在我看来，最好的方法不是更改版本号，而是在软件生命周期中一直坚持下去。利用源代码控制修订/内部版本号，以便您始终获得唯一的版本标签。例如，命名您的工件`myjar-1.0.3345.23.jar`，其中 1.0 是您的主要/次要版本，3345 是您的源代码控制修订号，23 是内部版本号

# firefox-addon - 从 Firefox Add-on SDK 执行 cfx 命令的权限被拒绝

> ID：14984193
> 
> 赞同：1
> 
> 时间：2013-02-20T15:52:53.630
> 
> 标签：firefox-addon, firefox-addon-sdk, linux-mint

最近我在我的 Linuxmint 14 KDE 中下载了最新版本的 Firefox Add-on SDK，1.13.2。到目前为止，它工作得很好，如下面的命令所示：

```
ikrz@iklg570 /media/MyDrive/Dev/MozillaAddons/sdk $ source bin/activate
Welcome to the Add-on SDK. Run 'cfx docs' for assistance.
(sdk)ikrz@iklg570 /media/MyDrive/Dev/MozillaAddons/sdk $ cfx docs
bash: /media/MyDrive/Dev/MozillaAddons/sdk/bin/cfx: Permission denied
(sdk)ikrz@iklg570 /media/MyDrive/Dev/MozillaAddons/sdk $ 
```

但是，正如您在终端（Konsole）的上述输出中看到的那样，运行 cfx 命令的权限被拒绝。当我使用 Linuxmint 14 MATE 但 1.12 的附加 SDK 时，这工作正常。

我又遇到了一个问题，这与[superuser.com](https://superuser.com/questions/554849/automount-ntfs-partitions-in-linuxmint-14-kde)上质疑的用户权限有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:27:01.693

bin目录下的文件没有执行位权限：

[https://gist.github.com/canuckistani/5008348](https://gist.github.com/canuckistani/5008348)

作为测试，我将 1.13.2 作为 tarball 下载并解压缩，您可以在 gist 的“correct.sh”部分看到目录应该是什么样子。我使用了以下命令：

```
wget https://ftp.mozilla.org/pub/mozilla.org/labs/jetpack/addon-sdk-1.13.2.tar.gz
tar xfz addon-sdk-1.13.2.tar.gz 
```

我在其中执行此操作的目录归我的用户所有，并且是本地文件系统。YMMV。

# php - PHP PSR-0 Static Class

> ID：14984194
> 
> 赞同：0
> 
> 时间：2013-02-20T15:52:55.353
> 
> 标签：php, namespaces, spl-autoload-register, psr-0

I'm trying to rewrite an OO PHP site (that loosely follows an MVC structure) so it uses namespaces - and want to follow PSR-0.

In the current site I have a class (called APP) which is full of static methods that I call all over the place to handle things such as getting config data eg; `APP::get_config('key')`.

Obviously with namespacing, I would need to call `\TheNameSpace\App::get_config('key')`. I use this class frequently, so want to avoid having to prefix the namespace every time I use it. I do call methods in it from within other classes, which would usually be under a sub-namespace - so changing the namespace at the top of the file won't really work.

So, I guess my question is, what is the easiest way to have a 'global' class with methods that I can call anywhere without having to prefix with the namespace each time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:56:26.950

在脚本顶部添加

```
use TheNameSpace\App as MyApp 
```

例如。然后你可以像这样使用它

```
app = new MyApp(); 
```

在你的脚本中。当然你不需要在这里使用别名。只是

```
use TheNameSpace\App
app = new App(); 
```

也会起作用。

实现这个的全局类是不好的风格，你**不应该这样**做：

```
class MyApp extends TheNameSpace\App { }

....
myApp = new MyApp(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:56:47.980

```
namespace Foo;
use Bar; 
```

那么你不必做`\Bar\fn`

所以在你的情况下：

```
namspace Foo;
use TheNameSpace\App;

App::get_config('blah') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:57:23.063

阅读 php 手册中关于使用/别名命名空间的部分。

[http://www.php.net/manual/en/language.namespaces.importing.php](http://www.php.net/manual/en/language.namespaces.importing.php)

您可以使用“use”排除命名空间。你可以随意命名它。

```
use TheNamespace\App as App //You can name it anything here
App:config('key'); 
```

# c++ - How to convert ANSI byte to Unicode string?

> ID：14984195
> 
> 赞同：5
> 
> 时间：2013-02-20T15:52:57.193
> 
> 标签：c++, visual-c++, mfc, atl

I have an `vector<BYTE>` that represents characters in a string. I want to interpret those characters as ASCII characters and store them in a Unicode (UTF-16) string. The current code assumes that the characters in the `vector<BYTE>` are Unicode rather than ASCII. This works fine for standard ASCII, but fails for extended ASCII characters. These characters need to be interpreted using the current code page retrieved via `GetACP()`. How would I go about creating a Unicode (UTF-16) string with these ASCII characters?

EDIT: I believe the solution should have something to do with the macros discussed here: [http://msdn.microsoft.com/en-us/library/87zae4a3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/87zae4a3(v=vs.80).aspx) I'm just not exactly sure how the actual implementation would go.

```
int ExtractByteArray(CATLString* pszResult, const CByteVector* pabData)
{
    // place the data into the output cstring
    pszResult->Empty();
    for(int iIndex = 0; iIndex < pabData->GetSize(); iIndex++)
        *pszResult += (TCHAR)pabData->GetAt(iIndex);

    return RC_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:56:13.297

您应该使用[MultibyteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)将该字符串转换为 unicode

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:16:25.417

> 我有一个`vector<BYTE>`代表字符串中的字符。我想将这些字符解释为 ASCII 字符并将它们存储在 Unicode (UTF-16) 字符串中

`std::vector<BYTE>`只有在处理二进制数据时才应使用。在使用字符串时，请`std::string`改用。请注意，此`std::string`对象将包含将由一个或多个字节序列编码的特殊字符（因此称为**多字节**字符），但这些不是[ASCII](http://msdn.microsoft.com/en-us/library/4z4t9ed1%28v=vs.71%29.aspx)字符。

使用`std::string`后，您可以使用[`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/dd319072%28v=vs.85%29.aspx)创建自己的函数，将 a `std::string`（包含多字节 UTF-8 字符）转换为`std::wstring`包含 UTF-16 编码点：

```
// multi byte to wide char:
std::wstring s2ws(const std::string& str)
{
    int size_needed = MultiByteToWideChar(CP_UTF8, 0, &str[0], (int)str.size(), NULL, 0);
    std::wstring wstrTo(size_needed, 0);
    MultiByteToWideChar(CP_UTF8, 0, &str[0], (int)str.size(), &wstrTo[0], size_needed);
    return wstrTo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:27:23.617

既然您使用的是 MFC，那就让我们`CString`来完成这项工作。

# javascript - 添加 Ajax 内容后单击事件不起作用

> ID：14984205
> 
> 赞同：0
> 
> 时间：2013-02-20T15:53:20.360
> 
> 标签：javascript, ajax, prototypejs

基本上，我有一个在页面加载时获取 Ajax 内容的页面。灯箱（与 ajax 内容无关）具有`Event.observe`在加载 ajax 产品时停止工作的单击事件。我可以让它与 jQuery 的`.live`方法一起使用，但不熟悉 Prototype。

样品不工作点击事件：

```
Event.observe('closeLink', 'click', function () {  
    RunSomeFuntion.close();          
    ClearAll();  
}); 
```

即使在页面加载时添加了 Ajax 内容，如何使用 Prototype 使事件（见上文）保持功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:43:21.493

事件委托是解决方案。使用`on`. 请参阅[http://prototypejs.org/learn/event-delegation](http://prototypejs.org/learn/event-delegation)。

```
$('ancestorID').on('click', '.closeLink', function(event, element) {
    var clickedLink = event.element;
    RunSomeFuntion.close();
    ClearAll();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:57:43.120

基本上你需要重新执行你的事件绑定。不幸的是，原型没有任何类似的东西`.live`。

# ember.js - emberjs 模板编译在 rc1 中不起作用

> ID：14984207
> 
> 赞同：0
> 
> 时间：2013-02-20T15:53:25.960
> 
> 标签：ember.js

我有

```
Esploreo.TE.Views.ItemView = Ember.View.extend({
    elementId : "item",
    templateName : 'itemTemplate'
}); 
```

和一个模板

```
<script type="text/x-handlebars" data-template-name="itemTemplate">
  content of templat
</script> 
```

一切都很好。但我不想使用这种类型的编码。在之前的 Ember 版本中，可以在视图定义中编写模板代码，如下所示：

```
Esploreo.TE.Views.ItemView = Ember.View.extend({
    elementId : "item",
    template: Em.Handlebars.compile('content of template'),
}); 
```

但它不起作用（emberjs 1.0.0-RC.1）。此版本中删除了此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:20:58.780

这是使用 Ember 的一种奇怪方式！不过，要回答您的问题，您需要添加`.append()`到您`.create()`喜欢的末尾：

`App.ItemView.create().append();`

强制性 jsFiddle：http: [//jsfiddle.net/MGXDe/](http://jsfiddle.net/MGXDe/)

虽然我不知道你的用例，但我不能强调这似乎有点太*好奇*了，接近于对 Ember 的不良使用。

# javascript - 如何使用 javascript 处理一个大的 html 复选框？

> ID：14984210
> 
> 赞同：-2
> 
> 时间：2013-02-20T15:53:35.887
> 
> 标签：javascript, html

所以我在表格中有这样的东西

```
<input type="checkbox" name="arr" value="A" />A
<input type="checkbox" name="arr" value="B" />B
<input type="checkbox" name="arr" value="C" />C
<input type="checkbox" name="arr" value="D" />D
<input type="checkbox" name="arr" value="E" />E
...
<more checkboxes here>
... 
```

在我的 Javascript 中，我想创建一个包含选中框的值的数组。因此，如果选中 B 和 D，则应该是`[B, D]`.

谢谢

编辑：我不包括 jQuery 标签，但删除他的答案的人给了我一个使用 jQuery 的不错且简短的工作解决方案：

```
var valueArray = $('input[type="checkbox"][name="arr"]:checked').map(function() {
    return this.value;
}).get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:05:58.087

根据您使用它的目的，只需使用`name="arr[]"`. 提交表单时，服务器端会自动将选中的复选框值转换为数组。

但是，如果您尝试纯粹在客户端 JavaScript 中获取此数组，则涉及更多。试试这个：

```
function getCheckedBoxes(name) {
    if( document.querySelectorAll) {
        var qsa = document.querySelectorAll("input[type=checkbox][name='"+name+"']"),
            l = qsa.length, i, out = [];
        for( i=0; i<l; i++) if( qsa[i].checked) out.push(qsa[i].value);
    }
    else {
        var qsa = document.getElementsByTagName('input'), l = qsa.length, i, out = [];
        for( i=0; i<l; i++) {
            if( qsa[i].type == 'checkbox' && qsa[i].name == name && qsa[i].checked)
                out.push(qsa[i].value);
        }
    }
    return out;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:58:45.957

你可以像这样使用jquery：

```
$("input[type=checkbox][name=arr][checked]").each( 
    function() { 
       // collect the values
    } 
); 
```

# java - org.springframework.mapping

> ID：14984213
> 
> 赞同：4
> 
> 时间：2013-02-20T15:53:44.687
> 
> 标签：java, spring, spring-mvc

我有一个场景，我需要根据属性字段将一个对象映射到另一个对象（PO​​JO）。

我用谷歌搜索并知道我可以使用 1\. BeanUtils 2\. BeanWrapper 3\. Spring 3 对象映射来做到这一点

我正在寻找选项 3 [http://static.springsource.org/spring/previews/mapping.html](http://static.springsource.org/spring/previews/mapping.html)

它使用 org.springframework.mapping.support 包：

任何人都可以帮我买同样的罐子吗？

谢谢，阿里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:16:02.733

我建议你使用推土机。它非常强大且易于使用。

> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。

[推土机之家](http://dozer.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T20:59:43.993

看起来这从未进入图书馆，请参阅这个 JIRA：

[https://jira.spring.io/browse/SPR-6137](https://jira.spring.io/browse/SPR-6137)

# css - 仅css div内边框

> ID：14984214
> 
> 赞同：1
> 
> 时间：2013-02-20T15:53:44.377
> 
> 标签：css, html, border

我希望有一个人可以帮助我。我正在努力解决这个问题：

![在此处输入图像描述](../Images/d53f5e0a6aa91dcfd42cb83f6bed5c5d.png)

这是我到目前为止所拥有的：

![在此处输入图像描述](../Images/8b3a4b7484a11e2bdb0ec1fd600c1575.png)

下面是我当前的html。如何仅在 div 的内部显示边框（如第一个屏幕截图中所示）？另外，如何使每个 div 的高度和宽度成为正方形（不是矩形）？使用 html 表格更好还是可以使用 div？html 代码是动态生成的，所以我不能只在各个 div 上添加右/左边框。

```
<div style="width: 100%; text-align: center;">                               
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">S</span>
    <br/>
    0&#45;0
</div>
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">M</span>
    <br/>
    5&#45;7
</div>      
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">T</span>
    <br/>
    5&#45;7
</div>      
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">W</span>
    <br/>
    5&#45;7
</div>      
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">R</span>
    <br/>
    5&#45;7
</div>      
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">F</span>
    <br/>
    7&#45;5
</div>      
<div style="float: left;width: 14%;background-color: #CCCCCC;border-right: 1px solid black;">
    <span style="font-weight: bold;">S</span>
    <br/>
    0&#45;0
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:10:23.720

```
<style type="text/css">
.wrapper {
    width: 400px;
    text-align: center;
}
span {
    display:block;
}
.box {
    float: left;
    height:40px;
    width: 40px;
    background-color: #CCCCCC;
    border-left: 1px solid black;
}
.box.act {
    background-color:white;
}
.box:first-child {
    border:none;
}
.box > span:first-child {
    font-weight:bold;
}
</style>

<div class="wrapper">
    <div class="box">
        <span>S</span>
        <span>0&#45;0</span>
    </div>
    <div class="box">
        <span>M</span>
        <span>5&#45;7</span>
    </div>      
    <div class="box">
        <span>T</span>
        <span>5&#45;7</span>
    </div>      
    <div class="box">
        <span>W</span>
        <span>5&#45;7</span>
    </div>      
    <div class="box">
        <span>R</span>
        <span>5&#45;7</span>
    </div>      
    <div class="box act">
        <span>F</span>
        <span>7&#45;5</span>
    </div>      
    <div class="box">
        <span>S</span>
        <span>0&#45;0</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:59:07.457

不要在最后一个 div 上添加边框。

使用填充来建立宽度和高度

# reporting-services - 带有 2 个数据集的 SSRS 2008 条形图

> ID：14984218
> 
> 赞同：0
> 
> 时间：2013-02-20T15:53:47.463
> 
> 标签：reporting-services, ssrs-2008, reporting, bar-chart

下午所有，

我正在创建一系列图表和折线图来报告数据。

我的用户需要的图表之一是一个条形图，它基本上包含两个值，我不太确定这可以做到吗？本质上，他绘制的图表的范围是 40 到 -40。他希望从 0 到 40 的范围报告一个值，并希望在 0 到 -40 的范围内报告另一个值。

如果我的两个仪表的值，我已经创建了一个存储过程来拉回两组数据，但无法找到一种在条形图中显示它的方法。

提前谢谢了。

问候下注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:02:30.843

我认为对您来说一个好的解决方法是使用两个彼此靠近的图形。

参见示例： ![在此处输入图像描述](../Images/f51b1f06b8514c82380f9780d543d62f.png)

对于下图，单击`Y-Axis`并将属性设置`Reverse`为`true`

# jquery - 客户端验证后重置 jQuery .one 事件

> ID：14984219
> 
> 赞同：1
> 
> 时间：2013-02-20T15:53:47.103
> 
> 标签：jquery

我有以下jquery函数

```
$('#AddItem').one("click", function () {

//client side validation code
//if validation passes make an ajax call. after call returns redirect to another page

$(this).click(function () { return false; });

} 
```

如果验证失败，该函数只触发一次。验证失败后有没有办法重新注册或重新绑定功能？

我添加了 .one 调用以防止双击。

# sql - 与表连接时，避免每个实例重复行

> ID：14984220
> 
> 赞同：0
> 
> 时间：2013-02-20T15:53:49.107
> 
> 标签：sql, sql-server-2008, tsql

嗨，我有 3 张桌子，我正试图加入他们以获得一张欲望桌子。我尝试了 group by 和 temp tables 选项来获得所需的表，但没有帮助。我想避免另一个表中一个表中值的每个实例重复。

表 1 客户表：

```
CstId          CstDetails       CstType    
----------  ---------------  ------------
    1           address 1         1
    2           address 2         1
    3           address 3         1
    4           address 4         2
    5           address 5         2 
```

表 2 客户关系：

```
CstId            CstGroupId
----------   ----------------
    1               4 (this is same as CustomerId)
    2               5 (this is same as CustomerId)
    3               4 (this is same as CustomerId) 
```

表 3 客户备注：

```
CstId          NotesId     NoteTxt
-----------   ---------    ---------
    1            1           note11
    1            2           note12
    1            3           note13
    3            1           note31
    4            1           note41
    4            2           note42
    4            3           note43
    4            4           note44
    4            5           note45 
```

现在我希望结果采用以下格式

```
Table result:
                                    (NoteId)  (Notetxt)    (NoteId)         (Notetxt)
    CstId  CstDetails  CstGroupId  CstNoteId   CstNote   CstGroupNoteId   CstGroupNote
      1    address1       4         1          note11        1              note41
      1    address1       4         2          note12        2              note42
      1    address1       4         3          note13        3              note43
      1    address1       4         null       null          4              note44
      1    address1       4         null       null          5              note45 
```

但是我正在为所有 CstNote 重复 CstGroupNote，这是我试图避免的。

有没有办法我可以达到这个结果？

以下是我使用的代码：

```
select c.cstid, c.cstdetails, cn.cstnotesid, cn.cstnotetxt
insert into temp1
from customer c
    left outer join customernotes cn
        on c.cstid = cn.cstid
where c.customertypeid = 1

select cr.cstid, cr.cstgroupid, cn.cstgroupnoteid, cn.cstnotetxt
insert into temp2
from customerrelationship cr
    left outer join customernotes cn
        on cr.cstgroupid = cn.customerid

select t1.cstid, t1.cstdetails, t1.cstnotesid, t1.cstnotetxt, t2.cstgroupnoteid, t2.cstnotetext
from temp1 t1
    left outer join t2
        on t1.cstid = t2.cstid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:55:29.610

尝试：

```
select CstId, 
       max(CstDetails) CstDetails, 
       max(CstGroupId) CstGroupId, 
       max(CstNoteId) CstNoteId, 
       max(CstNote) CstNote, 
       max(CstGroupNoteId) CstGroupNoteId, 
       max(CstGroupNote) CstGroupNote
from
(select c.CstId, 
        c.CstDetails,
        0 CstGroupId,
        n.NotesId CmbNotesId,
        n.NotesId CstNoteId,
        n.NoteTxt CstNote,
        0 CstGroupNoteId,
        '' CstGroupNote
 from customer c
 left outer join customernotes n on c.cstid = n.cstid
 where c.customertypeid = 1
 union all
 select c.CstId,
        c.CstDetails,
        r.CstGroupId,
        n.NotesId CmbNotesId,
        0 CstNoteId,
        '' CstNote,
        n.NotesId CstGroupNoteId,
        n.NoteTxt CstGroupNote
 from customer c
 left outer join customerrelationship r on c.cstid = r.cstid
 left outer join customernotes n on r.CstGroupId = n.cstid
 where c.customertypeid = 1) u
group by CstId, CmbNotesId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:29:57.183

使用派生表和外连接
诀窍是
和 cn.cstnotesid = cG.cstnotesid
将这两个链接到一行

```
select c.cstid, c.cstdetails, cn.cstnotesid, cn.cstnotetxt
      ,cG.CstGroupId, cG.cstnotesid, cG.cstnotetxt
from customer c
join customernotes cn
  on cn.cstid = c.cstid 
outer join  (select c.cstid, c.CstGroupId, cn.cstnotesid, cn.cstnotetxt
                from customer c
                join customernotes cn
                on cn.cstid = c.CstGroupId) as cG
        on c.cstid = cG.cstid
       and cn.cstnotesid = cG.cstnotesid
order by c.cstid, cn.cstnotesid, cG.cstnotesid 
```

# jquery - Jquery插件treeTable：无法正确显示

> ID：14984224
> 
> 赞同：0
> 
> 时间：2013-02-20T15:54:03.600
> 
> 标签：jquery, html-table, treetable

我正在使用一个 Jquery 插件 treeTable 来显示一个 html 表格。[http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/)我的代码如下：

```
<html>
<head>
<link href="treeTable/src/stylesheets/jquery.treeTable.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="treeTable/src/javascripts/jquery.treeTable.js"></script>

<script type="text/javascript" src="treeTable/doc/javascripts/jquery.js"></script>
<script type="text/javascript" src="treeTable/doc/javascripts/jquery.ui.js"></script>

<script>

  $(document).ready(function() {
    $('.type_struct_class').treeTable({
        initialState: 'collapsed'
        });
    $('table#type_struct tbody tr').mousedown(function() {
        $('tr.selected').removeClass('selected'); 
        $(this).addClass('selected');
    });
    $(\"table#type_struct tbody tr span\").mousedown(function() {
        $($(this).parents(\"tr\")[0]).trigger(\"mousedown\");
    });

});
</script>
</head>
<body>

<table class='type_struct_class' id='type_struct'>
  <tr id="node-1">
    <td>Parent</td><td>100</td><td>1000</td>
  </tr>
  <tr id="node-2" class="child-of-node-1">
    <td>Child</td><td>200</td><td>2000</td>
  </tr>
  <tr id="node-3" class="child-of-node-2">
    <td>Child</td><td>300</td><td>3000</td>
  </tr>
</table>

</body>
</html> 
```

我没有看到表格格式化，就像子节点和父节点一样。它在我的 Chrome 浏览器中显示为普通表格。谁能帮助我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T21:36:30.117

我发现 jQuery 树表和 Atlassian 产品的集成很困难，并编写了一个兼容的脚本克隆。它也有一些用于动态生成表格的辅助函数：您可以尝试一下：[http ://culmat.github.io/jsTreeTable/](http://culmat.github.io/jsTreeTable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:08:40.727

试试这个：- [http://jsfiddle.net/adiioo7/6mtnL/](http://jsfiddle.net/adiioo7/6mtnL/)

```
$(document).ready(function () {
    $('.type_struct_class').treeTable({
        initialState: 'expanded'
    });
    $('table#type_struct tbody tr').mousedown(function () {
        $('tr.selected').removeClass('selected');
        $(this).addClass('selected');
    });
    $("table#type_struct tbody tr span").mousedown(function () {
        $($(this).parents("tr")[0]).trigger("mousedown");
    });
}); 
```

# spring - Magnolia Blossom : 两个页面共享同一个区域

> ID：14984226
> 
> 赞同：1
> 
> 时间：2013-02-20T15:54:08.213
> 
> 标签：spring, content-management-system, freemarker, area, magnolia

我正在为我的 Web 应用程序使用 Magnolia Spring Integration (Blossom)，我绝对不明白如何（如果可能的话）在两个页面之间共享一个独特的区域。

这就是我到目前为止的工作方式：

*   我有三个模板`main-template`，`template-1`和`template-2`.
*   `template-1`并且`template-2`都`main-template`通过重新定义自己的*“身体”*区域来重定向。
*   在我的班级中，`template-1`我有三个领域`content-area`：`area-1`和`area-2`
*   在我的脚本中，`template-1`我包含了三个具有以下指令的区域：`[@cms.area name="content-area"/]`，`[@cms.area name="area-1"/]`

`[@cms.area name="area-2"/]`

*   `template-2`类和脚本中定义了相同的区域

我想要的是在和`area-1`之间分享，可以说。问题是，通过在每个类中重新定义它们，它们被认为是不同的区域...... 通过我的测试和 magnolia 文档，我理解的是一个区域只能在模板类中定义，因此可以在脚本中访问它此模板的部分，并且只有在与页面关联的模板类中直接定义的区域才会被处理/呈现。 无论我尝试什么，只要这些区域未在页面的模板类中定义，它们就无法访问，因此包含的页面不会呈现它们的区域。 有没有人知道我如何在另一个模板中“包含”或处理来自其他模板的“区域”？还是我做错了？`template-1``template-2`

感谢您的时间。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-29T15:26:26.977

我知道这是一个老问题，但它仍然是一个有效的问题，所以让我回答一下：据我所知，区域可以从其他区域继承（使用“扩展 ...”的普通 Java 类继承）。据我所知，这在 2013 年还没有，但现在可以了。我知道这一点，因为我曾将其作为功能请求提交一次，并且在某个时候被标记为已解决，而且我想我也成功使用过一次（不记得清楚）。

如果由于某种原因仍然无法从超类扩展区域，那么您仍然可以使用传统工具，例如将逻辑放入辅助类并使实际区域非常小（即调用共享辅助类）。并且无论如何都可以共享实际的模板（.jsp 或 .ftl 文件）。

# c# - 列表 Serialization work on dev computer but failed on other computers I use this function to serialize in xml file a collection of object. public void SerializeEnvironment() { if (xs 问问题 问问题 2013-02-20T15:54:09.077 504 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I use this function to serialize in xml file a collection of object. public void SerializeEnvironment() { if (xs == null) xs = new XmlSerializer(typeof(IList<classes.environment>)); using (StreamWriter wr = new StreamWriter(ConfigFilePath)) xs.Serialize(wr, Environments); } The program works perfectly on my dev machine. But when i make deployment on other computers, the program failed on the serialization method with this error : System.InvalidCastException: [A]System.Collections.Generic.List1[Product] cannot be cast to [B]System.Collections.Generic.List1[Product]. Type A originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'. Type B originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'. at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterList1.Write3_ArrayOfEnvironment(Object o) I test many things to resolve but without success. Thanks in advance for any suggestions or resolution :) In addition, here my object class : [Serializable] public class Environment { public string name { get; set; } public string value { get; set; } public Environment(){} public Environment(string Name, string Value) { name = Name; value = Value; } } taking a wild guess, but is your dev machine 64 bit? If so, try compiling your project for x86\. You can do this by right-clicking your project in Solution Explorer and going to Properties. Click on the Build tab and change the Platform Target option from "Any CPU"/"x64" to "x86". Build your solution and redeploy to try again. c#serializationdeployment 4 3 回答 3 This answer is useful 2 大胆猜测，但是您的开发机器是 64 位的吗？如果是这样，请尝试为 x86 编译您的项目。您可以通过在解决方案资源管理器中右键单击您的项目并转到属性来执行此操作。单击 Build 选项卡并将 Platform Target 选项从“Any CPU”/“x64”更改为“x86”。构建您的解决方案并重新部署以重试。 于 2013-02-20T15:58:46.633 回答 This answer is useful 1 Try select all you references in solution explorer and set their Copy local property in Properties window to true, so they will be copied to the directory with executable or dll file after compilation. It should help if there are no necessary libraries on the target machine. 于 2013-02-20T16:05:11.607 回答 This answer is useful 0 I believe your test machines are not using the same version of .net as your release. If you test machines don't have .net 4.0 install it... If you test machines are running Windows XP and your release is in .net 4.5 you will need to downgrade your program to .net 4.0. 于 2013-02-20T16:01:53.010 回答 Related 1 ruby-on-rails - 在 Rails 中创建 API 命名空间控制器 3 javascript - Safari 上的调试功能以了解何时将元素添加到页面 1 php - 如何在正则表达式中使用常量或 var 进行 preg_match/preg_match_all？ 4 c++ - 如何将方法作为回调传递给另一个类？ 1 php - 更改图像 px 3 iphone - ViewController respondsToSelector:]: 消息发送到释放的实例 3 jquery - 如何使fancybox灯箱出现在页面加载中 5 javascript - HTML & JQuery：将数据从一页移动到第二页 2 javascript - 使用 TowerJS 创建登录表单 1 twitter - Twitter计数器显示随机数 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</classes.environment>

> ID：14984227
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, serialization, deployment

I use this function to serialize in xml file a collection of object.

```
 public void SerializeEnvironment()
    {            
            if (xs == null) xs = new XmlSerializer(typeof(IList<Classes.Environment>));

            using (StreamWriter wr = new StreamWriter(ConfigFilePath))
                xs.Serialize(wr, Environments);            
    } 
```

The program works perfectly on my dev machine. But when i make deployment on other computers, the program failed on the serialization method with this error :

> System.InvalidCastException: [A]System.Collections.Generic.List`1[Product] cannot be cast to [B]System.Collections.Generic.List`1[Product]. Type A originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'. Type B originates from 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' in the context 'LoadNeither' at location 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'. at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterList1.Write3_ArrayOfEnvironment(Object o)

I test many things to resolve but without success. Thanks in advance for any suggestions or resolution :)

In addition, here my object class :

```
[Serializable]  
public class Environment
{
    public string name { get; set; }
    public string value { get; set; }
    public Environment(){}
    public Environment(string Name, string Value)
    {
        name = Name;
        value = Value;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:58:46.633

大胆猜测，但是您的开发机器是 64 位的吗？如果是这样，请尝试为 x86 编译您的项目。您可以通过在解决方案资源管理器中右键单击您的项目并转到属性来执行此操作。单击 Build 选项卡并将 Platform Target 选项从“Any CPU”/“x64”更改为“x86”。构建您的解决方案并重新部署以重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:05:11.607

Try select all you references in `solution explorer` and set their `Copy local` property in `Properties` window to `true`, so they will be copied to the directory with executable or dll file after compilation. It should help if there are no necessary libraries on the target machine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:01:53.010

I believe your test machines are not using the same version of .net as your release. If you test machines don't have .net 4.0 install it... If you test machines are running Windows XP and your release is in .net 4.5 you will need to downgrade your program to .net 4.0.

# jquery - 分别应用于 id 选择的每个元素的动画问题

> ID：14984229
> 
> 赞同：0
> 
> 时间：2013-02-20T15:54:08.337
> 
> 标签：jquery

你好，对不起，如果我的英语不好..

我正在研究 Jquery 4/5 天，我正在尝试在我制作的页面中使用它。我正在尝试创建一个非常简单的动画，其中 id=#opacity 的图像的某些属性随着鼠标悬停而变化，然后通过 mouseleave 恢复正常。

现在.. 使用另一个#id 作为选择器，在这种情况下为 (#p)，当鼠标悬停时，每个图像都可以正常工作，改变其不透明度。如果我删除另一个选择器，则只有第一个图像有效，而其他选择器无效。可能这是一个愚蠢的问题，但我对 jQuery 真的很陌生。

非常感谢。

```
$(document).ready(function(){
        animazione();
    });

    function animazione() {

    var opacity = $('#opacity, #p');

    opacity.mouseover(function(){
        $(this).animate({
            opacity: '1.0',
        },350).mouseleave(function(){
            $(this).animate({
                opacity: '0.6',
            },200);
        });
    });
    } 
```

这是带有图像的html部分。

```
<div class="container_5">
        <div class="grid_1">
            <a href="#">
                <img src="img/monitor.png" id="opacity" alt="monitor" class="ambits" style="margin-top: 80px;">
            </a>
        </div>
        <div class="grid_1">
            <a href="#">
                <img src="img/rulli.png" id="opacity" alt="rulli" class="ambits" style="margin-top: 75px;">
            </a>
        </div>
        <div class="grid_1">
            <a href="#">
                <img src="img/lucchetto.png" id="opacity" alt="lucchetto" class="ambits" style="margin-top: 100px;">
            </a>
        </div>
        <div class="grid_1">
            <a href="#">
                <img src="img/cuore.png" id="opacity" alt="cuore" class="ambits" style="margin-top: 100px;">
            </a>
        </div>
        <div class="grid_1">
            <a href="#">
                <img src="img/allest.png" id="opacity" alt="allestimento" class="ambits" style="margin-top: 90px;">
            </a>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:58:04.837

HTML 元素的`id`属性定义了该特定元素的唯一标识符，因此`id`页面上每个属性的值都必须是唯一的。你不能有多个元素，`id="opacity"`因为它是无效的 HTML。

当您在`$('#opacity')`内部使用 jQuery 时，会使用本机 JavaScript`document.getElementById()`函数，该函数将仅选择一个指定的元素`id`（通常是 DOM 中的第一个，但我不确定是否有保证）。

如果您想将元素组合在一起并一次与它们交互，请使用 a`class`代替。

# jquery - 谷歌地图不在fancybox的中心

> ID：14984232
> 
> 赞同：2
> 
> 时间：2013-02-20T15:54:23.800
> 
> 标签：jquery, google-maps, fancybox, fancybox-2

我一直在寻找和尝试一整天，但找不到解决这个问题的正确方法。我需要居中的部分总是在 FF 和 IE 的左上角，Safari 似乎更左下角......

这是您需要尝试、复制、粘贴和单击的所有代码...

大屏幕很好看问题在小屏幕上看起来不错

感谢帮助

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.4"></script>
<link rel="stylesheet" type="text/css" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.1.4" media="screen" />
<script type="text/javascript">
    $(document).ready(function() {
        $(".google_iframe").fancybox({
            'width'             : '75%',
            'height'            : '75%',
            'autoScale'         : false,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'type'              : 'iframe'
        });
    });
</script>
</head>
<body>
<a class="google_iframe" href="https://maps.google.com/maps/ms?ie=UTF8&amp;msa=0&amp;msid=202414688179067925321.0004d62815a849d23c081&amp;t=h&amp;ll=43.36373,16.508332&amp;spn=1.617251,3.364563&amp;output=embed">
    click here for fancy
</a>
</body>
</html> 
```

[jsFiddle](http://jsfiddle.net/q4E3p/ "链接到 jsFiddle")

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T21:32:24.940

当您尝试预加载fancybox `iframe`（默认值为`true`）时，似乎会出现此问题。作为一种解决方法，只需`iframe`在您的 fancybox 自定义脚本中禁用预加载，例如：

```
$(document).ready(function () {
    $('.google_iframe').fancybox({
        // 'autoScale'    : false, // not valid in v2.x, use autoSize instead
        // 'transitionIn' : 'none', // not valid in v2.x, use openEffect instead
        // 'transitionOut': 'none', // not valid in v2.x, use closeEffect instead
        width      : '75%',
        height     : '75%',
        autoSize   : false,
        openEffect : 'none',
        closeEffect: 'none',
        type       : "iframe",
        iframe     : {
           preload : false // this will prevent to place map off center
        }
    });
}); 
```

...**请注意**，我注释掉了 v1.3.4 的一些 API 选项，这些选项在 v2.x 中无效

请参阅**[JSFIDDLE](http://jsfiddle.net/Sy8F8/)** ...或整页请参阅[http://jsfiddle.net/Sy8F8/show/lite/](http://jsfiddle.net/Sy8F8/show/lite/)，然后您可以将其与整页（未居中）[jsfiddle进行比较](http://jsfiddle.net/q4E3p/show/lite/)

# c - 关闭 telnet 会话会将标准输出重定向到 http 套接字

> ID：14984233
> 
> 赞同：0
> 
> 时间：2013-02-20T15:54:37.437
> 
> 标签：c, sockets, stdout, netlink

我有一个将日志输出显示到标准输出的程序。

因此，如果我打开一个到我的目标 linux 的 telnet 会话，然后在这个 telnet 会话上启动我的程序，那么我将在我的 telnet 会话上显示日志消息。

在我的程序中，我运行了一个小型 http 服务器。现在，如果我更改目标 linux 的 IP 地址，然后重新启动接口（http 服务器将自动重新启动，因为我使用 netlink 检测到 IP 地址的更改）然后我将关闭 telnet 会话并重定向 stdout 消息到我的 http 服务器打开的套接字，我将锁定日志消息的 printf。

我尝试使用 select 来检测这个锁，但没有成功：[How to use select with stdout?](https://stackoverflow.com/questions/14983565/how-to-use-select-with-stdout)

在进入 prinf 之前选择返回成功（锁定）

有什么建议可以避免这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:52:13.097

如果我理解正确的话，由于IP地址的变化，运行HTTP服务器的telnet会话（你为什么不使用SSH？？）会被破坏。

如果程序继续向这个会话（这是它的标准输出）写入数据，之后会发生什么，首先写入将成功，因为系统缓冲数据，然后最终写入将阻塞（而不是“锁定”）。最后，TCP 连接将超时，写入将返回错误。TCP 会话超时可能需要很长时间，也可能不需要很长时间，但最终会。

如果您想避免阻塞（例如，如果您的应用程序是事件驱动的并且不能阻塞），您可以使您的日志输出代码使用非阻塞写入标准输出。您将需要使用`fcntl`将 stdout 更改为非阻塞，并且您可能需要完全避免使用 stdio，因为 stdio 不是为使用非阻塞输出而设计的。您必须实现自己的缓冲并直接写入文件描述符 1。

您还提到要在标准输出日志损坏后登录到 HTTP 连接。你也可以这样做（一旦你得到一个写入标准输出的错误就会触发）但它会做更多的工作。您必须在应用程序内部管理日志缓冲区，直到 HTTP 客户端连接并请求它。如果日志太大，您还需要添加丢弃日志的规定，以防没有 HTTP 客户端连接。所有这些都超出了 SO 问题的范围......

# emacs - ido-completing-read - 历史列表应该如何表现？

> ID：14984237
> 
> 赞同：4
> 
> 时间：2013-02-20T15:54:57.453
> 
> 标签：emacs, elisp, ido

包括历史列表根本没有区别。颜色仍按原始顺序显示。

```
(setq foo '("blue" "green" "red"))
(ido-completing-read "Pick: " '("red" "green" "blue") nil t nil 'foo) 
```

那么历史列表的作用是什么呢？是否有另一种方法可以根据历史记录更改元素的顺序，例如 smex？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:44:43.380

当我们在 minibuffer 中按上/下时使用历史列表。它不会改变元素的顺序。

# java - ActionListener 类的引用问题

> ID：14984240
> 
> 赞同：2
> 
> 时间：2013-02-20T15:55:08.780
> 
> 标签：java, swing, timer, actionlistener

我在将 Timer 引用到 ActionListener 类时遇到问题。我想在Java显示显示时间的对话框后停止计时器并在单击“是”后再次启动。

这是我目前拥有的：

```
public class AlarmClock 
{
    public static void main(String[] args)
    {
        boolean status = true;

        Timer t = null;

        ActionListener listener = new TimePrinter(t);
        t = new Timer(10000, listener);

        t.start();

        while(status)
        {
        } 
    }
}

class TimePrinter implements ActionListener
{   
    Timer t;

    public TimePrinter(Timer t)
    {
        this.t = t;
    }
    public void actionPerformed(ActionEvent event)
    {   
        t.stop();                //To stop the timer after it displays the time

        Date now = Calendar.getInstance().getTime();
        DateFormat time = new SimpleDateFormat("HH:mm:ss.");

        Toolkit.getDefaultToolkit().beep();
        int choice = JOptionPane.showConfirmDialog(null, "The time now is "+time.format(now)+"\nSnooze?", "Alarm Clock", JOptionPane.YES_NO_OPTION);

        if(choice == JOptionPane.NO_OPTION)
        {
            System.exit(0);
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Snooze activated.");
            t.start();           //To start the timer again
        }
    }
} 
```

但是，此代码给出了空指针异常错误。还有其他方法可以引用计时器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:02:02.480

这里有一个先有鸡还是先有蛋的问题，因为两个类的构造函数都需要相互引用。您需要以某种方式打破循环，最简单的方法是构造`Timer`没有侦听器，然后构造侦听器，然后将其添加到计时器：

```
 t = new Timer(10000, null);
    ActionListener l = new TimePrinter(t);
    t.addActionListener(l); 
```

或者，您可以添加一个 setter`TimePrinter`而不是将其传递`Timer`给它的构造函数：

```
class TimePrinter implements ActionListener
{   
    Timer t;

    public TimePrinter() {}

    public setTimer(Timer t)
    {
        this.t = t;
    } 
```

然后做

```
 TimePrinter listener = new TimePrinter();
    t = new Timer(10000, listener);
    listener.setTimer(t); 
```

无论哪种方式，最终的结果都是一样的。

# grails - neo4j 企业版 1.8.1 Cypher ExecuteEngine 错误？

> ID：14984241
> 
> 赞同：0
> 
> 时间：2013-02-20T15:55:13.007
> 
> 标签：grails, neo4j

我在 grails 上运行 neo4j 企业 1.8 并想升级到 1.8.1。由于我也广泛使用密码引擎，升级后我尝试执行一些查询。不幸的是，我在尝试启动 Cypher ExecutionEngine 时遇到了异常。

我写了一个为我工作的小服务：

```
import org.neo4j.cypher.javacompat.ExecutionEngine
import org.neo4j.kernel.impl.util.StringLogger

class CypherService {

    def graphDatabaseService

    static transactional = true

    def executeString(String cypherString) {
        log.debug "start method executeString"

        ExecutionEngine executionEngine = new ExecutionEngine(graphDatabaseService, StringLogger.DEV_NULL)
        if(executionEngine) {
            def result = executionEngine.execute(cypherString)
            return result
        } else {
            log.error "Could not initialize the execution engine for Cypher"
            return null
        }
    }
} 
```

启动执行引擎时，出现以下异常：

```
java.lang.NoSuchMethodError: com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap$Builder.maximumWeightedCapacity(J)Lcom/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap$Builder;
at org.neo4j.cypher.internal.LRUCache.<init>(LRUCache.scala:31)
at org.neo4j.cypher.ExecutionEngine$$anon$1.<init>(ExecutionEngine.scala:91)
at org.neo4j.cypher.ExecutionEngine.<init>(ExecutionEngine.scala:91)
at org.neo4j.cypher.javacompat.ExecutionEngine.<init>(ExecutionEngine.java:54)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at org.codehaus.groovy.reflection.CachedConstructor.invoke(CachedConstructor.java:77)
at org.codehaus.groovy.runtime.callsite.ConstructorSite$ConstructorSiteNoUnwrapNoCoerce.callConstructor(ConstructorSite.java:102)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallConstructor(CallSiteArray.java:52)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:190)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:202)
at com.netjay.fanorakel.CypherService.executeString(CypherService.groovy:16) 
```

知道这里出了什么问题，是否有避免这种情况的解决方案？

最好的迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:02:43.947

您可能还可以针对旧版本的 lib 重建 Neo4j 的 cypher 模块，或者实际上从 neo4j 中排除依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:13:11.587

我有同样的问题 - 1.8.1 我需要单独包含 concurrentlinkedhashmap-lru.1.3.1.jar

[http://code.google.com/p/concurrentlinkedhashmap/downloads/detail?name=concurrentlinkedhashmap-lru-1.3.1.jar&can=2&q=](http://code.google.com/p/concurrentlinkedhashmap/downloads/detail?name=concurrentlinkedhashmap-lru-1.3.1.jar&can=2&q=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T07:01:08.087

这里的问题是：

*   Neo4j 1.8.1 为 concurrentlinkedhashmap_lru 版本 1.3.1 引入了新的依赖项，并且
*   Grails 依赖于 concurrentlinkedhashmap_lru 版本 1.2_jdk5，并且
*   concurrentlinkedhashmap_lru 的 API 不向后兼容这两个版本。

因此，grails 代码库最近已升级以将依赖项移至 1.3.1，请参阅[https://github.com/SpringSource/grails-data-mapping/commit/b15e207a2a08ac16e77de399733cb9cc14eff48e](https://github.com/SpringSource/grails-data-mapping/commit/b15e207a2a08ac16e77de399733cb9cc14eff48e)和 [https://github.com/grails/grails-核心/提交/6dfab1a5db4da8c176351f23d65c7fc0d4aa6364](https://github.com/grails/grails-core/commit/6dfab1a5db4da8c176351f23d65c7fc0d4aa6364)。

因此，要将 Neo4j 1.8.1（和更新版本）与 Grails 一起使用，您可以等待新的 Grails 版本或自己构建 Grails 快照。

# javascript - X轴上的JQuery Flot未本地化时间

> ID：14984245
> 
> 赞同：2
> 
> 时间：2013-02-20T15:55:24.420
> 
> 标签：javascript, jquery, flot

我有一个使用 flot 绘图包的项目，除了我的 x 轴（即时间）显示本地化时间的时间外，我一切正常，但我希望它显示未本地化。

例如：输入到 flot 的数据的时间是上午 7:45（从服务器到 Unix 纪元的毫秒数），但 x 轴显示上午 12:45（这是有道理的，因为我在 MST-700 中）。

我知道发送的数据是正确的，因为我单步执行了该代码并确保它是正确的。我知道 JavaScript 有正确的时间，因为我告诉它输出给出的日期并且它是正确的（正确的是它显示上午 7:45 而不是上午 12:45）。我非常确信我的问题与时区有关，因为我将时区设置为 -1200，并且上午 7:45 的数据将显示为下午 20:45。这是我的情节配置：

```
var plotOptions = {
            series: { shadowSize: 0 }, // drawing is faster without shadows
            yaxis: { ticks: 5 },
            xaxis: { position: "bottom", mix: minX, max: maxX, mode: "time", timeformat: "%y/%m/%d %H:%M:%S"},
            yaxes: yAxes
        }; 
```

其中 maxX 是自 unix 纪元以来从服务器读取的最新时间（以毫秒为单位），而 minX 比 maxX 以毫秒为单位少一些分钟数。

我尝试将时区设置为空，这似乎与 timeZoneOffset 一样无效。日期和时间必须保持不变，因为我无法向它们添加/减去某些指定的时区。

TL;DR 如何在没有任何本地化（无时区）的情况下让 flot 显示时间？

任何帮助将不胜感激 ：）

* * *

编辑1：在对时间库（jquery.flot.time.js）进行一些测试时，我发现没有调用tickGenerator 和tickFormatter 函数。我在两个函数中都放了一个警报，显示它计算的日期，但我从来没有收到警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:05:42.260

你看过 API 文档吗？

[https://github.com/flot/flot/blob/master/API.md#customizing-the-axes](https://github.com/flot/flot/blob/master/API.md#customizing-the-axes)

看来您应该能够传入 timezone:"MST-700" 或类似内容，具体取决于您选择包含哪个库以进行时间格式化。通过同一页面搜索“时区”应该会产生更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:40:05.147

不太清楚为什么会这样，但我设法自己解决了这个问题。我取出 jquery.flot.time.js 文件，现在 x 轴显示正确。

我有一种感觉，图书馆无视我的时区选项。

# ios - 将测试 no-iCloud 更新为 iCloud 支持，得到错误 'no valid com.apple.developer.ubiquity-kvstore-identifier entitlement'

> ID：14984246
> 
> 赞同：0
> 
> 时间：2013-02-20T15:55:27.160
> 
> 标签：ios, testing, icloud, entitlements

我**只有**在从应用商店下载我的实时应用，然后通过 XCode 运行我的最新版本时才会遇到这个问题。当我运行“干净”的应用程序时，它工作正常。

我想确保用户能够更新应用程序并让 iCloud 按预期工作。

`NSUbiquitousKeyValueStore error: com.xxx.xxx has no valid com.apple.developer.ubiquity-kvstore-identifier entitlement`

这会是我提交更新时的问题，还是我的更新测试有缺陷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:25:12.883

在使用 OTA 而不是直接通过 XCode 测试更新后，它似乎工作正常。不知道为什么，但开发配置文件与 App Store 配置文件不匹配，而 Ad Hoc 配置文件则可以。

# c - DTRMM 和 DTRSM 挂在某些矩阵大小上

> ID：14984247
> 
> 赞同：2
> 
> 时间：2013-02-20T15:55:35.137
> 
> 标签：c, matrix-multiplication, blas

我正在使用 MKL 在新的英特尔至强融核协处理器上的自动卸载功能测试 ?GEMM、?TRMM、?TRSM 的性能，并且在使用 DTRMM 和 DTRSM 时遇到了一些问题。我有代码以 1024 到 10240 的步长测试矩阵大小的性能，并且在 N=M=K=8192 之后的某处性能似乎显着下降。当我尝试使用 2 的步长来准确测试位置时，我的脚本挂了。然后我检查了 512 个步长，它们工作得很好，256 个也工作得很好，但是 256 下的任何东西都会停止。我找不到与此问题有关的任何已知问题。所有单精度版本以及 ?GEMM 上的单精度和双精度版本都有效。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <stdint.h>
#include <time.h>
#include "mkl.h"

#define DBG 0

int main(int argc, char **argv)
{
   char transa = 'N', side = 'L', uplo = 'L', diag = 'U';
   MKL_INT N, NP; // N = M, N, K, lda, ldb, ldc
   double alpha = 1.0; // Scaling factors 
   double *A, *B; // Matrices 
   int matrix_bytes; // Matrix size in bytes 
   int matrix_elements; // Matrix size in elements
   int i, j; // Counters
   int msec;
   clock_t start, diff;

   N = atoi(argv[1]);

   start = clock();

   matrix_elements = N * N;
   matrix_bytes = sizeof(double) * matrix_elements;

   // Allocate the matrices
   A = malloc(matrix_bytes);
   if (A == NULL)
   {
      printf("Could not allocate matrix A\n");
      return -1;
   }

   B = malloc(matrix_bytes);
   if (B == NULL)
   {
      printf("Could not allocate matrix B\n");
      return -1;
   }

   for (i = 0; i < matrix_elements; i++)
   {
      A[i] = 0.0;
      B[i] = 0.0;
   }

   // Initialize the matrices
   for (i = 0; i < N; i++)
      for (j = 0; j <= i; j++)
      {
         A[i+N*j] = 1.0;
         B[i+N*j] = 2.0;
      }

   // DTRMM call
   dtrmm(&side, &uplo, &transa, &diag, &N, &N, &alpha, A, &N, B, &N);

   diff = clock() - start;
   msec = diff * 1000 / CLOCKS_PER_SEC;
   printf("%f\n", (float)msec * 10e-4);

   if (DBG == 1)
   {
      printf("\nMatrix dimension is set to %d \n\n", (int)N);

      // Display the result
      printf("\nResulting matrix B:\n");
      if (N > 10)
      {
         printf("NOTE: B is too large, print only upper-left 10x10 block...\n");
         NP = 10;
      }
      else
         NP = N;

      printf("\n");
      for (i = 0; i < NP; i++)
      {
         for (j = 0; j < NP; j++)
            printf("%7.3f ", B[i + j * N]);
         printf("\n");
      }
   }

   // Free the matrix memory
   free(A);
   free(B);

   return 0;
} 
```

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:37:08.393

这种现象已在其他问题以及英特尔的软件优化手册和 Agner Fog 的笔记中得到广泛讨论。

通常，您会在内存层次结构中经历一场完美的驱逐风暴，以至于突然（几乎）*每次访问*都未命中缓存和/或 TLB（可以通过查看特定的数据访问模式或使用PMC；我可以稍后在我靠近白板时进行计算，除非你先找到神秘的东西）。

您还可以搜索我或 Mystical 的一些答案以查找以前的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:46:36.583

问题是英特尔 icc 编译器的旧版本（我相信 beta 10 更新......也许）。黄金更新就像一个魅力。

# regex - 从html元素中提取属性值

> ID：14984251
> 
> 赞同：0
> 
> 时间：2013-02-20T15:55:52.180
> 
> 标签：regex

已经为此苦苦挣扎了几个小时...

我有以下正则表达式：

```
(?<=\bdata-video-id=""."">)(.*?)(title=.*?>) 
```

以下输入：

```
 <div class="cameras">            
            <table class="results">
                <colgroup>
                    <col class="col0">
                    <col class="col1">
                </colgroup>
                <thead>
                    <tr>
                        <th title="Name">
                            Name
                        </th>
                        <th title="Date">
                            Date
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-video-id="1">
                        <td title="149 - Cam123">
                            149 - Cam123
                        </td>
                        <td title="Feb 18 2013">
                            Feb 18 2013
                        </td>
                    </tr>
                    <tr data-video-id="2">
                        <td title="150 - Cam456">
                            150 - Cam456
                        </td>
                        <td title="Feb 18 2013">
                            Feb 18 2013
                        </td>
                    </tr>                   
                </tbody>
            </table>
        </div> 
```

正则表达式输出：

```
<td title="149 - Cam123">
<td title="150 - Cam456"> 
```

但我想得到的是每个表格行中**第一个单元格的 title 属性的内容：**

```
149 - Cam123
150 - Cam456 
```

行数可能明显不同，但列数是固定的。请帮我微调上面的正则表达式。谢谢

**注意**：解决方案**必须**是正则表达式。我无权访问代码库，因此无法使用 HTML 解析器或任何其他类型的代码干预。我可以挂接到应用程序的唯一方法是注入不同的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:58:21.767

基于它必须是正则表达式的 OP 要求，那么我的建议是在内部标题信息中添加一个组包装器：

```
(?<=\bdata-video-id=""."">).*?title="(.*?)"> 
```

否则，一般的解决方案是不使用正则表达式：

你为什么使用正则表达式？由于标签的复杂性，典型的解决方案是使用 HTML 解析器

[这是关于此主题的 SO](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)

[这是Jeff Atwood 在这篇博文](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)中指出[的另一个更流行的关于使用 XHTML 的正则表达式的回应](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# android - ListItem 在 Android 中不可触摸/可点击

> ID：14984254
> 
> 赞同：1
> 
> 时间：2013-02-20T15:55:56.283
> 
> 标签：android, android-listview, listitem, onitemclick

我有我的扩展 ListActivity 的 MainActivity 类，我将适配器设置为通过方法中的自定义适配器列出`onResume()`。

```
@Override
protected void onResume() 
{
    super.onResume();
    this.setListAdapter(null);
    adapter=new ContactListAdapter(this, R.id.txvNNPersonId, helper.getContacts(sortByname));       
    setListAdapter(adapter); 
} 
```

处理列表项点击，我用这个

```
protected void onListItemClick(ListView l, View v, int position, long id) 
    { 
        RelativeLayout r=(RelativeLayout)v;
        TextView txvPersonId=(TextView)r.getChildAt(0);
        int iid=Integer.parseInt(txvPersonId.getText().toString());
        Intent intent=new Intent(this,ViewContactActivity.class);
        intent.putExtra("id", iid);
        startActivityForResult(intent, VIEW_RECORD);
        //these is not working, these event is not raised, when clicked on listitem click
    } 
```

但是当通过鼠标单击/触摸项目时它不起作用，它仅在我将它与选择并实现的项目一起使用时才起作用`onItemSelectedListener`

```
@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    RelativeLayout r=(RelativeLayout)arg1;
    TextView txvPersonId=(TextView)r.getChildAt(0);
    int id=Integer.parseInt(txvPersonId.getText().toString());
    Intent intent=new Intent(this,ViewContactActivity.class);
    intent.putExtra("id", id);
    startActivityForResult(intent, VIEW_RECORD);
} 
```

这仅适用于模拟器上的箭头键，但在真实设备上，（通常）它们没有箭头/导航键，如何定义列表项的单击？

编辑：row_item.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:longClickable="true"
          android:orientation="horizontal">

 <TextView android:id="@+id/txvPersonId"
          android:layout_width="wrap_content"
          android:layout_height="40dp"
          android:visibility="invisible" />   -->

<!-- this is name -->
 <TextView android:id="@+id/txvPersonName"
          android:layout_marginLeft="5dp"             
          android:layout_width="match_parent"
          android:layout_height="40dp"
          android:gravity="center_vertical"
          android:text="asd"
          android:textSize="15sp"
          android:paddingBottom="5dp" />

 </RelativeLayout>` 
```

# java - 启动tomcat时如何传递-D附加参数？

> ID：14984256
> 
> 赞同：28
> 
> 时间：2013-02-20T15:56:01.453
> 
> 标签：java, parameters, batch-file, tomcat6, environment

我有一个 maven 项目，在运行命令**mvn install** all project 以及模块编译并成功复制到本地存储库后。但现在我想在 tomcat6 中运行生成的 web 应用程序。客户端为tomcat提供了一些参数，`-Dapp.username,-Dapp.username,`一旦项目启动，将在内部使用。但我不知道如何在tomcat6中设置这些附加参数。下面是我的开发环境

1.  操作系统 = Windows
2.  Tomcat = tomcat 6.0.27

请帮我？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-03-08T20:39:50.113

对于 Tomcat 6，您应该将参数添加到 startup.sh (Windows startup.bat)。对于 Tomcat 7 及更高版本，您应该在 {Catalina Root}/bin/setenv.sh 中设置参数，如下所示：

```
export CATALINA_OPTS="$CATALINA_OPTS -Dapp.username=username -Dapp.password=password" 
```

或在 Windows 中：

```
set CATALINA_OPTS="$CATALINA_OPTS -Dapp.username=username -Dapp.password=password" 
```

**注意：请注意开头的 $CATALINA_OPTS，这样您就不会清除任何先前设置的值。不这样做会产生一个非常难以调试的问题！**

如果您设置的参数仅供 Tomcat 使用，请务必使用`CATALINA_OPTS`.

如果您的应用程序将使用这些参数，那么请务必使用`JAVA_OPTS`。Tomcat 也会读取这些参数。这也可以放在 setenv.sh 文件中。例如：

```
export JAVA_OPTS="$JAVA_OPTS -Dapp.username=username -Dapp.password=password" 
```

或在 Windows 中：

```
set JAVA_OPTS="$JAVA_OPTS -Dapp.username=username -Dapp.password=password" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-20T15:58:39.110

您可以设置一个环境变量来执行此操作。例如在 Linux 中：

> export JAVA_OPTS="-Dapp.username -Dapp.username"

或在 Windows 中：

> 设置 JAVA_OPTS="-Dapp.username -Dapp.username"

在启动 Tomcat 之前执行此操作

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-20T16:04:21.930

您需要设置`CATALINA_OPTS`系统变量 - 启动时由 Tomcat（且仅由 Tomcat）读取。正如@Betoverse 所说，您可以使用两种方法进行设置：

```
export CATALINA_OPTS="-Dapp.username -Dapp.username" 
```

或在 Windows 中：

```
set CATALINA_OPTS="-Dapp.username -Dapp.username" 
```

您可以将该命令添加到您`~/.profile`的 UNIX 上以自动设置它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-11-01T13:22:26.713

我已经在 Windows 10 和 CentOs 7 (Linux) 上测试了 Tomcat 7/8 的参数。
**1)**在 Windows 上需要在**{TOMCAT_HOME}/bin/路径中创建****setenv.bat**并在其中插入这样的代码：

 **```
set CATALINA_OPTS=-Dapp.username=admin -Dapp.password=12345 
```

**重要提示**：不要使用引号 (" ") 在 Windows 上设置参数。

**2)**在 CentO 上需要在**{TOMCAT_HOME}/bin/**路径中创建 setenv.sh**并**在其中插入这样的代码：

 **```
export CATALINA_OPTS="-Dapp.username=admin -Dapp.password=12345" 
```

您还可以创建 **{TOMCAT_HOME}/conf/conf.d/custom.conf**并在其中插入相同的**导出**命令。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-05T17:41:12.113

如果您不想更改环境或编辑 .sh 文件，您可以使用以下内容启动服务器

```
CATALINA_OPTS="-Dparam1=value1 -Dparam2=value2" catalina.sh start 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T10:12:35.553

在启动 tomcat 服务器之前右键单击项目 --> 运行方式 --> 运行配置第二个选项卡 --> **-Dname** = values ， **-Dname** =values ， -Dname=values

+Dname=value 怎么样，它被加密的值****

# asp.net - gridview列boundfield错误

> ID：14984261
> 
> 赞同：0
> 
> 时间：2013-02-20T15:56:15.437
> 
> 标签：asp.net, boundfield

在 GridView 内，然后在列内我有一个绑定字段

```
<asp:BoundField DataField="Company Name" HeaderText="Company Name" SortExpression="Name" /> 
```

这将显示公司名称的列列表（很好），但是 headerText 是一个可点击的链接，会引发错误......我怎样才能让 headertext 显示为正常的计划不可点击标签

ta

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:04:13.380

Probably because you marked the bound field to be sortable and you didn't implement the sort on the server side... probably. Remove the SortExpression and see what's happening. You should post more info starting with the exception you have.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:43:53.347

只需删除 SortExpression

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:07:36.410

您可以使用`AllowSorting="False"`gridview。

```
 <asp:GridView AllowSorting="False">
      <asp:BoundField DataField="Company Name" HeaderText="Company Name"/>
  </asp:GridView> 
```

# django - 无法解析剩余的 django pybb

> ID：14984262
> 
> 赞同：1
> 
> 时间：2013-02-20T15:56:19.787
> 
> 标签：django, django-templates

尝试在 Django 上安装 PyBB，尝试启动论坛页面时出错，在新安装的虚拟机上做同样的事情一切正常，在我的 Django 上看起来像问题，可能是什么问题？

```
TemplateSyntaxError at /forum/

Could not parse the remainder: ':pybb_category_add' from 'admin:pybb_category_add'

Request Method:     GET
Request URL:    http://127.0.0.1:8000/forum/
Django Version:     1.5
Exception Type:     TemplateSyntaxError
Exception Value:    

Could not parse the remainder: ':pybb_category_add' from 'admin:pybb_category_add'

Exception Location:     /usr/local/lib/python2.7/dist-packages/django/template/base.py in __init__, line 570
Python Executable:  /usr/bin/python
Python Version:     2.7.3
Python Path:    

['/home/denis/hosts/blog',
 '/usr/local/lib/python2.7/dist-packages/django_simple_captcha-0.3.5-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/pytz-2012h-py2.7.egg',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/pymodules/python2.7',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']

Error during template rendering

In template /usr/local/lib/python2.7/dist-packages/pybb/templates/pybb/index.html, error at line 17
Could not parse the remainder: ':pybb_category_add' from 'admin:pybb_category_add'
7   {% with extra_crumb="Forum" %}{% include "pybb/breadcrumb.html" %}{% endwith %}
8   {% endblock %}
9   
10  {% block content %}
11  {% if categories %}
12  {% for category in categories %}
13  {% include 'pybb/category.html' %}
14  {% endfor %}
15  {% else %}
16  <h2>{% trans "Forum categories are not created" %}</h2>
17  <a href="{% url admin:pybb_category_add %}">{% trans "Add a category now" %}</a>
18  {% endif %}
19  {% if user.is_authenticated %}
20  <div id='mark-all-as-read'>
21  <a href='{% url pybb:mark_all_as_read %}'>
22  {% trans "Mark all forums as read" %}
23  </a>
24  </div>
25  {% endif %}
26  {% endblock content %}
27 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:01:01.717

[`{% url %}`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)使用标签时尝试使用引号：

```
<a href="{% url 'admin:pybb_category_add' %}">{% trans "Add a category now" %}</a>%}
...
<a href="{% url 'pybb:mark_all_as_read' %}"> 
```

从文档：

> 第一个参数是以 package.package.module.function 格式的视图函数的路径。它可以是带引号的文字或任何其他上下文变量。

# entity-framework - 构建包装 NHibernate 的公司特定框架是否可行？

> ID：14984263
> 
> 赞同：0
> 
> 时间：2013-02-20T15:56:22.040
> 
> 标签：entity-framework, zend-framework, nhibernate, entity, feasibility

我听说使用 Java 技术的公司，他们曾经构建自己的自定义框架来包装 Hibernate。但是，他们的 .Net 同行用 NHibernate 或 Entity Framework 做同样的事情真的可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:38:03.753

[这几乎总是一个可怕的想法——我认为 Ayende 在这篇文章](http://ayende.com/blog/4567/the-false-myth-of-encapsulating-data-access-in-the-dal)中总结得最好。一般来说，您应该将 NHibernate 本身视为围绕您的数据访问的“包装器”——试图在它之上构建一个抽象层可能会是一个失败的提议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:45:12.847

实际上，您应该查看[.NET Junkie 的博客](https://cuttingedge.it/blogs/steven/)上的一些文章。他写了几篇关于如何处理存储库、[查询](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)、[命令](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)等的精彩文章。我们一直在一个非常大的企业系统中使用这些，我们在内存字典、内存 SQLite 数据库和使用 SQL Server 或 Oracle 的生产环境之间切换。显然，我们为此使用 NHibernate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:52:28.090

我使用存储库模式和一个单独的项目/dll 来抽象出数据框架 nhibernate / 实体框架。这是一个很好的起点[http://codebetter.com/petervanooijen/2008/04/04/wrapping-up-nhibernate-in-repositories/](http://codebetter.com/petervanooijen/2008/04/04/wrapping-up-nhibernate-in-repositories/)

# ruby-on-rails - Rails：如何获取，然后迭代父模型的所有子模型（+子模型等）？

> ID：14984265
> 
> 赞同：0
> 
> 时间：2013-02-20T15:56:25.417
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

有没有一种方法可以轻松有效地获取父模型的相应（子）模型，然后在模板中呈现它？我想知道如何使用和不使用连接

例如，考虑这 3 个表：

```
# ProductGroup is the highest parent
class ProductGroup < ActiveRecord::Base
  attr_accessible :name, :merchant_id
  has_many :product_items
  has_many :product_group_selections
end

# ProductItem is a child of ProductGroup
class ProductItem < ActiveRecord::Base
  attr_accessible :base_price, :name, :product_group_id
  belongs_to :product_group
end

# ProductGroupSelection is a child of ProductGroup
class ProductGroupSelection < ActiveRecord::Base
  attr_accessible :name, :price_extra, :product_attr_group_id, :product_item_id
  belongs_to :product_group
  has_many :product_group_selection_attrs
end

# ProductGroupSelectionAttr is a child of ProductGroupSelection
class ProductGroupSelectionAttr < ActiveRecord::Base
  attr_accessible :name, :product_group_id
  belongs_to :product_group_selection
end 
```

我想要的是一个看起来像这样的数据结构（在 product_groups 中搜索 Mercer_id = 1 时）

```
merchant_id 1 => {  
          ProductGroup.name, ProductGroup.merchant_id,  
          ProductItems => [...],
          ProductGroupSelections => {ProductGroupSelections.name, ProductGroupSelectionAttrs => [...]}
} 
```

这样，我可以依次循环遍历所有组及其子模型，以使用 ERB 生成表单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:32:08.137

当迭代一个又包含集合的记录集合时，您将遇到臭名昭著的 N+1 查询。基本上，对于每个 ProductGroup，您都会运行一个查询来拉回它的所有 ProductItem 记录。更糟糕的是，如果您使用 2 个级别的关系。

为了使这项工作更有效，您希望使用 ActiveRecord 定义为在尽可能少的查询中预先加载关联的方法。

```
ProductGroup.includes(:product_items).includes(:product_group_selections => :product_group_selection_attrs) 
```

从那里您只需添加您需要的任何条件，并且为 ProductGroup 加载的任何内容都将确保所有关联的模型也被加载。

现在您只需正常迭代您的关联。假设 @product_groups 是 ProductGroup 的集合

```
@product_groups.each do |product_group|
  # do stuff with product_group
  product_group.product_items.each do |product_item|
    # do stuff with product_item
  end
  product_group.product_group_selections do |product_group_selection|
    # do stuff with product_group_selection
    product_group_selection.product_group_selection_attrs do |product_group_selection_attr|
      # do stuff with product_group_selection_attr
    end
  end
end 
```

rails 建立关联的默认方式应该满足您要求的数据结构，只需使用实际记录而不是哈希哈希，无论如何您都需要加载它以创建哈希哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:21:27.030

也许是这样的：

```
class ProductGroup < ActiveRecord::Base

    # I have no idea what to call this method
    def merchant_data    
        {:name => self.name, :merchant_id => self.merchant_id, :items => self.product_items, :selections => self.product_group_selections}
    end

end 
```

在您的控制器内部，您将拥有以下内容：

```
def merchant_search    
  @product_group = ProductGroup.find_by_merchant_id(params[:merchant_id})
  @merchant_data = @product_group.merchant_data    
  #@merchant_data => {:name=>"...", :merchant_id=> 1, :items=>[....], :selections=>[..]}
end 
```

只需在视图中使用散列，类似于使用任何其他实例变量的方式，只是这次使用散列。例如，如果您想简单地遍历返回的数据结构中的所有项目：

```
@merchant_data[:items].each {|item| ... } 
```

# c# - 验证规则未使用 2 个验证规则正确更新

> ID：14984270
> 
> 赞同：3
> 
> 时间：2013-02-20T15:56:32.510
> 
> 标签：c#, wpf, validation, multidatatrigger

我浏览了一些有关验证规则的帖子，但没有遇到我遇到的问题。

我正在为 WPF 窗口中的文本框使用验证规则。我有两项检查，一项针对空文本框，一项针对使用 RegEx 匹配的无效字符。

我的问题是这样的：

在我的文本框中：

1.  A型 - 有效，无显示
2.  为空字符串点击退格键 - 有效，显示验证错误消息“请在所有字段中输入值”
3.  类型 ！- 不起作用 - 它应该显示“发现无效字符”，但仍显示“请在所有字段中输入值”。
4.  退格到空字符串 - 技术上有效，因为它仍然显示第一个错误“请在所有字段中输入值”。
5.  A 型 - 有效，没有错误消息
6.  类型 ！- 很好，显示消息“发现无效字符。

反过来也一样。

打开窗户

1.  类型 ！- 很好，显示“发现无效字符。
2.  退格到空字符串 - 仍然显示“发现无效字符”而不是“请在所有字段中输入一个值。

我的代码如下：

ProviderNew.xaml：

```
<Label Name="lblProviderName" Content="Provider Name: " 
                   Grid.Row="1" Grid.Column="0"/>

<TextBox Name="txtBoxProviderName" Margin="2" 
    MaxLength="20" CharacterCasing="Upper"
    Grid.Row="1" Grid.Column="1" LostFocus="TxtBoxProviderNameLostFocus"   TextChanged="TxtBoxProviderNameTextChanged">
                <TextBox.Text>
                    <Binding ElementName="This" Path="ProviderName" UpdateSourceTrigger="PropertyChanged">
                        <Binding.ValidationRules>
                            <Domain:ProviderValidation />
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox>

            <TextBlock x:Name="tbNameValidation"  Foreground="Red" FontWeight="Bold" Margin="10,0,0,0"
                       Text="{Binding ElementName=txtBoxProviderName, Path=(Validation.Errors), Converter={StaticResource eToMConverter}}"
                       Grid.Row="1" Grid.Column="2" /> 
```

Privder 代码背后 - ProviderNew.xaml.cs

```
public static readonly DependencyProperty NewProviderNameProperty = DependencyProperty.Register("ProviderName",
        typeof (string), typeof(ProviderNew), new UIPropertyMetadata(""));

    public string ProviderName
    {
        get { return (string) GetValue(NewProviderNameProperty); }
        set { SetValue(NewProviderNameProperty, value); }
    } 
```

值转换器类

```
public class ErrorsToMessageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var sb = new StringBuilder();
        var errors = value as ReadOnlyCollection<ValidationError>;

        if (errors != null && errors.Count > 0)
        {

            foreach (var e in errors.Where(e => e.ErrorContent != null))
            {
                sb.AppendLine(e.ErrorContent.ToString());
            }
        }
        return sb.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

提供者类

```
private string _providerName;
    public string ProviderName
    {
        get { return _providerName; }
        set
        {
            _providerName = value;
            RaisePropertyChanged("ProviderName");
        }
    }

private void RaisePropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

验证规则类

```
public class ProviderValidation : ValidationRule
{
    public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
    {
        var str = value as string;

        if (str != null && !Regex.IsMatch(str, @"^[a-zA-Z0-9]*$"))
        {
           return new ValidationResult(false, "Invalid characters were found.");
        }

        if (String.IsNullOrEmpty(str))
        {
            return new ValidationResult(false, "Please enter a value in all fields.");
        }

        return new ValidationResult(true, null);
    }
} 
```

我尝试过设置 LostFocus 和 TextChanged 事件以强制更新使用：

```
var expression = txtBoxProviderName.GetBindingExpression(TextBox.TextProperty);
if (expression != null)
    expression.UpdateSource(); 
```

在 Validate 方法上设置断点表明完成了正确的匹配并返回了正确的 ValidationResult，但它不会正确更新文本。

我在做一些非常愚蠢的事情吗？

任何建议将不胜感激。

编辑 1。

是的，我有这个工作，使用 MultiDataTrigger 和绑定到文本框。

什么不起作用是当我第一次显示窗口时，按钮是启用的，我不希望它是这样，因为这可能允许用户使用空文本框单击保存。

当窗口打开时，验证规则不能从一开始就直接起作用。

我将焦点设置在文本框上，如果它失去焦点或输入了不正确的数据，则验证规则将启动并禁用该按钮。

将按钮设置为默认禁用，使其在打开时禁用，但是当没有验证错误时它不会启用。

我可以通过强制检查加载事件的验证规则来使其工作，使用

```
var expression = txtBoxProviderName.GetBindingExpression(TextBox.TextProperty);
if (expression != null)
    expression.UpdateSource(); 
```

但是当窗口第一次打开时，它立即显示验证错误消息“请在所有字段中输入一个值”，我不太喜欢它的外观。

无论如何，或者我不能两全其美。

这是按钮代码

```
<Button x:Name="btnSave" Height="25" Width="100" Content="Save" HorizontalAlignment="Right" Margin="0,0,120,0"
            Grid.Row="2" Click="BtnSaveClick" >
        <Button.Style>
            <Style TargetType="{x:Type Button}">
                <Setter Property="IsEnabled" Value="False" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ElementName=txtBoxProviderName, Path=(Validation.HasError)}" Value="False" />
                            <Condition Binding="{Binding ElementName=txtBoxHelpDesk, Path=(Validation.HasError)}" Value="False" />
                            <Condition Binding="{Binding ElementName=txtBoxRechargeInstructions, Path=(Validation.HasError)}" Value="False" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsEnabled" Value="True" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>     
    </Button> 
```

谢谢，

尼尔

编辑 2

一个快速的问题。我找不到 RelayCommand 命名空间。在周围搜索其他代码时，我发现了一个来自 microsoft 的 MVVM 示例，它实现了 RelayCommand : ICommand 类。

它是否正确？

代码是：

```
public class RelayCommand : ICommand
{
    #region Fields

    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;

    #endregion // Fields

    #region Constructors

    /// <summary>
    /// Creates a new command that can always execute.
    /// </summary>
    /// <param name="execute">The execution logic.</param>
    public RelayCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Creates a new command.
    /// </summary>
    /// <param name="execute">The execution logic.</param>
    /// <param name="canExecute">The execution status logic.</param>
    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }

    #endregion // Constructors

    #region ICommand Members

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand Members
} 
```

我在 ProviderNew.xaml.cs 中实现了以下内容：

```
private ICommand saveCommand;
    public ICommand SaveCommand
    {
        get
        {
            if (saveCommand == null)
            {
                saveCommand = new RelayCommand(p => DoSave(), p => CanSave() );
            }
            return saveCommand;
        }
    }

    private bool CanSave()
    {
        if (!string.IsNullOrEmpty(ProviderName))
        {
            ??? What goes here? 
        }

        return true;
    }
private bool DoSave()
    {
        // Save the information to DB
    } 
```

老实说，我不确定“if (!string.IsNullOrEmpty(ProviderName))”的块中应该编码什么

您还说要在 DataContext 中添加 ICommand 代码，所以不确定它是否在正确的位置，因为当我打开窗口时，启用保存并单击它什么也不做，即使所有字段中都有正确的数据。

这是按钮的 ProviderNew xaml 代码

```
<Button x:Name="btnSave" Height="25" Width="100" Content="Save" HorizontalAlignment="Right" Margin="0,0,120,0"
            Grid.Row="2" Command="{Binding SaveCommand}" >
        <Button.Style>
            <Style TargetType="{x:Type Button}">
                <Setter Property="IsEnabled" Value="False" />
                <Style.Triggers>
                    <MultiDataTrigger>
                        <MultiDataTrigger.Conditions>
                            <Condition Binding="{Binding ElementName=txtBoxHelpDesk, Path=(Validation.HasError)}" Value="False" />
                            <Condition Binding="{Binding ElementName=txtBoxProviderName, Path=(Validation.HasError)}" Value="False" />
                            <Condition Binding="{Binding ElementName=txtBoxRechargeInstructions, Path=(Validation.HasError)}" Value="False" />
                        </MultiDataTrigger.Conditions>
                        <Setter Property="IsEnabled" Value="True" />
                    </MultiDataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>     
    </Button> 
```

非常感激您的帮忙。

问候，

尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:41:43.533

好的，我设法重现了这个问题，它让我烦恼的是它不起作用。但我想通了。
问题是当错误发生变化时转换器没有被触发，因为实际属性 (ProviderName) 由于 ValidationRule 而没有改变。如果在 Converter、ValidationRule 和 Property-setter 中放置断点，您可以看到此行为。

`IValueConverter`因此，您应该将 的绑定更改为以下内容，而不是使用`tbNameValidation`：

```
<TextBlock x:Name="tbNameValidation"  
           Text="{Binding ElementName=txtBoxProviderName, 
                  Path=(Validation.Errors).CurrentItem.ErrorContent}"> 
```

重要的部分是**`Path=(Validation.Errors).CurrentItem.ErrorContent"`**。这将确保显示当前的错误消息。

此外，如果您希望“*请在所有字段中输入一个值。* ”消息从头开始显示，您应该添加`Mode=TwoWay`到绑定`txtBoxProviderName`：

```
 <Binding ElementName="This" 
          Path="ProviderName" 
          UpdateSourceTrigger="PropertyChanged"
          Mode="TwoWay"> 
```

**编辑第 2 部分**

要修复按钮的启用属性，您可以使用与问题中相同的代码，但不是使用`Click`事件来运行您的保存代码，而是可以使用该`Command`属性：

在您的 DataContext 中，创建 type 的属性`ICommand`，并将按钮绑定到此：

```
<Button Command="{Binding SaveCommand}" .... />

private ICommand saveCommand; 
public ICommand SaveCommand { 
    get { 
        if (saveCommand == null) {
            saveCommand = new RelayCommand(p => DoSave(), p=> CanSave() ); 
         } 
         return saveCommand; 
      } 
 } 
```

CanSave 实现可以检查是否满足所有期望：

```
private bool CanSave(){
   if (!string.IsNullOrEmpty(ProviderName)){
       //.... etc
   }
 } 
```

将`CanSave()`确定按钮的状态，因为 CommandBinding 将根据`CanExecute`有界命令的方法自动处理启用按钮。你的验证器的逻辑会回到这里，所以找到一种方法来重用该代码可能是一个好主意。

有关[中继命令的更多信息](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx#id0090030)

# objective-c - UICollectionView 单元格中的对象/项目而不是索引？

> ID：14984272
> 
> 赞同：3
> 
> 时间：2013-02-20T15:56:37.633
> 
> 标签：objective-c, arrays, xcode4.5, uicollectionview

在 UICollectionView 中更改位置后，我一直在尝试将单元格的状态或顺序保存在 UICollectionView 中。当我使用 indexPathsForVisibleItems 时，我得到的索引总是以相同的顺序。它们不反映订单变化。如果我可以在每个 indexPath 处获取对象，我至少可以尝试遍历它们以获得结果顺序。

我使用了这段代码。并发现它返回了[0,0]中indexPaths的刷新状态。排序总是相同的，因为它告诉我哪些单元格中有一些东西，而不是每个单元格中有什么。我只是不知道从哪里开始获取每个单元格中的对象/项目。

```
NSArray *visible = [self.collectionView indexPathsForVisibleItems];
NSMutableArray *rowsArray = [NSMutableArray arrayWithCapacity:[visible count]];
[visible enumerateObjectsUsingBlock:^(NSIndexPath *indexPath, NSUInteger idx, BOOL *stop) {
    [rowsArray addObject:@(indexPath.item)]; 
```

我需要每个位置的项目或对象。如何遍历所有单元格位置以在那里检索项目。我计划使用用于填充 UICollectionView 的数组的计数来循环遍历所有位置并获取存储在那里的对象。只有一个部分，单元格似乎正在存储这样的对象`<Slide: 0x7585200>`

上面的函数以这种格式返回 NSLogs`"<NSIndexPath 0x8490390> 2 indexes [0, 0]"`

我需要得到那个位置的东西。

我不熟悉 NSIndexPath 或它的格式。即使只是命令/功能也可以帮助我取出一个对象。谢谢。

（附录）我正在考虑使用类似`[self.collectionView cellForItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];`Not sure what I can store it in。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:44:31.227

CollectionView 是 UIView 的集合（调用 UICollectionViewCell）。每个单元格都有一个 indexPath (section,row) 表示 collectionView 内容中的布局位置。如果您有 1 个部分，则部分始终 = 0。

visibleCells 表示当时屏幕上可见的所有单元格（在滚动框架或 collectionView 框架中可见）。indexPathsForVisibleItems = 可见单元的 indexPath 数组

cellForItemAtIndexPath 是一种在您想要的任何 indexPath 处获取 collectionViewCell 的方法，通常用于在选择时获取单元格：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{
    UICollectionViewCell *cell = [collectionView cellForItemAtIndexPath:indexPath];
    NSLog(@"%@",cell);
} 
```

从 Apple UICollectionView 视频和示例中了解更多信息： [https ://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html)

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

# php - PHP 日历 - 为持续时间超过一天的事件合并单元格

> ID：14984273
> 
> 赞同：0
> 
> 时间：2013-02-20T15:56:37.723
> 
> 标签：php, calendar

我知道我可能会因为这个或一个封闭的话题而得到一个不好的代表，但我真的不知道我要问什么。我有这个生成简单日历的[PHP 代码。](http://pastebin.com/Adc106EP)我将在其中添加事件并以适当的突出显示显示它们。我未能完成的是为持续超过一天的事件合并单元格。有人可以帮我弄这个吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:01:18.520

不是合并单元格，而是将单元格颜色编码在一起没有意义。如果单元格跨越一周，则无法合并单元格，因为该月分为数周（周日至周六）。我建议在包含事件的单元格内进行颜色编码（div 或 span）。然后，您可以在跨度内包含事件的标题（或前几个单词，以及鼠标悬停时弹出的其余详细信息）。

# github - 使用 JIRA、GitHub 和 Jenkins 的自动变更日志

> ID：14984276
> 
> 赞同：4
> 
> 时间：2013-02-20T15:57:00.583
> 
> 标签：github, jenkins, jira, changelog

在过去的几个月里，我的团队最近切换到所有这三种技术，并努力让它运行起来。下一步是自动化我们的变更日志。我们设置了 JIRA 在 github 提交消息中查找标签（例如 TAG-123）。Jenkins 在 5 分钟计时器上监控 GitHub 提交、拉取、构建等。

我希望看到的是当构建被标记为“升级到生产”时自动生成的变更日志。我希望看到它做类似于以下的事情：

*   查询 Jenkins 以获取标记为生产版本的先前构建并获取相应的 git commit SHA1。
*   在当前 Git 提交和上一个提交之间运行 diff
*   查找所有引用的 JIRA 票证
*   编译 JIRA 标题列表
*   将列表导出到文本文件并放置在构建拖放中（如果也可以通过 Jenkins 直接访问它，则奖励）

是否按照书面形式遵循此流程无关紧要-我追求最终结果，并且不打算重新发明轮子。肯定有人以前做过类似的事情吗？

就改造而言，我能够找到[https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)允许某人搭载“升级到生产”操作并运行单独的脚本. 这将是一个收集功能来完成上述任务的问题。（我还注意到 Jenkins 可以标记当前的 GitHub 提交，我的团队可能还会这样做。）

任何更接近实现这一目标的东西都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T20:47:49.417

由于我们团队中没有人有多余的时间来解决这个问题，我们最终想出了一个快速的解决方案。

**过程**

1.  为 Jenkins安装和设置[All Changes 插件](https://wiki.jenkins-ci.org/display/JENKINS/All+Changes+Plugin)。
2.  当我们发布时，我们使用“构建提升”系统，将星号放在之前的构建旁边，所以我们可以很容易地看到构建#查看历史。
3.  将 All Changes 中的相关输出复制并粘贴到 notepad++ 之类的文件中（human-diff'ing ftw！）
4.  运行*正则表达式*查找/替换。搜索正则表达式字符串，替换为空字符串。（下面——有大爆炸选项或为了便于理解而将其分解。）
5.  以当前公认标准的任何形式手动组织和发布。

*全部一起*

```
(\s*\(commit:\s[a-z0-9]{40}.\s..detail)|([\r][\n]#.*\B[\r][\n][\r][\n])|(^[ \t]*) 
```

*删除提交哈希*`\s*\(commit:\s[a-z0-9]{40}.\s..detail`

*删除时间和周围的换行符*`[\r][\n]#.*\B[\r][\n][\r][\n]`

*删除前导空格*：`^[ \t]*`

**分析**

*优点*：

*   整体有效
*   实施相对较快

*缺点*：

*   不是完全自动化的。
*   如果您从多个 Jenkins 作业中释放，则需要恢复为提交 ID。
*   所有更改的历史似乎只能追溯到詹金斯的工作（我可能会误解这一点的具体细节——我只记得有一次类似这样的事情的轻微不满。）

总的来说，缺点有点“野兽的本性”。我很想阅读其他一些解决方案。（当然，当我们拥有一种叫做时间的难以捉摸的东西时！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T17:00:48.523

依赖问题跟踪器的替代方法可能是纯粹使用拉取请求本身。对我们来说，他们有足够的上下文来生成发行说明，我们使用标签进行分类。我创建了[PullRequestReleaseNotes](https://github.com/jasminsehic/PullRequestReleaseNotes)，你可以试试。它支持 GitHub、GitLab、BitBucket 和 TFS，它可以从合并的拉取请求及其标签中生成 Markdown 中的发布说明，并可选择将其发布到 Atlassian Confluence 页面，并将其作为帖子发布到 Slack 频道。它可以作为持续集成的一部分运行。这是一个示例：

> # 1.2.1（主）- XX XXX 2016
> 
> ## 增强功能
> 
> ### 甲类
> 
> *   很棒的新功能 #1854
> 
> ## 修复
> 
> ### Z 类
> 
> *   修复了小部件 #1792 的问题
> 
> ### Y 类
> 
> *   修复了小部件 #1792 的问题
> *   修复了视图布局的异常 #1848

# java - 我怎样才能克服这个涉及 jvisualvm 和 oc4j 的异常？

> ID：14984278
> 
> 赞同：1
> 
> 时间：2013-02-20T15:57:04.073
> 
> 标签：java, oc4j, jvisualvm

每次我尝试启动 CPU 分析器时，都会出现以下异常。我在亚洲语言中找到了对这个例外的引用，但这里不是这种情况。

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:323)
    at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:348)
Caused by: java.lang.NullPointerException
    at org.netbeans.lib.profiler.server.ProfilerActivate15.getArchiveFile(ProfilerActivate15.java:78)
    at org.netbeans.lib.profiler.server.ProfilerActivate15.activate(ProfilerActivate15.java:99)
    at org.netbeans.lib.profiler.server.ProfilerActivate15.agentmain(ProfilerActivate15.java:64)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:18:33.013

我放弃并改用了以下 [http://www.jvmmonitor.org/index.html](http://www.jvmmonitor.org/index.html)

# wcf - DataCacheFactory.GetCache 期间的 Tcp 错误 995

> ID：14984281
> 
> 赞同：4
> 
> 时间：2013-02-20T15:57:15.507
> 
> 标签：wcf, appfabric-cache

当我调用 DataCacheFactory 上的 GetCache("cachename") 以访问我的 Windows Server AppFabric Cache 1.1 时，我的 Wcf 跟踪中出现异常。返回的缓存对象没问题，我可以使用缓存，一切似乎都很好。

此异常的原因可能是什么？

```
Exception: CommunicationObjectAbortedException
Message: A TCP error (995: The I/O operation has been aborted because of either a thread exit or an application request) occurred while transmitting data. 
```

Wcf 跟踪：

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2013-02-20T15:37:37.2055385Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{d0eec36d-5527-4abd-b474-44361454805e}" />
<Execution ProcessName="xxxxxxxxxx" ProcessID="5648" ThreadID="13" />
<Channel />
<Computer>xxxxxxxx</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/nl-NL/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>xxxxxxxxxx</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.CommunicationObjectAbortedException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>A TCP error (995: The I/O operation has been aborted because of either a thread exit or an application request) occurred while transmitting data.</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.DelegatingConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.TracingConnection.WaitCallback(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs)
at System.ServiceModel.Channels.SocketConnection.OnReceiveAsyncCompleted(Object sender, SocketAsyncEventArgs e)
at System.Net.Sockets.SocketAsyncEventArgs.OnCompleted(SocketAsyncEventArgs e)
at System.Net.Sockets.SocketAsyncEventArgs.FinishOperationAsyncFailure(SocketError socketError, Int32 bytesTransferred, SocketFlags flags)
at System.Net.Sockets.SocketAsyncEventArgs.CompletionPortCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationObjectAbortedException: A TCP error (995: The I/O operation has been aborted because of either a thread exit or an application request) occurred while transmitting data. ---&gt; System.Net.Sockets.SocketException: The I/O operation has been aborted because of either a thread exit or an application request
   at System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted()
   at System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs)
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The I/O operation has been aborted because of either a thread exit or an application request</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted()
at System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs)
</StackTrace>
<ExceptionString>System.Net.Sockets.SocketException (0x80004005): The I/O operation has been aborted because of either a thread exit or an application request
   at System.ServiceModel.Channels.SocketConnection.HandleReceiveAsyncCompleted()
   at System.ServiceModel.Channels.SocketConnection.OnReceiveAsync(Object sender, SocketAsyncEventArgs eventArgs)</ExceptionString>
<NativeErrorCode>3E3</NativeErrorCode>
</InnerException>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

# javascript - HTML图像onmouseover事件未触发

> ID：14984285
> 
> 赞同：1
> 
> 时间：2013-02-20T15:57:19.910
> 
> 标签：javascript, html, image, onmouseover

我有一个显示在 HTML5 画布上的图像，我在其中添加了一个`onmouseover`事件，理论上应该调用已编写在同一文件中的 JavaScript 函数。

但是，当我查看我的页面并将光标悬停在图像上时，什么也没有发生。

我已使用以下行将图像添加到我的 HTML 的隐藏部分：

```
<img id="assetBox" src = "images/box.png" alt="Assets" onmouseover = "displayAssetDescriptionTip()"/> 
```

然后使用以下函数将图像绘制到画布上：

```
function drawDescriptionBoxes(){
var assetsDescriptionBox = document.getElementById("assetBox");
var liabilitiesDescriptionBox = document.getElementById("liabilitiesBox");
var incomeDescriptionBox = document.getElementById("incomeBox");
var expenditureDescriptionBox = document.getElementById("expenditureBox");
assetsDescriptionBox.src = 'images/box.png';
liabilitiesDescriptionBox.src = 'images/box.png';
incomeDescriptionBox.src = 'images/box.png';
expenditureDescriptionBox.src = 'images/box.png';

context.drawImage(assetsDescriptionBox, 70, 400, 120, 70);
context.drawImage(liabilitiesDescriptionBox, 300, 400, 120, 70);
context.drawImage(incomeDescriptionBox, 530, 400, 120, 70);
context.drawImage(expenditureDescriptionBox, 760, 400, 120, 70);

context.strokeText("Assets", 100, 490);
context.strokeText("Liabilities", 325, 490);
context.strokeText("Income", 550, 490);
context.strokeText("Expenditure", 775, 490);

} 
```

当检测到光标悬停在图像上时我想要调用的函数是：

```
function displayAssetDescriptionTip(){
        document.getElementById('tipsParagraph').innerHTML = "Assets are items that can be bought or sold for cash.";
        console.log("displayAssetDescriptionTip being called");
} 
```

但是，由于某种原因，当我在浏览器中查看我的页面并将光标悬停在画布上的图像上时，什么也没有发生，控制台中也没有显示任何内容......我认为这意味着我的`onmouseover`事件不是开火，但我不知道为什么会这样——任何人都可以向我解释，并指出我需要做些什么才能让它正确吗？

**编辑 22/02/2013 @ 14:40**

我尝试添加以下 JS 来跟踪我拥有的一个单独的 JS 文件中的鼠标坐标：

```
/*Add code to keep track of the mouse coordinates */
var boundingBox = canvas.getBoundingClientRect();
var mousex = (mouse_event.clientX-boundingBox.left)*(canvas.width/boundingBox.width);
var mouseY = (mouse_event.clientY-boundingBox.top)*(canvas.height/boundingBox.height); 
```

我知道我将不得不编写代码来告诉脚本实际如何处理坐标，但我只是想先尝试一下，因为我已经有一段时间没有自己处理坐标了。但是当我在浏览器中查看该页面时，我收到一个控制台错误，提示“未定义画布，并抱怨以下行：

```
var boundingBox = canvas.getBoundingClientRect(); 
```

我想知道这是否是因为这是一个单独的脚本文件，并且在我刚刚添加它之前实际上没有对我正在使用的画布的任何引用。我是否需要再次定义它，即使它已经在运行此脚本的 HTML 页面中定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:01:17.030

仅仅绘制图像并不会神奇地使图像表现得像一个节点。例如，您不能更改它`src`并让它自动更改画布上显示的图像。

相反，您必须在画布上手动跟踪鼠标的移动`onmousemove`，然后计算鼠标悬停的内容并对其进行处理。有在 Game Maker 中制作菜单的经验，我可以告诉你这很难！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:01:27.233

这是一个假设，但绘制的图像与您使用鼠标悬停的元素不同。尝试向图像和正在绘制的图像添加一个类，并在该类上设置 onmouseover（检查 jQuery 以使此过程更容易）

# angularjs - Angular：如何在 app.config 之后获取 $routeProvider

> ID：14984287
> 
> 赞同：5
> 
> 时间：2013-02-20T15:57:24.070
> 
> 标签：angularjs

我试图在我的一个控制器中访问 $routeProvider 以添加路由。我怎么做？

```
function Cont($scope,$routeProvider) {

}; 
```

这对我不起作用；我正进入（状态：`Error: Unknown provider: $routeProviderProvider <- $routeProvider`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:09:42.717

$routeProvider 和其他提供者只能注入到模块配置块中。你想用控制器中的 $routeProvider 做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T07:38:40.073

在控制器中，$route 是可访问的，但 $routeProvider 是不可访问的。也许您可以将函数复制出来，例如'when'和'pathRegExp'

见jsfiddle：http: [//jsfiddle.net/5FUQa/1/](http://jsfiddle.net/5FUQa/1/)

```
 function addRoute(path, route) {
     //slightly modified 'when' function in angular-route.js
  }
  addRoute('/dynamic', {
    templateUrl: 'dynamic.tpl.html'
  }); 
```

另请参阅：[如何在 Angular.js 中延迟路由定义？](https://stackoverflow.com/questions/13153121/how-to-defer-routes-definition-in-angular-js/)

# php - 填充选择列表正在创建重复/多个选项

> ID：14984289
> 
> 赞同：0
> 
> 时间：2013-02-20T15:57:28.583
> 
> 标签：php, mysql, sql, wordpress, drop-down-menu

我有一个州、城市和列表的数据库。在每个城市中，我都有多个列表。例如：

佛罗里达州 => 迈阿密 => 10 个房源

我试图用每个状态填充一个状态下拉菜单，但是，我的 SQL 查询正在拉回所有行并创建多个状态条目。在上面的示例中，FL 在下拉列表中出现了 10 次，因为数据库中有 10 条记录。

但这在“状态”下拉菜单中看起来不正确。应该只有 1 FL。希望有人能帮忙！

这是我的查询：

```
$squery = mysql_query("SELECT * FROM wp_postmeta WHERE wp_postmeta.post_id AND wp_postmeta.meta_key = 'state'"); 
```

这是我的输出：

```
<?php while($state_name = mysql_fetch_array($squery)) { ?>
  <option value="<?php if(isset( $state_name['meta_value'] )) { echo state_name['meta_value']; } ?>">
<?php if(isset( $state_name['meta_value'] )) { echo $state_name['meta_value']; }?> 
  </option><?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:59:30.173

尝试`select distinct *`or`select distinct meta_value`而不是`select *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:00:04.713

尝试分组

```
$squery = mysql_query("SELECT * FROM wp_postmeta WHERE wp_postmeta.post_id AND wp_postmeta.meta_key = 'state' group by wp_postmeta.meta_key"); 
```

# javascript - 将 Jsp 变量作为函数参数传递给 javascript

> ID：14984291
> 
> 赞同：0
> 
> 时间：2013-02-20T15:57:35.347
> 
> 标签：javascript, html, jsp

我有同样的查询。 [将 JSP 变量作为参数传递给 javascript 函数](https://stackoverflow.com/questions/10033555/pass-a-jsp-variable-as-parameter-to-javascript-function) 但是，如果我使用`onclick="pagetype('<%=uname%>');`我会得到非法启动类型错误。请帮助解决这个问题。

是的.. <%@ page contentType="text/html" pageEncoding="UTF-8" %>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:11:21.977

你有没有把结尾双引号？

`onclick="pagetype('<%=uname%>')"`

该错误是javascript错误吗？如果是，<%=uname%> 在页面源中是否可见？

你有没有把类似的东西放在`<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>`jsp的顶部？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:23:38.830

1.  `String date1`在一个循环内。你将无法在外面获得它的价值。
2.  更改`alert2('<%=date1');`为`alert2('<%= date1 %>');`

# jquery - 使用广播月份创建 jQuery-ui 日期选择器，在 IE 中不起作用

> ID：14984293
> 
> 赞同：0
> 
> 时间：2013-02-20T15:57:39.453
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我需要 datepicker 在广播月份，我想出了如何在不编辑代码的情况下做到这一点。到目前为止，它在大多数情况下都有效，但我遇到了问题。

首先，我的解决方法是：
我有`showOtherMonths:true, changeOtherMonths:true`这将让我在广播月的整个第一周获得。还显示了下个月的第一周，所以这就是我要删除它的方法（不删除星期天结束的一个月的最后一周）

```
$(function() {
    $(document).bind("click keypress", function(){
        // find "1" listed in outside month and hide the row
        $("table.ui-datepicker-calendar tbody td.ui-datepicker-other-month").filter(function(){
             return $.text([this]) == '1';
        }).closest("tr").hide();
        // remove styling that differentiates outside month
        $(".ui-priority-secondary").removeClass("ui-priority-secondary");
    });
}); 
```

[在 jsfiddle 中工作](http://jsfiddle.net/hcyQF/)

这适用于 Firefox 和 Chrome，但在 IE8（在兼容模式下）中，这只会在第一次打开时修剪最后一行。如果您单击日期选择器中的另一个月份，则必须再次单击输入框或单击日期选择器背景才能触发上面的代码块。

我尝试使用该`onChangeMonthYear`部分调用相同的代码但没有成功，但据我所知，在 IE 中，此代码在新月份重绘日历之前运行，这意味着它在这个意义上是无用的。

另外，我有`changeMonth: true, changeYear: true`并且在更改选择菜单时，上面的代码块不会在任何浏览器中运行，我还没有找到解决方法。

如果我能克服这些最后的障碍，那么任何人都可以使用它来显示广播月份，而无需修改 jquery-ui.js，这样他们就可以使用谷歌托管的代码等。

谢谢！

# mysql - 在引用父母和孩子时计算行数

> ID：14984294
> 
> 赞同：4
> 
> 时间：2013-02-20T15:57:40.177
> 
> 标签：mysql, sql

我有一个看起来像这样的表：

```
Categories:
cId | Name                    | Parent
----+-------------------------+-------
1   | Parent One              | NULL
2   | Child of 1st Parent     | 1
3   | Parent Two              | NULL
4   | Child of 1st Parent     | 1
5   | Child of 2nd Parent     | 2 
```

该表不代表层次结构：每个项目要么是子项，要么是父项，但不能两者兼而有之。

一张这样的桌子：

```
Posts:
pId | Name                    | cID
----+-------------------------+-------
1   | Post 1                  | 1
2   | Post 2                  | 2
3   | Post 3                  | 2
4   | Post 4                  | 3 
```

我想对它运行一个查询，返回这个：

```
cId | Count  
---+---------
1   | 3
2   | 2
3   | 1
4   | 0
5   | 0 
```

Count 是与该类别相关的帖子数。

应返回所有类别。

**父类别应该有类别 + 子类别总和的计数。**（这是我遇到的问题之一）

子类别应具有类别总和。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:10:29.970

从您的预期结果来看，您似乎不关心孙子及下级，在这种情况下，这应该可行。为了获得正确的父计数，我正在检查 Parent IS NULL 或 Count(children) > 0，在这种情况下，我加 1：

```
SELECT c.cId, CASE WHEN C.Parent IS NULL OR COUNT(C2.cId) > 0 THEN 1 ELSE 0 END + 
    COUNT(C2.cId) TotalCount
FROM Categories C
    LEFT JOIN Categories C2 on c.cId = c2.Parent
GROUP BY c.cId 
```

这是一些示例小提琴：[http ://www.sqlfiddle.com/#!2/b899f/1](http://www.sqlfiddle.com/#!2/b899f/1)

结果：

```
CID  TOTALCOUNT
1    3
2    2
3    1
4    0
5    0 
```

**- -编辑 - -**

通过阅读您的评论，您似乎想要这样的东西：

```
SELECT c.cId, 
    COUNT(DISTINCT P.pId) + COUNT(DISTINCT P2.pId) TotalCount
FROM Categories C
   LEFT JOIN Posts P ON C.CId = P.CId
    LEFT JOIN Categories C2 on c.cId = c2.Parent
   LEFT JOIN Posts P2 ON C2.CId = P2.CId
GROUP BY c.cId 
```

[http://www.sqlfiddle.com/#!2/eb0d2/3](http://www.sqlfiddle.com/#!2/eb0d2/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:21:28.477

这是一般提示。我不知道 MySQL 中是否提供分析函数和分区，但您可以按类别对输出进行分区，然后在类别中进行计数和汇总。做一些关于分析函数和按子句划分的研究。我的意思的一般示例 - 输出由 deptno 分区并排序。此外，在分区内确定的最大雇用日期 - 在您的情况下用计数、总和等替换最大值：

```
SELECT * FROM 
(  
SELECT deptno
     , empno
     , ename
     , sal
     , RANK() OVER (PARTITION BY deptno ORDER BY sal desc) rnk 
     , ROW_NUMBER() OVER (PARTITION BY deptno ORDER BY sal desc) rno 
     , MAX(hiredate) OVER (PARTITION BY deptno ORDER BY deptno) max_hire_date
 FROM emp_test
ORDER BY deptno
)
--WHERE rnk = 1
ORDER BY deptno, sal desc
/

DEPTNO    EMPNO    ENAME    SAL    RNK    RNO    MAX_HIRE_DATE
--------------------------------------------------------------------
10        7839    KING      5000    1      1    1/23/1982
10        7782    CLARK     2450    2      2    1/23/1982
10        7934    MILLER    1300    3      3    1/23/1982
20        7788    SCOTT     3000    1      1    1/28/2013
20        7902    FORD      3000    1      2    1/28/2013
20        7566    JONES     2975    3      3    1/28/2013 
```

# java - 无法加载 Xuggle 库：java.lang.UnsatisfiedLinkError

> ID：14984295
> 
> 赞同：3
> 
> 时间：2013-02-20T15:57:42.173
> 
> 标签：java, windows-7, applet, japplet, xuggle

我正在设计这个 Java Web 小程序以通过 RTSP 从视频服务器流式传输视频。为了渲染此视频，将`xuggle-xuggler.jar`使用 Xuggler 5.4 库 ( )。目前，当我在 Windows XP 和 Ubuntu 10.04 机器上运行视频时，可以正确呈现视频。但是，当我尝试在 Windows 7 上运行它时，出现以下错误：

```
10:10:13.370 [Thread-13] WARN  com.xuggle.ferry.JNILibrary - Failure: library load of library: xuggle; url: C:\Users\Justin\AppData\Local\Temp\xuggle\xuggle8376027568348573783.dll; error: java.lang.UnsatisfiedLinkError: C:\Users\Justin\AppData\Local\Temp\xuggle\xuggle8376027568348573783.dll: Can't find dependent libraries
10:10:13.448 [Thread-13] ERROR com.xuggle.ferry.JNILibraryLoader - Could not load library: xuggle; version: 5; Visit http://www.xuggle.com/xuggler/faq/ to find common solutions to this problem
Exception in thread "Thread-13" java.lang.UnsatisfiedLinkError: no xuggle in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary0(JNILibraryLoader.java:268)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary(JNILibraryLoader.java:171)
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:161)
    at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:16)
    at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25)
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
    at com.xuggle.xuggler.ICodec$ID.<clinit>(ICodec.java:760)
    at com.ioindustries.videoserver.RtpSession.run(RtpSession.java:86)
    at java.lang.Thread.run(Unknown Source) 
```

我已经尝试提取`xuggle-5.dll`并将其放置在我的`web`目录中，然后将其链接到 Windows %PATH% 甚至 Windows %CLASSPATH%，但是当我这样做时视频仍然没有呈现并且错误消失了（那时，我不知道发生了什么）。我还尝试通过依赖项walker 运行xuggle-5.dll，尽管我得到的只是IESHIM.dll 的错误，如下面的屏幕截图所示：

![在此处输入图像描述](../Images/b071bd24ac9d54574319567b66cdc21e.png)

当然，当我在 Windows XP 和 Ubuntu 10.04 机器上运行 IESHIM.dll 时，也会出现同样的错误。

我还在用于启动 Web 小程序的 HTML 文档下引用了 xuggle-xuggler.jar 文件。

在这一点上，我真的不确定为什么 Xuggler 无法在我用于开发的 Windows 7（32 位）机器上运行。任何有关此事的帮助将不胜感激。

作为说明，我正在尝试使用 Xuggle 网站上提供的 GPL 版本的 Xuggle 5.4（与以前的 Xuggle 版本不同，它不需要任何安装）。

这是我的 HTML 文档的片段：

```
<div id="applet_box" class="applet box">
            <applet id="applet" code="com.videoserver.ClientApplet" 
                    archive="VideoServerClient.jar, xuggle-xuggler-5.4.jar, slf4j-api-1.6.4.jar, logback-classic-1.0.0.jar, logback-core-1.0.0.jar" MAYSCRIPT>
            </applet>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T02:09:37.740

我的同事弄清楚了为什么会发生这种`java.lang.UnsatisfiedLinkError`情况，所以所有功劳都归于他（我只是一个观察者）。

参考上面错误日志的第一行：

```
10:10:13.370 [Thread-13] WARN  com.xuggle.ferry.JNILibrary - Failure: library load of library: xuggle; url: C:\Users\Justin\AppData\Local\Temp\xuggle\xuggle8376027568348573783.dll; error: java.lang.UnsatisfiedLinkError: C:\Users\Justin\AppData\Local\Temp\xuggle\xuggle8376027568348573783.dll: Can't find dependent libraries 
```

基本上，在我的案例中发生的事情是 Java 运行时环境有一个 Xuggle DLL 文件的缓存副本，该文件可能来自一个旧的 Xuggle JAR 存档，我曾在两个月前用于试验 Java 小程序视频输出。鉴于临时目录 ( ) 中引用的DLL 文件与通过上面的 Dependency Walker 应用程序验证时`C:\Users\Justin\AppData\Local\Temp\xuggle\xuggle8376027568348573783.dll`从最近的 xuggle DLL 文件中提取的最新 xuggle DLL 文件相比具有不同的依赖关系，我们能够得出这个结论。`xuggle-xuggler-5.4.jar`

因此，当我尝试在我的 Java Web Applet 中显示视频时，Java 运行时环境会尝试访问这个陈旧的 Xuggle DLL 文件，而不是从`xuggle-xuggler-5.4.jar`. 因此，出现了上述`java.lang.UnsatisfiedLinkError`情况。

为了强制 Java 运行时环境从 within 的 DLL 文件中加载 DLL 文件`xuggle-xuggler-5.4.jar`，执行了以下步骤：

1.  打开 Java 控制面板。在 Windows 中，这是通过转到“开始”菜单并访问“控制面板”来完成的。如果安装了 Java 运行时环境，Java 应该作为一个选项出现在 Windows 控制面板中。单击 Java。

2.  进入 Java 控制面板后，在常规选项卡下，在 Internet 临时文件下，单击设置...按钮。

3.  取消选中“在我的计算机上保留临时文件”复选框。

4.  然后单击删除文件按钮并删除所有临时文件（选中所有复选框）。根据您的偏好，您可能只想选择这些复选框的一个子集，尽管我选择了它们。

5.  单击确定。然后再次单击确定。然后第三次单击“确定”关闭 Java 控制面板。

6.  如果 Web 浏览器打开，请关闭它并尝试重新启动 Java Web Applet。如果这是您遇到的问题，则`java.lang.UnsatisfiedLinkError`不应再发生此问题，并且视频应该正确显示，前提是您的代码正确，并且加载了正确的 Xuggle JAR 以及 Xuggle 的依赖项。就我而言，我的 Web 小程序 JAR 与用于将其嵌入 Web 浏览器的 HTML 文件以及所有必需的 Xuggle JAR 和 Xuggle 依赖项 JAR 放在同一目录中。

应该注意的是，Ubuntu 中的 Java 运行时环境还具有类似于 Windows 中的 Java 控制面板，如果出现问题，可以在 Ubuntu 中执行类似的步骤来解决此问题。

如果您只是直接在 Web 浏览器中打开 HTML 文件，上述解决方案应该可以工作。如果您使用 Apache Tomcat 或 Glassfish 来部署您的 Web 小程序，这可能不起作用 - 在这种情况下，您可能需要参考这个解决方案，尽管我自己没有彻底测试过：

[http://wiki.xuggle.com/Frequently_Asked_Questions#I_get_an_.22UnsatisfiedLinkError.22_when_I_run_Xuggler-based_Applications_in_Tomcat](http://wiki.xuggle.com/Frequently_Asked_Questions#I_get_an_.22UnsatisfiedLinkError.22_when_I_run_Xuggler-based_Applications_in_Tomcat)

# gnuplot - 在 GnuPlot 颜色栏中设置颜色步长

> ID：14984322
> 
> 赞同：1
> 
> 时间：2013-02-20T15:59:07.783
> 
> 标签：gnuplot, colorbar

我想要一个分为 5 种颜色的颜色条。一种颜色从 0 到 20，另一种颜色到 40，依此类推，直到 100。

到目前为止我所做的是：

```
set palette maxcolors 5 
```

但这并没有设置颜色栏中每种颜色的边界

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:20:34.847

为避免手动设置边界，您走在正确的轨道上。可能有帮助的是设置彩条的范围：

```
set cbrange [0:100] 
```

这样，调色板将分为 0 到 100 之间的 5 种颜色，而不是由正在绘制的数据/函数确定的限制。

# excel - 在这个循环中实现语音合成

> ID：14984325
> 
> 赞同：1
> 
> 时间：2013-02-20T15:59:20.437
> 
> 标签：excel, vba

我有以下代码：

```
Case "END-BOX"
    EndBox = ActiveCell.Row
    Selection.Offset(-1, 2).Select
    Selection.ClearContents
    Rows(2).Insert Shift:=xlDown
    TotalCols = ActiveSheet.UsedRange.Columns.Count

    Col = 4
    Cells(EndBox, Col).Select
    For i = EndBox To 1 Step -1
        If Cells(i, Col).Value <> "" Then
            n = n + 1
        Else
            Cells(i, Col).Value = n
            If Cells(i, Col).Offset(0, -2).Value = "NEW-BOX" Then Cells(i, Col).Interior.ColorIndex = 4
            n = 0
        ' Application.Speech.Speak (n)
        End If
    Next

    Range(EndBox).Select
    Selection.Offset(1, -2).Select 
```

我想弄清楚如何在计算总和后自动读出最终的总和数，但是这个循环给我带来了麻烦，我不明白我将如何实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:30:05.253

> n = 0
> 
> ' Application.Speech.Speak (n)

您设置`n`为 0，因此您将始终得到 0。

把它放在后面`Next`得到最终值`n`

```
For i = EndBox To 1 Step -1
    If Cells(i, Col).Value <> "" Then
        n = n + 1
    Else
        Cells(i, Col).Value = n
        If Cells(i, Col).Offset(0, -2).Value = "NEW-BOX" Then Cells(i, Col).Interior.ColorIndex = 4
        n = 0
    End If
Next
Application.Speech.Speak (n) 
```

# javascript - 页面重新加载后显示隐藏的 div（页面重新加载后 div 变为可见）

> ID：14984327
> 
> 赞同：0
> 
> 时间：2013-02-20T15:59:24.350
> 
> 标签：javascript, jquery, reload, page-refresh

我有一个页面，其中包含几个隐藏的 div 和带有单击事件的按钮，其中 div 变得可见。

问题是当我重新加载页面时，所有 div 都再次隐藏。

实际上，当我单击一些按钮时，一些 div 变得可见，但是当我重新加载页面时，所有 div 都再次不可见。

我可以使页面重新加载之前可见的 div 在重新加载后可见吗？

示例[http://jsfiddle.net/DxKCj/1/](http://jsfiddle.net/DxKCj/1/)`.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:03:56.723

Of course they will be invisible again. That is how HTML/JavaScript is supposed to behave. When you reload the page, the browser throws away the current state and "compiles" the page all over again. It is like running running a simple C program, exiting it, and running it again. If you want to save the state of the Divs, you will have to save it somewhere. You can either save it using HTML5 local storage, or in the cookies. You can do both of these through JavaScript.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:04:51.143

是的。不要打扰使用会话 - 只需设置一个 cookie。谷歌“javascript setcookie”，你会找到你需要的一切——存储哪些 div 在 cookie 中可见，然后在页面加载时检查 cookie 值。`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:02:38.207

Check out the following answer:

[create session with jquery?](https://stackoverflow.com/questions/1885908/create-session-with-jquery)

You can make an ajax call to a PHP page which will create a session. You can then do a simple IF when the page loads to see if the session is set to 1 or 0\. If it's 1, display the div, if not, remove it.

Simply make the AJAX call when the user clicks the button. If you need more specific code, let me know

# html - 使用 cgSceneGraph 1.4.2 取消选择节点

> ID：14984330
> 
> 赞同：0
> 
> 时间：2013-02-20T15:59:33.463
> 
> 标签：html, canvas

我想知道是否有办法在发生其他事情时取消选择节点，例如，如果我按下特定键或发生其他事件时。

另外，是否有一种快速的方法来访问选定节点的选定子节点？我现在要做的是使用循环来检查每个节点是否被选中。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:07:43.927

是的，这是可能的。您可以使用`this.cgSceneGeaph.setSelected(boolean)`方法来选择或取消选择一个节点。然后将分派“onSelect”或“onDeselect”事件。

无法直接访问父节点的选定节点。有一种方法可以访问场景中选定节点的列表。在您的主要应用程序（继承自 CGSGScene）上，使用：

```
this.selectedNodes; //array of selected nodes 
```

这样您就可以访问所有选定的节点。

**编辑：完成代码以显示如何取消选择节点**

其他方式：从要检查的父节点使用 CGSGTraverser：

```
var condition = function(node) {
    return node.isSelected === true;
};

var traverser = new CGSGTraverser();
var listSelectedNodes = traverser.traverse(myNode, condition, null);

for (var s = 0, len = listSelectedNodes.length; s < len; s++) {
    this.sceneGraph.deselectNode(listSelectedNodes[s]);
} 
```

您还可以查看[网站上的遍历器示例](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html)。这是代码的链接：http: [//gwennaelbuchet.github.com/cgSceneGraph/examples/04_Advanced/04_Traverser/js/class.main.js](http://gwennaelbuchet.github.com/cgSceneGraph/examples/04_Advanced/04_Traverser/js/class.main.js)

希望这可以帮助:)

# c++ - 增加队列大小并找到最短的队列

> ID：14984333
> 
> 赞同：1
> 
> 时间：2013-02-20T15:59:37.393
> 
> 标签：c++, loops, for-loop, queue

我有一个范例，在向量的队列循环中，如果第 i 个队列的条件为真，则将第 i 个队列的 queuesize 增加 5 。在此操作之后，我需要搜索所有队列的队列大小并在最短的队列中入队。我想做一些类似下面给出的代码的事情

```
#include <vector> 
#include <queue> 
int min_index = 0;
std::vector<std::queue<int> > q
std::size_t size = q.size();
for( i=0; i<size; i++){ 
    if(..) {// A condition is true
 //increase the size of the ith queue by 5 more times
}

if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
} 
q[min_index].push(int)
} 
```

如果条件为真，如何人为地增加队列大小？然后搜索队列并找到最短大小的队列。

**更新**

```
#include <vector> 
#include <deque> 
int min_index = 0;
std::vector<std::deque<int> > q
std::size_t size = q.size();
for( i=0; i<size; i++){ 
   if(...) {// A condition is true
  q[i].resize(q[i].size() + 5)
}
if(q[min_index].size() > q[i].size())
        min_index = i; // Now q[min_index] is the shortest queue
} 
q[min_index].push(int)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:21:11.670

目前尚不清楚“增加队列大小”是什么意思。

如果您的意思是“增加队列的容量”，则不需要。queue 的默认底层容器是[deque](http://www.cplusplus.com/reference/deque/deque/)，它不是内存中的连续块，因此不会遇到任何扩展问题，无需`reserve()`提前进行。有关这方面的更多详细信息，请参见[此处](http://www.gotw.ca/gotw/054.htm)。

因此，队列的大小只是其中的项目数。如果你想增加*它*，deque 有一个`resize()`函数，它可以将所有新项目的指定值作为参数，或者只是对它们进行值初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:17:47.070

这是一种可能的方法（假设 C++11 是一个选项，否则该示例很容易在没有 lambda 和 的情况下重写`auto`）：

```
#include <vector>
#include <queue>
#include <algorithm>

// Don't use this in your real code: I use it here just for convenience.
// It is a bad programming practice to import a whole namespace (especially
// if it is a Standard Library namespace).
using namespace std;

// The function that defines your condition on each queue
bool cond_on_q(queue<int> const& q)
{
    bool satisfied = false;
    // Determine whether the condition is satisfied...
    return satisfied;
}

int main()
{
    vector<queue<int>> v = ...; // Initialize your vector of queues somehow

    // Iterate over the vector of queues
    for (auto& q : v)
    {
        if (cond_on_q(q)) // Is the condition satisfied?
        {
            // Insert 5 elements with any valid value (for instance, 0)
            for (int i = 0; i < 5; i++) (q.push(0));
        }
    }

    // Determine the queue with the minimum size.
    auto i = min_element(begin(v), end(v),
        [] (queue<int> const& q1, queue<int> const& q2) { 
            return q1.size() < q2.size(); 
            }
        );

    int newValue = ...; // Initialize the value to be enqueued somehow.        

    // Add the value to the queue with minimum size.
    i->push(newValue);
} 
```

# java - 将不同的属性类型解组到同一个 java 对象时出现 NullPointerException

> ID：14984334
> 
> 赞同：2
> 
> 时间：2013-02-20T15:59:40.043
> 
> 标签：java, jaxb, unmarshalling

我在尝试解组 XML 时遇到了一个严重的问题。起初，Member 元素在其“值”属性中仅包含整数（如第一个“EnumType”元素），但是，现在另一个“EnumType”以字符串作为值出现 - 我得到了下面的 NullPointerException。

请注意，Member.java 中的“值”成员在开始时来自类型“int”（当只接受整数作为成员元素的值时）并且它工作正常。仅当我将其更改为 Object 时（我想这是我的问题的根源） - 出现了以下异常。

XML:

```
<EnumType Name="Genre" UnderlyingType="Edm.Int32">
   <Member Name="ACTION" Value="0"/>
   <Member Name="COMEDY" Value="1"/>
</EnumType>
<EnumType Name="Rating" UnderlyingType="Edm.String">
   <Member Name="RatingA" Value="G"/>
   <Member Name="RatingB" Value="PG"/>
 </EnumType> 
```

枚举类型.java

```
@XmlRootElement
public class EnumType {

   @XmlElement(name = "Member", namespace = "http://schemas.microsoft.com/ado/2009/11/edm")
   private List<Member> members = new LinkedList<Member>();

   public List<Member> getMembers() {
      return members;
   }
} 
```

成员.Java

```
@XmlRootElement
public class Member {

    @XmlAttribute(name = "Name")
    private String name;

    @XmlAttribute(name = "Value")
    private Object value;

    public String getName() {
        return name;
    }

    public Object getValue() {
        return value;
    }
} 
```

解组上述 XML 时，我得到了这个 NullPointerException：

> java.lang.NullPointerException at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor.get(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property.AttributeProperty.(Unknown来源）在 com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create（未知来源）在 com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.（未知来源）在 com。 sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source) at com.sun.xml.internal。 bind.v2.runtime.property.ArrayElementProperty.(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.(Unknown Source) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at太阳反射。NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property。 PropertyFactory.create(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source) 在 com.sun.xml.internal.bind.v2.runtime.property.ArrayElementProperty.(Unknown Source) 在 com.sun。 xml.internal.bind.v2.runtime.property.ArrayElementNodeProperty.(Unknown Source) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect。NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property。 PropertyFactory.create(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source)在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source) 在 com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.(Unknown Source) 在 sun.reflect。在 sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)。DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang.reflect.Constructor.newInstance(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(Unknown Source) at com.sun。 xml.internal.bind.v2.runtime.ClassBeanInfoImpl.(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate(Unknown Source) at com.sun.xml.internal.bind.v2 .runtime.JAXBContextImpl.getOrCreate(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.(Unknown Source) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect。 java.lang.reflect 中 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 中的 NativeConstructorAccessorImpl.newInstance(Unknown Source)。com.sun.xml.internal.bind.v2.runtime.property.PropertyFactory.create(Unknown Source) 的 Constructor.newInstance(Unknown Source) com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.(Unknown来源）在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.（未知来源）在 com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getOrCreate（未知来源）。 xml.internal.bind.v2.runtime.JAXBContextImpl.(Unknown Source) at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(Unknown Source) at com.sun.xml.internal.bind .v2.ContextFactory.createContext(Unknown Source) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl。在 java.lang.reflect.Method.invoke(Unknown Source) 在 javax.xml.bind.ContextFinder.newInstance(Unknown Source) 在 javax.xml.bind.ContextFinder.newInstance(Unknown Source) 在 javax.invoke(Unknown Source)。 xml.bind.ContextFinder.find（未知源）在 javax.xml.bind.JAXBContext.newInstance（未知源）在 javax.xml.bind.JAXBContext.newInstance（未知源）在 com.sap.ndb.studio.rdl。 csdlparser.jaxb.JAXBParser.load(JAXBParser.java:26) 在 com.sap.ndb.studio.rdl.datapreview.functions.LoadGRDL.function(LoadGRDL.java:59) 在 org.eclipse.swt.browser.WebSite。在 org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:119) 在 org.eclipse.swt.browser.WebSite$7.method6(WebSite.java:129) 调用(WebSite.java:773) ) 在 org.eclipse.swt.internal.win32.OS。DispatchMessageW(Native Method) 在 org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2546) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3756) 在 org.eclipse。 ui.internal.Workbench.runEventLoop(Workbench.java:2701) at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665) at org.eclipse.ui.internal.Workbench.access$4(Workbench.java :2499) 在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679) .internal.Workbench.createAndRunWorkbench(Workbench.java:668) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java :124) 在 org.eclipse.equinox.internal.app。EclipseAppHandle.run(EclipseAppHandle.java:196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start( EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun .reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at org .eclipse.equinox.launcher.Main.invokeFramework(Main.java:629) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1414)

有任何想法吗？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:13:31.510

当您使用`@XmlAttribute`. 就像你在`Member`课堂上一样：

```
@XmlAttribute(name = "Value")
private Object value; 
```

**了解更多信息**

*   [具有 Object 类型的 JAXB 属性引发空指针异常？](https://stackoverflow.com/questions/14899555/jaxb-attribute-with-object-type-throwing-null-pointer-exception/14900365#14900365)

# java - 使用 ImageIO.read 通过 inputstream 读取图像

> ID：14984335
> 
> 赞同：1
> 
> 时间：2013-02-20T15:59:41.530
> 
> 标签：java, image, sockets, io

我试图在服务器上读取来自客户端的图像。向你展示我的问题。我从客户端完全删除了 imageIO.write 部分。在服务器上，我有一部分代码如下所示：

```
image =ImageIO.read(socket.getInputStream());
System.out.println("you already read the image"); 
```

当我运行服务器时，我立即收到“您已经阅读了图像”消息。在其他读取方法（如 readObject 等）中，读取方法假设等到消息从客户端到达。我没有从客户端发送任何内容，那么服务器怎么可能立即收到一些东西并跳过？似乎服务器在读取方法上跳过了。在我从客户端删除 write 方法之前，我总是得到 NullPointerException。似乎问题在于服务器只是跳过了 ImageIO.read。我做对了吗？

# c - 编译器错误：在 malloc 期间从类型“void *”分配给“struct”时类型不兼容

> ID：14984339
> 
> 赞同：5
> 
> 时间：2013-02-20T15:59:50.767
> 
> 标签：c, multidimensional-array, malloc

**编辑**——否决的选民可以解释吗？我有一个明确的问题，有支持性证据和先前调查的证据。我想了解你为什么不给我投票……？

* * *

使用 gcc 编译时出现此错误：

`error: incompatible types when assigning to type ‘struct cell’ from type ‘void *`

问题线是：

```
 struct cell* cells = NULL;
    cells = malloc(sizeof(struct cell) * length);
    for (i = 0; i < length; i++) {
            cells[i] = malloc(sizeof(struct cell) * width); 
```

我相信我已经遵循了正确的协议，如此处和[此处所描述](https://stackoverflow.com/questions/10811439/malloc-an-array-of-struct-pointers)[的](https://stackoverflow.com/questions/10663031/error-incompatible-types-when-assigning-to-type-values-from-type-void)。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:03:46.173

对于多维数组，您需要一个类型为 的数组`struct cell** cells`：

```
struct cell** cells = NULL;
cells = malloc(sizeof(struct cell*) * length);
for(int i = 0; i < length; i++) {
  cells[i] = malloc(sizeof(struct cell)*width);
} 
```

现在`cells`是一个多维数组，其中第一个索引范围是长度，第二个索引范围是宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-01T15:21:14.377

`malloc()``void *`总是返回一个你需要类型转换的指针

为单个元素分配内存：

`struct cell* new = (struct cell*) malloc(sizeof(struct cell)); //This will allocate memory and new is pointer`

访问数据成员：

`new->member_name = value; //dot(.) operator doesn't work as new is a pointer and not an identifier`

为数组分配内存：

`struct cell* base = (struct cell*) malloc(sizeof(struct cell) * length); //This will allocate memory and base is base of array`

访问数据成员：

`base[i].member_name = value; //When accessing elements of array the -> operator doesn't work.`

# awk - 使用 AWK 处理来自多个文件的输入

> ID：14984340
> 
> 赞同：74
> 
> 时间：2013-02-20T15:59:50.800
> 
> 标签：awk

许多人通过发布以下解决方案来一次对多个输入文件进行 AWK 处理非常有帮助：

```
$ awk 'FNR==NR{a[$1]=$2 FS $3;next}{ print $0, a[$1]}' file2 file1 
```

这很好用，但我想知道是否有人可以向我解释为什么？我发现 AWK 语法有点难以掌握，并希望有人不介意为我分解代码片段。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-02-20T16:16:41.157

```
awk 'FNR==NR{a[$1]=$2 FS $3;next} 
```

这里我们处理第一个输入（file2）。比如说，FS是空间，我们`a`向上构建一个array()，索引是column1，value是`column2 " " column3`手段`FNR==NR and next`，这部分代码只对file2起作用。你可以看看什么是 NR 和 FNR

```
{ print $0, a[$1]}' file2 file1 
```

当`NR != FNR`需要处理第二个输入时，file1\. 这里我们打印file1的行，以column1为索引，找出array(a) print中的值。换句话说，file1 和 file2 在两个文件中都由 column1 连接。

对于 NR 和 FNR，很快，

```
1st input has 5 lines
2nd input has 10 lines,

NR would be 1,2,3...15
FNR would be 1...5 then 1...10 
```

你看到了`FNR==NR`检查的把戏。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-23T03:51:58.373

我在 Google 上找到了这个问题/答案，它似乎是指在另一个问题（[如何使用 AWK 合并两个文件？](https://stackoverflow.com/questions/5467690)）中找到的一个非常具体的数据集。下面是我一直在寻找的答案（我想大多数人都会这样），即简单地使用 AWK 连接来自两个不同文件的每一行。尽管您可能可以使用一些 UNIX 实用程序，例如**join**或**paste**，但如果您想要的输出不同，AWK 显然会更加灵活和强大，通过使用**if**语句或更改**OFS**（根据实用程序的不同，这可能更难做到；见下文）例如，以更具表现力的方式更改输出（对于 shell 脚本编写者来说，这是一个重要的考虑因素。）

对于简单的逐行连接：

`awk 'FNR==NR { a[FNR""] = $0; next } { print a[FNR""], $0 }' file1 file2`

这通过使用隐式类型转换来模拟数字索引数组（AWK 仅具有关联数组）的功能。它相对具有表现力且易于理解。

使用两个名为 test1 和 test2 的文件，其中包含以下行：

测试1：

```
line one
line two
line three 
```

测试2：

```
line four
line five
line six 
```

我得到这个结果：

```
line one line four
line two line five
line three line six 
```

根据您希望如何连接输出中的列之间的值，您可以选择适当的输出字段分隔符。这是一个用省略号 (...) 分隔列的示例：

`awk 'BEGIN { OFS="..."} FNR==NR { a[(FNR"")] = $0; next } { print a[(FNR"")], $0 }' test1 test2`

产生这个结果：

```
line one...line four
line two...line five
line three...line six 
```

我希望至少这能激发你们所有人利用 AWK 的力量！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-24T16:24:27.027

不久前，我偶然发现了一个非常好的解决方案来一次处理多个文件。方法是使用以下方法将 AWK 数组中的文件保存在内存中：

```
FILENAME==ARGV[1] {  file2array[FNR] = $0 ; next }
FILENAME==ARGV[2] {  file1array[FNR] = $0 ; next } 
```

对于后期数据处理，最好保存行数，所以：

```
FILENAME==ARGV[1] {  file2array[FNR] = $0 ; f2rows = FNR ; next }
FILENAME==ARGV[2] {  file1array[FNR] = $0 ; f1rows = FNR ; next } 
```

`f2rows`并将`f1rows`保持最后一行的位置。

它有更多的代码，但如果你想要更复杂的数据处理，我认为这是更好的方法。此外，以前的方法按顺序处理输入，因此如果您需要同时进行一些依赖于来自两个文件的数据的计算，您将无法做到这一点，而使用这种方法，您可以对两个文件进行所有操作。

# sql - SQL中的模糊搜索

> ID：14984342
> 
> 赞同：3
> 
> 时间：2013-02-20T15:59:53.867
> 
> 标签：sql, fuzzy-search

我正在尝试将 Linux 软件包（名称 + 版本）的信息映射到其相应的 CPE 字符串（请参阅[http://nvd.nist.gov/cpe.cfm](http://nvd.nist.gov/cpe.cfm)），以便能够自动找到系统可能存在的漏洞。

NIST 提供了一个 XML 文档，其中包含所有相关的 CPE。我考虑将这些信息解析到 SQL 数据库中，这样我就可以通过名称和版本号快速搜索。那将是大约 70.000 行。

当然，现在的问题是 CPE 的拼写和包名称存在差异。例如，Tomcat 6.0.36 的 CPE 将是`cpe:/a:apache:tomcat:6.0.36`这样您拥有名称`tomcat`和版本`6.0.36`。现在，包管理器可以为您`tomcat6`提供名称和`6.0.36-3`版本之类的信息。这两个程序很可能是相同的或至少具有相同的漏洞。所以我需要能够自动将上述 CPE 识别为我的 tomcat 包的正确 CPE。

首先要做的是某种规范化，可能会将所有内容都转换为小写。但正如您从示例中看到的那样，这还不够。我需要某种模糊搜索。从我已经发现的情况来看，有一些解决方案可以在拼写错误的情况下识别匹配项。不过，这并不是我所需要的。包名称没有拼写错误，但可能包含其他字符（或遗漏一些字符）。

模糊搜索也必须相对较快，因为我需要为多个主机执行它，每个主机都可以安装数百个包，正如我所说，数据库将有大约 70.000 行。我可以引入一个主要查找，它首先尝试找到一个精确匹配，但是由于我怀疑许多包不会有任何对应的 CPE 字符串，所以不会显着减少数量。

另一个限制是该解决方案应该在非专有数据库上运行，因为我没有其他任何财务手段。

那么，有什么符合这些要求的吗？或者除了某种模糊搜索之外，您能想出任何解决我问题的方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:10:01.110

首先是一般性评论。CPE 命名法似乎是有机发展的，通常取决于供应商的（不一致的）命名法。例如，Sun Java 有 major.minor.point_version。Adobe 使用major.minor.point.subpoint。Microsoft 操作系统使用 Service Packs_Language Packs。其他一些供应商会使用主要是数字但偶尔会出现字母的点发布（例如，.8、.9、.9R2、.10）。

当我处理上述问题时，我从他们的 XML 文件开始，并在 Excel 中对它们进行操作，并按句点拆分。然后我会按数字（如果它们都是数字）或作为文本字符串排序。（请注意，主要是数字中的字母会造成严重破坏，并且 .10 在词汇上位于 .8 之前）

这种不一致，是第三方软件厂商雨后春笋般冒出来的原因。公司宁愿付钱给软件供应商也不愿解开这个快死结。

如果您想要真正的模糊搜索，请查看这个关于[使用 Soundex](https://stackoverflow.com/q/1923394/509840)的问题。预计会得到很多误报。

如果您的目标是准确映射 CPE 字符串，您可能应该考虑实现一个从 CPE 转换为库名称的查找表。

# symfony - 结合基于 yml 的实体使用 FOSUserBundle

> ID：14984344
> 
> 赞同：5
> 
> 时间：2013-02-20T16:00:00.883
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我从头开始了一个 Symfony2 项目，然后在其中安装了**FOSUserBundle**。

然后，我编写了（实际上是用 ORM Designer 生成的）一些需要在它们之间以及与 User 实体之间建立关系的实体。

我有`Items`属于`Users`，`Collections`属于`Users`那个组`Items`，等等。

由于我使用 FOSUserBundle 我只有一个基本的用户类（[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)，步骤 3a ）使用注释定义，没有`config/doctrine`文件夹，也没有`User.yml`文件.

然后我创建了`MyBundle/Resources/config/doctrine`文件夹并添加了`yml`上面提到的文件。

当我尝试使用命令行工具生成实体时，一切正常：它将从我的 yml 文件创建实体。

但是，此时，尝试在浏览器中加载登录之前工作的 url（当我只安装了**FOSUserBundle**时）将引发此错误：

> MappingException：找不到名为“/var/www/concert/src/X/MyBundle/Resources/config/doctrine/User.orm.yml”的类“X\MyBundle\Entity\User”的映射文件。

只要文件夹中有`*.orm.ym`l 文件，以下操作（例如生成 CRUD 逻辑）将不起作用`config/doctrine`。如果我删除这些，CRUD 生成将起作用，但实际 mysql 表的生成不会。

处理这些让我达到了可以获取表格的程度，但是如果我尝试使用涉及新生成的 CRUD 的任何 url，则实际应用程序将无法工作，因为实体基于 ​​yml (我删除它以使事情“工作”）它不会有任何映射知识。

这本质上是错误的吗？让基于 yml 的实体与基于 FOSUserBundle 的用户实体相关联，并且仍然能够获得不错的命令行生成工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T19:30:58.697

您描述的问题源于混合配置格式（yaml，我假设注释）。您可以通过放弃模型中的注释并将其替换为 yaml 文件来轻松解决此问题，就像您在自己的模型中所做的那样。

不幸的是，FOSUserBundle-docs 只向您展示了如何使用注释，因此当您的 X\MyBundle\Entity\User 扩展 FOSUSerBundle 的 UserEntity 时，这里有一个快速转换为 yaml 格式的方法：

```
X\MyBundle\Entity\User:
    type:  entity
    table: fos_user
    id:
        id:
            type: integer
            strategy: { generator: "AUTO" } 
```

其余的东西由 FOSUserBundle 处理，因为 BaseModel 是一个[映射超类](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html)，并且已经描述了`User.orm.xml`.

如果您不在整个应用程序中使用注释，您可能还希望在您的应用程序中禁用它们`app/config/config.yml`以防止副作用。

# github - 将 Google 代码项目的克隆推送到 Github 是否可以接受？

> ID：14984346
> 
> 赞同：1
> 
> 时间：2013-02-20T16:00:06.537
> 
> 标签：github, google-code

我正在尝试`gdata`在 Rails 项目中使用 gem。gem的[主要开发分支](http://code.google.com/p/gdata-ruby-util/)不支持 Ruby 1.9（它是`require`Ruby [1.9.x 不需要且不存在的](https://stackoverflow.com/a/3984016/306084)）。当然，有[叉子可以这样做](http://code.google.com/r/pablof-gdata/)；这是一个简单的修复。但是，要在 Rails 项目中使用 gem，我需要一个 Bundler 在我部署时可以找到的版本，这意味着使用的项目的分支将无法工作（除非 Bundler 现在支持 Mercurial 以匹配其 Git 支持？）。`'jcode'``hg`

对我来说“显而易见”的解决方案是克隆 Mercurial 主存储库，进行我需要的修复，然后将这个新分支推送到我的部署可以克隆的 Github。然而，这似乎有点不合时宜，因为副作用将是建立一个非官方的公开 Github 存储库。这种事情可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:01:55.757

完全没问题，只要许可证允许。不要忘记链接回原始存储库，并在自述文件中明确说明您在做什么。

# c# - 如何设置正确的 Windows 服务权限

> ID：14984348
> 
> 赞同：0
> 
> 时间：2013-02-20T16:00:10.373
> 
> 标签：c#, windows, security

我们在 C# 上有自定义 Windows 服务。该服务访问一些 URL 并启动一些预定义的本地脚本。

我从离开团队的那个人那里接过项目。我们将服务的用户更改为我的帐户。以前的家伙曾经从管理员帐户运行服务，但这违反了安全策略。我正在尝试以正确的方式做到这一点。

问题是，此服务无权访问有错误的注册表。C#服务内部有异常：

```
'Access to the registry key 'Global' is denied' 
```

问题是我们错过了这个用户帐户的哪些权限，或者如何找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:00:00.320

正如 Google 查询“拒绝访问注册表项 'Global' 被拒绝”的大多数结果所示，此消息意味着“用户无权访问性能信息”。

# twitter-bootstrap - Bootstrap Affix JavaScript 组件，定位不正确

> ID：14984353
> 
> 赞同：0
> 
> 时间：2013-02-20T16:00:21.423
> 
> 标签：twitter-bootstrap

当我开始向下滚动此网页时，Bootstrap 词缀插件会切入`<header class="jumbotron subhead">`- 此图像显示此症状：

![在此处输入图像描述](../Images/1fc9b98bcee4a6127d3ef685b7d34cf0.png)

我希望我的词缀导航不会切入并表现得像 Bootstrap 的官方文档中出现的那样，当您开始滚动时`<header class="jumbotron subhead">`它不会切入>。`<header class="jumbotron subhead"`有没有办法通过一些额外的 CSS 规则来解决这个问题？目前，如果您检查两个网站上的附加导航，我应用于 Affix 组件的 CSS 规则与 Bootstrap 文档中的 Affix 组件完全相同，所以我不明白为什么它无法正确显示。

CSS 规则：

```
.bs-docs-sidenav.affix {
    top: 40px;
}
.bs-docs-sidenav {
    width: 258px;
}
.bs-docs-sidenav {
    background-color: #FFFFFF;
    border-radius: 6px 6px 6px 6px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067);
    margin: 30px 0 0;
    padding: 0;
    width: 228px;
}
.affix {
    position: fixed;
}
.nav-list {
    margin-bottom: 0;
    padding-left: 15px;
    padding-right: 15px;
}
.nav {
    list-style: none outside none;
    margin-bottom: 20px;
    margin-left: 0;
}
ul, ol {
    margin: 0 0 10px 25px;
    padding: 0;
} 
```

我正在处理的网站（损坏的词缀）：

[http://www.bestcastleintown.co.uk/boot/test2.html#slides](http://www.bestcastleintown.co.uk/boot/test2.html#slides)

引导网站（工作词缀）：

[http://twitter.github.com/bootstrap/javascript.html](http://twitter.github.com/bootstrap/javascript.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:57:40.547

您现在需要做的就是定义导航栏粘贴后要放置的位置。在您的 stylesheet.css 更改中

```
.bs-docs-sidenav.affix {
top: 40px;
} 
```

类似于

```
.bs-docs-sidenav.affix {
top: 230px;
} 
```

希望这可以帮助！

# c# - 提取字符串的一部分c#

> ID：14984359
> 
> 赞同：0
> 
> 时间：2013-02-20T16:00:51.017
> 
> 标签：c#

在 C# 中，拆分这种字符串的最佳方法是什么？

`%%x%%a,b,c,d`

所以我最终得到 %% 和另一个变量之间的值，其中包含第二个 %% 的所有内容，即`var x = "x"; var y = "a,b,c,d"`

哪里`a,b,c..`可能是一个无限的逗号分隔列表。我需要提取两个双百分号之间的列表和值。（为了对抗无限部分，我想也许将字符串分离为：`%%x%%`和`a,b,c,d`。此时我可以使用类似这样的东西来获得 X。

```
var tag = "%%";
      var startTag = tag;
      int startIndex = s.IndexOf(startTag) + startTag.Length;
      int endIndex = s.IndexOf(tag, startIndex);
      return s.Substring(startIndex, endIndex - startIndex); 
```

最好的方法是使用正则表达式还是使用大量`indexOf`并`substring`基于静态`%%`字符进行提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:10:32.083

鉴于您想要的是“x，a，b，c，d”，Split() 函数实际上非常强大，而正则表达式对此会是过度的。

这是一个例子：

```
string test = "%%x%%a,b,c,d";
string[] result = test.Split(new char[] { '%', ',' }, StringSplitOptions.RemoveEmptyEntries);
foreach (string s in result) {
  Console.WriteLine(s);
} 
```

基本上，我们要求它用 '%' 和 ',' 分开，并忽略空结果（例如，“%%”之间的结果）。结果如下：

```
x
a
b
c
d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:11:35.683

提取`X`：

如果`%%`总是在开始，那么；

```
string s = "%%x%%a,b,c,d,h";
s = s.Substring(2,s.LastIndexOf("%%")-2);
//Console.WriteLine(s); 
```

别的;

```
string s = "v,u,m,n,%%x%%a,b,c,d,h";
s = s.Substring(s.IndexOf("%%")+2,s.LastIndexOf("%%")-s.IndexOf("%%")-2);
//Console.WriteLine(s); 
```

如果您需要一次全部获取它们，请使用它；

```
string s = "m,n,%%x%%a,b,c,d";

var myList = s.ToArray()
              .Where(c=> (c != '%' && c!=','))
              .Select(c=>c).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:16:26.730

这将让您一口气完成所有操作：

```
string pattern = "^%%(.+?)%%(?:(.+?)(?:,|$))*$";
string input = "%%x%%a,b,c,d";
Match match = Regex.Match(input, pattern);
if (match.Success)
{
    // "x"
    string first = match.Groups[1].Value;
    // { "a", "b", "c", "d" }
    string[] repeated = match.Groups[2].Captures.Cast<Capture>()
        .Select(c => c.Value).ToArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:06:58.143

您可以使用`char.IsLetter`来获取所有`list of letter`

```
string test = "%%x%%a,b,c,d";
var l = test.Where(c => char.IsLetter(c)).ToArray();
var output = string.Join(", ", l.OrderBy(c => c)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:13:50.433

由于您希望`%%`在单独的变量中和之后的所有内容之间的值并且您不需要解析 CSV，我认为 RegEx 解决方案将是您的最佳选择。

```
var inputString = @"%%x%%a,b,c,d";
var regExPattern = @"^%%(?<x>.+)%%(?<csv>.+)$";

var match = Regex.Match(inputString, regExPattern);

foreach (var item in match.Groups)
{
    Console.WriteLine(item);                
} 
```

该模式有两个名为`x`and的命名组`csv`，因此您可以轻松地按名称引用它们并将它们分配给值，而不仅仅是循环：

```
var x = match.Groups["x"];
var y = match.Groups["csv"]; 
```

# c# - Visual Studio 2012 中嵌入式语言的语法突出显示

> ID：14984365
> 
> 赞同：2
> 
> 时间：2013-02-20T16:01:09.030
> 
> 标签：c#, syntax, visual-studio-2012, syntax-highlighting, mef

我正在使用 C# 和 Visual Studio 2012 来实现嵌入在 html 中的语言的语法突出显示（很像 <% %> 中的 ASP 代码）。到目前为止，我发现我需要使用 `IProjectionBuffer`来实现这一点，但是除了这里有点模糊的描述之外，没有关于如何使用 MEF 执行此操作的示例：http: [//msdn.microsoft.com/en-我们/图书馆/dd885240.aspx#projection](http://msdn.microsoft.com/en-us/library/dd885240.aspx#projection)。我试图将`ITextBuffer`通过MEF“导入”的文本范围分配给一个`IProjectionBuffer`，但它没有效果。

有人对如何进行有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T15:35:54.317

我认为为此目的有一个内置功能。我曾经使用带有标签的 MEF 处理 C# 代码中的文本突出显示。我认为您应该从[Text.Classification](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.classification%28v=vs.110%29.aspx)开始。

可悲的是缺乏文档，但我认为你应该为语言部分构建一个词法分析器或类似的东西[MSDN：DLR（功能）](http://msdn.microsoft.com/en-us/library/dd233052.aspx)可以帮助你，

> DLR 允许语言实现者避免创建他们传统上必须自己创建的词法分析器、解析器、语义分析器、代码生成器和其他工具。

检测分隔符，并通过分类对其进行着色。

这是一个自定义 C# 代码显示的[示例项目。](https://github.com/tomasr/KeywordClassifier)

# flash-media-server - 网络连接失败

> ID：14984367
> 
> 赞同：0
> 
> 时间：2013-02-20T16:01:11.757
> 
> 标签：flash-media-server, netconnection

我最近下载了 Adob​​e 媒体服务器启动器 5.0。我无法使用 rtmfp 连接到 FMS。我不断收到 NetConnection.Connect.Failed 错误。当我在本地运行它时，事情似乎工作正常。

我检查了端口 80、443 和 1935，它们都是开放的。

我该如何诊断。
这个问题的常见原因是什么？

谢谢你。

# ruby - 正则表达式划分数字以进行验证

> ID：14984368
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:01:13.723
> 
> 标签：ruby, regex

我的身份证是`8808135011086`。分解是：

*   `880813`: 格式为 yy-mm-dd 的出生日期
*   `5011`: 性别（介于`0001`-`4999`是女性和`5000`-`9999`是男性之间的任何东西）
*   `0`: 不管是不是外国的
*   `86`: 验证者编号以确保其余部分是合法的

将一个 13 位数字分成这样的组`880813`, `5011`, `0`,`86`很容易得到：

```
/\d{6}\d{4}\d{1}\d{2}/ 
```

如何让正则表达式查找`\d{4}`数字，然后检查它是否介于`0001`-`9999`或`5000`-之间`9999`？到目前为止，我的代码如下所示：

```
private
def gender_validation(gender)
  case gender
  when :male
    Employee.id_number.match(/\d{6}\d{4}\d{1}\d{2}/)
    return true
  when :famale
    Employee.id_number.match(/\d{6}\d{4}\d{1}\d{2}/)
    return true
  else
    return false
end 
```

如果标记的性别是男性，那么它会找到第二部分`5223`，如果它在 and 之间`5000`，`9999`它会返回 true。

我不只是在寻找答案；我也想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:06:10.007

男性：

```
/\d{6}\[5-9]\d{3}\d{1}\d{2}/ 
```

女性：

```
/\d{6}\[0-4]\d{3}\d{1}\d{2}/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:54:00.727

遵循[Rails Guides 中推荐的自定义验证：Active Record Validations and Callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validates_with "导轨导轨")

我建议的解决方案是：

```
class Employee < ActiveRecord::Base
  validates_with EmployeeIdAndGenderValidator

  attr_accessible :id_number, :gender

  .
  .
  .

end

class EmployeeIdAndGenderValidator < ActiveModel::Validator

  # my id is 8808135011086 This broken down
  # {880813} is my birdthdate in the format yy-mm-dd
  # {5011} means that i am male anything 
  #     between 5000-9999 is male
  #     and 0001-4999 is female,

  # the next number {0} is weather someone is foreign or not,
  # the next two {86} is a validator number to make sure the rest is legit.

  def validate(record)
    id_number = record.id_number

    unless id_number[/\d{13}/]
      record.errors[:id_number] << "invalid id number"
    else
      brirth_date   = id_number[(0..5)]
      parsed_gender = id_number[(6..9)].to_i
      foreign       = id_number[10]
      validator     = id_number[(-2..-1)]

      validate_gender(parsed_gender, record)
    end
  end

private

  def validate_gender(parsed_gender, record)
    if(parsed_gender < 1 || parsed_gender > 9999)
      record.errors[:id_number] << "the id number had invalid gender number."
    else
      calculate_gender = (parsed_gender <= 4999 ? :female : :male)

      unless record.gender == calculate_gender
        record.errors[:gender] << "The extracted gender dont' match with the selected gender"
      end
    end
  end

end 
```

希望对你有帮助！

P/S：对不起我的英语。

# java - 如何将数据从一个表插入到另一个表中，为组合框选择它？

> ID：14984371
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:01:17.627
> 
> 标签：java, jsp, servlets, jdbc, jstl

*   我尝试插入数据以使用组合选择产品类 idcat 类类别，但请没有任何想法

*   -课程

    公共类类别{

    ```
    private int idcat;
    private String name;
    private String descrip; 
    ```

    }

    公共类产品{

    ```
    private int producto;
    private int idcategoria;
    private String nombre;
    private String descrip; 
    ```

    }

    -DAO CLASS CategoriaDAO

    公共集合 listarIdCat() 抛出 DAOExcepcion{

    ```
     Collection<Categoria> c=new ArrayList<Categoria>();
        String query="SELECT id_categoria from categoria ";
        Connection con=null;
        PreparedStatement stmt=null;
        ResultSet rs=null;

        try {
            con=ConexionBD.obtenerConexionDirecta();
            stmt=con.prepareStatement(query);
            rs=stmt.executeQuery();
            while(rs.next()) {
                Categoria vo=new Categoria();
                vo.setIdcat(rs.getInt("id_categoria"));
                c.add(vo);

            }

        } catch (SQLException e) {
            System.err.println(e.getMessage());
            throw new DAOExcepcion(e.getMessage());
        }finally{

            this.cerrarStatement(stmt);

            this.cerrarResultSet(rs);
            this.cerrarConexion(con);
        }
        return c;
    } 
    ```

*   DAO类产品oDAO

> ```
> public void insertar(Producto vo) throws DAOExcepcion {
> 
> >     
> >             String query = "INSERT INTO producto(id_categoria,nombre,descripcion) VALUES ((SELECT id_categoria
> > FROM categoria WHERE id_categoria=?),?,?,?)";
> >             Connection con = null;
> >             PreparedStatement stmt = null;
> >     
> >             try {
> >                 con = ConexionBD.obtenerConexionDirecta();
> >                 stmt = con.prepareStatement(query);
> >                 stmt.setInt(1, vo.getIdcat());
> >                 stmt.setString(2, vo.getNombre());
> >                 stmt.setString(3, vo.getDescrip());
> >                 int i = stmt.executeUpdate();
> >                 if (i != 1) {
> >                     throw new SQLException("No se pudo insertar");
> >                 }
> >             } catch (SQLException e) {
> >                 System.err.println(e.getMessage());
> >                 throw new DAOExcepcion(e.getMessage());
> >             } finally {
> >                 this.cerrarStatement(stmt);
> >                 this.cerrarConexion(con);
> >             }
> >     
> >         } 
> ```

*   NEGOCIO CLASS 类别Negocio

    公共类CategoriaNegocio {

    ```
    public Collection<Categoria> listarIdCat()throws DAOExcepcion{

        CategoriaDAO dao=new CategoriaDAO();

        Collection<Categoria> lista=dao.listarIdCat();

        return lista;

    } 
    ```

    }

*   NEGOCIO CLASS 产品Negocio

    ```
    public void insertarProducto(int idCat, String nom, String descrip,
                double prec, int stock, String image) throws DAOExcepcion {

            Producto p = new Producto();
            p.setIdcat(idCat);
            p.setNombre(nom);
            p.setDescrip(descrip);
            ProductoDAO dao = new ProductoDAO();
            try {
                dao.insertar(p);
            } catch (DAOExcepcion e) {
                throw e;
            }

        } 
    ```

*   SERVLET InsertarProdServlet

> ```
> protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
> 
>       CategoriaNegocio negocio = new CategoriaNegocio();
> 
>       try {
> 
>           Collection<Categoria> lista = negocio.listarIdCat();
> 
>           request.setAttribute("IDCATEGORIA", lista);
> 
>       } catch (DAOExcepcion e) {
> 
>           System.out.println(e.getMessage());
>       }
>       RequestDispatcher rd = request.getRequestDispatcher("/WEB-INF/insertar.jsp");
>       rd.forward(request, response);
> 
>   }
> 
>   /**
>    * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
>    */
>   protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
> 
>       String id=request.getParameter("tid_cat");
>       int idcat=Integer.parseInt(id.trim());
> 
>       String nom=request.getParameter("tnomprod");
>       String des=request.getParameter("tdesprod");
> 
>       ProductoNegocio negocio=new ProductoNegocio();
> 
>       try {
>           negocio.insertarProducto(idcat, nom, des);
>           request.setAttribute("MENSAJE", "Se inserto correctamente");
>           RequestDispatcher rd=request.getRequestDispatcher("/insertar.jsp");
>           rd.forward(request,response);
> 
>       } catch (DAOExcepcion e) {
> 
>           request.setAttribute("MENSAJE_ERROR", "Hubo problemas");
>           RequestDispatcher rd=request.getRequestDispatcher("/error.jsp");
>           rd.forward(request,response);
>       }
> 
>   } 
> ```

JSP 插件

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="InsertarProdServlet" method="post">

<table><caption>Inserte Producto</caption>
<tr>
<td align="center"><select name="tid_cat" size="1" >  
<c:forEach items="${IDCATEGORIA}" var="c" >  
<option value="${c.idcategoria}" >${c.idcategoria}</option>  
</c:forEach>  
</select></td><td>
</td>
</tr>
<tr>
<td>NOMBRE</td><td><input type="text" name="tnomprod"> </td></tr><tr>
<td>DESCRIPCION</td><td><input type="text" name="tdesprod" > </td></tr><tr>
<td><input type="submit" value="INSERTAR">   </td></tr><tr>
</tr>
</table>
</form>
${MENSAJE}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:53:36.997

您必须通过类似的 Servlet 访问您的应用程序`http://localhost/YouWebAppName/InsertarProdServlet`，这将调用 GET 请求（从而执行该`doGet`函数）并设置请求属性。然后它会转发到你的`insertar.jsp`页面，当点击提交时，它会调用一个 POST 请求（从而执行`doPost`函数）。

作为旁注，下次不要发布该代码墙，否则没有人会阅读您的问题，只需发布​​您的代码的[SSCCE](http://sscce.org)以显示可能存在问题的位置。En mi opinión, cuando vi tu pregunta ni me dieron ganas de leerla por solo ver tanto código que no forma parte del problema concreto（IMO，当我看到你的问题时，我不想阅读它只是为了查看所有不是的代码真正问题的一部分）。

# javascript - javascript中的动态方法调用

> ID：14984376
> 
> 赞同：0
> 
> 时间：2013-02-20T16:01:29.500
> 
> 标签：javascript

我知道我可以这样做：

```
var myClass = { /* my class definition */ };
var methodName = 'myMethod';
myClass[methodName](p1,p2,...,pN); 
```

但是如果有这个我该怎么办：

```
if(data.someMethodName[0]!== undefined){ ... } 
```

或者

```
data.someMethodName[i].someAttribute 
```

如何`someMethodName`动态调用意味着将其称为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:03:06.613

您正在寻找的是括号符号：

```
data[someMethodName][0].

data[ someMethodName[0] ](p1, p2, ...) 
```

# c# - 字典 <,> 大小、GetHashCode 和素数？

> ID：14984378
> 
> 赞同：6
> 
> 时间：2013-02-20T16:01:31.450
> 
> 标签：c#, .net, math, dictionary

*我已经阅读了很多关于这个有趣的话题（IMO）的内容。但我不完全理解一件事：*

字典大小正在将其容量（*加倍到最接近的素数*）增加到素数（重新分配时）：因为：

```
int index = hashCode % [Dictionary Capacity]; 
```

*   所以我们可以看到这里使用素数是`[Dictionary Capacity]`因为它们的*GreatestCommonFactor* 是`1`。这*有助于*避免碰撞。

**此外**

我已经看到了许多实施示例`GetHashCode()`：

这是 Jon Skeet 的一个示例：

```
public override int GetHashCode()
{
    unchecked 
    {
        int hash = 17;
        // Suitable nullity checks etc, of course :)
        hash = hash * 23 + field1.GetHashCode();
        hash = hash * 23 + field2.GetHashCode();
        hash = hash * 23 + field3.GetHashCode();
        return hash;
    }
} 
```

我不明白 ：

**问题**

> 素数是否 **同时**用于:`Dictionary capacity` **和**?`getHashCode`

因为在上面的代码中，返回值很可能*不是*质数[*如果我错了请纠正我*]，因为

*   乘以`23`
*   添加`GetHashCode()`每个字段的值。

例如：（11,17,173 是素数）

```
 int hash = 17;
        hash = hash * 23 + 11; //402
        hash = hash * 23 + 17; //9263
        hash = hash * 23 + 173 //213222
        return hash; 
```

213222 不是素数。

也没有任何数学规则表明：

`(not a prime number) + (prime number) = (prime number)`

也不

`(not a prime number) * (prime number) = (prime number)`

也不

`(not a prime number) * (not a prime number) = (prime number)`

那么我错过**了什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T16:09:23.147

结果`GetHashCode`是什么并不重要（它根本不必是素数），只要两个被认为相等的对象的结果相同即可。然而，为两个被认为不同（但仍不一定是素数）的对象返回不同的值是*很好的*（但不是必需的）。`GetHashCode`

给定两个数字*a*和*b*，当您将它们相乘时，您会得到`c = a * b`。通常有多个不同的*a*和*b*对给出相同的结果*c*。例如 6 * 2 = 12 和 4 * 3 = 12。但是，当*a*是*素*数时，产生相同结果的对要少得多。这对于不同对象的哈希码应该*不同的属性是很方便的。*

在字典中，同样的原则也适用：对象根据其哈希值放入存储桶中。由于大多数整数不能很好地除以素数，因此您可以很好地分散存储桶中的对象。理想情况下，您希望每个存储桶中只有一个项目以获得最佳字典性能。

* * *

稍微偏离主题：蝉（那是一种昆虫）[使用素数](http://io9.com/5895840/why-do-cicadas-know-prime-numbers)来确定它们在多少年后再次交配。由于这个交配周期是*质*数年，因此交配与其任何敌人的生命周期持续一致的可能性很小。

# java - 与移动 (Android) 游戏联机和互动的最佳实践/最佳服务

> ID：14984384
> 
> 赞同：0
> 
> 时间：2013-02-20T16:01:50.590
> 
> 标签：java, android, web-services

我想创建一个多人回合游戏，其中用户进行身份验证（通过 Facebook 帐户）并最终与其他玩家玩一些游戏。

我假设我需要一个服务器，通过一些 sql 查询，保持镜面身份验证，并且可以存储和检索有关正在进行的匹配和其他任何内容的信息。不需要任何 Web 服务器，因此服务器实际上只有这两个角色：身份验证和存储信息。

我实际上已经拥有了游戏并且我已经通过 FB 进行了身份验证，但是因为我目前没有任何专用服务器，所以不要再进一步了。

一旦这 - 我想 - 对于任何想要制作交互式自己的手机游戏的人来说都是一种非常常见的情况，在开始这段漫长的旅程之前，我想知道是否已经制作了一些东西：我可以在服务器和服务器上使用的库在客户端，甚至可以使用在线服务，使用 facebook 同步身份验证和一些命令来输入我的游戏运行所需的极少数信息，而无需解决安全问题、同步问题和其他任何可能的问题出现。

也欢迎模板、教程或完整示例（双方、服务器和客户端）

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:20:01.420

实际上，您的游戏有很多完整的解决方案。

您将需要强大的服务器端和大量的服务器逻辑。但同样，您可以使用为您处理服务器端的现有服务。[http://www.skiller-games.com/](http://www.skiller-games.com/)具有良好的支持和货币化功能。

其他：

*   [http://www.scoreloop.com/](http://www.scoreloop.com/)

*   [http://www.exitgames.com/](http://www.exitgames.com/)

如果你真的想把所有东西都变成你自己的东西，你需要阅读一些网络。

[如何制作多人游戏](https://stackoverflow.com/questions/5687598/how-to-make-multiplayer-game)

# php - php自动创建页面

> ID：14984385
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:01:51.747
> 
> 标签：php, mysql

我已经问过这个问题，但现在我会更具体。我有一个视频上传页面，需要一个 php 脚本来为每个视频创建一个页面。

```
<?php
$name=$_POST['name'];
$source=$_FILES['filename']; 
```

然后我做所有的 MySQL 连接并将数据插入我的数据库

```
$result=("INSERT INTO videos(Name,Source)VALUES($name,$source)"); 
```

但问题是我还需要一个脚本，它会根据 video.html 为每个视频创建一个页面

```
<html>
<video>
<source src="<?php .$source;?>">
<?php 
```

`$source=("SELECT FROM videos WHERE name="$name""); ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:04:23.090

What you actually want to do is just use the **.htaccess** file and **mod_rewrite**

You can then connect the url:

```
www.example.com/video/12345/the-funny-dog 
```

to actually call

```
www.example.com/video.php?videoID=12345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:10:07.173

您真的想为*每个视频*创建一个页面，即使您正在使用数据库？

**那是错误的方式！**

正确的方法是**一个文件**：

```
<?php
if ($_GET['ID']) {

    $ID = intval($_GET['ID']);

    $sql = 'SELECT *
        FROM videos
        WHERE ID = '.$ID;
    // do further sql stuff and display video
}
else {
    echo 'No video found with this id';
}
?> 
```

如果您将此文件命名为 video.php，您可以通过以下方式访问每个视频：

**video.php?ID=1**

等等

# c# - Service memory overflow processing or protection

> ID：14984394
> 
> 赞同：0
> 
> 时间：2013-02-20T16:02:06.410
> 
> 标签：c#, service

I look for ways or solution to process memory overflow. Possibly restart service when memory overflow or when it grows above some value. Make some work before it die.

I know that is not normal situation and all errors leeds memory overflow needs to be corrected, but I need to be shure that after some issue service will recovered.

**UPD** I have windows service. This server accepts many connections from clients. Clients make some actions that leeds to memory consumption. Not leak, it just eat memory to process clients reqierments. At some moments (peak load) RAM is not enough. This is not big problem. The problem is that after first memory overflow exception service can't process anything. I have logs full of memory overflow exception. It not self restarting, it not processing clients requests, it not exit from this state.

I just want to find a ways to exit from this state of the service, and if it can not restart it. If it possible to predict such state.

The first way is limit clients, but it not garanted that some client eat very much memory.

Is it posible to detect dangerous memory consumption and stop processing new clients, or correctly restart? Is it posible to selfrestart service if memory is over?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:51:27.057

内存溢出真的很难跟踪/处理。很可能您有某种内存泄漏。在 .NET 中创建内存泄漏仍然是可能的。您无法在编程级别上自己处理内存溢出，因为您在托管环境中工作，在该环境中，您可以通过垃圾收集来消除不再使用的资源。最好的办法是防止内存泄漏。如果您想在服务的内存消耗很高时重新启动服务，您需要使用某种管理包，例如 Microsoft SCOM，它是 Windows 的非常全面的工具。

检查这些线程也在 [C# 中的内存泄漏](https://stackoverflow.com/questions/620733/memory-leak-in-c-sharp)

[http://crazorsharp.blogspot.com/2009/03/net-memory-leaks-it-is-possible.html](http://crazorsharp.blogspot.com/2009/03/net-memory-leaks-it-is-possible.html)

我希望这会有所帮助

# css - CSS 不透明度 - 背景颜色

> ID：14984395
> 
> 赞同：8
> 
> 时间：2013-02-20T16:02:07.077
> 
> 标签：css, opacity

我试图让黑色 div 的不透明度为 0.5，但 div 的内容（h3 标签）为 opactiy 1。所以白色文本仍然是白色的，它的不透明度没有改变/不变。

```
<div style="background-color:red;">
<div style="width:470px;color:white;margin-top:170px;">
<div style="background-color:black;opacity:0.5;">
<h3 style="color:white;opacity:1;">Heading </h3><p>tagline here</p>
</div>
</div>
</div> 
```

[JSFiddle](http://jsfiddle.net/fpnxW/)

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T16:04:03.397

如果您不担心支持旧版本的 IE，则可以使用 rgba：

```
background-color: rgba(0, 0, 0, 0.5); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T16:04:09.023

使用`rgba`-[**演示**](http://jsfiddle.net/fpnxW/1/)

```
background-color: rgba(0, 0, 0, .5) 
```

（*并且不要使用内联 CSS*）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:06:31.810

不透明度适用于子元素。正如@MattCain 建议在 DIV 背景颜色上使用 RGBA 来解决这个问题。

```
<div style="background-color:red;">
<div style="width:470px;color:white;margin-top:170px;">
<div style="background-color: rgba(0, 0, 0, 0.5);">
<h3 style="color:white;opacity:1;">Heading </h3><p>tagline here</p>
</div>
</div>
</div> 
```

# vb.net - How to resolve SerializationException saying XElement is not serializable

> ID：14984396
> 
> 赞同：1
> 
> 时间：2013-02-20T16:02:15.583
> 
> 标签：vb.net, serialization

How do I resolve this error in VB,net

> system.runtime.serialization.serializationexception: Type 'system.xml.linq.xelement' in Assembly 'system.xml.linq, version=4.0.0.0, culture=neutral, publickey=b77a5c561934e089' is not marked as serializable

I create a Grid that inherits from DataGridView. Oone of the Grid's properties is:

```
Public Property RowsXMLRegister As List(Of XElement) 
    Get 
        Return m_AllRowsXMLRegister 
    End Get 
    Set(value As List(Of XElement)) 
        m_AllRowsXMLRegister = value 
    End Set End 
Property 
```

When I try placing the Grid on the form the error comes up.

# ios - 如何用公钥编码并用私钥解码？

> ID：14984398
> 
> 赞同：0
> 
> 时间：2013-02-20T16:02:27.340
> 
> 标签：ios, objective-c, rsa

我仍然没有简单的方法来做类似的事情：

```
NSString *stringForEncrypt = @"Some string";
NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];
NSData *encryptedData = [data encryptWithPublicKey:public_key];
//....
NSData *decryptedData = [encryptedData decryptWithPrivateKey:private_key];
NSString *decryptedString = [NSString alloc] initWithData:decryptedData encoding:NSUTF8StringEncoding];

BOOL isItWorks = [stringForEncrypt isEqualToString:decryptedString]; 
```

我可以只使用 Security.framework 来实现它吗？有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:41:02.910

我使用了[NSData+AESCrypt](https://stackoverflow.com/questions/10072124/iphone-how-to-encrypt-nsdata-with-private-key-and-decrypt-with-public-key/10073040#10073040)，这是[我的解决方案](https://github.com/kvint/ios-encryption)。

# python - SimpleHTTPServer 和 SocketServer

> ID：14984401
> 
> 赞同：3
> 
> 时间：2013-02-20T16:02:36.270
> 
> 标签：python, python-2.7, socketserver, simplehttpserver

我创建了一个“处理程序”python 脚本，如下所示：

```
import SimpleHTTPServer
import SocketServer

PORT = 8000
Handler = SimpleHTTPServer.SimpleHTTPRequestHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print "Serving at port:", PORT
httpd.serve_forever() 
```

我还有一个 javascript 函数，它通过 URL 请求向服务器发送信息。这一切都很好，当我运行我的处理程序脚本，然后我的 javascript 时，我可以在终端中看到来自 JS 的所有数据：

```
localhost.localadmin - - [20/Feb/2013] "GET /?var=data/ HTTP/1.1" 200 - 
```

我想做的是能够从我的处理程序脚本中访问这些数据，理想情况下是这样的：

```
data = httpd.server_forever()  #How do I do somethign like this 
```

我该如何完成这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:28:21.703

你可以这样继承`SimpleHTTPServer.SimpleHTTPRequestHandler`：

```
class MyHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
  def do_GET(self):
      # Your code here
      print "Client requested:", self.command, self.path

      SimpleHTTPServer.SimpleHTTPRequestHandler.do_GET(self)

PORT = 8000

httpd = SocketServer.TCPServer(("", PORT), MyHandler)

print "Serving at port:", PORT
httpd.serve_forever() 
```

这将在控制台中打印：

```
Client requested GET /?var=data/ 
```

查看有关[SimpleHTTPRequestHandler](http://docs.python.org/2/library/simplehttpserver.html#SimpleHTTPServer.SimpleHTTPRequestHandler)和[BaseHTTPRequestHandler](http://docs.python.org/2/library/basehttpserver.html#BaseHTTPServer.BaseHTTPRequestHandler)的文档以获取更多信息。

# c# - GetEvalStr 方法未实现 ServiceStack.Redis RedisClient

> ID：14984409
> 
> 赞同：3
> 
> 时间：2013-02-20T16:03:03.713
> 
> 标签：c#, redis, servicestack

我正在尝试`ServiceStack.Redis`连接到 Redis 的库，但由于某种原因，我无法创建`RedisClient`该类的实例，无论何时...

```
RedisClient redisClient = new RedisClient(); 
```

我得到...

```
Method 'GetEvalStr' in type 'ServiceStack.Redis.RedisClient' from assembly 'ServiceStack.Redis, Version=3.9.37.0, Culture=neutral, PublicKeyToken=null' does not have an implementation. 
```

最奇怪的部分是它阻止我调试包含该行的方法。即当我尝试调用包含它的方法时......

```
Cache.Get(key) 
```

我无法通过它。

有任何想法吗？

仅供参考，我使用的是 NuGet 上可用的最新版本（版本 3.9.37）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:57:44.570

您有一个脏 dll，您使用的旧版本与`ServiceStack.Redis.dll`v3.9.37 版本中的实现不匹配`ServiceStack.Interfaces.dll`。

首先确保您更新了所有 ServiceStack 的组件。如果这不起作用，请清除所有现有的 ServiceStack NuGet 包（即删除`/packages`文件夹和`packages.config`文件）并再次从 NuGet 重新安装它们。

# c# - Class conversion via Attributes

> ID：14984411
> 
> 赞同：0
> 
> 时间：2013-02-20T16:03:10.467
> 
> 标签：c#, wcf, dynamic, attributes, type-conversion

**Code**

```
public class Test1
{
    [Conversion("UserId")]
    Public int id { get; set; }

    [Conversion("UserValue")]
    public int value { get; set; }

    [Conversion("UserInfo")]
    public List<Test2> info { get; set; }
}
public class User
{
    public int UserId { get; set; }
    public int UserValue { get; set; }      
    public List<UserInformation> UserInfo { get; set; }
}

public class Test2
{
    [Conversion("UserId")]
    public int id { get; set; }

    [Conversion("UserName")]
    public string name { get; set; }

    [Conversion("UserLocation")]
    public string location { get; set; }
}

public class UserInformation
{
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string UserLocation { get; set; }
}

public class ConversionAttribute    
{
    public string Name { get; set; }
    public ConversionAttribute(string name)
    {
        this.Name = name;
    }
}

public dynamic Convert(dynamic source, Type result)
{
    var p = Activator.CreateInstance(result);
    foreach (var item in source.GetType().GetProperties().Where(m => m.GetCustomAttributes(typeof(ConversionAttribute)).Count() > 0))
    {
        p.GetType().GetProperty(item.GetCustomAttributes(typeof(ConversionAttribute)).Cast<ConversionAttribute>().Name).Value = item.GetValue(source,null); // This should work for system types... but not for lists / custom models.          
    }       
}

public void DoShit()
{
    var t1 = new Test1 { id = 1, name = value = "Test", info = new Test2 { id = 1, name = "MyName", location = "UserLocation" } };
    var obj = Convert(t1, typeof(User));
} 
```

**Situation**

I've been tasked to transform our database model to our WCF model. They are different in several ways which I've shown a little bit in the example code above.

I've managed to create instances using `Activator.CreateInstance(result)` and I can use `source.GetType().GetProperties()` to copy all the properties, but I seem to have a problem when it comes to a Model (custom class) or a list.

**Problem**

I have no idea how to handle custom classes or lists (both of system type aswell as custom classes).

In my old method I used two methods, one for a normal conversion and one for a list conversion.. but my boss didn't approve it so I'd like to know if it is possible to have one method for every use without checking wether the type is a list, a custom class or a system type

The main reason this has to be fully generic and by use of attributes is because we plan to use this method in several projects aswell as over more then 100 models.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:09:50.617

```
 Here is something that I tried. It works albeit it's a little slow on lager object graphs. One could use expression trees           which are harder to get but give a really impressive performance.

      'private static IEnumerable<Tuple<PropertyInfo, PropertyInfo>> MapProperties(Type source, Type target)
        {
            var targetProperies = target.GetProperties();

            foreach (var property in source.GetProperties())
            {
                var conversionAttribute =
                    property.GetCustomAttributes(typeof (ConvertAttribute), false).FirstOrDefault() as
                    ConvertAttribute;

                if (conversionAttribute == null)
                    throw new InvalidOperationException(
                        String.Format("Source property {0} doesn't have ConvertAttribute defined", property.Name));

                var targetProperty = targetProperies.FirstOrDefault(p => p.Name == conversionAttribute.Name);

                if (targetProperty == null)
                    throw new InvalidOperationException(String.Format(
                        "Target type doesn't have {0} public property", conversionAttribute.Name));

                yield return Tuple.Create(targetProperty, property);
            }
        }

        public static bool IsIList(Type type)
        {
            return type.GetInterface("System.Collections.Generic.IList`1") != null;
        }

        private static object Convert(object source, Type resaultType)
        {
            var resault = Activator.CreateInstance(resaultType);

            var sourceType = source.GetType();

            if (IsIList(resaultType) && IsIList(sourceType))
            {
                var sourceCollection = source as IList;

                var targetCollection = resault as IList;

                var argument = resaultType.GetGenericArguments()[0];

                if (argument.IsAssignableFrom(sourceType.GetGenericArguments()[0]))
                {
                    foreach (var item in sourceCollection)
                    {
                        targetCollection.Add(item);
                    }
                }
                else
                {
                    foreach (var item in sourceCollection)
                    {
                        targetCollection.Add(Convert(item, argument));
                    }
                }
            }
            else
            {
                foreach (var map in MapProperties(sourceType, resaultType))
                {
                    if (map.Item1.PropertyType.IsAssignableFrom(map.Item2.PropertyType))
                    {
                        map.Item1.SetValue(resault, map.Item2.GetValue(source, null), null);
                    }
                    else
                    {
                        map.Item1.SetValue(resault,
                                           Convert(map.Item2.GetValue(source, null), map.Item1.PropertyType), null);
                    }
                }
            }
            return resault;
        }' 
```

# c#-to-vb.net - Testing if an Object is Nothing/null in VB.NET vs C#

> ID：14984417
> 
> 赞同：2
> 
> 时间：2013-02-20T16:03:28.277
> 
> 标签：c#-to-vb.net

I'm converting some C# code to VB.NET. I have a simple dictionary-like data structure that contains name/value pairs. The value element is of type Object. My C# code looks like this

```
if(x.Value != null)
  // 1: Store x.Value in database
else
  // Sore DBNULL.Value in database 
```

As expected, if x.Value happens to be a boolean of value false, code block 1 above executes.

However, the equivalent VB.NET code will fall through to the else block on a Boolean of False

```
If x.Value Is Not Nothing Then
  ' Store x.Value in database
Else
  ' We land here if x.Value is a Boolean with a value of False and incorrectly store DBNULL.Value in database
EndIF 
```

VB apparently thinks a Boolean with a False value is equivalent to Nothing. I'll keep my comments about VB to myself, but is there a non-convoluted way, i.e. without using reflection, to work around this problem?

Edit: my original VB code was actually

```
If x.Value <> Nothing 
```

That worked as described.

```
If x.Value IsNot Nothing 
```

works correctly. Thanks Steve.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-17T16:03:29.770

您必须在 the和in`IsNot`之间使用没有空格。因此，您的代码将如下所示：`'Is'``'Not'``vb`

```
If x.Value IsNot Nothing Then  
   ...do Stuff...
Else 
   ...do else stuff...
End IF 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-16T19:55:39.187

使用 If x.Value Is DBNull.Value Then ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-13T21:29:48.760

这是 VB.Net 的正确匹配

`If Not IsNothing(x.Value) Then`

但是检查空值是不同的。

# java - Java reconnect after network interface change

> ID：14984419
> 
> 赞同：2
> 
> 时间：2013-02-20T16:03:35.607
> 
> 标签：java, apache, apache-httpclient-4.x, jdk1.6, sardine

I am writing a file synchronization client (in Java 1.6) that uses Sardine:

[https://code.google.com/p/sardine/](https://code.google.com/p/sardine/)

When Sardine loses connection to the server (ie. network outage or change from LAN to WiFi), I am unable to reconnect until I completely stop the client and start it back up again.

I've tried the following:

*   spamming the connection
*   re-creating the Sardine object dynamically
*   re-packaging Sardine source code with latest Apache HTTP libs

As far as I can tell the actual networking takes place within [AbstractHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/AbstractHttpClient.html), but I am not sure what to try next.

**Any suggestions on how I can make this thing re-connect dynamically regardless of the reason?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-22T16:56:12.937

您需要关闭沙丁鱼对象并创建另一个对象，例如：

```
Sardine sardine = SardineFactory.begin();

sardine.createDirectory(url);

if (sardine != null) {
    sardine.shutdown();
}

sardine = SardineFactory.begin();

// use again 
```

# c# - FileHelper 读取 csv 文件冻结

> ID：14984421
> 
> 赞同：0
> 
> 时间：2013-02-20T16:03:46.667
> 
> 标签：c#, csv, file-io, filehelpers

我正在尝试使用 FileHelper 读取一个 csv 文件，其中的数据排列如下：0,0,0,0,0,0,0,1,1,1,0,0,0,0,.. .... 1kX1k 他们。这是我的 FileHelper 代码：

```
[DelimitedRecord(",")] 
    public class ROIMaskCSV 
    { 
        public int value;

        //[TransformToRecord(typeof(ROIMaskCSV[]))]
        public static ROIMaskCSV[] loadMask(string fileName)
        {

            DelimitedFileEngine engine = new DelimitedFileEngine(typeof(ROIMaskCSV));

            ROIMaskCSV[] mask = (ROIMaskCSV[])engine.ReadFile(fileName); 

           // mask[0].value = this.value;

            return mask;
        }
    } 
```

这里是 FileHelper loadMask() 函数被调用的地方：

```
public class TIFFIImageIO
{
    public static int LoadTIFF(string fileName, int x, int y)
    {

        ROIMaskCSV[] mask = ROIMaskCSV.loadMask("d:\\myMask.csv");
        ...... 
```

我介入了，所以当程序得到：

```
 ROIMaskCSV[] mask = (ROIMaskCSV[])engine.ReadFile(fileName); 
```

该程序刚刚冻结。我不确定发生了什么。我做错了什么？任何人都可以提供一些指示吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:27:18.250

好的。我放弃。我只会流式读取文件，然后解析它。这是我阅读我的 csv 文件的代码：

```
byte[] array = System.IO.File.ReadAllBytes(fileName); 
```

然后将 array[i] 转换为 char/int 或任何你想要的类型。

以 char 为例，将 ASC II 65 转换为 'A'：

```
char.ConvertFromUtf32(65); 
```

以 int 为例，将 ASC II 48 转换为 0：

```
Convert.ToInt32(char.ConvertFromUtf32(48)); 
```

# google-chrome - Firefox/Chrome opening a file send dirrectly to printer

> ID：14984424
> 
> 赞同：1
> 
> 时间：2013-02-20T16:03:58.170
> 
> 标签：google-chrome, firefox, printing

Is it possible to make Firefox or Chrome browsers open print dialog box when opening a specific file (extension)? I have a system which I access using internet browser and it produces .ODT/.PDF reports which I'd like to send directly to a printer instead of Downloading/Opening/Printing steps. Unfortunately can't use any javascript on the server side (although client side scripting is possible). It's also possible to change file extension of those reports to anything I want.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T19:39:06.847

我对此进行了相当多的研究，似乎没有一种简单的方法可以做到这一点。

[NPAPI 插件](https://code.google.com/p/firebreath/)（例如使用“Firebreath”创建的插件）可以做到这一点，但需要针对它运行的每个平台进行编译（类似于将 Flash 作为浏览器插件加载）。你必须从头开始构建这个插件。让这个插件在 Google Play 商店中列出是 Chrome 用户安装它的唯一方法，这是 25 美元的注册费，以及谷歌的代码审查（因为它使用 NPAPI）。请注意，Firebreath 还创建了一个可在 Internet Explorer 中使用的 ActiveX 插件。

如果您愿意使用 Java，有一个名为“ [jZebra ”的项目，它从 Web 浏览器](https://code.google.com/p/jzebra/)[打印 PDF 的功能](https://code.google.com/p/jzebra/wiki/TutorialWebApplet#PDF_Printing)非常有限，但它需要加载 Java Applet。

-特雷斯

# variables - How to invoke a boolean variable from another method?

> ID：14984431
> 
> 赞同：0
> 
> 时间：2013-02-20T16:04:14.130
> 
> 标签：variables, methods, boolean

I have a boolean variable defined in "methodA" and i want to use it in another method "methodB" of the same class but i do get always an error.I cannot make it public static like the other variables.Any ideas how to do this correctly?

# magento - Magento：如何在观察者的管理员中从现有表单中获取 magento 字段集

> ID：14984432
> 
> 赞同：5
> 
> 时间：2013-02-20T16:04:15.927
> 
> 标签：magento, magento-1.7

尝试在观察者的现有管理表单中获取字段集时遇到问题。我得到了表单，但是当我尝试获取字段集时，我得到了很好的错误：致命错误：调用非对象上的成员函数 addField() 当我直接添加这个新字段以形成一切都很好，除了它在字段集之外。

```
$form = $observer->getBlock()->getForm();
$fieldset = $form->getFieldset('fieldset_id');
$fieldset->addField('some_field', 'text', array(
    'name' => 'some_field',
    'label' => Mage::helper('cms')->__('Some Field'),
    'title' => Mage::helper('cms')->__('Some Field')
  )
); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T18:28:06.423

好的，我做到了。这是我的错。我选择了错误的块类型。这是代码：

```
public function onAdminhtmlBlockHtmlBefore(Varien_Event_Observer $observer)
{
    $block = $observer->getBlock();
    if (!isset($block)) return;

    switch ($block->getType()) {
    case 'adminhtml/some_edit_tab_main':
    $form = $block->getForm();
        $fieldset = $form->getElement('base_fieldset');
        $fieldset->addField('some_field', 'text', array(
                'name' => 'some_field',
                'label' => Mage::helper('cms')->__('Some Field'),
                'title' => Mage::helper('cms')->__('Some Field')
            )
        );
        break;
    }
} 
```

# matlab - 如何在 Matlab 中使用带有 Core i3 的 PARFOR 并行 4

> ID：14984434
> 
> 赞同：7
> 
> 时间：2013-02-20T16:04:19.263
> 
> 标签：matlab, parallel-processing, intel, parfor

我有适用于 Ubuntu 64 位的 Matlab R2012b。我有一个 Intel Core i3 CPU M 330 @ 2.13GHz × 4。

我想使用**parfor**同时并行化 4 个循环。因为英特尔酷睿 i3 有 2 个内核和 4 个线程，所以我使用以下代码：

```
if matlabpool('size') == 0 % checking to see if my pool is already open
    matlabpool(4)
else
    matlabpool close
    matlabpool(4)
end 
```

我得到以下错误：

**错误：**

> 您要求至少 4 个工作人员，但集群“本地”的 NumWorkers 属性设置为最多允许 2 个工作人员。要在比这更多的工作人员（本地集群最多 12 个）上运行通信作业，请增加集群的 NumWorkers 属性的值。本地集群的 NumWorkers 的默认值是本地机器上的核心数。

为什么？我机器中 NumWorkers 的默认值为 2，但如果我可以同时进行 4 个循环，我该如何获得呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T16:21:05.197

要增加默认值`NumWorkers`，请打开集群配置文件管理器（Parallel->Manage Cluster Profiles）。选择`local`配置文件，单击编辑，然后增加到`NumWorkers`最大可能值（在您的情况下为 4）。现在可以`matlabpool`在您的机器上创建一个具有比物理内核更多的工作人员。

但是，请注意，与使用相同数量的工作人员作为核心相比，使用比核心更多的工作人员可能会导致性能下降。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-12T23:21:13.163

要以编程方式将集群配置文件的值`NumWorkers`从 2 更改为 4 ，您可以[使用](http://www.mathworks.com/help/distcomp/saveprofile.html)：`local`

```
myCluster = parcluster('local');
myCluster.NumWorkers = 4;  % 'Modified' property now TRUE
saveProfile(myCluster);    % 'local' profile now updated,
                           % 'Modified' property now FALSE 
```

# xcode - 如何在 xcode 中将 JSON 数据转换为数组

> ID：14984438
> 
> 赞同：0
> 
> 时间：2013-02-20T16:04:23.833
> 
> 标签：xcode, json

我对 iOS 开发相当陌生，我一直在试图弄清楚如何将以下字符串转换为数组，然后在 UITableView 中显示该数组

```
{"Result":"OK","Users":[{"name":"The King","email":"king@gmail.com"},{"name":"The Resteruant","email":"theresturaunt@gmail.com"}]} 
```

我想得到的是“名称”的数组和“电子邮件”的单独数组

这是我到目前为止所拥有的：

```
 strURL    = [NSString stringWithFormat:@"http://10.139.10.43/Wolfeboro_Connection/get_business.php"];
    dataURL   = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];
    strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strResult); 
```

我已经安装了一个 JSON 库，但我不知道如何使用它以及如何获取数组。请帮忙举个例子。

编辑：找到了一个很好的教程来帮助我解决这个问题

[http://www.youtube.com/watch?v=RJZcD3hfs3k](http://www.youtube.com/watch?v=RJZcD3hfs3k)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:10:47.277

这可能会帮助你。“你这里有一个包含键/值的字典，其中值也是字典。如果你需要一个包含每个字典的数组，比如 value_b，你可以像这样拥有它”

[将 JSON 数据保存在 NSArray 中](https://stackoverflow.com/a/9869542/2024168)

# spring-integration - ExpressionEvaluatingRequestHandlerAdvice 与 groovy

> ID：14984441
> 
> 赞同：1
> 
> 时间：2013-02-20T16:04:38.653
> 
> 标签：spring-integration

是否可以将 spring 集成 groovy 脚本链接到 ExpressionEvaluatingRequestHandlerAdvice bean 上的成功/失败结果？目前我有这个配置删除有效载荷

```
<beans:bean class="org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice">
    <beans:property name="onSuccessExpression" value="new File(payload).delete()"/>
    <beans:property name="successChannel" ref="successChannel" />
    <beans:property name="onFailureExpression" value="new File(payload).delete()"/>
    <beans:property name="failureChannel" ref="failureChannel" />
</beans:bean> 
```

但我想使用各种 Header 详细信息运行一些操作来删除有效负载并重命名和更改文件权限。groovy 脚本可能看起来像

```
 <int-groovy:script>
    <![CDATA[
    def encryptedFile = new File(payload);
        encryptedFile.delete();
        def file = new File(headers['ORIGINAL_FILE']);
        def successFolder = new File(file.getParent(),'success');
        return file.renameTo(new File(successFolder, file.getName()));
        ]]>
    </int-groovy:script>
</int:transformer> 
```

但我不确定如何将此配置链接到“successChannel”。

编辑

好的，我将两个表达式连接起来以传递原始消息，并将常规逻辑链接到转换器

```
<!-- handle ftp outcome -->
        <beans:bean class="org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice">
            <beans:property name="onSuccessExpression" value="payload"/>
            <beans:property name="successChannel" ref="successChannel"/>
            <beans:property name="onFailureExpression" value="payload"/>
            <beans:property name="failureChannel" ref="failureChannel"/>
        </beans:bean>
    </int-ftp:request-handler-advice-chain>
</int-ftp:outbound-channel-adapter>

<int:transformer input-channel="successChannel" output-channel="outputB">
    <int-groovy:script>
    <![CDATA[
        def encryptedFile = new File(payload);
        encryptedFile.delete();
        def file = new File(headers['ORIGINAL_FILE']);
        def successFolder = new File(file.getParent(),'success');
        return file.renameTo(new File(successFolder, file.getName()));
        ]]>
    </int-groovy:script>
</int:transformer> 
```

但是如果我使用'payload'或'#root'会得到这个异常

```
Caused by: org.springframework.integration.MessageHandlingException: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: java.io.File(org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException)
    at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:76)
    at org.springframework.integration.transformer.AbstractMessageProcessingTransformer.transform(AbstractMessageProcessingTransformer.java:56)
    at org.springframework.integration.transformer.MessageTransformingHandler.handleRequestMessage(MessageTransformingHandler.java:67)
    ... 56 more
Caused by: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: java.io.File(org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException)
    at groovy.lang.MetaClassImpl.invokeConstructor(MetaClassImpl.java:1459)
    at groovy.lang.MetaClassImpl.invokeConstructor(MetaClassImpl.java:1375)
    at org.codehaus.groovy.runtime.callsite.MetaClassConstructorSite.callConstructor(MetaClassConstructorSite.java:46)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callConstructor(AbstractCallSite.java:190)
    at groovy.lang.run(groovy.lang.Script:3)
    at org.springframework.scripting.groovy.GroovyScriptFactory.executeScript(GroovyScriptFactory.java:247)
    at org.springframework.scripting.groovy.GroovyScriptFactory.getScriptedObject(GroovyScriptFactory.java:185)
    at org.springframework.integration.groovy.GroovyScriptExecutingMessageProcessor.executeScript(GroovyScriptExecutingMessageProcessor.java:88)
    at org.springframework.integration.scripting.AbstractScriptExecutingMessageProcessor.processMessage(AbstractScriptExecutingMessageProcessor.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:69)
    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:84)
    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)
    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:102)
    at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:126)
    at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:227)
    at org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:127)
    at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:73)
    ... 58 more 
```

这似乎表明正在传递“ExpressionEvaluatingRequestHandlerAdvice”bean 引用而不是文件名？

编辑-第 2 天

因此，我根据 Gary 的评论更新了示例，并将“inputMessage.payload”用于成功通道，“payload.failedMessage”用于失败通道。配置看起来像这样

```
<int-ftp:outbound-channel-adapter 
    id="ftpOutbound" 
    channel="inputB"        
    cache-sessions="false"
    remote-directory="/"
    session-factory="ftpClientFactory">
    <int-ftp:request-handler-advice-chain>
        <!-- handle three retry attempts -->
        <beans:bean class="org.springframework.integration.handler.advice.RequestHandlerRetryAdvice">
            <beans:property name="retryTemplate">
                <beans:bean class="org.springframework.retry.support.RetryTemplate">
                    <beans:property name="backOffPolicy">
                        <beans:bean class="org.springframework.retry.backoff.ExponentialBackOffPolicy">
                            <beans:property name="initialInterval" value="5000" />
                            <beans:property name="multiplier" value="3" />
                        </beans:bean>
                    </beans:property>
                </beans:bean>
            </beans:property>
        </beans:bean>
        <!-- handle ftp outcome -->
        <beans:bean class="org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice">
            <beans:property name="onSuccessExpression" value="payload"/>
            <beans:property name="successChannel" ref="successChannel"/>
            <beans:property name="onFailureExpression" value="payload"/>
            <beans:property name="failureChannel" ref="failureChannel"/>
        </beans:bean>
    </int-ftp:request-handler-advice-chain>
</int-ftp:outbound-channel-adapter>

<int:transformer input-channel="successChannel" output-channel="outputB">
    <int-groovy:script>
    <![CDATA[
        println('successChannel');
        def file = new File(inputMessage.headers['ORIGINAL_FILE']);
        def successFolder = new File(file.getParent(),'success');
        file.renameTo(new File(successFolder, file.getName()));

        def encryptedFile = inputMessage.payload;
        encryptedFile.delete();
        ]]>
    </int-groovy:script>
</int:transformer>

<int:transformer input-channel="failureChannel" output-channel="outputB">
    <int-groovy:script>
    <![CDATA[
        println('failChannel');
        def file = new File(payload.failedMessage.headers['ORIGINAL_FILE']);
        def failedFolder = new File(file.getParent(),'failed');
        file.renameTo(new File(failedFolder, file.getName()));

        def encryptedFile = payload.failedMessage.payload;
        encryptedFile.delete();
        ]]>
    </int-groovy:script>
</int:transformer> 
```

但似乎通知处理程序被调用了三次，而不是在第一次成功的 FTP 传输后停止。我的“onSucessExpression”逻辑不正确吗？

```
2013-02-21 10:40:39,588 INFO  [org.springframework.integration.ftp.session.FtpSession] (main) File has been successfully transfered to: /SEPA.enc.writing
2013-02-21 10:40:39,591 INFO  [org.springframework.integration.ftp.session.FtpSession] (main) File has been successfully renamed from: /SEPA.enc.writing to /SEPA.enc
2013-02-21 10:40:39,591 DEBUG [org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice] (main) Unable to attempt conversion of Message payload types. Component 'org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice#2e1551b0' has no explicit ConversionService reference, and there is no 'integrationConversionService' bean within the context.
2013-02-21 10:40:39,594 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'successChannel', message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443239593, id=3adf23f7-c428-485a-9da5-839923a915fd}]
2013-02-21 10:40:39,594 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@7219d6af received message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443239593, id=3adf23f7-c428-485a-9da5-839923a915fd}]
successChannel
2013-02-21 10:40:40,164 DEBUG [org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice] (main) Unable to attempt conversion of Message payload types. Component 'org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice#2e1551b0' has no explicit ConversionService reference, and there is no 'integrationConversionService' bean within the context.
2013-02-21 10:40:40,165 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'failureChannel', message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443240165, id=596c3a78-493b-45bf-b9ca-c56dab15e318}]
2013-02-21 10:40:40,165 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@4c4b11e9 received message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443240165, id=596c3a78-493b-45bf-b9ca-c56dab15e318}]
failChannel
2013-02-21 10:40:45,218 DEBUG [org.springframework.integration.file.remote.handler.FileTransferringMessageHandler] (main) org.springframework.integration.file.remote.handler.FileTransferringMessageHandler#0 received message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443239551, id=73da6c1f-8658-4397-ab57-ea7591e284da, ORIGINAL_FILE=C:\projects\spring-integration\src\test\resources\citi\SEPA.xml}]
2013-02-21 10:40:45,218 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'successChannel', message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443245218, id=96c0ed36-0eb9-4bab-abff-84d63ff91d80}]
2013-02-21 10:40:45,218 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@7219d6af received message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443245218, id=96c0ed36-0eb9-4bab-abff-84d63ff91d80}]
successChannel
2013-02-21 10:40:45,220 DEBUG [org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice] (main) Unable to attempt conversion of Message payload types. Component 'org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice#2e1551b0' has no explicit ConversionService reference, and there is no 'integrationConversionService' bean within the context.
2013-02-21 10:40:45,220 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'failureChannel', message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443245220, id=a63c7877-29f6-46b2-96fc-35ad84589a82}]
2013-02-21 10:40:45,220 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@4c4b11e9 received message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443245220, id=a63c7877-29f6-46b2-96fc-35ad84589a82}]
failChannel
2013-02-21 10:41:00,227 DEBUG [org.springframework.integration.file.remote.handler.FileTransferringMessageHandler] (main) org.springframework.integration.file.remote.handler.FileTransferringMessageHandler#0 received message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443239551, id=73da6c1f-8658-4397-ab57-ea7591e284da, ORIGINAL_FILE=C:\projects\spring-integration\src\test\resources\citi\SEPA.xml}]
2013-02-21 10:41:00,227 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'successChannel', message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443260227, id=e16fb6be-e2c6-4c6e-bc99-e2e4fda9f735}]
2013-02-21 10:41:00,227 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@7219d6af received message: [Payload=C:\projects\spring-integration\src\test\resources\citi\SEPA.enc][Headers={timestamp=1361443260227, id=e16fb6be-e2c6-4c6e-bc99-e2e4fda9f735}]
successChannel
2013-02-21 10:41:00,229 DEBUG [org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice] (main) Unable to attempt conversion of Message payload types. Component 'org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice#2e1551b0' has no explicit ConversionService reference, and there is no 'integrationConversionService' bean within the context.
2013-02-21 10:41:00,229 DEBUG [org.springframework.integration.channel.DirectChannel] (main) preSend on channel 'failureChannel', message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443260229, id=187a95ad-ffdd-4151-9e02-e94e684f6dec}]
2013-02-21 10:41:00,229 DEBUG [org.springframework.integration.transformer.MessageTransformingHandler] (main) org.springframework.integration.transformer.MessageTransformingHandler@4c4b11e9 received message: [Payload=org.springframework.integration.handler.advice.ExpressionEvaluatingRequestHandlerAdvice$MessageHandlingExpressionEvaluatingAdviceException: Handler Failed][Headers={timestamp=1361443260229, id=187a95ad-ffdd-4151-9e02-e94e684f6dec}]
failChannel
2013-02-21 10:41:00,242 INFO  [org.springframework.integration.endpoint.EventDrivenConsumer] (Thread-1) Removing {transformer} as a subscriber to the 'inputA' channel 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:37:48.730

在 上发送的消息`onSuccessChannel`是一个`AdviceMessage`包含 中的表达式评估结果`payload`和 中的入站消息`inputMessage`。

只需`"'foo'"`用作`onSuccessExpression`.

然后订阅你`<transformer/>`的`successChannel`。

您可以使用`payload.inputMessage`来获取对消息的引用。

或者，`"#root"`用作表达式，原始消息将在`payload`（以及`inputMessage`）中。

编辑：

上的消息`failureChannel`是`ErrorMessage`带有 的`MessageHandlingExpressionEvaluatingAdviceException payload`。此异常具有 3 个属性`failedMessage`、`cause`和`evalResult`。

请注意，在您的“成功”转换器中，这将不起作用...

`def file = new File(headers['ORIGINAL_FILE']);`

因为`headers`指的是`AdviceMessage`标题；你需要`inputMessage.headers[...`.

在故障变压器上，您需要`payload.failedMessage.headers[...`.

# iphone - iOS 重叠视图和 UIGestureRecognizer

> ID：14984450
> 
> 赞同：2
> 
> 时间：2013-02-20T16:05:22.973
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

我有这样的`UIButton`内部视图：[快照 01 http://imageshack.us/a/img827/7240/screenshot20130220at333.png](http://imageshack.us/a/img827/7240/screenshot20130220at333.png)

该按钮绑定到`IBAction`：

```
-(IBAction)deleteButtonPressed :(id)sender{
    NSLog(@"DeleteButtonPressed");
} 
```

我还有另一个视图显示了最后一个视图的集合：[![快照 02](../Images/a0ed0b7294294be3b4a7a83f95b42c3b.png)](https://i.stack.imgur.com/Mcwym.png)

在这个视图的控制器中，在某些时候我有这个：

```
 UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction:)];
    tapGesture.numberOfTapsRequired = 1;
    tapGesture.numberOfTouchesRequired = 1;
    [preview addGestureRecognizer:tapGesture]; 
```

还有这个：

```
- (void)tapAction:(UIGestureRecognizer *)gestureRecognizer{

    EditorViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"EditorViewController"];
    vc.narration = preview.narration;
    self.navigationItem.backBarButtonItem.style = UIBarButtonItemStylePlain;
    self.navigationItem.backBarButtonItem.title = @"Done";
    vc.navigationItem.backBarButtonItem.style = UIBarButtonItemStylePlain;
    vc.navigationItem.backBarButtonItem.title = @"Done";
    [self.navigationController pushViewController:vc animated:YES];
} 
```

因此，当我在预览中触摸时，我会加载另一个视图。当我点击按钮时，我的问题就来了。在这种情况下，函数`-(IBAction)deleteButtonPressed: (id)sender`不会被执行，但会执行`tapAction`。此外，按下时按钮会发生变化。我试图不添加 GestureRecognizer 然后`-(IBAction)deleteButtonPressed :(id)sender`被执行。

我做错了什么？当点击按钮时，如何实现这一点，下面的视图不会捕获手势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:22:14.817

您需要实现该`shouldReceiveTouch`方法（这是`UIGestureRecognizerDelegate`协议的一部分）。

有关您的问题的更多信息：

[手势识别器和按钮操作](https://stackoverflow.com/questions/4825199/gesture-recognizer-and-button-actions)

# excel - 我想在 excel 中返 回星期五的日期（包括这个日期）

> ID：14984453
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:05:27.713
> 
> 标签：excel, formula

我想要一个 Excel 公式从今天开始返回去年的星期五日期。我想在一个列中包含这个星期五以及遵循默认格式 22/02/2013。（总共 53 个值）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:18:36.387

假设您希望数据从单元格 A1 开始。您可以将以下公式放入 A1：

```
=TODAY()+6-WEEKDAY(TODAY()) 
```

然后在 A2 中，您可以输入：

```
=A1-7 
```

然后将 A2 中的公式向下拖动以获得所需的行数。

希望这能解决问题。

# ruby - 使用 sidekiq 创建活动记录对象

> ID：14984454
> 
> 赞同：0
> 
> 时间：2013-02-20T16:05:28.897
> 
> 标签：ruby, ruby-on-rails-3, redis, sidekiq

我想用 sidekiq 创建活动记录对象。我知道这不是最佳实践，因为我必须序列化整个对象，但在这种情况下没有其他选择。

如果我尝试一下，我会得到：

```
 EventTrackingWorker JID-ec2be02dae626dd19202b17f INFO: start
  EventTrackingWorker JID-ec2be02dae626dd19202b17f INFO: fail: 0.033 sec
  WARN: {"retry"=>false, "queue"=>"default", "class"=>"EventTrackingWorker", "args"=>["shift_created_event", {... long json object ..}}, "create"], "jid"=>"ec2be02dae626dd19202b17f"}
  WARN: undefined method `primary_key' for Hash:Class
  WARN: /Users/jedi/.rbenv/versions/1.9.3-p194-perf/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/reflection.rb:366:in `primary_key'
  /Users/jedi/.rbenv/versions/1.9.3-p194-perf/lib/ruby/gems/1.9.1/gems/activerecord-3.2.11/lib/active_record/reflection.rb:216:in `association_primary_key' 
```

错误说：**WARN: undefined method `primary_key' for Hash:Class**

使用此方法创建的对象（在本例中为事件）：

```
Track(:shift_created_event, {eventable: @shift, creator: current_user}) 
```

**Track**方法如下所示：

```
module EventTracking
  module_function

  def Track(event, options, method=:create)
    EventTrackingWorker.perform_async(event, options, method)
  end

end 
```

`EventTrackingWorker`班级：

```
class EventTrackingWorker
  include Sidekiq::Worker

  def perform(event, options, method=:create)
    event.to_s.classify.constantize.new(options).send(method)
  end

end 
```

注意：`event.to_s.classify.constantize.new(options).send(method)`将字符串转换`shift_created_event`为活动记录类并使用选项`ShiftCreatedEvent`调用。`new`之后我用`.send(method)`

有人有这方面的经验吗？

# php - PHP从数据库中挑选时间间隔？

> ID：14984458
> 
> 赞同：1
> 
> 时间：2013-02-20T16:05:32.670
> 
> 标签：php, sql, date

我有一个数据库，其中有一列充满时间戳，我让它返回 php 中的所有值，同时使用下面的代码将它们转换为正常时间格式（12:00:01），但看到我想把它们放到一个graph 我需要一种方法来严格限制它们（目前为 23,922 行）。我正在考虑以 10-15 分钟的间隔使用这些值，但找不到这样做的方法。有人有什么建议吗？干杯，约翰。

```
while($info = mysql_fetch_array( $query )) 
{ 
   echo date("H:i:s", $info['timestamp']);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:12:19.613

如果您的“时间戳”是实际时间戳（列类型时间戳），您可以使用简单的 > 或 < 运算符来过滤结果，例如： where timestamp > "2013-02-20 16:10:00"

如果它们是整数或字符串，您可以使用 FROM_UNIXTIME() 或其他可能与您的数据匹配的函数（假设您的数据库是 MySQL，请参阅[https://dev.mysql.com/doc/refman/5.5/en/date-and-time -functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html) )

即使将数据保存为 varchar MySQL DB 对某些数学运算也足够智能，但它的效率不如使用正确的类型保存它们，但它可以工作：

```
SELECT `timestamp`
  FROM yourtable
  WHERE `timestamp` >= ( 
    SELECT MAX( `timestamp` ) max
      FROM  yourtable
  ) - ( 60 *15 ) -- 15 minutes 
```

# eclipse - 在 Eclipse / Zend Studio 中使用 Shift+Tab 突出显示

> ID：14984460
> 
> 赞同：3
> 
> 时间：2013-02-20T16:05:37.743
> 
> 标签：eclipse, tabs, space, zend-studio, shortcuts

我正在使用 Zend Studio 9 并且遇到了 outdent (Shift+Tab) 的问题。仅当行首的左侧是一个制表符时，它才有效：

```
[tab]return array(); 
```

但不适用于空间：

```
[space][space][space][space]return array(); 
```

有人有解决此问题的 ZS 9 解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-09T09:07:12.730

尝试[将 Zend Studio 选项卡策略更改为空格](http://www.phpepe.com/2013/12/zend-studio-insert-spaces-for-tabs.html)

窗口 -> 首选项 -> PHP -> 代码样式 -> 格式化程序

![在此处输入图像描述](../Images/f0bf922ce4b2c637f6997cfc29bf64be.png)

![在此处输入图像描述](../Images/59eee9b95237596b3dc06ff2f3e08d9d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:29:42.183

您必须在线进行选择，然后它应该可以工作。如果选择在多行上，它也可以工作。

# jsp - 优化包含 JSP 标签的 RequireJS 模块

> ID：14984470
> 
> 赞同：1
> 
> 时间：2013-02-20T16:06:08.220
> 
> 标签：jsp, optimization, requirejs, cdn

我们有一个大型遗留站点，我们希望将其迁移到单页应用程序： - RequireJS 模型 - 主干视图、模型、路由器/Underscore/Underscore 模板/RESTful API 单页应用程序（流行语结束）。

我们的旧站点具有以下功能：

*   带有管理器/DAO 的 Java 后端
*   JSP 模板
*   用于获取图像和脚本的 CDN

我们的旧站点使用 JSP 模板，我们对此有几个问题：

*   我们使用 JSP 标签插入来自 Java 资源包（属性文件）的翻译文本
*   我们使用 JSP 标签插入 CDN 图片 URL：
    *   随机 CDN 主机名
    *   该特定映像的唯一版本号（可以更改为构建/发布号）

我们真的很想使用 CDN 来提供 JavaScript 模块、Underscore 模板和图像。我们还真的想使用 RequireJS 优化器，这样客户端就不会向我们的服务器发送请求，但是当它尝试解析 JSP 标签时优化器会失败：

意外的令牌 <

所以我们想摆脱 JavaScript 模块和 Underscore 模板中的所有 i18n/CDN JSP 标签。

我认为我们可以使用 RequireJS i18n 功能解决 i18n 问题，或者编写我们自己的 Javascript i18n 解决方案，但如果有一些最佳实践，我希望能提供一些输入。

CDN 问题有点棘手，我们希望保留主机名和版本功能。我们也可以为此编写一个 JavaScript 解决方案，但它会有点混乱。有没有人对此有很好的解决方案？:-D

干杯!

# c# - 带有页面的asp.net mvc搜索不起作用？

> ID：14984474
> 
> 赞同：0
> 
> 时间：2013-02-20T16:06:23.173
> 
> 标签：c#, html

我正在尝试通过搜索和分页来查看视图，但是当搜索正常但是当我单击下一页链接时没有显示任何内容

```
[HttpGet]
public ActionResult Browse()
{
   return View();     
}

[HttpPost]
public ActionResult Browse(FormCollection formContent ,int? page)
{
     string cartype = !String.IsNullOrEmpty(formContent["Cartype"]) ? formContent  "Cartype"] : "";
     string SearchBox = !String.IsNullOrEmpty(formContent["searchbox"]) ? formContent["searchbox"] : "";
     DateTime toDate = !String.IsNullOrEmpty(formContent["toDate"]) ? DateTime.Parse(formContent["toDate"]) : DateTime.MaxValue;
     string Sort = formContent["sort"];

     mvc4advertismentEntities2 db = new mvc4advertismentEntities2();
     var result = AdvertFunObj.GetAdverts();

     switch (Sort)
     {
         case "":
             result = db.Mercedes.Where(m => m.CarType == cartype).ToList();
             break;
         case "price":
             result = db.Mercedes.Where(m => m.CarType == cartype).OrderByDescending(m =>      m.Price).ToList();
             break;
         case "date":
             result = db.Mercedes.Where(m => m.CarType == cartype).OrderByDescending(m => m.ExpirationDate).ToList();
             break;
         case "enginecapaity": result = db.Mercedes.Where(m => m.CarType == cartype).OrderByDescending(m => m.EngineCapacity).ToList();
             break;
     }

     int pageSize = 6;
     int pageNumber = (page ?? 1);
     return View(result.ToPagedList(pageNumber, pageSize));
 } 
```

风景

```
 <table  class="advertbrowsediv " id="searcht" width="100%"><tr><td style="width: 42%">   فئة السياره    :
      <br />
                   <%: Html.DropDownList("Cartype", new SelectListItem [] {
                  new SelectListItem(){Text="مرسيدس",Value="مرسيدس", Selected=true},
               new SelectListItem(){Text="ميتسوبيشي",Value="ميتسوبيشي"},
      }) %>  
</td>

<td >ترتيب حسب : 
<br />
    <%: Html.DropDownList("sort", new SelectListItem [] {
             new SelectListItem(){Text="",Value="", Selected=true},
            new SelectListItem(){Text="التاريخ",Value="date"},
            new SelectListItem(){Text="السعر",Value="price"},
            new SelectListItem(){Text="سعة المحرك",Value="enginecapaity"},

},
</td><td><br /><input style=" float:right" type="submit" value="بحث>

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:15:50.517

代码不清楚，无论如何，如果您单击下一页链接，您正在执行获取，而不是发布。因此，您应该在 get 方法中添加逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:37:33.240

当您进行搜索时，您使用的是 HttpPost 方法，并且您的方法“Browse”在搜索和分页发生的地方执行。

当您点击下一页时，您将收到 HttpGet 请求（我想），并且您在“浏览（httpPost）中所做的任何事情都不会发生。

进入新页面需要您保留搜索条件、页码，并且在该方法中您需要再次获取数据集并进行分页。您可以将它们作为查询参数传递。

您拥有的另一个选项是使您的下一页请求成为 HTTPPost 请求并使其执行“浏览”（httpPost）

Fiddler 是您的朋友[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/) 运行它，您将看到发送到服务器的具体内容、使用的动词等。

我希望这会有所帮助。

# networking - 通过公网IP访问计算机

> ID：14984475
> 
> 赞同：0
> 
> 时间：2013-02-20T16:06:27.347
> 
> 标签：networking, amazon-web-services, ip, nat

一个理论问题：

如果我在亚马逊 EC2 中有一个云帐户（或根本没有......）并且我通过其公共 IP 而不是其私有 IP 从另一个实例访问一个实例，它会有所作为吗？路由器/交换机会知道它们在同一个网络中，还是信息会再次进入外部和内部？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:12:02.437

如果您通过公共 DNS 连接。EC2 自动将其解析为 ec2 内部的内部 IP 和 ec2 外部的外部 IP。公共 DNS 的形式遵循包含公共 IP 的简单模式。

# java - java中linux pc上文件的访问权限，组和用户

> ID：14984476
> 
> 赞同：0
> 
> 时间：2013-02-20T16:06:28.147
> 
> 标签：java

如何在java中获取和创建Linux pc上文件的访问权限、组和用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:42:30.857

```
package Test.Dir.Onlinux;

import java.io.BufferedReader;  
import java.io.IOException;  
import java.io.InputStream;  
import java.io.InputStreamReader;  
import ch.ethz.ssh2.Connection;  
import ch.ethz.ssh2.Session;  
import ch.ethz.ssh2.StreamGobbler;  
import java.lang.System;

public class TestDirOnLinux {

    public static void main(String[] args) {

        String linuxCommands[] = { "stat -c %U ", "stat -c %G ", "stat -c %A ", "stat -c %a " };
        String fileName = "/home/zmt/UberSVN";
        excuteLinuxCommand("192.168.0.26", "root", "ace@dir", linuxCommands[0] + fileName);
        excuteLinuxCommand("192.168.0.26", "root", "ace@dir", linuxCommands[1] + fileName);
        excuteLinuxCommand("192.168.0.26", "root", "ace@dir", linuxCommands[2] + fileName);
        excuteLinuxCommand("192.168.0.26", "root", "ace@dir", linuxCommands[3] + fileName);
    }

    public static void excuteLinuxCommand(String ipAddress, String userName, String password, String linuxCommands) {

        boolean isAuthenticated = false;

        try {
            // Connection conn = new Connection(hostname);
            Connection conn = new Connection(ipAddress);
            conn.connect();
            // isAuthenticated = conn.authenticateWithPassword(username,
            // password);
            isAuthenticated = conn.authenticateWithPassword(userName, password);

            if (isAuthenticated == false)
                throw new IOException("Authentication failed.");

            Session sess = conn.openSession();

            // sess.execCommand("shutdown -h now");
            sess.execCommand(linuxCommands);

            InputStream stdout = new StreamGobbler(sess.getStdout());
            InputStream stderr = new StreamGobbler(sess.getStderr());

            InputStreamReader insrout = new InputStreamReader(stdout);
            InputStreamReader insrerr = new InputStreamReader(stderr);

            BufferedReader stdoutReader = new BufferedReader(insrout);
            BufferedReader stderrReader = new BufferedReader(insrerr);

            while (true) {
                String line = stdoutReader.readLine();`enter code here`
                if (line == null) {
                    break;
                }
                System.out.println(line);
            }

            while (true) {
                String line = stderrReader.readLine();
                if (line == null) {
                    break;
                }
                System.out.println(line);
            }

            sess.close();

            conn.close();

        } catch (IOException e) {
            e.printStackTrace(System.err);
            System.exit(2);
        }
    }
}

    enter code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:15:57.587

如果您使用的是 Java 7，则应该能够使用[POSIX 功能](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)来执行此操作。具体来说，该`getPosixFilePermissions`方法应该是您正在寻找的。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)。

# java - PermGen 设置未生效

> ID：14984477
> 
> 赞同：2
> 
> 时间：2013-02-20T16:06:30.790
> 
> 标签：java, maven, permgen

我正在尝试增加我的应用程序必须避免一些 PermGen 错误的 PermGen 空间量。

我尝试将 JAVA_OPTS 和 MAVEN_OPTS 导出为

```
-Xms1024m -Xmx2048m -XX:PermSize=1024m -XX:MaxPermSize=2048m -XX:+CMSClassUnloadingEnabled  -XX:+CMSPermGenSweepingEnabled 
```

但是 jconsole 仍然显示“CMS Perm Gen”最大值为：

```
Max: 83,968 kbytes 
```

并且应用程序在遇到此问题时仍然会用完 PermGen 空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:48:35.880

您是否尝试将这些选项添加到您的 pom - 在surefire插件配置下，因为您必须明确告诉surefire这些选项

```
<argLine>-Xms1024m -Xmx2048m -XX:PermSize=1024m -XX:MaxPermSize=2048m -XX:+CMSClassUnloadingEnabled</argLine> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:19:44.547

根据您的评论，您正在启动诸如货物插件之类的东西。您需要查看 cargo 插件配置以传递额外的 VM args，或直接在启动 tomcat 的脚本中。

当使用 maven-exec-plugin 和目标 java 时，JAVA_OPTS 应用于启动的应用程序

# c# - 在 Task.Factory.StartNew 中运行的 GetResponse

> ID：14984480
> 
> 赞同：4
> 
> 时间：2013-02-20T16:06:40.527
> 
> 标签：c#, .net, mono, xamarin.android

我想要一个在后台线程中运行的 webrequest，然后在 UI 线程中处理回调。这是我的代码：

```
Task.Factory.StartNew(() =>
    {
        Console.Out.WriteLine("Start the request");
        return request.GetResponse();
    }
    ).ContinueWith(t =>
    {
        Console.Out.WriteLine("Response");
        using (HttpWebResponse response = (HttpWebResponse)t.Result)
        {
            string responseBody = ...
        }
    },
    TaskScheduler.FromCurrentSynchronizationContext());

    Console.Out.WriteLine("Continue with normal UI code");
} 
```

应该发生什么：

```
"Start the request"
"Continue with normal UI code"
.
. 
.
"Response" 
```

但我得到：

```
"Start the request"
.
.
.
"Response"
"Continue with normal UI code" 
```

这就像`request.GetResponse()`停止独立于 StartNew 的整个线程。有任何想法吗？我正在使用 MonoDevelop（Android 的 Mono）。

**编辑：**根据[Mono for Android 文档](http://docs.xamarin.com/guides/cross-platform/application_fundamentals/building_cross_platform_applications/part_5_-_practical_code_sharing_strategies)

> “使用并行任务库创建的任务可以异步运行并返回其调用线程，这使得它们对于触发长时间运行的操作而不会阻塞用户界面非常有用。
> 
> 一个简单的并行任务操作可能如下所示："

```
using System.Threading.Tasks;
void MainThreadMethod ()
{
    Task.Factory.StartNew (() => wc.DownloadString ("http://...")).ContinueWith (
        t => label.Text = t.Result, TaskScheduler.FromCurrentSynchronizationContext()
    );
} 
```

所以我的解决方案应该有效！

如果有人有更好的方式进行后台调用+ UI-thread-callback，我愿意接受建议。尝试了 BeginGetResponse / EndGetResponse 但回调不在 UI 线程上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:21:01.887

`Task.Factory.StartNew()`本身不会启动新线程，而是允许在处理当前方法调用时再次调用方法入口点而不会被阻塞。这在幕后是如何发生的有点复杂，但使用它并不是“启动新线程并运行此代码”的方法。最重要的是，在退出调用线程之前，cpu 没有理由不决定在线程中运行代码。这取决于线程调度程序。

# ruby-on-rails-3 - 太阳黑子可搜索包括不加载 has_and_belongs_to_many 关联

> ID：14984489
> 
> 赞同：0
> 
> 时间：2013-02-20T16:07:25.300
> 
> 标签：ruby-on-rails-3, sunspot, sunspot-rails

在以下 Sunspot Rails 场景中，尽管有 include 指令，但没有加载 has_and_belongs_to_many 关联：

```
 has_and_belongs_to_many :predecessors, :join_table => 'next_phrases', :class_name => "Phrase", :foreign_key => 'next_id', :association_foreign_key => 'previous_id'

searchable :include =>[:predecessors] do
    integer :predecessor_ids, :multiple => true,:references => Phrase
end 
```

我们做错了什么还是这是一个错误？

如果我们手动调用 self.association(:predecessors).reload 它确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:07:17.950

这可能与prediction_ids 是类型数组的内部字段这一事实有关。如果将名称更改为整数：前辈，它就可以工作。

# java - 使用泛型类型 Enum 创建 EnumMap

> ID：14984490
> 
> 赞同：4
> 
> 时间：2013-02-20T16:07:24.813
> 
> 标签：java

如果我有一堆类都包含一个 Enum 和 EnumMap 并且我想为这些类创建一个超类。

```
public interface ColorEnum {
}

class ColorMarbles extends Toy {
    enum MARBLE implements ColorEnum
        { BLUE, GREEN }
    EnumMap<MARBLE, String> names = new EnumMap<MARBLE, String>(MARBLE.class);
    //stuff
    // fields

    public void populate(ArrayList<String> designer) {
        int i = 0;
        for(MARBLE marble : MARBLE.values()) {
            marble.name = designer.get(i);
            i++;
        }
    }
}

class ColorBalloons extends Toy {
    enum BALLOON implements ColorEnum
        { YELLOW, RED }
    EnumMap<BALLOON, String> names = new EnumMap<BALLOON, String>(BALLOON.class);
    //stuff
    // fields

    public void populate(ArrayList<String> designer) {
        int i = 0;
        for(BALLOON balloon : BALLOON.values()) {
            balloon.name = designer.get(i);
            i++;
        }
    }
} 
```

如何创建一个超类以拥有一个包含这样的 ColorEnum 类型的枚举的通用 EnumMap？

```
public abstract class Toy {
    EnumMap<ColorEnum, String> names;
} 
```

eidt：我意识到我的例子太含糊了。狗可能是一个不好的例子。我把它改成希望更清楚的东西。

我拥有的是一堆类，它们具有填充 EnumMap 之类的方法。名称按预定义的顺序排列。我希望能够将它带到 Toy 超类中，而不是在每个类中定义填充，这样我就不必在每个新的类类型 Toy 中继续复制粘贴。

希望这将解释更多我在寻找什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:21:04.327

我感觉你的设计过于复杂了。

**使用枚举**

如果您不需要类继承，则可以像使用顶级类一样直接使用枚举。

```
public interface Animal {}

public enum Dog implements Animal {
    HUSKY("Husky"), LAB("Labrador");

    private final String name;

    Dog(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
} 
```

枚举可以像任何其他 Java 类一样声明字段、方法和实现接口。它们唯一的限制是它们的直接超类始终是`java.lang.Enum`并且它们不能被扩展。

但是，每个枚举常量都可以将其自己的一组唯一数据传递给其构造函数。甚至有可能每个常量都可以通过其独特的实现覆盖该枚举的通用方法。

一个很好的教程，详细解释了枚举的全部功能：http: [//javarevisited.blogspot.cz/2011/08/enum-in-java-example-tutorial.html](http://javarevisited.blogspot.cz/2011/08/enum-in-java-example-tutorial.html)

* * *

**没有枚举**

如果您需要一个实际的类继承来共享一些常用方法（例如来自`Animal`超类），我仍然会放弃 map 方法，而是尝试一些更面向 OOP 的方法：

```
public class Animal {
}

public abstract class Dog extends Animal {

    public abstract String getName();

    public static class Husky extends Dog {
        @Override
        public String getName() {
            return "husky";
        }
    }

    public static class Lab extends Dog {
        @Override
        public String getName() {
            return "labrador";
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:39:08.233

我用于此类事情的一种机制是扩展一个泛型基类，该基类具有一个泛型参数，允许您将`Enum`详细信息传递给它。

此示例`Table`为数据库表定义了一个基类：

```
public class Table<Column extends Enum<? extends Column>> {
  // Name of the table.
  protected final String tableName;
  // All of the columns in the table. This is actually an EnumSet so very efficient.
  protected final Set<Column> columns;

  /**
   * The base interface for all Column enums.
   */
  public interface Columns {
    // What type does it have in the database?
    public Type getType();
  }

  // Small list of database types.
  public enum Type {
    String, Number, Date;
  }

  public Table(String tableName,
               Set<Column> columns) {
    this.tableName = tableName;
    this.columns = columns;
  }

} 
```

现在您可以将其子类化：

```
public class VersionTable extends Table<VersionTable.Column> {

  public enum Column implements Table.Columns {
    Version(Table.Type.String),
    ReleaseDate(Table.Type.Date);

    // Sadly all of this must be in ALL of your enums but most of the work can be pushed up to `Table`
    final Table.Type type;

    Column(Table.Type type) {
      this.type = type;
    }

    @Override
    public Type getType() {
      return type;
    }
  }

  public VersionTable() {
    super("Versions", EnumSet.allOf(Column.class));
  }
} 
```

并利用处理您的枚举的父类中的功能。

注意这里我将一个传递`EnumSet`给`Table`构造函数。`EnumMap`如果您认为 an`EnumSet`不够，我相信您可以更改它以适应您的要求。

# javascript - 为什么jQuery中的“this”参数返回带有锚点的href

> ID：14984491
> 
> 赞同：5
> 
> 时间：2013-02-20T16:07:35.227
> 
> 标签：javascript, jquery

我有这个例子：

```
<div id="example">
    <a href="http://www.google.com/#1">Hello</a>
    <a href="http://www.google.com/#4">Hello</a>
</div> 
```

而这两行 jQuery：

```
jQuery("a").filter(function() {
    console.log(""+this+"")
}); 
```

回报：

```
 http://www.google.com/#1

 http://www.google.com/#4 
```

但

```
jQuery("a").filter(function() {
    console.log(this);
}); 
```

退货

```
<a href="http://www.google.com/#1">Hello</a>​

<a href="http://www.google.com/#4">Hello</a>​ 
```

为什么第 2 行，返回锚的 HREF 属性 IF 'this' 参数添加一个“字符串”？jQuery 文档说如果过滤器有一个函数参数，`"this" is the current DOM element`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T16:10:09.767

`""+this`相当于`this.toString()`。在一个`a`元素上它返回`href`（是的，这很奇怪，可能是为了与很久以前有用的东西兼容，但这就是它在所有浏览器上所做的）。

在第二种情况下，您不是调用`toString`而是依赖于浏览器的控制台格式化方法。做出了不同的选择：例如在 Chrome 上，它通常返回外部 html（如果它很大，则作为可浏览的树）。

# c - 谁初始化信号量？

> ID：14984495
> 
> 赞同：3
> 
> 时间：2013-02-20T16:07:42.053
> 
> 标签：c, posix

所以，问题是：我正在为我的大学项目编写一个“聊天模拟器”。不谈太多细节，客户端可以运行多次，所有实例都使用由信号量保护的同一段共享内存（除其他外）。

客户端在未知时间进出系统。当第一个客户端进入系统时，它应该创建一个信号量，使用共享内存并释放。但是，如果任何其他客户端进入系统，它必须在获取共享内存访问之前等待信号量。

现在，我觉得我遗漏了一些明显的东西——如何初始化信号量？如果我使用`semget(42, 1, IPC_CREAT)`，则生成的信号量很可能是 0 - 但我不能提高它来初始化它，因为 0 可能意味着临界区中已经有一个进程。换句话说，我不知道我是否刚刚创建了默认值为 0 的信号量，或者是否有进程在等待信号量。

在伪代码中：

```
if(semaphore_not_exists(42))
{
    create_sem;
    raise_sem;
}
else
{
    get_sem_handle;
}
wait_on_sem;
critical_section;
release_sem; 
```

那么，如何确保信号量尚未被另一个进程创建，以便初始化它是安全的？如果我使用`IPC_EXCL`，请求将失败，但我不知道下一步该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:44:38.383

您可以执行以下操作：

1.  打电话`semget(key, nsems, IPC_CREAT | IPC_EXCL)`。如果这成功了，您现在已经创建了一个新的信号量集，然后您应该通过`semctl()`
2.  如果之前`semget()`失败，请`semget()`再次调用，不带`IPC_EXCL`标志。

我还建议使用锁定文件（通过`flock()`或类似方式）以确保在初始化之前不使用信号量集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:12:48.100

我认为信号量的所有用户都需要获得它已经初始化。否则，信号量本身的初始化会受到竞争条件的影响。你可以有一个守护进程在系统引导时初始化信号量并照顾

```
create_sem;
raise_sem; 
```

而客户只是执行

```
get_sem_handle; 
```

# javascript - 如何可靠地将对象分配给新创建的窗口（window.open）

> ID：14984496
> 
> 赞同：0
> 
> 时间：2013-02-20T16:07:42.600
> 
> 标签：javascript, object, race-condition, window.open

我的父窗口中有一个对象，其中包含来自先前 ajax 调用的嵌套对象，但为简单起见，假设它看起来像这样：

```
var myStuff = { id:1, computer:"ZX Spectrum" }; 
```

我需要打开一个弹出窗口并将对象的引用传递给它。因此我有：

```
this.oPopup = window.open("/my/page.htm", "MyPopupTarget", opts, false);
this.oPopup.myStuff = myStuff; 
```

通常这工作正常，但我偶尔会在第二行发生异常，有时当它发现“myStuff”变量不存在时，我会在弹出窗口中发生异常。

我怀疑这是一个时间问题，但我想知道如何可靠地传递 myStuff 对象。我应该将它包装在 setTimeout() 中吗？有我可以收听的活动吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:13:28.793

如果您准确提供正在引发的异常类型，这将有所帮助。

可能是新窗口在填充数据之前访问数据的线程问题。您可以尝试创建窗口对象并分配“myStuff”变量，然后单独调用 Open 方法，这样所有数据都在打开之前被分配。

# vb.net - Report vewier 无法添加参数

> ID：14984498
> 
> 赞同：1
> 
> 时间：2013-02-20T16:07:51.873
> 
> 标签：vb.net, parameters, reportviewer

我设法在我的报表查看器上为我的 tablix 设置了一个数据集，该数据集将包含属于账单的所有项目。我向您提出的问题是，我似乎无法在 .rdlc 报告中的文本框中添加任何参数。这是因为我添加了到我的数据库的连接吗？在添加连接之前，我可以轻松添加参数，但现在不行了。看看我的报告：

![在此处输入图像描述](../Images/937a748d28724800e2a9b294b5f1ac55.png)

所有的红色矩形都是我通常有我的参数的地方。有没有办法以编程方式做到这一点？

```
Dim rpJobNum = New ReportParameter("tbJobNo", JobNum)
rv.rvRdlc.LocalReport.SetParameters(rpJobNum) 
```

**rv**是我的报表查看器表单

**rvRdlc**是我的报表查看器控件

**tbJobNo**是我的文本框的工作编号名称

**JobNum**是一个保存相应值的变量（例如：10000）

如果我执行它，我会收到一个错误：

![在此处输入图像描述](../Images/705ac4ae070ee510a3b4d4d2b423e9db.png)

知道为什么我似乎无法添加任何参数控件吗？也许还有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:15:39.907

弄清楚为什么我不能添加参数。对我来说很菜鸟的东西。

转到**查看**>**报告数据**

![Ctrl + Alt + D](../Images/0e926e7e270d9ee12d5a8351b8265c85.png)

或者... `Ctrl`+ `Alt`+`D`

我很抱歉，但是，如果它可以帮助某人，我会回答这个问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T07:40:08.143

```
Dim parmlist As New List(Of ReportParameter)()
parmlist.Add(New ReportParameter("tbJobNo ", JobNum))
print.ReportViewer1.LocalReport.SetParameters(parmlist) 
```

你需要创建一个列表，就像我在这里所做的那样

# wordpress-theming - 使用 wp_enqueue_style 格式化样式表的排队方式

> ID：14984501
> 
> 赞同：0
> 
> 时间：2013-02-20T16:07:58.290
> 
> 标签：wordpress-theming

使用`wp_register_style`&时`wp_enqueue_style`，WordPress 在标题中输出样式路径。

我想知道是否有办法更好地格式化它，以便我的源代码可以按照我想要的方式格式化。

我正在使用这个：

```
wp_register_style( 'layout', get_template_directory_uri() . '/library/css/layout.css', array(), '2.1', 'all' ); 
wp_enqueue_style( 'layout' ); 
```

这个的输出是：

```
<link rel='stylesheet' id='layout-css' href='http://localhost/dreamsmedia/wp-content/themes/dreamsmedia/library/css/layout.css?ver=2.1' type='text/css' media='all' /> 
```

有没有办法在输出之前添加额外的间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:22:24.467

当使用这些 API 函数中的任何一个时，您将放弃对 WordPress 的控制权，以便将它们写入浏览器。

不过，这是正确的方法。

此外，如果您查看该函数[的源代码](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/functions.wp-styles.php#L0)，您会注意到没有调用，`apply_filters`因此您无法对 WordPress 在编写这些函数时所做的任何类型的自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:32:06.593

感谢 Justin Tadlock，我得到了答案。

` add_filter( 'style_loader_tag', 'my_style_loader_tag' );

功能 my_style_loader_tag( $tag ) { 返回 "\t" 。$标签；}`

# php - SQL+PHP：如何从 SQL 表中返回所有 PHP 数组存在的值？

> ID：14984506
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:08:07.170
> 
> 标签：php, mysql

**大家好**

我有一个简单的 php 数组，例如：

```
$numbers=array("12345","65432","98765"); 
```

SQL**表**名为：“phones”，列为“ **TNumbers** ”，**行**数：654654、12345、87878。

现在，从 SQL Server 表中存在的数组中返回所有值的最快方法是什么？（所以它应该只返回这个：（“12345”））

**非常感谢你！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:16:44.933

经过一番搜索，我找到了答案，对不起：

```
$ids = join(',',$numbers);  
$sql = "SELECT * FROM phones WHERE TNumbers IN ($ids)"; 
```

**还是非常感谢！**

# android - Android Web Driver - 无法模拟触摸动作

> ID：14984507
> 
> 赞同：0
> 
> 时间：2013-02-20T16:08:11.593
> 
> 标签：android, selenium, web, driver, ui-automation

我已经通过 Extras/Google Web Driver 下的 Eclipse ADT SDK Manager 下载了 android_webdriver_library.jar 并在我的 eclipse 项目中引用它。

如何模拟触摸动作，例如点击按钮？我找不到根据文档（[http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)）应该是触摸动作的工厂类的 TouchActions 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:57:31.683

我不知道 Java，但我在 Python 中得到了这个工作。你的代码是什么样的？您可以尝试[教程](http://google-opensource.blogspot.com/2011/10/test-your-mobile-web-apps-with.html)以及下面的示例并修改它以使用触摸吗？

以下教程中的示例：

```
WebElement toFlick = driver.findElement(By.id("image"));
// 400 pixels left at normal speed
Action flick = getBuilder(driver).flick(toFlick, 0, -400, FlickAction.SPEED_NORMAL)
        .build();
flick.perform();
WebElement secondImage = driver.findElement(“secondImage”);
assertTrue(secondImage.isDisplayed()); 
```

# eclipse-plugin - Eclipse Juno：已安装 TestNG 但无法访问

> ID：14984509
> 
> 赞同：1
> 
> 时间：2013-02-20T16:08:14.810
> 
> 标签：eclipse-plugin, installation, testng

我需要将 testNG 用于研究项目，所以我尝试通过两种方式安装 ecplipse 插件：首先使用分发包（我在 Archlinux 上使用 Eclipse Juno）[https://aur.archlinux.org/packages/ eclipse-testng/](https://aur.archlinux.org/packages/eclipse-testng/)和第二次使用 eclipse 附加组件安装程序（“帮助”>“安装新软件...”）按照以下步骤操作：[http ://selftechy.com/2012/01/09/setting-up -testng-with-eclipse](http://selftechy.com/2012/01/09/setting-up-testng-with-eclipse)

但是，每次，我都有这个问题：插件似乎正确安装，但我在菜单中找不到它，就像它会被禁用......例如，我在“窗口”中看不到它的窗口">"显示视图">"其他...">"java"。但是，当我转到“帮助”>“关于 Eclipse SDK”>“安装详细信息...”>“已安装的软件”时，我看得很清楚：“TestNG 6.8.0.20121120_1820 org.testng.eclipse.feature.group Cedric比斯特”

那么这是怎么回事？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:09:19.220

安装插件后，只需右键单击您的类文件 -> 运行方式 -> TestNG 测试

确保您的测试方法正确注释，即

```
public class Test {

   @Test
   public void test1(){
      System.out.println("test1");   
   } 

   @Test
   public void test2(){
      System.out.println("test2");
   }
} 
```

# iis-7 - 本地主机 IIS 错误 - HTTP 错误 403.14

> ID：14984510
> 
> 赞同：0
> 
> 时间：2013-02-20T16:08:29.283
> 
> 标签：iis-7, asp-classic, localhost

当我转到我在 IIS 上设置的本地主机站点时出现此错误

`HTTP 错误 403.14 - 禁止 Web 服务器配置为不列出此目录的内容。

未为请求的 URL 配置默认文档，并且未在服务器上启用目录浏览。`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:17:14.033

您需要[在 IIS 中配置默认​​文档](http://technet.microsoft.com/en-us/library/cc753615%28v=ws.10%29.aspx)。

# css - css : 文字隐藏

> ID：14984516
> 
> 赞同：1
> 
> 时间：2013-02-20T16:08:42.920
> 
> 标签：css

我正在尝试隐藏链接中的文本并使图像仅可见并且图像可点击。

我正在使用下面的代码，但文本似乎隐藏了。

```
<span class="cnn-b">

<a href="http://www.cnn.com" alt="cnn" title="cnn">
<span class="cnn-text">cnn</span>

</a></span> 
css

.cnn-b{
    width: 200px; height: 75px;
    background: url("cnn.png") no-repeat 0 0;
    text-indent: -9999px;
}
.cnn-text {
    text-indent: -9999px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:10:49.653

你错过了：

`display:block;`

你应该使用：

> .cnn-text { 显示：块；文本缩进：-9999px；}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:15:23.710

您不需要`<span>`-s 的所有额外标记，并且有一种比`text-indent: -9999px`- [**DEMO更好的（性能方面）隐藏文本的方法**](http://jsfiddle.net/a3JJm/)

***HTML***

```
<a href="http://www.cnn.com" alt="cnn" title="cnn" class="cnn">cnn</a> 
```

***CSS***

```
.cnn {
    width: 200px; 
    height: 75px;
    display: inline-block;
    background: url(http://lorempixel.com/200/75) no-repeat 0 0;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:15:08.740

`<img>`您可以在跨度和`display:none;`文本上插入一个元素：

```
<span class="cnn-b">
    <a href="http://www.cnn.com" alt="cnn" title="cnn">
        <span class="cnn-text">cnn</span>
        <img src="cnn.png" />
    </a>
</span> 
```

css

```
.cnn-b{
    width: 200px; height: 75px;
}

.cnn-text {
    display:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:36:38.343

默认情况下，跨度是内联元素。width 和 height 属性将无法在 .cnn-b 跨度上按预期工作。如果您更改 `<span class="cnn-b">`为`<div class="cnn-b">`或按照 James 的建议使用`display:block;`cnn-b 跨度而不是 cnn-text 跨度，这将解决您的问题。你的最终代码应该是这样的：

```
<html>
<head>
    <style>
        .cnn-b{
            display: block;
            width: 200px; height: 75px;
            background: url("cnn.png") no-repeat 0 0;
            text-indent: -9999px;
        }
        .cnn-text {
            text-indent: -9999px;
        }
    </style>
</head>

<body>
    <span class="cnn-b">
        <a href="http://www.cnn.com" alt="cnn" title="cnn">
            <span class="cnn-text">cnn</span>
        </a>
    </span>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:27:59.813

我认为有几种方法可以做你所说的。

听起来您所说的只是拥有一个可点击的图像。如果是这种情况，那么我建议将跨度放在锚标记内：

```
<a href="http://www.cnn.com" alt="cnn" title="cnn">
<span class="cnn-b"></span>
</a> 
```

如果您这样做，那么您唯一需要担心的是确保显示图像，这可以通过将 CSS 中的跨度调整为正确的宽度和高度并将显示设置为块来完成（块将允许它保持宽度）：

```
.cnn-b {
    width: 200px; height: 75px;
    background: url("cnn.png") no-repeat 0 0;
    display: block;
} 
```

这是一个例子：http: [//jsfiddle.net/CPUKP/1/](http://jsfiddle.net/CPUKP/1/)

# jquery - 如何正确杀死一个函数

> ID：14984520
> 
> 赞同：2
> 
> 时间：2013-02-20T16:08:52.337
> 
> 标签：jquery, function, jwplayer, die

我有一个视频播放器，只要单击链接，它就会打开并播放，并且在查看两个视频后，会出现一个表单，允许您对给出的信息进行评分。

我遇到的问题是视频完成后会出现一个重播按钮。我目前已经设置了 setTimeout 来消除视频并且它覆盖然后运行速率表单功能。但是，如果它单击 setTimeout 的重播按钮仍在运行，并且在视频重播的中途，该功能将运行。这是我的代码：

**删除视频叠加层**

```
fnVideoOverlayOff = function () {

    jQuery('#video, #block, .video-closebtn').css('display', 'none');

} 
```

**JW 播放器代码**

```
jwplayer('videoScreen').setup({
        flashplayer: '/assets/js/lib/player.swf',
        allowscriptaccess: "always",
        width:972,
        height:547,
        controlbar: "none",
        autostart: true,
        playlistfile: "/assets/videos/playlist.xml",
        events: {
            onPlaylistItem: function (event) {

                jQuery(document).idleTimer('destroy');

            },
                            onPLay: function (event) {

                            },
            onComplete: function (event) {

                setTimeout(function () {

                    fnVideoOverlayOff();

                }, 10000);

                var clickCount = 0;

                if(jQuery.cookie('clickCount') == 2) {

                    fnRateOverlayOn();

                    jQuery('#video, .video-closebtn').css('display', 'none');

                }
            }
        }
    }); 
```

我想杀死**fnVideoOverlayOff();** 如果单击重播按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:14:58.653

存储对 setTimeout 的引用，并`clearTimeout()`在您想阻止它完成时调用。

```
fnVideoOverlayOffTimer = setTimeout(... 

// and later on when you want to "kill" it,

clearTimeout(fnVideoOverlayOffTimer);` 
```

理想情况下，您会在`fnVideoOverlayOffTimer`某个地方声明以使其远离全局范围，但这是可选的。

# away3d - 如何创建 Away3d Infinite 瓷砖地板？

> ID：14984523
> 
> 赞同：1
> 
> 时间：2013-02-20T16:08:53.467
> 
> 标签：away3d

我正在尝试创建一个具有无限地板的场景，该场景似乎在 Away3d 中逐渐消失。我希望地板有质感。问题是——我似乎找不到任何明确的例子或教程来证明这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:09:46.857

好的，您需要设置场景，导入本地库等，我们开始吧

```
 //Away3d
          import away3d.containers.Scene3D;
          import away3d.containers.View3D;
          //etc

          ////////3D ModelScenes, Textures CLASS Exported 3DS/////////////////////
          [Embed("assets/Images/grass1.jpg")]
          var GrassTexture:Class;
          var groundMaterial = new BitmapTexture(new GrassTexture().bitmapData);

           ////////GROUND MESH/////////////////////////////////////////////////////
           var plane = new Mesh(new PlaneGeometry(3000,3000,30,30),new       TextureMaterial(Cast.bitmapTexture(groundMaterial)));
           plane.geometry.scaleUV(25, 25);
           plane.material.repeat = true;
           plane.material.alpha = 1;
           container.addChild(plane); 
```

与其平铺网格/平面，不如拥有一个非常大的平面并使用顶点/多边形作为平铺位置......

希望能帮助到你

# visual-studio-2010 - Crystal Reports + VS2010 部署到远程网络服务器

> ID：14984531
> 
> 赞同：0
> 
> 时间：2013-02-20T16:09:31.753
> 
> 标签：visual-studio-2010, crystal-reports, publishing

我使用 Crystal Reports for .NET + VS2010 + ASP.NET 制作了一个 Web 应用程序

在本地 IIS 中，应用程序运行良好。

在远程服务器中，页面变为空白。如果我显示页面的源代码，水晶组件的内容在源代码中。

我在一些网站上阅读过，我需要将 aspnet_client 放在 Web 服务器上，但我的项目中没有这个文件夹，发布文件夹中也没有。

我应该如何使用这些组件生成 aspnet_client 文件夹？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:32:41.310

1）首先，您必须在服务器上安装 Crytal Reports Runtime（MSI，32 位或 64 位，具体取决于服务器硬件）

*   [你可以在这里下载](http://scn.sap.com/docs/DOC-7824)

2) 然后，如果应用程序未安装到默认网站

*   将 aspnet_client 文件夹从 c:\inetpub\wwwroot 文件夹复制到新的网站根文件夹。

或（第二个更好）

*   创建一个名为 aspnet_client 的虚拟目录，指向新网站内的 c:\inetpub\wwwroot

# javascript - 使属性不可枚举有什么好处？

> ID：14984533
> 
> 赞同：51
> 
> 时间：2013-02-20T16:09:34.390
> 
> 标签：javascript, prototype, enumerable

可枚举性是属性的三个属性之一：可写性、可枚举性和可配置性。我的问题是：

*   在 JavaScript 中使属性不可枚举有什么好处？我知道我们通过使它们不可枚举来隐藏属性，但是隐藏属性有什么好处？
*   我们可以访问不可枚举的属性吗？如果是，那么使它们不可枚举有什么好处？
*   对象的所有预定义属性是否都设置为不可枚举？例如数组`pop`和`push`属性不可枚举的情况？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-20T16:20:00.773

我认为主要的好处是能够控制在枚举对象的属性时显示的内容，例如`for in`or `Object.keys()`。

MDN 很好地解释了它`Object.defineProperty`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

所以通常，当人们想要`Object`为`.prototype`. 但这使得属性可枚举并弄乱了循环/键集合中返回的内容（**不使用`.hasOwnProperty`**......不是每个人都使用的）。

因此，而不是类似的东西：

```
Object.prototype.myMethod = function () {
    alert("Ahh");
}; 
```

你可以`Object.defineProperty`用来明确地说让它不可枚举：

```
Object.defineProperty(Object.prototype, 'myMethod', {
    value: function () {
        alert("Ahh");
    },
    enumerable: false
}); 
```

这样，例如当您使用 时`for (var key in obj)`，“myMethod”将不会是枚举项，您不必担心使用`.hasOwnProperty`. 主要问题是某些浏览器当然不支持它：http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)并不是所有的库/代码都使用它，所以你不能总是依赖在外部库/代码上始终正确使用。

您可以随时访问不可枚举的属性，它只是在枚举对象的属性时不会显示 - 这是重点。

而且我确实相信对象的所有“预定义”属性都是不可枚举的。我真的只指本机属性，不一定是继承或创建的。因此，对于您的示例，`pop`将`push`不会**被**枚举，但`Array.prototype.indexOf`如果它是在不支持该方法的旧浏览器上创建为 polyfill...当然，可以通过使用`Object.defineProperty`我上面的示例来避免。另一个例子是`length`属性，这里就不一一列举了。

这是一个一般的例子：http: [//jsfiddle.net/aHJ3g/](http://jsfiddle.net/aHJ3g/)

的使用和定义`Object.keys`很重要：“返回给定对象自己的可枚举属性的数组，其顺序与`for-in`循环提供的顺序相同（不同之处在于`for-in`循环也枚举原型链中的属性）。” - 来自 MDN - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-28T07:22:44.067

我认为的另一个主要好处是，它可以防止对象的私有属性污染公共命名空间。

假设您创建并发布了一个强大的库，名为`Cosmos`. 用户启动 Node 解释器并通过调用构造函数创建它的新实例：

```
var Cosmos = require('Cosmos');
var cosmos = new Cosmos('my empire'); 
```

现在用户只需键入`cosmos`并按下回车键即可查看它支持的公共 API。您希望用户看到两者中的哪一个？

```
{ name: 'my empire',
  grow: [Function: grow],
  addStar: [Function: addStar],
  beautify: [Function: beautify],
  implode: [Function: implode],
  destroy: [Function: destroy] } 
```

或者

```
{ _age: 25000,
  _size: 35000,
  _destroyed: false,
  name: 'my empire',
  _numStars: 200,
  _init: [Function: _init],
  grow: [Function: grow],
  _grow: [Function: _grow],
  addStar: [Function: addStar],
  _checkStatus: [Function: _checkStatus],
  beautify: [Function: beautify],
  implode: [Function: implode],
  destroy: [Function: destroy] } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-15T13:17:22.990

# 不可枚举的属性没有真正的实际用途

这是一个非常好的问题，我正要问自己。经过一番调查，我的结论是：你肯定不需要这个功能。

## 背景

对于那些不知道什么是不可枚举属性的人，请查看以下链接：

*   [可枚举是什么意思？](https://stackoverflow.com/q/17893718/778272)
*   [属性的可枚举性和所有权](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)

## 您实际上可以枚举它们

这很奇怪，但枚举所说的“不可枚举”属性实际上非常简单：

```
// start with some enumerable properties
const foo = {
  a: 1,
  b: "yes",
  c: function () {}
}

// then add a couple of non-enumerable ones
Object.defineProperty(foo, "d", { value: "hiding here", isEnumerable: false });
Object.defineProperty(foo, "e", { value: 42, isEnumerable: false });

const enumerableProperties = Object.keys(foo).join(", ");
console.info("Enumerables: " + enumerableProperties);
// Enumerables: a, b, c

const ownPropertyNames = Object.getOwnPropertyNames(foo).join(", ");
console.info("Enumerating also the non-enumerables: " + ownPropertyNames);
// Enumerating also the non-enumerables: a, b, c, d, e
```

当他们说您无法枚举它们时，他们专门指`Object.keys()`的是`for..in`循环以及它们仅返回可枚举属性的事实。情况并非如此[`getOwnPropertyNames()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)。

## 不要使用它

好的，现在我们在同一页上：在我看来，它就像一种晦涩难懂的语言功能，只会让我的代码更难阅读和理解。我根本想不出真正合法的用途。

现有的两个答案都讨论了两个非常具体的案例：

1.  当您不得不弄乱某些第三方对象的原型以添加一些 polyfill 方法而不破坏现有代码的特定情况下代码不使用`hasOwnProperty()`or保护自己时，它很有用`Object.keys()`。如果这是您的情况，您将不得不支持非常旧的代码（即不符合当今最佳实践的遗留代码），我为您感到抱歉（尽管我知道今天仍有很多系统仍在维护不幸的是，属于这种情况）；

2.  当您开发公共库并希望保持面向公众的对象干净时，它很有用。这是非常具体的，对吧？而且我也不想`defineProperty`仅仅为此而用几个 s 污染我的图书馆的代码。此外，这个答案很快就会过时，因为我们现在有[私有字段](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Class_fields#Private_fields)。最后，答案还表明它也会保持公共命名空间的清洁，但事实并非如此；命名空间被对象本身污染，而不是其属性。

因此，除非您不幸不得不维护旧代码，否则请忘记使用它。你不需要它，相信我。如果您发现自己在枚举对象时需要隐藏某些属性，那么您肯定是在建模错误。只需将这些属性放在单独的对象中即可。它们并不意味着与您拥有的其他财产一起生活。这将使您的代码更清晰，更易于理解，这是您在编写代码时应该努力实现的最重要的事情。

[这是一篇更详细的文章](https://2ality.com/2015/10/enumerability-es6.html)，证实了不可枚举的属性如今已不起重要作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:16:55.127

*   通过使属性不可枚举，您仍然可以访问它。但是，当您在对象上应用 for in 循环时，将不会迭代不可枚举的属性。
*   见第一点
*   继承的属性是可枚举的（只要它们被标记为可枚举的）

    ```
    var x = {a:1, b:2} // a and b are enumerable properties by default
    x.propertyIsEnumerable("toString") // returns false, because it is not marked as enumerable
    var y = Object.create(x);
    y.c = 3;
    for(p in y) console.log(p); // this loop will print c, a and b but not toString 
    ```

# javascript - 如何在无头执行期间测试 jQuery UI 对话框

> ID：14984538
> 
> 赞同：3
> 
> 时间：2013-02-20T16:09:44.913
> 
> 标签：javascript, unit-testing, jquery-ui-dialog, jasmine, jasmine-maven-plugin

我们的应用程序将[jQuery 对话框](http://jqueryui.com/dialog/)用于模态弹出窗口。我们正在尝试为我们的 javascript 编写一些单元测试，其中一部分是创建对话框。我们正在使用 Jasmine 和[Jasmine Maven 插件](http://searls.github.com/jasmine-maven-plugin/)。在浏览器中运行测试时，一切正常。但是，当我们尝试无头执行测试 ( `mvn jasmine:test`) 时，测试会在创建对话框的行上失败。错误看起来像这样：

```
* TypeError: Cannot find function dialog in object [object Object]. 
```

发生这种情况的行就像这样：

```
$(element).dialog(popupProperties); 
```

如果有帮助，我们的 pom.xml 有这个插件：

```
 <plugin>
            <groupId>com.github.searls</groupId>
            <artifactId>jasmine-maven-plugin</artifactId>
            <version>1.2.0.0</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                <goals>
                    <goal>test</goal>
                </goals>
                </execution>
            </executions>
            <configuration>
                <preloadSources>
                    <source>${project.basedir}/src/main/webapp/resources/jquery.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/jquery-ui.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/angular.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/angular-mocks.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/jasmine-fixture.js</source>
                </preloadSources>
                <jsSrcDir>${project.basedir}/src/main/webapp/resources/</jsSrcDir>
                <jsTestSrcDir>${project.basedir}/src/test/javascript/unit/</jsTestSrcDir>
            </configuration>
        </plugin> 
```

我们可以做些什么来让无头执行与对话内容一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:17:12.710

我们弄清楚了问题所在。基本上，`preloadSources`来自我们的 src 目录的文件被两次添加到规范运行器中。它会先做所有`preoloadSources`事情，然后添加 src 目录中的所有内容。因此，`jquery.js`在 2nd 下添加了 2nd 次`jquery-ui.js`，因此它不知道是什么`dialog`。我们通过将 pom.xml 更改为以下内容来修复它：

```
 <plugin>
            <groupId>com.github.searls</groupId>
            <artifactId>jasmine-maven-plugin</artifactId>
            <version>1.2.0.0</version>
            <extensions>true</extensions>
            <executions>
                <execution>
                <goals>
                    <goal>test</goal>
                </goals>
                </execution>
            </executions>
            <configuration>
                <preloadSources>
                    <source>${project.basedir}/src/main/webapp/resources/${ivplugin.client.version}/jquery.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/${ivplugin.client.version}/jquery-ui.js</source>
                    <source>${project.basedir}/src/main/webapp/resources/${ivplugin.client.version}/angular.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/angular-mocks.js</source>
                    <source>${project.basedir}/src/test/javascript/lib/jasmine-fixture.js</source>
                </preloadSources>
                <jsSrcDir>${project.basedir}/src/main/webapp/resources/${ivplugin.client.version}/</jsSrcDir>
                <jsTestSrcDir>${project.basedir}/src/test/javascript/unit/</jsTestSrcDir>
                <sourceExcludes>
                    <exclude>**/jquery.js</exclude>
                    <exclude>**/jquery-ui.js</exclude>
                    <exclude>**/angular.js</exclude>
                </sourceExcludes>
            </configuration>
        </plugin> 
```

`sourceExcludes`防止它被第二次添加。这一切似乎都是插件的一个错误，但这让我们能够绕过它。

# git - GIT：推送到远程存储库不起作用（代码 128）

> ID：14984539
> 
> 赞同：1
> 
> 时间：2013-02-20T16:09:51.410
> 
> 标签：git

我在 Emacs 中使用 Magit 来控制我的源代码。不久前，我在 Dropbox-Folder 中设置了一个远程存储库。到目前为止，这只是一个测试，我还没有与任何人分享。

问题是，我不能再推送到我的存储库了。我已经进行了一些更改并开始了一个新的分支，但我不能再推动它了。这是错误信息

```
$ git --no-pager push -v origin new-proj-setup:refs/heads/new-proj-setup
Pushing to /Users/Henning/Dropbox/Consulting/Repo/consulting.git
fatal: '/Users/Henning/Dropbox/Consulting/Repo/consulting.git' does not appear to be a git     repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
git exited abnormally with code 128. 
```

我正在使用两台机器，到目前为止我可能只从另一台机器推送。但是我的 user.name 和 user.email 应该是一样的。

谢谢您的帮助！

PS：存储库没有损坏，我仍然可以克隆项目。

# java - java: 随机时间生成器

> ID：14984545
> 
> 赞同：3
> 
> 时间：2013-02-20T16:10:11.347
> 
> 标签：java, random, time, random-time-generation

如何生成随机`Time`值？例如：`07:02:33`,`08:52:14`等。我知道如何生成随机数，但我不知道如何执行此操作。我想`TIME`用随机值填充我的数据库列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:21:21.777

```
import java.util.Random;
import java.sql.Time;

final Random random = new Random();
final int millisInDay = 24*60*60*1000;
Time time = new Time((long)random.nextInt(millisInDay)); 
```

出于您的目的，这可能就足够了。不要忘记有些日子有不同的长度，您可能需要添加测试用例（夏令时和闰秒）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:20:29.020

A`java.util.Date`只是一个长值（自纪元以来的毫秒数）的包装器。因此，您可以简单地使用 生成随机 long 值`Random.nextLong()`，并将结果包装在`new Date(result)`. 您可以将这些日期实例传递给您的 JDBC 驱动程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-17T11:35:23.570

在，java1.8

> `Random generator = new Random(seed); LocalTime time = LocalTime.MIN.plusSeconds(generator.nextLong());`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-29T16:34:03.617

使用像[这里的 RandomUtil 类](https://github.com/exp2Tapavicki/RandomDataGenerator/blob/master/RandomDataGenerator/src/java/com/rdg/util/RandomUtil.java)这样的随机生成器，您可以在某些值之间创建随机日期等等。

使用此类的代码示例：

如果您需要从现有日期更新时间，您可以使用这样的代码。只需将 System.currentTimeMillis() 替换为数据库中的日期即可。

```
java.util.Date dateFromDB = new java.util.Date(System.currentTimeMillis()); 
```

日历 calendarFromDB = Calendar.getInstance();

calendarFromDB.setTime(dateFromDB);

```
java.util.Date randomDate = RandomUtil.getRandomDate(new java.util.Date(RandomUtil.getMinimumDate()), new java.util.Date(RandomUtil.getMaximumDate()), false);
Calendar calendar=Calendar.getInstance();
calendar.setTime(randomDate);

calendarFromDB.set(Calendar.HOUR_OF_DAY, calendar.get(Calendar.HOUR_OF_DAY));
calendarFromDB.set(Calendar.MINUTE, calendar.get(Calendar.MINUTE));
calendarFromDB.set(Calendar.SECOND, calendar.get(Calendar.SECOND));

dateFromDB = calendarFromDB.getTime(); 
```

样本输出：

**7 月 26 日星期二 02:30:27 CET 157737154**

或者如果你想要一些日期之间的随机日期或时间

```
java.util.Date randomDate = RandomUtil.getRandomDate(new java.util.Date(RandomUtil.getMinimumDate()), new java.util.Date(RandomUtil.getMaximumDate()), false);
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
System.out.println(sdf.format(randomDate)); 
```

样本输出：

**22:29:15**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:18:49.277

如果您可以使用第三方库，这里有一种使用 Joda Time 的方法。您将需要调整代码以适应您的场景：

```
final Random random = new Random();
for (int i = 0; i < 10; i++) {
    final LocalTime time = new LocalTime(random.nextLong());
    System.out.println(time);
} 
```

样本输出：

```
01:58:24.328
10:59:20.576
07:52:40.011
11:53:54.524
13:43:57.474
21:51:25.032
11:46:35.988
16:20:20.224
09:47:10.404
22:35:43.337 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T16:16:59.043

不看如何生成随机时间戳，如果你知道如何生成随机数，那你每次生成3个随机数怎么样，这样你就可以做一个随机时间值了？

# azure - WASABi 中的服务管理请求跟踪器（Windows Azure 自动缩放应用程序块）

> ID：14984547
> 
> 赞同：0
> 
> 时间：2013-02-20T16:10:21.407
> 
> 标签：azure

“服务管理请求跟踪器”的目的是什么？我可以展示一些有用的示例，如何以及何时使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:30:02.617

大多数扩展操作/请求都是异步完成的。您使用请求跟踪器来记录和检查这些请求的成功/失败。

# objective-c - NSLocalizedString 格式

> ID：14984555
> 
> 赞同：42
> 
> 时间：2013-02-20T16:10:42.287
> 
> 标签：objective-c, nslocalizedstring

我将如何使用`NSLocalizedString`这个字符串：

```
[NSString stringWithFormat:@"Is “%@“ still correct for “%@“ tap “OK“ otherwise tap “Change“ to choose new contact details", individual.contactInfo, individual.name]; 
```

在我以下列方式使用它之前使用 stringWithFormat 时：

```
[NSString stringWithFormat:@"%d %@", itemCount, NSLocalizedString(@"number of items", nil)]; 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-20T16:13:37.280

```
[NSString stringWithFormat:NSLocalizedString(@"Is “%@“ still correct for “%@“ tap “OK“ otherwise tap “Change“ to choose new contact details", @"Query if parm 1 is still correct for parm 2"), individual.contactInfo, individual.name]; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-20T16:18:53.153

给定的句子可以在某些语言中以不同的顺序用*可变部分*构造，那么我认为你应该使用位置参数`[NSString stringWithFormat:]`：

```
NSString *format = NSLocalizedString(@"number_of_items", @"Number of items"); 
```

这将为英语加载以下字符串：

```
@"Is \"%1$@\" still correct for \"%2$@\" tap \"OK\" otherwise tap \"Change\" to choose new contact details" 
```

也许还有其他的法语（我不懂法语，所以我不会尝试翻译，但它很可能有第一个和第二个参数以不同的顺序）：

```
"French \"%2$@\" french \"%1$@\" french" 
```

您可以像往常一样安全地格式化字符串：

```
NSString *translated = [NSString stringWithFormat:format individual.contactInfo, individual.name]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-06-02T06:54:13.313

我只想添加一个我在许多项目中使用的非常有用的定义。

我已将此功能添加到我的`header prefix`文件中：

```
#define NSLocalizedFormatString(fmt, ...) [NSString stringWithFormat:NSLocalizedString(fmt, nil), __VA_ARGS__] 
```

这允许您定义一个本地化字符串，如下所示：

```
 "ExampleScreenAuthorizationDescriptionLbl"= "I authorize the payment of %@ to %@."; 
```

它可以通过以下方式使用：

```
self.labelAuthorizationText.text = NSLocalizedFormatString(@"ExampleScreenAuthorizationDescriptionLbl", self.formattedAmount, self.companyQualifier); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-20T13:55:12.533

**迅速**

> //Localizable.strings
> 
> “我的本地化字符串”=“foo %@ baz”；

例子：

```
myLabel.text = String(format: NSLocalizedString("my-localized-string", 
                                       comment: "foo %@ baz"), "bar") //foo bar baz 
```

# cygwin - Cygwin 没有正确安装软件包？

> ID：14984556
> 
> 赞同：1
> 
> 时间：2013-02-20T16:10:44.703
> 
> 标签：cygwin

我使用 setup.exe 安装了 wget 并解压缩，但它似乎没有安装，而是我得到“找不到命令”。cygwin/bin 文件夹没有 wget 或 unzip。我尝试了不同的镜像来下载，我想这不是问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:29:05.563

感谢您的评论，除了运行 setup.exe 时，我所做的一切都是正确的，默认情况下选择了“下载而不安装”。切换到“安装”选项及其工作。

# c++ - 在 C++ 中调用函数指针指向的函数的方法

> ID：14984565
> 
> 赞同：0
> 
> 时间：2013-02-20T16:11:08.230
> 
> 标签：c++, c

我注意到有两种方法可以在 C++ 中调用函数指针。

示例代码：

```
void A(int x){
    ...
    ...
}

main() {
    void (*f)(int);
    f=&A;
    f();       //Method 1
    (*f)();    //Method 2
} 
```

为什么方法 1 和 2 都有效？具有相同行为的两种方法的逻辑是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:12:07.840

他们都工作，他们之间没有区别。你应该使用其中一个，无论你觉得哪个更易读，（我推荐`(*f)`版本，因为它暗示它`f`是一个指向函数的指针），但无论你选择哪个，请*始终如一*地使用它。

# javascript - 下划线 _.reduce 澄清？

> ID：14984566
> 
> 赞同：6
> 
> 时间：2013-02-20T16:11:08.930
> 
> 标签：javascript, underscore.js

我刚刚开始更深入地探索 JavaScript Underscore 库，只是想澄清一下我认为[`_.reduce()`](http://underscorejs.org/#reduce)（也称为`inject`and `foldl`）所做的事情是正确的。我的问题是：下面是对的吗？

当`_.reduce([1, 2, 3, 4, 5], function(memo, num) { return memo + num; }, 5);`被调用时，会发生以下情况：

*   `memo`开始于`5`
*   `memo`+ `list[0]`= `memo`=`6`
*   `memo`+ `list[1]`= `memo`=`8`
*   `memo`+ `list[2]`= `memo`=`11`
*   `memo`+ `list[3]`= `memo`=`15`
*   `memo`+ `list[4]`= `memo`=`20`

这就是 ran 函数返回的原因`20`。是对的吗？因此[`_.reduceRight()`](http://underscorejs.org/#reduceRight)是相反的，从`memo`+开始`list[ /* last element in array */ ]`？

谢谢。

问候。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T16:13:29.500

对，那是正确的。回调的第一个参数`reduce`表示从最后一次迭代*（或第一次迭代时的种子）*返回的值。

回调的第二个参数是数组当前迭代的值。

因此，第一个参数是您想要达到的任何结果的累加器。`_.reduce`当所有迭代完成时，函数会返回最终值。

# iphone - 为什么 dispatch_group_async 中的 progressBar 没有变化？

> ID：14984567
> 
> 赞同：1
> 
> 时间：2013-02-20T16:11:12.793
> 
> 标签：iphone, ios

我想在某些时候显示进度条，但进度条没有改变。我该怎么办？

```
dispatch_group_t group = dispatch_group_create();
dispatch_queue_t queue= dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);

dispatch_group_async(group, queue, ^{
    for (int i = 0; i < 100; i++)
    {
        dispatch_group_async(group, dispatch_get_main_queue(),^{
            self.progressBar.progress = (float)i/100;
        });

        // do big somethings
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:32:25.030

在您最初的问题中，您设置`progress`为 0 到 100 之间的整数。如果这是 a `UIProgressView`，那么`progress`是一个浮点数，应该从 0 到 1.0。

```
dispatch_group_t group = dispatch_group_create();
dispatch_queue_t queue= dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);

dispatch_group_async(group, queue, ^{
    for (int i = 0; i < 100; i++)
    {
        dispatch_group_async(group, dispatch_get_main_queue(),^{
            self.progressBar.progress = ((CGFloat) i) / 100.0;
        });

        // do big somethings
    }
}); 
```

或者，更简单地说，因为您并没有真正使用组（您在全局队列上只有一个操作，并且在处理串行队列时组通常是多余的）：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);

dispatch_async(queue, ^{
    for (int i = 0; i < 100; i++)
    {
        dispatch_async(dispatch_get_main_queue(),^{
            self.progressBar.progress = ((CGFloat) i) / 100.0;
        });

        // do big somethings
    }
}); 
```

如果您仍然没有看到进度视图更新，那么它一定很简单`IBOutlet`，例如没有正确连接。确定`self.progressBar`不是`nil`。尝试将其设置`progress`为`0.5`并确保正确反映。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T03:02:13.930

我建议使用

```
dispatch_queue_t queue = dispatch_queue_create("com.company.myqueue", NULL); 
```

更新进度状态，因为

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); 
```

是并发队列。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T16:47:45.463

您应该在主线程中更新进度条：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{

    // async stuff

    dispatch_sync(dispatch_get_main_queue(), ^{

        // sync stuff
    });
});

dispatch_release(queue); 
```

# c++ - 用于脚本语言的 VM

> ID：14984569
> 
> 赞同：1
> 
> 时间：2013-02-20T16:11:19.593
> 
> 标签：c++, llvm, vm-implementation

我目前正在研究不同的虚拟机来运行许多不同的脚本语言（以嵌入式方式）。

引起我注意的两个虚拟机是：

*   LLVM：虽然我看到过建议不要将 LLVM 用作 VM 的帖子，但它似乎确实有很多好处。它可以进行优化，JIT，已经有一个很好的调试器，等等。虽然似乎没有太多关于以这种方式使用 LLVM 的文档，但有 Cling 能够将 c++11 作为解释语言运行（这令人印象深刻），以及命令行工具“lli”。

*   libJIT：从技术上讲，这*不是*虚拟机，但提供了创建虚拟机所需的工具。

所以我的问题是：

1.  有没有人有使用这些虚拟机的经验并且可以提供消极/积极的体验。
2.  我浏览了 LLVM 和 libJIT 的大量文档，但想检查是否有人对其他资源（尤其是 LLVM）有任何建议。
3.  还有其他我应该考虑的虚拟机吗？我已经进行了一些相当广泛的搜索，所以这不是关于那里有哪些虚拟机的问题，而是人们使用过并会推荐的软件之一。

至于虚拟机的实际使用，我打算将虚拟机嵌入到 c++ 程序中，以提供可编写脚本的用户环境。我已经在使用 Lua 来做一些事情，但出于各种原因，我也希望能够支持其他语言。

最后，我看过 Parrot，但从我读过的一些关于它的东西中，我有点犹豫要不要使用它（也许有人可以说服我？）。

**更新**

我遇到了[http://vmkit.llvm.org](http://vmkit.llvm.org)，它看起来像是使用 LLVM 创建一个成熟的 VM。

# php - 连接来自不同数据库的两个不同表

> ID：14984572
> 
> 赞同：1
> 
> 时间：2013-02-20T16:11:21.823
> 
> 标签：php, mysql

我有一个单独的员工管理系统，带有休假模块、工资计算等。现在我已经下载了一个超时 php 源代码，所以它基本上是另一个系统，这意味着它有一个不同的数据库。现在我希望 EMS 中的员工表与时钟系统中的员工表连接。因此，当我从我的 EMS 添加员工时，它将在时钟上的员工表中自动更新。

顺便下载的时钟是这个：[http ://timeclock.sourceforge.net/](http://timeclock.sourceforge.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:38:15.597

**时钟系统中的视图**

如果您只编辑来自 EMS 的员工数据，您可以将时钟系统的员工表替换为从 EMS 表中读取的视图。或者甚至使用两个系统的[可更新视图](http://dev.mysql.com/doc/refman/5.1/en/view-updatability.html)和编辑。

```
create view timeclock_db.employee
as
select
   ...
from
   ems_db.employee 
```

**两个系统的同一张表**

如果两个员工表相同，并且您可以在其中一个系统中重新映射表，则可以更改映射，以便两个系统使用同一个表。该表可以存储在 EMS 数据库或时钟数据库中。

**触发器**

我不建议像那样保留数据的两个副本，但另一种选择是使用触发器 on 和[查询](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)来`update`保持两个表中的数据同步。`insert``delete`

# algorithm - 该算法的时间复杂度

> ID：14984574
> 
> 赞同：3
> 
> 时间：2013-02-20T16:11:26.253
> 
> 标签：algorithm, time-complexity

我一直在阅读时间复杂度方面的内容，并且已经涵盖了基础知识。为了强化这个概念，我看了一下我最近在 SO 上给出的答案。出于某种原因，这个问题现在已经结束，但这不是重点。我无法弄清楚我的答案的复杂性是什么，并且在我得到任何有用的反馈之前问题就被关闭了。

[任务](https://stackoverflow.com/q/14922454/752320)是找到字符串中的第一个唯一字符。我的回答很简单：

```
public String firstLonelyChar(String input)
{
    while(input.length() > 0)
    {
        int curLength = input.length();
        String first = String.valueOf(input.charAt(0));
        input = input.replaceAll(first, "");
        if(input.length() == curLength - 1)
            return first;
    }
    return null;
} 
```

[链接到一个ideone示例](http://ideone.com/qljw7i)

我的第一个想法是，由于它查看每个字符，然后在 期间再次查看每个字符，`replaceAll()`它将是 O(n^2)。

然而，它让我开始思考它的实际工作方式。对于检查的每个字符，它会删除字符串中该字符的所有实例。所以`n`是不断缩小。这个因素是如何影响的？这是否使它成为 O(log n)，或者有什么我没有看到的？

**我在问什么：**

所写算法的时间复杂度是多少，为什么？

**我不是在问什么：**

我不是在寻找改进它的建议。我知道可能有更好的方法来做到这一点。我试图更好地理解时间复杂度的概念，而不是找到最佳解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:17:43.303

您将遇到的最糟糕的时间复杂度是字符串`aabb...`等，每个字符恰好重复两次。现在这取决于您的字母表的大小，假设是`S`. 让我们也用 注释你的初始字符串的长度`L`。因此，对于每个字母，您都必须遍历整个字符串。但是，第一次这样做时， String 将是 size `L`，第二次`L-2`等等。总体而言，您必须按操作顺序执行`L + (L-2) + ... + (L- S*2)`，也就是说`L*S - 2*S*(S+1)`，假设 L 大于`2*S`.

顺便说一句，如果你的字母表的大小是恒定的，我想它是，你的代码的复杂性是`O(L)`（尽管有一个很大的常数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:16:08.557

最坏的情况是`O(n^2)`n 是输入字符串的长度。想象一下除了最后一个字符之外每个字符都加倍的情况，例如“aabbccddeeffg”。然后有 n/2 次循环迭代，每次调用`replaceAll`都必须扫描整个剩余的字符串，这也与 成正比`n`。

编辑：正如 Ivaylo 指出的那样，如果您的字母表的大小是恒定的，那么从技术上讲，`O(n)`因为您从不多次考虑任何字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:26:32.820

让我们标记：

m = 单词中唯一字母的数量
n = 输入长度

这是复杂度计算：
主循环最多进行**m**次，因为有 m 个不同的字母，
.Replaceall 在每个循环中最多检查 O(n) 次比较。

**总数为：O(m*n)**

O(m*n) 循环的示例是：输入 = aabbccdd，

m=4, n=8

算法阶段：

```
1\. input = aabbccdd, complex - 8
2\. input = bbccdd, complex = 6
3\. input = ccdd, complex = 4
4\. input = dd, complex = 2 
```

总计 = 8+6+4+2 = 20 = O(m*n)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T17:02:23.800

让`m`你的字母表的大小，让`n`你的字符串的长度。更糟糕的情况是在字母之间均匀分布字符串的字符，这意味着字母表`n / m`中的每个字母都有字符，让我们用 . 标记这个数量`q`。例如，字符串`aabbccddeeffgghh`是字母之间均匀分布的`16`字符`a-h`，所以这里`n=16`和`m=8`你有`q=2`每个字母的字符。

现在，您的算法实际上是遍历字母表中的字母（它只使用它们在字符串中出现的顺序），并且对于每次迭代，它必须遍历字符串的长度（`n`）并将其缩小`q`（`n -= q`）。因此，在最坏的情况下，您执行的所有操作数量是：

```
s = n + n-(1*q) + ... + n-((m-1)*q) 
```

您可以看到这`s`是算术级数的第一个`m`元素的总和：

```
s = (n + n-((m-1)*q) * m / 2 =  
    (n + n-((m-1)*(n/m)) * m / 2 ~ n * m / 2 
```

# java - 当我有一个类的集合时，有多少静态最终属性的副本存储在内存中

> ID：14984581
> 
> 赞同：0
> 
> 时间：2013-02-20T16:11:51.150
> 
> 标签：java, memory

假设我有这个简单的类：

```
public class Car {
  public static final int TYPE_SUV = 1;
  public static final int TYPE_TRUCK = 2;
  public String name;
  public int carType;
} 
```

现在，如果我有这些集合，我知道我正在为集合中的每个元素分配 a`String`和 an `int`，但是我是否还`int`多次存储 static s？这个人为的示例类代表了我多年前编写的那种 Java，在我了解到像这样的幻数更好地使用`enum`在单独的类中定义的 an 之前，但我一直想知道这段代码的副作用是什么.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:38:31.610

从[1.7 JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.1)开始：

> 如果一个字段被声明为静态的，那么无论最终创建多少个类的实例（可能为零），都只存在该字段的一个化身。静态字段，有时称为类变量，在类初始化时体现（第 12.4 节）。
> 
> 未声明为静态的字段（有时称为非静态字段）称为实例变量。每当创建一个类的新实例时（第 12.5 节），就会为该类或其任何超类中声明的每个实例变量创建一个与该实例关联的新变量。

需要注意的关键点是，无论您拥有多少个实例（1、1000 或没有），内存都是按类（而不是实例）消耗的。

对于它的价值：您`name`和`carType`实例变量仅在创建实例时分配。更重要的是，在 java 7 之前，`String`可以将相等值的 s 保存在一个字符串实例中，该实例在任何使用的地方都被引用 - 到一个字符串管理的内存中（在 PermGen 中）。这在[java 1.7](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes)被移动到主堆时发生了变化，并且似乎在使用[java 8再次发生变化（？）](http://java.dzone.com/articles/java-8-permgen-metaspace)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:13:05.910

没有副本存储在任何地方，创建了对内存（堆上）同一位置的多个引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T16:13:46.047

`static`变量与类无关，与对象无关。因此，`Object`您创建的`static`变量将在内存中间隔开一次，并且`Static context`在类加载时加载所有负载，因此无需创建`Object`也可以在名称`static`的帮助下访问您的变量`class`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T16:15:15.050

`static`不维护多个副本。都有`objects`变量`same` `static`。如果他们有，那么你必须给`access`他们`using object`，但这不是我们要做的`static`。

存储引用的惩罚 = 创建类的惩罚。

# entity-framework - 当我不公开 IQueryable 时，我不必进行集成测试

> ID：14984582
> 
> 赞同：1
> 
> 时间：2013-02-20T16:11:51.683
> 
> 标签：entity-framework

我已经阅读了很多关于实体框架的单元/集成测试的 SO 链接，如果我没有误解的话，可以总结一下：

当存储库接口公开 IQueryable 时，我必须进行集成测试（单元测试是不够的），因为作为 linq 到实体的 IQueryable 可以变成 linq 到对象查询，它的行为可能完全不同，只能通过真实的测试数据库。

当存储库接口仅公开 IEnumerable 或 List 时，对存储库进行单元测试就足够了。

我知道在我的服务中编写一个 IQueryable 而不添加许多新的接口方法会非常酷......

但如果上述情况属实，并且我想尽可能避免集成测试......

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:30:03.640

> 当存储库接口仅公开 IEnumerable 或 List 时，对存储库进行单元测试就足够了。

不，那是误解。当存储库仅公开`IEnumerable`或者`List`可以安全地伪造或模拟它并使用您的存储库对逻辑进行单元测试时。存储库本身仍然必须包含集成测试，因为它定义了必须针对真实数据库进行测试的数据库查询。

将查询隐藏在存储库后面的主要原因是分离关注点并在应用程序逻辑和数据库执行逻辑（查询）之间定义严格的边界。每个逻辑都需要自己的测试。

您提到的问题最有可能讨论了模拟或伪造 EF 上下文/EF 集或存储库公开`IQueryable`。在这种情况下，存储库会将数据库执行的逻辑暴露给上层，这使得正确的测试变得更加困难。在这种情况下，您需要对应用程序逻辑进行单元测试，并使用 Linq-to-objects 以某种方式伪造 Linq-to-entities（数据库逻辑）。但是这样的测试不足以测试这些查询，因此您还需要集成测试来复制部分单元测试。

# android - 从自定义 DatePicker DialogPreference 调用自定义时间 DialogPreference

> ID：14984584
> 
> 赞同：0
> 
> 时间：2013-02-20T16:12:00.243
> 
> 标签：android, custom-controls, timepicker, listpreference, android-datepicker

我需要在我的项目中实现自定义 TimePicker 和 DatePicker DialogPreferences。应调用第一个 DatePicker 对话框，然后调用 TimePicker。[在本](https://github.com/bostonandroid/DatePreference)教程和[本](https://github.com/commonsguy/cw-lunchlist/blob/master/19-Alarm/LunchList/src/apt/tutorial/TimePreference.java)教程的帮助下，我将它们都实施到了我的项目中。

我认为我应该在 DatePreference 的`onDialogClosed`方法中调用 TimePreference。我这样做：

```
 @Override
protected void onDialogClosed(boolean shouldSave) {
    if (shouldSave && this.changedValueCanBeNull != null) {
      setTheDate(this.changedValueCanBeNull);
      this.changedValueCanBeNull = null;
      Log.i("curr context", ctx.getClass().toString());
      try{

          new TimePreference(ctx,attrs).getDialog().show();
      }
      catch(Exception e)
      {
          e.printStackTrace();
      }
    }
} 
```

但我得到一个 NullPointerException。问题是如何在 DatePreference 工作后立即以编程方式调用我的自定义 TimePreference 对话框并将两个值都设置为 DatePreference。或者我应该创建不同的自定义 ListPreference 来实现这两个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:16:06.737

我创建了看起来像 ListPreference 的自定义视图并实现了这个解决方案。

```
 private TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
            public void onTimeSet(TimePicker view, int hourOfDay, int minuteOfHour) {
              mHour = hourOfDay;
              mMinute = minuteOfHour;
              updateDisplay();

            }
          };

             DatePickerDialog.OnDateSetListener mDateSetListener =
                     new DatePickerDialog.OnDateSetListener() {
                     public void onDateSet(DatePicker view, int year, int monthOfYear,
                                     int dayOfMonth) {
                             mYear = year;
                             mMonth = monthOfYear;
                             mDay = dayOfMonth;

                             updateDisplay();
                     }
             };

@Override
        protected Dialog onCreateDialog(int id) {
                switch (id) {
                case DATE_DIALOG_ID:
                        return new DatePickerDialog(this,
                                mDateSetListener,
                                mYear, mMonth, mDay);

                case TIME_DIALOG_ID:
                    return new TimePickerDialog(this, mTimeSetListener, mHour, mMinute,
                        false);
                }
                return null;
        }
        protected void onPrepareDialog(int id, Dialog dialog) {
                switch (id) {
                case DATE_DIALOG_ID:
                        ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
                        break;}
                }
        private void updateDisplay() {
            String minutes = null;
            if (mMinute>9)
                minutes = Integer.toString(mMinute);
            else 
                minutes = "0"+Integer.toString(mMinute);
            if (mMonth<10)
            deadlineCus.setSummary(
                    (new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mYear).append("-").append("0")
                    .append(mMonth + 1).append("-")
                    .append(mDay)
                    .append(" ").append(mHour).append(":").append(minutes)).toString()
                    );
            else 
                deadlineCus.setSummary(
                        (new StringBuilder()
                        // Month is 0 based so add 1
                        .append(mYear).append("-")
                        .append(mMonth + 1).append("-")
                        .append(mDay)
                        .append(" ").append(mHour).append(":").append(minutes)).toString()
                        );
            showDialog(TIME_DIALOG_ID);

    } 
```

在 onCreate() 方法中：

```
 DatePickerDialog.OnDateSetListener mDateSetListener =
                    new DatePickerDialog.OnDateSetListener() {
                    public void onDateSet(DatePicker view, int year, int monthOfYear,
                                    int dayOfMonth) {
                            mYear = year;
                            mMonth = monthOfYear;
                            mDay = dayOfMonth;

                            updateDisplay();
                    }

            };
            TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
                public void onTimeSet(TimePicker view, int hourOfDay, int minuteOfHour) {
                  mHour = hourOfDay;
                  mMinute = minuteOfHour;
                  updateDisplay();

                }
              };

  deadlineCus.setOnTouchListener(new OnTouchListener()
      {

        public boolean onTouch(View arg0, MotionEvent arg1) 

        {
              showDialog(DATE_DIALOG_ID);
              return false;
        }

      }); 
```

# r - 同时按总和聚合一列，按均值聚合另一列

> ID：14984589
> 
> 赞同：5
> 
> 时间：2013-02-20T16:12:15.333
> 
> 标签：r, aggregate

我想在日期框架上使用聚合函数，但对一列求和并取另一列的平均值。

这是一个示例数据框

```
Manager   Category  Amount  SqFt
Joe           Rent     150   500
Alice         Rent     250   700
Joe      Utilities      50   500
Alice    Utilities      75   700 
```

我不能做类似下面的事情。有简单的方法吗？

```
Avg_CPSF=aggregate(cbind(Amount,SqFt)~Manager,data=aaa,FUN=c(sum,mean) 
```

最终我需要

```
Manager  Amount   SqFT
Joe       200      500
Alice     325      700 
```

这样我就可以通过 Amount/SqFT 计算每平方英尺的成本

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-20T16:18:51.133

有几种方法可以做到这一点。以下是我喜欢的一些（假设我们以一个`data.frame`名为“mydf”的开头）：

使用`ave`和`unique`

```
unique(within(mydf, {
  Amount <- ave(Amount, Manager, FUN = sum)
  SqFt <- ave(SqFt, Manager, FUN = mean)
  rm(Category)
}))
#   Manager Amount SqFt
# 1     Joe    200  500
# 2   Alice    325  700 
```

* * *

使用`data.table`：

```
library(data.table)
DT <- data.table(mydf)
DT[, list(Amount = sum(Amount), SqFt = mean(SqFt)), by = "Manager"]
#    Manager Amount SqFt
# 1:     Joe    200  500
# 2:   Alice    325  700 
```

* * *

使用“sqldf”：

```
library(sqldf)
sqldf("select Manager, sum(Amount) `Amount`, 
      avg(SqFt) `SqFt` from mydf group by Manager") 
```

* * *

使用`aggregate`和`merge`：

```
merge(aggregate(Amount ~ Manager, mydf, sum), 
      aggregate(SqFt ~ Manager, mydf, mean)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T16:22:38.780

您可以在包中使用该`summarise`功能：`ddply``plyr`

```
library(plyr)
ddply(mtcars,.(cyl),summarise,TotalWt=sum(wt),AveHP=mean(hp))
  cyl TotalWt     AveHP
1   4  25.143  82.63636
2   6  21.820 122.28571
3   8  55.989 209.21429 
```

# android - 安装后保存对象

> ID：14984594
> 
> 赞同：0
> 
> 时间：2013-02-20T16:12:26.863
> 
> 标签：android

我正在开发一个应用程序，其中所有功能都是在一个对象上完成的，这个对象是在繁重、耗时的数据处理之后构建的。这种繁重的处理在安装后只需要一次就可以了。我怎样才能在后台保存这个对象，以免在每个应用程序午餐时都构造它？我的意思是我不想在每次用户运行应用程序时都进行这种耗时的数据处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:38:59.793

After you've constructed your big object, serialize it to a file in the application's private data storage.

When your application starts, it should try to load the serialized object from the data file. If this fails, then it will need to construct the object again.

You can serialize it any way you want to. You just need to provide a method that can write the object to a stream, and another method that can initialize the object from that stream.

# rest - 将 Apache HTTP 客户端附加到 RESTlet 客户端

> ID：14984595
> 
> 赞同：0
> 
> 时间：2013-02-20T16:12:31.527
> 
> 标签：rest, restlet, apache-httpclient-4.x

我使用 RESTlet 作为服务器和客户端。服务器在 Tomcat 上运行，我可以从浏览器访问它。

对于客户端，我使用的是 org.restlet.resource.ClientResource。如果我向该服务器发送一些请求，它工作正常，但如果我发送几百个调用它会中断：

```
Fev 20, 2013 12:59:43 PM org.restlet.engine.connector.ClientConnectionHelper start
INFO: Starting the internal [HTTP/1.1] client
(some calls work)
Fev 20, 2013 1:00:49 PM org.restlet.util.SelectionRegistration block
WARNING: The thread blocked at the cyclic barrier has timed out
java.util.concurrent.TimeoutException
    at java.util.concurrent.CyclicBarrier.dowait(CyclicBarrier.java:250)
    at java.util.concurrent.CyclicBarrier.await(CyclicBarrier.java:427)
    at org.restlet.util.SelectionRegistration.block(SelectionRegistration.java:191)
    at org.restlet.engine.io.NbChannelInputStream.onFill(NbChannelInputStream.java:230)
    at org.restlet.engine.io.Buffer.process(Buffer.java:601)
    at org.restlet.engine.io.NbChannelInputStream.read(NbChannelInputStream.java:307)
    at java.io.InputStream.read(InputStream.java:101)
    at org.restlet.engine.io.BioUtils.copy(BioUtils.java:80)
    at org.restlet.engine.io.NioUtils.copy(NioUtils.java:147)
    at org.restlet.representation.ReadableRepresentation.write(ReadableRepresentation.java:104)
    at org.restlet.representation.ChannelRepresentation.write(ChannelRepresentation.java:76)
    at org.restlet.representation.ChannelRepresentation.write(ChannelRepresentation.java:82)

Exception in thread "main" java.io.IOException: The thread blocked at the cyclic barrier has timed out.
    at org.restlet.util.SelectionRegistration.block(SelectionRegistration.java:197)
    at org.restlet.engine.io.NbChannelInputStream.onFill(NbChannelInputStream.java:230)
    at org.restlet.engine.io.Buffer.process(Buffer.java:601)
    at org.restlet.engine.io.NbChannelInputStream.read(NbChannelInputStream.java:307)
    at java.io.InputStream.read(InputStream.java:101)
    at org.restlet.engine.io.BioUtils.copy(BioUtils.java:80)
    at org.restlet.engine.io.NioUtils.copy(NioUtils.java:147)
    at org.restlet.representation.ReadableRepresentation.write(ReadableRepresentation.java:104)
    at org.restlet.representation.ChannelRepresentation.write(ChannelRepresentation.java:76)
    at org.restlet.representation.ChannelRepresentation.write(ChannelRepresentation.java:82)
Caused by: java.util.concurrent.TimeoutException
    at java.util.concurrent.CyclicBarrier.dowait(CyclicBarrier.java:250)
    at java.util.concurrent.CyclicBarrier.await(CyclicBarrier.java:427)
    at org.restlet.util.SelectionRegistration.block(SelectionRegistration.java:191)
    ... 11 more 
```

我想使用 Apache HTTP Client 来进行更多调用，但我找不到有关如何附加它的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:07:21.727

我遇到了同样的问题，但是在一台实时生产机器上，这导致我的服务器占用了 100% 的 CPU。我能够通过返回使用`restlet 2.1.0`而不是`2.1.2`. 不是根本问题的真正答案，但绝对是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:28:12.773

每个证据都指出此错误是 RESTlet 客户端的内部错误。我没有使用它，而是使用了`URL.getInputStream()`，并且我能够轻松地对我的 RESTlet 服务器进行 10K 连续调用。当然 URL 很简单，它无法处理错误，不应该在生产中使用，但它证明 RESTlet 不值得。

我还设法让 Benchmark 将 Axis2 和 RESTlet 作为服务器进行比较，它们具有相同的性能，需要 3-5 毫秒来响应请求，我希望 REST 更快......我直接从 Servlet 实现了 REST 服务器，它也是 0-1毫秒响应。正因为如此，我决定放弃 REST 并坚持使用 SOAP Axis2，它并不比 RESTlet 慢，也比 Servlet 慢几毫秒，但它更加灵活和强大。

# plone - 如何在 zope 模板中打印相关对象的属性？

> ID：14984596
> 
> 赞同：2
> 
> 时间：2013-02-20T16:12:40.777
> 
> 标签：plone, dexterity

我写了一个敏捷类型，其中包含与另一个对象相关的字段：

```
institution = RelationChoice(
    title=_(u"Institution"),
    source=ObjPathSourceBinder(
        object_provides=IInstitution.__identifier__
    ),
) 
```

在我写的模板中：

```
<span id="institution" tal:content="context/institution" /> 
```

但它打印：

```
<z3c.relationfield.relation.RelationValue object at 0xe3a032c> 
```

我试图获取属性以建立指向该项目的链接，但下一个不起作用：

```
<span id="institution" tal:content="context/institution/absolute_url" /> 
```

如何获取 objecto 的属性以建立指向它的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:23:17.727

参考对象记录[在 Dexterity 开发人员手册](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/references)中。您正在寻找`to_object`属性：

```
<span id="institution" tal:content="context/institution/to_object/absolute_url" /> 
```

这将插入链接对象的 URL，或者您可以显示`Title`：

```
<span id="institution" tal:content="context/institution/to_object/Title" /> 
```

# javascript - Jquery在onload时执行onchange事件

> ID：14984598
> 
> 赞同：37
> 
> 时间：2013-02-20T16:12:46.607
> 
> 标签：javascript, jquery

我有一个在更改事件上运行发布操作的功能。

```
$("select#marca").change(function(){
    var marca = $("select#marca option:selected").attr('value');
    $("select#modello").html(attendere);
$.post("select.php", {id_marca:marca}, function(data){
        $("select#modello").html(data);
    });
}); 
```

我想在加载事件时执行此功能。是否可以？有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-20T16:15:38.043

只需将它放在一个函数中，然后在准备好文档时也调用它，如下所示：

```
$(function () {
    yourFunction(); //this calls it on load
    $("select#marca").change(yourFunction);
});

function yourFunction() {
    var marca = $("select#marca option:selected").attr('value');
    $("select#modello").html(attendere);
    $.post("select.php", {id_marca:marca}, function(data){
        $("select#modello").html(data);
    });
} 
```

`change`或者只是在页面加载时调用？

```
$(function () {
    $("select#marca").change();
}); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-02-24T20:44:37.090

非常简单的方法是将另一个 .change() 事件链接到您的 on change 函数的末尾，如下所示：

```
$("#yourElement").change(function(){
   // your code here
}).change(); // automatically execute the on change function you just wrote 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-20T16:15:35.260

如果您添加`.change()`到末尾，它将在绑定后立即调用：

```
$(function() { 
    $("select#marca").change(function(){
        var marca = $("select#marca option:selected").attr('value');
        $("select#modello").html(attendere);
    $.post("select.php", {id_marca:marca}, function(data){
            $("select#modello").html(data);
        });
    }).change(); // Add .change() here
}); 
```

或者将回调更改为实际函数并调用它：

```
function marcaChange(){
    var marca = $("select#marca option:selected").attr('value');
    $("select#modello").html(attendere);
$.post("select.php", {id_marca:marca}, function(data){
        $("select#modello").html(data);
    });
}

$(function() { 
    $("select#marca").change(marcaChange);
    marcaChange();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-21T10:52:28.050

要调用`onload`，您可以尝试使用 jQuery：

```
 $(document).ready(function(){
 onchange();// onload it will call the function
     }); 
```

像这样编写你的 onchange 函数，这样会在`onchange`发生时调用，

```
function onchange(){
    var marca = $("select#marca option:selected").attr('value');
    $("select#modello").html(attendere);
    $.post("select.php", {id_marca:marca}, function(data){
    $("select#modello").html(data);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-28T10:51:10.753

这对我有用。

```
 $(function () {
    $('#checkboxId').on('change', hideShowfunction).trigger('change');
});

function hideShowfunction(){
//handle your checkbox check/uncheck logic here
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-13T05:31:45.167

另一种方法

```
 $("select#marca").val('your_value').trigger('change'); 
```

# linux - oprofile 0.9.8 在带有 Pentium D 的 Ubuntu 12.10 下失败

> ID：14984600
> 
> 赞同：0
> 
> 时间：2013-02-20T16:12:50.997
> 
> 标签：linux, ubuntu, profiling, oprofile

我正在尝试在奔腾 D 处理器（戴尔 OptiPlex-GX620 桌面）上运行的 Ubuntu 12.10 下使用 oprofile 0.9.8。当我尝试像“operf ls”这样简单的事情时，我得到了

```
perf_event_open failed with Invalid argument
Caught runtime_error: Internal Error.  Perf event setup failed.
Error running profiler 
```

通过安装带有 timer=1 的模块（见下文），我在 sudo 下使用 opcontrol 命令成功地在传统模式下运行 oprofile。

operf 似乎对这种配置不满意——这是新的首选方法。

我已经验证所有依赖包都已加载。

在 oprofile 网站上，他们没有将 pentium D 称为单独的架构，因此不确定它是否使用常规的 Pentium 架构。

我到处搜索，找不到这样的报道。任何帮助将不胜感激在此处确定问题。

PS 当我使用 opcontrol 以传统模式运行时，我取得了一些成功：

```
denham@denham-OptiPlex-GX620:~$ sudo opcontrol --start
ATTENTION: Use of opcontrol is discouraged.  Please see the man page for operf.
Using default event: GLOBAL_POWER_EVENTS:100000:1:1:1
Error: counter 0 not available nmi_watchdog using this resource ? Try:
opcontrol --deinit
echo 0 > /proc/sys/kernel/nmi_watchdog

**When I force the module to be installed with timer=1**

denham@denham-OptiPlex-GX620:~$ sudo opcontrol --deinit
Unloading oprofile module
denham@denham-OptiPlex-GX620:~$ sudo modprobe oprofile timer=1
denham@denham-OptiPlex-GX620:~$ sudo opcontrol --no-vmlinux
denham@denham-OptiPlex-GX620:~$ sudo opcontrol --start
ATTENTION: Use of opcontrol is discouraged.  Please see the man page for operf.
Using 2.6+ OProfile kernel interface.
Using log file /var/lib/oprofile/samples/oprofiled.log
Daemon started.
Profiler running.
denham@denham-OptiPlex-GX620:~$ ./a
^C
denham@denham-OptiPlex-GX620:~$ sudo opcontrol --shutdown

Stopping profiling.
Killing daemon.
denham@denham-OptiPlex-GX620:~$ opreport --callgraph
Using /var/lib/oprofile/samples/ for samples directory.
warning: /no-vmlinux could not be found.
warning: [vdso] (tgid:1697 range:0xb77ab000-0xb77ac000) could not be found.
warning: [vdso] (tgid:1728 range:0xb77b6000-0xb77b7000) could not be found.
warning: [vdso] (tgid:3310 range:0xb7702000-0xb7703000) could not be found.
CPU: CPU with timer interrupt, speed 2992.41 MHz (estimated)
Profiling through timer interrupt
samples  %        image name               app name                 symbol name
-------------------------------------------------------------------------------
31878    81.1868  no-vmlinux               no-vmlinux               /no-vmlinux
  31878    100.000  no-vmlinux               no-vmlinux               /no-vmlinux [self]
-------------------------------------------------------------------------------
2820      7.1820  a                        a                        main
  2820     100.000  a                        a                        main [self]
-------------------------------------------------------------------------------
1065      2.7123  vino-server              vino-server              /usr/lib/vino/vino-server
  1065     100.000  vino-server              vino-server              /usr/lib/vino/vino-server [self]
-------------------------------------------------------------------------------
1056      2.6894  a                        a                        b
  1056     100.000  a                        a                        b [self]
-------------------------------------------------------------------------------
1013      2.5799  a                        a                        c
  1013     100.000  a                        a                        c [self]
-------------------------------------------------------------------------------
968       2.4653  a                        a                        d
  968      100.000  a                        a                        d [self]
-------------------------------------------------------------------------------
264       0.6724  libc-2.15.so             libc-2.15.so             /lib/i386-linux-gnu/libc-2.15.so
 . . . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:49:53.217

# mysql - MySQL：如何计算 datediff() 小于 30 的多行

> ID：14984603
> 
> 赞同：2
> 
> 时间：2013-02-20T16:13:09.777
> 
> 标签：mysql, count, sum, datediff

根据我之前创建的这个主题（[MySQL : Count row where sum of left day is less than 30](https://stackoverflow.com/questions/14980288/mysql-count-row-where-sum-of-left-day-is-less-than-30)）。现在我有另一个问题。我需要将那些将在 30 天内过期的行作为总和。所以我可以知道一个月内有多少产品会过期。这是我的代码：

**用户数据库**

```
id         name        exp_product1         exp_product2          exp_product1
1          John        2013-03-01           2013-02-28            2013-03-27
2          Alice       2013-02-25           2013-04-25            2013-10-10
3          Ken         2013-01-10           2013-01-20            2013-02-11
4          Elise       2013-04-11           2013-05-23            2013-11-11
5          Bruce       2013-03-14           2013-06-06            2013-09-10 
```

从上表。有几个用户的 4 件产品将在接下来的 30 天内过期。

1.  **约翰**= exp_product1, exp_product2
2.  **Alice** = exp_product1 和
3.  **布鲁斯**= exp_product1

所以我写道：

```
 SELECT count(*) AS exp_pax1 
FROM   user_db 
WHERE exp_product1<=timestampadd(day, 30, now())
       AND exp_product1 >= now();

SELECT count(*) AS exp_pax2 
FROM   user_db 
WHERE exp_product2<=timestampadd(day, 30, now())
       AND exp_product2 >= now();

SELECT count(*) AS exp_pax3 
FROM   user_db 
WHERE exp_product3<=timestampadd(day, 30, now())
       AND exp_product3 >= now(); 
```

然后我将这些结果与 PHP 相加：（假设已获取值）

```
$exp_pax1=exp_pax1
$exp_pax2=exp_pax2
$exp_pax3=exp_pax3

$total_exp=$exp_pax1+$exp_pax2+$exp_pax3;//4 
```

好吧，问题是：如何将这些行缩短为单个 mySQL 命令？请建议。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:20:29.733

您可以将 count(*) 替换为 sum(YOUR CONDITION) 以获取匹配行的计数...因此，您的查询可能会更改为

```
SELECT sum(exp_product1<=timestampadd(day, 30, now()) AND exp_product1 >= now()) AS exp_pax1 
 FROM   user_db 
```

现在您可以添加产品 2 和 3 并获得总计

```
SELECT sum(exp_product1<=timestampadd(day, 30, now()) AND exp_product1 >= now()) + 
    sum(exp_product2<=timestampadd(day, 30, now()) AND exp_product2 >= now()) +
    sum(exp_product3<=timestampadd(day, 30, now()) AND exp_product3 >= now())
    AS exp 
FROM   user_db 
```

# android - 将活动绑定到android中正在运行的服务

> ID：14984608
> 
> 赞同：3
> 
> 时间：2013-02-20T16:13:24.343
> 
> 标签：android, service, notifications

我有一个在启动时启动的服务 S。它有一个 contentobserver C，它启动一个 intentservice X 来做一些处理。默认活动 A 由用户启动。

我想知道是否可以将 A 绑定到正在运行的服务 S 而不停止它，以便我可以将结果接收器 R 传递给 S，而 S 又必须传递给 X。

我想实现这一点，以便我可以再次启动 X，这次没有 C，从绑定服务 S 和 R 作为一个 parcelable extra。通过 R，每当运行时，进度对话框都会在 A 中更新。

在尝试使用 resultreceivers 运气之前，我使用的是来自支持库的通知。但问题是我正在为循环的每次迭代再次构建和显示它们。警报声反复播放了 300 多次，这令人不快。

尝试了广播的运气，但我有一些不好的经历。所以把它们扔掉了。

有没有其他方法可以解决这个问题？如果有办法通过重新构建来更新通知，我的问题就可以解决。

我正在使用 4.1.1 版本的 API 16，其中 setlatesteventinfo 似乎已被弃用。

我仍然愿意回到更新正在运行的通知的想法。或不同的解决方法。任何帮助将不胜感激。

编辑：

使用通知是实现此应用程序的一种方式，其中不需要 resultreceiver 和 ibinder 接口。

我在 API 级别 16 中找不到 setlatesteventinfo。我正在尝试使用 v4 支持库。在我的实现中，我为循环的每次迭代构建了一个新通知。但是我还没有想出一种方法来只在第一次而不是其余的时候保持声音警报。有没有人成功正确更新通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:20:17.230

> 我想知道是否可以将 A 绑定到正在运行的服务 S 而无需停止它

这当然是可能的。正如 Hoan 指出的那样，您需要从您的活动中调用 bindService() 。[本文](http://developer.android.com/guide/components/bound-services.html)有一些关于如何做到这一点的示例代码。

至于您的其余问题，似乎可以分解为几个新问题。真的很难同时理解和回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-29T22:51:10.593

[绑定服务](http://developer.android.com/guide/components/bound-services.html#Binding)上的 android 文档说：

> 第三个参数是指示绑定选项的标志。它通常应该是 BIND_AUTO_CREATE 以便在服务尚未激活时创建服务。

仍然必须确认服务 S 的 onCreate() 不会再次被调用。

# java - 播放暂停单键

> ID：14984609
> 
> 赞同：0
> 
> 时间：2013-02-20T16:13:23.903
> 
> 标签：java, android, button, media-player, playback

我正在尝试在单个按钮中实现播放/暂停，但是当我再次尝试按下它时，它只会再次为歌曲加注星标，并与声音播放重叠。我有搜索方法并尝试过这种方法，它似乎对我不起作用。谢谢你

```
private OnClickListener handler1 = new OnClickListener(){
    public void onClick(View v){
    MediaPlayer mpE = MediaPlayer.create(GuitarTuner.this, R.raw.test2 );

        if (mpE.isPlaying()) {
            mpE.pause();
       } else {
           mpE.start();
       }

    }
};" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:43:52.583

您每次都在创建媒体播放器。而是尝试移动

`MediaPlayer mpE = MediaPlayer.create(GuitarTuner.this, R.raw.test2 );`

到处理程序之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T05:27:29.327

```
 MediaPlayer mpE = MediaPlayer.create(GuitarTuner.this, R.raw.test2 );

        play.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (mpE.isPlaying()) {
                    mpE.pause();
                    play.setBackgroundResource(R.drawable.play);
                } else {

                    mpE.start();
                    play.setBackgroundResource(R.drawable.pause);
                }

            }
        }); 
```

# arrays - 如何从 MATLAB 中的多个结构体数组中读取特定字段？

> ID：14984610
> 
> 赞同：1
> 
> 时间：2013-02-20T16:13:26.240
> 
> 标签：arrays, matlab, structure

我有一个非常大的数据集，在 MATLAB 中排列成多个结构数组。结构看起来像这样：

```
Flight1=   

.testpoint = 1
.Mach = 0.8
.Speed = 300
.Cieling = 35000
.Data = [A] % A is an MxN matrix 
```

同样，多次飞行也有多个测试点。有没有办法只检索指定测试点的数据？例如，我想查看 .Mach = 0.8 或 .testpoint = 2 的所有测试点的数据？

我希望我已经说得够清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:05:42.857

假设您有一个结构数组`Flight`，其中`Flight( k )`包含您描述的字段的结构，那么：

```
sel = [ Flight(:).Mach ] == 0.8; % select all flights with Mach == 0.8
poitEightMach = Flight( sel );   % selecting them into a separate struct array

sel = [Flight(:).testpoint] == 2;
testPoint2 = Flight( sel );   % select all flights with testpoint == 2 
```

# android - maps.yponResume(Unknown Source) 上的 NulPointerException 为 OSMDroid 实现片段

> ID：14984617
> 
> 赞同：0
> 
> 时间：2013-02-20T16:13:37.927
> 
> 标签：android, osmdroid, mapfragment

我目前正在尝试将我的 OSMDroid 地图活动转移到片段中。似乎一切都已正确设置，但我得到了这个奇怪的 NullPointerException ，我不确定是否能解决。

```
02-20 23:59:36.140: E/AndroidRuntime(970): FATAL EXCEPTION: main
02-20 23:59:36.140: E/AndroidRuntime(970): java.lang.NullPointerException
02-20 23:59:36.140: E/AndroidRuntime(970):  at maps.y.p.onResume(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:115)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.os.Binder.transact(Binder.java:297)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onResume(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.maps.SupportMapFragment$a.onResume(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.internal.d$1.a(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.internal.d.a(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.internal.d.onResume(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.google.android.gms.maps.SupportMapFragment.onResume(Unknown Source)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:918)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.os.Handler.handleCallback(Handler.java:605)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.os.Looper.loop(Looper.java:137)
02-20 23:59:36.140: E/AndroidRuntime(970):  at android.app.ActivityThread.main(ActivityThread.java:4511)
02-20 23:59:36.140: E/AndroidRuntime(970):  at java.lang.reflect.Method.invokeNative(Native Method)
02-20 23:59:36.140: E/AndroidRuntime(970):  at java.lang.reflect.Method.invoke(Method.java:511)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-20 23:59:36.140: E/AndroidRuntime(970):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-20 23:59:36.140: E/AndroidRuntime(970):  at dalvik.system.NativeStart.main(Native Method)
02-20 23:59:36.225: E/android.os.Debug(29093): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error 
```

这是我的片段类代码的一部分：

```
public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState) {

    final View view = inflator.inflate(R.layout.offline_map_activity, container, false);

    myOpenMapView = (MapView) view.findViewById(R.id.openmapview);

    mResourceProxy = new DefaultResourceProxyImpl(getSherlockActivity().getApplicationContext());
    myOpenMapView.getTileProvider().clearTileCache();

    File aFile = new File(Environment.getExternalStorageDirectory().toString() + 
            "/test/offlineMap/" + tID + ".zip");
    IArchiveFile[] myArchives = new IArchiveFile[1];
    myArchives[0] = ArchiveFileFactory.getArchiveFile(aFile);
    MyTileSource myTiles = new MyTileSource( "" + tID, null, 12, 12, 256, ".png");
    MapTileModuleProviderBase[] myProviders = new MapTileModuleProviderBase[2];
    myProviders[0] = new MapTileFileArchiveProvider(new SimpleRegisterReceiver(getSherlockActivity().getApplicationContext()), 
            myTiles, myArchives);
    myProviders[1] =  new MapTileDownloader(TileSourceFactory.MAPNIK);
    MapTileProviderArray MyTileProvider = new MapTileProviderArray(myTiles,null, myProviders);
    TilesOverlay MyTilesOverlay = new TilesOverlay(MyTileProvider, getSherlockActivity().getApplicationContext());
    //codes continue...

    return view;
} 
```

如果需要显示更多代码，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T17:08:25.940

我想你可能只是错过了这个，它在我的有类似问题的情况下修复了它。

```
super.onCreateView(inflater, container, savedInstanceState); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:04:35.533

我所做的是在代码而不是 xml 中创建 Osmdroid mapview。您可以尝试这样做，然后将视图添加到您希望 Osmdroid mapview 驻留的容器中。这样，您还可以更轻松地测试所有内容。

一个例子：

```
 setContentView(R.layout.main);
    RelativeLayout mapContainer = (RelativeLayout)
    findViewById(R.id.osm_map_container);

    final Harbor harbor = getHarbor();

    mMapView = new MapView(this, 256);  // you can supply other parameters here as well.
    LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    mMapView.setLayoutParams(params);
    mapContainer.addView(mMapView); 
```

# java - Java - 数组 JList，打印出一个值

> ID：14984618
> 
> 赞同：0
> 
> 时间：2013-02-20T16:13:38.317
> 
> 标签：java, jlist

我有一个用数组填充的 JList。我只想在用户选择列表中的某些内容并按下按钮时打印该值。我知道这与 getSelectedValues 有关。当我在网上搜索时，我得到了用 addItems 填充的 JLists 的解决方案，但在用 Array 填充时却没有。

这是此刻按钮的代码：

```
 public void actionPerformed(ActionEvent evt) {
                Object[] selected = FilmList.getSelectedValues();
                String[] selectedItems = new String[selected.length];               
                System.out.println(selectedItems);

            } 
```

我的 JList 的名称是 FilmList，我的数组的名称是电影。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:45:53.087

```
 public void actionPerformed(ActionEvent evt) {
            Object[] selectedFilms = FilmList.getSelectedValues();
            for(int i = 0; i < selectedFilms.length; i++)
                System.out.print(selectedFilms[i].toString + ", ");
            System.out.println();
    } 
```

可能你能做的更短吗？像这样的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:18:52.950

**编辑**
你应该使用
`Object[] selected = FilmList.getSelectedValues(); System.out.println(java.util.Arrays.toString(selected));`

**或者**如果你想将它存储在 String 数组中，你可以这样做：

```
String[] selectedItems = new String[selected.length]; 
for (int i = 0 ; i < selectedItems.length ; i++)
{
 selectedItems[i] = (String)selected[i];
} 
```

然后你可以打印相同的：

```
System.out.println(Arrays.toString(selectedItems)); 
```

您还可以使用 for 循环将值打印为：

```
for (int i =0; i < selectedItems.length ; i++)
System.out.println(selectedItems[i])); 
```

# javascript - 骨干.js model.set 没有持久化这些值

> ID：14984619
> 
> 赞同：0
> 
> 时间：2013-02-20T16:13:42.500
> 
> 标签：javascript, backbone.js

```
extendModel: function (Model) {
        _.extend(Model.prototype, {
             saveSettings: function (value1,value2,value3,value4) {
                this.set({
                    "field1": siteId,
                    "field2": value2,
                    "field3": value3,
                    "field4": value4
                });
               this.save();
            }
        });
        return Model;
    } 
```

1.  我在我的函数中获取值，但无法将值保留回模型中。我在这里做错了什么。
2.  如果我不进行任何 API 调用，是否需要调用 this.save()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:22:28.330

您是否将正确的 ajax 调用返回到您的服务器？如果没有，您是否检查过模型的 url 属性？此外，使用您的浏览器 javascript 控制台验证是否正在执行正确的 ajax 类型调用。

# php - 如何使用 foreach 或 SPL 在每两个项目中添加一个 html 元素？

> ID：14984625
> 
> 赞同：0
> 
> 时间：2013-02-20T16:14:10.557
> 
> 标签：php, foreach, spl

如何在每**两次**迭代中中断循环并添加一个 html 元素？一个简单的可以`foreach`做到这一点`SPL`吗？

```
<?php foreach($items as $index=>$item): ?>
     <li>$item->title</li>
     <?php if($index + 1 = 2):?>
     <div class="divider"></div>
     <?php endif;?> 
<?php endforeach;?> 
```

html结果，

```
<li>title 1</li>
<li>title 2</li>
<div class="divider"></div>
<li>title 3</li>
<li>title 4</li>
<div class="divider"></div>
<li>title 5</li>
<li>title 6</li>
<div class="divider"></div> 
```

**编辑：**

```
<li>title 1</li>
<li>title 2</li>
<li>title 3</li>
<div class="divider"></div>
<li>title 4</li>
<li>title 5</li>
<div class="divider"></div>
<li>title 6</li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:17:09.123

```
<?php foreach($items as $index=>$item){ ?> 

<li>$item->title</li>

if ($index != 0 && $index%2 == 0){?><div class="divider"></div><?php} 

}?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:33:09.380

对于这个结果：

```
<li>title 1</li>
<li>title 2</li>
<div class="divider"></div>
<li>title 3</li>
<li>title 4</li>
<div class="divider"></div>
<li>title 5</li>
<li>title 6</li>
<div class="divider"></div> 
```

使用模数 2 执行此操作：

```
<?php 
foreach($items as $index=>$item) {
  if ($îndex % 2 = 0) {
?>
<?php // <!-- ADD HTML HERE !> ?>
<li>$item->title</li>
<?php
  } else {
?>
<li>$item->title</li>
<?php
  }
}
?> 
```

对于这个结果：

```
<li>title 1</li>
<li>title 2</li>
<li>title 3</li>
<div class="divider"></div>
<li>title 4</li>
<li>title 5</li>
<div class="divider"></div>
<li>title 6</li> 
```

跳过第一个索引和模数 2 来做到这一点：

```
<?php 
foreach($items as $index=>$item) {
  if ($îndex != 0 && $îndex % 2 = 0) {
?>
<?php // <!-- ADD HTML HERE !> ?>
<li>$item->title</li>
<?php
  } else {
?>
<li>$item->title</li>
<?php
  }
}
?> 
```

# jquery - 在 jQuery 中编写 $(document) 是否有更短的方法？

> ID：14984629
> 
> 赞同：0
> 
> 时间：2013-02-20T16:14:25.603
> 
> 标签：jquery

有没有更短的方法在 jQuery 中编写 $(document)。我要替换我所有的

```
$("#id").live(...) 
```

功能要求

```
$(document).on("touchstart click" ...) 
```

并希望节省宝贵的按键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:16:12.443

您可以将其缓存在变量中：

```
var $d = $(document); 
```

然后只需`$d`在代码中的其他地方使用它即可。所以：

```
$d.on('events', 'selector', function() {...}); 
```

但是，在使用时，`.on()`您应该理想地将事件处理程序绑定到比文档更靠近动态元素的静态元素上，因此它不必在被处理之前在 DOM 树上走这么远。

# php - 如何使脚本递归

> ID：14984631
> 
> 赞同：0
> 
> 时间：2013-02-20T16:14:29.807
> 
> 标签：php, google-places-api

我想知道是否有人可以帮助我微调我的脚本。

我有我需要的东西，但我只是想弄清楚如何让它递归。

例如，我目前有：

```
$key    = 'XXXXXXXXXXXX';
$sensor = 'false';
$query  = 'Place 1';

$url = 'https://maps.googleapis.com/maps/api/place/textsearch/json?key='.$key.'&query='.urlencode($query).'&sensor='.$sensor;

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$places = curl_exec($ch);
curl_close($ch);

// echo $url;

$output = json_decode($places);

$i = 0;

while ($output->results[$i]->geometry->location->lat != '') {
    echo '<strong>' . $query . '</strong><br />';
    echo $output->results[$i]->geometry->location->lat . ', '. $output->results[$i]->geometry->location->lng;
    echo '<br />' . $output->results[$i]->formatted_address;
    echo '<hr />';

    $i++;
}

// there is a delay between when the next page token is given and when it is ready to be accessed
sleep(5);

if ($output->next_page_token != '') {

    $url = 'https://maps.googleapis.com/maps/api/place/textsearch/json?pagetoken='.$output->next_page_token.'&key='.$key.'&sensor='.$sensor;

    // repeating myself now!

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $places = curl_exec($ch);
    curl_close($ch);

    $output = json_decode($places);

    $i = 0;

    while ($output->results[$i]->geometry->location->lat != '') {
        echo '<strong>' . $query . '</strong><br />';
        echo $output->results[$i]->geometry->location->lat . ', '. $output->results[$i]->geometry->location->lng;
        echo '<br />' . $output->results[$i]->formatted_address;
        echo '<hr />';

        $i++;
    }

} 
```

所以，理想情况下，我正在研究如何重组，以便只要有下一页令牌，上述内容就会运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:18:22.733

至少你可以`if`用`while`. 并且也许将 while 的主体重新分解为一个函数。

但是您不需要递归调用它，只需迭代直到完成（即不再有下一页标记）

```
function doQuery($url)
{
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $places = curl_exec($ch);
    curl_close($ch);

    $output = json_decode($places);

    $i = 0;

    while ($output->results[$i]->geometry->location->lat != '') {
        echo '<strong>' . $query . '</strong><br />';
        echo $output->results[$i]->geometry->location->lat . ', '. $output->results[$i]->geometry->location->lng;
        echo '<br />' . $output->results[$i]->formatted_address;
        echo '<hr />';

        $i++;
    }

    sleep(5);

    return $output->next_page_token;
}

$next_page_token = doQuery($url);

while ($next_page_token != '') 
{
   $url = 'https://maps.googleapis.com/maps/api/place/textsearch/json?pagetoken='.$next_page_token.'&key='.$key.'&sensor='.$sensor;

   $next_page_token = doQuery($url);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:23:29.840

将您的逻辑封装在一个函数中，然后在您有下一页标记时循环：

```
function doWorkAndPrint( $url, $query) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $places = curl_exec($ch);
    curl_close($ch);

    $output = json_decode($places);

    $i = 0;

    while ($output->results[$i]->geometry->location->lat != '') {
        echo '<strong>' . $query . '</strong><br />';
        echo $output->results[$i]->geometry->location->lat . ', '. $output->results[$i]->geometry->location->lng;
        echo '<br />' . $output->results[$i]->formatted_address;
        echo '<hr />';

        $i++;
    }

    return $output->next_page_token;
} 
```

现在，您只需要在该函数返回有用的东西时循环。既然你想至少做一次，我会使用一个`do ... while`循环：

```
$key    = 'XXXXXXXXXXXX';
$sensor = 'false';
$query  = 'Place 1';

do {
    $url = 'https://maps.googleapis.com/maps/api/place/textsearch/json?pagetoken='.$query.'&key='.$key.'&sensor='.$sensor;
    $query = doWorkAndPrint( $url, $query);
} while( $query != ''); 
```

# python - 如何从forms.ModelForm中的模型中获取字段

> ID：14984632
> 
> 赞同：1
> 
> 时间：2013-02-20T16:14:30.793
> 
> 标签：python, django, django-forms

我想获取名为“some_attribute”的表单字段的值。我试试这个`self.Meta.model.some_attribute`：

```
class TestModel(models.Model):
    some_attribute = models.CharField(max_length=255)

class TestForm(forms.ModelForm):

    def save(self, *args, **kwargs):
        super(TestForm, self).save(*args, **kwargs)
        send_mail('topic', self.Meta.model.some_attribute, 'xxx@yyyy.com', ['xxx@yyyy.com'],
              fail_silently=False)

    class Meta:
        model = TestModel 
```

这会导致错误：“EnrollInEventForm”对象没有属性“some_attribute”。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:18:29.263

我偶尔会从视图内的表单中删除特定值。我通过使用`form.data`字典来做到这一点。在您的情况下，其中一个键应该是`some_attribute`. 这种方法可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:20:35.470

可能是`some_attribtue`Model 类拼错了，t 和 u 互换了。

# ajax - 分批发送 3 或 5 个 ajax 请求

> ID：14984633
> 
> 赞同：0
> 
> 时间：2013-02-20T16:14:47.013
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery

我在 asp.net mvc 范式中。根据我的一种观点，我有两个字段`Start Number`和`End Number`. 允许用户在这些字段中输入数值，当他单击提交按钮时，我必须从 startNumber 循环到 endNumber 并为循环的每次迭代发送一个 ajax 请求。

我有一个场景，开始编号和结束编号之间的差异可能在 100 之间，所以我计划以 3 或 5 个批次发送 ajax 请求。例如，我将发送三个请求并等待它们完成，然后，我需要发送下三个，直到循环完成。我不知道如何针对这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:19:19.773

我建议您发送一个包含所有必要信息的 AJAX 请求，而不是用多个 AJAX 请求锤击您的服务器。这将比发送具有较小有效负载的多个请求更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:01:53.473

创建一批 3 或 4 个请求，并使用下面的示例代码来检测 AJAX 请求是否完成。

```
$( ".log" ).ajaxStop(function() {
  $(this).text( "Triggered ajaxStop handler." );
}); 
```

在完成所有请求后，调用另一批。

# html - CSS 从数组中选择随机颜色

> ID：14984643
> 
> 赞同：25
> 
> 时间：2013-02-20T16:15:15.390
> 
> 标签：html, css

CSS中有没有办法让它从数组中选择随机字体颜色？我知道我可以使用服务器端或 javascript 来做到这一点，但我想知道是否有纯 CSS 方式来做到这一点。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-20T16:31:29.170

CSS 表达式（允许通过 CSS 实现动态脚本内容）是与 Web 表单一起陷入低效地狱的可憎之物，只有 IE7 及以下版本才支持。但是既然你问了。

```
<style>
blink marquee {
   color: expression("rgb(" + Math.floor(Math.random() * 255)
      + "," + Math.floor(Math.random() * 255) + ","
      + Math.floor(Math.random() * 255) + ")");
}
</style>
<blink>
   <marquee>
      color me beautiful
   </marquee>
</blink> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-20T16:16:21.220

这在具有确定性的 CSS 中是不可能的。不过，您可以使用客户端 JavaScript 执行此操作：

```
var colors = ['#ff0000', '#00ff00', '#0000ff'];
var random_color = colors[Math.floor(Math.random() * colors.length)];
document.getElementById('title').style.color = random_color; 
```

如果你使用 jQuery，最后一行可能变成

```
$('#title').css('color', random_color); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T16:21:57.897

使用 JQuery 在 JavaScript 中很简单。

您可以执行以下操作：

```
var hexArray = ['#hexVal','#hexVal','#hexval', '#hexval']
var randomColor = hexArray[Math.floor(Math.random() * hexArray.length)];

$("#divId").css("color",randomColor); //A class selector would work too 
```

每次刷新页面时都会选择一种新颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-20T10:24:11.683

我就是这样做的。

第一部分是顺序，元素 1 得到颜色 1 等。

然后当你没有颜色时，它会随机化它。

```
//Specify the class that you want to select
var x = document.getElementsByClassName("ms-webpart-chrome-title");
var i;
var c;

//specify the colors you want to use
var colors = ["#009933", "#006699", "#33cccc", "#99cc00", "#f60"];
var d = colors.length;

for (i = 0; i < x.length; i++){
    while (i < d) {
        c = i;
        var random_color = colors[c];
        x[i].style.borderTopColor = random_color;
        i++;
    }
    while (i >= d) {
        var random_color = colors[Math.floor(Math.random() * colors.length)];
        x[i].style.borderTopColor = random_color;
        i++;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T05:59:43.453

不使用预定义的颜色集，以获得均匀随机的颜色函数

```
function randomColor(){
    rc = "#";
    for(i=0;i<6;i++){
        rc += Math.floor(Math.random()*16).toString(16);
    }
    return rc;
} 
```

或内联

```
"#"+Math.floor(Math.random() * 0x1000000).toString(16) 
```

# json - 在 perl 中操作 JSON 以纠正格式

> ID：14984644
> 
> 赞同：1
> 
> 时间：2013-02-20T16:15:18.600
> 
> 标签：json, perl

我有一个打印的 JSON

```
{"d":{"success":true,"drivers":[{"FIRST_NAME":"JOHN","LAST_NAME":"SMITH"},{"FIRST_NAME":"JANE","LAST_NAME":"DOE"}]}} 
```

名称会根据在数据库中找到的内容而变化。对于 JSON 中返回的每个结果，我需要以这种格式推送：

```
push(@$dummy_data, {'name' => 'testname', 'key' => 'somekey-1234'});
push(@$dummy_data, {'name' => 'testname2', 'key' => 'somekey-5678'}); 
```

所以对于这个例子，它将是 John Smith 代替 testname 和 Jane 代替 testname2 我将如何为 json 中的每个名字和姓氏以上述格式推送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:32:32.953

## 让我们试试这个新游戏

```
use strict; use warnings;
use JSON::XS;
use Data::Dumper;

# creating reference to a void ARRAY
my $dummy_data = [];

# creating $json string
my $json = '{"d":{"success":true,"drivers":[{"FIRST_NAME":"JOHN","LAST_NAME":"SMITH"},{"FIRST_NAME":"JANE","LAST_NAME":"DOE"}]}}';

# converting JSON -> Perl data structure
my $perl_hash = decode_json $json;

# feeding $dummy_data ARRAY ref with a HASH
push @$dummy_data, {
    name => $perl_hash->{d}->{drivers}->[0]->{FIRST_NAME},
    key => $perl_hash->{d}->{drivers}->[1]->{FIRST_NAME}
};

# print what we have finally
print Dumper $dummy_data; 
```

## 输出

```
$VAR1 = [
          {
            'name' => 'JOHN',
            'key' => 'JANE'
          }
        ]; 
```

# c - 子进程执行fork调用之前编写的语句

> ID：14984646
> 
> 赞同：3
> 
> 时间：2013-02-20T16:15:25.820
> 
> 标签：c, fork, ipc

我正在我的代码中创建子进程。当我调用 fork() 时，子进程应该从下一条语句开始执行，但在我的代码中，子进程在 fork 调用之前执行语句。

```
#include<stdio.h>
int main()
{
int pid;
FILE *fp;
fp = fopen("oh.txt","w");
fprintf(fp,"i am before fork\n");
pid = fork();
        if(pid == 0)
        {
                fprintf(fp,"i am inside child block\n");
        }
        else{
                fprintf(fp,"i inside parent block\n");
        }
fprintf(fp,"i am inside the common block to both parent and child\n");
fclose(fp);
return 0;
} 
```

这是我得到的输出

# 输出：

```
i am before fork
i inside parent block
i am inside the common block to both parent and child
i am before fork
i am inside child block
i am inside the common block to both parent and child 
```

“我在 fork 之前”这一行应该在文件中写入一次，但由孩子和父母写入两次。为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:17:35.103

这可能是一个缓冲问题。`fprintf`不会立即写入文件，而是缓冲输出。当 you 时`fork`，您最终会得到两个缓冲区副本。

尝试`fflush(fp)`在分叉前做一个，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:17:29.303

我猜这是因为您使用 打印`fprintf`，它被缓冲但不打印，然后在刷新缓冲区时在子进程中打印。

# cron - Cron 作业超出时间间隔

> ID：14984650
> 
> 赞同：5
> 
> 时间：2013-02-20T16:15:44.140
> 
> 标签：cron

假设您配置了一个 cron 作业以每分钟运行一次来​​做某事。如果实际任务运行时间超过一分钟会发生什么？cron 会创建另一个作业实例/线程吗？还是 cron 会等待并确保之前的运行完成？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:20:05.960

您必须处理这种情况，不确定 linux 是否会优雅地处理它。通过在运行您的任务之前添加一个简单的检查，该任务尚未运行。如果你不这样做，地狱可能会在你的服务器上崩溃。

这篇文章将帮助您[仅在尚未运行时运行 cron 作业](https://stackoverflow.com/questions/2366693/run-cron-job-only-if-it-isnt-already-running?rq=1)

# android - android GCM 服务（生产密钥与开发密钥）

> ID：14984654
> 
> 赞同：3
> 
> 时间：2013-02-20T16:15:51.443
> 
> 标签：android, google-cloud-messaging

我知道对于 iOS，您需要为不同的环境生成不同的密钥。这对于带有谷歌云消息传递的 android 是否相同？

我即将准备好启动我的应用程序，只需要知道我是否需要将我的密钥更新为“生产”密钥与我一直在开发和测试的密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:25:41.753

不，你没有。在 gcm 中，您只需要来自 api 控制台的 Api id。在您的 api 控制台中，它称为项目编号。

# android - 各种语言、场景的android strings.xml

> ID：14984659
> 
> 赞同：1
> 
> 时间：2013-02-20T16:16:04.917
> 
> 标签：android, localization, locale

我有一个 strings.xml 问题

我的应用程序是英文的。

`values/strings.xml`是英文的

应用程序中还有许多其他语言

我最新的字符串键添加在`values-en/strings.xml`英语语言环境文件夹中，但不在`values`默认语言文件夹中

这将如何影响加载视图的非英语用户尝试访问仅在中定义的字符串`values-en`？操作系统会在那个文件中找到字符串并用英文显示吗？

这对我来说很棘手，因为它不在默认值 xml 文件中

感谢您的洞察力

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:31:32.947

将字符串系统想象为一系列 if 条件。首先我们检查用户的语言，一旦我们检查了该特定语言的文件夹是否包含我们正在寻找的字符串。如果是，我们返回那个字符串，否则我们默认检查“values”文件夹。

```
if (language.equals("en") {
   stringsFolders = "values-en";
} else if (language.equals("es") {
   stringsFolders = "values-es";
} 

if (stringsFolder.contains(key) {
    return stringsFolder.get(key);
} else if ("values".contains(key) {
    return "values".get(key);
} else {
    throw CantFindException();
} 
```

如果一个字符串属于 values-en 并且西班牙用户查找它，他们将没有机会检查 values-en 文件夹，因为他们没有资格获得它。或者，默认情况下始终选中“值”文件夹，因此将其放置在该文件夹中适用于所有语言

# java - 删除 Java 中的尾随零

> ID：14984664
> 
> 赞同：48
> 
> 时间：2013-02-20T16:16:20.427
> 
> 标签：java, regex, string

我有字符串（来自 DB），其中可能包含数值。如果它包含数值，我想删除尾随零，例如：

*   `10.0000`
*   `10.234000`

`str.replaceAll("\\.0*$", "")`, 适用于第一个，但不适用于第二个。

很多答案都指向使用`BigDecimal`，但`String`我得到的可能不是数字。所以我认为更好的解决方案可能是通过正则表达式。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-02-20T16:42:50.830

有几种可能：

```
1000    -> 1000
10.000  -> 10 (without point in result)
10.0100 -> 10.01 
10.1234 -> 10.1234 
```

我又懒又笨，只是

```
s = s.indexOf(".") < 0 ? s : s.replaceAll("0*$", "").replaceAll("\\.$", ""); 
```

使用相同的解决方案，`contains`而不是`indexOf`某些评论中提到的，以便于理解

```
 s = s.contains(".") ? s.replaceAll("0*$","").replaceAll("\\.$","") : s 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-20T19:50:29.617

使用**DecimalFormat**，它最干净的方式

```
String s = "10.1200";
DecimalFormat decimalFormat = new DecimalFormat("0.#####");
String result = decimalFormat.format(Double.valueOf(s));
System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-06-16T12:47:30.387

[肯特的](https://stackoverflow.com/users/164835/kent)字符串操作答案神奇地起作用并且还迎合精度损失，但这是使用 BigDecimal 的更清洁的解决方案

```
String value = "10.234000";
BigDecimal stripedVal = new BigDecimal(value).stripTrailingZeros(); 
```

然后您可以转换为其他类型

```
String stringValue = stripedVal.toPlainString();
double doubleValue = stripedVal.doubleValue();
long longValue = stripedVal.longValue(); 
```

如果精度损失是您最终关心的问题，那么请获得确切的原始值。如果原语有任何精度损失，这将抛出 ArithmeticException。见下文

```
int intValue = stripedVal.intValueExact(); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-13T10:49:27.850

```
String value = "10.010"
String s = new DecimalFormat("0.####").format(Double.parseDouble(value));
System.out.println(s);

Output:

   10.01 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-13T20:04:48.230

我发现所有其他解决方案都太复杂了。简单地

```
s.replaceFirst("\\.0*$|(\\.\\d*?)0+$", "$1"); 
```

做这项工作。它首先尝试第一个替代方案，因此后跟全零的点会被任何内容替换（因为未设置组）。否则，如果它找到一个点后跟一些数字（由于惰性量词而尽可能少`*?`），然后是一些零，则这些零将被丢弃，因为它们不包含在组中。[它有效](https://dl.dropboxusercontent.com/u/4971686/published/maaartin/so/RemoveTrailingZerosTest.java)。

### 警告

我的代码依赖于我的[假设，即附加一个不匹配的组什么都不做](https://stackoverflow.com/q/27439931/581205)。这适用于 Oracle 实现，但不适用于其他实现，包括**Android**，它们似乎附加了字符串“null”。我认为这些实现被破坏了，因为它可能没有意义，但[根据 Javadoc 它们是正确的](https://stackoverflow.com/a/27440141/581205)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-08T14:07:35.753

以下适用于以下所有示例：

```
"1" -> "1"
"1.0" -> "1"
"1.01500" -> "1.015"
"1.103" -> "1.103"

s = s.replaceAll("()\\.0+$|(\\..+?)0+$", "$2"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T16:20:19.287

换了怎么办

```
(\d*\.\d*)0*$ 
```

经过

```
\1 
```

?

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-20T16:23:20.537

您可以替换为：

```
String result = (str.indexOf(".")>=0?str.replaceAll("\\.?0+$",""):str); 
```

使正则表达式尽可能简单。（并考虑`1000`评论中指出的输入）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-12T12:54:23.787

我的实现有可能在除法器后选择位数：

```
public static String removeTrailingZero(String number, int minPrecise, char divider) {
    int dividerIndex = number.indexOf(divider);

    if (dividerIndex == -1) {
        return number;
    }

    int removeCount = 0;
    for (int i = dividerIndex + 1; i < number.length(); i++) {
        if (number.charAt(i) == '0') {
            removeCount++;
        } else {
            removeCount = 0;
        }
    }

    int fracLen = number.length() - dividerIndex - 1;

    if (fracLen - removeCount < minPrecise) {
        removeCount = fracLen - minPrecise;
    }

    if (removeCount < 0) {
        return number;
    }

    String result = number.substring(0, number.length() - removeCount);

    if (result.endsWith(String.valueOf(divider))) {
        return result.substring(0, result.length() - 1);
    }

    return result;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-25T06:54:37.167

除了**肯特**的回答。

小心**Kotlin**中的正则表达式。您必须手动编写`Regex()`构造函数而不是简单的字符串！

```
s = if (s.contains(".")) 
        s.replace(Regex("0*\$"),"").replace(Regex("\\.\$"),"") 
    else s 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-08-19T21:59:14.420

先分离出分数部分。然后你可以使用下面的逻辑。

```
BigDecimal value = BigDecimal.valueOf(345000);
BigDecimal div = new BigDecimal(10).pow(Integer.numberOfTrailingZeros(value.intValue()));
System.out.println(value.divide(div).intValue()); 
```

# ruby - HTTParty::get 返回什么？

> ID：14984666
> 
> 赞同：2
> 
> 时间：2013-02-20T16:16:21.803
> 
> 标签：ruby, json, parsing, httparty

我对 Ruby 还是很陌生，并尝试使用 HTTParty gem 来帮助我编写 API Wrapper。我提供 HTTParty::get 一个 URI 并解析 JSON 数据。从快速浏览和返回结果的行为方式来看，它看起来像一个哈希，但它是吗？网上好像查不到资料。StackOverflow 上的另一篇文章显示使用 HTTParty::get(...).parsed_response 来获取哈希，但这似乎已经过时了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:26:19.877

在控制台中执行此操作：

```
>require 'httparty'
 => true
> response = HTTParty.get( "..." )
 ....
> response.class
 => HTTParty::Response 
```

所以来自的响应`HTTParty.get`是一个`HTTParty::Response`对象。

请参阅[这篇题为“HTTParty 的时间到了！”的博文。](http://blog.teamtreehouse.com/its-time-to-httparty)了解有关如何处理此响应的更多信息。

# python - ValueError：缓冲区 dtype 不匹配，预期为“float64_t”但得到“float”

> ID：14984667
> 
> 赞同：6
> 
> 时间：2013-02-20T16:16:21.727
> 
> 标签：python, pandas

有一个 DataFrame 'modtso'：

```
In [4]: modtso
Out[4]: 
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 74006 entries, 2002-07-27 15:00:00 to 2010-12-31 22:58:08
Data columns:
0    74006  non-null values
dtypes: float32(1)

In [5]: modtso[1:10]
Out[5]: 
                         0
2002-07-27 16:01:53   9.336845
2002-07-27 16:58:08   9.337487
2002-07-27 18:00:00   9.343308
2002-07-27 19:01:53   9.364368
2002-07-27 19:58:08   9.389445
... 
```

现在我想重新采样如下：

```
a=modtso.resample('D',how='std') 
```

它会引发异常：

```
ValueError: Buffer dtype mismatch, expected 'float64_t' but got 'float' 
```

有什么问题？我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T03:35:51.947

这在 0.10 中的 0.11-dev 上完全支持我认为它会起作用，但是对于几乎任何操作，您的 float32 将变为 float64

和 FYI 显式转换类型

```
df.astype('float64') 
```

请参阅此处的示例 [http://pandas.pydata.org/pandas-docs/dev/whatsnew.html#v0-11-0-march-2013](http://pandas.pydata.org/pandas-docs/dev/whatsnew.html#v0-11-0-march-2013)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:47:36.720

这样做可以解决这个问题：

```
from numpy import float64
remod=float64(modtso[0]).resample('D',how=['std']) 
```

# jboss7.x - 使用 IP 地址访问 JBoss 7.1.1.Final

> ID：14984676
> 
> 赞同：2
> 
> 时间：2013-02-20T16:16:43.690
> 
> 标签：jboss7.x

如何配置standalone-full.xml 以使用IP 地址从远程机器访问JBoss 7.1.1.Final 服务器？

我尝试将接口中的绑定地址从 127.0.0.1 更改为我的 IP 地址，但没有成功。

```
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:172.x.x.x}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:172.x.x.x}"/>
    </interface>
    <interface name="unsecure">
        <inet-address value="${jboss.bind.address.unsecure:127.0.0.1}"/>
    </interface>
</interfaces> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:07:52.440

我在我的standalone.xml中设置了它

```
<interfaces>
        <interface name="management">
            <inet-address value="${jboss.bind.address.management:0.0.0.0}"/>
        </interface>
        <interface name="public">
            <inet-address value="${jboss.bind.address:0.0.0.0}"/>
        </interface>
        <interface name="unsecure">
            <inet-address value="${jboss.bind.address.unsecure:0.0.0.0}"/>
        </interface>
</interfaces> 
```

0.0.0.0 表示所有接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T19:45:43.357

我的`standalone.xml`样子是这样的：

```
<interfaces>
  <interface name="management">
    <any-address/>
  </interface>
  <interface name="public">
    <any-address/>
  </interface>
  <interface name="unsecure">
    <any-address/>
  </interface>
</interfaces> 
```

`any-address`适用于所有接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-27T06:45:30.487

在启动 JBoss 时，我们也可以使用 -b 0.0.0.0 作为参数，而无需在standalone-full.xml 中进行更改。对我来说很好。

# jquery - jQuery加载默认元素

> ID：14984678
> 
> 赞同：0
> 
> 时间：2013-02-20T16:16:52.343
> 
> 标签：jquery, html, css

嗨，我正在尝试在页面加载时加载默认类，我编写了以下代码，但需要它在将鼠标悬停在其他链接上之前在页面加载上加载 .pu1 内容项，然后在将鼠标悬停在其他链接上时删除：我我迷失了如何做到这一点或搜索什么？

jQuery代码：

```
$(document).ready(function () {
    $('.pua1').hover(function () {
        $('.pu1').show();
    }, function () {
        $(".pu1").hide();
    });
    $('.pua2').hover(function () {
        $('.pu2').show();
    }, function () {
        $(".pu2").hide();
    });
    $('.pua3').hover(function () {
        $('.pu3').show();
    }, function () {
        $(".pu3").hide();
    });
    $('.pua4').hover(function () {
        $('.pu4').show();
    }, function () {
        $(".pu4").hide();
    });
}); 
```

CSS 代码：

```
.pua1, .pua2, .pua3, .pua4 {  }
.pu1, .pu2, .pu3, .pu4 {
      display:none;
} 
```

HTML 代码：

```
<div id="links"> 
    <a href="#" class="pua1">link one</a>
    <a href="#" class="pua2">link two</a>
    <a href="#" class="pua3">link three</a> 
    <a href="#" class="pua4">link four</a>
</div>
<div id="text">
    <div class="pu1">
        <p>text 1</p>
    </div>
    <div class="pu2">
        <p>text 2</p>
    </div>
    <div class="pu3">
        <p>text 3</p>
    </div>
    <div class="pu4">
        <p>text 4</p>
    </div>
</div>
<div id="images">
    <div class="pu1">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu2">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu3">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu4">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:24:04.410

你有没有试过这个？

```
$(document).ready(function() {
    ....

    $('.pu1').show();
}) 
```

**编辑：**添加`$('.pu').hide();`到所有悬停的功能和`pu`所有 div 的类。

```
<script type="text/javascript">
$(document).ready(function(){
    $('.pua1').hover(function(){
        $('.pu').hide();
        $('.pu1').show();
    }, function() {
        $(".pu1").hide();
    });

    $('.pua2').hover(function(){
        $('.pu').hide();
        $('.pu2').show();
    }, function() {
        $(".pu2").hide();
    });

    $('.pua3').hover(function(){
        $('.pu').hide();
        $('.pu3').show();
    }, function() {
        $(".pu3").hide();
    });

    $('.pua4').hover(function(){
        $('.pu').hide();
        $('.pu4').show();
    }, function() {
        $(".pu4").hide();
    });

    $('.pu1').show();
});
</script>

<div id="links"> <a href="#" class="pua1">link one</a>
    <a href="#" class="pua2">link two</a>
    <a href="#" class="pua3">link three</a>
    <a href="#" class="pua4">link four</a>
</div>
<div id="text">
    <div class="pu pu1"><p>text 1</p></div>
    <div class="pu pu2"><p>text 2</p></div>
    <div class="pu pu3"><p>text 3</p></div>
    <div class="pu pu4"><p>text 4</p></div>
</div>
<div id="images">
    <div class="pu pu1"><img src="x/img/cut_03.jpg" width="407" height="344"></div>
    <div class="pu pu2"><img src="x/img/cut_03.jpg" width="407" height="344"></div> 
    <div class="pu pu3"><img src="x/img/cut_03.jpg" width="407" height="344"></div>
    <div class="pu pu4"><img src="x/img/cut_03.jpg" width="407" height="344"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:25:16.743

我修改了您的 html 以降低 Javascript 的复杂性。我还假设您不想在给定时间隐藏所有内容，因为您已经从`.pu1`可见开始。

[jsFiddle 演示](http://jsfiddle.net/ZQuQD/3/)

```
$(document).ready(function () {
    $('.pua').hover(function () {
        $('.pu').hide();
        $('.'+$(this).attr("data-display-class")).show();
    }, function () { });

    $('.pu1').show();
}); 
```

HTML

```
<div id="links"> 
    <a href="#" data-display-class="pu1"  class="pua">link one</a>
    <a href="#" data-display-class="pu2"  class="pua">link two</a>
    <a href="#" data-display-class="pu3"  class="pua">link three</a> 
    <a href="#" data-display-class="pu4" class="pua">link four</a>
</div>
<div id="text">
    <div class="pu1 pu">
        <p>text 1</p>
    </div>
    <div class="pu2 pu">
        <p>text 2</p>
    </div>
    <div class="pu3 pu">
        <p>text 3</p>
    </div>
    <div class="pu4 pu">
        <p>text 4</p>
    </div>
</div>
<div id="images">
    <div class="pu1 pu">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu2 pu">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu3 pu">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
    <div class="pu4 pu">
        <img src="x/img/cut_03.jpg" width="407" height="344">
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:39:07.620

试试这个...

```
$('#links > a').on('hover', function(){
    var index = $(this).attr('class');
    $('.pu'+ index.substring(3)).show();
});

$('#links > a').on('mouseleave', function(){
    var index = $(this).attr('class');
    $('.pu'+ index.substring(3)).hide();
}); 
```

并查看此[jSfiddle 示例](http://jsfiddle.net/ZQuQD/4/)

# python - Django LiveServerTestCase：在 setUpClass 方法中创建的用户在 test_method 中不可用？

> ID：14984683
> 
> 赞同：13
> 
> 时间：2013-02-20T16:17:06.813
> 
> 标签：python, django, selenium, django-testing

我正在使用 Django 1.4 的 LiveServerTestCase 进行 Selenium 测试，并且在使用`setUpClass`类方法时遇到了问题。据我了解`MembershipTests.setUpClass`，在运行单元测试之前运行一次。

我已经将代码添加到数据库中，`MembershipTests.setUpClass`但是当我运行`MembershipTests.test_signup`测试时，没有用户被添加到测试数据库中。***我做错了什么？***我希望我创建的用户`setUpClass`在所有单元测试中都可用。

如果我将用户创建代码放入`MembershipTests.setUp`并运行，`MembershipTests.test_signup`我可以看到用户，但不希望在每个单元测试之前运行`setUp`它。如您所见，我使用自定义 LiveServerTestCase 类在我的所有测试中添加基本功能 ( `test_utils.CustomLiveTestCase`)。我怀疑这与我的问题有关。

提前致谢。

**test_utils.py**：

```
from selenium.webdriver.firefox.webdriver import WebDriver
from django.test import LiveServerTestCase

class CustomLiveTestCase(LiveServerTestCase):

    @classmethod
    def setUpClass(cls):
        cls.wd = WebDriver()
        super(CustomLiveTestCase, cls).setUpClass()

    @classmethod
    def tearDownClass(cls):
        cls.wd.quit()
        super(CustomLiveTestCase, cls).tearDownClass() 
```

**测试.py**：

```
from django.contrib.auth.models import User
from django.test.utils import override_settings
from test_utils import CustomLiveTestCase 
from test_constants import *

@override_settings(STRIPE_SECRET_KEY='xxx', STRIPE_PUBLISHABLE_KEY='xxx')
class MembershipTests(CustomLiveTestCase):

    fixtures = [
        'account_extras/fixtures/test_socialapp_data.json',
        'membership/fixtures/basic/plan.json',
    ]

    def setUp(self):
        pass

    @classmethod
    def setUpClass(cls):
        super(MembershipTests, cls).setUpClass()
        user = User.objects.create_user(
            TEST_USER_USERNAME,
            TEST_USER_EMAIL,
            TEST_USER_PASSWORD
        )

    def test_signup(self):
        print "users: ", User.objects.all() 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T16:36:58.237

数据库被拆除并在每个测试方法上重新加载，而不是在测试类上。因此，您的用户每次都会丢失。不这样`setUp`做`setUpClass`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-21T15:39:25.793

由于您使用的是 LiveServerTestCase，它几乎与 TransactionTestCase 相同，它为每个运行的测试用例创建和销毁数据库（截断表）。

所以你真的不能用 LiveServerTestCase 做全局数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-03T18:22:03.767

您应该能够`TestCase.setUpTestData`按如下方式使用（对基类稍作更改）：

**test_utils.py**：

```
from selenium.webdriver.firefox.webdriver import WebDriver
from django.test import LiveServerTestCase, TestCase

class CustomLiveTestCase(LiveServerTestCase, TestCase):

    @classmethod
    def setUpClass(cls):
        cls.wd = WebDriver()
        super(CustomLiveTestCase, cls).setUpClass()

    @classmethod
    def tearDownClass(cls):
        cls.wd.quit()
        super(CustomLiveTestCase, cls).tearDownClass() 
```

**测试.py**：

```
from django.contrib.auth.models import User
from django.test.utils import override_settings
from test_utils import CustomLiveTestCase
from test_constants import *

@override_settings(STRIPE_SECRET_KEY='xxx', STRIPE_PUBLISHABLE_KEY='xxx')
class MembershipTests(CustomLiveTestCase):

    fixtures = [
        'account_extras/fixtures/test_socialapp_data.json',
        'membership/fixtures/basic/plan.json',
    ]

    @classmethod
    def setUpTestData(cls):
        super(MembershipTests, cls).setUpTestData()
        user = User.objects.create_user(
            TEST_USER_USERNAME,
            TEST_USER_EMAIL,
            TEST_USER_PASSWORD
        )

    def test_signup(self):
        print "users: ", User.objects.all() 
```

您可以从 MembershipTests 中继承而不是更改基类，`TestCase`但是每次需要测试数据时都必须这样做。

请注意，我还删除了`def setUp: pass`，因为这会破坏事务处理。

查看此线程以获取更多详细信息：[https ://groups.google.com/forum/#!topic/django-developers/sr3gnsc8gig](https://groups.google.com/forum/#!topic/django-developers/sr3gnsc8gig)

如果您遇到此解决方案的任何问题，请告诉我！

# .net - 如何按值对包含 ListItems 的 .net Arraylist 进行排序

> ID：14984686
> 
> 赞同：0
> 
> 时间：2013-02-20T16:17:21.923
> 
> 标签：.net, sorting, arraylist

```
 Dim alCustomers as New ArrayList

 Dim li1 As New ListItem("John", 7)
 alCustomers.Add(li1)

 Dim li2 As New ListItem("Abe", 2)
 alCustomers.Add(li2) 
```

如何按值对 alCustomers 数组列表进行排序？

安倍,2

约翰，7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:23:26.423

在带有 .NET 3.5 或更高版本的 C# 中，它的工作方式如下：

```
// Create a list of ListItem objects
List<ListItem> alCustomers = new List<ListItem>();

// Add the list items
alCustomers.Add(new ListItem("John", 7));
alCustomers.Add(new ListItem("Abe", 2));

var orderedCustomers = alCustomers
    // Order the items by their value...
    .OrderBy(item => item.Value)
    // and convert it to a list.
    .ToList(); 
```

不幸的是，由于我使用的最后一个版本的 Visual Basic 是 VB6，我不知道如何翻译它。这是我最好的猜测：

```
// Create a list of ListItem objects
Dim alCustomers as New List(Of ListItem)

// Add the list items
alCustomers.Add(New ListItem("John", 7))
alCustomers.Add(New ListItem("Abe", 2))

Dim orderedCustomers As List(Of ListItem) = alCustomers
    // Order the items by their value...
    .OrderBy(Function(item As ListItem) item.Value)
    // and convert it to a list.
    .ToList(Of ListItem)() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:26:38.140

使用 Linq：

```
alCustomers = alCustomers.OrderBy(Function(item) item.Value) 
```

此解决方案需要 a`List`而不是`ArrayList`.

# embedded - 网络摄像头与 stm32 接口

> ID：14984687
> 
> 赞同：3
> 
> 时间：2013-02-20T16:17:26.183
> 
> 标签：embedded, usb, webcam, stm32, stm32f4discovery

我想使用 STM32F4 微控制器接收视频流，然后使用 rtsp 协议通过以太网流式传输。

我需要你们告诉我，哪种电路最适合与 STM32 连接。

我可以通过 USB OTG 将网络摄像头与 STM32 连接吗？（我对usb协议有基本的想法，但问题是我拥有的网络摄像头不受linux支持所以没有驱动程序的代码源，所以没有端点引用......）

是否可以通过调试 USB 流量来定义触发视频（流）批量传输的端点和特定于供应商的命令？

或者，您会推荐另一种电路，该电路提供易于与 STM32 接口的视频流。

我知道这是一种疯狂的事情，但我想问这会有多难？

让我知道你对这个项目的看法？

PS：项目的rtsp部分不是本题的目的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T09:34:15.967

您无法在 STM32F4 上轻松运行 linux，也无法在其上运行 USB 堆栈，编写自己的网络摄像头驱动程序也不是一件容易的事。我建议使用某种嵌入式摄像头，或者升级到可以支持在其上运行的完整 linux 发行版的处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-17T01:13:41.557

正如 stbtrax 提到的 STM32F4 处理器不能真正处理视频处理，所以你最好转移到嵌入式操作系统系统，如 Odroid。

另一种选择是使用 DCMI 将相机直接连接到 STM32F4，然后像这个人所做的那样使用 UVC 通过 USB 流式传输。您将在此处受到分辨率的限制。 [https://github.com/iliasam/STM32F4_UVC_Camera](https://github.com/iliasam/STM32F4_UVC_Camera)

# java - 如何对 java 方法进行版本控制？

> ID：14984688
> 
> 赞同：0
> 
> 时间：2013-02-20T16:17:26.890
> 
> 标签：java

我需要修改业务规则的方法，同时保持所有以前的版本都可以访问。它们所包含的类将是相同的，但每个方法中的内容会有所不同。我希望它们具有相同的方法签名。调用者将知道它想要执行的版本。我也不想在方法名称中包含 _vX（如下例所示）。有一个更好的方法吗？每个方法上的注释之类的东西会很好，但在简短的测试中似乎不可能使方法足够独特。

```
public class SomeSpecificRule {
     public Response processRule_v1() {
     }
     public Response processRule_v2() {
     }
} 
```

**编辑**：不同方法的原因是方法中包含的逻辑可能在不同时间有效（主要场景），但我们需要能够在任何给定时间（次要）运行任何版本。method_v1 用于 Dates x1-x2，而来自 Dates x2-x3 的 method_v2 将很常见。但是，“我们应该使用哪个版本”给定的日期和其他标准逻辑我希望保持分开，以便其他开发人员可以轻松地创建这些类和其他方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T16:19:54.423

没有任何其他规范，听起来你想使用一个接口：

```
interface Rules {
    Response processRule();
}

class Rules_v1 implements Rules {
    public Response processRule() { ... }
}

class Rules_v2 implements Rules {
    public Response processRule() { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:19:58.123

无法对方法进行版本控制。一个签名只能出现一次。您可以拥有具有相同方法的不同类，并通过工厂或其他方法检索它们，但您不能按照您的要求进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:23:09.573

您可以使用单独的[类加载器](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)来加载同一类的不同版本……但请注意，使用类加载器真的很痛苦。

我认为简单的 OOP 方法（如其他答案中所建议）可能更方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:21:40.897

或者您可以在内部进行版本控制：

```
processRule(..., int Version = 0)
{
switch (Version)
   //etc
} 
```

如果您默认 Version == 0 为“当前版本”，这可能相对实用吗？

我的论点是，您所谓的“业务逻辑版本”实际上是业务逻辑本身，因为您明确使用多个版本*，因为您的业务需要它*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:24:19.460

理想情况下，您永远不必这样做，但如果您必须维护映射到某些版本化有线接口中元素的方法，则将版本表示为语言中的值，并使用蹦床方法来保持 API 简单。

```
enum Version {
  V1,
  V2,
  V3,
  ;
}

public class ClassWithVersionedMethod {
  // Protected to allow overriding while preventing clients from calling
  // versioned methods explicitly, and to minimize clutter in the javadoc and
  // IDE-autocomplete menus.
  protected T methodV1(...) { ... }
  protected T methodV2(...) { ... }
  protected T methodV3(...) { ... }

  // Final to prevent overriding of unversioned method by accident.
  public final T method(Version v, ...) {
    switch (v) {
      case V1: return methodV1(...);
      case V2: return methodV2(...);
      case V3: return methodV3(...);
    }
    // Throw outside switch so that we get a compiler warning when
    // someone adds a member to Version.
    throw new AssertionError("Unsupported version " + v);
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T16:26:42.577

这是对 Kajetan Abt 的回答的致敬，但被升级了。

```
 public void processRule(int version)
        {
        switch (Version){
          case 1:
            executeRule1();
            break;
          case 2:
            executeRule2();
            break;
        }

    }

   //executeRule1(), executeRule2() functions declarations here 
```

我认为这比创建新类要好，因为您试图保留所有以前版本的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T16:34:46.460

基本上其他答案中所说的：**使用接口**。

```
public interface Car {
  public void start();
  public void drive();
} 
```

**如何应用：**为了完全避免代码版本混乱，为每个版本创建一个单独的接口实现。

```
public class CarV1 implements Car{
  public void drive(){}
  public void start(){}
}

public class CarV2 extends CarV1{
  @Override
  public void drive(){//--extra--}
}

public class CarNewV3 implements Car{
  public void drive(){//--new--}
  public void start(){//--new--}
} 
```

您可以从头开始创建完整的实现类，或者扩展以前的版本以添加/覆盖某些功能。

最后，要将它们连接在一起，即提供适当的版本，您可以使用：

工厂类，它们可以为特定版本提供实现。这个类可以检查一些参数并选择使用特定的版本。

```
public class CarFactory(){
  public static Car newCar(){
    if(year >= 2013){
      return new CarNewV3();
    }else if (year >= 2000){
      return new CarV2();
    }else{
      retrun new CarV1();
    }
  }
} 
```

或者，使用一些 DI 框架，这样，您编写一个额外的设置类（模块），您可以在其中找出在运行时使用的最佳实现。

# svn - 如何在 svn 中以与 git 相同的方式合并？

> ID：14984690
> 
> 赞同：0
> 
> 时间：2013-02-20T16:17:30.520
> 
> 标签：svn

我不完全了解这个糟糕的遗留软件发生了什么。我试图`svn copy svn://trunk svn://branch/name`在某些目录中仍然丢失文件。我尝试`svn merge -rxxx:yyy svn://branch/name`在主干目录中，修订版本已更改，没有文件添加到仍存在于主干中的分支中。

这是怎么回事？？如何以 git 方式合并？只需将该死的文件从一个目录克隆到另一个目录，就是这样......确实`svn merge`意味着不同的东西吗？

问题是如何在 svn 中做同样的事情？？？：

```
$ git checkout master
$ git merge hotfix 
```

我在这里嵌套了主干/分支存储库的一个大减号..也许这会破坏所有画面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:29:48.867

```
$ svn merge ^/branch/name 
```

或使用 -r 但进入您的工作副本。我猜你不能直接从 svn:// 合并到 svn:// 。合并后，只需提交

```
merge: Merge changes into a working copy.
usage: 1\. merge SOURCE[@REV] [TARGET_WCPATH]
(the 'sync' merge)
2\. merge [-c M[,N...] | -r N:M ...] SOURCE[@REV] [TARGET_WCPATH]
(the 'cherry-pick' merge)
3\. merge --reintegrate SOURCE[@REV] [TARGET_WCPATH]
(the 'reintegrate' merge)
4\. merge SOURCE1[@N] SOURCE2[@M] [TARGET_WCPATH]
(the '2-URL' merge) 
```

每个选项都需要 TARGET_WCPATH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:32:23.550

SVN 不以 git 方式合并——它以 svn 方式合并。部分原因仅仅是因为 git 在一个非常不同的环境中解决了类似的问题。部分原因是 subversion 不支持“多个祖先”的概念，因此所有 subversion 操作都像 git rebase 一样。

除非您做额外的工作，否则 SVN 合并就像 git 合并一样被完全压扁。git 参数是最好在合并期间公开变更集。

为了让我自己更容易做更多的 git，比如合并，我前段时间写了一个工具（在 bash 中）来帮助我在 subversion 中合并，保留单个变更集。这是晚期 alpha 质量代码，但在多个组织中很有用： [https](https://github.com/dmsasser/svntools) ://github.com/dmsasser/svntools 。该工具适用于 Linux 和 cygwin。

运行此工具后，结果等同于“git rebase”。

# java - 控制台没有输出

> ID：14984691
> 
> 赞同：7
> 
> 时间：2013-02-20T16:17:30.380
> 
> 标签：java, eclipse, debugging, console, websphere

这听起来像是一个微不足道的问题，但我用谷歌搜索了一下，没有发现任何对我有帮助的东西。

我的控制台中没有打印任何内容。它昨天工作得很好。我没有对我的 RAD 进行任何更改。

甚至 system.out 语句也不会在控制台中打印。我进行了调试以确保它符合 system.out 语句。

我已经确认我正在查看输出的控制台是 websphere 的控制台，如图所示。

我正在使用 RAD 8 和 websphere app server7。

![在此处输入图像描述](../Images/8b4882ceafad86a9dfbb2b7790c02ad9.png)

**编辑 1：**

日志文件（SystemOut.log）

```
************ Start Display Current Environment ************
WebSphere Platform 7.0.0.11 [BASE 7.0.0.11 cf111021.10] running with process name 2UA2060KBLNode01Cell\2UA2060KBLNode01\server1 and process id 2796
Host Operating System is Windows 7, version 6.1 build 7601 Service Pack 1
Java version = 1.6.0, Java Compiler = j9jit24, Java VM name = IBM J9 VM
was.install.root = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7
user.install.root = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\AppSrv01
Java Home = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\jre
ws.ext.dirs = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/java/lib;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\AppSrv01/classes;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/classes;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/installedChannels;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/ext;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/web/help;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/deploytool/itp/plugins/com.ibm.etools.ejbdeploy/runtime
Classpath = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\AppSrv01/properties;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/properties;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/startup.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/bootstrap.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/jsf-nls.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/lmproxy.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/lib/urlprotocols.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/deploytool/itp/batchboot.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/deploytool/itp/batch2.jar;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7/java/lib/tools.jar
Java Library path = C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\jre\bin;.;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\bin;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\bin;C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\java\jre\bin;C:\app\RPM0C0\product\11.2.0\client_1\bin;C:\app\RPM0C0\product\11.2.0\client_2;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\idmu\common;C:\Windows\SysWow64;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\9.0\DLLShared\;C:\Program Files\SlikSvn\bin\;C:\Program Files (x86)\Attachmate\Reflection\;C:\Program Files\TortoiseSVN\bin;
************* End Display Current Environment *************
[2/20/13 14:47:47:370 CST] 0000001e FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\AppSrv01\logs\ffdc\server1_33fd33fd_13.02.20_14.47.47.3401796267326710681783.txt com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter 89
[2/20/13 14:47:47:470 CST] 0000001e FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\Program Files (x86)\IBM\SDP\runtimes\base_v7\profiles\AppSrv01\logs\ffdc\server1_33fd33fd_13.02.20_14.47.47.400854812561247672408.txt com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch 428
[2/20/13 14:47:47:500 CST] 0000001e servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/errorhandling/error.jsp]: Initialization successful.
[2/20/13 14:48:30:422 CST] 0000001e servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/F_login.jsp]: Initialization successful.
[2/20/13 14:48:32:392 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [FilterProxyServlet]: Initialization successful.
[2/20/13 14:48:32:402 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/index.jsp]: Initialization successful.
[2/20/13 14:48:32:472 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/topMenu.jsp]: Initialization successful.
[2/20/13 14:48:32:512 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/sideMenu.jsp]: Initialization successful.
[2/20/13 14:48:32:522 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public Map getIntlPlanningBlocks(...);
[2/20/13 14:48:32:792 CST] 0000001c HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:32:802 CST] 0000001c HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:32:932 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public Map getIntlPlanningBlocks(...); -- 410ms.
[2/20/13 14:48:32:932 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:32:932 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:32:932 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:32:942 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:48:32:992 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 50ms.
[2/20/13 14:48:32:992 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:32:992 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:33:002 CST] 0000001c DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:33:032 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/displayErrors.jsp]: Initialization successful.
[2/20/13 14:48:33:052 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/main/indexDetails.jsp]: Initialization successful.
[2/20/13 14:48:33:082 CST] 0000001c servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/bottomFooter.jsp]: Initialization successful.
[2/20/13 14:48:37:892 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:48:37:912 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 20ms.
[2/20/13 14:48:37:912 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:37:922 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:37:922 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:38:582 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public boolean isItTime2ShutDownUpdates(...);
[2/20/13 14:48:38:632 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public boolean isItTime2ShutDownUpdates(...); -- 50ms.
[2/20/13 14:48:38:632 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:38:632 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:38:632 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:38:642 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:48:40:762 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 2120ms.
[2/20/13 14:48:40:772 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:40:772 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:40:772 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:40:842 CST] 0000002f servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/international/routing/add_routing/route_mode_selection.jsp]: Initialization successful.
[2/20/13 14:48:47:333 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public Date getCurrentDateFromDBSysDate(...);
[2/20/13 14:48:47:403 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public Date getCurrentDateFromDBSysDate(...); -- 60ms.
[2/20/13 14:48:47:413 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:47:413 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:47:413 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:47:423 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:48:47:453 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 30ms.
[2/20/13 14:48:47:463 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:47:463 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:47:463 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:47:503 CST] 0000002f servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/international/routing/add_routing/enter_routing_info.jsp]: Initialization successful.
[2/20/13 14:48:47:553 CST] 0000002f servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/singleFacilitySelect.jsp]: Initialization successful.
[2/20/13 14:48:47:577 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public FacilityTO[] getFacilities(...);
[2/20/13 14:48:47:655 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:47:665 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:47:845 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public FacilityTO[] getFacilities(...); -- 266ms.
[2/20/13 14:48:47:845 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:47:845 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:47:845 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:47:895 CST] 0000002f servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/selectEntityTile.jsp]: Initialization successful.
[2/20/13 14:48:47:925 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public FacilityTO[] getFacilities(...);
[2/20/13 14:48:48:015 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:48:015 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:49:365 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public FacilityTO[] getFacilities(...); -- 1430ms.
[2/20/13 14:48:49:365 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:49:365 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:49:375 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:49:465 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String[] getInternationalMailClasses(...);
[2/20/13 14:48:49:465 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:49:465 CST] 0000002f HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:48:49:615 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String[] getInternationalMailClasses(...); -- 150ms.
[2/20/13 14:48:49:625 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:49:625 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:49:625 CST] 0000002f DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:49:665 CST] 0000002f servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/common/mailHandlingCodesSelect.jsp]: Initialization successful.
[2/20/13 14:48:59:426 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public boolean isItTime2ShutDownUpdates(...);
[2/20/13 14:48:59:466 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public boolean isItTime2ShutDownUpdates(...); -- 40ms.
[2/20/13 14:48:59:476 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:59:476 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:59:476 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:48:59:486 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:48:59:506 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 20ms.
[2/20/13 14:48:59:516 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:48:59:516 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:48:59:516 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:49:03:786 CST] 0000001b ***SystemOut     O Hi***
[2/20/13 14:49:03:786 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public String getLatestIntl7DayJobId(...);
[2/20/13 14:49:03:816 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public String getLatestIntl7DayJobId(...); -- 30ms.
[2/20/13 14:49:03:816 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:49:03:816 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:49:03:816 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:49:03:856 CST] 0000001b servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [TOPS-APP] [/TOPS-WEB-RB] [/servicecentral/international/interline/add_interline_routes.jsp]: Initialization successful.
[2/20/13 14:49:04:926 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public AggregateMailClassTO[] getAggregateMailClassesForDomestic(...);
[2/20/13 14:49:04:926 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Calling public AggregateMailClassTO[] getAggregateMailClassesForDomestic(...);
[2/20/13 14:49:04:936 CST] 0000001b HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:49:04:936 CST] 0000001b HibernateAbst I com.dps.nom.dops.dao.hibernate.HibernateAbstractTOPSDAO createCriteria setting CacheMode.REFRESH, cacheable = false
[2/20/13 14:49:05:056 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public AggregateMailClassTO[] getAggregateMailClassesForDomestic(...); -- 120ms.
[2/20/13 14:49:05:056 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:49:05:066 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:49:05:066 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing
[2/20/13 14:49:05:066 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy invoke Exiting public AggregateMailClassTO[] getAggregateMailClassesForDomestic(...); -- 140ms.
[2/20/13 14:49:05:076 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession flushing
[2/20/13 14:49:05:076 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession clearing
[2/20/13 14:49:05:086 CST] 0000001b DebugProxy    I com.dps.nom.dops.util.DebugProxy closeSession closing 
```

**编辑2：解决方案**

我无法弄清楚是什么导致了这个问题。所以我最终删除了服务器并重新创建它。这解决了这个问题。所以我猜想对服务器进行某种配置更改是必需的。

任何答案仍将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:35:00.433

控制台视图可以显示不止一种控制台。在您的屏幕截图中，它显示了 Websphere 服务器控制台。您期望看到的输出可能在不同的控制台上。控制台选项卡右侧有一些按钮，您可以使用这些按钮切换到不同的控制台。

[此页面](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/console/ref-console_view.htm)描述了控制台视图和可用于切换到不同控制台的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:40:41.667

我通过两种方式解决了这个问题：

1.  最初，我只是删除了服务器实例并重新创建了它。

2.  Rick 单击 RAD/Eclipse 图标并选择“以管理员身份运行”。

如果要默认以管理员身份启动 Rad 或 eclipse 实例，请执行以下操作：

```
Right click on the shortcut > Properties > Advanced > check the box "Always run as 

administrator > OK > Apply > OK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T23:58:38.423

我刚刚关闭了“控制台”“视图”并选择了“窗口”>“显示视图”>“控制台”，它为我修复了。

这个答案是根据我在这里看到的第一张图片给出的，它的控制台视图是空的。

# sql-server - 数据库：表开头的主键列

> ID：14984695
> 
> 赞同：1
> 
> 时间：2013-02-20T16:17:47.663
> 
> 标签：sql-server, oracle, db2

它会影响将所有主键列放在表的开头吗？

我知道部分索引读取很可能涉及将整行带入缓冲池以进行谓词匹配的表扫描。我很想知道在表顶部具有主键的任何性能提升会提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:28:55.203

**在 Oracle 中，表的列顺序通常对性能几乎没有影响**。

原因是行的所有列通常包含在单个块中，并且与查找/读取块相比，查找块中行的第一列和最后一列之间的时间差异是无限小的。

此外，当您到达数据库块读取一行时，主键可能不是最重要的列。

以下是列顺序可能会产生影响的一些例外情况：

*   当您的表中有 > 255 列时，这些行将分成两个块（或更多块）。访问前 255 列可能比访问其余列便宜。
*   一行的最后一列如果是 则占用 0 字节空间`NULL`。因此，`NULL`如果可能，最好将包含许多值的列放在行尾，以减少空间使用，从而减少 IO。一般来说，影响很小，因为其他 NULL 列每个占用 1 个字节，因此节省的空间很小。
*   启用压缩时，压缩效率可能取决于列顺序。一个好的经验法则是应该对具有很少不同值的列进行分组，以提高它们被压缩算法合并的机会。
*   [当您将索引组织表](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#i2128766)(IOT) 与[溢出子句](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#i2128810)一起使用时，您应该考虑列的顺序。使用此子句，确定的分隔列之后的所有列都将被存储在行外，访问它们将产生额外的成本。主键始终物理存储在 IOT 中行的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:26:57.750

至少在 SQL Server 中，基于表中列的顺序（主键与否）没有性能优势。将主键列放在列表顶部的唯一好处是有组织性。有点像有一个包含这些列 Id、FirstName、LastName、Address1、Address2、City、State、Zip 的表。与 Address2、State、Firstname、Id、Address1、Lastname、Zip、City 相比，按此顺序进行操作要容易得多。我对 Oracle 或 DB2 了解不多，但我相信它们是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:30:55.447

在 DB2 中，（我认为关于其他数据库管理器系统的答案应该检查答案）修改较少的列应该位于每行的开头，因为在执行更新时，它需要从第一个修改的列到结尾行，将其写入事务日志中。

它只影响更新操作，插入、删除或选择没有问题。其影响是 IO 减少了一点，因为如果只需要写入最后一列，则应该写入的信息更少。当对具有大量记录的大行表上的几个小列执行更新时，这可能很重要。如果修改了第一列，DB2 将写入整行。

排序列以最小化更新日志记录：http: [//publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0024496.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0024496.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T12:28:43.713

（对于 ORACLE）那么公平地说，任何和所有主键列，即使只有 1，也应该是第一列或在一行中的前几列中。此外，在行的末尾标记它们是不好的做法，尤其是在一系列可能/可能为空的属性字段之后？

因此，像这样的一行：

pkcol(s)、att1、att2、att3、varchar2(2000)

由于上述所有原因，组织得更好

att1, att2, att3, varchar2(2000), pkcol(s)

我为什么要问？好吧，不要判断，但我们正在简化一些表的 PK，开发人员很高兴将新的 GUID pk（不要判断 #2）标记到行的末尾。我对此感到困扰，但需要一些反馈来证明我的恐惧。这对 SQL Server 也有影响吗？

# javascript - LatLong 落在 D3 + Leaflet 中的给定多边形内

> ID：14984699
> 
> 赞同：2
> 
> 时间：2013-02-20T16:17:56.120
> 
> 标签：javascript, geometry, d3.js, geocoding, leaflet

我正在尝试学习如何使用 Javascript 库[传单](http://leafletjs.com/)和[d3](http://d3js.org/)来创建各种地图可视化。

我一直在关注[本教程](http://leafletjs.com/examples/choropleth.html)，该教程创建了具有一些交互性的美国等值线地图。这提供了一些我需要的东西，但我想要的主要功能是有一个纬度/经度坐标列表，根据它们所属的区域进行分类。

这意味着，例如，在教程地图中，如果我的纬度值 (55, -3) 落在亚利桑那州的多边形内，则程序可以将此点归类为属于亚利桑那州。

传单（或 d3）库中是否有一个函数可以让我输入一个经纬度坐标作为参数并返回它所属的特征的名称？上面的教程允许您通过 onEveryFeature 属性将函数附加到每个功能，并且可以在每个功能悬停时触发鼠标悬停事件。当然有一种方法可以将此功能扩展到数字输入的数据而不是鼠标点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:47:28.410

如果您希望这样做，传单需要一些调整。它将鼠标点击的处理留给浏览器，因此不需要逻辑来确定一个点是否位于多边形内。

我对 d3 不是很了解，但对我来说它是如何开箱即用的并不是很明显。查看多边形代码，我确实找到了一种裁剪算法和无限线的交点。

但是，如果添加第三个库，这应该相当简单。OpenLayers 几何库[可以确定一个点是否位于多边形内](http://dev.openlayers.org/apidocs/files/OpenLayers/Geometry/Polygon-js.html#OpenLayers.Geometry.Polygon.intersects)。

编辑：我得到了这个工作，另见[http://jsfiddle.net/VaY3E/4/](http://jsfiddle.net/VaY3E/4/)

```
var parser = new OpenLayers.Format.GeoJSON();
var vectors = parser.read(statesData);
var lat = 36;
var lon = -96;
var point = new OpenLayers.Geometry.Point(lon, lat);
for( var i = 0; i< vectors.length; i++ ){
    if(vectors[i].geometry.intersects(point)){
       alert(vectors[i].attributes['name']);
    }
} 
```

或者你可以使用[https://github.com/maxogden/geojson-js-utils](https://github.com/maxogden/geojson-js-utils)，一个更具体的库。看起来它知道如何读取 GeoJSON 并且它有一个方法`gju.pointInPolygon`。我还没有测试过。

# php - Twig 错误：警告：{closure}() 缺少参数 1

> ID：14984700
> 
> 赞同：0
> 
> 时间：2013-02-20T16:17:55.997
> 
> 标签：php, twig

我正在用 PHP 编写一个用于学校工作的应用程序，并且我正在单独使用 Twig 模板引擎（没有框架）。

我有一个文件在我的项目中初始化 Twig，我在所有需要它的文件中使用它。

```
include_once('./Twig/lib/Twig/Autoloader.php'); 
Twig_Autoloader::register();
$loader = new Twig_Loader_Filesystem('./templates');    
$twig = new Twig_Environment($loader, array(
    'cache' => false,
    'charset' => 'utf-8'
)); 
```

我有一个 Twig 函数，它返回我的静态文件文件夹的路径。但是当我运行时`addFunction($my_function)`，出现以下错误：

> 警告：{closure}() 缺少参数 1

**我的树枝功能：**

```
$url_for_static = new Twig_SimpleFunction('static_folder', function () {
$static_folder = "./static" ;
    return $static_folder ;
});

$twig->addFunction($url_for_static); 
```

我知道这个答案真的很晚，但我终于找到了解决问题的方法。我的 Twig 函数声明是错误的。 **这对我有用：**

`

```
function blank_space($size=100) {       
    echo "<div class='grid-". $size ." hidden'> <span> hidden </span> </div>" ;
}
$twig->addFunction('blank_space', new Twig_Function_Function('blank_space')) ; 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:24:30.593

我以前从未使用过 Twig，但似乎闭包是用参数调用的，但您没有在闭包中定义任何参数。尝试这个：

```
$url_for_static = new Twig_SimpleFunction('static_folder', function ($arg) {
    var_dump($arg);
    $static_folder = "./static" ;
    return $static_folder ;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:56:35.800

我知道这个答案真的很晚，但我终于找到了解决问题的方法。我的 Twig 函数声明是错误的。

**这对我有用：**

```
function blank_space($size=100) { 
    echo "<div class='grid-". $size ." hidden'> <span> hidden </span> </div>" ; 
} 

$twig->addFunction('blank_space', new Twig_Function_Function('blank_space')) ; 
```

# sql - 非规范化 SQL 查询和组合列

> ID：14984706
> 
> 赞同：4
> 
> 时间：2013-02-20T16:18:39.757
> 
> 标签：sql, denormalization

我有一个查询需要以一种有趣的方式进行非规范化。

这是来源：

```
SELECT
  BILL_Invoice.Invoice_Number as AccountNumber,
  replace(convert(varchar(10), dbo.BILL_Invoice.Invoice_Date,101) ,'/','') as AdmitDate,
  BILL_InvoiceCPT.InvoiceCPT_Code AS CPTCode,
  InvoiceCPT_FeeAmount as ItemCharge
FROM
  dbo.BILL_InvoiceCPT 
  LEFT JOIN dbo.BILL_Invoice
  ON dbo.BILL_InvoiceCPT.Invoice_ID = dbo.BILL_Invoice.Invoice_ID 
```

* * *

输出如下所示：

```
AccountNumber | AdmitDate  | CPTCode | ItemCharge
38689         | 02192013   | 99213   |     110.00
38689         | 02192013   | 80053   |       0.00
38689         | 02192013   | 86361   |       0.00
38689         | 02192013   | 85025   |       0.00
38689         | 02192013   | 87536   |       0.00
38689         | 02192013   | 93000   |      25.00 
```

* * *

我需要的是：

```
AccountNumber | AdmitDate | TotalCharges | CPTCodes                            | ItemCharges
38689         | 02192013  | 135.00       | 99213;80053;86361;85025;87536;93000 | 110.00;0.00;0.00;0.00;0.00;25.00 
```

* * *

这是输入第 3 方软件应用程序所必需的。我不太确定如何正确地非规范化这些信息。PIVOT 函数会这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:42:43.640

MySQL为此提供了一个名为[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)的现成函数！

它看起来像这样：

```
SELECT 
 AccountNumber
,AdmitDate
,SUM(TotalCharges)
,GROUP_CONCAT(CPTCode)
,GROUP_CONCAT(ItemCharges)
FROM tbl
WHERE condition
GROUP BY AccountNumber, AdmitDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:30:03.743

您需要进行聚合字符串连接。这是 SQL Server 中的一个痛点。结果看起来像：

```
with t as (
      SELECT bi.Invoice_Number as AccountNumber, 
             replace(convert(varchar(10), bi.Invoice_Date,101) ,'/','') as AdmitDate,
             InvoiceCPT_FeeAmount as TotalCharges,
             biCPT.InvoiceCPT_Code AS CPTCode, 
             InvoiceCPT_FeeAmount as ItemCharge
      FROM dbo.BILL_InvoiceCPT bicpt LEFT JOIN
           dbo.BILL_Invoice bi
           ON bicpt.Invoice_ID = bi.Invoice_ID
    )
select accountNumber, admitDate,
       STUFF((select ',' + CAST(totalCharges as varchar(255))
              from t
              where t.AccountNumber = t2.AccountNumber
              for xml path ('')
             ), 1, 1, '') as TotalCharges,
       STUFF((select ',' + CAST(itemCharge as varchar(255))
              from t
              where t.AccountNumber = t2.AccountNumber
              for xml path ('')
             ), 1, 1, '') as ItemCharges
from (select distinct accountNumber, admitDate
      from t
     ) t2 
```

注意：我没有测试过这个 SQL，所以它可能有语法错误。

# sql - SQL 连接还是联合？

> ID：14984708
> 
> 赞同：1
> 
> 时间：2013-02-20T16:18:50.767
> 
> 标签：sql, join, union

我有两张桌子：

```
Customer    Time    Program
-----------------------------------
1           8:05    a
2           9:38    b
3           10:45   c
4           12:00   a

Customer    Time    Program
-----------------------------------
1           11:30   d
5           1:45    e
6           9:45    f
7           2:15    g 
```

我希望我的桌子看起来像：

```
Customer    Time    Program
-----------------------------------
1           8:05    a
1           11:30   d
2           9:38    b
3           10:45   c
4           12:00   a
5           1:45    e
6           9:45    f
7           2:15    g 
```

这真的很简单，但是我的时间列在每个表中都有不同的名称，每个表都有不同的程序集，因此两个表中都没有程序 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:21:21.893

听起来你想要一个 UNION。UNION 连接两个表的行，保留列；JOIN 将两个不同表的列关联成行。

您可以重命名创建联合的 SELECT 中的列：

```
SELECT Customer, FirstTime AS Time, Program FROM Table1 UNION ALL SELECT Customer, SecondTime AS Time, Program FROM Table2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:21:39.587

UNION 它们并使用 AS 按两个表之间匹配的名称调用列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:21:54.507

使用`union all`：

[上传代码问题]

```
select customer, time, program from table1
union all

select customer, time, program from table2 
```

`union`添加额外的处理以删除重复项。

# sql-server - SQL Server 2005：将 varchar 转换为 nvarchar 问题

> ID：14984714
> 
> 赞同：1
> 
> 时间：2013-02-20T16:19:04.503
> 
> 标签：sql-server, nvarchar

我有两`varchar`列`first_name`和`last_name`.

现在我需要将这些列转换`nvarchar`为以支持 UTF-8。

我在 SSMS 中为这些列选择`nvarchar`数据类型，当我尝试输入一些 UTF-8 数据时，我的符号会转换为问号。例如，如果我输入`йцукен`（乌克兰语），它将被转换为`??????`.

有什么问题以及如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:43:39.467

当你想`nvarchar`在数据库表中插入文字时，你**必须**使用`N'..'`前缀。

所以使用

```
INSERT INTO dbo.YourTable(First_Name)
VALUES(N'йцукен') 
```

这样该字符串将被视为**unicode**字符串

如果您不使用该`N'..'`表示法，那么您实际上是在插入一个**非 unicode**字符串文字 - 这将导致这些转换为`?`

# javascript - 从ini文件在jasp中的javascript中设置变量

> ID：14984724
> 
> 赞同：0
> 
> 时间：2013-02-20T16:19:48.830
> 
> 标签：javascript, spring-mvc

在我的 spring mvc 项目中，我有一个 properties.property 文件，其结构就是这样

```
TestOrderURL=blah
LiveOrderURL=blah1 
```

这些值在我的控制器中使用，并使用 @Value 注释读取。

视图 [.jsp] 有一个 javascript 函数，该函数具有需要从上述属性文件中设置默认值的变量。有没有办法设置这个？

我的 HomeController.java

```
@RequestMapping(value = "/Home.html", method = RequestMethod.GET)
public String home(Locale locale, Model model) 
{
    logger.info("Welcome home! the client locale is "+ locale.toString());
    return "Home";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:46:19.883

将您的变量从控制器设置到某个特定范围，即[HttpSession](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html)以便您可以通过[Expression Language](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)或[Scriptlet](http://docs.oracle.com/javaee/5/tutorial/doc/bnaou.html)在您的 javascript 中访问它们。

**更新：**

在您的控制器调用中：

```
request.getSession(false).setAttribute("YourProperty",propertyvalue); 
```

然后在 javascript 中访问它们，如下所示：

```
var property=<%=session.getAttribute("YourProperty")%>; 
```

**更新：** 将您的控制器方法更改为：

```
@RequestMapping(value = "/Home.html", method = RequestMethod.GET)
public String home(Locale locale, Model model,HttpServletRequest request) 
{
    request.getSession(false).setAttribute("YourProperty",propertyvalue);
    logger.info("Welcome home! the client locale is "+ locale.toString());
    return "Home";
} 
```

或者你也可以设置你的`model`。

# iphone - UIScrollView PhotoViewer 在 iPod 上 125 张照片后收到内存警告

> ID：14984725
> 
> 赞同：0
> 
> 时间：2013-02-20T16:19:54.143
> 
> 标签：iphone, objective-c, uiscrollview, memory-warning, photoviewer

我陷入了一个奇怪的问题，试图从所有可能的来源中找到解决方案，但还没有运气。

我的要求类似于 iphone 的 photoviewer 应用程序，但还有更多内容，例如上传图像、下载等。所以从技术上讲，我正在做的是创建一个主滚动视图，其内容大小等于所有选定的图像大小 * 图像宽度.I have small view inside 那也等于没有。从选取器中选择的图像。该视图包含一个小的滚动视图和一个允许用户缩放、捏合等的图像视图，主滚动视图具有允许滑动的手势侦听器。要访问图像，我正在存储资产 URL 并在用户向左或向右滑动时获取图像。在任何时候，我只保留 1 张图像是内存，即如果用户滑动到第二张照片，我会从主滚动视图中删除第一张照片。

但是，如果我选择了 125 张照片并多次滑动以结束并返回，我仍然面临 iPod 上的内存问题。

示例代码：-

```
 ***//InnerScrollView is the class which contains view with scroll and imageview
    //The values of initial and final counter will always be a diffrence of 1 so it creates only one object**

  for(int j=initialCounter;j<finalCounter;j++) {

            InnerScrollView *innerScrollViewObj=[[InnerScrollView alloc] initWithFrame:CGRectMake(320*j, 0, 320, 480)
                                                                                   url:[selectedImageList objectAtIndex:j] tag:self.initialImageViewCounter];
            innerScrollViewObj.delegate=self;
            [mainScrollView addSubview:innerScrollViewObj];
            [innerScrollViewObj release];
            innerScrollViewObj=nil;
        }

**//This is main scrollview which gets created once**

     mainScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0 , 320, 480)];
        mainScrollView.pagingEnabled = YES;
//        mainScrollView.delegate=self;
        mainScrollView.showsHorizontalScrollIndicator = NO;
        mainScrollView.showsVerticalScrollIndicator = NO;
        mainScrollView.maximumZoomScale = 4.0;
        mainScrollView.minimumZoomScale = 1.0;
        mainScrollView.backgroundColor=[UIColor blackColor];
        [mainScrollView setCanCancelContentTouches:NO];
        mainScrollView.clipsToBounds = YES;
        mainScrollView.scrollEnabled = FALSE;
        mainScrollView.contentSize = CGSizeMake(320*[selectedImageList count], mainScrollView.bounds.size.height);
        [self.view addSubview:mainScrollView];

//THis is the method which gets called when i swipe left and the previous images gets deleted

-(void)deleteScrollViewFormMainView:(NSNumber*)indexToDelete{

    @try{
        NSLog(@"ScrollView to be deleted %@",[[mainScrollView subviews] objectAtIndex:0]);
        [[[mainScrollView subviews] objectAtIndex:0] removeFromSuperview];

    }
    @catch (NSException *e) {
        NSLog(@"ScrollView view exception %@",[e description]);
    }
}

- (id)initWithFrame:(CGRect)frame url :(ALAsset*) imageUrl tag:(int)tag
{
    self = [super initWithFrame:frame];
    if (self) {

        self.userInteractionEnabled=YES;
//        self.tag=tag;
        UIImage *image = [UIImage imageWithCGImage:[[imageUrl defaultRepresentation] fullResolutionImage ]];
        UIImageView* imageview = [[UIImageView alloc] initWithImage:image];
        imageview.tag = VIEW_FOR_ZOOM_TAG;
        imageview.frame=CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
        imageview.backgroundColor=[UIColor clearColor];
        imageview.contentMode=UIViewContentModeScaleAspectFit;

       UIScrollView* pageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
        NSLog(@"Page scrollview is %@",pageScrollView);
        pageScrollView.tag=tag;
        pageScrollView.minimumZoomScale = 0.4f;
        pageScrollView.maximumZoomScale = 2.0f;
        pageScrollView.zoomScale = 1.0f;
        pageScrollView.backgroundColor=[UIColor clearColor];
        pageScrollView.delegate = self;
        pageScrollView.showsHorizontalScrollIndicator = NO;
        pageScrollView.showsVerticalScrollIndicator = NO;
        [pageScrollView setCanCancelContentTouches:NO];
        [self addSubview:pageScrollView];
        [pageScrollView addSubview:imageview];

        UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap)];
        singleTap.numberOfTapsRequired=1;
        singleTap.delegate=self;
        [self addGestureRecognizer:singleTap];
        singleTap=nil;

        UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap)];
        doubleTap.numberOfTapsRequired=2;
        doubleTap.delegate=self;
        [self addGestureRecognizer:doubleTap];

        singleTap=nil;
        doubleTap=nil;
        imageview=nil;
        pageScrollView=nil;

    }
    return self;
} 
```

我应该将 InnerImageView 类作为单格类吗？这会有帮助吗，因为我认为内存问题可能是因为创建了多个对象（尽管我正确地释放了它）。

请各位大侠帮忙！！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:26:47.667

你能发布 的定义`InnerScrollView`吗？最可能的问题是您的`delegate`属性是`retain`，这会阻止您的 innerScrollViewObj 被释放。

所以，我假设你有类似的东西：

```
@property (nonatomic, retain) id delegate; 
```

应该是：

```
@property (nonatomic) id delegate; 
```

或者，如果您启用 ARC，它应该是：

```
@property (nonatomic, weak) id delegate; 
```

另外，请记住，`[mainScrollView subviews]`它只保存视图，而不是任何控制器。因此，如果您解除分配控制器，那么它将无法响应任何事件或控制任何内容，并且您可能会由于向解除分配的对象发送消息而出错。

# c# - 通过实体框架更新

> ID：14984726
> 
> 赞同：0
> 
> 时间：2013-02-20T16:19:53.437
> 
> 标签：c#, asp.net-mvc-3, entity-framework

帮我解决这个问题，我真的很困惑！

我只是想更新一些东西！这是我的控制器（后期操作）：

```
[HttpPost]
public ActionResult Edit(CategoryViewModel categoryViewModel)
{
            if(ModelState.IsValid)
            {
                _categoryService.UpdateCategory(categoryViewModel.Id);
            }
            return View();
} 
```

这是我的服务类（我的问题是关于这个类，我不知道如何更新它）

```
public CategoryViewModel UpdateCategory(Guid categoryId)
{
            var category = _unitOfWork.CategoryRepository.FindBy(categoryId);
            var categoryViewModel = category.ConvertToCategoryViewModel();
             _unitOfWork.CategoryRepository.Update(category);
            _unitOfWork.SaveChanges();
            return categoryViewModel;
} 
```

最后我的基本存储库是这样的：

```
private readonly DbSet<T> _entitySet;

public void Update(T entity)
{
            _entitySet.Attach(entity);
} 
```

我`UnitOfWork`也是这样的：

```
public class UnitOfWork : IUnitOfWork
{
    private IRepository<Category> _categoryRepository;

    public IRepository<Category> CategoryRepository
    {
            get { return _categoryRepository ?? (_categoryRepository = new Repository<Category>(_statosContext)); }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:38:10.627

更改`UpdateCategory`为接受`CategoryViewModel`而不是仅仅接受`Guid`. 向对象添加一个实例`UpdateFromViewModel(CategoryViewModel model)`方法，该`Category`对象的任务是从模型中获取属性并将它们传输到 EF 实体。之后，您的其余代码应该可以工作。还有其他模式也可用于完成此操作，但鉴于您现有的模式，这应该会让您越过终点线。

```
public class Category
{
    public void LoadFromModel(CategoryViewModel model)
    {
        // Transfer properties from model to entity here
    }
}

public class CategoryService
{
    public void UpdateCategory(CategoryViewModel model)
    {
        var category = _unitOfWork.CategoryRepository.FindBy(model.CategoryId);
        category.LoadFromModel(model);
        _unitOfWork.SaveChanges();
        model.CategoryId = category.CategoryId;
    }
} 
```

# django - 按两个值过滤。Django ORM

> ID：14984734
> 
> 赞同：2
> 
> 时间：2013-02-20T16:20:05.953
> 
> 标签：django

我需要按价格过滤对象。如何做这样的事情？

```
from_price = request.GET['from']
to = request.GET['to']

o = Data.objects.filter(price > from_price and price < to  ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:26:46.640

如果您需要包含价格金额，您可以使用[`__range`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#range)(between) 运算符：

```
o = Data.objects.filter(price__range=(from, to)) 
```

否则，只需使用[`__gt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gt)（大于）和[`__lt`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#lt)（小于）：

```
o = Data.objects.filter(price__gt=from, price__lt=to)) 
```

有关更多运算符，请查看 Django 的[QuerySet API 参考](https://docs.djangoproject.com/en/dev/ref/models/querysets/)，特别是[字段查找](https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:25:18.420

从[查询文档](https://docs.djangoproject.com/en/dev/topics/db/queries/)：

```
o = Data.objects.filter(price__gt=from_price).filter(price__lt=to) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:27:32.210

```
o = Data.objects.filter(price__gt=from_price).filter(price__lt=to) 
```

查看有关此的[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gt)。

# java - Java - 将当前日期保存到 sql 数据库（时间字段）

> ID：14984736
> 
> 赞同：1
> 
> 时间：2013-02-20T16:20:12.860
> 
> 标签：java, sql-server

我非常感谢对此的任何帮助，我已经尝试了各种方法。

基本上我有一个 SQL 数据库，我想在其中保存一些数据，我知道如何处理我拥有的所有其他字段，但我也想用这些数据保存当前时间。

```
str = "INSERT INTO tblResults (username, curTime, outcome) " +
"VALUES(" + "'" + user + "'" +", " + (new Timestamp(date.getTime())) + ", " + "'" +     outcome + "'" +")"; 
```

然后我执行字符串，这是我的许多尝试之一的一个例子，这个尝试编译，但我得到一个错误：

'16' 附近的语法不正确。保存结果出错

现在是 16 小时......我认为这是因为时间戳将时间放在日期之前，而 sql 则相反，但我不知道如何解决这个问题，所以我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:29:22.137

使用 a `PreparedStatement`，它会为您解决：

```
 final String str = "INSERT INTO tblResults (username, curTime, outcome)  VALUES( ?, ?, ?)";
    final PreparedStatement preparedStatement = connection.prepareStatement(str);
    preparedStatement.setString(1, user);
    preparedStatement.setTimestamp(2, new Timestamp(date.getTime()));
    preparedStatement.setString(3, outcome); 
```

我猜到你的其他数据类型......
正如其他人所说，`Statement`不推荐使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:24:48.117

出现错误是因为 new Timestamp(date.getTime()) 的参考值进入了字符串，而不是正确的时间戳格式字符串。

替换为这个然后执行： str = "INSERT INTO tblResults (username, curTime, 结果) " + "VALUES(" + "'" + user + "'" +", " + (new Timestamp(date.getTime() ).toString() + ", " + "'" + 结果 + "'" +")";

如果你不放 toString() 方法，那么对象的引用地址将进入字符串。

您还可以在 Logger 中打印整个字符串，以查看实际进入 str 的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:25:53.530

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
Date date = new Date();
str = "INSERT INTO tblResults (username, curTime, outcome) " +
"VALUES(" + "'" + user + "'" +", " + dateFormat.format(date) + ", " + "'"  +     outcome + "'" +")"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:27:16.070

您在 SQL 查询中错过了 new Timestamp() 周围的撇号，但对于这种情况，您确实应该使用 PreparedStatement 代替。

# servlets - 在 Web 应用程序中从 jar 内的文件中读取

> ID：14984737
> 
> 赞同：0
> 
> 时间：2013-02-20T16:20:17.327
> 
> 标签：servlets, jar

我有一个独立的应用程序，我将其导出为 JAR 文件，以将其包含在 Tomcat 上运行的 Web 应用程序中。

独立应用程序通过以下行从包“config”中的文件读取：

```
configFileName = Thread.currentThread().getContextClassLoader().getResource("config/indexer.cfg").getPath(); 
```

不幸的是，这会导致 Web 应用程序出现异常：

```
java.io.FileNotFoundException: file:\C:\apache-tomcat-7.0.23\IRSimWebApp\WEB-INF\lib\IR_Sim.jar!\config\indexer.cfg (The filename, directory name, or volume label syntax is incorrect)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source) 
```

我注意到文件路径中有一个感叹号。这会导致错误吗？它是如何到达那里的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:38:27.297

将资源获取为以下内容似乎会更好地为您服务`InputStream`：

```
InputStream in = Thread.currentThread().getContextClassLoader().getResourceAsStream("config/indexer.cfg");
if (in != null) {
    BufferedInputStream buff = new BufferedInputStream(in);
    // process buff to get contents of file
    buff.close();
} 
```

显然，上面没有异常处理，但你应该明白......

# c# - 用于警报的 C# dot net web 服务

> ID：14984741
> 
> 赞同：1
> 
> 时间：2013-02-20T16:20:23.887
> 
> 标签：c#

我想创建一个 C# dot net web 服务，它将检查来自 sql 中某个表的警报消息，然后它将警报消息发送到某个 URL，例如，我有一个特定的 URL，我将使用它来传递数据，例如：`http://SMSAlerts/Message?msisdn=phoneno&text=message`，所以这里我只将电话号码和消息传递给 URL。问题是，我将如何设计 Web 服务，以便它每次都自行检查该表是否有新警报，以便它可以发送到该 URL？警报表由另一个应用程序填充。请帮助我知道我可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:23:19.030

Web 服务不应该做这项工作。它应该只更新某处的 url 列表（即在数据库表上）。

然后，您应该开发一个守护进程（即 Windows 服务或控制台应用程序）来执行轮询数据和使用注册 url 的工作。

# java - JavaFX KeyEvent 和重音字符

> ID：14984743
> 
> 赞同：4
> 
> 时间：2013-02-20T16:20:27.227
> 
> 标签：java, javafx-2, javafx

我在 JavaFX 中使用带有 contenteditable 主体的 WebView 作为富文本编辑器。它工作正常，但我需要听按键。它适用于输入键和 ASCII 字符，但重音字符（如冰岛语 á 和 é）不会触发任何事件。我尝试了 KeyEvent.KEY_PRESSED 和 KeyEvent.KEY_TYPED，但它们都不会触发重音字符。

InputMethodEvent 确实会触发重音字符，但如果我为此设置了一个侦听器，它似乎会自动使用该事件并且它不会到达编辑器。

任何人都知道在输入不消耗重音字符时侦听事件的方法，或者在 InputMethodEvent 中取消消耗字符的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-24T17:50:40.137

[您可以使用Node.addEventHandler](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#addEventHandler-javafx.event.EventType-javafx.event.EventHandler-)方法将 KeyEvent EventHandler 添加到任何节点（在本例中为您的 WebView），如果您处理 EventType *KeyEvent.KEY_TYPED您可以使用*[KeyEvent.getCharacter](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/input/KeyEvent.html#getCharacter--)方法获取键入的**unicode**字符。看这个例子：

```
WebView myWebView = new WebView();
myWebView.addEventHandler(KeyEvent.KEY_TYPED,
                    new EventHandler<KeyEvent>()
                    {
                        @Override
                        public void handle(KeyEvent event)
                        {
                            System.out.println("Unicode character typed: "+event.getCharacter());

                            switch (event.getCharacter())
                            {
                            case "á":
                                System.out.println("Typed accented a");
                                break;
                            case "é":
                                System.out.println("Typed accented e");
                                break;
                            case "í":
                                System.out.println("Typed accented i");
                                break;
                            case "ó":
                                System.out.println("Typed accented o");
                                break;
                            case "ú":
                                System.out.println("Typed accented u");
                                break;
                            default:
                                System.out.println("Typed other key " + event.getCode());
                                break;
                            }
                        }

                    }); 
```

如果您想比较忽略语言环境、大写、小写等的不同字符串，您可能需要查看[Collat​​or](https://docs.oracle.com/javase/8/docs/api/java/text/Collator.html)类。如果您想考虑“á”和“a”相等，它可能会很有用。

祝你好运！

# javascript - 使用javascript的确认功能

> ID：14984749
> 
> 赞同：-2
> 
> 时间：2013-02-20T16:20:34.010
> 
> 标签：javascript

如果它为真，我如何使用javascript的确认功能提交form1，否则为form2。if true 提交 form1 否则提交 form2

```
<form action="asdasd.php" id="a" name="form1">
</form>
<form action="aasdasdasdad.php" id="b" name="form2">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:23:11.190

请参阅下面的示例代码：

```
if (confirm("submit form1?")
   form1.submit();
else
   form2.submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:24:38.420

```
if ( confirm("your message") ) {
    document.form1.submit();
} else {
    document.form2.submit();
} 
```

# oracle - Oracle TKPROF 输出

> ID：14984752
> 
> 赞同：1
> 
> 时间：2013-02-20T16:20:39.053
> 
> 标签：oracle, oracle10g, oracle11g

查看 TKPROF 输出的主要特征是什么。我的意思是如何解释 TKPROF 输出？CPU 和 ELAPSED 和有什么不一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:34:45.837

您可以阅读有关 Oracle 文档的[这篇文章](http://docs.oracle.com/cd/B28359_01/server.111/b28274/sqltrace.htm#i4642)，以了解有关解释 TKPROF 输出的更多信息。

`CPU Time`是 CPU 忙于执行任务的时间，或者换句话说，实际执行查询所需的时间。

`Elapsed Time`是 CPU 时间和等待时间的总和。等待时间是等待资源所花费的时间，例如等待 I/O。

# c# - 将对象转换为集合

> ID：14984761
> 
> 赞同：5
> 
> 时间：2013-02-20T16:21:08.670
> 
> 标签：c#, runtime, type-conversion

我有一种情况，我得到一个对象，需要：

*   确定该对象是单个对象还是集合（数组、列表等）
*   如果它是一个集合，请遍历列表。

到目前为止我所拥有的。对 IEnumerable 的测试不起作用。并且转换为 IEnumerable 仅适用于非原始类型。

```
static bool IsIEnum<T>(T x)
{
    return null != typeof(T).GetInterface("IEnumerable`1");
}
static void print(object o)
{
    Console.WriteLine(IsIEnum(o));       // Always returns false
    var o2 = (IEnumerable<object>)o;     // Exception on arrays of primitives
    foreach(var i in o2) {
        Console.WriteLine(i);
    }
}
public void Test()
{
    //int [] x = new int[]{1,2,3,4,5,6,7,8,9};
    string [] x = new string[]{"Now", "is", "the", "time..."};
    print(x);       
} 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T16:24:04.270

检查对象是否可转换为非泛型`IEnumerable`接口就足够了：

```
var collection = o as IEnumerable;
if (collection != null)
{
    // It's enumerable...
    foreach (var item in collection)
    {
        // Static type of item is System.Object.
        // Runtime type of item can be anything.
        Console.WriteLine(item);
    }
}
else
{
    // It's not enumerable...
} 
```

`IEnumerable<T>`本身实现`IEnumerable`，因此这将适用于泛型和非泛型类型。使用此接口而不是泛型接口可以避免泛型接口变化的问题：`IEnumerable<T>`不一定可转换为`IEnumerable<object>`.

这个问题更详细地讨论了通用接口变化：[C# 4.0 中的通用变化](https://stackoverflow.com/questions/2208043/generic-variance-in-c-sharp-4-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:24:19.663

不要使用通用版本`IEnumerable`

```
static void print(object o)
{
    Console.WriteLine(IsIEnum(o));       // Always returns false
    var o2 = o as IEnumerable;     // Exception on arrays of primitives
    if(o2 != null) {
      foreach(var i in o2) {
        Console.WriteLine(i);
      }
    } 
} 
```

`foreach`如果你这样做，你会错过一些可以在 a 中使用的类型。可以用作 a 中的集合的对象`foreach`不需要实现`IEnumerable`它只需要实现`GetEnumerator`它又需要返回一个具有`Current`属性和`MoveNext`方法的类型

如果集合是类型化的，并且您只需要支持不同类型的集合，您可以这样做

```
static void print<T>(T o) {
    //Not a collection
}

static void print<T>(IEnumerable<T> o) {
   foreach(var i in o2) {
        Console.WriteLine(i);
   }
} 
```

在这种情况下，方法重载决策将根据对象是否为集合（在这种情况下由 implementation 定义`IEnumerable<T>`）为您选择正确的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:31:27.133

使用以下代码：

```
Type t = typeof(System.Collections.IEnumerable);

Console.WriteLine(t.IsAssignableFrom(T)); //returns true for collentions 
```

# css - css3-mediaqueries.js 导致 IE 挂起

> ID：14984764
> 
> 赞同：0
> 
> 时间：2013-02-20T16:21:16.977
> 
> 标签：css, media-queries

我正在使用 css3-mediaqueries.js 来支持 IE8 和 7，但是当我加载页面时，浏览器挂起并停止工作。

我使用移动优先过程和我的媒体查询

```
@media screen and (min-width: 1024px) {

} 
```

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:54:53.643

IE7 和 8 不支持媒体查询。Modernizer 在这里也无济于事。我只是将您的媒体查询放入我当前的项目中，该项目使用现代化程序并呈现到 IE7 和 8（做一个简单的 header{ color:red } ）。对不起，但这没有帮助。Google，FF，当然做得很好。

由于 IE7 和 8 在 1024 以下的屏幕尺寸上并不常见，您是否有机会在您的逻辑中使用最大宽度？IE7&8 通常只是忽略查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T10:34:16.993

根据此线程，这是一个普遍存在的问题： [https ://code.google.com/p/css3-mediaqueries-js/issues/detail?id=8](https://code.google.com/p/css3-mediaqueries-js/issues/detail?id=8)

我从这里使用 respond.js [https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

# macos - 在 Mac OSX 上找不到 QT 4.8.4 调试库

> ID：14984769
> 
> 赞同：0
> 
> 时间：2013-02-20T16:21:24.107
> 
> 标签：macos, qt, debugging, libraries

我在 Mac OSX 10.8.2 上。[我从http://qt-project.org/downloads](http://qt-project.org/downloads)安装了 Qt 库 4.8.4 for Mac (185 MB) 和调试库 (480 MB)

当我尝试在 Qt Creator (2.6.2) 中调试应用程序时，我在应用程序输出中得到以下几行：

```
Unable to read symbols for QtSql.framework/Versions/4/QtSql (file not found).
Unable to read symbols from "QtSql" (not yet mapped into memory).
Unable to read symbols for QtCore.framework/Versions/4/QtCore (file not found).
Unable to read symbols from "QtCore" (not yet mapped into memory).
Unable to read symbols for QtGui.framework/Versions/4/QtGui (file not found).
Unable to read symbols from "QtGui" (not yet mapped into memory).
Unable to read symbols for QtNetwork.framework/Versions/4/QtNetwork (file not found).
Unable to read symbols from "QtNetwork" (not yet mapped into memory). 
```

上面提到的文件是存在的。两个调试窗口一直是空的，当我将鼠标移到窗口上时，只有鼠标变成了时钟。

如果应用程序崩溃，我唯一得到的是代码中的正确位置。

谢谢你的帮助！托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T20:31:01.630

我刚遇到问题。我通过 lldb 更改调试器 dbg 解决了这个问题。

# javascript - Highcharts 仪表不显示

> ID：14984774
> 
> 赞同：1
> 
> 时间：2013-02-20T16:21:39.267
> 
> 标签：javascript, highcharts, gauge

我对 Highcharts 量表有疑问。实际上，它没有显示，我有一个 JS 错误。

`TypeError: $[b.defaultSeriesType] is not a constructor`highcharts.js（第 159 行）

我有 3 个选项卡（使用 bootstrap/jquery），另外两个有 pie，这些没有问题。

我不明白，因为我刚刚从 Highcharts 网站复制了示例。有谁知道可能是什么原因造成的？

**编辑 ：**

这是JS的一部分

```
chart = new Highcharts.Chart({

                                chart : {
                                    renderTo : 'container',
                                    type : 'gauge',
                                    plotBackgroundColor : null,
                                    plotBackgroundImage : null,
                                    plotBorderWidth : 0,
                                    plotShadow : false
                                },

                                title : {
                                    text : 'Speedometer'
                                },

                                pane : {
                                    startAngle : -150,
                                    endAngle : 150,
                                    background : [
                                            {
                                                backgroundColor : {
                                                    linearGradient : {
                                                        x1 : 0,
                                                        y1 : 0,
                                                        x2 : 0,
                                                        y2 : 1
                                                    },
                                                    stops : [
                                                            [ 0, '#FFF' ],
                                                            [ 1, '#333' ] ]
                                                },
                                                borderWidth : 0,
                                                outerRadius : '109%'
                                            },
                                            {
                                                backgroundColor : {
                                                    linearGradient : {
                                                        x1 : 0,
                                                        y1 : 0,
                                                        x2 : 0,
                                                        y2 : 1
                                                    },
                                                    stops : [
                                                            [ 0, '#333' ],
                                                            [ 1, '#FFF' ] ]
                                                },
                                                borderWidth : 1,
                                                outerRadius : '107%'
                                            }, {
                                            // default background
                                            }, {
                                                backgroundColor : '#DDD',
                                                borderWidth : 0,
                                                outerRadius : '105%',
                                                innerRadius : '103%'
                                            } ]
                                },

                                // the value axis
                                yAxis : {
                                    min : 0,
                                    max : 200,

                                    minorTickInterval : 'auto',
                                    minorTickWidth : 1,
                                    minorTickLength : 10,
                                    minorTickPosition : 'inside',
                                    minorTickColor : '#666',

                                    tickPixelInterval : 30,
                                    tickWidth : 2,
                                    tickPosition : 'inside',
                                    tickLength : 10,
                                    tickColor : '#666',
                                    labels : {
                                        step : 2,
                                        rotation : 'auto'
                                    },
                                    title : {
                                        text : 'km/h'
                                    },
                                    plotBands : [ {
                                        from : 0,
                                        to : 120,
                                        color : '#55BF3B' // green
                                    }, {
                                        from : 120,
                                        to : 160,
                                        color : '#DDDF0D' // yellow
                                    }, {
                                        from : 160,
                                        to : 200,
                                        color : '#DF5353' // red
                                    } ]
                                },

                                series : [ {
                                    name : 'Speed',
                                    data : [ 80 ],
                                    tooltip : {
                                        valueSuffix : ' km/h'
                                    }
                                } ]
                            }); 
```

在我的html中我有这个

```
<div class="tab-pane fade" id="requetesSeconde">

            <div id="container"
                style="width: 400px; height: 300px; margin: 0 auto"></div>

        </div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:05:32.550

问题是您没有包含`highcharts-more.js`文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:53:49.163

这很奇怪，因为我复制了这个例子。可能是因为页面上的图表数量有问题。（第一个选项卡中的 3，第二个选项卡中的 1 和第三个选项卡中的仪表）

# javascript - 如果范围通过 ajax 填充，AngularJS 指令模板不会更新

> ID：14984777
> 
> 赞同：16
> 
> 时间：2013-02-20T16:21:44.660
> 
> 标签：javascript, angularjs

我试图给这个问题一个尽可能准确的标题。
我对 AngularJS 很陌生，但我对这个问题感到很困惑。我试图制作一个 jsfiddle 来更好地说明我的问题，但它依赖于太多单独的文件。唉，它还没有上线，所以请耐心等待。:)

所以基本上我有一个我用 构建的应用程序`yeoman init angular`，我的`app.js`样子是这样的：

```
"use strict"

var myApp = angular.module("myApp", [])
.config(function($routeProvider) {
    $routeProvider
    .when("/lineup", {
        templateUrl: "views/lineup.html",
        controller: "LineupCtrl"
    })
    //other routes
    .otherwise({
        redirectTo: "/"
    });
})
.directive("playerlist", function() {
    return {
        restrict: "E",
        transclude: false,
        scope : {},
        templateUrl : "views/directives/playerlist.html",
        controller : function($scope) {
            $.get("/players")
            .success(function(players) {
                $scope.players = players;
            });
        },
        replace : true
    }
}); 
```

我`index.html`拿起`app.js`并有一个引用的锚`#/lineup`，它有效地打开`views/lineup.html`；为简化起见，我们假设后者仅包含（自定义）`<playerlist></playerlist>`标签。
在指令的控制器函数中，我确信它`$.get("/players")`可以正常工作，因为我可以从 chrome 的网络选项卡中看到响应作为一组玩家正确地通过。
最后，我`views/directives/playerlist.html`有替换`<playerlist>`标签的代码，如下所示：

```
<table class="table table-striped">
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Role</th>
            <th>Strength</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="player in players">
            <td>{{player.first_name}} {{player.last_name}}</td>
            <td>{{player.age}}</td>
            <td>{{player.role}}</td>
            <td>{{player.strength}}</td>
        </tr>
    </tbody>
</table> 
```

我的想法是让“playerlist”指令独立`LineupCtrl`于我可能想在项目的其他地方重用它。
好的，这里是：当我单击`#/lineup`第一次加载的锚点时，`tbody`上表的元素是空的（没有附加行）；有趣的是，当我第二次单击它时，表格中正确地填充了我根据`$.get("/players")`指令获得的玩家。我怀疑这是由于 playerlist.html 的呈现和被分配的 $s​​cope.players 变量之间发生的轻微滞后。但这不是 Angular 应用程序的全部意义所在吗？当范围变量更改时，相应的视图（及其模板）会更新吗？
请帮忙！
干杯，

安德里亚

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-20T16:41:23.043

每当您在 Angular 函数之外更新范围变量时，您都需要告诉 Angular 发生了一些变化。见[`scope.$apply`](http://docs.angularjs.org/api/ng.$rootScope.Scope)。

```
$.get("/players")
.success(function(players) {
   $scope.$apply(function () {
     $scope.players = players;
   });
}); 
```

另一方面，Angular 有一个内置的[ajax 服务](http://docs.angularjs.org/api/ng.$http)，所以不需要使用 jQuery。可以在教程中找到一个很好的解释：[5 - XHRs & Dependency Injection](http://docs.angularjs.org/tutorial/step_05)。

# windows - 如何在没有 GUI 的情况下在 Windows Server 上安装/管理 Apache

> ID：14984778
> 
> 赞同：0
> 
> 时间：2013-02-20T16:21:47.690
> 
> 标签：windows, apache, cygwin, wamp

我正在尝试找出在 Windows 上安装/管理 Apache Webserver 的最佳方式。**我无法访问 GUI，我唯一可以访问的是`CYGWIN`over`SSH`**。

所以问题是如何做到这一点？

*   有没有办法从命令行运行`WAMP`安装程序？
*   或者你会推荐我和包装一起去`CYGWIN`吗？
*   这两种方法是否有替代方案？

编辑：我知道[Windows 上的 Apache Docs](http://httpd.apache.org/docs/2.4/platform/windows.html)，但如果你问我，它们真的很差。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:32:55.977

你可以：

1.  使用预编译的 CygWin 包，以这种方式安装：

    ```
    wget rawgit.com/transcode-open/apt-cyg/master/apt-cyg
    install apt-cyg /bin
    apt-cyg install apache 
    ```

2.  自己在 Cygwin 上编译和安装 apache，如下所示：

[http://httpd.apache.org/docs/2.4/platform/win_compiling.html](http://httpd.apache.org/docs/2.4/platform/win_compiling.html)

# mysql - 我如何在mysql中获得前5名

> ID：14984782
> 
> 赞同：2
> 
> 时间：2013-02-20T16:22:05.957
> 
> 标签：mysql, sql, database

我正在尝试从学生表中获得前 5 分。表看起来像这样。

```
 table: student

   id name   score

   1    a     100
   2    b     100
   3    c     90
   4    d     87
   5    e     85
   6    f     88
   7    g     83
   9    h     92 
```

如果我做

```
 select name,score from student order by score desc limit 5

   a    100
   b    100
   h     92
   c     90
   f     88 
```

但是，我想看到这个结果

```
 a    100
   b    100
   h     92
   c     90
   f     88
   d     87 
```

我试图找出重复的分数作为计数之一有任何解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:35:43.243

```
SELECT s.*
FROM student AS s
  JOIN
    ( SELECT DISTINCT score
      FROM student
      ORDER BY score DESC
          LIMIT 5
    ) AS lim
    ON s.score = lim.score 
ORDER BY s.score DESC ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:34:53.003

这是一种方法：

```
select s.*
from student s
where s.score >= (select score
                  from (select distinct score from student order by score desc limit 5) s
                  order by score
                  limit 1
                 ) 
```

这将在最内部的子查询中按降序获取分数。它将这限制为五个不同的分数。然后，它找到最小值，并返回所有具有此分数或更高分数的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:23:39.813

尝试使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)：

```
SELECT 
    score
    COUNT(*) AS score_count
FROM 
    student 
GROUP BY
    score
ORDER BY
    score desc 
LIMIT 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:17:35.170

这是[sql小提琴](http://sqlfiddle.com/#!2/271ecf/2)

```
 SELECT s.id, s.name,s.score FROM tbl_student AS s INNER JOIN (SELECT * FROM tbl_student ORDER BY score DESC LIMIT 0,5) AS s2 ON s2.id=s.id order by s.score desc 
```

# java - Eclipse：无法加载 JNI 共享库“C:\Program Files(x86)\Java\jdk1.7.0_15\bin\..\jre\bin\client\jvm.dll

> ID：14984783
> 
> 赞同：9
> 
> 时间：2013-02-20T16:22:07.673
> 
> 标签：java, eclipse, installation

我正在尝试安装 Eclipse。为了安装，我已经完成了以下操作。

*   安装JDK 7u15 64位（实际下载名称：jdk-7u15-windows-i586.exe）在C:\Program Files(x86)\Java\JDK 1.7.0_15

*   我在管理员中运行 cmd 并键入“C:\Users\Alfred>java -version”，这给了我“Java 版本”1.7.0_15”java(TM) SE Runtime Enviroment (build 1.7.0_15-b03) Java Hotspot(TM)客户端 VM（内部版本 23.7-b01，混合模式，共享）

*   在同一个 cmd 窗口中，我输入了“C:\Users\Alfred>javac -version”，这给了我“javac 1.7.0_15”

*最后两点应该意味着我的路径设置在正确的位置吗？*

*   我为Java开发人员下载了eclipse IDE 64位（实际下载名称：eclipse-java-juno-SR1-win32-x86_64.zip）并将其解压缩到我的桌面

*   我检查了我的系统是 64 位的三倍（开始>控制面板>系统>系统类型：64 位操作系统）

*   我从 C:\windows\system32 中找到并删除了 java.exe 和 javaw.exe，这解决了错误消息“C:\Program Files\Java\jre7\lib\amd64\jvm.cfg”

我现在的问题是当我尝试启动 Eclipse 时出现以下错误消息：

*   无法加载 JNI 共享库“C:\Program Files(x86)\Java\jdk1.7.0_15\bin..\jre\bin\client\jvm.dll

我已经确定这个 .dll 文件在那里。我环顾四周，每个人都说要确保一切都是 64 位的。我不知道现在该怎么办。我怎么修？非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T16:29:52.660

jdk-7u15-windows-i586.exe 不是 64 位的。

重新安装 64 位的 Java 7。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-21T03:36:17.283

如果您安装了 64 位 java（您正在运行 64 位 Windows，`c:\program files\java\jre7`例如 - `not program files (x86)`！）但您仍然收到此错误，则您路径上的第一个 java 很可能是 32 位。

（您可以通过从 cmd.exe 运行来检查这一点`java -version`，如果您没有看到文本`64-bit`[eg `Java HotSpot(TM) 64-Bit`]，那么您的路径上首先有 32 位 java。）

如果您有许多 eclipse 副本（可能用于黑莓 7 开发），那么将路径更改为指向 64 位 java 可能会让您头疼。

相反，您可以编辑 eclipse.ini 文件（在 Android SDK 的 eclipse 目录中）并添加以下行：

```
-vm
C:\Program Files\Java\jre7\bin\javaw.exe 
```

下面它们显示在整个文件的上下文中：

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120913-144807
-product
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256M
-showsplash
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Program Files\Java\jre7\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms40m
-Xmx768m
-Declipse.buildId=v22.2.1-833290 
```

这指示 eclipse.exe 在哪里可以找到 java VM，而不依赖于系统环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:33:33.863

除了安装 64 位 JVM，您可能还需要修改系统路径以覆盖从 Windows\System32 指向的任何 JVM。只需在 Windows\System32 之前的路径中引用 JVM 安装的 \bin 目录即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-28T09:13:08.797

它也对我有用，我在我的 64 位操作系统上安装了 32 位 JDK，现在我用 64 位更新了我的 JDK .. 像魅力一样解决了这个问题..

我了解到 32 位 JDK 在 64 位操作系统上仍然可以正常工作，没有任何问题，直到您安装 64 位应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-26T06:28:34.010

这可能与主机上安装的多个 JDK 版本（包括自动更新）发生冲突。尝试卸载重复的更新版本，它可以工作。[![就我而言，我已经卸载了 JDK 7 的重复更新。](../Images/80c8b6e11b67db9e49466fd4860676c1.png)](https://i.stack.imgur.com/QJmhW.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-01T12:36:15.717

最可靠的解决方法是将 JVM 位置添加到`eclipse.ini`：

```
-vm 
C:/Program Files/Java/jdk1.8.0_112/jre/bin/server/jvm.dll 
```

重要提示：这两行必须在 之前`-vmargs`和之后`org.eclipse.platform`。
不要使用引号；允许空格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-13T10:47:12.470

这个错误是由于**Eclipse**和**JDK**安装版本不匹配造成的。要么你的**Eclipse**在`32-bit`并且**JVM**在`64-bit`，反之亦然。

# jquery - 如何使用 jQuery 根据控制器操作结果有条件地更改 CSS 类？

> ID：14984784
> 
> 赞同：0
> 
> 时间：2013-02-20T16:22:09.187
> 
> 标签：jquery, css, asp.net-mvc

我已经看到了一些类似的帖子，但没有什么能模仿我正在寻找的行为。使用我的简单 ASP.Net 应用程序，当提交表单时，控制器方法的结果存储在 TempData 中。基于该插槽中存在的值，我想更改（设置）标签的 CSS 类（更改颜色）。我有以下有效的查看代码：

```
 <p>
    <input type="submit" name="submitAction" value="Test Connection" />
    @if (TempData["connectionResults"] != null)
    {
        <span class="@(TempData["connectionResults"].ToString() 
                         == "Connection successful" ?
                            "dbConnectionSuccess" : "dbConnectionFail")">
           @TempData["connectionResults"]
        </span> 
    }
    </p> 
```

我的问题是，有没有更优雅的方式用 javascript 或 jQuery 来做这件事？SO上有很多帖子可以做类似的事情，但不是关于控制器中动作调用的结果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:41:06.160

您可以在 document.ready 中使用 JQuery 执行此操作。例如

```
$(document).ready(function () {
     var resultString= '@TempData["connectionResults"].ToString()';

     if (resultString != null && resultString.toLowerCase() == 'connection successful') {
          $('#spanID').addClass('dbConnectionSuccess');
     } else {
          $('#spanID').addClass('dbConnectionFail');
     }
}); 
```

你必须给你的'span'标签一个ID。这也必须在您的 .cshtml 文件中，以便服务器处理 @TempData。

这比上述 IMO 更整洁，但仍然不是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:29:00.210

最终，我想我明白了你们执行逻辑服务器端的意思。我以为你的意思是从控制器返回类名......我认为你的意思是从控制器返回测试结果。这就是我最终的结果：

```
<p>
    <input type="submit" name="submitAction" id="testConnection" value="Test Connection" />
    @if (@Model.IsDbConnectionSuccessful != null)
    {
        if (@Model.IsDbConnectionSuccessful.Value)
        {
            <span class="dbConnectionSuccess">Connection successful</span>                    
        }
        else
        {
            <span class="dbConnectionFail">Connection  Unsuccessful</span>                     
        }               
    }
</p> 
```

# java - 在 XPages 上传中从 LotusScript 调用 Java 代理

> ID：14984785
> 
> 赞同：0
> 
> 时间：2013-02-20T16:22:08.993
> 
> 标签：java, xpages, lotus-domino

我正在使用带有标准文件上传控件的 XPage 上传文件。在数据源上，我有一个 WebQuerySave 代理。

WQS-agent 在 LotusScript 中。

用户正在上传一个 XML 文件，我们有一个现有的帮助程序库来帮助解析正在上传的 XML - 这就是 WQS 在 LotusScript 中的原因。

由于我无法将上传的文件分离到服务器，我正在调用 Java 代理来将 XML 读取为字符串并将其存储在文档中。

我正在使用参数文档调用 Java 代理，所有基本内容。

在参数文档中，我包含了包含附件的文档的 UniversalID，这是我的问题！

Java 代理声称 UniversalID 无效：

“HTTP JVM：4091 无效的通用 ID”

但是，如果我尝试在 LotusScript 代理中查找文档，则在调用 Java 代理之前使用相同的 UNID 找到该文档： Set tempDoc = db.Getdocumentbyunid(unid)

Java 代码：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import lotus.domino.Agent;
import lotus.domino.AgentBase;
import lotus.domino.AgentContext;
import lotus.domino.Database;
import lotus.domino.Document;
import lotus.domino.NotesException;
import lotus.domino.Session;

public class JavaAgent extends AgentBase {
    public void NotesMain() {
        try {
            Session session = getSession();
            AgentContext agentContext = session.getAgentContext();
            Database db = agentContext.getCurrentDatabase();
            Agent agent = agentContext.getCurrentAgent();

            // Get document used for passing data
            System.out.println(agent.getParameterDocID());

            Document paramDoc = db.getDocumentByID(agent.getParameterDocID());
            String UniversalID = paramDoc.getItemValueString("unid");

            System.out.println(UniversalID);
            Document doc = db.getDocumentByUNID(UniversalID); 
```

当我运行 Java 代理时，我不会从打印命令中得到任何东西，但也许这是意料之中的......（？）

如果我在现有文档上手动运行所有内容，它就可以工作。但不是通过浏览器提交的文件。

对我来说，感觉包含附件的文档还没有准备好用于 Java。

多米诺骨牌 8.5.3

非常感谢任何帮助！

/J

PS我是Java新手，所以你知道.. ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:14:32.943

我似乎记得上下文文档有一个临时 UNID，当您调用 save() 方法时，它会更改为其永久值。所以我最好的猜测是，您的 LotusScript 代码在保存之前正在读取上下文文档的 universalId 属性。

因此，如果我是对的，只需将您的调用移动到 LotusScript 代理中获取 universalId 属性，直到您保存上下文文档并将该值传递到您的 Java 代理中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:37:24.410

您可以将扩展库与 extlibx 包一起使用吗？如果是这样，那么已经内置了一个 XML 解析器，sbt.XmlNavigator。请参阅 XPages Extension Library 书的第 13 章。避免调用调用 Java 代理的 LotusScript 代理可能值得一看。您可以使用 Java 中的这些包，但也可以使用 SSJS。撕掉创可贴并使用它（或另一个基于 Java 的 XML 解析器，我相信有一些）可能更容易。现在可能有点工作，但对未来会更有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:58:05.957

我可以解决它的唯一方法是将 documentContext 中的所有项目复制到我在数据库中创建的新文档中。

*   保存那个
*   检索此新文档的 UNID
*   将其传递给 agent.run - java，它成功了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:14:46.237

`paramDoc`请记住在将其传递给 Java 代理之前保存在 LotusScript 代理中。

# assembly - 在 x86_64 上组装 i386 代码

> ID：14984788
> 
> 赞同：2
> 
> 时间：2013-02-20T16:22:14.710
> 
> 标签：assembly, x86, offset, gnu-assembler, i386

以下代码无法按预期工作：

```
.intel_syntax noprefix
.arch i386
.data
hello_world:
.ascii "Hello world!\n"
hello_world_end:
.equ hello_world_len, hello_world_end - hello_world
.text
.global _start
_start:
mov ebx, 1
mov ecx, hello_world
mov edx, hello_world_len
mov eax, 4
int 0x80

mov ebx, 0
mov eax, 1
int 0x80 
```

当跑过：

```
as test.s -o test.o
ld test.o -o test
./test 
```

它什么也不输出。当我换行时：

```
mov ecx, offset hello_world ; added offset 
```

它工作正常。我尝试编译原始代码`--32 -march=i386`并链接，`-m elf_i386`但它仍然没有输出任何内容。

```
$ uname -a
Linux ubuntu 3.2.0-38-generic #60-Ubuntu SMP Wed Feb 13 13:22:43 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux 
```

我猜这是因为内存模型不像 i386 那样平坦。我可以以某种方式模仿吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:26:38.057

这与内存模型无关。

在气体语法`mov ecx, hello_world`中意味着**从内存地址读取** `hello_world`，这可以通过检查使用 ndisasm 完成的反汇编来确认：

```
00000000  BB01000000        mov ebx,0x1
00000005  8B0C25D4104000    mov ecx,[0x4010d4]
0000000C  BA0D000000        mov edx,0xd
00000011  B804000000        mov eax,0x4
00000016  CD80              int 0x80 
```

你想要的是**存储**`hello_world`. 在gas中实现的方式是`mov ecx, offset hello_world`，从拆卸中可以确认：

```
00000000  BB01000000        mov ebx,0x1
00000005  B9D4104000        mov ecx,0x4010d4
0000000A  BA0D000000        mov edx,0xd
0000000F  B804000000        mov eax,0x4
00000014  CD80              int 0x80 
```

顺便说一句，将内存地址加载到寄存器中的另一种方法是.[`lea`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/lea.html)`ecx, hello_world`

其他一些汇编器（如 NASM 和 YASM）有不同的语法，这种差异可能会引起混淆，可以用一张小表来说明：

```
gas                           NASM/YASM                ndisasm disassembly
mov ecx,hello_world           mov ecx,[hello_world]    mov ecx,[0x4010d4]
mov ecx,[hello_world]         mov ecx,[hello_world]    mov ecx,[0x4010d4]
mov ecx,offset hello_world    mov ecx,hello_world      mov ecx,0x4010d4 
```

# php - 如何让 Doxygen 创建 PHP 包含依赖关系图？

> ID：14984790
> 
> 赞同：2
> 
> 时间：2013-02-20T16:22:21.497
> 
> 标签：php, graph, include, doxygen

我已将 SHOW_INCLUDE_FILES、ENABLE_PREPROCESSING、MACRO_EXPANSION、SEARCH_INCLUDES、INCLUDE_GRAPH、INCLUDE_BY_GRAPH 和点相关标志设置为 YES。类和协作图显示得很好。

我尝试转换/过滤 php

```
(require|include)(_once)? <path>; 
```

声明

```
include <path>;
#include <path>;
#include <path> 
```

但他们都没有工作。路径是相对于当前目录和 Doxygen 的输入。尝试谷歌搜索并搜索 doxygen 邮件列表存档和 SO。没运气。

有没有人让 PHP 包含依赖关系图来工作？

# mercurial - Mercurial - 关闭默认分支并将命名分支替换为新的默认分支

> ID：14984793
> 
> 赞同：17
> 
> 时间：2013-02-20T16:22:33.650
> 
> 标签：mercurial, branching-and-merging

在一个 mercurial 存储库中，“默认”分支已经过时，以至于合并来自“开发”的更改不再有意义，“开发”是一个具有应用程序最新部署版本的命名分支。

我如何关闭当前的默认分支，然后使用开发的头创建一个新的默认分支，而不是将开发合并为默认分支？

我已经看到了一些其他类似的问题和答案，也许相同，但我仍然无法理解这应该如何工作。

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-20T22:51:44.373

如果与合并后`default`有所不同，`develop`并且您希望与合并后`default`完全相同`develop`，则需要一组与 Edward 给您的命令略有不同的命令（这也适用于`develop`的直接后代`default`）。

```
hg update -C default
hg -y merge --tool internal:fail develop
hg revert --all --no-backup -r develop
hg resolve --all --mark
hg commit -m "merge updating default to current develop" 
```

这意味着任何冲突都将导致未解决的合并。*然后，您将所有内容*恢复为与分支上的相同`develop`（没有备份，因此您不会留下很多 .orig 文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:52:29.583

根据您的评论，关闭分支不是必需的，这里有一系列步骤应该使默认分支与开发分支保持一致：

1.  `hg update default`
2.  `hg merge --tool internal:other`-- 在获得开发分支特权的同时进行合并
3.  `hg diff -r develop`-- 与 develop 进行比较以确保您拥有准确的副本
4.  `hg commit -m "merge updating default to current develop"`

完成后，您应该有一个更新的默认值来反映开发分支，使它们重新同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:02:32.290

我认为最好使用 Tortoisehg 中的一个概念来解释它是如何工作的。

*   `hg update`发展分支
*   选择默认分支的头，并选择与本地合并
*   然后选择discard all changes from merge target (other)，这样默认就被合并到develop而不影响develop
*   然后从开发头分支到默认，使用`hg branch default`，默认重新启动

# ubuntu - 如何在 aws 上将 ubuntu 节点从 12.11 降级到 12.04 LTS？

> ID：14984799
> 
> 赞同：0
> 
> 时间：2013-02-20T16:23:00.800
> 
> 标签：ubuntu, amazon-web-services, ubuntu-12.04

我们的节点最初在 aws 上使用 ubuntu 12.04 LTS 运行。但不知何故，操作系统本身就被提升到了 12.11（在开发分支上）。我们如何将节点降级到 ubuntu 12.04 LTS 并尽可能长时间地保留操作系统？

aws 控制台上是否有允许我们更改操作系统版本的配置？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T09:13:50.563

Ubuntu 不是为回滚而设计的。如果您在 LTS 分支上并且您的`sources.list`文件没有被更改并且`dist-upgrade`没有运行，那么系统应该没有升级的理由。

您最好的方法是创建一个新实例，或者，如果您创建了一个快照（使用 EBS）从中恢复。

# matlab - 在字符串中添加撇号 - Matlab

> ID：14984804
> 
> 赞同：16
> 
> 时间：2013-02-20T16:23:10.810
> 
> 标签：matlab, apostrophe, punctuation

我想在字符串中放一个撇号来表示所有格，但它结束了字符串，我怎么能放一个。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-20T16:26:08.640

```
yourString = 'This is the answer to Tessa''s question.'; 
```

（即，您将使用双撇号。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T16:26:42.273

`'`在`'`撇号后面再加一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T04:44:25.573

\Usepackage[{amsfont} \vtick 在单词的 s 之前或之后放置一个撇号。例如，teacher's 将输入为 teacher\vtick s。好？

# batch-file - 为旧安装程序创建 AnswerFile 的批处理文件

> ID：14984806
> 
> 赞同：1
> 
> 时间：2013-02-20T16:23:12.073
> 
> 标签：batch-file, cmd

我在让“MOVE”在我的脚本中工作时遇到问题......我正在为一个旧安装程序制作一个答案文件，但我无法让移动实际工作，它一直说找不到路径， 有任何想法吗？我已经为此奋斗了一段时间，我想我正处于我只需要其他人来看看它的地步。

```
@echo off

set /p exeLoc=Drop .EXE here: 
REM removing quotes
set exeLoc=%exeLoc:"=%
REM stripping filename from path
for %%i in (%exeLoc%) do set exeLoc=%%~dpi 
REM setting exeLoc   
set exePath=%exeLoc%

set /p fileName=Name of .ISS file to save: 
REM identifies if the filename contains the proper suffix (.iss)
if x%fileName:.iss=%==x%fileName% set fileName=%fileName%.iss
cls

echo.%exePath%
echo.%fileName%
echo.
echo.Please wait, this may take some time...

verify >nul
REM creates record of install
%exeLoc% -r
echo.

set moveDir=%exePath%\%fileName%
set fromDir=C:\Windows\setup.iss
verify >nul
move /Y %fromDir% %fileName%
echo.

IF '%ERRORLEVEL%'=='0' echo.Answer file moved to& echo.%moveDir%
IF NOT '%ERRORLEVEL%'=='0' echo.There as an issue moving& echo.%fromDir%& echo.to& echo.%moveDir%
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:22:59.210

我想我能帮上忙...

我曾经遇到过与您遇到的类似的问题-您似乎只需要重新安排处理第一个变量的方式即可。

我看到您首先收集 .exe 的完整位置+文件名，然后删除引号，但我认为这是问题所在。先试试你的“for %%i”。

当我在测试你的脚本时，我在它的末尾遇到了同样的错误（我 REM 删除了你的 %exeLoc% -r，因为没有必要找到你的错误）。问题是由于某种原因它给了我重复的路径。我将我的位置埋在大约 5 个文件夹深处和带有空格和数字的文件夹中，以尝试重新创建最脏的结构（C:\Test Test\first\2nd Folder\2013）。我还认为将目录更改为我尝试写入的位置是合适的。不确定这是否是必要的，但我发现这是一种很好的做法。

这就是我最终不得不将您的第一个变量函数更改为：

```
set /p exeLoc=Location of .EXE: 
set exePath=%exeLoc%
for %%i in (%exePath%) do set exePath=%%~dpi
set exePath=%exePath:"=%
cd %exePath% 
```

完整的脚本在这里：

```
@echo off

set /p exeLoc=Location of .EXE: 
set exePath=%exeLoc%
for %%i in (%exePath%) do set exePath=%%~dpi
set exePath=%exePath:"=%
cd %exePath%
set /p fileName=Name of .ISS file to save: 
if x%fileName:.iss=%==x%fileName% set fileName=%fileName%.iss
cls
echo.%exePath%
echo.%fileName%
echo.
echo.Please wait, this may take some time...
verify >nul
%exeLoc% -r
echo.
set moveDir=%exePath%\%fileName%
set fromDir=C:\Windows\setup.iss
verify >nul
move /Y %fromDir% %fileName%
echo.
IF '%ERRORLEVEL%'=='0' echo.Answer file moved to& echo.%moveDir%
IF NOT '%ERRORLEVEL%'=='0' echo.There as an issue moving& echo.%fromDir%& echo.to& echo.%moveDir%
pause 
```

# asp.net-mvc-4 - @Html.ActionLink 与 ko 数据绑定

> ID：14984807
> 
> 赞同：0
> 
> 时间：2013-02-20T16:23:12.830
> 
> 标签：asp.net-mvc-4, knockout.js

首先，是否可以`@Html.ActionLink`与敲除绑定一起使用？

如果是的话，我会怎么写？

这就是我需要的：

```
@Html.ActionLink( [I want display QuestionID() - a ko view model property] , "Question [controller action name]", "Project [controller name]", new { project = [here should be ProjectID() - a ko view model property]  id = [here should be QuestionID() - a ko view model property] }, new Dictionary<string, object> { { "data-bind", "title: 'View detailed question page'" } })) 
```

简单来说，它在渲染时应该如下所示：

> [https://plus.google.com/photos/105612417165831662125/albums/5847070406315217649?authkey=CPqQ2oGYn46GFQ](https://plus.google.com/photos/105612417165831662125/albums/5847070406315217649?authkey=CPqQ2oGYn46GFQ)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:27:55.407

您当然可以`data-bind`在 ActionLink 中包含属性；看看[这个问题及其](https://stackoverflow.com/questions/2520487/how-to-use-html-5-data-attributes-in-asp-net-mvc)如何做到这一点的答案。但请记住，Knockout 纯粹是客户端，因此当您希望 Knockout 与 MVC 对话时，您需要发出某种 AJAX 请求。

# c# - 根据 MVC Web 应用程序中的下拉选定项更改更新部分视图模型

> ID：14984809
> 
> 赞同：1
> 
> 时间：2013-02-20T16:23:15.570
> 
> 标签：c#, asp.net-mvc, razor

无法找到解决此问题的方法。

表单的一部分包含一个多行表，其中显示在活动中具有分配角色的用户。它是与许多其他部分的复杂形式的一部分。

我想根据可用用户的下拉列表更改用户，并将其反映在 ViewModel 中，这样当在表单上单击后续“保存”按钮时，更改的用户将被保存回数据库。我一直试图弄清楚如何做到这一点。

我有以下 javascript 来响应 dropdwonlist 更改事件，它在更改事件上按预期工作，但不知道如何更新 ViewModel。

```
 $("#RecipientsName").change(function () {
        var url = '@Url.Action("GetUser","Controller")';
        var data = { id: $(this).val() };
        $.ajax({
            type: 'Get',
            url: url,
            contentType: 'application/json; charset=utf-8',
            data: data,
            dataType: 'json',
            success: function (userInfo) {
                $('#UpdatedRecipientName').text('Hey');  // This does update the view
                alert(userInfo.Result);
            },
            error: function (userInfo) {
                alert('Failed');
            }
        });
    }); 
```

这是控制器中的方法，它只是返回此时传入的字符串。

```
 public ActionResult GetUser(string id)
    {

        return Json(new {Result = id},JsonRequestBehavior.AllowGet);
    } 
```

看起来这应该是一件相当容易完成的事情，但目前还没有找到解决方案。也许我正在接近这一切都是错误的，希望有人能指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:36:14.963

MVC 根据控件的名称解释视图模型。

因此，如果说您的视图模型看起来像这样：

```
public class MyViewModel
{
    public string SomeProperty1 {get;set;}
    public string SomeProperty2 {get;set;}
} 
```

在你的表格上，你应该有这样的东西：

```
<input type="text" name="SomeProperty1"/>
<input type="text" name="SomeProperty1"/> 
```

全视图示例：

```
@model TestMVC.Models.MyViewModel

<h2>TestAction</h2>

<script>
    function ChangeValue() {
        var textbox = document.getElementById('MyElementToChange1');
        textbox.value = 'Property 5';
    }
</script>
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>MyViewModel</legend>

    Some Property 1
            <input name="SomeProperty1" type="text" value="@Model.SomeProperty1" id="MyElementToChange1"/>

            Some Property 2
            <input name="SomeProperty2" type="text" value="@Model.SomeProperty2" id="MyElementToChange2"/>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
<input type="button" value="Change Value" onclick="ChangeValue()"/>
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

您提交给的控制器可以具有以下内容：

```
 public ActionResult TestAction()
    {
        MyViewModel viewModel = new MyViewModel();
        viewModel.SomeProperty1 = "Property 1";
        viewModel.SomeProperty2 = "Property 2";
        return View(viewModel);
    }

    [HttpPost]
    public ActionResult TestAction(MyViewModel viewModel)
    {
        return View(viewModel);
    } 
```

在此示例中，如果您单击视图中的按钮，它会将 SomeProperty1 的值更改为 5，如果您检查 ActionResult TestAction(MyViewModel viewModel) 方法，您会看到 SomeProperty1 的值是 5 .

使用 javascript 只需更新与要更新的属性同名的输入控件，它将用作提交给 Action 的视图模型的一部分。请注意，您不能为此使用标签 - 如果您有一个您希望用户无法修改的属性，您应该使用隐藏的输入来存储该值。

**编辑：在视图中添加了更多内容以显示 javascript**

# ios - 分组 UITableViewCell 中的 clipsToBounds 和 maskToBounds

> ID：14984812
> 
> 赞同：6
> 
> 时间：2013-02-20T16:23:16.737
> 
> 标签：ios, uikit, quartz-core, cglayer

我试图让我的角被包含它`UITextView`的分组的圆角掩盖。`UITableViewCell`这是当前单元格的屏幕截图

![分组 UITableViewCell 内的 UITextView](../Images/cbc915ebf7f24a9a7cb8af191e77c826.png)

这是我用来防止角落与单元格边框重叠的一些代码。我都试过了

```
cell.contentView.layer.masksToBounds = YES;
cell.layer.masksToBounds = YES;  //tried this as a test, still doesn't work
detailTextView.clipsToBounds = YES;
[cell.contentView addSubview:detailTextView]; 
```

和

```
cell.layer.masksToBounds = YES;
cell.contentView.layer.masksToBounds = YES;
detailTextView.clipsToBounds = YES;
[cell addSubview:detailTextView]; 
```

这显然不起作用，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T11:37:34.060

我也遇到了同样的问题

不同之处在于我使用的是普通样式，并且我正在尝试使每个单元格都带有圆角。最后，我做到了，这是我的方法：

1.把这段代码放在你自定义tableViewCell的awakeFromNib方法中

```
 [cell.layer setMasksToBounds:YES];
    [cell.layer setCornerRadius:5.0]; 
```

2\. 将您自定义的TableViewCell 的contentview 的背景颜色设置为白色，然后将您的tableView 的背景颜色设置为清除颜色。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T16:30:01.770

我很确定你不能用这种方式掩盖角落。单元格`backgroundView`是分组的图像，`UITableView`因此没有掩蔽感。

解决这个问题的一个可能方法是自己绕过角落。这有点棘手，因为您只想圆顶单元格的顶角和底部单元格的底角。幸运的是，@lomanf 在这里发布了一个很好的解决任意圆角的方法：[在 UIView 中圆两个角](https://stackoverflow.com/questions/4847163/round-two-corners-in-uiview/4930166#4930166)。使用他的`MTDContextCreateRoundedMask`方法，我们可以实现我们的目标。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Other cell instantiation

    // First cell in section
    if (indexPath.row == 0) {
        [self roundTopOrBottomCornersOfCell:cell top:YES];       
    }
    // Last cell in section
    else if (indexPath.row == tableView.numberOfRowsInSection:indexPath.section-1) {
        [self roundTopOrBottomCornersOfCell:cell top:NO];
    }
}

// Modified from the second part of @lomanf's Solution 1
- (void)roundTopOrBottomCornersOfCell:(UITableViewCell*)cell top:(BOOL)top {
        // Set constant radius
        CGFloat radius = 5.0;

        // Create the mask image you need calling @lomanf's function
        UIImage* mask;
        if (top) {
            mask = MTDContextCreateRoundedMask(self.view.bounds, radius, radius, 0.0, 0.0);
        }
        else {
            mask = MTDContextCreateRoundedMask(self.view.bounds, 0.0, 0.0, radius, radius);
        }

        // Create a new layer that will work as a mask
        CALayer* layerMask = [CALayer layer];            
        layerMask.frame = cell.bounds;

        // Put the mask image as content of the layer
        layerMask.contents = (id)mask.CGImage;

        // Set the mask layer as mask of the view layer
        cell.layer.mask = layerMask;
} 
```

# html - cgSceneGraph 1.4.2 的一些注意事项

> ID：14984819
> 
> 赞同：0
> 
> 时间：2013-02-20T16:23:24.270
> 
> 标签：html, canvas, rotation, keypress, nodes

我有几个关于 cgSceneGraph 1.4.2 的问题

**节点顺序** 我想知道是否有办法更改画布内节点的索引。如果我们有多个节点，我创建它们的顺序就是它们在画布中的顺序，但是如果有一种方法可以改变它们的顺序，那就太好了。这样一个大节点就不会覆盖以前的节点，甚至阻止你访问它们。

删除所有节点并以不同的顺序重新绘制所有节点是否有意义？这对 CPU 内存要求不高吗？

对此还有其他想法或解决方案吗？

**键盘按键** 有没有办法只在画布内锁定键盘按键？例如，我们可能在页面内有画布，而表单也可能存在。如果我们使用表单插入一些文本，那么按键也会传递到画布。

为了捕捉我使用的按键事件

```
document.onkeydown = function (event) {
    scope.onKeyDown(event);
};
document.onkeyup = function (event) {
    scope.onKeyUp(event);
}; 
```

**节点旋转** 有没有办法以与用户调整大小/缩放节点相同的方式旋转节点？也许通过使用键作为限定符来启用旋转以防止调整大小？

很抱歉所有这些问题。感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:54:45.617

这里有3个问题:)

第一个：cgSceneGraph 将按照添加的顺序渲染节点。因此，要更改 z-index（框架上没有 z-index），您必须使用这两种方法（这就是我们在应用程序中使用的方法）：

```
CGSGNode::detachChild  // will detach the child from its parent without destroy it. To destroy it, use "removeChild" instead 
```

和

```
CGSGNode::addChild(childNode); // or "accChildAt(index)" 
```

它非常快，因此您可以实时使用它。

第二个：cgSceneGraph 已经捕获了键盘事件（主要用于多选）。如果您想覆盖它，您必须为您的处理程序方法命名，该名称与框架使用的方法不同。

第三个问题：这不是“原生”功能。通过扩展框架总是可能的（这是非常可扩展的），但它将成为 cgSceneGraph v2 的一部分（发展的好方法:)）。在框架的 V1 上旋转已经完全可以，但是所选对象的边界框还没有（在 v1 中）实际旋转。

希望这有帮助

# jquery - 动态创建时未将连接器样式应用于 jsPlumb 连接器

> ID：14984820
> 
> 赞同：6
> 
> 时间：2013-02-20T16:23:25.053
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jsplumb

**更新 - 1**

这是**[我的 JSFiddle](http://jsfiddle.net/XbcZv/)**。

在这个例子中。我已经连接了 DOM 加载的前两个 div。

在这行代码中

**JSPlumb**

```
jsPlumb.connect
            (
                {
                    source: 'A',
                    target: 'B',
                    anchors: ["RightMiddle", "LeftMiddle"],
                    paintStyle: { strokeStyle: "#ff9696", lineWidth: 8 },
                    connector: ["Flowchart", { curviness: 63}],
                    connectorStyle: [{
                        lineWidth: 3,
                        strokeStyle: "#5b9ada"
                    }],
                    hoverPaintStyle: { strokeStyle: "#2e2aF8", lineWidth: 8 }
                }
            ); 
```

我正在通过连接器样式。

**查询**- 我想将源端点和目标端点显示为绿色和 Ping。现在它显示为蓝色。

**原来的**

我最近接手了一个被其他开发人员留下的未完成的开发项目。在项目中，我们需要能够在 2 个元素之间绘制连接器。为此，原始开发人员使用[了 jsPlumb](http://jsplumbtoolkit.com/jquery/demo.html)。当我手动创建连接器时，该库工作正常并产生结果。但现在我想做的是动态创建一个连接器。阅读 jsPlumb 的[文档](http://jsplumbtoolkit.com/doc/usage.html)我试图这样做，但它没有产生我想要的结果。

这就是我手动创建时的情况（注意目标元素处的颜色和箭头） ![在此处输入图像描述](../Images/7ab02304ac8fbcfd5677a1a4bcd8aef9.png)

但是如果我自动创建它，我不会得到这个颜色和箭头。这是我为测试而创建的[小提琴。](http://jsfiddle.net/p42Zr/)我正在做的是调用`jsPlumb.connect();`和传递参数。

```
jsPlumb.connect({
    source: "page-1",
    target: "page-2",
    anchors: [
        [1.06, 0.5, 0, 1],
        [-0.06, 0.5, 0, 0]
    ],
    endpoint: ["Dot", {
        radius: 4
    }],
    endpointStyle: {
        fillStyle: "#5b9ada"
    },
    setDragAllowedWhenFull: true,
    paintStyle: {
        fillStyle: "#5b9ada",
        lineWidth: 5
    },
    connector: ["Straight"],
    connectorStyle: [{
        lineWidth: 3,
        strokeStyle: "#5b9ada"
    }],
    connectorOverlays: [
        ["Arrow", {
            width: 10,
            length: 10,
            foldback: 1,
            location: 1,
            id: "arrow"
        }]
    ]
}); 
```

谁能指出错误在哪里？

问候

杰汉则布·马利克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T10:38:08.587

由于 jsPlumb 文档是一团糟，我有点惊讶这种问题在 stackoverflow 中并没有更频繁地出现。这是不对的：

paintStyle.fillStyle 似乎不再存在了......没有演示使用它，但是只要在连接调用中定义了paintStyle，文档仍然会引用它。奇怪，但 strokeStyle 完美地完成了这项工作。

```
 paintStyle: {
        strokeStyle: "#5b9ada",
        lineWidth: 3
    }, 
```

除此之外，我的建议是（即使您更改该行，一切都会正常）是在 jsPlumb.ready 上调用 jsPlumb

```
 jsPlumb.bind("ready", function() { // your connection code here... }); 
```

查看更新的小提琴：http: [//jsfiddle.net/p42Zr/5/](http://jsfiddle.net/p42Zr/5/)

编辑：

问题在加载页面和我的答案之间发生了变化，我没有注意到。直到这里的答案都是关于原始的。

另一个小提琴的问题有点不同，发生的事情是 jsPlumb 在已经定义的端点之上创建了新的端点。有两种方法可以改变它。从中检索端点`var myendpoint = jsPlumb.addEndpoint( ... )`并稍后使用此变量来连接它们。在这种情况下，更简单的方法是添加`endpoint: ["Blank"]`选项。**（编辑）**将端点样式设置为“空白”意味着不会绘制任何端点，这会导致连接和之前定义的两个端点**（/EDIT）**。查看更新的小提琴：http: [//jsfiddle.net/XbcZv/1/](http://jsfiddle.net/XbcZv/1/)

**编辑** 回答评论中提出的问题：如何在连接上显示指针光标？

只需添加：

```
._jsPlumb_connector {
    cursor: pointer;
} 
```

**/编辑** 到您的CSS。对于端点上的 css 更改，请编辑 css 类 _jsPlumb_endpoint。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T06:16:33.077

设置端点的样式可能会解决问题。

Endpoint 的 connectorStyle 是重中之重。因此，如果您设置了端点的连接器样式，那么您的连接器的绘制样式将不起作用。

connector.js中jsplumb的设置绘制样式源码：

```
 this.setPaintStyle(this.endpoints[0].connectorStyle || 
                       this.endpoints[1].connectorStyle || 
                       params.paintStyle || 
                       _jsPlumb.Defaults.PaintStyle || 
                       jsPlumb.Defaults.PaintStyle, true); 
```

# matlab - 查找到海洋的距离/向量的交点

> ID：14984828
> 
> 赞同：1
> 
> 时间：2013-02-20T16:23:40.650
> 
> 标签：matlab, gps, maps, distance

我对美国大陆许多点到海洋的 W、NW、SW 距离感兴趣。[出于测试目的，我在 500 m（32x32 像素） GMTED2010](http://topotools.cr.usgs.gov/GMTED_viewer/)和垂直海岸线上循环通过 1/8 度 dem 。我环顾了这个站点并因此实现了 pdist2 函数，但是我没有得到我期望的结果。所以我的第一个问题是我是否在概念上是错误的，第二个问题是我的 pdist2 实现是否不正确？我也对其他解决方案持开放态度。

考虑到方向约束，我希望在所有 3 个方向上看到相同的模式。最西边的像素列将具有相同的距离，下一列将是相同的，等等，所以当我绘制一个 32x32 矩阵`dlong`使用时，`imagesc`我得到一个从低到高、从左到右的渐变。

```
%**************
%For those truly interested, you can download the DEM and get Z and R accordingly:
[Z120,R120]=geotiffread('~/path/to/tif/GMTED2010N30W120_150/30n120w_20101117_gmted_mea150.tif');
[Z150,R150]=geotiffread('~/path/to/tif/GMTED2010N30W150_150/30n150w_20101117_gmted_mea150.tif');
Z=[Z150 Z120];
R=R120;
Z=Z(:,6001:4800+7200); %crop Z from -100 to -125\. use latlon2pix to confirm between sub-z and z
R.Lonlim=[-125, -100]; 
R.RasterSize=size(Z);
clear Z150 Z120 R150 R120

%******* HERE STARTS THE ALGORITHM
%coastline (ultimately will be from the coast library)
latlim=[0.25:.25:60];
lonlim=ones(length(latlim),1)*-110

%variables r and c are the row and column indices for the point I'm interested in. r and c are relative to a DEM for the entire western USA so a point in Colorado is something like 2370,4350.
rstart=2370;
cstart=4350;

for r=2370:2370+31
    for c=4350:4350+31   
        %rows and cols are the vectors in the NW direction from point r,c.
        %in the SW direction, rows=r+[1:min(r,c)-1]. cols is the same.
        %W direction, rows=ones(r,1)*r; cols=c-[1:c-1];
        rows= r-[1:min(r,c)-1];
        cols= c-[1:min(r,c)-1];

        %Use referencing object R for DEM Z of the western USA to convert rows and cols to lat and long.
        [NWcoord(:,1) NWcoord(:,2)]=pix2latlon(R,rows,cols);

        %use pdist2 to find the shortest distance between any two points in the two vectors
        [D,i]=pdist2(lonlim,NWcoord(:,2),'euclidean','smallest',1);
        [~, mi]=min(D);

        sta.NWcoast=[latlim(i(mi)) lonlim(i(mi))];
        dlong(r-rstart+1,c-cstart+1)=distance(lat,long,latlim(i(mi)),lonlim(i(mi))); %great arc distance on earth's surface. radians
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:17:08.667

我的建议：

*在没有DEM*的情况下解决它。

1) 您已经给出了一个位置 loc，其纬度和经度以十进制度 WGS84 为单位。
2) 你已经在 WGS84 中给出了外套线多边形。

现在找到从 loc 到多边形的东西距离：
您想要找到 loc 的纬度值与边界多边形（当前位置以东）的交叉点：

从边界多边形点 0 的开头开始：找到`border[i].lat<= loc.lat and border[i+1] > loc.lat AND border[i].longitude >= loc.longitude`. 如果您找到了这条线，请在 (i 和 i+1) 之间进行线性插值，以找到准确的（纬度/经度）交点。

现在你有了与海洋的交点：计算距离 loc -> 与`haversine`公式的交点。

（一旦这工作，您可以稍后决定是否要加快二进制搜索）

与其他 3 个方向相同，交换 lat/long 和更大/更小

**对于 NW 和其他：** 沿着海洋边界点运行并计算从 loc 到边界点的方位（搜索航空公式或更大的圆方位计算）

存储线/或轴承跨过 315 度的两个点。然后这条线与 315° 相交，理论上可以有不止一条这样的线存储所有这样的线，并取离位置最近的一条（

现在用 315 对两个点进行插值以获得精确切割。

更新：[轴承公式](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:55:14.827

如果您有参考对象 R，则以下工作有效。感谢@AlexWein 的方位角想法。之前发布的图片中出现条纹的原因是沿海矢量的比例。请注意，我使用的是 0.0042 度增量（与 dem 分辨率相同）。5 条条纹表示我只使用 5 个海岸坐标点来查找距离，而阶梯条纹的出现是因为我从下方最近点反弹到上方最近点并再次返回。

```
 latlim=[0.25:.0042:60];
    lonlim=ones(length(latlim),1)*-110

for r=1:32
    for c=1:32

    [lat long]=pix2latlon(R,r,c)
[d, az]=distance(lat,long,latlim,lonlim);

[~, azi]=min(abs(az-270));
sta_o.Wd2O=d(azi);
sta_o.Waz=az(azi);

[~, azi]=min(abs(az-315));
sta_o.NWd2O=d(azi);
sta_o.NWaz=az(azi);

[~, azi]=min(abs(az-225));
sta_o.SWd2O=d(azi);
sta_o.SWaz=az(azi);

    end
end 
```

# java - 将字符串数组从 red5 (Java) 发送到 Flash (ActionScript 3)？

> ID：14984830
> 
> 赞同：1
> 
> 时间：2013-02-20T16:23:51.720
> 
> 标签：java, arrays, actionscript-3, flash, red5

我想将一组字符串从我的 red5 服务器发送到我的闪存应用程序。但我做错了什么。这是我的代码。

红5服务器：

```
public String[] listUsers(){

String users[]={"Jordi","Anne","Charly"};

return u;

} 
```

动作脚本 3：

```
var result:Responder = new Responder(onResult,onFail);
connection.call("listUsers", result);

function onResult(result:Object):void
{
    var users:Array=new Array ();
    users=result.valueOf();

} 
```

和错误（西班牙语）：

TypeError: 错误 #1034: Error de conversión forzada: no se puede convertir 5 en Array。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T07:32:41.197

```
 flash.external.ExternalInterface.call(function_name:String[, arg1, ...]):Object;

 var result:Responder = new Responder(onResult,onFail);

 flash.external.ExternalInterface.call("listUsers", result);

 function onResult(result:Object):void
 {
     var users:Array=new Array ();
     users=result.valueOf();

 } 
```

请注意，您的语法更多地反映了 FMS 服务器调用而不是 Javascript 我不确定我是否理解您的问题。如果它在服务器上，您可能希望像 RemoteObject for FMS 和 Wowza 这样的 rpc 服务使用 netConnection 和 nc.call("myFunctionNameInQuotes","param1",param2 等);

# c# - EnumWindows 不显示来自 Windows 8 Metro 的应用程序

> ID：14984839
> 
> 赞同：0
> 
> 时间：2013-02-20T16:24:09.630
> 
> 标签：c#, winforms, windows-8, windows-runtime, windows-store-apps

我有一个使用此代码的程序：

```
EnumWindows eW = new EnumWindows();
eW.GetWindows(); 
```

和一个 foreach 循环。但是，这只会返回 Windows 桌面应用程序，而不会返回 Metro 应用程序。有什么办法可以用 Metro 应用程序找到所有打开的窗口？另外，我如何找到 Metro 启动器。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T17:57:29.010

您需要将清单文件添加到您的应用程序并设置 uiaccess=true

微软指南：http: [//msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

在 uiaccess 标志设置为 true 的应用程序中使用 EnumWindows 将产生 alt-tab 中的所有窗口，然后产生更多窗口（您可能想要过滤掉）。

# actionscript-3 - URL 链接在测试中有效，但在实际中无效 - AS3

> ID：14984849
> 
> 赞同：1
> 
> 时间：2013-02-20T16:24:51.110
> 
> 标签：actionscript-3, hyperlink

我在按钮和 TLF 文本上设置了 URL 链接。当我在 Flash 中测试电影时，链接的行为符合预期。所有网站都可以毫无问题地打开。但是，当我从 Windows 资源管理器中打开 .SWF 文件时，没有任何链接起作用。我确实找到了如何通过将发布设置本地播放安全设置为“仅访问网络”来修复 URL 链接的答案，但现在我的内部链接系统不起作用。我的程序的工作方式是：我有通过“addchild”脚本导入外部 SWF 文件的按钮。然后在加载的 swf 中有指向 URLS 的文本链接。将“本地播放安全”设置为“仅访问本地”，程序将加载外部 SWF 文件，但不会链接到 URL。然后，如果我将“本地播放安全性”设置为“仅访问网络” 程序不会加载 SWF 文件；但是当我在资源管理器中打开 SWF 时，链接会起作用。我需要两者都工作。我认为没有“访问本地和网络”选项是愚蠢的

还有其他方法可以解决这个问题吗？

如果您需要查看代码，我可以发布它，但这是使这些操作起作用的最基本方法。我只是在学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:32:09.753

尝试使用 WAMP 服务器访问 localhost。

# java - Java中的递归字符串和删除字符

> ID：14984851
> 
> 赞同：0
> 
> 时间：2013-02-20T16:24:54.353
> 
> 标签：java, string, recursion, character

这是我到目前为止所拥有的，但 DrJava 似乎没有编译它。它应该打印出“！olleH”..我不断收到这些错误：找不到符号：类句子，找不到符号：方法reverse（），找不到符号：方法getText（）。

```
public class SentenceTester
{
   public static void main(String[] args)
   {
      String greeting = new Sentence("Hello!");
      String.reverse();
      System.out.println(greeting.getText());
   }
} 
```

我还应该（一旦运行）通过删除第一个字符、反转由剩余文本组成的句子并将两者结合来实现递归解决方案。

我不是要求完成我的作业，而是要求一个准系统代码更好，因为我真的不知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:32:00.403

课堂上没有`reverse()`方法`String`。您可以使用 a`StringBuilder`代替：

```
String greeting = "Hello!"
StringBuilder sb = new StringBuilder(greeting);
greeting = sb.reverse().toString(); 
```

请参阅[StringBuilder.reverse()](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#reverse%28%29)。

另外，我不知道`Sentence`类是什么，但你可能无法`String`用它初始化 a 。

# .htaccess - htaccess 非 www 到 www 重定向问题

> ID：14984853
> 
> 赞同：1
> 
> 时间：2013-02-20T16:24:58.467
> 
> 标签：.htaccess, redirect

在我们的 .htaccess 中，我们目前正在使用此规则来强制所有非 www 链接为 www。

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*) http://www.mysite.com/$1 [R=301,L] 
```

但是，我们遇到了 www.mysite.comwww.mysite.com 以某种方式被登录的问题。虽然更正创建链接的错误很重要，但我们希望确保这个实例也被重定向。

在谷歌上搜索后，我看到了很多建议

```
RewriteCond %{HTTP_HOST} ^mysite.com [NC]
RewriteRule (.*) http://www.mysite.com/$1 [R=301,L] 
```

然而，这在我们的网站上根本不起作用，因为即使 bob.mysite.com 也不会移动到 www.mysite.com

我在这里缺少什么吗？

# regex - 我需要关于正则表达式字符串的帮助

> ID：14984855
> 
> 赞同：-3
> 
> 时间：2013-02-20T16:25:04.120
> 
> 标签：regex, string, command

我需要一个字符串来选择所有 html 标记文本编号的所有内容，除了在锚点结束标记中找到的单词的随机出现之外，这一行`rel="bookmark">RANDOM WORDS</a></h1>`

我尝试了`[<0-9a-zA-z/=|"-:.*?>]`选择字面上所有内容的字符串，它发现没关系，但我需要一个排除随机词的字符串，在上面提到的行中找到的选择中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:27:31.673

正则表达式不是这项工作的正确工具。请考虑使用 XML/HTML DOM 解析器并以这种方式提取您需要的信息！

您在制作 RegEx 来完成此任务时遇到问题的原因是 HTML 标记语言不是*正则*- 因此，不适合使用正则表达式进行处理！

# three.js - 阴影不适用于three.js

> ID：14984857
> 
> 赞同：0
> 
> 时间：2013-02-20T16:25:13.467
> 
> 标签：three.js, shadow

实际上，我是新手`webGl`，特别是在学习[http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)`three.js`的示例时，我正在尝试学习它。

现在我的问题是：我建立了一个小 3D 场景。一个立方体、一个球体、一个地板和一个点光源。现在我想要点光源来创建阴影。我把这个命令“castShadow = true;” 立方体，点光源和球体，然后“receiveShadow = true;” 到地板上。但那里没有影子。

希望有人可以帮助我。

其他问题，主要目标是建造一个有窗户和像太阳一样的动画光的房子。这意味着每个网格都必须投射阴影并接收阴影。那可能吗？

我的代码：

```
 <html>
    <head>
        <style>
            #container {
                background: #225;
                width: 400px;
                height: 300px;
            }
        </style>
    </head>
    <body>

        <div id="container">

        </div>

    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="js/Three.js"></script>

    <script type="text/javascript">
// set the scene size
var WIDTH = 400,
  HEIGHT = 400;

// set some camera attributes
var VIEW_ANGLE = 45,
  ASPECT = WIDTH / HEIGHT,
  NEAR = 0.1,
  FAR = 10000;

var $container = $('#container');

// create a WebGL renderer, camera
// and a scene
var renderer = new THREE.WebGLRenderer();
var camera =
  new THREE.PerspectiveCamera(
    VIEW_ANGLE,
    ASPECT,
    NEAR,
    FAR);

var scene = new THREE.Scene();

///////////////////////// Camera /////////////////////

scene.add(camera);
camera.position.set(180,-180,300);
camera.lookAt(scene.position);

///////////////////////// Floor /////////////////////
var floorGeometry = new THREE.PlaneGeometry(200, 200);
    var floorMaterial = new THREE.MeshLambertMaterial( { color: 0x008800 } );
    var floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.position.set(0,0,-25);
    floor.rotation.set(0,0,0);
    floor.doubleSided = true;
    floor.receiveShadow = true;
    scene.add(floor);

///////////////////////// Cube /////////////////////
var cubeGeometry = new THREE.CubeGeometry( 50, 50, 50 );
    var cubeMaterial = new THREE.MeshLambertMaterial( { color: 0x000088 } );
    cube = new THREE.Mesh( cubeGeometry, cubeMaterial );
    cube.position.set(0,0,0);
    cube.castShadow = true;
    scene.add(cube);

///////////////////////// Sphere /////////////////////

var sphereGeometry = new THREE.SphereGeometry(50, 16, 16);
    var sphereMaterial = new THREE.MeshLambertMaterial( { color: 0xCC0000 });
    sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );
    sphere.position.set(100,100,0);
    sphere.castShadow = true;
    scene.add(sphere);

///////////////////////// Point Light /////////////////////
var pointLight = new THREE.PointLight(0xFFFFFF);
    pointLight.position.set(50,50,130);
    pointLight.shadowCameraVisible = true;
    pointLight.shadowDarkness = 1;
    pointLight.intensity = 2;
    pointLight.castShadow = true;
    scene.add(pointLight);

renderer.setSize(WIDTH, HEIGHT);
$container.append(renderer.domElement);
renderer.render(scene, camera);

    </script>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:28:16.320

您是否在渲染器上启用了阴影？

```
renderer.shadowMapEnabled = true; 
```

# graph-theory - 通过有向图计算和识别“理想的”路线

> ID：14984859
> 
> 赞同：0
> 
> 时间：2013-02-20T16:25:17.913
> 
> 标签：graph-theory

原谅这个模糊的标题，我已经有几年没有做过任何与该领域相关的数学了，而且我的术语相当缺乏（我问这个问题的部分原因）。我确信有一个定义明确的算法/理论已经处理了我想要实现的目标，但我不能完全确定要找到它的词。

我将尝试描述我正在建模的情况：

给定一组物品 [a,b,c,d,e,f]，一个人可能会提议交易某些物品，例如，我可能将“a”换成“b”，而您可能会提供“2xc”为“e”。我可以收集所有这些交易并创建一个图表来概述所提供的选项。我有兴趣寻找特定的贸易路径，顺便说一句，贸易路径会给我带来多余的物品——我认为这种东西一定已经存在于金融领域（再次，我错过了数学）。

所以如果我有“a”并且想要“f”，并且我有以下可用路径：

```
a -> b, b -> f, c -> b, a-> 2(c), b -> a 
```

我最终会得到

```
a -> b -> f

a -> (2)c -> b -> f    
      |
      c             (An additional c) 
```

可能有我可以重复循环的地方，所以如果我使用上面的 b -> a 关系，我可以不断提取 c 因为多余的 c 项目。

我有理由确定我可以编写一个程序来执行此操作，但我非常喜欢理解此类问题背后的正确术语和方法。如果有人能指出我要阅读的特定主题的正确方向，或者如果我想要实现的目标有一个明显的名称，我将不胜感激。

再次为模糊性道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:33:30.417

听起来像是典型的[状态空间搜索](http://www.cs.trincoll.edu/~ram/cpsc352/notes/search.html)问题。像[BFS](https://en.wikipedia.org/wiki/Breadth-first_search)或[迭代深化](https://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)这样的算法可以找到最短的交易序列，甚至可以产生所有的可能性。

要应用这些算法，您必须重新定义图表。与其使用`a`和之类`b`的节点`a -> b`，不如定义一个状态空间，其中状态由有限数量的每个元素组成`{a, b, c, f}`（在这种情况下，整数的四元组就足够了）和一个应用所有可能的后继函数*S*交易给定的状态并构造一组后继状态。例如，在伪 Python 表示法中，

```
S({a: 1, b: 2, c: 0, f: 0}) = [{a: 0, b: 3, c: 0, f: 0},   # trade a for b
                               {a: 1, b: 1, c: 0, f: 1},   # trade b for f
                               {a: 1, b: 2, c: 2, f: 0},   # trade a for 2c
                               {a: 2, b: 1, c: 0, f: 0}]   # trade b for a 
```

由于状态空间搜索是 AI 中的经典范式，因此大多数 AI 教科书都涵盖了它。特别是，我可以推荐[Russell 和 Norvig 的](http://aima.cs.berkeley.edu/)[*AIMA*](http://aima.cs.berkeley.edu/)，它的前几章非常详细地讨论了状态空间搜索。

# erlang - Mnesia 返回 {aborted, no_transaction}

> ID：14984865
> 
> 赞同：2
> 
> 时间：2013-02-20T16:25:33.733
> 
> 标签：erlang, mnesia

我有一个名为 的 Mnesia 表`person`，使用以下记录定义：

```
-record(person, {id, firstname, lastname, phone}). 
```

该表包含以下值：

```
 12  alen     dumas      97888888
    13  franco   mocci      55522225
    14  ali      othmani    44444449 
```

我想检索在我的情况下的最后一个 id **14**。

我尝试：

```
test()->
    Key=mnesia:last(person). 
```

但是当我测试这个功能时，我有这个错误：

```
** exception exit: {aborted,no_transaction}
     in function  mnesia:abort/1 
```

这是为什么？我能做些什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T19:07:00.237

错误消息`exception exit: {aborted,no_transaction}`非常清楚：该函数应在事务上下文中调用，而您的代码不是。如果您不需要事务，则可以使用 mnesia:dirty_last/1 代替。请注意，如果表类型是 ordered_set，则 mnesia:last/1 和 mnesia:dirty_last/1 都有意义。对于其他类型，没有明确定义顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-15T20:25:21.010

Ppolv 给出了问题的线索：您需要在事务的上下文中调用 mnesia 函数，即 mnesia '活动访问上下文'。没有测试过，但这样的东西应该可以工作：

```
test()->
      Getlastperson = fun() -> Key=mnesia:last(person) end,
      mnesia:activity(transaction, Getlastperson). 
```

# java - 使用反射访问Java中同级类的公共方法

> ID：14984867
> 
> 赞同：0
> 
> 时间：2013-02-20T16:25:43.050
> 
> 标签：java, reflection

```
public class A{

}

//this class is in the same file as A class i.e. A.java
class B{

   //has a public method
} 
```

**这两个类在同一个文件中。** 所以不能将课程`B`设为`public`.

在尝试访问与使用反射的类`B`定义在同一级别的类的公共方法时，它使我无法使用修饰符访问类的成员。`A``IllegalAccessException``B``public`

有什么方法可以使用反射来实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:33:18.957

将您的**B**类设为公开，然后尝试。它应该工作。

引用 java 文档

> 引用（类、接口或数组）类型的成员（类、接口、字段或方法）或类类型的构造函数只有在类型可访问且声明成员或构造函数允许访问时才可访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:35:34.220

您需要[`setAccesible(true)`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28boolean%29)使用该方法。

# c# - C#、CPCL 和 getvar

> ID：14984870
> 
> 赞同：0
> 
> 时间：2013-02-20T16:25:57.623
> 
> 标签：c#, zebra-printers

我正在编写一个类以使用 CPCL 打印到 Zebra 蓝牙打印机。CPCL 有一个 getvar 命令，您可以将其发送到打印机以获取打印机设置。例如：

```
! U1 getvar "appl.date" 
```

此命令将返回打印机的当前日期。唯一的问题是我不知道如何从这个命令中得到结果。使用 C# 和 CPCL 打印没有问题，因为我可以将命令转换为字节数组并使用 NetworkStream 将其发送到打印机。但我不知道如何从应该返回结果的命令中实际获取结果。我已确认该命令实际上使用打印机随附的 Zebra Printer Communicator 返回数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:02:44.320

我在这里找到了一个实际的代码示例：

[https://km.zebra.com/kb/index?page=content&id=SA140&actp=LIST](https://km.zebra.com/kb/index?page=content&id=SA140&actp=LIST)

代码工作正常，唯一的问题是打印机需要一段时间才能返回数据，但 ReadLine 会立即执行。这将返回一个空字符串。如果您等待几秒钟并再次阅读，您将获得实际结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:24:02.783

两件事......确保你`\r\n`在最后一个之后发送一个`"`。不确定 WriteLine 是否为您执行此操作，但 SGD 最终需要它。另外，您是对的，您需要等待打印机返回该值才能读取它。如果您读取得太快而打印机尚未响应，则将没有可读取的内容。您可以做的是在`TcpClient Available`实际进行读取之前查看属性以查看是否有可用的字节。您可以循环并快速等待，直到有可供读取的字节，然后您可以进行读取并确保有字节可供读取

# c++ - 在什么情况下，我们需要知道一个类是否微不足道？

> ID：14984871
> 
> 赞同：2
> 
> 时间：2013-02-20T16:26:01.983
> 
> 标签：c++, class, c++11, typetraits

`std::is_trival<T>::value`可以确定类 T 是否微不足道。但是，我想不出需要这些信息的场景。

有没有例子？

我的一些想法：

如果类 T 是微不足道的，这是否意味着 T 可以`memcpy`像这样安全地复制：

```
T t1, t2;
memcpy(&t1, &t2, sizeof(T)); 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:58:31.937

如果一个类型是平凡的，例如，它可以用`memcpy`. 这是用作`std::atomic`模板参数的用户定义类型的要求。也就是说，对于用户定义的类型`T`，`atomic<T>`允许（并且对于较大的类型，需要）实现从类型对象到类型对象`T`的`atomic<T>`赋值`memcpy`。同样，在需要时测试相等性是用`memcmp`.

使用这些 C 函数而不是 C++ 运算符的原因是原子操作不会对用户代码进行任何调用。这样做可能会导致看似无辜的代码出现神秘的死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-10T12:30:38.720

真的，普通类型对 /anything/ 很有用，它只需要一个字符指针和一个长度。Pete Becker 的回答描述了一个重要的案例，但这里有些愚蠢：您可以使用 序列化一个普通类型`std::ostream::write`，然后使用 读取它`std::istream::read`。

```
template<typename T>
std::enable_if<std::is_trivial<T>, void> 
bin_write(std::ostream& out, const T& data) {
  out.write(reinterpret_cast<const char*>(&data), sizeof(T));
}

template<typename T>
std::enable_if<std::is_trivial<T>::value, T> 
bin_read(std::istream& in) {
  using T_in = std::remove_cv_t<T>; //even if T is const, the buffer can't be
  T_ buffer;
  in.read(reinterpret_cast<char*>(&buffer), sizeof(T_));
  return buffer;
} 
```

显然，您不能在原始指针（或原始指针包装器，例如`std::experimental::observer_ptr`）上使用它。这会忽略字节顺序，因此您可能不想将此数据发送到其他计算机上的其他应用程序。但是，如果您想编写模拟重新启动文件，或者如果您需要在 GCC 编译的 C++ 和 GCC 编译的 Fortran 之间传输数据，它会很有用。

# wordpress - 从传入的 URL 中删除 fb_source

> ID：14984876
> 
> 赞同：1
> 
> 时间：2013-02-20T16:26:10.643
> 
> 标签：wordpress, .htaccess

这是我在这里的第一个问题，因为我通常很快就能找到我需要知道的东西。我不熟悉编辑.htaccess，所以我对这样做感到很紧张。

这就是我想知道的。我可以删除任何内容，包括“？” 从传入的 URL？

有效地将： [http ://example.com/userful-info?fb_junk%20%13%](http://example.com/userful-info?fb_junk%20%13%69) **69 INTO** [http://example.com/userful-info](http://example.com/userful-info)

在另一篇文章中，有人回答了一个关于删除 fb_action_ids 附加信息的问题，内容如下：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (^|&)fb_action_ids=
RewriteRule ^/?detail/link- %{REQUEST_URI}? [L,R=301] 
```

这看起来在领域中，但我想从传入的 URL 中删除任何附加信息。这很烦人，因为如果某些内容与附加信息共享，则它来自非 FB 的其他站点。像 disqus、twitter、tumblr。

我不希望 twitter 用户与 FB 的信息共享我网站上的 url。那没有意义。

谢谢你，亚历克斯 Theberge

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:01:21.500

***Though it will break your ability to use query parameters throughout your site (and since/if you are using WordPress, this may present issues for some WordPress functionality, so "buyer beware")***, the following site presents a solution which may solve your issue - [http://briancray.com/posts/htaccess-hack-remove-url-query-strings/](http://briancray.com/posts/htaccess-hack-remove-url-query-strings/)

What it suggests is that in your `.htaccess` file before the "# BEGIN Wordpress" section, include the following:

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !="" #if there is a query string
RewriteCond %{QUERY_STRING} !^p=.* #wordpress users: allow post tempalinks
RewriteCond %{REQUEST_URI} !^/wp-admin.* #wordpress users: don't break admin
RewriteRule ^(.*)$ /$1? [R=301,L] #remove query string 
```

# java - CQ5/JSP如何加载文件夹的内容

> ID：14984878
> 
> 赞同：0
> 
> 时间：2013-02-20T16:26:15.200
> 
> 标签：java, jsp, directory, aem

如何在 Adob​​e CQ5/JSP 中加载文件夹的内容？我试过这段代码

```
File folder = new File(pathToFolder);
File[] listOfFiles = folder.listFiles();
if(listOfFiles == null){    //this statement is just for debugging purposes
    System.out.println("NULL");
}else{
    System.out.println("NOT NULL");
... 
```

但我仍然从 println() 获得 NULL 输出。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:55:07.570

我认为问题在于您假设 CRX 存储库中的文件夹可以与文件系统上的文件夹相同，这当然是错误的，并且会导致问题。

我建议使用 Sling API，并使用[ResourceResolver](http://sling.apache.org/apidocs/sling5/org/apache/sling/api/resource/ResourceResolver.html)来获取对您的文件夹的引用并从那里获取它的子资源。可能，根据您正在尝试执行的操作，您可能会考虑使用 JCR Node API。还有用于处理 DAM 资产、页面等的 CQ 特定 API，正确的 API 取决于您要做什么，所以在不知道的情况下，我无法做出具体的推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T10:05:46.480

```
ResourceResolver resourceResolver = request.getResourceResolver();
Resource rootResource = resourceResolver.getResource("/apps/yourapp/somelocation");
Resource chileNode = rootResource .getChild("some/child/relative/path");
Map<String, Object> valueMap = new CaseInsensitiveMap(chileNode.adaptTo(ValueMap.class));
--get valueMap values.... 
```

# c# - 在 linq 中加入未知数量的列表

> ID：14984879
> 
> 赞同：3
> 
> 时间：2013-02-20T16:26:18.213
> 
> 标签：c#, linq

我有一种情况，我生成了许多包含整数值的列表。但是，这些列表的数量**只有在运行时才知道**，并且结果列表中存在的整数必须存在于所有列表中。有没有一种方法可以将所有这些列表加入到一个列表中？

IE

```
List<int> l1 = {1, 2, 3, 4};
List<int> l2 = {2, 3, 5, 7, 9};
List<int> l3 = {3, 9, 10};
List<int> ln = {....}; 
```

结果列表应如下所示

```
List<int> r = {3}; 
```

linq 或任何其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:29:55.753

我假设你有一个`List<List<int>>`持有可变数量的`List<int>`.

您可以将第一个列表与第二个列表[相交](http://msdn.microsoft.com/en-us/library/bb460136.aspx)

```
var intersection = listOfLists[0].Intersect(listOfLists[1]); 
```

然后将结果与第三个列表相交

```
intersection = intersection.Intersect(listOfLists[2]); 
```

依此类推，直到`intersection`拥有所有列表的交集。

```
intersection = intersection.Intersect(listOfLists[listOfLists.Count - 1]); 
```

使用`for`循环：

```
IEnumerable<int> intersection = listOfLists[0];

for (int i = 1; i < listOfLists.Count; i++)
{
    intersection = intersection.Intersect(listOfLists[i]);
} 
```

使用`foreach`循环（如*@lazyberezovsky*所示）：

```
IEnumerable<int> intersection = listOfLists.First();

foreach (List<int> list in listOfLists.Skip(1))
{
    intersection = intersection.Intersect(list);
} 
```

使用[Enumerable.Aggregate](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)：

```
var intersection = listOfLists.Aggregate(Enumerable.Intersect); 
```

* * *

如果顺序不重要，那么您还可以使用[HashSet<T>](http://msdn.microsoft.com/en-us/library/bb359438.aspx)填充第一个列表并与其余列表[相交](http://msdn.microsoft.com/en-us/library/bb293080.aspx)（如*@Servy*所示）。

```
var intersection = new HashSet<int>(listOfLists.First());

foreach (List<int> list in listOfLists.Skip(1))
{
    intersection.IntersectWith(list);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:29:53.050

```
// lists is a sequence of all lists from l1 to ln
if (!lists.Any())
   return new List<int>();

IEnumerable<int> r = lists.First();   

foreach(List<int> list in lists.Skip(1))    
   r = r.Intersect(list);

return r.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:37:19.527

这是获取集合集合交集的简单方法：

```
public static IEnumerable<T> Intersect<T>(IEnumerable<IEnumerable<T>> sequences)
{
    using (var iterator = sequences.GetEnumerator())
    {
        if (!iterator.MoveNext())
            return Enumerable.Empty<T>();

        HashSet<T> intersection = new HashSet<T>(iterator.Current);

        while (iterator.MoveNext())
            intersection.IntersectWith(iterator.Current);

        return intersection;
    }
} 
```

这里的想法是将所有项目放入一个集合中，然后依次与该集合与每个序列相交。我们可以使用普通的 LINQ 用更少的代码来做到这一点，但这将从`HashSet`每个交叉点的结果中填充一个新的，而不是重用一个，因此尽管看起来非常优雅，但它的开销会高得多。

这是性能较差但更优雅的解决方案：

```
public static IEnumerable<T> Intersect<T>(IEnumerable<IEnumerable<T>> sequences)
{
    return sequences.Aggregate(Enumerable.Intersect);
} 
```

# cakephp - 如何更新一个字段 cakephp

> ID：14984886
> 
> 赞同：2
> 
> 时间：2013-02-20T16:26:34.050
> 
> 标签：cakephp, set, field

如何更新一个表的字段，我的模型称为用户，我想更改字段“启用”。我这样做。

```
function setstatus($id = null)
{
    $this->User->id = $id;
    if (!$this->User->exists())
    {
        $this->Session->setFlash('Invalid User', 'error');
        $this->redirect(array('action' => 'index'));
    }

    $valor = false;
    $enable = $this->User->read('enable');
    if ($enable == false)
        $valor = true;

    $this->User->saveField('enable', $valor);
    $this->redirect(array('action' => 'index'));
            $this->Session->setFlash('User update success', 'info');
} 
```

但这不能正常工作。没有更改字段。请帮助我...如果不知道在 cakephp 2.3 中如何操作，我使用 Cakephp 2.3 可能就像 cakephp 1.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:31:23.413

我回答自己，解决方案是将返回值`$this->ModelName->read(field);`作为`array ['model']['field']`

这是代码：

```
function setstatus($id = null)
{
    $this->User->id = $id;
    if (!$this->User->exists())
    {
        $this->Session->setFlash('Invalid user', 'error');
        $this->redirect(array('action' => 'administration'));
    }

    $enable= $this->User->read('enable');
    $msj = 'The user has been enabled';
    if ($enable['User']['enable'] == 1)
    {
        $enable= 0;
        $msj = 'The user is no longer enable';
    }
    else
        $enable= 1;

    $this->User->saveField('enable', $enable);
    $this->Session->setflash($msj, 'info');
    $this->redirect(array('action' => 'administration'));
} 
```

# jquery - 每次单击图标类时，jquery easyui 都会动态创建选项卡以刷新包含的 iframe

> ID：14984890
> 
> 赞同：0
> 
> 时间：2013-02-20T16:26:38.460
> 
> 标签：jquery, jquery-easyui

我有以下动态树构建选项卡。选项卡有一个 iframe，它的源来自 json 文件：

```
<script type="text/javascript"> 
$(function(){   
   $('#tree_menu').tree({    
   animate:true,    
    onClick: function open1(node){
      if ($('#tabs').tabs('exists',node.id)){
      $('#tabs').tabs('select', node.id); 
       } else {
        $('#tabs').tabs('add',{
        title: node.id,
        content: "<iframe id='superframe' frameborder='0' width='100%' scrolling='auto' height='99%' src='" + node.attributes.url + "'><iframe>",
        closable:true, 
        tools:[{  
         iconCls:'icon-mini-refresh',  
         handler:function(){  
           alert('refreshing'); 
        $('#superframe').get(0).contentWindow.location.reload();    
         }  
        }] 

        });
      }
    }
  });

  $('#tabs').tabs({
  onBeforeClose: function(title){
    return confirm('Are you sure you want to close ' + title);
    }
  });

});
</script> 
```

我想要实现的是在选项卡上单击图标-迷你刷新，以在该特定选项卡中重新加载 iframe。使用我上面的代码，我可以做到这一点，但它只适用于第一个打开的选项卡。从第二个开始，它不再工作了。它只是不令人耳目一新......我已经尝试了在谷歌上找到的所有可能的 iframe 重新加载方法，但没有任何成功。

你能帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T05:34:26.710

iframe 的 id 应该是唯一的，请尝试以下代码，

```
 <script type="text/javascript"> 
$(function(){   
   $('#tree_menu').tree({    
   animate:true,    
    onClick: function open1(node){
      if ($('#tabs').tabs('exists',node.id)){
      $('#tabs').tabs('select', node.id); 
       } else {
        var frameId='superframe'+node.id;
        $('#tabs').tabs('add',{
        title: node.id,
        content: "<iframe id='"+frameId+"' frameborder='0' width='100%' scrolling='auto'     height='99%' src='" + node.attributes.url + "'><iframe>",
        closable:true, 
        tools:[{  
         iconCls:'icon-mini-refresh',  
         handler:function(){  
           alert('refreshing'); 
        $('#'+frameId).get(0).contentWindow.location.reload();    
         }  
        }] 

        });
      }
    }
  });

  $('#tabs').tabs({
  onBeforeClose: function(title){
   return confirm('Are you sure you want to close ' + title);
   }
 });

});
</script> 
```

# jquery - Jquery droppable 与关联到可拖动的 ondrop 回调

> ID：14984897
> 
> 赞同：0
> 
> 时间：2013-02-20T16:26:52.007
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

有一个与 droppable 关联的 onDrop 函数。我创建了一棵树，我可以在其中拖放节点以更改它们在树中的位置。在一个页面中，我有一个列表，其中包含我想通过拖动将其关联到节点的元素。如果我重新声明一个新的 ondrop，则与该节点对应的那个节点停止工作。我想做的是将 onDrop 函数与可拖动的函数相关联，以根据拖动的元素类型添加新行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:47:30.973

如果我正确理解了您的问题（很难区分您的目标），那么您希望在 drop 事件中具有两种不同的功能。

您可以在命名空间中定义每个放置事件，这样事件处理程序就不会被覆盖：

```
$('.droppable').on('drop.FirstFunction', function (event, ui) {
     firstFunction();
});

$('.droppable').on('drop.SecondFunction', function (event, ui) {
     secondFunction();
}); 
```

# ember.js - IE9 问题 CollectionView tagName 表与 itemViewClass 这是 CollectionView tagName tr

> ID：14984898
> 
> 赞同：1
> 
> 时间：2013-02-20T16:26:54.283
> 
> 标签：ember.js

我有一个`CollectionView`它`itemViewClass`也是一个`CollectionView`。外部`CollectionView`是`tagName`“table”，内部是“tr”。问题是这种类型的视图适用于除 IE9 之外的所有浏览器。

这是一个带有示例[http://jsbin.com/iqokor/5/edit](http://jsbin.com/iqokor/5/edit)的 jsbin 。

我相信这与 a`tbody`没有被包裹在 inner`CollectionView`的渲染内容周围的事实有关。有没有人有任何建议，以便我可以完成这种类型的视图并且它适用于所有浏览器。请记住，我的底层内容数组看起来像这样......

```
[['a','b'],['a1','b1'],['a2','b2']] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:52:12.087

github上的[这个问题是你的问题的原因。](https://github.com/emberjs/ember.js/issues/2018)IE上的`innerHTML`属性存在问题，导致呈现问题，尤其是表格。

[此拉取请求](https://github.com/emberjs/ember.js/pull/2166)修复了 IE 的问题，但尚未合并。

# eclipse - 在 Eclipse 中自动创建 Java 项目（通过创建插件？）

> ID：14984901
> 
> 赞同：1
> 
> 时间：2013-02-20T16:26:59.003
> 
> 标签：eclipse, plugins, automation

我想在 Eclipse 中自动构建一个新的 Java 项目。当然，创建新项目对您来说是自动化的。我的意思是我想自动创建包和某些类，这些类在新项目内部的现有外部项目中扩展其他类。

希望这是有道理的。

有谁知道如何做到这一点？可行吗？似乎您想使用“Eclipse API”来做我想做的事情。我做了一些研究，它看起来需要一些 org.eclipse.* 插件。

看完之后，感觉有点吓人。我似乎很可能会创建一个新颖的插件，可用于自动创建新项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:42:38.323

您可以为您的项目类型提供 PDE 项目模板（请参阅 [https://stackoverflow.com/a/2092214/1369991](https://stackoverflow.com/a/2092214/1369991)）。PDE 项目模板旨在生成插件项目，但对其他用例没有限制。

# windows - 在两个cmd窗口中执行两个进程顺序引用冲突

> ID：14984908
> 
> 赞同：0
> 
> 时间：2013-02-20T16:27:26.100
> 
> 标签：windows, batch-file, cmd

我想`echo hallo`在第一个 cmd 窗口中运行，并且我希望该 cmd 窗口弹出另一个 cmd 实例，该实例将`echo world`在`echo hallo`完成后执行（成功或失败），并且我希望两个 cmd 窗口在两个进程完成后都保持打开状态

为了完成这整件事，我`cmd.exe`将从我的程序中运行

现在我正在使用
`cmd /K start cmd.exe /K "echo hallo & start cmd.exe /K echo world"`
和它的工作。并且这两个引号是必须的，否则不起作用

**问题：**

我将在两个命令提示符下运行的两个可执行文件内部可能有空格，所以我必须保护它们及其参数，`"`这将与顶层的封闭引号冲突。因为我没有看到它正确处理嵌入的引号。

```
windows>cmd /K start cmd.exe /K "echo hallo & start \"cmd.exe\" /K echo world"
windows>cmd /K start cmd.exe /K "echo hallo & start ""cmd.exe"" /K echo world"
windows>cmd /K start cmd.exe /K "echo hallo & start 'cmd.exe' /K echo world" 
```

这三个作品都没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:15:04.860

/k 必须是引用字符串的一部分。
如果您正在尝试做我认为您正在做的事情，请尝试像这样嵌套引号：

```
cmd /K start cmd.exe /K "echo hello & start ""cmd.exe" /k" echo world" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:41:13.313

为避免文件名中出现引号，请使用它的**8.3 别名**，例如 EXECUT~1.EXE。

您可以使用
DIR /X "executable with space inside.exe"获取别名

# php - SplFileObject 将指针移动到上一行

> ID：14984914
> 
> 赞同：2
> 
> 时间：2013-02-20T16:27:56.327
> 
> 标签：php, logging, iteration, text-files

所以我正在为自己做一个小实验，一个脚本来读取 php 错误的日志文件（使用 SplFileObject）并在浏览器上格式化输出。

我认为以相反的顺序显示它会更符合逻辑（最新的错误在顶部）。要使用“正常”顺序，我只需显示每一行并调用 $file->next(); 移动指针，但是当我以相反的方式进行操作时，据我所知没有`prev()`or方法，我发现的唯一方法是使用：`previous()``seek()`

```
for($i = $lines_total - $start_at; $i > $lines_total - $start_at - $lines_to_get; $i--){
    $content->seek($i);
    $data = $content->current();
    if(empty($data)){
        continue;
    }
} 
```

但这非常慢（16mb 文件大约需要 7 秒）。如果我按照正常顺序进行操作，那是即时的。

有谁知道任何方法？或者我想做的是疯了？xD 我只是一个被迫编码的设计师，所以我对指针和类似的东西不是很熟悉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:00:50.610

来自 PHP 文档

> [prev](http://php.net/manual/en/function.prev.php) - 倒回内部数组指针
> [prev()](http://php.net/manual/en/function.prev.php)的行为就像[next()](http://php.net/manual/en/function.next.php)，除了它将内部数组指针倒回一个位置而不是前进它。

如您所见，它们仅适用于数组而不是文件指针....您只能像这样使用它

```
$file = new SplFileObject("log.txt", "r");
$file  = iterator_to_array($file);

echo current($file), PHP_EOL;
echo next($file), PHP_EOL;
echo prev($file), PHP_EOL; 
```

如果你想移动到下一行，你可以尝试使用`SplFileObject::ftell`来获取上一个位置，然后使用`SplFileObject::fseek`来实现你的反向...

例子

```
$file = new ReverseableSplFileObject("log.txt", "r");
foreach ( $file as $c ) {
    echo $c, PHP_EOL;
}
echo $file->prev(), PHP_EOL;
echo $file->prev(), PHP_EOL;
echo $file->prev(), PHP_EOL; 
```

输出

```
A
B
C
C
B
A 
```

修改类

```
class ReverseableSplFileObject extends SplFileObject {
    private $pos = array();

    function current() {
        return trim(parent::current());
    }

    function next() {
        $this->eof() or $this->pos[] = $this->ftell();
        return parent::next();
    }

    function prev() {
        if (empty($this->pos)) {
            $this->fseek(0);
        } else {
            $this->fseek(array_pop($this->pos));
        }
        return $this->current();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T13:08:58.000

万一以后有人遇到这个问题，我想出了一个非常简单的解决方案：

```
//get to the last position of the file and get the pointer position.
$content->seek($content->getSize());
$lines_total = $content->key();
$byte = $content->ftell();

//all the line in the php error log starts like: [21-Feb-2013 22:34:53 UTC] so...
$pattern = '/^\[.*\]/';

for(...){
//get the current output to preg_match it
    $data = $content->current();

//go backward each time it doesnt match a line's start
    while ( preg_match( $pattern, $data ) === 0 ){
    $byte--;
    $content->fseek($byte);
    $data = $content->current();
    }

//go backward 1 more position to start the next loop
    $byte--;
    $content->fseek($byte);
} 
```

希望有一天这对某人有所帮助xD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T19:05:26.613

这是一个老问题，但使用 SplFileObj 最简单的方法是使用密钥并查找，

```
public function prev(){
    $key = $this->_splFileObj->key();
    if( $key ){
        --$key;
    }
    $this->_splFileObj->seek($key);
} 
```

假设此方法位于 SplFileObj 的包装器中，其属性为`_splFileObj`.

# c# - 印地语语音识别

> ID：14984918
> 
> 赞同：1
> 
> 时间：2013-02-20T16:28:08.257
> 
> 标签：c#

使用 Microsoft Speech API，我能够识别一个英文单词。我创建了一个表，`SQL server`其中存储了与英语单词相对应的印地语 Unicode 单词。根据匹配的单词，我可以选择印地语对应词；例如，我存储了单词“main”、“ja”、“raha”、“hun”。当识别器将语音识别为“主要”时，它会获取相应的印地语单词。

我的逻辑是有效的，但它的准确性非常低。我的麦克风质量很好。有没有人知道一种更好的印地语语音识别方法，可以在任何技术中提供更高的准确性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-26T16:11:53.037

use google speech recognition which recognize hindi phrase in english words that is hinglish, first go to google developer console and registered your and get api key so that you can use google cloud speech services in your app.

# html - 网站适用于任何浏览器，但不适用于 ie 6 和 7

> ID：14984919
> 
> 赞同：1
> 
> 时间：2013-02-20T16:28:08.890
> 
> 标签：html, css, internet-explorer, cross-browser

[http://antonioorv.altervista.org/italiaincontra/](http://antonioorv.altervista.org/italiaincontra/)这是我正在做的网站。它在 Chrome、Opera、Firefox、Safari 上运行良好。如果在 ie 8 上也能正常运行。

如果我在 ie7 上运行它，我会得到[http://imageshack.us/f/267/istantanea2002201317153.png/](http://imageshack.us/f/267/istantanea2002201317153.png/) ..........你可以看到页面的一半向左和一半菜单是垂直的。

我真的不知道该怎么办！文档类型有问题吗？还是元标签？为了让它在 ie 8 上工作，我添加了

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

在我没有做的body标签之前我应该​​做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:55:51.487

我将为您和其他任何对这些浏览器有问题的人总结所有评论。

*   [IE 6 是一个死浏览器](http://blogs.windows.com/ie/b/ie/archive/2012/01/03/the-us-says-goodbye-to-ie6.aspx)，微软已经放弃了支持，你甚至不必考虑再次支持这个噩梦。

*   IE7 正在消亡，你和其他人越快停止支持它，它就会死得越快。尝试支持 IE7 是不值得的。***除非***像谷歌分析这样的工具另有说明。

*   作为一般规则，我向任何正在创建面向公众的站点/应用程序的 Web 开发人员推荐 Google Analytics。它会告诉您您的流量来自何处，以及每个浏览器/操作系统访问中有多少百分比从您的网站反弹。

我目前管理 10 个不同的站点。我可以告诉你，我对浏览器的支持实际上并不是在所有这些网站上都通用的。其中一个只有不到 1% 的流量来自 IE 8，但 40% 的流量来自 Safari。我可以告诉你，Safari 在该站点上获得的支持远多于 IE 8。

有关这方面的更多信息，您可以查看以下资源：

*   [我应该支持IE7吗？](http://www.rickwhittington.com/blog/should-my-website-support-internet-explorer-7/)

*   [旧的浏览器阻碍了网络。](http://www.smashingmagazine.com/2012/07/09/old-browsers-are-holding-back-the-web/)

*   [Facebook 讨厌 IE7，并放弃了支持。](http://thenextweb.com/facebook/2011/12/30/not-a-fan-of-timeline-on-facebook-use-ie7-facebook-stopped-supporting-it/)

*   [IE7 甚至不再出现在统计计数器上，IE8 在全球范围内的使用率不到 12%。](http://gs.statcounter.com/#browser_version-ww-monthly-201201-201301)

# matlab - 下标索引必须是实数正整数或逻辑错误 + 代码

> ID：14984928
> 
> 赞同：0
> 
> 时间：2013-02-20T16:28:26.710
> 
> 标签：matlab

我想知道是否有人可以向我解释这个错误的含义。并且，如果可能的话，如何解决它？？？？下标索引必须是实数正整数或逻辑数。

```
Error in ==> interp2>linear at 344
F =  ( arg3(ndx).*(onemt) + arg3(ndx+1).*t ).*(1-s) + ...

Error in ==> interp2 at 220
zi = linear(ExtrapVal,x,y,z,xi,yi);

Error in ==> snake at 71
ssx = gamma*xs - kappa*interp2(fx,xs,ys); 
```

这是我的完整代码：

```
image = imread('image.jpg');

%parameters
alpha = 0.001;
beta = 0.4;
kappa=0.0001;
gamma = 100;
N = 100; 
wl = 10;
we = 10;
wt = 10;
smth = rgb2gray(image);

% Calculating size of image
[row col] = size(image)

eline = smth; %eline is simply the image intensities

[grady,gradx] = gradient(double(smth));

eedge = -1 * sqrt ((gradx .* gradx + grady .* grady)); %eedge is measured by gradient in the image 

m1 = [-1 1];
m2 = [-1;1];
m3 = [1 -2 1];
m4 = [1;-2;1];
m5 = [1 -1;-1 1];

  cx = conv2(smth,m1,'same');
  cy = conv2(smth,m2,'same');
  cxx = conv2(smth,m3,'same');
  cyy = conv2(smth,m4,'same');
  cxy = conv2(smth,m5,'same');

  for i = 1:700
    for j= 1:900
    % eterm as deined in Kass et al Snakes paper
    eterm(i,j) = (cyy(i,j)*cx(i,j)*cx(i,j) -2 *cxy(i,j)*cx(i,j)*cy(i,j) +   cxx(i,j)*cy(i,j)*cy(i,j))/((1+cx(i,j)*cx(i,j) + cy(i,j)*cy(i,j))^1.5);
end
end

eext = (double(wl.*eline) + double(we.*eedge -wt) .* eterm); %eext as a weighted sum of eline, eedge and eterm

[fx, fy] = gradient(eext); %computing the gradient

xs=1:900;
xs=xs';
ys=repmat(242,1,900);
ys=ys'

[m n] = size(xs);
[mm nn] = size(fx);

%populating the penta diagonal matrix
A = zeros(m,m);
b = [(2*alpha + 6 *beta) -(alpha + 4*beta) beta];
brow = zeros(1,m);
brow(1,1:3) = brow(1,1:3) + b;
brow(1,m-1:m) = brow(1,m-1:m) + [beta -(alpha + 4*beta)]; % populating a template row
 for i=1:m
   A(i,:) = brow;
    brow = circshift(brow',1)'; % Template row being rotated to egenrate different rows in       pentadiagonal matrix
 end

 [L U] = lu(A + gamma .* eye(m,m));
 Ainv = inv(U) * inv(L); % Computing Ainv using LU factorization

 %moving the snake in each iteration
for i=1:N;

ssx = gamma * xs - kappa * interp2(fx,xs,ys); %This is where I receive the error
ssy = gamma * ys - kappa * interp2(fy,xs,ys);

%calculating the new position of snake
xs = Ainv * ssx;
ys = Ainv * ssy;

%Displaying the snake in its new position
 %     imshow(image,[]); 
 %     hold on;  
       plot([xs; xs(1)], [ys; ys(1)], 'r-');
 %     hold off;
 %     pause(0.001)    
        end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:48:33.680

似乎您提供`interp2`的是**vector** `xs`而不是**matrix** `xs`。

另请注意，最好[不要在 Matlab中使用`i`and`j`](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)作为变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:37:17.530

听起来您正试图访问位置 0 或数组的非整数 (0.1)，Matlab 数组从位置 1 开始。

```
>> a=[1,2,3];
>> a(0)
??? Subscript indices must either be real positive integers or logicals.
>> a(1)

ans =

     1 
```

# android - 仅在一个文件中使用 Edittext 的文件输出流保存

> ID：14984929
> 
> 赞同：0
> 
> 时间：2013-02-20T16:28:29.427
> 
> 标签：android, android-edittext, fileoutputstream

我需要使用文件输出流从编辑文本保存到文件或列表，但是每次我用编辑文本中写入的名称保存时，都会创建一个新文件，我怎样才能只制作一个文件，每次输入数据时在编辑文本中它只更新同一个文件。

另外，如何将计数器添加到文件中

```
Button save;
EditText Username, ID;
String FILENAME, JOUR;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.internal);
    save = (Button) findViewById(R.id.button1);
    save.setOnClickListener(this);
    Username = (EditText) findViewById(R.id.editText1);
    ID = (EditText) findViewById(R.id.editText2);

}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    FILENAME = Username.getText().toString();
    if (FILENAME.contentEquals("")){
        finish();
    }
    JOUR = ID.getText().toString();

    Username.setText("");
    ID.setText("");

    try {
        FileOutputStream fos = openFileOutput(FILENAME , Context.MODE_PRIVATE);
        fos.write(JOUR.getBytes());
    //  fos.write(FILENAME.getBytes());
        fos.close();

         Toast.makeText(
                   InternalStore.this,
                   FILENAME + " saved",
                   Toast.LENGTH_LONG).show();

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:48:11.083

尝试这个：

```
BufferedWriter out=new BufferedWriter(new FileWriter(getFilesDir()+File.separator+fileName.getText().toString()+".txt"));

out.write(text.getText().toString());
out.close(); 
```

# c# - 离开循环时出现 ForEach 错误

> ID：14984931
> 
> 赞同：0
> 
> 时间：2013-02-20T16:28:35.837
> 
> 标签：c#

我有一个 For each 循环，它使用 linq 从访问表中获取信息。它与另一个 For each 循环嵌套，该循环在第一列中列出一个名称：

```
Caregiver | week1 | week2|....
__________|_______|______|....
John Smith|   2   |   3  |....
Mary Jones|   0   |   1  |.... 
```

它持续 9 周，并在嵌套循环中获取“访问”计数。我相信当我离开内部循环时，当它到达外部循环中的最后一个看护者时，它会给我一个 NULL 错误，并且下周（第 2 周）从顶行再次开始出现问题。

在根据我的 Linq“访问”查询访问表之前，我在语句上收到**InvalidOperationException 。**`Select`我能做些什么来解决这个问题？

**编辑：**这是错误的图像：http: [//i.imgur.com/yztNLR3.png](http://i.imgur.com/yztNLR3.png)

```
var phs = from cg in Context.CareGivers
          join cgg in Context.CareGiverGroups on cg.car_gvr_int_id equals cgg.car_gvr_int_id
          join o in Context.Organizations on cgg.org_int_id equals o.org_int_id
          where cg.row_sta_cd.Trim() == "A"
          && cgg.alt_phy_id != null
          && cgg.alt_phy_id.Trim() != String.Empty
          && o.cli_acc_fg.Trim() == "Y"
          && o.org_int_id == 1468461
          select cg;

int r = 1;
int s = 1;

for (int i = 0; i < 9; i++)
   {
     start = start.AddDays(i * -7);
     end = start.AddDays(7);

     foreach (var cg in phs)
             {
             // grab the correct exception, this will allow us to figure out where the issue might be
              var visits = cg.CareGiverFunction.First(cgf => cgf.CodeDetail.cod_dtl_ds.Trim() == "Family Physician").VisitCareGiver.Select(vcg => vcg.Visit).AsQueryable();
              visits = visits.Where(v => v.adm_ts >= start && v.adm_ts < end
                       && (v.CodeDetail.cod_dtl_ext_id.Trim() == "I" || v.CodeDetail.cod_dtl_ext_id.Trim() == "V")
                       && v.VisitStatusCdCodeDetail.cod_dtl_ext_id.Trim() != "CANCEL");

               int counter = visits.Count();
               String phys = cg.Person.DisplayName();

               workbook.AddCell(r, 0, phys);
               workbook.AddCell(r, s, counter);
               r++;

              }
              s++;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:55:38.863

cg.CareGiverFunction.First() 可能不会返回结果，这意味着您在该行的其余代码没有任何数据可供比较。

Jon Skeet 回答了一个类似的问题，我会引导你到他的帖子，因为我怀疑我能不能比他更好地回答这个问题：[看这里](https://stackoverflow.com/a/3994349/543538)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:07:21.687

该`.Select`声明看起来正确。没有的是`start = start.AddDays(i * -7)`。我想你想要的是`start = start.AddDays(-7)`。除非每次都在循环顶部重新初始化 start （这也可能`s`如此），否则您首先要返回 7 天，然后再返回 14 天，然后再返回 21 天，然后再返回 28 天。也许您正在运行查询返回的数据的开头？

# ios - UIAlertView 覆盖现在在关闭后消失

> ID：14984932
> 
> 赞同：1
> 
> 时间：2013-02-20T16:28:38.307
> 
> 标签：ios, objective-c, uialertview

我有一个到目前为止我无法解决的烦人问题：`UIAlertView`我在我的应用程序中使用的一些在被解雇后无法删除它们的覆盖。

该应用程序很简单，唯一会影响 UIAlertView 的值得注意的事情是：

*   我有几个重叠的自定义视图构成了背景。
*   视图控制器被设置为 的委托`UIAlertView`，但它只实现`alertView:didDismissWithButtonIndex:`方法。

有任何想法吗？谢谢 ：）

# wpf - 具有半透明背景的文本框

> ID：14984933
> 
> 赞同：5
> 
> 时间：2013-02-20T16:28:38.707
> 
> 标签：wpf, xaml

文本框需要半透明背景，文本内容应正常显示。

**可以存储在资源字典中的**样式**或**画笔很好。****

 **笔记：

1.  我的文本框包含在 ContentControl 中。

2.  这个类似的问题没有帮助。[具有透明背景的文本框](https://stackoverflow.com/questions/5557365/textbox-with-a-transparent-background)。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T16:49:16.223

在 XAML 中，您可以将`Background`属性设置为`Transparent`：

```
<TextBox Background="Transparent" /> 
```

在代码隐藏中，您可以使用以下代码：

```
TextBox tb = new TextBox 
{
    Width = 100,
    Background = Brushes.Transparent
}; 
```

如果要将背景设置为对所有人透明，`TextBox`可以使用以下样式：

```
<Style TargetType="TextBox">
    <Setter Property="Background" Value="Transparent" />
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:38:20.080

如果您想在代码隐藏中设置半透明背景，您可以这样做

在继承自 TextBox 的类上使用依赖项

```
public static readonly DependencyProperty BgColourProperty =
  DependencyProperty.Register("BgColour", typeof(SolidColorBrush), typeof(myTextBox), null);

public SolidColorBrush BgColour
    {
        get { return (SolidColorBrush)GetValue(BgColourProperty); }
        set { SetValue(BgColourProperty, value); }
    } 
```

然后使用 Color.FromArgb() 设置您希望的任何颜色，其中第一个参数是 Alpha 分量

```
myTextBox.BgColour = new SolidColorBrush(Color.FromArgb(120,240, 17, 17)); 
```**

# java - Java Swing MenuItem 点击

> ID：14984934
> 
> 赞同：0
> 
> 时间：2013-02-20T16:28:43.773
> 
> 标签：java, swing, jmenuitem

我正在测试用户界面的响应时间，我需要在选择菜单项时调用计时器函数 stop()。这是菜单项代码：

```
 menuItem = new JCheckBoxMenuItem("Stop Timer");
        menu.add(menuItem); 
```

这是时间码（还有更多，但我认为它不相关）：

```
public void stop() {
    this.stopTime = System.currentTimeMillis();
    this.running = false;
} 
```

如何让按钮在单击时调用函数 stop()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:32:12.370

[按照Oracle 文档](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)中的说明向按钮添加侦听器并在那里调用`stop()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:35:53.120

1.  添加 itemListener ：`menuitem.addItemistener()`

    ```
    public void itemStateChanged(ItemEvent it){
        stop();   //call your function 
        } 
    ```

# java - JOGL - 多种纹理

> ID：14984938
> 
> 赞同：2
> 
> 时间：2013-02-20T16:29:10.133
> 
> 标签：java, opengl, jogl

在我的项目中，我希望为不同的对象使用一些纹理。

目前我有以下代码：

```
private Texture[] textures = new Texture[1];
private int texture1 = 0; // Which Filter To Use
private String textureFilename = "src/data/image.jpg"; 
```

并且`textures[texture1].bind(gl);`要将其绑定到对象，此时纹理被绑定到每个对象，这不是我想要的。

我假设有一种方法可以包含一个纹理列表，然后可以绑定到每个对象？只是想知道如何做到这一点，我尝试复制和编辑上面的代码，但它给了我错误，所以我猜我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T11:33:09.753

`private Texture[] textures = new Texture[1+more];`
`//private int texture1 = 0; // Which Filter To Use`
`private String textureFilename[1+more] = "src/data/image.jpg";`

`File textureFile = new File(textFile);`
`textures[any] = TextureIO.newTexture(textureFilename[any], true);`

`// draw`
`gl.glEnable(GL.GL_TEXTURE_2D);`
`texture[Index].bind();`
`texture[Index].enable();`
`...

# razor - 将自动完成属性添加到 Razor 中的文本框

> ID：14984940
> 
> 赞同：1
> 
> 时间：2013-02-20T16:29:12.637
> 
> 标签：razor, asp.net-mvc-4

在 Razor 中，我可以通过执行以下操作关闭文本框上的自动完成功能：

```
@Html.EditorFor(model => model.UserName, new { autocomplete = "off" }) 
```

有没有办法可以在 ViewModel 中使用 DataAnnotations 而不是在 View 中指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:36:28.460

我认为没有一种标准方法可以使用`EditorFor`扩展方法从 ViewModel 属性中操作 html 属性。

但是，如果您想让它保持 DRY ，您可以创建一个**自定义的 html 帮助器方法。**

顺便说一句，我认为将这些信息（html 属性）封装在 ViewModel 类中并不是一个好主意。

# javascript - 在javascript中访问未知对象的属性

> ID：14984941
> 
> 赞同：0
> 
> 时间：2013-02-20T16:29:13.307
> 
> 标签：javascript, jquery

我是 asp.net 开发人员。我正在开发一些具有 javascript 代码的第三方工具。

像：

```
"function(s, e) { alert(e) }; " 
```

如果我写了**e**那么它作为一个对象返回。

我怎样才能找到这个对象的属性？

有没有一些简单的方法/可能正在使用 Firebug 等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:30:04.820

在大多数调试工具中，您只需将其键入控制台即可进行检查。

你也可以这样做：

```
console.log(e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:30:16.067

`console.log(e)`在 firebug 中将列出它的所有属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:36:34.550

`console.log`将向控制台记录一条消息。使用 Firebug 和 chrome 开发工具，这通常会为对象的属性提供一个交互界面。如果对象是类似数组的，控制台通常会将其显示为`['val1', 'val2', ...]`而不是`{'key': 'value'}`.

`console.log`可以接受多个参数，因此最好将值分隔为：

```
console.log('Foo:', foo, 'Bar:', bar); 
```

而不是尝试使用字符串连接，这会破坏控制台的交互性。

此外，更好的控制台中的 DOM 元素通常可以悬停以突出显示元素在页面上出现的位置。

话虽如此，DOM 元素通常在控制台中是不可扩展的，如果您想探索它们的属性，这可能会很不方便。

**如果`console.dir`您想强制对象在控制台中可扩展，请使用此选项。**

# ide - 是否有任何 Cloud IDE 可以让我编写代码并获取 Windows 可执行文件？

> ID：14984950
> 
> 赞同：1
> 
> 时间：2013-02-20T16:29:44.377
> 
> 标签：ide, cloud

考虑到任何适用于 Windows 的编程语言，是否有任何云 IDE，我可以在其中提供代码并通过邮件或云存储接收可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-27T15:53:16.457

这听起来有点奇怪，但我认为您正在寻找的是一个交叉编译器和一个云 IDE，它使您能够安装您需要的任何工具（例如交叉编译器）。

我所知道的唯一一个是[Koding](https://koding.com/?c=ideh)，因为他们为您提供了一个完整的 Ubuntu 虚拟机（带有 Root 权限）。您可以安装所需的任何工具，因此在这种情况下它应该可以工作。

现在，您没有指定特定语言，因此很难在这方面为您提供帮助，但如果您正在寻找“Windows 特定”语言，例如 C#/.NET，请查看 Mono。带有交叉编译器的 Mono 可以在 Koding 上编译您需要的 bin，然后您只需从它们下载 exe。

所有基于浏览器的:)

# c - 在 Linux 上将密码从 GUI 传递到 CLI。

> ID：14984956
> 
> 赞同：1
> 
> 时间：2013-02-20T16:29:54.337
> 
> 标签：c, linux, user-interface, command-line-interface, stdin

我使用具有命令行界面的 C 语言在 Linux 中开发了一个应用程序。它完全是一个独立的应用程序。现在我也在使用 gtk 库在 C 中为它制作一个 GUI 界面。在 CLI 中，在某个操作之前，我的 CLI 应用程序等待密码（就像他们在 linux 中的 useradd 命令行实用程序中那样）。为此，我将创建一个带有密码字段的窗口，要求在 GUI 中输入密码。

我的问题是如何将密码从 GUI 传输到在 CLI 中等待密码的应用程序？我可以将从 GUI 获取的密码重定向到 CLI 进程的标准输入吗？

另外请让我知道我的方法是否正确或标准方法是什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:33:23.567

你当然可以。我对 GTK 了解不多，但您可以简单地使用`popen`，这是肯定的。对于双向通信，看看[Can popen() 可以制作像 pipe() + fork() 这样的双向管道吗？](https://stackoverflow.com/questions/3884103/can-popen-make-bidirectional-pipes-like-pipe-fork)

# javascript - setInterval()——意外的标识符——但它只工作一次

> ID：14984959
> 
> 赞同：9
> 
> 时间：2013-02-20T16:29:57.350
> 
> 标签：javascript, jquery

`Uncaught SyntaxError: Unexpected identifier`如果它工作一次，为什么我会得到？

[StackOverflow](https://stackoverflow.com/search?q=unexpected%20identifier)上有很多这样的东西。妙语通常是脚本中某处的错字。

它工作一次，然后每秒给出 1 条错误消息。

在这里，我正在更改地图上状态的颜色：

```
<!-- language: lang-js -->
<script type="text/javascript">
colors = [ 'rgba(255,0,0,0.1)','rgba(0,255,0,0.1)','rgba(0,0,255,0.1)'  ];

$(document).ready(function(){

    setInterval(
        $("ul").children().eq( Math.floor(50*Math.random())).css('color', colors[Math.floor(3*Math.random())] )
    ,1000);

});
</script> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T16:32:02.110

您缺少`function(){}`包装代码。

```
setInterval(function(){
    $("ul").children().eq( Math.floor(50*Math.random())).css('color', colors[Math.floor(3*Math.random())] )
},1000); 
```

它工作一次，因为它执行您的内部代码以寻找要返回的函数或字符串。如果不是，它会因 js 错误而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:42:43.193

setInterval 接受引号中的参数：

```
<script type="text/javascript">
colors = [ 'rgba(255,0,0,0.1)','rgba(0,255,0,0.1)','rgba(0,0,255,0.1)'  ];

$(document).ready(function(){

    setInterval(
        '$("ul").children().eq( Math.floor(50*Math.random())).css("color", colors[Math.floor(3*Math.random())] )'
    ,1000);

});
</script> 
```

# django - 在 django admin 中，如何为 ManyToManyField 的背面添加一个字段

> ID：14984964
> 
> 赞同：3
> 
> 时间：2013-02-20T16:30:09.717
> 
> 标签：django, django-admin

我有两个模型，“产品”和“范围”，由多对多字段链接。“产品”类在我没有编写的应用程序中，因此无法修改（我可以为它编辑模型管理员）。我想让“范围”和“产品”在管理员中是可编辑的，我想用 FilteredSelectMultiple 来完成，而不是内联管理员。

简化的“models.py”：

```
class Product(models.Model):
    name = models.CharField(max_length=64)
    #etc...
    #I can't modify this class

class Range(models.Model):
    name = models.CharField(max_length=32)
    products = models.ManyToManyField(Product, related_name='ranges') 
```

和 admin.py：

```
class ProductAdmin(admin.ModelAdmin):
    # What do I put here to get a multi-select box for ranges?
    # Preferrably with one of those 'add' buttons to popup a window
    # to add ranges. 
```

如果我可以修改产品，我可以使用现有的直通表在其上放置一个 ManyToManyField，这可以正常工作，但如前所述，我不能（或者不会，因为它会使外部应用程序的升级成为一个真正的痛苦）。

提前感谢您的帮助！（PS 我希望在这里很容易看到为什么我不想使用内联管理表单 - 它使 UI 变得不必要地复杂）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T12:03:02.930

抱歉，可能有点晚了，但任何使用谷歌搜索的人都可以从这个答案中受益。这不是那么容易，但它是可行的。您必须构建自己的表单（如果需要，可以从现有表单继承），然后手动加载和保存项目。

```
from django import forms
from django.contrib import admin

class ProductForm(forms.ModelForm):
    # <- your own fields declaration
    ranges = forms.ModelMultipleChoiceField(
        label='Ranges',
        queryset=Range.objects.all(),
        required=False,
        widget=admin.widgets.FilteredSelectMultiple("ranges", is_stacked=False))

    class Meta:
        model = Product

class MyProductAdmin(admin.ModelAdmin):

    def save_model(self, request, obj, form, change):
        # Save first to obtain id
        super(MyProductAdmin, self).save_model(request, obj, form, change)
        # Clean and re-add related objects
        obj.range_set.clear()
        for range in form.cleaned_data['ranges']:
             obj.range_set.add(range)

    def get_form(self, request, obj=None, **kwargs):
        if obj:
            ProductForm.base_fields['ranges'].initial = [o.pk for o in obj.range_set.all()]
        else:
            ProductForm.base_fields['ranges'].initial = []
        return ProductForm

# unregister and register again
admin.site.unregister(Product)
admin.site.register(Product, MyProductAdmin) 
```

# jquery - 为什么这个 jquery 选择器不能识别这些图像

> ID：14984966
> 
> 赞同：0
> 
> 时间：2013-02-20T16:30:10.340
> 
> 标签：jquery, html, css, css-selectors

我有一个用于加载数据并附加到 div 的 xml 函数。css 和 jQuery for`div.thumb img`没有选择图像。

JavaScript：

```
$(document).ready(function () {
    function loadfail() {  alert("Error: Failed to read file!");  }    

    //Load xml data
    function parse(document) {
        $("#thumbs").append('<div class="thumb">');

        $(document).find("entry").each(function () {
            var image = $(this).find('image').text();          

            $("#thumbs").append('<img src="Styles/images/' + image + '" width="64" height="64" />');           

        });

        $("#thumbs").append('</div>');

        $('div.thumb img').click(function () {
            $('#expandedimage').slideToggle(1000);
        });
    }

    $.ajax({
        url: 'appdata/data.xml',    // name of file with our data  
        dataType: 'xml',       // type of file we will be reading  
        success: parse,        // name of function to call when done reading file 
        error: loadfail        // name of function to call when failed to read 
    });
}); 
```

CSS：

```
div.thumb { float:left ; padding: 1px; }
div.thumb img { border: 2px solid white; } 
```

HTML 标记：

```
<div id="body">
    <div id="expandedimage">
        Toggled Image
    </div>
    <hr />
    <div id="thumbholder">                
        <div id="thumbs">
            <!-- image(s) here! -->
        </div>
        <hr />
    </div>        
</div> 
```

该代码在每个图像放置一个 div 时有效，而不是将所有图像放在一个 div 中：

```
$("#thumbs").append('<div class="thumb"><img src="Styles/images/' + image + '" width="64" height="64" /></div>'); 
```

但是，第二个`<br />`没有出现图像。

那么我的问题是，为什么当我有一个 div 和该 div 中的图像时，`div.thumb img`它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:40:59.310

我认为您误解了附加功能。您应该附加有效的 xml/html。尝试一些类似的东西。

```
function parse(document) {

 var containerDiv = $("#thumbs").append('<div class="thumb" />');

  $(document).find("entry").each(function () {
    var image = $(this).find('image').text();          

    containerDiv.append('<img src="Styles/images/' + image + '" width="64" height="64" />');           

  });

containerDiv.find('img').click(function () {

    $('#expandedimage').slideToggle(1000);
});
} 
```

append 函数不会附加文本字符串，而是附加元素，因此您将图像作为同级附加到 div.thumb 而不是作为子级

# python - python扭曲代理超时

> ID：14984969
> 
> 赞同：4
> 
> 时间：2013-02-20T16:30:11.513
> 
> 标签：python, timeout, twisted, agent

我对twisted很陌生，我正在尝试制作一个异步客户端来获取一些url并将结果保存到每个url的不同文件中。当我用有限数量的服务器运行程序时，比如说 10 台，反应器循环正确结束并且程序终止。但是，当我使用例如 Alexa top 2500 运行程序时，程序开始获取 url，但随后不会终止。我已经设置了超时但它不起作用，我相信一定有一些打开的套接字不会触发任何错误或成功的回调。我的目标是一旦程序获取页面或每个连接超时已过期，程序必须终止并关闭所有活动的文件描述符。

对不起，复制和粘贴时没有保留代码缩进，现在我已经检查并修复了。该代码是给出示例的最低限度，请注意，我的问题是当我启动具有大量要抓取的站点的程序时反应堆没有停止。

```
#!/usr/bin/env python

from pprint import pformat
from twisted.internet import reactor
import twisted.internet.defer
import sys
from twisted.internet.protocol import Protocol
from twisted.web.client import Agent
from twisted.web.http_headers import Headers

class PrinterClient(Protocol):
    def __init__(self, whenFinished, output):
         self.whenFinished = whenFinished
         self.output = output

    def dataReceived(self, bytes):
         #print '##### Received #####\n%s' % (bytes,)
         self.output.write('%s' % (bytes,))

    def connectionLost(self, reason):
        print 'Finished:', reason.getErrorMessage()
        self.output.write('Finished: %s \n'%(reason.getErrorMessage()))
        self.output.write('#########end########%s\n'%(reason.getErrorMessage()))
        self.whenFinished.callback(None)

def handleResponse(r, output, url):
    output.write('############start############\n')
    output.write('%s\n'%(url))
    #print "version=%s\ncode=%s\nphrase='%s'" % (r.version, r.code, r.phrase)
    output.write("version=%s\ncode=%s\nphrase='%s'"\
             %(r.version, r.code, r.phrase))
    for k, v in r.headers.getAllRawHeaders():
        #print "%s: %s" % (k, '\n  '.join(v))
        output.write("%s: %s\n" % (k, '\n  '.join(v)))
    whenFinished = twisted.internet.defer.Deferred()
    r.deliverBody(PrinterClient(whenFinished, output))
    return whenFinished

def handleError(reason):
    print reason
    #reason.printTraceback()
    #reactor.stop()

def getPage(url, output):
    print "Requesting %s" % (url,)
    d = Agent(reactor).request('GET',
                       url,
    Headers({'User-Agent': ['Mozilla/4.0 (Windows XP 5.1) Java/1.6.0_26']}),
                       None)
    d._connectTimeout = 10
    d.addCallback(handleResponse, output, url)
    d.addErrback(handleError)
    return d

if __name__ == '__main__':
    semaphore = twisted.internet.defer.DeferredSemaphore(500)
    dl = list()
    ipset = set()
    queryset =  set(['http://www.google.com','http://www.google1.com','http://www.google2.com', "up to 2500 sites"])
    filemap = {}
    for q in queryset:
        fpos = q.split('http://')[1].split(':')[0]
        dl.append(semaphore.run(getPage, q, filemap[fpos]))
    dl = twisted.internet.defer.DeferredList(dl)
    dl.addCallbacks(lambda x: reactor.stop(), handleError)
    reactor.run()
    for k in filemap:
        filemap[k].close() 
```

谢谢。捷波

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T18:08:53.920

您的超时代码至少有两个问题。

首先，您设置的唯一超时是`_connectTimeout`，并且您将其设置在`Deferred`从`Agent.request`. 这是一个无意义的属性，`Agent`实现中的任何内容或 Twisted 的任何部分都不会尊重它。我认为你的意思是在实例上设置这个属性`Agent`，它会产生一些影响。但是，它是一个私有属性，并不意味着您可以直接与之交互。相反，您应该传递`connectTimeout=10`给`Agent`初始化程序。

其次，此超时仅影响 TCP 连接设置超时。将其设置为`10`意味着如果无法在 10 秒内为特定 URL 建立与 HTTP 服务器的 TCP 连接，则请求尝试将失败并出现超时错误。但是，如果在不到 10 秒的时间内成功建立了连接，则超时没有进一步的意义。如果服务器需要 10 个小时才能向您发送响应，`Agent`则会坐在那里等待 10 个小时。你需要一个额外的超时，一个完整的请求超时。

`reactor.callLater`这是单独使用和可能实现的东西`Deferred.cancel`。例如，

```
...
d = agent.request(...)
timeoutCall = reactor.callLater(60, d.cancel)
def completed(passthrough):
    if timeoutCall.active():
        timeoutCall.cancel()
    return passthrough
d.addBoth(completed)
... 
```

# c++ - 将数组传递给函数

> ID：14984970
> 
> 赞同：0
> 
> 时间：2013-02-20T16:30:13.493
> 
> 标签：c++, arrays, function

我有一门课叫Planet。

我有一系列行星对象。

我声明数组如下：

```
planet * planetList[5] = 
{
  new planet(...),
  new planet(...),
  new planet(...),
  new planet(...),
  new planet(...),
}; 
```

所以我需要把这个数组传递给这两个函数。

对于这两个函数，我将它们声明为具有完全相同的参数：

```
void function1 (planet planetList[5], int numOfPlanets) {...}
void function2 (planet planetList[5], int numOfPlanets) {...} 
```

但是当我调用这两个函数时，

```
// receives no error
function1(planetList, numOfPlanets);
// error saying "cannot convert parameter 1 from 'planet *[5]' to 'planet []'"
function2(planetList, numOfPlanets); 
```

谁能解释这种现象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:38:04.337

您已经声明了一个行星指针数组（planet * []），但函数参数是行星对象数组（planet []）。因此，这两个函数调用都不应该起作用。

尝试：

```
void function1(planet *planetList[5], int numOfPlanets) {}
void function2(planet *planetList[5], int numOfPlanets) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:32:13.927

试试这个：

```
void function1 (planet** planetList, int numOfPlanets) {...}
void function2 (planet** planetList, int numOfPlanets) {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:54:13.067

你有一个指向对象的指针数组。你有一个指向对象的指针数组，所以任何指向指针数组的指针都会为你做
wrk
`void function1 (planet *planetList[5], int numOfPlanets) {...}
void function2 (planet *planetList[5], int numOfPlanets) {...}`

或者

`void function1 (planet **planetList, int numOfPlanets) {...}
void function2 (planet **planetList, int numOfPlanets) {...}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:55:18.630

> 我有一组行星对象

不，你有一个指向 Planet 对象的指针数组。对象数组如下所示：

```
planet planetList[5] = 
{
  planet(...),
  planet(...),
  planet(...),
  planet(...),
  planet(...),
}; 
```

这可能就是你想要的。

如果出于某种原因您真的想要一个指针数组，那么您需要更改函数以接受：

```
void function1(planet * planetList[5], int numOfPlanets); 
```

或等效地

```
void function1(planet ** planetList, int numOfPlanets); 
```

> 谁能解释这种现象？

不，这两个函数都应该无法以相同的方式编译。您能否发布一个更完整的示例，以便我们自己重现该现象？

# ember.js - 在 ObjectController 的 init 中设置内容

> ID：14984975
> 
> 赞同：1
> 
> 时间：2013-02-20T16:30:25.217
> 
> 标签：ember.js

[http://jsbin.com/onikid/3/edit](http://jsbin.com/onikid/3/edit)

有人可以告诉我为什么`content`不坚持覆盖`init`电话吗？如果我设置它工作正常`content`，`setupController`但这不是我想做的事情，因为我可以从多个路由使用这个控制器，我必须在所有“子”路由中初始化它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:03:12.463

它被保存，但再次被 ember 覆盖。以下代码在设置期间由路由运行[(Link to Ember Source)](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/system/route.js#L112)。在您的情况下调用此函数时， contex 未定义。因此，控制器的内容（模型是别名）设置为未定义。

```
setup: function(context) {
    this.redirected = false;
    this._checkingRedirect = true;

    this.redirect(context);

    this._checkingRedirect = false;
    if (this.redirected) { return false; }

    var controller = this.controllerFor(this.routeName, context);

    if (controller) {
      this.controller = controller;
      set(controller, 'model', context);
    }

    if (this.setupControllers) {
      Ember.deprecate("Ember.Route.setupControllers is deprecated. Please use Ember.Route.setupController(controller, model) instead.");
      this.setupControllers(controller, context);
    } else {
      this.setupController(controller, context);
    }

    if (this.renderTemplates) {
      Ember.deprecate("Ember.Route.renderTemplates is deprecated. Please use Ember.Route.renderTemplate(controller, model) instead.");
      this.renderTemplates(context);
    } else {
      this.renderTemplate(controller, context);
    }
  }, 
```

因此，您的要求可能无法满足，因为控制器的内容将始终设置为传递的上下文。

# c# - 检查字符串是否多次包含子字符串

> ID：14984978
> 
> 赞同：7
> 
> 时间：2013-02-20T16:30:39.547
> 
> 标签：c#, search

要在字符串中搜索子字符串，我可以使用该`contains()`函数。但是如何检查一个字符串是否多次包含子字符串？

优化这一点：对我来说，知道有多个结果而不是多少就足够了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T16:34:55.910

尝试利用快速`IndexOf`和`LastIndexOf`字符串方法。使用下一个代码片段。想法是检查第一个和最后一个索引是否不同，如果第一个索引不是-1，这意味着字符串存在。

```
string s = "tytyt";

var firstIndex = s.IndexOf("tyt");

var result = firstIndex != s.LastIndexOf("tyt") && firstIndex != -1; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-05T03:47:17.427

RegEx 的一行代码：

```
return Regex.Matches(myString, "test").Count > 1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T16:36:39.220

您可以使用以下扩展方法，该方法使用[`string.IndexOf`](http://msdn.microsoft.com/en-us/library/7cct0x33%28v=vs.100%29.aspx)：

```
public static bool ContainsMoreThan(this string text, int count, string value,  StringComparison comparison)
{
    if (text == null) throw new ArgumentNullException("text");
    if (string.IsNullOrEmpty(value))
        return text != "";

    int contains = 0;
    int index = 0;

    while ((index = text.IndexOf(value, index, text.Length - index, comparison)) != -1)
    {
        if (++contains > count)
            return true;
        index++;
    }
    return false;
} 
```

按以下方式使用它：

```
string text = "Lorem ipsum dolor sit amet, quo porro homero dolorem eu, facilisi inciderint ius in.";
bool containsMoreThanOnce = text.ContainsMoreThan(1, "dolor", StringComparison.OrdinalIgnoreCase); // true 
```

[**演示**](http://ideone.com/GOxf9F)

它是一个字符串扩展名，可以传递您搜索的 、 和`count`（例如，不区分大小写地搜索）。`value``StringComparison`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T16:41:17.130

您也可以使用 Regex 类。[msdn 正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

```
 int count;
   Regex regex = new Regex("your search pattern", RegexOptions.IgnoreCase);
   MatchCollection matches = regex.Matches("your string");
   count = matches.Count; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T16:37:04.353

```
private bool MoreThanOnce(string full, string part)
{
   var first = full.IndexOf(part);
   return first!=-1 && first != full.LastIndexOf(part);
} 
```

# java - Spring IDE安装错误1

> ID：14984979
> 
> 赞同：0
> 
> 时间：2013-02-20T16:30:40.053
> 
> 标签：java, spring

当我从 spring-tool-suite-3.0.0.RELEASE-e4.2-win32-installer.exe 安装 spring IDE 时出现问题，它说安装它需要 jre5，但我使用的是 windows Xp 和 jre6已经安装在我的系统上。那么我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:14:29.100

尝试在 Eclipse.ini 中指定 jre 文件夹的位置：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Java\JDK\1.6\bin\javaw.exe
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx1024m 
```

[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)

# wcf - 必须使用带有动词 SET 的 APP 对象的确切标识符

> ID：14984980
> 
> 赞同：2
> 
> 时间：2013-02-20T16:30:40.677
> 
> 标签：wcf, msmq

我正在关注[这篇](http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx)关于允许 WCF 从 MSMQ 读取数据的文章，但使用此命令时出现错误

```
appcmd set app "MSMQ/MsmqService" /enabledProtocols:net.msmq 
```

MSMQ 是我的 IIS 托管网站的名称，MsmqService 是 .svc 文件的名称。

我得到的错误是

```
ERROR ( message:Must use exact identifer for APP object with verb SET. ) 
```

这是我的网站在 IIS 中的样子

![iis](../Images/1b8e7cd3e02836e17355218b10cbe5e3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-12-26T20:52:53.030

我今天遇到了这个问题，所以这里是“确切标识符”错误的修复：

改变

`"MSMQ/MsmqService"`

到

`"MSMQ/MsmqService/"`

`appcmd`只需要一个在末尾包含斜杠的路径（确切标识符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:57:32.573

@Sachin，您通过运行此命令尝试执行的所有操作都是在虚拟目录的启用协议中设置 net.msmq 。在此特定命令中，MsmqService 是您的网站 MSMQ 下的 vDir 的名称。如果您创建一个名为 MsmqService 的 vDir 并执行此命令，该命令将成功（而不是 svc 文件名）。并且 svc 文件应该具有 .svc 扩展名，以便 IIS 能够在请求到达时调用适当的处理程序。

或者，您可以按照以下说明在 IIS UI 中执行相同的操作：

1.  运行提示中的 inetmgr
2.  转到网站 MSMQ
3.  导航到 vDir MsmqService。右键单击-> 管理应用程序-> “高级设置...”
4.  请注意名为“启用的协议”的设置。在此处输入 net.msmq。点击确定。

# spring - Grails 从不重定向到登录页面

> ID：14984982
> 
> 赞同：1
> 
> 时间：2013-02-20T16:30:44.400
> 
> 标签：spring, security, grails

如果用户尝试访问受保护的资源，如何强制用户进入登录页面？我正在尝试实现基于 ajax 的身份验证。简单的登录和注销过程似乎工作正常，但每当我尝试访问需要登录的资源时，我得到的只是一个 404 错误（在 html 正文中，我看到的是 403 错误）。

# html - 名字和姓氏输入字段不会填充到电子邮件正文中

> ID：14984983
> 
> 赞同：0
> 
> 时间：2013-02-20T16:30:46.083
> 
> 标签：html, windows-8

所以我正试图冒险进入 Windows 8 编程的神秘世界。我注意到我可以用 HTML5 编写应用程序（酷！），但我在编写的内容中遇到了一些错误。这个应用程序没有任何用途（此时），只是一个简单的表单应用程序，用于从文本框中收集字符串值，并将其吐到电子邮件草稿中以准备发送。

这是我的代码：

```
<form action="MAILTO:email@mail.com" method="post" enctype="text/plain">
    First Name: <input type="text" name="firstname" value="Your First Name"/><br />
    Last Name: <input type="text" name="lastname" value="Your Last Name"/><br />
    <input type="submit" value="send" />
</form> 
```

当我点击提交时，它确实打开了 Windows 8 邮件应用程序，并填充了正确的发件人字段！但是，名字和姓氏字符串不会填充到电子邮件正文中。

有什么想法吗？这全都在我使用 Visual Studio 的 default.html 文件中。这是我所拥有的一个片段

![Visual Studio 的片段](../Images/a8c8e62c9cb9de0c60593e499a82dcf3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:52:27.270

如果您正在为 Windows 8 进行开发，那么您运行的是 Windows 8 操作系统，并且默认使用支持 HTML5 的 Internet Explorer 10。

我相信问题可能出在您的代码上。尝试将“post”更改为“get”，并指定电子邮件正文。例如，此代码适用于我将打开的文本区域插入到电子邮件的正文中：

```
 <form action="MAILTO:email@mail.com" method="get" enctype="text/plain">
        <br/>
        <textarea name=Body></textarea>
        <input type="submit" value="send" />
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T18:23:08.483

就像穆罕默德已经说过的那样，HTML 应用程序通过 Internet Explorer（或至少它的引擎）显示。为避免这种情况，您可以在您的应用程序中使用另一个网络浏览器（例如来自 Firefox 的 Gecko），只需填写 XAML 应用程序的中心（顺便说一句，它接近 HTML），您可以使用 IMO 的 C#（查看语法) 不仅接近Java。

# java - Java 类文件的创建是确定性的吗？

> ID：14984984
> 
> 赞同：95
> 
> 时间：2013-02-20T16:30:47.953
> 
> 标签：java, compiler-construction, javac

当使用*相同的JDK*（即相同​​的`javac`可执行文件）时，生成的类文件是否总是相同的？*是否会因操作系统*或*硬件*而有所不同？除了JDK版本之外，还有其他因素导致差异吗？是否有任何编译器选项可以避免差异？只是理论上可能存在差异，还是Oracle`javac`实际上为相同的输入和编译器选项生成不同的类文件？

**更新1**我对*生成*感兴趣，即编译器输出，而不是类文件是否可以在各种平台上*运行。*

**更新 2**通过“相同的 JDK”，我也指相同的`javac`可执行文件。

**更新 3** Oracle 编译器的理论差异和实际差异之间的区别。

[编辑，添加释义问题]
“相同的 javac 可执行文件在不同平台上运行时会产生不同字节码的情况是什么？”

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-20T17:11:06.993

让我们这样说：

我可以很容易地生成一个完全一致的 Java 编译器，它不会在`.class`给定相同文件的情况下两次生成相同的`.java`文件。

我可以通过调整各种字节码构造或简单地向我的方法添加多余的属性来做到这一点（这是允许的）。

鉴于*规范*不*要求*编译器生成逐字节相同的类文件，我会*避免依赖* 这样的结果。

*但是*，我检查过的几次，使用相同的编译器和相同的开关（以及相同的库！）编译相同的源文件*确实*会产生相同的`.class`文件。

*更新：*我最近偶然发现了这篇关于[在 Java 7中实现](https://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy)[on的](https://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy)[有趣博客文章`switch``String`](https://blogs.oracle.com/darcy/entry/project_coin_string_switch_anatomy)。在这篇博文中，有一些相关的部分，我将在这里引用（强调我的）：

> 为了使编译器的输出可预测和可重复，这些数据结构中使用的映射和集合是`LinkedHashMap`s 和`LinkedHashSet`s 而不仅仅是`HashMaps`and `HashSets`。就给定编译期间**生成的代码的功能正确性而言，****使用`HashMap`和`HashSet`会很好**；迭代顺序无关紧要。然而，*我们发现它`javac`的输出不因系统类的实现细节而变化*是有益的。

这很清楚地说明了这个问题：编译器*不需要*以确定的方式运行，只要它符合规范。然而，编译器开发人员意识到*尝试**通常*是一个好主意（假设它可能不太昂贵）。

 ** * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-20T16:43:15.733

编译器没有义务在每个平台上生成相同的字节码。您应该咨询不同供应商的`javac`实用程序以获得具体答案。

* * *

我将通过文件排序展示一个实际的例子。

假设我们有 2 个 jar 文件：`my1.jar`和`My2.jar`. 它们`lib`并排放置在目录中。编译器按字母顺序读取它们（因为 this 是`lib`），但是当文件系统不区分大小写时，顺序是`my1.jar`，如果区分大小写，则顺序是。`My2.jar``My2.jar``my1.jar`

`my1.jar`有一个`A.class`带有方法的 类

```
public class A {
     public static void a(String s) {}
} 
```

`My2.jar`具有相同的，`A.class`但具有不同的方法签名（接受`Object`）：

```
public class A {
     public static void a(Object o) {}
} 
```

很明显，如果你有电话

```
String s = "x"; 
A.a(s); 
```

它将在不同情况下编译具有不同签名的方法调用。因此，**根据您的文件系统区分大小写，您将获得不同的类。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-20T16:44:56.413

简短的回答 -**否**

* * *

### 长答案

对于不同的平台，它们`bytecode`不必相同。知道如何准确执行字节码的是 JRE（Java 运行时环境）。

如果您仔细阅读[Java VM 规范](http://docs.oracle.com/javase/specs/jvms/se5.0/html/VMSpecTOC.doc.html)，您就会知道，不同平台的字节码不一定是相同的。

通过[类文件格式](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html)，它显示了类文件的结构为

```
ClassFile {
    u4 magic;
    u2 minor_version;
    u2 major_version;
    u2 constant_pool_count;
    cp_info constant_pool[constant_pool_count-1];
    u2 access_flags;
    u2 this_class;
    u2 super_class;
    u2 interfaces_count;
    u2 interfaces[interfaces_count];
    u2 fields_count;
    field_info fields[fields_count];
    u2 methods_count;
    method_info methods[methods_count];
    u2 attributes_count;
    attribute_info attributes[attributes_count];
} 
```

检查次要版本和主要版本

> **次要版本，主要版本**
> 
> minor_version 和major_version 项的值是这个类文件的次要和主要版本号。主要和次要版本号一起确定了类文件格式的版本。如果一个类文件的主版本号为 M 和次要版本号为 m，我们将其类文件格式的版本表示为 Mm。因此，类文件格式版本可以按字典顺序排序，例如 1.5 < 2.0 < 2.1。当且仅当 v 位于某个连续范围 Mi.0 v Mj.m 中时，Java 虚拟机实现才能支持版本 v 的类文件格式。只有 Sun 可以指定符合 Java 平台某个发布级别的 Java 虚拟机实现可以支持的版本范围。1

通过脚注阅读更多内容

> 1 Sun 的 JDK 版本 1.0.2 的 Java 虚拟机实现支持类文件格式版本 45.0 到 45.3（含）。Sun 的 JDK 版本 1.1.X 可以支持 45.0 到 45.65535（含）范围内的版本的类文件格式。Java 2 平台 1.2 版的实现可以支持 45.0 到 46.0 范围内的版本的类文件格式（包括 45.0 到 46.0）。

因此，调查这一切表明在不同平台上生成的类文件不必相同。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T22:51:57.713

首先，规范中绝对没有这样的保证。符合标准的编译器可以将编译时间标记为生成的类文件作为附加（自定义）属性，并且类文件仍然是正确的。然而，它会在每个构建中生成一个字节级的不同文件，而且微不足道。

其次，即使没有这些令人讨厌的技巧，也没有理由期望编译器连续两次执行完全相同的操作，除非它的配置和输入在两种情况下都相同。该规范*确实*将源文件名描述为标准属性之一，并且在源文件中添加空行可以很好地更改行号表。

第三，由于主机平台，我从未遇到过任何构建差异（除了由于类路径上的差异引起的差异）。因平台而异的代码（即本机代码库）不是类文件的一部分，从字节码实际生成本机代码是在加载类之后发生的。

第四（也是最重要的）想要知道这一点，它*散发出一种糟糕的过程气味（就像代码气味，但对于您如何处理代码）。*如果可能，对源代码进行版本控制，而不是对构建版本，如果您确实需要对构建版本进行版本控制，请在整个组件级别而不是在单个类文件上进行版本控制。根据偏好，使用 CI 服务器（例如 Jenkins）来管理将源代码转换为可运行代码的过程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T16:45:02.803

我相信，如果你使用相同的JDK，生成的字节码总是相同的，与使用的硬件和操作系统无关。字节码生成由 java 编译器完成，它使用确定性算法将源代码“转换”为字节码。因此，输出将始终相同。在这些情况下，只有源代码的更新才会影响输出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T16:48:30.563

`Java allows you write/compile code on one platform and run on different platform.` **阿法克**; 这只有在不同平台上生成的类文件相同或技术相同（即相同）时才有可能。

**编辑**

我所说的**技术上相同**的评论是这样的。如果逐字节比较，它们不需要完全相同。

**因此，根据不同平台上的类的规范 .class 文件不需要逐字节匹配。**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T18:05:11.983

总的来说，我不得不说，当同一个编译器在不同的平台上编译时，不能保证相同的源代码会产生相同的字节码。

我会研究涉及不同语言（代码页）的场景，例如支持日语的 Windows。考虑多字节字符；除非编译器始终假定它需要支持所有可能针对 8 位 ASCII 进行优化的语言。

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)中有一个关于二进制兼容性的部分。

> 在 SOM 中发布到发布二进制兼容性的框架内（Forman、Conner、Danforth 和 Raper，OOPSLA '95 论文集），Java 编程语言二进制文件在作者确定的所有相关转换下都是二进制兼容的（有一些警告关于添加实例变量）。使用他们的方案，这里列出了 Java 编程语言支持的一些重要的二进制兼容更改：
> 
> • 重新实现现有方法、构造函数和初始化程序以提高性能。
> 
> • 更改方法或构造函数以返回输入的值，这些输入先前要么抛出通常不应发生的异常，要么因进入无限循环或导致死锁而失败。
> 
> • 向现有类或接口添加新字段、方法或构造函数。
> 
> • 删除类的私有字段、方法或构造函数。
> 
> • 更新整个包时，删除包中类和接口的默认（仅包）访问字段、方法或构造函数。
> 
> • 对现有类型声明中的字段、方法或构造函数重新排序。
> 
> • 在类层次结构中向上移动方法。
> 
> • 重新排序类或接口的直接超接口列表。
> 
> • 在类型层次结构中插入新的类或接口类型。
> 
> 本章规定了所有实现所保证的二进制兼容性的最低标准。当类和接口的二进制文件混合在一起时，Java 编程语言保证兼容性，这些二进制文件未知来自兼容的源，但其源已以此处描述的兼容方式进行了修改。请注意，我们正在讨论应用程序版本之间的兼容性。Java SE 平台版本之间的兼容性讨论超出了本章的范围。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-27T09:30:51.730

对于这个问题：

> “在什么情况下，相同的 javac 可执行文件在不同平台上运行时会产生不同的字节码？”

[交叉编译示例](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)展示了我们如何使用 Javac 选项：-target version

此标志生成与我们在调用此命令时指定的 Java 版本兼容的类文件。因此，类文件将根据我们在使用此选项进行编译期间提供的属性而有所不同。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-20T16:43:32.483

最有可能的答案是“是”，但要获得准确的答案，确实需要在编译期间搜索一些键或 guid 生成。

我不记得发生这种情况的情况。例如，为了序列化目的，ID 是硬编码的，即由程序员或 IDE 生成。

PS JNI 也很重要。

PPS 我发现它`javac`本身是用 java 编写的。这意味着它在不同平台上是相同的。因此，它不会无缘无故地生成不同的代码。因此，它只能通过本机调用来执行此操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-27T10:10:59.680

我会换一种说法。

首先，我认为问题不在于确定性：

当然它是确定性的：随机性在计算机科学中很难实现，编译器没有理由出于任何原因将它引入这里。

其次，如果您将其重新表述为“相同源代码文件的字节码文件有多相似？”，那么***不****，您不能依赖它们相似的事实*。

确保这一点的一个好方法是将 .class （或在我的情况下为 .pyc ）留在你的 git 阶段。您会意识到，在您团队中的不同计算机中，git 会注意到 .pyc 文件之间的更改，而 .py 文件没有发生任何更改（并且 .pyc 无论如何都会重新编译）。

至少这是我观察到的。所以把 *.pyc 和 *.class 放在你的 .gitignore 中！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-27T13:33:40.303

有两个问题。

```
Can there be a difference depending on the operating system or hardware? 
```

这是一个理论问题，答案很明显，是的，**可以**。正如其他人所说，该规范不要求编译器生成逐字节相同的类文件。

即使当前存在的每个编译器在所有情况下（不同的硬件等）都生成相同的字节码，明天的答案可能会有所不同。如果您从不打算更新 javac 或您的操作系统，您可以在特定情况下测试该版本的行为，但如果您从 Java 7 Update 11 升级到 Java 7 Update 15，结果可能会有所不同。

```
What are the circumstances where the same javac executable, when run on a different platform, will produce different bytecode? 
```

那是不可知的。

我不知道配置管理是否是您提出问题的原因，但这是可以理解的关心原因。比较字节码是一种合法的 IT 控制，但仅确定类文件是否更改，而不是确定源文件是否更改。*

# c# - 在 XNA WP8 C# 中更改分辨率

> ID：14984985
> 
> 赞同：0
> 
> 时间：2013-02-20T16:30:47.087
> 
> 标签：c#, xna, windows-phone-8

我正在使用 C# for Windows Phone 8 在 XNA 4.0 中编写游戏。

如何更改 Resolution 或 VirtualResolution（我不知道如何调用它）？我在网上寻找，但找不到正确的答案。

我发现（1）：

```
Resolution.SetVirtualResolution(1280, 720);
Resolution.SetResolution(800, 600, false); 
```

(2)

```
graphics.PreferredBackBufferHeight = 768;
graphics.PreferredBackBufferWidth  = 1024;
graphics.IsFullScreen = true;
graphics.ApplyChanges(); 
```

（1）我不知道如何使用它，（2）不起作用。我在 WP8 Emulator 中的分辨率为 800x480，但无法更改。

# visual-studio-2008 - 在 Visual Studio 2008 中使用 Nsight 无法“附加到进程”进行调试

> ID：14984986
> 
> 赞同：2
> 
> 时间：2013-02-20T16:30:51.730
> 
> 标签：visual-studio-2008, cuda, nvidia, nsight

我正在尝试使用 Nsight 和 Visual Studio 2008 调试 cuda 应用程序，因此我打开了“附加到进程”对话框。我将 Transport 设置为 Nsight GPU Debugger。我将 Qualifier 设置为我的机器的名称（在本例中为 MONAD）。我在可用进程小部件中看到一个进程列表，但它们都是灰色的，如果我单击我的应用程序，它仍然是灰色的，我无法单击附加按钮。

![“附加到进程”对话框的屏幕截图](../Images/5af154e69f58c234325507317f2f4c81.png)

当我构建应用程序时，我确保在使用 nvcc 编译我的 .cu 文件时使用 -G0 标志

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:55:24.840

请确保您已按照 Nsight Visual Studio 版本 3.0 章节[将调试附加到正在运行的 CUDA 进程中所述设置监视器设置和环境变量](http://http.developer.nvidia.com/NsightVisualStudio/3.0/Documentation/UserGuide/HTML/Content/Attach_CUDA_to_Process.htm)

让我知道这是否有帮助。谢谢

# r - 通过强制引入 NA 时如何避免警告

> ID：14984989
> 
> 赞同：138
> 
> 时间：2013-02-20T16:31:03.237
> 
> 标签：r, parsing, casting, na

我通常更喜欢对 R 进行编码，这样我就不会收到警告，但我不知道如何在使用`as.numeric`转换字符向量时避免收到警告。

例如：

```
x <- as.numeric(c("1", "2", "X")) 
```

会给我一个警告，因为它通过强制引入了 NA。我想要强制引入的 NA - 有没有办法告诉它“是的，这就是我想要做的”。还是我应该接受警告？

或者我应该为这项任务使用不同的功能？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-02-20T16:38:53.787

使用`suppressWarnings()`：

```
suppressWarnings(as.numeric(c("1", "2", "X")))
[1]  1  2 NA 
```

这会抑制警告。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-20T16:42:40.387

`suppressWarnings()`已经提到过。另一种方法是先手动将有问题的字符转换为 NA。对于您的特定问题，`taRifx::destring`就这样做。这样，如果你从你的函数中得到一些其他的、意外的警告，它就不会被抑制。

```
> library(taRifx)
> x <- as.numeric(c("1", "2", "X"))
Warning message:
NAs introduced by coercion 
> y <- destring(c("1", "2", "X"))
> y
[1]  1  2 NA
> x
[1]  1  2 NA 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2016-03-26T19:12:57.310

一般来说，抑制警告并不是最好的解决方案，因为您可能希望在提供一些意外输入时得到警告。
下面的解决方案是在数据类型转换期间仅维护 NA 的包装器。不需要任何包。

```
 as.num = function(x, na.strings = "NA") {
        stopifnot(is.character(x))
        na = x %in% na.strings
        x[na] = "0"
        x = as.numeric(x)
        x[na] = NA_real_
        x
    }
    as.num(c("1", "2", "X"), na.strings="X")
    #[1]  1  2 NA 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T08:56:52.087

我稍微修改了[jangorecki](https://stackoverflow.com/users/2490497/jangorecki)函数，以应对我们可能有各种无法转换为数字的值的情况。在我的函数中，执行模板搜索，如果找不到模板，则返回 FALSE。！在gperl之前，这意味着我们需要那些与模板不匹配的向量元素。其余与`as.num`功能类似。例子：

```
as.num.pattern <- function(x, pattern){
  stopifnot(is.character(x))
  na = !grepl(pattern, x)
  x[na] = -Inf
  x = as.numeric(x)
  x[na] = NA_real_
  x
}

as.num.pattern(c('1', '2', '3.43', 'char1', 'test2', 'other3', '23/40', '23, 54 cm.'))

[1] 1.00 2.00 3.43   NA   NA   NA   NA   NA 
```

# ios - 这段代码是否过度发布？

> ID：14984991
> 
> 赞同：1
> 
> 时间：2013-02-20T16:31:19.630
> 
> 标签：ios, cocoa-touch, release

我找不到问题出在哪里，但是这段代码正在崩溃。我是否过度释放任何对象？

```
settings = [[SettingsViewController alloc] initWithNibName:@"SettingsController" bundle:nil];
settings.hidesBottomBarWhenPushed = YES;

NSArray * arrayWithRootController = [[NSArray alloc] initWithObjects:settings, nil];
[(UINavigationController*)([self.tabBar.viewControllers lastObject])setViewControllers:arrayWithRootController];
[arrayWithRootController release];
[settings release]; 
```

如果我删除线

```
[settings release]; 
```

该应用程序不会崩溃。但我很确定它是正确的。问题可能出在其他地方吗？

有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:44:23.717

您在此片段中并没有过度释放，但显然有些地方是不对的。将根视图控制器添加到数组将保留它，但仅限于数组的生命周期。当数组死亡时，其中的所有对象也会被释放（我猜这里发生了什么）。

几件事要尝试：首先，确保将阵列放在您认为的位置：

```
[(UINavigationController*)([self.tabBar.viewControllers lastObject])setViewControllers:arrayWithRootController]; 
```

你期望`[self.tabBar.viewControllers lastObject]`成为什么？您确定这是您要分配新数组的位置吗？如果接收器无效，您的数组将不会保留在下一行中，这意味着视图控制器也将被释放。

我不熟悉您的架构，但您似乎正在将一组视图控制器分配给视图控制器。`self.tabBar`是一个导航控制器，你可以调用`setViewControllers`它。但是`self.tabBar.viewControllers lastObject`......好吧，大概这是一个视图控制器，但不一定是导航控制器，它可能不会响应 setViewControllers （在这种情况下它应该崩溃，除非它是 nil，我猜它可能是）。

最后，尝试使用 Instruments 工具 Zombies 来查看是否可以查明意外释放的来源。

# c# - 和 有什么区别 ?

> ID：14984997
> 
> 赞同：4
> 
> 时间：2013-02-20T16:31:32.793
> 
> 标签：c#, javascript, asp.net

这可能是一个新手问题，但我对 asp.net 和 C# 等还是很陌生。

我正在使用一个 ASP.net 网站，我很好奇它的结构（在自动创建一个 web 项目之后），特别是以下内容：

我在 Default.aspx 中看到，我有一个这样的标签：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>**strong text** 
```

但是在 Site.master 中，我有这个：

```
<head runat="server">
*etc*
</head> 
```

那么，如果我想在页面加载时包含要运行的 JavaScript 代码，我应该将代码放在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T16:35:47.410

我相信您可以将代码放入其中的任何一个中。第一个用于添加所有内容页面（使用此母版页文件）使用的代码或脚本，而第二个用于添加内容页面中的脚本或代码（应仅用于此特定页面）

```
//in the Master page, the content here is used by all content pages
<head runat="server">
*etc*
</head> 
```

和

```
//this is specific to the content page that use it. This section needs to be supplied in content pages
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content> 
```

该部分需要在每个内容页面中提供，并且它将是该页面独有的 - 没有其他页面可以使用该部分中的脚本

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T16:38:29.263

*asp:Content ID="HeaderContent"*是一个内容区域。生成该标记时，该标记内的任何内容都将嵌入到母版页中相关的 ContentPlaceHolder 中。

*head*是标准的 html 标记，表示页面的头部元素。通常，HeadContent 占位符位于母版页上的*head标记内。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:46:21.757

头元素，所有头元素的容器，必须使用文档的标题。它可以包括的其他一些元素：样式、基础、链接、元、脚本、noscript。

asp:Content ID = "HeaderContent" 是母版页的内容元素。请查看以下链接的插入内容部分以获取有关此内容的详细信息：http: [//odetocode.com/articles/419.aspx](http://odetocode.com/articles/419.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T08:01:03.593

我想你问过你什么时候想使用 JavaScript，你把 JS 放在你的代码中。你可以在脚本块之间的 asp 中放置任何你希望的地方，例如：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
     <script type="text/javascript">
        function Onclick(){
             //some codes
        }
     </script>
</asp:Content> 
```

或者

```
 <head runat="server">
     <script type="text/javascript">
        function Onclick(){
             //some codes
        }
     </script>
   </head> 
```

你也可以把 JS 放在这个标签之外。你只应该使用标签。

# html - 全角 div 中的多种背景颜色和图像

> ID：14984999
> 
> 赞同：2
> 
> 时间：2013-02-20T16:31:40.863
> 
> 标签：html, css, background, background-image

我正在尝试为具有多种背景颜色和图像的网站制作标题。左侧是棕褐色渐变和徽标图像，右侧是渐变为蓝绿色的旭日形/云图像，如下所示。

![标题](../Images/19f64f6815fcd9622ba87551399a68f2.png)

左侧（徽标）部分应为 230 像素宽，右侧（朝阳部分）应为 770 像素宽，总共 1000 像素，并且应该居中。左侧棕褐色渐变应该延伸到浏览器的左边缘，而蓝绿色应该延伸到右边缘。

我试图用百分比来做到这一点：

CSS：

```
#header {
  height: 105px;
  min-width: 1000px;
}
#header .left {
  width: 31%;
  background: url(../images/header_left_gradient.png) bottom left repeat-x;
  height: 105px;
  float: left;
}
#header .left #logo {
  float: right;
  width: 230px;
}
#header .right {
  width: 69%;
  background: url(../images/header-right.png) bottom left no-repeat #009eb0;
  height: 105px;
  float: left;
} 
```

HTML：

```
 <div id="header">
    <div class="left">
      <div id="logo">
        <img src="./media/images/logo.png" alt="">
      </div>
    </div>
    <div class="right">
      Text
    </div>
  </div> 
```

这几乎奏效了，但标题并没有在宽浏览器中保持居中。

[小提琴](http://jsfiddle.net/fufJ2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:40:20.047

设置页眉边距和宽度：

```
#header {
    height: 105px;
    margin: 0 auto;
    min-width: 1000px;
    width: 100%;
}

#header .left {
    background: none repeat scroll 0 0 #FF00FF;
    float: right;
    height: 105px;
    width: 31%;
}

#header .right {
    background: url("../images/header-right.png") no-repeat scroll 0 0 #009EB0;
    float: left;
    height: 105px;
    width: 69%;
} 
```

这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:57:11.777

有点hacky，但这应该可以解决问题：

```
body {
    text-align: center;
}

#header {
    display: inline-block;
    height: 105px;
    margin-left: auto;
    margin-right: auto;
    min-width: 1000px;
    text-align: left;
} 
```

您可以使用包装器 div 来应用文本对齐而不是正文，但我发布了这个以防您不想更改结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:37:07.627

我最终以一种 hacky 的方式解决了这个问题。首先，我像@Raad 建议的那样在标题周围添加了一个容器，然后在里面添加了另外两个 div 来保存我的颜色：

```
<div id="header-wrap">
  <div id="filler-left">
  </div>
  <div id="filler-right">
  </div>
  <div id="header">
    <div class="left">
      <div id="logo">
        <img src="./media/images/logo.png" alt="">
      </div>
    </div>
    <div class="right">
      Text
    </div>
  </div>
</div> 
```

然后是CSS：

```
#header-wrap {
  width: 100%;
  position: relative;
}
#header-wrap #filler-left {
  left: 0;
  width: 50%;
  position: absolute;
  height: 105px;
  background: url(../images/header_left_gradient.png) bottom left repeat-x;
}
#header-wrap #filler-right {
  left: 50%;
  width: 50%;
  position: absolute;
  height: 105px;
  background: #009eb0;
}
#header {
  height: 105px;
  width: 1000px;
  margin: 0 auto;
  position: relative;
} 
```

并将我的 .left 和 .right div 设置为固定宽度。效果很好。不是我理想的解决方案，但它有效。