# StackOverflow 问答 15210000-15210999

# php - javascript或php中的“状态”？

> ID：15210001
> 
> 赞同：1
> 
> 时间：2013-03-04T19:55:57.037
> 
> 标签：php, javascript, html, facebook, apache-flex

我和 FLEX 合作了一段时间，我有一些“状态”声明。对于那些不确定我的意思的人来说，这就像您可以翻译几个不同的页面，设置当前状态。
现在想开始Facebook开发，不知道怎么在我用html创建的页面之间传递。我想这可能使用 javascript 而不是 php，但我不确定如何。有人可以帮帮我吗？

我想做的一个方案是：

```
 tigger1  
State A-------------------->State B

              trigger2      
State B-------------------->State C 
```

以下示例显示了一个具有 2 种状态的登录面板：`default`，用于显示登录表单，以及`Register`用于显示用于注册的表单。当前状态更改由操作触发（在本例中，按下`Linkbutton`）。主要是状态做什么，是根据用户在每个状态下应该能够做什么来显示适当的内容。因此，例如，如果我想做一个付款表单，在用户尝试付款后，如果付款成功完成，我将有一个“Thank_you”状态，而如果付款失败，我将有一个“Try_again”状态“ 状态。如何使用 php/js 做到这一点？

[登录/注册面板](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf63611-7ffa.html#WS2db454920e96a9e51e63e3d11c0bf69084-7dd4)的代码示例（来自 adobe flex 网站，也可以在链接中找到运行示例和完整代码）：

```
<!-- The Application class states property defines the view states.-->
<s:states>
    <s:State name="default"/>    
    <s:State name="Register"/>
</s:states>

<!-- Set title of the Panel container based on the view state.-->
<s:Panel id="loginPanel" 
    title="Login" title.Register="Register">     

    <s:Form id="loginForm">
        <s:FormItem label="Username:">
            <s:TextInput/>
        </s:FormItem>
        <s:FormItem label="Password:">
            <s:TextInput/>
        </s:FormItem>

        <s:FormItem id="confirm" label="Confirm:" includeIn="Register">
            <!-- Add a TextInput control to the form ONLY for the Register view state. -->           
            <s:TextInput/>
        </s:FormItem>            

        <s:FormItem>            
            <!-- Use the LinkButton to change view state.-->
                <!-- Set label of the control based on the view state.-->
                <mx:LinkButton id="registerLink"
                    label="Need to Register?" 
                    label.Register="Return to Login"
                    click="currentState="Register"
                    click.Register="currentState="default"/>
                <s:Button id="loginButton" 
                    label="Login" label.Register="Register"/>
        </s:FormItem>            
    </s:Form>
</s:Panel> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:33:32.247

对，我想我明白你的问题了。Flex（或 Flash）与正在进行的变量（或状态）一起工作，因为它是一个长时间运行的程序，由来自用户界面的事件控制。

Web 编程不是这样的。每个页面都是单独提供的，来自一个仅在该请求期间存在的程序，因此必须通过使用 cookie 在客户端维护状态。由于服务器经常需要了解用户状态，cookie（如果设置了）由浏览器自动提供给服务器，服务器可以将 cookie 的值与该用户之前所做的事情交叉引用。

如果 cookie 值是唯一的，它可以用于交叉引用会话存储，这是一组仅供一个用户使用的值。PHP 在其`$_SESSION`特性中提供了这一点。这本身就是一个很大的话题，所以我建议在网络上搜索“PHP 会话示例”——这里和网络上——并使用一些代码。真实的例子将向您展示这一切是如何运作的。

编辑：原来状态（变量）和状态（UI变体）是不同的东西！有关更多详细信息，请参阅评论。

# ios - DrawRect 不断绘制白色背景

> ID：15210007
> 
> 赞同：0
> 
> 时间：2013-03-04T19:56:24.957
> 
> 标签：ios, uiview, core-graphics, drawrect, cgpath

```
//inside init
_color = [UIColor orangeColor];
self.backgroundColor = [UIColor clearColor];
self.clearsContextBeforeDrawing = NO;

//inside drawRect
CGContextRef ctx = UIGraphicsGetCurrentContext();

CGContextSaveGState(ctx);
    CGContextAddEllipseInRect(ctx, rect);
    CGContextSetFillColorWithColor(ctx,
                                   _color.CGColor);
    CGContextFillPath(ctx);
CGContextRestoreGState(ctx); 
```

背景一直显示为白色而不是透明。椭圆也不会改变颜色并显示为黑色。提前感谢任何看的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:19:36.097

我想你可以参考这个答案来解决你的透明度问题： [设置 CGContext 透明背景](https://stackoverflow.com/questions/2125543/setting-a-cgcontext-transparent-background)

至于您的椭圆颜色问题，它在我的模拟器上正确显示为橙色椭圆，因此您可以检查代码中其他部分的可能覆盖或其他可能的副作用。

# c# - 事件未在表单中正确引发

> ID：15210016
> 
> 赞同：2
> 
> 时间：2013-03-04T19:57:34.760
> 
> 标签：c#, .net, wpf, multithreading, events

我有一个带有事件处理程序的 MainWindow 无法正常工作。我已经为这个问题做了简单的模型。请查看问题所在代码中的注释：

```
public partial class MainWindow : Window
{
    public event EventHandler Event1;

    public MainWindow()
    {
        Event1 += MainWindow_Event1;
        InitializeComponent();
    }

    void MainWindow_Event1(object sender, EventArgs e)
    {
        textBox1.Text = "wth!?";  //Not changing text box. Not showing message. If delete this line, it will work fine
        MessageBox.Show("raised");  
    }

    private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        EventHandler evt = Event1;
        while (true)
        {
            Thread.Sleep(500);
            evt(null, null);
        }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += bw_DoWork;
        bw.RunWorkerAsync();

    }

} 
```

请解释这种行为，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:02:32.017

问题是您正在从后台线程调用事件。这将不起作用，并且在尝试访问`TextBox`. 但是，如果您更改此代码：

```
textBox1.Text = "wth!?";  //Not changing text box. Not showing message. If delete this line, it will work fine
MessageBox.Show("raised"); 
```

对此：

```
this.Dispatcher.BeginInvoke((Action)delegate()
{
    textBox1.Text = "wth!?";  //Not changing text box. Not showing message. If delete this line, it will work fine
    MessageBox.Show("raised"); 
}); 
```

它会为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:00:47.263

**您无法从后台线程更新 UI 元素。** 工作线程在尝试访问 UI 元素（Text 属性）时因异常而失败。所以 messageBox 也没有显示出来。使用通知机制或 Dispatcher 调用（网络上存在大量此类信息）

以下是可能的重复项/帮助：

[使用 BackgroundWorker 更新 GUI](https://stackoverflow.com/questions/5192169/update-gui-using-backgroundworker)

[从后台工作人员或事件更新 GUI](https://stackoverflow.com/questions/10019960/update-gui-from-background-worker-or-event)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:31:54.470

这个问题是因为你需要使用当前线程的同步上下文来进行线程之间的通信，像这样

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
        var sync = SynchronizationContext.Current;
        BackgroundWorker w = new BackgroundWorker();
        w.DoWork+=(_, __)=>
            {  
                //Do some delayed thing, that doesn't update the view
                sync.Post(p => { /*Do things that update the view*/}, null);
            };
        w.RunWorkerAsync();
    } 
```

请检查[这个](https://stackoverflow.com/questions/12323405/invalidoperationexception-with-backgroundworker-in-wpf/12323739#12323739)问题，希望可以帮助...

# php - 浏览器只从一个目录下载文件

> ID：15210018
> 
> 赞同：0
> 
> 时间：2013-03-04T19:57:39.857
> 
> 标签：php, xampp

我在各种网站上看到了一堆关于试图下载网页的浏览器的帖子。我有问题，但只有一个目录。我的 htdocs 中有几个网站，每个网站都位于不同的目录中。除了一个之外，所有工作都很好。每个都有一个 index.php 文件。如果我重命名问题 index.php 并将其复制到另一个目录，浏览器会呈现它。工作目录和非工作目录的文件权限相同：700。它在我以前的 Mac Mini 上运行良好，我认为我在当前的 Mac Mini 上一次可以工作。当我保存文件时，它仍然包含 php 代码，因此 Apache 没有执行它，这就是浏览器试图保存它的原因。

OS X 10.8.2 上的 XAMPP

更新

我想我得到了它的工作。我在 htdocs 中创建了一个新目录，并将问题目录的内容复制到其中。我将问题目录重命名为其他目录，并将新目录重命名为问题目录的名称。现在它工作正常。应该是目录有问题。这是 htdocs 的 ls -l ：

```
drwx------  41 myid  staff    1394 Mar  4 11:23 AmColAn
drwxr-xr-x  29 myid  staff     986 Mar  4 13:06 zetcho
drwxr--r--  30 myid  staff    1020 Mar  4 11:22 zetchoOld 
```

第一个和第二个目录工作正常。第三个是问题。我需要检查其他设置吗？我现在很好，但我想知道以防它再次发生。

# delphi - Delphi Designer，组件是否继承？

> ID：15210019
> 
> 赞同：6
> 
> 时间：2013-03-04T19:57:40.293
> 
> 标签：delphi, ide, designer, design-time

我正在编写一个自定义组件编辑器，本质上类似于`TActionList`编辑器，因为它允许创建子组件。编辑器具有添加/删除组件的按钮。

现在，我想知道所选组件是否被继承，以便我可以禁用删除按钮。`IDesigner`我在或相关接口中没有找到任何这样的成员。

如果我继续删除，`Designer.DeleteSelection(True);`那么我会得到一个例外：

> 选择包含一个组件，xxx，在祖先中引入并且不能被删除。

这还不错，但我宁愿首先禁用删除按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:03:54.900

好的，显然有一种方法，通过检查`TComponent.ComponentState`for `csAncestor`，所以：

> ComponentState 中的 csAncestor

并[记录在案](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TComponentState "文档")：

> csAncestor - 组件以祖先形式引入。仅当 csDesigning 也设置时才设置。

# c++ - 我的初始化变量显示为空

> ID：15210021
> 
> 赞同：-1
> 
> 时间：2013-03-04T19:57:51.620
> 
> 标签：c++

我的字符串`d`在我的控制台上显示为空（甚至不是空格），这让我感到困惑，因为我将它初始化为“NULL”并且我试图为其分配一个新值，它不是空值。

```
int main(){

    string user_String[99];
    int user_Input = 0;

    cout << "Please insert up to one hundred Strings: ";
    cin >> user_Input;

    //Check for range
    bool check = false;
    while( check == false){
        if (user_Input < 1 || user_Input >100){
            cout << "Please insert up to one hundred Strings: ";
            cin >> user_Input;}
        else{
            check = true;
            break;}
    }   

    //User input
    cout <<"Please enter string"<< endl;
    for (int counter = 0; counter < user_Input; counter++){
        int counter2 = counter + 1;
        cout << "Enter String " << counter2 << ": ";
        cin >> user_String[counter];
    }

    //Loopig for most letters
    string c = "NULL"; 
    for(int counter = 0; counter < user_Input; counter++){
        //Making Sure Coun doesn't go out of range
        int coun = 0;
        if (counter < user_Input){
            coun = counter +1;}
        else{
            coun = counter; 
        }

        string a = user_String[counter];
        string b = user_String[coun];       

        if (a.length() < b.length() && c == "NULL"){
            c = b;
        }

        if(a.length() < b.length() && c!="NULL" && c.length() < b.length()){
            c = b;
        }
        else{
            continue;
        }

    }
    cout << "The string "<< c <<" have the most letters." << endl;

    //Looping for least letters
    string d = "NULL"; 
    for(int counter = 0; counter < user_Input; counter++){
        //Making Sure Coun doesn't go out of range
        int coun = 0;
        if (counter < user_Input){
            coun = counter +1;}
        else{
            coun = counter; 
        }

        string a = user_String[counter];
        string b = user_String[coun];

        if (a.length() > b.length() && d == "NULL"){
            d = b;
        }

        if(a.length() > b.length() && d!="NULL" && d.length() > b.length()){
            d = b;
        }
        else{
            continue;
        }
    }
    cout << "The string " << d <<" have the least letters." << endl;

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:14:49.320

您允许用户输入最多 100 个字符串，但您的数组最多只能容纳 99 个字符串。如果他们实际上输入了 100 个字符串，最后一个字符串将损坏内存，假设您的代码没有完全崩溃。

此外，您的字母循环中有一些错误的逻辑。`if (counter < user_Input)`将始终为真，因此`coun`将始终如此，因此在到达数组末尾`counter+1`时会超出数组的边界。`counter`此外，您的循环对于他们试图做的事情来说是不必要的复杂。

试试这个：

```
int main()
{
    string user_String[100];
    int user_Input;

    do
    {
        cout << "Please enter the number of Strings (1-100): ";
        if (cin >> user_Input)
        {
            if ((user_Input >= 1) && (user_Input <= 100))
                break;
        }
        else
            cin.clear();
    }
    while (true);

    for (int counter = 0; counter < user_Input; ++counter)
    {
        cout << "Enter String " << counter + 1 << ": ";
        cin >> user_String[counter];
    }

    string b = user_String[0]; 
    for(int counter = 1; counter < user_Input; ++counter)
    {
        string a = user_String[counter];
        if (a.length() > b.length())
            b = a;
    }

    cout << "The string " << b << " has the most letters." << endl;

    b = user_String[0]; 
    for(int counter = 1; counter < user_Input; ++counter)
    {
        string a = user_String[counter];
        if (a.length() < b.length())
            b = a;
    }

    cout << "The string " << b <<" has the least letters." << endl;

    system("pause");
    return 0;
} 
```

话虽如此，您可以完全摆脱数组并将循环合并在一起：

```
int main()
{
    string user_String;
    int user_Input;

    do
    {
        cout << "Please enter the number of Strings: ";
        if (cin >> user_Input)
        {
            if (user_Input >= 1)
                break;
        }
        else
            cin.clear();
    }
    while (true);

    string fewestLetters, mostLetters;
    for (int counter = 1; counter <= user_Input; ++counter)
    {
        cout << "Enter String " << counter << ": ";
        cin >> user_String;

        if (counter == 1)
        {
            mostLetters = user_String;
            fewestLetters = user_String;
        }
        else
        {
            if (user_String.length() > mostLetters.length())
                mostLetters = user_String;

            if (user_String.length() < fewestLetters.length())
                fewestLetters = user_String;
        }
    }

    cout << "The string " << mostLetters << " has the most letters." << endl;
    cout << "The string " << fewestLetters << " has the least letters." << endl;

    system("pause");
    return 0;
} 
```

# php - 将文本放在 CKEditor 页脚中

> ID：15210023
> 
> 赞同：1
> 
> 时间：2013-03-04T19:57:59.393
> 
> 标签：php, javascript, editor, ckeditor, fckeditor

在 CK 编辑器内的页脚（通常显示您当前选择的 html 元素）有一种方法可以在其中放置其他文本）。右侧有很多额外的空间，我想在该位置放置一个“上次编辑”阶段，但似乎无法弄清楚如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:33:28.070

`CKEDITOR.instances.yourEditorInstance.ui.space( 'bottom' )`将为您提供保持底部空间的元素。您可以使用 JS + CSS 在此处附加任何您想要的内容。

# ruby-on-rails - 更改 smtp 设置后 actionmailer 崩溃

> ID：15210028
> 
> 赞同：1
> 
> 时间：2013-03-04T19:58:15.470
> 
> 标签：ruby-on-rails

我所有的邮件代码都运行良好，直到我决定是时候将发送电子邮件的地址更改为生产电子邮件（到目前为止，我一直在使用我的个人 gmail 帐户进行测试）。

当我进行切换时，我开始收到带有以下堆栈跟踪的 TypeError

```
TypeError: can't convert Symbol into Integer
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:575:in `initialize'
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:575:in `new'
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:575:in `ssl_socket'
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:580:in `tlsconnect'
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:560:in `do_start'
from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/net/smtp.rb:519:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
from /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery'
from /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `block in deliver'
from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/base.rb:415:in `block in deliver_mail'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications.rb:123:in `block in instrument'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications.rb:123:in `instrument'
from /app/vendor/bundle/ruby/1.9.1/gems/actionmailer-3.2.11/lib/action_mailer/base.rb:413:in `deliver_mail'
from /app/vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:229:in `deliver'
from (irb):1
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>' 
```

在完美运行和获得上述堆栈跟踪之间唯一改变的是 smtp 设置的变化。这是我之前和之后的 smtp 设置（当然不包括敏感信息）

之前（使用 gmail 帐户）：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => "www.domain.com",
  :user_name            => "username",
  :password             => "password",
  :authentication       => :plain,
  :enable_starttls_auto => true  
} 
```

之后（不是 gmail 帐户）：

```
ActionMailer::Base.smtp_settings = {
  :address              => "smtp.domain.com",
  :port                 => 587,
  :domain               => "www.domain.com",
  :user_name            => "username",
  :password             => "password",
  :authentication       => :login,
  :openssl_verify_mode  => :none,
  :enable_starttls_auto => true  
} 
```

我尝试更改身份验证类型和其他几个属性，但没有任何效果。

# facebook-graph-api - 获得 Facebook 用户的第一条评论

> ID：15210030
> 
> 赞同：0
> 
> 时间：2013-03-04T19:58:32.353
> 
> 标签：facebook-graph-api, facebook-fql

我正在尝试将 Facebook API 集成到我的网络应用程序中。我想通过查询最早的评论来大致检查用户何时加入 Facebook，如下所示：

`SELECT text, time FROM comment WHERE fromid= me() ORDER BY time ASC LIMIT 1`

但是，我收到错误消息：

`"message": "Your statement is not indexable. The WHERE clause must contain an indexable column.`

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T23:51:51.107

评论表用于 fb:comments，因此您需要先使用正确的表。这将是*状态*表。[http://developers.facebook.com/docs/reference/fql/status](http://developers.facebook.com/docs/reference/fql/status)。

```
 SELECT status_id, message, time FROM status WHERE uid=me() ORDER BY time ASC LIMIT 1 
```

## 但

> 如果第一个帖子来自另一个用户怎么办？

然后我们应该使用流表。新闻提要中的第一项，理论上应该在加入日期之后（为什么要在之前显示项目？）这是假设 API 包含新闻提要的所有数据。

所以这将涉及使用*流*、filter_keys 和 created_time

[http://developers.facebook.com/docs/reference/fql/stream_filter](http://developers.facebook.com/docs/reference/fql/stream_filter)
[http://developers.facebook.com/docs/reference/fql/stream](http://developers.facebook.com/docs/reference/fql/stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:50:45.120

带有`WHERE`子句的 FQL 查询必须包含一个可索引列，如[表的文档中所示](https://developers.facebook.com/docs/reference/fql/comment/)（它们现在用星号标记，并显示在*Supported Base Where Clauses*部分中）。

`fromid`不是可索引的列，因此您的`WHERE`子句不能只是此列的条件。

我认为不可能通过 Graph API 或 FQL 发现用户何时加入 Facebook。[FQL`User`表](https://developers.facebook.com/docs/reference/fql/user)没有提供此属性的属性，并且 Graph API 用户模式非常接近该`User`表。

# model-view-controller - SectionReports、ActiveReports 7.0.6158.0 的 LicenseException

> ID：15210035
> 
> 赞同：1
> 
> 时间：2013-03-04T19:58:52.760
> 
> 标签：model-view-controller, dll, licensing, activereports

在我正在开发的 MVC 应用程序中，我们最近开始使用 ActiveReports 7 来满足我们的报告生成需求。在我的本地机器上，*一切正常*。然而，当我们部署到我们的开发服务器进行团队级测试时，我们得到一个`LicenseException:`

`License for the SectionReport cannot be found.`

我们按照[此处](http://helpcentral.componentone.com/nethelp/ActiveReports7UserGuide.pdf)的用户指南尝试了不同的方法来解决问题。

我们所做的：

*   确保*licenses.licx*文件引用了程序集，并且我们的项目正在构建正确的 ActiveReports 7 程序集并被我们的项目引用。就目前而言，licenses.licx 文件看起来像这样（没有换行符）：

`GrapeCity.ActiveReports.SectionReport, GrapeCity.ActiveReports.v7, Version=7.0.6158.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff
GrapeCity.ActiveReports.Export.Pdf.Section.PdfExport, GrapeCity.ActiveReports.Export.Pdf.v7, Version=7.0.6158.0, Culture=neutral, PublicKeyToken=cc4967777c49a3ff`

*   由于这是一个 MVC Web 项目，因此使用 AR7 附带的 Assembly License Generator 创建了一个 [Assembly].Web.License.dll 库，我们`/lib/`在解决方案级别的目录中与项目一起构建该库。此更改对许可例外没有影响。

*   使用 Web 密钥生成器为 App.config 文件创建密钥。此更改对许可例外没有影响。

我们没有做的事情：

*   创建了一些 Web 表单，并创建了一个使用我们的项目构建的 App_License.dll 库。我们没有这样做的原因是我们没有为我们的报告使用 Web 控件，我们甚至没有使用`GrapeCity.ActiveReports.Web`程序集，并且错误不是来自该库中的任何类（这是合乎逻辑的，看看我们如何不使用它。）

所有这一切中唯一值得注意的细节是修改 licenses.licx 文件具有早期效果，因为我们在另一个组件上有类似的许可证例外；确保 licenses.licx 具有正确的详细信息，确保其他组件不再在我们的应用程序中抛出 LicenseExceptions。我暂时认为可能我的 licenses.licx 文件仍然缺少使该应用程序正常工作所需的东西。

我能想到的唯一要做的就是推荐我们作为开发人员的服务器的主要许可，但是这种可能性已经出现，我们被要求采取的方向是尽可能避免这条路线。我认为这是可能的，因为我遇到过类似的帖子，这些帖子涉及遵循上述用户指南中的步骤的人，并且可能能够解决问题。然而，对于我的团队来说，这些步骤不起作用。

问题：我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:40:45.350

像您所做的那样使用组装许可证生成器应该可以解决问题。[此外，根据ActiveReports 7 支持论坛上的这篇文章](http://www.datadynamics.com/forums/150082/ShowPost.aspx)，请确保您使用的是最新版本的 AR7 ，已对某些更高版本的 ActiveReports 7 进行了修复，以纠正在这种情况下的许可问题。具体来说，之前引用的帖子中给出的步骤表示，按照以下步骤使用更新版本可以纠正其他人的问题：

*   从类似于“C:\Program Files\Common Files\ComponentOne\ActiveReports Developer 7\”ApplicationLicenseGenerator.exe”的位置运行程序“ApplicationLicenseGenerator.exe”（以管理员身份）
*   浏览到已编译的 ActiveReports DLL。
*   按“生成”按钮。
*   这会生成一个类似于 yourclasslibraryname.dll.GrapeCity.Licenses.dll 的附属程序集
*   将 DLL 放在 Web 项目的 bin 文件夹中和/或在 Web 服务项目中引用生成的 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:30:09.430

答：对于非授权用户，`[Assembly].GrapeCity.License.dll`必须添加到web项目中作为参考！

`Licenses.licx`不过，从构建的角度来看很重要。但是许可证文件没有丢失任何东西。

# macos - QKeySequence::Backspace

> ID：15210038
> 
> 赞同：2
> 
> 时间：2013-03-04T19:59:06.273
> 
> 标签：macos, qt, keyboard-shortcuts, qt5, qkeysequence

在 Qt 中，`QKeySequence::Delete`对应`deleteForward:`于 MacOS 中的消息。

`deleteBackward:`MacOS中的 Qt 等价物是什么？如果没有这样的东西，如何`deleteBackward:`在 Qt 中捕获事件？

关于关键序列的 Qt 文档没有提到这一点：http: [//qt-project.org/doc/qt-5.0/qtgui/qkeysequence.html](http://qt-project.org/doc/qt-5.0/qtgui/qkeysequence.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:56:41.147

QKeySequence 有一个带有键码的构造函数：

```
QKeySequence::QKeySequence(int k1, int k2 = 0, int k3 = 0, int k4 = 0) 
```

对于**deleteBackward：**您将使用**Qt::Key_Backspace**键码。例如，如果您希望为 QAction 对象创建快捷方式：

```
myAction->setShortcut(QKeySequence(Qt::Key_Backspace)); 
```

或者简单地说：

```
myAction->setShortcut(Qt::Key_Backspace); 
```

# database - 如何使用单个数据库处理不同的组织？

> ID：15210042
> 
> 赞同：3
> 
> 时间：2013-03-04T19:59:15.253
> 
> 标签：database, database-design

**用户可以通过任何计算机访问的**后台**
构建。`online information system`我不想为每所大学或组织复制数据库和代码。
我只是想让用户点击一个域，比如`www.example.com`登录并使用它。
对于第二个用户，它也将点击相同的域`www.example.com`登录并使用它。但他们的数据是不同的。
**情景**
假设一所大学有 200 名员工，第二所大学有 150 名员工，以此类推。
**问题**** 

 **> 我是否需要为每所大学提供单独的员工表，或者是否可以拥有一个包含大学 ID 列的表？

我认为第二名是最好的，但假设我有 20 所大学或组织，总共有数千名员工。

> 最好的方法是什么？

这同样适用于所有桌子？这只是给你一个例子。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:05:43.993

该方法将取决于数据、使用情况和客户要求/限制。

1.  按照 duffymo 的建议，使用集成模型。如果每个组织都是一个更大的整体的一部分（即所有大学都是州立大学董事会的一部分）并且关于交叉查询访问的安全问题最小² ，这可能是合适的。这种方法在每个组织之间具有最小量的分离，因为相同的模式¹并且关系是“公开”共享的。它最初会导致一个非常简单的模型，但如果需要组织特定值的关系，它*可能会变得非常复杂（使用复合 FK 和正确使用此类），因为它添加了另一个数据维度。*

2.  [实现多租户](http://msdn.microsoft.com/en-us/library/aa479086.aspx)。这可以通过关系上的隐式过滤器（可能隐藏在视图和存储过程的后面）、不同的模式或其他特定于数据库的支持来实现。根据实现，即使所有数据可能驻留在同一个数据库中，这也可能共享也可能不共享模式或关系。通过隐式隔离，可以隐藏/消除一些复杂的键或关系。多租户隔离通常也使交叉查询变得更加困难/不可能。

3.  [完全存储数据库](http://en.wikipedia.org/wiki/Information_silo)。每个客户或“组织”都有一个单独的数据库。这意味着单独的关系和模式组。我发现这种方法使用自动化工具相对简单，但它确实需要管理多个数据库。直接交叉查询是不可能的，但如果需要，可以使用“链接数据库”。

尽管它不是“单个数据库”，但在我们的案例中，我们有以下限制：1）不允许在组织之间共享/公开数据，以及 2）每个组织都想要自己的本地数据库。因此，我们的产品最终使用了筒仓方法。确保选择的方法满足客户要求。

只要正确规划索引和查询，这些方法都不会对“数千”、“数十万”甚至“数百万”条记录有任何问题。但是，从一个切换到另一个可能会违反许多假设的约束，因此应尽早做出决定。

* * *

¹在此回复中，我使用“模式”来指代数据库对象（例如表、视图）的安全分组，而不是数据库模型本身。使用的实际数据库模型可以是通用的/共享的，即使我们使用单独的数据库也是如此。

²集成方法不一定是不安全的——但它本身并不具有其他设计的一些内置隔离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:01:24.437

我会将其规范化为具有 UNIVERSITY 和 EMPLOYEE 表，它们之间具有一对多的关系。

您必须注意确保只有与给定大学相关联的人才能看到他们的数据。基于角色的访问将很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T20:08:13.663

这称为多租户架构。你应该读这个：

[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

我会使用 Tenant Per Schema，这意味着跨不同模式复制结构，但是，由于您应该将所有 SQL DDL 保存在源代码控制中，因此编写脚本非常容易。

如果在同一张桌子上进行所有操作，很容易在租户之间搞砸和“泄露”信息。**

# asp.net - 在 ASP.NET VB 中，我如何维护一个文件上传后退向导？

> ID：15210045
> 
> 赞同：0
> 
> 时间：2013-03-04T19:59:28.247
> 
> 标签：asp.net, vb.net, webforms

我有一个包含 7 个步骤的 asp:wizard - 在某一时刻，用户可以选择上传文件，或提供指向 Internet 上现有文件的链接。

在向导结束时，所有信息都会显示以供验证，每个部分都有按钮，以便他们可以返回并编辑某些内容（如果他们的名字拼写错误）。

在调试中，我发现如果我选择上传文件，它将一直保持到我到达表单的末尾，但如果我决定返回并编辑任何内容，则文件上传将消失。

我是否缺少一些东西来维持这一点，或者有可能吗？我会发布相关代码（有很多，它的形式很大）

在.aspx

```
 <asp:WizardStep ID="uploadFileWiz" runat="server" Title="Upload File">
                        <!-- Step 4 - Upload a file -->
                        <table>
                            <tr>
                                <th colspan="2" class="alignCenter">
                                    <%:uploadFileWiz.Title %>
                                </th>
                            </tr>
                            <tr>
                                <td class="alignRight">
                                    File Location:
                                </td>
                                <td class="alignLeft">
                                    <asp:FileUpload ID="uploadFile" runat="server" CssClass="inputBox" />
                                </td>
                            </tr>
                            <tr>
                                <td class="alignRight">
                                    Is there a Password?
                                </td>
                                <td class="alignLeft">
                                    <asp:RadioButtonList ID="uploadPasswordFlag" runat="server">
                                        <asp:ListItem>Yes</asp:ListItem>
                                        <asp:ListItem Selected="True">No</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>
                            </tr>
                        </table>
                    </asp:WizardStep>

............................................
                    <asp:WizardStep ID="grandFinale" runat="server" Title="Lets Finish Up">
                        <!-- Step 7 - The final step. Verify information -->
                        <div class="margins">
                            <span class="label">
                                Lets Review:
                            </span>
                            <table>
                                <tr>
                                    <th class="alignRight">
                                        Contact Name:
                                    </th>
                                    <td class="alignLeft">
                                        <%:contactName.Text%>
                                    </td>
                                    <th class="alignRight">
                                        Project Name:
                                    </th>
                                    <td class="alignLeft">
                                        <%:projectName.Text%>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="alignRight">
                                        Contact Email:
                                    </th>
                                    <td class="alignLeft">
                                        <%:contactEmail.Text%>
                                    </td>
                                    <th class="alignRight">
                                        Project Location:
                                    </th>
                                    <td class="alignLeft">
                                        <%:projectLocation.Text%>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="alignRight">
                                        Company:
                                    </th>
                                    <td class="alignLeft">
                                        <%:contactCompany.Text%>
                                    </td>
                                    <th class="alignRight">
                                        General Contractor:
                                    </th>
                                    <td class="alignLeft">
                                        <%:projectContractor.Text%>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="alignRight">
                                        Phone Number:
                                    </th>
                                    <td class="alignLeft">
                                        <%:contactPhone.Text%>
                                    </td>
                                    <th class="alignRight">
                                        Bid Type:
                                    </th>
                                    <td class="alignLeft">
                                        <%:bidType.SelectedValue%>
                                    </td>
                                </tr>
                                <!-- Buttons to go back and edit, if needed -->
                                <tr>
                                    <td colspan="2" class="alignCenter">
                                        <asp:Button ID="goToContactInfo" runat="server" Text="Edit Contact Information" CssClass="inputBox" />
                                    </td>
                                    <td colspan="2" class="alignCenter">
                                        <asp:Button ID="goToProjectInfo" runat="server" Text="Edit Project Information" CssClass="inputBox" />
                                    </td>
                                </tr>
                                <tr>
                                    <th class="alignRight">
                                        File:
                                    </th>
                                    <td class="alignLeft">
                                        <%:getFileInfo()%>
                                    </td>
                                    <th class="alignRight">
                                        Password:
                                    </th>
                                    <td class="alignLeft">
                                        <%:getPasswordInfo()%>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" class="alignCenter">
                                        <asp:Button ID="goToFileLink" runat="server" Text="Edit File Info" CssClass="inputBox" />
                                    </td>
                                    <td colspan="2" class="alignCenter">
                                        <asp:Button ID="goToPassword" runat="server" Text="Edit Password" CssClass="inputBox" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </asp:WizardStep> 
```

在代码隐藏中...

```
'##### Edit button handlers
Protected Sub goToContactInfo_Click(sender As Object, e As EventArgs) Handles goToContactInfo.Click
    rqBidWizard.ActiveStepIndex = 0
End Sub

Protected Sub goToProjectInfo_Click(sender As Object, e As EventArgs) Handles goToProjectInfo.Click
    rqBidWizard.ActiveStepIndex = 1
End Sub

Protected Sub goToFileLink_Click(sender As Object, e As EventArgs) Handles goToFileLink.Click
    If selectFile.SelectedValue = "Attach File" Then
        rqBidWizard.ActiveStepIndex = 4
    Else
        rqBidWizard.ActiveStepIndex = 5
    End If
End Sub

Protected Sub goToPassword_Click(sender As Object, e As EventArgs) Handles goToPassword.Click
    rqBidWizard.ActiveStepIndex = 6
End Sub

'##### String parsing functions
Protected Function getPasswordInfo() As String
    Dim isPassword As Boolean = False
    Dim thePassword As String = Nothing
    If uploadPasswordFlag.SelectedValue = "Yes" Or LinkPasswordFlag.SelectedValue = "Yes" Then
        isPassword = True
        thePassword = password1.Text
    End If
    If isPassword Then
        getPasswordInfo = "Yes: " & thePassword
    Else
        getPasswordInfo = "No"
    End If
End Function
Protected Function getFileInfo() As String
    Dim fileType As String = Nothing, fileName As String = Nothing, fileURL As String = Nothing
    Select Case selectFile.SelectedValue
        Case "Attach File"
            fileType = "Uploaded"
            If uploadFile.HasFile Then
                fileName = IO.Path.GetFileName(uploadFile.PostedFile.FileName)
            Else
                fileName = "None"
            End If
            fileURL = Nothing
        Case "Provide Link"
            fileType = "Link"
            fileName = Nothing
            fileURL = Trim(provideLink.Text)
    End Select
    getFileInfo = fileType & ": "
    If fileType = "Uploaded" Then
        getFileInfo = getFileInfo & fileName
    Else
        getFileInfo = getFileInfo & fileURL
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:28:51.047

如果您的意思是在某个向导步骤上，用户使用文件上传控件来选择文件，但是当他们进一步前进然后返回时，文件上传控件为空......我很抱歉地说这就是文件上传控件的工作方式。

每次更改向导步骤时，您都会发回并重新加载页面。所以用户提供的内容就丢失了。您可能认为您可以在服务器上以编程方式设置控件的文件名，但这不起作用——这是正确的，因为这将是一个很大的安全漏洞。（您希望如何浏览到可以决定要上传哪些文件的网页？）

您可能需要稍微重新组织您的向导才能解决此问题。

# php - 将用户的统计信息存储在表中。我应该使用这两种方法中的哪一种？

> ID：15210049
> 
> 赞同：3
> 
> 时间：2013-03-04T19:59:37.567
> 
> 标签：php, mysql

为特定用户存储站点统计信息的最佳方式是什么？基本上我想存储用户完成特定任务的次数。数据将来自一个可能很大的表，并且会经常被引用，所以我想避免 COUNT() 并将它们存储在自己的表中。

**方法A**

有一个包含以下字段的表，然后为每个用户设置一行来存储每个字段的计数：

```
User_id | posted_comments | comment_replies | post_upvotes | post_downvotes
50        12                7                 23             54 
```

**方法B**

有一个表存储动作，另一个存储该动作的计数：

表格1：

```
Id | Action
1  | posted_comments
2  | comment_replies
3  | post_upvotes
4  | post_downvotes 
```

表 2

```
User_id | Action | Count
50      | 1      | 12
50      | 2      | 7
50      | 3      | 23
50      | 4      | 54 
```

我看不到我总共有超过 25-30 个动作，但我不确定这是否太多而无法像方法 A 中那样水平存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:26:15.140

我想你回答了你的问题。如果您不知道操作是什么，则将每个操作存储在单独的行中。那将是第二种选择。

确保表上有正确的索引。一种可能性是`(user_id, action, count)`。使用此索引，可以快速在用户级别对表进行非规范化。

如果您有明确定义的问题并且不需要在表中添加/删除/重命名列，那么第一个版本也是可行的。否则，只需坚持插入行。查询可能看起来有点复杂，但应用程序更灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:37:01.433

对我来说，这似乎是一个典型的 BI 问题。真正的问题不是你的维度中有多少“行动”，而是它们改变的频率。

表 A 是非规范化的，快速且易于阅读：使用“SELECT”，您可以获得正确格式的信息。

表 B 已标准化且更易于维护 如果您的操作列表难以预先定义，则强烈建议使用它，如果它是动态的，则它是**必须的。**

从表 A 到表 B 来回传递被称为枢轴操作，您可以找到标准工具，但手动编码从来都不容易。因此，不要仅仅因为自 1970 年 Codd 以来每个人都这么说，就得出表 B 更好的结论。

我建议您问自己一个问题，即您的 COUNT(*) 表多久会被读取一次。如果你能忍受昨天的统计数据，那么每晚计算两张表。

# javascript - 对js作用域和外部类的质疑

> ID：15210053
> 
> 赞同：-1
> 
> 时间：2013-03-04T19:59:54.547
> 
> 标签：javascript, oop, box2dweb

我是 js 中的 oop 新手。我正在使用 Box2dWeb 开发 HTML5 游戏，我决定应该让它完全基于 oop。所以我在一个名为`physics.js`

```
(function(window) 
{
function Physics(element, scale){
//init world logic
    }

Physics.prototype.debug = function(){
           //debug draw logic
};

Physics.prototype.step = function(dt){
    //step logic
};

    //making this class(or object) visible on the global scope
    //so i can create vars of this type anywhere in the application
window.Physics = Physics;
}(window)); 
```

现在我有一个主`game.js`文件，我在其中初始化了我所有的游戏物理、图形、资产等。以下是内容：

```
(function(){
 function init(){
    var physics = new Physics(document.getElementById("b2dCanvas"), 30);
    console.log(physics);
    physics.debug();
}
window.addEventListener("load", init);
 }()); 
```

这个文件，初始化我的物理对象没有任何问题。最终这就是我想要的。伟大的！但是，在此之前，文件是这样的，没有这个`init()`功能。

```
(function(){

    var physics = new Physics(document.getElementById("b2dCanvas"), 30);
    console.log(physics);
    physics.debug();
 }()); 
```

这显然引发了错误`Uncaught TypeError: Cannot call method 'getContext' of null`。这意味着，物理构造函数被调用（`element`此时自然为空），而我没有调用它。这怎么可能？我的自执行函数`game.js`应该已经初始化了`Physics`对象吧？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:05:02.647

您的脚本在 HTML 被完全解析之前运行，并且在您的画布元素被添加到 DOM 之前。添加时`window.addEventListener("load", init);`，您在触发 window.onload 事件时使其运行。在那一刻，DOM 被完全解析。

在现代浏览器中，您也可以将其替换为

```
document.addEventListener("DOMContentLoaded", init); 
```

该事件将在 DOM 准备就绪时触发，但不会等待图像等其他资源（与 onload 不同）。

或者，只需在关闭 body 标记之前添加所有脚本。那时，正文中的每个 HTML 标记都已经插入到 DOM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:04:30.110

> 这意味着，物理构造函数被调用（此时元素自然为空），而我没有调用它。这怎么可能？

因为你*正在*调用它，使用以下语法：

```
(function(){...}());
                ^^
               call 
```

当脚本被解析为正常页面脚本解析的一部分时，它将调用该函数，并且不会等待文档/DOM 准备好供您操作。您将需要使用某种文档“加载”侦听器，或者删除该特定语法并在确定 DOM 准备好时手动调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:04:06.083

该错误与物理对象未准备好无关。它与其中的代码有关，它试图在调用代码时引用不在页面上的元素。

你打电话很简单

```
document.getElementById("b2dCanvas") 
```

在元素加载到页面之前。当 getElementById 没有找到任何东西时，它返回 null。

那么，如果您要检查它，您的代码会是什么样子

```
var physics = new Physics(null, 30); 
```

并且元素为空

```
function Physics(element, scale){  
    var ctx = element.getContext("2d");  //<-- where the error occurs since element is null 
```

因此错误：`Uncaught TypeError: Cannot call method 'getContext' of null`.

当您侦听 load 事件时，这意味着元素在那里，因此它可以毫无问题地加载。其他处理方法是将脚本添加到页面底部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:04:48.340

我的猜测是您在 DOM 准备好之前调用了该函数。将脚本包含在代码的底部，或者甚至更好地将所有初始化包装为一个窗口加载侦听器。

# validation - ASP.net MVC4 验证模型中的下拉元素？

> ID：15210054
> 
> 赞同：1
> 
> 时间：2013-03-04T19:59:57.390
> 
> 标签：validation, asp.net-mvc-4, entity-framework-5

如何验证分配给下拉列表元素的值？通常我会在模型中分配范围，并且该字段将被验证。但是，如果我有这样的事情，我不知道如何处理它。

模型

```
public class Product
{
   public int Id { get; set; }
   public string Name { get; set; }
   public decimal Value { get; set; }
   public DateTime Given { get; set; }
   public TimeSpan TimeGiven { get; set; }
   public string Phase { get; set; }
   public bool Active { get; set; }
   public int PersonId { get; set; }
} 
```

模型中的名称是不同产品的下拉列表。我不确定如何处理 Value 的验证，因为不同的产品会有不同的范围。例如，名为 X 的产品的有效范围为 25-30，而产品 Y 的有效范围为 0.01 - .5。Person 可以分配许多产品，因此我与 Person 和 Product 建立了一对多的关系。

有没有办法根据他们选择 X、Y 的产品来验证价值？我将拥有大约 40 种不同的产品，因此理想情况下我可以做到这一点，而不必为每个产品都设置单独的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:10:56.380

您可以使用自定义业务规则进行验证`ValidationAttribute`

这非常简单，您只需要执行以下操作：

1.  创建一个继承`ValidationAttribute`并覆盖该`IsValid`方法的类。
2.  用您刚刚创建的属性装饰您的财产。

例如：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple =false, Inherited = false)]
public class MyBusinessRuleValidation: ValidationAttribute
{
  protected override ValidationResult IsValid(object v, ValidationContext validationContext)
  {        
    var Name = (string)v //since we decorated the property Name with this attribute;
    //retrieve Value's value using validationContext
    var value = (decimal) validationContext.ObjectType.GetProperty("Value").GetValue(validationContext.ObjectInstance, null);

    //check whether you need to exit with error
    if( name == ProductX) { 
      if(value > 10 && value < 25) 
        return new ValidationResult(ErrorMessage);

    }          

    return ValidationResult.Success;
  }
} 
```

使用验证器：

```
public class Product
{
   public int Id { get; set; }
   [MyBusinessRuleValidation(ErrorMessage="Some ugly error")]      
   public string Name { get; set; }
   ....
} 
```

# web-services - 使用网站、移动应用程序和 Web 服务进行身份验证

> ID：15210056
> 
> 赞同：0
> 
> 时间：2013-03-04T20:00:10.003
> 
> 标签：web-services, authentication, oauth, openid

我正在创建一个包含网站、移动应用程序和 Web 服务的服务。

网站和移动应用程序都将与 Web 服务对话，以与数据库和任何其他后端项目进行交互。

我希望用户能够使用其他服务（如 google、facebook、twitter 等）登录

在实现这一点时我有两个问题：

1.) 我应该使用 OpenID 还是 OAuth？我不确定哪个更适合这种情况。我不需要从用户帐户实际访问功能，我只希望他们能够使用他们已经拥有的帐户登录，

2.) 我应该在哪里实施身份验证？我是否必须在网站和移动应用程序上都实现它，或者我可以同时与 Web 服务对话并在那里进行身份验证？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:10:20.930

如果您只是进行身份验证而不同步任何帐户详细信息，我认为 OpenID 是要走的路。从安全的角度来看，我想说的是在网站和应用程序上而不是在 Web 服务中实现您的身份验证。您希望尽可能少地处理凭据，尤其是在不使用 SSL 的情况下避免通过 web 服务发送凭据。

# ruby-on-rails - 我如何在 Rails3 中使用 .all 过去 2 天？

> ID：15210059
> 
> 赞同：0
> 
> 时间：2013-03-04T20:00:30.890
> 
> 标签：ruby-on-rails

我有一个模型`submission`，目前我正在索引页面中显示数据库中的所有记录。在`submissions`控制器中我有：

```
@submissions = Submission.all 
```

但是，现在我只想要过去两天的记录**或**字段`name`等于某个字符串，我尝试了这个，但它仍然为我显示所有记录：

```
@submissions = Submission.all(:conditions => ["updated_at >= ? OR name = ?", 2.days.ago.to_date, "me"]) 
```

where`updated_at`和`name`是`submissions`表中的两个字段。

知道哪里错了吗？

编辑：

在我的`submission`模型中：

```
attr_accessible :name, :updated_at 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:03:39.880

在 Arel（Rails 3）中，您的条件应该在 where 方法中，最后（可选），就像这样

```
Submission.where("updated_at >= ? OR name = ?", 2.days.ago.to_date, "me").all 
```

# mongodb - 树莓派上 mongodb 2.1.1 的奇怪行为 - 无法插入浮点数

> ID：15210061
> 
> 赞同：0
> 
> 时间：2013-03-04T20:00:40.830
> 
> 标签：mongodb, floating-point, raspberry-pi, raspbian

我的树莓派上的 mongodb 有问题。我正在从[https://github.com/RickP/mongopi运行 2.1.1 版](https://github.com/RickP/mongopi)

问题是：我无法`1.937`在数据库中插入值。这是我从 `mongo`shell 的输出：

```
> db.sensor.drop()
true 
```

我先清理收藏，所以一切都很干净

```
> db.sensor.insert({'sensor_id': 3, 'value': 1.937})
> db.sensor.findOne()
{
    "_id" : ObjectId("5134fb85e59d6e0efe256a79"),
    "sensor_id" : 3,
    "value" : -2.960244045726579e-47
} 
```

如您所见，1.937 的值在数据库中存储错误......这真的很奇怪。

如果我运行以下命令：

```
> db.sensor.insert({'sensor_id': 3, 'value': 2}) 
```

然后我得到

```
> db.sensor.find()
{ "_id" : ObjectId("5134fb85e59d6e0efe256a79"), "sensor_id" : 3, "value" : -2.960244045726579e-47 }
{ "_id" : ObjectId("5134fcece59d6e0efe256a7a"), "sensor_id" : 3, "value" : 2 } 
```

如您所见，第二个条目很好......问题只是浮动值。

为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:06:15.647

无法在 MongoDB 2.1.1 的本地实例中重现它

```
MongoDB shell version: 2.1.1
connecting to: test
> db.version()
2.1.1
> db.xx.drop()
false
> db.xx.insert({'sensor_id': 3, 'value': 1.937})
> db.xx.insert({'sensor_id': 3, 'value': 3})
> db.xx.find()
{ "_id" : ObjectId("51586b66cff42dd9c4bc608c"), "sensor_id" : 3, "value" : 1.937 }
{ "_id" : ObjectId("51586b6ccff42dd9c4bc608d"), "sensor_id" : 3, "value" : 3 } 
```

# ruby - `bundler install --deployment`缺少`to_yaml`？

> ID：15210062
> 
> 赞同：0
> 
> 时间：2013-03-04T20:00:41.453
> 
> 标签：ruby, gem, bundler

我不是 ruby​​ 专家，但我设法收集了足够的信息来设置`Gemfile`和安装所需的 Gemfile。

然而，最近，我遇到了一些问题。无论出于何种原因，我现在收到此错误：

```
> bundle install --deployment
      Unfortunately, a fatal error has occurred. Please see the Bundler
      troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
/usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/settings.rb:129:in `set_key': undefined method `to_yaml' for {"BUNDLE_FROZEN"=>"1"}:Hash (NoMethodError)
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/settings.rb:129:in `open'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/settings.rb:129:in `set_key'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/settings.rb:17:in `[]='
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/cli.rb:219:in `install'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/vendor/thor/task.rb:27:in `__send__'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/vendor/thor/task.rb:27:in `run'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/vendor/thor.rb:344:in `dispatch'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/vendor/thor/base.rb:434:in `start'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/bin/bundle:20
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/lib/bundler/friendly_errors.rb:3:in `with_friendly_errors'
    from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.1/bin/bundle:20
    from /usr/bin/bundle:19:in `load'
    from /usr/bin/bundle:19 
```

我已经查看了[推荐的链接](http://bit.ly/bundler-issues)，但问题仍然存在。我`Gemfile`的很简单：

```
source "https://rubygems.org"
gem 'sass' 
```

以及随附的`Gemfile.lock`：

```
GEM
  remote: https://rubygems.org/
  specs:
    sass (3.2.6)

PLATFORMS
  ruby

DEPENDENCIES
  sass 
```

为什么捆绑器无法安装？

**更多细节**：
使用旧版本的捆绑器（比如 1.2），工作得很好。只是不是*1.3.1*

我正在使用 ruby​​ 1.8.7 和 ruby​​gems 1.8.11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:07:49.370

当您安装 ruby​​ 时，您可能没有在系统上安装 libyaml。Ruby 需要 libyaml 才能运行它的标准库 yaml 库。

尝试安装 libyaml（查看如何为您的特定操作系统），然后重新安装 ruby​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:30:27.560

刚刚遇到同样的问题并通过卸载最新的捆绑器版本 1.3.1 解决了它

```
gem uninstall bundler -v 1.3.1 
```

**bundler 1.3.0**应该让它通过 ;)

编辑：不知道为什么：|

# machine-learning - 前馈神经网络中的输入排列

> ID：15210065
> 
> 赞同：6
> 
> 时间：2013-03-04T20:00:52.810
> 
> 标签：machine-learning, neural-network

给定一个前馈神经网络，如何：

1.  确保它独立于输入的*顺序*？例如，输入 [0.2, 0.3] 将输出与 [0.3, 0.2] 相同的结果；
2.  确保它独立于输入组的*顺序*？例如，喂食 [0.2, 0.3, 0.4, 0.5] 将输出与 [0.4, 0.5, 0.2, 0.3] 相同的结果，但不是 [0.5, 0.4, 0.3, 0.2]；
3.  确保输入序列的排列将给出输出序列的排列。例如，如果 [0.2, 0.3] 作为输出 [0.8, 0.7]，则 [0.3, 0.2] 作为输出 [0.7, 0.8]。

* * *

鉴于上述情况：

1.  除了确保火车集涵盖所有可能的排列之外，还有其他解决方案吗？
2.  隐藏层的奇偶性是否受到某种约束（即隐藏层中的神经元数量必须是奇数或偶数）？
3.  在权重矩阵中寻找某种对称性是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:58:06.950

这是我尽我所能回答问题的尝试

**如何**

1.  要获得所需的结果，您可以

    *   训练所有排列
    *   对输入数据进行排序并进行训练（因此不必额外学习排列）
2.  要获得要求的结果，您确实有两种可能性

    *   训练所有排列（耗时）
    *   或者更好的是，使用另一种类型的网络，例如带有回声状态网络训练算法的循环神经网络（[此处](http://minds.jacobs-university.de/sites/default/files/uploads/papers/ESNTutorialRev.pdf)为论文）
3.  我会尝试用回声状态网络算法再次解决它

即使第二个和第三个问题的可能解决方案不是前馈网络，我也希望它有所帮助。

**回答问题**

*3*我认为在权重矩阵中寻找对称性没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:41:32.603

好吧，这对 NN 来说似乎是一项艰巨的工作，但是 1\. 我会进行一些预处理，也许还有后处理脚本会处理您的所有排列，确保将最简单的输入提供给 NN。我认为前（后）处理比调整 NN（添加一个或多个隐藏层）更容易实现您的目标

2&3 NN 通常被认为是黑盒。这意味着您对其进行训练并仅分析输入和输出。在大多数情况下，试图理解它是如何在内部工作的（当然也有一些例外，例如，如果你有功能神经网络并且你想挖掘一些知识 - 但正如我所说 - 它很费时间）。

一般来说，对于每层隐藏神经元的数量没有限制。此外，除非您试图找到一些知识，否则在权重矩阵中寻找对称性是没有意义的......

# php - jquery ui 自动完成在 XHR 制作的源代码中是否使用 POST 或 GET？

> ID：15210066
> 
> 赞同：1
> 
> 时间：2013-03-04T20:01:04.587
> 
> 标签：php, post, get, jquery-ui-autocomplete

我更喜欢将 ajax 与 POST 一起使用。并准备 php 页面以仅接受来自客户端的 POST 请求。我开始使用 jquery ui 自动完成功能。并 在查询服务器时获取`source:"action.php";` 关于 ui 如何处理的记录？`source:`它对经典的发布请求是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:24:25.787

jquery ui 默认使用 GET 并且默认参数是 'term' 因此可以使用`$_GET['term']`

如果您想将 GET 更改为 POST，您也可以看到[This](https://stackoverflow.com/questions/1512607/how-do-i-set-jquery-autocomplete-to-post-instead-of-get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:05:40.290

在几乎所有最近的浏览器中，打开开发人员工具（通常是 F12），转到“网络”面板（Firefox 中的网络，在其他浏览器中类似）。启动自动完成（在自动完成附加的框中输入一些内容），您可以看到通常显示“GET”或“POST”的网络请求。

# iphone - SKProduct productIdentifier 无法识别的选择器发送到实例

> ID：15210067
> 
> 赞同：0
> 
> 时间：2013-03-04T20:01:06.723
> 
> 标签：iphone, in-app-purchase

我正在尝试在我的应用程序中的应用程序购买中在 iPhone 中实现。

我在按钮上有一个 IBAction 来购买迷你游戏：

```
-(IBAction) buyGame:(id)sender {

    SKProduct *product = [[InAppGameIAHelper sharedHelper].products objectAtIndex:0];

    NSLog(@"Buying %@...", product.productIdentifier);

    [[InAppGameIAHelper sharedHelper] buyProductIdentifier:product.productIdentifier];
    self.hud = [MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES];
    _hud.labelText = @"Buying...";

    [self performSelector:@selector(timeout:) withObject:nil afterDelay:60*5];
} 
```

[InAppGameIAHelper sharedHelper] 允许从商店加载项目，并加载产品列表。

[InAppGameIAHelper sharedHelper].products 是一个 NSArray ：

```
products (
    "com.me.myapp"
) 
```

当我点击购买按钮时，我的应用程序崩溃并出现以下错误：

```
2013-03-04 20:24:50.314 isam[11922:c07] -[__NSCFConstantString productIdentifier]: unrecognized selector sent to instance 0x22ae30
2013-03-04 20:24:50.318 isam[11922:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString productIdentifier]: unrecognized selector sent to instance 0x22ae30' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:54:33.583

这 `SKProduct *product = [[InAppGameIAHelper sharedHelper].products objectAtIndex:0];`条线实际上是给你一个`SKProduct`吗？

我的猜测是您的代码在打印之前就崩溃了，`NSLog`因为您的方法以某种方式返回了`NSString`.

# sql - 手动指定 Row_Number() 的起始值

> ID：15210069
> 
> 赞同：36
> 
> 时间：2013-03-04T20:01:10.553
> 
> 标签：sql, sql-server, row-number

我想定义`ROW_NUMBER()`as`3258170`而不是`1`.

我正在使用以下 SQL 查询

```
SELECT ROW_NUMBER() over(order by (select 3258170))  as 'idd'. 
```

但是，上述查询不起作用。当我说不工作时，我的意思是它正在执行，但它不是从`3258170`. 有人可以帮助我吗？

我想指定行号的原因是我将行从一个表插入到另一个表。在第一个表中，最后一条记录的行号是`3258169`，当我插入新记录时，我希望它们的行号来自`3258170`.

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-04T20:05:31.337

只需将值添加到结果中`row_number()`：

```
select 3258170 - 1 + row_number() over (order by (select NULL)) as idd 
```

的`order by`子句`row_number()`指定用于排序的列。通过在此处指定一个常量，您只是在说“出于排序目的，所有内容都具有相同的值”。它与选择的第一个值没有任何关系。

为避免混淆，我将常量值替换为 NULL。在 SQL Server 中，我*观察*到这会分配一个序列号而不实际对行进行排序——这是一种观察到的性能优势，但不是我见过的记录，所以我们不能依赖它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-19T09:28:37.193

我觉得这更容易

```
ROW_NUMBER() OVER(ORDER BY Field) - 1 AS FieldAlias (To start from 0)
ROW_NUMBER() OVER(ORDER BY Field) + 3258169 AS FieldAlias (To start from 3258170) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-27T21:07:16.290

有时....

ROW_NUMBER() 可能不是最佳解决方案，尤其是当基础数据集中可能存在重复记录时（对于 JOIN 查询等）。这可能会导致返回的行数超出预期。您可以**考虑创建一个 SEQUENCE**，在某些情况下它可以被认为是更清洁的解决方案。IE：

```
CREATE SEQUENCE myRowNumberId  
    START WITH 1  
    INCREMENT BY 1 
GO  

SELECT NEXT VALUE FOR myRowNumberId  AS 'idd' -- your query
GO

DROP SEQUENCE myRowNumberId; -- just to clean-up after ourselves
GO 
```

*缺点是序列可能难以在具有 DISTINCT、WINDOW 函数等的复杂查询中使用。请参阅*[此处](https://docs.microsoft.com/en-us/sql/t-sql/statements/create-sequence-transact-sql)的完整序列文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-07T12:02:30.153

我有一种情况，我将层次结构导入应用程序，其中 seq 编号在每个层次级别中必须是唯一的，并且从 110 开始（以便于后续手动插入）。之前的数据是这样的……

```
Level Prod        Type  Component      Quantity     Seq
1   P00210005       R   NZ1500         57.90000000  120
1   P00210005       C   P00210005M     1.00000000   120
2   P00210005M      R   M/C Operation   20.00000000 110
2   P00210005M      C   P00210006      1.00000000   110
2   P00210005M      C   P00210007      1.00000000   110 
```

我希望 row_number() 函数生成新的序列号，但是无法按预期实现添加 10 然后乘以 10。要强制执行算术函数序列，您必须将整个 row_number() 和 partition 子句括在括号中。您只能对 row_number() 执行简单的加法和减法。

所以，我对这个问题的解决方案是

,10* **(** 10+row_number() over (按级别顺序按类型 desc, [Seq] asc) **)** [NewSeq]

注意括号的位置，以便在加法之后进行乘法运算。

```
Level Prod        Type  Component      Quantity     [Seq] [NewSeq]
1   P00210005       R   NZ1500        57.90000000   120   110
1   P00210005       C   P00210005M    1.00000000    120   120
2   P00210005M      R   M/C Operation 20.00000000   110   110
2   P00210005M      C   P00210006     1.00000000    110   120
2   P00210005M      C   P00210007     1.00000000    110   130 
```

# ruby-on-rails - 如何逐步手动安装“印象派”插件？（轨道上的红宝石）

> ID：15210075
> 
> 赞同：1
> 
> 时间：2013-03-04T20:01:32.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

这真的会有很大帮助。我试图通过命令安装插件，但我似乎无法让它正常工作。（[https://github.com/charlotte-ruby/impressionist](https://github.com/charlotte-ruby/impressionist)）有人可以用将使用的特定代码行和文件名以数字方式概述步骤吗？#1-10，等等？我正在尝试跟踪人们点击用户个人资料的次数（即 localhost:3000/users/1）。换句话说，查看配置文件的次数，以便我可以在 localhost:3000/users 视图上显示它，但这将是下一步。

这是我到目前为止所做的： 1\. bundle installed gem 'impressionist'

1.  试图运行“rails g impressionist”和“rake db:migrate”，但我试图弄清楚它是否有效

2.  在 app\controllers\ 中创建了一个名为“widgets_controller.rb”的控制器文件，其中包含以下代码

    WidgetsController < ApplicationController 印象派 :actions=>[:show,:index]

    结尾

3.  在 app\models 中创建一个名为 widget.rb 的模型文件，其中包含以下代码

    类 Widget < ActiveRecord::Base is_impressionable end

4.  在 app\models\user.rb 文件中添加了这一行

    def show @widget = Widget.find Impressionist(@widget,message:"wtf is a widget?") #message is optional end

5.  然后我在我的视图中使用此代码行@widget.impressionist_count 来尝试显示计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:29:55.553

You just have to follow the tutorial at [impressionist](https://github.com/charlotte-ruby/impressionist) page.

1 - Add line `gem 'impressionist'` to your gemfile and run `bundle install` command, than run `rails g impressionist` and `rake db:migrate` commands. 2 - In the controller you want to track (in your case users_controller) add

`class UsersController < ApplicationController`

`impressionist :actions => [:show]`

3 - In the model user.rb add

`class User < ActiveRecord::Base`

`is_impressionable`

4 - In users/index.html.erb view add

`<%= @user.impressionist_count %>`

# grails - Grails打开空白页面没有错误

> ID：15210079
> 
> 赞同：2
> 
> 时间：2013-03-04T20:01:47.000
> 
> 标签：grails

问这样一个微不足道的问题我感到很尴尬，但我已经用尽了所有选择，谷歌也没有帮助我。我有以下 url 映射代码：

```
static mappings = {
    "/$controller/$action?/$id?"{
        constraints {
    }
}
"/"(controller:'news', action:'index')
    "500"(view:'/error')
} 
```

和控制器类：

```
def index() {
    redirect(action: 'result')
}
private doRender(Map params = [:].withDefault { [:] }) {
    def viewPath = "/mobile/news/front/front"

    def completeModel = getDefaultModel() + params.model

    render(view: viewPath,
            model: completeModel)
} 
```

GSP 页面存在并位于以下路径：`views/mobile/news/front/front.gsp` 运行应用程序后，我试图打开以下 URL：`http://localhost:8080/`并且我得到没有任何错误的空页面。我不知道它是什么，完全缺乏反馈让我很生气。我可以在任何地方查看日志吗？而且，我有什么明显的遗漏吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:35:02.330

`http://localhost:8080/`当您在机器上以运行应用程序模式运行 Grails 时，Firefox 中的页面始终为空。它与 url 映射等无关。

# ios - iOS @2x 图像 UIImageView 未被拾取

> ID：15210087
> 
> 赞同：0
> 
> 时间：2013-03-04T20:02:15.477
> 
> 标签：ios

编辑：看起来 2x 图像实际上不是 2x。我觉得很笨:(

我已经为我的图像创建了@2x 图像，但是当我使用视网膜在 iOS 模拟器中运行该应用程序时，图像是模糊的。请参阅随附的屏幕截图。

![iOS 2x 图像未被拾取](../Images/690a77e0eba35c5973d50f5f260e7d95.png)

完整图片的网址是：

[http://i.stack.imgur.com/Dpk1k.png](https://i.stack.imgur.com/Dpk1k.png)

视网膜显示的图像是硬件设备设置：

[http://i.stack.imgur.com/Gyn2n.jpg](https://i.stack.imgur.com/Gyn2n.jpg)

![ios 视网膜显示屏](../Images/97c845ec627911f558be2a024d00b565.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:13:02.437

看起来您正在引用作为情节提要中场景的一部分的 UIImageView 中的图像。当您拉下可供选择的图像列表时，您是否看到列出的普通版本和@2x 版本？如果您只看到普通版本，那么问题可能是 @2x 图像未包含在目标中。

为了确保图像在目标中，您应该在项目资源管理器中选择图像（在 Xcode 的左侧），然后在文件检查器中查看实用程序面板（在 Xcode 的右侧）。确保在“目标成员资格”部分中选中目标旁边的复选框。

# javascript - Jquery 是否有能力查看从 $.get 传回的数据中的 id

> ID：15210089
> 
> 赞同：0
> 
> 时间：2013-03-04T20:02:41.290
> 
> 标签：javascript, jquery

我`$.get`用来返回一些数据：

```
$.get(url, function(data){
  $("#searchResults").html(data);
}); 
```

返回数据时，它看起来像这样：

```
 <div class="blah" cid="12344">12344</div> 
```

我希望能够单击它并阅读 CID：

```
 $('.blah').click(function(){
 $(this).attr('cid');
 }); 
```

JQuery 似乎没有处理这个......我是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:04:50.190

在将 HTML 插入 DOM 后，您需要附加该特定事件处理程序。

```
$.get(url, function(data){
    $("#searchResults").html(data);
    $('.blah').unbind('click').click(function(){
        $(this).attr('cid');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:06:57.813

使用事件委托，你可以改变

```
$('.blah').click(function() { 
```

到

```
$('#searchResults').on('click', '.blah', function() { 
```

然后您将永远不必删除或重新添加此事件处理程序。

# session - cakephp 的多个控制器中未读取会话

> ID：15210098
> 
> 赞同：1
> 
> 时间：2013-03-04T20:03:31.953
> 
> 标签：session, cakephp, cakephp-2.1

我在 cakephp 应用程序中使用会话，但看起来我设置的会话没有在我正在使用的各种控制器之间共享。所以可以说我有

页面控制器

```
 public $components = array( 'Email', 'Session', 'RequestHandler', 'Cookie'); 
      //this is pages/home
      public function home(){

         $this->Session->write("bunny", "123456");
         debug($this->Session->read("bunny"));
      } 
```

个人控制器

```
 public $components = array( 'Email', 'Session', 'RequestHandler', 'Cookie'); 
  //this is person/index
 public function index(){
       debug($this->Session->read("bunny");
 } 
```

当我转到网址[http://domian.org/person/index](http://domian.org/person/index)时，该调试行为空。它不应该打印出“123456”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:42:21.913

我不能说它是错误，但就我在蛋糕 php 上的工作而言。我发现大多数人都面临同样的问题，在这里使用 php 默认函数。

在过滤功能之前使用`session_start();`或`ob_clean();`在过滤功能之前使用我认为这可以解决您的问题

# json - Json API - 深入了解

> ID：15210101
> 
> 赞同：0
> 
> 时间：2013-03-04T20:03:42.833
> 
> 标签：json, playframework-2.0

我有以下代码：

```
(json \ field.name).as[Int] 
```

问题是，代码似乎只查看 json 文档的第一个“层”，当 JsObject 被包装到一个数组中时给我一个错误。

为了更好地说明这一点：

这个json有效：

```
{ 
  fieldName: 123 
} 
```

这不是：

```
[ 
  { 
    fieldName: 123 
  } 
] 
```

那么，如何在第二个 json 中查找 fieldName 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:44:16.610

正如你所说，这个 json 是一个数组，其中第一个值是你的对象。

您可以使用[序数遍历](https://github.com/playframework/Play20/blob/master/framework/src/play-json/src/main/scala/play/api/libs/json/JsPath.scala#L168)来获取第一个对象，并对其进行解析。

```
scala> val json = Json.arr(Json.obj("value" -> 10))

scala> json(0)
res0: play.api.libs.json.JsValue = {"value":10}

scala> (json(0) \ "value").as[Int]
res1: Int = 10 
```

# sql-server - SQL SSIS派生列公式/语法问题

> ID：15210106
> 
> 赞同：1
> 
> 时间：2013-03-04T20:04:11.673
> 
> 标签：sql-server, ssis

我有一个公式，我需要能够将其放入我的 SSIS 派生列中……下面是……

```
if MONTH(Sls.SlsDt) + DAY(Sls.SlsDt) > MONTH(TODAY) + DAY(TODAY) then
    dYdtYr = 0.
  else
    dYdtYr = YEAR(Sls.SlsDt). 
```

如何将上述业务逻辑放入 SQL SSIS ETL 派生列转换？

派生列是完成此任务的正确选择吗？

ETL 包是从 CSV 到 SQL 临时表的导入，在此导入期间，我需要输出一个已实现上述逻辑的新列（或替换现有列）。

输入行包含 MONTH 和 DAY 以及 dYdtYr 列。从某种意义上说，我需要根据上述逻辑用新值覆盖 dYdtYr 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:26:17.737

派生列设置为替换列，使其替换 dYtdYr。将以下内容放入表达式中：

```
(MONTH(Sls.SlsDt) * 100 + DAY(Sls.SlsDT) > MONTH(getdate())*100 + DAY(getdate())) ? 0 : YEAR(Sls.SlsDt) 
```

这需要月份值（3 月为 03）将其乘以 100 得到 300，并将其添加到日期值（今天为 04）并得到一个类似 0304 的值。这将起作用，因此一年中的任何一天之前或等于该值将小于该数字，并且今天之后的一年中的任何一天都将更大。请注意，这不考虑年份。这意味着 3 年前的 12 月 31 日将在 dYtdYr 中获得 0，但 3 年前的 3 月 3 日将（今天）获得 SlsDt 的年份。我猜想，如果这是您想要的结果，那么您正在尝试建立一个 YTD 年同比比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:05:32.100

如果可以使用`TSQL`，则可以使用`CASE`语句

```
CASE 
 WHEN MONTH(Sls.SlsDt) + DAY(Sls.SlsDt) > MONTH(getDate()) + DAY(getDate()) 
 THEN dYdtYr = 0
ELSE
 dYdtYr = YEAR(Sls.SlsDt)
END AS ColumnName 
```

# statistics - 重复测量的单向方差分析 - 不在受试者内

> ID：15210108
> 
> 赞同：0
> 
> 时间：2013-03-04T20:04:16.630
> 
> 标签：statistics

我正在尝试通过重复测量进行单向方差分析；但是，重复测量是独立的，它们并不代表受试者在不同条件下的测量，而只是对相同条件的复制。这意味着如果我获得两个测量值，例如，对于一个受试者并且它们不同，那只是由于随机性。

我环顾四周，似乎有一个受试者内方差分析，但假设每个受试者的测量值是相关的，而我的情况并非如此。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:33:17.523

如果您的重复测量是真正独立的，那么您可以将它们视为重复并进行通常的单向方差分析。

# ruby-on-rails - 如何在 Rails 中生成 radio_buttons 的散列？

> ID：15210114
> 
> 赞同：0
> 
> 时间：2013-03-04T20:04:48.333
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery, ruby-on-rails-3.2

`person`我在 Rails 中有一个 ajax 函数，它根据在表单中选择的选项更新选项哈希：

```
# projects_controller.rb
def get_invoice_types
  person = Person.find(params[:person_id])  
  @types = person.address_types
end

# get_invoice_types.erb
$('#project_invoice_type').html("<%= escape_javascript(options_for_select(@types)) %>");

# application.js
$("#project_person_id").change(function() {
    $.ajax({
        url: '/projects/get_invoice_types',
        data: 'person_id=' + this.value,
        dataType: 'script'
    })
}); 
```

有没有一种简单的方法来生成一个列表`radio_buttons`而不是`options_for_select`？

如果是这样，如何做到这一点？

谢谢你的帮助。

这是生成我最终得到的单选框的函数：

```
def collection_radio_buttons(types, f) # works!
  types_html = types.map do |type|
    content_tag :span, :class => "radio_option" do
      f.radio_button(:invoice_type, type) + localize_address_type(type)
    end
  end
  safe_join(types_html)
end 
```

但是，我无法通过上面的 Ajax 函数对其进行更新。我猜这是由于`f`传递给函数的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:34:15.630

`label_tag`使用和`radio_button_tag`循环元素编写你的开放助手。

**更新**

像这样的东西？

```
#Helper
  def radio_boxes(name, *items)
    content_tag :div do
      items.collect do |item|
        content_tag :label, item.first
        radio_button_tag(name, item.last) + label_tag("#{name}_#{item.last}", item.first)
      end.join("\n").html_safe
    end
  end

#View
<%= radio_boxes('countries', ['Lisbon', 1], ['Madrid', 2]) %>

#Output
<div>
  <input id="countries_1" name="countries" type="radio" value="1"><label for="countries_1">Lisbon</label>
  <input id="countries_2" name="countries" type="radio" value="2"><label for="countries_2">Madrid</label>
</div> 
```

# web - CKEditor所见即所得在本地工作不在服务器中工作

> ID：15210119
> 
> 赞同：0
> 
> 时间：2013-03-04T20:05:09.057
> 
> 标签：web, ckeditor

我正在使用ckeditor。当我在本地主机（在我的电脑中）工作时，它在格式化和图像上传方面工作正常。但是当我在服务器上使用它时，它的格式化和图像上传不起作用。

例如。- 如果我用某种样式和颜色和大小格式化字体，它会在本地显示所有效果正面，但是当我使用相同样式的相同字体和相同颜色时，它不会在其正面显示任何格式或图像。

为了保存该文本，我使用了 mysql_real_escape_string() 函数，我也尝试了 mysql_escape_string() 但两者都在本地工作，而不是在服务器上。:S

对于图像上传，它的路径出错到数据库中，所以它没有显示正面。

例如。

本地路径 - ( `http://localhos/exo/uploads/24ysjdh.jpg`)

服务器路径 - ( `http://mysite.in/%22/uploads/image/11/2qiz714.jpg/%22`) （在这个 url %22 中出现问题）

我不知道为什么编辑器在本地工作而不在服务器上工作。:S 我第一次遇到这个独特的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T02:01:11.250

如果您使用 PHP MagicQuotes 可能会导致此问题。/uploads/image/11/2qiz714.jpg 中似乎有问题。周围有额外的 /" 正在更改为 /%22

```
/%22/uploads/image/11/2qiz714.jpg/%22 
```

它可能在生成路径的代码中。MagicQuotes 是打开还是关闭？您可以粘贴一段创建此路径的代码吗？一旦你找到它，请仔细检查所有“和转义/”是否正确。

# android - 使用 LayoutInflater 在彼此下方多次添加相同的视图

> ID：15210120
> 
> 赞同：1
> 
> 时间：2013-03-04T20:05:10.737
> 
> 标签：android, layout, user-interface, layout-inflater

我一直在制作一个简单的 UI，它显示一些照片和一些其他信息！我有一个简单的布局，用于在一个框中显示每张照片，我想多次添加这个布局（我拥有的照片数量）。

这是我的 info_wrapper.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/info_wrapper"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="2dp"
    android:paddingBottom="2dp"
    android:paddingLeft="1dp"
    android:paddingRight="1dp"
    >

    <TextView 
        android:id="@+id/usernamePosting"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"/>

    <ImageView 
        android:below="@+id/usernamePosting"
        android:id="@+id/photo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello"/>

</RelativeLayout> 
```

还有我的 main_screen.xml 文件：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <RelativeLayout 
        android:id="@+id/menuBar"
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:background="@color/green">

        <ImageView
            android:id="@+id/locationIcon"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:src="@drawable/location_place"
            ></ImageView>

        <TextView
            android:id="@+id/userLocationTxtView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_toRightOf="@+id/locationIcon"
            android:text="@string/app_name"
            android:textColor="@color/white"
            android:textSize="15dp" />

    </RelativeLayout>

    <RelativeLayout 
        android:layout_below="@id/menuBar"
        android:id="@+id/bodyView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@color/light_gray">

    </RelativeLayout>

</RelativeLayout> 
```

现在，当我尝试多次添加 info_wrapper 视图时-所有视图都在彼此之上-但我想成为另一个视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:36:52.357

只需将 a`ListView`与您自己的 eg`BaseAdapter`或实现一起使用`ArrayAdapter`。

看看[getItemViewType](http://developer.android.com/reference/android/widget/BaseAdapter.html#getItemViewType%28int%29 "BaseAdapter getItemViewType")和[getViewTypeCount](http://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount%28%29%20%22BaseAdapter%20getViewTypeCount)。如果您有两种不同类型的视图，请使用`getViewTypeCount`return`2`和`getItemViewType(position)`any `0`或`1`取决于哪个元素在 at `position`。

例如，您可以有一个自定义的适配器实现，它为不同类型的对象膨胀/重用不同的视图：

```
class ExampleAdapter extends BaseAdapter
{
    [...]
    View getView(int position, View convertView, ViewGroup parent)
    {
        Object o = getItemFromSomeDataSource(position);
        if(o instanceof Type1)
        {
            if(convertView == null)
            {
                convertView = inflater.inflate(item_layout_1);
                [...]
            }
            else
            {
                [...] // reuse existing View
            }
        }
        else if(o instanceof Type2)
        {
            [...]
        }
            [...]
    }
    int getViewTypeCount(){ return n; } // where n = no. of different types to display
    int getItemViewType (int position){ [...] } // mapping of item-position and item-type 
} 
```

# mono - DLL 的 MonoTouch System.EntryPointNotFoundException

> ID：15210123
> 
> 赞同：2
> 
> 时间：2013-03-04T20:05:11.997
> 
> 标签：mono, xamarin.ios

我正在尝试使用我的 MonoTouch 应用程序访问的一些本机代码函数制作一个 DLL。我遵循了 monotouch-bindings 使用的一般方法，您可以在其中：

*   制作一个 xcode 项目并将一些本机代码放入其中
*   使用 xcodebuild 构建静态库（.a 文件）
*   使用 --link-with 运行 btouch 以生成 .dll 文件
*   在我的 MonoTouch 应用程序中添加对 .dll 文件的引用

.. 但是每当我尝试在我的应用程序中使用这些功能时，我都会得到 System.EntryPointNotFoundException。这是我正在尝试做的每件事的代码：

**在 .cpp 文件中：**

```
extern "C" {
   int SomeFunction();
}

int SomeFunction() {
   ...
} 
```

**用于构建 .a 文件的命令行**

```
xcodebuild -project MyStaticLibrary.xcodeproj -target MyStaticLibrary -sdk iphonesimulator -configuration Release clean build 
```

**带有绑定的 .cs 文件 (NativeBindings.cs)**

```
public class MyStaticLibraryBindings
{
    [ DllImport( "__Internal" ) ]   public extern static int SomeFunction();
} 
```

**DLL 的 AssemblyInfo.cs**

```
using System;
using MonoTouch.ObjCRuntime;

[assembly: LinkWith ("libMyStaticLibrary.a", LinkTarget.Simulator | LinkTarget.ArmV7 | LinkTarget.ArmV7s, IsCxx = true, ForceLoad = true, Frameworks = "", WeakFrameworks = "")] 
```

**构建 .dll 的命令行**

```
btouch -x=NativeBindings.cs AssemblyInfo.cs --out=NativeBindings.dll --link-with=libMyStaticLibrary.a,libMyStaticLibrary.a 
```

.. DLL 构建良好，我的应用程序在编译期间看到 MyStaticLibraryBindings.SomeFunction 函数，但在运行时调用它时，我得到 System.EntryPointNotFoundException。

我已经验证 libMyStaticLibrary.a*确实*包含 SomeFunction：

```
~/build> nm libMyStaticLibrary.a*
00000167 T _SomeFunction 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:32:48.150

此外，在您的库中找到的符号是`_SomeFunction`在您尝试 P/Invoke 时`SomeFunction`。在某些情况下，只有使用正确的前缀才能进行绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:19:41.213

如果问题发生在设备上，那是因为您正在为模拟器构建本机库，而您正在为 armv7、armv7s 和模拟器构建 dll。您需要构建本机库 3 次，对于每个目标架构一次，将它们一起 lipo：

```
lipo -create -output libMyStaticLibrary.a libMyStaticLibrary-armv7.a libMyStaticLibrary-armv7s.a libMyStaticLibrary-simulator.a 
```

# sql - 查询不填充空列

> ID：15210131
> 
> 赞同：0
> 
> 时间：2013-03-04T20:05:37.317
> 
> 标签：sql

我的查询有问题。

此查询获取我最近 5 周的数据。

```
select z.week,
sum(case when i.severity=1 then 1 else 0 end) as 1
sum(case when i.severity=2 then 1 else 0 end) as 2
sum(case when i.severity=3 then 1 else 0 end) as 3
sum(case when i.severity=4 then 1 else 0 end) as 4
from instance as i
and left outer join year as z on convert(varchar(10),z.date,101)=convert(varchar(10),i.created,101)
and left outer join year as z on convert(varchar(10),z.date,101)=convert(varchar(10),i.closed,101)
where i.group in '%Tools%'
and z.year=2013
and z.week<=6 and z.week>1 
```

我的实例表中有几个星期，甚至没有一行。所以这里我没有得到空值或零......相反，整行根本没有提示。

我现在的输出。

```
week | 1 | 2 | 3 | 4 
---------------------
2  | 0 | 1 | 8 | 5
4  | 2 | 3 | 4 | 9
5  | 1 | 0 | 0 | 0 
```

但我需要像下面这样的输出......

```
week | 1 | 2 | 3 | 4 
---------------------
2  | 0 | 1 | 8 | 5
3  | 0 | 0 | 0 | 0
4  | 2 | 3 | 4 | 9
5  | 1 | 0 | 0 | 0
6  | 0 | 0 | 0 | 0 
```

我的问题是如何为实例表中不存在的行获取零。请对此进行指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:08:13.550

看起来您需要右连接而不是左连接。如果您希望表达式的第 1 列中存在一些数据，但它涉及连接表达式的 RIGHT，则需要将其包含在右连接中或重写您的 from 子句以首先获得它。

编辑：这里有一些简单的连接示例和一个简单的示例：

```
declare @Z table ( dt date, value int);

insert into @Z values ('3-1-2013', 10),('3-4-2013',20);

declare @Y table (dt date, value int);

insert into @Y values ('3-1-2013', 5),('3-3-2013', 30);

select * from @Z  -- @Z table as is
select * from @Y  -- @Y table as is

select *
from @Z z
    inner join @Y y on z.dt = y.dt  -- I only get the values that they both exist on

select *
from @Z z
    left outer join @Y y on z.dt = y.dt  -- I get the values of @Z table regardless if @Y exists or not

select *
from @Z z
    right outer join @Y y on z.dt = y.dt  -- I get the values of @Y table regardless if @Z exists or not, I flipped my logic

select *
from @Z z
    full outer join @Y y on z.dt = y.dt  -- I get all the values of @Z table and @Y regardless of matching rules 
```

# css - 在Listview中缩小列表项的高度

> ID：15210136
> 
> 赞同：0
> 
> 时间：2013-03-04T20:05:44.333
> 
> 标签：css, jquery-mobile

我正在创建一个可折叠的列表视图，标记如下。我希望能够缩小列表项的高度，目前我只能在移动屏幕上放几个。

```
<div id="accMain0" data-role="collapsible" data-inset="true" data-collapsed="false">
    <h3>
        Travel
    </h3><div id="myAppsSectionGridTable" data-role="listview" data-inset="false">
        <li><a onclick="selectApproval(&#39;ed5895bc-0f4a-e211-a9ba-0050568e20a1&#39;,&#39;XP%2boFSgWxG0%3d&#39;,&#39;&#39;,&#39;true&#39;,&#39;false&#39;,&#39;false&#39;,&#39;true&#39;)"><img src="Images/travel.png" alt="" class="ui-li-icon" /><h3>
    Victor Chavez
        </h3><p>Try Again NAck12345</p></a></li><li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:28:11.877

好吧，您可以覆盖`margin`,`padding`和 a`font-size`如果您想要一些 jQM 样式

```
.ui-li-heading { 
    /*font-size: 16px;*/
    margin: .3em 0; 
}
.ui-li-desc { 
    /*font-size: 12px;*/
    margin: -.5em 0 .3em; 
}

.ui-li .ui-btn-inner a.ui-link-inherit, .ui-li-static.ui-li {
     padding-top: .2em; 
     padding-bottom: .2em; 
} 
```

**这是一个[jsfiddle示例](http://jsfiddle.net/pmatseykanets/VRdWM/)**

# c++ - 是否可以从多个模板特化生成自动“switch()”指令？

> ID：15210138
> 
> 赞同：3
> 
> 时间：2013-03-04T20:05:51.793
> 
> 标签：c++, templates

我正在实现一个协议，其中一台主机可以接收单字节命令。

虽然一个字节有 256 个可能的值，但其中只有少数是有效的。

当然我可以写这样的东西：

```
bool is_valid(uint8_t command)
{
  switch (command)
  {
    case 0x00:
    case 0x01:
    case 0xa0:
    case 0xa1:
      return true;
  }

  return false;
} 
```

在运行时检查接收到的命令的有效性。

不幸的是，我还必须为这些命令中的每一个维护一个名称列表，这将迫使我编写另一个非常接近`is_valid()`但会返回命令名称的函数。这样做会使我复制有效命令的列表，我不喜欢这样。

我想知道是否有一种方法可以使用元编程来仅声明一次有效命令。

就像是：

```
template <uint8_t Value>
struct valid_value_type;

struct valid_value_type<0x00> { static const std::string name = "Stop command"; };
struct valid_value_type<0x01> { static const std::string name = "Start command"; }; 
```

但是，我无法达到任何令人满意的结果（理解“编译和工作”），而且我不知道如何生成一个自适应`is_valid()`函数来自动考虑这些模板声明的存在。

这甚至可能吗？如果是这样，你会怎么做？

注意：遗憾的是 C++11 不是一个选项，但出于好奇，我也对该解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:33:01.553

除非您在嵌入式环境中，否则 a 只有 256 个可能的值`uint8_t`，因此用它编写查找表并不可怕......

```
char const * cmds[256] = {};
void cmds_init(char const * (&cmds)[256]) {
   cmds[0x00] = "Stop command";
// ...
} 
```

然后对有效命令的测试只是在查找表中找到名称：

```
bool is_valid(uint8_t cmd) {
   return cmds[cmd] != 0;
} 
```

如果有效命令的数量远小于 256，您可以实现一个函数，该函数使用开关返回名称，如果命令未知，则返回 null，并使用相同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:03:14.197

下面的事情会做吗？

```
template <uint8_t Value>
struct valid_value_type
{
  static char const *const name = 0;
};

template<>
struct valid_value_type<0x00>
{
  static char const *const name = "Stop command";
};

template<>
struct valid_value_type<0x01>
{
  static char const *const name = "Start command";
};

template <uint8_t N>
bool is_valid_value_type_helper(uint8_t value, valid_value_type<N>)
{
  return((value == N) ? valid_value_type<N>::name != 0 : check_valid_value_type_helper(value, valid_value_type<N-1>()));
}

bool is_valid_value_type_helper(uint8_t value, valid_value_type<0>)
{
  return(value == 0 && valid_value_type<0>name != 0);
}

bool is_is_valid_value_type(uint8_t value)
{
  return(is_valid_value_type_helper(value, valid_value_type<0xff>());
} 
```

大概可以简化一点...

# ajax - Spring MVC 无法返回 JSONArray 对象错误 406

> ID：15210146
> 
> 赞同：3
> 
> 时间：2013-03-04T20:06:28.790
> 
> 标签：ajax, json, spring-mvc

我正在尝试从我的 spring mvc 控制器返回 JSONArray 对象。但是我在浏览器上收到 406 错误。这是一个 ajax 请求，我正在使用 jquery 来发出请求。

弹簧控制器方法：

```
@RequestMapping("/getAuthorizedScreensForUser.do")  
public @ResponseBody JSONArray getAuthorizedScreensForUser(HttpSession session){  
    UserAuthDetails userAuthDetails = (UserAuthDetails) session.getAttribute("userauthdetails");  
   //This method returns JSONArray  
    return webUtilsService.getJSONArrayResponseForAuthorizedScreens(userAuthDetails.getScrnfldacss());   
} 
```

我已经在 spring-context.xml 中尝试了这两个条目

```
 <mvc:annotation-driven>  
        <mvc:message-converters>  
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">  
                <property name="prefixJson" value="true"/>  
            </bean>  
        </mvc:message-converters>  
    </mvc:annotation-driven> 
```

和

```
<mvc:annotation-driven/> 
```

我的 pom.xml 有这些依赖项：

```
<dependency>  
            <groupId>org.codehaus.jackson</groupId>  
            <artifactId>jackson-core-asl</artifactId>  
            <version>1.9.12</version>  
        </dependency>  

        <dependency>  
            <groupId>org.codehaus.jackson</groupId>  
            <artifactId>jackson-mapper-asl</artifactId>  
            <version>1.9.12</version>  
        </dependency> 
```

我正在运行 WAS 8。不确定是什么问题。我能够以 json 格式返回简单对象，但不能返回 JSONArray 对象。如果我做错了什么，请告诉我。

我知道有很多现有的线程有相同的讨论。但我没有找到任何有 JSONArray 对象示例的人。帕万乔普拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:24:18.510

406 表示您的请求不包含与响应中的匹配标头匹配的接受标头。这来自[W3](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

> 请求标识的资源只能根据请求中发送的接受头生成具有不可接受的内容特征的响应实体。

我将从查看请求开始。确保它在请求的标头中有“application/json”。然后，确保将响应的 Content-Type 设置为相同。

# python - 从嵌套字典中获取父键

> ID：15210148
> 
> 赞同：9
> 
> 时间：2013-03-04T20:06:40.603
> 
> 标签：python, dictionary, nested

从以下嵌套字典中，如何获取每个父字典键`'value4ac'`？通过开始`'value4ac'`值，我想得到`'key4'`, `'key4a'`, `'Key4ac'`.

```
example_dict = { 'key1' : 'value1',
                 'key2' : 'value2',
                 'key3' : { 'key3a': 'value3a' },
                 'key4' : { 'key4a': { 
                                         'key4aa': 'value4aa',
                                         'key4ab': 'value4ab',
                                         'key4ac': 'value4ac'
                                     },
                            'key4b': 'value4b'
                           }
                   } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T20:12:46.707

递归救援！

```
example_dict = { 'key1' : 'value1',
                 'key2' : 'value2',
                 'key3' : { 'key3a': 'value3a' },
                 'key4' : { 'key4a': { 'key4aa': 'value4aa',
                                       'key4ab': 'value4ab',
                                       'key4ac': 'value4ac'},
                            'key4b': 'value4b'}
                }

def find_key(d, value):
    for k,v in d.items():
        if isinstance(v, dict):
            p = find_key(v, value)
            if p:
                return [k] + p
        elif v == value:
            return [k]

print find_key(example_dict,'value4ac') 
```

**这个怎么运作**

它查看项目并检查 2 个案例

*   item 不是字典——在这种情况下，看看它是否是我们正在寻找的值。如果是，则返回一个仅包含键的列表。（这是我们递归的基本情况）。
*   item 是一个字典——尝试在该字典中查找键。如果在该字典（或任何子字典）中找到它，则返回将正确路径预先附加到路径其余部分的键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2021-01-31T12:37:10.470

## 如果您的字典也包含列表怎么办？

这是@mgilson 解决方案的更广泛的变体，适用于 JSON：

```
example_dict_with_list = { 'key1' : 'value1',
                           'key2' : 'value2',
                           'key3' : { 'key3a': 'value3a' },
                           'key4' : { 'key4a': [{ 'key4aa': 'value4aa',
                                                  'key4ab': 'value4ab',
                                                  'key4ac': 'value4ac'}],
                                      'key4b': 'value4b'}
                          }

def breadcrumb(json_dict_or_list, value):
  if json_dict_or_list == value:
    return [json_dict_or_list]
  elif isinstance(json_dict_or_list, dict):
    for k, v in json_dict_or_list.items():
      p = breadcrumb(v, value)
      if p:
        return [k] + p
  elif isinstance(json_dict_or_list, list):
    lst = json_dict_or_list
    for i in range(len(lst)):
      p = breadcrumb(lst[i], value)
      if p:
        return [str(i)] + p

print(
    breadcrumb(example_dict_with_list, 'value4aa')
) 
```

哪个返回

```
['key4', 'key4a', '0', 'key4aa', 'value4aa'] 
```

## 奖金

如果你需要很好地打印出来，就像一串面包屑，做

```
print(
  ' > '.join(
    breadcrumb(example_dict, 'value4aa')
  )
) 
```

哪个会回来

```
'key4 > key4a > 0 > key4aa > value4aa' 
```

# c# - 如何在 Silverlight 中使用动态 ResourceDictionary Source？

> ID：15210150
> 
> 赞同：0
> 
> 时间：2013-03-04T20:06:44.877
> 
> 标签：c#, silverlight

如何在 Silverlight 中使用动态 ResourceDictionary Source？我的应用程序有一个“Styles.xaml”，其中包含很多样式定义，并引用了一个“Colors.xaml”，其中定义了几个画笔：

样式.xaml：

```
<ResourceDictionary>
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Project;component/Colors.xaml" />
  </ResourceDictionary.MergedDictionaries>
  <DataTemplate x:Key="MyLayoutTemplate">
    <Button Background="ButtonBackgroundBrush">Button Title</Button>
  </DataTemplate>
  <!-- A lot of other definitions -->
</ResourceDictionary> 
```

颜色.xaml：

```
<ResourceDictionary>
  <SolidColorBrush x:Key="ButtonBackgroundBrush" Color="#FFFFFFFF"/>
  <!-- ... -->
</ResourceDictionary> 
```

所以基本上 Styles.xaml 定义了布局，Colors.xaml 定义了颜色（duh）。我的 App.xaml 仅引用此 Styles.xaml。

我需要的是一种不使用它的方法：

```
<ResourceDictionary Source="/Project;component/Colors.xaml" /> 
```

并将此 Source 属性“指向”（或绑定）到一个静态类，该类将动态定义。像这样的东西：

```
<ResourceDictionary Source="{Binding Settings.ThemeUri}" /> 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:30.107

您实际上只能在 XAML 中实现这一点，但在代码中创建字典很简单。

```
ResourceDictionary styleDictionary = new ResourceDictionary()
{
    Source = new Uri("/Project;component/Styles.xaml", UriKind.Absolute)
};
ResourceDictionary colorDictionary = new ResourceDictionary()
{
    Source = new Uri("/Project;component/Colors.xaml", UriKind.Absolute)
};

styleDictionary.MergedDictionaries.Add(colorDictionary);
Application.Current.Resources.MergedDictionaries.Add(styleDictionary); 
```

# c# - 隐藏 GridView ID 列

> ID：15210151
> 
> 赞同：3
> 
> 时间：2013-03-04T20:06:46.263
> 
> 标签：c#, asp.net, .net

似乎是一个普遍的问题。

我试图隐藏我的 GridView 的一列。我已经读过，简单地将列设置为“可见 = false”是行不通的，因为我正在自动生成我的数据。

目前我的代码是这样的：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        bind();

        if (GridView1.Columns.Count > 0)
            GridView1.Columns[0].Visible = false;
        else
        {
            GridView1.HeaderRow.Cells[0].Visible = false;
            foreach (GridViewRow gvr in GridView1.Rows)
            {
                gvr.Cells[1].Visible = false;
            }
        }

    } 
```

'if' 语句不会像我所说的那样触发，因为我正在自动生成数据。使用上面的循环，我可以隐藏列的标题文本，但想要隐藏整个列，仍然能够访问隐藏的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:15:00.767

在控件的生命周期后期（当 Columns 集合已填充时）执行此操作怎么样：

```
protected void GridView1_PreRender(object sender, EventArgs e)
{
    if (GridView1.Columns.Count > 0)
        GridView1.Columns[0].Visible = false;
    else
    {
        GridView1.HeaderRow.Cells[0].Visible = false;
        foreach (GridViewRow gvr in GridView1.Rows)
        {
            gvr.Cells[1].Visible = false;
        }
    }
} 
```

注意：您需要添加`OnPreRender="GridView1_PreRender"`到您的 GridView 标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:22:40.703

为什么不使用`GridView.DataKeyNames`and`GridView.DataKeys`属性来存储 ID，然后用 rowIndex 检索它呢？这也将防止该列自动生成。

[数据键名](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)

[数据键](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeys.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:10:45.950

啊...所以问题是列没有预定义。

也许您可以使用 Linq 来选择您想要显示的所有列：

```
gvTest.DataSource = (from d in dataSource
                     select new 
                     {
                         ColumnA = d.ColumnA...
                     } 
```

或者，您可以使用 JavaScript 隐藏列；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:16:54.137

这是自动生成列的限制。为了方便不预先定义它们，您放弃了对如何显示列的大量控制。

现在咬紧牙关，定义你的列。如果这是您需要进行的唯一自定义，那么您可能会没事，但是 90+% 的时间我最终都会定义列来自定义它们的显示方式。

否则，您最终会遇到一些在各种情况下容易中断的“调整”（例如，数据源中列的顺序发生变化）。

# jquery - 401 仅使用多种身份验证方法 IE 10

> ID：15210158
> 
> 赞同：0
> 
> 时间：2013-03-04T20:07:07.067
> 
> 标签：jquery, iis-7, meta-tags, internet-explorer-10, http-status-code-401

我不确定这更多的是编码问题还是服务器设置问题......

在我们的生产站点上，我们遇到了特定于 Internet Explorer 10 的问题。

我正在使用 jQuery 对同一域上的 Web 服务进行 ajax POST，在 IE10 中我得到 401 响应，IE9 工作得很好。我应该提到我们在我们网站的另一个区域镜像了代码，它在 IE10 中运行良好。这两个区域之间的唯一区别是一个在子域下，另一个在根级别。*www.my1stdomain.com*与*portal.my2nddomain.com*

这些服务器上的目录结构是：

```
\my1stdomain\webservice\name\service.aspx

\portal\webservice\name\service.aspx 
```

在`\portal\`and`\my1stdomain\`文件夹中，我有一个执行 ajax 调用的页面，两个页面是相同的。

```
$.ajax({
    type: 'POST',
    url: '/webservice/name/service.aspx/function',
    cache: false,
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    data: '{ "json": "data" }',
    success: function() {

    },
    error: function() {

    }
}); 
```

我已验证服务器端两个文件夹的权限相同。我已经应用了放置`<meta http-equiv="X-UA-Compatible" value="IE=9">`强制兼容性视图的解决方法修复*（将 IE 置于兼容模式修复了问题）*。这似乎在 Windows 7 上的 IE10 中工作，但是 Windows 8 上的 IE 10 仍然看到同样的问题。这些页面是包含标题的经典 asp，也没有使用其他元标记。文档类型被指定为`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//" "http://www.w3.org/TR/html4/loose.dtd">`在门户页面和`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`主域上。

**更新1**

* * *

我在服务器上使用 Microsoft Network Monitor 3.4 来捕获请求。我使用以下过滤器来捕获 401：

```
Property.HttpStatusCode.StringToNumber == 401 
```

这是回应

```
- Http: Response, HTTP/1.1, Status: Unauthorized, URL: /webservice/name/service.aspx/function Using Multiple Authetication Methods, see frame details
    ProtocolVersion: HTTP/1.1
    StatusCode: 401, Unauthorized
    Reason: Unauthorized
  - ContentType:  application/json; charset=utf-8
   - MediaType:  application/json; charset=utf-8
      MainType:  application/json
      charset: utf-8

    Server:  Microsoft-IIS/7.0
    jsonerror:  true
  - WWWAuthenticate: Negotiate
   - Authenticate:  Negotiate
      WhiteSpace:  
      AuthenticateData: Negotiate
  - WWWAuthenticate: NTLM
   - Authenticate:  NTLM
      WhiteSpace:  
      AuthenticateData: NTLM
    XPoweredBy:  ASP.NET
    Date:  Mon, 04 Mar 2013 21:13:39 GMT
    ContentLength:  105
    HeaderEnd: CRLF
  - payload: HttpContentType =  application/json; charset=utf-8
     HTTPPayloadLine: {"Message":"Authentication failed.","StackTrace":null,"ExceptionType":"System.InvalidOperationException"} 
```

这里真正突出的是

> 未经授权，URL：/webservice/name/service.aspx/function 使用多种身份验证方法

有了这个，我仍然很困惑为什么这只发生在 IE10 中，如果它是一个权限/身份验证问题。10 中添加了什么，或者我应该在哪里寻找其根本原因？

**更新2**

* * *

以下是来自 fiddler 的客户端计算机的标头*（已删除服务器信息）*：

**主要的**

```
SESSION STATE: Done.
Request Entity Size: 64 bytes.
Response Entity Size: 9 bytes.

== FLAGS ==================
BitFlags: [ServerPipeReused] 0x10
X-EGRESSPORT: 44537
X-RESPONSEBODYTRANSFERLENGTH: 9
X-CLIENTPORT: 44770
UI-COLOR: Green
X-CLIENTIP: 127.0.0.1
UI-OLDCOLOR: WindowText
UI-BOLD: user-marked
X-SERVERSOCKET: REUSE ServerPipe#46
X-HOSTIP: ***.***.***.***
X-PROCESSINFO: iexplore:2644

== TIMING INFO ============
ClientConnected:    14:43:08.488
ClientBeginRequest: 14:43:08.488
GotRequestHeaders:  14:43:08.488
ClientDoneRequest:  14:43:08.488
Determine Gateway:  0ms
DNS Lookup:         0ms
TCP/IP Connect: 0ms
HTTPS Handshake:    0ms
ServerConnected:    14:40:28.943
FiddlerBeginRequest:    14:43:08.488
ServerGotRequest:   14:43:08.488
ServerBeginResponse:    14:43:08.592
GotResponseHeaders: 14:43:08.592
ServerDoneResponse: 14:43:08.592
ClientBeginResponse:    14:43:08.592
ClientDoneResponse: 14:43:08.592

    Overall Elapsed:    0:00:00.104

The response was buffered before delivery to the client.

== WININET CACHE INFO ============
This URL is not present in the WinINET cache. [Code: 2] 
```

**门户网站**

```
SESSION STATE: Done.
Request Entity Size: 64 bytes.
Response Entity Size: 105 bytes.

== FLAGS ==================
BitFlags: [ClientPipeReused, ServerPipeReused] 0x18
X-EGRESSPORT: 44444
X-RESPONSEBODYTRANSFERLENGTH: 105
X-CLIENTPORT: 44439
X-CLIENTIP: 127.0.0.1
X-SERVERSOCKET: REUSE ServerPipe#7
X-HOSTIP: ***.***.***.***
X-PROCESSINFO: iexplore:7132

== TIMING INFO ============
ClientConnected:    14:37:59.651
ClientBeginRequest: 14:38:01.397
GotRequestHeaders:  14:38:01.397
ClientDoneRequest:  14:38:01.397
Determine Gateway:  0ms
DNS Lookup:         0ms
TCP/IP Connect: 0ms
HTTPS Handshake:    0ms
ServerConnected:    14:37:57.880
FiddlerBeginRequest:    14:38:01.397
ServerGotRequest:   14:38:01.397
ServerBeginResponse:    14:38:01.464
GotResponseHeaders: 14:38:01.464
ServerDoneResponse: 14:38:01.464
ClientBeginResponse:    14:38:01.464
ClientDoneResponse: 14:38:01.464

    Overall Elapsed:    0:00:00.067

The response was buffered before delivery to the client.

== WININET CACHE INFO ============
This URL is not present in the WinINET cache. [Code: 2] 
```

# django - Windows7 上带有 graphicsmagick 后端 pdf/图像转换错误的 sorl-thumbnail

> ID：15210159
> 
> 赞同：0
> 
> 时间：2013-03-04T20:07:14.540
> 
> 标签：django, windows, graphicsmagick, sorl-thumbnail

我正在尝试设置 sorl-thumbnail django 应用程序来为网站提供 pdf 文件的缩略图 - 在带有 Appache Web 服务器的 Windows Server 2008 R2 上运行。

我已经使用 PIL 后端的 sorl-thumbnail 功能来生成 jpeg 图像的缩略图 - 这工作正常。

由于 PIL 无法读取 pdf 文件，我想切换到 graphicsmagick 后端。我已经安装并测试了 graphicsmagick/ghostscript 组合。从命令行

```
gm convert foo.pdf -resize 400x400 bar.jpg 
```

生成预期的 jpg 缩略图。它也适用于 jpg 到 jpg 缩略图生成。

但是，当从 sorl-thumbnail 调用时，ghostscript 会崩溃。从 django python shell (python manage.py shell) 我使用[sorl 文档](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html#low-level-api-examples)中描述的低级命令并传入指向 foo.pdf 的 FieldFile 实例 (ff) 并得到以下错误：

```
In [8]: im = get_thumbnail(ff, '400x400', quality=95)
**** Warning: stream operator isn't terminated by valid EOL.
**** Warning: stream Length incorrect.
**** Warning:  An error occurred while reading an XREF table.
**** The file has been damaged.  This may have been caused
**** by a problem while converting or transfering the file.
**** Ghostscript will attempt to recover the data.
**** Error:  Trailer is not found.
GPL Ghostscript 9.07: Unrecoverable error, exit code 1 
```

请注意，从命令行使用 gm convert 时，ff 指向的文件可以正常转换。

我也尝试过传递 ImageFieldFile 实例（iff）并得到以下错误：

```
In [5]: im = get_thumbnail(iff, '400x400', quality=95)
identify.exe: Corrupt JPEG data: 1 extraneous bytes before marker 0xdb `c:\users\thin\appdata\local\temp\tmpxs7m5p' @ warning/jpeg.c/JPEGWarningHandler/348.
identify.exe: Corrupt JPEG data: 1 extraneous bytes before marker 0xc4 `c:\users\thin\appdata\local\temp\tmpxs7m5p' @ warning/jpeg.c/JPEGWarningHandler/348.
identify.exe: Corrupt JPEG data: 1 extraneous bytes before marker 0xda `c:\users\thin\appdata\local\temp\tmpxs7m5p' @ warning/jpeg.c/JPEGWarningHandler/348.
Invalid Parameter - -auto-orient 
```

更改回 sorl 设置以使用默认 PIL 后端并重复 jpg 到 jpg 转换的命令，生成的缩略图图像没有错误/警告，并可通过缓存获得。

似乎 sorl 在将源文件传递给 gm 之前将其复制到临时文件中 - 问题出在此复制操作中。

我在 sorl_thumbnail-11.12-py2.7.egg\sorl\thumbnail\engines\convert_engine.py 第 47-55 行的源代码中发现了我认为是复制操作：

```
class Engine(EngineBase):

    ...

    def get_image(self, source):
        """
        Returns the backend image objects from a ImageFile instance
        """
        handle, tmp = mkstemp()
        with open(tmp, 'w') as fp:
            fp.write(source.read())
        os.close(handle)
        return {'source': tmp, 'options': SortedDict(), 'size': None} 
```

问题可能出在这里 - 我看不到它！

任何有关如何克服此问题的建议将不胜感激！我正在使用 django 1.4、sorl-thumbnail 11.12 和 memcached 和 ghostscript 9.07。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:01:52.647

经过一番反复试验，我发现可以通过将写入模式从'w'更改为'wb'来解决问题，以便sorl_thumbnail-11.12-py2.7.egg\sorl\thumbnail\engines\convert_engine的来源.py 第 47-55 行现在为：

```
class Engine(EngineBase):

    ...

    def get_image(self, source):
        """
        Returns the backend image objects from a ImageFile instance
        """
        handle, tmp = mkstemp()
        with open(tmp, 'wb') as fp:
            fp.write(source.read())
        os.close(handle)
        return {'source': tmp, 'options': SortedDict(), 'size': None} 
```

我相信 convert_engine.py 文件中还有另外两个位置应该进行相同的更改。之后， gm convert 命令能够处理该文件。

但是，由于我的 pdf 是相当大的多页 pdf，因此我遇到了其他问题，最重要的是 get_image 方法在生成缩略图之前制作了文件的完整副本。文件大小约为 50 Mb，因此结果证明这是一个非常缓慢的过程，最后我选择绕过 sorl 并直接调用 gm。然后将缩略图存储在标准 ImageField 中。不是那么优雅，但要快得多。

# saml-2.0 - Shibboleth 配置

> ID：15210160
> 
> 赞同：0
> 
> 时间：2013-03-04T20:07:16.347
> 
> 标签：saml-2.0, shibboleth

我对 shibboleth 非常（非常）新，目前我正在通过编辑 shobboleth2.xml 进行配置，并且我使用 shibboleth 2.4，但是当我重新启动 shibboleth 时出现以下错误。

```
shibd error: unable to run config check as user 
Restarting Shibboleth 2 daemon: 2013-03-04 13:15:27 ERROR XMLTooling.ParserPool : error on line 28, column 40, message: attribute 'homeUrl' is not declared for element 'ApplicationDefaults'
2013-03-04 13:15:27 ERROR Shibboleth.Config : error while loading resource (/etc/shibboleth/shibboleth2.xml): XML error(s) during parsing, check log for specifics
2013-03-04 13:15:27 FATAL Shibboleth.Config : caught exception while loading configuration: XML error(s) during parsing, check log for specifics
configuration is invalid, check console for specific problems 
```

在我的 shibboleth2.xml 中，我已经添加了 homeUrl。

```
<!-- The ApplicationDefaults element is where most of Shibboleth's SAML bits are defined. -->
<ApplicationDefaults id="default"
         policyId="default"
         entityID="https://somesite.com/shibboleth/default"
         homeUrl="https://somesite.com/"
                     REMOTE_USER="eppn persistent-id targeted-id"
         signing="false" encryption="false"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T09:34:20.527

从 <ApplicationDefaults /> 元素中删除属性“homeUrl”。

```
<ApplicationDefaults id="default"
     policyId="default"
     entityID="https://somesite.com/shibboleth/default"
                 REMOTE_USER="eppn persistent-id targeted-id"
     signing="false" encryption="false"> 
```

# python - 在 Python 中创建多个 CSV 工作表

> ID：15210173
> 
> 赞同：11
> 
> 时间：2013-03-04T20:08:06.537
> 
> 标签：python, csv

有没有办法在 Python 中以编程方式创建具有多个工作表的 CSV 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T20:09:57.363

多个 CSV 文件。每张纸一个 CSV 文件。

逗号分隔值文件是纯文本格式。它只能表示平面数据，例如表格（或“工作表”）

要存储多张工作表，您应该使用单独的 CSV 文件。您可以分别编写每一个并将它们单独导入/解析到它们的目的地。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-24T12:47:10.710

图书馆[`xlsxwriter`](https://xlsxwriter.readthedocs.io/index.html)就是你要找的。它可以制作具有多张工作表的工作簿。
查看教程和代码的链接。

PS我正在回答这个问题，因为这是我在搜索如何执行此操作时得到的第一个结果。希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T20:18:39.760

不确定您要如何处理多张 CSV 文件。让我详细说明我对此的想法。

1.  也许您想要一个包含不同 CSV 文件的文件夹。
2.  如果您“可以”使用 XML，那么您可能希望在大型 XML“工作簿”中包含 XML 工作表。

还没有看到多张csv。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-20T21:30:16.077

在导出单个工作表名称时，这对我来说是从 excel 到 CSV 的转换。

```
 xls = pd.read_excel/csv('file name.xls/csv', sheet_name =['1','2','3','4','5','6','7','8','9','10'])

    #list out the sheets  you want to export in the bracket above separated by commas and ' '

    for sheet_name, df in xls.items():
     df['sheets'] = sheet_name    
     df[['sheets']].to_csv(f'{sheet_name}.csv', header=None)
    export_csv = df.to_csv (r'Location you want to export to on your machine',
                            index = None, header=True) 
```

# vba - 使用 VBA 动态更新 powerpoint 中的文本

> ID：15210176
> 
> 赞同：1
> 
> 时间：2013-03-04T20:08:13.853
> 
> 标签：vba, ms-office, powerpoint

我有一份在 PowerPoint 中生成的报告，在许多图表下方，有文字告诉读者参考附录中的页面。我希望能够动态引用这些幻灯片。

例如，在图表下我可能有文本“请参阅第 54 页附录”，但我需要将 54 链接到幻灯片，这样如果我插入另一张幻灯片，它将显示 55。

这可以在VBA中做到吗？我不希望有人为我编写代码，我只是想在我花费数小时尝试这样做之前知道这是否合理。

*旁注：我觉得在这里问一个关于 MS Office 的问题很可怕，但是因为我相信它需要在 VBA 中实现（我不认为这个功能是默认内置的）我认为这是一个相关的问题。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T01:39:09.057

在这里问这个没必要感到可怕。

如何做到这一点：

在 PPT 中，形状、幻灯片甚至演示文稿本身都可以有关联的标签集合；命名字符串值。例如，假设在 oSh 中引用了形状，您可以执行以下操作：

```
oSh.Tags.Add "AssociatedSlideId", "293" 
```

在这种情况下，您可以将此标签应用于您的图表；293 将是您要引用的幻灯片的 SlideID。每张幻灯片在创建时都有一个唯一的 SlideID；当您移动幻灯片/添加/删除幻灯片时，SlideID 不会改变。

要从形状中读取标签：

```
Debug.Print oSh.Tags("AssociatedSlideId") 
```

在这种情况下，这将返回“293”。将其提供给 FindBySlideID 以获取幻灯片的 SlideIndex（即幻灯片在演示文稿中的序号位置）。或者，如果您想要将出现在数字占位符中的幻灯片编号（通常，但并不总是与幻灯片索引相同），请询问 SlideNumber。

```
Debug.Print ActivePresentation.Slides.FindBySlideID(clng("293")).SlideIndex 
```

您还可以标记要用于保存引用的文本框或其他形状，然后按照以下方式编写函数：

```
Function ShapeTaggedWith(oSl as Slide, sTagName as String, sTagValue as String) as Shape 
```

这将遍历幻灯片 oSl 上的形状，寻找带有名为 sTagName, value = sTagValue 的标签的形状，如果找到，则将其返回给调用者。

现在，您可以找到指定为图表标题的形状，让我们调用它，并更改其文本以匹配图表应该引用的幻灯片的 SlideIndex（或 SlideNumber）。

希望这一切都还算清楚；如果没有，这就是 StackOverflow 大神给我们评论的原因。

# python - python套接字编程OSError：[WinError 10038]尝试对不是套接字的东西进行操作

> ID：15210178
> 
> 赞同：10
> 
> 时间：2013-03-04T20:08:21.960
> 
> 标签：python, sockets

我正在处理这段代码

```
from socket import *
HOST = 'localhost'
PORT = 21567
BUFSIZ = 1024
ADDR = (HOST, PORT)
serversock = socket(AF_INET, SOCK_STREAM)
serversock.bind(ADDR)
serversock.listen(2)

while 1:
    print ("waiting on connection")
    clientsock, addr = serversock.accept()
    print ('connected from:', addr)
    while 1:
        data = clientsock.recv(1024).decode()
        if not data: break 
        clientsock.send(data.encode())
        clientsock.close()

serversock.close() 
```

我收到此错误：

```
OSError: [WinError 10038] an operation was attempted on something that is not a socket 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T20:12:41.223

仅读取部分数据后，您正在关闭客户端。

```
clientsock.close() 
```

是在错误的缩进级别。将其向左移动一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T14:51:05.903

问题在于close()。连接关闭后，您需要再次初始化连接

在while循环中添加这一行

```
serversock = socket(AF_INET, SOCK_STREAM) 
```

# javascript - 创建带有文本和图像输入区域的 javascript 输入框

> ID：15210182
> 
> 赞同：0
> 
> 时间：2013-03-04T20:08:29.203
> 
> 标签：javascript, image, input, drag-and-drop, inputbox

我想创建一个复合输入框，我可以在其中拖放图像并使用 javascript 编辑文本。有什么例子吗？

例如，想象一段可以编辑的文本，该段落上有图像框，我可以在其中拖放图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:10:53.707

您可以将其用于图像拖放...

[HTML5 拖放](http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

# html - 如何将表格列宽设置为最长值，不包括标题

> ID：15210183
> 
> 赞同：1
> 
> 时间：2013-03-04T20:08:32.487
> 
> 标签：html, css

我有一些带有 HTML 数据的表格。我试图弄清楚如何动态设置列宽（最好使用 CSS）以适应最长的值，但我希望列标题是自动换行的，因为相比之下它们相当长。

例如我有

```
Percentage of Items purchased
40%
60%
30% 
```

我希望列宽适合 40%、60%、30% 的值，并用“购买的项目百分比”字包起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:10:05.883

在您的样式表中添加：

`white-space:nowrap;`给你的`TD`，但不是给你的`TH`。

# javascript - Backbone.js 是否可以使用 json 文件作为只读数据存储？

> ID：15210184
> 
> 赞同：2
> 
> 时间：2013-03-04T20:08:36.040
> 
> 标签：javascript, backbone.js, url-scheme, local-files

我正在做一个项目，我们将（希望）使用backbone.js 为我们的网络应用程序提供动力。需要注意的是，它将在 Web 服务器上（即使用`http://`类型 URL）或从本地文件系统（即使用`file:///`URL）运行。

使模型对象适应从本地文件读取文件的最简单方法是什么（即`file:///...`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:39:00.100

我在书中遇到了类似的问题：我想配置持久性以使用 localStorage，但保持模型/集合代码与使用服务器时相同。

我使用了 Backbbone.localStorage 适配器并编写了一个 mixin 来配置实体上的存储（请参阅[https://github.com/davidsulc/marionette-gentle-introduction/commit/3b441c9355ac49348eebb3eca27c06ec79b9f64d](https://github.com/davidsulc/marionette-gentle-introduction/commit/3b441c9355ac49348eebb3eca27c06ec79b9f64d)）然后，在代码中我可以简单地执行 mixin配置该模型/集合以使用 localStorage 的函数（参见[https://github.com/davidsulc/marionette-gentle-introduction/blob/bcb16d45876c321e071624319bf87c8a9cf1d656/assets/js/entities/contact.js#L6](https://github.com/davidsulc/marionette-gentle-introduction/blob/bcb16d45876c321e071624319bf87c8a9cf1d656/assets/js/entities/contact.js#L6)的第 6 行）

[您可以在https://github.com/davidsulc/marionette-gentle-introduction](https://github.com/davidsulc/marionette-gentle-introduction)获得使用此技术的代码，该书可在[https://leanpub.com/marionette-gentle-introduction获得](https://leanpub.com/marionette-gentle-introduction)

# asp.net-mvc - 初始 API 调用期间的 ASP.NET MVC “正在加载...” gif

> ID：15210186
> 
> 赞同：0
> 
> 时间：2013-03-04T20:08:42.047
> 
> 标签：asp.net-mvc

我正在创建一个 ASP.NET MVC 4 Web 应用程序，它根据查询字符串中的 id 号显示不同的数据。它旨在根据用户居住的县、他们从事的工作类型等为用户提供特定于他们的安全信息。他们不使用用户名登录，他们只需点击电子邮件中的链接，例如：[http://www.mysite.com?id=123456](http://www.mysite.com?id=123456)

在`Session_Start`of 中`global.asax`，我从查询字符串中提取他们的 id 并通过 API 调用搜索匹配的记录。这将返回数据集中的一堆字段，我将其转换为数据表。然后，我使用 foreach 循环遍历 DataTable 并使用`Session.Add(name, value)`它创建将插入视图的会话变量。

API 调用最多可能需要 10 秒才能通过，所以我想在 API 调用完成之前放置某种“正在加载...” gif 动画。一旦初始 API 调用完成，我就不必再进行任何 API 调用了。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:37:24.287

如果您需要加载动画，那么您需要一个呈现的 HTML 页面。这意味着通过 AJAX 进行 API 调用。您仍然可以将调用封装在您自己的视图中，只需使用 AJAX 调用您的视图。使用 JavaScript 启动调用后，添加加载动画就很简单了。如果您不使用 AJAX，您将无能为力，因为在视图完成处理之前服务器不会返回响应。

# c - getopt() 并检测到丢失的“选项”

> ID：15210188
> 
> 赞同：0
> 
> 时间：2013-03-04T20:08:45.987
> 
> 标签：c, getopt

当使用`getopt`或`getopt_long`解析一组必需选项的命令行时，如何确定缺少或未指定必需的“选项”？我搜索了所有文档和手册页，但找不到明确的答案。

在运行缺少 -b 选项的简单测试存根时，`getopt_long`始终返回 -1、`opterr`为 1 并且`optarg`为 null - 就像对所有必需选项的正常/成功解析一样。我的 short_options = "n:t:b:"。

# php - jQuery 加载 div 然后在单击链接时传递变量

> ID：15210194
> 
> 赞同：1
> 
> 时间：2013-03-04T20:08:51.720
> 
> 标签：php, jquery

我正在尝试`div1`使用 jquery 在其中加载 php。到目前为止，我在下面的代码可以很好地加载初始`div1`.

```
<script type="text/javascript">
$(document).ready(function(){
$("#div1").load('load.php');
});
</script>

<div id="div1"></div> 
```

在里面`load.php`我会有这样的链接

```
<a href="load.php?id=123456">Link 1</a>
<a href="load.php?id=1234567">Link 2</a>
<a href="load.php?id=12345678">Link 3</a> 
```

我想要做的是在`div1`加载的页面上，当链接加载到里面时，`div1`我希望能够点击链接，它会在`?id=`里面传递 var`div1`并重新加载`load.php?id= var here`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:14:38.630

```
<script type="text/javascript">
$(document).ready(function(){
    $("#div1").load('load.php');
    $(document).on('click', 'a', function(e) {
        e.preventDefault();
        $("#div1").load($(this).attr('href'));
    });
});
</script> 
```

添加上述内容可能是最简单的方法。它将获取任何锚元素并`div1`在单击时将其加载到其中。`e.preventDefault()`停止链接加载新页面。

如果您不想直接进入该 div 中的其他锚元素，则需要向锚元素添加一个类，然后仅在单击处理程序中选择该类（例如`a.class`，而不是`'a'`）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T20:13:33.003

```
$('#div1').on('click', 'a', function(e){
    e.preventDefault();
    var new_id = $(this).attr('href');

    $('#div1').load(new_id);
}); 
```

这将绑定加载到的链接`#div1`，`.on()`即使内容是动态的，它仍然可以工作。

然后它抓取 href 并将其加载到`#div1`.

# mongodb - mongodb组聚合管道包括objectId（_id）

> ID：15210195
> 
> 赞同：0
> 
> 时间：2013-03-04T20:08:55.910
> 
> 标签：mongodb, aggregation-framework

我在下面的 mongodb 中有一个管道。

```
pipeline.push({ $project: { 'name1': 1, isGroup: { $cond: [{ $eq: ['$name2', '']}, false, true]}, onlyGroup: 1, 'objecttype':1 } })
pipeline.push({ $group: { _id:  { 'name1': '$name1', isGroup: '$isGroup', onlyGroup: '$onlyGroup', 'objecttype': '$objecttype'} } })
pipeline.push({ $sort: { _id: 1 } })
pipeline.push({ $project: {  'name1': '$_id.name1', isGroup: '$_id.isGroup', 'objecttype': '$_id.objecttype',  onlyGroup: '$_id.onlyGroup' } })
break; 
```

可以看到，输出是name1，isGroup，objecttype，onlyGroup。

我也想将 _id 添加为输出之一。我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:45:44.400

_id 包括在内，但必须将其带入组内，否则在组后，未包含在组中的所有内容都将被排除。

所以这就是为我解决这个问题的原因。由于我还必须获得其他一些领域，所以下面的解决方案非常有效。

pipeline.push({ $project: { 'name1': 1, isGroup: { $cond: [{ $eq: ['$name2', '']}, false, true]}, onlyGroup: 1, 'objecttype' :1, idd:'$_id' } })

pipeline.push({ $group: { _id: { 'name1': '$name1', isGroup: '$isGroup', onlyGroup: '$onlyGroup' }, objecttype: { $push: '$objecttype' }, idd: { $push: '$idd' } } })

# linux - linux 如果脚本存在于 mnt 中执行脚本

> ID：15210198
> 
> 赞同：2
> 
> 时间：2013-03-04T20:09:02.167
> 
> 标签：linux, bash

我正在尝试创建一个脚本来检查 /mnt/sda bc d... 是否存在 shell 脚本。当它找到脚本时，它需要执行它。这是我到目前为止所拥有的：

```
for x in a1 a2 b1 b2 c1 c2 d1 d2 e1 e2 f1 f2; do /mnt/sd$x/1_drive_check.sh; done 
```

这没关系，但它实际上会尝试在每个挂载点运行脚本。通常我不会在意，但我需要在控制台中显示最少量的信息。

我知道检查文件是否存在的命令。

```
if [ -f 1_drive_check.sh ] then
echo 1_drive_check.sh exists!
fi 
```

我不知道怎么做的就是将两者合并在一起，看看1_drive_check.sh是否存在于/sda1或sda2或sdb1等中，然后执行它。我厌倦了热胶枪，但我烧伤了自己。

仅供参考，我在这方面真的很陌生，因为我习惯于定期使用 VBS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:16:54.383

除了`for ...; do if [ ... ]; then /mnt/sd$x/1_drive_check.sh; fi;done`解决方案，您还可以：

```
find /mnt/ -maxdepth 2 -name '1_drive_check.sh' -executable -exec {} \; 
```

... 保存手动添加驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:17:54.437

只是一个想法...

```
for script in /mnt/sd[a-f]{1,2}/1_drive_check.sh
do
    $script
done 
```

Only finds the scripts that are actually there.

# ajax - 有没有办法在 DropDownList 更改事件上使用 AJAX 来动态修改页面上的部分视图？

> ID：15210202
> 
> 赞同：1
> 
> 时间：2013-03-04T20:09:24.613
> 
> 标签：ajax, asp.net-mvc, partial-views, onchange

有没有办法在 DropDownList 更改事件上使用 AJAX 来动态修改页面上的部分视图？

我的主页有一个 DropDownList (DropDownListFor)**和**一个仅包含“项目”列表的部分视图。此部分视图中显示的项目取决于在 DropDownList 中选择的项目。DropDownList 项目与部分视图中的项目之间存在一对多的关系。因此，当用户更改 DropDownList 的值时，局部视图中的内容将动态更改以反映在 DropDownList 中选择的项目。

这是我的下拉列表：

```
<div data-role="fieldcontain">
    Choose Capsule:<br />
    @Html.DropDownListFor(x => x.CapsuleFK, new SelectList(Model.Capsules, "pk", "name", "pk"), new { id = "ddlCapsules" })
    <br />
</div> 
```

这是我在同一页面上的部分视图声明：

```
<div data-role="fieldcontain">
    @Html.Partial("_FillerPartial", Model.Fillers)
</div> 
```

我对 Ajax 不是很熟悉，但是看看其他示例，我的 Ajax 如下所示：

```
$(document).ready(function () {
    $('#ddlCapsules').change(function () {
        // make ajax call to modify the filler list partial view

        var selection = $('#ddlCapsules').val();
        var dataToSend = { cappk: selection };

        $.ajax({
            url: 'Process/GetFillersByCapsule',
            data: { cappk: dataToSend },
            success: function (data) {
                alert("server returned: " + data);
            }
        });
    });
}); 
```

最后，这是正在发生的事情的屏幕截图。通过更改“选择胶囊”下拉列表，我希望填充列表动态更新：

![在此处输入图像描述](../Images/9784d579f5cdd2d25a53931e5ff74748.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:33:52.053

您可以使用 ajax 将下拉列表作为部分视图从控制器加载。

控制器代码：

```
 [HttpGet]
    public virtual ActionResult GetFillersByCapsule(string cappk)
    {
        var model = //Method to get capsules by pk, this returns a ViewModel that is used to render the filtered list. 
        return PartialView("PartialViewName", model);
    } 
```

主视图html：

```
<div id="filteredList">
</div > 
```

局部视图

```
@model IEnumerable<MyCapsuleModel>
foreach (var x in Model)
{
     //Render the appropriate filtered list html.
} 
```

您可以使用 ajax 加载过滤后的列表：

```
$('#ddlCapsules').change(function () {
    // make ajax call to modify the filler list partial view

    var selection = $('#ddlCapsules').val();
    var dataToSend = { cappk: selection };

    $.ajax({
        url: 'Process/GetFillersByCapsule',
        data: { cappk: dataToSend },
        success: function (data) {

            $("#filteredList").empty();
            $("#filteredList").html(data);
        }
    });
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T22:01:33.250

您本身无法更新部分，因为如果不重新加载页面，部分将永远不会再次呈现。一旦您收到 HTML，ASP 就完成了，此时您只能靠自己了。

当然，您可以做的是切换出特定 div 的内容或使用 JavaScript 的任何内容。你的例子特别尖叫淘汰赛，所以这就是我推荐使用的。

更改您的 HTML 以将数据绑定添加到包含的 div：

```
<div data-role="fieldcontain" data-bind="foreach: filler">
    <button data-bind="text: name"></button>
</div> 
```

还有你的下拉列表：

```
@Html.DropDownListFor(x => x.CapsuleFK, new SelectList(Model.Capsules, "pk", "name", "pk"), new { id = "ddlCapsules", data_bind = "event: { change: updateFillers }" }) 
```

然后，一些 JavaScript：

```
var FillersViewModel = function () {
    var self = this;

    self.fillers = ko.observableArray([]);

    self.updateFillers = function () {
        var selection = $('#ddlCapsules').val();
        var dataToSend = { cappk: selection };

        $.ajax({
            url: 'Process/GetFillersByCapsule',
            data: { cappk: dataToSend },
            success: function (data) {
                self.fillers(data.fillers) // where `fillers` is an array
            }
        });
    }
}

var viewModel = new FillersViewModel();
ko.applyBindings(viewModel); 
```

这是一个非常简单的示例，您需要做更多的工作才能使其在您的场景中完成您需要它做的所有事情，但总体思路是每次下拉列表更改时，Knockout 都会调用您的`updateFillers`方法，它将执行 AJAX 并将新数据放入`fillers`可观察数组中。Knockout 会自动跟踪对此数组的更改（因此是“可观察”部分），因此会自动触发对依赖它的页面的任何部分的更新。在这种情况下，这是包含按钮的 div。`foreach`绑定将为数组的每个成员重复内部的 HTML 。我在这里使用了一个简单的按钮元素来进行说明，但您将包含创建特定按钮（如界面）所需的完整 HTML。这`text`绑定将`name`在开始和结束标记之间放置 in 的内容。有关您拥有的所有绑定选项，请参阅：[http](http://knockoutjs.com/documentation/introduction.html) ://knockoutjs.com/documentation/introduction.html 。

你可以用这个做更多的事情。您可以实现模板，而不是硬编码您的 HTML 以在`foreach`. 而且，您可以使用局部视图来控制此模板的 HTML。重要的部分是 Knockout 可以为您生成所有这些重复的 HTML，这就是我推荐使用它的原因。

希望这足以让你开始。

# python - 如何将参数从一个视图传递到另一个视图

> ID：15210203
> 
> 赞同：0
> 
> 时间：2013-03-04T20:09:29.387
> 
> 标签：python, routing, pyramid

我无法让它工作：我导航到我想要的页面，但我对看起来的变量做错了。

**视图.py**：

```
@view_config(http_cache=1,route_name='hoofdpagina', renderer='templates/hoofdpagina.pt')
def hoofdpagina(request):
page = DBSession.query(MyModel) #.filter_by(id='1').all()

if 'form.submitted' in request.params:
    name= request.params['name']
    page2=Page(name)
    DBSession.add(page2)
    return HTTPFound(location=request.route_url('view_page',pagename=name))
return dict(page=page) 

@view_config(route_name='diagnose', renderer='templates/diagnose.pt')
def diagnose(request):
    return request
    kak = ['test1','test2','test3t']
    content = {"test1","test2","test3"}
    return {'content' :content, 'test' :kak} 
```

**hoofdpagina.pt**：

```
<form class="span12" action="/diagnose" method="POST"> 
    <table class="table table-hover">
        <thead class="header">
            <tr>
                <th>D Nr.</th>
                <th>Datum</th>
                <th>Patient</th>
                <th>Prior</th>                              
            </tr>
        </thead>
        <tr tal:repeat="Page page" >

                <td tal:content="Page.dosiernummer"></td>
                <td tal:content="Page.dosiernummer"></td>                                
                <td tal:content="Page.datum"></td>  
                <td tal:content="Page.naamPatient"></td> 
                <td tal:content="Page.prioriteit"></td>    
        </tr>
    </table>
</form> 

<form action="/diagnose" method="post">
    <input type="submit" value="Save" name="form.submitted" ></input>
    <label name="name">et werkt slet</label>
</form> 
```

我可以在我的表格中显示页面的所有变量。但是当我按下提交按钮时，我无法将“名称”标签的内容发送到我的诊断页面。我不知道如何显示价值。

**ps**：问题基于这篇文章：[Pyramid app: How can I pass values into my request.route_url?](https://stackoverflow.com/questions/14634444/pyramid-app-how-can-i-pass-values-into-my-request-route-url/15210134#15210134)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:22:37.077

而不是你需要某种输入：

```
<input type="text" name="name" value="et werkt slet"> 
```

或者如果您不想显示它，请键入 =“隐藏”。

我还在学习 Pyramid，但我也想知道从你的代码中提交操作是否会发布到 def hoofdpagina。我认为您可能必须将 POST 处理移至：

```
@view_config(route_name='diagnose', renderer='templates/diagnose.pt')
def diagnose(request):
if 'form.submitted' in request.params:
    name= request.params['name']
    page2=Page(name)
    DBSession.add(page2)
    return HTTPFound(location=request.route_url('view_page',pagename=name)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:32:30.333

在 init.py 中，您必须添加 url 调度 (config.add_route)。您可以从 url 中获取数据并像这样传递到另一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:10:24.963

一个解决方案正在使用这样的 url 调度：

**_*初始化*_.py：**

```
config.add_route('diagnose1', '/diagnose1/{dosierid}') 
```

**视图.py**

```
@view_config(route_name='diagnose1', renderer='templates/diagnose.pt')
def diagnose1(request):
    tabeldata=''
    dosierid = request.matchdict['dosierid'] 
```

现在你有你的 id 从一个视图到另一个视图。

# asp.net-mvc-3 - ASP.net MVC 3 基于模型逻辑自定义 Html.ValidationMessageFor

> ID：15210204
> 
> 赞同：0
> 
> 时间：2013-03-04T20:09:31.560
> 
> 标签：asp.net-mvc-3

我一直在阅读与此类似的几个问题，处理自定义`@Html.ValidationMessageFor`但没有一个涉及我想要做的事情。

我正在处理的当前表单正在编辑数据库中的用户。在此表单中，我需要检查输入的电子邮件是否尚未用于其他用户。我有逻辑，但是如果他们使用已在使用的电子邮件，我没有在页面上显示的自定义验证消息。

控制器代码：

```
 [HttpPost]
    public ActionResult EditUser(int id, EditUserModel model)
    {
        if (ModelState.IsValid)
        {
            tbl_Users editedUser = tblUsers.EditUser(id, model, HttpContext.User.Identity.Name);
            tblHSDA.EditHSDAS(id, editedUser, model.hsdas, HttpContext.User.Identity.Name);
            return Redirect("~/UserManage/ListActiveUsers");
        }

        if (tblUsers.ValidateEmailInUse(model.Email))
        {
            // change validation message and return View(model);
        }

        tbl_Users tbl_users = db.tbl_Users.SingleOrDefault(item => item.User_id == id);

        ViewBag.hsdas = tblHSDA.GetHSDANameAlpha();
        ViewBag.Username = tbl_users.Username;

        return View(model);
    } 
```

这是在控制器级别完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:25:24.103

根据您的逻辑，如果用户正确填写表格并提供重复的电子邮件，则电子邮件检查部分将永远不会执行

你能做的就是改变`ActionResult`喜欢

```
 [HttpPost]
    public ActionResult EditUser(int id, EditUserModel model)
    {
        if (ModelState.IsValid)
        {
            if(!CheckEmail(model.Email)){
            tbl_Users editedUser = tblUsers.EditUser(id, model,  HttpContext.User.Identity.Name);

            tblHSDA.EditHSDAS(id, editedUser, model.hsdas, HttpContext.User.Identity.Name);
            return Redirect("~/UserManage/ListActiveUsers");
           }else{
             ModelState.AddModelError("Email","Email provided is already in use...")
         }
        }       

        tbl_Users tbl_users = db.tbl_Users.SingleOrDefault(item => item.User_id == id);
        ViewBag.hsdas = tblHSDA.GetHSDANameAlpha();
        ViewBag.Username = tbl_users.Username;
        return View(model);
    }

private bool CheckEmail(string email){
 //email check logic
 // return true or false 
} 
```

也看看[http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

# python - 我将如何创建一个可以用 x 和 ay 或以度为单位的角度初始化的 2d 矢量对象？

> ID：15210206
> 
> 赞同：1
> 
> 时间：2013-03-04T20:09:39.953
> 
> 标签：python, vector

我希望能够在 python 中使用角度或 x 和 ay 初始化我的 Vector 对象。我知道我可以使用计算出角度，`math.atan2(x, y)`并且可以使用计算出角度`x`和`y`角度，但我不知道如何使这些输入成为可选。

我希望能够致电：

```
Vector(x, y, speed) 
```

或者：

```
Vector(angle, speed) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:12:12.450

```
class Vector(object):
    """
    >>> Vector(angle, speed)  # initialize with angle and speed
    >>> Vector(x, y, speed)   # or initialize with x, y, and speed
    """
    def __init__(first, second, third=None):
        if third is None:
            angle, speed = first, second
        else:
            x, y, speed = first, second, third 
```

如果使用两个参数调用，`third`将`None`默认为。所以前两个参数将被分配给`angle`和`speed`。否则，参数将分配给`x`,`y`和`speed`。

（编辑：添加了一个文档字符串，因此`Vector`' 的调用签名很清晰。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:14:50.323

我认为最 Pythonic 的方法是添加一个[类方法](http://docs.python.org/2/library/functions.html#classmethod)：

```
class Vector:
    def __init__(x, y, speed):
        ...

    @classmethod
    def from_angle(cls, angle, speed):
        # figure out x and y from angle
        return cls(x, y, speed) 
```

并调用`Vector(x, y, speed)`或`Vector.from_angle(angle, speed)`。

各种变体，如

```
def __init__(first, second, third=None)
   ... 
```

或者

```
def __init__(*args):
   ... 
```

失去太多清晰度。使用您的代码的人（包括未来的您）将无法浏览方法签名并查看他们的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:17:56.960

作为替代方案，我会使用类方法来完成，因此构造函数只会将字段作为参数。

```
class Vector(object):
    __slots__ = ['x', 'y']
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def __repr__(self):
        return 'Vector({}, {})'.format(self.x, self.y)

    @classmethod
    def polarVector(cls, angle, mag):
        return cls(math.cos(angle) * mag, math.sin(angle) * mag)

    @classmethod
    def magVector(cls, x, y, mag):
        a = mag / math.sqrt(x**2 + y**2)
        return cls(x * a, y * a) 
```

## 可选参数的问题

可选参数的主要问题是代码清晰。

```
a = Vector(1, 2)             # Is 1 "angle" or "x"?
a = Vector(3, 4, 10)         # Huh?

# These functions do different things,
# so it makes sense that they have different names.
a = Vector.polarVector(1, 2)
a = Vector.magVector(3, 4, 10) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:18:28.333

unutbu 和 Pavel Anossov 的两个答案都非常好。

我个人更喜欢将坐标作为元组传递（因为它们毕竟是一个向量并且属于一起）。因此，您将始终有两个参数：

```
#! /usr/bin/python3.2

import math

class Vector:
    def __init__ (self, direction, speed):
        self.speed = speed
        try: self.angle = math.atan2 (direction [0], direction [1] )
        except: self.angle = direction

v1 = Vector (math.pi / 4, 100)
print (v1.angle)

v2 = Vector ( (1, 1), 100)
print (v2.angle) 
```

# file - Cakephp 2.3.x 发送文件并强制下载 mp4 文件

> ID：15210211
> 
> 赞同：8
> 
> 时间：2013-03-04T20:09:57.383
> 
> 标签：file, cakephp, download

我正在使用 cakephp 2.3.1

我想根据[http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file强制下载一个 mp4 文件](http://book.cakephp.org/2.0/en/controllers/request-response.html#cake-response-file)

在我的“视图”中，我有以下代码可以正确搜索文件名，找到文件名，并显示下载链接：

```
<?php $filename = APP . 'webroot/files/' . $dance['Dance']['id'] . '.mp4'; 
if (file_exists($filename)) {
    echo $this->Html->link('DOWNLOAD', array('controller' => 'dances', 'action' => 'sendFile', $dance['Dance']['id'])); 
    } else {
    echo 'Coming soon: available April 16th';
    }
?> 
```

当用户单击链接时，我想强制下载 mp4 文件。在我的控制器中，我有以下不起作用的代码：

```
public function sendFile($id) {
    $file = $this->Attachment->getFile($id); //Note: I do not understand the 'Attachment' and the 'getFile($id)'
    $this->response->file($file['webroot/files/'], array('download' => true, 'name' => 'Dance'));
    //Return reponse object to prevent controller from trying to render a view
    return $this->response;
} 
```

我不明白“附件”和“getFile()”

我收到以下错误：错误：调用非对象上的成员函数 getFile()

我做错了什么，是否有任何其他文档可以让我更好地理解这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T21:58:55.840

您不理解的那行只是示例的一部分 - 它假设应用程序有一个名为的模型`Attachment`，并且它有一个名为`getFile`. 由于您没有`Attachment`模型（或者至少它对控制器不可见），您会收到“对非对象的成员函数的调用”错误。不过这并不重要：您需要担心的是提供完整的系统路径到`this->response->file()`. 在您的示例中，您可以通过将该行更改为：

```
$this->response->file(WWW_ROOT.'files/'. $id .'.mp4', array('download' => true, 'name' => 'Dance')); 
```

您可以摆脱这`$this->Attachment->getFile`条线，因为它与您的情况无关。

让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T11:50:08.800

```
public function downloadfile($id= null) {        
  $this->response->file(APP.'webroot\files\syllabus'.DS.$id,array('download'=> true, 'name'=>'Syllubus'));
  return $this->response;     
}

<?php echo $this->Html->link('Syllabus', 
  array('controller' => 'coursesubjects',
    'action'=>'downloadfile',
    $courseSubject['CourseSubject']['subject_syllabus']));
?> 
```

# database - 为运输地点制作数据模型

> ID：15210213
> 
> 赞同：2
> 
> 时间：2013-03-04T20:10:08.637
> 
> 标签：database, google-maps, gps, datamodel

我正在制作这个使用 ebay 之类的概念的网络应用程序。从当地商店取货并交付。问题是他们有交付圈，并且交付到特定区域。所以我被困在如何对数据建模上。这就是我想要的，但它似乎并不正确。

```
AreaCodes(**areaID**, areaName, PincodeList<>)
Delivers(vendorID, AreaID) 
```

有没有更好，更详细的方法来做到这一点。因为我认为使用 PIN 码来划分界限确实是一种非常模糊的方式，因为供应商通常是当地商店，他们可能有自己的方式来确定送货范围。

任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T11:55:05.897

```
DeliveryCircle (id, schedule, ...)
DeliveryArea (id, name, ......)
AreaPinCode(id, deliveryAreaId name, ...)
交付（devliveryCircleId，itemDetails，vendorId，areaPinCodeId，...）

```

将交付定位到 pincode 可能会奏效。

# javascript - 国家字符 - 从 cookie 保存和解析 ASP.NET MVC + JS

> ID：15210214
> 
> 赞同：0
> 
> 时间：2013-03-04T20:10:16.007
> 
> 标签：javascript, jquery, asp.net-mvc

我想在 asp.net mvc 中将国家字符保存到 cookie 中，然后在 javascript 中显示它们，但是当我保存这句话时：“Příliš žluťouličký kůň úpěl úděsné tóny。” 我拿回了这个质量“PĹ™ĂliĹˇ ĹľluĹĄouliÄŤkĂ˝ kĹŻĹ ĂşpÄ›l ĂşdÄ›snĂ© tĂłny.”。我正在使用这种结构来保存数据：

```
HttpContext.Current.Response.Cookies.Add(new HttpCookie(string.Format("Flash.{0}", notification), message) { Path = "/" }); 
```

这是阅读：

```
function setFlashMessageFromCookie() {
    $.each(new Array('Success', 'Error', 'Warning', 'Info'), function (i, alert) {
        var cookie = $.cookie("Flash." + alert);

        if (cookie) {
            options.message = cookie;
            options.alert = alert;

            deleteFlashMessageCookie(alert);
            return;
        }
    });
} 
```

我怎么解决这个问题？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:12:43.953

我会在 base64 或 urlencoding 中对其进行编码，然后在 javascript 端对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:44:11.927

使用 asp.net，尝试寻找 System.Web.HttpUtility 来编码和解码数据。

```
HttpUtility.UrlEncode(data); // encoding
HttpUtility.UrlDecode(encodedData); // decoding 
```

或尝试：

```
function setCookie(name,value)
{
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString();
}

function getCookie(Name) {
    if (document.cookie.length > 0){ 
        offset = document.cookie.indexOf(Name +"=");

        if (offset != -1) { // if cookie exists 
          begin += Name.length+1; 
          end = document.cookie.indexOf(";", offset); 

          if (end == -1) 
              end = document.cookie.length;

          return unescape(document.cookie.substring(begin, end))
          } 
    }
} 
```

# android - AsyncTask 更新视图时出错

> ID：15210224
> 
> 赞同：0
> 
> 时间：2013-03-04T20:10:57.387
> 
> 标签：android, android-view

我不时测试我的应用程序错误：

```
03-04 20:57:01.929: E/TestApp(13673): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

从这样的问题：这是[什么异常？](https://stackoverflow.com/questions/8685575/whats-this-exception)，以及我自己的经验（我不时遇到与提到的问题相同的错误）我想问你们**我能做些什么来摆脱它？**

据我所知，我可以在连接到 View 的 AsyncTask 上做一些事情，所以我不知道为什么我会得到这个信息。

*这是我的代码：*

```
private MyDBAdapter mySQLiteAdapter;
    private ListView wordList;
private AsyncDBDownload asycn;
    private ProgressDialog dbUpdate;

    @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.smart_guide_ocr);

            asycn = new AsyncDBDownload();

            wordList = (ListView) findViewById(R.id.wordsList);
    //...
    }

    @Override
        protected void onResume() {
            super.onResume();
            asycn.execute(null);
        }

    private class AsyncDBDownload extends AsyncTask<String, Integer, String> {

            @Override
            protected String doInBackground(String... params) {
                try {
                    refreshList();//upload of contetn and set of adapter
                } catch (Exception ex) {
                    Log.e(TAG, ex.toString());
                }
                return null;
            }

            @Override
            protected void onPostExecute(String result) {
                dbUpdate.dismiss();
            }

            @Override
            protected void onPreExecute() {
                dbUpdate = ProgressDialog.show(TestAppActivity.this, "Wait",
                        "DB download");
            }
        }

    private void refreshList() {
            mySQLiteAdapter = new MyDBAdapter(TestAppActivity.this);
            mySQLiteAdapter.open();
            String[] columns = { MyDBAdapter.KEY_TRANSLATED, MyDBAdapter.KEY_WORD, MyDBAdapter.KEY_LANG,
                    MyDBAdapter.KEY_ID };
            Cursor contentRead = mySQLiteAdapter.getAllEntries(false, columns,
                    null, null, null, null, MyDBAdapter.KEY_ID, null);
            startManagingCursor(contentRead);
            Log.d(TAG, Integer.toString(contentRead.getCount()));
            RowItem adapterCursor = new RowItem(this, R.layout.save_word_row,
                    contentRead, columns, new int[] { R.id.translatedWord, R.id.orgWord, R.id.langInfo }, 0);

            wordList.setAdapter(adapterCursor);
            mySQLiteAdapter.close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:15:01.397

您不得`wordList.setAdapter(adapterCursor);`从方法内部调用`refresList`。这是“从非 UI 线程更改视图”的一种方式。

因此，请保存 adapterCursor 实例并在 onPostExecute 方法中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:15:50.307

您不能在后台任务中操作您的视图。在 AsyncTask 中完成所有需要的加载，将其传递回 onPostExecute 中的活动，然后设置适配器。在后台任务或服务中执行任何形式的 UI 操作都会引发此错误。

# java - Java 桌面应用程序 - 哪种技术？

> ID：15210225
> 
> 赞同：2
> 
> 时间：2013-03-04T20:11:04.900
> 
> 标签：java, desktop

我需要实现一个 Java 桌面应用程序！

您会推荐哪个框架：SWT、Swing、Java FX 或其他？

我要求该应用程序应在 Windows（x86 和 x64）、Linux（x86 和 x64）和 OSX 上运行。

先感谢您！

最好的问候， Jurica Krizanic

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T20:13:30.867

SWT 是 Eclipse 专有的。如果它可以在所有平台上运行，并且你很清楚，那么我想它会很好。

Swing 内置于 JDK 中，因此它与运行它的 JVM 一样可移植。

我不相信 JavaFX 已经流行起来，但我不做太多桌面开发。

我会先投票给 Swing，然后是 JavaFX，然后是 SWT。

# c# - 将 2 个列表与 LINQ 进行比较

> ID：15210230
> 
> 赞同：0
> 
> 时间：2013-03-04T20:11:40.567
> 
> 标签：c#, linq

我想从 dateRange 获取所有日期值，其中每个日期时间都是`DayOfWeek.Friday`,.. `Monday`,.. `Sunday`。

Intersect 不起作用，因为我猜这两个列表不是真正的交叉点......而且它们有不同的类型：DateTime vs. Enum.DayOfWeek

这只给了我所有星期五，但我也想要星期一，星期日......而不使用 OR 运算符。

```
var dateRange = _dateService.GetDateRange(startDate, endDate).Where(d => visibleWeekDays.Any(v => d.DayOfWeek == v)).ToList(); 
```

这些都是我必须以某种方式比较的列表：

```
IEnumerable<DateTime> dateRange = _dateService.GetDateRange(startDate, endDate);
IEnumerable<DayOfWeek> visibleWeekDays = new List<DayOfWeek>
{
    DayOfWeek.Friday,
    DayOfWeek.Monday,
    DayOfWeek.Sunday,
}; 
```

请不要将完整的 ling 查询写成解决方案。只需按照我必须用来解谜的随机顺序编写 linq 扩展方法。只是为了好玩和学习:)

**更新**

查看我的输入日期时间值和我想要的输出：

![在此处输入图像描述](../Images/44c5019eab9fc78dabd33aa89a0dde53.png)

但请注意，visibleWeekDays 列表不是静态的。此集合中可以有动态数量的值。因此我可以也不想使用 && 或 || 操作员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:20:47.413

当你发现自己处于想要一个交集的位置，但两个集合的类型不相同时，通常意味着你想要一个`Join`. 根据定义，交集是两个集合具有相同类型的连接，其中键选择器是“自身”，结果选择器只是随机选择其中一个项目（因为它们必须相等，所以交点的定义）。由于并非所有这些限制都适用于您，您需要做的就是走出更一般的`Join`.

作为一个演示，这里是一个`Intersect`使用 just的实现`Join`：

```
public static IEnumerable<T> Intersect<T>(this IEnumerable<T> first
    , IEnumerable<T> second, IEqualityComparer<T> comparer)
{
    return first.Join(second, x => x, x => x, (a, b) => a, comparer);
} 
```

`DayOfWeek`可以只选择自己作为键，然后您只需要一种从键选择器中获取对象的`DayOfWeek`方法。`DateTime`对于您的结果选择器，您只需要抓取`DateTime`对象；你不应该再需要这个`DayOfWeek`对象了。

每当您看到自己编写的 LINQ 解决方案中包含 a `Where(x => collection.Any(...`or`Contains`或其他搜索操作时，`Where`您应该使用 a`Join`代替，如果适用的话（您至少应该问自己是否应该使用 a `Join`）。

由于您不想要完整的实现，我将把它放在下面的剧透标签中。想自己写代码就别看了：

> ```
> 公共静态 IEnumerable FilterDaysOfWeek（IEnumerable 日期
>     , IEnumerable daysOfWeek)
> {
>      返回日期。加入（daysOfWeek
>          , 日期 => 日期.DayOfWeek
>          , 天 => 天
>          , (日期, 日期) => 日期);
>  }
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:15:50.223

如果将 DayOfWeek 转换为整数，则可以进行简单的 > 和 < 比较以获取有效值，因此只需 .Where 查询就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:17:40.920

如果您想获取与您的日期匹配的所有日期`GetDateRange`，可以使用以下 Linq 语句：`DayOfWeek``visibleWeekdays`

```
 _dateService.GetDateRange(startDate, endDate)
             .Where(d=> visibleWeekdays.Contains(d.DayOfWeek)); 
```

以下是对此的完整测试：

```
class Test
    {
        static void Main(string[] args)
        {
            var weekdays = new[] { DayOfWeek.Friday, DayOfWeek.Saturday, DayOfWeek.Sunday };
            var result = GetDateRange(DateTime.Today, DateTime.Today.AddDays(14))
                .Where(d => weekdays.Contains(d.DayOfWeek));
        }

        public static IEnumerable<DateTime> GetDateRange(DateTime start, DateTime end)
        {
            DateTime date = start;

            do
            {
                yield return date;
                date = date.AddDays(1);
            }
            while (date < end);
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:18:09.317

你可以`Contains`在`visibleWeekDays`你的`Where`子句中使用。

# python - 使用scrapy（Python）获取信息

> ID：15210231
> 
> 赞同：0
> 
> 时间：2013-03-04T20:11:42.033
> 
> 标签：python, web, web-scraping, scrapy

当我想捕获以下信息时：

```
<td>But<200g/M2</td>

name = fila.select('.//td[2]/text()').extract() 
```

我捕获以下内容

```
"But" 
```

显然与这些字符“< /”有冲突

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:21:07.430

这是一种使用 BeautifulSoup 的方法，以防您对不同的库有更多的运气：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup("""<html><head><title>StackOverflow-Question</title></head><body>
 <table>
  <tr>
   <td>Ifs</td>
   <td>Ands</td>
   <td>But<200g/M2</td>
  </tr>
 </table>
</body></html>""")

print soup.find_all('td')[2].get_text() 
```

这个的输出是：

```
But<200g/M2 
```

如果你想使用 XPath，你也可以使用[ElementTree XML API](http://docs.python.org/2/library/xml.etree.elementtree.html#xpath-support)。在这里，我使用 BeautifulSoup 获取 HTML 并将其转换为有效的 XML，以便我可以针对它运行 XPath 查询：

```
from bs4 import BeautifulSoup
import xml.etree.ElementTree as ET

html = """<html><head><title>StackOverflow-Question</title></head><body>
 <table>
  <tr>
   <td>Ifs / Ands / Or</td>
   <td>But<200g/M2</td>
  </tr>
 </table>
</body></html>"""

soup = BeautifulSoup(html)

root = ET.fromstring(soup.prettify())

print root.findall('.//td[2]')[0].text 
```

它的输出是相同的（注意 HTML 略有不同，这是因为 XPath 数组从 1 开始，而 Python 数组从 0 开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:51:07.623

用'\'转义特殊字符，所以：

```
But\<200g\/M2 
```

请注意，使用这些字符创建文件并不容易

# c# - 使用 plinq（多线程）向 WCF 操作发送多条消息

> ID：15210235
> 
> 赞同：1
> 
> 时间：2013-03-04T20:11:50.563
> 
> 标签：c#, performance, wcf, thread-safety, plinq

我不确定 WCF 代理类将如何处理通过 plinq 发送的请求。下面的代码片段看起来不错，还是看起来可能会导致跨多个线程的共享状态出现问题？（另外，我已经明白 using 块并不理想，这只是一个例子）

```
using (var proxy = new ServiceProxyOfSomeSort())
{
    _aBunchOfMessagesToSend.AsParallel()
        .WithDegreeOfParallelism(SomeDegree).ForAll(m =>
    {
        proxy.SomeOperation(m);
    }
} 
```

我应该为每个线程创建一次代理吗？可以跨线程共享代理吗？我不想创建比我需要的更多的代理，因为这是一个有点昂贵的操作。

## 编辑：

我真的没有服务器端服务的任何实现细节。从需求的角度来看，他们应该开发它以便多个客户端可以随时调用它（异步）。假设他们可以处理异步调用（这可能是一个很大的假设），我只是想弄清楚这是否是客户端可以接受的方法。它正在工作，我只是不知道这种方法是否有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:30:35.770

回答您关于代理的问题：您应该为每个线程创建一个新的。重用代理往往会工作一段时间，然后在数十次请求后抛出错误。正如他们喜欢说的那样，它的行为是不确定的。创建新代理的性能开销并不大（在创建第一个代理之后），所以应该没什么大不了的。

至于淹没服务器的多个并发请求的讨论：几个，甚至十几个，应该没问题 - 服务器可能处理尽可能多的请求，因为您的处理器可以创建线程。再说一次，来自单一来源的请求的突然涌入可能会被解释为拒绝服务攻击，所以你应该小心，特别是如果你对服务的控制是有限的。

# windows - 使用 Strawberry Perl 5.16.2.2 (64bit) 安装模块

> ID：15210239
> 
> 赞同：1
> 
> 时间：2013-03-04T20:12:10.957
> 
> 标签：windows, perl, module, strawberry-perl, installation

我以前使用activestate perl，但现在转移到strawberry perl，因为我想安装那些不太常用的包。但是，我在 Windows 7 上使用 Strawberry Perl 5.16.2.2（64 位）安装模块时遇到问题。

安装 Strawberry Perl 后，我验证了 perl 工作正常（参考 1）。然而，安装模块是另一回事。根据自述文件，

"2.通过[http://www.cpan.org/](http://www.cpan.org/)安装额外的 perl 模块（库）

```
 c:\> cpan Module::Name" 
```

但这就是我得到的：

```
 C:\>cpan
 Can't locate App/Cpan.pm in @INC (@INC contains: /usr/lib/perl5/5.8.8/msys /usr/
 lib/perl5/5.8.8 /usr/lib/perl5/site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8
 .8 /usr/lib/perl5/site_perl .) at /d/sberry/perl/bin/cpan line 6.
 BEGIN failed--compilation aborted at /d/sberry/perl/bin/cpan line 6. 
```

然后我尝试通过“perl -MCPAN -e shell”自己配置 CPAN，但这就是我得到的：

```
 Where is your gzip program? [/bin/gzip]
 Where is your tar program? [/bin/tar]
 Where is your unzip program? [/bin/unzip]
 Warning: make not found in PATH
 Where is your make program? [] 
```

但我测试过，我确实可以从 DOS 命令行运行“make”。

那么，任何人都可以在这里帮助我吗？

谢谢

参考 1：

C:>perl -V 我的perl5（revision 5 version 8 subversion 8）配置总结： Platform: osname=msys, osvers=1.0.11(0.4632), archname=msys uname='msys_nt-5.1 chomsky 1.0.11(0.4632) ) 2007-07-29 17:16 i686 未知 'config_args='-de' 提示=推荐，useposix=true，d_sigaction=define usethreads=undef use5005threads=undef useithreads=undef usemultiplicity=unde f useperlio=define d_sfio=undef uselargefiles=定义 useocks=undef use64bitint=undef use64bitall=undef uselongdouble=undef usemymalloc=y, bincompat5005=undef 编译器：cc='gcc', ccflags ='-DPERL_USE_SAFE_PUTENV -fnative-struct -fno-strict-aliasing -pipe', optimize= '-O3 -s -mcpu=pentium', cppflags='-DPERL_USE_SAFE_PUTENV -fnative-struct -fno-strict-aliasing -pipe'

```
ccversion='', gccversion='2.95.3-1', gccosandvers=''
intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize 
```

=4 alignbytes=8，prototype=define 链接器和库：ld='ld2'，ldflags ='-s' libpth=/usr/lib /lib libs= perllibs= libc=/usr/lib/libmsys-1.0.dll。 a, so=dll, useshrplib=true, libperl=libperl.a gnulibc_version='' 动态链接：dlsrc=dl_dlopen.xs, dlext=dll, d_dlsymun=undef, ccdlflags='-s' cccdlflags=' ', lddlflags=' -s'

此二进制文件的特征（来自 libperl）： 编译时选项：MYMALLOC PERL_USE_SAFE_PUTENV USE_LARGE_FILES USE_PERLIO 在 msys 下编译 2008 年 1 月 16 日 13:18:22 @INC: /usr/lib/perl5/5.8.8/msys /usr/lib /perl5/5.8.8 /usr/lib/perl5/site_perl/5.8.8/msys /usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:49:51.243

好吧，Strawberry Perl 确实正确设置了我的环境（PATH 等）。我做了一个删除并重新安装以确认它。

只是草莓 Perl 将其路径置于 PATH 设置的末尾，这给我带来了问题，因为我的 Git Extension+ 也有 Perl，并且在 PATH 中的草莓 Perl 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T11:55:56.393

你试过`cpnap`吗？（CPANPLUS）？

在我看来，它比用户更友好，并提供更多功能`cpan`

# mysql - 贝叶斯定理作为 sql 查询

> ID：15210243
> 
> 赞同：0
> 
> 时间：2013-03-04T20:12:17.550
> 
> 标签：mysql

我正在研究贝叶斯定理，但发现很难提出某个查询。我正在使用 MySQL，这是我的架构：

```
CREATE TABLE Event (
    EVENTID  NUMBER(4)  NOT NULL,
    EVENT    CHAR(20)   NOT NULL,
    PRIMARY KEY (EVENTID)
);

CREATE TABLE EVENTDETAIL (
    EVENTID   NUMBER(4)    NOT NULL,
    LOCATION  VARCHAR(20)  NOT NULL,
    PRICE     VARCHAR(3)   NOT NULL,
    DOE       DATE         NOT NULL,
    CATEGORY  VARCHAR(29)  NOT NULL,
    SCORE     VARCHAR(3)   NOT NULL,
    FOREIGN KEY (EVENTID) REFERENCES EVENT(EVENTID)
); 
```

我必须在`eventdetail`表中显示所有属性。例如，我必须显示 2013 年 3 月 18 日在格拉斯哥举行的事件的`NAME`所有`EVENTDETAIL`S，但是有两个不同的事件具有不同的分数，我必须创建一个查询以显示得分最高的结果。

这是我正在尝试的查询的两行结果

```
EVENT                LOCATION             DOE       PRI SCO
-------------------- -------------------- --------- --- ---
Wicked               Glasgow              18-MAR-13 20  20
Rangers FC           Glasgow              18-MAR-13 34  29 
```

我希望第二个排在首位，因为它的得分更高（`29`vs. `20`）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:05:08.080

要选择得分最高的行，请使用带有 LIMIT 表达式的 ORDER BY 子句：

```
SELECT *
FROM   EVENTDETAIL
WHERE  LOCATION = 'Glasgow'
   AND DOE = '2013-03-18'
ORDER BY SCORE DESC
LIMIT 1 
```

您的问题标题具有误导性，因为您已经有了分数。这个问题与计算贝叶斯模型分数没有任何关系。

# ember.js - Ember 数据：在数组的开头而不是在末尾插入新项目

> ID：15210249
> 
> 赞同：4
> 
> 时间：2013-03-04T20:12:38.317
> 
> 标签：ember.js, ember-data

在我的应用程序中，我正在显示消息的时间线。我们按时间降序从服务器检索它们，从最新到最旧。

```
3 - Howdy
2 - Greetings
1 - Mahalo 
```

我们的用户还可以添加一条新消息，默认情况下该消息会插入到队列的末尾，如下所示

```
3 - Howdy
2 - Greetings
1 - Mahalo
4 - I'm the new message, last as usual 
```

当我提交时，我希望新消息显示在顶部。我之前写了一个函数来反转项目数组，但这不适用于已经在数组中的项目。

```
4 - I'm the new message, first finally
3 - Howdy
2 - Greetings
1 - Mahalo 
```

在这种情况下，最好的方法是什么？理想的情况是 Ember Data 预先添加到内容数组而不是追加。还有其他可能更好的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T22:22:28.797

对于大多数涉及排序的场景，建议使用它[`Ember.SortableMixin`](http://emberjs.com/api/classes/Ember.SortableMixin.html)，它被烘焙到[`Ember.ArrayController`](http://emberjs.com/api/classes/Ember.ArrayController.html).

请参考 JSFiddle 中的这个概念示例：http: [//jsfiddle.net/schawaska/tbbAe/](http://jsfiddle.net/schawaska/tbbAe/)

在此示例中，模型有一个`DateTime`名为 的字段`when`，我将其用于过滤：

```
App.Greeting = DS.Model.extend({
    text: DS.attr('string'),
    when: DS.attr('date')                  
});

App.Greeting.FIXTURES = [
    {id: 1, text: 'First', when: '3/4/2013 2:44:52 PM'},
    {id: 2, text: 'Second', when: '3/4/2013 2:44:52 PM'},
    {id: 3, text: 'Third', when: '3/4/2013 2:44:52 PM'},
    {id: 4, text: 'Fourth', when: '3/4/2013 3:44:52 PM'}
]; 
```

在控制器中我唯一要做的就是设置属性的名称和排序方向：

```
App.SortingMixinController = Em.ArrayController.extend({
    sortProperties: ['when'],
    sortAscending: false
}); 
```

然后在我的 Handlebars 模板中，我可以`{{each}}`像往常一样使用助手。

*因为在这个示例中，除了Forth* （因为排序首先出现）之外，所有日期都是相同的，而且因为`SortableMixin`，这些值将通过另一个属性进行排序 - 我在这里假设 Id。

我在那个小提琴中采用的另一种方法是使用计算属性。我不太确定这种方法，因为它似乎消耗更多资源并且其中的代码`App.SortingPropertyController`值得一笑，但有点显示可能性。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-04T21:20:51.600

您可以使用基本的 JavaScript 将新项目放入数组中的给定位置吗？不确定这是基本的 ajax + js 对象还是完整的 ember-data 模型，但这适用于简单的 js 数组示例

```
 var arr = [];
 arr[0] = "Jani";
 arr[1] = "Hege";
 arr[2] = "Stale";
 arr[3] = "Kai Jim";
 arr[4] = "Borge";

 console.log(arr.join());
 arr.splice(2, 0, "Lene");
 console.log(arr.join()); 
```

上面代码的输出将是：

```
Jani,Hege,Stale,Kai Jim,Borge
Jani,Hege,Lene,Stale,Kai Jim, Borge 
```

# twitter-bootstrap - 清洁皮肤，没有任何“特殊效果”造型

> ID：15210250
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:12:38.833
> 
> 标签：twitter-bootstrap

我正在寻找一个免费的干净引导皮肤，没有任何 css3 渐变和数千行代码，我需要覆盖（如圆角、过渡、高级渐变背景等）

基本上，这样的东西会很棒，但它是商业的：[http ://codecanyon.net/item/modern-bootstrap-clean-skin/3227276](http://codecanyon.net/item/modern-bootstrap-clean-skin/3227276)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:45:18.757

[Flatstrap](http://littlesparkvt.com/flatstrap/)是 Bootstrap 的第三方版本，可以满足您的要求。

*“有时一个新项目不需要圆角或渐变。所以我们决定摆脱它们。”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:17:46.257

这里有大量皮肤：[https ://wrapbootstrap.com/](https://wrapbootstrap.com/)

（不是免费的，但如果 10-20 美元太多了，那你就错了！）

# c# - 在 C# 中运行 F# 代码 - （就像在 C# 中使用 Roslyn 的 C#）

> ID：15210254
> 
> 赞同：14
> 
> 时间：2013-03-04T20:12:47.160
> 
> 标签：c#, .net, f#, roslyn

有没有办法在 C# 中运行 F# 代码？我用 C# 编写了一个应用程序 - 我想为其提供执行 F#、读取 Record 对象、从 F# 枚举列表的能力。目前的解决方案是什么？我知道将来可能会有办法通过更新 Roslyn 来做到这一点。另外，好奇目前如何在 F# 中运行 F# 代码。有没有办法轻松做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T20:22:51.150

目前，您必须将 F# 设为库，然后从 C# 中调用它。由于 F# 只是 .NET，因此使用 F# 库（大部分）就像使用任何其他 C# 库一样。但是，您可能希望在这部分查看[FSharpX](https://github.com/fsharp/fsharpx)，因为它提供了一些实用程序来简化从 C# 调用 F#，反之亦然。

如果要从 C# 动态编译 F#，则需要使用[F# Power Pack](http://fsharppowerpack.codeplex.com/)中的 F# CodeDom 实现。这将让您使用 CodeDom 即时编译 F#，然后从 C# 执行它。

请注意，Roslyn 在这里没有帮助，即使它已发布，因为它不支持 F# 作为代码模型，仅支持 C# 和 VB.Net。有可能使用 Roslyn 从 F# 中操作和编译 C#，但反过来不行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-04T20:45:40.097

除了 Reed 已经提到的选项之外，还有另外两个基于使用 F# Interactive 的替代方案 - 您可以将其作为单独的进程运行，也可以使用开源版本来引用它并直接调用它（其中不过，这是相当具有挑战性的）。

总而言之，您有三个选择：

*   您可以`fsi.exe`在 F# Interactive 环境中启动进程并评估 F# 代码（通过标准输入将 F# 代码发送到进程）。MonoDevelop 的 F# 绑定是一个很好的例子（参见[InteractiveSession.fs](https://github.com/fsharp/fsharpbinding/blob/master/monodevelop/MonoDevelop.FSharpBinding/Services/InteractiveSession.fs)）。

    唯一的困难是两个进程之间的通信，但我认为这应该可以使用两者之间的 .NET 远程处理（或 WCF）通道来实现。您也可以只读取 F# Interactive 的标准输出，但这可能有点太简单了。

*   [您可以使用F# 编译器和工具](https://github.com/fsharp/fsharp)的开源版本来引用 F# 编译器的相关部分并调用它们（作为库）来评估 F# 代码。这将是最好的选择，它将为您提供与 Roslyn 的交互式 C# 几乎相同的选项。

    可悲的是，这不是一件容易的事——我一直在考虑这样做的想法，我取得了一些进展（我可以分享），但还没有完成。这个想法是获取`fsi.exe`（[here](https://github.com/fsharp/fsharp/tree/master/src/fsharp/fsi)）的源代码，删除所有UI并将其变成一个库。

*   使用 CodeDOM，您可以调用 F# 编译器 ( `fsc.exe`) 将 F# 代码编译为独立的应用程序（或库），动态加载并运行它。一个缺点是每次使用它都会启动一个新的编译器实例，所以它可能有点慢（取决于你的场景）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-28T15:00:00.160

自从提出问题以来，已经有了很多令人兴奋的发展:-)

您现在可以使用[F# Compiler Services](http://fsharp.github.io/FSharp.Compiler.Service/)项目非常轻松地做到这一点：

> F# 编译器服务包是从 F# 编译器源代码派生的组件，它公开了用于实现 F# 语言绑定的附加功能、基于编译器的附加工具或重构工具。该包还包括 F# 交互式服务，可用于将 F# 脚本嵌入到您的应用程序中。

# c# - windows窗体c#中的主/详细信息

> ID：15210264
> 
> 赞同：1
> 
> 时间：2013-03-04T20:13:39.467
> 
> 标签：c#, .net, winforms, master-detail, datarepeater

我在 Windows 窗体中有主详细信息“模式”。例如，我有一个账单（主），其中包含用户将添加的项目（详细信息）列表。但是，用户将手动添加项目。为了实现这一点，我使用了数据中继器，但它在滚动出现时引起了很多问题。我花了几个小时试图解决这个问题（当用户向下滚动时，转发器中组合框中的选定值会混合在一起）。

是否有任何其他人曾经出于相同目的使用过其他控件？我不认为 DataGridView 会为我提供同样的灵活性。构建一套完整的动态控件也是一个巨大的超载。

建议？

注意：我正在使用 .net 框架 4.5

# c# - 有没有办法在 SQL Server CE 中一次搜索所有表的字段？

> ID：15210267
> 
> 赞同：3
> 
> 时间：2013-03-04T20:13:46.913
> 
> 标签：c#, sql-server-ce, webmatrix

我希望在 WebMatrix (C#.net) 环境中（使用 SQL Server Compact）有一种方法可以在所有表​​和字段中搜索值。我有一堆（比如 100 个）表，通过 WebMatrix 连接，我正在尝试寻找一个包含我需要的一些信息的表。

我来过这里：http: [//blogs.thesitedoctor.co.uk/tim/2007/11/02/How+To+Search+Every+Table+And+Field+In+A+SQL+Server+Database.aspx](http://blogs.thesitedoctor.co.uk/tim/2007/11/02/How+To+Search+Every+Table+And+Field+In+A+SQL+Server+Database.aspx)

在这里，在stackoverflow上： [搜索所有表，所有列中的特定值SQL Server](https://stackoverflow.com/questions/1796506/search-all-tables-all-columns-for-a-specific-value-sql-server)

以及这里： [如何在 SQL Server 数据库中的任何位置找到值？](https://stackoverflow.com/questions/436351/how-do-i-find-a-value-anywhere-in-a-sql-server-database)

不幸的是，我没有看到如何在我当前的环境中实现这些方法，但我意识到可能没有真正的方法来做我所要求的。

是否有或没有办法做我所要求的，我至少想知道，所以我可以寻找另一种方法。

谢谢！

------------------在 SQL CE 中工作的 SQL 子查询-------------- ---------------

> SELECT * FROM UserProfile JOIN pages_UsersInRoles ON UserProfile.UserID = pages_UsersInRoles.UserId WHERE (RoleId <> 6) AND Email NOT IN (SELECT Email from UserProfile JOIN pages_UsersInRoles ON UserProfile.UserID = pages_UsersInRoles.UserId WHERE RoleId = 6) 通过电子邮件订购

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:53:03.567

我已经从 Syn123 的答案中改编了 SQL，这是我目前所拥有的：

```
SELECT c.TABLE_NAME, c.COLUMN_NAME
FROM   INFORMATION_SCHEMA.COLUMNS AS c 
       INNER JOIN INFORMATION_SCHEMA.Tables AS t ON t.TABLE_NAME = c.TABLE_NAME
WHERE  (c.DATA_TYPE IN ('char', 'nchar', 'varchar', 'nvarchar', 'text', 'ntext')) AND (t.TABLE_TYPE = 'TABLE') 
```

我遇到的问题是我无法使用 SQL CE 进行子查询，因此无法从结果集中进行选择。如果您有权访问 .MDF 数据库文件，则可以编写一个小型控制台应用程序，使用上述 SQL 返回的集合来搜索特定关键字。您需要一种创建动态 SQL 的方法，而 SQL CE 不支持 EXEC，因此这很困难，而且很可能靠它自己是不可能的。

编辑：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlServerCe;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SQLCESearch
{
    class Program
    {
        static void Main(string[] args)
        {
            SearchText("Nancy");
            Console.ReadKey();
        }

        private static void SearchText(string searchText)
        {
            string connStr = "Data Source=Northwind40.sdf;Persist Security Info=False;";
            DataTable dt = new DataTable();
            try
            {
                string sql = "SELECT c.TABLE_NAME, c.COLUMN_NAME ";
                sql += "FROM   INFORMATION_SCHEMA.COLUMNS AS c ";
                sql += "INNER JOIN INFORMATION_SCHEMA.Tables AS t ON t.TABLE_NAME = c.TABLE_NAME ";
                sql += "WHERE  (c.DATA_TYPE IN ('char', 'nchar', 'varchar', 'nvarchar', 'text', 'ntext')) AND (t.TABLE_TYPE = 'TABLE') ";

                SqlCeDataAdapter da = new SqlCeDataAdapter(sql, connStr);
                da.Fill(dt);

                foreach (DataRow dr in dt.Rows)
                {
                    string dynSQL = "SELECT [" + dr["COLUMN_NAME"] + "]";
                    dynSQL += " FROM [" + dr["TABLE_NAME"] + "]";
                    dynSQL += " WHERE [" + dr["COLUMN_NAME"] + "] LIKE '%" + searchText + "%'";

                    DataTable result = new DataTable();
                    da = new SqlCeDataAdapter(dynSQL, connStr);
                    da.Fill(result);
                    foreach (DataRow r in result.Rows)
                    {
                        Console.WriteLine("Table Name: " + dr["TABLE_NAME"]);
                        Console.WriteLine("Column Name: " + dr["COLUMN_NAME"]);
                        Console.WriteLine("Value: " + r[0]);
                    }
                }
            }
            catch (Exception e)
            {
                Console.Write(e.Message);
            }

        }
    }
} 
```

有一个非常快速而肮脏的控制台应用程序，它将打印出任何包含文本值的表/列。您可以对其进行调整以满足您的需求。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:24:46.210

我不确定CE，但我使用这种方法：

[http://www.dbforums.com/microsoft-sql-server/972792-find-text-string-database.html](http://www.dbforums.com/microsoft-sql-server/972792-find-text-string-database.html)

即第三个下来。在使用时阅读并理解语法，它是高度可修改的，并且可以按数据类型进行过滤。

# iphone - 将 JSON 字符串转换为对象

> ID：15210270
> 
> 赞同：0
> 
> 时间：2013-03-04T20:14:08.933
> 
> 标签：iphone, ipad

尝试将 JSON 字符串转换为对象

```
NSString *testString = @"OMJ=\"N.A.\"&SPJ=\"N.A.\"&OBJ=\"N.A.\"";

        NSMutableDictionary *tags = [NSMutableDictionary new];
        tags = [NSMutableDictionary dictionaryWithDictionary:[Utility convertJSONStringToObject:testString]]; 
```

错误信息！

```
-[__NSCFConstantString objectFromJSONString]: unrecognized selector sent to instance! 
```

使用 NSJSONSerialization 后，字典 JSON 的 retun 值为 null 空

```
 NSDictionary *JSON =
   [NSJSONSerialization JSONObjectWithData: [@"OMJ=\"N.A.\"&SPJ=\"N.A.\"&OBJ=\"N.A\"" dataUsingEncoding:NSUTF8StringEncoding]
                                        options: NSJSONReadingMutableContainers
                                         error: nil]; 
```

我在代码中做错了什么。任何人都建议我解决这个问题。

@提前致谢

# javascript - jquery 展开/折叠所有项目

> ID：15210271
> 
> 赞同：0
> 
> 时间：2013-03-04T20:14:09.133
> 
> 标签：javascript, css, ajax, jquery

我有一堆可以通过单击图标单独折叠/展开的项目。我需要再修改一下我的代码。我需要在顶部添加另一个图标。当您单击它时，您可以一次展开/折叠以下所有项目。有人可以帮我做那部分吗？

这是我的javascript代码

```
$(document).on('show hide', '#programs-accordion', function(e) {
  $(e.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-plus icon-minus');
}); 
```

这是我的haml代码

```
#programs-accordion.accordion
  - @patient_summary.programs.each_with_index do |program, index|
    .accordion-group
      .accordion-heading
        .accordion-toggle.group-accordion-toggle
          %a{ href: "#collapse-#{index}", data: { parent: '#programs-accordion', toggle: 'collapse' }}
            %i.icon-plus
          %a= program.name
         .accordion-body{id: "collapse-#{index}", class: (@office.to_i == office.id) ? "" : "collapse" }
           .accordion-inner 
            - office.positions.each_with_index do |position, index|
              #measures-accordion.accordion
                .accordion-group
                  .accordion-heading
                    .row-fluid
                      .span2{class: "offices-#{position.status}"}= position.status
                      .span1= position.results.first.value
                      .span2= position.results.first.value_date_time.blank? ? '' : Date.parse(position.results.first.value_date_time)
                      .span5= position.name 
```

编辑：下面的JS小提琴链接

[http://jsfiddle.net/HqXMN/](http://jsfiddle.net/HqXMN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:00:59.057

I got it working here.

```
$('.expandcollapse').click(function() {

    $('.collapse').each(function(index) {
        $(this).collapse("toggle");
    });

    if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i> Expand All") {
        $(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
    }
    else {
        $(this).html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
    };
}); 
```

[http://jsfiddle.net/HqXMN/6/](http://jsfiddle.net/HqXMN/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:28:43.433

也许是这样的：

```
 $('.expandButton').click(function() {
   $('.accordion-body').addClass('collapsed');
   $('.accordion-toggle i').removeClass('icon-plus');
   $('.accordion-toggle i').addClass('icon-minus');
 }); 
```

# asp.net - 网络表单是否会在每个页面更改时发布到服务器？

> ID：15210273
> 
> 赞同：2
> 
> 时间：2013-03-04T20:14:16.133
> 
> 标签：asp.net, webforms

这可能是一个非常基本的问题，我应该已经知道答案，但我似乎无法验证它。

我想知道，在网络表单应用程序（DotnetNuke）中有一个由 DotNetNuke 创建的主表单

```
<form method="post" action="/buynow?mode=form" onsubmit="javascript:return WebForm_OnSubmit();" id="Form" enctype="multipart/form-data"> 
```

在应用程序中，我有一些字段和一个按钮，可以将 jQuery ajax POST 触发到外部 API。在帖子成功后，我使用 jQuery 重定向到新页面。

在此重定向上，表单是否会发布到服务器？我问是因为为了符合 PCI 标准，我不能将此表单的内容发布到我的服务器。

如果默认情况下确实发布了表单数据，是否有办法阻止它，或者只是在重定向解决我的问题之前清除表单字段的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:19:51.763

> 我使用 jQuery 重定向到新页面

假设您使用[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)设置新 URL，这将执行新 URL 的 GET。不会对原始 URL（或其他任何地方）进行 POST。

许多 ASP.Net 服务器控件会导致 POST 返回到同一页面，但这些 POST 几乎总是响应用户操作（单击、下拉更改等）。

*一般来说*，您不必担心在您不知情的情况下发生回发，但是如果有疑问，请启动网络嗅探器（Firebug、Chrome 工具、IE 工具等）以确保安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:20:24.323

> 我使用 jQuery 重定向到新页面

当您使用重定向时，您是在指示浏览器执行 GET。换句话说，浏览器不会执行 POST。

# ios - 崩溃前保存核心数据上下文

> ID：15210276
> 
> 赞同：1
> 
> 时间：2013-03-04T20:14:28.753
> 
> 标签：ios, core-data

例如，如果我们在 XCode 中点击“停止”，它将关闭应用程序，模仿崩溃行为。

但是如果我的核心数据上下文没有保存，当我返回时，数据将不存在。

1.  有什么解决方法吗？

2.  每次大操作完成时我应该保存上下文吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:35:42.880

根据我的经验，您应该在使用 Core Data 保存机制时确定正确的粒度。

恕我直言（也许其他人可能有不同的意见）没有可遵循的标准。我的经验法则是考虑两个不同的方面。**用户**和**性能**。_

在第一种情况下，您应该在用户执行关键操作时保存。例如，用户在表单中插入了很多值，因此他希望不再插入它们。关于第二个方面，保存操作可能会影响您的应用程序的性能。如果您经常将更改写入磁盘，则应用程序的响应速度会降低。相反，在内存中有这么多对象可能会导致内存警告（这将导致 Core Data 采取特定的行为）。

权衡可能是使用后台操作来保存更改或利用新的 Core Data API。显然，以前的规则仍然有效。

# python - Python套接字 - 什么时候字符串不是字符串？

> ID：15210282
> 
> 赞同：1
> 
> 时间：2013-03-04T20:14:52.897
> 
> 标签：python, sockets

使用我发现的一些代码来使用 Python 套接字来制作 telnet 服务器。服务器代码工作正常。我需要向/从客户端发送十六进制字符串来逃避字符问题。当我像这样向客户端发送数据时：

```
conn.sendall('\x74\x65\x73\x74\x31\x32\x33\x0D\x0A') 
```

或者

```
test_var = '\x74\x65\x73\x74\x31\x32\x33\x0D\x0A'
conn.sendall(test_var) 
```

它工作完美。当我尝试创建一个字符串并将其存储在一个变量中时（如以下 kludge）：

```
def recover_raw_data(data):

    data_list = []
    hex_list = []

    for items in data:
        data_list.append(ord(items))

    for items in data_list:
        hex_list.append("\\")
        value = '%02X' % int(items)
        hex_list.append("0x" + value)
    print hex_list   
    almost_final_data = "".join(hex_list)
    just_about_final_data = almost_final_data.replace('\\0x', '\\x')
    final_data = just_about_final_data
    print final_data
    conn.sendall(final_data)
    return() 
```

您可以打印这个混乱的输出，它看起来是正确的，Wireshark 捕获显示数据包从字面上发出，而不是 ascii ......

例如`\x31\x32\x33\x34\x35\x0D\x0A`

我已经尝试了 .encode 和我在 Google 上找到的大量其他想法......想知道为什么我不能从有效的变量创建字符串......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:38:42.650

A (Python2)`str`是一个字节序列。例如，`'\x31\x32\x33\x34\x35\x0D\x0A'`是一个字节序列。`list`您可以通过应用以下内容更清楚地查看哪些字节`str`：

```
In [26]: list('\x31\x32\x33\x34\x35\x0D\x0A')
Out[26]: ['1', '2', '3', '4', '5', '\r', '\n'] 
```

所以你看，你这里真的有 8 个字节。`'\x31'`都是一个字节。因此，您不能通过`str`将反斜杠字符`"\\"`与`x`字符然后是数字字符连接来重现这一点：（例如原始字符串`r'\x31\x32\x33\x34\x35\x0D\x0A'`。）

```
In [28]: list(r'\x31\x32\x33\x34\x35\x0D\x0A')[:10]
Out[28]: ['\\', 'x', '3', '1', '\\', 'x', '3', '2', '\\', 'x'] 
```

* * *

我不确定我是否理解其目的，`recover_raw_data`因此以下内容可能是错误的，但在我看来，您所需要的只是：

```
def recover_raw_data(data):
    conn.sendall(data) 
```

（如果这是真的，那么你根本不需要`recover_raw_data`，因为`conn.sendall`就足够了......）

* * *

实际上，可以`x`通过使用编解码器解码将文字字符串（带有反斜杠和字符）转换为所需的字符串`'string_escape'`：

```
In [30]: (r'\x31\x32\x33\x34\x35\x0D\x0A').decode('string_escape')
Out[30]: '12345\r\n' 
```

但我真的不认为你应该这样做。在您完成这个繁琐的过程*之前*，您`data`似乎已经处于正确的状态。

 ** * *

PS。如果您展示了输入的`recover_raw_data`外观示例以及您想要对其执行的操作，也许我们可以建议如何修改`recover_raw_data`.*

# php - AJAX 不会加载 URL

> ID：15210284
> 
> 赞同：-2
> 
> 时间：2013-03-04T20:14:58.867
> 
> 标签：php, ajax

有人可以看看这个并告诉我为什么这里的代码不会加载我试图调用的 php 页面吗？

```
<script src="_js/jquery-1.7.2.min.js"></script>     <!-- Linking jQuery -->
<script>                        
$(document).ready(function() {
$('.answer').click(function(e) {
var color = $(this).attr("data-color");
$.ajax({
type: "POST",
url: "test.php",
data: '{ color: "'+color+'" }',
success: function(data){ alert(data); }
error: function (jqXHR) {
...
}
})
})
})
</script> 
```

应该触发这个的链接是....

```
<div id="red" data-color="red" class="answer">
<a href="#"><img src="images/red.jpg" width="100%" /></a>
</div>

<div id="blue" data-color="blue" class="answer">
<a href="#"><img src="images/blue.jpg" width="100%" /></a>
</div> 
```

Test.PHP 只是为了让我可以阅读 POST 中的内容

```
<?php
     print_r($_POST);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:17:46.587

我的猜测是您需要更改`data: '{ color: "'+color+'" }',`为`data: { color: color},`

并出于理智目的更改`$(this).attr("data-color");`为`$(this).data("color");`

也许是这样的：

```
(function($){
    $(document).ready(function() {
        $('.answer').click(function(e) {
            var color = $(this).data("color");
            $.ajax({
                type: "POST",
                url: "test.php",
                data: { color: color}
            }).done(function ( data ) {
                alert(data);               
            }).fail(function () {
                alert("FAILED!");               
            });
        });
    });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:22:57.957

```
$.ajax({
    type: "POST",
    url: "test.php",
    data: { color: color },
    success: function(data){ alert(data); },
    error: function (jqXHR,text) {
        alert(text);
    }
}); 
```

# iphone - 对多个 NSMutableArray 进行排序

> ID：15210288
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:15:06.977
> 
> 标签：iphone, ios, objective-c

我有 3 个 MutableArray 的名称：

*   电视节目
*   电视网络
*   tvdbID

我需要按电视节目的名称对它们进行排序。但需要保持联系。所以例如：

```
tvShows = Breaking Bad, House, Community;
tvNetworks = AMC, FOX, NBC;
tvdbID = 81189, 73255, 94571; 
```

需要成为：

```
tvShows = Breaking Bad, Community, House;
tvNetworks = AMC, NBC, FOX;
tvdbID = 81189, 94571, 73255; 
```

我该怎么做？这是我的第一个应用程序，很抱歉，如果这是一个非常简单的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:24:10.747

将它们存储在字典数组中，然后使用 NSArray 排序函数进行排序：（下）

```
NSDictionary * dict1 = @{@"title":@"breaking bad",@"network":@"AMC",@"tvbdID":@(81189)};
NSDictionary * dict2 = @{@"title":@"house",@"network":@"FOX",@"tvbdID":@(73255)};
NSDictionary * dict3 = @{@"title":@"Community",@"network":@"NBC",@"tvbdID":@(94571)};

NSArray * array = @[dict1,dict2,dict3];

NSSortDescriptor * desc = [NSSortDescriptor sortDescriptorWithKey:@"title"ascending:YES selector:@selector(caseInsensitiveCompare:)];

NSArray * sortedArray = [array sortedArrayUsingDescriptors:@[desc]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:23:47.257

我会亲自创建一个名为 TVShow 的自定义 NSObject，它具有 showName、network 和 tvbdID 属性。这样，每个节目只有一个数组。假设您的数组名为 myShows，您可以执行以下操作：

```
[allShows sortUsingComparitor:^NSComparisonResult(id a, id b) {
    NSString *firstName = [(TVShow*)a showName];
    NSString *secondName = [(TVShow*)b showName];
    return [firstName compare: secondName];
}]; 
```

也就是说，如果您想按节目名称排序。如果您想按网络排序，您可以交换`network`！`showName`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:21:40.460

你不能用 3 个独立的数组来做，但可能用 1 个字典，其中键是电视节目，值是一个有 2 个键的字典：tvNetworks & tvdbIDs

样本：

```
NSDictionary *data = @{@"Breaking Bad":@{@"tv" : @"AMC", @"tvdb": @(81189)},
                       @"House":@{@"tv" : @"FOX", @"tvdb": @(73255)},
                       @"Community":@{@"tv" : @"NBC", @"tvdb": @(94571)}};

NSArray *sortedShows = [data.allKeys sortedArrayUsingSelector:@selector(compare:)];

for (id show in sortedShows) {
    NSLog(@"%@ = %@", show, data[show]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T20:22:38.990

不知道您的最终目标是什么，但您可能应该创建一个 TVShow 类，该类具有“title”、“network”和“dbid”的属性（即实例变量）。然后，您可以实例化三个具有适当属性的 TVShow 对象，将它们放入一个可变数组中，并使用 NSMutableArray 上的一种排序方法——我可能会选择`sortUsingComparator:`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T20:45:04.423

最简单和最直接的方法之一是创建*一个*字典数组，如下所示：

```
NSMutableArray *tvShowInfos = [NSMutableArray array];
for (NSInteger i = 0; i < tvShows.count; i++) {
    NSDictionary *info = @{@"show": [tvShows objectAtIndex:i],
                           @"network": [tvNetworks objectAtIndex:i],
                           @"id": [tvdbIDs objectAtIndex:i]};
    [tvShowInfos addObject:info];
} 
```

然后，您可以轻松地对该数组进行排序：

```
[tvShowInfos sortUsingDescriptors:@[ [[NSSortDescriptor alloc] initWithKey:@"show" ascending:YES] ]]; 
```

如果您需要一个包含所有网络的数组，按节目标题排序，则可以`valueForKey:`在字典数组上使用：

```
NSArray *networksSortedByShow = [tvShowInfos valueForKey:@"network"]; 
```

# smalltalk - 在 seaside+Gemstone 中发送邮件“一条消息：发生 NotUnderstood（错误 2010），UndefinedObject 无法理解 #'isEmpty'”

> ID：15210291
> 
> 赞同：2
> 
> 时间：2013-03-04T20:15:24.773
> 
> 标签：smalltalk, seaside, gemstone

之前尝试过类似的问题，但我无法取得进展。所以我做了新的测试，这是新的问题：

我在同一台机器上全新安装了 PHARO 1.4 和 GEMSTONE 3.0.1.2。（Linux CENTOS）。使用最新版本的 Gemtools ( **1.0 beta 87** ) 和最新版本的玻璃工作区 ( **1.0 beta 8.7.4** ) 加载Pharo 中的seaside **3.0和 Gemstone 中的****3.0.7.1**版本。

 ****我打开工作区并评估：

```
(WAEmailMessage
    from: (WAEmailAddress address: 'xx@aa.com' username: 'fromMe')
    to: (WAEmailAddress address: 'shyam@localhost' username: 'shyam')
    subject: 'Email Test')   
      body: 'This is a Test Email sent'; 
      send. 
```

（顺便说一句，由于 Gemstone 中的默认邮件主机是“mailhost”，我在**/etc/hosts**文件中添加了以下行`127.0.0.1 localhost mailhost`）。

在 Pharo 上，消息被正确发送和接收，而在 Gemstone `a MessageNotUnderstood occurred (error 2010), a UndefinedObject does not understand #'isEmpty'`中，我在方法中得到

```
readSmtpResult
| result firstChar |
[self readWillNotBlockWithin: 5000]
    whileFalse: [GsFile stderr log: 'Waiting for server to write...'].
result := self readString: 500.
result isEmpty   =========================> HERE result is "nil".
    ifTrue: 
        [self log: 'Empty result'.
        ^false]. 
```

原因是`result`返回一个`nil`.

我在 MAC OS X 上也尝试了类似的结果，而是在上面的行中进入了一个循环。

使用`tcpdump -X -i lo tcp port 25`和 WireShark，**我注意到对于 GEMSTONE，**当数据包正确交换为 PHARO 时，我没有看到任何活动。

显然，我在两个不同的系统上做错了事。

任何想法 ？

谢谢

夏姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:42:35.720

`result`是`nil`因为`#readString:`退货`nil`。

似乎对等方没有发送任何数据。正如您已经跟踪到端口 25 上没有任何活动，您确定 SMTP 参数正确吗？

Seaside-Email 包含可用于配置 SMTP 服务器的代码。假设您有 Seaside 应用程序`seasideApp`，您可以执行以下操作：

```
seasideApp configuration
    addParent: WAEmailConfiguration instance.
seasideApp
    preferenceAt: #smtpServer put: 'your.smtp.host';
    preferenceAt: #smtpPort put: 25;
    preferenceAt: #smtpUsername put: 'your.smtp.username.or.nil.if.unecessary';
    preferenceAt: #smtpUsername put: 'your.smtp.password.or.nil.if.unecessary';
    yourself. 
```

请注意，`#smtpServer`并且`smtpPort` *必须*按照描述的方式进行配置，因为它们用于 GemStone 版本的`GRPlatform>>#seasideDeliverEmailMessage:`. 我选择*故意不*使用 GemStone 默认值。

此外，以这种方式设置 SMTP 参数可以跨平台工作；如果没有，请直接与我联系。****

# javascript - 在选择单选按钮时显示内容

> ID：15210295
> 
> 赞同：0
> 
> 时间：2013-03-04T20:15:36.970
> 
> 标签：javascript, jquery

我正在尝试创建一个场景，在该场景中，我在切换单选按钮时显示不同的内容。它在 chrome 中运行良好，但在 IE 中无法运行。无法弄清楚出了什么问题。

```
<div id="Q6">
  <input type="radio" id="Q6A" value="yes" name="Q6"/>Same as current address<br/>
  <input type="radio" id="Q6B" value="no" name="Q6"/>New address<br/>
</div>

<div id="Q6Aoutput" style="display:none;">1</div>
<div id="Q6Boutput" style="display:none;">2</div>

<script>
$('#Q6').change(function(){
  if($('#Q6A').attr('checked')){
    $('#Q6Aoutput').show();
  }else{
    $('#Q6Aoutput').hide();
  }
  //
  if($('#Q6B').attr('checked')){
      $('#Q6Boutput').show();
  }else{
      $('#Q6Boutput').hide();
  }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:19:01.983

尝试更换：

```
if($('#Q6A').attr('checked')){ 
```

和：

```
if($('#Q6A').prop('checked')){ 
```

和：

```
$('#Q6').change(function(){ 
```

您向 div 添加了一个更改事件，虽然它与[事件一样](http://jsfiddle.net/UVYEs/)有效，但我会使用它来代替：

```
$('input[name="Q6"]').click(function(){
    $('#Q6Boutput').toggle(this.id == "Q6B");
    $('#Q6Aoutput').toggle(this.id == "Q6A");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:19:02.540

你试过 jQuery 的[is(:selector)](http://api.jquery.com/is/)方法吗？此外，最好将事件直接附加到输入收音机。

```
$('#Q6A').change(function(){
  if($(this).is(':checked')){
    $('#Q6Aoutput').show();
  }else{
    $('#Q6Aoutput').hide();
  }
});
$('#Q6B').change(function(){
  if($(this).is(':checked')){
      $('#Q6Boutput').show();
  }else{
      $('#Q6Boutput').hide();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:18:54.570

`$('#Q6')`选择`<div>`，而不是`<input>`。

你可以使用`$('#Q6 input')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:19:20.403

有一种原生 javascript 方法可以检查它，请参阅[这个问题和答案](https://stackoverflow.com/a/1423783/1313143)。

所以在你的情况下：

```
if($('#Q6A').checked){
    //etc
} 
```

# c# - 使用下拉列表中的选定对象更新文本框中的数据

> ID：15210301
> 
> 赞同：2
> 
> 时间：2013-03-04T20:16:17.693
> 
> 标签：c#, asp.net-mvc

在我的用户可以创建新项目的视图中，他必须从下拉列表中选择一个项目，如下所示：

```
@Html.DropDownListFor(model => model.m_CustomerId, ViewBag.ListCustomers as SelectList, "--- Select Customer ---", new  {@class = "CustomerInfo" }) 
```

进行选择时，当前视图中的某些字段将使用所做的选择进行更新。这些字段是这样的：

```
Item Name: @Html.TextBoxFor(model => model.m_ItemName, new { @disabled = "disabled" }) @Html.ValidationMessageFor(model => model.m_ItemName)<br/>
        Item Date: <span style="font-weight: bold">@Html.DisplayFor(model => model.m_ItemDate)</span> @Html.ValidationMessageFor(model => model.m_ItemDate)<br/> 
```

我读过一些东西，比如可能使用 JQuery 或 Java，但老实说我一无所知，而且我不知道这些语言。我怎么能这样做？我不介意尝试语言、脚本或其他任何东西，但我是 MVC 应用程序的新手，这让我很困惑。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:29:01.923

所以你可能想要做的是通过 NuGet 包管理器下载和安装 jQuery。安装完成后，我们可以扩展控件。`DropDownListFor`您可以通过添加一些属性来扩展。

```
@Html.DropDownListFor(model => model.m_CustomerId,
    ViewBag.ListCustomers as SelectList,
    "--- Select Customer ---",
    new
    {
        @class = "CustomerInfo",
        onchange = "function() { $('m_ItemName').val($(this).text()); }"
    }
) 
```

# c# - 当 actionName 像“/controllerName/action/”时，Html.ActionLink() 添加不需要的文件夹

> ID：15210302
> 
> 赞同：2
> 
> 时间：2013-03-04T20:16:26.663
> 
> 标签：c#, asp.net-mvc, razor

我创建了一个名为 ApplicationController 的控制器，它将公共信息发送到我的所有视图，我系统中的每个控制器都继承自它。

在部分视图中，我使用 Html.ActionLink()：

```
@Html.ActionLink("Link Title", "/MyController/MyAction")
// OUTPUT: <a href="/MyIISVirtualDirectory/Application/MyController/MyAction">Link Title</a> 
```

如果我点击链接，我会收到 404。

但如果我使用：

```
@Html.ActionLink("Link Title", "MyAction", "MyController")
// OUTPUT: <a href="/MyIISVirtualDirectory/MyController/MyAction">Link Title</a> 
```

一切正常。

为什么在第一个示例中该方法输出 /Application/？我怎样才能默认删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:47:50.803

如果您使用的是 Razor 2.0 (ASP.NET MVC 4)，您可以只使用一个普通的旧链接：

```
<a href="~/MyController/MyAction">Link Title</a> 
```

`/MyController/MyAction`如果您的应用程序托管在`/`或`/MyIISVirtualDirectory/MyController/MyAction`您的应用程序托管在 上，则href 将转换为`/MyIISVirtualDirectory`。

在 Razor 1.0 (ASP.NET MVC 3) 中，语法有点冗长：

```
<a href="@Href("~/MyController/MyAction")">Link Title</a> 
```

更多信息[在这里](http://www.asp.net/web-pages/overview/whats-new/top-features-in-web-pages-2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:42:54.177

做你想做的最简单的方法是：

```
<a href="@Url.Content("~/MyController/MyAction")">Link Title</a> 
```

但是，它完全破坏了路由逻辑。这应该用于内容文件（顾名思义）、css、js 等......而不是用于控制器操作。如果您更改默认路由，上述 URL 可能会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:41:14.477

实现你自己的动作链接助手：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public static class CustomHtmlHelpers
    {
        public static MvcHtmlString ActionLink(this HtmlHelper htmlHelper, string linkText, string routePath)
        {
            //you can do any sort of logic you want here.
            return MvcHtmlString.Create(string.Format("<a href=\"{0}\">{1}<a/>", routePath, linkText));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:36:40.713

我认为不可能通过将路由作为参数从控制器调用操作方法。这是一个包含 Html.ActionLink 的所有扩展的链接。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)

路线在 global.asax 中定义，您可以在其中根据需要定义路线。输出中的 /Application/ 是您的 ApplicationController。默认情况下，您在其中调用视图的控制器是搜索操作方法的控制器。

希望能帮助到你。

# hadoop - hdfs文件在哪里上传？

> ID：15210307
> 
> 赞同：0
> 
> 时间：2013-03-04T20:16:37.253
> 
> 标签：hadoop, hdfs

当我导航到时，hadoop 和 hdfs 似乎为我正确运行

`http://127.0.01:50070/dfshealth.jsp`我收到这个输出：

![在此处输入图像描述](../Images/19960b4dbad33e97a6f468505ac58302.png)

但是当我尝试运行代码时

```
public class firstmapreducedriver {

    public static void main(String[] args) {
        JobClient client = new JobClient();
        JobConf conf = new JobConf(firstmapreducedriver.class);

        // TODO: specify output types
        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(IntWritable.class);

        // TODO: specify input and output DIRECTORIES (not files)

        conf.setInputFormat(TextInputFormat.class);
        conf.setOutputFormat(TextOutputFormat.class);

        FileInputFormat.setInputPaths(conf, new Path("dfs"));
        FileOutputFormat.setOutputPath(conf, new Path("Out"));

        // TODO: specify a mapper
        conf.setMapperClass(org.apache.hadoop.mapred.lib.IdentityMapper.class);

        // TODO: specify a reducer
        conf.setReducerClass(org.apache.hadoop.mapred.lib.IdentityReducer.class);

        client.setConf(conf);
        try {
            JobClient.runJob(conf);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

我收到此错误：

```
13/03/04 19:53:33 WARN conf.Configuration: DEPRECATED: hadoop-site.xml found in the classpath. Usage of hadoop-site.xml is deprecated. Instead use core-site.xml, mapred-site.xml and hdfs-site.xml to override properties of core-default.xml, mapred-default.xml and hdfs-default.xml respectively
13/03/04 19:53:51 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/03/04 19:53:51 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:9100/tmp/hadoop-newuser/mapred/staging/newuser/.staging/job_201303041945_0001
13/03/04 19:53:51 ERROR security.UserGroupInformation: PriviledgedActionException as:newuser cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs://localhost:9100/user/newuser/dfs
org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs://localhost:9100/user/newuser/dfs
    at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:197)
    at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:208)
    at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:989)
    at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:981)
    at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
    at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
    at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:824)
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1261)
    at firstmapreducedriver.main(firstmapreducedriver.java:44) 
```

我在哪里可以配置 hdfs 文件的位置，或者我需要在哪里创建目录“dfs”以便找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:32:07.900

在您的代码中，您指定了目录：

```
 FileInputFormat.setInputPaths(conf, new Path("dfs"));
    FileOutputFormat.setOutputPath(conf, new Path("Out")); 
```

任何相对路径（不以 开头的`/`）都将具有`/user/$USER`. 因此，您必须确保您的输入路径`/user/newuser/dfs`存在并且其中包含数据。您可以执行以下命令来创建目录并放入文件：

```
hadoop fs -mkdir /user/newuser/dfs
hadoop fs -copyFromLocal localFile.txt /user/newuser/dfs/ 
```

# javascript - 循环遍历未知数量的数组参数

> ID：15210312
> 
> 赞同：10
> 
> 时间：2013-03-04T20:16:51.090
> 
> 标签：javascript

我试图弄清楚如何遍历传递的几个数组参数。例如： [1,2,3,4,5],[3,4,5],[5,6,7] 如果我将它传递给一个函数，我将如何在每个参数内部都有一个函数循环（任何可以传递的数组数量）？

我想在这里使用 for 循环。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T20:20:17.380

您可以为此使用[参数：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

```
for(var arg = 0; arg < arguments.length; ++ arg)
{
    var arr = arguments[arg];

    for(var i = 0; i < arr.length; ++ i)
    {
         var element = arr[i];

         /* ... */
    } 
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-15T12:47:06.613

使用 forEach，如下：

```
'use strict';

    function doSomething(p1, p2) {
        var args = Array.prototype.slice.call(arguments);
        args.forEach(function(element) {
            console.log(element);
        }, this);
    }

    doSomething(1);
    doSomething(1, 2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T20:19:59.237

使用内置`arguments`关键字，该关键字将包含`length`您拥有的数组数量。以此为基础循环遍历每个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-11T09:17:46.893

```
function loopThroughArguments(){
    // It is always good to declare things at the top of a function, 
    // to quicken the lookup!
    var i = 0,
        len = arguments.length;

    // Notice that the for statement is missing the initialization.
    // The initialization is already defined, 
    // so no need to keep defining for each iteration.
    for( ; i < len; i += 1 ){

        // now you can perform operations on each argument,
        // including checking for the arguments type,
        // and even loop through arguments[i] if it's an array!
        // In this particular case, each argument is logged in the console.
        console.log( arguments[i] );
    }

}; 
```

# .net - 在 .NET 中完成异步 HttpWebRequest 时，超时从何而来？

> ID：15210317
> 
> 赞同：1
> 
> 时间：2013-03-04T20:17:08.273
> 
> 标签：.net, sockets

对于异步调用 HttpWebRequest 的请求方法，如[BeginGetResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)，该`Timeout`属性不被注意。在我的机器上使用此方法完成的 HTTP 调用似乎仍然有一个默认超时，大约为 20 秒。这是从哪里来的？此超时配置在什么级别，我可以在哪里/是否可以更改它？

在我的实验中，我将地址 www.stackoverflow.com:9999 配置为代理服务器以引发超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:24:28.343

与往常一样，检查文档[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)

> Timeout 属性对使用**BeginGetResponse**或**BeginGetRequestStream**方法发出的**异步请求没有影响。**

 ******编辑**： http: [//msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)有一条重要信息：

> 当您在应用程序中启用网络跟踪时，此成员会输出跟踪信息。有关详细信息，请参阅网络跟踪。

也许您可以尝试一下并弄清楚发生了什么。此外，HttpRequest 中没有与 20secs 值相关的设置，因此它可能是特定于操作系统/驱动程序/DNS 的。****

# yeoman - Grunt 构建不移动图像

> ID：15210319
> 
> 赞同：1
> 
> 时间：2013-03-04T20:17:14.933
> 
> 标签：yeoman, gruntjs

我正在使用 Yeoman 和 Grunt 来构建我的项目。当我运行“grunt”来编译我的项目时，除了图像文件夹没有从 app 目录复制到 dist 目录之外，一切正常。

由于 grunt 每次构建时都会清除 dist 文件夹，我想知道如何将图像文件夹链接到 grunt 构建的一部分，以便在编译时出现在 dist 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T10:07:42.070

这确实是意外行为，将在下一个版本中修复。如果你想调整你的 Gruntfile 以支持 gif 文件，你可以看看[这个补丁](https://github.com/yeoman/generator-webapp/commit/1fc96994f2377138c4800ea784637295a1aa680f)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:35:43.597

找出原因。我只有两张图片，都是.gifs。它似乎只适用于jpg和png。

# amazon-web-services - 带有数据库示例的 AWS python Web 应用程序

> ID：15210323
> 
> 赞同：0
> 
> 时间：2013-03-04T20:17:45.123
> 
> 标签：amazon-web-services, boto

我有我的 AWS python (flask) 应用程序正在运行，但我正在努力连接到数据库。几天来，我一直在四处寻找一个好的分步教程或代码库，但还没有找到。让包含数据库的 webapp 运行的最简单方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:46:50.857

如果面向 NoSql 文档的数据库适合您，那么让 MongoDB 在 AWS 上运行并通过 pymongo 访问它非常容易。

AWS 特定的快速入门在这里：

```
https://wiki.10gen.com/display/DOCS/Amazon+EC2+Quickstart 
```

一个通用的 Mongodb 教程在这里：

```
http://docs.mongodb.org/manual/tutorial/getting-started/ 
```

PyMongo 教程是：

```
http://api.mongodb.org/python/current/tutorial.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:25:56.543

我建议将您的应用程序部署到 Elastic Beanstalk。亚马逊文章：[http](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_flask.html) ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_flask.html将为您提供帮助。

我更喜欢创建 RDS 实例、部署应用程序架构的数据库怎么样。比将连接字符串作为 db 的环境变量放到 beanstalk 中。它假设您的应用程序正在从环境变量中获取连接字符串。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T09:36:36.023

这个问题非常开放，它实际上取决于您想要运行什么样的后端。最近，我一直在开发一个无服务器应用程序，它使用静态 S3 文件与 API Gateway 与 Lambda 进行通信，并使用 SQL Alchemy 与 RDS 进行通信。

我使用了 Aurora Mysql，但 SQLAlchemy 允许使用几种不同的驱动程序。

对于 NoSQL 类型，我会推荐 dynamoDB。我只推荐它，因为如果您的应用程序已经在 AWS 上，您可以通过前后使用他们的产品来简化并发和扩展。我建议您开始研究哪种后端对您最有效，一旦您了解了情况，请寻找最适合您的应用程序的受支持和知名服务。

[我将按照 SQLAlchemy 或此处的DynamoDB](http://boto3.readthedocs.io/en/latest/guide/dynamodb.html)中的分步教程进行操作

如果您想走 RDS 路线，[SQLAlchemy是一个不错的选择](https://www.pythoncentral.io/introductory-tutorial-python-sqlalchemy/)

Python [boto3](https://boto3.readthedocs.io/en/latest/)将允许您使用任何 AWS 服务来包含 DynamoDB

# bash - Bash：每个标志的多个参数

> ID：15210326
> 
> 赞同：1
> 
> 时间：2013-03-04T20:17:50.593
> 
> 标签：bash, command-line-arguments, getopts

我想做的是

```
$ ./my-script -a file1 file2 file3 -d file4 file5 file6 -r file7 file8 
```

或者

```
$ ./my-script -a *.txt -d src1/*.tex sr2/*.tex 
```

但是，似乎 getopts 每个标志只支持零个或一个参数。

有没有很好的方法来处理这个要求？我目前正在自己​​解析论点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:26:52.987

为每个选项指定一个逗号分隔（或其他分隔符）参数：

```
$ ./my-script -a file1,file2,file3 -d file4,file5,file6 -r file7,file8 
```

然后在解析选项后拆分各个参数。一种方法：

```
IFS=, read a1 a2 a3 <<< $a_argument 
```

或者

```
IFS=, read -a a <<< $a_argument 
```

* * *

另一种选择是引用参数，并让脚本进行扩展：

```
./my-script -a '*.tex' -d '*.pdf'
$ ./my-script -a '*.txt' -d 'src1/*.tex sr2/*.tex' 
```

在脚本中的位置：

```
#!/bin/bash

as=( $a_argument )
ds=( $d_argument ) 
```

这类似于如何`find`处理，例如，`-name`主要的。

# c - 如何使用 gcc asm 关键字在寄存器中传递函数参数

> ID：15210327
> 
> 赞同：11
> 
> 时间：2013-03-04T20:17:50.757
> 
> 标签：c, gcc, assembly, parameter-passing, calling-convention

在 gcc 中，您可以使用以下语法声明应将局部变量放入寄存器中。

```
register int arg asm("eax"); 
```

在我在互联网上找到的一些旧代码中，此语法用于声明函数的参数应在寄存器中传递：

```
void foo(register int arg asm("eax")) 
```

但是当我尝试这个例子时：

```
/*
   Program to demonstrate usage of asm keyword to allocate register for a variable.
*/
#include <stdio.h>

/* Function with argument passed in register */
void foo(register int arg asm("eax") )
{
    register int loc asm("ebx");
    loc = arg;
    printf("foo() local var: %d\n", loc);
}

int main(void)
{
    foo(42);
    return 0;
} 
```

并用 gcc 编译我得到一个错误：

```
gcc main.c -o test-asm.exe
main.c:7:27: error: expected ';', ',' or ')' before 'asm' 
```

现在我的问题是：
上面的 asm 语法是否正确，在 gcc 中，即对于函数的形式参数？
gcc曾经支持过这个吗？
如果这不是正确的语法，那么如何实现呢？

谢谢，
//jk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:23:01.463

我知道的唯一方法是使用 fastcall 属性：

（GCC 手册第 6.30 节）[http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Function-Attributes.html#Function-Attributes](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Function-Attributes.html#Function-Attributes)

> 快速呼叫
> 
> 在 Intel 386 上，fastcall 属性使编译器在寄存器 ECX 中传递第一个参数（如果是整数类型），在寄存器 EDX 中传递第二个参数（如果是整数类型）。随后的和其他类型的参数在堆栈上传递。被调用的函数将从堆栈中弹出参数。如果参数的数量是可变的，则所有参数都被压入堆栈。

在以下示例代码中使用它：

```
__attribute__((fastcall,noinline)) int add (int a, int b)
{
  return a + b;
}

int main () {
  return add (1, 2);
} 
```

将导致：

```
 .file   "main.c"
    .text
.globl add
    .type   add, @function
add:
    pushl   %ebp
    movl    %esp, %ebp
    leal    (%edx,%ecx), %eax
    popl    %ebp
    ret
    .size   add, .-add
.globl main
    .type   main, @function
main:
    pushl   %ebp
    movl    %esp, %ebp
    movl    $2, %edx
    movl    $1, %ecx
    call    add
    popl    %ebp
    ret
    .size   main, .-main 
```

不要忘记在其他翻译单元的任何声明中提及 fastcall 属性，否则可能会发生相当奇怪的事情。

# javascript - 将 div 拖动到窗口的边界而不出现自动滚动

> ID：15210332
> 
> 赞同：0
> 
> 时间：2013-03-04T20:17:57.360
> 
> 标签：javascript, jquery, jquery-ui

当我将 div 'header' 拖到页面底部时，窗口开始滚动并继续拖动。我希望它在到达窗口底部时停止而不滚动，我认为下面的代码可以实现这一点，但显然它没有。任何想法如何做到这一点？谢谢。

```
$("#header").draggable({containment: 'window',scroll: false }); 
```

# clojure - 为什么循环语句的绑定向量数量不均匀？

> ID：15210333
> 
> 赞同：0
> 
> 时间：2013-03-04T20:17:57.680
> 
> 标签：clojure

我一直在查看示例和文档；我不知道为什么我会得到

`loop requires an even number of forms in binding vector`错误。

我相信问题在于循环和初始化使用指标。我只是无法弄清楚我做错了什么。

```
(def usage-vec-len 13)

(defn ret-usage-indicies
"Takes a billed water consumption amount, and returns a vector of the ranges."
[reading]
(let [usage-indicies [0 0 0 0 0 0 0 0 0 0 0 0 0] curr-idx (- usage-vec-len 1)]
 (loop [curr-reading reading ui usage-indicies curr-idx]
.
.
.
 (if (= remaining-reading 0)
 ui
 (recur remaining-reading (assoc ui curr-idx curr-reading) (dec curr-idx))))))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:36:15.360

`loop`表单应该看起来就像一个表单`let`。为了清楚起见，您可以添加逗号空格：

```
(loop [symbol1 init1, symbol2 init2, ...] body-of-expressions) 
```

看起来你可能想要

```
(loop [curr-reading reading, ui usage-indicies, curr-idx curr-idx] ...) 
```

where`curr-index`被初始化（反弹）到`curr-index`表达式`let`中。

更好的是，您可以将您在`let`表单中进行的初始化向下移动到`loop`表单本身。它也看起来好像`usage-vec-len`只是`count`of ，所以当您也可以在循环绑定中处理它时`usage-indices`，无需在全局中指定它。`def`

```
(loop [curr-reading reading
       ui [0 0 0 0 0 0 0 0 0 0 0 0 0]
       curr-idx (dec (count ui))] 
   body-of-expressions) 
```

# java - 与 Java 小程序的 Javascript 连接

> ID：15210337
> 
> 赞同：0
> 
> 时间：2013-03-04T20:18:06.477
> 
> 标签：java, javascript, eclipse, function

我在 Eclipse IDE 有一个带有主类的 java 小程序！我想在 javascript 上调用一个函数。我有一个变量，例如 x，我希望它在 javascript 中提供它，我想从 javascript 接收另一个变量，例如我的 java applet 上的 y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:00:25.863

你的问题有点不清楚确切的设置。所以我给出几个答案：

1.  如果您有 JavaScript 函数并想在 Java 中执行函数，也许这会有所帮助：[https ://developer.mozilla.org/en-US/docs/Rhino](https://developer.mozilla.org/en-US/docs/Rhino)
2.  如果您在 Web 浏览器中运行 JavaScript 并且 Web 浏览器也加载小程序，请查看此处：[http ://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)
3.  如果您在 Eclipse IDE 中运行 Java Applet 而 JavaScript 在其他位置的网站中运行，则必须使 Applet 提供 HTTP(s) 服务器并使用 JavaScript 中的 XmlHttpRequest 来调用 applet。为此，您必须使用从 JavaScript 到 Applet 的轮询，因为 Applet 不能以这种方式调用 JavaScript 上的函数，但 JavaScript 可以连接到 Applet。

如果您的设置与此处提到的三个不同，请发布，也许我们可以找到更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:22:08.820

这是如何从此处的 java Applet 调用 javascript[以及](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)如何从[此处的 javascript 调用 java Applet 的示例](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)

# facebook - Facebook 登录按钮未能在 45 秒内重新调整大小

> ID：15210339
> 
> 赞同：5
> 
> 时间：2013-03-04T20:18:11.017
> 
> 标签：facebook, button, login, resize

我正在尝试实现异步加载 Facebook 登录按钮，但该按钮在 45 秒后消失（仅在 Google Chrome 中），并且此错误消息记录在错误控制台中：“FB:login_button 无法在 45 秒内重新调整大小”。我该如何解决这个问题？

以下是错误控制台中记录的错误：

```
Uncaught TypeError: Cannot read property 'style' of undefined connect.facebook.net.js:123
    v connect.facebook.net.js:123
    o.extend.constructor.ha connect.facebook.net.js:123
    g.inform connect.facebook.net.js:40
    (anonymous function) connect.facebook.net.js:123
    ka connect.facebook.net.js:67
    h.setWrapper.j connect.facebook.net.js:62
    r.register.init.s connect.facebook.net.js:66
    h.setWrapper.j connect.facebook.net.js:62
fb:login_button failed to resize in 45s 
```

这是HTML：

```
 <div class="fb-login-button" data-show-faces="false" size="xlarge" data-width="300" data-max-rows="1"></div> 
```

这是Javascript：

```
ADS.addEvent(window, "load", function(){

if(!ADS.$('fb_root')){

    var div = document.createElement('div');
    div.id = "fb-root";
    document.body.appendChild(div);
    var script = document.createElement("script");
    script.src = "dom/connect.facebook.net.js";
    var script2 = document.createElement("script");
    var head = document.getElementsByTagName("head")[0]; 
    head.appendChild(script);

    window.fbAsyncInit = function () {

        FB.init({
        appId: "HIDDEN",
        channelUrl: "http://mywebsite.com/channel.php",
        status: true,
        cookie: true,
        xfbml: true
        });

    // Gets status when the user first lands
    // on site
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {

        //window.location="http://mywebsite.com";

      } else if (response.status === 'not_authorized') {

          // Do nothing, let the user view the welcome page
          //FB.login();

      } else {
          // this causes a login dialog to
          // pop up automagically once the user
          // lands on the site and is not logged in
          // or authorized
          //FB.login();

      }
     });

     function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                // connected
                // using event subscribe to send user to right page, instead of this
                // which does not redirect the user once the login is complete
                //window.location="http://mywebsite.com/home.php?show=follow";
            } else {
                // cancelled
                //alert(response.authResponse);
            }
        });
    }
    FB.Event.subscribe("auth.login", function () { 
            // Redirect's the user once the login is complete
            window.location="http://mywebsite.com";
        })

    }   

}
}); 
```

# ios - 添加限制某些 uibuttons 无法正常工作的 uiview iphone monotouch

> ID：15210341
> 
> 赞同：0
> 
> 时间：2013-03-04T20:18:20.970
> 
> 标签：ios, iphone, uiview, xamarin.ios, uibutton

我正在使用此代码`UIButtons`在 a中添加 3 `UIView`，然后将它们添加到我的屏幕上。

```
UIView  buttonsContainerView = new UIView (new Rectangle (0,0,(int) this.View .Frame .Width ,40));
            UIButton  b;
            for(int i=0;i<3;i++){
                b= new RltTabBarButton ();
                b.ImageEdgeInsets = new UIEdgeInsets (5,5,5,100);
                if(i==0){
                    b.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                          UIControlState.Normal );
                    b.TitleLabel .Text = "Details";
                    b.Frame = new RectangleF (0,350,108,40);
                    b.Enabled =true ;
                }else if(i==1){
                    b.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                          UIControlState.Normal );
                    b.TitleLabel .Text = "Map";
                    b.Frame = new RectangleF (110,350,100,40);
                    b.Enabled =true ;
                }else if(i==2){

                    b.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                          UIControlState.Normal );
                    b.TitleLabel .Text = "Agent";
                    b.Frame = new RectangleF (212,350,108,40);
                    b.Enabled =true ;
                }
                buttonsContainerView .AddSubview (b);

            }
this.View .AddSubview (buttonsContainerView ); 
```

当我运行我的应用程序时。添加到正确位置的按钮。但他们`Text`的`TitleLable`. 虽然我设置了这个项目。而且它们看起来像一些图像，因此我无法单击它们并与它们进行交互。

我设置了他们的`Enabled`字段`true`，但没有任何更改。

编辑：根据答案，我将代码更改为：

```
UIView  buttonsContainerView = new UIView (new Rectangle (0,0,(int) this.View .Frame .Width ,40));

            UIButton  DetailsButton= new UIButton (UIButtonType.RoundedRect  );
            DetailsButton.ImageEdgeInsets = new UIEdgeInsets (5,5,5,100);
            DetailsButton.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                  UIControlState.Normal );
            DetailsButton.SetTitle ("Details",UIControlState.Normal );
            DetailsButton.Frame = new RectangleF (0,350,108,40);
            buttonsContainerView .AddSubview (DetailsButton);

            UIButton  MapButton= new UIButton (UIButtonType.RoundedRect );
            MapButton.ImageEdgeInsets = new UIEdgeInsets (5,5,5,100);
            MapButton.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                          UIControlState.Normal );
            MapButton.SetTitle ("Map",UIControlState.Normal );
            MapButton.Frame = new RectangleF (110,350,100,40);
            buttonsContainerView .AddSubview (MapButton);

            UIButton  AgentButton= new UIButton (UIButtonType.RoundedRect  );
            AgentButton.SetBackgroundImage (UIImage .FromFile ("ProjectRes/Images/Placeholder.png"),
                                          UIControlState.Normal );
            AgentButton.SetTitle ("Agent",UIControlState.Normal );
            AgentButton.Frame = new RectangleF (212,350,108,40);
            buttonsContainerView .AddSubview (AgentButton);

            this.View .AddSubview (buttonsContainerView ); 
```

但没有任何变化。我们无法点击按钮。它们看起来像图像。我相信它`buttonsContainerView`与`EnableInputClicksWhenVisible`. 当我在这个视图中调试应用程序时，调试器在想要执行它的值时会有一些异常。我能够复制这个的头：

```
MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSInvalidArgumentException Reason: -[UIView enableInputClicksWh… 
```

我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:48:59.903

我知道了。问题是我将`buttonsContainerView`（包含按钮的视图）的高度设置为 40。但是设置了按钮 350 的高度位置。当按钮的框架位于其父视图的框架之外时，它不会响应您的触摸。

有关更多信息：[UIView 内的 UIButton 不可点击](https://stackoverflow.com/questions/12470188/uibutton-inside-uiview-not-clickable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:40:51.527

您需要使用 SetTitle(); UIButton 的功能，以使其工作。否则，不会设置 TitleLabel。

```
button.SetTitle("MyTitle",UIControlState.Normal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:26:04.490

这可能应该是一个评论，但我还不能评论。我发现你的实现很奇怪，我倾向于认为它会导致 ARC 行为不端（我假设 ARC，因为你没有任何发布代码）。为什么不直接创建 3 个 UIButton 而不是这个循环，然后将所有这些添加到您的 UIView 中？

# java - 如何从每次交互中运行的循环中获得响应？

> ID：15210342
> 
> 赞同：0
> 
> 时间：2013-03-04T20:18:25.127
> 
> 标签：java, ajax

我正在调用一个内部类并将其作为未来的任务运行：

```
Runnable r = new sendEmails(ids);
FutureTask task = new FutureTask(r, null);
ExecutorService scheduler = Executors.newCachedThreadPool();
scheduler.submit(task); 
```

看起来像这样：

```
private class sendLGORejectionEmails implements Runnable {

  private final String ids; 

  private sendLGORejectionEmails(String param) {
    ids = param;
  }

  public void run() {
    for (int i; i<=num_o_emails; i++) {
      Code that send emails and use 'ids' to do it;
    }
  }
} 
```

将任务提交给调度程序后，代码将用户从该页面转发到网页我想使用 ajax 检查正在发送的电子邮件（进度条），我可以使用 get 来确定任务是否是否完成，但我想做的是能够在循环处理时询问 i 的值。这样我就可以制作一系列 ajax 帖子并将 i 转换为进度点。我怎样才能进行调用以检查任务运行时 i 的值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:21:17.020

您可以在循环外定义 for 循环中的 count 变量。

`int globalCounter = 0;`在您的代码中，您可以在循环之外使用新的计数器。更改循环以使用全局计数器`for (; globalCounter <=num_o_emails; globalCounter ++)`。这样，您可以`int`从循环外部调用它以查看其当前设置值。

如果您正在从此类外部访问数字，并且打算对数字进行更改（加/减/等），请确保您注意更新计数器的竞争条件（对于循环和外部方法） .

# java - log4j2 RollingFile Appender 一次只有一行

> ID：15210352
> 
> 赞同：0
> 
> 时间：2013-03-04T20:18:59.220
> 
> 标签：java, logging, log4j2

我正在使用以下 log4j2.xml 文件：

```
<configuration>
    <appenders>
        <RollingFile name="logfile" fileName="C:/opt/log/views/views.log"
                     filePattern="C:/opt/log/views/views.%d{yyyy-ww}.log.gz">
            <Policies>
                <TimeBasedTriggeringPolicy />
            </Policies>
            <DefaultRolloverStrategy max="3" />
            <PatternLayout pattern="%d{ISO8601} VIEWS[%p][%c]...." />
        </RollingFile>
    </appenders>
    <loggers>
        <root level="TRACE">
            <appender-ref ref="logfile" />
        </root>
    </loggers>
</configuration> 
```

当我尾随文件并启动服务器时，我一次收到一条日志消息。它不是附加的，而是用每个新行替换文件中的唯一行。我对此有点困惑，希望有人以前见过。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:12.143

据我所知，您的配置没有任何问题（至少，在我的机器上它按预期工作）。

也许问题出在模式中：

```
%d{ISO8601} VIEWS[%p][%c].... 
```

您最后错过了一个`%n`（换行符），因此所有内容都有效地写在同一行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T22:31:21.287

花了一些时间来解决完全相同的问题。我现在确信 log4j2 (beta9) 中的 TimeBasedTriggeringPolicy 可以处理的最大时间单位是一天，而不是（如您的配置中的）一周或一个月。

测试它：将您的配置更改为

```
 <RollingFile name="logfile" fileName="C:/opt/log/views/views.log"
     filePattern="C:/opt/log/views/views.%d{yyyy-MM-dd}.log.gz"> 
```

它应该神奇地起作用。

这已在此处报告为错误，但（截至今天）尚未修复：[https ://issues.apache.org/jira/browse/LOG4J2-385](https://issues.apache.org/jira/browse/LOG4J2-385)

# sql - 是否可以在不指定数据库名称的情况下对当前数据库执行收缩

> ID：15210357
> 
> 赞同：4
> 
> 时间：2013-03-04T20:19:04.230
> 
> 标签：sql, sql-server-2008, tsql

我们正在连接到 C# 中的数据库，然后在其上运行一些 sql 脚本。

我需要能够在不指定名称的情况下缩小当前数据库。

我们在程序中没有数据库名称，我们只是获得连接并运行脚本。

这是我开始的：

```
ALTER DATABASE SSSIndexes SET RECOVERY SIMPLE WITH NO_WAIT
GO
DBCC SHRINKFILE(N'SSSIndexes_Log', 1)   <-- my issue is here
GO 
```

但我不知道数据库名称或日志文件名。

可以做到吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T20:24:35.480

您可以通过调用获取当前数据库并缩小它：

```
DECLARE @dbName VARCHAR(50)

SELECT @dbName = DB_NAME()

DBCC SHRINKDATABASE(@dbName) 
```

只做日志文件：

```
DECLARE @logName VARCHAR(50)

SELECT @logName = name FROM sys.master_files WHERE database_id = db_id() AND type = 1

DBCC SHRINKFILE(@logName, 1) 
```

# wpf - 为什么没有使用 Thread.Current 代码在我的应用程序中设置文化？

> ID：15210363
> 
> 赞同：0
> 
> 时间：2013-03-04T20:19:35.383
> 
> 标签：wpf, vb.net, wpf-controls, embedded-resource

我在 WPF 中创建了一个本地化应用程序。我已经像这样绑定了xaml中的控件。

`<Label Name="languageLabel" Content="{x:Static Resources:Resources.languageLabel}" Style="{StaticResource CommonRepSecStyle}" />`

一切正常，但我仍然不确定我应用的技术是否良好。我创建了一个资源管理器并将字符串值分配给这样的控件。

```
 Dim culture As CultureInfo = CultureInfo.CreateSpecificCulture(cultureName)
        Dim localResource As System.Resources.ResourceManager = New System.Resources.ResourceManager("LocalTest.Resources", System.Reflection.Assembly.GetExecutingAssembly())

        languageLabel.Content = localResource.GetString("languageLabel", culture)
       stateLabel.Content = localResource.GetString("stateLabel", culture)
        cityLabel.Content = localResource.GetString("cityLabel", culture)
       stateComboBox.Text = localResource.GetString("stateComboBox", culture)
        cityComboBox.Text = localResource.GetString("cityComboBox", culture)
        infoLabel.Content = localResource.GetString("infoLabel", culture)
        infoTextBox.Text = localResource.GetString("infoTextBox", culture)
        localResources.ReleaseAllResources() 
```

在我将值分配给控件之前，它似乎不起作用？有什么办法可以改善这一点吗？谢谢！

编辑：完整的代码在这里

```
 Imports System.IO
    Imports System.Windows.Controls
    Imports System.Globalization
    Imports System.Configuration
    Imports System.Threading
    Imports System.ComponentModel
    Imports System.Resources
    Imports System.Windows.Markup
    Imports System.Reflection
    Imports System.Uri
    Namespace LocalTest

Public Class MainWindow
    Private cultureName As String

    Public Sub New()

        '    '    ' This call is required by the designer.
        InitializeComponent()

        '    '    ' Add any initialization after the InitializeComponent() call.

    End Sub
    Private Sub Window_Loaded(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles MyBase.Loaded

    End Sub
    Private Sub ButtonEnglish_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles ButtonEnglish.Click
        cultureName = "en-US"

        SetControlsCulture()
        'Dim ob As Object
        'ob = Application.Current.TryFindResource("Resources.en-US.resx")

        'Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-US")
        'Thread.CurrentThread.CurrentUICulture  = CultureInfo.CreateSpecificCulture("en-US")

    End Sub

    Private Sub ButtonFrench_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles ButtonFrench.Click
        cultureName = "fr-CA"
        System.Threading.Thread.CurrentThread.CurrentUICulture = New CultureInfo("fr-CA")

        SetControlsCulture()

    End Sub
    ' Dim s As String = r.GetString("LabelContent", culture)
    'Thread.CurrentThread.CurrentCulture = culture
    'Thread.CurrentThread.CurrentUICulture = culture

    ''' <summary>
    ''' Select the Controls Culture
    ''' </summary>
    ''' <remarks></remarks>

    Private Sub SetControlsCulture()
        Select Case cultureName
            Case "fr-CA"
                UIControlsBinding()
            Case "en-US"
                UIControlsBinding()
        End Select
    End Sub
   Private Sub UIControlsBinding()
        Dim culture As CultureInfo = CultureInfo.CreateSpecificCulture(cultureName)
        Dim localResource As System.Resources.ResourceManager = New      System.Resources.ResourceManager("LocalTest.Resources", System.Reflection.Assembly.GetExecutingAssembly())
     languageLabel.Content = localResource.GetString("languageLabel", culture)
     stateLabel.Content = localResource.GetString("stateLabel", culture)
     cityLabel.Content = localResource.GetString("cityLabel", culture)
     stateComboBox.Text = localResource.GetString("stateComboBox", culture)
     cityComboBox.Text = localResource.GetString("cityComboBox", culture)
    infoLabel.Content = localResource.GetString("infoLabel", culture)
    infoTextBox.Text = localResource.GetString("infoTextBox", culture)
    localResources.ReleaseAllResources() 
    End Sub
    End class
    End Namespace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:21:55.140

要在 WPF 中添加资源，请将一个`Resource.resx`和一个`Resource.NL-nl.resx`（或选择的语言）文件添加到项目的属性文件夹中。在每个资源文件中添加一个具有名称`StateLabel`和值的资源。*不要忘记将访问修饰符更改为公共*

将 xml 命名空间添加到您的窗口/用户控件：（`xmlns:Resources="clr-namespace:WpfApplication2.Properties"`其中 WpfApplication2 是您的应用程序名称）

为您的窗口/用户控件添加标签`<Label Content="{x:Static Resources:Resources.StateLabel}"></Label>`

要更改语言，请从代码中调用它以设置适当的语言（在本例中为荷兰语）：

```
System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("nl-NL"); 
```

# python - 如何巧妙地为 32 位和 64 位提供预编译的 cython 模块？

> ID：15210370
> 
> 赞同：5
> 
> 时间：2013-03-04T20:20:01.573
> 
> 标签：python, cython

我有一个使用我编写的 cython 模块的 python 脚本。我想发布它，为了省去用户编译 cython 东西的麻烦（在 Windows 上尤其复杂），我想提供预编译的扩展。

但是，我需要一个 32 位版本和另一个 64 位版本。我考虑将这两个文件包括为 mymodule32.pyd 和 mymodule64.pyd，然后 mymodule.py 执行以下操作：

```
if bits == 32:
    from mymodule32 import *
elif bits == 64:
    from mymodule64 import * 
```

但这感觉有点笨拙。如果用户决定自己编译生成 mymodule.pyd 的模块怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-07T18:25:29.407

我的印象是，这是您如何打包模块并将其发布到 pypi 的一部分，而不是您如何导入它。

导入应该不关心你的架构，是模块安装和需要知道的包。

# ruby-on-rails - CanCan 用户参数始终为零，仅 ajax 请求

> ID：15210371
> 
> 赞同：0
> 
> 时间：2013-03-04T20:20:01.843
> 
> 标签：ruby-on-rails, ruby, cancan

我在我的 rails 应用程序中使用 Cancan + Devise：

当我尝试更新评论记录时会出现问题，我猜`nil`即使我已登录，initialize 方法的用户参数也总是会出现：

能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    unless user.nil?
      if user.role.name == "admin"
        can :manage, :all
      elsif user.role.name == "atendimento"
        can :manage, Comment
      end
    end
  end
end 
```

Better_errors ![更好的错误](../Images/d6cdaf2102ec72fbb094a0aa3426d28e.png)

最后它引发了这个错误。

![在此处输入图像描述](../Images/9d177c1ec8d2f626f90a0752a3095f2a.png)

每个人都面临这个问题？任何人都可以帮助我吗？

Rails 3.2.8 设计 2.1.0 CanCan 1.6.9 Ruby 1.9.3p385

**编辑 1**

评论控制器.rb

```
 class CommentsController < ApplicationController

   authorize_resource :only => [:index, :show,:new,:edit, :create,:update,:destroy,  :approve, :moderate, :disapprove]

   layout "admin" 
```

**编辑 2**

嘿伙计们，当控制器收到 ajax 请求时，CanCan 可以正常工作。

评论.js

```
 var request = $.ajax({
   url: url_to_request,
   type: "PUT",
   data: {id : id_to_send, answer : answer_to_send, question : question_to_send },
   dataType: "json"
 }); 
```

配置/路由.rb

```
 resources :comments do
    member do
      put 'approve'
      put 'moderate'
      put 'disapprove'
    end
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:33:03.953

不是`user`那是零，它是`user.role`。

您可以使用`user.role.try(:name)`或确保该`role`方法始终返回响应`name`.

**编辑**

Cancan 使用`current_user`控制器上的方法。如果该方法返回 nil，那么您的能力文件中的 user 将为 nil。

确保设计`before_filter`在过滤器之前运行在您的 Cancan 之前（例如调用`load_and_authorize_resource`）。如果您的用户在 Cancan 开始尝试授权之前尚未进行身份验证，则您的用户将为 nil。

# javascript - 一旦添加了 html 内容，轮播就会停止工作

> ID：15210373
> 
> 赞同：0
> 
> 时间：2013-03-04T20:20:02.763
> 
> 标签：javascript, jquery, html

我正在使用的这个轮播停止工作，一旦我在其中一张幻灯片中添加标签，就可以通过拖动/刷出前一张幻灯片来拖动/刷入一张新幻灯片。

组成轮播的css、html、js如下：

编辑：我无法在 JSFiddle 中复制该问题，因此这里是指向工作版本的链接，其中一张幻灯片中没有 html 内容和非工作版本。

工作：[https ://dl.dropbox.com/u/270523/help/carousel/carousel.html](https://dl.dropbox.com/u/270523/help/carousel/carousel.html)

非工作：[https ://dl.dropbox.com/u/270523/help/carousel/carousel2.html](https://dl.dropbox.com/u/270523/help/carousel/carousel2.html)

这是无效的html：

```
<body>
    <div id="carousel">
        <ul>
            <li class="pane1"><h2>Swipe...</h2><object data="http://stackoverflow.com"><iframe src="http://stackoverflow.com" /></object></li>
            <li class="pane2"><h2>...or drag...</h2></li>
            <li class="pane3"><h2>...or swipe...</h2></li>
            <li class="pane4"><h2>...or drag...</h2></li>
            <li class="pane5"><h2>...or swipe...</h2></li>
        </ul>
     </div>
</body> 
```

工作 html 在第一张幻灯片中只有文本，而不是对象标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:06:59.053

控制台错误：“X-Frame-Options 拒绝加载：stackoverflow.com 不允许跨域框架。”

我猜这完全破坏了插件。

# string - 在fortran中将字符串连接到文件末尾

> ID：15210374
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:20:03.917
> 
> 标签：string, file, concatenation, fortran95

如何将字符串连接到文件末尾或文件中的特定位置？以下命令中“*”的含义是什么：

```
write(10, *) 'blabla' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:35:48.873

`*`指定程序用于写出变量的格式；它指定了*列表导向的输出*，这意味着编译器在编写变量时可以自由选择变量的合理表示。找出编译器决定是合理表示的最佳方法是吸吮它并查看；如果您不喜欢编译器所做的事情，请使用*编辑描述符*来负责。

你剩下的问题对我来说毫无意义，我无法回答。

# javascript - UIATarget.setLocationWithOptions 课程不适用

> ID：15210375
> 
> 赞同：15
> 
> 时间：2013-03-04T20:20:07.460
> 
> 标签：javascript, ios, mapkit, core-location, ui-automation

我正在尝试通过 UI 自动化自动化用户的路径。理想情况下，an 中的用户位置`MKMapView`会根据我在自动化脚本中说明的航点列表进行更新：

```
var target = UIATarget.localTarget();

var waypoints = [
    {location: {latitude: 37.33170, longitude: -122.03020}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03022}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03025}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03027}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03030}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03032}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03035}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03037}, options: {course: 180}},
    {location: {latitude: 37.33170, longitude: -122.03040}, options: {course: 180}}
];

for (var waypointIndex = 0; waypointIndex < waypoints.length; waypointIndex++)
{
    if (waypointIndex == 0)
        target.delay(5);

    var waypoint = waypoints[waypointIndex];
    target.setLocationWithOptions(waypoint.location, waypoint.options);

    target.delay(1);

    if (waypointIndex == (waypoints.length - 1))
        waypointIndex = 0;
} 
```

位置部分毫无问题地应用，并且用户的指示器沿着路径移动。但是，课程选项似乎没有做任何事情。我试过`90`, `180`, `-90`, `3.14`, 和`1.57`作为选项的值，但无济于事。

我也尝试将`speed: 8`参数添加到`options`，没有任何变化。

看到这似乎是[模拟标题的唯一方法](http://www.cardinalsolutions.com/blogs/mobile/2013/02/testing_a_location-a.html)，并且该[`course`选项完全有效并记录在案](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html#//apple_ref/javascript/instm/UIATarget/setLocationWithOptions)，令人沮丧的是它不起作用。

**恼人的 hacky 解决方法：**如果您在物理设备上模拟位置（通过 GPX 文件），设备的旋转工作。这样您就可以模拟路线并获得旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-22T14:40:44.403

像这样的坐标在仪器中对我有用：

```
{location:{longitude:2.105528,latitude:41.414359}, options:{speed:20, course: 290, altitude:200, horizontalAccuracy:10, verticalAccuracy:15}} 
```

尝试水平和垂直精度，甚至可能是高度。

祝你好运！

# java - Android 文本转语音读取 html 标签

> ID：15210379
> 
> 赞同：4
> 
> 时间：2013-03-04T20:20:29.267
> 
> 标签：java, android, html, text-to-speech

我有一个奇怪的，我在我的应用程序中使用文本到语音，除了它从我的格式化字符串中读出一些 Html 代码这一事实之外，它工作得很好。

例子：

```
<string name="Aggression"> 
<![CDATA[    

<p><b>Identifying Obsessive Behaviours</b></p>  

]]>
</string> 
```

读出字符串时，它会忽略“< p >”和“</ p >”，但会读出粗体标签！

所以我的问题是，有什么想法可以阻止它读取一些 html 标签？

PS 由于使用的某些字符串的长度和格式问题，我正在使用 CDATA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:24:40.867

好的，所以我找到了一个非常惊人的解决方法。我的目标是仍然显示格式完美的 html 样式文本，该文本易于维护，但有一个文本到语音引擎可以读出字符串以便访问。

我的 TextView 仍然使用它来显示 html 格式的文本：

```
contentTextView.setText(Html.fromHtml(content)); 
```

我的文本转语音功能现在使用它去除所有标签和标题，只读取裸文本：

```
String editedTextReadable = android.text.Html.fromHtml(content).toString(); 
```

# android - 无法正确居中 ScrollView 内的按钮

> ID：15210380
> 
> 赞同：0
> 
> 时间：2013-03-04T20:20:33.607
> 
> 标签：android, scrollview, center, locked

我到处都看到这个问题，但我认为每个案例都有自己的解决方案。我所拥有的是：

```
<HorizontalScrollView
    android:id="@+id/MenuScroll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="48dp"
        android:orientation="horizontal"
            android:layout_gravity="center"
        android:padding="0dp" >

        <Button
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

        <Button
            android:layout_width="150dp"
            android:layout_height="fill_parent" />

    </LinearLayout>
</HorizontalScrollView> 
```

我假装`LinearLayout`在`HorizontalScrollView`. 它居中（我看到*halfbutton - button - halfbutton*）但我无法滚动到第一个按钮。看起来隐藏在左侧的内容占用的空间被添加到右侧，并且在 . 之后添加了一些空间`HorizontalScrollView`。 ![在此处输入图像描述](../Images/acf559c1c82b8eade7555a962a13559f.png)

有没有什么解决方案，即使我必须动态地做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:38:53.403

我有同样的问题，为了避免它只是删除

```
 android:layout_gravity="center" 
```

从

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="48dp"
    android:orientation="horizontal"
        android:layout_gravity="center"
    android:padding="0dp" > 
```

您可以在创建布局视图时添加计时器以正确滚动。如果您不添加计时器，则由于未创建视图，它不会滚动。您无法滚动尚未看到的内容

```
 new Timer().schedule(new TimerTask () {
        @Override
        public void run() {
            //SOME SCROLLING FUNCTION
            }}, 50); 
```

# osgi - Blueprint CXF serviceFactories：每个请求都需要一个实例

> ID：15210381
> 
> 赞同：2
> 
> 时间：2013-03-04T20:20:36.287
> 
> 标签：osgi, cxf, apache-karaf, blueprint-osgi, aries

我正在使用 Apache Karaf、CXF 和 Aries 蓝图。

我有一个包，它定义了许多 JAX-RS 服务。默认情况下，CXF 会将这些服务设为单例，但这对我不起作用。我需要一个新实例来处理每个请求。

参考[CXF 文档](http://cxf.apache.org/docs/jaxrs-services-configuration.html)，我尝试创建返回服务的新实例的 JAX-RS ServiceFactories。该文档有 Spring 的示例，我尝试使用 Blueprint 等价物。

```
<reference id="groupService" interface="org.ozoneplatform.owf.server.service.api.GroupService"/>
<bean id="groups" class="org.ozoneplatform.owf.server.rest.GroupController" scope="prototype">
    <property name="service" ref="groupService"/>
</bean>
<bean id="groupFactory" class="org.apache.cxf.blueprint.jaxrs.BlueprintResourceFactory">
    <property name="beanId" value="groups" />
</bean>
<jaxrs:server id="ozoneplatform_cxf_endpoint"  address="/owf">
<jaxrs:serviceFactories>
    <ref bean="groupFactory" />
</jaxrs:serviceFactories> 
```

蓝图无法开始给出错误

```
org.osgi.service.blueprint.container.ComponentDefinitionException: 
Error setting property: PropertyDescriptor <name: resourceProviders, getter: null, setter: [class org.apache.cxf.jaxrs.JAXRSServerFactoryBean.setResourceProviders(interface java.util.List)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-15T09:33:04.060

您必须将 BlueprintResourceFactory 实例的“blueprintContainer”属性定义为：

```
<bean id="groupFactory" class="org.apache.cxf.blueprint.jaxrs.BlueprintResourceFactory">
    <property name="beanId" value="groups" />
    <property name="blueprintContainer" ref="blueprintContainer"/>
</bean> 
```

其中 ref="blueprintContainer" 是对顶级管理器的引用（请参阅[121.11 Blueprint Container](https://osgi.org/specification/osgi.cmpn/7.0.0/service.blueprint.html#i2088582)）

# jar - CompilerException java.lang.IllegalArgumentException：无法解析类名：Carro，编译：（carro/car.clj:6）

> ID：15210387
> 
> 赞同：1
> 
> 时间：2013-03-04T20:21:08.163
> 
> 标签：jar, clojure, compiler-errors, illegalargumentexception

所以..我有这个问题（标题中的那个）。只是为了介绍一下我所做的事情：创建一个名为 Carro 的 Java 类：

```
public class Carro{
  public Carro(){}
  public void turnon(String sound){
     System.out.println(sound);
  }
} 
```

我已经编译了它：

```
javac Carro.java 
```

并创建了一个 .jar：

```
jar -cf Carro.jar Carro.class 
```

所以，我创建了一个新的 lein 项目：lein new test

创建一个 /lib 目录并将 Carro.jar 粘贴到其中。

在目录中创建一个名为 carro 的文件夹`test/src/`并创建一个 .clj 文件，名为`car.clj`：

```
(ns carro.car
  (:import [Carro] )
)

(defn callCarro [] 
  (let [car (new Carro)]
     (.turnon "vruuum!" car)
  )
) 
```

毕竟，我编辑了 project.clj 文件并在最后一个括号后添加了一个 :import [Carro] 。

因此，当我使用 运行项目时`lein repl`，出现此错误：

```
 $ lein repl
    user=> (require 'carr.car :reload)
    CompilerException java.lang.IllegalArgumentException: 
Unable to resolve classname: Carro, compiling:(carro/car.clj:6) 
```

解决这个问题的任何想法......问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:44:59.197

Leiningen 2 依赖 maven 来管理依赖关系。版本 1 用于将 jar 复制到 lib 目录，但此行为已被删除（请参阅[https://github.com/technomancy/leiningen/blob/stable/doc/FAQ.md](https://github.com/technomancy/leiningen/blob/stable/doc/FAQ.md)）。如果您的项目需要某个 jar，最简单的方法是将该 jar 安装在本地 maven repo 上，然后让 leiningen 完成剩下的工作。

Maven（以及 leiningen）需要您正在使用的 jar 的版本、组和工件（请参阅[https://github.com/technomancy/leiningen/blob/master/doc/TUTORIAL.md#artifact-ids-组和版本](https://github.com/technomancy/leiningen/blob/master/doc/TUTORIAL.md#artifact-ids-groups-and-versions)）。所以我们的第一步是将 Carro.jar 重命名为 Carro-0.1.0.jar。为了让事情变得更简单，让我们使用 leiningen 插件来完成剩下的工作。将`lein-localrepo`插件添加到您的 project.clj，类似于：

```
(defproject foo "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :plugins [[lein-localrepo "0.4.1"]]) 
```

然后你可以向 leiningen 询问 Carro 依赖的坐标：

```
$ lein localrepo coords Carro-0.1.0.jar
Carro-0.1.0.jar Carro/Carro 0.1.0 
```

最后一部分是安装到 mvn 存储库所需的信息：

```
$ lein localrepo install Carro-0.1.0.jar Carro/Carro 0.1.0 
```

之后，该 jar 将安装在您的 mvn 存储库中：`~/.m2/repository/Carro/Carro/0.1.0/Carro-0.1.0.jar`. 所以最后，将新安装的依赖添加到 project.clj 中：

```
(defproject foo "0.1.0-SNAPSHOT"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [Carro/Carro "0.1.0"]]
  :plugins [[lein-localrepo "0.4.1"]]) 
```

然后从repl：

```
$ lein repl
user=> (new Carro)
#<Carro Carro@7c04703c> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:03:37.543

我怀疑可能有多种原因：

*   Clojure 无法在没有包的情况下加载类，这会导致这种情况。
*   如果您使用 Leiningen，这不是测试课程的典型位置
*   如果你没有`(import 'Classname)`从 repl 运行，你也需要这样做。

# java - jsoup 发布 Java

> ID：15210390
> 
> 赞同：3
> 
> 时间：2013-03-04T20:21:32.333
> 
> 标签：java, jsoup

我正在努力让 java 通过 HTTPS 提交 POST 请求

使用的代码在这里

```
     尝试{
        响应 res = Jsoup.connect(LOGIN_URL)
    .data（“用户名”，“等等”，“密码”，“等等”）

    .method（方法.POST）
  .userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0")
                .header("接受", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8")
                。执行（）;
        System.out.println(res.body());
        System.out.println("代码" +res.statusCode());

        }
        捕获（异常 e）{
            System.out.println(e.getMessage());
        }

```

还有这个

```
文档 doc = Jsoup.connect(LOGIN_URL)
  .data（“用户名”，“废话”）
  .data（“密码”，“废话”）
  .userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0")
        .header("内容类型", "application/x-www-form-urlencoded")
         .method（方法.POST）
  .timeout(3000)
  。邮政（）;

```

其中 LOGIN_URL = [https://xxx.com/Login?val=login](https://xxx.com/Login?val=login)

当通过 HTTP 使用时，它似乎可以工作，HTTPS 它没有，但不会抛出任何异常

如何通过 HTTPS 发布

编辑：

当服务器通过 HTTPS 获取 POST 时似乎涉及 302 重定向（这不会通过 http 发生） 我如何使用 jsoup 将 302 发送的 cookie 存储到下一页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:13:16.437

这是我的代码：

```
URL form = new URL(Your_url);
connection1 = (HttpURLConnection)form.openConnection();
connection1.setRequestProperty("Cookie", your_cookie);

connection1.setReadTimeout(10000);
StringBuilder whole = new StringBuilder();

BufferedReader in = new BufferedReader(
        new InputStreamReader(new BufferedInputStream(connection1.getInputStream())));
String inputLine;
while ((inputLine = in.readLine()) != null)
     whole.append(inputLine);
     in.close();
Document doc = Jsoup.parse(whole.toString());
String title = doc.title(); 
```

我已经使用此代码来获取新页面的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T18:20:58.723

这是您可以尝试的...

```
import org.jsoup.Connection;

Connection.Response res = null;
    try {
        res = Jsoup
                .connect("your-first-page-link")
                .data("username", "blah", "password", "blah")
                .method(Connection.Method.POST)
                .execute();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

现在保存所有 cookie 并向您想要的其他页面发出请求。

```
//Saving Cookies
cookies = res.cookies(); 
```

向另一个页面发出请求。

```
try {
    Document doc = Jsoup.connect("your-second-page-link").cookies(cookies).get();
}
catch(Exception e){
    e.printStackTrace();
} 
```

如果需要进一步的帮助，请发表评论。

# database - 从内存而不是表中获取数据

> ID：15210394
> 
> 赞同：2
> 
> 时间：2013-03-04T20:21:50.223
> 
> 标签：database, oracle, plsql, oracle11g, database-programming

我有一个 10 行的参数表。称为参数表。在我的 PL/SQL 过程中，我循环了 200 万条记录。并且每次也查询这个参数表。

我想将此参数表加载到内存中并减少 I/O 进程。

做这个的最好方式是什么？

```
 FOR cur_opt
  IN (SELECT customer_ID,
             NVL (customer_type, 'C') cus_type
        FROM invoice_codes 
       WHERE ms.invoice_type='RT') 
LOOP
  ....
  ...

  Select data From parameter_table Where cus_type = cur_opt.cus_type AND cr_date < sysdate ;  -- Where clause is much complex than this..

....
...
END LOOP; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:28:26.557

您可以将其加入主查询：

```
select customer_id, data
from   parameter_table t, invoice_codes c
where  t.cus_type = nvl(c.customer_type, 'C')
and    t.cr_date < sysdate 
```

但是，如果您有 200 万条记录`invoice_codes`，则加入参数表是您最不关心的问题 - 循环执行此操作将需要一些时间（并且可能是您的 I/O 问题的真正原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:55:52.503

我认为您可以更改查询，加入参数表，因此无需在循环内点击 select 语句。（就像@Chris Saxon 的解决方案一样）

但作为使用兑现数据的一种方式，您可以填写一个字典，如数组，然后在必要时引用它
这样的事情可能会有所帮助：

*您必须`Fill_parameters_cash`在启动主进程之前调用并调用`get_parameter` 以获取数据，调用的输入参数`get_parameter`是字典键*

```
TYPE ga_parameter_t IS TABLE OF parameter_table%ROWTYPE INDEX BY BINARY_INTEGER;
ga_parameter ga_parameter_t;

procedure Fill_parameters_cash is
  begin 
    ga_parameter.DELETE;
    SELECT * BULK COLLECT
    INTO   ga_parameter
    FROM   parameter_table;    
end Fill_parameters_cash;

FUNCTION get_parameter(cus_type invoice_codes.cus_type%TYPE,
                                 is_fdound    OUT BOOLEAN)
    RETURN parameter_table%ROWTYPE IS
    result_value parameter_table%ROWTYPE;

    pos NUMBER;
  BEGIN
    result_value := NULL;
    is_fdound := FALSE;
    IF cus_type IS NULL THEN
      RETURN NULL;
    END IF;  

    pos := ga_parameter.FIRST;
    WHILE pos IS NOT NULL
    LOOP
      EXIT WHEN ga_parameter(pos).cus_type  = cus_type;
      pos := ga_parameter.NEXT(pos);
    END LOOP; 
   IF pos IS NOT NULL THEN
      is_fdound    := TRUE;
      result_value := ga_parameter(pos);
    END IF;  
    RETURN result_value;
  END get_parameter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:29:11.760

我猜循环浏览一百万条记录已经引起了问题。不太确定这个参数表查找如何真正恶化它。

无论如何，如果这确实是您可以采用的唯一方法，那么您可以在游标声明中进行内部或外部联接。

```
----
 FOR cur_opt
  IN (SELECT customer_ID,
             NVL (customer_type, 'C') cus_type
        FROM invoice_codes codes,
             parameter_table par 
       WHERE ms.invoice_type='RT'
         and codes.cus_type = par.cus_type -- (or an outer join) maybe?
      ) loop
.......... 
```

# java - 我可以在弹性负载均衡器前面的 EC2 中构建服务限制吗？

> ID：15210397
> 
> 赞同：2
> 
> 时间：2013-03-04T20:22:04.613
> 
> 标签：java, rest, amazon-web-services, amazon-ec2, mule

我在 EC2 中的弹性负载均衡器后面有一个自动缩放的 Web/应用程序层。我想为我的 REST Web 服务设置一个限制，以强制执行每秒事务限制。我想根据被调用的服务和请求中传递的一些专有 http 标头信息来强制执行它。我正在考虑建立一个 mule 服务器来限制传入的请求，然后将它们转发到 ELB 或返回一个 http 503，但我不知道构建和测试这会有多困难，或者它是否可以工作。

无论如何我可以在我的 ELB 前面设置一些东西来限制传入的请求吗？有没有更好的方法在 EC2 中执行 Web 服务限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:35:31.023

您必须在 EC2 上配置限制，ELB 不提供限制请求速率的能力。

# search - 在 VIM 搜索和替换中使用退格键

> ID：15210398
> 
> 赞同：2
> 
> 时间：2013-03-04T20:22:04.683
> 
> 标签：search, vim, replace, backspace

Vim 搜索和替换命令中的换行符使用什么字符？

我正在努力做到这一点：

```
1, 
2, 
3, 
4, 
5 
```

对此：`1, 2, 3, 4 ,5`

所以我想写这样的东西：`:%s/$/\b/g`

但即使我设置它也没有用：`:set magic`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T20:26:06.627

换行符由 表示`\n`。

因此，通过这样一个简单的示例，您可以将每个换行符替换为：

```
%s/\n//g 
```

您可以替换每个逗号，后跟可选的空格，直到行尾带有空格，如下所示：

```
:%s/,\s*$\n/, /g 
```

* * *

当然，`J`运算符很可能也能满足您的需求（尝试`J``i``p`在您希望连接的块内。或者根据您的`textwidth`设置自动换行：`g``q``i``p`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T20:26:47.140

你不需要`:s`这个就可以了：

```
gg5J 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:27:26.253

使用此搜索和替换命令：

```
:%s/,\n/, /g 
```

该`\n`字符与搜索字符串中的换行符匹配。

作为旁注，如果您想`newline character`在替换字符串中插入 a ，请确保使用`\r`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T22:53:23.627

替代方案是`:join`命令。

```
:%j 
```

有关更多信息，请参阅

```
:h :j 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T20:35:53.183

您可以使用可视模式来选择要加入的行

```
ggvGJ 
```

`gg`将您带到文档的顶部。 `v`将您置于可视模式 `G`将您带到文档底部（从而突出显示所有行） `J`连接所选范围内的所有行。

# antlr - 在 Nemerle 中使用 cs2n 工具

> ID：15210402
> 
> 赞同：2
> 
> 时间：2013-03-04T20:22:13.363
> 
> 标签：antlr, nemerle

我在 VS2010 上使用 Nemerle。我希望将一些 c 尖锐代码转换为 nemerle 源

如何在windows上安装cs2n？

我检查了教程，但使用 ANTLR 的方式也不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:03:22.133

CS2N 不是一个很好的工具。它是无人维护的，并且对 C# 的支持很差。它几乎没有用处，因为 Nemerle 编译器可以按原样读取 C# 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:50:10.640

Nemerle 包括[PegGrammar 宏](http://rsdn.ru/article/nemerle/PegGrammar-en.xml)。这是一个在许多方面都优于 ANTLR 的解析器生成器宏。改用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:21:44.467

现在没有工作工具。

你在这里有 AstConverter：[https ://github.com/rsdn/nemerle/tree/master/snippets/csharp-parser/CSharpToNemerle](https://github.com/rsdn/nemerle/tree/master/snippets/csharp-parser/CSharpToNemerle)

您可以编写一些编写 Nemerle 代码输出的代码。

# java - 同步块中的字符串不变性和等待方法

> ID：15210404
> 
> 赞同：0
> 
> 时间：2013-03-04T20:22:19.503
> 
> 标签：java, string, thread-safety, immutability

我是 Java 新手，在阅读 Java 语言时，我遇到了两个疑问。虽然我参考了很多网站，但我仍然不是很清楚。

1.  为什么字符串类是不可变的？我看到了一些`new File(str)`导致安全威胁的示例，但我不明白如果字符串是不可变的，它将如何帮助这种情况。

2.  另一个疑问是为什么 wait、notify 和 notifyall 应该在同步块内。我知道如果不是它会抛出`illegalMonitorException`。但我想知道技术背景为什么它应该在同步块中，为什么不在同步块中等待和通知可以有相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:54:57.177

> 为什么字符串类是不可变的？

为什么字符串在 Java 中是不可变的问题是一个古老的问题，并且一直存在争议。在我的书中，我会说它们是不可变的，因为它们应该是不可变的；）。这可能听起来像一个警察，但让我解释一下。

最简单的是，字符串在所有地方都使用，如果它们是可变的，那么在任何地方都需要大量的包袱来制作防御性副本和处理同步等。使它们不可变，然后使用像 StringBuilder/StringBuffer 这样的助手来改变它们是更好的设计选择（并且是多种语言的常见选择，而不仅仅是 Java）。

其次，一切都应该是不可变的，除非有充分的理由证明可变性是合理的。不可变的类（尤其是与并发相关的）很多问题都消失了。请参阅 Effective Java：“类应该是不可变的，除非有充分的理由使它们可变。如果不能使类不可变，请尽可能限制其可变性。”

第三，字符串用于Java的内部，例如类加载机制。使它们不可变使内部流程更简单，并防止一些安全问题。（另一个例子，出于性能原因，字符串常量在 Java 中被“实习”：[http](http://en.wikipedia.org/wiki/String_interning) ://en.wikipedia.org/wiki/String_interning ，这对于不可变类型来说更加理智。）

总而言之，设计人员选择在 Java 中使字符串不可变可能有几个原因，作为日常程序员，它可以帮助您（就像创建新字符串的实用程序一样，如 StringBuilder）。

> 为什么等待、通知和通知都应该在同步块内？

这是关于那个的一些信息：[wait()、notify() 和 notifyAll() inside synchronized statement](https://stackoverflow.com/questions/7504475/wait-notify-and-notifyall-inside-synchronized-statement)。

基本上，线程“通知”或“等待”是没有意义的，除非它已经拥有对象的监视器。

一般来说，如果您是 Java 新手，您可能还想查看 java.util.concurrent 中与并发相关的一些较新的实用程序：http: [//docs.oracle.com/javase/6/docs/api /java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)。通常，您可以依赖这些类并避免手动编码同步，这是众所周知的困难且容易出错。

# python - 烧瓶路由变量改变了uriencoded字符串

> ID：15210405
> 
> 赞同：1
> 
> 时间：2013-03-04T20:22:24.100
> 
> 标签：python, flask

我正在从我的 android 应用程序中传递以下网址

```
http://server.com/core/put/18.00283670425415/59.353229999542236/%5BB%40463336a0/ 
```

最后一个参数是一个 URI 编码的字符串。在烧瓶中，我的路线看起来像

```
@server.route('/put/<long>/<lat>/<tagline>/')
def put(long, lat, tagline):
    return tagline 
```

我得到`[B@463336a0`回报，我的网址更改为

```
http://server.com/core/put/18.00283670425415/59.353229999542236/[B%40463336a0/ 
```

这里发生了什么事？这真让我抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:43:12.303

这里发生的事情被称为[percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)。是的`%5B`百分比编码`[`，`%40`是 的百分比编码`@`。

您需要确保您的 Android 应用发送*转义*的URI。在这种特殊情况下，它看起来像这样（为清楚起见，简化示例）：

```
>>> import urllib
>>> unescaped_url = '%5BB%40463336a0'
>>> escaped_url = urllib.quote(unescaped_url)
'%255BB%2540463336a0'
>>> unescaped_url == urllib.unquote(escaped_url)
True 
```

# c# - 在 Windows 商店应用程序中等待时出现任务错误

> ID：15210407
> 
> 赞同：0
> 
> 时间：2013-03-04T20:22:28.690
> 
> 标签：c#, .net, windows-store-apps, async-await, windows-store

嘿嘿，我有一个方法：

```
 public static async Task<myClassl> GetData()
    {
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri("http:sasa.com");
        HttpResponseMessage response = await client.GetAsync("api/GetData");
        myClassl data = await response.Content.ReadAsAsync<myClassl>();

        return data ;
    } 
```

当我写

```
myClassl  t = await DataGetter.GetData(); 
```

我有： 'await' 运算符只能在异步方法中使用。考虑使用“异步”修饰符标记此方法并将其返回类型更改为“任务”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:24:09.527

你需要`async`在你写的地方标记你的方法：

```
// Add async to your calling method
private async Task SomeOtherMethod()
{
    myClassl t = await DataGetter.GetData(); 
```

任何在`await`内部使用的方法都必须是`async`方法本身。

# r - 成对的图形数据作为段

> ID：15210417
> 
> 赞同：1
> 
> 时间：2013-03-04T20:23:10.080
> 
> 标签：r, plot, ggplot2, lattice

我试图绘制成对的点，因为这是它们出现的格式。该数据描述了商业部件（电子元件），其行为被描述为介于两个频率之间。这是一个数据集的小例子：

```
freq1  freq2  gain  
2.0    6.0    43
6.0   18.0    40
8.5   10.5    50 
8.5    9.3    52 
```

因为数据是在一个频率范围内呈现的，**所以我想将其显示为连接两个点的线**。例如，第一行描述了两个点：(2, 43) 和 (6, 43)。

另一种可能性是计算中心频率，定位那里的点并计算**我在每个点绘制的图像的宽度，使其范围为`freq1`和`freq2`**。这引发了很多问题，我无法开始编写代码。

所以，我的问题是：哇，我可以根据连接线和（最好使用ggplot2）绘制每个`gain`值吗？`freq1``freq2`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T20:59:44.020

只是一个猜测，`latticeExtra`有一个有趣的`segplot`（它是一个扩展的点图）

![在此处输入图像描述](../Images/26b4f575d1e190f8a4f417be102417bf.png)

读取一些数据：

```
 dat <- read.table(text ='freq1  freq2  gain  
2.0    6.0    43.
6.0   18.0    40.
8.5   10.5    50\. 
8.5    9.3    52.',head=T)

dat$compo <- paste('compo',1:nrow(dat),sep='')
library(latticeExtra)
segplot(reorder(factor(compo), gain)~freq1+freq2,
        data=dat,draw.bands=FALSE,centers=gain,
        segments.fun = panel.arrows,ends = "both", 
        angle = 90, length = 1, scales=list(y=list(cex=1.5)),
        unit = "mm",
        main = ' Range frequencies'  ,sub= 'electronic components', 
        ## a serious theme here :)
        par.settings = theEconomist.theme(with.bg = TRUE)) 
```

**编辑**添加一些图片

```
library(png)

ll <- list.files(path=path_picts,patt='compo[0-9].*',full.names=T)
imgs <- lapply(ll,readPNG)
#ll <- gsub('.*(compo[0-9]).png','\\1',ll)
#names(imgs) <- ll
dat$compo <- paste('compo',1:nrow(dat),sep='')
segplot(factor(compo)~freq1+freq2,
        data=dat,draw.bands=FALSE,centers=gain,
        segments.fun = panel.arrows,ends = "both", 
        angle = 90, length = 1, scales=list(y=list(cex=1.5)),
        unit = "mm",
        main = ' Range frequencies'  ,sub= 'electronic components',
        par.settings = ggplot2like(),axis = axis.grid,

        panel = function(x,y,...){
            panel.segplot(x,y,...)
            browser()
            lapply(seq_along(ll),function(img){
                 x1 <- x[img];y1 <- y[img];
                  grid.raster(image=imgs[[img]],x=(x1+y1)*0.5,y=img,width=y1-x1, height=0.5,interpolate=F,
                        default.units = 'native')})

        }) 
```

![在此处输入图像描述](../Images/fa5d40ecd9714ade02ee348e6808d22f.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T20:54:59.647

这是您问题的答案

```
> dat
  freq1 freq2 gain
1   2.0   6.0   43
2   6.0  18.0   40
3   8.5  10.5   50
4   8.5   9.3   52

> attach(dat)

#Don't actually need to calculate the midpoint but since you suggested it
#that's the way I did it
midpoint = (freq1+freq2)/2
plot(midpoint,gain,xlim=c(min(freq1),max(freq2)),col="white",xlab="")

points(freq1,gain,col=1:length(gain),pch=19)
points(freq2,gain,col=1:length(gain),pch=19)

for(i in 1:length(gain)){
    lines(c(freq1[i],freq2[i]),c(gain[i],gain[i]),col=i)
} 
```

![在此处输入图像描述](../Images/0fc5f7fe72fc638c0e33fc43506c84e9.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-04T21:40:12.807

对于它的价值，这里有一个想法`ggplot2`。我会让你在它上面建造任何东西，尽管它或多或少拥有一切。

```
ggplot(data = df, aes(x=freq1, y=gain)) + 
      geom_segment(aes(xend=freq2, yend=gain, colour=factor(1:4))) 
```

![在此处输入图像描述](../Images/53833087473379f09414838a313c6db5.png)

# asp.net-mvc - 路线段参数问题

> ID：15210418
> 
> 赞同：0
> 
> 时间：2013-03-04T20:23:13.293
> 
> 标签：asp.net-mvc

我在 MVC4 中的路线遇到问题。

我有一些动作存在于特定产品之外，还有更多存在于用户选择的产品中。为了适应我已经映射了两条路线的行动

```
 context.MapRoute(
            "CMS_product",
            "CMS/{productId}/{controller}/{action}/{id}",
            new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, productId = default(Guid).ToString(), id = UrlParameter.Optional },
            new string[] { "Areas.CMS.Controllers" }
        );

        context.MapRoute(
            "CMS_default",
            "CMS/{controller}/{action}/{id}",
            new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
            new string[] { "Areas.CMS.Controllers" }
        ); 
```

因此，虽然这适用于泛型，但我的所有路由都不会再匹配默认路由，而不是获取类似的 URL

~/CMS/产品/列表

在产品之外操作时，我会得到这样的网址。

~/CMS/00000000-0000-0000-0000-000000000000/产品/列表

另一个注意事项：我尝试将 Prodcut/List 硬编码为路由，并将其放在 CMS_product 之前，希望它会在其他 url 之前匹配。我觉得我必须忽略一些简单的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:57:01.073

为了完整起见，如果其他人遇到类似问题，这里就是解决方案。

```
 // used to match ~/CMS/00000000-0000-0000-0000-000000000000/Product/List 
       // prevents the GUID.Empty from showing when there is no product value
       // in the segment
       context.MapRoute(
            name: "CMS_nullproduct",
            url: "CMS/{controller}/{action}/{id}",
            defaults: new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
            constraints: new { productId = Guid.Empty.ToString() },
            namespaces: new string[] { "Areas.CMS.Controllers" }
        ); 

        // matches any route with a productId segment value of anything aside from
        // GUID.Empty
        context.MapRoute(
            name: "CMS_product",
            url: "CMS/{productId}/{controller}/{action}/{id}",
            defaults: new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
            constraints: new { productId = @"^(\{{0,1}([0-9a-fA-F]){8}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){4}-([0-9a-fA-F]){12}\}{0,1})$" },
            namespaces: new string[] { "Areas.CMS.Controllers" }
        );

        context.MapRoute(
            name: "CMS_default",
            url: "CMS/{controller}/{action}/{id}",
            defaults: new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
            namespaces: new string[] { "Areas.CMS.Controllers" }
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:09:38.887

在我看来，您应该删除`productId`.

```
context.MapRoute(
        "CMS_product",
        "CMS/{productId}/{controller}/{action}/{id}",
        new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
        new string[] { "Areas.CMS.Controllers" }
    ); 
```

如果您不提供 productId，您的路由引擎应该匹配第二个路由并生成 ~/CMS/Product/List 但如果您提供 productId 它匹配第一个规则。

另外，您可以编写自定义[IRouteConstraint](http://msdn.microsoft.com/en-us/library/system.web.routing.irouteconstraint.aspx)或使用正则表达式来限制 productId 值。

```
context.MapRoute(
        "CMS_product",
        "CMS/{productId}/{controller}/{action}/{id}",
        new { controller = MVC.CMS.Home.Name, action = MVC.CMS.Home.ActionNames.Index, id = UrlParameter.Optional },
        new { productId = @"^\d{8}\-\d{4}\-\d{4}\-\d{4}\-\d{12}$" }
        new string[] { "Areas.CMS.Controllers" }
    ); 
```

# jsf - 为什么 FacesServlet 不能有 /*. 的 url 模式？

> ID：15210420
> 
> 赞同：16
> 
> 时间：2013-03-04T20:23:19.660
> 
> 标签：jsf, jakarta-ee, url-pattern, servlet-mapping

这是我的 web.xml ：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

当我导航到：

```
http://localhost:8080/LearningRoot/index.xhtml 
```

我可以很好地看到页面，但是当我导航到：

```
http://localhost:8080/LearningRoot/ 
```

我得到错误：

> 发生错误：
> 
> **FacesServlet 不能有 /* 的 url 模式。请定义不同的 url 模式。**

但为什么？

这是我的欢迎文件：

```
<welcome-file-list>
    <welcome-file>/index.xhtml</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-04T21:27:22.923

因为这意味着**所有**到达上下文根的东西都将由 FacesServlet 处理，FacesServlet 已经知道它不可能满足的要求（这显然没有意义）。

要实现您想要的映射，请`.xhtml`在 FaceServlet 上使用映射

```
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

# java - 如何让 eclipse webby 插件在 root 上下文中运行 webapp

> ID：15210424
> 
> 赞同：1
> 
> 时间：2013-03-04T20:23:44.437
> 
> 标签：java, eclipse, tomcat, jetty, webby

我最近从 eclipse m2e-wtp 插件更改为 webby 插件，但我无法让我的 webapp 在根上下文中运行。我在嵌入式码头和安装的tomcat中都试过了，结果总是一样的。

在我有的tomcat插件中

```
 <configuration>
      <path>/</path>
      <port>8080</port> 
```

在码头插件中我有

```
 <configuration>
      <contextPath>/</contextPath> 
```

在 Eclipse 的“Web 项目设置”中，我将“上下文根：”设置为“/”。

在项目的调试配置中，我将“上下文：”设置为“/”并指向我安装的 tomcat6。

当我“以 Webby 的身份进行调试”时，我仍然必须转到 /project-name 才能看到 webapp。这在 m2e-wtp 下没有问题。为了让 Webby 真正部署到根上下文，我还需要查看其他配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T20:04:37.747

尝试这个：

1.  转到“运行 > 运行配置...”
2.  选择 Webby 运行配置
3.  将上下文字段更改为有两个正斜杠，而不是只有一个，即'//'。

![为安装在根上下文中的名为 minerva-web 的项目运行配置](../Images/77ca8ba0d4f9903dd2e216db93d92f1f.png)

我不确定 Webby 是否打算以这种方式工作……但它对我有用。在进行此更改之前，我必须使用 localhost:9091/projectName。进行更改后，我可以访问 localhost:9091。

希望它有效！

# internet-explorer - Yii 菜单项 linkOptions->onclick 中的 IE9/10 引号被编码为“

> ID：15210426
> 
> 赞同：0
> 
> 时间：2013-03-04T20:23:48.130
> 
> 标签：internet-explorer, yii, internet-explorer-9, internet-explorer-10

在 IE9/10 中，Yii 菜单项

```
$this->menu=array(
...
array('label'=>'Project Report', 'url'=>'#',
    'linkOptions'=>array('onclick'=>'$("#projectDatePicker").dialog("open");$(".hidden-dialog").removeAttr("style"); return false;')),
...
?> 
```

被渲染为，

```
<a onclick="$(&quot;#projectDatePicker&quot;).dialog(&quot;open&quot;);$(&quot;.hidden-dialog&quot;).removeAttr(&quot;style&quot;); return false;" 
```

在 IE9/10 上第一次渲染，刷新页面后就可以工作了。除了 IE9/10 之外，这在任何其他 IE 版本中似乎都不是问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T22:28:47.007

我也做不到。我的解决方法：

```
$this->menu=array(
...
array('label'=>'Project Report', 'url'=>'#',
    'linkOptions'=>array('onclick'=>'openDialog()')),
...
?>

<?php Yii::app()->clientScript->registerScript('open-dialog', '
    function openDialog() {
        $("#projectDatePicker").dialog("open");
        $(".hidden-dialog").removeAttr("style");
        return false;
    }
', CClientScript::POS_END); ?> 
```

# php - 具有多个变量且没有 id 的 Mod_rewrite

> ID：15210428
> 
> 赞同：0
> 
> 时间：2013-03-04T20:23:56.113
> 
> 标签：php, mod-rewrite

我正在尝试创建一些具有四个变量且不使用 id 的 mod 重写，目前我的业务页面是：

> www.mysite.com/business.php?Busid=1

我希望它们看起来像：

> www.mysite.com/City/BusinessType/BusinessName-Neighborhood

有没有办法我可以继续通过 id 获取页面（以确保它是唯一的）并重写 URL 并且不让它包含 id？

谢谢！

# python - 获取指向 Numpy/Numpypy 数据的指针的便携式/快速方法

> ID：15210429
> 
> 赞同：8
> 
> 时间：2013-03-04T20:24:01.683
> 
> 标签：python, api, numpy, ctypes, pypy

我最近尝试过`PyPy`并且对这种方法很感兴趣。我有很多 Python 的 C 扩展，它们都用于`PyArray_DATA()`获取指向`numpy`数组数据部分的指针。不幸的是，PyPy 似乎没有`numpypy`为其模块中的数组导出等效`cpyext`项，因此我尝试按照他们网站上的建议使用`ctypes`. 这将获取指针的任务推到了 Python 级别。

似乎有两种方式：

```
import ctypes as C
p_t = C.POINTER(C.c_double)

def get_ptr_ctypes(x):
    return x.ctypes.data_as(p_t)

def get_ptr_array(x):
    return C.cast(x.__array_interface__['data'][0], p_t) 
```

只有第二个适用于 PyPy，因此为了兼容性，选择很明确。对于 CPython，两者都非常慢，并且对我的应用程序来说是一个完全的瓶颈！有没有一种快速便携的方法来获取这个指针？或者是否有类似的`PyArray_DATA()`for PyPy （可能未记录）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:07:31.993

我仍然没有找到一个完全令人满意的解决方案，但是仍然可以做一些事情来获得在 CPython 中开销少得多的指针。首先，上述两种方式之所以这么慢，是因为`.ctypes`和`.__array_interface__`都是按需属性，由`array_ctypes_get()`和设置`array_interface_get()`。`numpy/numpy/core/src/multiarray/getset.c`第一个导入 ctypes 并创建一个`numpy.core._internal._ctypes`实例，而第二个创建一个新字典并在其中填充除数据指针之外的许多不必要的东西。

对于这种开销，在 Python 级别上没有什么可以做的，但是可以在 C 级别上编写一个微模块来绕过大部分开销：

```
#include <Python.h>
#include <numpy/arrayobject.h>

PyObject *_get_ptr(PyObject *self, PyObject *obj) {
    return PyLong_FromVoidPtr(PyArray_DATA(obj));
}

static PyMethodDef methods[] = {
    {"_get_ptr", _get_ptr, METH_O, "Wrapper to PyArray_DATA()"},
    {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC initaccel(void) {
    Py_InitModule("accel", methods);
} 
```

像往常一样编译为 中的扩展`setup.py`，并导入为

```
try:
    from accel import _get_ptr
    def get_ptr(x):
        return C.cast(_get_ptr(x), p_t)
except ImportError:
    get_ptr = get_ptr_array 
```

在 PyPy 上，`from accel import _get_ptr`将失败并`get_ptr`回退到`get_ptr_array`与 Numpypy 一起使用的 。

就性能而言，对于轻量级 C 函数调用，`ctypes + accel._get_ptr()`仍然比原生 CPython 扩展慢很多，后者基本上没有开销。它当然比上面要快得多`get_ptr_ctypes()`，`get_ptr_array()`因此对于中等重量的 C 函数调用，开销可能变得微不足道。

一个已经获得了与 PyPy 的兼容性，尽管我不得不说，在花了相当多时间尝试为我的科学计算应用程序评估 PyPy 之后，只要他们（非常固执地）拒绝支持，我看不到它的未来完整的 CPython API。

**更新**

我发现`ctypes.cast()`引入`accel._get_ptr()`. 可以通过将接口中的所有指针声明为`ctypes.c_void_p`. 这就是我最终的结果：

```
def get_ptr_ctypes2(x):
    return x.ctypes._data

def get_ptr_array(x):
    return x.__array_interface__['data'][0]

try:
    from accel import _get_ptr as get_ptr
except ImportError:
    get_ptr = get_ptr_array 
```

在这里，通过直接访问隐藏属性`get_ptr_ctypes2()`来避免强制转换。`ndarray.ctypes._data`以下是从 Python 调用重量级和轻量级 C 函数的一些计时结果：

```
 heavy C (few calls)      light C (many calls)
ctypes + get_ptr_ctypes():         0.71 s                   15.40 s
ctypes + get_ptr_ctypes2():        0.68 s                   13.30 s
ctypes + get_ptr_array():          0.65 s                   11.50 s
ctypes + accel._get_ptr():         0.63 s                    9.47 s

native CPython:                    0.62 s                    8.54 s
Cython (no decorators):            0.64 s                    9.96 s 
```

因此，无论有`accel._get_ptr()`没有`ctypes.cast()`s，ctypes 的速度实际上都可以与原生 CPython 扩展相媲美。所以我只需要等到有人重写`h5py`，`matplotlib`并且`scipy`使用 ctypes 才能尝试 PyPy 处理任何严重的事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:47:27.440

这可能还不够回答，但希望是一个很好的提示。我在代码的某些部分使用 scipy.weave.inline() 。我对接口本身的速度了解不多，因为我执行的函数非常繁重，并且仅依赖于几个指针/数组，但对我来说似乎很快。也许您可以从 scipy.weave 代码中获得一些灵感，尤其是从`attempt_function_call`

[https://github.com/scipy/scipy/blob/master/scipy/weave/inline_tools.py#L390](https://github.com/scipy/scipy/blob/master/scipy/weave/inline_tools.py#L390)

如果你想看看 scipy.weave 生成​​的 C++ 代码，

1.  从这里产生一个简单的例子：http: [//docs.scipy.org/doc/scipy/reference/tutorial/weave.html](http://docs.scipy.org/doc/scipy/reference/tutorial/weave.html)，

2.  运行python脚本

3.  获取 scipy.weave 缓存文件夹：

    ```
    import scipy.weave.catalog as ctl
    ctl.default_dir()
    Out[5]: '/home/user/.python27_compiled' 
    ```

4.  查看文件夹中生成的 C++ 代码

# windows-7-x64 - 无法在 Visual studio.net 2010 中安装 Web 标准更新

> ID：15210430
> 
> 赞同：0
> 
> 时间：2013-03-04T20:24:05.913
> 
> 标签：windows-7-x64, visual-studio-2010

我的系统上有 Vs.net 2010 Sp1 并想安装“Web 标准更新”以添加 HTML5 和 CSS3 支持。但是当运行“Web 标准更新”安装文件时会显示有关下载 Visual Studio.Net 2010 SP1 的警报，但我已经安装了它。什么是问题？

# ruby-on-rails - 手动安装 ffi gem

> ID：15210432
> 
> 赞同：0
> 
> 时间：2013-03-04T20:24:09.303
> 
> 标签：ruby-on-rails, ruby, gem, bundler

我正在尝试安装 ffi gem。它是我的一个应用程序的依赖项。我已经尝试了几个小时来让它发挥作用。我收到此错误：

```
#error "Use of <stdbool.h> is valid only in a c99 compilation environment." 
```

我知道这个错误的解决方案是添加`CFLAGS= -std=c99`. 问题是当我跑步时

`gem install ffi -v '1.3.1' -- --with-cflags=-std=c99`

我仍然收到错误，并且在日志中我看到它无法识别`CFLAGS`我添加的内容。

然后我决定进入`makefile`并手动添加`CFLAGS`then 运行`make`和`make install`

这似乎可行，我没有收到任何错误，但是当我`bundle install`在我的应用程序中它仍然无法识别要安装的 ffi gem 并重新创建`makefile`没有 CFLAGS 并再次失败。

手动执行此操作时我缺少什么吗？

或者有没有办法从 gem install 中强制 CFLAGS ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:28:49.547

只是在这里猜测，但试试这个：

```
CFLAGS="-std=c99" gem install ffi -v '1.3.1' 
```

# android - IllegalStateException: stableCount < 0: -1 写入设备数据库

> ID：15210434
> 
> 赞同：3
> 
> 时间：2013-03-04T20:24:10.093
> 
> 标签：android, illegalstateexception, android-contentresolver

在我的应用程序中，我使用以下代码将消息写入内部设备数据库： `context.getContentResolver().insert(Uri.parse("content://sms/sent"), values);`

一些用户（目前仅在 Android 4.2.2 的 Nexus 7 上）报告了以下错误：

```
 java.lang.IllegalStateException: stableCount < 0: -1
    at android.os.Parcel.readException(Parcel.java:1433)
    at android.os.Parcel.readException(Parcel.java:1379)
    at android.app.ActivityManagerProxy.refContentProvider(ActivityManagerNative.java:2596)
    at android.app.ActivityThread.releaseProvider(ActivityThread.java:4608)
    at android.app.ContextImpl$ApplicationContentResolver.releaseProvider(ContextImpl.java:1997)
    at android.content.ContentResolver.insert(ContentResolver.java:875) 
```

我找不到任何提示为什么会抛出此异常，也找不到它的含义。我能做些什么来避免这种情况（除了抓住它）或者有人可以解释这意味着什么？

在此先感谢，丹尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-29T03:39:43.613

我遇到了类似的问题（java.lang.IllegalStateException: stableCount < 0: -1），但与你的有点不同，我的错是两次调用 Cursor.close() 。

对于 IContentProvider.insert 调用抛出异常，会导致调用 releaseProvider(provider); 所以我们应该首先找出为什么 IContentProvider.insert 会抛出异常。

```
 public final Uri insert(Uri url, ContentValues values)
{
    IContentProvider provider = acquireProvider(url);
    if (provider == null) {
        throw new IllegalArgumentException("Unknown URL " + url);
    }
    try {
        long startTime = SystemClock.uptimeMillis();
        Uri createdRow = provider.insert(mPackageName, url, values);
        long durationMillis = SystemClock.uptimeMillis() - startTime;
        maybeLogUpdateToEventLog(durationMillis, url, "insert", null /* where */);
        return createdRow;
    } catch (RemoteException e) {
        // Arbitrary and not worth documenting, as Activity
        // Manager will kill this process shortly anyway.
        return null;
    } finally {
        releaseProvider(provider);
    }
} 
```

# .net - 如何访问第一个 LINQ 元素？

> ID：15210436
> 
> 赞同：1
> 
> 时间：2013-03-04T20:24:14.900
> 
> 标签：.net, vb.net, linq

执行此代码后：

```
Dim arr = From ctl In ContainerCtl.Controls.Cast(Of Control)()
            Select ctl
            Where (ctl.Enabled = True) AndAlso _
            (Not TypeOf ctl Is Label) AndAlso _
            (Not TypeOf ctl Is Panel) AndAlso _
            (Not TypeOf ctl Is GroupBox) AndAlso _
            (Not TypeOf ctl Is C1.Win.C1FlexGrid.C1FlexGrid AndAlso bSkipGrid)
            Order By ctl.TabIndex 
```

如何访问第一个元素？我需要将其作为 Control 对象访问。

谢谢！

更新：使用 First() 或 FirstOrDefault() 永远不会起作用：

![错误画面...](../Images/babe276339fb8607dc8463348aa3fd38.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:25:00.727

您需要在文件顶部包含以下内容：

```
using System.Linq; 
```

然后，您需要做的就是使用以下内容：

```
arr.First() 
```

或者，如果您的可枚举结果可能为零（这将导致上述引发异常）。

```
arr.FirstOrDefault() 
```

确保在后一种情况下检查`null`，请注意，后者也存在不说第一个对象何时`null`是 的问题，但这是另一天的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:56:30.217

最后，我决定简单地使用 For Each 循环并获取第一个有效元素。我从来没有弄清楚为什么 First() 从来没有工作过。我使用了所有提到的技术，但没有运气。

感谢所有的建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T18:54:40.340

因为你有`Option Infer Off`。打开项目属性并设置`Option Infer On`或添加`Option Infer On`到代码文件的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T22:15:24.010

你的陈述顺序错了吗？不应该是：

```
Dim arr = From ctl In ContainerCtl.Controls.Cast(Of Control)()
        Where (ctl.Enabled = True) AndAlso _
        (Not TypeOf ctl Is Label) AndAlso _
        (Not TypeOf ctl Is Panel) AndAlso _
        (Not TypeOf ctl Is GroupBox) AndAlso _
        (Not TypeOf ctl Is C1.Win.C1FlexGrid.C1FlexGrid AndAlso bSkipGrid)
        Order By ctl.TabIndex
        Select ctl 
```

然后打电话

```
arr.First()
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T20:26:45.873

我不确定 vb 但在 c# 中有一个 arr.First() 方法将返回集合的第一个元素，或者你可以总是做 arr.ToArray()[0] 或 arr.ToList()[0]

# facebook - 如何指定墙柱的布局？

> ID：15210441
> 
> 赞同：0
> 
> 时间：2013-03-04T20:24:36.767
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在使用 facebook opengraph 在 facebook 上分享我的用户故事。

我正在尝试为我的应用程序的墙贴创建以下布局：[图 1](http://imageshack.us/photo/my-images/441/wantb.png/) 我所能得到的是：[图 2](http://imageshack.us/photo/my-images/15/postdeb.png/) 我在 opengraph 配置中为我的操作选择了项目布局，但是，标题始终位于图像下方。

如何实现图 1 中的布局？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T03:36:15.573

我发现了问题。Facebook 使用新的布局，即。图 2 中的那个，用于大于 200x200 像素的图像。而且，facebook 坚持我们使用大于 200x200 像素的图像，因为它在聚合中看起来更好。但是，如果您仍然想要图 1 中的布局，则需要使用小于 200x200 像素的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T18:46:35.193

Facebook 可能再次更改了这一点，但我发现图像需要为 600x315 像素才能显示为较大的版本 - 请参阅[Facebook 的相关信息](https://developers.facebook.com/docs/sharing/best-practices#images)

# php - facebook用户ID的数据类型是什么

> ID：15210445
> 
> 赞同：15
> 
> 时间：2013-03-04T20:24:54.747
> 
> 标签：php, mysql, facebook, performance, random

facebook 使用什么数据类型来存储用户 ID，对于这种现场性能和可伸缩性的角度来说，最好的数据类型应该是什么。

如果一个使用 int 4 字节那么我猜它不够大，如果 8 字节 int 那么如何为每个用户分配随机数或相同的字符串。

那么，给用户一个固定长度的随机 id 的最佳方式是什么，同时考虑到可扩展性和性能呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T20:31:52.847

好问题。Facebook ID 和 Tweet ID 一样会导致问题。两者都超过了 32 位整数范围。根据编程语言的细节和目的（例如数据库、代码等），您可能想要使用浮点数或双精度数，但根据我的经验，将它们转换为字符串是令人满意的。

在 MySQL 中，如已标记，提供的是[BIGINT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)数据类型，它足够大以将这些 ID 存储为数字。棘手的部分是当您读取这些值并在程序代码中处理它们时。那些大于系统架构/编程语言允许的最大值的可能会导致错误或被截断，从而导致不一致。

如果要在 MySQL 中使用固定长度的大 ID，一个好的做法是使用[CHAR](http://dev.mysql.com/doc/refman/5.5/en/char.html)类型和 HEX 格式，也可以使用[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)格式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-03-16T07:34:43.420

使用 BIGINT(64) 将 Facebook 用户 ID 存储在 MySQL 数据库表中。
给你：[https ://developers.facebook.com/blog/post/45/](https://developers.facebook.com/blog/post/45/)

# iphone - 使用 UIPanGestureRecognizer 旋转矩形

> ID：15210447
> 
> 赞同：0
> 
> 时间：2013-03-04T20:25:01.517
> 
> 标签：iphone, ios, cocoa-touch, math, uiview

我有以下视图，其中我使用向上或向下方向的平移手势来正向或负向旋转它：

![在此处输入图像描述](../Images/5a30092ca466b3f97de2436626e17e64.png)

我想知道，是否有一个数学方程可以精确地将平移量转换为应该旋转的量，以便在旋转时让用户手指保持在视图上的时间是正确的？例如，如果平移平移返回为 1，旋转它的适当量是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T01:40:45.463

您需要提供一些细节才能给出有意义的答案：

1.  您是围绕其中心旋转视图（默认）还是有锚点？
2.  由于视图在旋转，而触摸在父视图中严格垂直移动，当视图旋转远离定义平移的垂直线时，预期的行为是什么？
3.  您是否有理由使用平移手势而不是旋转手势，甚至只是直接触摸跟踪？似乎它产生的问题多于解决的问题。

为简单起见，我将假设视图围绕其中心旋转，并且我将使用从视图右侧开始的平移作为示例，旋转不超过 ±90°。这里有两个选项：

1.  上下移动线性转换为旋转角度，即，给定距离的平移使视图旋转相同的量，无论平移从何处开始。在这种情况下，您需要确定平底锅的上限和下限。它们可能是超级视图的界限。无论如何，您都希望将沿 Y 方向行进的距离转换为介于 -1 和 1 之间的值，其中 -1 表示下限，1 表示上限。像 2 * (dy / superview.bounds.size.height - 0.5) 这样的东西。将其乘以 π/2（math.h 中的 M_PI_2）以从 [-1, 1] 范围缩放到 [-π/2, π/2] 范围，您就有了从手势开始时视图的旋转。

2.  视图跟踪触摸，使其右边缘始终“指向”触摸。在这种情况下，平移并不是非常有用，因为您只需要超级视图中的触摸位置，而不是行进的距离。将 dx 和 dy 计算为从视图中心到触摸位置的 x 和 y 坐标差。然后计算 atan2(dy, dx) 并得到视图的绝对旋转角度。

我希望这能让你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:11:52.650

答案是角度是 panAmount.y / rectangleWidth。

这是证明：[https ://math.stackexchange.com/questions/322694/angle-of-rotated-line-segment](https://math.stackexchange.com/questions/322694/angle-of-rotated-line-segment)

# javascript - 返回符合条件的数组中的项目

> ID：15210451
> 
> 赞同：0
> 
> 时间：2013-03-04T20:25:20.017
> 
> 标签：javascript, jquery, arrays

使用以下代码（或不使用），我试图返回`title`所有项目的属性，只要该`title`属性不是`NaN`

我了解目前所有具有 title 属性的项目都将被退回。如何指定返回哪个？

```
function loadItems(id){
   itemPath = start.contains.models;
   for (var i = 0; i<itemPath.length; i++) {
      if(itemPath[i].attributes.id==id) {
         return itemPath[i].attributes.grades.models.map(function(g) {
            $('#foot').append(g.attributes.title);
         });
         }
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:28:47.537

在您只返回所有内容的循环之外，定义一个容器来保存有效项目（空数组）。当您遍历每个项目时，如果它包含标题属性并且标题符合您的条件，请将当前项目添加到您在循环之外创建的容器中。仅当物品符合您的需要时，才将其添加到您返回的容器中。

当您全部完成循环后，返回该容器，该容器现在应该只包含包含标题并匹配您的检查条件的项目。

因此，如下所示，在您的循环中，如果标题`isNaN()`将其添加到您的数组中以返回。

```
function loadItems(id){
  itemPath = start.contains.models;
  var returnMe = new Array();
  for (var i = 0; i<itemPath.length; i++) {
    if(itemPath[i].attributes.id==id) {
      itemPath[i].attributes.grades.models.map(
        function(g) {
          if(isNaN(g.attributes.title)){
            returnMe.push(g.attributes.title);
          }}
      );
    }
  }
  return returnMe;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:30:22.520

像这样的东西？？

```
function loadItems(id){
itemPath = start.contains.models;
for (var i = 0; i<itemPath.length; i++) {
  if(itemPath[i].attributes.id==id) {
     return itemPath[i].attributes.grades.models.map(function(g) {
      var_title = g.attributes.title;
      if(var_title=='My Title'){
        $('#foot').append(g.attributes.title);}
     });
     }
  }
} 
```

萨卢多斯 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:33:08.447

也许这个？我肯定需要有关 itemPath 的更多信息。

```
function loadItems(id){
    $(itemPath).find("#"+id+"[title]").each(function () {
        $("#foot").append($(this).attr("title"));
    });
} 
```

# wpf - 在哪里可以找到适用于 Visual Studio 2010 的 Expression Blend 4？

> ID：15210453
> 
> 赞同：2
> 
> 时间：2013-03-04T20:25:27.947
> 
> 标签：wpf, visual-studio-2010, xaml, expression-blend, expression-blend-4

我想尝试 Expression Blend，发现 Expression Studio 已停产。[我有 Visual Studio 2010 Ultimate，我可以在 Expression 网站 ( http://www.microsoft.com/expression/](http://www.microsoft.com/expression/) )上找到的唯一内容是 Visual Studio 2012 软件。

在哪里可以找到适用于 Visual Studio 2010 的 Expression Blend 4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:50:21.910

如果您的 VS Ultimate 许可证的 MSDN 订阅仍然有效，您可以从那里下载旧版本。如果没有，那么新版本是您唯一的选择，但由于 VS 2012 中添加了往返功能，您仍然应该能够使用较新版本的 Blend 处理您的 2010 解决方案*。*

# python - 如何在不导航到其目录的情况下启动应用程序

> ID：15210454
> 
> 赞同：1
> 
> 时间：2013-03-04T20:25:33.807
> 
> 标签：python, console

我四处寻找答案，但我不知道如何以谷歌能够理解的方式来表达它。

我正在尝试学习 Python，并且已将其安装在我的机器上。但是，当我在 cmd.exe 中键入“python”时，找不到/启动 python 应用程序。

我必须手动转到找到 python.exe 的目录才能运行我的 python 命令。这是正常的吗？在线教程似乎表明我应该能够从任何地方运行该应用程序：s

我在 Win7 上，并试图从 BitNami 的 Django 堆栈中运行 Python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:29:43.777

http://stackoverflow.com/questions/7054424/python-not-recognised-as-a-command

将 python 添加到您的环境路径。然后，您应该可以在任何地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:29:54.453

您是否将 python 安装文件夹添加到环境变量“PATH”？您可以在此处找到更多详细信息：http: [//docs.python.org/2/using/windows.html](http://docs.python.org/2/using/windows.html)

# c# - 在 C# 中从 DLL 运行代码时出错

> ID：15210455
> 
> 赞同：0
> 
> 时间：2013-03-04T20:25:42.713
> 
> 标签：c#, visual-studio, dll, dllimport

我似乎无法克服这个错误，所以我想知道我的调用代码或我的 DLL 是否做错了什么？

-错误-

```
$exception  {System.BadImageFormatException: The module was expected to contain an assembly manifest. (Exception from HRESULT: 0x80131018) 
```

-呼叫代码-

```
 Assembly assembly = Assembly.LoadFile(@"C:\Users\Admin\Documents\Visual Studio 2012\Projects\MyDLL\Release\myDLL.dll");
            Type type = assembly.GetType("HelloWorld");
            var obj = Activator.CreateInstance(type);

            // Alternately you could get the MethodInfo for the TestRunner.Run method
            type.InvokeMember("HelloWorld",
                              BindingFlags.Default | BindingFlags.InvokeMethod,
                              null,
                              obj,
                              null); 
```

-DLL 代码-

```
#include <Windows.h>

using namespace std;

extern "C" _declspec(dllexport) void __stdcall HelloWorld(LPSTR title, LPSTR msg)
{
   MessageBox( NULL, msg, title, MB_OK);
}

BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:30:18.223

`Assembly.LoadFile`只能用于加载 .NET 程序集，而您正在尝试加载普通的 .DLL。您需要使用 P/Invoke 才能从 .NET 调用 dll 中的方法。尝试在您的班级中添加以下声明：

```
[DllImport("myDll.dll")]
static extern void HelloWorld(string title, string msg); 
```

然后像调用任何其他 .NET 方法一样调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:32:43.417

首先，我认为您的后期绑定调用是错误的，应该是：

```
obj.InvokeMember("NameOfYouyMethod", 
                 BindingFlags.Default | BindingFlags.InvokeMethod, 
                 null, obj, new object[] { YourParameters ); 
```

如果您想通过后期绑定真正做到这一点，请查看[此处](http://www.4microsoftsolutions.com/post/Late-Binding-in-CNET.aspx)的博客。

正如其他人指出的那样，使用 P/Invoke。

# c# - 如何过滤项目的子列表

> ID：15210458
> 
> 赞同：5
> 
> 时间：2013-03-04T20:25:45.487
> 
> 标签：c#, .net, linq, filter, sublist

我要一个`List<Container>`地方`Container.Active == true`，只给我一个`containerObject.Items > 2`。如何以这种方式过滤子列表？

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication1
{
    internal class Container
    {
        public List<int> Items { get; set; }
        public bool Active { get; set; }

        public Container(bool active, params int[] items)
        {
            Items = items.ToList();
            Active = active;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var containers = new List<Container> {new Container(true,1, 2, 3), new Container(false, 1,2,3,4,5,6), new Container(true,1,2,5,6,7,8,9,10)};
            var result = containers.Where(c => c.Active);

            foreach (var container in result)
            {
                foreach (var item in container.Items)
                {
                    Console.WriteLine(item);//I should not print any values less than two here
                }
            }
        }
    }
} 
```

我不应该在注明的地方打印任何小于 2 的值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T20:29:32.243

尝试这个：

```
var result = from container in containers.Where(c => c.Active)
             from item in container.Items
             where item > 2
             select container; 
```

标准形式：

```
var standard_result = containers
    .Where(container => container.Active && container.Items.All(i => i > 2))
    .SelectMany(con => con.Items); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T20:28:35.250

尝试：

```
var result = containers.Where(c => c.Active && c.Items.Count() > 2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T20:29:02.467

您将不得不创建一个新的`Container`. 除非您想更改现有的（如果您需要，我将添加该代码）

```
var result = containers.Where(c => c.Active)
    .Select(c=>new Container(c.Active, c.Select(i=>i>2).ToArray()))
    .Select(c=>c.Items.Count > 0); 
```

如果所有项目都被过滤掉，最后一行确保不返回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-04T20:33:56.763

根据您的反馈，我认为您正在寻找这样的查询：

```
var result = containers
    .Where(c => c.Active)
    .Select(c => new Container(c.Active, c.Items.Where( i => i>2).ToArray())); 
```

它会复制容器，但它会过滤掉不大于 2 的项目

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-04T20:33:58.463

如果您真的不需要在单个查询中执行此操作：

```
var result = containers.Where(c => c.Active).ToList();
result.ForEach(c => c.Items.RemoveAll(i => i <= 2)); 
```

# c# - 实现自定义 TypeConverter

> ID：15210462
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:10.143
> 
> 标签：c#, .net, system.componentmodel, typedescriptor

我有一个非常简单的场景，我只想扩展 the 的功能，`System.ComponentModel.BooleanConverter`以便它允许多个选项，而不仅仅是`true`and `false`。

因此，例如`yes`,等值与 .相同。`1``on``true`

我尝试覆盖这些`GetStandardValues()`方法来进行快速测试，我的假设是，如果我返回了所有特定值的集合，如果我传入一个定义的值，则调用`IsValid(string)`应该返回该集合，`true`但情况似乎并非如此。我是否必须实施/覆盖一大堆废话才能做到这一点？

我想知道这是否值得，因为我真正需要的只是`IsValid()`功能。或者也许有比`TypeDescriptors`最初使用更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:41:36.163

如果您“只需要`IsValid`功能”，那么只需覆盖它就足够了。但是，[`CanConvertFrom(Type)`](http://msdn.microsoft.com/en-us/library/92580th5.aspx)实际上，如果您只是想测试是否可以转换类型，则实际上应该覆盖该方法。某些基础设施类使用此方法，`IsValid`在这种情况下仅覆盖可能还不够。

对于布尔转换器，您还应该覆盖，如果您不打算使用该值，则[`ConvertFrom(object)`](http://msdn.microsoft.com/en-us/library/ef83h055.aspx)只需返回。`null`否则，调用`IsValid`（依次调用`CanConvertFrom`）可能会失败。

# opencv - 多线程比单线程慢？

> ID：15210463
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:26:11.713
> 
> 标签：opencv, openmp

我试图找出如何加快我的代码的某个部分。我有三个浮点变量：var1、var2、var3。

在顺序模式...

```
 double start1, end1, t1;
       start1= (double)cvGetTickCount();

    var1= tester->predict(videocapture, params1, image);
    var2= tester->predict(videocapture, params2, image);
    var3= tester->predict(videocapture, params3, image);

    end1= (double)cvGetTickCount();
    t1= (end1-start1)/((double)cvGetTickFrequency()*1000.);
    printf( "Time1  = %g ms\n", t1 ); 
```

它似乎比并行线程稍快...

```
double start2, end2, t2;
start2= (double)cvGetTickCount();
mp_set_dynamic(0);     // Explicitly enable/disable dynamic teams
omp_set_num_threads(3); // Use 3 threads for all consecutive parallel regions
#pragma omp parallel num_threads(3)
{
   #pragma omp sections //nowait
      {

         #pragma omp section 
      { 
            #pragma omp critical
     { 
              var1= tester->predict(videocapture, params1, image);
               }
       }    

         #pragma  omp section 
          {
            #pragma omp critical 
             {
              var2= tester->predict(videocapture, params2, image);       
               }

       }

         #pragma omp section 
          {
           #pragma omp critical 
           {
              var3= tester->predict(videocapture, params3, image);
               } 

       }
          }
        }
     } 

    end2= (double)cvGetTickCount();
    t2= (end2-start2)/((double)cvGetTickFrequency()*1000.);
    printf( "Time2  = %g ms\n", t2 ); 
```

有人可以帮我加快找到这三个变量的过程并告诉我我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:32:56.253

[在此处](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/compiler/ref/ruompcrt.htm)`critical`查看pragma的规范。

这里有三个关键点：

1）如果你不给`critical`编译指示一个名字，它被映射到一些未指定的名字，并且相同的名字用于所有未命名的临界区。

2) 一次只能有一个线程可以在具有给定名称的任何关键部分中。

3) 当一个线程遇到临界区时，它会在那里等待，直到其中没有其他线程处于活动状态，然后才进入该临界区。

因此，您的代码告诉所有线程等待，同时它们都轮流一次执行您的代码中的一项。这相当于串行执行操作，除了它首先需要生成线程的开销（以及由于等待而发生的任何开销，这可能是忙等待）。

# android - 将 MediaCodec 与摄像头连接 (setPreviewCallbackWithBuffers)

> ID：15210469
> 
> 赞同：1
> 
> 时间：2013-03-04T20:26:28.647
> 
> 标签：android, android-camera, media, codec

正如@Aegonis 在这篇[文章中所问](https://stackoverflow.com/questions/13458289/encoding-h-264-from-camera-with-android-mediacodec)

我正在尝试将相机与 Android 连接以对视频帧进行编码。

问题是，在这部分中，尝试做与他相同的事情，作为在他的主题中发布的另外 2 个用户，它崩溃了：

```
// called from Camera.setPreviewCallbackWithBuffer(...) in other class
public void encoder(byte[] input) {
try {
    ByteBuffer[] inputBuffers = mediaCodec.getInputBuffers();
    ByteBuffer[] outputBuffers = mediaCodec.getOutputBuffers();
    int inputBufferIndex = mediaCodec.dequeueInputBuffer(-1);
    if (inputBufferIndex >= 0) {
        ByteBuffer inputBuffer = inputBuffers[inputBufferIndex];
        inputBuffer.clear();
        inputBuffer.put(input);
        mediaCodec.queueInputBuffer(inputBufferIndex, 0, input.length, 0, 0);
    }
... 
```

我从 setPreviewCallbackWithBuffer 打的电话是这样的：

```
 int bufSize= 460800;
        camera.addCallbackBuffer(new byte[bufSize]);
        camera.setPreviewCallbackWithBuffer(new PreviewCallback() {

            public void onPreviewFrame(byte[] data, Camera arg1) {
                    codecs.encoder(data);
            }
        });
... 
```

有以下错误消息

```
03-04 20:30:46.762: E/AndroidRuntime(26196): java.nio.BufferOverflowException
03-04 20:30:46.762: E/AndroidRuntime(26196): at java.nio.Buffer.checkPutBounds(Buffer.java:189)
03-04 20:30:46.762: E/AndroidRuntime(26196): at java.nio.ReadWriteDirectByteBuffer.put(ReadWriteDirectByteBuffer.java:100)
03-04 20:30:46.762: E/AndroidRuntime(26196): at java.nio.ByteBuffer.put(ByteBuffer.java:712) 
```

好吧，字节缓冲区太大了，但是 setPreviewCallbackWithBuffer 说您至少使用一个大小为：460800 的缓冲区。那么...您将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T12:50:51.160

尝试这个

```
Parameters camParams = camera.getParameters();
int size = imageWidth * imageHeight;
size  = size * ImageFormat.getBitsPerPixel(camParams.getPreviewFormat()) / 8;
mBuffer = new byte[size]; // class variable
camera.addCallbackBuffer(mBuffer); 
```

# python - 如何在emacs python-mode中取消解释器命令

> ID：15210470
> 
> 赞同：6
> 
> 时间：2013-03-04T20:26:30.320
> 
> 标签：python, emacs

如果我在 python 解释器中输入错误的命令，有时我只会看到`...`. 例如，如果我键入`help(random.unif`并按 Enter，我将无法输入新命令。我必须退出 emacs 并再次启动 python 和解释器。有没有办法纠正这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T20:36:55.330

正如 Pavel Anossov 解释的那样，您想向 Python 发送一个 CTRL-C 来中断它。

但是在 emacs 中，默认情况下，`CTRL-C`是一个前缀键。

幸运的是，在大多数交互式 shell 模式下，包括 python-mode 和替代模式，`CTRL-C`连续点击两次会将 ctrl-C 发送到解释器。或者，从技术上讲，`CTRL-C``CTRL-C`是必然的`comint-interrupt-subjob`。（当然，您可以以任何其他方式运行它——即使`META-X comint-interrupt-subjob`您真的想要。）结果如下所示：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> help(f
...   ^C ^C
KeyboardInterrupt
>>> 
```

另一种选择是使用`quoted-insert`命令，通常绑定到`CTRL-Q`，然后点击`CTRL-C`。但是，因为这不会中断通常的行输入，所以通常必须在其后加上换行符。结果如下所示：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> help(f
... ^C
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyboardInterrupt
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:28:22.890

通常`CTRL-C`有效。不确定emacs嵌入式解释器。或者，只需向解释器提供它正在等待的任何内容（在您的示例中为`)`）。

# wordpress - 在每个页面的 html 输入中添加页面 id

> ID：15210471
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:36.840
> 
> 标签：wordpress, hook

我编写了一个 WordPress 插件，它使管理员能够在 WYSIWYG 编辑器中生成一些 html 代码。此 html 代码中有一些按钮具有特定的操作 - 这是通过 jQuery 在单个页面上完成的。

但是，我需要页面 id 作为 jQuery 的输入；我想为每个页面添加一个带有页面 ID 的隐藏输入字段。

是否有一个钩子可以向每个页面添加特定的 html 代码，以便我可以通过 jQuery 访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:13:19.900

解决了：

```
function add_to_content($content) {

        $content .= "<input type='hidden' name='post_id' value='".get_the_ID()."' />";

    return $content;
}
add_filter('the_content', 'add_to_content'); 
```

# jquery - 使用jquery更改html标签的背景

> ID：15210472
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:43.697
> 
> 标签：jquery, html, css

```
<div id="lifecycleStage">
<div id="private2">
    <input type="radio" name="lifecyclePrivate" value="preliminary"         id="preliminary"/>      <label for="preliminary">Preliminary</label>
    <input type="radio" name="lifecyclePrivate" value="prelist"             id="prelist"/>          <label for="prelist">Prelist</label>            
    <input type="radio" name="lifecyclePrivate" value="retired"             id="retired"/>          <label for="retired">Retired</label> <br>           
    <input type="radio" name="lifecyclePrivate" value="internal product"    id="internalProduct"/>  <label for="internalProduct">Internal Product</label>   
    <input type="radio" name="lifecyclePrivate" value="reference nop"       id="referenceNOP"/>     <label for="referenceNOP">Reference NOP</label>     
</div>
<div id="public">
    <input type="radio" name="lifecyclePublic" value="listed"               id="listed"/>           <label for="listed">Listed  ................</label>             
    <input type="radio" name="lifecyclePublic" value="approaching op"       id="approachingOP"/>    <label for="approachingOP">Approaching OP</label>      
    <input type="radio" name="lifecyclePublic" value="no longer available"  id="noLongerAvailable"/><label for="noLongerAvailable">No Longer Available</label> 
</div> 
```

我想要的是将所选标签的背景更改为不同的“独特”颜色。Example when prelist is selected, it has a blue background, but when retired is selected it has a black background.

任何提示和技巧，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:30:31.473

```
$('label').on('click',function() {
    $('label').removeClass('active');
    $(this).addClass('active');
}); 
```

演示：http: [//jsfiddle.net/hpU6k/](http://jsfiddle.net/hpU6k/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:34:19.363

为什么要使用 jQuery？只需使用 CSS：

```
label {
    background-color: #000;
}

input[type=radio]:checked + label {
    background-color: #00f;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/uZSak/)。

# iphone - 升级 Cordova 框架

> ID：15210476
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:52.400
> 
> 标签：iphone, cordova, upgrade

我在尝试在运行 iOS 6.1 的设备上添加联系人时遇到了同样的问题（尽管它在模拟器上工作）。在阅读类似的帖子（[在 iOS 6 上保存联系人时出现 Phonegap ContactError](https://stackoverflow.com/questions/13022482/phonegap-contacterror-when-saving-contact-on-ios-6)）时，我看到您应该将 Cordova 框架更新到 2.0+ 以适应 iOS 6。我将 Xcode 更新到 4.6，但不确定如何升级 Cordova（或更新其与 XCode 的集成）。我目前正在为 cordova 运行 1.7.0 版本并下载了 2.5 版本。升级是增量还是可以进行版本跳转？谁能指导我如何升级我的 Cordova 框架版本？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:18:57.773

从 Cordova 1.7 到 Cordova 2.5，没有迁移路径。我建议：

1.  备份您的完整 mac os 系统
2.  卸载科尔多瓦 1.7
3.  安装科尔多瓦 2.5
4.  按照2.5 cordova教程新建一个XCode项目
5.  将旧的 html5 代码复制并粘贴到新项目中
6.  修复问题

这很痛苦，但它是一条干净的迁移路径。

# ios - UITableView 中的自定义单元格未正确显示 - 仅填充最后一个单元格

> ID：15210477
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:52.480
> 
> 标签：ios, objective-c, uitableview

抱歉，如果这是初学者的问题。我正在尝试使用部分和自定义单元格格式填充 UITableView。

我在 ViewControl.xib 中创建了一个 customCell，它位于主视图中，如下所示： [customCell image](http://imgur.com/o03sPPJ,TjYQTBh)

我有一本字典，可以使用另一个类中的方法加载值，具体取决于它所在的行。如果它在第 1 行，则加载第 1 项的详细信息等。

这是我正在使用的代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"customCell"];

    // assigns current row's labels
    NSArray * customCellText = [Model cellText:indexPath.row];
    dinnerItem.text = customCellText[0];
    dinnerDescription.text = customCellText[1];
    dinnerTime.text = customCellText[2];

    cell = customCell;
    return cell;
} 
```

这是目前正在生成的：

[iPhone模拟器截图](http://imgur.com/o03sPPJ,TjYQTBh#1)

我遇到的问题：

*   它没有填充所有行，只填充最后一行。
*   我似乎只能单击填充的行，即使那样它仍然保持选中状态，而不是“单击它”。
*   如果我快速向上或向下拖动它，它会崩溃。

我认为它与重绘/填充单元格的方式有关？

提前致谢！正弦二

**编辑，添加更多代码进行澄清：**

**视图控制器.m**

```
 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
        return [Model countKeys];
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return [Model rowsInSection:section];
    }

    -(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
// slightly crap code, this is initiated in viewDidLoad and is an array created by a method in Model.m. Only looks for keys and returns an array.
        return headerKeys[section];
    } 
```

**模型.m**

```
+(NSArray *)headerKeys
{
    NSArray *headerKeys = [[NSArray alloc] init];
    headerKeys = [timerDictionary allKeys];
    NSLog(@"All keys: %@", headerKeys);
    return headerKeys;
}

+(NSArray *)customCellText
{
    NSArray *customCellText = [[NSArray alloc]initWithObjects: @"dinnerItemText", @"dinnerDescriptionText", @"01:00", nil];
    return customCellText;
}

+(NSInteger)rowsInSection:(NSInteger)sectionNumber
{
    NSArray *keyContent = [[NSArray alloc] init];
    keyContent = [timerDictionary objectForKey:dictionaryKeys[sectionNumber]];
    NSLog(@"current section[%i]: %i", sectionNumber, [keyContent count]);
    return [keyContent count];
}

+(NSArray *)cellText:(NSInteger)rowNumber
{
    // display all dictionary keys, dictionaryKeys[x] will give back the specific category
    dictionaryKeys = [timerDictionary allKeys];

    // displays contents of first key in dictionary
    NSArray *keyContent = [[NSArray alloc] init];
    keyContent = [timerDictionary objectForKey:dictionaryKeys[0]];

    // creates an array with all items within the selected key
    NSArray *keyItems = [[NSArray alloc] initWithArray:keyContent[rowNumber]];
    return keyItems;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:49:35.617

我可以说以下几点：

如果你只这样做：
`UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"customCell"];`

在 iOS 5 之前，这并不能保证您可以找回一个单元格。在 iOS5 之前，您**必须**执行以下操作：

NSString *cellIdentifier = [NSString stringWithFormat:@"I%d-%d", indexPath.section, indexPath.row];

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"customCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }
    // assigns current row's labels
    NSArray * customCellText = [Model cellText:indexPath.row];
    dinnerItem.text = customCellText[0];
    dinnerDescription.text = customCellText[1];
    dinnerTime.text = customCellText[2];

    cell = customCell;
    return cell;
} 
```

如果您使用的是 iOS5/6，则不再需要这些行：

```
 if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        } 
```

**但是**您**必须**在 tableView 设置中使用以下方法：

```
registerClass:forCellReuseIdentifier:  (available in iOS6 and later)
registerNib:forCellReuseIdentifier: (available in iOS5 and later) 
```

**只是希望解决您的问题：**
不要忘记行 [...](cell == nil)[...]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T20:32:05.933

首先，将您的方法更改为此！您需要检查单元格是否为`nil`：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"customCell"];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        // assigns current row's labels
        NSArray * customCellText = [Model cellText:indexPath.row];
        dinnerItem.text = customCellText[0];
        dinnerDescription.text = customCellText[1];
        dinnerTime.text = customCellText[2];

        cell = customCell;
    }

    return cell;
} 
```

# mysql - 限制结果而不是分组结果

> ID：15210479
> 
> 赞同：0
> 
> 时间：2013-03-04T20:26:58.983
> 
> 标签：mysql, database

我正在努力寻找正确的答案，在互联网上寻找如何做到这一点，我有一个加入和一个小组。当我在末尾添加一个限制时，它会限制组而不是实际结果。

```
SELECT COUNT(*) AS `numrows`, `people`.`age` 
FROM (`events`) 
JOIN `people` 
ON `events`.`id` = `people`.`id`
WHERE `people`.`priority` = '1' 
GROUP BY `people`.`age` 
ORDER BY `numrows` 
LIMIT 150 
```

限制总是变化的，所以这需要是动态的，这个想法是错过两个表中的前 150 或 x 行，而不是限制组。

EDIT= 我想我已经解释得很糟糕了，我实际上想从 150 行或 x 开始，限制是我知道动态执行此操作的唯一方法。所以这个想法是如果最后一次搜索检索到 150 行，那么让我们说下次有 250 个结果，但我想忽略上次找到的前 150 个等。希望这更有意义。

在连接中的 WHERE 之后需要限制或开始，我认为这是唯一可以工作的地方。

编辑 SQL =

```
SELECT COUNT( * ) AS `numrows`, `people`.`age`
FROM (
SELECT `id`, `events`.`pid`
FROM `events`
ORDER BY `id`
LIMIT 1050
)limited
JOIN `people` ON `people`.`age` = limited.id
WHERE `people`.`priority` = '1'
GROUP BY `people`.`age`
ORDER BY `numrows` DESC 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:40:47.543

我怀疑你的意思是这样的？

```
SELECT COUNT(*) AS numrows, people.age
FROM (
SELECT id FROM events ORDER BY id LIMIT 150
) limited
JOIN people ON people.id = limited.id
GROUP BY people.age
ORDER BY numrows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:36:04.770

我在时间戳上使用 where between 来做到这一点，这似乎是唯一明智的做法。

# javascript - 我想为以下 js 代码创建一个 for 循环。请帮我

> ID：15210480
> 
> 赞同：-2
> 
> 时间：2013-03-04T20:27:01.287
> 
> 标签：javascript, loops, for-loop

```
function fade90() { document.getElementById("myDiv").style.opacity="0.90"; setTimeout("fade80()", 100); }
function fade80() { document.getElementById("myDiv").style.opacity="0.80"; setTimeout("fade70()", 100); }
function fade70() { document.getElementById("myDiv").style.opacity="0.70"; setTimeout("fade60()", 100); }
function fade60() { document.getElementById("myDiv").style.opacity="0.60"; setTimeout("fade50()", 100); }
function fade50() { document.getElementById("myDiv").style.opacity="0.50"; setTimeout("fade40()", 100); }
function fade40() { document.getElementById("myDiv").style.opacity="0.40"; setTimeout("fade30()", 100); }
function fade30() { document.getElementById("myDiv").style.opacity="0.30"; setTimeout("fade20()", 100); }
function fade20() { document.getElementById("myDiv").style.opacity="0.20"; setTimeout("fade10()", 100); }
function fade10() { document.getElementById("myDiv").style.opacity="0.10"; setTimeout("hide()", 100); } 
```

我写这个。这个对吗？如果没有，请解决此问题。

```
function cls_msg(){
for (i=1;i<10;i++)
{
setTimeout(document.getElementById("myDiv").style.opacity=100-(i*10), 100);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:28:09.577

你可能想要这个：

```
var elem = document.getElementById("myDiv");
for (i=1;i<10;i++) {
   (function(i){
      setTimeout(
        function(){elem.style.opacity=100-(i*10)},
        (i+1)*100
      );
   })(i);
} 
```

与您的代码的差异：

*   超时是不同的，因此它们不会同时被调用（代码不会暂停，直到执行下一个超时）
*   `i`受闭包保护，因此在触发超时时它没有循环结束的值
*   传递给的第一个参数`setTimeout`是一个函数
*   正如 yabol 所建议的那样，元素被缓存

# c++ - 矩阵处理程序大序列

> ID：15210484
> 
> 赞同：0
> 
> 时间：2013-03-04T20:27:43.967
> 
> 标签：c++, matrix

我打算为大序列做一个类似needleman-wunsch 算法或smith-watterman 算法的算法。所以我需要一种方法来创建不同大小的矩阵，所以我的问题是哪个库在这方面给了我最好的性能并且易于使用。

PS：我知道 OpenCV 和 Boost 可以处理矩阵，但我不知道是否有好的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:19:27.390

如果“最好的性能”是要求，那你就得看 NVIDIA CUDA 或 Intel MKL 了。像 C++ 这样的库提升 uBLAS 的重点不是性能，而是可用性。

# python - python 正则表达式获取电子邮件地址的第一部分

> ID：15210485
> 
> 赞同：16
> 
> 时间：2013-03-04T20:27:43.990
> 
> 标签：python, regex

我对 python 和正则表达式很陌生，我想知道如何将电子邮件地址的第一部分提取到域名。例如，如果：

```
s='xjhgjg876896@domain.com' 
```

我希望正则表达式结果是（考虑到所有“种类”的电子邮件 ID，即包括数字等）：

```
xjhgjg876896 
```

我得到了正则表达式的想法——因为我知道我需要扫描到“@”然后存储结果——但我不确定如何在 python 中实现它。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-04T20:28:47.447

您应该只使用[`split`](http://docs.python.org/2/library/stdtypes.html#str.split)字符串的方法：

```
s.split("@")[0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T20:38:19.743

正如其他人指出的那样，更好的解决方案是使用`split`.

如果您真的热衷于使用，`regex`那么这应该可以：

```
import re

regexStr = r'^([^@]+)@[^@]+$'
emailStr = 'foo@bar.baz'
matchobj = re.search(regexStr, emailStr)
if not matchobj is None:
    print matchobj.group(1)
else:
    print "Did not match" 
```

它打印出来

```
foo 
```

**注意：**这仅适用于`SOMEONE@SOMETHING.TLD`. 如果要匹配类型的电子邮件，`NAME<SOMEONE@SOMETHING.TLD>`则需要调整正则表达式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-13T16:29:23.500

您不应该使用正则表达式或`split`.

```
local, at, domain = 'john.smith@example.org'.rpartition('@') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-10T08:10:07.720

```
#!/usr/bin/python3.6

def email_splitter(email):
    username = email.split('@')[0]
    domain = email.split('@')[1]
    domain_name = domain.split('.')[0]
    domain_type = domain.split('.')[1]

    print('Username : ', username)
    print('Domain   : ', domain_name)
    print('Type     : ', domain_type)

email_splitter('foo.goo@bar.com') 
```

输出 ：

```
Username :  foo.goo
Domain   :  bar
Type     :  com 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-05T20:03:17.380

这是另一种方法，使用索引方法。

```
s='xjhgjg876896@domain.com'

# Now lets find the location of the "@" sign
index = s.index("@")

# Next lets get the string starting from the begining up to the location of the "@" sign.
s_id = s[:index]

print(s_id) 
```

输出是

```
xjhgjg876896 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-02T12:36:59.190

需要安装包 pip install email_split

```
from email_split import email_split
email = email_split("ssss@ggh.com")
print(email.domain)
print(email.local) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T21:04:25.403

几个月前写了[EmailExtractor.py](https://bitbucket.org/shantanoo/python/src/79632f2c0e51430d02435272b9af4f7e83bf7544/EmailExtractor.py?at=master)。您可能想尝试一下并根据需要对其进行修改。它提取电子邮件地址。您可以使用“@”（推荐）拆分输出或修改正则表达式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-15T14:08:27.013

下面应该可以帮助你做到这一点：

```
 fromAddr = message.get('From').split('@')[1].rstrip('>')
        fromAddr = fromAddr.split(' ')[0] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-09T21:57:26.800

您也可以尝试使用 email_split。

```
from email_split import email_split
email = email_split('xjhgjg876896@domain.com')
email.local  # xjhgjg876896
email.domain  # domain.com 
```

你可以在这里找到更多[https://pypi.org/project/email_split/](https://pypi.org/project/email_split/)。祝你好运 ：）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-22T22:59:44.003

好的答案已经得到了回答，但我还是想把我的。

*   如果我有一封电子邮件 john@gmail.com，我只想得到“john”。

    > 我只想得到“约翰”

*   如果我有一封电子邮件 john.joe@gmail.com 我只想得到“john”

    > 我只想得到“约翰”

所以这就是我所做的：

```
name = recipient.split("@")[0]
name = name.split(".")[0]
print name 
```

干杯

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-30T03:50:43.617

您可以找到电子邮件中的所有单词，然后返回第一个单词。

```
import re
def returnUserName(email):
    return re.findall("\w*",email)[0]

print(returnUserName("johns123.ss@google.com"))   #Output is - johns123
print(returnUserName('xjhgjg876896@domain.com'))  #Output is - xjhgjg876896 
```

# html - 语义按钮标记

> ID：15210486
> 
> 赞同：-2
> 
> 时间：2013-03-04T20:27:46.963
> 
> 标签：html, semantic-markup

好奇如何通过 HTML 标记以下内容。不确定它是否是一个列表，是否应该是单独的 div（可能有跨度？）或导航（html 5）。

最左边的按钮是独立的。然后标题居中。然后是一个按钮组（后退/下一个）。然后是最右侧的按钮（通知）。

所有按钮和标题都引用并作用于其下方的内容。

```
button         Title of page below      button(back) button(next)       button 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:52:58.240

如果它是导航并且您希望它是语义的，则应将其包装在`nav`标签中。该`Nav`标记仅是 HTML5，但在语义上描述了导航。我会这样构造它：

```
<nav>
    <ul>
        <li><a href="#">Button</a></li>
        <li><h1>Title</h1></li>
        <li><a href="#">Back</a></li>
        <li><a href="#">Next</a></li>
        <li><a href="#">Button</a></li>
    </ul>
</nav> 
```

使用锚标记进行导航并将它们的样式设置为合适的样式是一种很好的做法。您应该使用 a`<h1>`作为标题，因为它应该是最重要的标题。

# javascript - jQuery ajax - 同源策略

> ID：15210491
> 
> 赞同：1
> 
> 时间：2013-03-04T20:28:11.017
> 
> 标签：javascript, jquery, same-origin-policy

该网站 ( [http://www.thekatespanos.com/scrabble-score-calculator/](http://www.thekatespanos.com/scrabble-score-calculator/) ) 有一个按钮，用户可以在其中根据一些在线词典验证他们输入的单词。我了解代码在 jQuery 代码方面的工作原理，但我不完全**了解**它在从其他网页中提取数据时是如何工作的。

这是一个例子：-

```
$.ajax({
        url: 'http://dictionary.reference.com/browse/' + word,
        type: 'GET',
        error: function() {
            $('#validationDC').html('<span class="invalid">error loading from</span> <a target="_blank" href="http://www.dictionary.reference.com/browse/' + word + '">Dictionary.com</a>.');   
        },
        success: function(res) { 
            var definition = $(res.responseText).find('.results_content').html();
            if (definition) {
                $('#validationDC').html('<span class="word valid">' + word + '</span> is a valid word according to <a target="_blank" href="http://www.dictionary.reference.com/browse/' + word + '">Dictionary.com</a>.');
                //$('#definitionDC').html(definition);
            }
            else {
                $('#validationDC').html('<span class="word invalid">' + word + '</span> is not a valid word according to <a target="_blank" href="http://www.dictionary.reference.com/browse/' + word + '">Dictionary.com</a>.');
            }
        },
        complete: function() {
            $('.loading').remove();
        }
    }); 
```

此代码向dictionary.reference.com 发送一个jQuery ajax 请求以验证在应用程序中输入的单词并解析返回的数据以确定该单词是否有效。

鉴于相同的原产地政策，这怎么可能？有人可以解释一下，因为我觉得我错过了一些东西。

# css - 如何使类/div 表现得像浮动一样？

> ID：15210498
> 
> 赞同：0
> 
> 时间：2013-03-04T20:28:29.723
> 
> 标签：css, css-float, margin, centering, floating

我在页面中心的一个类中有一个 iframe。如果单击顶部的两个单选按钮中的任何一个，表单会根据您选择的单选按钮展开。如果表单向右或向左浮动，当按下其中一个按钮时，它会展开，并且它下方的灰色区域（雇主和自由职业者文本部分）将在页面上向下移动。当我在页面中心对齐表单时，我无法让它具有与浮动相关联的属性，从而将页面的其余部分向下移动。相反，它只是用文本区域覆盖了灰色背景。我的网站在[avidest.com/new 上](http://avidest.com/new)。如何使表单保持在中心但表现得像浮动一样？这是我的CSS：

```
.main {width:100%; padding:0; margin:0 auto; min-width: 1020px; overflow: hidden;}
.slider { background: transparent; margin:0 auto; padding:0; height:420px;}  
.slider .gallery { margin:0 auto; width:980px; height:420px; padding:0;} 
.formbox{ width: 48%; padding: 45px 60px 20px 0px; margin-top: 30px;background-color:#ffffff;
          border:1px solid black;opacity:0.91;filter:alpha(opacity=91); /* For IE8 and earlier */
          border-radius: 10px;margin-left: auto;margin-right: auto;}
.body { background: #bebebe; border-top: 0px solid; border-color: #e3e3e3; } 
.body_main_page { width:470px; float:left; margin:0; padding:15px 10px;} 
```

这是html：

```
<div class="main>
 <div class="slider">
    <div class="gallery">
      <div class="formbox"> form is here </formbox>
    </div>
 </div>
 <div class="body"> 
    <div class="body_main_page">Freelancer Text is here</div>
    <div class="body_main_page">Employer text is here</div>
 </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:40:46.810

尝试像这样更改您的 CSS：

```
.main {width:100%; padding:0; margin:0 auto; min-width: 1020px; overflow: hidden;}
.slider { background: transparent; margin:0 auto; padding:0; min-height:420px;}  
.slider .gallery { margin:0 auto; width:980px; min-height:420px; padding:0;} 
.formbox{ width: 48%; padding: 45px 60px 20px 0px; margin-top: 30px;background-color:#ffffff;
      border:1px solid black;opacity:0.91;filter:alpha(opacity=91); /* For IE8 and earlier      */
      border-radius: 10px;margin-left: auto;margin-right: auto;}
 .body { background: #bebebe; border-top: 0px solid; border-color: #e3e3e3; } 
 .body_main_page { width:470px; float:left; margin:0; padding:15px 10px;} 
```

如果您想拥有灵活的高度，请不要提供固定高度...

# java - 在 mavenized Android 项目中配置测试目录

> ID：15210500
> 
> 赞同：0
> 
> 时间：2013-03-04T20:28:38.500
> 
> 标签：java, android, eclipse, maven, maven-3

我有一个使用 Maven 的 Android 项目。最初，它在 Eclipse (ADT) 上运行良好。

但是后来我添加了一个单元测试并将源代码从目录移动`src`到`src/main/java`我的单元测试到`src/test/java`文件夹中。

此后 Eclipse 开始抱怨错误的包名称并拒绝运行/调试我的单元测试。

我试图通过添加`src/main/java`和`src/test/java`Java 源路径来解决这个问题。

但这没有帮助，我仍然无法运行单元测试。

![在此处输入图像描述](../Images/0edec225b1b08163fe56aebaf44c794d.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:50:23.083

我发现[MoreUnit](http://moreunit.sourceforge.net/#doc-projectproperties)允许更改单元测试的位置。这解决了我的问题。

# java - Java打开浏览器并登录网站

> ID：15210501
> 
> 赞同：0
> 
> 时间：2013-03-04T20:28:38.803
> 
> 标签：java, browser, single-sign-on

因此，我正在制作一个 GUI，用户输入用户名和密码以登录我的学校网站。然后我希望它在登录时打开默认浏览器并打开学校网站的多个选项卡。我不完全确定浏览器打开时如何登录。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:39:25.223

使用`browse`方法打开浏览器：

```
import java.net.URI;
import java.awt.Desktop; 

java.awt.Desktop desktop = java.awt.Desktop.getDesktop();
String arg="Your URI here";
java.net.URI uri = new java.net.URI( arg );
desktop.browse( uri ); 
```

另请注意，您应该捕获几个异常，但我有一段时间没有使用它，所以我不太记得所有异常，但我认为您应该检查`java.awt.Desktop.Action.BROWSE`桌面是否支持。无论如何，如果您正在使用 Eclipse，Eclipse 应该会给您一个提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:37:58.113

有工具名称[Selenium](http://seleniumhq.org/)。它用于测试 GUI，因此您可以编写登录网站并单击、单击、单击...的“测试”。它使用本地浏览器（IE、Firefox、Chrome）或没有 GUI 但使记忆中的所有动作。

# linux - 加入两个文件的第一列

> ID：15210503
> 
> 赞同：0
> 
> 时间：2013-03-04T20:28:42.117
> 
> 标签：linux, unix, join, awk

如何通过每个文件的第一列加入两个文件？

文件1：

```
116
116
116
116
116
117
117
117
117
117 
```

文件2：

```
1   37.8378378378378
2   30.5009605438156
3   35.4106079490375
4   25.6565656565657
.....
.....
116 49.4073275862069
117 25.8182578688696
118 36.1389759665622
119 36.7218282111899
120 55.1587301587302 
```

我想匹配两个文件中的第一列并像这样打印：

```
116  49.4073275862069
116  49.4073275862069  
116  49.4073275862069 
116  49.4073275862069 
116  49.4073275862069 
117  25.8182578688696
117  25.8182578688696
117  25.8182578688696
117  25.8182578688696
117  25.8182578688696 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:35:13.900

你可以简单地做到这一点`join`

```
join <(sort file1) <(sort file2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:32:43.953

试试这个单行：

```
awk 'NR==FNR{a[$1]=$2;next}$1 in a{print $1,a[$1]}' file2 file1 
```

# python - Django ModelChoiceField optgroup 标签

> ID：15210511
> 
> 赞同：36
> 
> 时间：2013-03-04T20:28:56.470
> 
> 标签：python, django, django-templates, django-forms

如何在 ModelChoiceField **optgroup**标签中设置？

这是示例：

**模型.py**

```
class Link(models.Model):
    config = models.ForeignKey(Config)
    name = models.URLField(u'Name', null=True, max_length=50)
    gateway = models.IPAddressField(u'Gateway', null=True)
    weight = models.IntegerField(u'Weight', null=True)
    description = models.TextField(u'Description', blank=True)

def __unicode__(self):
    return self.name 
```

**表格.py**

```
class LinkForm(ModelForm):
    config = ModelChoiceField(queryset=Config.objects.all(), empty_label="Choose a link",widget=GroupedSelect())

class Meta:
    model = Link 
```

我想像这样呈现我的 ChoiceField：

**例子.html**

```
<select id="id_config" name="config">
    <option selected="selected" value="">Choose a link</option>
    <optgroup label="Configuration" >
        <option value="8">Address: 192.168.1.202/255.255.255.0 </option>
        <option value="9">Address: 192.168.1.240/255.255.255.0 </option>
        <option value="10">Address: 192.168.3.1/255.255.255.0 </option>
    </optgroup>
</select> 
```

******更新* *******

 **## 我这样解决了我的问题：

```
class GroupedSelect(Select):
    def render(self, name, value, attrs=None, choices=()):
        if value is None: value = ''
        final_attrs = self.build_attrs(attrs, name=name)
        output = [format_html('<select{0}>', flatatt(final_attrs))]
        for index, option_gp in enumerate(self.choices):
            if index == 0:
                option_value = smart_unicode(option_gp[0])
                option_label = smart_unicode(option_gp[1])
                output.append(u'<option value="%s">%s</option>' %  (escape(option_value), escape(option_label)))
                output.append('<optgroup label = "Configuration">')
            elif index!=0 and index <= len(self.choices):
                option_value = smart_unicode(option_gp[0])
                option_label = smart_unicode(option_gp[1])
                output.append(u'<option value="%s">%s</option>' % (escape(option_value), escape(option_label)))          
        output.append(u'</optgroup>')
        output.append(u'</select>')
        return mark_safe('\n'.join(output)) 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-07-25T09:37:27.180

您不需要创建任何自定义字段，Django 已经完成了这项工作，只需传递格式正确的选项：

```
MEDIA_CHOICES = (
 ('Audio', (
   ('vinyl', 'Vinyl'),
   ('cd', 'CD'),
  )
 ),
 ('Video', (
   ('vhs', 'VHS Tape'),
   ('dvd', 'DVD'),
  )
 ),
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-22T18:08:09.750

@Stefan Manastirliu 答案的扩展，可与[django-categories](https://github.com/callowayproject/django-categories)一起使用。（缺点是`get_tree_data()`下面的功能只允许一个级别）。结合诸如[引导](http://davidstutz.github.io/bootstrap-multiselect/)多选之类的javascript插件，您可以获得多选![这个](../Images/24f788c1f065d904440dbc7b17d30cf6.png)

**模型.py**

```
from categories.models import CategoryBase
class SampleCategory(CategoryBase):
    class Meta:
        verbose_name_plural = 'sample categories'

class SampleProfile(models.Model):
    categories = models.ManyToManyField('myapp.SampleCategory') 
```

**表格.py**

```
from myapp.models import SampleCategory

    def get_tree_data():
        def rectree(toplevel):
            children_list_of_tuples = list()
            if toplevel.children.active():
                for child in toplevel.children.active():
                    children_list_of_tuples.append(tuple((child.id,child.name)))

            return children_list_of_tuples

        data = list()
        t = SampleCategory.objects.filter(active=True).filter(level=0)
        for toplevel in t:
            childrens = rectree(toplevel)
            data.append(
                tuple(
                    (
                        toplevel.name,
                        tuple(
                            childrens
                            )
                        ) 
                    )
            )
        return tuple(data)

class SampleProfileForm(forms.ModelForm):
    categories = forms.MultipleChoiceField(choices=get_tree_data())
    class Meta:
        model = SampleProfile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T02:18:03.137

这是一个很好的片段：

带有可选 Optgroups 的选择字段和选择小部件：http: [//djangosnippets.org/snippets/200/](http://djangosnippets.org/snippets/200/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-11T16:17:46.487

`ModelChoiceField`使用 a`ModelChoiceIterator`将查询集转换为选项列表。您可以轻松地覆盖此类以引入组。以下是按国家/地区对城市进行分组的示例：

```
from itertools import groupby
from django.forms.models import ModelChoiceField, ModelChoiceIterator
from .models import City

class CityChoiceIterator(ModelChoiceIterator):
    def __iter__(self):
        queryset = self.queryset.select_related('country').order_by('country__name', 'name')
        groups = groupby(queryset, key=lambda x: x.country)
        for country, cities in groups:
            yield [
                country.name,
                [
                    (city.id, city.name)
                    for city in cities
                ]
            ]

class CityChoiceField(ModelChoiceField):
    iterator = CityChoiceIterator

    def __init__(self, *args, **kwargs):
        super().__init__(City.objects.all(), *args, **kwargs) 
```

注意：我没有时间检查这种技术是否与[`ModelChoiceIteratorValue`](https://docs.djangoproject.com/fr/3.1/ref/forms/fields/#modelchoiceiteratorvalue)Django 3.1 中引入的新技术兼容。**

# wpf - 未定义 DataTemplate 时使用构造函数参数将 View 绑定到 ViewModel

> ID：15210515
> 
> 赞同：1
> 
> 时间：2013-03-04T20:29:05.307
> 
> 标签：wpf, mvvm

未定义 DataTemplate 时，如何使用构造函数参数将 View 绑定到 ViewModel？

我基本上是在尝试将`TreeView`控件绑定到它的数据源。

### 浏览器视图.xaml

```
<UserControl>
    <TreeView 
        x:Name="StatusTree"
            ItemContainerStyle="{StaticResource TreeViewItemStyle}"
        ItemsSource="{Binding Status, Mode=OneTime}"
        ItemTemplate="{StaticResource CheckBoxItemTemplate}"
    />
</UserControl> 
```

### 浏览器视图模型.cs

```
public class BrowserNewViewModel : WorkspaceViewModel
{
    public BrowserNewViewModel(string name)
    {
        this.DisplayName = name;
    }

    public List<TreeViewModel> Status
    { ... }
} 
```

下面描述了我如何实例化 ViewModel。我`WorkspaceViewModel`按照*Josh Smith 的* [MVVM 文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)使用界面。`TreeViewModel`在这里[解释](http://www.codeproject.com/Articles/28306/Working-with-Checkboxes-in-the-WPF-TreeView)。

### MainWindowViewModel.cs

```
void DisplayBrowser()
{
    BrowserViewModel browserViewModel = new BrowserViewModel("Browser");
    this.AddTab(browserViewModel);
} 
```

[这个问题](https://stackoverflow.com/q/4359861/640378)描述了一个类似的场景，但答案对我不起作用，因为我没有明确引用`UserControl`.`MainWindow`

我知道我不能`DataTemplate`在 MainWindow 中定义 a，`Resources`因为 BrowserViewModel 有一个带参数的构造函数。

还有其他解决方案需要使用框架。有没有**避免使用框架**的简单方法？

# sql - “一些”功能是通用 SQL 的一部分吗？

> ID：15210517
> 
> 赞同：2
> 
> 时间：2013-03-04T20:29:11.703
> 
> 标签：sql, function

我可以在 Oracle、Potsgresql 和 Sql Server 上使用“some()”函数。但它是通用 SQL 函数还是某些扩展的一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:48:33.703

`some``ANY`是它们都不是“函数”而是条件（或运算符）的别名。

它们有点类似于`IN`(and `ALL`) 运算符，只是它们不对相关子查询的完整集进行运算符，而仅对“*一些*”（或“*任何*” ）行进行运算符。

这是 PostgreSQL 手册中的相关部分：
[http ://www.postgresql.org/docs/current/static/functions-comparisons.html#AEN18025](http://www.postgresql.org/docs/current/static/functions-comparisons.html#AEN18025)

以下是 Oracle 手册的相关部分：http:
[//docs.oracle.com/cd/E11882_01/server.112/e26088/conditions002.htm#CJAGAABC](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions002.htm#CJAGAABC)

这是 SQL Server 手册的相关部分：http:
[//msdn.microsoft.com/en-us/library/ms175064%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms175064%28v=sql.90%29.aspx)

（部分）引用 ANSI SQL 2006 标准：

```
<量化比较谓词>

<量化比较谓词> ::=
   <行值谓词> <量化比较谓词第二部分>

<量化比较谓词第二部分> ::=
   <comp op> <quantifier> <table subquery>

<量词> ::=
  <全部>
  | <一些>

<全部> ::=
   全部

<一些> ::=
  一些
  | 任何

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:40:29.800

使用运算符 SOME() 和 ANY() 的查询在 MySQL 中有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:57:50.157

它是 ISO/IEC 9075:1992 的一部分，也称为 ANSI SQL 92 标准。[请参阅sql-1992 文档](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)中的“8.7 <量化比较谓词>” 。

# python - matplotlib/pandas：在时间序列图中沿着绘制的线放置线标签

> ID：15210520
> 
> 赞同：6
> 
> 时间：2013-03-04T20:29:17.173
> 
> 标签：python, pandas, matplotlib

我正在绘制比较来自多个节点的系统特性的时间序列数据。我想沿其线显式标记来自特定节点的线。到目前为止，我已经成功地为特定节点设置了单独的线条样式，这使其在图例框中具有独特的线条和独特的样式标记。

我正在尝试找到一种方法来沿线放置独特的标签，可能是沿线弯曲的文本。有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T01:48:48.943

使用 matplotlib 使文本沿线弯曲并不容易，但`annotate`可以让您轻松地用文本和箭头标记线。

例如

```
import matplotlib.pyplot as plt
import numpy as np

# Generate some data
x = np.linspace(0, 20, 200)
y = np.cos(x) + 0.5 * np.sin(3 * x)

fig, ax = plt.subplots()
ax.plot(x, y)

ax.annotate(r'$y = cos(x) + \frac{sin(3x)}{2}$', xy=(x[70], y[70]), 
            xytext=(20, 10), textcoords='offset points', va='center',
            arrowprops=dict(arrowstyle='->'))
plt.show() 
```

![在此处输入图像描述](../Images/fdf8227fda09dcdb8a04412135ebad99.png)

# javascript - jQuery .parents([selector]) 不适用于 IE9 和 Firefox

> ID：15210525
> 
> 赞同：1
> 
> 时间：2013-03-04T20:29:25.547
> 
> 标签：javascript, jquery, cross-browser, selector, parent

```
<html>
<body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="application/javascript">

        $(document).ready(function() {
            $("#evaluation_complete").parents("table")[0].remove(); //doesn't work

            //this works
            //var EvalComplete = document.getElementById("evaluation_complete");
            //EvalComplete.parentNode.parentNode.parentNode.parentNode.parentNode.removeChild(
                //EvalComplete.parentNode.parentNode.parentNode.parentNode); 
        });

    </script>
    <p>Testing little code</p>
    <table>
        <tbody>
            <tr>
                <td class="button-left">&nbsp;</td>
                <td class="button-middle" nowrap="true"><div
                        style="margin: 0px 0px 1px;">
                        <a class="button-text" name="evaluation_complete"
                            id="evaluation_complete" href="#">Evaluation Complete</a>
                    </div></td>
                <td class="button-right">&nbsp;</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

我无法控制表的设置方式。但是我只知道链接的ID。我的目标是遍历`<table>`元素并将其从 DOM 中删除。我也试过了`closest`。我在 Firefox 和 IE9 中遇到的错误是这`remove`不是一个函数。注释掉的块有效，但不是很动态。但是，在 Chrome 中，它可以完美运行。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T20:33:01.823

当您尝试`.remove()`在本机 JS 元素而不是 jQuery 元素上使用时，它不起作用：

它不是 ：

```
$("#evaluation_complete").parents("table")[0].remove(); 
```

但

```
$("#evaluation_complete").parents("table").eq(0).remove(); 
```

或者

```
$("#evaluation_complete").parents("table").first().remove(); 
```

等等

使用`[0]`或`get(0)`从类数组 jQuery 对象中获取本机 JS 元素，该对象没有`.remove()`方法。

作为旁注，使用`closest()`会更有效，并且可以与上述示例一起使用。

# perl - 使用“使用 utf8；” 给了我'印刷中的宽字符'

> ID：15210532
> 
> 赞同：92
> 
> 时间：2013-03-04T20:29:51.060
> 
> 标签：perl, unicode, utf-8

如果我运行以下 Perl 程序：

```
perl -e 'use utf8; print "鸡\n";' 
```

我收到这个警告：

```
Wide character in print at -e line 1. 
```

如果我运行这个 Perl 程序：

```
perl -e 'print "鸡\n";' 
```

我没有收到警告。

我认为`use utf8`需要在 Perl 脚本中使用 UTF-8 字符。为什么这不起作用，我该如何解决？我正在使用 Perl 5.16.2。如果这是在文件中而不是在命令行上的一个衬里，我会遇到同样的问题。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-03-05T10:56:27.503

如果没有`use utf8`Perl，会将您的字符串解释为单字节字符序列。如您所见，您的字符串中有四个字节：

```
$ perl -E 'say join ":", map { ord } split //, "鸡\n";'
233:184:161:10 
```

前三个字节组成你的字符，最后一个是换行符。

调用`print`将这四个字符发送到 STDOUT。然后，您的控制台会计算出如何显示这些字符。如果您的控制台设置为使用 UTF8，那么它将这三个字节解释为您的单个字符，这就是显示的内容。

如果我们在`utf8`模块中添加，事情就不同了。在这种情况下，Perl 将您的字符串解释为两个字符。

```
$ perl -Mutf8 -E 'say join ":", map { ord } split //, "鸡\n";'
40481:10 
```

默认情况下，Perl 的 IO 层假定它使用单字节字符。所以当你试图打印一个多字节字符时，Perl 认为有问题并给你一个警告。与以往一样，您可以通过包含`use diagnostics`. 它会这样说：

> (S utf8) Perl 遇到了一个宽字符 (>255)，但它没有预料到它。此警告默认为 I/O（如打印）打开。消除此警告的最简单方法是将 :utf8 层添加到输出中，例如 binmode STDOUT, ':utf8'。另一种关闭警告的方法是添加 no warnings 'utf8'; 但这通常更接近作弊。通常，您应该使用编码显式标记文件句柄，请参阅 open 和 perlfunc/binmode。

正如其他人指出的那样，您需要告诉 Perl 接受多字节输出。有很多方法可以做到这一点（有关一些示例，请参阅[Perl Unicode 教程](http://perldoc.perl.org/perlunitut.html)）。最简单的方法之一是使用`-CS`命令行标志 - 它告诉三个标准文件句柄（STDIN、STDOUT 和 STDERR）处理 UTF8。

```
$ perl -Mutf8 -e 'print "鸡\n";'
Wide character in print at -e line 1.
鸡 
```

对比

```
$ perl -Mutf8 -CS -e 'print "鸡\n";'
鸡 
```

Unicode 是一个大而复杂的领域。正如您所看到的，许多简单的程序似乎都在做正确的事情，但原因却是错误的。当您开始修复程序的一部分时，事情通常会变得更糟，直到您修复*了所有*程序。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-03-04T20:34:08.783

`use utf8;`所做的只是告诉 Perl 源代码是使用 UTF-8 编码的。你需要告诉 Perl 如何编码你的文本：

```
use open ':std', ':encoding(UTF-8)'; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-17T21:18:33.840

将所有标准输出编码为 UTF-8：

```
binmode STDOUT, ":utf8"; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-03-04T21:25:43.727

通过使用 CPAN 模块，您可以接近“到处都做 utf8” [`utf8::all`](http://metacpan.org/module/utf8::all)。

```
perl -Mutf8::all -e 'print "鸡\n";' 
```

当`print`收到无法打印的内容（未提供层时大于 255 的字符`:encoding`）时，它假定您打算使用 UTF-8 对其进行编码。在对问题发出警告后，它会这样做。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-09T10:40:39.863

你可以用这个，

```
perl -CS filename. 
```

它还将终止该错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-23T14:15:31.313

在西班牙语中，除了开始使用之外，您还会发现此错误：

```
use utf8; 
```

您的编辑器编码采用不同的编码。所以你在编辑器上看到的并不是 Perl 所做的。要解决该错误，只需将编辑器编码更改为**Unicode/UTF-8**。

# c# - 断言字符串数组不相等但似乎是

> ID：15210535
> 
> 赞同：2
> 
> 时间：2013-03-04T20:30:08.447
> 
> 标签：c#, unit-testing

我有 2 个字符串数组，当我检查它们时它们看起来是一样的。我使用了错误的断言方法吗？

```
//Arrange
string[] expected = new[] { "Widget A", "Widget B" };
string[] actual;
//Act
actual = api.GetIncidents(credentials);
//Assert
Assert.AreEqual(expected, actual);

Assert.AreEqual failed. Expected:<System.String[]>. Actual:<System.String[]>. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:34:33.583

在对集合进行断言时，您需要[CollectionAssert.AreEqual](http://msdn.microsoft.com/en-us/library/ms243736%28v=vs.80%29.aspx)方法和通常的[CollectionAssert类：](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.collectionassert_methods%28v=vs.90%29.aspx)

```
CollectionAssert.AreEqual(expected, actual); 
```

# ruby-on-rails - 回形针未在应用程序数据库中保存 s3 文件路径

> ID：15210537
> 
> 赞同：2
> 
> 时间：2013-03-04T20:30:10.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我正在尝试通过回形针和 aws-sdk 上传文件 s3。该文件已成功保存到 s3，但应用程序记录始终包含 nil 值。

**附件型号：**

```
class Attachment < ActiveRecord::Base
 has_attached_file :attachment,
                    storage: :s3,
                    bucket: "test",
                    s3_credentials: "#{Rails.root}/config/s3.yml",
                    path: "test/:id/:style.:extension"
end 
```

**附件控制器：**

```
class AttachmentsControllers < ApplicationController

  def create
   Attachment.create(attachment: params[:attachment])
  end

end 
```

**日志：**

```
SQL (1.0ms)  INSERT INTO "attachments" ("attacheable_id", "attacheable_type", "attachment", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["attacheable_id", nil], ["attacheable_type", nil], ["attachment", nil], ["created_at", Mon, 04 Mar 2013 20:17:47 UTC +00:00], ["updated_at", Mon, 04 Mar 2013 20:17:47 UTC +00:00]]

[paperclip] Saving attachments.
[paperclip] saving :test/11/original.jpg
[AWS S3 200 1.783004 0 retries] put_object(:acl=>:public_read,:bucket_name=>"test",:content_length=>21377,:content_type=>"image/jpeg",:data=>#<Paperclip::UploadedFileAdapter:0xb5b91f80 @target=#<ActionDispatch::Http::UploadedFile:0xb2812290 @original_filename="544494_328200280615189_1305908665_n.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"song[attachment]\"; filename=\"544494_328200280615189_1305908665_n.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130305-9168-1brnfyd>>, @tempfile=#<File:/tmp/544494_328200280615189_1305908665_n20130305-9168-1r0pwtu.jpg>>,:key=>":test/11/original.jpg") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:59:42.667

这行没有意义：

```
Attachment.create(attachment: [:attachment]) 
```

您所做的是将哈希传递给 create 方法。哈希有一个键`attachment`指向一个值，该值是一个仅包含符号的数组`:attachment`。

您可能希望从发送到控制器操作的参数中获取附件。像这样的东西：

```
Attachment.create(attachment: params[:attachment]) 
```

另请注意，您应遵循 Rails 的命名约定 - 模型 Attachment 的控制器应命名为 AttachmentsController

# javascript - 尝试通过 Ti.Network.createHTTPClient 检索标头时遇到问题

> ID：15210544
> 
> 赞同：2
> 
> 时间：2013-03-04T20:30:27.167
> 
> 标签：javascript, tidesdk

这是我在 TideSDK 1.3.1 beta 中的 javascript

```
$(document).ready(function(){
$("#button").click(function(){
    var url = "http://www.abc.com/login.php";
    var cookie;
    var username = $("#email").val();
    var password = $("#password").val();

    if(navigator.onLine(connected)){

        var client = Ti.Network.createHTTPClient({
            onreadystatechange : function(e){
                if(client.readyState == 4){
                    cookie = client.getResponseHeader("Set-Cookie");

                }
            },
        });
        client.open("POST",url);
        client.send("username="+username+"&password="+password);
    }

    else{
        $("p").text("Check your Internet Connection");
    }

}); 
```

});

我在这里尝试做的是首先检查互联网连接是否可用，如果可用，则与服务器建立 http 连接。我面临的问题是 navigator.onLine() 在 TideSDK 1.3.1 上不起作用，虽然我可以建立连接（评论 navigator.onLine）并且调试控制台显示状态正在更改回调函数似乎没有执行.....我正在使用 TideSDK Desktop 和 Tide SDK 1.3.1 beta

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:05:25.123

以下对我有用....

```
if(navigator.onLine) {
 // your code
alert('Online');
} 
```

# android - 如何在原生 Android 应用程序上使用“Font Awesome”中的图标和符号

> ID：15210548
> 
> 赞同：154
> 
> 时间：2013-03-04T20:30:35.013
> 
> 标签：android, font-awesome

我正在尝试在我的应用程序上使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，我能够使用 集成字体`Typeface.createFromAsset()`，但我也想使用此字体提供的图标，但到目前为止我还不能这样做。

这种特殊字体包含 Unicode 专用区域 (PUA) 内的图标，用于媒体播放器控件、文件系统访问、箭头等。

有没有人在Android上使用过包含图标和符号的字体，这可能吗？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2013-04-02T11:25:18.980

在我的 android 应用程序中，Font Awesome 似乎对我来说工作正常。我做了以下事情：

1.  复制`fontawesome-webfont.ttf`到我的资产文件夹
2.  使用此页面找到我想要的图标的字符实体：http: [//fortawesome.github.io/Font-Awesome/cheatsheet/](http://fortawesome.github.io/Font-Awesome/cheatsheet/)
3.  在 strings.xml 中为每个图标创建了一个条目。例如心脏：

    ```
    <string name="icon_heart">&#xf004;</string> 
    ```

4.  在我的 xml 布局视图中引用了所述条目：

    ```
     <Button
         android:id="@+id/like"
         style="?android:attr/buttonStyleSmall"
         ...
         android:text="@string/icon_heart" /> 
    ```

5.  在我的 onCreate 方法中加载字体并将其设置为适当的视图：

    ```
    Typeface font = Typeface.createFromAsset( getAssets(), "fontawesome-webfont.ttf" );
    ...
    Button button = (Button)findViewById( R.id.like );
    button.setTypeface(font); 
    ```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-05T05:01:52.420

尝试 IcoMoon：http: [//icomoon.io](http://icomoon.io)

*   选择你想要的图标
*   为每个图标分配字符
*   下载字体

比如说，您选择了播放图标，为其分配了字母“P”，然后将文件下载`icomoon.ttf`到您的资产文件夹中。这是您显示图标的方式：

xml:

```
<TextView
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:textSize="48sp"
  android:text="P" /> 
```

爪哇：

```
Typeface typeface = Typeface.createFromAsset(getAssets(), "icomoon.ttf");
textView.setTypeface(typeface); 
```

我发表了关于制作漂亮的 Android 应用程序的演讲，其中包括对使用图标字体的说明，以及添加渐变以使图标更漂亮： [http ://www.sqisland.com/talks/beautiful-android](http://www.sqisland.com/talks/beautiful-android)

图标字体说明从幻灯片 34 开始： [http ://www.sqisland.com/talks/beautiful-android/#34](http://www.sqisland.com/talks/beautiful-android/#34)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-29T18:33:30.843

也许为时已晚，但我有同样的需求，所以我已经发布了这个[https://github.com/liltof/font-awsome-for-android](https://github.com/liltof/font-awsome-for-android) 这是一个 android 就绪的 xml 版本的字体真棒可用就像 Keith Corwin 说

希望它会帮助别人。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-11T13:22:47.840

如上所述是一个很好的例子，效果很好：

```
Typeface font = Typeface.createFromAsset(getAssets(), "fontawesome-webfont.ttf" );

Button button = (Button)findViewById( R.id.like );
button.setTypeface(font); 
```

但！> 如果您从 xml 设置按钮内的字符串，这将起作用：

```
<string name="icon_heart">&#xf004;</string>
button.setText(getString(R.string.icon_heart)); 
```

如果您需要动态添加它可以使用这个：

```
String iconHeart = "&#xf004;";
String valHexStr = iconHeart.replace("&#x", "").replace(";", "");
long valLong = Long.parseLong(valHexStr,16);
button.setText((char) valLong + ""); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-22T10:59:14.003

[为此目的设计了](http://blog.shamanland.com/p/android-fonticon-library.html)一个小而有用的库：

```
dependencies {
    compile 'com.shamanland:fonticon:0.1.9'
} 
```

**[在Google Play](https://play.google.com/store/apps/details?id=com.shamanland.fonticon.example)上获取演示。**

![在此处输入图像描述](../Images/d974adb22b2d7614dbe84be9f966569b.png)

您可以在布局中轻松添加基于字体的图标：

```
<com.shamanland.fonticon.FontIconView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/ic_android"
    android:textSize="@dimen/icon_size"
    android:textColor="@color/icon_color"
    /> 
```

您可以`Drawable`从 xml 膨胀字体图标：

```
<?xml version="1.0" encoding="utf-8"?>
<font-icon
    xmlns:android="http://schemas.android.com/apk/res-auto"
    android:text="@string/ic_android"
    android:textSize="@dimen/big_icon_size"
    android:textColor="@color/green_170"
    /> 
```

Java代码：

```
Drawable icon = FontIconDrawable.inflate(getResources(), R.xml.ic_android); 
```

链接：

*   [项目页面](http://blog.shamanland.com/p/android-fonticon-library.html)
*   [Github 仓库](https://github.com/shamanland/fonticon)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-02T05:41:47.353

如果您想要编程 setText 而不向 string.xml 添加字符串

在此处查看其十六进制代码：

[http://fortawesome.github.io/Font-Awesome/cheatsheet/](http://fortawesome.github.io/Font-Awesome/cheatsheet/)

替换  到 0xf066

```
 Typeface typeface = Typeface.createFromAsset(getAssets(), "fontawesome-webfont.ttf");
    textView.setTypeface(typeface);
    textView.setText(new String(new char[]{0xf006 })); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-08T04:53:49.167

我用于 Font Awesome 的库之一是：

[https://github.com/Bearded-Hen/Android-Bootstrap](https://github.com/Bearded-Hen/Android-Bootstrap)

具体来说，

[https://github.com/Bearded-Hen/Android-Bootstrap/wiki/Font-Awesome-Text](https://github.com/Bearded-Hen/Android-Bootstrap/wiki/Font-Awesome-Text)

文档很容易理解。

首先，在 build.gradle 中添加所需的依赖项：

```
dependencies {
    compile 'com.beardedhen:androidbootstrap:1.2.3'
} 
```

其次，您可以在 XML 中添加它：

```
<com.beardedhen.androidbootstrap.FontAwesomeText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    fontawesometext:fa_icon="fa-github"
    android:layout_margin="10dp" 
    android:textSize="32sp"
/> 
```

但如果您想使用上面的代码示例，请确保将其添加到您的根布局中：

```
 xmlns:fontawesometext="http://schemas.android.com/apk/res-auto" 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-18T01:54:02.993

我在 C# (Xamarin) 中创建了这个帮助程序类，以编程方式设置文本属性。它对我来说效果很好：

```
internal static class FontAwesomeManager
{
    private static readonly Typeface AwesomeFont = Typeface.CreateFromAsset(App.Application.Context.Assets, "FontAwesome.ttf");

    private static readonly Dictionary<FontAwesomeIcon, string> IconMap = new Dictionary<FontAwesomeIcon, string>
    {
        {FontAwesomeIcon.Bars, "\uf0c9"},
        {FontAwesomeIcon.Calendar, "\uf073"},
        {FontAwesomeIcon.Child, "\uf1ae"},
        {FontAwesomeIcon.Cog, "\uf013"},
        {FontAwesomeIcon.Eye, "\uf06e"},
        {FontAwesomeIcon.Filter, "\uf0b0"},
        {FontAwesomeIcon.Link, "\uf0c1"},
        {FontAwesomeIcon.ListOrderedList, "\uf0cb"},
        {FontAwesomeIcon.PencilSquareOutline, "\uf044"},
        {FontAwesomeIcon.Picture, "\uf03e"},
        {FontAwesomeIcon.PlayCircleOutline, "\uf01d"},
        {FontAwesomeIcon.SignOut, "\uf08b"},
        {FontAwesomeIcon.Sliders, "\uf1de"}
    };

    public static void Awesomify(this TextView view, FontAwesomeIcon icon)
    {
        var iconString = IconMap[icon];

        view.Text = iconString;
        view.SetTypeface(AwesomeFont, TypefaceStyle.Normal);
    }
}

enum FontAwesomeIcon
{
    Bars,
    Calendar,
    Child,
    Cog,
    Eye,
    Filter,
    Link,
    ListOrderedList,
    PencilSquareOutline,
    Picture,
    PlayCircleOutline,
    SignOut,
    Sliders
} 
```

我认为应该很容易转换为 Java。希望它可以帮助某人！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-29T21:05:50.503

FontView 库允许您在应用程序中使用普通/unicode 字体字符作为图标/图形。它可以通过资产或网络位置加载字体。

这个库的好处是：

```
1 - it takes care of remote resources for you
2 - scales the font size in dynamically sized views
3 - allows the font to easily be styled. 
```

[https://github.com/shellum/fontView](https://github.com/shellum/fontView)

例子：

`Layout:`

```
<com.finalhack.fontview.FontView
        android:id="@+id/someActionIcon"
        android:layout_width="80dp"
        android:layout_height="80dp" /> 
```

`Java:`

```
fontView.setupFont("fonts/font.ttf", character, FontView.ImageType.CIRCLE);
fontView.addForegroundColor(Color.RED);
fontView.addBackgroundColor(Color.WHITE); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-04T11:17:33.077

还有另一种不错的解决方案，您可以直接在布局 xml 文件中使用，不需要使用`setTypeface`.

这是 Joan Zapata 的[Iconify](https://github.com/JoanZapata/android-iconify)。您可以[在此处阅读](http://blog.joanzapata.com/iconify-just-got-a-lot-better/)**Iconify v2**的新增功能。它包括 9 个不同的字体库，您可以通过将依赖项添加到**build.gradle**文件来简单地使用它们。

在布局 xml 文件中，可以在这些小部件之间进行选择：

```
com.joanzapata.iconify.widget.IconTextview
com.joanzapata.iconify.widget.IconButton
com.joanzapata.iconify.widget.IconToggleButton 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-29T15:42:01.563

最初创建asset文件夹并复制fontawesome图标（.ttf） 如何创建asset文件夹？

> app-->右键-->新建-->文件夹-->资产文件夹

下一步下载 如何下载.ttf 文件？ [单击此处->](https://fontawesome.com/how-to-use/on-the-web/setup/hosting-font-awesome-yourself)下载解压后单击下载按钮并打开网络字体。最后选择真正的文本样式（ttf）粘贴资产文件夹。

如何在android中设计xml和java文件？

> app-->res-->values string.xml

```
resources
    string name="calander_font" >&#xf073; <string
resources 
```

一个字体的这个例子更多 Unicode[点击这里](https://fontawesome.com/cheatsheet?from=io)

Activity_main.xml

```
 <TextView
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:id="@+id/calander_view"/> 
```

MainActivity.java

```
calander_tv = (TextView)findViewById(R.id.calander_view);

Typeface typeface = Typeface.createFromAsset(getAssets(),"/fonts/fa-solid-900.ttf");
calander_tv.setTypeface(typeface);
calander_tv.setText(R.string.calander_font); 
```

输出：

[输出图像](https://i.stack.imgur.com/5fPeO.jpg)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-21T16:50:47.960

我参加聚会有点晚了，但我写了一个自定义视图，让你这样做，默认情况下它设置为 entypo，但你可以修改它以使用任何图标字体：在这里查看：github.com/MarsVard/IconView

// 编辑库是旧的，不再支持...这里是新的[https://github.com/MarsVard/IonIconView](https://github.com/MarsVard/IonIconView)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-05-30T04:18:23.127

如果你只需要几个字体很棒的图标，你也可以使用[http://fa2png.io](http://fa2png.io)来生成普通的像素图像。但是，如果您定期添加新图标/按钮，我建议您使用 .ttf 版本，因为它更灵活。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-06-26T22:00:10.653

如果有人想知道如何以编程方式添加它，你必须这样做。

```
 button_info.setText(R.string.icon_heart);
    button_info.append(" Hallo"); //<<--- This is the tricky part 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-10-01T21:38:47.113

因为所有答案都很好，但我不想使用库，每个解决方案都只有一行 java 代码，让我`Activities`非常`Fragments`混乱。所以我把这个`TextView`类改写如下：

```
public class FontAwesomeTextView extends TextView {
private static final String TAG = "TextViewFontAwesome";
public FontAwesomeTextView(Context context) {
    super(context);
    init();
}

public FontAwesomeTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public FontAwesomeTextView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    init();
}

@TargetApi(Build.VERSION_CODES.LOLLIPOP)
public FontAwesomeTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
    super(context, attrs, defStyleAttr, defStyleRes);
    init();
}

private void setCustomFont(Context ctx, AttributeSet attrs) {
    TypedArray a = ctx.obtainStyledAttributes(attrs, R.styleable.TextViewPlus);
    String customFont = a.getString(R.styleable.TextViewPlus_customFont);
    setCustomFont(ctx, customFont);
    a.recycle();
}

private void init() {
    if (!isInEditMode()) {
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fontawesome-webfont.ttf");
        setTypeface(tf);
    }
}

public boolean setCustomFont(Context ctx, String asset) {
    Typeface typeface = null;
    try {
        typeface = Typeface.createFromAsset(ctx.getAssets(), asset);
    } catch (Exception e) {
        Log.e(TAG, "Unable to load typeface: "+e.getMessage());
        return false;
    }

    setTypeface(typeface);
    return true;
}
} 
```

您应该做的是将字体`ttf`文件复制到`assets`文件夹中。并使用[此备忘单](http://fontawesome.io/cheatsheet/)查找每个图标字符串。

希望这可以帮助。

# haskell - 在 Parsec 中递归地使用语句解析器

> ID：15210549
> 
> 赞同：0
> 
> 时间：2013-03-04T20:30:37.760
> 
> 标签：haskell, parsec

我有一个 ifelse 解析器，它应该能够用
类 java 语言解析嵌入的 ifelse 语句，但它无法识别内部 ifelse。另外，如果有人可以向我展示一种更好的方法来处理 ifelseParser 中的空格，我将不胜感激。

```
if (~(position > 16)) { 
                 if (~((value & mask) = 0)) { 
                       do Memory.poke(8000 + position, 1); 
                 } else { 
                       do Memory.poke(8000 + position, 0); 
                 } 
} else { let loop = false; } 
```

ifelseParser 没有拾取整个表达式，缺少内部 if-else 语句。

```
 Right (IfElse "if" (ExprOpTerm (Unary "~" (ExprOpTerm (SimpleExpr (ExprOpTerm 
(VarTerm "position") [(">",IntConst 16)])) [])) []) [Let "let" "loop" 
(ExprOpTerm (KeywordTerm "false") [])] "else" [Let "let" "loop" 
(ExprOpTerm (KeywordTerm "false") [])])  

data Statement = Let Keyword VarName Expr                                                                                                                                                                                                     
               | SubLet Keyword VarName Expr Expr                                                                                                                                                                                             
               | If Keyword Expr [Statement]                                                                                                                                                                                                  
               | IfElse Keyword Expr [Statement] Keyword [Statement]                                                                                                                                                                          
               | While Keyword Expr [Statement]                                                                                                                                                                                               
               | Do Keyword SubCall                                                                                                                                                                                                           
               | ReturnExp Keyword Expr                                                                                                                                                                                                       
               | NoReturn                                                                                                                                                                                                                     
               | Return Keyword deriving (Show)   

ifelseParser :: Parser Statement   
ifelseParser = do                                                                                                                                                                                                                             
  whiteSpace                                                                                                                                                                                                                                  
  iff <- reserved' "if"                                                                                                                                                                                                                       
  whiteSpace                                                                                                                                                                                                                                  
  char '('                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  expr <- getExprParser                                                                                                                                                                                                                       
  whiteSpace                                                                                                                                                                                                                                  
  char ')'                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  char '{'                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  stmt <- many1 statementsParser                                                                                                                                                                                                              
  whiteSpace                                                                                                                                                                                                                                  
  char '}'                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  el <- reserved' "else"                                                                                                                                                                                                                      
  whiteSpace                                                                                                                                                                                                                                  
  char '{'                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  stmts <- many1 statementsParser                                                                                                                                                                                                              
  whiteSpace                                                                                                                                                                                                                                  
  char '}'                                                                                                                                                                                                                                    
  whiteSpace                                                                                                                                                                                                                                  
  return $ IfElse iff expr stmt el stmts         

statementsParser :: Parser Statement                                                                                                                                                                                                          
statementsParser = do                                                                                                                                                                                                                         
  try subLetParser <|>  try letParser <|> try whileParser <|>                                                                                                                                                                                 
    try ifelseParser <|> try ifParser <|>                                                                                                                                                                                                     
    try doParser <|> (try returnExpParser <|> try returnParser)                                                                                                                                                                               

subRoutineParser :: Parser Term                                                                                                                                                                                                               
subRoutineParser = do                                                                                                                                                                                                                         
  whiteSpace                                                                                                                                                                                                                                  
  sub <- subCallParser                                                                                                                                                                                                                        
  return $ Subroutine sub                                                                                                                                                                                                                     

getExprParser :: Parser Expr                                                                                                                                                                                                                  
getExprParser = do                                                                                                                                                                                                                            
  whiteSpace                                                                                                                                                                                                                                  
  term <- (try subRoutineParser <|>                                                                                                                                                                                                           
                 try intVal <|>                                                                                                                                                                                                               
                 try stringVal <|>                                                                                                                                                                                                            
                 try keyWordVal <|>                                                                                                                                                                                                           
                 try varExpParser <|>                                                                                                                                                                                                         
                 try varVal <|>                                                                                                                                                                                                               
                 try simpleExpr <|>                                                                                                                                                                                                           
                 try unaryOpExpr)                                                                                                                                                                                                             
  op <- many getExpP                                                                                                                                                                                                                          
  return $ ExprOpTerm term op                                                                                                                                                                                                                 

getExpP :: Parser (String,Term)                                                                                                                                                                                                               
getExpP = do                                                                                                                                                                                                                                  
  whiteSpace                                                                                                                                                                                                                                  
  op <- choice $ map string ops                                                                                                                                                                                                               
  term <- (try subRoutineParser <|>                                                                                                                                                                                                           
          try intVal <|>                                                                                                                                                                                                                      
          try stringVal <|>                                                                                                                                                                                                                   
          try keyWordVal <|>                                                                                                                                                                                                                  
          try varExpParser <|>                                                                                                                                                                                                                
          try varVal <|>                                                                                                                                                                                                                      
          try simpleExpr <|>                                                                                                                                                                                                                  
          try unaryOpExpr)                                                                                                                                                                                                                    
  return $ (op,term) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:36:08.453

您正在使用该变量`stmt`来保存“if”语句和“else”语句。所以当你这样做时：

```
 return $ IfElse iff expr stmt el stmt 
```

...我猜`stmt`它只包含最近分配的值，它来自“else”部分。

# openvms - DCL 排序 - 不同的起始位置

> ID：15210550
> 
> 赞同：0
> 
> 时间：2013-03-04T20:30:44.413
> 
> 标签：openvms, dcl

我有一个 DCL 脚本，它创建一个看起来像这样的 .txt 文件

```
something,somethingelse,00000004
somethingdifferent,somethingelse1,00000002
anotherline,line,00000015 
```

我需要按从最高到最低的第 3 列对文件进行排序：

```
anotherline,line,00000015
something,somethingelse,00000004
somethingdifferent,somethingelse1,00000002 
```

最好使用排序命令，如果我看到的所有内容都需要一个位置编号，如果每行都有不同的起始位置，怎么办？

如果 sort 是一种不好的处理方法，那么还有其他方法，或者我可以在将行写入文件时以某种方式处理这个问题。

我现在只使用 VMS/DCL 几个星期，所以我还不熟悉所有命令。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:22:16.953

正如您已经注意到的，VMS 排序需要在记录中具有固定起始位置的字段。您不能通过分隔符指定字段。如果要使用 VMS 排序，则必须确保所有记录的第三个字段从同一列开始。换句话说，您必须填充前面的字段。如果您可以控制文件的创建方式，这可能对您有用。如果您不知道或者您不知道排序字段前面的字符串有多大，那么这可能不是一种解决方法。也许更改字段的顺序是一种选择。

另一方面，您可能会发现系统上安装了 GNV。然后你可以尝试使用它的排序，这是一种 GNU 风格的排序。也就是说，`$ mcr gnv$gnu:[bin]sort -t, -k3 -r x.txt`可能会得到你想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:59:30.547

VMS Sort 确实没有真正做到这一点。像你一样重新格式化是唯一的方法。

如果您无法在 OpenVMS 系统上访问 GNV 排序，那么您可能拥有或可以安装 PERL？是更容易安装。

在 perl 中当然有很多方法。例如使用匿名排序函数（$a 是第一个参数，$b 第二个；<> 读取所有输入）

```
$ perl -e "print sort { 0+(split /,/,$b)[1] <=>  0+(split /,/,$a)[2]} <>" x.x 
```

其中 0 + 强制数字评估。对于（固定长度？）字符串比较使用：

```
$ perl -e "print sort { (split /,/,$b)[2] cmp (split /,/,$a)[2]} <>" x.x 
```

嗯，海因。`enter code here`

# android - Android 新/编辑 AVD 对话框缺少“硬件：”字段选项

> ID：15210552
> 
> 赞同：0
> 
> 时间：2013-03-04T20:31:02.773
> 
> 标签：android, android-emulator, avd

我在 Ubuntu 12.04 32 位上运行 Eclipse Juno 4.2，安装了所有 Android SDK 版本，Eclipse 的 android 插件也是最新的。

我一直在在线阅读一些 android 教程，我发现 AVD 管理器（仅限**编辑 AVD 屏幕**）与我的版本相比看起来有点不同：

在我的屏幕底部缺少硬件设置。此外，我也没有更改屏幕分辨率的选项。

有没有人有同样的经历？是因为操作系统（在我的情况下是 Ubuntu），还是新版本的 ADT 不再具有这些设置，或者只是一个错误？

我想发布图片，但由于某种原因编辑不让我这样做，它一直显示我需要至少 10 名声望的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:42:02.040

> 是因为操作系统（在我的情况下是 Ubuntu），还是新版本的 ADT 不再具有这些设置，或者只是一个错误？

使用较新版本的 AVD 管理器创建的 AVD 使用“设备定义”选项卡来查找您要查找的内容。您可以在此处创建新设备，并在创建 AVD 时从“设备”下拉列表中选择所需的设备。

> 我想发布图片，但由于某种原因编辑不让我这样做，它一直显示我需要至少 10 名声望的错误。

那是因为您是 StackOverflow 的新手。随意将图像上传到网络上的其他地方，并从您的问题中链接到它们。

# c# - 在运行时重新分配事件处理程序

> ID：15210553
> 
> 赞同：4
> 
> 时间：2013-03-04T20:31:05.443
> 
> 标签：c#, delegates, event-handling

我想`BackgroundWorker`在运行时更改附加到 a 的委托。像下面这样的东西会起作用吗？

```
DoWorkEvenHandler dweh = new DoWorkEventHandler(method1);
backgroundworker.DoWork += dweh; 
```

并在稍后`DoWork`通过重新分配引用来更改关联的委托`dweh`：

```
dweh = new DoWorkEventHandler(method2); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T20:32:11.260

不，您不能将委托“分配”给事件处理程序。处理程序通过将它们添加到内部用于表示事件的底层委托的调用列表来附加到事件。这是设计使然！

不，您不能通过更改以前用于附加事件处理程序的引用所指向的对象来更改处理程序；部分原因是**委托是不可变**的，部分原因是您只是将引用更改为指向其他内容，而不是真正更改您要完成的事件处理程序。

为了*更改*委托，您必须首先删除以前的委托：

```
backgroundworker.DoWork -= dweh; 
```

然后通过将其添加为事件的处理程序来分配一个新的：

```
backgroundworker.DoWork += new DoWorkEventHandler(method2); 
```

* * *

**笔记**

在大多数情况下，您可以使用以下语法从事件中删除处理程序（委托）：

```
backgroundworker.DoWork -= new DoWorkEventHandler(mehtod1); 
```

或使用隐式或显式方法组转换：

```
backgroundworker.DoWork -= (DoWorkEventHandler)mehtod1;  // explicit convertion    
//  -  or  - 
backgroundworker.DoWork -= mehtod1;                      // implicit (more compact) 
```

但根据具体情况，您可能需要维护对前一个委托的引用，以便以后能够将其删除。例如，这将适用于匿名方法或 lambda 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:02:59.793

你可以用众所周知的“额外的间接级别”来解决这个问题。写一个这样的类：

```
public sealed class RedirectableDoWorkEventHandler
{
    public RedirectableDoWorkEventHandler(DoWorkEventHandler handler)
    {
        Contract.Requires(handler != null);
        _handler = handler;
    }

    public DoWorkEventHandler Handler
    {
        get
        {
            return _handler;
        }

        set
        {
            Contract.Requires(value != null);
            _handler = value;
        }
    }

    public void DoWork(object sender, DoWorkEventArgs e)
    {
        _handler(sender, e);
    }

    private DoWorkEventHandler _handler;
} 
```

然后你可以像这样使用它：

```
public void Setup()
{
    BackgroundWorker worker = new BackgroundWorker();

    // ...

    var handler = new RedirectableDoWorkEventHandler(handler1);

    worker.DoWork += handler.DoWork;

    // And then some time later...

    handler.Handler = handler2; // Now DoWork will call handler2.
}

private void handler1(object sender, DoWorkEventArgs e)
{
    // Whatever
}

private void handler2(object sender, DoWorkEventArgs e)
{
    // Whatever
} 
```

但实际上，有什么意义呢？您还不如只拥有一个简单的处理程序，可以`if`在选项中进行选择。我想在某些情况下它可以帮助封装东西...... YMMV。

# silverlight - 在 Browser-Silverlight 应用上增加字体

> ID：15210555
> 
> 赞同：0
> 
> 时间：2013-03-04T20:31:13.203
> 
> 标签：silverlight

我只是少数将近 60 岁的程序员。如何在这个非常有用的应用程序上增加字体？我觉得很难看。非常感谢。

[http://regexhero.net/tester/](http://regexhero.net/tester/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:58:56.573

在 IE 和 Chrome 中，您可以使用 Ctrl + 鼠标滚轮进行放大。这将使一切变得更大（不仅仅是字体），但一切都在 Regex Hero 中很好地扩展，所以这不是问题。

# sql - 联接表的 UPDATE 语句

> ID：15210556
> 
> 赞同：0
> 
> 时间：2013-03-04T20:31:27.823
> 
> 标签：sql, oracle

我是第一次使用 Oracle 的 SQL Server 开发人员。而且我在使用可以轻松在 SQL 服务器中构建的 UPDATE 语句时遇到问题。

假设我有一个表 T1，其中包含 KeyVal1、Keyval2、KeyVal3、NonKeyVal1、... KeyVal1 2 和 3 列是复合键。

我也有表 T2 与 T1 的复合键的外键关系。如果记录存在于 T2 中，我想更新 T1.NonKeyVal1 和 T1.NonKeyVal2。

在 T-SQL 中，我会写：

```
Update T1
Set    NonKeyVal1 = 'x',
       NonKeyVal2 = 'y'
FROM   T1
JOIN   T2 ON T1.KeyVal1 = T2.KeyVal1 AND 
             T1.KeyVal2 = T2.KeyVal2 AND 
             T1.KeyVal3 = T2.KeyVal3; 
```

但我无法在 Oracle SQL 中解决这个问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:35:00.037

试试这个

```
Update T1
Set    NonKeyVal1 = 'x',
       NonKeyVal2 = 'y'
FROM   T1 WHERE EXISTS (
SELECT 1 FROM T2 WHERE T1.KeyVal1 = T2.KeyVal1 AND 
             T1.KeyVal2 = T2.KeyVal2 AND 
             T1.KeyVal3 = T2.KeyVal3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:35:30.490

您需要将其编写为相关子查询：

```
update t1
set    nonkeyval1 = 'x'
where  exists (select null
               from   t2
               where  t1.keyval1 = t2.keyval1
               and    t1.keyval2 = t2.keyval2
               and    t1.keyval3 = t3.keyval3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T13:46:40.863

如果您根据在某些列上连接的 T2 中的值更新 T1，那么在 Oracle 中，如果连接列通过表上的约束保证是唯一的，则可以编写可更新视图。

因此，如果 keyval1、keyval2 和 keyval3 上存在唯一键或主键约束，您可以编写...

```
Update (
  select t1.NonKeyVal1 t1_NonKeyVal1,
         t1.NonKeyVal2 t1_NonKeyVal2,
         t2.NonKeyVal1 t2_NonKeyVal1,
         t2.NonKeyVal2 t2_NonKeyVal2
  from   t1 join t2 on (
           T1.KeyVal1 = T2.KeyVal1 AND 
           T1.KeyVal2 = T2.KeyVal2 AND 
           T1.KeyVal3 = T2.KeyVal3))
set t1_NonKeyVal1 = t2_NonKeyVal1,
    t1_NonKeyVal2 = t2_NonKeyVal1; 
```

你的情况更简单一点，你可以：

```
Update (
  select t1.NonKeyVal1,
         t1.NonKeyVal2
  from   t1 join t2 on (
           T1.KeyVal1 = T2.KeyVal1 AND 
           T1.KeyVal2 = T2.KeyVal2 AND 
           T1.KeyVal3 = T2.KeyVal3))
set NonKeyVal1 = 'x',
    NonKeyVal2 = 'y'; 
```

如果没有约束，那么曾经有一个非官方的解决方法，它使用未记录的优化器提示来绕过更新连接基数检查，但它不是很安全。

如今，在没有约束的情况下，如果您需要引用连接表中的值，或者您的情况更简单，其他人建议的相关子查询就足够了，您可以使用 MERGE 语句。

# jquery - JQuery Mobile 1.3 元素和摩托罗拉设备

> ID：15210558
> 
> 赞同：0
> 
> 时间：2013-03-04T20:31:30.840
> 
> 标签：jquery, html, cordova, jquery-mobile

我在使用 JQM 1.3、JQ 1.9.1、PhoneGap/Cordova 2.4.0 和 DROID RAZR 4G、MOTOROLA PHOTON 4G、MB855、DROIDX 时遇到问题。

我的问题是用户看不到任何按钮、表单输入或可折叠集。我可以在 browserstack.com 上复制这个问题，甚至修复其中的一部分。我有一个 jsbin，但如果你没有 browserstack.com 或摩托罗拉模拟器，你将看不到链接的错误（所以我的描述可能必须这样做）。

[http://jsbin.com/ucelop/1/edit](http://jsbin.com/ucelop/1/edit)

摩托罗拉浏览器/html 解析器似乎没有完全尊重 z-index 属性，或者它与 JQM 提供的内容不兼容。如果我将按钮的 z-index 更改为 999999，我可以在摩托罗拉浏览器中看到它（所以我猜它确实有点尊重它），但这不适用于可折叠集和其他表单元素。

我所有的代码都可以在 JQM 支持的所有其他设备上运行。摩托罗拉出了点问题......

任何帮助是极大的赞赏！

~红色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:40:59.787

好的，jfriend00 的评论帮助我朝着正确的方向前进。

问题是在页眉和页脚元素中使用了“data-position=fixed”。

我的印象是这在 JQM 1.3 中已修复，但可惜不是。我可能要补充的不是 JQM 开发人员的任何错误，他们做得非常好！

在 Android 4.0.4 的 Motorola 设备上，使用 data-position=fixed 会导致覆盖隐藏表单元素和其他 JQM 小部件。手动更改 z-index（如上所述）可以在某些元素上克服此问题，但是调整 z-index 的任何元素都将浮动在固定页脚上方，从而破坏了固定页脚效果。

虽然我的原始代码在几乎所有其他设备和 Android 版本上都能正常工作，但我无法克服这个问题。

我将页脚更改为位置：绝对，但是等等，我仍然遇到表单元素不显示的问题！所以我不得不从 JQM 站点进行修复，据说它只适用于 Android 2.2/2.3 和 2D CSS 效果，但它也修复了我在 4.0.4 中的问题。

修复：

> 当 position: fixed 元素出现在页面的任何位置时，大多数 2D CSS 转换都会失败。奇怪的是，只有翻译转换似乎不受此影响。更奇怪的是，这个问题是通过在固定元素的父元素上设置 0.9 或更低的 CSS 不透明度来解决的。

src= [http://api.jquerymobile.com/fixedtoolbar/](http://api.jquerymobile.com/fixedtoolbar/)

# java - 带有非转义引号的 Java CSV 解析器

> ID：15210568
> 
> 赞同：4
> 
> 时间：2013-03-04T20:32:23.537
> 
> 标签：java, csv, supercsv

我有一个 CSV 文件，其中有一些引用问题：

```
"Albanese Confectionery","157137","ALBANESE BULK ASST. MINI WILD FRUIT WORMS 2" 4/5LB",9,90,0,0,0,.53,"21",50137,"3441851137","5 lb",1,4,4,$6.7,$6.7,$26.8 
```

SuperCSV 让这些水果蠕虫窒息（双关语）。我知道`2"`应该是`2""`，但不是。LibreOffice 实际上正确地解析了这个（这让我感到惊讶）。我想写我自己的小解析器，但其他行在字符串中有逗号：

```
"Albanese Confectionery","157230","ALBANESE BULK JET FIGHTERS,ASSORTED 4/5  B",9,90,0,0,0,.53,"21",50230,"3441851230","5 lb",1,4,4,$6.7,$6.7,$26.8 
```

有谁知道一个可以处理像这样疯狂的东西的 Java 库？还是我应该尝试所有可用的？还是我自己破解这个更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T21:10:33.000

正确的解决方案是找到生成数据的人，然后用键盘敲打他们，直到他们最终解决问题。

一旦你用尽了这条路线，你可以尝试市场上的其他一些 CSV 解析器，我过去曾成功使用过[OpenCSV](http://opencsv.sourceforge.net/)。

即使 OpenCSV 不能解决开箱即用的问题，代码也很容易阅读，并且在 Apache 许可下可用，因此可以修改算法以处理不稳定的数据，并且可能比从头开始更容易刮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:15:44.310

在这里甚至我自己都感到惊讶，但我想我会自己破解它。我的意思是，您只需要阅读这些行并通过拆分引号/逗号来生成标记，无论您想要什么。这样您就可以按照适合您的方式调整逻辑。这不是很难。该文件似乎被破坏了，因此通过一些现有的解决方案似乎需要更多的工作。

不过有一点 - 如果 LibreOffice 已经正确解析它，你不能从那里保存文件，从而生成一个更合理的文件。但是，如果您认为 LibreOffice 可能在猜测，请自己编写标记器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T23:17:40.027

+1 为“水果蠕虫窒息”双关语 - 我读到这句话时差点被咖啡呛到:)

如果您真的无法修复该 CSV，那么您可以提供自己的 Tokenizer（超级 CSV 非常灵活！）。

您通常会编写自己的`readColumns()`实现，但扩展默认的 Tokenizer 并覆盖在`readLine()`字符串被标记化之前拦截字符串（并修复未转义的引号）的方法会更快。

我在这里做了一个假设，任何不在分隔符旁边或在行首/结尾处的引号都应该被转义。它远非完美，但它适用于您的样本输入。你可以随心所欲地实现它——早上太早了，我无法使用正则表达式:)

这样，您根本不必修改 Super CSV（它只是插入），因此您还可以获得所有其他功能，如单元处理器和 bean 映射。

```
package org.supercsv;
import java.io.IOException;
import java.io.Reader;
import org.supercsv.io.Tokenizer;
import org.supercsv.prefs.CsvPreference;

public class FruitWormTokenizer extends Tokenizer {

  public FruitWormTokenizer(Reader reader, CsvPreference preferences) {
    super(reader, preferences);
  }

  @Override
  protected String readLine() throws IOException {
    final String line = super.readLine();
    if (line == null) {
      return null;
    }

    final char quote = (char) getPreferences().getQuoteChar();
    final char delimiter = (char) getPreferences().getDelimiterChar();

    // escape all quotes not next to a delimiter (or start/end of line)
    final StringBuilder b = new StringBuilder(line);
    for (int i = b.length() - 1; i >= 0; i--) {
      if (quote == b.charAt(i)) {
        final boolean validCharBefore = i - 1 < 0
            || b.charAt(i - 1) == delimiter;
        final boolean validCharAfter = i + 1 == b.length()
            || b.charAt(i + 1) == delimiter;
        if (!(validCharBefore || validCharAfter)) {
          // escape that quote!
          b.insert(i, quote);
        }
      }
    }
    return b.toString();
  }
} 
```

您可以将此 Tokenizer 提供给您的 CsvReader 的构造函数。

# javascript - 浏览器下载页面时是否可以显示 Twitter Bootstrap 进度条？

> ID：15210569
> 
> 赞同：1
> 
> 时间：2013-03-04T20:32:24.553
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个包含大量大图像的网站，我想在加载所有内容时显示一个 twitter 引导进度条。

是否有可能做到这一点？jquery 是否有跟踪页面加载进度的方法？

我想只显示一个进度条，直到所有 css、js 和图像等都下载完毕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:11:55.917

你可以尝试这样的事情：

HTML

```
<div class="progress progress-striped active">
    <div class="bar"></div>
</div>

<div class="imagelist">
    <img src="http://studio7designs.com/wp-content/uploads/green-grass.jpeg"/>
    <img src="http://studio7designs.com/wp-content/uploads/rowboat-600x398.jpg"/>
    <img src="http://studio7designs.com/wp-content/uploads/blue-wheat-grass.jpeg"/>
    <img src="http://studio7designs.com/wp-content/uploads/rocks.jpg"/>
    <img src="http://studio7designs.com/wp-content/uploads/sun-grass-golden.jpg"/>
    <img src="http://studio7designs.com/wp-content/uploads/blue-water-photo.jpg"/>
    <img src="http://studio7designs.com/wp-content/uploads/flight.jpg"/>
</div> 
```

Javascript

```
$.fn.imagesLoaded = function (callback, onEach) {
    var elems = this.filter('img'),
        len = elems.length,
        blank = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";

    elems.bind('load.imgloaded', function () {
        if(typeof onEach === 'function'){
            onEach(len, elems.length); // runs on every image load
        }

        if (--len <= 0 && this.src !== blank) {
            elems.unbind('load.imgloaded');
            callback.call(elems, this);
        }
    }).each(function () {
        // cached images don't fire load sometimes, so we reset src.
        if (this.complete || this.complete === undefined) {
            var src = this.src;
            // webkit hack from http://groups.google.com/group/jquery-dev/browse_thread/thread/eee6ab7b2da50e1f
            // data uri bypasses webkit log warning (thx doug jones)
            this.src = blank;
            this.src = src;
        }
    });

    return this;
};

$(document).ready(function () {
    var progress = $('.progress');
    var progressbar = progress.children('.bar');

    $('.imagelist img').imagesLoaded(function () {
        progressbar.width('100%');
        progress.fadeOut();
    }, function (left, total) {
        progressbar.width((total - left) / total * 100 + '%');
    });
}); 
```

我采用了 Paul Irish 编写的 .imagesLoaded() 代码，并添加了一个额外的回调，该回调在每次加载图像时触发。因此，对于每个加载的图像，进度条都会前进。

它并不完全准确，因为它不跟踪任何特定文件的加载量，而且我不完全确定在不使此代码复杂化的情况下这是可能的，因此进度条仅在加载图像时而不是在加载时发生变化。

我希望这有帮助。

# perl - 如何解析文件以进行匹配，并在 Perl 中打印匹配字符串之前的字符串？

> ID：15210572
> 
> 赞同：0
> 
> 时间：2013-03-04T20:32:40.410
> 
> 标签：perl, parsing, fasta

我正在尝试解析 GBK 文件。基本上，我需要返回与模式匹配的基因的基因座标签和产品名称。因此，如果我想搜索所有预测的基因产物的主题，搜索词“预测”将返回：

```
/product="predicted semialdehyde dehydrogenase"
/locus_tag="ECDH10B_2481" 
```

我已经能够返回，`/product`但我无法弄清楚如何“向后”解析以获取`/locus_tag`.

这是我到目前为止所拥有的：

```
my $fasta_file = 'example.txt';
open(INPUT, $fasta_file) || die "ERROR: can't read input FASTA file: $!";
while ( <INPUT> ) {
     if(/predicted/){
            print $_;
     }
} 
```

> 示例.txt

```
gene            complement(2525423..2526436)
                 /gene="usg"
                 /locus_tag="ECDH10B_2481"
 CDS             complement(2525423..2526436)
                 /gene="usg"
                 /locus_tag="ECDH10B_2481"
                 /codon_start=1
                 /transl_table=11
                 /product="predicted semialdehyde dehydrogenase"
                 /protein_id="ACB03477.1"
                 /db_xref="GI:169889770"
                 /db_xref="ASAP:AEC-0002184"
                 /translation="MSEGWNIAVLGATGAVGEALLETLAERQFPVGEIYALARNESAG
                 EQL"
 gene            complement(2526502..2527638)
                 /gene="pdxB"
                 /locus_tag="ECDH10B_2482"
 CDS             complement(2526502..2527638)
                 /gene="pdxB"
                 /locus_tag="ECDH10B_2482"
                 /codon_start=1
                 /transl_table=11
                 /product="erythronate-4-phosphate dehydrogenase"
                 /protein_id="ACB03478.1"
                 /db_xref="GI:169889771"
                 /db_xref="ASAP:AEC-0002185"
                 /translation="MKILVDENMPYARDLFSRLGEVTAVPGRPIPVAQLADADALMVR
                 SVTKVNESLLAGKPIKFVGTATAGTDHVDEAWLKQAGIGFSAAP" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:37:46.193

你不应该“向后解析”。你的`/locus`标签是一个*事件*，匹配是另一个。你的逻辑应该运行

1.  您捕获每个基因座标记并存储它们
2.  匹配时，将 locus 标签存储在 keeper 列表中
3.  当您存储下一个时，最后一个基因座标记将自动被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:40:55.830

只要记住遇到的最后一个基因座标签，如果预测到就打印出来：

```
#!/usr/bin/perl
use warnings;
use strict;

my $fasta_file = 'example.txt';
open my $INPUT, '<', $fasta_file or die "ERROR: can't read input FASTA file: $!";

my $locus_tag;
while (<$INPUT>) {
    if (/locus_tag/) {
        $locus_tag = $_;
    } elsif (/predicted/) {
        print;
        print $locus_tag;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:52:12.677

向后解析非常困难。通过解析每个完整的条目然后确定它是否匹配，您会得到更好的服务。现在这需要做更多的工作，但是当您想对基因数据进行其他操作时，它会非常有用。

我在下面使用的方法构建了`%entry`. 当它看到下一个“基因”行时，它会处理该条目，在这种情况下检查产品匹配，并为下一个清除它。

我已将`DATA`文件句柄用于测试目的，它会读取`__DATA__`行后的所有内容。

```
#!/usr/bin/env perl
use v5.10;
use strict;
use warnings;

my %entry;
while(my $line = <DATA>) {
    # new entry, process the previous one and clear it
    if( $line =~ m{^ gene \s+ complement \( (.*) \) }x ) {
        process_entry(\%entry) if keys %entry;
        %entry = ( complement => $1 );
    }
    elsif( $line =~ m{^CDS \s+ }x ) {
        # ignore CDS lines for now
    }
    elsif( $line =~ m{^\s+/(\w+)=(.*)} ) {
        $entry{$1} = $2;
    }
    else {
        warn "Unknown line $line";
    }
}

# Process the last one.
process_entry(\%entry) if keys %entry;

sub process_entry {
    my $entry = shift;

    say "MATCH! $entry->{locus_tag}" if $entry->{product} =~ /predicted/;

    return;
}

__DATA__
gene            complement(2525423..2526436)
                /gene="usg"
                /locus_tag="ECDH10B_2481"
CDS             complement(2525423..2526436)
                /gene="usg"
                /locus_tag="ECDH10B_2481"
                /codon_start=1
                /transl_table=11
                /product="predicted semialdehyde dehydrogenase"
                /protein_id="ACB03477.1"
                /db_xref="GI:169889770"
                /db_xref="ASAP:AEC-0002184"
                /translation="MSEGWNIAVLGATGAVGEALLETLAERQFPVGEIYALARNESAGEQL"
gene            complement(2526502..2527638)
                /gene="pdxB"
                /locus_tag="ECDH10B_2482"
CDS             complement(2526502..2527638)
                /gene="pdxB"
                /locus_tag="ECDH10B_2482"
                /codon_start=1
                /transl_table=11
                /product="erythronate-4-phosphate dehydrogenase"
                /protein_id="ACB03478.1"
                /db_xref="GI:169889771"
                /db_xref="ASAP:AEC-0002185"
                /translation="MKILVDENMPYARDLFSRLGEVTAVPGRPIPVAQLADADALMVRSVTKVNESLLAGKPIKFVGTATAGTDHVDEAWLKQAGIGFSAAP" 
```

或者，CPAN 上有几个[Fasta 阅读器，](https://metacpan.org/search?q=fasta)包括[Bio::SeqReader::Fasta](https://metacpan.org/module/Bio%3a%3aSeqReader%3a%3aFasta)和[Bio::DB::Fasta](https://metacpan.org/module/Bio%3a%3aDB%3a%3aFasta)。

# java - 阅读器与缓冲阅读器

> ID：15210578
> 
> 赞同：2
> 
> 时间：2013-03-04T20:32:54.827
> 
> 标签：java, bufferedreader

调用`read(char[] cbuf)`之间的性能差异`FileReader`和`BufferedReader`假设缓冲区的大小`BufferedReader`与`cbuf`.

我知道每次进行本机调用以读取每个字符时，对 sice的简单`read()`调用都会变慢。`FileReader`

`read(char[] cbuf)`上的A`FileReader`将读取`cbuf`字符的大小，只需一个与`BufferedReader`.

如果在vs`read(char[] cbuf)`上使用方法，那么会有任何性能差异吗？`FileReader``BufferedReader`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T00:00:50.953

> FileReader 上的 read(char[] cbuf) 只需一个与 BufferedReader 类似的本机调用即可读取字符的 cbuf 大小。

这是不正确的。没有读入 Java`char[]`数组的本机调用。FileReader 实际上是一个`InputStreamReader`分层的`FileInputStream.`，`InputStreamReader`运行 8k 内部缓冲区。所以文件一次被读取到 8k。

> `FileReader`那么如果在vs上使用 read(char[] cbuf) 方法会有任何性能差异吗`BufferedReader`？

您会看到`BufferedReader`由于双缓冲而导致读取缓冲区速度较慢的意见，但它们是不正确的。`BufferedReader`检测到这种情况并在可能的情况下直接读取。

简而言之，您不会注意到差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:54:51.823

计划： BufferedReader 消耗一些空间，因此典型用途可以消耗更少的时间。

但是要衡量它，因为性能结果取决于以下事项：

*   读取操作的大小、时间和*位置*（如果每次读取都在缓冲区长度之后进行查找怎么办？）；
*   计算硬件、本机软件和 JVM；
*   您是否可以普遍预测您的应用程序；
*   以及（为了获得 JIT 编译和其他运行时优化的好处）您的读取操作是否可预测、突发或持续。

此外，性能结果的重要性将取决于您的应用程序的功能要求。

您没有提到维护软件的问题，但通常这是值得考虑的软件生命周期成本的主要部分。维护使用标准库的代码比重新发明相同功能的代码更容易。

# scheme - 接受 X 并返回 #t/#f 的所有集合的函数

> ID：15210586
> 
> 赞同：1
> 
> 时间：2013-03-04T20:33:04.177
> 
> 标签：scheme

所以我一直坐在这里思考如何做到这一点，我很困惑，我希望它像

```
(Return_Set 2)  returns=> ((#t, #t) (#t, #f) (#f, #t) (#f, #f))
(Return_Set 1)  returns=> ((#t) (#f))
(define (Return_Set N) 
```

我知道`(/ (expt 2 N) 2)`我需要把所有`#t`然后附加到：

```
(Return_Set N-1) 
```

并为#f 做同样的事情，但从那里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:22:00.430

这是一个想法：编写一个返回任意数量列表之间的[笛卡尔积](https://en.wikipedia.org/wiki/Cartesian_product)的过程（提示：您可以通过谷歌搜索找到该算法！）。然后您将能够轻松解决此问题，如下所示：

```
(return-set 1) ; is equivalent to (cartesian-product '(#t #f))
=> '((#t #f))

(return-set 2) ; is equivalent to (cartesian-product '(#t #f) '(#t #f))
=> '((#t #t) (#t #f) (#f #t) (#f #f))

(return-set 3) ; is equivalent to (cartesian-product '(#t #f) '(#t #f) '(#t #f))
=> '((#t #t #t) (#t #t #f) (#t #f #t) (#t #f #f)
     (#f #t #t) (#f #t #f) (#f #f #t) (#f #f #f)) 
```

为了使事情更容易，还编写一个过程来构建一个重复值`n`次的新列表。现在问题的解决方案可以很容易地表达如下：

```
(define (cartesian-product . lsts)
  <???>) ; ToDo

(define (repeat element n)
  <???>) ; ToDo

(define (return-set n)
  (apply cartesian-product
         (repeat '(#t #f) n))) 
```

我可以帮助您完成上述过程，但首先让我们看看到目前为止您尝试了什么，我的意思是：真正努力工作的代码，在 Stack Overflow 中，不赞成用勺子喂给家庭作业的答案。

**更新：**

那好吧。@GoZoner 直接回答了 OP 的作业，所以现在保留我的回答没有多大意义。这是使用 Racket 的可能解决方案：

```
(define (cartesian-product . lsts)
  (foldr (lambda (lst acc)
           (for*/list ((x (in-list lst))
                       (y (in-list acc)))
             (cons x y)))
         '(())
         lsts))

(define (repeat elt n)
  (build-list n (const elt)))

(define (return-set n)
  (apply cartesian-product
         (repeat '(#t #f) n))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T22:21:44.107

这样就完成了：

```
(define (return-set n)
  (define (cons-of x)
    (lambda (l) (cons x l)))
  (assert (positive? n))
  (if (= n 1)
      '((#t) (#f))
      (let ((n_1 (return-set (- n 1))))
        (append (map (cons-of #f) n_1)
                (map (cons-of #t) n_1))))) 
```

认识到 N 的结果只是建立在 N-1 的结果之上的关键见解。

# javascript - 如果单击链接内部的元素，如何防止默认链接行为

> ID：15210587
> 
> 赞同：3
> 
> 时间：2013-03-04T20:33:04.817
> 
> 标签：javascript, jquery

我有一个看起来像这样的链接：

```
<a href="page.html" class="myLink">
  Link text
  <div class="toggle">x</div>
</a> 
```

当他们单击`x`in 切换时，我想阻止链接导航，但如果他们确实单击了`Link Text`我希望链接导航。

我试过这个：

`$('.toggle').click(function(event) { $(this).parents('a').preventDefault(); });`

但它似乎没有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T20:34:37.110

要停止从单击元素到外部的传播`a`，您必须调用[stopPropagation](http://api.jquery.com/event.stopPropagation/)。但是在这里你可以简单地返回 false （它既停止传播又防止默认行为）：

```
$('.toggle').click(function(event) {
    // do interesting things   
    return false
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:05:02.430

它是事件而不是您需要触发 preventDefault() 方法的元素。

```
$('.toggle').click(function (event) { 
    event.preventDefault(); 
}); 
```

这将阻止事件触发但不传播文档。

```
$('.toggle').click(function (event) { 
    event.stopPropagation(); 
}); 
```

是不是对方。

# java - 确定字段是否使用给定的注释进行注释

> ID：15210588
> 
> 赞同：13
> 
> 时间：2013-03-04T20:33:05.700
> 
> 标签：java, hibernate-validator

我不知道您是否设法仅从标题中弄清楚我要做什么，所以我将尝试用示例进行解释

假设我创建了自己的注释`@VerifySomething`

我已经为该注释创建了测试类以确保它有效。

现在让我们假设我有一个带有注释`SomeClass`的字段的类`something``@VerifySomething`

```
class SomeClass {
    @VerifySomething
    String something;
} 
```

到目前为止一切都很好，但是现在我想`test class`为我创建，`SomeClass`但是我没有看到验证某些东西的所有测试用例的任何意义，因为我已经检查`@VerifySomething`过它应该在测试该注释的类中正常工作，但是我需要确保该字段实际上具有`@VerifySomething`注释，而无需复制粘贴所有这些测试用例。

所以我的问题是，有没有一种方法可以检查某个字段是否有一个或多个必需的注释，而无需编写我已经在注释测试类中编写的测试用例，以确保它可以正常工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T21:16:22.807

可以`getAnnotation`用来判断字段上是否有特定的Annotation，它以注解类为参数：

```
field.getAnnotation( SomeAnnotation.class ); 
```

这是一种可用于验证类是否具有由给定注释注释的字段的方法：

```
import java.lang.reflect.Field;
import javax.validation.constraints.NotNull;
import org.junit.Test;
import org.springframework.util.Assert;

public class TestHasAnnotatedField {
    @Test
    public void testHasFieldsWithAnnotation() throws SecurityException, NoSuchFieldException {
        Class<?>[] classesToVerify = new Class[] {MyClass1.class, MyClass2.class};
        for (Class<?> clazz : classesToVerify) {
            Field field = clazz.getDeclaredField("something");
            Assert.notNull(field.getAnnotation(NotNull.class));
        }
    }
    static class MyClass1 { @NotNull String something; }
    static class MyClass2 { @NotNull String something; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T10:28:54.690

我不确定我是否在关注，但如果您想验证一个类及其属性是否具有给定的 Bean Validation 约束，您可以使用元数据 api。入口点是*Validator#getConstraintsForClass(SomeClass.class)*。你得到一个*BeanDescriptor*。从那里你可以做 _beanDescriptor#getConstraintsForProperty("something") 给你一个*PropertyDescriptor*。通过*propertyDescriptor#getConstraintDescriptors()*，您将获得一组*ConstraintDescriptors*，您可以对其进行迭代以验证是否使用了给定的约束注释。

请注意，与上述答案中的通用反射相比，这是一个特定于 Bean 验证的解决方案，但这取决于您真正追求的是什么。老实说，我还不太了解您的用例。

# vb.net - VB2010 List(Of String) 到多个标签

> ID：15210591
> 
> 赞同：0
> 
> 时间：2013-03-04T20:33:17.760
> 
> 标签：vb.net, string, winforms, list, label

我有 64 个面板，每个面板包含两个数据字符串。出于测试目的，我使用了一个随机数生成器来提供我的数据。

我创建了一个字符串列表（总共 64 个字符串，包含“，”分隔每个面板的两条数据），现在需要将它们写入每个标签。

我需要找到一种方法来拆分字符串数据（我知道如何）并写入每个标签。

例如：第一个字符串将被拆分并添加到名为Label1a和Label1b的第一个面板，第二个字符串拆分为Label2a和Label2b等。

```
Dim LotData As New List(Of String)

Dim randomnumber1 As Integer, randomnumber2 As Integer, randomchance As Integer
Dim slotnumber As String
Dim sbailes As String
Dim stemp As String

Randomize()

Dim n As Integer
For n = 1 To 64

  randomnumber1 = CInt(Rnd() * 1000000000)
  randomnumber2 = CInt(Rnd() * 300)
  randomchance = CInt(Rnd() * 1000)

  slotnumber = Convert.ToString(randomnumber1)

  'approximately 50% of the lots will be empty in this test
  If randomchance >= 500 Then
    sbailes = CStr(randomnumber2)
  Else
    sbailes = "0"
  End If

  LotData.Add(slotnumber & "," & sbailes)
Next 
```

我唯一的解决方案是编写 128 行代码，手动添加每个字符串，但我知道肯定有比这更好的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:06:52.193

您可能希望通过字符串名称获得控件。我有一些方法可以帮助做到这一点（把它们放在一个模块中）

```
<Extension()> _
Public Function ChildControls(ByVal parent As Control) As ArrayList
    Return ChildControls(Of Control)(parent)
End Function

<Extension()> _
Public Function ChildControls(Of T)(ByVal parent As Control) As ArrayList
    Dim result As New ArrayList()
    For Each ctrl As Control In parent.Controls
        If TypeOf ctrl Is T Then result.Add(ctrl)
        result.AddRange(ChildControls(Of T)(ctrl))
    Next
    Return result
End Function

Public Function GetControlByName(ByRef parent As Control, ByVal name As String) As Control
    For Each c As Control In parent.ChildControls
        If c.Name = name Then
            Return c
        End If
    Next
    Return Nothing
End Function 
```

然后在您的方法中，您可以按名称获取控件，具体取决于从 1 到 64 的整数，如下所示：

```
For i As Integer = 1 To 64
    CType(GetControlByName(Me, "Label" & i.ToString() & "A"), Label).Text = _
        LotData(i).Split(",").FirstOrDefault()
    CType(GetControlByName(Me, "Label" & i.ToString() & "B"), Label).Text = _
        LotData(i).Split(",").LastOrDefault()
Next 
```

哦！您还可以通过执行以下操作来省去在设计时将所有控件添加到表单的麻烦：

```
For i As Integer = 1 To 64
    Dim lblA As New Label()
    Dim lblB As New Label()
    lblA.Name = "Label" & i.ToString() & "A"
    lblB.Name = "Label" & i.ToString() & "B"
    ' do something about Locations here
    Me.Controls.Add(lblA)
    Me.Controls.Add(lblB)
    ' you could even add them to your panel.controls
Next 
```

（不要忘记异常处理）

# xml - 使用 XML 为 SSRS 报告从 RSS 提要中提取数据

> ID：15210595
> 
> 赞同：0
> 
> 时间：2013-03-04T20:33:31.757
> 
> 标签：xml, rss, report, reporting, reporting-services

我的报告中有一个数据源，它从包含报告所需数据的共享点页面中提取 RSS 提要。问题是，当我在报告中使用此 RSS 提要和数据集时，我得到一个名为“描述”的字段，其中包含我希望能够在报告中查看的所有数据。描述字段中的数据示例如下所示：

```
`<div><b>Operating Unit:</b> OU1</div> <div><b>Company Name:</b> Company1</div> <div><b>Address Line 1:</b> PO BOX 9940</div> <div><b>State:</b> Texas</div> <div><b>Zip:</b> 77213-0940</div> <div><b>Phone:</b> phonenumber1</div> <div><b>Workflow State:</b> 4</div> <div><b>Hyperlink Path:</b> censor</div> <div><b>File Name Suffix:</b> censor</div> <div><b>Requestor Name:</b> User1 </div> <div><b>Approver Name:</b> Approver1</div> <div><b>Address Book Name:</b> AddressName1</div> <div><b>City:</b> HOUSTON</div> <div><b>Existing Vendor:</b> 0</div> <div><b>ApproverTemp:</b> VendorApprovers_TPR</div> <div><b>Address Book Date Str:</b> 3/4/2013</div> <div><b>Approver Date Str:</b> date</div> <div><b>Requestor Date Str:</b> date</div> <div><b>Oracle Vendor Number:</b> 111111111</div>` 
```

我希望能够获取这些数据并将其实际合并到我的报告中，但我不知道如何从这个表格中提取它。以下是我关于 DataSource 和 DataSet 的报告的代码

```
`<DataSources>
    <DataSource Name="DSSPRSS">
      <ConnectionProperties>
        <DataProvider>XML</DataProvider>
        <ConnectString>Censor1;Source=http%3A%2F%2Fteams%2Edjj%2Ecom%2Fsites%2FCorpFinance%2FProcurement%2FVendorSetup%2FForms%2FCompleted%2520Addressbook%2Easpx%3FView%3D%7B18e894cc%2D6f6f%2D408c%2D9ff9%2D34764395cb82%7D%26SortField%3DDocIcon%26SortDir%3DDesc%26InitialTabId%3DRibbon%252ELibrary%26VisibilityContext%3DWSSTabPersistence</ConnectString>
        <IntegratedSecurity>true</IntegratedSecurity>
      </ConnectionProperties>
      <rd:SecurityType>Integrated</rd:SecurityType>
      <rd:DataSourceID>06a70d58-3ebb-40ba-b132-239ec4d0d79b</rd:DataSourceID>
    </DataSource>
  </DataSources>
  <DataSets>
    <DataSet Name="RSS">
      <Query>
        <DataSourceName>DSSPRSS</DataSourceName>
        <CommandText />
      </Query>
      <Fields>
        <Field Name="Title">
          <DataField>title</DataField>
          <rd:UserDefined>true</rd:UserDefined>
        </Field>
        <Field Name="Link">
          <DataField>link</DataField>
          <rd:UserDefined>true</rd:UserDefined>
        </Field>
        <Field Name="Published_Date">
          <DataField>pubDate</DataField>
          <rd:UserDefined>true</rd:UserDefined>
        </Field>
        <Field Name="Description">
          <DataField>description</DataField>
          <rd:UserDefined>true</rd:UserDefined>
        </Field>
      </Fields>
    </DataSet>
  </DataSets>
  <rd:ReportUnitType>Inch</rd:ReportUnitType>
  <rd:ReportID>ad05aef6-265e-4c8a-a0be-7d5da939fbda</rd:ReportID>
</Report>` 
```

这是专门用于我表中描述字段的代码。

```
 `<CellContents>
                    <Textbox Name="Description">
                      <CanGrow>true</CanGrow>
                      <KeepTogether>true</KeepTogether>
                      <Paragraphs>
                        <Paragraph>
                          <TextRuns>
                            <TextRun>
                              <Value>=Fields!Description.Value</Value>
                              <Style />
                            </TextRun>
                          </TextRuns>
                          <Style />
                        </Paragraph>
                      </Paragraphs>
                      <rd:DefaultName>Description</rd:DefaultName>
                      <Style>
                        <Border>
                          <Color>LightGrey</Color>
                          <Style>Solid</Style>
                        </Border>
                        <PaddingLeft>2pt</PaddingLeft>
                        <PaddingRight>2pt</PaddingRight>
                        <PaddingTop>2pt</PaddingTop>
                        <PaddingBottom>2pt</PaddingBottom>
                      </Style>
                    </Textbox>
                  </CellContents>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:30:30.177

我通过使用数据集中的共享点页面功能解决了这个问题。（Visual Studio 2008 SSRS）这很好地上传了共享点页面并解决了我的问题。

# blackberry - 如何使用 Blackberry sdk 将数据发送到 Windows 应用程序

> ID：15210597
> 
> 赞同：2
> 
> 时间：2013-03-04T20:33:36.607
> 
> 标签：blackberry, blackberry-jde

我试图弄清楚如何以与 BlackBerry Desktop Software 相同的方式以编程方式将数据从 Blackberry 设备来回发送到 Windows 应用程序。我希望能够查询我的 BlackBerry 应用程序的状态并让它向我发送数据缓冲区等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T00:51:28.963

您需要的设备端 API 是[同步包](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/synchronization/package-summary.html)。

我相信[这个文档](http://docs.blackberry.com/en/developers/deliverables/1093/Desktop_API_Reference_Guide_46.pdf)包含了编写 PC 端同步的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:57:27.903

它位于`C:\Program Files\Common Files\Research In Motion\USB Drivers`

# cordova - 如何从 GitHub 上的 PhoneGap 开始？

> ID：15210602
> 
> 赞同：1
> 
> 时间：2013-03-04T20:33:48.447
> 
> 标签：cordova, github, phonegap-build

我想开始使用PhoneGap。我在[github](https://github.com/moshfeu/exampleApp)中创建了项目并使用[PhoneGap Build 构建](https://build.phonegap.com/apps)它。当我将其下载到我的 android 设备时`onDeviceReady()`，它不会被触发。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T23:30:45.227

在您的 index.html 中，将您的 JavaScript 代码从标头移到 HTML 正文中。

```
<html>
  <head>
    <title>Contact Example</title>
    <script type="text/javascript" src="phoneGap.js"></script>

  </head>
  <body>
    <h1>Example</h1>
    <p>Find Contacts</p>

     <script type="text/javascript" >

    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        // find all contacts with 'Bob' in any name field
        var options = new ContactFindOptions();
        options.filter="Bob"; 
        var fields = ["displayName", "name"];
        navigator.contacts.find(fields, onSuccess, onError, options);
    }

    // onSuccess: Get a snapshot of the current contacts
    //
    function onSuccess(contacts) {
        for (var i=0; i<contacts.length; i++) {
            console.log("Display Name = " + contacts[i].displayName);
        }
    }

    // onError: Failed to get the contacts
    //
    function onError(contactError) {
        alert('onError!');
    }

    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:39:21.703

使用 PGB 时，不要在项目中包含 phonegap.js 文件。

我知道这听起来很奇怪，但是您调用获取 JS 和 PGB 将在构建时基于每个平台自动添加它。

因此，基于 index.html 文件中的这个调用，

> < script type="text/javascript" src="phoneGap.js">

PGB 会将 Android 版本或 IOS 版本等添加到每个单独操作系统的最终构建中。

然而它应该是：

> < script type="text/javascript" src="phonegap.js">

见这里：[https ://build.phonegap.com/docs/preparing-your-app](https://build.phonegap.com/docs/preparing-your-app)

因此，从您的 reop 中删除 phonegap.js 文件并将最新的文件拉入 PGB 并重建。

# c# - 使用 SQL 升级

> ID：15210603
> 
> 赞同：1
> 
> 时间：2013-03-04T20:33:50.300
> 
> 标签：c#, asp.net, sql

我正在将网站转换为 ASP.NET 2.0，它支持 .NET Framework 版本 2.0 - 3.5。我在连接到 SQL DB 的特定选项卡上收到以下错误消息。我被困在需要发生这种变化的地方，因为我没有构建网站的这个特定部分。这是错误消息和代码。任何帮助将不胜感激。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
MagicAjax.AjaxCallHelper.GetPageHiddenDictionary(Page page, String fieldName) +37
MagicAjax.AjaxCallHelper.HandleClientScriptBlocks(Page page, Boolean 
reflectToClient)      +17
MagicAjax.AjaxCallHelper.Page_PreRender(Object sender, EventArgs e) +238
System.Web.UI.Control.OnPreRender(EventArgs e) +8996626
System.Web.UI.Control.PreRenderRecursiveInternal() +103
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean 
includeStagesAfterAsyncPoint) +2496 
```

# java - 需要帮助使用 java 创建氨基酸的排列系统

> ID：15210606
> 
> 赞同：2
> 
> 时间：2013-03-04T20:34:02.550
> 
> 标签：java, permutation

我的问题要求我根据用户推算的链长创建所有 20 个氨基酸排列的列表。例如，如果用户想要 3 个链长，我目前有可以工作的代码。这是 20^3 种可能性。所以我有 3 个嵌套的 for 循环来遍历所有可能性，然后是一个计数器，它输出排列的数量以确保答案是正确的。我如何编码这种方法，以便它根据用户输入输出排列？

```
protected void getPermutations(int chainlength) {
    int counter = 0;
    for (int i = 0; i < 20; i++) {
        for (int j = 0; j < 20; j++) {
            for (int k = 0; k < 20; k++) {
                System.out.println(AcidArray[i].getTcode() + "-"
                        + AcidArray[j].getTcode() + "-"
                        + AcidArray[k].getTcode());
                counter++;
            }
        }
    }
    System.out.println("chain length = " + chainlength);
    System.out.println(counter + " permutations");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:48:59.830

[在这种情况下，递归](http://en.wikipedia.org/wiki/Recursion)是你的朋友

```
protected String getPermutations(int chainlength) {
    int counter = 0;
    if(chainlength > 0) { // so that the counter is not 1
        counter = getSubPermutations("", chainlength));
    }
    System.out.println("chain length = " + chainlength);
    System.out.println(counter + " permutations");
}

private int getSubPermutations(String prefix, int chainlength){
   if(chainlength == 0){ //The bottom of the stack, print out the combination
      System.out.println(prefix.substring(0,prefix.length-1)); //remove the final '-'
      return 1;
   } else {
      int counter = 0
      for(int i = 0; i < 20; i++) {
        //Add this level T code to the string and pass it on
        counter += getSubPermutations(prefix + AcidArray[i].getTcode() + "-", chainlength-1);
      }
      return counter;
   }
} 
```

这将做的是制作一个调用树。如果 chainlength 为 1 ，那么它将调用`getSubPermutations`。`1`这将通过 for 循环`getSubPermutations`再次调用第一个值和链长的字符串`0`。在这种情况下，字符串中将只有一个 T 代码。每个内部调用都会命中第一个 if 语句，因此它将**打印出包含一个 T 代码的字符串**并返回`1`。所有这些都将相加，因此返回的计数器`getPermutations`将为 20。到此阶段，所有排列都将被打印出来。

随着链长的增加`getSubPermuations`被称为递归。链长为的`2`它将调用`getSubPermutations`链长为 的 20 次`1`，传入 T 代码的字符串。这些中的每一个都`getSubPermutations`将以 0 的链长调用，**并带有一个包含两个 T 代码的字符串**。这将打印出完整的字符串并返回`1`。这些返回值将与前面的示例一样增加到 20，但是现在当它们返回到下一个级别时，它们相加以返回最终的 400 到`getPermutations`，并且将打印 400 个字符串。

# jquery - 我的脚本中的错误，单击相同的缩略图两次它不起作用

> ID：15210609
> 
> 赞同：0
> 
> 时间：2013-03-04T20:34:09.947
> 
> 标签：jquery

如果我在同一个拇指上单击两次，图像会淡出但不会再淡入。最初我会喜欢它，所以当拇指处于活动状态时，如果可能的话，它是不可选择的。任何帮助都会很棒，谢谢。

这是我在说什么的 jsfiddle。 [http://jsfiddle.net/vAzSn/5/](http://jsfiddle.net/vAzSn/5/)

```
$('.thumbs ul li').css('opacity', '.5');
$('.thumbs ul li:first-child').addClass('current');
$('.projectview').children().hide();
$('.projectview').children("section").first().show();
$('.thumbs ul li').click(function () {
    // Show info
    var thumb = $(this).attr('class');
    var partner = $('.' + thumb + 'info');
    $('.projectview').children().fadeOut();
    partner.fadeIn();
    // Tab opacity
    $(".current").removeClass("current");
    $(this).addClass("current");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:46:49.980

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/vAzSn/8/)**。我刚刚在您的点击事件中添加了一个检查，

```
if (!$(this).hasClass('current')) {... 
```

新的 jQuery：

```
$('.thumbs ul li').css('opacity', '.5');
$('.thumbs ul li:first-child').addClass('current');
$('.projectview').children().hide();
$('.projectview').children(".planinfo").show();
$('.thumbs ul li').click(function () {
    // Show info
    if (!$(this).hasClass('current')) {
        var thumb = $(this).attr('class');
        var partner = $('.' + thumb + 'info');
        $('.projectview').children().fadeOut();
        partner.fadeIn();
        // Tab opacity
        $(".current").removeClass("current");
        $(this).addClass("current");
    }
}); 
```

# perl - Perl 套接字条件不起作用

> ID：15210621
> 
> 赞同：0
> 
> 时间：2013-03-04T20:34:56.190
> 
> 标签：perl, sockets, client-server, conditional

我正在尝试创建一个服务器和客户端，其中服务器根据客户端发送的内容向客户端返回不同的消息。如果客户端建立连接但什么也没发送，服务器将返回消息 1，如果客户端发送了一些数据，服务器将返回消息 2。但这不起作用，客户端一直在等待数据并且没有任何打印。

客户：

```
use IO::Socket;

my $sock = new IO::Socket::INET (
    PeerAddr => '10.1.1.28',
    PeerPort => '7070',
    Proto => 'tcp' ); 

if (@ARGV != "") {
    print $sock "$ARGV[0] $ARGV[1]";

} else {
    $data = <$sock>;
    print $data;
}       

$sock->close; 
```

服务器

```
use IO::Socket;
my $sock = new IO::Socket::INET (
    LocalHost => '10.1.1.28',
    LocalPort => '7070',
    Proto => 'tcp',
    Listen => '1',
    );

while(1) {
    my $new_sock = $sock->accept();

    if (<$new_sock> ne "") {        
        print $new_sock "conection with parameters";
    } else {
        print $new_sock "default message";  
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:20:53.720

需要剁手

```
use IO::Socket; 
use Data::Dumper; 
my $sock = new IO::Socket::INET(
    LocalPort => '7070',
    Proto     => 'tcp',
    Listen    => '1',
);

while (1) { 
    my $new_sock = $sock->accept();
    my $in       = <$new_sock>;
    chomp($in);         
    if ( $in ne "" ) {  

        print Dumper($in);  
        print $new_sock "conection with parameters";
    }                       
    else {
        print $new_sock "default message";
    }
} 
```

# excel - 为什么我无法获取工作簿的目录？

> ID：15210622
> 
> 赞同：1
> 
> 时间：2013-03-04T20:34:58.637
> 
> 标签：excel, vba

我正在尝试查找工作簿的当前目录，因为该位置会定期更改。但是，返回的路径在临时文件夹中，而不是文件所在的位置。这两种方式我都试过了。

```
folderPath = Replace(ThisWorkbook.FullName, templateBook, "") 
```

或者

```
folderPath = ThisWorkbook.path 
```

它们都在我第一次运行宏时工作，但是当我关闭工作簿并移动它时，我遇到了同样的问题。

注意：我使用的是 excel 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:37:36.687

我使用了以下代码：

```
folderPath = CurDir("M") & "\" & Month & " " & Year
MkDir (folderPath) 
```

我认为它不能以其他方式工作，因为共享驱动器（M）上有保护。

# ruby-on-rails - Rails production.log 文件为空

> ID：15210625
> 
> 赞同：11
> 
> 时间：2013-03-04T20:35:12.850
> 
> 标签：ruby-on-rails

我正在使用 Rails 2.3.13，在我的 中`environments/production.rb`，我有：

```
config.log_level = :info
RAILS_DEFAULT_LOGGER = SyslogLogger.new('mysite-platform-production') 
```

然而我`log/production.log`的却是空的。为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T19:22:10.760

您正在实例化 a `SyslogLogger`，因此您的日志记录将进入系统日志（在大多数情况下，在 Unix 系统上作为*/var/log/syslog*中的文件提供）而不是日志文件。您传递给记录器的参数 ( *mysite-platform-production* ) 是 syslog 使用的标识符，而不是文件名。

如果要记录到日志目录中的文件，则必须按如下方式设置记录器：

```
RAILS_DEFAULT_LOGGER = Logger.new('log/production.log') 
```

**但是：**我很确定你实际上不必明确地这样做，但它是由 Rails 默认完成的，所以我建议不要`RAILS_DEFAULT_LOGGER`在你的代码中设置，你应该得到一个登录到*log/production.log*的记录器含蓄...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T14:44:30.707

鉴于您设置记录器的方式，您应该找到一个名为“mysite-platform-production”的文件，**而不是 production.log**，它将**位于项目的根目录**中。如果你想在“log/mysite-platform-production.log”中找到它，你必须这样做：

```
RAILS_DEFAULT_LOGGER = SyslogLogger.new('log/mysite-platform-production.log') 
```

# unix - 如何使用网关 IP 地址配置以太网接口？

> ID：15210629
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:35:24.637
> 
> 标签：unix, networking, ip, ethernet

在示例 Unix 服务器上，我被要求执行以下操作：

将eth1配置为xxx.xx.xx.xxx/24，网关IP地址为：xxx.xx.xx.x

任何帮助都会受到欢迎，因为我是 Unix 网络方面的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:47:47.617

该`route`命令是您想要的，如下所示：

```
route add -net 192.168.3.0 netmask 255.255.255.0 gw 192.168.3.10 
```

这只会在重新启动网络或重新启动机器之前添加它，因此您需要找到添加静态路由的位置，例如`/etc/sysconfig/static-routes`永久添加它。

# android - 为什么将 execSQL() 与 SQLiteCursorLoader 一起使用会产生 AsyncTask 致命异常？

> ID：15210630
> 
> 赞同：0
> 
> 时间：2013-03-04T20:35:30.167
> 
> 标签：android

我正在为 Android 开发一个字典应用程序，并希望使用[CWAC LoaderEx 库](https://github.com/commonsguy/cwac-loaderex)来处理 SQL grunt 工作。我的加载器初始化得很好（它使用我在 onCreateLoader 中指定的 SQL 语句填充 listView），但我不知道如何重置加载器以使用用户的搜索词运行另一个查询。

我尝试在 onQueryTextChange 中运行execSQL **(** **)**以启动对用户输入的每个字符的搜索：

 **```
loader.execSQL(sqlStatement, new String[] { query + "%" }); 
```

但是应用程序崩溃并出现以下错误：

```
03-04 12:10:36.310: E/AndroidRuntime(15293): FATAL EXCEPTION: AsyncTask #4
03-04 12:10:36.310: E/AndroidRuntime(15293): java.lang.RuntimeException: An error occured while executing doInBackground()
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.lang.Thread.run(Thread.java:856)
* 03-04 12:10:36.310: E/AndroidRuntime(15293): Caused by: android.database.sqlite.SQLiteException: unknown error (code 0): Queries can be performed using SQLiteDatabase query or rawQuery methods only.
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteConnection.nativeExecuteForChangedRowCount(Native Method)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteConnection.executeForChangedRowCount(SQLiteConnection.java:727)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteSession.executeForChangedRowCount(SQLiteSession.java:754)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:64)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1665)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1644)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at com.commonsware.cwac.loaderex.SQLiteCursorLoader$ExecSQLTask.doInBackground(SQLiteCursorLoader.java:188)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at com.commonsware.cwac.loaderex.SQLiteCursorLoader$ExecSQLTask.doInBackground(SQLiteCursorLoader.java:1)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-04 12:10:36.310: E/AndroidRuntime(15293):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-04 12:10:36.310: E/AndroidRuntime(15293):    ... 4 more 
```

根据[LoaderEx 文档](https://github.com/commonsguy/cwac-loaderex#database-modifications)，我应该能够以这种方式使用 execSQL 来重用现有的 SQLiteCursorLoader。我是否误解了文档？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:39:21.903

您的 SQL 语句显然返回了一个结果集。这是不允许`execSQL()`的`SQLiteDatabase`。这与`SQLiteCursorLoader`.**

# javascript - 如果通过 mousedown 事件打开弹出窗口将被阻止

> ID：15210634
> 
> 赞同：4
> 
> 时间：2013-03-04T20:35:32.713
> 
> 标签：javascript, jquery, popup, window.open, right-click

当有人用鼠标右键单击一个区域时，我想打开一个弹出窗口。我现在正在使用这个：

```
$("#popup").bind('mousedown', function(e) {
    var w;
    if(e.which==3) {
        w=window.open('link','_blank','options');
    } else {
        return false;
    }
    if(w!=null){
        w.focus();
    }
    event.preventDefault();
}); 
```

将它与 firefox 一起使用时（虽然尚未在其他浏览器上测试过），弹出窗口被阻止。我注意到“点击”事件根本不起作用。

有什么方法可以在右键单击某些内容时打开弹出窗口而不会被浏览器阻止？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-11T13:35:18.620

不，这是不可能的。

您可以[在此处](http://mxr.mozilla.org/mozilla-release/source/dom/events/EventStateManager.cpp#4369)看到，在 Mozilla 中，鼠标中键和右键单击被阻止传播单击事件。你可以[在这里](https://dxr.mozilla.org/mozilla-release/source/dom/events/Event.cpp#827)看到，只有`click`得到“信任”，`mouseup`而`mousedown`没有得到“信任”。

Chrome 的行为方式类似，但确实允许鼠标中键传播`click`事件，并且它们是受信任的（来自事件的弹出窗口不会被阻止）。但是，它们会打开失焦的窗口（您将停留在当前页面上）

我建议在普通的点击处理程序上使用 Shift 键检测。

# coldfusion - 新手，非常基本的 CRUD，通过 Application.cfc

> ID：15210636
> 
> 赞同：1
> 
> 时间：2013-03-04T20:35:39.330
> 
> 标签：coldfusion, coldfusion-8

所以我一直在使用内联（正确的术语？）ColdFusion 代码来运行我的所有页面，并且已经达到了我认为我对基础知识有相当了解的地步，并且想要采取下一步行动。经过大量的交叉引用、研究和反复试验，我想出了以下 4 个页面，其目的是能够在表单页面 (crud.cfm) 中输入用户名和密码，然后，提交后，将用户重定向到一个页面，该页面显示新输入的数据以及任何过去的条目。

我可以使用简单的内联代码和 Application.CFM 来完成所有这些工作，但我希望在未来转向更多的 OOP/模块化方法，因为目前我发现自己在几个不同的页面上重写/复制粘贴大量代码。我从“crud.cfm”提交时得到的错误是：

“cfinvoke 标记中的组件属性值无效。”

我已经尝试过没有哈希并且没有大写“A”无济于事。这是我的非工作代码：

应用程序.cfc

```
<cfcomponent output="false">
<cffunction name="insertrecord" access="public" output="false">
    <cfargument name="data" type="struct" required="true">
    <cfquery name="create" datasource="test">
        INSERT INTO logins(
            username,
            password)
        VALUES(
            'trim(form.username)',
            'trim(form.password)')
    </cfquery>
</cffunction>
</cfcomponent> 
```

crud.cfm

```
<h3> Enter new user/password </h3>

<cfform name="thisform" method="post" action="procpage.cfm">
    Username:<cfinput type="text" name="username" value="">
    Password:<cfinput type="password" name="password" value="">
    <input type="submit" value="submit">
</cfform> 
```

procpage.cfm

```
<cfif !StructIsEmpty(form)>
<cfinvoke component="#Application#" method="insertrecord">
    <cfinvokeargument name="data" value="#form#">
</cfinvoke>
</cfif>

<cflocation url="resultpage.cfm" addtoken="no"> 
```

结果页面.cfm

```
<cfquery name="read" datasource="test">
SELECT * FROM logins
</cfquery>

<table>
<tr>
    <th>LOGIN</th>
    <th>USERNAME</th>
    <th>PASSWORD</th>
</tr>
<cfloop query="read">
<tr>
    <td>#read.login#</td>
    <td>#read.username#</td>
    <td>#read.password#</td>
</tr>
</cfloop>   
</table> 
```

ColdFusion 版本 8，MSSQL 2005 数据库。提前感谢大家的帮助，期待您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:44:23.207

Application.cfc 是 ColdFusion 中的一个特殊文件。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=AppEvents_01.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=AppEvents_01.html)

您需要将组件命名为其他名称。Application.cfc 是您放置应用程序事件、设置代码等的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T03:09:42.860

在回答你对米格尔的问题时，是的。每次调用 cfm 时都会调用 application.cfc。因此，当您点击 crud.cfm 时，application.cfc 会运行。当您点击 procpage.cfm application.cfc 运行等时。

所以你希望你的 procpage.cfm 看起来更像

```
<cfif !StructIsEmpty(form)>
<cfinvoke component="functions" method="insertrecord">
    <cfinvokeargument name="data" value="#form#">
</cfinvoke>
</cfif> 
```

你的functions.cfc看起来更像

```
<cfcomponent output="false">
<cffunction name="insertrecord" access="public" output="false" returntype="void">
    <cfargument name="data" type="struct" required="true">
    <cfquery name="create" datasource="test">
        INSERT INTO logins(
            username,
            password)
        VALUES(
            <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim(form.username)#">,
            <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim(form.password)#">
              )
    </cfquery>
</cffunction>

<cffunction name="readRecord" access="public" returntype="query">
    <cfargument name="loginID" type="numeric" required="false" default="0">
        <cfquery name="read" datasource="test">
            SELECT * FROM logins 
            where loginID = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.loginID#">
        </cfquery>
        <cfreturn read/>
</cffunction>
</cfcomponent> 
```

结果页面.cfm

```
<cfscript>
  f = createObject('component','functions');
  r= f.readRecord(theIdToPass);
</cfscript>
<table>
<tr>
    <th>LOGIN</th>
    <th>USERNAME</th>
    <th>PASSWORD</th>
</tr>
<cfloop query="r">
<tr>
    <td>#r.login#</td>
    <td>#r.username#</td>
    <td>#r.password#</td>
</tr>
</cfloop>   
</table> 
```

您会发现 cfqueryparam 不仅性能提升很小，而且可以保护您免受 sql 攻击等，使用它！总是。

您还可以考虑为每个期望做参数而不是使用结构变量，因为在不知道您期望传递什么的情况下为结构编写错误捕获可能非常令人沮丧。

希望这可以让您对 CF 有一个积极的开始！

# ruby-on-rails - 在 HABTM 连接表上需要两个索引？

> ID：15210639
> 
> 赞同：39
> 
> 时间：2013-03-04T20:35:43.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, indexing

一个简单的`has_and_belongs_to_many`关联：

```
Person has_and_belongs_to_many :products
Product has_and_belongs_to_many :persons 
```

以下两个索引是否**都**有助于优化性能？

```
add_index :person_products, [:person_id, :product_id]
add_index :person_products, [:product_id, :person_id] 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-05T01:26:11.697

关闭 - 您很可能需要以下内容：

```
add_index :person_products, [:person_id, :product_id], :unique => true
add_index :person_products, :product_id 
```

这`:unique => true`不是严格要求的，它取决于让一个人与产品多次关联是否有意义。我会说，如果您不确定，您可能*确实*想要`:unique`旗帜。

索引结构的原因是所有现代数据库都可以使用第一个索引对 person_id 和 product_id 执行查询，*而不管查询中指定的顺序如何*。例如

```
SELECT foo FROM bar WHERE person_id = 1 AND product_id = 2
SELECT foo FROM bar WHERE product_id = 2 AND person_id = 1 
```

被视为相同，并且数据库足够智能以使用第一个索引。

同样，使用 only 的查询`person_id`也可以使用第一个索引运行。多列 b 树索引可以使用比从原始声明左侧指定的列更少的列。

对于仅使用 的查询`product_id`，不能针对第一个索引执行此操作（因为该索引是用 person_id 在最左边的位置定义的）。因此，您需要一个单独的索引来单独启用对该字段的查找。

多列 b 树索引属性还扩展到具有更多列数的索引。如果您在 上有一个索引`(person_id, product_id, favorite_color, shirt_size)`，则可以使用该索引来运行使用`person_id`、`(person_id, product_id)`等的查询，只要顺序与定义匹配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T21:25:55.510

是的，它们很有帮助。但是你真的需要它们吗？这完全取决于你要用它做什么。索引`(person_id,product_id)`可以让您快速找到属于某个人的产品，但不会帮助您找到拥有某个产品的人。它还将强制执行 UNIQUE，因此您可能应该使用它。单独的索引将允许您找到属于个人的产品和拥有特定产品的人`(person_id)`。`(product_id)`指数`(person_id,product_id)`和`(product_id,person_id)`也适用于这两种情况，速度更快，但会占用更多空间，并且在插入/更新行时会花费更多（非常少）。时间和空间开销几乎总是值得的，除非你有一个写作多于阅读的基地。就我个人而言，我已经看到 9.2 中的仅索引扫描极大地受益于两列上的两个索引。所以你真正的选择是：

`unique index on (col 2, col 1), unique index on (col 1, col 2)`

和

`unique Index on (col 1, col 2), index on (col 2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:38:02.830

你只需要一个，除非你正在做`unique`

```
add_index :person_products, :person_id
add_index :person_products, :product_id 
```

或者对于两列的索引

```
add_index :person_products, [:person_id, :product_id] 
```

这将有助于查询数据库上的这些列时的性能。这将取决于您的查询是包含两列还是仅包含一列。

[http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/add_index](http://apidock.com/rails/ActiveRecord/ConnectionAdapters/SchemaStatements/add_index)

# javascript - 针对类名 Javascript 测试输入

> ID：15210643
> 
> 赞同：-3
> 
> 时间：2013-03-04T20:35:57.213
> 
> 标签：javascript, input, textarea

我正在尝试编写一个非常基本的数独游戏，并且在测试每个单元格的输入值时遇到了问题。每个单元格都附有以下代码：

```
<div id="cell1" class="4"><input type="textarea" name="number" onkeypress="sudokuheck()"></div> 
```

然后，我正在尝试编写一个函数来测试 Textarea 中输入的内容与 Div 类的对比。我知道使用整数作为类名不是最好的主意，但我正在使用 HTML5，并且现在只是想让它工作。

到目前为止，我已经尝试过：

```
function sudokuCheck()
{
  var x = document.onkeypress;

  if (x = document.previousSibling.ClassName)
  {
    alert("correct");
  }
  else
  {
    alert("incorrect");
  }
} 
```

但是，这似乎不起作用。你们知道我该如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:40:41.460

`x = document.keypress`你想做什么？如果您试图获取按下的键，那不是您的操作方式。[看看这个问题](https://stackoverflow.com/questions/4054801/how-to-find-the-key-code-for-a-specific-key)。

没有`type=textarea`，它将默认为文本框。

你的 if 语句是错误的

*   `=`意味着商店
*   `==`表示比较

JavaScript 区分大小写`ClassName`!== `className`。

你真的需要部分地编写代码，尝试一次只做一件事。使用浏览器的控制台进行调试。

# c# - 游戏数据存储

> ID：15210644
> 
> 赞同：1
> 
> 时间：2013-03-04T20:36:06.437
> 
> 标签：c#, xna

我大约 20% 进入了我的第一场比赛，并且想知道存储本地数据的最佳方式是什么。我需要以数据库的方式存储项目统计信息，例如等级、每级伤害等。将此类数据存储在“本地”数据库中然后使用 SQL 查询是否被认为是一种好习惯？还是有其他方法？我正在使用 .NET 4 和 XNA 4

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:44:44.147

标准方法实际上是使用内置的 XNA 支持基于 Title 和 User 文件的存储。请查看[此概述](http://msdn.microsoft.com/en-US/library/bb200105%28v=xnagamestudio.30%29.aspx)，了解 MSFT XNA 存储最佳实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:56:53.007

我不认为有一个普遍的规则，这只是取决于你在做什么以及你将如何使用你的数据的许多事情之一。

有很多方法可以存储数据。我通常认为二进制文件格式是游戏中最常见的。但是，如果您想在不使用实际数据库服务器的情况下使用 SQL，我建议您查看*嵌入式*数据库，例如 SQLite、SQL Server Compact Edition 或 Firebird（还有其他）。它们将数据存储在单个文件中，但您可以使用 SQL 查询它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T21:09:51.360

序列化。如果您想要可读文件，请选择 XML/JSON 序列化程序。如果您需要性能：protobuf 或手动二进制序列化。

# python - 我期待“真”但得到“无”

> ID：15210646
> 
> 赞同：8
> 
> 时间：2013-03-04T20:36:08.760
> 
> 标签：python

我有一个简单的 Python 脚本，它递归地检查一系列`n`数字是否是数字的因数`x`。如果任何一个数字不是我返回的因素`False`，否则当`n==1`我想返回`True`。但是，我会继续返回`NoneType`，并希望获得有关如何解决此问题的建议。

```
#Function
def recursive_factor_test(x, n):
    if n==1:
        return True
    else: 
        if  x % n == 0:
            #print "passed {}".format(n)
            recursive_factor_test(x,n-1)
        else:
            return False

#Example Expecting False
print recursive_factor_test(5041,7)
>>False
#Example Expecting True
print recursive_factor_test(5040,7)
>>None
type(recursive_factor_test(5040,7))
>>NoneType 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-04T20:36:46.357

您永远不会返回递归调用的返回值：

```
if  x % n == 0:
    #print "passed {}".format(n)
    return recursive_factor_test(x,n-1) 
```

当您在此处省略该`return`语句时，您的函数将在没有 return 语句的情况下结束，从而回退到默认`None`返回值。

有了`return`那里，它可以工作：

```
>>> print recursive_factor_test(5040,7)
True 
```

# hibernate - 在 HQL 中选择集合

> ID：15210651
> 
> 赞同：3
> 
> 时间：2013-03-04T20:36:30.323
> 
> 标签：hibernate, collections, hql

HQL 菜鸟在这里，真的很挣扎。

可以说我有以下三个类：

```
public class A {
int id;
B b;
}

public class B {
int id;
Set<C> c;
}

public class C {
int id;
String type;
} 
```

表 B 与 C 具有多对多关系，由表 b_c 定义。我需要一个查询，从表 A 中选择，按 C.id 分组，按 C.type = 'desiredType' 过滤，并返回 C 对象和 A.id 的计数。我一直在玩类似的东西：

```
SELECT c, COUNT(a.id) as count from A a JOIN a.b.c as c WHERE c.type = 'desiredType' GROUP BY c.id ORDER BY COUNT(a.id) desc 
```

我已经玩过这个查询的不同迭代，但我不断收到各种异常，否则我的查询将不返回任何内容。我似乎不理解的主要问题是如何返回与正确类型匹配的集合的各个对象。

我希望这个问题听起来不愚蠢。我已经阅读了 HQL 手册和其他一百个 SO 问题，但我一定遗漏了一些东西。提前感谢您的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:04:17.070

你想做的事情不会以这种方式工作。最后，您想从 A 和 B 中进行选择，但只选择适合您条件的 Bc 子集。这是不可能的。Hibernate 只能加载完整的集合 c（不是 100% 正确，您可以限制映射中的选择，但这不是这里的解决方案）。这样就有可能无法满足您的要求。您加载所有受 exists 子句限制的 A 并手动计数：

```
FROM A a where EXISTS (SELECT 1 FROM C, B_C
                          WHERE C.type = 'desiredType'
                             AND B_C.c_id = C.id
                             AND B_C.b_id = a.b.id) 
```

然后，您必须循环遍历列表的所有元素，这些元素是 A 的实例，如果 C 是所需类型，则检查所有 abc 的内部循环（仍然必须完成；上部选择仅限制选择具有至少一个所需类型的 C 的 A，但在您的列表中，您拥有这些 A 的所有 C）并设置正确 c.id 的计数。

该解决方案的缺点是，即使类型错误，也会加载所有 C，并且所有计数都必须在 Java 代码中完成。所以你可能不喜欢那个解决方案。

**更好的解决方案是：**

从表 C 开始思考。在类 C 中添加一个`Set <B> b;`（它是多对多关系；也许将连接表 B_C 定义为 Java 类更方便）。在 B 类中，您添加对表 A 的访问，或者添加`A a`（如果 B:A 是 1:1 关系）或`Set<A> a`（如果 B:A 是 1:n 关系）。然后您只需选择所需的 C：

```
FROM C WHERE C.type = 'desiredType' 
```

A group by C.id 您刚刚在 Java 中通过`countA = c.b.size()`（A 和 B 之间的 1：1 关系）或`countA = 0; for (B b : c.b) {countA += b.a.size()}`（A 和 B 之间的 n：1 关系）获得的每个选定 c 的计数。

# php - 检查数组是否不是索引数组

> ID：15210652
> 
> 赞同：0
> 
> 时间：2013-03-04T20:36:35.797
> 
> 标签：php, arrays

我需要检查一个特定的数组是否被*键控*或索引。例如：

```
// Key defined array
array('data-test' => true, 'data-object' => false);

// Indexed array
array('hello', 'world'); 
```

我可以轻松地`foreach`使用数组键来检查是否全部为整数。但是存在正确的检查方法吗？一个内置的PHP函数？

**可能的解决方案**

```
// function is_array_index($array_test);
//    $array_test = array('data-test' => true, 'data-object' => false);

foreach(array_keys($array_test) as $array_key) {
    if(!is_numeric($array_key)) {
        return false;
    }
}

return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:39:24.957

```
function is_indexed($arr) {
  return (bool) count( array_filter( array_keys($arr), 'is_string') );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:39:43.987

这是来自[php.net function.is-array](http://php.net/manual/de/function.is-array.php)：

```
function is_assoc($array) {
    return (is_array($array) && 0 !== count(array_diff_key($array, array_keys(array_keys($array)))));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:41:30.533

功能

```
function isAssoc($arr)
{
    return array_keys($arr) !== range(0, count($arr) - 1);
} 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T20:41:15.600

您可以检查密钥`[0]`：

```
$arr_str = array('data-test' => true, 'data-object' => false);

$arr_idx = array('hello', 'world');

if(isset($arr_str[0])){ echo 'index'; } else { echo 'string'; }

echo "\n";

if(isset($arr_idx[0])){ echo 'index'; } else { echo 'string'; } 
```

示例：[http ://codepad.org/bxCum7fU](http://codepad.org/bxCum7fU)

# algorithm - Ford-Fulkerson 似乎不适用于此图

> ID：15210656
> 
> 赞同：0
> 
> 时间：2013-03-04T20:36:49.617
> 
> 标签：algorithm, max-flow

我对 Ford-Fulkerson 算法的分析不正确。例如，请看下图：

```
 _____>4___>_
     |            |
0--->1---->3------6
|    |            | 
2--->5--------->--- 
```

节点 0 是源节点，节点 6 是终端节点，每条边的限制都是 1，除了节点 0 到 1 的边的限制是 2。如果流从 0->1->3->6 和 0- >1->4->6 和 0->2->5->6，图形的流向是 3。但是，如果流从 0->1 开始，则选择从 0->1->3 开始->6 和 0->1->5->6，我们不能再从 0->2->5->6 走，因为 5->6 已经被占用了。由于 0->1 的限制是 2，所以我们只能从 0->1 开始两次，因此，图的流量是 2。显然，图的最大可能流量应该是 3 而不是 2。请问 Ford-Fulkerson算法处理这个问题并总是返回 3 作为答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:46:52.183

是的，福特-富尔克森可以。始终解决此类问题实际上是它的设计目的。

我想您缺少的事实是，在确定残差图时，您还必须添加后边缘。因此，经过 0->1->3->6 和 0->1->5->6 之后，残差图实际上如下所示：

```
 1          1
            +-------> 4 ------+
            |                 |
        2   |     1        1  v
  0 <------ 1 <----- 3 <----- 6
  |         ^                 |
  |   1     | 1               | 1
  +-------> 5 <---------------+ 
```

Ford-Fulkerson 将采取的下一步是添加路线 0->5->1->4->6，从而产生 3 的流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T21:54:35.057

当 maxFlow 太高时它会超时。（在最坏的情况下，福特 fulkerson 在每一步仅添加 1 个流）

只需在 Ford fulkerson 中使用 BFS 而不是 DFS，它就会变成[Edmonds 鲤鱼](http://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm)！与福特-富尔克森相比，它的速度太快且使用广泛。

[您还可以查看此处](http://help.topcoder.com/data-science/competing-in-algorithm-challenges/algorithm-tutorials/maximum-flow-section-1/)解释的 PFS（优先搜索）。

# arrays - lua中的计算机程序

> ID：15210660
> 
> 赞同：0
> 
> 时间：2013-03-04T20:37:06.237
> 
> 标签：arrays, lua, lua-table, computercraft

所以事情就是这样，我正在尝试使用 lua 数组在计算机技术中制作一个完全可定制的 UI，当我使用它时，ui 似乎总是为空

```
function dupChar(char, num)
  ret = ''
  for ii=1,num do
    ret = ret..char
  end
  return ret
end

function drawLoad()
    --Pattern:
    -- X, Y, Text, FG, BG, Disabled for op, button action
    ui = {}
        ui.hungerStart = {3,4,'[',nil,nil,false,'none'}
        ui.hungerMid1 = {ui.hungerStart[1] + 1,ui.hungerStart[2],dupChar('-',20),nil,nil,false,'none'}
        ui.hungerMid2 = {ui.hungerStart[1] + 1,ui.hungerStart[2],hunger,nil,nil,false,'none'}
        ui.hungerStop = {ui.hungerStart[1] + 21,ui.hungerStart[2],']',nil,nil,false,'none'}

        ui.healthStart = {3,6,'[',nil,nil,false,'kill'}
        ui.healthMid1 = {ui.healthStart[1] + 1,ui.healthStart[2],dupChar('-',20),nil,nil,false,'health'}
        ui.healthMid2 = {ui.healthStart[1] + 1,ui.healthStart[2],health,nil,nil,false,'health'}
        ui.healthStop = {ui.healthStart[1] + 21, ui.healthStart[2],']',nil,nil,false,'heal'}
end

function drawAdv(pName, page)
    isOp = false
    pHealth = 10
    pHunger = 10
    health = dupChar('$',pHealth)
    hunger = dupChar('@',pHunger)
    drawLoad()
    color(custCol.default[1], custCol.default[2])
    stat.clear()
    term.clear()
    for index, value in ipairs(ui) do
        x, y, text, fg, bg, disOp, action = value[1],value[2],value[3],value[3],value[4],value[5],value[6]
        color(custCol.default[1], custCol.default[2])
        cur(x,y)
        if disOp then
            color(custCol.disOp[1], custCol.disOp[2])
        else
            color(fg,bg)
        end
        awrite(text)
    end
end 
```

另一件事是知道是否

```
for index, x, y, text, fg, bg, disOp, action in ipairs(ui) do 
```

或者

```
for index, value in ipairs(ui) do
        x, y, text, fg, bg, disOp, action = value[1],value[2],value[3],value[3],value[4],value[5],value[6] 
```

是获取列表条目的方法

注意：代码有点乱，但这是因为我试图尽可能在不使用 ComputerCraft 的情况下使用它（一些功能仍然存在，但不适用于 lua）

感谢您阅读并可能帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:17:47.593

```
for index, value in ipairs(ui) do
   local x, y, text, fg, bg, disOp, action = unpack(value)
   -- do something
end

function dupChar(char, num)
   return char:rep(num)
end 
```

# applescript - 如何将此 Applescript 翻译成 rb-appscript？

> ID：15210666
> 
> 赞同：0
> 
> 时间：2013-03-04T20:37:36.120
> 
> 标签：applescript, rb-appscript

我有以下使用 PDFpen 对文档进行 OCR 的 Applescript。

```
tell application "PDFpenPro"
    open theFile as alias
    tell document 1
        ocr

        repeat while performing ocr
            delay 1
        end repeat
        delay 1
        close with saving
    end tell
end tell 
```

最后的重复块等待文档完成，然后脚本的其余部分继续。我似乎无法在 rb-appscript 中复制这部分逻辑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:47:28.737

我想通了。这是生成的 rb-appscript 代码。

```
 doc = @app.open MacTypes::Alias.path(file)
    doc.ocr

    while doc.performing_ocr.get
      sleep 1
    end
    doc.close(:saving => :yes) 
```

# java - 密码检查成功后加载新网页

> ID：15210667
> 
> 赞同：0
> 
> 时间：2013-03-04T20:37:38.783
> 
> 标签：java, jsf, jakarta-ee, jboss7.x, el

我正在尝试编写一些“表达语言”代码。目前，在 (1) 下面调用 greetController.greet 方法，如果用户名和密码匹配，则返回一个字符串。如果返回的字符串是某个值，我想要做的是加载另一个网页。请有人建议如何做到这一点

提前致谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="template.xhtml">
    <ui:define name="content">
        <h:messages />
        <h:form id="greetForm">
            <h:panelGrid columns="3">
                <h:outputLabel for="username">Enter username:</h:outputLabel>
                <h:inputText id="username"
                    value="#{greetController.username}" />
                <br />
                <h:outputLabel for="password">Enter password:</h:outputLabel>
                <h:inputText id="password"
                    value="#{greetController.password}" />
                <h:message for="username" />
            </h:panelGrid>
            <h:commandButton id="greet" value="Login"
                **action="#{greetController.greet}" />** //(1)
        </h:form>
        **<h:outputText value="#{greetController.greeting}"** //(2)
            rendered="#{not empty greetController.greeting}" />
        <br />
        <h:link outcome="/create.xhtml" value="Add a new user" />
    </ui:define>
</ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:18:30.937

我的回答假设这个登录表单在**/app/login.xhtml**中，如果返回的字符串是一个值（比如**success** ） ，你想加载另一个网页（比如**/app/home.xhtml**）：

 ****对于 JSF2**

如果你使用 JSF2，你可以简单地从你的 bean 返回下一页的 URL

```
public String login()
{
   // check user password...
   return "/app/home.xhtml"
   // this will work without faces-config.xml entry using JSF2
} 
```

**对于 JSF1 或 JSF2**

只需将此条目添加到您的 faces-config.xml 文件中即可。

```
 <navigation-rule>
        <from-view-id>/app/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/app/home.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule> 
```

**更多信息** 您的问题非常基本。我建议遵循 JSF 的初级教程。例如：[http ://www.mkyong.com/tutorials/jsf-2-0-tutorials/](http://www.mkyong.com/tutorials/jsf-2-0-tutorials/)**

# sql - 如何使用计数和自我加入

> ID：15210668
> 
> 赞同：0
> 
> 时间：2013-03-04T20:37:43.790
> 
> 标签：sql, oracle

我正在为即将到来的工作面试练习 SQL，需要一些帮助。一位朋友建议我创建一个表并尽可能学习联接。我一直在使用 SQL fiddle，oracle 11g R2。

我的表如下

```
--------------------------
| ID | Name | Manager_ID | 
-------------------------- 
```

不为 0 的 Manager_ID（这些是经理）是具有与某些经理的主键相关的外键的员工。

我试图找出有多少员工向经理报告并显示如下：

```
--------------------
| Name | Employees | 
-------------------- 
```

这是我到目前为止所拥有的，我只是不确定如何在左侧字段中列出他们的名字。

```
SELECT COUNT(b.manager_id) as "Manages"
FROM employees a, employees b
WHERE b.manager_id > 0 
AND a.id = b.manager_id
GROUP BY a.id  
/ 
```

谢谢你的帮助。请保持基本，我仍然是菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:46:33.940

有一个心理技巧：想象你的 3 列表（id、employee、manager_id）是一个 6 列表（employee.id、employee.name、employee.manager_id、manager.id、manager.name、manager.manager_id），其中最后三列已压缩在一个 id 列中。

在您的情况下，它是同一张表，但大多数情况下并非如此，因此很容易在心理上用引用表的列集（id=主键）替换列 ID（外键）。

通常，外部表也是在主表的几行上重复出现的国家或产品线列表。就像在多行上出现相同的 manager_id 一样。

如果外部表的某些行没有被使用（不是所有员工都是经理）没有问题，但是如果主表 id 试图引用外部表中不存在的 id（经理必须管理至少一名员工）。为了表示一个员工没有经理，你输入一个不存在的employee.manager_id，你选择0，通常你使用NULL。

*   要列出所有拥有经理的员工（除了 CEO 之外的所有人）的完整表格，您可以查询：

    ```
    SELECT * FROM employee empl JOIN employee mngr ON empl.manager_id = mngr.id 
    ```

    或（相同）

    ```
    SELECT * FROM employee empl, employee mngr WHERE empl.manager_id = mngr.id 
    ```

*   列出所有员工的完整表格，包括没有经理的员工（每个人）

    ```
    SELECT * FROM employee empl LEFT JOIN employee mngr ON empl.manager_id = mngr.id 
    ```

您的问题是获取具有管理员工数量的管理人员列表。因此，假设您没有 id=0 的员工：

```
 SELECT manager.name, COUNT(*)
    FROM   employee empl, employee mngr
    WHERE  empl.manager_id = mngr.id
    GROUP BY mngr.id 
```

要包括所有员工，即使是管理 0 名员工的员工，也可以作为练习留下（左加入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:42:51.833

您在这里非常接近，您已经按经理分组，您只需要在您的选择中包含该经理的姓名

```
SELECT  a.name, COUNT(b.manager_id) as "Employees"
FROM employees a, employees b
WHERE b.manager_id > 0 
AND a.id = b.manager_id
GROUP BY a.name, a.id 
```

# winforms - VS2010 中的 WinForms 对 TFS 服务的身份验证失败

> ID：15210672
> 
> 赞同：0
> 
> 时间：2013-03-04T20:38:01.373
> 
> 标签：winforms, visual-studio-2010, authentication, tfs

在我的 .Net windows 应用程序（代码生成器）中，我想以编程方式从 TFS 服务中检出文件。虽然我可以毫无问题地从 TFS 服务访问和签出 VS2010 中的文件，但我的程序总是返回

> “TF30064：您无权访问服务器”

我尝试了很多东西，比如：

```
var account = new NetworkCredential(Username, Password);
tfs.TfsTeamProjectCollection teamProjectCollection = 
    new tfs.TfsTeamProjectCollection(new Uri(anUrl), account);
teamProjectCollection.Authenticate(); 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:43:05.467

看看：[Connect to Team Foundation Server from a Console Application](http://msdn.microsoft.com/en-us/library/bb286958.aspx)。

它说的是控制台应用程序，但您也可以在 WinForm 应用程序中使用所有提示。

特别是（代表其他用户（冒充）中的这一部分）：

> 使用经过身份验证的凭据
> 
> 您可以在连接到 Team Foundation Server 时使用 ICredentials 对象来指定要模拟的身份。此策略不需要特殊权限，但您必须能够获取身份的密码才能创建 ICredentials 对象。当您连接到 Team Foundation Server 以处理对新凭据的请求时，您还可以指定 ICredentialsProvider 的实现。当 ICredentials 对象指定的凭据未成功验证或授权执行操作时，系统调用您指定的 ICredentialsProvider 的实现来请求新凭据。要提示用户输入凭据，您可以使用 UICredentialsProvider 类，该类通过显示登录对话框来提示用户输入新凭据来实现 ICredentialsProvider。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:42:31.680

如果您以自己的身份运行应用程序，并且可以访问 TFS，那么您可以这样做：

```
var uri = new Uri("http://tfsserver:8080/tfs/MyCollection");
using (var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(uri))     
{         
    tfs.EnsureAuthenticated(); 
    //Your code goes here...
} 
```

# python - 在 urllib python 中使用 tor

> ID：15210674
> 
> 赞同：1
> 
> 时间：2013-03-04T20:38:03.947
> 
> 标签：python, ip, tor

我正在尝试将 TOR 与 Urllib 一起使用，如[如何在 Python 中更改 Tor 身份？](https://stackoverflow.com/questions/9887505/changing-tor-identity-inside-python-script). 但是我无法理解在哪里可以找到配置文件。

谁能提供一个更简单的解决方案，以便我可以使用 Python 的 TOR 生成新的 ip？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T14:38:03.773

这对我有用

import socks import socket def create_connection(address, timeout=None, source_address=None): sock = socks.socksocket() sock.connect(address) return sock

```
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)

# patch the socket module
socket.socket = socks.socksocket
socket.create_connection = create_connection

import urllib2

print urllib2.urlopen('http://icanhazip.com').read()

import mechanize
from mechanize import Browser

br = Browser()
print br.open('http://icanhazip.com').read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T03:17:10.300

有关在 tor 上创建 python 套接字的示例，请参见 stem 的[客户端使用教程](https://stem.torproject.org/tutorials/to_russia_with_love.html)。也就是说，请小心创建新身份。这样做会给 Tor 网络带来高负载（有关此内容的更多信息，请参见[此处](https://stem.torproject.org/faq.html#how-do-i-request-a-new-identity-from-tor)）。

# html - Xpath 根据先前的同级文本选择 br 之前的 text()

> ID：15210676
> 
> 赞同：2
> 
> 时间：2013-03-04T20:38:08.130
> 
> 标签：html, xpath, siblings

我有这个 HTML 代码：

```
<td width="220" align="left">
    <b>Valor da Venda:</b> 
    R$ 650.000,00<br>
    <b>Valor do IPTU:</b> 
    R$ 0,00<br>
    <b>Valor do Condomínio:</b> 
    R$ 0,00
</td> 
```

我试图从前面的“br”标签中选择 text()，其中前面的“b”标签中的 text() 等于“Valor da Venda:”。

我试过：

```
/td//text()[preceding::br and contains(../b/text(),'Valor da Venda:')] 
```

但这又回来了

```
[' R$ 650.000,00', ' R$ 0,00', ' R$ 0,00 '] 
```

而我只想退回第一个 R$ 650.000,00

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:59:37.600

虽然不完全按照要求，这可能是您的解决方案吗？

```
/td/b[.="Valor da Venda:"]/following-sibling::text()[1] 
```

或者，如果`br`需要检查：

```
/td/b[.="Valor da Venda:"]/following-sibling::text()[1][following-sibling::br]' 
```

# ios - FQL 多查询并不总是有效

> ID：15210677
> 
> 赞同：0
> 
> 时间：2013-03-04T20:38:08.547
> 
> 标签：ios, facebook, facebook-graph-api, facebook-fql, fql.multiquery

我对 FQL 多查询有一个奇怪的问题

这是我的查询：

```
NSString *query =
        @"{"
        @"\"events_info\":\"SELECT name, description, pic_small, pic_big, eid, venue, location, start_time, end_time, timezone, update_time, not_replied_count, privacy, has_profile_pic, version, can_invite_friends, is_date_only, hide_guest_list, host, creator, all_members_count, attending_count, not_replied_count , declined_count, pic_cover FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND start_time > '2013-03-03T00:23:00' OR uid = me())\","
        @"\"event_venue\":\"SELECT name, type,page_id, location FROM page WHERE page_id IN (SELECT venue.id FROM #events_info)\","
        @"\"event_creator\":\"SELECT name, page_id, type FROM page WHERE page_id IN (SELECT creator.id FROM #events_info)\""
        @"}"; 
```

此查询有时不起作用...我不明白出了什么问题。不工作时，如果我删除第三个查询 ( `event_creator`) 一切正常。

**错误：**

```
Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0xaab6c50 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        "error_code" = 1;
        "error_msg" = "An unknown error occurred";
    };
    code = 500;
}, com.facebook.sdk:HTTPStatusCode=500} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:33:38.633

在第**一个**查询中，您要检索：

*   事件创建者的页面，
*   本次活动的会场页面。

你得到的看起来像：

```
{
    "venue": {
        "id": 421431217881031
    }, 
    "creator": 844413621
}, 
```

在**第二个**查询中，您将获得场地页面的信息，如下所示：`WHERE page_id IN (SELECT venue.id FROM #events_info)`。这做得很好，因为您确实需要照顾`ID`场地*的*`venue`阵列。

在**第三个**查询中，`creator`不再是数组！它代表一个页面`ID`（或用户的，但这不是问题，因为它们将被过滤）。在这种情况下，您可以`ID`直接获取：

`WHERE page_id IN (SELECT creator FROM #events_info)`

代替

`WHERE page_id IN (SELECT creator.id FROM #events_info)`.

# ios - 来自 AppDelegate 的 ViewController 中的 Preform 函数

> ID：15210678
> 
> 赞同：0
> 
> 时间：2013-03-04T20:38:09.507
> 
> 标签：ios, objective-c, ios6, push-notification, apple-push-notifications

AppDelegate 可以在收到推送通知后在视图控制器中运行“功能”吗？

该应用程序包含三个选项卡，第三个选项卡需要在应用程序收到推送通知时重新加载其 webview。

```
- (void)application:(UIApplication *)application
didReceiveRemoteNotification:(NSDictionary *)userInfo {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:41:19.097

是的，您需要`viewController`为特定通知注册您的通知，例如，当您收到远程通知时，只需发布​​自定义通知并在您的视图控制器中，注册此通知/收听此通知并执行您想要执行的方法。

当你收到`remoteNotification`

```
- (void)application:(UIApplication *)application
didReceiveRemoteNotification:(NSDictionary *)userInfo {

[[NSNotificationCenter defaultCenter] postNotificationName:@"pushNotification" object:nil userInfo:userInfo];
} 
```

在您`viewController.m`注册此通知的视图控制器

```
- (void)viewDidLoad {

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pushNotificationReceived) name:@"pushNotification" object:nil];

    [super viewDidLoad];

} 
```

然后实现选择器

```
-(void)pushNotificationReceived{

// do your stuff

} 
```

最后不要忘记在您的`dealloc`方法中取消注册通知

```
-(void)dealloc {
[[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

# android - android没有找到处理意图的活动-printershare

> ID：15210684
> 
> 赞同：1
> 
> 时间：2013-03-04T20:38:32.357
> 
> 标签：android

我的应用程序中有以下按钮，但是当我现在按下它时应用程序崩溃：

```
 Button newButton = (Button)findViewById(R.id.afronden);
        newButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

        final Uri printFileUri = Uri.parse("http://ipadress/tablet1.txt");
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setPackage("com.dynamixsoftware.printershare");
        i.setDataAndType(printFileUri,"text/plain");
        i.putExtra( "scaleFitToPage", true );
        startActivity(i); 
```

安装了打印机共享程序，并且它的名称是正确的（用控制台上的 pm 检查）。我读了一些其他的帖子，我需要在清单中添加一些代码，但我不知道是什么。谁能帮助我并向我展示我需要添加到清单中的代码？

# bash - bash for 带有 awk 的循环变量

> ID：15210691
> 
> 赞同：1
> 
> 时间：2013-03-04T20:38:58.780
> 
> 标签：bash, shell, for-loop, awk

这是我第一次在堆栈溢出上发帖，主要是在寻找解决方案和阅读帖子之后。我正在尝试使用 bash 运行一个循环，因此我可以使用 ext .u.clean 对一堆不同的文件进行字符串搜索我想在这些文件中查找字符串“H#”或“h#” # 为 1-28，并以字符串中搜索到的数字输出到文件。我在两个字段（$5 和 $0）中进行了两次单独的搜索，我想将唯一匹配的总数输出到文件“temp”#.txt。在此之后，我想对文件中输入的两个数字进行一些数学运算。到目前为止，我已经做到了这一点：

```
for i in {1..28}; do
    awk -v var="$i" -F"\t"  ' $19 ~ "_[hH]"var {print $0}' */*.u.clean | \
        sort | uniq | wc -l > 'temp'$i'.txt' | \
        awk -v var="$i" -F"\t"  ' $19 ~ "_[hH]"var {print $5}' */*.u.clean | \
        sort | uniq | wc -l >> 'chris'$i'.txt'
done 
```

问题是这些数字是错误的。我总共得到 28 个“temp”#“.txt”文件，但输入的字数不是正确的。我也不知道如何进行数学运算，我有文件，里面有数字。有人可以帮助我或指出正确的方向吗？谢谢你的帮助。

编辑：

以下是一些输入可能的样子：

> 112 E 03 294168 FBLN7_rs335586251.5 GG 01/23/2013
> 2 3 VSD 控制 130123_CR_CH5_H26 1 A.保守
> 
> 17 D 11 294319 FBLN7_rs335586251.5 GG 06/26/2012
> 2 3 VSD 控制
> 120626_CR_CH5_H3 1 A.保守
> 
> 22 B 01 294703 FBLN7_rs335586251.5 GG 06/26/2012
> 2 2 VSD 控制
> 120626_CR_CH5_H4 1 A.保守
> 
> 103 A 07 295033 FBLN7_rs335586251.5 GG 01/23/2013
> 2 1 VSD 控制
> 130123_CR_CH5_H23 1 A.保守
> 
> 44 G 07 295119 Tbx5_rs61931008.5 GG
> 07/11/2012 2 5 ASD 控制
> 120711_CR_CH5_H12 1 A.保守
> 
> 42 H 12 295201 JAG1_rs1232607.5 GG
> 07/11/2012 1 2 ASD 控制
> 120711_CR_CH5_H12 1 A.保守

我正在尝试计算字段 19（带有文本 Tbx5_rs61931008.5.5 的字段）中出现的次数，每次出现 H'#' 时 # 为 1-28，将该数字输出到单独的文件中每个 H#。然后我想知道这些匹配的 H#，字段 5 有多少个独特的场合，并将该数字输出到每个 H# 的同一文件中。我希望这很清楚，并让我知道它不是。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:59:52.173

对于您要实现的目标，这似乎有点复杂。我建议使用`find`和`grep`

```
find . -name "*.u.clean" -exec egrep -c '([Hh][1-9])|([Hh][1-2][0-9])' 
```

您必须获取输出并进行数学运算

这假设文件中每行只有一个`h#`，如果这不正确，那么您将需要做更多的工作。我会找到所有出现过的文件，然后使用它`egrep -o '([Hh][1-9])|([Hh][1-2][0-9])' | wc -l`来获取每个文件的总数。

# ios - RestKit 0.20——同名的多个查询参数？

> ID：15210694
> 
> 赞同：0
> 
> 时间：2013-03-04T20:39:11.153
> 
> 标签：ios, rest, restkit

我有一个 iOS 应用程序将 RestKit 0.20-rc1 用于 RESTful 服务。我正在尝试执行一个 GET ，借此我提供多个具有相同名称的查询参数来检索一组相同类型的对象。例如，我的 URL 如下所示：

```
http://mysite.com/rest/myobjects?objID=123&objID=234&objID=345 
```

我的网络服务能够接受这样的查询并返回适当的对象。我在客户端上的 RestKit 代码如下所示：

```
NSDictionary *params = ...
RKObjectManager *objMgr = [RKObjectManager sharedManager];
[objMgr getObjectsAtPath:@"/rest/myobjects" parameters:params success:nil failure:nil]; 
```

我的问题是参数必须指定为一个`NSDictionary`，并且我有多个同名的参数。我尝试将 中的值设置为`NSDictionary`包含`NSArray`所有参数值的值，但这不起作用。

如何使用此方法在 RestKit 中指定多个具有相同名称的查询参数？这只是在 RestKit 中不支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:03:17.520

听起来你拥有的 RestKit 代码是不可能的。您可以：

1.  更改代码以允许 NSArrays。[RestKit 在https://github.com/RestKit](https://github.com/RestKit)是开源的
2.  在 RestKit google group 上询问，看看其他人是如何解决这个问题的。[https://groups.google.com/forum/?fromgroups#!forum/restkit](https://groups.google.com/forum/?fromgroups#!forum/restkit)
3.  向 RestKit 提交补丁并等待支持您要求的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T09:23:01.287

您可以将带有参数的查询放在 getObjectAtPath 中。意思是使用如下参数创建一个字符串：

`NSString *queryPath = @"getNames?names=bob&names=joe&names=joey";`

然后执行此操作（注意`parameters`这里的对象是`nil`）：

```
[[RKObjectManager sharedManager] getObjectsAtPath:queryPath
                                           parameters:nil
                                              success:nil failure:nil]; 
```

如果您对编码有疑问，请执行以下操作： `queryPath = [queryPath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];`

# android - 在 BitmapFactory 中不会生成 OutOfMemoryError 的背景图像大小

> ID：15210695
> 
> 赞同：0
> 
> 时间：2013-03-04T20:39:15.173
> 
> 标签：android, out-of-memory, bitmapfactory

我有不同的横向和纵向背景图像，我遵循了文档的 ldpi:mdpi:hdpi:xhdpi 比例为 3:4:6:8 的建议，但是我的 mdpi 背景图像为 320x480，尤其是在 xhdpi 的旋转时设备，我进入了`java.lang.OutOfMemoryError`...`android.graphics.BitmapFactory.nativeDecodeAsset`我猜这是由于我的背景图像的分辨率太高（我不这么认为，因为它只是屏幕的大小），或者我的图像是png 文件比我使用高质量 jpg 文件大 3-4 倍，我想知道是否有人确定或有处理我描述的大小的背景图像没有问题的经验，因为我宁愿切换到jpg 而不必降低图像分辨率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:53:22.987

尽管切换到 JPEG 可能已经为您解决了这个问题，但这并不意味着它会一直有效，尤其是当您在不同的可绘制端口和可绘制区域文件夹中有同名的大型背景图像时。

查看此链接以了解 Google 希望您如何执行此操作：[显示位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#read-bitmap)

# java - 从数据库表中选择列并在java中重命名它们

> ID：15210700
> 
> 赞同：0
> 
> 时间：2013-03-04T20:39:26.420
> 
> 标签：java, mysql, swing, jtable, tablecolumn

我正在尝试使用 eclipse 在 java 前端显示我的数据库的某些字段。

我已经设法显示整个表，但**我想做的是选择我的数据库表的一些字段以及重命名我前端的字段。**

*例如，如果有一个名为 user 的表，其中包含字段（属性）名称、年龄、身高、体重、角色。我希望我的前端显示一个包含两列 Name 和 Role 的表格*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:53:46.033

删除您不想看到的列。就像是：

```
table.removeColumn( table.getColumn( "Weight" ) ); 
```

或者

```
TableColumnModel tcm = table.getColumnModel();
TableColumn tc = table.getColumn(3); // for the weight column
tcm.removeColumn( tc ); 
```

# python - 忽略 sympy 中的假想根

> ID：15210704
> 
> 赞同：11
> 
> 时间：2013-03-04T20:39:52.520
> 
> 标签：python, math, sympy

我正在使用 sympy 来解决多项式：

```
x = Symbol('x')
y = solve(int(row["scaleA"])*x**3 + int(row["scaleB"])*x**2 + int(row["scaleC"])*x + int(row["scaleD"]), x) 
```

y 是可能解决方案的列表。但是，我需要忽略想象中的，只使用真正的解决方案。另外，我希望将解决方案作为值而不是表达式。现在它看起来像：

```
[-2/3 - 55**(1/3)*(-1/2 - sqrt(3)*I/2)/3, -2/3 - 55**(1/3)*(-1/2 + sqrt(3)*I/2)/3, -55**(1/3)/3 - 2/3] 
```

我需要最后一个表达式的值（-2.22756）。sympy 中是否有功能可以简化这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-26T00:52:15.810

如果您设置`x`为真实，SymPy 只会为您提供真实的解决方案

```
x = Symbol('x', real=True)
solve(..., x) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-10T10:56:11.000

`solve()` 对于各种类型的解决方案没有一致的输出，请使用 `solveset(Eq,x,domain=S.Reals)`：

```
 from sympy import ImageSet, S 
 x = Symbol('x')
 y = solveset(int(row["scaleA"])*x**3 + int(row["scaleB"])*x**2+int(row["scaleC"])*x + int(row["scaleD"]), x, domain=S.Reals) 
```

[http://docs.sympy.org/latest/modules/solvers/solveset.html](http://docs.sympy.org/latest/modules/solvers/solveset.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-10T20:05:05.190

这正是为之设计的东西，`real_roots`尤其适用于系数为整数的情况：

```
x = Symbol('x')
eq = int(row["scaleA"])*x**3 + int(row["scaleB"])*x**2 + int(row["scaleC"])*x + int(row["scaleD"])
y = real_roots(eq, x)  # gives [CRootOf(...), ...] 
```

CRootOf 实例的值可以评估为您需要的任何精度，并且不应包含任何虚部。例如，

```
>>> [i.n(12) for i in real_roots(3*x**3 - 2*x**2 + 7*x - 9, x)]
[1.07951904858] 
```

注意：我记得，solve 会发回它无法确认满足假设的根（即，如果没有发现它们对于假设是错误的，那么它们会被返回）。此外，如果您希望求解 @PyRick 的输出更一致，请设置 flag `dict=True`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:23:55.477

正如 Krastonov 提到的，mpmath 提供了一种更简单的方法：

```
y = polyroots([int(row["scaleA"]), int(row["scaleB"]), int(row["scaleC"]), int(row["scaleD"])-value])
for root in y:
   if "j" not in str(root):
       value = root 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-04T21:00:44.243

我设法简单地忽略了包含该字符的解决方案`"I"`并用于`.evalf()`评估表达式。现在的代码是：

```
 x = Symbol('x')
    y = solve(int(row["scaleA"])*x**3 + int(row["scaleB"])*x**2 + int(row["scaleC"])*x + int(row["scaleD"]), x)
    for root in y:
        if "I" not in str(root):
            print("This One:" + str(root.evalf())) 
```

# django - Django Forms - 如果字段包含错误，则将字段设置为空白

> ID：15210705
> 
> 赞同：1
> 
> 时间：2013-03-04T20:39:54.957
> 
> 标签：django, django-forms

在表单中，如果某些字段包含任何验证错误，我希望将其设置为空白。例如，如果我有一个名为的小数字段`price`并且它的值无效*blue*，我想只是默默地将该字段设置为 none。

这将用于通过查询字符串制作搜索过滤器，因此如果有更好的解决方案，请告诉我。

**编辑 2**

```
class SearchForm(forms.Form):
    q = forms.CharField()
    price = forms.DecimalField(required=False) 
```

我希望表单能够以表单不会变得无效的方式处理无效的字段值。例如，如果我有`?q=car&price=100`表格就可以了。如果我有`?q=car&price=circle`，我希望表单能注意到错误（值不是小数），但不要使表单无效，只需将该字段设为空白即可。

这`clean_*`对于验证非字段类型特定的错误很有用，是吗？（与字段类型相关的错误已被检查并使表单无效）。如果是这样，我应该如何检测这些错误？

我的方法在这里可能完全错误 - 我基本上是在尝试创建搜索过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:08:23.157

这正是该`clean_field`方法的用途。因此，例如在您的示例中：

```
class MyForm(forms.Form):
    ...
    def clean_price(self):
        value = self.cleaned_data['price']
        if value == 'blue':
            value = ''
        return value 
```

# ios - iOS 视图和 UI/UX

> ID：15210710
> 
> 赞同：1
> 
> 时间：2013-03-04T20:40:24.493
> 
> 标签：ios, uitableview, user-interface, view

我是 iOS 新手，一直在查看视图。比如说 instagram 和 Wells Fargo 等应用程序是如何布局应用程序的？人们主要使用表格视图吗？有没有类似 HTML 的视图？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:43:55.497

有一个 HTML 视图 (UIWebView)。但用户体验不如“原生”应用程序。例如使用了这个视图。而且表现很差。我不知道 instagram 是如何做到的，但是使用表格视图，您非常灵活，因为您可以将每个视图放在表格视图行中。

# string - 在 C# 中对字符串执行算术运算

> ID：15210715
> 
> 赞同：0
> 
> 时间：2013-03-04T20:40:36.267
> 
> 标签：string, algorithm, c#-4.0, arithmetic-expressions

我是这里的 C# 初学者，我从文本框中获取字符串并应用以下算法，但是操作数和运算符的中断不起作用..

```
 string cal = "225+699"; 
        char[] all= cal.ToCharArray();
        int i=0,j=0;
        while (all[i] != '+' || all[i] != '-' || all[i] != '/' || all[i] != 'x')
        {

            j++;

        } // first operator check 
        char op = all[j + 1]; // operator save
        char[] part1 = new char[j];

        for (i = 0; i <= j; i++)
        {
            part1[i] = all[i];
        }
        string inp = Convert.ToString(part1);
        float a = float.Parse(inp); // first operand
        int l=cal.Length-(j+1);
        char[] part2 = new char[l];
        int c = 0;
        for (i = j + 1; i <= cal.Length; i++)// starts after operator
        {
            part2[c] = all[i];
            c++;

        }

        string h = Convert.ToString(part2);
        float b = float.Parse(h); // other operand 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:49:24.290

先决条件：学习语言的基础知识。例如，您可以在字符串上使用索引器或如何使用列表而不是数组。了解逻辑运算符的工作原理，`while`例如您的条件始终为真或抛出异常，它也似乎不合适，因为这里没有嵌套循环，但看起来它属于一个。底线是 - 你进入的太深太快了。

如果您是初学者并希望学习解析...回到书本并阅读一些理论，了解什么是[逆波兰表示法](http://en.wikipedia.org/wiki/Reverse_Polish_notation)以及如何使用它

如果您想解决解析问题以解决其他一些任务，请查看 [FLEE](http://flee.codeplex.com/wikipage?title=Examples&referringTitle=Home)，它可以为您进行解析，并且从实际的角度来看可能会更有用（尽管理论知识有其优点，不应该被解雇）

# math - Octave中的最小二乘插值

> ID：15210716
> 
> 赞同：0
> 
> 时间：2013-03-04T20:40:41.027
> 
> 标签：math, octave, interpolation, least-squares

我做了一个物理实验，得到了以下数据：

```
R=[2.91 2.19 1.76 1.43 1.20 1.01 0.88 0.77 0.67 0.6 0.52 0.46 0.41 0.37];
t=[35:5:100];
T=t+273.15; 
```

现在我需要对公式 ln R = f(1 / T) 进行最小二乘插值。我从网上尝试了几种方法，但都无法使它们起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:02:23.807

显然，您正在使用线性租赁平方插值。问题存在于计算系数的代码中。

这个操作

```
A \ y 
```

当 的列大小`A`与 的行大小匹配时有效`y`。

但是在您的代码中，语句中的`ones(n,1)`with水平连接`x`

```
A = [x ones(n,1)] 
```

不允许，因为 的大小`x`是 1*14，而的大小`ones(n,1)`是 14*1。显然，您遇到了尺寸不匹配错误。

这是一个工作代码：

```
R=[2.91 2.19 1.76 1.43 1.20 1.01 0.88 0.77 0.67 0.6 0.52 0.46 0.41 0.37];
t=[35:5:100];
T=t+273.15;

function coeff = least_square (x,y)
    n = length(x);
    A = [ones(n,1) x];
    coeff = A \ y;
    plot(x,y,'x');
    hold on
    interv = [min(x) max(x)];
    plot(interv,coeff(1)*interv+coeff(2));
end

least_square(R', T'); 
```

# objective-c - 是否可以记录正在向另一个方法发送消息的类和对象？

> ID：15210723
> 
> 赞同：3
> 
> 时间：2013-03-04T20:40:55.193
> 
> 标签：objective-c, xcode

我试图找出我的哪个对象正在发送发布消息以及发送了多少次。我需要一种在调试器中打印出发送消息的对象的方法。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:49:54.663

您可以随时使用：

`NSLog( @"[%@ %@] - %d -> Doing something", [self class], NSStringFromSelector(_cmd), __LINE__ );`

但是，如果您试图确定一个对象是否在您预期之前被释放，那么更好的方法是 enable `NSZombie`。[这个 SO answer](https://stackoverflow.com/a/5387006/620197)对如何启用有很好的说明`NSZombie`，[这](http://www.markj.net/iphone-memory-debug-nszombie/)应该有助于`NSZombie`与 Instruments 一起使用。

# html - 内容重叠侧边栏

> ID：15210736
> 
> 赞同：3
> 
> 时间：2013-03-04T20:41:41.587
> 
> 标签：html, css, positioning, containers

我的内容与侧边栏重叠。如果您查看侧边栏容器的边距和填充，您会发现我必须尝试很多事情，包括调整位置，但没有任何效果-

***示例屏幕截图： [http ://tinyurl.com/cefamyt](http://tinyurl.com/cefamyt)

***工作示例 [http://www.bestthrillermovielist.com/indextest.php#topofpage](http://www.bestthrillermovielist.com/indextest.php#topofpage)

***另外，当我将侧边栏容器设置为设定高度时，例如 4000 像素；而不是我目前拥有的方式，没有电影内容重叠到侧边栏中。我试图让侧边栏容器拉伸窗口的整个高度但无济于事***

一旦侧边栏内容结束，#movieinfo 中的内容就会与侧边栏中的内容重叠。#sidebarcontainer 上的边距/填充允许侧边栏延伸到屏幕的整个长度，但由于某种原因，#movieinfo 内容滑到侧边栏内容结束的右下方。

CSS：

```
#container {
    max-width:90%;
    margin-left:auto;
    margin-right:auto;
    margin-top:25px;
    overflow:hidden;
}

#movieinfo {
    padding-right:375px;
    margin-top:25px; 
    display:inline;
    position:relative;
}

#sidebarcontainer {
    float: right; 
    width:345px;
    background:#fff;
    margin-bottom: -5000px; 
    padding-bottom: 5000px; 
    height:100%;
    position:relative;
}

#movieright {
    float:right; 
    width:340px;
    height:100%; 

    }

#movierightcontainer {
    float:right;
    width:100%;
    margin-bottom:8px;
    margin-top:0px;
    height:100%;
    padding: 0 2%;

}

.movienav {
    width: 320px;
    height: 430px;
    float: left;
    margin-right: 20px;
    position: relative;
    display:inline;
    margin-top:25px;
    margin-bottom:45px;
} 
```

HTML

```
<div id="container">
    <div id="movieinfo"> 
        <?php include("sidebar.php");?>
 <div class="movienav"></div>
    </div>
</div>

***SIDEBAR.php***
<div id="sidebarcontainer">
    <div id="movierightcontainer">
        <div id="movieright"></div>
     </div>
</div> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:05:26.373

问题是您将所有内容都放入`#container`其中需要为左列而不是右列有一个单独的 div。电影海报与右栏重叠，因为右栏向右浮动并且不再有内容。这就是为什么将高度添加到右列的原因。

我已经创建了 jsfiddle 中需要发生的事情的简化版本。我把海报缩小了，所以在预览窗口中更容易查看。但这个概念是正确的。

[这是jsfiddle链接。](http://jsfiddle.net/AXkTM/)

# php - 在自定义帖子模板中使用 Jquery

> ID：15210737
> 
> 赞同：0
> 
> 时间：2013-03-04T20:41:44.397
> 
> 标签：php, jquery, html, wordpress

我是 jquery 的新手，但能够想出这个 - [http://jsfiddle.net/t2x9G/3/](http://jsfiddle.net/t2x9G/3/)

我正在 wordpress 中构建并试图弄清楚如何使填充的新文本来自帖子而不是嵌入代码中。

```
$('#navone').click(function(){
 $('#title').text("#1 title");
 $('#content').text("This is the text from number one");
}); 
```

我希望新文本可以在客户端进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:40:21.960

那么您要做的是从 WordPress 数据库中调用帖子并动态替换视图上的内容而不重新加载页面？试试这个教程：

[如何 AJAXify WordPress 主题](http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html)

# php - 是否可以从使用 PHP 的 API 调用中仅接收 JSON 格式的部分结果？

> ID：15210739
> 
> 赞同：1
> 
> 时间：2013-03-04T20:41:47.763
> 
> 标签：php, javascript, ajax, json

我一直在使用 PHP 调用 API 并以 JSON 格式检索一组数据。我需要一次进行 20 次批处理调用。因此，速度非常重要。

但是，我只需要第一个元素，实际上，我只需要一个数据，它就在 JSON 文件的开头，索引为 0。但是，JSON 文件返回大约 300 组数据。我必须等到所有数据都准备好才能继续。

我想通过消除冗余数据集来加速我的 API 调用。我是否可以只接收第一组数据而不必等到一切准备就绪然后再索引第一个元素？

原谅我的英语......提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:43:33.273

不。json 不是“可流式”格式。在您收到整个字符串之前，它不能被解码为原生结构。如果您**知道**您需要什么，那么您可以使用字符串操作来检索您需要的部分，但这既不可靠也不可取。同样，php 不会在文本被编码时将其流出。

例如，考虑您的数据结构是 LOOOONG 浅数组的情况

```
$x = array(
    0 => blah
    1 => blah
    ...
    999,999,998 => blah
    999,999,999 => array( .... even more nested data here ...)
); 
```

流媒体格式会将其作为

```
['blah', 'blah' ............ 
```

您可以假设在顶层只有那些“废话”并输出 a `]`，以生成完整的 json 字符串：

```
['blah'....   , 'blah'] 
```

并发送它，然后你继续编码并到达那个子数组......现在你突然得到了

```
['blah' ....., 'blah'][ ...sub array here ....] 
```

现在它不再是有效的 JSON。

所以基本上，json 编码是在一个（长）镜头中完成的，而不是在 dibs 和 drabs 中完成的，只是因为如果不先解析整个结构，你根本无法知道“稍后”会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:47:09.153

您可以使用 fopen 来获取保证其中包含所需内容的字节，然后使用正则表达式对其进行解析。就像是：

```
$max_bytes = 512;
$fp = fopen($url, "r") ;

$data = "" ;
if($fp) {

    while(!preg_match('/"totalAmount"\:"(.*)"/U', $data, $match)) 
        $data .= stream_get_contents($fp, $max_bytes) ;

    fclose($fp);

    if(count($match)){
        $totalAmount = $match[1];
    }
} 
```

请记住，您不能将存储在 $data 中的字符串用作有效的 json。只会是部分的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:46:01.713

不，您需要在解析并将所需数据发送回客户端计算机之前获取整个数据集。

# ios - Objective-C Pan手势在superview边界闪烁

> ID：15210742
> 
> 赞同：1
> 
> 时间：2013-03-04T20:41:59.920
> 
> 标签：ios, objective-c, uipangesturerecognizer

我有一个平移手势识别器充当滑块，代码如下：

```
- (void)minutePan:(UIPanGestureRecognizer *)gesture
{
    if ((gesture.state == UIGestureRecognizerStateChanged) ||
        (gesture.state == UIGestureRecognizerStateEnded)){

        CGPoint translation = [gesture translationInView:gesture.view.superview];

        float leftBound = gesture.view.bounds.size.width / 2.0f;
        float rightBound = gesture.view.bounds.size.width + (leftBound - 60);

        float position;
        if(gesture.view.center.x < leftBound){
            position = leftBound;
        }else if(gesture.view.center.x > rightBound){
            position = rightBound;
        }else{
            position = gesture.view.center.x + translation.x;
        }
        gesture.view.center = CGPointMake(position, gesture.view.center.y);
        [gesture setTranslation:CGPointZero inView:gesture.view.superview];
    }
} 
```

我有一个带有手势识别器的 UIView，它附加在另一个 UIView 中，作为它的边界。它工作正常，除非我到达左右边缘。位置变量的设置不应低于平移视图宽度的一半，但它似乎会在代码运行之前更新屏幕上的视图。这会导致视图超出边界并在用户拖动时闪烁。任何帮助将不胜感激，谢谢。

# python - python错误地跳过列表中最后一个文件的最后一行

> ID：15210745
> 
> 赞同：1
> 
> 时间：2013-03-04T20:42:07.963
> 
> 标签：python

我用 Python v3.3 编写了一个程序，它依次打开文件列表并使用每个文件中的数据执行操作。但是，由于某种原因，程序在打开文件时始终忽略列表中最后一个文件的最后一行。之前的所有文件都可以正常读取。这些文件本身具有相同的格式，并且列表中的最后一个文件中没有其他所有其他文件中都不存在的额外空格或换行符。

代码如下：

```
counter3=0
for counter3 in range(counter3,numSteps):
# open up each step in the list of steps across the chromosomal segment:
    L=shlex.shlex(stepFileIndex[counter3],posix=True)
    L.whitespace += '\t'
    L.whitespace_split = True
    L=list(L)
    #print(L)
    stepNumber = int(L[0])
    stepStart = int(L[1])
    stepStop = int(L[2])
    stepSize = int(stepStop-(stepStart-1))
#Now open the file of SNPs corresponding with the window in question and convert it into a list:
    currentStepFile = open(("C:/Users/gwilymh/Desktop/Python/Sliding Window Analyses-2/%s_%s_step_%s.txt")%(str(segmentNumber),str(segmentName),str(counter3+1)),'r')
    currentStepFile = list(currentStepFile)
    nSNPsInCurrentStepFile = len(currentStepFile)
    print("number of SNPs in this step is:", nSNPsInCurrentStepFile)
    print(currentStepFile) 
```

列表中的最后两个文件如下：

```
1_segment1_step_7.txt
['1503', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'C']
['1505', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'T', 'G']

1_segment1_step_8.txt
['1950', 'G', 'G', 'G', 'C', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G', 'G']
['1967', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'A', 'G'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:01:36.860

脚本运行时是否正在写入文件？

除了悬空的文件句柄和可能应该清空的缓冲区之外，`f.close()`或者`f.flush()`我在代码中看不到任何错误。

但是，您可以通过不使用`list(filehandle)`而是用`for`循环替换它来改进您的代码。正如您可能从评论中注意到的那样，这不是一种常见的方式。

此外，因为您替换了指向 filehandle 的变量`currentStepFile`，您的代码将不得不等待垃圾收集将其关闭。

如果您还在代码的其他地方执行此操作，则很可能是将来出现此问题或其他问题的原因。

# java - 如何按Java中的第二个单词按字母顺序对字符串数组进行排序

> ID：15210748
> 
> 赞同：1
> 
> 时间：2013-03-04T20:42:36.583
> 
> 标签：java, arrays, string, sorting

我正在处理的任务有一点问题。基本上，我有一个文件，其中包含学生 ID 和他们的名字，格式如下：

> 17987 贝丝
> 
> 17950 克拉克
> 
> 17936 亚伦

我将文件的内容放在一个数组中，我需要按名称而不是 ID 对其进行排序。如果我使用`Arrays.sort(myArray)`它，它将按 ID 自动排序。我很难理解比较器，所以如果你能一步一步地解释它，对我来说会更容易。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T20:49:24.040

您需要提供一个`Comparator`可以查看`String`传递给它的 s 的内容，并且他们必须了解他们正在寻找的内容。您可以通过几种不同的方式来执行此操作，但是，如果您确定字符串的内容，那么您可以`split`根据`String`它们的空间来比较 s 并比较第二个值。或者，您可以使用正则表达式来提取这些详细信息。

```
class SecondWordComparator implements Comparator<String>
{
    @Override
    public int compare(String s1, String s2)
    {
        String[] a1 = s1.split(" ");
        String[] a2 = s2.split(" ");

        // you should ensure that there are actually two elements here
        return a1[1].compareTo(a2[1]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:54:52.937

使用[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)，条目将按键排序。

例如：

```
SortedMap<String, Integer> srtdMap  = new TreeMap<String, Integer>();

srtdMap.put("Beth", 17987);
srtdMap.put("Aaron", 17936 );
srtdMap.put("Clark", 17950);

//key set always returns the same order by name
for(String name : srtdMap.keySet())
{
    int id = srtdMap.get(name);
    System.out.println("name = " + name + ", ID is " + id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T20:51:25.760

您可以做的是运行一个 for 循环，将 Array 的所有内容重新排列为最终数组。需要两个 for 循环。第一个 for 循环将遍历 Array，第一个 for 循环将查找第一个字母并将其添加到最终的 Array/Arraylist 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T20:53:48.933

对于面向对象的方法，我会将文件解析为一个新类，`Student`并将它们保存在一个数组（列表）中。该类可以`Comparable<Student>`在那里扩展，您可以将 the`int ID`和 the分开`String name`并让`compareTo(Student student)`方法 return `name.compareTo(otherStudent.name)`。然后你可以调用 sort 方法，它会根据需要对其进行排序。

像这样：

```
public class Student implements Comparable<Student> {
    private int id;
    private String name;
    public Student(int id, String name) {
        this.id = id;
        this.name = name;
    }
    @Override
    public int compareTo(Student student) {
        return name.compareTo(student.name);
    }

} 
```

# r - 多个配对样本的 F 检验

> ID：15210749
> 
> 赞同：0
> 
> 时间：2013-03-04T20:42:40.380
> 
> 标签：r, relation

我有两组数据：**Set1 和 Set2**。

对于每个集合，我们都有相同的变量**A、B、C、D、E**。

我想做**F 检验**以了解以下关系是否同时为真：

```
Set1_A = Set2_A, Set1_B = Set2_B, Set1_C = Set2_C, Set1_D = Set2_D, Set1_E = Set2_E 
```

**Set1_A**和**Set2_A**可能是不同大小的向量。

我如何在 R 中实现这一点？

谢谢

Set1 的样本数据：

```
A       B       C
11.0    11.0    11.0
23.3    23.3    23.3
44.6    -1.3    -7.1
-1.9    -1.9    -1.9 
```

Set2 的样本数据：

```
A        B      C
3.9      3.9    3.9
-6.1    -6.1    -6.1
-34.6   -95.7   -102.4
 7.0    7.0     7.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T02:42:54.823

这说明了如何比较 Set1_A 与 Set2_A。为了确定它们是否同时“真实”，您需要使用多元分析

```
Set1 <- read.table(text="A       B       C
 11.0    11.0    11.0
 23.3    23.3    23.3
 44.6    -1.3    -7.1
 -1.9    -1.9    -1.9", header=TRUE)

 Set2<- read.table(text="A        B      C
 3.9      3.9    3.9
 -6.1    -6.1    -6.1
 -34.6   -95.7   -102.4
  7.0    7.0     7.0", header=TRUE)
 combset <- rbind(Set1, Set2)
 combset$grp <- rep(c("Set1", "Set2"), times=c(nrow(Set1), nrow(Set2) ) )
 combset
#----------------
      A     B      C  grp
1  11.0  11.0   11.0 Set1
2  23.3  23.3   23.3 Set1
3  44.6  -1.3   -7.1 Set1
4  -1.9  -1.9   -1.9 Set1
5   3.9   3.9    3.9 Set2
6  -6.1  -6.1   -6.1 Set2
7 -34.6 -95.7 -102.4 Set2
8   7.0   7.0    7.0 Set2 
```

现在您已经有了可能被称为长格式的数据，您可以使用 grp ID 作为`lm.formula`调用中的一个因素：

```
 lm(A ~ grp, data=combset)

Call:
lm(formula = A ~ grp, data = combset)

Coefficients:
(Intercept)      grpSet2  
      19.25       -26.70  

Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor
> anova(lm(A ~ grp, data=combset))
Analysis of Variance Table

Response: A
          Df Sum Sq Mean Sq F value  Pr(>F)  
grp        1 1425.8 1425.78  3.8004 0.09913 .
Residuals  6 2251.0  375.16                  
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor 
```

可以构建多元模型。但是......您确定您可以正确解释这一点并且知道可能出现的统计问题吗？

```
>  lm( A + B + C ~ grp, combset)

Call:
lm(formula = A + B + C ~ grp, data = combset)

Coefficients:
(Intercept)      grpSet2  
      33.35       -87.92  

Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor
> anova(lm( A + B + C ~ grp, combset))
Analysis of Variance Table

Response: A + B + C
          Df Sum Sq Mean Sq F value Pr(>F)
grp        1  15462 15461.6   2.016 0.2055
Residuals  6  46017  7669.6               
Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor 
```

我担心这个答案，因为我认为应该估计更多的系数。我想起了[Peter Dalgaard 在 RNews 上的一篇文章，于是查了](http://cran.r-project.org/doc/Rnews/Rnews_2007-2.pdf)一下。这应该是我提供的：

```
>  lm( cbind(A, B, C) ~ grp, combset) 

Call:
lm(formula = cbind(A, B, C) ~ grp, data = combset)

Coefficients:
             A        B        C      
(Intercept)   19.250    7.775    6.325
grpSet2      -26.700  -30.500  -30.725

Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor
> anova(lm( cbind(A, B, C) ~ grp, combset))
Analysis of Variance Table

            Df  Pillai approx F num Df den Df Pr(>F)
(Intercept)  1 0.51946  1.44130      3      4 0.3557
grp          1 0.42690  0.99318      3      4 0.4813
Residuals    6                                      
Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor
> class(lm( cbind(A, B, C) ~ grp, combset))
[1] "mlm" "lm" 
Warning message:
In model.matrix.default(mt, mf, contrasts) :
  variable 'grp' converted to a factor 
```

请注意，呈现了“真实的”多元推论统计（例如 Pillai 轨迹或 Wilks 或 Hotelling），并且呈现了 A、B 和 C 的三个独立系数，并且输出的类别是“mlm”而不仅仅是“lm” . 你也应该看看`?anova.mlm`。

# objective-c - 绘制和填充自定义形状

> ID：15210750
> 
> 赞同：0
> 
> 时间：2013-03-04T20:42:45.037
> 
> 标签：objective-c, uibezierpath

我有一个 UIImageView ，其中包含平面图的图片。最重要的是，我有一个 UIView，我想在平面图上的不同房间上绘制自定义形状（半透明）。

我阅读了有关绘制自定义形状的 UIBeizerPaths 的信息，但无法确定是否可以填充我绘制的形状。

概括：

1) 我可以用从 UIBeizerPaths 绘制的颜色填充形状吗？

2）如果是，它可以是半透明的吗？

3）有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:52:25.487

基本上，您想要：

1.  覆盖`drawRect`（例如参见[这个问题](https://stackoverflow.com/questions/6589265/how-to-draw-a-custom-uiview-that-is-just-a-circle-iphone-app)）
2.  调用（请参阅[此处](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)`CGContextDrawPath`的 API ）

是的，您应该能够使用半透明颜色。

# html - 更改 HTML 数据列表自动完成行为

> ID：15210753
> 
> 赞同：2
> 
> 时间：2013-03-04T20:42:50.493
> 
> 标签：html, autocomplete, html-datalist

我正在尝试为我正在开发的网站实现搜索自动完成功能。我正在使用 HTML datalist，选项从后端 MySQL 数据库动态生成（与 AJAX 通信）。但是，datalist 自动完成功能并没有像我想要的那样工作。如果关键字不按顺序排列，自动完成似乎会自动忽略结果。

例如，如果我想搜索字符串“苹果香蕉橙”，并在搜索框中输入“苹果橙”，则该字符串不会显示，即使它是我的后端生成的选项之一。

我假设这是某种固有的数据列表功能。我想知道是否有任何方法可以解决这个问题，或者是否有人对如何实现可以克服这个问题的搜索自动完成功能有一些替代想法？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:57:30.083

您是否考虑过[jQuery 自动完成功能](http://jqueryui.com/autocomplete/)？并且仍然使用 Ajax 来动态生成值。

```
<form id="searchbox">
<input id="search" type="text" placeholder="Type here" class='search_input' >
</form>

$(document).ready(function() {
$("input#search").autocomplete({
source: ["apple","banana", "orange"]
});
}); 
```

[JSFiddle](http://jsfiddle.net/G9ZKa/)

# html - iOS 中的 HTML 电子邮件

> ID：15210757
> 
> 赞同：0
> 
> 时间：2013-03-04T20:42:56.763
> 
> 标签：html, ios, mobile, html-email

我在 html 电子邮件中制作的表格上划了一条线。它位于橙色区域。我不太确定是什么原因造成的。里面没有图片。这是我对该表的代码。

```
<table cellpadding="0" cellspacing="0" border="0" width="625" align="center" bgcolor="#FFFFFF">
    <tr>
      <td height="23" bgcolor="#f08122" colspan="3">&nbsp;</td>
    </tr>
    <tr>
    <td width="23" bgcolor="#f08122"></td>
      <td bgcolor="#f08122" valign="middle" style="font-family:Helvetica, Arial, sans-serif; color:#FFFFFF;" align="center"><span style="font-size:30px; line-height:36px; font-weight:bold;"><strong>Improve outcomes and empower patients with health logs</strong></span><br /><br />
        <span style="font-size:27px;">Order now and get <strong>10% more FREE!*</strong></span></td>
        <td width="23" bgcolor="#f08122"></td>
    </tr>
    <tr>
      <td height="23" bgcolor="#f08122" colspan="3">&nbsp;</td>
    </tr>
    <tr>
      <td height="5" colspan="3"></td>
    </tr>
  </table> 
```

如果您想要一个活动视图，这里也是实际电子邮件的链接：[https ://tagwebstore.com/email/tag-email-logbooks.html](https://tagwebstore.com/email/tag-email-logbooks.html)

这是来自我的 iPhone 的 html 电子邮件的屏幕截图。

![在此处输入图像描述](../Images/88d349a09425e5c80d8926d3ca4a2cb0.png)

这些线条似乎在白色文本的上方和下方。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:55:37.720

当背景颜色或图像应用于单个表格单元格时，会出现边框。

你可以试试：

1.  从单个表格行和单元格中删除背景颜色或图像，和/或；

2.  将问题表嵌套在一个新表中，其背景颜色与内表的背景颜色相匹配。

[**来源**](http://www.campaignmonitor.com/blog/post/3585/iphone-fail-the-trouble-with-table-borders-and-html-email/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20CampaignMonitor%20%28Campaign%20Monitor%20Blog%20Combined%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T03:44:40.820

另外，设置 style="display: block;" 在 img 元素上始终可以帮助所有图像准确定位，与上述建议相结合。

# nservicebus - 通过 NServiceBus.Host.exe 启动端点时出现异常

> ID：15210759
> 
> 赞同：2
> 
> 时间：2013-03-04T20:43:03.923
> 
> 标签：nservicebus, .net-4.5, autofac

我正在开发一个在 .NET 4.5 项目中使用 NServiceBus 的示例消息处理程序服务。只要使用 DefaultBuilder，它就可以正常工作。要在添加对 Autofac 的引用并将 DefaultBuilder 更改为 AutofacBuilder 后立即使用 Autofac 为其他服务配置容器，我得到如下所示的异常。对 NServiceBus.ObjectBuilder.Autofac.dll 的引用已经在项目中。

> 启动端点时出现异常，已记录错误。原因：无法加载文件或程序集“Autofac，Version=2.6.1.841，Culture=neutral，PublicKeyToken=17863af14b0044da”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> 警告：比较程序集名称导致不匹配：主要版本
> 错误：无法完成程序集设置（hr = 0x80131040）。探测终止。

我究竟做错了什么？我已经尝试过 Nuget，手动参考，将目标框架更改为 4.0。

**编辑**

添加绑定重定向后，错误消息更改为

```
Method not found: 'Autofac.Builder.IRegistrationBuilder`3<!0,!1,!2>
Autofac.Builder.IRegistrationBuilder`3.PropertiesAutowired(Autofac.PropertyWiringFlags)'.

at NServiceBus.Hosting.GenericHost.Start() in c:\BuildAgent\work\nsb.master_6\src\hosting\NServiceBus.Hosting\GenericHost.cs:line 43
at NServiceBus.Hosting.Windows.WindowsHost.Start() in c:\BuildAgent\work\nsb.master_6\src\hosting\NServiceBus.Hosting.Windows\WindowsHost.cs:line 55
at NServiceBus.Hosting.Windows.Program.<>c__DisplayClass8.<Main>b__4(WindowsHost service) in c:\BuildAgent\work\nsb.master_6\src\hosting\NServiceBus.Hosting.Windows\Program.cs:line 97
at Topshelf.Internal.ControllerDelegates`1.StartActionObject(Object obj) in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ControllerDelegates.cs:line 17
at Topshelf.Internal.IsolatedServiceControllerWrapper`1.<>c__DisplayClass2.<set_StartAction>b__1(TService service) in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\IsolatedServiceControllerWrapper.cs:line 65
at Topshelf.Internal.ServiceController`1.<.cctor>b__1(ServiceController`1 sc) in c:\Projects\TopShelfForNSB\src\Topshelf\Internal\ServiceController.cs:line 35
at Magnum.StateMachine.LambdaAction`1.Execute(T instance, Event event, Object parameter) in :line 0
at Magnum.StateMachine.EventActionList`1.Execute(T stateMachine, Event event, Object parameter) in :line 0 
```

**应用程序配置**

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:22:41.203

NServiceBus v3.3.5 使用 Autofac v2.6.1.841，如果您引用不同的版本，则需要添加绑定重定向。

# sql - SQL 2 相同的行

> ID：15210762
> 
> 赞同：0
> 
> 时间：2013-03-04T20:43:06.903
> 
> 标签：sql

我的查询：

```
SELECT CONCAT(f.name, ' ', f.parent_names) AS FullName,
       stts.name AS 'Status',
       u.name AS Unit,
       city.name AS City,
       hus.mobile1 AS HusbandPhone,
       wife.mobile1 AS WifePhone,
       f.phone AS HomePhone,
       f.contact_initiation_date AS InitDate,
       fh.created_at AS StatusChangeDate,
       cmt.created_at AS CommentDate,
       cmt.comment AS LastComment
FROM families f
JOIN categories stts ON f.family_status_cat_id = stts.id
JOIN units u ON f.unit_id = u.id
JOIN categories city ON f.main_city_cat_id = city.id
JOIN contacts hus ON f.husband_id = hus.id
JOIN contacts wife ON f.wife_id = wife.id
JOIN comments cmt ON f.id = cmt.commentable_id
AND cmt.created_at =
    (SELECT MAX(created_at)
     FROM comments
     WHERE commentable_id = f.id)
JOIN family_histories fh ON f.id = fh.family_id
AND fh.created_at =
    (SELECT MAX(created_at)
     FROM family_histories
     WHERE family_id = f.id
         AND family_history_cat_id = 1422)
WHERE f.id = 17883 
```

问题：结果是 2 行 - 但它们是相同的。为什么我得到 2 个结果而不是一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:47:02.933

可能评论或family_histories有双重关系，您可以通过返回`*`结果来检查它。某处应该有区别。

提供完整的结果以找到问题。

您*可以*（但不推荐）通过设置来解决它`DISTINCT`。

```
SELECT DISTINCT CONCAT(f.name, ' ', f.parent_names) AS FullName, stts.name AS 'Status', u.name AS Unit, city.name AS City, hus.mobile1 AS HusbandPhone, wife.mobile1 AS WifePhone, f.phone AS HomePhone, f.contact_initiation_date AS InitDate, fh.created_at AS StatusChangeDate, cmt.created_at AS CommentDate, cmt.comment AS LastComment
FROM families f JOIN categories stts ON f.family_status_cat_id = stts.id
JOIN units u ON f.unit_id = u.id
JOIN categories city ON f.main_city_cat_id = city.id
JOIN contacts hus ON f.husband_id = hus.id
JOIN contacts wife ON f.wife_id = wife.id
JOIN comments cmt ON f.id = cmt.commentable_id AND cmt.created_at = (SELECT MAX(created_at) FROM comments WHERE commentable_id = f.id)
JOIN family_histories fh ON f.id = fh.family_id AND fh.created_at = (SELECT MAX(created_at) FROM family_histories WHERE family_id = f.id AND family_history_cat_id = 1422)
WHERE f.id = 17883 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:50:34.777

当您连接存在一对多关系的表时，您似乎会返回多行，而实际上该行在主表中仅存在一次，但其中一个子表中有多行相关数据.

另请注意，您期望的数据可能会丢失，因为子表中没有匹配的记录，在这种情况下使用[LEFT JOIN](http://www.w3schools.com/sql/sql_join_left.asp)。

# powershell - 使用 WMI 获取打印机日志

> ID：15210764
> 
> 赞同：1
> 
> 时间：2013-03-04T20:43:13.690
> 
> 标签：powershell, scripting, wmi

我正在尝试使用 WMI 从多个服务器获取打印机系统日志。一周前，我编写了以下代码，由于某种原因，它有时只能工作：

```
wmic /node:<servername> NTEvent WHERE "logfile='System' AND SourceName='Print' AND TimeGenerated > '20130219'" get EventCode,TimeGenerated,Message 
```

这行代码有时会起作用，但大多数情况下，每当我尝试运行它来获取日志时，我都会收到以下错误：

```
ERROR:
Code = 0x80020009
Description = Exception occurred.
Facility = Dispatch 
```

我想知道是否有人可能知道为什么会发生这种情况，以及是否有更好的方法来重写我的代码。我考虑过使用`get-wmiobject`cmdlet，但是我不确定如何过滤和获取我想要获取的相同日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:10:08.017

有两种方法可以做到这一点。既不使用`Get-WMIObject`.

选项 1：获取整个事件日志，然后过滤。

```
Get-EventLog -LogName System -Source Print|where-object{$_.timeGenerated -gt (get-date "2013-02-19")}|select-object eventid, timegenerated,message | Export-csv -path r:\log.csv -notypeinfo; 
```

选项 2：从源头过滤

```
Get-WinEvent -FilterHashtable @{logname='system';source='print';StartTime=(get-date "2013-02-19").date;}|select-object id,timecreated,message; 
```

最佳实践是尽可能靠近数据源进行过滤（[Filter Left, Format Right](http://technet.microsoft.com/en-us/magazine/2009.09.windowspowershell.aspx)），在这种情况下是选项 2。

# grouping - 分组数据的移动平均线

> ID：15210767
> 
> 赞同：1
> 
> 时间：2013-03-04T20:43:26.877
> 
> 标签：grouping, spss, moving-average

我有一些按组织组分组的数据，我想计算每个组内的移动平均值。我玩过，不知道一种快速简便的方法可以使命令在组内运行，而不是在整个数据集上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:15:48.643

见`SPLIT FILE`命令。您可以简单地指定分组变量并运行适当的`CREATE`命令来估计您的移动平均值。下面的简要示例：

```
sort cases by GROUPING_VAR.
split file by GROUPING_VAR.
CREATE
  /group_MA=PMA(X 5).
split file off. 
```

# ios - 如何在不使用大量内存的情况下缩放转换 UILabel？

> ID：15210770
> 
> 赞同：9
> 
> 时间：2013-03-04T20:43:35.020
> 
> 标签：ios, opengl-es, cocos2d-iphone, core-animation, impress.js

我正在尝试在 Objective C 中重现 Impress.js 的[示例演示](http://bartaz.github.com/impress.js/#/title)中的一些 2D 转换。特别是旋转、平移和缩放 - 现在我专注于缩放。

我尝试将 UILabel 缩放到它“通过屏幕”的程度，就像示例演示中的“可视化你的大想法”->“和小想法”一样。

这是我迄今为止尝试过的：

```
UILabel *label = [[UILabel alloc] init];

label.text = @"Hello World!";
label.textColor = [UIColor blackColor];
label.font = [UIFont fontWithName:@"Arial" size:18.f];
[label sizeToFit];
label.center = CGPointMake(self.view.bounds.size.width / 2, self.view.bounds.size.height / 2);
[self.view addSubview:label];

label.contentScaleFactor *= 80;

[UIView animateWithDuration:5 animations:^{
    label.transform = CGAffineTransformScale(label.transform, 80, 80);
}]; 
```

不幸的是，这会占用大约 30-60 MB 的 RAM，具体取决于 contentScaleFactor 和初始字体大小。如果我不增加 contentScaleFactor 文本看起来很模糊。增加字体大小似乎也消耗了同样多的内存。

这是它在分析器中的样子：

![在此处输入图像描述](../Images/57f86d5c1efd9f1e5a4947bd4eccc0ac.png)

而这只是一个单一的 UILabel。

有没有什么办法可以做到这一点，而不会消耗太多内存，又不会牺牲正在渲染的文本或过渡的质量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:53:44.360

[项目下载链接](http://dl.dropbox.com/u/91385349/ImpressJS%20in%20ObjC.zip)

我认为没有必要离开 Quartz 来实现这种复制。您描述的所有内容以及我从与 Impress.js 混淆中收集到的所有内容似乎都可以通过将转换（主要是 2D，一些 3D）应用到添加到容器视图中的一组 UILabel 来复制，这些 UILabel 可以在容器视图中自由移动主视图。

为此，我创建的项目使用了一个`UILabel`名为“ImpressLabel”的子类，并带有一个额外的初始化函数，在该函数中，不是将标签传递给框架，而是将大小、中心点和`CGFloat`标签在 Z 轴上的旋转传递给它. 此转换在实例化时应用于标签，因此当您设置标签时，它们将出现在屏幕上您指定的位置和转换中。

然后就配置文本而言，您可以传递标签 an`NSAttributedString`而不是 a `NSString`。这允许你独立修改字符串的不同部分，因此标签中的不同单词可以是不同的大小、字体、颜色、背景颜色等。下面是上面两段的示例：

```
ImpressLabel *label1 = [[ImpressLabel alloc] initWithSize:CGSizeMake(260.0f, 80.0f) andCenterPointInSuperview:CGPointMake(500.0f, 500.0f) andRotationInSuperview:0.0f andEndingScaleFactor:1.3];

NSMutableAttributedString *firstLabelAttributes = [[NSMutableAttributedString alloc] initWithString:@"then you should try\nimpress.js*\n* no rhyme intended"];

[firstLabelAttributes addAttribute:NSFontAttributeName
                             value:[UIFont systemFontOfSize:label1.font.pointSize - 2]
                             range:NSMakeRange(0, 19)];

[firstLabelAttributes addAttribute:NSFontAttributeName
                             value:[UIFont systemFontOfSize:label1.font.pointSize - 8]
                             range:NSMakeRange(firstLabelAttributes.string.length - 19, 19)];

[firstLabelAttributes addAttribute:NSFontAttributeName
                             value:[UIFont boldSystemFontOfSize:label1.font.pointSize + 14]
                             range:NSMakeRange(23, 11)];

[label1 setNumberOfLines:3];
[label1 setAttributedText:firstLabelAttributes];
[label1 setTextAlignment:NSTextAlignmentCenter];
[containmentView addSubview:label1]; 
```

现在，更多地了解整个操作。正如我上面提到的，这个子类为每个标签添加了一个点击手势。当点击被识别时，会发生一些事情。包含标签的视图将通过调整其比例来平移/后退/远离。它还将开始旋转并在主视图中调整其锚点，以便当动画停止时，所选标签将以正确的方向在屏幕上居中。然后当然，当这一切都在进行时，所选标签的 alpha 将提高到 1.0f，而其余标签的 alpha 将降低到 0.25f。

```
- (void)tapForRotationDetected:(UITapGestureRecognizer *)sender {
    CABasicAnimation *scale = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
    [scale setToValue:[NSNumber numberWithFloat:0.8]];
    [scale setAutoreverses:YES];
    [scale setDuration:0.3];

    //Create animation to adjust the container views anchorpoint.
    CABasicAnimation *adjustAnchor = [CABasicAnimation animationWithKeyPath:@"anchorPoint"];
    [adjustAnchor setFromValue:[NSValue valueWithCGPoint:self.superview.layer.anchorPoint]];
    [adjustAnchor setToValue:[NSValue valueWithCGPoint:CGPointMake(self.center.x / self.superview.frame.size.width, self.center.y / self.superview.frame.size.height)]];
    [adjustAnchor setRemovedOnCompletion:NO];
    [adjustAnchor setFillMode:kCAFillModeForwards];

    //Create animation to rotate the container view within its superview.
    CABasicAnimation *rotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];

    //Create the animation group to apply these transforms
    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    [animationGroup setAnimations:@[adjustAnchor,rotation]];
    [animationGroup setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];
    [animationGroup setDuration:0.6];

    //Apply the end results of the animations directly to the container views layer.

    [self.superview.layer setTransform:CATransform3DRotate(CATransform3DIdentity, DEGREES_TO_RADIANS(-self.rotationInSuperview), 0.0f, 0.0f, 1.0f)];
    [self.superview.layer setAnchorPoint:CGPointMake(self.center.x / self.superview.frame.size.width, self.center.y / self.superview.frame.size.height)];
    [self.superview.layer addAnimation:animationGroup forKey:@"animationGroup"];

    //Animate the alpha property of all ImpressLabels in the container view.
    [self.superview bringSubviewToFront:self];
    [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        for (ImpressLabel *label in sender.view.superview.subviews) {
            if ([label isKindOfClass:[ImpressLabel class]]) {
                if (label != self) {
                    [label setAlpha:0.25f];
                }else{
                    [label setAlpha:1.0f];
                }

            }
        }
    } completion:nil];
} 
```

现在，解决您的问题中列出的一些问题。

1.  我在 Instruments 的分配工具中分析了这个项目，它总共只消耗大约 3.2 MB，所以我想说这种方法足够有效。

2.  我提供的示例为 2D 空间中的大多数对象设置动画，但缩放动画除外，这充其量只是一种错觉。我在这里所做的只是作为一个例子来说明如何做到这一点，并不是一个 100% 完整的演示，因为正如我上面所说的，动画真的不是我的专业领域。但是，通过查看文档，似乎在第三维中旋转标签并调整其超级视图以旋转所有标签并使所选标签保持平坦的关键是使用`CATransform3DInvert()`. 虽然我还没有时间完全弄清楚它是否有效，但看起来它可能正是这种情况下所需要的。

3.  就镜像而言，我认为正确缩放所有内容不会有任何问题。查看 Apple 的[Multiple Display Programming Guide](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/WindowAndScreenGuide/UsingExternalDisplay/UsingExternalDisplay.html#//apple_ref/doc/uid/TP40012555-CH3-SW1)，看起来传递给 的对象`NSNotification` `UIScreenDidConnectNotification`是一个`UIScreen`对象。既然是这种情况，你可以很容易地请求这个显示边界，并相应地调整标签的框架和容器视图。

**注意：**在此示例中，由于锚点坐标生成不正确，因此只有 0、90、180 和 -90 度的变换动画 100% 正确。看起来解决方案在于`CGPointApplyAffineTransform(<#CGPoint point#>, <#CGAffineTransform t#>)`，但我也没有像我希望的那样有太多时间玩它。无论哪种方式，这应该足以让您开始繁殖。

不过，这确实激发了我的兴趣，当我有机会再次研究这个问题时，我很乐意用任何新信息更新这篇文章。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T07:09:31.867

我认为如果您在 CALayer 上绘制文本会有所帮助。一个可以帮助解决这个问题的库是：[https](https://github.com/ZaBlanc/CanvasKit) ://github.com/ZaBlanc/CanvasKit 在新的 CALayer 上绘制动画的下一步并转换为它。您可以使用此库链接所需的动画：[https](https://github.com/yangmeyer/CPAnimationSequence) ://github.com/yangmeyer/CPAnimationSequence或此库：[https ://github.com/clayallsopp/Walt](https://github.com/clayallsopp/Walt)

# autocomplete - 使用 GlazedLists 自动完成

> ID：15210771
> 
> 赞同：0
> 
> 时间：2013-03-04T20:43:36.387
> 
> 标签：autocomplete, glazedlists, invokeandwait

我正在使用 glazedlists 进行自动完成，但我想在这一点上问一些问题。我有一个用于好友列表的数组列表。可以通过单击添加或删除按钮将人员添加到好友列表或从好友列表中删除。好友列表的数据写入friend.txt，并通过使用Gson和Json从friend.txt中读取。当用户将一个人添加到列表中或从列表中删除一个人时，选定的人将从中删除或添加到friend.txt。

```
 ...
  Object[] elements = new Object[holdSizeValue];

  for( int i = 0 ; i < holdSizeValue ; i++ ){
        elements[i] = sendFriendNameFromList(i);
  }

  searchBox = new JComboBox<Object>();

  final EventList<Object> eventList = GlazedLists.eventList(Arrays.asList(elements));

  SwingUtilities.invokeAndWait(new Runnable() {

      @Override
      public void run() {
          AutoCompleteSupport.install(searchBox, eventList);
      }
  });
  ... 
```

正如您可能从代码中理解的那样，我使用 glazedlist 进行搜索操作。我想更新元素 []。我该如何更新？当我从添加或删除按钮的控制器调用包含上述代码的方法时，我得到一个关于invokeAndWait的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:14:35.587

EventList 的主要优点是，一旦它被初始化，您只需向它添加对象以及观察该数据的所有内容，例如，由于 GlazedLists 提供的所有管道，ComboBox 将神奇地更新。

因此，将 移动为`EventList`实例变量：

```
private EventList<Object> eventList = new BasicList<Object>(); 
```

`searchBox`在创建和设置后执行 AutoCompleteSupport 一次。

然后，当您需要添加项目时调用`eventList.addAll(...)`. 不要重新实例化该列表，也不要在每次要进行更新时重新实例化 searchBox。使用事件列表添加/删除，其余的将自动跟随。

# jquery - 平滑 Div 滚动 Chrome 问题

> ID：15210772
> 
> 赞同：0
> 
> 时间：2013-03-04T20:43:38.797
> 
> 标签：jquery, google-chrome, html, scroll, smooth-scrolling

我正在使用这个插件： [http ://www.smoothdivscroll.com/](http://www.smoothdivscroll.com/)

当页面以 chrome 加载时，我遇到了自动滚动工作的问题。它会在 Firefox、IE 和 Safari 中自动滚动，但我无法让它在加载 Google Chrome 时滚动。任何建议将不胜感激！

这是我正在构建的页面的链接： [http ://www.gerardtonti.com/ArtExpo/index.html](http://www.gerardtonti.com/ArtExpo/index.html)

谢谢！

格里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T18:55:08.057

我对 Chrome 也有同样的问题，我唯一发现的是 Chrome 对使用 autoScrollingStep=1 选项一次滚动 1 个像素并不感到兴奋。

因此，我增加了像素步长，并减慢了间隔。问题是它现在在 Chrome 中并不完全“平滑”。

```
 $(document).ready(function () {
        // Initialization
        $("div#makeMeScrollable").smoothDivScroll({
            autoScrollingMode: "onStart",
            autoScrollingDirection: "endlessLoopRight",
            autoScrollingStep: 3,   // anything less than 3 in Chrome doesn't work
            autoScrollingInterval:20 // default is 10ms, increase so it looks like you want. 

        });
    }); 
```

也许 tkhan 会带来更好的信息。

# c++ - 来自设备纹理阵列的 NVIDIA CUDA 视频编码器 (NVCUVENC) 输入

> ID：15210776
> 
> 赞同：19
> 
> 时间：2013-03-04T20:44:04.100
> 
> 标签：c++, cuda, gpgpu

我正在修改SDK 示例包中的[CUDA 视频编码器](https://developer.nvidia.com/nvidia-codec-libraries)(NVCUVENC) 编码示例，以便数据不是来自外部 yuv 文件（如示例中所做的那样），而是来自从纹理填充的 cudaArray。

因此，对帧进行编码的关键 API 方法是：

```
int NVENCAPI NVEncodeFrame(NVEncoder hNVEncoder, NVVE_EncodeFrameParams *pFrmIn, unsigned long flag, void *pData); 
```

如果我做对了参数：

```
CUdeviceptr dptr_VideoFrame 
```

应该将数据传递给编码。但我真的不明白如何将它与 GPU 上的一些纹理数据连接起来。示例源代码非常模糊，因为它适用于 CPU yuv 文件输入。

例如在 main.cpp 中，第 555 -560 行有以下块：

```
 // If dptrVideoFrame is NULL, then we assume that frames come from system memory, otherwise it comes from GPU memory
    // VideoEncoder.cpp, EncodeFrame() will automatically copy it to GPU Device memory, if GPU device input is specified
    if (pCudaEncoder->EncodeFrame(efparams, dptrVideoFrame, cuCtxLock) == false)
    {
        printf("\nEncodeFrame() failed to encode frame\n");
    } 
```

**因此，从评论看来， dptrVideoFrame**似乎应该填充来自设备的 yuv 数据以对帧进行编码。但是没有地方解释如何这样做。

**更新：**

我想分享一些发现。首先，我设法从帧缓冲区纹理中编码数据。现在的问题是输出视频一团糟。 ![在此处输入图像描述](../Images/0a0e879ad477298397256fc491d4773f.png)

这是期望的结果：

![在此处输入图像描述](../Images/dbc8dc660cc610c71b44c935af63dcb2.png)

这是我所做的：

在 OpenGL 方面，我有 2 个自定义 FBO——首先将场景正常渲染到其中。然后，来自第一个 FBO 的纹理用于将屏幕四边形渲染到第二个 FBO 中，在片段着色器中进行 RGB -> YUV 转换。

然后将附加到第二个 FBO 的纹理映射到 CUDA 资源。然后我像这样编码当前纹理：

```
void CUDAEncoder::Encode(){
    NVVE_EncodeFrameParams      efparams;
    efparams.Height           = sEncoderParams.iOutputSize[1];
    efparams.Width            = sEncoderParams.iOutputSize[0];
    efparams.Pitch            = (sEncoderParams.nDeviceMemPitch ? sEncoderParams.nDeviceMemPitch : sEncoderParams.iOutputSize[0]);
    efparams.PictureStruc     = (NVVE_PicStruct)sEncoderParams.iPictureType;
    efparams.SurfFmt          = (NVVE_SurfaceFormat)sEncoderParams.iSurfaceFormat;
    efparams.progressiveFrame = (sEncoderParams.iSurfaceFormat == 3) ? 1 : 0;
    efparams.repeatFirstField = 0;
    efparams.topfieldfirst    = (sEncoderParams.iSurfaceFormat == 1) ? 1 : 0;

    if(_curFrame > _framesTotal){
        efparams.bLast=1;
    }else{
        efparams.bLast=0;
    }

    //----------- get cuda array from the texture resource  -------------//

    checkCudaErrorsDrv(cuGraphicsMapResources(1,&_cutexResource,NULL));
      checkCudaErrorsDrv(cuGraphicsSubResourceGetMappedArray(&_cutexArray,_cutexResource,0,0));
    /////////// copy data into dptrvideo frame //////////

    // LUMA  based on CUDA SDK sample//////////////
    CUDA_MEMCPY2D pcopy;
    memset((void *)&pcopy, 0, sizeof(pcopy));
    pcopy.srcXInBytes          = 0;
    pcopy.srcY                 = 0;
    pcopy.srcHost=            NULL;
    pcopy.srcDevice=           0;
    pcopy.srcPitch             =efparams.Width;
    pcopy.srcArray=          _cutexArray;///SOME DEVICE ARRAY!!!!!!!!!!!!! <--------- to figure out how to fill this.

    /// destination  //////
    pcopy.dstXInBytes          = 0;
    pcopy.dstY                 = 0;
    pcopy.dstHost              = 0;
    pcopy.dstArray             = 0;
    pcopy.dstDevice=dptrVideoFrame;
    pcopy.dstPitch  = sEncoderParams.nDeviceMemPitch;

    pcopy.WidthInBytes   = sEncoderParams.iInputSize[0];
    pcopy.Height         = sEncoderParams.iInputSize[1];

    pcopy.srcMemoryType=CU_MEMORYTYPE_ARRAY;
    pcopy.dstMemoryType=CU_MEMORYTYPE_DEVICE;

    // CHROMA   based on CUDA SDK sample/////

    CUDA_MEMCPY2D pcChroma;
    memset((void *)&pcChroma, 0, sizeof(pcChroma));
    pcChroma.srcXInBytes        = 0;
    pcChroma.srcY               = 0;// if I uncomment this line I get error from cuda for incorrect value.It does work in CUDA SDK original sample SAMPLE//sEncoderParams.iInputSize[1] << 1; // U/V chroma offset
    pcChroma.srcHost            = NULL;
    pcChroma.srcDevice          = 0;
    pcChroma.srcArray           = _cutexArray;
    pcChroma.srcPitch           = efparams.Width >> 1; // chroma is subsampled by 2 (but it has U/V are next to each other)

    pcChroma.dstXInBytes        = 0;
    pcChroma.dstY               = sEncoderParams.iInputSize[1] << 1; // chroma offset (srcY*srcPitch now points to the chroma planes)

    pcChroma.dstHost            = 0;
    pcChroma.dstDevice          = dptrVideoFrame;
    pcChroma.dstArray           = 0;
    pcChroma.dstPitch           = sEncoderParams.nDeviceMemPitch >> 1;

    pcChroma.WidthInBytes       = sEncoderParams.iInputSize[0] >> 1;
    pcChroma.Height             = sEncoderParams.iInputSize[1]; // U/V are sent together

    pcChroma.srcMemoryType      = CU_MEMORYTYPE_ARRAY;
    pcChroma.dstMemoryType      = CU_MEMORYTYPE_DEVICE;

    checkCudaErrorsDrv(cuvidCtxLock(cuCtxLock, 0));

    checkCudaErrorsDrv( cuMemcpy2D(&pcopy));
    checkCudaErrorsDrv( cuMemcpy2D(&pcChroma));
    checkCudaErrorsDrv(cuvidCtxUnlock(cuCtxLock, 0));
    //=============================================

    // If dptrVideoFrame is NULL, then we assume that frames come from system memory, otherwise it comes from GPU memory
    // VideoEncoder.cpp, EncodeFrame() will automatically copy it to GPU Device memory, if GPU device input is specified
    if (_encoder->EncodeFrame(efparams, dptrVideoFrame, cuCtxLock) == false)
    {
        printf("\nEncodeFrame() failed to encode frame\n");
    }
    checkCudaErrorsDrv(cuGraphicsUnmapResources(1, &_cutexResource, NULL));
    //  computeFPS();

    if(_curFrame > _framesTotal){
        _encoder->Stop();
        exit(0);
    }
    _curFrame++;

} 
```

我从 CUDA SDK 编码器示例中包含的 .cfg 文件中设置了编码器参数。所以在这里我使用 704x480-h264.cfg 设置。我尝试了所有这些，并且总是得到同样丑陋的结果。

我怀疑问题出在 CUDA_MEMCPY2D 中，用于亮度和色度对象参数设置。可能是错误的间距、宽度、高度尺寸。我将视口设置为与视频 (704,480) 相同的大小，并将参数与 CUDA SDK 示例中使用的参数进行比较，但是不知道问题出在哪里。任何人 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:48:08.463

首先：我搞砸了 Cuda Video Encoder，遇到了很多麻烦。但在我看来，好像您将其转换为 Yuv 值，但作为一对一的像素转换（如 AYUV 4:4:4）。Afaik 您需要具有填充和压缩的正确类型的 YUV（多个像素的颜色值，例如 4:2:0）。可以在这里看到 YUV 对齐的一个很好的概述：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd206750(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd206750(v=vs.85).aspx)

据我记得你必须对 Cuda 编码器使用 NV12 对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T09:36:07.297

nvEncoder 应用程序用于编解码器转换，用于通过 GPU 处理其使用的 cuda 并与使用 nvEncoder 的 API 的硬件通信。在此应用程序逻辑中，读取输入缓冲区中的 yuv 数据并将该内容存储在内存中，然后开始对帧进行编码。并将编码帧并行写入输出文件。

输入缓冲区的处理在 nvRead 函数中可用，它在 nvFileIO.h 中可用

任何其他需要的帮助在这里留言...

# ruby-on-rails - 未定义的方法“rails_admin_controller？” 对于任何控制器

> ID：15210784
> 
> 赞同：1
> 
> 时间：2013-03-04T20:44:29.083
> 
> 标签：ruby-on-rails, rails-admin

我已经放入`check_authorization unless: :rails_admin_controller?`ApplicationController*并*得到**NoMethodError** :`undefined method 'rails_admin_controller?'`对于任何控制器。

我已经设置了 RailsAdmin。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:53:51.977

您需要自己定义 rails_admin_controller 方法。

```
check_authorization unless: :rails_admin_controller?
private
def rails_admin_controller?
  self < RailsAdminController
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T16:40:52.150

如果有人仍然需要这个，我通过以下方式解决了它：

```
check_authorization :unless => is_a?(RailsAdmin::MainController) 
```

# spring-mvc - Spring Form隐藏值在提交时丢失

> ID：15210788
> 
> 赞同：0
> 
> 时间：2013-03-04T20:44:48.967
> 
> 标签：spring-mvc, jstl, modelattribute

在我的“更新用户”页面上，我有一个隐藏字段来保存正在编辑的当前用户的 ID。我已经检查了 HTML 源并且值正确填充。但是，当我提交表单时，用户 ID 值始终为 0，而其他所有字段都正确通过。

- 我尝试将类型设置为 form:input 并提交它，在控制器端仍然为 0。
- 没有绑定结果错误。
-页面 URL：/admin/update-user.html?uid=3（我尝试将 URL 变量从 uid 更改为 userID，没有区别。）

那么到底是怎么回事？！我错过了一些明显的东西吗？

**JSTL**

```
<form:form commandName="user" method="POST">
<form:hidden path="userID"/>
<table width="400" cellpadding="3" cellspacing="0" border="0" class="datatable">
    <tr>
        <td>User ID #</td>
        <td>${user.userID}</td>
    </tr>
    <tr>
        <td valign="top">Password</td>
        <td>****<br /><a href="change-password.html?uid=${user.userID}">Change Password</a></td>
    </tr>
    <tr>
        <td>First Name</td>
        <td><form:input path="firstName" /></td>
    </tr>
    <tr>
        <td>Last Name</td>
        <td><form:input path="lastName" /></td>
    </tr>
    <tr>
        <td>Gender: </td>
        <td>
            <form:select path="gender">
                <form:option value="Male" label="Male" />
                <form:option value="Female" label="Female" />
            </form:select>
        </td>
    </tr>
    <tr>
        <td>Birthday: </td>
        <td><form:input path="birthday" id="datepickerpast" readonly="true" /></td>
    </tr>
    <tr>
        <td>Email</td>
        <td><form:input path="email" /></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td><input type="submit" value="Update" /> <input type="reset"></td>
    </tr>
</table>
</form:form> 
```

**控制器**

```
@RequestMapping(value = "admin/update-user", method = RequestMethod.POST)
public String processUpdateUser(ModelMap model, @ModelAttribute("user") User user, BindingResult result) throws SQLException {
    if (result.hasErrors()) {
        model.addAttribute("user", user);
        model.addAttribute("pagetitle", "Admin - Update User Details");
        return "admin/users/update-user";
    } else {
        userDao.updateUser(user);
        return "redirect:/admin/user-management.html";
    }
} 
```

**具有适当 getter/setter 的对象属性**

```
private int userID;
private String firstName;
private String lastName;
private String username;
private String email;
private Date birthday;
private String gender; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:22:17.563

意识到我的 getter 是 Integer 类型，但我的 setter 和属性是 int 类型。将它们全部设为整数，并且有效。如果有人可以解释为什么编译时没有错误或者为什么它没有按原样工作，那将不胜感激。

叹息，我的生命只有三个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:00:34.907

由于[autoboxing](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)导致编译器错误，它允许将原语自动转换为其包装类替代方案。至于为什么当 getter 使用 Integer 时它不起作用，我无法帮助你。

# regex - 用于匹配和目标的 URL 重定向插件正则表达式输入

> ID：15210790
> 
> 赞同：3
> 
> 时间：2013-03-04T20:44:59.153
> 
> 标签：regex, wordpress

我有点惊慌，如果我解释得不够好，很抱歉。

1.  我已经处理了固定链接重组经历的噩梦
2.  旧永久链接 = 站点名称/存档/postid
3.  所需的新 = 站点名称/邮件名称

尝试了一切似乎。我什至涉足 /?p=$1 （<-----那是胡说八道！）。但是现在当我转到旧的永久链接结构时，我遇到了一些疯狂的错误：

> 哎呀！谷歌浏览器无法连接到 0.0.37.89 建议：尝试重新加载：0.0.37.89

这应该是“重定向”的。我放弃。请帮忙。

网站名称=brightontheday.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:20:39.840

I used the redirection plugin to redirect all old URL permalinks (/archives/postID) to the new permalink (/postID/postname)

also, the issue appeared to be due to cashing via cloudfare. It's important to to note that one should put cloudfare in "developer mode" while making site wide changes.

# html - 向左和向右一个 div 到居中的 div

> ID：15210791
> 
> 赞同：-2
> 
> 时间：2013-03-04T20:45:02.150
> 
> 标签：html, css

您好，我正在使用 div 来显示居中的内容

```
 <div class="wrapper">
  <div class="container">
    <h1> content</h1>

  </div>
</div> 
```

使用以下 CSS：`

```
.wrapper 
{
    width:1000px;
    height:auto;
    position:relative;
    margin:10px auto;

}

.container
{
    width:70%;
    margin:auto;
    background:#fff;
    float:left;

} 
```

现在我想在居中 div 的左右边界放置两个具有固定高度和宽度的 div，并且我想保持类容器居中。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:48:42.940

`float:left`您可以使用和`float:right`在侧面（.wrapper 内部）设置 div定义两种样式，您应该考虑`float:left`从 .container 类中删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:58:07.367

1.  `<!Doctype html>`在您的 HTML 代码中声明`<!Doctype html><head></head><body></body></html>`
2.  你新的 CSS：

    `.wrapper { width:100%; min-height:200px; margin:10px; }`

    `.container { width:70%; margin: 0 auto; background:#fff; }`

并准备好了。

我创建了这个例子`jsfiddle.net/8D7Yd`

Saludos rebocano.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:00:43.387

你真的应该重写你的问题。如果这是你想要的：http: [//jsfiddle.net/](http://jsfiddle.net/)

# structure - Strlen 成一个结构

> ID：15210793
> 
> 赞同：0
> 
> 时间：2013-03-04T20:45:04.597
> 
> 标签：structure, strlen

您好，我正在尝试在结构中使用 strlen 函数，但我失败了。我的代码是这样的：在 scanf 之后，我只得到表的第一个字符，而在最后一个 print f 中，程序崩溃了。任何建议或想法我做错了什么？主要是用户将用字母数字和 strlen 填充表格，我想提取字母数字的长度。

```
#include<stdio.h>
#include <string.h>

main(void)
{
int M,N;

struct word_pair /*structure  */
    {
    char word[M]; // the alphanumeric
    int lenght; //the lenght of alphanumeric
    };
struct word_pair word_table[N]; // the table of alphanumeric and lenght

printf("Enter a frase:");
 scanf("%c",&word_table[N].word[M]);
 printf("\n Your frase is %c ",word_table[N].word[M]);
printf("\n %u ",(unsigned)strlen(word_table[N].word[M]));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:52:43.087

你声明了一个 of 的数组`word_pair`，但你只`struct`在数组中使用了一个，并且你将它存储在一个无效的位置（`N`）中。考虑到当您声明一个长度数组时，`n`例如数组`int a[n];`内的有效位置是 from `0`to `n - 1`。

您必须首先将变量初始化为您需要的任何值`N`。`M`之后，尝试（假设`N > 0`和`M > 0`）：

```
scanf("%c",&word_table[0].word[0]);
printf("\n Your frase is %c ",word_table[0].word[0]);
printf("\n %u ",(unsigned)strlen(word_table[0].word[0])); 
```

# android - 在android编程中使用spinner的switch case语句来显示图像

> ID：15210795
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:45:13.897
> 
> 标签：android, switch-statement, spinner, case

我有一个包含景点列表的微调器。我想使用 switch case 语句来根据用户选择的吸引力来更改显示的图像。

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.attractions_layout);

    ArrayAdapter<String> attractionsAdapter = new ArrayAdapter<String> (Attractions.this, android.R.layout.simple_spinner_item, attractionEntries);

    attractionsSpinner = (Spinner) findViewById (R.id.spinnerAttractions);
    attractionsSpinner.setAdapter(attractionsAdapter);
    attractionsSpinner.setOnItemSelectedListener(this);

}
    @Override
    public void onItemSelected(AdapterView<?> parent,View view, int position, long id) {
        // TODO Auto-generated method stub
        int pos = attractionsSpinner.getSelectedItemPosition();
        ImageView imageView = (ImageView) findViewById(R.id.imageViewAttraction);
        String[] information = getResources().getStringArray(R.array.attractions_information_collection);

        switch (position)
        {
        case 0:
            image = R.drawable.avenue_of_stars;
            imageView.setImageResource(image);

            break;
        case 1:
            image = R.drawable.disneyland_fountain;
            imageView.setImageResource(image);

            break;  
        }
    } 
```

我收到一条错误消息，提示“无法将图像解析为变量”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T20:53:13.600

您没有为`image`. 在你开始开关之前声明它

```
int image = 0;
switch (position)
    {
    case 0:
        image = R.drawable.avenue_of_stars;
        imageView.setImageResource(R.drawable.avenue_of_stars;);

        break;
    case 1:
        image = R.drawable.disneyland_fountain;
        imageView.setImageResource(R.drawable.disneyland_fountain);

        break;  
    }
} 
```

或者只使用值`setImageResource()`

```
 switch (position)
    {
    case 0:
        imageView.setImageResource(R.drawable.avenue_of_stars;);

        break;
    case 1:
        imageView.setImageResource(R.drawable.disneyland_fountain);

        break;  
    }
} 
```

或简化它

```
int image = 0;
  switch (position)
    {
    case 0:
        image = R.drawable.avenue_of_stars;
        break;
    case 1:
        image = R.drawable.disneyland_fountain;
        break;  
    }
 imageView.setImageResource(R.drawable.disneyland_fountain);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:52:13.057

错误消息告诉您您没有声明一个名为“image”的变量，因此当您使用该词时它不知道您要做什么。

将您的代码更改为如下所示：

```
private int image = -1; // <-- you have to declare a variable to be able to use it (in java).
private imageView; // <-- declare this ImageView up here too, while your at it.

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.attractions_layout);
    imageView = (ImageView) findViewById(R.id.imageViewAttraction); //Move findViewById() to here, calling it more than once is wasteful.
    ArrayAdapter<String> attractionsAdapter = new ArrayAdapter<String> (Attractions.this, android.R.layout.simple_spinner_item, attractionEntries);

    attractionsSpinner = (Spinner) findViewById (R.id.spinnerAttractions);
    attractionsSpinner.setAdapter(attractionsAdapter);
    attractionsSpinner.setOnItemSelectedListener(this);

}
    @Override
    public void onItemSelected(AdapterView<?> parent,View view, int position, long id) {
        // TODO Auto-generated method stub
        int pos = attractionsSpinner.getSelectedItemPosition();
        String[] information = getResources().getStringArray(R.array.attractions_information_collection);
        switch (position)
        {
        case 0:
            image = R.drawable.avenue_of_stars;
            imageView.setImageResource(image);

            break;
        case 1:
            image = R.drawable.disneyland_fountain;
            imageView.setImageResource(image);

            break;  
        }
    } 
```

您必须声明一个调用的 int`image`才能将 id 存储到其中。

另请注意，`findViewById()`每次用户选择某些内容时调用以获取对您的图像视图的引用是浪费的，您应该在内部获取引用`onCreate()`，然后在每次后续调用时使用该引用`setImageResource()`

最后一个提示：您似乎缺乏对 Java 编程和语法的一些基础知识的掌握。我强烈建议您现在花点时间回去做一些工作，让您在深入了解一个复杂的 Android 项目之前更好地熟悉 Java 语言。这样做会让你的生活更轻松=）。

# sql - 查询分析器工具，专门用于 Derby SQL

> ID：15210799
> 
> 赞同：1
> 
> 时间：2013-03-04T20:45:30.833
> 
> 标签：sql, derby

我看过一些关于[RazorSQL的信息](http://www.razorsql.com/)作为 Derby 查询分析器的信息。还有其他的吗？我正在寻找理想的开源，或者具有廉价许可证的东西，以便我可以实施。

我也在考虑自己建。我主要需要一个 GUI 来构建简单的报告。但我确信这是一项艰巨的任务。

有谁知道一个工具，或者他们可以推荐一些阅读以更好地理解一个工具可能需要什么？

我目前的方法涉及查询 SYS 表以获取模式，然后在 JTables 中以图形方式表示它们。每个表都在一个选项卡上，您可以将表添加到视图中，然后创建报告。它有点笨拙。

如果这个问题太宽泛，我会删除。

# javascript - 需要相机叠加（半透明）图片 HowTo

> ID：15210801
> 
> 赞同：0
> 
> 时间：2013-03-04T20:45:37.127
> 
> 标签：javascript, iphone, ios, flash, air

如果您知道任何好的起点来学习如何使用 Adob​​e Flash 为 iPhone 应用程序甚至 Air 应用程序创建这种效果，那将会有很大帮助。

具体来说，我希望它不保存叠加层，仅在用户从相机拍摄图像时显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:57:05.303

这是一个很好的链接到相机类，应该让你开始。 [http://help.adobe.com/en_US/as3/dev/WSfffb011ac560372f3fa68e8912e3ab6b8cb-8000.html](http://help.adobe.com/en_US/as3/dev/WSfffb011ac560372f3fa68e8912e3ab6b8cb-8000.html)

然后，您可以在视频/相机对象的顶部添加大多数对象，以获得您想要的透明外观。

# algorithm - 加密文本 - 从哪里开始

> ID：15210804
> 
> 赞同：-3
> 
> 时间：2013-03-04T20:45:45.173
> 
> 标签：algorithm, encryption

所以我有一个需要解密的加密文本，我从哪里开始，是否有一个程序可以自动识别算法？这是我需要解密的片段：

```
e302446c4b62c02dc77b3c896ef385c64244a83bd6702b215882d3f1b599ff69 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:57:46.267

加密文本旨在模拟随机数。密码算法是专门为阻止你做你想做的事而设计的。

# r - R和ggplot2：随着时间的推移制作三个分类变量的值总和的折线图

> ID：15210805
> 
> 赞同：3
> 
> 时间：2013-03-04T20:45:47.157
> 
> 标签：r, ggplot2

我试图弄清楚如何做某事，`ggplot2`这`R`似乎应该**很**简单。这太简单了……我一生都无法弄清楚如何去做。我*确定*答案在 ggplot 文档中正盯着我看，但我无法……找到它。所以。我在这。

我经常有很多这样的数据集：

```
tdf <- data.frame('datetime' = seq(from=as.POSIXct('2012-01-01 00:00:00'), 
             to=as.POSIXct('2012-01-31 23:59:59'), by=1))
tdf$variable <- rep(c('a','b','c'), length.out=length(tdf$datetime))
tdf$value <- sample(1:10, length(tdf$datetime), replace=T)
> head(tdf)
             datetime variable value
1 2012-01-01 00:00:00        a     7
2 2012-01-01 00:00:01        b     3
3 2012-01-01 00:00:02        c     7
4 2012-01-01 00:00:03        a     8
5 2012-01-01 00:00:04        b     2
6 2012-01-01 00:00:05        c     3 
```

也就是说：我有一个分类变量（一个因子）、一个该变量的值以及记录所述观察的时间戳。我想为给定时间“桶”绘制每个分类变量的值的总和 - 最好使用`ggplot2`. 我想这样做，而不必在可视化之前预先聚合它——也就是说，我真的想要保持数据集不变并传递参数以`ggplot2`按时聚合它的灵活性。然而，我*完全*糊涂了。上的文档`geom_line`说用来`stat='identity'`获取价值的总和，但是一旦我这样做了，我就不能再定义任何类型的 bin。如果我使用`stat_summary`，我经常根本不会得到情节。我得到的最接近的是：

```
tdf$variable <- factor(tdf$variable)

vis <- ggplot(tdf, aes(x=datetime, y=value, color=variable))
vis <- vis + geom_line(stat='identity')
vis <- vis + scale_x_datetime() 
```

...至少打印一个图，其中一行对应于每个因子的值...按秒。如果不做大量工作来预先聚合数据，我就无法`bin`在`sum(value)`一个小时、一天或一周内将其用于操作。

帮助？

**编辑**：向任何 R 会话因该测试数据而窒息的人表示歉意。我已经把它剪回来了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T22:16:46.067

好吧，我想这就是你想要的。我已经大大减少了您的数据集，发布的数据集对于测试这些东西来说太大了。

```
tdf <- data.frame('datetime' = seq(from=as.POSIXct('2012-01-01 00:00:00'), to=as.POSIXct('2012-01-01 00:10:59'), by=1))
tdf$variable <- rep(c('a','b','c'), length.out=length(tdf$datetime))
tdf$value <- sample(1:10, length(tdf$datetime), replace=T)
tdf$variable <- factor(tdf$variable)

vis2 <- ggplot(tdf, aes(datetime, color=variable)) + 
geom_bar(binwidth=5,aes(weight=value),position="dodge") + 
scale_x_datetime(limits=c(min(tdf$datetime), max(tdf$datetime))) 
```

`geom_bar`使用`stat_bin`，因此您可以更改您的垃圾箱。默认情况下，它会获取计数，但如果你想要总和，你可以`weight`在`aes()`. 让我知道这是否没有回答您的问题。

顺便说一句，通过设置这个特定数据的方式，使用类似的东西来分离你的变量可能是有意义的`facet`，即：

```
vis2 <- ggplot(tdf, aes(datetime, fill=variable)) + 
geom_bar(binwidth=100,aes(weight=value),position="dodge") + 
scale_x_datetime(limits=c(min(tdf$datetime), max(tdf$datetime))) + 
facet_wrap(~variable) 
```

否则，看起来变量可能跨越不同的时间段。

# .net - 如何在 PowerShell 中使用 DTE？

> ID：15210806
> 
> 赞同：14
> 
> 时间：2013-03-04T20:45:50.073
> 
> 标签：.net, powershell, envdte

我正在尝试使用 PowerShell 来自动化创建基于种子（想想 EDMX 文件或 DbContext）配置的 n 层解决方案的过程。我希望能够打开一个框架解决方案，获取活动实例，并使用自动生成的代码填充项目文件。

我正在尝试将[此处](http://msdn.microsoft.com/en-us/library/vstudio/68shb4dw.aspx)提供的示例转码为 powershell，但是，我遇到了错误。

这是我正在测试的 PowerShell 代码：

首先，我执行一个小函数来引用 DTE 程序集。

```
$libs = "envdte.dll", "envdte80.dll", "envdte90.dll", "envdte100.dll"
function LoadDTELibs {
    param(
        $path = "\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies"
    )

    Process {
        $libs |
            ForEach {
                $dll = Join-Path "$env:ProgramFiles\$path" $_

                if(-not (Test-Path $dll)) {
                    $dll = Join-Path "${env:ProgramFiles(x86)}\$path" $_
                }

                Add-Type -Path $dll -PassThru | Where {$_.IsPublic -and $_.BaseType} | Sort Name
            }
    }
}

LoadDTELibs 
```

然后，我尝试创建一个对象来引用调用的结果`[System.Runtime.InteropServices.Marshal]::GetActiveObject("VisualStudio.DTE.11.0")`

```
PS> $dte = New-Object -ComObject EnvDTE80.DTE2

New-Object : Retrieving the COM class factory for component with CLSID {00000000-0000-0000-0000-000000000000} failed due to the following error: 80040154 
Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
At line:1 char:8
+ $dte = New-Object -ComObject EnvDTE80.DTE2
+        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ResourceUnavailable: (:) [New-Object], COMException
    + FullyQualifiedErrorId : NoCOMClassIdentified,Microsoft.PowerShell.Commands.NewObjectCommand 
```

或者：

```
PS> $dte = New-Object EnvDTE80.DTE2

New-Object : Constructor not found. Cannot find an appropriate constructor for type EnvDTE80.DTE2.
At line:1 char:8
+ $dte = New-Object EnvDTE80.DTE2
+        ~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (:) [New-Object], PSArgumentException
    + FullyQualifiedErrorId : CannotFindAppropriateCtor,Microsoft.PowerShell.Commands.NewObjectCommand 
```

最后，这也不起作用：

```
PS> [EnvDTE80.DTE2]$dte = [System.Runtime.InteropServices.Marshal]::GetActiveObject("VisualStudio.DTE.11.0")

Cannot convert the "System.__ComObject" value of type "System.__ComObject#{04a72314-32e9-48e2-9b87-a63603454f3e}" to type "EnvDTE80.DTE2".
At line:1 char:1
+ [EnvDTE80.DTE2]$dte = [System.Runtime.InteropServices.Marshal]::GetActiveObject( ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : MetadataError: (:) [], ArgumentTransformationMetadataException
    + FullyQualifiedErrorId : RuntimeException 
```

所以，我的问题是，你如何使用 PowerShell 中的 DTE？更具体地说，如何将调用 GetActiveObject 的结果转换为类型 EnvDTE.DTE2？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T00:03:26.070

通过在 ISE 中使用这个想法一段时间，我找到了一个简单的答案。

基本上，对 GetActiveObject 的调用返回一个 COM 对象，可以直接在 PowerShell 中使用。执行 LoadDTELibs 后，可以通过调用 GetActiveObject 获取 DTE 的实例，然后直接引用结果。

所以...

```
PS> $dte = [System.Runtime.InteropServices.Marshal]::GetActiveObject("VisualStudio.DTE.11.0") 
```

然后：

```
PS> $dte.solution.Create("D:\Testing", "Acme.sln")
PS> $dte.solution.SaveAs("D:\Testing\Acme.sln") 
```

我不是 100% 确定，因为我不太了解 PowerShell 或 COM，但我认为您不必担心释放 COM 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-20T15:07:46.717

对于 VS 2017，如下所示：

```
$dte = [System.Runtime.InteropServices.Marshal]::GetActiveObject("VisualStudio.DTE.15.0") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-26T21:53:35.477

运行 Visual Studio 2019，我已经能够使用“VisualStudio.DTE”COM 接口（没有版本）启动调试器：

```
#Get the ProcessID from an AppPool's worker process: 
[int] $ProcessId = ([xml] (& "$env:SystemRoot\system32\inetsrv\appcmd.exe" list wp /xml /apppool.name:"DefaultAppPool")).appcmd.WP."WP.NAME"

# Start the debugger, attached to that ProcessID
[Runtime.InteropServices.Marshal]::GetActiveObject('VisualStudio.DTE').Debugger.LocalProcesses | 
       ? {$_.ProcessID -eq $ProcessId} | %{$_.Attach()} 
```

以前需要指定版本。

# python - 如何更改 Tornado 的日志记录格式

> ID：15210809
> 
> 赞同：4
> 
> 时间：2013-03-04T20:46:04.093
> 
> 标签：python, logging, tornado

我有一个我喜欢的日志记录格式和目标，使用 logging.basicConfig 设置。我开始在我的应用程序中使用 Tornado WebSockets，现在我使用 logging.basicConfig 设置的格式和目标被忽略了。我所有的日志消息都被打印到标准输出（而不是我的目标日志文件），并且格式是 Tornado 的（而不是我自己的）。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-18T21:06:40.747

我尝试了一个解决方案来覆盖标准输出流级别的龙卷风记录器的默认格式（它似乎适用于所有三个：app_log、gen_log、access_log）：

```
import logging
from tornado.log import app_log, gen_log, access_log, LogFormatter

# define your new format, for instance :
my_log_format = '%(color)s::: %(levelname)s %(name)s %(asctime)s ::: %(module)s:%(lineno)d in %(funcName)s :::%(end_color)s\
                 \n %(message)s\n' 

# create an instance of tornado formatter, just overriding the 'fmt' arg
my_log_formatter = LogFormatter(fmt=my_log_format, color=True)

# get the parent logger of all tornado loggers :
root_logger     = logging.getLogger()

# set your format to root_logger
root_streamhandler = root_logger.handlers[0]
root_streamhandler.setFormatter(my_log_formatter) 
```

...然后当您使用任何龙卷风的日志记录流时，例如：

```
### let's say we log from your 'main.py' file in an '__init__' function : 

app_log.info('>>> this is app_log')
gen_log.info('>>> this is gen_log ')
access_log.info('>>> this is access_log ') 
```

...而不是默认的 stdout ：

```
[I 180318 21:14:35 main:211] >>> this is app_log 
[I 180318 21:14:35 main:212] >>> this is gen_log 
[I 180318 21:14:35 main:213] >>> this is access_log 
```

...您会获得具有自己格式的标准输出，例如：

```
::: INFO tornado.application 180318 21:14:44 ::: main:211 in __init__ :::                   
>>> this is app_log 

::: INFO tornado.general 180318 21:14:44 ::: main:212 in __init__ :::                               
>>> this is gen_log 

::: INFO tornado.access 180318 21:14:44 ::: main:213 in __init__ :::                                
 >>> this is access_log 
```

我知道这个解决方案不能直接回答您的 basicConfig 问题，但它可以帮助我猜......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:29:44.847

To direct your logging to your logfile run Tornado like this:

```
python app.py --log_file_prefix=mylog.log 
```

Update: As stated in the below comment this is probably a better way to setup your log files:

```
tornado.options.options['log_file_prefix'].set('mylog.log')
tornado.options.parse_command_line() 
```

# ssh - 通过安全 ssh 连接的 TCP 连接

> ID：15210811
> 
> 赞同：0
> 
> 时间：2013-03-04T20:46:17.733
> 
> 标签：ssh, jsch, channel

我正在尝试使用 JSCH 连接到远程服务器，然后从该服务器通过 tcp/ip 端口打开类似 telnet 的会话。说连接到服务器 A，一旦连接，就会通过另一个端口向服务器 B 发出 tcp 连接。在我的网络服务器日志中，我看到了一个 GET / 已记录但不是 GET /foo 正如我所期望的那样。我在这里想念什么？（我不需要使用端口转发，因为我连接的系统可以访问远程端口）

```
package com.tekmor;

import com.jcraft.jsch.*;

import java.io.BufferedReader;
.
.

public class Siranga {

     public static void main(String[] args){
        Siranga t=new Siranga();
           try{
               t.go();
           } catch(Exception ex){
               ex.printStackTrace();
        }
    }
    public void go() throws Exception{
        String host="hostXXX.com";
        String user="USER";
        String password="PASS";
        int port=22;

        Properties config = new Properties();
        config.put("StrictHostKeyChecking", "no");      

        String remoteHost="hostYYY.com";
        int remotePort=80;

       try { 
        JSch jsch=new JSch();
        Session session=jsch.getSession(user, host, port);
        session.setPassword(password);
        session.setConfig(config);
        session.connect();
        Channel channel=session.openChannel("direct-tcpip");  

        ((ChannelDirectTCPIP)channel).setHost(remoteHost);
        ((ChannelDirectTCPIP)channel).setPort(remotePort);

        String cmd = "GET /foo";

        InputStream in = channel.getInputStream();
        OutputStream out = channel.getOutputStream();

        channel.connect(10000);

        byte[] bytes = cmd.getBytes();          
        InputStream is = new ByteArrayInputStream(cmd.getBytes("UTF-8"));

        int numRead;

        while ( (numRead = is.read(bytes) ) >= 0) {
              out.write(bytes, 0, numRead);
              System.out.println(numRead);
        }

        out.flush();

        channel.disconnect();
        session.disconnect();

        System.out.println("foo");

       }
       catch (Exception e){
           e.printStackTrace();

       }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T00:12:10.947

再次阅读您的[HTTP 规范](https://www.rfc-editor.org/rfc/rfc2616)。请求标头应以空行结束。所以假设你没有更多的标题行，你至少应该在最后换行。（此处的换行表示 CRLF 组合。）

此外，请求行应在 URL 之后包含 HTTP 版本标识符。

因此，请尝试对您的程序进行此更改：

```
String command = "GET /foo HTTP/1.0\r\n\r\n"; 
```

作为提示：您可以使用[`setInputStream`方法](http://epaul.github.io/jsch-documentation/simple.javadoc/com/jcraft/jsch/ChannelDirectTCPIP.html#setInputStream%28java.io.InputStream%29). 另外，不要忘记从通道的输入流中读取结果。

# iis-7 - 无法启动 IIS 默认站点（版本 7）

> ID：15210814
> 
> 赞同：1
> 
> 时间：2013-03-04T20:46:27.093
> 
> 标签：iis-7, localhost

我正在我的本地机器（Windows 7）上开发，并使用 IIS 7。我通常通过右键单击站点来创建一个新网站 -> 添加新站点。然后通过指向物理文件来做通常的事情，我会停止所有其他我不需要的网站。然后我可以在端口 80 上运行该站点，而不会出现任何绑定冲突。

然后我最近开始做一些 ASP.NET 开发。当我从我的 VS 2010 发布到本地主机时，我可以运行该网站，一切都很好。然后我停止了该站点（asp.net），但我无法启动任何其他站点（甚至不是默认站点）。我不确定为什么。

我开始阅读有关应用程序池的信息，有人说要删除所有应用程序池。因此，我删除了所有应用程序池（默认应用程序池除外），还删除了所有网站（因为它们旁边有一个红色的 x）。

我现在无法启动默认站点，因为重新启动、启动和停止是灰色的。我找不到任何方法来重置 IIS 服务器。我收到的一个错误是；对象标识符不代表有效的对象 iis7

我真的不知道这意味着什么，当我搜索这个错误时，似乎很多人都遇到过这个错误，但在不同的上下文中。

有什么方法可以重置 IIS，以便我可以再次构建简单的网站？我需要卸载 IIS 并重新安装吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:49:26.783

卸载 IIS 并重新安装可能是完成此任务的最简单和最快的方法。

除此之外，请检查事件日志，看看您是否可以在那里找到任何线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T19:37:50.247

您需要确保站点数量与托管它们的应用程序池之间存在一对一的关系。如果它们是托管在 64 位服务器上的 32 位应用程序，则需要在要用于站点的应用程序池上启用此属性（将其设置为 True）。您需要运行：C:\inetpub\AdminScripts>cscript adsutil SET W3SVC/AppPools/Enable32bitapponWin64 1

.NET Framework 显然需要安装，但随后需要单独执行运行 ASP 安装命令的步骤（C:\Windows\Microsoft.NET\Framework\v2.0.xxxx\aspnet_regiis.exe -i）。如果已经存在，请重新安装它们 - 它可能出现故障/损坏。

毕竟，我注意到 IIS 7 使用了这个通用应用程序池身份帐户来运行应用程序池。我创建了一个服务帐户，授予该帐户管理员权限只是为了查看该站点是否可以运行，并将其作为“自定义帐户”添加到应用程序池中。我不再收到 HTTP 503 错误。该帐户应具有“作为服务登录”和“作为批处理作业登录”权限。如果它将使用模拟并输出到 SQL 数据库，则还需要“身份验证后模拟客户端”和“允许本地登录”权限（因此我喜欢先给它管理员权限以查看它是否有效） .

# javascript - 使用 jQuery 包含一个 JS 文件

> ID：15210815
> 
> 赞同：3
> 
> 时间：2013-03-04T20:46:37.897
> 
> 标签：javascript, jquery, include

实际上，我在使用 jQuery 包含 JS 文件时遇到了问题。我找到了很多来源，但没有人与我合作。我很确定js文件的路径是正确的。这是我的两次尝试：

第一个（我更喜欢）正在使用`<link>`（包括 CSS 文件），但它不适用于`<script>`标签。

```
 $('head').append('<script type="text/javascript" src="'+addon+'"></script>'); 
```

第二个是使用 get HTTP 请求。这是我的尝试：

```
 $.getScript(addon, function(){}); 
```

所以，问题是：第一个代码有什么问题？因为我以前用`<link>`标签试过它，而且效果很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T20:49:22.433

你有没有考虑过：

```
$('<script />', { type : 'text/javascript', src : addon}).appendTo('head'); 
```

这避免了必须手动转义`</script>`结束标记。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T20:49:11.307

您必须转义结束标记，`<\/script>`否则您会过早关闭脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T12:18:17.113

尝试`$.holdReady(true); $.getScript("sample.js", function() { $.holdReady(false); });`

这可以确保在触发 onready 对象之前完全加载您的 js，因此您可以确保动态包含的 js 的任何对象/函数都可用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T10:34:27.270

尝试

```
$.when(
    $.getScript( "sample.js" ),
    $.getScript( "simple.js" ),
    $.getScript( "jquery.js" ),
    $.Deferred(function( deferred ){
    $( deferred.resolve );
    })
    ).done(function(){
        //place your code here, the scripts are all loaded
}); 
```

# php - 在 Laravel 中注销后如何保持在同一页面上

> ID：15210822
> 
> 赞同：3
> 
> 时间：2013-03-04T20:47:09.640
> 
> 标签：php, login, laravel

正如问题标题所示，我想知道如何设置我的网站，以便用户在注销后留在同一页面上。**特别是，我想知道 Laravel 是否提供语法来执行此操作。**我希望在 Laravel 中使用*最佳实践*。

例如：

登录链接显示在每个页面的顶部。Bob 已登录并查看“关于”页面。Bob 点击“注销”。Bob 已注销并被重定向回 about 页面。

我认为这将是一个很好的方法，因为身份验证过滤器可以确定页面是否受到保护并相应地重定向。

如果您认为从可用性的角度来看这是不好的做法，我也很感兴趣。我见过的大多数示例都将注销功能重定向到主页。有什么理由不停留在同一页面上吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T22:03:17.150

死你试试：return Redirect::back(); 在您的注销路线/控制器中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:50:12.290

从可用性的角度来看，我认为在用户退出后将其返回到他们所在的页面是一个非常好的主意，前提是它不是受保护的页面。

它实际上很容易实现。您需要像这样制作注销链接：`example.com/logout?redir=about.html`.

现在，在登录用户后，检查是否`$_GET['redir']`存在，如果存在，将它们发送回该页面，其他将它们发送到主页。注销后，在重定向到同一页面之前，最好向他们显示另一个页面几秒钟，上面写着“您已注销”。

# javascript - EmberJS Uncaught TypeError: Object [object Object] has no method 'create'

> ID：15210823
> 
> 赞同：2
> 
> 时间：2013-03-04T20:47:15.910
> 
> 标签：javascript, ember.js

尝试使用带有小型 Rails 应用程序的 EmberJS 进行一些相对基本的客户端设置。到目前为止，我有两件事：

1.  发布一本书待售的表格（实际上还没有创建它）
2.  搜索书籍页面。（希望这也成为主页）。

第一个加载很好。当我单击应用程序模板中的链接时，表单会按预期加载。

但是第二个没有。当我单击链接查看搜索页面时，会弹出主题错误。这是我到目前为止的代码：

```
<script type="text/x-handlebars">
  <div class="nav">
    {{#linkTo "index_search"}}Home{{/linkTo}}
    {{#linkTo sale_records.new}}Post a book for sale{{/linkTo}}
  </div>
  <div class="container">
    {{outlet}}
  </div>
</script> 
```

Javascript：

```
// router.js
(function() {
  LocalBookFinder.Router.map(function() {
    this.resource("sale_records", { path: "/sale_records" }, function() {
      this.route('new');
    });
    this.route("index_search", { path: "/search" });
  });

  LocalBookFinder.NewSalesRecordRoute = Ember.Route.extend({
    model: function() {
      return new LocalBookFinder.SaleRecord();
    },
    setupController: function(controller, model) {

    }
  });

  LocalBookFinder.IndexSearchRoute = Ember.Route.extend({
    setupController: function(controller, model) {

    }
  });
}).call(this);

// controllers/search/index_search_controller.js
(function() {
  LocalBookFinder.IndexSearchController = Ember.ObjectController.extend({

  });
}).call(this);

// views/search/index_search_view.js

(function() {
  LocalBookFinder.IndexSearchView = Ember.View.create({
    templateName: "search/index"
  });
}).call(this); 
```

链接本身呈现良好。但是，一旦我单击它，我就会收到错误消息，并且什么也没有呈现。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:54:30.507

设置 IndexSearchView 时出错。它应该是 Ember.View.extend，而不是 Ember.View.create。

# c# - 有什么方法可以从此字符串中获取 DateTime 对象？

> ID：15210824
> 
> 赞同：-3
> 
> 时间：2013-03-04T20:47:16.193
> 
> 标签：c#, asp.net

有什么方法可以从以下位置获取 DateTime：

```
Mon Mar 04 2013 18:00:00 GMT-0500 (Eastern Standard Time) 
```

如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:41:18.780

您可以尝试解析日期时间。

```
datetime dt = new datetime("Mon Mar 04 2013 18:00:00"); 
```

或者

```
dt = DateTime.Parse("Mon Mar 04 2013 18:00:00"); 
```

如果它已经在一个字符串中。你可能想把它放在一个 try catch 中，因为如果它不起作用。

这些方法会给你一个新的 datetime 对象，你仍然可以操作它。

如果您想按特定顺序将其打印出来，则需要将其放在类似这样的位置。

```
dt.ToString("ddd MMM d yyyy HH:mm:ss")); 
```

如果您需要有关日期时间对象的更多说明，您可以随时查看

[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

或者

[如何创建一个 DateTime 对象？](https://stackoverflow.com/questions/5578931/how-to-create-a-datetime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:55:58.220

我不会太深入细节，但如果你知道那个字符串总是这样，你可以使用它来解析它

```
string[] inputString = myString.Split(' ') 
```

您可以获取其中的一部分，并将其格式化为已知的日期时间格式

```
string dateString = String.Format({0}:{1}:{2}, myString[0], myString[i], myString[j]); 
```

此时您可以使用

```
DateTime dt = DateTime.Parse(dateString) 
```

获取实际的日期时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:51:43.987

您正在寻找[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)或[TryParseExact](http://msdn.microsoft.com/en-us/library/ms131044.aspx)

像这样的东西......你可能不得不玩它，我没有测试过这个，但它给了你一个大致的想法，我想。

```
var str = "Mon Mar 04 2013 18:00:00 GMT-0500 (Eastern Standard Time)"
var date = DateTime.ParseExact("ddd MMM dd yyyy HH:mm:ss GMTzzzzz (Eastern Standard Time)", str); 
```

您可能必须在最后剪掉“（东部标准时间）”位。如果格式字符串从字符串更改为字符串，我不确定如何用格式字符串覆盖它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T20:49:14.803

使用内置的转换方法，应该可以得到

```
Convert.ToDateTime(dateStr); 
```

# wolfram-mathematica - 某些微分方程和 DSolve 的数学问题

> ID：15210825
> 
> 赞同：1
> 
> 时间：2013-03-04T20:47:22.807
> 
> 标签：wolfram-mathematica, ode

我很难开始。我在金融工程专业，我正在尝试使用 2003 年写的一本书来帮助我对偏微分方程、布莱克斯科尔斯模型等进行建模。

但在介绍章节中有一个非常基本的 ODE 利率问题，我的输出与书中有很大不同。

```
DSolve[{y'[t] == ry[t], y[0] == P}, y[t], t] 
```

是我输入的。这本书有一个非常巧妙的解决方案 {{y(t)->P*exp^(rt)}}

我得到的是类似的东西（注意，我不能发布输出）

```
{{y(t) -> integral_1_to_t ry(K[1]]dK[1] - integral_1_to_0 ry(K[1])dK[1]+P}} 
```

什么是大K？这只是一些无法生成符号解决方案的规则输出吗？因为我的设置或文件系统有问题？此外，在提供的代码可能已过时的情况下，是否有任何建议使用有关 Mathematica 的旧书？我只需要找到一种前进的方法并将其应用到我的学习中。

最后，有时使用其他 ODE，我会得到与我的源不同的结果。IE 我遵循了 Mathematica ODE 教程，我的输出也不同。在某些地方，我的 Mathematica 版本不会计算，或者在解决方案中丢弃某些变量 s 或常量，或者没有输出。我浏览了 DSolve 的一般故障排除，但没有发现任何持久且公认的错误。我想知道我的文件系统是否有问题，或者其他什么？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:01:47.403

您在`r`和之间缺少一个空格`y[t]`。

尝试：

```
DSolve[{y'[t] == r y[t], y[0] == P}, y[t], t] 
```

# html - 复制轮子并向前移动轮子

> ID：15210828
> 
> 赞同：0
> 
> 时间：2013-03-04T20:47:30.563
> 
> 标签：html, canvas

此代码正在显示一个旋转的轮子。我想要实现的是复制轮子并重新定位副本并将两个轮子向前移动。就像汽车的轮子一样。我对帆布很新。提前致谢

```
<html>
    <head>
    <script type="text/javascript">
    addEventListener("load", windowLoaded, false);

    function  windowLoaded()
    {
        canvasApp();
    }

    function canvasApp()
    {
        var canvas = document.getElementById("canvas01");
        var context = canvas.getContext("2d");
        var wiel = new Image();

        wiel.src = "wiel.png";

        setInterval(draw, 25);

        function draw(width)
        {
            context.clearRect(width, 0, 800, 600)
            context.drawImage(wiel, 0, 0);
            context.translate(176, 176);
            context.rotate(1 * 0.1);
            context.translate(-176, -176);

        }
    }
    </script>
    </head>
    <body>
    <canvas id="canvas01" width="800" height="600">
        no support
    </canvas>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:19:21.883

这是您如何在画布上设置 2 个旋转“轮子”的动画：http: [//jsfiddle.net/m1erickson/Yv62X/](http://jsfiddle.net/m1erickson/Yv62X/)

“window.requestAnimFrame” 用于跨浏览器兼容性——感谢 Paul Irish 提供的这个有用功能。

请注意，对于并发动画等，RequestAnimFrame() 现在优先于 setInterval()。

animate() 函数经过以下步骤：

更新：计算此动画帧所需的位置和旋转。

清除：清除画布以使其准备好绘图

绘制：调用进行实际绘制的 draw() 函数

draw() 函数：我们使用相同的函数绘制两个轮子——只是改变属性。这遵循了一个重要的“DRY”编程概念——不要重复自己。一个函数中的两个轮子使调试更容易、更易读和更易于维护的代码。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

var rotation=0;
var radius=50;
var x=50;
var y=100;
var direction=1;

        function animate() {

          // update
          rotation+=10;
          x+=1;
          if(x-50>canvas.width){ x=0 }
          // clear
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          // draw stuff
          draw(x,y,rotation,"red");
          draw(x+150,y,rotation,"green");

          // request new frame
          requestAnimFrame(function() {
            animate();
          });
        }
        animate();

function draw(x,y,degrees,color){
      var radians=degrees*(Math.PI/180);
      ctx.save();
      ctx.beginPath();
      ctx.translate(x,y);
      ctx.rotate(radians);
      ctx.fillStyle="black";
      ctx.strokeStyle="gray";
      ctx.arc(0, 0, radius, 0 , 2 * Math.PI, false);
      ctx.fill();
      ctx.stroke();
      ctx.beginPath();
      ctx.strokeStyle=color;
      ctx.lineWidth=5;
      ctx.moveTo(-20,0);
      ctx.lineTo(+20,0);
      ctx.stroke();
      ctx.restore();
}

    }); // end $(function(){});
</script>

</head>

<body>
  <canvas id="canvas" width=400 height=200></canvas>
</body>
</html> 
```

# mysql - Mysql，为多个值选择同一列，不同的条件

> ID：15210836
> 
> 赞同：1
> 
> 时间：2013-03-04T20:48:31.807
> 
> 标签：mysql, multi-select

我无法弄清楚如何使用 where 子句创建多个选择，以便我的名称字段中的三个场景中的每一个都有一个列。

我现在的查询是：

```
 SELECT
    pd_extrafields.packetDetailsId,
    pd_extrafields.ex_value as Credit 
    FROM
    pd_extrafields
    where pd_extrafields.ex_title = "Credit,A,B,C,D,E,F" 
```

如何在以下条件下将其他两列拉入同一个查询（基本上我想将三个查询合并为一个并保留列名）：

```
 SELECT
    pd_extrafields.packetDetailsId,
    pd_extrafields.ex_value as AccountNum 
    FROM
    pd_extrafields
    where pd_extrafields.ex_title = "Account#" 
```

&

```
 SELECT
    pd_extrafields.packetDetailsId,
    pd_extrafields.ex_value as OrderStat 
    FROM
    pd_extrafields
    where pd_extrafields.ex_title = "New/Existing" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:54:51.953

使用`CASE`.

```
 select packetDetailsId, GROUP_CONCAT(Credit) AS Credit, GROUP_CONCAT(AccountNum) AS AccountNum, GROUP_CONCAT(OrderStat) AS OrderStat FROM
( SELECT pd_extrafields.packetDetailsId,
    CASE WHEN pd_extrafields.ex_title LIKE ('%Credit%') 
    THEN pd_extrafields.ex_value ELSE NULL END as Credit,
    CASE WHEN pd_extrafields.ex_title LIKE ('%Account%') 
    THEN pd_extrafields.ex_value ELSE NULL END as AccountNum,
    CASE WHEN pd_extrafields.ex_title LIKE ('%Existing%') 
    THEN pd_extrafields.ex_value ELSE NULL END as OrderStat
    FROM pd_extrafields) AS TempTab GROUP BY packetDetailsId 
```

# ios - 关于 UIScrollView 和 AutoLayout 的困惑

> ID：15210838
> 
> 赞同：0
> 
> 时间：2013-03-04T20:48:36.740
> 
> 标签：ios, uiscrollview

我在同一个问题上查看了许多不同的线程，似乎无法理解这里发生了什么。我创建了一个非常基本和简单的项目。我想要发生的是一堆元素在正确滚动的滚动视图中。这些元素可能包括一个独立滚动（或不滚动）的 UITableView。这是我设置基本项目的方式：

![IB视图](../Images/3c039cb979a997b39ef99aa8a67e55b1.png)

在模拟器中运行它会导致视图不滚动。这是意料之中的，因为所有元素都有足够的空间。然后我改变了 UIScrollView 的大小，如下所示：

![IB视图2](../Images/d952c74714e4462a38f7714b422361c5.png)

在模拟器中运行它会产生一个不会滚动的较小视图。我认为我没有以正确的方式这样做。这是我最近尝试过的代码：

`ViewController.h`

```
@interface ViewController : UIViewController <UIScrollViewDelegate>

@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UIButton *buttonOne;
@property (strong, nonatomic) IBOutlet UIButton *buttonTwo;
@property (strong, nonatomic) IBOutlet UIButton *buttonThree;
@property (strong, nonatomic) IBOutlet UIButton *buttonFour;

@end 
```

`ViewController.m`

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.buttonOne setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.buttonTwo setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.buttonThree setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.buttonFour setTranslatesAutoresizingMaskIntoConstraints:NO];
    [self.scrollView setTranslatesAutoresizingMaskIntoConstraints:NO];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:18:33.610

问题是当您在界面生成器中更改滚动视图的大小时，您还将内容的大小设置为与框架大小相同。

您可以在代码中手动增加滚动视图的内容大小，以便您可以像这样滚动它：

```
// scrollView is an outlet to your scroll view
// Add 200 points to the bottom of the scroll view
[self.scrollView setContentInset:UIEdgeInsetsMake(0, 0, 200, 0)]; 
```

不过，您可能不需要这样做，只要您以全尺寸绘制子视图，并使其成为其他视图的子视图，并让它自动调整大小。

# python - 我应该如何在 Django 中更改 TEMPLATE_CONTEXT_PROCESSORS？

> ID：15210839
> 
> 赞同：0
> 
> 时间：2013-03-04T20:48:41.187
> 
> 标签：python, django, social-networking

我正在尝试使用该`Django Social Auth` [应用程序](https://github.com/omab/django-social-auth)来处理从各种社交媒体网站登录到我的网站。

[处理此处](https://github.com/omab/django-social-auth/blob/master/example/example/settings.py)的示例代码时，该示例使用以下设置`TEMPLATE_CONTEXT_PROCESSORS`：

```
TEMPLATE_CONTEXT_PROCESSORS = (    
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.contrib.messages.context_processors.messages',
    'social_auth.context_processors.social_auth_by_type_backends',
    'django.contrib.auth.context_processors.auth',
) 
```

但是，如果我使用这些设置，我的静态媒体 url 将被忽略（css/js/images 不可用），我认为它正在覆盖其他一些上下文设置。如何检查是否有更多我应该包括的上下文设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:10:36.703

我认为您需要添加`django.core.context_processors.static`到上下文处理器列表中。

然后可以快速阅读有关提供静态文件的[文档](https://docs.djangoproject.com/en/1.5/howto/static-files/)- 该过程因您的设置而异。

很难说你还需要什么，我认为你已经拥有了 django 默认放入的所有东西（当你运行时`python django-admin.py startapp`）。浏览一下我正在处理的当前项目之一，我已经`django.core.context_processors.request`将请求对象传递到模板和一个自定义 context_processor 中，但显然您添加的内容取决于您的特定要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:10:54.127

你设置好了`STATICFILES_DIRS`吗？此外，您应该使用[STATIC_URL](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-static)`django.core.context_processors.static`添加和寻址您`TEMPLATE_CONTEXT_PROCESSORS`的静态文件。

此外，静态文件的[文档](https://docs.djangoproject.com/en/dev/howto/static-files/)通常也很不错。

# multithreading - 不同的线程在休眠中更新同一个对象

> ID：15210841
> 
> 赞同：2
> 
> 时间：2013-03-04T20:48:51.853
> 
> 标签：multithreading, hibernate, concurrency, merge

在我的应用程序中，两个线程尝试更新代码中的同一实体，如下所示：

```
public static <T> T updateEntity(T entity, long id) {
    long start = System.currentTimeMillis();
    EntityManager em = null;
    EntityTransaction tx = null;
    try {
        em = GenericPersistenceManager.emf.createEntityManager();
        tx = em.getTransaction();
        tx.begin();
        entity = em.merge(entity);
        tx.commit();
        LoggerMultiplexer.logDBAccess(start, System.currentTimeMillis(),
            String.format(OPERATION_UPDATE_ENTITY, entity.getClass().getName(), id));
        return entity;

    }
    ... 
```

有时，我在提交行中遇到重复键错误。我猜这发生在线程尝试同时更新实体时。可能吗？我想是的，因为如果我`synchronized`在上面的函数中添加一个，我不会得到重复键异常。那么，我是否必须考虑这种并发问题？如果是这样，如果我有多个线程试图更新同一个对象，那么正确的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:16:02.230

在单节点应用程序中，您可以在从数据库中检索`lock`对象时尝试使用`Session`( ) 中的对象。`Pessimistic versioning`

更多关于[锁定](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch05.html)。还有一点关于[休眠并发](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-locking)的建议。

但也许你应该重新考虑一下`units of work`。添加`locking`或`synchronized` 阻止将在您的应用程序上添加高争用。[当您开发一些交易基础知识](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html#transactions-basics)时，最好记住这一点。`Detached Object`缩短对象或模式的寿命。使用`Optimistic versioning`（例如通过添加`version`字段）然后处理并发修改的错误。

# php - 以增加的长度制作星号和零的图案

> ID：15210843
> 
> 赞同：2
> 
> 时间：2013-03-04T20:48:58.143
> 
> 标签：php, for-loop

我正在尝试像下面的模式一样回应星星和零

```
*
***0
******00
**********000 
```

星号的长度增加了一个因子（以气球的方式）——之前的星号数量加上当前的迭代次数。

*   迭代 1: 1 (0 + 1)
*   迭代 2：3 (1 + 2)
*   迭代 3: 6 (3 + 3)
*   迭代 4: 10 (6 + 4)
*   迭代 5: 15 (10 + 5)
*   ETC

零点的长度增加了一个静态因子。

*   迭代 1：0
*   迭代 2：1
*   迭代 3：2
*   迭代 4：3
*   迭代 5：4
*   ETC

我的代码目前如下所示：

```
for ($i=0; $i<=10; $i++)
{   
    echo "*";
    for ($j=0; $j<$i; $j++)
    {   
       echo "*";
    }
    for ($z=0; $z<$i; $z++)
    {
        echo "0";
    }       
    echo "</br>";    
} 
```

但是我得到了这个结果：

```
*
**0
***00
****000
*****0000
******00000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T20:52:55.277

星数由三角形数字 , `1`,`1+2`表示`1+2+3`。`$i`您希望通过每次迭代来增加内部循环最大值：

```
$k = 0;
for ($i=1; $i<=10; $i++)
{
    $k += $i;
    for ($j=1; $j<=$k; $j++)
    {   
       echo "*";
    }
    ...
} 
```

这也是一个很好的例子，你的循环应该用`1`而不是初始化`0`，因为它更直观。 `0`当您使用数组时，基于 - 的循环效果最好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:59:27.287

我认为这样的事情更有效；您可以缓存当前的星和零序列。

```
$cache_star = "";
$cache_zero = "";
for ($i=1; $i<=10; $i++)
{
    for ($j=1; $j<=$i; $j++)
    {   
       $cache_star .= "*";
    }
    echo $cache_star.$cache_zero;
    $cache_zero .= "0";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:05:42.943

这是我得到的：

```
for($i = 1; $i != 5; $i++)
{
    $triangle = (0.5 * $i) * ($i + 1);
    echo str_repeat('*', $triangle) . str_repeat('0', $i) . PHP_EOL;
} 
```

使用公式`0.5n(n + 1)`- 三角形数字公式。

示例输出：

```
*0
***00
******000
**********0000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-18T11:12:24.403

我非常喜欢@jordandoyle 的方法，但我通过从`$i`第二个`str_replace()`..中减去 1 来纠正零模式。

代码：（[演示](https://3v4l.org/7tmmR)）

```
$number = 5;
for ($i = 1; $i <= $number; ++$i) {
    echo str_repeat('*', $i * .5 * ($i + 1))
         . str_repeat('0', $i - 1)
         . PHP_EOL;
} 
```

输出：

```
*
***0
******00
**********000
***************0000 
```

* * *

如果此答案与较早的答案相比缺乏显着的唯一性，我将包括递归方法（而不是经典循环）。

代码：（[演示](https://3v4l.org/02pSu)）

```
function printLines($i, $lines = [], $newline = PHP_EOL) {
    if ($i > 0) {
        array_unshift(
            $lines,
            str_repeat('*', $i * .5 * ($i + 1))
                . str_repeat('0', $i - 1)
        );
        printLines(--$i, $lines);
    } else {
        echo implode($newline, $lines);
    }
}

printLines(5); 
```

* * *

您甚至可以复制上一行并将其插入下一行的中间以形成所需的图案。这是@CoertMetz 的嵌套循环技术的函数式等价物。

代码：（[演示](https://3v4l.org/dD7LM)）

```
$number = 5;
$line = '';
for ($i = 1; $i <= $number; ++$i) {
    echo (
             $line = str_repeat('*', $i)
                 . $line
                 . ($i > 1 ? '0' : '')
         )
         . PHP_EOL;
} 
```

所有上述技术都提供相同的结果。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-04T20:54:24.557

闻起来像家庭作业......但是好吧，这个怎么样：

```
$star = "*";

echo $star."\n";

    for ($i=0; $i<=10; $i++)
    {   
        $star = $star."**";
        echo $star;

        echo str_repeat("0", $i+1);

        echo "\n";    
    } 
```

结果：

```
*
***0
*****00
*******000
*********0000
***********00000
*************000000
***************0000000
*****************00000000
*******************000000000
*********************0000000000
***********************00000000000 
```

演示：

[http://sandbox.onlinephpfunctions.com/code/583644f782005adb9e018b965cbbdefaf63c7c79](http://sandbox.onlinephpfunctions.com/code/583644f782005adb9e018b965cbbdefaf63c7c79)

# android - Android如何维护R文件的并发性？

> ID：15210845
> 
> 赞同：3
> 
> 时间：2013-03-04T20:49:04.470
> 
> 标签：android

我正在开发一个模拟 Android 的 R.java 和 Resource/AssetManager 的项目。我创建了一个解析器，它搜索`res`文件夹中的有效 xml 资源，并创建一个包含所有 id 的静态类来引用资源。那是容易的部分。现在我一直在试图弄清楚 android 如何保持 ID 和资源元素之间的并发性。据我所知，android 不会创建另一个文件来将 R 连接到资源。

R 文件中的 id 和指向资源的链接是隐式的吗？这意味着 id 是根据在资源文件夹中找到的顺序生成并分配一个值的，并且这种“绑定”仅有效，因为资源是按该确切顺序编译的。或者在幕后有什么东西可以将应用程序及其 R 类连接到资源？

# java - 如何强制 Java JSON 或 GS ON 显式命名我的数组和对象

> ID：15210850
> 
> 赞同：4
> 
> 时间：2013-03-04T20:49:18.347
> 
> 标签：java, json, gson

我有以下 POJO：

```
public class Widget {
    private String fizz;
    private String buzz;
    private String foo;

    // Getters and setters for all 3...
} 
```

在我的代码中，我尝试`List<List<Widget>>`使用[Java JSON](http://json.org/java/)库将 a 转换为 JSON（但是我也接受使用 GSON 的任何答案）。

这是我的代码：

```
// Returns a single List<Widget> with 2 Widgets in it...
List<List<Widget>> widgetGroups = getWidgetGroups();

String widgetGroupsAsJson = JSON.encode(widgetGroups);
System.out.println(widgetGroupsAsJson); 
```

这打印：

```
[
    [
        {
            "fizz": "Yes",
            "buzz": "Never",
            "foo": "Always"
        },
        {
            "fizz": "Sometimes",
            "buzz": "Always",
            "foo": "Pending"
        }
    ]
] 
```

而我希望 JSON 显示为：

```
"widgetGroups": [
    "widgetGroup": [
        "widget": {
            "fizz": "Yes",
            "buzz": "Never",
            "foo": "Always"
        },
        "widget": {
            "fizz": "Sometimes",
            "buzz": "Always",
            "foo": "Pending"
        }
    ]
] 
```

换句话说，我希望所有列表以及每个列表都`widget`被“命名”。然而，我首先担心的是这可能不是正确的 JSON。当我将此第二个（所需的）JSON 片段粘贴到[jsonlint.org 时](http://jsonlint.org)，我得到一个解析器错误。

所以**首先**我问是否有人可以指出我想要的 JSON*应该*是什么样子才能正确；其次，如果有人可以帮助我整理我的**列表**`widgetGroups`，以便 Java JSON 或 GS​​ON 可以产生所需的输出。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:53:34.207

首先，你确定这是正确的吗？注释和代码不匹配。

```
// Returns a single List<Widget> with 2 Widgets in it...
List<List<Widget>> widgetGroups = getWidgetGroups(); 
```

其次，创建一个 WidgetGroup 类，它将充当单个 WidgetGroup 的容器。

```
public class WidgetGroup {

    private String name;
    private List<Widget> widgets;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List<Widget> getWidgets() {
        return widgets;
    }

    public void setWidgets(List<Widget> widgets) {
        this.widgets = widgets;
    }
} 
```

这将是一个有效的 JSON 结构：

```
{
  "widgetGroups" : [
    {
      "widgetGroup": [
        "widget": {
          "fizz": "Yes",
          "buzz": "Never",
          "foo": "Always"
        },
        /*More widgets*/
      ]
    },
    /*More widget groups*/
  ]
} 
```

像这样的东西应该工作：

```
Map<String, List<WidgetGroup>> widgetGroups = new HashMap<String, List<WidgetGroup>>();
WidgetGroup widgetGroup1 = getWidgetGroup(); // Just an assumption of one of your methods.
WidgetGroup widgetGroup2 = getWidgetGroup(); // Just an assumption of one of your methods.

List<WidgetGroup> widgetGroupList = new ArrayList<WidgetGroup>();
widgetGroupList.add(widgetGroup1);
widgetGroupList.add(widgetGroup2);

widgetGroups.put("widgetGroups", widgetGroupList); 
```

然后你`toJson()`在地图上打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:01:43.097

在 JSON 中，只有两种类型的“容器”——数组，隐式排序但未命名，对象（或关联数组）不一定排序，但具有命名键值对。正确的 JSON 语法应该是：

```
{
  "widgetGroups": [
    {
      "widgetGroup": [
        {
            "fizz": "Yes",
            "buzz": "Never",
            "foo": "Always"
        },
        {
            "fizz": "Sometimes",
            "buzz": "Always",
            "foo": "Pending"
        }
      ]
    }
  ]
} 
```

您应该注意，在“widgetGroup”列表中，我放置了一个数组 - 您必须放弃名称并放置一个简单的数组（**[]**语法），或者一个对象（**{}**语法）**并**使用唯一名称（即您可以t 有两个相同的元素，名为“widget”）

至于从 GSON（或其他常见的 java-json 转换器）获取此内容的语法，请使用映射而不是您想要关联数组的列表。

**编辑**：我以前没有使用过 JSON-Java，但查看规范似乎需要*JSONObject*类来插入关联数组。

# analytics - Omniture 在没有相关访问或页面指标的情况下捕获流量变量

> ID：15210852
> 
> 赞同：1
> 
> 时间：2013-03-04T20:49:22.430
> 
> 标签：analytics, adobe-analytics

我需要在嵌入我们内容的第 3 方网站上跟踪单个流量变量（“道具”）。

我们不希望 Omniture 调用增加访问或页面浏览量或通常由 s 代码库捕获的任何其他指标。

我们正在捕获 prop 变量的第 3 方站点需要在客户端中进行跟踪，因此不能选择使用数据插入 API。

如何做到这一点？s.tl() 方法会这样做吗？即不计算访问等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:16:16.523

使用 s.tl() 调用将不起作用。即使该调用不会增加页面浏览量，任何“第一次”调用都会注册访问者和访问。我的意思是，即使标准访问以 s.tl() 调用而不是 st() 调用开始，无论哪个先发生都会启动访问者并计算访问。

您要查找的内容称为轻型服务器调用。这允许您触发调用并捕获一些变量，但不会注册页面视图、访问或访问者。此外，它们的成本远低于标准服务器调用。您需要与客户关怀部门合作来设置和实施它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:35:16.557

我可以通过发出如下所示的图像请求来完成这项工作：

`< img src='http://somersid.122.2o7.net/b/ss/somersid/1/H.XX.X--NS/0?c[some_prop]=data height='1' width='1' alt='' />`

这是我第一次听说 Light Server Calls。在文档中找不到关于它们的任何信息。谢谢。

# javascript - 鼠标滚轮滚动 - 滚动更改图像

> ID：15210856
> 
> 赞同：1
> 
> 时间：2013-03-04T20:49:25.420
> 
> 标签：javascript, onmouseover, onmousemove, onmouseclick

我想让我的图像在用户启动的鼠标滚轮滚动时发生变化。我从这个网站复制并粘贴了代码：

[http://www.javascriptkit.com/javatutors/onmousewheel.shtml](http://www.javascriptkit.com/javatutors/onmousewheel.shtml)

只是更改了我的图像名称。这是他们的代码：

```
<img id="slideshow" src="images/trial1/img-1.png" />

<script type="text/javascript">
var myimages=[
  "img-1.png",
  "img-2.png",
  "img-3.png",
  "img-4.png",
  "img-5.png"
]
var slideshow=document.getElementById("slideshow")
var nextslideindex=0
function rotateimage(e){
  var evt=window.event || e
  var delta=evt.detail? evt.detail*(-120) : evt.wheelDelta
  nextslideindex=(delta<=-120)? nextslideindex+1 : nextslideindex-1
  nextslideindex=(nextslideindex<0)? myimages.length-1 : (nextslideindex>myimages.length-1)? 0 : nextslideindex
  slideshow.src=myimages[nextslideindex]
  if (evt.preventDefault)
    evt.preventDefault()
  else
    return false
}
var mousewheelevt=(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel"

if (slideshow.attachEvent)
  slideshow.attachEvent("on"+mousewheelevt, rotateimage)
else if (slideshow.addEventListener)
  slideshow.addEventListener(mousewheelevt, rotateimage, false)
</script> 
```

由于某种原因，第一个图像加载，但随后在滚动上被破坏。我已经三重检查了我的路径和代码，所以我不确定出了什么问题。这是我试图让图像滚动的页面的网址：

[http://violetoeuvre.com/photography.html](http://violetoeuvre.com/photography.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:51:59.230

更改路径时忘记`images/trial1/`在 img-x.png 之前添加。

# python - Appengine 在非脚本静态路由域中激活脚本静态路由

> ID：15210857
> 
> 赞同：0
> 
> 时间：2013-03-04T20:49:25.990
> 
> 标签：python, google-app-engine

在 appengine 中，我已映射`'/'`目录以用于编辑我的`app.yaml`. 现在它提出的问题是它无法识别我`/blog/.json`通过 python 脚本配置的其他路由（例如：）。如果两条路线都是用 python 编写的，那么上下移动路线可以解决这个问题，但显然我不能这样做。那么可以做些什么呢？

主文件

```
app = webapp2.WSGIApplication([('/blog/.json', jsonBlog)], false) 
```

应用程序.yaml

```
- url: /
  static_dir: html5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:56:24.220

添加

```
- url: .*
  script: main.app 
```

前

```
- url: /
  static_dir: html5 
```

将解决问题。首先它将检查脚本目录，然后检查脚本映射文件夹。

# java - 从 Java 应用程序保存信息

> ID：15210858
> 
> 赞同：1
> 
> 时间：2013-03-04T20:49:26.417
> 
> 标签：java, jdbc, jar, text-files

我正在使用 Java 中的数据库（编译为 JAR）制作应用程序。为了连接到数据库，用户必须输入数据库的地址。每次您想使用该程序时，记住/键入地址会很痛苦。

因此，我想将地址保存到某个文本文件中……但是在哪里？我希望任何操作系统上的任何人都可以访问此应用程序，并且我不希望将我的 JAR 放在文件夹中。

是否有可能从位于 JAR 本身的文本文件中写入/读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:59:48.843

就像 Sotirios Delimanolis 所说，您可以创建和保存属性文件。

做起来很简单，请看下面的例子（见[原文](http://www.avajava.com/tutorials/lessons/how-do-i-write-a-properties-file.html)）

```
package test;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;

public class WritePropertiesFile {
 public static void main(String[] args) {
  try {
   Properties properties = new Properties();
   properties.setProperty("favoriteAnimal", "marmot");
   properties.setProperty("favoriteContinent", "Antarctica");
   properties.setProperty("favoritePerson", "Nicole");

   File file = new File("test2.properties");
   FileOutputStream fileOut = new FileOutputStream(file);
   properties.store(fileOut, "Favorite Things");
   fileOut.close();
  } catch (FileNotFoundException e) {
   e.printStackTrace();
  } catch (IOException e) {
   e.printStackTrace();
  }

 }
} 
```

我不建议您将属性文件保存到 jar 文件中，但是可以这样做。

请按照stackoverflow的答案：[如何用Java写入文本文件](https://stackoverflow.com/questions/5294145/how-to-write-into-a-text-file-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:27:01.420

这对我有用。我只是将路径`System.getProperty("user.home")`用作文件的位置。这是操作系统中立的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T20:56:00.587

您可以使用 ClassLoader.getResourceAsStream() 在 jar 中的任何位置打开文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T21:05:18.733

尝试使用[Java Preferences API](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)来存储这样的用户数据。

在应用程序文件夹中存储数据会出现问题（例如，用户可能没有权限，应用程序可能已签名等）。您可以将文件存储在用户主目录中，但大多数操作系统都有指定的位置来存储用户数据（例如，Mac 上的“应用程序支持”、Windows 上的 AppData 等）。另外，用户可能不会喜欢你把他们的主目录弄得乱七八糟。您可以创建一个属性文件并自己处理将其存储在适当的位置，但更简单的解决方案是使用 Preferences API，它可以抽象出必须知道在哪里写入文件的痛苦。

这是一个例子：

```
import java.util.prefs.Preferences;

public class Test {
    public static final String DB_PROP = "user.selected.db.address";

    public static void main(String[] args) {
        Preferences prefs = Preferences.userNodeForPackage(Test.class);
        prefs.put(DB_PROP, "foo");
        String dbAddress = prefs.get(DB_PROP, null);
        System.out.println(dbAddress);
    }
} 
```

# asp.net - IIS 7.5 无法打开 aspx、html 页面

> ID：15210861
> 
> 赞同：1
> 
> 时间：2013-03-04T20:49:27.493
> 
> 标签：asp.net, iis, iis-7.5, windows-server-2008-r2

我的 IIS 7 (Windows Server 2008 R2) 上有两个 ASP.NET 站点

第一个工作完美，它打开 default.aspx 页面任何其他 aspx 页面以及 html，但第二个站点既不打开 .aspx 也不打开 .html 链接，例如，如果我尝试打开[http://mysite.com /Default.aspx](http://mysite.com/Default.aspx) url，它只是显示一个没有任何内容或任何错误的空白页面。

它可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:10:08.070

好吧，很多东西都可以被打破。

几个小贴士：

*   启动 Chrome、Firefox（带有 Firebug 插件）或 Fiddler 或任何其他 http 代理并检查服务器发送的内容 - 是 HTTP 200、404 还是其他？
*   检查 IIS 日志 c:\inetpub\logs\Logfiles\w3svc
*   检查事件日志
*   将工作网站中的 httpmodules 与不工作网站中的 httpmodules 进行比较
*   确保为站点设置了具有正确 .net 版本的正确应用程序池
*   尝试将网站转换为 webapp
*   如果一切都失败了，请删除网站并从头开始创建它。如果它有效，则可能表明 IIS 元数据库已损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T02:02:30.533

我建议的另一种解决方法：

在 C:\Windows\System32\Drivers\etc\hosts 中使用记事本打开“hosts”文件

然后加

127.0.0.1 你的网站

接下来，尝试按照 ( [http://technet.microsoft.com/en-us/library/cc731692%28v=WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc731692%28v=WS.10%29.aspx) )的建议添加到站点的绑定

我希望它对你有帮助。

# jquery - jQuery .fadeOut 回调到 .click 不工作

> ID：15210865
> 
> 赞同：5
> 
> 时间：2013-03-04T20:49:40.560
> 
> 标签：jquery, callback, click, fadeout

我正在开发一个图像上传器应用程序，除了一个仅在 Chrome 中发生的错误之外，一切都运行良好。我已将问题简化为一个未通过的回调。

问题是 .click() 触发器的 .fadeOut 回调没有触发。我在下面链接的小提琴中重新创建了一个简化版本。第一次单击开始淡出，当淡出完成时，.click 触发器不会发生。再次单击 会触发触发器。任何想法为什么？

HTML：

```
<div><input type="file" name="image_file" id="image_file"/></div>

<div class="overlay_wrap">
    Overlast
</div>

<a id="click" href="">Click</a> 
```

jQuery：

```
$(document).ready(function() {
    $("#click").click(function(event) {
        event.preventDefault();
        $('.overlay_wrap').fadeOut(1000, function(event){
            $('#image_file').trigger('click');
        });
    });
}); 
```

[http://jsfiddle.net/gg2a7/5/](http://jsfiddle.net/gg2a7/5/)

感谢您的帮助！

编辑：有旧的小提琴链接，改变了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:33:50.280

可悲的是，这行不通。这一切都与浏览器中的计时/线程功能有关。

问题的核心是：**无法`<input type="file" />`以编程方式打开*（***关于[SO](https://stackoverflow.com/questions/1829774/jquery-simulating-a-click-on-a-input-type-file-doesnt-work-in-firefox) /Google上[的大量问题）。](https://stackoverflow.com/questions/210643/in-javascript-can-i-make-a-click-event-fire-programmatically-for-a-file-input) 不仅是 Chrome；Firefox 显示弹出窗口被阻止的消息，Safari 也会阻止它，并且在 IE 中表单不会提交。

这背后的原因是因为它是一个潜在的安全风险。只有**用户操作**才能在打开 this 中产生`<input type="file" />`。由于`.fadeOut()`，浏览器不再将其识别为用户事件。现在我们回到浏览器的时间/线程，因为这*确实*有效。没有任何委派，也没有其他线程/超时阻止对话框打开。

```
$("#click").click(function(event) {
    event.preventDefault();
    $('#image_file').trigger('click');
}); 
```

[JSF](http://jsfiddle.net/gg2a7/6/)中。

为了证明它实际上是，这是一个*确实*`<input type="file" />`有效的示例：`<input type="button" />`

 ***HTML**

```
<input type="button" name="image_file" id="image_file" value="type='button'" /> 
```

**JS**

```
$("#click").click(function(event) {
        event.preventDefault();
        $('.overlay_wrap').fadeOut(1000, function(){
            $('#image_file').trigger('click');
        });
    });

    $('#image_file').click(function() {
         alert('ok');   
    }); 
```

[JSF](http://jsfiddle.net/gg2a7/7/)中。

长话短说：你不能用淡入淡出效果来做到这一点。您可以简单地打开对话框并隐藏元素，但仅此而已。

```
$("#click").click(function(event) {
    event.preventDefault();
    $('.overlay_wrap').hide();
    $('#image_file').trigger('click');
}); 
```

[JSF](http://jsfiddle.net/gg2a7/8/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:58:24.010

改变你`$('.overlay_wrap').fadeOut(1000,complete)`的

```
$('.overlay_wrap').fadeOut(1000);
complete(); 
```*

# java - 获取xml布局中项目的ID

> ID：15210867
> 
> 赞同：1
> 
> 时间：2013-03-04T20:49:45.270
> 
> 标签：java, android, xml, android-layout

我有包含复选框和 2 个文本视图的行

我正在使用此代码重复自定义 xml 布局，它工作正常

但我想知道我的意思是行中每个组件的每个 id（复选框的 id 和编辑 1 和 id 编辑 2）

所以我可以和他们一起工作。

我还需要 for 循环来为 ids 创建这个实例。

为了让我的 Q 清楚，我想要如下：

```
for ( int i = 0 ; i < 60 ; i++ ){

CheckBox "auto name here " = new (CheckBox) findViewById(R.id."the id of the current item in rep.xml layout or row ");

"auto name here".setChecked(true); 
```

等等……

我在 for 循环中创建行的代码：

```
for (int i = 0; i<60 ; i++ ){

LayoutInflater  inflater =    (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = (View) inflater.inflate(R.layout.rep, null);

tl.addView(view); // tl is table-layout instance 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:00:49.907

如果您需要添加 60 行，则不应使用循环和 TableLayout。

相反，您应该使用带有 Adapter 的 AdapterView 来保存您的数据并为您增加行数。这样做的众多好处之一是能够声明当每行中的复选框被独立选中时会发生什么。另一个是您将获得更好的性能，因为您不会一次将所有 60 行都放在内存中，因为 convertView 回收。

转到此处： http: [//developer.android.com/guide/topics/ui/binding.html](http://developer.android.com/guide/topics/ui/binding.html)以获得对 AdapterViews 的高级介绍。

研究 ListView 和 GridView 的示例。一旦你把它们弄下来，调整一些示例代码来增加你自己的行，而不是给定的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:00:52.870

已编辑 已编辑

```
package com.example.help;

import android.os.Bundle;
import android.app.Activity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.widget.CheckBox;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    CheckBox[] cb=new CheckBox[60];

    for (int i = 0; i<60 ; i++ ){

    LayoutInflater  inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = (View) inflater.inflate(R.layout.rep, null);

    tl.addView(view); // tl is table-layout instance 
    cb[i]=(CheckBox)view.fidViewById(R.id.CheckBoxid);
    cb[i].setChecked(true);

    }
} 
```

# less - 使用 Compass 内联 Bootstrap SASS 图像

> ID：15210875
> 
> 赞同：4
> 
> 时间：2013-03-04T20:50:19.860
> 
> 标签：less, compass-sass, gruntjs, bower, bootstrap-sass

关于环境：我们使用[Grunt](http://gruntjs.com/)进行 UI 构建自动化，我们确实使用[Twitter Bower](http://twitter.github.com/bower/)来管理第三方依赖项，因为我们不想将第三方代码保留在我们的存储库中，我们使用[Compass](http://compass-style.org)进行 CSS 扩展。

目前将供应商资产的压缩版本制作成单个 CSS 文件并遇到了一个问题，即 Compass 在构建时不会以某种方式将图像转换为内联图像。我们希望将所有图像内联到带有数据 URL 的结果 CSS 文件中（只要我们支持比 IE9 更新的浏览器 =）。

[包括Bootstrap SASS](http://github.com/jlong/sass-twitter-bootstrap)的主 SCSS 文件看起来像

```
// styles/main.scss
$iconSpritePath:      '../components/bootstrap-sass/img/glyphicons-halflings.png';
$iconWhiteSpritePath: '../components/bootstrap-sass/img/glyphicons-halflings-white.png';
//..
@import "../components/bootstrap-sass/lib/bootstrap"; 
```

指南针命令看起来像

```
compass compile --css-dir target/compass/styles \
   --sass-dir app/styles --images-dir app/images --output-style expanded 
```

结果输出就像

```
// target/compass/styles/main.css
/* line 18, ../../../app/components/bootstrap-sass/lib/_sprites.scss */
[class^="icon-"],
[class*=" icon-"] {
  display: inline-block;
  ...
  /* WANT THIS IMAGE INLINED */
  background-image: url("../components/bootstrap-sass/img/glyphicons-halflings.png");
  ...
} 
```

所以，主要的愿望是让所有`url()`表达式都保持内联 base64 编码的图像。作为替代方案，我们可以切换到 LESS，如果它更容易提供这种能力。实际上，这是一件好事，因为我们将消除对 Ruby/Compass 的依赖，并且我们可以使用 NPM 安装所有东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:07:39.090

尝试这个

```
inline-image($image, $mime-type) 
```

[http://compass-style.org/reference/compass/helpers/inline-data/#inline-image](http://compass-style.org/reference/compass/helpers/inline-data/#inline-image)

[http://blog.derekperez.com/post/755676493/smarter-sprites-inline-image-function-with-sass](http://blog.derekperez.com/post/755676493/smarter-sprites-inline-image-function-with-sass)

[使用 Sass / Compass 的多个背景图像](https://stackoverflow.com/questions/5846600/multiple-background-images-using-sass-compass)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:18:43.503

刚刚更改了引导 SASS 主文件中基本路径的变量。它有帮助。

# c# - 在 c# 中从 WebApi 获取数据

> ID：15210876
> 
> 赞同：4
> 
> 时间：2013-03-04T20:50:29.663
> 
> 标签：c#, asp.net, .net, asp.net-web-api

我有 webapi 和她的方法：

```
[HttpPost, HttpGet]
[ActionName("GetData")]
public MyData GetData([FromUri] MyData data)
{
  return datamanager.get(data);
} 
```

如何调用此方法？即如何`data`通过 URL 的查询部分发送参数？

要调用不带参数的 get 方法，我使用以下代码：

```
public static async Task<myClassl> GetData()
{
    HttpClient client = new HttpClient();
    client.BaseAddress = new Uri("http://sasa.com");
    HttpResponseMessage response = await client.GetAsync("api/GetData");
    myClassl data = await response.Content.ReadAsAsync<myClassl>();

    return data ;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:00.270

尝试以下解决方案：

```
HttpClient client = new HttpClient();
string baseApiAddress = ConfigurationManager.AppSettings["baseApiAddress"];
client.BaseAddress = new Uri(baseApiAddress);
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
HttpResponseMessage response=client.GetAsync("/api/GetData",data, new JsonMediaTypeFormatter()).Result;
if (response.IsSuccessStatusCode)
{
var mydata = response.Content.ReadAsAsync<MyData>().Result;
}
else
{
Debug.WriteLine(response.ReasonPhrase);
} 
```

# msbuild - 未找到 Team City 构建错误文件

> ID：15210877
> 
> 赞同：1
> 
> 时间：2013-03-04T20:50:34.693
> 
> 标签：msbuild, teamcity, publish

我遇到了 Team City 构建的问题。我在发布配置文件中添加了一个 web.config 转换，但是发布过程似乎找不到该文件。

文件 Web.Stage.config 确实存在于 C:\TeamCity\buildAgent\work\12d03f61c6f6df2f 中的构建服务器上。在附加文件名之前，Team City 似乎没有在目录路径的末尾添加反斜杠。

下面列出了完整的错误。任何帮助表示赞赏。

构建错误

```
[15:08:47]website.publishproj.teamcity: Build target: MSDeployPublish (32s)
[15:09:03][website.publishproj.teamcity] CopyAllFilesToSingleFolderForMsdeploy (16s)
[15:09:04][CopyAllFilesToSingleFolderForMsdeploy] CopyPipelineFiles (15s)
[15:09:19][CopyPipelineFiles] C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets(2709, 5): Copying file C:\TeamCity\buildAgent\work\12d03f61c6f6df2fWeb.CRIStage.config to binobj\Debug\Package\PackageTmp\Web.CRIStage.config failed. Could not find file 'C:\TeamCity\buildAgent\work\12d03f61c6f6df2fWeb.Stage.config'.
[15:09:20][website.publishproj.teamcity] Project website.publishproj.teamcity failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:00:15.293

作为一种解决方法，您可以在构建配置的“常规设置”选项卡中提供“工件路径”，方法`\Web.Stage.config`是在文件名前添加一个斜杠。这样它将正确地将文件路径作为`C:\TeamCity\buildAgent\work\12d03f61c6f6df2f\Web.Stage.config`.

# java - 使用冒泡排序按姓氏对文件进行排序？

> ID：15210880
> 
> 赞同：-1
> 
> 时间：2013-03-04T20:50:38.773
> 
> 标签：java, file, sorting

在这个程序中，我能够将文件读入数组并拆分数组。然后我有一个数组方法来使用冒泡排序按姓氏对文件进行排序。但是，我得到一个错误。有人可以帮助我吗？

错误：

错误：StudentSort 类中的 BubbleCountry 方法不能应用于给定类型；

学生排序.txt

```
Bren    Ramal
Casi    Ron
Alba    Jordi 
```

排序数据文件

```
import java.io.*;
import java.util.*;

class ShowSort implements Comparable {      
    private String name;
    private String surname;

    public void setName(String name) {
            this.name = name;
    }

    public String getName() {
            return name;
    }

    public void setSurname(String surname) {
            this.surname = surname;
    }

    public String getSurname() {
            return surname;
    }

    public int compareTo(Object Student) throws ClassCastException {
            if (!(Student instanceof ShowSort))
                  throw new ClassCastException("Error");
            String surn = ((ShowSort) Student).getSurname();
            return this.surname.compareTo(surn); 
    }

    } 
```

学生排序文件

```
import java.io.*;
import java.util.*;

public class StudentSort {
    StudentSort() {

    int j = 0;
    ShowSort data[] = new ShowSort[3];

    try {
        FileInputStream fstream = new FileInputStream("StudentSort.txt");
        // Use DataInputStream to read binary NOT text.
        BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

        String line;
        ArrayList list = new ArrayList();
        while ((line = br.readLine()) != null) {
                list.add(line);
        }
        Iterator itr;
        for (itr = list.iterator(); itr.hasNext();) {
                String str = itr.next().toString();
                String[] splitSt = str.split("\t");
                String name = "", surname = "";
                for (int i = 0; i < splitSt.length; i++) {
                name = splitSt[0];
                surname = splitSt[1];

        }

        BubbleCountry(surname);//This is the issue.

        data[j] = new ShowSort();
        data[j].setName(name);
        data[j].setSurname(surname);

        j++;
        }

        for (int i = 0; i < 3; i++) {
        ShowSort show = data[i];
        String name = show.getName();
        String surname = show.getSurname();

        System.out.println(name + "\t" + surname);

        }

        } catch (Exception e) {
        }

        }           

        private static void BubbleCountry(String[] myarray) {
        String ctry;
        for(int i=0; i<myarray.length; i++) {
            for(int j=0; j<myarray.length-1-i; j++) {
            if(myarray[j].compareTo(myarray[j+1])>0) {
            ctry= myarray[j];
            myarray[j] = myarray[j+1];
            myarray[j+1] = ctry;
                }
            }
        }

        }

    public static void main(String[] args) {
            StudentSort data = new StudentSort();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:04:40.653

你在打电话`BubbleCountry(surname);`，但它的原型显示

```
private static void BubbleCountry(String[] myarray) 
```

所以区别就在这里。该函数需要一个字符串数组作为参数，但在调用时您传递的是字符串而不是字符串数组。

```
import java.io.*;
import java.util.*;

public class StudentSort 
{
    StudentSort() 
    {

        int j = 0;
        ShowSort data[] = new ShowSort[3];

        try 
        {
            FileInputStream fstream = new FileInputStream("StudentSort.txt");
            // Use DataInputStream to read binary NOT text.
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));

            String line;
            ArrayList<String> list = new ArrayList<String>();
            while ((line = br.readLine()) != null) 
            {
                    list.add(line);
            }   
            Iterator<String> itr = list.iterator();
            int k = 0;
            for (itr = list.iterator(); itr.hasNext();itr.next()) 
            {
                    String str = itr.toString();
                    String[] splitSt = str.split("\t");

                    data[k].setName(splitSt[0]);
                    data[k].setName(splitSt[1]);
                    k++;
            }
            BubbleCountry(data);//This is the issue.

            for (int i = 0; i < 3; i++) 
            {
                ShowSort show = data[i];
                String name1 = show.getName();
                String surname1 = show.getSurname();

                System.out.println(name1 + "\t" + surname1);

            }

        } 
        catch (Exception e) 
        {
        }

    }           

    private static void BubbleCountry(ShowSort[] myarray) 
    {
        ShowSort ctry;
        for(int i=0; i<myarray.length; i++) 
        {
            for(int j=0; j<myarray.length-1-i; j++) 
            {
                if(myarray[j].compareTo(myarray[j+1])>0) 
                {
                    ctry= myarray[j];
                    myarray[j] = myarray[j+1];
                    myarray[j+1] = ctry;
                }
            }
        }

    }

    public static void main(String[] args) 
    {
            StudentSort data = new StudentSort();
    }
} 
```

# arrays - R创建一个发生矩阵

> ID：15210881
> 
> 赞同：-5
> 
> 时间：2013-03-04T20:50:40.223
> 
> 标签：arrays, r, matrix

我试图找到一种更快的方法来总结会话中个体的出现，以计算他们的关系水平。基本上，我想为每两个人计算至少观察到其中一个人的次数。我在这里查看了包括melt 和acast 在内的答案，但没有找到使用它们的好方法。这是我效率低下的代码：

```
presence=array(0,c(8,10)) #  session by individual
counter=array(0,c(10,10))
# put some data into the array:
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    0    1    0    0    0    0    0    0    0     0
 [2,]    0    0    1    1    1    1    0    0    0     0
 [3,]    0    0    0    0    0    0    1    0    0     0
 [4,]    0    0    0    0    0    0    0    1    0     0
 [5,]    0    0    0    0    0    0    0    1    0     0
 [6,]    0    0    0    0    0    0    0    0    1     0
 [7,]    0    0    0    0    0    0    0    0    1     0
 [8,]    0    0    1    0    1    1    0    0    0     1

  for (a in 1:10){
    for (b in 1:10){
      for (c in 1:8) {
        if ((presence[c,a]>0)|(presence[c,b]>0)) counter[a,b]=counter[a,b]+1
        # calculate something using this counter for each two individuals a and b
      }
    }
  } 
```

谢谢您的帮助。阿米亚尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:38:48.423

好的，仍然不是很清楚，但我认为存在现在是一个邻接矩阵，其中列代表用户，行代表事件，因此`presence[i,j]`表示用户 i 参加了事件 j。

如果我解释正确，那么计数似乎是共现矩阵，对吗？ `count[i,j]`应该记录用户 i 和 j 一起参加的活动数量吗？

如果您查看有关 2 模式社交网络分析的文献，特别是从属网络，则可以直接计算：

```
count = t(presence)%*%presence 
```

现在我会用你自己的数据检查以确保它是准确的：只需随机检查几个单元格并将它们与存在进行比较。

此外，顺便说一句，对于这类矩阵，行通常是用户，事件是列。

编辑：如果您希望计数成为任何一个用户参加的活动数量（而不是他们都参加的活动数量），那么它是一个联合而不是一个交叉点。所以这将是用户我参加的活动数量 + 用户 j 参加的活动数量 - 交叉点

```
x = t(presence)%*%presence
numEvents = diag(x)
counts = matrix(rep(numEvents,dim(x)[1]),nrow=dim(x)[1],byrow=TRUE)+matrix(rep(numEvents,dim(x)[1]),nrow=dim(x)[1],byrow=FALSE)-x 
```

这不是最优雅的解决方案，但它应该可以工作

# c# - 替换存储在表示 Word/Excel 文档的字节数组中的字符串

> ID：15210885
> 
> 赞同：2
> 
> 时间：2013-03-04T20:50:55.287
> 
> 标签：c#, bytearray, replace

我将 Word 和 Excel 文档存储在 SQL Server 数据库表中。这些文档是使用我的 C# 应用程序从数据库中提取的，并放入`byte[]`数组中。

我想替换 Word/Excel 文档中的某些字符串。使用可用的字节数组执行此操作的最佳方法是什么？

我在看这样的东西：

```
string fileString = System.Text.Encoding.UTF8.GetString(image.ImageObject);

fileString = fileString.Replace("FROM", "TO");

byte[] newImageObject = System.Text.Encoding.UTF8.GetBytes(fileString); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:04:31.700

我相信您必须将字节保存为 Word/Excel 文件并使用办公自动化工具进行更改。

如果你在二进制文件中随意更改字节，你可能会弄乱偏移量、校验和、CRC 检查、触发防病毒软件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:13:36.040

我建议您使用[Open XML SDK](http://msdn.microsoft.com/en-us/library/bb448854%28v=office.14%29)。

使用该库，您可以执行以下操作来替换 Word 文档中的文本，考虑到这`documentByteArray`是从数据库中获取的文档字节内容：

```
using (MemoryStream mem = new MemoryStream())
{
    mem.Write(documentByteArray, 0, (int)documentByteArray.Length);
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(document, true))
    {
        string docText = null;
        using (StreamReader sr = new StreamReader(wordDoc.MainDocumentPart.GetStream()))
        {
            docText = sr.ReadToEnd();
        }

        Regex regexText = new Regex("Hello world!");
        docText = regexText.Replace(docText, "Hi Everyone!");

        using (StreamWriter sw = new StreamWriter(wordDoc.MainDocumentPart.GetStream(FileMode.Create)))
        {
            sw.Write(docText);
        }
    }
} 
```

上面的例子取自[这里](http://msdn.microsoft.com/en-us/library/office/bb508261.aspx)。您可以对 Excel 电子表格进行类似操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:20:01.410

你的方法很可能会失败。

如果您在谈论 .doc 和 .xls，这些文件格式是二进制的，因此字节流很可能包含[无效的 UTF-8](http://en.wikipedia.org/wiki/UTF-8#Invalid_byte_sequences)字节序列。

即使不是这样，替换不同长度的字符串也会使偏移量和长度字段无效，从而导致文档在打开时失败。

另一方面，如果您在谈论 .docx 和 .xslx，这些文件实际上是压缩的 XML 文件，同样不能简单地搜索和替换：只需考虑查找字符串与 XML 元素或属性名称（或一部分）匹配其中）。同样，替换操作不能对整个文件进行操作。

# sql - WHERE IN sql查询

> ID：15210886
> 
> 赞同：3
> 
> 时间：2013-03-04T20:51:03.080
> 
> 标签：sql, sql-server

我需要查找数据库中不存在 WHERE IN 子句中的哪些项目。在下面的示例中 cc33 不存在，我需要查询以返回 cc33。我该怎么做？

```
SELECT id FROM tblList WHERE field1 IN ('aa11','bb22','cc33') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:53:01.290

您需要将值放入表格而不是列表中：

```
with list as (
    select 'aa11' as val union all
    select 'bb22' union all
    select 'cc33'
)
select l.val
from list l left outer join
     tbllist t 
     on l.val = t.field1
where t.field1 is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T20:54:59.440

对于 2008+ 的 SQl-Server 版本，您可以使用**[表值构造函数：](http://technet.microsoft.com/en-us/library/dd776382%28v=sql.100%29.aspx)**

```
SELECT field1
FROM
  ( VALUES
     ('aa11'),('bb22'),('cc33')
  ) AS x (field1)
WHERE field1 NOT IN
      ( SELECT field1 FROM tblList ) ; 
```

在**[SQL-Fiddle测试](http://sqlfiddle.com/#!3/05e45/3)**

# java - JTabbedPane 显示后如何隐藏它？

> ID：15210888
> 
> 赞同：2
> 
> 时间：2013-03-04T20:51:09.963
> 
> 标签：java, swing, jtabbedpane

我最近重写了很多我的应用程序，在我这样做之前，我试图完成的工作很好。我试图通过 a in a隐藏`JTabbedPane`按需。`JCheckBoxMenuItem``JMenuBar`

我之前所做的似乎完全一样，尽管这次它不起作用。我试过使用`invokeLater(...)`但无济于事。

这是我正在使用的基本示例：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.DefaultListModel;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;

public class ToolkitFrame extends JFrame {

    private static final long serialVersionUID = -6757985823719418526L;

    public static void main(String[] args) {
        new ToolkitFrame().construct();
    }

    private UtilityTabs utilityTabs;

    public UtilityTabs getUtilityTabs() {
        if (utilityTabs == null) {
            utilityTabs = new UtilityTabs();
        }
        return new UtilityTabs();
    }

    public ToolkitFrame() {
        super();
    }

    public void construct() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(getGameScreen(), BorderLayout.CENTER);
        add(getUtilityTabs().getTabs(), BorderLayout.EAST);
        setJMenuBar(getJMenuBar());
        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public JMenuBar getJMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        JMenu viewMenu = new JMenu("View");
        final JCheckBoxMenuItem checkbox = new JCheckBoxMenuItem("Show Utilities");
        checkbox.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                getUtilityTabs().getTabs().setVisible(checkbox.isSelected());
                System.out.println("Tabs should be: " + (checkbox.isSelected() ? "visible" : "hidden"));
            }

        });
        checkbox.setSelected(true);

        viewMenu.add(checkbox);

        menuBar.add(viewMenu);

        return menuBar;
    }

    public JPanel getGameScreen() {
        JPanel panel = new JPanel();
        panel.setPreferredSize(new Dimension(765, 503));
        panel.setBackground(Color.BLACK);
        return panel;
    }

    class UtilityTabs {

        private JTabbedPane tabs;

        public JTabbedPane getTabs() {
            return tabs;
        }

        private Tab tab;

        public Tab getTab() {
            if (tab == null) {
                tab = new Tab();
            }
            return tab;
        }

        public UtilityTabs() {
            tabs = new JTabbedPane(JTabbedPane.TOP);
            tabs.setPreferredSize(new Dimension(275, 503));
            tabs.add("FooBar", getTab());
            tabs.setVisible(true);
        }

        class Tab extends JPanel {

            private static final long serialVersionUID = 677183279827434278L;

            private DefaultListModel<String> listModel;

            private JList<String> list;

            public Tab() {
                construct();
            }

            public void construct() {
                listModel = new DefaultListModel<String>();
                for (String name : new String[] { "foo", "bar" }) {
                    listModel.addElement(name);
                }
                list = new JList<String>(listModel);
                add(new JScrollPane(list));
            }

        }

    }

} 
```

谁能告诉我我做错了什么？我基本上希望根据用户设置显示或隐藏游戏的实用程序（无需重新启动）。

使用`setVisible(false)`不会显示它们，但如果我希望它在不重新启动应用程序的情况下完成，那将无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T20:56:36.763

查看您的 getUtilityTabs 函数，无论实用程序选项卡是什么，您总是会返回一个新的实用程序选项卡。因此，设置新实用程序选项卡的可见性对您已经创建的选项卡没有任何作用。

这应该解决它：

```
 public UtilityTabs getUtilityTabs() {
    if (utilityTabs == null) {
        utilityTabs = new UtilityTabs();
    }
    return utilityTabs;
} 
```

# ios - iOS Phonegap 2.5 - 跨设备链接错误

> ID：15210889
> 
> 赞同：1
> 
> 时间：2013-03-04T20:51:15.113
> 
> 标签：ios, xcode, cordova, xcode4.6

生成空白 iOS phonegap 项目时，我收到 25 个错误，显示“跨设备链接”。

我猜任何生成空白项目的人都会看到同样的事情......

这是一个屏幕截图，供您观赏：

![错误截图](../Images/2ddb158ec00fc1d8121baf6e3c5c933a.png)

我对此进行了很多搜索，但没有提出任何解决方案或线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:40:52.483

我最初将项目创建到一个网络驱动器，这对于过去版本的 phonegap 来说从来都不是问题，但我继续尝试在本地创建它，这阻止了所有跨设备链接错误。

所以我想这是一种修复，但似乎仍然必须有一个错误或 2.5 的东西

> 更新：
> 
> Phonegap 邮件列表中的 Shazron Abdullah 证实了这一点，并建议我提交一份错误报告。
> 
> 邮件列表线程：[https ://groups.google.com/forum/?fromgroups=#!topic/phonegap/QhrbCwilGKo](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/QhrbCwilGKo)
> 
> 错误报告：[https ://issues.apache.org/jira/browse/CB-2618](https://issues.apache.org/jira/browse/CB-2618)

# google-chrome - 使用 css 一致的文本高度

> ID：15210892
> 
> 赞同：2
> 
> 时间：2013-03-04T20:51:29.887
> 
> 标签：google-chrome, dom, render, css

在一个大型测试套件中，我正在测试如何详细解释布局，并发现 Mac 和 Linux 上的 Google Chrome 以不同方式计算文本区域的大小，请参阅此 jsfiddle：

[http://jsfiddle.net/AndrasMadsen/Cspcf/](http://jsfiddle.net/AndrasMadsen/Cspcf/)

为了您的信息，我可以告诉 mac 将`<span>`框呈现为：

```
{
  "top": 8,
  "bottom": 25,
  "left": 8,
  "right": 84,
  "width": 76,
  "height": 17
} 
```

而 Linux 将其呈现为：

```
{
  "top": 8,
  "bottom": 26,
  "left": 8,
  "right": 84,
  "width": 76,
  "height": 18
} 
```

我当然可以使测试更加灵活，但是由于稍后将由计算机分析结果，因此使盒子大小保持一致非常重要。

还值得注意的是，该解决方案只需要在最新版本的 Google Chrome 上运行，如果更改字体系列可以解决问题，那就没问题了。但我想避免添加一堆自定义 CSS 属性以接近现实世界，我无法控制 CSS。然而，在这个测试套件中，我控制着 CSS，所以它是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:33:14.690

当您不指定`line-height`时，浏览器将应用它们的默认值，这应该取决于字体。设置`line-height`并不能保证所有浏览器对行框使用相同的高度，但这是一个开始。

# c# - GetBytes() 只能在二进制或 GUID 列上调用

> ID：15210895
> 
> 赞同：1
> 
> 时间：2013-03-04T20:51:36.680
> 
> 标签：c#, mysql, .net, blob, mysqldatareader

我正在使用 .NET 和 MySQL 数据库在 C# 中开发应用程序。我需要能够在数据库中插入和检索图像`LONGBLOB`，为此我有一个类型为“图像”的列。插入很顺利，但是当我尝试检索 blob 时，会弹出以下错误：

```
GetBytes() can only be called on binary or GUID columns 
```

我正在使用以下代码从数据库中进行选择：

```
 Conn.Open();
            string sql = @"SELECT `ID`, `Image`, `Note`"
                        + " FROM `Item`"
                        + " WHERE `ID` = ?ID";
            MySqlCommand cmd = new MySqlCommand(sql, Conn);
            cmd.Parameters.Add(new MySqlParameter("?ID", iD));
            cmd.Prepare();
            rdr = cmd.ExecuteReader(CommandBehavior.SequentialAccess);

            while (rdr.Read())
            {   
                this.ID= rdr.GetString("ID");
                if (!rdr.IsDBNull(1))
                {
                    long len = rdr.GetBytes(1, 0, null, 0, 0);
                    byte[] ImageBytes = new byte[len];
                    rdr.GetBytes(1, 0, ImageBytes, 0, (int)len);
                    MemoryStream ms = new MemoryStream(ImageBytes);
                    this.Image = Image.FromStream(ms);
                }
                this.Note = rdr.GetString("Note"); 
```

*尽管将列类型更改为`binary`and `varbinary`，但我仍然遇到相同的错误。*

有谁知道我在这里做错了什么？TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:03:51.217

您不能将 rdr["Image"] 转换为 byte[] 吗？

# ios - 监控 NSNotifications

> ID：15210898
> 
> 赞同：2
> 
> 时间：2013-03-04T20:52:01.900
> 
> 标签：ios, objective-c, cocoa-touch, nsnotificationcenter, nsnotifications

用户 JustSid 说，我在评论这篇文章[Overhead of NSNotifications时注意到](https://stackoverflow.com/questions/6295999/overhead-of-nsnotifications)

> 如果应用程序在每个运行循环周期中不发送 30+ 个，则开销不会很明显

我想编写一个小助手类来跟踪在当前运行循环周期中发送了多少 NSNotifications，并在它超过某个预先配置的数字时提醒我。我知道我可以注册所有通知（将 nil 传递给名称和对象），但是我如何跟踪它们是从哪个运行循环周期发送的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:20:21.053

在 NSNotificationCenter 上有一个类别很容易，它在添加通知观察者时增加一些内部整数（并因此在删除它时减少它），但你必须问自己：多少是太多了？

如果您认为它是某个任意整数（例如，为了 30），那么当您在内存和处理器限制比您现在拥有的设备更多的设备上测试它时会发生什么？如果你在一个可以轻松处理 30 个观察者和浮动通知的设备上测试它会发生什么（这完全是浪费）？虽然可以编写一般规则，但不可能在每种情况下衡量通知对应用程序响应时间的影响。

另一种可能性是当观察者的数量使某些系统功能陷入困境时，让后台进程查询通知堆栈（或以某种方式在内部像上面一样对其进行测量）。当然，忽略这项工作太多的事实，您将设计一个子系统，它可能会利用尽可能多的内存并从性能上窃取尽可能多的性能，就像您首先尝试使用它进行补救一样！

TL;DR 有很多其他的模式和结构可以用来代替通知，那么为什么要满足 NSNotification 的需求呢？

# ios - 如何读取 plist 文件然后填充 UItableView？

> ID：15210906
> 
> 赞同：2
> 
> 时间：2013-03-04T20:52:22.740
> 
> 标签：ios, objective-c, uitableview, plist

我一直在尝试从 plist 文件中读取数据。这就是它的结构

```
|term|detail(string)| 
```

我的属性：

```
@property (nonatomic, strong) NSArray *terms;
@property (nonatomic, strong) NSArray *termKeys;//this is just a array to keep track
@property (nonatomic, strong) NSString *detail; 
```

这就是我访问详细信息的方式`cellForRowAtIndexPath`

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc]
                             initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

    NSString *currentTermsName = [termKeys objectAtIndex :[indexPath row]];
                                  [[cell textLabel] setText:currentTermsName];
    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

    detail = [terms objectAtIndex:indexPath.row]; 

    NSLog(@" bombs %@",terms[@"Bomb Threats"]);
    return cell;

} 
```

并鉴于 didload 我有

```
- (void)viewDidLoad
    {
        [super viewDidLoad];

        NSString *myfile = [[NSBundle mainBundle]
                            pathForResource:@"terms" ofType:@"plist"];
        terms = [[NSDictionary alloc] initWithContentsOfFile:myfile];
        termKeys = [terms allKeys];
    } 
```

它访问值，但它为每个对象存储相同的值假设我在 plist 中有 5 条不同的记录，如果我打印详细信息，它会显示相同的记录 5 次。

设置详细信息后，我将其传递给 detialView

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"detailsegue"]){
        TermsDetailViewController *controller = (TermsDetailViewController *)segue.destinationViewController;
        controller.detailTerm = detail;
    }
} 
```

最后：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"detailsegue" sender:self];
} 
```

这是我的字典： http: [//pastebin.com/bxAjJzHp](http://pastebin.com/bxAjJzHp)

目标是将详细信息传递给 detailviewcontroller，就像 Master/detail 示例项目一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:01:07.897

您不能`detail`在方法中设置变量`cellForRowAtIndexPath:`，因为这样值会变为瞬态：它取决于用户如何滚动表格，而不是用户单击的显示按钮。

移动这条线

```
detail = [terms objectAtIndex:indexPath.row]; 
```

到`didSelectRowAtIndexPath:`之前的电话`performSegueWithIdentifier:`来解决问题。现在`detail`设置为响应用户在调用前的点击`prepareForSegue:`，确保将正确的值与详细信息一起传递给视图控制器。

# symfony - 将具有复合外键的子实体保存为使用 JMS 序列化程序反序列化的主键时出错

> ID：15210921
> 
> 赞同：5
> 
> 时间：2013-03-04T20:53:29.530
> 
> 标签：symfony, doctrine-orm

我有一个这样的 JSON 对象：

```
{
  "childEntity" : {
    "bar": "foo"
  },
  "someproperty" : "2.0"
} 
```

我使用 JMS Serializer 包来反序列化这个对象并将其转换为 Doctrine2 对象：

```
$myObject = $serializer->deserialize($jsonStringJustAbove, "My\FooBundle\Entity\masterEntity", 'json');
$myObject = $em->merge($myObject);
$myObject->persist($tour);
$myObject->flush(); 
```

这是我的“masterEntity”类：

```
class masterEntity {

 /**
     * @JMS\Type("ArrayCollection<My\FooBundle\Entity\childEntity>")
     * @ORM\OneToMany(targetEntity="childEntity", mappedBy="masterEntity", cascade={"remove", "persist", "merge"})
     */
    private $childentities;

 public function setChildEntities(ArrayCollection $childentities)
 {
     $this->childentities = $childentities;
 }

} 
```

这是我的“childEntity”类：

```
class childEntity {

 /**
     * @JMS\Type("My\FooBundle\Entity\masterEntity")
     * @ORM\ManyToOne(targetEntity="My\FooBundle\Entity\masterEntity", inversedBy="childEntities", cascade={"persist"})
     * @ORM\JoinColumn(nullable=false, onDelete="CASCADE")
     * @ORM\Id
     */
    private $masterEntity;

/**
     * @JMS\Type("My\FooBundle\Entity\barEntity")
     * @ORM\ManyToOne(targetEntity="My\FooBundle\Entity\barEntity")
     * @ORM\JoinColumn(nullable=false)
     * @ORM\Id
     */
    private $barEntity;

 public function setMasterEntity(masterEntity $masterEntity)
 {
     $this->masterEntity = $masterEntity;
 }

 public function setBarEntity(barEntity $barEntity)
 {
     $this->barEntity = $barEntity;
 }

} 
```

与所有 childEntities 一样，我收到的 JSON 对象在数据库中还不存在。

我希望反序列化器准备好将 masterEntity 和他的所有孩子保存到数据库中。我的第一个问题是：序列化程序和合并功能是这样的：

```
$masterEntity = new masterEntity();
$childEntity = new childEntity();
$childEntity->setMasterEntity($masterEntity);
$childEntity->setBarEntity($foo); 
```

我不确定，因为在尝试保存 masterEntity（第二个代码块）时收到此错误：

```
Notice: Undefined index: 0000000069332c43000000007c145082 in ../vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php line 2740 
```

注意：我使用 Symfony 2.1.8 和 Doctrine 2.3.2 和 JMS Serializer dev-master（截至 2013 年 3 月 4 日）

你能告诉我我想做的是否正确、合乎逻辑和可能？如果是，为什么会出现此错误？如何摆脱它？

谢谢。

# eclipse - EGit：修剪已在远程仓库中删除的远程跟踪分支

> ID：15210929
> 
> 赞同：36
> 
> 时间：2013-03-04T20:53:54.803
> 
> 标签：eclipse, git, egit, git-remote

我正在与一组开发人员一起使用 EGit（用于 Eclipse）。我们一直在为新工作创建很多`feature`和`fix`分支，然后`release`在完成后将它们合并到我们的分支中。在它们被合并到正确的`release`分支之后，这些临时分支通常会被删除以保持我们的远程仓库干净。

我注意到当这些分支被删除时，我将从我们的远程仓库中获取，但 EGit 不会将它们从我的远程跟踪视图中删除。我的远程跟踪视图仍将显示已删除的分支，这些分支不再位于远程存储库中（并且没有迹象表明它们已被删除）。让我的远程跟踪视图反映实际存储库的唯一方法（我发现）是手动删除我的所有远程跟踪分支（突出显示和删除），然后再次获取它们。这似乎很迂回，特别是因为您可以通过命令行修剪远程分支，如下所示：

`git remote prune origin`

**基本上，我想知道的是，当远程跟踪分支发生变化时（在我获取之后），是否有一种方法可以配置/使 EGit 执行这种修剪。**这是我当前在`origin`遥控器上的获取配置：

![在此处输入图像描述](../Images/52f41728d0cd8d3645424592e7715961.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-05T11:32:55.827

2014 年 3 月更新：正如[cheshire](https://stackoverflow.com/users/3394495/cheshire)的[回答](https://stackoverflow.com/a/22261237/6309)所提到的，[EGit 3.3](https://wiki.eclipse.org/EGit/New_and_Noteworthy/3.3)添加了修剪功能。

您可以在[JGit中看到此](https://stackoverflow.com/a/5335941/6309)[Gerrit 代码审查](https://git.eclipse.org/r/#/c/21845/)中介绍的功能（并[在此处测试](https://git.eclipse.org/r/#/c/19237/)）

中提到的[条目**`fetch.prune`**](https://stackoverflow.com/a/18718936/6309)[`git config`](http://git-scm.com/docs/git-config)可以添加到您的 Egit 配置中：

[![https://wiki.eclipse.org/images/f/f8/RepositoryConfigurationSettings.png](../Images/c7135efc304f215349f93dad3f20e7bd.png)](https://i.stack.imgur.com/KsI8M.png)

* * *

原始答案（2013 年 3 月）

> EGit 在远程跟踪分支更改时执行此修剪（在我获取之后）。

从来没听说过。

更一般地，使用钩子无法在客户端每次获取后执行任何操作。
它已[被请求](http://git.661346.n2.nabble.com/RFE-execute-post-receive-hook-on-fetch-td5602729.html)，并且有一次仅在服务器端实现：[**钩子`post-upload`**](http://git.661346.n2.nabble.com/Removal-of-post-upload-hook-td4394312.html)（在获取后运行），但出于安全原因在多用户环境中被删除。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-07T21:42:58.107

最近的[EGit 3.3 版本](https://wiki.eclipse.org/EGit/New_and_Noteworthy/3.3)引入了修剪支持。

您可以在 gitconfig 中添加一个`fetch.prune`或一个`remote.<yourremotename>.prune`键并将其设置为`true`. 当您使用 EGit 获取时，这将自动修剪在中央存储库上删除的分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-26T18:19:12.633

在 git-Settings 中设置 fetch.prune = true 可以解决问题。如果您在存储库设置中执行此操作，则可以为每个存储库设置不同的此设置。如果要对每个存储库使用此设置，最好将 fetch.prune = true 放在用户设置中。因此，您不必为每个存储库重复它。

# c# - 如何填充树结构？

> ID：15210930
> 
> 赞同：-2
> 
> 时间：2013-03-04T20:54:04.510
> 
> 标签：c#, tree

我有一个清单`MyObject1`：

```
public class MyObject1
{
   public int Id {get; set;}
   public int ParentId {get; set;}
}

List<MyObject1> list = new List<MyObject1>(); 
```

我需要使用以下方法构建树`MyObject2`：

```
public class MyObject2
    {
       public int Id {get; set;}
       public int ParentId {get; set;}
       // Here should be all child objects, that have .ParentId property is 
       // equal to .Id property of current node
       public List<MyObject2> Children = new List<MyObject2>();
    } 
```

最快的方法是什么？也许我应该在构建之前或之前对我`list`的排序？`Id``ParentId`

**ETA** 我的尝试：

```
MyObject2 root = MyObject2(1, 0); // in constructor id, parentId 

foreach (MyObject1 obj1 in list)
{
  // Traversing all tree within root (let's say myTree), 
  //if myTree.ParentId = obj1.Id then:

  myTree.Children.Add(new MyObject2(obj1.Id, obj1.ParentId));
} 
```

问题是如果`.Id`树中还没有任何对象呢？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:30:07.423

```
List<MyObject2> result = new List<MyObject2>(){new MyObject2(1, 0)};
Dictionary<int, List<MyObject2>> dict = new Dictionary<int, List<MyObject2>>();

foreach (MyObject1 obj1 in list)
{
    MyObject2 tmp = new MyObject2(obj1.Id, obj1.ParentId);
    if (!dict.ContainsKey(tmp.ParentId))
    {
        dict.Add(tmp.ParentId, new List<MyObject2>());
    }
    dict[tmp.ParentId].Add(tmp);
    result.Add(tmp);
}

foreach (MyObject2 obj2 in result)
{
    if(dict.ContainsKey(obj2.Id))
        obj2.Children = dict[obj2.Id];
} 
```

请记住，如果您更改 a `List<MyObject2>`of `dict`，您也将更改`Children`相应父级的 the 。

# eclipse - 使用 Eclipse 研究大型代码库，并跟踪方法调用

> ID：15210931
> 
> 赞同：0
> 
> 时间：2013-03-04T20:54:05.857
> 
> 标签：eclipse, debugging, trace

我开始使用非常大的代码库（大型 web 应用程序），并且希望能够查看方法调用以了解如何处理请求。因此，我想使用 Eclipse 来跟踪传入的任何请求的方法调用。我不确定，但我认为最好的方法是通过远程调试器；所以，我已经创建了一个远程调试器。现在，我的问题如下：

1.  如何配置调试器，以便一旦请求进入，调试器就会暂停，并允许我控制它的步骤。

2.  有没有更好的方法来跟踪方法调用（为了研究代码），或者使用调试器真的是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T13:21:31.050

使用跟踪模块，并排除框架或其他无趣的目录。

```
-m trace --file=/tmp/trace.log -t --ignore-dir=/home/unifield-server 
```

然后，您可以在跟踪文件运行时对其进行跟踪。

```
$ tail -f trace.log 
```

您还可以定期清除它或添加标记以供以后分析

```
$ echo > trace.log
$ echo 'about to press save button' >> trace.log 
```

# python - Python 2.7 vs 3.3：读取文件的时间大幅增加

> ID：15210933
> 
> 赞同：0
> 
> 时间：2013-03-04T20:54:21.657
> 
> 标签：python, python-2.7, python-3.3

出于某种原因，我不得不降级到 2.7。这段简单的代码在 python 3.3 中读取一个包含大约 100,000 条记录的文件不到一秒钟

```
with open(fileName) as sourceFile:
    for line in sourceFile:
        tempDict = self.createPositionLadderHash(line.rstrip().split(","))
        self.addToPositionsDictionary(tempDict)
    return self.POSITIONS_MAP 
```

但是，降级到 2.7 后，它需要 5 秒以上。难道我做错了什么？

# python - 从python字典中的值中删除字符

> ID：15210936
> 
> 赞同：0
> 
> 时间：2013-03-04T20:54:31.087
> 
> 标签：python, regex, list, dictionary, python-2.7

结构如下：

```
{"A": [{
            "A": "",
            "B": "2",
            "C": "3QWE",
            "D": 1800,
            "E": null,
            "F": null
        },
        {
            "A": "",
            "B": "2",
            "C": "XYT17",
            "D": 1800,
            "E": "3, 1*",
            "F": null
        },
        {
            "A": "",
            "B": "N8HTY",
            "C": "XYT17",
            "D": 1800,
            "E": "7,6,(5)**",
            "F": null
        },
        {
            "A": "",
            "B": "1AJ21",
            "C": "XYT17",
            "D": 1800,
            "E": "7,6,5",
            "F": null
        }
       ],
   "B": [{
            "A": "",
            "B": "LS231",
            "C": "XYT17",
            "D": 1800,
            "E": "1,2,3",
            "F": null
        },
        {
            "A": "",
            "B": "22GHE",
            "C": "XYT17",
            "D": 1800,
            "E": "3, 1*",
            "F": null
        }
      ]
} 
```

我希望将“*”和“（”和“）”从键“E”的值中删除（如果存在）“E”的输出应如下所示

即 "E":"7,6,(5)**" ---> "E":"7,6,5"

```
 "E":"3, 1*" ---> "E":"3,1"

 "E":"1,2,3" stays the same 
```

此外，如果在处理“1 *”之后我的最终输出只有一位数字说“1”，那么我如何在更新值之前将其转换为整数。

我所做的是

```
x=copy.copy(item['E']) 
for char in '*':              
  x = x.replace(char,'') 
item['E']=x 
```

这让我得到一个字符串的结果。现在，如果我希望它存储为一个整数值，如果只有一个数字，那么应该怎么做？我试过

项目['E'] = int(x)

获取 ValueError: invalid literal for int() with base 10: ''

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T20:57:52.997

假设您当前的结构存储在一个名为的变量中`data`：

```
for arr in data.values():
    for item in arr:
        item['E'] = item['E'].replace('(', '').replace(')', '').replace('*', '') 
```

这假设结构是一致的，并且`"E"`始终是字典中的键。

如果这是一个 JSON 字符串而不是 Python 字典，您首先需要解析 JSON：

```
import json
data = json.loads(json_string) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T21:01:03.273

这将从中删除任何不是数字或逗号的内容`E`：

```
import re
for a in data.values():
    for d in a:
        d['E'] = re.sub(r'[^\d,]', '', d['E']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:32:28.853

使用解决

```
 x=copy.copy(item['E']) 
 for char in '()*':              
      x = x.replace(char,'') 

 z = len(x)
 if z == 1:
      item['E'] = int(x)
  else:
     item['E'] = x 
```

# c# - Enumerable.Range(...).Any(...) 优于基本循环：为什么？

> ID：15210937
> 
> 赞同：6
> 
> 时间：2013-03-04T20:54:37.880
> 
> 标签：c#, performance, algorithm, linq

我正在将一个简单的素数生成单线从 Scala 改编为 C#（作者在[此博客](http://rickyclarkson.blogspot.com/2008/01/in-defence-of-0l-in-scala.html)的评论中提到）。我想出了以下内容：

```
int NextPrime(int from)
{
  while(true)
  {
    n++;
    if (!Enumerable.Range(2, (int)Math.Sqrt(n) - 1).Any((i) => n % i == 0))
      return n;
  }
} 
```

它可以工作，返回与运行博客中引用的代码相同的结果。事实上，它的工作速度相当快。在 LinqPad 中，它在大约 1 秒内生成了第 100,000 个素数。出于好奇，我在没有`Enumerable.Range()`and的情况下重写了它`Any()`：

```
int NextPrimeB(int from)
{
  while(true)
  {
    n++;
    bool hasFactor = false;
    for (int i = 2; i <= (int)Math.Sqrt(n); i++)
    {
        if (n % i == 0) hasFactor = true;
    }
    if (!hasFactor) return n;
  }
} 
```

直观地说，我希望它们以相同的速度运行，或者甚至让后者运行得更快一些。实际上，用第二种方法计算相同的值（第 100,000 个素数）需要**12 秒**- 这是一个*惊人*的差异。

那么这里发生了什么？从根本上说，在第二种方法中一定会发生一些额外的事情，它会占用 CPU 周期，或者在 Linq 示例的背景下进行一些优化。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T20:58:04.197

对于 for 循环的每次迭代，您都会找到 n 的平方根。而是缓存它。

```
int root = (int)Math.Sqrt(n);
for (int i = 2; i <= root; i++) 
```

正如其他人所提到的，一旦找到一个因素，就打破 for 循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T20:58:06.973

[`Enumerable.Any`](http://msdn.microsoft.com/en-us/library/bb534972.aspx)如果条件成功而您的循环不成功，则提前退出。

> `source`一旦可以确定结果，就停止枚举。

这是一个糟糕的基准测试的例子。尝试修改你的循环，看看有什么不同：

```
 if (n % i == 0) { hasFactor = true; break; }
}

throw new InvalidOperationException("Cannot satisfy criteria."); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T20:58:13.730

LINQ 版本短路，您的循环不会。我的意思是当你确定一个特定的整数实际上是一个因素时，LINQ 代码会停止，返回它，然后继续。您的代码会一直循环，直到完成。

如果您更改`for`以包含该短路，您应该会看到类似的性能：

```
int NextPrimeB(int from)
{
  while(true)
  {
    n++;
    for (int i = 2; i <= (int)Math.Sqrt(n); i++)
    {
        if (n % i == 0) return n;;
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-04T20:58:26.787

看起来这是罪魁祸首：

```
for (int i = 2; i <= (int)Math.Sqrt(n); i++)
{
    if (n % i == 0) hasFactor = true;
} 
```

一旦找到一个因素，您应该退出循环：

```
if (n % i == 0){
   hasFactor = true;
   break;
} 
```

正如其他人指出的那样，将 Math.Sqrt 调用移到循环之外，以避免在每个循环中调用它。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-04T21:25:13.497

以优化的名义，您可以通过避免 2 之后的偶数来更聪明一点：

```
if (n % 2 != 0)
{
  int quux = (int)Math.Sqrt(n);

  for (int i = 3; i <= quux; i += 2)
  {
    if (n % i == 0) return n;
  }
} 
```

还有一些其他方法可以优化主要搜索，但这是更容易做到的方法之一，并且有很大的回报。

编辑：您可能需要考虑使用 (int)Math.Sqrt(n) + 1。FP 函数 + 向下舍入可能会导致您错过一个大素数的平方。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-04T21:00:20.560

至少部分问题是`Math.Sqrt`执行的次数。在 LINQ 查询中执行一次，但在循环示例中执行 N 次。尝试将其拉出到本地并重新分析应用程序。这将为您提供更具代表性的细分

```
int limit = (int)Math.Sqrt(n);
for (int i = 2; i <= limit; i++) 
```

# c# - 安装项目和 IIS

> ID：15210940
> 
> 赞同：0
> 
> 时间：2013-03-04T20:54:41.013
> 
> 标签：c#, iis, windows-installer, setup-project, web-platform-installer

我正在使用 Visual Studio 2010 创建一个新的安装项目。

我有一个现有的应用程序，其中包含一些 .aspx 文件以及一些其他目录。该应用程序有许多其他非 ASP.Net 文件，例如 exes 和 dll。

我不太确定是应该创建一个“Web”安装项目还是创建一个简单的安装项目？

我正在为此寻找一些建议。

任何类型的输入表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:40:20.117

请注意，这些项目类型已在 VS2012 中删除。假设您完全想投资这项技术，“Web”安装项目会处理 IIS 配置。“设置”项目只是文件复制。

我的输入是直接转到 Windows Installer XML 或 InstallShield Limited Edition。

# ruby-on-rails - 找不到设计注册 URL

> ID：15210951
> 
> 赞同：0
> 
> 时间：2013-03-04T20:55:31.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

自定义注册路线后，我的设计有问题。设计文档提到，可以轻松自定义路由，因此我尝试在 URL 中添加一个令牌以设置一个简单的邀请系统。真的很简单，我所做的只是添加

```
devise_for :users, :path_names => { :sign_up => "signup/:invitation_token" } 
```

到我的路线。一个邮寄者发送一封带有令牌的电子邮件，我在里面通过

```
new_user_registration_path(@invitation.token) 
```

耙路线说

```
 new_user_registration GET    /users/signup/:invitation_token(.:format)     devise/registrations#new 
```

但我仍然得到

```
 No route matches {:action=>"new", :controller=>"devise/registrations", :locale=>:de, :invitation_token=>nil} 
```

无论我是否通过令牌，我都明白...

我不知道我错过了什么。在此先感谢，希望有人看到我做错了什么。

问候，罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:28:19.547

检查`@invitation.token`以确保它不是`nil`.

您目睹的错误将发生在您传递`nil`到`new_user_registration_path`链接标签的任何视图上。

请记住，您需要覆盖 Devise`users/registration`控制器的默认行为，以使您的邀请系统正常工作。像这样的东西会起作用：

```
# routes.rb
devise_for :users, :path_names => { :sign_up => "signup/:invitation_token" }, :controllers => {:registrations => "users/registrations"}

# app/controllers/users/registrations_controller.rb
class RegistrationsController < Devise::RegistrationsController
    def create
        # add custom create logic here
    end
end 
```

# javascript - 使用 Google Apps 脚本从 JDBC 连接中获取超过 1 个值

> ID：15210952
> 
> 赞同：0
> 
> 时间：2013-03-04T20:55:33.430
> 
> 标签：javascript, jdbc, google-apps-script

我有一个使用 GAS 到 MSSQL 的 JDBC 连接，我正在使用的数据库具有与特定类关联的类名和日期。

我正在尝试检索与**Advanced Ventilator Skills Review**课程相关的所有日期。当我运行以下代码时，我在日志中看到的只是添加到与上述类关联的数据库的最后日期。谁能帮我吗？我想获取与课程相关的所有日期，最好在下拉菜单中显示这些日期。

```
//Read from Database
function read(e) {

   var app = UiApp.getActiveApplication();

var conn = Jdbc.getConnection("jdbc:sqlserver://IPAddress:1433;" +
   "databaseName=databaseName;user=User;password=Password;");

  var stmt = conn.createStatement();
  var rs = stmt.executeQuery("SELECT * from dbo.tbl_ClassDetail WHERE className = 'Advanced Ventilator Skills Review'");

  while(rs.next()) {
    var class = rs.getString('className');
    var date = rs.getString('classDate');
    var time = rs.getString('classTime');
  }

  Logger.log(date);

  rs.close();
  stmt.close();
  conn.close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:48:51.563

1.  在 while 循环中将结果收集到数组*results.push(class,date,time)中。*从这个函数返回结果
2.  使用[https://developers.google.com/apps-script/class_listbox](https://developers.google.com/apps-script/class_listbox)中的示例，并在您的节目或 UiApp 中使用返回的结果数组并将它们添加到 for 或 while 循环中

    var 结果 = 读取（e）；

    for (i=0; i < results.length; i++) { lb.addItem [i][1];

    ```
    } 
    ```

# dynamic - 如何获取系统用户的所有角色？

> ID：15210953
> 
> 赞同：3
> 
> 时间：2013-03-04T20:55:33.683
> 
> 标签：dynamic, dynamics-crm-2011

我正在尝试提取分配给系统用户的所有角色。我想我需要使用关联实体，但我不确定我应该如何继续使用该方法。这是我的代码片段：

```
Uri organizationUri = new Uri(this.ConnectionString);
Uri homeRealmUri = null;
ClientCredentials credentials = new ClientCredentials();
credentials.UserName.UserName = ConfigUserName;
credentials.UserName.Password = ConfigPassword;

Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy orgProxy = new Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy(organizationUri, homeRealmUri, credentials, null);
IOrganizationService _service = (IOrganizationService)orgProxy;

Microsoft.Xrm.Sdk.Entity account = new Microsoft.Xrm.Sdk.Entity("systemuser");
QueryExpression query = new QueryExpression
{
    EntityName = account.LogicalName,
    ColumnSet = new ColumnSet(true)
};
DataCollection<Microsoft.Xrm.Sdk.Entity> users = _service.RetrieveMultiple(query).Entities;

// fetch assigned roles of users 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:49:30.950

这是我提取特定用户的所有角色的实现

```
QueryExpression query = new QueryExpression();
query.EntityName = "role";
query.ColumnSet = new ColumnSet(true);

LinkEntity role = new LinkEntity();
role.LinkFromEntityName = "role";
role.LinkFromAttributeName = "roleid";
role.LinkToEntityName = "systemuserroles";
role.LinkToAttributeName = "roleid";

LinkEntity userRoles = new LinkEntity();
userRoles.LinkFromEntityName = "systemuserroles";
userRoles.LinkFromAttributeName = "systemuserid";
userRoles.LinkToEntityName = "systemuser";
userRoles.LinkToAttributeName = "systemuserid";

ConditionExpression conditionExpression = new ConditionExpression();
conditionExpression.AttributeName = "systemuserid";
conditionExpression.Operator = ConditionOperator.Equal;
conditionExpression.Values.Add(userId);

userRoles.LinkCriteria = new FilterExpression();
userRoles.LinkCriteria.Conditions.Add(conditionExpression);

role.LinkEntities.Add(userRoles);
query.LinkEntities.Add(role);

DataCollection<Microsoft.Xrm.Sdk.Entity> userRoles = _service.RetrieveMultiple(query).Entities;
return userRoles; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T21:07:57.670

MSDN 上有一个用于检查用户安全角色的示例，应该可以帮助您完成此操作。

[示例：确定用户是否具有角色](http://msdn.microsoft.com/en-us/library/jj602961.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T15:24:50.150

使用生成的早期绑定 CRM 实体的以下 Linq 查询将执行您的操作：

```
var query = from user in context.SystemUserSet
            join userRoles in context.SystemUserRolesSet on user.SystemUserId equals userRoles.SystemUserId
            join role in context.RoleSet on userRoles.RoleId equals role.RoleId
            where user.DomainName == '<username>'
            select role; 
```

可以在此处找到有关生成早期绑定实体的信息：[CrmSvcUtil 用法](http://msdn.microsoft.com/en-gb/library/ff681561.aspx)

# ruby-on-rails - validate_presence_of 父属性 mongoid

> ID：15210954
> 
> 赞同：0
> 
> 时间：2013-03-04T20:55:36.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, mongoid

User.rb 模型

```
class User
  include Mongoid::Document
  # relationships 
  has_one :post

  #fields
  field :name, :type => String
  field :last_name, :type => String
end 
```

Post.rb 模型

```
class Post
  include Mongoid::Document

  # relationships 
  belongs_to :user

  #fields
  field :title, :type => String
  field :description, :type => String

  #validations here

end 
```

**在创建帖子之前，我想验证用户是否拥有 a`name`和 a `last_name`。另外，如果用户没有`name`或我想显示一个错误`last_name`**

**这些验证是在带有回调的模型上执行的，还是必须在控制器上执行的？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:24:55.120

```
class Post
  include Mongoid::Document

  # relationships 
  belongs_to :user

  #fields
  field :title, :type => String
  field :description, :type => String

  #validations here
  validates_associated :user
  validate :must_have_name
  def must_have_name
    if !(user.present? && (user.name.present?  || user.last_name.present?))
      errors.add(:user, "add user name")
    end
  end
end 
```

# php - 在没有 CVV 的情况下提交 Authorize.net 付款

> ID：15210961
> 
> 赞同：1
> 
> 时间：2013-03-04T20:56:05.590
> 
> 标签：php, api, authorize.net, merchant-account

我正在尝试使用 AIM API 提交没有 CVV 编号的付款。我可以提交付款，但是当收费发生时，即使我没有提交 NULL 以外的值，它也会在商户界面中显示 CVV 编号不匹配（“不匹配”）。如果我通过 Authorize.net 的商户界面提交相同的付款，它会显示“不适用”。是否可以通过 API 完成此操作？

谢谢

方法一：

```
$payment->setTransaction($credit_card_number, $expiration, $total); 
```

方法二：

```
$payment->setTransaction($credit_card_number, $expiration, $total, NULL, $invoice, $tax); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:17:37.663

我可以从该代码片段中看出您正在使用[我编写的 AuthnetAIM 类](http://www.johnconde.net/blog/tutorial-integrating-the-authorizenet-aim-api-with-php/)。为了使此类在`null`更改此行时永远不会发送 CVV 参数：

```
$this->params['x_card_code'] = str_pad((int) $cvv, 3, "0", STR_PAD_LEFT); 
```

对此：

```
if (!is_null($cvv))
{
    $this->params['x_card_code'] = str_pad((int) $cvv, 3, "0", STR_PAD_LEFT);
} 
```

# python - 在 pandas 0.10.1 上使用 pandas.read_csv 指定 dtype float32

> ID：15210962
> 
> 赞同：43
> 
> 时间：2013-03-04T20:56:12.807
> 
> 标签：python, pandas, numpy

我正在尝试使用 pandas`read_csv`方法读取一个简单的空格分隔文件。然而，熊猫似乎并没有服从我的`dtype`论点。也许我错误地指定了它？

我已经`read_csv`对这个简单的测试用例进行了一些复杂的调用。我实际上`converters`在我的“真实”场景中使用了这个参数，但为了简单起见，我删除了它。

下面是我的 ipython 会话：

```
>>> cat test.out
a b
0.76398 0.81394
0.32136 0.91063
>>> import pandas
>>> import numpy
>>> x = pandas.read_csv('test.out', dtype={'a': numpy.float32}, delim_whitespace=True)
>>> x
         a        b
0  0.76398  0.81394
1  0.32136  0.91063
>>> x.a.dtype
dtype('float64') 
```

我也尝试过将其与`dtype`of `numpy.int32`or一起使用`numpy.int64`。这些选择会导致异常：

```
AttributeError: 'NoneType' object has no attribute 'dtype' 
```

我假设这`AttributeError`是因为熊猫不会自动尝试将浮点值转换/截断为整数？

我正在使用 32 位版本的 Python 的 32 位机器上运行。

```
>>> !uname -a
Linux ubuntu 3.0.0-13-generic #22-Ubuntu SMP Wed Nov 2 13:25:36 UTC 2011 i686 i686 i386 GNU/Linux
>>> import platform
>>> platform.architecture()
('32bit', 'ELF')
>>> pandas.__version__
'0.10.1' 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-04T23:33:05.293

0.10.1 并不太支持 float32

看到这个[http://pandas.pydata.org/pandas-docs/dev/whatsnew.html#dtype-specification](http://pandas.pydata.org/pandas-docs/dev/whatsnew.html#dtype-specification)

您可以像这样在 0.11 中执行此操作：

```
# dont' use dtype converters explicity for the columns you care about
# they will be converted to float64 if possible, or object if they cannot
df = pd.read_csv('test.csv'.....)

#### this is optional and related to the issue you posted ####
# force anything that is not a numeric to nan
# columns are the list of columns that you are interesetd in
df[columns] = df[columns].convert_objects(convert_numeric=True)

    # astype
    df[columns] = df[columns].astype('float32')

see http://pandas.pydata.org/pandas-docs/dev/basics.html#object-conversion

Its not as efficient as doing it directly in read_csv (but that requires
 some low-level changes) 
```

我已经确认使用 0.11-dev，这确实有效（在 32 位和 64 位上，结果相同）

```
In [5]: x = pd.read_csv(StringIO.StringIO(data), dtype={'a': np.float32}, delim_whitespace=True)

In [6]: x
Out[6]: 
         a        b
0  0.76398  0.81394
1  0.32136  0.91063

In [7]: x.dtypes
Out[7]: 
a    float32
b    float64
dtype: object

In [8]: pd.__version__
Out[8]: '0.11.0.dev-385ff82'

In [9]: quit()
vagrant@precise32:~/pandas$ uname -a
Linux precise32 3.2.0-23-generic-pae #36-Ubuntu SMP Tue Apr 10 22:19:09 UTC 2012 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T09:38:10.550

```
In [22]: df.a.dtype = pd.np.float32

In [23]: df.a.dtype
Out[23]: dtype('float32') 
```

以上对我来说在 pandas 0.10.1 下工作正常

# c++ - （编译器错误）为什么 C++ 找不到 .h 文件，即使它在那里？

> ID：15210964
> 
> 赞同：2
> 
> 时间：2013-03-04T20:56:18.740
> 
> 标签：c++, compiler-errors

我正在尝试运行一个 C++ 文件，即experiment.cpp。在编译 .cpp 文件时，我收到 RL_glue.h 不存在的错误，即使 RL_glue.h 与 C++ 文件位于同一目录中。我恳请您就这个问题提出建议。谢谢！

包括如下：

```
#include <stdio.h>
#include <iostream>
#include <math.h>
#include <stdlib.h>
#include <RL_glue.h>
#include <RL_common.h> 
```

虽然我按照评论中的建议进行了更改：

```
#include <stdio.h>
#include <iostream>
#include <math.h>
#include <stdlib.h>
#include "RL_glue.h"
#include "RL_common.h" 
```

我使用的编译器是 gcc 4.6.3，编译命令是 g++ -Wall -c "%f"

更正：随着“....”的变化，编译器找到了 RL_glue.h，然而，它却特别找不到 RL_common.h。

确切的编译器错误：

```
g++ -Wall -c "experiment.cpp" (in directory: /home/issam/Helicopter_Control/Code/Release)
In file included from experiment.cpp:9:0:
./RL_glue.h:4:23: fatal error: RL_common.h: No such file or directory
compilation terminated.
Compilation failed. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T21:24:52.020

注意编译器错误位置：

```
./RL_glue.h:4:23 
```

错误是在include`RL_glue.h`中`RL_common.h`，而不是在您对该文件的 include 中。那是因为在文件 RL_glue.h 的第 4 行中有类似的内容：

```
#include <RL_common.h> 
```

代替：

```
#include "RL_common.h" 
```

您可以替换该行，或者更简单的是添加`-I.`到编译器选项，以便`.`搜索当前目录，无论包含样式如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:58:51.917

查找包含文件的规则因编译器而异，而且你没有说你使用的是哪一个，所以很难说......但无论如何我都会尝试。

通常，使用时`#include <file>`在系统目录中搜索，编写`#include "file"`时在项目目录中搜索。

我的猜测是，`<>`当您应该使用`""`语法时，您正在使用该样式。

如果这不起作用，您可能需要将当前目录添加到搜索路径，通常使用`-I.`编译器选项，或者如果您使用 IDE，则在项目选项中搜索。

# unix - 使用 cygwin 和 hadoop 创建文件

> ID：15210965
> 
> 赞同：1
> 
> 时间：2013-03-04T20:56:27.117
> 
> 标签：unix, hadoop, cygwin

我正在使用本教程来设置第一个 hadoop 项目：

[http://hadoop.apache.org/docs/r0.18.3/mapred_tutorial.html#Source+Code](http://hadoop.apache.org/docs/r0.18.3/mapred_tutorial.html#Source+Code)

我对这部分感到困惑：

```
Sample text-files as input:

$ bin/hadoop dfs -ls /usr/joe/wordcount/input/ 
/usr/joe/wordcount/input/file01 
/usr/joe/wordcount/input/file02 

$ bin/hadoop dfs -cat /usr/joe/wordcount/input/file01 
Hello World Bye World 

$ bin/hadoop dfs -cat /usr/joe/wordcount/input/file02 
Hello Hadoop Goodbye Hadoop 
```

如何创建文件 file01 和 file02 ？

当我运行上面的命令 () 时，我收到错误：“文件不存在 /usr/joe/wordcount/input/file01”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:14:45.557

您可以使用文件编辑器在 cygwin 上创建文件，`vim`或者`emacs`（不确定）。

或者您可以在下面复制粘贴来创建文件。

```
echo "Hello World Bye World" >  /usr/joe/wordcount/input/file01
echo "Hello Hadoop Goodbye Hadoop" > /usr/joe/wordcount/input/file02 
```

还有其他更巴洛克式的技术可以将简单数据放入文件中，但是鉴于您的问题定义，这应该可以正常工作。

（另一种可能性，...。这些文件可能是测试或教程安装的一部分，而您错过了运行安装的步骤？如果创建这些文件后，遇到新的错误消息，请考虑 dbl-checking you确认所有安装正确的步骤）

IHTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:20:24.787

ru 指向同一条路径？？否则从本地文件系统创建文件。然后使用`copyFromLocal`命令将其放入 HDFS。然后 cat 文件路径/文件名。这行得通。

```
bin/hadoop fs -copyFromLocal /path/to/file/in/localfilesys/file01 /usr/joe/wordcount/input
bin/hadoop fs -cat /usr/joe/wordcount/input/file01 
```

# jquery - Jquery 淘汰赛 - 在模板中定义变量

> ID：15210966
> 
> 赞同：4
> 
> 时间：2013-03-04T20:56:29.390
> 
> 标签：jquery, knockout.js, jquery-templates

我有一个淘汰赛模板，我想在其中定义一个本地参数（它是函数的结果），并在模板中使用它。

```
<script type="text/html" id="suggestedEmail-template">
    {{ var customVariable = processResult($data); }}
    <li>
        <span data-bind="text: emailValue, attr: { 'data-customValue': customVariable }"></span>
    </li>
</script> 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-19T18:25:38.560

您可以执行以下操作：

```
<script type="text/html" id="suggestedEmail-template">
    <!-- ko if: customVariable = processResult($data) -->
    <li>
        <span data-bind="text: emailValue, attr: { 'data-customValue': customVariable }"></span>
    </li>
    <!-- /ko -->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:00:51.530

这听起来像是[计算变量](http://knockoutjs.com/documentation/computedObservables.html)的工作：

在您的视图模型内部：

```
var self = this;
self.customVariable = ko.computed(function()
{
    return processResult(this);
}; 
```

然后在你的html中：

```
<span data-bind="text: emailValue, attr: { 'data-customValue': customVariable }"></span> 
```

# sql - 在 PostgreSQL 中编写一个仅在工作日选择数据的函数

> ID：15210967
> 
> 赞同：11
> 
> 时间：2013-03-04T20:56:34.290
> 
> 标签：sql, postgresql, postgresql-8.3

我正在开发一个 Postgres 8.3 数据库。我使用的查询旨在仅选择工作日中包含的行。现在我已经像下面的示例中那样手动执行此操作，但我想将其转移到一些功能，我可以在其中指定开始和结束日期并获得相同的逻辑来应用如下。那是

> 如何创建一个输入为开始日期和结束日期的函数，该函数的结果将是选择仅包含在数据集的工作日中的所有行（我想排除每个 staurday 和 sunday 作为 where 子句条件以下）？

```
create table filter_tbl as
select *
from base_tbl  where
(start_Time >= '2012-11-5' and start_Time < '2012-11-10')
or (start_time >= '2012-11-12' and start_time < '2012-11-17')
or (start_time >= '2012-11-19' and start_time < '2012-11-24')
or (start_time >= '2012-11-26' and start_time < '2012-12-01')
or (start_time >= '2012-12-03' and start_time < '2012-12-07')
or (start_time >= '2012-12-10' and start_time < '2012-12-14')
or (start_time >= '2012-12-17' and start_time < '2012-12-21')
or (start_time >= '2012-12-24' and start_time < '2012-12-28')
or (start_time >= '2012-12-31' and start_time < '2013-01-04')
or (start_time >= '2013-01-07' and start_time < '2013-01-11')
or (start_time >= '2013-01-14' and start_time < '2013-01-18')
or (start_time >= '2013-01-21' and start_time < '2013-01-25')
or (start_time >= '2013-01-28' and start_time < '2013-02-02')
or (start_time >= '2013-02-04' and start_time < '2013-02-09')
or (start_time >= '2013-02-11' and start_time < '2013-02-16')
or (start_time >= '2013-02-18' and start_time < '2013-02-23')
or (start_time >= '2013-02-25' and start_time < '2013-03-02')
or (start_time >= '2013-03-04' and start_time < '2013-03-09')
or (start_time >= '2013-03-11' and start_time < '2013-03-16'); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-04T21:13:15.633

根据您的示例，这似乎`start_time`是文本。然后您需要将其转换为`timestamp`using `to_timestamp`，然后使用`EXTRACT`.

您的`WHERE`条款将是这样的：

```
WHERE EXTRACT(dow FROM timestamp (to_timestamp(start_time, "YYYY-MM-DD"))
NOT IN (0,6) 
```

链接：[数据类型格式化函数](http://www.postgresql.org/docs/8.2/static/functions-formatting.html)和[日期/时间函数和运算符](http://www.postgresql.org/docs/8.2/static/functions-datetime.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-04T21:01:32.277

```
select *
from base_tbl  
where extract(dow from start_time) in (1,2,3,4,5) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T21:01:19.637

检查[日期时间功能](http://www.postgresql.org/docs/8.3/static/functions-datetime.html)

例如

```
SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40'); 
```

返回`5`，代表`Friday`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T21:01:32.210

以下应返回星期几。

```
date_part('dow', Date); 
```

默认设置 0 是星期日，6 是星期六

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-17T11:00:50.763

```
select to_char(date, 'Day') from table 
```

# javascript - 只定义一次函数。如何？

> ID：15210969
> 
> 赞同：0
> 
> 时间：2013-03-04T20:56:43.027
> 
> 标签：javascript, ajax

我检查 NS.ajax 是否存在。如果是这样，我不需要重新定义它。如果它不存在，我重新定义它。

我想验证这是否符合我的想法，如果我已经定义了 NS.ajax，我不会浪费时间解释下面的函数。

NS.ajax 与下面看到的匿名函数相同。

有人可以验证吗？

```
/*ajax
**
**
**
*/
$P.ajax = (function () {
    if (NS.ajax) {
        return NS.ajax;
    }
    return function (config) {
        var xhr;
        if (config.type === 'get') {
            xhr = new window.XMLHttpRequest();
            xhr.open('GET', config.url, true);
            xhr.onreadystatechange = function () {
                if (this.readyState === 4) {
                    if (this.status === 200) {
                        config.callback(xhr.responseText);
                    } else {
                        return false;
                    }
                }
            };
            xhr.send(null);
            return;
        }
    };
}()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:01:16.647

做就是了：

```
$P.ajax = NS.ajax || (function () {
...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:00:35.740

`NS.ajax`您可以在同一行中返回或您自己的函数。

```
return NS.ajax || function (config) {... 
```

# wso2 - 如何从 WSO2 ESB 和注册表访问系统属性

> ID：15210972
> 
> 赞同：0
> 
> 时间：2013-03-04T20:56:54.437
> 
> 标签：wso2, wso2esb

我的 WSO2 ESB 代理服务引用了一个端点，该端点位于各种环境（DEV、TEST、PROD）中的不同 URL。根据 WSO2 文档，我需要将端点定义存储在治理注册表中，并在每个环境中修改端点 XML 文件中的 URL。对于拥有 1 个或 2 个代理的组织来说，这可能工作得很好，但对于 10 个以上的代理来说，这会成为一笔巨大的开销。

另一种情况是当我需要在我的 ESB 序列中读取某些特定于环境的属性时。

有没有办法在外部 *.properties 文件中定义一堆属性，然后在 ESB 和注册表定义中读取它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T07:23:18.760

您可以使用脚本中介访问 ESB 序列/代理服务中的系统属性，如下所示；

```
 <script language="js">mc.setProperty("file.separator",java.lang.System.getProperty("file.separator"));</script>
    <log level="custom">
       <property name="file.separator" expression="get-property('file.separator')"/>
    </log> 
```

这里“file.separator”属性设置为脚本中介内消息上下文中的属性，可以在后续中介中使用。

您还可以访问在 ESB 注册表中的文件中定义的属性。例如，如果您在配置注册表 (test.xml) 中有一个包含以下内容的文件，

```
<a>Helloo<b>World</b></a> 
```

`<b>`可以使用属性中介访问文本元素“World”，如下所示，

```
<property name="test" expression="get-property('registry','conf:/test.xml')" scope="default" type="OM"/>
<log level="custom">
      <property name="test.b" expression="$ctx:test//b"/>
</log> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:16:29.323

这是[一篇](http://vvratha.blogspot.com/2013/02/accessing-registry-resources-from-class.html)关于如何从类编辑器访问注册表资源的博客文章[1](http://vvratha.blogspot.com/2013/02/accessing-registry-resources-from-class.html)。您可以访问帖子中提到的任何资源并进行修改。

同样，您可以保留外部属性文件并从 classmeditor 读取该文件，并使用 classmeditaor 在突触消息上下文中设置所有属性。

# php - 如果 PHP GET 不存在，则返回一个值？

> ID：15210973
> 
> 赞同：-3
> 
> 时间：2013-03-04T20:56:55.960
> 
> 标签：php, url, get, return-value

我有很多 PHP 语句：

```
$getvalue = $_GET['valueiwant']; 
```

在某些情况下，并非所有变量都可用。那么，假设 URL 字符串中不存在“valueiwant”，我如何根据它不存在的事实返回一个值？

例如，如果找不到“valueiwant”，请将 $getvalue 设置为 -1

目前看来，该值默认为 0，如果它不存在，我需要小于 0。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T20:57:54.727

我总是用

```
$getvalue=isset($_GET['valueiwant'])?$_GET['valueiwant']:-1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:58:27.143

使用[isset()](http://php.net/manual/en/function.isset.php)函数检查偏移量是否存在，并返回一个布尔值，表明它存在。

这意味着您可以围绕输出构建一个 if 语句。

# ember.js - 无法呈现带有嵌入模板的视图

> ID：15210975
> 
> 赞同：1
> 
> 时间：2013-03-04T20:56:58.677
> 
> 标签：ember.js

使用 Ember 1.0.0-rc.1 提供一个简单的示例应用程序：

```
App = Ember.Application.create({
LOG_TRANSITIONS: true
});

App.ApplicationView = Ember.View.extend({ templateName: 'application' });
App.IndexView  = Ember.View.extend({ 
    template : Ember.Handlebars.compile('Hello new Ember!')
}); 
```

[http://jsfiddle.net/nL5vf/](http://jsfiddle.net/nL5vf/)

IndexView 无法渲染，因为在渲染期间它的视图设置为“未定义”。是故意的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:44:04.977

It seems like you can't replace the template of any routed view in this fashion. You can do this for other views however.

The following renders nothing:

```
App = Ember.Application.create();
App.IndexView = Ember.View.extend({
    template: Ember.Handlebars.compile('Hello new Ember!')
}); 
```

But this does:

```
App = Ember.Application.create();
App.MyView = Ember.View.extend({
    template: Ember.Handlebars.compile('Hello new Ember!')
}); 
```

(template)

```
<script type="text/x-handlebars" data-template-name="index">
    {{view App.MyView}}
</script> 
```

I'll have to let someone more qualified weigh in as to whether or not this is intentional.

# python - 向函数添加变量测试

> ID：15210976
> 
> 赞同：1
> 
> 时间：2013-03-04T20:57:02.463
> 
> 标签：python, functional-programming

所以我只是询问了函数列表，现在我想看看我是否可以，我猜是让一个字符串成为非字符串？我完全不知道该怎么说。这个想法是向函数传递一个包含它应该执行的测试的字符串。所以代码会是这样的：

```
def newFunct(result, test):
    return (lambda x: result if(test) else "") 
```

当我尝试时，它把它当作一个字符串并且总是返回 true。

有没有办法投射它或其他东西，所以当我打电话时`newFunct("Even", "x%2==0")`会返回`lambda x: "Even" if(x%2==0) else ""`而不是`lambda x: "Even" if("x%2==0") else ""`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:00:11.700

这可以通过以下功能完成`eval`：

```
def newFunct(str, test):
    return (lambda x: str if eval(test, {"x": x}) else "")
is_even = newFunct("even", "x % 2 == 0")
is_even(4)
# "even"
is_even(10)
# "even"
is_even(13)
# "" 
```

请注意，使用`eval`可能很危险，*尤其是*当您使用用户输入的字符串时。最好将函数作为`test`参数：

```
def newFunct(str, test):
    return (lambda x: str if test(x) else "")
is_even = newFunct("even", lambda x: x % 2 == 0) 
```

# haskell - 哈斯克尔：| 在班级声明中

> ID：15210978
> 
> 赞同：2
> 
> 时间：2013-03-04T20:57:03.260
> 
> 标签：haskell, typeclass, functional-dependencies

我正在[*逐步阅读 Monad Transformers*](http://www.cs.virginia.edu/~wh5a/personal/Transformers.pdf)。在第 6 页，`Monad`作者在介绍 的一些子类的同时，给出了以下代码示例：

```
class (Monad m) => MonadError e m | m -> e where
    throwError :: e -> m a
    catchError :: m a -> (e -> m a) -> m a

class (Monad m) => MonadReader r m | m -> r where
    ask :: m r
    local :: (r -> r) -> m a -> m a 
```

部分是什么`| m -> e`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T21:22:55.963

这是一个*功能依赖*。它是 GHC 中可用的扩展。[您可以在此处](http://www.haskell.org/haskellwiki/Functional_dependencies)阅读有关它们的更多信息，但它们传达的基本思想是其中一种类型“确定”另一种类型。它们最近失宠了，因为字体家族可以传达相同的信息甚至更多信息，但以更容易理解、更实用的方式。

**编辑**：一个例子，取自[我一年前就这个话题提出的问题](https://stackoverflow.com/questions/8598010/haskell-shuffling-data-without-functional-dependencies)。

我从使用功能依赖项的代码开始：

```
class Shuffle a b | a -> b where
  indices    :: a -> Array Int b
  reorganize :: a -> Array Int b -> a 
```

@ehird 对此解决方案做出了回应：

```
class Shuffle a where
  type Elt a
  indices    :: a -> Array Int (Elt a)
  reorganize :: a -> Array Int (Elt a) -> a 
```

所以发生的事情本质上是箭头“a -> b”表示“a 确定 b”被更改为类型族，其中“a”是类型变量，类型“b”列在类型类中。

# java - 设置新 TreeModel 时如何自动扩展 JTree？

> ID：15210979
> 
> 赞同：21
> 
> 时间：2013-03-04T20:57:27.847
> 
> 标签：java, swing, tree, jtree

我有一个习惯`JTree`和一个习惯`JModel`；当我给它一个新模型时，我希望 JTree “自动扩展”。目前，它只是将所有节点折叠到根。

这是一个例子：

```
private class CustomTree extends JTree {

    @Override
    public boolean isExpanded(TreePath path) {
        return ((Person) path.getLastPathComponent).hasChildren();

}

private class CustomTreeModel extends TreeModel {

    // ... omitting various implementation details

    @Override
    public boolean isLeaf(Object object) {
        return !((Person) object).hasChildren();
    }

}

Model model = new Model();
Person bob = new Person();
Person alice = new Person();
bob.addChild(alice);
model.setRoot(bob);
JTree tree = new CustomTree(new CustomTreeModel(model)); 
```

此时，树正确显示：

```
- BOB
  - ALICE 
```

其中 Alice 是 Bob 的孩子（在数据和可视化树中）

但是，如果我打电话：

```
tree.setModel(new CustomTreeModel(model)); 
```

一切都崩溃了：

```
+ BOB 
```

**设置新模型时，有没有办法“自动扩展”树中的所有内容？**

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-04T21:42:43.330

以下对我有用（在设置新模型后调用）：

```
for (int i = 0; i < tree.getRowCount(); i++) {
    tree.expandRow(i);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-12T17:32:07.657

我有一个类似的问题。

您的解决方案（如发布的[https://stackoverflow.com/a/15211697/837530](https://stackoverflow.com/a/15211697/837530)）似乎仅适用于顶级树节点。

但是我需要扩展所有的后代节点。所以我用以下递归方法解决了它：

```
private void expandAllNodes(JTree tree, int startingIndex, int rowCount){
    for(int i=startingIndex;i<rowCount;++i){
        tree.expandRow(i);
    }

    if(tree.getRowCount()!=rowCount){
        expandAllNodes(tree, rowCount, tree.getRowCount());
    }
} 
```

被调用

```
expandAllNodes(tree, 0, tree.getRowCount()); 
```

其中，`tree`是一个`JTree`。

除非有人有更好的解决方案。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-27T19:47:51.703

还有这个非递归版本。

```
private void expandAllNodes(JTree tree) {
    int j = tree.getRowCount();
    int i = 0;
    while(i < j) {
        tree.expandRow(i);
        i += 1;
        j = tree.getRowCount();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-17T13:26:29.453

这对我有用..

```
import javax.swing.*;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreePath;
import javax.swing.tree.TreeNode;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.util.Enumeration;

public class JTreeNodeAutoExpandCollapse extends JFrame {
    public JTreeNodeAutoExpandCollapse() throws HeadlessException {
        initializeUI();
    }

    private void initializeUI() {
        setSize(200, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DefaultMutableTreeNode root = new DefaultMutableTreeNode("Root");
        DefaultMutableTreeNode chapter1 = new DefaultMutableTreeNode("Chapter 1");
        DefaultMutableTreeNode sub1 = new DefaultMutableTreeNode("1.1");
        DefaultMutableTreeNode sub2 = new DefaultMutableTreeNode("1.2");
        DefaultMutableTreeNode sub3 = new DefaultMutableTreeNode("1.3");
        DefaultMutableTreeNode sub31 = new DefaultMutableTreeNode("1.3.1");
        DefaultMutableTreeNode sub32 = new DefaultMutableTreeNode("1.3.2");

        root.add(chapter1);
        chapter1.add(sub1);
        chapter1.add(sub2);
        chapter1.add(sub3);
        sub3.add(sub31);
        sub3.add(sub32);

        final JTree tree = new JTree(root);
        expandTree(tree, false);

        JScrollPane pane = new JScrollPane(tree);
        pane.setPreferredSize(new Dimension(200, 200));

        JPanel buttonPanel = new JPanel(new BorderLayout());
        JButton expandAll = new JButton("Expand All");
        expandAll.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                expandTree(tree, true);
            }
        });

        JButton collapseAll = new JButton("Collapse All");
        collapseAll.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                expandTree(tree, false);
            }
        });

        buttonPanel.add(expandAll, BorderLayout.WEST);
        buttonPanel.add(collapseAll, BorderLayout.EAST);

        getContentPane().setLayout(new BorderLayout());
        getContentPane().add(pane, BorderLayout.CENTER);
        getContentPane().add(buttonPanel, BorderLayout.SOUTH);
    }

    private void expandTree(JTree tree, boolean expand) {
        TreeNode root = (TreeNode) tree.getModel().getRoot();
        expandAll(tree, new TreePath(root), expand);
    }

    private void expandAll(JTree tree, TreePath path, boolean expand) {
        TreeNode node = (TreeNode) path.getLastPathComponent();

        if (node.getChildCount() >= 0) {
            Enumeration enumeration = node.children();
            while (enumeration.hasMoreElements()) {
                TreeNode n = (TreeNode) enumeration.nextElement();
                TreePath p = path.pathByAddingChild(n);

                expandAll(tree, p, expand);
            }
        }

        if (expand) {
            tree.expandPath(path);
        } else {
            tree.collapsePath(path);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new JTreeNodeAutoExpandCollapse().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-17T11:37:35.223

```
public void expandTree(){
    int row = 1;
    while (row++ < tree.getRowCount()){
        tree.expandRow(row);
    }

public void collapseTree(){
    int row = tree.getRowCount() - 1;
    while (row-- > 0){
        tree.collapseRow(row);
    }
} 
```

# perl - 使用 perl 进行 DNA 分析的基本正则表达式和字符串操作

> ID：15210981
> 
> 赞同：5
> 
> 时间：2013-03-04T20:57:29.067
> 
> 标签：perl

我是 perl 新手，想做一些我认为是对存储在 rtf 文件中的 DNA 序列的基本字符串操作。

本质上，我的文件读取（文件为 FASTA 格式）：

```
>LM1
AAGTCTGACGGAGCAACGCCGCGTGTATGAAGAAGGTTTTCGGATCGTAA
AGTACTGTCCGTTAGAGAAGAACAAGGATAAGAGTAACTGCTTGTCCCTT
GACGGTATCTAACCAGAAAGCCACGGCTAACTACGTGCCAGCAGCCGCGG
TAATACGTAGGTGGCAAGCGTTGTCCGGATTTATTGGGCGTAAAGCGCGC
GCAGGCGGTCTTTTAAGTCTGATGTGAAAGCCCCCGGCTTAACCGGGGAG
GGTCATTGGAAACTGGAAGACTGGAGTGCAGAAGAGGAGAGTGGAATTCC
ACGTGTAGCGGTGAAATGCGTAGATATGTGGAGGAACACCAGTGGCGAAG
GCGACTCTCTGGTCTGTAACTGACGCTGAGGCGCGAAAGCGTGGGGAGCA
AACAGGATTAGATACCCTGGTAGTCCACGCCGT 
```

我想做的是读入我的文件并打印标题（标题>LM1）然后匹配以下DNA序列`GTGCCAGCAGCCGC`，然后打印前面的DNA序列。
所以我的输出看起来像这样：

```
>LM1 
AAGTCTGACGGAGCAACGCCGCGTGTATGAAGAAGGTTTTCGGATCGTAA
AGTACTGTCCGTTAGAGAAGAACAAGGATAAGAGTAACTGCTTGTCCCTT
GACGGTATCTAACCAGAAAGCCACGGCTAACTAC 
```

我编写了以下程序：

```
#!/usr/bin/perl

use strict; use warnings;

open(FASTA, "<seq_V3_V6_130227.rtf") or die "The file could not be found.\n";

while(<FASTA>) {
    chomp($_);
    if ($_ =~  m/^>/ ) {
        my $header = $_;
        print "$header\n";
    }

    my $dna = <FASTA>;
    if ($dna =~ /(.*?)GTGCCAGCAGCCGC/) {
        print "$dna";
    }

}
close(FASTA); 
```

问题是我的程序逐行读取文件，我收到的输出如下：

```
>LM1
GACGGTATCTAACCAGAAAGCCACGGCTAACTAC 
```

基本上我不知道如何将整个 DNA 序列分配给我的 $dna 变量，最终也不知道如何避免逐行读取 DNA 序列。我也收到此警告：在stacked.pl 第14 行第1113 行的模式匹配（m//）中使用未初始化的值$dna。

如果有人可以帮助我编写更好的代码或指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:08:06.407

使用[pos 函数](http://perldoc.perl.org/functions/pos.html)：

```
use strict;
use warnings;

my $dna = "";
my $seq = "GTGCCAGCAGCCGC";
while (<DATA>) {
  if (/^>/) {
    print;
  } else {
    if (/^[AGCT]/) {
      $dna .= $_;
    }
  }

}

if ($dna =~ /$seq/g) {
  print substr($dna, 0, pos($dna) - length($seq)), "\n";
}

__DATA__
>LM1

AAGTCTGACGGAGCAACGCCGCGTGTATGAAGAAGGTTTTCGGATCGTAA
AGTACTGTCCGTTAGAGAAGAACAAGGATAAGAGTAACTGCTTGTCCCTT
GACGGTATCTAACCAGAAAGCCACGGCTAACTACGTGCCAGCAGCCGCGG
TAATACGTAGGTGGCAAGCGTTGTCCGGATTTATTGGGCGTAAAGCGCGC
GCAGGCGGTCTTTTAAGTCTGATGTGAAAGCCCCCGGCTTAACCGGGGAG
GGTCATTGGAAACTGGAAGACTGGAGTGCAGAAGAGGAGAGTGGAATTCC
ACGTGTAGCGGTGAAATGCGTAGATATGTGGAGGAACACCAGTGGCGAAG
GCGACTCTCTGGTCTGTAACTGACGCTGAGGCGCGAAAGCGTGGGGAGCA
AACAGGATTAGATACCCTGGTAGTCCACGCCGT 
```

您可以处理具有多个条目的文件，如下所示：

```
while (<DATA>) {
  if (/^>/) {
    if ($dna =~ /$seq/g) {
      print substr($dna, 0, pos($dna) - length($seq)), "\n";
      $dna = ""; 
    }   
    print;
  } elsif (/^[AGCT]/) {
    $dna .= $_; 
  }   
}

if ($dna && $dna =~ /$seq/g) {
  print substr($dna, 0, pos($dna) - length($seq)), "\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T21:10:52.633

您的 while 语句会一直读取到文件末尾。这意味着在每次循环迭代中，$_ 都是`<FASTA>`. 所以`$dna = <FASTA>`没有做你认为的那样。它的阅读量超出了您的预期。

```
while(<FASTA>) { #Reads a line here
  chomp($_);
  if ($_ =~  m/^>/ ) {
    my $header = $_;
    print "$header\n";
  }
  $dna = <FASTA> # reads another line here - Causes skips over every other line
} 
```

现在，您需要将序列读入您的`$dna`. `else`您可以使用语句更新您的 while 循环。因此，如果它是标题行，则打印它，否则，我们将其添加到`$dna`.

```
while(<FASTA>) {
  chomp($_);
  if ($_ =~  m/^>/ ) {
    # It is a header line, so print it
    my $header = $_;
    print "$header\n";
  } else {
    # if it is not a header line, add to your dna sequence.
    $dna .= $_;
  }
} 
```

在循环之后，您可以执行您的正则表达式。

注意：此解决方案假设 fasta 文件中只有 1 个序列。如果你有不止一个，你的`$dna`变量将所有的序列都作为一个。

编辑：添加简单的方法来处理多个序列

```
my $dna = "";
while(<FASTA>) {
  chomp($_);
  if ($_ =~  m/^>/ ) {

    # Does $dna match the regex?
    if ($dna =~ /(.*?)GTGCCAGCAGCCGC/) {
      print "$1\n";
    }

    # Reset the sequence
    $dna = "";

    # It is a header line, so print it
    my $header = $_;
    print "$header\n";

  } else {
    # if it is not a header line, add to your dna sequence.
    $dna .= $_;
  }
}

# Check the last sequence
if ($dna =~ /(.*?)GTGCCAGCAGCCGC/) {
  print "$1\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:57:18.683

我想出了一个使用[BioSeqIO](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/SeqIO.pm)的解决方案（以及来自[BioPerl发行版的](http://search.cpan.org/~cjfields/BioPerl-1.6.901/BioPerl.pm)[BioSeq](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/Seq.pm)`trunc`的方法。我还使用[索引](http://perldoc.perl.org/functions/index.html)来查找子序列，而不是使用正则表达式。

如果未找到子序列或子序列从第一个位置开始（因此没有前面的字符），此解决方案不会打印出*id （行以 > 开头）。*

```
#!/usr/bin/perl
use strict;
use warnings;
use Bio::SeqIO;

my $in  = Bio::SeqIO->new( -file   => "fasta_junk.fasta" ,
                           -format => 'fasta');

my $out = Bio::SeqIO->new( -file   => '>test.dat',
                           -format => 'fasta');

my $lookup = 'GTGCCAGCAGCCGC';

while ( my $seq = $in->next_seq() ) {
    my $pos = index $seq->seq, $lookup;

    # if $pos != -1, ($lookup not found),
    # or $pos != 0, (found $lookup at first position, thus
    #   no preceding characters).
    if ($pos > 0) {
        my $trunc = $seq->trunc(1,$pos);
        $out->write_seq($trunc);
    }
}

__END__
*** fasta_junk.fasta
>LM1
AAGTCTGACGGAGCAACGCCGCGTGTATGAAGAAGGTTTTCGGATCGTAA
AGTACTGTCCGTTAGAGAAGAACAAGGATAAGAGTAACTGCTTGTCCCTT
GACGGTATCTAACCAGAAAGCCACGGCTAACTACGTGCCAGCAGCCGCGG
TAATACGTAGGTGGCAAGCGTTGTCCGGATTTATTGGGCGTAAAGCGCGC
GCAGGCGGTCTTTTAAGTCTGATGTGAAAGCCCCCGGCTTAACCGGGGAG
GGTCATTGGAAACTGGAAGACTGGAGTGCAGAAGAGGAGAGTGGAATTCC
ACGTGTAGCGGTGAAATGCGTAGATATGTGGAGGAACACCAGTGGCGAAG
GCGACTCTCTGGTCTGTAACTGACGCTGAGGCGCGAAAGCGTGGGGAGCA
AACAGGATTAGATACCCTGGTAGTCCACGCCGT

*** contents of test.dat
>LM1
AAGTCTGACGGAGCAACGCCGCGTGTATGAAGAAGGTTTTCGGATCGTAAAGTACTGTCC
GTTAGAGAAGAACAAGGATAAGAGTAACTGCTTGTCCCTTGACGGTATCTAACCAGAAAG
CCACGGCTAACTAC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T21:05:23.303

将整个文件读入内存然后查找正则表达式

```
while(<FASTA>) {
    chomp($_);
    if ($_ =~  m/^>/ ) {
        my $header = $_;
        print "$header\n";
    } else {
    $dna .= $_;
    }
}
if ($dna =~ /(.*?)GTGCCAGCAGCCGC/) {
    print $1;
} 
```

# ruby-on-rails - 如何在 Rails 中显示不同小计的最高排名

> ID：15210982
> 
> 赞同：1
> 
> 时间：2013-03-04T20:57:32.760
> 
> 标签：ruby-on-rails

我有一个应用程序，可以为用户提供带有 game_type 的游戏的游戏积分。我想做的是：

1.  基于游戏的分数小计
2.  确定用户游戏排名（排名 1 = 最高分）基于他们与其他用户相比获得的 game_id 分数
3.  根据 game_type 小计积分
4.  确定用户 game_type 排名（排名 1 = 最高分）基于他们在 game_type_id 上与其他用户相比有多少分

根据上面的查询结果，我想只显示game_types和games之间的前五名排名。

例如，假设用户的计算是这样的：

```
game_id = 1, rank 200
game_id = 2, rank 10
game_id = 3, rank 6
game_id = 4, rank 31

game_type_id = 1, rank 500
game_type_id = 2, rank 400
game_type_id = 3, rank 1
game_type_id = 4, rank 7
game_type_id = 5, rank 100 
```

然后我只想显示 games:2, 3, 4 和 game_types: 3, 4,5 的排名，因为这些是该用户的游戏和 game_types 中的前五名。

我考虑在用户表中为每个 game_type 和游戏（即 game_1_rank、game_2_rank、game_type_1_rank 等）创建一个 game_type 和游戏字段，这样我就可以每小时计算后台作业中的点数，然后尝试从中检索最高排名那里，但我认为这不是最好的方法，因为随着时间的推移会添加新游戏和游戏类型。

因此，我认为最好的方法是在加载 users#show 页面时进行计算，然后缓存该页面（并且每小时到期）。

我的模型如下所示：

```
user
  has_many :points

point
  belongs_to :game
  belongs_to :game_type
  belongs_to :user

game
  has_many :points
  has_one :game_type

game_type
  has_many :points 
```

我在 Users#show 中有这段代码来计算所有游戏和游戏类型的总体排名，但我不确定如何调整它，以便我可以访问我认为的最高排名（我的视图中还没有代码显示该用户的前五名以及他们的游戏/游戏类型）。

```
# calculate ranks for all users for all games in order to find the user's rank
@games = Game.all

@games.each do |game|
  @users_by_game = Point.where(“game_id = ?”, game.id).select("sum(amount) as points, user_id").order("points desc").group("user_id")
  rank = 0
  points = 0

  @users_by_game.each_with_index do |user_by_game, index|           
    if user_by_game.points != points
      points = user_by_game.points
      rank += 1
  end
end

# calculate ranks for all users for all games_types in order to find the user's rank
@game_types = GameType.all   

@game_types.each do |game_type| 
  @users_by_game_type = Point.where(“game_type_id = ?”, game_type.id).select("sum(amount) as points, user_id").order("points desc").group("user_id")
  rank = 0
  points = 0

  @users_by_game_type.each_with_index do |user_by_game_type, index|           
    if user_by_game_type.points != points
      points = user_by_game_type.points
      rank += 1
    end
  end
end 
```

我要确定的是：

1.  这是计算这些排名的最佳方法，还是有更节省资源或 DRY 的方法？
2.  如果这是最好的方法，我该如何更改我的代码和视图以显示此@user 的最高 5 个游戏/game_type 排名，因为代码现在只计算所有用户的排名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:37:34.147

Introduce two new tables to store the ranks by game and ranks by game type. Calculate the over-all rank every hour. This way the page load will be much faster. You can use a gem like `whenever` to schedule the rank calculation every hour.

Your current implementation will not scale beyond few hundred users.

```
class User
  has_many :points
  has_many :game_ranks, :order => "rank DESC"
  has_many :game_type_ranks, :order => "rank DESC"

  # schedule this function every hour.
  def self.update_rank
    update_rank_by(Game)
    update_rank_by(GameType)
  end

  def self.top_games(page_size=5)
    game_ranks.includes(:game).limit(page_size)
  end

  def self.top_games_by_type(page_size=5)
    game_type_ranks.includes(:game).limit(page_size)
  end

  def self.update_rank_by klass
    rank_class = (klass.name + "Rank").constantize
    rank_by_col = "#{klass.name.underscore}_id".to_sym        

    rank = total_points = rank_by = 0
    page = 1;page_size=1000
    sql = sum_points_by(rank_by_col)
    while(points= sql.limit(page_size).offset((page-1)*page_size)).present?
      page += 1
      User.trasaction do
        points.each do |point|
          rank_by_col_val = point.send(rank_by_col) 

          # calculate rank
          if ( rank_by != rank_by_col_val)
            rank = total_points = 0
            rank_by = rank_by_col_val
          end

          if point.total_points > total_points
            total_points = point.total_points
            rank +=1
          end

          create_or_update_rank_object(rank_class, rank_by_col, point.user_id, rank_by_col_val, total_points, rank)
        end
      end      
    end    
  end

  def self.sum_points_by(rank_by_col)
    select_sql = "points.user_id, points.#{rank_by_col}, 
                  SUM(points.points) total_points"
    Point.select(select_sql).group(:user_id, rank_by_col).
      order("#{rank_by_col}, total_points DESC")
  end

  def self.create_or_update_rank_object(rank_class, rank_by_col, user_id, rank_by_col_val, total_points, rank)
    ro = rank_class.send(
      "find_or_initialize_by_user_id_and_#{rank_by_col}",
      user_id, rank_by_col_val)
    ro.total_points = total_points           
    ro.rank = rank
    ro.save
  end
end 
```

Add a new model to hold ranks and total points for every user and game id

```
class GameTypeRank
  # Add columns total_points and rank 
  belongs_to :game_type
  belongs_to :user
end 
```

Add a new model to hold ranks and total points for every user and game type

```
class GameRank
  # Add columns total_points and rank 
  belongs_to :game
  belongs_to :user
end 
```

To get the top five games by rank for a user

```
# array of game_id, game_name and game rank
current_user.top_games.map {|r| [r.game.id, r.game.name, r.rank]} 
# array of game_type_id, game_type_name and game rank
current_user.top_games_by_type.map { |r| 
  [r.game_type.id, r.game_type.name, r.rank]
} 
```

# android - android通知ID每次都应该不同

> ID：15210984
> 
> 赞同：0
> 
> 时间：2013-03-04T20:57:49.997
> 
> 标签：android, android-notifications

我在我的应用程序中使用通知。我只想确保一件事，如果我只有一种类型的通知，我应该每次使用相同的 id 还是如果我每次更改 id 都会生成通知？

```
mgrNotificationManager.notify(id, note); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T21:15:16.113

医生[说](http://developer.android.com/reference/android/app/NotificationManager.html)：

> 如果您的应用程序已经发布了具有相同 id 的通知并且尚未取消，它将被更新的信息替换。

因此，如果您每次都更改 id，系统会将其作为第二次通知处理。

# ios - 如何为 iOS 应用程序生成随机 2D 地图？

> ID：15210988
> 
> 赞同：0
> 
> 时间：2013-03-04T20:57:54.687
> 
> 标签：ios, random, 2d, terrain, generated

我希望能够生成随机地形并将其存储在文件中，但我不确定文件类型或如何生成它。我不确定从哪里开始，并希望得到任何建议。我不想使用任何第三方程序来做，因为我想完全理解它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:35:32.440

因为我不确定 OP 的“2D 地图”是什么意思（可能是带有道路和东西的地理地图，像 Andrey 的答案中的游戏的瓷砖地图，或者像高度场这样的 2D 高程图来生成3D 应用程序的地形），我将专注于高程图，恕我直言，它比用于 2D 游戏的基于瓦片的 2D 地图更难，比地理地图更容易。

对于高程图，有几个选项：

*   生成一组随机值并对它们进行低通滤波。使用 FFT 进行低通滤波，您将获得一个可平铺的高度场。

*   使用柏林噪声。

*   基于 Perlin 噪声和分数布朗运动，“纹理和建模：程序方法”（Perlin 和 Musgrave）中描述了几种变体。即，例如，异质地形、脊状多重分形、翘曲脊状多重分形等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:08:42.423

你应该看看这个[教程](http://www.raywenderlich.com/29458/how-to-make-a-tile-based-game-with-cocos2d-2-x)。它详细并用通俗易懂的语言介绍了如何制作地图

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T21:01:04.427

使用[Cocous2D](http://www.cocos2d-iphone.org/)，它有 Cocous2dBuilder。我认为它会帮助你建立地形

# java - 令牌“;”上的语法错误，从另一个类初始化调用值时预期

> ID：15210991
> 
> 赞同：0
> 
> 时间：2013-03-04T20:58:06.817
> 
> 标签：java, android, class

我有一个要在 2 个类之间传递的值，但出现以下错误：

> 令牌“;”上的语法错误，从另一个类初始化调用值时预期

我有初始值的类

```
public class Game extends Activity implements OnClickListener{

    RandomMathQuestionGenerator question = new RandomMathQuestionGenerator();
    private static final String TAG= "Sudoku";

    public static final String KEY_DIFFICULTY = 
            "org.example.sudoku.difficulty";
    public static final int DIFFICULTY_NOVICE = 1;
    public static final int DIFFICULTY_EASY = 2;
    public static final int DIFFICULTY_MEDIUM = 3;
    public static final int DIFFICULTY_GURU = 4;

    public int value = 0;

    private GameView gameView;  

    public Game()
    {
       if (KEY_DIFFICULTY == String.valueOf(1))
        {
            value = 2; 
        }
        else if (KEY_DIFFICULTY == String.valueOf(2))
        {
            value = 3;        
        }
        else if (KEY_DIFFICULTY == String.valueOf(3))
        {
            value = 4;
        }
        else if (KEY_DIFFICULTY == String.valueOf(4))
        {
            value = 6;
        }
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(TAG, "onCreate");    

    }
    @Override
    public void onClick(View v) 
    {           
          //code here       
    }
} 
```

我称之为值的类

```
public class RandomMathQuestionGenerator {

Game num = new Game();
int number = 0;
number = num.Game(value);
//public int number = 0;
//number = num.Game(number); 

private static final int NUMBER_OF_QUESTIONS = 1;
    private static final int MIN_QUESTION_ELEMENTS = 2;
    private final int MAX_QUESTION_ELEMENTS = number;
    private static final int MIN_QUESTION_ELEMENT_VALUE = 1;
    private static final int MAX_QUESTION_ELEMENT_VALUE = 100;
    private final Random randomGenerator = new Random();    

    //rest of irrelevant code below
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T21:15:07.720

从长远来看，语法错误是无关紧要的。

在 Android 中，您*必须*使用 Intent 启动 Activity。（请参阅[此开发人员指南文章](https://developer.android.com/guide/components/activities.html#StartingAnActivity)。）当您要开始使用游戏时：

```
Intent intent = new Intent(this, Game.class);
startActivity(intent); 
```

* * *

您还声明`KEY_DIFFICULTY`为`final`（不可更改）：

```
public static final String KEY_DIFFICULTY = "org.example.sudoku.difficulty"; 
```

因此，在以下任何一种情况下，您的 if-else 块都不会成立：

```
if (KEY_DIFFICULTY == String.valueOf(1)) 
```

*并且*要比较 Java 中的字符串，您*必须*使用`equals()`，`==`会给出不准确的结果。（[如何在 Java 中比较字符串？](https://stackoverflow.com/q/513832/1267661)）

* * *

如果您想将难度级别从一个 Activity 传递到另一个 Activity，请使用 Intent 的附加功能、`public`类变量或另一种方法，见：[如何在 Android 应用程序中的 Activity 之间传递数据？](https://stackoverflow.com/q/2091465/1267661)

* * *

**添加**
您刚刚向您的问题添加了更多代码，并且您有循环逻辑。

```
- When you create RandomMathQuestionGenerator object, you will create a Game object
    - When you create Game object, you will create a RandomMathQuestionGenerator object
        - When you create RandomMathQuestionGenerator object, you will create a Game object
            - When you create Game object, you will create a RandomMathQuestionGenerator object
                - When you create RandomMathQuestionGenerator object, you will create a Game object
                    - When you create Game object, you will create a RandomMathQuestionGenerator object
                        - When you create RandomMathQuestionGenerator object, you will create a Game object
                            - When you create Game object, you will create a RandomMathQuestionGenerator object
                                - ... 
```

这只会在您的应用抛出 StackOverflowException 时停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:14:42.670

```
number = num.Game(value); 
```

`Game(int value)`我在你的`Game`课上没有看到方法。你需要在你的类中创建这个方法：

```
public int Game(int value){
   //code
} 
```

我也不确定你可以命名一个与你的类同名的方法。我假设它在签名中有一个返回值，这将是有效的，但无论如何使用与您的类相同的方法名称是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:14:49.713

## 案例 - 在`<init>`

这是我修改后的建议代码`RandomMathQuestionGenerator`：

```
public class RandomMathQuestionGenerator {
  private Game num;
  private int number;

  public RandomMathQuestionGenerator() {
    num = new Game();
    number = num.value;
    // Existing code here
  }
  // Existing code here
} 
```

## 案例 - 在方法代码中

```
Game num = new Game();
int number = num.value; 
```

出了什么问题：

*   `public Game`-`public`是*字段*修饰符，不是*变量*修饰符，在方法代码中间无效。请注意，这`final`是一个有效的修饰符 - 这意味着重新分配变量是一个编译错误。
*   使用占位符值创建数字，然后分配给它 -`0`永远不会使用
*   num 没有方法 Game，并且在这段代码中没有定义 value。value 是 Game 对象的一个​​属性，其中 num 是一个。我**强烈**建议重命名这个变量——也许`gameInst`会起作用。

## 概括

（进行中）

# android - android - 覆盖大对象时RAM消耗增加

> ID：15210994
> 
> 赞同：0
> 
> 时间：2013-03-04T20:58:09.937
> 
> 标签：android, performance, android-memory

*致反对者：我没有粘贴任何代码，因为我的问题很笼统，一旦有人提出要求，我就会发布一些代码。*

在我的应用程序中，我在 Activity 启动时以相当大的形式加载用户的播放列表`JSONArray`，解析并以`ListView`. 如果用户按下更新按钮，整个操作会重复，相同的对象会被覆盖。我注意到应用程序使用的 RAM 量在每次更新时随机增加 0.4 到 1 MB。我试图找出原因，相同的内存地址只是被新数据覆盖，为什么 RAM 消耗会增加？我还尝试`null`在进行更新之前将所有使用的对象设置为，这减少了使用的 RAM 量，但仅减少了大约 100KB。

我对这个问题没有任何解释，因为有相同的变量会被覆盖。*服务器响应的大小没有改变。* 任何想法如何解决此内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:45.317

因为相同的内存地址不会被覆盖。您正在创建占用新内存的新对象，并且两个副本都会一直存在，直到旧的副本被垃圾收集。您可以通过确保应用程序中的任何地方都没有对旧数据的悬空引用（通过将它们显式设置为 null）或调用 System.gc（尽管这对它有很大的负面影响）来加快速度。但在这种情况下增长是可以预期的。不应该发生的是，如果您在多次获得结果后执行 hprof，您将永远不会看到数组实例的总数无限增加。如果你这样做了，那么你需要追踪所有者链，看看谁还在坚持。

# javascript - 一键调用多个函数

> ID：15210995
> 
> 赞同：0
> 
> 时间：2013-03-04T20:58:12.220
> 
> 标签：javascript

当仅单击“添加”按钮时，我试图调用两个函数。我遇到的问题是 calculate_balances 函数中的最后四个文本框没有输出它们的变量。

```
var $ = function (id) {
    return document.getElementById(id);
}

// Declare Arrays to store information from Inputs //
var transactions = [];
transactions[0] = []; // holds date
transactions[1] = []; // holds transaction type
transactions[2] = []; // holds amount

// Function to print results to text area //
var update_results = function () {
    var list = ""; // string variable to build output //    
    // check to see if arrays are empty //
    if (transactions[0].length == 0) {
        $("results").value = "";
    } else {
        list = "";
    // for loop to cycle through arrays and build string for textarea output // 
        for (var i = 0; i < transactions[0].length; i++) {
        list += transactions[0][i] + "     " + transactions[1][i] + "      " + transactions[2][i] + "\n";
        }
    // display results //
    $("results").value = list;
    }

}
// function to gather inputs //
var add_transaction = function () {
    $("add").blur();
    transactions[0][transactions[0].length] = $("date").value;
    transactions[1][transactions[1].length] = $("transType").value;
    transactions[2][transactions[2].length] = parseFloat( $("amount").value);
    update_results();
    calculate_balances();

}

// function for Calculations //
 var calculate_balances = function () {

    var startBal = 2000.00;
    var ttlDeposits = 0;
    var ttlWithdrawals = 0;
    var endBal = startBal;

    if (transactions[1][transactions[1].length] == "deposit")
    {
        ttlDeposits += transactions[2][transactions[2].length];
        endBal += ttlDeposits;
    }
    if (transactions[1][i] == "withdrawal")
    {
        ttlWithdrawals += transactions[2][transactions[i]];
        endBal -= ttlWithdrawals;
    } 

    $("balStart").value = parseFloat(startBal);
    $("ttlDeposits").value = parseFloat(ttlDeposits);
    $("ttlWithdrawals").value = parseFloat(ttlWithdrawals);
    $("balEnd").value = parseFloat(endBal);

}  
window.onload = function () {
    $("add").onclick = add_transaction, calculate_balances;
    update_results();
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:00:00.530

编辑：没有意识到 OP 没有使用 jQuery。您的 onclick 应如下所示：

```
$("add").onclick = function(){
    add_transaction();
    calculate_balances();
}; 
```

这里的其余部分用于 jQuery，这不是 OP 想要的。

要使用 jQuery 设置文本框的值，请使用 val() 方法：

```
$("balStart").val(parseFloat(startBal)); 
```

单击按钮时调用这两个方法：

```
$("add").click(function(){
   add_transaction();
   calculate_balances();
}); 
```

# html - 如何使用循环来限制 html 表格列中的数据？

> ID：15210996
> 
> 赞同：0
> 
> 时间：2013-03-04T20:58:13.433
> 
> 标签：html, jsp, servlets

我将结果集从控制器获取到我有一个表的 jsp 页面。

我将来自结果集的所有数据插入到该表中。

**我遇到的问题是数据只出现在一列中。**我想要做的只是将数据限制为每列中的 5 个（第 1 列中的 5 个，第 2 列中的 5 个，同一行的第 3 列中的 5 个）。

相关ID：

```
AKR
AK
AKRBS
AKRB
AKBS
AKRB
AKRBS
AKRBSW
AK
AKRE 
```

等等.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:39:07.043

检查此代码

```
<table >
    <tr valign="top">
        <% int len=102;
            out.print("<td>");
            for(int i=0;i<len;i++){
                if(i%5==0 && i!=0 && i !=len)
                    out.print("</td><td>");
                out.print("item "+i+"<br>");

            }
            out.print("</td>");

        %>

    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:03:46.197

你应该能够添加一个计数器并使用

```
${ counter % 5 == 0 } 
```

触发一个`<br>`或任何你用来创建换行符的东西。

这是`MOD`运算符，当返回的计数是 5 的倍数时，它返回 0。任何非 5 的倍数都将返回一个非零数。

# image-processing - 像素-毫米比例

> ID：15210998
> 
> 赞同：0
> 
> 时间：2013-03-04T20:58:14.997
> 
> 标签：image-processing, pixel

我有一张数字图像，我想根据上面的距离进行一些计算。所以我需要得到毫米/像素的比例。我现在正在做的是标记两个我知道真实世界距离的点，计算它们之间的欧几里得距离，然后获得比例。问题是，只有两个点才能做出正确的毫米/像素比例，还是需要使用 4 个点，2 个用于 X 轴，2 个用于 Y 轴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T21:09:30.243

如果您知道图片上测量的点 A 和 B 之间的距离（例如英寸），并且您还知道点之间的像素数，则可以通过除以轻松计算像素/英寸比率`<pixels>/<inches>`。

我建议拍摄图片上的点，使与它们相交的线是水平的或垂直的，这样计算就不会出现错误，因为像素是矩形的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T21:05:43.723

如果您的图像是一个平面并且相机方向垂直于该表面，那么您的比例因子在两个方向上应该是相同的。

如果您的图像是一个平面，但它相对于相机是倾斜的，那么在该表面上标记一个已知比例的矩形将允许您计算透视变换。（例如看[这个问题](https://stackoverflow.com/questions/1194352/proportions-of-a-perspective-deformed-rectangle)）

如果您的图像是 3D 场景，那么通常没有办法将像素转换为距离。

# c# - 为什么我不能将 linq 的 Cast 与用户定义的转换一起使用，但我可以将它与 Select 调用一起使用？

> ID：15210999
> 
> 赞同：2
> 
> 时间：2013-03-04T20:58:19.407
> 
> 标签：c#, linq, casting

我最近在使用 linq 的[Cast](http://msdn.microsoft.com/en-us/library/bb341406.aspx)方法时遇到了一个问题。

我在 SO 上发现了一个关于我的问题的[类似问题](https://stackoverflow.com/questions/2819473/linq-cast-extension-method-fails-but-typeobject-works)，我还找到了一个很好地解释它的[链接。](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)我的问题解决了。

但有件事让我想知道：

为什么这不起作用：

```
foolist.Cast<bar>(); // throws InvalidCastException 
```

虽然这有效：

```
foolist.Select(f => (bar)f).ToList(); // works fine 
```

我相信这与每种方法的实现有关。[如果是这样，Cast 方法是否不能具有与Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)类似的实现，允许它与用户定义的强制转换一起使用（因为这在某种程度上是意料之中的）。

**注意：我不是在问为什么它失败了。我在问为什么 Cast 方法是以失败的方式编写的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:02:35.490

原因是该`Cast`方法在通用上下文中执行强制转换

```
IEnumerable<T> Cast<T>(this IEnumerable e) {
  foreach (object cur in e) { 
    return (T)cur;
  }
} 
```

实际的铸造逻辑在这个确切的点被验证和发出。这一点在通用函数中，并且不知道`T`最终实例化到的类型的用户定义转换。它只能访问标准的 CLR 样式转换。

在第二个示例中，您正在对真实类型（不是泛型类型参数）进行强制转换。因此，C# 编译器可以访问该对象上所有用户定义的转换，并且可以插入最合适的转换。