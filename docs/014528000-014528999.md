# StackOverflow 问答 14528000-14528999

# python - Selenium 确定浏览器被冻结

> ID：14528001
> 
> 赞同：1
> 
> 时间：2013-01-25T18:21:29.983
> 
> 标签：python, browser, selenium

我正在使用 selenium 做一些涉及加载大量页面的事情，可能包含大量图像和/或 Flash 广告，这显然对浏览器造成了相当大的压力，因为我的 firefox 浏览器正在冻结。selenium 是否能够检测浏览器是否被冻结，因为在任务管理器中已经达到了“无响应”的可怕状态，并且如果我单击选项卡就不会集中注意力？如果没有，有人知道处理这种情况的方法吗？

编辑：

我最终使用了以下内容：

```
 browser = webdriver.Firefox()
  try:
    browser.set_page_load_timeout(_DEFAULT_LOAD_TIME)
    browser.get('http://' + domain)
  except TimeoutException as te:
    print "Loading %s timed out. Killing browser." % domain
    print te
    browser.close() 
```

虽然它不会在浏览器进入（无响应）状态时关闭浏览器，但如果 _DEFAULT_LOAD_TIME 足够低，它通常会设法在浏览器进入该状态之前将其杀死。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T21:11:48.380

至少您可以为 Selenium 设置超时。在以下示例中，webdriver 最多会等待 10 秒，然后才会终止浏览器并导致测试失败。这样您就可以最终执行所有测试。

```
from selenium import webdriver

ff = webdriver.Firefox()
ff.implicitly_wait(10) # seconds
ff.get("http://somedomain/url_that_delays_loading")
myDynamicElement = ff.find_element_by_id("myDynamicElement") 
```

[在Selenium 总部](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-20T14:18:42.603

我想出的最佳策略是**终止**运行时间超过设定阈值的进程（*例如孤立进程*）。这个片段可以通过调用`child_process.execFile('powershell.exe')`。当浏览器由于 JavaScript 行为不端而**挂起**时，发现这对`chromedriver`webdriverJS很有用。

 **### 清理孤立进程（运行时间 >30 分钟）

```
# View Processes Running > 30 MIN
Get-Process -name firefox | ? { $_.StartTime -lt (Get-Date).AddMinutes(-30) } | select pid, starttime | Sort-Object starttime

# Terminate Processes Running > 30 MIN
Get-Process -name firefox | ? { $_.StartTime -lt (Get-Date).AddMinutes(-30) } | Stop-Process -Force 
```**

# eclipse - AspectJ 导致“编辑器不包含主要类型”错误

> ID：14528002
> 
> 赞同：1
> 
> 时间：2013-01-25T18:21:32.463
> 
> 标签：eclipse, ide, workflow, aspectj, ajdt

将 AspectJ 开发工具安装到 Eclipse 中后，“运行”按钮和 Ctrl-F11 快捷方式都变得几乎无用：使用它们（或“调试”按钮）将抛出“编辑器不包含主类型”错误消息，即使对于*不需要主类型存在的*项目（例如，Android 应用程序项目）。具有正确定义的主类型的独立 Java 项目工作正常 - 所以似乎 AJDT 正在强制 Eclipse 检查 Java main() 而不首先检查项目类型。该项目是否是 AspectJ 项目也没有区别。

仅当您当前正在编辑的文件在其文件名中的任何位置包含“.java”、“.aj”或“.class”时才会出现问题（注意：它实际上不必以这些扩展名结尾，只要它是那里的任何地方 - readme.txt 都可以，readme.java.txt 不会）。

我发现解决这个问题的两种方法 - 无论它是否是 AJ 项目 - 在安装 AJDT 之后是：

*   在 Package Explorer 中选择项目中名称不包含 .java、.class 或 .aj 的文件，*然后*点击 Run（Package Explorer 必须保持活动并被选中）。

*   为您的项目创建一个新的运行配置，并使用它来启动您的项目。这仍然增加了一个毫无意义的额外步骤，并且对于那些处理大量项目的人来说是不切实际的。

我在 Eclipse Juno 和 Helios（Windows XP x86 和 Win7 x64）上都试过这个，结果是一样的。虽然看起来像是在吹毛求疵，但它肯定不是：AJDT 正在劫持IDE*最*常用的功能。

我已经在我的工作 PC 上安装了两个不同的 Eclipse，它们有自己独立的工作区，一个安装了 AJDT，一个没有，所以当我不处理任何与 AJ 相关的事情时，我可以正确使用 IDE。由于我的公司正在开发一个需要其他开发人员将 AJDT 安装到他们的 IDE 中的项目，这对我们来说是一个重大问题，超出了我们自己的时间损失——我无法想象很多开发人员愿意投入完全没有理由将一个重大瓶颈添加到他们的工作流程中。因此，他们很可能会放弃我们的产品！

* * *

**更新：**这已被确定为 AspectJ 内部的错误，并已报告给 AJ 开发团队。您可以在此处跟踪它：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=399660) ://bugs.eclipse.org/bugs/show_bug.cgi?id=399660 在撰写本文时，该错误已*部分*修复，将运行功能恢复到未启用 AJ 的项目.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:53:42.740

我只是来这个网站问同样的问题。虽然我不知道为什么会出错，但我有一个解决方法目前正在帮助我：

转到**Preferences > Run/Debug > Launching**并选择**Always launch the previous launch the application**。这将在处理单个项目时引入可忍受的行为。您将需要为您的主类手动创建运行配置。

# apache - .htaccess 删除部分网址

> ID：14528008
> 
> 赞同：1
> 
> 时间：2013-01-25T18:21:51.727
> 
> 标签：apache, .htaccess, configuration

问这个问题我感觉不太好（这里已经有很多好的答案+ tuts）。但经过数小时的试用，我需要帮助。

问题：

由于 CMS 迁移，URL 发生了一些变化。旧 URL 保存在数据库中。在我更改 Mysql 中的任何链接之前，我认为对这些链接进行 .htaccess 重写会快得多。我想要的是：

改变

```
index.php/aktuelles?id=369:netzwerk-forst-und-holz-unterfranken-startet-ab-12-2012-&catid=1:news 
```

至

```
index.php/369:netzwerk-forst-und-holz-unterfranken-startet-ab-12-2012-&catid=1:news 
```

意味着简单的削减

```
aktuelles?id= 
```

的网址。这是我的试验：

```
RewriteEngine On
Options +FollowSymLinks

RewriteRule ^aktuelles\?id\=$ $1 [R=301]
#RewriteRule (.*)/index.php/aktuelles?id=(.*) $1/$2 [R=301] 
```

非常感谢你的帮助，

亲切的问候，

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:12:17.023

干得好。`aktuelles?id=`这应该从提供的 URL 中删除：

```
RewriteCond %{QUERY_STRING} ^id=([^]+]+)$
RewriteRule ^([^/]*)/(aktuelles)$ $1/%1? [L, R=301] 
```

它未经测试 - 请告诉我这是否适合您。

# c++ - 任何人都可以在谷歌驱动器中推荐一个用于编辑 c++ 文件的应用程序吗？

> ID：14528017
> 
> 赞同：2
> 
> 时间：2013-01-25T18:22:19.323
> 
> 标签：c++, text-editor, google-drive-api

我将我的学校编程工作存储在谷歌驱动器上。在家里我只是访问我电脑上的谷歌驱动器文件，但我不能在学校这样做。

任何人都可以推荐一个在谷歌驱动器中编辑 cpp 文件的应用程序吗？最好是免费的，贫穷的大学生等等。

我找到了驱动代码，但它似乎不适用于 cpp 文件，并且在头文件上它没有做任何标记。

Neutron Drive 似乎正是我所需要的，但它不是免费的。

或者，关于我可以使用的另一个基于云的开发平台的任何建议也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:02:32.577

螺丝谷歌驱动程序，用于单个文件

[https://gist.github.com/](https://gist.github.com/)
[http://collabedit.com/](http://collabedit.com/)

对于如上所述的大型项目，开始学习 mercurial。以后你会专业地需要它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T19:17:42.033

您可能还想尝试 Google Code，它不如 GIT 先进，希望它也不会被阻止。此外，您已经拥有 Google 帐户，因此您无需为任何事情创建新帐户。

Google Code 允许在线完整的编辑功能，但您也可以使用它创建一个存储库并在准备编译时下载您的代码。在开始之前，您可能需要对其进行一些了解，但是一旦您上传了代码，您就可以在那里对其进行编辑，并且它还会自动格式化，使其比 Drive 更好。

如果 Google Code 实际上被阻止，我还建议尝试 GIT 或其他一些服务，但它们更高级一些。过去，Google Code 对我的简单项目很有帮助。

访问[http://code.google.com](http://code.google.com)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T18:47:30.210

根据问题下的评论，我认为最好的选择实际上是使用[gitHub](https://github.com/)、[mercurial](http://mercurial.selenic.com/about/)、[bazaar](http://bazaar.canonical.com/en/)或[svn](http://subversion.apache.org/)之类的服务，因为这些平台中版本控制的可用性。

# verilog - Verilog 在另一个模块中调用多路复用器模块

> ID：14528019
> 
> 赞同：0
> 
> 时间：2013-01-25T18:22:18.900
> 
> 标签：verilog

我正在尝试使用 Verilog 构建一个模块，该模块在最后调用多路复用器（已经设计并在文件中）。但是，当我调用多路复用器并分配其输入时，我收到一条错误消息：

```
 Syntax error near "[". 
```

它引用的行是这样的：

```
 .MUX_in[0](inv_ymux), 
```

我正在尝试调用我的 4 位的第一位`MUX_in`（在我的多路复用器模块中指定）。我这样做正确吗？我应该如何分配它？

```
 module multiplexer(MUX_in, S_in, MUX_out);
    input [3:0] MUX_in;
    input [1:0] S_in;
    output MUX_out;

    reg MUX_out;

    always @ (MUX_in or S_in)begin
        case(S_in)
            2'b00: MUX_out = MUX_in[0];
            2'b01: MUX_out = MUX_in[1];
            2'b10: MUX_out = MUX_in[2];
            2'b11: MUX_out = MUX_in[3];
        endcase
    end
    endmodule 
```

以上是多路复用器的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:06:49.357

一种方法是连接端口连接中的其他信号。以下连接`inv_ymux`到`MUX_in[0]`：

```
mux i0 (
    .MUX_in ({3'b000, inv_ymux}),
    // other port connections
); 
```

# ruby - 将默认值传递给 Ruby 方法，深一层

> ID：14528021
> 
> 赞同：0
> 
> 时间：2013-01-25T18:22:33.650
> 
> 标签：ruby, methods, default

如果我有以下 Ruby 代码：

```
def result(b=25)
  puts b
end 
```

然后我可以简单地调用`result`，然后输出 25 。到目前为止，没有问题。

但我想从另一种方法调用它，如下所示：

```
def outer(a,b)
  #...do some stuff with a...
  result(b)
end 
```

我想`outer(1,5)`输出 5，但`outer(1)`只是输出 25。实际上，我想将“未定义”传递给该`result`方法。

有什么办法可以做到这一点吗？（遗憾的是，我不能简单地使用`def outer(a,b=25)`，因为默认值`b`实际上`result`是一个方法类的实例变量。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:09:02.187

那这个呢：

```
def outer(a,b = nil)
  ...do some stuff with a...
  result(*[b].compact)
end 
```

如果 b 不为 nil，则调用 result(b)；如果 b 为 nil，则调用 result()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:03:05.720

解决此问题的一个选项是将 b 放在 getter 方法后面：

```
def get_b
  @b
end

def outer(a, b = get_b)
  #...do some stuff with a...
  result(b)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T20:24:24.617

我提出的解决方案只是稍微改变了你最初的问题，但它已经接近了。你可以用inner方法默认outer的第二个值，然后再次调用inner方法。如果你实际输出一些东西，它的工作有点奇怪，但如果你不调用 puts，它工作得很好。

```
def result(b=25)
  b
end

def outer(a, b = result)
  #...do stuff with a...
  puts result(b)
end 
```

仅当您不提供默认值时，这会将默认值分配给 b。如果您确实提供了它，它将在结果中使用该 b 。从功能上讲，它似乎按照您想要的方式工作，唯一需要注意的是，如果您的内部方法正在做一些不平凡的事情，那么您将在默认情况下重复工作。

# android - 应用最近发布“已停止”

> ID：14528023
> 
> 赞同：0
> 
> 时间：2013-01-25T18:22:37.917
> 
> 标签：android, google-play, publish, publishing

我最近在 Google Play 上发布了我的应用程序，但是当我安装并运行它时，它根本不运行并向我发送消息“应用程序已停止”。在我的设备和模拟器上它运行正常，我不知道该怎么做。

任何人都有这个问题，可以帮助我吗？？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:08:04.013

Google Play 要求我更改软件包名称，所以我做到了。但是我右键单击项目-> Android 工具-> 重命名应用程序包，它并没有更改所有配置，我不得不手动更改它。

之后就可以正常工作了。

# vb.net - RadioButtonList 填充问题

> ID：14528024
> 
> 赞同：0
> 
> 时间：2013-01-25T18:22:40.867
> 
> 标签：vb.net, radiobuttonlist

我正在从页面加载事件中加载单选按钮列表。当我在面板一中单击提交时，单选按钮列表位于面板二中；面板二变为真，面板一变为假。我的单选按钮列表似乎在第二面板中翻了一番。

```
 Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    rblUserID.Items.Add("****")
    rblUserID.Items.Add("****")
    rblUserID.Items.Add(txtUserID.Text)
    rblUserID.Items.Add("****")

    rblPassword.Items.Add("12345")
    rblPassword.Items.Add(txtPassword.Text)
    rblPassword.Items.Add("asdfg")
    rblPassword.Items.Add("100101")

    rblYears.Items.Add("26")
    rblYears.Items.Add("20")
    rblYears.Items.Add(txtBirthDate.Text)
    rblYears.Items.Add("13")

    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add(txtEmailAddress.Text)
End Sub 
```

这是我的单选按钮列表的 html

```
<strike><asp:RadioButtonList ID="rblPassword" runat="server">
        </asp:RadioButtonList></strike> 
```

我试图做某种形式的测验似乎对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:32:12.293

当您单击 a`Button`时，`PostBack`会生成 a 并`Page_Load`再次调用，请确保您的`RadioButtonList`代码仅执行一次，方法是检查[IsPostBack](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)属性，如下所示：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

 If Not Me.IsPostBack Then

    rblUserID.Items.Add("****")
    rblUserID.Items.Add("****")
    rblUserID.Items.Add(txtUserID.Text)
    rblUserID.Items.Add("****")

    rblPassword.Items.Add("12345")
    rblPassword.Items.Add(txtPassword.Text)
    rblPassword.Items.Add("asdfg")
    rblPassword.Items.Add("100101")

    rblYears.Items.Add("26")
    rblYears.Items.Add("20")
    rblYears.Items.Add(txtBirthDate.Text)
    rblYears.Items.Add("13")

    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add("*****@mail.com")
    rblEmail.Items.Add(txtEmailAddress.Text)

 End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:35:08.987

在我看来，您的代码正在做它打算做的事情。虽然，您对您要完成的工作的描述有点令人困惑。

我的猜测是检查以确保页面再次验证时您尚未添加项目。或者尝试确保事件只加载一次，或者选择一个加载 RadioButtonList 的不同事件。

祝你好运！

# ios - 如何从 JSON 数据中获取 NSString 对象

> ID：14528025
> 
> 赞同：1
> 
> 时间：2013-01-25T18:22:42.533
> 
> 标签：ios, json, parsing

我是 iOS 初学者，在编码方面遇到了一些麻烦。通过发送 ASIHTTPRequest：

```
NSURL *url = [NSURL URLWithString:@"http://search.twitter.com/search.json?geocode=37.781157,-122.398720,25km"]; 
```

我收到这样的数据：

```
 {
        "created_at" = "Fri, 25 Jan 2013 17:48:29 +0000";
        "from_user" = "ZacHWallS_SBI";
        "from_user_id" = 252712138;
        "from_user_id_str" = 252712138;
        "from_user_name" = "ZACH WALLS";
        geo = "<null>";
        id = 294864332490162176;
        "id_str" = 294864332490162176;
        "in_reply_to_status_id" = 294861687004225537;
        "in_reply_to_status_id_str" = 294861687004225537;
        "iso_language_code" = en;
        location = "BAY AREA CALIFORNIA";
        metadata =             {
            "result_type" = recent;
        };
        "profile_image_url" = "http://a0.twimg.com/profile_images/3029389178/e3567459d147bc5d0a10f3c797b477aa_normal.png";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/3029389178/e3567459d147bc5d0a10f3c797b477aa_normal.png";
        source = "&lt;a href=&quot;http://twitter.com/#!/download/ipad&quot;&gt;Twitter for iPad&lt;/a&gt;";
        text = "@LilTioSBi yee ima slide through prolly";
        "to_user" = LilTioSBi;
        "to_user_id" = 35629694;
        "to_user_id_str" = 35629694;
        "to_user_name" = "Nevin Tio";
    }, 
```

接下来我这样做：

```
-(void) requestFinished: (ASIHTTPRequest *) request {
NSString *theJSON = [request responseString];
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSMutableArray *jsonDictionary = [parser objectWithString:theJSON];
//NSLog(@"\n\n%@", jsonDictionary);  
NSMutableArray *userName = [userinfo objectForKey:@"from_user"];
NSLog(@"\n\n\n%@",userName); 
```

我需要捕获“from_user”。然后运行，编译器说： [__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x755bbc0... 如何正确执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:34:30.080

因此，我将首先澄清一些事情，即实际上是运行时给您“[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x755bbc0”错误。

让我们分解一下：

`__NSArrayM`听起来很可疑`NSArray`（`NSArray`从技术上讲，它被称为类集群，这意味着您`NSArray`在实践中并不总是能看到确切的内容，只是一些类似的东西）。

`-objectForKey:`是一种方法`NSDictionary`

因此，我们在一个我们认为是字典的数组上调用一个方法（调用一个方法 = 发送一条消息，或 ObjC 用语中的“选择器”）。

似乎您省略了一些代码，但如果您只是从以下内容传递值：

```
[jsonDictionary objectForKey:@"results"] 
```

你最终会得到一系列推文。然后，您需要从该数组中获取一个项目以获取其`from_user`键。

```
NSArray *tweets = [jsonDictionary objectForKey:@"results"];
NSDictionary *tweet = [tweets objectAtIndex:0];
NSString *username = [tweet objectForKey:@"from_user"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:31:33.697

很可能，您有一系列推文。所以：

```
- (void) requestFinished: (ASIHTTPRequest *) request {
    NSString *theJSON = [request responseString];
    SBJsonParser *parser = [[SBJsonParser alloc] init];
    NSArray *parsedJson = [parser objectWithString:theJSON];

    NSMutableArray *allFromUsers = [NSMutableArray new];
    for (NSDictionary *tweet in parsedJson) {
        NSString *fromUser = [tweet objectForKey:@"from_user"];
        [allFromUsers addObject:fromUser];
    }
    NSLog(@"allFromUsers = %@", allFromUsers);

    // ... etc ...
} 
```

`parsedJson`或者只是从数组中获取您想要的单个推文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:25:51.253

您需要使用：

```
NSString *userName = [jsonDictionary objectForKey:@"from_user"]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T18:29:12.733

它应该是：

```
NSMutableArray *userName = [NSMutableArray arrayWithObject:[jsonDictionary objectForKey:@"from_user"]]; 
```

或者也许你只是想把名字放在一个 NSString 中？

```
NSString *userName = [jsonDictionary objectForKey:@"from_user"]; 
```

# xml - 合并 XML 文档，覆盖某些元素

> ID：14528027
> 
> 赞同：1
> 
> 时间：2013-01-25T18:22:51.777
> 
> 标签：xml, xslt

我有 2 个输入 xml 文件。一个模板 xml 文件，例如

```
<test>
  <a>0</a>
  <b>0</b>
  <c>0</c>
  <d>0</d>
  <e>0</e>
</test> 
```

以及一个数据 xml 文件，该文件指定覆盖模板 xml 中的值的值。数据 xml 文件可能不会为模板 xml 中的所有元素指定值，例如

```
<test>
  <a>1</a>
  <b>2</b>
  <c>3</c>
</test> 
```

或者

```
<test>
  <e>5</e>
</test> 
```

最终的 xml 应该是模板 xml 上的数据 xml 的叠加。例如

```
<test>
  <a>1</a>
  <b>2</b>
  <c>3</c>
  <d>0</d>
  <e>0</e>
</test> 
```

或者

```
<test>
  <a>0</a>
  <b>0</b>
  <c>0</c>
  <d>0</d>
  <e>5</e>
</test> 
```

XSLT 如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:43:21.617

对于您那里的深度级别，这应该有效：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:param name="replacementFile" select="'replacements.xml'" />
  <xsl:param name="replacements" select="document($replacementFile)" />

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*/*">
    <xsl:variable name="replacement" 
           select="$replacements/*/*[local-name() = local-name(current())]" />
    <xsl:copy>
      <xsl:value-of select="$replacement | current()[not($replacement)]"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

将您的第一个 XML 片段作为输入文档，将第二个片段保存为 replacements.xml，输出为：

```
<test>
  <a>1</a>
  <b>2</b>
  <c>3</c>
  <d>0</d>
  <e>0</e>
</test> 
```

如果替换未存储在文件中，则可以改为将替换 XML 文档作为参数值传入 name `replacements`。上面的 XSLT 将保持不变。或者，如果值*在*文件中，但可能在不同时间使用不同的文件，则可以改为将文件路径作为参数传入 name `replacementFile`。同样，上述 XSLT 不需要修改即可。

# c# - 告诉正在执行循环的线程跳出循环并做其他事情的正确方法是什么？

> ID：14528032
> 
> 赞同：5
> 
> 时间：2013-01-25T18:23:11.850
> 
> 标签：c#, .net, multithreading, thread-abort, event-wait-handle

以下代码的缺点是，在主线程重置等待句柄后，工作线程既不会立即终止，也不会执行最终操作。相反，它将继续做它正在做的事情，直到它到达循环的下一次迭代，此时它将被无限期地阻塞。

```
static void Main()
{
 ManualResetEvent m = new ManualResetEvent(true); // or bool b = true
 Thread thread = new Thread(new ThreadStart(delegate()
 {
    while(m.WaitOne()) //or while(b)
    {
        //do something
    }
    //perform final operation and exit
 }));

 thread.Start();

 //do something

 m.Reset(); //or b = false

 //do something else
 } 
```

下面的代码的缺点是它使用了 Abort() 方法（有人说应该不惜一切代价避免它），但完全符合我的要求：强制工作线程退出循环一旦主线程告诉它这样做，执行最终操作并退出。

```
static void Main()
{
 Thread thread = new Thread(new ThreadStart(delegate()
 {
    try
    {
        while(true)
        {
            //do something
        }
    }
    catch(ThreadAbortException e)
    {
           //perform final operation and exit
    }
 }));

 thread.Start();

 //do something

 thread.Abort();    

 //do something else
 } 
```

由于这两种解决方案都不是理想的，所以实现我正在寻找的功能的正确方法是什么？

（我更喜欢不涉及 .net 4.5 任务的解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:42:05.387

你可以使用一个`BackgroundWorker`

```
static void Main()
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += worker_DoWork;
    worker.RunWorkerAsync();

    // do something 

    worker.CancelAsync();

    // do something else
}

void worker_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    while(!worker.CancellationPending)
    {
        // do something
    }
    // perform final action
} 
```

（代码未经测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:38:55.183

如果您不能使用 .NET 4.5（正如我在评论中提到的），那么您可以使用布尔值来取消循环。在这里，我修改了您的第二个选项：

```
static void Main()
{
    volatile bool keepGoing = true;

    Thread thread = new Thread(new ThreadStart(delegate()
    {
        while(keepGoing)
        {
            //do something
        }

        //logic to perform when the thread is cancelled
    }));

    thread.Start();

    //do something

    keepGoing = false; 

    //do something else
 } 
```

将 bool 值标记为 volatile 将确保您在检查时始终拥有正确的值。这种方法还可以确保您在循环内执行的任何操作都已完成，并且不会处于“脏”状态。

[http://msdn.microsoft.com/en-us/library/x13ttww7%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/x13ttww7%28VS.80%29.aspx)

# c# - 检测模态是否当前处于活动状态

> ID：14528033
> 
> 赞同：-1
> 
> 时间：2013-01-25T18:23:13.960
> 
> 标签：c#, javascript, asp.net, modalpopupextender

如何检测当前是否正在使用 javascript 显示 modalpopupextender？

**Modalpopupextender 标记**

```
 <!-- Add Files Modal Form -->
    <asp:HiddenField ID="AddFilesForModal" runat="server" />
    <ajaxToolkit:ModalPopupExtender runat="server" ID="AddFilesModal" BehaviorID="modalPopupExtenderAddFiles"
        TargetControlID="dummyButtonAddToPendingList" PopupDragHandleControlID="PanelAddFilesOuter" PopupControlID="PanelAddFilesOuter"
        OkControlID="dummyButtonAddToPendingList" BackgroundCssClass="modalBackground" DropShadow="false"
        Drag="true">
    </ajaxToolkit:ModalPopupExtender>
    <ajaxToolkit:RoundedCornersExtender ID="RoundedCornersExtender4" runat="server" TargetControlID="PanelAddFilesInner">
    </ajaxToolkit:RoundedCornersExtender>
    <asp:Panel ID="PanelAddFilesOuter" runat="server"   BackColor="Transparent" Style="display: none;">
        <asp:Panel ID="PanelAddFilesInner" runat="server" BackColor="White" Style=" width:800px; height:600px;  overflow:auto;">
         <ContentTemplate>
            <div id="AddFilesContainer" style="  padding-left:10px; padding-right:10px; padding-top:10px; padding-bottom:5px;">
                <br />
                Add Files
                <div  id="AddFiles_Div" style="height:80%;overflow:auto;">
                            <asp:TreeView ID="TreeViewAddItems" runat="server" Height="500px"  ShowCheckBoxes="Leaf"
                                Width="380px" ImageSet="XPFileExplorer" NodeIndent="15" PathSeparator="\" ShowExpandCollapse="true"
                                EnableClientScript="true" OnTreeNodeCheckChanged="OnTreeNodeCheckChanged" OnAdaptedTreeNodeCheckChanged="OnTreeNodeCheckChanged" ShowLines="True">
                                <HoverNodeStyle Font-Underline="True" ForeColor="#6666AA" />
                                <NodeStyle Font-Names="Tahoma" Font-Size="10pt" ForeColor="Black" HorizontalPadding="2px"
                                    NodeSpacing="0px" VerticalPadding="2px" />
                                <ParentNodeStyle Font-Bold="False" />
                                <SelectedNodeStyle BackColor="#B5B5B5" Font-Underline="False" HorizontalPadding="0px"
                                    VerticalPadding="0px" />
                            </asp:TreeView>
                            </div>
                <br />
                <div class="base" style="height:20px;">
                <asp:LinkButton ID="lnkAddToPendingList" runat="server" OnClick="BtnAddToPendingList_Click" BorderStyle="Solid" BackColor="#CCCCCC">Add selected items to list</asp:LinkButton>
                <asp:Button CssClass="Button" ID="dummyButtonAddToPendingList" runat="server" Style="display: none;" />
                <asp:Button CssClass="Button" ID="CancelAddFiles" runat="server" Text="Cancel" OnClientClick="$find('modalPopupExtenderAddFiles').hide(); return false;" />
                </div>
                </div>
                </ContentTemplate>
        </asp:Panel>
    </asp:Panel>
    <!-- End Add Files Modal Form --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:53:45.627

我认为没有可以调用的属性。您可能需要挂钩显示和隐藏的事件。像这样的东西：

```
var amIVisible = false;
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function () {
    $find('modalPopupExtenderAddFiles').add_shown(function () {
        amIVisible = true;
    });

    $find('modalPopupExtenderAddFiles').add_hidden(function () {
        amIVisible = false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:47:15.820

使用 BehaviourID 在客户端进行验证：

```
<script type="text/javascript">

function IsVisible()
{
    var modalPopup = $find('ModalBehaviourID');
    return modalPopup ? true : false;
}
</script> 
```

第二种选择：

```
<script type="text/javascript" >

function IsVisible()
{
    return $find('ModalBehaviourID').get_PopupVisible();
}

</script> 
```

来源：[链接](http://forums.asp.net/p/1128862/1788033.aspx)

# javascript - 无尽的原型 javascript 函数

> ID：14528034
> 
> 赞同：0
> 
> 时间：2013-01-25T18:23:17.670
> 
> 标签：javascript, function, prototype

我正在尝试创建一个无穷无尽的原型函数。这是我的尝试，但不起作用：

```
function Cat(name, direction) {
this.name = name;
this.stand = {left: "images/standLeft.png", right: "images/standRight.png"};
this.walk = {left: "images/walkLeft.gif", right: "images/walkRight.gif"};
this.direction = direction;
}

Cat.prototype.walking = function() {
var myDirection = (this.direction == "right" ? "+=": "-=");
var myPosition = $("#cat").css("left");
myPosition = myPosition.substring(0, myPosition.length - 2);

var distanceLeft = myPosition;
var distanceRight = 1024 - myPosition - 173;

if(this.direction == "right") {
    var distance = distanceRight;
} else {
    var distance = distanceLeft;
}
    $("#cat img")[0].src =  this.walk[this.direction];
    $("#cat").animate({
        left: myDirection + distance
        }, (22.85 * distance), function(){
            this.direction = (this.direction == "right" ? "left": "right");
             this.walking();
        });
}

var myCat = new Cat("Izzy", "right"); 
```

我认为调用`(this.walking())`会再次使用相同的对象运行相同的函数，但是它会引发错误。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:27:09.727

`this`会有窗口范围。

```
$("#cat img")[0].src =  this.walk[this.direction];
var that = this;
$("#cat").animate({
    left: myDirection + distance
    }, (22.85 * distance), function(){
        that.direction = (that.direction == "right" ? "left": "right");
         that.walking();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:47:57.723

[请参阅我在此 StackOvervlow 线程](https://stackoverflow.com/questions/14187668/why-is-it-necessary-to-wrap-function-call-in-a-function-body/14188501#14188501)上对 JavaScript（和 jQuery）中范围处理的解释。在您的情况下，您应该接受 jQuery 将选择`this`成为您的 cat 对象以外的东西。另请注意，jQuery 使用 HTML 元素，而不是 cat 的实例，因此即使它想要它也无法设置`this`= 你的 cat 对象。

您可以通过将函数包装在[`$.proxy`](http://api.jquery.com/jQuery.proxy/)( [link](http://api.jquery.com/jQuery.proxy/) ) 中来缓解问题，如下所示：

```
// This is your original handler. I made this a named function for clarity.
var animateHandler = function() {
    this.direction = (this.direction == "right" ? "left": "right");
    this.walking();
}

// Now here's your original call to animate.
$("#cat").animate(
    { left: myDirection + distance},
    (22.85 * distance),
    animateHandler
);

// Here's what you'd change it to.
$("#cat").animate(
    { left: myDirection + distance },
    (22.85 * distance),
    $.proxy(animateHandler, this)
); 
```

# wcf - 为每个 IIS 应用程序部署单个或多个 WCF 服务？

> ID：14528035
> 
> 赞同：3
> 
> 时间：2013-01-25T18:23:28.060
> 
> 标签：wcf, iis

我正在进行关于 IIS 托管的内部辩论。对于给定的企业应用程序，我们有 N 个 WCF 服务。

一种选择是将每个 WCF 服务托管在其自己的 IIS 应用程序中。这意味着每个服务都有自己的 web.config 和 [可能] 自己的应用程序池。

另一种选择是在一个 IIS 应用程序中处理所有 WCF 服务。这意味着所有这些服务的一个 web.config 和一个应用程序池。

单个选项可以灵活地为每个服务提供不同的配置（IIS 和 web.config）。单独的应用程序池可以更精细地控制重置进程。

共享选项更简单并且可行，因为每个服务的 IIS 和应用程序配置 (web.config) 应该相同。

我正在寻找这两个选项之间的建议\最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T09:08:31.430

Working in the same type of enterprise environment as the one you describe we find the best practise is as follows:

1.  Group similar functions into "Applications" which are then hosted under one WCF service. This gives us e.g. CustomerService, AccountsService etc.

2.  Each service has its own App. Domain to give it process separation and security separation from the other services. That is, each service runs under the context of an ActiveDiretory (AD) account and doing this allows us secure downstream resources such as SQL server databases.

E.g. CustomerService runs under DOMAIN\CustomerServiceUser user. We can then secure for example stored procedures related to customer functions so they can only be executed by the CustomerServiceUser user. We can then use integrated security for our connection to the SQL server. This allows enterprise permissions to be managed at the Active Directory level.

3.  We deploy using scripting for both the IIS configuration and our web.config files. This has the advantage that the IIS configuration can also be kept in source control as can the transform files for our web.config files. We then have full version history or our configuration and additionally can use this to quickly roll out additional machines if we decide to duplicate & load balance the services.

This is what we find to be the best practise although the requirements of your organisation may be different.

# qt - 处理 QWebView / QWebPage 中的错误

> ID：14528038
> 
> 赞同：2
> 
> 时间：2013-01-25T18:23:40.010
> 
> 标签：qt, error-handling, qtwebkit, qwebpage

`success = false`我希望获得更多信息，而不仅仅是`loadFinished`（这通常只是取消加载）。从该站点上的文档和其他帖子中，我收集到我应该继承 QWebPage 并覆盖`extension()`处理 ErrorPageExtension 的方法。

但是，我没有让它工作，即，无论我尝试什么，我的扩展方法都不会被调用。我可能正在做一些非常愚蠢的事情，但没有看到它。基本上我的课是这样的：

```
class MyWebPage : public QWebPage
{
  Q_OBJECT

public:

  MyWebPage(QObject* parent = 0) : QWebPage(parent) {}  

  virtual bool extension(Extension extension,
                         const ExtensionOption* option = 0, 
                         ExtensionReturn* output = 0)
  {
    // blah
  }

  virtual bool supportsExtension(Extension extension)
  {
    // blah
  }  
}; 
```

方法的实现不是问题，我在那里有一个断点，它永远不会被调用。我创建了一个实例

```
MyWebPage* page = new MyWebPage(this);

mUi.WebView->setPage(page); 
```

我对 QWebView 中 QWebPage 对象的生命周期有点不确定，但从我的测试来看，QWebPage 似乎总是保持相同的实例并且只是加载新内容。所以我认为我应该简单地将我的页面提供给 QWebView，我没有看到另一种让它使用我的派生类的方法。但是，当通过 WebView 或直接通过页面的大型机加载虚假 URL、不存在的本地文件或不受支持的内容时，我从未收到带有 ErrorPageExtension 信息的调用。

任何帮助表示赞赏。这是使用 Qt 4.8.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:03:56.550

有一点错误：

```
...
virtual bool supportsExtension(Extension extension) const // const!!!
{
    return QWebPage::ErrorPageExtension === extension;
}
... 
```

您忘记复制**const**修饰符。

# tfs - TFS 2012 中“分配给”字段的奇怪行为

> ID：14528040
> 
> 赞同：0
> 
> 时间：2013-01-25T18:23:43.017
> 
> 标签：tfs, agile

当我在 TFS 2012 上创建错误并且有人将其标记为已解决并检查代码（键入项目 ID）时，“分配给”字段获取我的姓名而不是开发人员的姓名（谁修复了该错误）。

为什么会这样？

使用 TFS 2012，敏捷模板（无修改）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:33:22.197

由于您打开了错误，默认工作流会将错误分配给您，以便在解决后验证并关闭它。

如果您需要与将错误标记为已解决的人（通常是签入时的开发人员）报告，您可以使用 TFS 查询的“列选项”对话框中的“解决者”列。![TFS 2010](../Images/cd9341759f8f3f2642ab9180e02d1905.png)

# php - 从 AFNetworking 将数据发布到 Codeigniter

> ID：14528045
> 
> 赞同：0
> 
> 时间：2013-01-25T18:24:05.263
> 
> 标签：php, objective-c, xcode, codeigniter, afnetworking

我有一个基于 codeigniter 的网站，运行良好。我目前正在为该网站构建一个 iPhone 应用程序。它使用 AFNetworking 与 codeigniter 控制器进行通信。我以前在 iPhone 开发中使用过 AFNetworking，从来没有遇到过问题。

在这里，我没有收到任何发送到 codeigniter 控制器的发布数据。但我知道它正在从应用程序建立连接，因为如果我只是回显一个字符串，我会在控制台中得到响应。

或者，我在另一台服务器上制作了一个测试 php 脚本，只是回显了 $_POST[] 变量，它工作了，但是我无法让它们使用 codeigniter 进行 POST。

codeigniter 中的某处是否存在不允许从外部来源发布的设置？或者有什么我想念的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T05:58:13.440

我相信有两种方法可以使用 codeigniter 访问 post 变量。

我在我的 iOS 项目中使用 AFNetworking，我可以通过以下方式访问 post 变量

```
$post = $this->input->post(); 
```

JSON post也有这种方法

```
$post = json_decode(trim(file_get_contents('php://input')), true); 
```

# android - 无法从服务器连接到 Google API（401：未经授权）

> ID：14528046
> 
> 赞同：1
> 
> 时间：2013-01-25T18:24:06.263
> 
> 标签：android, google-api, google-cloud-messaging

我已将使用 Google Cloud Messaging 向 Android 应用程序发送推送通知的 Web 应用程序从本地工作站迁移到服务器。

从我的工作站连接到`https://android.googleapis.com/gcm/send`工作完美。我的 Google API 项目中允许的 IP 列表包括我的服务器的 IP（我已经检查了三次），但是当我使用来自服务器的完全相同的 API 密钥进行连接时，我总是收到`401`来自 Google 的（未经授权的）响应.

我从 Linode VPS 连接，当我`wget`使用相同的 URL 时，我可以看到它正在通过 IPV6。我已经复制了我的服务器的 IPV6 地址，`http://whatismyv6.com/`并将其包含在允许的 IP 列表中，但我仍然只收到`401`响应。

我的猜测是它与 IPV6 有关，所以我会继续尝试通过 IPV4 强制连接 - 但我很好奇是否有其他人经历过这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:37:13.430

有趣的。它突然开始工作了。出于好奇，我删除了我的 IPV6 地址，再次尝试但失败了。然后添加回来后，它失败了几次，然后又开始工作。

谷歌似乎需要一点时间才能接受 IPV6 地址？

我想我会留下这个问题/答案，以防其他人遇到它。确保您的服务器的 IPV6 地址在允许的列表中，然后再补充咖啡并稍后再试。

# java - Java 代码、算术和 if/else 语句问题

> ID：14528047
> 
> 赞同：-3
> 
> 时间：2013-01-25T18:24:07.383
> 
> 标签：java, math

希望有人可以帮我处理这段代码。代码的开头你会看到我的 psudo，它说明了我正在尝试做的事情。以前只用 C++ 编写过，所以转换让我有些失望。

```
package correctFare;

/* create static variables for figures that will remain constant throughout program (fare,dollar value etc.)
 * 
 * create variable that will be used to store the amount of money the user states is entered (entered amount must be 0=<x<=20
 * Prompt user to enter the amount of money they are inserting which will be stored in the input var.
 *      note* remind user that amount must be divisable by .25 and no greater than 20.0
 * 
 * subtract 2.25 from input, if the input-fare is not >= zero report error insufficient funds
 * divide input by 0.25, if the number is not a whole number, int, report error and state that all values bust be multiples of 25 cents
 * 
 * create open double variable as 'change'
 * take input, subtract 2.25 and store new amount as change
 * 
 * change is then divided by static variable ten, if zero continue to next step, else store amount as tenChange, change-(tenChange*10) continue to next step
 * follow with dividing change by 5, same steps as prior
 * repeat again with one
 * lastly finish with quarters
 * 
 * Prompt user with total cost of fare, amount entered and then tendered cash broken into each denomination
 */

import java.util.Scanner;

public class CTAFare {

    /**
     * @param args
     */

            static double fare=2.25;            //fare amount, remains easily accessible
            static double quarter=0.25;         //denomination amounts stored as static variables
            static int oneDollar=1;
            static int fiveDollar=5;
            static int tenDollar=10;
            static int twentyDollar=20;

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Scanner in = new Scanner( System.in );

        int max = 20;
        int min = 0;
        double inputAmount;

        System.out.println("Please enter the amount of money you wish to insert:");
        System.out.println("\n *Please note, this machine will accept bills no larger than $20 and must be divisible by $0.25.");
            inputAmount = in.nextDouble();

            if (min <= inputAmount <= max) 
        {
            System.out.println("You entered: $"+ inputAmount);
        }
        else if (max < inputAmount < min)
        {
            System.out.println("The amount you entered is not acceptable.");
        }

            double change;
            int tenChange;
            int fiveChange;
            int oneChange;
            int quarterChange;

        inputAmount-fare = change;

        if (change/tenDollar > 0) {
            change/tenDollar = tenChange;
            change - (tenChange*10) = change;

        }
        else if (change/fiveDollar > 0) {
            change/five = fiveChange;
            change - (fiveChange * 5) = change;

        }
        else if (change/oneDollar > 0) {
            change/onDollar = oneChange;
            change - (oneChange * 1) = change;
        }
        else if (change/quarter > 0) {
            change/quarter = quarterChange;
            change - (quarter*0.25) = change;
        }

        System.out.println("You have purchased one fare at $"+ fare".\n");
        System.out.println("Amount insterted: $"+ inputAmount "\n");
        System.out.println("Change tendered: \n");
        System.out.println("Ten Dollar Bills: "+ tenChange " \n");
        System.out.println("Five Dollar Bills: "+ fiveChange " \n");
        System.out.println("One Dollar Bills: "+ oneChange " \n");
        System.out.println("Quarters: "+ quarterChange " \n");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:27:56.647

这可能是我注意到的一个问题

```
if (min <= inputAmount <= max) 
```

尝试使用

```
if (min <= inputAmount && inputAmount <= max) 
```

这是另一个错误

```
 change/five = fiveChange; 
```

你不能这样做。尝试关注

```
 double newFiveCHange =  change/five ; 
```

或交换他们喜欢

```
 fiveChange = change/five; 
```

以下是您可以使用的有用链接。

[一、算子总结](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html)

[2\. if-then 和 if-then-else 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)

[3\. 表达式、语句和块](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:36:00.983

C++ 中的赋值是从右到左完成的，我假设这与 Java 类似。尝试改变你的任务...

```
change/five = fiveChange; 
```

应该

```
fiveChange = change/five; 
```

在这个例子中，你也没有在任何地方定义什么是五。与 Python 不同，您需要在使用变量之前或使用时定义变量。

此外，您可能需要考虑每种类型是什么。我不确定 int 在您的某些情况下是最佳选择。尝试修复您的分配和声明，然后查看您的输出是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:33:05.450

只需更换：

`if (min <= inputAmount <= max)`

经过

`if (min <= inputAmount && inputAmount <= max)`

并替换：

`else if (max < inputAmount < min)`

经过

`else`

# ios - 在 TouchXML 中获取重复的子项

> ID：14528050
> 
> 赞同：0
> 
> 时间：2013-01-25T18:24:20.670
> 
> 标签：ios, objective-c, xml, xml-parsing, touchxml

我有一个 CXMLDocument，问题是当我这样做时：

```
for (CXMLElement* auxitem in [doc children]){
    NSLog(@"NAME: %@", auxitem);
} 
```

它给了我一个空的 CXMLNode 和 CXMLElement 以及我想要的信息，如下所示：

```
2013-01-25 19:12:58.607 ClienteF[2438:c07] NAME: <CXMLNode 0x72ba5f0 [0x72ba900] text>
2013-01-25 19:12:58.607 ClienteF[2438:c07] NAME: <CXMLElement 0x72ba640 [0x72ba950] node        <node label="NAME" description="DESCRIPTION" id="1"> 
```

我只想获取 CXMLElement，因为它是包含信息的元素。如何丢弃 CXMLNode？当然，我想只获得偶数的 for，但我正在寻找其他选择。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:42:25.983

您可以在 for 循环中使用以下内容：

```
CXMLNode *title = [auxitem nodesForXPath:@"the value" error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:10:38.117

我已经这样做了：

```
for (CXMLElement* auxitem in [doc children]){
    if([[auxitem localName] isEqualToString:@"node"]){
        NSLog(@"NAME: %@", auxitem);
    }
} 
```

也许这不是最好的解决方案，但它有效。任何想法都会很棒。

# java - Java Thread 与其他程序的通信

> ID：14528054
> 
> 赞同：0
> 
> 时间：2013-01-25T18:24:45.077
> 
> 标签：java, multithreading, flash

我有以下问题：

我有一个 Flash 电影播放器​​，它还可以捕捉键盘输入和鼠标移动。我需要将此输入信息传递给服务器端的 java 应用程序，该应用程序运行多个线程。每个线程处理一个特定的 Flash 电影播放器​​/客户端输入。

我如何在 Flash 客户端与其特定线程之间建立这种通信？有没有比使用套接字更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:30:58.610

听起来像是 servlet 的工作！您可以在服务器（Tomcat/Jetty 等）上设置一个 servlet 容器，每个 servlet 都可以启动与相应闪存客户端的 HTTP 会话以进行跟踪。不同之处在于您需要通过 HTTP 而不是套接字从 Flash 进行通信，但您实际上可以编写一个原始套接字 servlet 和/或创建您自己的套接字协议，需要更多的努力。

# internet-explorer - 更改 IE10 中的默认 HTML 编辑器？

> ID：14528062
> 
> 赞同：1
> 
> 时间：2013-01-25T18:25:20.083
> 
> 标签：internet-explorer

有没有办法将IE10中的默认编辑器从记事本更改为记事本++？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T03:18:16.027

以管理员身份打开命令提示符并运行此命令（如有必要，将路径更改为 Notepad++）：

```
REG ADD "HKCR\.htm\OpenWithList\Notepad++\shell\edit\command" /ve /d "\"C:\Program Files\Notepad++\notepad++.exe\" %1" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T04:49:08.327

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\View Source Editor]

[HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\View Source Editor\Editor Name]
@="C:\\Notepad++\\notepad++.exe" 
```

这里记事本安装在路径中`C:\Notepad++\notepad++.exe`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T09:21:34.953

我知道这是一个很老的要求，但是：

对于 IE9 及更高版本：

*   打开 Internet Explorer
*   **按 F12**打开开发者工具
*   单击**文件**
*   单击**自定义 Internet Explorer 查看源代码**

如果选中**“其他”**，请尝试

1.  首先更改为**“记事本”选项**
2.  第二次将其重新更改为**“其他”**：然后您将被要求提供应用程序（选择您的文本编辑器）。

韩国、扎拉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-19T21:01:48.523

上一个答案也适用于 Internet Explorer 11，在 Windows 8.1 中运行（4 月 14 日 KB 更新），仅供参考。

# php - 如何摆脱 php shell 命令

> ID：14528065
> 
> 赞同：-2
> 
> 时间：2013-01-25T18:25:33.197
> 
> 标签：php, linux

我使用 Debian。我想检查我的 php 版本。我打错字了

```
php 
```

代替

```
php - v 
```

. 然后“php 命令行”将不再接受我的任何命令。没有错误没有反应。

我可以使用 kill 命令停止这个过程，但我想知道，没有选项的 'php' 是什么。以及如何在没有 kill 命令的情况下阻止它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T18:27:52.107

按`Ctrl`+`D`将 EOF（文件结尾）发送到 PHP，这将导致它退出。或者按`Ctrl`+`C`用 SIGINT 信号杀死它。

**说明：**没有命令行参数，PHP 期望在连接到终端的标准输入上提供代码。这是许多 UNIX 程序的标准行为，而不仅仅是 PHP。您可以手动键入代码，然后在完成后按`Ctrl`+ `D`，PHP 将执行您键入的代码。

你可以看到相同的行为`cat`。如果您不提供文件名`cat`，将从标准输入读取并将其复制到标准输出。这意味着它将回显您键入的每一行，直到您按`Ctrl`+`D`发出 EOF 信号。

# linux-kernel - 之间的相关性

> ID：14528069
> 
> 赞同：0
> 
> 时间：2013-01-25T18:25:45.407
> 
> 标签：linux-kernel, glibc, libc, linux-toolchain

我在这里问是因为我不知道在哪里可以找到有关此问题的任何信息。如果你能给我推荐一本书或一篇关于它的文章，我会很高兴。

我在哪里可以找到有关 Linux 内核和 GLIBC 版本之间相关性的任何信息？我知道，内核本身包含 libc 函数的实现，但我不知道它们是如何传递给它的。

例如： 最近我不得不为旧的 PowerPC 处理器构建内核。它带有开箱即用的 2.3.6 版 libc 的动态库文件。在 /lib/ 路径中有名称类似于 librt.so-2.3.6 的文件。

将此库更新到较新版本的最简单方法是什么？是否可以配置内核的构建系统以使其生成具有较新 GLIBC 版本或替代版本（例如 EGLIBC）的 uImage 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:34:58.313

几乎没有相关性，同一个内核应该适用于各种 glibc 版本，反之亦然。该库找出内核处理的内容并使用它。有关 glibc 中更改的详细信息（这是您与之交互的内容，包括对新内核功能的支持），您应该查看上游更改日志。对于 Linux 内核中的新特性，也许最好的来源是[LWN内核部分的定期“What's new in...”文章](http://lwn.net)

# php - 使用查询中的第一个选择选项实时添加字段

> ID：14528072
> 
> 赞同：0
> 
> 时间：2013-01-25T18:25:55.003
> 
> 标签：php, jquery, html, sql, ajax

[http://www.onderdelenzoeker.nl/](http://www.onderdelenzoeker.nl/)

在此网站上，当您选择一年时，它会显示更多可供选择的字段，并且仅过滤该年的选项，而无需刷新页面或任何内容。

我不知道该怎么做，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:28:57.157

您只需要挂钩`change`事件，并在那里加载其他选项。如果您必须动态加载这些其他选项，则必须发出 AJAX 请求。

* * *

看看这个视频教程，它准确地解释了如何做到这一点：

Remy Sharp：[**填充选择框**](http://jqueryfordesigners.com/populate-select-boxes/)。

# java - 如何在 StackedXYBarChart 中显示总数

> ID：14528076
> 
> 赞同：2
> 
> 时间：2013-01-25T18:26:21.353
> 
> 标签：java, jfreechart

我创建并传递了一个 TimeTableXYDataset 来显示一个 StackedBarChart，它与演示包中的 StackedXYBarChartDemo2 非常相似。除了显示为 ItemLabels 的值之外，我还想在每个条形图上方显示所有值的总和。有谁知道这是否可行，以及如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:26:04.507

您可以定义一个[`XYItemLabelGenerator`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/labels/XYItemLabelGenerator.html)将两个系列相加的自定义。

例如 ：

```
 DateAxis domainAxis = new DateAxis("Date");
    domainAxis.setTickMarkPosition(DateTickMarkPosition.MIDDLE);

    NumberAxis rangeAxis = new NumberAxis("Y");
    // Set a margin so that the label above the bar has a place to display
    rangeAxis.setUpperMargin(0.15);

    StackedXYBarRenderer renderer = new StackedXYBarRenderer(0.10);
    renderer.setDrawBarOutline(false);

    XYPlot plot = new XYPlot(dataset, domainAxis, rangeAxis, renderer);

    // Custom LabelGenerator, which displays the sum of the two series.
    XYItemLabelGenerator generator = new XYItemLabelGenerator() {
        @Override
        public String generateLabel(XYDataset dataset, int series, int item) {
            // Sum values for the two series of data
            double sum = dataset.getYValue(0, item) + dataset.getYValue(1, item);
            return "" + sum;
        }
    };

    // The LabelGenerator is linked to series 1 (top part of the bar)
    renderer.setSeriesItemLabelGenerator(1, generator);
    renderer.setSeriesItemLabelsVisible(1, true);
    renderer.setSeriesPositiveItemLabelPosition(1, new ItemLabelPosition(ItemLabelAnchor.OUTSIDE12,
            TextAnchor.BASELINE_CENTER));
    renderer.setItemLabelAnchorOffset(10);

    JFreeChart chart = new JFreeChart("Stacked XY Bar Chart Demo 2", plot);
    return chart; 
```

# mysql - mysql表设计问题

> ID：14528079
> 
> 赞同：2
> 
> 时间：2013-01-25T18:26:45.387
> 
> 标签：mysql, database, database-design

我正在开发一个“e-class”应用程序，其中有管理员、教师、学生和课程。一个学生可以有很多老师和很多课，一个老师可以有很多学生和很多课，一课可以有很多老师但是很多学生。

我想让管理员拥有自己的登录页面，并且教师/学生共享相同的登录页面。（顺便说一句，这是最好的方法吗？）

我的问题是，我是否应该将所有与登录相关的信息（用户名、密码、电子邮件）放入“用户”表中，并为所有其余信息设置单独的表（“教师”、“学生”）？

我是否应该在“用户”表中包含一个指向“学生”/“教师”表的主 ID 的键？

所有这些的最佳方法是什么？帮帮我，mysql大师:)

注意：我见过很多与我相关的问题，但没有一个真正回答了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:48:48.243

我会比 Abe Miessler 建议的更进一步，并在用户和角色之间创建一个参考表。

例如，教师可能以学生身份注册，因此需要在不同时间同时担任这两个角色，这并非不可能。

```
USER_TABLE:
UserID PK
UserName
OtherUserData

ROLE_TABLE
RoleID PK
RoleName

USER_ROLES
UserID PK
RoleID PK

USER_ROLES has composite PK on UserTable.UserID AND RoleTable.RoleID 
```

# c - 将字符串数组附加到共享内存 - 分段错误

> ID：14528080
> 
> 赞同：1
> 
> 时间：2013-01-25T18:26:48.490
> 
> 标签：c, arrays, shared-memory

我正在尝试将字符串数组附加到 C 中的共享内存。我已尽力将字符串数组（array1 和数组 2 到共享内存）附加。

这里，array1 和 array2 是宽度为 20 个字符和大小为 5 的字符串数组（我如何在附件中指定它对我来说也不是很清楚）。此外，a 和 b 分别是一维整数和浮点数组，大小为 5。

我想通过在运行时更新它们的值来改变字符串数组的状态，就像我正在做的那样。

```
#include <stdio.h>
#include <stdlib.h>
#include<sys/shm.h>
#define NUMBER_OF_DATA  5
int main()
{
   int size=(NUMBER_OF_DATA*(sizeof(int)+sizeof(float))) + (2*(20*NUMBER_OF_DATA));
   key_t key;
   key=ftok("/home/android/Desktop/newww.c",4);
   int shmid=shmget(key,size,0777|IPC_CREAT);

   int *a=(int *)shmat(shmid,0,0);
   float *b=(float *)(a+NUMBER_OF_DATA);
   char **array1=(char **)(b+NUMBER_OF_DATA);
   char **array2=(char **)(array1+(20*NUMBER_OF_DATA));
   int i;
   for(i=0;i<5;i++)
   {
       printf("enter value\n");
       scanf("%s",array1[i]);
   }
   shmdt(&shmid);
   shmctl(shmid,IPC_RMID,0);
   return 0;
} 
```

我的其他过程执行以下操作

```
int shmid=shmget(key,size,0777|IPC_CREAT);

 int *a1=(int *)shmat(shmid,0,0);
  float *b1=(float *)(a1+NUMBER_OF_DATA);
  char **array11=(char **)(b1+NUMBER_OF_DATA);
  char **array22=(char **)((char *)array11+(20*NUMBER_OF_DATA));
  for(i=0;i<NUMBER_OF_DATA;i++)
    {
      a1[i]=aaa[i];
      b1[i]=bbb[i];
      array11[i]=array111[i];
      array22[i]=array2222[i];
    } 
```

其中 aaa,bbb,array111 和 array222 是其他数组，此进程从中将值加载到共享内存中。这两个过程加在一起并不能帮助我实现我想要的。

如果有人能指出原因并告诉我将字符串数组附加到内存的正确方法，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:45:10.527

让我们使用调试器来查找错误发生的位置。首先在打开调试的情况下编译，然后运行它：

```
$ gcc -g foo.c -o foo
$ gdb foo

GNU gdb 6.3.50-20050815 (Apple version gdb-1822) (Sun Aug  5 03:00:42 UTC 2012)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .. done

(gdb) run
Starting program: foo 
Reading symbols for shared libraries +............................. done
enter value
12

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000
0x00007fff928d3143 in __svfscanf_l () 
```

该`bt`命令是 backtrace 的缩写，将显示错误发生的位置：

```
(gdb) bt
#0  0x00007fff928d3143 in __svfscanf_l ()
#1  0x00007fff928d0f6f in scanf ()
#2  0x0000000100000e6b in main () at foo.c:20 
```

这是第 20 行，调用`scanf()`. 让我们移动`up`堆栈以进入正确的框架：

```
(gdb) up
#1  0x00007fff928d0f6f in scanf ()
(gdb) up
#2  0x0000000100000e6b in main () at foo.c:20
20         scanf("%s",array1[i]); 
```

现在是`p`用于检查值的命令（print 的缩写）。

```
(gdb) p array1
$1 = (char **) 0x100034028
(gdb) p i
$2 = 0
(gdb) p array1[i]
$3 = 0x0 
```

啊哈！该行`scanf("%s", array1[i])`试图将字符串存储到值*—0*`array1[i]` — 而不是其*地址*。

让我们通过将行更改为：

```
 scanf("%s", &array1[i]); 
```

现在，重新编译，它可以工作：

```
$ ./foo
enter value
12
enter value
14
enter value
15
enter value
17
enter value
19 
```

但是，现在我的机器上有一个编译器警告：

```
foo.c: In function ‘main’:
foo.c:20: warning: format ‘%s’ expects type ‘char *’, but argument 2 has type ‘char **’
foo.c:20: warning: format ‘%s’ expects type ‘char *’, but argument 2 has type ‘char **’ 
```

但这是你要弄清楚的另一个问题:)

# intuit-partner-platform - 供应商和员工业务规则问题

> ID：14528091
> 
> 赞同：0
> 
> 时间：2013-01-25T18:27:35.200
> 
> 标签：intuit-partner-platform

根据文档，供应商和员工的业务规则说

姓名、名字或姓氏字段不应为空。

考虑到创建需要 NAME，问题是 ¿ 这是否意味着所有三个属性都必须在创建时具有值？

我们明白这一点，所以我们进行了一些测试。创建填充了三个属性的记录没有问题。当我们尝试为 GivenName 和 FamilyName（名字和姓氏）插入一个空值时，问题就来了。

Quickbooks 似乎将 NULL 值视为有效，并且在插入记录时不会返回任何错误。问题是插入的记录从未显示在 QBD UI 中，但似乎它仍然存在于某个地方，因为如果我们尝试再次插入它，我们会收到“重复名称”错误。

不确定这是一个问题还是预期的行为......任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:45:17.823

QuickBooks for windows 有一些遗留行为需要注意。First、Last 和 Name 组合为客户、供应商和员工的唯一标识符。因此，您应该填写您拥有的所有信息。如果客户、供应商或员工具有相同的 F 和 L，则插入具有相同 F 或 L 名称的记录的任何尝试都将失败。

其次，您提到该记录不会显示在 QuickBooks for Windows 中？同步成功了吗？您是否检查了您插入的记录的错误状态？您是否查看了同步日志以查看是否同步失败？

最后，如果您遇到重复错误，您需要检查具有相同 F 和 L 名称的用户的所有三个对象。通常，您会首先检查客户/供应商/员工是否存在，以便您可以更新现有记录或确定它是否实际上是新记录。

希望能帮助
贾里德

# mongodb - MongoDB 是否适合在超过 1200 万封电子邮件中搜索电子邮件的存在？

> ID：14528098
> 
> 赞同：0
> 
> 时间：2013-01-25T18:28:12.897
> 
> 标签：mongodb

我正在尝试评估是否使用 mongoDB 或 MySQL 内存引擎来存储和检索电子邮件。基本上我有一个应用程序，它必须根据此表中的电子邮件存在来决定是否向用户发送电子邮件。它可能包含超过 1200 万个条目。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:10:42.303

电子邮件商店非常适合 mongodb。很多人已经在这样做了。Sammaye 纠正了在公园散步的 1200 万份文件。[此处](http://www.mongodb.org/display/DOCS/Use+Cases)有关用例的一般指南

请记住，每个文档有 16MB 的限制 - 在此处详细 [说明](http://docs.mongodb.org/manual/reference/limits/)

如果大于，则需要使用 GridFS。

# c# - 如何使 SecurityTokenServiceConfiguration 从 app.config 加载配置信息？

> ID：14528102
> 
> 赞同：3
> 
> 时间：2013-01-25T18:28:34.467
> 
> 标签：c#, wcf, wif, sts-securitytokenservice

我正在使用 .NET 4.5 中包含的 WIF 框架创建 STS。我正在使用`WSTrustServiceHost`该类自行托管此 STS（目前）。为此，我正在执行以下操作：

```
var conf = new SecurityTokenServiceConfiguration("isser name here", true)
{
    DisableWsdl          = true,
    SecurityTokenService = typeof(MyTokenService),
};
var ct   = new WSTrustServiceContract(conf);
var host = new WSTrustServiceHost(ct);

host.Open();
// ... 
```

如您所见，我正在传递`true`给构造函数的`loadConfig`参数，`SecurityTokenServiceConfiguration`文档中说：

> **true**从配置文件加载设置；否则**为假**。

我的配置文件中有一个`identityConfiguration`元素，但似乎没有加载。我可以更改配置文件，我可以`securityTokenHandlers`更改`SecurityTokenServiceConfiguration`.

在我的 app.config 文件中，我有以下内容：

```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name="sts_behavior">
                <serviceCredentials useIdentityConfiguration="true" identityConfiguration="the_issuer_id">
                    <serviceCertificate findValue="7A5D7EB05EC741E45BF4EDA7E574F58DC31EF290" x509FindType="FindByThumbprint" storeName="My" storeLocation="LocalMachine" />
                </serviceCredentials>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <ws2007HttpBinding>
            <binding name="sts_binding">
                <security mode="Message">
                    <message clientCredentialType="UserName" />
                </security>
            </binding>
        </ws2007HttpBinding>
    </bindings>
    <services>
        <service name="System.ServiceModel.Security.WSTrustServiceContract" behaviorConfiguration="sts_behavior">
            <endpoint address="http://my-machine:54512/tokens" binding="ws2007HttpBinding" contract="System.ServiceModel.Security.IWSTrust13SyncContract" bindingConfiguration="sts_binding" />
        </service>
    </services>
</system.serviceModel> 
```

可以看到，`<serviceCredentials>`元素是指`<identityConfiguration>`配置文件中存在的元素，如果我将这个名称更改为与该`<identityConfiguration>`元素不匹配，则在打开服务主机时会引发错误。然而，这个`<identityConfiguration>`元素仍然没有被使用，因为我可以`<clear/>`使用安全令牌处理程序，并且当请求进来时仍然使用令牌处理程序。

如何以最少的编程配置配置和自托管自定义 STS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:43:50.210

经过大量探索，我发现`SecurityTokenServiceConfiguration`构造函数的重载之一允许指定`<identityConfiguration>`从中加载配置的元素的名称：

```
//
// Summary:
//     Initializes a new instance of the System.IdentityModel.Configuration.SecurityTokenServiceConfiguration
//     class that has the specified issuer name and signing credentials. Settings
//     are loaded from the specified named configuration.
//
// Parameters:
//   issuerName:
//     The issuer name. Sets the System.IdentityModel.Configuration.SecurityTokenServiceConfiguration.TokenIssuerName
//     property.
//
//   signingCredentials:
//     The signing credentials for the STS. Sets the System.IdentityModel.Configuration.SecurityTokenServiceConfiguration.SigningCredentials
//     property.
//
//   serviceName:
//     The name of the <identityConfiguration> element from which the configuration
//     is to be loaded.
public SecurityTokenServiceConfiguration(string issuerName, SigningCredentials signingCredentials, string serviceName); 
```

# asp.net - 如何在asp.net中获取IP地址

> ID：14528106
> 
> 赞同：0
> 
> 时间：2013-01-25T18:28:48.400
> 
> 标签：asp.net, ip-address

大家好，我正在尝试使用以下 c# 代码检索我的 IP 地址，而我得到的只是 127.0.0.0。IP地址。当我输入我的 IP 地址时，我需要显示我的 IPA，就像在 google 搜索中显示的那样。你能帮我吗？太感谢了

```
HttpContext.Current.Request.ServerVariables("REMOTE_ADDR")
Request.ServerVariables("REMOTE_HOST")
Request.UserHostAddress()
Request.UserHostName()

string strHostName = System.Net.Dns.GetHostName(); 
string clientIPAddress = System.Net.Dns.GetHostAddresses(strHostName).GetValue(0).ToString(); 
```

我也试过这个，但它抛出一个异常“只支持 ipv4”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:27:18.243

您也可以尝试以下方法：

```
using System; 
```

使用 System.Web；

```
namespace WebApplication1 
```

{

```
 public class Global : HttpApplication
{
protected void Application_BeginRequest(object sender, EventArgs e)
{
    // Get request.
    HttpRequest request = base.Request;

    // Get UserHostAddress property.
    string address = request.UserHostAddress;

    // Write to response.
    base.Response.Write(address);

    // Done.
    base.CompleteRequest();
}
} 
```

}

# javascript - jQuery循环动画从头开始

> ID：14528109
> 
> 赞同：-1
> 
> 时间：2013-01-25T18:28:53.420
> 
> 标签：javascript, jquery

我希望这个动画每次都从头开始重复（#slide1）。

我尝试了 setTimeout 方法，但无法让它工作。由于时间差异和（缺乏知识），我逐行使用简单的行。谢谢你的帮助。

[http://jsfiddle.net/q9EZg/6/](http://jsfiddle.net/q9EZg/6/)

```
$(document).ready(function () {
$("#slide1").fadeIn(2000, function () {
$("#slide1").delay(4000).fadeOut(2000);
$("#slide2").delay(6000).fadeIn(1000, function () {
$("#slide3").fadeIn(1000, function () {
$("#slide4").fadeIn(1000, function () {
$("#slide5").fadeIn(1000, function () {
$("#slide6").fadeIn(1000, function () {
$("#slide7").fadeIn(1000, function () {
$("#slide8").fadeIn(1000, function () {
$("#slide9").fadeIn(1000, function () {
$("div").delay(2000).fadeOut(1000, function () {});
});
});
});
});
});
});
});
});
});
});

<div id="slide1">Slide 1</div>
<div id="slide2">Slide 2</div>
<div id="slide3">Slide 3</div>
<div id="slide4">Slide 4</div>
<div id="slide5">Slide 5</div>
<div id="slide6">Slide 6</div>
<div id="slide7">Slide 7</div>
<div id="slide8">Slide 8</div>
<div id="slide9">Slide 9</div>
<div id="slide10">Slide 10</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:38:09.443

检查以下[JSFiddle](http://jsfiddle.net/q9EZg/4/) ...

```
$(document).ready(function () {

    (function animate() {
        $("#slide1").fadeIn(2000, function () {
            $("#slide1").delay(4000).fadeOut(2000);
            $("#slide2").delay(6000).fadeIn(1000, function () {
                $("#slide3").fadeIn(1000, function () {
                    $("#slide4").fadeIn(1000, function () {
                        $("#slide5").fadeIn(1000, function () {
                            $("#slide6").fadeIn(1000, function () {
                                $("#slide7").fadeIn(1000, function () {
                                    $("#slide8").fadeIn(1000, function () {
                                        $("#slide9").fadeIn(1000, function () {
                                            $("div").delay(2000).fadeOut(1000, animate); // Call animate again
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });

    }()); // Call the animate function
}); 
```

我将您的代码包装在 Animate 函数中，该函数在最后一步之后再次调用。

PS。是的，您忘记在 JSFiddle 中启用 JQuery，但我认为这不是您的问题或与您的问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:42:45.927

将您的主要动画逻辑包装在一个函数中（您已经完成了）。像这样：

```
function Animate() {
   //your animation logic
} 
```

然后定期调用相同的函数。像这样：

```
setInterval(function(){
   Animate()
}, 1000); 
```

但是，你肯定需要改进你的主要逻辑和结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:28:54.667

这个问题我已经回答过一次了。重复：[jQuery 循环命令](https://stackoverflow.com/questions/14526185/jquery-looping-command/14526292#14526292)
查看对问题的编辑，您会看到我现在已经回答了两次。

```
$(document).ready(function me() {
    $("#slide1").fadeIn(100).delay(100).fadeOut(100, function () {
        (function startFade(slide, step) {
            if ((slide === 1) && (step === -1)) {
                setTimeout(me, 100);
            } else if (slide < 10) {
                $("#slide" + slide)[step === 1 ? "fadeIn" : "fadeOut"](100, function () {
                    startFade(slide + step, step);
                });
            } else {
                startFade(slide - step, -step);
            }
        }(2, 1));
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:40:18.907

If you want a nice way of queueing up animations, you can make an animation queue array containing objects with instructions, something like this:

```
var animationQueueArr = [
    {
        selector: '#slide1',
        delay: 4000,
        animation: 'fadeIn',
        duration: 2000,
        callback: true
    },
    {
        selector: '#slide1',
        animation: 'fadeOut',
        duration: 2000,
        callback: false
    },
    {
        selector: '#slide2',
        delay: 6000,
        animation: 'fadeIn',
        duration: 2000,
        callback: true
    }
    // and so on
]; 
```

Then, you can loop over them:

```
function animate (i, skipDelayBool) {
    skipDelayBool = skipDelayBool || false;
    var animationObj = animationQueueArr[i];
    if (animationObj.delay && false === skipDelayBool) {
        return setTimeout(function () {
            animate(i, true);
        }, animationObj.delay);
    }
    if (false === animationObj.callback) {
        $(animationObj.selector)[animationObj.animation](animationObj.duration);
        i += 1;
        i %= animationQueueArr.length;  // reset back to 0 if necessary to start new loop
        animate(i);
    } else {
        $(animationObj.selector)[animationObj.animation](animationObj.duration,
        function () {
            i += 1;
            i %= animationQueueArr.length;
            animate(i);
        );
    }
}

animate(0); 
```

Note I havent tested this, but it will send you on the right path and away from your worst indentation nightmares.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T18:45:13.187

尝试这个

***JS代码***

```
$(document).ready(function () {
    setInterval(intervalTest, 1000);
});

function intervalTest() {
    $("#slide1").fadeIn(2000, function () {
        $("#slide1").delay(4000).fadeOut(2000);
        $("#slide2").delay(6000).fadeIn(1000, function () {
            $("#slide3").fadeIn(1000, function () {
                $("#slide4").fadeIn(1000, function () {
                    $("#slide5").fadeIn(1000, function () {
                        $("#slide6").fadeIn(1000, function () {
                            $("#slide7").fadeIn(1000, function () {
                                $("#slide8").fadeIn(1000, function () {
                                    $("#slide9").fadeIn(1000, function () {
                                        $("div").delay(2000).fadeOut(1000, function () {});
                                    });
                                });
                            });
                        }); 
```

# node.js - 如何将咖啡脚本与 AMD 加载程序和节点服务器一起使用？

> ID：14528111
> 
> 赞同：1
> 
> 时间：2013-01-25T18:28:57.720
> 
> 标签：node.js, coffeescript, middleware, amd

```
Http Server: node.js 0.8.16
source files: mix of js and coffee
AMD loader: curl / require
Markup: jade 
CSS: styl 
```

我正在使用上述设置构建原型应用程序。一切正常，但我正在努力让 AMD 加载程序与应用程序集成。资产文件夹如下所示：

```
|____assets                                                    
| |____css                                                     
| | |____style.css                                             
| | |____style.styl                                            
| |____img                                                     
| |____js                                                      
| | |____bacon.js                                              
| | |____curl.js                                               
| | |____foo.coffee                                   
| | |____index.coffee 
```

好的，所以我想获取`index.coffee`并`foo.coffee`编译为 js 并在浏览器请求等时提供服务。如果我使用[connect-assets](https://github.com/TrevorBurnham/connect-assets)并放入我的玉标记，`/js/foo.js`这将正常工作。但这开始了 connect-assets 编译，（我认为）是即时将咖啡文件编译为 js。`!= js('foo')``!= js(`

但是，如果我使用`curl`这样的路径`"foo" : "/js/foo.js"`将无法正常工作，因为 connect-assets 的 js() 方法没有启动。

是否有节点中间件可以将咖啡文件请求作为 js 文件处理？我看了一点，connect-assets 是我能找到的最接近的。

我想避免在我的咖啡文件上设置一个“观察者”。因为我使用了一些 js 文件和一些 coffee-as-js 文件，所以我不想跟踪“真正的”js 文件在哪里以及“on-the-fly”js 文件在哪里。

**更新 5/24**：我放弃了所有的中间件小提琴，并使用`grunt`了一个观察者，当它发生变化时它会编译东西。效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:19:26.553

是的，大部分是重复的。无论如何，我都会回答它，以防万一这有助于其他人。

[https://github.com/wdavidw/node-connect-coffee-script](https://github.com/wdavidw/node-connect-coffee-script)

```
var app = express();

srcFolder = path.join(__dirname, 'assets', 'src', 'coffee');
publicFolder = path.join(__dirname, 'assets');
console.log("public folder: " + publicFolder);

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  ...
  app.use(require('connect-coffee-script')({
         src: srcFolder, dest: path.join( publicFolder, 'js')
  }));

  app.use(stylus.middleware ({
    debug: true,
    force: true,
    src: path.join(__dirname, 'assets', 'src', 'styl' ),
    dest:  path.join(__dirname, 'assets', 'css')})
  );

  app.use(express.static(publicFolder));
}); 
```

然后在 layout.jade 方面：

```
script
  curl = {
        baseUrl: "/js",
        paths: {
          "jquery": "//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js",
          "foo" : "foo.js",
          "index" : "index.js",
          "bacon" : "bacon.js"
        }
      };
script(src='/js/curl.js')
script
  //debugger; 
  curl(['js!jquery', 'js!bacon', 'js!foo!order', 'js!index!order'])
    .then(function(){
          console.log("scripts loaded");
          },
        function(){
          alert("a module failed to load");
         }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:03:59.580

我将提供另一种解决方案，它不是连接中间件。我编写了工具 - [camel](https://github.com/mountain/camel)，用于将 coffeescript 与 requirejs AMD 样式的加载器一起使用。

要使用骆驼，您可以：

*   npm 安装骆驼
*   骆驼 YOURPROGRAM.coffee

YOURPROGRAM.coffee 应该以 AMD 风格编写。

对于小例子，您可以检查：

*   [https://github.com/mountain/camel/tree/master/tests](https://github.com/mountain/camel/tree/master/tests)

对于大示例，您可以检查：

*   [https://github.com/Wahlque/weather/](https://github.com/Wahlque/weather/)

它使用camel和AMD风格的库，服务器端的WebWorkers和其他HTML5案例，所有代码都在CoffeeScript中。

# c# - WPF 绑定未设置为 UserControl DependencyProperty

> ID：14528119
> 
> 赞同：1
> 
> 时间：2013-01-25T18:29:34.087
> 
> 标签：c#, wpf

我有一个绑定到对象列表的 ListView。当我在 ListView 中选择一个项目时，我会捕获一个`SelectionChanged`事件，然后将所选对象传递给详细信息视图。

```
protected void list_selectionChanged(object sender, SelectionChangedEventArgs e) {
    var myObject = theList.SelectedItem as MyObjectType;

    detailsView.DataContext = myObject;
} 
```

detailsView 是与 ListView 相同的 WPF 中的 UserControl。它包含一些 XAML，如下所示：

```
<Label Content="{Binding Path=deviceId}"></Label>
<l:MyUc deviceId="{Binding Path=deviceId}" /> 
```

在 MyUC 中，我定义了一个 DependencyProperty：

```
public static readonly DependencyProperty deviceIdProperty = DependencyProperty.Register("deviceId", typeof(Guid), typeof(MyUC), new FrameworkPropertyMetadata(null));

public Guid deviceId {
    get { return (Guid)GetValue(deviceIdProperty); }
    set { SetValue(deviceIdProperty, value); }
} 
```

标签显示 deviceId，但 MyUC 中的属性从未设置。

谁能发现我的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:37:13.580

在 XAML 中使用依赖属性时，永远不会调用 set 方法。如果你想“看到”这个集合，你需要添加一个属性更改回调，因为绑定机制直接设置依赖属性，而不需要你的 setter。

有关如何实现此功能的详细信息，请参阅[MSDN 的 PropertyChanged 回调部分](http://msdn.microsoft.com/en-us/library/ms745795.aspx#Coerce_Value_Callbacks_and_Property_Changed_Events)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:56:02.377

首先，如果您可以在定义 ListView 及其属性的位置添加实际的 XAML 代码，将会很有帮助。

其次，您应该查看输出控制台（当然是在 Visual Studio 调试会话中）并查看您定义的绑定是否存在绑定错误。

绑定提供的值很可能不符合 deviceId 依赖属性类型，因此它永远不会更改。

# jquery - 我怎样才能缩短这个函数jQuery？

> ID：14528121
> 
> 赞同：0
> 
> 时间：2013-01-25T18:29:43.243
> 
> 标签：jquery, image, function, gallery

我怎样才能缩短它以使其全部适合一个功能。我有一个工作图像库，当单击具有类 a 的图像时，类 bigimg 中的图像更改为选定的图像。我可能已经做了很长的更改图像的工作，但最多只有十几个。

顺便说一句，我将托管我的图片，这些图片仅用于我的测试

**HTML/jQuery**

```
<div id="galleryholder">

            <div id="largeimg" class="center">
                <img class="bigimg" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg">
            </div>

            <div id="reel">
                <a href=""><img class="a" src="http://wallpaperstate.org/wp-content/gallery/ca_home/hd-wallpaper-30.jpg"></a>
                <a href="#"><img class="b" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg"></a>
                <a href="#"><img class="c" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg"></a>
            </div>

                <script>
                $(function() {

                  $('.a').click(function(){
                    $(".bigimg").attr('src',"http://wallpaperstate.org/wp-content/gallery/ca_home/hd-wallpaper-30.jpg");
                    return false;
                  });
                });

                $(function() {
                  $('.b').click(function(){
                    $(".bigimg").attr('src',"http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg");
                    return false;
                  });
                });
                </script>

        </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T18:32:34.727

`src`从单击的图像中动态拉取：

```
var $big = $(".bigimg");

$('#reel img').click(function () {
    $big.attr('src', this.src);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:34:14.443

```
 <div id="largeimg" class="center">
            <img class="bigimg" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg">
        </div>

        <div id="reel">
            <a href=""><img class="a" src="http://wallpaperstate.org/wp-content/gallery/ca_home/hd-wallpaper-30.jpg"></a>
            <a href="#"><img class="a" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg"></a>
            <a href="#"><img class="a" src="http://1.bp.blogspot.com/-BNkayp7vphQ/UEmx3WTwe1I/AAAAAAAAELg/eHu4hWtoXbk/s1600/desktop-wallpaper-29.jpg"></a>
        </div>

            <script>
            $(function() {
              $('.a').click(function(e){
                $(".bigimg").attr('src',$(this).attr('src'));
                e.preventDefault();
              });
            });
            </script> 
```

# sql - 在单个查询中从数据库中添加/减去数据

> ID：14528123
> 
> 赞同：-4
> 
> 时间：2013-01-25T18:29:45.880
> 
> 标签：sql, database

我可以将数据添加到表的现有数据中并在不触发查询以获取当前数据的情况下将其持久化吗？

例如：我有一个`Stock`表，其中有两列`itemame(varchar2)`和`stock(integer)`. 假设最初我有`item1`stock `10`。

现在我可以通过查询直接在当前的 10 中添加 5，而不获取当前库存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:40:33.837

SQL [UPDATE](http://en.wikipedia.org/wiki/Update_%28SQL%29)命令可以引用现有行值进行加法和减法。这很方便，因为更新是原子的，因此线程和事务是安全的。

你可能想要这样的东西：

```
UPDATE ItemStock -- Your Stock table
  SET Stock = Stock + 5 -- Increment Stock column by 5
WHERE ItemName = 'item1'; -- Primary Key of your table 
```

# java - 如何在 Java 中放大/移动多边形？

> ID：14528124
> 
> 赞同：0
> 
> 时间：2013-01-25T18:29:47.500
> 
> 标签：java, polygon

所以我有以下代码：

```
import java.awt.*;

public class Triangle extends Point {
    protected int size;
    private int p1x, p2x, p3x, p1y, p2y, p3y;

    //Create a new triangle
    public Triangle()
    {
        super();
        size = 100;
        yPos = 100;
    }

    public void reSize(int newSize) {
        size = size + newSize;
    }

    //Draw the triangle with current specifications on screen.
    public void display(Graphics g) {
        p1x = (size / 3);
        p2x = (size / 2);
        p3x = ((2 * size) / 3);
        p1y = ((2 * size) / 3);
        p2y = (size / 3);
        p3y = ((2 * size) / 3);
        int[] xPoints = { p1x, p2x, p3x };
        int[] yPoints = { p1y, p2y, p3y };
        int npoints = 3;
        g.fillPolygon(xPoints, yPoints, npoints);
    }
} 
```

以下代码用于放大/缩小三角形：

```
 if (e.getSource() == makeBigger) {
          aShape.reSize(20);
    }

    else if (e.getSource() == makeSmaller) {
          aShape.reSize(-20);
    } 
```

问题是，我还希望能够使用以下代码拖动它：

```
 this.addMouseListener(new MouseAdapter() {
    public void mouseReleased(MouseEvent me) {
        shapeColor = Color.black;
        repaint();
    }

    public void mouseDragged(MouseEvent me) {
        shapeColor = Color.lightGray;
        aShape.moveXY(me.getX(), me.getY());
        repaint();
    }
});

    this.addMouseMotionListener(new MouseAdapter() {
    public void mouseReleased(MouseEvent me) {
        shapeColor = Color.black;
        repaint();
    }

    public void mouseDragged(MouseEvent me) {
        shapeColor = Color.lightGray;
        aShape.moveXY(me.getX(), me.getY());
        repaint();
    }
}); 
```

我能看到它的唯一方法是我可以拥有一个或另一个。我如何结合它，以便我可以同时拥有这两个功能？目前它可以完美地调整大小，但假设我将 x/y 坐标中的变量大小更改为 yPos/xPos，我将能够拖动三角形但不能重塑它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T01:19:39.937

在计算角点时，您需要添加`xOffset`和成员并添加它们：`yOffset`

```
public class Triangle extends Point {
    protected int size;
    private int p1x, p2x, p3x, p1y, p2y, p3y;
    private int xOffset=0;
    private int yOffset=0;

    // ...

    //Draw the triangle with current specifications on screen.
    public void display(Graphics g) {
        p1x = (size / 3) + xOffset;
        p2x = (size / 2) + xOffset;
        p3x = ((2 * size) / 3) + xOffset;
        p1y = ((2 * size) / 3) + yOffset;
        p2y = (size / 3) + yOffset;
        p3y = ((2 * size) / 3) + yOffset;
        int[] xPoints = { p1x, p2x, p3x };
        int[] yPoints = { p1y, p2y, p3y };
        int npoints = 3;
        g.fillPolygon(xPoints, yPoints, npoints);
    }

    public void moveXY(int deltaX, int deltaY) {
        xOffset += deltaX;
        yOffset += deltaY;
    }
} 
```

这应该可以让您平移多边形。但是请注意，上述`moveXY`方法需要包含与之前的*差异*的参数，而不是绝对位置。如果您想要一个绝对位置，那很容易实现并留作练习。;)

# c# - MVC 将我的 GET 请求路由到错误的操作

> ID：14528125
> 
> 赞同：4
> 
> 时间：2013-01-25T18:29:51.010
> 
> 标签：c#, asp.net-mvc-4, routing

我的应用程序中存在 URL 路由问题。我试图解决这个问题，但还没有真正取得任何进展。

因此，我在客户端发出以下 AJAX 请求：

```
$.ajax({
    type: 'GET',
    url: programState.getBaseUrl() + 'Playlist/GetPlaylistsByUserId',
    dataType: 'json',
    data: {
        userId: user.get('id')
    },
    success: function (data) {
        console.log("JSON data:", data);
    },
    error: function(error) {
        console.error(error);
    }
}); 
```

这是网络：

![在此处输入图像描述](../Images/624a9af141fb298b9cfe79aafcfba468.png)

这是服务器错误：

![在此处输入图像描述](../Images/97a39a27ba13247b1ea0f4aef30e36e2.png)

这是控制器的 GET 和 GetPlaylistsByUserId 方法：

```
[HttpGet]
public ActionResult Get(Guid id)
{
    Playlist playlist = PlaylistDao.GetById(id);

    return new JsonDataContractActionResult(playlist);
}

[HttpGet, ActionName("GetPlaylistsByUserId")]
public ActionResult GetPlaylistsByUserId(Guid userId)
{
    IList<Playlist> playlists = PlaylistDao.GetByUserId(userId);

    return new JsonDataContractActionResult(playlists);
} 
```

最后，这是我的路线：

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
);

routes.MapRoute(
    "post-Playlist",
    "{controller}",
    new { controller = "Playlist", action = "create" },
    new { httpMethod = new HttpMethodConstraint("POST") }
    );

routes.MapRoute(
    "get-Playlist",
    "{controller}/{action}/{id}",
    new { controller = "Playlist", action = "get" },
    new { httpMethod = new HttpMethodConstraint("GET") }
    );

routes.MapRoute(
    "put-Playlist",
    "{controller}",
    new { controller = "Playlist", action = "update" },
    new { httpMethod = new HttpMethodConstraint("PUT") }
    );

routes.MapRoute(
    "delete-Playlist",
    "{controller}/{id}",
    new { controller = "Playlist", action = "delete" },
    new { httpMethod = new HttpMethodConstraint("DELETE") }
    );

routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new {controller = "Home", action = "Index", id = UrlParameter.Optional}
    ); 
```

尽我所能 - 我将我的 URL 路由到我的“获取”操作，但我打算将它路由到“GetPlaylistsByUserId”操作。我相信这会发生，因为服务器错误表明它正在为方法“Get”寻找参数“id”。

不过，我不确定为什么会发生这种情况，因为我似乎很清楚地映射了我的其他动作......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:49:34.107

将路由与请求进行比较 - 您正在请求一个与路由不匹配的操作名称。就目前而言，您的路由希望您的 ajax 请求转到而`.../Playlist/SomeGuid`不是`Playlist/GetPlaylistsByUserId?userId=SomeGuid`.

如果您想在`Playlist`未指定任何操作的情况下将所有对控制器的请求路由到 GetPlaylistsByUserId 操作，那么您想要的路由是：

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "Playlist",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

请注意 userId 的省略 - 这是作为查询字符串传递的，不需要包含在您的路线中。MVC 会自动绑定这个。

但是，就目前而言，您*正在*请求一个操作名称，因此以下路线将选择它：

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "Playlist/{action}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

您也可以使用`{controller}/{action}`，但我猜您不希望所有控制器都默认使用名为`GetPlaylistsByUserId`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:51:37.987

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

我不确定这是否可能，但有没有可能是因为你`{action}`的 Url 模式中没有？

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{action}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T18:55:41.287

您的问题是请求网址看起来像

```
Playlist/GetPlaylistsByUserId?userid=51d77etc... 
```

并且您的路由设置为：

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

他们不匹配。

要使用此路由，URL 应如下所示：

```
Playlist?userid=51d77etc... 
```

或者你的 url 应该保持不变并且路由映射应该是

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{action}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T19:04:18.640

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

应该改为

```
routes.MapRoute(
    "getPlaylistsByUserId",
    "{controller}/GetPlaylistsByUserId/{userId}",
    new { controller = "Playlist", action = "GetPlaylistsByUserId" },
    new { httpMethod = new HttpMethodConstraint("GET") }
); 
```

# php - CodeIgniter 安全措施

> ID：14528129
> 
> 赞同：-1
> 
> 时间：2013-01-25T18:30:13.990
> 
> 标签：php, codeigniter

当我在没有任何框架的情况下使用 PHP 时，我会使用类似这样的内容来验证帖子

```
$username = trim(mysql_real_escape_string($_POST['username'])); 
```

但在 CodeIgniter 我做了类似的事情

```
$username = $this->input->post('username'); 
```

CodeIgniter 会清理字符串还是我必须这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:45:19.690

Codeigniter 在使用内置的[Database Library](http://ellislab.com/codeigniter/user-guide/database/active_record.html)时会自动清理字符串。

在您的问题中，您仅访问输入值，但根本不进行任何处理或数据库活动。

您可以使用[表单验证库](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)对正在访问的输入进行任何验证，但这是在调用表单视图的控制器中完成的，而不是在表单处理控制器中完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:43:56.007

CodeIgniter 的输入类`$_POST`通过`xss_clean()`安全类中的过滤器方法获取所有信息。

[此方法](http://ellislab.com/codeigniter/user-guide/libraries/security.html)的文档及其名称表明这不是查询字符串清理程序（如问题中所建议的那样）。**相反，在使用数据库驱动程序和绑定**时，CI 在执行查询之前巧妙地执行了清理。

“查询绑定”下的[数据库查询文档](http://ellislab.com/codeigniter/user-guide/database/queries.html)的改编：

```
$sql = "SELECT * FROM some_table WHERE id = ?";

$this->db->query($sql, array($this->input->post('id'))); 
```

# ruby-on-rails - Bootstrap Scrollspy 最终元素突出显示

> ID：14528131
> 
> 赞同：3
> 
> 时间：2013-01-25T18:30:16.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, scroll

好的，所以希望这是关于 Bootstrap Scrollspy 的最后一个问题，几乎就在那里，我希望再解决一个问题。正如我所读到的，拥有 100% 的身体似乎不同意 scrollspy （我使用粘性页脚）。无论我在页面上的哪个位置，都会突出显示导航中的最后一个元素。

```
I have tried removing 100% body
I have tried removing the scrollspy js
I have tried setting the body as the target element
I have tried $('body').scrollspy(); 
```

这些都不起作用。如果我在我正在监视的元素上设置了高度，那么它确实可以工作，尽管它似乎滚动了很多目标元素然后改变了。我希望仍然能够保持粘性页脚。

这是我的代码

看法

```
<div class="container">
 <div class="row show-grid clear-both">
  <div id="left-sidebar" class="span3 sidebar">
    <div class="side-nav sidebar-block">
     <div id="dateNav">
      <h3 class="resultTitle fontSize13">Release Dates</h2>
       <ul class="nav date">
        <% @response.each_pair do |date, movie| %>
        <li><i class="icon-chevron-right"></i><%= link_to date_format(date), "#d_#{date}", :id=> '#d_#{date}' %></li>
        <% end %>
      </ul>
     </div>
    </div>
  </div>
<div class="span9">
  <div id="spyOnThis" data-spy="scroll" data-target="#dateNav">
   <% @response.each_pair do |date, movie| %>
    <h3 class="resultTitle fontSize13" id="d_<%= date %>">Available on&nbsp;<%= date_format(date) %></h3>
    <% movie.each do |m| %>
      <div class="thumbnail clearfix">
        <!--Image here
    <% end %>>
        <div class="caption pull-right">
          <!--Content Here
        </div>
      </div>
    <% end %>
  <% end %>
  </div>
</div><!--span9-->
</div><!--Row-->
</div><!--/container--> 
```

JS

```
$('#dateNav').scrollspy(); 
```

CSS

```
#dateNav{
position: fixed;
}

#spyOnThis {
height:100%;
overflow:auto;
}

.side-nav .active a {
 color: #FFBE00;
} 
```

HTML 输出（导航）

```
 <div id="left-sidebar" class="span3 sidebar">
   <div class="side-nav sidebar-block">
    <div id="dateNav">
     <h3 class="resultTitle fontSize13">Release Dates</h3>
     <ul class="nav date">
    <li><i class="icon-chevron-right"></i>
    <a id="#d_#{date}" href="#d_2013-01-09">9th Jan 2013</a>
    </li>
    <li><i class="icon-chevron-right"></i>
    <a id="#d_#{date}" href="#d_2013-01-11">11th Jan 2013</a>
  </li>
  <li class="active"><i class="icon-chevron-right"></i>
  <a id="#d_#{date}" href="#d_2013-01-30">30th Jan 2013</a>
  </li>
  </ul>
  </div>
 </div>
 </div> 
```

被监视的元素

```
<div class="span9">
 <div id="spyOnThis" data-target="#dateNav" data-spy="scroll">

  <h3 id="d_2013-01-09" class="resultTitle fontSize13">Available on 9th Jan 2013</h3>
   <div class="thumbnail clearfix">
    <!--Image Here -->
    <div class="caption pull-right">
     <!--Paragraphs in here -->
    </div>
   </div>

    <h3 id="d_2013-01-11" class="resultTitle fontSize13">Available on 11th Jan 2013</h3>
     <div class="thumbnail clearfix">
    <!--Image Here -->
     <div class="caption pull-right">
    <!-Paragraphs here
     </div>
    </div>

     <div class="thumbnail clearfix">
      <!-- Image Here-->
      <div class="caption pull-right">
       <!-paragraphs here -->
      </div>
    </div>

     <div class="thumbnail clearfix">
      <!-- Image Here-->
      <div class="caption pull-right">
       <!-paragraphs here -->
      </div>
    </div>

     <h3 id="d_2013-01-09" class="resultTitle fontSize13">Available on next date</h3>
   <div class="thumbnail clearfix">
    <!--Image Here -->
    <div class="caption pull-right">
     <!--Paragraphs in here -->
    </div>
   </div>
   </div>
   </div> 
```

为代码量道歉，但我猜最好有更多代码

那么有没有人知道这个的解决方案，因为scrollspy目前看起来确实很麻烦

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:59:48.350

您根本无法在使用 ScrollSpy 监视的元素上设置 100% 高度，无论它`body`是`div`.
但是，[GitHub 上有一个问题](https://github.com/twitter/bootstrap/pull/3829)建议解决此问题（也在[此处](https://github.com/twitter/bootstrap/issues/6484)讨论）。

在您的情况下，这将是：

```
$(window).scrollspy({wrap: $('#spyOnThis')[0]}); 
```

这是适用于该修复程序[的代码的 jsFiddle 。](http://jsfiddle.net/MgcDU/1528/)请注意，我更改了您的一些 HTML：

*   我再次删除了`data-target`and`data-spy`属性。启动 ScrollSpy 时，使用**数据**属性**或**JavaScript。
*   我给了你的`span9`div `#spyOnThis`ID，因为额外的标记是不必要的。

希望这将一劳永逸地解决它。

**编辑**

该解决方案有效；对于@Richlewis 的特定场景，我们需要将参数添加`offset: -250`到 ScrollSpy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:34:07.957

我刚刚在我正在构建的网站上工作。我遇到了同样的问题，总是突出显示最后一个元素。`.scrollspy()`我的问题是当它应该在身体上时我正在调用nav 元素。

尝试将您的脚本调用更改为：

```
$('body').scrollspy(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-28T21:40:31.393

如果其他答案对您不起作用，我的问题最终是页面顶部缺少文档类型。

Scrollspy 调用`$(window).height()`公式计算当前滚动位置。 [从this other question](https://stackoverflow.com/questions/12103208/jquery-window-height-is-returning-the-document-height)，您可以看到如果没有正确的文档类型，此调用将不起作用。

一旦我添加`<!DOCTYPE html>`到我的 HTML 顶部，Scrollspy 就开始突出显示正确的链接。

# perl - 在后台或单独进程中运行 perl 函数

> ID：14528133
> 
> 赞同：1
> 
> 时间：2013-01-25T18:30:26.423
> 
> 标签：perl, apache, process, background-process

我在兜圈子。我有创建一个巨大文件的网页。该文件需要永远创建并位于子例程中。

我的页面运行此子例程但不等待它被创建/处理的最佳方式是什么？自从我从网页上执行此操作后，apache 进程是否存在任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:49:35.197

执行此任务的最简单方法是简单地使用`fork()`并让长时间运行的子例程在子进程中运行。同时，让父级返回 Apache。您表示您已经尝试过，但是缺少有关代码的确切外观和失败原因的更多信息，很难帮助您在这条道路上前进。

另一种选择是运行一个单独的进程来负责管理长时间运行的任务。让网页使用本地套接字（或通过创建包含必要输入数据的文件）将工作单元发送到长时间运行的进程，然后您的 Web 脚本可以立即返回，而单独的进程负责完成长时间运行任务。

这种解耦执行的方法相当普遍，通常被称为“任务队列”（如果有一些机制可以在请求进入时对它们进行排队）。有许多工具可以帮助您设计这种解决方案（但对于基于文件系统的通信的简单情况，没有它们可能会很好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:13:27.257

我认为您想创建一个 Apache 的工人孙子——即：

```
Apache -> child -> grandchild 
```

孩子在分叉孙子后立即死亡，孙子关闭 STDIN、STDOUT 和 STDERR。（然后孙子创建文件。）这些是创建僵尸守护程序（与网络服务器未连接的无父工作进程）的基本步骤。

# java - Eclipse“显示提案”组合键不适用于 Java 或 C

> ID：14528137
> 
> 赞同：2
> 
> 时间：2013-01-25T18:30:36.023
> 
> 标签：java, c, eclipse

我最近下载了 Eclipse，当我按`Ctrl`+时`Space`，它没有显示任何建议。

例如，如果我`TotalElements`在代码中的另一个位置有一个名为 and 的变量，当我键入`Tota`然后按 ctrl-space 时，它​​应该提出`TotalElements`. 但是，它不这样做。

我已经转到 Windows -> 首选项 > java -> 编辑器 -> 高级。我已经检查了所有内容，但它仍然无法正常工作。

我错过了一些插件吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:10:38.133

一种解决方法是更改​​键绑定。

在 Preferences 中，选择*General>Keys*页面。搜索“内容辅助”命令。在*Binding*字段中，删除现有的绑定，然后按 control-Tab。您应该看到“Ctrl+Tab”。按*应用*按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T07:29:58.363

请确保您使用正确的资源管理器。下面是供您参考的图片。如果“J”图标是空心的，则不会显示任何提案。 [![在此处输入图像描述](../Images/171ea20e3deaf25a44a343a406180d1b.png)](https://i.stack.imgur.com/uDny2.png)

# android - 在按下后退按钮时选择特定选项卡？

> ID：14528142
> 
> 赞同：0
> 
> 时间：2013-01-25T18:30:55.210
> 
> 标签：android, android-intent, android-button

我知道使用 setSelectedNavigationItem(index) 方法我们可以选择特定的 ActionBar 选项卡。但是是否可以通过在另一个活动上按下后退按钮来设置它？（即当我在另一个活动上按下后退按钮并移动到我当前的活动持有标签时，是否可能选择了不同的标签？）我发布了一个类似的问题早些时候，但它没有用。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:15:38.877

覆盖按下的 BACK 刚好足以将 Tab 索引设置为`wanted_position`：

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
      mActionBar.setSelectedNavigationItem(wanted_position);
      return true;
    }
    return super.onKeyDown(keyCode, event);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:36:18.457

您可以只发送要选择的选项卡索引作为您意图的参数：

```
Intent i = new Intent("TabActivity");
i.putExtra("tab_index", 1);//you can put 1,2 or the index you want to
startActivity(i); 
```

# javascript - Ember 位置“历史”pre4 正确方法

> ID：14528144
> 
> 赞同：0
> 
> 时间：2013-01-25T18:31:02.917
> 
> 标签：javascript, ember.js

我在使用 ember.js 指定路由器的位置属性时遇到了一些问题。我有以下代码，如果我没有将 App.Router 的位置设置为“历史记录”，则该代码有效。当我设置它时，当它尝试加载页面时，控制台显示以下错误：未捕获的错误：没有路由匹配 URL '/test/' - 其中 /test/ 是我在 /var/www/ 中的目录。这是代码：

应用程序.js

```
window.App = Em.Application.create({
title: 'Title'
});

App.ApplicationView = Ember.View.extend({
  templateName: 'application'
 })

 App.ApplicationController = Ember.Controller.extend({
   name: 'test'
 })

 App.IndexAboutView = Ember.View.extend({
   templateName: 'index/about'
 })

 App.IndexAboutController = Ember.Controller.extend({
    str: 'my string'
 })

 App.IndexBioView = Ember.View.extend({
   templateName: 'index/bio'
  })

  App.IndexBioController = Ember.Controller.extend({
    str: 'bio text'
 })

 App.Router.reopen({
  location: 'history'
 });

 App.Router.map(function(match){
  this.resource('index', { path: '/' }, function() {
    this.route('about');
    this.route('bio');
   })
  }) 
```

我的索引文件看起来像：

```
 <script type="text/x-handlebars" data-template-name="application">

        <div class="navbar navbar-fixed-top">

            <div class="navbar-inner">

                <div class="container">
                    <a class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="brand">
                          {{#linkTo "index"}}{{unbound App.title}}{{/linkTo}}   
                    </div>
                    <div class="nav-collapse navbar-responsive-collapse collapse">
                        <ul class="nav">
                            <li><a href="#">a</a></li>
                            <li><a href="#">b</a></li>
                            <li><a href="#">c</a></li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>

        <div class="container">
          {{outlet}}
        </div>
    </script>

    <script type="text/x-handlebars" data-template-name="index/about">
      This is the str from about : {{str}}
    </script>

    <script type="text/x-handlebars" data-template-name="index/bio">
      This is the str from bio : {{str}}
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:41:29.367

尝试在路由器上设置 rootURL 属性。就像是：

```
App.Router = Ember.Router.extend({
  rootURL: '/test',
  location: "history"
}); 
```

这告诉路由器从浏览器历史记录中的相对路径开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T20:13:21.080

这对我有用：

```
App.Router.reopen({
  location: 'history'
}) 
```

其中 App 是我的应用程序常量名称，它出现在`App.Router.map`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:36:25.220

将 /test/ 添加到您的索引路径，我在[这里](http://jsbin.com/iyexuf/8/edit)添加了一个工作示例而不是 /test/ 我必须匹配 jsbin 的默认根 url，即`/iyexuf/3/edit`

```
App.Router.map(function(match){
  this.resource('index', { path: '/test/' }, function() {
    this.route('about');
    this.route('bio');
   })
  }) 
```

我添加了一个指向 about 和 bio 的链接来说明三个部分（标题、关于、bio）之间的导航

```
{{#linkTo "index.about"}}About{{/linkTo}}   
{{#linkTo "index.bio"}}Bio{{/linkTo}} 
```

# django - 使用 Django 和 Apache 进行非根路由

> ID：14528150
> 
> 赞同：5
> 
> 时间：2013-01-25T18:31:27.377
> 
> 标签：django, apache

我试图让 Apache 为 Django 提供服务，但我希望它比我现在实现的愚蠢方式具有更大的灵活性。目前，我的 httpd_wsgi.conf 有这一行：

```
WSGIScriptAlias / /Library/WebServer/Documents/acdc/apache/promotions.wsgi 
```

在我的项目的 urls.py 中，我有这一行：

```
url(r'^chicken/login/', 'login'), 
```

如果我在浏览器的地址栏中键入[http://www.example.com/chicken/login](http://www.example.com/chicken/login)，我会被路由到相应的登录功能。如果 urls.py 中的所有模式都以 'chicken' 开头，那么一切正常。

不过，我想要的是能够切换部署此应用程序的 URL。例如，如果我想让[http://www.example.com/monkey/login](http://www.example.com/monkey/login)工作怎么办？现在我必须更改我所有的 URL 和所有链接，这很愚蠢。如果我更改了 WSGIScriptAlias，这似乎应该是微不足道的：

```
WSGIScriptAlias /monkey/ /Library/WebServer/Documents/acdc/apache/promotions.wsgi 
```

那么我可以让我的网址看起来像：

```
url(r'^login/', 'login'), 
```

并摆脱耦合。问题是，经过一个小时的反复试验和研究，我无法让它发挥作用。使用刚才的配置导航到[http://www.example.com/monkey/login](http://www.example.com/monkey/login)在日志中给了我这个 Apache 错误：

```
Target WSGI script not found or unable to stat: /Library/WebServer/Documents/acdc/apache/promotions.wsgilogin 
```

所以看起来“登录”路由只是附加到启动我的 Django 应用程序的promotions.wsgi 文件中。

总而言之，我想让 Apache “吞下” URL 的一部分，并将其余部分用于与我在 urls.py 中的模式进行模式匹配。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-15T10:50:23.783

对于那些想要拥有 2 个 WSGIScriptAliases 的人，其中一个是根目录，另一个是子目录。请务必将它们按正确的顺序排列：

```
WSGIScriptAlias /game /var/www/game/game.wsgi
WSGIScriptAlias / /var/www/landing/landing.wsgi 
```

# c# - Regex.replace 和 TrimEnd 功能合二为一

> ID：14528154
> 
> 赞同：1
> 
> 时间：2013-01-25T18:32:22.090
> 
> 标签：c#, visual-studio-2010, trim

我似乎遇到了精神障碍，希望有人能指出我正确的方向。我有一个 csv 文件，它在值之间有许多逗号（随机），我有一些代码处理这个问题，它将两个逗号替换为一个等。看下面：

```
 using (StreamReader r = new StreamReader(tbFilePathName.Text))
        {
            string AllLines;
            string newLines;

            //This skips the first line.
            AllLines = r.ReadLine();

            //Reads all the lines to the end.
            AllLines = r.ReadToEnd();

            //This replaces all the instances of a double comma into a single comma. Effectively getting all the data into one column of the csv.
            newLines = Regex.Replace(AllLines, ",{2,}", ",").Trim(',');

            rtbViewLines.AppendText(newLines);

            r.Close(); 
```

但是我希望能够删除每行末尾的逗号，只在行内留下逗号。我怎样才能与下面的功能一起做到这一点？

```
 newLines = Regex.Replace(AllLines, ",{2,}", ",").Trim(','); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:38:12.690

我不知道您可以在一个替换语句中执行此操作，但另一种方法是拆分并重新加入：

```
newLines = Sting.Join(
               AllLines.Split(new [] {','},StringSplitOptions.RemoveEmptyEntries)
              ,","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:53:42.273

而不是 r.ReadToEnd() 循环遍历行并删除尾随逗号

老的

```
//Reads all the lines to the end.
AllLines = r.ReadToEnd(); 
```

新的

```
//Reads all the lines to the end.
while (r.Peek() >= 0)
{
    AllLines += r.ReadLine().TrimEnd(',');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:39:50.113

您可以使用正向查找来查找逗号前面的逗号或字符串末尾的逗号：

```
newLines = Regex.Replace(AllLines, "(?<=,),+|,+$", "", RegexOptions.Multiline); 
```

# iphone - iPhone上的陀螺仪

> ID：14528156
> 
> 赞同：34
> 
> 时间：2013-01-25T18:32:24.343
> 
> 标签：iphone, ios, ipad, accelerometer, gyroscope

我需要一些关于在 iPhone 上使用陀螺仪的帮助。在特定情况下，我无法理解 CMAttitude 关于俯仰、滚动和偏航的读数。

这是我的代码

```
- (void)handleDeviceMotion:(CMDeviceMotion*)motion {

   NSLog(@"Yaw   %f ",attitude.yaw * 180 / M_PI);
   NSLog(@"Pitch %f ",attitude.pitch * 180 / M_PI);
   NSLog(@"Roll  %f ",attitude.roll * 180 / M_PI);
} 
```

让我们假设 iPhone 躺在飞机上，如下图所示：

![在此处输入图像描述](../Images/a1e30b3e8295b4d6e27c1774688a3b47.png)

俯仰、滚动和偏航（几乎）为 0 度，任何绕轴转动都会返回可理解的读数。例如，向右转动设备，Yaw 减小，Pitch and Roll 保持为 0。

现在 iPhone 处于以下位置：

![在此处输入图像描述](../Images/dccf05c0cdea92832738a7315abb50d9.png)

并重新开始测量。

读数为：Yaw = 0，Pitch = 90，Roll = 0

由于设备围绕该轴旋转，因此间距增加。

将 iPhone 移动到这个位置：

![在此处输入图像描述](../Images/152d52732cc7fe658dac97b0c0630bd4.png)

读数为：Yaw = 30，Pitch = 90，Roll = 0

再一次，由于设备围绕 Yaw 轴旋转，因此该值会发生变化，而其他值不会发生变化。

围绕滚动轴移动设备：

![在此处输入图像描述](../Images/dc0242e852d43b3141d6c4d615506001.png)

读数为：Yaw = 0，Pitch = 90，Roll = -20。

现在我无法理解。围绕半径为 R (R > 0) 的圆移动 iPhone，如下图所示：

![在此处输入图像描述](../Images/095e664b80d6dbeea3d14096a492a3e8.png)

Yaw 改变，而 Pitch 和 Roll 没有改变。

我本来预计 Yaw 保持不变，而 Roll 改变了。

由于我只对用户绕偏航轴的旋转感兴趣，如何弥补这一点？

我遇到的另一个问题是漂移。iPhone 处于第二个图中描述的位置，长时间（1 分钟或更长时间）握在我手中。Yaw 不断增加。知道如何补偿漂移吗？

先感谢您

**更新** 我遵循了 Kay 的建议，但没有任何变化。关于我的代码的更多细节。我只想在用户围绕 Yaw 轴旋转设备时使用 Yaw 来旋转 UIImage。这是可行的，但是当用户围绕自己的垂直轴旋转时，Yaw 会发生变化。我认为这是不正确的，因为当用户围绕其垂直轴移动时，设备不会围绕其自己的 Yaw 轴旋转。可能是我错了。这是我的原始代码：

```
- (void)handleDeviceMotion:(CMDeviceMotion*)motion { 

   CMAttitude      *attitude = motion.attitude;

   NSLog(@"Yaw   %f ",attitude.yaw * 180 / M_PI);
   NSLog(@"Pitch %f ",attitude.pitch * 180 / M_PI);
   NSLog(@"Roll  %f ",attitude.roll * 180 / M_PI);

   image.transform = CGAffineTransformMakeRotation(-attitude.yaw);
} 
```

这是凯建议后的代码：

```
- (void)handleDeviceMotion:(CMDeviceMotion*)motion { 

   CMAttitude      *attitude = motion.attitude;        

   if (startAttitude == 0) {

      startAttitude = attitude;
   }

   [attitude multiplyByInverseOfAttitude:startAttitude];

   NSLog(@"Yaw   %f ",attitude.yaw * 180 / M_PI);
   NSLog(@"Pitch %f ",attitude.pitch * 180 / M_PI);
   NSLog(@"Roll  %f ",attitude.roll * 180 / M_PI);

   image.transform = CGAffineTransformMakeRotation(-attitude.yaw);
} 
```

我开始设备运动监控

```
 [motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryZVertical toQueue:[NSOperationQueue currentQueue]
                                                           withHandler: ^(CMDeviceMotion *motion, NSError *error){

                                                               [self performSelectorOnMainThread:@selector(handleDeviceMotion:) withObject:motion waitUntilDone:YES];
                                                           }]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T20:24:56.203

**[完全修改]**

## (1) 奇怪的角度

乍一看，我误以为遇到了一些与[欧拉角](http://en.wikipedia.org/wiki/Euler_angles)有关的典型问题。因为它们靠近这个问题区域并且牢记非常重要，所以我保留了原始答案的这一部分。欧拉角问题是：

*   多义性，因为旋转状态和欧拉角表示之间的关系不是双射的，即一组角度描述**一个**旋转，但一个旋转可以由一组以上的欧拉角表示。在您的问题的图 3 中，您可以通过`1: Yaw=30°, 2: Pitch=90°`或通过`1: Pitch=90°, 2: Roll=30°`
*   [云台锁定](http://en.wikipedia.org/wiki/Gimbal_lock)问题：您可能会失去一个自由度，并且设备无法再围绕其中一个轴旋转。解决方案是使用四元数或旋转矩阵。

但正如您在评论中所说，真正的罪魁祸首似乎是参考框架。从 iOS 5.0 开始，Apple 增强了传感器融合算法，并考虑了磁场数据来计算 CMAttitude。虽然仍然有旧方法[startDeviceMotionUpdates](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009670-CH1-SW27)，但它现在使用默认参考[CMAttitudeReferenceFrameXArbitraryZVertical](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009943-CH1-SW19)，以便所有测量都与“ *Z 轴垂直且 X 轴指向水平面中的任意方向*”相关。

为了在开始时（或任何其他旋转）获取关于参考的数据，您需要存储`CMAttitude`您想要作为参考的实例，然后使用`CMAttitude`' [multiplyByInverseOfAttitude](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instm/CMAttitude/multiplyByInverseOfAttitude:)方法来转换每个新的姿态，即在您的`handleDeviceMotion`方法开始时。

## (2) 偏航漂移

我认为这与 iOS 6 中的一个错误有关，就像我在[快速移动后漂移偏航角](https://stackoverflow.com/questions/13613239/drifting-yaw-angle-after-moving-fast)中描述的那样，因为它在以前的版本中可以正常工作。我提交了一个错误 - 让我们看看他们什么时候修复它。

* * *

**更新 2**

正如评论和聊天显示的那样，目标是通过倾斜设备来控制机器人。在这种情况下，知道设备的完整旋转状态会在改变行走方向时弄乱控制。因此，使用[CMDeviceMotion.gravity](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instp/CMDeviceMotion/gravity)的纯加速度计方法要方便得多。

# javascript - MongoHQ Node.js 连接 URL 连接失败

> ID：14528159
> 
> 赞同：2
> 
> 时间：2013-01-25T18:32:35.420
> 
> 标签：javascript, node.js, mongodb, mongohq

当使用具有以下设置和代码的本地开发 MongoDB 时，我有一个有效的 Node.js 应用程序设置并运行良好：

```
var MongoDB     = require('mongodb').Db;
var Server      = require('mongodb').Server;

var dbPort      = 27017;
var dbHost      = 'localhost';
var dbName      = 'my-db';

var db = new MongoDB(dbName, new Server(dbHost, dbPort, {auto_reconnect: true}), {w: 1});
db.open(function(e, d){
if (e) {
    console.log(e);
}   else{
    console.log('connected to database :: ' + dbName);
}
}); 
```

但是当我尝试连接我的 MongoHQ URI 时，我收到了 Failed to Connect 错误。

我不确定如何使用上面的代码使用 URI：mongodb://username:password@linus.mongohq.com:10022/my-db。

**编辑：** 这是我的代码的下一部分，以显示我如何使用 db 变量，以防它有助于解决问题：

```
var accounts = db.collection('accounts');

/* login validation methods */

exports.autoLogin = function(user, pass, callback)
{
accounts.findOne({user:user}, function(e, o) {
    if (o){
        o.pass == pass ? callback(o) : callback(null);
    }   else{
        callback(null);
    }
});
}

exports.manualLogin = function(user, pass, callback)
{
accounts.findOne({user:user}, function(e, o) {
    if (o == null){
        callback('user-not-found');
    }   else{
        validatePassword(pass, o.pass, function(err, res) {
            if (res){
                callback(null, o);
            }   else{
                callback('invalid-password');
            }
        });
    }
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:48:30.460

尝试这个：

```
var mongodb = require('mongodb');
var url = require('url');

var MONGOHQ_URL = "mongodb://username:password@linus.mongohq.com:10022/my-db";

var connectionUri = url.parse(MONGOHQ_URL);
var dbName = connectionUri.pathname.replace(/^\//, '');

mongodb.Db.connect(MONGOHQ_URL, function(error, client) {
    if (error) throw error;

    console.log('Connected to database :: ' + dbName);

    // Some code - Print collection names
    client.collectionNames(function(error, names){
        if(error) throw error;

        console.log("Collections");
        names.forEach(function(colData){
            var colName = colData.name.replace(dbName + ".", '')
            console.log(colName);
        });                            
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:52:37.047

```
var username    = 'username';
var passwd      = 'password';

/* establish the database connection */

var db = new MongoDB(dbName, new Server(dbHost, dbPort, {auto_reconnect: true}), {w: 1});
    db.open(function(e, aa){
    if (e) {
        console.log(e);
    }   else{
           aa.authenticate(username, passwd,function(err2,d){
             if(d){
                 console.log("Database opened");
             }
             else{
                 console.log(err2);
             }
         });

    }
}); 
```

# python - 捕获和显示屏幕截图全屏的工具（Mac OS 风格） - 错误消息

> ID：14528160
> 
> 赞同：1
> 
> 时间：2013-01-25T18:32:45.727
> 
> 标签：python, pyqt, fullscreen, screenshot, breakpoints

我正在尝试编写一个允许捕获屏幕截图的应用程序。棘手的部分是它的行为应该像 Mac OS 中的屏幕截图功能（您按下快捷方式并在屏幕上绘制一个矩形，然后该矩形将保存在 jpg 文件中）。对于这个项目，我使用 PyQt4 来创建一个 GUI（截图只是这个应用程序中的一个功能！）。到目前为止，我在 .py 文件中转换了 PyQt4 表单（目前只包含一个普通表单）并尝试实现一些代码。这是我到目前为止所拥有的：

当表单被加载时，它将隐藏，对当前屏幕进行截图并全屏显示图像（无边框并在所有窗口的顶部）。

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    def _fromUtf8(s):
        return s

try:
    _encoding = QtGui.QApplication.UnicodeUTF8
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig, _encoding)
except AttributeError:
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig)

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName(_fromUtf8("Form"))
        Form.resize(100, 100)
        Form.setContextMenuPolicy(QtCore.Qt.NoContextMenu) 
        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(_translate("Form", "Form", None))

if __name__ == "__main__":
    import sys
    from PIL import Image

    app = QtGui.QApplication(sys.argv)
    Form = QtGui.QWidget()
    ui = Ui_Form()
    ui.setupUi(Form)

    Form.hide()
    QtGui.QPixmap.grabWindow(QtGui.QApplication.desktop().winId()).save('screenshot.png', 'png')
    pixmap = QtGui.QPixmap("screenshot.png")

    lbl = QtGui.QLabel()
    lbl.setPixmap(pixmap)
    lbl.setWindowFlags (QtCore.Qt.WindowStaysOnTopHint)
    lbl.showFullScreen()        

    sys.exit(app.exec_()) 
```

实际上到目前为止这有效，但是在关闭应用程序后，我在终端中收到以下错误消息：

```
 Fri Jan 25 19:19:08 my-macbook-2.local Python[35515] <Error>: kCGErrorIllegalArgument:CGSOrderWindowList
    Fri Jan 25 19:19:08 my-macbook-2.local Python[35515] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged. 
```

我用谷歌搜索了“CGErrorBreakpoint()”，据我了解，它与调试有关。谁能给我提示如何处理此消息？由于我花了好几个小时才知道应用程序正在做它应该做的事情，我希望能够保持代码原样并找到一种方法让 python“忽略”这个错误-信息...

# mysql - 查找一组条件匹配而另一组条件不匹配的记录

> ID：14528165
> 
> 赞同：0
> 
> 时间：2013-01-25T18:33:16.860
> 
> 标签：mysql

我有一个评估结果数据库，其中包含确定学生、年级、年份和学期的字段。下面的查询找到了在某个起点和终点对特定主题进行评估的学生：

```
SELECT
  a1.PupilId
FROM assessment as a1
  JOIN assessment as a2
    USING (PupilId)
WHERE a1.GradeID in('1A','1B','1C')
    AND a2.GradeID in('5A','5B','5C')
    AND a1.NCYear = '1'
    AND a1.Term = '6'
    AND a2.NCYear = '2'
    AND a2.Term = '6'
    AND a1.Subject = '31'
    AND a2.Subject = '31'
    AND a1.Type = 'assessment'
    AND a2.Type = 'assessment' 
```

这很好用，但现在我想找到具有起始年级（即 NCYear='1' 和 Term='6'）但没有最终成绩条目的学生。我玩过NOT EXISTS，但无法让它工作。

为了澄清，这是评估表：

```
id | Subject | PupilId | NCYear | Term | GradeID | Type
--------------------------------------------------------
1  | 31      | 1       | 1      | 6    | 1A      | assessment
2  | 31      | 1       | 2      | 6    | 5A      | assessment
3  | 31      | 2       | 1      | 6    | 1A      | assessment 
```

上面的 SQL 查询应该返回 PupilID 1。我需要返回 PupilID 2 的查询，开始评估在那里但没有结束评估。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:41:09.257

用 if 试试这个查询

```
SELECT
  a1.PupilId
FROM assessment as a1
  JOIN assessment as a2
    USING (PupilId)
WHERE a1.GradeID in('1A','1B','1C')
    AND a2.GradeID in('5A','5B','5C')
    AND a1.NCYear = '1'
    AND a1.Term = '6'
    AND a2.NCYear = '2'
    AND a2.Term = '6'
    AND a1.Subject = '31'
    AND a2.Subject = '31'
    AND a1.Type = 'assessment'
    AND a2.Type = 'assessment'
    AND IF(a1.NCYear = 1, IF(a1.Term = 6,a2.GradeID IS NULL,1),1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:56:45.640

您需要使用 OUTER JOIN：

```
SELECT
  a1.PupilId
FROM assessment as a1
  OUTER JOIN assessment as a2
    ON a2.PupilId = a2.PupilId AND a2.NCYear = '2' AND a2.GradeID in('5A','5B','5C') AND a2.Term = '6' AND a2.Subject = '31' AND a2.Type = 'assessment'        
WHERE a1.GradeID in('1A','1B','1C')
    AND a1.NCYear = '1'
    AND a1.Term = '6'
    AND a1.Subject = '31'
    AND a1.Type = 'assessment'
    AND a2.PupilId IS NULL 
```

# java - 数组减法

> ID：14528169
> 
> 赞同：-1
> 
> 时间：2013-01-25T18:33:23.807
> 
> 标签：java, arrays, math, subtraction

非常简单的问题：我需要的是步骤而不是结果。

背景：我正在获取非常大的数字并将它们存储在一个数组中。然后我要么加要么减两者。因为它是一个数组，所以我必须逐列进行。我已经完成了添加。但是对于我的一生来说，从较小的数字中减去较大的数字时，我无法弄清楚/记住要做什么。

逐列解决这个问题的步骤是什么？

```
 50
 -500
 ----- 
```

编辑：它们存储在 int[] 中。使用数组，因为它是分配要求。只需要了解逐列减法的逻辑即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:48:12.273

我认为您将数字表示为数字数组。因此，例如，50 由 [5, 0] 表示（或者，也许更方便的是，[0, 5]）。我还假设您有某种方式来表示负数（减法时需要）。

您有几个选项可以处理从较小的数字中减去较大的数字：

*   颠倒减法的顺序，然后否定结果
*   对减数取反并将两个数相加得到结果

后一个选项假定您的加法算法适用于混合符号参数，并且无论被减数和减数的大小如何都可以工作。这两个选项都假定您有一个否定数字的算法。

如果您无法表示负数，那么您唯一能做的就是在被要求计算 50 - 500 时发出信号失败（因为您无法表示结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:46:03.643

遵循以下假设：

*   500 表示为 [5,0,0]
*   被减数表示为`mi`
*   减数表示为`su`

.您可以使用以下算法减去两个整数数组：

1.  比较`mi.length`_`su.length`
2.  if `mi.length`<`su.length`然后在两个数组之间交换`array`和之后的减法（从最后一个索引移动到索引的逐列减法`0th`）否定结果。
3.  如果`mi.length`==`su.length`则开始比较 mi ( `mi[i]`) 的索引 i 处的元素与 su ( `su[i]`) 的索引 i 处的元素。如果`mi`结果小于`sr`然后交换`array`. 两个数组之间的减法后否定结果。
4.  如果`mi.length > su.length`然后在两个数组之间执行正常减法。

这是加法和减法的完整代码。

```
//Assumed that none of number represented by array is LPaded by "0s" and the initegers at other than 0th position is not negative.
public class BigNumberAddSubtract
{
    private int array1[];
    private int array2[];
    private boolean shouldBeNegative = false;
    public BigNumberAddSubtract(int[] iArray1, int[] iArray2)
    {
        array1 = iArray1;
        array2 = iArray2;
    }
    public void setArray1(int[] array)
    {
        this.array1 = array;
    }
    public void setArray2(int[] array)
    {
        this.array2 = array;
    }
    //Subtraction 
    private int[] subtract()
    {
        int length1 = array1.length;
        int length2 = array2.length;
        boolean isMinus = false;
        int mi[] = array1 ;//Minuend
        int su[] = array2 ;//Subtrahend
        boolean isPrevEqual = false;
        boolean isFirstNegative = false;
        if (length1 == length2 )                
        {   
            if (array1[0] < 0 )
            {
                isFirstNegative = true;
            }
            for (int i =0 ; i < length1 ; i++)
            {
                if (Math.abs(array1[i]) == Math.abs(array2[i]))    
                {                                                  
                    isPrevEqual = true;
                    continue;
                }
                else if (array1[i] < array2[i])
                {
                    if (isPrevEqual)
                    {
                        isMinus = true;
                        System.out.println("breaking");
                        break;
                    }
                }
                else
                {
                    isPrevEqual = false;
                }
            }
        }
        else if (length1 < length2) 
        {                           
            if (array1[0] < 0)
            {
                isFirstNegative = true;
            }
            isMinus = true; 
        }
        else
        {
            if (array1[0] < 0 )
            {                                                                 
                isFirstNegative = true;
            }
        }
        array1[0] = Math.abs(array1[0]);
        array2[0] = Math.abs(array2[0]);
        if (isMinus)
        {
            mi = array2;
            su = array1;
        }
        int[] result = new int[mi.length];
        int iCursor1 = mi.length - 1;
        int iCursor2 = su.length - 1;
        int iCarry = 0;
        for (int i=result.length - 1 ; i >= 0 ; i--, iCursor1--, iCursor2--)
        {
            int iValue = 0;
            int iFrom =  0;
            iFrom = mi[iCursor1] - iCarry;                  
            if (iFrom < (iCursor2 < 0 ? 0 : su[iCursor2]))
            {
                if (iCursor1 > 0)
                {
                    iFrom = 10 + iFrom;
                }
                iCarry = 1;
            }
            else
            {
                iCarry = 0;
            }
            iValue = iFrom - (iCursor2 < 0 ? 0 : su[iCursor2]) ;      
            result[i] = iValue;                                       
        }
        int[] temp = null;
        if (isMinus)
        {
            int counter = 0;
            for (int i=0; i < result.length; i++)
            {
                if (result[i] == 0)
                {
                    counter++ ;
                    continue;
                }
                else
                {
                    result[i] = -result[i];
                    break;
                }
            }
            temp = new int[result.length - counter];
            System.arraycopy(result,counter,temp,0,result.length - counter);
            result = new int[temp.length];
            System.arraycopy(temp,0,result,0,temp.length);
        }
        if (isFirstNegative)
        {
            int counter = 0;
            for (int i=0; i < result.length; i++)
            {
                if (result[i] == 0)
                {
                    counter++ ;
                    continue;
                }
                else
                {
                    result[i] = -result[i];
                    break;
                }
            }
            temp = new int[result.length - counter];
            System.arraycopy(result,counter,temp,0,result.length - counter);
            result = new int[temp.length];
            System.arraycopy(temp,0,result,0,temp.length);
        }
        return result;
    }
    //Addition
    private int[] add()
    {
        int length1 = array1.length;
        int length2 = array2.length;
        int[] result = new int[length1 > length2 ? length1 : length2];
        int iCursor1 = array1.length - 1;
        int iCursor2 = array2.length - 1;
        int iCarry = 0;
        array1[0] = Math.abs(array1[0]);
        array2[0] = Math.abs(array2[0]);
        for (int i=result.length - 1 ; i >= 0 ; i--, iCursor1--, iCursor2--)
        {
            int iValue = 0;
            if (iCursor1 >= 0 && iCursor2 >= 0)
            {
                iValue = array1[iCursor1]  + array2[iCursor2] + iCarry;
            }
            else if (iCursor1 < 0 && iCursor2 >=0)
            {
                iValue = array2[iCursor2] + iCarry;
            }
            else if (iCursor1 >=0 && iCursor2 < 0)
            {
                iValue = array1[iCursor1] + iCarry;
            }
            if (iCursor1 == 0 && iCursor2 ==0)
            {
                result[i] = iValue;
                iCarry = 0;
            }
            else
            {
                result[i] = iValue % 10;            
                iCarry = iValue / 10;               
            }
        }
        result[0] = result[0] + iCarry;
        if (shouldBeNegative)
        {
            result[0] = -result[0];
        }
        return result;
    }
    public int[] performOperation()
    {
        if (array1[0] < 0 && array2[0] < 0)//If digit at one's place of both number is negative
        {
            shouldBeNegative = true;
            return add();
        }
        else if (array1[0] > 0 && array2[0] > 0)
        {
            return add();
        }
        else //if digit at one's place of one of the numbers is negative
        {
            return subtract();
        }
    }
    public static void main(String[] st)
    {
        int[] arr1 ={-9,0,0,6};
        int[] arr2 = {1,9,7,8};
        BigNumberAddSubtract big = new BigNumberAddSubtract(arr1,arr2);
        int[] addResult = big.performOperation();
        for (int i : addResult )
        {
            System.out.print(i);
        }
    }
} 
```

如果任何测试失败或发现差异，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T18:37:33.443

我怀疑我完全理解你的问题，但这里有一个答案：

a[i] = 50 - 500;

编辑：正如最初所说，您的问题完全不清楚。我会以与您所说的相反的顺序存储数字，因此索引 0 始终是“个”位置，索引 1 始终是“十”位置，等等。然后您可以遍历索引，直到您有涵盖了所有这些，将超出数组末尾的访问视为该位置的零值。您可以按照指定的顺序存储数字，它只会使循环逻辑更复杂一些。

# ios - UIView 和内在内容大小

> ID：14528172
> 
> 赞同：5
> 
> 时间：2013-01-25T18:33:32.697
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

UIView 是否创建一个`intrinsicContentSize`？

我创建了一个 UIView 内容视图。我不给它限制大小：

```
UIView *contentView = [UIView new];
[contentView setTranslatesAutoresizingMaskIntoConstraints:NO];
contentView.backgroundColor = [UIColor orangeColor]; 
```

我创建了另一个 UIView subview01。我给它约束大小并将其添加到我的 contentView 中：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
[imageView setTranslatesAutoresizingMaskIntoConstraints:NO];
imageView.userInteractionEnabled = TRUE;
imageView.backgroundColor = [UIColor clearColor];

[imageView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView(WIDTH)]"
                                                                  options:0
                                                                  metrics:@{@"WIDTH" : [NSNumber numberWithFloat:imageSize.width]}
                                                                    views:NSDictionaryOfVariableBindings(imageView)]];

[imageView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[imageView(HEIGHT)]"
                                                                  options:0
                                                                  metrics:@{@"HEIGHT" : [NSNumber numberWithFloat:imageSize.height]}
                                                                    views:NSDictionaryOfVariableBindings(imageView)]];

[contentView addSubview:imageView]; 
```

contentView 不会获得任何大小。我认为`intrinsicContentSize`应该计算显示所有子视图所需的大小并调整自身大小？就像 UILabel 将如何调整大小以显示其所有文本一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T19:07:06.423

不，UIView 没有内在内容大小。按钮和标签可以，因为系统很容易根据其中的字符串和/或图像计算该大小。对于一个 UIView，你通常需要 4 个约束来完全描述它的位置和大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T21:57:03.773

虽然不是一个完美的解决方案，但我确实找到了一种模仿的方法`intrinsicContentSize`。

我将容器视图设置为`NSLayoutAttributeRight`最右侧的子视图，并对最低的子视图`NSLayoutAttributeRight`执行相同操作。`NSLayoutAttributeBottom``NSLayoutAttributeBottom`

```
[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self
                                                          attribute:NSLayoutAttributeRight
                                                          relatedBy:NSLayoutRelationEqual
                                                             toItem:rightSubView
                                                          attribute:NSLayoutAttributeRight
                                                         multiplier:1 constant:0]];

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:self
                                                          attribute:NSLayoutAttributeBottom
                                                          relatedBy:NSLayoutRelationEqual
                                                             toItem:bottumSubView
                                                          attribute:NSLayoutAttributeBottom
                                                         multiplier:1 constant:0]]; 
```

# android - 如何实现特殊的软键盘

> ID：14528178
> 
> 赞同：16
> 
> 时间：2013-01-25T18:33:51.170
> 
> 标签：android, keyboard, android-softkeyboard

我想制作特殊的软键盘以在我的 android 应用程序中使用它，如下所示

![在此处输入图像描述](../Images/6dbabe99107ebbb151d02b39afcb05b1.png)

我研究了软件键盘示例并编辑了 qwerty.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/* 
**
** Copyright 2008, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License"); 
** you may not use this file except in compliance with the License. 
** You may obtain a copy of the License at 
**
**     http://www.apache.org/licenses/LICENSE-2.0 
**
** Unless required by applicable law or agreed to in writing, software 
** distributed under the License is distributed on an "AS IS" BASIS, 
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
** See the License for the specific language governing permissions and 
** limitations under the License.
*/
-->

<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:keyWidth="10%p"
    android:horizontalGap="0px"
    android:verticalGap="0px"
    android:keyHeight="6%p"
    >

     <Row   android:keyWidth="18%p">
        <Key android:codes="49" android:keyLabel="1" android:keyEdgeFlags="left"/>
        <Key android:codes="50" android:keyLabel="2"/>
        <Key android:codes="51" android:keyLabel="3"/>
        <Key android:codes="52" android:keyLabel="4"/>
        <Key android:codes="53" android:keyLabel="5"/>
        <Key android:codes="54" android:keyLabel="6"/>
        <Key android:codes="55" android:keyLabel="7"/>
        <Key android:codes="56" android:keyLabel="8"/>
        <Key android:codes="57" android:keyLabel="9"/>
        <Key android:codes="48" android:keyLabel="0" android:keyEdgeFlags="right"/>
        <Key android:codes="-5" android:keyIcon="@drawable/sym_keyboard_delete" 
                android:keyWidth="15%p" android:keyEdgeFlags="right"
                android:isRepeatable="true"/>
    </Row>
    <Row   >
        <Key android:codes="113" android:keyLabel="Q" android:keyEdgeFlags="left"/>
        <Key android:codes="119" android:keyLabel="W"/>
        <Key android:codes="101" android:keyLabel="E"/>
        <Key android:codes="114" android:keyLabel="R"/>
        <Key android:codes="116" android:keyLabel="T"/>
        <Key android:codes="121" android:keyLabel="Y"/>
        <Key android:codes="117" android:keyLabel="U"/>
        <Key android:codes="105" android:keyLabel="I"/>
        <Key android:codes="111" android:keyLabel="O"/>
        <Key android:codes="112" android:keyLabel="P" android:keyEdgeFlags="right"/>
    </Row>

    <Row    >
        <Key android:codes="97" android:keyLabel="A" android:horizontalGap="5%p" 
                android:keyEdgeFlags="left"/>
        <Key android:codes="115" android:keyLabel="S"/>
        <Key android:codes="100" android:keyLabel="D"/>
        <Key android:codes="102" android:keyLabel="F"/>
        <Key android:codes="103" android:keyLabel="G"/>
        <Key android:codes="104" android:keyLabel="H"/>
        <Key android:codes="106" android:keyLabel="J"/>
        <Key android:codes="107" android:keyLabel="K"/>
        <Key android:codes="108" android:keyLabel="L" android:keyEdgeFlags="right"/>
    </Row>

    <Row    android:keyHeight="8%p">

        <Key android:codes="122" android:keyLabel="Z"/>
        <Key android:codes="120" android:keyLabel="X"/>
        <Key android:codes="99" android:keyLabel="C"/>
        <Key android:codes="118" android:keyLabel="V"/>
        <Key android:codes="98" android:keyLabel="B"/>
        <Key android:codes="110" android:keyLabel="N"/>
        <Key android:codes="109" android:keyLabel="M"/>
        <Key android:codes="46" android:keyLabel="."
              />
        <Key android:codes="32" android:keyLabel="SPACE"
                android:keyWidth="20%p" android:isRepeatable="true"/>
         <Key android:codes="10" android:keyIcon="@drawable/sym_keyboard_return" 
                android:keyWidth="20%p" android:keyEdgeFlags="right"/>

    </Row>

</Keyboard> 
```

我得到以下信息

![在此处输入图像描述](../Images/eafa65b0ed154f10b3bd205d5536fc01.png)

忽略第一行，我怎样才能让键盘按钮背景像第一张照片一样我的意思是我想让我的键盘像第一张一样有所有细节？如何将 Gmail、Hotmail 等添加到键盘的第一排？我还想在用户单击任何键（例如默认的 android 键盘）时添加声音，我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T10:32:29.680

为键盘创建这样的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<com.YourKeyboardView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    style="@style/keyboard_1_style"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

</com.YourKeyboardView> 
```

样式如下：

```
 <style name="keyboard_1_style">
        <item name="android:keyBackground">@drawable/k1_selector</item>
        <item name="android:keyTextColor">#24B2E7</item>
        <item name="android:background">@android:color/white</item>
        <item name="android:keyPreviewLayout">@layout/k1_preview</item>
 </style> 
```

其中

```
<item name="android:keyBackground">@drawable/k1_selector</item> 
```

用于设置键的背景。

```
<item name="android:keyTextColor">#24B2E7</item> 
```

用于键的文本颜色。

```
<item name="android:background">@android:color/white</item> 
```

用于设置整个键盘的背景和

```
<item name="android:keyPreviewLayout">@layout/k1_preview</item> 
```

用于设置键的预览。

**预览布局 xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="40sp"
    android:textColor="@android:color/white"
    android:gravity="center"
    android:background="@drawable/neon_candidate_middle_pressed"/> 
```

对于键之间的空格，请使用[this](http://developer.android.com/reference/android/inputmethodservice/Keyboard.Key.html#attr_android%3ahorizontalGap)。

因为`android:background="@drawable/neon_candidate_middle_pressed"`它是您要在密钥预览中显示的背景图像。

# django - Edge Ngram 用句点分割标记

> ID：14528196
> 
> 赞同：1
> 
> 时间：2013-01-25T18:35:17.303
> 
> 标签：django, solr, django-haystack

我使用 django-haystack 1.2.5 和 solr 作为我的后端

我有一些使用 EdgeNgramField 字段的自动完成字段。

我无法获得以下字符串的结果：“8.75%”

我查看了自动生成的 schema.xml 文件，发现 EdgeNgram 使用了 WordDelimiterFilterFactory。根据 Solr 的文档，此过滤器会“拆分单词内分隔符（所有非字母数字字符）”。

我可以进行哪些调整来获得中间有句点的字符串的结果？

我不想取出过滤器，因为它可能对其他东西有用，例如缩写（例如 ACME） 也许有某种方法可以指定一个正则表达式，这样它就不会拆分数字小数？

**这里编辑是我的 TextField 字段集：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType> 
```

# windows - 适用于 Windows 的文件版本同步

> ID：14528198
> 
> 赞同：0
> 
> 时间：2013-01-25T18:35:19.487
> 
> 标签：windows, file, synchronization, rsync

我想监视文件夹的更改并保存正在更改的文件的不同版本。我不想同步更改，而是维护一个被动存储库，将所有更改记录到文件夹中。有没有好的免费软件程序可以做到这一点？

我无法在文件夹中设置存储库，因为我对其只有只读权限。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:05:57.973

[VBackup](http://www.fileviewer.com/vbackup/index.html)可以解决问题！

从网站：

> VBackup 是用于 Windows 的命令行程序，用于制作目录的备份副本。
> 
> 它的功能类似于 XCOPY 和 ROBOCOPY，但是，VBackup 实现了文件版本控制。这意味着您不仅可以从最新备份中恢复文件，还可以从任何以前的备份中恢复它们。
> 
> VBackup 版本 0.7（免费软件） 版权所有 (c) 2010 Charles Prineas。版权所有。
> 
> 用法：VBackup Source Destination [选项]
> 
> ```
>  Source   The directory to back up
>   Destination   The directory where Source will be backed up to :: :: Options: ::
>            /?   Display this help screen
>            /C   Continue with backup if an error occurs
>            /R   Restore the latest backup
>           /RP   Restore previous backup (you will be prompted with available backups)
>  /RP:YYYYMMDD   Restore backup made on YYYY/MM/DD
>            /L   List Only - do not backup any files
>            /Q   Quiet mode - suppress output
>           /NS   Do not backup subdirectories
>          /LSK   Log skipped files
>          /LUN   Log unchanged files
>          /NBS   Do not create a backup set 
> ```
> 
> /IF file [file] 仅备份匹配名称/掩码的文件 /XF 文件 [file] 排除匹配名称/掩码的文件 /ID dir [dir] 仅备份匹配名称/掩码的目录 /XD dir [dir] 排除匹配名称/掩码的目录
> 
> /IFV 文件 [文件] 仅对匹配名称/掩码的文件进行版本备份 /XFV 文件 [文件] 不对匹配名称/掩码的文件进行版本备份
> 
> ```
>  /MAX:size   Do not back up files greater than size
>    /MAXV:size   Do not make version backups of files greater than size
> 
>    /NAME:name   Give the backup a meaningful name (which can be used when restoring)
>     /LOG:file   Output to log file (overwrite existing log)
>    /LOG+:file   Output to log file (append to existing log)
>  /UNILOG:file   Output to Unicode log file (overwrite existing log)
> /UNILOG+:file   Output to Unicode log file (append to existing log) :: :: Examples: ::
>    VBackup C:\Source D:\Backups\Source /XF *.tmp *.bak /XD Release Debug /NAME:"Version 11"
>    VBackup /R D:\Backups\Source C:\Source.Restore
>    VBackup /R /NAME:"Version 11" D:\Backups\Source "C:\Source.Version 11" :: :: Notes: ::
>    Use quotes around names if they contain spaces
>    Only ONE source directory can be specified
>    File names (or masks) must be passed using /IF
>    You can only restore to an empty (or non-existent) directory :: :: Contact: ::
>    http://www.fileviewer.com/vbackup 
> ```

# codeigniter - Codeigniter 打印

> ID：14528207
> 
> 赞同：0
> 
> 时间：2013-01-25T18:35:52.383
> 
> 标签：codeigniter, printing

我有一个数据数组，我有一个打印按钮，当有人点击打印按钮时，会出现打印对话框，有人可以建议一个教程来做到这一点吗？

谢谢，J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:36:28.283

要制作打印对话框，您需要 JavaScript：

```
window.print(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:42:25.937

`window.print();`from JavaScript 将打开当前页面的打印对话框。

要仅打印您的数组，您需要做几件事：

1.  创建一个仅包含数组输出的视图。
2.  添加`onload="window.print();"`到该视图的主体标签。
3.  通过弹出窗口或新页面将按钮链接到此视图。

# regex - 如何使用正则表达式执行 CSV 文件的转换？

> ID：14528210
> 
> 赞同：-2
> 
> 时间：2013-01-25T18:36:06.160
> 
> 标签：regex, perl, csv, sed, awk

我试图解决一个问题一段时间但没有成功。一开始它看起来像一个微不足道的问题，但我已经堆积了它......

无论如何，我需要解决以下问题。我有非常大的 CSV 文件，其中包含以下格式的行：

```
NUMBER(9);NUMBER(1);NUMBER(9-10);NUMBER(2);NUMBER(1);...;NUMBER(2);NUMBER(1);STRING;DATE(DD.MM.YYYY);NUMBER(1351) 
```

例如：

```
517755369;1;0001303717;48;1;63;8;50;2;51;6;53;7;55;3;57;4;59;5;;;;;CALL;07.12.2012;1351 
```

在第一个树字段之后的每一行中，我有 1 到 10 对`NUMBER(2);NUMBER(1)`，然后是另外三个字段`STRING;DATE(DD.MM.YYYY);NUMBER(1351)`。

我需要将该文件转换为具有以下结构的文件：

```
517755369;1;0001303717;48;1;CALL;07.12.2012;1351
517755369;1;0001303717;63;8;CALL;07.12.2012;1351
517755369;1;0001303717;50;2;CALL;07.12.2012;1351
517755369;1;0001303717;51;6;CALL;07.12.2012;1351
517755369;1;0001303717;53;7;CALL;07.12.2012;1351
517755369;1;0001303717;55;3;CALL;07.12.2012;1351
517755369;1;0001303717;57;4;CALL;07.12.2012;1351
517755369;1;0001303717;59;5;CALL;07.12.2012;1351` 
```

因此，输入文件中的每一行都应转换为与原始行`NUMBER(2);NUMBER(1)`对数一样多的行。

这是输入文件的示例：

```
517760344;2;000601301061;31;1;;;;;;;;;;;;;;;;;;;CALL;07.12.2012;1351
518855369;1;000601303717;48;1;63;8;50;2;51;6;53;7;55;3;57;4;59;5;;;;;CALL;07.12.2012;1351
519775067;1;000601300771;4;2;6;3;19;1;;;;;;;;;;;;;;;CALL;07.12.2012;1351
617773407;1;000603252922;13;1;17;2;27;3;;;;;;;;;;;;;;;CALL;07.12.2012;1351
717764779;1;000601304021;31;1;;;;;;;;;;;;;;;;;;;CALL;07.12.2012;1351` 
```

一般来说，我需要一些可以与**sed**或**awk一起使用的正则***表达式*（或者一些我可以针对输入文件运行的**perl脚本）。**原始输入文件大约有 1-150 万条记录。此任务应尽快完成（最多 5 分钟进行转换）。

 ******谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:08:45.367

也许以下内容会有所帮助：

```
use strict;
use warnings;

while (<>) {
    chomp;
    print +( join ';', ( split /;/ )[ 0 .. 4, -3 .. -1 ] ) . "\n";

} 
```

输出数据：

```
517760344;2;000601301061;31;1;CALL;07.12.2012;1351
518855369;1;000601303717;48;1;CALL;07.12.2012;1351
519775067;1;000601300771;4;2;CALL;07.12.2012;1351
617773407;1;000603252922;13;1;CALL;07.12.2012;1351
717764779;1;000601304021;31;1;CALL;07.12.2012;1351 
```

用法：`perl file.csv >out.csv`。

您似乎需要前五个字段和后三个字段。上面`split`的 s on `;`， re `join`s ，`;`然后打印修改后的记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T19:37:51.547

来自@Kenosis 的想法，但对规格的不同解释：

```
use strict;
use warnings;

while (<DATA>) {
    chomp;
    my @fields = split /;/;
    my $f = 3;
    while ($fields[$f]) {
      print join( ';', @fields[0 .. 2, $f, $f + 1, -3 .. -1]), "\n";
      $f += 2;
    }
}

__DATA__
517760344;2;000601301061;31;1;;;;;;;;;;;;;;;;;;;CALL;07.12.2012;1351
518855369;1;000601303717;48;1;63;8;50;2;51;6;53;7;55;3;57;4;59;5;;;;;CALL;07.12.2012;1351
519775067;1;000601300771;4;2;6;3;19;1;;;;;;;;;;;;;;;CALL;07.12.2012;1351
617773407;1;000603252922;13;1;17;2;27;3;;;;;;;;;;;;;;;CALL;07.12.2012;1351
717764779;1;000601304021;31;1;;;;;;;;;;;;;;;;;;;CALL;07.12.2012;1351 
```

输出：

```
perl 14528210.pl
517760344;2;000601301061;31;1;CALL;07.12.2012;1351
518855369;1;000601303717;48;1;CALL;07.12.2012;1351
518855369;1;000601303717;63;8;CALL;07.12.2012;1351
518855369;1;000601303717;50;2;CALL;07.12.2012;1351
518855369;1;000601303717;51;6;CALL;07.12.2012;1351
518855369;1;000601303717;53;7;CALL;07.12.2012;1351
518855369;1;000601303717;55;3;CALL;07.12.2012;1351
518855369;1;000601303717;57;4;CALL;07.12.2012;1351
518855369;1;000601303717;59;5;CALL;07.12.2012;1351
519775067;1;000601300771;4;2;CALL;07.12.2012;1351
519775067;1;000601300771;6;3;CALL;07.12.2012;1351
519775067;1;000601300771;19;1;CALL;07.12.2012;1351
617773407;1;000603252922;13;1;CALL;07.12.2012;1351
617773407;1;000603252922;17;2;CALL;07.12.2012;1351
617773407;1;000603252922;27;3;CALL;07.12.2012;1351
717764779;1;000601304021;31;1;CALL;07.12.2012;1351 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:43:14.557

这可能对您有用（GNU sed）：

```
sed -r 's/^(([^;]*;){3})(([0-9]+;){2})(([0-9]*;)*)(([^;]*;?){3})$/\1\3\7\n\1\5\7/;Ta;P;:a;D' file 
```

*   `s/^(([^;]*;){3})(([0-9]+;){2})(([0-9]*;)*)(([^;]*;?){3})$/\1\3\7\n\1\5\7/`这个替换命令构造了两个字符串。第一个是预期的字符串，后跟换行符，第二个是原始字符串减去第一对数字。所以`^(([^;]*;){3})`表示前三个字段，`(([0-9]+;){2})`第一对数字，`(([0-9]*;)*)`剩余的数字对和`(([^;]*;?){3})$`最后三个字段。
*   `Ta`如果替换命令失败跳转到标签`a`
*   `P`打印到模式空间中的第一个换行符。
*   `:a`标签`a`
*   `D`删除直到并包括第一个换行符并开始下一个循环。在模式空间为空之前，不要读入另一行。

因此，本质上，`s/.../.../`和`D`命令用于调用循环，该循环打印构造的字符串，直到替换命令失败，然后结束循环。剩余的字符串被完全删除并开始下一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T22:52:19.703

[这是使用Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)模块的单行形式的解决方案。

```
perl -MText::CSV -lwe '$c = Text::CSV->new({
    sep_char=>';',
    eol=>$/
});                  
while($r = $c->getline(*STDIN)) { 
    my @a = splice @$r,0,3;            # remove 3 first elements
    my @c = splice @$r,-3;             # remove 3 last elements
    @$r = grep $_ ne '', @$r;          # remove empty elements
    while(@$r) {                       # while array is not empty
        $c->print(*STDOUT, [@a, splice(@$r,0,2),@c]);    # print all elements
    } }" 
```

**输出：**

```
517755369;1;0001303717;48;1;CALL;07.12.2012;1351
517755369;1;0001303717;63;8;CALL;07.12.2012;1351
517755369;1;0001303717;50;2;CALL;07.12.2012;1351
517755369;1;0001303717;51;6;CALL;07.12.2012;1351
517755369;1;0001303717;53;7;CALL;07.12.2012;1351
517755369;1;0001303717;55;3;CALL;07.12.2012;1351
517755369;1;0001303717;57;4;CALL;07.12.2012;1351
517755369;1;0001303717;59;5;CALL;07.12.2012;1351 
```

所以基本上，就像我在评论中所说，删除前 3 个元素和最后 3 个元素并存储在单独的数组中。删除空元素。循环剩余元素并根据需要打印。******

# c# - 从字符串名称动态初始化 HtmlGenericControl

> ID：14528211
> 
> 赞同：0
> 
> 时间：2013-01-25T18:36:10.763
> 
> 标签：c#, dynamic, initialization, htmlgenericcontrol

我的数据库当前包含需要在页面加载时填充的每个 Div 的名称。

一旦加载了 Div。我检索需要填充的 Div 的名称，然后我想通过后面的 c# 代码填充它们的内部 HTML。

我知道这通常可以通过直接引用 HTML 控件名称来完成，如下所示：

```
 HtmlGenericControl divControl = Div1;

    divControl.InnerHtml = "Div Populated!"; 
```

我的问题是我想从存储为字符串的 Div 名称初始化 HtmlGenericControls。

例如：

```
 string DivName = "Div1"

   HtmlGenericControl divControl = DivName;

   divControl.InnerHtml = "Div Populated!"; 
```

但是当我尝试这个字符串不能被隐式转换为 HTML 通用控件时出现错误。

有谁知道我如何能够从字符串名称中实现 HtmlGenericControls 的动态初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:39:22.957

您可以使用[Control.FindControl](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)按 id 查找控件。

```
 HtmlGenericControl divControl = parentControlId.FindControl("DivName"); 
```

# css - 如何检测 Prince PDF 中的分页符？

> ID：14528214
> 
> 赞同：3
> 
> 时间：2013-01-25T18:36:22.403
> 
> 标签：css, pdf, detection, page-break, princexml

我生成了一个 100 页长的文档，其中包含数十个部分、标题和不同的文本 + 图像内容。有用户插入的分页符和注入的分页符，但大多数文本从一页到另一页运行。

让我抓狂的是，我无法**检测一个元素是页面上的第一个还是最后一个**。

例如，我的文本容器 div 的底部和顶部边距为 10 毫米。如果分页符发生在它之前，它应该有 0 上边距。但由于我无法检测到 Prince 自动分页符，因此文本容器在某些页面上有 10 毫米的额外上边距。

*（这只是一个例子，实际情况要复杂一些）*

**有什么方法可以检测 Prince 对流动内容所做的事情吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T10:58:43.963

首先，您需要设置页面高度，除非您的文本会从页面中消失。并且在设置**page-break-after: 之后总是**在页面容器类中。然后它将起作用。

# java - 带有 ObjectInputStream 和 ByteArrayInputStream 的 StreamCorruptedException

> ID：14528229
> 
> 赞同：4
> 
> 时间：2013-01-25T18:37:24.143
> 
> 标签：java, serialization, deserialization, java-io

我有许多使用 ObjectOutputStream 写入磁盘的对象。在读取过程中，出于某些实现原因，我首先将文件作为 ByteArray 检索，我想读取缓冲数组并从中解码数据。这是一个代码片段

```
byte [] fileArray=org.apache.commons.io.IOUtils.toByteArray(filePath);

ObjectInputStream in=new ObjectInputStream(new ByteArrayInputStream(fileArray));

while(true){
 Records pos=(Records)in.readObject();
} 
```

但是，我收到此错误

```
java.io.StreamCorruptedException: invalid stream header: 2F6C6F63 
```

总之，我想将文件加载到内存中，然后在读取时解码对象而不是从磁盘中解码。

* * *

该文件写为：

```
fout=new FileOutputStream(filePath);
bos=new ByteArrayOutputStream();
oos=new ObjectOutputStream(bos);

for(int i=0;i<size;i++){
 oos.writeObject(list.get(i));
}
oos.flush();
bos.writeTo(fout);
bos=null;
oos=null;
fout.flush();
fout.close(); 
```

oos 根本没有关闭！

* * *

这是重现错误的完整示例：

```
import java.util.*;
import java.io.*;

import org.apache.commons.io.IOUtils.*;

public class Example{

    private int[] data;

    public Example(){
        data=new int[40];
    }

    public void generate(){
        for(int i=0;i<data.length;i++){
            data[i]=i;
        }
        System.out.println("Data generated!");
    }

    public void write(){
        FileOutputStream fout=null;
        ByteArrayOutputStream bos=null;
        ObjectOutputStream oos=null;
        try{
            fout=new FileOutputStream("obj.data");
            bos=new ByteArrayOutputStream();
            oos=new ObjectOutputStream(bos);
            for(int i=0;i<data.length;i++){
                oos.writeObject((Integer)data[i]);
            }
            oos.flush();
            bos.writeTo(fout);
            bos=null;
            oos=null;
            fout.flush();
            fout.close();
        }catch(IOException ioe){}
        System.out.println("Data written!");
    }

    public void read(){
        ObjectInputStream in=null;
        try{
            byte[] fileArray=org.apache.commons.io.IOUtils.toByteArray("obj.data");
            in=new ObjectInputStream(new ByteArrayInputStream(fileArray));
            while(true){
                Integer data=(Integer)in.readObject();
            }
        }catch (EOFException eofe){
            try{
                in.close();
            }catch (IOException ioe){
                ioe.printStackTrace();
            }
        }catch(ClassNotFoundException e){
            e.printStackTrace();
        }catch (Exception e){
            e.printStackTrace();
        }       
        System.out.println("Data read!");
    }

    public static void main(String[] args){
        Example example=new Example();
        example.generate();
        example.write();
        example.read();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:55:27.450

好的，现在找到了。这就是问题：

```
byte[] fileArray=org.apache.commons.io.IOUtils.toByteArray("obj.data"); 
```

[该方法](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html#toByteArray%28java.lang.String%29)不会像您认为的那样做：

> 使用平台的默认字符编码将 String 的内容作为 byte[] 获取。

它根本不加载*文件*。

如果您改用它：

```
 byte[] fileArray = 
     org.apache.commons.io.FileUtils.readFileToByteArray(new File("obj.data")); 
```

...然后数据被正确恢复。

（顺便说一下，我个人更喜欢[番石榴来做](http://guava-libraries.googlecode.com)这种事情......）

# java - Count(*) 类似从数组生成

> ID：14528232
> 
> 赞同：1
> 
> 时间：2013-01-25T18:37:49.410
> 
> 标签：java

```
Orderid     Amount      order id    Amount
c4         1            c2          60
c2         10           c3          38
c2         20           c4          13
c2         30           null           null
c3         11           null           null
c3         13           null           null
c3         14           null           null
c4         12           null           null 
```

上面是两个数组（订单 id，金额）第一个数组由包含重复 orderid 及其值的元素组成，我试图找出不同的 orderid 及其总和，如第二个数组所示。为此，我编写了以下代码。它不工作。请帮忙

```
for(int y=0;y<data.length;y++) {
                  if(data[y][0].equals(data[y+1][0])==true)
                  { 
                      tx=(Double) data[y][1]+(Double)data [y+1][1];

                     data[y+1][1] = tx;
                     data[y][1]=tx;
                     data[y][0]=null;
                  }    
                  if(y+1 > data.length)
                  {
                      break;
                  }
                 System.out.println("Tx="+tx);
                  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:46:37.943

考虑使用 a`HashMap<String><Integer>`来跟踪订单 ID 和总数。遍历数组中的项目，对于每个订单 ID/金额对，检查订单 ID 是否在哈希图中。如果它不存在，将其及其数量插入哈希图中；如果是，则将金额添加到哈希图中的该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:45:45.830

将您的值放入 Guava 的 ListMultimap 接口中。它允许重复键和重复键/值对。

更多信息：[Java HashMap 重复元素](https://stackoverflow.com/questions/4838400/java-hashmap-duplicate-elements)

# c - C中的位掩码-如何获取字节的第一位？

> ID：14528233
> 
> 赞同：5
> 
> 时间：2013-01-25T18:37:54.433
> 
> 标签：c, byte, bit-manipulation, bit

我有：

`int8_t byteFlag;`

我想得到它的第一点？我想我可能需要使用`&`，`>>`但不确定如何使用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T18:43:16.703

```
int func(int8_t byteFlag, int whichBit)
{
    if (whichBit > 0 && whichBit <= 8)
        return (byteFlag & (1<<(whichBit-1)));
    else
        return 0;
} 
```

现在`func(byteFlag, 1)`将从 LSB 返回第一个位。您可以通过`8`as`whichBit`获得第 8 位 (MSB)。

`<<`是一个左移操作符。它会将值转移`1`到适当的位置，然后我们必须执行`&`操作以获取`byteFlag`.

为了`func(75, 4)`

```
75         -> 0100 1011
1          -> 0000 0001
1 << (4-1) -> 0000 1000 //means 3 times shifting left 
```

`75 & (1 << (4 - 1))`会给我们`1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T18:39:08.787

您将使用 & 运算符。

如果“第一位”是指 LSB：

```
int firstBit = byteFlag & 1; 
```

如果“第一位”是指 MSB：

```
int firstBit = byteFlag >> (sizeof(byteFlag) * 8 - 1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T18:39:09.207

只是掩盖高位

```
int8_t high_bit = byteFlag & (1 << 7); //either 1 or 0 
```

另一个技巧，因为这是一个有符号整数

```
if (byteFlag < 0) firstBitSet = true; 
```

最后一个之所以起作用，是因为二进制补码中的数字表示。如果数字为负数，则设置高位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T18:42:01.423

```
int8_t bit_value = (byteFlag & (1U << bitPosition)) ? 1 : 0 ;
/* now it's up to you to decide which bit is the "first".
   bitPosition = 0 is the minor bit. */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T20:02:06.517

解决方案如下。要获得数字的第一位，请设置 bit = 1;

```
int bitvalue(int8_t num, int bit)
{
    if (bit > 0 && bit <= 8)
        return ( (num >> (bit-1)) & 1 );
    else
        return 0;
} 
```

# java - 提交时将表单字段转换为对象

> ID：14528234
> 
> 赞同：2
> 
> 时间：2013-01-25T18:37:55.300
> 
> 标签：java, scala, playframework-2.0

我对 Play Framework 比较陌生，所以我希望这是可以理解的。

如何告诉 play 将表单元素映射到 Form 类中的 Object 字段？

我有一个表单，其中包含从我的 ORM 中选择的对象名称下拉列表。下拉项的值是 ORM 对象的 ID 字段。

Java端的表单对象有一个带有ORM对象类型的字段，以及一个获取字符串并将其转换为对象的setter，但是在表单提交时我只收到一个表单错误“无效值”，表明翻译不是发生。

我的模板有一个表单组件：

```
@helper.select(
    createAccountForm("industry"),
    helper.options(industries)
) 
```

Where`industries`在模板构造函数中由 : 定义，`industries: Map[String, String]` 由 ID 字符串到用户可读名称组成。

我的控制器定义了类：

```
public static class CreateAccountForm {
    public String name;
    public Industry industry;

    public void setIndustry(String industryId) {
        this.industry = Industry.getIndustry(Integer.parseInt(industryId));
    }
} 
```

编辑：我在课堂上做二传手，因为[这个答案](https://stackoverflow.com/questions/12743404/how-to-bind-form-field-to-an-object-in-play-2-framework)表明这样做，但这不起作用。

EDIT2：结果证明setter方法完全不是解决这个问题的方法。在尝试让注释正常工作后，我注意到了 Formatters.SimpleFormatter 并尝试了它。它起作用了，尽管我不明白为什么它周围的额外块是必要的。

全球.java：

```
public class Global extends GlobalSettings {

// Yes, this block is necessary; no, I don't know why.
{
    Formatters.register(Industry.class, new Formatters.SimpleFormatter<Industry>() {

        @Override
        public Industry parse(String industryId, Locale locale) throws ParseException {
            return Industry.getIndustry(Integer.parseInt(industryId));
        }

        @Override
        public String print(Industry industry, Locale locale) {
            return industry.name;
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:55:20.767

当您按照文档中的描述使用表单时，Play 会将表单绑定到对象：[https ://github.com/playframework/Play20/wiki/JavaForms](https://github.com/playframework/Play20/wiki/JavaForms)

所以你的控制器应该是这样的：

```
 Form<models.Task> taskForm = form(models.Task.class).bindFromRequest();
 if (taskForm.hasErrors()) {
     return badRequest(views.html.tasks.create.render(taskForm));
 }
 Task task = taskForm.get(); 
```

任务对象可以有一个`Priority`选项列表。并且您以如下形式（视图）使用它：

```
@select(editForm("priority.id"), options(Task.priorities),  'class -> "input-xlarge", '_label -> Messages("priority"), '_default -> Messages("make.choice"), 'showConstraints -> false, '_help -> "") 
```

请注意，我`priorities.id`用来告诉 play 选择的值应该由优先级 ID 绑定。当然还有得到任务的优先级：

```
public static Map<String, String> priorities() {
    LinkedHashMap<String, String> prioritiesList = new LinkedHashMap<String, String>();
    List<Priority> priorities = Priority.getPrioritiesForTask("task");
    for (Priority orderPrio : priorities) {
        prioritiesList.put(orderPrio.getId().toString(), orderPrio.getDescription());
    }
    return prioritiesList;
} 
```

# xml - 使用 XSLT 根据其文本拆分 XML 中的元素

> ID：14528240
> 
> 赞同：2
> 
> 时间：2013-01-25T18:38:31.620
> 
> 标签：xml, xslt-2.0

我正在使用 XSLT 将一个 XML 文件转换为另一个 XML 文件。XML 文件有这样的元素：

```
<Course>
      <ID>1001</ID>
      <Seats>10</Seats>
      <Description>Department: CS , Faculty: XYZ</Description>
</Course> 
```

现在在 XSLT 中有什么方法可以让我生成如下所示的新 XML 文件：

```
<Course>
      <ID>1001</ID>
      <Seats>10</Seats>
      <Department> CS </Department> 
      <Faculty> XYZ</Faculty>
</Course> 
```

也就是说，我想将**Description**元素拆分为两个不同的元素**Department**和**Faculty**，它们基本上是用逗号分隔的内容。我使用 XMLspy 来编写我的 XSLT。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:37:28.207

这是一个可能的 XSLT2 解决方案，它基于特定于 Description 元素的模板中的标识转换和标记化字符串函数。

一般的想法是首先在“，”上拆分描述字符串，然后在“：”上拆分每个结果子字符串，只选择最后一部分。

```
<?xml version="1.0"?>

<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fn="http://www.w3.org/2005/xpath-functions">

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Description">
        <xsl:variable name="tokens" select="fn:tokenize(text(),',')"/>
        <xsl:element name="Department"><xsl:value-of select="fn:normalize-space(fn:tokenize($tokens[1],':')[2])"/></xsl:element>
        <xsl:element name="Faculty"><xsl:value-of select="fn:normalize-space(fn:tokenize($tokens[2],':')[2])"/></xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

normalize-space 函数作为最后一步调用，以去除前导/尾随空格；如果这不是必需的，请忽略这一点。

注意事项：这里的假设是描述文本的格式是固定的（即部门和学院总是以相同的顺序出现。）此外，假设在描述元素文本中既没有“：”也没有“，”。

上面的转换产生了预期的结果：

```
<?xml version="1.0" encoding="UTF-8"?><Course>
      <ID>1001</ID>
      <Seats>10</Seats>
      <Department>CS</Department>
      <Faculty>XYZ</Faculty>
</Course> 
```

请注意，在纯文本运行中包含结构化信息*并*不能充分利用 XML，这完全是关于结构的，但我猜这种格式不是您可以控制的。

**根据评论更新：**

下面列出了基于[正则表达式匹配的更强大的替代解决方案。](http://en.wikipedia.org/wiki/Regular_expression)在这种情况下，只有与 Department、Faculty 模式匹配的 Description 元素被重写；否则原始 Description 元素将通过：

```
<?xml version="1.0"?>

<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fn="http://www.w3.org/2005/xpath-functions">

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Description">
        <xsl:analyze-string select="." regex="\s*Department:\s*(.+)\s*,\s*Faculty:\s*(.+)\s*">
            <xsl:matching-substring>
                <xsl:element name="Department"><xsl:value-of select="regex-group(1)"/></xsl:element>
                <xsl:element name="Faculty"><xsl:value-of select="regex-group(2)"/></xsl:element>
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <xsl:element name="Description"><xsl:copy/></xsl:element>
            </xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>

</xsl:stylesheet> 
```

这里的关键思想是`xsl:analyze-string`通过[XSLT 正则表达式](http://www.xml.com/pub/a/2003/06/04/tr.html)来测试是否找到了预期的模式，并在这种情况下捕获相应的值。如果未找到匹配项，则复制 Description 元素的原始内容。

注意：将其与根元素集成留给读者作为练习（因为 OP 示例未显示 Course 元素适合的位置）。

# nls - 为曲线设置 nls 参数

> ID：14528248
> 
> 赞同：0
> 
> 时间：2013-01-25T18:38:57.043
> 
> 标签：nls

我是 R 的相对新手，不是数学家，而是遗传学家。我有很多组多对数据点。当它们被绘制出来时，它们会产生一条平坦的 S 曲线，其中大多数数据点最终都接近零标记。少数数据点飞得很远，形成了几乎两条 J 曲线，一条向下，一条向上。我需要找到数据急剧向上或向下变化的拐点。这可能是我的数学问题，但在我看来，如果我可以平滑曲线并将曲线拟合到直线并得到一个方程，那么我可以取曲线的二阶导数并确定二阶导数变化的拐点符号。我在 excel 中尝试过，并使用曲线来获得近似拟合以获得起始公式，但数据有点“摆动” 因此，即使我想手动完成所有操作（我不这样做），也无法确定任何一个拐点。我必须在其中找到这两个拐点的数百个数据集中的每一个都将产生大约相同的曲线，但拐点会略有不同，而精确地确定这些拐点对于问题来说绝对是至关重要的。因此，如果我可以在应该这样做的方程式中正确设置一次。为简单起见，我想将它们分成正曲线和负曲线，并分别进行。（也许 s 曲线有一些更简单的公式，这不是一个好主意？）我必须在其中找到这两个拐点的数百个数据集中的每一个都将产生大约相同的曲线，但拐点会略有不同，而精确地确定这些拐点对于问题来说绝对是至关重要的。因此，如果我可以在应该这样做的方程式中正确设置一次。为简单起见，我想将它们分成正曲线和负曲线，并分别进行。（也许 s 曲线有一些更简单的公式，这不是一个好主意？）我必须在其中找到这两个拐点的数百个数据集中的每一个都将产生大约相同的曲线，但拐点会略有不同，而精确地确定这些拐点对于问题来说绝对是至关重要的。因此，如果我可以在应该这样做的方程式中正确设置一次。为简单起见，我想将它们分成正曲线和负曲线，并分别进行。（也许 s 曲线有一些更简单的公式，这不是一个好主意？）

我已经尝试阅读手册，但由于我的数学能力较弱，这可能有点难以理解。我也找不到任何可以学习的类似例子。

这是我的数据集的头部： xy [1,] 1 0.00000000 [2,] 2 0.00062360 [3,] 3 0.00079720 [4,] 4 0.00085100 [5,] 5 0.00129020

（X 只是将 1 编号为许多数据点，并且 X 的数量会因单个集合而有所不同。）

据我所知，这是解决曲线拟合部分的问题：

> pos_curve1 <- nls(curve_fitting ~ (scal*x^scal),data = cbind.data.frame(curve_fitting), + start = list(x = 0, scal = -0.01)) numericDeriv 错误（form[[3L] ], names(ind), env) ：评估模型时产生的缺失值或无穷大另外：警告消息：1：在 min(x) 中：min 没有非缺失参数；返回 Inf 2：在 max(x) 中：max 没有非缺失参数；返回-Inf

我只是在艰难地做数学吗？我在 nls 上做错了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:53:59.583

找到了。曲线是指数而不是 J，以下有效。

```
fit <- nls(pos ~ a*tmin^b, 
             data = d, 
             start = list(a = .1, b = .1), 
             trace = TRUE) 
```

感谢 Jorge I Velez 在 R Help 2009 年 10 月 26 日

我还使用了 John Fox 和 Sanford Weisberg 上一次修订版 13：2010 年 12 月的“An Annex to An R Companion to Applied Regression, second edition”。

我的最终工作设置是：

适合 <- nls(y ~ a*log(10)^(x*b),pos_curve2,list(a = .01, b = .01), trace=TRUE)

我通过使用开放式办公室电子表格并测试各种曲线拟合选项来弄清楚公式应该是什么，直到我能够证明指数是最合适的。然后我从中得到了方程的结构。我使用 Fox & Sanford 的文章来了解设置参数的方式。

也许我并不孤单，但我真的发现很难弄清楚参数，而且很少有参考资料或问题对我有帮助。

# c# - 使用 WPF 4 更改窗口大小时重绘多边形

> ID：14528249
> 
> 赞同：0
> 
> 时间：2013-01-25T18:39:01.503
> 
> 标签：c#, .net, wpf, polygon

我正在制作一个 WPF/C# 程序`Polygon`来制作一个三角形。当我的窗口大小改变时，我希望它被重绘，所以这是我的 WPF：

```
<Polygon  Name="Plg" Grid.Row="1" Grid.Column="1" Stroke="Red" StrokeThickness="1">
    <Polygon.Fill>
        <SolidColorBrush Color="White" />
    </Polygon.Fill>
</Polygon> 
```

这是我在`Window_SizeChanged`事件中的代码：

```
private void Window_SizeChanged(object sender, SizeChangedEventArgs e)
{        
    Plg.Points.Clear(); 
    Plg.Points.Add(new Point(Plg.ActualWidth / 2 , 0));
    Plg.Points.Add(new Point(2, Plg.ActualHeight));
    Plg.Points.Add(new Point(Plg.ActualWidth, Plg.ActualHeight));         
} 
```

如果我增加窗口的大小，效果很好，但如果我尝试减小它，三角形会保持它拥有的最大尺寸。我也尝试使用`RenderSize`，但结果是一样的。

这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:02:36.230

使用此 XAML，它可以工作：（网格在窗口中）

```
<Grid Name="myGrid">
    <Polygon  Name="Plg" Grid.Row="1" Grid.Column="1" Stroke="Red" StrokeThickness="1">
        <Polygon.Fill>
            <SolidColorBrush Color="Black" />
        </Polygon.Fill>
    </Polygon>
</Grid> 
```

像这样更改您的代码：

```
private void Window_SizeChanged(object sender, SizeChangedEventArgs e)
{        
    Plg.Points.Clear(); 
    Plg.Points.Add(new Point(myGrid.ActualWidth / 2 , 0));
    Plg.Points.Add(new Point(2, myGrid.ActualHeight));
    Plg.Points.Add(new Point(myGrid.ActualWidth, this.ActualHeight));         
} 
```

# google-maps - 谷歌地图自定义控件显示在移动设备上的地图后面

> ID：14528250
> 
> 赞同：1
> 
> 时间：2013-01-25T18:39:07.127
> 
> 标签：google-maps

我的自定义地图控件显示在移动设备上的地图后面。

当您用手指移动地图时，您可以看到地图后面的控件，当您停止移动地图时，它会消失在地图后面。在桌面浏览器上一切正常。

有谁知道我是否可以添加一个设置或 css 来强制它在移动设备上显示？

```
 var mapOptions = {
            center: new google.maps.LatLng(39.964885,-104.613528),
            zoom: 5,
            maxZoom: 24,
            mapTypeControl: false,
            mapTypeId: opts.mapType,
            streetViewControl: false,
            panControl: false
        };

        // Initialize map, infowindow and create default marker icon 
        map = new google.maps.Map( elem, mapOptions );

        var controlDiv = document.createElement('div');

        var controls = $("<div></div>")
            .attr("id","mbb-map-control-wrapper")
            .css({
                "margin-top": 5
            })
            .appendTo(controlDiv);

        var showMore = $("<span>Show More</span>")
            .attr("id","mbb-showmore-btn")
            .appendTo(controls);

        $(showMore).click(function(){
            $(elem).trigger("map_show_more");
        });

        var searchHere = $("<span>Search Here</span>")
            .attr("id","mbb-searchhere-btn")
            .css({
                "margin-left": 10
            })
            .appendTo(controls);

        $(searchHere).click(function(){
            $(elem).trigger("map_search_here");
        });

        $("<div></div>").addClass("mbb-clear").appendTo(controls);

        map.controls[google.maps.ControlPosition.TOP_CENTER].push(controlDiv); 
```

# jquery - Keydown 动画变慢

> ID：14528257
> 
> 赞同：0
> 
> 时间：2013-01-25T18:39:27.897
> 
> 标签：jquery, jquery-animate, setinterval, keydown

我的动画有问题。如果你在下面看到；

当我按下向上箭头时，一个元素会跳起来，然后会掉下来。但是如果我按住向上箭头，动画就会开始，然后减速到停止。如果我放手，它就结束了。无论我是否按住向上箭头，我都希望动画（向上跳，然后向下）播放一次而不改变。只需在 keydown 上触发一次，仅此而已。

```
$('body').keydown(function(e){
    e.stopPropagation();
    if (e.keyCode == '38') { keyU = true; }
});

$('body').keyup(function(e){
    e.stopPropagation();
    if (e.keyCode == '38') { keyU = false; }
});

var tick = function() {
    if (keyU) {
        jump();
    }
}

setInterval( function() {
    rotate();
    tick();
  }, 100 );

var jump = function(){
    $("#Character").stop(true).animate({ top: "50px" },{ duration: 1000, easing: "easeOutQuad" }).animate({ top: "200px" },{ duration: 1000, easing: "easeInQuad" });
} 
```

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:46:04.527

这将检查动画是否已经在运行，如果是，那么您可以跳过再次运行它。

```
$('body').keydown(function(e){
    e.stopPropagation();
    if (e.keyCode == '38') { 
          if ($('#Character').is(':animated')) {
           //code for animation already running
              }
          else{  keyU = true; }
     }
}); 
```

# netbeans - 将自定义文件扩展名添加到 netbeans ide

> ID：14528258
> 
> 赞同：0
> 
> 时间：2013-01-25T18:39:30.800
> 
> 标签：netbeans, ide, views, codeigniter-2, assets

我正在使用 NetBeans 7.2.1 进行 CodeIgniter/Bonfire 的开发。

在我的控制器中，我正在通过

```
Assets::add_js($this->load->view('admin/index_js', $data, true), 'inline'); 
```

预解析 JavaScript 中的一些 php 变量（如动态 url）。

这迫使我用扩展名“.php”保存这些 JavaScript 文件，以便我可以通过

```
$this->load->view 
```

所有这些 JavaScript 文件都使用文件名语法

```
*_js.php 
```

由于我通过视图和带有“内联”参数的资产加载它，因此我无法放置

```
<script>
</script> 
```

脚本中的标记，因此 NetBeans 无法将其识别为 JavaScript，并且我没有语法突出显示和格式化选项。

知道如何让 NetBeans 将其识别为 JavaScript 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:34:54.727

好，知道了...

我的一位同事对资产库进行了更改，以从 assets::js 内联包含文件中“擦除”脚本标签：

[http://forums.cibonfire.com/discussion/1134/assetsjs-inline_js-change-to-load-js-via-view#Item_1](http://forums.cibonfire.com/discussion/1134/assetsjs-inline_js-change-to-load-js-via-view#Item_1)

# java - 在使用 instanceof 和强制转换时获取原始 Java 类

> ID：14528261
> 
> 赞同：2
> 
> 时间：2013-01-25T18:39:36.540
> 
> 标签：java, exception, casting, instanceof

首先，对于那些憎恶、厌恶和鄙视`instanceof`运营商的人，我理解你对它的担忧，但我坚持使用它。那是因为我无权完全重构另一个开发团队设置项目的方式，所以除非我在这里遗漏了一些东西，否则我看不到任何避免它的方法。

我有一个无法更改的 Java POJO，并允许您将其设置`Exception`为属性之一：

```
public class Message {
    private Exception exception;

    public void setException(Exception exc) {
        this.exception = exc;
    }
} 
```

同样，我不能改变这个`Message`类。

我正在编写一个传递实例的错误处理程序方法，并且我需要根据容器上设置的异常*类型*`MessageContainer`来执行不同操作的逻辑：*`Message`*

 *```
public class ErrorHandler {
    public void handle(MessageContainer container) {
        Message msg = container.getMessage();
        Exception exc = msg.getException();

        if(exc instanceof FizzException)
            System.out.println("Do x");
        else if(exc instanceof BuzzException)
            System.out.println("Do y");
        else
            System.out.println("Do z");
    }
} 
```

同样，我无法更改`ErrorHandler#handle`传递 a`MessageContainer`而不是可注入`Message`实例的事实。

所以，即使我真的不喜欢使用`instanceof`，我也看不到任何其他方式来完成这个逻辑（但无论如何，请提出建议......只要他们不涉及对`Message`，`MessageContainer`，或`handle(MessageContainer)`方法！）。

但即使使用 using `instanceof`，这段代码又是如何工作的？一旦你将 s 拉出`Exception`，`Message`我认为任何`instanceof`s 都不会触发，因为它会转换为`Exception`，无法检测它是否是`BuzzException`,`FizzException`等。我在这里有什么选择？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:47:09.980

此代码将按预期工作。在运行时，`instanceof`语句将比较 的实际类型`exc`，而不仅仅是假设这只是一个`Exception`. 如果唯一有效的陈述是`exc instanceof Exception`,`instanceof`将完全没有价值:)

另一种解决方案（我会避免使用）是比较完全限定的类名：

```
String fqcn = exc.getClass().getName();

if (fqcn.equals("com.foo.FizzException") {
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:49:11.637

强制转换为异常

```
Exception exc = msg.getException(); 
```

不会擦除异常运行时类型。它只是将其转换为基本类型。将`instanceof`仍然有效。但是，如果您的 FizzException 扩展了 BuzzException，那么您将需要`instanceof`按其他顺序进行检查。即首先检查最派生的类型。

否则，它将进入基类检查子句而不是派生子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:04:12.283

不清楚你想要什么。如果异常都是“给定的”并且您无法更改它们的实现，那么您可以使用 exception.getClass().getName() 来获取类名，也许可以在表格或其他任何东西中查找以选择您的课程的行动。

如果您*可以*更改许多异常实现，则让它们都实现一个提供“功能（）”方法或其他方法的接口。如果给定的 Exception 对象`instanceof MyFunctionalityInterface`随后被强制转换为 MyFunctionalityInterface 并调用`functionality()`以使其返回指导您的操作所需的信息。然后使用 instanceof 或 getClass().getName() 来管理无法更改的 Exception 类。*

# ios - 关于 MPMediaItemCollection 项目 lastObject

> ID：14528268
> 
> 赞同：1
> 
> 时间：2013-01-25T18:39:56.740
> 
> 标签：ios, objective-c, cocoa-touch, nsarray, mpmediaitemcollection

我在 MPMediaItemsCollection 中设置了 N 个项目，其中一些项目不是唯一的（该集合代表一个播放列表，同一首歌曲可能会出现两次）。

```
- (void)setLastSongWithItemCollection:(MPMediaItemCollection *)itemCollection
{
    [_musicPlayer setQueueWithItemCollection: itemCollection];
    NSLog(@"itemCollection count %u", itemCollection.count);
    NSLog(@"itemCollection lastObject index: %u", [itemCollection.items indexOfObject:itemCollection.items.lastObject]);
    _musicPlayer.nowPlayingItem = [[itemCollection items] lastObject];

} 
```

在一个示例中，我正在生成包含 4 首歌曲的 itemCollection，其中最后一首歌曲是第一首重复的歌曲。如果我尝试获取列表中的最后一个对象，_musicPlayer 将始终播放第一个项目。

第一个 NSLog 打印“itemCollection count 4”，清楚地表明 items 数组中有四个项目。但是，第二个 NSLog 打印“itemCollection lastObject index:0”，表示 items.lastObject 不返回对象和最后一个索引，而是返回相同媒体项出现的第一个索引。

任何人都可以对此有所了解吗？

**更正：正如所指出的，indexOfObject：不是返回重复对象索引的有效测试**

尽管如此，_musicPlayer.nowPlayingItem = [[itemCollection items] lastObject] 将与 lastObject 相同的第一个实例设置为媒体播放器。似乎 nowPlayingItem 设置器在 itemCollection 上调用 indexOfObject:。解决方法？

**跟进**

似乎没有办法在 MPMediaPlayer 的队列中选择索引，并且**setNowPlayingItem:**调用**indexOfObject:**来查找选定的媒体项。结果是**indexOfNowPlayingItem**将返回队列中与 nowPlayingItem 相同的第一个实例的索引。就我而言，这会影响我在应用程序中的队列的视觉表示（它是一个滚动视图，每首歌曲都有一个面板）。MPMediaItemCollection 可能不适用于 MPMediaItems 可以多次出现的播放列表。为了获得有关该主题的更多信息，我将填写一份错误报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:10:27.843

这实际上与 MPMediaItemsCollection 无关。相反，这只是 NSArray 的行为。

作为`-[NSArray indexOfObject:]`状态的文档，它“返回对应数组值等于给定对象的最低索引”。`-isEqual:`在这种情况下，通过向每个对象发送消息来确定相等性。

所以，如果你有一个数组：

```
NSArray *array = @[@"A", @"B", @"C", @"A"]; 
```

您将看到以下内容：

```
[array indexOfObject:@"A"] // returns 0
[array indexOfObject:array[3]] // also returns 0
[array indexOfObject:[array lastObject]] // also returns 0 
```

本质上，`-[NSArray indexOfObject]`看起来像这样：

```
- (void)indexOfObject:(id)object
{
    for (NSUInteger i=0; i<[self count]; i++) {
        if ([self[i] isEqual:object]) return i;
    }
    return NSNotFound;
} 
```

如果您想知道数组中所有匹配对象的索引，请使用`-[NSArray indexesOfObjectsPassingTest:]`

```
NSArray *array = @[@"A", @"B", @"C", @"A"];
NSIndexSet *indexes = [array indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    return [obj isEqual:@"A"];
}];
NSLog(@"Indexes: %@", indexes);

>>Indexes: <NSIndexSet: 0x7fbc9b40b170>[number of indexes: 2 (in 2 ranges), indexes: (0 3)] 
```

如果您确实需要知道哪个索引应该与您使用播放列表中的非唯一项目相关联，那么您必须在首先检索媒体项目时通过存储它自己来跟踪它。

# php - 使用按钮单击日期时间自动更新文本字段

> ID：14528273
> 
> 赞同：0
> 
> 时间：2013-01-25T18:40:10.940
> 
> 标签：php, javascript, html

我想使用用户单击按钮时的日期和时间来更新表单文本字段。似乎无法让它工作。

```
 <form id="form1" action="http://google.com">

<input id="textField1" type="text" value="0" align="right" size="13"/><br>

<input id="button1" type="button" value="1" onclick="display()">
</form>
<script type="text/javascript">
function display()
    {
       document.getElementById("textField1").value = "<?php echo datetime() ?>";
    }

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:09:23.413

您可以为此使用[Date.toString](http://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toString)

```
function display() {
    var date = new Date();
    document.getElementById("textField1").value = date.toString();
} 
```

[JSFiddle](http://jsfiddle.net/st9km/)

# android - Android：不同布局大小的不同样式（textSize）

> ID：14528274
> 
> 赞同：5
> 
> 时间：2013-01-25T18:40:14.043
> 
> 标签：android, android-layout

我为大屏幕上的所有文本按钮制作了自定义样式

```
<style name="button_large" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@color/button_color</item>
    <item name="android:textSize">30dp</item>
    <item name="android:clickable">true</item>
    <item name="android:soundEffectsEnabled">false</item>
</style> 
```

现在我想要普通屏幕的小按钮，我添加了只有 android:textSize 改变的 noew 样式。

```
<style name="button_normal" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@color/button_color</item>
    <item name="android:textSize">10dp</item>
    <item name="android:clickable">true</item>
    <item name="android:soundEffectsEnabled">false</item>
</style> 
```

是否可以提取此值并根据屏幕尺寸接收所需的值？并且只使用一种风格。

```
 <item name="android:textSize">value_based_on_screen_size</item> 
```

如果是大屏幕，它会是 30，对于普通屏幕，它会是 10

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T18:49:59.343

是的，这是可能的。这是您可以安排的方式。在您的默认设置`values/styles.xml`中，

```
<style name="button" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@color/button_color</item>
    <item name="android:textSize">@dimen/button_text_size</item>
    <item name="android:clickable">true</item>
    <item name="android:soundEffectsEnabled">false</item>
</style> 
```

然后创建一个`values/dimens.xml`这样的，

```
<resources>
    <dimen name="button_text_size">10sp</dimen>
</resources> 
```

并创建一个`values-large`这样的，

```
<resources>
    <dimen name="button_text_size">30sp</dimen>
</resources> 
```

Ps，`sp`用于字体。就像`dp`，除了如果用户通过系统设置增加默认字体大小，你的字体会相应改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:51:55.490

首先准备这些文件：

```
res/values-ldpi/dimens.xml
res/values-mdpi/dimens.xml
res/values-hdpi/dimens.xml 
```

然后为不同的文件声明资源值：

```
<!-- in values-ldpi/dimens.xml -->
<dimen name="mytextSize">30dp</dimen> 
```

和

```
<!-- in values-mdpi/dimens.xml -->
<dimen name="mytextSize">20dp</dimen> 
```

然后，在你的风格中使用这种方式：

```
<item name="android:textSize">@dimen/mytextSize</item> 
```

# c - 在 C 中删除 Linux 信号处理程序

> ID：14528278
> 
> 赞同：13
> 
> 时间：2013-01-25T18:40:18.243
> 
> 标签：c, linux, event-handling, signals

我用：

```
signal(SIGINT, CtrlHandler); 
```

添加`SIGINT`事件处理程序。但是我怎样才能删除这个处理程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-25T19:19:00.503

这是你要做的：

```
signal(SIGINT, SIG_DFL); 
```

这会将信号处理程序重置为该信号的默认行为（如果尚未设置，则包括默认处置）。在 SIGINT 的情况下，它会在没有核心转储的情况下中止您的进程。

[手册`signal`](http://man.he.net/?topic=signal&section=2)解释了为什么这样做：

> `signal(signum, handler)`将信号的处置设置为`signum`、`handler`、`SIG_IGN`或`SIG_DFL`程序员定义的函数（“信号处理程序”）的地址。...如果处置设置为`SIG_DFL`，则发生与信号关联的默认操作。

您还可以使用该`man`命令找到此信息。如果您`man signal`在命令行上键入并通读，您应该会看到它。

这对于您已替换系统默认信号处理程序的情况非常具体。在某些情况下，您想要的只是简单地恢复最初存在的任何处理程序。如果你看一下它的定义，`signal`它看起来像这样：

```
sighandler_t signal(int signum, sighandler_t handler); 
```

所以，它返回一个`sighandler_t`. 它返回的`sighandler_t`代表信号的先前“处置”。因此，另一种处理方法是简单地保存它返回的值，然后在您想要删除自己的处理程序时恢复该值。

# c# - C#匿名类型foreach循环，更好的方法？

> ID：14528279
> 
> 赞同：2
> 
> 时间：2013-01-25T18:40:18.677
> 
> 标签：c#, performance, linq, foreach, anonymous-types

我有这个简单的`foreach`一个匿名类型的简单循环，我想知道是否有办法让它更有效。

如果它遍历 155 个项目，大约需要 20 秒才能完成。我省略了它在`boAsset`对象上设置的一些其他属性，但没什么特别的 - 只是`Strings`/ `Integers`。

有什么想法吗？

```
List<BoAsset> assetList = new List<BoAsset>();
foreach (var asset in result)
{
     BoAsset boAsset = new BoAsset();
     boAsset.Description = asset.Description;
     boAsset.DetailedDescription = asset.DetailedDescription;
     boAsset.AssetCustomerID = asset.AssetCustomerID;
     boAsset.AssetId = asset.AssetId;
     boAsset.Keywords = asset.Keywords;
     boAsset.Notes = asset.Notes;
     boAsset.Photographer = asset.Photographer;
     boAsset.PhotographerEmail = asset.PhotographerEmail;
     boAsset.Notes = asset.Notes;
     boAsset.Author = asset.Author;
     boAsset.FileName = asset.FileName;
     boAsset.FileExtension = asset.FileExtension;
     boAsset.AssetCreateDate = asset.AssetCreateDate;
     boAsset.AssetExpireDate = asset.AssetExpireDate;

     assetList.Add(boAsset);
}

var query =   (from a in context.Assets
              join subAf1 in context.AssetFiles on new { aid = a.AssetID, ftid = 1 } equals new { aid = subAf1.AssetID, ftid = subAf1.AssetTypeID } into theAf1
              from Af1 in theAf1.DefaultIfEmpty()
              join subAf2 in context.AssetFiles on new { aid = a.AssetID, ftid = 2 } equals new { aid = subAf2.AssetID, ftid = subAf2.AssetTypeID } into theAf2
              from Af2 in theAf2.DefaultIfEmpty()
              join subAf3 in context.AssetFiles on new { aid = a.AssetID, ftid = 3 } equals new { aid = subAf3.AssetID, ftid = subAf3.AssetTypeID } into theAf3
              from Af3 in theAf3.DefaultIfEmpty()
              join subAf4 in context.AssetFiles on new { aid = a.AssetID, ftid = 4 } equals new { aid = subAf4.AssetID, ftid = subAf4.AssetTypeID } into theAf4
              from Af4 in theAf4.DefaultIfEmpty()
              join subAf5 in context.AssetFiles on new { aid = a.AssetID, ftid = 5 } equals new { aid = subAf5.AssetID, ftid = subAf5.AssetTypeID } into theAf5
              from Af5 in theAf5.DefaultIfEmpty()
              join subFp in context.FilePaths on new { fpid = Af1.FilePathID } equals new { fpid = subFp.FilePathID } into theFp1
              from fp1 in theFp1.DefaultIfEmpty()
              //join fp in context.FilePaths on Af1.FilePathID equals fp.FilePathID

              where a.AssetCustomerID == custId && a.AssetID == assetId
              select new { a, Af1, Af2, Af3, Af4, Af5, fp1 }).Distinct();

var result =   from q in query
               select new
               {
                   AssetId = q.a.AssetID,
                   AssetCustomerId = q.a.AssetCustomerID,
                   StockImage = q.a.StockImage,
                   Description = q.a.Description,
                   DetailedDescription = q.a.DetailedDescription,
                   Author = q.a.Author,
                   FileName = q.Af1.FileName, //was 1
                   FileExtension = q.Af1.FileExtension, //was 1
                   AssetCreateDate = q.a.AssetCreateDate,
                   AssetExpireDate = q.a.AssetExpireDate,
                   AssetActivateDate = q.a.AssetActivateDate,

                   Notes = q.a.Notes,
                   Keywords = q.a.Keywords,
                       Photographer = q.a.Photographer,
                       PhotographerEmail = q.a.PhotographerEmail
               } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T20:45:58.520

我认为您的查询过于复杂（连接太多），特别是考虑到有一些甚至没有使用。

请注意，如果查询很复杂，某些 LINQ 提供程序（例如 LINQ to Entities）可能需要相当长的时间来简单地处理查询树以将其转换为 SQL。（我已经有一些查询需要 10 或 15 秒才能让 EF 分析它。）

如果我怀疑您使用的 LINQ 实现正在访问数据库，那么请使用 SQL 分析工具来检查正在传递给服务器的实际 SQL 以及该 SQL 的性能如何。

另外，请注意，给定您正在使用的字段，您实际上可以`foreach`通过将结果直接实体化到`BoAsset`对象中来消除循环。

那是：

```
var result = from q in query
             select new BoAsset
             {
                 AssetId = q.a.AssetID,
                 AssetCustomerId = q.a.AssetCustomerID,
                 StockImage = q.a.StockImage,
                 Description = q.a.Description,
                 DetailedDescription = q.a.DetailedDescription,
                 Author = q.a.Author,
                 FileName = q.Af1.FileName, //was 1
                 FileExtension = q.Af1.FileExtension, //was 1
                 AssetCreateDate = q.a.AssetCreateDate,
                 AssetExpireDate = q.a.AssetExpireDate,
                 AssetActivateDate = q.a.AssetActivateDate,
                 Notes = q.a.Notes,
                 Keywords = q.a.Keywords,
                 Photographer = q.a.Photographer,
                 PhotographerEmail = q.a.PhotographerEmail
             };

List<BoAsset> assetList = result.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:44:54.017

创建 155 个对象并将数据复制到其中的时间大约是一毫秒。您无法对该代码进行任何重大（甚至显着）改进。

如果您想节省任何时间，您应该查看创建结果的查询。这就是需要时间的事情。

# file-io - Windows 中的 Dart 文件复制

> ID：14528280
> 
> 赞同：3
> 
> 时间：2013-01-25T18:40:22.587
> 
> 标签：file-io, dart

库中的`File`类`dart:io`还不包括`copy()`和`move()`方法。

为了让我在他们到达之前渡过难关，我正在尝试推出自己的复制功能。我在 Windows 上使用下面的代码，但它只是创建了一个 0kb 文件。

```
void copyFile(String input, String output) {
  var inFile = new File(input), outFile = new File(output);
  if (outFile.existsSync()) outFile.deleteSync(); // I realize this isn't required
  var inStream = null, outStream = null;
  try {
    inStream = inFile.openInputStream();
    outStream = outFile.openOutputStream(FileMode.WRITE);
    inStream.pipe(outStream);
  } finally {
    if (outStream != null && !outStream.closed) outStream.close();
    if (inStream != null && !inStream.closed) inStream.close();
  }
} 
```

我也试过`pipe`用`print(inStream.read(100).toString());`我得到了`null`. 输入文件确实存在（否则我会得到 FileIOException）。我做错了什么，还是在 Windows 下输入流被破坏了？

我在用着：

*   Dart 编辑器版本 0.3.1_r17463
*   Dart SDK 版本 0.3.1.2_r17463

**编辑：**以下作品（虽然它不“块”）。我是否错误地使用了上面的流？

```
void copyFile(String input, String output) {
  var inFile = new File(input), outFile = new File(output);
  if (outFile.existsSync()) outFile.deleteSync(); // I realize this isn't required
  outFile.writeAsBytesSync(inFile.readAsBytesSync(), FileMode.WRITE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:03:59.887

使用您的第一个代码片段，您会得到一个空文件，因为`pipe`它不是同步方法。因此，在执行 finally 块时，尚未开始将 inputStream 复制到 outputStream。通过关闭这个 finally 块中的流，你`pipe`甚至在它开始之前就停止了它。没有这个 finally 块，复制就会正确完成。

```
void copyFile(String input, String output) {
  final inStream = new File(input).openInputStream();
  final outStream = new File(output).openOutputStream(FileMode.WRITE);
  inStream.pipe(outStream);
} 
```

最后，您不必担心关闭流，因为`pipe`一旦实现，默认情况下关闭流。请参阅[InputStream.pipe](http://api.dartlang.org/docs/bleeding_edge/dart_io/InputStream.html#pipe)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-15T16:05:30.573

对于同步复制，使用：

```
File(sourceFile).copySync(destinationFile); 
```

对于异步复制，请使用：

```
File(sourceFile).copy(destinationFile); 
```

# python - 如何在 Python 中基于随机字符串执行 if 语句？

> ID：14528285
> 
> 赞同：0
> 
> 时间：2013-01-25T18:40:35.093
> 
> 标签：python, variables, if-statement, random, statements

```
codes = ["A", "B", "C", "D", "E"]
random.shuffle(codes)

    def print_message(message):
        print "\n"
        print "-"*10
        print message
        print "-"*10
        print "\n"

    print_message('This is a test of the %s system' % codes[0]) 
```

然后，我如何根据出现的随机字母为 print_message('This...') 的结果执行 if 语句。

例子。如果代码 [0] 的结果最终是 print_message() 的“A”，那么您会在屏幕上看到以下内容：

```
----------
This is a test of the A system. 
The A system is really great. 
--------- 
```

**再运行几次命令，你会看到：**

```
----------
This is a test of the C system.
The C system sucks. 
----------

----------
This is a test of the B system. 
The B system has improved greatly over the years. 
---------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:47:29.063

我会使用字典，并使用代码（“A”、“B”、“C”）作为字典键，并将“消息”放入 dict 值中。

```
codes = {
    'A': 'The A system is really great.',
    'B': 'The B system has improved greatly over the years.',
    'C': 'The C system sucks.'
}

random_key = random.choice(codes.keys())
print("This is a test of the %s system" % random_key)
print(codes[random_key]) 
```

注意：正如@mgilson 指出的，对于 python 3.x，`random.choice`需要一个列表，所以你可以这样做：

```
random_key = random.choice(list(codes.keys())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:01:40.970

这将为您提供问题中示例的结果：

```
#! /usr/bin/env python
import random
codes = ["A", "B", "C", "D", "E"]
random.shuffle(codes)

def print_sys_result(sys_code):
    results = {
        "A": "is really great",
        "B": "has improved greatly over the years",
        "C": "sucks",
        "D": "screwed us up really badly",
        "E": "stinks like monkey balls"
    }
    print "\n"
    print "-"*10
    print 'This is a test of the {0} system'.format(sys_code)
    if sys_code in results:
        print "The {0} system {1}.".format(sys_code, results[sys_code])
    else:
        print "No results available for system " + sys_code
    print "-"*10
    print "\n"

print_sys_result(codes[0]) 
```

# html - HTML5 - 部分元素没有样式挂钩？

> ID：14528286
> 
> 赞同：1
> 
> 时间：2013-01-25T18:40:44.543
> 
> 标签：html, semantic-markup

我听说 HTML5`section`元素不应作为语义元素用于样式设置。因此`<section class='wrapper'>`，作为 div 的替代品是错误的，使用`<div class='wrapper'>`会更好。
但是，当使用 section 元素有意义**并且**需要包装器时怎么办？`<section class='wrapper'>`在那种情况下可以这样做吗？还是我必须

```
<section>
  <div class='wrapper'>
    ..
  </div>
</section> 
```

这对我来说似乎有点臃肿？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:42:27.563

> 我听说 HTML5`section`元素不应该用于样式目的

不知道你的来源是什么，但他们错了。风格消失！

话虽如此，根据[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-section-element)`<section>`，应在语义*适当*时使用元素：

> section 元素表示文档或应用程序的通用部分。在这种情况下，部分是内容的主题分组，通常带有标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T18:42:05.213

没有什么问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T18:48:30.237

见[http://www.w3.org/wiki/HTML/Elements/section](http://www.w3.org/wiki/HTML/Elements/section)

> 该元素表示文档或应用程序的通用部分。
> 
> *   在这种情况下，一个部分是内容的主题分组：
>     
>     
>     *   章节
>     *   选项卡式对话框中的各种选项卡式页面
>     *   论文的编号部分
> *   Web 站点的主页可以分为介绍、新闻项目和联系信息的部分。
>     
>     
> *   section 元素不是通用容器元素。仅当内容将在文档的大纲中明确列出时，section 元素才合适。[示例 A]
>     
>     
> *   通常带有标题的部分。

您可以使用`<section class='wrapper'>`，因为添加类是语义，而不是样式目的。但是，当然，您可以为课程设置样式。

然后，`<section class='wrapper'>`如果包装器很大且很重要（如果它包含一个部分），则应该使用它。如果没有，最好使用`<div class='wrapper'>`.

但

```
<section>
  <div class='wrapper'>
    ..
  </div>
</section> 
```

这非常糟糕，因为您添加了不必要的代码，这不是语义的。

# java - Hibernate 集合性能问题

> ID：14528289
> 
> 赞同：0
> 
> 时间：2013-01-25T18:40:51.860
> 
> 标签：java, hibernate

在**Burt Beckwith制作的视频中**

[http://www.infoq.com/presentations/GORM-Performance](http://www.infoq.com/presentations/GORM-Performance)

Burt 指出了一些在休眠时使用 Collection 的有趣行为

首先用 Set

> " 添加到集合需要从数据库中加载所有实例
> 
> 保证唯一性，即使您知道新项目是唯一的“

并列出

> " 同样对于映射列表 = Hibernate 拉取整个集合
> 
> 保持正确的顺序，即使您要添加到列表的末尾“

他展示了如何解决它

> " 在传统的 Hibernate 中，您可以将集合映射为 Bag，witch 只是
> 
> 没有顺序或唯一性保证的常规集合“

当我在我的项目中使用注释时，我在这里询问了如何创建一个没有

排序或唯一性：

[带注释的收藏袋](https://stackoverflow.com/questions/14527450/collection-bag-wtih-annotation)

这是注释映射：

```
@ManyToOne
private List<OtherEntity> otherEntities; 
```

此映射将防止休眠时从数据库中加载所有实例

向列表中添加元素？谢谢。

# git - 检查中间的多个分支后如何挤压？

> ID：14528291
> 
> 赞同：2
> 
> 时间：2013-01-25T18:41:16.010
> 
> 标签：git

我了解如何使用`git rebase -i HEAD~X`where X 是您想要引用的先前提交的数量来重新设置基准。

但是假设你在一个分支上工作并且你做了一个提交。然后你切换到另一个分支并在那里做一些工作。你继续这样做，几天，比方说。

最终，如果你想压缩你的一个分支，你将无法做到这一点，因为这样做`HEAD~3`会引用来自不同分支的提交。

我想我的问题是真的：我如何压缩分支上的所有提交而不压缩不相关的提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:09:28.843

我觉得你相信 HEAD~3 意味着三个提交以你所做的相同顺序（挂钟时间顺序）返回。不是那个意思，是指当前HEAD的第3代祖先，只跟在始祖之后。

你如何在分支之间切换并不重要。

# c - 在ANSI c80中将while循环更改为for循环

> ID：14528292
> 
> 赞同：0
> 
> 时间：2013-01-25T18:41:17.597
> 
> 标签：c, for-loop, while-loop

我正在尝试将其更改为 for 循环，但我不确定如何。

```
while((c = getchar()) != EOF){
    tweet[cnt] = c;
    ++cnt;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:49:29.327

```
for(cnt = 0; (c = getchar()) != EOF; cnt++)
{
    tweet[cnt] = c;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:02:45.730

While 循环和 for 循环并没有太大的不同。while 循环只包含一个比较，如果它是真的，它会再次执行一次，直到进行比较并且它不再是真的。

for 语句同样只包含 3 个部分，由 ';' 分隔。第一个是在进入永无止境的循环之前你想做一次的部分。第二部分与while循环相同。第三部分是您在完成一个循环之后要进行下一次比较以再次进入之前要做什么。

许多编译器在第一部分和最后一部分接受多个语句。在这种情况下，您可以得到：

```
for(cnt=0; , x=0 ; (c=getchar()) != EOF; CNT++, x++){
    tweet[cnt] = c;
}
int TheNumberOfCyclesMade = x; 
```

# javascript - onload 不工作，但 onmouseover 工作

> ID：14528295
> 
> 赞同：1
> 
> 时间：2013-01-25T18:41:37.510
> 
> 标签：javascript, jquery, jquery-events

> **可能重复：**
> [哪些 html 标签支持 onload javascript 事件？](https://stackoverflow.com/questions/4272002/what-html-tags-support-the-onload-javascript-event)

我有一个页面，我试图在 facebox 样式上加载相同的页面，如果我在该页面上放置`onmouseover`链接并悬停它就可以正常工作，但是当我尝试使用`onload`它时不会触发事件。

这是我的`onmouseover`活动：

```
<a id="curpo" onmouseover="$.image({ ajax: \'http://way2enjoy.com/jquery/threadpreview/'.$thread['id'].'\' });return false;" 
    class="uiMediaThumb uiMediaThumbLarge uiMediaThumbAlb uiMediaThumbAlbLarge">
    <span id="thumbback" class="uiMediaThumbWrap">
        <img src="http://way2enjoy.com/files/icons/priview.png"></span></a> 
```

这工作得很好，但下面的代码不起作用：

```
<a id="curpo" onload="$.image({ ajax: \'http://way2enjoy.com/jquery/threadpreview/'.$thread['id'].'\' });return false;" 
    class="uiMediaThumb uiMediaThumbLarge uiMediaThumbAlb uiMediaThumbAlbLarge">
    <span id="thumbback" class="uiMediaThumbWrap">
        <img src="http://way2enjoy.com/files/icons/priview.png"></span></a> 
```

这是现场示例： [http ://way2enjoy.com/forums/viewthread/406828](http://way2enjoy.com/forums/viewthread/406828)

就在红色字母下方聆听音乐视频在线用户
如果我们将光标保持在它显示但它不显示页面的上方，则存在照片放大镜或缩放图标`onload`.. 与您进行测试需要在 Firebug`mouseover`中更改为`onload`。`onmouseover`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:43:13.470

该`onload`事件不会在`a`元素上触发，这就是它不起作用的原因。onload 主要用于`body`元素。如果您想在显示 a 元素后立即运行一些代码，请尝试在其后放置一个脚本标记，如下所示：

```
<a id="curpo" class="uiMediaThumb uiMediaThumbLarge uiMediaThumbAlb uiMediaThumbAlbLarge"><span id="thumbback" class="uiMediaThumbWrap"><img src="http://something.com/files/icons/priview.png"></span></a>   
<script type="text/javascript">
    $("#curpo").image({ ajax: 'http://something.com/jquery/threadpreview/<?php echo $thread['id']?>' });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:44:34.357

Onload 事件不适用于锚元素。以下标签支持它

```
<body>, <frame>, <frameset>, <iframe>, <img>, <input type="image">, 
<link>, <script>, <style> 
```

# jquery - 如何从手动填充数组切换到 Miso 数据集 (JSON)

> ID：14528298
> 
> 赞同：0
> 
> 时间：2013-01-25T18:41:43.620
> 
> 标签：jquery, json, miso.dataset

这是我试图用 MiSO 数据集替换的当前手动填充的数组：

```
var stream = new Array();

stream [0] = "life";
stream [0] = "time"; 
```

我想用一个会自动填充它的数据集替换它。这是成功获取在数组中手动​​输入的值的示例代码。示例中只有两个值，但可能是数百个，我想为其他人重用它。这就是为什么我要消除手动输入的原因。

```
var ds = new Miso.Dataset({
        importer: Miso.Dataset.Importers.GoogleSpreadsheet,
        parser: Miso.Dataset.Parsers.GoogleSpreadsheet,
        key : "0AkNLBJFrSMj2dDdKZ1FkaGIxYnF3U0pjeThIY2pjN3c",
        worksheet: "1"
    });
ds.fetch({
  success : function() {
       var magazine = ds.toJSON();

var title1 = magazine[0].name;
var title2 = magazine[1].name;
    alert(title1 + " " + title2);

    },
  error : function() {

  }
}); 
```

所以，我需要创建`stream`从 MISO 数据集创建数组，以便格式匹配：

这不起作用，但这是我可以解释值如何`stream`在 MISO 数据集中找到的每个值的“新”数组中匹配的唯一方法：

```
var stream = new Array();

stream [0] = magazine[0].name;
stream [1] = magazine[1].name; 
```

我需要保留 MISO 的东西，我不能重命名`stream`数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:39:55.580

如前所述，请查看[访问/处理（嵌套）对象、数组或 JSON](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)，以正确解释如何访问对象和数组。一些[味噌教程](http://misoproject.com/dataset/tutorials/)也应该有所帮助。

你可以这样做：

```
ds.fetch({
    success : function() {
       var magazine = ds.toJSON();

       var stream = []; // if not already defined
       for(var i = 0, l = magazine.length; i < l; i++) { 
           stream.push(magazine[i].name);
       }

       processData(stream);
    }
});

function processData(stream) {
   // all the code that needs to access stream goes here
} 
```

# java - Swing：绘制所有其他组件并保留事件

> ID：14528303
> 
> 赞同：0
> 
> 时间：2013-01-25T18:42:10.633
> 
> 标签：java, swing, paint, glasspane, contentpane

我正在尝试做的事情：绘制一条垂直线和一条水平线，它们相互垂直并在鼠标指向的位置相交。一种光标跟踪器。

我的结构：JFrame -> CustomPanel -> 其他面板/组件等。

CustomPanel 继承自 JPanel，它被设置为我的 JFrame 的 ContentPane。

我尝试使用 GlassPane，一切正常，但我想保留我的事件，而不是禁用它们。我仍然希望能够单击按钮等。

一个相关的问题是这[幅画在 Swing 中的组件顶部？](https://stackoverflow.com/questions/8776540/painting-over-the-top-of-components-in-swing). 当我将鼠标移动到我的 CustomPanel 中的空白位置时，一切都按预期运行，但它仍然没有绘制在其他组件上。

在图像中，它应该继续在按钮上绘画，但是当我进入它时它停止了，然后在我退出时又恢复了。

![在此处输入图像描述](../Images/75c8cff2d308f93635a95220c899cf23.png)

代码如下。

```
public class Painter {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        JFrame frame = new JFrame();

        frame.setSize(600, 600);
        frame.setPreferredSize(new Dimension(600, 600));
        frame.setContentPane(new CustomPanel());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}

class CustomPanel extends JPanel {
    int x = 0;
    int y = 0;

    public CustomPanel() {

        addMouseListener(new AdapterImplementation(this));
        addMouseMotionListener(new AdapterImplementation(this));
        add(new JButton("TESTBTN"));
        setSize(new Dimension(600, 600));
        setPreferredSize(new Dimension(600, 600));
        setVisible(true);
    }

    @Override
    public void paint(Graphics g) {
        super.paint(g);
        g.drawLine(0, y, getWidth(), y);
        g.drawLine(x, 0, x, getHeight());
    }

    public void setX(int x) {
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }
} 
```

和我的适配器：

```
public class AdapterImplementation extends MouseAdapter {
    CustomPanel pane;

    public AdapterImplementation(CustomPanel pane) {
        this.pane = pane;
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        int x = e.getX();
        int y = e.getY();
        pane.setX(x);
        pane.setY(y);
        pane.repaint();
    }

    @Override
    public void mouseMoved(MouseEvent e) {
        System.out.println("MOUSE MOVED");
        int x = e.getX();
        int y = e.getY();
        pane.setX(x);
        pane.setY(y);
        pane.repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:13:13.960

这里的问题是，它们`MouseListeners`是向你注册的，`CustomPanel`但不是向你注册的，`JButton`所以后者不处理来自侦听器的事件。

此外，正如您所见，使用 GlassPane 时，底层组件的事件将被阻止。

A`JLayeredPane`可以用作最顶层的容器来`MouseEvents`使用您当前的侦听器来捕获。

注意：在 Swing 中覆盖`paintComponent`而不是`paint`自定义绘画，并记住调用`super.paintComponent(g)`.

*   [JLayeredPane 示例](https://stackoverflow.com/questions/6811247/drawing-in-jlayeredpane-over-exising-jpanels)
*   [如何使用分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

# c# - 访问被拒绝覆盖winrt c#中的文件

> ID：14528312
> 
> 赞同：1
> 
> 时间：2013-01-25T18:42:51.170
> 
> 标签：c#, windows-runtime

我正在尝试覆盖文件的内容，但它不断抛出拒绝访问

```
System.IO.Stream s2 = await Windows.ApplicationModel.Package.Current.InstalledLocation.OpenStreamForWriteAsync("Assets\\xyz.txt", Windows.Storage.CreationCollisionOption.ReplaceExisting);
System.IO.StreamWriter sw = new StreamWriter(s2); 
```

我怎样才能让它工作？例外是

```
System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
  at System.IO.WindowsRuntimeStorageExtensions.<OpenStreamForWriteAsyncCore>d__10.MoveNext()
  --- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
  at System.IO.WindowsRuntimeStorageExtensions.<OpenStreamForWriteAsyncCore>d__10.MoveNext()
  --- End of stack trace from previous location where exception was thrown ---
  at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
  at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
  at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
  at 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:51:54.617

从外观上看，您无法写入安装软件包的区域。从[“应用程序包和部署”](http://msdn.microsoft.com/library/windows/apps/Hh464929)：

> **Windows 应用商店应用部署**
> 
> Windows 应用商店应用模型是一个声明性状态驱动的过程，它在单个包中提供应用的所有安装和更新数据和说明。在这种声明性模型中，部署操作是可靠的。包中的文件是不可变的，这意味着它们在交付到计算机后没有被修改过。因为包所有者不需要编写自定义操作和代码，所以减少了故障点的数量。

如果您需要为所有用户更新资产，听起来您应该只发布一个新版本，例如通过隔离存储 API。

如果您需要编写特定于用户的数据，则需要选择不同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T21:33:46.453

您需要写入如下位置：ApplicationData.Current.TemporaryFolder

# jquery - 使用 jquery vs setInterval(function(){} 的简单画布动画圆

> ID：14528320
> 
> 赞同：0
> 
> 时间：2013-01-25T18:43:18.927
> 
> 标签：jquery, canvas, jquery-animate, geometry

我习惯使用 Jquery 动画，但我需要它来绘制画布圆圈吗？我注意到很多 setInterval(function(){} 来触发绘图功能，但这是唯一/最好的存档方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:45:36.440

查看[jCanvas](http://calebevans.me/projects/jcanvas/index.php)：

```
// Draw a circle on the canvas
$("canvas").drawArc({
  fillStyle: "black",
  x: 100, y: 100,
  radius: 50
}); 
```

# jquery - onclick 的悬停意图

> ID：14528325
> 
> 赞同：0
> 
> 时间：2013-01-25T18:43:31.393
> 
> 标签：jquery, jquery-ui, onclick, toggle, hoverintent

我正在使用 jqueryUI 来做一个 div 框的切换效果

示例：http: [//jqueryui.com/toggle/](http://jqueryui.com/toggle/)

唯一的问题是当我快速单击按钮多次并停止单击时，div 框不会立即停止切换效果，而是继续执行与我之前单击相同的操作。

该问题类似于悬停切换/动画效果案例，hoverintent 将成为悬停错误的解决方案。

我无法为 onclick 切换效果找到任何悬停意图。有什么建议吗？

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:10:35.727

使用下面的代码，你可以点击所有你想要的......（我没有为此使用 Jquery UI，但是很好的 ol Jquery 库，但它应该与 UI 一起使用......）
试试这个：
**[Fiddle here](http://jsfiddle.net/BZdVW/)**

```
$(document).ready(function(){
$('.button').click(function(){
if($('.toggle').is(':visible')){
$('.toggle').slideUp(500);
}
else{
$('.toggle').slideDown(500);
}
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:32:16.517

这是因为效果是排队的。要关闭它，只需使用选项：

```
{queue: false} 
```

# java - Java StAX 解析器无法解析有效的 xml

> ID：14528326
> 
> 赞同：3
> 
> 时间：2013-01-25T18:43:32.440
> 
> 标签：java, xml-parsing, stax

伙计们。

我花了很长时间试图了解这是一个错误还是我自己缺乏教育。基本上，我试图对特定元素做出反应，并使用 Java StAX API 使用 Transformer 读取其内容。

当 XML 格式正确或元素之间有空格时，一切正常。但是，一旦它看到元素之间没有空白字符的 XML，它就会严重中断。

有代码及其输出来说明问题。

有 3 个示例 XML，前 2 个显示 2 个不同的中断场景，最后一个显示正确处理：

*   在第一个没有空格的场景中，它会跳过一些元素。在下面的示例中，它跳过了除一个“节点”元素之外的所有元素。在现实世界的场景中，虽然它会跳过所有其他节点。可能是因为节点内容更丰富。

*   在第二种情况下，我只在节点元素之间添加了空间。如您所见，它无法正确处理文档的结尾。

*   在最后一个场景中，我在最后一个节点和关闭根元素之间添加了空间。处理如期进行。

在我的现实世界场景中，我希望使用单行无分隔符 XML，因此我需要场景 1 正常工作，并且很高兴知道对 XML 的有效更改（例如在元素之间添加空格）不会中断处理就像在场景 2 中一样。

请帮忙！！！

单类应用程序 test.StAXTest 的完整代码：

```
package test;

import java.io.StringReader;
import java.io.StringWriter;

import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamConstants;
import javax.xml.stream.XMLStreamReader;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stax.StAXSource;
import javax.xml.transform.stream.StreamResult;

public class StAXTest {
    private final static String XML1 = "<root><node></node><node></node></root>";
    private final static String XML2 = "<root><node></node> <node></node></root>";
    private final static String XML3 = "<root><node></node> <node></node> </root>";

    public static void main(String[] args) throws Exception {
        processXML(XML1);
        processXML(XML2);
        processXML(XML3);
    }

    private static void processXML(String xml) {
        try {
            System.out.println("XML Input:\n" + xml + "\nProcessing:");

            XMLInputFactory xif = XMLInputFactory.newInstance();
            XMLStreamReader reader = xif.createXMLStreamReader(new StringReader(xml));
            TransformerFactory tf = TransformerFactory.newInstance();

            int nodeCount = 0;

            while (reader.nextTag() == XMLStreamConstants.START_ELEMENT) {
                String localName = reader.getLocalName();
                if (localName.equals("node")) {
                    Transformer t = tf.newTransformer();
                    StringWriter st = new StringWriter();
                    t.transform(new StAXSource(reader), new StreamResult(st));
                    String xmlNode = st.toString();
                    System.out.println(nodeCount + ": " + xmlNode);
                    nodeCount++;
                }
            }
        } catch (Throwable t) {
            t.printStackTrace(System.out);
        }
        System.out.println("------------------------------------------------");
    }
} 
```

应用程序输出，其中包含所有 3 个场景。请注意，在第一个场景中，转换后的 XML 部分包含 1 个节点，而不是 2 个。所以第二个节点完全“在翻译中丢失”。

```
XML Input:
<root><node></node><node></node></root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
------------------------------------------------
XML Input:
<root><node></node> <node></node></root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
1: <?xml version="1.0" encoding="UTF-8"?><node/>
javax.xml.stream.XMLStreamException: ParseError at [row,col]:[-1,-1]
Message: found: END_DOCUMENT, expected START_ELEMENT or END_ELEMENT
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.nextTag(XMLStreamReaderImpl.java:1247)
    at com.newedge.test.StAXTest.processXML(StAXTest.java:35)
    at com.newedge.test.StAXTest.main(StAXTest.java:21)
------------------------------------------------
XML Input:
<root><node></node> <node></node> </root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
1: <?xml version="1.0" encoding="UTF-8"?><node/>
------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T20:37:08.940

问题是使用该`transform`方法后，`XMLStreamReader`左指向下一个要处理的 XML 事件（即第二个`<node>`开始标记或`</root>`结束标记）。但是，当您在循环`nextTag()`顶部调用时`while`，您正在将阅读器推进一个进一步的事件。这会导致它跳过此事件。

在`</node>`结束标记后有空格的示例中，跳过的是空格字符数据事件。在其他情况下，XML 开始元素或结束元素事件被跳过，这就是您得到意外结果的原因。

调用转换器后，您应该检查阅读器当前的 eventType 是否为`START_ELEMENT`或`END_ELEMENT`。如果是这样，transformer 已经推进了阅读器，你不应该再推进它。如果 eventType 是其他东西，或者您没有调用转换器，那么您确实调用`nextTag()`以将阅读器推进到下一个标签。

我用`while`以下内容替换了您的循环：

```
 int eventType = reader.nextTag();
        while (eventType == XMLStreamConstants.START_ELEMENT) {
            String localName = reader.getLocalName();
            if (localName.equals("node")) {
                Transformer t = tf.newTransformer();
                StringWriter st = new StringWriter();
                t.transform(new StAXSource(reader), new StreamResult(st));
                String xmlNode = st.toString();
                System.out.println(nodeCount + ": " + xmlNode);
                nodeCount++;
                eventType = reader.getEventType();
                if (eventType != XMLStreamConstants.START_ELEMENT && eventType != XMLStreamConstants.END_ELEMENT) {
                    eventType = reader.nextTag();
                }
            } else {
                eventType = reader.nextTag();
            } 
```

然后，当我运行您的代码时，它给了我以下输出：

```
XML Input:
<root><node></node><node></node></root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
1: <?xml version="1.0" encoding="UTF-8"?><node/>
------------------------------------------------
XML Input:
<root><node></node> <node></node></root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
1: <?xml version="1.0" encoding="UTF-8"?><node/>
------------------------------------------------
XML Input:
<root><node></node> <node></node> </root>
Processing:
0: <?xml version="1.0" encoding="UTF-8"?><node/>
1: <?xml version="1.0" encoding="UTF-8"?><node/>
------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T10:20:54.233

感谢您的代码，但即使这也给了我错误 - 所以我修改了一个小内容，它现在正在工作

```
while(eventType == XMLStreamConstants.START_ELEMENT)
{
     String localName = reader.getLocalName();
     System.out.println(localName);

     if(localName == null)
     {
         eventType = reader.nextTag();
     }

    // Rest Program is same

} 
```

# excel-2010 - Excel 2010 BuildFreeForm 没有连接点

> ID：14528329
> 
> 赞同：0
> 
> 时间：2013-01-25T18:43:54.217
> 
> 标签：excel-2010

当我使用 VBA 创建一个类似于我在工作表上绘制的矩形时，为什么没有连接点？添加最后一个节点后，我使用 ConvertToShape。我是否对所有点都使用 msoEditingAuto 或 msoEditingCorner 并不重要。只有在其中一个节点上使用 SetPosition 并使用现有位置时，我才能使连接点可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:33:43.333

以下来自 Microsoft[对象参考](http://msdn.microsoft.com/en-us/library/office/aa196410%28v=office.11%29.aspx)的代码给出了一个使用矩形连接点的示例：

```
Sub buildshape3()

   Dim myDocument As Worksheet
   Dim s As Object
   Dim firstRect As Shape
   Dim secondRect As Shape
   Dim c As Shape

   Set myDocument = Worksheets(1)
   Set s = ActiveSheet.Shapes
   Set firstRect = s.AddShape(msoShapeRectangle, 100, 150, 150, 150) '50, 200, 100)

   firstRect.Fill.Transparency = 1
   Set secondRect = s.AddShape(msoShapeRectangle, 300, 300, 200, 100)
   Set c = s.AddConnector(msoConnectorCurve, 0, 0, 100, 100)
   With c.ConnectorFormat
      .BeginConnect ConnectedShape:=firstRect, ConnectionSite:=1
      .EndConnect ConnectedShape:=secondRect, ConnectionSite:=1
      c.RerouteConnections
   End With

End Sub 
```

# css - 改变条纹的颜色

> ID：14528343
> 
> 赞同：0
> 
> 时间：2013-01-25T18:44:46.000
> 
> 标签：css, background-color

我有一个使用类的条纹黑色钻石`diamond`（见小提琴[here](http://jsfiddle.net/UQQMz/)）：

```
.diamond {
    border: 8px solid black;
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    padding: 12%;
    width: 0;
    -webkit-transform: scaleY(0.5) rotate(45deg);
}
.diamond:before {
    position: absolute;
    top: 0;
    right: -37.5%;
    bottom: 0;
    left: -37.5%;
    background: -webkit-linear-gradient(black 50%, transparent 50%);
    -webkit-transform: scaleY(1.155) skewX(-30deg) rotate(30deg);
    background-size: 10px;
    content: '';
} 
```

现在我想要一个`red`能让钻石变成红色的类，包括边框和条纹。我设法强加了红色边框，但没有强加红色条纹。如何修改 CSS 以`.red`使条纹变为红色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:51:33.607

```
.diamond {
    border: 8px solid black;
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    padding: 12%;
    width: 0;
    -webkit-transform: scaleY(0.5) rotate(45deg);
}
.diamond:before {
    position: absolute;
    top: 0;
    right: -37.5%;
    bottom: 0;
    left: -37.5%;
    background: -webkit-linear-gradient(black 50%, transparent 50%);
    -webkit-transform: scaleY(1.155) skewX(-30deg) rotate(30deg);
    background-size: 10px;
    content: '';
}
.red {
    border-color: crimson !important;
}
.red:before {
    background-image: -webkit-linear-gradient(red 50%, transparent 50%);
} 
```

小提琴[http://jsfiddle.net/UQQMz/1/](http://jsfiddle.net/UQQMz/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T18:55:17.403

你的问题是优先顺序。类在类`red`之前处理，`diamond`因为它首先出现在 CSS 中。移动`red`类下方的`diamond`类以解决您的问题。

# bitbucket - 如何访问 BitBucket 中旧提交的完整来源？

> ID：14528344
> 
> 赞同：244
> 
> 时间：2013-01-25T18:44:48.453
> 
> 标签：bitbucket

我无法弄清楚或找到有关如何以新的 Bit Bucket 格式访问旧提交源的文档。这甚至可能吗？

* * *

## 回答 #1

> 赞同：380
> 
> 时间：2013-06-05T03:19:06.140

我了解到您想通过 BitBucket Web 界面下载旧版本，而不使用 Mercurial/Git 客户端。

检查这个[相关的问题](https://stackoverflow.com/questions/13044749/bitbucket-download-source-as-zip)。在评论中，有人说没有办法做到这一点。幸运的是，这并不完全正确。

通过在 BitBucket 项目页面上导航，我没有找到下载任意版本的链接。有下载特定标签的链接，格式如下：

```
https://bitbucket.org/owner/repository/get/v0.1.2.tar.gz 
```

但是通过稍微调整上面的 url，通过提交哈希更改标签名称，例如：

```
https://bitbucket.org/owner/repository/get/A0B1C2D.tar.gz 
```

您实际上可以下载特定版本。

正如[Rakka Rage](https://stackoverflow.com/users/403681/rakka-rage)在评论中提到的那样，也替换`.tar.gz`为`.zip`作品。

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2013-08-13T11:51:39.550

我试图弄清楚是否可以像在 GitHub 上一样浏览早期提交的代码，它把我带到了这里。我使用了在这里找到的信息，在摆弄了 url 之后，我实际上也找到了一种浏览旧提交代码的方法。

当您浏览代码时，URL 类似于：

```
https://bitbucket.org/user/repo/src/ 
```

并在最后添加一个提交哈希，如下所示：

```
https://bitbucket.org/user/repo/src/a0328cb 
```

您可以在提交时浏览代码。我不明白为什么没有直接选择提交的下拉框，该功能已经存在。奇怪的。

* * *

## 回答 #3

> 赞同：197
> 
> 时间：2015-02-10T04:30:20.490

**步骤1**

[![步骤1](../Images/beb91877fd6e7e3d48b774bf7656c2eb.png)](https://i.stack.imgur.com/rYaWg.png)

* * *

**第2步**

[![第2步](../Images/d296531df9690f09ff6d4a342a32efcb.png)](https://i.stack.imgur.com/3OL20.png)

* * *

**第 3 步**

[![第 3 步](../Images/41635c85a15a293236c4f3c77205fdd0.png)](https://i.stack.imgur.com/2387k.png)

* * *

**第4步**

[![第4步](../Images/a8f36719e6504e430324e2ebb686028f.png)](https://i.stack.imgur.com/xmfuu.png)

* * *

**最后一步**

[![最后一步](../Images/1f1858a88f7ade004ba6a518c55646d2.png)](https://i.stack.imgur.com/bSboe.png)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2016-10-26T17:44:11.747

以防万一有人在我的船上，而这些答案都没有完全奏效，这就是我所做的。

也许我们内部的 Bitbucket 服务器的设置与大多数服务器略有不同，但这里是我通常会去查看 master 分支中的文件的 URL：

```
https://<BITBUCKET_URL>/projects/<PROJECT_GROUP>/repos/<REPO_NAME>/browse 
```

如果我从下拉菜单中选择与 master 不同的分支，我会得到：

```
https://<BITBUCKET_URL>/projects/<PROJECT_GROUP>/repos/<REPO_NAME>/browse?at=refs%2Fheads%2F<BRANCH_NAME> 
```

所以我尝试这样做并且它有效：

```
https://<BITBUCKET_URL>/projects/<PROJECT_GROUP>/repos/<REPO_NAME>/browse?at=<COMMIT_ID> 
```

现在我可以浏览整个仓库，就像提交时一样。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-03-06T17:09:59.137

几年前的好答案。现在 Bitbucket 让它变得更容易了。

标记您要下载的提交（如 Rudy Matela 的回答中所述）。

然后前往下载并单击“标签”选项卡，您将获得多个下载选项。

[![标签下载](../Images/78f57065503df0c616ac00c5526935e1.png)](https://i.stack.imgur.com/wh76p.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-01-28T14:28:47.860

作为记录，您还可以通过以下方式玩弄 URL：

浏览最新源时，您会看到类似： `https://bitbucket.org/my/repo/src/latestcommithash/my.file?at=master`

只需更改提交哈希并删除 GET 参数： `https://bitbucket.org/my/repo/src/wantedcommithash/my.file`

在上面 +1 @Hein A. Grønnestad ：一切正常，真的很想知道为什么 GUI 中没有任何东西可以使用它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-07T15:52:15.077

`?until=<sha-of-commit>`您可以通过附加URL（在文件名之后）来查看文件的源直到特定的提交 。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-06T12:35:03.810

1.  最简单的方法是单击该提交并向该提交添加标签。 [我在这个提交中包含了标签“last_commit”](https://i.stack.imgur.com/y8erw.png)

2.  比在位桶的侧面导航左角去下载。 [点击左侧下载](https://i.stack.imgur.com/98i4m.png)

3.  现在单击导航栏中的标签并从 UI 下载 zip。 [找到您的标签并下载 zip](https://i.stack.imgur.com/TnEII.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-18T19:42:25.000

**您可以在您的 BitBucket 网站上查看它**

正如[Atlassian 社区网站](https://community.atlassian.com/t5/Bitbucket-questions/Browse-source-code-for-specific-commit/qaq-p/1151804)上所解释的那样，转到`Source`页面（可从左侧菜单中获得）并将您的提交 ID 放在`at=`url 的查询参数中就足够了。因此，例如，url 将以`?at=bacf2ad3095`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-20T23:39:24.953

我知道为时已晚，但使用 API 2.0 你可以做到

从命令行：

```
curl https://api.bitbucket.org/2.0/repositories/<user>/<repo>/filehistory/<branch>/<path_file> 
```

或在 php 中：

```
$data = json_decode(file_get_contents("https://api.bitbucket.org/2.0/repositories/<user>/<repo>/filehistory/<branch>/<path_file>", true)); 
```

那么你有你的文件的历史（从最近的提交到最旧的提交）：

```
{
"pagelen": 50,
"values": [
    {
      "links": {
        "self": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/src/<hash>/<path_file>"
        },
        "meta": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/src/<HEAD>/<path_file>?format=meta"
        },
        "history": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/filehistory/<HEAD>/<path_file>"
        }
      },
      "commit": {
        "hash": "<HEAD>",
        "type": "commit",
        "links": {
          "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/commit/<HEAD>"
          },
          "html": {
            "href": "https://bitbucket.org/<user>/<repo>/commits/<HEAD>"
          }
        }
      },
      "attributes": [],
      "path": "<path_file>",
      "type": "commit_file",
      "size": 31
    },
    {
      "links": {
        "self": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/src/<HEAD~1>/<path_file>"
        },
        "meta": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/src/<HEAD~1>/<path_file>?format=meta"
        },
        "history": {
          "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/filehistory/<HEAD~1>/<path_file>"
        }
      },
      "commit": {
        "hash": "<HEAD~1>",
        "type": "commit",
        "links": {
          "self": {
            "href": "https://api.bitbucket.org/2.0/repositories/<user>/<repo>/commit/<HEAD~1>"
          },
          "html": {
            "href": "https://bitbucket.org/<user>/<repo>/commits/<HEAD~1>"
          }
        }
      },
      "attributes": [],
      "path": "<path_file>",
      "type": "commit_file",
      "size": 20
    }
  ],
  "page": 1
} 
```

`values`> `links`>在历史记录中`self`提供当前文件，您可以使用`curl <link>`或检索它`file_get_contents(<link>)`。

最终，您可以从命令行过滤：

```
 curl https://api.bitbucket.org/2.0/repositories/<user>/<repo>/filehistory/<branch>/<path_file>?fields=values.links.self 
```

在 php 中，只需`foreach`在数组上创建一个循环`$data`。

注意：如果`<path_file>`有，`/`您必须将其转换为`%2F`.

请参阅此处的文档：[https ://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Busername%7D/%7Brepo_slug%7D/filehistory/%7Bnode%7D/%7Bpath%7D](https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Busername%7D/%7Brepo_slug%7D/filehistory/%7Bnode%7D/%7Bpath%7D)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-21T21:01:25.453

找了半天，终于找到方法了：）

请检查此图片，其中说明了步骤。 ![在此处输入图像描述](../Images/bf61b1823c170938990b9da3a1ccfc0a.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-25T11:42:22.727

在我使用 Atlassian Bitbucket v6.10 的情况下

```
https://<bitbucket.myserver.it>/projects/<myproject>/repos/<myrepo>/browse?at=<full-commit-hash> 
```

# c# - 如何将双精度值转换为时间？C#/ASP.NET

> ID：14528345
> 
> 赞同：5
> 
> 时间：2013-01-25T18:44:51.290
> 
> 标签：c#

如何将`double`价值转换为时间？例如我有这个`double`值 `val = 0.00295692867015203`，我想返回`4:15`。

我做了很多研究，但没有找到有效的解决方案！这是我也尝试过的一个函数，但它返回`00:00:00`：

`ConvertFromDecimalToDDHHMM(Convert.ToDecimal(val));`

```
public string ConvertFromDecimalToDDHHMM(decimal dHours) {
    try {
        decimal hours = Math.Floor(dHours); //take integral part
        decimal minutes = (dHours - hours) * 60.0M; //multiply fractional part with 60
        int D = (int)Math.Floor(dHours / 24);
        int H = (int)Math.Floor(hours - (D * 24));
        int M = (int)Math.Floor(minutes);
        //int S = (int)Math.Floor(seconds);   //add if you want seconds
        string timeFormat = String.Format("{0:00}:{1:00}:{2:00}", D, H, M);

        return timeFormat;
    }
    catch (Exception) {
        throw;
    }
} 
```

我正在使用`C#`和`ASP.NET`。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T18:50:21.453

哇......我花了一段时间才意识到你的意思`"00:04:15.00"`......

`public static TimeSpan TimeSpan.FromDays(double value)`会给你一个`TimeSpan`

`DateTime.Today.AddDays(double value)`会给你一个约会时间

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T18:49:45.957

我想你想要类似的东西`TimeSpan.FromDays(0.00295692867015203)`。该`TimeSpan`函数接受一个`double`值并返回`TimeSpan`对象（自然）：http: [//msdn.microsoft.com/en-us/library/system.timespan.fromdays.aspx](http://msdn.microsoft.com/en-us/library/system.timespan.fromdays.aspx)。

`TimeSpan`然后可以在日期时间算术中使用此对象，如下所示：

```
var now = DateTime.Now; // say, 25/13/2013 12:23:34
var interval = TimeSpan.FromDays(0.00295692867015203); // 4:15
var futureTime = now + interval; // 25/13/2013 12:27:49 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T20:14:53.610

你应该试试

```
public static string ConvertFromDoubleToDDHHMM(double days) {
  return TimeSpan.FromDays(days).ToString(@"dd\:hh\:mm");
} 
```

它首先创建`TimeSpan`结构的值，然后将该值格式化为`string`. 有关详细信息，请参阅[MSDN 上的自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)。

适用于 .NET 4.0 及更高版本。

# javascript - 异步加载具有未知 MIME 类型（图像或文本）的内容

> ID：14528349
> 
> 赞同：0
> 
> 时间：2013-01-25T18:45:03.240
> 
> 标签：javascript, jquery, ajax

我正在寻找一种使用 javascript/jquery 异步加载图像的方法，同时能够处理返回的 xml 文档（以防出错）。

目前我像这样加载图像：

```
var img = $("<img id='ws-image'/>").attr('src', $("#dynImgUrl").val());

img.load(function() {
    if (!this.complete || typeof this.naturalWidth == "undefined"
                       || this.naturalWidth == 0) {
        alert('broken image!');
    } else {
        img.attr('width', 500);
        img.attr('height', 500);
        $("img-div").html(img);
    }
}).error(function() {
    alert("Could not load image");
}); 
```

只要服务器返回图像，这确实有效。如果发生错误，它返回一个 xml 文档，则调用错误回调。但我需要获取该 xml 文档的内容，但不知道如何获取。

有没有办法能够处理这两种可能的服务器响应？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:53:54.520

假设服务器启用了 CORS 以允许跨域 Ajax，我将尝试加载图像，然后在图像加载失败时对同一资源执行 Ajax 提取。

或者，如果第二次传递给服务器是不可接受的，您可以获取资源，将其编码为 base 64（使用[`btoa`](https://developer.mozilla.org/en-US/docs/DOM/window.btoa)）并显示来自[`data:`URI](https://en.wikipedia.org/wiki/Data_URI_scheme)的图像。然后，执行与此处相同的错误检查，并在图像失败的情况下返回原始 Ajax 结果。

# jquery - 淘汰赛验证 - 如何确保表列中的唯一值和无间隙递增 1

> ID：14528355
> 
> 赞同：0
> 
> 时间：2013-01-25T18:45:19.637
> 
> 标签：jquery, knockout-validation

我想对我的 html 列“Step No”进行剔除验证，以确保值应该是唯一的，并且从 1 到总步数之间没有间隙。

示例 html：

```
 <table>
      <tbody data-bind="foreach:dataValues">
        <tr>
          <td>
            <input type="text" data-bind="value: StepNo" />
          </td>
          <td>
            <input type="text" data-bind="value: Details" />    
          </td>
         <td>
            <input type="text" data-bind="value: Address" />    
          </td>
        </tr>
      </tbody>
    </table> 
```

JavaScript：

```
function UniqueViewModel(){
    var dataValues=ko.observableArray([{StepNo:1,Details:"test1",Address:"address1"},
                                       {StepNo:2,Details:"test2",Address:"address2"},
                                       {StepNo:3,Details:"test3",Address:"address3"},
                                       {StepNo:4,Details:"test4",Address:"address4"}])

    }
ko.applyBindings(new UniqueViewModel()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:10:31.813

使用淘汰赛验证，您可以为您的 observableArray 创建一个规则：

```
var data =  [
    { StepNo: 1, Details: "test1", Address: "address1" }, 
    { StepNo: 1, Details: "test2", Address: "address2" }, 
    { StepNo: 3, Details: "test3", Address: "address3" }, 
    { StepNo: 4, Details: "test4", Address: "address4" }, 
];

function UniqueViewModel(initialData) {
     var self = this;
     self.dataValues = ko.observableArray(initialData).extend({
         validation: {
             validator: function (val, someOtherVal) {
                 var sorted = val.sort(function (a, b) {
                       return a.StepNo - b.StepNo; 
                 }), max = val.length;

                 for(var i = 0; i < max; i++) {
                     if(sorted[i].StepNo !== i+1) {
                         return false;
                     }
                 }
                 return true;
             },
             message: 'Your error message.',
             params: true
         }
     });
 }

var viewModel = new UniqueViewModel(data);
// show error
viewModel.dataValues.isModified(true);

 ko.applyBindings(viewModel); 
```

然后你可以在某处显示消息：

```
<p data-bind="validationMessage: dataValues"></p> 
```

小提琴：http: [//jsfiddle.net/delixfe/AUYhy/](http://jsfiddle.net/delixfe/AUYhy/)

**问题是，只有当您再次手动运行验证时，它才能工作一次或更好。**有两个原因：

第一个是验证只会在可观察的变化时再次触发。在这种情况下，这就是 observableArray 'dataValues'。并且 observableArrays 仅在更改底层数组（即添加或删除元素）时才会更改。但它不会在元素更改时触发任何更改事件。

第二个问题是 dataValues 中的数据由纯 JavaScript 对象组成。它们不是 ko.observables。因此没有双向绑定（更新输入不会更新对象的值）。

您可以通过对数据使用 ko.observable 来解决第二个问题：

```
var data = [
    { StepNo: ko.observable(1), Details: "test1", Address: "address1" }, 
    { StepNo: ko.observable(1), Details: "test2", Address: "address2" }, 
    { StepNo: ko.observable(3), Details: "test3", Address: "address3" }, 
    { StepNo: ko.observable(4), Details: "test4", Address: "address4" }
]; 
```

要解决第一个问题，您必须确保对 observableArray 和 StepNo 的更改做出反应。因此，您可以使用 ko.computed。

```
function UniqueViewModel(initialData) {
    var self = this;

    self.dataValues = ko.observableArray(initialData);

    self.dataValuesStepsValid = ko.computed(function () {
        // the call to self.dataValues() subscribes to the observableArray
        // and the call to element.StepNo() inside the mapping to each element
        var numbers = ko.utils.arrayMap(self.dataValues(), function (element) {
            return element.StepNo();
        });
        var max = numbers.length;
        numbers.sort(function (a, b) {
            return a - b;
        });

        for (var i = 0; i < max; i++) {
            // when changing the data in the table we get strings
            if (numbers[i] != i + 1) {
                return false;
            }
        }
        return true;
    });
}

var viewModel = new UniqueViewModel(data);

ko.applyBindings(viewModel); 
```

您可以这样显示消息：

```
<p data-bind="ifnot: dataValuesStepsValid">Your error message</p> 
```

以下小提琴表明：http: [//jsfiddle.net/delixfe/UzDZd/](http://jsfiddle.net/delixfe/UzDZd/)

或者，您可以将验证规则附加到计算的。

# perl - 在 Perl 中，我如何编写正则表达式匹配的字符串

> ID：14528359
> 
> 赞同：0
> 
> 时间：2013-01-25T18:45:30.237
> 
> 标签：perl

我想在另一行写 $1 进行替换；

```
my $converting_rules = +{
    '(.+?)' => '$1',
};

my $pre     = $converting_rule_key;
my $post    = $converting_rules->{$converting_rule_key};
#$path_file =~ s/$pre/$post/; // Bad... 
$path_file =~ s/$pre/$1/; // Good! 
```

在 Bad 上，$1 被识别为字符串 '$1'。但我 wqnt 来对待它匹配的字符串。我不知道该怎么做...请帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:53:01.660

问题是`s/$pre/$post/`对变量`$pre`和进行插值`$post`，但不会递归地对其中看起来像变量的任何内容进行插值。所以你想`eval`在替换中添加一个额外的`/ee`标志：

```
$path_file =~ s/$pre/$post/ee; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:13:19.773

```
$x = '$1.00';
print qq/$x/; 
```

打印`$1.00`，所以毫不奇怪

```
$x = '$1.00';
s/(abc)/$x/; 
```

用 代替`$1.00`。

你所拥有的是一个模板，但你没有做任何事情来处理这个模板。[String::Interpolate](http://search.cpan.org/perldoc?String%3a%3aInterpolate)可以处理这样的模板。

```
use String::Interpolate qw( interpolate );
$rep = '$1';
s/$pat/ interpolate($rep) /e; 
```

# optimization - Hadoop 计数器 - 调整和优化

> ID：14528362
> 
> 赞同：0
> 
> 时间：2013-01-25T18:45:38.047
> 
> 标签：optimization, hadoop, cloudera, performance

我刚刚写了我的第一份 hadoop 工作。它处理许多文件并为每个输入文件生成多个输出文件。我在一个两节点集群上运行它，我最大的输入集大约需要 10 分钟。看看下面的计数器，我可以做哪些优化来让它运行得更快？在这些计数器中是否有任何具体的指标？

![在此处输入图像描述](../Images/1905ed0e29475a1a1e0f4c405158b30f.png)

版本：2.0.0-mr1-cdh4.1.2

地图任务容量：20

减少任务容量：20

每个节点的平均任务：20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:06:07.610

我们可以在这里看到，大部分数据减少发生在映射阶段（映射输出字节数比 HDFS 读取字节数少得多，映射输入记录也是如此 - 它比映射输入记录低得多）。我们还看到花费了大量的 CPU 时间。我们还看到混洗字节的数量很少
所以这项工作是：
a）在 Map 阶段完成了大量的数据缩减。
b) 作业受 CPU 限制。

所以我认为应该优化mapper和reducer的代码。I/O 对这项工作可能并不重要。

# java - 无法再添加 servlet Java EE Tomcat 7.0

> ID：14528363
> 
> 赞同：-1
> 
> 时间：2013-01-25T18:45:39.807
> 
> 标签：java, jsp, servlets, tomcat7

在我的项目上工作我试图向我的网站添加另一个 servlet，然后我抛出这个异常：

```
 SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MiniProjet]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MiniProjet]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: <url-pattern> de invalide dans l'association de servlet (servlet mapping)
    at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3217)
    at org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3192)
    at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1304)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1352)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

janv. 25, 2013 7:40:43 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

janv. 25, 2013 7:40:43 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

janv. 25, 2013 7:40:43 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1366 ms 
```

但我没有改变任何东西，我试图改变工作区/重新下载 Apache 并获取我的旧资源，但问题仍然存在。

这是我的 web.xml （我只是用它来实例化我网站的第一页）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
id="WebApp_ID" version="2.5" >
  <display-name>SUPLINK</display-name>
  <welcome-file-list>
    <welcome-file>login.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:56:21.283

您的 servlet 声明中有错误：

```
Caused by: java.lang.IllegalArgumentException: <url-pattern> de invalide dans l'association de servlet (servlet mapping) 
```

你是怎么申报的？我在您当前的 web.xml 中看不到任何内容

如果您使用注释，请确保 url 模式有效（请参阅[http://docs.oracle.com/javaee/6/tutorial/doc/bnafu.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnafu.html)）：

```
@WebServlet("/foobar")
public class FooBarServlet extends HttpServlet {
    ... 
```

如果您使用的是 Servlet 2.5，以下是声明 servlet 的方法：

```
<servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>mypackage.MyServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/myservlet*</url-pattern>
</servlet-mapping> 
```

# java - 使用 JDBC 创建用于查询 MySQL 表的抽象类或接口

> ID：14528365
> 
> 赞同：1
> 
> 时间：2013-01-25T18:45:41.637
> 
> 标签：java, mysql, database, jdbc

我正在实现一个对mysql 数据库执行基本查询的应用程序，例如更新、插入、删除。而且我想知道在连接查询字符串时是否有人像我一样偏执，所以他们编写了抽象方法来执行此操作，以便它适用于所有表并避免简单的拼写错误。

这是我避免连接中严重错误的方法，但我想看看其他人也做了什么来拓宽我的方法。

这是我的伪代码方法；

假设我有一个名为 ACC 的 mysql 表，其中包含以下列：

```
acc_no (primary key) | acc_first_name |  acc_last_name 
123                  |John            | Smith 
```

然后我实现了一个java抽象类

```
public abstract class Acc{
  // All column values in the table Acc as constants
  public static final String NUM = "acc_no";
  public static final String FIRST_NAME = "acc_first_name";
  public static final String LAST_NAME = "acc_last_name";

  private Hashtable<String, String> hash = new Hashtable<String, String>();

  public Acc(Connection con, String acc_no){
    // Get values from mysql
    PreparedStatement pstmt = ...SELECT * FROM ACC where ACC_NO = acc_no ....
    ResultSet rs = resultset from pstmt

    //Then put all the resultset rs values in hash so the hashtable have key/values             
    //that look something like this:
    //[[NUM, "123"]
    // [FIRST_NAME, "John"]
    // [LAST_NAME, "Smith"]]
    // The key is one of the constants in this class
    // and the corresponding values are taken from mysql database
  }

  public String get(String column){
    return hash.get(column)
  }
} 
```

因此，当您想从扩展它的类中访问表中的值时，它将类似于

```
class AccApp extends Acc{

   AccApp(Connection con){
     super(con, "123")
     printName(); 
   }

   String printName(){
      // Notice that I use static constants to get the column values
      // instead of typing this.get("acc_first_name") and this.get("acc_last_name")
      System.out.println(this.get(Acc.FIRST_NAME) + this.get(Acc.LAST_NAME));
   }

} 
```

# ruby-on-rails-3 - 如何在heroku上查找当前连接池大小

> ID：14528371
> 
> 赞同：24
> 
> 时间：2013-01-25T18:45:56.507
> 
> 标签：ruby-on-rails-3, heroku, ruby-on-rails-3.2

我们有一个 rails 3.2(.11) 应用程序，在 heroku 竹栈上运行许多 dyno，连接到 MySQL RDS 服务器。我们当前的数据库连接似乎存在一些问题，因此我们正在尝试准确调试每个测功机正在旋转的连接数。我知道我可以在 heroku 的配置中设置连接池的大小`DATABASE_URL`，但似乎无法找出当前默认使用的连接数。

两个主要问题：

1）如何找到heroku使用的连接池的大小？

2) 测功机需要大于 1 的连接池大小有什么原因吗？我的理解是，rails 一次只能执行 1 个请求，所以据我所知，一个数据库连接应该是所需要的。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-01T23:26:36.000

要检查池大小，请启动 heroku 控制台`heroku run rails c`，然后运行：

```
ActiveRecord::Base.connection_pool.size 
```

一些网络服务器（例如 Puma）是多线程的，因此数据库池的大小很重要。您还可以运行多线程工作程序，例如 Sidekiq，它也会受到池大小的影响。

请注意，Heroku 将忽略您的 database.yml 文件。要设置池大小，您可以附加`?pool=25`到 Heroku 应用程序配置中的 DATABASE_URL。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-24T19:11:13.957

此信息可通过 Rails 中的接口获得[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_handling.rb#L98-L106](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_handling.rb#L98-L106)它在 Rails 3+ 中

```
ActiveRecord::Base.connection_config
# => {:adapter=>"postgresql", :encoding=>"utf8", :pool=>5, :host=>"localhost", :database=>"triage_development"} 
```

您可以使用它来获取当前池大小，而无需评估或依赖未公开的实例变量的存在，但是在 Rails 3 中，如果尚未显式设置它可能会返回 nil

```
ActiveRecord::Base.connection_config[:pool]
# => 5 
```

# html - 提交表单按钮

> ID：14528372
> 
> 赞同：0
> 
> 时间：2013-01-25T18:45:58.763
> 
> 标签：html, css, button, contact-form

我尝试为我的简单联系表单制作一个自定义提交按钮，因为我想用 CSS 对其进行一些样式设置。我将输入类型设置为提交，每当我单击按钮时，它既不提交也不可点击。

我创建了一个名为蓝色按钮的类，我的样式会显示但无法提交。

```
 <a class="blue button" input type="submit">Everything? Send!</a> 
```

然后我尝试了这种方法并提交，但它没有显示我创建的样式！

```
 <input class="blue button" type="submit" value="Send"> 
```

形式

```
<form method="post" id="submitform" action="submitemail.php" >
    <input type="text" 
                            class="formstyle"
                            title="Name" 
                            data-placeholder="Name..." 
                            name="name" />

                            <input type="text"
                            class="formstyle" 
                            title="Email" 
                            data-placeholder="Website..." 
                            name="website" />

                             <input type="text" 
                             class="formstyle"
                             title="Email" 
                             data-placeholder="Email..." 
                             name="email" />

                              <input type="text"
                               class="formstyle" 
                               title="Email"
                               data-placeholder="Business or Personal?"
                               name="type" />

                            <textarea name="message" 
                            data-placeholder="Message..."
                            title="Message"></textarea> 
```

无论如何，是否有一个来自元素样式按钮的提交按钮，如下所示？

```
<a class="blue button" input type="submit">Everything? Send!</a> 
```

根据要求的CSS：

```
.button.blue {
    border: 1px solid #005998;
}

.button.blue .text {
    padding: 16px 31px 14px;
    text-transform: none;
    text-shadow: 0 -1px 0 #022268;
}

.button.blue .normal {
    background: linear-gradient(#00a7f7, #0563bb);
    background: -webkit-linear-gradient(#00a7f7, #0563bb);
    background: -moz-linear-gradient(#00a7f7, #0563bb);
    background: -o-linear-gradient(#00a7f7, #0563bb);
    background: -ms-linear-gradient(#00a7f7, #0563bb);
    -pie-background: linear-gradient(#00a7f7, #0563bb);
    box-shadow: 0 1px 0 #12dbff inset;
    -webkit-box-shadow: 0 1px 0 #12dbff inset;
    -moz-box-shadow: 0 1px 0 #12dbff inset;
    -ms-box-shadow: 0 1px 0 #12dbff inset;
    -o-box-shadow: 0 1px 0 #12dbff inset;
    behavior: url(pie.htc);
}

.button.blue .hover {
    display: none;
    background: linear-gradient(#008af3, #0244a2);
    background: -webkit-linear-gradient(#008af3, #0244a2);
    background: -moz-linear-gradient(#008af3, #0244a2);
    background: -o-linear-gradient(#008af3, #0244a2);
    background: -ms-linear-gradient(#008af3, #0244a2);
    -pie-background: linear-gradient(#008af3, #0244a2);
    box-shadow: 0 1px 0 #12c4ff inset;
    -webkit-box-shadow: 0 1px 0 #12c4ff inset;
    -moz-box-shadow: 0 1px 0 #12c4ff inset;
    -ms-box-shadow: 0 1px 0 #12c4ff inset;
    -o-box-shadow: 0 1px 0 #12c4ff inset;
    behavior: url(pie.htc);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:48:03.537

```
<a class="blue button" input type="submit">Everything? Send!</a> 
```

这是完全错误的。对于表单提交按钮：

```
<input type="submit" class="blue-button" value="submit" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:01:53.740

我不知道您是否真的了解 css 的概念，您可以尝试以下任何一种方式：

1 - 从规则中删除 .normal ，它没有被使用。

2 - 将输入提交放在表单中。

3 - 在 css 上排序类，比如 .blue.button 不是 button.blue（jsut 来组织）

4 - .hover 是一个类还是效果？如果它的效果正确的是：悬停

试试这些

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:22:22.233

你可以尝试类似的东西；

```
<a class="blue_button" input type="submit"><input class="submit_button" type="submit" value="Send"></a> 
```

你可以`submit_button`给`display: block; width: 100%; height: 100px; margin: none; border: none;`. 我建议给它一个宽度和高度`px`（固定宽度）。这未经测试。

在为元素定义类名时留出空间会将它们视为多个类。例如，如果您使用`class="blue button"`，则表示该元素可能会在`.blue`和上定义样式`.button`。

# c# - C# MVC4 windows 用户名和 cookie 问题

> ID：14528373
> 
> 赞同：0
> 
> 时间：2013-01-25T18:46:03.013
> 
> 标签：c#, asp.net-mvc, httpcookie

首先，我很遗憾地说我不确定这段代码应该在 _Layout.cshtml 中还是在控制器中的某个地方。它需要在所有页面上运行，所以我把它放在了 _Layout.cshtml 页面中。

这适用于 Intranet Web 应用程序。我正在尝试做的是：如果找不到 cookie（保存用户的用户 ID），则获取 Windows 用户名，通过一个将进入数据库并获取相应用户的用户名的类运行它，并且 - 如果我们取回用户 ID - 制作一个包含它的 cookie。听起来并不太难，但特别是一条线，以及它的各种化身，拒绝支持。这是整个代码。

```
 if(!Context.Response.Cookies.AllKeys.Contains("userid")){
            var winuser = System.Web.HttpContext.Current.User.Identity.Name;
            var winuserid = myprojectname.Models.MyIntranetDataContext.getUserId(winuser).UserID();
            if (winuserid == null) {
                Response.Redirect("/someotherpage");
            } else {
                HttpCookie cookieuser = new HttpCookie("userid");
                DateTime now = DateTime.Now;
                cookieuser.Value = winuserid;
                cookieuser.Expires = now.AddMonths(1);

                Response.Cookies.Add(cookieuser);
            }
        } 
```

第 2 行 - var winuser ... -*似乎*是问题所在。在当前的版本中，我遇到了构建错误：非静态字段、方法或属性“myprojectname.Models.MyIntranetDataContext.getUserId(string)”需要对象引用

当我向它添加 .ToString 时，它也不喜欢它。

我也试过让winuser这个：Page.User.Identity.Name;
这没有给出任何构建错误。当我尝试开始调试时，她对这个美丽的错误感到震惊：“无法对空引用执行运行时绑定”

一旦我得到 Windows 用户名，一切都会好起来的。

真的，这在很大程度上与 cookie 甚至 mvc 无关（可能除了关于在何处放置此代码的指导 - _Layout.cshtml？）。真的是关于获取 Windows 用户名，我似乎无法做到。提前感谢您提供的任何帮助。

请注意，上述名称并非实际名称 - 仅作为示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:54:48.743

如果他们在域上，您不能使用类似以下的内容来检索该信息吗？

```
AppDomain.CurrentDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);

WindowsPrincipal principal = (WindowsPrincipal)Thread.CurrentPrincipal;
WindowsIdentity identity = (WindowsIdentity)principal.Identity;

String userName= principal.Identity.Name; 
```

# c# - 将图像保存到硬盘或存储为数据库中的字节数组？

> ID：14528375
> 
> 赞同：2
> 
> 时间：2013-01-25T18:46:10.017
> 
> 标签：c#, asp.net, file-upload, bytearray

> **可能重复：**
> [在数据库中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

很简单，我正在托管一个用户可以上传图片的网站，并且我有一个正常工作的 .net 文件上传控件。我只是想知道我应该使用什么方法将它们存储在服务器上。

*   我可以使用 FileUpload 控件的 SaveAs() 方法将其保存为实际文件。
*   我可以将图像分解为 Byte[] 并将其存储在数据库中以供访问。

我相信这里真正的问题是.. 我想要 IIS 或 Sql Server 2008 R2 上的负载吗？

关于我应该使用哪种方法以及为什么使用的普遍共识是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:52:41.587

没有普遍的共识，因为这两种方法都不是理想的。

将图像存储为文件意味着将应用程序扩展为在多个服务器上运行变得更加困难。然后你需要一个 SAN/NAS 来存储文件而不是本地磁盘。

将图像存储在数据库中意味着您将大量缓存空间用于图像数据，减慢其他查询速度，并且还会增加数据库的大小和备份。这也意味着您必须通过页面提供图像，您不能直接请求文件。

因此，这取决于您将拥有多少图像，以及您需要应用程序的可扩展性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T18:49:26.523

避免将它们放入数据库。仅仅因为几个文件，这将使您的数据库变得更大。这也会影响备份大小。

我没有看到在数据库中拥有实际文件字节有任何真正的好处。如果您有文件系统中文件的物理路径，那就足够了。

这也使您可以拥有自己的文件备份策略。

# python - Python 代码在命令行中运行良好，但在 IDLE 中无法运行

> ID：14528379
> 
> 赞同：0
> 
> 时间：2013-01-25T18:46:31.853
> 
> 标签：python, command-line, usb, python-idle

我发现很多人遇到了相反的问题，但还没有发现涉及 IDLE 无法运行从命令行运行良好的东西的问题。我正在使用一个我以前没有使用过的新模块，它使用一个 .pyd 文件和一个 .dll，并涉及一个通过 USB 连接的设备。遗憾的是，我无法发布深入的代码片段，因为这是受版权保护的代码，但如果有人知道从哪里开始解决这样的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:55:01.867

IDLE 在 Python 级别交换了 sys.stdout 和 sys.stderr 对象，这会导致一些 pyd 模块出现问题。尝试使用另一个调试器。

# java - Android 水平线性布局 - 包装元素

> ID：14528381
> 
> 赞同：28
> 
> 时间：2013-01-25T18:46:44.457
> 
> 标签：java, android, android-linearlayout, textview, word-wrap

我有一个包含动态生成的文本视图的水平线性布局，我遇到的问题是如果添加了太多文本视图，则会压缩文本视图（见下图）。我将如何包装线性布局以便在下一行打印文本视图？

![在此处输入图像描述](../Images/0ec16a24254f0d0e9065d0418da765b3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T19:00:13.033

LinearLayout 对此无能为力。相反，您将制作自己的布局，如本[http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/](http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/)中所述，或采用与此 Android 相同的方法[- LinearLayout Horizo​​ntal with wrapping children](https://stackoverflow.com/questions/2961777/android-linearlayout-horizontal-with-wrapping-children)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-30T19:39:14.410

> FlexboxLayout 是一个库项目，它为 Android 带来了 CSS 灵活框布局模块的类似功能。

[https://github.com/google/flexbox-layout](https://github.com/google/flexbox-layout)

类似的问题：

[Android 的换行小部件布局](https://stackoverflow.com/questions/549451/line-breaking-widget-layout-for-android)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-02T19:11:25.510

这个项目很好，因为您可以为项目添加 Gradle 编译指令，并能够从那里使用 Xml 中的 FlowLayout。无需复制 Java 文件

[https://github.com/ApmeM/android-flowlayout](https://github.com/ApmeM/android-flowlayout)

# javascript - 如何将 JSON 对象转换为 JavaScript 数组？

> ID：14528385
> 
> 赞同：111
> 
> 时间：2013-01-25T18:46:56.133
> 
> 标签：javascript, json

我需要将 JSON 对象字符串转换为 JavaScript 数组。

这是我的 JSON 对象：

```
{"2013-01-21":1,"2013-01-22":7} 
```

我想拥有：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Topping');
data.addColumn('number', 'Slices');

data.addRows([
    ['2013-01-21', 1],
    ['2013-01-22', 7]
]); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-01-25T18:51:49.340

```
var json_data = {"2013-01-21":1,"2013-01-22":7};
var result = [];

for(var i in json_data)
    result.push([i, json_data [i]]);

var data = new google.visualization.DataTable();
data.addColumn('string', 'Topping');
data.addColumn('number', 'Slices');
data.addRows(result); 
```

[http://jsfiddle.net/MV5rj/](http://jsfiddle.net/MV5rj/)

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2013-10-30T17:23:36.273

如果你有一个格式良好的 JSON 字符串，你应该能够做到

```
var as = JSON.parse(jstring); 
```

通过 AJAX 传输数组时，我一直这样做。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2015-04-23T10:27:24.303

假设你有：

```
var j = {0: "1", 1: "2", 2: "3", 3: "4"}; 
```

您可以通过以下方式获取值（几乎所有浏览器版本都支持）：

```
Object.keys(j).map(function(_) { return j[_]; }) 
```

或者简单地说：

```
Object.values(j) 
```

输出：

```
["1", "2", "3", "4"] 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-09-24T18:21:19.460

```
function json2array(json){
    var result = [];
    var keys = Object.keys(json);
    keys.forEach(function(key){
        result.push(json[key]);
    });
    return result;
} 
```

看到这个完整的解释：[http ://book.mixu.net/node/ch5.html](http://book.mixu.net/node/ch5.html)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2018-05-14T19:12:13.687

这将解决问题：

```
const json_data = {"2013-01-21":1,"2013-01-22":7};

const arr = Object.keys(json_data).map((key) => [key, json_data[key]]);

console.log(arr); 
```

或使用[Object.entries()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)方法：

```
console.log(Object.entries(json_data)); 
```

在这两种情况下，输出将是：

```
/* output: 
[['2013-01-21', 1], ['2013-01-22', 7]]
*/ 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-17T10:32:59.573

您可以像这样将对象项插入数组

```
let obj = {
  '1st': {
    name: 'stackoverflow'
  },
  '2nd': {
    name: 'stackexchange'
  }
};

 let wholeArray = Object.keys(obj).map(key => obj[key]);

 console.log(wholeArray);
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-12-03T10:31:21.127

对@Mister Aqua 的 **解决方案的一些修正**

```
const my_array = [];
    Object.entries(set_of_objects).map(function (entry) {
      const key = entry[0];
      const value = entry[1];

      const nested_object = {};

      nested_object[key] = value;
      my_array.push(nested_object);
    }); 
```

清凉丸：）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2022-01-17T16:28:52.960

如果目标是创建一个对象数组，这里有一个解决方案，可以使用 Object.keys() 和 Object.values() 完成您尝试做的事情：

```
const jsonResponse = '{"2013-01-21":1,"2013-01-22":7}'
// Only use json parse if the data is a JSON string.
const obj = typeof jsonResponse === 'string' ? JSON.parse(jsonResponse) : jsonResponse;
const data = [];

Object.keys(obj).forEach((key, i) => data.push({[key]: Object.values(obj)[i]})) 
```

或使用 Object.entries()

```
// Example 1
Object.entries(obj).forEach((array) => data.push({[array[0]]: array[1]}))
// Example 2
Object.entries(obj).forEach(([key, value]) => data.push({[key]: value})) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-09-14T15:36:14.597

```
const json = '{"result":true, "count":42}';
const obj = JSON.parse(json);

console.log(obj.count);
// expected output: 42

console.log(obj.result);
// expected output: true 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-16T14:59:05.040

考虑有一个我们想要转换的 json 对象

```
const my_object = {
    "key1": "value1",
    "key2": "value2",
    "key3": "value3"
} 
```

您可以使用几种解决方案：

**1\. [Object.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)和[Object.values()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/values)**

这些函数将任何对象转换为数组。一个返回一个包含所有键的数组，另一个返回所有值：

```
console.log(Object.keys(my_object))
// Output : ["key1", "key2", "key3"]

console.log(Object.values(my_object))
// Output : ["value1", "value2", "value3"] 
```

我不确定是否理解最初的问题，但解决方案可能是

```
data.addRows(Object.values(my_object)); 
```

**2\. [Object.entries()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)**

此功能是上述两者的混合：

```
console.log(Object.entries(my_object))
// Output : [["key1", "value1"],  ["key2", "value2"],  ["key3", "value3"]] 
```

它对最初的问题没有用，但是这个功能非常有用，我不得不提到它。特别是当*value_*是嵌套对象时。假设我们的值是这样的对象：

```
const my_object = {
    "key1": {"a": 1, "b": 2},
    "key2": {"y": 25, "z": 26},
    "key3": {"much": "stuff"}
} 
```

我们希望得到一个像这样的数组

```
my_array = [
    {"key": "key1", "a": 1, "b": 2},
    {"key": "key2", "y": 25, "z": 26},
    {"key": "key3", "much": "stuff"}
] 
```

我们需要`Object.entries()`用它们的值来获取我们所有的密钥。我们将从一个过于详细的代码开始：

```
my_array = Object.entries(my_object).map(function(entry){
   key = entry[0];
   value = entry[1];

   nested_object = value;
   nested_object.key = key;

   return nested_object;
});

console.log(my_array);
// Expected output : [
//    {"key": "key1", "a": 1, "b": 2},
//    {"key": "key2", "y": 25, "z": 26},
//    {"key": "key3", "much": "stuff"}
//] 
```

我们可以使用**[扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)**来简化我们的代码：

```
my_array = Object.entries(my_object).map(entry => {"key": entry[0], ...entry[1]});

console.log(my_array);
// Expected output : [
//    {"key": "key1", "a": 1, "b": 2},
//    {"key": "key2", "y": 25, "z": 26},
//    {"key": "key3", "much": "stuff"}
//] 
```

* * *

## 回答 #11

> 赞同：-9
> 
> 时间：2017-12-06T19:49:51.490

就这么简单！

```
var json_data = {"2013-01-21":1,"2013-01-22":7};
var result = [json_data];
console.log(result); 
```

# ios - 使用 resizableImageWithCapInsets:UIEdgeInsetsMake 崩溃

> ID：14528388
> 
> 赞同：0
> 
> 时间：2013-01-25T18:47:09.463
> 
> 标签：ios, uitableview, uiimage

基本上，我使用 resizableImageWithCapInsets:UIEdgeInsetsMake。但我不确定这是否是我崩溃的根源。我在我的表格单元格上添加这些可调整大小的图像。我不确定这是如何发生的。

这是日志。

```
 Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
    Exception Codes: KERN_INVALID_ADDRESS at 0xa1eab0c4
    Crashed Thread:  0

    Thread 0 name:  Dispatch queue: com.apple.main-thread
    Thread 0 Crashed:
    0   libobjc.A.dylib                 0x3966c5d0 objc_msgSend + 16
    1   Foundation                      0x3aa1750c probeGC + 60
    2   Foundation                      0x3aa1d526 -[NSConcreteMapTable removeObjectForKey:] + 30
    3   UIKit                           0x39e9f46c -[_UIImageViewPretiledImageWrapper dealloc] + 76
    4   libobjc.A.dylib                 0x3966e490 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 164
    5   CoreFoundation                  0x3a72882c _CFAutoreleasePoolPop + 12
    6   Foundation                      0x3aa12e10 -[NSAutoreleasePool release] + 116
    7   UIKit                           0x39b0f80c -[UITableView layoutSubviews] + 220
    8   UIKit                           0x39acb892 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
    9   QuartzCore                      0x37fce4e6 -[CALayer layoutSublayers] + 210
    10  QuartzCore                      0x37fce088 CA::Layer::layout_if_needed(CA::Transaction*) + 456
    11  QuartzCore                      0x37fcefac CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 12
    12  QuartzCore                      0x37fce996 CA::Context::commit_transaction(CA::Transaction*) + 234
    13  QuartzCore                      0x37fce7a8 CA::Transaction::commit() + 312
    14  QuartzCore                      0x37fce60c CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 56
    15  CoreFoundation                  0x3a7ba93e __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
    16  CoreFoundation                  0x3a7b8c34 __CFRunLoopDoObservers + 272
    17  CoreFoundation                  0x3a7b8f8e __CFRunLoopRun + 742
    18  CoreFoundation                  0x3a72c238 CFRunLoopRunSpecific + 352
    19  CoreFoundation                  0x3a72c0c4 CFRunLoopRunInMode + 100
    20  GraphicsServices                0x37a65336 GSEventRunModal + 70
    21  UIKit                           0x39b1c28c UIApplicationMain + 1116 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:27:22.710

我遇到了同样的问题，这只发生在 iOS5.x 调整 UIImageView 大小的设备上，该 UIImageView 显示了以这种方式创建的 UIImage：

```
 UIEdgeInsets edgeInsets = UIEdgeInsetsMake(topCapHeight, leftCapWidth, topCapHeight, leftCapWidth);
    image = [originalImage resizableImageWithCapInsets:edgeInsets]; 
```

这可能是 iOS6.x 中已修复的 iOS 错误

如果您的情况是使用镜像标准调整图像大小，您可以使用这种方式：

创建一个 UIImage 类别并添加此实例方法：

```
- (UIImage*)resizableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight </b>
{
    UIImage *image = nil;    
    float osVersion = [[[UIDevice currentDevice] systemVersion] floatValue];
    if (osVersion < 6.0) {
        image = [self stretchableImageWithLeftCapWidth:leftCapWidth topCapHeight:topCapHeight];
    } else {
        UIEdgeInsets edgeInsets = UIEdgeInsetsMake(topCapHeight, leftCapWidth, topCapHeight, leftCapWidth);
        image = [self resizableImageWithCapInsets:edgeInsets];
    }
    return image;
} 
```

方法 ： `- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight`

已在 iOS 文档中被弃用但不在框架中，这意味着您可以在 iOS5.x 设备上运行应用程序时使用它而不会出现任何问题，并在 iOS 6 或更高版本的设备上使用新支持的方法.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T10:16:58.630

仅供参考。

我也遇到了类似的崩溃，修复实际上不在代码中，而是在资产本身中。

正如 Apple 文档所述，资产的可调整大小区域需要为 1px x 1px，因此请**确保**它是。

> *- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets*
> 
> 在图像的缩放或调整大小期间，被帽子覆盖的区域不会被缩放或调整大小。相反，每个方向上未被帽覆盖的像素区域从左到右和从上到下平铺，以调整图像大小。这种技术通常用于创建可变宽度按钮，这些按钮保留相同的圆角，但其中心区域会根据需要增大或缩小。为获得最佳性能，请使用大小为 1x1 像素区域的平铺区域。

# magento - Magento Onestep Checkout：如何在最后一步之前创建客户（下订单）

> ID：14528393
> 
> 赞同：1
> 
> 时间：2013-01-25T18:47:22.117
> 
> 标签：magento

当用户尝试购买东西时，他会去默认的结帐/单页创建一个帐户并下订单。他填写了很多信息，但如果他没有完成订单，则所有信息都被驳回。

之后，如果他想买东西，他必须重新完成所有的注册步骤。

有没有办法避免这种情况，或者这不是 onestep 的工作方式？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:03:01.390

要在结帐时注册客户，请在一个步骤中结帐相同的一个请求。

在 Model Onepage.php 中查看这段代码

```
 if ($quote->getCheckoutMethod() == self::METHOD_REGISTER) {
        // set customer password
        $customer->setPassword($customerRequest->getParam('customer_password'));
        $customer->setConfirmation($customerRequest->getParam('confirm_password'));
    } else {
        // spoof customer password for guest
        $password = $customer->generatePassword();
        $customer->setPassword($password);
        $customer->setConfirmation($password);
        // set NOT LOGGED IN group id explicitly,
        // otherwise copyFieldset('customer_account', 'to_quote') will fill it with default group id value
        $customer->setGroupId(Mage_Customer_Model_Group::NOT_LOGGED_IN_ID);
    } 
```

所以你可以在你的自定义模块中做

```
$quote->setCheckoutMethod(Mage_Checkout_Model_Type_Onepage::METHOD_REGISTER); 
```

# javascript - Map，parseInt 的奇怪行为

> ID：14528397
> 
> 赞同：95
> 
> 时间：2013-01-25T18:47:38.473
> 
> 标签：javascript, functional-programming

> **可能重复：**
> [javascript - Array.map 和 parseInt](https://stackoverflow.com/questions/262427/javascript-array-map-and-parseint)

[我在 twitter 上](https://twitter.com/garybernhardt/status/294874591120211968)看到了这个奇怪的 JavaScript 行为的例子

```
['10','10','10','10','10'].map(parseInt) 
```

评估为

```
[10, NaN, 2, 3, 4] 
```

有人可以解释这种行为吗？我在 chrome 和 firebug 中验证了它

```
['10','10','10','10','10'].map(function(x){return parseInt(x);}) 
```

正确返回一个 10 的数组作为整数。这是对 map() 的不当使用、parseInt 的错误还是其他什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-01-25T18:49:19.383

[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)接收两个参数：字符串和基数：

> `var intValue = parseInt(string[, radix]);`

而[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)处理程序的第二个参数是索引：

> ... callback 使用三个参数调用：元素的值、元素的索引和被遍历的 Array 对象。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-01-25T18:49:17.847

`parseInt`使用 map 传入的前两个参数，并使用第二个参数指定基数。

这是您的代码中发生的事情：

```
parseInt('10', 0) // 10
parseInt('10', 1) // NaN
parseInt('10', 2) // 2
parseInt('10', 3) // 3
parseInt('10', 4) // 4 
```

这是 MDN 的链接`parseInt`：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt 。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T18:50:59.767

来自 MDN：

> callback 使用三个参数调用：元素的值、元素的索引和被遍历的 Array 对象。

`parseInt()`有两个参数。值和基数。这意味着`parseInt()`正在使用意外参数调用该函数。

# .net - Adobe Flash 媒体编码器和 WPF MediaElement

> ID：14528401
> 
> 赞同：6
> 
> 时间：2013-01-25T18:48:01.300
> 
> 标签：.net, video, http-live-streaming

如果我们可以通过 WPF MediaElement 获得 Adob​​e Flash Media Encoder 媒体流，我只是在调查可能性。

有没有.NET RTMP 客户端开源项目？

我们能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:23:33.163

RTMP 协议曾经是专有的，但不久前已被[Adob​​e 开放。](http://www.adobe.com/devnet/rtmp.html)[所以你可能会考虑使用像Red5](http://www.red5.org/)这样的开源服务器，它现在应该有完整的 RTMP 支持。

对于.NET，我只找到了这个库：

[http://www.fluorinefx.com/index.html](http://www.fluorinefx.com/index.html)

我没有使用 .NET 的经验，所以我不知道这是否真的对您有帮助。对我来说，它看起来适合您的场景。

如果它不起作用，您可以考虑通过 HLS（[HTTP Live Streaming](http://www.streamingmedia.com/Articles/Editorial/What-Is-.../What-is-HLS-%28HTTP-Live-Streaming%29-78221.aspx)）协议使用 Adob​​e Media Server 进行流式传输。在客户端，这应该适用于 .NET，但我对平台的了解也太有限了。

为了给您提供另一个选择，您可以考虑使用[Wowza 流服务器](http://www.wowza.com/addons/wowza-transcoder-addon)，因为它提供了一个附加组件，可以将 RTMP 流转换为 Microsoft Smooth Streaming（或您选择的任何其他格式），这肯定与 .NET/Silverlight 兼容。如果它很聪明，它实际上不应该重新编码比特流（只是重新打包它），但我没有尝试过。

# ruby-on-rails - 将选择保存在 cookie 中

> ID：14528404
> 
> 赞同：0
> 
> 时间：2013-01-25T18:48:04.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我试图将用户选择保存在 cookie 中，但我认为我做错了什么。

这是我认为的链接

```
<%= link_to image_tag("venezuela.png", :height => '74', :width => '111'),  {:controller => "landing", :action => "select_country", :country => "venezuela"}, :method => "get" %> 
```

这是我的控制器的动作

```
def select_country
        cookies.permanent[:country] = params[:country]
        case params[:country]
          when "venezuela"
            redirect_to "google.co.ve"
        end
  end 
```

当我单击链接时，会出现此错误：

```
Unknown action

The action 'show' could not be found for LandingController 
```

并转到此网址

```
http://localhost:3000/landing/select_country?country=venezuela 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:58:09.760

看起来你有一个路由问题。确保您没有假定所有链接`/landing/:anything`都用于在该控制器上`show`定义为动作的路由之前的动作的路由。`select_country`

# extjs - 如何在 EXTJS 文本字段中为空文本添加图像

> ID：14528406
> 
> 赞同：1
> 
> 时间：2013-01-25T18:48:10.010
> 
> 标签：extjs

团队。

有谁知道如何在 extjs 文本字段中添加图像

基本上我有文本字段，默认情况下我显示空文本，除此之外我想放一张图像（图像应该在文本字段内。）有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T19:46:26.660

分机 4.1

你的领域：

```
 {
        xtype: 'textfield',
        fieldLabel: 'Field with image',
        emptyText: 'placeholder text', // important, or image will not show
        name: 'name',
        emptyCls: 'empty-text-field'
    } 
```

你的CSS：

```
.empty-text-field {
    background-image:url(/images/cross.png);
    background-repeat: no-repeat;
    background-position: left center;
    padding-left: 20px;
} 
```

如果你想在所有空文本字段中显示图像，你只需要添加这个 css：

```
.x-form-empty-field {
    background-image:url(/images/cross.png);
    background-repeat: no-repeat;
    background-position: left center;
    padding-left: 20px;
} 
```

（`x-form-empty-field`是表单域的默认 emtptyCls）

不要忘记空文本

[截屏](http://my.jetscreenshot.com/6795/20130125-s3as-8kb.jpg)

# c# - 在 AutoResetEvent.WaitOne() 时渲染用户控件

> ID：14528408
> 
> 赞同：0
> 
> 时间：2013-01-25T18:48:14.790
> 
> 标签：c#, .net-2.0, blocking, ui-thread, autoresetevent

也许这是一个不好的问题，但我有一个客户端应用程序，它向服务器发送一些命令。我做了一个发送命令的小函数，它只是等到收到消息`AutoResetEvent.WaitOne()`，然后将消息作为字符串返回。我经常在我的客户端应用程序中使用此功能，因为它是实现某事的快速方法。

现在我想在这个应用程序中显示一个 LoadingCircle，同时它正在等待来自服务器的响应。我已经在消息接收函数中为此写了一些东西，它只是将控件添加到表单中。这是有效的发现，但是在几毫秒后重绘的 UserControl(Loading Circle) 不再重绘，因为`AutoResetEvent.WaitOne()`正在阻止 GUI 线程。我知道我可以将消息接收部分移动到另一个线程中，但是我不想改变这个函数的概念，因为我使用了超过*150x*的消息接收函数。

**所以我的问题是：有没有一种懒惰的方法来做到这一点，以便它在等待时执行 GUI 事件，或者我可以将 LoadingCircle 控件的绘图部分移动到另一个线程中？**

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:58:34.307

您实际上已经进行了异步操作，并通过`AutoResetEvent.WaitOne`. 现在你想把它变回异步操作。

我的建议是将功能与 UI 分开。然后工具一个同步和一个异步选项。这样，您就可以保持一个功能齐全的应用程序，并且可以在您对 150 个需要更改的实例的代码重写期间逐步发布。

4.5 中新的 async 和 await 关键字应该可以很好地为您服务。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-26T10:43:06.823

[我在这里](http://de.softuses.com/40447)找到了一个小修复，效果很好（我不能相信它）

```
private static TimeSpan InfiniteTimeout = TimeSpan.FromMilliseconds(-1); 
private const Int32 MAX_WAIT = 100; 

public static bool Wait(WaitHandle handle, TimeSpan timeout) 
{ 
    Int32 expireTicks; 
    bool signaled; 
    Int32 waitTime; 
    bool exitLoop; 

    // guard the inputs 
    if (handle == null) { 
        throw new ArgumentNullException("handle"); 
    } 
    else if ((handle.SafeWaitHandle.IsClosed)) { 
        throw new ArgumentException("closed wait handle", "handle"); 
    } 
    else if ((handle.SafeWaitHandle.IsInvalid)) { 
        throw new ArgumentException("invalid wait handle", "handle"); 
    } 
    else if ((timeout < InfiniteTimeout)) { 
        throw new ArgumentException("invalid timeout <-1", "timeout"); 
    } 

    // wait for the signal 
    expireTicks = (int)Environment.TickCount + timeout.TotalMilliseconds; 
    do { 
        if (timeout.Equals(InfiniteTimeout)) { 
            waitTime = MAX_WAIT; 
        } 
        else { 
            waitTime = (expireTicks - Environment.TickCount); 
            if (waitTime <= 0) { 
                exitLoop = true; 
                waitTime = 0; 
            } 
            else if (waitTime > MAX_WAIT) { 
                waitTime = MAX_WAIT; 
            } 
        } 

        if ((handle.SafeWaitHandle.IsClosed)) { 
            exitLoop = true; 
        } 
        else if (handle.WaitOne(waitTime, false)) { 
            exitLoop = true; 
            signaled = true; 
        } 
        else { 
            if (Application.MessageLoop) { 
                Application.DoEvents(); 
            } 
            else { 
                Thread.Sleep(1); 
            } 
        } 
    } 
    while (!exitLoop); 

    return signaled;
} 
```

# php - 使用 Twitteroauth 发布 Twitter 不会发布

> ID：14528416
> 
> 赞同：0
> 
> 时间：2013-01-25T18:48:38.043
> 
> 标签：php, twitter, oauth, twitter-oauth

我正在尝试使用 twitteroauth 库发布到 Twitter。这是我的脚本。

```
<?php
require_once('twitteroauth/twitteroauth.php');

$consumerKey    = 'xx';
$consumerSecret = 'xx';
$oAuthToken     = 'xx';
$oAuthSecret    = 'xx';

// Connect to Twitter
$connection = new TwitterOAuth($consumerKey, $consumerSecret,$oAuthToken, $oAuthSecret);

// Post Update
$content = $connection->post('statuses/update', array('status' => 'Test Tweet'));

var_export($connection->http_info);
?> 
```

导出调试：

```
array ( 'url' => 'https://api.twitter.com/1/statuses/update.json', 'content_type' => 'application/json; charset=utf-8', 'http_code' => 401, 'header_size' => 982, 'request_size' => 478, 'filetime' => -1, 'ssl_verify_result' => 0, 'redirect_count' => 0, 'total_time' => 0.376407, 'namelookup_time' => 0.017936, 'connect_time' => 0.098766, 'pretransfer_time' => 0.274227, 'size_upload' => 292, 'size_download' => 84, 'speed_download' => 223, 'speed_upload' => 775, 'download_content_length' => 84, 'upload_content_length' => 292, 'starttransfer_time' => 0.376153, 'redirect_time' => 0, ) 
```

推文没有发布。我检查了 10 次——访问令牌是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T13:53:45.647

首先，由于 API v1 已弃用，因此向 twitter 发布推​​文的 url 是错误的。您必须使用 API v1.1 发布推文。幸运的是，如果您现在已经下载了 twitteroauth，那么它已经设置好了。

如果不是，您必须将版本设置为 1.1

转到 twitteroauth.php 并将公共 $host 设置为

```
public $host= "https://api.twitter.com/1.1/"; 
```

在第 21 行。

现在你的推文网址是

```
https://api.twitter.com/1.1/statuses/update.json 
```

现在使用以下连接字符串发送推文。

```
$content = $connection->post('statuses/update', array('status' => 'Test Tweet')); 
```

# c - C中的打印和扫描

> ID：14528417
> 
> 赞同：-3
> 
> 时间：2013-01-25T18:48:39.210
> 
> 标签：c, loops, printf, scanf

我需要询问用户要绘制一个评论框的高度和宽度，然后当我运行编译器时，它会绘制一个适当大小的框。这是我正在使用的代码：

```
int main() {
    int i;

    writePattern('/', '*', '/', ' ', ' ',1, LENGTH-2,1,0,0, LENGTH); //top of box being created

    for(i=1; i<=5; i++)
        writePattern('/', '*', ' ', '*', '/', 1,1, LENGTH-4, 1,1, LENGTH); //sides of box

    writePattern('/', '*', '/', ' ', ' ', 1 , LENGTH-2,1,0,0,LENGTH); //bottom of box

    return 0;
} 
```

那么我该怎么做呢？我是 C 新手，所以我需要一些帮助。我知道我将不得不使用 printf 和 scanf 函数来读取用户输入，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:56:41.923

请尝试以下代码：

```
printf("Enter the width: ");
int width;
if (scanf("%d", &width) != 1) {
    printf("Invalid number!");
    return 1; // Just return nothing or some error code?
}

printf("Enter the height: ");
int height;
if (scanf("%d", &height) != 1) {
    printf("Invalid number!");
    return 1; // Just return nothing or some error code?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:50:08.990

在继续之前......学习如此美丽的语言是一个非常明智的想法！但是，当您开始时，请确保您从一开始就做正确的事情。

我建议您不要使用该`scanf()`功能。如果用户没有输入请求的东西，它会导致你的程序失败。你宁愿调用一般的流函数，例如`fgets()`然后解析你得到的字符串。看看另一个这样的问题：[scanf() 和 fgets() 之间的区别](https://stackoverflow.com/questions/1252132/difference-between-scanf-and-fgets)
你可能会在那里得到有用的提示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:54:08.297

您只需要打印和扫描方面的帮助吗？

```
int x, y;
printf("How wide do you want your box?");
if (!scanf("%d", &x))
    //printf that they did it incorrectly and try again, probably in a while loop
printf("how wide?");
if (!scanf("%d", &y))
    //printf that they did it incorrectly and try again, probably in a while loop 
```

where`%d`将获取或打印一个数字、`%s`一个字符串、`%f`一个分数等，您可以查找其他任何内容。

编辑：哎呀我忘了 & 来引用变量的地址

EDIT2：添加了建议的错误处理

# uploadify - Uploadify formData没有过来

> ID：14528418
> 
> 赞同：2
> 
> 时间：2013-01-25T18:48:43.573
> 
> 标签：uploadify

我正在尝试将 Uploadify 实现到经典的 ASP 应用程序中。我在设置`formData`中传递的值在`upload.asp`. 我试过放入`formData`它自己的选项字段，但这也不起作用。

有趣的是，我可以在 Fiddler 中“看到”它……所以我不确定到底发生了什么。

下面是我的上传代码。在 upload.asp 中调用`request.form("sellerid")`是空白的。

有任何想法吗？

```
<script type="text/javascript">
  $(function() {
    $("#file_upload").uploadify({
      'method'        : 'post',
      'swf'           : 'uploadify.swf',
      'uploader'      : 'upload.asp',
      'onUploadStart' : function(file) {          
         $("#file_upload").uploadify("settings", "formData",  
           { "sellerid" : "999", "sellerloginid" : "joeseller" }
         );
       }
     });
  });
</script> 
```

# php - 如何从 phpmyadmin 引用值以将用户与客户分开？

> ID：14528422
> 
> 赞同：0
> 
> 时间：2013-01-25T18:49:01.537
> 
> 标签：php, session, variables, if-statement, phpmyadmin

我正在尝试创建一个用户登录页面。成功注册后，在我的数据库中为管理员分配了一个值“A”，为客户分配了一个“C”。成功登录后，客户将被引导到一个页面，而管理员将被引导到另一个页面。我创建了三个会话变量，它们的 userId、userFName 和它们的 userType。我想创建一个 if 语句来检查 userType 的值并尝试了所有方法，但我仍然收到错误消息“解析错误：语法错误，意外 T_ELSE...在第 74 行”。

```
`//create a session variable for this customer who has just logged in
//store his id and first name and usertype in this session variable     
$_SESSION['c_userid']=$userArray['userId'];
$_SESSION['c_fname']=$userArray['userFName'];
$_SESSION['c_usertype']=$userArray['userType'];

//if seperating customers from administrators
if ($userArray['userType']) 'C';
{
echo "<p>You are successfully logged in as a customer";
}
else;
{
echo "<p>You are successfully logged in as an administrator";
}` 
```

我还编辑了 if 语句以在 var 之后包含和“=”符号，但它返回错误消息“解析错误：语法错误，意外 '='....在第 70 行”

非常感谢所有和任何帮助。

PS新手在这里学习曲线所以耐心等待。整个星期都在为此挠头，但没有取得任何进展。我研究了 php.net 等，所以这个问题是不得已而为之。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:50:06.977

这种语法都是错误的：

```
if ($userArray['userType']) 'C'; 
```

应该

```
if ($userArray['userType'] === 'C') 
```

*   一切都在括号中
*   括号后没有分号

    别的;

应该：

```
else // no semi-colon 
```

# android - 映射 V2 和 setRetainInstace(true) - 是否泄漏？

> ID：14528424
> 
> 赞同：1
> 
> 时间：2013-01-25T18:49:09.730
> 
> 标签：android, android-fragments, android-maps, android-maps-v2, eclipse-memory-analyzer

我正在使用适用于 Android 的新地图 v2。我一直在尝试在方向更改时保存其状态。我想过简单地把

```
setRetainInstance(true); 
```

在

```
onCreate() 
```

我`SupportMapFragment`班的方法

我的测试非常积极，一切正常。然后我运行 MAT 分析器并看到在旋转后我的两个或更多`MainActivity`实例是活动的。这是一面红旗。所以我测试了更多。

我已经用我的自定义地图片段测试了一个场景。
我已经测试了一个开箱即用的场景`SupportMapFragment`

`MainActivity`当我在 MAT 中执行时，这两种情况都会泄漏并给出相同的结果：
右键单击`MainActivity`-> 列出对象 -> 带有传入引用
右键单击​​“泄漏” `MainActivity`-> GC 根路径 -> 排除弱引用

![在此处输入图像描述](../Images/d810150a19ae50ad46fee5c0591a30fc.png)

`MainActivity`使用`SupportMapFragment`with时如何避免泄漏`setRetainInstance(true)`？

# android - 单个通知，但应在应用启动时提供多个待处理的意图 - Android

> ID：14528427
> 
> 赞同：1
> 
> 时间：2013-01-25T18:49:13.923
> 
> 标签：android, notifications, push-notification, android-pendingintent, google-cloud-messaging

我从 GCM 收到多条消息。当应用程序在前台或后台运行时，我没有问题，因为我使用广播接收器。但是，当应用程序未运行时，我希望将消息排队在 pendingIntent 中，并将其作为通知管理器通知的一部分。这样当用户点击通知时，mainActivity 就会启动并传递所有消息。我已经发布了下面的代码。

使用当前代码，我只能在活动的 onCreate 方法中接收 1 条消息，即最新消息。

总结一下需求

1.  应用程序未运行。应用程序退出。
2.  在将 Extra Field 设置为消息的每条收到的新消息上调用带有 pendingIntents 的通知
3.  通知栏中只有一条通知消息（让我们假设在通知栏中看到“收到的消息数 3”）
4.  现在用户点击通知
5.  应用程序应该能够通过访问 pendingIntent 来读取所有 3 条消息

希望我能找到帮助！

```
// build intent
final Intent notificationIntent = new Intent(context,
        MainActivity.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
        | Intent.FLAG_ACTIVITY_SINGLE_TOP);

notificationIntent.putExtra(CommonUtilities.EXTRA_MESSAGE, message);

notificationIntent.setAction("DUMMY");
// pending intent creation
int requestID = (int) System.currentTimeMillis();
// set intent so it does not start a new activity
final PendingIntent intent = PendingIntent.getActivity(context, requestID ,
        notificationIntent, 0);

// create notification using intent
final String title = context.getString(R.string.app_name);
Notification notification = new  NotificationCompat.Builder(context)
.setContentTitle(title)
.setContentText(formattedMessage)
.setSmallIcon(icon)
.setDefaults(Notification.FLAG_AUTO_CANCEL|Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE)                   

.setContentIntent(intent).build();

final NotificationManager notificationManager = (NotificationManager) context
.getSystemService(Context.NOTIFICATION_SERVICE);
notificationManager.notify(1, notification);

//Now in mainActivity:OnCreate 
//Receive

Bundle extras = getIntent().getExtras();
if (extras != null) {

    String inp = extras.getString(CommonUtilities.EXTRA_MESSAGE);

    if (inp != null ) {
        doSomething(inp);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:05:40.447

伙计们最后我使用以下逻辑来解决我的问题

接收 Intent 时有一个本地数组。

如果挂起的 Intent 已经存在 ( FLAG_NO_CREATE )，则将新消息附加到数组并更新挂起的 Intent 这样，EXTRA 将在数组中包含旧 + 新消息 else 清除旧消息数组，因为通知已被清除。现在用 (FLAG_UPDATE CURRENT) End 添加新的 EXTRA

然后通知

现在，当用户单击单个通知时，将启动一个新活动。

在 MainActivity Oncreate 中，我读取了意图数据并进入一个循环，以及在应用程序未运行时我会错过的所有消息！

当然不知道如果用户长时间不点击通知，通知栏会有多沉重！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:57:23.820

由于您是接收 GCM 传入消息的人，并且您是提出 的人`Notification`，因此您可以安排将 GCM 消息的详细信息存储在文件或数据库中，并由您安排显示当用户点击`Notification`.

# php - 非常简单的 PHP 代码使 Apache 崩溃

> ID：14528435
> 
> 赞同：3
> 
> 时间：2013-01-25T18:49:31.000
> 
> 标签：php, apache

我在 Windows XP 和 Apache 2.2.21 上使用 Wampserver。

**此代码在执行时崩溃：**

```
<?php

class Tax {
    public static function load($id)
    {
        echo $id;
    }
}

$tax = Tax::load(1);

?> 
```

**此代码在执行时不会崩溃：**

```
<?php

class Tax {
    public static function load($id)
    {
        echo $id;
    }
}

$tax = Tax::load(10);

?> 
```

简单来说，如果我将一个数字传递给函数**load**，Apache 就会崩溃。**但是，如果我将函数名称更改为load**以外的任何内容，它就可以正常工作。另外，我知道该函数不会返回任何内容，但它至少应该仍然可以编译。

**此代码也有效：**

```
Tax::load(5); 
```

我现在有点迷茫，因为我不知道为什么这段代码会导致崩溃。请帮帮我。

**编辑**

我正在使用 PHP 5.3.10

Apache 错误日志中没有错误

将变量名 $tax 更改为其他任何东西（例如 $a）都可以。我更加困惑了。

我知道 apache 崩溃是因为我得到一个 Windows 错误这样说。Apache 服务器会自动重新启动，并在崩溃后一分钟左右恢复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T18:54:28.013

如果 Apache 真的崩溃了，那么您应该查看以下文件以查看发生了什么：

```
[WAMP directory]/apache/logs/error.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:58:12.710

仅仅因为它回响并且不返回不应该使apache崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:55:57.277

尝试更改 $tax 的名称（变量）。

# javascript - 自动隐藏引导弹出框

> ID：14528442
> 
> 赞同：18
> 
> 时间：2013-01-25T18:49:48.790
> 
> 标签：javascript, jquery, twitter-bootstrap, twitter-bootstrap-3, popover

我想在几秒钟后自动隐藏 Bootstrap 弹出框。当用户将鼠标悬停在控件上时，必须显示弹出框，但如果用户不移动鼠标指针，则必须在几秒钟后自动隐藏此弹出框。

这很重要，因为在手机或平板电脑中，当用户点击控件时，会显示弹出框，并且当用户键入内容时，焦点仍然在同一个控件上，而弹出框会阻碍它。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-25T19:29:41.903

*注意：此解决方案是为 Bootstrap 3 编写的。*

这可行，尽管可能有更有效的方法：

```
$('.pop').popover().click(function () {
    setTimeout(function () {
        $('.pop').popover('hide');
    }, 2000);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<span class="pop" data-original-title="My popover" data-content="Isn't it great?">Click me</span>
```

[http://jsfiddle.net/isherwood/Bqq7C/27/](http://jsfiddle.net/isherwood/Bqq7C/27/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-03-06T13:13:18.927

接受的答案工作得很好，但这里有一个更引导的方法：

**原始答案**

```
$('.pop').on('shown.bs.popover', function () {
    var $pop = $(this);
    setTimeout(function () {
        $pop.popover('hide');
    }, 2000);
}); 
```

* * *

**从 limlash 更新**

> 这个答案遗漏了一个关键信息！！您必须在初始化 popover 时添加触发选项 .. {trigger:"manual"} .. 否则引导程序会附加一个 onclick 事件，导致首次使用后需要两次单击的问题.. 以下应该是建议的解决方案

```
$("#element").popover({ trigger:"manual" }).click(function() { 
  var pop = $(this); 
  pop.popover("show") 
  pop.on('shown.bs.popover',function() { 
   setTimeout(function() {
    pop.popover("hide")}, 2200); 
  }) 
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-04T10:39:58.733

您还可以将自己的新数据属性添加到弹出框，如下所示：

```
$('[data-toggle="popover"][data-timeout]').on('shown.bs.popover', function() {
    this_popover = $(this);
    setTimeout(function () {
        this_popover.popover('hide');
    }, $(this).data("timeout"));
}); 
```

现在你可以使用

```
<span 
    data-toggle="popover" 
    data-timeout="2000" 
    title="A title" 
    data-content="Some explanatory text">
    Your text
</span> 
```

并且弹出框在显示您在数据超时中指定的毫秒数后消失。

# c# - 何时使用 asp.net 删除生成的文件

> ID：14528443
> 
> 赞同：0
> 
> 时间：2013-01-25T18:49:51.603
> 
> 标签：c#, asp.net

我有一个模板 excel 文件，可以从中生成 excel 文件。

我的代码如下（这部分是从模板创建一个新的excel文件）：

```
string currentFN = PropertyFinalResult[0].Fecha;
        string fixCurrentFN = currentFN.Replace('/', '_');

        string currentTime = DateTime.Now.ToLongTimeString();
        string fixCurrentTime = currentTime.Replace(':', '_');
        string addToFileName = fixCurrentTime.Replace(' ', '_');

        string newFN = fixCurrentFN + "-" + addToFileName;

        string SourceFile = Request.PhysicalApplicationPath + "Template\\ExcelTemplate.xlsx";
        string DestFile = Request.PhysicalApplicationPath + "Template\\" + newFN + ".xlsx";
        //To keep FileName for posterior deletion
        Session["sDestFile"] = DestFile;

        try
        {                
            File.Copy(SourceFile, DestFile);                
        }
        catch (Exception ex)
        {
            lblErrorSavingToDB.Text = "Error: " + ex.Message;
            lblErrorSavingToDB.Visible = true;
        } 
```

之后，我打开新的 excel 文件，在其中插入记录，然后通过执行以下操作将文件流式传输给用户：

```
//Streaming file to client                    
                string fileName = newFN + ".xlsx";
                Response.Redirect("../Template/" + fileName); 
```

现在，我的问题是，无论用户是否保存文件，我应该什么时候删除生成的文件？我希望用户关闭有关打开或保存文件的弹出窗口。但是如何知道用户何时关闭该窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T18:52:45.843

您可以使用`TransmitFile`，然后在传输结束后关闭。例子：

```
 try
                {
                    Response.ContentType = "application/octet-stream";
                    Response.AddHeader("content-disposition", "attachment;filename=\"" + Path.GetFileName(path.FullName) + "\"");
                    Response.AddHeader("content-length", path.Length.ToString());
                    Response.TransmitFile(path.FullName);
                    Response.Flush();
                }
                finally
                {
                    File.Delete(Server.MapPath("~/"+tpacode+".zip"));
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:54:51.540

何时删除文件（或者最好说“保留文件多长时间”）是应用程序业务规则最好回答的问题。

过去，在低流量应用程序中，我使用“清理”例程来删除超过某个阈值的文件。创建新文件时会执行该清理，届时指定文件夹中任何早于阈值的文件都将被删除。

# python - 在 Django/Gunicorn 应用程序中拥有持久（非守护程序）线程有危险吗？

> ID：14528447
> 
> 赞同：4
> 
> 时间：2013-01-25T18:50:02.840
> 
> 标签：python, django, multithreading, gunicorn

我通常不需要在我的 Django 应用程序级编程（即视图）中显式使用线程。但我注意到一个看起来很有趣的库，它通过线程处理服务器端分析。

在 Django 视图期间，您将使用他们的 Python 客户端在一个单独的（非守护程序）线程中将 HTTP POST 批量发送到他们的 Web 服务。通常，我会使用 RabbitMQ 来代替线程，但他们希望降低库的启动成本。

我的问题是，这种方法有什么缺点吗？线程有一些额外的内存占用，但我不太担心。这显然取决于启动的请求/线程数。

线程不是守护进程并且可能长时间运行的问题是否存在？我假设 Gunicorn 进程是执行的主线程，并且它在无限循环中运行，因此它是否必须等待非守护线程退出通常并不重要。那是对的吗？

有点悬而未决的问题，但重点是了解非守护线程在 Django/Gunicorn 应用程序中的影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T17:32:10.517

Gunicorn 使用 pre-fork worker 模型。Master 进程产生并管理 Worker 进程。对于非 Tornado 用途，有两种 Workers：[Sync](http://docs.gunicorn.org/en/latest/design.html#sync-workers)（默认）和[Async](http://docs.gunicorn.org/en/latest/design.html#async-workers)。

在正常操作中，这些 Worker 循环运行，直到 Master 告诉它们正常关闭或杀死它们。Worker 会定期向 Master 发出心跳，表明他们还活着并且还在工作。如果发生心跳[超时](http://docs.gunicorn.org/en/latest/configure.html#timeout)，则 Master 将杀死 Worker 并重新启动它。

因此，不干扰 Worker 主循环的守护线程和非守护线程应该没有影响。如果线程确实干扰了 Worker 的主循环，例如线程正在执行工作并将结果提供给 HTTP 响应的场景，则考虑使用 Async Worker。Async Worker 允许 TCP 连接长时间保持活动状态，同时仍允许 Worker 向 Master 发出心跳。

# android - 带有nodejs的Oauth2

> ID：14528451
> 
> 赞同：0
> 
> 时间：2013-01-25T18:50:14.010
> 
> 标签：android, node.js, oauth-2.0

我用 nodeJs 开发了一个 Web 应用程序。大多数功能经过身份验证保护。我使用 Oauth2（Google、Twitter）来授权用户使用该应用程序。

我必须创建一个 Android 应用程序，在用户通过 Android 应用程序中的 Google 帐户进行身份验证后，通过 http 与我的后端通信。

最好的做法是什么？

我认为 OAuth2 对这项工作有好处。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:57:22.437

您可能需要考虑使用[PassportJS](http://passportjs.org/guide/oauth/)（如果您使用 ExpressJS 作为 Web 应用程序框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T02:23:55.840

在这种情况下，您不能真正使用 oauth。像这样[我如何验证 Google 身份验证 API 访问令牌？](https://stackoverflow.com/questions/359472/how-can-i-verify-a-google-authentication-api-access-token)解释说，您不应该共享身份验证。

相反，您应该让您的移动应用程序对后端请求使用单独的身份验证。您可以让他们登录一次，生成一些可以存储在手机中的秘密令牌，这样他们就不需要每次都登录。无论如何，该令牌都受到谷歌登录的保护。

# websphere-portal - 使用 PUMA 无需密码即可将用户登录到 Websphere Portal

> ID：14528457
> 
> 赞同：0
> 
> 时间：2013-01-25T18:50:55.810
> 
> 标签：websphere-portal, puma

我想使用 facebook 登录到 Websphere Portal。我使用 facebook ID 检索 LDAP uid，但无法获取密码。我可以使用什么 API 无需密码登录到门户网站？

这是我的代码：

```
Context ctx = new InitialContext();
PortletServiceHome pumaHomeService = (PortletServiceHome) ctx.lookup("portletservice/com.ibm.portal.um.portletservice.PumaHome");
PumaHome pumaHome = pumaHomeService.getPumaService().getPortletService(PumaHome.class);
PumaLocator pumaLocator = pumaHome.getLocator(request);
List<User> users = locator.findUsersByAttribute("uid", "testUser");
User pumaUser = users.get(0);
// How to login this pumaUser without password? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:12:21.887

您在这里描述的是在 WebSphere中建立[信任关系。](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/csec_trust.html "WebSphere 中的信任关系。")你不能通过 PUMA SPI 做到这一点，但过程相当简单。

高级步骤是：

1.  实现自定义[信任关联拦截器](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.javadoc.doc/web/spidocs/com/ibm/wsspi/security/tai/TrustAssociationInterceptor.html)类
2.  向 WebSphere Application Server 注册它
3.  在您的 TAI 类中，从您的原始逻辑返回 uid。

网上有一些教程。有些很[简单](http://lekkimworld.com/2011/06/08/developing_tais_for_websphere_application_server.html)，因为如果您的要求是通过用户名/uid 登录，这是一个简单的过程。请记住 - TAI 非常强大，因此请务必了解并确定您的 TAI 何时选择执行其逻辑。

希望这可以帮助，

-斯科特·H

# php - 简单的 HTML DOM：Notice->尝试获取非对象的属性

> ID：14528460
> 
> 赞同：0
> 
> 时间：2013-01-25T18:51:01.930
> 
> 标签：php, html, web-scraping, simple-html-dom

使用简单的 html dom 抓取网站时，我收到了 php 通知。显示了 2 个通知，并且在使用 print_r 函数显示它时，下面呈现的所有内容看起来都很完美。

网站表结构如下：

```
 <table class=data schedTbl>
        <thead>
            <tr>
                <th>DATA</th>
                <th>DATA</th>
                <th>DATA</th>
                etc....
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <div class="class1">DATA</div>
                    <div class="class2">SAME DATA AS PREVIOUS DIV</div>
                </td>
                <td>DATA</td>
                <td>DATA</td>
                etc....
            </tr>
            <tr>
                <td>
                    <div class="class1">DATA</div>
                    <div class="class2">SAME DATA AS PREVIOUS DIV</div>
                </td>
                <td>DATA</td>
                <td>DATA</td>
                etc....
            </tr>
            <tr>
                <td>
                    <div class="class1">DATA</div>
                    <div class="class2">SAME DATA AS PREVIOUS DIV</div>
                </td>
                <td>DATA</td>
                <td>DATA</td>
                etc....
            </tr>
            etc....
        </tbody>
    </table> 
```

下面的代码用于查找 table[class=data schedTbl] 中的所有 tr。我在那里有一个 tbody 选择器，但它似乎没有注意这个选择器，因为它仍然选择了 thead 中的 tr。

```
 include('simple_html_dom.php');

    $articles = array();

    getArticles('www.somesite.com');

    function getArticles($page) {
         global $articles;

         $html = new simple_html_dom();
         $html->load_file($page);

         $items = $html->find('table[class=data schedTbl] tbody tr');  

         foreach($items as $post) {

             $articles[] = array($post->children(0)->first_child(0)->plaintext,//0 -- GAME DATE
                        $post->children(1)->plaintext,//1 -- AWAY TEAM
                        $post->children(2)->plaintext);//2 -- HOME TEAM

         }

    } 
```

所以，我相信通知来自thead 中的tr，因为我正在调用只有一条记录的第一个td 的第一个孩子。两个的原因是body中实际上有两个具有相同数据结构的表。

同样，我相信有两种方法可以解决这个问题：

1）可能是最简单的（修复查找选择器，使 TBODY 工作并且只选择 tbodies 中的 tds）

2) 想办法在不需要时不做 first_child 过滤器？

如果您想要我收到的 print_r($articles) 输出的快照，请告诉我。

提前感谢您提供的任何帮助！

真挚地，

比尔 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T17:35:54.853

只需在 simple_html_dom.php 中注释掉第 #695 行

```
if ($m[1]==='tbody') continue; 
```

然后它应该读取 tbody。

# asp.net-mvc - 导航到另一个页面时保留我的子菜单的打开/关闭状态

> ID：14528465
> 
> 赞同：1
> 
> 时间：2013-01-25T18:51:20.353
> 
> 标签：asp.net-mvc

我有一个 asp.net mvc4 解决方案。

我在左侧有一个菜单。默认情况下，此菜单是关闭的。

![在此处输入图像描述](../Images/1f57e790284f18a86d596334c7b0fd47.png)

如果我单击一个项目，则会显示一个子菜单。

![在此处输入图像描述](../Images/686226786b882a8d4e9c99f468a0236f.png)

**问题**是当我导航到另一个页面时，子菜单的打开/关闭状态被忘记了。显示新页面，所有子菜单仍然关闭。我想保留这些子菜单的打开/关闭状态。我该如何进行？

这是我左侧菜单的一部分：

```
<div class="page-sidebar">
    <ul>
        <li class="dropdown" data-role="dropdown">
            <a><i class="icon-flip-2"></i> Transports</a>
            <ul class="sub-menu light sidebar-dropdown-menu">
                <li>@Html.ActionLink("En cours", "SearchTransportsAA", "Transp")</a></li>
                <li>@Html.ActionLink("Passés", "SearchTransportsBB", "Transp")</a></li>
                <li>@Html.ActionLink("Factures", "SearchTransportsCC", "Transp")</a></li>
            </ul>
        </li>
        <li class="dropdown" data-role="dropdown">
            <a><i class="icon-drawer-2"></i> Autorisations</a>
            <ul class="sub-menu light sidebar-dropdown-menu open">
                <li>@Html.ActionLink("Valides", "SearchAutorisAA", "Transp")</a></li>
                <li>@Html.ActionLink("Périmés", "SearchAutorisBB", "Transp")</a></li>
                <li>@Html.ActionLink("Recherche", "SearchAutorisCC", "Transp")</a></li>
            </ul>
        </li>
        ...
        ... 
```

正如您在上面看到的，当将**“打开”**添加到类时，菜单被标记为打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:16:22.870

您可以这样做的一种方法是让具有此侧菜单的视图继承自具有包含所选子菜单项的属性的模型

```
public class ViewWithSideMenu
{
    public ViewWithSideMenu(string menuItem)
    {
       MenuItem = menuItem;
    }

    public string MenuItem { get;set; }
} 
```

视图模型：

```
public class MyViewmModel : ViewWithSideMenu
{
    public MyViewmModel() : base("someMenu") {}
} 
```

看法：

```
<ul class="sub-menu light sidebar-dropdown-menu@(Model.MenuItem == "someMenu"? " open" : "")"> 
```

这种方法只会根据我们所在的页面打开一个菜单，它不会真正记住用户点击了什么，如果保持用户选择对您非常重要，您有 2 个选项，

*   每次请求都将它们发送回服务器（不是很好，开销太大）
*   继续使用 ajax 请求更新内容，而不是完全重新加载页面，在这种情况下，您保持菜单不变，并将所有请求转换为 ajax，并用 ajax 响应替换内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T19:41:48.090

你可以试试这个，它对我有用：D

```
<script type="text/javascript">
    $(document).ready(function () {
        $("a[href='"+ window.location.pathname +"']").parents(".hidden-ul").css("display", "block");
    });
</script> 
```

# javascript - 我应该把我所有的 javascript (jquery) 代码放到一个 .js 文件中吗？

> ID：14528467
> 
> 赞同：0
> 
> 时间：2013-01-25T18:51:24.613
> 
> 标签：javascript

如果是这样，我会将第二页代码放在哪里。通过阅读此处的其他一些问题，我终于意识到我需要将我的 javascript(jquery) 代码与我的 html 分开，这也有助于将变量从一个文件使用到下一个文件，但是我有第二页 javascript(jquery)而且我不确定我应该如何组织这一切？还是我应该简单地为第二页制作另一个 .js 文件？然后对两个文件都有两个标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:58:29.467

您应该按功能组织您的 JS，而不是根据您需要的功能在每个页面中决定加载什么，一个很好的例子是 jQuery 插件。您可以有一个文件来加载 jQuery 插件以及您需要的所有配置，并在每次需要使用插件时包含该文件。您可以为特定页面创建一个包含所有功能的 .js 文件。您将仅在需要该功能的页面中加载该 js。您也可以通过调用在 js 代码中加载 JS 文件`jQuery,getScript()`

[看这里了解更多](http://api.jquery.com/jQuery.getScript/)

我希望这是有用且清晰的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:59:11.663

如果您使用 jquery，您应该使用 Google 托管的文件，因为 Google 的连接速度非常快，而且很多人使用该文件，因此您客户端的浏览器很可能会在其缓存中保存该文件（这样您就可以避免下载，因此您的页面将加载得更快）。

有关更多信息，请阅读[http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

而不是jquery库的js代码，如果你使用单个或多个文件并不重要，但我猜每个文件都需要一个包含所有标题的新请求。然后，避免使用非常小的 .js 文件，而是加入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:55:28.533

不，不，不，编写有组织且可读的代码。将 HTML、CSS 和 JS 代码、资产分开并保持井井有条。

看到这个[如何在项目中组织 JavaScript 代码以实现可维护性？](https://stackoverflow.com/questions/7542424/how-to-organization-javascript-code-in-project-for-maintainability)

# xml - 运行 XSLT 时如何丢弃 XML 属性

> ID：14528476
> 
> 赞同：0
> 
> 时间：2013-01-25T18:52:02.160
> 
> 标签：xml, xslt

我有一个 XSLT，可以完美地从现有的 XML 数据流生成新的 XML。但是，根元素列出了几个属性，当这些属性存在时会导致 XSLT 无法解析数据。

我需要对 XSLT 进行哪些更改才能使其忽略这些属性？

这是根元素：

```
 <CrystalReport xmlns="urn:crystal-reports:schemas:report-detail"  
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:crystal-reports:schemas:report-detail 
      http://www.businessobjects.com/products/xml/CR2008Schema.xsd"> 
```

如果我只是删除 XSLT 运行良好的属性。如果它们存在，它将忽略整个文件。

您需要查看我的 XSLT 以提供帮助吗？

这是 XSLT。（我可以修改 XSLT 以简单地忽略名称空间吗？）：

```
<?xml version="1.0"?><!-- DWXMLSource="STX050 Course Descriptions Parsed.xml" -->
<!DOCTYPE xsl:stylesheet>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="no"/>

<xsl:key name="courses-by-title" match="Details" use="Section/DEPTSDESC1" />

<xsl:template match="CrystalReport">

<crystalreports>
<xsl:for-each select="Details[count(. | key('courses-by-title', Section/DEPTSDESC1)[1]) = 1]">
<xsl:sort select="Section/DEPTSDESC1" />
<department>
<Sectiontitle><xsl:value-of select="Section/DEPTSDESC1"/></Sectiontitle><xsl:text>
</xsl:text>

<xsl:for-each select="key('courses-by-title', Section/DEPTSDESC1)">
<xsl:sort select="Section/DEPTSDESC1" />
<Details> 
<course><xsl:value-of select="Section/DEPTSDESC1"/></course><xsl:text> </xsl:text><courseno><xsl:value-of select="Section/CRSNO1"/></courseno><xsl:text>
</xsl:text><class><xsl:value-of select="Section/CRSTITLE1"/></class><xsl:text>
</xsl:text><classcredit><xsl:value-of select="Section/CRSMINCRED1"/></classcredit><xsl:text> credit hours
</xsl:text><description><xsl:value-of select="Section/CRSDESC1"/></description> 
</Details><xsl:text>
</xsl:text>

</xsl:for-each>
</department>
</xsl:for-each>
</crystalreports>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:01:43.640

这不是一个属性：

```
xmlns="urn:crystal-reports:schemas:report-detail" 
```

它是一个命名空间声明。您的 XML 输入似乎位于此名称空间中，而 XSLT 很可能没有从您的文档中找到任何内容，因为您的所有 XPath 都位于 null 名称空间中。你需要做的是在你的 XSLT 中声明这个命名空间：

```
<xsl:stylesheet version="1.0" 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:cr="urn:crystal-reports:schemas:report-detail"> 
```

请注意，我已经为它分配了前缀`cr`。在这种情况下，有必要给命名空间一些前缀。

然后你需要在你的 XPath 中使用相同的前缀：

```
<xsl:template match="cr:CrystalReports">

...

<xsl:value-of select="cr:SomeNode/cr:AnotherNode" /> 
```

等等。

这里的一个问题是，如果 XML 中的**属性**在源文档中没有前缀，那么它们*位于*null 命名空间中，并且在引用它们时不应**使用**前缀。例如：

如果您在同一个 XML 文档中有这样的元素：

```
<ReportItem id="5" /> 
```

您将该属性称为`@id`，而不是`@cr:id`：

```
<xsl:apply-templates select="cr:ReportItem[@id = 5]" /> 
```

# eclipse - 在 Juno 上安装 TeXLipse 无法正常工作

> ID：14528480
> 
> 赞同：2
> 
> 时间：2013-01-25T18:52:13.440
> 
> 标签：eclipse, eclipse-plugin, latex

我曾尝试在 Ubuntu 12.04 上运行的 Juno Eclipse 中安装 TeXLipse 扩展。

安装顺利进行，但是当我选择项目创建向导时，TeXLipse 不存在作为选项。它也没有出现在 Eclipse 的 Windows > Preference 部分。

有没有其他人经历过这个，并有一个关于如何让它工作的建议。我用谷歌搜索，其他人已经让它与朱诺一起工作。我只是不确定我错过了什么。

谢谢

**编辑：解决方案**

我想透露一些细节。我在 Ubuntu 上为 Eclipse 安装了库存 Eclipse。然后我做了一个更新，我只需替换位于`/usr/lib/eclipse`. 你可以谷歌搜索细节。

为了弄清楚我的系统在做什么，我做了两件事。

1.  位于`~/workspace/.metatdata`文件夹中的是一个名为`.log`. 我在终端上运行`tail -f ~/workspace/.metatdata/.log`，以便在安装时查看日志文件中的任何错误。
2.  我从终端运行 eclipse`$> eclipse`以查看是否产生了任何错误。

我的第一个错误是当我运行 eclipse 时 eclipse 无法处理`~/.eclipse`文件/目录。所以我只是在我的主文件夹中创建了这个目录，这个错误就消失了。我尝试安装插件，但在`.log`文件中发布了一个新错误：

```
!SESSION 2013-01-31 11:21:39.559 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.equinox.p2.engine 4 4 2013-01-31 11:23:38.266
!MESSAGE An error occurred while committing the engine session for profile: epp.package.jee.
!SUBENTRY 1 org.eclipse.equinox.p2.touchpoint.eclipse 4 0 2013-01-31 11:23:38.266
!MESSAGE 
!SUBENTRY 2 org.eclipse.equinox.p2.touchpoint.eclipse 4 0 2013-01-31 11:23:38.266
!MESSAGE Error saving manipulator.
!STACK 0
java.io.FileNotFoundException: **/usr/lib/eclipse/eclipse.ini** (Permission denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
at java.io.FileOutputStream.<init>(FileOutputStream.java:160)
at java.io.FileWriter.<init>(FileWriter.java:90)
at 

org.eclipse.equinox.internal.frameworkadmin.equinox.EclipseLauncherParser.save(EclipseLauncherParser.java:321)
    at org.eclipse.equinox.internal.frameworkadmin.equinox.EquinoxManipulatorImpl.save(EquinoxManipulatorImpl.java:378)
    at org.eclipse.equinox.internal.p2.touchpoint.eclipse.LazyManipulator.save(LazyManipulator.java:97)
    at org.eclipse.equinox.internal.p2.touchpoint.eclipse.EclipseTouchpoint.saveManipulator(EclipseTouchpoint.java:61)
    at org.eclipse.equinox.internal.p2.touchpoint.eclipse.EclipseTouchpoint.commit(EclipseTouchpoint.java:137)
    at org.eclipse.equinox.internal.p2.engine.EngineSession.commit(EngineSession.java:123)
    at org.eclipse.equinox.internal.p2.engine.Engine.perform(Engine.java:93)
    at org.eclipse.equinox.internal.p2.engine.Engine.perform(Engine.java:44)
    at org.eclipse.equinox.p2.operations.ProvisioningSession.performProvisioningPlan(ProvisioningSession.java:174)
    at org.eclipse.equinox.p2.operations.ProfileModificationJob.runModal(ProfileModificationJob.java:79)
    at org.eclipse.equinox.p2.operations.ProvisioningJob.run(ProvisioningJob.java:177)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

安装程序想要更新`/usr/lib/eclipse/eclipse.ini`. 我更改了对此的权限以写入所有内容（替代方法是以 root 身份运行 eclipse，我不想这样做）。我卸载了插件并重新安装了它，现在它可以按预期工作了。我希望这对其他人有帮助。**之后不要忘记反转权限。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:03:19.493

Eclipse 似乎需要对您安装它的位置的写入权限。我怎么看，这给你留下了两个选择：

1.  将 Eclipse 安装（即提取）到您拥有的文件夹，例如您的主文件夹。
2.  如果您将 Eclipse 安装`/opt/eclipse`为由 root 拥有，您还必须以 root 身份安装插件。

[这个问题](https://stackoverflow.com/questions/2697882/plugins-installed-on-eclipse-not-visible)描述了Windows下的相同问题。[这个（德国）网站](http://wiki.ubuntuusers.de/Eclipse)建议上面的选项 2 作为解决方案。

# android - 可以使用 OpenMAX for Android NDK 将实时视频/音频流式传输到服务器吗？例子？

> ID：14528487
> 
> 赞同：3
> 
> 时间：2013-01-25T18:52:30.980
> 
> 标签：android, android-ndk, video-streaming, video-capture, openmax

OpenMax 有一个名为“Data Sink”的概念。

规格说明了它们：

```
Its data locator which identifies where the data resides. Possible locators include:
• URIs (such as a filename)
• Memory addresses
• I/O devices
• Output Mixes
• Cameras 
```

以下是规范中的一些示例代码：

```
/* Setup the data sink structure */
uri.locatorType = XA_DATALOCATOR_URI;
uri.URI = (XAchar *) "file:///recordsample.wav";
audioSink.pLocator = (void*) &uri; 
```

然而，在其他一些地方，它说：

```
URIs pointing to audio files in the local file system 
```

有谁知道是否可以使用带有这些 URI/数据接收器的 OpenMax 来实现一个**流式应用程序，该应用程序从麦克风/摄像头捕获实时数据并将其流式传输到服务器？**例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T21:32:29.043

最简洁的答案是不”。NDK[文档](https://android.googlesource.com/platform/ndk/+/android-4.4.4_r2.0.1/docs/openmaxal/index.html)明确指出，截至今天，OpneMAX AL 的 Android 实现没有公开任何超出 Java [MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)的功能。

# java - 连接发生变化时显示 toast

> ID：14528489
> 
> 赞同：0
> 
> 时间：2013-01-25T18:52:41.510
> 
> 标签：java, android

我构建了一个使用 webview 流式传输音频的应用程序。现在我添加了一个检查是否有连接（或没有）。使用 toast 我会显示一条带有“true”或“false”的消息，但我只想在连接发生变化时才显示 toast。我该怎么办？

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

update();

private void update() {
        new Thread() {
            public void run() {
                while (true) {
                    runOnUiThread(new Runnable() {
                         @Override
                         public void run() {
                             isOnline();
                         }
                    });
                    try {
                        Thread.sleep(5000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } 
            }
        }.start();
        }

    public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {

            Toast.makeText(getApplicationContext(), "true",Toast.LENGTH_LONG).show();   
            return true;
        }
        Toast.makeText(getApplicationContext(), "false",Toast.LENGTH_LONG).show();
        return false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:11:09.027

试试这个 ：

```
public class BroadCastSampleActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            this.registerReceiver(this.mConnReceiver,
                    new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
        }
        private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
                String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
                boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

                NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
                NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

                if(currentNetworkInfo.isConnected()){
                    Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
                }else{
                    Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
                }
            }
        };
} 
```

在您的清单中添加此权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:09:17.173

> 每当连接详细信息发生更改时，ConnectivityManager 都会广播 CONNECTIVITY_ACTION ("android.net.conn.CONNECTIVITY_CHANGE") 操作。您可以在清单中注册广播接收器以侦听这些更改并相应地恢复（或暂停）您的后台更新。

这来自android开发者信息。

你可以在这里阅读更多：http: [//developer.android.com/training/monitoring-device-state/connectivity-monitoring.html](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)

那应该有显示 toast 通知所需的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:02:24.917

您应该注册 android.net.conn.CONNECTIVITY_CHANGE。并仅在收到意图时显示对话框。

您可以创建一个扩展 BroadcastReceiver 并在其 onReceive 方法中显示 toast 的内部类。

那应该工作:)

# cakephp - CakePHP 2.x 深度关联上的可包含行为条件

> ID：14528492
> 
> 赞同：4
> 
> 时间：2013-01-25T18:52:54.110
> 
> 标签：cakephp

我有这样的模型关系：

`Project`有很多`SubProject`有很多`Item`

我想设置一个`containable`数组，以便我可以找到`Item`属于特定 s 的所有 s `Project`，并对结果进行分页。所以，在我的`ItemsController`我有：

```
public $paginate = array(
  'Item' => array(
    'limit' => 10,
    'order' => array('
      'Item.create_time' => 'desc'
    ),
    'contain' => array(
      'SubProject' => array(
        'Project'
      )
    )
  )
); 
```

显然，我需要在某个地方放置一个类似的条件`"SubProject.project_id = $pid"`，但是我尝试过的任何方法都不会产生正确的结果。我能做到的最好的结果是这样的：

```
Array
(
[0] => Array
    (
        [Item] => Array
            (
                [id] => 13
                [file_name] => foo.tar.gz
                .... other keys ...
                [create_time] => 2013-01-23 14:59:49
                [subProject_id] => 4
            )

        [SubProject] => Array
            (
                [id] => 4
                [name] => foo
                [project_id] => 2
                ..... other keys ....
                [Project] => Array
                    (
                    )

            )

    )
 [1] => Array
 ..... 
```

**编辑**：忽略不匹配的项目记录是完全正确的；我想跳过没有匹配项目记录的任何项目记录。

我已经想到[手动指定我的 joins](https://stackoverflow.com/questions/8249978/cakephp-conditions-on-deep-model-associations)，但我觉得这不应该是必要的。

看起来这应该是显而易见的，但是，解决方案让我无法理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T23:30:04.637

我最终确实解决了这个问题，所以我想我会解释我做了什么，希望它可以帮助别人。

在阅读[了 Mark Story 的这篇博](http://mark-story.com/posts/view/using-bindmodel-to-get-to-deep-relations)文后（从 1.2 开始，但仍然相关），我决定要做的事情是在我的 Item 模型中创建一个自定义查找类型，直接绑定 Project 模型。这给出了 Containable 可以正确过滤的第一级关联。

因此，在 Items 模型中，我有如下内容（请参阅有关自定义查找类型[的文档](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types)）。

```
public $findMethods = array('byProject' => true);

public function _findByProject($state, $query, $results=array()) {
    if ($state == 'before') {
        $this->bindModel(array(
            'hasOne' => array(
                'Project' => array(
                    'foreignKey' => false,
                    'conditions' => array('Project.id = SubProject.project_id')
                )
            )
        ));
        return $query;
    }
    return $results;
} 
```

请注意，必须设置`foreignKey`为 false 以防止 CakePHP 尝试自动使用不存在的数据库键。在 ItemsController 中，分页选项现在如下所示：

```
public $paginate = array(
    'Item' => array(
        'findType' => 'byProject',
        'limit' => 10,
        'order' => array(
            'Item.create_time' => 'desc'
        ),
        'contain' => array(
            'SubProject',
            'Project'
        ),
        'conditions' => array('Project.id' = $pid)
    ),
); 
```

...`$pid`要显示的项目的 ID 在哪里。视图代码中的一些细微调整以适应略有不同的结果数组结构，我已经准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:53:17.547

编辑 ===============

```
public $paginate = array(
    'limit' => 10,
    'order' => 'Item.create_time DESC',      //'order' => array(''Item.create_time' => 'desc'),
    'contain' => array(
        'SubProject' => array(
            'Project' => array(
                'conditions' => array(
                    'id' => $project_id    // Passed parameter
                )
            )
        )
     )
); 
```

=================================================

您是否尝试过`conditions`如下使用？此外，我没有按照您的方式编写代码的“订单”部分。

```
public $paginate = array(
    'Item' => array(
        'limit' => 10,
        'order' => 'Item.create_time DESC',      //'order' => array(''Item.create_time' => 'desc'),
        'contain' => array(
            'SubProject' => array(
                'Project' => array(
                    'conditions' => array(
                        'id' => $project_id    // Passed parameter
                    )
                )
            )
        )
     )
); 
```

# c++ - 无法将函数定义与具有类模板的现有声明匹配

> ID：14528495
> 
> 赞同：4
> 
> 时间：2013-01-25T18:53:07.823
> 
> 标签：c++, templates

我创建了一个模板类，它应该将网格存储为二维`std::vector`；但是，当我编译时，使用 VC++（如果重要的话，2010，但我对此表示怀疑）我收到以下错误：

> 无法将函数定义与现有声明匹配

即使它试图匹配的两个函数完全相等。

这是头文件中的代码：

```
#pragma once
#include "CBlock.h"

template<class T>
class CMyGrid{

public:
    long sizeX;
    long sizeY;
    /*block position on grid*/
    std::vector<std::vector<T*>> System;

    CMyGrid();
    ~CMyGrid();
    CMyGrid(int sizeXp, int sizeYp){sizeX = sizeXp; sizeY =sizeYp;};

    void Set(T *data, int x, int y){System.at(x).at(y) = data;};
    int GetSizeX(){return sizeX;}
    int GetSizeY(){return sizeY;}

    int getxPosition(T *data); /*make easier put in struct*/
    int getyPosition(T *data);
    /*size*/ /* will hopefully be sizex by sizey*/
}; 
```

这是cpp文件：

```
#include "stdafx.h"
#include "CMyGrid.h"
#include "CBlock.h"
template <class T>

template <class T>
int CMyGrid<T>::getxPosition(T *data)
{
    for (int i = 0; i <System.size(); i++)
    {
        for (int j = 0; j < System[i].size(); j++)
        {
            if data == System[i][j];
                return j;
            else 
                continue;
        }
    }
}

template <class T>
int CMyGrid<T>::getyPosition(T *data)
{
    for (int i = 0; i <System.size(); i++)
    {
        for (int j = 0; j < System[i].size(); j++)
        {
            if data == System[i][j];
                return i;
            else 
                continue;
        }
    }
} 
```

这是整个错误：

> 1>c:\users\chris\documents\visual studio 2010\projects\testtest\testtest\cmygrid.cpp(33): 错误 C2244: 'CMyGrid::getxPosition' : 无法将函数定义与现有声明匹配
> 1> c :\users\chris\documents\visual studio 2010\projects\testtest\testtest\cmygrid.h(18) : 参见 'CMyGrid::getxPosition'
> 1> 定义
> 1> 'int CMyGrid::getxPosition(T *)' 的声明
> 1> 现有声明
> 1> 'int CMyGrid::getxPosition(T *)'

我已经阅读了其他几个具有类似问题的线程，并且已经将错误更改为链接器错误，如果我在声明旁边包含头文件中的两个 getposition 函数的函数代码，则会得到该错误。链接器错误是：

> 1>CBoard.obj : 错误 LNK2019: 未解析的外部符号“public: __thiscall CMyGrid::CMyGrid(void)” (??0?$CMyGrid@VCBlock@@@@QAE@XZ) 在函数“public: __thiscall CBoard: :CBoard(void)" (??0CBoard@@QAE@XZ)
> 1>CBoard.obj : error LNK2019: unresolved external symbol "public: __thiscall CMyGrid::~CMyGrid(void)" (??1?$CMyGrid@VCBlock @@@@QAE@XZ) 在函数 "public: __thiscall CBoard::~CBoard(void)" (??1CBoard@@QAE@XZ) 中引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-25T07:19:01.203

问题是您不能在`.cpp`. 尝试将您的代码更改为`.h`

在这里，您有一个很大的帖子来解释这一点。

[将 C++ 模板函数定义存储在 .CPP 文件中](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)

# ios - 自动布局和阴影

> ID：14528497
> 
> 赞同：10
> 
> 时间：2013-01-25T18:53:08.200
> 
> 标签：ios, objective-c, xcode, ios6, autolayout

我在使用自动布局在 iOS 6 应用程序中创建的 UIView 中添加阴影时遇到问题。

假设我有一个在 UIView 底部添加阴影的方法（这实际上是 UIView 的一个类别，所以它是可重用的）：

```
- (void) addShadowOnBottom {
    self.layer.shadowOffset = CGSizeMake(0, 2);
    self.layer.shadowOpacity = 0.7;
    self.layer.shadowColor = [[UIColor blackColor] CGColor];
    self.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.bounds].CGPath;
} 
```

当我在某些 UIViewController 中调用此方法时`viewDidLoad`，未添加阴影，可能是由于必须计算的所有约束。

`viewWillAppear`当我在相同的情况下调用此方法时。

当我在其中调用此方法时，`viewDidAppear`它可以工作，但是当新视图出现时，有一小段时间没有阴影，它会在一段时间后出现。

如果我放弃设置 shadowPath 并删除行`self.layer.shadowPath`，一切正常，但视图转换不平滑。

所以我的问题是在 iOS 6 中添加阴影以查看 Autolayout 的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-23T11:45:47.877

使用 AutoLayout 时您可以添加到图层的另一件事是，您需要在`UIView`尚不知道框架的地方添加阴影：

```
self.layer.rasterizationScale = [[UIScreen mainScreen] scale]; // to define retina or not
self.layer.shouldRasterize = YES; 
```

然后删除 shadowPath 属性，因为尚未处理自动布局约束，因此无关紧要。同样在执行时，您将不知道视图的边界或框架。

这大大提高了性能！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T09:48:58.130

i removed `self.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.bounds].CGPath;` from your code and it is working for me in `viewDidLoad`, please confirm.

Increasing `shdowOffset` will make you see the shadow more clear.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T03:48:14.333

有完全相同的问题...

虽然我无法让视图上的 CALayer 阴影很好地制作动画，但至少阴影在动画后会正确重新对齐。

我的解决方案（在我的应用程序中运行良好）是将 shadowOpacity 设置为 0，然后在动画完成后将其重置为所需的值。从用户的角度来看，您甚至无法判断阴影已经消失，因为动画通常太快而无法感知差异。

这是我的应用程序中一些代码的示例，其中我正在更改约束的常量值，即“到超级视图的后沿”NSLayoutContraint：

```
- (void) expandRightEdge
{
    [self.mainNavRightEdge setConstant:newEdgeConstant];
    [self updateCenterContainerShadow];
    [UIView animateWithDuration:ANIMATION_DURATION delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"PanelLayoutChanged" object:nil];
            [self.view layoutIfNeeded];
                    } completion:^(BOOL finished) {
                    nil;
                    }];
}

- (void) updateCenterContainerShadow
{
    self.centerContainer.layer.masksToBounds = NO;
    self.centerContainer.layer.shadowOpacity = 0.8f;
    self.centerContainer.layer.shadowRadius = 5.0f;
    self.centerContainer.layer.shadowOffset = CGSizeMake(0, 0);
    self.centerContainer.layer.shadowColor = [UIColor blackColor].CGColor;
    CGPathRef shadowPath = [UIBezierPath bezierPathWithRect:self.centerContainer.layer.bounds].CGPath;
    [self.centerContainer.layer setShadowPath:shadowPath];

    // Schedule a time to fade the shadow back in until we can figure out the CALayer + Auto-Layout issue
    [self performSelector:@selector(fadeInShadow) withObject:nil afterDelay:ANIMATION_DURATION+.05];
}

- (void) fadeInShadow
{
    [self.centerContainer.layer setShadowOpacity:0.8f];
} 
```

两件事情：

*   我本可以将fadeInShadow 放在完成块中，但是由于我的一些其他代码被分解的方式，这对我来说效果更好。
*   我意识到我没有使用“fadeInShadow”执行淡入，但考虑到它在动画完成后渲染的速度，我发现没有必要。

希望有帮助！

# java - 分页（和维护）swing jPanel 结构

> ID：14528500
> 
> 赞同：1
> 
> 时间：2013-01-25T18:53:17.450
> 
> 标签：java, swing, pagination, jpanel

> **可能重复：**
> [Swing 外行分页](https://stackoverflow.com/questions/14532560/swing-layman-pagination)

我的程序中有一个分页文档（JPanels 的结构），我必须跟踪添加和删除到文档中的所有元素，以及它们的大小，并相应地在页面之间移动它们。

我想出了一种管理方法，编写了一个算法来检查页面的高度和剩余的可用空间并据此采取行动。这是有缺陷的，因为如果一个组件的高度被降低到足够多，或者它真的很高然后被移除，那么来自下一页的多个组件可以被移动。此外，如果您降低第一个组件的高度，它的新高度可能适合前一页的可用空间。结合最后两个句子，您将无法编写代码，尤其是因为所有代码都在侦听器中。

那么，如果我有一个单独的组件，而不是一堆页面，该怎么办。

该组件将具有固定高度的空白空间（代表页面）和“实心”空间（代表首页的页脚、页间空间和底部页面的页眉）。

然后，当元素被添加到组件时，它们只会被添加到空白处，跳过实心的。

关键是能够分辨哪个组件在哪个空白空间上，而**不必担心由于元素删除、添加或调整大小而在空白空间之间移动元素。**这意味着当第一个空格全部填满时，下一个元素会自动添加到下一个空格。这也意味着在移除元素后，Component 会自动检查它是否可以将附加组件放入该空白空间，然后从下一个中拉出它。

无论如何，虽然我上面写的可能不可能，但我希望你能明白我在这里想要实现的目标。

如果您有任何想法可以使编写该部分代码更容易，请告诉我我能做什么。

# jquery - 如何验证与单选按钮相关的字段？

> ID：14528505
> 
> 赞同：0
> 
> 时间：2013-01-25T18:53:42.757
> 
> 标签：jquery, jquery-validate

我有一个联系表格，其中需要姓名、联系方式（电子邮件或电话）、电子邮件或电话文本字段（取决于单击的单选按钮）和描述。我正在使用 jQuery 的验证插件进行验证。单击电子邮件单选按钮时会出现电子邮件字段，电话字段也是如此。我的问题是代码如何在单击电子邮件单选按钮时验证电子邮件文本字段，并在单击电话单选按钮时验证电话文本字段。其中之一应该是必需的，但不是两者都需要。如果有帮助，当我单击电子邮件单选按钮时，电子邮件文本字段出现，电话文本字段消失，反之亦然。

**HTML**

```
 <div class="control-group">
    <label class="control-label" for="contact_name">Name</label>
    <div class="controls">
      <input id="contact_name" name="contact[name]" size="30" type="text" />
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="How_would_you_like_to_be_contacted_">How would you like to be contacted?</label>
    <div class="controls">
      <label class="radio">
        <input id="contact_type_email" name="contact_type" type="radio" value="email" />
        <label for="Email">Email</label>
      </label>

      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

      <label class="radio">
        <input id="contact_type_telephone" name="contact_type" type="radio" value="telephone" />
        <label for="Telephone">Telephone</label>
      </label>
    </div>
  </div>

  <div class="control-group" id="email">
    <label class="control-label" for="contact_email">Email</label>
    <div class="controls">
      <input id="contact_email" name="contact[email]" size="30" type="text" />
    </div>
  </div>

  <div class="control-group" id="telephone">
    <label class="control-label" for="contact_telephone">Telephone</label>
    <div class="controls">
      <input id="contact_telephone" name="contact[telephone]" placeholder="###-###-####" size="30" type="text" />
    </div>
  </div> 
```

**jQuery**

```
$(document).ready(function() {
  $('#email').hide();
  $('#telephone').hide();

  var email = false;
  var telephone = false;

  $('#contact_type_email').click(function() {
    $('#email').show();
    $('#telephone').hide();

    email = true;
    telephone = false;
  });
  $('#contact_type_telephone').click(function() {
    $('#telephone').show();
    $('#email').hide();

    telephone = true;
    email = false;
  });

  jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) ||
        phone_number.match(/^[2-9]\d{2}-[2-9]\d{2}-\d{4}$/);
  }, "Please specify a valid phone number");

  $('#new_contact').validate({
    ignore: ":hidden",
    rules: {
      'contact[name]': {
        required: true
      },
      'contact[email]': {
        required: true,
        email: true
      },
      'contact[telephone]': {
        required: true,
        phoneUS: true
      },
      'contact[description]': {
        required: true
      },
      contact_type: {
        required: true
      }
    },

    messages: {
      'contact[name]': {
        required: "Please provide a name."
      },
      'contact[telephone]': {
        required: "Please provide a valid telephone number."
      },
      'contact[description]': {
        required: "Please provide a description of the work you would like done."
      }
    },

    errorPlacement: function(error, element) {
      error.appendTo("#error");
    }

  });
}); 
```

我尝试用 vars 做一些事情，`email`但`telephone`不确定是否需要它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:43:58.670

[根据文档](http://docs.jquery.com/Plugins/Validation)，您可以[`depends`使用`rules`](http://docs.jquery.com/Plugins/Validation/validate#toptions).

```
rules: {
    telephone_field: {
        required: {
            depends:  function(element) {
                return $("#telephone_checkbox").prop("checked");
            }
        }
    }
} 
```

在没有看到您的特定代码的情况下，以下演示与我愿意获得的一样接近。这只是关于如何正确使用`depends`您的场景的演示。也没有包含使字段显示/隐藏的代码，因为大概在这方面您已经有了一些工作代码。

在通过按钮`required`做出选择之前，什么都没有。然后只制作与其“选中”按钮`radio`对应的字段。（由于 .，规则与按钮一起切换。）`radio``required``required``radio``depends`

**工作演示：http: [//jsfiddle.net/ZqHMq/](http://jsfiddle.net/ZqHMq/)**

**jQuery** :

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            telephonefield: {
                required: {
                    depends: function (element) {
                        return $("#telephone").prop("checked");
                    }
                }
            },
            emailfield: {
                required: {
                    depends: function (element) {
                        return $("#email").prop("checked");
                    }
                }
            }
        }
    });

}); 
```

**HTML**：

```
<form id="myform">
    telephone: <input type="text" name="telephonefield" />
    <br/>
    email: <input type="text" name="emailfield" />
    <br/>
    telephone: <input type="radio" name="contactradio" id="telephone" />
    <br/>
    email: <input type="radio" name="contactradio" id="email" />
    <br />
    <input type="submit" />
</form> 
```

* * *

**编辑：**

这是使用您的显示/隐藏代码的粗略“概念验证”演示：http: [//jsfiddle.net/7622M/](http://jsfiddle.net/7622M/)

# c++ - 如何在不使用高级 3d 功能的情况下使用 DirectX9 进行 .png 图像模糊 HLSL / 每像素运动模糊 / 顶点着色器

> ID：14528508
> 
> 赞同：0
> 
> 时间：2013-01-25T18:53:53.267
> 
> 标签：c++, image-processing, sprite, directx-9

谁能帮助我如何使用 DirectX9（d3d 的 2d 图形功能）进行 .png 图像模糊，而不使用高级着色器语言（HLSL）、Direct3D 每像素运动模糊和顶点着色器等高级 3d 功能。

## 详细解释：

我在表面上有一行 6 个相邻的 .png 图像（6 个 Sprite 纹理），然后我以圆形方式（1->2->3->4->5->6 连续移动/更改纹理位置->1->2->3->4->5->6) 具有不同的 alpha 分量，以获得旋转效果（二维旋转）的感觉。

## 问题：

即使使用不同的精灵纹理 alpha 值和不同的每秒帧数（fps），除了连续的图像变化之外，我也没有真正感受到旋转的感觉。经过这么多网络搜索后，我发现如果我在 .png 文件中动态应用模糊效果（高斯模糊/框模糊），就有可能获得旋转效果。

但是由于我的目标平台中的 3d 支持限制，除了 2d 功能之外，我不能使用 direct3d 的高级 3d 功能来获得旋转效果（一种运动模糊）。

我热烈欢迎论坛成员的友好帮助/建议/示例代码/指导我解决这个问题的正确路径。

## 示例代码：

```
void D3DGraphics::DrawSprite(LPDIRECT3DTEXTURE9 &texture,ID3DXSprite* pSprite, DXVECTOR2 Trans_11, int ImgIndex) {

D3DXMATRIX Matrix;
pDevice->Clear( 0,NULL,D3DCLEAR_STENCIL,D3DCOLOR_XRGB(0,0,0),0.0f,0 );

pSprite->Begin(D3DXSPRITE_ALPHABLEND);
D3DXMatrixTransformation2D(&Matrix, NULL, NULL, NULL, NULL, 0, &Trans_11);
pSprite->SetTransform(&Matrix1);

--> Need blur effect before write operation / while loading .png file as texture <---

pSprite->Draw(texture[ImgIndex], NULL, NULL, NULL, 0xFFFFFFFF); 
pSprite->End(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:00:48.553

如果循环播放 6 张图像不足以提供流畅的动画效果，为什么不循环播放 12 或 24 张图像呢？如果您只有 6 个“原始作品”，那么使用 photoshop/imagemagick 类型的工具预先生成中间图像并让您的应用程序加载它们比尝试在 DirextX 中进行加载它们仍然更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T22:10:16.090

[这是一个中国网站博客的 C++ Box Blur 链接](http://blog.csdn.net/jia20003/article/details/7201069)

希望

# xml - 我将如何使用 Maven 发布/部署一个 xml 文件（如站点）？

> ID：14528513
> 
> 赞同：0
> 
> 时间：2013-01-25T18:54:16.207
> 
> 标签：xml, maven, deployment

我有一个我希望我的项目引用的 xml 配置。我暴露它的最佳方式是什么？我想用 Maven 对其进行版本化、构建和部署，但我不确定如何只处理一个文件——它不需要放在 jar 中，我可以将它作为“站点”的一部分发布阶段。建议？

# jquery - 使用jQuery重置单选按钮的默认值

> ID：14528514
> 
> 赞同：0
> 
> 时间：2013-01-25T18:54:18.483
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我在处理互斥单选按钮的 asp.net mvc3 应用程序中使用的一些 jQuery 存在问题。检查/取消检查部分工作正常，但单选按钮控件的值保留了它的真实值，即使它没有被选中。

这是我正在使用的 jQuery：

```
$('.customRadio').click(function () {
    var checkState = $(this).attr('checked');
    $('.customRadio:checked').each(function () {
        $(this).attr('checked', false);
    });
    $(this).attr('checked', checkState);
}); 
```

我试过`.val('myValue')`像这样用 jQuery 设置属性，但它不起作用：

```
$(this).val($(this).getAttribute("falsevalue")); 
```

这是呈现的html：

```
<div class="one columns " style="min-width: 64px;">

                    <label for="Approve" class="hide-on-phones" style="white-space: nowrap">Approve</label>
                    <span class="clearfix hide-on-phones"></span>
                    <label for="Approve" class="show-on-phones">Approve &nbsp; </label>
                    <span class="clearfix show-on-phones"></span>                        

                <input class="customRadio" falsevalue="N" id="Approve" name="Approve" truevalue="Y" type="radio" value="N">
            </div>

<div class="one columns " style="min-width: 50px;">

                    <label for="Reject" class="hide-on-phones" style="white-space: nowrap">Reject</label>
                    <span class="clearfix hide-on-phones"></span>
                    <label for="Reject" class="show-on-phones">Reject &nbsp; </label>
                    <span class="clearfix show-on-phones"></span>                        

                <input class="customRadio" falsevalue="Y" id="Reject" name="Reject" truevalue="N" type="radio" value="Y">
            </div> 
```

我正在用 Chrome 检查元素。

有人有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:55:36.653

getAttribute 是一个原生 JS 方法，使用 attr() ：

```
$(this).val($(this).attr("falsevalue")); 
```

请注意，如果您在 DOM 检查器（如 chrome 或 firebug）中检查元素，即使您以编程方式更改该属性也不会更改，但会在表单提交时更改。并且不应该需要一个循环，只需做`$('.customRadio:checked').prop('checked', false);`应该做（作为一个属性， prop() 将是正确的方法）。

# c# - 向 DataGridView 添加新行时出错

> ID：14528521
> 
> 赞同：0
> 
> 时间：2013-01-25T18:54:42.693
> 
> 标签：c#, .net, datagridview

我有一个带有一些文本列、组合框列和一个图像列的 DataGridView。当我尝试通过调用添加空白新行时，`DataGridView1.Rows.AddCopy(0)`出现以下错误：`System.FormatException: Formatted value of the cell has a wrong type.`

新行不包含任何数据。当用户通过 GUI 添加新行（即不是以编程方式）时，没有问题。有人对可能导致此问题的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:11:54.527

这有帮助吗？

```
 // Create a new row on a datagridview
        var rowId = dataGridView1.Rows.Add();

        // fill the cells in the newly created row with your data
        dataGridView1.Rows[rowId].Cells[ColumnText.Name].Value = "";
        dataGridView1.Rows[rowId].Cells[ColumnCheckbox.Name].Value = true;
        dataGridView1.Rows[rowId].Cells[ColumnImage.Name].Value = null; // add image 
```

# web-config - Sitecore 中用于配置的预期行为包含带有 patch:delete 的文件

> ID：14528522
> 
> 赞同：1
> 
> 时间：2013-01-25T18:54:44.843
> 
> 标签：web-config, sitecore

我正在将 Sitecore (6.2) 项目的自定义配置设置移动到单独的`App_Config\Include`文件中。我正在使用 sitecore 页面 /sitecore/admin/ShowConfig.aspx 测试我的更改。我的问题是使用该**元素****时的预期行为是什么？`<patch:delete />`**

在我的包含文件中，我有以下内容：

```
<setting name="Preview.DefaultSite">
  <patch:delete/>
</setting> 
```

当我查看 ShowConfig.aspx 时，我看到以下内容：

```
<setting name="Preview.DefaultSite" value="website">
  <delete/>
</setting> 
```

这是正确和预期的行为，还是该`<setting name="Preview.DefaultSite">`元素应该完全消失？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:37:14.633

该元素应该完全消失，这对我来说在 Sitecore 6.5 (update-5) 中可以正常工作，我知道它在 6.4 中也可以正常工作。

您使用的是哪个版本的 Sitecore？

这里提到了所有补丁属性：[All About web.config Include Files with the Sitecore ASP.NET CMS](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/05/All-About-web-config-Include-Files-with-the-Sitecore-ASPNET-CMS.aspx)但评论表明有些人对此有疑问。[这篇 2010 年关于 web.config 的文章](http://briancaos.wordpress.com/2010/09/23/sitecore-web-config-include-files-auto-include/)还提到您无法删除，但就像我说的，它适用于较新的版本。

您始终可以修补属性以删除该值：

```
<setting name="Preview.DefaultSite">
  <patch:attribute name="value"></patch:attribute>
</setting> 
```

# python - 我的 Python 代码有什么问题？我正在尝试深度反转列表输入

> ID：14528523
> 
> 赞同：0
> 
> 时间：2013-01-25T18:54:45.623
> 
> 标签：python

```
def is_list(p):

    return isinstance(p, list)

def deep_reverse(list):

    o=[]
    for i in reversed(list):

        if is_list(i)==True:
            print i
            deep_reverse(i)

        o.append(i)

    return o 
```

例如：

```
p = [1, [2, 3, [4, [5, 6]]]]
print deep_reverse(p)
#>>> [[[[6, 5], 4], 3, 2], 1] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T18:57:55.853

换行

```
 deep_reverse(i) 
```

到

```
 i = deep_reverse(i) 
```

顺便说一句，编写此函数的更短的方法是：

```
def deep_reverse(lst):
    if not is_list(lst):
        return lst
    return map(deep_reverse, reversed(lst)) 
```

# svg - 如何处理没有非零数据的饼图？

> ID：14528528
> 
> 赞同：1
> 
> 时间：2013-01-25T18:54:59.680
> 
> 标签：svg, d3.js

我已经构建了一个显示许多条形图和饼图的仪表板。它还具有过滤功能。一些过滤器导致饼图没有数据，这导致我的应用程序崩溃。

它与`d3.svg.arc`. 我得到的错误是'问题解析 d="MNaN, NaN ..."。我找到了 Mike Bostock 的[这个答案](https://stackoverflow.com/a/10090745/1406664)，我认为它是相关的。

我是不是该

1.  弄清楚如何处理数据为0的情况，或者
2.  使用.exit？（我在这里的尝试给我的初始抽签带来了问题，有时也没有数据）。

# mysql - 如果条件为真，mysql插入

> ID：14528529
> 
> 赞同：0
> 
> 时间：2013-01-25T18:55:00.427
> 
> 标签：mysql, join, multiple-tables

首先，这是问题的简明摘要：

是否可以有条件地运行 INSERT 语句？类似于这样的东西：

```
IF(expression) INSERT... 
```

现在，我知道我可以使用存储过程来做到这一点。

现在，我想这样做

假设我们有以下 3 个表：

```
products: id, qty_on_hand
orders: id, product_id, qty
roomTable :id,product_id,room_number,booked_status 
```

现在，假设有 20 个房间（产品 id 2）的订单进来。我们首先从订单表中检查给定 product_id 的总数量为 total_qty 和 total_qty < qty_on_hand 如果它返回 true 然后插入订单值并在最后一次预订后更新 1 个房间_status= 'Y' room from roomTable with booking_status ='Y' 并给出那个房间的 id。

问题是我无法进行连接查询。到目前为止我做了什么-

```
 INSERT INTO orders(product_id, qty)
SELECT 2, 20 FROM products WHERE id = 2 AND qty_on_hand >= 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T20:16:38.823

For those of you who need more detail around how this technique works from Mt. Schneiders,

```
INSERT INTO orders(product_id, qty)
SELECT 2, 20 
  FROM products 
 WHERE id = 2 AND qty_on_hand >= 20 + (select sum(qty) from orders where product_id = 2) 
```

What is going on here is that the result of the select statement is hard coded. In this case we are taking INSERT INTO orders(product_id, qty) VALUES(2, 20) and replacing VALUES(2,20) with SELECT 2, 20\. The result of the SELECT is hard coded but only returns a value if the condition is met.

I found this article that explains this technique more in depth:

[http://boulderapps.co/dont-insert-when-maximum-is-reached](http://boulderapps.co/dont-insert-when-maximum-is-reached)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:05:18.263

不会是这样吗？

```
INSERT INTO orders(product_id, qty)
SELECT 2, 20 
  FROM products 
 WHERE id = 2 AND qty_on_hand >= 20 + (select sum(qty) from orders where product_id = 2) 
```

因此，如果最后一个订单数量加上正在插入的订单的数量小于或等于手头的数量，它将不会插入。

# vhdl - VHDL - 写入 FPGA 寄存器

> ID：14528540
> 
> 赞同：1
> 
> 时间：2013-01-25T18:55:36.950
> 
> 标签：vhdl, cpu-registers

我有一个带有四个按钮的 FPGA——最左边的两个按钮应该在 16 个寄存器中上下循环，而最右边的两个按钮应该增加和减少存储在这个寄存器中的值。这是我尝试执行此操作的代码：

```
entity raminfr is   --inferring the RAM here
    port (
        clk : in std_logic;
        we : in std_logic;
        a : in unsigned(3 downto 0);
        di : in unsigned(7 downto 0);
        do : out unsigned(7 downto 0)
    );
end raminfr;

architecture rtl of raminfr is

type ram_type is array (0 to 15) of unsigned(7 downto 0);
signal RAM : ram_type;
signal read_a : unsigned(3 downto 0);

begin
  U1: entity work.lab1 port map (  --ERROR ON THIS LINE
    register_counter => a,
    value_counter => di
  );
process (clk)
begin
    if rising_edge(clk) then
        if we = '1' then
            RAM(to_integer(a)) <= di;
        end if;
        read_a <= a;
    end if;
end process;
do <= RAM(to_integer(read_a));
end rtl;

--lab1 starts here
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity lab1 is 
    port(
        clock : in std_logic;
        key : in std_logic_vector(3 downto 0); 
        value_counter   : out unsigned(7 downto 0) ; --value to be written to register
        register_counter : out unsigned(3 downto 0) --register to write value to

        );
end lab1;

architecture up_and_down of lab1 is --actual button logic here
        begin
    process(clock)
        begin
            if rising_edge(clock) then
                if (key(3)='0' and key(2)='0' and key(1)='1' and key(0)='0') then
                    value_counter <= value_counter + "1";   
                elsif (key(3)='0' and key(2)='0' and key(1)='0' and key(0)='1') then  
                    value_counter <= value_counter - "1";
                elsif (key(3)='1' and key(2)='0' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter + "1";
                elsif (key(3)='0' and key(2)='1' and key(1)='0' and key(0)='0') then
                    register_counter<= register_counter - "1";
                end if;
            end if;
    end process;
end architecture up_and_down; 
```

我在上面指示的行中收到错误`Error (10577): VHDL error at DE2_TOP.vhd(312): actual port "a" of mode "in" cannot be associated with formal port "register_counter" of mode "out"`。很明显，这不是我要做我想做的事的方式。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:07:12.233

改变你的观点：将 RAM 放在 Pushbutton-FSM 下。反之亦然。

这个 RAM 描述应该是可综合的。如果没有，请查看工具供应商的综合指南。

```
entity raminfr is   --inferring the RAM here
    port (
        clk : in  std_logic;
        we  : in  std_logic;
        a   : in  unsigned(3 downto 0);
        di  : in  unsigned(7 downto 0);
        do  : out unsigned(7 downto 0)
    );
end entity raminfr;

architecture rtl of raminfr is

type ram_type is array (0 to 15) of unsigned(7 downto 0);
signal RAM : ram_type;

begin
  process (clk)
  begin
    if rising_edge(clk) then
        if we = '1' then
            RAM(to_integer(a)) <= di;
        end if;
        do <= RAM(to_integer(a));
    end if;
  end process;
end architecture rtl; 
```

您还忘记激活 RAM 的写使能。也许你试试这段代码（总是先做一个模拟！）：

```
--lab1 starts here
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity lab1 is 
  port(
    clock            : in std_logic;
    key              : in std_logic_vector(3 downto 0); 
    value_counter    : out unsigned(7 downto 0); --value to be written to register
    ram_data         : out unsigned(7 downto 0); --value from 'RAM-register'
    register_counter : out unsigned(3 downto 0) --register to write value to
  );
end lab1;

architecture up_and_down of lab1 is --actual button logic here
  signal value    : unsigned(7 downto 0) := (others => '0');
  signal ram_a    : unsigned(3 downto 0) := (others => '0');
  signal ram_we   : std_logic;

begin

  -- infer your RAM
  your_ram:  entity work.raminfr
    port map (
      clk => clock,   --: in  std_logic;
      we  => ram_we,  --: in  std_logic;
      a   => ram_a,   --: in  unsigned(3 downto 0);
      di  => value,   --: in  unsigned(7 downto 0);
      do  => ram_data --: out unsigned(7 downto 0)
    );

  process(clock)
  begin
    if rising_edge(clock) then
      -- default
      ram_we <= '0';

      -- change value
      if key(1) = '1' then
        value <= value + 1;
      end if;

      -- change value
      if key(0) = '1' then
        value <= value - 1;
      end if;

      -- change 'register'
      if key(3) = '1' then
        ram_a  <= ram_a + 1;
      end if;

      -- write value to register
      if key(2) = '1' then
        ram_we <= '1';
      end if;
    end if;
  end process;

  value_counter    <= value;
  register_counter <= ram_a;

end architecture up_and_down; 
```

# azure - 如果我有 Azure 订阅，是否需要 Windows 服务器许可证？

> ID：14528541
> 
> 赞同：2
> 
> 时间：2013-01-25T18:55:36.740
> 
> 标签：azure, licensing, virtual-server

我正在尝试对使用 Azure 进行成本分析。谁能告诉我在 Azure 中启动虚拟服务器时是否需要购买 Windows 服务器许可证。此外，用户是否需要 CALS 才能接触这些服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:06:49.120

在 Windows Azure 上运行的任何受支持的 Windows 操作系统映像都没有与之相关的许可成本，CPU 核心使用的每小时价格已包含在内。

当您直接从 Windows 操作系统库中选择基于 Windows Server 操作系统的虚拟机时，操作系统映像将在 Windows Azure 许可服务器中激活。基于 Windows 操作系统的 VHD 也是如此，您使用 Windows Server 和 Hyper-V 在本地创建，然后上传 Windows Azure。一旦您上传的操作系统映像在 Windows Azure 中运行，它也将在 Window Azure 中使用激活过程。

如果您决定在本地创建 OS 映像 VHD，则确实需要具有 Hyper-V 的许可 Windows Server OS 来创建 OS 映像，这就是您可以在成本分析中包含的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:00:17.017

无需服务器许可证。许可证包含在 VM 的每小时费用中。

# mysql - 如何使用 Codeigniter 和 MySQL 更新 TIMESTAMP？

> ID：14528555
> 
> 赞同：1
> 
> 时间：2013-01-25T18:56:27.957
> 
> 标签：mysql, codeigniter

如何使用 Codeigniter 和 MySQL 更新 TIMESTAMP？我想更新`INTERVAL 1 MINUTE` 我已经尝试了下一个代码：

```
$data = array('is_active' => $state, 
              'timestamp_demo' => "DATE_ADD(NOW(), INTERVAL 1 MINUTE)");
$this->db->where('demo_session_id', 'web');
$this->db->update('demo_session', $data); 
```

但不行。我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:13:33.013

尝试这样的查询

```
$this->db->query("UPDATE demo_session 
                  SET 
                     is_active = 1, 
                     timestamp_demo = DATE_ADD(NOW(), INTERVAL 1 MINUTE)
                  WHERE demo_session_id = 'web'"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T22:10:22.553

您可以使用您正在使用的 Active Records 执行此操作：

```
$this->db->where('demo_session_id', 'web');
$this->db->set('is_active', $state);
$this->db->set('timestamp_demo', 'DATE_ADD(NOW(), INTERVAL 1 MINUTE)', FALSE);
$this->db->update('demo_session'); 
```

中的第三个参数`$this->db->set()`防止 CodeIgniter 转义数据，因此它将使用 MySQL 函数。

它最终会是这样的：

`UPDATE 'demo_session' SET 'is_active' = $state, 'timestamp_demo' = DATE_ADD(NOW(), INTERVAL 1 MINUTE) WHERE 'demo_session_id' = 'web'`

# powershell - 如何从特定 OU 中查找 Exchange 服务器上的所有用户？

> ID：14528557
> 
> 赞同：0
> 
> 时间：2013-01-25T18:56:32.277
> 
> 标签：powershell, vbscript, exchange-server

我需要获取 Exchange 服务器上位于 Active Directory 中一个特定 OU 的所有用户的报告。有没有办法用 Powershell 或 VBS 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:22:34.107

```
Get-Mailbox -ResultSize Unlimited -OrganizationalUnit 'OU=test1,DC=domain,DC=com' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T14:05:56.973

PS cmdlet 适用于 Exchange 2007 及更高版本。以下是提取列表并将其转储到文本文件中的方法。我添加了 -IgnoreDefaultScope 句柄，以便您能够提取列表，即使有问题的 OU 位于子域中。

```
Get-Mailbox -IgnoreDefaultScope -ResultSize Unlimited -OrganizationalUnit 'OU=Staff Leavers,DC=my,DC=domain,DC=com' > C:\SysMgr\LeaverMailboxes.txt 
```

# jquery - 窗口完全加载 innerHTML 后加载 processing.js 草图？

> ID：14528558
> 
> 赞同：3
> 
> 时间：2013-01-25T18:56:36.853
> 
> 标签：jquery, processing.js

我的 processing.js 草图有一个 size() 调用，它取决于正在加载的窗口，因为它抓取了 div 的大小。50% 的情况下，草图会在 CSS 启动之前加载，因此草图的大小不合适。我认为解决此问题的最佳方法是将其加载到 window.onload 函数中，但 canvas 似乎不喜欢被 innerHTML 调用。如何根据命令将一些带有处理草图的画布泵入 div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:11:24.410

与其说画布不工作，不如说是 Processing.js 没有为画布寻找 DOM 插入来加载草图；它只对加载 DOM 内容的草图进行一般传递。由于您希望在那之后注入您的草图，您可以触发重新解析（通过调用 Processing.reload()，这将重置所有内容，因此如果您在同一页面上有其他不应该重置的草图，请不要使用它) 或者你可以打电话

```
var sourceList = ['file1.pde','file2.pde','...',...];
var canvas = document.querySelector("#mycanvas");
Processing.loadSketchFromSources(canvas, sourceList); 
```

专门针对一个草图，只要可以安全地将其注入页面。

# ruby - 将数组转换为哈希，其中键是索引

> ID：14528560
> 
> 赞同：36
> 
> 时间：2013-01-25T18:56:43.783
> 
> 标签：ruby

我正在将数组转换为哈希，其中键是索引，值是该索引处的元素。

这是我的做法

```
# initial stuff
arr = ["one", "two", "three", "four", "five"]
x = {}

# iterate and build hash as needed
arr.each_with_index {|v, i| x[i] = v}

# result
>>> {0=>"one", 1=>"two", 2=>"three", 3=>"four", 4=>"five"} 
```

有没有更好（在任何意义上的“更好”这个词）的方式来做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-25T19:00:49.957

```
arr = ["one", "two", "three", "four", "five"]

x = Hash[(0...arr.size).zip arr]
# => {0=>"one", 1=>"two", 2=>"three", 3=>"four", 4=>"five"} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-01-25T19:14:09.590

红宝石 < 2.1：

```
Hash[arr.map.with_index { |x, i| [i, x] }]
#=> {0=>"one", 1=>"two", 2=>"three", 3=>"four", 4=>"five"} 
```

红宝石 >= 2.1：

```
arr.map.with_index { |x, i| [i, x] }.to_h 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T19:46:27.433

```
x = Hash.new{|h, k| h[k] = arr[k]} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-15T22:57:36.973

```
%w[one two three four five].map.with_index(1){ |*x| x.reverse }.to_h 
```

`(1)`如果要从 开始索引，请删除`0`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-25T11:33:56.113

这是一个使用[`Object#tap`](https://ruby-doc.org/core/Object.html#method-i-tap), 将值添加到新创建的哈希的解决方案：

```
arr = ["one", "two", "three", "four", "five"]

{}.tap do |hsh|
  arr.each_with_index { |item, idx| hsh[idx] = item }
end
#=> {0=>"one", 1=>"two", 2=>"three", 3=>"four", 4=>"five"} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-23T04:47:09.207

已经有很多好的解决方案，只需添加一个变体（前提是您没有重复的值）：

```
["one", "two", "three", "four", "five"].map.with_index.to_h.invert
# => {0=>"one", 1=>"two", 2=>"three", 3=>"four", 4=>"five"} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-08T13:58:48.210

您可以使用猴子补丁`Array`来提供一种新方法：

```
class Array
  def to_assoc offset = 0
    # needs recent enough ruby version
    map.with_index(offset).to_h.invert
  end
end 
```

现在你可以这样做：

```
%w(one two three four).to_assoc(1)
# => {1=>"one", 2=>"two", 3=>"three", 4=>"four"} 
```

这是我在 Rails 应用程序中执行的常见操作，因此我将这个猴子补丁保存在初始化程序中。

# javascript - 使用javascript继承访问父类成员？

> ID：14528562
> 
> 赞同：0
> 
> 时间：2013-01-25T18:57:13.167
> 
> 标签：javascript, class, inheritance, parent, children

我需要在 javascript 中扩展一个具有附加功能的基类。我在这里使用backbone.js 继承作为示例，但这是关于扩展类的一般问题。

[http://addyosmani.github.com/backbone-fundamentals/#inheritance-mixins](http://addyosmani.github.com/backbone-fundamentals/#inheritance-mixins)

```
Parent = Backbone.View.extend({
    value: "Parent value",
    func: function(){
        alert('Parent function, ' + this.value);
    }
});

Child = Parent.extend({
    value: "Child value",
    func: function(){
        alert('Child function, ' + this.value);
    },
    test: function(){
        this.constructor.__super__.func.call(this);
        //Parent.prototype.func.call(this)
    }
});

var child = new Child();

child.test();

// prints: Parent function, Child value
// should print: Parent function, Parent value 
```

这是一个用于简化实验的[jsfiddle沙箱。](http://jsfiddle.net/GFphK/)

问题是 extend() 似乎更像接口实现而不是继承。所以 Child 仍然是 Parent，但是有额外的成员函数。“值”成员似乎是虚拟的，因此它只有一个实例，而不是每个后代一个。在 c++ 中，我可以说 Parent::func() 在里面，this->value 将是“父值”。

我已经尝试了各种 ._super 对主干.js 的扩展，但它们仍然受到“this”是 Parent 中错误上下文的影响。我也尝试过 _.bindAll() 在 Child/Parent 中的一个/两个中，但由于同样的原因它失败了：

```
initialize: function() {
    _.bindAll(this, 'func');
} 
```

1.  让“this”成为javascript中Parent中的正确上下文的最简洁方法是什么，或者至少用最少的代码模拟该功能？

2.  我是否需要在 Child 中创建一个“父”成员并实例化它以为每个后代创建“值”成员？

# c# - C# 从文件中拆分字节数组

> ID：14528563
> 
> 赞同：0
> 
> 时间：2013-01-25T18:57:16.510
> 
> 标签：c#, arrays, file, split, byte

您好我正在做一个加密算法，它从文件（任何类型）中读取字节并将它们输出到文件中。问题是我的加密程序只需要 16 个字节的块，所以如果文件更大，它必须分成 16 个块，或者如果有办法每次从文件中读取 16 个字节就可以了。

该算法适用于 16 字节的硬编码输入。加密结果必须保存在列表或数组中，因为以后必须以相同的方式对其进行解密。我无法发布我的所有程序，但这是我到目前为止在 main 中所做的并且无法获得结果

```
static void Main(String[] args)
{
    byte[] bytes = File.ReadAllBytes("path to file");
    var stream = new StreamReader(new MemoryStream(bytes));
    byte[] cipherText = new byte[16];
    byte[] decipheredText = new byte[16];

    Console.WriteLine("\nThe message is: ");
    Console.WriteLine(stream.ReadToEnd());

    AES a = new AES(keyInput);
    var list1 = new List<byte[]>();
    for (int i = 0; i < bytes.Length; i+=16)
    {
        a.Cipher(bytes, cipherText);
        list1.Add(cipherText);
    }

    Console.WriteLine("\nThe resulting ciphertext is: ");
    foreach (byte[] b in list1)
    {       
        ToBytes(b);
    }
} 
```

我知道我的循环总是从字节数组中添加前 16 个字节，但我尝试了很多方法，但没有任何效果。它不会让我索引字节数组或将项目复制到临时变量，如`temp = bytes[i]`. ToBytes 方法无关紧要，它只是将元素打印为字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:10:15.517

如果您一次只能处理一点，则无需将整个混乱读入内存...

```
var filename = @"c:\temp\foo.bin";
using(var fileStream = new FileStream(filename, FileMode.Open))
{
    var buffer = new byte[16];
    var bytesRead = 0;
    while((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        // do whatever you need to with the next 16-byte block
        Console.WriteLine("Read {0} bytes: {1}", 
                bytesRead, 
                string.Join(",", buffer));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:11:05.527

我想建议您更改`Cipher()`方法的接口：与其传递**整个数组**，不如传递**源数组和目标数组以及逐块加密的偏移量**。

伪代码如下。

```
void Cipher(byte[] source, int srcOffset, byte[] dest, int destOffset)
{
    // Cipher these bytes from (source + offset) to (source + offset + 16),
    // write the cipher to (dest + offset) to (dest + offset + 16)
    // Also I'd recommend to check that the source and dest Length is less equal to (offset + 16)!
} 
```

用法：

1.  对于**小文件**（为目标缓冲区分配一个内存，逐块加密）：

    ```
    // You can allocate the entire destination buffer before encryption!
    byte[] sourceBuffer = File.ReadAllBytes("path to file");
    byte[] destBuffer = new byte[sourceBuffer.Length];

    // Encrypt each block.
    for (int offset = 0; i < sourceBuffer.Length; offset += 16)
    {
        Cipher(sourceBuffer, offset, destBuffer, offset);
    } 
    ```

    因此，这种方法的主要优点 -**它限制了额外**的内存分配：目标数组是一次分配的。也**没有复制内存**操作。

2.  对于任何大小的文件（流、逐块加密）：

    ```
     byte[] inputBlock = new byte[16];
        byte[] outputBlock = new byte[16];
        using (var inputStream = File.OpenRead("input path"))
        using (var outputStream = File.Create("output path"))
        {
            int bytesRead;
            while ((bytesRead = inputStream.Read(inputBlock, 0, inputBlock.Length)) > 0)
            {
                if (bytesRead < 16)
                {
                    // Throw or use padding technique.
                    throw new InvalidOperationException("Read block size is not equal to 16 bytes");

                    // Fill the remaining bytes of input block with some bytes.
                    // This operation for last block is called "padding".
                    // See http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Padding
                }

                Cipher(inputBlock, 0, outputBlock, 0);
                outputStream.Write(outputBlock, 0, outputBlock.Length);
            }
        } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:04:56.223

您可以使用[Array.Copy](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)

```
byte[] temp = new byte[16];
Array.Copy(bytes, i, temp, 0, 16); 
```

# java - 使用 apache POI 创建 excel 文件以供下载

> ID：14528567
> 
> 赞同：3
> 
> 时间：2013-01-25T18:57:55.720
> 
> 标签：java, apache-poi

![在此处输入图像描述](../Images/4741348195cdf5abbac9a2d06bfce6e5.png)

我已经使用 apache poi 创建了一个 excel 文件。一切都很好。通常文件可以正常下载，但是当我直接从弹出窗口（不保存）打开文件时，有十分之一的情况下，浏览器上会显示一些完全无用的字符。

我正在使用下面给出的下载代码

```
OutputStream out = servletResponse.getOutputStream();
servletResponse.setHeader("Content-Disposition", "attachment;filename="
    + excelFileName+".xls");
servletResponse.setContentType("application/vnd.ms-excel");
excelWorkBook.write(out);
out.close(); 
```

我怎样才能让它工作？

# qooxdoo - 如何通过代理发出 JsonP 请求？

> ID：14528570
> 
> 赞同：1
> 
> 时间：2013-01-25T18:58:08.680
> 
> 标签：qooxdoo

您好，我希望[qx.data.store.JsonP](http://demo.qooxdoo.org/current/apiviewer/#qx.data.store.Jsonp)`URL`的参数通过 HTTP 代理解析。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:00:00.153

HTTP 代理在浏览器级别处理，JS 代码不处理。您可以像没有代理一样使用 JsonP 服务器的 URL。然后浏览器中的代理设置处理请求路由。它对您的代码应该是透明的。

# ruby - 打印范围内的数字

> ID：14528573
> 
> 赞同：7
> 
> 时间：2013-01-25T18:58:14.780
> 
> 标签：ruby

我正在尝试使用以下代码打印 1 到 50 之间的所有数字：

```
[1..50].each{|n|   puts n} 
```

但控制台打印

```
 [1..50] 
```

我想打印这样的东西 1 2 3 4 ... 50

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T18:58:50.083

试试下面的代码：

```
(1..50).each { |n| puts n } 
```

问题是您使用的是`[]`分隔符而不是分隔符`()`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-25T19:11:18.003

您可以`[1..10]`稍作调整使用：

```
[*1..10].each{ |i| p i } 
```

输出：

```
1
2
3
4
5
6
7
8
9
10

```

( `*`AKA "splat") 将范围“分解”为其组件，然后用于填充数组。它类似于写作`(1..10).to_a`。

你也可以这样做：

```
puts [*1..10] 
```

打印同样的东西。

所以，试试：

```
[*1..10].join(' ') # => "1 2 3 4 5 6 7 8 9 10" 
```

或者：

```
[*1..10] * ' ' # => "1 2 3 4 5 6 7 8 9 10" 
```

得到你想要的输出。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-25T19:06:09.417

这里的错误是您正在创建一个以范围作为唯一元素的 Array 对象。

```
> [1..10].size
=> 1 
```

如果要`each`在范围上调用方法，则必须将范围括在括号中，以避免在范围的最后一个元素而不是范围本身上调用该方法。

```
=> (1..10).each { |i| print i }
12345678910 
```

其他实现相同目的的方法：

```
(1..50).each { |n| print n }
1.up_to(50) { |n| print n }
50.times { |n| print n } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-25T19:13:26.087

您可以将您的范围（在括号中）转换为一个数组（[1 2 3 4 5 6...48 49 50]）并加入每个项目（例如，`' '`如果您希望所有项目都在一行中）。

```
puts (1..50).to_a.join(' ')
# => 1 2 3 4 5 6 7 ... 48 49 50 
```

# ios - iOS 消费 API 设计

> ID：14528576
> 
> 赞同：3
> 
> 时间：2013-01-25T18:58:33.580
> 
> 标签：ios, api-design

我将为 Web 应用程序开发一个 iOS 应用程序。（网络应用程序使用代码点火器）

我将创建一个 iOS 应用程序将使用的 API 服务。

我正在考虑创建一个 api 版本，这样当 web api 发生变化时，iOS 应用程序就会知道。

关注点：

*   Web 应用程序 api 更改时需要更新 iOS 应用程序（除非我保留旧 api 可用..这是一个不错的选择）
*   如果在未更新 Web 应用程序 api 时更新了 iOS 应用程序，这也会导致问题

我的 iOS 应用程序是否应该指定它需要的 api 版本？

*   如果 iOS app api 小于 web api: 显示消息: Please update iOS app
*   如果 iOS 应用 api 大于 web api：显示消息：请更新 web 应用

这是最佳实践吗？

我应该为每个版本创建一个 api 类并扩展以前的版本并在它们更改时覆盖方法吗？

例子

```
ApiV1 extends CI_Controller
{
   function list_customers(){//Code}
   function saveSale() {//Code}
}

ApiV2 extends ApiV1
{ 
   function saveSale()
   {
      //New way of saving sale
   }
} 
```

另外，如果我对 v1 api 将不再工作的数据库结构进行更改，会发生什么情况？（例如，更改了数据库表的名称？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T19:46:43.923

通常，您希望在服务 API 和客户端之间创建一个相当松散的耦合。作为一项规则，总会有多个版本的客户端总是四处飘荡，您希望尽可能少地强制用户升级。

API 版本的完整版本实际上在 Web 服务中很少见，通常只对应于对数据模型、安全模型等的重大更改。允许多个版本共存可能需要对服务进行一些额外的工作，但值得它允许现有客户继续工作。

为此，请在设计前仔细考虑您用作独立于当前客户端 UI 需求的抽象实体的“模型”。（如果您想针对您的特定情况进行更具体的思考，您可能希望发布一个关于建模您的需求的单独问题。）但是不要太担心提前永远解决所有需求，因为需求将不可避免地发生变化。

完成此操作后，请通过在服务 API 中构建一些版本控制概念来为未来做好准备。需要考虑的一些事项：

1.  作为 URL 方案的一部分的显式版本或在例如身份验证握手期间最初指定的版本。这是一种干净地命名客户端访问内容的方法。（前者会导致服务上的显式 URL 路由，后者在破解 auth 令牌后需要更多的体操来路由。）
2.  一个已知的错误响应，表示“此 API 调用已过时”，较早的客户端可以识别该响应并告诉用户他们的客户端需要更新

在服务上，您的设计可以像您注意到的那样明确，使用具有方法覆盖的控制器，但在更高级别：`saveSale`方法不太可能在版本之间表现得非常不同。似乎更有可能`saveSale`在 V1 中有一个方法来做基线的事情，然后可能会在 V2 中保存一些额外的数据。发生这种情况时，如果存在额外的数据位，代码可能只是有条件分支。所有这些都是另一种说法，即服务 API 实际上并不会经常发生不兼容的变化。`list_customers`随着时间的推移，可能会返回更多信息。这并不一定意味着您的 API 需要一个新版本，或者旧客户端不应该忽略任何他们不需要的额外信息。

回复：关于数据库表名的最后一个问题。这些可能会在内部发生变化，但您不需要将它们显式映射到客户看到的内容。API 是一个稳定的接口，理想情况下应该隐藏您不断发展的服务的实现细节。

当作为一个整体，您决定 API 需要做什么的整体情况发生了显着变化，以至于它无法和平地满足现有客户的需求时，您将选择修改 API。当您决定在服务上维护对它们的支持导致您比安装基础更令人头疼（一个非常业务/案例特定的问题）时，您将选择弃用和废弃某些客户端版本。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:05:49.263

我不知道什么是最佳实践，但是我绝对建议您的 iOS 应用程序跟踪它正在寻找的 API 版本，并专门请求该版本。例如，“/api/v1/....”的 URL。这样当你更新你的 API 时，你可以简单地将它升级到不同的版本（'/api/v2/...'，并让 iOS 应用程序单独使用 v1。显然你应该向 iOS 用户显示一条消息当存在较新版本时进行升级（可能是您响应中的元字段）。

这种方法应该允许您继续开发您的 API，而不会中断无法升级其应用程序的人员。

**更新**

还有一件事; 如果您进行的更改会使以前的版本无法运行（例如更改表名、架构等），您应该有一个 iOS 应用程序可以理解的状态代码。与消息“此 API 版本已停用”相关的内容。你必须更新'。

当 API 被弃用（即存在新版本）时，我也会推荐类似的标头（或其他东西）。显然继续提供请求的信息/操作，但是警告该版本不再受支持并且应该升级（甚至触发您的应用程序中的某些内容进行升级）可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:18:50.007

我不知道让您的 iOS 应用程序指定它所需的 api 版本是否是一种好习惯，但我认为这是一种安全的做法；但是，一个问题是，如果您经常更新您的 api，那么很快就会变得麻烦/烦人，不得不经常更新应用程序。

我会保留旧方法名称并添加具有不同名称的方法，以避免用户在更改 Web api 时必须更新到新版本的应用程序。

我不会为每个版本创建一个 api 类来扩展以前版本的 api。

我想说更改数据库结构将需要更改/更新您的 api，除非您还想保留旧版本的表名或定义或数据，这在大多数情况下是不可行/不实用/不方便的。在这种情况下，您希望您的用户更新到新的应用程序和 API。

看看[这个答案](https://stackoverflow.com/a/2306838/463478)，它指向 API 设计原则和实践的介绍。

# assembly - MASM GetTempPath 并写入注册表 - 方块？

> ID：14528578
> 
> 赞同：0
> 
> 时间：2013-01-25T18:58:44.633
> 
> 标签：assembly, masm

我正在尝试获取 Windows 临时路径并将其写入注册表，但我在注册表中得到的只是正方形？

代码：

```
tmpFilePath db 256 dup(?) 
```

获取临时路径

```
main PROC
     invoke GetTempPath, 255,addr tmpFilePath` 
```

写入注册表

```
WriteReg PROC 

    invoke RegCreateKeyExW,HKEY_CURRENT_USER,offset regkey,NULL,NULL,REG_OPTION_NON_VOLATILE,KEY_ALL_ACCESS,NULL,offset hIDKey,NULL

    .IF eax==ERROR_SUCCESS
        invoke lstrlenW,offset tmpFilePath
        add eax,eax
        add eax,2
        invoke RegSetValueExW,hIDKey,offset keyname,NULL,REG_SZ,offset buf,eax
        invoke RegCloseKey,hIDKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:08:01.253

您需要使用 GetTempPathW 以获得与 RegCreateKeyExW 兼容的文件名。

# android - 将 OnClickListener 附加到 Slidemenu

> ID：14528582
> 
> 赞同：0
> 
> 时间：2013-01-25T18:59:00.473
> 
> 标签：android, actionbarsherlock, slidingmenu

我已经在我的 android 应用程序中实现`ActionBarSherlock`了[jfeinstein10 的 Slidemenu 。](https://github.com/jfeinstein10/SlidingMenu)一切似乎都运行良好；当我将手指放在屏幕上以及按下`ABS`. 我所做的是将`ABS`项目作为所描述的库包含在内`Slidemenu`。完成此操作后，我将其`slidemenu`作为库添加到现有的 android 项目中。所以我有我的班级声明：

```
public class Home extends SlidingActivity 
```

`SlidingActivity`延伸到哪里`SherlockActivity`。所有这些都在上面的 GitHub 链接中进行了描述。

我一直在努力解决的是如何实现菜单。SlideMenu`ListView`内部应该包含一些附加了 OnClickListener 的菜单项。因此，当用户打开此幻灯片菜单时，它会显示如下菜单：

1.  家
2.  设置
3.  关于

一旦用户按下这个项目，一个新的`Activity`应该被启动。

有人可以给我一个提示或源代码我应该在哪里实现这样的逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:56:12.660

您必须将 backContent 替换为 ListFragment。这就是你将拥有一个 onClickListner 的方式。片段将处理它。

# asp.net-mvc-4 - 'PayPal.Manager.ConfigManager' 的类型初始化程序引发异常 >Paypal SetExpressCheckout

> ID：14528583
> 
> 赞同：0
> 
> 时间：2013-01-25T18:59:08.860
> 
> 标签：asp.net-mvc-4, paypal

出于某种原因，我在尝试设置 SetExpressCheckout 时收到错误“无法读取配置文件”，我已经复制了整个 Web 配置设置，但由于某种原因我无法读取它们，除了我的错误之外，该错误不是很有帮助提到过。

我正在使用 mvc4，老实说，我过去在阅读 web.config 时遇到了问题。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:22:00.083

我遇到了类似的问题，最终从 GitHub 获得了[核心](https://github.com/paypal/sdk-core-dotnet)和[商家](https://github.com/paypal/merchant-sdk-dotnet)sdk 源。将核心 sdk 中 log4net 引用的 SpecificVersion=True 更改为 False 并重新构建它。我还针对 .net 4.0 重新定位了两者，因此我参考新的核心 sdk 重新构建了商家 sdk。将这两个新的 dll 都导入到您的主项目中，您应该一切顺利。我必须在 1 处更改节处理程序的配置。

```
<section name="paypal" type="PayPal.Manager.SDKConfigHandler, PayPalCoreSDK"/> 
```

因为如果从源代码构建（相对于通过 NuGet 下载或添加），程序集名称没有下划线。

一点解释：在添加 sdk 之前，我已经在使用 log4net 1.11 版。sdk 专门寻找 1.10 版。这两个版本具有不同的公钥，因此“简单”绑定重定向不起作用。如果您引用了不同版本的 log4net（例如，使用 ninject 日志记录扩展需要最低版本 2.11，因此这 2 个 ninject 和 paypal sdk，现成不兼容）。

所以问题的根源实际上是dll版本问题引起的，但表现为配置异常。检查内部异常，看看你得到了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:43:22.313

只是看着这个......认为它可能会帮助某人。查看内部异常，发现它正在寻找 Log4Net dll ......所以我把它给了应用程序，嘿嘿。有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T10:08:00.143

好的，只是一个快速更新，我认为它必须与 MVC 有关，我创建了一个新的空 asp 项目，复制了 sdk 配置详细信息，创建了与我在 mvc 代码中相同的函数调用，并调用它从一个简单的 asp 按钮......它的工作原理？

有没有人知道为什么我在 mvc4 项目中出现错误，而不是在简单的 asp 项目中？

任何帮助或想法将不胜感激。

# php - php 和 wordpress 导致的浏览器空白和多余的行

> ID：14528586
> 
> 赞同：0
> 
> 时间：2013-01-25T18:59:12.487
> 
> 标签：php, html, wordpress, whitespace

当我在浏览器中查看网页的源代码时，我看到页面的一部分周围有很多空白区域。我似乎无法阻止这一点。下面是我正在使用的代码。

html页面中调用的函数：

```
function query_single($posttype, $poststatus, $paidvalue, $taxtype, $value) {

/* Custom Query for a state, county, or city to display dentist with a single taxonomy query. This displays the results of the loop in taxonomy-dealercity.php, taxonomy-dealerstate.php, taxonomy-dealercounty.php, taxonomy-auctioncity.php, taxonomy-auctionstate.php, taxonomy-auctioncounty.php */

global $wp_query;
$wp_query = new WP_Query();
 $args = array(
   'post_type' => $posttype,
   'post_status' => array($poststatus),
   'orderby' => 'rand', 
   'posts_per_page' => 30,
   'meta_query' => array(
      array(
          'key' => 'wpcf-paid',
          'value' => array($paidvalue),
          'compare' => 'IN',
      )
  ),
'tax_query' => array(
        array(
            'taxonomy' => $taxtype,
            'field' => 'slug',
            'terms' => $value
        )
    )
);
return $wp_query->query($args);
} 
```

带有 html 和 php 的 taxonomy-state.php 页面：

```
<div class="co7">
 <?php /*Based on type of page a custom h1 and page text is shown*/

 echo "<h1 class=\"title\">$geo_no_dash Destist - Find a Dentist in $geo_no_dash</h1>";

 echo "<p><small>Search for Dentist in $geo_no_dash with our comprehensive $geo_no_dash    Dentist catalog. Find a Dentist in $geo_no_dash by city, state, county</small></p>";?>

 <?php
 /* This function found in the themes function.php file gets dentist which are used in   the first wordpress loop which will show only paid dentist. */

query_single('dealers', 'publish', '1', $taxtype, $value);
 ?>

 <?php if (have_posts()) : ?>
 <?php while (have_posts()) : the_post(); ?>

 <?php /* Retrieve relevant dentist information with get_post_meta.  Function   get_dealer_brands gets each dentist brands via a function added in the theme function.php file.  Last section echos out dentist listings.*/

 $address=get_post_meta($post->ID, 'wpcf-street_address', TRUE); 
 $city=get_post_meta($post->ID, 'wpcf-city', TRUE); 
 $state=get_post_meta($post->ID, 'wpcf-state_abbreviation', TRUE); 
 $zip=get_post_meta($post->ID, 'wpcf-zip_code', TRUE); 
 $phone=get_post_meta($post->ID, 'wpcf-phone_number', TRUE); 
 $paid=get_post_meta($post->ID, 'wpcf-paid', TRUE);
 get_each_dealer_brand()?>

 <ul class="ullisting">
 <?php if($paid==1)
 {
echo "<li><p class=\"plisting\"><strong><a href=\"";the_permalink(); echo "\">";the_title();echo "</a></strong></p></li>";
echo "<li><p class=\"plisting\">$address | $city, $state $zip</p></li>";
echo "<li><p class=\"plisting\">P: $phone</p></li>";
    echo "<li><p class=\"listing\"><span><small>$brands_list</small></span></p></li>";
}?>
</ul> 
```

在浏览器中查看源代码时，浏览器空白在每个之间 `ul class="ullisting`，为 4 到 7 行空白。

我正在重建我的 wordpress 安装，所以我现在没有一个活生生的例子。但这是我得到的输出：

```
<pre><code>

 <!--Start Side Left Co7-->

 <div class="co7">
 <h1 class="title">Texas Dentist - Find Dentist in Texas</h1><p><small>Search for a Dentist in Texas with our comprehensive Dentist catalog.</small></p>

<ul class="ullisting">
<li><p class="plisting"><strong><a href="http://www.test.com/dealers/dentist1/">Dentist  1</a></strong></p></li><li><p class="plisting">g | g, g g</p></li><li><p class="plisting">P: h</p></li><li><p class="listing"><span><small>Gosmile</small></span> </p></li></ul>

<ul class="ullisting">
<li><p class="plisting"><strong>Dentist 2</strong></p></li><li><p class="plisting">26 main | Spring, TX 77090</p></li><li><p class="plisting">P: 7146122454</p></li><li><p class="listing"><span><small>Brightsmile</small></span></p></li></ul>

<ul class="ullisting">
<li><p class="plisting"><strong>Dentist 3</strong></p></li><li><p class="plisting">35 Main st | Houston, Tx 777090</p></li><li><p class="plisting">P: 1</p></li><li><p class="listing"><span><small>Pro Whitening</small></span></p></li></ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:06:46.203

每当您像以前一样退出 PHP 时，这些换行符都会发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:08:30.717

空白没什么大不了的。但是，如果这对您来说意义重大，请执行以下操作。更改此代码：

```
 <ul class="ullisting">
 <?php if($paid==1)
 {
echo "<li><p class=\"plisting\"><strong><a href=\"";the_permalink(); echo "\">";the_title();echo "</a></strong></p></li>";
echo "<li><p class=\"plisting\">$address | $city, $state $zip</p></li>";
echo "<li><p class=\"plisting\">P: $phone</p></li>";
    echo "<li><p class=\"listing\"><span><small>$brands_list</small></span></p></li>";
}?>
</ul> 
```

对此：

```
<?php 
echo "<ul class="ullisting">";
 if($paid==1)
 {
echo "<li><p class=\"plisting\"><strong><a href=\"";the_permalink(); echo "\">";the_title();echo "</a></strong></p></li>";
echo "<li><p class=\"plisting\">$address | $city, $state $zip</p></li>";
echo "<li><p class=\"plisting\">P: $phone</p></li>";
    echo "<li><p class=\"listing\"><span><small>$brands_list</small></span></p></li>";
}

echo "</ul>";
?> 
```

问题似乎是，既然您有一个页面，其中有纯 HTML 元素与 php 代码混合以“回显”内容，那么只需强制 PHP 回显内容，以便您知道间距符合您的喜好。

但总的来说，我忍受着这样的间距问题，因为无论如何这是编码的副作用；除非您在行距上完全强迫症，否则它永远不会是纯粹的，我认为这不值得付出努力。

# c# - 在 ActionScript 中创建的要在 C# 中使用的字节数组

> ID：14528587
> 
> 赞同：2
> 
> 时间：2013-01-25T18:59:16.043
> 
> 标签：c#, actionscript-3

我有一个应用程序要求用户通过 Flash 上传照片。Flash 然后把这张照片变成一个字节数组。这是该代码：

```
 var rect:Rectangle=new Rectangle(0,0,imageWidth,imageHeight);

// create BitmapData
var bmd:BitmapData=new BitmapData(imageWidth,imageHeight,true,0);
bmd.draw(myMovieClip);// get the image out of the MovieClip

// create byte array
var binaryData:ByteArray = new ByteArray();
binaryData.position=0;// start at the beginning
binaryData.writeBytes(bmd.getPixels(rect)); 
```

创建字节数组后，将对其进行 base64 编码并发布到包含 .ashx 处理程序的 IIS 服务器。在处理程序 ProcessRequest 方法中，以下代码用于将数据写入文件：

```
 try
  {
      // Convert from base64string to binary array and save
      byte[] contents = Convert.FromBase64String(encodedData); //encodedData is the Base64 encoded byte array from flash
      File.WriteAllBytes(fullPath, (byte[])contents);
      context.Response.Write("result=1");
  }
  catch (Exception ex) 
  { 
     context.Response.Write("errMsg=" + ex.Message + "&result=0"); 
  } 
```

到目前为止，一切都很好。到目前为止没有问题。

检索存储在文件中的字节数据并尝试在 C# 中的服务器端重新创建图像后，会出现此问题。

当我尝试以下操作时：

```
try
{
    var fileBytes = File.ReadAllBytes(path);
    Bitmap bmp;
    using (var ms = new MemoryStream(fileBytes))
    {
        ms.Position = 0;
        using (var i = Image.FromStream(ms, false, true))
        {
        bmp = new Bitmap(i);
        }
    }
}
catch (Exception ex)
{
    //error: ex.Message is always “the parameter is not valid”
} 
```

程序总是在这一行抛出消息“参数无效”</p>

```
using (var i = Image.FromStream(ms, false, true)) 
```

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:26:49.103

`BitmapData.getPixels()`只是每个像素的 32 位 uint 值 (ARGB) 的 ByteArray，您确定 C#`Image.FromStream`可以正确处理这种格式吗？作为替代方案，您可以将图像编码为 PNG 或 JPG 字节（有几个 PNG/JPG 编码器、[flex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/graphics/codec/PNGEncoder.html)版本或[as3corelib](https://github.com/mikechambers/as3corelib/tree/master/src/com/adobe/images)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:43:21.160

事实证明 fsbmain 上面是正确的。`Image.FromStream`没有能力从中获取数据`BitmapData.getPixels()`并从中创建图像。

为了回到原始图像，我需要使用`Bitmap.SetPixel()`并循环设置 ARGB 值的字节数组，如下所示：

（请注意，高度和宽度被添加到字节数组中。这就是为什么我使用`Buffer.BlockCopy`将数组拆分为我需要的部分）

```
static void Main(string[] args)
            {
                string path = @"C:\data\TUIxMTA0ODM5\imagea.b64";
                string imagepath = @"C:\data\newPic.jpg";

                try
                {
                    //get the data from the file
                    var f = File.ReadAllBytes(path);

                    //get the height and width of the image
                    var newArr = new byte[4];
                    Buffer.BlockCopy(f, 0, newArr, 0, 4);
                    var height = ReadShort(newArr, 0);
                    var width = ReadShort(newArr, 2);

                    //get the pixel data
                    var myArr = new byte[f.Length - 4];
                    Buffer.BlockCopy(f, 4, myArr, 0, f.Length - 4);

                    //create the new image
                    var bmp = new Bitmap(width, height);
                    int counter = 0;
                    for (int x = 0; x < width; x++)
                    {
                        for (int y = 0; y < height; y++)
                        {
                            bmp.SetPixel(x, y, Color.FromArgb(myArr[counter], myArr[++counter], myArr[++counter], myArr[++counter]));
                            counter++;
                        }
                    }
                    bmp.Save(imagepath, System.Drawing.Imaging.ImageFormat.Jpeg);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
            }

            public static short ReadShort(byte[] buffer, int offset)
            {
                return (short)((buffer[offset + 0] << 8) + buffer[offset + 1]);
            } 
```

我希望这有帮助。

# c - numa, mbind, 段错误

> ID：14528588
> 
> 赞同：1
> 
> 时间：2013-01-25T18:59:16.777
> 
> 标签：c, linux, numa

我已经使用 valloc 分配了内存，比方说 [15*sizeof(double)] 的数组 A。现在我把它分成三块，我想将每一块（长度为 5）绑定到三个 NUMA 节点（比如 0、1 和 2）。目前，我正在执行以下操作：

```
double* A=(double*)valloc(15*sizeof(double));

piece=5; 
nodemask=1;
mbind(&A[0],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

nodemask=2;
mbind(&A[5],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

nodemask=4;
mbind(&A[10],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE); 
```

第一个问题是我做得对吗？例如，与页面大小正确对齐是否有任何问题？目前，数组 A 的大小为 15，它运行良好，但如果我将数组大小重置为 6156000 和piece=2052000，随后对 mbind 的三个调用以 &A[0]、&A[2052000] 和 &A[4104000 ] 然后我得到一个分段错误（有时它只是挂在那里）。为什么它适用于小尺寸但对于较大的尺寸会给我带来段错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:12:18.897

为此，您需要处理至少为页面大小和页面对齐的内存块——这在大多数系统中意味着 4KB。在您的情况下，我怀疑页面被移动了两次（可能是三次），因为您调用`mbind()`了三次。

numa内存的定位方式是CPU socket 0的范围是0..X-1 MB，socket 1有X..2X-1，socket 3有2X-3X-1等等。当然，如果你坚持插槽 0 旁边有一个 4GB 的内存条，插槽 1 中有一个 16GB 的内存，那么分配不均匀。但原则仍然是，根据内存的实际位置，为每个套接字分配一大块内存。

由于内存的定位方式，您正在使用的内存的物理位置必须通过页面映射放置在线性（虚拟）地址空间中。

所以，对于大的内存“块”，可以移动它，但对于小块，它不会工作得很好——你当然不能将一个页面“拆分”成一个仿射到两个不同 CPU 的东西插座。

编辑：

要拆分数组，首先需要找到页面对齐的大小。

```
page_size = sysconf(_SC_PAGESIZE);

objs_per_page = page_size / sizeof(A[0]); 
// We should be an even number of "objects" per page. This checks that that 
// no object straddles a page-boundary
ASSERT(page_size % sizeof(A[0]));   

split_three = SIZE / 3; 

aligned_size = (split_three / objs_per_page) * objs_per_page;

remnant = SIZE - (aligned_size * 3);

piece = aligned_size;

mbind(&A[0],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

mbind(&A[aligned_size],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE);

mbind(&A[aligned_size*2 + remnant],piece*sizeof(double),MPOL_BIND,&nodemask,64,MPOL_MF_MOVE); 
```

显然，您现在需要根据需要使用对齐的大小和剩余部分类似地拆分三个线程。

# php - 有什么方法可以将小部件字段中的内容插入到模板中？

> ID：14528590
> 
> 赞同：1
> 
> 时间：2013-01-25T18:59:19.243
> 
> 标签：php, wordpress

我创建了一个自定义小部件，其中一个字段是完整的电话号码（代码中的 fulltelephone）。它的用途是侧边栏的号召性用语小部件（例如输入数字、一些文本、按钮 URL 等）。有没有办法从这个字段中获取内容（如果它填充在小部件中）并将其添加到模板的某处？我想在页脚中添加一个电话号码，但不是在页脚中硬编码它，我认为如果它可以抓住已经在号召性用语小部件中输入的号码会很好。这是可行的吗？谢谢。

这是我的小部件代码：

```
add_action( 'widgets_init', 'sidebarctawidget' );

function sidebarctawidget() {
    register_widget( 'sidebarctawidget' );
}

class sidebarctawidget extends WP_Widget {

    function sidebarctawidget() {
        $widget_ops = array( 'classname' => 'sidebarctawidget', 'description' => __('A widget for the sidebar call to actions ', 'sidebarctawidget') );

        $control_ops = array( 'width' => 300, 'height' => 350, 'id_base' => 'sidebarctawidget' );

        $this->WP_Widget( 'sidebarctawidget', __('Sidebar Call to Action', 'sidebarctawidget'), $widget_ops, $control_ops );
    }

    function widget( $args, $instance ) {
        extract( $args );

        //Our variables from the widget settings.
        $title = apply_filters('widget_title', $instance['title'] );
        $text = $instance['text'];
        $prefix = $instance['prefix'];
        $number = $instance['number'];
        $fullnumber = $instance['fullnumber'];
        $url = $instance['url'];

        echo $before_widget;
        echo '<div class="sidebarcta">';

        // Display the title
        if ( $title )
            echo $before_title . $title . $after_title;

        //Display the text
        if ( $text )
            printf( '<p class="text">' . __('%1$s', 'sidebarctawidget') . '</p>', $text );

        //Display the text
        if ( $prefix )
            printf( '<span class="prefix">' . __('%1$s-', 'sidebarctawidget') . '</span>', $prefix );

        //Display the text
        if ( $number )
            printf( '<span class="number">' . __('%1$s', 'sidebarctawidget') . '</span>', $number );

        //Display the text
        if ( $fullnumber )
            printf( '<p class="fullnumber">' . __('(%1$s)', 'sidebarctawidget') . '</p>', $fullnumber );

        //Display the button and URL
        if ( $url )
            printf( '<a class="button" href="%1$s">' . __('Learn More', 'sidebarctawidget') . '</a>', $url );

        echo '</div>';
        echo $after_widget;
    }

    //Update the widget 

    function update( $new_instance, $old_instance ) {
        $instance = $old_instance;

        //Strip tags from title and name to remove HTML
        $instance['title'] = strip_tags( $new_instance['title'] );
        $instance['text'] = strip_tags( $new_instance['text'] );
        $instance['prefix'] = strip_tags( $new_instance['prefix'] );
        $instance['number'] = strip_tags( $new_instance['number'] );
        $instance['fullnumber'] = strip_tags( $new_instance['fullnumber'] );
        $instance['url'] = strip_tags( $new_instance['url'] );

        return $instance;
    }

    function form( $instance ) {

        //Set up some default widget settings.
        $defaults = array( 'title' => __('Get Connected TODAY!', 'sidebarctawidget') );
        $instance = wp_parse_args( (array) $instance, $defaults ); ?>

        <p>
            <label for="<?php echo $this->get_field_id( 'title' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Title:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'title' ); ?>" name="<?php echo $this->get_field_name( 'title' ); ?>" value="<?php echo $instance['title']; ?>" style="width:97%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px;" />
        </p>

        <p>
            <label for="<?php echo $this->get_field_id( 'text' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Text:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'text' ); ?>" name="<?php echo $this->get_field_name( 'text' ); ?>" value="<?php echo $instance['text']; ?>" style="width:97%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px;" />
        </p>

        <p style="float: left;">
            <label for="<?php echo $this->get_field_id( 'prefix' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Telephone Prefix:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'prefix' ); ?>" name="<?php echo $this->get_field_name( 'prefix' ); ?>" value="<?php echo $instance['prefix']; ?>" style="width:50%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px; display: block;" />
        </p>

        <p>
            <label for="<?php echo $this->get_field_id( 'number' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Telephone Number:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'number' ); ?>" name="<?php echo $this->get_field_name( 'number' ); ?>" value="<?php echo $instance['number']; ?>" style="width:50%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px;" />
        </p>

        <p>
            <label for="<?php echo $this->get_field_id( 'fullnumber' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Full Number:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'fullnumber' ); ?>" name="<?php echo $this->get_field_name( 'fullnumber' ); ?>" value="<?php echo $instance['fullnumber']; ?>" style="width:97%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px;" />
        </p>

        <p>
            <label for="<?php echo $this->get_field_id( 'url' ); ?>" style="font-size: 12px; line-height: 16px;"><?php _e('Button URL:', 'sidebarctawidget'); ?></label>
            <input id="<?php echo $this->get_field_id( 'url' ); ?>" name="<?php echo $this->get_field_name( 'url' ); ?>" value="<?php echo $instance['url']; ?>" style="width:97%; border: 1px solid #dfdfdf; -webkit-border-radius: 3px; border-radius: 3px;" />
        </p>

    <?php
    }
} 
```

# c - 是否有适用于 char16_t 的 strlen()？

> ID：14528591
> 
> 赞同：9
> 
> 时间：2013-01-25T18:59:30.567
> 
> 标签：c, unicode, c11

正如问题所说：

```
typedef __CHAR16_TYPE__ char16_t; 

int main(void)
{
  static char16_t test[] = u"Hello World!\n";

  printf("Length = %d", strlen(test)); // strlen equivalent for char16_t ???

  return 0;
} 
```

我搜索并发现只有 C++ 解决方案。

我的编译器是`GCC 4.7`.

**编辑：**

为了澄清，我正在寻找一个返回计数的解决方案，而`code points`不是计数`characters`。

对于`UTF-16`包含`BMP`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:10:35.117

这是您的基本 strlen：

```
int strlen16(const char16_t* strarg)
{
   int count = 0;
   if(!strarg)
     return -1; //strarg is NULL pointer
   char16_t* str = strarg;
   while(*str)
   {
      count++;
      str++;
   }
   return count;
} 
```

这是一个更有效和流行的strlen：

```
int strlen16(const char16_t* strarg)
{
   if(!strarg)
     return -1; //strarg is NULL pointer
   char16_t* str = strarg;
   for(;*str;++str)
     ; // empty body
   return str-strarg;
} 
```

希望这可以帮助。

**警告：**这在计算 UTF-16 字符串的字符（不是代码点）时无法正常工作。当`__STDC_UTF_16__`定义为时尤其如此`1`。

UTF-16 是可变长度的（BMP 中每个字符 2 个字节或 BMP 之外每个字符 4 个字节），这些函数未涵盖。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-06T01:04:12.103

[std::char_traits](http://en.cppreference.com/w/cpp/string/char_traits)有这个。

```
#include <string>

std::char_traits<char16_t>::length(yourchar16pointerhere); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-02T13:48:53.237

```
#include <string.h>
#include <wchar.h>
#include <uchar.h>

#define char8_t char
#define strlen8 strlen
#define strlen16 strlen16
#define strlen32(s) wcslen((const wchar_t*)s)

static inline size_t strlen16(register const char16_t * string) {
    if (!string) return 0;
    register size_t len = 0;
    while(string[len++]);
    return len;
} 
```

您应该期望`char16_t`返回的字符数，而不是字节数。

优化的 32 位 Intel Atom 组装视图：

`gcc -Wpedantic -std=iso9899:2011 -g3 -O2 -MMD -faggressive-loop-optimizations -fkeep-inline-functions -march=atom -mtune=atom -fomit-frame-pointer -mssse3 -mieee-fp -mfpmath=sse -fexcess-precision=fast -mpush-args -mhard-float -fPIC ...`

```
.Ltext0:
    .p2align 4,,15
    .type   strlen16, @function
strlen16:
.LFB20:
    .cfi_startproc
.LVL0:
    mov edx, DWORD PTR 4[esp]
    xor eax, eax
    test    edx, edx
    je  .L4
    .p2align 4,,15
.L3:
.LVL1:
    lea eax, 1[eax]
.LVL2:
    cmp WORD PTR -2[edx+eax*2], 0
    jne .L3
    ret
.LVL3:
    .p2align 4,,7
    .p2align 3
.L4:
    ret
    .cfi_endproc
.LFE20:
    .size   strlen16, .-strlen16 
```

这是英特尔的反汇编：

```
static inline size_t strlen16(register const char16_t * string) {
   0:   8b 54 24 04             mov    edx,DWORD PTR [esp+0x4]
    if (!string) return 0;
   4:   31 c0                   xor    eax,eax
   6:   85 d2                   test   edx,edx
   8:   74 16                   je     20 <strlen16+0x20>
   a:   8d b6 00 00 00 00       lea    esi,[esi+0x0]
    register size_t len = 0;
    while(string[len++]);
  10:   8d 40 01                lea    eax,[eax+0x1]
  13:   66 83 7c 42 fe 00       cmp    WORD PTR [edx+eax*2-0x2],0x0
  19:   75 f5                   jne    10 <strlen16+0x10>
  1b:   c3                      ret    
  1c:   8d 74 26 00             lea    esi,[esi+eiz*1+0x0]
    return len;
}
  20:   c3                      ret    
  21:   eb 0d                   jmp    30 <AnonymousFunction0>
  23:   90                      nop
  24:   90                      nop
  25:   90                      nop
  26:   90                      nop
  27:   90                      nop
  28:   90                      nop
  29:   90                      nop
  2a:   90                      nop
  2b:   90                      nop
  2c:   90                      nop
  2d:   90                      nop
  2e:   90                      nop
  2f:   90                      nop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:15:26.720

您需要读取 2 个字节并检查它们是否都为零，因为在 unicode 中，第一个字节可以为零。

不是一个完美的解决方案（实际上是一种奇怪的解决方案）：

```
size_t strlen16(const char16_t* str16) {
    size_t result = 0;
    char* strptr = (char*) str16;
    char byte0, byte1;

    if(str16 == NULL) return result;

    byte0 = *strptr;
    byte1 = *(strptr + 1);

    while(byte0|byte1) {
        strptr += 2;
        byte0 = *strptr;
        byte1 = *(strptr + 1);
        result++;
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T19:41:07.757

On Windows, there is `wcslen()`.

Regardless of the platform, better not use char16_t. I believe it is a [blunder](http://www.utf8everywhere.org) on the part of the standard committee to have it in the language.

# c - “IP_TRANSPARENT”未在此范围内声明

> ID：14528598
> 
> 赞同：1
> 
> 时间：2013-01-25T19:00:06.637
> 
> 标签：c, sockets, setsockopt

我尝试使用 IP_TRANSPARENT 套接字选项。但是我得到“IP_TRANSPARENT”没有在这个范围内声明。如果我直接在代码中使用它的代码（19），我会得到绑定错误：“无效参数”。我应该重新编译我的内核来支持这个选项吗？如果是这样，我使用内核 2.6.32。我在内核参数界面中找不到任何选项。

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:40:14.383

如果 C 库的头文件没有定义值 19，则使用值 19 是可以的，这不是导致它返回 -EINVAL 的原因。

但是需要启用一些内核选项才能使其正常工作。引用文档（在内核源代码中，Documentation/networking/tproxy.txt）：

> 此功能为当前内核添加了类似 Linux 2.2 的透明代理支持。要使用它，请在内核配置中启用 NETFILTER_TPROXY、套接字匹配和 TPROXY 目标。您也需要策略路由，因此请务必启用它。

您可以在该文档中找到更多信息，或在此处在线阅读：[http ://www.mjmwired.net/kernel/Documentation/networking/tproxy.txt](http://www.mjmwired.net/kernel/Documentation/networking/tproxy.txt)

# amazon-ec2 - 亚马逊 ec2 中的自动缩放

> ID：14528603
> 
> 赞同：0
> 
> 时间：2013-01-25T19:00:14.013
> 
> 标签：amazon-ec2

我想知道亚马逊 ec2 中的自动缩放是如何工作的。我的意思是说我有一个巨大的请求，然后它会自动启动一个新实例。但我最初是在第一个实例中设置数据库和服务器代码。那么，它如何进入下一个实例。此外，如果我们收到一个请求，它将如何分发到新实例。我想知道这件事。我首先拥有数据库。它会在所有这些中复制，以便将相同的信息发送给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:07:31.857

您的数据库服务器不应进行负载平衡或自动缩放，除非其上的数据永远不会更改。负载平衡和自动扩展在用作可与单个数据库后端实例通信的 Web/应用服务器时效果最佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T20:06:37.950

要启用 Auto Scaling，您需要了解 Spot 队列和 Spot 请求的概念。然后创建一个负载均衡器和一个安全组。

了解这些术语后，您可以配置/实施自动缩放的过程。

# c++ - 向量，顶点和面之间的区别？

> ID：14528609
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:00:46.107
> 
> 标签：c++, winapi, math, opengl

我总是觉得这很难理解，因为它看起来很理论化。

```
glVertex(0.0f,0.0f,0.0f);
glVertex(0.0f,0.0f,-1.0f);
glVertex(-1.0f,0.0f,-1.0f);
glVertex(-1.0f,0.0f,0.0f); 
```

这是openGL中立方体的一个面。

我打开一个 obj 文件，人脸是这样存储的：

```
f 61 67 52
f 50 66 49 
```

等等等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:14:08.907

我在这里猜测，但您似乎对 obj 文件的格式感到困惑。

`f 61 67 52`实际上非常简单：它指定顶点#61、#67 和#52 在 3D 空间中形成一个三角形（一个面）。

我还要指出，您将四个 OpenGL 即时模式`glVertex`调用的序列引用为“立方体的一个面”并不是对该代码实际执行或表示的内容的特别好的描述。代码本身指定了四个 3D 顶点，这是唯一指定的信息。面的概念，或就此而言三角形（3D 图形的构建块）的概念与顶点的规范不同。

有几个原因你看不到很多人在 3D 图形中使用几何术语“脸”，它在 .obj 文件中的使用是一个例外。这是因为图形硬件设计用于对三角形进行操作：如果你想制作一个五边形的脸，你真的需要用 3 个或更多的三角形来构建它。我无法告诉你为什么会这样，`f 61 67 52`而不是`t 61 67 52`因为那样更有意义。请注意，如果您采用四个不共面的顶点，则无法从中制作出平坦的几何面！这就是为什么可以将三角形称为面的原因：任何 3 个点都是共面的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:09:04.660

*   矢量是或可以被认为是一个方向（目标位置坐标 - 您当前的位置坐标会告诉您需要去的方向）和/或只是特定 n 维空间中的坐标列表，例如（1、0、0 ) 在 3-D (x, y, z) 中。
*   顶点是空间中的一个点，可以用向量（坐标列表 (x, y, z)）来描述。
*   面是一个凸空间，它是通过将至少 3 个顶点一一连接而成的，通常是逆时针方向（这将形成一个三角形）。方向对于了解面部将面向哪一侧很重要。另一面不会被渲染。

网格中的每个面通常都有一个数字，它充当索引和一个法线向量，它显示了这个特定面的渲染侧的方向（简单地从哪里查看可能映射到这个面的纹理）。这一切都取决于如何存储网格的特定格式（obj 只是几种格式中的一种，专有程序通常有自己的封闭格式）。

# agile - When should user stories be combined and separated?

> ID：14528612
> 
> 赞同：2
> 
> 时间：2013-01-25T19:01:38.010
> 
> 标签：agile, user-stories

As a school project, we are rolling out our initial set of user stories. Should a user story record the original idea from a user, without combining them or separate them?

For example, John added that "I want to post multiple choice questions.", and Mike added that "Except multiple questions, I want to post true/false questions." David added that "I want a confirmation box before I add questions"

Do you leave those 3 user stories as it is, or you want to combine John's and Mike's as "I want to post multiple choice and true/false questions." and within this new user story a detail like "show a conformation box before clicking the add buttion"?

What do you choose?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T10:05:31.903

From User Stories Applied book (Mike Cohn), he talked about a "Good user story" which should have these characteristics:

**I.N.V.E.S.T (Independent, Negotiable, Valuable, Estimable, Small, Testable)**

Your question falls to "Independent" characteristic. The reason to combine OR separate is depending on how to make them "independent".

The reason to split/separate story cards

*   The story is bigger than one sprint
*   story combine with high and low priority sub stories

The reason to combine story card

*   When we see they have "dependency". And after combining, it's not gonna take more than 5 days to implement.
*   After combining and it would take more than 5 days, you should find another way to split the story.

About your example:

1.  I want to post multiple choice questions.
2.  I want to post true/false questions.
3.  show a conformation box before clicking the add button

In my opinion, I will leave them as 3 stories because they look independent. Even for "confirmation box", you can implement just a box with add button that can show alert box for confirmation without any questions. Three of them look valuable and independent by themselves. Anyway, Product Owner or Customer is the one who can tell you if the stories are valuable for them or not. So, after splitting or combining, you have to confirm with Product Owner to make sure the stories are still correct.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:26:26.960

I agree with Natty that I would leave them as independent stories. Just because they are related, does not mean they have the same business priority.

For example, it is entirely possible that the client decides that multiple choice questions are the highest priority, followed by true-false questions, but the confirmation box is so low on their priority scale that they would not want it implemented should budget not cover all stories in the backlog.

For this reason alone, I would keep them independent so that I could capture that business priority on each feature.

However, if I noticed that the client was always talking about them as "one story" and prioritizing them as a group, then I might consider making a combined story for prioritization purposes that would then be broken into multiple sub-stories for the development team to estimate and deliver.

# .net - 在 VS 2012 中保存/导出单元测试结果

> ID：14528619
> 
> 赞同：8
> 
> 时间：2013-01-25T19:02:00.253
> 
> 标签：.net, visual-studio-2012

如何在 VS 2012 中导出单元测试结果？我知道从来没有直接的方法来做到这一点（即使应该有），但至少在 2012 年，我能够从测试结果窗口保存结果，并使用 trx2html 将它们转换为可读的东西。在 2012 年，我从测试资源管理器中看不到任何方法可以做到这一点。单元测试结果是我们项目文档的一部分，所以我的能力很重要。

任何提示都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T07:27:39.047

在 VS2012 中使用新的执行引擎时，目前无法从 IDE 中导出结果。但是，您可以通过命令行 vstest.console.exe 使用 /logger:trx 选项来实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T13:00:10.793

1.  构建解决方案
2.  在管理员模式下运行命令提示符。
3.  转到以下路径 CD C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE
4.  键入以下命令 mstest /testcontainer:[单元测试项目 dll 文件夹路径] /resultsfile:[输出文件夹路径]\result.trx
5.  转到输出路径并检查在该路径中创建的 trx 文件。从 Visual Studio 打开此路径。 ![在此处输入图像描述](../Images/578598b8a33af9bc53d9c979bd477325.png)

# wpf - 使用 RadGridView 改善一个长单元格的视图

> ID：14528621
> 
> 赞同：0
> 
> 时间：2013-01-25T19:02:11.897
> 
> 标签：wpf, telerik-grid, radgridview

它有一个 RadGridView（WEB WPF 应用程序），对应的数据集包括一个标识符和一个描述，该描述通常太长以至于在行中无法清晰辨认。

如何修改网格，以便在选定的行可以“扩展”或显示在多行以使其更具可读性时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:55:54.963

尝试制作一个包含带有文本换行的 TextBlock 的 DataTemplate 以显示您的数据。

```
 <DataTemplate x:Key="ExpedibleCellTemplate">
            <TextBlock Text="{Binding Description}" TextWrapping="Wrap">
        </DataTemplate> 
```

然后在您的 RadGridView 中设置适当的 Column 的数据模板

```
<telerik:GridViewDataColumn CellTemplate="{StaticResource ExpedibleCellTemplate}"/> 
```

# c# - 以编程方式从 Generic.xaml 中查找资源

> ID：14528622
> 
> 赞同：4
> 
> 时间：2013-01-25T19:02:13.967
> 
> 标签：c#, wpf, xaml

我正在尝试[在 WPF & Silverlight 中实现本文中的样式绑定](http://www.wintellect.com/cs/blogs/jprosise/archive/2011/04/19/silverlight-5-s-new-style-data-binding.aspx)。

我有一个资源字典，generic.Xaml，代码如下：

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

   <ResourceDictionary.MergedDictionaries>
       <ResourceDictionary Source="/AComponent;component/Themes/MyCustomStyles.xaml" />
   </ResourceDictionary.MergedDictionaries> 
```

MyCustomStyles.xaml 的开头是这样的

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

   <t:ThemeColorProvider x:Key="ThemeProvider"/> 
```

我需要获取 ThemeProvider 的实例来更新我在 Generic.xaml 中绑定的颜色/画笔。是否可以获取键入“ThemeProvider”*的资源实例以便我可以更新它？*

如果您知道跨平台 WPF 和 Silverlight 实现，那就加分！

注意：我需要在声明 Generic.xaml 的程序集*之外获取它*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-23T14:19:30.460

如果您的资源是在 generic.xaml 中定义的或在 App.xaml 中 MergedDictionaries 中定义的任何资源，那么您需要使用 Application.Current.Resources，例如：

> BackgroundColor = (Color)Application.Current.Resources["ApplicationBarBackgroundColor"]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:15:11.210

这可能会有所帮助：

```
ThemeColorProvider value= (ThemeColorProvider)FindResource("ThemeProvider");
// update value 
```

# android - Viewpager 从 Arraylist 动态

> ID：14528625
> 
> 赞同：1
> 
> 时间：2013-01-25T19:02:24.513
> 
> 标签：android, listview, gallery, android-viewpager, android-arrayadapter

我有一个小问题；

我一直在寻找像水平列表视图这样的东西，我发现的几乎完美的是画廊，我什至让它工作了。事情是：它太旧了：P

现在我找到了一个完美的替代“Viewpager”，但我似乎无法找到一种方法来使用像 Arrayadapter 这样的东西来填充 Viewpager，比如列表视图。

有人可以帮我举个例子或给我其他我应该使用的东西吗？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:09:37.050

看看这个：[http ://spacetech.dk/android-viewpager-with-listview-pages.html](http://spacetech.dk/android-viewpager-with-listview-pages.html)

剩下要做的就是在你的布局中替换这个：

```
android:orientation="vertical" 
```

有了这个：

```
android:orientation="horizontal" 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T10:11:10.773

两路 Gridview [https://github.com/jess-anders/two-way-gridview](https://github.com/jess-anders/two-way-gridview) 最简单的。虽然 viewpager 有自己的 PagerAdapter

# c++ - 是否有任何好的工具/框架来分析 C/C++ 应用程序的性能

> ID：14528629
> 
> 赞同：1
> 
> 时间：2013-01-25T19:02:40.087
> 
> 标签：c++, c, windows, performance, profiling

我是 C/C++ 的新手，并且面临我的程序运行速度非常慢的性能问题。我想找到热点是减少我的代码的整体执行时间。在 Windows 中分析 C/C++ 应用程序的最流行和最简单的方法是什么？[使用Mini Proler](http://miniprofiler.com/ "MiniProfiler")分析 .NET 应用程序是多么容易，我感到非常惊讶。我们是否有任何类似的 C/C++ 库，可以通过最少的添加代码为我们提供高质量和可靠的结果？或者是否有任何[类似于 RedGate ANTS 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/ "ANTS 性能分析器")的工具，它还提供有关运行代码的深入信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:14:09.397

Intel 的 VTune 或 AMD 的 CodeAnalyst 都是非常好的工具。在 Linux 上，Perf 或 OProfile 会做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T20:04:40.047

在寻找分析器时，请在调试器 IDE 中运行程序并[*尝试此方法*](https://stackoverflow.com/a/378024/23771)。

一些程序员依赖它。[*这里*](http://sourceforge.net/projects/randompausedemo/)有一个如何使用它的例子。

在那个例子中，这就是发生的事情。一系列问题被发现并解决。

*   第一次迭代节省了 33% 的时间。（加速因子 1.5）

*   在剩余时间中，第二次迭代节省了 17%。（加速因子 1.2）

*   在剩余时间中，第三次迭代节省了 13%。（加速因子 1.15）

*   在剩余时间中，第四次迭代节省了 66%。（加速因子 2.95）

*   在剩余时间中，第五次迭代节省了 61%。（加速因子 2.59）

*   在剩余的时间中，第六次迭代节省了 98%。（加速因子 45.9）

所有这些大百分比的变化都不是原始时间的大百分比，但是在消除其他问题之后它们变得如此。从原始程序中节省的总时间超过 99.8%。加速是 730 倍。

大多数没有经历过这样的过程的程序都有*很大*的加速空间，但你不可能只使用分析器来实现它，因为它们所做的只是进行测量。他们并不总是向您指出您需要解决的问题，并且您错过的每个问题都会使您无法获得真正显着的加速。

换句话说，最终的加速因素是所有这些个体因素的乘积，如果其中任何一个被遗漏，它不仅会从产品中消失，还会减少以下因素。这就是为什么在性能诊断中，“足够好”还不够好。你必须找到*每一个*问题。

# algorithm - 计算 2^N 个函数的运行时间

> ID：14528633
> 
> 赞同：0
> 
> 时间：2013-01-25T19:02:55.103
> 
> 标签：algorithm

对于家庭作业，我被要求计算各种算法的运行时间。难倒我的部分是 2^N，因为 N 的大小是如此之大。

假设一个数据大小为 N=1000 的 2^N 算法需要 5 秒来执行，计算数据大小 {2000, 3000, 10000} 的运行时间

现在，根据指数除法的性质，2^2000/2^1000 = 2^1000。结果是 5.071509e+301 秒在 2000 个项目的数据集上执行。

我怎样才能为接下来的两个尺寸提供一个数字？在我使用的任何计算器中，2^2000 和 2^9000 都返回无穷大。教授的提示是2^10近似于10^3，也就是说1024近似于1000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:15:20.173

时间复杂度的函数是 f(N) = c * 2 ^N。

由于 f(1000) = 5，我们可以求解 c = 5 / 2 ^(1000)。

所以 f(N) = 5 * 2 ^(N - 1000)和 f(k * 1000) = 5 * 2 ^((k - 1)*1000)。

封锁似乎是计算 2 ^n，所以我会指导你。

我将以您的一个示例来演示该方法：

2 ^(1000) = 2 ^(10 * 100) = (2 ^(10) ) ^(100) ≈ (10 ³ ) ^(100) = 10 ^(3 * 100) = 10 ^(300) = 1e300

那是使用老师的提示，另一种更准确地计算数字的方法是：

2 ^(1000) = 10 ^(1000 * 对数[10] 2) = 10 ^(301.03) = 10 ^(0.03) * 10 ^(301) = 1.0715e301

（如您所见，更准确的方法将是近似方法的结果的 10.7 倍）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:16:48.700

显然，您还没有尝试过 WolframAlpha：

```
2^9000 = 1861919823602446870051646947443265806218680881620164150161309755333181392347475969737916885903925979688282376725245050928552019850699830936678289110574564545897808148390669479768088103164174862614314896361751492419355200744919106773071079582599147802839706215610874713577461171484389014531465527630202236883843662826326484204605969450292309212479576754101484210438029392847117393209646612418243468945316443055403112189769994194382253211069075682210324665380367163398351260390065146550963353638226230571087153090476005831034463871223599543367440127371321307935600294235235555686651194174520755709233252147269712646152398661272615394330256766919854213808655136454478279520538925315159120689449046824765276993871084725126289174642261134186532952389529497451225294280309592333118547431857834022107299493307642886550035108349812538868548204110949267007844894921304724439232280030484032946555862021618822463975371563390466476093942333021906014621095132521668771544547398222309222385454252810109269995041305909748903485123565191403462125774254093965366838199092942669763234497755795922782368415391408328615941087687168142703569478330639528167193433105543630476588701348505543567751790789117717660152741734303989082897740369036292716627460893145378475903236426283709902853825833522685221030263417298462852391838147572583018386475574242223720125609852369550108535609838296845885540331405153336504029657425852682616998765068978970510668576704757343969900471616618487531217423608126248306049345412199702325217046285213249285846153975313978242675003402962824121160875928608618335006217051712260195130737083017631349816669929159176667868417353866905513835554999462637481342721400975639504482716709384155856026263304270260886740810287158032302083388891446551907198669473320114371718138443660594911466234734942910722449045244457975320043694169261701681656148362205170532994281152576853709669767416127252738437485793910219846836498268031157261792859230067295449184914230926461991700842371010236588596679342492743911615365711320743215987995901101163306076544568626531198809370907612331483471833845958618077480217892890533116603350040147116218227928732817945323636422047507156427135297222275812678187736036773320854938458989641651199078792658709405149957007882875374868180442468709128120647047303125901843060904208622152998500617510802742432155144605848971282208131749602408191808406410632175265171306237793956570406435402345476628467209068729893134433124291187516075267594298323098487990166243403468912628117388443154921474663149036640983804471509564893426039130480070632369458141251485052936042164865777219873983089572387511794739572152294019631222145910901210840561445507713655658889336373566800391206925212386456974315749376 
```

至于提示：

2 ^(9000) = (2 ^(10) ) ^(900) ≈ (10 ³ ) ^(900) = 10 ^(2700)

考虑到您知道 2 ^(1000)的运行时间，在没有 WolframAlpha的情况下很容易确定 2 ^(10000的运行时间：)

2^(1000) => 5s
2^(10000) = 2^(1000)*2^(9000) => 5*2^(9000)s

# jquery - jQuery 删除 s 但不使用重新创建所有内容的 .html()

> ID：14528638
> 
> 赞同：3
> 
> 时间：2013-01-25T19:03:21.007
> 
> 标签：jquery

我在 CKEditor 中有很多元素，它们连接了事件，并使用 .data() 方法将数据绑定到它们。我想从这个 HTML 块中删除任何  s。我可以简单地做

```
$('body').html($('body').html().replace(/&nbsp\;/, '')); 
```

但是因为这会重置 HTML，它有效地重新创建了所有元素，这意味着我必须重新绑定所有事件和数据。我目前正在做的是这样的：

```
if ($body.html().indexOf('&nbsp;') > -1) {
    $body.find(':*:not(:has(*))').each(function(){
            // These nodes don't have any children so contain text or nothing
            $(this).html($(this).html().replace(/&nbsp\;/,''));
    });
} 
```

这将替换 HTML 中的  s，如下所示：

```
 <p>Foo&nbsp;Bar</p> 
```

但不是这样的 HTML：

```
 <div>Foo&nbsp;<span>Bar</span></div> 
```

谁能想到更好的方法来做到这一点？

谢谢，

乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:10:54.133

只需选择目标元素内的所有文本节点，然后遍历它们进行替换。

```
$("*").contents().filter(function(){
    return this.nodeType === 3;
}).each(function(){
    // do your replace here using this.nodeValue
}); 
```

如果可能，我强烈建议过滤到更小的元素子集，`'*'`并且`'body *'`可能会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:17:29.300

似乎您的第一个代码`$('body').html($('body').html().replace(/&nbsp\;/, ''));`是正确的。您只需要`g`在最后添加即可替换所有出现的事件，并确保您在文档加载时调用此函数，如此处..

`$('document').ready(function () { $('body').html($('body').html().replace(/&nbsp\;/g, '')); });`

# maps - 用谷歌地图计算街道的长度

> ID：14528642
> 
> 赞同：2
> 
> 时间：2013-01-25T19:03:45.500
> 
> 标签：maps, endpoint

我必须使用 Google Maps API 计算街道的长度。我已经搜索过“街道的起点和终点”等……没有好的解决方案。

我在示例中需要什么： 1\. 寻找“Ludwigstraße, München” 2\. 以米为单位获取这条街道的长度（英里或其他）

有没有人有一个好主意或任何其他方法来管理这个？也许有可能通过覆盖来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:25:33.220

如果您已经有了街道的起点和终点，请尝试使用 google map api 距离矩阵，该服务将返回起点和终点之间的距离。[在此处输入链接描述](https://developers.google.com/maps/documentation/distancematrix/)

# javascript - Javascript 和 Codeigniter onclick 新窗口

> ID：14528645
> 
> 赞同：0
> 
> 时间：2013-01-25T19:03:56.663
> 
> 标签：javascript, forms, codeigniter

我正在这里做某事，我有一个按钮，当您单击此按钮时，我希望在新窗口而不是新标签中打开另一个页面。

我将如何在 codeigniter 中执行此操作？

我的控制器中有这样的功能

```
function print_members(){
        $this->load->model('common_model');
        $data = $this->common_model->general();
        $data['members'] = $this->common_model->all_members();
        $this->load->view('print_members', $data);
    } 
```

当用户点击我的输入按钮时

```
<?php echo form_open('controller/print_members', array('id'=>'form', 'target' =>'_blank')); ?> 
            <input id="print" type="submit" name="print" value="Print"/>
            <? echo form_close(); ?> 
```

我基本上是在寻找在新窗口中打开“controller/print_members”功能。上面的以下代码在新选项卡中打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:23:15.860

这可以通过javascript完成

Javascript

```
<script>
function popup(){
var xhr = "<?php echo base_url('print_members')?>" /***controller url****/
popup=window.open(xhr,'print members' 'width=500,height=500');
}
</script> 
```

你可以像这样使用输入或href

```
 <input id="print" type="button" name="print" value="Print" onclick="popup()"/> 
```

或者

```
 <a href="void:javascript" onclick="popup()"/>Print </a> 
```

控制器文件没有变化

# assembly - SEG 指令在 8086 中做了什么？

> ID：14528646
> 
> 赞同：1
> 
> 时间：2013-01-25T19:04:01.937
> 
> 标签：assembly, x86-16, tasm

`SEG A`：

`Assigns the content held in segment register corresponding to the segment in which A resides to the operand.`

我想这意味着如果`A`位于数据段中，`SEG A`则与`DS`.

由于`DS`保存了数据段的基地址，所以

```
MOV AX, LEA A
MOV DX, SEG A
MOV AX, [AX + DX] 
```

复制到的物理**地址**？`A``AX`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T03:05:21.680

> 我想这意味着如果 A 位于数据段中，则 SEG A 与 DS 相同。

正确，如果 DS 指向数据段。

> MOV AX ,
> LEA A
> MOV DX, SEG A
> MOV AX, [AX + DX]
> 将A的物理地址复制到AX？

最后一条指令无效，它在任何 x86 CPU 中都不存在。因此，这段代码什么都不做。如果有的话，它只是位于一个 .asm 文件中，等待更正和组装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:09:34.630

它将AX + DX 地址（即 A）的**内容**复制到 AX。

```
MOV AX, LEA A ; Copy A offset to AX
MOV DX, SEG A ; Copy A segment to DX
MOV AX, [AX + DX] ; Copy A to AX 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T07:41:21.047

SEG 提供操作数段。如果没有段寄存器引用变量段，则可以使用 SEG。但除此之外，您应该使用 LEA、LDS。例子：

```
 .data 
```

变量数据库？.code x 分贝？

开始： ...

对于 var SEG 是 DS，对于 x SEG 是 CS，它们的段地址。

# javascript - 向 JISON 添加声明

> ID：14528648
> 
> 赞同：5
> 
> 时间：2013-01-25T19:04:09.863
> 
> 标签：javascript, parsing, parser-generator, jison

我这里有一个 JISON 计算器示例的稍微修改过的版本：

```
/* description: Parses end executes mathematical expressions. */

/* lexical grammar */
%lex
%%

\s+                   /* skip whitespace */
[0-9]+("."[0-9]+)?\b  return 'NUMBER'
"*"                   return '*'
"/"                   return '/'
"-"                   return '-'
"+"                   return '+'
"^"                   return '^'
"!"                   return '!'
"%"                   return '%'
"("                   return '('
")"                   return ')'
"PI"                  return 'PI'
"E"                   return 'E'
<<EOF>>               return 'EOF'
.                     return 'INVALID'

/lex

/* operator associations and precedence */

%left '+' '-'
%left '*' '/'
%left '^'
%right '!'
%right '%'
%left UMINUS

%start expressions

%% /* language grammar */

expressions
    : e EOF
        { typeof console !== 'undefined' ? console.log($1) : print($1);
          return $1; }
    ;

e
    : e '+' e
        {$$ = $1+$3;}
    | e '-' e
        {$$ = $1-$3;}
    | e '*' e
        {$$ = $1*$3;}
    | e '/' e
        {$$ = $1/$3;}
    | e '^' e
        {$$ = Math.pow($1, $3);}
    | e '!'
        {{
          $$ = fact($1);
        }}
    | e '%'
        {$$ = $1/100;}
    | '-' e %prec UMINUS
        {$$ = -$2;}
    | '(' e ')'
        {$$ = $2;}
    | NUMBER
        {$$ = Number(yytext);}
    | E
        {$$ = Math.E;}
    | PI
        {$$ = Math.PI;}
    ;

%%
/*why doesn't this work at runtime?
I see other examples defining declarations this way but I must be doing something wrong
I couldn't find a syntactically valid way of putting this declaration anywhere but here,
which is probably the issue*/
function fact(n) {
  var tot=1;
  for(var i=2;i<=n;++i) {
    tot*=i;
  }
  return tot;
} 
```

`!`请注意操作员定义的细微差别。我试图从外部定义`fact`函数而不是内联。

截至目前，它在运行时告诉我`fact is not defined`。我怎样才能解决这个问题？另外，为什么计算器示例在阶乘定义周围使用两个大括号`{{ /*like so*/ }}`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:55:01.217

要调用在您的产品下定义的函数（例如`fact`），您可以使用 mod-brace 符号`%{`和`%}`多行语义操作：

```
e
    : e '+' e

    ...

    | e '!'
        %{
            // the %{ tells jison this is a multi-line js eval statement
            $$ = fact($1);
        %}
    ; 
```

作为最终解决方案，试试这个：

```
/* lexical grammar */
%lex
%%

\s+                   /* skip whitespace */
[0-9]+("."[0-9]+)?\b  return 'NUMBER'
"*"                   return '*'
"/"                   return '/'
"-"                   return '-'
"+"                   return '+'
"^"                   return '^'
"!"                   return '!'
"%"                   return '%'
"("                   return '('
")"                   return ')'
"PI"                  return 'PI'
"E"                   return 'E'
<<EOF>>               return 'EOF'
.                     return 'INVALID'

/lex

/* operator associations and precedence */

%left '+' '-'
%left '*' '/'
%left '^'
%right '!'
%right '%'
%left UMINUS

%start expressions

%% /* language grammar */

expressions
    : e EOF
        %{
            typeof console !== 'undefined' ? console.log($1) : print($1);
            return $1;
        %}
    ;

e
    : e '+' e
        {$$ = $1+$3;}
    | e '-' e
        {$$ = $1-$3;}
    | e '*' e
        {$$ = $1*$3;}
    | e '/' e
        {$$ = $1/$3;}
    | e '^' e
        {$$ = Math.pow($1, $3);}
    | e '!'
        %{
          $$ = fact($1);
        %}
    | e '%'
        {$$ = $1/100;}
    | '-' e %prec UMINUS
        {$$ = -$2;}
    | '(' e ')'
        {$$ = $2;}
    | NUMBER
        {$$ = Number(yytext);}
    | E
        {$$ = Math.E;}
    | PI
        {$$ = Math.PI;}
    ;

%%

function fact(n) {
  var tot=1;
  for(var i=2;i<=n;++i) {
    tot*=i;
  }
  return tot;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-15T23:31:41.740

正如@Nucleon 和@chaosbohne 所指出的，接受的答案是不正确的。

直接来自 Jison wiki ( [https://github.com/zaach/jison/wiki/Deviations-From-Flex-Bison](https://github.com/zaach/jison/wiki/Deviations-From-Flex-Bison) )

如果您想使用块式语句，则在**词法分析器操作中使用 %{ ... %} 分隔符，例如：**

```
.*  %{
  if (true) {
    console.log('test');
  }
  // ...
%} 
```

在**解析器操作**中，出于相同目的使用 {{ .. }} 分隔符。

因此，如果您在词法分析器中，对于多行操作，请使用`%{ action %}`. 在解析器中，对于多行操作，使用`{{ action }}`. 如果您正在编写单行操作，则单大括号`{}`在词法分析器和解析器中可以正常工作。

# backbone.js - 在主干关系中，我如何使 add:* 事件在 fetch() 上静音

> ID：14528651
> 
> 赞同：2
> 
> 时间：2013-01-25T19:04:24.260
> 
> 标签：backbone.js, backbone-relational

当我使用主干在我的模型中加载时，`.fetch()`Backbone Relational 会为它添加的每个问题触发一个 add:survey_question（这与`survey_questions`通过 .add() 将某些内容加载到我的集合中会发生的情况相同。更糟糕的是，add:survey_questions 不会' 尊重`comparator`我的survey_questions 收藏。

我想要一种方法来使发生的 add:survey_questions 静音

侦听调查模型 (SurveyBuilder) 和问题模型（嵌入在 SurveyQuestion 模型中）上的所有事件时的 Console.log 输出

```
//START of .fetch() on the Survey Model
SurveyBuilder 
["relational:change:survey_questions", child, Array[3], Object]
 app.js:25338
SurveyBuilder 
["add:survey_questions", child, child, Object]
 app.js:25338
Question 
["add:survey_question", child, Backbone.Collection, Object]
 app.js:25575
SurveyBuilder 
["add:survey_questions", child, child, Object]
 app.js:25338
Question 
["add:survey_question", child, Backbone.Collection, Object]
 app.js:25575
SurveyBuilder 
["add:survey_questions", child, child, Object]
 app.js:25338
Question 
["add:survey_question", child, Backbone.Collection, Object]
 app.js:25575
SurveyBuilder 
["sync", child, Object, Object]
 app.js:25338

//START OF Manual .add()
SurveyBuilder 
["add:survey_questions", child, child, Object]
 app.js:25338
SurveyQuestion 
["change:question_number", child, 4, undefined]
 app.js:25578
SurveyQuestion 
["change", child, undefined]
 app.js:25578 
```

这是我的模型：

```
m.Question = m.BaseModel.extend({
    urlRoot: '/api/questions',

    initialize: function(){
        if(this['type']) {
            this.set('type', this['type']);
        } else if(this.get('type')) {
            this.type = this.get('type');
        }

        m.BaseModel.prototype.initialize.apply(this, arguments);
    },

    defaults: {
        question_text: '',
        question_number: 1,
        comment_field: true
    },
    calculateProperties: function(){
        return {
            'question_id': this.getID()
        };
    },
    subModelTypes: {
        'Numeric': 'APP.Models.NumericQuestion',
        'MultipleChoice': 'APP.Models.MultipleChoiceQuestion',
        'Checkboxes': 'APP.Models.CheckboxesQuestion',
        'FreeText': 'APP.Models.FreeTextQuestion',
        'TimePeriod': 'APP.Models.TimePeriodQuestions',
        'Sorting': 'APP.Models.SortingQuestion',
        'Grading': 'APP.Models.GradingQuestion',
        'Slider': 'APP.Models.SliderQuestion',
        'AgreeDisagree': 'APP.Models.AgreeDisagreeQuestion',
        'YesNo': 'APP.Models.YesNoQuestion'
    }
});

m.SurveyQuestion = m.BaseModel.extend({
    defaults: {
        'question_number': 1
    },
    relations: [{
        type: Backbone.HasOne,
        key: 'question',
        relatedModel: 'APP.Models.Question',
        includeInJSON: '_id',
        reverseRelation: {
            type: Backbone.HasMany,
            key: 'survey_question',
            includeInJSON: false
        }
    }]
});

m.Survey = m.BaseModel.extend({
    urlRoot: '/api/surveys',
    defaults: {
        start_date: moment().format('YYYY-MM-DD'),
        end_date: moment().add('weeks', 3).format('YYYY-MM-DD'),
        title: moment().format('MMMM') + ' Economist Survey'
    },
    relations: [{
        type: Backbone.HasMany,
        key: 'survey_questions',
        relatedModel: 'APP.Models.SurveyQuestion',
        collectionType: 'APP.Collections.SurveyQuestions',
        includeInJSON: true,
        reverseRelation: {
            key: 'survey',
            includeInJSON: true
        }
    }]
}); 
```

# apache-flex - 具有可变彩色线条的 flex 折线图

> ID：14528652
> 
> 赞同：2
> 
> 时间：2013-01-25T19:04:30.943
> 
> 标签：apache-flex, flexbuilder, linechart

我有一个相当简单的需要来创建一个折线图。我要绘制的数据基于单个每日数据点。xml数据示例：

```
<?xml version="1.0"?>
<dataset>
    <data>
        <date>01/14/2013</date>
        <number>80.6</number>
        <indication>G</indication>
    </data>
    <data>
        <date>01/15/2013</date>
        <number>74.6</number>
        <indication>A</indication>
    </data>
    <data>
        <date>01/21/2013</date>
        <number>79.4</number>
        <indication>G</indication>
    </data>
    <data>
        <date>01/22/2013</date>
        <number>67.7</number>
        <indication>A</indication>
    </data>
</dataset> 
```

诀窍是我想根据指示值更改绘制的线条颜色。

换句话说，如果我的第一个点在 2013 年 1 月 14 日，我希望该点和下一个点之间的线的颜色基于指示，因此上面的示例数据将是琥珀色。然后从第二个点到第三个果岭，再从第三个点到第四个琥珀色。

我真的很喜欢 amstock 图表，但它们似乎缺少此功能。

有没有人见过任何能够做到这一点的组件，或者知道如何使用默认的 flex 4.6 组件来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:18:09.797

我有个想法，希望对你有帮助。

您可以处理您的数据集并从中形成一个新数据集，以便每两个点代表一个折线图段的单个数据源。

然后，您浏览所有细分并将它们单独添加到图表中。

![在此处输入图像描述](../Images/a9bc138e0a7240ee0a16e368a18d01ea.png)

您需要两个类来保存有关“点”和“部分”的信息

//部分.as

```
public class Part
{
    public var col:Number;
    public var punkts:ArrayCollection;
} 
```

//Punkt.as

```
public class Punkt
{
    public var date:String;
    public var number:Number;

    public function Punkt(date:String, number:Number)
    {
        this.date = date;
        this.number = number;
    }
} 
```

//这是你的应用程序

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" 
           creationComplete="init()">

<fx:Declarations>
    <fx:Model id="myData">
        <dataset>
            <data>
                <date>01/14/2013</date>
                <number>80.6</number>
                <indication>G</indication>
            </data>
            <data>
                <date>01/15/2013</date>
                <number>74.6</number>
                <indication>A</indication>
            </data>
            <data>
                <date>01/21/2013</date>
                <number>79.4</number>
                <indication>G</indication>
            </data>
            <data>
                <date>01/22/2013</date>
                <number>67.7</number>
                <indication>G</indication>
            </data>
            <data>
                <date>01/24/2013</date>
                <number>47.7</number>
                <indication>A</indication>
            </data>
            <data>
                <date>01/25/2013</date>
                <number>87.7</number>
                <indication>G</indication>
            </data>
        </dataset>
    </fx:Model>
</fx:Declarations>

<fx:Script>
    <![CDATA[
        import com.Part;
        import com.Punkt;

        import mx.charts.series.LineSeries;
        import mx.collections.ArrayCollection;
        import mx.graphics.SolidColorStroke;
        import mx.graphics.Stroke;
        import mx.utils.ObjectProxy;

        [Bindable]private var xAxis:ArrayCollection = new ArrayCollection();
        [Bindable]private var dp:ArrayCollection = new ArrayCollection();

        private function init():void
        {
            var prevCol:Number = 0x000000;

            var len:int = myData.data.length;
            var item:ObjectProxy;
            var i:int;

            for (i = 0; i < len; i++)
            {
                item = myData.data[i];
                xAxis.addItem(item.date);
            }

            for (i = 0; i < len - 1; i++)
            {
                item = myData.data[i];
                var part:Part = new Part();

                switch (item.indication)
                {
                    case "A":
                        part.col = 0xe48701;
                        break;
                    case "G":
                        part.col = 0xa5bc4e;
                        break;
                }

                part.punkts = new ArrayCollection();

                part.punkts.addItem(new Punkt(item.date, item.number));

                item = myData.data[i + 1];
                part.punkts.addItem(new Punkt(item.date, item.number));

                dp.addItem(part);
            }

            var mySeries:Array=new Array();

            for each (var part:Part in dp)
            {
                var lineSeries:LineSeries = new LineSeries();
                lineSeries.dataProvider = part.punkts;
                lineSeries.xField = "date";
                lineSeries.yField = "number";

                lineSeries.setStyle('lineStroke', new SolidColorStroke(part.col, 3, 1));

                mySeries.push(lineSeries);
            }

            lc.series = mySeries;
        }

    ]]>
</fx:Script>

<mx:LineChart id="lc" x="184" y="55">
    <mx:horizontalAxis>
        <mx:CategoryAxis dataProvider="{xAxis}"/>
    </mx:horizontalAxis>
</mx:LineChart>

</s:Application> 
```

# vim - 有没有更好的方法在 Vim 中创建一行字符？

> ID：14528653
> 
> 赞同：1
> 
> 时间：2013-01-25T19:04:50.627
> 
> 标签：vim, replace

> **可能重复：**
> [如何在 vim 中快速输入“==========”之类的行](https://stackoverflow.com/questions/6978462/how-can-i-a-put-a-line-like-quickly-in-vim)

## 编辑

原来这个问题与[我如何在 vim 中快速输入类似“==========”这样的行](https://stackoverflow.com/q/6978462/344286)完全相同- 但是那个标题没有这么好...

* * *

编辑markdown样式文件时，我喜欢

```
Some heading
------------

Notice the line matches the length of the heading? 
```

目前我做：

```
yyp:s/./-/g 
```

但我想知道是否有更好的（更少的击键）方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:31:57.080

正如我刚刚发现的那样，您可以少敲几下键：

`yypVr-`- 7，如果你包括 shift 键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T19:32:10.243

我不是 Vim 专家，但在任何文本编辑器中创建和使用宏都可以帮助我减少击键次数。

在正常模式下，将光标放在要下划线的行上，开始将宏录制到缓冲区（在本例中为 a）

```
q a <enter> 
```

现在，执行上述命令。在这种情况下，我通过在一系列“-”字符之后插入一个新行来完成。在离开插入模式之前再次按 q 完成。

```
yyp:s/./-/gA<enter><esc>q 
```

要为您可能拥有的任何标题添加下划线，请在正常模式下将光标放在该行上，然后键入：

```
@a<enter> 
```

**击键**
之前：18
之后：3
节省：***15！***

AFAIK 缓冲区可以分配给 'a' 到 'z'

快乐 Vimming

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:57:31.473

我已将以下代码添加到我`~/.vimrc`的创建这样的标题中。我所做的只是`ch=`在一行上执行，它会在下面创建一个用`=`'s 填充的行。您也可以轻松`ch-`地创建`-`'s 的标题行。

```
"""" CreateHeaderLine
" Easily create heading mapping
" The following line is an example
" ================================
" mnemonic ch: create header
nnoremap <silent> ch :call CreateHeaderLine('ch' ,'.')<cr>
nnoremap <silent> cH :call CreateHeaderLine('cH', '-')<cr>

function! CreateHeaderLine(mapping, address)
  let c = nr2char(getchar())
  exe 't ' . a:address
  exe "norm! v$r" . c
  silent! call repeat#set(a:mapping . c)
endfunction 
```

# google-apps-script - 添加更多代码后，Google Apps 脚本随机产生错误消息“发生意外错误”

> ID：14528655
> 
> 赞同：3
> 
> 时间：2013-01-25T19:04:56.220
> 
> 标签：google-apps-script

我编写了一个 Google Apps Script UiApp 应用程序，其中包含近 1000 行代码以及相当数量的处理程序和回调。该应用程序运行良好，但随着代码的增长，该应用程序突然收到很多“发生意外错误”的消息。错误消息在应用程序加载时出现并且是间歇性的。我可以尝试一分钟的应用程序并得到错误。然后刷新，错误消失。再次刷新，错误很可能再次出现。它们出现在测试和生产网址中。

因为错误是随机的，我无法将其追踪到任何特定的代码行，是否存在可能导致此问题的处理限制？Google Apps 对行、小部件或处理程序有限制吗？如果是这样，这些错误是否会导致这些错误？有没有办法增加限制？我能做些什么来追踪这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:13:43.463

是的，Google Apps 脚本引擎在您可以进行的回调数量、执行脚本所花费的时间等方面存在各种限制。我们的经验是您应该保持代码尽可能小尽可能将可能需要很长时间的东西模块化。如果您将代码与电子表格结合使用，请将电子表格用作存储中间步骤结果的容器，并将您的代码分解为多个脚本，这些脚本在完成后将相互调用。它会使你的代码更复杂，但它会更可靠地工作。如果您的代码正在执行 Google Apps 脚本从未设计过的事情，请将代码移到 Google App Engine 或其他容器中（尤其是在您需要服务器端 JavaScript 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:48:20.573

通常，“发生意外错误”消息归因于您的处理程序尝试使用尚未创建并添加到您的应用程序的元素。例如，如果您尝试在某个面板上运行一个处理程序，该面板很可能存在于您的代码中某个函数的某个位置，如果面板尚未创建，您将收到意外错误。

遵循代码中的操作和函数流，查看是否尝试在某个元素上执行某项操作，该元素可能存在于某处的函数中，但尚未添加到您的应用程序中。

此外，如果您尝试通过“.forTargets(app.getElementById('myElement'))”处理具有 Id 的元素，请仔细检查 Id 的名称。如果名称错误，您也会收到该错误。

虫子挤压可能是一种耗时的、令人毛骨悚然的体验！当您的代码开始变成意大利面条式代码时，这些错误往往会突然出现。您可能必须返回并重新设计和重新编写以清理内容。

# java - 奇怪的 BufferStrategy 问题 - 游戏仅在 Intel GPU 上运行快速

> ID：14528657
> 
> 赞同：26
> 
> 时间：2013-01-25T19:04:57.533
> 
> 标签：java, performance, buffer, intel

我遇到了一个非常奇怪的问题，我试图寻找答案几天和几天。我的游戏刚刚有了一个新的粒子系统，但速度太慢而无法播放。不幸的是，BufferedImage 转换非常缓慢。爆炸效果由大约 200 个从 .png 文件加载的白色精灵组成，它们随机旋转、缩放和着色，以随机速度移动。

我试图通过三重/双缓冲来提高性能，但遇到了一些问题。

我的第一次尝试是使用 JPanel 绘制游戏。我在 JFrame 的类 (Main) 中设置了缓冲区，然后在 Game (extends JPanel) 类中完成了绘图，但是没有 Graphics g = bufferstrategy.getDrawGraphics();。然后，在绘图方法结束时，如果缓冲区没有丢失，我会显示它。缓冲区总是“丢失”，因为我没有使用它的 Graphics 对象进行绘图。但！游戏跑得飞快！实际使用中无缓冲！但是怎么做？

这次尝试最终没有出现图形错误，并且性能得到了巨大的提升——但仅限于 nVidia / AMD 卡。英特尔 GPU 无法处理此问题，屏幕呈白色闪烁。

所以，我最终正确设置和使用了 BufferStrategy。Game 类现在扩展了 Canvas，而不是 JPanel，因为从 JFrame 中获取 Graphics，并使用它在 JPanel 上绘制以偏移结束，因为它在标题栏下绘制。仍然很快，修复 60 FPS。

现在，当我在 JFrame（主类）中创建 BufferStrategy 时，根本没有图片。我通过在 Game 类（Canvas）中设置 BufferStrategy 来纠正这个问题。现在画面是正确的，但是游戏本身就像蜗牛一样慢。一次爆炸将 FPS 降至约 10，但仅限于 nVidia / AMD。讽刺。即使是旧的英特尔 GPU 也能以 60 FPS 的速度处理它，我设法在 5-6 年的集成英特尔 GPU 上以 60 FPS 的速度让 10000 个粒子运动。发生爆炸时，我的卡负载高达 100%。

这是我的主要代码（整个代码不清楚而且很长）：

```
public class Game extends Canvas {
 -snip-
 public void tick() {
    BufferStrategy bf = getBufferStrategy();
    Graphics g = null;
    try {
        g = bf.getDrawGraphics();
        paint(g);
    } finally {
        g.dispose();
    }
    if (!bf.contentsLost()) {
        bf.show();
    } else {
        System.err.println("Buffer lost!");
    }
    Toolkit.getDefaultToolkit().sync();
 }
 public void setBuffers() {
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gs = ge.getDefaultScreenDevice();
    GraphicsConfiguration gc = gs.getDefaultConfiguration();

    if (gc.getBufferCapabilities().isMultiBufferAvailable()) {
        createBufferStrategy(3);
        System.out.println("Triple buffering active");
    } else {
        createBufferStrategy(2);
        System.err.println("Triple buffering not supported by the GPU");
        System.out.println("Double buffering active");
    }
    System.out.println("FullScreen required: " + getBufferStrategy().getCapabilities().isFullScreenRequired());
    System.out.println("Page flipping: " + getBufferStrategy().getCapabilities().isPageFlipping());
 }
 public void paint(Graphics g) {
    super.paint(g);
    //set up RenderingHints, draw stuff
 }
 -snip snip-
} 
```

当然，我会在游戏开始后立即调用 setBuffers()。

我希望你能帮助我，这个问题非常重要，因为我认为使用 VolatileImage 不会提高性能，因为图像处理需要使用 BufferedImage 来完成。我敢打赌我错过了一些微不足道的事情，或者做错了事情。

这是我的计算机规格，只是为了表明这不是硬件问题：Intel Core i7-3770k @ 4.3GHz，nVidia GTX 460，12 GB ram

“快速”计算机：Intel Core 2 Duo @ 2.7 GHz，集成 Intel 显卡，2 GB 内存

感谢您的帮助和时间！:)

**编辑** VolatileImage 有帮助吗？如果我没看错的话，必须使用 BufferedImages 来处理图像，但绘制它们的速度很慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:54:22.003

这里有几件事要检查：

* * *

在不知道 setBuffers 函数的控制台/错误输出的情况下，很难分辨。英特尔是否使用 createBufferStrategy(2)；而 NV 使用 createBufferStrategy(3)；? 如果是这样，那可能是它使用额外内存的问题的一部分。

* * *

你试过 java2d System.properties 了吗？[http://docs.oracle.com/javase/1.5.0/docs/guide/2d/flags.html](http://docs.oracle.com/javase/1.5.0/docs/guide/2d/flags.html)特别是用于调试的跟踪属性。

仅限 Windows

```
System.setProperty("sun.java2d.transaccel", "True");
System.setProperty("sun.java2d.d3d", "True");
System.setProperty("sun.java2d.ddforcevram", "True"); 
```

所有平台

```
System.setProperty("sun.java2d.opengl", "True"); 
```

用于调试

```
System.setProperty("sun.java2d.trace", "timestamp,log,count");
//// -Dsun.java2d.trace=[log[,timestamp]],[count],[out:<filename>],[help],[verbose] 
```

* * *

Toolkit.getDefaultToolkit().sync(); 实际上并不强制监控 VSync，这是由 BufferCapabilities（在您的 setBuffers 函数中）完成的。

```
 BufferStrategy bf = getBufferStrategy();
    if (bf != null) {
        BufferCapabilities caps = bf.getCapabilities();
        try {
            Class ebcClass = Class.forName(
                "sun.java2d.pipe.hw.ExtendedBufferCapabilities");
            Class vstClass = Class.forName(
                "sun.java2d.pipe.hw.ExtendedBufferCapabilities$VSyncType");

            Constructor ebcConstructor = ebcClass.getConstructor(
                new Class[] { BufferCapabilities.class, vstClass });
            Object vSyncType = vstClass.getField("VSYNC_ON").get(null);

            BufferCapabilities newCaps = (BufferCapabilities)ebcConstructor.newInstance(
                new Object[] { caps, vSyncType });

            createBufferStrategy(2, newCaps);

            // TODO: if success, setCanChangeRefreshRate(false) and setRefreshRate(60). 
            // Possibly override refreshRateSync()?
        }
        catch (Throwable t) {
            // Ignore
            t.printStackTrace();
        }
    } 
```

**编辑**此代码来自（[http://pulpcore.googlecode.com/hg-history/3c4001969922b93048e0a166395115df059a2059/src/pulpcore/platform/applet/BufferStrategySurface.java](http://pulpcore.googlecode.com/hg-history/3c4001969922b93048e0a166395115df059a2059/src/pulpcore/platform/applet/BufferStrategySurface.java)）

此外，您应该在 Canvas 构造函数运行并将其添加到 JFrame 之后调用 setBuffers。

* * *

我“相对确定”你不需要调用 super.paint(g); 我不知道它是否是导致您的特定问题的原因，但您应该从您的绘画功能中删除该行。

* * *

尽管您没有显示代码，但您使用 200 个随机移动的精灵的爆炸机制可能是导致错误的主要原因。计算出您希望一次在屏幕上发生的最大爆炸次数，并事先生成这些精灵 N * 200，将它们放入数组列表 ArrayList(N) 中，然后在您的代码中循环引用它们。ExplosionClass = explodeList.get(currentExplosionIndex % explodeList.size());

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:05:08.473

检查与缓存相比的图片大小，并尝试诊断缓存未命中的数量。阅读面向数据的设计，它通常是其中的一部分。

另一种方法是将你进行爆炸的方式更改为不加载 200 个精灵并将它们分散开的方式（你是重复使用它们，还是每次爆炸时都加载它们？）。制作动画爆炸需要较少的能量，尽管它可能没有那么壮观，然后你需要做一些动画。

Java 也不是制作游戏的最佳语言。你的工作水平很高，JVM 让事情变慢了一点。我的朋友在制作小游戏时也遇到过类似的问题，很难做出不卡顿的游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:01:46.100

当您将内容发送到 GPU 时，GPU 会从 GDRAM 中读取信息。如果您通过调用 getDrawGraphics 将数据读入内存，则内存可能会从显卡读回 RAM。CPU 只能访问 RAM (DRAM)，GPU 只能访问 GDRAM。然而，对于板载 GPU，这是不同的，因为它们没有自己的 RAM，它们使用常规 RAM 的一部分。

要返回使您的代码快速运行，请确定您拥有的硬件，然后相应地调用适当的方法（代码更改之前的方法或之后的方法）。

# google-maps - 从谷歌地球获取海拔数据

> ID：14528663
> 
> 赞同：2
> 
> 时间：2013-01-25T19:05:20.333
> 
> 标签：google-maps, kml, google-earth

鉴于它们的纬度和经度，我正在尝试获取某些点的高度。在 Google 地球中有没有 api 可以做到这一点？我需要处理大量数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T20:57:54.580

Google 为每天最多 25k 个请求提供海拔 API：[https ://developers.google.com/maps/documentation/elevation/](https://developers.google.com/maps/documentation/elevation/)

这里还讨论了其他选项：[如何通过 lat/lng 查找高程数据](https://stackoverflow.com/questions/1090534/how-to-look-up-elevation-data-by-lat-lng)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T04:17:33.307

如果您有电子表格形式的数据，您可以将其输入 GPS Visualizer ( [http://www.gpsvisualizer.com/convert_input](http://www.gpsvisualizer.com/convert_input) ) 并选择“添加 DEM 高程数据”，它将返回带有高程的文本文件列中的数据。

# jsf-2 - primefaces p:rowEdit 级联 selectoneMenu

> ID：14528665
> 
> 赞同：0
> 
> 时间：2013-01-25T19:05:21.553
> 
> 标签：jsf-2, primefaces, cdi

我有一个显示部门名称和角色名称的 Office 数据表。部门和角色是对象。当我选择rowedit时，当部门发生变化时，应该重新加载角色。我不确定如何通过所选部门并重新呈现角色。

```
<p:column headerText="Department">     
   <p:cellEditor>  
       <f:facet name="output"><h:outputText value="#{office.department.name}" /></f:facet>  
       <f:facet name="input">
         <p:selectOneMenu value="#{office.department}" converter="#{departmentConverter}" style="width:96%" >   
           <f:selectItems value="#{departments}" var="dept" itemLabel="#{dept.name}" itemValue="#{dept}"/>  
           <p:ajax event="change"  listener="#{officeManagmentController.onDepartmentChanged()}"/>
         </p:selectOneMenu>
       </f:facet>
   </p:cellEditor> 
</p:column>  

<p:column headerText="Role">     
   <p:cellEditor>  
       <f:facet name="output"><h:outputText value="#{office.role.name}" /></f:facet>  
       <f:facet name="input">
         <p:selectOneMenu value="#{office.role}" converter="#{roleConverter}" style="width:96%" >   
           <f:selectItems value="#{officeManagementController.assignableRoles}" var="role" itemLabel="#{role.name}" itemValue="#{role}"/>  
         </p:selectOneMenu>
       </f:facet>
   </p:cellEditor> 
</p:column> 
```

以下是我的officecontroller managedbean

```
@ConversationScoped

public class OfficeManagementController implements Serializable {

    public void onRowSelect(SelectEvent event) {  
        FacesMessage msg = new FacesMessage(selectedOffice.getName()+" selected"); 
        selectedDepartment=selectedOffice.getDepartment();
        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }  

    public void onDepartmentChanged() {

        if(selectedOffice!=null)selectedSystem=selectedOffice.getDepartment();
        log.info("Calling onDepartmentChanged " + ((selectedDepartment != null) ? selectedDepartment.getName() : "null"));
        if(selectedDepartment != null) {
            assignableRoles = roleRepo.findByDepartment(selectedDepartment);
            for(int i=0;i<assignableRoles.size();i++){
                System.out.println(assignableRoles.get(i));
            }

        } else {
            assignableRoles=null;
        }
    }
} 
```

我注意到在 onDepartmentChanged() 方法中 selectedOffice 为 null，但在 onrowselect 中，该值不为 null。我没有比这更进一步。当部门发生变化时，我必须动态地改变角色。为什么 selectedOffice 为空？

# d3.js - 绘制布朗克斯的地图 - d3.geo.path()

> ID：14528666
> 
> 赞同：0
> 
> 时间：2013-01-25T19:05:22.483
> 
> 标签：d3.js

尝试获取布朗克斯邮政编码的 GIS 数据，并使用 d3.js 将其转换为地图。但我无法渲染。你能告诉我正确使用`d3.geo.path()`吗？

```
<script>
    var width=960, height=500;
    var path = d3.geo.path();
    d3.json("/static/bxzip.json", function(d){
        d3.select("body").selectAll("p")
        .data(d.data)
        .enter().append("path")
        .attr("d",function(d) { return d[9][5].rings[0]; })
        .attr("class", "stroke");
    });
</script> 
```

这是`d[9][5].rings[0]`来自[https://nycopendata.socrata.com/Social-Services/Bronx-Zip-Code-Boundaries/p8wz-d63u的典型行](https://nycopendata.socrata.com/Social-Services/Bronx-Zip-Code-Boundaries/p8wz-d63u)

```
[ [ -73.84463693999993, 40.90475939500004 ], [ -73.84443733899991, 40.90423928800004 ], [ -73.84443555299993, 40.904234630000076 ],  ...] ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:19:48.707

您需要将数组传递给 path() 以使其返回屏幕 xy：

```
.attr("d",function(d) { return path(d[9][5].rings[0]); }) 
```

# r - 如何控制 ggplot2 中箱线图的 x 位置？

> ID：14528668
> 
> 赞同：6
> 
> 时间：2013-01-25T19:05:28.377
> 
> 标签：r, ggplot2

首先，一个简单的例子来设置舞台：

```
set.seed(123)
dat <- data.frame( 
  x=rep( c(1, 2, 4, 7), times=25 ), 
  y=rnorm(100), 
  gp=rep(1:2, each=50) 
)

p <- ggplot(dat, aes(x=factor(x), y=y))
p + geom_boxplot(aes(fill = factor(gp))) 
```

![](../Images/67647a313dfbe9fd3ef9959d4f9ea839.png)

我想制作一个类似的图，除了控制每组箱线图的 x 位置。我的第一个猜测是使用非因子`x`美学来控制这些箱形图沿 x 轴的位置。然而，一旦我尝试这样做，它似乎`geom_boxplot`并没有像我希望的那样解释美学。

```
p + geom_boxplot( aes(x=x, y=y, fill=factor(gp)) ) 
```

![](../Images/831255e3036bde23d17c52770d36dc8c.png)

特别是，`geom_boxplot`当它们不是因素时，似乎以某种方式崩溃了所有 x 值。

有没有办法`x`用 ggplot2 控制箱线图的位置？通过指定因子美学的每个级别之间的距离，更巧妙地使用非因子美学，还是其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:35:30.377

您可以使用`scale_x_discrete()`设置 x 轴的位置（刻度）。

```
p <- ggplot(dat, aes(x=factor(x), y=y))
p + geom_boxplot(aes(fill = factor(gp))) + 
    scale_x_discrete(limits=1:7) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T19:39:32.850

您也可以通过`group`美学来做到这一点。但是，我不确定为什么你不能只传递`x`给`group`. 这不起作用：

```
ggplot() + 
  geom_boxplot(data=dat, aes(x=x, y=y, fill=factor(gp), group=x)) 
```

但这确实：

```
ggplot() + 
  geom_boxplot(data=dat, aes(x=x, y=y, fill=factor(gp), group=paste(x, gp))) 
```

# android - 在 Android 中下载文件时 ProgressBar 未更新

> ID：14528669
> 
> 赞同：0
> 
> 时间：2013-01-25T19:05:35.910
> 
> 标签：android, download, progress-bar, progressdialog

我已经阅读了几乎所有类似的主题，但我找不到解决方案。所以我决定问问自己。

我想下载一个文件并在操作过程中显示一个进度对话框。文件下载成功。

第一个问题是下载操作过程中进度条没有更新。它只是保持 %0 并且下载完成后，对话框会按预期消失。

第二个问题是 - 我偶然注意到这一点 - 当我的活动得到更新时（例如，当屏幕方向改变时）对话框消失但下载继续。

我希望有人能帮帮忙。

这是我的代码：

```
package com.mehmetakiftutuncu.downloadunzipshow;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener
{
    final String LOG_TAG = "DownloadUnzipShow";

    final String RELATIVE_PATH = "mehmetakiftutuncu";
    final String FILE_NAME = "...";
    final String FILE_URL = "...";
    final String FULL_PATH = Environment.getExternalStorageDirectory().getPath() + "/" + RELATIVE_PATH + "/";;

    Button buttonDownload, buttonUnzip, buttonShow;
    ProgressDialog progressDialog;

    public class MyFileDownloader extends AsyncTask<String, String, String>
    {
        boolean isSuccessful = true;

        InputStream inputStream;
        OutputStream outputStream;

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();
            prepareProgressDialog();

            Log.d(LOG_TAG, "Downloading: " + FILE_URL + " to " + FULL_PATH + FILE_NAME);
        }

        @Override
        protected String doInBackground(String... params)
        {
            int count;

            try
            {
                URL url = new URL(params[0]);
                URLConnection connection = url.openConnection();

                connection.connect();

                int lengthOfFile = connection.getContentLength();

                File path = new File(FULL_PATH);
                if(!path.exists())
                {
                    path.mkdir();
                }

                inputStream = new BufferedInputStream(url.openStream());
                outputStream = new FileOutputStream(FULL_PATH + FILE_NAME);

                byte[] data = new byte[1024];

                long total = 0;
                int percentage = 0;

                while((count = inputStream.read(data)) != -1)
                {
                    total += count;

                    percentage = (int) ((total / lengthOfFile) * 100);

                    publishProgress(String.valueOf(percentage));

                    outputStream.write(data, 0, count);
                }

                outputStream.flush();
                outputStream.close();
                inputStream.close();
            }
            catch(Exception e)
            {
                isSuccessful = false;
                Log.e(LOG_TAG, "An error occured while downloading. Details: " + e.getMessage());
            }

            return null;
        }

        @Override
        protected void onProgressUpdate(String... values)
        {
            super.onProgressUpdate(values);

            progressDialog.setProgress(Integer.parseInt(values[0]));
        }

        @Override
        protected void onPostExecute(String result)
        {
            super.onPostExecute(result);

            if(isSuccessful)
            {
                Log.d(LOG_TAG, "File is successfully downloaded to: " + FULL_PATH + FILE_NAME);
            }

            progressDialog.dismiss();
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonDownload = (Button) findViewById(R.id.button_download);

        buttonDownload.setOnClickListener(this);
    }

    private void prepareProgressDialog()
    {
        progressDialog = new ProgressDialog(this);
        progressDialog.setTitle(getString(R.string.dialog_title));
        progressDialog.setMessage(getString(R.string.dialog_message) + FILE_URL);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setMax(100);
        progressDialog.setCancelable(false);
        progressDialog.show();
    }

    @Override
    public void onClick(View v)
    {
        switch(v.getId())
        {
            case R.id.button_download:
                new MyFileDownloader().execute(FILE_URL);
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:37:02.190

> 第一个问题是下载操作过程中进度条没有更新。它只是保持 %0 并且下载完成后，对话框会按预期消失。

发生这种情况是因为该行：

```
percentage = (int) ((total / lengthOfFile) * 100); 
```

总是返回`0`，因为你正在做一个`total`小于`lengthOfFile`. 创造`total`价值`double`。也不要将百分比转换为，`String`将 的第二个通用参数修改为。`AsyncTask``Integer`

> 第二个问题是 - 我偶然注意到这一点 - 当我的活动得到更新时（例如，当屏幕方向改变时）对话框消失但下载继续。

在配置更改（例如轮换）时，`Activity`将重新创建在此过程中杀死您的对话框。如果您想重新显示对话框，您需要`AsyncTask`通过将配置更改传递给（或者您可以使用片段）的`onRetainNonConfigurationInstance()`方法来保持配置更改。`Activity`在`onCreate`方法中用于`getLastNonConfigurationInstance`查看您是否保留了任务并仍在运行并重新显示对话框。此外，您真的不应该在中`AsyncTask`创建内部类，`Activity`因为您会将其与活动联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:13:45.940

对话框消失了——你是在捕捉方向配置的变化，还是让 Android 来做？如果您让 Android 执行此操作，它将终止您的活动并重新创建它，这将破坏您的对话框。异步任务不会被杀死，因为异步任务归系统所有。要解决这个问题，请将 android:configChange="orientation" 添加到活动的清单中。一般的经验法则是，如果您想让对话在轮换中持续存在，您需要这样做。

# asp.net - 在我的 asp.net 网站中接收一个 ftp 文件

> ID：14528670
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:05:41.657
> 
> 标签：asp.net, post, ftp

我有一个基于 Windows 的应用程序（不是我可以控制的），它将一个 xml 文件推送到一个 ftp 服务器。我希望我的 asp.net 应用程序自动处理该文件，而无需轮询 ftp 服务器。从 Windows 应用程序中，我可以控制它被发送到的 ftp 服务器，所以我可以在我的 iis 盒子上设置一个 ftp 服务器，但是我仍然需要轮询文件中的更改。我愿意接受任何关于无需轮询 ftp 服务器即可完成此任务的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:14:52.450

FileSystemWatcher 类旨在监视目录并响应诸如创建文件之类的事件。

我建议创建一个 Windows 服务应用程序来托管 FileSystemWatcher 并处理 OnCreated 事件。

文件系统观察器：

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher%28v=vs.100%29.aspx)

OnCreated 事件：

[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.oncreated%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.oncreated%28v=vs.100%29.aspx)

# javascript - 如何将字符串作为参数从视图传递给 JavaScript 函数？

> ID：14528671
> 
> 赞同：0
> 
> 时间：2013-01-25T19:05:47.500
> 
> 标签：javascript, asp.net, asp.net-mvc-4

我刚刚开始使用 ASP.NET MVC 项目，我已经掌握了基础知识，但我最近遇到了一个问题，我无法将字符串作为 id 从视图传递。

到目前为止，我一直在将 id 传递给这样的 javascript 函数：

```
<script>app.init( <%: ViewContext.RouteData.Values["id"].ToString() %>)</script> 
```

这将调用以下 javascript 函数：

```
var app = {};
(function (app) {
    var _id;
    app.init = function (id) {
        _id = id;
    }
    app.id = function () {
        return _id;
    }
})(app); 
```

我这样做是因为我需要使用 id 在 javascript 中执行诸如提交和 ajax 调用之类的操作（我更喜欢使用 javascript）。

到目前为止，这适用于 int 值，但是当我尝试传递一个字符串时它失败了。例如，如果我尝试访问此 url localhost:65097/Device/Edit/D2C02 它会显示以下错误：

```
SCRIPT5009: 'D2C02' is undefined 
```

当我检查生成的 html 代码时，对函数的调用如下所示：

```
<script>app.init(D2C02)</script> 
```

id 不应该像字符串一样作为 'D2C02' 传递，而不仅仅是像变量一样的 D2C02 传递吗？因为这就是我所理解的浏览器认为 id D2C02 代表的内容。如何确保将 id 值作为字符串传递给 javascript 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:07:53.070

`ToString()`只是将某些内容转换为字符串 - 但那是 C# 字符串，而不是 JS 字符串。因此，最简单的解决方案是添加引号，假设该值也不能包含引号：

```
<script>app.init("<%: ViewContext.RouteData.Values["id"].ToString() %>")</script> 
```

如果它可能包含引号，您可以执行简单的替换以对它们进行反斜杠转义，或者通过 JSON 序列化程序运行字符串，该序列化程序负责将其转换为有效的 JavaScript 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:13:14.370

尝试

app.init("<%......%>");

否则，您只是在发布变量名而不是字符串。c# 中的 ToString() 方法不会将值用引号括起来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:13:33.500

我会使用的方法是做这样的事情，让事情变得更加语义化——这被过度简化来演示：

```
<body>
    <input id="myId" type="hidden" value="<%: ViewContext.RouteData.Values["id"].ToString() %>" />

...
<script language="text/javascript">
    function getId() {
        return document.getElementById("myId").value;
    }
</script>
</body> 
```

# c - 如何在 C 中定义用于保存字符串和数字的数据类型

> ID：14528675
> 
> 赞同：0
> 
> 时间：2013-01-25T19:06:04.103
> 
> 标签：c, arrays, 2d, structure, frequency

C结构题

我有一个单词列表及其相应的频率：

```
word 10
the 50
and 35
overflow 90 
```

我应该如何将这些数据保存在结构中？我应该使用二维数组吗？我还应该注意我必须按它们的频率对它们进行排序，所以我在考虑某种数组然后应用 qsort，但我需要保留整数，所以如果我使用 char 数组，我必须来回转换

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:10:16.040

可能是一个结构：

```
struct WordInfo {
    char *word;
    int frequency;
}; 
```

然后，您可以制作这些结构的数组：

```
struct WordInfo words[128]; // whatever 
```

最后写一个像这样的比较器函数：

```
int word_compare(const void *p1, const void *p2)
{
    struct WordInfo *s1 = p1;
    struct WordInfo *s2 = p2;
    return s1->frequency - s2->frequency;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:16:00.553

如果您知道要处理的字符串的最大字符数，则意味着在结构中使用数组和 int 数据类型。

```
typded struct _data
{
   char word[MAX_CHARS];
   int freq;
}DATA;
...

DATA *d = malloc(sizeof(DATA) * n); 
```

如果您不知道`word`go for pointer charater的最大字符数`char *word;`。在这种情况下，每个条目都会发生内存分配，这会影响性能并且会导致更多的碎片。

最好一次分配一块内存，而不是`n`多次分配小内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T21:06:02.080

您还可以拥有一个 std::pair 数组

然后你可以运行任何你想根据第二个元素对数组进行排序的排序算法。例如，您将拥有：

std::pair myArray[大小];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:08:18.653

定义结构类型，例如

```
struct wordAndFrequency
{
  char *word;
  int count;
}; 
```

然后拿一个数组`struct wordAndFrequency`和`qsort`那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T19:09:13.043

```
typedef struct Dict {
  char *word;
  int frequency;
} Dictionary; 
```

现在创建此结构对象的数组并将其用作哈希图。当你遇到一个单词时，看看这个单词是否存在，增加计数器，否则添加这个单词，计数为 1。

```
 Dictionary *dictionary=(Dictionary*)malloc(sizeof(Dictionary)*SIZE); 
```

# scala - 如何更新 mutable.Map 中的当前值？

> ID：14528683
> 
> 赞同：8
> 
> 时间：2013-01-25T19:06:36.427
> 
> 标签：scala

有没有一种优雅的方法来更新地图中已经存在的值？

这看起来太可怕了：

```
val a = map.get ( something ) 
if ( a != null ) // case .. excuse my old language
   a.apply( updateFunction )
else 
   map.put ( something, default ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T20:04:48.047

大多数时候，您可以插入可以在创建时更新的内容（例如，如果它是一个计数，则将 0 放入其中，然后更新为 1，而不是仅将 1 放入开始）。在这种情况下，

```
map.getOrElseUpdate(something, default).apply(updateFunction) 
```

在极少数情况下，您无法以这种方式组织事物，

```
map(something) = map.get(something).map(updateFunction).getOrElse(default) 
```

（但你必须参考`something`两次）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T19:09:26.973

这是我通常写的......不确定是否有更好的解决方案。

```
map.get(key) match {
  case None => map.put(key, defaultValue)
  case Some(v) => map(key) = updatedValue
} 
```

事实上`update`，`put`对于可变映射也是一样的，但我通常`update`在现有条目和`put`新条目上使用，只是为了便于阅读。

另一件事是，如果您可以在不检查密钥是否存在的情况下弄清楚最终值是什么，您可以简单地编写`map(key) = value`，它会自动创建/替换条目。

最后，像这样的语句`map(key) += 1`实际上是有效的`Map`（这通常适用于具有`update`函数的集合），许多简单的数字运算也是如此。\

* * *

要解决双重放置，请使用可变对象而不是不可变值：

```
class ValueStore(var value: ValueType)
val map = new Map[KeyType, ValueStore]
...
map.get(key) match {
  case None => map.put(key, new ValueStore(defaultValue))
  case Some(v) => v.value = updatedValue
} 
```

正如我在评论中提到的，`HashMap`is的底层结构`HashTable`实际上使用了这种可变包装类方法。`HashMap`是一个更好的总结类，但有时您只需要进行重复计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:35:52.917

我很愚蠢，你是（非常）正确的：

```
map.get(key) match {
  case None => map.put(key, defaultValue)
  case Some(v) => v.apply(updateFunction) // changes state of value
} 
```

谢谢

# ios - 如果我在放大后绘制 UIImageView 会变得模糊

> ID：14528689
> 
> 赞同：1
> 
> 时间：2013-01-25T19:06:59.203
> 
> 标签：ios, uiimageview, uiimage, quartz-graphics, uipinchgesturerecognizer

我有一张`UIImageView`显示图片。

我注册了一个缩放手势来放大/缩小和一个平移手势来绘制它（我有充分的理由使用平移手势，而不是 touchMoved）

这是捏目标：

```
 - (void)pinchGestureActionOnSubject:(UIPinchGestureRecognizer *)pinch
    {

          if([(UIPinchGestureRecognizer*)pinch state] == UIGestureRecognizerStateBegan)
          {
                _lastScale = 1.0;
          }

          CGFloat scale = 1.0 - (_lastScale - [(UIPinchGestureRecognizer*)pinch scale]);

          CGAffineTransform currentTransform = self.imageViewSubject.transform;
          CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

          [self.imageViewSubject setTransform:newTransform];

          _lastScale = [(UIPinchGestureRecognizer*)pinch scale];
    } 
```

这是泛目标：

```
 -(void) panOnSubjectForDrawing:(id)sender
    {

         if([sender numberOfTouches] > 0)
         { 

              CGPoint currentPoint = [sender locationOfTouch:0 inView:self.imageViewSubject];

              if(lastPoint.x == 0 || lastPoint.y == 0)
              {
                  lastPoint.x = currentPoint.x;
                  lastPoint.y = currentPoint.y;    
              }

              UIGraphicsBeginImageContext(self.imageViewSubject.bounds.size);

              CGContextRef context = UIGraphicsGetCurrentContext();

              [self.imageViewSubject.image drawInRect:CGRectMake(0, 0, self.imageViewSubject.bounds.size.width, self.imageViewSubject.bounds.size.height)  blendMode:kCGBlendModeNormal alpha:1.0];

              CGContextSetLineCap(context, kCGLineCapRound);

              CGContextSetLineWidth(context, 10); // Epaisseur du trait

              CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear); // Transparent

              CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
              CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);
              CGContextStrokePath(context);

              self.imageViewSubject.image = UIGraphicsGetImageFromCurrentImageContext();

              UIGraphicsEndImageContext();
              lastPoint = currentPoint;

       }

   } 
```

问题是如果我放大后绘制，图片会变得模糊。但如果我在没有缩放的情况下绘制，图像会保持不变。

我听说这可能是因为我的框架必须是整数，所以我添加：

```
self.imageViewSubjectframe = CGRectIntegral(self.imageViewSubject.frame); 
```

在我画之前，但这是最糟糕的，更模糊。

任何想法？

# .net - Windows Azure App Fabric：找不到配置绑定扩展“system.serviceModel/bindings/netTcpRelayBinding”

> ID：14528690
> 
> 赞同：0
> 
> 时间：2013-01-25T19:07:00.883
> 
> 标签：.net, azure, appfabric

我目前正在为 Windows Azure 开发 .net 应用程序。我已按照一些教程为要在 Azure 上托管的本地服务设置中继。这似乎奏效了。

但是，当我使用客户端对其进行测试时，我无法下载元数据。我收到以下错误：

> 无法识别 URI 前缀。找不到配置绑定扩展“system.serviceModel/bindings/netTcpRelayBinding”。验证此绑定扩展是否已在 system.serviceModel/extensions/bindingExtensions 中正确注册并且拼写正确。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

似乎旧版本的 appfabric sdk 将扩展写入 machine.config，但新版本没有，您必须将其添加到您的 app.config。或者您可以使用 nugget 安装 windowsazure.servicebus 包，它会为您编写扩展。我已经这样做了，所以 app.config 确实包含 system.serviceModel/extensions/bindingExtensions/netTcpRelayBinding

这是我的 app.config

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
    <extensions>
          <!-- In this extension section we are introducing all known service bus extensions. User can remove the ones they don't need. -->
      <behaviorExtensions>
        <add name="connectionStatusBehavior" type="Microsoft.ServiceBus.Configuration.ConnectionStatusElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="transportClientEndpointBehavior" type="Microsoft.ServiceBus.Configuration.TransportClientEndpointBehaviorElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="serviceRegistrySettings" type="Microsoft.ServiceBus.Configuration.ServiceRegistrySettingsElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </behaviorExtensions>
      <bindingElementExtensions>
        <add name="netMessagingTransport" type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingTransportExtensionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="tcpRelayTransport" type="Microsoft.ServiceBus.Configuration.TcpRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="httpRelayTransport" type="Microsoft.ServiceBus.Configuration.HttpRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="httpsRelayTransport" type="Microsoft.ServiceBus.Configuration.HttpsRelayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="onewayRelayTransport" type="Microsoft.ServiceBus.Configuration.RelayedOnewayTransportElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingElementExtensions>
      <bindingExtensions>
        <add name="basicHttpRelayBinding" type="Microsoft.ServiceBus.Configuration.BasicHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="webHttpRelayBinding" type="Microsoft.ServiceBus.Configuration.WebHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="ws2007HttpRelayBinding" type="Microsoft.ServiceBus.Configuration.WS2007HttpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netTcpRelayBinding" type="Microsoft.ServiceBus.Configuration.NetTcpRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netOnewayRelayBinding" type="Microsoft.ServiceBus.Configuration.NetOnewayRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netEventRelayBinding" type="Microsoft.ServiceBus.Configuration.NetEventRelayBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add name="netMessagingBinding" type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingBindingCollectionElement, Microsoft.ServiceBus, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </bindingExtensions>
    </extensions>
    <client>
      <endpoint address="" binding="netTcpRelayBinding" contract="IMetadataExchange" name="sb"/>
    </client>
  </system.serviceModel>
  <appSettings>
    <!-- Service Bus specific app setings for messaging connections -->
    <add key="Microsoft.ServiceBus.ConnectionString" value="Endpoint=sb://[your namespace].servicebus.windows.net;SharedSecretIssuer=owner;SharedSecretValue=[your secret]" />
  </appSettings>
</configuration> 
```

我已经把头撞在墙上有一段时间了，试图找出可能出了什么问题。美好的一天半，除了谷歌搜索之外什么都没有。我尝试过编辑 machine.config，但我尝试了很多不同的东西。到目前为止，没有任何工作。知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:17:37.007

确保在定义[NetTcpRelayBinding 类](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.nettcprelaybinding.aspx)的项目中引用*Microsoft.ServiceBus*程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:32:50.487

您需要添加一个名为 MYnetTcpRelayBinding 的绑定：

```
<bindings>
  <netTcpRelayBinding>
    <binding name="netTcpRelayBinding" .... 
```

并更改您的端点以使用该绑定：

```
<client>
      <endpoint address="" binding="MYnetTcpRelayBinding" ... 
```

# java - 是否可以使用不同的方法将相同的映射映射到两个不同的控制器？

> ID：14528694
> 
> 赞同：2
> 
> 时间：2013-01-25T19:07:31.280
> 
> 标签：java, spring-mvc

我的应用程序中有两种方法使用相同的请求映射和不同的（http）方法

```
@RequestMapping(value = "/method/{key}", method = RequestMethod.GET)
public void method1(<parameters>) throws IOException {
    // ...
}

@RequestMapping(value = "/method/{key}", method = RequestMethod.PUT)
public void method2(<parameters>) throws IOException {
    // ...
} 
```

只要这两种方法都定义在同一个控制器中，这就可以完美地工作，但是，由于我正在使用的公司框架，我**需要它们位于 2 个不同的控制器**中，并且当我启动我的应用程序时，我收到以下错误：

> 原因：java.lang.IllegalStateException：无法将处理程序“MyController#0”映射到 URL 路径 [/method/{key}]：已经映射了 [class OtherController$$EnhancerByCGLIB$$54a955d] 类型的处理程序。在 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:390) 在 org.springframework.web.servlet.handler.AbstractUrlHandlerMapping.registerHandler(AbstractUrlHandlerMapping.java:362) 在 org.springframework.web.servlet .handler.AbstractDetectingUrlHandlerMapping.detectHandlers(AbstractDetectingUrlHandlerMapping.java:82) 在 org.springframework.web.servlet.handler.AbstractDetectingUrlHandlerMapping.initApplicationContext(AbstractDetectingUrlHandlerMapping.java:58) 在 org.springframework.context.support.ApplicationObjectSupport。

是否可以在不同的控制器中定义它们，或者我应该看看一些（可怕的）解决方法（比如重命名其中一个 URL）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:15:05.400

`<mvc:annotation-driven>`从 Spring 3.1 开始它应该可以正常工作（如果启用了新的映射实现 - 如果使用or`@EnableWebMvc`并且不`HandlerMapping`手动声明任何 s ，则默认启用它）。

在旧版本的 Spring 中，您必须将这些方法放入同一个控制器中。

# html - 粘性菜单，在一定高度

> ID：14528697
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:07:40.243
> 
> 标签：html, css, menu, sticky

我正在尝试复制这种粘稠的效果：[http](http://tbwachiatdayla.com/) ://tbwachiatdayla.com/ 我希望菜单在某个高度变得粘稠。我怎样才能做到这一点？位置：固定；在 aa 顶部：假设 100px 高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T07:47:38.507

我在浏览粘性菜单时遇到了这个：http: [//jsfiddle.net/vyHQC/](http://jsfiddle.net/vyHQC/)

```
$(document).scroll(function() {
    var y = $(document).scrollTop(), //get page y value 
        header = $("#block-menu");
    if(y >= 300)  {
        header.css({position: "fixed", "top" : "0", "left" : "0"});
    } else {
        header.css("position", "relative");
    }
}); 
```

其他人编写了代码，所以我不会相信，但我会发布答案。 [位置固定在某个点](https://stackoverflow.com/questions/16922045/position-fixed-on-a-certain-point)

# java - 如何检查手机是否被什么东西挡住了？

> ID：14528699
> 
> 赞同：0
> 
> 时间：2013-01-25T19:07:46.570
> 
> 标签：java, javascript, android, api, cordova

是否有一个 API 可以让我知道我的手机是在墙后面还是在坚固的东西后面？

我有兴趣在 javascript 或 java 中为 Android 手机执行此操作。

或者，如何通过使用手机中可用的硬件来判断手机是否被某物阻塞......？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:35:56.227

嗯，你可以用GPS，当GPS进入家里时，经纬度为0导致无法连接GPS卫星，你可以用这个0作为标志，做你喜欢做的事

# c# - 如何从 Chrome 驱动程序中分离 Chrome 浏览器（Selenium Web Driver C#）

> ID：14528700
> 
> 赞同：7
> 
> 时间：2013-01-25T19:07:51.050
> 
> 标签：c#, selenium, selenium-webdriver, selenium-chromedriver

我想在 VS 2010 C# 中使用 Selenium Web Driver 打开 Chrome 浏览器，导航到某个网页，**然后关闭驱动程序但保持浏览器打开**。我意识到之后我将不得不手动关闭浏览器，我可以接受。

到目前为止，我有：

```
DriverService service = ChromeDriverService.CreateDefaultService();
ChromeOptions options = new ChromeOptions();
options.AddAdditionalCapability("chrome.detach",true);
m_driver = new ChromeDriver(service, options, TimeSpan.FromMilliseconds(1000));
[m_driver does stuff like navigate page, double click stuff, etc]
[last line: try to close driver but not browser] 
```

我已经尝试了以下所有作为最后一行

```
m_driver.Dispose(); // closes both browser and driver

m_driver.Close(); //closes just the browser and not the driver

m_driver.Quit(); // closes both browser and driver

service.Dispose(); // closes both browser and driver 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-12T07:46:20.453

我们可以使用“分离”选项从 chromedriver 分离 chrome 实例。

示例代码：

```
ChromeDriverService cdservice = new ChromeDriverService.Builder()
                .usingDriverExecutable(new File("/path/to/chromedriver.exe"))
                .withLogFile(new File("/path/to/chromedriver.log"))
                .usingAnyFreePort().withVerbose(true).build();
cdservice.start();
ChromeOptions options = new ChromeOptions();
options.setExperimentalOption("detach", true);
ChromeDriver driver = new ChromeDriver(cdservice,options);
driver.manage().timeouts().implicitlyWait(1, TimeUnit.MINUTES);
driver.get("http://www.google.com/");

// Do not call driver.quit().. instead stop chromedriver service.
cdservice.stop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:05:36.007

这根本不可能，那种分离是不存在的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T11:19:22.330

chromeservice.driver.close()

过去曾为我工作，但在这种情况下，您可能需要为方法编写一些代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-23T22:09:41.860

至少在 c# 中你需要下一行：

```
driverOptions.AddExcludedArgument("enable-automation");
driverOptions.AddAdditionalCapability("useAutomationExtension", false); 
```

# vim - 防止 :bd 在 VIM 中关闭窗口

> ID：14528706
> 
> 赞同：0
> 
> 时间：2013-01-25T19:08:19.517
> 
> 标签：vim

我正在尝试使用拆分窗口在 VIM 中工作。

所以....我使用 将我的 VIM 拆分为两个窗口`ctrl V S`，并使用`ctrl W W`.

我习惯于键入`:bd`以删除当前缓冲区。不幸的是，这有关闭当前窗口的副作用。

有没有办法在不关闭当前窗口的情况下删除缓冲区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:32:00.243

`:Kwbd`您可以使用通常命名为（保留窗口、缓冲区删除）的自定义命令来实现此目的。[Vim Tips Wiki](http://vim.wikia.com/wiki/Deleting_a_buffer_without_closing_the_window)上有完整的讨论和几个替代方案。另请参阅[vim.org 上的此插件](http://www.vim.org/scripts/script.php?script_id=2103)。

# php - PHP 到 PostgreSQL 将未嵌套的数组插入多行

> ID：14528707
> 
> 赞同：1
> 
> 时间：2013-01-25T19:08:24.647
> 
> 标签：php, arrays, postgresql, insert

我在 PHP 数组/变量中有一些数据准备好通过 INSERT 语句插入到 PostgreSQL 表中。

举个简单的例子说我有以下信息：

```
$name= 'someName';
$time = array(1,2,3);
$elevation = array(100,200,300); 
```

（在我的实际应用中，这些是双精度，可能有 1,000 多个值）

我也有我的 postgresql 表，其中包含“名称”、“时间”、“海拔”列

我想将这些插入到单个 INSERT 语句中，并且已经给出了多种不同的方法来执行此操作。

1.  一次循环并插入一个数据点（行）。
2.  在数组上使用 unnest() 并执行一次插入（最快）

我的问题是我可以传递一个变量名和非嵌套数组，并且每行都重复名称（每个数组元素），还是我需要构造一个重复的数组来命名与其他数组等效的 count()？

一个示例语句：

*cr_query 是我们使用的自定义 PHP pg_query 包装器

```
cr_query($conn,"INSERT INTO sometable (name,time,elevation) VALUES ({$name},{unnest($time)},{unnest($elevation)});); 
```

这将插入到某个表中：

```
ID     name      time    elevation
1     someName     1        100
2     someName     2        200
3     someName     3        300 
```

我在这里是正确的还是我需要做其他事情？

编辑：

可以说我还有另一个变量“表面”。Surface 可以是双精度值，也可以为 NULL。所以我想插入表中，如下所示：

```
ID     name      time    elevation    surface
1     someName     1        100          50
2     someName     2        200         NULL
3     someName     3        300          100 
```

在 PHP 中，在 unnest 语句中使用 klin 在表面数组下方指定的方法将变为 unnest(array[50,,100]); 这会引发如下错误：

（来自我的真实数据的错误）

```
ERROR: syntax error at or near "," LINE 3: ...-6,5.75E-6,5.75E-6,5.75E-6,5.75E-6]),unnest(array[,,,,,,,,,]... ^ 
```

编辑2：

现在所有的“编码”都在工作，一个新的问题出现了。假设上面的示例列“表面”是双精度类型。

假设我正在插入一个数组，但是对于这个集合，所有数据都是空的。

重要的部分是：

```
unnest(array[null,null,null,null,null,null,null,null,null,null]) 
```

但是，这个数组是字符串类型的。向其中添加一个值，它就成为该数值的类型，但我需要能够处理这个问题。

我的问题是：如何将所有空值的未嵌套数组插入双精度列？（我试图投 :: 双精度）但这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:46:08.650

假设您的 cr_query() 函数没有做任何神奇的事情，您的代码将引发 postgres 语法错误。您可以使用 unnest，但必须准备正确的查询文本。试试你的代码：

```
$name= 'someName';
$time = array(1,2,3);
$elevation = array(100,200,300);
echo "INSERT INTO sometable (name,time,elevation) VALUES ".
    "({$name},{unnest($time)},{unnest($elevation)})"

echo: INSERT INTO sometable (name,time,elevation) VALUES (someName,{unnest(Array)},{unnest(Array)}) 
```

显然这不是我们想要发送给 postgres 的。如何修复这个？

```
$name= 'someName';
$time = array(1,2,3);
$elevation = array(100,200,300);
$timestr = 'array['. implode(',', $time). ']';
$elevstr = 'array['. implode(',', $elevation). ']';
echo "INSERT INTO sometable (name,time,elevation) ".
    "VALUES ('$name',unnest($timestr),unnest($elevstr));"

echo: INSERT INTO sometable (name,time,elevation) VALUES ('someName',unnest(array[1,2,3]),unnest(array[100,200,300])); 
```

我认为这是正确的查询。请注意，我将文本变量 '$name' 括在单引号中。

* * *

如果您的数组中有空值，则必须在准备好的查询文本中将所有空字符串替换为“空”。可能最简单的方法是使用 str_replace()。随着转换变得越来越复杂，为此目的编写一个函数（比如“pgstr()”）很方便。

```
function pgstr($array) {
    $str = 
        str_replace('[,', '[null,', 
        str_replace(',]', ',null]', 
        'array['. implode(',', $array). ']'));
    while (strpos($str, ',,') > 0) $str = str_replace(',,', ',null,', $str);
    return $str;
    }

$name= 'someName';
$time = array(1,2,3,4);
$elevation = array(100,null,300,null);
$surface = array(null,null,3.24,null);
$timestr = pgstr($time);
$elevstr = pgstr($elevation);
$surfstr = pgstr($surface);
echo 
    "INSERT INTO sometable (name,time,elevation,surface) ".
    "VALUES ('$name',unnest($timestr),unnest($elevstr),unnest($surfstr));"; 
```

# c# - 带有等号的 C# 订单放置

> ID：14528708
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:08:27.587
> 
> 标签：c#, this

想知道这两者有没有区别：

```
public Bee (double weight) 
    {
        this.weight = weight; 
```

和

```
public Bee (double weight) 
    {
        weight = this.weight; 
```

如果您切换等号“=”的左侧和右侧，它会改变含义吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T19:09:33.613

是的。意义肯定会改变。一个分配`weight`to的值`this.weight`，另一个分配`this.weight`to的值`weight`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T19:11:11.250

后者将分配存储在您的类`weight`字段中的值并将其分配给`weight`传递给您的方法的参数。

前者会适得其反。

基本上，`this.weight`指的是您的类的`weight`字段，其中`weight`指的是方法的参数。如果方法范围内没有`weight`变量，您仍然可以使用`weight`来引用类字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:11:19.283

是的。关键字表示该`this`变量是类实例变量。如果没有`this`关键字，将使用本地权重参数。

下面的示例将传递给构造函数的参数分配给同名的类实例变量。

示例类：

```
public class Bee
{
    double weight;

    public Bee(double weight)
    {
        this.weight = weight;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:12:04.093

是的。它们不一样。 `this.weight`指的是类上的属性或变量，`weight`指的是方法中的参数。

举个例子：

```
public class Bee
{
   private double weight;      

   public Bee (double weight)
   {
      this.weight = weight;
   }
} 
```

如果我想改变函数中的参数权重，我可以这样做：

```
public class Bee
{
   private double weight;      

   public Bee (double initialWeight)
   {
      this.weight = initialWeight;
   }
} 
```

如果我想改变内部变量权重，我会这样做：

```
public class Bee
{
   private double internalWeight;      

   public Bee (double weight)
   {
      this.internalWeight = weight;
   }
} 
```

正如您所看到的，任何一种更改都可以使这里发生的事情更加清晰，它还可以帮助您了解每次调用的设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T19:13:45.980

在 C# 中，single`=`是[赋值运算符](http://msdn.microsoft.com/en-us/library/sbkb459w.aspx)- 它将右侧表达式的值分配给左侧的变量。既然如此，顺序当然很重要。

如果您正在寻找逻辑相等比较，您将使用[运算符](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)[-`==`](http://msdn.microsoft.com/en-us/library/53k8ybth.aspx)当然，在您提供的代码中这样做是没有意义的：该语句将*返回* `true`或`false`作为其结果，然后您需要*分配*它结果或用它做其他有用的事情。

# css - 嵌套 DIV - 嵌套 DIV 不占用高度？

> ID：14528709
> 
> 赞同：0
> 
> 时间：2013-01-25T19:08:27.213
> 
> 标签：css, html, height, nested

所以我试图设置“内容”类的高度，但它似乎不起作用。我是嵌套 DIV 的菜鸟，我已经尝试了我在谷歌上搜索到的修复程序，但似乎没有任何效果。帮助？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Website Horizontal Scrolling with jQuery" />
    <meta name="keywords" content="jquery, horizontal, scrolling, scroll, smooth"/>
       <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
</head>
<style>   
body {
background-mage: url(bg.jpg), url(bgrepeat.jpg);
background-repeat: no-repeat, repeat-x;
background-attachment:fixed;
background-position:left bottom;
background-color: #D3C8B6;
}
#wrapper {
text-align: center;
width: 100%;
position:absolute;
bottom:0;
}
 #header,
  #main,
  #sidebar,
  #footer {
    display:inline;
    position:relative;
    float:left;

  }
  #header,
  #footer {
    width:100%;
    background-color:#eee;
            opacity:1.0;
filter:alpha(opacity=100);
  }
  #header {
    margin-bottom:1%;
    height:100px;
  }
  #footer {
    margin-top:1%;
    height:40px;
  }
  #main {
    width:20%;
    height:475px;
    margin-right:1%;
    text-align: center;
    background-color:#eee;
            opacity:1.0;
filter:alpha(opacity=100);
  }
  #sidebar {
    width:79%;
    height:475px;
    overflow: hidden;
  }
   .viewport{
       width:100%;
       height:475px;
       overflow-x:scroll;

   }

   .inside{
       width:9000px;
       height:200px;
   }

   .inside div{
       height:450px;
       width:700px;
       float:left;
       margin-right:4px;

   }
   .content {
       height:100px;
       width:300px;
       overflow-y: scroll;
       position:relative;
       top: 10px;
       right:10px;
       }

   .one{
       background-image: url(images/frame.png)
   }

   .two{
       background-image: url(images/frame2.png);
       text-align:center;
       z-index: 1;
   }

   .three{
       background-image: url(images/frame1.png);
   }
   .four{
        background-image: url(images/frame3.png);
   }
   .five {
       background-image: url(images/frame4.png);
   }

</style>
<body>
<div id="wrapper">
<div id="header">
</div>
<div id="main">
<div class="one-l">Home</div>
 <div class="two-l">Portfolio</div>
 <div class="three-l">Resume</div>
 <div class="four-l">Blog</div>
 <div class="five-l">Contact</div>
 </div>

<div id="sidebar">

<div class="viewport" >
     <div class="inside" >
         <div class="one">home</div>
         <div class="two">
         <div class="content" width="200">
         Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas bibendum, leo vitae ornare dignissim, lorem urna tempor felis, in fringilla urna justo non velit. Cras imperdiet viverra ligula, vitae auctor neque elementum eget. In nec quam est, quis molestie magna. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec gravida, elit a iaculis consequat, ligula nisl cursus turpis, in giat eu placerat vel, viverra vel nibh. Ut vitae felis ac nisi euismod porta. Aliquam et gravida mauris. Maecenas id massa ligula, et blandit orci. In hac habitasse platea dictumst. Donec eu tortor libero. Donec eget leo mi. Mauris quis neque vitae massa facilisis placerat ut et felis. Nullam eleifend faucibus diam, sit amet pellentesque leo euismod id. Morbi interdum placerat nibh, in mattis sem eleifend quis. Nunc non nunc sed lorem condimentum molestie mattis blandit dui. Nulla urna ligula, auctor id venenatis eu, placerat ut dui. In fringilla purus gravida sapien cursus imperdiet porta ligula lobortis. Sed pellentesque, nisi quis tristique pulvinar, justo odio sollicitudin risus, non euismod dui ante nec tortor.
         </div></div>
         <div class="three">resume</div>
         <div class="four">blog</div>
         <div class="five">contact</div>
     </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:20:59.393

发生这种情况是因为 中`height`定义的属性`.inside div`优先。在这种情况下，要使 height 属性在类中起作用，`.content`您必须执行以下操作：

```
.content
{
    height: 200px !important;
} 
```

你可以在 JS Bin 看到一个 Demo：http: [//jsbin.com/exucek/1/edit](http://jsbin.com/exucek/1/edit)

尝试更改`height`属性值以查看它是否被实时应用。您会看到，当值太小时，会出现滚动条。

* * *

`!important`如果您对该CSS 规则感到好奇，请看这里：

[!important 在 CSS 中是什么意思？](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:45:40.013

您的 CSS 将使用最具体的规则。您已指定高度

`.inside div`

这比更具体

```
.content 
```

你也在哪里设置高度。为了让您的 CSS 使用您为 .content 设置的高度，您需要使选择器更具体，如下所示：

```
.inside div{
       height:450px;
       width:700px;
}
.inside .content {
       height:100px;
       width:300px;
} 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:46:15.347

你的代码有错误！
替换`<div class="content" style=" width:200px;" >`为

```
<div class="content" width=200 > 
```

或更改您的 CSS 代码：

```
.content {
       height:200px;
            } 
```

# c# - WPF框架控件，如何与用户控件一起使用？

> ID：14528710
> 
> 赞同：0
> 
> 时间：2013-01-25T19:08:30.370
> 
> 标签：c#, wpf, frame

我需要构建某种电话模拟器来测试我们的网络服务，并大致了解流程将如何进行。不需要什么花哨的东西。现在我制作了一个带有电话图像的 WPF 表单。在手机的显示屏中，我放置了一个框架。到目前为止看起来不错:)

但是现在呢？我怎样才能用开始屏幕填充框架？我是否需要为要查看或显示的每个页面创建一个用户控件？还是有其他方法？那么数据绑定呢？我想使用 MVVM，所以我需要像往常一样为每个用户控件创建一个视图模型？还是每个页面的视图模型？

我刚刚发现了 WPF 帧控件，似乎网上没有太多信息可以找到，或者不是我想要的。

感谢任何指向正确方向的指针。

这是现在的样子：

![手机模拟器](../Images/a0b22c8af14210465e83bdd5730e2586.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:56:59.690

对于最终用户将要看到的每个视图（屏幕），您都需要创建一个页面来保存每个页面的所有逻辑和功能。您在以自己的方式循环浏览页面中所做的一切。

```
FrameName.Navigate(PageName); 
```

请记住先初始化页面，然后才能使用它们。您可以在使用 Navigate 函数时初始化它们，例如：

```
FrameName.Navigate(new PageName()); 
```

这适用于较小的项目，较大的项目您可能希望在导航时使用一些巧妙的方式来初始化页面，例如：

```
if(TimeToLoadPage == True)
{
    PageName pagename = new PageName();
    RunPageNavigation()
}

public Void RunPageNavigation()
{
    FrameName.Navigate(pagename);
} 
```

您可以通过从 Frame 继承（Going through Ancestry route）来数据绑定页面的宽度和高度。您可以在页面中执行与窗口完全相同的所有基于内容的操作。但是，您不能像窗口一样控制页面。

希望这会有所帮助。

# java - Java 中的 NullPointerException - InputMap、ActionMap

> ID：14528712
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:08:33.133
> 
> 标签：java, key

我得到 NullPointerException。这里有什么问题？

```
public class MainPanel extends JPanel {
    private final int WIDTH = 600;
    private final int HEIGHT = 400;
    private InputMap imap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
    private ActionMap amap;

    public MainPanel() {
        setPreferredSize(new Dimension(WIDTH, HEIGHT));
        makeShortcut("UP", new AbstractAction() {
            public void actionPerformed(ActionEvent ev) {
                System.out.print("up");
            }
        });
    }

    public void makeShortcut(String keys, AbstractAction action) {
        imap.put(KeyStroke.getKeyStroke(keys), "action"+keys);
        amap.put("action"+keys, action);
    }
} 
```

*您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:10:10.750

```
amap.put("action"+keys, action); 
```

您从未分配过`amap`，因此它的默认值为`null`. 您不能在空引用上调用实例方法。

# php - PHP 和 Apache：将 php 参数隐藏为目录；第二个参数未访问？

> ID：14528714
> 
> 赞同：0
> 
> 时间：2013-01-25T19:08:59.200
> 
> 标签：php, apache, mod-rewrite

我目前正在使用 apache 代码：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Categories + Page:
RewriteRule ^([a-z\-]+)/([a-z\-]+)$ /index.php?category=$1&amp;page=$2
RewriteRule ^([a-z\-]+)/([a-z\-]+)/$ /index.php?category=$1&amp;page=$2
# Categories:
RewriteRule ^([a-z\-]+)$ /index.php?category=$1
RewriteRule ^([a-z\-]+)/$ /index.php?category=$1 
```

这会将我的网址从：example.com?category=software&page=mobile 变成 example.com/software/mobile/

哪个工作正常，并且 php 文件能够 $_GET['category'] 正常；但是，由于某种原因，它无法识别 $_GET['page']; 它只会导致它每次都是空的。

在 Apache 代码方面我不是最好的，所以有人能告诉我哪里出错了吗？

我用于 php 来获取变量的代码很简单：

```
$category = $_GET['category'];
$page = $_GET['page']; 
```

此外，如果有人可以帮助我优化它，使其适用于任意数量的参数，那就更好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:45:04.647

```
RewriteRule ^([a-z\-]+)/([a-z\-]+)$ /index.php?category=$1&page=$2 [PT,L,QSA]
RewriteRule ^([a-z\-]+)/([a-z\-]+)/$ /index.php?category=$1&page=$2 [PT,L,QSA]
# Categories:
RewriteRule ^([a-z\-]+)$ /index.php?category=$1 [PT,L,QSA]
RewriteRule ^([a-z\-]+)/$ /index.php?category=$1 [PT,L,QSA] 
```

添加 QSA 可能会有所帮助

> 当替换 URI 包含查询字符串时，RewriteRule 的默认行为是丢弃现有的查询字符串，并将其替换为新生成的查询字符串。使用 [QSA] 标志会合并查询字符串。
> 
> 考虑以下规则：
> 
> RewriteRule /pages/(.+) /page.php?page=$1 [QSA]
> 
> 使用 [QSA] 标志，对 /pages/123?one=two 的请求将被映射到 /page.php?page=123&one=two。如果没有 [QSA] 标志，相同的请求将被映射到 /page.php?page=123 - 也就是说，现有的查询字符串将被丢弃。

# unix - Grep - 选项卡 + 模式文件

> ID：14528716
> 
> 赞同：0
> 
> 时间：2013-01-25T19:09:02.437
> 
> 标签：unix, grep

我希望用 -f 为 grep 提供一个模式文件，但在每个模式之前和之后添加一个文字选项卡（来自文件）。由于我正在处理制表符分隔的文件，因此此方法将允许我 grep 精确匹配列。

是的，我必须使用 Grep。awk 和 perl 似乎无法处理我的大型模式文件。

是的，我可以在模式文件中添加选项卡，但是我有很多模式文件，所以这需要很长时间，但如果都失败了，我会这样做。

这对于希望在 tsv 文件中进行精确列匹配的任何人都应该很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:16:52.143

我会尝试“即时”添加标签：

```
grep -f <(sed 's/^/\\t/; s/$/\\t/' patterns) [args...] 
```

让`grep`解释`\t`为标签。

# github - 我如何使用命令行从 git hub 下载代码

> ID：14528724
> 
> 赞同：3
> 
> 时间：2013-01-25T19:09:22.040
> 
> 标签：github, google-code

我知道我的问题显然很愚蠢。我想通过 Google 代码为我的游戏下载和引擎。我找到了下载和引擎的[链接](http://code.google.com/p/andengineexamples/source/checkout "这里")，但是当我访问该链接时，我发现了这个：

```
hg clone https://code.google.com/p/andengineexamples/ 
```

我也无法从 git-Hub“Get-Read-Only”下载只读文件。

如何使用命令行下载源代码？有什么软件需要安装在我的笔记本电脑上才能下载吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:16:09.947

您可以下载以下软件来下载这样的项目

1\. [SVN](http://tortoisesvn.net/downloads.html) 2\. [Git](http://git-scm.com/downloads) _

# visual-c++ - 使用 C++ 获取 WINdows 上所有驱动器的当前工作目录

> ID：14528737
> 
> 赞同：1
> 
> 时间：2013-01-25T19:10:14.133
> 
> 标签：visual-c++, python-2.7

我试图在 Visual C++ 中复制 python 的 os.path.abspath() 行为。这就是棘手的地方：我有 2 个或更多驱动器，例如 C: 和 U:。在我的外壳中，我做了一个 cd U:/udir。pwd 给出 U:/udir。然后我做一个 cd C:/cdir。pwd 现在给出 C:/cdir。

现在我打开 python 说 os.path.abspath('U:newdir/file.ext')

它打印 U:/udir/newdir/file.ext。我的问题是仅使用 Windows API 或本机 C++ 调用，如果我的应用程序在 C: 上运行，我如何获取 U: 的当前工作目录。

GetCurrentDirectory 或 _getcwd 不接受驱动器，所以我很迷茫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:38:30.907

使用[GetFullPathName](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364963%28v=vs.85%29.aspx)（这是 Python 在 Windows 上使用的名称）。该文档没有明确提到使用特定于驱动器的“当前目录”的可能性，但这就是它的工作方式。

# java - 我想破坏 swf ...然后“不腐败”使其成为有效的 swf .. 可能吗？安卓Java

> ID：14528745
> 
> 赞同：0
> 
> 时间：2013-01-25T19:10:34.943
> 
> 标签：java, android, eclipse, tablet

我正在尝试做这样的事情：获取一个 swf 文件损坏它，然后 ..在设备内部将它再次变为可读（未损坏）......我会检查，如果是我自己写的设备指纹设备可以清除 swf .. 有吗？

我可以这样做吗？方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:15:38.453

这需要文件 I/O

使用 base64 或任何东西加密 swf，并将任何随机字符串附加到文件的开头或结尾，将其保存在某处，并在您想使用它时对其进行解密

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:22:02.587

当然，有很多方法可以对 swf 文件的内容进行可逆更改，这样在更改被撤消之前，其他播放器无法播放该文件。至少，您可以反转它的 3 字节签名以使其无法播放并再次反转它。

但是你使用的任何这种幼稚的机制都可以很容易地被破解。它*不会*保护您免受任何恶意活动的侵害，只会给合法使用带来不便。

如果您真的需要这样做，请查看更复杂的加密和 DRM

# c# - SelectList 文本中的多个值

> ID：14528746
> 
> 赞同：6
> 
> 时间：2013-01-25T19:10:39.573
> 
> 标签：c#, asp.net-mvc-3

我试图在`dropdownlist`文本中显示多个值。下面给出示例。

```
SelectList(Parts, "pno", "pcode"+"pname") 
```

在哪里

`pno`是部件号。

`pcode`是部分代码。

`pname`是零件名称

现在请告诉我如何在不使用 viewmodel 的情况下连接部分代码和名称（我想使用域模型来完成）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T19:19:23.870

根据 microsoft 文档， SelectList(IEnumerable, String, String) 使用列表、数据值字段和数据文本字段的指定项来初始化 SelectList 类的新实例。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx)

为此，您需要将名称连接到模型上的新属性中。下面带有 8 个 ups 的堆栈溢出答案是我最喜欢的方法。

[如何在 SelectList 文本描述中组合两个字段？](https://stackoverflow.com/questions/2758734/how-can-i-combine-two-fields-in-a-selectlist-text-description)

在你的情况下，它看起来像这样......

```
public class Model
{
    public string pcode { get; set; }
    public string pname { get; set; }
    public string ConcatDescription { get; set; }

    public string ConcatDescription 
    {
        get 
        {
            return string.Format("{0} {1}", pcode , pname );
        }
    }
} 
```

然后你可以直接调用该属性。

```
SelectList(Parts, "pno", "ConcatDescription ") 
```

编辑：在代码中添加以进行澄清。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T19:20:55.633

我不确定这是否会有所帮助。从 ac# 的角度来看，您可以像这样构造您的类

```
public class Parts
{
    public string PartCode { get; set; }

    public string PartName { get; set; }

    public string PartNo
    {
        get
        {
            return PartCode + PartName;
        }
        set;
    }
} 
```

然后使用选择列表之类的。

```
SelectList(Parts, "PartNo") 
```

# python - Python递归函数似乎丢失了一些变量值

> ID：14528747
> 
> 赞同：2
> 
> 时间：2013-01-25T19:10:39.827
> 
> 标签：python, function, variables, recursion

我有 4x4 字母表，我想在那里找到所有可能的路径。他们是词的候选者。我对变量“used”有疑问它是一个列表，其中包括路径已经存在的所有位置，因此它不会再去那里。每条路径都应该有一个使用列表。但它不能正常工作。例如，我有一个打印当前单词和使用列表的测试打印。有时这个词只有一个字母，但路径已经遍历了所有 16 个单元格/索引。

大小为 8 的 for 循环适用于所有可能的方向。主函数执行 16 次追逐函数 - 每个可能的起点执行一次。移动函数在移动到特定方向后返回索引。并且 is_allowed 测试是否允许移动到某个部门。样本输入：oakaoastsniuttot。（4x4 表，其中前 4 个字母是第一行等）示例输出：可以在某个单词的字典中找到的所有真实单词在我的情况下，它可能会输出一个或两个单词，但不是几乎全部，因为它认为某些单元格被使用，即使它们不是。

```
def chase(current_place, used, word):

   used.append(current_place)   #used === list of indices that have been used
   word += letter_list[current_place]
   if len(word)>=11:
       return 0
   for i in range(3,9):
       if len(word) == i and word in right_list[i-3]:  #right_list === list of all words
        print word
        break
   for i in range(8):
      if is_allowed(current_place, i) and (move(current_place, i) not in used):    
          chase(move(current_place, i), used, word) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:34:30.593

问题是只有一个`used`列表可以传递。您有两个选项可以解决此问题`chase()`：

1.  制作一份副本`used`并使用该副本。
2.  从函数返回之前，请撤消`append()`开始时所做的操作。

# javascript - 切换模式时缺少 janrain 小部件

> ID：14528749
> 
> 赞同：1
> 
> 时间：2013-01-25T19:10:56.557
> 
> 标签：javascript, janrain

我有一个 janrain 小部件，直到几天前都可以正常工作。

有一个在其上显示 janrain 小部件的模式，单击此模式上的链接会翻转到另一个显示相同 janrain 小部件的模式。由于某种原因，在单击第一次弹出的模式上的链接后，此小部件停止显示在 Firefox 和 IE 中。它虽然适用于铬。在火狐和 IE 的情况下，我看到 janrainEngageEmbed 为空。之前 janrain 小部件已附加到 janrainEngageEmbed div，只要 janrainEngageEmbed div 可见，它就会显示。我看到最近发布了 janrain js 文件，但不确定这是否会导致此问题。

有什么想法可以调试这个问题吗？

更新：我认为这个问题是由于 janrain 最近对他们在今年 1 月发布的新版本 2013.1_ws_widgets_rc8 所做的更改引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:34:48.523

尝试在每个点击处理程序中调用 janrain.engage.signin.widget.init()。这应该使小部件内容重新加载。

# iphone - 如何从 sudzc 获取 xml 或反序列化响应？

> ID：14528750
> 
> 赞同：1
> 
> 时间：2013-01-25T19:10:58.673
> 
> 标签：iphone, ios, xml, soap, sudzc

我刚刚开始在 iOS iPhone 应用程序上使用 sudzc 进行一些测试，以访问肥皂服务。我使用带有正确 wsdl 链接的 sudzc 并下载了自定义代码。

然后我初始化服务：

```
// Create the service
service = [EMLMagentoService service]; 
```

并打开一个会话：

```
// Returns NSString*
/* Login user and retrive session id */
SoapRequest *result=[service login:self action:@selector(loginHandler:) username: @"user.test" apiKey: @"GJGDWYgfgjgYGuueyfgue"]; 
```

返回我的会话 ID 字符串...而不是我使用该 ID 进行下一次调用

```
// Handle the response from login.
- (void) loginHandler: (id) value {

    NSLog(@"##### loginHandler ######");

    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }

    NSString *sessionID = (NSString *)value;

    [service call:self action:@selector(callHandler:) sessionId:sessionID resourcePath:@"catalog_category.level" args:nil];

}

// Handle the response from call.
- (void) callHandler: (id) value {

    NSLog(@"##### callHandler ######");
    // Handle errors
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }

    NSLog(@"Kind of class: %@",[value class]);
    NSLog(@"result:%@", value);
} 
```

我得到的是一个没有任何格式的字符串……没有 xml……没有数组对象……

```
##### loginHandler ######
 ##### callHandler ######
 Kind of class: __NSCFString
 result:category_id2parent_id1nameDefault Categoryis_active1position1level1 
```

如何获取 xml 或反序列化对象？

# php - 在 MySQL 数据库中搜索标签

> ID：14528763
> 
> 赞同：0
> 
> 时间：2013-01-25T19:11:29.190
> 
> 标签：php, mysql, search, tags

我正在创建一个系统以允许用户上传项目并向它们添加“标签”以帮助它们在搜索中可见。目前，我有一个这样工作的数据库：

```
id|title|tags 
```

`tags`用户自己输入的以逗号分隔的标签列表在哪里。我已经读到这是一种糟糕的方法，~~但是拥有一个标签表并将每个 ID 与项目记录一起存储基本上是一回事。~~

我怎样才能运行搜索以首先返回最相关的结果？我目前正在使用它，它有效，但不按相关性排序：`SELECT * FROM items WHERE tags LIKE '%$tag%' LIMIT 0,20";`where`$tag`只是一个标签，没有逗号（它在循环内）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T19:16:42.980

`having a tags table and storing each ID along with the item record is basically the same thing`

不。不。不。这绝对不是一回事。

您使用“逗号分隔列表”版本，并尝试提出查询来解决这些问题：

1.  从所有标题中删除标签 ID #7
2.  有多少标题使用标签 #87

使用正确规范化的表：

1.  从 users_tags 中删除 tag_id=7
2.  从 users_tags 中选择计数（*），其中 tag_id = 87

使用您的版本：

1.  UPDATE users_tags SET tags=.... 在这里插入大量丑陋的字符串操作...
2.  SELECT count(*) FROM users_tags WHERE tag_id=87 OR tag_id='87,%' OR tag_id LIKE '%,87,%' or tag_id LIKE '%,87'

看到不同？

# java - 自定义 ServiceView w/ View On Top 应用程序/电话在 6.5 分钟后崩溃

> ID：14528764
> 
> 赞同：0
> 
> 时间：2013-01-25T19:11:35.850
> 
> 标签：java, android, crash, admob, surfaceview

我正在使用自定义 SurfaceView 编写一个小游戏。我想在 SurfaceView 的底部放置一个 AdMob 视图，但在运行该应用程序大约六分钟后，该应用程序抛出一个错误，然后重新启动手机。我已经用一个按钮替换了 AdMob 视图，但错误仍然存​​在，所以我认为问题是由于将任何视图放在 SurfaceView 上引起的。如果我从 SurfaceView 顶部删除任何视图，游戏将无限期地运行良好。

我尝试使用除RelativeLayout 以外的布局，但问题仍然存在。我想知道是否有人以前遇到过这种情况，或者有任何其他途径可以探索。

自定义 SurfaceView：

```
public class AndroidFastRenderView extends SurfaceView implements Runnable
{
    private static final String TAG = "AndroidFastRenderView";
    AndroidGame game;
    Bitmap framebuffer;
    Thread renderThread = null;
    SurfaceHolder holder;
    volatile boolean running = false;

    public AndroidFastRenderView(AndroidGame game, Bitmap framebuffer)
    {
        super(game);
        this.game = game;
        this.framebuffer = framebuffer;
        this.holder = getHolder();
    }

    public AndroidFastRenderView(Context context)
    {
        super(context);
    }

    public void resume()
    {
        running = true;
        renderThread = new Thread(this);
        renderThread.start();
    }

    public void run()
    {
        Rect dstRect = new Rect(0,0,80,120);
        long startTime = System.nanoTime();
        while (running)
        {
            if(!holder.getSurface().isValid())
            {
                continue;
            }

            float deltaTime = (System.nanoTime() - startTime) / 1000000000.0f;
            startTime = System.nanoTime();

            game.getCurrentScreen().update(deltaTime);
            game.getCurrentScreen().present(deltaTime);

            Canvas canvas = null;

            canvas = holder.lockCanvas();

            if (canvas != null)
            {
                dstRect = canvas.getClipBounds();
                canvas.drawBitmap(framebuffer, null, dstRect, null);
                holder.unlockCanvasAndPost(canvas);
            }
        }
    }

    public void pause()
    {
        Log.e(TAG, "Paused");
        running = false;
        while(true)
        {
            try {
                renderThread.join();
                break;
            } catch (InterruptedException e) {
                // retry
            }
        }
    }

} 
```

在主要活动中构建界面：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    boolean isLandscape = getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;

    int frameBufferWidth = isLandscape ? 120 : 80;
    int frameBufferHeight = isLandscape ? 80 : 120;

    Bitmap frameBuffer = Bitmap.createBitmap(frameBufferWidth, frameBufferHeight, Config.RGB_565);

    float scaleX = (float) frameBufferWidth / getWindowManager().getDefaultDisplay().getWidth();
    float scaleY = (float) frameBufferHeight / getWindowManager().getDefaultDisplay().getHeight();

    renderView  = new AndroidFastRenderView(this, frameBuffer);
    graphics    = new AndroidGraphics(getAssets(), frameBuffer);
    fileIO      = new AndroidFileIO(getAssets());
    audio       = new AndroidAudio(this);
    input       = new AndroidInput(this, renderView, scaleX, scaleY);
    screen      = this.getStartScreen();

    PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "GLGame");

    if (useAds)
    {
        //adView = new AdView(this, AdSize.SMART_BANNER, AD_UNIT_ID);

        LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

        //adView.setLayoutParams(params);

        RelativeLayout layout = new RelativeLayout(this);
        layout.addView(renderView);
        //layout.addView(adView);

        Button button = new Button(this);
        button.setLayoutParams(params);
        button.setText("Blargle");
        layout.addView(button);

        //adView.loadAd(new AdRequest());

        setContentView(layout);

    }
    else
    {
        setContentView(renderView);
    }
} 
```

错误的LogCat：

```
01-25 13:50:18.084: E/SurfaceTextureClient(10342): dequeueBuffer failed (Broken pipe)
01-25 13:50:18.084: E/SurfaceHolder(10342): Exception locking surface
01-25 13:50:18.084: E/SurfaceHolder(10342): java.lang.IllegalArgumentException
01-25 13:50:18.084: E/SurfaceHolder(10342):     at android.view.Surface.lockCanvasNative(Native Method)
01-25 13:50:18.084: E/SurfaceHolder(10342):     at android.view.Surface.lockCanvas(Surface.java:88)
01-25 13:50:18.084: E/SurfaceHolder(10342):     at android.view.SurfaceView$4.internalLockCanvas(SurfaceView.java:754)
01-25 13:50:18.084: E/SurfaceHolder(10342):     at android.view.SurfaceView$4.lockCanvas(SurfaceView.java:734)
01-25 13:50:18.084: E/SurfaceHolder(10342):     at com.somethingutility.games.framework.impl.AndroidFastRenderView.run(AndroidFastRenderView.java:60)
01-25 13:50:18.084: E/SurfaceHolder(10342):     at java.lang.Thread.run(Thread.java:856) 
```

此错误会一直重复，直到手机重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T00:35:39.437

通过专门将 renderRiew 设置为 AdView，尽量避免在 SurfaceView 上显示`ABOVE`AdView：

```
params.addRule(RelativeLayout.ABOVE, renderView.getId()); 
```

如果 renderView 没有 ID，您可能需要给它一个 ID。

# stack - 动态分配与使用堆栈

> ID：14528765
> 
> 赞同：0
> 
> 时间：2013-01-25T19:11:43.340
> 
> 标签：stack, dynamic-allocation

我有一个相对简单的问题。在我的一个 CS 课程中，为了完成一项作业，我们必须使用 C++ 和 XLib 库制作一个简单的横向卷轴游戏。在我们为班级开设的论坛中，很多学生抱怨内存泄漏和动态分配问题。我几乎完成了任务，但我不必使用任何动态分配。我一直在使用堆栈空间，到目前为止还没有遇到任何问题。

我只是想知道这是否有任何缺点？似乎很多其他学生都在使用动态分配。如果我的小游戏仅使用堆栈就可以正常工作，我有什么理由担心吗？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:18:29.843

在堆栈上使用内存本身并没有错，尽管您需要小心分配任何大小合适的东西。

例如：

```
// inside some function ...
int blah[1000];
// ...code using blah 
```

可能工作正常，或者您可能会用完空间并静默失败。

如果您需要大量内存，我建议使用`new`/ ，但在堆栈上使用小数组很好。`malloc()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:14:45.197

如果您非常担心动态内存分配和内存泄漏，为什么不尝试使用智能指针：

这里[http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)

# javascript - 弹出窗口失去焦点时隐藏加载覆盖

> ID：14528766
> 
> 赞同：3
> 
> 时间：2013-01-25T19:11:44.523
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我正在开发一个带有弹出窗口的 chrome 扩展程序，当您单击扩展程序图标时会显示该窗口。在弹出窗口中，我有一个按钮，一旦单击它就会在当前打开的标签页上显示加载框。

截屏：

![在此处输入图像描述](../Images/094dce56db508c8ed80b3a56bb04c272.png)

使用一段时间后，装载盒被移除`setTimeout`。但是，这仅在弹出窗口本身可见时才有效。如果我单击弹出窗口上的按钮，然后转到其他选项卡并返回或单击选项卡页面上的其他位置，则弹出窗口隐藏但加载框仍然可见。

即使弹出窗口不可见/失焦，有谁知道如何隐藏加载框？我认为它会消失，因为有`setTimeout`删除它的功能，但是当弹出窗口失去焦点时它不起作用。

无需在此处粘贴所有相关代码，[这里](https://dl.dropbox.com/u/11600057/Example.zip)是扩展程序的下载链接，以便您可以准确了解我的意思。

在实际扩展中，我有 ajax 请求而不是`setTimeout`：

```
 $.ajax({
         url : 'localhost url here....',
         data : data, // this is searialized form data
         dataType : 'json',
         method : 'post',
         success : function (r) {
             if (r.success) {
                 window.close();

                 var notification = webkitNotifications.createNotification(
                    'img/48.png',
                    'Done!',
                    'The page has been saved successfully :)'
                 );

                 notification.show();

                 setTimeout(function () {
                     notification.cancel();
                 }, 5000);

             }
             else {
                 if (r.error) {
                     $ediv.text(r.error).fadeIn('fast');
                 }
             }
         },
         error : function (r) {
             $ediv.text('Unknown error, please try again later.').fadeIn('fast');
         },
         complete : function (r) {
             chrome.tabs.executeScript(
                null, {code : "document.body.removeChild(document.getElementById('__wnoverlay__'))"}
             );
         }
     }); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:41:03.843

# 脚步

*   将此 AJAX 请求移动到后台页面。
*   单击按钮（将对话框注入页面的位置）将消息传递到后台脚本以存储**tab.id**（检查下一点）。
*   使用从浏览器操作接收到的**tab.id**执行您的删除对话框代码（需要选项卡 ID，因为用户可以随时切换他的活动选项卡\窗口）。

# 参考

*   [消息传递](https://developer.chrome.com/extensions/messaging.html)
*   [获取活动选项卡的详细信息](https://developer.chrome.com/extensions/tabs.html#method-getCurrent)

# 编辑 1

在清单文件中添加以下内容，确保您使用背景页面注册背景和 jquery。

```
"background":{
    "scripts":["js/jquery.js","background.js"]
}, 
```

在里面添加以下代码`background.js`

此代码将 AJAX 调用迁移到后台页面并在 5 秒阈值后执行删除对话框。

```
function invokeAJAX(tabid) {

    $.ajax({
        url: 'localhost url here....',
        data: data, // this is searialized form data
        dataType: 'json',
        method: 'post',
        success: function (r) {
            if (r.success) {
                window.close();

                var notification = webkitNotifications.createNotification(
                    'img/48.png',
                    'Done!',
                    'The page has been saved successfully :)');

                notification.show();

                setTimeout(function () {
                    notification.cancel();
                }, 5000);

            } else {
                if (r.error) {
                    $ediv.text(r.error).fadeIn('fast');
                }
            }
        },
        error: function (r) {
            $ediv.text('Unknown error, please try again later.').fadeIn('fast');
        },
        complete: function (r) {
            chrome.tabs.executeScript(
            tabid, {
                code: "document.body.removeChild(document.getElementById('__wnoverlay__'))"
            });
        }
    });

} 
```

您的 popup.js 看起来像这样，您可以直接调用后台 Page 的功能

```
document.addEventListener("DOMContentLoaded", function () {

    $('#btn').click(function () {

        // show loading message

        // chrome.extension.sendRequest({}, function(response) {});

        chrome.tabs.executeScript(null, {
            "code": 'var __a=document.createElement("DIV");__a.id="__wnoverlay__";__a.style.width="300px";__a.style.height="80px";__a.style.position="fixed";__a.style.top="50%";__a.style.left="50%";__a.style.color="#fff";__a.style.zIndex=9999999;__a.style.opacity=0.8;__a.style.textAlign="center";__a.style.padding="10px";__a.style.border="12px solid #cccccc";__a.style.marginLeft="-150px";__a.style.marginTop="-40px";__a.style.fontWeight="bold";__a.style.fontSize="17px";__a.style.borderRadius="10px";__a.innerHTML="Working, please wait...";document.body.appendChild(__a);'
        });
        chrome.tabs.query({}, function (tab) {//Get current tab 

            chrome.extension.getBackgroundPage().invokeAJAX(tab.id);//DO Ajax call and delete div added after 5 sec to current tab only
        });

    });
}); 
```

# 编辑 2

### popup.js

对`popup.js`

*   制作 tabs.query 以仅获取**当前活动的浏览正常**窗口
*   回调返回 tab 数组，所以使用**tab[0]**索引。

在这些更改之后，它会发送正确的消息。

```
document.addEventListener("DOMContentLoaded", function () {

    $('#btn').click(function () {
        var $this = $(this);

        chrome.tabs.executeScript(
        null, {
            "code": 'var __a=document.createElement("DIV");__a.id="__wnoverlay__";__a.style.width="300px";__a.style.height="80px";__a.style.position="fixed";__a.style.top="50%";__a.style.left="50%";__a.style.color="#fff";__a.style.background="url(http://groot.com/WebNote_HTML/ChromeExtension/img/spinner.gif) center no-repeat #999999";__a.style.zIndex=9999999;__a.style.opacity=0.8;__a.style.textAlign="center";__a.style.padding="10px";__a.style.border="12px solid #cccccc";__a.style.marginLeft="-150px";__a.style.marginTop="-40px";__a.style.fontWeight="bold";__a.style.fontSize="17px";__a.style.borderRadius="10px";__a.innerHTML="Working, please wait...";document.body.appendChild(__a);'
        });
        //Proper Query Formation    
        chrome.tabs.query({
            "active": true,
            "status": "complete",
            "currentWindow": true,
            "windowType": "normal"
        }, function (tab) { //Get current tab
            //DO Ajax call
            //tab is an array so we need to access its first index
            chrome.extension.getBackgroundPage().invokeAJAX(tab[0].id, $this.closest('form').serialize());
        });

    });

}); 
```

### 背景.js

对`background.js`

*   消除`$ediv.text`了代码引用，因为它在后台页面中未定义。

在这些更改之后，这是最终代码。

```
 function invokeAJAX(tabid, data) {

     data = data || '';

     $.ajax({
         url: 'http://groot.com/WebNote_HTML/ChromeExtension/savePage.php',
         data: data,
         dataType: 'json',
         method: 'post',
         success: function (r) {
             if (r.success) {
                 // window.close();

                 var notification = webkitNotifications.createNotification(
                     'img/48.png',
                     'Done!',
                     'The page has been saved successfully :)');

                 notification.show();

                 setTimeout(function () {
                     notification.cancel();
                 }, 5000);

             } else {
                 if (r.error) {
                     //$ediv.text(r.error).fadeIn('fast');
                     console.log("Error .." + r);
                 }
             }
         },
         error: function (r) {
             //$ediv.text('Unknown error, please try again later.').fadeIn('fast');
             console.log("Error .." + r);
         },
         complete: function (r) {
             chrome.tabs.executeScript(
             tabid, {
                 code: "document.body.removeChild(document.getElementById('__wnoverlay__'))"
             });
         }
     });

 } 
```

# 编辑 3

```
$('#btn').click(function () {
    var $this = $(this);
    //Proper Query Formation    
    chrome.tabs.query({
        "active": true,
        "status": "complete",
        "currentWindow": true,
        "windowType": "normal"
    }, function (tab) { //Get current tab
        //DO Ajax call
        //tab is an array so we need to access its first index
        chrome.tabs.executeScript(
        tab[0].id, {
            "code": 'var __a=document.createElement("DIV");__a.id="__wnoverlay__";__a.style.width="300px";__a.style.height="80px";__a.style.position="fixed";__a.style.top="50%";__a.style.left="50%";__a.style.color="#fff";__a.style.background="url(http://groot.com/WebNote_HTML/ChromeExtension/img/spinner.gif) center no-repeat #999999";__a.style.zIndex=9999999;__a.style.opacity=0.8;__a.style.textAlign="center";__a.style.padding="10px";__a.style.border="12px solid #cccccc";__a.style.marginLeft="-150px";__a.style.marginTop="-40px";__a.style.fontWeight="bold";__a.style.fontSize="17px";__a.style.borderRadius="10px";__a.innerHTML="Working, please wait...";document.body.appendChild(__a);'
        });
        $('#url').val(tab[0].url);
        $('#title').val(tab[0].title);
        $loader.hide();
        chrome.extension.getBackgroundPage().invokeAJAX(tab[0].id, $this.closest('form').serialize());
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:50:56.630

未显示时，弹出代码停止执行。但是，注入的代码总是被执行。所以你应该在注入的代码中设置超时，如下所示：

```
chrome.tabs.executeScript(null, {"code": 'setTimeout(function(){ document.body.removeChild(document.getElementById("__wnoverlay__")); }, 5000)'}); 
```

用上面的代码替换第 13-15 行的代码，它应该可以工作。

# php - MYSQL 返回日期乱序

> ID：14528770
> 
> 赞同：0
> 
> 时间：2013-01-25T19:12:01.887
> 
> 标签：php, mysql, sorting

我按月和年列出所有新闻文章，以及该月发生了多少篇文章......

但是我注意到在新的一年里它只按月排序而不是

这是我的 SQL

```
$archive1_sql = "SELECT YEAR(`ndate`) AS 'year', MONTH(`ndate`) AS 'month', COUNT(`nid`) AS 'count'  FROM `weaponsnews` GROUP BY YEAR(`ndate`), MONTH(`ndate`) DESC"; 
```

它返回

```
December 2012 (1)
November 2012 (11)
October 2012 (6)
September 2012 (8)
August 2012 (16)
July 2012 (8)
June 2012 (6)
May 2012 (12)
April 2012 (4)
March 2012 (2)
February 2012 (4)
January 2013 (1) 
```

我想要它做的是这样的

```
January 2013 (1)
December 2012 (1)
November 2012 (11)
October 2012 (6)
September 2012 (8)
August 2012 (16)
July 2012 (8)
June 2012 (6)
May 2012 (12)
April 2012 (4)
March 2012 (2)
February 2012 (4) 
```

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:13:49.440

更改`GROUP BY`为：

```
GROUP BY YEAR(`ndate`) DESC, 
         MONTH(`ndate`) DESC 
```

如果没有`ORDER BY`，MySQL 有一个（非标准 SQL）特性，它根据排序对结果进行`GROUP BY`排序。它还允许出现`ASC`and`DESC`关键字。

从 MySQL 文档**[`SELECT`语法](http://dev.mysql.com/doc/refman/5.5/en/select.html)**：

> *   如果使用`GROUP BY`，输出行将根据列进行排序，就`GROUP BY`好像**您`ORDER BY`对相同的列**有一个。为了避免`GROUP BY`产生的排序开销，添加`ORDER BY NULL`：
>     
>     
>     
>     ```
>     SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL; 
>     ```
>     
>     
> *   MySQL 扩展了该`GROUP BY`子句，以便您还可以在该子句中指定的列之后指定`ASC`和`DESC`：
>     
>     
>     
>     ```
>     SELECT a, COUNT(b) FROM test_table GROUP BY a DESC; 
>     ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T19:15:07.720

也添加 DESC 和 YEAR

```
SELECT
  YEAR(`ndate`) AS 'year',
  MONTH(`ndate`) AS 'month',
  COUNT(`nid`) AS 'count'
FROM `weaponsnews`
GROUP BY YEAR(`ndate`) , MONTH(`ndate`)
ORDER BY YEAR(`ndate`) DESC , MONTH(`ndate`) DESC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T19:32:51.320

要按（倒序）时间顺序获取您的记录，请使用“order by ndate DESC”：

```
SELECT
  YEAR(`ndate`) AS 'year',
  MONTH(`ndate`) AS 'month',
  COUNT(`nid`) AS 'count'
FROM `weaponsnews`
GROUP BY YEAR(`ndate`) , MONTH(`ndate`)
ORDER BY ndate DESC 
```

然后你可以按你想要的任何东西（天，周......）进行分组，你不需要更改你的'order by'语句。

# ios - 如何强制在 UIWebView 中播放的视频在 iPad 上全屏显示？

> ID：14528773
> 
> 赞同：7
> 
> 时间：2013-01-25T19:12:17.423
> 
> 标签：ios, objective-c, uiwebview, youtube-api, mpavcontroller

我正在使用 UIWebView 播放 YouTube 视频，如下所示：

```
self.webView.mediaPlaybackRequiresUserAction = NO;
self.webView.allowsInlineMediaPlayback = NO;
[self.webView loadHTMLString:videoEmbedCode baseURL:nil]; 
```

我想强制视频全屏播放，而无需用户点击右下角的按钮。这在 iPhone 上运行良好（点击播放器播放并自动进入全屏），但在 iPad 上不起作用（显示正常的内联播放器）。

我认为设置`allowsInlineMediaPlayback`为`NO`可以解决问题，但显然不是。

**有没有办法强制 HTML5 视频在 iPad 上全屏播放？**

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-25T19:23:50.227

如果您尝试直接全屏播放 youtube 视频，请使用大小为 fullScreen 的 webview，然后相应地处理其旋转并更改播放器的旋转大小。如果您需要更多帮助，那么我也可以帮助您编写代码，了解如何更改旋转时的播放器大小。

# jquery - Kendo UI 窗口关闭事件：防止窗口关闭

> ID：14528778
> 
> 赞同：5
> 
> 时间：2013-01-25T19:12:43.677
> 
> 标签：jquery, events, kendo-ui, kendo-window

我们正在为具有各种形式的应用程序创建警告消息。在简单的页面中这很容易，我们只检测表单元素的变化，如果用户想要卸载页面，我们会向他们显示警告消息。

但是......我们在 Kendo Windows 中也有一些表单，问题是如果用户想要关闭窗口，我们需要显示相同的确认消息。这是我们现在拥有的脚本：

```
$('div:has(div[data-role="window"])').find('a:has(span.k-i-close)').live('click', function (e) {
    if (formHasChanged) {
        alert('pepe');
        return false;
    }
    return true;
}); 
```

**该脚本的问题在于它没有阻止窗口关闭**，关闭事件似乎发生在我们的警报之前。此解决方案可能有效[http:](http://www.kendoui.com/forums/ui/window/new-event-onclosing.aspx) //www.kendoui.c​​om/forums/ui/window/new-event-onclosing.aspx ，但我们的窗口是动态创建的。

有谁知道如何解决这个问题？

提前致谢！

代码是我们想要插入这个剑道东西的解决方法：

```
var formHasChanged = false;
$('form.withWarningMessage').find('input,select,textarea').live('change', function () {
    formHasChanged = true;
    window.onbeforeunload = function () {
        if (formHasChanged) {
            return confirmWarningMessage;
        }
    };
    $('input:submit').live('click', function () {
        formHasChanged = false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T20:49:25.800

即时创建 Windows 并不重要。如果你可以创建它们，那么你可以绑定这样的处理程序。如果 Alex Gyoshev 共享的代码不好。

您最初可以像这样绑定处理程序：

```
$("#window").kendoWindow({
    close:function(e){
        if (!confirm("are you sure?"))
        e.preventDefault();
    }
}) 
```

分享有关您的设置的详细信息，应该有一种方法可以将其中一种方法集成到您的案例中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-04T07:55:54.357

我跑过剑道窗口`.Events(events => events.Close("onClose")`对我来说根本没有开火的地方。也许是剑道虫子。但是就是说，我使用您发布的链接中的代码解决了这个问题：

```
$("#myWin").data("kendoWindow").bind("close", function(e) {
    if (!confirm("Are you sure?"))
        e.preventDefault();
}); 
```

您可以将其视为与您发布的代码完全分开的例程 - 它不会进入那里。如果你真的在动态创建新的 Kendo Windows，你应该给它们所有唯一的、单独的 ID，然后将上面的代码放入一个函数中，传入该 ID 并用传入的动态替换“#myWin” - 生成的 ID，因此每个窗口都会获取`bind`.

有关剑道 Windows 的更多信息：http: [//demos.telerik.com/kendo-ui/window/events](http://demos.telerik.com/kendo-ui/window/events)

# asp.net-web-api - 仅对特定操作使用驼峰式序列化

> ID：14528779
> 
> 赞同：12
> 
> 时间：2013-01-25T19:12:52.010
> 
> 标签：asp.net-web-api

我使用 WebAPI 已经有一段时间了，通常将其设置为使用驼峰式 json 序列化，这现在很常见，并且到处都有很好的文档记录。

然而，最近在做一个更大的项目时，我遇到了一个更具体的要求：我们需要使用驼峰式 json 序列化，但是由于我们客户端脚本的向后兼容性问题，我只希望它发生在特定的操作上，以避免破坏（非常大的）网站的其他部分。

我认为一种选择是拥有自定义内容类型，但这需要客户端代码来指定它。

还有其他选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T23:51:23.047

试试这个：

```
public class CamelCasingFilterAttribute : ActionFilterAttribute
{
    private JsonMediaTypeFormatter _camelCasingFormatter = new JsonMediaTypeFormatter();

    public CamelCasingFilterAttribute()
    {
        _camelCasingFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
    }

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        ObjectContent content = actionExecutedContext.Response.Content as ObjectContent;
        if (content != null)
        {
            if (content.Formatter is JsonMediaTypeFormatter)
            {
                actionExecutedContext.Response.Content = new ObjectContent(content.ObjectType, content.Value, _camelCasingFormatter);
            }
        }
    }
} 
```

将此 [CamelCasingFilter] 属性应用于您想要进行驼峰式大小写的任何操作。它将接收您要发回的任何 JSON 响应，并将其转换为使用驼峰式大小写来代替属性名称。

# ruby-on-rails - 处理 PostgreSQL 创建表、关联和 Rails

> ID：14528780
> 
> 赞同：1
> 
> 时间：2013-01-25T19:12:52.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, associations, pgadmin

长话短说，我决定在我的本地主机上清除我的数据库，并在我的 Rails 应用程序中试验 posgreSQL 和 pgAdmin。我首先通过 pgAdmin 删除了我拥有的所有服务器。然后我跑了`db:create:all`，`db:migrate`最后`db:test:prepare`。现在，每当我在进行所有这些数据库实验之前运行我以前的规范测试时，我的大多数测试都失败了，给了我这个错误..

```
 Failure/Error: @user = FactoryGirl.create(:user)
 NoMethodError:
   undefined method `password_reset_sent_at' for #<User:0xb48a55c> 
```

或者

```
 Failure/Error: @user.save
 NoMethodError:
   undefined method `password_reset_sent_at' for #<User:0xaa9c040> 
```

我以为我可能不允许`password_reset_sent_at`作为不可访问属性，但它是可访问的，并且我的用户模型具有`has_one :user_reset_password, :dependent => :destroy`.

我的 database.yml 看起来像...

```
development:
  adapter: postgresql
  encoding: unicode
  database: template_development
  host: localhost
  pool: 5
  username: jason
  password: password

test:
  adapter: postgresql
  encoding: unicode
  database: template_test
  host: localhost
  pool: 5
  username: jason
  password: password 
```

当我运行应用程序并创建新用户时，我收到此错误。

```
undefined method `password_reset_sent_at' for #<User:0xa6fb184>

app/models/user.rb:78:in `empty_password_reset_token'
app/controllers/users_controller.rb:25:in `create' 
```

`empty_password_reset_token`方法是

```
def empty_password_reset_token
  if self.password_digest_changed?
    if self.password_reset_sent_at && self.password_reset_sent_at < 2.hours.ago
      false
    else
      self.password_reset_token = ""
      self.password_reset_sent_at = ""
    end
  end
end 
```

我的架构文件

```
ActiveRecord::Schema.define(:version => 20130124193639) do

  create_table "user_login_failures", :force => true do |t|
    t.integer  "user_id"
    t.integer  "login_failure_attempts"
    t.datetime "created_at",             :null => false
    t.datetime "updated_at",             :null => false
  end

  create_table "user_reset_passwords", :force => true do |t|
    t.integer  "user_id"
    t.string   "password_reset_token"
    t.datetime "password_reset_sent_at"
    t.datetime "created_at",             :null => false
    t.datetime "updated_at",             :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true

end 
```

我真的不知道为什么这不起作用。这些表都有适当的列，没有任何遗漏。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:48:52.783

我会看看 db/schema.rb。每次运行测试时，数据库都会根据该文件的内容被拆除和重建。我怀疑根据 db/schema.rb，您的“users”表没有“password_reset_sent_at”列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:45:01.553

这可能完全不相关（我没有 Ruby 经验），但我在您的问题中看到了很多“反引号”（`）。

在各种语言中，反勾号运算符将尝试在命令行上执行可执行文件。

MySQL 使用反引号来引用列名，因此如果您从 MySQL 迁移，它们可能是 MySQL SQL 语句的剩余部分

因此 Ruby 可能会尝试执行

```
`password_reset_sent_at' 
```

作为系统命令

[更新]根据这个答案，Ruby on Rails 似乎也使用反引号进行系统访问： [Getting output of system() calls in Ruby](https://stackoverflow.com/questions/690151/getting-output-of-system-calls-in-ruby)

如果*不是*这种情况请忽略，只是想帮忙:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:30:09.480

由于您在用户模式下使用的列在另一个模型中，因此您必须先调用该模型，您必须更改`password_reset_token`为

```
def empty_password_reset_token
  if self.password_digest_changed?
    build_user_reset_password unless user_reset_password
    if user_reset_password.password_reset_sent_at && user_reset_password.password_reset_sent_at < 2.hours.ago
      false
    else
      user_reset_password.password_reset_token = ""
      user_reset_password.password_reset_sent_at = ""
    end
  end
end 
```

或者您可以使用委托并保持方法不变

```
delegate :password_reset_sent_at, :password_reset_token, to: :user_reset_password 
```

# haskell - 使用 Maybe's 从 ADT 链中检索值

> ID：14528783
> 
> 赞同：5
> 
> 时间：2013-01-25T19:13:12.353
> 
> 标签：haskell, maybe

我有一些 ADT，每个 ADT 可能包含或不包含另一个 ADT。我需要从较低级别检索数据，并且我正在编写一些非常重复的代码，我确信这些代码可以被消除。我在 Real World Haskell 和“Learn You a Haskell For Great Good”中查看了一些示例代码，但我不太明白。这是一个关于 ADT 被遗漏的无关细节的示例。

```
 T24Report
      - projTitle :: Maybe ProjectTitle
            - zip :: Maybe String 
```

要从 StreetAddress 中检索邮政编码，我一直这样做：

```
 projNameStr :: T24Report -> String
 projNameStr t24 = if isNothing projTitleMaybe
                    then ""
                    else (fromMaybe "") $ zip $ fromJust projTitleMaybe
                where
                    projTitleMaybe = projTitle $ project t24 
```

随着对象链的深度增加，代码的重复性也会增加。肯定有更好的办法。想法？参考？我在 StackOverflow 上找不到类似的问题，但我相信它一定在这里......这似乎是一个必须被问到的简单问题。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T19:27:00.267

在最一般的情况下，我会这样写：

```
projNameStr :: T24Report -> String
projName t24 = fromMaybe "" $ do
    title <- projTitle $ project t24
    zip title 
```

关键是使用一个`do`块来分解处理所有的`Nothing`情况。

但是，在这种特定情况下，由于链中只有两个`Maybe`s，因此我很想将其缩短一点：

```
projNameStr :: T24Report -> String
projName t24 = fromMaybe "" $ projTitle (project t24) >>= zip 
```

这正是上一个示例在编译期间转换为的内容。通常这种手动脱糖会使事情变得更糟，而不是更好。但在这种情况下，我很想这样做，只是因为它短了几行，而且阅读量也不*大*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T19:46:57.517

Maybe 的 monad 实例是为解决这个确切的问题而构建的。如果你有一些对象，maybeX，mayyY 和 maybeZ，类型分别为 Maybe a，Maybe b 和 Maybe c，你可以这样做

```
do x <- maybeX
   y <- maybeY
   z <- maybeZ
   return (x,y,z) 
```

这将具有类型 Maybe (a,b,c)，如果三个 Maybe 中的任何一个为 Nothing，则最终结果将为 Nothing。

所以，在你的例子中，你会做这样的事情

```
projNameStr t24 = fromMaybe "" $ do t <- projTitle t24
                                    zip t 
```

# javascript - 将 javascript 参数从外部范围传递到匿名回调函数

> ID：14528786
> 
> 赞同：2
> 
> 时间：2013-01-25T19:13:16.553
> 
> 标签：javascript, facebook, asynchronous, anonymous-function

考虑以下

```
function firstFunction() {
  for ( var i = 0; i < 10; i++) 
    FB.api(apiPath,function(response) {
      secondFunction(response,i);
  });
}

function secondFunction(response,num) {
  alert(num);
} 
```

我希望 secondFunction 被异步调用 10 次，每次在 num 中接收不同的数字。相反， secondFunction 被调用了 10 次，并且所有的 num 都是 10。

有人可以向我解释为什么它没有像我期望的那样通过以及我如何修复它以像我期望的那样运行？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:15:16.813

在第一个异步回调执行之前，您的同步`for`循环一直递增`i`到 10 。`FB.api`

像这样：

```
function firstFunction() {
  for ( var i = 0; i < 10; i++) {
    (function(i2) {
      FB.api(apiPath,function(response) {
        secondFunction(response, i2);
      });
    })(i);
  }
} 
```

该修复将异步函数调用放入其自己的函数中，以便`i`可以作为参数传入，捕获`i`调用时的值，而不是异步回调发生时的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:23:01.540

这是因为第二个函数仅在服务器返回异步调用响应并且循环继续运行时才被调用，当服务器响应时 var I 已经为 10。

要修复它，您需要音调能够将 i 变量传递给第一个 api，然后将其传递给第二个，这样您就可以引用了。

您可能需要重构方法以使它们循环 10 次

# jquery - HTML5 FileReader 每个循环都会使浏览器崩溃 - 针对大型目录进行优化

> ID：14528792
> 
> 赞同：0
> 
> 时间：2013-01-25T19:13:42.337
> 
> 标签：jquery, html, loops, filesystems, filereader

我有一个获取用户本地目录的代码，然后为它在目录中找到的每个 mp3 文件打开一个文件读取器对象。有时这可能超过 1,000 个文件。我将如何优化此代码以使其不会使浏览器崩溃？它非常适用于其中包含多达 200-300 个文件的目录，但会使浏览器崩溃，而控制台日志中没有任何错误。任何建议将不胜感激。这是我的代码的 jsFiddle 页面的链接：http: [//jsfiddle.net/X6BZe/](http://jsfiddle.net/X6BZe/)

filecount 变量用于尝试将文件分成 10 个一组，并使用 settimeout 函数将它们分开，但这似乎不是很有效。我试过没有它仍然使浏览器崩溃。

这是我的代码的主要部分，其余的只是帮助检索 ID3 标记的 jDataView 代码。

```
$(document).ready(function(){
$("#file-input").on("change", function(e){
var thefiles = e.target.files;
var filecount = 0;
$.each(thefiles, function(i, item){
    if(item.type == "audio/mp3"){
        var reader = new FileReader();
        reader.onload = function() {
            var dv = new jDataView(this.result);
            if (dv.getString(3, dv.byteLength - 128) == 'TAG') {
                var title = dv.getString(30, dv.tell());
                var artist = dv.getString(30, dv.tell());
                var album = dv.getString(30, dv.tell());
                var year = dv.getString(4, dv.tell());
                $("#thelist").append(title + " - " + artist + " - " + album + " - " + year + "<br />");
            } 
            else {// no ID3v1 data found.
                var title = "????";
                var artist = "????";
                var album = "????";
                var year = "????";
            }
            dv = "";
        }
        reader.readAsArrayBuffer(thefile);
    }
    filecount += 1;
    if(filecount == 10){
        setTimeout(function(){}, 1000);         
        filecount = 0;
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:25:35.280

看起来问题在于您最终打开和阅读的文件数量庞大......

当我重构它时（请参阅下面的非常丑陋的代码，但使用一堆控制台日志记录，以便您可以观察发生了什么），而不是尝试通过并打开整个数组的 FileReaders 它按顺序处理，而它*比*它慢得多你可能想要（因为它必须读取每个文件才能在最后获取 ID3 标签）它不会崩溃（我还在处理后将 dv 和 filereader 设置为“”......不确定它是否有助于内存管理，但似乎使 chrome 分配保持在相当高的水平）。

您可以通过管理您保持打开的 FileReader 的数量来提高顺序解决方案的吞吐量（比如有一个*n 个*阅读器池，一旦完成，就将它提供给列表中的下一个项目并尝试找到之间的权衡连接数、吞吐量和稳定性

可能有更优雅的解决方案；）

```
$(document).ready(function(){
    $("#file-input").on("change", function(e){
    var thefiles = e.target.files;

  var i = 0;

  //    $.each(thefiles, function(i, item){
//      var thefile = item;

console.log("Start process");
process(i);
console.log("------> All Done <---------");

function process(wf) {
    thefile = thefiles[wf];
        if (thefile.type == "audio/mp3") {
            console.log("Read " + thefile.name + " " + thefile.type);

            var reader = new FileReader();
                reader.onload = function() {
                    console.log("********** Processing ");
                var dv = new jDataView(this.result);
                if (dv.getString(3, dv.byteLength - 128) == 'TAG') {
                    var title = dv.getString(30, dv.tell());
                    var artist = dv.getString(30, dv.tell());
                    var album = dv.getString(30, dv.tell());
                    var year = dv.getString(4, dv.tell());
                    $("#thelist").append(title + " - " + artist + " - " + album + " - " + year + "<br />");
                } 
                else {// no ID3v1 data found.
                    var title = "????";
                    var artist = "????";
                    var album = "????";
                    var year = "????";
                }
                dv = "";
                reader = "";
                console.log("Processed");
                    i++
                            if (i<thefiles.length) {
                    process(i);
                } else {
                    return
                }
            }

            reader.readAsArrayBuffer(thefile);
        } else {
            console.log("Skip " + thefile.name + " " + thefile.type);
                i++
                             if (i<thefiles.length) {

                              process(i);
                } else {
                    return
                }
        }

  } // end of process

//  });
});
}); 
```

# r - 带有 R-plugin 和 LaTeX-Suite 的 Vim 在插入模式下导致反斜杠行为不端

> ID：14528797
> 
> 赞同：4
> 
> 时间：2013-01-25T19:13:47.153
> 
> 标签：r, vim, latex

这就是发生的事情。我正在使用 Vim + LaTeX-Suite 在 Vim 中编辑 TeX 文件。这可以在终端或 MacVim 中。

我很高兴

```
Insert lots of $\LaTeX \commands$ etc. I love using the $\backslash$. 
```

TeX 很好用。没问题。

然后我去在同一个窗口（不同的选项卡）中打开一个 .R 文件。Vim 的 R-Plugin 使用`<Leader>`键（`\`通常映射到）来执行命令，例如我键入`\sa`以将选择发送到 R 并执行并向下移动窗口。生活是美好的。

问题：即使在编辑 R 文件时，Vim 也足够好，不会在我键入时在插入模式下出错`\`，但由于某种原因，当我切换回选项卡编辑 TeX 文件，然后`\`在插入模式下键入时，它会移动光标*左侧*和`\`暂停，好像在等待命令的其余部分，然后重新移动到右侧`\`并在我键入时继续前进。

下面显示了在插入模式下键入会发生*什么；*`\`显然，我可以通过使用箭头键将光标向左移动来重现这一点，但这不是发生这种情况的方式——光标只是向左移动了一瞬间，就好像在等待 R 命令完成输入一样。

![](../Images/3e0b62a818dd25683fdd4bca74232577.png)

那么：如何在不牺牲其他功能的情况下停止 TeX 文件插入模式中的烦人行为？注意，（a）我不希望映射`<Leader>`到不同的键有帮助，因为那个键在 TeX 中只会有相同的左光标移动问题；(b)，`\`反正我喜欢领导，所以我不想改变它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T12:02:02.180

将此行放入您的 vimrc（需要 Vim-R-plugin >= 0.9.9.2）：

```
let g:vimrplugin_insert_mode_cmds = 0 
```

如果问题仍然存在，您可以在普通模式下执行以下操作，以了解插入模式下的键盘快捷键是什么：

:imap

# .net - BOX 访问令牌 API V2

> ID：14528799
> 
> 赞同：0
> 
> 时间：2013-01-25T19:13:55.243
> 
> 标签：.net, vb.net, api, token, box-api

我正在尝试从 BOX.COM oauth2 检索访问令牌，无论我做什么，我都会收到相同的错误。{"error":"invalid_request","error_description":"无效的 grant_type 参数或缺少参数"}。我每次尝试都验证了客户端 ID、客户端密码并获得了一个新代码（每 30 秒过期一次）。我已经尝试过 VB.NET、C# 甚至是 FireFox 的 RestClient 插件。下面是我正在使用的 VB.NET 代码。任何帮助将不胜感激！谢谢，布赖恩

```
Public Sub GetAccessToken(ByVal code As String, ByVal client_id As String, ByVal client_secret As String)
        Dim xrc As RestClient = New RestClient
        Dim grant_type As String = "authorization_code"
        Dim request As New RestRequest(Method.POST)
        Dim strHeaders As String
        Dim response As RestResponse
        Dim strResponse As String

        Try
            'Base URL
            xrc.BaseUrl = "https://api.box.com"

            'Resource
            request.Resource = "oauth2/token"

            'Format Headers
            strHeaders = String.Format("grant_type={0}&code={1}&client_id={2}&client_secret={3}", grant_type, code, client_id, client_secret)

            'Add Headers to request
            request.AddHeader("Authorization", strHeaders)

            'Execute
            response = xrc.Execute(request)

            'Parse Response
            strResponse = response.Content

        Catch ex As Exception

        End Try

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T20:02:54.253

这就是问题

```
 'Format Headers
        strHeaders = String.Format("grant_type={0}&code={1}&client_id={2}&client_secret={3}", grant_type, code, client_id, client_secret)

        'Add Headers to request
        request.AddHeader("Authorization", strHeaders) 
```

您需要将该字符串作为 POST 正文的一部分发送，而不是作为标题发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T21:03:20.920

您可能还需要添加以下内容以确保您使用的是 xml 编码。

```
request.Method = Method.POST
request.RequestFormat = DataFormat.Xml 
```

# mq - 为什么文件路径在 MQ 可配置服务中无效？

> ID：14528801
> 
> 赞同：0
> 
> 时间：2013-01-25T19:14:03.990
> 
> 标签：mq, messagebroker

我有一个可配置的服务（CDServer）。当我尝试部署使用 CDInput 节点（使用可配置服务）的 WMB 流时，出现以下错误：

```
BIP7962E: File path '\\192.168.45.91\myfolder' specified for the property 'brokerPathToInputDir' in the CDServer configurable service is not valid. 
```

文件路径可从我的 Windows 资源管理器访问。文件夹“myfolder”在远程计算机上共享。

我不知道错误可能出在哪里。我尝试将文件路径更改为其他格式（192.168.45.91\myfolder），但仍然无法正常工作。

我在用着：

WMB 8.0.0.1 MQ 7 Sterling Connect Direct 4.6

非常感谢您对此问题的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:03:21.750

我遇到了同样的问题。虽然我仍然希望有一个像您一样有效的解决方案，但我的经理昨天告诉我，他在一年前就已经解决了这个问题，他找到的唯一解决方案是在中间放置一个 SFTP 服务器。对于他的消息流，他使用了 Attachmate Reflection。

FileInput 节点具有用于远程访问的挂钩。在 FTP 选项卡上，单击远程传输并填写 Attachmate 服务器和端口以及其他设置。Attachmate 又配置​​了一个虚拟文件夹，该文件夹访问实际的远程服务器。

它似乎比必要的机器更多，但你不能否认它可以工作并且已经生产一年多的事实。

# ios - OCMock 方法名冲突

> ID：14528802
> 
> 赞同：11
> 
> 时间：2013-01-25T19:14:05.537
> 
> 标签：ios, objective-c, unit-testing, ocmock

我是 OCMock 的新用户，所以也许我只是在这里遗漏了一些简单的东西。此代码无法编译：

```
id mockSession = [OCMockObject mockForClass:[AVCaptureSession class]];
[[mockSession expect]  addOutput:[OCMArg anyPointer]]; 
```

错误是

```
Multiple methods named 'addOutput:' found with mismatched result, parameter type or attributes 
```

AVCaptureSession 上方法 addOutput 的签名如下

```
- (void)addOutput:(AVCaptureOutput *)output 
```

据我所知，问题在于方法 addOutput 存在于 AVCaptureSession 和 AVAssetReader 类中。AVAssetReader 上 addOutput 的方法签名如下。

```
- (void)addOutput:(AVAssetReaderOutput *)output 
```

显然编译器认为我的mockSession是一个AVAssetReader，但我不知道为什么它选择那个类而不是AVCaptureSession。如果我期望在 AVAssetReader 上不存在的 AVCaptureSession 上使用不同的方法，那么它会编译。我尝试了以下但没有成功。它编译，但崩溃。

```
id mockSession = [OCMockObject mockForClass:[AVCaptureSession class]];
[(AVCaptureSession*)[mockSession expect]  addOutput:[OCMArg anyPointer]]; 
```

此代码也无法编译，与上一个错误相同

```
id mockSession = [OCMockObject mockForClass:[AVCaptureSession class]];
AVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init];
[[mockSession expect]  addOutput:output]; 
```

这里有什么指导吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-26T20:07:34.153

如果您的变量是“id”但在不同的类中使用不同的签名声明了一个方法，您应该通过将对象转换为正确的类型来帮助编译器，例如

```
[((AVCaptureSession *)[mockSession expect])  addOutput:[OCMArg any]]; 
```

在任何一种情况下，如果参数是一个对象，就像您的情况一样，您应该使用*any*而不是*anyPointer*。但你已经想通了。;-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-25T19:23:49.933

好的，我想它想通了。正如我所怀疑的，这是一个简单的菜鸟错误。将 [OCMArg anyPointer] 更改为 [OCMArg any] 可以完成以下工作：

```
id mockSession = [OCMockObject mockForClass:[AVCaptureSession class]];
[(AVCaptureSession*)[mockSession expect]  addOutput:[OCMArg any]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-10T22:51:14.053

你需要通知编译器它没问题

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
#pragma clang diagnostic ignored "-Wstrict-selector-match"
    OCMStub([globalContextMock sharedContext]).andReturn(context);
#pragma clang diagnostic pop 
```

# php - PHP：添加到列表、排序和删除。会话还是 Cookie？

> ID：14528806
> 
> 赞同：0
> 
> 时间：2013-01-25T19:14:12.983
> 
> 标签：php, javascript, jquery, session, cookies

我有一个允许用户将项目添加到列表的应用程序。他们还可以从该列表中排序和删除项目，但这并不是这个问题的真正重点。

问题是，最好为此使用 SESSION 还是使用 COOKIE？

我试过在网上寻找一些类似的示例教程，但我做得很短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:23:30.837

不知道为什么答案被删除，但这是迄今为止最好的解决方案：http: [//www.jstorage.info/](http://www.jstorage.info/)

我喜欢 HTML 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:20:27.573

通常排序是使用会话完成的。常见的做法是使用 jQuery 进行排序，并在用户刷新页面或使用分页时使用 AJAX 将其保存到会话中。流动：

1.  使用默认顺序从数据库中选择表数据
2.  使用 PHP 在会话中存储订单
3.  让 jQuery 使用 AJAX 从 session 中获取 ORDER
4.  如果它与默认值相同 -> 无排序
5.  如果会话不同，则默认 -> 订单表
6.  用户使用 jQuery 点击订单 -> 订单表
7.  使用 jQuery 保存新订单并使用 AJAX 将其保存到会话中，如步骤 2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:20:43.600

该列表会保存在数据库中吗？如果是这样，每次用户从该列表中放置或删除新项目时，您都可以根据更改的内容对数据库执行操作。使用这种方法，您唯一应该跟踪的是排序操作。您可以使用 http get/post 参数或 cookie 来处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T19:22:30.520

我认为您必须为您的应用程序做最好的事情，但这里有一篇关于 session vs. cookie [Cookie VS Session的文章](https://stackoverflow.com/questions/6253633/cookie-vs-session)

# android - android TextView setGravity 不适用于某些版本

> ID：14528809
> 
> 赞同：0
> 
> 时间：2013-01-25T19:14:28.223
> 
> 标签：android, textview, gravity

在 textView 上设置重力不适用于我的 Galaxy 2 2.3.3，但适用于我的 Galaxy Note 2.3.6。有谁知道为什么？
TextView xml 定义：

```
<LinearLayout
    android:screenOrientation="portrait"
    android:background="@drawable/w_5"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:layout_gravity="center_horizontal" android:gravity="center_horizontal"
    android:orientation="vertical">

    <TextView android:id="@+id/activities"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:layout_weight="1"
        android:freezesText="true"
        android:textSize="20dip"
        android:scrollbars="vertical"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="15dp"
        android:layout_marginBottom="15dp"
        android:layout_marginRight="15dp" >
        <requestFocus />
    </TextView>
    <Button android:id="@+id/takeAPicture" 
        style="@style/ActionButton"
        android:text="@string/takeAPicture"
        android:background="@drawable/custom_button" />  
    <Button android:id="@+id/googleMaps" 
        style="@style/ActionButton"
        android:text="@string/googleMaps"
        android:background="@drawable/custom_button"  />
    <Button android:id="@+id/navigateThere" 
        style="@style/ActionButton"
        android:text="@string/navigateThere"
        android:background="@drawable/custom_button"  />
</LinearLayout> 
```

然后，从 Java 设置重力：

```
mActivitiesText = (TextView) findViewById(R.id.activities);
mActivitiesText.setGravity(Gravity.RIGHT); 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:10:24.947

为什么不试试

```
<TextView android:id="@+id/activities"
    ...
    android:gravity="right" >
    ...
</TextView> 
```

你想要的效果是什么？您正在设置`layout_width="fill_parent"`TextView，因此这可能是问题的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:32:06.240

如参考页面： http: [//developer.android.com/reference/android/view/Gravity.html](http://developer.android.com/reference/android/view/Gravity.html)重力是在API lvl 1中添加的，这意味着所有的android设备都支持这个属性，无论如何，你可以添加它进入XML，有：

```
<TextView android:id="@+id/activities"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:layout_weight="1"
        android:freezesText="true"
        android:textSize="20dip"
        android:scrollbars="vertical"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="15dp"
        android:layout_marginBottom="15dp"
        android:layout_marginRight="15dp" 
        android:gravity="right">
        <requestFocus />
    </TextView> 
```

# svn - 恢复 svn 中的提交，合并似乎没有做任何事情

> ID：14528810
> 
> 赞同：1
> 
> 时间：2013-01-25T19:14:37.373
> 
> 标签：svn, version-control

恢复 SVN 提交的共识似乎是：

```
svn merge -c -492 svn+ssh://...../trunk/
svn status
svn commit -m "i'm a moron. reverting to rev X" 
```

所以，现在我正在输入我的提交消息，并且一个错误的复制粘贴带有一个新行......我马上 ctrl+C，但是，唉，我所有的垃圾都在后备箱里。

从 rev 491 到 492 大约有 10 个文件被修改（4 个是预期的）

之后`merge -c -1`或之后`merge -r 492:491`，我的工作副本没有任何变化。

`svn status`说一切都是最新的，没有什么可提交的。

```
svn up
> at revision 492
svn merge -c -492 ... #or -2 ... or -r 492:491
> return code 0
svn st
> nothing changed... 
```

我究竟做错了什么？

——编辑1：

我在另一个目录中检查了工作副本主干，在`svn merge -c -1 svn+ssh://...`我列出 U 和 D 状态更改后它可以工作，我回到 491，我可以提交

回到故障目录，即使在清理之后`revert -R`，合并命令也没有给我任何东西。我真的很想知道为什么。

——编辑2：

感谢@slowdog 修复了 -c 语法

——编辑3：

svn 版本 1.6.17 (r1128011)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T09:30:18.750

尝试`svn update -rHEAD`然后再试一次。

# php - 如何在 XAMPP 中集成 sqlite 扩展？

> ID：14528821
> 
> 赞同：3
> 
> 时间：2013-01-25T19:15:09.713
> 
> 标签：php, mysql, sql, sqlite, xampp

[http://www.sqlite.org/contrib?orderby=date](http://www.sqlite.org/contrib?orderby=date)上有一个扩展，extension-functions.c，它在 sqlite 中集成了 SQRT 命令。

如何集成它并在我的 Windows-XAMPP 环境中使用它？

对于 SQL 查询，我使用 Firefox 扩展 SQLiteManager 和 PHP 脚本。

我用我的数据库示例创建了一个[小提琴。](http://sqlfiddle.com/#!2/4f1a82/21)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T04:23:46.190

要获得扩展，您需要自己编译它，或者谷歌获得与 XAMPP 兼容并具有您正在使用的扩展的预编译 DLL，然后将其放在 XAMPP 上的 PHP 模块文件夹中。

# jquery - 使用响应式 Zurb Foundation 移动列

> ID：14528835
> 
> 赞同：0
> 
> 时间：2013-01-25T19:15:51.687
> 
> 标签：jquery, css, zurb-foundation

当尺寸较小时，移动列的最佳方法是什么？

这是示例：

```
 <div class="row">
    <div class="two columns">...</div>
    <div class="seven columns">...</div>
    <div class="three columns">...</div>
</div> 
```

当屏幕尺寸较小时，我希望两列移动到七列下方。我想出的唯一方法是执行以下操作：

```
 <div class="row">
    <div class="two columns hide-for-small">...</div>
    <div class="seven columns">...</div>
    <div class="two columns show-for-small">...</div>
    <div class="three columns">...</div>
</div> 
```

但这似乎有点混乱，可能会令人困惑。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:38:46.987

Foundation 有一些类可以让您使用列顺序。查看[Foundation Documentation](http://foundation.zurb.com/docs/grid.php#sourceDetails)中的 Source Ordering 部分。

例如：

```
<div class="row">
    <div class="seven columns push-two">...</div>
    <div class="two columns pull-seven">...</div>
    <div class="three columns">...</div>
</div> 
```

在较大的屏幕上，列将显示为 2-7-3，但在较小的屏幕上，它将恢复为 7-2-3。

它仍然有点混乱和令人困惑，但比必须为不同的显示器创建单独的、重复的列要好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T19:45:39.133

让列彼此下降的方法是浮动它们，然后让 CSS 的自然流动将它们向下推，因为它们的父容器变得太窄。你的 CSS 不在你的问题中，所以很难知道这些类在做什么。

我在 Stack Overflow 上看到很多关于流行框架的问题，我认为有时它们只会增加 CSS 如何自然工作的混乱。

很抱歉没有回答，但老实说，如果你检查一下，我认为你会更好地服务：http: [//codepen.io/bradfrost/full/zhCwd](http://codepen.io/bradfrost/full/zhCwd)

如果可以的话，我最好的建议是远离框架。他们添加了许多您根本不需要的（令人困惑的）代码。祝你好运，基思。

# wpf - DrawingVisual 未显示在窗口内的 WPF 画布中

> ID：14528836
> 
> 赞同：3
> 
> 时间：2013-01-25T19:15:57.060
> 
> 标签：wpf, drawingvisual

我创建了一个最小的项目，以便“开始”在 WPF 中使用 DrawingVisuals 进行绘图（到目前为止是非常初学者）。

我的项目仅包含主窗口的 XAML 和代码。该项目的唯一目的是打开一个窗口并显示一些填充可用空间的“信号噪声”。

MainWindow.xaml 是这样的：

```
<Window x:Class="MinimalPlotter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MinimalPlotter"
        Title="MainWindow" Width="1200" Height="800"
        WindowStartupLocation="CenterScreen">

        <Canvas Height="500" Width="700" x:Name="drawingArea" Margin="50" Background="Gray">
            <local:VisualHost Canvas.Top="0" Canvas.Left="0" x:Name="host" Width="700" Height="500" />
        </Canvas>
</Window> 
```

后面的代码是这样的：

```
namespace MinimalPlotter
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    public class VisualHost : FrameworkElement
    {

        public VisualHost()
        {
            int h = (int)this.Height;
            int w = (int)this.Width;

            Random random = new Random();
            double r;

            DrawingVisual path = new DrawingVisual();

            StreamGeometry g = new StreamGeometry();
            StreamGeometryContext cr = g.Open();
            cr.BeginFigure(new Point(0,0), false, false);
            for (int i = 0; i < w; i++)
            {
                // ugly calculations below to get the signal centered in container
                r = (random.NextDouble()-0.5) * h -h/2;
                cr.LineTo(new Point(i, r), true, false);
            }
            cr.Close();
            g.Freeze();

            DrawingContext crx = path.RenderOpen();
            Pen p = new Pen(Brushes.Black, 2);
            crx.DrawGeometry(null, p, g);

            // Ellipse included for "visual debugging"
            crx.DrawEllipse(Brushes.Red, p, new Point(50,50), 45, 20);

            crx.Close();

            this.AddVisualChild(path);
        }
    }
} 
```

问题是：当窗口打开时，画布显示在中心，正如预期的那样（带有灰色背景），但没有绘制任何信号。此代码的先前版本使用路径几何可以正常工作，但使用 DrawingVisual 没有显示几何（甚至不包括用于调试的椭圆几何）。

谢谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T19:35:36.623

您的 VisualHost 类还必须覆盖[VisualChildrenCount](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.visualchildrencount.aspx)属性和[GetVisualChild](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.getvisualchild.aspx)方法：

```
public class VisualHost : FrameworkElement
{
    private DrawingVisual path = new DrawingVisual();

    public VisualHost()
    {
        ...
        AddVisualChild(path);
    }

    protected override int VisualChildrenCount
    {
        get { return 1; }
    }

    protected override Visual GetVisualChild(int index)
    {
        return path;
    }
} 
```

* * *

`using`另请注意，在语句中使用 IDisposable 对象（如 StreamGeometryContext 和 DrawingContext）被认为是一种很好的做法：

```
var g = new StreamGeometry();
using (var cr = g.Open())
{
    cr.BeginFigure(new Point(0,0), false, false);
    ...
    // no need for cr.Close()
}

using (var crx = path.RenderOpen())
{
    var p = new Pen(Brushes.Black, 2);
    crx.DrawGeometry(null, p, g);
    crx.DrawEllipse(Brushes.Red, p, new Point(50,50), 45, 20);
    // no need for crx.Close()
} 
```

# notepad++ - 使用 Zen Coding for Notepad++ 的快捷方式是什么？

> ID：14528840
> 
> 赞同：3
> 
> 时间：2013-01-25T19:16:08.687
> 
> 标签：notepad++, shortcut, emmet

安装 Zen 后，在 Notepad++ 中激活 Zen Coding 的快捷键（Tab？）是什么？会不会是F1？选项卡不工作。编辑下的首选项中没有任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-08T21:53:08.220

转到设置 > 快捷方式映射器 > 插件命令选项卡。

查找“扩展缩写”，默认情况下它具有快捷方式“Alt-Ctrl-Enter”。双击该行（或点击修改按钮）并取消选择所有复选框。从可用键命令的下拉列表中选择“Tab”，然后砰！选项卡现在在找到缩写时展开缩写，否则用作普通选项卡。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T21:08:47.007

您自己设置了快捷方式。转到设置 > 快捷方式映射器 > 插件命令选项卡。最后，您会找到 Zen 编码命令。找到名为“Expand Abbreviation”的命令并双击它旁边的空列并定义新的快捷键。您可能需要重新启动记事本++ 应用程序。通过转到“插件> Zen coding”验证此更改，快捷键将显示命令名称。不要给出已经占用的快捷方式。尝试使用一些硬键组合。对我来说，它的“ctrl + alt + enter”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T15:24:53.327

Notepadd++中“扩展缩写”的默认快捷键是Ctrl+E，在“Zen Coding”菜单项下可以看到；您可以在“\Program Files\Notepad++\plugins\NppScripting\includesfiles\Zen Coding.js”中更改 Zencodeing 的快捷方式。在此文件的最底部，您可以找到和编辑键盘快捷键。但是如果你使用 \t 这个动作，它就不能用于缩进，所以不推荐。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-31T08:23:38.800

上周安装 zen 后，我遇到了同样的问题。我来到这里，它给了我如何修复它的要点，但我注意到我的*默认*扩展设置是 ctrl+alt+enter。这也是之前添加 return 的默认设置，所以它不起作用的原因是 return before 命令被覆盖。通过将默认扩展功能更改为自由组合（我使用 ctrl+alt+E），它工作得很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T22:02:57.797

好的，对于那些遇到同样问题的人来说：1）确保您已阅读自述文件并将安装文件放在正确的位置（再次检查）。2) 将您的文档另存为 HTML 或 CSS（只有这样它才会触发快捷方式）。3) 在线查看备忘单，键入相关快捷方式之一，然后按 (Ctrl+E)。

如果这不起作用，你就做错了什么。

# python - 在 python 脚本中调用 msbuild

> ID：14528843
> 
> 赞同：1
> 
> 时间：2013-01-25T19:16:20.293
> 
> 标签：python, visual-studio, msbuild, subprocess

您好我想在 python 脚本中执行 msbuild

由于我不在 Visual Studio 开发人员命令提示符下运行它，所以我运行

```
 "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.bat" 
```

然后我做

```
 msbuild example.props 
```

如何在 python 中运行它？我试着做

```
 subprocess.call('\"C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\\vcvarsall.bat\"\n') 
```

然后打电话

```
 subprocess.call(['msbuild', filename]) # filename is string variable 
```

但我收到一条错误消息，说它找不到指定的文件。我很确定应该有办法做到这一点，但我找不到方法。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:32:29.527

因为您没有使用`shell=True`to 选项`call`，所以每个调用本质上是相互隔离的。因此，获取 .bat 文件对第二次调用没有影响。添加`shell=True`两个调用，以便第一个调用可以影响第二个调用。

**注意**：我只推荐`shell=True`这里，因为很明显它只在一个平台（Windows）上运行，所以不会有跨平台问题。

# mysql - 从 Spring 项目连接到 MySQL 数据库

> ID：14528852
> 
> 赞同：1
> 
> 时间：2013-01-25T19:17:09.610
> 
> 标签：mysql, spring, jdbc

我一直在尝试使用 SimpleJdbcDaoSupport 从我的 Spring 项目中访问 MySQL 例程。

我有一个名为的类`AdminSimpleMessageManager`，它实现了接口`AdminMessageManager`。

`AdminSimpleMessageManager``AdminSimpleJdbcMessageDao`有一个实现接口的类的实例`AdminMessageDao`。

`AdminSimpleJdbcMessageDao`有以下方法：

```
public class AdminSimpleJdbcMessageDao extends SimpleJdbcDaoSupport implements AdminMessageDao {

public int addMessage(String from, String message) {
    return getJdbcTemplate().queryForInt("call insert_contact_message(?, ?)", from, message);
} 
```

}

我在我的应用程序上下文中包含以下内容：

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/OctagonDB"/>
</bean>

<bean id="adminMessageManager" class="Managers.AdminSimpleMessageManager">
    <property name="adminMessageDao" ref="adminMessageDao"/>
</bean>

<bean id="adminMessageDao" class="Managers.dao.AdminSimpleJdbcMessageDao">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

但我觉得缺少一些重要的行。我得到错误

> 严重：servlet [dispatcher] 在路径 [/NewWebsite] 的上下文中的 Servlet.service() 引发异常 [请求处理失败；嵌套异常是 org.springframework.dao.TransientDataAccessResourceException: PreparedStatementCallback; SQL [调用 insert_contact_message(?, ?)]; 结果集来自 UPDATE。没有数据。; 嵌套异常是 java.sql.SQLException: ResultSet 来自 UPDATE。没有数据。] 根本原因 java.sql.SQLException: ResultSet 来自 UPDATE。没有数据。

我想知道 SQL 例程是否需要返回一些确认信息？或者也许我正在使用错误的信息访问数据库，有没有办法确定它是否连接？

编辑： insert_contact_message 看起来像这样：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `insert_contact_message`(
   _author VARCHAR(45),
   _message MEDIUMTEXT
)
BEGIN
   INSERT INTO contact_messages (`author`, `message`, `date_sent`) VALUES (_author, _message, NOW());
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:43:34.593

您正在使用`queryForInt`，但`insert_contact_message`不返回结果。我以前没有使用`JdbcTemplate`过，但看起来您可能想要使用`execute`不期望结果集的那个。

另一种选择是从使用过程更改为使用函数。

```
CREATE DEFINER=`root`@`localhost` FUNCTION `insert_contact_message`(
   _author VARCHAR(45),
   _message MEDIUMTEXT
)
BEGIN
   INSERT INTO contact_messages (`author`, `message`, `date_sent`) VALUES (_author, _message, NOW());
   RETURN 1;
END 
```

# oracle - 如何输出使用本机动态 SQL 执行的 SELECT 语句的结果？

> ID：14528853
> 
> 赞同：6
> 
> 时间：2013-01-25T19:17:19.777
> 
> 标签：oracle, plsql

我有一个包含 SQL`SELECT`语句的字符串。
我想知道如何在屏幕上输出该语句的执行结果，执行将**使用本机动态 SQL** ( `EXECUTE IMMEDIATE`) 完成。

例子：

```
DECLARE
v_stmt VARCHAR2 := 'SELECT * FROM employees';
BEGIN
EXECUTE IMMEDIATE v_stmt; -- ??? how to output result of that select on the screen.
END; 
```

重要说明：表的结构可以是任意的。我必须编写一个接受表名作为参数的过程，所以我不能对表结构进行硬编码，也不想这样做。

感谢您的回复。非常感谢任何想法/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:22:01.483

如果您可以将该执行立即更改为 dbms_sql 游标，那么以下解决方案应该能够为您提供帮助，因为您可以从 dbms_sql 游标中获取列名：

[https://forums.oracle.com/forums/thread.jspa?threadID=700648](https://forums.oracle.com/forums/thread.jspa?threadID=700648)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-06T15:56:31.740

如果您在带有 12c 客户端的 Oracle 12c 上，这应该可以工作：

```
declare
    rc sys_refcursor;
begin
    open rc for 'select * from dual';
    dbms_sql.return_result(rc);
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T10:12:30.917

是的，我们可以动态执行 select 语句。

假设我们有一张桌子`test`。它有四列`Row_id,Name,Rank`等当我们做`select * from test;` 结果将是

```
Row_id Name   Rank  
1      R1    5 
2      R2    1 
3      R3    2 
4      R4    4 
```

现在我们可以使用 DBMS_SQL 包动态执行 SELECT Sql 状态。

代码如下：

```
 DECLARE
        v_CursorID  NUMBER;
        v_table VARCHAR2(50):='test';
        v_SelectRecords  VARCHAR2(500);
        v_NUMRows  INTEGER;
        v_MyNum INTEGER;
        v_Myname VARCHAR2(50);
        v_Rank INTEGER;

    BEGIN
         v_CursorID := DBMS_SQL.OPEN_CURSOR;
        v_SelectRecords := 'SELECT * from ' || v_table ;
        DBMS_SQL.PARSE(v_CursorID,v_SelectRecords,DBMS_SQL.V7);
        DBMS_SQL.DEFINE_COLUMN(v_CursorID,1,v_MyNum);
        DBMS_SQL.DEFINE_COLUMN(v_CursorID,2,v_Myname,50);
        DBMS_SQL.DEFINE_COLUMN(v_CursorID,3,v_Rank);

        v_NumRows := DBMS_SQL.EXECUTE(v_CursorID);
   LOOP
        IF DBMS_SQL.FETCH_ROWS(v_CursorID) = 0 THEN
             EXIT;
        END IF;

        DBMS_SQL.COLUMN_VALUE(v_CursorId,1,v_MyNum);
        DBMS_SQL.COLUMN_VALUE(v_CursorId,2,v_Myname);
        DBMS_SQL.COLUMN_VALUE(v_CursorId,3,v_Rank);

        DBMS_OUTPUT.PUT_LINE(v_MyNum || ' ' || v_Myname || ' ' || v_Rank  );

   END LOOP;

   EXCEPTION
        WHEN OTHERS THEN
                  RAISE;
        DBMS_SQL.CLOSE_CURSOR(v_CursorID);
        end; 
```

# blender - 如何在 Blender 中根据到图像平面的距离来渲染深度值

> ID：14528856
> 
> 赞同：25
> 
> 时间：2013-01-25T19:17:32.003
> 
> 标签：blender

我想在 Blender（v2.65a，使用 Cycles 引擎）中渲染场景的深度图，它使用到图像平面（或与之平行的任何平面，例如 yz 平面）的距离作为深度值。

可以使用复合节点来呈现[文档](http://wiki.blender.org/index.php/Doc:2.4/Manual/Composite_Nodes/Types/Input#Using_the_Z_value_Socket)中描述的简单深度图。这里的问题是，使用的 z 值是基于到相机的距离，而不是图像平面。这意味着平行于图像平面的线将具有不同的 z 值，具体取决于它们在渲染图像中的位置，如本示例所示（渲染描绘了立方体的正面，值已标准化）：

![使用相机距离的深度图](../Images/68ea599174592cab09560955cd6fdee5.png)

我想要一个深度图，它对与图像平面平行的平面上的点保持相同的深度（不改变整体投影，因为深度图仍然必须与正常渲染一致）。

这可以通过使用脚本对当前深度图进行后处理来实现，该脚本根据视图方向的角度校正值，但我想知道是否有一种方法可以直接从渲染过程中获取正确的信息。

那么有没有办法使用复合节点（或类似的 Blender 功能）根据到图像平面的距离来渲染深度图？

# c# - 将 TextChanged 更改为不在自定义控件中冒泡

> ID：14528858
> 
> 赞同：0
> 
> 时间：2013-01-25T19:17:40.547
> 
> 标签：c#, .net, wpf, xaml

我有一个自定义 RichTextBox 控件。

该控件的一部分是它包含另一个 RichTextBox（ContentPresenter 和另一个 RichTextbox 都由控件显示）。

我遇到的问题是，当包含的 RichTextBox 获得 TextChanged 事件时，它会冒泡到我持有它的控件。使其看起来好像实际控件具有文本更改事件。（而不是包含的 RichTextBox。）

**有没有办法制作一个不会冒泡其 TextChanged RoutedEvents 的 RichTextBox？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:18:59.003

在 RichTextBox 的 TextChanged 中写下：

```
e.Handled = true; 
```

# c# - C# .NET 和 Lua - 要求“luanet”失败

> ID：14528862
> 
> 赞同：0
> 
> 时间：2013-01-25T19:17:51.160
> 
> 标签：c#, .net, lua, require

我正在尝试将 .NET CLR 与 Lua 一起使用。在第一行的 .lua 文件中，我有：

需要“luanet”

我可以加载 dll，但立即得到一个错误：

从 luanet.dll 加载模块 'luanet' 时出错：luanet.dll:1: '=' 预期在“附近”

我搜索了互联网，下载并尝试了这个 luanet.dll 的 3 个不同版本，但我都得到了相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:38:31.313

I solved this problem, although I am not sure it was the best solution. All I did was change the Build setting "Platform target" from "Any CPU" to "x86" and rebuild the luanet DLL and LuaInterface assembly. I also had to change that same build selection to "x86" in the C# application where I was using the LuaInterface assembly.

If someone know of a better or more eloquent solution, please pass it along.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:45:52.280

我几乎忘记了——我还必须明确地将 Lua 脚本中的“package.path”设置为“luanet.dll”所在的位置。尽管 LUA_PATH 环境变量中的路径具有正确的路径，但由于某种原因，我仍然必须在 Lua 脚本中在该行之前设置它：

需要'luanet'

# javascript - Android + PhoneGap + jQuery Validate - 不触发

> ID：14528863
> 
> 赞同：0
> 
> 时间：2013-01-25T19:18:05.860
> 
> 标签：javascript, android, cordova, jquery-mobile, jquery-validate

我正在使用带有 jQ​​uery Validate 的 jQuery Mobile。完成所有页面后，我有多个使用 ajax 序列化发布的表单。

从本机浏览器访问时，下面的“下一步”按钮适用于 iOS 和 Android。当我使用 PhoneGap 打包并在 Android 上运行时，验证不会触发。其他一切正常。

如果我删除了 valid() 条件，该按钮将按预期工作。所以这一定是我如何使用 jQuery Validate 的问题。

我尝试过以各种方式改变事物的顺序。我试过了：

```
if (!$("#infofm").valid()) { 
```

和

```
if($("#infofm").valid()) { 
```

总是相同的结果 - 在本机浏览器中工作，但不是在 PhoneGap 之后。我已经为此苦苦挣扎了很长时间。这是相关的代码。任何帮助将不胜感激。谢谢！

```
$(function(){ 
    $('a#nxt1').bind('click', function(event, ui) {
        infoval();
    });

function infoval(){
    var isvalidate=$("#infofm").valid();
    if(isvalidate) {
        $.mobile.changePage('#towertop', {transition: 'slidefade'});
    } else {
        alert("Please fill in all fields on this page before proceding");
    }
};

$(document).ready( function(){ 
$("#infofm").validate({ errorPlacement: function(error, element) {} }); }); 
```

和

```
<a href="" id="nxt1" data-iconpos="bottom" data-theme="a" data-icon="arrow-r">Next Step</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:26:15.380

我相信对于 jQuery Mobile，您需要使用....

```
$(document).on('pageinit', function(){ 
```

代替

```
$(document).ready(function(){ 
```

请参阅：http: [//jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

> **重要提示：**使用`$(document).bind('pageinit')`，而不是`$(document).ready()`
> 
> 在 jQuery 中学习的第一件事是调用 `$(document).ready()`函数内部的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到`pageinit`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:51:32.133

捆绑到 phonegap 应用程序（在我的情况下是在 iOS 上）时，我的 javaScript 代码没有被调用。我构建了一个带有多个屏幕和按钮的 Web 应用程序，这些屏幕和按钮根据用户交互隐藏或显示。

使用与 XCode 捆绑的 iOS 模拟器时，您可以在 safari 中看到生成的 web 应用程序的源代码（在“开发”菜单下，必须在 Safari 首选项中启用开发人员工具）。在源代码中，我注意到我的所有应用程序 html 页面都合并为一个，并且包含的​​唯一 javascript 来自第一页（默认 index.html） - 页面中的所有其他元素都已从文件中删除。所以我改变了

```
 $(document).ready(function(){ 
       ...
    }); 
```

至

```
 $(document).on('pageinit', function(){
       ...
    }); 
```

（感谢 Sparky，您在上面的回答）并将以下页面中的所有 jquery js 代码添加到 index.html 中。作为示例，我添加了以下行以隐藏其中一个页面上的 div：

```
 $("#cancelButtonDiv").hide(); 
```

现在正在执行代码，并且正在正确调用我的按钮上指定的方法。

# ruby-on-rails - 添加更多角色以使用 cancan 测试 beta 功能

> ID：14528864
> 
> 赞同：0
> 
> 时间：2013-01-25T19:18:07.283
> 
> 标签：ruby-on-rails, devise, cancan

我目前使用 devise 和 cancan 进行授权/身份验证。我想让选定的用户访问某些功能并将它们隐藏给其他人。

使用我当前的登录堆栈执行此操作的最佳做​​法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:18:07.283

我目前的解决方案是添加另一个 cancan 角色，并调用 has_role? 来判断逻辑。这种情况需要用户有两个角色。

这很好还是有一种“更轻松”的方法？

# c# - WP8 地图控件中的居中图钉

> ID：14528866
> 
> 赞同：1
> 
> 时间：2013-01-25T19:18:16.743
> 
> 标签：c#, .net, maps, windows-phone-8, pushpin

> **可能重复：**
> [如何以编程方式添加 PushPin，我可以让它有一个自定义图像吗？](https://stackoverflow.com/questions/14267149/how-can-i-add-programmatically-add-a-pushpin-and-could-i-make-it-have-a-custom)

在使用 bing 地图控件的 WP7 中，我使用图像作为图钉，但由于它如何渲染图钉，它略有偏移，所以我使用 PositionOrigin 将其正确居中，如下所示：

```
 <my:Pushpin Location="{Binding Location}" 
                                    PositionOrigin="Center"MouseLeftButtonUp="pin_click"
                                    Template="{StaticResource PushpinControlTemplate1}" >
                    </my:Pushpin> 
```

在 WP8 的新地图控件中，我尝试并唱出此设置，但应用程序只是崩溃到 App.xaml.cs 中未处理的异常，没有任何信息。

这是 Windows Phone 8 代码：

```
 toolkit:Pushpin PositionOrigin="Center"  MouseLeftButtonUp="pin_click" 
GeoCoordinate="{Binding Location1}"  Template="{StaticResource PushpinControlTemplate1}"/ 
```

他们都使用这个模板：

```
 <ControlTemplate x:Key="PushpinControlTemplate1" TargetType="my:Pushpin">
        <Grid>
       <Image Width="45" Height="45" Source="{Binding Arrow}"/>
        </Grid>
    </ControlTemplate> 
```

任何想法如何偏移或居中这个图钉？

编辑：示例图像：

[![](../Images/14c9dd7ab03f80a3dd9146558e44d685.png)](https://i.stack.imgur.com/gZGzK.gif)
[（来源：[goapr.co.uk](http://www.goapr.co.uk/pins.gif)）]

带有标准图钉的左图显示提示与地图上的公交站点相匹配（应该如此）。我的自定义图像应该位于右侧图像的中转站之上，但事实并非如此。PositionOrigin 设置过去几乎可以解决这个问题，但在 WP8 中似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:26:34.953

PushPins 对齐，因此它们的左下角位于 GeoCoordinate。这是通过默认将 MapOverlay PositionOrigin 设置为 0,1 来完成的。如果您将 MapOverlay PositionOrigin 设置为 0.5,0.5，则 MapOverlay 会将其中心对准地理坐标。例如，UserLocationMarker 使用 0.5,0.5 的 PositionOrigin 将其视觉中心与坐标对齐。

尝试使用 PushPin.PositionOrigin 看看是否能解决您的问题。PushPin.PositionOrigin 的 0.5,0.5 将是一个很好的起始值，具体取决于您要达到的效果。请记住，PushPin 和 UserLocationMarker 只是花哨的 MapOverlay，所以当有疑问时，可以恢复为普通的 MapOverlay 来测试东西。

```
<!-- Default Style used for Pushpin -->
<Style TargetType="maptk:Pushpin">
    <Setter Property="PositionOrigin" Value="0,1" />
</Style>

<!-- Default Style used for MePOI -->
<Style TargetType="maptk:UserLocationMarker">
    <Setter Property="PositionOrigin" Value="0.5,0.5" />
</Style> 
```

从 WP7.5 升级到 WP8 时您可能会遇到异常的原因之一是 PositionOrigin 已从 Bing 地图自定义数据类型更改为简化的 Point X,Y 结构。

# mysql - 如何在 R 中完全断开与 MySQL 的连接？

> ID：14528869
> 
> 赞同：2
> 
> 时间：2013-01-25T19:18:51.170
> 
> 标签：mysql, r

这个函数不能正确关闭连接（所以我达到了 16 的最大限制，这显然不好）：

```
query.test = function(query) {
  con = dbConnect(MySQL(), groups = 'test')
  output = tryCatch({
    dbGetQuery(con, query)
    }, warning = function(w) {
      print(w)
    }, error = function(e) {
      print(e)
    }, finally  = function() {
      dbDisconnect(con)
    })
  return(output)
} 
```

我认为子句中的`finally`语句总是被执行，所以我不清楚为什么这段代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:58:00.787

答案原来是有点奇怪（对我来说）R 语法：

```
query.test = function(query) {
  output = tryCatch({
    con = dbConnect(MySQL(), groups = 'test')
    dbGetQuery(con, query)
    }, warning = function(w) {
      print("warning!")
    }, error = function(e) {
      print("error encountered!")
      print(e)
    }, finally = {
      dbDisconnect(con)
      print("goodbye")
    })  
  return(output)
} 
```

这里的区别是：

```
}, finally  = function() {
      dbDisconnect(con)
    }) 
```

应该

```
}, finally  = {
      dbDisconnect(con)
    }) 
```

如果有人了解为什么`finally`第一种方式不起作用，我会很高兴听到它。

# ios - 为什么适用于 iOS 6 的 Facebook SDK 在某些用户上失败但在其他用户上成功？

> ID：14528874
> 
> 赞同：0
> 
> 时间：2013-01-25T19:19:08.723
> 
> 标签：ios, facebook, single-sign-on

Facebook iOS SDK 3.1 在我的应用程序中实现，但我一直在使用 SSO，因为它更易于理解。

现在我正在实现支持 iOS 6 Facebook 帐户集成的 Facebook SDK 部分。

我想知道看到这个过程后，任何人对这个问题的第一想法是什么：

```
On the simulator
sign into my facebook account in Settings app
switch back to my app
sign in with facebook account
handler for openActiveSessionWithReadPermissions gets state FBSessionStateOpen
everything works.

switch back to settings app
remove my account
sign in with facebook test user account
switch back to my app
sign in with facebook account
handler for openActiveSessionWithReadPermissions gets state FBSessionStateClosedLoginFailed 
```

在实施 Facebook SDK for iOS 6 集成部分之前，单点登录完美运行，100% 的时间用于 facebook 测试用户帐户。

是否有任何理由 iOS 6 集成将在特定用户上 100% 失败，而 SSO 实施对相同用户 100% 有效？最后一点：我的应用出现在“设置”>“Facebook”的列表中，它是打开/启用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:46:00.857

我遇到了同样的问题。核心似乎是当您在设置应用程序中拥有 FB 凭据时，Facebook 使用一种路由进行身份验证。当您删除它时，FB 会检查存储的设置并失败并返回关闭状态。它希望能够使用会话，但被破坏了。

请记住，在现实世界的设置中，您的用户不会以这种方式在设置之间切换。当您在设备上测试各种场景时，这非常令人不安，但现实世界的用户不会尝试不同的用户登录或不同的用户凭据开/关场景。

# python - 尝试针对许多文本文件运行关键字列表并将文本片段输出到 Python 中的 csv

> ID：14528876
> 
> 赞同：0
> 
> 时间：2013-01-25T19:19:15.033
> 
> 标签：python, csv, text-extraction, text-search

我是 Python 菜鸟。

我正在尝试读取文本文件中的关键字列表，打开并读取许多文本文件以搜索关键字列表，为每个关键字的每个实例提取文本切片，然后将所有文本切片输出到 csv 文件。

我有下面的代码，但是当我运行它时，它只针对第一个文件搜索第一个关键字，写入 csv，然后关闭。我已经搜索了一个答案，但还没有完全找到我正在寻找的东西。

关于我在哪里搞砸的任何想法？

```
import os
import re

def formatText(s):
    s = s.replace("[", "")
    s = s.replace("]", "")
    s = s.replace(",", "")
    s = s.replace("[", "")
    s = s.replace("\n", " ")
    s = s.replace("\r", " ")
    return s

fdoc = wlitems = None
termct = None

f = open(r'filenames.txt')
fdoc = f.read()
flist = fdoc.split('\n')
if f: f.close()

wlist = open(r'keywords.txt')
try:
    wltxt = wlist.read()
    wlitems = wltxt.split('\n')
finally:
    if wlist: wlist.close()

if wlitems and fdoc:
    op = open(r'output.csv', 'w')
    try:
        termct = {}
        for chnk in flist:
            if not chnk == "":
                chnknum = flist.index(chnk)
                curfile = open(chnk)
                curfilecnts = curfile.read()
                ucurfilecnts = curfilecnts.upper()
                filelength = len(ucurfilecnts)
                for kwrd in wlitems:
                    if len(kwrd)>0:
                        curpos = 0
#                   print keyword
                        keyd = re.compile(kwrd,re.IGNORECASE | re.MULTILINE | re.DOTALL)
                        while curpos <= filelength:
                            sumline = keyd.search(ucurfilecnts,curpos)
#                   print sumline
                            if sumline:
                                curpos = sumline.end()
                                keydtxt = curfilecnts[sumline.start()-20: sumline.end()+200]
                                op.write(chnk + "," + kwrd + "," + str(curpos) + "," + formatText(keydtxt) + "\n")
                            else:
                                curpose = filelength +1
    finally:
            if op: op.close() 
```

# haskell - Haskell Webserver：维护应用程序状态

> ID：14528877
> 
> 赞同：7
> 
> 时间：2013-01-25T19:19:17.040
> 
> 标签：haskell, functional-programming, happstack

我试图通过开发 web-app-ish 服务来更熟悉 Haskell。

假设我正在开发一个网络服务器，我想在请求之间保持持久状态；例如，计数器。Haskell 的做事方式是什么？

我在 Google 搜索中遇到了这个[讨论](http://bb10.com/haskell-cafe/2007-02/msg00589.html)。提议的解决方案看起来像是不该做什么的一个很好的例子。

我的一个想法是让请求处理程序接受一个 MVar：

```
requestHandler :: MVar State -> IO (Maybe Response) 
```

注册处理程序时，可以使用 main 中创建的 MVar 对其进行 curried。

一定会有更好的办法。我不禁认为我正在以一种非功能性的方式解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:10:14.787

您可能想要[acid-state](http://www.happstack.com/docs/crashcourse/AcidState.html#acid_state)，它可以准确地为您提供：Haskell 数据类型的持久状态。我链接的文档甚至从请求计数器开始，就像您要求的那样。

请注意，MVar 不是持久的；当服务器重新启动时，计数器将被重置。如果这实际上是您想要的行为，我建议您改用[TVar](http://hackage.haskell.org/package/stm)；这样您就可以自动更新计数器，而不会出现锁或随之而来的死锁风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T10:30:51.710

如果您喜欢持久性和 TVar，您可以使用[DBRefs](http://hackage.haskell.org/package/TCache)，它与 TVar 具有相同的语义和相同的使用模式。您必须为状态定义一个唯一键，并且您具有自动文件持久性。对于数据库持久性，有必要定义一个 IResource 实例。

该州将为每个会话提供一个唯一的计数器：

```
import Data.Map as M
import Data.TCache
import Data.TCache.DefaultPersistence

type Counter= Int
type SessionId :: String
data State= State SessionId Counter deriving (Read, Show, Typeable)

instance Indexable State where
        key (State k _)= k 

requestHandler :: Request -> DBRef State -> IO (Maybe Response) 
```

# ruby-on-rails - 如何让不同模型的两条记录保持同步而不陷入回调陷阱？

> ID：14528883
> 
> 赞同：0
> 
> 时间：2013-01-25T19:19:39.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型的属性，我想保持同步。

```
1.9.3p194 :009 > p
 => #<Product id: 19, name: "Long Sleeve Blue", description: "<p>\tLong Sleeve Blue Flannel shirt comes in all siz...", price: 49.99, vendor_id: 12, created_at: "2012-12-15 23:35:05", updated_at: "2013-01-24 19:11:18", image: "shirt.png", sku: "ABC10034"> 
1.9.3p194 :010 > p.piggybak_sellable
 => #<Piggybak::Sellable id: 1, sku: "AR4590", description: "Blue Shirt", price: #<BigDecimal:7fa97cd63ff8,'0.2499E2',18(45)>, quantity: 100, item_id: 19, item_type: "Product", active: true, unlimited_inventory: false> 
```

两者都有一些相似的属性。

我有创建方面 - 一旦创建了新记录，我只需执行`after_create`.

问题在于记录的更新。

如果我在调用的方法中调用 an`after_save`并执行 an ，它将启动无限循环并使应用程序崩溃。`update_attributes``after_save`

鉴于我想更新许多列，我该如何实现？

我知道一种解决方案是使用`update_column`- 但这仅适用于 1 列。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:03:44.640

您可以在每个回调中暂时停用另一个模型上的`after_save`回调，以避免像这样循环。有关执行此操作的详细信息，请参阅此问题的第二个答案[如何跳过 ActiveRecord 回调？](https://stackoverflow.com/questions/1342761/how-to-skip-activerecord-callbacks)

可能看起来像这样：

```
after_save :update_product

def update_product
  Product.skip_callback(:save, :after, :update_other)
  p = Product.find_by_whatever(self.whatever)
  p.update_attributes(:one => self.one, :two => self.two)
  Product.set_callback(:save, :after, :update_other)
end 
```

# android - Android 应用内存堆不断增长

> ID：14528884
> 
> 赞同：7
> 
> 时间：2013-01-25T19:19:41.607
> 
> 标签：android, memory-management, memory-leaks, garbage-collection, heap-memory

我的应用程序中出现随机（内存不足）崩溃，所以我开始分析我的堆。我注意到，如果我从 Activity A 转到 Activity B，堆会从 27 MB 增加到 35 MB（由于延迟加载许多图像）。但是，当我完成（）活动 B 以返回活动 A 时，即使使用 GC 操作，堆大小也保持不变！

烦人的事情是，再次执行活动 B 会将堆增加到 42 MB。我可以多次这样做，而且堆只会不断增加。

这是我正在使用的延迟图像加载库：

懒惰列表[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

这些是堆的屏幕截图

之前：http: [//i.stack.imgur.com/7eTzm.png](http://i.stack.imgur.com/7eTzm.png)

之后：http: [//i.stack.imgur.com/txeC6.png](http://i.stack.imgur.com/txeC6.png)

可根据要求提供转换后的堆转储文件

**更新**

从我的调试来看，似乎是来自 LazyList 库的问题，但我仍然不能 100% 确定。以下是对图书馆评论的人的参考：

[https://github.com/thest1/LazyList/issues/20](https://github.com/thest1/LazyList/issues/20)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:23:18.510

我的猜测是您正在泄漏活动（这可能会泄漏它拥有的所有变量）。确保任何需要您传递上下文的操作系统调用都已取消注册，您没有任何对象持有对活动的引用（尤其是通过持有上下文），并且您可以在 onDestroy 中清除所有内容或 onStop （并且在所有主要对象中也这样做）。

如果这还不够，请查看您的 hprof 并查看在您终止活动后周围有哪些大对象以及谁持有引用。修复并重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:42:24.607

在我看来，您每次都在开始一项新活动，而不是切换到已经加载的活动。当您切换活动时，尝试在意图上设置标志以包含**Intent.FLAG_ACTIVITY_REORDER_TO_FRONT 。**

[看到这个](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T23:41:56.330

在我看来，这可能是您正在使用的图像。Android的[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html)创建不可变的位图，因此您对这些位图所做的任何更改都将与原始图像分开。

更糟糕的是，即使您告诉它[recycle](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)，它是否会被垃圾收集也将取决于您的引用。

# ruby-on-rails - 显示特定用户的帖子？

> ID：14528885
> 
> 赞同：0
> 
> 时间：2013-01-25T19:20:01.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

这里我有一些代码：

```
def show
    @post = Post.find()
  end
end 
```

用户模型有has_many :posts 并且帖子模型有belongs_to :user。现在如何使显示操作仅显示登录用户的帖子。登录的用户是“current_user”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:23:19.040

你可以这样做：

```
def show
  @post = Post.where(user_id: current_user.id)
end 
```

但是变量存在故障，您应该重命名`@post`为，`@posts`因为这将是几个帖子的数组（如果是这样，不要忘记在您的视图中更改变量！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:24:07.657

```
def show
    @posts = current_user.posts
end 
```

# ios - 点击下一个/完成时在不同的 UITableViewCells 中导航 UITextFields

> ID：14528890
> 
> 赞同：0
> 
> 时间：2013-01-25T19:20:12.860
> 
> 标签：ios, objective-c, xcode, uitableview, uitextfield

我已经尝试了[这个线程](https://stackoverflow.com/questions/1347779/how-to-navigate-through-textfields-next-done-buttons)中的一些解决方案，但我遇到了麻烦。我的表格动态加载了来自 plist 的数据，因此我无法在情节提要中创建从一个单元格到另一个单元格的连接。我实现了一个名为 DSCell 的自定义 UITableViewCell 类，它在单元格的右侧有两个 DSTextField 对象。在最左侧的 DSTextField 上按 Enter 键时，它成功地将焦点转移到下一个字段。但是，当在右侧文本字段上按 Enter 时，它应该将焦点移动到下一个单元格中的文本字段（向下一行）。但事实并非如此。

单元格中的文本字段具有标签 2 和 3。

这是我的 cellForRowAtIndex 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"PaperCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

// Configure the cell...
NSString *text = [_paper objectAtIndex:indexPath.row];
UILabel *label = (UILabel *)[cell viewWithTag:1];
label.text = text;

// Set the "nextField" property of the second DSTextfield in the previous cell to the first DSTextField
// in the current cell
if(indexPath.row > 0)
{
    DSCell *lastcell = (DSCell *)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row-1 inSection:indexPath.section]];
    DSTextField *lastField = (DSTextField *)[lastcell viewWithTag:3];
    DSTextField *currentField = (DSTextField *)[cell viewWithTag:2];
    lastField.nextField = currentField;
}

return cell;

} 
```

这是 textFieldShouldReturn 方法：

```
- (BOOL) textFieldShouldReturn:(UITextField *) textField {

DSTextField *field = (DSTextField *)textField;

UIResponder *responder = field;
[responder resignFirstResponder];

responder = field.nextField;
[responder becomeFirstResponder];

return YES;

} 
```

目前，当调用 cellForRowAtIndexPath 时，我正在尝试将第二个 DSTextField 的 nextField 属性设置为当前单元格，但它似乎不起作用。我从第 1 行开始并尝试检索上一行中的单元格，然后将最右侧文本字段的 nextField 属性分配给当前单元格中最左侧的文本字段。

有一个更好的方法吗？我不想为每个文本字段使用不同的标签并这样做，这可能会变得混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:42:46.320

我建议您只尝试在您的`textFieldShouldReturn:`方法中找到正确的单元格以将焦点转移到。可能导致您的问题的一件事是您可能要求单元格`lastCell`是不可见的，然后由 tableview 处理（因此`nextField`无效）。

更改事物返回时发生的逻辑（您仍然希望`nextField`连续设置两个单元格之间的值）：

```
- (BOOL) textFieldShouldReturn:(UITextField *) textField {

//This isn't necessary: UIResponder *responder = field;
//Or this: [responder resignFirstResponder];

//Check if it's the left or right text field
if (textField.tag == 3) {
    //Find the cell for this field (this is a bit brittle :/ )
    UITableViewCell *currentCell = textField.superview.superview;
    NSIndexPath *ip = [self.tableView indexPathForCell:currentCell];
    if (ip.row < [self.tableView numberOfRowsInSection:ip.section] - 1) {
        DSCell *nextCell = (DSCell *)[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:ip.row+1 inSection:ip.section]];
        [[nextCell viewWithTag:2] becomeFirstResponder];
    }
}

return YES;

} 
```

# d3.js - d3 绑定元数据与闭包访问器

> ID：14528891
> 
> 赞同：0
> 
> 时间：2013-01-25T19:20:21.607
> 
> 标签：d3.js

在 d3 中，您通常希望渲染一些**数据**，例如 (x,y) 对：

```
var points = [{x:1, y:2}, {x:3, y:4}] 
```

你有一些关于渲染的**元数据，例如它的宽度。**

```
var width = 100 
```

问题是，**将元数据放在哪里？**

1：使用**闭包访问器，**如 mbostock 的可重用图表中所建议的那样：http: [//bost.ocks.org/mike/chart/](http://bost.ocks.org/mike/chart/)

```
selection.data(points).call(thing().width(width)) 
```

2：使用**绑定数据，**就像其他一切一样：

```
selection.data([{width: width, points: points}]).call(thing()) 
```

**有理由选择一个而不是另一个吗？**

闭包访问器方法似乎涉及更多样板。

嗯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:54:47.060

在我看来，闭包访问器更灵活。特别是，如果您将它绑定到数据，则必须在其余代码中单独处理它——`thing()`您需要提取`points`它们并将它们传递给另一个`data()`调用以绑定它们并为每个（或任何您想要的）附加元素做）。

我一直在使用闭包访问器。

# ruby-on-rails - 升级到 Rails 3.2.11 后，Rails 应用程序无法再下载文本文件 - 找不到文件

> ID：14528896
> 
> 赞同：0
> 
> 时间：2013-01-25T19:20:46.690
> 
> 标签：ruby-on-rails

*短版*(TLDR)： **下面的 download_file 脚本在 Rails 3.2.6 中可以正常工作，但在 Rails 3.2.11 中不能。**

*长版：*

我曾经有一个很好的下载文本文件功能，但现在当我尝试这个操作时，我得到了这个：

```
This webpage is not found 
No webpage was found for the web address: http://localhost:3000/file_download
Error 6 (net::ERR_FILE_NOT_FOUND): The file or directory could not be found. 
```

我的 routes.rb 指定了正确的 /file_download 路由。除了将我的 Rails 版本升级到 3.2.11 之外，我没有进行任何更改。我的下载脚本也没有改变；还是这样：

```
def download_file
    filename = 'my_memories.txt'
    file = File.open(filename, 'w') # creates a new file and writes to it

    current_user.memories.order('date DESC').each do |m|
      # Write the date, like 1/21/2012 or 1/21/2012~
      file.write m.date.strftime("%m/%d/%Y")
      file.write '~' unless m.exact_date
      file.write " #{m.note}" if m.note
      file.puts

      # Write the content
      file.puts m.content
      file.puts # extra enter
    end

    send_file file
    file.close # important, or no writing will happen
    File.delete(filename)
  end 
```

我在控制台中看到的错误是这样的：

```
ERROR Errno::ENOENT: No such file or directory - my_memories.txt 
```

而且我查看了[Ruby 的 File.open 给出“没有这样的文件或目录 - text.txt (Errno::ENOENT)”错误](https://stackoverflow.com/questions/6566884/rubys-file-open-gives-no-such-file-or-directory-text-txt-errnoenoent-er)并尝试了该解决方案，但这不起作用：我会得到一个不同的错误

```
private method `puts' called for #<String:0x00000104551838> 
```

如果我这样做了

```
puts Dir.pwd. 
```

在下载文件方法的开头。

可能出了什么问题？在 Rails 版本更改之前一切正常。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:55:49.987

我找到了我的问题的答案，部分感谢这里的人：[https ://github.com/rails/rails/issues/9086](https://github.com/rails/rails/issues/9086)

基本上，send_file 之前被滥用过（我在网上某处看到了旧方法）。应该传递一个文件路径。

工作代码：

```
 def download_file
    filepath = "#{Rails.root}/public/downloaded_memories/my_memories.txt"

    file = File.open(filepath, 'w') # creates a new file and writes to it

    current_user.memories.order('date DESC').each do |m|
      # Write the date, like 1/21/2012 or 1/21/2012~
      file.write m.date.strftime("%m/%d/%Y")
      file.write '~' unless m.exact_date
      file.write " #{m.note}" if m.note
      file.puts

      # Write the content
      file.puts m.content
      file.puts # extra enter
    end

    send_file filepath # make sure to send the file path, not the file name
    file.close # important, or no writing will happen
    # File.delete(filepath) # cannot delete this since the request would not then try to send a file path that doesn't exist
  end 
```

# java - 如何使用java以UTC格式解析日期

> ID：14528898
> 
> 赞同：-1
> 
> 时间：2013-01-25T19:20:54.713
> 
> 标签：java

如何`2013-01-12T12:00:00Z`使用java以UTC格式解析以下日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:36:48.427

这有效

```
System.out.println(
   new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ")
   .parse("2013-01-12T102:00:00-0400")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:21:53.350

认为[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)是您所需要的。

```
new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").parse(yourString) 
```

# c++ - 具有指针类型和常规类型的类模板

> ID：14528902
> 
> 赞同：7
> 
> 时间：2013-01-25T19:20:59.890
> 
> 标签：c++, templates, pointers

我为它的值类型定义了一个带有模板的 Node 类

```
template<class T>
class Node {
  T val;
  public:
    Node (T & v) : val (v) {}
    ...
    void print() { cout << v << endl; }
} 
```

大多数时候，感兴趣的节点值将是一个对象类，例如`class Foo`。那样的话，使用`Node<Foo *>`起来会更方便。但也可能是该节点将保持原始时间，例如`int`。然后使用`Node<int>`就足够了。

问题是，某些函数可能需要根据是否`T`为指针类型来表现不同。例如，`print`应该`cout << *v`何时是，`cout << v`否则。

我尝试的是定义两者：

```
template<class T>
class Node {
  T val;
  public:
    Node (T & v) : val (v) {}
    ...
    void print() { cout << v << endl; }
}

template<class T>
class Node<T*> {
  T* val;
  public:
    Node (T* v) : val (v) {}
    ...
    void print() { cout << *v << endl; }
} 
```

它现在可以根据是否是来选择合适的定义，`Node<int> or Node<int *>`但是问题就变成了，这两个定义会共享很多代码。我想知道是否有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T19:27:44.260

请参阅：[C++ 模板专业化，在可能是指针或引用的类型上毫无歧义地调用方法](https://stackoverflow.com/questions/14466620/c-template-specialization-calling-methods-on-types-that-could-be-pointers-or/14466705)

相同的技术应该在这里工作，允许您在两种情况下统一处理`val`作为引用（或指针）。

[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)可以帮助减少代码重复，同时允许两个专业的通用代码没有任何开销。

请注意，当您有时使用指针，有时使用实例时，所有权语义会变得很棘手——`val`如果有时它是参数的指针，有时它是参数的副本，那么它的生命周期是什么，以及如何强制执行它?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-17T08:31:10.050

好吧，还有另一种方法可以做到这一点。您应该使用类型特征，它们在编译时进行评估。这是您可以修改的方式。

```
template<class T>
class Node {
  T val;
  public:
    Node (T & v) : val (v) {}
    ...
    void print() { 
      if(std::is_pointer<T>::value)
        cout << *v << endl;
      else
        cout << v << endl;
    }
} 
```

# django - 多表单单视图 Django

> ID：14528903
> 
> 赞同：0
> 
> 时间：2013-01-25T19:21:17.600
> 
> 标签：django, parameters, django-forms

这是我的场景：我在页面上有多个选择框，其中用户从 ModelChoiceField 中选择选项并被重定向到一个视图，其中所选选项作为参数传递。就像是：

```
class BrowseForm(forms.Form):
    thing = forms.ModelChoiceField(queryset=Thing.objects.all(), empty_label=None, widget=forms.Select(attrs={'onchange': 'this.form.submit();'}))
    stuff = forms.ModelChoiceField(queryset=Stuff.objects.all(), empty_label=None, widget=forms.Select(attrs={'onchange': 'this.form.submit();'})) 
```

看法：

```
def browse(request):
    thing_list = Thing.objects.all()
    if request.method == 'POST':
        form = BrowseForm(request.POST)
        if form.is_valid():
            thing = form.cleaned_data['thing']
            stuff = form.cleaned_data['stuff']
            return HttpResponseRedirect(reverse('browse_thing', kwargs={'thing':thing, 'stuff':stuff}))
    else:
        form = BrowseForm()
    return render(request, 'browse.html', {'form':form, 'thing_list':thing_list}) 
```

这要求我提交 的两个字段`BrowseForm`，但我希望和 有两个不同的 url `thing`，`stuff`其中一个`thing`或`stuff`作为参数传递，而不是两者都传递。就像是：

```
url(r'^browse/things/(?P<thing>[\w-]+)/$', 'views.browse', name='browse_thing'),
url(r'^browse/stuff/(?P<stuff>[\w-]+)/$', 'views.browse', name='browse_stuff'), 
```

有没有办法用一种形式和一种视图来做到这一点？或者我是否需要为`thing`and编写不同的表单`stuff`，然后检查哪个表单在我的视图中传递并相应地重定向到适当的 url？你会怎么做？谢谢你的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:04:16.650

您可以选择根据是否传入`thing`或`stuff`传入来显示各种元素，因此您的视图将具有：

```
def browse(request, thing=None, stuff=None):
    # your code, then...
    return render(request, 'browse.html', {
        'form': form,
        'thing_list': thing_list,
        'stuff_list': stuff_list,
        'has_thing': bool(thing),
        'has_stuff': bool(stuff)
    }) 
```

然后在您的模板中，您可以执行以下操作：

```
{% for f in form %}
    {% if f.name == 'thing' and has_thing %}
        <!-- render it -->
    {% endif %}
    {% if f.name == 'stuff' and has_stuff %}
        <!-- render it -->
    {% endif %}
{% endfor %} 
```

还要记住`required=False`在您的`BrowseForm`字段中进行设置，这样您就不会出现验证错误，`POST`因为您只有一个或另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:47:13.810

虽然它看起来不是很干燥，但这就是我解决问题的方法：

表格.py：

```
class StuffBrowseForm(forms.Form):
    stuff = forms.ModelChoiceField(queryset=Stuff.objects.all(), widget=forms.Select(attrs={'onchange': 'this.form.submit();'}))

class ThingBrowseForm(forms.Form):
    thing = forms.ModelChoiceField(queryset=Thing.objects.all(), widget=forms.Select(attrs={'onchange': 'this.form.submit();'})) 
```

看法：

```
def browse(request):
    thing_list = Thing.objects.all()
    if request.method == 'POST':
        form1 = StuffBrowseForm(request.POST)
        form2 = ThingBrowseForm(request.POST)
        if form1.is_valid():
            stuff = form1.cleaned_data['stuff']
            return HttpResponseRedirect(reverse('browse_stuffs', kwargs={'stuff':stuff}))
        elif form2.is_valid():
            thing = form2.cleaned_data['thing']
            return HttpResponseRedirect(reverse('browse_things', kwargs={'thing':thing}))
    else:
        form1 = StuffBrowseForm()
        form2 = ThingBrowseForm()
    return render(request, 'browse.html', {'form1':form1, 'form2':form2, 'thing_list':thing_list}) 
```

网址：

```
url(r'^browse/$', 'views.browse', name='browse'),
url(r'^browse/stuff/(?P<stuff>[\w-]+)/$', 'views.browse_stuffs', name='browse_stuffs'),
url(r'^browse/things/(?P<thing>[\w-]+)/$', 'views.browse_things', name='browse_things'), 
```

# asp.net-mvc - 获取局部视图的名称和控制器名称

> ID：14528904
> 
> 赞同：1
> 
> 时间：2013-01-25T19:21:21.687
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在使用 mvc，需要执行以下操作。从局部视图中，我如何动态找到它的名称以及它所在的文件夹的名称？

我是通过控制器和动作名称来做的，但这并没有给出预期的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:41:47.973

Using Razor..

```
@Html.Label(Request.RawUrl) //Action

@Path.GetFileName(Server.MapPath(VirtualPath)) //View Name 
```

# mysql - 用于处理 10K 插入和频繁选择操作的数据库服务器设置

> ID：14528906
> 
> 赞同：0
> 
> 时间：2013-01-25T19:21:32.220
> 
> 标签：mysql, postgresql, database-design

目前我有一个系统（服务器），它一次接收来自 1000 个设备（客户端）的消息，每个设备每分钟发送一次消息。

每条消息将有超过 2000 条记录。

所以每分钟系统将收到 1000 X 2000 => 2,000,000 条记录

同时我期待频繁的选择请求（大约 1000 个）

查询是

设置数据库服务器（Mysql/postgres）来处理这种频繁的批量插入和读取操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T08:21:31.780

所以我只是批处理了 1M 假行（一个字符和一个从 1 到 1000000 的整数）并将其插入到我笔记本电脑上 postgresql 的一个事务中。花了4秒。一分钟插入 100 万次很容易，至少一开始是这样。然而，还有很多事情需要担心。例如，更新索引可能会很昂贵。我在整数字段上添加了唯一索引，插入时间从 4 秒变为 9 秒。插入另外 1M 行需要 14 秒。随着指数的增长，这个数字将继续攀升。一旦索引不再适合内存，它就会飙升。

通常，处理这么多数据的最佳方法是将其填充到离散的文本文件中，并在以后批量上传而无需索引。然后添加索引。

Ollie 在他关于 MySQL 的回答中提到的所有内容也适用于大多数其他数据库。

PostgreSQL特定的东西：

使用连接池和持久连接，将总连接数保持在较低水平，例如低于 100。

使用 FAST 存储介质。您在这里遇到的问题是您可能需要大量存储空间，因此 SSD 可能无法工作。如果您必须使用旋转驱动器，请将它们中的很多放在 RAID 控制器下，并在 RAID-10 中使用电池支持的硬件缓存，以获得最佳性能和良好的可靠性。RAID-5 或 6 在这里将是一场灾难，因为它们的写入性能很糟糕。

尽可能将尽可能多的写入批处理。与一些会在大事务上呕吐的数据库不同，PostgreSQL 在一个事务中一次处理 1M 或更多行非常舒服。

根据需要使用尽可能少的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T21:25:53.223

你的一千台设备是如何连接的？如果每个人都与您的服务器建立 TCP/IP 连接，您需要确保在他们连接的机器中有足够的文件描述符。查看`/proc/sys/fs/file-max`最大值。与单个服务器计算机的一千个客户端连接被认为是一个很大的数字。

每条记录有多少数据？你会让你的网络硬件不堪重负吗？如果每条记录是十个字节，那么您说的是每秒输入两千万字节，或一亿六千万位。每秒 100 兆位的以太网接口是远远不够的。即使是千兆接口也是有问题的：很难保持巨大的吞吐量。请记住，如果 DBMS 与接收数据的服务器位于不同的机器上，则这些记录将不得不进出，使您的网络吞吐量翻倍。

您将如何处理您的 DBMS 或系统的某些其他部分将落后于其工作负载的可能性？DBMS 在接受 INSERT 命令时偶尔会延迟 30 秒是很可能的，但在此期间会积累大量未处理的数据。

您应该考虑将此问题划分为可能包含 50 或 100 个设备的组，以及 20 或 10 个收集数据的中央服务器设置。如果您这样做，您将不会出现单点故障，您不会非常努力地推动您的网络硬件，并且如果您丢失一些硬件，您可能能够制定某种故障转移策略。您还可以使用更便宜、更具成本效益的服务器和网络设备。

在 MySQL 上，使用尽可能少的索引来支持您需要执行的查询。请记住，执行摘要查询（如`SELECT COUNT(*) FROM raw WHERE timestamp > NOW() - INTERVAL 1 HOUR`）会在运行时显着减慢 INSERT 操作。

您可能需要考虑使用诸如 ActiveMQ 之类的排队系统来处理您的数据流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T19:25:16.087

您通常可以针对写入*或*读取进行优化，但不能同时针对两者*进行优化。*因此，在这种情况下，仔细修剪表的大小，只声明所需的索引，并将其放在快速的机器上，可能是您唯一的选择。您是否需要长时间保留数据，或者您可以清除旧数据？否则你的桌子会变得非常大。

# jquery - 在 wordpress post [jQuery] 中设置动态 css-background 图像

> ID：14528910
> 
> 赞同：1
> 
> 时间：2013-01-25T19:21:55.443
> 
> 标签：jquery, css, wordpress, background-image, concatenation

我有一个基于 wordpress 的网站，我想更改每个帖子的标题图片。由于每个帖子都有自己的“id”，我想制作一个 jquery 函数来读取帖子“id”（例如 id="post-8"）并设置一个以相同方式命名的背景图像，所以我只是每次我写一篇新文章时都必须制作一张新图片并上传它，并且不需要更改 css。

我对 jquery 的想法非常简单，但是在我兄弟的帮助下，我得到了以下代码：

```
var txt1 = "post-";
        for (var i=0; i<1000; i++){
        var elementId = txt1.concat(i);
        var postimg1 = "url(../images/";
        var postimg2 = ".jpg)";
        var postimgfull = postimg1 + elementId + postimg2;
        var element =  $("#" + elementId);
        if (element != null) {
            $(".posthead").css('background-image', postimgfull);
        }else {
            break;
        } 
```

但是使用它我没有得到名为“post-8.jpg”的图像，我得到的是一个名为“post-999.jpg”的图像。

你能帮我吗？

谢谢小伙伴们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:35:48.277

我想你的代码一切都很好，除了应该有

`element.css('background-image', postimgfull);`

代替

`$(".posthead").css('background-image', postimgfull);`

它应该很好去。

# sql - SQL：需要替换多列中的相同值

> ID：14528915
> 
> 赞同：0
> 
> 时间：2013-01-25T19:22:15.900
> 
> 标签：sql

我需要编写一个查询，在多个列中找到一个值，然后更新那些存在该值的列。

需要替换的值在以 _m1 结尾的列中

示例表：

```
o_id a_m1 a_m2 b_m1 b_m2
1 bb cc bb cc
2 cc 空 bb cc
```

我需要在以 _m1 结尾的列中找到所有“cc”值，然后将这些列更新为“bb”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:33:06.223

```
UPDATE TABLENAME
  SET a_m1=REPLACE(a_m1,'cc','bb'),
      b_m1=REPLACE(b_m1,'cc','bb') 
```

或者

```
SELECT a_m1 = CASE WHEN a_m1='cc' THEN 'bb' ELSE a_m1 END,
       b_m1 = CASE WHEN b_m1='cc' THEN 'bb' ELSE b_m1 END 
```

笔记：

它们做两件不同的事情——我不确定你想要什么。

它们都只修改 a_m1 和 b_m1。

首先，字符串中`cc`出现的每个位置都替换为`bb`

在第二个中，如果值完全相等，`cc`则将其更改为`bb`否则没有更改。

# ruby-on-rails - 每 3 项新行

> ID：14528919
> 
> 赞同：13
> 
> 时间：2013-01-25T19:22:32.207
> 
> 标签：ruby-on-rails, ruby

我想一次呈现我的项目列表 3，以便它们以三行输出。我正在使用

```
<div class="row">
  <div class="three columns">
 <% @items.each do |f|%>
   <div class="item">
     <%= f.content %>
       </div>
     <% end %>
  </div>
</div> 
```

它在一个“行”中输出所有规则 -

```
<div class="row">
  <div class="three columns">
   <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
  </div>
</div> 
```

我想要做的是为每三个返回的项目输出一行，所以 -

```
<div class="row">
  <div class="three columns">
   <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
  </div>
</div>
<div class="row">
  <div class="three columns">
   <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
       <div class="item">
     This is the content
       </div>
  </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-25T20:40:49.187

除了前面提到的`each_slice`，Rails 还有一个[`in_groups_of`](http://apidock.com/rails/Array/in_groups_of)方法可以像这样使用：

```
<% @items.in_groups_of(3, false).each do |group| %>
  <div class="row">
    <div class="three columns">
      <% group.each do |item| %>
        <div class="item">
          <%= item.content %>
        </div>
      <% end %>
    </div>
  </div>
<% end %> 
```

几乎相同`each_slice`，除了需要输出空白 div 的场景变得更清晰，如下所示：

```
<% @items.in_groups_of(3).each do |group| %>
  <div class="row">
    <div class="three columns">
      <% group.each do |item| %>
        <div class="item">
          <%= item.content if item %>
        </div>
      <% end %>
    </div>
  </div>
<% end %> 
```

`in_groups_of`默认情况下填充最后一组中缺少的项目`nil`，因此它将进行最后几次迭代，并且检查`if item`将确保它不会通过调用`content`.`nil`

[`in_groups`](http://apidock.com/rails/Array/in_groups)是另一种用于视图格式化的有趣方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T19:27:51.840

您可以使用[each_slice](http://apidock.com/ruby/Enumerable/each_slice)方法：

```
<% @items.each_slice(3) do |array_of_3_items|%>
  <div class="row">
    <div class="three columns">
      <% array_of_3_items.each do |item|%>
        <div class="item">
          <%= item.content %>
        </div>
      <% end %>
    </div>
  </div>
<% end %> 
```

**附加说明：**如果您希望最后一行有 3 个 div，即使最后一行仅包含 2 个项目，该怎么办？（即这`@items`是一个包含 5 个项目的列表，最后一行应该只输出 2 个 div）。

解决方案：

```
<% @items.each_slice(3) do |array_of_3_items|%>
  <div class="row">
    <div class="three columns">
      <% array_of_3_items.each do |item|%>
        <div class="item">
          <%= item.content %>
        </div>
      <% end %>
      <% (3 - array_of_3_items.length).times.each do |fake_div| %>
        <div class="item empty">
        </div>
      <% end %>
    </div>
  </div>
<% end %> 
```

# android - 创建具有对角线背景图案的自定义 9 补丁按钮

> ID：14528923
> 
> 赞同：1
> 
> 时间：2013-01-25T19:22:55.527
> 
> 标签：android, button, nine-patch

我有一个带有对角线背景图案的自定义按钮，我真的很疯狂地将它转换为九个补丁 png。我有很多不同大小的按钮，我应该在哪里使用它，九个补丁看起来就是这样。有可能吗？还是有比九个补丁更好的解决方案？

![原始按钮](../Images/44b92256d8dd7ab0756267960cef3f47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:34:29.157

经过反复试验，我做到了……最好的方法是制作一个带有图层列表的自定义按钮以及其中的所有元素。图案是位图，圆角是位图顶部的笔划以覆盖它。

结果

![在此处输入图像描述](../Images/d3c854557456fef316133dbe46ab9365.png)

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item>
    <shape
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >
        <stroke
            android:width="1dp"
            android:color="#ff4f565a" />

        <corners
            android:bottomLeftRadius="10dp"
            android:bottomRightRadius="10dp"
            android:topLeftRadius="10dp"
            android:topRightRadius="10dp" />

        <solid android:color="#ff002f44" />
    </shape>
</item>
<item
    android:bottom="7dp"
    android:left="7dp"
    android:right="7dp"
    android:top="7dp">
    <shape>
        <padding
            android:bottom="7dp"
            android:left="7dp"
            android:right="7dp"
            android:top="7dp" />

    </shape>
</item>
<item android:top="-1dp" android:right="-1dp" android:left="-1dp" android:bottom="-1dp">
    <bitmap
        android:gravity="fill"
        android:src="@drawable/bg_btn_pattern_gloss" />
</item>
<item android:top="-5dp" android:right="-5dp" android:left="-5dp" android:bottom="-5dp">
    <shape
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >
        <stroke
            android:width="4dp"
            android:color="#ff002f44" />

        <corners
            android:bottomLeftRadius="8dp"
            android:bottomRightRadius="8dp"
            android:topLeftRadius="8dp"
            android:topRightRadius="8dp" />

        <solid android:color="#00000000" />
    </shape>
</item>

</layer-list> 
```

# php - 更改页面时在 IE 10 中销毁 Codeigniter 会话

> ID：14528928
> 
> 赞同：2
> 
> 时间：2013-01-25T19:23:02.837
> 
> 标签：php, internet-explorer, codeigniter, session

这听起来很简单，但我找不到解决方案。我正在使用最新版本的 CI 来构建网站框架。我正在使用会话来存储访问信息，以允许用户访问某些页面。这在 firefox、chrome、safari 和 IE 9 及以下版本中运行良好。但是，在 IE10 中，当我在框架内更改页面时，会话会自动取消设置。例如，我在仪表板上单击链接将我带到 localhost/sitename/admin/settings，IE10 会破坏所有会话信息，因此我将注销并重定向到登录页面。我尝试将 sess_cookie_name 更改为 cisessions （我在其他答案中看到过）但这没有效果。

有没有其他人遇到过这个问题，或者知道一个可行的解决方案？

提前致谢。

编辑：

应该等着发布这个:)

更多挖掘后找到解决方案，

```
$config['sess_cookie_name']  = 'cisession';
$config['sess_match_useragent'] = FALSE; 
```

那么新的问题是， sess_match_useragent 对于 CI 安全目的绝对重要，还是可以对所有浏览器保持关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:46:47.313

这是一个很难客观和完整地回答的问题，因为有很多因素在起作用。

将用户代理作为会话验证的一部分包含在内是有用的，因为它降低了会话劫持的可能性。但是，考虑一下：

1.  从安全角度来看，使用可以`sess_match_ip`匹配或超过有效性吗？`sess_match_useragent`通过匹配 IP，攻击者将被要求合法地使用相同的 IP，或者在访问您的服务器时尝试欺骗它。用户代理验证很容易被欺骗，IP 欺骗要困难得多，并且可能需要破坏用户的网络才能有效（例如，同一网络、本地网络或什至同一计算机上的另一个人）。

2.  您是否使用 SSL 加密来安全地传输数据？如果不是，是否可以想象中间人攻击会使您的应用程序可被利用，而不管用户代理检查如何？由于客户端将在没有加密形式的情况下与服务器通信，因此可以提取、操纵和重放整个 HTTP 请求。如果启用 IP 检查，这将变得更加困难。

3.  在处理安全问题时，您真的希望不同浏览器的服务器端行为不同吗？虽然现在看起来微不足道，但完全可以想象这种问题也可能会影响其他浏览器的未来版本（或在 IE 的未来版本中恢复，以“修复”它）。工程解决方案值得您花时间吗？

考虑到这一点，我个人的意见是对所有浏览器完全关闭它。Internet Explorer 仍然代表着浏览器市场的相当大份额，而且没有编写每个浏览器的修复程序，它似乎不值得实施。鉴于更基本的漏洞利用和 IP 匹配的可用性，安全优势相对较小，这一点尤其正确。

# jquery - $.ajax 不是函数

> ID：14528929
> 
> 赞同：-2
> 
> 时间：2013-01-25T19:23:07.680
> 
> 标签：jquery, ajax, api, typeerror

嗨，我正在尝试使用[Wunderground Weather API](http://www.wunderground.com)，但在单击按钮时请求信息时遇到了麻烦。这是提供的工作开场线：

```
jQuery(document).ready(function($) { 
```

这是我将其更改为：

```
jQuery('#GetWeather').click(function($) { 
```

当我单击按钮时，我得到一个萤火虫错误：

```
TypeError: $.ajax is not a function
[Break On This Error]   

success : function(parsed_json) { 
```

我不知道为什么它不起作用，但这里是其余的代码......希望它有帮助：

```
jQuery('#GetWeather').click(function($) {
var PostCode="PL9 9UT";
$.ajax({ url : "http://api.wunderground.com/api/2508132ae0c7601a/geolookup/conditions/q/UK/"+PostCode +".json",
dataType : "jsonp",
success : function(parsed_json) {

var icon = parsed_json['current_observation']['icon'];
var temp_c = parsed_json['current_observation']['temp_c'];
var feelslike_c = parsed_json['current_observation']['feelslike_c'];
var visibility_mi = parsed_json['current_observation']['visibility_mi'];
var UV = parsed_json['current_observation']['UV'];
var relative_humidity = parsed_json['current_observation']['relative_humidity'];
var wind_mph = parsed_json['current_observation']['wind_mph'];
var pressure_mb = parsed_json['current_observation']['pressure_mb'];
var wind_string = parsed_json['current_observation']['wind_string'];
var weather = parsed_json['current_observation']['weather'];

var imageurl = "http://192.168.0.4/DesktopVersion/Inc/Images/Weather/";

$('.Wicon').css('background-image',"url("+imageurl +icon +".svg)");
$('#GetWeatherTemp').html(temp_c +"&#176");
$('#GetWeatherFeel').html("Feels Like " +feelslike_c +"&#8451");
$('#GetWeatherVis').html(visibility_mi +" Miles");
$('#GetWeatherUv').html(UV);
$('#GetWeatherHumid').html(relative_humidity +"%");
$('#GetWeatherWind').html("Wind Speed " +wind_mph +"Mph");
$('#GetWeatherPress').html(pressure_mb);
$('#GetWeatherState').html(weather);
}
});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T19:25:21.363

这条线是你的问题：

```
jQuery('#GetWeather').click(function($) { 
```

在`document.ready`处理程序中，`jQuery`传入，以便您可以方便地将其别名`$`为兼容性。但是，对于`click`处理程序，第一个参数是一个事件对象，这意味着您正在`$`用事件引用覆盖 jQuery 简写 ( )。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T19:25:43.250

该`click`事件不发送jQuery对象作为参数，它发送`event`对象，所以`$`函数内部不会是jQuery对象，而是`event`点击事件的对象。

只需删除`$`参数，使其不会影响全局`$`标识符：

```
jQuery('#GetWeather').click(function() { 
```

# c# - 基于 DTO 的 Asp Web.Api 数据过滤器

> ID：14528930
> 
> 赞同：0
> 
> 时间：2013-01-25T19:23:14.993
> 
> 标签：c#, rest, asp.net-web-api

我有架构问题。我有带有 ddd 的 Restfull api，我想什么是允许用户过滤数据的最佳方法（我使用 nhibarnate 作为 ORM）。

我想允许用户编写查询字符串示例：

> ?productName=test&orderId=2

到目前为止，我使用放置在 DTO 上的自定义属性（可以过滤的属性）并在引擎盖下将其转换为标准 API（使用反射和一些奇怪的技巧..）

我已经阅读过有关 OData 的信息，但如果我正确理解它基于 IQuerable（并且对 nHibernate 的支持不佳）。

您对此有何看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T20:48:27.790

Aspnet Web API OData 还公开了 ODataQueryOptions。您可以将 OData 查询模型绑定到 ODataQueryOptions 以获取查询的 AST（抽象语法树）表示，然后您可以遍历该查询以转换为 nHibernate 查询方法。

# php - 来自提供地址的 PHP 电子邮件

> ID：14528937
> 
> 赞同：1
> 
> 时间：2013-01-25T19:23:29.410
> 
> 标签：php, email, email-attachments

我有这个 PHP 脚本，我没有太多经验，但我提供了一封电子邮件，我希望使用该电子邮件地址发送电子邮件，它现在使用我的虚拟主机帐户的电子邮件地址......我需要改变什么?

```
<?PHP

$ai_to    = urldecode($_GET['to']);
$ai_from  = urldecode($_GET['fr']);
$ai_su    = urldecode($_GET['su']);
$ai_bo    = str_replace("CRLF","\n", urldecode($_GET['bo']));
$ai_fname = urldecode($_GET['fi']);
$ai_fpath = $ai_fname;

$header  = "From: " . 'aiapis mail svc:' . " <" . $ai_from . ">\r\n";
$header .= "Reply-To: " . $ai_from . "\r\n";

if ($ai_fname != '')
{
$data = file_get_contents('php://input');
if (file_put_contents($ai_fpath, $data) === FALSE) die("Upload failed, sen cancelled.");
   $file_size = filesize($ai_fpath);

   if ($file_size > 10485760) die("> 10MB. Send cancelled.");

   $emtemp = 'emailtemp.log';
   $current = file_get_contents($emtemp);
   $current .= gmdate("Y-m-d\TH:i:s") . ", " . $ai_fname . ", " . round($file_size/1048576, 3) . "MB\n";
   file_put_contents($emtemp, $current);   

   $handle = fopen($ai_fpath, "r");
   $content = fread($handle, $file_size);
   fclose($handle);
   $content = chunk_split(base64_encode($content));

   $uid = md5(uniqid(time()));

   $header .= "MIME-Version: 1.0\r\n";
   $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
   $header .= "This is a multi-part message in MIME format.\r\n";
   $header .= "--".$uid."\r\n";
   $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
   $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
   $header .= $ai_bo."\r\n\r\n";
   $header .= "--".$uid."\r\n";
   $header .= "Content-Type: application/octet-stream; name=\"".$ai_fname."\"\r\n";
   $header .= "Content-Transfer-Encoding: base64\r\n";
   $header .= "Content-Disposition: attachment; filename=\"".$ai_fname."\"\r\n\r\n";
   $header .= $content."\r\n\r\n";
   $header .= "--".$uid."--";

   $sent = mail($ai_to, $ai_su, "", $header);
}
else $sent = mail($ai_to, $ai_su, $ai_bo, $header);

if ($sent)
{
   if ($ai_fname != '')
   {
      unlink($ai_fpath);
      echo "Email+attachment sent.";
   }
   else echo "Email sent.";
}
else echo "Mail server rejected email.";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:35:34.827

消息的发送者设置在这一行：

```
$header  = "From: " . 'aiapis mail svc:' . " <" . $ai_from . ">\r\n"; 
```

该变量`$ai_from`是从名为“ `fr`”的 $_GET 变量设置的（它来自这样的 URL `http://www.google.com?fr=myemail@domain.net&to=touraddress@domain2.net`：）

这个脚本过去是否曾经工作过？

如果您不熟悉（30 岁以上）电子邮件 RFC，请不要使用[PHP 邮件功能](http://ca2.php.net/manual/en/function.mail.php)。

改用图书馆。

这两个很流行：[Swift Mailer](http://swiftmailer.org/)和[PHPMailer](http://phpmailer.worxware.com/)。我更喜欢 Swift Mailer，但两者都成功使用。我过去也使用`mail()`过，因为我有多年使用邮件的经验（使用 Delphi 和其他语言，所以我知道这些怪癖）。

如果您还想使用 mail()，请注意，如果您在某些情况下没有正确使用它，您的电子邮件将无法在有或没有退回的情况下发送（因此您可能不知道它已失败）。此外，发送的电子邮件`mail()`有时更容易被传送到垃圾邮件文件夹。

请参阅[此示例](http://swiftmailer.org/docs/sending.html)并在 PHP 中以简单的方式正确发送邮件。

顺便说一句，我不隶属于他们。

# ios - ios - resignFirstResponder 不工作

> ID：14528941
> 
> 赞同：0
> 
> 时间：2013-01-25T19:23:57.267
> 
> 标签：ios, uitextfield, modal-dialog, uitextfielddelegate, resignfirstresponder

我有一个模态显示的视图，其中包含 3 个标签。

第三个标签不应该是可编辑的，并且应该在点击它时显示一个 UIDatePicker，如果它显示则隐藏键盘。

所以我这样做了：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    if (textField == _birthdateTextField) {

        _birthdateDatePicker.hidden = NO;

        if ([_firstnameTextField isFirstResponder]) {
            NSLog(@"first");
            [_firstnameTextField resignFirstResponder];
        } else if ([_lastnameTextField isFirstResponder]) {
            NSLog(@"last");
            [_lastnameTextField resignFirstResponder];
        }

        return NO;
    }

    _birthdateDatePicker.hidden = YES;

    return YES;
} 
```

我可以清楚地看到我的日志消息（“第一个”或“最后一个”，取决于最后一个聚焦的文本字段），但键盘仍然显示。

有人在弄清楚这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:01:09.847

如果您将模态视图呈现为 UIModalPresentationFormSheet，答案在这里： [模态对话框不会关闭键盘](https://stackoverflow.com/questions/3019709/modal-dialog-does-not-dismiss-keyboard)

[如果模态 ViewController 演示样式为 UIModalPresentationFormSheet，iPad 键盘将不会关闭](https://stackoverflow.com/questions/3372333/ipad-keyboard-will-not-dismiss-if-modal-view-controller-presentation-style-is-ui)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:41:51.423

不必通过覆盖来完成这项复杂的工作，`textFieldShouldBeginEditing`您可以在某处执行此操作，例如`viewDidLoad`：

```
_birthdateTextField.inputView = _birthdateDatePicker; 
```

当您编辑生日文本字段时，日期选择器将替换键盘

# spring - spring 石英调度器记住运行信息

> ID：14528946
> 
> 赞同：2
> 
> 时间：2013-01-25T19:24:16.617
> 
> 标签：spring, quartz-scheduler

我有一个带有弹簧应用程序的石英调度程序。

每次石英触发作业时，作业都会创建一个列表（比如狗列表）。下次石英触发另一个作业时，我需要访问由前一个作业创建的列表。我怎样才能做到这一点。

我不能使用该对象的单个实例。因为这个对象可以被其他创建自己的列表的进程使用（比如奶牛列表、鸟类列表等）

我正在寻找的效果类似于实例变量并在循环中执行某些内容，并且每次在循环中更新实例变量时，循环的下一次迭代都可以访问实例变量的新值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:30:26.943

您需要一些可供所有作业访问的全局存储。在 Spring 中，您可以将 bean 注入作业并将该列表保存在其中一个 bean 中。您还可以利用[`JobDataMap`](http://quartz-scheduler.org/api/2.1.0/org/quartz/JobDataMap.html). 但是，它可能会序列化您的集合并将其反序列化。

问题实际上更复杂。请记住，Quartz 可以在多个节点上运行。在这种情况下，您将在数据库中存储为 BLOB 或自己使用数据库（例如，每条*dog*`JobDataMap`一行）。

# phpstorm - 在 PHPStorm 中查找未使用的公共和受保护方法

> ID：14528947
> 
> 赞同：29
> 
> 时间：2013-01-25T19:24:22.647
> 
> 标签：phpstorm

PHPStorm 有一个方便的*未使用私有方法* [检查](https://www.jetbrains.com/phpstorm/webhelp/code-inspection.html)，它可以检测毫无疑问未使用的方法。

我有时也会有兴趣扫描我的项目以查找未使用的公共/受保护方法。我知道这不是一门精确的科学，它会报告可能在该项目之外使用的方法（例如，在图书馆的情况下），但需要人工审查，这可能非常有用。

PHPStorm 目前可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-18T20:51:46.280

使用 PhpStorm 6 是不可能的。这是项目设置的快照（您可以在其中设置这些选项）：

![项目设置](../Images/7f4472901b1e0d027ce08999f87e08ee.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-29T09:03:36.883

**以下仅适用于私有方法。**

在 PHPStorm 7/8 中是可能的。转到代码 > 检查代码并使用自定义检查配置文件。在 Inspections 窗口中，单击 Add 并取消选择除 PHP > Unused 之外的所有内容。

**检查配置文件创建：**

![检查配置文件创建](../Images/ace37ee7edce08ceed9e40af576a031d.png)

**检验范围**

![检验范围](../Images/f613bc1741bcc8e033a78aa3958473b5.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-11T14:43:35.403

之前曾提出过要求，而且自 PhpStorm 2019.1 EAP #6 以来完全可以实现（详见[此处](https://blog.jetbrains.com/phpstorm/2019/02/phpstorm-2019-1-eap-191-5849-26/)）。

[![未使用的申报检查](../Images/b91986e6ab816baf3f176f3b7f6a0132.png)](https://i.stack.imgur.com/gB1CU.png)

您可以仅使用此检查创建一个新的检查配置文件，并使用*检查代码...*然后在您的应用程序中查找所有死代码。请注意，此检查允许您明确设置是否要报告字段、方法等，具有什么可见性级别，甚至设置入口点！

# asp.net-mvc-4 - 有效用户在 MVC 4 下的 Active Directory 成员资格提供程序登录失败

> ID：14528949
> 
> 赞同：0
> 
> 时间：2013-01-25T19:24:40.833
> 
> 标签：asp.net-mvc-4, activedirectorymembership, adlds

我正在尝试将 ActiveDirectoryMembershipProvider 与 MVC 4 和 AD LDS 一起使用进行身份验证。使用关于此事的许多帖子，我设法让服务器连接到 AD 服务器并尝试对用户进行身份验证，但这种身份验证似乎总是失败（即使我知道它是一个有效用户）。我们有一个域（比如 DC=foo,DC=bar,DC=us），我们的用户在该域下按组进行组织。例如，我们有 OU=someGroup,DC=foo,DC=bar,DC=us，在其下我们有 CN=someUser,OU=someGroup,DC=foo,DC=bar,DC=us。我尝试使用 someUser@foo.bar.us、someUser@someGroup.foo.bar.us 和 someUser 登录，结果相同。

1.  ~~我怎样才能让这个用户进行身份验证？~~
2.  有没有办法修改登录以通过uid全局搜索？cn?

Mythgarr 的回应固定了第一部分，但仍然不确定第二部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:56:56.640

嗯 - 对于第一个问题，您确定您已经为您的用户设置了 userPrincipalName 吗？这是用户定义的属性。您应该能够使用 ADSI Edit（或 Apache Directory Studio，或任何其他 LDAP 客户端）来检查该值。如果未设置，则说明您无法登录的原因。

至于第二种，一种可能性是将您的 userPrincipalName 设置为所需的 uid。这可能会导致您的系统内出现重复。看起来`attributeMapUsername="uid"` 应该可以工作，但这会引发异常。想听听任何知道如何做到这一点的人的来信吗？

# textarea - 你能用吗 Outside the Scope of a

I want to use the features and functionality that the `<textarea></code> tag offers in browsers. I want to use it merely to hold a large blo</h1> <blockquote> <p>ID：14528951</p> <p>赞同：9</p> <p>时间：2013-01-25T19:24:50.733</p> <p>标签：textarea</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：9</p> <p>时间：2013-01-25T19:37:58.857</p> </blockquote> <p>按照标准，<code>textarea</code>元素应该是元素的后代<code>form</code>。HTML5 允许放置<code>textarea</code>在表单之外，但要<code>form</code>填充属性。</p> <p>请参阅：<a href="https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea">https ://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea</a></p> <p>但据我所知，在主要浏览器中使用<code>textarea</code>表单外且没有<code>form</code>属性时不会出现任何错误。</p> <p>出于您在问题中描述的目的，您可以只使用<code>div</code>垂直滚动的元素：http: <a href="http://jsfiddle.net/f0t0n/Ybznv/">//jsfiddle.net/f0t0n/Ybznv/</a></p> <pre><code>#log { height: 256px; width: 512px; overflow: auto; } </code></pre> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：4</p> <p>时间：2013-01-25T19:28:21.437</p> </blockquote> <p>是的，你可以，但如果它只是滚动使用 div 并在 css 中像这样设置样式：</p> <p>例子：</p> <pre><code>div { overflow-x:scroll; height:200px; width:200px; border:solid black 1px; } </code></pre> <p>演示：http: <a href="http://jsbin.com/ugusos/2/edit" rel="nofollow">//jsbin.com/ugusos/2/edit</a></p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：1</p> <p>时间：2013-01-25T19:27:26.757</p> </blockquote> <p>是的，您可以在表单之外使用 textarea 标签，它们将显示并允许插入和编辑文本，但不与表单绑定，它们的使用可能会受到限制。尽管我想您始终可以将 document.getElementById("") 用于文本区域...</p> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：1</p> <p>时间：2013-01-25T19:30:49.140</p> </blockquote> <p>是的，您可以在表格之外使用，</p> <p>但是您也可以使用 div 元素，然后使用 contenteditable 属性，以便用户可以编辑信息。</p> <p><a href="http://html5doctor.com/the-contenteditable-attribute/" rel="nofollow">http://html5doctor.com/the-contenteditable-attribute/</a></p> <hr/> <h2>回答 #5</h2> <blockquote> <p>赞同：0</p> <p>时间：2013-05-23T04:56:50.910</p> </blockquote> <p>是的，您可以在表单之外使用 textarea；没有问题。 <br/> PS：但是没有充分的理由使用 textarea out 或 form。您可以使用 div 代替。</p> </body> </html></textarea>`

# python - Python - YouTube API v3 - 如何仅获取视频 ID？

> ID：14528958
> 
> 赞同：1
> 
> 时间：2013-01-25T19:25:24.173
> 
> 标签：python, youtube-api

如何仅获取视频的视频 ID？据我所知，我应该为此使用字段，但我不明白它们是如何工作的。我的代码：

```
service = build('youtube', 'v3', developerKey = api_key)
request = service.search().list(q = name, part='id',fields = *what should I type here*, maxResults = 1, type = 'video').execute() 
```

“名称”是搜索词变量。我从包含名称列表的文件中获取它。通过使用此代码，我得到了我不需要的信息。正如我所说，我只需要视频 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T01:51:51.160

您可以在此处尝试查询：

[https://developers.google.com/youtube/v3/docs/search/list#try-it](https://developers.google.com/youtube/v3/docs/search/list#try-it)

我相信以下查询是您只想搜索和检索视频 ID 的方式：

[https://www.googleapis.com/youtube/v3/search?part=id&q=](https://www.googleapis.com/youtube/v3/search?part=id&q=) {NAME}&type=video&fields=items%2Fid&key={YOUR_API_KEY}

例如，如果 {NAME} 是 psy，则此调用返回以下数据，您可以从中检索其中一项的 videoId；

```
{
 "items": [
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "9bZkp7q19f0"
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "Ecw4O5KgvsU"
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "o443b2rfFnY"
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "WOyo7JD7hjo"
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "QZmkU5Pg1sw"
   }
  }
 ]
} 
```

如果您修改 python 客户端库中包含的示例：

[https://developers.google.com/api-client-library/python/](https://developers.google.com/api-client-library/python/)

你可以这样做：

```
search_response = service.search().list(
  q="google",
  part="id",
  type="video",
  fields="items/id"
).execute()

videos = []

for search_result in search_response.get("items", []):
    videos.append("%s" % (search_result["id"]["videoId"]))

print "Videos:\n", "\n".join(videos), "\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-13T00:46:27.867

试试下面的代码：

```
import requests
import json
payload = {'part': 'snippet', 'key': DEVELOPER_KEY, 'order':'viewCount', 'q': 'A R Rahman', 'maxResults': 1}
l = requests.Session().get('https://www.googleapis.com/youtube/v3/search', params=payload)    
resp_dict = json.loads(l.content)
print resp_dict['items']
for i in resp_dict['items']:
   print "VideoId: ",i['id']['videoId'] 
```

# internet-explorer - koGrid 在 IE7 中导致“混合内容”警告

> ID：14528959
> 
> 赞同：2
> 
> 时间：2013-01-25T19:25:32.170
> 
> 标签：internet-explorer, knockout.js, internet-explorer-7, kogrid

koGrid 导致 IE7 显示其“混合内容”警告。

这是什么原因造成的？有解决办法吗？

[http://jsfiddle.net/3uyaK/1/](http://jsfiddle.net/3uyaK/1/)

```
<div data-bind="koGrid: { data: myObservableArray }"></div>

var vm = {
  myObservableArray: ko.observableArray([{id:1, name:"a"}, {id:2, name:"b"}])
};

ko.applyBindings(vm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:04:29.703

> 这是什么原因造成的？有解决办法吗？

也许这个问题有解决方法，但我不希望官方修复......

因为koGrid**不支持 IE7 。**

从已关闭的[github 问题 #162](https://github.com/Knockout-Contrib/KoGrid/issues/162)：

> timothyswt 评论
> 说不支持 Ie7。

# grails - Grails、jQuery 和 Ajax

> ID：14528960
> 
> 赞同：0
> 
> 时间：2013-01-25T19:25:37.103
> 
> 标签：grails

当在选择框中选择讲师时，我想要一个列出讲师（来自会话`variable:session.eligibleInstructor.FULLNAME`）的选择框，以使用选定的讲师电子邮件地址更新文本字段（该电子邮件也可在同一会话变量`session.eligibleInstructor.EMAIL`中使用：）。我知道我的 javascript 正在捕获选定的讲师（因为我做了一个“警报”）：

```
$('#inst2Select').change(function(event){
  $('#emailInst2').load('/edu.wit.nonac/nonAcadCourse/create/updateSelect',
    {
      selectedInst: $(event.target).val()
    },
    function() {alert($(event.target).val())
} 
```

但我的控制器操作（updateSelect）没有做任何事情：

```
def updateSelect = {
        //nonacCourseConsole3.url.root = "/edu.wit.nonac" + "/";
        println("UpdateSelect reached")
        def ctx = startAsync()

        ctx.start{
        println("Params: "  + params.any())
        def selectedInstEmail = dbConnection.firstRow("select EMAIL from  zV_eligibleInstructors where FIRSTNAME=?", [params.selectedInst])
        println(selectedInstEmail)
        render selectedInstEmail

        }

    } 
```

我已经尝试了多个 ajax 类型的回调，甚至是“onchange”事件中的 remoteFunction。我意识到我不应该返回数据库来获取选定的讲师电子邮件，因为它已经在会话变量中可用。我查看了数百个网页来寻找答案，但似乎没有一个完全涉及这个确切的问题。即使我可以让控制器动作触发，那将是向前迈出的一大步。有没有人建议什么是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:43:53.200

您可以让您的视图生成一个 Javascript 对象结构，其中包含教师的全名和他们的电子邮件地址。在您的控制器中，您可以构建一个讲师地图，将讲师的全名映射到他们的电子邮件地址。然后在您看来，您可以拥有类似的东西

```
<script type="text/javascript">
  var instructors = {
    <g:each in="${instructorMap}" var="mapEntry">
      "${mapEntry.key}": "${mapEntry.value}",
    </g:each>
  }
</script> 
```

然后在您的更改事件处理程序中，您可以从讲师变量中提取值。

仅当您可以保证全名是唯一的时，这才有效。如果没有，您可以设置类似的两个变量instructorNames（将id 映射到全名）和instructorEmails（将id 映射到电子邮件）。

# c - 使用 fgets 搜索字符和/或正则表达式

> ID：14528964
> 
> 赞同：0
> 
> 时间：2013-01-25T19:25:56.637
> 
> 标签：c, regex, fgets

我有这个简单的代码块，它使用 fgets() 读取文件中的一行。现在我想在这一行中搜索是否有“{”或“}”并对已注释的注释进行忽略。对于函数 { 和 }，我想添加这样的评论 //This is a good { 。我怎么能做到这一点？我应该使用正则表达式吗？我删除了 while 循环以简化逐行迭代。

我可以以某种方式使用 mystring，我认为它是一个数组吗？我可以追加修改它的字符串吗？或者我要做的是创建一个新数组，将 mystring 放入其中，然后放入注释。

例如：myfile.txt

```
/* Hello {} */
function
{
  hello();
} 
```

输出

```
/* Hello {} */ //Ignored
function
{ //This is a good {
  hello();
} //This is a good } 
```

我的简单块：

```
#include <stdio.h>
int main()
{
    FILE * pFile;
    char mystring [100];

    pFile = fopen ("myfile.txt" , "r");
    if (pFile == NULL) perror ("Error opening file");
    else {
        if ( fgets (mystring , 100 , pFile) != NULL )
            puts (mystring);
        fclose (pFile);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:41:42.093

这可以使用 [http://www.lemoda.net/c/unix-regex/index.html](http://www.lemoda.net/c/unix-regex/index.html)。

我也许可以给代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:42:07.490

这是一个简单的方法，你可以如何处理你的 mystring。

```
char *ptr=strchr(mystring,'{');
if(ptr)
{  
   sprintf(mystring,"%s //This is a goof {",mystring);
}
else
{
  ptr=strchr(mystring,'}');
  if(ptr)
  {
     sprintf(mystring,"%s //This is a goof }",mystring);
  }
} 
```

希望这可以帮助。

# oracle - Microsoft Access 支持针对链接的 Oracle 表的复选框列

> ID：14528967
> 
> 赞同：1
> 
> 时间：2013-01-25T19:26:00.330
> 
> 标签：oracle, ms-access, checkbox, boolean, linked-tables

我有一个使用链接 Oracle 表的访问文件。

当我在 Access 中打开链接表时，我希望将列显示为复选框，就像`YES`/ `NO`Access 数据类型一样。

有谁知道我怎么能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:06:37.777

如果您反对为链接表使用带有复选框控件的表单，您可以修改链接表的`TableDef`. 将*DisplayControl*属性添加到您的数值字段，其属性值为 106 以作为复选框。

我在立即窗口中运行了以下示例。 `dbo_foo`链接到 SQL Server 表，因为我没有可用的 Oracle。该字段`a_number`由 Access 解释为 Long Integer（不是 Yes/No 数据类型）。

```
set db = currentdb
set fld = db.TableDefs("dbo_foo").Fields("a_number")
fld.Properties.Append fld.CreateProperty("DisplayControl", dbInteger, 106)
' verify property created with correct value ...
? fld.Properties("DisplayControl")
 106 
```

如果由于某种原因您的目标字段已经设置了不同的*DisplayControl*值，只需更改该值（而不是`.Append`with `.CreateProperty`）。

```
fld.Properties("DisplayControl") = 106 
```

设置属性后，我的字段在数据表视图中打开`a_number`时显示为复选框。`dbo_foo`看看这种方法是否为您提供了您想要的 Oracle 表。

# networking - 网络复制 - 将文件从一台服务器传输到另一台服务器

> ID：14528969
> 
> 赞同：1
> 
> 时间：2013-01-25T19:26:03.720
> 
> 标签：networking, file-transfer, smb, copying

这个问题非常基本，但我最近一直被困扰。假设在同一网络中有两台服务器 A 和 B 与运行 Win 7 的工作站 W文件，工作站 W 在其中扮演什么角色？

我的假设是数据通过它们插入的开关直接从 A 传输到 B。但是，Win 7 用来挂载这些驱动器的网络协议呢？它会影响整个过程吗？

在此先感谢您提供有关此信息的任何信息。对此，我真的非常感激。

# java - 是否可以使用 Camel Seda 创建一个空队列？

> ID：14528976
> 
> 赞同：1
> 
> 时间：2013-01-25T19:26:18.747
> 
> 标签：java, apache-camel

最近我想出了一个问题。如何使 Camel 应用程序限制同时服务的连接。首先，我想到了 Throttler EIP，但在阅读了它之后没有考虑使用它，并得出结论认为它不适合我的需要。配置为每秒最多 10 条消息的 Throttler 将只允许这么多消息通过我的消息系统，即使这 10 个请求在几毫秒内得到处理。我需要提供 10 个并发连接，这意味着我每秒可以处理数百条消息——但永远不能超过 10 个连接的限制。如果超过，我必须向调用者返回一个异常，告诉他一次不允许使用超过 10 个连接。我不能以任何方式排队他的请求，

然后我发现 SEDA 组件可以满足我的需要。如果有 10 个并发消费者，队列大小为 0（零），我将获得同时提供 10 个连接的限制，并且每个新连接都将被拒绝。问题是 SEDA 在 Camel 2.10.3 中的行为方式。当我配置“size=0”时，它会自动使用 Integer.MAX_VALUE（在 jConsole 中看到）。当我将队列设置为“1”时，它按预期工作，但我根本没有任何队列。

搜索 Camel SEDA 的源代码，我看到它使用 LinkedBlockingQueue 作为 SEDA 队列，容量不能为 0。所以使用默认构造函数，确实使用 Integer.MAX_VALUE 作为队列。

我错过了什么吗？还有其他方法可以解决我的问题吗？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:29:45.347

您还可以使用线程使用线程池同时执行消息，您可以在其中指定最小/最大线程。

```
from(somewhere)
   .threads(10)
   .to(a)
   .to(b) 
```

本页底部的一些细节：http: [//camel.apache.org/async.html](http://camel.apache.org/async.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T07:21:09.517

连接可能意味着很多事情，但我假设您想限制路线中飞行中的交换数量。有些组件确实内置了类似的东西，例如码头组件（假设你不做异步的东西）。在一般情况下，您可以使用路由策略。您可能需要自己编写一个，但它应该相当简单。我猜提供的 ThrottlingInFlightRoutePolicy 对于您的情况来说过于粗糙。

# java - BufferedReader ReadLine 冻结了程序

> ID：14528978
> 
> 赞同：1
> 
> 时间：2013-01-25T19:26:36.403
> 
> 标签：java, bufferedreader

我的代码如下；

当我使用 BufferedRead readLine() 时，整个程序被冻结。问题是 readLine 在到达行尾之前不会返回该行。因为服务器不会发送一个新的 line char 值，所以它不会关闭。

那么我该如何克服呢？请编辑我的代码；

```
 while (ok) {
                        BufferedReader re = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                        aString = re.readLine();
                        ...
                    } 
```

注意：我想以编程方式执行此操作，而不是去杀死正在运行它的进程

```
UPDATE

StringBuilder re= new StringBuilder();
                    while ((c = r.read()) >= 0) {
                            re.append( (char)c ) ;  
                    }
                    String result = re.toString();
                    byte[] contentInBytes = result.getBytes();
                    out.write(contentInBytes);
                    out.flush();
                    out.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:05:32.233

不要使用[BufferedReader](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html)的 readLine() 方法。使用 read() 方法，它将读取单个字符。您必须将它们从整数转换为字符，但这会让您无需读取换行符。

编辑：添加假设“re”是您的缓冲套接字输入流阅读器......

```
while ((i = re.read()) != -1)
{
   if (i > 0)
   {
      char c = (char) i;
      // Do something with the character
   }
} 
```

结束编辑

此外，如果您担心服务器没有响应，那么您可能需要在[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSoTimeout%28int%29)上设置超时：

```
socket.setSoTimeout(milliseconds); 
```

# functional-programming - 来自红宝石背景时要选择的函数式编程语言

> ID：14528982
> 
> 赞同：0
> 
> 时间：2013-01-25T19:26:51.983
> 
> 标签：functional-programming

我有混合的 C++ 和 Ruby 背景。是否有任何函数式编程语言与其中任何一种有一些相似之处？我正在尝试学习一种函数式编程语言，一点句法或任何其他形式的熟悉无疑会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:43:28.643

如果您打算只学习函数式编程，目的是根据需要学习其他函数式语言，那么请**专注于一本关于函数式语言的书，这本书是有意义**的，并致力于此，而不是尝试选择一种语言并找到教授该语言的学习材料。一旦你掌握了一种功能语言，其余的就会变得越来越容易。我从 F# 开始，但在不到一年的时间里学习了 OCaml、LISP 和现在的 ML。我还没有达到 Haskell，但总有一天应该。

我建议你从挑选一些学习材料开始的原因是互联网上有很多好的免费书籍。我倾向于从他们所教大学的讲师帐户中找到它们的 PDF 文件。大多数语言也是免费的，但 IDE 的强大功能从语法高亮到 Eclipse 和 Visual Studio。

由于您需要考虑不同的概念，因此不要随身携带您所知道的命令式或面向对象编程的包袱。重新开始，它会更容易。

这里还有一些[建议](https://softwareengineering.stackexchange.com/a/145874/49838)。

作为相同概念但语言语法不同的示例，请参见[折叠](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)、[映射](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)、[过滤器](http://en.wikipedia.org/wiki/Filter_%28higher-order_function%29)和[列表理解](http://en.wikipedia.org/wiki/List_comprehension)。

此外，为了帮助您查看多语言的完整示例（任务），请参阅[树遍历，](http://rosettacode.org/wiki/Tree_traversal#F.23)[此处](http://rosettacode.org/wiki/Category:Programming_Tasks)包含功能语言列表和[此处](http://rosettacode.org/wiki/Category:Programming_paradigm/Functional)的所有任务列表。

如您所见，语法差异很大。我发现在初始版本之后通过扩展语言、添加库或使用模板来增加功能能力的语言是最难理解的。

# virtual-machine - 在 Ubuntu 12.04 VirtualBox Guest 上安装 IPython 并从 Windows 主机上的浏览器中使用它

> ID：14528987
> 
> 赞同：3
> 
> 时间：2013-01-25T19:27:09.313
> 
> 标签：virtual-machine, virtualbox, ipython, ipython-notebook

在客户机（Ubuntu 12.04）上，我照常从存储库中安装了 ipython 和 ipython-notebook。然后我运行 ipython notebook 启动服务器并尝试从主机的浏览器访问页面（运行 Windows 7），但它不会连接。

ipython 服务器在默认端口 8888 上运行。我尝试使用虚拟机的 NAT 配置并将端口 8888 从主机路由到客户机上的 8888，但没有成功。我也尝试过使用桥接网络，但我不确定我应该在浏览器中输入哪个方向。是否是 8888 端口上使用 ifconfig 命令显示的 eth0 的主机 IP？

是否有可能使此配置正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T21:16:49.763

IPython Notebook 默认在 localhost 上运行。我认为主机操作系统看不到 VM 的环回接口。您必须指示笔记本使用以下命令监听 VM 的“公共”IP

```
ipython notebook --ip=a.b.c.d 
```

那么你应该能够从你的主机连接。

您也可以像`NotebookApp.ip = 'a.b.c.d'`在 ipython_notebook_config.py 中一样永久设置此值。

# unix - sed 脚本有条件地复制数字

> ID：14528991
> 
> 赞同：0
> 
> 时间：2013-01-25T19:27:34.377
> 
> 标签：unix, sed

我需要编写一个`sed`脚本来执行以下操作：如果一行包含 3 个数字，那么从第 4 个数字开始，该数字将被写入两次。

例如，此输入的输出：

```
abc 1 def2 3 ab4
123 zy 
ab1cd2ef3gh4z56 
```

将会：

```
abc 1 def2 3 ab44 
123 zy 
ab1cd2ef3gh44z5566 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T21:18:26.527

这可能对您有用（GNU sed）：

```
sed 's/[0-9]/&&/4g' file 
```

另一种可能适合大多数其他 sed 的替代方法是：

```
sed '/\(\([0-9][^0-9]*\)\{3\}\)\([0-9]\)/{s//\1\n\3/;h;s/[0-9]/&&/g;G;s/.*\n\(.*\)\n\(.*\)\n.*/\2\1/}' file 
```

*   `/\(\([0-9][^0-9]*\)\{3\}\)\([0-9]\)/`如果该行包含 4 个或更多数字
*   `s//\1\n\3/`标记第 4 个数字以换行符开头的位置
*   `h`将标记的行复制到保留空间 (HS)
*   `s/[0-9]/&&/g`将模式空间中的所有数字加倍 (PS)
*   `G`将换行符和 HS 添加到 PS
*   `s/.*\n\(.*\)\n\(.*\)\n.*/\2\1/`使用原始线的第一部分和处理线的第二部分重新排列线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:02:57.280

`perl`这可能比使用更容易`sed`：

```
$ cat /tmp/test
abc 1 def2 3 ab4
123 zy 
ab1cd2ef3gh4z56

$ perl -n < /tmp/test -e '
$count = 0;
while (/([^\d]*)(\d)/gi) {
  print $1, (++$count > 3 ? "$2$2" : $2), $3
}
print "\n";
' 
```

# objective-c - 从 NSMutableArray 转换和求和时间间隔

> ID：14528992
> 
> 赞同：0
> 
> 时间：2013-01-25T19:27:36.450
> 
> 标签：objective-c, loops, nsmutablearray

我对 Objective-C 很陌生，需要一点帮助。我有一系列歌曲：

```
 {
    artist = "Bernard Herrmann";
    duration = "2:34";
    id = 5;
    title = "Torn Curtain: The Unused Score";
},
    {
    artist = "Miklos Razsa";
    duration = "3:47";
    id = 6;
    title = "Ivanhoe [Original]";
},
...etc. 
```

我想遍历数组，将持续时间（当前`NSStrings`）转换为我可以用来表示实际经过时间的东西，然后将它们相加，以便我可以计算播放播放列表的总时间。我已经开始研究循环：

**更新：**

```
- (NSInteger)convertDuration
{
    NSInteger totalSeconds=0;
    for(NSMutableArray *song in playlist){
        NSString *durationString = [playlist valueForKey:@"duration"];
        NSArray *breakMinSec = [durationString componentsSeparatedByString:@":"];
        NSInteger sec = [breakMinSec[1]integerValue];
        NSInteger min = [breakMinSec[0]integerValue];
        totalSeconds += ( sec + min * 60 );
        }
    return totalSeconds;
} 
```

现在看起来，durationString 正在拉动第一次迭代中的所有持续时间。它不会像这样编译。我如何确保每次迭代只获得一个持续时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:33:00.303

这里无需将其转换为 NSTimeInterval 或 NSDate。您可以简单地将所有持续时间添加到数组中。然后打破分钟和秒，添加所有分钟和所有秒。

然后

```
 totalSeconds%=60;
 totalMinutes+=totalSeconds/60; 
```

* * *

编辑：你可以怎么做的想法（未经编译器检查）

```
//NSMutableArray *durationArray=[NSMutableArray new];
NSInteger totalseconds=0;
for(NSDictionary *song in songDict){
    NSString *durationString=song[@"duration"];
    NSArray *breakMinSec=[durationString componentsSepartedByString:@":"];
    NSInteger sec=[breakMinsec[1]integerValue];
    NSInteger min=[[breakMinSec[0]integerValue];
    //[durationArray addObject:@[sec+min*60]];
    totalseconds+=(sec+min*60);
} 
```

这将以秒为单位存储每首歌曲的时间。然后你可以根据你的需要操纵这个值。

编辑：

看到您的编辑后：

> 我如何确保每次迭代只获得一个持续时间？

您可以向您的方法发送一个值，该值将返回该特定歌曲的持续时间。或者就像我之前的回答一样，每个持续时间都保存在基于索引的数组中，您可以从那里轻松检索。

# javascript - 是否有任何 javascript 库实现了诸如瑞典语之类的字母排序方法？

> ID：14528998
> 
> 赞同：5
> 
> 时间：2013-01-25T19:27:57.487
> 
> 标签：javascript, sorting, localization, internationalization

我知道您可以使用方法“ *localeCompare* ”对具有您自己的本地化的数组进行排序，如下所示：

```
aArray.sort(function(a,b){return a.localeCompare(b)}); 
```

但是，我假设我的瑞典语网站的大多数（几乎所有）访问者都了解瑞典语，因此无论他/她当前使用的是哪个“*语言环境”，他们都会期望瑞典语排序。*

（我认为现在有些人会很想就这个假设争论，但我真的认为理解瑞典语但目前使用其他语言环境的人会比不知道瑞典语字母表的人多会期望“å”和“ä”与“a”和“ö”等价排序与“o”等价。我真的希望最后三个瑞典字母“åäö”**始终**按该顺序排序，**不管**浏览器或操作系统，无论是什么定义了方法“ *localeCompare* ”使用的“语言环境”）

一种解决方案可能是以编程方式强制执行调用方法“localeCompare”时使用的“语言环境”，但据我所知，这是不可能的。（虽然如果它真的是可能的，那么你如何改变语言环境？）

这个排序问题对所有瑞典 javascript 程序员来说应该是相当普遍的，但我仍然无法找到任何开源库，其中实现了瑞典字符串的比较方法。这里有没有人知道这样一个库（与 sort 方法一起使用时具有良好的性能）来重用而不是尝试自己实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:33:08.833

[JavaScript Internationalization API](http://norbertlindenberg.com/2012/12/ecmascript-internationalization-api/index.html) 提供您所需要的。我参考的页面上有一些使用示例。不幸的是，它还没有被浏览器广泛支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:15:46.853

@Richard Marr（评论[Is there any javascript library with implementations for letters such as swedish?](https://stackoverflow.com/questions/14528998/is-there-any-javascript-library-with-implementations-of-sort-methods-for-alphabe#comment20260488_14528998)）

好吧，我不确定这会非常困难，但对我来说，让它像使用 javascript 一样高效可能并不容易。感觉就像在尝试重新发明轮子，而擅长 javascript 的人可能已经比我做得更好了。考虑到有多少开源库存在于几乎任何东西上，当我不得不意识到这个东西还不存在时，我会有点惊讶。

关于您的代码片段

```
'sort(function(a,b){ return position[a] - position[b]; })' 
```

在我看来，您期望 a 和 b 是字符。例如，我想您想到的是以下类型的结构：

```
var position = {
// e.g. essentially the codes here: http://en.wikipedia.org/wiki/Multinational_Character_Set
'A': 65,
'B': 66,
//...
// the three swedish characters:
//'Ä': 196, 
//'Å: 197,
//'Ö': 214,
// The above are the correct values according to the codes, but the relative ordering of Å and Ä is not correct for swedish so therefore I switch the values below:
'Å': 196, 
'Ä': 197,
'Ö': 214
}; 
```

确实可以使用这样的位置结构，但是由于 sort 方法的函数参数接收两个任意字符串而不是只有一个字符的字符串，所以我猜两个字符串中的每个字符（直到第一个差异）都必须被迭代和与职位结构相比。我希望有一种更好（更有效）的方式来做到这一点......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:18:54.593

@Pawel Dyda（评论[是否有任何 javascript 库实现了诸如瑞典语之类的字母排序方法？](https://stackoverflow.com/questions/14528998/is-there-any-javascript-library-with-implementations-of-sort-methods-for-alphabe#comment20261160_14528998)）

不，不是 JS-only，但我找到了 jQuery tablesorter，我认为这是一个不错的，但是当我找到以下代码时遇到了排序问题：

```
$('table').tablesorter({ 
  textSorter: function(a,b) { 
    return a.localeCompare(b); 
  } 
}); 
```

（记录在页面[http://mottie.github.com/tablesorter/docs/](http://mottie.github.com/tablesorter/docs/)的“sortLocaleCompare”中）

事实上，我打算在服务器上实现排序，也支持禁用 javascript 的客户端，但对于使用 javascript 的客户端，我认为我可以使用 tablesorter 而无需再次请求 Web 服务器以获得相同的结果集（但排序不同）。至少对于足够小的不需要分页的结果集实现它是非常简单的，即当所有行都适合一页时，您可以为 jQuery 表排序器生成“ *serverSideSorting: false* ”，然后它会自动在网络中对其进行排序浏览器。